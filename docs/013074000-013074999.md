# StackOverflow 问答 13074000-13074999

# html - 带有透明图像和渐变的 Css 背景

> ID：13074001
> 
> 赞同：2
> 
> 时间：2012-10-25T17:27:55.403
> 
> 标签：html, css, image, background, gradient

我该怎么做？我所拥有的是这些图像和这些渐变，但我只显示渐变而不是两者。

```
div {
    background: url(/Icons/icon.png) no-repeat;
    background-image: -moz-linear-gradient(top, #a2a2a2, #878787);
    background-image: -ms-linear-gradient(top, #a2a2a2, #878787);
    background-image: -o-linear-gradient(top, #a2a2a2, #878787);
    background-image: -webkit-linear-gradient(top, #a2a2a2, #878787);
    background-image: linear-gradient(top, #a2a2a2, #878787);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:32:33.993

听起来你想要多个背景图像。从逻辑上讲，渐变似乎是一种背景颜色，但浏览器将渐变信息视为背景图像。

尝试类似：

```
div{
    background-image: -moz-linear-gradient(top, #a2a2a2, #878787), url(/Icons/icon.png);
    background-image: -ms-linear-gradient(top, #a2a2a2, #878787), url(/Icons/icon.png);
    background-image: -o-linear-gradient(top, #a2a2a2, #878787), url(/Icons/icon.png);
    background-image: -webkit-linear-gradient(top, #a2a2a2, #878787), url(/Icons/icon.png);
    background-image: linear-gradient(top, #a2a2a2, #878787), url(/Icons/icon.png);
    background-repeat: no-repeat, no-repeat;
} 
```

# sql - 如何在 SQL AZURE 中的 SQL SERVER 中执行相同的任务？

> ID：13074003
> 
> 赞同：0
> 
> 时间：2012-10-25T17:28:02.970
> 
> 标签：sql, sql-server, sql-server-2008-r2, azure-sql-database

我将我的连接`SQL AZURE`到`SQL SERVER 2008 R2`。我意识到我不能使用 GUI 来创建我的表、编辑表的设计、插入..更新..删除数据等。

是否有可能使用 SQL SERVER 2008R2 我可以使用 GUI 执行最后的任务？

另一天，我看到了一些关于与本地数据库和 azure 的数据同步的内容，但我不确定那是什么。如果这对我正在寻找的东西很重要，我会提到它。

![在此处输入图像描述](../Images/c5d22650bbd8fc9e760193fc71e838e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:32:09.667

您可以使用 redgate toolbelt 工具包与 SQL Azure 进行数据同步。它非常易于使用。SQL Azure 不提供与 sql server 208 r2 相同的 GUI。但是 Amazon RDS 提供了该功能。您可以使用 SQL Azure 管理控制台查看 SQL Azure 中的表和数据。

# perl - ... 使用 Perl 和 REST 构建和实施帮助

> ID：13074004
> 
> 赞同：-2
> 
> 时间：2012-10-25T17:28:08.933
> 
> 标签：perl, rest

我真的只需要一些基本的软件工程架构指导......当我说“架构”时，我的意思是我可以在我拥有的 Perl 书中找到的伪代码或语句，并希望有一些在线示例......

我正在使用 Perl，我正在尝试解析 Unix 系统上的 Medline/Pubmed 文件路径，以便最终将 PMID 从每个路径传递到 pmid2doi 转换网站 ( [http://www.pmid2doi.org/](http://www.pmid2doi.org/) )。

每个链接的结构是形式的文件路径...

```
/xxxxx/xxxxx/xxxxx/xxxxx/xxxxx/UNC00000000000042/00223468/v45i3/S0022346809003820
                                                |<-PMID->| 
```

`00223468`PMID在哪里。

```
$ ls
18507872 main.pdf main.raw main.xml 
```

到目前为止，我有一些看起来像这样的东西（在 bash 中）：

```
for doi in `find . -name "*.xml" | awk -F\/ '{print $2}' `  #this extracts the PMID
do
        echo  $doi
        wget pmid2doi website
done 
```

现在我需要帮助将它翻译成 Perl。

pmid2doi网站需要输入 PMID 才能取回 DOI *。*

这是我在 Perl 中运行所需要的，我需要一些帮助来设计实现它......

鉴于您的开发背景，我将不胜感激在 Perl 中生成正则表达式的任何见解或推荐网站。

非常感谢！

此外：

我看到*pmid2doi*网站说 REST API 需要网站*加上*DOI 值。
所以我需要找到一些从 URL 获取 REST 值的示例 Perl 代码。
在 REST 中，我只是按照指定的方式准备 URL，然后返回的结果应该是我想要的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:57:28.520

可能是这样的？

```
use File::Find;

my $client = REST::Client->new( $an_url );
File::Find::find( sub { 
        return unless m/\.xml$/;
        carp "Could not open $File::Find::name!" 
            unless open( my $fh, '<', $File::Find::name )
            ;
        my $doi;
        while ( <$fh> ) { 
            next unless ( $doi ) = m{[^/]*/([^/]*)};
            $client->GET( join( '/', $base, $doi ));
            do_stuff_with_content( $client->responseContent );
        }
        close $fh;
    } => '.'
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:21:39.403

我是不是误解了一些事情，或者您可以在本地 Perl 中执行此操作而不打扰网站吗？无需访问远程主机并处理延迟、使用限制等...

[https://metacpan.org/module/Bio::DB::EUtilities](https://metacpan.org/module/Bio::DB::EUtilities)

编辑：我是，那是 NCBI 的 CGI 客户端。来自文档：“一个单独的项目，目前存在于 BioPerl-Run 中，为 eUtils 使用基于 SOAP 的界面。”

[https://bitbucket.org/reece/docdepot/src/ca32360f6fa4/archive/perl-version/bin/doi-to-pmid](https://bitbucket.org/reece/docdepot/src/ca32360f6fa4/archive/perl-version/bin/doi-to-pmid)

```
#!/usr/bin/perl
# doi-to-pmid -- get the PubMed ids for a doi

use strict;
use warnings;

use Bio::DB::EUtilities;

my @pmids = doi_to_pmids( $ARGV[0] );
exit 1 unless (@pmids);
print( join("\n",@pmids), "\n" );

exit;

sub doi_to_pmids {
  my $doi = $_[0];
  my $f = Bio::DB::EUtilities->new(-eutil => 'esearch',
                                                                   -db => 'pubmed',
                                                                   -term => "$doi [doi]");
  my @ids = $f->get_ids();
  return (@ids);
} 
```

# c# - 如何以编程方式将 ASP.NET 页面重新加载为新会话，就像第一次访问该页面一样

> ID：13074011
> 
> 赞同：4
> 
> 时间：2012-10-25T17:28:39.637
> 
> 标签：c#, asp.net, session, web-applications

我有一个使用单个页面的 ASP.NET Web 应用程序，但在整个工作流程中使某些控件不可见，而其他控件则可见。这是一个相当简单的应用程序，这就是它只使用一个页面的原因。

我不确定当用户单击取消按钮或完成工作流程时如何重新加载页面。以下是有关应用程序工作流程的一些详细信息...

*   该页面加载并显示一个 LoginTable 控件，其中包含一个包含员工姓名的下拉列表、一个用于输入所选员工的密码的密码键盘和一个登录按钮。
*   单击登录按钮时，将在验证 pin 的位置进行回发，如果有效，则包含大部分页面内容（标题除外）的 Table 控件将变为不可见，并且新的 Table 控件将根据当前设置变为可见状态（打卡或打卡）。
*   此时，无论是ClockInTable 还是ClockOutTable 控件都是可见的，而LoginTable 控件是不可见的。用户可以单击“取消”按钮或“打卡/打卡”按钮（如果打卡，还可以选择其他一些东西，例如工作地点和工作）。

我想要的是，当用户单击“取消”、“打卡”或“打卡”按钮（在回发的任何其他处理之后）时，页面再次加载新会话并再次显示主 LoginTable，就像用户有重新启动浏览器并第一次打开该页面。

我试过使用 Session.Abandon()，然后在 Global.asax Session_End 事件中，我做 Response.Redirect("Login.aspx");

但这不起作用；它仍然只是重新加载页面的相同视图。

你如何重新加载页面（不刷新页面），就好像它是第一次访问（即不是回发）？

另外，我是 ASP.NET 的新手，所以如果我误解了会话的工作原理，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:32:33.667

您是否尝试过 Response.Redirect()-ing 用户到同一页面？这应该像加载新页面一样加载页面。但它不会丢失会话数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:38:04.393

我不确定您是否可以按照您描述的方式进行操作。但是，您可以做的是将标志作为会话变量。说吧`IsFirstComer`。我不确定您系统的工作流程是如何进行的，但是您可以将其重置为`true`每次新用户登录（尚未开始工作流程）或退出工作流程（需要重新开始）时，但只要用户启动了您将其设置为的工作流程`false`。然后可以通过 的值来控制您的控件行为`IsFirstComer`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:47:27.903

你有没有写：`if(!this.IsPostback)`在`Page_Load`方法中，然后`Response.Redirect(page.aspx)`再尝试“”。

# ios - 如何通过转换器或以编程方式将 .aiff 转换为 .caf？

> ID：13074019
> 
> 赞同：0
> 
> 时间：2012-10-25T17:29:33.230
> 
> 标签：ios, audio

任何人都知道如何将我的 .aiff 音频文件转换为 .caf 音频文件？任何转换器的任何链接都会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T17:41:09.613

这是在终端中执行此操作的方法：

`afconvert -f caff -d aacl@22050 -c 1 sound.aiff sound.caf`

目录脚本中的所有文件：

```
for f in *; do
if [ "$f" != "converttocaf.sh" ]
then
/usr/bin/afconvert -f caff -d 'aac ' -c 1 -l Mono $f
echo "$f converted"
fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:57:19.943

我已经使用以下命令直接在 caf 文件中转换了 wav 文件：

afconvert -f caff -d LEI16 -c 1 trampoline.wav trampoline.caf

您还可以在以下链接中找到一些关于转换文件扩展名的最佳实践的有用命令：http: [//gamua.com/blog/2010/06/sound-on-ios-best-practices/](http://gamua.com/blog/2010/06/sound-on-ios-best-practices/)

# c - c中的刽子手控制台游戏

> ID：13074022
> 
> 赞同：0
> 
> 时间：2012-10-25T17:29:46.353
> 
> 标签：c, linked-list

```
#include<stdio.h>
#include<string.h>
#include<time.h>
#include<stdlib.h>
typedef struct dic {
    int index;
    char string[10];
    struct dic *next;
}node;
main() {
    FILE *fp;int indexrand;node *head;node *mainhead;
    char s[10],question[10],answer[10];char check;
    int count=-1,i,j,k,len,flag;head=(node *) malloc(sizeof(node));
    mainhead=head;
    fp=fopen("dictionary.txt","r");
    while((fgets(s,10,fp))!=NULL) {
        strcpy(head->string,s);
        count++;  
        (head->index)=count;
        head->next=(node *)malloc(sizeof(node));
        head=head->next;
    }
    fclose(fp);
    head->next=NULL;
    srand(time(NULL));
    indexrand=rand()%(count+1);
    printf("%d\n",indexrand);
    for(head=mainhead;(head->next)!=NULL;head=head->next)
        if((head->index)==indexrand)
            strcpy(question,(head->string));
    printf("%s\n",question);
    len=strlen(question);
    printf("%d\n",len);
    for(i=0;i<len-1;i++)
        answer[i]='_';
    answer[i]='\0';
    printf("%s\n",answer);
    printf("6 chances to go\n");
    for(i=0,k=6;k>0;i++) { 
        flag=0;
        printf("%d\n",i);
        scanf("%c",&check);
        for(j=0;j<(len-1);j++) {
            if(question[j]==check) {
                flag++;
                answer[j]=check;
            }
        }  
        if(flag>0)
            printf("%d chances to go\n",k);
        if(flag==0) { 
            k--;
            printf("no common letters...%d chances to go\n",k);
        }
        printf("%s\n",answer);
    } 
} 
```

文件 dictionary.txt 每行只有一个单词。

在运行代码时，对于用户的每次尝试（即用户输入字符后），`no common letters...%d chances to go\n",k`即使`flag > 0`满足条件，也会显示语句。

我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:55:17.770

```
printf("%d\n",i);
scanf("%c",&check); 
```

由于这些语句，scanf 将 \n 作为参数，因此每次都打印“no common letters...”。将上面的代码替换为

```
printf("%d",i);
scanf("\n%c",&check); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:42:39.130

线

```
 scanf("%c",&check); 
```

正在读取用户键入*的字符，包括换行符*。

您可能只想读取该行的第一个字符：使用 fgets() 读取整行，然后设置`check = line[0]`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T17:58:35.410

我认为您想将字符串传递给scanf，因此请尝试：

scanf("%s",&check);

# ios - iOS 文档目录文件不保留

> ID：13074029
> 
> 赞同：1
> 
> 时间：2012-10-25T17:30:10.797
> 
> 标签：ios, ios5, itunes-app

根据 Apple 文档，

> 当用户下载应用更新时，iTunes 会将更新安装在新的应用目录中。然后它将用户的数据文件从旧安装移动到新的应用程序目录，然后再删除旧安装。以下目录中的文件保证在更新过程中被保留：
> 
> /Documents /Library 尽管其他用户目录中的文件也可能会被移动，但您不应依赖它们在更新后存在。

但是我正在开发一个应用程序，并使用 iTunes 安装该应用程序，所有现有的图像和文件都在与 iTunes 同步的设备上被删除。

此外，在将应用程序与 iTunes 同步时，它会在设备中显示 Copying ${PROJECT_NAME}，而它应该正在更新。

因此，如果用户在 Mac 机器上从 AppStore 更新任何应用程序，并且正在同步设备，那么所有应用程序保存在文档目录中的所有记录都将被删除，用户将需要再次保存它们。

# list - 如何合并两个元组列表？

> ID：13074031
> 
> 赞同：10
> 
> 时间：2012-10-25T17:30:15.180
> 
> 标签：list, scala, merge

我在 Scala 中有两个列表，如何合并它们以使元组组合在一起？

是否有现有的 Scala 列表 API 可以做到这一点或需要我自己做？

输入：

```
 List((a,4), (b,1), (c,1), (d,1))
 List((a,1), (b,1), (c,1)) 
```

预期输出：

```
List((a,5),(b,2),(c,2),(d,1)) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-25T17:39:28.713

您可以尝试以下一行：

```
scala> ( l1 ++ l2 ).groupBy( _._1 ).map( kv => (kv._1, kv._2.map( _._2).sum ) ).toList
res6: List[(Symbol, Int)] = List(('a,5), ('c,2), ('b,2), ('d,1)) 
```

您要合并的元组列表在哪里`l1`以及在哪里。`l2`

现在，细分：

*   `(l1 ++ l2)`你只需连接两个列表
*   `.groupBy( _._1)`您将所有元组按其第一个元素分组。您将收到一个 Map ，其中第一个元素作为键，以该元素开头的元组列表作为值。
*   `.map( kv => (kv._1, kv._2.map( _._2).sum ) )`您制作了一个具有相似键的新地图，但值是所有第二个元素的总和。
*   `.toList`您将结果转换回列表。

或者，您可以使用模式匹配来访问元组元素。

```
( l1 ++ l2 ).groupBy( _._1 ).map{
  case (key,tuples) => (key, tuples.map( _._2).sum ) 
}.toList 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T23:55:10.383

或者，您也可以使用`mapValues`来缩短代码。

`mapValues`，正如您可能猜到的那样，它允许您仅重新映射由`groupBy`.

在这种情况下，传递给的函数`mapValues`将每个 (Char, Int) 元组减少为仅 Int，然后对结果 List 求和。

```
(l1 ::: l2).groupBy(_._1).mapValues(_.map(_._2).sum).toList 
```

如果输出列表的顺序需要遵循您的示例，只需添加`sorted`依赖于 Ordering[(Char, Int)] 隐式实例的哪个。

```
(l1 ::: l2).groupBy(_._1).mapValues(_.map(_._2).sum).toList.sorted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:44:35.560

如果您可以假设两者`List[(A,B)]`都是根据 排序的`Ordering[A]`，则可以编写如下内容：

```
def mergeLists[A,B](one:List[(A,B)], two:List[(A,B)])(op:(B,B)=>B)(implicit ord:Ordering[A]): List[(A,B)] = (one,two) match {
    case (xs, Nil) => xs
    case (Nil, ys) => ys
    case((a,b)::xs,(aa,bb)::ys) =>
      if (a == aa) (a, op(b,bb)) :: mergeLists(xs,ys)(op)(ord)
      else if (ord.lt(a,aa)) (a, b) :: mergeLists(xs, (aa,bb)::ys)(op)(ord)
      else (aa, bb) :: mergeLists((a,b) :: xs, ys)(op)(ord)
} 
```

不幸的是，这不是尾递归。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-21T09:53:53.177

**使用`foldLeft`和`toMap`：**

从一个列表中获取地图，然后遍历第二个列表。我们将条目插入到地图中。

```
l1.foldLeft(l2.toMap)((accumulator, tuple) =>
      accumulator + (tuple._1 -> (accumulator.getOrElse(tuple._1, 0) + tuple._2))
).toList 
```

结果为：

```
List((Symbol(a),5), (Symbol(b),2), (Symbol(c),2), (Symbol(d),1)) 
```

* * *

**解释：**

*   `l2.toMap`转换`List((a,1), (b,1), (c,1))`成`immutable.Map(a->1, b->1, c->1)`
*   `foldLeft`遍历 list#1 的每个元组`l1`。
    *   `(a,4)`的 list1 被添加到生成的地图中，导致`immutable.Map(a->1+4, b->1, c->1)`
    *   `(b,1)`的 list1 被添加到生成的地图中，导致`immutable.Map(a->5, b->2, c->1)`
    *   `(c,1)`的 list1 被添加到生成的地图中，导致`immutable.Map(a->5, b->2, c->2)`
    *   `(d,1)`的 list1 被添加到生成的地图中，导致`immutable.Map(a->5, b->2, c->2, d->1)`
*   `toList`将地图转换回原始输入形式，即`List[(Symbol, Int)]`

# python - QTableWidget 整数

> ID：13074035
> 
> 赞同：5
> 
> 时间：2012-10-25T17:30:21.553
> 
> 标签：python, integer, pyqt, qtablewidgetitem

我正在尝试在我的 QTableWidget 中插入和显示整数。他们不显示。如果我将所有内容都转换为字符串，它会起作用，但是我不能对列进行数字排序——只能按词法（1、10、100 等）排序。这是使用 PyQt。

我已经尝试了一些建议的解决方案，使用 QTableWidgetItem.setData(someRole,intValue), bu 然后什么都没有显示。我试过 Qt.UserRole、DisplayRole 和 Edit Role。（我不明白为什么需要这些角色来显示整数，但只是按照示例进行操作）。我的具体代码是：

```
 item = QTableWidgetItem()
    item.setData = (Qt.DisplayRole,intValue)
    myTable.setItem(row, column, item) 
```

以下代码有效，但仅适用于字符串：

```
 item = QTableWidgetItem(str(intValue))
    myTable.setItem(row, column, item) 
```

此外，回读数据的建议仅显示对象位置，而不是实际数据。例如，使用 Eric 作为解释器外壳：

item.data(Qt.DisplayRole)

响应： PyQt4.QtCore.QVariant 对象位于 0x1f01fa60

或这个：

item.data(Qt.EditRole).data()

响应：0x1e904a80 处的 sip.voidptr 对象

任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T12:59:01.547

你走在正确的轨道上。您的代码不起作用，因为您没有调用`QTableWidgetItem`'`setData()`函数而是试图为其分配一个值。你有

```
item.setData = (Qt.DisplayRole,intValue) 
```

代替

```
item.setData(Qt.DisplayRole,intValue) 
```

此外，在读回数据时，不仅仅是显示的位置，而是作为[QVariant](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qvariant.html)的数据本身。您应该会发现通过转换（通过它的方法）`item.data(Qt.DisplayRole).toString()`将您的数据作为字符串返回。`QVariant``.toString()`

这是一个快速工作示例，仅用于演示：

```
import sys
from PyQt4.QtGui import QApplication, QWidget, QTableWidget, QTableWidgetItem, QVBoxLayout
from PyQt4.QtCore import Qt

class Widget(QWidget):
    def __init__(self, parent=None):
        QWidget.__init__(self, parent)

        self.widget_layout = QVBoxLayout()
        self.table_widget = QTableWidget(101, 1)
        self.table_widget.setSortingEnabled(True)

        self.widget_layout.addWidget(self.table_widget)
        self.setLayout(self.widget_layout)

        for num in xrange(101):
            item = QTableWidgetItem()
            item.setData(Qt.EditRole, num)
            self.table_widget.setItem(num, 0, item)

if __name__ == '__main__':
  app = QApplication(sys.argv)
  widget = Widget()
  widget.show()
  sys.exit(app.exec_()) 
```

# silverlight - Silverlight 组合框过滤器 - 显示全部

> ID：13074037
> 
> 赞同：0
> 
> 时间：2012-10-25T17:30:50.243
> 
> 标签：silverlight, xaml, silverlight-5.0

在具有 RIA 服务的 Silverlight5 中，使用 DomainDataSources。

我有一个 DataGrid 绑定到的过滤器组合框。

问题：如何在组合框顶部实现“全选” - 目前通过在数据库中放入一行 ID=0 并在过滤器中使用 IgnoredValue="0" 来完成

```
 <riaControls:DomainDataSource.FilterDescriptors>
        <riaControls:FilterDescriptor PropertyPath="AccountTypeID" Operator="IsEqualTo" IgnoredValue="0" Value="{Binding Path=SelectedItem.AccountTypeID,
            ElementName=AccountTypeComboBox, FallbackValue=0}"  />
    </riaControls:DomainDataSource.FilterDescriptors>         
</riaControls:DomainDataSource>

<riaControls:DomainDataSource x:Name="AccountTypeDataSource" AutoLoad="True" QueryName="GetAccountTypes" PageSize="15" LoadSize="30">
    <riaControls:DomainDataSource.DomainContext>
        <domain:xxxDomainContext />
    </riaControls:DomainDataSource.DomainContext>
</riaControls:DomainDataSource> 
```

![在此处输入图像描述](../Images/7309958986a87553fa5b9e15fbe92c21.png)

想要在 ComboBox 中加载数据后手动添加 Show All in code

编辑感谢下面的马丁，我让它像这样工作：

```
private xxxDomainContext xxxDomainContext;

    public MainPage()
    {
        InitializeComponent();

        // Load up the AccountType ComboBox - instead of doing it in XAML
        // then add in the Select All via proxy class above
        xxxDomainContext = new xxxDomainContext();
        EntityQuery<AccountType> query = xxxDomainContext.GetAccountTypesQuery();
        LoadOperation loadOperation = xxxDomainContext.Load<AccountType>(query);

        // everything is async so need a callback, otherwise will get an empty collection when trying to iterate over it here
        loadOperation.Completed += AccountTypeLoadOperationCompleted; 
```

和

```
 private void AccountTypeLoadOperationCompleted(object sender, System.EventArgs e)
        {
            // create new proxy class
            var listOfSelectableObjects = new List<SelectableObject<int>>();

            var selectAll = new SelectableObject<int> { Display = "Select All", KeyValue = 0};
            listOfSelectableObjects.Add(selectAll);

            // load values into new list
            foreach (var accountType in xxxDomainContext.AccountTypes)
            {
                var so = new SelectableObject<int>();
                so.Display = accountType.Description;
                so.KeyValue = accountType.AccountTypeID;
                listOfSelectableObjects.Add(so);
            }

            AccountTypeComboBox.ItemsSource = listOfSelectableObjects;
            // Set index to 0 otherwise a blank item will appear at the top and be selected
            AccountTypeComboBox.SelectedIndex = 0;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:37:45.780

过去，我通过创建一个代理类来实现这一点，比如带有显示、键和 isDefault 的 SelectableValue，如下所示：-

```
public class SelectableObject<K>
{
   public string Display { get; set; }
   public K KeyValue { get;set; }
   public bool IsDefaultSelection { get; set; }
} 
```

这意味着我可以将我从中选择的项目列表转换`List<SelectableObject<int>>`为例如，并可选地向该列表添加一个额外的项目，`Display="Select All"`而`IsDefault=true`不是尝试直接绑定到列表。

希望有帮助。

# c++ - 这个循环的更好的实现是什么？

> ID：13074046
> 
> 赞同：3
> 
> 时间：2012-10-25T17:31:18.190
> 
> 标签：c++, for-loop

我需要实现一个循环，我必须询问用户，然后检查输入的有效性（在这种情况下，有必要打印一个无效的数字）。实施它的更好方法是什么？

我们的编程教授不允许我们使用`break`，`for(;;)`正如他所说，这是一种不好的做法。那是对的吗？

示例 1：

```
int i = 0;

while(i == 0) {
  cout << "...: ";
  cin >> i;

  /*... Loop body ...*/

  if (i == 0)
    cout << "Not a valid number" << endl;
} 
```

示例 2：

```
int i = 0;

do {
  cout << "...: ";
  cin >> i;

  /*... Loop body ...*/

  if (i == 0)
    cout << "Not a valid number" << endl;

} while (i == 0) // Better while(true) and use break ? 
```

示例 3：

```
int i = 0;

for ( ;; ) {
  cout << "...: ";
  cin >> i;

  /*... Loop body ...*/

  if (i == 0)
    cout << "Not a valid number" << endl;
  else
    break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:55:38.007

您不需要接受零作为整数吗？最好不要依赖具有特殊含义的输入数字。

如果循环的意思是无限循环，直到任务完成，那么明确地说 . 并没有错`while(true)`。我可能会做更多这样的事情（需要 C++11）：（或使用 boost lexical_cast）

```
#include <iostream>
#include <string>
#include <stdexcept>

int infini_asker(){
  while (true) {
    std::cout << "...: ";
    std::string tmp;
    std::cin >> tmp;
    int i;
    try{
      i=std::stoi(tmp);
    }catch(std::invalid_argument){
      continue;
    }catch(std::out_of_range){
      continue;
    }
    return i;
  } 
}

int main(){
  int num=infini_asker();
  std::cout << " got:" <<num << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:42:14.667

在您的情况下，第二个构造（do..while）对于读者查看代码的作用是最直观的，这很重要。

第一个还不错，最后一个很差，通常在迭代次数有限且预先设置了限制的情况下使用“for”构造。它不一定是，但直观地说，这就是使用 for 循环的方式。

（顺便说一句，如果用户输入的字符串不是数字，则必须清除 cin 上的失败标志，但这并不是这里真正要问的问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T17:37:57.023

对示例 1 的修改看起来是最好的形式：

```
while(true) {
    cout << "...: ";
    cin >> i;

    /*... other stuff ...*/

    // Do your input validation here:
    // Note that it's much better to whitelist what is
    // acceptable input as opposed to checking all of the
    // possible cases of invalid input
    if (...) { // where .. is the condition for valid input
        break
    } 
} 
```

do-while 循环应该保留在特殊情况下，您希望了解嵌套逻辑应该至少执行一次。任何你可以用 do-while 做的事情，你都可以用 while(...)

for(;;) 对许多程序员来说不太熟悉的语法（一年前我不知道它的含义），而 while(true) 则更为明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:36:39.543

他们都工作。就像 Shmiddty 所说的那样，for(;;) 不是一个好的编程习惯。我会像示例 2 那样做，但我不是专业程序员。

# jquery - jQuery：获取查询结果位置 n 的元素

> ID：13074047
> 
> 赞同：0
> 
> 时间：2012-10-25T17:31:31.363
> 
> 标签：jquery

我正在尝试使用 value3 元素获得第三个跨度。使用以下查询：

```
jQuery('span[class*="3"]:contains("value3")') 
```

将返回一个跨度列表，我只需要第三个。问题是如何..

该站点具有以下结构：

```
<table>
    <tr>
      <td>
        <table>
            <tr>
            <td><span class="1">value1</span></td>
            <td><span class="2">value2</span></td>
            <td><span class="3">value3</span></td>
            <td><span class="4">value4</span></td>
            </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td>
        <table>
            <tr>
            <td><span class="1">value1</span></td>
            <td><span class="2">value2</span></td>
            <td><span class="3">value3</span></td>
            <td><span class="4">value4</span></td>
            </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td>
        <table>
            <tr>
            <td><span class="1">value1</span></td>
            <td><span class="2">value2</span></td>
            <td><span class="3">value3</span></td>
            <td><span class="4">value4</span></td>
            </tr>
        </table>
      </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:33:07.593

```
jQuery('span[class*="3"]:contains("value3")')[2] 
```

应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:33:37.960

你可以使用这个：

```
jQuery('span[class*="3"]:contains("value3")').eq(2); 
```

来自 jQuery.com：

> .eq( index ) index 一个整数，指示元素从 0 开始的位置。

# windows-phone-7 - 如何在我的 Windows Phone 应用程序中直接播放音频媒体

> ID：13074048
> 
> 赞同：0
> 
> 时间：2012-10-25T17:31:31.503
> 
> 标签：windows-phone-7, media-player, media

我正在为 windows phone 7 制作铃声设置器应用程序。我可以询问一个功能，以便用户可以在我的应用程序本身中播放所选铃声而不退出它。还是我必须启动媒体播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:58:22.053

您将不得不使用 BackgroundAudioPlayer 来实现这一点。[这里](http://msdn.microsoft.com/en-us/library/microsoft.phone.backgroundaudio.backgroundaudioplayer%28v=vs.92%29.aspx)有一些解释 ，希望对你有帮助！

# java - Java：如何在测试中打开 src/main/resources 中的文本文件？

> ID：13074051
> 
> 赞同：12
> 
> 时间：2012-10-25T17:31:37.643
> 
> 标签：java

我的项目结构看起来像

```
project/
       src/main/
               java/ ...
               resources/
                         definitions.txt
               test/
                    CurrentTest.java
               resources/ ... 
```

在我的测试中，我需要打开`definitions.txt`

我愿意

```
 @Test
 public void testReadDesiredDefinitions() throws PersistenceException, IOException {
        final Properties definitions = new Properties();
        definitions.load(new ResourceService("/").getStream("desiredDefinitions"));
        System.out.println(definitions);
 } 
```

当我运行这个时，我得到

```
java.lang.NullPointerException
    at java.util.Properties$LineReader.readLine(Properties.java:418)
    at java.util.Properties.load0(Properties.java:337)
    at java.util.Properties.load(Properties.java:325) 
```

我怎样才能阅读这个文本文件？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-25T17:35:44.780

单元测试的“当前目录”通常是项目目录，所以使用这个：

```
File file = new File("src/main/resources/definitions.txt"); 
```

并从文件中加载属性：

```
definitions.load(new FileInputStream(file)); 
```

如果这不起作用，或者您想检查当前目录是什么，只需打印出路径，当前目录是什么就很明显了：

```
System.out.println(file.getAbsolutePath()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:37:47.353

您可以使用[Class#getResourceAsStream](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)轻松创建到资源文件的流。

```
definitions.load(getClass().getResourceAsStream("/main/java/resources/definitions.txt")); 
```

location 参数应该是相对于您的项目库的相对文件路径（我的猜测是主要的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:36:38.463

如果您的`resources`目录是源文件夹，则可以`/resources/definitions.txt`用作正确的路径。

我不知道，`ResourceService`但这应该有效：

```
final Properties definitions = new Properties();
definitions.load(getClass().getResourceAsStream("/resources/definitions.txt")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T17:39:41.743

文件 file = new File("../src/main/resources/definitions.txt");

# iphone - 使用 Telerik TestStudio 和 Jenkins 的持续 iPhone 集成测试服务器

> ID：13074055
> 
> 赞同：0
> 
> 时间：2012-10-25T17:31:52.493
> 
> 标签：iphone, ios, testing, continuous-integration, automated-tests

我目前正在编写一个 iPhone 应用程序并将我的源代码托管在 BitBucket git 存储库上。我想在我办公室的备用 mac mini 上设置一个持续集成系统。我还使用 Telerik 的 TestStudio 来运行一些自动化测试（我创建了一个专用目标来生成 QA 构建，它在我的 iPhone 或模拟器上的 TestStudio 应用程序可见）。

准确地说，我想自动化的程序是：

```
1) download provisioning profile and certificate 
2) download source code
3) build the iPhone app using the TestStudio QA profile
4) running the simulator
5) start the TestStudio app
6) run the testStudio test
7) collect somehow the results
8) [this is just a bonus] inform me if there was an error in any of the test 
```

我正在考虑将 Jenkings 与 TestStudio 一起使用，但我肯定需要一些控制台技巧来执行我提到的更多操作。

任何建议都非常受欢迎。

谢谢克劳迪奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:12:09.043

这是我所做的：

1.  在 Jenkins 中，安装 Xcode 插件

2.  当你在那里安装 git 和 github 插件时

3.  创建一个新的 Jenkins 作业

a) 添加 git URL（您可能需要设置一个 github Deploy 密钥）

b) 添加 Xcode 构建步骤 - 选中“Clean before Build”和“Build IPA”

更高级：您可能想要添加一个 Github Post Receive 挂钩来通知 Jenkins 推送到 github，以便它触发构建。

# java - 带有链表的 Java 优先级队列

> ID：13074057
> 
> 赞同：2
> 
> 时间：2012-10-25T17:32:03.337
> 
> 标签：java

几天来，我一直在试图找出一个关于最近作业的问题，但我似乎无法解决这个问题。问题如下：

> 创建一个包含两个字段 noOfPriorities 和一个 LinkedList 的 PriorityQueue 类……它应该有一个接受 int 值的构造函数，将该值分配给 noOfPriorities……同时添加与 numberOfPriorities 一样多的 LinkedLists ……具有优先级的入队方法和一个对象......返回下一个优先级元素的出队方法......并将其从列表中删除......</p>

我的大部分问题是我无法确定教授正在寻找什么，因为措辞对我来说似乎有点奇怪......只是询问它也没有任何帮助。

澄清一下，我不是在寻找任何人给我答案。我只是在寻找正确的方向。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:40:57.820

干杯诚实关于这是家庭作业。

如果您阅读优先级队列是什么，我认为您可以更好地理解这个问题。

让我们举一个小例子。你有几个任务要做，每个任务都有一个优先级。

*   Pri 1 - 呼吸、吃饭、睡觉
*   Pri 2 - 学习、玩耍
*   小学 3 - 看电影

以上所有信息都可以由您的 PriorityQueue 处理。你有 3 种优先级，所以你有 3 个列表。每个列表都是维护具有相同优先级的任务。

一旦通过调用 PriorityQueue(3) 构造了空的 PriorityQueue，就可以向其中添加任务。

假设您要添加优先级为 2 的任务“study”。您可以说，priorityQueue.enqueue(2, "study")。然后，您将转到维护优先级 2 项目的列表，并将任务“研究”添加到该列表中。

同样，当你想知道下一个优先级为 3 的项目是什么时，你可以说，priorityQueue.dequeue(3)。然后，您将找到处理优先级 3 项的列表，并从该列表中删除最后一个元素。

这应该让您对开始工作有一个很好的理解。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:41:00.223

同意，任务的措辞很糟糕。

> 同时添加与 numberOfPriorities 一样多的 LinkedLists..

这可能应该是“同时*向 LinkedList*添加与 numberOfPriorities 一样多的节点..”

下一个要问自己的问题是，我应该在所有这些链接节点中存储什么类型的东西......？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:45:27.780

我认为您需要一组链表，而不仅仅是一个。问题描述是矛盾的，说你既需要一个有一个链表的类，又需要在构造一个对象时创建多个链表。

这是您的类的构造函数：

```
MyPriorityQueue(int npriorities)
{
    noOfPriorities = npriorities;
    queueArray = new ArrayList<List<T>>();
    for (int i = 0; i < npriorities; ++i) queueArray.add(new LinkedList<T>());
} 
```

然后，您将拥有优先级到队列的映射。您的 enqueue 方法将采用一个对象和一个优先级（一个表示优先级的 int），并将该对象添加到由优先级指定的队列中。您的 dequeue 方法将简单地返回包含元素的最高优先级队列的末尾。

有意义吗？

# linux - -execdir 在 Linux 和 OSX 上的解释

> ID：13074060
> 
> 赞同：3
> 
> 时间：2012-10-25T17:32:16.850
> 
> 标签：linux, macos, bash, shell, find

```
find . -iname '*.rar' -execdir ls {} + 
```

这在 OSX Lion 下不起作用，屈服`ls: blabla.rar: No such file or directory`等。

此外，以上将在 Linux 下工作。但是，它会在找到结果时调用 ls 多次。用简单的`cat $#`脚本测试。

所以我看到2个问题`-execdir`

*   在 Linux 下，它不会像使用手册中所述的那样组合搜索结果`{} +`
*   在 OSX 下，它不会按照手册中的说明更改目录，再次使用`{} +`

想确认这是错误的，而不是我的误解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:51:55.263

我不知道 Mountain Lion，但它是 GNU findutils 中的一个已知错误，显然已在 4.5 分支中修复（检查您的`find --version`. 见[https://savannah.gnu.org/bugs/?19593](https://savannah.gnu.org/bugs/?19593)

还有这个错误：[https](https://savannah.gnu.org/bugs/?29949) ://savannah.gnu.org/bugs/? 29949 in find 4.5.9 版本，与山狮症状相匹配。也许您应该检查两个版本号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:36:51.753

在 Linux 上，它`ls`是对每个文件执行一次还是对每个子目录执行一次？从`man find`（GNU findutils 版本 4.4.2）：

> 与 **`-exec`**操作一样，“+”形式的**`-execdir`** 将构建一个命令行来处理多个匹配的文件，但任何给定的命令调用都只会列出存在于同一子目录中的文件。

# mysql - mysql dump 将新的和更改的数据复制到数据库

> ID：13074062
> 
> 赞同：0
> 
> 时间：2012-10-25T17:32:21.067
> 
> 标签：mysql, sql, database, mysqldump

我有一个 60 GB 的数据库，我有一个 13 GB 的实时数据库，现在在实时数据库上也有一些新条目和更新的条目。考虑 13GB 数据库具有与 60GB 相同的初始数据，其中一些行已更新，最后几个条目是全新的。不，我想将 13 GB 复制到 60 GB。我有转储但插入命令，当我尝试导入它时，它向我显示外键约束错误并说它无法删除或更新。因此，我需要查询 MySQL 导入，以便它复制新数据并更新新数据（如果有），并且转储文件是带有创建的常规转储文件，插入所有这些文件，并且无法更改其中的任何内容:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:53:20.190

如果磁盘空间不是问题，我会这样做：

1.  使数据库脱机
2.  如果原来的 dasebase 被称为 stuff，则创建一个名为 stuff_extra 的新数据库
3.  将 13 GB 转储加载到 stuff_extra。您现在将拥有两个在架构上相同但在某些数据上不同的数据库
4.  对于 stuff 中的每个表
    1.  删除 stuff.table 中同时在 stuff_extra.table 中的所有行。您可以只删除已更改的行，但我认为这同样快。利用[`multi table delete`](http://dev.mysql.com/doc/refman/5.5/en/delete.html)
    2.  将 stuff_extra.table 中的所有行插入 stuff.table。利用[`insert select`](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)

您现在将拥有来自 stuff_extra 的所有行。并且所有更新的数据都已更新（或真正删除并插入）。

# ruby-on-rails - Rails 文件夹，用于放置用户可访问的预生成的 html/css/images

> ID：13074079
> 
> 赞同：0
> 
> 时间：2012-10-25T17:33:14.547
> 
> 标签：ruby-on-rails

在我的应用程序中，我必须定期从外部服务下载报告。基本结构是几个文件夹，每个文件夹都包含它自己的 index.html 以及 css 和图像。我应该把这些文件夹放在哪里以便我的用户能够访问它？我将提供网址，无需列出文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:02:34.753

假设您想将其他内容放在您的应用程序中，它会放在`public`您应用程序的文件夹中。

如果我的应用程序中有这样的文件：

```
public/external/index.html 
```

然后最终用户应该在点击时看到它：

```
http://application.com/external/ 
```

...无需调用任何应用程序的代码。

# javascript - 如何从 touchstart 获取 javascript 中的 touch id

> ID：13074080
> 
> 赞同：3
> 
> 时间：2012-10-25T17:33:24.717
> 
> 标签：javascript, touchscreen

touchsrat 返回 3 个数组 - targetTouches、chnagedTouches 和 touches。我如何确定哪个触摸触发了事件？我需要 id 以便我可以跟踪 touchmove 事件的变化

[e.touches、e.targetTouches 和 e.changedTouches 的变体](https://stackoverflow.com/questions/7056026/variation-of-e-touches-e-targettouches-and-e-changedtouches)

这有点帮助，但我不明白什么是“节点”——我将事件绑定到的 DOM 元素？

# c# - 将 FedEx .net 网络服务从开发环境转移到生产环境的最佳方式是什么？

> ID：13074082
> 
> 赞同：2
> 
> 时间：2012-10-25T17:33:26.703
> 
> 标签：c#, web-services, visual-studio-2008, asmx, fedex

FedEx 不提供 UDDI 服务，但需要作为 WSDL 文件下载。开发完成后，需要将开发 WSDL 替换为生产 WSDL。我正在使用 Visual Studio 2008 并且仅替换 WSDL 不会在生产中自动工作，但需要重新导入并重建项目。这为开发和生产环境创建了两个不同的二进制签名。我需要通过一些配置文件来实现这一点，这样我的二进制文件对于我的开发和生产环境来说是相同的。有任何想法吗？？？谢谢！

WSDL 文件中唯一的变化是位置值。

```
 <port name="RateServicePort" binding="ns:RateServiceSoapBinding">
      <s1:address location="https://ws.fedex.com:443/web-services" />
    </port> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:37:57.630

我们通常会覆盖 URL，类似于 Dave Zych 所说的，大致如下：

```
prod = new Service.Service();
// ... read configuration into cfg ...
prod.Url = cfg.ServiceURL; 
```

URL 通过配置根据环境而变化。WSDL 是一致的，底层的类也是如此。

# ruby-on-rails-3 - Rails 3浮点舍入错误

> ID：13074090
> 
> 赞同：0
> 
> 时间：2012-10-25T17:33:44.873
> 
> 标签：ruby-on-rails-3, rounding-error

运行红宝石 1.8.7。

(1.005 * 100).round 结果：100

(1.006 * 100).round 结果：101

100.5.round 结果：101

(1.005 * 100) 结果：100.5

这里发生了什么？有人可以在最新版本的 ruby​​ 中试试这个吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:40:01.580

浮点数学是正在发生的事情。

对于最后一个，我没有得到 100.5，你也没有，即使由于某种原因它显示如下：

```
Loading development environment (Rails 3.2.8)
1.9.3p194 :001 > (1.005 * 100).round
 => 100 
1.9.3p194 :002 > (1.006 * 100).round
 => 101 
1.9.3p194 :003 > 100.5.round
 => 101 
1.9.3p194 :004 > (1.005 * 100)
 => 100.49999999999999 
```

# gsm - 是否可以获得 GSM 小区名称？其他信息？

> ID：13074092
> 
> 赞同：0
> 
> 时间：2012-10-25T17:33:46.047
> 
> 标签：gsm, at-command

GSM 运营商是否持有此 Cell Name 信息？是否可以像我们通常使用 Cell ID 一样获取 Cell 名称？是否可以使用 AT 命令询问塔的 GPS 位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:14:16.203

使用标准 AT 命令无法获取单元名称。你的意思是什么名字，你能举个例子吗？

对于位置信息，您是否尝试过 AT+CMOLR，它是来自 3GPP 规范 TS 27007 的标准 AT 命令？
AT+CMOLR 的实现是可选的，因此如果设备不支持它也就不足为奇了。如果您知道您使用的是哪个设备，最好查看制造商的专有 AT 命令列表。

（3GPP AT 命令规范在这里：[http](http://www.3gpp.org/ftp/Specs/html-info/27007.htm) ://www.3gpp.org/ftp/Specs/html-info/27007.htm ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T14:47:43.697

大多数 GSM 运营商不提供 cellid 位置（纬度/经度）。

# graph - 在 Highcharts 堆积柱形图中显示不同数量的组

> ID：13074095
> 
> 赞同：0
> 
> 时间：2012-10-25T17:34:32.507
> 
> 标签：graph, highcharts

我正在尝试创建一个堆叠和分组的列高图，但我只希望最后几个 x 值具有多个组/堆栈。第一个 x 值只有一个组/堆栈。

为了解释，我正在绘制历史价值图表，然后比较乐观和保守的预测情景。

这是我的[jsFiddle](http://jsfiddle.net/ehulburd/uBuLu/4/)。更好的方法来做到这一点？

```
 series: [{
            name: 'Thermal',
            data: [5, 3, 4, 5],
            stack: 'conservative',
            color:'blue'
        }, {
            name: 'PV',
            data: [3, 4, 4, 6],
            stack: 'conservative',
            color: 'red'
        }, {
            name: 'Thermal',
            data: [0, 0, 0, 10],
            stack: 'optimistic',
            color: 'blue',
            showInLegend: false
        }, {
            name: 'PV',
            data: [0,0,0, 12],
            stack: 'optimistic',
            color: 'red',
            showInLegend: false
        }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:56:13.433

基本上 highcharts 很棒，您可以堆叠条形图并按点为它们提供相关数据。我为我的系列数组传递了以下内容，并附加了传递给工具提示的属性。在此处查看[jsFiddle](http://jsfiddle.net/ehulburd/YZkUJ/)：

```
 series:[
         {name:'Apples', color:'green', data:[{x:0, y:10, year: '2009', scenario: 'historic'}, {x:1, y:11,year: '2010',  scenario: 'historic'} ]}, 
         {name:'Oranges', color:'orange', data:[{x:0, y:2, year: '2009',  scenario:'historic'}, {x:1, y:5, year: '2010', scenario:'historic'}]},
         {name:'Apples',color:'green', data:[{x:1.75, y:12, year:'2011',scenario:'optimistic'}], showInLegend: false },
         {name:'Apples', color:'green',data:[{x:2.25, y:3,year:'2011',  scenario:'conservative'}], showInLegend: false },
         {name:'Oranges',color:'orange',  data:[{x:1.75, y:11, year:'2011',scenario:'optimistic'}], showInLegend: false},
         {name:'Oranges',color:'orange',  data:[{x:2.25, y:6, year:'2011',scenario:'conservative'}], showInLegend: false},
] 
```

# php - 如何使用循环从数据库中返回一个包含 3 列的数组

> ID：13074110
> 
> 赞同：1
> 
> 时间：2012-10-25T17:35:47.727
> 
> 标签：php, arrays

问题是，我有一张包含一些内容的表格。表名是`departments`。它有 3 列`id`, `short_name`, `long_name`。

现在我正在做一个类，它将返回一个数组中的所有部门，但我无法完成。我曾经`array_push()`制作数组但无法获得足够的提示，还有其他想法吗？

### 代码：

```
$con= $this->con;
$db_name= $this->db_name;
$sql="SELECT * FROM $db_name.departments";
$result= mysql_query($sql, $con); 
$data=array(); 
while($happen= mysql_fetch_object($result)) { 
   array_push($data,array([$happen->id],[$happen->short_name],[$happen->long_name])‌​); 
}
return $data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:39:58.523

尝试这个：

```
$con= $this->con; 
$db_name= $this->db_name; 

$sql="SELECT * FROM {$db_name}.departments"; 

$result= mysql_query($sql, $con); 

$data=array(); 

while ($happen= mysql_fetch_object($result)) 
{ 
    $data[$happen->id]['id']         = $happen->id;
    $data[$happen->id]['short_name'] = $happen->short_name;
    $data[$happen->id]['long_name']  = $happen->long_name;
}

return $data; 
```

以上基于唯一 ID（使用它作为键）将您的数据添加到数组中。

编辑 - 提供额外数据后重组响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:40:31.427

而不是`mysql_fetch_object()`只使用`mysql_fetch_assoc()`

另外，如果可以的话，我会尽量避免使用 mysql_*，然后立即切换到使用 PDO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:43:50.283

只需使用 mysqli_fetch_assoc()。

[http://www.php.net/manual/en/mysqli-result.fetch-assoc.php](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php)

它将您的结果集直接转储到您所描述的数组中。此外，不推荐使用 mysql_query 并且不应使用。您需要查看 mysqli 或 pdo 函数。

# recursion - sml 中的递归数据类型

> ID：13074112
> 
> 赞同：0
> 
> 时间：2012-10-25T17:35:54.733
> 
> 标签：recursion, sml, smlnj, abstract-data-type, recursive-datastructures

有没有办法为整数定义数据类型。即 0,1,2,... 不是零，一，... 单独。

我想定义一组整数。bu 使用 0, n,n+1 和递归。我尝试过这样的事情：数据类型 nat=0|n|n+1 。但是几乎很明显不起作用，因为它不将 0 识别为整数，对吗？

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:44:40.270

由于自然数集是可数无限的，因此您无法枚举所有情况。

[您可以用Peano 数](http://en.wikipedia.org/wiki/Natural_number#Peano_axioms)在概念上表示自然数：

```
datatype peano = Zero | Succ of peano 
```

数据类型非常简单，它只定义`0`并确保每个自然数都有一个后继。例如，2 实际上表示为`Succ (Succ Zero)`。

```
fun count Zero = 0
  | count (Succ p) = 1 + count p 
```

使用类似的技术，您可以像使用自然数一样构建`add`, `sub`,函数。`mult`

# linux - Shell 脚本：从其余行中分别读取属性文件的第一行

> ID：13074113
> 
> 赞同：0
> 
> 时间：2012-10-25T17:36:11.383
> 
> 标签：linux, shell

我正在编写一个读取属性文件并执行某些操作的 shell 脚本。

那就是它从 prop 文件的第一行读取。

现在在这个脚本中，我想添加一个开关，如果 ENABLED 将执行脚本并执行常规操作。

如果 DISABLED 将正常退出程序。我想把这个 swich 放在同一个 prop 文件中。（即现在 prop 文件的第一行将是 ENABLED 或 DISABLED）

目前我正在使用：

```
cat init_token.properties | while read line 
```

现在在此之前，我想单独读取开关的值，然后如果启用，while read 行应该从属性文件的**第二行开始。**简而言之，我想将 Ist 行的读取分开，然后将其余部分分开。

init_token.properties 的格式：

```
ENABLED
abc.dat IP  120.210.60.1
xyz.dat PORT    8200
pqr.dat IP  420.24012.4 
```

脚本：

```
#!/bin/ksh

dos2unix init_token.properties &

# PATH for DAT files
DAT_FILE_PATH='.'

cat init_token.properties | while read line
do
        #       PARAMETER EXAMPLE - <FILENAME> <ATTRIBUTE> <VALUE>
        #       read FILENAME
        FILENAME=`echo "$line" | awk -F " " '{print $1}'`
        #       read ATTRIBUTE
        ATTRIBUTE=`echo "$line" | awk -F " " '{print $2}'`
        #       read VALUE
        VALUE=`echo "$line" | awk -F " " '{print $3}'`
        #       setting fully qualified filepath name & temporary file
        FULLPATH=$DAT_FILE_PATH"/"$FILENAME
        TEMP_FILE=tempfile
        old='$('$FILENAME'_'$ATTRIBUTE')'
        #       replace $(<FILEANME>_<ATTRIBUTE>) with VALUE if file exists
        if [ -e $FULLPATH ]
        then
                sed 's/'$old'/'$VALUE'/g' $FULLPATH > $TEMP_FILE && mv $TEMP_FILE $FULLPATH
        else
                echo 'File '$FULLPATH' does not exists while replacing token '$old
        fi
done
exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:40:10.487

您可以在脚本顶部尝试这样的操作：

```
CHECK=$(head -n 1 prop.file)

if [ "$CHECK" == "DISABLED" ]; then
     exit 0
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:46:29.410

首先你可以用 分割线`read`，所以你不需要使用`echo | awk`：

```
cat init_token.properties | while read filename attribute value
do 
```

接下来是启用/禁用/其他的检查：

```
 case "$filename" in
    ENABLED) ;;
    DISABLED) exit ;;
    *)
        # It's another line, do processing
        ...
        ;;
    esac
done 
```

还有一点：不要放在`dos2unix ...`后台。它可能比您的脚本运行的时间更长。只需调用它没有`&`：

```
dos2unix init_token.properties 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T17:48:12.147

像这样的东西，也许？

```
 let CNTR=0

    cat init_token.properties | while read line
    do
            let CNTR=CNTR+1

            if [ $X == 1 ]; then
                 //is first line
            else
                 //is not first line
            fi

            #       PARAMETER EXAMPLE - <FILENAME> <ATTRIBUTE> <VALUE>
            #       read FILENAME
            FILENAME=`echo "$line" | awk -F " " '{print $1}'` 
```

# android - Android：最好做很多活动，还是做1个动态变化的活动？

> ID：13074115
> 
> 赞同：6
> 
> 时间：2012-10-25T17:36:17.763
> 
> 标签：android, android-layout

如果我需要做 10 次类似的活动，我这样做会更好：

*   10个活动，10个布局？
*   1个活动和10个布局？
*   1个活动并更改可见性消失/可见的UI？

我需要一个答案：

1.  表现
2.  形式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T18:30:04.307

如果您使用多个活动，您将获得使用 android 活动堆栈机制的优势。因此，如果您希望您的用户能够使用后退按钮进行导航，那么这是最好的选择。

另外，如果你的activity非常相似，那么你可以在一个抽象类中实现通用代码，并让你的10个activity扩展这个通用类，从而共享一些代码。

```
public abstract class CommonBehaviorActivity extends Activity {
    protected void buildCommonThings() {
        ((TextView)findViewById(R.id.title)).setText(getTitle());
        ((ImageView)findViewById(R.id.image)).setDrawable(...);
        }

    abstract protected String getTitle();
}

public class MyActivity1 extends CommonBehaviorActivity {
    ...
    protected String getTitle() {
        return "Title 1";
        }
} 
```

等等...

**编辑：**添加了一些示例代码来展示如何分享您希望在每个子活动中看到的内容。例如，如果您在每个活动中都有一个列表，那么您可以在`getAdapter()`方法中的子活动中定义一个特定的适配器，并将您的列表绑定到该适配器`CommonBehaviorActivity`以及对其进行配置（绑定侦听器，等等。 ..)

* * *

另一方面，如果您想在您的活动之间进行非常快速的切换，并且您不需要能够使用按钮“返回”，那么可见/消失视图可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:39:04.990

进行多个活动将使您的代码更具可读性和更易于调试，因为您不会处理过多的 if 和 else 条件。不会有性能开销：活动加载速度很快，Android 管理后台堆栈并通过在需要时终止暂停的活动来释放内存（单个活动不会出现这种情况）。

如果您的活动相似，您可以将功能放在单独的类中，并在活动中重复使用它们。布局同上，您可以设计它们，以便您可以重复使用公共部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:16:32.413

如果要显示动态 UI，也可以使用片段。您可以动态更改片段中的内容，也可以更改片段本身。您可以始终保持某些片段可见而其他片段不活动。在这种情况下，您只需要一个活动和多个片段。

这将取决于您希望如何绘制应用程序的 UI。片段示例可用在[这里](http://developer.android.com/training/basics/fragments/index.html)

# javascript - AJAX Struts 1.x 使用没有 jQuery 的图块

> ID：13074117
> 
> 赞同：1
> 
> 时间：2012-10-25T17:36:18.480
> 
> 标签：javascript, ajax, struts, struts-1, apache-tiles

我在 struts 1/x 中使用瓷砖时遇到了问题。

例如我有下一个文件

作为`tiles-def.xml`

```
<definition name="list.page" extends="main.layout">
    <put name="title" value="List Page" />
    <put name="body" value="/pages/tiles/body/list.jsp" />
</definition>

<definition name="view.page" extends="main.layout">
    <put name="title" value="View Page" />
    <put name="body" value="/pages/tiles/body/ViewItem.jsp" />
</definition>

<definition name="add.page" extends="main.layout">
    <put name="title" value="Add and Edit Page" />
    <put name="body" value="/pages/tiles/body/AddItem.jsp"></put>
</definition> 
```

我的 `struts-config.xml`

```
<action-mappings>
        <action path="/items" name="itemsForm"
            type="org.springframework.web.struts.DelegatingActionProxy"
            parameter="method" validate="false">
            <forward name="list" path="list.page" />
            <forward name="view" path="view.page" />
            <forward name="add" path="add.page" />          
            <forward name="delete" path="/index.jsp" />
            <forward name="edit" path="add.page" />         
        </action>
///
</action-mapping> 
```

例如，我的 list.jsp 上的链接为

```
<a href="#" onclick="SendRequest('GET', 'news.do', 'method=view&amp;newsMessage.id=${news.id}', null)"><bean:message key="link.view" /></a> 
```

和用于 ajax 的 JS

```
function CreateRequest() {
  var Request = false;
  if (window.XMLHttpRequest) {
    // Gecko-compatible browsers
    Request = new XMLHttpRequest();
  } else if (window.ActiveXObject) {
    // IE
    try {
      Request = new ActiveXObject("Msxml2.XMLHTTP"); //Newer IE
    } catch (CatchException) {          
      Request = new ActiveXObject("Microsoft.XMLHTTP"); //Older IE
    }
  }

  if (!Request) {
    alert("Impossible create XMLHTTPREquest");
  }
  return Request;
} 
```

-

```
/**
 * Function sending request to file on server
 * 
 * r_method - type request GET or POST r_path - path to file r_args - args as
 * a1&a2 r_handler - function handler response from server
 * 
 */
function SendRequest(r_method, r_path, r_args, r_handler) {

    // Create Request
    var Request = CreateRequest();

    // Check existing request
    if (!Request) {
        return;
    }

    // Set user handler
    Request.onreadystatechange = function() {
        // If exchange data was finished
        if (Request.readyState == 4) {

            if (Request.status == 200) {
                // Give management user handler

                //r_handler(Request);
                document.getElementById("content_container").innerHTML = Request.responseText;

            }
        }
    };

    // Check if need to create GET-request
    if (r_method.toLowerCase() == "get" && r_args.length > 0) {
        r_path += "?" + r_args;
    }

    // Initialize connection
    Request.open(r_method, r_path, true);

    if (r_method.toLowerCase() == "post") {
        // If this is POST
        // Set header
        Request.setRequestHeader("Content-Type",
                "application/x-www-form-urlencoded");
        //Send request
        Request.send(r_args);
    }
    else {
        //If it's GET
        //Send null-request
        Request.send(null);
    }
} 
```

并在服务器上采取行动

```
public ActionForward view(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {

        response.setContentType(RESP_CONTENT_TYPE);

        //some operationss
        if (itemsForView.getId() == null) {
            //return mapping.findForward(ERROR_ACTION);
            return new ActionForward("/pages/error.jsp");
        } else {
            itemsForm.setItems(itemsForView);
            //return mapping.findForward(VIEW_ACTION);          
            return new ActionForward("/pages/tiles/body/View.jsp");
        }
    } 
```

我很困惑，因为我找到了下一个[使用 Struts 和 Tiles 的 AJAX示例](http://www.createsoft.co.uk/blog/2008/05/using-ajax-with-struts-and-tiles/)

请给我解释或链接好文章。

# c++ - 是否可以将对象转换为不相关的类？

> ID：13074118
> 
> 赞同：0
> 
> 时间：2012-10-25T17:36:21.300
> 
> 标签：c++, object, inheritance, pointers, casting

假设我有两个名称不同但结构完全相同的类。有没有办法将一个类的对象转换为另一个类？

这听起来可能很愚蠢，但我想这样做是有原因的。我的应用程序的架构提供了抽象类`component`，`storage`现成的应用程序将包含几个派生自的专用组件`component`，每个组件都将定义自己的存储类型，派生自`storage`. 在应用程序初始化期间，对于每个组件，都会创建一个其自定义存储类型的存储对象，并作为指向该组件的指针传递。

这样所有组件都保持完全独立，这对于可重用性和测试非常有用。但是，当然，需要在组件之间交换信息。为了做到这一点，考虑到独立性，我想让两个组件获得一个指向同一个存储的存储指针。约束指针必须是组件特定的存储类型。

框架代码（抽象类）

```
class Storage {};

class Component {
public:
    void SetStorage(Storage* storage);
private:
    Storage* storage;
}; 
```

示例组件

```
class PhysicsStorage : public Storage;
class PhysicsComponent : public Component; 
```

另一个组件

```
class CollisionStorage : public Storage; // same structure as PhysicsStorage as both components need the same data like world coordinates and rotations of all forms in the 3d space
class CollisionComponent : public Component; 
```

主要应用

```
#include "system.h"

PhysicsStorage Worlddata;

PhysicsComponent Physics;
CollisionComponent Collision;

Physics.SetStorage(&Worlddata);
Collision.SetStorage(&Worlddata); // this points to a PhysicsStorage but that is actually the same like a CollisionStorage which is expected 
```

所以我想知道是否有办法将 say 的指针转换`PhysicsStorage*`为`CollisionStorage*`. 在这种情况下，两者都在其相关组件类的文件中定义。两者都是从 abstract 派生的`Storage`。

我只想在两种自定义存储类型具有完全相同结构的情况下这样做。否则就没有意义了。我对高级指针的使用不太熟悉，所以我想知道是否有办法做到这一点。我所知道的是您可以转换为基类，但这不是我想要的。对两个组件使用共享存储类型会破坏独立性。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:39:05.870

这可能有效，也可能无效。我相信这是一个未定义行为的情况，我会避免在生产代码中这样做。

考虑改为将公共字段和方法推入一个新类，并拥有`ComponentOneStorage`并`ComponentTwoStorage`继承该类。然后，您可以将指针/引用传递给基类，这将使您可以访问公共数据，而不必在不兼容的指针类型之间进行转换。

# javascript - jQuery表遍历

> ID：13074132
> 
> 赞同：1
> 
> 时间：2012-10-25T17:37:18.793
> 
> 标签：javascript, jquery, html, html-table, traversal

我有一张如下表：

```
<table>
  <tr>
    <td><input id="c1" type="text" class=""></td>
    <td><input id="c2" type="text" class="readonly"></td>
    <td><input id="c3" type="text" class=""></td>
  </tr>
</table> 
```

我正在实现一些自定义单元格键盘导航，例如，我希望能够将焦点移动到键盘输入上的新单元格，但跳过与给定选择器匹配的单元格（在`#c1`应该将焦点移动到下一个不是的单元格`.readonly`，同样，在开头按左箭头`#c3`应该将焦点移动到最后一个不是的单元格`.readonly`。

我的代码可以处理键盘事件，但是我的 jQuery 选择器无法移动焦点。我可以轻松地在循环中做我想做的事，但我正在寻找一种更优雅的方式来做到这一点。我当前使用的选择器（例如，将“previous”从 移动`#c3`到`#c2`，（打算是`#c1`））是：

```
$(el).parent('td').prev('td').find('input').focus(); 
```

我基本上该怎么做：

`Element -> Parent 'td' -> Closest previous 'td' containing an 'input' element without the 'readonly' class`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:42:45.243

试试这个

```
$(el).closest('td').prevAll('td:has(input:not(.readonly))').first().find('input').focus(); 
```

# javascript - 正则表达式只返回找到的第一个结果

> ID：13074134
> 
> 赞同：0
> 
> 时间：2012-10-25T17:37:34.937
> 
> 标签：javascript, jquery, get

> **可能重复：**
> [如何使用 JavaScript 中的正则表达式匹配多个匹配项，类似于 PHP 的 preg_match_all()？](https://stackoverflow.com/questions/520611/how-can-i-match-multiple-occurrences-with-a-regex-in-javascript-similar-to-phps)

我正在尝试解析这样的 xml 文档：

```
var str = data.match("<string>" + "(.*?)" + "</string>");
console.log(str); 
```

我想获取`[string]`数组中的所有元素，但由于某种原因，它只返回`string`找到的第一个元素。我不擅长正则表达式，所以我认为这只是一个小的正则表达式问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:41:00.817

你希望它是全球性的`g`

```
var str="<string>1</string><string>2</string><string>3</string>"; 
var n=str.match(/<string>(.*?)<\/string>/g);
 //1,2,3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:43:02.760

您必须形成正则表达式，向其中添加 ag

`/Regex/g`

# list - LWUIT 列表工作非常缓慢

> ID：13074142
> 
> 赞同：2
> 
> 时间：2012-10-25T17:38:02.080
> 
> 标签：list, checkbox, lwuit, renderer

我遇到了 LWUIT 中众所周知的问题。我的带有复选框渲染器的列表组件滚动非常慢。如果要在模拟器上测试我的应用程序，它运行得非常顺利（尽管如此，我看到在滚动操作期间 CPU 使用率高达 60%），但如果在手机上运行它，则焦点移动之间需要几秒钟的时间。

有一个渲染器代码：

```
public class CheckBoxMultiselectRenderer extends CheckBox implements ListCellRenderer {

public CheckBoxMultiselectRenderer() {
    super("");
}

//override
public void repaint() {
}

public Component getListCellRendererComponent(List list, Object value, 
 int index,boolean isSelected) {
    Location loc = (Location)value;
    setText(loc.getLocationName());
    setFocus(isSelected);
    setSelected(loc.isSelected());

    return this;
}

public Component getListFocusComponent(List list) {
    setText("");
    setFocus(true);
    getStyle().setBgTransparency(Consts.BG_TRANSPARENCY);
    return this;
}
} 
```

这是包含列表的表单的代码：

```
protected void createMarkup() {
    Form form = getForm();
    form.setLayout(new BorderLayout());
    form.setScrollable(false);

    Label title = new Label("Choose location zone:");
    title.getStyle().setMargin(5, 5, 0, 0);
    title.getStyle().setBgTransparency(Consts.BG_TRANSPARENCY);
    title.setAlignment(Component.CENTER);

    form.addComponent(BorderLayout.NORTH, title);

    list = new List(StateKeeper.getLocationsAsList());
    list.setFixedSelection(List.FIXED_NONE_CYCLIC);
//        list.setSmoothScrolling(true);
    list.getStyle().setBgTransparency(0);
    list.setListCellRenderer(new CheckBoxMultiselectRenderer());
    list.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent ae){
//                List l = (List)ae.getSource();
//                l.requestFocus();
//                l.setHandlesInput(true);
            Location selItem = (Location)list.getSelectedItem();
            selItem.setSelected(!selItem.isSelected());
        }
    });

    form.addComponent(BorderLayout.CENTER, list);
} 
```

我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:01:56.083

我们必须非常小心地构建 lwuit`List`。如果我们做错了什么，他们的工作可能会比预期的更糟。我建议你看看这个

[LWUIT 博客列表渲染](http://lwuit.blogspot.com.es/2008/07/lwuit-list-renderer-by-chen-fishbein.html)

您还可以重写您的绘画方法。您列表的速度将提高。

# android - 如何制作动画浮动背景？

> ID：13074146
> 
> 赞同：2
> 
> 时间：2012-10-25T17:38:15.590
> 
> 标签：android, android-layout, android-animation

我正在做一个项目，我需要登录视图的背景看起来像是浮动的。现在，我有一个相对布局，其中一个 ImageView 填充了屏幕，并且正在尝试使用动画集来使其工作。我的问题是我无法让背景图像大于屏幕。当它移动时，它被屏幕边缘裁剪。这是让我最接近我想要的动画集：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale android:fromXScale="1.2" android:fromYScale="1.2"
           android:toXScale="1.2" android:toYScale="1.2"
           android:pivotX="50%"  android:pivotY="50%"
           android:duration="1000" android:repeatCount="4"
            android:fillAfter="true"/>
    <translate android:fromXDelta="0%p" android:toXDelta="-10%p"
               android:interpolator="@android:anim/accelerate_interpolator"
               android:duration="1000"/>
    <translate android:fromXDelta="-10%p" android:toXDelta="0%p"
               android:interpolator="@android:anim/accelerate_interpolator"
               android:duration="1000" android:startOffset="1000"/>
    <translate android:fromXDelta="0%p" android:toXDelta="10%p"
               android:interpolator="@android:anim/accelerate_interpolator"
               android:duration="1000" android:startOffset="2000"/>
    <translate android:fromXDelta="10%p" android:toXDelta="0%p"
               android:interpolator="@android:anim/accelerate_interpolator"
               android:duration="1000" android:startOffset="3000"
            android:fillAfter="true"/>
</set> 
```

我让这个集合与动画侦听器一起重复，当它重复时，它并不流畅。缩放动画闪烁回原始图像大小并重新开始。

我尝试过使用 ImageView 的 scaletype，但没有得到正确的组合。有没有人这样做过？

谢谢！

# django - Django 模型 - 共享公共基类的不同对象类型的外键

> ID：13074147
> 
> 赞同：2
> 
> 时间：2012-10-25T17:38:24.640
> 
> 标签：django, django-models

对于我的一个模型，我有以下概念设计。

```
class A(models.Model):
    ...

class B(A): #Inherits A
    fieldA = ...
    fieldB = ...

class C(A): #Inherits A
    fieldC = ...
    fieldD = ...

class D(models.Model):
    field = models.ForeignKey(A) #Here lies the problem, should store B or C 
```

鉴于上述模型，**我想在 D 中存储 B 或 C 的外键，但不能同时存储两者**。

我尝试将 A 的 Meta 类属性设置为抽象，但这不允许 ForeignKey 与 A 的关系。我**不**希望有一个不是 B 或 C 的 A 实例，但如有必要，我可以限制这一点保存信号的行为。

是否有更简单的设计可以让我从所有类都继承自公共基础的类型列表中存储外键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:52:03.653

我可以想到两个选择：

1.  在您的类中使用[通用关系](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1)`D`而不是外键。

2.  如果您不需要`D`使用特定字段进行过滤，`B`或者`C`您可以继续使用现在的方法，但添加一个方法来`D`检索以下子类`field`：

    ```
    class D(models.Model):
        field = models.ForeignKey(A)

        def get_field(self):
            try:
                return self.field.b
            except B.DoesNotExist:
                pass
            try:
                return self.field.c
            except C.DoesNotExist:
                pass 
    ```

    这肯定会影响性能，正如您在帖子中所说，您必须手动确保每个实例`A`都有一个`B`或`C`子类。显然，如果您要拥有`n`多个子类，这种方法就不能很好地扩展。

# html - IE9，单选按钮在选择另一个后保持选中状态

> ID：13074150
> 
> 赞同：0
> 
> 时间：2012-10-25T17:38:45.360
> 
> 标签：html, internet-explorer, radio-button

我在三个单独的 div 中有 3 个单选按钮输入：

```
<div class="box1">
  <input type="radio" name="paymentOption" checked="checked" value="creditcard_on_file" />
  <!-- related subfields for that chosen option -->
</div>
<div class="box2">
  <input type="radio" name="paymentOption" value="newCard" />
  <!-- related subfields for that chosen option -->
</div>
<div class="box3">
  <input type="radio" name="paymentOption" value="check" />
  <!-- related subfields for that chosen option -->
</div> 
```

在页面加载时，默认选择第一个。在**IE9**中，当单击另一个时，第一个保持选中状态！哇。

我该怎么做才能使其正常运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:46:29.317

它对我来说很好..但如果它是一个兼容性问题。尝试使用 JavaScript 清除其他项目。

试试这个： [如何在 jQuery 中重置单选按钮，以便不检查](https://stackoverflow.com/questions/977137/how-to-reset-radiobuttons-in-jquery-so-that-none-is-checked)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:04:01.650

围绕给定标记的其他一些 html 中有错字。我了解到 IE 似乎处理无效标记的情况与其他浏览器有点不同，因为它要么复制一个部分，要么将隐藏一个部分。由于在这种情况下，这些问题都没有发生，因此不正确的 html 中的标记行为不端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T16:21:46.053

我们在 IE 9.0.8112 64 位上遇到了同样的问题，但原因不同。我们忘记分配名称以将输入关联在一起。有趣的是，这在所有其他浏览器上都有效，因为我们使用 AngularJS 的 ng-checked 来设置单选按钮状态（即使是 IE 9 的非 64 位版本）。

# c - list_empty 函数内核链表

> ID：13074151
> 
> 赞同：2
> 
> 时间：2012-10-25T17:38:50.020
> 
> 标签：c, linux-kernel, linked-list, kernel

`list_empty()`函数在中定义`./include/linux/list.h`，其定义为

```
static inline int list_empty(const struct list_head *head)
{
    return head->next == head;
} 
```

`list_head`数据结构定义为

```
struct list_head {
     struct list_head *next, *prev;
}; 
```

我不明白为什么内核中的这个实现会检查`head->next == head`而不是`head->next == NULL`&& `head->prev == NULL`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T17:41:57.177

该列表是圆形的，头部本身用作虚拟节点。循环列表在插入和删除过程中所需的比较次数上有一点优势。由于没有空指针，因此没有那么多特殊情况需要寻找。我这里没有源代码，但是如果你检查一下，你会发现初始化列表是通过以下方式完成的：

```
head->next = head->prev = head; 
```

插入将是：

```
void insert_after(struct list_head *node, struct list_head *after)
{
  node->next = after->next;
  node->prev = after;
  after->next->prev = node;
  after->next = node; 
} 
```

看！根本没有 if 语句！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:43:16.460

因为`head->next`不是`NULL`当列表为空时，而是指向`head`。

# ios - UIImagePickerController 中的 UIImage 方向问题

> ID：13074161
> 
> 赞同：0
> 
> 时间：2012-10-25T17:39:28.057
> 
> 标签：ios, uiimageview, uiimage, uiimagepickercontroller

我`UIImagePickerController`用来从用户的照片库中获取图像和/或用相机拍摄。效果很好。

我注意到获取的图像通常（总是？）返回它们的`imageOrientation`设置为`UIImageOrientationRight`. 但是该图像是使用设备纵向拍摄的。 **为什么是这样？** 这是一个 iPhone4S，iOS6，使用后置摄像头 - 所以分辨率是 8MP。

在模拟器中，从照片库中抓取照片，图像返回`UIImageOrientationUp`。

当我以`UIImageView`方向看起来正确（纵向/向上）显示图像时。但是当我去裁剪图像时，坐标系并不是我所期望的。0,0 在图像的右上角，我猜它在报告时是有道理的`UIImageOrientationRight`。

我正在寻找对正在发生的事情的解释以及处理奇数坐标系的正确方法。

**编辑**：在我看来，至少在 iPhone4S 上，相机总是拍摄 UIImageOrientationRight/“风景”图像，并且 UIImageView 尊重显示的 imageOrientation。但是，如果我使用 UIImagePNGRepresentation 保存图像，则不会保留方向（我想我在某处读到过这个。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:53:19.110

这与拍摄图像时手机所处的方向有关。手机不会旋转来自相机传感器的图像数据来弥补图像，而是设置 imageOrientation，然后 UIImage 将负责以正确的方式渲染事物。

当您尝试裁剪时，您通常会将图像更改为 CGImage 并且会丢失方向信息，所以突然间您会获得具有奇怪方向的图像。

您可以获得 UIImage 上的几个类别，这些类别将在考虑 imageOrientation 的同时执行图像裁剪。

看看[链接](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)或[链接](https://github.com/mbcharbonneau/UIImage-Categories)

# algorithm - S的最长平衡子序列

> ID：13074163
> 
> 赞同：5
> 
> 时间：2012-10-25T17:39:35.370
> 
> 标签：algorithm, dynamic-programming

**给定问题：**

如果字符串中的左括号和右括号可以正确配对，则称该字符串是平衡的。例如，字符串 "(())" 和 "()()" 都是平衡的，而字符串 "(()(" 是不平衡的。给定一个由括号组成的长度为**n**
的字符串**S**，假设你想找到**S**的最长平衡子序列。使用动态规划，设计一种算法，在**O(n^3)**时间内找到**S的最长平衡子序列。**

 ******我的方法：
假设给定字符串： S[1 2 ... n]
如果 S[i] == ')' 即 S[i] 是右大括号并且存在，则有效的子序列可以在 S[i] 处结束在 S[i] 之前至少有一个未使用的左大括号。这可以在 O(N) 中实现。

```
#include<iostream>
using namespace std;
int main(){
    string s;
    cin >> s;
    int n = s.length(), o_count = 0, len = 0;
    for(int i=0; i<n; ++i){
        if(s[i] == '('){
            ++o_count;
            continue;
        }
        else if(s[i] == ')' && o_count > 0){
            ++len;
            --o_count;
        }
    }
    cout << len << endl;
    return 0;
} 
```

我尝试了几个测试用例，它们似乎工作正常。我在这里错过了什么吗？如果没有，那么我该如何为这个问题设计一个**O(n^3)**动态规划解决方案？

这是我正在使用的[子序列的定义。](http://en.wikipedia.org/wiki/Subsequence)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:00:42.163

对于`O(n^3)`DP，我认为这应该可行：

```
dp[i, j] = longest balanced subsequence in [i .. j]
dp[i, i] = 0
dp[i, i + 1] = 2 if [i, i + 1] == "()", 0 otherwise

dp[i, j] = max{dp[i, k] + dp[k + 1, j] : j > i + 1} in general 
```

这可以类似于[最优矩阵链乘法](http://en.wikipedia.org/wiki/Matrix_chain_multiplication)来实现。

你的算法对我来说似乎也是正确的，例如这个问题：

[http://xorswap.com/questions/107-implement-a-function-to-balance-parentheses-in-a-string-using-the-minimum-nu](http://xorswap.com/questions/107-implement-a-function-to-balance-parentheses-in-a-string-using-the-minimum-nu)

解决方案与您的解决方案基本相同。

你只是忽略了额外的括号，所以我不明白为什么它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T15:26:09.300

这是`O(n^2)`Java中的时空DP解决方案：

```
public int findLongestBalancedSubsequence(String seq, int n) {
    int[][] lengths = new int[n][n];

    for (int l = 1; l < n; l++) {
        for (int i = 0; i < n - l; i++) {
            int j = i + l;
            // Ends are balanced.
            if (seq.charAt(i) == '(' && seq.charAt(j) == ')') {
                // lengths[i, j] = max(lengths[i + 1, j - 1] + 2, lengths[i + 1, j] + 
                // lengths[i, j - 1] - lengths[i + 1, j - 1])
                if (lengths[i + 1][j - 1] + 2 > lengths[i + 1][j] +
                    lengths[i][j - 1] - lengths[i + 1][j - 1])
                    lengths[i][j] = lengths[i + 1][j - 1] + 2;
                else
                    lengths[i][j] = lengths[i + 1][j] +
                        lengths[i][j - 1] - lengths[i + 1][j - 1];
            // Ends are not balanced.
            } else {
                // lengths[i, j] = max(lengths[i + 1, j], lengths[i, j - 1])
                if (lengths[i + 1][j] > lengths[i][j - 1])
                    lengths[i][j] = lengths[i + 1][j];
                else
                    lengths[i][j] = lengths[i][j - 1];
            }
        }
    }

    return lengths[0][n - 1];
} 
```******

# php - 需要知道给定日期是否已过期

> ID：13074166
> 
> 赞同：0
> 
> 时间：2012-10-25T17:39:51.190
> 
> 标签：php, datetime

我需要知道如何在 php 中知道给定日期是否已过期？我需要在包管理器中显示相同的状态，我需要知道包是活动的还是过期的。我在 mysql 表中有 2 个字段，称为 start_date 和 expiry_date。

我需要知道如何从 star_date 中减去 expiry_date 并获取该值，然后检查该 expiry_date 是否已过期或尚未过期。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:44:59.763

好的，我将做一些假设，以便我的答案更清楚。

如果你的 expiry_date 是包过期的日期，你可以使用 php 来检查它是否是未来的日期。

```
$exp_date = strtotime($expiry_date);

if(time() > $exp_date) // your package has expired. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:44:30.030

在 MySQL 中尝试 DATEDIFF

```
SELECT DATEDIFF(expiry_date,start_date) AS difference FROM packages... 
```

或者在 PHP 中，您可以遍历答案并选择以下内容：

```
 $curr_date = date('Y-m-d'); // or your date format

// loop

if ($row['start_date'] <= $curr_date && $row['expiry_date'] > $curr_date){
  // post is active
}
elseif ($row['expiry_date'] > $curr_date)
{
   // post expired
} 
```

# xml - 通过 XSLT 1.0 转换许多 E2ETraceEvent

> ID：13074170
> 
> 赞同：1
> 
> 时间：2012-10-25T17:40:00.000
> 
> 标签：xml, xslt

我有一个生成 Microsoft`<E2ETraceEvent/>`节点的第 3 方应用程序，所以基本上有很多根节点我无法弄清楚是否有办法告诉忽略 XSLT 的多根问题而不创建另一个进程来围绕条目包装根元素？如果有怎么办？

基本上 XML 文件包含许多条目，如下所示

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
    <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
        <EventID>1</EventID>
        <Type>3</Type>
        <SubType Name="Error">0</SubType>
        <Level>2</Level>
        <TimeCreated SystemTime="2012-10-21T16:38:10.0421996Z" />
        <Source Name="Framework" />
        <Correlation ActivityID="{00000000-0000-0000-0000-000000000000}" />
        <Execution ProcessName="Framework" ProcessID="2448" ThreadID="15" />
        <Channel />
        <Computer>WIN</Computer>
    </System>
    <ApplicationData>
        <TraceData>
            <DataItem>
                <TraceRecord Severity="Error" xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord">
                    <TraceIdentifier>Framework</TraceIdentifier>
                    <Description>Killing unresponsive jobs.</Description>
                    <AppDomain>JobHost</AppDomain>
                </TraceRecord>
            </DataItem>
        </TraceData>
    </ApplicationData>
</E2ETraceEvent> 
```

# java - Tomcat 5/Java RESTFul Web 服务 - 访问文件夹中的文件

> ID：13074173
> 
> 赞同：2
> 
> 时间：2012-10-25T17:40:10.770
> 
> 标签：java, rest, tomcat, jersey

我正在使用 Jersey API 构建一个 RESTful Web 服务并在 Ubuntu 的 Tomcat5 上运行它。Web 服务在我的机器上运行良好（我在 Eclipse 上运行 Web 服务），问题是当我尝试在服务器上运行它时。我必须访问一个文件（更具体地说是一个[jdbm2](http://code.google.com/p/jdbm2/) HashMap）并在其中搜索给定的单词。要访问我计算机上的文件，我只需将包含该文件的文件夹复制到 eclipse 文件夹中。但是，在服务器上，程序找不到该文件夹​​。问题似乎是所需的文件夹（称为 MasterHash）不在工作目录中。

我认为问题与 web.xml 或 context.xml 文件有关。web.xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                                http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>NGramSearch_WebService</display-name>
    <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>search</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

context.xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context docBase="/usr/share/tomcat5/webapps/NGramSearch_WebService"
path="/NGramSearch_WebService"
reloadable="true"
workDir="/usr/share/tomcat5/webapps/">

</Context> 
```

我想我必须在 context.xml 文件中添加一个资源，但我不知道该怎么做。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:11:01.980

您无需在*context.xml*中添加资源即可从 Web 服务类访问文件。只需将您的文件夹（我们称之为“yourfolder”）留在“WebContent”文件夹下即可。

将以下参数添加到您的 Web 服务类：

```
@Context
ServletContext context; 
```

现在使用下面的代码访问您的文件夹：

```
File filepath = new File(context.getRealPath("yourfolder")); 
```

# magento - 有谁知道我如何向我的在线商店中的所有注册用户发送电子邮件？

> ID：13074181
> 
> 赞同：0
> 
> 时间：2012-10-25T17:40:36.847
> 
> 标签：magento

有谁知道我如何向我的在线商店中的所有注册用户发送电子邮件？我将模板创建为交易邮件，但我不知道如何将此电子邮件发送给所有注册用户

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:25:01.590

1.  在管理面板中，选择**客户 > 管理客户**。点击
2.  单击**刷新过滤器**以显示所有客户。
3.  点击**全选**
4.  在此页面右上角 的**操作字段中，选择****订阅时事通讯**。
5.  点击**提交**

所有注册客户现在都订阅了您的时事通讯。现在您可以在 Newsletter / Newsletter Templates 创建一个时事通讯模板。

1.  创建并保存模板后，您可以通过在 Action 下拉菜单中选择**Queue Newsletter来安排它。**
2.  **在Queue Date Start**中选择您要开始发送时事通讯的日期和时间。
3.  单击**保存时事通讯**，您将在时事通讯队列中看到预定的时事通讯。
4.  如果一切顺利，您将看到一段时间后所有收件人都将收到时事通讯，状态应为已**发送**

如果您不想为所有客户订阅时事通讯，可以使用此扩展程序：http: [//www.magentocommerce.com/magento-connect/marketing/email-marketing/mass-email-to-registered-customers- 7187.html](http://www.magentocommerce.com/magento-connect/marketing/email-marketing/mass-email-to-registered-customers-7187.html)

# php - PHP, PDO, Sql, Try Catch ,Connection

> ID：13074183
> 
> 赞同：-1
> 
> 时间：2012-10-25T17:40:43.827
> 
> 标签：php, sql, pdo

例如，当我使用 try catch 块时：

```
try{
     require_once('../php/connect.php');
     $dbh = db::getInstance();
     // What i am trying to understand should i close the connection here before the header?
     header("Location: x.php");
   }
} catch(PDOException $e){
   require_once('err.php');
 }
 $dbh = null; // Or should i close the connection here? 
```

是“翻译”甚至在第“5”行之后，谢谢大家，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:42:40.717

由于您没有使用`exit`after `header()`（[推荐](http://php.net/manual/en/function.header.php)），您的代码将继续执行。

因此，您输入第 4 行还是第 10 行并不重要。此外，正如**prodigitalson**所指出的，您无需显式[关闭数据库连接](http://php.net/manual/en/pdo.connections.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:42:57.633

您根本不需要关闭连接。当 php 退出时它将被关闭。但是，您不会在...`exit`之后打电话`header`

但是，您的代码没有成功，如果数据库连接成功，您为什么要重定向而不做任何事情？？？？如果完全使用标题，我认为您会调用它来重定向到错误页面（即在您的`catch`块中）。

# django - Django 存储系统的区别

> ID：13074193
> 
> 赞同：2
> 
> 时间：2012-10-25T17:41:33.997
> 
> 标签：django

我有一个 Django 应用程序，它使用 FileSystemStorage 进行开发，使用 S3BotoStorage 进行暂存和生产。一切正常。我注意到这些系统之间存在一些小的差异：

1.  FileSystemStorage 会将 MEDIA_ROOT 值附加到它保存的任何文件中。S3BotoStorage 默认不会。

2.  如果我使用 FileField 删除模型实例，S3BotoStorage 将删除 FileField 的文件和文件所在的目录，如果该文件是该目录中的唯一文件。FileSystemStorage 不会删除空目录。

我可以解决这些差异，但它们会在我的代码中添加条件。其中第一个是最简单的——我只是用`location=MEDIA_ROOT`. 有没有办法以类似的方式处理第二个？我可以配置任一存储类的目录删除行为吗？我应该重写 FileSystemStorage 的删除方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:46:30.330

（第 144 行）的代码`FileSystemStorage.delete`没有我可以看到的任何配置：

```
def delete(self, name):
    name = self.path(name)
    # If the file exists, delete it from the filesystem.
    # Note that there is a race between os.path.exists and os.remove:
    # if os.remove fails with ENOENT, the file was removed
    # concurrently, and we can continue normally.
    if os.path.exists(name):
        try:
            os.remove(name)
        except OSError as e:
            if e.errno != errno.ENOENT:
                raise 
```

所以，是的，最简单和最干净的方法可能是重写它的删除方法来额外检查空目录的情况。

# google-apps-script - 发送前自定义电子邮件

> ID：13074194
> 
> 赞同：2
> 
> 时间：2012-10-25T17:41:38.740
> 
> 标签：google-apps-script, google-sheets

我正在重新编写朋友的艺术家/客户预订系统。我在编程方面几乎没有经验，有足够的理解来破解我的方式，谷歌对我有很大的帮助！

在过去的 3 天里，我一直在阅读和搜索……对此一无所知……也许我没有使用正确的术语……

这就是我想做的。
我使用谷歌脚本和谷歌电子表格。1 行包含有关特定合同的所有信息。

1.  我希望能够使用菜单项来生成合同（已完成）
2.  打开2个浏览器窗口
    *   一份显示合同PDF文件（已完成）
    *   一封用于 GMAIL 新电子邮件

        *   附上合同pdf（已完成）
        *   从电子表格中的选定行生成电子邮件正文（已完成）
        *   能够在发送之前自定义生成的电子邮件文本。添加附件...

这就是我所坚持的。我用

> MailApp.sendEmail('xxx@yyy.com', '将电子邮件传输为 pdf : body & attachment', '查看附件', {attachments:[body_to_send]});

它可以发送电子邮件，带有附件和生成的正文以及所有...但是在发送之前无法编辑电子邮件...

谷歌脚本有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T17:55:55.357

探索 Google Apps 脚本中的 UiApp 类。[应用程序](https://developers.google.com/apps-script/reference/ui/ui-app)

您可以构建一个简单的 UI，用户可以在其中输入其他内容并上传文件，然后可以在发送之前将其附加到电子邮件中。

Apps Script 似乎不支持创建电子邮件草稿，这也为您提供了一种在发送电子邮件之前对其进行编辑的方法。（使用原生 Gmail 用户界面的另一种可能性是通过一种奇特的方式向自己发送电子邮件来引用最终收件人。）

这是你想的方向吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T18:10:08.017

您可以使用 Google Doc 模板来完成流程的最后一步，您可以在其中添加任何您想要改进演示文稿的内容。从那里您可以获得文档的 html 版本，并将其用作邮件中的 html 正文。如果您需要有关 html 导入的更多详细信息，您可以在此论坛和问题跟踪器上轻松找到它。您还可以从边栏中的文档绑定脚本运行此代码，这在视觉上会更方便。（请参阅我最近关于邮件合并的帖子）。

# javascript - 重新排序 html 元素而不在视觉上删除它们

> ID：13074195
> 
> 赞同：0
> 
> 时间：2012-10-25T17:41:41.907
> 
> 标签：javascript, jquery, html, css, css-transitions

好吧，第一件事。我想要完成的是创建我自己的“半 3d”圆形旋转木马。那里有很多，还有一些非常好的，比如 iCarousel（这有点像我想要的）

事情是我想做我自己的，只是为了它，我认为这是很好的做法。

到目前为止，我有这个[http://jsfiddle.net/Puzzle/Pmxjf/10/](http://jsfiddle.net/Puzzle/Pmxjf/10/)

```
 $this.Shift = function (items, end) {
        if (end == true) {
            $this.children().each(function () {
                // Rearrange all items
                $this.CalculateNewPos(this);
                $this.Rotate(this);
            });
        }
        else {
            $this.children().each(function () {
                // Rearrange all items
                $this.CalculateNewPos(this);
                $this.Rotate(this);
            });
        }
    }

    $this.ShiftRight = function(items, index)
    {
        $(items[index]).fadeOut('slow', function () {
            $(this).insertAfter($this.children().last());
            $this.Shift(items, false);
            $(this).fadeIn('slow');
        });
    }

    $this.ShiftLeft = function(items, index, currentItem)
    {
        $(items[currentItem - index]).fadeOut('slow', function () {
            $(this).insertBefore($this.children().first());
            $this.Shift(items, true);
            $(this).fadeIn('slow');
        });
    } 
```

这段代码基本上完成了所有的删除。以及您可以在 jsfiddle 中找到的轮换代码。

如您所见，在第一次加载时，钓鱼效果很好，但在旋转时它有点失败。而且褪色看起来不错，但是当您单击最后的图像 div 时，它一次会褪色 2 个。

最糟糕的是。当我使用 insertBefore 和 insertAfter 时，整个轮播会发生变化。

我现在的脑筋急转弯是弄清楚如何通过纯动画使它们平滑地移动到堆栈的末尾或开头。

你们中有人知道我应该从哪里开始寻找吗？我查看了 iCarousel 代码，这是我还没有准备好解决的大量原始数学问题。

谢谢 ：）

# dependencies - 尝试为 PCRE-8.31 制作 RPM

> ID：13074198
> 
> 赞同：0
> 
> 时间：2012-10-25T17:42:00.800
> 
> 标签：dependencies, centos, rpm, updates, yum

我正在尝试制作一个 RPM 以在 CentOS 6.3 机器上安装 PCRE-8.31。您可以查看我的规范文件。尽管符合所有要求（据我所知），但在尝试安装软件包时出现以下错误。我在正确的位置放置了指向 libpcre.so.0 的符号链接，那么我做错了什么？

### pcre.spec

```
Name:           pcre
Version:        8.31
Release:        1%{?dist}
Summary:        Perl Compatible Expressions Library

Group:          Libraries
License:        BSD
URL:            http://wwww.pcre.org/
Source0:        ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.31.tar.bz2
BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{ __id_u} -n)

BuildRequires: readline-devel
BuildRequires: autoconf, automake, libtool

%description
Perl-compatible regular expression library.
PCRE has its own native API, but a set of "wrapper" functions that are based on
the POSIX API are also supplied in the library libpcreposix. Note that this
just provides a POSIX calling interface to PCRE: the regular expressions
themselves still follow Perl syntax and semantics. The header file
for the POSIX-style functions is called pcreposix.h.

%package devel
Summary: Development files for %{name}
Group: Development/Libraries
Requires: %{name} = %{version}-%{release}

%description devel
Development files (Headers, libraries for static linking, etc) for %{name}.

%prep
%setup -q

%build
%configure \
        --prefix=/usr \
        --build=x86_64-redhat-linux-gnu \
        --docdir=/usr/share/doc/pcre-8.31 \
        --enable-jit \
            --enable-pcre8 \
        --enable-pcre16 \
        --enable-pcregrep-libz \
        --enable-pcregrep-libbz2 \
        --enable-pcretest-libreadline \
        --enable-rebuild-chartables \
        --enable-unicode-properties \
        --enable-utf \
            --disable-static \
            CC="gcc -m64" \
            CXX="g++ -m64"
make %{?_smp_mflags}

%install
rm -Rf %{buildroot}

make install DESTDIR=$RPM_BUILD_ROOT

mkdir -p %{buildroot}/%{_lib}
mv %{buildroot}%{_libdir}/libpcre.so.* %{buildroot}/%{_lib}/
pushd %{buildroot}/%{_lib}
ln -fs libpcre.so.1.0.1 libpcre.so.0
popd

rm -f %{buildroot}%{_libdir}/*.la

%check
make check

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%clean
rm -Rf %{buildroot}

%files
%defattr(-,root,root)
/%{_lib}/*.so.*
%{_libdir}/*.so.*
%{_mandir}/man1/*
%{_bindir}/pcregrep
%{_bindir}/pcretest
%doc LICENCE AUTHORS

%files devel
%defattr(-,root,root)
%{_libdir}/*.so
%{_libdir}/pkgconfig/*
%{_includedir}/*.h
%{_mandir}/man3/*
%{_bindir}/pcre-config
%{_prefix}/share/doc/%{name}-%{version}/*

%changelog 
```

### 安装

```
# yum install pcre-8.31-1.el6.x86_64.rpm
Loaded plugins: fastestmirror, refresh-packagekit, security
Loading mirror speeds from cached hostfile
Setting up Install Process
Examining pcre-8.31-1.el6.x86_64.rpm: pcre-8.31-1.el6.x86_64
Marking pcre-8.31-1.el6.x86_64.rpm as an update to pcre-7.8-4.el6.x86_64
Resolving Dependencies
--> Running transaction check
---> Package pcre.x86_64 0:7.8-4.el6 will be updated
--> Processing Dependency: libpcre.so.0()(64bit) for package: 1:libguestfs-1.16.19-1.el6.x86_64
--> Processing Dependency: libpcre.so.0()(64bit) for package: 6:kdelibs-4.3.4-14.el6.x86_64
--> Processing Dependency: libpcre.so.0()(64bit) for package: httpd-2.2.15-15.el6.centos.1.x86_64
--> Processing Dependency: libpcre.so.0()(64bit) for package: sssd-1.8.0-32.el6.x86_64
--> Processing Dependency: libpcre.so.0()(64bit) for package: grep-2.6.3-3.el6.x86_64
--> Processing Dependency: libpcre.so.0()(64bit) for package: kdelibs3-3.5.10-24.el6_1.1.x86_64
--> Processing Dependency: libpcre.so.0()(64bit) for package: gnote-0.6.3-3.el6.x86_64
--> Processing Dependency: libpcre.so.0()(64bit) for package: less-436-10.el6.x86_64
--> Processing Dependency: libpcre.so.0()(64bit) for package: httpd-tools-2.2.15-15.el6.centos.1.x86_64
---> Package pcre.x86_64 0:8.31-1.el6 will be an update
--> Finished Dependency Resolution
Error: Package: 1:libguestfs-1.16.19-1.el6.x86_64 (@c6-media)
           Requires: libpcre.so.0()(64bit)
           Removing: pcre-7.8-4.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
               libpcre.so.0()(64bit)
           Updated By: pcre-8.31-1.el6.x86_64 (/pcre-8.31-1.el6.x86_64)
               Not found
Error: Package: httpd-2.2.15-15.el6.centos.1.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
           Requires: libpcre.so.0()(64bit)
           Removing: pcre-7.8-4.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
               libpcre.so.0()(64bit)
           Updated By: pcre-8.31-1.el6.x86_64 (/pcre-8.31-1.el6.x86_64)
               Not found
Error: Package: gnote-0.6.3-3.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
           Requires: libpcre.so.0()(64bit)
           Removing: pcre-7.8-4.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
               libpcre.so.0()(64bit)
           Updated By: pcre-8.31-1.el6.x86_64 (/pcre-8.31-1.el6.x86_64)
               Not found
Error: Package: 6:kdelibs-4.3.4-14.el6.x86_64 (@c6-media)
           Requires: libpcre.so.0()(64bit)
           Removing: pcre-7.8-4.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
               libpcre.so.0()(64bit)
           Updated By: pcre-8.31-1.el6.x86_64 (/pcre-8.31-1.el6.x86_64)
               Not found
Error: Package: grep-2.6.3-3.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
           Requires: libpcre.so.0()(64bit)
           Removing: pcre-7.8-4.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
               libpcre.so.0()(64bit)
           Updated By: pcre-8.31-1.el6.x86_64 (/pcre-8.31-1.el6.x86_64)
               Not found
Error: Package: kdelibs3-3.5.10-24.el6_1.1.x86_64 (@c6-media)
           Requires: libpcre.so.0()(64bit)
           Removing: pcre-7.8-4.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
               libpcre.so.0()(64bit)
           Updated By: pcre-8.31-1.el6.x86_64 (/pcre-8.31-1.el6.x86_64)
               Not found
Error: Package: httpd-tools-2.2.15-15.el6.centos.1.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
           Requires: libpcre.so.0()(64bit)
           Removing: pcre-7.8-4.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
               libpcre.so.0()(64bit)
           Updated By: pcre-8.31-1.el6.x86_64 (/pcre-8.31-1.el6.x86_64)
               Not found
Error: Package: sssd-1.8.0-32.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
           Requires: libpcre.so.0()(64bit)
           Removing: pcre-7.8-4.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
               libpcre.so.0()(64bit)
           Updated By: pcre-8.31-1.el6.x86_64 (/pcre-8.31-1.el6.x86_64)
               Not found
Error: Package: less-436-10.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
           Requires: libpcre.so.0()(64bit)
           Removing: pcre-7.8-4.el6.x86_64 (@anaconda-CentOS-201207061011.x86_64/6.3)
               libpcre.so.0()(64bit)
           Updated By: pcre-8.31-1.el6.x86_64 (/pcre-8.31-1.el6.x86_64)
               Not found
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T04:00:45.950

CentOS 6 提供的 PCRE 7.x 版本包含 SO 版本为 0(libpcre.so.0) 的共享库。它与您尝试构建的 PCRE 8.1 软件包 libpcre.so.1 不同。

即使您强制安装软件包，显示为依赖项的软件也很可能无法正常运行。

如果定制的 PCRE 应该被限制用于特定目的，您需要更改其包名称以免与原始名称冲突，并将其安装在与原始名称不同的目录中。

```
%define _prefix /usr/local 
```

# c# - 将强类型属性名称作为参数传递

> ID：13074202
> 
> 赞同：3
> 
> 时间：2012-10-25T17:42:17.413
> 
> 标签：c#, lambda, strong-typing

我有一个集合`IEnumerable<School>`被传递给一个扩展方法，该方法填充一个`DropDownList`. 我也想传递 `DataValueField`and`DataTextField`作为参数，但我希望它们是强类型的。

基本上，我不想`string`为`DataValueField`and`DataTextField`参数传递 a，这很容易出错。

```
public static void populateDropDownList<T>(this DropDownList source,
        IEnumerable<T> dataSource,
        Func<T, string> dataValueField,
        Func<T, string> dataTextField) {
    source.DataValueField = dataValueField; //<-- this is wrong
    source.DataTextField = dataTextField; //<-- this is wrong
    source.DataSource = dataSource;
    source.DataBind();
} 
```

这么称呼...

```
myDropDownList.populateDropDownList(states,
        school => school.stateCode,
        school => school.stateName); 
```

我的问题是，如何将`DataValueField`和`DataTextField`强类型作为参数传递给 populateDropDownList？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T18:18:31.110

根据乔恩的回答和[这篇](https://stackoverflow.com/a/1984194/547071)文章，它给了我一个想法。我将`DataValueField`and传递给我`DataTextField`的`Expression<Func<TObject, TProperty>>`扩展方法。我创建了一个接受该表达式并返回该`MemberInfo`属性的方法。然后我只需要打电话给`.Name`我，我已经拿到了我的`string`.

哦，我将扩展方法名称更改为`populate`，这很难看。

```
public static void populate<TObject, TProperty>(
        this DropDownList source, 
        IEnumerable<TObject> dataSource, 
        Expression<Func<TObject, TProperty>> dataValueField, 
        Expression<Func<TObject, TProperty>> dataTextField) {
    source.DataValueField = getMemberInfo(dataValueField).Name;
    source.DataTextField = getMemberInfo(dataTextField).Name;
    source.DataSource = dataSource;
    source.DataBind();
}

private static MemberInfo getMemberInfo<TObject, TProperty>(Expression<Func<TObject, TProperty>> expression) {
    var member = expression.Body as MemberExpression;
    if(member != null) {
        return member.Member;
    }
    throw new ArgumentException("Member does not exist.");
} 
```

这么称呼...

```
myDropDownList.populate(states,
    school => school.stateCode,
    school => school.stateName); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T17:48:25.980

*如果*您只是尝试使用属性链，您可以将参数更改为，然后提取所涉及的属性`Expression<Func<T, string>>`名称 - 您需要剖析[`Expression<TDelegate>`](http://msdn.microsoft.com/en-us/library/bb335710.aspx)您获得的... . 如果您有多个 ( )，则一个成员访问的目标表达式将是另一个成员，等等。[`Body`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.lambdaexpression.body.aspx)[`MemberExpression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.memberexpression.aspx)`school.address.FirstLine`

由此，您可以构建一个字符串以在`DataValueField`( 和`DataTextField`) 中使用。当然，来电者仍然可以把你搞砸：

```
myDropDownList.populateDropDownList(states,
    school => school.stateCode.GetHashCode().ToString(),
    school => school.stateName); 
```

...但是您可以检测到它并抛出异常，并且您仍然可以为*好的*调用者提供重构证明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:49:21.583

使用您正在尝试的内容，即使您确实让它编译/运行，它仍然是错误的，因为 Value & Text 字段将被设置为列表中的一个值而不是属性名称（即，`DataValueField = "TX"; DataTextField = "Texas";`而不是`DataValueField = "stateCode"; DataTextField = "stateName";`像你真的想要）。

```
public static void populateDropDownList<T>(this DropDownList source,
        IEnumerable<T> dataSource,
        Func<string> dataValueField,
        Func<string> dataTextField) {
    source.DataValueField = dataValueField();
    source.DataTextField = dataTextField();
    source.DataSource = dataSource;
    source.DataBind();
}

myDropDownList.populateDropDownList(states,
        "stateCode",
        "stateName"); 
```

# android - 如何销毁一个 Activity 使其在按下后退按钮时不显示？

> ID：13074204
> 
> 赞同：0
> 
> 时间：2012-10-25T17:42:28.210
> 
> 标签：android, android-activity, ondestroy, activity-finish, recreate

我有两个活动，A 和 B。这是一个正常的场景：A 正在运行，然后向 B 发送意图。A 暂停，B 显示。当用户从 B 按下返回按钮时，B 被破坏，用户返回到 A。

但是，存在 B 需要重新创建自身的情况。为此，我打电话`finish()`，然后`startActivity()`在 B 上，效果很好。但是，当我单击后退按钮时，它再次显示 B，因此我需要再次单击后退按钮才能返回 A。

如何重新启动 B，但仍然只能按一次返回按钮返回 A？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T17:47:41.313

以下将在启动下一个意图时处理当前活动：

```
Intent launchNext = new Intent(getApplicationContext(), NextActivity.class);
launchNext.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(launchNext); 
```

要覆盖后退按钮，请使用以下命令：

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    this.finish(); // or do something else
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:46:57.943

这可以通过仔细查看您的意图标志来解决。查看[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)，它们会提供有关您所追求的生命周期的更多信息。

另外，不要忘记您可以覆盖后退按钮功能。如果您想更密切地管理您的生命周期，这可能会有所帮助。例如，如果从 B 返回，您还可以确保返回 A。如果返回 A，则关闭您的应用程序。

# mpi - mvapich 会比 openmpi 好很多吗？如何？

> ID：13074224
> 
> 赞同：2
> 
> 时间：2012-10-25T17:43:34.263
> 
> 标签：mpi

我是计算流体动力学 (CFD)，但我不太了解 mpi。

由于繁重的 CFD 工作需要 Infiniband 支持，人们说 mvapich 通常比其他 mpi 实现要好得多。我想知道这是真的吗？任何人有任何我可以查看的真实经验和参考资料吗？以及为什么 mvapich 比 openmpi 等更好？是Infiniband公司写的还是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T01:01:24.023

所以答案是“可能不会，反正也没关系”。

您使用 MPI API 编写代码，并且您始终可以安装多个 MPI 库并针对每个库进行测试，就像您可能使用多个 LAPACK 实现一样。如果您的应用程序始终更快，请使用它。但是 MPI 社区非常关注性能，免费的竞争对手都是开源的，并且在论文中发表了他们的方法，并且都发布了大量的基准测试。友好的竞争与开放性相结合，往往意味着任何实现都不会长期具有显着的性能优势。

在我们的大型 x86 集群上，我们使用 MPICH2、OpenMPI、MVAPICH2 和 IntelMPI 完成了“真实世界”和微基准测试。在三个开源版本中，没有明显的赢家；在某些情况下，一个人会赢 10-20%，在其他情况下，它会输掉相同的金额。在我们有兴趣深入研究细节以找出原因的少数情况下，这通常只是诸如急切限制或不同集体算法之间的交叉之类的默认问题，并且通过设置几个环境变量，我们可以获得性能在他们之间的噪音之中。在其他情况下，性能优势仍然存在，但要么不够大，要么不够一致，我们无法进一步调查。

（花费大量资金的*IntelMPI*明显且几乎始终如一地更快，尽管我们认为在那里取得的重大胜利是大幅缩短了大型工作的启动时间。）

MVAPICH 是最早真正追求 Infiniband 性能的 MPI 实现之一，在拥有大量 Myrinet 经验之后，它们确实在相当长的一段时间内拥有显着优势，并且可能在基准测试中它们仍然获胜；但最终并没有取得一致且重要的性能胜利，我们选择 OpenMPI 作为我们主要的开源 MPI 选项。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-26T05:44:19.743

我同意 Jonathan 关于答案的观点，并从集群管理的角度补充几点。

作为一个有时会涉足集群管理的人，我要补充一点，在大型集群上调整 InfiniBand 并不是一件容易的事。您必须确保 OFED 堆栈很好地位于您的内核上。硬件没有故障，交换机按预期工作，在持续模式下没有性能问题，应用程序正确映射到 InfiniBand 拓扑等等。

OpenMPI 堆栈与 MPICH/MVAPICH 有很大不同。我发现 OpenMPI 组件架构比 MPICH/MVAPICH 的架构更容易找到和调试问题，而 MPICH/MVAPICH 架构更单一。

说到供应商，记得**MPICH**来自 Argonne 的 MCS 部门。

**更新：**从 3.1 版开始，MPICH 通过 ib 网络模块支持 OFED InfiniBand。从 3.2 开始，MPICH 还将支持 Mellanox MXM 接口。

**MVAPICH**是由俄亥俄州立大学 CS&E 部门的人员基于 MPICH 资源构建的。

许多硬件供应商都在 MPICH 或 MVAPICH 之上构建，以便为其各自的硬件提供 InfiniBand 支持。一个例子是**英特尔 MPI**。另一个是**伏尔泰 MPI**。

**OpenMPI**由思科等 InfiniBand 交换机供应商支持的多个团队开发。

**HP MPI**曾经是另一个非常好的*通用*集群 MPI 实现，目前可从 Platfrom 获得。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T21:41:39.027

CFL 代码不能很好地扩展。

我不能直接与 MVAPICH2 交谈，但我建议使用集群本地的任何 MPI。因此，如果您使用的是 Cray 机器，您将使用 Cray 的 MPI。它像魔术一样工作。使用供应商推荐的 mpi 会有很大的不同。

直接回答您的问题，如果您的消息大小在短范围内，MVAPICH2 有一个胜过 OpenMPI 的最佳位置。我认为您的 CFL 代码可能在此范围内。在大型集群上，我发现 MVAPICH2 在超过 2k PE 上运行时出现延迟值问题——但人们不会在 2k PE 上运行 CFL。

最终，有足够的动机来检验这一理论。你在运行 OpenFOAM 的哪个代码，Fluent？

# maven - 覆盖父 pom 中定义的库版本

> ID：13074231
> 
> 赞同：24
> 
> 时间：2012-10-25T17:43:59.800
> 
> 标签：maven, pom.xml

我在父 pom 中为库 A 定义了 4.3 版本，但在子 pom 指定的项目模块中，需要 A 的 2.5 版本。我面临的问题是两个版本都被保留，因此我遇到了冲突。

请告知如何解决该问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T23:19:18.003

[http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

> 依赖中介——这决定了当遇到工件的多个版本时将使用哪个版本的依赖。目前，Maven 2.0 仅支持使用“最近定义”，这意味着它将使用依赖树中与您的项目最接近的依赖版本。您始终可以通过在项目的 POM 中明确声明来保证版本。请注意，如果两个依赖版本在依赖树中的深度相同，则在 Maven 2.0.8 之前没有定义哪个会获胜，但从 Maven 2.0.9 开始，声明中的顺序很重要：第一个声明获胜。
> 
> *   “最近的定义”意味着使用的版本将是依赖关系树中最接近您的项目的版本，例如。如果 A、B 和 C 的依赖项定义为 A -> B -> C -> D 2.0 和 A -> E -> D 1.0，则构建 A 时将使用 D 1.0，因为从 A 到 D 的路径通过E 更短。您可以在 A 中显式添加对 D 2.0 的依赖项以强制使用 D 2.0

听起来 A 版本 2.5 被另一个依赖项传递包含。这使 4.3 和 2.5 版本的长度相同。

*   项目 -> 父级 -> A 4.3
*   项目 -> 依赖项 -> A 2.5

通过在您的项目中明确定义 A 2.5 的依赖关系，它将成为最接近的并覆盖任何其他版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T17:59:02.487

通常，建议在给定时间在您的类路径中只有一个版本的依赖项。这样做可以让您确切地知道在运行时将使用哪个版本的类。

为避免版本冲突，请尝试像这样指定您的依赖项：

```
<dependency>
    <groupId>commons-daemon</groupId>
    <artifactId>commons-daemon</artifactId>
    <version>1.0.1</version>
    <exclusions>
        <exclusion>
            <groupId>some_group</groupId>
            <artifactId>some_artifact</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

您需要在哪里指定与 2.5 版冲突的工件的`groupId`和`artifactId`。

# web-applications - ustream.tv等网站的服务器配置和后端技术

> ID：13074235
> 
> 赞同：1
> 
> 时间：2012-10-25T17:44:16.307
> 
> 标签：web-applications, video-streaming, centos, flash-media-server

我要建立一个像 ustream.tv 这样的网站。主要用例是*一个用户将创建一个直播频道，并且任何其他用户都可以查看该频道*。在做了一些谷歌搜索后，我发现这是使用闪存媒体服务器完成的。

我想如果我可以做一些负载测试，我可以找到我需要多少硬件资源。此外，压力测试会话将向我展示我的服务器的断点。但是试用版支持很少的并行 rtmp 连接。所以测试在这里不起作用。所以我一直在寻找运行的服务器的配置`ustream.tv`。所以我有这些问题

1.  直播网站使用什么类型的服务器？处理器，内存？
2.  为了平衡带宽，它使用多个 NIC 还是任何其他技术？
3.  我真的需要 Flash Media Server 吗？还是有其他选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:02:30.903

[您可以在此处](http://en.wikipedia.org/wiki/List_of_streaming_media_systems)找到商业和非商业媒体服务器列表

我正在使用一些媒体服务器，我建议您看一些开源解决方案，例如：

1.  [Red5](http://www.red5.org/) - 开源 Java 媒体服务器
2.  [IceCast](http://www.icecast.org/) - 开源解决方案
3.  [FFServer](http://ffmpeg.org/trac/ffmpeg/wiki/StreamingGuide) - Ffmpeg 包的一部分（也是开源解决方案）
4.  [Wowza](http://www.wowza.com/) - 非免费的 Java 媒体服务器
5.  CDN 解决方案 - CDN 公司（例如[level3](http://www.level3.com/)）处理连接到媒体服务器的所有内容，您只需要进行编码。价格是大约。每 Mb 0.03 欧元

除了媒体服务器，您还需要编码器来对媒体服务器进行编码和提供内容。他们之中有一些是：

1.  [Flash Media Live Encoder](http://www.adobe.com/products/flash-media-encoder.html) - 它是 Adob​​e 的免费解决方案
2.  [ffmpeg](http://www.ffmpeg.org) - 开源解决方案（当我尝试使用它进行编码以进行直播时，我遇到了很多问题）
3.  [Media excel](http://www.mediaexcel.com/) - 商业解决方案

**服务器**

我不能确切地告诉你应该使用什么服务器。

这取决于很多事情，例如：

```
1) Do you plan to serve live content
2) Do you plan to serve non-live content
3) Will you have multi bitrate support (users with higher bandwith will have better picture quality) 
```

根据我的个人经验，我可以看出[HP Proliant DL 380 G7](http://h10010.www1.hp.com/wwpc/uk/en/sm/WF06b/15351-15351-3328412-241475-241475-4091412-4286244.html?dnr=1)（英特尔® 至强® X5650，6 核，2.66 GHz，12MB L3，95W，8GB 内存）可以为 3000-4000 名用户提供服务，并支持多比特率。

**网络适​​配器**

同样，这取决于托管公司可以为您提供什么以及价格（专用链接、共享链接等）。这里出现的另一个问题是，一台机器中的多个适配器根据定义是单点故障:)

到目前为止，您可能已经知道，您将需要不止一台服务器来进行视频流传输。我的选择是（作为最便宜和最干净的解决方案）：

```
1) encoder - Flash Media Live Encoder
2) Media server - CDN solution ( they have more lots of Media server availabe ) 
```

希望这可以帮助！

# visual-studio-2010 - 使用 TortoiseSVN 在 CodePlex 中出现“无法连接到存储库”错误

> ID：13074239
> 
> 赞同：1
> 
> 时间：2012-10-25T17:44:22.780
> 
> 标签：visual-studio-2010, svn, open-source, tortoisesvn, codeplex

我刚刚在 codeplex 创建了一个项目并尝试提交源代码（这样我的项目就可以公开使用）。

TortoiseSVN 似乎不再适用于 CodePlex。Codeplex 不允许您在不先联系他们的情况下更改源上传选项。

当我尝试结帐时，get 中的错误是：

```
Unable to connect to a repository at URL 'http://onthefly.codeplex.com'
The OPTIONS request returned invalid XML in the response: XML parse error at
line 1: no element found (https://onthefly.svn.codeplex.com/svn) 
```

和

```
OPTIONS of 'http://onthefly.codeplex.com': could not connect to server 
```

我刚刚尝试了repo-browser，它仍然无法正常工作。

这是其中一个错误的屏幕截图：

![在此处输入图像描述](../Images/dc865c941ada08b6c58ceec4b82d97e1.png)

为什么会发生这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:10:21.797

您没有为 repo 使用正确的 URL。正确的网址是：

`https://<projectname>.svn.codeplex.com/svn`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-26T06:52:04.197

我已经让它工作了。如果您遇到同样的问题，请按照[此](http://codeplex.codeplex.com/wikipage?title=Using%20TortoiseHG%20with%20CodePlex)页面上的说明进行操作。

# c - struct 中的灵活 mpz_t 数组

> ID：13074244
> 
> 赞同：5
> 
> 时间：2012-10-25T17:44:52.123
> 
> 标签：c, struct, malloc, gmp, calloc

我有一个这样的结构：

```
typedef struct{
    size_t length; // length of the array
    size_t numbits; // number of bits allocated per val in vals
    mpz_t vals[]; // flexible array to hold some number of mpz_t array
} CoolArray; 
```

好的，这是一个普通的灵活数组，我应该可以使用 malloc 来设置它的大小：

```
void initArray(CoolArray* array, size_t length, size_t numbits){
    assert(length>=1); // don't make arrays with a length<=0

    // first I allocate memory for vals...
    array->vals = (mpz_t*) malloc(sizeof(CoolArray)+length*sizeof(mpz_t));

    // then I allocate memory for each val in vals
    mpz_array_init(array->vals, (size_t)length, numbits);

    return;
} 
```

但是当我尝试使用它时，我遇到了分段错误。我还收到有关不正确使用 mpz_array_init 的投诉。但我看过manula，看来我做对了。

我也尝试像这样使用我的结构：

```
typedef struct{
    size_t length; // length of the array
    size_t numbits; // number of bits allocated per val in vals
    mpz_t* vals; // pointer to start of array
} CoolArray; 
```

我也改变了我的`initArray`功能：

```
void initArray(CoolArray* array, size_t length, size_t numbits) {
    assert(length>=1); // don't make arrays with a length<=0

    // first I allocate memory for vals...
    array->vals = (mpz_t*) calloc(length, sizeof(mpz_t));

    // then I allocate memory for each val in vals
    mpz_array_init(array->vals, (size_t)length, numbits);

    return;
} 
```

这个没有段错误，但我在编译时收到有关错误使用的投诉`mpz_array_init`，并且我的输出中也出现了一堆`malloc`错误，以及我想查看的输出。谁能告诉我我的代码在哪里不正确？为什么第一个版本会出现段错误？我按照人们似乎推荐的方式做了。为什么编译器会抱怨 `mpz_array_init`使用不正确？

这是我在输出中遇到的那种错误：

```
gmpascal(80964) malloc: *** error for object 0x100801088: Non-aligned
pointer being freed *** set a breakpoint in malloc_error_break to debug 
```

**PS** `gmpascal`是我的可执行文件的名称，它计算帕斯卡三角形的第 n 行。

**我在带有这些标志`gcc-4.2`的**Powermac上编译的****PPS ：****

 **```
-arch ppc64 -o gmpascal gmpascal.c -lgmp -Wall 
```

我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:18:01.203

请记住，我不编写 gmp，但结构中的尾部动态缓冲区通常是这样实现的（适应我认为你想要使用它的方式）：

```
typedef struct
{
  size_t length;  //length of the array
  size_t numbits; //number of bits allocated per val in vals
  mpz_t vals[1];  //flexible array to hold some number of mpz_t array
} CoolArray; 
```

知道值的数量和位深度的分配策略将是：

```
CoolArray* allocArray(size_t length, size_t numbits)
{
   CoolArray *p = malloc(sizeof(*p) + sizeof(mpz_t)*length);
   p->length = length;
   p->numbits = numbits;
   mpz_array_init(p->vals, length, numbits);
   return p;
} 
```

释放它（只是 free() 的一个包装器，但你可能需要做一些我不熟悉的 gmp-cleanup）：

```
void freeArray(CoolArray **pp)
{
    if (*pp)
    {
        free(*pp);
        *pp = NULL;
    }
} 
```

使用它：

```
CoolArray *pca = allocArray(length, numbits); 
```

完成后释放它：

```
freeArray(&pca); 
```

这些只是想法，但也许你可以从中得到一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:21:15.333

如果您使用的是灵活的数组成员，则需要一次性分配结构：

```
CoolArray *array = malloc(sizeof(CoolArray) + length * sizeof(mpz_t));
mpz_array_init(array->vals, length, numbits); 
```**

# apache-camel - Camel - 连接到 ftps 并在本地文件系统上下载文件

> ID：13074245
> 
> 赞同：0
> 
> 时间：2012-10-25T17:44:55.370
> 
> 标签：apache-camel, fuseesb

我必须构建一个简单的路由，将文件从 ftps 服务器下载到我的文件系统中，所以我正在执行以下操作：

```
from("ftps://esbftp@test.net/test?delay=30000&password=******&fileName=testFile.txt")
.to("file:/mydir/testtest") 
```

在日志中我没有看到任何错误，并且路由似乎已正确初始化（并且我确定文件在那里:)）：

```
18:58:13,947 | INFO  | xtenderThread-24 | OsgiSpringCamelContext           | ?                                   ? | 89 - org.apache.camel.camel-core - 2.8.0.fuse-06-11 | Route: FTPTestRoute
 started and consuming from: Endpoint[ftps://esbftp@test.net/test?delay=30000&password=******] 
```

这是我在 filezilla 上连接到 ftps 服务器的设置，它正在工作

![在此处输入图像描述](../Images/09739157d9b6e11d053d521f75a1e5e5.png)

如果我尝试连接到普通的 ftp 服务器，那么该路由将完美运行。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:25:54.940

最后我错过了 2 个参数

```
&passiveMode=true&binary=true 
```

这些参数是在 filezilla 上自动设置的，而在骆驼中我不得不强制它们

# mysql - 开始在 Magento db 上优化表，但站点已关闭。我可以杀死它吗？如何杀死它？

> ID：13074247
> 
> 赞同：1
> 
> 时间：2012-10-25T17:45:03.513
> 
> 标签：mysql, database, magento

我所有的网站都运行得非常慢，因为我试图优化 phpmyadmin 中的 Magento DB 以使网站加速。他们太慢了，他们还不如倒下。我想让疼痛停止。我可以终止优化吗？我该怎么做？还是等它完成更好。

作为记录，我有一个数据库的备份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:41:03.130

通常您可以`KILL`执行您不想完成的任何操作，但请注意，撤消操作的时间实际上可能比简单完成所需的时间要长。

除非您正在运行大规模安装，否则听起来您的数据库需要更好地调整。MySQL 带有一个`my.cnf`糟糕的默认配置，几乎没有任何内存分配给它，并且运行缓慢。

其次，您可能会运行很多很慢的查询，因为它们缺少索引。您要优化此表中有多少数据？`SHOW TABLE STATUS`会给你一个想法。

# javascript - Javascript - 根据设备更改按钮图像

> ID：13074250
> 
> 赞同：3
> 
> 时间：2012-10-25T17:45:13.950
> 
> 标签：javascript, android, jquery, ios, button

我正在尝试根据用户浏览到页面的设备来显示正确的按钮和链接。如果 android 显示 android 应用商店按钮，如果 ios 显示苹果商店按钮。

即使我将函数默认设置为将其从 android 切换到 apple 按钮，我似乎也无法让它交换。

这是代码：

```
<html>
<head>
    <script type="text/javascript">

        var uagent = navigator.userAgent.toLowerCase();
        var apple = "/images/ios.jpg";
        var android = "/images/android.jpg"

        function DetectDevice() {
            var but = document.getElementById("AppButton");
            if(useragent.search("iphone") || useragent.search("ipod") || useragent.search("ipad")) {
                toswap.src = apple;
                alert("apple");
            } else if(useragent.search("android")) {
                toswap.src = android;
                alert("android");
            }
            but.src = apple;
        }
        DetectDevice();
    </script>

    <title>Device Detection</title>
</head>

<div id="butttons">
    <img src="images/android.jpg" name = "AppButton" id="AppButton"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:56:17.940

`useragent`也没有定义。您可能打算使用`uagent`您定义的，或者您可能打算重命名您的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:50:29.203

**两个问题：**

首先，您的函数需要在按钮加载*后运行，因为*

```
document.getElementById("AppButton"); 
```

目前没有返回任何内容。

其次，您可能应该更改`toswap.src`to的 2 个实例`but.src`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:52:27.117

我不知道 var toswap 指的是哪里。尝试这个：

```
 var uagent = navigator.userAgent.toLowerCase();
        var apple = "/images/ios.jpg";
        var android = "/images/android.jpg"

        function DetectDevice() {
            var but = document.getElementById("AppButton");
            if(useragent.search("iphone") || useragent.search("ipod") || useragent.search("ipad")) {
                but.src = apple;
                alert("apple");
            } else if(useragent.search("android")) {
                but.src = android;
                alert("android");
            } else{
                but.src = apple; // this is default
            }
        }

    </script>

<div id="butttons">
    <img src="images/android.jpg" onload="DetectDevice();" name = "AppButton" id="AppButton"/>
</div> 
```

# php - PHP PDO 如何创建参数化的 UPDATE 函数

> ID：13074251
> 
> 赞同：0
> 
> 时间：2012-10-25T17:45:15.137
> 
> 标签：php, pdo

我有一个参数化的 INSERT 函数，想对 UPDATE 做同样的事情，但不能完全正确地实现。

我的插入功能：

```
 $bind = ':'.implode(',:', array_keys($data));
    $sql  = 'INSERT INTO ' . $table . '(' . implode(',', array_keys($data)) . ') ' . 'VALUES (' .$bind. ')';
    $stmt = $this->_db->prepare($sql);
    $stmt->execute(array_combine(explode(',',$bind), array_values($data))); 
```

在我的 UPDATE 函数中，我将传递 3 个参数，table_name、key_value_data_array[] 和 row_id。键/值数组的格式为 column_name => data

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:54:24.373

当我更新数据库中的某些内容时，我使用此代码，应该可以正常工作：

```
 $update_query = $database_connection->prepare("UPDATE table SET column = :value");
 $update_query->execute(array(':value'   => $some_value)); 
```

# mustache - 小胡子渲染列表（如果不为空）

> ID：13074252
> 
> 赞同：13
> 
> 时间：2012-10-25T17:45:21.903
> 
> 标签：mustache

只有当列表对象不为空时，我才想使用 Mustache 来呈现 HTML 无序列表。所以我想：

```
<ul>
    <li>item 1</li>
    <li>item 2</li>
</ul> 
```

如果列表有元素，如果列表为空则*没有*元素（甚至没有 ul 标签）

我怎样才能做到这一点？

编辑：我的数据结构是：

```
{ "list": ["first item", "second item"] } 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-10-17T12:50:37.470

如果您不想或无法重新格式化您的数据，您也可以`items.length`在渲染`<ul>`标签之前进行检查。有些人对此不以为然，但这绝对是迈克答案的替代方案。

```
{{#items.length}}
    <ul>
        {{items}}
            <li>{{property}}</li>
        {{/items}}
    </ul>
{{/items.length}} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-06T19:06:52.653

您需要将数据结构重新格式化为：

```
{
    "list": {
        "items": ["first item", "second item"]
    }
} 
```

你的 Mustache 模板现在是这个

```
{{#list}}
    <ul>
        {{#items}}
            <li>{{.}}</li>
        {{/items}}
    </ul>
{{/list}} 
```

我制作了一个视频来解释 Mustache 是如何工作的，以及如何使用 PHP 和 JavaScript 来实现它。你可以在这里找到它：http: [//mikemclin.net/mustache-templates-for-php-and-javascript/](http://mikemclin.net/mustache-templates-for-php-and-javascript/)

# mysql - 通过查询该属性来更新为 NULL 的属性值

> ID：13074254
> 
> 赞同：2
> 
> 时间：2012-10-25T17:45:31.330
> 
> 标签：mysql, database

我将一个项目插入到一个没有属性的具有三行 ( `id`, `text`, `data`)的表中。`text`

```
id text date 
4  NULL 2010-11-11 
```

我想通过在同一条目中插入文本来修改该行。我试过这个：

```
UPDATE x SET text = "This is funny" WHERE text = NULL; 
```

我也试过：

```
UPDATE x SET text = "This is funny" WHERE text = "NULL"; 
```

还：

```
UPDATE x SET text = "This is funny" WHERE text LIKE "NULL"; 
```

并且：

```
UPDATE x SET text = "This is funny" WHERE text LIKE "%NULL%"; 
```

他们似乎都没有成功。我知道我可以使用 id 或日期作为条件来完成同样的事情，但我真的想以这种方式尝试（使用`text`作为条件）。我可以`NULL`通过查询该属性来更新行的属性值吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:47:11.790

利用：

```
UPDATE x SET text = 'This is funny' WHERE text IS NULL 
```

有关 IS NULL 及其对应部分 IS NOT NULL 的更多信息，例如可以从[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#operator_is-null)中找到。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T17:51:21.577

利用：

```
UPDATE x SET text = "This is funny" WHERE text IS NULL 
```

并确保 mysql 列“text”设置为 varchar 256 或 mediumtext

# javascript - 提交前检查表单 - JavaScript

> ID：13074258
> 
> 赞同：0
> 
> 时间：2012-10-25T17:45:44.980
> 
> 标签：javascript, html

我有以下表格：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>Choose</title>
  <script type="javascript/text">

    function ischecked(){
        var check = document.getElementsByTagName( 'input' );
        for( var i = 0; i < check.length; i++ ){
        if( check[ i ].type == 'radio' && check[ i ].checked ){
            return true;
          }
        }
        return false;
    }

  </script>
</head>

<body>
  <form method="post" enctype="application/x-www-form-urlencoded" onsubmit="ischecked();">
    <h1>Choose</h1>

    <p><input type="radio" name="choose" value="psychology"><font size="5" color="#0033CC">Instant Psychology</font><br>
    <br>
    <input type="radio" name="choose" value="geography"><font size="5" color="#CC0000">Instant Geography</font><br>
    <br>
    <input type="radio" name="choose" value="gastronomy"><font size="5" color="#660033">Instant Gastronomy</font><br>
    <br>
    <input type="submit" name="Submit" value="Go"></p>
  </form>

</body><link rel="stylesheet" type="text/css" href="data:text/css,"></html> 
```

我想确保在提交表单之前已经检查了其中一个单选按钮。但是，它不起作用，并且无论如何都提交了表单。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:46:36.697

您需要`return`从内联事件处理程序中获取函数的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:51:30.690

您必须直接在属性值中检查验证函数中返回的值。也就是说，在您的 HTML 表单声明中

```
<form method="post" enctype="application/x-www-form-urlencoded" onsubmit="ischecked();"> 
```

你应该写：

```
onsubmit="return ischecked();" 
```

代替：

```
onsubmit="ischecked();" 
```

# knockout.js - 将内部 div 绑定到具有相同属性的不同 knockoutJS 视图模型

> ID：13074261
> 
> 赞同：1
> 
> 时间：2012-10-25T17:46:16.347
> 
> 标签：knockout.js

我有一个外部 div 绑定到具有 ProcessClick 函数的视图模型，而运行时的内部 div 绑定到不同的视图模型，但具有相同的单击函数名称。由于某种原因，只有外部模型的函数也会在内部 VM 的函数之前被调用。

标记：

```
<div id="max-outer">
   <span data-bind="click: BindInner">Bind Inner</span>
    <br/>
    <br/>
   <span data-bind="click: ProcessClick">Outer</span>
   <div id="max-inner">
      <span data-bind="click: ProcessClick">Inner</span>
       <br/>
   </div>
</div> 
```

JS：

```
function InnderModel() {
    self = this;

    self.ProcessClick = function () 
        {
            alert("Inner clicked");
        };
}

function OuterModel() {
    self = this;

    self.ProcessClick = function (){
            alert("Outer clicked");
        };

    self.BindInner = function () {
        ko.cleanNode(document.getElementById("max-inner"));
        ko.applyBindings(new InnderModel(), document.getElementById("max-inner"));
    };
}

ko.applyBindings(new OuterModel(), document.getElementById("max-outer")); 
```

这是一个小提琴：http: [//jsfiddle.net/mpavlov/H2ZnV/8/](http://jsfiddle.net/mpavlov/H2ZnV/8/)

一个想法是单击 Bind inner 和单击 Inner span 只会显示“Inner Clicked”警报，而不是两者。这可以以某种方式实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T18:07:26.990

内部跨度将在第一次`applyBindings`被调用时被绑定。

调用`ko.cleanNode`实际上并没有删除任何事件处理程序，因此它仍然具有原始处理程序。

[在knockmeout.net](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)上的此技巧中描述了您可以使用的一种技术。

这允许您识别您希望 Knockout 跳过绑定的区域。

您将在您最初不想绑定的部分上添加一个简单的自定义绑定：

```
ko.bindingHandlers.stopBinding = {
    init: function() {
        return { controlsDescendantBindings: true };
    }
}; 
```

将如[this fiddle](http://jsfiddle.net/rniemeyer/Tmz8m/)所示。

# activemq - 使用 activemq 的 BrokerViewMBean 时出现异常

> ID：13074262
> 
> 赞同：1
> 
> 时间：2012-10-25T17:46:17.080
> 
> 标签：activemq, jmx

我正在尝试从运行 activemq 代理的同一进程访问 jmx 功能，并通过 Web 服务公开一些属性。代码如下所示：

```
 MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
    try {
        ObjectName name = new ObjectName("org.apache.activemq:BrokerName=locahost,Type=Broker");
        BrokerViewMBean brokerViewMBean = JMX.newMBeanProxy(mbs, name, BrokerViewMBean.class);
        ObjectName[] queues = brokerViewMBean.getQueues();
        .
        .
        .
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

当我运行此代码时，出现以下异常：

> java.lang.reflect.UndeclaredThrowableException 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl 在 com.myinc.MyObject.getAllQueues(MyObject.java:37) 的 $Proxy51.getQueues(UndeclaredThrowableException)。在 org.apache.cxf.service.invoker 的 java.lang.reflect.Method.invoke(Method.java:597) 的 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 的调用(NativeMethodAccessorImpl.java:39) .AbstractInvoker.performInvocation(AbstractInvoker.java:180) 在 org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96) 在 org.apache.cxf.jaxws.AbstractJAXWSMethodInvoker.invoke(AbstractJAXWSMethodInvoker.java:178) ) 在 org.apache.cxf.service 的 org.apache.cxf.jaxws.JAXWSMethodInvoker.invoke(JAXWSMethodInvoker.java:64)。invoker.AbstractInvoker.invoke(AbstractInvoker.java:75) at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441 ) 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 在 org.apache.cxf.workqueue.SynchronousExecutor.execute( SynchronousExecutor.java:37) at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:107) at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262) at org.apache.cxf .transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121) 在 org.apache.cxf.transport.http.AbstractHTTPDestination。在 org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:193) 处调用(AbstractHTTPDestination.java:211)在 org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:130) 在 org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:221) 在 org.apache.cxf.transport .servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:141) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:637) 在 org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:197) ) 在 org.apache.catalina.core 的 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)。ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) at org .apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve .java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859) 在 org.apache.coyote。 http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker。在 java.lang.Thread.run(Thread.java:662) 处运行 (JIoEndpoint.java:489) 原因：javax.management.InstanceNotFoundException: org.apache.activemq:BrokerName=locahost,Type=com.sun 处的代理。 jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1094) 在 com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:662) 在 com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java: 638) 在 javax.management.MBeanServerInvocationHandler.invoke(MBeanServerInvocationHandler.java:263) ... 39 更多getMBean(DefaultMBeanServerInterceptor.java:1094) at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:662) at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:638) at javax.management .MBeanServerInvocationHandler.invoke(MBeanServerInvocationHandler.java:263) ... 还有 39 个getMBean(DefaultMBeanServerInterceptor.java:1094) at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:662) at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:638) at javax.management .MBeanServerInvocationHandler.invoke(MBeanServerInvocationHandler.java:263) ... 还有 39 个

谁能让我知道我做错了什么以及这个异常想说什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T03:11:19.333

线索是由部分异常引起的：

```
Caused by: javax.management.InstanceNotFoundException: org.apache.activemq:BrokerName=locahost,Type=Broker at 
```

您使用的对象名称必须不正确或代理尚未运行。您可以使用 jconsole 附加到进程并查看有效的 ObjectName 是什么。

# objective-c - 表视图顶部的视图消失

> ID：13074263
> 
> 赞同：0
> 
> 时间：2012-10-25T17:46:27.020
> 
> 标签：objective-c, ios, uitableview, uiview, tableview

我的表格视图有问题。我的第一个问题是我有一个顶部有视图的表格视图。在此视图中有 3 个按钮。我正在使用故事板构建它。

![在此处输入图像描述](../Images/16c514aaef22886168616f397a309a12.png)

我的问题是我向下滚动时，我的视图消失了。如何设置此视图始终保持在顶部？目前，您可以将此视图视为“第一个单元格”。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:51:24.390

如果您查看左侧的视图层次结构，您会看到您的标题视图是表格的子视图，因此它会随之滚动。

从该层次结构视图中将其拖出表格视图，使其处于同一级别。

此外，调整表格的大小，使其从带有标题栏的视图下方开始。

蒂姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:58:32.897

如果您在 Interface Builder 中选择您的视图，然后转到`Editor->Arrange->Send to front`？

# primefaces - 如何在 ap:calender 中显示日期和时间值

> ID：13074269
> 
> 赞同：0
> 
> 时间：2012-10-25T17:46:30.013
> 
> 标签：primefaces

我有一个 xhtml 页面

```
<p:outputPanel>
    <p:outputLabel id="temp1"
    for="temp11" value="Start Date:" />
    <p:calendar id="startDateId"
    widgetVar="startDateFromVar" title="#"
    showOn="button" disabled="true"/>
</p:outputPanel> 
```

**豆**

```
private String date;

/**
     * @return the Date
     */
    public String getDate() {
        date = "11/10/2012 19:15";
        return date;
    }

    /**
     * @param Date the Date to set
     */
    public void setDate(String ate) {
        this.date = date;
    } 
```

如何在 xhtml 中显示日期？我一直在 `p:calendar` value=#{bean.date}中添加这一行

但它没有显示日期和日历图标。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:45:00.763

您显示的值`<p:calendar/>`应该是类型`java.util.Date`（正如 kolossus 已经指出的那样）。如果您已经有日期的已知字符串表示形式，则需要解析该字符串`java.text.SimpleDateFormat`以获取`java.util.Date`对象：

```
private void parserDate() {
    String dateStr = "11/10/2012 19:15";
    SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy HH:mm");
    try {
        date = formatter.parse(dateStr);
    } catch (ParseException ex) {
        // handle
    }
}

public Date getDate() {
    if (date == null)
        parserDate();
    return date;
}

public void setDate(Date date) {
    this.date = date;
} 
```

日历元素的显示模式也可以被格式化。`dateStr`要使用与使用`pattern`属性相同的格式显示日期：

```
<p:calendar id="startDateId" value="#{bean.date}" disabled="true"
                    widgetVar="startDateFromVar" pattern="dd/MM/yyyy HH:mm"/> 
```

* * *

*   如果您使用`disabled="true"`日历上的选项，请`p:inputText`改用显示您的`private String date`. 然后您可以消除额外的解析和格式化：

    ```
    <p:inputText value="#{bean.date}" disabled="true"/> 
    ```

*   指向`<p:outputLabel for="..."/>`不存在的 ID 会导致`FacesException`. 也许你想要：

    ```
    <p:outputLabel id="temp1" for="startDateId" value="Start Date:" /> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-08T02:16:07.997

由于 StackOverflow 刚刚将这个问题以史诗般的方式重新出现在主页中，让我试着回答一下。

这里有很多问题。让我们从头开始：

1）您在 bean 中的日期不是真实日期。它是一个字符串！解决方案就这么简单：如果您想处理日期，请将您的 bean 更改为处理 java.util.Date 而不是 java.lang.String。

```
import java.util.Date;

public class MyDateBean {

    private Date date;

    public Date getDate() {
        return this.date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

} 
```

2) 如果您只想显示日期，请使用默认的 outputtext JSF 组件来执行此操作。请记住添加所需格式的转换器：

```
<h:outputText value="#{myDateBean.date}" >
    <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
</h:outputText> 
```

顺便说一下，您使用的组件：

```
<p:calendar id="startDateId"
    widgetVar="startDateFromVar" title="#"
    showOn="button" disabled="true"/> 
```

是一个 primefaces 日历组件，允许用户从日历面板中选择日期。如果您需要它，请执行以下操作：

```
<p:calendar id="startDateId" value="#{myDateBean.date}" pattern="MM/dd/yyyy HH:mm:ss"/> 
```

获得：

[![在此处输入图像描述](../Images/9044ea77b3f433b3dd370698c7029ea6.png)](https://i.stack.imgur.com/wI5Qd.png)

您可以应用一些自定义设置。请参阅 Primefaces 演示页面以了解有关日历 Primefaces 组件的更多信息：[https ://www.primefaces.org/showcase/ui/input/calendar.xhtml](https://www.primefaces.org/showcase/ui/input/calendar.xhtml)

# asp.net - 无法自动创建 ASPNETDB.MDF - Visual Web Developer Express 2008 / SQL Express 2008

> ID：13074273
> 
> 赞同：1
> 
> 时间：2012-10-25T17:46:44.543
> 
> 标签：asp.net, sql-server

我最近开始学习ASP.net/SQL。我安装了Sql Server 2008R2 Express Edition；和 Visual Web Designer 2008 速成版。我最近尝试创建一个登录页面，但没有成功；任何帮助，将不胜感激。我尝试采取以下步骤： -
创建新网站
- 转到设计视图
- 将“登录状态”拖到设计视图中；将“登录”控件也拖到设计视图上；
-在 Web.config 中，我将身份验证更改为“表单”（没有添加任何其他内容） -
在没有调试的情况下运行页面/在登录名中输入任何信息，以在我的“app_data”文件夹中自动创建一个“ASPNETDB.MDF”文件; 我收到以下错误。

注意：Sql Server 启用了“允许远程连接”，在配置管理器中我启用了 tcp/ip 和“管道”（这些是我在无法自动创建数据库之后采取的措施。）我尝试过“连接数据库”到我的视觉网页设计师程序。还值得注意的是，当连接数据库时，我使用 .\ 或 localhost\ 没有任何名称，因为这是 VWDesigner 检测我的数据库的唯一方法。

![我得到的错误](../Images/0897cbc2a0fd8b7d8473ae70f83a310b.png)

您在图片中看不到的堆栈跟踪如下：

> [SqlException (0x80131904)：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定实例）] System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection）+4849015 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning（TdsParserStateObject stateObj） +194 System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean IntegratedSecurity, SqlConnection owningObject) +4862333 系统。
> 
> [HttpException (0x80004005): 无法连接到 SQL Server 数据库。] System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) +137 System.Web.Management.SqlServices。 SetupApplicationServices（字符串服务器，字符串用户，字符串密码，布尔信任，字符串连接字符串，字符串数据库，字符串 dbFileName，SqlFeatures 功能，布尔安装）+94 System.Web.Management.SqlServices.Install（字符串数据库，字符串 dbFileName，字符串连接字符串） +25 System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile（字符串 fullFileName，字符串 dataDir，字符串 connectionString）+395

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:23:21.947

我能够让它工作！如果您调试相同的问题，则值得一提/考虑的事情。

连接到数据库时，我将不得不使用 Localhost\ 而不是实例。如果你也这样做并且无法正确连接并且出现上面列出的错误，那么安装一个命名实例（安装 sql server，当你进入实例菜单时，不要使用“默认”使用命名实例 - 我使用 SQLExpress）我也改变了事实上，在我只使用“Windows 身份验证”登录我的服务器之前，当我重新安装时，我允许“混合”。

这些是我所做的唯一更改，实际上允许我的数据库按照我需要的方式自动创建。

同样在 web.config 中将身份验证部分更改为“表单”而不是“窗口”。

还要确保您的可视化 Web 开发人员在可视化 Web 开发人员（我使用 2008 年）中具有正确的 SQL 实例 转到 - 工具 -> 选项 -> 单击左下角的显示所有设置框 -> 数据库工具 -> 数据连接 - > SQL Server 实例应与您之前安装的实例同名。

这些应该可以处理您第一次尝试使用登录页面时遇到的错误 26。此页面中发布了其他有用的链接：[使用 SQL 2008 EXPRESS/Visual Web Developer 2008 创建 .MDF](https://stackoverflow.com/questions/13050262/creating-mdf-with-sql-2008-express-visual-web-developer-2008)

# java - 在 Java 中处理 alpha 混合

> ID：13074275
> 
> 赞同：1
> 
> 时间：2012-10-25T17:47:04.170
> 
> 标签：java, algorithm, processing, argb

我正在处理，我想在低级代码上重新创建函数混合最轻。

我在文档中看到`C = max(A * factor, B)`

*   `C`是返回的颜色
*   `A`是源
*   `B`是要混合的图像

我在网上看到，指定的因子基于源像素的 alpha 分量，它由表示像素颜色的 32 位整数的前 8 位（从左起）表示。这些最左边的位也称为最高位。

资料来源：[本书](http://books.google.fr/books?id=TKgfVpWPb0sC&pg=PA463&lpg=PA463&dq=C%20=%20max%28A%2afactor,%20B%29%20processing&source=bl&ots=pNHzVwA2kI&sig=gtyovWBGUXFRAmaqRPQ5VfeYHr8&hl=fr&sa=X&ei=sDqJUIKUHeOq0QWy9YHYBA&ved=0CCsQ6AEwAQ#v=onepage&q=C%20=%20max%28A%2afactor,%20B%29%20processing&f=false)，第 464 页

我应该怎么想？

这是我那部分的代码：

```
for (int y = 0; y < capWidth * capHeight; y++) {
    int factor = (pixels[y] >> 24) & 0xFF;
    pixels[y] = max(pixels[y] * factor, previousFrame.pixels[y]);      
} 
```

没用，有救吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:52:36.727

1.  这不起作用，因为`factor`原始公式中的 是 0 到 1 之间的浮点数，而`factor`代码中的 是 0 到 255 之间的整数。
2.  这不是混合公式，不是真的。对于混合，您必须*添加*颜色，而不是取最大值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:30:17.293

对于每种颜色：C = A(a/255) + B(1-(a/255))，其中：

A是前景值，

B是背景值，

C 是结果值，并且

a 是 alpha 分量。

这是每个 alpha 混合 wiki 页面：[http ://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending](http://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:05:36.463

[http://processing.googlecode.com/svn/trunk/processing/build/javadoc/core/index.html](http://processing.googlecode.com/svn/trunk/processing/build/javadoc/core/index.html)

我在这里得到了它，用于混合 Lighten 的 SVG 处理 javadoc！好 ！

# php - 我正在尝试将我的日期和评论计数包含在循环中

> ID：13074276
> 
> 赞同：1
> 
> 时间：2012-10-25T15:46:40.373
> 
> 标签：php, loops

我正在创建我的第一个 wordpress 主题（也是第一次真正使用 wordpress）。

我试图让我的日期和评论计数包含在循环中，即使我将它放在侧边栏中的左侧并且我不知道如何包含它。

**这是我的帖子代码（它包括日期、评论计数和按此顺序发布的帖子，帖子目前仅是循环的一部分）：**

（我使用的是 960 网格，因此您可能会在下面看到网格类）

```
<div class="date_banner">
        <div class="d"><!-- sidebar 1 --><?php the_time('d'); ?></div>
        <div class="m"><!-- sidebar 1 --><?php the_time('M'); ?></div>
        <div class="y"><!-- sidebar 1 --><?php the_time('Y'); ?></div>
    </div>
    <div class="commentsnumber">
    <?php comments_number('No comment', '1 comment', '% comments'); ?>
    </div>
    </div>
    <div class="grid_10">

    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
        <!-- post -->
        <div class="post">
            <div class="titlepostauthorimage">
            <div class="post-title">
                <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
            </div>
            <div class="post-author-image">

            </div>
            <div class="post-author">
                 <?php the_author_posts_link(); ?>
            </div>
            <div class="post-image">
                <?php the_post_thumbnail( $size, $attr ); ?> 
            </div>
            </div>
            <div class="post-bodyborder">
            <div class="post-body">
                <?php the_content(); ?>
            </div>
            </div>
            <div class="post-metaborder">
            <div class="post-meta">
                <?php the_category(', '); ?>
                <!-- post tags -->
            </div>
            </div>
            <div class="post-comments">
            <?php wp_list_comments( $args ); ?> 
            </div>
        </div>
        <!-- post -->
    <?php endwhile; else: ?>
        <!-- In case no posts were found -->
        <h1>Hmmm? Cam't. Find. Post.</h1>
    <?php endif; ?> 
```

* * *

当我将循环移动到测试代码中的日期上方时，会发生以下情况：![测试](../Images/5825df70a26df56d015c6277f81b5b5b.png)

检查员说，在第一个 grid_10 类中，日期和评论计数低于帖子： ![检查员](../Images/1d6c5c7e90df43445573852b03d15e02.png)

* * *

这是我完成的主题应该是什么样子，您可以在[http://benlevywebdesign.com/wordpress/](http://benlevywebdesign.com/wordpress/)上查看我正在进行的工作（只有帖子在循环中，上面的屏幕截图是一个测试/示例当我只是移动循环代码时会发生什么）

![主题设计](../Images/fc4a9e6a07b26cfe5ea7d2ebb072f479.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T03:38:23.100

它可能是这样的（它只是伪代码）

```
<div class="container_16" >
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

        <div class="grid_12" >
           <div class="grid_2"> date banner html goes in here </div>
           <div class="grid_10"> post html goes in here</div>          
        </div>

    <?php endwhile; else: ?>
    <!-- In case no posts were found -->
    <h1>Hmmm? Cam't. Find. Post.</h1>
    <?php endif; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:33:42.263

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <div class="grid_2">
    <div class="date_banner">
            <div class="d"><!-- sidebar 1 --><?php the_time('d'); ?></div>
            <div class="m"><!-- sidebar 1 --><?php the_time('M'); ?></div>
            <div class="y"><!-- sidebar 1 --><?php the_time('Y'); ?></div>
        </div>
        <div class="commentsnumber">
        <?php comments_number('No comment', '1 comment', '% comments'); ?>
        </div>
    </div>
    <!-- post -->
    <div class="grid_10 post">
        <div class="titlepostauthorimage">
            <div class="post-title">
                <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
            </div>
            <div class="post-author-image">

            </div>
            <div class="post-author">
                 <?php the_author_posts_link(); ?>
            </div>
            <div class="post-image">
                <?php the_post_thumbnail( $size, $attr ); ?> 
            </div>
        </div>
        <div class="post-bodyborder">
            <div class="post-body">
                <?php the_content(); ?>
            </div>
        </div>
        <div class="post-metaborder">
            <div class="post-meta">
                <?php the_category(', '); ?>
                <!-- post tags -->
            </div>
        </div>
        <div class="post-comments">
        <?php wp_list_comments( $args ); ?> 
        </div>
    </div>
    <!-- post -->
<?php endwhile; else: ?>
    <!-- In case no posts were found -->
    <h1>Hmmm? Cam't. Find. Post.</h1>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:15:14.470

要获取发布日期和时间，请使用此

```
<?php the_time('F j, Y'); ?> at <?php the_time('g:i a'); ?> 
```

要获得评论计数，请使用此

```
 <?php comments_number('No reply', '1 reply', '% replies'); ?> 
```

放置在循环中的任何位置

参考：http://codex.wordpress.org/Function_Reference/comments_number

# php - Magento 管理产品不会保存

> ID：13074278
> 
> 赞同：0
> 
> 时间：2012-10-25T17:47:07.493
> 
> 标签：php, magento

您好，感谢您阅读本文。

我正在尝试发布一个新的 magento 系统，现在产品不会保存在管理面板内。这很令人沮丧。我点击简单产品，填写价格说明和其他详细信息，然后尝试保存，它说请稍候，永远不会完成。

我在 php 中允许 256 兆内存，最大执行时间为 120 秒。不知道从哪里开始，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:53:24.487

您需要知道它是永无止境的请求还是直接 KO ..

也许这是一个javascript问题？

*   检查 JS 控制台（或在 firefox 上安装 firefub）来检查这个
*   您是否在 BO 上启用了翻译（标准 en_US 除外）？一些 traductions 可能是 buffy 并破坏了一些 JS 动作

也许是服务器问题？

*   使用 Firebug，打开“网络”选项卡并检查保存请求的结果（404？503？）
*   激活 Mangeto 日志（后台：系统/配置/开发人员/日志设置）并检查 var/log/ 中是否有异常
*   如果您有权访问您的服务器，请检查处理器是否 100% 被大型查询占用。

毕竟，您必须了解问题的根源。祝你好运

# javascript - mouseout 图像隐藏包含文本的 div

> ID：13074281
> 
> 赞同：1
> 
> 时间：2012-10-25T17:47:22.627
> 
> 标签：javascript, html, css

我有以下脚本在单击图像时显示/隐藏一些文本。然后，当单击另一个图像时，该文本将被替换，依此类推。目前总有一些文字可见。我希望此文本在图像的 mouseOut 上消失（或者可能显示并清空 div？）。这是我目前拥有的：

JS：

```
<script type="text/javascript" language="JavaScript">
<!--
function showonlyonev2(thechosenone) {
    var newboxes = document.getElementsByTagName("div");
      for(var x=0; x<newboxes.length; x++) {
          name = newboxes[x].getAttribute("name");
          if (name == 'textboxes') {
              if (newboxes[x].id == thechosenone) {
                  if (newboxes[x].style.display == 'block') {

                  } else {
                      newboxes[x].style.display = 'block';
                  }
              } else {
                  newboxes[x].style.display = 'none';
              }
          }
    }
}
</script> 
```

HTML：

```
<div id="text-container">
  <div id="text1" name="textboxes">
  <p>Some text here about person 1</p>
  <div id="text2" name="textboxes">
  <p>Some text here about person 2</p>
  <div id="text3" name="textboxes">
  <p>Some text here about person 3</p>
  <div id="text4" name="textboxes">
  <p>Some text here about person 4</p>
</div>

<div class="people-images">
  <a href="javascript:showonlyonev2('text1');" class="rollovers">
    <div id="person1-rollover"><img src="images/people/person1.jpg" alt="" /> </div>
  </a>
</div>
<div class="people-images">
  <a href="javascript:showonlyonev2('text2');" class="rollovers">
    <div id="person2-rollover"><img src="images/people/person2.jpg" alt="" /> </div>
  </a>
</div>
<div class="people-images">
  <a href="javascript:showonlyonev2('text3');" class="rollovers">
    <div id="person3-rollover"><img src="images/people/person3.jpg" alt="" /> </div>
  </a>
</div>
<div class="people-images">
  <a href="javascript:showonlyonev2('text4');" class="rollovers">
    <div id="person4-rollover"><img src="images/people/person4.jpg" alt="" /> </div>
  </a>
</div> 
```

CSS：

```
#text1 { 
width: 300px;
height: 300px;
background: #c2bfba;
}
#text2, #text3, #text4 { 
width: 300px;
height: 300px;
background: #c2bfba;
display:none; 
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:53:11.633

您可以在图像标签中使用它：

```
 <img src='...' onmouseover='javascript:showonlyonev2('text1')' onmouseout='javascript:showonlyonev2('blank')' /> 
```

这样，只要图像悬停，您的函数就会被调用。您可以创建一个名为“空白”的空 div，以便您的函数在鼠标移出时使用它，因此它显示为空白。

保持你的 Javascript 不变。

将您的 HTML 更改为：

```
<div id="text-container">
<!-- All of these DIV's should have closing tags -->
<div id="text1" name="textboxes"><p>Some text here about person 1</p></div>
<div id="text2" name="textboxes"><p>Some text here about person 2</p></div>
<div id="text3" name="textboxes"><p>Some text here about person 3</p></div>
<div id="text4" name="textboxes"><p>Some text here about person 4</p></div>
<div id="blank" name="textboxes"><p>&nbsp;</p></div>
</div>

<div class="people-images">
<a href="javascript:showonlyonev2('text1');" class="rollovers">
<div id="person1-rollover"><img src="images/people/person1.jpg" onmouseout="javascript:showonlyonev2('blank');" alt="" /> </div></a>
</div>
<div class="people-images">
<a href="javascript:showonlyonev2('text2');" class="rollovers">
<div id="person2-rollover"><img src="images/people/person2.jpg" onmouseout="javascript:showonlyonev2('blank');" alt="" /> </div></a>
</div>
<div class="people-images">
<a href="javascript:showonlyonev2('text3');" class="rollovers">
<div id="person3-rollover"><img src="images/people/person3.jpg" onmouseout="javascript:showonlyonev2('blank');" alt="" /> </div></a>
</div>
<div class="people-images">
<a href="javascript:showonlyonev2('text4');" class="rollovers">
<div id="person4-rollover"><img src="images/people/person4.jpg"  onmouseout="javascript:showonlyonev2('blank');" alt="" /> </div></a>
</div> 
```

将您的 CSS 更改为：

```
#blank { 
width: 300px;
height: 300px;
background: #c2bfba;
}
#text1, #text2, #text3, #text4 { 
width: 300px;
height: 300px;
background: #c2bfba;
display:none; 
} 
```

让我知道这是否适合你。

# java - 获取关键 SQLite Android

> ID：13074282
> 
> 赞同：1
> 
> 时间：2012-10-25T17:47:22.683
> 
> 标签：java, android, sqlite, foreign-keys, foreign-key-relationship

我有两个表，其中第二个表有一个外键，它被定义为表 1 的主键。在添加操作下，如何引用新添加的表 1 键作为表 2 的外键？

```
// Project Table columns names
private static final String KEY_ID = "id"; // Primary, integer
private static final String KEY_NAME = "name"; // Unique, text

// Images Table column names
private static final String KEY_IM_ID = "id"; // Primary, integer
private static final String IM_URI = "uri"; // text
private static final String PROJ_IMAGE_ID = "proImgId"; // foreign for Projects Table

public void addProject(Project project) {

    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values_PT = new ContentValues(); // PROJECTS TABLE
    ContentValues values_IT = new ContentValues(); // IMAGES TABLE

    values_PT.put(KEY_NAME, project.getName()); // project name
    // does the KEY ID get added on its own?

    values_IT.put(IM_URI, project.getURI()); // image uri
            values_IT.put(PROJ_IMAGE_ID, ????????); 
    } 
```

PROJ_IMAGE_ID 需要有 KEY_ID 的值，但是我不知道如何检索它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:54:17.057

如果您的 ID 列被声明为`INTEGER PRIMARY KEY`，那么它们是[自动递增](http://www.sqlite.org/autoinc.html)的，如果您在插入时没有设置它们，它们将自动获取它们的值。

要获取新记录的 ID，您必须先实际插入记录；新的 ID 是[`insert()`函数](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)的返回值。

# xcode - 递增动态原型使 XCode 4.5.1 崩溃

> ID：13074285
> 
> 赞同：3
> 
> 时间：2012-10-25T17:47:39.630
> 
> 标签：xcode, uitableview, storyboard

我正在 a 中创建一个具有`UIStoryboard`44点高的场景。我的计划是拥有 4 或 5 个动态原型单元，并在运行时加载适当的单元。本质上让自己拥有我的观点的动态部分。`UIViewController``UITableView`

我遇到的问题是，当我尝试将动态原型的数量增加到 1 以上时，XCode (4.5.1) 崩溃了。以前有没有人遇到过这种情况，你做了什么来解决它？

我的第一个想法是简单地`UITableView`将故事板放大，并在运行时调整它的大小，但这感觉不对。

我已经通过一个示例向 github 添加了一个简单的项目。在 XCode 4.5.1 中打开，在 storyboard 中找到 tableview 并增加动态原型。 [GitHub 项目：https://github.com/mkernahan/TableViewCrashesXCode](https://github.com/mkernahan/TableViewCrashesXCode)

请注意，我的构建目标设置为 5.0（尽管 6.0 并没有什么不同）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:55:24.580

如果您正在使用构建目标肯定会有所作为`Constrains`，您需要取消选中`Use Autolayout`并尝试

# linux - linux ptrace() 获取函数信息

> ID：13074288
> 
> 赞同：0
> 
> 时间：2012-10-25T17:47:51.397
> 
> 标签：linux, debugging, hook, ptrace, api-hook

我想使用 ptrace() 调用从用户定义的函数中捕获信息。

但函数地址不稳定（因为 ASLR）。

如何以编程方式获取其他程序的功能信息，例如 gdb？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/user.h>
#include <sys/wait.h>
#include <sys/ptrace.h>
#include <dlfcn.h>
#include <errno.h>

void error(char *msg)
{
    perror(msg);
    exit(-1);
}

int main(int argc, char **argv)
{
    long ret = 0;
    void *handle;
    pid_t pid = 0;
    struct user_regs_struct regs;
    int *hackme_addr = 0;

    pid = atoi(argv[1]);

    ret = ptrace(PTRACE_ATTACH, pid, NULL, NULL);
    if(ret<0)
    {
        error("ptrace() error");
    }

    ret = waitpid(pid, NULL, WUNTRACED);
    if(ret<0)
    {
        error("waitpid ()");
    }

    ret = ptrace(PTRACE_GETREGS, pid, NULL, &regs);
    if(ret<0)
    {
        error("GETREGS error");
    }

    printf("EIP : 0x%x\n", (int)regs.eip);

    ptrace(PTRACE_DETACH, pid, NULL, NULL);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:35:42.227

ptrace 有点难看，但它可能很有用。

这是一个 ptrace 示例程序；它用于使与 I/O 相关的系统调用暂停。 [http://stromberg.dnsalias.org/~strombrg/slowdown/](http://stromberg.dnsalias.org/~strombrg/slowdown/)

您当然也可以学习 gdb，但 ISTR 它非常庞大。

您还可以查看 strace 和 ltrace，尤其是 ltrace，因为它列出了符号。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-28T20:26:18.813

您可能想要调用驻留在特定可执行文件（可能是共享对象）中的函数。所以，首先，你必须找到这个可执行文件映射到的基地址

```
/proc/pid/maps 
```

之后，您需要找到您感兴趣的函数的本地偏移量，您可以通过两种方式做到这一点：

1.  了解[ELF](http://www.skyfree.org/linux/references/ELF_Format.pdf)文件格式（Linux 原生可执行格式），并使用映射文件搜索所需的功能（这需要一些专业知识）
2.  使用一个现成的 elfparser（可能是[readelf](https://linux.die.net/man/1/readelf)工具）来获取可执行文件下的函数偏移量。请注意，您必须计算出真正的本地偏移量，因为此工具通常会为您提供地址，就好像可执行文件已映射到特定地址一样

# java - 将 Gecko 引擎嵌入到 Java 桌面应用程序中

> ID：13074292
> 
> 赞同：1
> 
> 时间：2012-10-25T17:48:07.623
> 
> 标签：java, desktop-application, gecko

我目前正在研究将 Gecko 引擎嵌入 Java 桌面应用程序的可能性。我见过一些可用的工具，例如 JavaXPCOM，但我对它的局限性更感兴趣。我需要访问 Gecko 引擎的内部工作原理，例如如何组合 HTML 和 CSS 来呈现网页。

我研究的目的是找到一种方法，使用 Gecko，将 Web 表单中的某些元素分组并表示这些元素以及它们所有属性的列表。

是否有任何现成的工具/API 可以提供这种级别的 Gecko 引擎访问权限？或者这是否需要使用 Gecko 源而不是 API？

# ruby - 守卫咖啡似乎导致守卫外壳执行两次

> ID：13074296
> 
> 赞同：0
> 
> 时间：2012-10-25T17:48:21.800
> 
> 标签：ruby, coffeescript, guard

我已经设置了警卫（红宝石宝石），并且在我的 Mac 上似乎可以正常工作，并且从警卫咖啡和警卫外壳中设置警卫似乎工作正常。这是下面我的 Guardfile 的相关部分

```
guard 'coffeescript', :input => 'src/javascripts', :output => 'public/javascripts'
guard 'shell' do
    watch( %r{^public/.+\.(js|css)$} ) do |m|
        puts m.inspect
        if m[1] == 'js'
            puts 'a js is new!'
        else
            puts 'a css is new!'
        end
        puts %x{ echo #{File.mtime(m[0])} }
    end
end 
```

如果我编辑咖啡脚本文件，这似乎会输出两次“a js is new”。随着调试它似乎运行后

```
13:39:23 - DEBUG - Hook :run_on_changes_begin executed for Guard::CoffeeScript
13:39:23 - INFO - Compile src/javascripts/blah.coffee
13:39:23 - INFO - 01:39:23 PM Successfully generated public/javascripts/blah.js
["public/javascripts/blah.js", "js"]
a js is new! 
```

和

```
13:39:23 - DEBUG - Hook :run_on_changes_end executed for Guard::CoffeeScript
["public/javascripts/blah.js", "js"]
a js is new! 
```

如果我直接编辑 blah.js 文件，它似乎只触发一次。我对钩子的工作方式有点困惑，我可以从另一个守卫那里打钩吗？我应该在咖啡脚本守卫的回调中运行这段代码吗？我试图使用组，并且只在我在一个组中时才做外壳部分，并且不想在我使用回调的情况下重复咖啡卫士。

关于如何在咖啡一开火时停止触发两次外壳防护的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:21:45.857

在 Guard 1.0.0 之前，从 Guard 插件创建和更新的新文件不会触发其他插件的后续文件更改。这是一个问题，例如 CoffeeScript 和 LiveReload 插件：当 JavaScript 文件被更新时，LiveReload 没有重新加载文件。作为一种解决方法，我添加了一些[手动文件触发代码](https://github.com/guard/guard-coffeescript/blob/master/lib/guard/coffeescript.rb#L88-98)。使用[Listen](https://github.com/guard/listen) gem，这个限制已被消除，因此 CoffeeScript 插件会触发文件更改两次。

我在我的主分支上[删除了它。](https://github.com/netzpirat/guard-coffeescript/commit/d29df33ee35d71cae5507e6888791492bdfcf788)在我发布新的 gem 之前，你能试一试吗？您可以通过添加以下内容使用我的主分支轻松完成此操作：

`gem 'guard-coffeescript', :github => 'netzpirat/guard-coffeescript', :branch => 'master'`

到你的`Gemfile`. 当它工作正常时，我会尽快发布一个新的 gem。

# google-analytics - Google AdWords 自定义转化跟踪

> ID：13074299
> 
> 赞同：3
> 
> 时间：2012-10-25T17:48:26.743
> 
> 标签：google-analytics, google-ads-api

我们正在使用 AdWords 来推广我们的业务，并有一个与 AdWords 转化跟踪相关联的客户查询表。每当通过表单提交查询时，它都计为 1 次转换。

我们想要做的是以某种方式将转换与表单提交的姓名联系起来，以便我们稍后可以查看此人是否确实进行了购买，从而确定我们的投资回报率。

AdWords 是否可以做到这一点，如果可以，我必须在哪里了解如何实施类似的东西。我愿意为此聘请开发人员，但也假设这是一项简单的工作。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:37:10.773

我通过在 Google Analytics 中使用目标转换来解决它......更具体地说，是包含客户查询信息（即姓氏）的标题匹配。

这是表单上用于使其工作的代码：

```
onSubmit="javascript: surname = document.getElementById('surname');  _gaq.push(['_trackPageview', 'email/' + surname.value]);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T16:23:01.070

卡拉，AdWords 最近推出了离线转化导入功能。在这里阅读更多... [https://support.google.com/adwords/answer/2998031?hl=en](https://support.google.com/adwords/answer/2998031?hl=en)

如果您将点击 ID (GCLID) 与您的潜在客户信息一起存储，那么您可以在该潜在客户进行其他操作（例如成为合格或转化为客户）时注册新的转化。最重要的是，它可以通过他们的 API 获得。

# lex - 如何在词法分析器中生成自定义符号流而不是整数？

> ID：13074302
> 
> 赞同：0
> 
> 时间：2012-10-25T17:48:44.757
> 
> 标签：lex, symbols

我要求**gplex**，但是可能是这种情况，该问题的解决方案适用于其他 lex 派生工具。

我写了所有规则，一切都很好，只有一个例外。`scan`生成的扫描仪的方法类型是`int`，我希望是`MySymbol`（这将包括令牌的 id -- INT、STR、PLUS 等、它的值以及文件中的可能位置）。

我检查了样本（不是很多），但它们非常简单，只是写出了匹配的事实规则，我已经阅读了手册，但它是从解析器的角度开始的，现在我有点迷失了。

`lex`我在文件中的规则之一：

```
while { return new MySymbol(MyTokens.WHILE); } 
```

*我现在只有扫描阶段，我必须完成它，然后我会考虑解析器。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:00:33.437

Yacc 和类似 Yacc 的工具（此处为 GPEx）依赖于副作用。通常您可以考虑返回数据，但在这里您返回的是令牌 ID，并且任何额外的数据都必须通过特殊变量（如`yyval`.

# c# - 在实现中设置私有 Setter 的模拟 void 方法

> ID：13074303
> 
> 赞同：1
> 
> 时间：2012-10-25T17:48:45.820
> 
> 标签：c#, visual-studio-2010, unit-testing, moq

我有一个看起来像这样的界面......

```
public interface ITempFileNameBuilder
{
    string DirectoryPath { get; }

    string FileName { get; }

    void GenerateNewFileName();
} 
```

...我想模拟该`GenerateNewFileName`方法，以便将`FileName`属性设置为新的东西。我知道这是一个奇怪的请求，因为接口中显然没有`set`定义，因为它是`private set;`在两个实现中声明的。我这样做了，所以您**必须**调用`GenerateNewFileName`以将`FileName`属性设置为新的。

这可能吗？

## 编辑

这是我要测试的工作单元。

```
public void StartRecording(string claimNo, string ip_no, string ip_name, IWaveIn input, Stream writer)
{
    if (this.IsRecording)
    {
        return;
    }

    if (_input != null)
    {
        _input.Dispose();
    }
    _input = input;

    _input.WaveFormat = _waveFormat;
    _input.DataAvailable += (s, args) =>
    {
        _writer.Write(args.Buffer, 0, args.BytesRecorded);
        byte[] buffer = args.Buffer;
        for (int index = 0; index < args.BytesRecorded; index += 2)
        {
            short sample = (short)((buffer[index + 1] << 8) | buffer[index + 0]);
            float sample32 = sample / 32768f;
            _aggregator.Add(sample32);
        }

        OnDataAvailable(args);
    };
    _input.RecordingStopped += (s, args) =>
    {
        _input.Dispose();
        _writer.Dispose();

        OnRecordingStopped(args);
    };

    if (this.CurrentRecording != null)
    {
        _tempFileNameBuilder.GenerateNewFileName();
    }

    this.Recordings.Add(new RecordingTrack(claimNo, ip_no, ip_name,
        _tempFileNameBuilder.FileName,
        _recordingDeployer,
        _recordingCompressor));
    if (this.MicrophoneLevel == default(float))
    {
        this.MicrophoneLevel = .75f;
    }

    _aggregator.Reset();
    _writer = writer;

    _input.StartRecording();
    this.IsRecording = true;
} 
```

而这个单元测试的目标是确保`FileName`和实际上是不同的。这是基于我们之前发现的错误的回归测试。发生该错误是因为未**设置**上的属性，而只是从实例返回当前电流，因此我们的想法是确保调用该属性**并**确保调用了录制轨道上的**设置。**`CurrentRecording``LastRecording``FileName``RecordingTrack`**`FileName``ITempFileNameBuilder``GenerateNewFileName`****`TempFileName`******

 ******但是，on上的**集合**也是私有的，它是在构造函数中完成的，所以也许这不是真正的单元测试，而更像是集成测试？`TempFileName``RecordingTrack`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T17:52:12.280

你在嘲笑*接口*，而不是实现。所以你应该关心调用者如何与之交互。如果您希望他们先调用`GenerateNewFileName()`然后访问`FileName`，则只需期望这两个调用并返回适当的结果（其中“生成的”文件名可以是任何东西）。

这里没有要设置的“字段”——你*只是*在谈论一个 API。

当然，您可以轻松地创建一个*假*而不是模拟，并使用它来代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T17:51:09.070

在这种情况下，您需要使用显式私有字段而不是属性中隐式生成的私有字段。您需要确保实现根据该私有字段定义属性的`get`方法。`FileName`******

# java - 比较器应该每次实例化还是只实例化一次？

> ID：13074307
> 
> 赞同：12
> 
> 时间：2012-10-25T17:48:52.293
> 
> 标签：java, comparator

使用自定义比较器，每次实例化它而不是将其创建为常量（使用匿名类）并使用单个实例有什么好处？我一直认为每次都创建一个新实例没有任何优势，并且总是采用选项＃2（静态最终字段中的单个实例）的方式。

```
public class SomeClass {

  //First option:
  private static class SomeCustomComparator implements Comparator<SomeObject> {
    public int compare(SomeObject o1, SomeObject o2) {
      /*implementation*/
    }
  }

  //Second option:
  private static final Comparator<SomeObject> CUSTOM_COMPARATOR = new Comparator<SomeObject> {
    public int compare(SomeObject o1, SomeObject o2) {
      /*implementation*/
    }
  };

  public void doSomething() {
    //are there any advantages to one over the other?
    SortedSet<SomeObject> s1 = new TreeSet<>(CUSTOM_COMPARATOR);

    SortedSet<SomeObject> s2 = new TreeSet<>(new SomeCustomComparator());
  }
} 
```

这里的假设是比较器中不需要保存任何状态。

如果 doSomething() 被多次调用怎么办？如果从多个线程调用 doSomething() 怎么办？如果 CUSTOM_COMPARATOR 被拉到一个公共类中并公开而不是私有怎么办？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-25T17:50:08.850

如果比较器没有状态（大多数都没有），那么创建一个实例并在任何地方使用它是绝对可以的。不要仅仅为了它而创建额外的对象。

# rally - 除了任务详细信息，如何在其他页面上显示“花费时间”字段？

> ID：13074310
> 
> 赞同：1
> 
> 时间：2012-10-25T17:48:56.670
> 
> 标签：rally

是否可以将“所用时间”字段添加到“任务详细信息”页面以外的其他页面？例如，就像在迭代状态页面上显示它一样。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T20:16:57.720

不幸的是，Track -> Iteration Status Page 是不可定制的。这是此页面的热门功能请求。我鼓励您投票支持以下集会理念：

[添加在迭代状态网格中自定义列的功能](https://ideas.rallydev.com/ideas/D1976)

在[Rally Ideas 网站上](https://ideas.rallydev.com)。

提高 Rally 产品所有者对该功能的可见性。

# java - SWT/JFace：如何处理每个 ViewPart 或 Form 的 Keyevents？

> ID：13074311
> 
> 赞同：1
> 
> 时间：2012-10-25T17:48:58.677
> 
> 标签：java, event-handling, swt, eclipse-rcp, jface

我正在构建一个 Eclipse 应用程序，我正在尝试创建一个快捷方式，以便在按下 F5 时启动一个操作，并在`Tab`/`ViewPart`获得焦点时将其设为默认操作。

我读过这是不可能的，或者非常复杂。有什么简单/直接的方法吗？

我试过：

```
Display.getCurrent().addFilter(...)
this.addKeyListener(new KeyAdapter() {...}) 
```

...

在构造函数中做这个是我最好的：

```
this.getShell().addKeyListener(new KeyAdapter() {
    public void keyPressed(KeyEvent e) {
        if(e.keyCode == SWT.F5) {
            //doAnything()
        }
    }
}); 
```

这在加载时不起作用，但如果我从这个切换到另一个`View`/`Tab`开始工作。但是当其他人有注意力（我不想要）时它也有效。

无论如何，一开始就可以进行这项工作，并且只有当焦点在`View`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:38:40.477

[您应该在处理程序](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/commands/AbstractHandler.html)中定义工作，然后应该使用本示例中给出的键绑定。[你可以在这里](http://www.vogella.com/articles/EclipseCommandsKeybindings/article.html)找到一个很好的例子。希望它能解决您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:57:49.580

你应该看看[RetargetableActions](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/wrkAdv_retarget.htm)。我认为这是 Eclipse 的做法：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T18:25:10.730

如果您获得组件事件的侦听器，它将侦听事件。如果该组件发生事件，它将被通知。

要在 上添加关键事件的侦听器，`ViewPart`我们应该创建能够侦听事件的控件。

```
public class SampleView extends ViewPart {
  /**
   * The ID of the view as specified by the extension.
   */
  public static final String ID = "views.SampleView";

  private Composite mycomposite;

  public void createPartControl(Composite parent) {
    mycomposite = new Composite(parent, SWT.FILL);

//then add listener

    mycomposite.addKeyListener(keyListener);
  }

  private KeyListener keyListener = new KeyAdapter() {

    @Override
    public void keyReleased(KeyEvent e) {
        // TODO Auto-generated method stub              
    }

    @Override
    public void keyPressed(KeyEvent e) {
        showMessage("key pressed: "+ e.keyCode);                
    }
  };

//the rest of focusing and handle event

  private void showMessage(String message) {
    MessageDialog.openInformation(
        mycomposite.getShell(),
        "Sample View",
        message);
  }

  /**
   * Passing the focus request to the viewer's control.
   */
  public void setFocus() {
    mycomposite.setFocus();
  }
}
//the end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T18:47:31.033

You need to look at extensions `org.eclipse.ui.bindings` and `org.eclipse.ui.contexts`.

1.  Define a command and its handler
2.  Define a binding for the command
3.  define context (cxtId)
4.  associate context with command so that command is available only when context is active
5.  Activate context when you open the view or form.

# javascript - 字段为空时阻止提交并显示错误消息

> ID：13074314
> 
> 赞同：0
> 
> 时间：2012-10-25T17:49:16.637
> 
> 标签：javascript, jquery, forms

我的网站上有很多不同的表格。我想使用 Jquery 来：

*   如果任何文本字段为空，则显示错误消息
*   使用 CSS 突出显示空白字段
*   在用户填写之前阻止提交表单。

所有不同的表单都链接到同一个 Jquery 脚本，因此我必须确保我的 jquery 不会对特定表单进行任何引用（否则，我将不得不为每个表单编写不同的脚本）。

我认为最好的方法是让[每个函数](http://api.jquery.com/jQuery.each/)循环遍历输入字段以检查它们是否为空白，然后使用[event.preventDefault();](http://api.jquery.com/event.preventDefault/) 阻止表单提交和[addClass](http://api.jquery.com/addClass/)以突出显示字段。

每个功能都有效，但 preventdefault/addclass 似乎不起作用。我不确定我做错了什么。这是我的代码：（[JSFiddle](http://jsfiddle.net/big_smile/vVnGd/6/)版本）

```
$(document).ready(function () {

$('.names').submit(function(){  
          $('.names input[type=text]').each(function(n,element){  
            if ($(element).val()=='') {  
                event.preventDefault();
              alert('Some fields are blank (highlighted in red). Please fill them in');  
              ($element).addClass("error");
              return false;  
            }  
          });  
          return true;  
        });

}); 
```

我怎样才能让它工作？是否可以将错误类应用于`<p>`输入字段的父标签而不是字段本身？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:54:06.337

`event`未定义。在您的提交回调中捕获参数并在其上调用 preventDefault ：

```
$(document).ready(function () {
    $('.names').submit(function (e) {
        $(this).find('input[type=text]').each(function (n, element) {
            if ($(element).val() == '') {
                e.preventDefault();
                alert('Some fields are blank (highlighted in red). Please fill them in');
                $(element).parent().addClass("error");

                return false;
            }
        });

        return true;
    });
}); 
```

注意：

1.  `($element)`也是未定义的，你的意思是`$(element)`.
2.  要将错误类添加到父级，请使用`$(element).parent()`.
3.  如果您有多个表格，这将不起作用。使用`$(this).find('input[...]')`而不是`$('.names input[...]')`. 这样，您只需验证您提交的表单。
4.  这是一个[工作小提琴](http://jsfiddle.net/vVnGd/17/)。

# c++ - std::bind 与指向函数对象的指针

> ID：13074315
> 
> 赞同：5
> 
> 时间：2012-10-25T17:49:17.613
> 
> 标签：c++, c++11, bind, shared-ptr, variadic-templates

给定一个指向函数对象的指针：

```
std::shared_ptr<std::function<double(double)>> f; 
```

`std::bind`C++11 中是否有允许在语句中使用此指针的内置结构？例如：

```
std::function<double()> g = std::bind(built_in(f), 0.0); 
```

我正在做的是使用*可变参数模板*：

```
template<typename Ret, typename... Args>
std::function<Ret(Args...)> get_fn(const std::shared_ptr<std::function<Ret(Args...)>>& f)
{
    return [=](Args... args) -> Ret { return (*f)(args...); };
} 
```

这让我可以写：

```
std::function<double()> g = std::bind(get_fn(f), 0.0); 
```

提前致谢。

**编辑：**我应该更清楚。我需要在共享指针中使用函数对象的实例来进行优化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:11:30.107

如果我们有一个用于取消引用运算符的标准函数对象（很像`std::plus<T>`添加`T`with `T`），那么我们可以涉及一个嵌套的绑定表达式，但情况并非如此——另外我们需要一个调用运算符，因为通常的替换需要在评估嵌套绑定表达式期间放置的位置不适用于第一个参数！您的解决方案引入了一个额外的`std::function`，所以我提出了一些没有的替代方案。

编写您自己的调用和取消引用运算符：

```
struct call {
    template<typename Callable, typename... Args>
    auto operator()(Callable&& callable, Args&&... args) const
    // don't use std::result_of
    -> decltype( std::declval<Callable>()(std::declval<Args>()...) )
    { return std::forward<Callable>(callable)(std::forward<Args>(args)...); }
};

struct dereference {
    template<typename T>
    auto operator()(T&& t) const
    -> decltype( *std::declval<T>() )
    { return *std::forward<T>(t); }
};

template<typename IndirectCallable, typename... Args>
auto indirect_bind(IndirectCallable&& f, Args&&... args)
-> decltype( std::bind(call {}
                       , std::bind(dereference {}, std::declval<IndirectCallable>())
                       , std::declval<Args>()... ) )
{ return std::bind(call {}
                   , std::bind(dereference {}, std::forward<IndirectCallable>(f))
                   , std::forward<Args>()... ); } 
```

然后你就可以做到了`auto g = indirect_bind(f, 0.0);`。[这是一个概念验证](http://liveworkspace.org/code/fadb6b6d4072bfa60a50f92f7bcbdcdb)，它还显示了如何正确处理占位符。

我提到上述解决方案是因为函子喜欢`call`并且`dereference`是有用的积木——我个人将它们放在我的工具中。然而，我首选的解决方案是编写一个多态仿函数，它可以一次性完成间接调用：

```
template<typename Indirect>
struct indirect_callable_type {
    // Encapsulation left as an exercise
    Indirect f;

    template<typename... Args>
    auto operator()(Args&&... args)
    // don't use std::result_of
    -> decltype( std::declval<Indirect&>()(std::declval<Args>()...) )
    { return f(std::forward<Args>(args)...); }

    template<typename... Args>
    auto operator()(Args&&... args) const
    // don't use std::result_of
    -> decltype( std::declval<Indirect const&>()(std::declval<Args>()...) )
    { return f(std::forward<Args>(args)...); }

    // Lvalue and rvalue *this version also left as an exercise
};

template<typename T>
indirect_callable_type<typename std::decay<T>::type>
make_indirect_callable(T&& t)
{ return { std::forward<T>(t) }; } 
```

事实上，你可以使用 as `auto g = std::bind(make_indirect_callable(f), 0.0);`。

我应该提到，与您的解决方案不同，这些需要编写一些离线类型。由于 lambda 表达式的固有限制，这是一种不幸的情况。如果你想坚持你目前拥有的，我有一个小建议，那就是在 lambda 中你`std::forward<Args>(args)...`的参数。如果您曾经处理过仅移动类型，这可能会很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T22:15:09.697

您可以在这里使用一个不错的小技巧，即*`INVOKE`* 在指向成员函数的指针上，当传递一个指针或（甚至）一个智能指针（20.8.2p1 第二个项目符号，定义*`INVOKE`*）时，会自动间接间接其对象参数：

```
#include <functional>
#include <memory>
#include <iostream>

int main() {
    std::shared_ptr<std::function<double(double)>> f
        = std::make_shared<std::function<double(double)>>(
            [](double d) { return d + 10.0; });
    std::function<double()> g = std::bind(
        &std::function<double(double)>::operator(), f, 0.0);
    std::cout << g() << std::endl;
} 
```

如果您不想明确提及的类型`f`：

```
std::function<double()> g = std::bind(
    &std::remove_reference<decltype(*f)>::type::operator(), f, 0.0); 
```

# oracle - 动态旋转表 Oracle

> ID：13074319
> 
> 赞同：3
> 
> 时间：2012-10-25T17:49:33.530
> 
> 标签：oracle, pivot

我有一个看起来像这样的表：

```
C_ID   P_ID   KEY    VALUE
null   null   KEY1   VALUE1
null   null   KEY2   VALUE2
null   null   KEY3   VALUE3
2       2     KEY4   VALUE4
2       3     KEY5   VALUE5 
```

我想得到这个结果表/视图：

```
C_ID   P_ID   KEY1    KEY2    KEY3      KEY4    KEY5
NULL   NULL  VALUE1  VALUE2  VALUE3     NULL    NULL
2       2     NULL    NULL    NULL     VALUE4   NULL
2       3     NULL    NULL    NULL      NULL   VALUE5 
```

有没有人知道我怎么能做到这一点？我已经尝试过：

```
select * from (select c_id, p_id, r_key, r_value from s_projectroles) pivot (max(r_value) for r_key in (any)); 
```

我收到一个错误：

```
ORA-00936: Ausdruck fehlt
00936\. 00000 -  "missing expression" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T18:03:21.367

这可以通过以下方式动态完成。首先，这是查询的静态版本，因此您可以看到最终的 sql：

```
select c_id,
  p_id,
  max(case when r_key= 'KEY1' then r_value  end) KEY1,
  max(case when r_key= 'KEY2' then r_value  end) KEY2,
  max(case when r_key= 'KEY3' then r_value  end) KEY3,
  max(case when r_key= 'KEY4' then r_value  end) KEY4,
  max(case when r_key= 'KEY5' then r_value  end) KEY5
from s_projectroles
group by c_id, p_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/42245/1)

然后要动态执行此操作，您可以创建以下过程：

```
CREATE OR REPLACE procedure dynamic_pivot(p_cursor in out sys_refcursor)
as
    sql_query varchar2(1000) := 'select c_id, P_id ';

    begin
        for x in (select distinct r_key from s_projectroles order by 1)
        loop
            sql_query := sql_query ||
              ' , max(case when r_key = '''||x.r_key||''' then r_value end) as '||x.r_key;

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from s_projectroles group by c_id, p_id';

        open p_cursor for sql_query;
    end;
/ 
```

然后执行它：

```
variable x refcursor
exec dynamic_pivot(:x)
print x 
```

结果是一样的：

```
|   C_ID |   P_ID |   KEY1 |   KEY2 |   KEY3 |   KEY4 |   KEY5 |
----------------------------------------------------------------
| (null) | (null) | VALUE1 | VALUE2 | VALUE3 | (null) | (null) |
|      2 |      2 | (null) | (null) | (null) | VALUE4 | (null) |
|      2 |      3 | (null) | (null) | (null) | (null) | VALUE5 | 
```

# android - Android GCM 服务器端消息传递

> ID：13074320
> 
> 赞同：0
> 
> 时间：2012-10-25T17:49:45.213
> 
> 标签：android, google-cloud-messaging

所以我得到了 reg_id 并且可以向我的设备发送通知。但是，通知都带有默认的“推送通知消息”与实际消息。我发送的有效载荷数据是 {'message':'this is a test'}。在 iOS APNS 中，我会做同样的事情，但关键是“警报”。

难道我做错了什么？

# google-chrome - 谷歌浏览器根本不渲染背景渐变

> ID：13074321
> 
> 赞同：0
> 
> 时间：2012-10-25T17:49:50.940
> 
> 标签：google-chrome, background, css

我正在阅读这篇文章[http://www.sitepoint.com/using-unprefixed-css3-gradients-in-modern-browsers/](http://www.sitepoint.com/using-unprefixed-css3-gradients-in-modern-browsers/)。我创建了这篇文章所教内容的这个小演示。

```
<html>
    <head>
        <title>Css Gradients</title>
        <style>
            .demo{
                height: 200px;
                width: 400px;
                margin-bottom: 10px;
                background: linear-gradient(to right,red,yellow);
                /*background: linear-gradient(23deg,red,yellow);*/
            }
            #radial{
                /*background: radial-gradient(at center,red,yellow);*/
                background: radial-gradient(circle closest-corner,red,yellow);
            }
        </style>
    </head>
    <body>
        <div class="demo"></div>
        <div class="demo" id="radial"></div>
    </body>
</html> 
```

现在的问题是，Firefox 正在正确渲染背景渐变，但 Google Chrome（版本 22）根本没有渲染背景渐变。查看截图 ![火狐](../Images/cd3153d592c51cb90916f84d721c16fe.png)![铬合金](../Images/b001fc3c2bb095643cc056511fed0d0c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T13:44:41.883

目前（Chrome 24 / Safari 6）Webkit 还没有添加对无前缀 css3 渐变的支持。如果您考虑到即使 IE10(!) 已经使用无前缀语法，这有点令人难过。

参考：[http ://caniuse.com/#search=grad](http://caniuse.com/#search=grad)

# page-object-gem - PageObject::Accessors 中可以有 divs 方法吗？我的解决方法可以吗？

> ID：13074327
> 
> 赞同：4
> 
> 时间：2012-10-25T17:50:46.537
> 
> 标签：page-object-gem

在页面对象中，我希望以特定方式访问多个 div。

这是对匹配的第一个 div 的访问：

```
div(:search_result, id: /rptSearchResults/) 
```

如果 div 存在于 PageObject::Accessors 中，这将是访问多个匹配的 div：

```
divs(:search_result, id: /rptSearchResults/) 
```

到目前为止，我已经尝试过：

```
visit_page SearchResultsPage do |page|

    #This outputs the first div that matches
    page.search_result_element.div_elements(id: /rptSearchResults/).each { |i| puts i.text }

    #This accesses the page and outputs text in all divs that match
    page.div_elements(id: /rptSearchResults/).each { |i| puts i.text}

end 
```

任何人都可以建议在页面对象中执行此操作的更好方法吗？

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T21:50:59.560

通过使用您定义多个 div 的方式`divs(:search_result, id: /rptSearchResults/)`，您可以通过`search_result_elements`.

一些例子：

*   获取第一个 div 元素 -`search_result_elements[0]`
*   获取返回元素的长度 -`search_result_elements.length`
*   获取 div 的文本 -`search_result_elements.map(&:text)`
*   从第三个 div 获取子元素 -`search_result_elements[2].element`

希望这可以帮助！

# python - TypeError 'x' 对象没有属性 '__getitem__'

> ID：13074331
> 
> 赞同：13
> 
> 时间：2012-10-25T17:51:11.637
> 
> 标签：python, django, typeerror

我收到错误

> ```
> 'CampSite' object has no attribute '__getitem__' 
> ```

当我在管理界面中保存一个新的 CampCon 条目时。我有一个名为 campsites 的应用程序来处理露营地的数据库，我还有另一个名为 content 的应用程序来处理评论。我对 Django 很陌生，这是我的第一个非教程项目。我一直在绞尽脑汁在网上搜索答案，但没有运气。预先感谢您的帮助。这是我的露营地模型：

```
from django.contrib.gis.db import models

class CampSite(models.Model):
    name = models.CharField(max_length=250)
    showers = models.BooleanField()
    flush = models.BooleanField()
    rv = models.BooleanField()
    lonlat = models.PointField(null=True, blank=True)

    objects = models.GeoManager()

    def __unicode__(self):
        return self.name 
```

这是内容模型：

```
from django.contrib.gis.db import models
from campsites.models import CampSite
from django.contrib.auth.models import User
from activities.models import Activities

class CampCon(models.Model):
    campsite = models.ForeignKey(CampSite)
    trip = models.ForeignKey('Trip')
    Date = models.DateField()
    user = models.ForeignKey(User)
    overall_review = models.TextField()
    facilities_review = models.IntegerField()
    things_to_do = models.IntegerField()
    privacy = models.IntegerField()
    beauty = models.IntegerField()
    overall_rating = models.IntegerField()

    def __unicode__(self):
        return self.campsite

class ImageDB(models.Model):
    campsite = models.ForeignKey(CampSite)
    user = models.ForeignKey(User)
    description = models.CharField(max_length=200)
    image = models.ImageField(upload_to='/home/bobby/Pictures/CampThat')
    date_uploaded = models.DateField()
    date_taken = models.DateField()
    trip = models.ForeignKey('Trip')
    activity = models.ForeignKey(Activities)

    def __unicode__(self):
        return self.campsite

class Trip(models.Model):
    date = models.DateField()
    description = models.CharField(max_length=100)
    title = models.CharField(max_length=100)
    blog = models.TextField()

    def __unicode__(self):
        return self.title

class ActivityCon(models.Model):
    trip = models.ForeignKey(Trip)
    rating = models.IntegerField()
    overall_review = models.TextField()
    activity = models.ForeignKey(Activities) 
```

这是完整的追溯：

```
 Environment:

Request Method: POST
Request URL: http://localhost:8000/admin/content/campcon/add/

Django Version: 1.5
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'campsites',
 'auth',
 'trips',
 'content',
 'activities',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  116\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/lib/python2.7/site-packages/django/contrib/admin/options.py" in wrapper
  367\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/contrib/admin/sites.py" in inner
  202\.             return view(request, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/usr/lib/python2.7/site-packages/django/db/transaction.py" in inner
  208\.                 return func(*args, **kwargs)
File "/usr/lib/python2.7/site-packages/django/contrib/admin/options.py" in add_view
  958\.                 self.log_addition(request, new_object)
File "/usr/lib/python2.7/site-packages/django/contrib/admin/options.py" in log_addition
  525\.             action_flag     = ADDITION
File "/usr/lib/python2.7/site-packages/django/contrib/admin/models.py" in log_action
  18\.         e = self.model(None, None, user_id, content_type_id, smart_text(object_id), object_repr[:200], action_flag, change_message)

Exception Type: TypeError at /admin/content/campcon/add/
Exception Value: 'CampSite' object has no attribute '__getitem__' 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-25T17:54:17.993

您的问题是您的`__unicode__`函数在需要返回 unicode 字符串时返回模型对象。

您可以通过将`unicode()`函数添加到您的`__unicode__`方法来实现此目的：

```
class CampCon(models.Model):
    campsite = models.ForeignKey(CampSite)
    trip = models.ForeignKey('Trip')
    Date = models.DateField()
    user = models.ForeignKey(User)
    overall_review = models.TextField()
    facilities_review = models.IntegerField()
    things_to_do = models.IntegerField()
    privacy = models.IntegerField()
    beauty = models.IntegerField()
    overall_rating = models.IntegerField()

    def __unicode__(self):
        return unicode(self.campsite)

class ImageDB(models.Model):
    campsite = models.ForeignKey(CampSite)
    user = models.ForeignKey(User)
    description = models.CharField(max_length=200)
    image = models.ImageField(upload_to='/home/bobby/Pictures/CampThat')
    date_uploaded = models.DateField()
    date_taken = models.DateField()
    trip = models.ForeignKey('Trip')
    activity = models.ForeignKey(Activities)

    def __unicode__(self):
        return unicode(self.campsite) 
```

这将调用`CampSite.__unicode__`which 将返回`campsite.name`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:55:44.287

请改用此方法：

```
 def __unicode__(self):
        return unicode(self.campsite) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T03:36:25.023

如果您这样做，也会发生这种情况：

```
event_name = CharField(max_length = 250) 
```

而不是这样：（正确的方式）

```
event_name = models.CharField(max_length = 250) 
```

*可能对某人有帮助*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-13T11:42:13.957

由于这是 Google 上的第一次点击：我`'ItemGroup' object has no attribute '__getitem__'`在执行以下操作时遇到了类似的错误 ( )：

```
class ItemGroup(models.Model):
    groupname = models.CharField(max_length=128)

    def __unicode__(self):
        return "%s" % self.groupname

class Item(models.Model):
    name = models.CharField(max_length=128)
    group = models.ForeignKey(MedGroup, verbose_name="Groep")

    def __unicode__(self):
        return "%s (%s)" % (self.name, self.group[:10]) 
```

最后一行是错误的。

通过将该行替换为`return "%s (%s)" % (self.name, self.group.groupname[:10])`

# python - SciPy 设置在 Mac 上找不到 Fortran

> ID：13074334
> 
> 赞同：0
> 
> 时间：2012-10-25T17:51:16.010
> 
> 标签：python, fortran, scipy

我安装了 numpy、Xcode 4.5.1、Python 2.7.3 和 gfortran 4.2.4-5666.3。后者是我从 Homebrew 安装的，它放在 /usr/local/Cellar 中。在 scipy 文件夹中运行 setup.py 会导致熟悉的“无法找到可执行文件”错误。我搜索了这些编译器的引用位置，试图将 Python 指向正确的位置，但一无所获。有任何想法吗？非常感谢

# facebook - Facebook iFrame 标题

> ID：13074341
> 
> 赞同：1
> 
> 时间：2012-10-25T17:51:44.383
> 
> 标签：facebook, iframe, accessibility, title, facebook-login

我目前有一个项目正在由我们的无障碍团队审核。除了 Facebook iFrame 之外，几乎所有东西都通过了。我们需要在 iFrame 上设置一个标题，但我找不到任何属性来设置标题，也没有找到任何关于如何给它一个 iFrame 的文档。如何在 Facebook 登录 iFrame 上分配或设置属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:05:25.677

It should be done on your end? `<iframe src="..." title="login to our site using Facebook"></iframe>`

# json - JSON 获取请求 Google 货币转换器

> ID：13074343
> 
> 赞同：2
> 
> 时间：2012-10-25T17:51:57.350
> 
> 标签：json, api, igoogle, datafeed

我不知道我是否可以使用它，因为我完全没有看到任何文档，但我想我找到了一个小宝石......

```
http://www.google.com/ig/calculator?hl=all&q=100GBP=?EUR 
```

返回

```
{lhs: "100 British pounds",rhs: "124.243824 Euros",error: "",icc: true} 
```

现在有人知道在我的网站上的网络应用程序中使用它是否有任何限制？绝对没有这方面的文档，我只是在寻找谷歌货币转换器的数据源时发现它。

提前谢谢了。

# http - 在主干中放置一个自定义 http 标头

> ID：13074349
> 
> 赞同：8
> 
> 时间：2012-10-25T17:52:12.577
> 
> 标签：http, backbone.js, tastypie

我正在使用 Tastypie 创建一个 API，并且我想从 Backbone 访问该 API。要发送凭据，我使用 user_id 和 api_key。我在 android 和 curl 中执行此操作，效果很好，但我可以从主干设置 http 标头。

在卷曲中我使用：

```
 curl --dump-header - -H "Accept: application/json" -H "Content-Type: application/json" -H "user_id: 32" -H "api_key: 69950" -X DELETE "http://127.0.0.1:8000/api/v1/deletenote/66/?format=json" 
```

在android java中我使用：

```
 HttpDelete requestDELETE = new HttpDelete();
    requestDELETE.setHeader("Content-type", "application/json");
    requestDELETE.setHeader("Accept", "application/json");
    requestDELETE.setHeader(Constants.HEADER_USER_ID, user_id);
    requestDELETE.addHeader(Constants.HEADER_API_KEY, key); 
```

它们都工作得很好，但是当我按照我在页面的其他帖子中找到的响应在 Backbone 中尝试这个时，这不起作用。

我正在尝试这个：

```
var removeNote = new DeleteNoteModel({id:this.model.toJSON().id},{ query:this.model.toJSON().id});

removeNote.destroy({ 
        headers: {'user_id':dataWeb.get("id"),'api_key':dataWeb.get("api_key")}
        },{
                    async:false,
                    error: function(model, response){
                        console.log("KO_REMOVE_NOTE");
                        console.log(response);
                    },
                     success : function(model, response){
                        console.log("OK_REMOVE_NOTE");
                        console.log(response);
                     }
                }
    ); 
```

当我调用销毁调用时，我正在放置标题，但这不会将任何内容发送到服务器。

我在错误的模式下做什么？

谢谢大家。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-25T18:37:03.413

Tallmaris 的答案应该为您解决它，但我建议使用 jQuery [ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)方法将标头设置为所有 ajax 请求的默认值，因为我相信您一直都需要它们，对吧？

您启动应用程序的地方

```
$.ajaxSetup({
    headers: {
        'user_id':dataWeb.get("id"),
        'api_key':dataWeb.get("api_key")
    }
}); 
```

多亏了这一点，您将为自己节省大量重复的代码 :) 保持干燥！

（显然，您需要确保 dataWeb 在您启动应用程序的范围内可用:)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T18:11:50.953

似乎您要传递两个参数来销毁，只传递一个包含标题和其他选项的参数，除非括号顺序是拼写错误。尝试这个：

```
removeNote.destroy({ 
    headers: {
        'user_id':dataWeb.get("id"),
        'api_key':dataWeb.get("api_key")
    }, // there was an extra close-open curly here...
    async:false,
    error: function(model, response){
        console.log("KO_REMOVE_NOTE");
        console.log(response);
    },
    success : function(model, response){
        console.log("OK_REMOVE_NOTE");
        console.log(response);
    }
}); 
```

# java - “X？a：b”符号的含义是什么？

> ID：13074352
> 
> 赞同：1
> 
> 时间：2012-10-25T17:52:23.633
> 
> 标签：java, syntax

> **可能重复：**
> [什么是 Java ?: 运算符，它有什么作用？](https://stackoverflow.com/questions/798545/what-is-the-java-operator-called-and-what-does-it-do)

在某些代码`?`中，a 用于执行数学方程。

它是什么以及如何使用它？是否可以提供一个例子以及方程最终答案的原因？

```
int count = getChildCount();
int top = count > 0 ? getChildAt(0).getTop() : 0; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T17:54:45.900

基本上是三元运算符：

```
String mood = (isHappy == true)?"I'm Happy!":"I'm Sad!"; 
```

如果是快乐，那么“我很快乐！”。“我很伤心！” 除此以外。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T17:54:35.630

我想你的意思是`x = () ? y : z;`符号之类的东西？如果是这种情况，则括号内的表达式被评估为布尔值，`true` `x = y`否则`x = z`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T17:56:22.447

```
int count = getChildCount();
int top = count > 0 ? getChildAt(0).getTop() : 0; 
```

`getChildAt(0).getTop()`表示如果`count`变量大于 0，top 变量将包含 的值，否则将等于`0`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T17:57:37.087

我的猜测是您指的是[三元运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)，它的用法如下：

```
<some condition> ? <some value> : <some other value>; 
```

例如：

```
int max = a > b ? a : b; 
```

它是 an 的简写，`if`相当于：

```
int max;
if (a > b) {
    max = a;
} else {
    max = b;
} 
```

但允许代码中的单行结果。

如果使用得当，由于其简洁性，它可以使代码更加清晰。但是，如果行变得太长或太复杂，建议小心：代码只有在术语简短时才保持可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T17:55:42.560

`?`求值表达式中的 称为三元*运算符*。它本质上是一个`if() ... else`块的简写。

[http://en.wikipedia.org/wiki/%3F](http://en.wikipedia.org/wiki/%3F)：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T17:56:05.287

我假设您指的是[三元运算符](http://en.wikipedia.org/wiki/Ternary_operation)。它是某些 if 语句的简写。你在哪里做作业，比如：

```
int dozen = (bakersDozen) ? 13 : 12; 
```

假设`bakersDozen`为真，则为`dozen`13。如果为假，则为 12。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-25T17:56:20.157

```
int result = (a > b) ? 1 : 0; 
```

是一样的

```
int result;
if (a > b)
  result = 1;
else
  result = 0; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-25T17:56:59.270

? 通常是三元（或三元）运算符。所以让我们解释一下它在做什么。

```
myValue = (a = b) ? 1 : 0; 
```

第一部分是你的条件。“a等于b吗？”

第二部分是真实的反应。

第三部分是虚假回应。

因此，如果 a 等于 b，myValue 将为 1。如果 a 不等于 b，myValue 将为 0。

见[http://en.wikipedia.org/wiki/Ternary_operation](http://en.wikipedia.org/wiki/Ternary_operation)

# ruby-on-rails - 使用 rails 下载多个文件

> ID：13074355
> 
> 赞同：1
> 
> 时间：2012-10-25T17:52:46.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, prawn

我目前正在将 PRAWN 与最新版本的 rails 一起使用，但我不知道如何通过单个 HTTP 请求下载多个文件。在我的控制器中，我有以下代码：

```
Fill PDF with my stuffs...
PDF.render_file "foo.pdf"
send_file("foo.pdf") 
```

它会正确下载文件，但是 - 如果在那之后 - 我放了另一个相同代码的实例......它只会执行最后一个，foo2

```
PDF.render_file "foo.pdf"
send_file("foo.pdf")
PDF.render_file "foo.pdf"
send_file("foo2.pdf") 
```

此外，如果最后...我想渲染另一个视图，我做不到。

问题是：

如何在控制器内的单个操作中下载 2 个不同的文件，最后渲染视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:53:43.963

你不能，除非你压缩它们然后发回压缩文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:07:20.563

您可以使用 pdftk 组合服务器上的 pdf，然后发送一个 pdf。

除此之外，获取多个文件下载的唯一方法是让浏览器向服务器发送多个 AJAX 请求，每个请求都以 send_file 结尾。

这将需要一些 JavaScript，并且您最终会在屏幕上弹出多个文件下载对话框。

# javascript - 用于与桌面窗口交互的 Javascript 插件

> ID：13074357
> 
> 赞同：0
> 
> 时间：2012-10-25T17:52:48.290
> 
> 标签：javascript, gwt, desktop

我正在寻找一种方法让我的 gwt Web 应用程序能够访问和发送输入到打开的桌面窗口。

基本上它应该与 java.awt.Robot 类类似，能够分析屏幕数据并将（主要是鼠标）输入发送到特定窗口或当前屏幕上的任何坐标。

我找不到任何可以做类似事情的通用接口，所以我希望我只是监督了一些事情，或者有人知道如何实现这一点。

注意：我知道我可以将应用程序转换为桌面变体，但我更喜欢更简单且耗时更少的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:15:09.977

如果浏览器是 Windows 上的 IE，则可以使用`ActiveX`. 对于其他情况，您必须为每个浏览器开发自己的插件。

# android - 更改媒体播放器的音量

> ID：13074365
> 
> 赞同：0
> 
> 时间：2012-10-25T17:53:24.840
> 
> 标签：android, android-mediaplayer

> **可能重复：**
> [如何控制媒体音量？](https://stackoverflow.com/questions/6784687/how-to-control-media-volume)

我正在制作一个游戏，当它开始时我通过这个播放音乐：ourSong = MediaPlayer.create(GameMenu.this, com.saad.batman.R.raw.fire);

```
 SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    boolean music = getPrefs.getBoolean("checkbox", true);
    if (music == true){
        ourSong.start();
    } 
```

现在我想做的是，当我从游戏菜单转到选项时，我希望能够增加或减少那里的音乐音量。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:34:34.103

如果您使用音量按钮，那么您不需要做任何事情？就用它。

要将其设置在游戏菜单中，请在菜单中向滑块添加类似微调器的内容。从中获取设置值，并传递给 setVolume 方法。

mpVolumn 是浮点数，用于左右。

请注意，mpVolumn 必须小于 1，因此请将最大值设置为 0.99 或其他值

mediaPlayer.setVolume(mpVolumn, mpVolumn);

# c - 反向功能不断给我错误

> ID：13074366
> 
> 赞同：0
> 
> 时间：2012-10-25T17:53:27.163
> 
> 标签：c, stack, swap

这是一个调用 chararrays 和 integers 堆栈中的数组的函数。它应该反转值，但首先我必须弄清楚哪个是字符串，哪个是整数，然后才能切换它们。但我不断收到错误。这有什么可笑的吗？

```
void reverse(Stack *S)
// NOTE:  Called w/ user input 'r'   
// PRE:   Stack S is initialized  
// POST:  The first two values of the stack are reversed on the stack 
{
    int valone;
    int valtwo;
    char stringone[50];
    char stringtwo[50];

    if (S->size < 1)
    {
        printf("Error: There are less than 2 values on the stack \n");
    }  
    else
    { 
        valone = (float)topInt(S);
        strcpy(stringone, topString(S));
        pop(S);
        valtwo = (float)topInt(S);
        strcpy(stringone, topString(S));
        pop(S);

        if(stringone[0] == '\n')
        {
            pushInt(S, valone);
        }
        else if(valone == '\n')
        {
            pushString(S, stringone);
        }
        else if(stringtwo[0] == '\n')
        {
            pushInt(S, valtwo);
        }
        else if(valtwo == '\n')
        {
            pushString(S, stringtwo);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:02:23.833

您正在从堆栈中弹出两个值，但只将一个值推回堆栈。您需要将其中一个`else if`s 更改为`if`.

```
 if(stringone[0] == '\n')
    {
        pushInt(S, valone);
    }
    else if(valone == '\n')
    {
        pushString(S, stringone);
    }

    if(stringtwo[0] == '\n')
    {
        pushInt(S, valtwo);
    }
    else if(valtwo == '\n')
    {
        pushString(S, stringtwo);
    } 
```

我不知道这是否能解决你的问题。你得到什么**错误？**请张贴。

另外，你为什么在这里使用`\n`一些特殊的价值？`valone`如果或`valtwo`最终等于 的整数值，您将遇到奇怪的问题`\n`。

如果我是你，我会将方法更改为...

```
void reverse(Stack **S)
{
    Stack* newS = allocateEmptyStack();

    while (!isEmpty(*S))
    {
        StackItem* item = top(*S);
        pop(*S);
        push(newS, item);
    }

    freeStack(*S);
    *S = newS;

 } 
```

一些潜在的定义...

```
typedef enum ItemType
{
    STACK_STRING,
    STACK_INT,
    STACK_FLOAT
} ItemType;

typedef struct StackItem
{
    ItemType type;
    void* data;
    StackItem* next;
} StackItem;

typedef struct Stack
{
    StackItem* top;
} Stack;

Stack* allocateEmptyStack()
{
    Stack* S = malloc(sizeof(Stack));

    S->top = NULL;

    return S;
}

int isEmpty(Stack* S)
{
    if (S->top == NULL)
        return 1;

    return 0;
}

void freeStack(Stack* S)
{
    while (!isEmpty(S))
    {
        StackItem* item = top(S);
        pop(S);
        freeStackItem(item);
    }

    free(S);
}

StackItem* top(Stack* S)
{
    return S->top;
}

void pop(Stack* S)
{
    StackItem* topItem = top(S);

    if (topItem != NULL)
    {
        s->top = topItem->next;
    }
}

void push(Stack* S, StackItem* item)
{
    item->next = top(S);

     s->top = item;
}

StackItem* allocateStackItem(ItemType type, int dataSize)
{
    StackItem* item = malloc(sizeof(StackItem));

    item->data = malloc(dataSize);
    item->type = type;
    item->next = NULL;

    return item;
} 

void freeStackItem(StackItem* item)
{
    if (item->data != NULL)
        free(item->data);

    free(item);
} 
```

一个初始化`Stack`...的例子

```
Stack* S = allocateEmptyStack();

StackItem* item = allocateStackItem(STACK_INT, sizeof(int));
int* int_ptr = (int*)(item->data);
*int_ptr = 1234;

push(S, item);

const char* str = "this is a string";

item = allocateStackItem(STACK_STRING, strlen(str) + 1);
char* char_ptr = (char*)(item->data);
strcpy(char_ptr, str);

push(S, item); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:09:11.077

不要太苛刻，但这段代码无异于完全不连贯。我无法想象什么 valone = (float)topInt(S); 打算这样做，因为 valone 是一个 int。您似乎还将整数标识和字符串标识分配给堆栈的顶部元素。您从堆栈中弹出两个项目并最多推送一个。您 strcpy 到一个固定长度的缓冲区，而不检查您正在复制的字符串的大小，最后，如果您确实将一个字符串压入堆栈，您将推入局部变量地址，该地址在函数退出时将无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:04:39.840

没有更多细节很难理解，但看起来你正在做两次弹出和一次推送。你至少需要说出你的第二个。

# hadoop - java.lang.ClassNotFoundException：org.apache.hadoop.util.ProgramDriver

> ID：13074368
> 
> 赞同：0
> 
> 时间：2012-10-25T17:53:36.473
> 
> 标签：hadoop, mahout

我试图在我的本地系统上运行 mahout，当我运行“./bin/mahout”时，我得到了下面提到的错误。我要做的就是在没有 hadoop 的情况下运行 mahout 并尝试 20Newsgroup 示例。

我在核心、分发和示例目录中做了“mvn compile”和“mvn install -Dmaven.test.skip=true”。不知道我还缺少什么。我知道您可以在系统上不运行 Hadoop 的情况下运行 mahout。

感谢有人可以提供帮助。

```
hadoop binary is not in PATH,HADOOP_HOME/bin,HADOOP_PREFIX/bin, running locally
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/Users/Aanchal/mahout-distribution-0.7/mahout-examples-0.7-job.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/Users/Aanchal/mahout-distribution-0.7/lib/slf4j-jcl-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/Users/Aanchal/mahout-distribution-0.7/lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hadoop/util/ProgramDriver
    at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:96)
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.ProgramDriver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T12:21:58.610

添加这一行

```
CLASSPATH=${CLASSPATH}:$MAHOUT_HOME/lib/hadoop/hadoop-core-0.20.204.0.jar; 
```

到 mahout.sh/bat 文件中该部分的末尾

```
# add release dependencies to CLASSPATH
for f in $MAHOUT_HOME/lib/*.jar; do 
  CLASSPATH=${CLASSPATH}:$f; 
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:46:25.467

此异常表明在类路径中未找到该类，即我们正在尝试加载类定义并且包含该类的类/jar 在类路径中不存在。

请检查您的 PATH 和 HADOOP_HOME 配置并相应地更新这些变量。

# php - mcrypt 警告

> ID：13074371
> 
> 赞同：0
> 
> 时间：2012-10-25T17:53:44.503
> 
> 标签：php, mcrypt

我不断收到这些警告：

> 警告：mcrypt_generic_init(): mcrypt_generic_init(): 1 不是 C:\Users\dever\Desktop\web code\HeloWorld\HeloWorld\Crypt.php 第 123 行第 9 列中的有效 MCrypt 资源。
> 
> 警告：mdecrypt_generic(): mdecrypt_generic(): 1 不是 C:\Users\dever\Desktop\web code\HeloWorld\HeloWorld\Crypt.php 第 124 行第 9 列中的有效 MCrypt 资源。
> 
> 警告：mcrypt_generic_deinit(): mcrypt_generic_deinit(): 1 不是 C:\Users\dever\Desktop\web code\HeloWorld\HeloWorld\Crypt.php 第 125 行第 9 列中的有效 MCrypt 资源。
> 
> 警告：mcrypt_generic_init(): mcrypt_generic_init(): 1 不是 C:\Users\dever\Desktop\web code\HeloWorld\HeloWorld\Crypt.php 第 100 行第 9 列中的有效 MCrypt 资源。
> 
> 警告：mcrypt_generic(): mcrypt_generic(): 1 不是 C:\Users\dever\Desktop\web code\HeloWorld\HeloWorld\Crypt.php 第 105 行第 9 列中的有效 MCrypt 资源。
> 
> 警告：mcrypt_generic_deinit(): mcrypt_generic_deinit(): 1 不是 C:\Users\dever\Desktop\web code\HeloWorld\HeloWorld\Crypt.php 第 107 行第 9 列中的有效 MCrypt 资源。

由于这是一个警告并且字符串“似乎”被加密了，我一直忽略它直到现在。但是，我正在使用的远程服务器似乎不喜欢加密字符串并向我返回错误说明。

这是生成这些警告的代码：

```
 mcrypt_generic_init($this->_td, $this->_key, $iv);
    $data = mdecrypt_generic($this->_td, $data);
    mcrypt_generic_deinit($this->_td); 
```

和

```
$iv = mcrypt_create_iv(self::AES_BLOCK_SIZE, $random_source);
    $s = mcrypt_generic_init($this->_td, $this->_key, $iv);
    if( ($s < 0) || ($s === false))
        die( "Really an error" );
    $data = mcrypt_generic($this->_td, $data);
    $data = $iv.$data;
    mcrypt_generic_deinit($this->_td); 
```

我已经研究过，但无法找出这些警告的含义，如果它们影响加密/解密或究竟是什么问题？我很确定它不是代码（因为我让它在不同的服务器上工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:12:19.073

这是我执行的一个测试，它重现了您在`var_dump`s 中看到的值：

```
$td = mcrypt_module_open(MCRYPT_DES, '', MCRYPT_MODE_ECB, '/usr/lib/mcrypt-modes');
var_dump($td);
mcrypt_module_close($td);
var_dump($td); 
```

它打印：

```
resource(4) of type (mcrypt)
resource(4) of type (Unknown) 
```

由于您看到了相同的行为（资源 id 保持不变，但失去了`mcrypt`关联），您似乎在初始化`$this->_td`和实际调用`mcrypt_generic_init`.

# linux - 在 R 中捕获管道退出状态

> ID：13074372
> 
> 赞同：7
> 
> 时间：2012-10-25T17:53:47.290
> 
> 标签：linux, r, pipe, exit-code

我正在使用 R 的`pipe()`函数来捕获 shell 命令的输出，但我也想从命令中获取退出代码。

我知道我可以`system2`在这里使用，但我需要管道的优势，即以流方式处理输出的能力。

我正在考虑编写自己的库来包装`popen()`和`pclose()`C 函数，以利用`pclose()`返回退出状态的事实，但也许可以避免这种情况。

有什么建议么？谢谢！

**笔记**

当然有一些方法可以使用临时文件、命名管道等来做到这一点，但我最好避免使用这些变通方法。我愿意编译一个包含 R->C 函数的共享库（我什至愿意复制粘贴部分 R 源代码），但我不愿意重建 R。

**更新**

我开始阅读 R 源代码，发现未检查的 pclose 调用：

在`src/main/connections.c`：

```
static void pipe_close(Rconnection con)
{
    pclose(((Rfileconn)(con->private))->fp);
    con->isopen = FALSE;
} 
```

我尝试使用实现复制 R 代码但保存此返回值的`R_pclose`C 函数的方法。`close()`我不幸遇到了这个静态变量`src/main/connections.c`

```
static Rconnection Connections[NCONNECTIONS]; 
```

由于无论如何我都必须运行`objcopy --globalize-symbol=Connections libR.so /path/to/my/libR.so`才能访问该变量，看来我最好的解决方案是用我自己的补丁重建 R 以捕获 pclose 返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:43:51.743

丑陋的 hack：您可以将命令调用包装到一个小的 shell 脚本中，该脚本将其子级的退出代码写入某个临时文件。因此，当流结束时，您可以等到该文件具有非零大小，然后从那里读取状态。我希望有人提出更好的解决方案，但至少这是一种解决方案。

# javascript - 使用 Web Workers 进行异步画布绘图

> ID：13074381
> 
> 赞同：2
> 
> 时间：2012-10-25T17:54:09.040
> 
> 标签：javascript, html, web-applications, asynchronous, web-worker

所以，我正在制作一个相对简单的 HTML5 Canvas 绘图网络应用程序。基本上，您可以选择颜色，然后在 500x500 的画布上绘制。它将以“涂鸦”墙为主题，因此我尝试为绘图创建涂鸦效果，就像过去 MS Paint 中的喷涂工具一样。
随意看看[这里](http://kforge.shawnhanna.tk/cs1530/www/apps/graffiti_wall.html)。

为了促进这种效果，我使用 web worker 来回调鼠标事件并异步绘制到画布上。我现在的幼稚实现是，在任何鼠标事件上，都会在事件坐标周围随机绘制 5 个像素。

不过，我想做的是让这些像素从 mousedown 事件到 mouseup 事件连续绘制，同时更新 mousemove 事件的坐标。根据我对 JavaScript 的有限了解，我想这可能涉及 setTimeout()，但我不确定如何操纵它来实现我想要的。

免责声明：这是学校项目的一部分，因此我试图避免使用 JQuery、Ajax 和其他此类框架；我的目标是制作一个尽可能纯的 JavaScript/HTML5 网络应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:07:40.210

使用计时器（不需要工人）：

```
var mouseX = 0,
    mouseY = 0,
    mouseDown = false;

    function ev_canvas( ev ) {
        if (ev.offsetX || ev.offsetX == 0) { //opera
            mouseX = ev.offsetX;
            mouxeY = ev.offsetY;
        } else if (ev.layerX || ev.layerX == 0) { //firefox
            var canvasOffset = document.getElementById("graffiti_wall").getBoundingClientRect();
            mouseX = ev.layerX - canvasOffset.left;
            mouseY = ev.layerY - canvasOffset.top;
        }

        if ( ev.type == 'mousedown' ) {
            mouseDown = true;
        }
        else if ( ev.type == 'mouseup' ) {
            mouseDown = false;
        }
    }

    function draw_spray() {
        if( !mouseDown ) {
            //Don't do anything since the mouse is not pressed down
            return;
        }
        //Draw something at the last known location
        context.strokeRect( mouseX, mouseY, 1, 1 );
    }

    //Call draw_spray function continuously every 16 milliseconds
    window.setInterval( draw_spray, 16 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:40:08.573

如果您想使用 WebWorker（例如用于更复杂的绘图算法），我可以考虑以下设置：

*   onmousedown，产生一个新的工人并在其上注册一个处理程序，在画布上绘制对象
*   onmouseup（和 -leave 等），终止工人
*   onmousemove，如果存在工作人员，则确定鼠标坐标并将它们发送到工作人员

在工人

*   听新的鼠标坐标
*   启动一个持续触发绘图事件的超时间隔（取决于当前坐标和一个聪明的算法）

然而，我认为 Worker 对于一个简单的涂鸦工具来说开销太大了。使用没有像@Esailija 这样的 Worker 演示的简单解决方案。

如果您有一个更复杂的应用程序可以充分利用 Workers，您就不会真正在 onmousedown 上生成它们并终止它们。相反，您可能会为单一类型的工具实例化单个 Workers，并向它们触发开始处理和结束处理事件。

# jquery - 大于的直接后代选择器

> ID：13074382
> 
> 赞同：2
> 
> 时间：2012-10-25T17:54:15.887
> 
> 标签：jquery, css, jquery-selectors

我需要选择计数大于七的所有无序列表中的所有列表项。

这段代码：

```
$("ul.seven > li:gt(6)").hide() 
```

过于贪婪并且对于页面上的第一个无序列表可以正常工作，但隐藏了后续无序列表的所有后续列表项。什么是正确的选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:57:37.503

试试这个

```
$("ul.seven").each(function() {
    $(this).find("> li:gt(6)").hide();
}); 
```

或（本质上是一样的）

```
$("ul.seven").each(function() {
    $(this).children("li:gt(6)").hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:05:14.923

`:gt()`整理整个集合`ul.seven > li`并选择该组合集合中第六个之后的所有内容`li`，无论其父对象如何。这相当于选择所有这些`li`元素，然后`.slice()`对结果集执行 a：

```
$("ul.seven > li").slice(7).hide(); 
```

这与您的期望完全不同。

`:nth-child()`相反，您想要，它的[行为更像您对 CSS 简单选择器的期望](https://stackoverflow.com/questions/9983297/difference-between-css-selector-and-jquery-filter/10835694#10835694)：

```
$("ul.seven > li:nth-child(n+8)").hide(); 
```

`:nth-child(n+8)` means "starting from the 8th child based on a 1-index", which is roughly equivalent to `:gt(6)` which means "starting from the 7th match based on a 0-index" (confusing, I know). Compare the [Selectors spec for `:nth-child()`](http://www.w3.org/TR/selectors/#nth-child-pseudo), the [jQuery API documentation for `:gt()`](http://api.jquery.com/gt-selector) and the [jQuery API documentation for `.slice()`](http://api.jquery.com/slice).

# git - git 获取将对象添加到存储库数据库.git/objects 的权限不足？

> ID：13074389
> 
> 赞同：11
> 
> 时间：2012-10-25T17:54:36.143
> 
> 标签：git, permissions, file-permissions, git-fetch, directory-permissions

在我的主目录（在 Ubuntu 盒子上）的仓库中，我做了

```
 git fetch 
```

不幸的是，我遇到了一个错误：

```
 insufficient permission for adding an object to repository database .git/objects 
```

.git/objects 中有大量目录，所有目录似乎都是 775。我所做的几次抽查显示文件是 664。

我去做了一个

```
 chmod -R 777 .git/objects 
```

这解决了问题，但现在我的盒子上有一堆文件 777，我确定这是一个禁忌。

正确的权限应该是什么？如何轻松正确设置所有 1000 万个文件和目录？

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-25T18:00:30.853

您是所有文件的所有者吗？

尝试

```
chown -R you:you .git 
```

然后将它们更改为“正常”

```
chmod -R u=rwX,g=rwX,o= 
```

# javascript - 插入自定义滚动文本

> ID：13074390
> 
> 赞同：1
> 
> 时间：2012-10-25T17:54:40.113
> 
> 标签：javascript, css, web, integration

我已经下载并自定义了一个滚动条（带有文本），但我无法将它与我的网站集成。

基本上这是滚动条的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jQuery custom scrollbar demo</title>

<!-- Custom scrollbars CSS -->
<link href="jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="jquery.mCustomScrollbar.js"></script>
<script>
(function($){
$(window).load(function(){
$("#content_1").mCustomScrollbar({
scrollButtons:{
enable:true
}
});
});
})(jQuery);
</script>
</head> 
```

我需要用这个代码放入一个页面

```
<link rel="stylesheet" href="css/reset.css" type="text/css" media="all">
<link rel="stylesheet" href="css/style.css" type="text/css" media="all">
<link rel="stylesheet" href="css/layout.css" type="text/css" media="all">
<link rel="stylesheet" href="css/jquery.fancybox-1.3.4.css" type="text/css" media="all">
<link rel="icon" href="images/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<script type="text/javascript" src="js/jquery-1.7.1.js"></script>
<script type="text/javascript" src="js/jquery.easing.js"></script>
<script type="text/javascript" src="js/jquery.masonry.js"></script>
<script type="text/javascript" src="js/jquery.transform.js"></script>
<script type="text/javascript" src="js/jquery.animate-colors-min.js"></script>
<script type="text/javascript" src="js/jquery.fancybox-1.3.4.pack.js"></script>
<script type="text/javascript" src="js/forms.js"></script>
<script type="text/javascript" src="js/switcher.js"></script>
<script type="text/javascript" src="js/superfish.js"></script>
<script type="text/javascript" src="js/sprites.js"></script>
<script type="text/javascript" src="js/googleMap.js"></script>
<script type="text/javascript" src="js/scripts.js"></script> 
```

它给出了一个错误：

```
$("#content_1").mCustomScrollbar is not a function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:38:09.300

您需要将“jquery.mCustomScrollbar.js”添加到页面。和“jquery.mCustomScrollbar.css”得到相同的样式。

现在在第一行添加：

```
<link href="jquery.mCustomScrollbar.css" rel="stylesheet" type="text/css" /> 
```

您必须在运行 "$("#content_1").mCustomScrollbar()" 函数之前和 jquery 库之后添加 jquery 自定义滚动条。

```
<script src="jquery.mCustomScrollbar.js"></script> 
```

# android - 在 Android 应用程序中不使用 Facebook 或 Twitter API/SDK 的限制

> ID：13074394
> 
> 赞同：1
> 
> 时间：2012-10-25T17:54:50.710
> 
> 标签：android, facebook, api, twitter

我知道这是一个非常简单的问题，也非常广泛。但是我想在我的应用程序中实现 Facebook 和 Twitter。我只是想知道我是否一定要同时注册 Facebook 和 Twitter 以访问他们的 API，如果我不这样做，没有它我可以在我的应用程序中做的事情的数量是否有限制？

我希望能够在 Facebook 上分享状态、发布照片等，以及在 Twitter 上类似。

任何建议将不胜感激。首先十分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:59:00.153

您可以在不使用我们的 SDK 的情况下向 Facebook 分享非常有限的内容。使用 Android Intents 系统，您只能在 Facebook 上分享一个 URL，但不能为用户预填充消息。它看起来像这样

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, "http://www.mywebsite.com/");
startActivity(Intent.createChooser(intent, "Share with")); 
```

如果用户安装了这些应用程序，Facebook 和 Twitter 应显示为共享 URL 的选项。除此之外，您无能为力。但是，使用 SDK，您可以代表用户发布状态、发布照片等，但需要您注册才能访问 API。

# jquery - 以编程方式触发 jQuery UI 对话框上的事件

> ID：13074397
> 
> 赞同：1
> 
> 时间：2012-10-25T17:54:58.460
> 
> 标签：jquery, jquery-ui

我有一个 jQuery 对话框，我使用`open`回调通过 AJAX 加载一些数据。

例如：

```
$('#dialog').dialog({
    modal: true,
    autoOpen: false,
    open: function(){
        $('.content', this).load('/path/to/file', function(){
            // even more code
        });
        // more code
    }
}); 
```

虽然对话框已经打开，但我想通过 AJAX 重新加载数据。我想我可以触发`open`上面绑定的函数。[我在文档](http://docs.jquery.com/UI/API/1.8/Dialog#event-open)中读到您可以使用 绑定到该`open`事件`$(".selector").bind("dialogopen", function(event, ui){})`，所以我想我也可以通过这种方式触发该事件。

我试过`$('#dialog').trigger('dialogopen')`了，但什么也没发生。如何触发`open`jQuery 对话框的事件？

目前，我发现我可以使用`$('#dialog').dialog('option', 'open')()`，但这很难看，必须有更好的方法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:01:42.820

你可以重写你所拥有的`$('#dialog').dialog('option')['open']()`（再次丑陋）

可以美化为，

```
var $dOpt = $('#dialog').dialog('option'); 
```

接着

```
$dOpt.open(); 
```

**演示：http:** [//jsfiddle.net/bj4hK/2/](http://jsfiddle.net/bj4hK/2/)

* * *

我想你正在寻找`$('#dialog').dialog('open')` [http://jsfiddle.net/bj4hK/](http://jsfiddle.net/bj4hK/)

其他肮脏的技巧是关闭并重新打开。`$('#dialog').dialog('close').dialog('open')`<- 但是，如果您有一些代码，这会搞砸`onclose`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:01:25.487

为什么不直接在 open 事件中提取函数并在任何你想要的地方重用它呢？

```
$('#dialog').dialog({
    modal: true,
    autoOpen: false,
    open: function(){
        loadfunction()
    }
});

function loadfunction(){
  $('.content').load('/path/to/file', function(){
            // even more code
        });
        // more code
} 
```

所以你可以在`loadfunction`任何你想要的地方使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:02:42.780

在 jQuery UI 中，通过调用小部件名称并提供方法名称作为参数来调用方法。所以你可以这样做：

```
$('#dialog').dialog("open"); 
```

# c# - UCMA 3.0 如何建立收件人列表，然后向这些收件人广播 IM 呼叫

> ID：13074399
> 
> 赞同：1
> 
> 时间：2012-10-25T17:54:59.147
> 
> 标签：c#, lync, lync-2010, ucma

我正在使用 UCMA 3.0 开发一个应用程序，它将作为服务运行并以即时消息调用的形式定期发送“广播”。我一直在使用“[使用 Microsoft Lync Server 2010 进行专业统一通信开发](https://rads.stackoverflow.com/amzn/click/com/0470939036)”一书，并且已将所有内容都配置好并且能够建立应用程序端点。

我被困在两个方面。

**1)**如何获取 Lync 的所有用户的列表？UCMA 能做的一切都以单个用户为中心。例如，它允许我检索给定用户“联系人列表”中存在的所有联系人/组，但不提供任何方法来查询可以添加到其中一个联系人列表中的可用联系人列表。在 MSDN 论坛上，我发现这篇[文章](http://social.msdn.microsoft.com/Forums/en-US/ucmanagedsdk/thread/909ec99f-14f9-4c7a-b436-9fcc3ce1f085/)让我认为我最好的选择就是直接查询 AD。

**2)**实际发送广播式 IM 的最佳方式是什么？我的工作前提是尝试类似于我在此[代码示例](http://msdn.microsoft.com/en-us/library/lync/hh538496.aspx#FileName_uniquekeyword3)中找到的内容（特别是`public void SendIM()`方法）。

因此，从 AD 获取收件人列表（在每个上循环以检查当前存在？），然后使用自动化为集合中的每个收件人进行 IM 呼叫。

那有意义吗？我是否需要检查接收者是否在场，或者我是否只是乐观地拨打 IM 电话，而不管他们当前的状态如何？谁能给我指出一些演示发送 IM 广播的工作代码？您会认为这可能是最常见的用例之一，但 SDK 示例并未涵盖它。提前致谢。

**更新：** 正如 Lister 所说，没有“广播”方法。我不得不循环访问收件人并拨打电话为每个收件人发送即时消息。我发现我还需要检查收件人的存在状态，因为它也会尝试向离线、忙碌等用户发送消息，从而导致异常。最好只发送到某些存在状态。由于应用程序端点没有用户/组列表，您要么需要使用 AD 和目录服务来确定收件人，要么只需维护您自己的收件人列表。我最终编写了一个工作流，用户可以在其中向自动应用程序端点发送 IM 以选择加入或退出警报广播。该工作流维护一个简单的订阅者数据库表。

```
/// <summary>
/// Sending of the actual IM to broadcast subscribers.  Here we check that the presence of the target recipient
/// is in fact suitable for us to barge in with an alert.
/// </summary>
private void sendIMBroadcast(string sipTarget, byte[] htmlBytes)
{

    try {
        _appEndpoint.PresenceServices.BeginPresenceQuery(
            new List<string>() {sipTarget},
            new string[] {"state"},
            null,
            result =>
            {
                try 
                {
                    // Retrieve the results of the query.
                    IEnumerable<RemotePresentityNotification> notifications = _appEndpoint.PresenceServices.EndPresenceQuery(result);

                    // Grab the first notification in the results.
                    RemotePresentityNotification notification = notifications.FirstOrDefault();

                    if (notification == null)
                    {
                        logger.Warn("Invalid recipient for P1 broadcast: {0}", sipTarget);
                        return;
                    }

                    //ensure presense is one we want to send alert to
                    //if (notification.AggregatedPresenceState.AvailabilityValue )

                    long v = notification.AggregatedPresenceState.AvailabilityValue;
                    bool skip = false;
                    if (v >= 3000 && v <= 4499)
                    {
                        //online
                    }
                    else if (v >= 4500 && v <= 5999)
                    {
                        //idle online
                    }
                    else if (v >= 6000 && v <= 7499)
                    {
                        //busy
                        skip = true;
                    }
                    else if (v >= 7500 && v <= 8999)
                    {
                        //idle busy
                        skip = true;
                    }
                    else if (v >= 9000 && v <= 11999)
                    {
                        //dnd
                        skip = true;
                    }
                    else if (v >= 12000 && v <= 14999)
                    {
                        //brb
                        skip = true;
                    }
                    else if (v >= 15000 && v <= 17999)
                    {
                        //away
                        skip = true;
                    }
                    else if (v >= 18000)
                    {
                        //offline
                        skip = true;
                    }

                    if (skip == true)
                    {
                        logger.Debug("Skipping broadcast for user '{0}' due to presense status {1}.", sipTarget, v.ToString());
                        return;
                    }

                    logger.Debug("Sending broadcast for user '{0}' with presense status {1}.", sipTarget, v.ToString());

                    // Send an IM, create a new Conversation and make call
                    Conversation conversation = new Conversation(_appEndpoint);                     
                    InstantMessagingCall _imCall = new InstantMessagingCall(conversation);

                    try
                    {
                        ToastMessage toast = new ToastMessage("Unassigned P1 Tickets!");

                        // Establish the IM call.                 
                        _imCall.BeginEstablish(sipTarget,
                            toast,
                            new CallEstablishOptions(),
                            result2 =>
                            {
                                try
                                {
                                    // Finish the asynchronous operation.
                                    _imCall.EndEstablish(result2);

                                    _imCall.Flow.BeginSendInstantMessage(
                                        new System.Net.Mime.ContentType("text/html"),
                                        htmlBytes,
                                        ar =>
                                        {
                                            try
                                            {
                                                _imCall.Flow.EndSendInstantMessage(ar);
                                            }
                                            catch (RealTimeException rtex)
                                            {
                                                logger.Error("Failed sending P1 Broadcast Instant Message call.", rtex);
                                            }
                                        },
                                        null
                                    );
                                }
                                catch (RealTimeException rtex)
                                {
                                    // Catch and log exceptions.
                                    logger.Error("Failed establishing IM call", rtex);
                                }
                            },
                            null
                        );
                    }
                    catch (InvalidOperationException ioex)
                    {
                        logger.Error("Failed establishing IM call", ioex);
                    }

                }
                catch (RealTimeException ex)
                {
                    logger.Error("Presence query failed.", ex);
                }
            },
        null);
    }
    catch (InvalidOperationException ex) 
    {
        logger.Error("Failed accepting call and querying presence.", ex);
    }                 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T04:56:39.377

确实没有“广播 IM”，您几乎可以遍历从 AD 获得的 sip 地址列表并在每个 sip 地址上执行 BeginStartConversation

# mysql - MySQL UNIQUE 约束多列条件

> ID：13074400
> 
> 赞同：0
> 
> 时间：2012-10-25T17:55:07.867
> 
> 标签：mysql, sql, indexing, unique-constraint, unique-index

好吧，我有一个有 4 列（、、、、`id`）的表`event_id`，其中 id 是 PK，是FK，我的问题是：`group_id``isbn``event_id``group_id`

我需要 isbn 编号对于每个 都是唯一的`event_id`，让我给你一些应该可能的行和不应该行的示例：

```
 id | event_id | group_id | isbn
 (1,1,1,123) ok 
 (2,1,2,123) ok
 (3,1,4,123) ok
 (4,1,7,1234) ok
 (5,2,8,123) NOT OK, the 'isbn' must be unique for event_id('123' was already used in the first row with event_id = 1) 
```

每个`group_id`只出现一次`event_id`，但如果我用 3 列创建一个独特的约束，我将能够重复 isbn 只是改变`event_id`，而且我不希望这样，一旦`isbn`在 an 中使用`event_id`它就不能出现在另一个`event_id`中，一个`event_id`（比如说'1'）可以重复相同`ibsn`的时间，只要它需要每个`group_id`

我知道我多次重复这个问题，但这是一个棘手的问题，我想降低得到错误答案的机会

**EDIT1：关于@Andomar 的答案，isbn 必须通过基数 (1,n) 1-isbn -> n-group_id 与 group_id 相关，并且答案中的结构不这样做**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:50:24.817

What you describe is that `event_id` is dependant on the `isbn` . You need to normalize the table by splitting it into two:

**(Corrected):**

~~Remove~~ Keep `isbn` in this - and add a `FOREIGN KEY (event_id, isbn)` constraint to the second table, below:

```
id | event_id | group_id | isbn
 1      1          1        123 
 2      1          2        123
 3      1          4        123 
 4      1          7        1234
 5      2          8        123     --- not allowed by the FK constraint 
```

And create a new table with `isbn` as the primary key and a `UNIQUE (event_id, isbn)` key (and two foreign keys: `event_id` to `Event` table and `isbn` to (`Book`?), if you have a table where `isbn` is the primary or unique key):

```
event_id | isbn
   1        123 
   1       1234 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:57:55.200

为了保持`(event_id, isbn)`组合的唯一性：

```
create unique index UX_YourTable_EventIsbn on YourTable(event_id, isbn) 
```

根据评论，如果您希望每个 isbn 只有一个事件，您可以重新设计表关系。创建一个名为的表，该表`isbn`具有一个主键`isbn`和一个名为 的字段`event_id`。这样，一个 ISBN 可以有零个或一个与之关联的事件。

```
isbn          isbn primary key, event_id
other_table   id, event_id, group_id 
```

查询将在 isbns 中查找`isbn`表中的事件。

# vb.net - VB.NET Lambda 不调用方法

> ID：13074408
> 
> 赞同：1
> 
> 时间：2012-10-25T17:56:00.133
> 
> 标签：vb.net, linq, methods, lambda

我目前正在为一系列数据库结果集编写一个包装器对象。这样做时，我在使用*LINQ*和*Lambda*表达式进行查询时注意到了一个问题。具体来说，在 lambda 中调用方法似乎总是使结果集为空，并且从未真正触发我尝试过滤的方法。这是代码：

```
' Query and filter container results 
Public Function [Filter](pFilter As IFilter(Of T)) As System.Linq.IQueryable(Of T)
    ' THIS YIELDS AN EMPTY SET EVEN WHEN pFilter.Test(o) ALWAYS RETURNS TRUE
    Dim lResult As System.Linq.IQueryable(Of T) = mTable.Where(Function(o As T) pFilter.Test(o))

    Return lResult
End Function 
```

pFilter 使用此签名实现 IFilter：

```
Public Interface IFilter(Of T)
    Function Test(ByVal pObject As T) As Boolean
End Interface 
```

我已经断了点`pFilter.Test(o)`，发现它实际上从未被调用过。奇怪的是，如果我替换`pFilter.Test(o)`为 True，我会按预期收到整个记录表。此外，在任何情况下，我都没有收到编译时或运行时错误。

我对*Lambdas*和*LINQ*还很陌生，所以我完全认识到我可能不明白我试图完成的事情的局限性。任何帮助是极大的赞赏！

解决方案：我已经标记了一个解决方案，因为作者让我走上了正确的轨道。这个问题的真正本质源于我试图将 .NET 函数强制转换为 LINQ 可以转换为 SQL 语句的东西（这是不可能的）。为了解决这个问题，我将 IFilter 更改为返回 System.Linq.Expressions.Expression(Of Func(Of T, Boolean)) 用于 Test 方法。现在我可以创建强类型过滤器，它返回谓词并将它们直接传递给 Where() 而不使用 lambda 表达式。我还使用*LinqKit*让那些可能正在完成类似任务的人更轻松地完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:03:05.173

我想我发现了你的问题——理解 IQueryable 的概念。这是它在这篇文章中所说的：[使用 LazyList 进行延迟加载](http://wekeroad.com/2008/07/30/lazy-loading-with-the-lazylist)

> IQueryable 是 Linq To Sql 的基石，并且（我认为）是一个杀手级功能：延迟执行。IQueryable 本质上为您创建了一个表达式，您可以将其视为一个可枚举的列表 - 只有当您迭代或请求一个值时，才会执行查询。

所以你可能从来没有使用过这个结果，这就是为什么它从来没有被调用过。.NET框架只是为你构建了表达式树，并没有做任何处理。

另请参阅：[IQueryable 与 IEnumerable](https://stackoverflow.com/a/8947989/897326)。

# jquery - jquery插件caroufredsel隐藏下一个/上一个按钮，直到鼠标悬停轮播

> ID：13074410
> 
> 赞同：1
> 
> 时间：2012-10-25T17:56:08.083
> 
> 标签：jquery, carousel, caroufredsel

我正在尝试使按钮默认隐藏，并且仅在鼠标悬停时才可见。尽管我遇到了问题，即使我在 CSS 中设置了无显示，轮播核心代码似乎也在添加显示块。

```
var $slides = $("#slides");
$slides.find('ul.banners').eq(0).carouFredSel({
    height: 360,
    items: {
        visible: 1
    },
    scroll: {
        easing: "easeInOutSine",
        duration: 1200
    },
    auto: {
        delay: 1000
    },
    prev: {
        button: $slides.find('.prev'),
        items: 1
    },              
    next:{
        button: $slides.find('.next'),
        items: 1
    },
    pagination: {
        container: $slides.find(".pagination"),
        keys: true,
        anchorBuilder: function(nr) { 
            return '<li><a href="#"><span>'+nr+'</span></a></li>'; 
        }
    }
});
$slideButtons = $slides.find(".next,.prev");
$slides.find('ul.banners').hover(function(){
    $slideButtons.fadeIn();
},function(){
    $slideButtons.fadeOut();
}); 
```

HTML

```
<div id="slides">
    <ul class="banners">
        <li><img /></li>
        <li><img /></li>
    </ul>

    <ul class="pagination"></ul>

    <div class="next">Next</div>
    <div class="prev">Previous</div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T05:44:43.553

在css中尝试这种方式

```
 .next{
    display:none !important;
  }

  .prev{
     display:none !important;
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T04:41:59.027

确保最新的样式属性（即 html 中的最下方）是将可见性设置为无的属性。我认为添加到标签上的样式选项是最重要的。尝试将以下内容添加到您的标签中：

```
<tag style="visible:0;" ></tag> 
```

如果这可行，那么您知道这是您的问题，这可能是一种解决方案，因为 JavaScript 稍后可能会在鼠标悬停时更改样式。

如果您的所有包含都在标题中，则将您的 CSS 样式表（将可见性设置为无）移到其他样式表之后可能会有所帮助，但如果您的 JavaScript 包含在页面底部，您可能必须编辑 JavaScript或移动它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T16:59:07.723

这个插件使用精灵来实现翻转效果。我认为快速解决方法是对按钮进行 Photoshop 以降低不透明度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T08:20:45.490

您可以尝试覆盖配置。我添加`display: none,`到您的代码中。不过我还没有测试过。

```
$slides.find('ul.banners').eq(0).carouFredSel({
    height: 360,
    items: {
        visible: 1
    },
    scroll: {
        easing: "easeInOutSine",
        duration: 1200
    },
    auto: {
        delay: 1000
    },
    prev: {
        display: none,
        button: $slides.find('.prev'),
        items: 1
    },              
    next:{
        display: none,
        button: $slides.find('.next'),
        items: 1
    },
    pagination: {
        container: $slides.find(".pagination"),
        keys: true,
        anchorBuilder: function(nr) { 
            return '<li><a href="#"><span>'+nr+'</span></a></li>'; 
        }
    }
}); 
```

您的 CSS 样式表是否包含在插件之后？您可以在插件执行后尝试通过 CSS 和/或 jquery/javascript 覆盖。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-11T15:36:53.693

试试下面的一段代码：

```
$("#layout-main").hover(
    function(){
        $(".prev").fadeIn(500);
        $(".next").fadeIn(500);
        $(".pagination a").fadeIn(500);
    }, function(){
        $(".prev").fadeOut(500);
        $(".next").fadeOut(500);
        $(".pagination a").fadeOut(500);
    }
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-08T04:29:31.600

在 css 文件中使用这个简单的代码。

.carousel .carousel-control { 可见性：隐藏；} .carousel：悬停 .carousel-control { 可见性：可见；}

# objective-c - 编译器无法识别我的自定义类

> ID：13074416
> 
> 赞同：0
> 
> 时间：2012-10-25T17:56:35.023
> 
> 标签：objective-c, cocoa, header-files

这是我的 Board 头文件：

```
#import "Game.h"
#import <Foundation/Foundation.h>

@interface Board : UIView
{
    enum Piece;
}

- (void) setGame: (Game*) theGame; //<-- this is where the error is
typedef enum {X, O, NONE} Piece;
- (float)getSection;
@end 
```

编译器说“期望一个类型”并在 (Game*) 下划线。这里有什么问题？

* * *

游戏.h：

```
#import <Foundation/Foundation.h>
#import "Board.h"

@interface Game : UIViewController

- (void)boardwasTapped:(int) row:(int) column;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:59:53.423

不要导入您的标头，而是转发声明它。在 Board.m 中导入游戏标头

```
@class Game;

@interface Board : UIView {
...
}
...
@end 
```

另外，您确定问题不在于您的枚举吗？在声明它之前，您在标题中使用它。您应该在 @interface 块上方（外部）声明它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:28:51.323

棋盘导入游戏，游戏导入棋盘。所以你需要在 Board 中转发类 Game

```
@Class Game 
```

# google-chrome-devtools - 如何使用控制台获取样式

> ID：13074418
> 
> 赞同：2
> 
> 时间：2012-10-25T17:56:37.443
> 
> 标签：google-chrome-devtools

我有一个 div

```
<div class="blue>; 
```

蓝色类是：

```
 .blue {
          background-color: blue;
    } 
```

现在我知道我可以使用以下方法在控制台中设置 div 的背景颜色：

```
 $0.style.backgroundColor = "#ffcc00" 
```

但是，如果我想使用控制台获取该元素的背景颜色值怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:11:53.243

您可能需要计算样式：

```
var style = getComputedStyle(document.body, null); // Gets the style for a passed element and optional pseudo selecter (eg. :hover)
console.log(style.backgroundColor); 
```

需要注意的是，计算样式是渲染的结果。如果您对同一元素有多个规则，则只会显示已应用的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:07:26.863

你可以做 ：

```
var blue = document.getElementsByClassName('blue')[0];

blue.style.getPropertyCSSValue('background-color'); 
```

或者你这样做：

```
blue.style.getPropertyValue('background-color'); 
```

# javascript - pinterest是如何实现布局的？

> ID：13074420
> 
> 赞同：2
> 
> 时间：2012-10-25T17:56:52.623
> 
> 标签：javascript, html, css, html-lists

在 pinterest.com 中，div 具有可变长度，但行之间没有间隙。是否可以使用无序列表和 css 来获得这种效果？他们是否使用任何 JavaScript 来实现“紧凑”的外观？当我尝试它时，两行之间总是有一个间隙来容纳第一行中最高的 div ......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:00:26.757

它是通过github上的[jQuery Masonry完成的](http://masonry.desandro.com)[https://github.com/desandro/masonry](https://github.com/desandro/masonry)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T17:58:40.967

如果你使用 Firebug 或 Chrome 的 web 检查器，你会看到每个`.pin`div 都有一个绝对位置，这大概是用 JavaScript 设置的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T18:00:45.597

有很多 jQuery 插件可以存档。

我喜欢“Isotope - 一个用于神奇布局的精美 jQuery 插件”

[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

# c# - C# 等效于 MessageBoxA(HWND_DESKTOP, msg, "Alarm", MB_OK | MB_ICONWARNING | MB_SYSTEMMODAL | MB_SETFOREGROUND);

> ID：13074421
> 
> 赞同：1
> 
> 时间：2012-10-25T17:56:58.663
> 
> 标签：c#, c++, .net, winforms, winapi

我正在用 C# 编写一个警报程序，它在指定时间显示一个带有用户指定消息的系统模式对话框。但是，我似乎找不到 C# 等价物

```
MessageBoxA(HWND_DESKTOP, msg, "Alarm",
   MB_OK | MB_ICONWARNING | MB_SYSTEMMODAL | MB_SETFOREGROUND); 
```

**编辑：**我正在尝试学习 C# 和 .NET 库。我认为编写与我用 C 或 C++ 编写的一些小程序等效的程序是一个不错的起点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:25:49.480

只需使用您在标题中提到的API ...

```
[System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)]
public struct HWND__ {

    /// int
    public int unused;
}

public partial class NativeMethods {

    /// Return Type: int
    ///hWnd: HWND->HWND__*
    ///lpText: LPCSTR->CHAR*
    ///lpCaption: LPCSTR->CHAR*
    ///uType: UINT->unsigned int
    [System.Runtime.InteropServices.DllImportAttribute("user32.dll", EntryPoint="MessageBoxA")]
    public static extern  int MessageBoxA([System.Runtime.InteropServices.InAttribute()] System.IntPtr hWnd, [System.Runtime.InteropServices.InAttribute()][System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.LPStr)] string lpText, [System.Runtime.InteropServices.InAttribute()] [System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.LPStr)] string lpCaption, uint uType) ;

}

public partial class NativeConstants {

    /// MB_SETFOREGROUND -> 0x00010000L
    public const int MB_SETFOREGROUND = 65536;

    /// MB_SYSTEMMODAL -> 0x00001000L
    public const int MB_SYSTEMMODAL = 4096;

    /// MB_ICONWARNING -> MB_ICONEXCLAMATION
    public const int MB_ICONWARNING = NativeConstants.MB_ICONEXCLAMATION;

    /// MB_OK -> 0x00000000L
    public const int MB_OK = 0;

    /// MB_ICONEXCLAMATION -> 0x00000030L
    public const int MB_ICONEXCLAMATION = 48;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:02:52.850

像这样的东西应该适合你：

```
MessageBox.Show("text", "caption", MessageBoxButtons.OK, MessageBoxIcon.Warning); 
```

在 MSDN 上了解更多信息：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.show.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.show.aspx)

**编辑：** 就像另一种想法一样，这将创建屏幕大小的形式，并通过阻止屏幕上的所有其他内容来显示消息框，直到您关闭该消息框。

```
internal class TransparentWholeScreen: Form
{
    public TransparentWholeScreen()
    {
        Size = Screen.PrimaryScreen.Bounds.Size;
        TopMost = true;
        FormBorderStyle = FormBorderStyle.None;
        SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        BackColor = Color.Transparent;
        Shown += OnShown;
    }

    private void OnShown(object sender, EventArgs e)
    {
        var dialogResult = MessageBox.Show("text", "caption", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        if(dialogResult == DialogResult.OK)
        {
            Close();
        }
    }
} 
```

只需在闹钟时间结束时添加以下代码：

```
 var backGroundForm = new TransparentWholeScreen();
    backGroundForm.ShowDialog(this); 
```

老实说，我不喜欢这个解决方案，除了它不会作为可以杀死进程的人的警报:)

# jquery - 使用 jQuery 更改悬停时的当前图像

> ID：13074423
> 
> 赞同：0
> 
> 时间：2012-10-25T17:56:58.957
> 
> 标签：jquery, html, css, jquery-hover

我目前正在构建的新网站上有一个展示。在展示中将鼠标悬停在图像上时，我想给它一些 jQuery 效果。我将当前项目悬停在一个额外的类上。然后我给悬停类中的另一个类提供向下滑动的动作。在下面查看我的代码。

```
$(".itemContainer").hover(
  function () {
    $(this).addClass('itemHover');
  }, 
  function () {
    $(this).removeClass('itemHover');
  }
 );

$('.image-hover-over').mouseover(
  function () {
    $('.itemHover .image-hover-bg').slideDown();
  }
); 
```

问题是在第二次鼠标悬停时，他似乎还没有识别 .itemHover 。因为当我执行以下操作时，它有效，但适用于所有项目。

```
$('.image-hover-bg').slideDown(); 
```

之后它似乎也可以与 .itemHover 一起使用，但第一次它没有，我尝试了很多并搜索了网络但无法获得任何有用的提示。

谁能告诉我如何给我悬停的项目一些效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:59:37.250

您应该在 hover() 处理程序中执行 slideDown() 。您不必为鼠标悬停定义处理程序。

# java - 如何在 JTextPane 中将每个字符设置为不同的颜色/背景颜色？

> ID：13074428
> 
> 赞同：9
> 
> 时间：2012-10-25T17:57:21.307
> 
> 标签：java, swing, jtextpane, jtextcomponent, styleddocument

我一直在寻找这个，到目前为止，我所能想到的就是如何创建一种样式并将其应用于这样的角色：

```
StyledDocument doc = (StyledDocument) new DefaultStyledDocument();
JTextPane textpane = new JTextPane(doc);
textpane.setText("Test");
javax.swing.text.Style style = textpane.addStyle("Red", null);
StyleConstants.setForeground(style, Color.RED);
doc.setCharacterAttributes(0, 1, textpane.getStyle("Red"), true); 
```

如果您的文档中只有几个样式并且想要按名称存储它们以便以后可以轻松地应用它们，这将非常有用。在我的应用程序中，我希望能够为文本中的每个字符独立设置前景色（少数几个值之一）和背景色（灰度，许多不同的值）。为此创造可能成百上千的不同风格似乎是一种巨大的浪费。有没有办法设置这些属性而不必每次都创建新样式？如果我只需要渲染文本会容易得多，但我还需要使其可编辑。有没有办法做到这一点`JTextPane`，或者是否有另一个提供此功能的摇摆类？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-25T21:41:11.063

如果您想更改文本窗格中每个字符的样式，这里有一个完全随机的方法。您为每个角色创建不同的属性集。由您来找到合适的组合（前景/背景对比，字符大小没有太大差异等......）。您还可以存储已应用的不同样式，这样您就不会重复使用相同的样式。

![在此处输入图像描述](../Images/1b49307a0c0ce0d3a9c2893806967967.png)

```
import java.awt.Color;
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class TestDifferentStyles {
    private void initUI() {
        JFrame frame = new JFrame(TestDifferentStyles.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        StyledDocument doc = new DefaultStyledDocument();
        JTextPane textPane = new JTextPane(doc);
        textPane.setText("Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has "
                + "been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of "
                + "type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the "
                + "leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the"
                + " release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing "
                + "software like Aldus PageMaker including versions of Lorem Ipsum.");

        Random random = new Random();
        for (int i = 0; i < textPane.getDocument().getLength(); i++) {
            SimpleAttributeSet set = new SimpleAttributeSet();
            // StyleConstants.setBackground(set, new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));
            StyleConstants.setForeground(set, new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));
            StyleConstants.setFontSize(set, random.nextInt(12) + 12);
            StyleConstants.setBold(set, random.nextBoolean());
            StyleConstants.setItalic(set, random.nextBoolean());
            StyleConstants.setUnderline(set, random.nextBoolean());

            doc.setCharacterAttributes(i, 1, set, true);
        }

        frame.add(new JScrollPane(textPane));
        frame.setSize(500, 400);
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestDifferentStyles().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T20:22:19.693

我不确定你的意思，但是你不能遍历每个字符，`JtextPane`并且在该循环中遍历你想要突出显示的所有字母/字符等。有一个*if*语句检查字符，然后`Style`相应地设置。

这是我制作的一个示例，出于演示目的，我仅对字符*h*和*w实现了它：*

![在此处输入图像描述](../Images/4637f85d7e759a6d1896abf2f983906e.png)

```
//necessary imports
import java.awt.Color;
import java.util.ArrayList;
import javax.swing.JFrame;
import javax.swing.JTextPane;
import javax.swing.text.DefaultStyledDocument;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class Test {

    /**
     * Default constructor for Test.class
     */
    public Test() {
        initComponents();
    }

    public static void main(String[] args) {

        /**
         * Create GUI and components on Event-Dispatch-Thread
         */
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Test test = new Test();
            }
        });
    }

    /**
     * Initialize GUI and components (including ActionListeners etc)
     */
    private void initComponents() {
        JFrame jFrame = new JFrame();
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        StyledDocument doc = (StyledDocument) new DefaultStyledDocument();
        JTextPane textPane = new JTextPane(doc);
        textPane.setText("Hello, world! :)");

        //create necessary styles for various characters
        javax.swing.text.Style style = textPane.addStyle("Red", null);
        StyleConstants.setForeground(style, Color.RED);
        javax.swing.text.Style style2 = textPane.addStyle("Blue", null);
        StyleConstants.setForeground(style2, Color.BLUE);

        //create array of characters to check for and style
        String[] lettersToEdit = new String[]{"h", "w"};

        //create arraylist to hold each character in textPane
        ArrayList<String> strings = new ArrayList<>();

        //get all text
        String text = textPane.getText();

        //populate arraylist
        for (int i = 0; i < text.length(); i++) {
            strings.add(text.charAt(i) + "");
        }

        //declare variabe to hold position
        int position = 0;

        for (String s1 : strings) {//for each character in the textpane text
            for (String s2 : lettersToEdit) {//for each character in array to check (lettersToEdit)
                if (s2.toLowerCase().equalsIgnoreCase(s1)) {//if there was a match

                    System.out.println("found a match: " + s1);
                    System.out.println("counter: " + position + "/" + (position + 1));

                    //check which chacacter we matched
                    if (s1.equalsIgnoreCase(lettersToEdit[0])) {
                        //set appropriate style
                        doc.setCharacterAttributes(position, 1, textPane.getStyle("Red"), true);
                    }
                    if (s1.equalsIgnoreCase(lettersToEdit[1])) {
                        doc.setCharacterAttributes(position, 1, textPane.getStyle("Blue"), true);
                    }
                }
            }
            //increase position after each character on textPane is parsed
            position++;
        }

        jFrame.add(textPane);
        //pack frame (size JFrame to match preferred sizes of added components and set visible
        jFrame.pack();
        jFrame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T20:55:40.790

我认为你必须这样做的最好方法就像我们在具有突出显示的编辑器中使用的那样，不是追逐字符，而是有一个模式，例如：

```
private static HashMap<Pattern, Color> patternColors;
private static String GENERIC_XML_NAME = "[A-Za-z]+[A-Za-z0-9\\-_]*(:[A-Za-z]+[A-Za-z0-9\\-_]+)?";
private static String TAG_PATTERN = "(</?" + GENERIC_XML_NAME + ")";
private static String TAG_END_PATTERN = "(>|/>)";
private static String TAG_ATTRIBUTE_PATTERN = "(" + GENERIC_XML_NAME + ")\\w*\\=";
private static String TAG_ATTRIBUTE_VALUE = "\\w*\\=\\w*(\"[^\"]*\")";
private static String TAG_COMMENT = "(<\\!--[\\w ]*-->)";
private static String TAG_CDATA = "(<\\!\\[CDATA\\[.*\\]\\]>)";

private static final Color COLOR_OCEAN_GREEN = new Color(63, 127, 127);
private static final Color COLOR_WEB_BLUE = new Color(0, 166, 255);
private static final Color COLOR_PINK = new Color(127, 0, 127);

static {
    // NOTE: the order is important!
    patternColors = new LinkedHashMap<Pattern, Color>();
    patternColors.put(Pattern.compile(TAG_PATTERN), Color.BLUE); // COLOR_OCEAN_GREEN | Color.BLUE
    patternColors.put(Pattern.compile(TAG_CDATA), COLOR_WEB_BLUE);
    patternColors.put(Pattern.compile(TAG_ATTRIBUTE_PATTERN), COLOR_PINK);
    patternColors.put(Pattern.compile(TAG_END_PATTERN), COLOR_OCEAN_GREEN);
    patternColors.put(Pattern.compile(TAG_COMMENT), Color.GRAY);
    patternColors.put(Pattern.compile(TAG_ATTRIBUTE_VALUE), COLOR_OCEAN_GREEN); //Color.BLUE | COLOR_OCEAN_GREEN
}

public XmlView(Element element) {

    super(element);

    // Set tabsize to 4 (instead of the default 8).
    getDocument().putProperty(PlainDocument.tabSizeAttribute, 4);
} 
```

# c - 如何评估嵌套的预处理器宏

> ID：13074432
> 
> 赞同：6
> 
> 时间：2012-10-25T17:57:41.220
> 
> 标签：c, gcc, macros, evaluation

假设我想选择某个预处理器指令的行为，该指令在编译时评估常量字符串的连接和另一个宏的结果。

```
#define CASE1 text1
#define CASE2 text2
#define CASE3 text3
#define SCENARIO 3
/** the following won't work - for examplification purposes only**/
#define FUNCTION CASE##SCENARIO

/** whenever I write FUNCTION, I expect to see text3 **/ 
```

我很难想出一个可行的解决方案，因为预处理器是一次性的野兽。这甚至可行吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-25T18:04:54.643

有可能，您只需要添加一些额外的宏层。关键是当你使用标记粘贴操作符`##`时，预处理器不会扩展它的操作数。但是，如果您添加另一层宏，预处理器将扩展这些参数。例如：

```
#define CASE1 text1
#define CASE2 text2
#define CASE3 text3
#define SCENARIO 3

#define TOKENPASTE_HELPER(x, y) x ## y
#define TOKENPASTE(x, y) TOKENPASTE_HELPER(x, y)
#define FUNCTION TOKENPASTE(CASE, SCENARIO) 
```

当预处理器扩展`FUNCTION`时，它会扩展`TOKENPASTE`。当它展开时`TOKENPASTE`，它展开它的参数（因此`SCENARIO`被替换`3`），因为它的两个参数都不是标记粘贴运算符的操作数。接下来，它展开`TOKENPASTE_HELPER`，将实际的令牌粘贴到 make `CASE3`。最后，它扩展`CASE3`宏以获得`text3`.

# wxwidgets - 使用 WxWidgets，wxTextCtrl 是万能的吗？

> ID：13074433
> 
> 赞同：0
> 
> 时间：2012-10-25T17:57:44.727
> 
> 标签：wxwidgets

在使用不同类型的 gui 时，我习惯于区分文本字段或文本输入框与文本框。也就是说，多行文字处理器样式的文本框有一种类型的对象，而单行的另一种类型的对象，通常是不可滚动的文本字段/文本输入框。wxTextCtrl 是否满足这两个目的？我知道它是文本框，但它也是文本字段/文本输入框的正确选择吗？

**编辑** 实际上有两种类型的文本框用于多行输入，如答案中所指出的。我真正感兴趣的是特定于单行输入的小部件与特定于多行输入的小部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:02:35.700

wxTextCtrl 用于单行和多行输入。它非常强大，但不完全是“文字处理器风格”。更接近于 wxRichTextCtrl。

wxComboBox 使用 wxTextEntry（与单行模式下的 wxTextCtrl 一样）。尽管 wxTextEntry 本身不是作为控件提供的——它不是从 wxControl 继承的——如果你非常喜欢它，你也许可以使用它来构建一些东西。但是对于我看不到的好处来说，这似乎是很多麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:52:29.660

`wxTextCtrl`默认情况下是单行文本控件（在其他框架中称为“条目”）。如果`wxTE_MULTILINE`在创建的时候指定了样式（这个样式以后不能改），它就变成了——惊喜——多行控件，也就是其他地方所谓的“区域”。

# c++ - 从 AllocConsole C++ 获取行输入

> ID：13074435
> 
> 赞同：5
> 
> 时间：2012-10-25T17:57:48.037
> 
> 标签：c++, winapi, visual-c++, console, stdin

一位团队成员将[以下代码](http://dslweb.nwnexus.com/~ast/dload/guicon.htm "将控制台 I/O 添加到 Win32 GUI 应用程序")添加到我们的 GUI Ogre 项目中以添加控制台（以便我们能够在调试时看到 cout...

我们现在落后于时间，我们需要与游戏进行文本交互，我打算制作一个控制台，但这似乎是一个很大的时间漏洞......所以我想嘿！为什么不使用他附加的控制台！不幸的是，我在尝试时无法输入，因此我无法向控制台发送命令：\

有什么方法可以写入控制台（atm 如果您按任何键（例如'a'），他的操作方式是什么）没有任何东西进入控制台，因此我不能等待输入然后调整输入的字符串进入win32控制台）

这是他的代码（我还添加了链接封装somone有一个粗略的想法，但他们想再次阅读它，我不知道他遵循的确切指南，但它非常相似）

```
void showWin32Console()
{
    static const WORD MAX_CONSOLE_LINES = 1000;
    int hConHandle;
    long lStdHandle;
    CONSOLE_SCREEN_BUFFER_INFO coninfo;
    FILE *fp;

    // allocate a console for this app
    AllocConsole();

    // set the screen buffer to be big enough to let us scroll text
    GetConsoleScreenBufferInfo(GetStdHandle(STD_OUTPUT_HANDLE), &coninfo);
    coninfo.dwSize.Y = MAX_CONSOLE_LINES;
    SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE), coninfo.dwSize);

    // redirect unbuffered STDOUT to the console
    lStdHandle = (long)GetStdHandle(STD_OUTPUT_HANDLE);
    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);
    fp = _fdopen( hConHandle, "w" );
    *stdout = *fp;
    setvbuf( stdout, NULL, _IONBF, 0 );

    // redirect unbuffered STDIN to the console
    lStdHandle = (long)GetStdHandle(STD_INPUT_HANDLE);
    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);
    fp = _fdopen( hConHandle, "r" );
    *stdin = *fp;
    setvbuf( stdin, NULL, _IONBF, 0 );

    // redirect unbuffered STDERR to the console
    lStdHandle = (long)GetStdHandle(STD_ERROR_HANDLE);
    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);
    fp = _fdopen( hConHandle, "w" );
    *stderr = *fp;
    setvbuf( stderr, NULL, _IONBF, 0 );

    // make cout, wcout, cin, wcin, wcerr, cerr, wclog and clog
    // point to console as well
    std::ios::sync_with_stdio();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T09:22:16.687

AllocConsole() 只是给你一个新的控制台，它不会改变现有的标准输入/标准输出 - 所以你从 GetStdHandle 返回的句柄仍然是它们以前的值。相反，您必须打开特殊设备“CONIN$”/“CONOUT$”。事实证明，使用 freopen 将 stdin/stdout 重新分配给这个新控制台实际上相当简单：

```
BOOL f = AllocConsole();
freopen("CONIN$", "r", stdin);
freopen("CONOUT$", "w", stdout);
freopen("CONOUT$", "w", stderr); 
```

...然后，所有对标准输入或输出的进一步访问现在都将转到您的新控制台。

（顺便说一下，这不会改变 Win32 对标准输入/输出句柄的看法，所以如果在调用 GetStdHandle(STD_INPUT_HANDLE) 等而不是使用 CRT 的 stdio 的过程中碰巧有其他代码，那些将仍然返回与新控制台无关的原始值。如果您也需要更改这些值，那么您可能需要手动打开 CONIN$/CONOUT$ 并使用 SetStdHandle 修复这些值。）

# c# - 数据模板内的访问控制

> ID：13074439
> 
> 赞同：0
> 
> 时间：2012-10-25T17:57:59.050
> 
> 标签：c#, wpf, xaml

相关：上一个问题 [将不同的点击处理程序分配给全局控件模板](https://stackoverflow.com/questions/13071442/assigning-different-click-handlers-to-a-global-control-template#comment17756609_13071442)

我有以下 xaml：

```
<Expander Name="SharesExpander" Template="{StaticResource SimpleExpanderTemp}" Header="Shares">
    <ItemsControl Name="SharesControl" ItemsSource="{Binding Sharers}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Expander Name="ShareExpander" Template="{StaticResource SimpleExpanderTemp}" Header="{Binding Name}">
                    <local:FileTypesListBoxControl Margin="25,-10,-10,-10" BorderThickness="10" />
                </Expander>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Expander> 
```

我正在尝试通过后面的代码访问内部扩展器的标题按钮以添加单击处理程序。

我可以使用 检索外部扩展器的按钮`SharesExpander.Template.FindName("ExpanderHeader", SharesExpander)`，但我不知道如何在数据模板中获取内部扩展器。我试过遍历`VisualTree`and `LogicalTree`，但我似乎总是回到外部扩展器。我可以检索外部扩展器数据模板，并且可以调用`FindName`它，但无法确定将哪个元素用作第二个参数。帮助！

一次尝试：

```
foreach (var item in SharesControl.Items)
{
    //test is always null
    var test = SharesControl.ItemContainerGenerator.ContainerFromItem(item);
} 
```

另一种尝试：

```
ControlTemplate controlTemplate = SharesControl.Template;
var control = controlTemplate.FindName("ShareExpander", ?whatGoesHere); 
```

再次：

```
for (int i = 0; i < 1; i++)
{
    //test again always null
    var test = ContactSharesItemsControl.ItemContainerGenerator.ContainerFromIndex(i) as Expander;
} 
```

# xcode - 如何在单元格中添加按钮以打开链接

> ID：13074440
> 
> 赞同：0
> 
> 时间：2012-10-25T17:58:07.210
> 
> 标签：xcode, url, uitableview

我想在单元格中创建一个打开 URL 的按钮。我试着像往常一样做到这一点，但它不起作用。我有自定义单元格，其中包含 .h/.m 文件和 UIViewController 中的 tableView。我把代码放在哪里了？这个代码会起作用吗？

```
- (IBAction)site:(id)sender {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.vk.com"]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:02:07.223

现在您只需要将按钮目标连接到此 IBAction。转到 Interface Builter，右键单击文件所有者或应用程序委托，具体取决于您的设置方式。然后您应该会看到站点 IBAction，只需将其拖到按钮上即可。

只需将代码添加到当前视图控制器。

# python - 导入随机时出现AttributeError

> ID：13074443
> 
> 赞同：-2
> 
> 时间：2012-10-25T17:58:32.030
> 
> 标签：python, random, import, attributeerror

我在将随机导入我的 python 程序时遇到了一些问题。我已经阅读了关于这个主题的其他线程，对于其他人来说，它似乎源于名为 random.py 的文件。

我的文件未命名为 random.py。我使用 print( **random.file** ) 来查看它是从哪里导入的，它似乎是从 C:\Python27\lib\random.pyc 导入的

我已尝试将该文件移出文件夹，但仍然无法正常工作。

这是错误：

```
Traceback (most recent call last):
  File "C:/Python27/Projects/Test.py", line 4, in <module>
    r1 = random.randomint(20,400)
AttributeError: 'module' object has no attribute 'randomint' 
```

我还在 powershell 和解释器中进行了测试。

这是代码片段：

```
import random
import getpass

r1 = random.randomint(20,400)
r2 = random.randomint(20,400)
p = getpass.getpass(prompt='Please enter the correct value: %d * %d: ' %(r1,r2))

if p == (r1*r2):
    print "Correct"
else:
    print "Incorrect" 
```

谁能帮我吗？

编辑：我是个白痴。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T18:01:11.993

函数的正确名称`random.randint`不是`random.randomint`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:00:22.663

```
>> import random
>> random.randint(20,400)
76 
```

`AttributeError`引发函数拼写错误的原因。您应该使用`randint`而不是`randomint`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T11:05:41.750

哈我也有这个..我写了一个python文件来生成随机数......但称之为random.py所以它不起作用！......一旦我重命名它并删除了random.pyc它工作正常

# ios - 如何中断 viewWillAppear 层次结构

> ID：13074449
> 
> 赞同：1
> 
> 时间：2012-10-25T17:58:49.247
> 
> 标签：ios, uiviewcontroller, viewwillappear

我有一个`rootViewController`，在它的方法中，我将另外两个对象和它们的视图`viewDidLoad`初始化为的子视图，然后我先设置。`ViewController2*``rootViewController.view``ViewController2* controller.view.hidden = YES`

然后，在 v1 上有一个按钮处理程序，当触摸它时，它会呈现一个 UINavigationController，然后在 v1 上触摸“关闭”按钮调用`dismissViewControllerAnimated`。

问题是：当dismiss完成时，两个`ViewController2*`fire `viewWillAppear`。如何让它只`viewWillAppear`在可见的那个上开火，而不是在隐藏的那个上开火？

的`rootViewController`实现：

```
@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

self.v1 = [[ViewController2 alloc] init];
self.v1.title = @"v1";
[self.view addSubview:self.v1.view];
self.v1.view.hidden = YES;

self.v2 = [[ViewController2 alloc] init];
self.v2.title = @"v2";
[self.view addSubview:self.v2.view];

UIButton * btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[btn setTitle:@"POP" forState:UIControlStateNormal];
[btn sizeToFit];
[btn addTarget:self action:@selector(touchHandler:) forControlEvents:UIControlEventTouchDown];
[self.view addSubview:btn];
}

- (void)touchHandler:(id)sender {
UINavigationController * nc= [[UINavigationController alloc] initWithRootViewController:[[UIViewController alloc] initWithNibName:nil bundle:nil]];

((UIViewController *)[nc.viewControllers objectAtIndex:0]).navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"dismiss" style:UIBarButtonItemStyleBordered target:self action:@selector(dismissHandler:)];

[self presentViewController:nc animated:YES completion:nil];
}

- (void) dismissHandler:(id)sender
{
[self dismissViewControllerAnimated:YES completion:nil];
}
@end 
```

视图控制器2：

```
@implementation ViewController2
- (void)viewWillAppear:(BOOL)animated
{
NSLog(@"%@",self.title);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:25:41.150

很简单，调用这些方法的原因是因为 viewController 的视图是主窗口视图层次结构的一部分。这意味着它有一个 superview 有一个 superview 有一个 superview 等等，直到这个 superview 是主窗口。与其隐藏和取消隐藏 viewController 视图，不如在其父视图中添加和删除它们。此外，为了确保在正确的时间正确调用 viewWillAppear 和 viewDidAppear，请查看 ViewController Containment： [http ://www.cocoanetics.com/2012/04/ contains-viewcontrollers/](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:03:54.147

viewWillAppear 将在您的 UIViewController 上触发，即使视图控制器视图设置为 hidden=YES。

如果您想防止发生一些昂贵的操作，您当然可以在您的 viewWillAppear 委托方法中测试 if (self.view.hidden == YES)，但请注意，如果您稍后取消隐藏该视图，该 viewWillAppear 将不会触发然后。

# jquery - 用户滚动到顶部并在那里停留一段时间

> ID：13074451
> 
> 赞同：0
> 
> 时间：2012-10-25T17:59:07.063
> 
> 标签：jquery, scrolltop

我想用 jQuery 来

*   检测用户是否滚动到页面顶部，并且
*   在那里呆了一段时间。

我已经设法使用下面的代码获得第一点，但对第二点一无所知。

```
$(window).scroll(function() {
   if($(window).scrollTop()  == 0) {
   // do something
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:04:15.713

所以基本上你可以做一个 setTimeout，然后如果他们再次滚动就清除超时。例如：

```
var timer;

$(window).scroll(function() {
  if($(this).scrollTop() === 0) {
    timer = setTimeout( doSomething, 2000 );
  } else {
    clearTimeout(timer);
  }
});

var doSomething = function(){
  alert('I just sat at the top for two seconds!');
}; 
```

工作示例：http: [//jsfiddle.net/dXRhb/2/](http://jsfiddle.net/dXRhb/2/)

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:04:31.500

如果用户向下滚动页面，则清除超时。否则它将在 1000 毫秒后调用函数（您可以根据您的要求进行设置）。

```
var c;
$(window).scroll(function() {
 if($(window).scrollTop()  == 0) {
    c = setTimeout(function(){
       // do stuff
     }, 1000);
 }
 else{
     clearTimeout(c);
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:02:31.780

```
var myTimer; // Global variable

$(window).scroll(function() 
{
  if($(window).scrollTop()==0) 
  {
      myTimer = setTimeout(function() { 
          /* what you want to happen goes here */
      }, 
      1000) // Time in milliseconds
  } 
  else 
  {
    clearTimeout(myTimer);
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:19:00.487

没有全局变量怎么办？

```
$(window).on('scroll', function() {
 if ($(this).scrollTop() === 0) {
    $(this).data('scrollTimer', 
        setTimeout(function(){
            // do stuff
        }, 1000)
    );
 }
 else{
     clearTimeout($(this).data('scrollTimer'));
  }
}); 
```

# c++ - 在 Xcode 4 中编写 C++

> ID：13074452
> 
> 赞同：3
> 
> 时间：2012-10-25T17:59:27.257
> 
> 标签：c++, xcode, stdafx.h

我正在尝试学习 C++，但我不是 Windows 的粉丝，因此使用**Visual Studio**并不理想。不过，我的 Mac 上有**Xcode**。

我在 Visual Studio 中用 C++ 编写了一个程序，它运行良好。当我将代码传输到 Xcode（使用 c++ 工具环境）时，它仍然可以正常工作，但它不喜欢顶部的 #include 语句。为什么？

```
#include "stdafx.h"
#include <stdlib.h>
#include <iostream>
#include <time.h> 
```

`<...>`此外，如果我使用它而不是它仍然不喜欢它`"..."` 不会影响我可以看到的当前程序。

基本上我想知道它的重要性是什么？我是否或将来需要它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T18:01:44.207

stdafx.h 是一个 windows (visual studio) 相关的头文件。只需将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:01:51.243

`stdafx.h`是 Visual Studio 的预编译头帮助程序。只需将其删除。Xcode 有自己的方式来处理预编译的头文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:02:38.583

像这样

```
 #include <stdlib.h>
 #include <iostream>
 #include <time.h> 
```

`stdafx.h`只在 vs 中退出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:02:44.310

在谷歌“stdafx”花了 2 秒后，它似乎是由 Visual Studio 生成的头文件。尝试删除它。也尝试搜索东西。

# css - javafx 2 和 css 伪类：在 setStyle 方法中设置悬停属性

> ID：13074459
> 
> 赞同：16
> 
> 时间：2012-10-25T18:00:05.297
> 
> 标签：css, javafx-2

我有一个带有这段代码的简单场景：

```
scene.getStylesheets().add("packagename/testcss.css"); 
```

我的 testcss.css 是：

```
.button { 
    -fx-background-color: #DDFFA4;
}

.button:hover {
    -fx-background-color: #9ACD32;
} 
```

我实现的是在 Web 应用程序中也就是悬停的漂亮效果。

![在此处输入图像描述](../Images/48f650e52ae9f8eef527995b087aec41.png) ... ![在此处输入图像描述](../Images/75b0444068bea73acd513c5b8fae720c.png)

**问题**
我怎样才能实现相同的效果，但没有单独的 css 文件，只需通过我的 Button 的 setStyle 方法？
问题是 setStyle 只接受样式定义而忽略了选择器。

```
button.setStyle("-fx-background-color: #DDFFA4;"); 
```

选择器，在我的悬停情况下是伪类：

```
.button:hover 
```

但我应该在哪里设置它？

此外，javadoc 明确地从 setStyle 方法参数中排除了选择器：

> 请注意，与 HTML 样式属性一样，此变量包含样式属性和值，而不是样式规则的选择器部分。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-25T19:53:54.347

正如您在问题中指出的那样，从 JavaFX 2.2 开始，css 伪类不会作为公共 API 的一部分公开，您可以将其用于 Java 代码中的样式操作。

如果您想在不使用样式表的情况下从 Java 代码更改样式属性，则需要根据事件或更改侦听器设置样式。下面的示例中有几个选项。

```
import javafx.application.Application;
import javafx.beans.binding.*;
import javafx.beans.property.SimpleStringProperty;
import javafx.event.EventHandler;
import javafx.geometry.Pos;
import javafx.scene.*;
import javafx.scene.control.Button;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.*;
import javafx.stage.Stage;

/** Changing button styles on hover without a css stylesheet. */
public class ButtonBackgroundChanger extends Application {
  private static final String STANDARD_BUTTON_STYLE = "-fx-background-color: #DDFFA4;";
  private static final String HOVERED_BUTTON_STYLE  = "-fx-background-color: #9ACD32;";

  public static void main(String[] args) throws Exception { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    Button configure = new Button("Configure");
    changeBackgroundOnHoverUsingBinding(configure);
    Button update = new Button("Update");
    changeBackgroundOnHoverUsingEvents(update);

    VBox layout = new VBox(10);
    layout.setAlignment(Pos.CENTER);
    layout.setStyle("-fx-padding: 10;");
    layout.getChildren().addAll(configure, update);
    stage.setScene(new Scene(layout));
    stage.show();
  }

  private void changeBackgroundOnHoverUsingBinding(Node node) {
    node.styleProperty().bind(
      Bindings
        .when(node.hoverProperty())
          .then(
            new SimpleStringProperty(HOVERED_BUTTON_STYLE)
          )
          .otherwise(
            new SimpleStringProperty(STANDARD_BUTTON_STYLE)
          )
    );
  }

  public void changeBackgroundOnHoverUsingEvents(final Node node) {
    node.setStyle(STANDARD_BUTTON_STYLE);
    node.setOnMouseEntered(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent mouseEvent) {
        node.setStyle(HOVERED_BUTTON_STYLE);
      }
    });
    node.setOnMouseExited(new EventHandler<MouseEvent>() {
      @Override public void handle(MouseEvent mouseEvent) {
        node.setStyle(STANDARD_BUTTON_STYLE);
      }
    });
  }    
} 
```

如果颜色需要真正动态地使用具有预定义颜色和样式的样式表存在问题，或者如果对使用 css 样式表有一些其他厌恶，我只会在代码而不是样式表中真正做到这一点。

在 JavaFX 8 中有一个公共 API，它允许您（如果您愿意）在[不使用 CSS 的情况下操作区域背景颜色](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/layout/Background.html)。

示例程序输出（更新按钮悬停）：

![示例程序输出](../Images/83dd0a96ad1bdb03f84445a2f3e77d6c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-28T18:10:14.210

您可以选择将它们设置为 css 以在触发不同事件时以编程方式更改/更新。我针对我的签入按钮将以下函数添加到 fxml 文件事件中。

```
 @FXML
    private void onHover(MouseEvent event)
    {
        if(btnCheckin.getText().contentEquals("Check Out"))
        {
            btnCheckin.setStyle("-fx-font-size: 20; -fx-font-weight: bold; -fx-padding: -5 -5 -5 -5;   \n" +
                            "    -fx-border-color: #e2e2e2;\n" +
                            "    -fx-border-width: 2;\n" +
                            "    -fx-border-radius: 5;\n" +
                            "    -fx-background-radius: 5;\n" +
                            "    -fx-background-color: #3a3a3a;\n" +
                            "    -fx-font-family: \"Lato Bold\", Helvetica, Arial, sans-serif;\n" +
                            "    -fx-text-fill: white;\n" +
                            "    -fx-background-insets: 0 0 0 0, 0, 1, 2;");
        }
    }

    @FXML
    private void onExit(MouseEvent event)
    {
        if(btnCheckin.getText().contentEquals("Check Out"))
        {
            btnCheckin.setStyle("-fx-font-size: 20; -fx-font-weight: bold; -fx-padding: -5 -5 -5 -5;   \n" +
                            "    -fx-border-width: 2;\n" +
                            "    -fx-border-radius: 5;\n" +
                            "    -fx-background-radius: 5;\n" +
                            "    -fx-font-family: \"Lato Bold\", Helvetica, Arial, sans-serif;\n" +
                            "    -fx-text-fill: white;\n" +
                            "    -fx-background-insets: 0 0 0 0, 0, 1, 2;\n" +
                            "    -fx-background-color: #EE6559;\n" +
                            "    -fx-border-color: #EE6559;");
        }
    }

    @FXML
    private void onPress(MouseEvent event)
    {
        if(btnCheckin.getText().contentEquals("Check Out"))
        {
            btnCheckin.setStyle("-fx-font-size: 20; -fx-font-weight: bold; -fx-padding: -5 -5 -5 -5;   \n" +
                            "    -fx-border-color: #e2e2e2;\n" +
                            "    -fx-border-width: 2;\n" +
                            "    -fx-border-radius: 5;\n" +
                            "    -fx-background-radius: 5;\n" +
                            "    -fx-background-color: white;\n" +
                            "    -fx-font-family: \"Lato Bold\", Helvetica, Arial, sans-serif;\n" +
                            "    -fx-text-fill: #1d1d1d;\n" +
                            "    -fx-background-insets: 0 0 0 0, 0, 1, 2;");
        }
    }

    @FXML
    private void onRelease(MouseEvent event)
    {
        if(btnCheckin.getText().contentEquals("Check Out"))
        {
            onHover(event);
        }
    } 
```

# image-processing - 图像散列的离散余弦变换更灵活

> ID：13074462
> 
> 赞同：3
> 
> 时间：2012-10-25T18:00:12.167
> 
> 标签：image-processing, dct

我正在为我的图像使用感知散列的概念。使用 DCT 作为基础数学可以很好地工作。

我得到了很好的匹配图像，这些图像是相同的一些“攻击”，即纵横比、亮度、对比度和大多数与颜色变化相关的东西。

但是，我正在寻找更多的灵活性，并希望能够找到具有相似性质的图像，使用图像来搜索其他图像。类似于[TinyEye](http://www.tineye.com/)的功能

DCT 让我获得了图像（结构）的最低频率。我可以在这里做些什么来增加灵活性吗？

# maven - m2e转移junit失败

> ID：13074463
> 
> 赞同：0
> 
> 时间：2012-10-25T18:00:20.397
> 
> 标签：maven, m2eclipse, m2e

使用 m2eclispe 导入我的 Maven pom 文件时，标记视图中出现以下问题：

> 从 (http://nexus.xyz.com/content/groups/public) 传输 junit:junit:jar:3.8.1 失败已缓存在本地存储库中，直到中央更新间隔已过才会重新尝试解析或强制更新。原始错误：无法将工件 junit:junit:jar:3.8.1 从/到中央传输（http://xyz.com/content/groups/public）：操作被取消。pom.xml /project line 1 Maven配置问题

我是否需要为我的 pom 添加 m2e 的插件排除过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:40:27.013

似乎 Maven 已配置为从您的公司 Maven 存储库下载任何工件。这是一个常见的设置。通常，企业 Maven 存储库充当[Maven Central Repository](http://search.maven.org/)的代理，其中包含大多数开源库，如 JUnit。但这似乎不适用于您的设置。尝试下载 JUnit 失败并且您收到此错误。

# entity-framework - 如何阻止实体框架同时生成 ObjectContext 和 dbContext

> ID：13074468
> 
> 赞同：13
> 
> 时间：2012-10-25T18:00:25.523
> 
> 标签：entity-framework, dbcontext, objectcontext

## 背景

*   视觉工作室 2012
*   在 VS2012 中创建的新 Model.EDMX 文件
*   将之前创建的 EDMX 中的一些 EDMX xml 复制到新的

## 问题/问题

现在。EDMX（TT 转换、自定义工具等）正在生成 DbContext 类（在 Model.tt/Model.Context.tt 文件下）*和*ObjectContext 类（通过 Model.designer.cs 文件）。见下图：

![Model.tt 和 Designer.cs 文件都在定义我的实体](../Images/01c4cad4fe540bc2eed9280e09330e6a.png)

一切都可以很好地构建并且可以与 DbContext 一起使用（但显然只有在我在构建之前删除 Designer.cs 文件时），但 Designer.cs - 及其基于 ObjectContext 的代码 - 不断重新出现。我该如何阻止这种行为？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T18:17:20.250

我没有找到如何阻止 Designer.cs 文件生成 ObjectContext，但我确实知道如何制作它，这样它就无关紧要了。只需将构建操作设置为“无”而不是“编译”。

![将构建操作设置为无](../Images/8985192b05913399411b38de3d10d336.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T06:55:46.050

`.tt`无论`.edmx`. _ 他们监听`.edmx`文件的变化。至少这是他们为我工作的方式。

因此，通过将代码生成策略转换为`None`in，`.edmx`您可以使`.designer.cs`文件中没有任何有用的内容。

然后打开项目文件，找到代表 的节点`.edmx`，默认包含在`EntityDeploy`节点中，即 Build Action 值，并删除其`Generator`子键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T11:39:48.423

在普通的 EF Code First 项目中，代码生成策略为“无”且未生成 ObjectContext。

在您的情况下，您的代码生成策略设置为“默认”。

要停止在 中生成 ObjectContext `xxxx.Designer.cs`，请转到您的 edmx 文件，并将您的代码生成策略从“默认”更改为“无”。

如果你检查`xxxx.Designer.cs`

```
// Default code generation is disabled for model 'C:\Users\xyxy\xyxyxy.Web\Models\xyxy.edmx'. 
// To enable default code generation, change the value of the 'Code Generation Strategy' designer
// property to an alternate value. This property is available in the Properties Window when the model is
// open in the designer. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-22T20:58:26.587

我认为问题在于文件属性字段中的`EntityModelCodeGenerator`值。只需删除该值。`Custom Tool``.edmx`

我想就是这样，因为我注意到在我作为 EF6 项目开始的项目中，没有价值，也没有`.designer.cs`文件，但在我从 EF4 升级的两个项目中，他们都有价值和设计者文件。

（这相当于基础文件`<Generator>`中的标签。）`.csproj`

# quickfix - quickfix MDEntryTime 无毫秒

> ID：13074471
> 
> 赞同：3
> 
> 时间：2012-10-25T18:00:34.513
> 
> 标签：quickfix

我正在尝试生成一个包含毫秒值的 MDEntryTime。一旦进入消息，毫秒就会被丢弃。经过进一步检查，我在 Field.h 中发现了这个小宝石

显式 UtcTimeOnlyField（int 字段，const UtcTimeOnly& 数据，bool showMilliseconds = false）

MDEntryTime 的构造函数不允许编码器设置 showMilliseconds=true。人们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:14:31.743

这个对我有用。我做了一个方法来确保 UtcTimeOnly 中存在毫秒：

```
FIX::UtcTimeOnly getTimeMillis()
{
    timeval tv;
    gettimeofday(&tv, NULL);
    return FIX::UtcTimeOnly(tv.tv_sec, tv.tv_usec / 1000);
} 
```

然后，我这样设置字段：

```
msg.setField(FIX::UtcTimeOnlyField(FIX::FIELD::MDEntryTime, getTimeMillis(), true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:08:35.383

> MDEntryTime 的构造函数不允许编码器设置 showMilliseconds=true。

事实上，确实如此。以下内容应该适合您：

```
msg.set(FIX::MDEntryTime(FIX::UtcTimeOnly(time(NULL), true))); 
```

# ios - 如何计算发送/接收的字节数，包括 iOS HTTP 连接中的 TCP/IP 开销？

> ID：13074472
> 
> 赞同：3
> 
> 时间：2012-10-25T18:00:33.933
> 
> 标签：ios, nsurlconnection, tcp-ip

我正在使用 NSURLConnection 与服务器执行 HTTP 通信。我希望找出我的应用程序发送/接收的确切字节数，包括 TCP/IP 开销。经过大量研究，还没有找到任何关于如何实现这一目标的有用信息。

如果使用它可以帮助我解决这个问题，我愿意切换到 CFStream。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T10:12:14.510

In my .h of the controller I declare two vars:

```
NSMutableData *_data;
float downloadSize; 
```

Also don't forget the delegates in the .h

```
@interface SomeViewController : UIViewController <NSURLConnectionDataDelegate, NSURLConnectionDelegate> 
```

Then in my .m:

```
- (void)connection: (NSURLConnection*) connection didReceiveResponse: (NSHTTPURLResponse*) response
    {
        NSInteger statusCode_ = [response statusCode];
        if (statusCode_ == 200) {
            downloadSize = [response expectedContentLength];
        }
    }
    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        if(!_data) _data = [[NSMutableData data]init];
        [_data appendData:data];
        progressView.progress =  ((float) [_data length] / (float) downloadSize);
    }

    - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
          unsigned char byteBuffer[[_data length]];
          [_data getBytes:byteBuffer];
          [_data writeToFile:pdfPath atomically:YES];

    } 
```

This is my controller to download a pdf file. But it could be anything really. When it has a response, it gets the expected length, then every time it receives data, it appends it to my mutable data and then compares it to the expected size.

Hope this helps :D

# xml - 使用 Relax NG 验证 XML 节点是否为空且没有空格

> ID：13074486
> 
> 赞同：1
> 
> 时间：2012-10-25T18:01:27.823
> 
> 标签：xml, validation, whitespace, relaxng

我想使用 Relax NG 模式来验证 XML 文件。作为验证的一部分，我想确保一组节点中没有空白。例如，我希望前两个`<emptyCheck>`节点进行验证，但在此示例中第三个和第四个节点失败：

```
<?xml version="1.0" encoding="UTF-8"?>
<testRoot>
    <emptyCheck/>
    <emptyCheck></emptyCheck>
    <emptyCheck> </emptyCheck>
    <emptyCheck>x</emptyCheck>
</testRoot> 
```

下面的 Relax NG Schema 几乎可以工作。对于 的第四个实例，上述示例 XML 失败`<emptyCheck>`，但对于第三个实例则没有。

```
<?xml version="1.0" encoding="UTF-8"?>
<grammar ns="" xmlns="http://relaxng.org/ns/structure/1.0">
    <start>
        <element name="testRoot">
            <oneOrMore>
                <element name="emptyCheck">
                    <empty/>
                </element>
            </oneOrMore>
        </element>
    </start>
</grammar> 
```

我认识到，在大多数 XML 处理中，只有空格的节点并不重要。我仍然想解决这个问题，以便我可以执行编码风格指南。那么，有没有办法设置一个 Relax NG 模式，这样当一个节点应该完全为空时，文档将不会验证节点中是否只有空白？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:50:33.680

RELAX NG 允许声明为空的元素包含空格似乎有些古怪，尽管该决定具有[合理的基础](https://lists.oasis-open.org/archives/relax-ng/200102/msg00003.html)。

无论如何，如果您的 RELAX NG 验证器支持 XSD 数据类型（大多数都支持），那么您可以通过指定元素内容必须是零长度字符串来使用它们来进一步限制允许的元素内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<grammar xmlns="http://relaxng.org/ns/structure/1.0"
  datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes">
  <start>
    <element name="testRoot">
      <oneOrMore>
        <element name="emptyCheck">
          <data type="string">
            <param name="maxLength">0</param>
          </data>
        </element>
      </oneOrMore>
    </element>
  </start>
</grammar> 
```

# php - PDO::Query() 返回 false

> ID：13074492
> 
> 赞同：2
> 
> 时间：2012-10-25T18:01:58.090
> 
> 标签：php, mysql, pdo, pdostatement

我正在尝试在 PHP 中学习和使用 PDO。我在 query() 方法中遇到了一个问题。

我试图用`$sth = $db->query("SELECT * FROM titles ORDER BY RAND() LIMIT 1");`随机选择一个网站的标题，但由于某种原因，`$sth`总是错误的。当我使用`prepare()`and时它可以工作`execute()`，但我试图找出`query()`.

这是我正在调用的整个函数：

```
function getTitle($db)
    {
    if($db)
        {
            $db->exec("USE " . $dbsite); 
            $sth = $db->query("SELECT * FROM titles ORDER BY RAND() LIMIT 1");
            $title = $sth->fetch(PDO::FETCH_ASSOC);

            $db->exec("UPDATE titles SET count = count + 1 WHERE id = " . $title['id']);

            return $title['title'];
        }
    else
            return 'Home - Database Offline';

} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-25T18:07:56.697

使用 PDO 的[`errorinfo()`功能](http://ca2.php.net/manual/en/pdo.errorinfo.php)找出原因。

```
if( ! $sth = $db->query("SELECT * FROM titles ORDER BY RAND() LIMIT 1") ) {
  die(var_export($db->errorinfo(), TRUE));
} 
```

* * *

**延迟更新**

为了使我的旧答案更好，将 PDO 设置为在错误时抛出异常比检查每个函数返回更易于管理。

```
$dbh = new PDO($connstr, $user, $pwd);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

或者，更简洁地说：

```
$dbh = new PDO($connstr, $user, $pwd, [PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION]); 
```

# objective-c - 隐藏 UIDatePicker 的事件

> ID：13074494
> 
> 赞同：1
> 
> 时间：2012-10-25T18:02:12.030
> 
> 标签：objective-c, ios, uidatepicker, uicontrolevents

我在**UIViewController上有****UIDatePicker**。

 **在用户选择日期并在**UIDatePicker**外部单击后，我想隐藏**UIDatePicker**，例如：

```
-(void)hidePicker
{   
    [UIView beginAnimations:@"SlideOutPicker" context:nil];
    [UIView setAnimationDuration:0.5];
    [_datePicker setCenter: CGPointApplyAffineTransform(_datePicker.center, _datePicker.transform)];
    [_datePicker setTransform:CGAffineTransformMakeTranslation(0, 0)];
    [UIView commitAnimations];
} 
```

我试试

```
[_datePicker addTarget:self action:@selector(hidePicker) forControlEvents:UIControlEventTouchUpOutside]; 
```

但是事件没有发生，你能给我一些建议吗？

我不想使用**UIControlEventValueChanged**因为**DatePicker**不应该在每次用户更改日期时隐藏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:08:40.443

您不能`UIControlEventTouchUpOutside`用于此行为。在您的情况下，您需要在选择器之外创建一个透明视图或按钮，并为其设置操作以关闭选择器。将此视图/按钮的背景颜色设置为清晰颜色以实现此目的。在点击按钮或视图时，您可能必须关闭选择器。

`UIControlEventTouchUpOutside`主要用于在视图内部触摸和手指移出。在移出视图边界时，它会触发事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:31:33.733

每次触摸屏幕时，只需检查触摸是否不在 UIDatePicker 的范围内。您是否尝试设置 hidden=YES; ? 我想你可以改变它在动画块内的可见性。顺便说一句，如果您正在为 iOS 4+ 开发，那么您最好使用新的（它们实际上不再是新的）UIView 类方法方法来制作动画，因为 Apple 不鼓励使用 beginAnimations 和 commitAnimations 块。以下是我提到的那些方法：

```
animateWithDuration:animations:
animateWithDuration:animations:completion:
animateWithDuration:delay:options:animations:completion: 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW111](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW111)中的更多信息**

# java - 让复制/粘贴在 Mac 上的 JDK 7 AWT Applet 中工作的任何解决方法？

> ID：13074496
> 
> 赞同：2
> 
> 时间：2012-10-25T18:02:14.080
> 
> 标签：java, macos, applet, awt, java-7

由于 Apple 在 Mac 上强制更新到 JDK 7，旧的 AWT 小程序不再支持复制/粘贴。例如，如果您访问：

[简单的 AWT 文本字段示例](http://www.willamette.edu/~gorr/classes/cs231/lectures/chapter5/)

您不能复制并粘贴到该页面上的小程序文本字段中。我已经确认您仍然可以使用 JDK 7 在 Windows 上的 AWT 中复制/粘贴。

有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:49:42.220

Oracle 于 2011 年 2 月发布 Java 6 Update 24 修复 21 个漏洞：公告

作为此安全版本的一部分，从计算机剪贴板复制和粘贴到 Java 小程序的功能已被禁用。

要解决此问题，有 2 个解决方案：

1.  为小程序创建数字签名。
2.  解决方法：如果您不想使用数字签名，请在您的 java.policy 文件中添加以下行：permission java.awt.AWTPermission "accessClipboard"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:30:20.677

这是使用其策略工具以官方 Java 方式进行的非常详细的演练：

[http://www.shodor.org/interactivate/resources/InstructionsCopyPaste/](http://www.shodor.org/interactivate/resources/InstructionsCopyPaste/)

以下是说明的快速摘要：

1.  在 Terminal.app 中输入“policytool”并点击 [Enter]
2.  关闭任何错误消息并从“文件”菜单中选择“保存”
3.  在用户的主目录中另存为“.java.policy”（带有前面的点）
4.  单击“添加策略条目”，然后单击“添加权限”
5.  选择“AWTPermission”作为权限，选择“accessClipboard”作为目标
6.  单击“确定”，然后单击“完成”
7.  再次选择“保存”，然后从“文件”菜单中选择“退出”
8.  重新启动您的浏览器（如果复制/粘贴仍然不起作用，则重新启动您的计算机）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:30:42.533

在他们修复错误之前，我发现签署小程序允许复制/粘贴工作。

# java - 使用 Date.parse(dateString) 给定日期的 Millis 错误

> ID：13074497
> 
> 赞同：2
> 
> 时间：2012-10-25T18:02:18.583
> 
> 标签：java, date, milliseconds

我有一个日期字符串`1/1/1970 8:00 AM`

正确的毫秒应该是`8 hours * 60 minutes per hour * 60000 milliseconds per minute = 28800000`

但是，使用`Date.parse(dateString)`返回`50400000`

我不明白什么？

**编辑**

我最初尝试使用 date.getTime();

这是我的原始代码：

```
SimpleDateFormat dateFmt = new SimpleDateFormat("MM/dd/yyyy h:mm a");
dateFmt.setTimeZone(TimeZone.getTimeZone("UTC"));
StringBuilder sb = new StringBuilder();                     
sb.append(month).append("/");
sb.append(day).append("/");
sb.append(year).append(" ");
sb.append(pad(hour)).append(":");
sb.append(pad(minute)).append(" ");;
sb.append(ampm);
Date date = new Date();

date = dateFmt.parse(sb.toString());

date.getTime() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T18:04:08.303

这几乎肯定是问题所在：

> 如果未指定时区，则假定为本地时区。

我的猜测是你所在的时区是 Unix 时代的 UTC-6，所以当地时间上午 8 点是 UTC 下午 2 点。

然后，当有更好的替代方法（`SimpleDateFormat`允许您设置时区）可用时，您使用不推荐使用的方法会出现更基本的问题。方法被弃用是有*原因*的。无论如何，您不应该只使用不推荐使用的方法，否则您将继续遇到这样的事情。

事实上，如果可能的话，你最好使用[Joda Time - 但](http://joda-time.sf.net)*至少*远离`Date`.

示例代码：

```
SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy h:mm aa", Locale.US);
format.setTimeZone(TimeZone.getTimeZone("UTC"));
long millis = format.parse(text).getTime(); 
```

您可能想要更改`dd/MM`为`MM/dd`，具体取决于您的日期将采用的格式 - 我们无法从“01/01”中分辨出来。请注意时区和语言环境的显式设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:17:54.257

这是因为您当地的时区。使用带有时区的简单日期格式，如下所示，以获得您想要的`UTC`时区值：

```
 DateFormat format = new SimpleDateFormat("MM/dd/yyyy hh:mm a");
    String dateS = "1/1/1970 8:00 AM";
    format.setTimeZone(TimeZone.getTimeZone("UTC"));  
    format.setLenient(true);
    Date date = format.parse(dateS);
    System.out.println(date.getTime()); //<-- prints 28800000 
```

或更紧凑：

```
 DateFormat format = new SimpleDateFormat("MM/dd/yyyy hh:mm a");
    format.setTimeZone(TimeZone.getTimeZone("UTC"));  
    Date date = format.parse("1/1/1970 8:00 AM");
    System.out.println(date.getTime());  //<-- prints 28800000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-17T14:23:27.800

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

另外，下面引用的是来自[**Joda-Time**](https://www.joda.org/joda-time/)[主页](https://www.joda.org/joda-time/)**的通知：**

 **> 请注意，从 Java SE 8 开始，用户被要求迁移到 java.time (JSR-310) - JDK 的核心部分，它取代了这个项目。

## 使用`java.time`现代日期时间 API 的解决方案：

**您不需要形成字符串：**您可以使用[`LocalDateTime#of`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#of-int-int-int-int-int-)创建一个`LocalDateTime`可以转换为的实例，`Instant`以便从 Unix 纪元获取毫秒数。

```
import java.time.Instant;
import java.time.LocalDateTime;
import java.time.ZoneOffset;

public class Main {
    public static void main(String[] args) {
        int year = 1970, month = 1, dayOfMonth = 1, hour = 8, minute = 0;
        LocalDateTime ldt = LocalDateTime.of(year, month, dayOfMonth, hour, minute);
        Instant instant = ldt.toInstant(ZoneOffset.UTC);
        System.out.println(instant.toEpochMilli());
    }
} 
```

**输出：**

```
28800000 
```

[`ONLINE DEMO`](https://ideone.com/rsmf5u)

**如果您已经有给定格式的日期时间字符串：**

```
import java.time.Instant;
import java.time.LocalDateTime;
import java.time.ZoneOffset;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("M/d/u h:m a", Locale.ENGLISH);
        String strDateTime = "1/1/1970 8:00 AM";
        LocalDateTime ldt = LocalDateTime.parse(strDateTime, dtf);

        Instant instant = ldt.toInstant(ZoneOffset.UTC);
        System.out.println(instant.toEpochMilli());
    }
} 
```

**输出：**

```
28800000 
```

[`ONLINE DEMO`](https://ideone.com/z5oOmz)

An代表[UTC](https://www.timeanddate.com/worldclock/timezone/utc)[`Instant`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)时间线上的一个瞬时点。

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)**

# php - 在 php 中打开其他 URL 以便在用户完全看到其他内容时打印它（在后台打印）

> ID：13074511
> 
> 赞同：0
> 
> 时间：2012-10-25T18:03:06.813
> 
> 标签：php, javascript, ajax

也许你可以在这方面帮助我。

我有一个欢迎屏幕，上面写着“输入代码”。用户输入是，他收到消息（另一页）说“请稍候”。在此级别上，系统正在检查代码是否有效。问题从这里开始。

代码使用 php 脚本进入完全不同的页面。该脚本返回 answear，如果代码正常，它会显示应打印的结果（例如正确的图表）。但是用户不应该在屏幕上看到这个图表。他只应该看到“请稍候”页面，然后是“您的东西已打印”页面或“抱歉图表尚未准备好，或代码错误”页面......

所以基本上不仅页面应该有某种通信，而且还应该在后台启动隐形URL打印。

目前我不知道如何使用 php/javascript/ajax 来解决这个问题，以及什么可用于 web。

我真的很感激帮助。提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:10:10.857

一个快速的方法是使用[jQuery-printPage 之](https://github.com/posabsolute/jQuery-printPage-plugin)类的东西。

```
$(".btnPrint").printPage({
  url: "/print/custompage/html",
  attr: "href",
  message:"Your document is being created"
}) 
```

# dojo - IE7 和 IE8 上的 Dojo 嵌套要求导致无效参数异常

> ID：13074513
> 
> 赞同：1
> 
> 时间：2012-10-25T18:03:25.190
> 
> 标签：dojo

这是我能想到的最简单的例子。在 IE7 和 IE8 中的第二次 require 调用中，我不断收到 Invalid Argument 异常。这在 IE9+、Chrome 和 Firefox 中运行良好。非常令人沮丧。通过 IE 开发人员工具对此进行调试没有帮助。

```
<script type="text/javascript">
   require(["dojo/request/xhr", "dojo/domReady"],
      function(xhr){
         xhr("Servlet?arg=1")
           .then(function(data) {
              try {
                   test()
               } catch(e) {
                  cpb.consoleLog(e.number);
                  cpb.consoleLog(e.description);
                  throw e;
               }
          });
      });
  function test() {
      require(['dojox/charting/Chart'], function (Chart) {
           // simulate problem
      });
  }
</script> 
```

# jquery - 将具有日期范围的 jQuery datepicker 放置到各种输入中

> ID：13074515
> 
> 赞同：0
> 
> 时间：2012-10-25T18:03:29.870
> 
> 标签：jquery, input, datepicker, has-many

我有 6 个不同的输入字段。它们中的每一个都成对分组。

他们来了：

```
<input name="fecha-in" type="text" id="from" size="40" height="25" class="date" />
<input name="fecha-fin" type="text" id="to" size="40" height="25" class="date" />
<input name="tfecha-in" type="text" id="from1" size="40" height="25" class="date" />
<input name="tfecha-fin" type="text" id="to1" size="40" height="25" class="date" />
<input name="bfecha-in" type="text" id="from2" size="40" height="25" class="date" />
<input name="bfecha-fin" type="text" id="to2" size="40" height="25" class="date" /> 
```

在这六个上，我需要添加带有日期范围的 jQuery datepicker。我可以让它在一对上工作，但我不知道如何将相同的代码添加到所有 3 对上。任何帮助将不胜感激。

这是我的 jQuery：

```
$(function() {
    $( "#from" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });

    $( "#to" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
}); 
```

感谢任何可以为我指明正确方向的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:44:59.270

这是现场演示：http: [//jsfiddle.net/MMMQn/1/](http://jsfiddle.net/MMMQn/1/)

以您的 HTML 为基础，我正在使用类迭代输入`date`

```
jQuery(".date").each(function(index, value) {
    ...    
} 
```

然后我决定现在是哪一对（对于第一个没有额外的 ID 标识符，其余的它会上升）：

```
var inputId = (index === 0) ? "" : index.toString(); 
```

最后，我将此`inputId`字符串添加到 jQuery 选择器并绑定您提供的代码。

# iis-7 - 如何使 web.config 仅适用于根文件夹？

> ID：13074516
> 
> 赞同：1
> 
> 时间：2012-10-25T18:03:30.750
> 
> 标签：iis-7

有没有办法阻止 IIS7 中 wwwroot 根目录中的 web.config 文件继承到所有其他子文件夹？

开发人员安装了一个将文件放在 wwwroot 文件夹中的网络应用程序。在安装 Exchange 2010 之前一切正常，但无法正常工作。删除 wwwroot 根目录中的 web.config 文件可以使 Exchange 正常工作（OWA 等），但会破坏 Web 应用程序。放回 web.config 文件可以修复 Web 应用程序，但会再次破坏 Exchange。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:10:51.277

为了防止继承配置到子应用程序，您将标签包装在`<system.web>`标签中`<location>`，使用`inheritInChildApplications="false"`.

```
<location path="." inheritInChildApplications="false">
   <system.web>
      ...
   </system.web>
</location> 
```

# css - 左右边距在firefox和chrome中对齐不同

> ID：13074517
> 
> 赞同：0
> 
> 时间：2012-10-25T18:03:35.457
> 
> 标签：css

我只开发了我的观看Firefox。完成后我用chrome打开我的网站..然后我看到对齐问题......

下面的代码

`<span class="fbtopbutton"> <div id="left"> <a href="#"><img src="/images/fb-login.png"></a> </div></span>`

我在 html 代码的不适当位置使用此代码..（由于一些 php 代码限制..）这就是为什么使用 margin-left top 和 right

**Css 代码** .fbtopbutton{ position: absolute;margin-top: 5px;margin-left: 27px;}

**在 Firefox 视图** ![火狐视图](../Images/35badd553bf5be9a5f37ef52196f0f13.png) **中 在 Chrome 视图中** ![在此处输入图像描述](../Images/77988d0617924812c50f49d86d1b3e80.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:05:10.003

尝试：

```
.fbtopbutton{ position: absolute;top: 5px;right:(however far from the right you need it to be)} 
```

确保父级也绝对或相对定位。

# android - 如何在android中对齐图像

> ID：13074523
> 
> 赞同：1
> 
> 时间：2012-10-25T18:04:03.897
> 
> 标签：android, android-layout, android-linearlayout

我在我的活动中动态添加控件。同时我正在添加一个编辑框和按钮，但在图像对齐方面面临一些问题。

![在此处输入图像描述](../Images/cd21c398f6de0cd5ad7d56777b2e6057.png)

这是我的代码，它广告 editText 和 Button 并返回到垂直对齐的线性布局。

```
 LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(0);

        final EditText textView = new EditText(this);
        textView.setLayoutParams(lparams);
        textView.setSingleLine(true);

        final LayoutParams lparams1 = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        final Button button = new Button(this);
        textView.setLayoutParams(lparams1);

        if(id == R.id.new_alternate_number_button)
        {
            if(contactNumber == "")
            {
            textView.setHint("Enter contact Number");
            }
            else
            {
             textView.setText(contactNumber);
            }
            textView.setInputType(InputType.TYPE_CLASS_PHONE); //to popup numpad
        }
        else
        {
            if(contactEmailID == "")
            {
                textView.setHint("Enter Email ID      ");       
            }
            else
            {
                textView.setText(contactEmailID);
            }

        }
        button.setBackgroundResource(R.drawable.ic_delete);

        button.setBackgroundResource(R.drawable.ic_delete);    
        button.setOnClickListener(deleteView);

        layout.addView(textView);
        layout.addView(button);

textView.post(new Runnable() {
            public void run() {
                textView.requestFocus();
                  InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                  imm.showSoftInput(textView, InputMethodManager.SHOW_IMPLICIT);

            }
        });

        return layout; 
```

在我的 XML 文件中，我已经声明了垂直对齐的线性布局，即图标应该在屏幕的末尾，而 EditText 应该左对齐。我还需要在 EditText 和图像之间留一个空格。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:17:11.277

这是您如何在 Button 和 EditText 之间添加空间的方法：

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams
    (LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);

layoutParams.setMargins(50, 0, 0, 0); // Adding margin to the left of your button
Button yourButton = new Button(this);
yourButton.setText("some text");
linearLayout.addView(yourButton, layoutParams); 
```

setMargins 方法中的参数顺序：

```
android:layout_marginLeft
android:layout_marginTop
android:layout_marginRight
android:layout_marginBottom 
```

[在此处了解有关 setMargins 方法的更多信息。](http://developer.android.com/reference/android/view/ViewGroup.MarginLayoutParams.html#setMargins%28int,%20int,%20int,%20int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:21:36.600

您的 LayoutParams 设置为 WRAP_CONTENT 的 Width 而不是 FILL_PARENT（或 MATCH_PARENT）。

我在类似情况下使用的“模式”是，即使我正在动态添加新的行/部分，我仍然将它们布局在该行的 xml 文件中，然后我动态膨胀并通过 id 查找元素，并绑定到他们。有点像我们处理列表项的方式，除了在这种情况下，您没有使用列表。

通过将布局保留在 XML 文件中，可以更轻松地制作您想要查看的原型、添加填充等。如果您无法让 LinearLayout 工作，您甚至可以使用 RelativeLayout。同样，您可以在代码中完成所有这些操作，但在 XML 中进行布局提供了更大的灵活性（并且在我看来更容易处理）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:43:53.250

既然我正确地意识到了您的要求（至少我猜是这样），我还有另一个答案。让我了解它如何提供帮助。

您必须为元素指定权重。假设您的布局的总 weightSum 为 8，那么如果您将 EditText 的权重指定为 7，它将占用总空间的 7/8。并将按钮的重量设置为 1，因此它将占用 1/8 的空间。我以 8 为例，您可以将其更改为您想要的任何数字，进行一些反复试验，看看哪些权重最适合您的需求。

此外，权重是浮动的，所以不要忘记数字后面的“f”，比如 1f 和 7f：

（同样，我不在我的开发机器附近，所以可能会有一些错误。但这应该可以。）

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams
    (LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT, 7f);
// Last parameter 6f defines weight. So yourEditText will take 7/8th of the space
linearLayout.addView(yourEditText, layoutParams);

layoutParams = new LinearLayout.LayoutParams
    (LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT, 1f);
// Last parameter 6f defines weight. So yourEditText will take 1/8th of the space
linearLayout.addView(yourButton, layoutParams); 
```

让我们看看这有什么帮助。:)

# html - 当表格单元格中有浮动元素时，表格单元格中的垂直对齐不起作用

> ID：13074545
> 
> 赞同：3
> 
> 时间：2012-10-25T18:05:13.923
> 
> 标签：html, css, vertical-alignment

这个小提琴演示了这个问题：http: [//jsfiddle.net/wrYsx/](http://jsfiddle.net/wrYsx/)

相关代码：

```
<style>
    #floater {
        background-color: red;
        height: 35px;
        width: 35px;
        float: right;
    }

    table {
        width: 100%;
    }

    table tr td {
        border: 1px solid green;
        vertical-align: middle;
        height: 35px;
    }
</style>
<table>
    <tr>
        <td>
            <div id='floater'></div>
            some text
        </td>
    </tr>
</table>

<table>
    <tr>
        <td>
            some text
        </td>
    </tr>
</table> 
```

基本上，如果我有一个给定高度的 td，我可以使用 vertical-align: middle 将 td 中的东西居中。但是，当 td 中有另一个浮动元素时（在我的情况下是正确的），则不尊重垂直对齐，并且文本位于 td 的顶部。任何想法如何设置这个样式，以便您可以拥有一个带有垂直对齐和浮动元素的 td？

另外，我发现了这篇文章：stackoverflow.com/questions/2641615/table-cell-doesnt-obey-vertical-align-css-declaration-when-it-contains-a-floate 但是它不是我的解决方案，因为我可能需要浮动元素。我尝试使用定位来模拟相同的布局，但似乎我无法定位一个 td 单元格，以便我可以在其中使用 position: absolute 将“浮动”元素定位在右侧：0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:20:19.377

尝试向 td. 添加一个空元素。

```
<span class="vertical_aligner"></span>

.vertical_aligner {
    vertical-align: middle;
    height: 100%;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:13:49.950

绝对定位似乎可以胜任。你只需要确保你穿上`position:relative`TD。

```
#floater {
    background-color: red;
    height: 35px;
    width: 35px;
    position:absolute;
    top:0;
    right:0
}

table {
    width: 100%;
}

table tr td {
    border: 1px solid green;
    vertical-align: middle;
    height: 35px;
    position:relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:15:42.437

您可以`line-height`在表格单元格上设置 以匹配单元格的高度来解决此问题。

**[jsFiddle 示例](http://jsfiddle.net/j08691/wrYsx/3/)**

```
table tr td {
    border: 1px solid green;
    vertical-align: middle;
    height: 35px;
    line-height:35px;
}
​ 
```

请注意，这仅适用于单元格中的文本占用一行。

# unit-testing - 为什么在 PHPUnit 中特定断言比通用断言更好？

> ID：13074551
> 
> 赞同：9
> 
> 时间：2012-10-25T18:05:33.953
> 
> 标签：unit-testing, testing, phpunit

请原谅我的无知；我还是单元测试领域的新手。

有人可以解释为什么..

`$this->assertGreaterThan( 2, $result );`

..比..好

`$this->assertTrue( $result > 2 );`

..（同样，所有其他特定的断言方法）？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T21:54:10.503

如果您向您的妈妈/爸爸/叔叔展示这些，那`assertGreaterThan`将更加直观。加上 isGreaterThan 的失败消息会好很多

```
"1 was not greater than 2" 
```

或者

```
"false was not true" 
```

哪一个更有*表现力*？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T07:18:36.113

实际上，*最好*的方法提供更好的可读性*和*更好的失败消息：使用[PHPUnit 基于函数的断言](https://github.com/sebastianbergmann/phpunit/blob/master/PHPUnit/Framework/Assert/Functions.php)或[Hamcrest 库](http://code.google.com/p/hamcrest/wiki/TutorialPHP)。

```
assertThat(count($users), greaterThan(2));

>> Expected: greater than 2
>>      but: was 1 
```

或者

```
assertThat($users, arrayWithSize(greaterThan(2)));

>> Expected: array with size greater than 2
>>      but: was array with size 1 
```

`assertThat`您始终可以通过将字符串作为断言方法或 Hamcrest函数的第一个参数或 PHPUnit 函数的第三个参数添加一个字符串来为任何断言提供可读的错误消息`assertThat`：

```
self::assertTrue('At least one user found', !empty($users));

>> At least one user found
>> Expected: true
>>      but: false 
```

或者

```
assertThat('At least one user found', !empty($users), is(true));

>> At least one user found
>> Expected: true
>>      but: false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:29:49.577

> 比……好

谁这么说的？两者都一样好。两种情况下的可读性都不同，但都不是特别好。您可以通过一些变量提取进一步改进它：

```
$minimumValue = 2;
$this->assertGreaterThan($minimumValue, $result); 
```

和

```
$resultGreaterThanMinimumValue = $result > 2;
$this->assertTrue($resultGreaterThanMinimumValue); 
```

这仍然不理想（因为这些断言不像英语中的句子那样读起来），但是这两种方法都不是更好。

# nios - 在 NIOS 中读写 Verilog Reg

> ID：13074552
> 
> 赞同：0
> 
> 时间：2012-10-25T18:05:39.520
> 
> 标签：nios

如何在 NIOS CPU 中读取或写入 verilog reg（变量）？
我应该怎么办？
我使用 DE0 NANO、旋风 IV 和 NIOS 2。

# knockout.js - 有什么好的 javascript 数据网格可以与淘汰赛 js 一起使用？

> ID：13074553
> 
> 赞同：0
> 
> 时间：2012-10-25T18:05:40.170
> 
> 标签：knockout.js

我正在寻找一个与 knockoutjs 一起工作的好的数据网格。

我的后端是一个提供 json 数据的 webapi 服务，而前端是为 MVVM 使用 knockoutjs。我正在寻找一个不错的数据网格，它可以轻松地将更新作为数据网格中的更新元素发布回服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:01:16.437

试试 KoGrid [https://github.com/ericmbarnard/KoGrid](https://github.com/ericmbarnard/KoGrid)，有简单的例子 [http://ericmbarnard.github.com/KoGrid/examples/SimpleExample.html](http://ericmbarnard.github.com/KoGrid/examples/SimpleExample.html)

# c# - 在 Word 2010 中禁用“另存为”按钮

> ID：13074554
> 
> 赞同：3
> 
> 时间：2012-10-25T18:05:43.050
> 
> 标签：c#, interop, word-2010

我有以下代码应该禁用 Word 2010 中的“另存为”按钮。在`Document_Startup`事件中调用以下方法：

```
private void DisableSaveAsButton()
{
    Object MenuBar = 40;
    Object FileMenu = 1;
    Object SaveAsButton = 5;
    var saveAsBtn = this.ThisApplication.CommandBars[MenuBar].Controls[FileMenu].accChild[SaveAsButton] as CommandBarButton;
    saveAsBtn.Enabled = false;
} 
```

我希望“另存为”按钮变灰，但事实并非如此，它仍然有效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T20:43:37.127

我想到了。我只需要将功能区 XML 项添加到项目中，并提供以下信息。我还需要禁用其他一些按钮：

```
 <?xml version="1.0" encoding="UTF-8"?>
     <customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" 
        onLoad="OnLoad" > 
        <commands> 
          <command idMso="FileSaveAs" enabled="false" />
          <command idMso="FileNewDefault" enabled="false"/>
          <command idMso="FileOpen" enabled="false"/>
          <command idMso="FileOpenRecentFile" enabled="false"/>
        </commands> 
     </customUI> 
```

# c# - 使用 WebClient 访问本地文件

> ID：13074555
> 
> 赞同：2
> 
> 时间：2012-10-25T18:05:54.510
> 
> 标签：c#, .net, uri, webclient

我开发了一个 C# 应用程序，它需要通过 HTTP、FTP 以及有时还通过本地文件 (file://) 访问许多不同的内容源。

我希望有一种统一的方式来通过不同的协议访问这些文件，所以我选择了 WebClient 来执行此操作。

它适用于 MSDN 上记录的所有不同协议（FTP、HTTP、本地文件等），但随后出现问题......在几次成功请求后，我无法使用本地文件的 URI 访问任何文件（文件：//c:\some_dir\somefile.ext)。

我已经检查了 URI 是否正确，如果我在浏览器中输入它，它会轻松打开文件。我已经认识到一件非常有趣的事情 - 它在开始时也适用于本地文件。如果我尝试使用 WebClient 加载本地文件的内容，那么一开始一切正常。

我的程序如下所示：

1.  主线程启动
2.  主线程上的一些初始化
3.  多个线程从不同来源下载东西
4.  等待所有线程完成
5.  单线程处理下载的东西

正如我之前所描述的，如果我将 WebClient.DownloadData(url) 调用放在第一步中，它工作正常，但是当我尝试在第三步的任何线程中访问完全相同的 URI 时，它无法获得URI 以“file://”开头的任何本地文件。

我使用一个非常简单的代码来下载/获取本地文件：

```
WebClient wc = new WebClient();
data = wc.DownloadData(url); 
```

我想知道会出现什么问题...也许我在前面的步骤中或在阻止我访问本地文件的并发线程中设置了一些东西？在前面的步骤中，我从 FTP 服务器和通过 HTTP 下载内容，也许这会导致问题？如果我在主线程的开头尝试，我可以轻松访问任何本地文件。访问 FTP 内容时，我还设置了凭据。也许这会影响我以后的请求？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-09T17:25:53.930

好吧，事后我就在这里，但希望这可以帮助某人。

最好使用 Uri 对象，而不是字符串路径。当它是本地文件时，让 Uri 构造函数处理“file://”部分。实际的 URI 更喜欢斜杠而不是反斜杠，即使对于本地文件也是如此。但是，如果您只使用 Uri 对象，则不必担心。

```
public byte[] Load(string fileName)
{
    Uri uri = new Uri(fileName);
    var client = new WebClient();
    return client.DownloadData(uri);
} 
```

当然，您需要错误处理等，但这基本上对我有用。

如果您只想使用 File.ReadAllBytes() 方法，请按照以下步骤操作。

```
public byte[] Load(string fileName)
{
    Byte[] retVal = null;
    Uri uri = new Uri(fileName);
    if(uri.Scheme == "file")
    {
        retVal = File.ReadAllBytes(uri.LocalPath);
    }
    else
    {
        var client = new WebClient();
        retVal = client.DownloadData(uri);
    }
    return retVal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:05:54.510

现在我有一个非常简单的解决方案来解决这个问题：

```
 byte[] data;
            if (url.Trim().StartsWith("file://"))
            {                    
                string fileName = url.Replace("file://","");
                data = File.ReadAllBytes(fileName);
            }
            else
            {
                WebClient wc = new WebClient();
                //wc.Proxy = GlobalProxySelection.GetEmptyWebProxy();
                data = wc.DownloadData(url);
            }
            // process data... 
```

这很好用，但我仍然想知道 WebClient 会出现什么问题......

# android - 错误膨胀类（自定义视图）

> ID：13074557
> 
> 赞同：1
> 
> 时间：2012-10-25T18:06:11.400
> 
> 标签：android, android-edittext, inner-classes, inflate-exception

我正在尝试创建自定义编辑文本并卡在这里...

请在下面查看我的代码

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public static  class MyEditText1 extends EditText{

    Paint mPaint;

    public MyEditText1(Context context) {
        super(context);
        // TODO Auto-generated constructor stub

    }

    public MyEditText1(Context context, AttributeSet attrs) {
        super(context, attrs);
        mPaint=new Paint();
        mPaint.setColor(Color.BLACK);

    }

    @Override
    protected  void onDraw(Canvas c){
        super.onDraw(c);
        int height=getHeight();
        int width=getWidth();
        int linespace=10;
    int count=height/linespace;

        for(int i=0;i<count;i++){
            c.drawLine(0, i*linespace, width, i*linespace, mPaint);
        }

    }

     }

} 
```

MyEditText 类是内部类

我在我的 xml 中将此视图称为

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<com.example.customedittext.MainActivity.MyEditText1

    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:ems="10" 
    android:inputType="textNoSuggestions"/>

 </RelativeLayout> 
```

但是该应用程序在启动后立即强制关闭。但是当我将内部类作为 MyEditText.java 保存在单独的文件中（并在 xml 中引用它）时，它工作正常..将其保留为内部类有什么问题。 .即使我已经使我的内部类静态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T18:10:20.957

因为您的视图是一个内部类，所以您需要引用它与您的 XML 稍有不同（注意`$`符号）：

```
com.example.customedittext.MainActivity$MyEditText1 
```

# c# - 选择下拉值时如何取消选择单选按钮

> ID：13074560
> 
> 赞同：0
> 
> 时间：2012-10-25T18:06:26.227
> 
> 标签：c#, asp.net, drop-down-menu

我在选项 1 和选项 2 下有 2 个单选按钮和一个下拉列表。用户可以选择单选按钮或下拉列表。

**选项1**

```
radiobtn1
radiobtn2 
```

**选项2**

```
dropdownlistbox 
```

option1 下的 radiobtn1 被默认选中。当用户从下拉列表中选择值时，两个单选按钮都应该被​​禁用，或者应该取消选择默认选中的 radiobtn1。

```
 <tr><td>option1</td></tr>
            <tr>
            <td><asp:RadioButton ID="rdo" GroupName="Month" Text="radiobtn1" runat="server /></td>
            <td><asp:RadioButton ID="rdo2" GroupName="Month" Text="radiobtn2" runat="server /></td>
            </tr>
            <tr><td>option2</td></tr>
            <tr><td>
            <asp:DropDownList ID="DropDownList1" runat="server" OnSelectedIndexChanged="ddMonYear_SelectedIndexChanged">
                        <asp:ListItem  Text="opt1"></asp:ListItem>
                        <asp:ListItem Text="opt2"></asp:ListItem>
            </asp:DropDownList>
            </td></tr>

protected void Page_Load(object sender, EventArgs e)
{
rdo.Checked=true;
if (ddMonYear.SelectedValue.Length.ToString() != "0")
        {
            rdo.Checked = false;
            rdo.Enabled = false;
        }
        else
        {
            rdo.Checked = true;
        }
} 
```

上面的代码不起作用。当我从下拉列表中选择值时，radiobtn 1 没有取消选择。

帮助我更正我的代码。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:10:27.087

在您的下拉框中，添加此代码（自动回发）

```
<asp:DropDownList ID="DropDownList1" runat="server" OnSelectedIndexChanged="ddMonYear_SelectedIndexChanged" AutoPostBack=True"> 
```

这样做是保持下拉框的值。每次加载页面时，下拉框都会在页面加载事件触发之前获取默认值。试试看。

# sql-server - 选择更新，Sql Server 2008

> ID：13074566
> 
> 赞同：0
> 
> 时间：2012-10-25T18:06:42.077
> 
> 标签：sql-server

我有一个用于 Oracle 的 Java 代码，我用它在数据库中保存一个文件，该文件存储在 Blob 字段中，为此我使用“选择更新”并将连接放入“自动提交（假）”以保持打开该记录的通道，之后我将结果保存在 Blob 中，然后将内容写入 OutputStream，然后执行“commit”并将连接放回“autocommit (true)”。

问题是，如何为 SQL Server 2008 执行“选择更新”？我一直在阅读，可能在我的选择中带有“WITH（ROWLOCK）”，但如果我这样做了，在您承诺写入 OutputStream 对象后会自动解锁吗？或者程序是什么？

谢谢收听。

# php - 如何防止多次加载PHP脚本调用JS脚本？

> ID：13074568
> 
> 赞同：1
> 
> 时间：2012-10-25T18:06:58.473
> 
> 标签：php, javascript, ajax

我在 Ajax 上为用户评论创建了一个简单的投票系统（+ 和 -）。一页有 50 条发表的评论，您可以为每个“加号”或“减号”投票。这些数据通过 PHP 脚本发送到数据库。但是，如果用户投票，PHP 脚本会被调用 50 次——它在 Chrome 开发者工具中可见。有错误 - 比预期更多的价值。这是我的代码（两个 DIV 按钮和脚本）。

请告诉我如何将代码更改为仅调用一次的脚本（up_vote.php 或 down_vote.php）。

```
<script type="text/javascript" src="raitings/jquery.js"></script>
<script type="text/javascript">$(function() {$(".vote").click(function() {

var id = $(this).attr("id");
var name = $(this).attr("name");
var dataString = 'id='+ id ;
var parent = $(this);

if(name=='down')
{
$(this).fadeIn(200).html('<img src="raitings/dot.gif" align="absmiddle">');
$.ajax({type: "POST", url: "raitings/down_vote.php", data: dataString, dataType : "html", cache: false, success: function(html)
   { parent.html(html);}
 });
}
else
{
$(this).fadeIn(200).html('<img src="raitings/dot.gif" align="absmiddle">');
$.ajax({type: "POST", url: "raitings/up_vote.php", data: dataString, dataType : "html", cache: false, success: function(html)
   { parent.html(html);
  }  });
}
return false;
    });
});
</script>

//php code below;
echo "<div class=\"box1\"><div class=\"up\"><a href=\"#\" class=\"vote\" title=\"+ 1\" alt=\"+ 1\" id=".$row["id"]." name=\"up\">".$up."</a></div>"
."<div class=\"down\"><a href=\"#\" class=\"vote\" title=\"- 1\" alt=\"- 1\"  id=".$row["id"]." name=\"down\">".$down."</a></div></div>\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:00:42.670

使用 jQuery，重要的是要知道事件是可堆叠的，即使事件完全相同。例如：

```
$(".vote").click(function() { alert("hi"); });
$(".vote").click(function() { alert("hi"); });
$(".vote").click(function() { alert("hi"); }); 
```

如果我们逐字运行这三行，我们将附加*3 个不同的事件。*也就是说，通过单击`vote`该类的元素，我们将一个接一个地收到 3 个警报。

此外，经常发生通过 ajax 加载的页面带有`<script></script>`父页面的相同块，在这种情况下，代码会在每次 ajax 调用时不经意地一次又一次地处理。

虽然我无法通过您提供的代码准确指出这是如何发生的，但似乎这是最有可能的情况：您的点击处理程序事件被加载了多次，结果一键触发了几次 ajax 调用。

正如我在评论中提到的那样，快速而肮脏的解决方案正在替换：

```
$(".vote").click(function() 
```

经过：

```
$(".vote").unbind("click").click(function() 
```

这要归功于[unbind](http://api.jquery.com/unbind/)功能，每次附加一个新事件时，它都会强制它丢弃以前附加的事件，从而防止它附加多个事件，无论代码被处理多少次。

虽然这会起作用，但更好的解决方案当然是找到多次加载的 js 代码的位置，并确保它只加载一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:16:41.777

$(".vote").each(function () { $(this).click( clickHandler .... etc 应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:18:53.293

我不完全理解你的版本是如何工作的，但我会这样做：

```
<a href="JavaScript:vote_up(200);"> + </a>
<a href="JavaScript:vote_down(200);"> - </a> 
```

其中 200 将是评论的唯一 ID。然后在 JavaScript 中定义一个 vote_up() 和 vote_down() 函数并在那里添加你的 ajax 请求。这样，当单击 +/- 按钮时，它不应多次调用脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:18:54.980

您可以在向您发送 ajax 请求之前禁用按钮。

```
// Sample:

$(function() {
    $(".vote").click(function() {

    var id = $(this).attr("id");
    var name = $(this).attr("name");
    var dataString = 'id='+ id ;
    var parent = $(this);

    parent.fadeIn(200).html('<img src="raitings/dot.gif" align="absmiddle">');

    if(name=='down')
    {   
        $.ajax({
        type: "POST", 
        url: "raitings/down_vote.php", 
        data: dataString, 
        dataType : "html", 
        cache: false, 
        beforeSend: function() {
            parent.attr("disabled", true);
        },
        success: function(html) {
            parent.html(html);
        }
        });
    } else {    
        $.ajax({
        type: "POST", 
        url: "raitings/up_vote.php", 
        data: dataString, 
        dataType : "html", 
        cache: false, 
        beforeSend: function() {
            parent.attr("disabled", true);
        },
        success: function(html) {
            parent.html(html);
        }
        });
    }

    return false;
    });
}); 
```

# mysql - MySQL ORDER BY 取决于 CASE 顺序 ASC 或 DESC

> ID：13074571
> 
> 赞同：1
> 
> 时间：2012-10-25T18:07:05.603
> 
> 标签：mysql, case

我想基于从另一个表顺序 ASC 或 DESC 查询的值。

所以是这样的：

```
SELECT *
FROM table
ORDER BY 
    CASE (SELECT sorting from table2 WHERE table2.id = ?)
        WHEN 1 THEN table.date ASC END 
        WHEN 0 THEN table.date DESC END
    END 
```

MySQL中有类似的东西吗？

我已经为 MS-SQL Server 看到了一些解决方案：[如何在 asc 和 desc 中动态订购 2 个 SQL 字段](https://stackoverflow.com/questions/4993229/how-to-order-2-sql-fields-in-asc-and-desc-dynamically)

**编辑**：我刚刚看到我在描述中犯了一个错误，已修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:12:50.390

```
order by if((select sorting from table2 where table2.id = ?) = 1,
  unix_timestamp(table.date), -unix_timestamp(table.date)) 
```

如果您的列是数字，则否定有效。如果它是一个字符串，您也许可以找到另一个函数来将高值映射到低值......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:11:19.597

不能按照您建议的方式有条件地构造 T-SQL 语句。

您需要将查询构造为 varchar，然后对构造的字符串执行 EXEC，如下所示：

```
Declare @QueryString varchar(100)
Declare @Direction int

Select @direction = sorting
  from table2
 where table2.id=? //from your original, not clear how you are providing it

Set @QueryString = 'Select * from table order by yourField ' + case when @direction=1 then 'ASC' else 'DESC' end

Exec (@QueryString) 
```

* * *

**编辑**假设您的 order_by 字段是数字，您采用的一个技巧（尽管我不确定它是否属于“最佳实践”阵营）是将 order by 字段的值乘以 -1 以反转默认顺序，例如

```
Select @Direction = sorting
  from table2
 where table2.id=? 

Select * 
  from table
  order by (case when @direction=1 then -1 else 1 end) *yourField 
```

# java - Icefaces selectMultipleCheckbox 已选中

> ID：13074579
> 
> 赞同：1
> 
> 时间：2012-10-25T18:08:02.403
> 
> 标签：java, jsf, icefaces

我有一个 selectManyCheckbox 组件。categories 是我在其中插入的 selectItems 的数组列表，因此它创建了多个具有正确名称的复选框。我还有另一个数组列表，它决定最初是否要检查复选框，称为categoriy_checked。有谁知道我必须把它放在哪里才能让它工作？因为我找不到选定或检查的属性或类似的东西。

```
<ice:selectManyCheckbox id="master_categories" layout = "pageDirection">
     <f:selectItems id="category_master" value="#{ticket.categories}" />
</ice:selectManyCheckbox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:02:34.270

只需以通常的方式将输入组件的值绑定到 bean 属性（我假设您已经拥有它；您将如何收集提交的值？）：

```
<ice:selectManyCheckbox value="#{ticket.selectedCategories}"> 
```

它应该映射到`List`与 的项值相同类型的项或数组`#{ticket.categories}`。您可以在 bean 的 (post) 构造函数中填充所选项目。

```
private List<Category> selectedCategories;

@PostConstruct
public void init() {
    selectedCategories = createAndFillItSomehow();
} 
```

# c# - winforms中购物车项目的控件（或控件集）？

> ID：13074580
> 
> 赞同：0
> 
> 时间：2012-10-25T18:08:05.227
> 
> 标签：c#, winforms

什么是最好的 Windows 窗体控件（或控件集），它使用户能够从商品列表中选择项目并为每个项目选择计数，该结构类似于购物车，但我需要在 Windows 窗体上实现它，我怎么能使用 Windows 窗体控件完成此操作，该场合的最佳实践是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:25:44.227

商品列表的 ListBox 控件....

然后使用一个带有加号和减号按钮的小文本框作为计数器

# iphone - 通讯簿使用未格式化号码查找格式化号码

> ID：13074581
> 
> 赞同：0
> 
> 时间：2012-10-25T18:08:05.430
> 
> 标签：iphone, objective-c, xcode

当用户输入例如 0612345678 但在地址簿中存在此电话号码但格式为 (06) 12 34 56 78 或 +3112345678 时，我如何在用户地址簿中找到电话号码，所以基本上我的问题是......有没有办法检查电话号码，即使它有这些格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:10:52.650

我研究过同样的概念。我所做的是我得到了电话号码`NSString`。

现在，我有一个电话号码，例如 +(999)555-8888。因此，要删除`()`,`-`和`+`，我只是简单地使用了`NSString`方法`stringByReplacingOccurrencesOfString:@"(" withString:@""`....and 对`)`,`-`和`+`.

最后，结果得到了 9995558888。

我想这可能会对你有所帮助.....:)

# ruby-on-rails - 实现 ActiveModel Dirty Rails 3.2.8 的问题

> ID：13074582
> 
> 赞同：4
> 
> 时间：2012-10-25T18:08:06.587
> 
> 标签：ruby-on-rails

我想检查模型上的属性何时发生变化。我曾尝试在保存之前检查值 != 表单上的值，但该代码确实很难看，有时无法正常工作。与使用 update_column 相同，它不会在我的模型类中进行验证。如果我使用 update_attributes 而不做其他事情，我将无法根据我的理解检查字段何时更新。从我对 Stack Overflow 和其他网站的网络研究看来，使用 ActiveModel Dirty 是可行的方法。

我看过这个：[http ://api.rubyonrails.org/classes/ActiveModel/Dirty.html](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)

我希望使用它来检查使用 update_attributes 后模型上的布尔标志是否发生了变化。我尝试按照包含的链接中所述进行最低限度的实施。我在我的 ActiveRecord 类中添加了以下内容：

```
include ActiveModel::Dirty

define_attribute_methods [:admin] 
```

我尝试添加我想要跟踪的三个属性。我从一个属性开始，看看我是否可以让它工作。运行 rspec 测试时收到以下错误。一旦我删除了论点，我就没有错误了。

```
Exception encountered: #<ArgumentError: wrong number of arguments (1 for 0)> 
```

删除参数后，我决定使用 admin 而不是 name 在我的模型中包含类似的方法。其他 Rspec 测试在 save 方法上中断。但是我觉得问题在于我如何实现 ActiveModel Dirty。

我读过其他 Stack Overflow 帖子，评论者说这包含在 3.2.8 中，所以我从 3.2.6 升级到 3.2.8。我不明白这意味着什么，所以在出现错误后我决定只保留 include ActiveModel::Dirty 语句并尝试使用 admin_changed? 当然它没有用。

除了我在此处包含的链接之外，我无法找到有关如何为此进行初始设置的任何信息。我发现的所有其他研究都假设初始设置是正确的，并且更新到当前稳定版本的 Rails 可以解决他们的问题。

任何帮助将不胜感激如何实现这一点。执行链接中所述的最小实现不起作用。也许我还缺少其他东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T21:00:47.287

问题似乎是 ActiveRecord 重新定义了`define_attribute_methods`接受 0 个参数的方法（因为 ActiveRecord 自动为数据库表中的每一列创建属性方法）：[https ://github.com/rails/rails/blob/master/activerecord/lib/ active_record/attribute_methods.rb#L23](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/attribute_methods.rb#L23)

这覆盖了`define_attribute_methods`ActiveModel 提供的方法：[https ://github.com/rails/rails/blob/master/activemodel/lib/active_model/attribute_methods.rb#L240](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/attribute_methods.rb#L240)

**解决方案：**

我想出了一个对我有用的解决方案......

将此文件另存为`lib/active_record/nonpersisted_attribute_methods.rb`：[https ://gist.github.com/4600209](https://gist.github.com/4600209)

然后你可以做这样的事情：

```
require 'active_record/nonpersisted_attribute_methods'
class Foo < ActiveRecord::Base
  include ActiveRecord::NonPersistedAttributeMethods
  define_nonpersisted_attribute_methods [:bar]
end

foo = Foo.new
foo.bar = 3
foo.bar_changed? # => true
foo.bar_was # => nil
foo.bar_change # => [nil, 3]
foo.changes[:bar] # => [nil, 3] 
```

但是，当我们这样做时，看起来我们会收到警告：

```
DEPRECATION WARNING: You're trying to create an attribute `bar'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. 
```

所以我不知道这种方法是否会在 Rails 4 中中断或更难......

也可以看看：

*   [在 Rails 的 ActiveRecord 对象中跟踪未持久属性的脏](https://stackoverflow.com/questions/5666745/track-dirty-for-not-persisted-attribute-in-an-activerecord-object-in-rails/14470474)
*   [https://github.com/adzap/validates_timeliness/issues/73](https://github.com/adzap/validates_timeliness/issues/73)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-15T23:52:22.883

尝试添加 =，如下所示：

```
define_attribute_methods = [:admin] 
```

这种改变对我有用。不确定这是否与[此](https://github.com/rails/rails/commit/d0f9f4e66467f7ab6a75c16e1a5b9d00912870cc)有关？

# google-maps - 谷歌地图未呈现正确的位置

> ID：13074585
> 
> 赞同：-2
> 
> 时间：2012-10-25T18:08:21.797
> 
> 标签：google-maps, dotnetnuke

我们在 DotNetNuke 6.0 皮肤中使用以下代码：

```
<iframe width="310" height="226" frameborder="0" scrolling="no" marginheight="0"
marginwidth="0" src="http://maps.google.com/maps?  f=d&amp;source=s_d&amp;saddr=Howell+Sand+Co+INC++2300+East+Hastings+Avenue+Amarillo,+TX+79108,+United+State+of+America+(806)+383-1721&amp;daddr=&amp;hl=en&amp;geocode=&amp;aq=&amp;sll=37.0625,-95.677068&amp;sspn=49.624204,79.013672&amp;mra=ls&amp;ie=UTF8&amp;ll=37.0625,-95.677068&amp;spn=49.624204,79.013672&amp;t=m&amp;iwloc=ddw0&amp;output=embed">
</iframe>
<br />
<small><a href="http://maps.google.com/maps?f=d&amp;source=embed&amp;saddr=Howell+Sand+Co+INC++2300+East+Hastings+Avenue+Amarillo,+TX+79108,+United+State+of+America+(806)+383-1721&amp;daddr=&amp;hl=en&amp;geocode=&amp;aq=&amp;sll=37.0625,-95.677068&amp;sspn=49.624204,79.013672&amp;mra=ls&amp;ie=UTF8&amp;ll=37.0625,-95.677068&amp;spn=49.624204,79.013672&amp;t=m&amp;iwloc=ddw0"
style="color: #0000FF; text-align: left">View Larger Map</a></small> 
```

在当前状态下，地图会在页面上呈现。但是，它呈现的位置不是正确的地址。请在[此处查看当前行为](http://temp.i360designsite.com/Home.aspx)

我已经进一步阅读了静态地图 API，并且想知道是否应该重写上述内容以调用该 API？或者，我们应该采取不同的方法吗？

更新：我重写了 javascript，如下所示：

```
function initialize() {

var mapOptions = {
    center: new google.maps.LatLng(35.249369, -101.807561)
};
var map = new google.maps.Map(document.getElementById("map"), mapOptions);
GEvent.addListener(marker, "mouseover ", function() {
    marker.openInfoWindowHtml(" < html > < body style = \"font-size: 8px;\"><table><tr><td align='left'><b>Company:</b> </td><td>Howell Sand Co Inc.<br/></td></tr>" + "<tr><td style=\"vertical-align:top;\"><b>Address:</b> </td><td>2300 East Hastings Avenue,<br/> Amarillo, TX 79108 (806) 383-1721 </td>" + "</tr></body></html>");
});
map.addOverlay(marker);
}

$(document).ready(function() {
initialize();
}); 
```

不幸的是，此时地图根本不会渲染。必须做些什么来修改上述代码以呈现正确的地图和位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:14:46.180

[该页面上](http://temp.i360designsite.com/Home.aspx)的地图与您发布的代码无关。它是 Google Maps API v2 地图（尽管它需要 v1）。代码如下。标记正是代码将其放置在 Latitude = "37.0625", Longitude = "-95.677068" 的位置，它[位于 Kansas 的某个地方](http://www.geocodezip.com/v3_example_geo2.asp?addr1=37.0625,-95.677068&geocode=1&zoom=10)。请注意，v2 API 已弃用，最早可能会在 2013 年 5 月停止工作。

```
 <script src="http://maps.google.com/maps?file=api&v=1&key=AIzaSyCsOdhbicIzYAIw7446dYmhHBGjmpZiS48"
    type="text/javascript"></script>
<script type="text/javascript">
    function initialize() {

        if (GBrowserIsCompatible()) {
            map = new GMap2(document.getElementById('map_canvas'));
            map.setCenter(new GLatLng(37.4419, -122.1419), 12);

            map.setUIToDefault();

            var baseIcon = new GIcon(G_DEFAULT_ICON);
            baseIcon.shadow = "http://www.google.com/mapfiles/shadow50.png";
            baseIcon.iconSize = new GSize(20, 34);
            baseIcon.shadowSize = new GSize(37, 34);
            baseIcon.iconAnchor = new GPoint(9, 34);
            baseIcon.infoWindowAnchor = new GPoint(9, 2);

            var myLatitude = "37.0625";
            var myLongitude = "-95.677068";
            var strStorename = "Howell Sand Co Inc";
            var strAddress1 = "2300 East Hastings Avenue, Amarillo, TX 79108 (806) 383-1721";
            var strURL = document.getElementById('dnn_hdfStoreURL').value;

            var URL = "";
            if (strURL != "") {
                URL = "<tr><td><b>URL:</b></td><td><a href=\"" + strURL + "\">" + strURL + " </a></td></tr>";
            }
            var point = new GLatLng(myLatitude, myLongitude);

            map.setCenter(point, 12);

            var letteredIcon = new GIcon(baseIcon);
            letteredIcon.image = "images/howellsandpointer.png";

            // Set up our GMarkerOptions object
            markerOptions = { icon: letteredIcon };
            var marker = new GMarker(point, markerOptions);

            GEvent.addListener(marker, "mouseover", function() {
                marker.openInfoWindowHtml(
                                           "<html><body style=\"font-size: 8px;\"><table><tr><td align='left'><b>Company:</b> </td><td>Howell Sand Co Inc.<br/></td></tr>" +
                                                    "<tr><td style=\"vertical-align:top;\"><b>Address:</b> </td><td>2300 East Hastings Avenue,<br/> Amarillo, TX 79108 (806) 383-1721 </td>" +
                                                    "</tr></body></html>");
            });
            map.addOverlay(marker);
        }

    }

    $(document).ready(function() {
        initialize();
    }); 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:44:28.193

URL 中有多余的空格。去掉它。

```
<iframe width="310" height="226" frameborder="0" scrolling="no" marginheight="0"
marginwidth="0" src="http://maps.google.com/maps?  f=d&amp;source=s_d&amp;saddr=Howell+Sand+Co+INC++2300+East+Hastings+Avenue+Amarillo,+TX+79108,+United+State+of+America+(806)+383-1721&amp;daddr=&amp;hl=en&amp;geocode=&amp;aq=&amp;sll=37.0625,-95.677068&amp;sspn=49.624204,79.013672&amp;mra=ls&amp;ie=UTF8&amp;ll=37.0625,-95.677068&amp;spn=49.624204,79.013672&amp;t=m&amp;iwloc=ddw0&amp;output=embed">
</iframe>

<iframe width="310" height="226" frameborder="0" scrolling="no" marginheight="0"
marginwidth="0" src="http://maps.google.com/maps?f=d&amp;source=s_d&amp;saddr=Howell+Sand+Co+INC++2300+East+Hastings+Avenue+Amarillo,+TX+79108,+United+State+of+America+(806)+383-1721&amp;daddr=&amp;hl=en&amp;geocode=&amp;aq=&amp;sll=37.0625,-95.677068&amp;sspn=49.624204,79.013672&amp;mra=ls&amp;ie=UTF8&amp;ll=37.0625,-95.677068&amp;spn=49.624204,79.013672&amp;t=m&amp;iwloc=ddw0&amp;output=embed">
</iframe> 
```

# python - 使用 BeautifulSoup 从表中提取选定的列

> ID：13074586
> 
> 赞同：14
> 
> 时间：2012-10-25T18:08:24.767
> 
> 标签：python, html-parsing, beautifulsoup

我正在尝试使用 BeautifulSoup提取[此数据表的第一列和第三列。](http://www.samhsa.gov/data/NSDUH/2k10State/NSDUHsae2010/NSDUHsaeAppC2010.htm#tabC.7)从 HTML 来看，第一列有一个`<th>`标签。感兴趣的另一列具有`<td>`标记。无论如何，我所能得到的只是带有标签的列的列表。但是，我只想要文字。

`table`已经是一个列表，所以我不能使用`findAll(text=True)`. 我不确定如何以另一种形式获取第一列的列表。

```
from BeautifulSoup import BeautifulSoup
from sys import argv
import re

filename = argv[1] #get HTML file as a string
html_doc = ''.join(open(filename,'r').readlines())
soup = BeautifulSoup(html_doc)
table = soup.findAll('table')[0].tbody.th.findAll('th') #The relevant table is the first one

print table 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-25T18:30:49.187

你可以试试这段代码：

```
import urllib2
from BeautifulSoup import BeautifulSoup

url = "http://www.samhsa.gov/data/NSDUH/2k10State/NSDUHsae2010/NSDUHsaeAppC2010.htm"
soup = BeautifulSoup(urllib2.urlopen(url).read())

for row in soup.findAll('table')[0].tbody.findAll('tr'):
    first_column = row.findAll('th')[0].contents
    third_column = row.findAll('td')[2].contents
    print first_column, third_column 
```

如您所见，代码只是连接到 url 并获取 html，BeautifulSoup 找到第一个表，然后所有 'tr' 并选择第一列，即 'th'，第三列，即一个'td'。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T18:42:07.777

除了@jonhkr 的回答，我想我会发布一个我想出的替代解决方案。

```
 #!/usr/bin/python

 from BeautifulSoup import BeautifulSoup
 from sys import argv

 filename = argv[1]
 #get HTML file as a string
 html_doc = ''.join(open(filename,'r').readlines())
 soup = BeautifulSoup(html_doc)
 table = soup.findAll('table')[0].tbody

 data = map(lambda x: (x.findAll(text=True)[1],x.findAll(text=True)[5]),table.findAll('tr'))
 print data 
```

与 jonhkr 的答案不同，它拨入网页，我的假设您将其保存在您的计算机上并将其作为命令行参数传递。例如：

```
python file.py table.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-02T09:26:25.703

你也可以试试这段代码

```
import requests
from bs4 import BeautifulSoup
page =requests.get("http://www.samhsa.gov/data/NSDUH/2k10State/NSDUHsae2010/NSDUHsaeAppC2010.htm")
soup = BeautifulSoup(page.content, 'html.parser')
for row in soup.findAll('table')[0].tbody.findAll('tr'):
    first_column = row.findAll('th')[0].contents
    third_column = row.findAll('td')[2].contents
    print (first_column, third_column) 
```

# java - 日历返回错误的当前日期android

> ID：13074588
> 
> 赞同：5
> 
> 时间：2012-10-25T18:08:34.213
> 
> 标签：java, android, calendar

为什么此代码返回 0001-02-05？

```
public static String getNowDate() throws ParseException
{        
    return Myformat(toFormattedDateString(Calendar.getInstance()));
} 
```

我将代码更改为：

```
public static String getNowDate() throws ParseException
{        
    Calendar temp=Calendar.getInstance();
    return temp.YEAR+"-"+temp.MONTH+"-"+temp.DAY_OF_MONTH;
} 
```

现在它返回 1-2-5。

请帮我看看实际日期。我需要的只是 SDK 日期。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T18:10:26.637

`Calendar.YEAR`, `Calendar.MONTH`,`Calendar.DAY_OF_MONTH`是常量（只需在[API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)`int`中查找）...

`String`因此，正如@Alex 发布的那样，要从实例中创建格式化`Calendar`，您应该使用 SimpleDateFormat。

但是，如果您需要特定字段的数字表示，请使用以下`get(int)`函数：

```
int year = temp.get(Calendar.YEAR);
int month = temp.get(Calendar.MONTH);
int dayOfMonth = temp.get(Calendar.DAY_OF_MONTH); 
```

**警告！**月份从0开始！！！因为这个，我犯了一些错误！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-25T18:10:25.437

采用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

```
new SimpleDateFormat("yyyy-MM-dd").format(Calendar.getInstance().getTime()); 
```

您正在使用要与该`Calendar.get()`方法一起使用的常量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T18:12:11.370

为什么不使用`SimpleDateFormat`？

```
public static String getNowDate() {
  return new SimpleDateFormat("yyyy-MM-dd").format(new Date());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:15:33.343

你这样做是不对的。改成：

```
return temp.get(Calendar.YEAR)+"-"+ (temp.get(Calendar.MONTH)+1) +"-"+temp.get(Calendar.DAY_OF_MONTH); 
```

此外，您可能需要查看[Date](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)：

```
Date dt = new Date();
//this will get current date and time, guaranteed to nearest millisecond
System.out.println(dt.toString());
//you can format it as follows in your required format
System.out.println(new SimpleDateFormat("yyyy-MM-dd").format(dt)); 
```

# c++ - 'list::list' 命名构造函数，而不是类型

> ID：13074590
> 
> 赞同：9
> 
> 时间：2012-10-25T18:08:35.790
> 
> 标签：c++

在使用构造函数编译我的类链表时出现此错误。我想做一个复制赋值运算符，但我得到这个错误'list :: list'命名构造函数，而不是类型。该行是：

```
list::list& operator= (const list &l) 
```

列表是我班级的名字

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T18:10:17.617

这个错误是不言自明的。

使用此代码：

```
list& operator= (const list &l) 
```

在类声明之外，您必须明确该函数属于哪个范围：

```
list& list::operator= (const list &l)
//    ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T18:11:48.070

如果您*在*`operator=`类定义中定义函数，请这样声明：

 *```
class list {
  ...
  list& operator=(const list&) { ... return *this; }
}; 
```

如果你在你的类定义*之外*`operator=`定义你的函数，在这个完整和正确的例子中声明它：

 *```
class list {
  public:
  list& operator=(const list&);
};
list& list::operator=(const list&) {
  return *this;
}
int main() {} 
```**

# ios - IOS：UIWebView：youtube 视频缩略图不适合 UIWebview

> ID：13074592
> 
> 赞同：4
> 
> 时间：2012-10-25T18:08:45.733
> 
> 标签：ios, uiwebview

我在 UIWebView 中嵌入了 youtube 视频。UIWebView 的大小为 124x86。相同的代码是：

```
NSString* embedHTML =@"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"124\" height=\"86\"></embed>\
    </body></html>"; 
```

加载后，缩略图无法正确显示。它的大小比 124x86 大，不适合 UIWebView。（所以现在我只能看到缩略图的 1/4 部分）。

我希望缩略图缩小（或生成）到 124x86 的大小并适合 UIWebView。

# facebook - Heroku 和 facebook - 甚至无法克隆我的应用程序以开始工作

> ID：13074595
> 
> 赞同：1
> 
> 时间：2012-10-25T18:09:16.793
> 
> 标签：facebook, git, heroku

最近我开始使用 Heroku 开发一个 facebook 应用程序，他们的教程在这个问题上非常广泛。但是，当尝试将我的应用程序克隆到我的机器时，我收到以下错误：

Permission denied (publickey) fatal: 远端意外挂断

我尝试了所有能找到的解决方案，重置我的密钥，上传新密钥，编辑密钥存档，但似乎没有一个能解决我的问题。

有没有人对此有不同的选择？谢谢

我正在运行 Windows 7 Enterprise，我的应用程序设置为在 PHP 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:24:46.490

无论你把钥匙放在哪里试试

```
heroku keys:add 
```

> 如果没有参数，它将在默认位置（~/.ssh/id_rsa.pub 或 ~/.ssh/id_dsa.pub）查找密钥。如果您希望使用备用密钥文件，请将其指定为参数。确保您指定了密钥的公共部分（以 .pub 结尾的文件）。永远不要将密钥的私有部分传输给任何第三方。

[https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:38:33.327

只是想知道您是否正在使用 Ruby 启动命令提示符？我对此也有一些问题，请仔细检查您的 ssh

# android - 如何在 HTML5 中创建类似于 Android 的模式登录？

> ID：13074599
> 
> 赞同：1
> 
> 时间：2012-10-25T18:09:23.573
> 
> 标签：android, html, design-patterns, html5-canvas

我为 Android 等 Pattern 登录创建了 HTML5 版本，但不幸的是，我对 HTML5 了解不多，无法提供所需的功能。

我怎么能用鼠标做到这一点？

我的项目是这样的：http: [//jsfiddle.net/atiruz/mvkv9/3/](http://jsfiddle.net/atiruz/mvkv9/3/)

```
var size = 3; // Dimensions -> 3x3.
var ancho = size * 82 + 10;
var alto = ancho;
var drawingCanvas = createCanvas(document.getElementById('canvas'), 600, 600);
var context = drawingCanvas.context;

context.beginPath();
CrearContenedor(context,0,0,ancho,alto,15);
for (var i = 1; i <= size; i++) {
    for (var j = 1; j <= size; j++) {
        CrearBoton(context, i * 80 - 32, j * 80 - 32, ancho, alto);
    }
} 
```

结果是：

![在此处输入图像描述](../Images/9af6510aa3e429a60509ee7fa33a2c19.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:53:34.850

这是一个非常基本的（仅限 webkit）画布实现：http: [//jsfiddle.net/ChfGh/1/](http://jsfiddle.net/ChfGh/1/)

我正在使用 jQuery 进行事件处理，但这并不是绝对必要的。

```
var can = $("#canvas")[0],
    ctx = can.getContext('2d'),
    wid = can.width,
    hei = can.height,
    pad = 20,
    circles = [],
    selCircs = [],
    correctPath = [0,3,7,5,2],
    startPoint = {
        x: 0,
        y: 0
    },
    dragging = false;

(function init() {
    var rad = (wid - pad * 4) / 3;

    for (var i = 0; i < 3; i++) {
        for (var j = 0; j < 3; j++) {
            circles.push(new Circle({
                x: j * (pad + rad) + pad + rad / 2,
                y: i * (pad + rad) + pad + rad / 2
            }, rad / 2));
        }
    }
})();
(function draw() {
    ctx.clearRect(0, 0, wid, hei);

    for (var i = 0; i < circles.length; i++) {
        circles[i].draw(ctx);
    }

    if (dragging && selCircs.length > 1) {
        var pos = selCircs[0].circ.position();
        ctx.beginPath();
        ctx.lineWidth = 10;
        ctx.strokeStyle = "#000";
        ctx.moveTo(pos.x, pos.y);
        for (var j = 1; j < selCircs.length; j++){
            pos = selCircs[j].circ.position();
            ctx.lineTo(pos.x,pos.y);
        }
        ctx.stroke();
    }
    webkitRequestAnimationFrame(draw);
})();

function Circle(center, radius, fill, stroke, hover, active) {
    var center = {
        x: center.x,
        y: center.y
    },
        radius = radius,
        fill = fill || '#ccc',
        hover = hover || '#ddd',
        active = active || '#0f0',
        stroke = stroke || '',
        path;
    this.position = function(){
        return {x:center.x, y:center.y};
    }
    this.draw = function(ctx) {
        ctx.fillStyle = this.selected ? active : this.hovering ? hover : fill;
        if (stroke) ctx.strokeStyle = stroke;

        ctx.beginPath();
        ctx.arc(center.x, center.y, radius, 0, Math.PI * 2, false);
        ctx.fill();
        if (stroke) ctx.stroke();
    };

    this.isPointInPath = function(x, y) {
        return Math.sqrt(Math.pow(center.x - x, 2) + Math.pow(center.y - y, 2)) <= radius;
    };
    this.hovering = false;
    this.selected = false;
}

$("#canvas").mousemove(function(e) {
    for (var i = 0; i < circles.length; i++) {
        var cir = circles[i];
        var pip = cir.isPointInPath(e.offsetX, e.offsetY);
        cir.hovering = pip;
        if (dragging && pip && !cir.selected) {
            selCircs.push({circ:cir, index:i});
            cir.selected = true;
        }
    }
});
$("#canvas").mousedown(function(e) {
    dragging = true;
});
$("#canvas").mouseup(function(e) {
    dragging = false;
    // validate path
    if (selCircs.length == correctPath.length){
        var valid = true;
        for (var i = 0; valid && i < correctPath.length; i++){
            var index = correctPath[i];
            if (selCircs[i].index !== index) valid = false;
        }
        if (valid) alert('correct!');
    }

    // reset selection
    for (var i = 0; i < selCircs.length; i++)
        selCircs[i].circ.selected = false;

    selCircs = [];
});​ 
```

这是我最终为了好玩而实现的风格：http: [//jsfiddle.net/ChfGh/6/](http://jsfiddle.net/ChfGh/6/)

您可以使用`map`从选定的圆圈中提取索引：

```
var path = selCircs.map(function(ele){
    return ele.index;
}).join(" "); // " " if you want a space between, otherwise "" 
```

它将为您提供输入的字符串表示形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T08:11:56.203

[在http://pagoenka.github.io/](http://pagoenka.github.io/)签出“模式锁定”jquery 插件

# perl - 从 perl 中的哈希打印特定行

> ID：13074601
> 
> 赞同：0
> 
> 时间：2012-10-25T18:09:27.617
> 
> 标签：perl

我的问题是如何从哈希中打印特定行。到目前为止的代码（感谢 Joel Berger）是：

```
#!/usr/bin/env perl

use strict;
use warnings;

use LWP::Simple;

my $content = get('http://temptrax.itworks.com/temp');
my %probes = $content =~ /Probe\s*(\d)\|\s*(\-?[\d\.]+)/gx;

foreach my $probe (sort keys %probes) {
  print "$probe => $probes{$probe}\n";
} 
```

它的输出是：

```
1 => 74.0
2 => -99.9
3 => 74.4
4 => 68.1 
```

如何获得要打印的特定行？例如，如果我输入数字 1，那么只有第 1 行会打印。谢谢你看看这个。

更新：经过一番阅读，我终于弄明白了

```
#!/usr/bin/env perl
use v5.10.1;
use strict;
use warnings;

use LWP::Simple;

my $content = get('http://temptrax.itworks.com/temp');
my %probes = $content =~ /Probe\s*(\d)\|\s*(\-?[\d\.]+)/gx;

for ($ARGV[0]) {
  when(1) {print "$probes{1}\n"; }
  when(2) {print "$probes{2}\n"; }
  when(3) {print "$probes{3}\n"; }
  when(4) {print "$probes{4}\n"; }
  default {print "error"; }
} 
```

UPDATE2：想出了一个更简单的方法来做到这一点

```
#!/usr/bin/env perl
use v5.10.1;
use warnings;

use LWP::Simple;

my $content = get('http://temptrax.itworks.com/temp');
my %probes = $content =~ /Probe\s*(\d)\|\s*(\-?[\d\.]+)/gx;

$MyVar = $ARGV[0];
print $probes{$MyVar}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:11:26.870

```
print $probes{1}; 
```

也许？相当简单。或者：

```
print "$_ => ", $probes{$_} for 1,2,4;  # selected numbers 
```

# html - 固定左侧导航的问题

> ID：13074603
> 
> 赞同：0
> 
> 时间：2012-10-25T18:09:40.163
> 
> 标签：html, css, positioning, css-position

我有一个简单的布局，带有一个固定的左侧导航和一个居中的页面，现在在低分辨率下固定导航的问题是在我想要阻止的内容区域上进行竞争，但我无法这样做。

[演示](http://jsfiddle.net/hTqPk/)

知道如何让我的页面居中，甚至在屏幕分辨率较低时使用 div 固定在它旁边而不重叠我的元素

无论分辨率如何，我想要的都是这样，页面应该居中，但导航应该位于页面旁边并且不应该与页面重叠

![在此处输入图像描述](../Images/0b33f69e92efa2a8269a6524ddee09d2.png)

CSS

```
.page_wrapper {
    min-width: 750px;
    max-width: 750px;
    margin: 20px auto;
    border: 1px solid #ff0000;
}

.content_wrapper {
  margin: auto;
  max-width: 700px;
  margin-left: 120px;
}

p,
ul {
  margin: 0;
  padding: 0;
}
p {
  margin-bottom: 20px;
}
#nav {
  left: 300px;
  list-style: none;
  position: fixed;
  top: 20px;
}
#nav li {
  margin-bottom: 2px;
}
#nav a {
  background: #ededed;
  color: #666;
  display: block;
  font-size: 11px;
  padding: 5px 10px;
  text-decoration: none;
  text-transform: uppercase;
}
#nav a:hover {
  background: #dedede;
}
#nav .current a {
  background: #666;
  color: #ededed;
}
.current {
  background: red;
}

.section {
  border-bottom: 5px solid #ccc;
  padding: 20px;
}
.section p:last-child {
  margin-bottom: 0;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:23:01.780

据我所知，您在#nav 上的“left”属性导致它始终位于距左边距 300px 的位置。删除使左侧导航保持在左侧（而不是距离左侧 300 像素）。

代替：

```
#nav {
  left: 300px;
  list-style: none;
  position: fixed;
  top: 20px;
} 
```

尝试

```
#nav {
  list-style: none;
  position: fixed;
  top: 20px;
} 
```

有关更多信息，请参阅[W3 Schools Left Property](http://www.w3schools.com/cssref/pr_pos_left.asp)。

回应您的评论“这将使位置导航在页面的最左侧流动”：

添加`margin-left:20px;`属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T06:38:45.217

这可以通过

```
#nav {
    padding-left:20px;  
    padding-top:30px;
  list-style: none;
  position: fixed;
  top: 20px;
} 
```

## [现场小提琴](http://jsfiddle.net/xU8Ke/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T06:56:33.303

我为您制作了一个示例小提琴，您只需要一个包装器 div 和一个向右浮动的内容 div

[演示](http://jsfiddle.net/xU8Ke/1/)

我已经更改了一些容器 div 布局，基本上你可以将容器中的内容包装起来

HTML

```
<div class="main_container">
   <nav class="content_navigation">
      <ul id="nav">
          <li class="current"><a href="#section-1">Section 1</a></li>
          <li><a href="#section-2">Section 2</a></li>
           <li><a href="#section-3">Section 3</a></li>
           <li><a href="#section-4">Section 4</a></li>
           <li><a href="#section-5">Section 5</a></li>
       </ul>
   </nav>
   <div class="right_content">
   <div class="section" id="section-1">
      <strong>Section 1</strong>
    </div>
    <div class="section" id="section-2">
       <strong>Section 2</strong>
    </div>
    <div class="section" id="section-3">
       <strong>Section 3</strong>
    </div>
    <div class="section" id="section-4">
       <strong>Section 4</strong>
    </div>
    <div class="section" id="section-5">
        <strong>Section 5</strong>
    </div>
  </div>
</div> 
```

CSS

```
html, body {
    height: 100%;
    width: 100%;
}
.main_container {
    width: 900px;
    min-width: 900px;
    margin: 0 auto;
    background: #ffffff;
}
.content_navigation {
    width: 205px;
    position: fixed;
    margin-top: 120px;
}
.right_content {
    float: right;
    width: 675px;
    border-left: 1px solid #252525;
    margin-top: 25px;
}
#nav {
  list-style: none;
}
#nav li {
  margin-bottom: 2px;
}
#nav a {
  background: #ededed;
  color: #666;
  display: block;
  font-size: 11px;
  padding: 5px 10px;
  text-decoration: none;
  text-transform: uppercase;
}
#nav a:hover {
  background: #dedede;
}
#nav .current a {
  background: #666;
  color: #ededed;
}
.current {
  background: red;
}
.section {
  border-bottom: 5px solid #ccc;
  padding: 20px;
}
.section p:last-child {
  margin-bottom: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:52:25.773

`left: 50%`与否定`left-margin`一起使用`#nav`从中间定位

[jsfiddle](http://jsfiddle.net/pxfunc/hTqPk/3/)

```
#nav {
  left: 50%;
  margin-left:-350px;
  ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T06:57:54.673

我试图做一些类似于你在图中的东西，使`#nav`绝对定位 wrt `.left_navigation`。还删除了边距，`.content_wrapper`因为它似乎没有用。

```
.content_wrapper {
  /*margin-left: 120px;*/
}
#nav {
  left:-77px;
  width:76px;
  list-style: none;
  position: absolute;
  top: -1px;
}
.left_navigation{
    position:relative;
} 
```

[**演示**](http://jsfiddle.net/hTqPk/5/)

# cmake - 如何查看 Qt Creator 执行的 CMake 命令行语句？

> ID：13074606
> 
> 赞同：3
> 
> 时间：2012-10-25T18:10:02.207
> 
> 标签：cmake, qt-creator

我正在尝试调试命令行 CMake 失败。相同的 CMake 文件在 Qt Creator 中工作，Qt Creator 窗口中的参数与我在命令行中输入的相匹配。

这让我觉得 Qt Creator 正在添加一些额外的参数，这是有道理的，因为生成器下拉菜单有几个选项可以指定架构和 CMake 版本。

**有没有办法让 Qt Creator 执行 CMake 命令以产生所需的结果，特别是传递给 CMake 可执行文件的参数？**

我发现一篇关于查看 CMakeCache 文件以进行取证的帖子，但这仅证明存在差异，它并不能很快告诉我要更改哪些参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T22:52:20.350

尝试将以下块添加到 CMakeLists.txt 的末尾并再次从 Qt Creator 运行 CMake。CMake 输出应列出已通过`-D`命令行参数传递的所有变量。

```
get_cmake_property(CacheVars CACHE_VARIABLES)
foreach(CacheVar ${CacheVars})
  get_property(CacheVarHelpString CACHE ${CacheVar} PROPERTY HELPSTRING)
  if(CacheVarHelpString STREQUAL "No help, variable specified on the command line.")
    get_property(CacheVarType CACHE ${CacheVar} PROPERTY TYPE)
    if(CacheVarType STREQUAL "UNINITIALIZED")
      set(CacheVarType)
    else()
      set(CacheVarType :${CacheVarType})
    endif()
    set(CMakeArgs "${CMakeArgs} -D${CacheVar}${CacheVarType}=\"${${CacheVar}}\"")
  endif()
endforeach()
message("CMakeArgs: ${CMakeArgs}") 
```

有关详细信息，请参阅[此答案](https://stackoverflow.com/a/10218582/424459)。

这不会显示通过`-G`arg 选择了哪个生成器（如果有）。要找到它，您需要`CMAKE_GENERATOR:INTERNAL=...`在 CMakeCache.txt 中查找

如果这不能帮助您确定整体问题，您可能应该听取@arrowdodger 的建议并发布有关您遇到的错误和您的两个构建环境的更多详细信息。例如，从源代码树的子目录运行 CMake*可能会导致错误。*

# nsis - 有条件地复制文件

> ID：13074608
> 
> 赞同：0
> 
> 时间：2012-10-25T18:10:16.183
> 
> 标签：nsis

我正在尝试在我的 NSIS 脚本中执行以下操作。我不知道 NSIS，我只是下达了一个任务来调整一些东西。这个想法：如果这是window8，从不同的位置获取一些.exe文件部署到目标机器上：

所以我从获取版本开始：

```
ReadRegStr $WINVER HKLM \
 "SOFTWARE\Microsoft\Windows NT\CurrentVersion" CurrentVersion 
```

在要安装的文件列表中，我这样做：

```
;List of files to install
File file1.exe
File file2.exe

${If} StrCmp $WINVER '6.2'
  File .\otherlocationSource\file1.exe
  File .\otherlocationSource\file2.exe
${EndIf} 
```

我在 ${if}... 行收到 NSIS 脚本编译错误。

对于我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:31:56.617

${If} 宏在内部使用 StrCmp，语法是，`${If} $WINVER == "6.2"`但您确实应该使用 WinVer.nsh 进行版本检查。（如果您的本地副本不支持 Win8 ，您可以从[SVN](http://nsis.svn.sourceforge.net/viewvc/nsis/NSIS/trunk/Include/WinVer.nsh?revision=6249&view=markup&pathrev=6272)获取版本值）

对于这样的版本检查，除非它是特定于 Win8 的，否则您应该具有类似于“如果 $major > 6 或 ($major == 6 and $minor >= 2)”的逻辑，因此它也适用于 Win9 等

# html - 如何让 HTML 内容占据所有可用高度？

> ID：13074616
> 
> 赞同：0
> 
> 时间：2012-10-25T18:10:42.157
> 
> 标签：html, css

请考虑以下 jsFiddle - [http://jsfiddle.net/mark69_fnd/hwCuB/](http://jsfiddle.net/mark69_fnd/hwCuB/)（您可以在问题正文之后找到代码）。

它代表了经典页眉、内容、页脚 HTML 布局的一个简单示例。请注意：

1.  内容永远不会与页脚重叠。调整窗口大小最终将创建一个垂直滚动条，而不是将内容移动到页脚上。
2.  没有多余的滚动条。
3.  没有绝对高度，除了页脚，可能假定不高于 2em。
4.  内容高度小于页眉和页脚之间的可用高度。

我想保留前三个属性，但更改最后一个，以便内容高度是页眉和页脚之间的全高。而且我想这样做而不诉诸javascript。

如果有的话，我该怎么做？

**编辑**

给定的 html 和 css 只是一个示例。只要最终结果满足我的问题条件，您就可以自由更改它们。

**编辑2**

显然，我不太清楚我想通过内容实现什么。这是我现在拥有的： ![在此处输入图像描述](../Images/583cd6178dd7fb15551cd1c8351843db.png)

请注意内容如何没有扩展页眉和页脚之间可用的完整高度。

我所追求的是： ![在此处输入图像描述](../Images/5ea41b56619b59b981596207b99a47cf.png)

（在mspaint中编辑，我不知道真的这样做）

**编辑3**

在第三个条件中添加了一个 except 子句：

> 除了页脚，可以假定它不高于 2em。

HTML：

```
<html>
<head>
  <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.7.3/build/cssreset/reset-min.css">
</head>
<body>
<div class="container">
 <div class="header">
     Header goes here.
  </div>

  <div class="content">
    <div class="innerWrapper">
      Content goes here.
      </div>
  </div>

  <div class="footer">
    <div class="status">
       Footer goes here.
    <div>
  </div>
</div>
</body>
</html>​ 
```

CSS：

```
html, body {
    height: 100%;
    width: 100%;
}

.container {
    position: relative; /* needed for footer positioning*/
    margin: 0 auto;
    height: auto;
    min-height: 100%;
    background-color: #ddd;
}

.content {
    padding: 0em 0em 2em; /* bottom padding for footer */
    background-color: #bbb;
}

.footer {
    position: absolute;
    width: 100%;
    bottom: 0; /* stick to bottom */
}

.status, .header {
    background-color: #999;
    border: solid 1px #000000;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:26:54.990

可能有几种方法可以做到这一点，但目前我能想到的唯一方法都涉及设置/了解页眉和页脚的高度。

这是一个使用`display:table` [http://jsfiddle.net/fLnkf/](http://jsfiddle.net/fLnkf/)

根据您的要求是否允许您更改 html 或使用 CSS3，可能还有其他解决方案。

希望这可以帮助！

# wpf - 在 WPF bing 地图上对齐图像

> ID：13074617
> 
> 赞同：0
> 
> 时间：2012-10-25T18:10:46.383
> 
> 标签：wpf, wpf-controls, bing-maps

如果在创建图像时指定了对齐，则刚刚遇到了对齐不适用于 WPF Bing Maps 的问题：

```
var element = new Image()
        {
            Source = ResourceManager.VesselIcon,
            Opacity = 0.9,
            Stretch = System.Windows.Media.Stretch.None,

            VerticalAlignment = System.Windows.VerticalAlignment.Center, // Is not working
            HorizontalAlignment = System.Windows.HorizontalAlignment.Center
        }; 
```

Fortunatley WPF Bing Maps API 确实提供了“PositionOrigin”结构。因此，可以在向地图本身添加形状的同时指定对齐方式：

```
Location location = Helper.SomeLocation();
this.mapLayer.AddChild(element, location, PositionOrigin.Center); 
```

希望它会帮助某人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:43:49.193

Fortunatley WPF Bing Maps API 确实提供了“PositionOrigin”结构。因此，可以在向地图本身添加形状的同时指定对齐方式：

```
Location location = Helper.SomeLocation();
this.mapLayer.AddChild(element, location, PositionOrigin.Center); 
```

# facebook - open graph facebook login api 当前是否有效？

> ID：13074619
> 
> 赞同：2
> 
> 时间：2012-10-25T18:10:48.313
> 
> 标签：facebook, facebook-graph-api

我们正在经历旧的 v2 facebook 登录界面的故障。

[https://developers.facebook.com/bugs/506823259335622?browse=search_50895412246979226453540](https://developers.facebook.com/bugs/506823259335622?browse=search_50895412246979226453540)

我试图找出这个界面的开放图形版本是否在太平洋标准时间 10 月 25 日上午 10 点工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:46:19.853

您需要使用 PHP SDK 的新文件更新库才能工作，
请查看此[链接](https://developers.facebook.com/bugs/506823259335622?browse=search_50895412246979226453540)

# workflow - 如何在流程图中表示多个线程

> ID：13074620
> 
> 赞同：8
> 
> 时间：2012-10-25T18:10:46.883
> 
> 标签：workflow, conceptual

我的任务是为一些客户端服务器创建流程图并在我们的组织软件中启动流程。我们的许多流程同时运行，因为它们彼此之间没有影响。这在流程图中传统上是如何表示的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-01T14:02:19.990

我在想流程图并不是真的为此而设计的，但事实证明，实际上有一个并发符号。[维基百科](https://en.wikipedia.org/wiki/Flowchart#Other_Shapes)说：

> **并发符号**
> 
> 由具有任意数量的进入和退出箭头的双横线表示。每当两个或多个控制流必须同时运行时，都会使用这些符号。当所有进入流都达到并发符号时，退出流被同时激活。具有单个入口流的并发符号是分叉；具有单个出口流的一个是连接。

我在谷歌图片上环顾四周，发现了这个符号：

[![并发](../Images/9dfe0a2e7852542e7bb011c6b41772bb.png)](https://i.stack.imgur.com/qbC3x.jpg)

但这仅适用于特定类型的并行性（如果您不一次生成所有线程怎么办？），并且根本不适用于多*进程*模型。在多进程模型的情况下，我只会为每个进程制作一个单独的流程图。

# twitter-bootstrap - 如何让 twitter bootstrap datepicker 在 ie7 中工作？

> ID：13074624
> 
> 赞同：0
> 
> 时间：2012-10-25T18:10:58.837
> 
> 标签：twitter-bootstrap, internet-explorer-7, datepicker

我的公司过去工作。我的应用程序的所有用户都必须使用 ie7。如何让 twitter 引导日期选择器与 IE7 一起使用。它在 IE8+ chrome、firefox 和 safari 中运行良好。但是我的用户不允许使用除 IE7 之外的任何东西。

当我使用日期选择器单击文本框时，我得到下拉框，其长度约为 2 像素，宽度约为 50 像素。但没有日历显示。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:42:12.650

您可以从[这个问题尝试](https://github.com/eternicode/bootstrap-datepicker/pull/170)[ajbeaven 的修复](https://github.com/ajbeaven/bootstrap-datepicker/commit/9dd88f143ea50e5a85d4a58566c4ecee26ac480b)，尽管它尚未合并到插件中。

将第 185 行从

```
 return $(this).css('z-index') != 'auto'; 
```

至

```
var itemZIndex = $(this).css('z-index');
return itemZIndex != 'auto' && itemZIndex !== 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:00:36.883

如果您使用的是 bootstrap 插件，只需在 bootstrap datetimepicker css 文件之后将此类添加到您的 css 中：

```
.datetimepicker table tr td span {
    width: 200%!important;
} 
```

# mysql - 在一个查询中选择记录和更新

> ID：13074625
> 
> 赞同：0
> 
> 时间：2012-10-25T18:11:05.663
> 
> 标签：mysql, sql

这里有类似的问题，但由于涉及多个表，因此无法找到足够接近的东西来实际解决我的问题。所以这里...

我需要选择一个记录集进行处理。为了防止并行处理选择相同的记录，我想在记录中设置一个状态标志，我可以用来在后续调用中排除这些记录，即

```
SELECT ... WHERE statusflag <> 1 //(or whatever) 
```

我知道我可以使用事务和 SELECT FOR UPDATE，通过这些记录更新标志，但我希望通过一次数据库命中来完成这两项任务（获取/更新）。这在 MySQL 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:17:57.137

您需要在[存储过程中使用](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)[游标](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)。有一些在线教程可以帮助您。

# c# - X-HTTP-Method-Override 在 ASP.NET Web API 上给出 NotFound (404)

> ID：13074627
> 
> 赞同：7
> 
> 时间：2012-10-25T18:11:13.123
> 
> 标签：c#, asp.net-web-api

我正在尝试按照[此处](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)描述的步骤实现 HTTP 方法覆盖。基本上，我正在创建一个 DelegatingHandler，类似于以下内容，并将其作为消息处理程序添加到`Application_Start`.

```
public class MethodOverrideHandler : DelegatingHandler      
{
    readonly string[] _methods = { "DELETE", "HEAD", "PUT" };
    const string _header = "X-HTTP-Method-Override";

    protected override Task<HttpResponseMessage> SendAsync(
        HttpRequestMessage request, CancellationToken cancellationToken)
    {
        // Check for HTTP POST with the X-HTTP-Method-Override header.
        if (request.Method == HttpMethod.Post && request.Headers.Contains(_header))
        {
            // Check if the header value is in our methods list.
            var method = request.Headers.GetValues(_header).FirstOrDefault();
            if (_methods.Contains(method, StringComparer.InvariantCultureIgnoreCase))
            {
                // Change the request method.
                request.Method = new HttpMethod(method);
            }
        }
        return base.SendAsync(request, cancellationToken);
    }
} 
```

我在控制器上定义了以下方法：

*   `persons/{id}`， 得到
*   `persons/{id}`， 放
*   `persons/{id}`， 删除

我可以通过他们的“本机”方法调用它们，并且它们按预期工作。但是，当我尝试通过 POST 调用它们时，发送`X-HTTP-Method-Override`带有“DELETE”或“PUT”的标头时，会出现**Not Found (404)**错误。重要的是要补充一点，当它给出这个错误时，它永远不会到达`MethodOverrideHandler`- 我已经放置了一个永远不会命中的断点；当我调用正常的 DELETE 和 PUT 时，它确实达到了断点。

我什至尝试添加另一种方法：

*   `persons/{id}`， 邮政

当我这样做时，我得到了一个**不允许的方法（405）**。

我认为消息处理程序是在路由和控制器调度程序之前运行的。为什么这给了我404？

我不认为这是相关的，但我没有使用默认的 Web API 路由。相反，我使用分配给每个方法的自定义属性进行映射，如下所示：

```
routes.MapHttpRoute(
    String.Format("{0}_{1}", operation.Name, service.ServiceId),
    String.Format("{0}/{1}", service.RoutePrefix, routeTemplateAttribute.Template),
    defaults,
    new { httpMethod = GetHttpMethodConstraint(operation) }); 
```

```
[HttpDelete, RouteTemplate("persons/{id}")]
public HttpResponseMessage DeletePerson(string id)
{
    // ...
} 
```

**编辑**：`GetHttpMethodConstraint`代码如下。

```
private static HttpMethodConstraint GetHttpMethodConstraint(MethodInfo methodInfo)
{
    var methodResolver = HttpMethodResolver.FromMethodInfo(methodInfo);
    return new HttpMethodConstraint(methodResolver.Resolve());
} 
```

```
internal class HttpMethodResolver
{
    private MethodInfo _methodInfo;

    private HttpMethodResolver(MethodInfo methodInfo)
    {
        _methodInfo = methodInfo;
    }

    public static HttpMethodResolver FromMethodInfo(MethodInfo methodInfo)
    {
        return new HttpMethodResolver(methodInfo);
    }

    public string[] Resolve()
    {
        var verbs = new List<HttpMethod>();

        if (MethodHasAttribute<HttpGetAttribute>())
        {
            verbs.Add(HttpMethod.Get);
        }
        else if (MethodHasAttribute<HttpPostAttribute>())
        {
            verbs.Add(HttpMethod.Post);
        }
        else if (MethodHasAttribute<HttpDeleteAttribute>())
        {
            verbs.Add(HttpMethod.Delete);
        }
        else if (MethodHasAttribute<HttpPutAttribute>())
        {
            verbs.Add(HttpMethod.Put);
        }
        else
        {
            throw new ServiceModelException("HTTP method attribute should be used");
        }

        return verbs.Select(v => v.Method).ToArray();
    }

    private bool MethodHasAttribute<T>() where T : Attribute
    {
        return GetMethodAttribute<T>() != null;
    }

    private T GetMethodAttribute<T>() where T : Attribute
    {
        return _methodInfo.GetCustomAttributes(typeof(T), true).FirstOrDefault() as T;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T11:24:41.493

我想我也有同样的问题。看起来确实在任何消息处理程序之前检查了路由约束。

所以我创建了一个自定义约束，它知道检查是否有被覆盖的 HTTP 方法：

```
class OverrideableHttpMethodConstraint : HttpMethodConstraint
{
    public OverrideableHttpMethodConstraint(HttpMethod httpMethod) : base(httpMethod)
    {
    }

    protected override bool Match(HttpRequestMessage request, IHttpRoute route, string parameterName, IDictionary<string, object> values, HttpRouteDirection routeDirection)
    {
        IEnumerable<string> headerValues;
        if (request.Method.Method.Equals("POST", StringComparison.OrdinalIgnoreCase) && 
            request.Headers.TryGetValues("X-HTTP-Method-Override", out headerValues))
        {
            var method = headerValues.FirstOrDefault();
            if (method != null)
            {
                request.Method = new HttpMethod(method);
            }
        }

        return base.Match(request, route, parameterName, values, routeDirection);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:16:49.323

I have tried to reproduce your error but I wasn't able to. Here, you can download my simple project with your message handler: [https://dl.dropbox.com/u/20568014/WebApplication6.zip](https://dl.dropbox.com/u/20568014/WebApplication6.zip)

I would like to point out that message handlers run before the action selection logic is performed. So, in your case, probably something else causes the problem and I think you should look at your other message handlers, your message handler's registration code, etc because the problem occurs due to the fact that your message handler never runs.

Also, I think your `IRouteConstraint` implementation, `GetHttpMethodConstraint`, looks suspicious to me.

Here is my registration code for the message handler:

```
protected void Application_Start(object sender, EventArgs e) {

    var config = GlobalConfiguration.Configuration;
    config.Routes.MapHttpRoute(
        "DefaultHttpRoute",
        "api/{controller}/{id}",
        new { id = RouteParameter.Optional }
    );

    config.MessageHandlers.Add(new MethodOverrideHandler());
} 
```

# android - 导入从终端创建的 Android 项目

> ID：13074628
> 
> 赞同：0
> 
> 时间：2012-10-25T18:11:15.370
> 
> 标签：android, eclipse

我从终端创建了一个 Android 项目，因为当我在 Eclipse 中创建它时，R.java 文件存在问题，该文件未创建。我想我绕过了从终端创建项目的问题。我想知道是否有办法将其导入 Eclipse 并将其作为在 IDE 中创建的普通 Android 项目使用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:15:31.563

在 Eclipse to File -> import select android-> existing code into workspace 中找到该项目的根文件夹，选择然后检查项目并按照步骤操作。它将被导入 Eclipse。

# java - 将 XML 中的数据转换为数组列表、游标之类的东西

> ID：13074641
> 
> 赞同：0
> 
> 时间：2012-10-25T18:12:09.000
> 
> 标签：java, android, xml

我有 XML 代码（数据表单数据库），我想将这些数据从 XML 移动到光标或数组列表之类的东西。有可能的？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:25:41.827

由于您可能知道该结构，因此您似乎可以使用 XStream。

类似问题：[如何将 XML 转换为 java 值对象？](https://stackoverflow.com/questions/779755/how-do-i-convert-xml-into-a-java-value-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:17:35.970

Android 中有很多库可以使用，还有很多外部 XML 库。XML Pull Parser 和 SAX Parsers 是 Android 自带的，据我所知至少是从 1.6 开始的。XML Pull 解析器更类似于 C，而 SAX 解析器更类似于 Java。还有 DOM 解析器。

我最终在一个项目中使用了 SAX 解析器，并使用了 Stack 来跟踪我在 XML 树中的位置。

# qt - QTreeWidget（为项目应用样式）

> ID：13074643
> 
> 赞同：0
> 
> 时间：2012-10-25T18:12:14.507
> 
> 标签：qt, qtreeview, qtreewidget, qstyle

我有一个树小部件，树中有三个级别，如下所示

```
Example Tree
============================
LEVEL1
    LEVEL2
    LEVEL2
       LEVEL3
       LEVEL3
    LEVEL2
    LEVEL2
LEVEL1 
```

我想为项目应用不同的样式，具体取决于它们的级别，以便我可以不同地设置 LEVEL1、LEVEL2 和 LEVEL3 的样式。我可以用两级树来做到这一点。请帮忙。我想在 CSS 级别实现这一点（不接触代码）

我经历了以下文件。我想区分 LEVEL1 和 LEVEL2 是困难的部分。

[http://doc.qt.digia.com/main-snapshot/stylesheet-examples.html#customizing-qtreeview](http://doc.qt.digia.com/main-snapshot/stylesheet-examples.html#customizing-qtreeview)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:07:16.120

这不能在 Qt 样式表级别完成

# perl - 无法安装 perl 模块 opensuse 12.2

> ID：13074644
> 
> 赞同：2
> 
> 时间：2012-10-25T18:12:23.873
> 
> 标签：perl, perl-module, cpan, opensuse

我一直在尝试在我全新的 Opensuse 安装上安装几个 perl 模块，但无济于事。我曾尝试通过 CPAN、PPM 和手动安装它们，但始终出现相同的错误：

```
 Unparsable version '' for prerequisite Test at Makefile.PL line 4. 
```

尽管如此，`Makefile.PL`似乎可以毫无问题地执行，但随后的 make 执行会出现问题。这是导致我认为问题的消息：

```
 make: *** [LevenshteinXS.o] Error 127
 JGOLDBERG/Text-LevenshteinXS-0.03.tar.gz
 /usr/bin/make -- NOT OK 
```

我试图做一个`whereis make`，结果似乎还可以：

```
 make: /usr/bin/make /usr/bin/X11/make /usr/share/man/man1/make.1.gz /usr/share/man/man1p/make.1p.gz 
```

这是 cpan 在告诉我安装失败之前进行的操作的完整记录：

```
 CPAN: Storable loaded ok (v2.34)
 Reading '/home/tito/.cpan/Metadata'
 Database was generated on Wed, 24 Oct 2012 19:07:03 GMT
 Running install for module 'Text::LevenshteinXS'
 Running make for J/JG/JGOLDBERG/Text-LevenshteinXS-0.03.tar.gz
 CPAN: Digest::SHA loaded ok (v5.71)
 CPAN: Compress::Zlib loaded ok (v2.048)
 Checksum for /home/tito/.cpan/sources/authors/id/J/JG/JGOLDBERG/Text-LevenshteinXS-0.03.tar.gz ok
 CPAN: File::Temp loaded ok (v0.22)
 CPAN: Parse::CPAN::Meta loaded ok (v1.4404)
 CPAN: CPAN::Meta loaded ok (v2.120630)

 CPAN.pm: Building J/JG/JGOLDBERG/Text-LevenshteinXS-0.03.tar.gz

 Unparsable version '' for prerequisite Test at Makefile.PL line 4.
 Checking if your kit is complete...
 Looks good
 Writing Makefile for Text::LevenshteinXS
 Writing MYMETA.yml and MYMETA.json
 CPAN: Module::CoreList loaded ok (v2.66)
 cp LevenshteinXS.pm blib/lib/Text/LevenshteinXS.pm
 AutoSplitting blib/lib/Text/LevenshteinXS.pm (blib/lib/auto/Text/LevenshteinXS)
 /usr/bin/perl /usr/lib/perl5/5.16.0/ExtUtils/xsubpp  -typemap /usr/lib/perl5/5.16.0/ExtUtils/typemap  LevenshteinXS.xs > LevenshteinXS.xsc && mv LevenshteinXS.xsc LevenshteinXS.c
 Please specify prototyping behavior for LevenshteinXS.xs (see perlxs manual)
 cc -c   -D_REENTRANT -D_GNU_SOURCE -DPERL_USE_SAFE_PUTENV -fno-strict-aliasing -pipe -fstack-protector -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -g -Wall -pipe   -DVERSION=\"0.03\" -DXS_VERSION=\"0.03\" -fPIC "-I/usr/lib/perl5/5.16.0/x86_64-linux-thread-multi/CORE"   LevenshteinXS.c
 /bin/sh: cc: command not found
 make: *** [LevenshteinXS.o] Error 127
 JGOLDBERG/Text-LevenshteinXS-0.03.tar.gz
 /usr/bin/make -- NOT OK
 CPAN: YAML loaded ok (v0.84)
 Running make test
  Can't test without successful make
 Running make install
  Make had returned bad status, install seems impossible 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T18:20:23.853

关于版本的警告就是这样，一个警告。真正的问题是这样的：

```
/bin/sh: cc: command not found 
```

换句话说：这个模块需要一个 C 编译器，而你没有。无论如何，没有一个 Perl 可以找到。从 OpenSuSE 安装 gcc 包应该可以解决这个问题。

“不可解析的版本”来自 Makefile.PL 中的这一行。

```
'PREREQ_PM'         => { Test }, 
```

PREREQ_PM 表示必备模块及其最低版本。 [作者忘记了最低版本](https://rt.cpan.org/Ticket/Display.html?id=80397)。没什么大不了的，Test 永远伴随着 Perl。

# objective-c - 正则表达式语法问题objective-c

> ID：13074651
> 
> 赞同：0
> 
> 时间：2012-10-25T18:13:13.803
> 
> 标签：objective-c, regex, nsrange

```
NSString *inputStr=@"AA.BB Hello \nCC.JJ Say \nBB.CC Bye \nZZ.AA To";
NSRange r;
while ((r=[inputStr rangeOfString:@"(^[A-L].*)" options:NSRegularExpressionSearch]).location!=NSNotFound)  {
    NSString *newStr=[inputStr substringWithRange:r];
    inputStr=[inputStr stringByReplacingCharactersInRange:r withString:@""];
    NSLog(@"NEW str= %@",newStr);
} 
```

它给出：AA.BB 你好。

但是，我正在寻找 AL 范围内的后缀，如下所示

AA.BB

CC.JJ

BB.CC

然后我换成`(^[A-L].\*)`了`(^[A-L]*$[\\s])`。所以它必须从 AL 开始，并在找到空间时结束。但这什么也没输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:00:59.500

试试`([A-L]+\\.[^\\s]*)`。

`[^\\s]*`将匹配所有不是空格的东西。

这给了我：

```
NEW str= AA.BB
NEW str= CC.JJ
NEW str= BB.CC 
```

# javascript - 是否可以从另一个网站提取文本并使用 javascript 将其放置在另一个网站中？

> ID：13074653
> 
> 赞同：0
> 
> 时间：2012-10-25T18:13:37.087
> 
> 标签：javascript

我想知道是否可以让人们将文本发布到 wordpress 博客之类的东西，然后让另一个页面上的 javascript 将该字符串数据（来自 wordpress）拉到另一个站点并将其放置在 div 或段落标记中。我对 javascript 很陌生，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:47:06.070

[您可以使用他们的XML-RPC Blogger API](http://codex.wordpress.org/XML-RPC_Blogger_API)从 wordpress 博客获取数据

还有[一种方法可以获取 JSON 格式的数据](http://digwp.com/2010/05/wordpress-json-api-plugin/)

# emacs - 触发键在 Yasnippet emacs 中不起作用

> ID：13074656
> 
> 赞同：2
> 
> 时间：2012-10-25T18:13:49.027
> 
> 标签：emacs, latex, code-snippets, yasnippet

Yasnippet 似乎在工作，但触发键却没有。我可以加载片段、查看片段表和 Mx yas/expand。但是，在键入触发键（即时间）后，我想使用不起作用的 TAB 键扩展片段。我检查了 yasnippet.el 文件，发现 yas-trigger-key 设置为 . 我尝试更改它，但仍然无法使其正常工作。有人知道发生了什么吗？我试图让这个首先在 LaTeX 模式下工作。Yasnippet 告诉我我也应该尝试 Cc Cs 但这似乎只是插入了“\end”。

我通过 el-get 打包管理器下载了 Yasnippet。我正在使用 OSX 和 emacs 23.4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T22:51:53.650

```
(add-to-list 'load-path "~/.emacs.d/plugins/yasnippet")
(require 'yasnippet)
(yas-global-mode 1) 
```

您是否将上述内容放入您的 .emacs 中？

也许尝试从[这个最近的链接重新安装](https://github.com/joaotavora/yasnippet)

# android - 为图像按钮设置背景时解析错误

> ID：13074662
> 
> 赞同：0
> 
> 时间：2012-10-25T18:14:06.697
> 
> 标签：android, android-layout

您好我正在尝试创建一个自定义按钮。按钮基本上有两种模式，按下和不按下。我创建了一个名为 addtransaction 的 xml 文件，其中包含两个按钮图像，代码如下

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/add_transaction_after" android:state_pressed="true"></item>
    <item android:drawable="@drawable/add_transaction_before"   android:state_focused="false"></item>
</selector> 
```

我面临的问题是，当创建xml文件对应的按钮被分配背景时。出现以下消息

**无法解析文件/Users/Rudi/Desktop/ABC/res/drawable/addtransaction.xml**

我能够为其他按钮提供自定义，但只有这个 xml 文件显示错误。有人可以告诉我我做错了什么吗？

作为编辑，这里是包含我的按钮的 xml 文件的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:layout_gravity="center"
    android:orientation="horizontal"
    android:weightSum="10" >

    <LinearLayout
        android:id="@+id/mainLayout"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:layout_weight="6"
        android:background="@drawable/background"
        android:gravity="center"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/addAccount"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/account"
            android:gravity="center" />
        <ImageButton
            android:id="@+id/addTransaction"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/addtransaction"
            android:gravity="center" />
        <ImageButton
            android:id="@+id/viewAccount"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/viewaccount"
            android:gravity="center" />
        <ImageButton
            android:id="@+id/recentTransaction"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/viewtransaction"
            android:gravity="center" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="4" >
    </LinearLayout>

</LinearLayout> 
```

这是 log cat 显示的错误。

```
10-26 20:26:02.836: E/ActivityThread(4454): **Failed to inflate
10-26 20:26:02.836: E/ActivityThread(4454): android.view.InflateException: Binary XML file line #28: Error inflating class <unknown>**
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
10-26 20:26:02.836: E/ActivityThread(4454):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-26 20:26:02.836: E/ActivityThread(4454):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.app.Activity.setContentView(Activity.java:1867)
10-26 20:26:02.836: E/ActivityThread(4454):     at com.code.accountmanager.AccountManagerActivity.onCreate(AccountManagerActivity.java:41)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.app.Activity.performCreate(Activity.java:5008)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2141)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2212)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.app.ActivityThread.access$600(ActivityThread.java:144)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.os.Looper.loop(Looper.java:137)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.app.ActivityThread.main(ActivityThread.java:4965)
10-26 20:26:02.836: E/ActivityThread(4454):     at java.lang.reflect.Method.invokeNative(Native Method)
10-26 20:26:02.836: E/ActivityThread(4454):     at java.lang.reflect.Method.invoke(Method.java:511)
10-26 20:26:02.836: E/ActivityThread(4454):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
10-26 20:26:02.836: E/ActivityThread(4454):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
10-26 20:26:02.836: E/ActivityThread(4454):     at dalvik.system.NativeStart.main(Native Method)
10-26 20:26:02.836: E/ActivityThread(4454): Caused by: java.lang.reflect.InvocationTargetException
10-26 20:26:02.836: E/ActivityThread(4454):     at java.lang.reflect.Constructor.constructNative(Native Method)
10-26 20:26:02.836: E/ActivityThread(4454):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
10-26 20:26:02.836: E/ActivityThread(4454):     ... 25 more
10-26 20:26:02.836: E/ActivityThread(4454): **Caused by: android.content.res.Resources$NotFoundException: File res/drawable/transaction.xml from drawable resource ID #0x7f02000f**
10-26 20:26:02.836: E/ActivityThread(4454):     at android.content.res.Resources.loadDrawable(Resources.java:1947)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.view.View.<init>(View.java:3336)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.widget.ImageView.<init>(ImageView.java:114)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.widget.ImageButton.<init>(ImageButton.java:87)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.widget.ImageButton.<init>(ImageButton.java:83)
10-26 20:26:02.836: E/ActivityThread(4454):     ... 28 more
10-26 20:26:02.836: E/ActivityThread(4454): **Caused by: java.lang.NullPointerException
10-26 20:26:02.836: E/ActivityThread(4454):     at android.graphics.drawable.DrawableContainer$DrawableContainerState.addChild(DrawableContainer.java:524)**
10-26 20:26:02.836: E/ActivityThread(4454):     at android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable.java:278)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:186)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:818)
10-26 20:26:02.836: E/ActivityThread(4454):     at android.content.res.Resources.loadDrawable(Resources.java:1944)
10-26 20:26:02.836: E/ActivityThread(4454):     ... 33 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:26:52.193

尝试添加：

```
<item android:drawable="@drawable/some_drawable" /> 
```

如果这没有帮助，请尝试以下步骤：

1.  删除项目的库声明。
2.  在图形布局中打开导致错误的布局（使用选择器的布局）。
3.  清理项目（项目 -> 清理）
4.  关闭并重新打开 Eclipse。（现在布局应该没问题）
5.  您可以再次将项目设置为库。

[这是原始答案。](https://stackoverflow.com/a/8485552/1581147)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:42:59.577

您说您的可绘制 xml 已命名`addtransaction.xml`-在您的布局文件中将其引用为`@drawable/trans`-

因此，将该行更改为`android:background="@drawable/addtransaction"`，您应该完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:32:39.753

事实证明图像本身存在一些错误，再次制作图像，将其用作按钮的背景并且没有解析错误。

# c# - 如何从我的 C# 集合中返回不同的元素？

> ID：13074664
> 
> 赞同：2
> 
> 时间：2012-10-25T18:14:11.610
> 
> 标签：c#, linq, linq-to-objects

我有一个*MongoDB*数据库，我在其中存储所有图片，当我检索它们时，我存储了一些双打，这不是很好，但无论如何我只想显示不同的元素。

```
 @foreach (Foto f in fotos.Distinct(new IEqualityComparer<Foto> { ) 
```

但是 Foto 类有一个名为 smallurl 的属性，我只想通过这个属性显示不同的元素。那么如何编写一个自定义的**IEqualityComparer**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:16:51.310

```
var listOfUrls = fotos.Select(f => f.smallurl).Distinct(); 
```

**编辑**专门回答您的问题

实际上是从 MSDN 文档中复制的，您可以通过搜索 c# IEqualityComparer [http://msdn.microsoft.com/en-us/library/ms132151.aspx找到该文档](http://msdn.microsoft.com/en-us/library/ms132151.aspx)

```
class FotoEqualityComparer : IEqualityComparer<Foto>
{
    public bool Equals(Foto f1, Foto f2)
    {
        return f1.smallurl == f2.smallurl;
    }
    public int GetHashCode(Foto f)
    {
         return f.smallurl.GetHashCode();
    }
}

@foreach (Foto f in fotos.Distinct(new FotoEqualityComparer() ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:17:22.513

这实际上很容易。只需为您的方法提供一个独特的选择器，如下所示：

```
 public static IEnumerable<TSource> DistinctBy<TSource, TResult>(this IEnumerable<TSource> enumerable, Func<TSource, TResult> keySelector)
    {
        Dictionary<TResult, TSource> seenItems = new Dictionary<TResult, TSource>();

        foreach (var item in enumerable)
        {
            var key = keySelector(item);

            if (!seenItems.ContainsKey(key))
            {
                seenItems.Add(key, item);
                yield return item;
            }
        }
    } 
```

或者，您可以创建另一个来为 IEquality 比较器进行通用实现：

```
 public static IEnumerable<TSource> DistinctBy<TSource>(this IEnumerable<TSource> enumerable, Func<TSource, TSource, bool> equalitySelector, Func<TSource, int> hashCodeSelector)
    {
        return enumerable.Distinct(new GenericEqualitySelector<TSource>(equalitySelector, hashCodeSelector));
    }

    class GenericEqualitySelector<TSource> : IEqualityComparer<TSource>
    {
        public Func<TSource, TSource, bool> _equalityComparer = null;
        public Func<TSource, int> _hashSelector = null;

        public GenericEqualitySelector(Func<TSource, TSource, bool> selector, Func<TSource, int> hashSelector)
        {
            _equalityComparer = selector;
            _hashSelector = hashSelector;
        }

        public bool Equals(TSource x, TSource y)
        {
            return _equalityComparer(x, y);
        }

        public int GetHashCode(TSource obj)
        {
            return _hashSelector(obj);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T18:19:24.090

从[MSDN修改](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

```
public class MyEqualityComparer : IEqualityComparer<Foto>
{
    public bool Equals(Foto x, Foto y)
    {

        //Check whether the compared objects reference the same data. 
        if (Object.ReferenceEquals(x, y)) return true;

        //Check whether any of the compared objects is null. 
        if (Object.ReferenceEquals(x, null) || Object.ReferenceEquals(y, null))
            return false;

        //Check whether the foto's properties are equal. 
        return x.smallurl == y.smallurl ;
    }

    // If Equals() returns true for a pair of objects  
    // then GetHashCode() must return the same value for these objects. 

    public int GetHashCode(Foto foto)
    {
        //Check whether the object is null 
        if (Object.ReferenceEquals(foto, null)) return 0;

        //Get hash code for the foto.smallurl field if it is not null. 
        return foto.smallurl == null ? 0 : foto.smallurl.GetHashCode();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T18:35:13.323

创建自己的：

```
public class FotoEqualityComparer : IEqualityComparer<Foto>
{
    public bool Equals(Foto x, Foto y)
    {
         return x.smallurl.Equals(y.smallurl);   
    }

    public int GetHashCode(Foto foto)
    {
         return foto.smallurl.GetHashCode();
    }
} 
```

并像这样使用它：

```
fotos.Distinct(new FotoEqualityComparer()); 
```

**编辑：**

.Distinct() 没有内联 lambda 重载，因为当两个对象比较相等时，它们必须具有相同的 GetHashCode 返回值（否则 Distinct 内部使用的哈希表将无法正常工作）。

但是，如果您希望它在一行中，那么您也可以进行分组以达到相同的结果：

```
fotos.GroupBy(f => f.smallurl).Select(g => g.First()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T19:08:57.657

使用 GroupBy 的代码要简单得多：

```
@foreach (Foto f in fotos.GroupBy(f => f.smallurl).Select(g => g.First())) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T18:21:39.643

您应该创建自己的 EquilityComparer：

```
 class FotoEqualityComparer : IEqualityComparer<Foto>
    {

    public bool Equals(Foto b1, Foto b2)
    {
            if (b1.smallurl == b2.smallurl)                
                return true;                
            else        
                return false;        
    }

    public int GetHashCode(Foto bx)
    {
            int hCode = bx.smallurl ;
            return hCode.GetHashCode();
    }

    } 
```

# azure - 如何使用 Azure 装载大型 NTFS 卷？

> ID：13074666
> 
> 赞同：4
> 
> 时间：2012-10-25T18:14:19.797
> 
> 标签：azure, azure-storage

我有一个旧版应用程序和第三方软件，它们都需要 NTFS 卷才能运行。更改软件将是最后的手段。

要求是为域中的每台计算机都可以访问的媒体（视频、图像等）提供一个中央存储位置。大小要求可高达 20 TB。

我提出的解决方案是创建一个域，其中一台计算机充当简单的文件服务器，其中安装了多个卷，并且可以通过 DFS（分布式文件系统）从其他计算机访问。DFS 出现在图中的原因是我们正在寻求扩展 DFS 服务以提供冗余。

我提出的解决方案可行吗？我愿意接受我应该评估除 Azure 之外的其他存储/托管解决方案，这将使我能够满足要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:33:45.677

您最好的选择可能是 Windows Azure 虚拟机。在这个模型中，一个超大的虚拟机可以挂载 16 个独立的 1tb 数据驱动器。您必须组合多个虚拟机才能达到 20tb 的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:35:23.663

这听起来像是一个合理的解决方案。

1.  使用 Windows Azure 驱动器将为您提供 NTFS。
2.  Azure 驱动器在 Blob 存储中存储为虚拟硬盘 (VHD)。我相信 1 个驱动器最多可以包含 1 TB 的数据（Blob 存储限制），因此您必须安装多个驱动器。
3.  [这](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/04/16/using-smb-to-share-a-windows-azure-drive-among-multiple-role-instances.aspx)是一篇关于通过 SMB 跨多个角色实例共享驱动器的有趣文章。诚然，我自己没有尝试过。

# vba - 如何找到在 VBA 表单中使用的事件过程

> ID：13074667
> 
> 赞同：1
> 
> 时间：2012-10-25T18:14:20.003
> 
> 标签：vba, ms-access

![在此处输入图像描述](../Images/88582e55e7b6c9a9c4f383c5e8db1883.png)

我如何找到这个 Event_Procedure 正在做什么，完全困惑当我右键单击 On Current 时出现了

**请帮忙**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:33:29.280

而不是右键单击，单击它旁边的省略号

![省略号圈出](../Images/e63429b40c7e05685d7254f2ac7f1229.png)

# .net - 如何将 Servicestack 身份验证与 Active Directory/Windows 身份验证一起使用？

> ID：13074668
> 
> 赞同：25
> 
> 时间：2012-10-25T18:14:27.380
> 
> 标签：.net, authentication, active-directory, servicestack

我正在创建用户凭据驻留在 Active Directory 中的安全 (SSL) 公共服务。我想利用 ServiceStack 的身份验证并阅读了[wiki 文章](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)。我已经编写了代码来使用 AD 验证用户凭据。我有几个问题。

1.  我使用哪个身份验证提供商？凭证、基本身份验证还是自定义？该服务需要 SSL，因此基本身份验证是安全的，但密码将被加密以增加安全性。
2.  我还需要存储 UserAuth 并缓存 AuthUserSession 吗？
3.  monotouch 客户端是否支持身份验证？

更新 2：我最终使用 CredentialsAuthProvider 制作了一个与 AD 集成的测试 SS 服务。但是，我的最终目标是在客户调用时拥有 1 个作为 api 的站点。所以基本上是一个 SS MVC 站点。

更新：

在做了更多研究后，我了解到 SS 正在考虑在未来做一个可能支持 Windows 身份验证的商业产品。我在 SS Google 小组的 mythz 评论中读到了这一点。我问这个 SO 问题的原因是我的公司使用 IWA 构建内部应用程序，并且没有 IWA 就很难采用 SS MVC。我想我读到您可以在使用 IWA 的 ASP.NET 站点之外托管 SS MVC 站点，但我还没有尝试过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T21:33:00.893

这是黛米斯·贝洛特在[推](https://twitter.com/demisbellot/status/327093814806323200)特上所说的。可能有可能，但需要更多研究。

> 不是我调查过的东西，不再在 Win/Active Directory 中工作。需要一些研发来发现/解决问题

我最终确实得到了一个使用 AD 的原型服务。我实现了 CredentialsAuthProvider。现在这与 ASP.NET IWA 完全无关，但可以轻松检查用户是否在 AD 中。希望这可以帮助某人。

```
public class LDAPAuthProvider : CredentialsAuthProvider
{
    public override bool TryAuthenticate(IServiceBase authService, string userName, string password)
                    {
                        //Check to see if the username/password combo is valid, an exception will be thrown if the username or password is wrong
                        try
                        {
                            DirectoryEntry entry = new DirectoryEntry(ConfigurationManager.AppSettings["TargetOU"], userName, password);
                            object nativeObject = entry.NativeObject;
                        }
                        catch (Exception)
                        {
                            //This means the username/password combo failed
                            return false;
                        }

                        return true;
                    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-14T19:26:39.577

我还将 ServiceStack 与集成 Windows 身份验证（用于企业应用程序）连接起来，关键是跳过尝试将其与 ServiceStack 的 AuthProviders 完全集成，因为 IWA 的一般方法不处理应用程序代码中的凭据 - - 它由网络服务器处理。我所做的是：

1.  在 IIS 中配置站点/应用程序，以便 Windows 身份验证是唯一启用的选项。（不允许匿名访问。）这意味着 IIS 本身将处理未经身份验证的用户的质询-响应 (HTTP 401/200) 序列，并为您处理该过程的身份验证部分。

2.  将ServiceStack `IHasRequestFilter`（一个 HTTP 预请求过滤器）实现为一个属性（例如，[AdminOnly]）。此过滤器的 RequestFilter 方法从 HttpContext ( ) 中获取当前用户名，`HttpContext.User.Identity.Name`从存储库（可能是 SQL 数据库、平面文件等）中查找它，使用 ServiceStack 的`ICacheClient`（内存缓存、Redis 等）缓存结果，然后抛出如果未经授权，则返回 403 HttpError。

完成此操作后，所需要做的就是将属性添加到所需的类或方法中（在所需的位置将此身份验证/授权添加到服务管道中），并在我的 AppHost 实现中注册所需的缓存提供程序，例如：

```
 container.Register<ICacheClient>(new MemoryCacheClient() { FlushOnDispose = false }); 
```

它工作得很好。

# paypal - Paypal沙箱测试付款不允许测试买家邮件和密码

> ID：13074672
> 
> 赞同：0
> 
> 时间：2012-10-25T18:14:44.243
> 
> 标签：paypal, paypal-sandbox

我正在尝试使用 Paypal 沙盒 API 来测试一个简单的支付流程。我创建了 2 个帐户 - 商家和买家。然后我创建了一个具有如下jsp的Web应用程序-

```
<body onload="document.forms['paypalForm'].submit();">
<form name="paypalForm" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick" />
<input type="hidden" name="business" value=<API Username> />  
<input type="hidden" name="password" value=<API Password> />  
<input type="hidden" name="custom" value="1123" />
<input type="hidden" name="item_name" value="Computer-Laptop" />
<input type="hidden" name="amount" value="1"/>
<input type="hidden" name="rm" value="1" />
<input type="hidden" name="return" value="http://localhost:8084/DemoPaypalApi/paypalResponse.jsp" />
<input type="hidden" name="cancel_return" value="http://localhost:8084/DemoPaypalApi/paypalResponseCancel.jsp" />
<input type="hidden" name="cert_id" value=<Signature> />     
</form>
</body> 
```

API 用户名、API 密码和签名已从我在[https://developer.paypal.com的帐户中粘贴](https://developer.paypal.com)

在运行应用程序时，我被重定向到贝宝沙盒 UI。但是，在输入买家邮件 ID 和密码时，我不断收到“请确保您输入的电子邮件地址正确”和“请重新输入您的 PayPal 密码”错误。

需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:32:22.300

嗯，不确定您在哪里获取代码，但它非常不安全 - 请不要通过浏览器中的 Web 表单传递 APIUsername/APIPassword/Signature。

如果您可以提供有关您尝试做的事情的更多信息，我可以建议实现它的最佳方法。

# jquery - 一页JQuery上有多个切换按钮

> ID：13074674
> 
> 赞同：0
> 
> 时间：2012-10-25T18:15:25.060
> 
> 标签：jquery, toggle

我在一页上有多个按钮。当您单击按钮时，面板会滑出并显示内容。我在这里设置了一个工作演示：http: [//jsfiddle.net/5ZgMR/1/](http://jsfiddle.net/5ZgMR/1/)

如您所见，它工作得相当好。单击按钮时，会显示一个面板，然后再次单击时，面板会向下滑动。问题出在您打开一个面板然后打开第二个面板时。活动类仍然存在并且面板在下次单击时没有反应是错误的。最好只是尝试演示并亲自查看。单击几次，因为第一次单击时不会发生错误。

我认为问题在于切换中的回调函数，如下所示。任何人有任何想法如何解决这个问题？

```
$("a.button").toggle(function(){
         idClick = $(this).attr("id");
         newSelector = $("#pane"+idClick);
         varthis = $(this);

         newSelector.animate({ 'bottom' : 99});
         $(".pane").not(newSelector).animate({ 'bottom' : -275});
         $(this).addClass("activeBtn");
         $("a.button").not(varthis).removeClass("activeBtn");

    }, function(){
        newSelector.animate({ 'bottom' : -275});
        $(this).removeClass("activeBtn");
    });​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:32:12.723

我认为切换会搞砸你，因为给定的窗格可以通过单击相应的按钮或单击不同的按钮来隐藏。尝试更多类似的东西......

```
$("a.button").click(function(e){
     idClick = $(this).attr("id");
     var newSelector = $("#pane"+idClick);
     varthis = $(this);

     if ($(this).hasClass("activeBtn")){
         $(this).removeClass("activeBtn");
         newSelector.animate({ 'bottom' : -275});
     }
     else{
         newSelector.animate({ 'bottom' : 99});
         $(".pane").not(newSelector).animate({ 'bottom' : -275});
         $("a.button").removeClass("activeBtn");
         $(this).addClass("activeBtn");
     }
}); 
```

# ios - 使用自动布局使视图至少达到最小尺寸或不可见

> ID：13074675
> 
> 赞同：1
> 
> 时间：2012-10-25T18:15:30.160
> 
> 标签：ios, autolayout

我有一个网格单元格，主要是一张照片，底部有一个描述标签。使用自动布局，我想定义一些规则，以确保标签是最小尺寸（比如 30 像素高）或不可见。

也就是说，如果单元格缩小到描述变得难以辨认的程度，我希望它消失。

是否存在可以实现这一目标的约束和优先事项的组合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:43:38.683

我认为您不能仅通过设置一些约束来做到这一点。但是您可以为标签添加高度约束，使其在代码中可访问，将其设置为大于或等于您的最小尺寸（或者可能低于该最小尺寸）。这将确保它可以像以前一样调整大小。

之后添加一个键值观察，因为它是常量，并在观察方法中将视图的 alpha 设置为零（如果视图`heightConstraint.firstItem`缩小到所需阈值以下，您可以通过调用来获取视图。（您也可以将其隐藏属性设置为 YES，但我'已经经历过隐藏视图在隐藏时无法正确调整大小，还没有弄清楚为什么）......

编辑：对不起，我明白了。错了，当然你必须观察标签框的实际高度而不是约束的常数，因为当标签调整大小时常数不会改变......

# php - 无法解压缩文件 PHP

> ID：13074679
> 
> 赞同：1
> 
> 时间：2012-10-25T18:15:35.257
> 
> 标签：php, zip

几天来，我一直在尝试使用 PHP 解压缩文件，但没有成功。

我有以下功能：

```
function zipFileErrMsg($errno) {
    // using constant name as a string to make this function PHP4 compatible
    $zipFileFunctionsErrors = array(
        //ZIP_ER_OK             0  /* N No error */
        'ZIPARCHIVE::ER_MULTIDISK' => 'Multi-disk zip archives not supported.',
        'ZIPARCHIVE::ER_RENAME' => 'Renaming temporary file failed.',
        'ZIPARCHIVE::ER_CLOSE' => 'Closing zip archive failed', 
        'ZIPARCHIVE::ER_SEEK' => 'Seek error',
        'ZIPARCHIVE::ER_READ' => 'Read error',
        'ZIPARCHIVE::ER_WRITE' => 'Write error',
        'ZIPARCHIVE::ER_CRC' => 'CRC error',
        'ZIPARCHIVE::ER_ZIPCLOSED' => 'Containing zip archive was closed',
        'ZIPARCHIVE::ER_NOENT' => 'No such file.',
        'ZIPARCHIVE::ER_EXISTS' => 'File already exists',
        'ZIPARCHIVE::ER_OPEN' => 'Can\'t open file', 
        'ZIPARCHIVE::ER_TMPOPEN' => 'Failure to create temporary file.', 
        'ZIPARCHIVE::ER_ZLIB' => 'Zlib error',
        'ZIPARCHIVE::ER_MEMORY' => 'Memory allocation failure', 
        'ZIPARCHIVE::ER_CHANGED' => 'Entry has been changed',
        'ZIPARCHIVE::ER_COMPNOTSUPP' => 'Compression method not supported.', 
        'ZIPARCHIVE::ER_EOF' => 'Premature EOF',
        'ZIPARCHIVE::ER_INVAL' => 'Invalid argument',
        'ZIPARCHIVE::ER_NOZIP' => 'Not a zip archive',
        'ZIPARCHIVE::ER_INTERNAL' => 'Internal error',
        'ZIPARCHIVE::ER_INCONS' => 'Zip archive inconsistent', 
        'ZIPARCHIVE::ER_REMOVE' => 'Can\'t remove file',
        'ZIPARCHIVE::ER_DELETED' => 'Entry has been deleted',
    );

    $errmsg = 'unknown';
    foreach ($zipFileFunctionsErrors as $constName => $errorMessage) {
        if (defined($constName) and constant($constName) === $errno) {
            return 'Zip File Function error: '.$errorMessage;
        }
    }
    return 'Zip File Function error: unknown<br />';
}

function unzip($file)
{ 
    $zip = zip_open($file); 
    if(is_resource($zip)){ 
          $tree = ""; 
    while(($zip_entry = zip_read($zip)) !== false){ 
        echo "Unpacking ".zip_entry_name($zip_entry)."\n"; 
        if(strpos(zip_entry_name($zip_entry), DIRECTORY_SEPARATOR) !== false){ 
            $last = strrpos(zip_entry_name($zip_entry), DIRECTORY_SEPARATOR); 
            $dir = substr(zip_entry_name($zip_entry), 0, $last); 
            $file = substr(zip_entry_name($zip_entry), strrpos(zip_entry_name($zip_entry), DIRECTORY_SEPARATOR)+1); 
            if(!is_dir($dir)){ 
                @mkdir($dir, 0755, true) or die("Unable to create $dir<br />"); 
            } 
            if(strlen(trim($file)) > 0){ 
                $return = @file_put_contents($dir."/".$file, zip_entry_read($zip_entry, zip_entry_filesize($zip_entry))); 
                if($return === false){ 
                    die("Unable to write file $dir/$file<br />"); 
                } 
            } 
        }else{ 
            file_put_contents($file, zip_entry_read($zip_entry, zip_entry_filesize($zip_entry))); 
        } 
    } 
}else{ 
    echo "Unable to open zip file - ". $zip ." - ". zipFileErrMsg($zip)."<br />"; 
} 
```

}

然后调用： unzip('AutoHoje.zip');

输出为：无法打开 zip 文件 - 5 - Zip 文件功能错误：读取错误

我已经将文件 CHMOD 到 777，但仍然没有。zip 文件由访问受限的 FP 用户上传 - 只能读取和写入。我有一个具有更多权限的不同 FTP 用户。但是脚本是由网络用户运行的，对吧？

我已经在我的电脑上测试了解压缩文件，没有问题。任何人都可以解释一下吗？

谢谢

# javascript - 对象之间的区别（javascript和jquery）

> ID：13074687
> 
> 赞同：0
> 
> 时间：2012-10-25T18:15:57.337
> 
> 标签：javascript, jquery, object

这可能是一个奇怪的问题。我正在尝试将两个数组融合在一起，但读出的结果将它们显示为不同类型的对象。当我提醒他们时，由 .serializeArray() jquery 函数收集的第一种类型显示如下：

```
[object Object] 
```

第二个，我通过使用更多的 JS 方式来推动每个选项，显示如下：

```
[object HTMLOptionElement] 
```

下面是我的代码：

```
 incrCopy();
   enableSubmit();
   disableReset();

   var linkedInArray = [];
   $('form select option.linked-in').each( function() {
   linkedInArray.push(this);
   })
   //These alert the second way

   prevVals = $("form").serializeArray();
   //They alert the first way
   prevVals.push(linkedInArray);
   alert(prevVals); 
```

有人知道我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:26:12.527

这不是 jQuery 和 JavaScript 之间的区别。这就是[`serializeArray`](http://api.jquery.com/serializeArray/)工作原理。它不返回 HTML 元素列表，而是返回具有名称/值属性的普通旧对象列表。

例如，是否找到这样的东西：

```
<input name="user[eye_color]" value="brown" />
<input name="user[age]" value="47" /> 
```

它会返回一个普通的旧对象数组，看起来像这样：

```
[
  {
    name: "user[eye_color]",
    value: "brown"
  },
  {
    name: "user[age]",
    value: 47
  }
] 
```

相反，您的第一个循环遍历 jQuery 选择器，其中每个元素都是某种[原生`HTMLElement`](http://krook.org/jsdom/HTMLElement.html)元素（`HTMLDivElement`、`HTMLInputElement`、`HTMLTableElement`等）。

# c++ - 在 c++ 中可以在编译时动态分配的最大内存

> ID：13074689
> 
> 赞同：10
> 
> 时间：2012-10-25T18:16:01.627
> 
> 标签：c++, memory-management, ubuntu, new-operator

我正在玩耍以了解可以分配多少内存。最初我认为可以分配的最大内存等于物理内存（RAM）。我通过运行如下所示的命令在 Ubuntu 12.04 上检查了我的 RAM：

```
~$ free -b
             total       used       free     shared    buffers     cached
Mem:    3170848768 2526740480  644108288          0  265547776 1360060416
-/+ buffers/cache:  901132288 2269716480
Swap:   2428497920          0 2428497920 
```

如上所示，总物理内存为 3Gig（3170848768 字节），其中只有 644108288 字节是空闲的，所以我假设我最多只能分配这么多内存。我通过编写仅以下两行的小程序对其进行了测试：

```
char * p1 = new char[644108290] ;
delete p1; 
```

由于代码运行完美，这意味着它成功分配了内存。此外，我尝试分配大于可用物理空闲内存的内存，但它没有引发任何错误。然后每个问题

[malloc 可以分配的最大内存](https://stackoverflow.com/questions/2798330/maximum-memory-which-malloc-can-allocate)

我认为它必须使用虚拟内存。所以我测试了免费交换内存的代码，它也有效。

```
char * p1 = new char[2428497920] ;
delete p1; 
```

我试图分配空闲交换加上空闲 RAM 字节的内存

```
char * p1 = new char[3072606208] ;
delete p1; 
```

但是这次代码抛出`bad_alloc`异常失败。为什么这次代码不起作用。

现在我在一个新程序中在编译时分配内存，如下所示：

```
char p[3072606208] ;
char p2[4072606208] ;
char p3[5072606208];
cout<<"Size of array p = " <<sizeof p <<endl;
cout<<"Size of array p2 = " <<sizeof p2<<endl;
cout<<"Size of array p2 = " <<sizeof p3; 
```

输出显示

```
Size of array p = 3072606208
Size of array p1 = 4072606208
Size of array p2 = 777638912 
```

你能帮我理解这里发生了什么吗？为什么它允许在编译时分配内存而不是动态分配。`p`当分配编译时间时，如何`p1`能够分配大于交换内存和可用 RAM 内存的内存。哪里`p2`失败了。这究竟是如何工作的。这是一些未定义的行为还是特定于操作系统的行为。谢谢你的帮助。我正在使用 Ubuntu 12.04 和 gcc 4.6.3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T18:19:02.140

在您使用它们之前，内存页面实际上并未映射到您的程序。所做`malloc`的只是保留一定范围的虚拟地址空间。在您尝试读取或写入它们之前，没有物理 RAM 映射到这些虚拟页面。

即使您分配全局或堆栈（“自动”）内存，在您触摸它们之前也没有物理页面的映射。

最后，`sizeof()`在编译时进行评估，此时编译器不知道操作系统稍后会做什么。所以它只会告诉你对象的预期大小。

`memset`如果您在每种情况下都尝试将内存设为 0，您会发现事情的表现会非常不同。此外，您可能想尝试`calloc`将其内存归零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:24:00.560

有趣....要注意的一件事：当你写

```
char p[1000]; 
```

您在堆栈上分配（好吧，保留）100 个字节。

当你写

```
char* p = malloc(100); 
```

您在堆上分配 100 个字节。巨大差距。现在我不知道为什么堆栈分配正在工作 - 除非 [] 之间的值被编译器读取为 int 并因此环绕以分配一个更小的块。

大多数操作系统无论如何都不会分配物理内存，它们会从虚拟地址空间中为您提供页面，这些页面在您使用它们之前一直未使用（因此未分配），然后 CPU 的内存管理器单元将介入为您提供内存要求。尝试写入您分配的那些字节，看看会发生什么。

此外，至少在 Windows 上，当您分配内存块时，您只能保留操作系统可用的最大连续块 - 因此当内存因重复分配而碎片化时，您可以 malloc 减少的最大侧块。我不知道Linux是否也有这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T19:00:06.707

这两个程序之间存在巨大差异：

程序1.cpp

```
int main () {
   char p1[3072606208];
   char p2[4072606208];
   char p3[5072606208];

   std::cout << "Size of array p1 = " << sizeof(p1) << std::endl;
   std::cout << "Size of array p2 = " << sizeof(p2) << std::endl;
   std::cout << "Size of array p3 = " << sizeof(p3) << std::endl;
} 
```

程序2.cpp：

```
char p1[3072606208];
char p2[4072606208];
char p3[5072606208];

int main () {

   std::cout << "Size of array p1 = " << sizeof(p1) << std::endl;
   std::cout << "Size of array p2 = " << sizeof(p2) << std::endl;
   std::cout << "Size of array p3 = " << sizeof(p3) << std::endl;
} 
```

第一个在堆栈上分配内存；由于堆栈溢出，它将出现分段错误。第二个根本没有多大作用。那个记忆还不完全存在。它以未触及的数据段的形式出现。让我们修改第二个程序，以便触摸数据：

```
char p1[3072606208];
char p2[4072606208];
char p3[5072606208];

int main () {

   p1[3072606207] = 0;
   p2[3072606207] = 0;
   p3[3072606207] = 0;

   std::cout << "Size of array p1 = " << sizeof(p1) << std::endl;
   std::cout << "Size of array p2 = " << sizeof(p2) << std::endl;
   std::cout << "Size of array p3 = " << sizeof(p3) << std::endl;
} 
```

这不会为`p1`、`p2`或`p3`在堆或堆栈上分配内存。该内存位于数据段中。它是应用程序本身的一部分。这有一个大问题：在我的机器上，这个版本甚至不会链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T19:54:13.250

首先要注意的是，在现代计算机中，进程不能直接访问 RAM（在应用程序级别）。相反，操作系统将为每个进程提供“虚拟地址空间”。操作系统拦截访问虚拟内存的调用，并在需要时保留实际内存。

所以当`malloc`or`new`说它为你找到了足够的内存时，它只是意味着它在虚拟地址空间中为你找到了足够的内存。您可以通过运行以下程序来检查这一点，`memset`并将其注释掉。（小心，这个程序使用了一个繁忙的循环）。

```
#include <iostream>
#include <new>
#include <string.h>

using namespace std;

int main(int argc, char** argv) {

    size_t bytes = 0x7FFFFFFF;
    size_t len = sizeof(char) * bytes;
    cout << "len = " << len << endl;

    char* arr = new char[len];
    cout << "done new char[len]" << endl;

    memset(arr, 0, len); // set all values in array to 0
    cout << "done setting values" << endl;

    while(1) {
        // stops program exiting immediately
        // press Ctrl-C to exit
    }

    return 0;
} 
```

当`memset`是程序的一部分时，您会注意到计算机使用的内存大量跳跃，如果没有它，您几乎不会注意到任何差异（如果有的话）。当`memset`它被调用时，访问数组的所有元素，迫使操作系统在物理内存中提供可用空间。因为 new 的参数是 a `size_t`（见[这里](http://www.cplusplus.com/reference/std/new/operator%20new%5B%5D/)），那么你可以调用它的最大参数是`2^32-1`，尽管这不能保证成功（它肯定不会在我的机器上）。

至于您的堆栈分配：David Hammem 的回答说得比我好。我很惊讶你能够编译这些程序。使用与您相同的设置（Ubuntu 12.04 和 gcc 4.6）我得到如下编译错误：

> test.cpp：在函数'int main（int，char**）'中：
> 
> test.cpp:14:6：错误：变量“arr”的大小太大

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T18:47:01.857

试试下面的代码：

```
bool bExit = false;
unsigned int64 iAlloc = 0;

do{
   char *test = NULL;
   try{
        test = new char[1]();
        iAlloc++;
   }catch(bad_alloc){
   bExit = true;}
}while(!bExit);

char chBytes[130] = {0};
sprintf(&chBytes, "%d", iAlloc);
printf(&chBytes); 
```

在一次运行中不要打开其他程序，在另一次运行中在使用内存映射文件的应用程序中加载一些大文件。

[这](http://linuxaria.com/howto/linux-memory-management?lang=en)可能有助于您理解。

# groovy - project(':projectName') {} 和 $projectRoot/projectName/build.gradle 有什么区别

> ID：13074690
> 
> 赞同：2
> 
> 时间：2012-10-25T18:16:07.633
> 
> 标签：groovy, gradle

我认为对子项目的引用为

```
project(':projectName') {} 
```

在 $projectRoot/build.gradle 里面

我还看到了对具有单独构建的子项目的引用，例如 $projectRoot/projectName/build.gradle

有什么区别？

**更新**：为什么我要定义一个子项目

```
project(':projectName') {} 
```

而不是创建构建文件：

```
~/root/projectName/build.gradle 
```

还是有理由同时使用这两种声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:31:49.587

Gradle 在这里提供了灵活性。一些团队喜欢在根文件夹中只维护一个构建脚本（例如，Spring 项目将整个 Gradle 构建维护在一个`build.gradle`文件中）。其他一些人喜欢拆分并将子项目特定设置添加到子项目特定构建文件中。

为了使事情变得更加复杂，您可以混合使用这两个选项。您可以拥有一个子项目 Gradle 文件，此外，在*根项目*中对此*子项目*进行进一步配置。

 *干杯，
勒内*

# firefox - 为什么 Bootstrap 模态不会在按钮中触发，而只能在 Firefox 中触发？

> ID：13074693
> 
> 赞同：1
> 
> 时间：2012-10-25T18:16:22.610
> 
> 标签：firefox, twitter-bootstrap, modal-dialog

我正在建立一个 Bootstrap “拆分按钮”模式，它看起来像这样：

```
<div class="btn-group">
  <button class="btn btn-small btn-primary">
    <a tabindex="-1" href="#" class="ajax-modal" 
       data-target="modal_vr-comment-form" data-backdrop="true" 
       data-controls-modal="res-modal" data-keyboard="true" 
       url="/some-url">Do the thing</a>
  </button>
  <button class="btn btn-small dropdown-toggle btn-primary" data-toggle="dropdown">
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu pull-right">
    <li><a tabindex="-1" href="#" class="ajax-modal" 
           data-target="modal_vr-comment-form" data-backdrop="true" 
           data-controls-modal="res-modal" data-keyboard="true"
           url="/some-url">Do the thing</a></li>
    <li><a tabindex="-1" href="/comment/something-else">Do something else</a></li>
    <li><a tabindex="-1" href="#" class="ajax-modal" 
           data-target="modal_unhide-people" data-backdrop="true" 
           data-controls-modal="res-modal" data-keyboard="true" 
           url="/comment/do-another-thing">Do another thing...</a></li>
  </ul>
</div> 
```

这里有趣的是，“做这件事”动作以两种方式呈现：作为单击主按钮时要执行的动作，以及作为选择下拉菜单中的项目时要执行的动作。这些操作`<a>`通过一些 javascript init-ing 设置为拆分按钮中标签上的点击处理程序。

这两个操作在 Chrome 和 Safari 中都可以正常工作。但是，在 Firefox 中，附加到按钮的操作不会触发，而附加到链接的操作会触发。在执行过程中进行的一些探索表明按钮上的单击处理程序没有触发，尽管它肯定已经设置好了。

关于为什么会这样（发生）的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:01:03.540

或多或少找到它：[Twitter Bootstrap 按钮在 IE8 中无响应](https://stackoverflow.com/questions/12042028/twitter-bootstrap-buttons-are-unresponsive-in-ie8)有一种工作方法。而不是将按钮格式化为：

```
 <button class="btn btn-small btn-primary">
    <a tabindex="-1" href="#" class="ajax-modal" 
       data-target="modal_vr-comment-form" data-backdrop="true" 
       data-controls-modal="res-modal" data-keyboard="true" 
       url="/some-url">Do the thing</a>
  </button> 
```

将其作为`<A>`与适当按钮样式类的纯链接：

```
<a tabindex="-1" href="#" class=" btn btn-small btn-primary ajax-modal" 
   data-target="modal_vr-comment-form" data-backdrop="true" 
   data-controls-modal="res-modal" data-keyboard="true" 
   url="/some-url">Do the thing</a> 
```

外观相同，在 Firefox、IE 和 Opera（两个平台）中运行良好。唷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-05T13:34:27.840

我在 2019 年遇到了同样的问题（Bootstrap 4.3.1，Firefox Quantum 69.0），发现这篇 2011 年的帖子为我解决了这个问题：只需删除模态的动画（从父 div 中删除“fade”类） . 原帖在这里：[http ://chapter31.com/2011/10/27/twitter-bootstrap-modal-not-working-in-firefox/](http://chapter31.com/2011/10/27/twitter-bootstrap-modal-not-working-in-firefox/)

# android - 智能应用横幅；适用于 Android/Google Play 的 Windows 应用商店应用 HTML 元标记？

> ID：13074694
> 
> 赞同：9
> 
> 时间：2012-10-25T18:16:25.787
> 
> 标签：android, ios, meta-tags, windows-store-apps

**[Smart App Banners](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)**是 iOS 6 中 iOS 设备的最新添加。它涉及添加一个元标记，当使用 Mobile Safari 访问该标记时，它会检查手机上是否存在应用程序，并显示访问者是否想要启动或启动的选项。安装应用程序。

```
<meta name="apple-itunes-app"
      content="app-id=myAppId, affiliate-data=myAffiliateData,
               app-argument=myArgs" /> 
```

**[Windows 应用商店应用链接](http://msdn.microsoft.com/en-us/library/ie/hh781489%28v=vs.85%29.aspx)**的工作方式类似：

```
<meta name="msApplication-ID" content="myAppId" />
<meta name="msApplication-PackageFamilyName"
      content="myMicrosoftAppBuildPackageName" />
<meta name="msApplication-Arguments" content="myArgs" /> 
```

Android 应用程序/Google Play 是否有类似的约定？有传递参数的机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:45:33.260

真的没有。您可以注册您的应用程序以处理某些 url，例如[http://app.mydomain.tld](http://app.mydomain.tld)，尽管这对于经验更丰富的 android 人员来说有些不悦。如果被调用，此 url 将使用完整的 URI 调用应用程序（这是向其传递数据的机制）。如果应用程序未安装或未设置为处理这些 url，则浏览器将重定向到服务器上可能提示安装的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-18T22:13:04.247

它需要比元标记更多的工作，但您可以找到我[在此处](https://stackoverflow.com/a/66699710/14621307)记录的简化版本。

您将需要提供 manifest.json 以及一些 Android 和 Chrome 设备要求。

# php - phpinfo() 不起作用，所以我找不到 php.ini

> ID：13074699
> 
> 赞同：2
> 
> 时间：2012-10-25T18:16:55.960
> 
> 标签：php, linux

我想知道我的 php.ini 文件在我的服务器上的位置。我尝试手动搜索它，但它不起作用。我也试过跑步

`<?php phpinfo(); ?>`

没有成功...当我运行 phpinfo(); 时，我在 error_log 上收到此错误；

> 出于安全原因，第 1 行 /home/pakhokve/public_html/phpinfo.php 中的 phpinfo() 已被禁用

phpinfo.php 只包含这个

`<?php phpinfo(); ?>`

我需要关闭 php 安全模式。因为这个，我做不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:20:25.957

```
/etc/php.ini 
```

或者在这里：

```
/etc/php/php.ini
/etc/php5/php.ini 
```

或者在这里：

```
/usr/bin/php5/bin/php.ini 
```

无论如何，您总是可以通过这种方式找到任何名为 php.ini 的文件

```
find / -name php.ini 
```

但我会推荐

```
locate php.ini 
```

注意：有时会是 php.ini.default

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:21:29.207

在命令行上：`php -i | grep 'Loaded'`

如果仍然无法获得它，您可能需要 root 权限才能运行它，但是您可能需要 root 权限才能编辑 php.ini：`find / -name php.ini`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:22:04.680

您是否尝试过`/etc/php.ini`和/或在站点根目录中放置 php.ini？

# reportviewer - MVC3 中的报表查看器

> ID：13074700
> 
> 赞同：2
> 
> 时间：2012-10-25T18:17:04.900
> 
> 标签：reportviewer

我在 Report.cshtml(View) 的部分视图中使用用户控件 (ascx) 使用报表查看器在 asp.net MVC 3 中编写了一个报表。我在运行应用程序时遇到了报表查看器控件的问题。当我有两个以上的页面并且我想查看第二个或更多页面时，我得到“microsoft jscript runtime error '__eventtarget' is null or not an object”。

错误是因为有回发。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T16:19:50.163

您将无法使用内置工具栏进行导航。（至少不是没有找到自己的工作）。

我所做的是在我的控件上方创建自己的栏，它只是将一个动作（“第一个”、“最后一个”、“下一个”、“上一个”）发送到控制器上的一个动作以调整 ReportViewer 的 CurrentPage 变量。（我通过会话保留当前页面并将其设置在用户控件 ascx 中）。

# regex - 正则表达式的比较

> ID：13074701
> 
> 赞同：-3
> 
> 时间：2012-10-25T18:17:05.807
> 
> 标签：regex, shell, unix

我希望搜索一个字符串是否在中间包含“CI”，无论它是多长。字母可以出现在任何地方，长度可以变化。我还希望将其用作 shell 脚本的条件开关。所以任何可以在 IF 中使用的命令来确定一个字符串是否包含这个。感谢帮助，因为这提供了如何使用它的洞察力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:27:48.590

不是正则表达式，但适用于 POSIX sh（更便携）

```
case "$FOO" in
*CI*)
    # do something
    ;;
esac 
```

正则表达式

```
if expr "$FOO" : '.*CI' >/dev/null; then 
    # do something
fi

if echo "$FOO" | grep 'CI' >/dev/null; then
    # do something
fi 
```

不是带有许多外壳的正则表达式（bash ksh）

```
if [[ $FOO = *CI* ]]; then
    # do something
fi 
```

正则表达式 bash 特定

```
if [[ $FOO =~ CI ]]; then
    # do something
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:19:24.603

你可以使用

```
echo $FOO | grep CI 
```

我猜。

# zend-framework - Zend 框架 dojo 选择 dojo.byid 异常对象# 没有方法“attr”

> ID：13074702
> 
> 赞同：0
> 
> 时间：2012-10-25T18:17:05.793
> 
> 标签：zend-framework, dojo, zend-form

我正在尝试获取我选择的选定值。选择元素由 Zend Framework Forms 呈现，我将属性 **'data-dojo-type' 设置为 'dijit/form/Select'** 并尝试通过以下方式访问它：

```
 require(["dojo/ready"], function(ready){
  ready(function(){
    ServerID = dojo.byId('ElementID').attr('value');
  });
}); 
```

Chrome 不断告诉我：

```
Uncaught TypeError: Object #<HTMLTableElement> has no method 'attr' 
```

问候克莱莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:53:52.373

我认为这应该是

```
ServerID = dojo.attr('ElementID', 'value'); 
```

# sql-server - SQL Server 活动监视器端口

> ID：13074704
> 
> 赞同：0
> 
> 时间：2012-10-25T18:17:15.483
> 
> 标签：sql-server, sql-server-2008, security, sql-server-2012

我试图说服我的 IT 部门授予我对 SQL Server 2012 实例的必要[权限](http://msdn.microsoft.com/en-us/library/ms175518.aspx#Security)，以便在 Management Studio 中使用活动监视器。我们的首席 IT 管理员担心授予它们，因为他不确定 Activity Monitor 侦听的端口（如果有）。我想补充一点，我目前可以在端口 1433 上访问此 SQL Server 实例。

我对 Activity Monitor 的内部工作不是很熟悉，Activity Monitor 监听的任何特定端口是否应该是安全问题？有谁知道任何可以提供此信息的资源？我想确保我给出准确的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:09:43.430

当您使用 Activity Monitor 时，您连接到实例的标准端口。默认情况下，默认实例为 1433，但可以更改。在活动监视器 GUI 中，它只是针对 DMV 运行 SELECT 语句。

然而，从安全角度来看，您将需要获得 VIEW SERVER STATE 权限，这本身就有影响，您可能会在此处被推回。要查看处理器使用情况，您还需要操作系统权限才能执行。否则处理器时间图将显示为灰色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T15:06:41.507

除了 SQL Server 的端口（标准实例通常为 1433，您可以在 Sql Server 配置管理器、SQL Server 网络配置、[Instance] 的协议、TCP/IP 中查找），还需要激活防火墙传入服务器 Windows 防火墙配置中的“Windows Management Instrumentation (WMI)”规则。

# ios - 切换显示/隐藏子表格单元 iOS

> ID：13074713
> 
> 赞同：1
> 
> 时间：2012-10-25T18:17:46.893
> 
> 标签：ios, uitableview

我正在尝试创建一个包含 STATES 和 CITIES 的 UITableview。首先，我希望表格只显示状态，每个值在单元格的右侧都有一个向下的披露箭头，让用户知道它下面有值。如果用户单击箭头，表格将展开以显示与所选州关联的 CITIES。然后用户可以选择一个城市，或者点击一个向上的披露箭头，然后“隐藏”这些城市。

我已经下载并查看了 Apple 的“表格视图动画和手势”示例。我希望有人可能知道一种更简单的方法来完成我所要求的。

[http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:56:17.767

很好地解释了你想要做什么。这就是我解决这个问题的方法，我认为在不给你无意义的代码并回答你可能遇到的任何编码问题的情况下解释它会更容易。

我会将表视图数据源设置为数组数组。这个想法是数组中的每个索引都代表一个州，因此包含许多城市，因此索引包含一个数组（城市数组）。父数组（州）在开始时为空，但稍后将填充它的（城市）数组将填充适当的城市。

然后我将设置表格视图以包含部分（我很想在这里放代码，但请继续阅读）。这些部分将代表城市。`(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section`然后，您可以使用委托填写带有部分的表格视图 。在第一次运行时，您可以在每个部分使用一个单元格填充实际表格（可能使用“扩展”或“更多”一词和向下箭头）。当用户触摸该单元格时，您可以使用 didselectrowatindexpath 知道哪个部分被触摸（indexpath 对象包含该部分），现在您知道它是哪个部分，只需通过添加该部分的城市数组来修改数据源数组数组（父数组）并更新表格视图。

这基本上为您的 tableview 提供了相应的样式和感觉。它很容易实现，但需要一点代码。我已经这样做了，并且愿意提供您可能需要的代码，最棘手的部分是以正确的方式更新 tableview。

编辑代码：

我按照上面的解释做了一个简单的例子。代码在[Github](https://github.com/sparqLee/Accordion)上，如有任何问题，请随时提出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:33:23.510

我认为表示这些信息的更好方法是让 UITableView 包含状态，每个状态都显示一个指向右侧的小箭头。然后，当用户单击该州时，加载下一个 UITableView，显示该特定州的所有城市。使用 UIViewController 推送 City 列表将允许用户轻松返回 States 列表。

这种方法对 iOS 用户更有意义，因为这是他们期望 Tables 工作的方式。

有很多教程解释了如何使用 UITableView。[这](http://adeem.me/blog/2009/05/19/iphone-sdk-tutorial-part-2-navigation-in-uitableview/)是一个包含许多 UITableView 教程的站点的链接。我链接到的教程解释了将 UIViewController 推入堆栈，以便有一个简单的后退按钮返回状态列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:37:02.150

通常这样的事情是通过切换到另一个视图并显示有关单元格的更多细节来完成的。

你想要你可以通过实际制作自定义来实现，`UITableViewCell`其中包含`UIButton`箭头图像和`UITableView`. 如果第一次单击按钮，您可以重新加载您的单元格并创建`UITableView`可以显示城市的内部。再次单击只会再次重新加载单元格，而根本不会返回内部`UITableView`。您还需要将选定状态保留在某处，因为您可能必须重新加载前一个单元格并隐藏内表，以防单击其他单元格中的箭头。

# asp.net - 这是一个好的做法吗？通过 WebResource.axd 提供所有静态内容是否有任何明显的收益？

> ID：13074718
> 
> 赞同：0
> 
> 时间：2012-10-25T18:18:02.000
> 
> 标签：asp.net, .net

我们知道可以通过 WebResource.axd 提供静态内容，方法是将这些静态内容（图像、css、javascript）嵌入到类库中并通过 WebResource.axd 链接公开它们。但是，与直接从虚拟目录提供这些静态内容的 IIS 相比，它有什么明显的优势，或者它有什么劣势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:46:51.967

WebResource.axd 在程序集中公开资源，但 IIS 在文件系统上显示文件。无法比较，因为它们服务于不同的目标。一些第三方公司使用 webresource.axd 将他们的资源打包到程序集中，以便轻松部署这些程序集，例如 DevExpress。但是，这种包装使调试变得更加困难。

# sql - 将多行的值合并为一列

> ID：13074719
> 
> 赞同：4
> 
> 时间：2012-10-25T18:18:03.730
> 
> 标签：sql, teradata

来源数据：

```
COLA    COLB   COLC
1       BO     AFV
1       BO     AKG
1       BO     UYD
2       BOS    KJHSDKJ
2       BOS    YWI
3       POS    JHSFJH
3       POS    IUXN 
```

我想要的结果如下：

```
COLA    COLB    COLC
1       BO      AFV, AKG,UYD
2       BOS     KJHSDKJ,YWI
3       POS     JHSFJH,IUXN 
```

COLA、COLB 是关键列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:02:44.027

这是一个可以完成这项工作的递归查询：

```
WITH RECURSIVE REC_VIEW (COLA, COLB, ROLL_UP, COLC) 
AS
(
SELECT COLA
     , COLB
     , MIN(COLC) (VARCHAR(1000))
     , MIN(COLC)
FROM  your_table
GROUP BY 1,2
UNION ALL
SELECT B.COLA
     , B.COLB
     , B.ROLL_UP || ',' || A.COLC
     , A.COLC
FROM   your_table A 
INNER JOIN REC_VIEW B
ON    A.COLA = B.COLA
  AND A.COLB = B.COLB
  AND A.COLC > B.COLC
)

SELECT COLA, COLB, ROLL_UP as COLC
FROM REC_VIEW

QUALIFY ROW_NUMBER() OVER (PARTITION BY COLA, COLB
                           ORDER BY CHARACTER_LENGTH(ROLL_UP) DESC) = 1 
```

我希望我了解如何更好地格式化答案；我所有的“漂亮”间距都消失了。希望这很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:41:59.943

这是一个示例的[链接。](http://thesimpleprogrammer.blogspot.com/2013/02/concat-rows-as-single-column-in-teradata.html)

它有一些示例数据和一个实际查询。

# mysql - MySQL 通过多个数据库加入、计数和分组

> ID：13074720
> 
> 赞同：2
> 
> 时间：2012-10-25T18:18:04.653
> 
> 标签：mysql, count, group-by, left-join

我有这个工作查询

```
SELECT t1.id as stockid, t1.description as stockdescription, t2.inkoop as price , COUNT(t2.inkoop) as cnt, 
(t2.inkoop *  COUNT(t2.inkoop)) as totalamount
FROM database1.table_products t1 
LEFT JOIN database1.table_stock t2 ON t1.id = t2.stock_id 
WHERE 1 
GROUP BY t2.inkoop
ORDER BY t1.id ASC 
```

1 个数据库，2 个表：t1 是带有 id 的产品“描述”数据库，描述 t2 是库存，其中有很多以什么价格（购买）的产品并由 stock_id 引用

```
Output:
id  stockdescription   price cnt totalamount
1   Product1           1067  15  16005
1   Product1           1290 103  132870
2   Product2           2750  70  192500
3   Product3           500    0  0 
```

但是现在我有了第二个数据库（database2）和第二个库存表（stock2）（与database1.table_stock的结构完全相同）

如何更改我的查询，以便我还可以添加“cnt2”并将总计更改为我的结果？

```
Like this:
id  stockdescription   price cnt cnt2 totalcnt totalamount
1   Product1           1067  15   0    15      16005
1   Product1           1290 103   0    103     132870
2   Product2           2750  70   5    75      206250
3   Product3           500    0   4     4      2000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:48:27.633

您可以连接多个表，但您将获得两个股票表的完全连接，这意味着在`GROUP BY`. 您可以通过嵌套查询来避免这种情况，例如：

```
SELECT sub.*, COUNT(stock2.inkoop) AS cnt2
FROM ( <paste your query here> ) AS sub
LEFT JOIN database2.stock2 AS stock2 ON sub.stockid = stock2.stock_id
GROUP BY sub.stockid
ORDER BY sub.stockid ASC 
```

现在你有两个左连接，每个都有自己的`GROUP BY`. 所以每个左连接只看到一个左手表因​​子，你不会因为一次连接太多表而导致重复。

# html - 创建下拉 UL 导航栏

> ID：13074723
> 
> 赞同：0
> 
> 时间：2012-10-25T18:18:14.853
> 
> 标签：html, css

到目前为止，这是我的代码：

```
<?php

 echo '
        <nav class="floatfix">      
                <ul>
                    <li><a href="index.php">Home</a></li>
     <ul>
      <li><a href="index2.php">£3.99 T-Shirts</a></li>
      <li><a href="index3.php">£4.99 T-Shirts</a></li>
      </ul>
                    <li><a href="login.php">Log In</a></li>
                    <li><a href="#">Account</a></li>
                    <li><a href="feedback.php">Feedback</a></li>
                    <li><a href="#">Checkout</a></li>
                    <li><a href="aboutus.php">About Us</a></li>
                    </ul>
            </nav>
   ';

?> 
```

这是我的 CSS

```
/* =float clearing
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
.floatfix {
   display: block;
   height: 1%;
   text-transform: uppercase;

}
.floatfix:after  {
   content: ".";
   display: block;
   height: 0;
   clear: both;
   visibility: hidden;
} 
```

如何获得 3.99 英镑的衬衫和 4.99 英镑的衬衫作为导航栏“主页”下方的下拉菜单。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:26:00.827

甚至不需要进入你需要在 Home LI 中包含辅助 UL 的 CSS，如下所示：

```
 <nav class="floatfix">      
            <ul>
                <li><a href="index.php">Home</a>
                   <ul>
                       <li><a href="index2.php">£3.99 T-Shirts</a></li>
                       <li><a href="index3.php">£4.99 T-Shirts</a></li>
                   </ul>
                </li>
                <li><a href="login.php">Log In</a></li>
                <li><a href="#">Account</a></li>
                <li><a href="feedback.php">Feedback</a></li>
                <li><a href="#">Checkout</a></li>
                <li><a href="aboutus.php">About Us</a></li>
                </ul>
        </nav> 
```

从快速教程中窃取的 CSS：

```
ul {
font-family: Arial, Verdana;
font-size: 14px;
margin: 0;
padding: 0;
list-style: none;
}
ul li {
display: block;
position: relative;
float: left;
}
li ul {
display: none;
}
ul li a {
display: block;
text-decoration: none;
color: #ffffff;
border-top: 1px solid #ffffff;
padding: 5px 15px 5px 15px;
background: #1e7c9a;
margin-left: 1px;
white-space: nowrap;
}
ul li a:hover {
background: #3b3b3b;
}
li:hover ul {
display: block;
position: absolute;
}
li:hover li {
float: none;
font-size: 11px;
}
li:hover a { background: #3b3b3b; }
li:hover li a:hover {
background: #1e7c9a;
}   ​ 
```

演示：http: [//jsfiddle.net/calder12/7j6H9/](http://jsfiddle.net/calder12/7j6H9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:22:40.373

除非我遗漏了一些东西，否则你想使用这样的选择：

```
 <nav class="floatfix">      
                <ul>
                    <li><a href="index.php">Home</a></li>
                    <select id="lstPrice">
                     <option value="3.99">£3.99 T Shirts</option>
                <option value="4.99">£4.99 T Shirts</option>
              </select>
                    <li><a href="login.php">Log In</a></li>
                    <li><a href="#">Account</a></li>
                    <li><a href="feedback.php">Feedback</a></li>
                    <li><a href="#">Checkout</a></li>
                    <li><a href="aboutus.php">About Us</a></li>
                    </ul>
            </nav> 
```

# ios - 复制对象时的目标内存泄漏

> ID：13074725
> 
> 赞同：0
> 
> 时间：2012-10-25T18:18:23.267
> 
> 标签：ios, objective-c, memory-leaks

我有一个看起来像社交网络 iOS 应用的示例应用。我是可可框架的新手，所以我正在研究示例代码。点击分析后，应用程序中报告了 255 次内存泄漏。我能够解决大约 100 个非常简单的泄漏，但我无法解决其余的问题。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{ 
    //DLog(@"found this element: %@", elementName);
    currentElement = [elementName copy];
    if([MethodName isEqualToString:@"SignInStep"])
    {

        if ([elementName isEqualToString:@"item"]) 
        { // clear out our story item caches... 
            item = [[NSMutableDictionary alloc] init];
            currentUserId = [[NSMutableString alloc] init];

            currentError = [[NSMutableString alloc] init];
        } 

    }

} 
```

项目的变量分配：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{ 
    //DLog(@"ended element: %@", elementName);

    if([MethodName isEqualToString:@"SignInStep"])
    {
        if ([elementName isEqualToString:@"item"]) 
        { // save values to an item, then store that item into the array...
            [item setObject:currentUserId forKey:@"userId"]; 

            [item setObject:currentError forKey:@"error"];

            [SignIn addObject:[item copy]];    //Method returns Objective C Object with +1 retain count 

        } 
    } 

}//Object leaked: allocated object is not referenced later in this execution path and has a retain count of +1 
```

我收到以下错误：

> 1) 方法返回具有 +1 保留计数的 Objective C 对象
> 
> 2) 对象泄露：分配的对象在此执行路径后面没有被引用，并且保留计数为+1

我在上面的代码中提到了我收到这些泄漏的确切位置。谁能告诉我这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:41:59.093

> **您必须放弃您拥有的对象的所有权**

```
id obj =  [item copy];
[SignIn addObject:obj]; // SignIn will retain obj 
[obj release]; 
```

看看[内存管理编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

```
 item = [[NSMutableDictionary alloc] init]; // release this object
        currentUserId = [[NSMutableString alloc] init]; // release this object

        currentError = [[NSMutableString alloc] init]; // release this object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:59:16.600

每个 alloc、retain、copy 调用都应该有等效的 release 调用。当您在 didStartElement 中分配项目、currentUserId 和 currentError 时。它们应该在某个地方发布，根据您的代码，它将主要在 didEndElement 中：

请记住，只要将对象添加到数组或字典中，就会保留这些对象。只要数组（或）字典被释放，这些对象就会被释放。

id obj = [项目副本]；// obj 保留计数 +1

[登录添加对象：obj]；// obj 保留计数 +1

[对象释放]；// obj 保留计数-1

每当 SignIn 被释放时，obj retain count 将变为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:17:04.427

还有一些与内存泄漏有关的观点。应遵循以下规则以避免内存泄漏：

**您拥有您创建的任何对象**

您使用名称以“alloc”、“new”、“copy”或“mutableCopy”开头的方法创建对象（例如，alloc、newObject 或 mutableCopy）。

**您可以使用保留来获取对象的所有权**

接收到的对象通常保证在接收它的方法中保持有效，并且该方法也可以安全地将对象返回给它的调用者。你在两种情况下使用retain：（1）在访问器方法或init方法的实现中，获取你想要存储的对象的所有权作为属性值；(2) 防止对象因某些其他操作的副作用而失效

**当您不再需要它时，您必须放弃您拥有的对象的所有权**

您通过向对象发送释放消息或自动释放消息来放弃对象的所有权。

**您不得放弃您不拥有的对象的所有权**

参考：[苹果文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)

# css - 为什么 li 中的浮动项目在其他缩放级别用 chrome 包装？

> ID：13074729
> 
> 赞同：2
> 
> 时间：2012-10-25T18:18:41.437
> 
> 标签：css, html, layout, css-float

我有一个`ul`with `li`s ，我将其用作选项卡列表。s 里面有`li`一张图片和一些文字。出于某种原因，在 chrome 中，文本不会与图像出现在同一行，而是换行到下一行。

我不明白为什么会发生这种情况，不应该 li 扩展以提供足够的空间来容纳图像和文本吗？Firefox 或 IE 不会出现此问题。在 Windows 7 上使用 Chrome 22、Firefox 16 和 IE 9 进行测试。

![火狐示例](../Images/d441e0650575ec19b26409f1463f7ae0.png) ![镀铬示例](../Images/3aef6e3b1f8afd676e330e282957c96b.png)

[请参阅此小提琴](http://jsfiddle.net/NypvL/1/)以查看标记（从较长的页面中提取 - 也不是真正的图标）。

这听起来[类似于这个问题](https://stackoverflow.com/questions/6145422/links-inside-of-floated-li-wrapping-in-chrome)，但这个`nowrap`技巧对我不起作用。

**更新：** 我刚刚意识到我设置了不同的缩放级别，144%。在某些缩放级别会发生问题，而在其他缩放级别则不会。我想这可能与某些尺寸的 ems 和其他尺寸的 px 有关？我仍然不明白为什么会发生这种情况，它不应该仍然获得适当的空间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:42:11.753

在标题上设置最小宽度。如果您减小浏览器大小，您也会遇到问题。弄清楚它在开始堆叠之前可以走多小，并将标题上的最小宽度设置为该大小，如果浏览器也被缩放，则可以修复它。

# sql - SQL 为什么使用 isnull(field, '') <> ''？

> ID：13074730
> 
> 赞同：3
> 
> 时间：2012-10-25T18:18:41.767
> 
> 标签：sql, sql-server, null, sql-server-2000, string

我正在查看我继承的一些代码，我发现了这样一行：

```
And isnull(IH.CustomerItemNumber, '') <> '' 
```

我的一位前辈似乎在大量的 where 子句或 join 子句中使用了哪一个。在我看来，这是对函数的不必要调用，因此会消耗性能，因为 NULL 永远不会等于空字符串 ''，对吧？

具体来说，我将其从特定查询中的连接子句中取出，性能显着提高（从 46-49 秒到 1-3 秒）。

将其替换为`AND IH.CustomerItemNumber <> ''`

我的评估在这里正确吗？这是多余且缓慢的，可以删除吗？这段代码在什么情况下可能有用？

编辑：那么，NULL 可以等于空字符串吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T18:22:15.790

这在语义上与以下内容相同：

```
And IH.CustomerItemNumber <> '' And IH.CustomerItemNumber Is Not Null 
```

因此，它正在检查该列是否既不是空的，也不是空字符串。可能很重要。

**更新**

在这种情况下，因为我们正在寻找字符串文字（空字符串）的不相等性，所以您至少有三个语义正确的选项：

*   `And IH.CustomerItemNumber <> ''`
*   `And IH.CustomerItemNumber <> '' And IH.CustomerItemNumber Is Not Null`
*   `And isnull(IH.CustomerItemNumber, '') <> ''`

第一个将返回与其他两个相同的结果集，因为无论[ansi_nulls](http://msdn.microsoft.com/en-us/library/ms188048.aspx)设置`<> ''`如何，都不会匹配空值。

在开发系统的快速测试中，第一个和第二个都使用了索引查找。在几个*非常简化*的测试之一中，第一个比第二个*稍微好一点。*

 *第三个，因为它添加了一个函数调用，可能不像其他的那样使用索引，所以这可能是最糟糕的选择。也就是说，在快速测试中，isnull 能够使用索引扫描。进一步添加`Is Not Null`到第三个选项实际上加快了它的速度并将其移至索引搜索。去图（GO！GO！查询优化器！）。

与@Gordon 一样，我大多数时候也会选择第二个选项，因为它可以更好地向其他开发人员（或我自己）说明我的意图，并且如果我们要检查另一个可能为空的列是否相等（想想潜在的 ansi_nulls 关闭）。

为了完整起见：

*   `And nullif(IH.CustomerItemNumber, '') is not null`
*   `And case when IH.CustomerItemNumber = '' then null else IH.CustomerItemNumber end is not null`
*   `And case IH.CustomerItemNumber when '' then null else IH.CustomerItemNumber end is not null`

在 SQL Server 中都以完全相同的方式解释（据我所知），并且执行与上面的第三个选项相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T18:32:51.903

代码存在的原因可能是因为应用程序的历史。也许在某个时间点，字段中允许使用 NULL。然后，这些被替换为空字符串。

代码效率低的原因是因为join的优化。 `ISNULL()`其 ANSI 标准等效`COALESCE()`项通常会为查询处理增加可忽略不计的开销。（似乎在某些版本的 SQl Server 中，`COALESCE()`对第一个参数求值两次，如果它是子查询，这是一个问题。）

我的猜测是该字段上有一个索引。当字段单独使用时，SQL Server 知道将索引用于连接。包含在函数调用中时使用索引不够聪明。降低查询速度的是连接优化，而不是函数调用的开销。

就个人而言，如果性能相同，我更喜欢带有显式 NULL 检查的表单：

```
IH.CustomerItemNumber <> '' and IH.CustomerItemNumber is not null 
```

明确 NULL 处理只能帮助您在将来维护代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T18:22:04.510

您可以用于 NULL 检查：

```
And (IH.CustomerItemNumber IS NOT NULL) AND (IH.CustomerItemNumber <> '') 
```

顺便说一句， **[ISNULL ( check_expression , replacement_value )](http://msdn.microsoft.com/en-us/library/ms184325.aspx) - 用指定的替换值替换 NULL。**

在您的情况下，如果 IH.CustomerItemNumber 的值为 null 那么它将被替换为空值，然后将与空字符串进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:40:07.190

> 因为NULL永远不会等于空字符串''，对吧？

NULL 也永远不会*不等于*空字符串......它既是一次又不是同时。它传达了一种您不确定的状态。*

# android - 加载 XML 布局

> ID：13074732
> 
> 赞同：1
> 
> 时间：2012-10-25T18:18:46.743
> 
> 标签：android, xml, layout, loading

我在加载以前创建的布局时遇到问题。我想加载它并更改内部按钮上的文本，然后将其显示给用户。这将是一个测验问题，我必须在一项活动中多次展示它。我不想为我的布局创建新类。

我必须使用什么？我读过一些关于 Inflate 类的东西，但我认为它只用于创建新类。我尝试`setContentView()`了方法，但是当执行此加载的方法开始时应用程序停止：

```
LinearLayout layout = (LinearLayout) findViewById(R.id.CapitalQuestionLayout);
setContentView((View) layout); 
```

有人可以提供一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:34:27.363

要创建“测验”应用程序，您的基本要求是：

1.  一个布局，其中有一个`TextView`问题和 4 个`Buttons`选项。
2.  一组问题；很明显 ：-）。

您可以创建一个自定义类 - 将保存问题的文本及其相关选项（作为字符串）的问题。

现在，每当您想为按钮显示具有不同文本的新问题时，只需执行以下操作：

1.  如果用户单击正确答案，则`Right-Answer-Activity`向用户显示 a（具有`next-question-Button`）。
2.  当用户单击时，`next-question-button`您可以使用随机选取的问题对象的属性（即问题的文本和选项的文本）显示`Question-Activity`和填充布局视图。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:41:58.917

这在 Android 应用程序中很常见。你的字段/按钮有id吗？对于父活动，你主要做

```
Button someButton = (Button) findViewById(R.id.the_id_to_the_button_you_want_to_change); 
```

这使您可以执行以下操作

```
someButton.setText("What is the ultimate answer to life, the universe, and everything?"); 
```

如果您想做其他事情，例如设置颜色，请查阅 Andorid 文档。如果您有某种视图组（RelativeLayout / LinearLayout / 等），您可以指定特定的

```
Button someButton = (Button)viewGroup.findViewById(R.id.awesomely_named_button_identifier); 
```

上面的 someOtherButton 更常用于膨胀的 viewGroups

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T19:29:09.807

当您从 R 类调用时，尝试使用布局字段而不是 id 字段，如下所示：

```
LinearLayout layout = (LinearLayout) findViewById(R.layout.CapitalQuestionLayout);
setContentView((View) layout); 
```

# javascript - 哪个更好：来自服务器的更多数据，更少的客户端计算，反之亦然

> ID：13074733
> 
> 赞同：0
> 
> 时间：2012-10-25T18:18:50.013
> 
> 标签：javascript, jquery, html, ajax, client-server

我有一个正在开发的客户端-服务器 Web 应用程序。在客户端的初始加载中，我需要处理来自服务器端数据库的一些 JSON 数据以获取正确的格式......这基本上需要向其添加一堆空 JSON 对象（因此使整个 JSON 数组更大）。这种格式计算有点简单（不需要超级计算机），因此可以在客户端或服务器上完成。

所以我有**两个实施选择**是：

1.  **在服务器上格式化 JSON 数据，向客户端发送更多数据**
2.  **向客户端发送 LESS 数据，在客户端格式化 JSON 数据**（额外的客户端计算）

我可以想到这两种选择的利弊...

*   选择 #1，一致地计算格式，但增加初始加载必须发送的数据包数量。
*   选择 #2，最小化必须发送的数据包数量，但向性能变化或未知的客户端添加额外的计算。

在这两个选择中，是否有我通常应该倾向于的“最佳实践”解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:23:26.270

这是一个很好也很有趣的问题。我宁愿选择选项#1，因为您永远不会知道客户端设备的功能。但是，如果您的程序在服务器上运行（通常具有强大的硬件），则处理时间将与客户端设备无关，客户端设备可能是计算能力降低的手机。

# ruby-on-rails-3 - Heroku/Rails 将 example.com 路由到 mydomain.example/example

> ID：13074734
> 
> 赞同：-1
> 
> 时间：2012-10-25T18:18:51.217
> 
> 标签：ruby-on-rails-3, heroku, dns, routing

我的 Rails 应用程序是用户创建自己的基本网站的一种方式。所以他们每个人都会有一个根文件夹，即`example.com/user/1`. 他们将有其他页面等`example.com/user/1/about`。我如何配置 Rails 和 Heroku，以便类似`www.user1.example`指向的`example.com/user/1`东西和类似的东西`www.user1.example/about`指向`example.com/user/1/about`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:41:52.847

我在我的应用程序中所做的方式是首先在数据库中拥有用户域列表。然后创建一个高级约束 [http://edgeguides.rubyonrails.org/routing.html#advanced-constraints](http://edgeguides.rubyonrails.org/routing.html#advanced-constraints)

在这种情况下，我的约束类如下所示：

```
class UserDomainConstraint
  def self.matches?(request)
    UserDomain.all.map(&:domain_name).include? request.domain
  end
end 
```

然后在路线中使用该约束

```
root to: 'user_domains#index', :constraints: UserDomainConstraint 
```

然后，我的操作会查看 request.domain 并采取相应措施。

# mysql - MySQL：查询多个表的奇怪行为

> ID：13074736
> 
> 赞同：0
> 
> 时间：2012-10-25T18:18:53.570
> 
> 标签：mysql

我知道这应该可行，我之前已经做过数百次，但不知何故今晚（或早上，取决于你在哪里）它没有做它应该做的事情。

我正在尝试查询多个表，但是我遇到了一些困难，所以我减少到最大查询：

```
SELECT tasks.* FROM tasks, assigned WHERE tasks.id = 1 //not working
SELECT * FROM tasks WHERE id = 1 //working 
```

我尝试引用它们，但没有成功。现在，第一个陈述有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:22:40.857

您正在使用隐式连接语法。有了这个，您需要以某种方式加入您缺少的那些表：

```
SELECT tasks.*
FROM tasks, assigned
WHERE tasks.id = assigned.task # <-- missing this
    AND tasks.id = 1 
```

您应该练习使用显式`JOIN`语法（ANSI 标准）：

```
SELECT tasks.col1
FROM tasks
JOIN assigned ON assigned.task = tasks.id
WHERE tasks.id = 1 
```

如果您没有从中选择任何内容`assigned`，为什么要获取该结果集？

此外，您应该使用列列表而不是使用`SELECT *`.

**更新**

如果当时有 in`tasks`但没有 in的记录，即使 in 中没有记录`assigned`，也可以使用`LEFT JOIN`which 将返回 in 的记录。`tasks``assigned`

```
SELECT tasks.col1
FROM tasks
LEFT JOIN assigned ON assigned.task = tasks.id
WHERE tasks.id = 1 
```

# c# - 另一个进程正在使用 pdf 文档

> ID：13074737
> 
> 赞同：1
> 
> 时间：2012-10-25T18:18:53.640
> 
> 标签：c#, pdf, itextsharp

我有两个 PDF 文件：`Pdf A`和`Pdf B`. `Pdf A`已经存在于计算机的`C:`驱动器上，并`Pdf B`通过也位于驱动器中的程序生成`C:`。

我想要做的是将两者结合起来，以便`Pdf A`首先显示 's 页面，然后显示`Pdf B`'s 页面。

这是我的代码，它尝试在给定 PDF 列表的情况下将两者结合起来（`Pdf A`是第一个元素，`Pdf B`是列表中的第二个元素`files`，并且`destinationfile`is `Pdf A`）：

```
public static void MergePdfFiles(string destinationfile, List<string> files)
{
    Document document = null;

    try
    {
        List<PdfReader> readers = new List<PdfReader>();
        List<int> pages = new List<int>();

        foreach (string file in files)
        {
            readers.Add(new PdfReader(file));
        }

        document = new Document(readers[0].GetPageSizeWithRotation(1));

        PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(destinationfile, FileMode.Create));

        document.Open();

        foreach (PdfReader reader in readers)
        {
            pages.Add(reader.NumberOfPages);
            WritePage(reader, document, writer);
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
    finally
    {
        //being used by another process
        document.Close();
    }
} 
```

当文档对象尝试关闭时会出现此问题。它说它正在使用另一个过程。

什么“其他”过程正在使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:26:10.577

尝试更改此行：

```
PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(destinationfile, FileMode.Create)); 
```

到这一行：

```
PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(destinationfile, FileMode.Create,FileAccess.Write,FileShare.ReadWrite)); 
```

# java - 用于传入连接的 Java NIO 选择器和用于传入消息的选择器

> ID：13074743
> 
> 赞同：0
> 
> 时间：2012-10-25T18:19:04.213
> 
> 标签：java, sockets, nio

我正在尝试使用 NIO 来构建一个高效的 Socket TCP/IP 服务器。

我有一个接受连接的主线程，然后将其添加到另一个线程，该线程应该等待来自客户端的消息然后读取它。

当我对所有操作只使用一个线程和一个选择器时，它工作得很好，但是当我试图让它与 2 个线程和 2 个选择器一起工作时，传入的连接接受正在工作，但读取不是，我认为它因为我的选择器阻塞了线程，因此他不知道我已经注册了一个新的 SocketChannel。

这是我的主线程：

```
public static void main(String[] args) {
   try {
      System.out.println("Who's Around Server Started!");
      Selector connectionsSelector = null;
      ServerSocketChannel server = null;
      String host = "localhost";
      int port = 80;    
      LiveConnectionsManager liveConnectionsManager =
         new LiveConnectionsManager();
      liveConnectionsManager.start();
      connectionsSelector = Selector.open();
      server = ServerSocketChannel.open();
      server.socket().bind(new InetSocketAddress(host,port));
      server.configureBlocking(false);
      server.register(connectionsSelector, SelectionKey.OP_ACCEPT);
      while (true) {
         connectionsSelector.select();
         Iterator<SelectionKey> iterator =
            connectionsSelector.selectedKeys().iterator();
         while (iterator.hasNext()) {
            SelectionKey incomingConnection = iterator.next();
            iterator.remove();
            if( incomingConnection.isConnectable()) {
               ((SocketChannel)incomingConnection.channel()).finishConnect();
            }
            if( incomingConnection.isAcceptable()){
               acceptConnection(server.accept(), liveConnectionsManager);
            }
         }
      }
   } catch (Throwable e) {
      throw new RuntimeException("Server failure: " + e.getMessage());
   } 
}

private static void acceptConnection(
   SocketChannel acceptedConnection,
   LiveConnectionsManager liveConnectionsManager ) throws IOException
{
   acceptedConnection.configureBlocking(false);
   acceptedConnection.socket().setTcpNoDelay(true);
   System.out.println(
      "New connection from: " + acceptedConnection.socket().getInetAddress());
   liveConnectionsManager.addLiveConnection(acceptedConnection);
} 
```

这是我的 LiveConnectionsManager：

```
private Selector messagesSelector;

public LiveConnectionsManager(){
   try {
      messagesSelector = Selector.open();           
   } catch (IOException e) {
      System.out.println("Couldn't run LiveConnectionsManager");
   }
}

@Override
public void run() {
   try {
      System.out.println("LiveConnectionManager Started!");
      while(true) {             
         messagesSelector.select();
         Iterator<SelectionKey> iterator = messagesSelector.keys().iterator();
         while (iterator.hasNext()){
            SelectionKey newData = iterator.next();
            iterator.remove();
            if( newData.isReadable()){
               readIncomingData(((SocketChannel)newData.channel()));
            }
         }
      }
   } catch (IOException e) {
      e.printStackTrace();
   }
}

public void addLiveConnection( SocketChannel socketChannel )
   throws ClosedChannelException
{
   socketChannel.register(messagesSelector, SelectionKey.OP_READ);      
} 
```

# jquery - 使用 AWS 中静态文件夹中的项目创建 Sprite 图像

> ID：13074745
> 
> 赞同：1
> 
> 时间：2012-10-25T18:19:09.753
> 
> 标签：jquery, ajax, django, amazon-s3, css-sprites

我在 AWS 服务器中有一个包含图像的静态文件夹，每次将图像发送到服务器（通过 FTP）时，我都需要创建（和更新）一个精灵图像，并将其位置保存在 JSON 中以发送到 Web 服务. 实际上，我在 Django 项目中使用用 Jquery 调用的 Ajax 加载这些图像，该项目通常在 Internet Explorer 中工作，因此加载速度很慢，并且某些图像并不总是加载，用户需要刷新页面。有人对如何创建精灵有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:36:04.570

为什么不直接将精灵作为静态资产存储在 AWS S3 上？如果你真的需要在客户端从单个图像创建一个精灵，那么使用像[Spritely这样的东西](http://www.spritely.net/)

# amazon-web-services - DynamoDB：如何执行条件写入以强制执行唯一的 Hash + Range 键

> ID：13074749
> 
> 赞同：6
> 
> 时间：2012-10-25T18:19:43.340
> 
> 标签：amazon-web-services, amazon-dynamodb

我正在使用 DynamoDB 来存储事件。它们存储在 1 个事件表中，带有哈希键“源 ID”和范围键“版本”。每次源发生新事件时，我想添加一个具有源 ID 和增加版本 nr 的新项目。

是否可以指定条件写入以使重复项（相同的哈希键和相同的范围键）永远不存在？如果是这样，你会怎么做？

对于只有一个哈希键的表，我已经成功地做到了这一点：

```
Map<String, ExpectedAttributeValue> expected = new HashMap<String, ExpectedAttributeValue>();
expected.put("key", new ExpectedAttributeValue().withExists(false)); 
```

但不确定如何处理哈希 + 范围键....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:00:33.087

我不太了解 Java SDK，但您可以在`range_key`和`hash_key`.

也许更好的主意是使用时间戳而不是版本号？否则，还有一些技术可以生成唯一 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T03:28:41.440

我试图强制执行哈希和范围键的唯一组合，并遇到了这篇文章。我发现它并没有完全回答我的问题，但确实为我指明了正确的方向。这是一种整理松散末端的尝试。

看起来 DynamoDB 实际上是通过设计强制执行哈希和范围键的唯一组合。我引用

“表中的所有项目都必须具有主键属性值，并且 Amazon DynamoDB 确保该名称的值是唯一的”

来自[http://aws.amazon.com/dynamodb/](http://aws.amazon.com/dynamodb/)在标题为 Primary Key 的部分下。

在我自己使用 putItem 和 aws-sdk for nodejs 的测试中，我能够发布两个相同的项目而不会产生错误。当我检查数据库时，实际上只插入了一项。似乎第二次调用 putItem 具有相同的散列和范围键组合被视为对原始项目的更新。

当我尝试使用设置的值在散列键和范围键上设置 exists=false 选项时，我也收到错误“不能期望属性具有指定的值而期望它不存在”。为了解决这个错误，我删除了预期的哈希和范围键下的值，当我尝试两次插入相同的键时，它开始生成验证错误。

所以，我的插入命令看起来像这样（对于 Java 会有所不同，但希望你明白）

```
{     "TableName": "MyTableName",

 "Item"          :  {

                          "HashKeyFieldName": {

                                   "S": HashKeyValue

                          }, 

                          "RangeKeyFieldName": {

                                   "N": currentTime.getTime().toString()

                          },

                          "OtherField": {

                                   "N": "61404032632"

                          }

                      },

 "Expected":  {

                         "HashKeyFieldName"       : { "Exists" : false},
                         "RangeKeyFieldName"     : { "Exists" : false}

                    } 
```

}

虽然最初我试图进行条件插入以检查是否存在与我试图插入的相同的哈希值和范围值，但现在我只需要检查 HashField 和 RangeField 是否存在。如果它们存在，这意味着我正在更新一个项目而不是插入。

# html - css：内容框穿过固定页脚框

> ID：13074751
> 
> 赞同：1
> 
> 时间：2012-10-25T18:19:55.413
> 
> 标签：html, css, layout

我已经修复了页脚 DIV 和内容 DIV。页脚 DIV 是固定的，因此它始终可见。内容 DIV 是 100% 高度，但它触及页脚 DIV 并穿过它到最后。我希望它在页脚开始时结束。

```
<div id="footer">
</div>

<div id="content">
</div> 
```

这是一个*jsFiddle*链接：http: [//jsfiddle.net/MXMWe/3/](http://jsfiddle.net/MXMWe/3/)

**问题：**内容 DIV（及其文本）超出页脚。

**注意 1：**无论您滚动到哪里，页脚都必须始终可见（可能已修复。

**注意2：**滚动条必须是正常的，就像你第一次加载浏览器时一样。那里没有变化。

这是一张说明我想要实现 的目标的*图像：*![在此处输入图像描述](../Images/86ff0dc3f7bf79132b7a55f4314c4882.png)

如果被问到，我会提供更多信息。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:34:42.043

我更新了jsfiddle：

[http://jsfiddle.net/MXMWe/4/](http://jsfiddle.net/MXMWe/4/)

一些东西：

1.  我`<div id="footer-padding></div>`在结束 div 之前添加了一个`#content`. 然后在 css 中添加`height:120px;`（与 相同的高度`#footer`） - 这允许内容文本不会卡在网站的底部，而是卡在页脚的最顶部。
2.  我删除了页脚上的不透明度，因为如果你有不透明度，它会影响整个 div - AKA 内容 div 中的文本将在它后面可见，因为它是透明的。
3.  我添加了一个`z-index: 2`以`#footer`确保它始终高于`#content`。

如果您要将不透明度/透明度作为页脚的背景，您将看到它上面的任何东西，它的后面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T18:28:21.077

你试过使用[CSS Sticky Footer](http://cssstickyfooter.com)吗？

# object - 将序列化对象存储到磁盘而不是使用数据库

> ID：13074755
> 
> 赞同：0
> 
> 时间：2012-10-25T18:20:10.517
> 
> 标签：object, serialization, storage

我正在构建一个小型应用程序，我宁愿没有数据库的费用（托管，麻烦）。我正在考虑为每个用户编写一个类（称为设置），并将其作为 xml 序列化到磁盘。

当用户登录时，我会将 xml 反序列化回 List，滚动直到找到我需要的用户，然后我就得到了我需要的一切。

我想如果需要的话，我可以把它全部包装在一个 Singleton 中。

我想这对于一个大型应用程序来说是相当糟糕的，但我们谈论的是每天 100 次点击之类的东西。

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:27:40.440

与实施基于文件的解决方案相比，您真的认为设置数据库需要更多时间吗？实际上，我会感到惊讶，而且我更愿意采用 DB 方式。

# c++ - 将gsl与c ++一起使用时如何避免静态成员函数

> ID：13074756
> 
> 赞同：11
> 
> 时间：2012-10-25T18:20:14.417
> 
> 标签：c++, c++11, callback, gsl, std-function

我想在 c++ 类中使用 GSL，而不将成员函数声明为`static`. 这样做的原因是因为我不太了解它们，而且我不确定线程​​安全性。根据我的阅读，`std::function`可能是一个解决方案，但我不确定如何使用它。

我的问题归结为如何`static`在声明中删除`g`？

```
#include<iostream>
#include <functional>
#include <stdlib.h>
#include <gsl/gsl_math.h>
#include <gsl/gsl_monte.h>
#include <gsl/gsl_monte_plain.h>
#include <gsl/gsl_monte_miser.h>
#include <gsl/gsl_monte_vegas.h>

using namespace std;

class A {
public:
  static double g (double *k, size_t dim, void *params)
  {
    double A = 1.0 / (M_PI * M_PI * M_PI);
    return A / (1.0 - cos (k[0]) * cos (k[1]) * cos (k[2]));
  }
  double result() {
    double res, err;

    double xl[3] = { 0, 0, 0 };
    double xu[3] = { M_PI, M_PI, M_PI };

    const gsl_rng_type *T;
    gsl_rng *r;

    ////// the following 3 lines didn't work ///////
    //function<double(A,double*, size_t, void*)> fg;
    //fg = &A::g;
    //gsl_monte_function G = { &fg, 3, 0 };
    gsl_monte_function G = { &g, 3, 0 };

    size_t calls = 500000;

    gsl_rng_env_setup ();

    T = gsl_rng_default;
    r = gsl_rng_alloc (T);

    {
      gsl_monte_plain_state *s = gsl_monte_plain_alloc (3);
      gsl_monte_plain_integrate (&G, xl, xu, 3, calls, r, s, &res, &err);
      gsl_monte_plain_free (s);
    }

    gsl_rng_free (r);
    return res;
  }
};

main() {
  A a;
  cout <<"gsl mc result is " << a.result() <<"\n";
} 
```

**更新（1）**：

我尝试更改`gsl_monte_function G = { &g, 3, 0 };`为，`gsl_monte_function G = { bind(&A::g, this,_1,_2,_3), 3, 0 };`但没有成功

**更新（2）**：我尝试使用[将 std::function 分配给成员函数](https://stackoverflow.com/questions/12833707/assigning-stdfunction-to-a-member-function)，但它也不起作用。

**更新（3）** 最后我写了一个非成员函数：

```
double gmf (double *k, size_t dim, void *params) {
  auto *mf = static_cast<A*>(params);
  return abs(mf->g(k,dim,params));
  //return 1.0;
}; 
```

它有效，但它是一个混乱的解决方案，因为我需要编写一个辅助函数。使用 lambdas、function 和 bind，应该有一种方法可以让类中的所有内容都符合逻辑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-12T07:21:47.030

您可以使用以下代码轻松包装成员函数（这是一个众所周知的解决方案）

```
 class gsl_function_pp : public gsl_function
 {
    public:
    gsl_function_pp(std::function<double(double)> const& func) : _func(func){
      function=&gsl_function_pp::invoke;
      params=this;
    }    
    private:
    std::function<double(double)> _func;
    static double invoke(double x, void *params) {
     return static_cast<gsl_function_pp*>(params)->_func(x);
   }
}; 
```

然后您可以使用 std::bind 将成员函数包装在 std::function 中。例子：

```
gsl_function_pp Fp( std::bind(&Class::member_function, &(*this),  std::placeholders::_1) );
gsl_function *F = static_cast<gsl_function*>(&Fp); 
```

但是，在将成员函数包装到 gsl 集成例程中之前，您应该了解 std::function 的性能损失。请参阅[模板与 std::function](https://stackoverflow.com/questions/14677997/stdfunction-vs-template/15015502#15015502)。为避免这种性能损失（这对您可能很重要，也可能不重要），您应该使用如下所示的模板

```
template< typename F >
  class gsl_function_pp : public gsl_function {
  public:
  gsl_function_pp(const F& func) : _func(func) {
    function = &gsl_function_pp::invoke;
    params=this;
  }
  private:
  const F& _func;
  static double invoke(double x, void *params) {
    return static_cast<gsl_function_pp*>(params)->_func(x);
  }
}; 
```

在这种情况下，要调用成员函数，您需要以下内容

```
 Class* ptr2 = this;
 auto ptr = [=](double x)->double{return ptr2->foo(x);};
 gsl_function_pp<decltype(ptr)> Fp(ptr);     
 gsl_function *F = static_cast<gsl_function*>(&Fp); 
```

PS：链接[模板与 std::function](https://stackoverflow.com/questions/14677997/stdfunction-vs-template/15015502#15015502)说明编译器通常比 std::function 更容易优化模板（如果您的代码进行大量数值计算，这对性能至关重要）。因此，即使第二个示例中的变通方法看起来更麻烦，我更喜欢模板而不是 std::function。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T21:14:04.077

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T04:40:34.380

在这种情况下，您为什么担心静态功能？在静态函数中声明的变量和/或对象不会在不同线程之间共享，除非它们本身是静态的（在您的情况下它们不是）。

你的代码没有做某事吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T17:30:45.413

抱歉，但是您尝试做的事情没有任何意义。无论您担心什么线程安全问题，都无法通过添加或删除`static`关键字来解决。

`g`您制作非静态的唯一原因是，如果 的操作`A`以某种方式需要一个实例`g`。而 g 的当前实现不需要这样的实例。

请注意，您也可以创建`g`一个全局函数，而不需要`static`关键字。您的情况不会有明显的差异。但是，在您的情况下，最好在`g`使用它的类中作为静态函数。

此外，[这里](http://www.parashift.com/c++-faq/pointers-to-members.html)是一些有关指向（静态/非静态）成员函数的指针的相关材料。

# excel - VBA：如果找不到则跳过寻找对象

> ID：13074759
> 
> 赞同：3
> 
> 时间：2012-10-25T18:20:20.467
> 
> 标签：excel, vba

我在 Excel 中的工作表上工作，用户可以在其中将信息输入特定单元格，保存，然后发送。在此工作表中，他们还可以选择粘贴图像（名为“图片”的 .bmp 文件）。我有一个清除单元格内容的宏。当图像存在时它可以正常工作，但当图像不存在时会失败，这并不总是存在。到目前为止，我的编码经验为零，并且将所有东西都拼凑在一起。如果它不在工作表上但继续清除剩余单元格的内容，如何让我的宏跳过查找命名图像？

这是我的代码：

```
Sub ResetandDelete()
' 
'ResetAndDelete Macro
'Clears cell contents and resets form.

    Range("A44:E60").Select
    Selection.ClearContents
    Activesheet.Shapes.Range(Array("Picture")).Select
    Selection.Delete
    Range("C6:C38").Select
    Selection.ClearContents

End Sub 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:22:45.007

尝试这个

```
Sub ResetandDelete()
    With ActiveSheet
        .Range("A44:E60").ClearContents

        On Error Resume Next
        .Shapes.Range(Array("Picture")).Delete
        On Error GoTo 0

        .Range("C6:C38").ClearContents
    End With
End Sub 
```

# sql - 使用我拥有的信息进行重复数据删除的最佳方法是什么？

> ID：13074762
> 
> 赞同：0
> 
> 时间：2012-10-25T18:20:32.747
> 
> 标签：sql, deduplication, pst

我需要查找并删除重复文件 (.pst) 并最终获得唯一的电子邮件。目前，我正在使用 Powershell 递归地遍历文件夹以仅查找 .pst 文件，然后将特定元数据导出到 .csv 文件中。有人建议我将 .csv 导入 SQL 以进行比较（名称、文件上的日期等）。在那之后，我被困住了。

哪种语言或程序最适合获取我需要的文件并删除其余文件？我几乎在 VB.Net（可以尝试 C#）和 powershell 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:39:07.513

我假设您确实将 .csv 导入了 SQL 数据库。假设表名是 psts。

首先，要找出有多少记录具有相同的电子邮件地址，

```
SELECT email, count(*)
FROM psts
GROUP BY email 
```

接下来，你不想看到那些只有一个值的，所以，

```
SELECT email, count(*)
FROM psts
GROUP BY email
HAVING count(*) >= 2 
```

获取**这些**记录的列表，

```
SELECT out.email, count(*), out.<other fields you want to see>
FROM psts out
  INNER JOIN psts pst_count ON out.email = pst_count.email
GROUP BY out.email
HAVING count(*) >= 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:31:13.880

你可以使用你真正想要的任何东西，只要它能够编辑文件系统并且可以执行 SQL 查询。

我不知道 VB.net 是否支持 SQL 服务器，但由于它是一种 .net 语言，我很确定它支持。

我会说使用您知道的支持这两个功能的任何语言:)

# php - 直接使用函数中的数组，无需先分配变量

> ID：13074763
> 
> 赞同：3
> 
> 时间：2012-10-25T18:20:32.950
> 
> 标签：php, arrays, function, variables, return-value

我很好奇我是否可以将 PHP 中的函数在一行中返回的特定数组索引值的值分配给一个变量。

现在我有一个返回关联数组的函数，我在两行中做我想做的事。

```
$var = myFunction($param1, $param2);
$var = $var['specificIndex']; 
```

在不添加确定返回类型的参数的情况下，有没有办法在一行中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:24:34.447

在 PHP 5.4 中，您可以这样做：`$var = myFunction(param1, param2)['specificIndex'];`.

另一种选择是知道数组的顺序，然后使用[`list()`](http://php.net/list). 请注意，`list`仅适用于数值数组。

例如：

```
function myFunction($a, $b){
    // CODE
    return array(12, 16);
}

list(,$b) = myFunction(1,2); // $b is now 16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:22:43.137

您可以添加一个额外的可选参数，如果设置，将返回该值。请参阅以下代码：

```
function myFunction($param1, $param2, $returnVal = "")
{
    $arr = array();

    // your code here

    if ($returnVal)
    {
        return $arr[$returnval];
    }
    else
    {
        return $arr;
    }
} 
```

# local-storage - ReferenceError: localStorage 未定义 - requireJS、r.js 优化器和 localStorage

> ID：13074764
> 
> 赞同：4
> 
> 时间：2012-10-25T18:20:36.303
> 
> 标签：local-storage, requirejs, r.js

我正在尝试使用 r.js 优化我的 requireJS JavaScript 应用程序。不幸的是，当它运行函数“localStorage”（浏览器内置的 localStorage 函数）时它会停止。

错误信息：

`ReferenceError: localStorage is not defined`

发生错误的函数：

```
function getFromLocalStorage()
{
    return localStorage.getItem('foo') ? JSON.parse(localStorage.getItem('foo')) : {};
} 
```

如何解决此类错误？是否可以在 r.js 优化器中使用 localStore？

更多信息：

构建脚本：

```
({
    appDir: "../",
    baseUrl: "js/",
    dir: "./build",
    mainConfigFile: "app.js",
    paths: {
        jQuery: "empty:"
    },
    name: "app",
    findNestesDependencies: true
}) 
```

应用结构：

```
/
---> /js (where app.js lies)
     ---> /app (here lies the file with the localStore-call)
     ---> /lib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:42:43.520

首先，您在上面的代码中有错字。

我不想只编辑您的代码，但我假设：

```
 return localStorage.getItemfootv') ? JSON.parse(localStorage.getItem('foo')) : {}; 
```

应该是：

```
return localStorage.getItem('foo') ? JSON.parse(localStorage.getItem('foo')) : {}; 
```

通过这种更改，我将您的代码复制到我的一个项目中，并且它通过优化器运行得很好。你用的是什么版本？我尝试使用最新版本 2.1.1。

如果您使用的优化器版本没有问题，我会尝试更改对`localStorage`to的引用，`window.localStorage`看看是否会有所不同。

# sql-server - TADOQuery 连接表 - 从结果中插入\删除记录

> ID：13074765
> 
> 赞同：7
> 
> 时间：2012-10-25T18:20:37.957
> 
> 标签：sql-server, delphi, ado

使用一个`TADOQuery`i 使用左外连接从两个不同的表中提取记录：

```
Select M*, D.* from Courier M Left outer join Courier_VT D on M.Courier_Identifier = D.FK_Courier_Identifier 
```

我使用 a`TDBGrid`成功地将字段更新发布到我的 MSSQL DB。

由于存在外键引用（`FK_Courier_Identifier`with `Courier_Identifier`），因此在插入记录时出现错误，

> 无法在表 Courier_VT 的“FK_Courier_Identifier”列中插入值 Null；列不允许为空

但是在 Courier 表中发布了一条记录，我知道我需要在发布之前将其分配给`Courier_Identifier`但`FK_Courier_Identifier`不知道如何以及在哪里执行

在这种情况下我们如何插入\删除记录？是否有可能使用单个来实现`TADOQuery`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:23:30.050

当连接多个表时，AFAIK TADOQuery 无法处理插入/删除/更新语句。其背后的原因是它不知道它必须更新哪个表或如何更新。

其他数据库访问组件的常用方法是为每种类型的 DML 语句提供一个属性（[ODAC 组件](http://www.devart.com/odac/)是一个示例），或者您必须添加第二个“更新 SQL”组件，该组件链接到您的查询，该组件将包含 DML 语句（[Zeos](http://sourceforge.net/projects/zeoslib/)是使用这种方法的组件的一个示例）。

这么说，您最好的选择可能是使用 BeforeDelete 和 BeforePost 事件处理程序来处理您的场景。基本上，您将使用它们来发出 DML 语句，使用一些存储过程或 sql 组件执行它，然后中止事件处理程序。检查此[SO 问题](https://stackoverflow.com/questions/11691766/how-do-you-delete-update-etc-tables-produced-by-queries-in-delphi-ado)的已接受答案以获取更多信息和代码示例。

* * *

**编辑**：如果您的代码可以按照您在评论中所说的那样处理更新和删除，那么问题仅在于`FK_Courier_Identifier`插入时的分配（应该更仔细地阅读问题......），您可以通过使用解决OnBeforePost 事件处理程序：

```
procedure TMyForm.MyADOQueryBeforePost(Sender: TObject);
begin
  MyADOQuery.FieldByName('FK_Courier_Identifier').AsString := CourierId;
end; 
```

当然，您需要修改此代码，因为在这里我假设该字段是 a`varchar`并且您在将 Courier ID 的值插入数据库之前就知道该字段。

高温高压

# ios - 同时分享到 Facebook 和 Twitter

> ID：13074766
> 
> 赞同：-1
> 
> 时间：2012-10-25T18:20:41.017
> 
> 标签：ios, facebook, twitter, sharing

有没有办法同时分享到 Facebook 和 Twitter？显示 facebook 弹出窗口似乎是一种糟糕的形式，让用户编写他们的文本，然后在他们提交后打开 Twitter 弹出窗口。

编辑：我问这是否可以使用 iOS 6 共享框架，如果可以，如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:15:52.367

不可以，不能同时分享到 Facebook 和 Twitter。您必须先在 Facebook 屏幕中写入文本，然后在 Twitter 屏幕中写入，反之亦然。

也许可以在 Facebook 屏幕上写一些东西，将其存储在一个变量中，然后与 SLComposeViewControllers 的 setInitialText 方法一起使用。

# excel - 考勤计算/期间日历

> ID：13074768
> 
> 赞同：1
> 
> 时间：2012-10-25T18:21:03.087
> 
> 标签：excel, pivot-table, slice

这是一个多层次的项目。让我快速概述一下。我有考勤数据、卡片/时间戳打卡。我想在 Excel 中有一个带有切片器的数据透视表。理想情况下，您可以选择部门/姓氏/员工编号。而且还有一段时间。理想情况下，这将是一张包含公司期间/周的表格。并且可能默认为最后几周。

我可以通过两种方式获取考勤卡数据：

(1) 生成一个自动执行考勤卡数学的 CSV，以计算出某人工作了多少小时，并且它足够聪明，可以理解第三班工人。该 CSV 的格式为：

> 姓氏、名字、人员类型、员工编号、设施、部门、时间、超时、总小时数

这种方法的问题是我必须手动将信息附加到 CSV 表中。或者想出一些 autoIT 脚本。

(2) 通过 sql/odbc 获取原始数据。这样数学就没有完成。这只是所有员工的时间戳。我必须自己算出每天的工作时间，也必须算出第三班的公式。这不是一个固定的时间表，很多人轮班，其他人经常被召唤。

最后，我希望能够使用我们公司的财务日历过滤日期。我有一个从 2000 年到 2093 年的电子表格。列出了每天，并且是相应的年/期/周。

期间信息电子表格示例：

```
date    Year    Period  week    WeekTotal   Period Total
12/3/2007   2008    1   1   2008.1.1    2008.1
12/4/2007   2008    1   1   2008.1.1    2008.1 
```

我知道这里发生了很多事情，但是处理这个项目的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-11T15:49:14.947

首先，我无法发布任何脚本，但是最后一次尝试使用了两个选项 1\. 时间是数字的 php 转换（这使得计算更容易） 2\. 在我故意输入的表格中values 将时间放在不同的列或字段中，分别表示小时、分钟和秒，这意味着虽然输入很容易，但我仍然必须在 php 中计算输出，尤其是总计、平均值和差异。希望它有点帮助

# java - 根据另一个数组确定数组值

> ID：13074769
> 
> 赞同：3
> 
> 时间：2012-10-25T18:21:02.997
> 
> 标签：java

我目前正在处理我的一项任务，并且正在为我的一项功能的逻辑寻求一些帮助。

首先，我有一个要分类的数字数组，然后是一个数字间隔，这个数字决定了每个被绘制的数字在哪个位置进入 array2。

IE。

```
int interval = 2;

for(int i = 0; i < array1.length; i++) {
    if((array1[i] > 0) && (array1[i] < interval)) {
        array2[0]++;
    }
} 
```

但是，array1 中的数字是 3。然后我需要另一个 if 语句，如下所示：

```
...
}else if((array1[i] > 2) && (array1[i] < interval * 2)) {
    array2[1]++;
}else if((array1[i] > 
```

正如您开始看到的那样，问题在于我需要继续处理无限范围的数字。所以我的问题是实现这一目标的更简单方法是什么？还是已经有一个我可以利用的图书馆？

如果我没有说得足够清楚，我很抱歉，如果没有给我代码，我也更愿意。如果有人能告诉我一个更有效的方法来解决这个问题，我将不胜感激，在此先感谢！

编辑：

假设间隔设置为 2，并且 array1 中的数字介于 0 和 10 之间，我需要创建一个代码来执行此操作：

```
2 < numFromArray1 > 0 == array2[0]++
4 < numFromArray1 > 2 == array2[1]++
6 < numFromArray1 > 4 == array2[2]++
8 < numFromArray1 > 6 == array2[3]++
10 < numFromArray1 > 8 == array2[4]++ 
```

但是，array1 中的数字可以是正数或负数、整数或小数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T18:29:47.823

使用嵌套循环。显然，区间的可能性并不是无限的，因为 array2 具有固定的大小。因此，如果您遍历 array2 中的所有单元格，然后进行一些数学运算以找出您的条件需要是什么...我不会给出完整的代码（您要求我不要，但它看起来像：

```
for ( ... ) {
    for ( ... ) { 
        if (array1[i] > /* do some math here */ && ... ) {
            array2[/* figure out what this should be too */]++;
        }
    }
 } 
```

希望你能从中弄清楚。

顺便说一句，如果您不需要为 array2 使用数组，请考虑了解`LinkedList<?>`可以根据需要增加大小的数据结构。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedList.html)

[http://www.dreamincode.net/forums/topic/143089-linked-list-tutorial/](http://www.dreamincode.net/forums/topic/143089-linked-list-tutorial/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:31:38.600

假设我正确理解了问题，并且间隔为 3，那么出现 0、1 和 2 会增加 array2[0]，出现 3、4 和 5 会增加 array2[1] 等等，这将是解决方案：

**编辑**对不起，你不想看到代码。如果你愿意，我可以转发。想一个真正简单的方法来确定一个数字将属于哪个类别。我会尝试给出提示。

间隔 = 3；
0,1,2 -> 类别 0
3,4,5 -> 类别 1
6,7,8 -> 类别 2

一旦你知道了类别，就很容易在 array2 中增加所需的数字。

它看起来像这样：

```
for(int i = 0; i < array1.length; i++) {
    int category = // determine category here
    // increase correct position of array2
} 
```

经过一番讨论，这是我的代码：

```
for(int i = 0; i < array1.length; i++) {
    int category = array1[i] / interval;
    array2[category]++;
} 
```

我的解决方案不适用于负数。也没有指定如何处理它们

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T18:34:17.147

**以下是您可以考虑所有情况的方法：-**

*   首先找出数组中的**最大值**`array1`是多少： - 。

*   你的范围应该是`0 to maxValueInArray1`

*   然后在你的外部 for 循环中，你可以有另一个，它将`0`从`(maximum value) / 2`. 因为，你不想`maximum value * 2`在你的`interval`

*   然后对于每个值，您可以检查范围，如果在该范围内，请使用`array2[j]`

对于 EG：-

```
for (...) // Outer loop {
    for (int j = 0; j <= maximumValueinArray1 / 2; j++) {
        // Make a range for each `j`
        // use the `array2[j]` to put value in appropriate range.
    }
} 
```

在您的内部循环中，您可以根据以下推理检查这种情况：-

对于`interval = 2`，说`maximumValueinArray1`是`max`，你的范围看起来像： -

```
 0 * interval ----- (1 * interval)  --> in `array2[0]` (0 to 2)
  1 * interval ----- (2 * interval)  --> in `array2[1]` (2 to 4)
  2 * interval ----- (3 * interval)  --> in `array2[2]` (4 to 6)

and so on.

 ((max / 2) - 1) * interval ----- (max / 2) * interval  (`max - 2` to max) 
```

**因此，尝试将这些条件**与我发布的内部循环联系起来，您的问题将得到解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T18:27:59.483

我不确定您到底要做什么，但是从您的代码片段中，我可以想出这个内部`for`循环：

```
//OUTDATED CODE - please see code block in EDIT below
//for(int i = 0; i < array1.length; i++) {
//    for (int j = 0; j < 100000; j++) { //or Integer.MAXVALUE or whatever
//        if ((array1[i] > (j*2)) && (array1[i] < interval * ((j*2)==0?2:(j*2)) )) {
//            array2[j]++;
//        }
//    }
//} 
```

**编辑：**由于您最近的编辑，这更合适，您不必运行内部循环！：

1.  遍历array1
2.  对于array1中的每个元素，通过取元素/区间的地板找到array2索引
3.  在找到的索引处将 1 添加到 array2 元素。

不要看下面的代码=）

```
for(int i = 0; i < array1.length; i++) {
    int index = Math.floor(array1[i] / interval);
    array2[index]++;

    //the rest are actually not necessary as you just need to get the index
    //and the element will be within range, left inclusive (lower <= value < upper)

    //int lower_range = Math.floor(array1[i] / interval) * interval;
    //    //or int lower_range = index * interval;
    //int upper_range = Math.ceil(array1[i] / interval) * interval;

    //if ((array1[i] > lower_range) && (array1[i] < upper_range)) {
    //    array2[index]++;
    //}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T18:31:59.420

关系和模式很难弄清楚。我试图解释你想要什么：

怎么样：

```
if ( array1[i] < interval * (interval - 2) ) {
    array2[interval-2]++;
} 
```

# wpf - WPF 窗口中的绑定仅在从窗口中删除内容时偶尔起作用

> ID：13074772
> 
> 赞同：2
> 
> 时间：2012-10-25T18:21:26.753
> 
> 标签：wpf, xaml, binding, user-controls, ivalueconverter

我有一个奇怪的情况，我在 WPF 窗口中与转换器绑定。有时，此窗口的内容会从所述窗口中删除并插入到选项卡式窗口中，如下所示：

```
 public void AddNewTab(Window wpfWindow, String tabTitle, OnFocusHandler onFocusHandler)
    {
        //Unhook window contents
        object content= wpfWindow.Content;
        wpfWindow.Content = null;

        //Create a new tab
        TabItem newTab = new TabItem();
        newTab.Header = title;

        newTab.Style = (Style)Resources["CorsairTab"];

        //newTab.Foreground = Brushes.White;
        newTab.Background = Brushes.Transparent;
        newTab.Content = content;

        //Add it
        TabControl.Items.Add(newTab);

        //Tie handler if it exists
        if (onFocusHandler != null)
            _listOnTabSelectedEventHandlers.Add(onFocusHandler);
        else
            _listOnTabSelectedEventHandlers.Add(null);

        //If this is the first tab, make it the opened one
        if(TabControl.Items.Count == 1)
            TabControl.SelectedIndex = 0;
    } 
```

所以这一切都很好，但是当有问题的内容剥离窗口与转换器绑定时，就会出现问题。我编写了一个从 MarkupExtension 继承的转换器以避免静态引用。我的转换器看起来像这样

```
[ValueConversion(typeof(bool), typeof(Visibility))]
public class BoolToVisibilityConverter : MarkupExtension, IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool isWorking = (bool)value;
        if (isWorking)
        {
            return Visibility.Visible;
        }
        else
        {
            return Visibility.Collapsed;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }

} 
```

引用它的 XAML 如下所示：

```
<StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Grid.Column="1" Grid.Row="1" Visibility="{Binding Path=IsEye, Converter={inf:BoolToVisibilityConverter}}">
    <TextBlock Text="Working Eye" VerticalAlignment="Top" Foreground="White" Margin="5,5,0,0"/>
    <Button Content="Approve All" Command="{Binding ApproveAllTrades}" 
                        Margin="5,0,0,0" Width="auto" Height="auto" VerticalAlignment="Top" Background="#DCDCDC"/>
 </StackPanel>
 <views:OrdersWorkingEyeView Loaded="EyeOrders_Loaded" Grid.Column="1" Grid.Row="2" Visibility="{Binding Path=IsEye, Converter={inf:BoolToVisibilityConverter}}"/> 
```

暂时忽略 BoolToVisibility 已经是一个定义的东西，当我剥离其内容的窗口并加载这两个特定控件（一个由我定义，另一个是堆栈面板）时，在 ProvideValue 处设置的断点命中两次（一次用于每个控件），但对于我的自定义控件，Convert 只调用一次。结果是自定义控件具有适当的可见性，但堆栈面板没有。我很确定绑定本身正在工作，因为两个控件上的绑定路径是相同的，并且适用于自定义控件。我不知道有什么区别导致转换发生在一个而不是另一个（或者，也许，为什么它没有正确绑定到 StackPanel）。帮助？

*编辑*

对于它的价值，当我不将内容从窗口中剥离并将其放入新的 TabItem 时，一切正常。能见度更新并显示正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:24:18.463

我尝试了您的示例，并进行了以下更改以使其正常工作

```
 private bool _isEye= true;

        public bool IsEye
        {
            get { return _isEye; }
            set { _isEye = value;
            NotifyFropertyChanged("IsEye");
            }
        } 
```

定义资源

```
<Window.Resources>
    <!-- local is your namespace--> 
    <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
</Window.Resources> 
```

更新绑定

```
Visibility="{Binding Path=IsEye,Converter={StaticResource BoolToVisibilityConverter}}" 
```

它适用于用户控件和堆栈面板。希望这可能会有所帮助。

# iphone - 获取滚动视图中的当前图像

> ID：13074774
> 
> 赞同：0
> 
> 时间：2012-10-25T18:21:30.157
> 
> 标签：iphone, indexing, ios6, scrollview

我想做的是将当前图像从滚动视图保存到相册。尝试了很多不同的方法，它总是将最后一张图片从滚动视图保存到相册。没有得到我在代码中缺少的东西。

```
 - (void)viewDidLoad

   {
    UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    imageScrollView.delegate = self;
    imageScrollView.pagingEnabled = YES;
    for (int i = 0; i < 61; i++) {

        CGFloat xOrigin = i * 320;

 pictures = [[NSArray alloc] initWithObjects:@"image0.png", @"image1.png", @"image2.png", @"image3.png", @"image4.png", @"image5.png", @"image6.png", @"image7.png", @"image8.png", @"image9.png", @"image10.png", @"image11.png", @"image12.png", @"image13.png", @"image14.png", @"image15.png", @"image16.png", @"image17.png", @"image18.png", @"image19.png", @"image20.png", @"image21.png", @"image22.png", @"image23.png", @"image24.png", @"image25.png", @"image26.png", @"image27.png", @"image28.png", @"image29.png", @"image30.png", @"image31.png", @"image32.png", @"image33.png", @"image34.png", @"image35.png", @"image36.png", @"image37.png", @"image38.png", @"image39.png", @"image40.png", @"image41.png", @"image42.png", @"image43.png", @"image44.png", @"image45.png", @"image46.png", @"image47.png", @"image48.png", @"image49.png", @"image50.png", @"image51.png", @"image52.png", @"image53.png", @"image54.png", @"image55.png", @"image56.png", @"image57.png", @"image58.png", @"image59.png", @"image60.png", nil];

        _image = [UIImage imageNamed:[pictures objectAtIndex:i]];

        _imageView = [[[UIImageView alloc] initWithImage:_image]autorelease];

        _imageView.tag = i+1;

        _imageView.image = _image;

        _imageView.frame = CGRectMake(xOrigin, 0, 320, 480);

        UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc]
                                                           initWithTarget:self
                                                           action:@selector(handleLongPress:)];

        imageScrollView.userInteractionEnabled = YES;

        [imageScrollView addGestureRecognizer:gestureRecognizer];
        gestureRecognizer.delegate = self;
        [gestureRecognizer release];

        [imageScrollView addSubview:_imageView];

        [imageScrollView addSubview:myButton];

    }

    imageScrollView.contentSize = CGSizeMake(320 * 61 , 480);

    [self.view addSubview:imageScrollView];

}

 - (void)handleLongPress:(UILongPressGestureRecognizer*)gestureRecognizer{

if (gestureRecognizer.state == UIGestureRecognizerStateBegan){

    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Save Photo", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
   [actionSheet showInView:self.view];
    [actionSheet release];

   }}

  -(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

switch (buttonIndex) {
    case 0:

        [self performSelector:@selector(LongPress:) withObject:nil];

    break;

    default:
        break;

}}

- (void)LongPress:(UILongPressGestureRecognizer*)gestureRecognizer{

NSInteger currentIndex = roundf(_imageScrollView.contentOffset.x / 320) + 1;

//UIImageView *currentImage = [_imageScrollView viewWithTag:currentIndex];

UIImage* currentImage = [(UIImageView*)[_imageScrollView viewWithTag:currentIndex] image];

  UIImageWriteToSavedPhotosAlbum(_imageView.image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);

    } 
```

编辑：

我试过这个howcome这也不起作用

```
- (void)LongPress:(UILongPressGestureRecognizer*)gestureRecognizer{

if([pictures objectAtIndex:0]) {

    UIImageWriteToSavedPhotosAlbum(_imageView.image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);    
} else if([pictures objectAtIndex:1]) {

        UIImageWriteToSavedPhotosAlbum(_imageView.image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);   
} 
```

感谢帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:43:21.880

您有 2-3 个选项可以这样做。会告诉你这个选项对我来说非常有效。

只需继承 UIScrollView 类，本地化您的 UIImageView 对象（意味着在 for 循环本身中声明它。），将标签分配给每个图像视图。使 UIImageView 启用 userInteraction 否则它不会检测到触摸，然后在 UIScrollView 子类和当前类中编写 touchesBegan 方法。然后在处理 GestureRecognizer 时编写任何你想要的代码。然后从 UIScrollView 的 touchesBegan 方法调用当前类的 touchesBegan。

尝试自己，学习自己。

# php - 如何使用桌面版页面网址，用于移动网站社交按钮

> ID：13074777
> 
> 赞同：2
> 
> 时间：2012-10-25T18:21:37.877
> 
> 标签：php, url, mobile

我想在我网站的移动版本上使用社交按钮。但我面临的问题是让他们使用桌面版页面的 url。

假设我有一个页面“m.domain.com/some-page”，桌面版 url 为“domain.com/some-page”。当我加载社交按钮时，它们不会显示同一页面的桌面 url 存在的计数。

目前，共享数量正在跨移动和桌面版本传播。

我使用 php 文件来延迟加载按钮。这是文件头的片段，后面是按钮脚本：

```
<?php
$permalink = "http://domain.com" . $_SERVER['REQUEST_URI'];
$title = $_GET['title'] ? $_GET['title'] : $_POST['title'];
?> 
```

但这并没有给我预期的结果。调用这个文件的代码是：

```
<script type="text/javascript">
function get_share_buttons(permalink,title){
    var url = 'http://m.domain.com/folder/shareButtons.php';
    $('#share-buttons').load(url,{permalink:permalink,title:title});
}
$(window).bind("load", function() {
    get_share_buttons('<?php the_permalink() ?>','<?php the_title(); ?>');
});
</script> 
```

请建议我解决我的问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-12T11:19:05.577

如果您`m.example.com`为社交链接提交移动 URL ( )，您将使桌面用户点击移动 URL。而且，就像你说的，链接统计数据将区分移动和桌面域。

更好地为所有外部链接使用通用域。通常，这将是“桌面”版本，例如`www.example.com`.

在移动版的 html 头中，添加一个`rel="canonical"`指向桌面版的标记。对所有社交按钮链接使用桌面版 URL。

```
<link rel="canonical" href="http://www.example.com/"/> 
```

对于访问通用/桌面 URL 的访问者（和搜索引擎），请`rel="alternate"`在桌面版本上添加一个指向移动版本的标签。您可以在此处使用 CSS 媒体查询添加设备检测：

```
<link rel="alternate" href="http://m.example.com" media="only screen and (max-width: 1080px)"/> 
```

如果检测到移动设备，您还可以添加进一步的设备检测，以重定向或提供移动版本的链接。

# ruby - Ruby：Net::HTTP 空闲超时？

> ID：13074779
> 
> 赞同：6
> 
> 时间：2012-10-25T18:21:39.597
> 
> 标签：ruby, http, persistent

我正在使用 Ruby 标准库来创建持久连接：

```
Net::HTTP.new(host, port) 
```

闲置一段时间后，ruby 会自行关闭连接吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T19:42:00.307

是的。MRI Ruby 的默认值为 60 秒。

```
http = Net::HTTP.new(host, port)
http.read_timeout # -> 60 
```

如果您希望连接不超时，您可以设置`read_timeout`为`nil`

```
http.read_timeout = nil 
```

# sql - 在计算中访问系统表

> ID：13074781
> 
> 赞同：0
> 
> 时间：2012-10-25T18:21:56.070
> 
> 标签：sql, sql-server, ssas, mdx

有没有办法在 SSAS 多维数据集计算中访问系统表？

例如，可以在 SSAS 多维数据集上执行以下查询以返回最后处理的日期：

```
SELECT LAST_DATA_UPDATE FROM $System.MDSCHEMA_CUBES WHERE CUBE_NAME = 'Cube' 
```

在计算中如何访问这些信息？

**背景：**我们之前使用 ASSP（第三方存储过程）来获取最后一个多维数据集处理日期。最近，这个存储过程在我们的一个多维数据集上抛出了一个异常，导致 SSAS 宕机。使用上面的 MDX 行没有这种行为。我宁愿我们的多维数据集不依赖于第三方代码，所以我正在寻找一种方法来访问特定多维数据集名称的计算中的 LAST_DATA_UPDATE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:29:42.170

我通常在我的多维数据集中包含一个分离的维度，例如“.Cube Information”，其中包括这样的属性。其他有用的属性可能会暴露数据的流通性，例如最后一个底层 ETL 过程何时完成，或者您的多维数据集的发布/构建。

我从一个 SQL 视图中提供这个“多维数据集信息”维度，该视图返回一个包含所需数据的单行 - 您可以使用您的 SELECT 语句。它还需要返回一个具有固定值的 Key 列，例如 1。

“分离”是指“多维数据集信息”维度在多维数据集维度关系选项卡中没有条目。

在多维数据集计算脚本中，我将该维度的 DEFAULT_MEMBER 属性分配给 SSAS 视图中的固定键值。

然后，任何客户端工具都可以访问这些 Dimension 属性。

# asp.net-mvc - 使用 group by 传递 linq 查询以查看 [errors out]

> ID：13074786
> 
> 赞同：3
> 
> 时间：2012-10-25T18:22:05.100
> 
> 标签：asp.net-mvc, linq

我在控制器中得到了这个

```
var tobi = (from a in db.Assessments
join u in db.Users on a.rated equals u.user_id
join tm in db.Team_Members on u.user_id equals tm.user_id
join t in db.Teams on tm.team_id equals t.team_id
where (tm.end_date == null || tm.end_date > DateTime.Today)
group new TobiViewModel
{
    teamname = t.name,
    assessed_due = a.assessed_due,
    assessment_id = a.assessment_id,
    rater = a.rater,
    rated = a.rated
}
by new { t.name, a.rated }).ToList();

return View(tobi); 
```

但是它在视图中不接受它？

> 传入字典的模型项的类型为“System.Collections.Generic.List `1[System.Linq.IGrouping`2[<>f__AnonymousType10 `2[System.String,System.String],Kyubu.ViewModels.TobiViewModel]]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[Kyubu.ViewModels.TobiViewModel]”。

我应该如何在视图中传递这个。任何帮助将不胜感激视图中的类型是

```
@model IEnumerable<Kyubu.ViewModels.TobiViewModel> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T18:39:48.950

在视图中尝试以下操作：

```
@model IEnumerable<System.Linq.IGrouping<object, Kyubu.ViewModels.TobiViewModel>> 
```

# xml - 空元素可以包含子元素吗

> ID：13074789
> 
> 赞同：3
> 
> 时间：2012-10-25T18:22:22.637
> 
> 标签：xml, dtd

我有一个具有以下元素定义的 DTD

```
<!ELEMENT a EMPTY>
<!ELEMENT b EMPTY> 
```

以下 XML 基于此 DTD 是否有效：

```
<a><b></b></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:25:45.647

不，那将是无效的。空元素不能包含任何子元素。这包括以下类型的节点：文本、元素、注释和处理指令。如果定义了元素，则元素可以具有属性。

如果您更改`EMPTY`为`ANY`或`b`在声明中将有效`a`：

```
<!DOCTYPE a [
<!ELEMENT a ANY>
<!ELEMENT b EMPTY>
]>
<a><b></b></a> 
```

# .net-4.0 - 上传文件 MVC 4 Web API .NET 4

> ID：13074791
> 
> 赞同：8
> 
> 时间：2012-10-25T18:22:25.383
> 
> 标签：.net-4.0, asp.net-mvc-4, asp.net-web-api

我正在使用 Visual Studio 2012 express 附带的 MVC 版本。(Microsoft.AspNet.Mvc.4.0.20710.0)

我假设这是 RTM 版本。

我在网上找到了很多使用此代码的示例：

```
 public Task<HttpResponseMessage> PostFormData()
    {
        // Check if the request contains multipart/form-data.
        if (!Request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        string root = HttpContext.Current.Server.MapPath("~/App_Data");
        var provider = new MultipartFormDataStreamProvider(root);

        // Read the form data and return an async task.
        var task = Request.Content.ReadAsMultipartAsync(provider).
            ContinueWith<HttpResponseMessage>(t =>
            {
                if (t.IsFaulted || t.IsCanceled)
                {
                    return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, t.Exception);
                }

                // This illustrates how to get the file names.
                foreach (MultipartFileData file in provider.FileData)
                {
                    Trace.WriteLine(file.Headers.ContentDisposition.FileName);
                    Trace.WriteLine("Server file path: " + file.LocalFileName);
                }
                return Request.CreateResponse(HttpStatusCode.OK);
            });

        return task;
    } 
```

但是这段代码总是以 continueWith where 结束`t.IsFaulted == true`。异常内容如下：

> MIME 多部分流的意外结束。MIME 多部分消息不完整。

这是我的客户表格。没什么花哨的，我想为 ajax 上传做 jquery 表单插件，但我什至无法用这种方式工作。

```
<form name="uploadForm" method="post" enctype="multipart/form-data" action="api/upload" >
    <input type="file" />
    <input type="submit" value="Upload" />
</form> 
```

我读到这是由于解析器在每条消息的末尾都期望 /CR /LF 引起的，并且该错误已在 6 月修复。

我想不通的是，如果它真的被修复了，为什么它不包含这个版本的 MVC 4？为什么互联网上有这么多例子吹捧这段代码在这个版本的 MVC 4 中不起作用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-31T12:07:06.113

您的文件缺少一个`name`属性`input`。

```
<form name="uploadForm" method="post" enctype="multipart/form-data" action="api/upload" >
    <input name="myFile" type="file" />
    <input type="submit" value="Upload" />
</form> 
```

没有它的输入将不会被浏览器提交。所以你的表单数据是空的，导致`IsFaulted`被断言。

# ruby - will_paginate 不使用当前路线

> ID：13074792
> 
> 赞同：1
> 
> 时间：2012-10-25T18:22:33.387
> 
> 标签：ruby, ruby-on-rails-3, will-paginate

我们使用 will_paginate 来显示模型的关联。我们设置了一些自定义路由，如下所示：

```
get '/profile/:slug' => 'talents#show', :as => :talent
get '/profile/:slug/bio' => 'talents#show', :as => :talent_bio
get '/profile/:slug/instagram' => 'talents#show', :as => :talent_instagram 
```

当我们使用 Talent_instagram 路由时，所有分页链接都被渲染到默认路由。也就是说，而不是：

```
http:://0.0.0.0:3000/profile/some-talent/instagram?page=5 
```

这是我们得到的：

```
http:://0.0.0.0:3000/profile/some-talent?page=5 
```

如果我注释掉前两条路线，则使用正确的链接。为什么 will_paginate 默认为第一条路线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:05:34.317

将路线的顺序更改为

```
get '/profile/:slug/instagram' => 'talents#show', :as => :talent_instagram
get '/profile/:slug/bio' => 'talents#show', :as => :talent_bio
get '/profile/:slug' => 'talents#show', :as => :talent 
```

因为路由是按照指定的顺序匹配的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:30:30.133

不确定这是否是正确的答案，但这可能会帮助您[Rails will_paginate 自定义路线](https://stackoverflow.com/questions/2441643/rails-will-paginate-custom-route)

# c# - 从 C# 代码隐藏中绑定 DataGridTextColumn 颜色

> ID：13074801
> 
> 赞同：0
> 
> 时间：2012-10-25T18:23:09.640
> 
> 标签：c#, wpf, binding, datagrid

类似于[WPF - 帮助将 XAML 绑定表达式转换为代码隐藏](https://stackoverflow.com/questions/1164346)

我正在尝试使用绑定来更改 DataGridTextColumn 中某些元素的颜色。因为我需要在单独的选项卡中任意数量的 DataGrid，所以我在代码隐藏中迭代地创建它们。这是我创建列的代码：

```
// create a value column
column = new DataGridTextColumn();
column.Binding = new Binding("Value");
BindingOperations.SetBinding(column, DataGridTextColumn.ForegroundProperty, new Binding("TextColor"));
listGrid.Columns.Add(column); 
```

Value 绑定工作正常，但 TextColor 属性的 getter 永远不会被调用。

网格的 ItemsSource 属性设置为 VariableWatcher 对象的列表，以下是它的一些属性：

```
public bool Value
{
    get { return _variable.Value; }
}
// used to set DataGridTextColumn.Foreground
public Brush TextColor
{
    get
    {
        Color brushColor;
         if (_valueChanged)
            brushColor = Color.FromRgb(255, 0, 0);
        else
            brushColor = Color.FromRgb(0, 0, 0);
         return new SolidColorBrush(brushColor);
    }
} 
```

VariableWatcher 实现 INotifyPropertyChanged 如下：

```
public event PropertyChangedEventHandler PropertyChanged;
public void NotifyPropertyChanged(string info)
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(info));
    }
} 
```

在 VariableWatcher 的一种方法中，我有以下几行：

```
_valueChanged = true;
NotifyPropertyChanged("Value");
NotifyPropertyChanged("TextColor"); 
```

跨过“Value”行会激活 Value getter 中的断点，并在显示中更新 Value 文本。但是，跨过“TextColor”行不会激活 TextColor getter 中的断点，并且文本颜色不会改变。知道这里发生了什么吗？

编辑：这是答案，感谢大马士革。（我会将此放在对他的回答的评论中，但它不会正确格式化我的代码。）我将此添加到 XAML 文件中：

```
<Window.Resources>
    <Style x:Key="BoundColorStyle" TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="{Binding TextColor}" />
    </Style>
</Window.Resources> 
```

在 C# 代码中，我将 BindingOperations 行替换为

```
column.ElementStyle = this.FindResource("BoundColorStyle") as Style; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:30:50.780

解决方法：

在您的资源中创建一个样式，如下所示：

```
<Style x:Key="MyStyle" TargetType="{x:Type TextBlock}">
  <Setter Property="Foreground" Value="{Binding TextColor}" />
</Style> 
```

`ElementStyle`并在您的属性中设置此样式`DataGridColumn`，应该类似于您的代码中的内容：

```
column = new DataGridTextColumn();
column.Style = this.FindResource("MyStyle") as Style; 
```

其原因是`ElementStyle`直接在列的内容中起作用（即`TextBlock`显示值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-30T19:16:22.747

它也可以通过没有样式的代码来实现。 **重要的一点是为为目标属性设置的新绑定表达式显式设置绑定源（查看下面的代码）**。

在本例中，DataGrid 生成动态列，并以CollectionViewSource 对象（即cycleDataview）为界，cycleDataview 的源是ObservableCollection 的对象，即cycleRecord。

```
// Create view source

this.cycleDataview = new CollectionViewSource();
this.cycleDataview.Source = this.cycleRecords;

 // Set Item Source to data grid
 this.DataGridCycleData.ItemsSource = this.cycleDataview.View;

// Generate Columns for datagrid
 var columns = this.cycleRecords.First().CyclePartCols.Select((x, i) => new {PreDescriptor =  x.PreDescriptor, Index = i }).ToArray();

foreach (var column in columns)
{

  Binding binding = new Binding(string.Format("CyclePartCols[{0}].PartValue", column.Index));

  Binding bindingColor = new Binding(string.Format("CyclePartCols[{0}].TextColor", column.Index));
  **bindingColor.Source = this.cycleRecords;** // Binding source is required to set

  DataGridTextColumn dgc = new DataGridTextColumn();

  txtblckCol.Text = column.PreDescriptor;
  dgc.Header = txtblckCol;
  dgc.Binding = binding;
  this.DataGridCycleData.Columns.Add(dgc);
  BindingOperations.SetBinding(dgc, DataGridTextColumn.ForegroundProperty, bindingColor); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-13T13:27:11.303

使用[大马士革](https://stackoverflow.com/users/664237/damascus)的解决方法，但只能使用后面的代码：

```
var myStyle = new Style
{
   TargetType = typeof(TextBlock)
};
textColumnStyleExt.Setters.Add(new Setter(TextBlock.ForegroundProperty, new Binding("TextColor"));
column = new DataGridTextColumn();
column.Binding = new Binding("Value");
column.ElementStyle = myStyle; 
```

# php - 查找文件的一个单词，然后在 PHP 中删除文件的其余文本

> ID：13074807
> 
> 赞同：0
> 
> 时间：2012-10-25T18:23:30.437
> 
> 标签：php

让我们从一个例子开始。在文件 file.php 中说存在以下文本。

```
This is just to show example. This is just to show example. This is just to show example. This is just to show example. end.  Okay This is just to show example. This is just to show example. 
```

现在在上面的文本中，如果我发现没问题，那么我将删除包括“好”一词在内的其余内容并将文件保存在服务器中。

有人请告诉我一个有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:30:20.450

```
$pos=strpos ($inputstring, 'okay');//test to see if there is a match (it will find the first match)
if($pos!==false){//if there was a match
   $cutstring=substr($inputstring, 0, $pos);//extract a substring from the begining to the match
   //echo $cutstring
} 
```

在此处阅读有关这些功能的更多信息：

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:32:50.980

有很多不同的方法可以做到这一点*strpos*，*regex*。这是一个例子

```
$str = 'This is just to show example. This is just to show example. This is just to show example. This is just to show example. end.  Okay This is just to show example. This is just to show example.';

preg_match('%Okay%', $str, $match);

if($match){
  // save file to server 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:37:56.660

```
$str = "This is just to show example. This is just to show example. This is just to show  example. This is just to show example. end.  Okay This is just to show example. This is just to show example.";
$fnd = "Okay";
if (false !== $p = stripos($str, $fnd)) $str = substr($str, 0, $p);
echo $str; // Now save it or whatever. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:38:07.953

您还可以使用`explode`拆分内容。根据您的问题的广泛程度，这可能不是最好的解决方案，但我想我也会包括它：

```
$string = $your_file_content
$split = explode('okay', strtolower($string));
//$split[0] = everything before 'okay';
//$split[1] = everything after 'okay'; 
```

# forms - 如何在 symfony2 中将数据注入到表单中

> ID：13074810
> 
> 赞同：0
> 
> 时间：2012-10-25T18:23:37.517
> 
> 标签：forms, symfony, ckeditor

我的控制器有一个电话：

控制器：

```
 if($appointment->getAnamnese() == NULL){
        $entity = new Anamnese($appointment);
        $form = $this->createForm(new AnamneseType(),null,array('history' => 'Digite o Historico aqui'));
    }else{ 
        $entity = $appointment->getAnamnese();
        $form = $this->createForm(new AnamneseType(), null, array('history' => $entity->getHistory()));
    } 
```

记忆类型：

```
 $builder->add('history', 'ckeditor', array(
        'data' => $options['history'], 'toolbar' => $toolbar));
}

public function getDefaultOptions(array $options)
{
    return array(
            'history' => "Digite o Historico aqui"
    );
} 
```

我想将该历史信息注入我的表单，但它没有像我想象的那样工作，只是设置“数据”选项......

我该怎么做？

问题是插入数据后，我无法将其放回表单..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:46:11.590

使用[setData()](http://api.symfony.com/2.0/Symfony/Component/Form/Form.html#method_setData)函数设置数据：

例如：

```
$form = $this->createForm(new AnamneseType())->setData($entity); 
```

甚至可能：

```
$form = $this->createForm(new AnamneseType(), $entity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:48:10.623

你以错误的方式看待它。

您必须在此处使用选项。

创建表单：

```
$form = $this->createForm(new AnamneseType(), null, array('history' => $entity->getHistory())); 
```

您的表格应如下所示：

```
public function buildForm(FormBuilder $builder, array $options){

    $toolbar = array(
        array(
            'name' => 'document',
            'items' => array('Source','-','DocProps','Preview','Print','-','Templates')
        ),
        array(
            'name' => 'clipboard',
            'items' => array('Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo')
        ),
        array(
            'name' => 'editing',
            'items' => array('Find','Replace','-','SelectAll','-','SpellChecker', 'Scayt')
        ),

        array(
            'name' => 'basicstyles',
            'items' => array('Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat')
        ),
        '/',                
        array(
            'name' => 'paragraph',
            'items' => array('NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl')
        ),
        array(
            'name' => 'links',
            'items' => array('Link','Unlink','Anchor')
        ),
        array(
            'name' => 'insert',
            'items' => array('Image','Table','HorizontalRule','Smiley','SpecialChar','PageBreak')
        ),
        '/',
        array(
            'name' => 'styles',
            'items' => array('Styles','Format','Font','FontSize')
        ),
        array(
            'name' => 'colors',
            'items' => array('TextColor','BGColor')
        ),
        array(
            'name' => 'tools',
            'items' => array('Maximize', 'ShowBlocks','-','About')
        )
    );

    $builder->add('history', 'ckeditor', array( 'data' => $options['history'] , 'toolbar' => $toolbar));
}

...

public function getDefaultOptions(array $options)
{
    return array(
        'history' => "Digite o Historico aqui"
    );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T18:50:58.007

好吧，看起来表单是在第二个条件下生成的并`$entity->getHistory()`返回 null。

编辑您的控制器代码如下

```
$historyValue = 'Digite o Historico aqui'; // Default history value
if($appointment->getAnamnese()){ 
    $entity = $appointment->getAnamnese();
    // Checks whether the history is not empty (null or equals '' in this case)
    if (!empty($entity->getHistory())) { 
        $historyValue = $entity->getHistory();
    }

}

$form = $this->createForm(new AnamneseType(),null,array('history' => $historyValue)); 
```

我强烈建议您阅读官方文档。

[Symfony 表单](http://symfony.com/doc/current/book/forms.html)

* * *

表单数据应该从控制器传递。

代替

```
$form = $this->createForm(new AnamneseType($entity->getHistory())); 
```

和

```
$form = $this->createForm(new AnamneseType(), array(
    'history' => null === $entity->getHistory()
               ? 'Digite o Historico aqui'
               : $entity->getHistory,
)); 
```

从表单类中删除构造函数并替换

```
if($this->history != NULL){
    $builder->add('history', 'ckeditor', array( 'data' => $this->history , 'toolbar' =>       $toolbar));
}else{
    $builder->add('history', 'ckeditor', array( 'data' => "Digite o Historico aqui" , 'toolbar' => $toolbar));
} 
```

和

```
$builder->add('history', 'ckeditor', array('toolbar' => $toolbar)); 
```

如果您要将数据映射回实体，请查看[Forms 官方文档](http://symfony.com/doc/current/book/forms.html)

**升级版：**

要将一些值从历史字段传递给模板，请编辑其定义，如下所示：

```
$builder->add('history', 'ckeditor', array(
    'attr' => array(
        'toolbar' => $toolbar,
    ),
)); 
```

您可以通过以下方式访问该`toolbar`选项：

```
{{ form.history.get('attr').toolbar }} 
```

有更好的解决方案：[创建自定义表单类型](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html)

# ssl - 在 Typo3 中启用 SSL

> ID：13074815
> 
> 赞同：2
> 
> 时间：2012-10-25T18:24:04.820
> 
> 标签：ssl, certificate, typo3

嗨 Typo3 用户，

我想知道 Typo3 是否支持原生 SSL。SSL 证书已安装在服务器上，但不知何故我无法弄清楚如何为所有页面启用 SSL。有谁知道如何实现这一目标？

先感谢您

丹尼斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T18:44:58.133

我认为你需要做两件事：

1.  使用您的 vhost-configuration 或 .htaccess 将所有内容重定向到 https 站点。以下是如何做到这一点：[使用 .htaccess 和 mod_rewrite 强制 SSL/https](https://stackoverflow.com/questions/4398951/force-ssl-https-using-htaccess-and-mod-rewrite)
2.  配置 TYPO3 以生成 https-urls 而不是 http 的。您可以通过在 TYPOScript 中相应地设置 config.baseURL 或 config.absRefPrefix 来做到这一点。后一种设置是首选，因为它可以防止一些兼容性问题。

我希望这是所需要的一切，否则请发表评论。

# algorithm - 为调色板生成一组颜色的算法？

> ID：13074821
> 
> 赞同：0
> 
> 时间：2012-10-25T18:24:39.687
> 
> 标签：algorithm, graphics, colors

考虑“cols”是每行中区分颜色的数量，“rows”是宽度为“w”和高度为“h”的区域的每列中区分颜色的数量我如何绘制制服像下面这样的调色板？事实上，我正在寻找生成 RGB 数字的算法。

![在此处输入图像描述](../Images/79a64badc615acf9d0a3b06852eef67e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:31:55.353

`R * (255-x) + G * x + B * y`在我看来`x`，`y`介于 0 和 255 之间。

每个点的颜色是它在块中的`[255-x, x, y]`位置`x`和`y`坐标`[0, 255]^2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:37:19.140

我建议您查看一下 imagemagick 库，它能够以多种语言绘制图片。

生成 RGB 数字无非就是让三个嵌套循环从 0 到 255 运行，或者让一个循环通过 2^24 运行并使用模运算将 R、G 和 B 值从中分离出来，如下所示：

```
<?php
for ($i=0; $i<16777216; $i++) {
    $r = ($i >> 16) % 256;
    $g = ($i >> 8) % 256;
    $b = $i % 256;
    print("$i\t$r\t$g\t$b\n");
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T22:07:41.787

为此，您必须先计算 HSB 值，然后再将它们转换为 RGB。在 HSB 中有 256 种不同的色调（颜色），因此您最多可以支持 256 个不同的单元格。您显示的图像是 8x64 单元 = 512 种不同的颜色，因此您还必须使用两个级别的亮度或饱和度。

# visual-studio - Visual Studio 调试 - “标志点”？

> ID：13074822
> 
> 赞同：0
> 
> 时间：2012-10-25T18:24:42.417
> 
> 标签：visual-studio, debugging, plugins, breakpoints

我正在寻找一个功能 - 想知道它是否存在于某些 3rd 方插件或其他东西中。基本上我在想的是你可以设置的东西，就像一个断点，只是它不会停止执行。仅在执行该行代码时更改断点的外观（可能会更改颜色）。它甚至可以使用计数器，因此您可以随时查看该行运行了多少次。

基本上它会派上用场的地方是，当您以堆栈跟踪信息量不足的方式抛出异常时（可能错误处理在单独的线程中处理，或者不同的包具有不同的优化设置，因此并非所有都是直接的debuggable)，然后您可以查看并轻松查看执行了哪些代码行，并非常快速地缩小异常的来源。我知道您可以在常规断点上设置命中计数，并且您可以将值设置得非常高以阻止它在这些点实际中断，但是断点计数器不会立即可见，因此您必须将鼠标一一悬停在它们上方以查看执行停止的位置。

我只是好奇是否有人看到了可以做这种事情的插件，或者我只是在这里做梦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T08:03:54.727

您是否考虑过使用跟踪点？您通过正常的断点菜单添加它们，但您需要选择`When hit...`选项：

![在此处输入图像描述](../Images/edbf8fd79744ebb948abcbeed3eb0f7a.png)

在应该出现的窗口中，您几乎没有可用的系统变量来描述谁调用了您的跟踪点 - 让我们添加`, hits: {hits++}`到默认值（我用红色标记了重要部分）：

![在此处输入图像描述](../Images/0cc26785f9c855017ad17f95dc3cdc3a.png)

最后在放置跟踪点的类中定义一个 hits 变量：

```
class Program
{
#if DEBUG
    private static int hits;
#endif
... 
```

在 VS 调试器下运行您的代码，您应该会在即时/输出（取决于您的设置）日志中看到如下所示：

```
Function: Program.Main(), Thread: 0x1604 Main Thread, hits: 1
Function: Program.Main(), Thread: 0x1604 Main Thread, hits: 2
Function: Program.Main(), Thread: 0x1604 Main Thread, hits: 3
Function: Program.Main(), Thread: 0x1604 Main Thread, hits: 4
Function: Program.Main(), Thread: 0x1604 Main Thread, hits: 5
Function: Program.Main(), Thread: 0x1604 Main Thread, hits: 6
Function: Program.Main(), Thread: 0x1604 Main Thread, hits: 7 
```

希望能帮助到你：）

# c# - 数组使用相同的内存空间？

> ID：13074824
> 
> 赞同：1
> 
> 时间：2012-10-25T18:24:53.993
> 
> 标签：c#, asp.net, memory

我在主程序中有一个这样的数组：（我正在使用 C# 在 asp.net 中编程）

```
double[][] example= new double[][]; 
```

对于这个例子，让我们想象一个 10*2 的数组。

所以接下来我要做的就是将此数组发送到另一个函数，如下所示：

```
usedarray(example);
public double[][] usedarray(double[][]examplearray)
{

} 
```

我知道每个空间中的双精度数组只有 64 位浮点数，因此对于此示例使用的内存，该数组将有 1280 位，但是何时发送到使用相同内存空间的函数？或者它使用一套全新的内存空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:28:18.987

数组是引用类型，而不是值类型。这意味着该变量`examplearray`实际上并不包含 1280 位数据，它仅包含对存储在其他地方的实际数据的引用（有时也称为指针）（出于本文的目的，它不不管“其他地方”实际在哪里）。正如您在那里所做的那样，将该变量传递给一个方法，只是复制该引用（根据系统，它是 32 位或 64 位），而不是底层的 1280 位数据。

# jqgrid - jqGrid中的参数删除

> ID：13074826
> 
> 赞同：0
> 
> 时间：2012-10-25T18:25:04.323
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-formatter, jqgrid-inlinenav

我想为 jqGrid 实现删除，我有（示例）2 表请求和项目

请求字段是`RequestId`, `WayBillNo`,`Customer`
项目字段是`RequestId`, `ItemNO`,`Quantity`
请求表`RequestId`是 pk 并且在项目表 pk 中`RequestId`,`ItemNO`我为项目表编写了这段代码

```
var requestIdItem=0, itemIdItem=0;
var gridItem = $('#listItem');
gridItem.jqGrid({
    url: 'jQGridHandler.ashx',
    postData: { ActionPage: 'ClearanceItems', Action: 'Fill', requestId: rowid },
    ajaxGridOptions: { cache: false },
    datatype: 'json',
    height: 200,
    colNames: ['RequestId','ItemNo',Quantity],
    colModel: [
        { name: 'REQUEST_ID', width: 100, sortable: true,hidden:true },
        { name: 'ITEM_NO', width: 200, sortable: true }
        { name: 'Quntity', width: 100, sortable: true  }
    ],
    gridview: true,
    rowNum: 20,
    rowList: [20, 40, 60],
    pager: '#pagerItem',
    viewrecords: true,
    sortorder: 'ASC',
    rownumbers: true,
    //onSelectRow: function (id, state) {
    //    requestIdItem = gridItem.jqGrid('getCell', id, 'REQUEST_ID_ID');
    //    alert(requestIdItem);
    //    itemIdItem = gridItem.jqGrid('getCell', id, 'ITEM_NO');
    //    alert(itemIdItem);
    //}
    //,
    beforeSelectRow: function (itemid, ex) {
        requestIdItem = gridItem.jqGrid('getCell', itemid, 'REQUEST_ID_ID');
        itemIdItem = gridItem.jqGrid('getCell', itemid, 'ITEM_NO');

        return true;
    }

});
gridItem.jqGrid('navGrid', '#pagerItem', { add: false, edit: false, del: true }, {}, {}, {
    //alert(requestIdItem);
    url: "JQGridHandler.ashx?ActionPage=ClearanceItems&Action=Delete&REQUEST_ID=" +
         requestIdItem + "&ITEM_NO=" + itemIdItem
}, { multipleSearch: true, overlay: false, width: 460 }); 
```

我为项目表编写此代码，现在我想为项目表中的删除项目编写代码我为发送参数值编写此代码

```
url: "JQGridHandler.ashx?ActionPage=ClearanceItems&Action=Delete&REQUEST_ID=" +
     requestIdItem + "&ITEM_NO=" + itemIdItem 
```

但总是向服务器发送 0 值，请帮助我。谢谢大家

EDIT01：我更改删除选项为此：我在此页面中看到`http://stackoverflow.com/questions/2833254/jqgrid-delete-row-how-to-send-additional-post-data`用户@Oleg 编写此代码

```
gridItem.jqGrid('navGrid', '#pagerItem', { add: false, edit: false, del: true }, {}, {}, {
    serializeDelData: function (postdata) {
        alert(postdata.id);
        return ""; // the body MUST be empty in DELETE HTTP requests
    },
    onclickSubmit: function (rp_ge, postdata) {
        //  alert(postdata.id);
        var rowdata = $("#listItem").getRowData(postdata.id);
        alert(rowdata.REQUEST_ID_ID);
        rp_ge.url = 'JQGridHandler.ashx?ActionPage=ClearanceItems&Action=Delete&' +
                    $.param({ rr: rowdata.REQUEST_ID_ID });

        // 'subgrid.process.php/' + encodeURIComponent(postdata.id) +
        //    '?' + jQuery.param({ user_id: rowdata.user_id });
    }
    //alert(requestIdItem);
    // url: "JQGridHandler.ashx?ActionPage=ClearanceItems&Action=Delete&REQUEST_ID=" +
    //      requestIdItem + "&ITEM_NO=" + itemIdItem
}, { multipleSearch: true, overlay: false, width: 460 }) 
```

当发送数据到服务器发送`undefined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:14:24.503

首先，在我看来，您的代码中有输入错误。您应该替换代码`REQUEST_ID_ID`中`REQUEST_ID`的任何地方。

如果您需要向服务器发送一些附加信息，您可以使用

```
onclickSubmit: function (rp_ge, postdata) {
    var requestId = $(this).jqGrid("getCell", postdata.id, "REQUEST_ID");
    // alert("REQUEST_ID=" + requestId);
    return { rr: requestId });
} 
```

在这种情况下`rr`，将作为删除请求的附加参数与`id`参数一起发布。

如果您确实需要将信息作为 URL 的一部分而不是 POST 请求的正文部分发送，您可以执行以下操作

```
onclickSubmit: function (rp_ge, postdata) {
    var requestId = $(this).jqGrid("getCell", postdata.id, "REQUEST_ID");
    // alert("REQUEST_ID=" + requestId);
    rp_ge.url = "JQGridHandler.ashx?" +
        $.param({
            ActionPage: "ClearanceItems",
            Action: "Delete",
            rr: requestId
        });
} 
```

# regex - 正则表达式 - Linux

> ID：13074828
> 
> 赞同：0
> 
> 时间：2012-10-25T18:25:08.220
> 
> 标签：regex, linux, grep

我们可以在 grep 中搜索像 "\w\w\w\d" 这样表示三个字母后跟一个数字的模式吗？它不工作。linux终端有没有办法做同样的事情？

例如我想匹配'ABC9'或'NMJ6'等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:39:42.940

例如：

```
回声ABC9 | grep -E '[[:alpha:]]{3}[[:digit:]]' -

```

这利用了由以下定义的字符类`man grep`：

```
 Finally,  certain  named  classes  of  characters  are predefined
   within bracket expressions, as follows.   Their  names  are  self
   explanatory,   and  they  are  [:alnum:],  [:alpha:],  [:cntrl:],
   [:digit:], [:graph:], [:lower:], [:print:], [:punct:], [:space:],
   [:upper:],   and  [:xdigit:].   For  example,  [[:alnum:]]  means
   [0-9A-Za-z], except the latter form depends upon the C locale and
   the  ASCII  character encoding, whereas the former is independent
   of locale and character set.  (Note that the  brackets  in  these
   class  names are part of the symbolic names, and must be included
   in addition to the brackets delimiting the  bracket  expression.)
   Most  meta-characters  lose  their special meaning inside bracket
   expressions.  To include a literal ] place it first in the  list.
   Similarly,  to  include  a literal ^ place it anywhere but first.
   Finally, to include a literal - place it last. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:35:54.007

grep -P "\w\w\w\d"

```
-P, --perl-regexp
Interpret PATTERN as a Perl regular expression. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T18:36:52.853

```
grep -P '\w\w\w\d' 
```

添加 --color 使其真正脱颖而出。例如：

```
echo 'blahblahABC9blahblah' | grep --color -P '\w\w\w\d' 
```

# javascript - 自javascript中的最后一分钟以来经过的毫秒数

> ID：13074829
> 
> 赞同：2
> 
> 时间：2012-10-25T18:25:08.597
> 
> 标签：javascript, time

我可能只是累了，没有清楚地思考，但是有人可以给出一个简洁的方法来获取自最后一分钟使用 javascript 以来经过的毫秒数？

类似的东西`Date.getSeconds()`，但这会返回毫秒。

虽然我可以这样做`(Date.getSeconds()*1000) + Date.getMilliseconds()`，但这似乎真的很尴尬，并且必须有更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T18:38:57.683

取决于你想要做什么。

现在和 1 分钟前之间的差异（以毫秒为单位）应始终为 60000 毫秒。o_O

正如 Jan 所说`Date.now()`，将以毫秒为单位返回当前时间戳。

但似乎您可能正在寻找 getTime 方法，例如： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)

```
// note the keyword "new" below
var date_instance = new Date();

// separate example in case you're managing Date()'s and not the method,
// who knows, just an example
var timestamp     = date_instance.getTime();

var minute_before_timestamp = function(ts){ 
  return ts - 60000;
};
console.log(minute_before_timestamp(timestamp));
console.log(minute_before_timestamp(date_instance.getTime()); // always same as above!

// or use the current time
console.log(minute_before_timestamp(Date.now()));
console.log(minute_before_timestamp(new Date().getTime())); 
```

（另一个有用的链接：[http](http://www.epochconverter.com/) ://www.epochconverter.com/ ）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T18:28:03.103

怎么样……</p>

```
Date.now() % 60000 
```

`Date.now`返回以毫秒为单位的当前 UNIX 时间戳。

* * *

为了澄清那里发生的事情，该`%`运算符称为*模数*，它的作用是为您提供第一个数字除以另一个数字的余数。

一个例子可以是：

```
20 % 7 === 6
13 % 7 === 6
 6 % 7 === 6 
```

……因为……</p>

```
20 / 7 = 2 + 6 / 7
13 / 7 = 1 + 6 / 7
 6 / 7 = 0 + 6 / 7 
```

（注意余数`6`）

# include - 哪种方式更好使用包括 - 本地地址或远程 url？

> ID：13074832
> 
> 赞同：0
> 
> 时间：2012-10-25T18:25:14.477
> 
> 标签：include, include-path

当我包含 php、css、图形文件等时，我倾向于使用本地地址，因为这在本地开发中更容易使用（例如 '../gfx/logo.png'）。

然而，如果触发包含请求的文件是从不同的位置加载的，这可能会导致问题。在这种情况下，本地地址包含将不起作用，因此在这些类型的文件中我使用远程 url 地址（例如'http://site.com/gfx/logo.png'）。

在共享服务器上使用完整路径（'/root/mysite/gfx/logo.png'）的缺点是，该路径有点长，并且为每个包含重复它有点弄乱代码。

哪种方式最有效、最优雅？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:56:24.540

如果您在使用相对 url 时遇到问题，请使用完整的 url 路径，即`http://example.com/images/test.png`:) 无需包含服务器路径（这也更危险！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:05:28.370

您可以尝试 '<%=VirtualPathUtility.ToAbsolute("~/gfx/logo.png") %>' 这可以帮助我测试本地主机以及我的 QA 服务器上的所有内容，而无需担心更改 url。希望能帮助到你

# c++ - c 或 c++ 中的 valuechange 事件类似功能

> ID：13074837
> 
> 赞同：0
> 
> 时间：2012-10-25T18:25:34.727
> 
> 标签：c++, c

我正在实现一个全局调试模块，一个模块包含一个结构来保存 C 中的所有全局变量，我们的代码同时具有 C 和 C++ 模块。如果在某处设置了现有变量，是否有办法也将导致更新结构中的调试全局变量。我在考虑 setter 函数，但这需要在每个模块中进行修改。相反，有没有一种方法可以使用 C 或 C++ 在 JSF 中复制 valuechangeevent 之类的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:46:06.147

您可能可以使用一些预处理器技巧来做到这一点：

```
#ifdef DEBUG
#define myvar global_debug_thingy->myvar
#else
int myvar;
#endif 
```

我认为您不能以这种方式执行访问器函数或通知器，因为它需要不同的代码来读写，而预处理器无法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:55:54.257

您可以使调试模块包含指向您正在监视的变量的所有指针。

```
struct debug {
  int * pointer_to_var_1;
};

struct debug __debug__;
__debug__.pointer_to_var_1 = &var_1; 
```

现在假设`var_1`在某处发生了变化，您可以`__debug__`通过访问直接看到：

```
*(__debug__.pointer_to_var_1)  //This is up to date 
```

否则，您将不得不使用 setter 并更改模块中的所有内容，或者使用无限循环或计时器来监视所有变量。C中没有值变化的事件登记。

# java - 如何默认折叠richfaces手风琴中的所有面板

> ID：13074839
> 
> 赞同：0
> 
> 时间：2012-10-25T18:25:37.953
> 
> 标签：java, jsf-2, richfaces

我想知道如何默认设置richfaces手风琴折叠

这是我的代码，我只想在加载页面时所有面板折叠

```
<rich:accordion 
    switchType="ajax" style="width : 680px">
        <c:forEach items="#{marcarConsulta.consultasDisponiveis}"
            var="consultaDisponivel" varStatus="contador">
            <rich:accordionItem value="#{consultaDisponivel}">
                <f:facet name="header">                 
                    <h:panelGrid columns="2" cellpadding="10"
                        columnClasses="titulo_accordion_item">
                        <h:outputText value="#{consultaDisponivel.nomePessoa}" />
                        <h:outputText value="#{consultaDisponivel.nomeFantasia}" />
                    </h:panelGrid>
                </f:facet>
                <h:panelGroup layout="block" styleClass="accordion-date">
                    <h2>Escolha uma data:</h2>
                    <rich:calendar popup="false"
                        value="#{marcarConsulta.dataSelecionada}" mode="ajax"
                        firstWeekDay="0" boundaryDatesMode="scroll"
                        dataModel="#{calendarModel}" datePattern="dd/MM/yyyy">
                        <f:ajax listener="#{marcarConsulta.recuperarHorario}"
                            render="horario#{contador.index}" />
                    </rich:calendar>
                </h:panelGroup>             
            </rich:accordionItem>
        </c:forEach>
</rich:accordion> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:01:40.860

如果你定义一个css类如下：

```
<style> .myclass { display:none}  </style> 
```

然后在手风琴项目上将其添加到 contentClass 属性中，如下所示：

```
<rich:accordionItem contentClass="myclass" switchType="ajax"  > 
```

那么你应该看到你现在已经折叠了所有面板。单击它们现在将照常展开。

# python - 在上下文管理器 __enter__() 中捕获异常

> ID：13074847
> 
> 赞同：29
> 
> 时间：2012-10-25T18:25:56.707
> 
> 标签：python, exception, python-2.7, with-statement, contextmanager

`__exit__()`即使有异常，是否可以确保调用该方法`__enter__()`？

```
>>> class TstContx(object):
...    def __enter__(self):
...        raise Exception('Oops in __enter__')
...
...    def __exit__(self, e_typ, e_val, trcbak):
...        print "This isn't running"
... 
>>> with TstContx():
...     pass
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in __enter__
Exception: Oops in __enter__
>>> 
```

**编辑**

这是我能得到的最接近的...

```
class TstContx(object):
    def __enter__(self):
        try:
            # __enter__ code
        except Exception as e
            self.init_exc = e

        return self

    def __exit__(self, e_typ, e_val, trcbak):
        if all((e_typ, e_val, trcbak)):
            raise e_typ, e_val, trcbak

        # __exit__ code

with TstContx() as tc:
    if hasattr(tc, 'init_exc'): raise tc.init_exc

    # code in context 
```

事后看来，上下文管理器可能不是最好的设计决策

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-25T18:38:44.537

像这样：

```
import sys

class Context(object):
    def __enter__(self):
        try:
            raise Exception("Oops in __enter__")
        except:
            # Swallow exception if __exit__ returns a True value
            if self.__exit__(*sys.exc_info()):
                pass
            else:
                raise

    def __exit__(self, e_typ, e_val, trcbak):
        print "Now it's running"

with Context():
    pass 
```

要让程序继续其愉快的方式而不执行上下文块，您需要检查上下文块内的上下文对象，并且只有在`__enter__`成功时才执行重要的事情。

```
class Context(object):
    def __init__(self):
        self.enter_ok = True

    def __enter__(self):
        try:
            raise Exception("Oops in __enter__")
        except:
            if self.__exit__(*sys.exc_info()):
                self.enter_ok = False
            else:
                raise
        return self

    def __exit__(self, e_typ, e_val, trcbak):
        print "Now this runs twice"
        return True

with Context() as c:
    if c.enter_ok:
        print "Only runs if enter succeeded"

print "Execution continues" 
```

据我所知，您不能完全跳过 with-block。请注意，此上下文现在吞没了其中的*所有*异常。如果您不希望在`__enter__`成功后吞下异常，请签`self.enter_ok`入`__exit__`并且`return False`如果它是`True`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-25T18:31:19.137

不可以。如果有可能发生异常，`__enter__()`那么您需要自己捕获它并调用包含清理代码的辅助函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-11-11T17:44:50.570

我建议您遵循 RAII（资源获取是初始化）并使用上下文的构造函数来执行可能失败的分配。然后你`__enter__`可以简单地返回 self ，它永远不会引发异常。如果您的构造函数失败，则在进入 with 上下文之前可能会引发异常。

```
class Foo:
    def __init__(self):
        print("init")
        raise Exception("booh")

    def __enter__(self):
        print("enter")
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        print("exit")
        return False

with Foo() as f:
    print("within with") 
```

输出：

```
init
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  ...
    raise Exception("booh")
Exception: booh 
```

**编辑：** 不幸的是，这种方法仍然允许用户创建“悬空”资源，如果他执行以下操作则不会被清理：

```
foo = Foo() # this allocates resource without a with context.
raise ValueError("bla") # foo.__exit__() will never be called. 
```

我很好奇这是否可以通过修改类的**新**实现或其他一些禁止在没有上下文的情况下实例化对象的 python 魔法来解决。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-25T18:51:15.940

您可以使用`contextlib.ExitStack`（未​​测试）：

```
with ExitStack() as stack:
    cm = TstContx()
    stack.push(cm) # ensure __exit__ is called
    with ctx:
         stack.pop_all() # __enter__ succeeded, don't call __exit__ callback 
```

[或文档中](http://docs.python.org/dev/library/contextlib.html#contextlib.ExitStack)的示例：

```
stack = ExitStack()
try:
    x = stack.enter_context(cm)
except Exception:
    # handle __enter__ exception
else:
    with stack:
        # Handle normal case 
```

请参阅[Python <3.3 上的 contextlib2](http://contextlib2.readthedocs.org/en/latest/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-25T18:55:12.300

如果不需要继承或复杂的子例程，您可以使用更短的方法：

```
from contextlib import contextmanager

@contextmanager
def test_cm():
    try:
        # dangerous code
        yield  
    except Exception, err
        pass # do something 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-22T12:20:10.863

```
class MyContext:
    def __enter__(self):
        try:
            pass
            # exception-raising code
        except Exception as e:
            self.__exit__(e)

    def __exit__(self, *args):
        # clean up code ...
        if args[0]:
            raise 
```

我已经这样做了。它以错误为参数调用 __exit__()。如果 args[0] 包含错误，它会在执行清理代码后重新引发异常。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-04T09:57:13.463

[文档](https://docs.python.org/3/library/contextlib.html#cleaning-up-in-an-enter-implementation)包含一个[`contextlib.ExitStack`](https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack)用于确保清理的示例：

> 如 文档中所述，如果实施中的后续步骤失败[`ExitStack.push()`](https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack.push)，此方法可用于清理已分配的资源。[`__enter__()`](https://docs.python.org/3/reference/datamodel.html#object.__enter__)

因此，您将`ExitStack()`用作上下文管理器周围的包装上下文管理`TstContx()`器：

```
from contextlib import ExitStack

with ExitStack() as stack:
    ctx = TstContx()
    stack.push(ctx)  # Leaving `stack` now ensures that `ctx.__exit__` gets called.
    with ctx:
        stack.pop_all()  # Since `ctx.__enter__` didn't raise it can handle the cleanup itself.
        ...  # Here goes the body of the actual context manager. 
```

# html - 在 iframe 中滚动时禁用整个页面的滚动

> ID：13074850
> 
> 赞同：0
> 
> 时间：2012-10-25T18:26:06.317
> 
> 标签：html, css, iframe, scroll

我的页面上有一个 iframe 链接到另一个页面。那个包含一个具有固定高度和溢出：滚动的 div，它工作得很好——但是当我继续用鼠标或键盘滚动时，它会向下滚动到 div 的末尾，然后开始滚动页面——这很烦人。

当鼠标悬停在该 div/整个 iframe 上时，如何禁用整页滚动？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:55:29.480

您可以`body {position:fixed}`在悬停时设置，然后将其返回`body {position: static;}`

# typescript - 可以为 number[] 定义索引器接口吗？

> ID：13074851
> 
> 赞同：4
> 
> 时间：2012-10-25T18:26:09.887
> 
> 标签：typescript

我在尝试使用定义索引器的接口并将其与系统类型 number[] 一起使用时偶然发现了一些困难。该接口的原因是我希望能够传递具有数字索引器而不是返回数字的任何类型，就像 number[] 和类型化数组实例的情况一样。

考虑：

```
interface IIndexedNumeric
{
    [index: number]: number;
}

class buffer {
    // ... 
    push(vals: IIndexedNumeric) { ... }
}

// problem usage:
var ary: number[] = [1,2,3];
var foo = new buffer();

foo.push(ary); // error
//  Supplied parameters do not match any signature of call target:
//  Could not apply type 'IIndexedNumeric' to argument 1, which is of type 'number[]' 
```

这应该发生吗？似乎 number[] 应该在结构上完全实现 IIndexedNumeric。如果我只是搞砸了一些事情，请帮我看看我的错误。如果没有，你能想到一个解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:49:16.520

I'm not entirely sure but I believe this is a bug. The spec states that an array type literal is equivalent to an object type with an index signature [index: number]: ElementType, where ElementType in your case is number. The array type has additional properties corresponding to Array.prototype.* but this shouldn't affect assignment compatibility with just an indexer. If you would, please [file a bug on CodePlex](http://typescript.codeplex.com/WorkItem/Create) about this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:30:48.860

我想如果您实际运行它，它会完美运行，但从技术上讲，IIndexedNumeric 是与 number[] 不同的类型，即使它们看起来非常相似。您可能必须将 ary 转换为 IIndexedNumeric 才能使编译器不抱怨。

# java - WebLogic 10.3 中的 Web 服务部署问题

> ID：13074854
> 
> 赞同：3
> 
> 时间：2012-10-25T18:26:14.243
> 
> 标签：java, web-services, weblogic, jax-ws, soapheader

我使用 MyEclipse 10.0 创建了一个 Web 服务，它在 Tomcat 6.0 上运行良好，但是当我在 WebLogic 上部署它时出现异常。

我正在使用`SoapHeader`，我在上面添加标题元素。`SoapHeader`我在 WebLogic 中的程序在尝试向其中添加元素时卡住了。

```
SoapHeader header = envelope.getheader();
SoapHeaderElement element;
element = addheaderelement(new QName(namespace, "OTAuthentication"); 
```

我不知道我在这里做错了什么，它可以与 Tomcat 服务器一起添加，但不能在 WebLogic 10.3.6 中执行

war 文件可以部署，但是在调用方法时，它停在这里并抛出异常

```
Fault<UNIMPLEMENTED>Fault
Java.XML.soapheaderfault 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:42:52.707

那么您的问题可能与您通过 Axis 或 Apache CXF 开发的 Web 服务有关。

Weblogic 正在使用它自己的基于 Metro 的实现

# ruby-on-rails - Cucumber：无法将 nil 转换为字符串 TypeError

> ID：13074855
> 
> 赞同：3
> 
> 时间：2012-10-25T18:26:19.483
> 
> 标签：ruby-on-rails, string, cucumber, null, typeerror

filter_movie_list.feature

`When I check the following ratings: PG, R`

电影步骤.rb

```
When /^I check the following ratings: (.*)/ do |rating_list|
  within(:id => 'ratings_form') do
    rating_list.split(', ').each do |rating|
      check("ratings_#{rating}")
    end
  end
end 
```

index.html.haml

```
= form_tag movies_path, :method => :get, :id => 'ratings_form' do
  = hidden_field_tag "title_sort", true if @title_header
  = hidden_field_tag ":release_date_sort", true if @date_header
  Include: 
  - @all_ratings.each do |rating|
    = rating
    = check_box_tag "ratings[#{rating}]", 1, @selected_ratings.include?(rating), :id => "ratings_#{rating}"
  = submit_tag 'Refresh', :id => 'ratings_submit' 
```

我收到此错误：

```
When I check the following ratings: PG, R          #step_definitions/movie_steps.rb:21
  can't convert nil into String (TypeError)
  (eval):2:in `find'
  ./step_definitions/movie_steps.rb:22:in `/^I check the following ratings: (.*)/'
  filter_movie_list.feature:26:in `When I check the following ratings: PG, R' 
```

做什么？

编辑：对不起n00bishness（格式错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:45:34.730

尝试改变你`within`的阅读： `within('#ratings_form')`看看是否会改变任何东西......

# jquery - 具有约束的视口中的 div

> ID：13074856
> 
> 赞同：0
> 
> 时间：2012-10-25T18:26:23.603
> 
> 标签：jquery, css, jquery-plugins, scroll

我正在使用 jQuery 垂直移动 div，以便它始终保留在视口中。到目前为止，我的解决方案有两个问题。首先，它会一直垂直向下移动，永远！我想我可以将 div 限制在其父 div 内，但对于我的生活来说，它无法正常工作。其次，起始位置不在页面顶部，因此当我开始滚动时，我在滚动开始之前的 div 上方有等效间隙，理想情况下，我希望 div 与顶部保持齐平滚动开始后的窗口。到目前为止，我的代码看起来像这样，

```
<script type="text/javascript">
    $().ready(function() {
        var $scrollingDiv = $("#scrollingDiv");

        $(window).scroll(function(){            
            $scrollingDiv
                .stop()
                .animate({"marginTop": ($(window).scrollTop() + 0) + "px"}, "slow" );          
        });
    });
</script> 
```

我是 jQuery 的新手，所以在努力实现我所追求的任何一件事情。如果有人能够指出我正确的方向，我将非常感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:06:28.793

更改边距顶部将相对于其原始位置不断更改它。这就是为什么它一直在下降。

尝试这个

```
#scrollDiv {position: absolute; top: 200px;}  // change the top accordingly

$scrollDiv = $('#scrollDiv');
$window = $(window);

$(window).scroll(function() {
         $scrollDiv.css('top', $window.scrollTop() + 'px');
}); 
```

# c++ - Linux kill() 意外错误

> ID：13074857
> 
> 赞同：1
> 
> 时间：2012-10-25T18:26:27.987
> 
> 标签：c++, linux, kill, sigkill, sigterm

Kill(pid, 0) 似乎没有正确设置错误代码...如 man for kill 中所述

> 错误
> 
> 如果出现以下情况，kill() 函数将失败：
> 
> EINVAL sig 参数的值是无效或不受支持的信号编号。
> EPERM 进程无权向任何接收进程发送信号。
> ESRCH 找不到与pid指定的进程或进程组对应的进程或进程组。以下部分内容丰富。 [1](http://linux.die.net/man/3/kill)

它返回 ENOENT （没有这样的文件或目录），然后有时它返回 EINTR （系统调用中断）......

这是我正在做的事情：

```
kill(g_StatusInstance[i].pid, SIGTERM) == -1 && log_fatal_syscall("kill-sigterm");
kill(g_StatusInstance[i].pid, 0);

log_info_console( "Checking process for errors: %s\n", strerror(errno));

if(errno != ENOENT)
{
   kill(g_StatusInstance[i].pid, SIGKILL) == -1 && log_fatal_syscall("kill-sigkill");
} 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:10:42.513

> > `Kill(pid, 0)`似乎没有正确设置错误代码......它正在返回 ENOENT...... EINTR
> > 
> > 这是我正在做的事情：
> > 
> > ```
> > ...
> > kill(g_StatusInstance[i].pid, 0);
> > log_info_console( "Checking process for errors: %s\n", strerror(errno)); 
> > ```
> > 
> > 难道我做错了什么？

是的。您没有检查`kill()`系统调用的返回值。`kill()`在成功的情况下，不会将 errno 设置为任何特定值。

尝试这个：

```
if(kill(g_StatusInstance[i].pid, 0) == -1) {
  log_info_console( "Checking process for errors: %s\n", strerror(errno));
} else {
  log_info_console( "kill returned 0, process still alive\n" );
} 
```

更一般地，您应该检查每个系统调用或库调用的返回值，除非它被声明为 return `void`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T04:11:44.760

根据讨论，您的问题可能是“为什么我`kill()`没有产生我预期的效果？”

为了理解为什么会发生这种情况，您应该首先尝试`strace`作为`kill()`. 通过 将其附加到现有流程`pid`或在`strace`. `strace`将显示对信号掩码的修改并指示信号何时到达。如果您的信号到达，您应该调试目标进程`kill()`并尝试了解已安装/默认的信号处理程序应该做什么。

# c++ - 关于：数组 C++ 中的子类

> ID：13074858
> 
> 赞同：0
> 
> 时间：2012-10-25T18:26:34.773
> 
> 标签：c++

**关于：数组 C++ 中的子类**

大家好，对不起，因为我被困在一些工作上。

基本上这就是发生的事情

我有一个父类呼叫车辆，它有 2 个子类呼叫

```
Car and Motorcycle 
```

父类具有以下值：

```
string Name: value either Car or MotorCycle
wheels : 4 or 2 (depends is car or motorcycle)
Notes On Wheel:
wheel[0] : Fine condition
wheel[1] : need some repair
wheel[2] : Fine condition
wheel[3] : Fine condition 
```

我想知道如何在 VehicleTwoD Array 中记录这一切

Car / Motorcycle 是 Vehicle 的子类，你们有什么建议。我尝试创建 VehicleTwoD vehtwod[100] 的对象；

然后我做一个for循环来提示。但是我如何将对象汽车/摩托车记录到我的 VehicleTwoD 数组中，以及如何在里面记录字符串数组。所以每个 VehicelTwoD 数组元素都包含信息

```
Name ( Motorcycle or Car)
Wheel ( depend on name - 2 or 4)
String array - notes size depend on what is choosen 
```

我如何在 1 个数组中记录所有内容。

非常感谢，我知道这是多态的，我知道这是 OOP，我知道我需要更多学习。但我真的坚持这部分创建可以容纳其他数组的数组。

**谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:38:09.560

通过不解决存储阵列的无关维度来简化解决方案。

创建一个指针数组`Vehicle`，并存储它们：

```
vector<unique_ptr<Vehicle>> vehicles_;
vehicles_.push_back(new Car(...));
vehicles_.push_back(new Motocycle(...)); 
```

由于我们在`unique_ptr`这里使用的是原始指针而不是原始指针，因此无需显式`delete`.

通过使类具有[多态性](http://en.wikibooks.org/wiki/C++_Programming/Classes/Polymorphism)，您可以在基类上声明函数并通过在派生类中提供定义来实现类特定功能。这使得可以通过指向基类的指针调用方法，而不必强制转换为派生类型。

如果您需要调用仅存在于派生类上的方法，则需要转换指针。这应该使用[`dynamic_cast`](http://en.cppreference.com/w/cpp/language/dynamic_cast), 并要求您的类是多态的。

编辑：

您的评论表明您不知道如何使用 a`vector`并且更愿意使用原始数组。那也很好。这是一个使用 C 风格的原始指针数组的简化示例。请注意，既不使用`vector`也不使用智能指针`unique_ptr`会使您的代码更脆弱且容易出错，并且您通常必须使用[幻数](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)来表示数组大小（这是粗略的）。

```
Vehicle* vehicles_[100];
vehicles_[0] = new Car(...);
vehicles_[1] = new Motorcycle(...); 
```

# header - 哪里出错了？代码写入“标头已发送”并链接到此代码

> ID：13074859
> 
> 赞同：1
> 
> 时间：2012-10-25T18:26:36.770
> 
> 标签：header, header-files

如果我使用此代码，我会看到警告“标头已发送”并链接此代码。其他代码无效。但是，如果我使用一个**li** facebook，或者我使用两个**li**（twitter 和 vkontakte）都可以工作，我看不到警告，但如果我使用 3 **li**（twitter、vkontakte 和 facebook）我会看到警告......

哪里出错了？

```
<li class="ssItem twitter"><a href="http://twitter.com/home?status=Скрипт анонимных вопросов - <?php echo "http://www.".$_SERVER['SERVER_NAME'].$_SERVER['PHP_SELF']; ?>" onclick="window.open('http://twitter.com/home?status=Скрипт анонимных вопросов - <?php echo "http://www.".$_SERVER['SERVER_NAME'].$_SERVER['PHP_SELF']; ?>', 'Twitter', 'width=626, height=436'); return false;" title="Нажми, чтобы опубликовать в Twitter!" target="_blank">Публиковать в Twitter</a></li>

<li class="ssItem vkontakte"><a href="http://vkontakte.ru/share.php?url=<?php echo "http://www.".$_SERVER['SERVER_NAME'].$_SERVER['PHP_SELF']; ?>" rel="nofollow" onclick="window.open('http://vkontakte.ru/share.php?url=<?php echo "http://www.".$_SERVER['SERVER_NAME'].$_SERVER['PHP_SELF']; ?>', 'Vkontakte', 'width=626, height=436'); return false;" title="Нажми, чтобы опубликовать в Vkontakte!" target="_blank">Публиковать в Vkontakte</a></li>

<li class="ssItem facebook"><a href="http://www.facebook.com/sharer.php?s=100&p[title]=Скрипт анонимных вопросов&p[summary]=Создание скрипта анонимных вопросов&p[url]=<?php echo "http://www.".$_SERVER['SERVER_NAME'].$_SERVER['PHP_SELF']; ?>" onclick="window.open('http://www.facebook.com/sharer.php?s=100&p[title]=Скрипт анонимных вопросов&p[summary]=Создание скрипта анонимных вопросов&p[url]=<?php echo "http://www.".$_SERVER['SERVER_NAME'].$_SERVER['PHP_SELF']; ?>', 'Facebook', 'width=626, height=436'); return false;" target="_blank" title="Нажми, чтобы опубликовать в Facebook!">Публиковать в Facebook</a></li> 
```

# java - 为 JPA 创建一个可以继承的通用 DAO

> ID：13074861
> 
> 赞同：5
> 
> 时间：2012-10-25T18:26:39.997
> 
> 标签：java, jakarta-ee, jpa

我正在尝试创建一个可以继承的存储库类，以从中获取基本的 CRUD 功能。EntityManager.find(..) 需要一个 Class 参数。但是，你不能传递`T`给它（由于某种原因我还不明白......类型擦除）。所以我找到了返回实体类的方法，并从我看到的另一个问题中添加了它。首先，它是如何工作的，其次它会对性能产生多大影响？我看到它使用反射。

```
@Stateless
public abstract class AbstractSqlRepository<T> implements Repository<T> {

    @PersistenceContext
    private EntityManager entityManager;

    @Override
    public void create(T entity) {
        entityManager.persist(entity);
    }

    @Override
    public T find(int id) {
        return entityManager.find(getEntityClass(), id);
    }

    @Override
    public T update(T entity) {
        return entityManager.merge(entity);
    }

    @Override
    public void remove(T entity) {
        entityManager.remove(entity);
    }

    public EntityManager getEntityManager() {
        return entityManager;
    }

    public Class<T> getEntityClass() {
        ParameterizedType genericSuperclass = (ParameterizedType) getClass().getGenericSuperclass();

        return (Class<T>) genericSuperclass.getActualTypeArguments()[0];
    }
} 
```

* * *

新的方法：

```
@Stateless
public abstract class AbstractSqlRepository<T> implements Repository<T> {

    @PersistenceContext
    private EntityManager entityManager;
    private Class<T> clazz;

    public AbstractSqlRepository(Class<T> clazz) {
        this.clazz = clazz;
    }

    @Override
    public void create(T entity) {
        entityManager.persist(entity);
    }

    @Override
    public T find(int id) {
        return entityManager.find(clazz, id);
    }

    @Override
    public T update(T entity) {
        return entityManager.merge(entity);
    }

    @Override
    public void remove(T entity) {
        entityManager.remove(entity);
    }

    public EntityManager getEntityManager() {
        return entityManager;
    }
} 
```

和

公共类 QuestionSqlRepository 扩展 AbstractSqlRepository 实现 QuestionRepository {

```
public QuestionSqlRepository() {
    super(Question.class);
} 
```

}

这是一个不好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:08:05.907

据说反射会增加开销，但我认为您不必每次都获取对象的类。

只需第一次找到它，然后检查 null，与调用超类方法相比，这增加了很少的开销。

反对构造函数参数的唯一论点是你的类不会是 POJO。

这是示例代码：

```
@SuppressWarnings("unchecked")
public class HibernateBaseDao<T, Pk extends Serializable> implements Dao<Pk, T> {

    // ...
    private Class<T> type;

    // ...

    public Class<T> getType() {

        if (this.type == null) {

            ParameterizedType parameterizedType = (ParameterizedType) (this
                    .getClass().getGenericSuperclass());

            while (!(parameterizedType instanceof ParameterizedType)) {
                parameterizedType = (ParameterizedType) parameterizedType
                        .getClass().getGenericSuperclass();
            }

            this.type = (Class<T>) parameterizedType.getActualTypeArguments()[0];

        }

        return this.type;
    }

    @Override
    public T load(Pk id) {

        return (T) this.sessionFactory.getCurrentSession().load(this.getType(),
                id);
    }

    @Override
    public T get(Pk id) {
        return (T) this.sessionFactory.getCurrentSession().get(this.getType(),
                id);
    }

} 
```

# c++ - 如何将 txt 文件中的特定字符输出到特定点？

> ID：13074864
> 
> 赞同：0
> 
> 时间：2012-10-25T18:26:57.910
> 
> 标签：c++

教程的第一个任务，我已经难住了，

对，我应该把 3 个数字写到一个文本文件中，打开那个文件，输出所有 3 个数字和平均值。设法完成了前两个部分，但我在实际输出部分遇到了困难。

以下是文本文件的内容，与文件中的内容完全相同：

> 25
> 
> 10
> 
> 12

这是我到目前为止的代码：

```
#include <fstream>
#include <iostream>
#include <iomanip>
#include <string>

using namespace std;

int main()
{

// Create an ifstream input stream for reading of data from the file
ifstream inFile;
inFile.open("ProgrammingIsFun.txt");

// Create an ofstream output stream for writing data to a file
ofstream outFile;
outFile.open("Results.out");

cout << "The first integer is " << endl;
cout << "The second integer is " << endl;
cout << "The third integer is " << endl;
cout << "The average is " << endl;

// Close the files since we're done with them
outFile.close();
inFile.close();

system("Pause");
return 0;
} 
```

据我了解，txt 文件的内容只能包含这 3 个数字而没有其他内容（不过我可能是错的）

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:37:37.340

我猜想从文件中读取整数的首选 C++ 方法是：

```
int first, second, third;

inFile >> first;
inFile >> second;
inFile >> third; 
```

然后，您可以使用 outFile 上的 << 运算符进行类似的输出。

# magento - Magento：描述模型、资源模型和集合的基本概念，以及它们之间的关系

> ID：13074867
> 
> 赞同：13
> 
> 时间：2012-10-25T18:27:01.793
> 
> 标签：magento

我正在尝试了解 Magento，我想知道是否有人可以给我关于这个主题的任何见解

描述模型、资源模型和集合的基本概念，以及它们之间的关系

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-25T20:36:27.863

资源模型是包含从数据存储中获取数据的代码的对象。实际上，这意味着资源模型是包含 SQL 构建和获取代码的对象，以及对连接到主 Magento 数据库的对象的引用。

模型是包含数据库无关代码的对象，用于与“类型”数据进行交互。在传统的数据建模术语中，您的模型对象包含特定类型对象的业务逻辑（对象类型意味着产品、客户等）。

**重要提示**：除上述定义外，部分 Magento 代码使用“模型”作为包含与数据无关的业务逻辑的通用对象。这些“模型”应该被认为是普通的旧对象，只是通过 Magento 工厂模式实例化。继承自的模型`Mage_Core_Model_Abstract`是前者——不继承的模型是后者。这篇文章假设“模型”是指前者。我也开始将这些称为 Magento 的[CRUD 模型](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)。

集合是一个对象，其中包含获取模型对象组（集合、数组、列表等）的代码。由于它生成 SQL 来执行此操作，因此它也被视为资源模型并使用该`Mage::getResourceModel`方法进行实例化（尽管集合对象继承自与普通资源模型不同的类链。这些不是您正在寻找的设计模式）。集合对象也实现了某些标准的 PHP 接口，并且可以在`foreach`循环中使用以迭代它们的结果。

Magento 模型对象包含对资源模型的引用，该模型用于加载其数据。每个模型对象都有一个单独的资源模型对象。即一个产品模型有一个产品资源模型。

Magento 模型对象也可用于实例化集合对象。集合对象也被键入以匹配它们的模型对象。Product 模型可用于实例化 Product 集合对象。

集合对象创建 SQL 以获取对象组（集合、数组、列表等），它还包含将数据分配给主模型对象的代码。由于此代码与模型的资源模型对象中的代码略有不同，因此直接加载或通过集合加载的模型之间通常存在细微差异。例如，集合不调用每个模型的`_afterLoad`方法，或者 EAV 集合默认不会加载所有属性数据（除非`addAttributeToCollection('*')`使用）。许多 Magento 开发人员正在追踪并解决这些差异。

最后，Magento 源代码中有些地方与上述不同。例如：报告集合对象是独立的——它们与特定的模型类无关。记住以上几点，但要准备好让特定的 Magento 模块让你大吃一惊。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T18:48:00.503

打字太多了 :) Alan Storm 写了一篇关于[magento 模型基础的精彩文章](http://alanstorm.com/magento_models_orm)

# java - 如何在命令提示符下创建特定命令的快捷方式？

> ID：13074875
> 
> 赞同：1
> 
> 时间：2012-10-25T18:27:55.100
> 
> 标签：java, windows, command-prompt, appletviewer

是否可以创建类似桌面快捷方式的东西，我可以双击它来运行我通常会在命令提示符下输入的特定命令？这是我想做的一个快捷方式：

`C:\Users\jdave\Documents\Java>appletviewer ButtonExample.html`

我在 Yahoo Answers 上问过这个问题，因为我认为这对于 Stack Overflow 来说有点基础，有人说要像这样创建一个批处理文件：

```
@echo off
start "C:\Users\jdave\Documents\Java>appletviewer ButtonExample.html" 
```

我这样做了，但它所做的只是打开一个命令提示符窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:42:09.507

您的批处理文件应如下所示：

```
@echo off
cd C:\Windows\System32\
start notepad.exe C:\Users\"user1"\test.txt 
```

将“user1”替换为您的用户名或为您的应用程序提供正确的路径。

确保**appletviewer**采用您传递给它的参数类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:32:11.793

你可以创建一个快捷方式

```
C:\Users\jdave\Documents\Java\appletviewer ButtonExample.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:32:11.220

你的命令看起来不正确，试试这个：

```
C:\Users\jdave\Documents\Java\appletviewer GifExample.html 
```

确保 appletviewer.exe 存在于此位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T18:33:23.540

您需要在环境变量路径中设置 java bin 目录。使用以下批次：

```
@echo off
cd  "C:\Users\jdave\Documents\Java"
appletviewer GifExample.html 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T18:42:42.877

右键单击桌面 > 新建 > 快捷方式。输入位置

```
appletviewer GifExample.html 
```

单击下一步，输入快捷方式名称，单击完成。你完成了。

顺便说一句，您在命令提示符上看到的 >**不是**命令的一部分。实际的命令在> 符号**之后开始。**

此外，“appletviewer”程序**可能不**驻留在`C:\Users\jdave\Documents\Java`. 如果您已经可以从命令提示符中的任何文件夹运行 appletviewer，则上述内容是正确的。如果你这样做`C:\Users\jdave\Documents\Java\appletviewer GifExample.html`，它可能根本不起作用！

# php - PHP 登录脚本标头已发出

> ID：13074886
> 
> 赞同：-2
> 
> 时间：2012-10-25T18:28:34.097
> 
> 标签：php, login, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我正在尝试制作登录脚本。这是我到目前为止所拥有的，但是当我尝试使用有效用户登录时它会返回：

```
Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/user/public_html/dir/login.php:3) in /home/user/public_html/dir/login.php on line 6

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/user/public_html/dir/login.php:3) in /home/user/public_html/dir/login.php on line 6

Warning: Cannot modify header information - headers already sent by (output started at /home/user/public_html/dir/login.php:3) in /home/user/public_html/dir/login.php on line 31 
```

这是我的代码：

```
<?php
if(isset($_POST['login'])){
ob_start();
session_start();
$host="xxx";
$username_db="xxx"; 
$password_db="xxx";
$db_name="xxx";  
$tbl_name="xxx"; 

mysql_connect("$host", "$username_db", "$password_db")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$email=$_POST['email']; 
$password=$_POST['password']; 

$email = stripslashes($email);
$password = stripslashes($password);
$email = mysql_real_escape_string($email);
$password = mysql_real_escape_string($password);
$sql="SELECT * FROM $tbl_name WHERE username='$email' and password='$password'";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

if($count==1){
$_SESSION['username'] = $email;
$_SESSION['password'] = $password;
header("location:main.php");
}
else {
echo"<br><center><div class=\"alert alert-error\">
Wrong email or password!</div></center>";

}
ob_end_flush();
}
?>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Login</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      html, body {
        background-color: #eee;

      }
      body {
        padding-top: 40px; 
      }
      .container {
        width: 300px;
      }

      .container > .content {
        background-color: #fff;
        padding: 20px;
        margin: 0 -20px; 
        -webkit-border-radius: 10px 10px 10px 10px;
           -moz-border-radius: 10px 10px 10px 10px;
                border-radius: 10px 10px 10px 10px;
        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.15);
           -moz-box-shadow: 0 1px 2px rgba(0,0,0,.15);
                box-shadow: 0 1px 2px rgba(0,0,0,.15);
      }

      .login-form {
        margin-left: 65px;
      }

      legend {
        margin-right: -50px;
        font-weight: bold;
        color: #404040;
      }

    </style>

</head>
<body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">hi</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="register.php">Register</a></li>
              <li><a href="contact.php">Contact</a></li>
            </ul>

          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">
        <div class="content">
            <div class="row">
                <div class="login-form">
                    <h2>Login</h2>
                    <form method="post" action="">
                        <fieldset>
                            <div class="clearfix">
                                <input name="email" type="text" placeholder="Email">
                            </div>
                            <div class="clearfix">
                                <input name="password" type="password" placeholder="Password">
                            </div>
<button name="login" class="btn btn-primary" type="submit">Sign in</button><br>

                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div> <!-- /container -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:31:24.647

我看到您使用`ob_start()`的是不带参数的，因此您了解可以使用它来防止提前发送标头。但是，您似乎有点忽略了这一点：必须在发送任何页面内容之前调用它。在这种情况下，它应该在`<!DOCTYPE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:31:36.323

在开始将 HTML 输出到浏览器之前，您需要完成所有会话处理。基本上，您只需将所有 PHP 移动到代码的开头，然后在 HTML 输出内容中有条件地处理登录成功/失败消息。

您可能应该养成在脚本中预先完成大部分代码逻辑的习惯，然后在输出内容的脚本区域内只使用最少量的 PHP。

最终，随着您变得更有经验，您可能还会开始希望将脚本逻辑与输出完全分开（即完全放在不同的文件中）。随着时间的推移，大多数人发现这种方法（即应用程序逻辑和显示逻辑的分离）导致代码更容易维护。

# symfony - symfony 2 phpunit - 如何取消选中表单字段中的复选框

> ID：13074889
> 
> 赞同：5
> 
> 时间：2012-10-25T18:28:45.863
> 
> 标签：symfony, phpunit

这应该很容易，但我无法在任何地方找到答案。我正在使用带有 phpunit 的 Symfony 2 来测试我的代码。它很容易让 phpunit 在运行测试时勾选一个复选框：

```
$form['mycompanyname_companybundle_editsomethingtype[locked]']->tick(); 
```

但是我如何让它“取消选中”一个复选框？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T20:11:04.317

你可以使用[`Symfony\Component\DomCrawler\Field\ChoiceFormField::untick()`](https://github.com/symfony/symfony/blob/v2.1.2/src/Symfony/Component/DomCrawler/Field/ChoiceFormField.php#L104)它。在你的情况下，它会是

```
$form['mycompanyname_companybundle_editsomethingtype[locked]']->untick(); 
```

# gstreamer - gstreamer appsrc 网络上的视频流

> ID：13074894
> 
> 赞同：3
> 
> 时间：2012-10-25T18:29:11.837
> 
> 标签：gstreamer, xlib

我正在尝试使用 gstreamer appsrc 通过网络播放视频流。

我在这里找到了很好的例子。

[gstreamer appsrc 测试应用程序](https://stackoverflow.com/questions/8746719/gstreamer-appsrc-test-application)

[http://amarghosh.blogspot.kr/2012/01/gstreamer-appsrc-in-action.html](http://amarghosh.blogspot.kr/2012/01/gstreamer-appsrc-in-action.html)

使用上面的示例，我可以使用 Xlib 在 X Window 中播放视频。当管道设置为 PLAYING 状态时，会以某种方式发出“need-data”信号，并在 start_feed 回调函数中从视频文件读取的数据注入到 appsrc GstBuffer 并播放示例视频。

我正在尝试从网络而不是文件获取数据，所以我认为简单的回显服务器以与上述完全相同的方式读取视频文件，并在发生连接时将数据发送到客户端。客户端应该获取这些数据并放入appsrc。

我的问题是如何将流数据放入 appsrc 管道？有没有人给出任何建议或好的参考？

这是使用上述链接示例的工作示例代码。

```
// http://amarghosh.blogspot.kr/2012/01/gstreamer-appsrc-in-action.html
// http://www.cs.odu.edu/~cs476/Xlib/xlines.c
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <stdio.h>
#include <unistd.h> // sleep()
#include <stdbool.h>

#include <gst/gst.h>
#include <gst/app/gstappsrc.h>
#include <gst/app/gstappbuffer.h>
#include <gst/interfaces/xoverlay.h>

#define BUFF_SIZE (640*480*3)//(1024)
#define BORDER_WIDTH    2

#define DEBUG   printf

typedef unsigned int  uint32;
typedef unsigned char uint8;

typedef struct {
    GstPipeline *pipeline;
    GstAppSrc *src;
    GstElement *sink;
    GstElement *decoder;
    GstElement *ffmpeg;
    GstElement *videosink;
    GMainLoop *loop;
    guint sourceid;
    FILE *file;
} gst_app_t;

static gst_app_t gst_app;

static Window child_window = 0;
static Window window = 0;

static gboolean read_data(gst_app_t *app)
{
    GstBuffer *buffer;
    guint8 *ptr;
    gint size;
    GstFlowReturn ret;

    ptr = g_malloc(BUFF_SIZE);
    g_assert(ptr);

    size = fread(ptr, 1, BUFF_SIZE, app->file);

    if(size == 0){
    ret = gst_app_src_end_of_stream(app->src);
    DEBUG("eos returned %d at %d\n", ret, __LINE__);
    return FALSE;
    }

    buffer = gst_buffer_new();
    GST_BUFFER_MALLOCDATA(buffer) = ptr;
    GST_BUFFER_SIZE(buffer) = size;
    GST_BUFFER_DATA(buffer) = GST_BUFFER_MALLOCDATA(buffer);

    ret = gst_app_src_push_buffer(app->src, buffer);

    if(ret !=  GST_FLOW_OK){
        DEBUG("push buffer returned %d for %d bytes \n", ret, size);
        return FALSE;
    }

    if(size != BUFF_SIZE){
        ret = gst_app_src_end_of_stream(app->src);
        DEBUG("eos returned %d at %d\n", ret, __LINE__);
        return FALSE;
    }

    return TRUE;
}

static void start_feed (GstElement * pipeline, guint size, gst_app_t *app)
{
    if (app->sourceid == 0) {
        DEBUG ("start feeding\n");
        app->sourceid = g_idle_add ((GSourceFunc) read_data, app);
    }
}

static void stop_feed (GstElement * pipeline, gst_app_t *app)
{
    if (app->sourceid != 0) {
        DEBUG ("stop feeding\n");
        g_source_remove (app->sourceid);
        app->sourceid = 0;
    }
}

static void on_pad_added(GstElement *element, GstPad *pad)
{
    GstCaps *caps;
    GstStructure *str;
    gchar *name;
    GstPad *ffmpegsink;
    GstPadLinkReturn ret;

    DEBUG("pad added\n");

    caps = gst_pad_get_caps(pad);
    str = gst_caps_get_structure(caps, 0);

    g_assert(str);

    name = (gchar*)gst_structure_get_name(str);

    DEBUG("pad name %s\n", name);

    if(g_strrstr(name, "video")){

        ffmpegsink = gst_element_get_pad(gst_app.ffmpeg, "sink");
        g_assert(ffmpegsink);
        ret = gst_pad_link(pad, ffmpegsink);
        DEBUG("pad_link returned %d\n", ret);
        gst_object_unref(ffmpegsink);
    }
    gst_caps_unref(caps);
}

static gboolean bus_callback(GstBus *bus, GstMessage *message, gpointer *ptr)
{
    gst_app_t *app = (gst_app_t*)ptr;

    switch(GST_MESSAGE_TYPE(message))
    {
    case GST_MESSAGE_ELEMENT: {
        gst_x_overlay_set_window_handle (GST_X_OVERLAY (GST_MESSAGE_SRC(message)), child_window);
        }
        break;

    case GST_MESSAGE_ERROR:
        {
        gchar *debug;
        GError *err;

        gst_message_parse_error(message, &err, &debug);
        DEBUG("Error %s\n", err->message);
        g_error_free(err);
        g_free(debug);
        g_main_loop_quit(app->loop);
        }
        break;

    case GST_MESSAGE_WARNING:
        {
        gchar *debug;
        GError *err;
        gchar *name;

        gst_message_parse_warning(message, &err, &debug);
        DEBUG("Warning %s\nDebug %s\n", err->message, debug);

        name = GST_MESSAGE_SRC_NAME(message);

        DEBUG("Name of src %s\n", name ? name : "nil");
        g_error_free(err);
        g_free(debug);
        }
        break;

    case GST_MESSAGE_EOS:
        DEBUG("End of stream\n");
        g_main_loop_quit(app->loop);
        break;

    case GST_MESSAGE_STATE_CHANGED:
        break;

    default:
        DEBUG("got message %s\n", \
        gst_message_type_get_name (GST_MESSAGE_TYPE (message)));
        break;
    }

    return TRUE;
}

static gboolean terminate_playback (GstElement * loop)
{
    DEBUG ("Terminating playback\n");
    g_main_loop_quit ((GMainLoop *)loop);
    return FALSE;
}

int gstreamer_init(int argc, char *argv[])
{
    gst_app_t *app = &gst_app;

    GstBus *bus;
    GstStateChangeReturn state_ret;

    app->file = fopen(argv[1], "r");

    g_assert(app->file);

    /* initialization */
    gst_init((int)0, NULL);

    app->loop = g_main_loop_new(NULL, FALSE);

    /* create elements */
    app->pipeline = (GstPipeline *)gst_pipeline_new("my_pipeline");

    app->src = (GstAppSrc *)gst_element_factory_make("appsrc", "myappsrc");
    app->decoder = gst_element_factory_make("decodebin2", "mydecoder");
    app->ffmpeg = gst_element_factory_make("ffmpegcolorspace", "myffmpeg");
    app->videosink = gst_element_factory_make("autovideosink", "myvideosink");

    if (!app->videosink) {
        DEBUG ("output could not be found - check your install\n");
    }

    g_assert(app->src);
    g_assert(app->decoder);
    g_assert(app->ffmpeg);
    g_assert(app->videosink);

    bus = gst_pipeline_get_bus(GST_PIPELINE(app->pipeline));
    gst_bus_add_watch(bus, (GstBusFunc)bus_callback, app);
    gst_object_unref(bus);

    g_signal_connect(app->decoder, "pad-added",
                G_CALLBACK(on_pad_added), app->ffmpeg);

    //gst_app_src_set_emit_signals(app->src, true);
    g_signal_connect(app->src, "need-data", G_CALLBACK(start_feed), app);
    g_signal_connect(app->src, "enough-data", G_CALLBACK(stop_feed), app);

    gst_bin_add_many (GST_BIN (app->pipeline), (GstElement *)app->src,
                app->decoder, app->ffmpeg, app->videosink, NULL);

    /* link everything together */
    if (!gst_element_link((GstElement *)app->src, app->decoder)) {

        DEBUG ("Failed to link one or more elements!\n");
        return -1;
    }

    if(!gst_element_link(app->ffmpeg, app->videosink)){
        DEBUG("failed to link ffmpeg and videosink");
        return -1;
    }

    state_ret = gst_element_set_state((GstElement *)app->pipeline, GST_STATE_PLAYING);
    if (state_ret == GST_STATE_CHANGE_FAILURE) {

        DEBUG("Failed to start up pipeline!\n");
        return 1;
    }

    DEBUG("set state returned %d\n", state_ret);

    //g_timeout_add (15000, (GSourceFunc) terminate_playback, app->loop);

    g_main_loop_run(app->loop);

    state_ret = gst_element_set_state((GstElement *)app->pipeline, GST_STATE_NULL);
    DEBUG("set state null returned %d\n", state_ret);
    gst_object_unref(app->pipeline);

    return 1;
}

/* 
 * gst-launch filesrc location=test.avi ! decodebin2 ! ffmpegcolorspace ! autovideosink
 *
 * 1\. dependency library install
 *    $ sudo apt-get install gstreamer0.10-plugins-bad
 *    $ sudo apt-get install gstreamer0.10-ffmpeg
 *
 * 2\. compile
 *    $ gcc hello.c -o hello -lX11 `pkg-config --cflags --libs gstreamer-0.10 gstreamer-app-0.10` -lgstinterfaces-0.10
 *
 * 3\. how to run program 
 *    $ ./hello <video_file_name>
 *    $  GST_DEBUG=appsrc:5 ./hello ./hbo_dtc_sd.ts 
 */

int main(int argc, char *argv[])
{
    Display *disp;
    Window root;
    long fgcolor, bgcolor;

    GC gc;
    XGCValues gc_val;
    XEvent event;
    char *msg = "Hello, World!";
    int screen;

    disp = XOpenDisplay(NULL);
    if (disp == NULL) {
        fprintf(stderr, "Cannot open display\n");
        exit(1);
    }

    screen = DefaultScreen(disp);

    root = RootWindow(disp, screen);
    fgcolor = BlackPixel(disp, screen);
    bgcolor = WhitePixel(disp, screen);

    window = XCreateSimpleWindow(disp, root, 100, 100, 1000, 840, 1,
                    fgcolor, bgcolor);

    child_window = XCreateSimpleWindow(disp, window, 100, 100, 800, 600, 1,
                    fgcolor, bgcolor);

    gc_val.foreground = fgcolor;
    gc_val.background = bgcolor;
    gc = XCreateGC(disp, child_window, GCForeground|GCBackground, &gc_val);

    XSelectInput(disp, child_window, ExposureMask | KeyPressMask);

    g_warning("map xwindow");
    //XMapWindow(disp, window);
    XMapWindow(disp, window);
    XMapWindow(disp, child_window);
    XSync(disp, FALSE);

    //XDrawLine (disp, window, gc, 0, 0, 1000, 800); 
    //XDrawLine (disp, child_window, gc, 0, 0, 800, 600); 

    gstreamer_init(argc, argv);

    XDestroyWindow( disp, window );
    XDestroyWindow( disp, child_window );

    XCloseDisplay( disp );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:36:08.997

您将希望至少有一个其他线程（在每一端）来处理通过套接字（如 TCP 或 UDP，如果在本地网络上）的通信。这通常有一个阻塞调用来等待数据包。要发送数据，您可以形成一个 gstreamer tee 和队列，然后是一个 appsrc 来缓冲/发送数据到一个套接字。要接收，您可以将数据从套接字拉到缓冲区。请记住，操作系统的套接字缓冲区相对较小，如果您不能足够快地从中拉出数据包，或者推入一个太快，则会丢弃数据包。因此缓冲区。

在一个`NEED_DATA`信号上，您使用`pushBuffer()`. 在一个`ENOUGH_DATA`信号上，您可以继续缓冲或处理它，无论您的应用程序需要做什么。

# unity3d - 禁用 Microsoft PixelSense（又名 Surface）Surface Shell 超时

> ID：13074896
> 
> 赞同：0
> 
> 时间：2012-10-25T18:29:22.707
> 
> 标签：unity3d, timeout, pixelsense

我正在为用**Unity编写的****Microsoft PixelSense**编写游戏，通过[SurfaceToTUIO](https://github.com/JoeProgram/SurfaceToTUIO)桥和[unity3d-tuio](http://code.google.com/p/unity3d-tuio/) Unity 插件与表通信。

 **我目前正在尝试让游戏与 Microsoft PixelSense**启动器**很好地配合使用。我已经能够通过模仿 Surface Bing 应用程序让我的应用程序出现在启动器中 - 复制 C:\ProgramData\Microsoft\Surface\v2.0\Programs 中 XML 文件的链接并在适当的位置创建相应的 XML格式。

当我进入 Surface 模式时 - 无论是通过专用 Surface 用户帐户，还是通过管理员配置文件中的 Surface Shell，游戏都会**正确显示**在启动栏上，并带有我在 XML 中设置的自定义图标。游戏从酒吧正确启动，我可以毫无错误地玩**大约**两**分钟**。

那时，启动器会**关闭**我的游戏。通过一些研究，我了解到应用程序有**责任**[解雇 Launcher](http://msdn.microsoft.com/en-us/library/ff727753.aspx#dismiss)。

由于这是 Microsoft PixelSense SDK 的一部分，Unity 无法访问，因此我尝试了各种方法来解决这个问题：

*   我尝试在单应用程序模式下运行游戏。事实证明，还有一个不同的超时仍在等待**SignalApplicationLoadComplete**调用。
*   我尝试在[Registry中使用](http://technet.microsoft.com/en-us/library/gg680403.aspx)**CriticalProcessMonitoring Disable**和**ApplicationProcessMonitoring Disable**键。
*   我尝试将**LoadingScreenTimeout**和**SingleAppLoadingScreenTimeout** [注册表](http://technet.microsoft.com/en-us/library/gg680403.aspx)项设置为 0 - 低于其有效阈值。

我想要的是为我的用户提供进入和退出 Unity 游戏的最流畅的体验。目前我们必须从 Windows 桌面启动我们的游戏，这可能会让用户感到沮丧，因为 Windows 无法区分[手指触摸屏幕和手掌悬停在屏幕上方](http://social.msdn.microsoft.com/Forums/en-US/surfaceappdevelopment/thread/dd899d24-d750-415a-9a66-300eb1be6ac3/#782b8fc0-34eb-485d-9c9f-fc3b5e891a59)。

有没有人有解决方法，对我如何从 Unity 欺骗 SignalApplicationLoadingCall 有很好的理解，或者有什么可以尝试的建议？

谢谢！

**更新：**我发现了更多不起作用的东西：

*   我在 C:\Windows\Microsoft.NET\assembly\GAC_MSIL\Microsoft.Surface\v4.0_2.0.0.0__31bf3856ad364e35找到了**Microsoft.Surface DLL 。**我将它导入到我的 Unity 项目中，但收到了一个 System.TypeLoadException，似乎是 DLL 是用Unity 目前不支持的[.NET 4.0编译的。](http://www.microsoft.com/en-us/pixelsense/softwareplatform.aspx)
*   我一直找不到任何可以让我在不需要 DLL 的情况下与启动器通信的 **[COM 对象。](http://en.wikipedia.org/wiki/Component_Object_Model)**
*   [根据这篇文章](http://social.msdn.microsoft.com/Forums/en-US/surfaceappdevelopment/thread/0fd91813-e2d0-4cd2-8e8a-3717165de55d)，我不能使用**XNA 包装程序**，因为 System.Diagnostics.Process.Start 在 Surface 模式下不起作用。**

# xslt - 节点集上的 xslt 应用模板

> ID：13074901
> 
> 赞同：1
> 
> 时间：2012-10-25T18:29:39.797
> 
> 标签：xslt, xslt-1.0, node-set

我必须使用 XSL 1.0，并且我有一个包含结果树片段的 xslt 变量。我想将模板样式应用于该变量。

```
 <xsl:template match="item">
   <p>
     <xsl:apply-templates />
   </p>     
 </xsl:template>

 <xsl:template match="html_embed">
   <xsl:variable name="htmlContents">
     <item>hello ian</item>
     <item>how are you?</item>
   </xsl:variable>

   <xsl:choose>
     <xsl:when test="function-available('msxsl:node-set')">
       <xsl:apply-templates select="msxsl:node-set($htmlContents)/node()" /> 
     </xsl:when>
     <xsl:otherwise>
       <p>node set not available</p>
     </xsl:otherwise>
   </xsl:choose>

 </xsl:template> 
```

我正在使用节点集函数将树片段转换为节点集，但它要么不工作，要么找不到模板匹配，因为返回的只是一行文本，没有标记：

你好，你好吗？

关于如何转换项目节点的任何想法？

# c# - Fluent 界面构建不同的具体类型

> ID：13074906
> 
> 赞同：2
> 
> 时间：2012-10-25T18:29:59.920
> 
> 标签：c#, fluent, fluent-interface

我需要一些关于如何构建作为 Builder 的流利接口的建议，负责根据调用的方法返回不同的具体类型。

想象一下，我需要使用我的 ProductBuilder（流利地）创建以下类型之一：Product、ServiceProduct、PackagedProduct（都派生自 Product）。

我正在考虑使用这样的流利语法（非常欢迎其他建议）：

要创建产品：

```
var product = new ProductBuilder()
   .Create("Simple product")
   .WithPrice(12.5) 
```

创建 ServiceProduct

```
var product = new ProductBuilder()
   .Create("Service product")
   .WithPrice(12.5)
   .AsServiceProduct()
       .ServiceProductSpecificMethods...() 
```

和 PackagedProduct 调用 AsPackagedProduct() 而不是 AsServiceProduct() 等。你明白了。

我还没有找到显示这方面最佳实践的示例。只有最终构建返回相同类型的样本。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:45:26.473

我在这里看到两个选项。

如果有有限数量的产品是固定的，而不是为扩展而设计的，那么只需`Create`为每个产品创建一个方法：

```
var product = new ProductBuilder()
   .CreateSimple()
   .WithPrice(12.5);

var product = new ProductBuilder()
   .CreateService()
   .WithPrice(12.5)
   .ServiceProductSpecificMethods...(); 
```

如果您不想（或不能）`ProductBuilder`知道所有类型的产品，那么我会使用泛型：

```
public class Product {}
public class SimpleProduct : Product {}
public class ServiceProduct : Product {}

var product = new ProductBuilder<SimpleProduct>()
   .WithPrice(12.5); 
```

这是设计的起点：

```
public class Product
{
    public decimal Price { get; set; }
}
public class SimpleProduct : Product { }
public class ServiceProduct : Product
{
    public string Service { get; set; }
}

public class ProductBuilder<T> where T : Product, new()
{
    private List<Action<T>> actions = new List<Action<T>>();

    public T Build()
    {
        T product = new T();
        foreach (var action in actions)
        {
            action(product);
        }

        return product;
    }
    public void Configure(Action<T> action)
    {
        actions.Add(action);
    }
}

public static class ProductExtensions
{
    public static ProductBuilder<T> WithPrice<T>(this ProductBuilder<T> builder, decimal price)
        where T : Product
    {
        builder.Configure(product => product.Price = price);
        return builder;
    }

    public static ProductBuilder<T> WithService<T>(this ProductBuilder<T> builder, string service)
            where T : ServiceProduct
    {
        builder.Configure(product => product.Service = service);
        return builder;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:38:28.547

如果我理解正确，我会在这里使用泛型，这样我就可以编写如下内容：

```
var product = new ProductBuilder()
.Create<Serviceproduct>()
.WithPrice(12.5)
   .ServiceProductSpecificMethods...() 
```

您还可以在调用特定服务方法之前添加 Build 方法，以便它实际创建最终产品：

```
var product = new ProductBuilder()
.Create<Serviceproduct>()
.WithPrice(12.5)
.Build()
   .ServiceProductSpecificMethods...() 
```

# php - PHP 类范围：在包含文件中未看到的类

> ID：13074914
> 
> 赞同：0
> 
> 时间：2012-10-25T18:30:34.930
> 
> 标签：php

我有一堂课...

```
class myclass {}
$myclass = new myclass();
$myclass->frigin = 'awesome'; 
```

稍后在*另一个*PHP 文件中，我有一些包含...

```
include('hippie_deflectors.php'); 
```

但是，其中包含的 PHP 根本看不到`$myclass`。

让 PHP 服从的最简单方法是什么？

* * *

这个文件... `.com/[module]/requested_page.php`

...有两个包括从上到下过滤以下...

**包括套装 1**

* * *

`.com/system/header.php`

`.com/system/header_classes.php`[`$myclass`在这里定义]

**包括套装 2**

* * *

`.com/[module]/index_get.php`

`.com/system/template_1.php`

`.com/system/includes_js.php`

`.com/system/scripts/onload.js`[`$myclass`此处未定义]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:43:46.500

我意识到我的错误，希望其他人能从中吸取教训。虽然我遇到了范围问题（一个 PHP 文件包含另一个文件，然后只能通过将其作为参数传递给函数来访问一个类），但我最终意识到 JavaScript 文件是作为字符串输出的，而不是作为一个包括！这意味着 JavaScript 文件将使浏览器发出第二个请求，只有该文件会被 PHP 解析。

视觉上...

*   客户端请求 [脚本元素的字符串中的 JavaScript 文件输出]
*   客户端收到页面结果。
*   客户端请求脚本文件。
*   PHP 在***第二个/单独的请求***上解析的脚本文件。

值得庆幸的是，由于我将事物编程为高度模块化的，因此我能够声明该类，创建它的新副本，然后包含一个模块化 PHP 文件，该文件不包含整个类，而是我需要的更小但更通用的变量块.

这并不能解决单独但相关的问题，即类只能在 X 数量的包含中访问，然后您必须将它们作为参数传递给函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:45:33.607

你的问题有点理解。但这会起作用：

文件：File1.php

```
class myclass {}
$myclass->frigin = 'awesome';
include('hippie_deflectors.php'); 
```

文件：hippie_deflectors.php

```
include('different_file.php'); 
```

文件：不同的文件.php

```
var_dump($myclass); 
```

将打印：

```
object(stdClass)#1 (1) { ["frigin"]=> string(7) "awesome" } 
```

这是你的设置吗？

# asp.net - AJAX Toolkit 级联下拉列表数据库 - CS 可以，但 VB 失败

> ID：13074915
> 
> 赞同：0
> 
> 时间：2012-10-25T18:30:39.560
> 
> 标签：asp.net, database, drop-down-menu, cascading

CS 可以使用级联下拉列表，但 VB 中的同一站点不起作用。在 VB 中，最后一个下拉列表在回发时会丢失它的值，它采用前一个下拉列表的值。

这两个站点都在以下链接[站点](http://sdrv.ms/RYm7AK)。

两个站点具有相同版本的数据库。

我真的很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:34:19.753

第 92 行`Webservice.vb`：

```
CiudadLista.Add(New CascadingDropDownNameValue(CiudadNombre, MunicipioID)) 
```

# couchdb - 如何使用 Futon 并将 couchapp 推送到使用 vhost 的 CouchDB？

> ID：13074917
> 
> 赞同：5
> 
> 时间：2012-10-25T18:30:42.650
> 
> 标签：couchdb, couchapp, couchdb-futon

我有一个托管一个小型网站的 CouchDB 服务器。出于这个原因，我在 CouchDB 配置中设置了一个 vhost 部分，以便请求：

域名.com

将被“重写”为

domain.com/site/_design/app/_rewrite

...正如[这篇文章](http://blog.couchbase.com/what%E2%80%99s-new-apache-couchdb-011-%E2%80%94-part-one-nice-urls-rewrite-rules-and-virtual-hosts)中所解释的那样，正如我所愿，所以我可以保留“漂亮”的 URL。这很好用！但是，这样做之后，我无法在相同的主机名上访问 Futon。这并没有那么不方便，但我发现我什至不能再推我的沙发应用程序了。当我使用“在云中”的服务器时（请原谅行话），我没有其他主机名可以用来推送或访问管理内容。我能做些什么来解决这个问题吗？我尝试了几种重写规则，包括

“从到”： ”../../*”

但这不起作用（对“/_all_dbs”的请求最终在“site/_all_dbs”中......并且在“to”字符串中再添加一个 ../ 会导致 CouchApp 抱怨这是一个不安全的重写规则。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:23:32.930

在我`{"from": "db/*", "to": "../../../*"}`的重写中，我改为`secure_rewrites`在`false`Futon 界面的配置页面上的 httpd 部分下，以使其工作。

Futon 可以在下面访问`http://hostname/db/_utils`，我可以推送到`http://hostname/db/databasename`使用 CouchApp。除了一些小的被褥错误外，它似乎工作正常，但我承认我没有测试很长时间。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T22:02:26.370

能拿到ip吗？我知道用aws你可以。然后 couchapp push 。

# c++ - 如何在 Hasher 中使用非静态成员函数？

> ID：13074923
> 
> 赞同：1
> 
> 时间：2012-10-25T18:31:05.543
> 
> 标签：c++, hash, static-methods

我需要使用与默认值不同的哈希器建立一个哈希表，所以我写了如下内容：

```
class foo {
public:
...
private:
  struct myhasher {
    size_t operator() (myclass bar) { return hash_calculation bar; }
  }
  static size_t hash_calculation (myclass bar) {
    // do some calculation
  }
  hash_map<myclass, myhasher> myhashmap;
} 
```

有用。现在由于某种原因，我必须编写一个非静态成员函数来替换 hash_calculation，比如说，它需要一个类的非静态成员作为参数。然后整个事情失败了，因为我不能在嵌套结构中使用非静态方法。

这在某种程度上类似于另一个广泛讨论的问题：如何使用非静态函数进行比较或排序。参见例如： [在比较函数中使用非静态类成员](https://stackoverflow.com/questions/1731404/using-a-non-static-class-member-inside-a-comparison-function) 和 [C++ std 列表排序与自定义比较器，该比较器依赖于对象实例的成员变量](https://stackoverflow.com/questions/8372918/c-std-list-sort-with-custom-comparator-that-depends-on-an-member-variable-for)。他们都建立了一个函子而不是一个函数作为比较器。但是在我的情况下，这个技巧不起作用，因为我需要 hash_map 定义中的类名，而不是特定的结构对象。我应该怎么办？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:36:07.220

你不能。应该如何知道调用时应该使用`hash_map`哪个实例？`myhasher``myhaser::hash_calculation`

`hash_map`不是标准 C++ 库的一部分，甚至在 C++11 中也不是，所以它是一个自定义类，并且您没有包含有关它如何工作的信息。如果有办法让它使用某种构造函数参数，`myhasher`那么你很幸运。但听起来不像。

此外，当您可能打算传入 const 引用时，您正在使用按值传递。按值传递可能会非常缓慢且效率低下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T19:06:29.040

标准的“hash-map”，即，`std::unordered_map<K, V, H, E, A>`将类型的散列对象`H`作为构造函数参数。此对象的副本用于通过函数调用运算符确定对象的哈希值。这种方式可以提供一些上下文。显然，您已经在使用非静态函数调用运算符，但您选择委托给静态成员。

# powershell - 如何在一行上为用户输入日期和时间

> ID：13074924
> 
> 赞同：1
> 
> 时间：2012-10-25T18:31:08.627
> 
> 标签：powershell, powershell-2.0

如何将以下所有内容放在一行中，以便用户能够立即输入？

因此，与其`Read-Host`每次他们想输入内容时都会弹出一个 - 它会弹出一次并说明您要输入的日期为..

所以 - “请输入完整的日期和时间 - 即 2012 年 10 月 25 日 9:00”

另外-如果有人输入了一个奇怪的字符，我该如何让它出错？

```
$Day = $(Read-Host "Enter day of month")
if ($Day -eq ''){$Day = Get-Date -format dd}

$Month = $(Read-Host "Enter Month of Year")
if ($Month -eq ""){$Month = Get-Date -format MM}

$Year = $(Read-Host "Enter Year")
if ($Year -eq "") {$Year = Get-Date -format yy}

$Hour = $(Read-Host "Enter Hour")
if ($Hour -eq "") {$Hour = Get-Date -Format HH}

$Minute = $(Read-Host "Enter Minute")
if ($Minute -eq "") {$Minute = Get-Date -Format mm}

$Second = $(Read-Host "Enter Hour")
if ($Second -eq "") {$Second = Get-Date -Format ss} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:53:29.087

你可以这样做：

```
do
{
    $date= read-host "Please enter date & time (i.e.: '25/12/2012 09:00', '25 oct 2012 9:00'; date alone set time to 00:00):"

    $date = $date -as [datetime]

    if (!$date) {
        "Not A valid date and time"
    }
} while ($date -isnot [datetime])

$date 
```

# gwt - 如何让浏览器停止缓存 GWT nocache.js

> ID：13074926
> 
> 赞同：10
> 
> 时间：2012-10-25T18:31:12.553
> 
> 标签：gwt, browser-cache, lighttpd

我正在使用 GWT 开发一个 Web 应用程序，并且`app.nocache.js`在浏览器中缓存文件时发现了一个疯狂的问题，即使 Web 服务器发送了文件的新副本！

我正在使用 Eclipse 编译应用程序，该应用程序在开发模式下工作。为了测试生产模式，我有一个虚拟机 (Oracle VirtualBox)，在我的主机 (Windows 7) 上运行 Ubuntu 来宾操作系统。我在虚拟机中运行 lighttpd 网络服务器。虚拟机正在共享我项目的 war 目录，而 Web 服务器正在为该目录提供服务。

我使用 Chrome 作为浏览器，但同样的事情发生在 Firefox 中。

这是场景：

*   该应用程序的网页是空白的。根据 Chrome 的“检查元素”工具，这是因为它正在尝试 fetch `6E89D5C912DD8F3F806083C8AA626B83.cache.html`，它不存在（`404 not found`）。
*   我检查了war目录，果然，那个文件不存在。
*   `app.nocache.js`浏览器上的已从**Web**服务器重新加载（200 OK），因为服务器上的文件比浏览器缓存更新。我验证了服务器返回的新文件的文件大小和时间戳是正确的。（这是 Chrome 报告的有关服务器 HTTP 响应的信息）
*   但是，如果我`app.nocache.js`在浏览器上打开，javascript 指的是`6E89D5C912DD8F3F806083C8AA626B83.cache.html`!!! 也就是说，即使网络服务器发送了一个新`app.nocache.js`的 ，浏览器似乎也忽略了它并继续使用它的缓存副本！

*   在 Eclipse 中转到 Google->GWT 编译。重新编译整个东西。

*   在 war 目录中验证是否已`app.nocache.js`被覆盖并具有新的时间戳。
*   从 Chrome 重新加载页面并再次验证服务器是否向`app.nocache.js`.
*   浏览器再次尝试加载`6E89D5C912DD8F3F806083C8AA626B83.cache.html`并失败。浏览器仍在使用旧的缓存副本`app.nocache.js`。
*   在 war 目录中绝对确定没有任何内容`6E89D5C912DD8F3F806083C8AA626B83.cache.html`（通过 find 和 grep）

出了什么问题？为什么`nocache.js`即使服务器正在向它发送新副本，浏览器也会缓存这个文件？

* * *

这是在浏览器中单击重新加载时 HTTP 请求/响应标头的副本。在此跟踪中，自上次 GET 以来尚未重新编译服务器内容（但请注意，nocache.js 的缓存版本仍然错误！）：

```
Request URL:http://192.168.2.4/xbts_ui/xbts_ui.nocache.js
Request Method:GET
Status Code:304 Not Modified
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Host:192.168.2.4
If-Modified-Since:Thu, 25 Oct 2012 17:55:26 GMT
If-None-Match:"2881105249"
Referer:http://192.168.2.4/XBTS_ui.html
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4
Response Headersview source
Accept-Ranges:bytes
Content-Type:text/javascript
Date:Thu, 25 Oct 2012 20:27:55 GMT
ETag:"2881105249"
Last-Modified:Thu, 25 Oct 2012 17:55:26 GMT
Server:lighttpd/1.4.31 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T07:02:50.470

避免浏览器缓存的最佳方法是将过期时间设置为现在并添加 max-age=0 和 must-revalidate 控件。

这是我与 apache-httpd 一起使用的配置

```
ExpiresActive on
<LocationMatch "nocache">
   ExpiresDefault "now"
   Header set Cache-Control "public, max-age=0, must-revalidate"
</LocationMatch>
<LocationMatch "\.cache\.">
   ExpiresDefault "now plus 1 year"
</LocationMatch> 
```

您对 lighthttpd 的配置应该是

```
server.modules = (
    "mod_expire",
    "mod_setenv",
)
...
$HTTP["url"] =~ "\.nocache\." {
  setenv.add-response-header = ( "Cache-Control" => "public, max-age=0, must-revalidate" )
  expire.url = ( "" => "access plus 0 days" )
}

$HTTP["url"] =~ "\.cache\." {
  expire.url = ( "" => "access plus 1 years" )
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-13T10:17:23.643

我们有一个类似的问题。我们发现 nocache.js 的时间戳没有用 gwt compile 更新，所以必须在构建时触摸文件。然后我们还应用了来自@Manolo Carrasco Moñino 的修复程序。我写了一篇关于这个问题的博客。[http://programtalk.com/java/gwt-nocachejs-cached-by-browser/](http://programtalk.com/java/gwt-nocachejs-cached-by-browser/)

正如评论所指出的，我们使用的是 GWT 2.7 版。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-15T16:34:16.693

有两个直接的解决方案（第二个是第一个的修改版本）

1) 将引用 *.nocache.js 的 *.html 文件重命名为 MyProject.html 到 MyProject.jsp 现在在 MyProject.html 中搜索 *.nocache.js 脚本的位置

```
<script language="javascript" src="MyProject/MyProject.nocache.js"></script> 
```

添加一个动态变量作为 JS 文件的参数，这将确保每次都从服务器返回实际内容。以下是示例

```
<script language="javascript" src="MyProject/MyProject.nocache.jsp?dummyParam=<%= "" + new java.util.Date().getTime() %>"></script> 
```

说明： dummyParam 将没有用，但会得到我们想要的结果，即会返回 200 代码而不是 304

注意：如果您将使用此技术，那么您需要确保指向正确的 jsp 文件以加载您的应用程序（在此更改之前，您使用 HTML 文件加载您的应用程序）。

2）如果您不想使用 JSP 解决方案并想坚持使用您的 html 文件，那么您将需要 java 脚本在加载 nocache 文件时在客户端动态添加唯一参数值。鉴于上述解决方案，我假设现在对您来说应该没什么大不了的。

我已经成功地使用了第一种技术，希望这会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T23:53:17.997

> *   浏览器上的 app.nocache.js 已从 Web 服务器重新加载（200 OK），因为服务器上的文件比浏览器缓存更新。我验证了服务器返回的新文件的文件大小和时间戳是正确的。（这是 Chrome 报告的有关服务器 HTTP 响应的信息）

我不会依赖这个。我在 Chrome 的开发工具中看到了一些奇怪的行为，其中网络选项卡与缓存相结合（至少，它对我来说不是 100% 透明的）。如有疑问，我通常仍会咨询 Firebug。

所以可能 Chrome 仍然使用旧版本。它可能很久以前就决定永远不必再次重新加载资源。清除缓存应该可以解决这个问题。然后确保在重新加载页面之前设置正确的缓存标头，请参阅[不同类型资源的理想 HTTP 缓存控制标头](https://stackoverflow.com/questions/2970938/ideal-http-cache-control-headers-for-different-types-of-resources)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-05T03:24:18.877

以认知模式打开页面只是为了摆脱缓存问题并解锁自己。

您需要按照其他评论中的说明配置缓存时间。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-04T00:13:59.693

在通过 Apache 阻止缓存失败后，我创建了一个 bash 脚本，root 在我的 Linux Tomcat 服务器上的 cron 作业中每分钟运行一次。

```
#!/bin/bash
#
# Touches GWT nocache.js files in the Tomcat web app directory to prevent caching.
# Execute this script every minute in a root cron job.
#
cd /var/lib/tomcat7/webapps
find . -name '*nocache.js' | while read file; do
    logger "Touching file '$file'"
    touch "$file"
done 
```

# php - cloneNode + appendChild + insertBefore dom xml php

> ID：13074927
> 
> 赞同：0
> 
> 时间：2012-10-25T18:31:14.233
> 
> 标签：php, xml, dom

我有一个 xml，我将克隆父亲并留在克隆节点下。更多给出这个错误。我想知道如何

致命错误：在第 32 行的 C:\xampp\htdocs\xml2\cloneNew.php 中的非对象上调用成员函数 insertBefore()

```
$xmla = <<<XML
<?xml version="1.0" ?>
<library>
  <book isbn="1001" pubdate="1943-01-01">
    <title><![CDATA[The Fountainhead]]></title>
    <author>Ayn Rand</author>
    <price>300</price>
  </book>
  <book isbn="1002" pubdate="1954-01-01">
    <title><![CDATA[The Lord of the Rings]]></title>
    <author>J.R.R.Tolkein</author>
    <price>500</price>
  </book>
  <book isbn="1006" pubdate="1982-01-01">
    <title><![CDATA[The Dark - Tower San]]></title>
    <author>Stephen King</author>
    <price>200</price>
  </book>
</library>
XML;

$xmlb = <<<XML
<?xml version="1.0" ?>
<library>
  <book isbn="1004" pubdate="1943-01-01">
    <title><![CDATA[The Fountainhead]]></title>
    <author>Ayn Rand</author>
    <price>300</price>
  </book>
</library>
XML;
$dom_01 = new DOMDocument();
$dom_01->loadXML($xmla);
$library_01 = $dom_01->documentElement;

$dom_02 = new DOMDocument();
$dom_02->loadXML($xmlb);
$library_02 = $dom_02->documentElement;

$xpath = new DOMXPath($dom_02);
$result = $xpath->query('/library/book[translate(@pubdate,"-","")>translate("1980-01-01","-","")]');

$library_02 = $library_02->cloneNode(true);
$newElement = $library_01->appendChild($result->item(0));
$library_01->parentNode->insertBefore($newElement, $result->item(0));

header("Content-type: text/xml");
echo $dom->saveXML();

Result:

$xmla = <<<XML
<?xml version="1.0" ?>
<library>
  <book isbn="1001" pubdate="1943-01-01">
    <title><![CDATA[The Fountainhead]]></title>
    <author>Ayn Rand</author>
    <price>300</price>
  </book>
  <book isbn="1002" pubdate="1954-01-01">
    <title><![CDATA[The Lord of the Rings]]></title>
    <author>J.R.R.Tolkein</author>
    <price>500</price>
  </book>
  <book isbn="1004" pubdate="1943-01-01">
    <title><![CDATA[The Fountainhead]]></title>
    <author>Ayn Rand</author>
    <price>300</price>
  </book>
  <book isbn="1006" pubdate="1982-01-01">
    <title><![CDATA[The Dark - Tower San]]></title>
    <author>Stephen King</author>
    <price>200</price>
  </book>
</library>
XML; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:37:33.243

您正在尝试获取不`parentNode`存在`documentElement`这样的节点。

此外，如果您想将一个文档中的节点放入另一个文档[`DOMDocument.importNode`](http://php.net/manual/en/domdocument.importnode.php)中，而不是使用 cloneNode。

# pdf - 在 J2ME 中将 PDF 文件转换为一组 PNG 图像

> ID：13074928
> 
> 赞同：1
> 
> 时间：2012-10-25T18:31:14.930
> 
> 标签：pdf, java-me, png

我希望将 PDF 文件转换为一组 PNG 图像。我遇到了大量的 Java 库，但没有一个与 J2ME 兼容。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T12:02:10.923

由于文件末尾的外部参照表，要正确打开[`PDF`](http://en.wikipedia.org/wiki/Portable_Document_Format)库必须使用某种形式。[`Random Access File`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html)这种文件连接在 Java ME 中不可用。

Java ME 中的库可以将 PDF 完全加载到内存中，这高度依赖于文件大小和可用的手机内存。

您最好创建一个 Web 服务来接收您的 PDF 并从中返回 PNG 图像。

# cluster-analysis - 识别 SOM（自组织图）中的集群

> ID：13074930
> 
> 赞同：11
> 
> 时间：2012-10-25T18:31:23.873
> 
> 标签：cluster-analysis, som

在 SOM 中收集和组织数据后，如何识别集群？

（项目使用许多特征进行聚合和聚类 - 超过 10 个）

具体来说，我想找到集群的“中心” - 因此给我“中心”节点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T15:11:01.430

您可以使用相对较小的地图并将每个节点视为一个集群，但这远非最佳。如果您想应用自动集群检测方法，您绝对应该阅读

[自组织图的聚类](http://lib.tkk.fi/Diss/2002/isbn951226093X/article4.pdf)

并搜索类似的参考书目。

您还可以使用更复杂的 SOM 算法版本（多层次、自增长等）。

无论如何，请记住，找到“正确”数量的集群的问题没有有限的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T07:36:07.100

据我所知，SOM 主要是一种数据驱动的降**维**和**数据压缩**方法。所以它不会为你*聚集*数据；它实际上可能倾向于在投影中*散布*簇（即将它们分成多个单元格）。

但是，它可能适用于*某些*数据集：

*   仅在 SOM 节点上工作（由分配给它们的元素数量加权），而不是处理完整的数据集，这应该明显更小
*   与其在原始空间工作，不如在 SOM 所代表的低维空间工作

*然后对转换*后的数据运行常规聚类算法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-18T10:55:55.000

虽然一个老问题我遇到了同样的问题，并且我已经成功地实现[了 Estimating the Number of Clusters in Multivariate Data by Self-Organizing Maps](http://www.dee.ufrn.br/~alfredo/citacao/costa_and_netto_IJNS99_8pgs.pdf)，所以我想我会分享。

链接算法使用 U 矩阵突出显示各个集群的边界，然后使用称为分水岭的图像处理算法来识别组件。为了使其正常工作，u 矩阵中的区域需要在量化的分辨率范围内是凹的（当转换为二进制图像时，只会导致使用填充来识别区域）。

# java - 知道部分名称时的InputStream？（安卓）

> ID：13074934
> 
> 赞同：3
> 
> 时间：2012-10-25T18:31:28.517
> 
> 标签：java, android, file, io, inputstream

我要读取一个名称部分已知的文件。假设我有几个文件，如下所示：

*   apple_5_34.jpg
*   橙色_3_67.bmp
*   香蕉_1_13.gif

当我只知道“apple”、“orange”或“banana”这些词时，我想获得这些文件的 InputStream。

任何建议将不胜感激，并提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:37:26.560

调用`listFiles()`目录以获取 File 数组，循环遍历它，检查是否`File[i].getName().toLowerCase().startsWith("banana")`以及是否存在，获取`InputStream`for `File[i]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:58:10.797

您有 2 个选项：

在所有文件夹内容上循环运行并检查`startsWith`上面定义的所有 3 个名称的大小写。

或者`regex`像这样运行：

```
[apple|banana|orange]+([\d\D]+) 
```

或者

```
/\b[apple|banana|orange][^\b]+\b/g 
```

代码片段

```
 InputStream in = null;

if(File[i].getName().matches("[apple|banana|orange]+([\d\D]+)")){
 in = new FileInputStream(File[i]);
} 
```

# .net - 我可以从 SqlDataAdapter 获取 SqlConnection 吗？

> ID：13074935
> 
> 赞同：2
> 
> 时间：2012-10-25T18:31:29.097
> 
> 标签：.net, ado.net, sqldataadapter

有没有办法`SqlConnection`从 a中获取`SqlDataAdapter`？

我曾期望找到一处`SqlDataAdapter.Connection`房产。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:37:21.997

查看`SelectCommand`您感兴趣的命令或任何命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T18:39:32.647

您可以从相关的 SqlCommand 中获取。

根据设置的哪一个：

```
 adapter.SelectCommand.Connection;
        adapter.InsertCommand.Connection;
        adapter.UpdateCommand.Connection;
        adapter.DeleteCommand.Connection; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T18:37:39.730

`SqlDataAdapter`有属性`SelectCommand`（类型`SqlCommand`）和`SelectCommand`有属性`Connection`（类型`SqlConnection`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T18:38:15.460

用这个：

```
var da = new SqlDataAdapter();
....
string connectionString = da.SelectCommand.Connection.ConnectionString 
```

# version-control - Clear Case Remote Client 中的更改触发器

> ID：13074936
> 
> 赞同：1
> 
> 时间：2012-10-25T18:31:30.113
> 
> 标签：version-control, clearcase

在`Clear Case Remote Client`中，我们使用基于 VOB 选择规则创建新的 VOB。我检查了几个文件，但是`when trying to checkin`，我收到以下错误 -

> CRVAP0087E CCRC 命令“签入”失败：
> 
> /bin/sh：/vob/cspecs/triggers/scripts/checkin.sh：没有这样的文件或目录 ClearCase CM 服务器：警告：触发器“ **checkin_SomeOtherBranch** ”拒绝让签入继续。

请注意，根据我的 vob 选择规则，远程客户端应该触发**checkin_MyBranch**进行签入。

根据[这篇 SO 帖子，我们可以使用](https://stackoverflow.com/questions/11890372/how-to-move-location-of-triggers-script-in-clearcase)**mktrtype**重新定义现有触发器，因为**CCRC**中没有命令行。无法尝试此命令来解决我的问题。

你有没有遇到过这种情况，我不太清楚CCRC中触发的目的是什么。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:56:37.110

这将是 CCRC 服务器端的最佳调试（它可以完全访问所有基本的 ClearCase 命令，如`mktrtype`），例如用于[限制`delete`命令](http://www-01.ibm.com/support/docview.wss?uid=swg21146314)的触发器示例。
您将无法从客户端修改它（即从 CCRC Web 视图）

但是，请检查 CCRC 服务器上的路径`/vob/cspecs/triggers/scripts/checkin.sh`是否存在（并且`cspecs`安装了 vob）。不过它应该可用，否则您也会收到有关“交互式会话”的错误消息（请参阅“[非交互式触发器失败，并发出关于使用 CCRC 或 CCWeb 的交互性的警告](http://www-01.ibm.com/support/docview.wss?uid=swg21266044)”）
这看起来像一个自定义触发器，放置在 ClearCase 上服务器端。我不知道它的目的是什么。

# xml - Powershell 添加内容截断输出

> ID：13074942
> 
> 赞同：2
> 
> 时间：2012-10-25T18:31:41.730
> 
> 标签：xml, powershell, truncation, output

我在 PowerShell 脚本中使用 Add-Content cmdlet 将 foreach 循环中的匹配项写入单独的文本文件。为此，我使用以下代码：

```
Add-Content -Path $varListNotFound $match 
```

`$varListNotFound`包含文件名和路径，而是`$match`foreach 循环中与我的项目范围匹配的变量。

我不确定它是否有区别，但我匹配的匹配项是从 XML 文档中提取的。

在输出文本文件中，在`<name></name>`我的 XML 文件的节点中找到的匹配项会正确输出，除非名称很长。当名称太长时，它会将名称截断为 76 个字符并在其后添加三个句点。这导致我正在使用清除未使用项目的这行代码出现问题：

`$xml.rhpml.variables.variable | ? { $varRemove -contains $_.name } | % {$xml.rhpml.variables.RemoveChild($_)}`

我已添加到我的脚本中，以便可以从截断末尾删除省略号，但不会从 XML 文档中删除截断的名称。

有没有办法延长 Add-Content 的长度？或者有没有办法让上述 XML 代码不排除截断的名称？

我尝试更改`$varRemove -contains $_.name`为`$varRemove -like$_.name`，但它没有从 XML 中删除节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:39:16.020

尝试使用 Out-File cmdlet 而不是 Add-Content，并指定 Append 和 Width 属性。

# scala - Gradle 在另一个子项目中使用的子项目的传递依赖项

> ID：13074944
> 
> 赞同：0
> 
> 时间：2012-10-25T18:31:48.513
> 
> 标签：scala, gradle

我有以下构建结构：

```
rootProject
    |--> subProjectA
        |--> dependencies(someDependantJar-1.0.jar)
    |
    |--> subProjectB
        |--> dependencies(subProjectA) 
```

在**subProjectB**中，我对 Scala 有以下声明，因为我的 Scala 依赖于来自**subProjectA**的外部 JAR ，并且它需要首先编译，因为我的 Java 编译依赖于我的 scala 代码（而不是相反）：

```
apply plugin: 'scala'

compileScala.taskDependencies.values = compileScala.taskDependencies.values - 'compileJava'
compileJava.dependsOn compileScala

sourceSets {
    main {
        scala {
            srcDir 'src/main/java'
        }
    }
} 
```

当我运行时：

```
subProjectB:compileScala 
```

**我遇到了subProjectB**的编译问题，没有从**subProjectA**中找到 someDependantJar-1.0.jar 中的类。

当我运行时：

```
println '___ dependencies ________________________________________________'
configurations.compile.dependencies.each { dep -> println dep.name }
println '__________________________________________________________________' 
```

我得到以下依赖项列表：

```
 ___ dependencies ________________________________________________
    commons-lang
    [omit for brevity]
    subProjectA
    __________________________________________________________________ 
```

所以我没有看到 someDependantJar-1.0.jar 并且希望有人可以阐明这个问题，所以我不必在 subProjectA 和 subProjectB 中定义传递依赖项（重复）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:27:14.673

您尚未在 subProjectB 中定义编译依赖项。不确定我是否正确设置了您的设置，我认为您需要将依赖项添加到 someDependantJar？您尝试在 projectA 上的 projectB 中添加依赖项

```
configurations{
    compile ":someDependentJar:1.0"
} 
```

干杯，勒内

# php - PHP设置选择HTML元素的默认值

> ID：13074954
> 
> 赞同：0
> 
> 时间：2012-10-25T18:32:31.213
> 
> 标签：php, html

我有以下代码：

```
<td>
    <select class="versionSelect">
       <option value="5" <?php if($item->version === "5") echo "selected='selected'"; ?>>5</option>
       <option value="6" <?php if($item->version === "6") echo "selected='selected'"; ?>>6</option>
       <option value="7" <?php if($item->version === "7") echo "selected='selected'"; ?>>7</option>
    </select>
                    </td> 
```

生成的 HTML 是这样的：

```
 <select class="versionSelect">
     <option value="5">5</option>
     <option selected="selected" value="6">6</option>
     <option value="7">7</option>
 </select> 
```

然而当页面加载时，选择元素仍然是 5。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:34:19.173

有时只是刷新不起作用，必须离开页面并返回，在某些浏览器中出现奇怪的选择行为

# c# - c# 将数组中的按钮设置为启用 true

> ID：13074962
> 
> 赞同：0
> 
> 时间：2012-10-25T18:33:12.047
> 
> 标签：c#, arrays, winforms, visual-studio-2010, button

我的程序包含 3 个使用 WinForms 创建的静态按钮：button1、button2 和 button3。按钮 2 和 3 设置为`enabled=False`。我想要做的是通过单击按钮 1 依次启用这 2 个按钮，方法是将它们放在一个数组中。到目前为止，这是我的代码，但不起作用。谁能看到我做错了什么？

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        Button[] btns = new Button[2];
        //Button[] btns = { button2}
        public Form1()
        {
            InitializeComponent();
            Button[] btns = { button2, button3};
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            button2.Enabled = false;
            button3.Enabled = false;

        }

        private void button1_Click(object sender, EventArgs e)
        {
            for (int i = 1; i < 2; i++)
            {
               // btns[i] = new Button();
               //btns[i].Enabled = true;

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:37:53.910

问题中代码中的主要问题在这里：

```
public Form1()
{
    InitializeComponent();
    Button[] btns = { button2, button3};
} 
```

问题是在`Form1`构造函数内部，`btns`是一个局部变量。您的代码清楚地假定您指的是同名的成员变量。

因此，您初始化局部变量，然后它立即消失在范围之外。在其余代码中，您引用`btns`尚未初始化的成员变量。

通过初始化该成员变量来解决问题。你可以这样做：

```
public partial class Form1 : Form
{
    private Button[] btns;

    public Form1()
    {
        InitializeComponent();
        btns = new Button[] { button2, button3 };
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        foreach (var btn in btns)
        {
            btn.Enabled = false;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        foreach (var btn in btns)
        {
            if (!btn.Enabled)
            {
                btn.Enabled = true;
                return;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T18:36:17.487

默认情况下，索引是从 0 开始的，而不是从 1 开始的。这应该有效：

```
private void button1_Click(object sender, EventArgs e)
{
    for (int i = 0; i < 2; i++)
    {
       btns[i].Enabled = true;
    } 
} 
```

或使用`foreach`：

```
private void button1_Click(object sender, EventArgs e)
{
    foreach(Button btn in btns)
    {
       btn.Enabled = true;
    } 
} 
```

您的数组初始化也应该是：

```
Button[] btns = new [] { button2, button3}; 
```

# php - json_encode 不编码长字符串

> ID：13074969
> 
> 赞同：4
> 
> 时间：2012-10-25T18:33:40.953
> 
> 标签：php, mysql, json, pdo

在我的脚本中 json_enocode 是编码字符串还是可能有其他问题？

首先让我展示一下我的配置和代码中的所有内容

表结构

```
CREATE TABLE `dc_songs` (
 `songs_id` int(11) NOT NULL AUTO_INCREMENT,
 `username` varchar(50) NOT NULL,
 `song_name` varchar(2000) NOT NULL,
 `lyrics` text NOT NULL,
 `created_time` datetime NOT NULL,
 `is_deleted` tinyint(4) NOT NULL,
 `delete_reason` text NOT NULL,
 PRIMARY KEY (`songs_id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 
```

这是我在给定表的一行中更新的字符串

```
UPDATE `dc_songs` SET `lyrics` = 'Your account privacy is very important to us. You are like our family member. You can manage all your content via privacy settings. Content with privacy settings public visible to every user of this web site. You must read how content will be displayed according to your privacy in Help Section. 2.Safety

We do our best keep this web site safe but this not always depend on us, for that you will need to follow this safety Rules.

    You will not post content that is copyrighted or Unauthorized
    You will not use someone’s account
    You will not irritate users in anyways.
    You will not upload content like virus or spam.
    You will not share content that can hate someone, threatening, or pornographic.
    You will not do act that can affect this web site.
    You must provide all your original details.
    You will not use, download or share someone’s content like personal information, photographs, videos or any other that is not yours.
    You will not force user to do act that make our samaj down.
    You will not force user to fight against your enemy.
    You will not encourage people to do violence.
    You will not use this web site to do anything unlawful, misleading, malicious, or discriminatory. ' WHERE `dc_songs`.`songs_id` = 2; 
```

我正在使用的查询

```
$query = "SELECT songs_id,lyrics,s.username,song_name,p.fullname
            FROM dc_songs s
            LEFT JOIN profile p ON p.username=s.username
            ORDER by songs_id DESC";
        $r=$db->run($query); 
```

编码 $ri 后得到这个输出

**[{"songs_id":"2","lyrics":null,"username":"bhavik","song_name":"some name 1","fullname":"Bhavik Thakor Garasiya"}]**

**更新 ：**

print_r($r) 的输出；

```
Array ( [0] => Array ( [songs_id] => 2 [lyrics] => Your account privacy is very important to us. You are like our family member. You can manage all your content via privacy settings. Content with privacy settings public visible to every user of this web site. You must read how content will be displayed according to your privacy in Help Section. 2.Safety We do our best keep this web site safe but this not always depend on us, for that you will need to follow this safety Rules. You will not post content that is copyrighted or Unauthorized You will not use someone’s account You will not irritate users in anyways. You will not upload content like virus or spam. You will not share content that can hate someone, threatening, or pornographic. You will not do act that can affect this web site. You must provide all your original details. You will not use, download or share someone’s content like personal information, photographs, videos or any other that is not yours. You will not force user to do act that make our samaj down. You will not force user to fight against your enemy. You will not encourage people to do violence. You will not use this web site to do anything unlawful, misleading, malicious, or discriminatory. [username] => bhavik [song_name] => some name 1 [fullname] => Bhavik Thakor Garasiya ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:58:36.837

# silverlight - 如何在 LightSwitch 2012 项目中使用这个主题

> ID：13074972
> 
> 赞同：2
> 
> 时间：2012-10-25T18:33:50.423
> 
> 标签：silverlight, themes, visual-studio-lightswitch

我刚刚找到了这个主题[http://timheuer.com/blog/archive/2010/09/09/silverlight-jetpack-theme-released.aspx](http://timheuer.com/blog/archive/2010/09/09/silverlight-jetpack-theme-released.aspx)你可以在这个包中下载[http://www.microsoft.com/en -us/download/details.aspx?id=14590](http://www.microsoft.com/en-us/download/details.aspx?id=14590)。

但是，VSIX 插件文件与 VS 2012 不兼容，我不知道如何在我的项目中使用原始 XAML 文件。

希望任何人都可以提供帮助，我可以在我的项目中使用这个！

最好的问候，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:11:11.497

不幸的是，在 LightSwitch 中*使用*Silverlight 主题并不容易。

我一直想创建一些新的 LightSwitch 主题以添加到我[的 LightSwitch 扩展的 Luminous Themes 中](http://visualstudiogallery.msdn.microsoft.com/10bc78be-f465-4b38-9b61-d66aa0b137e4)，但我只是没有时间。

调整可用的 Silverlight 主题以在 LightSwitch 中使用是我*的待办事项*。我的主题免费提供给社区。

与您想要的主题相似的主题可作为[LightSwitch Extras](http://www.lightswitchextras.com/)的付费产品获得。

# javascript - 如何使用 JavaScript 从 HTML 表格的单元格中获取值

> ID：13074973
> 
> 赞同：1
> 
> 时间：2012-10-25T18:34:02.887
> 
> 标签：javascript, php, html, html-table, cell

我正在尝试从 HTML 表中获取单元格值，以便可以通过调用 PHP 将它们保存到 MySQL 表中。我想使用 JavaScript 而不是 jQuery。

我根据 MySQL 表的 ID 字段给每个 TR 一个不同的 ID。此外，每个 TD 输入单元格都有一个基于 MySQL 表 ID 字段的唯一 ID。不确定我是否需要所有这些，但我使用了它们。

如何获取单元格的值，以便可以将其传递给 PHP 程序（我知道如何编写这个 PHP 代码）以将数据保存到 MySQL 中？我下面的 JavaScript 代码获取了“innerHTML”，但我需要获取单元格值。

例如，如果我有 3 行来自 MySQL 表的数据，字段 id 和 amount，值如下，我如何获取“3”和“1.99”？：

```
id    amount
-------------
1     100.00
2     9.99
3     1.99 
```

**这是表格、提交按钮和 onclick 调用的 PHP/HTML 代码示例：（** 这是我的实际代码的一个非常简化的版本，但应该传达这个想法）

```
<?php
    /* define mysql database connect, query and execute it returning result set into $result, id=integer primary key, is_active=tinyint(0 or 1), amount=decimal(12,2) */
    /* ... */    
    /* output form/table */
    echo "<form id='myform' name='myform' >" ;    
        echo "<table id='mytable' name='mytable'>" ;
            while($row = mysql_fetch_array($result))
            {
                $id                 = $row['id'] ;
                $amount             = $row['amount'] ;                
                $tr_id              = "tr_id_" . trim((string)$id) ;                                                
                $td_id              = "td_id_" . trim((string)$id) ;  
                $td_amount_id       = "td_amount_id_" . trim((string)$id) ;                 
                $input_amount_id    = "input_amount_id_" . trim((string)$id) ;
                echo "<tr id='$tr_id' name='$tr_id'>";
                    echo "<td id='$td_id_account' > $id </td>" ; 
                    echo "<td id='$td_amount_id' > <input type='text' id='$input_amount_id' value=$amount > $amount </td>" ;             
                echo "</tr>";
            }
        echo "</table>";
    echo "</form>" ; 
    /* submit button and onclick call */
    echo "<br />" ;
    echo "<table>";
        echo "<tr>" ;
            echo "<td>";
                echo "<button type='button' " . 'onclick="SubmitTableData(\'' . "mytable" .'\');"' . ">Submit</button>" ;
            echo "</td>" ;
        echo "</tr>";
    echo "</table>";         
?> 
```

**这是我的 JavaScript 函数的示例，用于循环遍历 HTML 表的行：**

```
function SubmitTableData(TableID)
{
    var table = document.getElementById(TableID);
    for (var i = 0, row; row = table.rows[i]; i++) 
    {
       // iterate through rows
       for (var j = 0, col; col = row.cells[j]; j++) 
       {
         // iterate through columns
            alert(col.innerHTML);
       }  
       /* call PHP procedure with row's cell values as parameters */
       /* ... */
       break;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:40:28.387

将`innerText`属性用于`td`. 这是一个展示如何使用它的[小提琴。](http://jsfiddle.net/HJE9c/2/)

HTML

```
<table>
    <tr>
        <td id="1">Bla</td>
        <td id="2"><input id="txt" />Ble</td>
    </tr>
</table>​ 
```

JavaScript

```
var td = document.getElementById('1');
alert(td.innerText);
var td2 = document.getElementById('2');
alert(td2.innerText);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T19:36:40.043

## 如何从表格中获取单元格值？

### 更新以解决 Elliots 评论

[在我的新演示](http://jsfiddle.net/PQ8x6/5/show/)中查看[如何获取单元格值](http://jsfiddle.net/PQ8x6/5/)（innerText 和数据值）

在表中，该属性`data-value`用于存储一些数据（2B、3C、..）。

```
<table id="t2">    
  <thead>
   <tr id="tr1"><th>Student Name<th>Course</tr> 
  </thead>
  <tbody>
    <tr id="tr2"><td data-value="2B">Bert2  <td>Economics  </tr>
    <tr id="tr3"><td data-value="3C">Clyde3 <td>Chemics    </tr>
    <tr id="tr4"><td data-value="4D">       <td>Digital Art</tr>
    <tr id="tr5"><td data-value="5E">Ernest <td>Ecmoplasma </tr>
  </tbody>
</table> 
```

使用 jQuery 和正确的选择器，您可以遍历每个单元格：

```
function eachCell(){
    var cellInnerText = [];
    var cellValue = [];
    var out = document.getElementById("out");
    var out2 = document.getElementById("out2");
    // iterate over each row in table with id t2 in the table-body (tbody)
    $('#t2 tbody tr').each(function(index){     
       // copy the text into an array
       cellInnerText.push($(":first-child", $(this)).text());
       //copy the data-value into an array
       cellValue.push($(":first-child", $(this)).attr('data-value'));
    });
    // show content of both arrays
    out.innerHTML = cellInnerText.join(" | ");
    out2.innerHTML = cellValue.join(" | "); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:38:04.710

使用某种模式在您的输入上放置 ID。例如，行在`<input type="text" id="input_0_0" name="whatever" />`哪里`0`，第二个`0`是列，然后是您的警报类型

```
v = document.getElementById('input_'+row+'_'+col).value; 
```

它应该可以帮助你现在开始滚动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-06T17:10:09.750

提醒表格第一行中第一个单元格的 innerHTML

```
<!DOCTYPE html>
<html>
<head>
<style>
table, td {
    border: 1px solid black;
}
</style>
</head>
<body>

<p>Click the button to alert the innerHTML of the first cell (td element with index 0) in the table's first row.</p>

<table id="myTable">
  <tr>
    <td>Row1 cell1</td>
    <td>Row1 cell2</td>
  </tr>
  <tr>
    <td>Row2 cell1</td>
    <td>Row2 cell2</td>
  </tr>
  <tr>
    <td>Row3 cell1</td>
    <td>Row3 cell2</td>
  </tr>
</table>
<br> 

<button onclick="myFunction()">Try it</button>

<script>
function myFunction() {
    alert(document.getElementById("myTable").rows[0].cells[0].innerHTML);
}
</script>

</body>
</html> 
```

# iphone - 重用多个 UIStoryboard 的视图

> ID：13074974
> 
> 赞同：2
> 
> 时间：2012-10-25T18:34:08.517
> 
> 标签：iphone, storyboard, uistoryboard

我在我的 iOS 应用程序中使用了多个故事板，现在有一个问题应该在多个故事板文件之间重用一个视图。

有没有办法做到这一点？

谢谢您的帮助，

基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T19:48:44.447

如果您想创建可重用的视图以在多个故事板文件中使用，您将需要使用 nib，并以编程方式实例化来自 nib 的视图并将其添加到您的故事板视图中。有关更多评论，请参阅此答案：[https ://stackoverflow.com/a/8495940/195691](https://stackoverflow.com/a/8495940/195691)

这是执行此操作的另一种（有点 hacky）方法：[https ://stackoverflow.com/a/11444019/195691](https://stackoverflow.com/a/11444019/195691)

# android - 检测图像（位图）上色点的触摸

> ID：13074979
> 
> 赞同：1
> 
> 时间：2012-10-25T18:34:26.083
> 
> 标签：android, android-layout

我需要检测对下图中红点的触摸，因此在触摸点后我可以采取行动。我想我需要检测触摸坐标，并检查它是否与红点匹配。但是如何检测红点位置？是否可以？注意：如果有帮助，我可以选择图像格式，但可能我们需要使用位图。

我需要以编程方式获取点位置。我收到图片，我需要处理点上的触摸事件。但我可以收到不同点位置的不同图像

感谢所有的想法！

![在此处输入图像描述](../Images/88ee2f0b959a374933128c1885c80a12.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T16:37:33.903

我看到的最简单的解决方案是：

1- 获取 imageView 大小，因为它可能会根据设备屏幕大小和/或分辨率而改变。

```
int IVwidth = imageView.getWidth();
int IVHeight = imageView.getHeight(); 
```

2- 获取位图宽度/高度，然后找到位图宽度和 imageView 宽度之间的数学关系（比率），简单地说：

```
float HeightRatio = (float)bm.getHeight() / (float)iv.getHeight();
float WidthRatio = (float)bm.getWidth() / (float)iv.getWidth(); 
```

假设我们有一个 (800*600) 大小的位图和一个 (400*300) 大小的 imageView，这将为您提供 (2.0) 的高度和宽度比率。

3- 现在，当 ImageViewTouched 事件引发时，您可以很容易地获得触摸坐标，因为事件会将它们传递给您。请注意，捕捉触摸事件非常简单，只需将其添加到视图即可实现；

```
 ImageView iv = (ImageView) findViewById(R.id.imageView1);
    iv.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {

            if(arg1.getAction() == MotionEvent.ACTION_UP)
            {
                int x = arg1.getX();
                int y = arg1.getY();
                int XonImage = x * WidthRatio;
                int YonImage = Y * HeightRatio;
                if(bm.getPixel(XonImage, YonImage) == Color.RED)
                {
                 // BINGOOOOOOO, do your magic here
                }
            }

            return false;
        }
    }); 
```

如需更多信息，请毫不犹豫地询问。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:56:40.607

我会使用[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)。视图层次结构应该是：

```
<FrameLayout>
   <ImageView vineyard>
   <LinearLayout dots_holder>
      <ImageView dot1/>
      <ImageView dot2/>
      <ImageView dotn/>
   </LinearLayout>
</FrameLayout> 
```

您的点将覆盖在葡萄园图像上，您可以为每个点添加一个 OnClickListener。对于每个点 ImageView 的定位和尺寸，我会在您的代码中进行一些动态计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:06:26.657

有这么多方法。您也许可以使用 SemperFly 的方法。还有用于视图的 onTouchListeners，它会给你坐标。您可能需要转换坐标以处理不同的屏幕密度。

您还可以将图像划分为网格，这可以简化或避免数学运算。另一种选择是将图像切成小块。你也可以使用类似RelativeLayout的东西。

您需要多精确的触摸检测？

# google-chrome - Google Analytics（分析）未在 Chrome 中加载

> ID：13074987
> 
> 赞同：14
> 
> 时间：2012-10-25T18:34:51.027
> 
> 标签：google-chrome, google-analytics

当我尝试在 Chrome 中登录 Google Analytics 时，页面无法加载。很奇怪。我只是得到你在这里看到的：

![在此处输入图像描述](../Images/e33127a29e29ba5e1f1857908e6c1d8d.png)

我最近从未体验过它，它可以在与 Safari 的同一台计算机上运行，​​但大约一周以来它还没有在 Chrome 上运行。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-05-16T20:15:51.353

可能是已更新其广告数据库的广告拦截插件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-22T13:13:48.507

我知道这个问题很老，但我想我会添加我的答案。

对我来说，它是 chrome 上的广告拦截器。单击地址栏旁边红色八角形中的手。转到选项并单击“在网络或域上显示添加”，添加域[https://www.google.com/analytics/](https://www.google.com/analytics/)应该可以修复它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-20T09:25:48.660

尝试隐身或私人浏览，因为它会阻止扩展程序的干扰，尤其是广告拦截扩展程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T09:29:19.070

[清除缓存](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95582)并[禁用任何](http://support.google.com/chrome/bin/answer.py?hl=en&answer=142064)可能干扰的插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-12T12:08:25.077

我的问题是谷歌分析没有从使用 Chrome 和 Firefox 等浏览器的某些用户那里收集数据，而且当用户在我的网站上活跃时，谷歌的实时报告不起作用。

我发现用户正在使用诸如 AdBlock 或 disconnect.me 之类的浏览器插件，它们阻止了数据收集。

我希望这对某人有所帮助，因为当我在互联网上寻找解决问题的方法时，谷歌把我带到了这里。通过这里的一些信息和那里的一些信息，我设法找出了我的问题所在。谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-17T22:01:26.677

我尝试了隐身模式和不同的浏览器，但它仍然无法正常工作。我也在 Chrome 上试过这个：设置>重置>将设置恢复为原始默认值。我仍然遇到此问题中报告的相同问题。当我放弃在 Windows 上尝试一切时，我尝试从 iPhone（不是应用程序，而是从我的 iPhone 7 Plus 的 Chrome 浏览器上的网络浏览器访问 Google Analytics，但没有成功。然后我转移到 OS X Yosemite 版本 10.10.5，还是一样，谷歌分析没有工作。在尝试了几分钟，也许大约一个小时或更长时间没有成功后，它突然开始在所有地方工作。

我的结论是，这很可能是谷歌分析中的一个错误。我应该测试一下我的网速，看看是否是因为网速不佳，但其他页面加载正常。所以我认为这只是谷歌分析中的某种错误。

编辑：今天我遇到了同样的问题，这是我昨天发布的上述答案后大约 24 小时。我去[http://www.speedtest.net/](http://www.speedtest.net/)测试我的网速，结果如下：

Ping：6ms 下载：2.68 Mbps 上传：5.17 Mbps

然后我看到一个弹出窗口告诉我发生了内部错误，请关闭并再次打开浏览器。这绝对是 Google Analytics 服务中的一个错误。

这就是我今天看到的，谷歌分析永远不会加载：

[![在此处输入图像描述](../Images/bae6cf9e55f7a5480b3dc91b459ca4d5.png)](https://i.stack.imgur.com/ScRzb.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-12-12T08:55:13.043

我遇到了同样的问题（Chrome、OSX），但我发现它与我的扩展程序有关，因为 Google Analytics 会在隐身模式下正确加载。在我的情况下，扩展 Windscribe - 免费 VPN 和广告拦截器阻止了 Analytics 加载。我通过将域列入白名单来修复它。

# javascript - Javascript：将哈希键作为参数传递

> ID：13074989
> 
> 赞同：0
> 
> 时间：2012-10-25T18:35:02.900
> 
> 标签：javascript

我有一个名为“标签”的散列，其中包含几个键，包括宽度、高度、x 和 y。我也有这个功能：

```
function invertCoordinates(measure, coordinate){
    tag.measure = tag.measure * -1;
    tag.coordinate = tag.coordinate - tag.measure;
} 
```

我想在其中传递标签的键：

```
invertCoordinates(width, x); 
```

或者

```
invertCoordinates(height, y); 
```

不幸的是，我不能以这种方式传递密钥。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:36:53.180

使用数组访问表示法 ( `tag[measure]`) 并将键作为字符串传递：`invertCoordinates('width', 'x')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T18:38:31.383

你可以做：

```
function invertCoordinates(measure, coordinate){
    tag[measure] = tag[measure] * -1;
    tag[coordinate] = tag[coordinate] - tag[measure];
} 
```

测量和坐标在哪里是字符串？例如：

```
invertCoordinates("width", "x"); 
```

# actionscript-3 - flex HTTPService 中的延迟结果

> ID：13074991
> 
> 赞同：0
> 
> 时间：2012-10-25T18:35:06.973
> 
> 标签：actionscript-3, apache-flex, call, httpservice, delay

我有关于通过 flex 中的 HTTPService 响应的问题。

我在循环中向服务器发送服务调用以缩放一些图像，例如：

```
while(i < 5)
{
    scaleMyImage({ file: fileArray[i], width: 100, height: 100 }); //this method is going to HTTPService

   i++;
} 
```

[另一堂课] 然后我收到 onResult 很好，比如

```
onResult($event:ResultEvent):void
{
    trace($event.result) //Hey mister your image is scaled down!
} 
```

这很完美，但我担心发送电话和收到回复之间的时间。

循环立即发送文件（每个循环之间的一些小毫秒） callTime: 9.1 callTime: 9.2 callTime: 9.4 callTime: 9.6 callTime: 9.7

但是，结果让我在第二个 resultTime: 10.8 resultTime: 11.7 resultTime: 12.9 resultTime: 14.2 resultTime: 15.0

我的问题是，问题出在哪里？我想如果我在循环中发送 5 次调用，服务器将处理缩放（缩放所有这些调用大约需要 1.5 秒），然后它会立即在响应中返回 5 条缩放成功的消息。是flash，server的问题吗？或者根本没有问题？我不应该担心吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T00:57:58.010

我知道你几天前问过这个问题，但如果你仍然需要知道发生了什么...

要支持并发调用...您需要使用 MXML 版本的 HTTPService 而不是 AS 类 HTTPService。并发类 rpc.mxml.Concurrency 仅导入到 mxml 实现中。因此，将 mx.rpc.http.mxml.HTTPService 用作您页面上的 MXML 组件，它会按您希望的方式工作！

# html - 具有多个父母和不同线型的家谱

> ID：13074994
> 
> 赞同：2
> 
> 时间：2012-10-25T18:35:21.230
> 
> 标签：html, tree

我正在尝试使用 HTML 创建一个简单的家谱（如果需要，我还可以包含 CSS 和 Javascript）。我想实现这样的目标：

[http://www.gmrv.es/~sschvartzman/Sara_C._Schvartzman/example.png](http://www.gmrv.es/~sschvartzman/Sara_C._Schvartzman/example.png)

有人知道我怎么做这个吗？

编辑：

我构建此网页的结构属于以下类型：

```
Father
Mother
n Number of children
children[n] 
```

我想自动构建这个数字。我希望每个人都有一个指向另一个网页的链接，但我认为一旦我有了这个数字，这将很容易。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T17:15:08.013

我终于设法创建了一个多父家庭树图。

```
<!DOCTYPE html> <html> <head><META http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta name="viewport"content="width=device-width, initial-scale=1.0"> <meta name="description" content=""><meta name="author" content=""><link href="tree.css" rel="stylesheet">
<title>Family Tree</title> </head><body> <h1>Schvartzman family tree</h1>
<div class="tree">
    <ul class="pf">
        <li class="parent">
            <a  class="f_nolink">
                <div class="person"">Claudia<br>Avila<span>(1961 - )</span></div> 
            </a>
        </li>
        <li class="divorce">
            <ul class="c">              <li>
                    <a  class="m_nolink">
                        <div class="person"">Sebastian<br>Berdichevsky<span>(1981 - )</span></div> 
                    </a>
                </li>
                <li>
                    <a href="@F62327212@.html" class="f">
                        <div class="person"">Sara<br>Berdichevsky<span>(1986 - )</span></div> 
                    </a>
                </li>
                <li>
                    <a  class="m_nolink">
                        <div class="person"">Manuel<br>Berdichevsky<span>(1987 - )</span></div> 
                    </a>
                </li>
                <li>
                    <a  class="m_nolink">
                        <div class="person"">Sergio<br>Berdichevsky<span>(1989 - )</span></div> 
                    </a>
                </li>
            </ul>
        </li>
        <li class="parentWithAncestor">
            <a href="@F62638334@.html" class="m">
                <div class="person"">Eduardo<br>Berdichevsky<span>(1961 - )</span></div> 
            </a>
        </li>
        <li class="marriage">
            <ul class="c">              <li>
                    <a  class="f_nolink">
                        <div class="person"">Abigail<br>Berdichevsky<span>(2001 - )</span></div> 
                    </a>
                </li>
                <li>
                    <a  class="m_nolink">
                        <div class="person"">Tobias<br>Berdichevsky<span>(2003 - )</span></div> 
                    </a>
                </li>
                <li>
                    <a  class="m_nolink">
                        <div class="person"">Iamin<br>Berdichevsky<span>(2007 - )</span></div> 
                    </a>
                </li>
            </ul>
        </li>
        <li class="parent">
            <a  class="f_nolink">
                <div class="person"">Carolina<br>Overlar<span>(1978 - )</span></div> 
            </a>
        </li>
    </ul>
</div>

<br>
</body> </html> 
```

使用 CSS 文件：

```
.tree * {margin: 0; padding: 0; }

body {

    font-family: arial, verdana, tahoma;
    font-size: 12px;
    color: #666;
    background-color:#fff;

}

.tree{
    white-space:nowrap;
    padding-bottom: 250px;
}

.tree ul {
    padding-top: 5px; position: relative;
    display: table;
    margin: 0 auto;
    font-size:0;

    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
}

.tree li {
    /*float: left; */
    display:inline-block;
    text-align: center;
    list-style-type: none;
    position: relative;
    padding: 70px 5px 0 5px;
    font-size: 12px;

    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
}

/*We will use ::before and ::after to draw the connectors*/

.tree li::before, .tree li::after{
    content: '';
    position: absolute; top: 0; right: 50%;
    border-top: 1px solid #ccc;
    width: 50%; height: 70px;
}
.tree li::after{
    right: auto; left: 50%;
    border-left: 2px solid #ccc;
}

/*We need to remove left-right connectors from elements without 
any siblings*/
.tree li:only-child::after {
    display: none;
}

/*Remove space from the top of single children*/
/*
.tree li:only-child{ padding-top: 0;}
*/
/*Remove left connector from first child and 
right connector from last child*/
.tree li:first-child::before, .tree li:last-child::after{
    border: 0 none;
}

/*Adding back the vertical connector to the last nodes*/
.tree li li:last-child::before{
    border-right: 2px solid #ccc;
    border-radius: 0 5px 0 0;
    -webkit-border-radius: 0 5px 0 0;
    -moz-border-radius: 0 5px 0 0;
}
.tree li:first-child::after{
    border-radius: 5px 0 0 0;
    -webkit-border-radius: 5px 0 0 0;
    -moz-border-radius: 5px 0 0 0;
}

.tree li li:only-child::before {
    right: auto; left: 50%;
    border-left: 2px solid #ccc;
    border-right:none;
}
/*
.tree ul.p>li::before {
    border:none;
    content: '&';
    left:0;
    width:100%; 
    }

.tree ul.p>li::after{
    content: '';
    position: absolute; top: 0; right: 50%;
    border-top: none;
    width: 50%; height: 20px;
}

.tree ul.p>li::after{
    border-left: none;
}
*/
/* Use pf to indicate that its a child of another family. */
.tree ul.pf>li::before {
    right: auto; left: 50%;
    border-left: 2px solid #ccc;
    border-right:none;
    }

.tree ul.pf>li::after{
    content: '';
    position: absolute; top: 0; right: 50%;
    border-top: none;
    width: 50%; height: 20px;
}

.tree ul.pf>li::after{
    border-left: none;
}

/*Time to add downward connectors from parents*/

.tree ul.c {
    padding-top: 70px; 
    }

.tree ul ul.c::before{
    content: '';
    position: absolute; top: 0; left: 50%;
    border-left: 2px solid #ccc;
    width: 0; height: 20px;
    border: none;
}

.tree li a{
    border: 1px solid #ccc;
    padding: 0px;
    text-decoration: none;
    color: #666;
    background-color:#fff;
    /*background-image:url(circle.jpg)*/
    /*color: #fff;
    background-color:#999;*/
    display: inline-block;
    min-width:50px;

    border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;

    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
}

/* red border on contacts
.tree li a.o{
    border: 1px solid #f66;
}
*/

.tree li a span{
    display:block;
    font-size: 10px;

}

/*Time for some hover effects*/
/*We will apply the hover effect the the lineage of the element also*/
/*.tree li a.m:hover { background: #c8e4f8; color: #000; border: 1px solid #94a0b4; }   
.tree li a.f:hover { background: #ffc0cb; color: #000; border: 1px solid #94a0b4; } 

.tree li a:hover+ul li a.m { background: #c8e4fb; color: #000; border: 1px solid #94a0b4; } 
.tree li a:hover+ul li a.f { background: #ffc0cb; color: #000; border: 1px solid #94a0b4; } 

.tree li a.md:hover { background: #c8e4f8; color: #000; border: 1px solid #94a0b4; }    
.tree li a.fd:hover { background: #ffc0cb; color: #000; border: 1px solid #94a0b4; }    

.tree li a:hover+ul li a.md { background: #c8e4fb; color: #000; border: 1px solid #94a0b4; }    
.tree li a:hover+ul li a.fd { background: #ffc0cb; color: #000; border: 1px solid #94a0b4; }*/  

.tree li a.m{width:80px;height:80px;border-radius:15px;font-size:10px;color:#000;text-align:center;background: #c8e4fb; box-shadow:1px 1px 2px #000}
.tree li a.f{width:80px;height:80px;border-radius:50px;font-size:10px;color:#000;text-align:center;background: #ffc0cb; box-shadow:1px 1px 2px #000}
.tree li a.m_dead{width:80px;height:80px;border-radius:15px;font-size:10px;color:#000;text-align:center;background: #F1F9FE; box-shadow:1px 1px 2px #000}
.tree li a.f_dead{width:80px;height:80px;border-radius:50px;font-size:10px;color:#000;text-align:center;background: #FFF0F2;box-shadow:1px 1px 2px #000}
.tree li a.m_nolink{width:80px;height:80px;border-radius:15px;font-size:10px;color:#000;text-align:center;background: #c8e4fb; box-shadow:1px 1px 2px #000}
.tree li a.f_nolink{width:80px;height:80px;border-radius:50px;font-size:10px;color:#000;text-align:center;background: #ffc0cb; box-shadow:1px 1px 2px #000}
.tree li a.m_dead_nolink{width:80px;height:80px;border-radius:15px;font-size:10px;color:#000;text-align:center;background: #F1F9FE; box-shadow:1px 1px 2px #000}
.tree li a.f_dead_nolink{width:80px;height:80px;border-radius:50px;font-size:10px;color:#000;text-align:center;background: #FFF0F2;box-shadow:1px 1px 2px #000}

.tree li.marriage{ height:0px; border: 1px; border-style: solid; border-color: #000; color: #000; padding: 0 ; background: #FFF; }
.tree li.marriage::before{border: none}
.tree li.divorce{ height:0px; border: 2px; border-style: dashed; border-color: #000; color: #000; padding: 0 ; background: #FFF; }
.tree li.divorce::before{border: none}
.tree  ul.pf>li.parent::before{border: none}
.tree  ul.pf>li.parentWithAncestor::before{border-top: none;}

.tree div.person
{
    display:inline-block;
    vertical-align:central;
    padding:20px 0px;
    width:80px; 
}
/*
.tree li a.m:hover{width:100px;height:100px;border-radius:15px;font-size:12px;color:#000;text-align:center;background: #c8e4fb; box-shadow:0 0 4px #222 inset}
.tree li a.f:hover{width:100px;height:100px;border-radius:50px;font-size:12px;color:#000;text-align:center;background: #ffc0cb; box-shadow:0 0 4px #222 inset}
.tree li a.m_dead:hover{width:100px;height:100px;border-radius:15px;font-size:12px;color:#000;text-align:center;background: #F1F9FE; box-shadow:0 0 4px #222 inset}
.tree li a.f_dead:hover{width:100px;height:100px;border-radius:50px;font-size:12px;color:#000;text-align:center;background: #FFF0F2; box-shadow:0 0 4px #222 inset}
*/
/*.tree li a.m { background: #c8e4f8; color: #000; border: 1px solid #94a0b4; } 
.tree li a.f { background: #ffc0cb; color: #000; border: 1px solid #94a0b4; }   

.tree li a.md { background: #c8e4f8; color: #000; border: 1px solid #94a0b4; }  
.tree li a.fd { background: #ffc0cb; color: #000; border: 1px solid #94a0b4; }  

.tree li a+ul li a.m { background: #c8e4fb; color: #000; border: 1px solid #94a0b4; }   
.tree li a+ul li a.f { background: #ffc0cb; color: #000; border: 1px solid #94a0b4; }*/ 

/*Thats all. I hope you enjoyed it.
Thanks :)*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T23:13:49.333

我为你开始的，只是为了让你得到照片。你应该能够自己得到其余的。

```
<!DOCTYPE html>
<html><head><title>Diagram</title></head>
<body>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="1260" height="765">
    <defs
     id="defs4">
    <linearGradient
         id="linearGradient5189"
         osb:paint="solid">
        <stop
             style="stop-color:#000000;stop-opacity:1;"
             offset="0"
             id="stop5191" />
    </linearGradient>
</defs>

<metadata
     id="metadata7">
    <rdf:RDF>
        <cc:Work
             rdf:about="">
            <dc:format>image/svg+xml</dc:format>
            <dc:type
                 rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
            <dc:title></dc:title>
        </cc:Work>
    </rdf:RDF>
</metadata>
<g

     id="layer1"
     transform="translate(0,-287.36218)">
    <rect
         style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:23.50000000000000000;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;fill-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"
         id="rect2985"
         width="236.3757"
         height="236.3757"
         x="125.25892"
         y="132.6445"
         transform="translate(0,287.36218)" />
    <path
         style="fill:none;stroke:#000000;stroke-width:23.88199997;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
         d="M 246.47723,713.3291 245.60768,587.95193 244.45692,422.02699"
         id="path5199"
         sodipodi:nodetypes="ccc" />
    <path
         style="fill:none;stroke:#000000;stroke-width:25;stroke-linecap:butt;stroke-linejoin:round;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:75,25;stroke-dashoffset:105"
         d="m 793.9799,471.04561 -545.48237,0"
         id="path5246"
         transform="translate(0,287.36218)" />
    <path
         sodipodi:type="arc"
         style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:25;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:105"
         id="path5248"
         sodipodi:cx="717.71338"
         sodipodi:cy="259.41864"
         sodipodi:rx="122.73354"
         sodipodi:ry="122.73354"
         d="m 840.44692,259.41864 a 122.73354,122.73354 0 1 1 -245.46708,0 122.73354,122.73354 0 1 1 245.46708,0 z"
         transform="translate(68.690373,264.12867)" />
    <path
         style="fill:none;stroke:#000000;stroke-width:25;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
         d="m 787.87838,398.79348 0,-72.73098"
         id="path5250" />
    <image
         y="652.83923"
         x="775.43933"
         id="image5271"
         xlink:href=

"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAABiCAYAAAClDHhhAAAABHNCSVQICAgIfAhkiAAAAElJREFU
aIHtzUENACAMBLCDoGn+FWGBeSDZrzXQleRl2J4OJBKJRCKRSCQSiUQikUgkEolEIpFIJBKJRCKR
SCQSiUTy5VTVnU4aD+ADVQ9kdZUAAAAASUVORK5CYII=
"
         height="117.1929"
         width="25" />
    <path
         style="fill:none;stroke:#000000;stroke-width:26.86911964;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
         d="m 245.97214,741.68118 0,16.7063"
         id="path5274" />
    <path
         style="fill:none;stroke:#000000;stroke-width:25;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none"
         d="m 126.65969,249.12565 234.84816,2.63875"
         id="path5314"
         transform="translate(0,287.36218)" />
</g>

</svg>

</body>
</html> 
```

# sql - 如何使用“匿名表”参数化更新？

> ID：13074996
> 
> 赞同：1
> 
> 时间：2012-10-25T18:35:22.037
> 
> 标签：sql, sql-server, ms-access

我相当确定我无法通过 Google 找到答案的很大一部分原因是我不知道描述我的问题的正确术语。

我很了解以下表格：

```
UPDATE Table t
SET t.description = Concat(ot.text, ' text')
FROM Table
INNER JOIN Other_Table ot ON t.id = ot.id
WHERE conditions; 
```

我想要完成的更像是：

```
UPDATE Table t
SET t.description = Concat(item, ' text')
FROM t
INNER JOIN (SELECT item FROM ('list', 'of', 'items'))
WHERE conditions; 
```

换句话说，我有一个“匿名表”，或者在查询中指定的显式字符串列表，而不是存储在表中，我希望一次选择一个并与一些字符串文字连接并更新一个排。

所以想象一下我有一个产品信息表。我想更新这个表，所以“描述”列包含“这个产品是*彩色*的！”。我正在寻找类似的东西：

```
UPDATE Products p
SET p.desc = Concat('This product is ', color, '!')
FROM p
INNER JOIN (SELECT color FROM ('blue', 'red', 'green'))
WHERE p.sku in (111, 112, 113); 
```

我正在使用 Access 2010 并连接到 SQL Server 2008 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T18:42:17.230

SQL Server 2008 允许使用 VALUES 子句作为表源：

```
CREATE TABLE products([desc] NVARCHAR(MAX),sku int)

UPDATE p
SET p.[desc] = 'This product is '+ C.color+ '!'
FROM Products p
INNER JOIN (VALUES(111,'blue'),(112, 'red'),(113, 'green')) AS c(sku,color)
ON p.sku = c.sku
WHERE p.sku in (111, 112, 113); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T18:40:39.793

我不确定我说得对，但试试这样

```
update Products p set
    p.desc = Concat('This product is ', C.color, '!')
from p
    inner join
    (
        select 'blue' as color, 111 as id union all
        select 'red' as color, 112 as id union all
        select 'green' as color, 113 as id
    ) as C on C.id = p.sku
where p.sku in (111, 112, 113); 
```

# jquery-ui - jquery ui自动完成未从远程数据源填充

> ID：13074997
> 
> 赞同：2
> 
> 时间：2012-10-25T18:35:24.523
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我的第一个 stackoverflow 帖子！所以我无法弄清楚为什么这不起作用。以前可以，现在不行，不知道有什么变化。JSON 正确返回，只是没有填充下拉列表。这是html：

```
$(document).ready(function(){
$('#search').autocomplete({
source: 'search.php',
minLength: 2
        });
    });
    </script>
</head>
<body>
    <div class="ui-widget">
        <label for="search">Search</label>
        <input type="text" id="search" />
    </div>
</body> 
```

这是PHP：

```
mysql_select_db('symfony',$con);

$autocomplete_value = mysql_real_escape_string($_GET["term"]);

$sql = "SELECT name FROM Artist WHERE name LIKE '%$autocomplete_value%' UNION
        SELECT name FROM Event WHERE name LIKE '%$autocomplete_value%'";

$query = mysql_query($sql);
echo $sql;  

$results = array();
while ($row = mysql_fetch_array($query, MYSQL_ASSOC)) {
    array_push($results, array( 'name' => $row['name']) );

}

json_encode($results);
?> 
```

编辑** 我的同事帮我弄清楚了。我需要改变

```
array_push($results, array( 'name' => $row['name']) ); 
```

至

```
array_push($results, array( 'value' => $row['name']) ); 
```

现在它起作用了！