# StackOverflow 问答 12938000-12938999

# python - Python处理反向查找

> ID：12938002
> 
> 赞同：1
> 
> 时间：2012-10-17T15:38:22.150
> 
> 标签：python, python-2.7

我有 20 个匹配 20 个整数的字符串。所有整数和字符串都是*唯一的*。我正在考虑但想避免创建两个字典。一个字典将由字符串索引，一个字典将由整数索引。

*   我应该如何处理这种情况？

我创建了两个列表。一个包含字符串，另一个包含整数。我正在考虑构建两个功能。一个函数将产生一个字符串。另一个函数将产生一个整数。如果产生的参数是整数或字符串，另一种选择是通过分支将它们组合成一个函数。

*   这和字典有什么可比性？会不会消耗很多cpu？（此功能每天会运行**数百万**次）
*   我应该只创建一个 (string, int) 的元组列表，然后创建两个字典，一个将 int 映射到列表位置，另一个将字符串映射到列表位置吗？这会是**最好**的方法吗？

我没有很多东西，所以我可以牺牲一些记忆。

请解释最好的方法并解释为什么它是最好的。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:40:57.730

为什么不使用 1 个双向映射的字典？

```
ints = list(range(10))
strs = [str(x) for x in ints]
d = dict(zip(ints,strs))
d.update(zip(strs,ints))

print repr(d[1])   # '1'
print repr(d['1']) # 1 
```

由于您有唯一的字符串和唯一的整数，那么这两个集合的并集也应该是一个唯一列表，其中包含其他两个集合中的所有元素。将它们都放在字典中应该没有问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T15:57:34.547

无论您使用哪种解决方案，如果您希望它健壮，您可能应该在它周围包装一个类，当您更新一个时自动更新另一个方向。例如，这是一个使用@mgilson 技术的基本双向字典的开始（这意味着如果您要相互映射的两组项目之间有任何重叠，它将不起作用；但是，具有不同类型的效果很好）：

```
class BiDict(dict):
  """Bidirectional Dictionary - setting 'key' to 'value' also
     sets 'value' to 'key' (so don't use overlapping mappings)
  """

  def __init__(self, *args):
    super(BiDict, self).__init__(*args)

    # After regular dict initialization, loop over any items
    # and add their reverse.  Note that we can't use any of the
    # iter* methods here since we're adding items in the body
    # of the loop.
    for key in self.keys():
      super(BiDict, self).__setitem__(self[key], key);

  def __setitem__(self, key, val):
    # If the key has an old value, delete its reverse
    if key in self:
      super(BiDict, self).__delitem__(self[key])

    # Then add both forward and reverse for the new value
    super(BiDict, self).__setitem__(key, val);
    super(BiDict, self).__setitem__(val, key);

  def __delitem__(self, key):
    # delete both directions
    if key in self:
      super(BiDict, self).__delitem__(self[key]);
      super(BiDict, self).__delitem__(key); 
```

你可以像这样使用它：

```
>>> from bidict import BiDict
>>> d = BiDict({'a':1,'b':2})
>>> d['a']
1
>>> d[2]
'b'
>>> d['c']=3
>>> d[3]
'c'
>>> del d['a']
>>> d['a']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'a'
>>> d[1]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 1 
```

# javascript - 为 JQuery 创建一个二维数组

> ID：12938003
> 
> 赞同：-1
> 
> 时间：2012-10-17T15:38:24.037
> 
> 标签：javascript

我有一个要在创建二维数组时包含的数组：

```
var v=[22,34,13,13];
var dataV = new Array();

for(var i=0; i<4; i++) 
  dataV = [i,v[i]];

console.log(dataV); 
```

输出应该是：

```
[[0, 22],
[1, 34],
[2, 13],
[3, 13]] 
```

我将此数组与 JQuery 图表一起使用。然而，图表似乎只显示了最后一个值 (13)。任何人都知道我是否没有正确转换我的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:39:43.740

您需要将其添加到`dataV`. 目前你正在*覆盖* `dataV`.

您可以使用`.push()`：

```
dataV.push([i,v[i]]); 
```

或按索引分配：

```
dataV[i] = [i,v[i]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:39:46.263

```
var v=[22,34,13,13];
var dataV = new Array();
for(var i=0; i<4; i++) {
  dataV.push([i,v[i]]);
  console.log(dataV);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:40:08.203

```
var v=[22,34,13,13];
var dataV = new Array();
for(var i=0; i<4; i++) 
  dataV[dataV.length] = [i,v[i]];
console.log(dataV); 
```

# ruby-on-rails - Rails.cache.stats 只给出三个值（不是广泛的统计数据）

> ID：12938006
> 
> 赞同：0
> 
> 时间：2012-10-17T15:38:35.553
> 
> 标签：ruby-on-rails, caching

我正在使用 Rails、Heroku 和 Dalli gem。

如果我`Rails.cache.stats`在 Heroku 控制台中输入，我会`{"mc2.ec2.memcachier.com:11211"=>{"cur_items"=>"408", "bytes"=>"8920696"}}`在任何地方用谷歌搜索它，在 StackOverflow 上似乎我应该得到像[这样](https://gist.github.com/1169246)的广泛统计数据。

为什么我看不到扩展的统计信息？这很可能与[这个](https://stackoverflow.com/questions/10168399/memcache-stats-not-outputting-with-rails-cache-stats-rails-heroku)问题相同，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:45:24.857

问题是，您正在使用 memcachier 插件作为 dalli-store 的后端。

该`stats`命令的输出不是提供的常规统计信息`memcached`，而是插件提供程序的输出。

查看 heroku 文档（搜索统计信息），例如应该返回的数据：[https ://devcenter.heroku.com/articles/memcachier](https://devcenter.heroku.com/articles/memcachier)

# objective-c - kTag 值。推荐范围是多少？

> ID：12938007
> 
> 赞同：1
> 
> 时间：2012-10-17T15:38:39.603
> 
> 标签：objective-c, ios, uiview

我正在使用标签来访问/操作 UIViews，如下所示：

（在本例中，代码位于 UIView+Category 中）

```
#define kTagButton 60000

- (void)viewDidLoad {
    UIButton *myButton = [[UIButton alloc] initWithFrame:someFrame];
    ...
    [myButton setTag:kTagButton];
    [self addSubview:myButton];
}

- (void)removeButton {
    UIButton *someButton = (UIButton*)[self.viewWithTag:kTagButton];
    [someButton removeFromSuperView];
} 
```

我的问题是：标签使用的推荐值范围是多少？我依稀记得读到最低值是为内部任务保留的。

谢谢你。

# java - 谷歌 App Engine GAE MemcacheService 单例注入 Spring

> ID：12938008
> 
> 赞同：2
> 
> 时间：2012-10-17T15:38:39.933
> 
> 标签：java, spring, google-app-engine

使用 com.google.appengine.api.memcache.MemcacheService 在 App Engine 中进行缓存，我正在使用工厂创建 memcacheservice 实例，并将其作为单例注入到我的类中。

我在问这是否正确和最优，以及是否有人对使用惰性初始化选项或同步（）的积极或消极影响有意见。我希望这个问题的答案能够以这种方式使用 memcacheservice 的最佳方式。

谢谢！

工厂：

```
public class CacheFactory {

    private static MemcacheService INSTANCE;

    private CacheFactory() {
    }

    public static MemcacheService getInstance() {
        if (INSTANCE == null) {
            synchronized(CacheFactory.class){
            INSTANCE =  MemcacheServiceFactory.getMemcacheService();
            }
        }
        return INSTANCE;

    }

} 
```

春豆：

```
 <bean id="cacheFactory" class="com.nimbits.server.transactions.memcache.CacheFactory"
          factory-method="getInstance" lazy-init="false" scope="singleton" >
    </bean> 
```

示例用法：

```
 <bean id="someService" class="SomeServiceImpl">
        <property name="cacheFactory" ref="cacheFactory" />
   </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:51:08.847

该解决方案可行，但存在问题：

1.  您应该清楚地了解它不是一个完整的单例，因为每个实例都会有自己的工厂实例。

2.  它将影响动态实例的开始时间。有一个已知问题是每个 spring bean 都会在实例开始时间上增加一些时间。因此，如果您的 HTTP 请求将导致实例启动，则请求启动和实际响应过程之间会有延迟。在过去的几次中，很多人都遇到了这个问题；个月。实例启动甚至可以超过 60 秒，您将遇到硬期限异常。所以建议不要使用 Spring 来加快启动时间。查看[http://code.google.com/p/googleappengine/issues/detail?id=7706](http://code.google.com/p/googleappengine/issues/detail?id=7706)了解详情。

# drupal - Drupal 7 - 块不会保留顺序

> ID：12938014
> 
> 赞同：2
> 
> 时间：2012-10-17T15:38:55.500
> 
> 标签：drupal, drupal-7, drupal-views

我似乎对 Drupal 中的块排序有问题。我去了*结构>块>主题*，其中*主题*是当前主题的名称。

在这个管理区域的内容部分，我有：*内容*和*视图：主页精选：主页精选块*。

内容应该位于视图的顶部，在这个管理区域中。但是当它显示出来时，顺序是相反的，无论我有多少顺序，我都无法更改。

节点模板发出以下语句：

```
<?php print render($page['content']); ?> 
```

有任何想法吗？视图中有什么东西在这样做吗？**在此先感谢您的帮助！！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:13:39.083

想通了——如果你进入*主页内容*块并编辑“页面”选项卡的可见性设置，它会解决这个问题。

我在文本框中列出了页面并检查了“仅列出的页面”和中提琴。

# java - 我无法弄清楚为什么这个应用程序会中断

> ID：12938016
> 
> 赞同：1
> 
> 时间：2012-10-17T15:38:57.423
> 
> 标签：java, android

我是 android 开发的新手，我正在尝试编写一个简单的类似 Simon 的游戏来进行一些练习，但是我已经变得非常卡住，并且希望得到任何关于它为什么不运行以及我可以做些什么来修复它的帮助：

```
public class SimonActivity extends Activity {

    ArrayList<Integer> table1 = randomArrayList(3,4);
    ArrayList<Integer> table2 = new ArrayList<Integer>();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_simon);

        final Button blue = (Button)findViewById(R.id.blueButton);
        final Button green = (Button)findViewById(R.id.greenButton);
        final Button gold = (Button)findViewById(R.id.goldButton);
        final Button red = (Button)findViewById(R.id.redButton);
        //turn off the buttons
        activate(blue, green, gold, red, false);

        final Handler handler = new Handler();

        final Runnable blueLight = new Runnable() {
            public void run() {
                    blue.setBackgroundResource(R.drawable.lblue);
            }
        };

        final Runnable goldLight = new Runnable() {
            public void run() {
                    gold.setBackgroundResource(R.drawable.lgold);
            }
        };

        final Runnable redLight = new Runnable() {
            public void run() {
                    red.setBackgroundResource(R.drawable.lred);
            }
        };

        final Runnable greenLight = new Runnable() {
            public void run() {
                    green.setBackgroundResource(R.drawable.lgreen);
            }
        };

        final Runnable switchOff = new Runnable() {
            public void run() {
                activate(blue, green, gold, red, false);
            }
        };

        final Runnable switchOn = new Runnable() {
            public void run() {
                activate(blue, green, gold, red, true);
            }
        };

        final Runnable playSequence = new Runnable() {
            public void run() {
                SystemClock.sleep(1000);
                for (int i = 0; i < table1.size(); i++ ) {

                    switch(table1.get(i)) {
                    case 0 : handler.post(blueLight);
                    break;
                    case 1 : handler.post(goldLight);
                    break;
                    case 2 : handler.post(redLight);
                    break;
                    case 3 : handler.post(greenLight);
                    break;
                    }
                    SystemClock.sleep(700);
                    handler.post(switchOff);
                    SystemClock.sleep(300);
                }
                table2.clear();
                handler.post(switchOn);
            }
        };

        new Thread(playSequence).start();

        while (true) {
            if (table2.get(0) == 5){
                table2.clear();
                new Thread(playSequence).start();
            }

        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_simon, menu);
        return true;
    }
    public void activate(Button bt1, Button bt2, Button bt3, Button bt4, boolean valor) {
        bt1.setClickable(valor);
        bt2.setClickable(valor);
        bt3.setClickable(valor);
        bt4.setClickable(valor);
        bt1.setBackgroundResource(R.drawable.bblue);
        bt2.setBackgroundResource(R.drawable.bgreen);
        bt3.setBackgroundResource(R.drawable.bgold);
        bt4.setBackgroundResource(R.drawable.bred);
    }

    public static int random(int n) { //la de tota la vida
        Random r = new Random();

        int x = r.nextInt(n);
        return x;
    }

    public static int[] randomarray(int tamany, int range) {

        Random r = new Random();

        int[] a = new int[tamany];
            for (int i = 0; i < a.length; i++) {
                a[i] = r.nextInt(range);
            }
        return a;
    }

    public static ArrayList<Integer> randomArrayList(int tamany, int range) {

        Random r = new Random();

        ArrayList<Integer> a = new ArrayList<Integer>();

            for (int i = 0; i < tamany; i++) {
                a.add(r.nextInt(range));
            }
        return a;
    }

    public void clic(View target) {

        switch (target.getId()) {
        case R.id.blueButton: table2.add(0);
            break;
        case R.id.goldButton: table2.add(1);
            break;
        case R.id.redButton: table2.add(2);
            break;
        case R.id.greenButton: table2.add(3);
            break;
        }

        for (int i = 0; i < table2.size(); i++ ) {
            if (table1.get(i) != table2.get(i)) {
                table2.clear();
                table1.clear();
                table1 = randomArrayList(3, 4);
                table2.add(5);
                break;
            }
        }
        if (table1.equals(table2)) {
            table2.clear();
            table1.add(random(4));
            table2.add(5);
        }
    }
} 
```

一般的想法是，它用随机数填充 ArrayList，然后通过将按钮的颜色从较深的颜色更改为较浅的颜色来播放此序列。然后激活按钮并将点击记录到第二个 ArrayList 中，并将其与原始的比较，以检查玩家是否输入了正确的组合。

然而，它在加载时崩溃，留下以下调试信息。然而，由于我的理解有限，事实证明它太神秘而无法定位问题：

> 10-17 17:12:10.758: D/AndroidRuntime(10439): 关闭 VM 10-17 17:12:10.758: W/dalvikvm(10439): threadid=1: 线程退出未捕获异常 (group=0x40c47300) 10 -17 17：12：10.768：E/AndroidRuntime（10439）：致命异常：主要 10-17 17：12：10.768：E/AndroidRuntime（10439）：java.lang.RuntimeException：无法启动活动 ComponentInfo{joc.simondroid /joc.simondroid.SimonActivity}：java.lang.IndexOutOfBoundsException：无效索引 0，大小为 0 10-17 17:12:10.768：E/AndroidRuntime(10439)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java: 2059) 10-17 17:12:10.768: E/AndroidRuntime(10439): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 10-17 17:12:10.768: E/AndroidRuntime(10439): 在android.app.ActivityThread.access$600(ActivityThread.java:130) 10-17 17:12：10.768: E/AndroidRuntime(10439): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195) 10-17 17:12:10.768: E/AndroidRuntime(10439): 在 android.os.Handler.dispatchMessage (Handler.java:99) 10-17 17:12:10.768: E/AndroidRuntime(10439): 在 android.os.Looper.loop(Looper.java:137) 10-17 17:12:10.768: E/AndroidRuntime (10439): 在 android.app.ActivityThread.main(ActivityThread.java:4745) 10-17 17:12:10.768: E/AndroidRuntime(10439): 在 java.lang.reflect.Method.invokeNative(Native Method) 10 -17 17:12:10.768：E/AndroidRuntime(10439)：在 java.lang.reflect.Method.invoke(Method.java:511) 10-17 17:12:10.768：E/AndroidRuntime(10439)：在 com .android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 10-17 17:12:10.768: E/AndroidRuntime(10439): 在 com.android.internal.os.ZygoteInit。main(ZygoteInit.java:553) 10-17 17:12:10.768: E/AndroidRuntime(10439): at dalvik.system.NativeStart.main(Native Method) 10-17 17:12:10.768: E/AndroidRuntime(10439) ): 原因：java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0 10-17 17:12:10.768: E/AndroidRuntime(10439): at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251) 10 -17 17:12:10.768: E/AndroidRuntime(10439): 在 java.util.ArrayList.get(ArrayList.java:304) 10-17 17:12:10.768: E/AndroidRuntime(10439): 在 joc.simondroid .SimonActivity.onCreate(SimonActivity.java:99) 10-17 17:12:10.768: E/AndroidRuntime(10439): 在 android.app.Activity.performCreate(Activity.java:5008) 10-17 17:12:10.768 : E/AndroidRuntime(10439): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 10-17 17:12:10.768:E/AndroidRuntime(10439): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 10-17 17:12:10.768: E/AndroidRuntime(10439): ... 11 更多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:44:55.893

你做

```
if (table2.get(0) 
```

但早些时候你将它初始化为

```
ArrayList<Integer> table2 = new ArrayList<Integer>(); 
```

并且不要将任何物品放入其中，这样即使索引 0 也没有什么可交付的。所以你得到`IndexOutOfBoundsException`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:45:20.440

> 引起：java.lang。**IndexOutOfBoundsException**：**索引 0 无效，大小为 0** 10-17 17:12:10.768: E/AndroidRuntime(10439): at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251) 10-17 17:12:10.768: E /AndroidRuntime(10439)：在 java.util。**ArrayList.get** (ArrayList.java:304) 10-17 17:12:10.768: E/AndroidRuntime(10439): 在 joc.simondroid.SimonActivity。**onCreate** (SimonActivity.java:99)

您正在尝试`0`访问`ArrayList`. 由于我不知道代码行（`onCreate`虽然它在方法中），我只能猜测它是这一行：

```
if (table2.get(0) == 5) 
```

`table2`似乎是空的。

# perl - Perl 对模块中的未定义做出反应

> ID：12938018
> 
> 赞同：0
> 
> 时间：2012-10-17T15:39:00.420
> 
> 标签：perl, loops, undefined, defined

我写了一个使用不同模块的脚本。脚本循环，返回到开头，直到达到某个 id 并且死亡。

但有时，模块查询的结果是未定义的，脚本会停止。在我目前的情况下：

```
Can't use an undefined value as a HASH reference at /modulepath/module.pm line xxx 
```

如何告诉 Perl，不要停止和跳过当前处理？我尝试使用以下方法但没有成功：

```
if (defined $var->movie( id => $imdb )){ 
#do the usual stuff 
}
else {
#skip and do nothing
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:44:22.227

检查是否`$var`也定义了。

```
if (defined $var && defined $var->movie( id => $imdb )){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:42:02.473

用于`eval`防止代码中止您的脚本。

```
eval {
  # code that might blow up
};
if ($@) { 
  # it blew up, but we're still running
} 
```

# java - GAE 删除 blob 不起作用

> ID：12938019
> 
> 赞同：1
> 
> 时间：2012-10-17T15:39:05.327
> 
> 标签：java, google-app-engine

我有这个简单的代码

```
 BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
        BlobKey blobKeyDelete = new BlobKey(user.getAvatarBlobKey());
        blobstoreService.delete(blobKeyDelete); 
```

我 100% 确定密钥 blob 的值是正确的，我也不例外。而且blob没有被删除..

我不知道出了什么问题，所以如果您对我如何解决这个问题有任何想法，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:42:13.177

只是一个长镜头，但我遇到了类似的问题，结果发现密钥是在设置命名空间之前创建的，而对象位于命名空间中。该键包含命名空间信息。根据我的经验，使用不存在对象的键删除也不会引发任何异常。

看到这个：[Objectify BATCH delete has no effect](https://stackoverflow.com/questions/9495680/objectify-batch-delete-has-no-effect)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:22:20.693

您使用的是 SDK 1.7.0 吗？如果是这样，也许这是您的问题：

[http://code.google.com/p/googleappengine/issues/detail?id=7785](http://code.google.com/p/googleappengine/issues/detail?id=7785)

# jquery-validate - 如何扩展 jquery.validate URL 验证？

> ID：12938027
> 
> 赞同：9
> 
> 时间：2012-10-17T15:39:17.407
> 
> 标签：jquery-validate

我需要用户能够创建部分 URL，而无需每次都输入完整的 URL。

例如，假设我计划将 url 设为`www.example.com/areas/{userinput}/home`. 我希望用户能够在文本框中输入一些文本，并且我想验证它是一个有效的 URL。

URL 验证器的功能如下：

```
url: function(value, element) {
        return this.optional(element) || /giantregex/.test(value);
} 
```

我尝试通过以下方式向验证器添加验证方法：

```
$.validator.addMethod("exturl", function(value) {
    return $.validator.methods.url.call($.validator, "http://www.example.com/areas/" + value + "/home");
}); 
```

但是，当验证表单并调用我的扩展时，我不断收到此错误：

```
Uncaught TypeError: Object function (d,a){this.settings=b.extend(true,{},b.validator.defaults,d);this.currentForm=a;this.init()} has no method 'optional' 
```

`optional`看起来是`$.validator`对象上的一个方法，但我不知道如何调用验证器 url 方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-27T10:24:49.030

jQuery 验证插件 - v1.11.0

```
jQuery.validator.addMethod("complete_url", function(val, elem) {
    // if no url, don't do anything
    if (val.length == 0) { return true; }

    // if user has not entered http:// https:// or ftp:// assume they mean http://
    if(!/^(https?|ftp):\/\//i.test(val)) {
        val = 'http://'+val; // set both the value
        $(elem).val(val); // also update the form element
    }
    // now check if valid url
    // http://docs.jquery.com/Plugins/Validation/Methods/url
    // contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/
    return /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(val);
}); 
```

然后：

```
$("#form1").validate({
    rules: {
        complete_url:true
    }
}); 
```

来自[http://www.robsearles.com/2010/05/jquery-validate-url-adding-http/](http://www.robsearles.com/2010/05/jquery-validate-url-adding-http/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:34:29.240

我设法让它没有错误地工作，这是我使用的 JS 代码：

```
$(document).ready(function(){

    function validateURL(value){
      // URL validation from http://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url
      var expression = /[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi;
      var regex = new RegExp(expression);
      return value.match(regex);
    }

    $.validator.addMethod("urlvalidation", function(value, element) {
      return this.optional(element) || validateURL(value);
    }, "URL is not valid");

    $('#frm_validation').validate({
      rules : {
          urlvalidation : { urlvalidation : true }
      }
    });  

});​ 
```

**[您可以在此 JSFiddle](http://jsfiddle.net/opayen/R5xhC/)上看到它的实际效果。**

# mysql - 按日期频率排序

> ID：12938035
> 
> 赞同：1
> 
> 时间：2012-10-17T15:39:46.670
> 
> 标签：mysql

我有一个包含以下列的 MySQL 数据库：

id (INT) 持续时间 (FLOAT) start_date (DATETIME)

我想获得持续时间和 start_date 列的模态统计信息（频率计数）。

按频率对事件的持续时间进行排序很简单：

```
SELECT duration, COUNT(duration) 
AS frequency 
FROM trips 
GROUP BY duration 
ORDER BY frequency 
DESC; 
```

如果我在 start_date 列上运行相同的查询，我会得到以下形式的结果：

```
(datetime.datetime(2012, 8, 20, 15, 22), 6L) 
```

（我正在使用 python 来访问数据库）。但是，按分钟接收我的查询不一定有帮助——月份、星期几和小时是更有用的查询。我尝试将查询更改为：

```
SELECT MONTH(start_date), COUNT(MONTH(start_date)) 
AS frequency 
FROM trips 
GROUP BY start_date 
ORDER BY frequency 
DESC; 
```

但是，如果我这样做，我就会开始收到有关我的 SQL 语法的错误（错误 1064）。不幸的是，我无法弄清楚错误是什么。

我考虑过将年、月、星期、小时、分钟等放在不同的列中，但我觉得应该可以在查询中选择日期时间字段的子字段。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:44:34.927

start_date 月份的计数频率：

```
SELECT YEAR(start_date), MONTH(start_date), COUNT(*) AS frequency
FROM trips
GROUP BY YEAR(start_date), MONTH(start_date)
ORDER BY frequency DESC; 
```

计算持续时间的频率：

```
SELECT duration, COUNT(*) AS frequency
FROM trips
GROUP BY duration
ORDER BY frequency DESC; 
```

# chm - ms-xhelp 无法识别

> ID：12938037
> 
> 赞同：1
> 
> 时间：2012-10-17T15:39:53.167
> 
> 标签：chm

我正在尝试掌握以 Microsoft Help Viewer 1.0 为代表的相对较新的帮助系统。

我找到了 SDK（位于[http://www.microsoft.com/en-us/download/details.aspx?id=14923](http://www.microsoft.com/en-us/download/details.aspx?id=14923)）并开始着手处理它。我使用帮助库管理器在“演练：品牌包和内容”教程的第 9 步中添加了修改后的帮助文件，但第 10 步告诉我通过在启动“ms-xhelp”的命令提示符中键入命令来查看帮助:///”。命令提示符以通用的无法识别的命令响应进行响应。将整个内容粘贴到 Chrome 中只是进行 Google 搜索，因此显然无法识别它，并将其粘贴到 Internet Explorer 中尝试开始执行某些操作，但随后弹出一条消息“将命令发送到程序时出现问题”。

值得注意的是，这似乎是此处包含“ms-xhelp”的第一篇文章，并且似乎没有任何标签直接相关。

我确实安装了 VS2010，它可以正确运行帮助。如果我修改 Web 浏览器打开的 URL 的尾部，我可以获取新安装的帮助文件，但是捎带一些知道它在做什么的东西是不令人满意的，并且不会告诉我哪里出了问题。有谁知道为什么“ms-xhelp”方法不起作用？

# oracle - 如何实现 ORACLE 到 VERTICA 的复制？

> ID：12938039
> 
> 赞同：0
> 
> 时间：2012-10-17T15:39:55.923
> 
> 标签：oracle, replication, vertica

我正在创建从 Oracle 到 Vertica 的流程！我们正在寻求创建一个可以运行大量报告的 Vertica 数据库。现在一切都很酷 Vertica 快速空间使用非常好，一切都很好，直到我们进入将数据从 Oracle 传输到 Vertica 的主要部分。好的，初始加载没问题，从 Oracle 转储到 csv 到 Vertica，加载时间是个玩笑，到目前为止，每个人的事情都是不好的玩笑，或者发生了一些神奇的事情！好是简单快速。现在坏部分 -> 数据库正在运行 ORACLE/VERTICA - 我在 ORACLE 中更改了数据，因此我需要在 VERTICA 中复制我的数据。现在做什么：根据我的测试以及我对 Vertica 插入的了解，除非每秒最多 20 次，否则不使用更新 - 所以实时复制是不可能的。

因为 VERTICA 中的显式数据更改会导致性能下降。

所以我正在寻找一些关于如何解决这个问题的想法，我知道我不能：

1.  改变我的 ORACLE 生产结构。
2.  使用 ORACLE 环境资源过滤数据。
3.  无法在我的 VERTICA 加载过程中使用插入、更新或删除语句。

我依赖的东西：

1.  复制命令的使用
2.  数据一致性
3.  最多 60 分钟的窗口（每 60 分钟 - 新/更改的数据需要转到 VERTICA）。

我看过Continuent data replication，但现在好像有人想卖他们的产品，我联系不上他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:42:20.970

将整个数据加载到新表然后替换它们是否可以接受？

```
copy new() ...
-- you can swap tables in one command:
alter table old,new,swap rename to swap,old,new;
truncate new; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T19:55:53.503

从 Oracle 中提取数据（以 .csv 格式）并使用 Vertica COPY 命令加载它。编写一个简单的 shell 脚本来自动化这个过程。

我曾经使用 Talend(ETL)，但它非常慢，然后转移到传统工艺，它对我真的很管用。目前处理 18M 条记录，我的整个过程不到 2 分钟。

# android - 按钮扩展：onDraw 方法中的画布不会仅在 Gingerbread 上绘制位图

> ID：12938041
> 
> 赞同：2
> 
> 时间：2012-10-17T15:39:58.970
> 
> 标签：android, android-canvas, ondraw, android-2.3-gingerbread, drawbitmap

方法：

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    if(icon!=null)
    canvas.drawBitmap(icon, iconBounds, buttonBounds, null);
}

public void setIcon(int res) {
    this.icon = BitmapFactory.decodeResource(getResources(), res);
    this.iconBounds = new Rect(0, 0, icon.getWidth(), icon.getHeight());
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    this.setTextScaleX(1.0f);
    bw = MeasureSpec.getSize(widthMeasureSpec)-6;
    if(tw>bw)
        setTextScaleX(bw/tw);
    bh = MeasureSpec.getSize(heightMeasureSpec)-6;
    if(icon!=null) {
        int centerX = (bw+6)/2;
        int centerY = (bh+6)/2;
        int mWidth = icon.getWidth()/2;
        int mHeight = icon.getHeight()/2;
        this.buttonBounds = new Rect(centerX-mWidth, centerY-mHeight, centerX+mWidth, centerY+mHeight);
    }

} 
```

这适用于 Froyo 和冰淇淋三明治，但不适用于 Gingerbread。按钮背景是一个 TransitionDrawable。

# javascript - 在路径的剪切区域内绘制，或者在路径定义的形状内绘制

> ID：12938042
> 
> 赞同：0
> 
> 时间：2012-10-17T15:40:05.797
> 
> 标签：javascript, svg, raphael

我需要在路径区域内随机绘制一系列小圆圈。假设路径是三角形。有没有办法使用 Raphaël 做到这一点？我知道这样的事情可能在计算上很昂贵，所以这是另一个重要的因素。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:54:42.350

看起来很遗憾，您无法使用 Raphaël 定义剪切路径，根据另一篇文章：[Raphaël.js 中的剪辑路径](https://stackoverflow.com/questions/9014673/clip-path-in-raphael-js)

但是 SVG 确实通过 clipPath 元素支持它。演示位于[http://sawyerhollenshead.com/writing/23/using-svg-clippath/](http://sawyerhollenshead.com/writing/23/using-svg-clippath/)

# javascript - JavaScript jq 范围

> ID：12938048
> 
> 赞同：1
> 
> 时间：2012-10-17T15:40:28.697
> 
> 标签：javascript, jquery, razor

这是一个简单的验证模块。现在，我不明白为什么我的函数（validateEmail）不能成功调用。我没有 js 错误，但浏览器使用我的表单彻底验证代码进行回发

```
<script type="text/javascript">
    var Validation;
(function (Validation) {
    var FormValidator = (function () {
        function FormValidator(formid) {
            this.emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
            this.formID = formid;
        }
        FormValidator.prototype.Validate = function () {
            var errorsSum;
            $('#' + this.formID).find('input[type="text"][validate], textarea[validate]').each(function (index, item) {
                var validateType = $(item).attr('validate');
                switch(validateType) {
                    case 'text':
                    case 'password': {
                        errorsSum += FormValidator.prototype.validateText(item);
                        break;

                    }
                    case 'email': {
                        errorsSum += FormValidator.prototype.validateEmail(item);
                        break;

                    }
                }
            });
            return errorsSum == 0;
        };
        FormValidator.prototype.validateGeneric = function (element, validationFunc) {
            var jqElement = $(element);
            alert('tested element = ' + jqElement);
            if(validationFunc(jqElement.val())) {
                alert('tested element error = ' + jqElement.val());
                element.removeClass('error');
                return 0;
            } else {
                element.addClass('error');
            }
            alert('tested element success = ' + jqElement.val());
            return 1;
        };
        FormValidator.prototype.validateEmail = function (element) {
            return FormValidator.prototype.validateGeneric(element, function (elementValue) {
                return FormValidator.prototype.emailPattern.test(elementValue);
            });
        };
        FormValidator.prototype.validateText = function (element) {
            return FormValidator.prototype.validateGeneric(element, function (elementValue) {
                return elementValue != '';
            });
        };
        return FormValidator;
    })();
    Validation.FormValidator = FormValidator;    
})(Validation || (Validation = {}));
</script> 
```

这是我的表格

```
 @using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @id = "register-form", @class = "form-horizontal"}))
    {
        ...    
          @Html.TextBoxFor(m => m.Email, new { @placeholder = @L("Email"), @name = "email", @validate = "email" })
        ...
    } 
```

这是验证码

```
<script type="text/javascript">
    $(function () {
        $('#register-form').submit(function() {
            return (new Validation.FormValidator('register-form').Validate());
        });
    });
</script> 
```

我对js理解的不是很深

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:54:16.230

您需要捕获提交事件并阻止它触发，验证表单，然后在它有效时提交。现在，您在提交 javascript 后就立即运行它，但它只是继续提交，因为您没有停止发出 http 请求。

在相关的说明中，这是一个巨大的混乱。您不需要任何接近那么多代码的东西来验证表单上的电子邮件和文本是否存在。这就是[你所需要](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)的：

```
var validate = function(form){
  var form_valid = true;

  form.find('input[validate], textarea').each(function(index, el){
    var type = el.attr('validate');

    if (type == 'email') {
      if (!el.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/)) { form_valid = false; el.addClass('error'); }
    }

    if (type == 'text') {
      if (!el.val() == '') { form_valid = false; el.addClass('error'); }
    }
  });

  return form_valid
}

$('#register-form').on('submit', function(){
  validate($(this)) && $(this).submit()
}); 
```

希望这可以帮助...

*编辑：使示例更加模块化*

# httpwebrequest - 即使 URL 配置为通过 Siteminder 传递，HttpWebResponse 也会显示 siteminder 登录

> ID：12938051
> 
> 赞同：2
> 
> 时间：2012-10-17T15:40:35.580
> 
> 标签：httpwebrequest, httpwebresponse, .net, siteminder, system.net.httpwebrequest

我被这个问题难住了，并为我的问题向专家们提出了建议。

我有一个启用了 Siteminder 的 ASP.NET MVC 应用程序。此外，此应用程序有一部分 URL，它们是向另一个应用程序提供数据的 Web 服务。这些 URL 已在 Siteminder 设置中配置为“绕过”Siteminder 身份验证。我已经仔细检查了绕过以确保 Siteminder 配置正确。我可以在浏览器中输入这些 URL，并且 JSON 数据显示为“没有”Siteminder 身份验证。**然而....**

**问题是当我使用 HttpWebResponse、Stream 和 StreamReader 在启用站点管理器时检索 JSON 数据时，当调用 StreamReader.ReadToEnd() 而不是 JSON 格式的数据时，我将站点管理器“登录页面 HTML”作为字符串？**

这令人费解，因为我这里的另一个开发人员可以访问相同的 Web 服务并在 PYTHON 应用程序中获取“正确”的 JSON 格式数据。另外，我把它放在一个普通的 ASP.NET 应用程序中，所以它不是 MVC 问题。我得到相同的结果。

**我应该使用另一个类或库吗？我需要将配置设置传递给 Web 服务调用吗？任何帮助将不胜感激。**

这是其中一个 Web 服务调用的代码。

```
 public static string GetData()
    {
        string host = (string)System.Configuration.ConfigurationManager.AppSettings["WEBSERVICE_GET"];
        string URL = host + "Api/GetData";
        var end = string.Empty;

        try
        {
            HttpWebRequest request = WebRequest.Create(URL) as HttpWebRequest;

            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            using (Stream responseStream = response.GetResponseStream())
            {
                if (response.StatusCode != HttpStatusCode.OK && response.StatusCode != HttpStatusCode.Created)
                {
                    throw new HttpException((int)response.StatusCode, response.StatusDescription);
                }

                using (StreamReader reader = new StreamReader(responseStream))
                {
                    end = reader.ReadToEnd();
                    reader.Close();
                }

                responseStream.Close();
                response.Close();

            }

        }
        catch (Exception ex)
        {
            EmailNotification.SendErrorEmail("Could not get Data from WEBSERVICE + ex);
        }

        return end;

    } 
```

# windows-services - 安装 srvany.exe 以使用 InstallShield 将 jar 文件作为服务运行（无需编辑注册表）

> ID：12938052
> 
> 赞同：2
> 
> 时间：2012-10-17T15:40:45.160
> 
> 标签：windows-services, installshield

我们正在尝试安装一个 Java 程序以作为 Windows 服务运行。在各种可用选项（JSW、YAJSW、Launch4J、procrun、WinRun4J 等）中，我们想使用 srvany.exe 并使用 InstallShield 安装它。Windows 文档说...

> 使用 RegEdit：为您的服务创建一个“参数”键（例如`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\MyService\Paramaters\`） 使用 RegEdit：在新创建的“参数”键中，创建一个名为的字符串值`Application`并输入您希望作为服务运行的应用程序的完整路径。

有没有办法在不使用 InstallShield 的注册表编辑器的情况下使用 InstallShield 来实现这一点？是否有一个 InstallScript 调用可以处理向注册表中的 srvany 条目添加和删除“参数”？该解决方案应该适用于 Windows 2008R2 和 2003R2。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:41:03.780

假设您使用的是 Basic MSI 项目类型，我发现 ServiceInstall、ServiceControl 和 Registry 表的组合是一个很好的解决方案。由于 ServAny 实际上只是一个 thunking 层，如果没有 Registry 表的一点帮助，ServiceInstall 表就无法完全描述服务。尽管如此，不需要任何自定义操作，MSI 将非常可靠和强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:53:24.127

由于我们无法在可用时间内找到合适的解决方案，我们决定不使用 srvany.exe。我们决定使用 YAJSW 并在 InstallShield 中使用“文本文件更改”来修改 wrapper.conf 以便 YAJSW 启动我们的 java 应用程序。

# c++ - 检测输入中的整数溢出

> ID：12938053
> 
> 赞同：0
> 
> 时间：2012-10-17T15:40:48.640
> 
> 标签：c++, c, integer, overflow

C 或 C++ 中有没有办法检查用户提供的数字是否超出整数类型的范围？

例如，假设我们使用范围为 -32768 到 32767 的 16 位有符号整数。

如果用户在程序中输入 55555，它将被包装成一个负数，这样如果你使用一个可以接受任何数字的函数，结果将是错误的。

C或C++中有没有办法判断用户提供的数字是否在整数类型的范围内？

* * *

更新：我在一个简单的减法程序中使用这些数字，该程序接受两个数字并从第一个数字中减去第二个数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:44:20.820

如果您使用类似的东西，如果发生溢出，`strtol`它将设置`errno`为`ERANGE`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T15:44:07.793

> > 如果用户在程序中输入55555，这将被包装成负数

不总是。这取决于您如何阅读数字。`operator>>`例如，如果您使用 ，该值将**不会**被包装，它将被拒绝。

> > C或C++中有没有办法判断用户提供的数字是否在整数类型的范围内？

在 C++ 中，只需使用`operator>>`：

```
#include <iostream>
int main() {
  signed short int i;
  std::cin >> i;
  if(std::cin)
    std::cout << "You entered a valid number!\n";
  else
    std::cout << "Aw c'mon, play by the rules.\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:45:23.100

> C 或 C++ 中有没有办法检查用户提供的数字是否超出整数类型的范围？

这取决于您使用的是什么功能（`strtol`例如可以这样做）。检查文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:10:18.450

The only difference between int's and uint's is how INTERPRET them. Your problem has no solution, if it so critical for you consider switching to floating point argument, checking value and typecasting. Update: I thought you want run time check function argument value provided by another programmer, not console input.

# database - 显示自定义表格视图行

> ID：12938054
> 
> 赞同：0
> 
> 时间：2012-10-17T15:40:52.473
> 
> 标签：database, titanium-mobile

我正在尝试从本地数据库中提取数据并将其显示在使用自定义行的 tableview 中。我不知道如何让它正确显示。它当前的写入方式将显示一行，其中正确显示了数据，但它似乎显示了数千个空行。我认为我的问题是因为我有两个`while (rows.isValidRow())`陈述。有人可以告诉我正确显示的代码吗？这是我当前的代码：

```
//Setup the window
var win = Titanium.UI.currentWindow;
win.barColor='#000000';

//install database
var db = Ti.Database.install('bcapool3.sqlite','distributor');

//Get data
var rows = db.execute('SELECT * FROM distributor');

// create table view
var tableview = Ti.UI.createTableView({
    backgroundColor:'transparent',
    color: '#000000',
    top:80,
    height:'auto',
    left:80,
    right:80,
    bottom:120
});

function setData() {

while (rows.isValidRow())
{
var dataArray = [];
var row = Ti.UI.createTableViewRow({
    haschild: true,
    path: 'distributordetail.js'
});
    var title = Ti.UI.createLabel({ 
    color:'#000000',
    height:32,
    left:5,
    top:2,
    font:{fontSize:'18dp',fontWeight:'bold' },
    backgroundColor:'transparent',
    text:'' + rows.fieldByName('distributor_name') + ''
    });

    var address = Ti.UI.createLabel({   
    color:'#000000',
    height:32,
    left:5,
    top:34,
    fontSize:'14dp',
    backgroundColor:'transparent',
    text:'' + rows.fieldByName('distributor_address') + ''
    });

    var distance = Ti.UI.createLabel({  
    color:'#000000',
    height:32,
    right: 10,
    top:34,
    fontSize:'12dp',
    backgroundColor:'transparent',
    text:'' + rows.fieldByName('distance') + ''
    }); 

    row.add(title);
    row.add(address);
    row.add(distance);
    tableview.add(row);
    row.className = 'distributorRow';

    dataArray.push(row);
    rows.next();    
}

// set the array to the tableView
tableview.setData(dataArray);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:13:06.020

你是对的，2个while循环出现问题。您还需要向 dataArray 添加行：`dataArray.push(row);`

然后在while循环之外，将dataArray设置为tableView的数据：`tableview.setData(dataArray);`

我刚刚修改了你的一些代码，它工作正常：

```
//Setup the window
var win = Titanium.UI.createWindow({
    backgroundColor: '#123456',
});

//install database
var db = Ti.Database.open('distributor');
try{
    db.execute('create table if not exists distributor(id varchar(10), distributor_name varchar(10), distributor_address varchar(10), distance varchar(10));');
    db.execute("Insert into distributor values('id1','name1','address1','distance1')");
    db.execute("Insert into distributor values('id2','name2','address2','distance2')");
    db.execute("Insert into distributor values('id3','name3','address3','distance3')");
    db.execute("Insert into distributor values('id4','name4','address4','distance4')");
    db.execute("Insert into distributor values('id5','name5','address5','distance5')");
}
catch(err)
{
    Ti.API.info(err.message);

}

// create table view
var tableview = Ti.UI.createTableView({
    backgroundColor:'transparent',
    color: '#000000',
    top:80,
    height:'auto',
    left:80,
    right:80,
    bottom:120
});

setData();
win.add(tableview);
win.open();

function setData() {
    //db.open();
    var rows = db.execute('SELECT * FROM distributor');
    //db.close();
    var dataArray = [];
    while (rows.isValidRow())
    {
        var row = Ti.UI.createTableViewRow({
            haschild: true,
        });
        var title = Ti.UI.createLabel({ 
            color:'#000000',
            height:32,
            left:5,
            top:2,
            font:{fontSize:'18dp',fontWeight:'bold' },
            backgroundColor:'transparent',
            text:'' + rows.fieldByName('distributor_name') + ''
        });
        var address = Ti.UI.createLabel({   
            color:'#000000',
            height:32,
            left:5,
            top:34,
            fontSize:'14dp',
            backgroundColor:'transparent',
            text:'' + rows.fieldByName('distributor_address') + ''
        });
        var distance = Ti.UI.createLabel({  
            color:'#000000',
            height:32,
            right: 10,
            top:34,
            fontSize:'12dp',
            backgroundColor:'transparent',
            text:'' + rows.fieldByName('distance') + ''
        });
        row.add(title);
        row.add(address);
        row.add(distance);
        dataArray.push(row);
        rows.next();     
    }
    tableview.setData(dataArray);
} 
```

# javascript - 请求太大，IE 无法正常处理

> ID：12938055
> 
> 赞同：1
> 
> 时间：2012-10-17T15:40:53.033
> 
> 标签：javascript, internet-explorer, websync

我正在使用`Websync3`Javascript API，并在一页上订阅大约 9 个不同的频道。Firefox 和 Chrome 没有问题，但 IE9 会抛出警告错误，说明`The request is too large for IE to process properly`.
不幸的是，互联网上几乎没有这方面的信息。那么有没有人有任何线索来解决这个问题？

```
 var client = fm.websync.client;

    client.initialize({ 
        key: '********-****-****-****-************'
    });

    client.connect({
        autoDisconnect: true,
        onStreamFailure: function(args){
            alert("Stream failure");
        },
        stayConnected: true
    });

    client.subscribe({
        channel: '/channel',
        onSuccess: function(args) {
            alert("Successfully connected to stream");
        },

        onFailure: function(args){
            alert("Failed to connect to stream");
        },

        onSubscribersChange: function(args) {
            var change = args.change;
            for (var i = 0; i < change.clients.length; i++) {
                var changeClient = change.clients[i];

                // If someone subscribes to the channel
                if(change.type == 'subscribe') {

                // If something unsubscribes to the channel
                }else{

                }
            }
        },

        onReceive: function(args){
            text = args.data.text;
            text = text.split("=");
            text = text[1];
            if(text != "status" && text != "dummytext"){
                //receiveUpdates(id, serial_number, args.data.text);
            var update = eval('(' + args.data.text + ')');

    }
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T05:10:36.723

当 WebSync 使用 JSON-P 协议进行传输时，会发生此错误。这主要只适用于 IE、跨域环境。这意味着 websync 与您的网页所在的域不同。因此，出于安全原因，IE 不想定期发出 XHR 请求。

JSON-P 基本上将上游数据（您的 9 个频道订阅）编码为 URL 编码字符串，该字符串附加到对服务器的常规请求中。服务器应该解释该 URL 编码的字符串并将响应作为由页面执行的 JavaScript 块发回。

这很好用，除了 IE 对大约 2kb 的 HTTP 请求的整体请求 URL 也有限制。因此，如果您将太多内容打包到对 WebSync 的单个请求中，您可能会超过这个 2kb 的上游限制。

最简单的解决方案是将您的 WebSync 请求分成小块（即：在 JavaScript 中一次只订阅几个频道），或者订阅一个“主频道”，然后编写一个 WebSync BeforeSubscribe 事件来监视它频道并重写订阅频道列表。

我怀疑因为您在上面的示例源中有一个密钥，所以您正在使用 WebSync On-Demand？如果是这种情况，制作 BeforeSubscribe 事件处理程序的唯一方法是创建 WebSync 代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:12:54.613

所以目前，由于其他人也被这个问题难住了，我设置了一个陷阱，如果浏览器是（呃，我的意思是），我`PHP`什至不加载这个`Javascript`脚本。不过，也许将来会有解决方案。`Internet Destroyer``Internet Explorer`

# c# - 在基类中实现的 WinRT 设置弹出窗口不可见？

> ID：12938059
> 
> 赞同：0
> 
> 时间：2012-10-17T15:40:57.563
> 
> 标签：c#, windows-runtime, winrt-xaml

我正在尝试在所有页面中轻松访问设置弹出按钮。我查看了[http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49/sourcecode?fileId=50851&pathId=2033699455](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49/sourcecode?fileId=50851&pathId=2033699455)上的设置示例。

然而，大约有十几个函数，而且必须在每个页面中复制/粘贴/维护未确定数量的相同代码的副本只是愚蠢的。因此，我将弹出窗口的代码放入从基类继承的`LayoutAwarePage`基类中。然后我的页面继承自这个新类。前任：

```
// Base class declaration that includes settings flyout code
public class SettingsFlyoutAwarePage : myApp.Common.LayoutAwarePage
{
    // Settings flyout code here
}

// Page declaration
public sealed partial class GroupedItemsPage : myApp.Common.SettingsFlyoutAwarePage
{
    // Standard working page stuff here
} 
```

下面是创建弹出窗口的实际代码，该代码在`SettingsFlyoutAwarePage`基类中被调用和执行，与示例代码相同，但屏幕上实际上没有出现任何内容：

```
 void onSettingsCommand(IUICommand command)
    {
        // Create a Popup window which will contain our flyout.
        settingsPopup = new Popup();
        settingsPopup.Closed += OnPopupClosed;
        Window.Current.Activated += OnWindowActivated;
        settingsPopup.IsLightDismissEnabled = true;
        settingsPopup.Width = settingsWidth;
        settingsPopup.Height = windowBounds.Height;

        // Add the proper animation for the panel.
        settingsPopup.ChildTransitions = new TransitionCollection();
        settingsPopup.ChildTransitions.Add(new PaneThemeTransition()
        {
            Edge = (SettingsPane.Edge == SettingsEdgeLocation.Right) ?
                   EdgeTransitionLocation.Right :
                   EdgeTransitionLocation.Left
        });

        // Create a SettingsFlyout the same dimenssions as the Popup.
        SettingsFlyout mypane = new SettingsFlyout();
        mypane.Width = settingsWidth;
        mypane.Height = windowBounds.Height;

        // Place the SettingsFlyout inside our Popup window.
        settingsPopup.Child = mypane;

        // Let's define the location of our Popup.
        settingsPopup.SetValue(Canvas.LeftProperty, SettingsPane.Edge == SettingsEdgeLocation.Right ? (windowBounds.Width - settingsWidth) : 0);
        settingsPopup.SetValue(Canvas.TopProperty, 0);
        settingsPopup.IsOpen = true;
    } 
```

虽然我可以单步执行所有代码并且看起来执行得很好，但我从未真正看到弹出窗口出现。至少在理论上可以从继承的基类中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:40:49.737

您是否实现了`onCommandsRequested`演示中描述的功能？

```
void onCommandsRequested(SettingsPane settingsPane, SettingsPaneCommandsRequestedEventArgs eventArgs)
        {
            UICommandInvokedHandler handler = new UICommandInvokedHandler(onSettingsCommand);

            SettingsCommand generalCommand = new SettingsCommand("DefaultsId", "Defaults", handler);
            eventArgs.Request.ApplicationCommands.Add(generalCommand);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:37:08.087

如果这对任何人都有帮助，这里有一个设置弹出感知类，您可以从中继承您的 XAML 页面。当然你还是要自己实现弹窗[（demo代码链接）](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49/sourcecode?fileId=50851&pathId=2033699455)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Windows.Foundation;
using Windows.UI.ApplicationSettings;
using Windows.UI.Popups;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Media.Animation;
using Windows.UI.Xaml.Navigation;

namespace MyApp.Common
{
    [Windows.Foundation.Metadata.WebHostHidden]
    public class MyAppBasePage : MyApp.Common.LayoutAwarePage
    {

        public MyAppBasePage()
        {
        }

        private bool isSettingCharmEventRegistered;

        // Used to determine the correct height to ensure our custom UI fills the screen.
        private Rect windowBounds;

        // Desired width for the settings UI. UI guidelines specify this should be 346 or 646 depending on your needs.
        private double settingsWidth = 646;

        // This is the container that will hold our custom content.
        private Popup settingsPopup;

        protected override void OnNavigatedFrom(NavigationEventArgs e)
        {
            base.OnNavigatedFrom(e);

            // Added to make sure the event handler for CommandsRequested is cleaned up before other scenarios.
            if (this.isSettingCharmEventRegistered)
            {
                SettingsPane.GetForCurrentView().CommandsRequested -= onCommandsRequested;
                this.isSettingCharmEventRegistered = false;
            }

            // Unregister the event that listens for events when the window size is updated.
            Window.Current.SizeChanged -= OnWindowSizeChanged;
        }

        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);

            windowBounds = Window.Current.Bounds;

            // Added to listen for events when the window size is updated.
            Window.Current.SizeChanged += OnWindowSizeChanged;

            // Added to make sure the event handler for CommandsRequested is cleaned up before other scenarios.
            if (!this.isSettingCharmEventRegistered)
            {
                SettingsPane.GetForCurrentView().CommandsRequested += onCommandsRequested;
                this.isSettingCharmEventRegistered = true;
            }
        }

        /// <summary>
        /// Invoked when the window size is updated.
        /// </summary>
        /// <param name="sender">Instance that triggered the event.</param>
        /// <param name="e">Event data describing the conditions that led to the event.</param>
        void OnWindowSizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
        {
            windowBounds = Window.Current.Bounds;
        }

        /// <summary>
        /// We use the window's activated event to force closing the Popup since a user maybe interacted with
        /// something that didn't normally trigger an obvious dismiss.
        /// </summary>
        /// <param name="sender">Instance that triggered the event.</param>
        /// <param name="e">Event data describing the conditions that led to the event.</param>
        private void OnWindowActivated(object sender, Windows.UI.Core.WindowActivatedEventArgs e)
        {
            if (e.WindowActivationState == Windows.UI.Core.CoreWindowActivationState.Deactivated)
            {
                settingsPopup.IsOpen = false;
            }
        }

        /// <summary>
        /// When the Popup closes we no longer need to monitor activation changes.
        /// </summary>
        /// <param name="sender">Instance that triggered the event.</param>
        /// <param name="e">Event data describing the conditions that led to the event.</param>
        void OnPopupClosed(object sender, object e)
        {
            Window.Current.Activated -= OnWindowActivated;
        }

        /// <summary>
        /// This event is generated when the user opens the settings pane. During this event, append your
        /// SettingsCommand objects to the available ApplicationCommands vector to make them available to the
        /// SettingsPange UI.
        /// </summary>
        /// <param name="settingsPane">Instance that triggered the event.</param>
        /// <param name="eventArgs">Event data describing the conditions that led to the event.</param>
        void onCommandsRequested(SettingsPane settingsPane, SettingsPaneCommandsRequestedEventArgs eventArgs)
        {
            UICommandInvokedHandler handler = new UICommandInvokedHandler(onSettingsCommand);

            SettingsCommand generalCommand = new SettingsCommand("DefaultsId", "Defaults", handler);
            eventArgs.Request.ApplicationCommands.Add(generalCommand);
        }

        /// <summary>
        /// This the event handler for the "Defaults" button added to the settings charm. This method
        /// is responsible for creating the Popup window will use as the container for our settings Flyout.
        /// The reason we use a Popup is that it gives us the "light dismiss" behavior that when a user clicks away 
        /// from our custom UI it just dismisses.  This is a principle in the Settings experience and you see the
        /// same behavior in other experiences like AppBar. 
        /// </summary>
        /// <param name="command"></param>
        void onSettingsCommand(IUICommand command)
        {
            // Create a Popup window which will contain our flyout.
            settingsPopup = new Popup();
            settingsPopup.Closed += OnPopupClosed;
            Window.Current.Activated += OnWindowActivated;
            settingsPopup.IsLightDismissEnabled = true;
            settingsPopup.Width = settingsWidth;
            settingsPopup.Height = windowBounds.Height;

            // Add the proper animation for the panel.
            settingsPopup.ChildTransitions = new TransitionCollection();
            settingsPopup.ChildTransitions.Add(new PaneThemeTransition()
            {
                Edge = (SettingsPane.Edge == SettingsEdgeLocation.Right) ?
                       EdgeTransitionLocation.Right :
                       EdgeTransitionLocation.Left
            });

            // Create a SettingsFlyout the same dimenssions as the Popup.
            SettingsFlyout mypane = new SettingsFlyout();
            mypane.Width = settingsWidth;
            mypane.Height = windowBounds.Height;

            // Place the SettingsFlyout inside our Popup window.
            settingsPopup.Child = mypane;

            // Let's define the location of our Popup.
            settingsPopup.SetValue(Canvas.LeftProperty, SettingsPane.Edge == SettingsEdgeLocation.Right ? (windowBounds.Width - settingsWidth) : 0);
            settingsPopup.SetValue(Canvas.TopProperty, 0);
            settingsPopup.IsOpen = true;
        }
    }
} 
```

# internet-explorer-8 - slickgrid：仅在 IE 右侧的额外列

> ID：12938060
> 
> 赞同：4
> 
> 时间：2012-10-17T15:40:59.763
> 
> 标签：internet-explorer-8, slickgrid

**问题**：在 Internet Explorer 7 和 8 中，slickgrid 的最右侧出现了一个额外的列。

我采用了[最基本的 slickgrid 示例](http://mleibman.github.com/SlickGrid/examples/example1-simple.html)并将其放入我的应用程序中。所有的脚本、css 等都在那里并且工作正常。在 Chrome 和 Firefox 中，网格呈现**完美**，即使使用 forceFitColumns: true。

我搜索了 SO 并发现了一些[类似的问题](https://stackoverflow.com/questions/11115409/extra-column-in-slickgrid)，但最终我相信这是不同的。

关于如何解决这个问题的任何想法？不幸的是，我们的用户现在被 IE8 困住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:11:45.410

回答了我自己的问题。在分配/生成列的脚本代码末尾有一个额外的逗号。掌心。

我本来打算删除这个问题，但我认识的另一个开发人员碰巧犯了同样的错误；所以希望这可以帮助其他人在未来。

# facebook - 在 Facebook 应用程序之外加载 Javascript SDK

> ID：12938065
> 
> 赞同：0
> 
> 时间：2012-10-17T15:41:06.747
> 
> 标签：facebook, facebook-javascript-sdk, facebook-app-requests

我正在研究一个用例，建议某些 Facebook 用户可能会邀请他的朋友使用给定的 Facebook 应用程序，无论该用户是否正在使用该应用程序。这意味着从 App Canvas 之外的 Facebook JS SDK 调用对话框。

简单地在远程页面中包含脚本路径太容易了。所以我的问题是，是否可以通过编程方式从任意域加载 JS SDK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:46:06.127

> 所以我的问题是，是否可以通过编程方式从任意域加载 JS SDK？

当然是——无数网站都在使用它，在 Facebook 之外。

不过，您可能必须在应用设置中指定域。否则，Facebook 将不允许从真正的“任意”域登录/连接到应用程序等功能。

# c++ - 如何在 OSX 上用 c++ 编写旋转光标？

> ID：12938066
> 
> 赞同：1
> 
> 时间：2012-10-17T15:41:07.160
> 
> 标签：c++, macos, console

我需要一个用于命令行程序的旋转光标形式的进度指示器。我阅读了几个线程，建议使用退格符 \b 删除最后一个打印的字符。但是，在 OSX 上将 \b 与 cout 一起使用时，结果是一些 UTF-8 字符（一个倒置的问号）。

有谁知道是否有办法用标准 C++ 手段解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:48:07.557

您可以使用[ncurses 库](http://en.wikipedia.org/wiki/Ncurses)进行跨平台终端访问。您可以使用它制作漂亮的纯文本 UI。

# c++ - 如何清除gdb命令屏幕？

> ID：12938067
> 
> 赞同：54
> 
> 时间：2012-10-17T15:41:12.193
> 
> 标签：c++, c, gcc, gdb, binutils

是否可以清除gdb的命令窗口？`clear`我的意思是，gdb 中是否有与bash 终端中的命令执行相同（对于命令窗口）的命令？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-17T15:42:19.823

打`Control + L`。适用于我在 Linux 和 Mac OS X 以及最新版本的 GDB 中。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-10-17T15:43:58.757

根据环境，您可以尝试以下组合键：`Ctrl`+ `L`。即：按住*Control*键，然后键入*L*键。

但这可能不适用于所有环境。您还可以尝试以下操作：在 gdb 中，您可以使用以下命令执行 shell 命令`shell`：使用它来调用 shell 以清除终端：

```
shell clear 
```

# django - 在 django 中执行命令

> ID：12938072
> 
> 赞同：0
> 
> 时间：2012-10-17T15:41:32.347
> 
> 标签：django, shell, python-2.7

我一直在使用 PaaS 服务 AppFog 并且能够让我的 Django 启动并运行，但问题是我的应用程序使用静态文件并且这不起作用，因为它需要在 shell中执行**collectstatic命令。**

我一直在互联网上阅读它，但我无法找到合适的解决方案。我应该制作一个shell文件并执行它吗？如何？

我很感激你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:40:09.690

您可以使用以下命令执行**collectstatic ：**

```
python manage.py collectstatic 
```

这称为行政管理命令。您可以通过阅读[https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/](https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/)了解更多关于这些和实施它们的信息。

# c# - ComboBoxItems 不能正确选择？

> ID：12938074
> 
> 赞同：0
> 
> 时间：2012-10-17T15:41:46.293
> 
> 标签：c#, wpf, controls

我的一个应用程序的`ComboBox`es 有问题。我有一个将 a 设置`List<T>`为`ItemSource`of的方法`ComboBox cmbCombo`。为了快速测试，我创建了两个项目，其`CategoryName`属性（类型`string`）是“B”和“TH”。现在，如果我设置`DisplayMemberPath="CategoryName"`一切正常，但如果我尝试选择“B”，则没有任何反应。选择“TH”没有问题，但“B”不起作用。我发现我必须准确地将鼠标悬停在文本“B”上才能选中它。即使我将鼠标悬停在项目的空白区域上，“TH”项目也会被选中。

这是我正在设置的来源的摘录，`ComboBox.ItemSource`但我认为没有任何错误：

```
List<MissionCategory> categoryList = MissionCategoryHandler.MissionCategoryList;
cmbMissionCategory.ItemsSource = categoryList;
cmbMissionCategory.DisplayMemberPath = "CategoryName";
cmbMissionCategory.Background = Brushes.WhiteBrush; 
```

如您所见，我将其设置`Background`为 WhiteBrush（`SolidColorBrush`带有#FFFFFFFF 的 a）。我认为这可能会有所帮助，因为它有助于在其他情况下不让应用程序无法掌握的背景透明（例如，当尝试拖动用户控件时）:) 不幸的是，这并没有解决我的问题。

有没有什么办法解决这一问题？提前致谢！

编辑：我只是注意到有时“TH”项目也没有被正确选择:(

# java - net.sf.josql 是什么以及在哪里？

> ID：12938083
> 
> 赞同：2
> 
> 时间：2012-10-17T15:42:09.853
> 
> 标签：java, maven, activemq

查看 maven Central 中的这个 pom（以及其他各种 pom）： [http://repo1.maven.org/maven2/org/apache/activemq/activemq-optional/5.6.0/activemq-optional-5.6.0。绒毛](http://repo1.maven.org/maven2/org/apache/activemq/activemq-optional/5.6.0/activemq-optional-5.6.0.pom)_

在这些 pom 中依赖于 net.sf.josql

```
<dependency>
  <groupId>net.sf.josql</groupId> 
  <artifactId>josql</artifactId> 
</dependency>
<dependency>
  <groupId>net.sf.josql</groupId> 
  <artifactId>gentlyweb-utils</artifactId> 
</dependency> 
```

当您尝试[http://mvnrepository.com/artifact/net.sf.josql/josql](http://mvnrepository.com/artifact/net.sf.josql/josql)时，它会返回 404。

那么......为什么 maven Central 会有一个 pom 包含在 maven Central 中找不到的依赖项？

事实上，我在 jboss 或 maven 中央存储库中都找不到 net.sf.josql。

它是什么，我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:55:59.353

从[指南到将工件上传到中央存储库](http://maven.apache.org/guides/mini/guide-central-repository-upload.html#FAQ_and_common_mistakes)：

> **我的 POM 中列出了其他存储库或 pluginRepositories，这是一个问题吗？**
> 
> 目前，这不会排除您的项目被包含在内，但我们强烈建议确保您的所有依赖项都包含在 Central 中。如果您依赖于其中有垃圾或消失的粗略存储库，它只会为下游用户造成破坏。尝试将您的依赖关系保持在可靠的存储库（如 Central、Jboss 等）之间。

很明显，阿帕奇希望人们这样做，但他们并没有彻底执行。

谷歌搜索你的工件，它似乎托管在这里：[http](http://repo.fusesource.com/maven2/) ://repo.fusesource.com/maven2/ 。您需要将此作为附加存储库添加到您的 POM 或设置文件中（有关符文，请参见[http://maven.apache.org/guides/mini/guide-multiple-repositories.html ）。](http://maven.apache.org/guides/mini/guide-multiple-repositories.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-10T00:31:52.453

```
<repository>
  <id>repo.fusesource.com</id>
  <name>repo.fusesource.com</name>
  <url>http://repo.fusesource.com/maven2-legacy/</url>
  <layout>default</layout>
</repository> 
```

请将此添加到您的 pom.xml

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-01T11:43:16.113

我对 Apollo 1.7.1 有同样的问题。我在 apache-apollo-1.7.1-windows-distro.zip（apache-apollo-1.7.1\lib 文件夹）中找到了所有依赖项。

所以我只是在 apache-apollo-1.7.1\lib 中运行

```
mvn install:install-file -Dfile=proton-0.3.0-fuse-2.jar -DgroupId=org.apache.qpid -DartifactId=proton-hawtdispatch -Dversion=0.3.0-fuse-2 -Dpackaging=jar
mvn install:install-file -Dfile=josql-1.5.jar -DgroupId=net.sf.josql -DartifactId=josql -Dversion=1.5 -Dpackaging=jar
mvn install:install-file -Dfile=gentlyweb-utils-1.5.jar -DgroupId=net.sf.josql -DartifactId=gentlyweb-utils -Dversion=1.5 -Dpackaging=jar 
```

# jquery - 使用 jquery 附加到 div

> ID：12938087
> 
> 赞同：0
> 
> 时间：2012-10-17T15:42:25.750
> 
> 标签：jquery, html

我有以下 HTML 代码。这是一个弹出窗口，里面有一个可折叠的列表项：

```
<div data-role="popup" id="wavelistPopup" class="ui-content">
    <div id="wavlistContainer" data-role="collapsible-set" data-theme="c" data-content-theme="c" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" style="margin:0; width:250px;">
        <div data-role="collapsible" data-inset="false">
            <h2>Wave1</h2>
            <ul data-role="listview">
                <li>Entfernung: </li>
                <li>Von Autor:</li>
                <li>Schwierigkeit:</li>
                <li>Beschreibung:</li>
                <li><a data-rel="dialog">Erfahrungsberichte</a></li>
                <li><a data-rel="dialog">Wissenswertes</a></li>
                <li><a data-rel="dialog">&Auml;hnliche Waves</a></li>
            </ul>
            <button>Sync</button>
            <button>L&ouml;schen</button>
        </div><!-- /collapsible -->

    </div><!-- /collapsible set -->
</div><!-- /popup --> 
```

现在我想使用以下代码向 wavlistcontainer 添加另一个可折叠：。为此，我首先进行 ajax 调用并在回调函数中工作。

```
function populateWaveList(){
    console.log("populateWaveList");
    requestWavesInArea(position.position.coords.latitude, position.position.coords.longitude,  
            position.position.coords.latitude+5, position.position.coords.longitude+5, 10, 
            function(waves){ //after AJAX call
            console.log(waves);
                for(var wavei in waves){ // for every element to add
                    var content = "";
                    var wave = waves[wavei];
                    console.log(wave);
                    var content =+ jQuery('somestring';     '<div data-role="collapsible" data-inset="false">'+
                                '<h2>'+wave.name+'</h2>'+
                                '<ul data-role="listView">'+    
                                        '<li>Entfernung von Autor: '+'...'+'</li>'+
                                        '<li>Autor: '+wave.creatorname+'</li>'+
                                        '<li>Beschreibung: '+wave.description+'</li>'+
                                        '<li>Umfang: '+'...'+'</li>'+
                                        '<li>Terrain: '+wave.terrainType+'</li>'+
                                        '<li>Autor: '+wave.creatorname+'</li>'+
                                        '<li>Schwierigkeit: '+wave.difficulty+'</li>'+
                                        '<li>ID: '+wave.waveId+'</li>'+
                                        '<li>Datum: '+wave.created+'</li>'+
                                    '</ul>'+
                                    '<button disabled="disabled">Sync</button>'+
                                    '<button disabled="disabled">L&ouml;schen</button>'+
                                '</div>');
                    console.log(content); // returns 'false'
                    $('#wavelistContainer').append(content);
                }
                $('#wavelistPopup').popup('open', { x : 460, y : 180 });
    });
} 
```

当我打印内容时，我得到`false`了这让我非常困惑。任何人都可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:44:10.790

两个问题：

*   你正在使用`=+`而不是`+=`
*   您很快将 html 转换为 jquery 对象

这一行：

```
​var content =+ 'somestring'; 
```

是相同的

```
​var content = 0 + 'somestring'; 
```

等产生`NaN`。

代替

```
content =+  jQuery('<div data-role="collapsible" data-inset="false">'+ 
```

做

```
content +=  '<div data-role="collapsible" data-inset="false">'+ 
```

请注意，为了获得更好的性能，您还应该只构建一个`content`字符串并只添加一次（在循环之前声明它，并在循环之后附加它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:47:06.933

你的代码有问题

```
 content =+  jQuery('<div data-role="collapsible" data-inset="false">'+
--------------^-----^
                                    '<h2>'+wave.name+'</h2>'+
                                    '<ul data-role="listView"'>+    
--------------------------------------------------------------^ 
```

应该

```
content +='<div data-role="collapsible" data-inset="false">'+
                                    '<h2>'+wave.name+'</h2>'+
                                    '<ul data-role="listView">'+ 
```

# javascript - 在同一页面中显示表单输入

> ID：12938095
> 
> 赞同：1
> 
> 时间：2012-10-17T15:42:40.793
> 
> 标签：javascript

我正在做一个简单的表单演示，我希望输入显示在表单下方。目前我有它填充在控制台中。当我单击提交按钮时，它如何显示在 div 中？我的代码：

```
$(document).ready(function() {
    $('.submitForm').on('click',function(event){
        event.preventDefault();     

        $('#firstName').val();
        $('#lastName').val();
        $('#phoneNumber').val();
        $('#address').val();    

        console.log($('#firstName').val());
        console.log($('#lastName').val());
        console.log($('#phoneNumber').val());
        console.log($('#address').val());
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:49:56.427

```
$(document).ready(function() {
    $('.submitForm').on('click',function(event){
        event.preventDefault();                         
        //$('#firstName').val();
        //$('#lastName').val();
        //$('#phoneNumber').val();
        //$('#address').val();   

        var htmlContent = $('#firstName').val() + '<br />' + $('#lastName').val() + '<br />' + $('#phoneNumber').val() + '<br />' + $('#address').val();

        $('#ID_OF_YOUR_DIV_HERE').html(htmlContent);
    }); 
}); 
```

也许这就是你所追求的？？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:50:44.047

好吧，您目前没有将值放在任何地方，而是放在 console.log 中。

我希望看到类似的东西（让我们称您希望值转到的 div 为“输出”）：

```
$(document).ready(function() {
    $('.submitForm').on('click',function(event){
        event.preventDefault();

        // Borrowing from another response, this is better
        // Putting these in variables protects you from 
        // 1) accidentally modifying your form values
        // 2) invalid input, if you add some basic checks, like
        //    testing to see if the length is > 0, doesn't contain
        //    bad characters, etc.
        var firstName = $('#firstName').val(),
            lastName  = $('#lastName').val(),
            phone     = $('#phoneNumber').val(),
            address   = $('#address').val();

        // get a reference to the div you want to populate
        var $out = $("#output");

        // This is a better way of dealing with this
        // because every call to .append() forces DOM
        // reparsing, and if you do this too often, it can cause
        // browser slowness. Better to put together one string
        // and add it all at once.
        $out.html("<p>" + firstName + "</p>" + 
                  "<p>" + $('#lastName').val() + "</p>" +
                  "<p>" + $('#phoneNumber').val() + "</p>" + 
                  "<p>" + $('#address').val() + "</p>");                    
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:51:17.073

```
$(document).ready(function() {
    $('.submitForm').on('click',function(event){
        event.preventDefault();     
        $(this).after('<div>First name: '+$('#firstName').val()+'<br>'+
        'Last name: '+$('#lastName').val()+
        ' .... ');

    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:52:20.693

`.val()`首先，您阅读但不做任何事情的四行基本上是浪费的周期，您可能打算将它们存储在变量中：

```
var firstName = $('#firstName').val();
var lastName = $('#lastName').val();
var phoneNumber = $('#phoneNumber').val();
var address = $('#address').val(); 
```

要在其他元素中显示它们，请使用`.val()`输入类型的 setter 版本，或者`.text()`如果它是显示类型（div、span 等）：

```
$('#someOtherElement').text(firstName + '\n' + 
    lastName + '\n' 
    phoneNumber + '\n' 
    address); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-17T15:50:27.957

例如，您可以使用 .append() 将其添加到所需的 div

```
$("#divYouWantToAddTo").append($('#firstName')); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-17T15:50:41.710

我不知道从哪里开始......`$('#....').val()`中间有什么，浪费时间只是为了扔掉结果......？

与其`document.getElementById('...').value`浪费时间创建一个完整的 jQuery 对象只是为了访问一些琐碎的东西，这有什么问题？

向节点添加文本非常简单`container.appendChild(document.createTextNode(sometext));`- 如果您想在它们之间添加换行符，您也可以这样做`container.appendChild(document.createElement('br'));`。

这里根本不需要 jQuery...

# ajax - 在 http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js/eval/seq 遇到警报（“hello world”）

> ID：12938099
> 
> 赞同：0
> 
> 时间：2012-10-17T15:42:54.287
> 
> 标签：ajax, jquery

我有大约 20 个类似的块。并在单击每个块时进行 ajax 调用以检索与该块有关的内容。当我继续随机单击每个块时，大约单击 10 次后，我从上面指定的文件中收到一条警告消息，上面写着“hello world”。该文件在我的代码中不存在。

块本身是由 ajax 调用生成的。

所以当我研究他们说解除绑定和绑定调用将解决问题。

所以因为这是一个ajax调用生成的块，我试过了

```
$(".hello").die("click").live("click",function(){ //code }); 
```

但问题仍然存在。我不断遇到“hello world”消息。我什至尝试在 click 函数中给出 die 消息并在函数执行后触发点击。但这会一起禁用点击功能。

```
$(".hello").live("click",function(){
        $('.hello').die();
        //some code
        $("hello").live("click",function);
}); 
```

[http://jsfiddle.net/ke4CQ/28/](http://jsfiddle.net/ke4CQ/28/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:35:45.607

我的理解是：当 JavaScript 引擎动态编译一段新代码时（例如，通过您调用`eval()`或通过 Firebug 控制台），它将使用源 URI 标记代码。在 Firefox 中，这些动态 URI 的末尾有类似“eval/seq/1”的内容。

这有点类似于 Java 处理父类“Foo”的内部类“Bar”的方式：类名变为“Foo$Bar”。

# javascript - 从 adwords 广告中跟踪用户以提交表单

> ID：12938101
> 
> 赞同：0
> 
> 时间：2012-10-17T15:43:01.850
> 
> 标签：javascript, google-analytics, google-ads-api

所以一个客户让我创建一个转化跟踪

他这样说：

> 您可以为我们创建一个 Google Analytics（分析）转化吗？我们想跟踪有多少点击了广告词的用户在联系页面上提交了表单。

我在 AdWords 上创建了一个转换代码跟踪，并使用这个小脚本来跟踪用户：

```
jQuery('form').submit(function() {
    var google_conversion_id = 123456789;
    var google_conversion_label = 'das098das098ads809';
    var image = new Image(1,1);
    image.src = 'http://www.googleadservices.com/pagead/conversion/'+google_conversion_id+'/imp.gif?value=0&label='+google_conversion_label+'&guid=ON&script=0';
}); 
```

现在我想知道这是否是他要求的？这会从广告中跟踪用户吗？
我以前从未使用过adwords，所以我对这一切有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T21:09:18.900

如果您有唯一的图像转换代码（[示例](http://i.imgur.com/VnYQM.png)），那么您所拥有的应该可以工作（如下所示）。

```
jQuery('form').submit(function () {
    new Image().src = 'REPLACE_WITH_IMG_URL';
}); 
```

如果您有 javascript 代码版本（[示例](https://gist.github.com/3912154)）并且有一个“感谢您与我们联系”页面，您最好将原始代码粘贴到该页面上，因为您通过运行 javascript 文件将更多信息发送回 Adwords（其中生成带有浏览器大小等的更详细的图像请求...）而不是上面的内联图像请求。

您在原始答案中的以上仅供参考的代码应该可以工作。

# android - Android Bootstrap mvn clean package错误

> ID：12938104
> 
> 赞同：1
> 
> 时间：2012-10-17T15:43:07.573
> 
> 标签：android, eclipse, maven, intellij-idea, android-bootstrap

我正在尝试使用 android 引导程序：[https ://github.com/donnfelker/android-bootstrap](https://github.com/donnfelker/android-bootstrap)

所以我按照说明进行操作：

*   从网站生成应用程序
*   安装 Maven（此处为 Windows 7）
*   添加一些环境变量（JAVA_HOME、M2、M2_HOME、ANDROID_HOME）
*   检查 Maven 是否成功安装（cmd > mvn --version）

一切看起来都很好。

所以我从应用目录尝试下一个命令：

```
mvn clean package 
```

我在构建过程中遇到了一些错误：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 41.770s
[INFO] Finished at: Wed Oct 17 17:22:28 CEST 2012
[INFO] Final Memory: 14M/66M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:andr
oid-maven-plugin:3.3.0:proguard (default-proguard) on project com-jschmitt-diale
r: MojoExecutionException: ANDROID-040-001: Could not execute: Command = cmd.exe
 /X /C ""C:\Program Files (x86)\Java\jdk1.7.0_02\jre\bin\java" -Xmx512M -jar "C:
\Program Files (x86)\Android\android-sdk\tools\proguard\lib\proguard.jar" @../pr
oguard.cfg -injars C:\Users\Julien\Documents\Android\Bootstrap\app\target\classe
s -injars C:\Users\Julien\.m2\repository\com\google\code\gson\gson\2.1\gson-2.1.
jar(!META-INF/maven/**,!META-INF/MANIFEST.MF) -injars C:\Users\Julien\.m2\reposi
tory\com\github\rtyley\roboguice-sherlock\1.4\roboguice-sherlock-1.4.jar(!META-I
NF/maven/**,!META-INF/MANIFEST.MF) -injars C:\Users\Julien\.m2\repository\org\ro
boguice\roboguice\2.0\roboguice-2.0.jar(!META-INF/maven/**,!META-INF/MANIFEST.MF
) -injars C:\Users\Julien\.m2\repository\com\google\inject\guice\3.0\guice-3.0-n
o_aop.jar(!META-INF/maven/**,!META-INF/MANIFEST.MF) -injars C:\Users\Julien\.m2\
repository\javax\inject\javax.inject\1\javax.inject-1.jar(!META-INF/maven/**,!ME
TA-INF/MANIFEST.MF) -injars C:\Users\Julien\.m2\repository\aopalliance\aopallian
ce\1.0\aopalliance-1.0.jar(!META-INF/maven/**,!META-INF/MANIFEST.MF) -injars C:\
Users\Julien\.m2\repository\com\google\android\support-v4\r7\support-v4-r7.jar(!
META-INF/maven/**,!META-INF/MANIFEST.MF) -injars C:\Users\Julien\.m2\repository\
com\github\kevinsawicki\http-request\2.1\http-request-2.1.jar(!META-INF/maven/**
,!META-INF/MANIFEST.MF) -injars C:\Users\Julien\.m2\repository\com\nineoldandroi
ds\library\2.2.0\library-2.2.0.jar(!META-INF/maven/**,!META-INF/MANIFEST.MF) -in
jars C:\Users\Julien\.m2\repository\com\github\kevinsawicki\android-pusher\0.6\a
ndroid-pusher-0.6.jar(!META-INF/maven/**,!META-INF/MANIFEST.MF) -libraryjars "C:
\Program Files (x86)\Java\jdk1.7.0_02\jre\lib\rt.jar" -libraryjars "C:\Program F
iles (x86)\Java\jdk1.7.0_02\jre\lib\jsse.jar" -libraryjars "C:\Program Files (x8
6)\Java\jdk1.7.0_02\jre\lib\jce.jar" -libraryjars C:\Users\Julien\.m2\repository
\com\google\android\android\4.1.1.4\android-4.1.1.4.jar(!org/xml/**,!org/w3c/**,
!org/apache/http/**,!java/**,!javax/**,!android/net/http/AndroidHttpClient.class
) -libraryjars C:\Users\Julien\.m2\repository\commons-logging\commons-logging\1.
1.1\commons-logging-1.1.1.jar -libraryjars C:\Users\Julien\.m2\repository\org\ap
ache\httpcomponents\httpclient\4.0.1\httpclient-4.0.1.jar -libraryjars C:\Users\
Julien\.m2\repository\org\apache\httpcomponents\httpcore\4.0.1\httpcore-4.0.1.ja
r -libraryjars C:\Users\Julien\.m2\repository\commons-codec\commons-codec\1.3\co
mmons-codec-1.3.jar -libraryjars C:\Users\Julien\.m2\repository\org\khronos\open
gl-api\gl1.1-android-2.1_r1\opengl-api-gl1.1-android-2.1_r1.jar -libraryjars C:\
Users\Julien\.m2\repository\xerces\xmlParserAPIs\2.6.2\xmlParserAPIs-2.6.2.jar -
libraryjars C:\Users\Julien\.m2\repository\xpp3\xpp3\1.1.4c\xpp3-1.1.4c.jar -lib
raryjars C:\Users\Julien\.m2\repository\org\json\json\20080701\json-20080701.jar
 -libraryjars C:\Users\Julien\.m2\repository\com\actionbarsherlock\library\4.1.0
\library-4.1.0.jar -outjars 'C:\Users\Julien\Documents\Android\Bootstrap\app\tar
get\proguard-obfuscated.jar' -dump 'C:\Users\Julien\Documents\Android\Bootstrap\
app\target\proguard\dump.txt' -printseeds 'C:\Users\Julien\Documents\Android\Boo
tstrap\app\target\proguard\seeds.txt' -printusage 'C:\Users\Julien\Documents\And
roid\Bootstrap\app\target\proguard\usage.txt' -printmapping 'C:\Users\Julien\Doc
uments\Android\Bootstrap\app\target\proguard\mapping.txt'", Result = 1 -> [Help
1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionE
xception 
```

因为这是我第一次使用 Android Bootstrap 和 Maven，所以我不明白这是什么错误以及如何纠正它......

如果您需要更多信息，例如 POM 文件或详细环境变量，请随时问我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:43:23.177

您的 java bin 路径中有空格。Java/Proguard 太愚蠢了，无法处理。

# java - HttpResponse 不起作用

> ID：12938106
> 
> 赞同：0
> 
> 时间：2012-10-17T15:43:13.990
> 
> 标签：java, android, httpresponse

因此，当我尝试运行以下代码时，我永远无法超过响应行。我究竟做错了什么？我在清单文件中允许访问互联网。我一定遗漏了一些巨大的东西，因为我看到了大约 100 个与我具有完全相同代码的类似示例。我什至构建了示例项目来运行这几行代码，它们的行为方式都相同。请帮助（最终目标是使这项工作也与 https 一起工作，但任何进展使其与 http 一起工作对我来说已经足够了）

```
try{

                        HttpClient myHttpClient = new DefaultHttpClient();
                        HttpPost myHttpPost = new HttpPost("http://www.siirretytnumerot.fi/index.html?clientLanguage=eng");
                       //^Ive tried about 10 different sites (http and https) none of them work

                        //NEVER GETS PAST THE LINE BELOW, JUMPS TO THE LAST CATCH BLOCK OF THE EXCEPTION
                        HttpResponse response = myHttpClient.execute(myHttpPost);
                        //NEVER GETS PAST THE ABOVE LINE...

                        String data = EntityUtils.toString(response.getEntity());
                        json= new JSONObject(data);
                    //parse the JSONObject
                       } catch (UnsupportedEncodingException e){e.printStackTrace();}
                         catch (ClientProtocolException e){e.printStackTrace();}
                         catch (IOException e){e.printStackTrace();}
                         catch (JSONException e) {e.printStackTrace();}
                         catch (NullPointerException e){ Log.e("My APP", "exception: " + e.getMessage());}
                         catch (Exception e ) {Log.e("My APP", "exception", e);} 

10-17 15:31:41.423: E/My APP(974): exception
10-17 15:31:41.423: E/My APP(974): android.os.NetworkOnMainThreadException
10-17 15:31:41.423: E/My APP(974):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
10-17 15:31:41.423: E/My APP(974):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
10-17 15:31:41.423: E/My APP(974):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
10-17 15:31:41.423: E/My APP(974):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
10-17 15:31:41.423: E/My APP(974):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
10-17 15:31:41.423: E/My APP(974):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10-17 15:31:41.423: E/My APP(974):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
10-17 15:31:41.423: E/My APP(974):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
10-17 15:31:41.423: E/My APP(974):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
10-17 15:31:41.423: E/My APP(974):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
10-17 15:31:41.423: E/My APP(974):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
10-17 15:31:41.423: E/My APP(974):  at com.example.httpstuff.MainActivity$1.onClick(MainActivity.java:44)
10-17 15:31:41.423: E/My APP(974):  at android.view.View.performClick(View.java:3511)
10-17 15:31:41.423: E/My APP(974):  at android.view.View$PerformClick.run(View.java:14105)
10-17 15:31:41.423: E/My APP(974):  at android.os.Handler.handleCallback(Handler.java:605)
10-17 15:31:41.423: E/My APP(974):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-17 15:31:41.423: E/My APP(974):  at android.os.Looper.loop(Looper.java:137)
10-17 15:31:41.423: E/My APP(974):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-17 15:31:41.423: E/My APP(974):  at java.lang.reflect.Method.invokeNative(Native Method)
10-17 15:31:41.423: E/My APP(974):  at java.lang.reflect.Method.invoke(Method.java:511)
10-17 15:31:41.423: E/My APP(974):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-17 15:31:41.423: E/My APP(974):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-17 15:31:41.423: E/My APP(974):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:55:39.853

完美，这就是我想要的。查找 NetworkOnMainThreadException，我们得到[这个页面](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。这意味着您不能在应用程序的主线程上运行 HTTP 请求，但只能在以 Honeycomb 为目标时运行。

因此，解决此问题的最简单方法是针对不同的 Android 版本。也许是 2.3，或者到 Jellybean。另一种解决方法是设置一个 AsyncTask 来运行 HTTP 请求。

如果它适用于您针对不同的 Android 版本，请执行此操作。如果没有，我可以帮助您解决 AsyncTask。但是，请记住，他们强烈建议您*不要*在主线程上运行网络请求。

至于 AsyncTasks，最好的地方总是[Android 文档](http://developer.android.com/reference/android/os/AsyncTask.html)。

基本思想是扩展 AsyncTask 类，这使您实现 doInBackground 方法。然后创建新类的实例，并调用 execute()。这是文档中的代码片段：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
    protected Long doInBackground(URL... urls) {
        int count = urls.length;
        long totalSize = 0;
        for (int i = 0; i < count; i++) {
            totalSize += Downloader.downloadFile(urls[i]);
            publishProgress((int) ((i / (float) count) * 100));
            // Escape early if cancel() is called
            if (isCancelled()) break;
        }
        return totalSize;
    }

    protected void onProgressUpdate(Integer... progress) {
        setProgressPercent(progress[0]);
    }

    protected void onPostExecute(Long result) {
        showDialog("Downloaded " + result + " bytes");
    }
}

new DownloadFilesTask().execute(url1, url2, url3); 
```

# python - 正则表达式代码不起作用（Python）

> ID：12938108
> 
> 赞同：0
> 
> 时间：2012-10-17T15:43:24.770
> 
> 标签：python, regex

假设我有一个词`AB1234XZY`甚至`1AB1234XYZ`.

我只想提取“AB1234”或`1AB1234`（即直到最后的字母）。

我已经使用以下代码来提取它，但它不起作用：

```
base= re.match(r"^(\D+)(\d+)", word).group(0) 
```

当 I 时`print base`，它不适用于第二种情况。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:51:48.450

`(.+?\d+)\w+`会给你你想要的。

甚至是这样的

```
^(.+?)[a-zA-Z]+$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:59:36.400

您的正则表达式不适用于第二种情况，因为它以数字开头；`\D`模式开头的 匹配任何不是数字的东西。

**您应该能够为此使用一些非常简单的东西**——事实上，比我在这里看到的任何其他东西都要简单。

```
'.*\d' 
```

而已！这应该匹配所有内容，包括字符串中的最后一个数字，并忽略之后的所有内容。

[这是在线工作的模式](http://fiddle.re/cupp)，因此您可以自己查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:13:27.777

`re.match`从字符串的开头开始，并`re.search`简单地在字符串中查找它。都返回第一场比赛。`.group(0)`是匹配中包含的所有内容，如果您有捕获组，那么`.group(1)`是第一个组......等等......与正常约定相反，其中 0 是第一个索引，在这种情况下，0 是一个特殊用例，意味着一切.

在您的情况下，取决于您真正需要捕获的内容，也许使用`re.search`更好。而不是使用2组，您可以使用`(\D+\d+)`记住，它将捕获第一个（非数字，数字）组。这对您来说可能就足够了，但您可能想要更具体。

在阅读了您的评论“最后字母之前的所有内容”之后

这个正则表达式是你需要的：

```
regex = re.compile(r'(.+)[A-Za-z]') 
```

# mysql - 外键关系 - 唯一元组

> ID：12938109
> 
> 赞同：1
> 
> 时间：2012-10-17T15:43:28.090
> 
> 标签：mysql, sql, database

假设我有一个第三个表，它存储来自其他两个表的数据......

```
fk_first_table | fk_second_table
1 | 1
1 | 2
1 | 3
1 | 4
2 | 1

... 
```

我如何确保两个键永远不会重复...形成一个唯一的元组...就像一张真值表一样独特。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:47:40.787

```
CREATE UNIQUE INDEX my_index ON tbl_name (fk1, fk2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T15:48:46.173

您需要创建一个唯一索引：

```
CREATE UNIQUE INDEX indexName ON thirdtable (fk_first_table, fk_second_table) 
```

# java - 方法不在 Android 上启动？

> ID：12938116
> 
> 赞同：0
> 
> 时间：2012-10-17T15:43:47.203
> 
> 标签：java, android, methods

我的自定义音频应用程序在 Main 活动开始时开始播放，但我希望它在用户点击“播放”按钮时开始播放。只是为了记录，我没有使用 Android `MediaPlayer`，而是我自己的播放器。

当我简单地使用`startPlayer()`它时，它运行良好，当 Activity 启动时，但是当我将`startPlayer()`调用放入其中`setOnClickListener()`时它不起作用。

被调用的方法`startPlayer()`（它的记录很好），但音频播放器没有启动。为什么？

这是代码：

```
play = (Button) findViewById(R.id.playbutton);
        play.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {                               
                startPlayer();

            }
        });

    }

    private void startPlayer() {
        try {
            player.playAudio();     

        } catch (Exception e) {
            e.printStackTrace();
            finish();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:01:37.913

```
 play.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {                               
            startPlayer();
        }
    }); 
```

# google-analytics - 停止跟踪活动

> ID：12938118
> 
> 赞同：0
> 
> 时间：2012-10-17T15:43:56.167
> 
> 标签：google-analytics

下午好

我目前正在使用谷歌分析来跟踪新闻通讯。为此，我使用广告系列。问题是当您访问完链接页面后，以下页面继续表明这对应于同一个广告系列。我如何告诉 Google Analytics 广告系列跟踪已完成？

我尝试使用以下代码，但我忽略了。

```
_gaq.push(
   ['_setCampaignTrack', false]
   ,['_setCampaignCookieTimeout', 0]
);

_gaq.push(['_trackPageview']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:07:57.407

这是 Google Analytics 的预期行为

> **来源优先**——付费推荐访问之后的直接流量访问永远不会覆盖现有的付费活动。无论最新的付费活动访问是什么，都被列为访问的推荐人。

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCampaigns?hl=en](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCampaigns?hl=en)

直接流量的优先级很低。谷歌分析假设如果访问者是通过直接来源回来的，那可能是因为您实际支付的最后一次访问，所以它会保留最后一个有用的流量来源。

# c# - RemoveAt（）不起作用c＃

> ID：12938124
> 
> 赞同：2
> 
> 时间：2012-10-17T15:44:03.710
> 
> 标签：c#, list, removeclass, removeall

即使使用该`RemoveAt()`方法，我的列表仍然保持不变，我什至没有收到错误：

```
foreach (var row in queryCandidates.ToList())
{
    try
    {
        xString = queryCandidates.ToList().ElementAt(i).District;
        int.TryParse(xString, out xNumber);

        temp = xNumber.Equals(districtNumber);
        System.Diagnostics.Debug.Write(temp+ " ");
        System.Diagnostics.Debug.Write(i+" ");
        if (temp == false)
        {
            System.Diagnostics.Debug.WriteLine(" i is:"+i);

            //not working even when it should
            queryCandidates.ToList().RemoveAt(i);

        }
    }

    catch { }
    i++;
    if (last == i)
    {
        System.Diagnostics.Debug.WriteLine("before ending loop: ");
        return View(queryCandidates.ToList());
    }
}

System.Diagnostics.Debug.WriteLine("after ending the loop: ");
return View(queryCandidates.ToList()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T15:45:29.277

`ToList()`创建一个新实例。从这个实例中，您正在删除元素。您*没有*从原始可枚举中删除元素。

你应该这样做：

```
var candidates = queryCandidates.ToList();
var elementsToRemove = new List<int>();
foreach (var row in candidates)
{
    // ...
    xString = candidates[i].District;
    // ...
    if (temp == false)
    {             
        // ... 
        elementsToRemove.Add(i);
    }  
}

for(int i = elementsToRemove.Count - 1; i >= 0; --i)
    candidates.RemoveAt(elementsToRemove[i]);

return View(candidates); 
```

请注意使用`elementsToRemove`. 您不能直接在循环中删除项目。这将引发异常。

* * *

此外，请注意`ToList`复制所有数据。每次你调用它。很明显，在循环中这样做不是一个好主意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T15:47:23.407

```
queryCandidates.ToList().RemoveAt(i); 
```

ToList() 创建一个全新的列表，然后您从中删除一个元素，但该列表早已不复存在。

尝试：

```
var newList = queryCandidates.ToList();

for (int i=newList.Count-1; i>=0; i--){
 ///snip
 newList.RemoveAt(i); 
```

请注意，我将您的 foreach 更改为 for（相反），因为您在使用 foreach 迭代列表时无法修改列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T15:49:43.603

ToList() 函数每次调用它时都会创建一个新列表。该对象将从该列表中删除，而不是从原始列表中删除。所以你应该在 foreach 之前调用一次 ToList。

完成后， removeAt() 调用将起作用并导致新问题，因为您正在尝试从 foreach 循环中修改列表。因此，您需要以一种将删除也排除在循环之外的方式来重写您的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:47:31.100

好吧，我不确定 Type queryCandidates 是什么，但您没有看到更新的原因是因为您从错误的对象中删除了元素“i”。您的 ToList() 函数创建一个 List 类型的新对象。如果要保留更改，则需要缓存该列表并在使用原始 queryCandidates 对象的地方使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T15:46:15.033

`queryCandidates`不是列表。

您正在将其转换为一个列表，该列表创建一个新实例，您从中删除该项目但不会影响`queryCandidates`自身。

你可以做：

`var queryCandidates myCollection.ToList();`

接着

`queryCandidates.RemoveAt(i);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-14T20:31:55.680

对我有用的是从下往上删除：

```
for (int i = list.Count - 1; i > 0; i--)
{
    if (list[i][0] == "&nbsp;" || list[i][3] == "0")
        list.RemoveAt(i);
} 
```

在减少项目数后遗漏一些项目是有道理的。

# php - 是否可以从 HTTPS POST 重定向到 HTTP URL？

> ID：12938126
> 
> 赞同：1
> 
> 时间：2012-10-17T15:44:04.177
> 
> 标签：php, apache, http

在我的应用程序中，我将`Location`标头设置为`http://www.foo.com`通过 HTTPS 响应 POST 请求的路由内部。我不断被重定向到`https://www.foo.com`而不是普通的 HTTP 版本。如果您通过 HTTPS 处理 POST，是否也会通过 HTTPS 强制所有重定向？

这是在运行 PHP 5.3 的 Apache 服务器上。

# python - 如何安装 py.test-2.3？

> ID：12938127
> 
> 赞同：2
> 
> 时间：2012-10-17T15:44:05.240
> 
> 标签：python, testing, pip, pytest

我知道这听起来很奇怪，但我无法理解。在这里（http://pytest.org/dev/getting-started.html）它说一个简单的`pip install pytest`工作，但只安装 pytest-2.2.4

我试图`pypi.python.org`直接找到它，但我得到的只是 pytest-2.2.4 (http://pypi.python.org/pypi/pytest)

几次谷歌搜索没有产生任何结果，除了似乎每个人都设法得到它，除了我。

在 Mac 上使用 Python27。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:57:01.970

2.2.4 是当前版本。. . 2.3是开发版

这里有获取最新代码的说明：

[http://pytest.org/latest/develop.html](http://pytest.org/latest/develop.html)

我相信这也应该起作用：

```
pip install -i http://pypi.testrun.org -U pytest 
```

这就是这个问题的答案（并且似乎来自 pytest 的主要开发人员）： [pytest running scenario in the correct order in the class](https://stackoverflow.com/questions/12521924/pytest-running-scenarios-in-the-correct-order-in-the-class)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:18:53.453

pytest-2.3 刚刚发布，因此您可以通过例如从 pypi 安装来获取它

```
pip install -U pytest 
```

确实，文档有点混乱 - 希望 dev 和 latest 将来会更加独立。请注意，顺便说一句，文档将看到未宣布的额外发布，其版本号如“2.3.0.N”，这意味着文档已更新但没有代码更改。

# python - Python：以天和秒显示人的年龄

> ID：12938131
> 
> 赞同：3
> 
> 时间：2012-10-17T15:44:17.493
> 
> 标签：python

我是 python 编程的新手，我的编码有问题，因为输出在几天和几秒内无法正确显示年龄（如下面的“输出”所示）

## 输出

```
Please enter your birthday
Year:1985
Month (1-12):5
Date:8
Your age is 10024 days, 0:00:00 
```

任何人都可以进一步协助为什么以及如何解决这个问题？

## 代码

```
print "Please enter your birthday "
bd_y=int(input("Year:"))
bd_m=int(input("Month (1-12):"))
bd_d=int(input("Date:"))

from datetime import date
now = date.today ()

age = date(int(bd_y), int(bd_m), int(bd_d))
print ("Your age is " + str(now-age)) 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T15:50:26.500

`datetime.date`仅跟踪年、月和日。如果你也想要时间，你应该使用[`datetime.datetime`](http://docs.python.org/library/datetime.html#datetime.datetime)：

```
>>> from datetime import datetime
>>> str(datetime.now() - datetime(1985, 5, 8))
'10024 days, 8:51:08.441714' 
```

减法的结果是一个[`datetime.timedelta`](http://docs.python.org/library/datetime.html#datetime.timedelta)对象，它具有属性`days`、`seconds`和 ，`microseconds`用于自定义输出：

```
>>> delta = datetime.now() - datetime(1985, 5, 8)
>>> print "Your age is %d days and %d seconds" % (delta.days, delta.seconds)
Your age is 10024 days and 32125 seconds 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T15:49:30.723

您应该使用`datetime`而不是`date`.

确保您也更改了导入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T16:23:42.037

以下作品。您被转换为 int() 两次，但这不会破坏它。

我建议按照建议切换到日期时间，但下面使用您提供的内容。

```
print "Please enter your birthday"
bd_y = input("Year: ")
bd_m = input("Month (1-12): ")
bd_d = input("Date: ")

from datetime import date
now = date.today()

birthdate = date(int(bd_y), int(bd_m), int(bd_d))

age =  now-birthdate

print "Your age is %s" % age 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-25T08:40:42.567

```
print("please enter your birthday")
bd_y=int(input("Year:"))
bd_m=int(input("Month(1-12):")) 
bd_d=int(input("Date:"))
from datetime import date
now = date.today ()

age = date(int(bd_y),int(bd_m), int(bd_d))
print ("your age is " +str(now-age)) 
```

# django - 特定小时和分钟的 Django 查找

> ID：12938133
> 
> 赞同：2
> 
> 时间：2012-10-17T15:44:20.833
> 
> 标签：django

据我所知，django 确实只查找年、月和日。我正在寻找与此代码等效的东西来获取每个星期日的特定时间范围，例如：每个星期日 10:50-12:35：

```
 Entry.objects.filter(Record_Date__week_day=1,)
    Record_Date__hour__gte=10)
    Record_Date__hour__lte=12)
    Record_Date__minute__gte=50)
    Record_Date__minute__lte=35) 
```

你有什么想法可以替代吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:22:47.943

`__hour`并且`__minute`在 django 中不存在，但您的代码将无效，因为`11:00`将被排除在外。

我猜你将不得不处理[__regex](https://docs.djangoproject.com/en/dev/ref/models/querysets/#regex)或[raw SQL](https://docs.djangoproject.com/en/dev/topics/db/sql/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:04:35.897

您也可以只制作两个日期时间对象，并且`filter(Record_Date__gte=start_datetime, Record_Date__lte=end_datetime)`.

令人困惑的是，Django 没有窒息，Record_Date 是具有字段 "minute"、"hour" 和 "week_day" 的模型的 ForeignKey 吗？

# css - css3旋转单词对齐中心

> ID：12938137
> 
> 赞同：2
> 
> 时间：2012-10-17T15:44:28.867
> 
> 标签：css, position, alignment, text-align

我根据需要使用了完美的 codrops css3 旋转单词，但我无法使出现的单词在中心对齐。我所需要的只是使句子居中对齐，因此旋转单词。

但是因为它的位置是绝对的，并且是向左浮动的，所以这个词从左边 50% 的位置开始。

有人能帮忙吗？我已经尝试了很多实验，但似乎没有任何效果。

这是一个jsfiddle：http: [//jsfiddle.net/nzAPr/](http://jsfiddle.net/nzAPr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:53:24.580

将容器设置为 position:relative 并将跨度设置为 100% 似乎有效。

```
.rw-words{
display: block;
position: relative;
}
.rw-words-1 span{
position: absolute;
width: 100%;
...
} 
```

[http://jsfiddle.net/willemvb/9Xubs/](http://jsfiddle.net/willemvb/9Xubs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:47:27.610

尝试在此处删除缩进：

```
.rw-words{
    display: block;
    text-indent: 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:43:55.830

I am not sure if you are still looking for a solution for this. The animation can only set a centre start point and that's why your words show up shiftet to the right. You can fix that if you give every child a negative margin and space it out manually. This is what I got when I was playing around with the code:[http://jsfiddle.net/9Xubs/109/](http://jsfiddle.net/9Xubs/109/) `margin-left: -35px;`

# tree - antlr3 删除带有子树的树节点

> ID：12938139
> 
> 赞同：1
> 
> 时间：2012-10-17T15:44:33.413
> 
> 标签：tree, antlr, transform, antlr3, subtree

我尝试用 antlr3.4 做一些树到树的转换

关于布尔表达式的（对于这个问题）是“AND”和“OR”被允许绑定到 n 个表达式。解析器阶段创建这样的东西

```
 (OR 
   (AND (expr1) (expr2) (expr3) 
     (OR (AND (expr4))
         (AND (expr5))
         (AND (expr6))
     )
   )
 ) 
```

不幸的是，“AND”和“OR”的 AST 节点只绑定到一个表达式。（这是没用的，但是嘿 - 调用规则 andExpr 和 orExpr）

我试图将它们踢出（意思是用它们的子节点替换它们）但在树语法中没有这样做。（顺便说一句：在纯 java 中使用深度优先树遍历/修改，但这不是我的意图）

我尝试使用谓词，但似乎无法正确使用。

这是解析未修改的流的语法

```
 start  :  
   orExpr^   EOF!  
   ;

 orExpr       :  
   ^(OR  r+=andExpr+ )   -> ^(OR $r)
   ;

 andExpr  : 
   ^(AND unaryExpr+ )
   ; 

 notExpr:
   ^( NOT unaryExpr)    
   ;

 unaryExpr : 
   .+  // it gets more complicated below this
   ; 
```

我尝试了一个谓词来捕捉一个子节点的情况，但未能通过未修改的 n>1 情况

```
 orExpr @init { int N = 0; }
   :  
   ( ^(OR  (r+=andExpr {N++;})+ )  {N==1}? -> $r) 
   ; 
```

任何想法如何正确地做到这一点？

编辑：附件是几乎相同的解析器语法......

```
 start 
   :  '('! orExpr^  ')'! EOF!        ;
 orExpr
   : a+=andExpr (  OR_T a+=andExpr )*  -> ^(OR  $a+ )  // 'AND' and 'OR' are multivalent
   ;

 andExpr
   : u+=unaryExpr ( AND_T u+=unaryExpr )* -> ^(AND $u+ )
   ; 

 notExpr
   : NOT_T unaryExpr -> ^( NOT unaryExpr)   
   ;

 unaryExpr
   : '('!  orExpr ')'! // -> ^( BRACE orExpr), brace not needed in the ast (but needed for propper parsing)
   |   notExpr
   |   internal^  // internal is very complex in itself
   ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:06:21.770

您可以直接在解析器中执行此操作。您确实需要创建更多解析器规则，以免在重写规则中混淆 ANTLR（请参阅内联注释）：

```
grammar T;

options {
  output=AST;
  ASTLabelType=CommonTree;
}

start 
 : orExpr EOF! {System.out.println($orExpr.tree.toStringTree());}
 ;

orExpr
 : (andExpr2 -> andExpr2) ((OR andExpr)+ -> ^(OR andExpr2 andExpr+))?
 ;

// You can't use `andExpr` directly in the `orExpr` rule otherwise the rewrite
// rule `-> ^(OR ... )` gets confused.
andExpr2 : andExpr;

andExpr
 : (notExpr2 -> notExpr2) ((AND notExpr)+ -> ^(AND notExpr2 notExpr+))?
 ; 

notExpr2 : notExpr;

notExpr
 : NOT^ notExpr
 | atom  
 ;

atom
 : '(' orExpr ')' -> orExpr
 | ID
 ;

OR    : '||';
AND   : '&&';
NOT   : '!';
ID    : 'a'..'z'+;
SPACE : ' ' {skip();}; 
```

解析输入`"a && b && c || d || f || g"`将产生以下 AST：

![在此处输入图像描述](../Images/ed9510bc7a04c7b43893c4cfdde468b7.png)

## 编辑

然后，树语法将如下所示：

```
tree grammar TWalker;

options {
  tokenVocab=T;
  ASTLabelType=CommonTree;
}

start 
 : expr
 ;

expr
 : ^(OR expr+)
 | ^(AND expr+)
 | ^(NOT expr)
 | ID
 ; 
```

# javascript - 获取 Idless p 标签的值进行比较

> ID：12938141
> 
> 赞同：0
> 
> 时间：2012-10-17T15:44:35.593
> 
> 标签：javascript, jquery, rdf, sgvizler

我在 html 中有两列带有以下标记：

第 1 列：

```
<div id="uni1Query">
<p id="uni1Query1Result" data-sgvizler-chart="sText" data-sgvizler-loglevel="2"><div><p>54.7</p></div></p>
<p id="uni1Query2Result" data-sgvizler-chart="sText" data-sgvizler-loglevel="2"><div><p>34.7</p></div></p>
</div> 
```

第 2 栏：

```
<div id="uni2Query">
<p id="uni2Query1Result" data-sgvizler-chart="sText" data-sgvizler-loglevel="2"><div><p>54.7</p></div></p>
<p id="uni1Query2Result" data-sgvizler-chart="sText" data-sgvizler-loglevel="2"><div><p>34.7</p></div></p>
</div> 
```

我想要做的是从第 1 列中获取值并将它们与第 2 列中的相同值进行比较。

所以我想要的是将 uni1Query1Result 的值与 uni2Query1Result 和 uni2Query1Result 与 un21Query2Result 等进行比较。我有第三列的结果应该是。

这样做的最佳方法是什么？

我尝试了以下方法：

```
r1 = parseInt($("#uni1Query1Result p").val());
console.log(r1);
r2 = parseInt($("#uni2Query1Result p").val());
console.log(r2);
r3 = (r1 - r2);
alert(r3); 
```

但这会导致 NaN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:47:48.660

尝试这种方法来比较两个 div 中的 First 值

```
$('#uni1Query > p:eq(0) div p').text() == $('#uni2Query > p:eq(0) div p').text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:46:17.047

您不能在`<p>`标签内嵌套块级元素，浏览器将关闭父`<p>`标签。在 Chrome 中检查您的控制台会告诉您这一点。

此外，您应该使用`html()`来查找标签的内部值，并`parseFloat`查找浮点数（不是整数）

```
parseFloat($("#uni1Query1Result p").html()) 
```

# php - 用于回显多个类的 PHP 语法，它们之间有一个空格

> ID：12938144
> 
> 赞同：2
> 
> 时间：2012-10-17T15:44:49.520
> 
> 标签：php, wordpress, syntax

我正在开发一个 Wordpress 自定义模板，我正在按他们的类过滤帖子。`<?php post_class(); ?>`因为当我放入一个页面时， Wordpress 会显示很多不必要的类，
（这是它给我的`class="post-54 post type-post status-publish format-standard hentry category-3d category-web"`）我试图通过只回显与帖子相关的类别来简化这一点。

**编辑：**
这就是我页面中的帖子`<?php query_posts( 'showposts=99' ); ?>`

那么这段代码

```
<li class="<?php if ( in_category('category-3d')) { echo "3d"; }
        if ( in_category('category-animation')) { echo "animation"; }
        if ( in_category('category-motion')) { echo "motion"; }
        if ( in_category('category-shortfilm')) { echo "shortfilm"; }?>"></li> 
```

`<li class="motion"></li>`如果我的帖子属于“动议”类别，请给我这个。

问题是，**如果我的帖子属于多个类别，则只有第一个被回显**......我如何告诉 WP 回显我的帖子受影响的所有类别的名称，同时在它们之间添加一个空格？

由于我是 php 语法的初学者，我仍在学习如何让这样一个简单的事情以一种干净有效的方式工作（即无需编写 16 行代码！）...有人可以帮我解决这个问题吗？

**第二次编辑：**
好的，我仍在试图找出原因，但是今天，我的一段代码（上面）正在运行，并与我列出的所有类相呼应，但它们之间没有空格......所以为了让我的类正常工作，我m 在回声部分的末尾添加一个空格，如下所示`{ echo "3d "; }`。但我觉得这是一种让事情顺利进行的肮脏方式......

**如何以正确的方式在每个类标签之间添加空格？** 我的目标是这样的，`foreach $categories as $cat { echo $cat . " "; }`但 $categories 和 $cat 将引用每个“if”语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:52:51.803

我对 WP 不熟悉，但是如果您使用某些功能获得您的类别，`get_categories()`那么您可以使用[implode](http://php.net/manual/en/function.implode.php)从所有类别中创建一个字符串。

```
<?php $categories = get_categories(); ?>
<?php $categories = implode(' ', $categories); ?>
<li class="<?php echo $categories; ?>">...</li> 
```

您能提供返回的内容`get_categories()`吗？

## 编辑：

```
function get_class_attr() {
    $classes = get_post_class(); 
    $classes = substr($classes, 7, -1);

    $arr = array();
    $arr = explode(' ', $classes);
    $classes = 'class="';

    foreach($arr as $class_name) { 
        if(strpos($class_name, 'category-') !== false) {
            $classes .= substr($class_name, 9).' ';
        }
    }

    $classes = substr_replace($classes, '"', -1, 1);
    echo $classes;
}

get_class_attr(); // output: class="3d web" 
```

另请注意，这`3d`不是有效的类名，您可以使用类似`movie3d`or的名称`film3d`。

另一种方法是更早地创建你的类值，然后`echo`它：

```
<?php
$classes = array();
if ( in_category('category-3d'))        { $classes[] = "3d"; }
if ( in_category('category-animation')) { $classes[] = "animation"; }
if ( in_category('category-motion'))    { $classes[] = "motion"; }
if ( in_category('category-shortfilm')) { $classes[] = "shortfilm";}

if(count($classes)) {
    $classes = implode(' ', $classes);
} else {
    $classes = '';
}
?>

<li class="<?php $classes ?>"></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:51:05.717

从您发布的代码开始，如果产品在所有四个指定的类别中，它应该添加所有类别。您可以在每个 之后添加引号之间的空格`echo`，例如：`echo ' motion'`。

我会使用另一种方法，添加真正的所有类别，而无需按名称检查它们：

```
<li class="<?php echo implode( ' ', get_categories() ); ?>"> … </li> 
```

请参阅：[http](http://codex.wordpress.org/Function_Reference/get_categories) ://codex.wordpress.org/Function_Reference/get_categories ，了解如何过滤函数的输出`get_categories()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T15:50:03.393

我建议您改为使用Wordpress API 中的[此功能](http://codex.wordpress.org/Function_Reference/get_categories)- 您应该阅读很多内容。

像这样的东西应该工作：

```
<?php $categories = get_categories(); ?>
<li class="<?php foreach ($categories as $cat) {
    echo $cat . " ";
 }?>"> -- Your li text --
</li> 
```

# image-processing - Line function after projective transform

> ID：12938147
> 
> 赞同：0
> 
> 时间：2012-10-17T15:44:54.653
> 
> 标签：image-processing, geometry, computer-vision

I have a question related to [projective transform](http://en.wikipedia.org/wiki/Homography). Suppose now we know a line function `ax+by+c=0`in an image, and the image will go through a projective distortion, and the distortion can be represented as a projective transformation matrix :

![enter image description here](../Images/35d20147d650063306bc600e550f35df.png)

Then after the porjective transformation, how could I know the line function in the new distorted image? Thanks!

** EDIT ** Based on the suggestion, I have found the answer. Here, I posted the MATLAB codes to illustrate it:

```
close all;
% Step 1: show the images as well as lines on it
imshow(img);
line = hor_vt{1}.line(1).line;   a = line(1); b=line(2); c=line(3);
[row,col] = size(img);
x_range = 1:col;
y_range = -(a*x_range+c)/b;
hold on; plot(x_range,y_range,'r*');
line = hor_vt{1}.line(2).line;   a = line(1); b=line(2); c=line(3);
y_range = -(a*x_range+c)/b;
hold on; plot(x_range,y_range,'y*');
% Step 2: show the output distorted image that goes through projective
% distortion. 
ma_imshow(output);
[row,col] = size(output);
x_range = 1:col;
line = hor_vt{1}.line(1).line;  
line = reverse_tform.tdata.Tinv*line(:); % VERY IMPORT
a = line(1); b=line(2); c=line(3);
y_range = -(a*x_range+c)/b;
hold on; plot(x_range,y_range,'r*');
disp('angle');
disp( atan(-a/b)/pi*180);
line = hor_vt{1}.line(2).line;  
line = reverse_tform.tdata.Tinv*line(:); % VERY IMPORT
a = line(1); b=line(2); c=line(3);
y_range = -(a*x_range+c)/b;
hold on; plot(x_range,y_range,'y*');
disp('angle');
disp( atan(-a/b)/pi*180); 
```

The original images with two lines on it:

![enter image description here](../Images/ea3f1687f0d1f3f1b617849e3b8a1a47.png)

After projective distoration, the output image with lines on it becomes: ![enter image description here](../Images/73f73b68254c3f2918888bb167fa9a89.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:50:53.283

I'm no mathematician so maybe there's a better solution, but you could use the equation as it is and then transform the output by multiplying by the transformation matrix.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:08:44.443

Here is an easier way to understand it than in your code above.

Given a non-singular homography H (i.e. a homography represented by a 3x3 matrix H with non-zero determinant):

1.  Homogeneous 2D points (represented as 3D column vectors) transform from the right:

    p' = H * p

2.  2D lines (represented as 3D row vectors of their 3 coefficients) transform from the left by the inverse homography:

    l' = l * H^-1

Proof: for every point p belonging to line l it is l * p = 0\. But then l * (H^-1 * H) * p = 0, since (H^-1 * H) = I is the identity matrix. The last equation, by the associative property, can be rewritten as (l * H^-1) * (H * p) = 0\. But, for every p belonging to the line, p' = H * p is the same point transformed by the homography. Therefore the last equation says that these same points, in transformed coordinates, belong to a line with coefficients l' = l * H^-1, QED.

# java - Java 扩展类

> ID：12938150
> 
> 赞同：3
> 
> 时间：2012-10-17T15:45:07.617
> 
> 标签：java, inheritance

BasePage.java

```
public class BasePage {
  //do stuff
} 
```

中心.java

```
public class Center {
    public BasePage click(){
        click(button);
        return new BasePage(this);
    }

    // do other stuff
}

public class Helper {
    protected Center center;

        // do stuff
} 
```

页面.java

```
public class Page extends BasePage {
   //do stuff
} 
```

测试类.java

```
public class TestClass extends Helper {
    private Page page;

    // I can use "center.click()" because TestClass extends from Helper, 
    // and "center" is a protected variable in Helper
    // "center.click()" returns type 'BasePage'
    // 'page' is a type 'Page' which extends 'BasePage'
    // So why can't I put the result of "center.click()" into 'page' ?
    page = center.click();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:49:25.077

举个例子：

```
Subclass inherits from Superclass

Subclass sub;

sub = new Superclass(); // is not valid

Superclass super = new Subclass(); // is valid
// basic laws of polymorphism 
```

理解它的最简单方法是，容器应该比它所存储的对象类型大。在这种情况下，超类大于子类，这就是为什么第二个陈述是正确的。

如果您需要以任何方式使用第一条语句，请尝试强制转换。

```
sub = (Subclass)(new Superclass()); // is valid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:47:55.917

```
page = center.click(); 
```

你`page`是一个引用，`baseclass Page`而你的方法`center.click()`返回一个 super class 类型的对象`BasePage`。

您不能将超类对象分配给子类引用。

您将需要明确地类型转换您`BasePage`的`Page`： -

```
page = (Page)center.click(); 
```

**但这也可能不起作用**，因为您正在`new BasePage(this)`从您的方法返回，该方法不是`Page`.

您需要返回一个类型的对象，`Page`例如： - `new Page(this)`，您可以对其进行类型转换以分配给 Page 引用..

此外，您正在直接在内部执行此分配，`class`这是不正确的。要么你需要一个方法，要么你只需要在声明时初始化它..

```
Page page = (Page)center.click(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:47:15.903

两个问题。首先，`page = center.click();`好像里面没有一个方法。（如果它实际上不在您的代码中，请先修复它。）

然后，分配仍然不起作用，因为返回的`BasePage`可能`center.click()`不是`Page`. （事实上​​，并非如此。）

对您的代码进行以下替换`Center`和`TestClass`：

> `BasePage`=> `Object`
> `Page`=>`String`

然后应该清楚为什么会出现问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:47:34.893

那是因为您不能将超类对象分配给子类对象。假设您的代码是正确的，在您的`Center.click()`方法上，您将返回一个新`BasePage`对象。`Page`是的子类，`BasePage`并且该分配无法工作。

您将必须返回一个类，该类是 的一个`Page`或子类，`Page`然后将其类型转换为`Page`.

# ruby-on-rails - 对所有模型 ID 使用 guid

> ID：12938154
> 
> 赞同：2
> 
> 时间：2012-10-17T15:45:16.607
> 
> 标签：ruby-on-rails, guid

在新的 Rails 应用程序中，在我的模型中使用 GUID 而不是整数作为 id 需要什么？

这样做时有任何“陷阱”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:49:11.750

有一个宝石！：[https ://github.com/jashmenn/activeuuid](https://github.com/jashmenn/activeuuid)

您的迁移如下所示：

```
create_table :user do |t|
  t.uuid :id, :primary_key => true
end 
```

你的模型看起来像：

```
class User < ActiveRecord::Base
  include ActiveUUID::UUID
end 
```

以上所有代码均来自[自述文件](https://github.com/jashmenn/activeuuid)

# css - 确保 float:right 元素与顶部垂直对齐，即使在 float:left 元素旁边

> ID：12938156
> 
> 赞同：1
> 
> 时间：2012-10-17T15:45:19.867
> 
> 标签：css, html, css-float, positioning

我[在这个小提琴](http://jsfiddle.net/5FFdf/)中演示的浮点数遇到了一个小问题。

我有一个向左浮动的 DIV，其宽度是动态的（未知）。我有另一个在同一个块中向右浮动，宽度也是动态的。

问题是，如果第一个块的宽度延伸到会与右浮子发生碰撞，则右浮子将（正确地）向下下降以确保没有发生碰撞。但是，我希望它保持在顶部（垂直，即 - 不是 z-index 方面）。

基本上，似乎文本优先考虑“取代”右侧的块。这应该是相反的方式，但是左侧的文本甚至在开始换行之前就用完了最上面一行的可用空间。

我想解决方案相当简单。只是我根本没有想到它，而且我所做的任何搜索都没有找到我想要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:59:00.550

您可能想尝试使用 css 表格/只需创建两个元素并使其成为表格，然后将右侧和左侧元素设为表格单元格：

```
#wrapper {
  display: table;
  width: 100%;
}
#leftside, #rightside {
  display: table-cell;
  width: 50%; /* Both sides will be rendered on one line */
  vertical-align: top;
}
/* Position elements within the cell */
#leftside { text-align: left; }
#rightside { text-align: right; }
#leftside > div, #rightside > div {
  display: inline-block;
  text-align: left; /* Reset text alignment */
} 
```

Explanation: The table structure will keep the elements in one line with width 50%; The inner elements (divs in this case) will be inline-blocks so that they can be aligned left or right. Now when one of the inner divs exceeds the max width of 50% it will just make the other 'cell' side smaller

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:52:07.357

将标签 div 浮动在标题 div 内，这将在标签周围包裹标题文本，无论两者的宽度如何。

```
<div class="infoBox">
<div class="inner">
    <div class="entry">
        <div class="title">
        <div class="type">
            LABEL
        </div>
            If this text is longer, the LABEL will drop downwards.
            I would like to have the LABEL float right (as it does here) but also be at the top of the block. 
        </div>
    </div>
</div> 
```

​</p>

# jquery-mobile - 在 JQuery Mobile 中动态添加内容

> ID：12938165
> 
> 赞同：2
> 
> 时间：2012-10-17T15:45:40.803
> 
> 标签：jquery-mobile

我正在使用 JQuery Mobile 1.2.0 版本。我想在这个上下文中放一些 html 代码：

```
<div id="div-primeros" data-role="collapsible" data-theme="a" data-content-theme="c" data-collapsed="false">
        <h2>Primeros</h2>
        [I WANT TO ADD CODE DYNAMICALLY HERE] 
</div> 
```

我要添加的代码是：

```
<div class="ui-grid-a">
    <div class="ui-block-a" style="width:93%">
        <ul data-role="listview" style="width:100%">
            <li id="4" data-icon="false">
                <a href="index.html">
                    <img src="some.jpg"></img>
                    <h3>some text</h3>
                    <span class="ui-li-count">some text</span>
                </a>
            </li>
        </ul>
    </div>
    <div class="ui-grid-b" style="width:7%">
        <input cant="1" type="number" value="0" min="0" max="8" style="width:100%">
    </div>
</div> 
```

所以我尝试使用这段代码来做这个（“primero”是一个 JSON 变量）：

```
$("#div-primeros").append(
            "<div id=\"" + i + "\" data-role=\"listview\" class=\"ui-grid-a\">" +
                "<div class=\"ui-block-a\" style=\"width:95%\">" +
                    "<ul style=\"width:100%\">" +
                        "<li id=\"" + primero.id + "\" data-icon=\"false\">" +
                            "<a href=\"menu_detalle.html\">" +
                                "<img src=\"" + primero.thumb + "\"></img>" +
                                "<h3>" + primero.nombre + "</h3>" +
                                "<p>" + primero.descripcion + "</p>" +
                                "<span class=\"ui-li-count\">" + primero.precio + "</span>" +
                            "</a>" + 
                        "</li>" +
                    "</ul>" +
                "</div>" + 
                "<div class=\"ui-grid-b\" style=\"width:5%\">" +
                    "<input cant=\"" + primero.id + "\" type=\"number\" value=\"0\" min=\"0\" max=\"8\" style=\"width:100%\">" +
                "</div>" +
            "</div>"); 
```

结果是内容格式不正确，并且该内容超出了可折叠的“div-primeros”。

我究竟做错了什么？？？我试过：

```
 $("div-primeros").trigger("create"); 
```

和

```
 $("div-primeros").page(); 
```

没有成功的结果。

任何人都知道如何刷新所有代码？非常感谢！！！

再见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:57:11.383

不要将它分成多行，使用单引号代替要附加的 html 周围的双引号。像这样：

```
$('#div-primeros').append('<div class="ui-grid-a"><div class="ui-block-a" style="width:93%"><ul data-role="listview" style="width:100%"><li id="4" data-icon="false"><a href="index.html"><img src="some.jpg"></img><h3>some text</h3><span class="ui-li-count">some text</span></a></li></ul></div><div class="ui-grid-b" style="width:7%"><input cant="1" type="number" value="0" min="0" max="8" style="width:100%"></div></div>'); 
```

这是一个小提琴。[http://jsfiddle.net/wU6pr/](http://jsfiddle.net/wU6pr/)

# java - 如何智能地修复 Eclipse 中的文档？

> ID：12938170
> 
> 赞同：17
> 
> 时间：2012-10-17T15:46:09.367
> 
> 标签：java, eclipse, documentation, javadoc, ghostdoc

回到我的 C# 时代，我喜欢使用名为“GhostDoc”的 Visual Studio 扩展。现在我被用作 Java 开发人员，我正在使用 Eclipse。我可以在没有推断文档的情况下生活，但我想做的是智能地“修复”我的文档。例如，假设我有以下方法：

```
/**
 * Gets a collection of {@link Foo} objects
 * @param bar The bar level
 * @param baz The bazziness
 */
public Collection<Foo> getFoos(int bar, int baz)
{
    // Do something cool
} 
```

后来在开发过程中，我意识到允许我的方法的消费者传入一个 qux 值会很有用。不仅如此，将它作为第一个参数是最有意义的。此外，我将让该方法抛出我超级有用的 FooBarException。所以现在我的方法看起来像这样：

```
/**
 * Gets a collection of {@link Foo} objects
 * @param bar The bar level
 * @param baz The bazziness
 */
public Collection<Foo> getFoos(String qux, int bar, int baz) throws FooBarException
{
    // Do something cool
} 
```

作为一名优秀的开发人员，我希望我的更改反映在我的 JavaDoc 中。在 GhostDoc 中，我可以点击我的文档快捷键，它会添加新内容而不会干扰旧内容。在 Eclipse 中，它呈现了一组全新的 JavaDoc，我必须做一堆复制粘贴。如何在不丢失我当前拥有的 JavaDoc 的情况下自动将 new `@param`、`@exception`和 missing参数放入我的 JavaDoc 中？`@returns`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T16:19:08.507

不知道下面是不是你说的，但是由于eclipse有自己的JavaDoc Validator，你可以在下配置compile Warnings/Errors

窗口 -> 首选项 -> Java -> 编译器 -> JavaDoc。

根据您自己的需要激活缺少的 javadoc 标记并将警告级别设置为“警告”，只要您的 javadoc 与您的方法签名不同，编译器就会注意到您的更改并向您发出警告。要修复它，它提供了一个快速修复 (STRG+1)，您可以选择添加所有缺失的标签。即使在正确的位置，此操作也会添加缺少的标签，而不会弄乱您的旧评论。

![在此处输入图像描述](../Images/5a583250c6b9b8d8fab292aa031a9bef.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:56:06.137

Eclipse 也支持 JavaDoc 的“代码”完成。您不必键入hole 语句。您只需键入“@p”，CTRL+Space 将为您打印其余部分。或者更好的是，只写参数的名称，代码完成将添加其余部分。

它不是直接的捷径，但您可以更快地改进 javadoc，而不是从头开始编写所有内容。

@t (@throw) @r (@return) 等也是如此。

**编辑您的评论：**

您可以配置 Checkstyle，以自动检查您的课程。当您的方法有未记录的参数或其他一些缺少的参数时，Checkstyle 会报告。Checkstyle 还可以检查你的第一句话是否以'.'结尾。或不。你可以手工制定很多这样的规则。

Checkstyle 将在您的 java 代码编辑器和问题视图中添加问题标记。因此，您可以轻松找到带有 javadoc 问题的代码行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-02T16:23:35.747

[http://jautodoc.sourceforge.net/](http://jautodoc.sourceforge.net/) 也适用于 Luna，请查看市场![在此处输入图像描述](../Images/aab6f691b5fb30e4995a6692742ddef6.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T16:08:38.793

在典型的评论位置（与 GhostDoc 相同的位置）上方键入 /** 将自动完成评论模板。

如果您使用重命名功能 (Shift+Alt+R) 更改变量的名称，那么 Eclipse 也会在所有正确位置更改名称，假设代码已编译。

这包括您创建的链接和评论链接

```
/**
 *
 * My funky method
 *
 * @param myThing
 *         myThing is of type {@link MyThingClass}
 */
 public void myMethod(MyThingClass myThing) {} 
```

使用 Eclipse 的重命名功能重命名 myThing 或 MyThingClass 也会更新这些引用。

同样，使用“更改方法签名”功能也会更新您的评论。

基本上，如果您要重构，请使用重构菜单 (Shift+Alt+T)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-01T18:01:12.610

[Checkstyle](http://eclipse-cs.sourceforge.net/)已经提到过。我试过了，但它似乎让我的 Eclipse 变慢了很多（尽管 E4 juno，它以有一些糟糕的减速而闻名）。

[Google CodePro](https://developers.google.com/java-dev-tools/codepro/doc/)做得更好，所以我现在正在使用它。

当然，您可以启用 JavaDoc 警告。

# html-lists - Haml新手无法向页面添加无序列表

> ID：12938174
> 
> 赞同：0
> 
> 时间：2012-10-17T15:46:15.270
> 
> 标签：html-lists, haml

我想在我的应用程序的屏幕顶部添加三个将用作计数器的字段。以下代码确实有效，但是，如果您将页面置于编辑模式，然后单击“保存”按钮，三个计数器字段会消失并保持这种状态，直到您刷新浏览器。我是一个 Haml 新手，那里没有太多文档，而且文档很少，对我没有帮助。

以下是用于呈现相关页面的相关 Haml 代码：

```
- form_for [@application, @item_collection], :html => { 'data-remote' => 'json', :id => 'edit_item_collection', :class => 'show_progress inline_edit' } do |f|
  = render 'edit_fields', :f => f
  .submit.editing_only
    %button.default_action{ :type => 'submit',:id => 'Save'} Save` 
```

这是实际页面的Haml代码：

```
.field.large
  = f.label      :name, nil, 'data-help-id' => 'page_name'
  = f.text_field :name, disabled_if_unauthorized(@item_collection, :maxlength => 255, :title => "Edit Page")
  = f.error_message_on(:name, :css_class => 'error_message')
.field
  = f.label      :path, nil, 'data-help-id' => 'page_path'
  = f.text_field :path, disabled_if_unauthorized(@item_collection, { :maxlength => 255, :class => 'extra_margin', :title => "Edit Page" })
  = f.error_message_on(:path, :css_class => 'error_message')
.field.info
  = f.label      'Info'
  %ul.elements_count
    %li.elements_in_use{ :id => 'elements_in_use' }
    %li.unused_elements{ :id => 'unused_elements'}
    %li.undefined_elements{ :id => 'undefined_elements'} 
```

当我单击“保存”时，elements_count 无序列表会消失（但如果我刷新浏览器会重新出现）。我知道问题是我需要输入“= f”。在这些元素前面，但我不知道如何为列表执行此操作。

这是我用于填充 li 元素的 JavaScript：

```
function getElementCount() {
  var usage_element_total = $('.usage').size();
  var unused_element_total = $('.unused').size();
  var undefined_element_total = $('.undefined').size();
  $('#elements_in_use').html(usage_element_total + " Elements in use,");
  if (unused_element_total < 1) {
    $('#unused_elements').html(" 0 unused Elements,");
  } else {
    $('#unused_elements').html((unused_element_total-1) + " unused Elements,"); 
  }
  $('#undefined_elements').html(undefined_element_total + " undefined Elements");
} 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:01:26.233

您需要在表单更新时触发填充元素计数的 Javascript。大概您在`getElementCount`页面加载时调用，您可以在呈现表单时触发它：

```
$("form").bind("ajax:complete", getElementCount); 
```

但我猜测事情是如何连接在一起的，也许这对你的情况不起作用。

# c# - 在 select 语句中调用 Helperfunction，将返回的结果保存为多个值

> ID：12938177
> 
> 赞同：2
> 
> 时间：2012-10-17T15:46:37.087
> 
> 标签：c#

我正在构建一个 JSON 字符串，在行部分中，我有两个值要构建并传入由辅助函数计算的 JSON 字符串。我想知道是否有办法调用这个辅助函数一次，然后返回一个值数组（在我的例子中是两个），所以我不必调用辅助函数两次（并且避免两次访问数据库）。

示例代码

```
 rows = (
                from tempItem in pagedQuery.ToList()
                select new
                {
                    cell = new string[] {                    
                        tempItem.Name,
                        tempItem.Regular,
                        HelperFunction.GetPrice(tempItem.ID, false).ToString(),
                        tempItem.Premium,
                        HelperFunction.GetPrice(tempItem.ID, true).ToString(),
                    }
                }).ToArray() 
```

示例功能：

```
public decimal GetPrice(int ID, bool Premium)
{
  Item item = databaseCallToGetPrice(ID).first();

  if (Premium)
      return item.ExamplePrice;
  else
      return item.PremiumExamplePrice;
} 
```

所以我要问的是在我的例子中我调用了 Helper 函数两次，有没有办法只调用一次然后返回一个数组，我可以以某种方式坚持然后使用两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:49:19.080

您可以使用`Let`AFAIK

```
rows = (
                from tempItem in pagedQuery.ToList()
                let prices = HelpererFunction.GetPrice(tempItem.ID)
                select new
                {
                    cell = new string[] {                    
                        tempItem.Name,
                        tempItem.Regular,
                        prices[0].ToString() ,
                        tempItem.Premium,
                        prices[1].ToString() ,
                    }
                }).ToArray() 
```

您可以重构 GetPrice 函数以返回小数 []

```
public decimal[] GetPrice(int ID)
{
  Item item = databaseCallToGetPrice(ID).first();

  return new [] {item.ExamplePrice, item.PremiumExamplePrice};
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T15:51:10.760

`Tuple<decimal, decimal>`从函数返回 a ：

```
public Tuple<decimal, decimal> GetPrices(int ID)
{
    Item item = databaseCallToGetPrice(ID).First();
    return Tuple.Create(item.ExamplePrice, item.PremiumExamplePrice);
} 
```

然后使用它：

```
rows = (
        from tempItem in pagedQuery.ToList()
        let prices = HelpererFunction.GetPrices(tempItem.ID)
        select new
        {
            cell = new string[] {                    
                tempItem.Name,
                tempItem.Regular,
                prices.Item1.ToString(),
                tempItem.Premium,
                prices.Item2.ToString(),
            }
        }).ToArray() 
```

恕我直言，元组比简单的数组更好，因为您可以保证从函数中返回两个且只有两个项目。

* * *

如果你想更清楚，你可以创建一个结构

```
public struct Prices
{
    public decimal PremiumPrice, Price;       

    public Prices(decimal premium, decimal price)
    {
        PremiumPrice = premium;
        Price = price;
    } 
} 
```

然后从辅助函数返回

```
public Prices GetPrices(int ID)
{
    Item item = databaseCallToGetPrice(ID).First();
    return new Prices(item.PremiumExamplePrice, item.ExamplePrice);
} 
```

并使用它：

```
rows = (
        from tempItem in pagedQuery.ToList()
        let prices = HelpererFunction.GetPrices(tempItem.ID)
        select new
        {
            cell = new string[] {                    
                tempItem.Name,
                tempItem.Regular,
                prices.Price.ToString(),
                tempItem.Premium,
                prices.PremiumPrice.ToString(),
            }
        }).ToArray() 
```

# java - 如何使用 ServerSocket 通过 TCP 找出连接到服务器的客户端数量及其 IP（详细信息）？

> ID：12938178
> 
> 赞同：0
> 
> 时间：2012-10-17T15:46:40.460
> 
> 标签：java, multithreading, sockets, networking, tcp

我的 PC 上正在运行一个服务器程序。服务器程序使用套接字连接到许多客户端。有没有办法随时找出哪个具有女巫IP的客户端连接到服务器？或者有多少客户端连接到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:04:08.310

> 无论如何都可以随时找出哪个具有女巫IP的客户端连接到服务器[使用]我自己的ServerSocket。

当您接受一个套接字时，您可以获得它的远程 IP 地址。

```
Sockets socket = serverSocket.accept();
SocketAddress address = socket.getRemoteSocketAddress(); 
```

如果有多个客户端从该 IP 连接，这不足以区分。如果这是一个问题，您可以让客户端发送一个唯一的 ID，以便您知道它是哪个客户端。

# batch-file - 批处理文件，搜索文件夹中的所有文件，然后排序

> ID：12938180
> 
> 赞同：0
> 
> 时间：2012-10-17T15:46:49.070
> 
> 标签：batch-file, find

我以前做过一些小批处理文件，但从来没有在文件夹中读取任何需要的文件名。

我需要一个可以为我排序文件夹的批处理文件。

我需要它来查看一个文件夹，搜索每个文本文件，如果它包含一个“字符串”，然后将它移动到一个接受的文件夹中，如果没有，将它移动到一个被拒绝的文件夹中。

任何想法如何解决这个问题？

我之前使用过以下内容来查找文本。

```
find /c "string" file
if %errorlevel% equ 1 goto 
```

我不知道如何让它搜索文件夹中的每个文件，并且这些文件名每天都会更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:09:07.283

在您的问题陈述中，您说所有这些文件都是`.txt`文件。所以我建议使用 a`for loop`来遍历`.txt`目录中的每个文件，然后使用它`findstr`来搜索预期的字符串。我在下面发布的代码将以这种方式工作。本质上，它将目录更改为桌面（或文件所在的任何位置），然后遍历每个`.txt`文件并搜索字符串。`findstr`输出被重定向到（为了更快的`nul`处理），如果成功，`.txt`文件被移动到`C:\Users\Desktop\SuccessFolder`，否则这个文件被放置在`C:\Users\Desktop\FailureFolder`. （记住搜索`"string"`，原始位置和 2 个文件夹位置仍需要设置）我相信此代码应该适用于您要完成的工作。让我知道是否需要对代码进行任何更改=]

```
@Echo off
cd /D C:\Users\Desktop
FOR %%a in (*.txt) do (
findstr /C:"string" "%%a" >nul && move "%%a" "C:\Users\Desktop\SuccessFolder" || move "%%a" "C:\Users\Desktop\FailureFolder") 
```

# asp.net-mvc - 什么时候需要在控制器上显式放置属性？

> ID：12938182
> 
> 赞同：0
> 
> 时间：2012-10-17T15:46:56.673
> 
> 标签：asp.net-mvc

我创建了一个新的 MVC 4 项目。我创建了一个自定义操作过滤器并从 ActionFilterAttribute 继承。我为 OnActionExecuting() 创建了一个覆盖。目前，它没有多大作用。它只是向输出窗口输出一条消息。最后，我在 FilterConfig.cs 中的 RegisterGlobalFilters() 中注册了操作过滤器。

当我运行应用程序时，断点被命中。这很好。但是，我没有向任何控制器添加任何属性。这种行为正确吗？我什么时候需要向我的控制器添加属性？这是如何运作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:50:04.720

RegisterGlobalFilters 适用于所有控制器。

在某些情况下，您可能希望将特定属性添加到特定控制器。例如，某个控制器可能需要某个角色使用`[Authorize (Roles="group1")]`，而所有其他控制器则不需要。将属性添加到该控制器只会为您提供此功能。

# sharepoint - 不同 SharePoint 站点之间的数据传输

> ID：12938184
> 
> 赞同：0
> 
> 时间：2012-10-17T15:46:59.673
> 
> 标签：sharepoint, sharepoint-2010

是否可以将完整的 SharePoint 网站内容移动到另一个 SharePoint 网站？如果是的话怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:10:31.237

有几种方法可以在站点之间移动数据

*   使用为您完成所有繁重工作的第三方解决方案，即 Axceler 的 ControlPoint
*   将列表或库保存为模板，包括其内容，然后将模板转移到新站点。
*   如果您要移动整个站点或网站，您可以通过 PowerShell 备份/恢复或导出/导入
*   编写一个自定义解决方案，移动每个列表/项目的数据

高温高压

# jquery-ui - jquery ui 1.9.0 自动完成自动对焦不起作用

> ID：12938187
> 
> 赞同：0
> 
> 时间：2012-10-17T15:47:04.293
> 
> 标签：jquery-ui, jquery-ui-autocomplete, autofocus

来路：

*   jquery-ui-1.9.0.custom.min.css
    *   jquery-1.8.2.js
*   jquery-ui-1.9.0.custom.min.js

代码如下：

```
$("#origen, #destino").autocomplete({       
    source: function(request, response){
        $("#cargando").show();

        // Para distinguir la cache del elemento origen y destino ya que van a jsp's diferentes. tolo (03/07/2012)
        var term = request.term;            var termCache = request.term + "-" + $(this.element).attr("id"); 

        if ( termCache in cache ) {
            response( cache[ termCache ] );
            setTimeout("$('#cargando').hide();", 2000);//ocultamos con retraso 2 seg
            return;             }

        if($(this.element).attr("id") == "origen"){
            // El filtro de aeropuertos por pais es solo para el origen
            if (parent.codMarca == 'NET') 
                paises = '|PT|ES|';

            urlxx = "../../jsp/buscador/autocompletevuelos.jsp?sesion=" + sesion + "&term=" + term + "&codidi=" + codidi + 
                    "&tipPro=VH&paises=" + codpai + "&codEmp=" + parent.codEmp + "&codMarca=" + parent.codMarca + "&codWcn=" + 
                    parent.codWcn + "&orides=O";            }else{
            urlxx = "../../jsp/buscador/autocompletepoblaciones.jsp?sesion=" + sesion + 
                                                                    "&term=" + term + 
                                                                    "&codidi=" + codidi + 
                                                                    "&tipoProducto=VH&codemp=" + codEmp + 
                                                                    "&codwcn=" + codWcn + "&codMarca=" + parent.codMarca;           }

        lastXhr = $.getJSON( urlxx, request, function( data, status, xhr ) {
            cache[ termCache ] = data;

            if ( xhr === lastXhr ) {
                response( data  );
                setTimeout("$('#cargando').hide();", 2000);//ocultamos con retraso 2 seg
            }           
        });         
    },      
    minLength: 2,       
    select: function(event, ui) {           
        var componente = $(this).attr("id");
        if (ui.item) {
            // El check de residente sólo tiene que estar habilitado cuando los dos aeropuertos son españoles, y al menos uno de ellos 
            // consta como residente.
            if(componente == "origen"){
                $("#oriCodApt").val(ui.item.id);
                $("#orideszona").val(ui.item.value);
                $("#oricodpai").val(ui.item.codpai.toUpperCase());
                $("#oriresidente").val(ui.item.residente.toUpperCase());

            }else{
                $("#desCodApt").val(ui.item.codapt);
                $("#desdeszona").val(ui.item.value);
                $("#descodpai").val(ui.item.codpai.toUpperCase());
                $("#desresidente").val(ui.item.residente.toUpperCase());

                $("#zonaCodificada").val(   ui.item.codpai.toUpperCase() + "#" + 
                                            ui.item.codepr.toUpperCase() + "#" + 
                                            ui.item.codpob.toUpperCase() + "#" + 
                                            ui.item.codare.toUpperCase());

                $("#numAeropuertos").val(ui.item.numAeropuertos == undefined ? 0 : ui.item.numAeropuertos);
                $("#fueraCiudad").val(ui.item.fueraCiudad == undefined ? "" : ui.item.fueraCiudad);
            }

            validaResidente();          
        }       
    },      
    open: function(e,ui) {          
        var autoData = $(this).data('autocomplete');            
        var reserText = ",de,del,el,la,las,los,en,";            
        var altoCombo = 200;    // Altura del combo del autocomplete.           
        var componente = $(this).attr("id");

        autoData.menu.element.css({'width':'' + anchoMinimo + 'px'});

        autoData.menu.element.find('li').each(function() {
            var fila = $(this);
            var texto = fila.text().toLowerCase().replace(autoData.term.toLowerCase(), "<b>" + autoData.term.toLowerCase() + "</b>");
            var autoText = "";

            texto = texto.split(" ");

            for(var i = 0; i < texto.length; i++){
                if((reserText.indexOf( texto[i].replace("<b>","").replace("</b>","") ) != "-1") && (i > 0)){
                    autoText += texto[i] + " ";
                }else if( texto[i].substring(0,3) == "<b>" ){
                    autoText += "<b>" + texto[i].charAt(3).toUpperCase() + texto[i].substring(4) + " ";
                }else{
                    autoText += texto[i].charAt(0).toUpperCase() + texto[i].substring(1) + " ";
                }
            }

            autoText = autoText.replace(" De "," de ").replace(" Del "," del ").replace(" Los "," los ").replace(" El "," el ").replace(" En "," en").replace(" La "," la ").replace(" Las "," las ");

            // El código de aeropuerto, lo que va entre paréntesis, tiene que salir en mayúsculas.
            if(componente == "origen"){
                var tamPrimerCorte = autoText.split("(").length;
                var textoEnParentesis = autoText.split("(")[tamPrimerCorte - 1];
                textoEnParentesis = textoEnParentesis.split(")")[0];
                autoText = autoText.replace("(" + textoEnParentesis + ")", "(" + textoEnParentesis.toUpperCase() + ")");
            }

            fila.find('a').text("");
            fila.find('a').append( autoText );

            // Ahora vamos a calcular el ancho de la cadena más ancha para saber qué ancho tiene que tener el combo.
            ancho = autoText.length * 5;    // Con esta fuente de letra, en IE, etc...

            if(ancho > anchoFilaDestinos){
                anchoFilaDestinos = ancho;
            }
            // Fin del cálculo del ancho.

            fila.find('a').css({'white-space':'nowrap'});           
        });
        // Hay que mantener un ancho mínimo.            
            if(anchoFilaDestinos < anchoMinimo){
                anchoFilaDestinos = anchoMinimo;            
            }
            numItems = 0;
            // Hay que recorrer todas las filas otra vez, para ponerles a todas el mismo ancho.
            autoData.menu.element.find('li').each(function() {
                var fila = $(this);
                fila.find('a').css({'white-space':'nowrap','width':'' + anchoFilaDestinos + 'px','text-align':'left'});
                numItems++;             
            });
            anchoFilaDestinos += 9;             
            autoData.menu.element.css({'width':'' + anchoFilaDestinos + 'px'});
            anchoFilaDestinos = 0;
            // Porque 9 son los que caben en 200 de alto.           
            if(numItems < 9){
                altoCombo = numItems * 23;
                $(".ui-autocomplete").css("height", altoCombo).css("overflow-y", "hidden").css("overflow-x", "hidden");             
            }else{
                $(".ui-autocomplete").css("height", altoCombo).css("overflow-y", "scroll").css("overflow-x", "hidden");             
            }       
    },      
    error : function() {            
        if ( $(this).attr("id") == "origen" ){
            parent.crearModal('Alerta', '<ml:message id="1" value="Hay un error en la peticion de ORIGEN."/>');             
        } else {
            parent.crearModal('Alerta', '<ml:message id="2" value="Hay un error en la peticion de DESTINO."/>');            
        }       
    },      
    autoFocus: true,
    focus: function(event, ui){             
        if (ui.item) {
            var codzon = "P:" + ui.item.codpai + "#" + ui.item.codepr + "#" + ui.item.codpob + "#" + ui.item.codare;

            if($(this).attr("id") == "origen"){
                $("#oricodzona").val(codzon);
                $("#orideszona").val(ui.item.value);
            }else{
                $("#descodzona").val(codzon);
                $("#desdeszona").val(ui.item.value);
            }           
        } else {
            if($(this).attr("id") == "origen"){
                $("#oricodzona").val("");
            }else{
                $("#descodzona").val("");
            }           
        }       
    }   
}); 
```

最后，如您所见，选项 autoFocus:true，但它不起作用，即使列表已正确填写。

请问，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:35:31.123

好的，自动应答：您必须在包含 autoFocus 之前删除 de selectFirst 子句。

# svn - 当主干移动时，如何在 Git 中保留 SVN 历史记录？

> ID：12938189
> 
> 赞同：15
> 
> 时间：2012-10-17T15:47:09.340
> 
> 标签：svn, git-svn

我正在尝试使用[svn2git](https://github.com/nirvdrum/svn2git)将 SVN 项目迁移到 git。但是，我在保存所有历史时遇到了问题。原因似乎是因为行李箱被移动了过去。我正在使用的命令是：

```
$ svn2git http://mysvnserver.com/myproject/iPhone/ --no-minimize-url --authors ../authors.txt 
```

但这只是让我的历史可以追溯到 2011 年。该项目实际上是在 2010 年开始的。预计开始时看起来像这样：

```
myproject
   trunk
   branches
   tags 
```

但在 2011 年，它变成了这样：

```
myproject
   iPhone
     trunk
     branches
     tags
   Android
      trunk
      branches
      tags 
```

旧的树干和树枝在 iPhone 目录下。我从这一举动完成时开始的历史。如果我`svn log`在 iPhone 目录中这样做，我会得到缩短的历史记录。但是，如果我`cd trunk; svn log`得到完整的历史记录。

我不知道如何把这段历史弄出来。我的想法是以某种方式创建一个 git 存储库，其中只有主干的历史可以追溯到 2010 年。然后我稍后会将它作为我的主存储库中的一个分支，并做一个 rebase 以使历史正确。但我没有运气为主干创建这个回购。我试过了：

```
$ svn2git http://mysvnserver.com/myproject/ --rootistrunk --authors ../authors.txt 
```

和

```
$ svn2git http://mysvnserver.com/myproject/ --rootistrunk -no-minimize-url --authors ../authors.txt 
```

没有任何成功。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-18T23:54:01.007

我自己也遇到了同样的问题。这是我解决它的方法。

分别克隆两个存储库。

```
git svn clone -s [original-svn-location] [original-clone-directory]
git svn clone -s [new-svn-location] [new-clone-directory] 
```

将旧的克隆数据添加到新的存储库中。

```
cd [new-clone-directory]
git remote add oldstuff ../[original-clone-directory]
git fetch oldstuff 
```

现在是棘手的部分...... Do `git log`of `master`and of `oldstuff/master`（或者可能`trunk`和`olstuff/trunk`- 无论你如何设置）并写下新克隆的第一个提交 sha 和旧克隆的最后一个提交 sha（就在移动之前） .

```
git replace [first-commit-sha-from-new-clone] [last-commit-sha-from-old-clone] 
```

并重写 SHA 哈希，使一切都符合要求，您不再需要替换 ref ...

```
git filter-branch 
```

现在清理不再需要的引用。

```
git remote rm oldstuff
rm -rf .git/refs/replace 
```

您将丢失历史记录中的第一次提交，但由于这应该是最初的举动（即：实际文件内容没有更改），因此对您来说可能无关紧要。

现在仍应维护所有历史记录，并且`git blame`报告会记住回购的旧历史记录，从而再次为您提供准确的信息。

您应该能够根据需要经常重复此操作（取决于您的项目更改其根位置的次数和/或有多少分支在移动的两侧都有提交）。

PS - 我根据我在[这里](http://blog.tfnico.com/2010/10/gitsvn-6-grafting-together-svn-history.html)找到的一个解决方案调整了这个解决方案（我无法让他的移植方法为我的存储库工作 - 但使用 replace 似乎工作得很好）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T16:26:35.667

您可以使用[SubGit](http://subgit.com/)转换您的 SVN 存储库。

不幸的是，1.0 版不支持您所拥有的复杂布局。但是有[1.1 EAP 版本](http://subgit.com/interim/SGT-434/)可以很好地处理它。1.0 和 1.1 版本都适用于本地 SVN 存储库，因此您必须具有对 SVN 存储库的管理访问权限。

请执行以下操作以将 SVN 存储库转换为 Git：

1.  生成初始配置。

    ```
    $ subgit configure SVN_REPO 
    ```

2.  SubGit 很可能会检测到此存储库中的两个项目。AFAIU，您只需要一个 Git 存储库。因此，您必须在配置文件中只保留一个“git”部分。在那里指定您需要转换的所有分支。

    ```
    $ EDITOR SVN_REPO/conf/subgit.conf
    [core]
        ...
    [git "default"]
        repository = .git
        ...
        trunk = trunk:refs/heads/master
        branches = branches/*:refs/heads/*
        tags = tags/*:refs/tags/*
        shelves = shelves/*:refs/shelves/*
        branches = iPhone/trunk:refs/heads/iPhone/master
        branches = iPhone/branches/*:refs/heads/iPhone/*
        tags = iPhone/tags/*:refs/tags/iPhone/*
        branches = Android/trunk:refs/heads/Android/master
        branches = Android/branches/*:refs/heads/Android/*
        tags = Android/tags/*:refs/tags/Android/*
        ...
    [daemon]
        ... 
    ```

3.  将 SVN 转换为 Git。

    ```
    $ subgit install SVN_REPO 
    ```

4.  此时 SubGit 将所有版本从 SVN 转换为 Git。您可以在 SVN_REPO/.git 找到转换后的 Git 存储库。此外，SubGit 保持 SVN 和 Git 存储库同步，它安装了特殊的钩子来实现这一点。如果需要，摆脱这些钩子。

    ```
    $ subgit uninstall --purge SVN_REPO 
    ```

就这样。现在您已经转换了 Git 存储库并保留了整个历史记录。

请注意，SubGit 是一种商业产品，但这种一次性转换是免费的。希望，它对你很有效。

# java - JUnit4 - “相同”测试用例的不同超时

> ID：12938201
> 
> 赞同：0
> 
> 时间：2012-10-17T15:47:50.850
> 
> 标签：java, junit, timeout

我对 JUnit4 有疑问，它是`@Test(timeout=xxx)`注释。例如，两个具有相同主体、不同名称的测试。它们都没有使用任何可以初始化的全局变量。
当我运行测试时，它的执行时间完全不同（第一次测试 0,811 秒，第二次测试 0,143）。

获得类似的结果对我来说非常重要。有没有办法解决/解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:55:34.653

可能报告第一个测试花费了更长的时间，因为这包括 JUnit 初始化类所花费的设置时间。如果您有 2 个测试需要在几乎相同的时间内运行，请考虑在其他两个测试之前添加第三个测试，以消除 init 的影响。

让我知道这是否有效，我很好奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:07:44.347

尝试改用超时规则。该类将在应用超时规则之前已初始化，因此*应*排除类初始化时间。

# android - 执行 Selenium“AndroidWebdriver”测试时需要身份验证

> ID：12938205
> 
> 赞同：2
> 
> 时间：2012-10-17T15:47:59.723
> 
> 标签：android, selenium, android-emulator, proxy, webdriver

我最近开始学习 selenium “Android Webdriver” 当 JUnit 测试用例执行时我得到“需要身份验证”

我确保以下一切正常 - 由于我在办公室工作，我遇到了“代理背后的互联网”问题（身份验证问题）。后来我已经解决并且现在可以通过模拟器访问互联网 - 码头与客户端连接（确保这里 localhost:8080/wd/hub)

我通过执行下面的简单代码得到身份验证错误（我确定代码是正确的）

```
WebDriver driver = new AndroidDriver();    
driver.get("http://www.google.com"); 
```

一件事我确定这也是一个代理问题，仅在执行期间（客户端到服务器连接）。因为我可以在空闲状态下在“Androidbrowser”模拟器中访问互联网。我不知道为什么我得到“身份验证”执行 JUnit 期间出现错误”

我是否错过了添加任何库文件，解决代理问题的代码..

任何人都可以帮助我..？您的帮助将不胜感激

# javascript - jqplot 不会在我的内部网格上给我填充

> ID：12938206
> 
> 赞同：0
> 
> 时间：2012-10-17T15:48:03.300
> 
> 标签：javascript, charts, jqplot

我们有一个看起来像这样的图表：

![在此处输入图像描述](../Images/80c9f75732d2ff7cb57a124180214ac7.png)

非常好。好吧，除了第一个和最后一个小节被分成两半！

我知道它为什么会这样，但我不知道如何解决它。我试过 gridPadding、barPad 和 Pad。应该是其他人吧。无论出于何种原因，如果不预先添加一些空白的虚拟数据，我似乎无法让他们推送。这使得底部多了两个令人困惑的条目，这绝对是不可接受的。

代码如下。

```
var f = [[0,1.29],[1,1.29],[2,1.48],[3,1.48],[4,1.48],[5,1.48],[6,1.48],[7,1.48]];
var v = [[0,0.71],[1,0.71],[2,0.8],[3,0.8],[4,0.8],[5,0.8],[6,0.8],[7,0.8]];
var p = [[0,-0.26],[1,-0.26],[2,0.67],[3,0.67],[4,0.67],[5,0.67],[6,0.67],[7,0.67]];

// [x position, y height]
var x_line = [[0,1],[1,21],[2,33],[3,39],[4,21],[5,21],[6,21],[7,21]];
var rank_ticks = [0,1,2,3,4,5,6,7];

$('body').on('click', '#load-fvp', function () {

    var plot2 = $.jqplot('fvp-chart', [f, v, p, x_line], {
        stackSeries: true,
        gridPadding: 40,
        highlighter: {
            show: true,
            tooltipAxes: 'y',
            useAxesFormatters: false,
            formatString: "<span style='display: none;'>%s</span> %s" // hide the first S because it's irrelevant
        },
        seriesDefaults: {
            renderer: $.jqplot.BarRenderer,
            rendererOptions: {
                barWidth: 24,
                shadowAlpha: 0.03,
                fillToZero: true,
                highlightMouseOver: false
            },
            pointLabels: {
                show: true,
                stackedValue: true
            }
        },
        legend: {
            show: true,
            location: 'nw',
            labels: ['Fund.', 'Value', 'Price', 'Rank']
        },
        series: [
                 {showLabel: true, useNegativeColors: false},
                 {showLabel: true, useNegativeColors: false},
                 {showLabel: true, useNegativeColors: false},
                  {
                    disableStack : true,//otherwise it wil be added to values of previous series
                    renderer: $.jqplot.LineRenderer,
                    lineWidth: 2,
                    pointLabels: {
                        show: false
                    },
                    color: '#FF7D7D',
                    markerOptions: {
                        size: 5, color: 'red'
                    },
                    xaxis: 'x2axis', yaxis: 'y2axis',
                  }
                  //, color: '#FFCC66', useNegativeColors: false, shadow: false, fill: false, lineWidth: 3, fillToZero: true
                ],

        axesDefaults: {
            //tickRenderer: $.jqplot.CanvasAxisTickRenderer,
        },
        axes: {
            xaxis: {
                ticks: rank_ticks,
                tickOptions: {
                    formatString:'%d',
                    fontSize:'7pt',
                    fontFamily:'\"Lucida Grande\",Verdana, Georgia, Times, serif',
                },
            },
            x2axis: {
                ticks: rank_ticks,
                showTicks: false
            },
            yaxis: {
                labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                ticks: [-4, -3, -2, -1, 0, 1, 2, 3, 4],
                label: "Information Ratio",
                labelOptions: {
                  angle: 270,
                  fontFamily: "Verdana, Helvetica",
                  fontSize: "13pt",
                  textColor: '#111'
                },
                tickOptions: { 
                    formatString:'%d',
                    fontSize:'7pt',
                    fontFamily:'\"Lucida Grande\",Verdana, Georgia, Times, serif',
                },
            },
            y2axis: {
                labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                ticks: [100, 50, 1],
                showLabel: true,
                label: "Rank",
                labelOptions: {
                  angle: 90,
                  fontFamily: "Verdana, Helvetica",
                  fontSize: "13pt",
                  textColor: '#FF7D7D'
                },
                tickOptions: { 
                    formatString:'%d',
                    fontSize:'7pt',
                    fontFamily:'\"Lucida Grande\",Verdana, Georgia, Times, serif',
                },
            }
    }});

    $('.jqplot-table-legend').css('left', '567px').css('top', '-14px');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T07:14:19.657

试试这些值：

```
gridPadding:{
        right:40,
        left:40
    } 
```

# ajax - 在用户控件中回发后 Popupextender 消失

> ID：12938209
> 
> 赞同：0
> 
> 时间：2012-10-17T15:48:12.257
> 
> 标签：ajax, modalpopupextender

亲爱的研究员，我有一个用户控件，它从具有多个下拉列表控件的用户那里获取目的地详细信息……例如，国家下拉列表生成回发并根据选择值填充状态下拉列表。State 的 Dropdownlist 产生回传以获取基于州的城市。此外，一切都发生在 Ajax UpdatePanel 中。 - 选择 -

我在 popupextender 中使用这个控件来显示。每次下拉列表回发弹出控件消失。请帮帮我

```
<asp:Panel ID="pnlhotelsearch" runat="server">

            <div>

            </div>
            <uc1:SlimMainsearchpanel ID="SlimMainsearchpanel1" runat="server" />

        </asp:Panel>
        <ajaxToolkit:PopupControlExtender ID="PopupControlExtender1" TargetControlID="lnkbtnCriteriea" PopupControlID="pnlhotelsearch" runat="server">
        </ajaxToolkit:PopupControlExtender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:11:17.890

[在ASP.net Modal Pop up extender 和 DropDownlist autopostback](https://stackoverflow.com/questions/471111/asp-net-modal-pop-up-extender-and-dropdownlist-autopostback)有几个建议。

我解决它的方法是在 AutoPostBack 事件处理程序中引发一个新事件，比如 DropDownChangedEvent。新的 DropDownChangedEvent 的处理程序调用 PopupExtender.Show。

# java - 如何将动作从 Struts 控制器转发/重定向到 Spring 控制器

> ID：12938210
> 
> 赞同：2
> 
> 时间：2012-10-17T15:48:12.253
> 
> 标签：java, spring, struct

我有 2 个 Web 应用程序，一个在 Struts 中，另一个在 Spring 中，在同一服务器上运行。

我想从 Struts 注销同时从 Spring Web 应用程序注销。

如何从 StructLogOut Action 转发/重定向到 SpringLogOut Action：

这行得通吗？？

```
response.sendRedirect("/com/SpringAction"); 
```

# qt - 我如何使用 QSettings 加载不同的设置

> ID：12938213
> 
> 赞同：1
> 
> 时间：2012-10-17T15:48:25.180
> 
> 标签：qt, qsettings

我有一个 Qt 应用程序，它需要能够从多个设置文件中加载才能以不同的方式运行。例如，假设我的应用程序可以支持多种变体，VAR1、VAR2、VAR3……我的菜单条目之一允许我加载设置。目前，我使用 QSettings 对象执行此操作，它工作正常。但现在我想实现一个不同的变体。我想从预配置的设置文件中加载，而不是手动设置 20 个或更多设置。

据我所知，QSettings 不允许我更改来源。我查看了静态方法 QSettings::setPath 但这只能在实例化 QSettings 对象之前完成一次。

我希望创建以下方法： 1 - 加载出厂默认设置 2 - 使用用户指定的名称保存用户设置文件 3 - 按名称调用用户设置文件。

如果可能的话，我宁愿不必重写 QSettings 来满足我的需求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:17:57.093

其中一个`QSettings`构造函数采用文件名：

```
QSettings::QSettings (const QString& fileName,
                      Format format, 
                      QObject *parent = 0); 
```

只需使用它来制作`QSettings`您需要的尽可能多的实例：

```
QSettings s1("path1.ini", QSettings::IniFormat);
QSettings s2("path2.ini", QSettings::IniFormat); 
```

如果您需要在它们之间进行复制，您可以查看`QSettings::allKeys()`并获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:15:57.587

您是否尝试过像 INI 文件一样访问 QSettings ？它允许您设置 INI 文件的位置

```
 QSettings settings("/home/petra/misc/myapp.ini",
                    QSettings::IniFormat); 
```

# jquery - 使用 jQuery mobile 和 Ajax 动态制作垂直单选组

> ID：12938218
> 
> 赞同：0
> 
> 时间：2012-10-17T15:48:33.240
> 
> 标签：jquery, jquery-mobile, dynamic, radio-group

几个小时以来，我一直在努力解决这个问题。我什至在堆栈溢出上查看了其他类似的示例，但它们没有帮助。

```
success :  function(data) {       
    var subscriptionJSONObject = data; //{"cost":7.0,"duration":30,"id":7},{"cost":120.0,"duration":365,"id":8}
    $('<fieldset data-role="controlgroup" id="paypalFieldset"></fieldset>').appendTo('#paypalContent');                     
    $('<legend id="paypalLegend">Select a subscription:</legend>').appendTo('#paypalFieldset');                     
    $.each(subscriptionJSONObject,function(i) {
          $('<input type="radio" name="radio-choice-'+i+'" id="'+subscriptionJSONObject[i].id+'" value="'+subscriptionJSONObject[i].cost+'"/>').appendTo("#paypalFieldset"); 
          if(subscriptionJSONObject.cost != -1){
          $('<label for="radio-choice-'+i+'">'+subscriptionJSONObject[i].duration+' day subscription for only R'+subscriptionJSONObject[i].cost+'.00</label>').appendTo("#paypalFieldset");     
          } else {
               $('<label for="radio-choice-'+i+'">Free subscription</label>').appendTo("#paypalFieldset");     
          }
    });
    $("#paypalContent").trigger("create");
} 
```

这是我的 ajax 调用成功函数的一部分。按钮正在显示，图例也显示，但它们没有形成带有 jquery mobile 的垂直单选组的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:17:13.760

如果我没记错的`.trigger("create")`话，应该在页面本身（而不是单个小部件）上进行调用。这似乎暗示在 jQM 文档中：

[http://jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

按照这个逻辑，你的最后陈述可能是：

```
$("#paypalContent").closest("div[data-role=page]").trigger("create"); 
```

如果这没有帮助，我也很幸运使用`.destroy()`后跟，`.trigger("create")`但我怀疑这是否被认为是好的形式。

祝你好运！

# hibernate - 如何在 groovy/grails 中为嵌套对象创建标准？

> ID：12938219
> 
> 赞同：12
> 
> 时间：2012-10-17T15:48:35.643
> 
> 标签：hibernate, grails, criteria

我需要帮助为嵌套对象创建休眠条件。例如 ：

```
class office{
    Integer id;
    OfficeDetails cmdData ;
}

class OfficeDetails {
    Integer id;
    Region region;

}

class Region {
    Integer id;
    Integer regionNum;
} 
```

现在，从服务类（ officeService ）中，我试图将与某个区域匹配的所有办公室提取为：

```
List<Office> findAllByRegion( Integer regionNumber){
    def criteria =  {  eq ( 'cmdData.region.regionNum', regionNumber ) }
    def allOfficesInTheRegion =  Office.findAll(criteria)

    return allOfficesInTheRegion
} 
```

总是出现异常：“org.hibernate.QueryException：无法解析属性：”我需要找到正确的方法来为此查询创建条件。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-17T15:54:33.097

[请参阅用户指南的条件部分](http://grails.org/doc/latest/guide/GORM.html#criteria)下的“查询关联” ：

```
def criteria = {
  cmdData {
    region {
      eq('regionNum', regionNumber)
    }
  }
} 
```

# iphone - iOS pathForResource 仅显示文件名

> ID：12938221
> 
> 赞同：-1
> 
> 时间：2012-10-17T15:48:39.713
> 
> 标签：iphone, ios

我正在我的应用程序中实现音频播放器。我有一个 UITableView，我在其中显示了我的音轨列表。

音频列表被添加到一个数组中

```
fileArray = [[NSMutableArray alloc] initWithObjects:
                 [[NSBundle mainBundle] pathForResource:@"A Million Years" ofType:@"mp3"],
                 [[NSBundle mainBundle] pathForResource:@"2 Million Years" ofType:@"mp3"],... 
```

在我的 cellForRowAtIndexPath 我正在做

```
cell.textLabel.text = [[NSString stringWithFormat:@"%@", [self.fileArray objectAtIndex:indexPath.row]] stringByDeletingPathExtension]; 
```

但问题是它仍然向我展示了一个完整的扩展名“/Users/....”。我只希望显示文件名（“一百万年”、“两百万年”）。

我究竟做错了什么？我一直在寻找答案，但从未得到答案（可能是由于措辞错误）

非常感谢大家。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:50:49.003

`lastPathComponent`如果你想要它的最后一部分，你应该使用它。所以：

```
cell.textLabel.text = [[[self.fileArray objectAtIndex:indexPath.row] lastPathComponent] stringByDeletingPathExtension]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:52:43.320

那不是扩展名。它被称为“路径”。（在尝试对其进行编程之前，至少让自己在*使用计算设备方面达到可接受的知识水平会很好......）*

我建议你使用

```
[somePath lastPathComponent] 
```

而是为了仅在没有包含目录的情况下获取文件名。

此外，调用`[NSString stringWithFormat:]`完全是多余的，浪费内存和处理器时间（这是不可接受的，尤其是在嵌入式设备上）。

# linq - 带有整数键的 Linq 和外键查找表

> ID：12938222
> 
> 赞同：0
> 
> 时间：2012-10-17T15:48:40.307
> 
> 标签：linq

我有一个数据库，其中的表是：

```
Table1:
Table1Id int

Table2:
Table2Id int
ForeignKeyToTable1 int

LookupTable:
Table2Id
Table3Id

Table3:
Table3Id int
Table3Field varchar 
```

我想要：

```
select table1.* from table1
inner join table2 on table1.Table1Id = ForeignKeyToTable1 
inner join LookupTable on LookupTable.Table2Id = table2.Table2Id 
inner join Table3 on table3.Table3Id = LookupTable.Table3Id
where table3.Table3Field ='qwerty' 
```

如何在 Linq 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:55:15.627

我相信这样的事情会发生

```
var query = from t1 in context.Table1
            join t2 in context.Table2 
                 on t1.Table1Id equals t2.ForeignKeyToTable1 
            join lt in context.LookupTable 
                 on t2.Table2Id equals lt.Table2Id
            join t3 in context.Table3 
                 on lt.Table3Id equals t3.Table3Id
            where t3.Table3Field == "qwerty"
            select t1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:25:39.987

```
var query = 
            from table1 in db.Table1
            join table2 in db.Table2 on new { Table1Id = table1.Table1Id } equals new { Table1Id = table2.ForeignKeyToTable1 }
            join lookuptable in db.LookupTable on table2.Table2Id equals lookuptable.Table2Id
            join table3 in db.Table3 on lookuptable.Table3Id equals table3.Table3Id
            where
              table3.Table3Field == "qwerty"
            select new {
              table1.Table1Id
            }; 
```

# map - 在 Go 中使用范围获取值不是线程安全的吗？

> ID：12938233
> 
> 赞同：6
> 
> 时间：2012-10-17T15:49:25.117
> 
> 标签：map, go

当覆盖`m`具有并发写入者的地图时，包括可以从地图中删除的写入者，这样做不是线程安全的吗？：

```
for k, v := range m { ... } 
```

我正在考虑线程安全我需要防止其他可能的编写者`v`在我阅读它时更改值，并且（当使用互斥锁并且因为锁定是一个单独的步骤时）验证密钥`k`是否仍在地图中. 例如：

```
for k := range m {
    m.mutex.RLock()
    v, found := m[k]
    m.mutex.RUnlock()
    if found {
        ... // process v
    }
} 
```

（假设其他作家`m`在改变之前写锁定`v`。）有更好的方法吗？

编辑添加：我知道地图不是线程安全的。[但是，根据http://golang.org/ref/spec#For_statements](http://golang.org/ref/spec#For_statements)上的 Go 规范，它们在某种程度上是线程安全的（搜索“如果在迭代期间删除尚未到达的映射条目”）。这个页面表明使用的代码`range`不需要关心其他goroutines插入到map中或从map中删除。我的问题是，这种线程安全性是否扩展到`v`，这样我就可以`v` *只读*使用 only`for k, v := range m`没有其他线程安全机制？我创建了一些测试代码来试图强制应用程序崩溃以证明它不起作用，但即使是公然运行线程不安全的代码（许多 goroutines 在没有锁定机制的情况下疯狂地修改相同的映射值）我不能去崩溃！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T19:37:45.637

**不，映射操作不是原子/线程安全**的，因为您问题的评论者指出[了 golang 常见问题解答“为什么映射操作没有定义为原子的？”</a>。](http://golang.org/doc/go_faq.html#atomic_maps)

[](http://golang.org/doc/go_faq.html#atomic_maps)

[为了确保您访问它的安全，我们鼓励您使用 Go 的](http://golang.org/doc/go_faq.html#atomic_maps)****[通道](http://golang.org/ref/spec#Channel_types)作为资源访问令牌的一种手段**。通道用于简单地传递令牌。任何想要修改它的人都会从频道请求 - 阻塞或非阻塞。处理完地图后，它将令牌传递回通道。**

 **迭代和使用地图应该足够简单和简短，因此您应该可以只使用一个令牌进行完全访问。

如果不是这种情况，并且您将地图用于更复杂的东西/资源消费者需要更多时间使用它，您可以实现读取器与写入器访问令牌。因此，在任何给定时间，只有一个写入者可以访问地图，但是当没有写入者处于活动状态时，令牌会传递给任意数量的读取者，这些读取者不会修改地图（因此他们可以同时读取）。

有关频道的介绍，请参阅[有关频道的 Effective Go 文档](http://golang.org/doc/effective_go.html#channels)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T16:50:55.427

您可以使用[concurrent-map](https://github.com/streamrail/concurrent-map)来为您处理并发难题。

```
// Create a new map.
map := cmap.NewConcurretMap()

// Add item to map, adds "bar" under key "foo"
map.Add("foo", "bar")

// Retrieve item from map.
tmp, ok := map.Get("foo")

// Checks if item exists
if ok == true {
    // Map stores items as interface{}, hence we'll have to cast.
    bar := tmp.(string)
}

// Removes item under key "foo"
map.Remove("foo") 
```**

# excel - 宏每分钟运行一次，但我希望一个特定的子每 45 分钟运行一次

> ID：12938237
> 
> 赞同：2
> 
> 时间：2012-10-17T15:49:33.770
> 
> 标签：excel, vba, ms-office

我有一个在上午 8 点到下午 4 点之间每分钟运行一次的电子表格，它从某个文件夹导入文件并进行某些计算

进行计算以检查是否违反了限制。如果超出限制，则电子表格需要通过声音警报和电子邮件警报通知用户。要求是每分钟发出一次声音警报，而电子邮件警报应该每 45 分钟发出一次，因为他们不想收到垃圾邮件。

```
public sub fileImport()
     if between 0800 to 1600
         //do file import
         //do calculations
         if breach sound alert             
     end if   
     Application.OnTime RunEveryMinute, fileImport

     if there is a breach
         sendMail()         
         Application.OnTime RunEvery45Min, sendMail              
     end if

public sub sendEmail()
     //do email function 
```

那么我如何才能每 45 分钟而不是每分钟调用一次 sendEmail 子程序呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:55:17.310

假设这是在一个循环中，只需记录最后一次发送时间并将其与`Now`;

```
Public Sub sendEmail()
    Static lastSent As Date
    If DateDiff("m", lastSent, Now) > 45 Then
         '//do email function
         lastSent = Now
    End If
End Sub 
```

（这也将在第一次被调用时发送）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:15:23.143

您可以只使用 OnTime 功能：

```
Public RunWhen As Double
Public Const cRunIntervalSeconds = 120 ' two minutes
Public Const cRunWhat = "TheSub"

Sub StartTimer()
    RunWhen = Now + TimeSerial(0,0,cRunIntervalSeconds)
    Application.OnTime EarliestTime:=RunWhen, Procedure:=cRunWhat, _
        Schedule:=True
End Sub
'This stores the time to run the procedure in the variable RunWhen, two minutes after the current time.

'Next, you need to write the procedure that will be called by OnTime. For example,

Sub TheSub()
    ' Put your send email code here.
    StartTimer  ' Reschedule the procedure
End Sub 
```

这个例子来自：[http ://www.cpearson.com/excel/OnTime.aspx](http://www.cpearson.com/excel/OnTime.aspx)

祝你好运。

# cocos2d-iphone - 快速接触使我的游戏崩溃

> ID：12938239
> 
> 赞同：0
> 
> 时间：2012-10-17T15:49:35.650
> 
> 标签：cocos2d-iphone

我有一个启用触摸的 CCLayer 类和以下方法：

```
 -(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
    -(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; 
```

如果我反复快速点击 iPad 屏幕，它会崩溃——但不会到获取堆栈跟踪的地步……它会冻结……控制台将显示：

```
2012-10-17 08:43:06.445 game[5432:607] cocos2d: animation stopped
2012-10-17 08:43:06.448 game[5432:607] cocos2d: animation started with frame interval: 4.00
2012-10-17 08:43:07.075 game[5432:607] cocos2d: animation stopped
2012-10-17 08:43:07.081 game[5432:607] cocos2d: animation started with frame interval: 60.00
2012-10-17 08:43:12.557 game[5432:607] cocos2d: animation stopped
2012-10-17 08:43:12.561 game[5432:607] cocos2d: animation started with frame interval: 4.00 
```

有没有办法限制 ccTouchesBegan/ccTouchesEnded 方法的速率？如果我删除了这些事件处理程序中的所有代码，甚至会发生这种情况——只是超频繁地触发该方法的行为似乎使一切陷入困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:42:05.400

这是否也发生在一个仅进行触摸修改的新 cocos2d 项目中？如果是这样，请在 cocos2d 论坛上提交错误报告。

该日志似乎表明 cocos2d 正在暂停或停止，或两者兼而有之。通过设置断点检查 CCDirector 函数`startAnimation`、`stopAnimation`和是否`pause`被调用。`resume`检查进行这些调用的调用堆栈。如果它来自您的代码，请修复它。如果没有，并且这发生在新项目中，请提交错误报告。

# php - PHPCrawl：将站点地图输出到服务器上的 XML 文件

> ID：12938246
> 
> 赞同：0
> 
> 时间：2012-10-17T15:49:49.837
> 
> 标签：php, xml-parsing, sitemap, web-crawler, phpcrawl

我正在尝试将 PHPCrawl 用于我网站的站点地图。但是，我无法尝试将其输出到服务器上的 xml 站点地图。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:53:54.537

在官方 phpcrawl-forum 中，您可以找到执行此操作的示例脚本：http: [//sourceforge.net/projects/phpcrawl/forums/forum/307696/topic/6037903](http://sourceforge.net/projects/phpcrawl/forums/forum/307696/topic/6037903)

# sql-server - 我应该用 BLOB 替换多个浮点列吗？

> ID：12938247
> 
> 赞同：1
> 
> 时间：2012-10-17T15:49:52.473
> 
> 标签：sql-server, performance, blob, insert-into, poeaa

SQL Server 中的单个 BLOB 列将如何比较（性能方面）与约 20 个 REAL 列（20 x 32 位浮点数）？

我记得 Martin Fowler 建议使用 BLOB 来持久化大型对象图（在企业应用程序架构模式中）以删除查询中的多个连接，但是对于具有 20 个固定列的表（从未在查询）？

该表更新非常频繁，大约每秒 100 次，并且`INSERT`查询中指定的所有列的语句变得相当大。

我认为第一个答案是“自己分析”，但我想知道是否有人已经有这方面的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T20:05:59.547

如果您没有发现这对于满足您的性能要求至关重要，通常您不应该这样做。

如果将其存储在一个 blob 中，则在对对象结构进行任何更改（例如添加或删除列）时，都需要重新计算整个数据库。如果您保留多个列，您未来的数据库重构和部署将更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:11:56.787

我不能完全谈论 的性能`SELECT`，您需要对其进行测试，但我非常怀疑它会导致任何性能问题，因为您不会读取比以前更多的数据。但是，关于`INSERT`，您应该会看到性能提升（我不确定大小），因为**可能**不会有任何统计索引要更新。当然，这取决于**很多**设置，但我只是把我的意见扔在那里。这个问题非常主观，并且没有足够的信息来真正告诉您是否会看到围绕更改的性能问题。

现在，在实践中，我要说的是，除非您看到真正的性能问题，否则不要这样做。此外，如果您看到真正的性能问题，请在选择此类解决方案之前对其进行分析，可能还有其他方法可以解决这些问题。

# wordpress - wordpress 特色图片上传器无法正常工作

> ID：12938252
> 
> 赞同：2
> 
> 时间：2012-10-17T15:50:03.910
> 
> 标签：wordpress

在 wordpress 中创建一个新帖子，我尝试设置一个特色图片。有问题的图像是 355 KB png，但我也得到了相同的结果，即 157 KB jpg 和 34 KB png。

以下是相关的 php.ini 设置：

```
post_max_size = 0
upload_max_filesize = 50
memory_limit = 24M
max_execution_time = 60 
```

图片使用浏览器上传器上传正常，但它不会将其设置为特色图片，只是将其插入帖子中。

使用 php 5.4.4 和 wordpres 3.4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:01:39.947

这似乎不是上传问题（因为它上传得很好）。

**上传图片后，您是否尝试单击“用作特色图片”？**

截图：[http ://cl.ly/image/3h232G3i2q29](http://cl.ly/image/3h232G3i2q29)

干杯。

# r - R中的滚动图表窗口

> ID：12938256
> 
> 赞同：1
> 
> 时间：2012-10-17T15:50:05.987
> 
> 标签：r, charts, scroll

我想从 R 创建大于显示区域的图表。即几千个数据点（如股票图表）。我希望能够左右滚动图表。是否有任何已知的功能或软件包可以做到这一点？

我在这里和网上都有各种各样的搜索，但我找不到任何关于 R 的东西，而不必自己去编写一些相当严肃的代码。

不寻找除此之外的任何花哨的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:30:20.953

`tkexamp`这是使用TeachingDemos 包中的函数的一种方法：

```
library(TeachingDemos)

my.x <- seq(1,10000)
my.y <- 5 + my.x/3000 + sin(my.x/1000) + rnorm(10000,0,.5)

myfun <- function(x,y,start=1, span=100, 
    xlab=deparse(substitute(x)), 
    ylab=deparse(substitute(y)),...) {
    w <- seq(start, length.out=span)
    w <- w[ w<= length(x) ]
    plot(x[w],y[w], main=paste(start,'to',max(w)), 
    ylim=range(y), xlab=xlab, ylab=ylab, ... )
}

mylist <- list( start=list('slider', from=1, to=10000, init=1),
                span=list('slider', from=10, to=10000, 
                    init=100, resolution=10) )

tkexamp( myfun(my.x,my.y,type='b'), mylist ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T09:07:29.653

一个“花哨”但简单的解决方案是使用 R Shiny 的 quantmod 和 Highstocks。

请参阅[Stefan Wilhelm 的“在 R Shiny 应用程序中使用 Highstocks”](http://stefan-wilhelm.net/using-highstocks-in-r-shiny-apps/)以及[Github 上的完整代码](https://github.com/stefanwilhelm/highstock)。

快速预览[滚动的工作原理](https://stefanwilhelm.shinyapps.io/highstock)。

[Highstocks](http://www.highcharts.com/stock/demo/dark-unica)真的很花哨。:-)。

# ruby-on-rails - 如果找不到对象则重定向

> ID：12938257
> 
> 赞同：2
> 
> 时间：2012-10-17T15:50:09.347
> 
> 标签：ruby-on-rails, chargify

我正在使用`chargify_api_ares`gem 搜索 Chargify 订阅。

```
@current_subscription = Chargify::Subscription.find_by_customer_reference(@dealer.id)
redirect_to(dealers_path) unless @current_subscription 
```

但是，如果没有找到订阅，它永远不会进入它重定向的下一行，因为`find_by_customer_reference`如果它没有找到任何东西，它会吐出 404，但我想要某种方式让它返回`nil`，这样我就可以让它到下一行，我将用户重定向到那里。

有谁知道我可以如何轻柔地失败，或者如果没有找到对象，我可以重定向用户的更好方法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:55:22.487

大概该方法引发了一个[`ActiveRecord::RecordNotFound`](http://api.rubyonrails.org/classes/ActiveRecord/RecordNotFound.html)异常，您可以将其捕获并转换为重定向：

```
begin
  @current_subscription = Chargify::Subscription.find_by_customer_reference(@dealer.id)
rescue ActiveRecord::RecordNotFound
  redirect_to dealers_path
end 
```

# .net - WCF上传大文件

> ID：12938258
> 
> 赞同：0
> 
> 时间：2012-10-17T15:50:11.167
> 
> 标签：.net, wcf, file-upload, web-config

我知道这个问题已被多次提出，但每个代码都有不同的答案。我正在尝试将大于 50K 的文件上传到我的 Web 服务流。下面是我的配置，我尝试了一切，但我仍然收到 400 Bad request。有任何想法吗 ？？

```
<?xml version="1.0"?>
<configuration>
    <system.net>
        <defaultProxy>
            <proxy
            usesystemdefault = "false"
            proxyaddress="Address"
            bypassonlocal="false"/>
        </defaultProxy>
    </system.net>
    <connectionStrings>

    </connectionStrings>
    <appSettings>

    </appSettings>
    <system.web>
        <compilation targetFramework="4.0" debug="true" />
        <authentication mode="None"/>
        <httpRuntime maxRequestLength="64000000"/>
    </system.web>

    <system.serviceModel>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true">
        </serviceHostingEnvironment>
        <standardEndpoints>
            <webHttpEndpoint>
                <standardEndpoint name="" helpEnabled="true" crossDomainScriptAccessEnabled="true" automaticFormatSelectionEnabled="true" />
            </webHttpEndpoint>
        </standardEndpoints>
        <behaviors>
            <endpointBehaviors>
                <behavior name="webHttpBehavior">
                    <webHttp />
                </behavior>
            </endpointBehaviors>
        </behaviors>
        <bindings>

            <webHttpBinding>
                <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />

            </webHttpBinding>
            <basicHttpBinding>
                <binding maxBufferSize="64000000" maxReceivedMessageSize="64000000" maxBufferPoolSize="64000000">
                    <readerQuotas maxDepth="64000000" maxStringContentLength="64000000" maxArrayLength="64000000" maxBytesPerRead="64000000" />
                    <security mode="None"/>
                </binding>
            </basicHttpBinding>
        </bindings>

        <services>
            <service name="myService">
                <endpoint address="" binding="webHttpBinding"
                          bindingConfiguration="webHttpBindingWithJsonP" contract="IAllatusService"
                          behaviorConfiguration="webHttpBehavior"/>
            </service>
        </services>

    </system.serviceModel>

    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true" />
    </system.webServer>
</configuration> 
```

# javascript - 如何使用 javascript 变量按其值选择元素？

> ID：12938259
> 
> 赞同：0
> 
> 时间：2012-10-17T15:50:14.050
> 
> 标签：javascript, jquery

我有一个带有选择框的表单，其选项由 ajax 根据用户输入的先前值预先选择。

我只需要向这些预先选择的选项添加文本。

```
for (i in data) {
        $("#my_select_box_id").val(data[i][0]).attr('selected',true);
        var id_option = data[i][0];

        //this following line doesn't work, why do I do wrong here ?
        $("#my_select_box_id option[value="id_option"]).html(data[i][1]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:51:07.017

如果您想要当前选择的选项，请使用[`:selected`选择器。](http://api.jquery.com/selected-selector/)

```
$("#my_select_box_id option:selected") 
```

您的代码不起作用，因为您过早关闭选择器字符串而不是连接。这会导致错误。

```
$("#my_select_box_id option[value='" + id_option + "']"); 
```

此外，属性选择器应该只对属性起作用。不过我不了解 jQuery，因为它们在历史上削弱了属性和属性之间的区别。所以这取决于是否`.attr()`实际上设置了属性的属性。

# iphone - 在 Xcode 中启用以编程方式创建的按钮

> ID：12938265
> 
> 赞同：0
> 
> 时间：2012-10-17T15:50:34.343
> 
> 标签：iphone, ios, xcode

我知道如何设置 enable = YES/NO，一个使用属性和 xib 创建的按钮。但是，您如何从同一类中的另一个方法对以编程方式创建的按钮执行相同的操作？

例如，这是我在 viewDidLoad 中的按钮：

```
UIButton *AllList = [UIButton buttonWithType:UIButtonTypeCustom];
AllList.frame = CGRectMake(40, 80, 107.f, 53.5f); //set frame for button

UIImage *buttonImageFull = [UIImage imageNamed:@"allModsBtn.png"];
[AllList setBackgroundImage:buttonImageFull forState:UIControlStateNormal];
[self.view addSubview:AllList];

// add targets and actions
[AllList addTarget:self action:@selector(getButtons:) forControlEvents:UIControlEventTouchUpInside];    
AllList.tag = 0; 
```

我想用另一种方法将此按钮的启用设置为“是”或“否”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:57:05.120

```
@implementation {
     UIButton *myButton;
}

- (void)viewDidLoad {
    myButton = [UIButton buttonWithType:UIButtonTypeCustom];
    myButton.tag = 121;
    myButton.frame = CGRectMake(40, 80, 107.f, 53.5f); //set frame for button

    UIImage *buttonImageFull = [UIImage imageNamed:@"allModsBtn.png"];
    [myButton setBackgroundImage:buttonImageFull forState:UIControlStateNormal];
    [self.view addSubview:myButton];

   // add targets and actions
   [myButton addTarget:self action:@selector(getButtons:)       
   forControlEvents:UIControlEventTouchUpInside];    
   myButton.tag = 0;
}

- (void)someOtherMethod {

   myButton.enabled = YES;

OR

  //In this case you dont need to define uibutton to globaly

   UIButton *button = (UIButton*)[[self view] viewWithTag:121];
   [button setEnabled:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:55:10.790

像这样的东西：

```
UIButton *myButton = [self.view viewWithTag:BUTTON_TAG]; // in your case is 0
[myButton setEnabled:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:02:06.737

有两种方法：

1）你可以把它变成一个ivar，然后

```
AllList.enabled = YES; 
```

或者

```
[AllList setEnabled:YES]; 
```

2）为按钮设置一个唯一的标签

```
UIButton *AllList = [UIButton buttonWithType:UIButtonTypeCustom];
AllList.frame = CGRectMake(40, 80, 107.f, 53.5f); //set frame for button
AllList.tag = kUNIQUE_TAG; 
```

在你想弄乱按钮的启用属性的方法中

```
UIButton *theButton = (UIButton *)[self viewWithTag:kUNIQUE_TAG];
[theButton setEnabled:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T15:54:55.050

您必须使该按钮成为视图控制器的 ivar。

```
@implementation {
    UIButton *myButton;
}

- (void)viewDidLoad {
    myButton = [UIButton buttonWithType:UIButtonTypeCustom];
    myButton.frame = CGRectMake(40, 80, 107.f, 53.5f); //set frame for button

    UIImage *buttonImageFull = [UIImage imageNamed:@"allModsBtn.png"];
    [myButton setBackgroundImage:buttonImageFull forState:UIControlStateNormal];
    [self.view addSubview:myButton];

    // add targets and actions
    [myButton addTarget:self action:@selector(getButtons:)       
       forControlEvents:UIControlEventTouchUpInside];    
    myButton.tag = 0;
}

- (void)someOtherMethod {
    myButton.enabled = YES;
} 
```

# android - 在 Android 中的活动之间共享对象

> ID：12938266
> 
> 赞同：0
> 
> 时间：2012-10-17T15:50:36.703
> 
> 标签：android, sharing, serializable

这是我的问题...

我有一个 DataBaseHelper.java 类，它处理所有数据库操作（创建表、插入数据、删除表、选择数据等），并且在我的主要活动中有一个该类的实例。我现在要做的是在其他活动中使用该 DataBaseHelper 实例......

目前我已经声明 DataBaseHelper 实现了 Serializable：

```
public class DataBaseHelper implements Serializable{ ... } 
```

所以我可以使用

```
intent.putExtra("key",dbh) 
```

并在其他活动中使用

```
DataBaseHelper db = (DataBaseHelper) getIntent().getSerializableExtra("key"); 
```

但是当我测试应用程序时，我在 LogCat 中得到了这个：

```
10-17 09:28:16.515: E/AndroidRuntime(2704): FATAL EXCEPTION: main
10-17 09:28:16.515: E/AndroidRuntime(2704): java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = tian.proto.lib.DataBaseHelper)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.Parcel.writeSerializable(Parcel.java:1176)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.Parcel.writeValue(Parcel.java:1130)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.Parcel.writeMapInternal(Parcel.java:488)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.Bundle.writeToParcel(Bundle.java:1552)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.Parcel.writeBundle(Parcel.java:502)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.content.Intent.writeToParcel(Intent.java:5623)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1341)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1374)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.app.Activity.startActivityForResult(Activity.java:2827)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.app.Activity.startActivity(Activity.java:2933)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at tian.proto.Main$asyncLogin.onPostExecute(Main.java:207)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at tian.proto.Main$asyncLogin.onPostExecute(Main.java:1)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.AsyncTask.finish(AsyncTask.java:417)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.Looper.loop(Looper.java:130)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.lang.reflect.Method.invokeNative(Native Method)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.lang.reflect.Method.invoke(Method.java:507)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at dalvik.system.NativeStart.main(Native Method)
10-17 09:28:16.515: E/AndroidRuntime(2704): Caused by: java.io.NotSerializableException: tian.proto.Main
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1535)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
10-17 09:28:16.515: E/AndroidRuntime(2704):     at android.os.Parcel.writeSerializable(Parcel.java:1171)
10-17 09:28:16.515: E/AndroidRuntime(2704):     ... 22 more 
```

我究竟做错了什么？也许这不是在活动之间共享对象的正确方法？我能做些什么呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:00:50.177

这不是您想要的，但是如果您想共享一个类的实例，那么将其作为可序列化对象可能没有用。我怀疑你想要这样的东西来访问所有类的方法等

```
DataBaseHelper db = new DataBaseHelper(this); 
```

在 onCreate 中尝试。

序列化对象更适用于在类中创建或修改的对象，如 arraylists 或其他东西（尽管 getter/setter 方法可能更传统和更有用）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T15:55:39.493

你有没有尝试过这种方式？

```
Bundle b = this.getIntent().getExtras();
if(b!=null)
DatabaseHelper dh = (DatabaseHelper) b.getParcelable("key"); 
```

从接收器部分。

# ios - 标签和 NSTimer 阴影设计

> ID：12938270
> 
> 赞同：2
> 
> 时间：2012-10-17T15:50:49.463
> 
> 标签：ios, ios5, nstimer

我是 iOS 的初学者，需要一些线索来做一些不那么容易做的事情......我必须改变我的设计，让计时器（经过时间和剩余时间）看起来像这样： ![在此处输入图像描述](../Images/01f3b9165f133d9ac16b8822c508fa9f.png)

看起来像这样的东西：

![在此处输入图像描述](../Images/f78e9b4fa0da44a7ee734fb76471900d.png)

你有什么线索可以给我吗（除了我已经知道的阴影颜色和偏移属性）？我现在的主要猜测是：如何区分这两种状态：没有时间的灰色和有时间的蓝色。

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:56:48.610

您是 iOS 开发的新手，所以我不确定将一些 3rd 方框架放在您的头上是否是个好主意！但无论如何，看看[TTTAttributetLabel](https://github.com/mattt/TTTAttributedLabel)。我是 UILabel 的替代品，可让您以不同的方式对 UILabel 文本的各个部分进行样式设置，因此它可以满足您的上述需求！

从给定的链接下载框架并查看随附的示例项目。并且不要忘记将 CoreText 框架包含到您的项目中。（请参阅“[如何在 Xcode 中添加现有框架”](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)）

# sql - SQL Server - 最近日期和销售额列

> ID：12938273
> 
> 赞同：0
> 
> 时间：2012-10-17T15:50:57.293
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我正在使用 SQL Server 2008 R2 来完成查询。我有一个包含唯一销售 ID、客户 ID、销售日期和销售金额的销售表。我正在尝试创建一个表格，其中包含每个客户的最新销售以及该销售的金额。

```
| customer_id | most recent sale date | sale amount |
|     1       |2012-06-11 00:00:00.000|     150     |
|     2       |2012-01-07 00:00:00.000|     55      |
|     3       |2012-02-18 00:00:00.000|     117     |
|     4       |2012-09-02 00:00:00.000|     25      | 
```

我有这个查询的前两列：

```
SELECT DISTINCT customer_id, MAX(sale_date)
FROM sale
GROUP BY customer_id 
```

当我尝试添加销售金额时，我尝试的所有内容都包括该客户的每笔销售，而不仅仅是最近的销售。有没有办法做到这一点？请记住，此表上有一个唯一的销售 ID，可能会有一些用处。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:55:11.927

您可以在 CTE中使用[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)with ：`PARTITION BY`

```
WITH CTE AS
(
   SELECT sale_id,customer_id,sale_date, sale_amount
        , RN = ROW_NUMBER() OVER (PARTITION BY customer_id ORDER BY sale_date DESC)
   FROM sale
)
SELECT sale_id, customer_id, sale_date, sale_amount
FROM CTE 
WHERE RN = 1 
```

这是一个示例小提琴：[http ://sqlfiddle.com/#!3/513280/1/0](http://sqlfiddle.com/#!3/513280/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:53:34.750

```
SELECT  a.customer_id, a.sale_date, a.sale_amount
FROM    sale a 
        INNER JOIN
        (
            SELECT   customer_id, MAX(sale_date) maxSale
            FROM     sale
            GROUP BY customer_id
        ) b ON  a.customer_ID = b.customer_ID AND
                a.sale_date = b.maxSale 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-18T05:51:16.863

SELECT CUSTOMER_ID,SALE_AMOUNT,SALEDATE FROM SALED WHERE SALEDATE =(SELECT MAX(SALEDATE) FROM SALE);

# python - 一个好的 blobstore / memcache 解决方案

> ID：12938274
> 
> 赞同：5
> 
> 时间：2012-10-17T15:50:57.237
> 
> 标签：python, sql, caching, redis, data-mining

在 Linux 云服务器上建立数据仓库挖掘项目。主要语言是 Python。

想使用这种模式来查询数据和存储数据：

*   **SQL 数据库**- SQL 数据库用于查询数据。但是，SQL 数据库只存储需要搜索的字段，它不存储数据本身的“blob”。相反，它在键值 Blobstore 中存储一个引用完整数据“blob”的键。
*   **Blobstore** - 键值 Blobstore 用于存储实际的“文档”或“blob”数据。

我们遇到的问题是，我们希望将更频繁访问的数据块自动存储在 RAM 中。我们计划为此使用 Redis。但是，我们想要一种解决方案，它首先自动尝试将数据从 RAM 中取出，如果在那里找不到，则将其转到 blobstore。

是否有一个很好的库或现成的解决方案，我们可以在不滚动自己的情况下使用？此外，对于所提议的架构的任何评论和批评也将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:58:59.363

与其使用 Redis 或 Memcached 进行缓存，还不如使用“blobstore”包将内容存储在磁盘上，我建议您看看[Couchbase Server](http://www.couchbase.com/couchbase-server/overview)，它完全符合您的要求（即从内存中提供热 blob，但仍将它们存储到盘）。

在我工作的公司中，我们通常将您描述的模式（即关系数据库中的索引，加上 blob 存储）用于我们的归档服务器（TB 级数据）。当写入 blob 的 I/O 保持顺序时，它工作得很好。Blob 永远不会被重写，而只是附加在文件的末尾（这对于归档应用程序来说很好）。

其他人也使用了相同的方法。例如：

*   Bitcask（在 Riak 中使用）：http: [//downloads.basho.com/papers/bitcask-intro.pdf](http://downloads.basho.com/papers/bitcask-intro.pdf)
*   Eblob（用于 Elliptics 项目）：[http ://doc.ioremap.net/eblob:eblob](http://doc.ioremap.net/eblob:eblob)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:15:59.350

任何 SQL 数据库都适用于第一部分。Blobstore 也可以通过使用 cbfs 获得，本质上是“现成的”。这是一个新项目，建立在 couchbase 2.0 之上，但它似乎处于非常活跃的开发阶段。

CouchBase 已经尝试在检查磁盘之前从 RAM 缓存中提供结果，并且完全分布式以支持大型数据集。

CBFS 在其上放置了一个文件系统，并且已经为它编写了一个 FUSE 模块。

由于 fileststems 实际上是最低公分母，因此您应该很容易从 python 访问它，并且会减少您需要编写的自定义代码的数量。

博文：http: [//dustin.github.com/2012/09/27/cbfs.html](http://dustin.github.com/2012/09/27/cbfs.html)

项目存储库： [https ://github.com/couchbaselabs/cbfs](https://github.com/couchbaselabs/cbfs)

# java-7 - 无法在动态加载类对象上使用 MethodHandle 的 invokeExact

> ID：12938276
> 
> 赞同：1
> 
> 时间：2012-10-17T15:51:04.847
> 
> 标签：java-7, methodhandle

我有一些演示代码如下。

```
 Class<?> myClass = cl.loadClass("com.hp.ac.scriptengine.test." + generateClassName);
  Object my_obj = myClass.newInstance();
  MethodType mt; 
  MethodHandle mh;
  MethodHandles.Lookup lookup = MethodHandles.lookup();            
  mt = MethodType.methodType(void.class, int.class);
  mh = lookup.findVirtual(my_obj.getClass(), "ToDoit", mt);
  mh.invokeExact(my_obj,1); 
```

这里是“com.hp.ac.scriptengine.test”。+ generateClassName' 是一个生成的类。我收到的消息如下。

```
java.lang.invoke.WrongMethodTypeException: (I)V cannot be called as (Ljava/lang/Object;I)V
                 at com.hp.ac.scriptengine.test.compliebyCommandline.main(compliebyCommandline.java:138) 
```

这里第 138 行是`mh.invokeExact(my_obj,1);`'

`mh.invokeExact("daddy",'d','n')...`我在 Java 7 API 文档中尝试了该演示代码（例如 ... ）。它工作正常。这样的 call( )`mh.invokeExact("daddy",'d','n')`只是调用. 但是，为什么在我的代码中调用 (Ljava/lang/Object;I)V 而不是 (I)V 呢？`(CC)Ljava/lang/String``(Ljava/lang/String;CC)Ljava/lang/String``mh.invokeExact(my_obj,1)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:39:06.960

I think the problem is with int.class. Try Integeer.class or Integer.TYPE instead.

# c++ - 使用 boost::iterator_range; 我的数据在哪里超出范围？

> ID：12938279
> 
> 赞同：0
> 
> 时间：2012-10-17T15:51:08.760
> 
> 标签：c++, boost, scope

我使用**boost::iterator_range得到****无效的读取/分段错误**错误。我的数据在哪里超出范围，如何防止这种情况发生？

 **这是一些重现问题的代码：

```
#include <iostream>
#include <vector>
#include <map>

#include <boost/shared_ptr.hpp>
#include <boost/range.hpp>
#include <boost/range/iterator_range.hpp> 
```

这些是我的类型：

```
typedef double Value;
typedef std::vector<Value> vValue;
typedef boost::iterator_range<std::vector<Value>::iterator> rValue; 
```

实用功能：

```
void print_range(const rValue &r) {
    for(rValue::difference_type i = 0; i < r.size(); ++i) std::cout << r[i] << " ";
    std::cout << std::endl;
} 
```

这是一个存储所有数据缓存的对象。

```
class MyDataObject { // This object stores ALL DATA.
private:
    vValue data;

public:
    void setData(vValue data) {
        this->data = data;
    }
    vValue &getData() {
        return data;
    }

}; 
```

然后使用 boost::iterator_range 将数据段创建为所有数据的子集。

```
class DataSegment { // This object points to a subset of all data using boost::iterator_range
private:
    rValue data;

public:
    void setData(rValue data) {
        this->data = data;
    }
    rValue& getData() {
        return data;
    }
}; 
```

实际数据库实现：

```
class DB { // The database caches ALL DATA and then returns a subset using boost::iterator_range when asked for.
private:
    std::map<std::string, MyDataObject> cache;

public:
    DB() {
        //
    }

    MyDataObject loadIntoCache(std::string key) {
        vValue data = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

        MyDataObject obj;
        obj.setData(data);

        cache[key] = obj;
        return obj;
    }

    boost::shared_ptr<DataSegment> getMemoryEfficientSubset() {
        MyDataObject obj = loadIntoCache("bar"); // If bar is not in cache, load it.

        rValue data = obj.getData();

        boost::shared_ptr<DataSegment> segment(new DataSegment());
        rValue out = boost::make_iterator_range(data.begin() + 2, data.begin() + 7);
        segment->setData(out);

        return segment;
    }
}; 
```

测试代码：

```
int main() {
    DB *db = new DB();

    boost::shared_ptr<DataSegment> segment = db->getMemoryEfficientSubset();
    print_range(segment->getData()); // ERROR: segfault within print_range. Valgrind says "Invalid read of size 8"

    delete db;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:14:44.743

最终存储在其中的迭代器范围与调用本地`*segment`相关联。`data`大概您打算`loadIntoCache`返回一个`MyDataObject&`（从 eg 初始化`cache[key] = obj`），只要缓存存在，它就会保持有效。还要确保它`obj`是对调用结果的引用，而`loadIntoCache`不是副本，并且同样是对`data`调用结果的引用`obj.getData()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:20:58.763

我已经通过使用指针解决了我的问题。

```
#include <iostream>
#include <vector>
#include <map>

#include <boost/shared_ptr.hpp>
#include <boost/range.hpp>
#include <boost/range/iterator_range.hpp>

typedef double Value;
typedef std::vector<Value> vValue;
typedef boost::iterator_range<std::vector<Value>::iterator> rValue;

void print_range(const rValue &r) {
    for(rValue::difference_type i = 0; i < r.size(); ++i) std::cout << r[i] << " ";
    std::cout << std::endl;
}

class MyDataObject { // This object stores ALL DATA.
private:
    vValue data;

public:
    void setData(vValue data) {
        this->data = data;
    }
    vValue& getData() {
        return data;
    }

};

class DataSegment { // This object points to a subset of all data using boost::iterator_range
private:
    rValue data;

public:
    void setData(rValue data) {
        this->data = data;
    }
    rValue& getData() {
        return data;
    }
};

class DB { // The database caches ALL DATA and then returns a subset using boost::iterator_range when asked for.
private:
    std::map<std::string, MyDataObject*> cache;

public:
    DB() {
        //
    }

    MyDataObject *loadIntoCache(std::string key) {
        vValue data = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

        MyDataObject *obj = new MyDataObject();
        obj->setData(data);

        cache[key] = obj;
        return obj;
    }

    boost::shared_ptr<DataSegment> getMemoryEfficientSubset() {
        MyDataObject *obj = loadIntoCache("bar"); // If bar is not in cache, load it.

        rValue data = obj->getData();

        boost::shared_ptr<DataSegment> segment(new DataSegment());
        rValue out = boost::make_iterator_range(data.begin() + 2, data.begin() + 7);
        segment->setData(out);

        return segment;
    }

    ~DB() {
        for(std::map<std::string, MyDataObject*>::iterator i = cache.begin(); i != cache.end(); ++i) delete i->second;
    }
};

int main() {
    DB *db = new DB();

    boost::shared_ptr<DataSegment> segment = db->getMemoryEfficientSubset();
    print_range(segment->getData()); // ERROR: segfault within print_range. Valgrind says "Invalid read of size 8"

    delete db;
    return 0;
} 
```**

# c# - 带有 SQLite 和外键的 C#

> ID：12938281
> 
> 赞同：1
> 
> 时间：2012-10-17T15:51:15.593
> 
> 标签：c#, sqlite

我想为我们的软件实现一个患者数据库，但外键语句有问题。我正在使用带有 C# 的最新 SQLite DLL。

当我尝试运行以下代码时：

```
dbConnection = "Data Source=SQLiteMyDatabase.db;foreign keys=true;";
if (connections == 0)
{
  cnn = new SQLiteConnection(dbConnection);
  cnn.Open();
  this.ExecuteNonQuery("CREATE TABLE IF NOT EXISTS patients ( id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name VARCHAR(100) NOT NULL;");
  this.ExecuteNonQuery("CREATE TABLE IF NOT EXISTS images ( FOREIGN KEY (patientID) REFERENCES patients(id), nameRed VARCHAR(20) NOT NULL PRIMARY KEY;");
} 
```

我得到错误：

```
SQLite error near "FOREIGN": syntax error 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:55:11.740

为了创建外键，您必须首先创建列：

```
CREATE TABLE IF NOT EXISTS images (
    nameRed VARCHAR(20) NOT NULL PRIMARY KEY, 
    patientID INT, 
    FOREIGN KEY (patientID) REFERENCES patients(id) 
 ); 
```

请注意：

1.  我首先在创建的列列表中移动了主键列 ( `nameRed`)，但这只是惯例。它可以排在第二位。
2.  您使用数据类型 VARCHAR 并且 SQlite 将接受它，但请注意，它被映射到类型 TEXT，最大长度将被忽略，并且您将能够在列中存储其他数据类型。SQLite 在数据类型方面有点有趣（它有一个经过深思熟虑的系统，但与大多数其他 SQL 数据库完全不同）。
3.  为了使事情更加混乱，您*可以*将 PRIMARY KEY 声明为列的属性（尽管您也可以在列列表之后声明 FOREIGN KEY）。

# tsql - t-sql 乘以 2 个表加上来自 asp.net 的 2 个日期之间的连接

> ID：12938285
> 
> 赞同：0
> 
> 时间：2012-10-17T15:51:24.143
> 
> 标签：tsql

我有以下 2 张桌子

表格1

```
 Plant      
 -----
 TRP1
 DEP1 
```

表2

```
Config
------
84ROC20
100ROC20 
```

和 2 个文本框

1.开始日期（日期时间）：2012-08-01 00:00:00.000

2.结束日期（日期时间）：2012-10-01 00:00:00.000

我希望有下表作为结果，有 3 列

```
Plant  Config    Time
-----  ------   -------
TRP1   84ROC20   2012-08-01 00:00:00.000 
TRP1   84ROC20   2012-09-01 00:00:00.000 
TRP1   84ROC20   2012-10-01 00:00:00.000
DEP1   84ROC20   2012-08-01 00:00:00.000 
DEP1   84ROC20   2012-09-01 00:00:00.000
DEP1   84ROC20   2012-10-01 00:00:00.000
TRP1   100ROC20  2012-08-01 00:00:00.000
TRP1   100ROC20  2012-09-01 00:00:00.000 
TRP1   100ROC20  2012-10-01 00:00:00.000
DEP1   100ROC20  2012-08-01 00:00:00.000 
DEP1   100ROC20  2012-09-01 00:00:00.000
DEP1   100ROC20  2012-10-01 00:00:00.000 
```

你能帮忙拿这张桌子吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:52:04.717

我假设 SQL Server 2005+（为方便起见使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243.aspx)），但这应该可以帮助您：

```
-- Get user data
declare @StartDate datetime = '2012-08-01'
declare @EndDate datetime = '2012-10-01'

-- Actual query
;with Dates as ( -- Build a date table based upon the user values
    select @StartDate as DateEntry -- Start at StartDate
    union all
    select dateadd(m, 1, DateEntry) -- Recursively add a month
    from Dates
    where dateadd(m, 1, DateEntry) <= @EndDate -- Until the EndDate is reached
)
select *
from Plant, Config, Dates -- Cross-join all tables to get all possibilities
order by Config desc, Plant desc, DateEntry 
```

这将为您的测试数据提供以下输出：

```
Plant      Config     DateEntry
---------- ---------- -----------------------
TRP1       84ROC20    2012-08-01 00:00:00.000
TRP1       84ROC20    2012-09-01 00:00:00.000
TRP1       84ROC20    2012-10-01 00:00:00.000
DEP1       84ROC20    2012-08-01 00:00:00.000
DEP1       84ROC20    2012-09-01 00:00:00.000
DEP1       84ROC20    2012-10-01 00:00:00.000
TRP1       100ROC20   2012-08-01 00:00:00.000
TRP1       100ROC20   2012-09-01 00:00:00.000
TRP1       100ROC20   2012-10-01 00:00:00.000
DEP1       100ROC20   2012-08-01 00:00:00.000
DEP1       100ROC20   2012-09-01 00:00:00.000
DEP1       100ROC20   2012-10-01 00:00:00.000 
```

本质上，这里的技巧是动态构建 Dates 表，然后将其与 Plant 和 Config 交叉连接。您可以通过各种其他方式构建 Dates 表，例如使用计数表、游标、while 循环、在 asp.net 本身中等等。我喜欢这里递归 CTE 的易用性，尽管我假设一个需要生成少量日期。超过 100 个日期将需要设置 maxrecursion，如果性能有问题则不完全选择另一种方法。

# c# - 从 SharePoint 网站检索托管属性

> ID：12938294
> 
> 赞同：2
> 
> 时间：2012-10-17T15:51:51.367
> 
> 标签：c#, sharepoint, sharepoint-2010

我试图简单地检查特定属性的托管属性列表。理论上，不难。在实践中，事实证明这给我带来了麻烦。我发现的第一种方法如下：

```
static void Main(string[] args)
    {
     try
      {
        string strURL = "http://<SiteName>";
        Schema sspSchema = new Schema(SearchContext.GetContext(new SPSite(strURL)));
        ManagedPropertyCollection properties = sspSchema.AllManagedProperties;
        foreach (ManagedProperty property in properties)
         {
           if (property.Name.Equals("ContentType")
            {
              Console.WriteLine(property.Name);
            }
         }
       }
     catch(Exception ex)
        {
          Console.WriteLine(ex.ToString());
        }
    } 
```

这完全符合我的要求。然而，这个问题是 Visual Studio 2012 说它`SearchContext`已经过时和过时，我应该`SearchServiceApplication`改用它。所以我做了更多搜索，发现以下内容：

```
SPServiceContext context = SPServiceContext.GetContext(SPServiceApplicationProxyGroup.Default, SPSiteSubscriptionIdentifier.Default);// Get the search service application proxy
    var searchProxy = context.GetDefaultProxy(typeof(SearchServiceApplicationProxy)) as SearchServiceApplicationProxy;

    if (searchProxy != null)
    {
        SearchServiceApplicationInfo ssai = searchProxy.GetSearchServiceApplicationInfo();

        var application = SearchService.Service.SearchApplications.GetValue<SearchServiceApplication>(ssai.SearchServiceApplicationId);

        var schema = new Schema(application);
        ManagedPropertyCollection properties = schema.AllManagedProperties;
        foreach (ManagedProperty property in properties)
        {
         if (property.Name.Equals("ContentType")
         {
          Console.WriteLine(property.Name);
         }
        }
    } 
```

我遇到的问题是`EndpointNotFoundException`. 我猜我只是错误地配置了第二个选项，因为第一个方法可以找到一切都很好。任何人都可以对我遗漏的任何明显错误的事情有所了解吗？任何提示/提示将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:42:57.047

这段代码应该可以得到你想要的。

```
foreach (SPService service in SPFarm.Local.Services)
{
    if (service is SearchService)
    {
        SearchService searchService = (SearchService)service;

        foreach (SearchServiceApplication ssa in searchService.SearchApplications)
        {
            Schema schema = new Schema(ssa);

            foreach (ManagedProperty property in schema.AllManagedProperties)
            {
                if (property.Name == "ContentType")
                {
                    //Handle here
                }
            }
        }
    }
} 
```

# java - 如何从 GUI 的 JSF 调用中取消所有 JAVA 运行方法（包括锁定的方法）？

> ID：12938295
> 
> 赞同：0
> 
> 时间：2012-10-17T15:51:56.647
> 
> 标签：java, jsf, user-interface

我正在尝试讨论一种方法，当 GUI 的用户单击 JSF 中制作的 GUI 中的“取消”按钮时，让我的所有 JAVA 方法中断它们的执行并立即完成（当然是从他们正在做的事情）脚本（当然是在调用特定的计算方法之后）。

它必须取消所有 JAVA 方法，包括等待其他线程完成的锁定方法 [使用 future.get() 等待它们从可调用对象返回]

有没有一种简单的方法可以做到这一点？

问候，

# html - 列表项的字体颜色没有从 CSS 正确继承

> ID：12938299
> 
> 赞同：1
> 
> 时间：2012-10-17T15:52:09.590
> 
> 标签：html, css, haml

我有以下标题菜单：

```
%div.header
  %div.span-25
    = link_to logo, root_path
  %div.span-25
    %div.headermenu
      %ul
        - if current_page?(root_path)
          %li.currentmenu
            = link_to "Home", root_path
        - else
          %li
            = link_to "Home", root_path
        - if current_page?(user_path)
          %li.currentmenu
            = link_to "User", user_path
        - else
          %li
            = link_to "User", user_path 
```

在我的样式表中：

```
.headermenu {
  border-radius:0px 0px 5px 5px;
  -moz-border-radius:0px 0px 5px 5px;
  margin-top:-5px;
  position:relative;
  display:block;
  height:42px;
  font-size:11px;
  font-weight:bold;
  background:transparent url('darkgray_background.gif') repeat-x top;
  font-family:Arial,Verdana,Helvitica,sans-serif;
  text-transform:uppercase;
}

.headermenu ul {
  margin:0px;
  padding:0;
  list-style-type:none;
  width:auto;
}

.headermenu ul li {
  display:block;
  float:left;
  margin:0 1px 0 0;
}

.headermenu ul li a {
  display:block;
  float:left;
  color:#000;
  text-decoration:none;
  padding:13px 12px 0 12px;
  height:28px;
}

.currentmenu {
  color:#fff;
  border-radius:5px;
  -moz-border-radius:5px;
  background:transparent url('darkgray_backgroundOVER.gif') no-repeat top center;
} 
```

因此，当前的标题菜单将突出显示。突出显示的菜单的背景图像是正确的（'darkgray_backgroundOVER.gif'），但字体是黑色的（#000），而不是应有的#fff。Firebug 显示当前菜单中取消的字体：

继承自 li.currentmenu element.style { ~~color: #FFFFFF;~~ }

相反，上面显示的是：

.headermenu ul li a { 颜色：#000000; ETC.... }

为什么它不以白色显示字体？黑色几乎看不清。我该怎么做才能使当前菜单的字体为白色并将其他（不是当前菜单）的字体保持为黑色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:55:48.323

您需要在锚标记本身上指定颜色，而不仅仅是菜单类。您的 CSS 不够具体，因此 #000 会被覆盖。

```
li.currentmenu a{ 
color:#fff;
border-radius:5px;
-moz-border-radius:5px;
background:transparent url('darkgray_backgroundOVER.gif') no-repeat top center;
} 
```

将更具体，并应正确定位锚标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:55:46.420

这可能是一个特异性问题，只需这样做：

```
li.currentmenu a{
color:#fff !important;
border-radius:5px;
-moz-border-radius:5px;
background:transparent url('darkgray_backgroundOVER.gif') no-repeat top center;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:13:25.620

那是因为`.currentmenu`选择器不像`.headermenu ul li a`.

只需将`.currentmenu`选择器更改为`.headermenu .currentmenu a`

```
.headermenu .currentmenu a {
  color:#fff;
  border-radius:5px;
  -moz-border-radius:5px;
  background:transparent url('darkgray_backgroundOVER.gif') no-repeat top center;
} 
```

# python - 将空值传递给 Python 中的存储过程

> ID：12938301
> 
> 赞同：2
> 
> 时间：2012-10-17T15:52:17.667
> 
> 标签：python, pymssql

我正在使用 Python 调用我的 MSSQL 数据库中的存储过程，但它不喜欢传递的“无”值。这可能是 pymssql 中的错误吗？或者有什么方法可以确保将“None”转换为 NULL？我需要能够传递 NULL。

示例代码：

```
cn = pymssql.connect(my connection info)
cur = cn.cursor()
params = range(2)
params[0] = 1
params[1] = None # this needs to pass as NULL
cur.callproc('mystoredproc', params) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:29:00.263

看起来这是一个已知[问题](http://code.google.com/p/pymssql/issues/detail?id=56)。

更新：我找到了解决方案。虽然 pymssql 模块确实需要修复，但我可以使用它附带的 _mssql 模块并调用较低级别的例程。

例子：

```
import _mssql
conn = _mssql.connect(connection info, syntax is slightly different than pymssql)
proc = conn.init_procedure('mystoredproc')
proc.bind(1, _mssql.SQLINT4, name='@firstparam')
proc.bind(None, _mssql.SQLINT4, name='@secondparam', null=True)
proc.execute() 
```

需要“null=True”设置以允许此参数接受空值，并且“None”将被转换为 NULL。

# sql - SQL - 从db中选择最“活跃”的时间跨度

> ID：12938302
> 
> 赞同：-1
> 
> 时间：2012-10-17T15:52:18.543
> 
> 标签：sql, tsql, datetime, stored-procedures

我有一张交易表。在此表中，我将交易日期时间存储为 UTC。我有几个月的数据，每天大约20,000笔交易。

我将如何编写存储过程：

A：最活跃/最繁忙的小时数

B：返回哪个小时最活跃/最忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:57:38.447

```
select datepart(hour, the_column) as [hour], count(*) as total
from t
group by datepart(hour, the_column)
order by total desc 
```

# google-drive-api - 具有更改权限的文件仅出现在所有文件中而不是 mydrive 中？

> ID：12938304
> 
> 赞同：0
> 
> 时间：2012-10-17T15:52:20.227
> 
> 标签：google-drive-api, google-apps

我有一个驱动器应用程序，它更改了权限，因此另一个用户成为文件的所有者。完成此操作后，用户会收到一封电子邮件，并且该文件会列在所有文件中。

我想知道如何更改权限并将文件放入 myDrive。这就是我添加权限的方式。

```
 service.permissions().insert(fileId, newPermission).execute(); 
```

当用户对文件具有权限时，它会出现在所有文件中，但不会出现在 mydrive 中。我怎样才能使文件也列在 mydrive 中。

笔记：

- 认证用户是服务帐号！

- 因为我关闭了通知电子邮件，它不再出现在任何地方。但是当我搜索时，我可以找到该文件并拥有正确的权限。更改权限时似乎没有设置文件的根目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:22:32.210

我将父母添加到文件父母列表中，然后更新了文件。 **这是错误的！**

答：父母必须单独更新（就像权限一样）。现在一切都按预期工作。

dService.parents().insert(fileId, new ParentReference().setId(iDofLocation)).execute();

# visual-studio-2010 - 派生成员的智能感知过滤器

> ID：12938306
> 
> 赞同：1
> 
> 时间：2012-10-17T15:52:21.800
> 
> 标签：visual-studio-2010, resharper, intellisense

任何使用 R# 的人都会知道，如果您有一个带有抽象类参数的方法 - 智能感知将被过滤到仅从该基础派生的成员。

无论如何，如果没有 Resharper，是否可以从 Visual Studio 中获得相同的行为？

谢谢。

乔恩

# android - 在 Android WebView 中禁用 flash 插件

> ID：12938308
> 
> 赞同：3
> 
> 时间：2012-10-17T15:52:33.317
> 
> 标签：android, flash, webview, android-webview

是否可以在 webview 中仅禁用 Adob​​e flash 插件而不禁用所有其他插件？

# android - 如何在 MacOs Lion 上为 android 设置 cocos2dx？

> ID：12938309
> 
> 赞同：1
> 
> 时间：2012-10-17T15:52:35.737
> 
> 标签：android, eclipse, macos, cocos2d-iphone, cocos2d-x

我正在尝试在 MacOs Lion 上使用 Eclipse 设置 cocos2dx。我正在按照以下教程进行操作：

[http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)

当我尝试执行 ndk build shell 工具时，出现以下错误：

```
Davids-iMac:~ davidcavanagh$ /Users/davidcavanagh/Downloads/android-ndk-r8b/ndk-build ;    
exit;
Android NDK: Could not find application project directory !    
Android NDK: Please define the NDK_PROJECT_PATH variable to point to it.    
/Users/davidcavanagh/Downloads/android-ndk-r8b/build/core/build-local.mk:130: *** Android   
NDK: Aborting    .  Stop.
logout

[Process completed] 
```

我已经尝试使用通过终端定义 NDK_PROJECT_PATH

导出 NDK_PROJECT_PATH=/Users/davidcavanagh/Downloads/android-ndk-r8b/

这行不通。任何人都可以帮助我，因为我多年来一直坚持这一点。有没有某种方法可以设置我没有做的路径？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:20:12.707

重读一遍他的教程。如果不提供构建项目所需的参数，则不应执行 ndk-build 脚本。

他提到使用`create-android-project.sh`cocos2d-x 目录中的脚本。确保您这样做，并按照您将提供项目名称、反向域应用程序 ID（例如 com.company.project）等的步骤进行操作。这将在 cocos2d-x 目录中生成您的项目目录，您可以轻松安全地移动到另一个位置。

设置好该项目后，您可以将其导入 Eclipse，它主要允许您构建**Android 项目**，但不直接引用 C++ 代码。（您需要获得 CDT 和 NDK 插件才能真正将您的 C++ 代码挂接到 Eclipse 中）。

否则，到目前为止对我有用的是，`build_native.sh`只要我有要在设备上测试的新代码，就在项目目录中运行脚本。此脚本引用该`jni/Android.mk`文件，您需要在其中指定头文件路径和 *.cpp 文件（类似于您必须`g++`在命令行上指定所有实现文件的方式）。

但在您这样做之前，您需要确保`build_native.sh`设置了所有使用的环境变量。您可以将它们放在您的`~/.bashrc`文件中，也可以将它们粘贴在该项目目录中（取决于您。bashrc 将在您启动新终端时将它们提供给所有项目，而将它们硬编码到`build_native.sh`只会将它们提供给特定的项目）。我认为您需要的只是将完整路径分配给 NDK_ROOT、COCOS2DX_ROOT 和 APP_ROOT，并且`build_native.sh`应该可以成功运行。

如果您向下看 的底部`build_native.sh`，您会注意到对 的调用`ndk-build`，以及您在终端会话中缺少的所有必要参数。

# c# - 使用 StructureMap 向重载的类构造函数注入接口

> ID：12938315
> 
> 赞同：3
> 
> 时间：2012-10-17T15:52:51.200
> 
> 标签：c#, asp.net-mvc-4, inversion-of-control, ioc-container, structuremap

我在**ASP .Net MVC 4中使用****StructureMap**并且在我的项目基础结构中获得了以下接口和实现的类：

 **```
public interface IUnitOfWork
{
    void Commit();
}

public class UnitOfWork : IUnitOfWork
{
    public void Commit()
    {
        // Track all changes in database
    }
} 
```

我`HomeController`使用 IUnitOfWork 接口作为构造函数参数：

```
public class HomeController
{
    IUnitOfwork unitOfWork;

    public HomeController(IUnitOfwork unitOfWork)
    {
        this.unitOfWork = unitOfWork;
    }
 } 
```

如何将`IUniOfWork`接口注入重载`HomeController`类作为参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T09:35:25.123

您必须执行以下步骤：

1.  删除和卸载 StructureMap 的任何配置和包。
2.  [从 nuget](http://nuget.org/packages/StructureMap.MVC4)安装structurmap.mvc4
3.  将您的 IoC 容器配置为：

    `x.For(IUnitOfWork).Use(UnitOfWork)`**

# node.js - Haxe 中的异步异常处理

> ID：12938317
> 
> 赞同：1
> 
> 时间：2012-10-17T15:52:52.377
> 
> 标签：node.js, haxe

使用异步 node.js 在 Haxe 中处理异常的最佳实践是什么？

此代码不显示“haha: test”，而是显示“test”。

```
import js.Node;

class Main {

    public static function handleRequest(req: NodeHttpServerReq, res: NodeHttpServerResp) {
        res.setHeader("Content-Type","text/plain");
        res.writeHead(200);
        res.end('Hello World\n');
        throw "test";
    }

    public static function main() {
        try {
            var server = Node.http.createServer(handleRequest);
            server.listen(1337,"localhost");
        } catch(e: String) {
            trace("haha: " + e);
        }

        trace( 'Server running at http://127.0.0.1:1337/' );
    }
} 
```

我知道为什么没有捕获到异常。问题是在 Haxe 中处理异常的最佳实践是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:52:40.647

我建议您尝试[haxe-continuation](https://github.com/Atry/haxe-continuation)，它将 Node.js 异常作为返回值处理。请参阅[此示例](https://github.com/Atry/haxe-continuation/blob/haxe-3.1/tests/TestNode.hx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:36:38.860

您的`try / catch`语句仅捕获`createServer`and`server.listen`方法调用引发的错误，而不是请求处理程序中的逻辑。我对此不是 100% 确定的，但我的猜测是调用的异步性质意味着`handleRequest`方法中抛出的错误也不会被捕获。如果您执行以下操作，您将获得预期的结果：

```
import js.Node;

class Main {

    public static function handleRequest(req: NodeHttpServerReq, res: NodeHttpServerResp) {
        res.setHeader("Content-Type","text/plain");
        res.writeHead(200);
        res.end('Hello World\n');
        //throw "test";
    }

    public static function main() {
        try {
            var server = Node.http.createServer(handleRequest);
            server.listen(1337,"localhost");
            throw "test"; // Throwing the error here will result in it being caught below
        } catch(e: String) {
            trace("haha: " + e);
        }

        trace( 'Server running at http://127.0.0.1:1337/' );
    }
} 
```

至于错误处理的最佳实践，[haxennode 上的简单示例](http://haxenode.org/#installation)不包括任何错误处理，并使用内联匿名函数进行成功回调（我确信这与 Haxe 哲学完全兼容）。否则，带有节点示例的 Haxe 在地面上似乎相当薄弱。但是，[这个关于处理节点中http错误的stackoverflow线程](https://stackoverflow.com/questions/12496491/node-js-http-createserver-how-to-get-error)（通常）可能会有用；请注意，该方法会引发错误`server.listen`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:59:05.697

我认为你应该完全避免 try/catch 并支持更面向 NodeJS 的策略。在`handleRequest`你应该能够`req.abort()`通过监听`clientError`事件来拦截错误`server`。

免责声明：我没有使用 NodeJS，所以我的细节可能是错误的，但一般概念应该是正确的；）

# compiler-construction - 我在 YACC 编程时，我遇到了一个减少冲突的语法。我需要担心这个吗？

> ID：12938323
> 
> 赞同：1
> 
> 时间：2012-10-17T15:53:13.660
> 
> 标签：compiler-construction, yacc, lex

据我对 SLR 解析器本身的理解通过使用句柄和可行的前缀等解决了移位减少冲突。那么为什么移位减少冲突会困扰我呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:02:13.017

冲突意味着生成的解析器可能不接受语法描述的整个语言，而是接受该语言的子集。如果您不关心不解析一些根据语法合法的构造，那么您可以忽略 shift/reduce 和 reduce/reduce 冲突。

现在，有时冲突是由于语法中的歧义造成的，这意味着解析同一事物有多种方式，有时在这种情况下，可以忽略冲突，因为解析器仍然会解析整个语言。但并非总是如此（实际上它是例外而不是规则），因此通常您需要查看语法*为什么*会发生冲突以及对解析器有什么影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:55:36.287

你不必担心*一个*，如果它是 else/if 冲突。您当然应该担心的其他任何事情，并且确实很难调试。幸运的是，您正在做简单的语法，并且有足够多的简单示例，您只需要比较和对比。

# javascript - 打印图像中的特定字段

> ID：12938324
> 
> 赞同：0
> 
> 时间：2012-10-17T15:53:15.310
> 
> 标签：javascript, html

我试图做的很简单，很高兴看到/听到正确方法的示例/想法：

假设我有一个 jpg 图像：宽度为 780 像素，高度为 2546 像素，其中包含优惠券。

我的目标是点击优惠券并打印...

我的问题是实现它的最佳方法是什么

我想到了图像映射，当单击特定的“优惠券”时，它将触发一个 java 脚本调用，并且通过图像映射规范，它将加载（特定的）优惠券的图像以进行打印。

我认为也许有更好的解决方案..

请记住，我唯一的选择是一张包含打印优惠券的大图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:24:49.020

将您的优惠券图像包装在 div 中

```
<div id="coupon_viewer" onClick="this.style.display='none'">
  <img src="coupon.jpg">
</div> 
```

有了这个 CSS

```
div#coupon_viewer { z-index:100; width:200px; height:300px; overflow:hidden; }
div#coupon_viewer>img { position:relative; left:0px; top:0px; } 
```

当您单击主优惠券时，只需显示查看器 div 并将 left 和 top 属性设置为该优惠券的适当坐标。您还可以根据需要设置 div 的宽度和高度。然后是window.print()。

如果您的窗口在渲染coupon_viewer 层之前启动打印对话框，那么您可以延迟打印命令，足够长的时间让任何慢速浏览器渲染coupon 层。

```
setTimeout(function () { window.print(); }, 800); 
```

快速搜索后，我发现了一个关于如何在单击优惠券时提取坐标的线程。然后，您可以将坐标乘以减小第一个图像大小的任何因子。 [jQuery获取元素内的鼠标位置](https://stackoverflow.com/questions/4249648/jquery-get-mouse-position-within-an-element)

这是一个指向溢出属性规范的链接隐藏只是意味着当您使用左侧和顶部属性在其中移动图像时，您的 div 将充当视口：http: [//www.w3schools.com/cssref/pr_pos_overflow。 ASP](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T10:19:38.173

我最终使用图像映射做到了：

协调“发送到打印按钮”并发送到接受参数的 javascript 'print()' 方法

参数是一张图片的编号（优惠券）

我有一个包含所有优惠券图像的文件夹：1.jpg、2.jpg .....等等

print 方法检索字符串 (1.jpg)

然后打印出来。

# c++ - Point Grey Research Triclops 仅读取 1 帧

> ID：12938326
> 
> 赞同：1
> 
> 时间：2012-10-17T15:53:18.243
> 
> 标签：c++, image-processing, opencv, camera-calibration, stereoscopy

我正在使用 Point Gray Research BumbleBee 2 相机和他们的 SDK。我有这个循环来连续抓取帧，但它不起作用。它可以抓取第一帧，但 triclopsGetImage() 似乎没有更新 refImage(R|L) 的内容，因为显示的图像只是来自第一帧......任何人都有点灰色相机或 triclops SDK 的经验?

```
 //There's more code above

   int nframes = 20;
   for (int frame = 0; frame < nframes ; frame++ ) {

       te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_RIGHT, &refImageR );
       te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_LEFT, &refImageL );

       cv::Mat leftIm(cv::Mat::zeros(refImageR.nrows,refImageR.ncols,CV_8UC1));
       cv::Mat rightIm(cv::Mat::zeros(refImageR.nrows,refImageR.ncols,CV_8UC1));
       int counter = 0;
       for (int row=0;row<refImageR.nrows;row++) {
           for (int col=0;col<refImageR.ncols;col++) {
               leftIm.at<uchar>(row,col) = refImageL.data[counter];
               rightIm.at<uchar>(row,col) = refImageR.data[counter];
               counter++;
           }
       }

       imshow("LeftIm",leftIm);
       imshow("RightIm",rightIm);

       cv::waitKey(1000);
       cout << "frame = " << frame << endl;
   } 
```

**编辑**

好的，这无论如何都不优雅，但我认为它有帮助。即使这样做，我也只能得到第一帧的内容。我在想 cv::Mat leftIm 和 rightIm 都在保留数据并且没有更新，或者 triclops 有问题。

```
TriclopsContext triclops; 
```

从头文件中可以看出“TriclopsContext 是一个指向内部结构的指针，该结构维护 Triclops 库所需的所有图像和簿记信息。它是所有参数的容器”

```
for (int frame = 1; frame < nframes ; frame++ ) {

       if (frame == 1) {
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_RIGHT, &refImageR1 );
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_LEFT, &refImageL1 );
       } else if (frame == 2) {
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_RIGHT, &refImageR2 );
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_LEFT, &refImageL2 );
       } else if (frame == 3) {
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_RIGHT, &refImageR3 );
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_LEFT, &refImageL3 );
       } else if (frame == 4) {
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_RIGHT, &refImageR4 );
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_LEFT, &refImageL4 );
       } else if (frame == 5) {
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_RIGHT, &refImageR5 );
            te = triclopsGetImage( triclops, TriImg_RECTIFIED, TriCam_LEFT, &refImageL5 );
       }

       cv::Mat leftIm(cv::Mat::zeros(refImageR1.nrows,refImageR1.ncols,CV_8UC1));
       cv::Mat rightIm(cv::Mat::zeros(refImageR1.nrows,refImageR1.ncols,CV_8UC1));
       int counter = 0;
       for (int row=0;row<refImageR1.nrows;row++) {
           for (int col=0;col<refImageR1.ncols;col++) {
               //leftIm.at<uchar>(row,col) = refImageL.data[counter];
               //rightIm.at<uchar>(row,col) = refImageR.data[counter];
               if (frame == 1) {
                    leftIm.at<uchar>(row,col) = refImageL1.data[counter];
                    rightIm.at<uchar>(row,col) = refImageR1.data[counter];
               } else if (frame == 2) {
                    leftIm.at<uchar>(row,col) = refImageL2.data[counter];
                    rightIm.at<uchar>(row,col) = refImageR2.data[counter];
               } else if (frame == 3) {
                    leftIm.at<uchar>(row,col) = refImageL3.data[counter];
                    rightIm.at<uchar>(row,col) = refImageR3.data[counter];
               } else if (frame == 4) {
                    leftIm.at<uchar>(row,col) = refImageL4.data[counter];
                    rightIm.at<uchar>(row,col) = refImageR4.data[counter];
               } else if (frame == 5) {
                    leftIm.at<uchar>(row,col) = refImageL5.data[counter];
                    rightIm.at<uchar>(row,col) = refImageR5.data[counter];
               }

               counter++;
           }
       }

       imshow("LeftIm",leftIm);
       imshow("RightIm",rightIm);

       cv::waitKey(1000);
       cout << "frame = " << frame << endl;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:50:03.360

如果您查看 Triclops SDK 文件夹中的示例，它会显示他们的程序在获取图像之前调用以下方法：

```
error = triclopsPreprocess( context, &inputData );
error = triclopsStereo( context ); 
```

您可能需要在循环结束时调用它们来告诉相机计算下一帧的视差。

# sql-server - 在一个查询中从同一个表中进行多个 COUNT SELECTS

> ID：12938332
> 
> 赞同：25
> 
> 时间：2012-10-17T15:53:37.093
> 
> 标签：sql-server, select

对于某些人来说，它可能看起来很简单，但我就是无法理解。
我一遍又一遍地从同一个表中获得多个 MS-SQL SELECT 查询：

```
SELECT count(Page) as tAEC
FROM someTable
WHERE Page LIKE '%AEC%' 
```

下一个

```
SELECT count(Page) as tTOL
FROM someTable
WHERE Page LIKE '%TOL%' 
```

等等...

编写此查询的更有效方法是什么。我用谷歌搜索了一堆类似的问题，但我无法让它们中的任何一个起作用。因此，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-17T15:55:33.800

```
SELECT sum(case when Page LIKE '%AEC%' then 1 end) as tAEC, 
    sum(case when Page LIKE '%TOL%' then 1 end) as tTOL 
FROM someTable 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T15:56:43.973

你可以使用一个`GROUP BY Page`

```
SELECT
  Page
, COUNT(Page) as "nb"
FROM someTable
GROUP BY Page 
```

你也可以做一个`GROUP BY CASE...`

```
SELECT
  CASE
    WHEN Page LIKE '%AEC%' THEN "AEC"
    WHEN Page LIKE '%TOL%' THEN "TOL"
    ELSE ""
  END AS "type"
, count(Page) as "nb"
FROM someTable
GROUP BY type 
```

你也可以`COUNT IF`

```
SELECT
  COUNT(IF(Page LIKE '%AEC%', 1, NULL) THEN "AEC"
, COUNT(IF(Page LIKE '%TOL%', 1, NULL) THEN "TOL"
FROM someTable 
```

# c++ - 使用哈希合并全局内存写入

> ID：12938333
> 
> 赞同：3
> 
> 时间：2012-10-17T15:53:38.683
> 
> 标签：c++, c, cuda, gpgpu

我的问题涉及合并的全局写入到 CUDA 中数组的一组动态变化的元素。考虑以下内核：

```
__global__ void
kernel (int n, int *odata, int *idata, int *hash)
{
  int i = blockIdx.x * blockDim.x + threadIdx.x;
  if (i < n)
    odata[hash[i]] = idata[i];
} 
```

这里`n`数组的第一个元素包含要从 的第一个元素更新`hash`的索引。显然，这导致了可怕的、可怕的缺乏结合。在我的代码的情况下，一个内核调用的哈希与另一个内核调用的哈希完全无关（其他内核以其他方式更新数据），因此简单地重新排序数据以优化这个特定的 kenrel 不是一种选择。`odata``n``idata`

CUDA 中是否有一些功能可以让我改善这种情况的性能？我听到很多关于纹理内存的讨论，但我无法将我读到的内容转化为这个问题的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:16:23.510

纹理化是一种只读机制，因此不能直接提高对 GMEM 的分散写入的性能。如果您像这样“散列”：

```
odata[i] = idata[hash[i]]; 
```

（也许你的算法可以转换？）

[那么考虑纹理机制](http://docs.nvidia.com/cuda/cuda-samples/index.html#simple-texture)可能会有一些好处。（您的示例本质上似乎是一维的）。

您还可以确保您的共享内存/L1 拆分针对缓存进行了优化。不过，这对分散的写入没有多大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:28:58.180

你能限制哈希结果的范围吗？例如，您可能知道线程的前 1K 次迭代只能在 0 到 8K 的范围内访问`odata`。

如果是这样，您可以使用共享内存。您可以分配共享内存块并临时在共享内存上进行快速分散写入。然后在合并事务中将共享内存块写回全局内存。

# objective-c - 原始类型的 Objective-c 属性

> ID：12938334
> 
> 赞同：9
> 
> 时间：2012-10-17T15:53:44.377
> 
> 标签：objective-c, properties, nonatomic

在 Objective-C 中，将原始类型的属性指定为 是否有意义`nonatomic`？

我想知道这两个属性之间的区别：

```
@property (nonatomic) BOOL myBool;
@property BOOL myBool; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-31T11:04:27.227

答案在技术上是肯定的，它们是不同的，但实际上不是，除非你编写自己的访问器。

让我解释。对于对象指针属性，`@property NSObject *foo`如果您使用合成访问器，则生成的代码有一个明显而重要的区别。这在[Apple 文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocproperties.html)中进行了描述，其中指出如果属性是原子的，合成访问器将*锁定*对象（如果您不指定非原子，则默认情况下它变为原子）

所以对于对象属性 简而言之：非原子更快但不是线程安全的，原子（你不能指定它，但它是默认值）是线程安全的但可能更慢。

（注意：如果你习惯了 Java，你可以认为 using `nonatomic`as like *not* specified `synchronized`，而*不是*指定`nonatomic`as like specified `synchronized`。换句话说 atomic = synchronized）

但是一个 BOOL 是一个原始的 - 实际上是一个 C 签名的字符，所以访问应该是原子的，而不像 Jano 的回答中提到的那样锁定对象。因此，当您合成访问器时，有两种可能性：1：编译器很聪明并且看到属性是原始的并避免锁定它，以及 2：编译器总是锁定原子属性的对象

据我所知，这在任何地方都没有记录，所以我尝试使用 XCode 中的 Generate->Assembly 选项并进行比较。答案并不完全确定，但足够接近可以说我几乎可以肯定答案是＃1，编译器很聪明。我这样说是因为为原子对象属性生成的汇编代码与为非原子对象属性生成的汇编代码有很大不同（更多）：这是锁定对象的所有代码。另一方面，对于 BOOL 属性，只有一行不同 - 一个“mov”，看起来不会有什么不同。我还是想知道。有趣的是，另一个区别是 BOOL 的原子版本有一些额外的注释大纲用于调试 - 所以编译器显然以不同的方式对待它。

尽管如此，相似之处在于我会说它们在实际用途中是相同的。

但是，如果您看不到实现，它们在技术上仍然不同，并且在您正在阅读的其他一些库（您没有自己编写代码）中可能存在实质性不同，原因如下：*原子*属性有一个*contract*。合同说：“如果你在多个线程上访问我的值，我保证每个设置或获取操作将在任何其他操作开始之前完成”。

但是，你说，BOOL 仍然是自然原子的，那么这个契约不是隐含的吗？

不。 BOOL*变量*自然是原子的，但我们谈论的是*属性*。一个*属性*可能不会被合成，甚至可能没有一个变量来支持它。这实际上很常见。考虑：

```
@property (getter=isEmptyThingo) BOOL emptyThingo;

...
- (BOOL)isEmptyThingo
{
    Thingo *thingo = [self deriveTheThingo];
    if ([thingo length] == 0) {
        return YES;
    }
    return NO;
} 
```

谁知道里面发生了什么`deriveTheThingo`！？好的，这有点做作，但关键是 isEmptyThingo - 我们的 getter 看起来不是很原子，是吗？如果一个线程正在派生thingo，而另一个线程调用来查找它是否为空，会发生什么情况。

长话短说：该属性不是原子的。所以我们应该这样声明。

因此 m 原始答案合格：如果您自己编写此属性并使用@synthesize，那么它们可能是相同的，但您通常不应将它们视为相同。

根据经验，如果您不需要多线程支持——如果您使用 UIViewControllers 之类的 UI 代码通常不需要，那么只需将其声明为非原子的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T15:58:17.603

在 x 位架构（例如：32 位、64 位等）中，任何 x 位或更少位的值将始终以原子方式读取或写入。这是任何健全的硬件实现的属性。

默认原子属性意味着始终设置或获取一个属性值，而不管其他线程在做什么。这只是对超过架构位数的属性的关注。编译器在任何其他类型上都完全忽略了非原子。

例子：

```
@property struct { int d; } flag;
@property (atomic) struct { float x; float y; } point;
@property (atomic,copy) NSString *s; 
```

*   `struct { int d; }`已经是原子的，因此访问者不需要互斥。

*   `struct { float x, float y}`如果它不是原子的，则可能处于不一致的状态。示例：两个线程设置`{1,2}`并且`{3,4}`可能重叠写入，并且结构可能以每个集合的值结束：`{1,4}`.

*   指针存储在单个内存位置，但它们需要多个语句来进行内存管理。

原子属性有助于线程安全，避免导致值不一致或内存管理事故的竞争条件。仅此一项并不能保证线程安全，因为它不处理其他问题，如死锁、饥饿、可见性等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T15:55:20.370

是的。`nonatomic`不是内存管理关键字，它与线程安全有关。此外，默认情况下属性是原子的（没有明确声明它们是非原子的），因此您列出的两个声明之间存在**差异**。

# node.js - 为什么我的 node.js / socket.io 应用无法在 iOS6 上运行？

> ID：12938335
> 
> 赞同：11
> 
> 时间：2012-10-17T15:53:45.420
> 
> 标签：node.js, ios6, mobile-safari, socket.io

我认为 socket.io 的全部意义在于不必担心现代浏览器？哈哈

无论如何，我是套接字编程的新手。我有一个简单地模仿鼠标移动的小应用程序。

您打开多个浏览器，当您移动鼠标时，您的操作会记录在其他浏览器中。它移动一个小方块。有点酷。但是，当我在 iPad (iOS6) 上打开它时，什么也没有！套接字未连接。我什至在`connect`事件中添加了一条警报消息，但什么也没有。

在我的笔记本电脑上可以在 IE、FF 和 Chrome 中正常工作。唯一的区别是我的开发机器使用`localhost`，而 iPad 使用我机器的 IP。但是，当我连接到笔记本电脑上的本地 IP 时，它仍然可以工作。只是不在 Safari/iPad 中。

这是我的服务器。

```
 var app = require('http').createServer(handler),
        io = require('socket.io').listen(app),
        fs = require('fs');

    app.listen(80);

    function handler(req, res) {
        var file = __dirname + '/public/index.html';
        fs.readFile(file, 
            function(err, data) {
                if(err) {
                    res.writeHead(500);
                    return res.end('Error loading index.html');
                }

                res.writeHead(200);
                res.end(data);
            }
        );
    }

    var rooms = ['abc', 'test1'];

    var sockets = [];
    io.sockets.on('connection', function(socket) {
        sockets.push(socket);

        socket.on('m', function(data) {
            socket.broadcast.to(socket.room).emit('relay', {msg: 'MouseX: ' + data.x + ' MouseY: ' + data.y, x: data.x, y: data.y});
        });

        socket.on('join', function(room) {
            socket.join(room);
            socket.emit('updateStatus', {msg: 'Joined room ' + room});
            console.log('Joined room ' + room);
        });

    }); 
```

这是我的客户：

```
<!doctype html>
<html>
    <head>
        <style>
            body {
                padding: 40px;
            }
            #cursor {
                background:white;
                border:1px solid black;
                color: white;
                display: block;
                height:24px;
                padding:6px;
                position:absolute;
                width:24px;
                z-index:20;
            }
        </style>
    </head>
    <body>

        <input id='msg' type='text' size='100' /><br />
        <input id='box' type='text' size='100' />
        <div id='cursor'></div>

        <script src='/socket.io/lib/socket.io.js'></script>
        <script>
            var socket = io.connect('http://localhost');
            var b = document.getElementById('box');
            var m = document.getElementById('msg');
            var c = document.getElementById('cursor');

            // join custom room
            socket.on('connect', function() {
                socket.emit('join', 'abc');
            });

            // update status messages from server
            socket.on('updateStatus', function(data) {
                m.setAttribute('value', data.msg);
            });

            socket.on('relay', function(data) {
                b.setAttribute('value', data.msg);
                c.style.left = parseInt(data.x) + 'px';
                c.style.top = parseInt(data.y) + 'px';
            });

            document.onmousemove = function(event) {
                event = event || window.event;
                socket.emit('m', {x: event.clientX, y: event.clientY});
            }

        </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T15:58:12.657

本地主机是机器本地的。你的 IP 应该使用 ip 地址或域名：

类似：io.connect('192.168.1.110'); 或 io.connect('test.myapp.com');

# mysql - 将多个子查询的结果组合在一组中

> ID：12938337
> 
> 赞同：2
> 
> 时间：2012-10-17T15:53:46.077
> 
> 标签：mysql, set, subquery

我正在尝试根据其他表中的 id 排除表中的行。我有 2 个表，其中的“select * from”会生成一个像 (1,2,3) 这样的集合

我正在尝试将这两个子查询的结果合并为一个，例如：

```
(1,2,3) + (4,5) = (1,2,3,4,5) 
```

所以我可以用“NOT IN (1,2,3,4,5)”过滤大表

我一直在查看 GROUP_CONCAT、UNION 和所有其他类型，但我似乎找不到真正有效的东西。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:57:43.630

```
select *
from Table3 
where id not in (
    select id from Table1 --your subquery that returns 1,2,3
    union all
    select id from Table2 --your subquery that returns 4,5
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:58:45.077

```
select * from mytable
where id not in (
    select id from othertable
    union
    select id from othertable2
) 
```

# objective-c - Difference: Create instances with class methods or by assigning return values to them

> ID：12938340
> 
> 赞同：2
> 
> 时间：2012-10-17T15:53:54.050
> 
> 标签：objective-c, class-method

just a small question with a simple and short answer I hope ;-)

What exactly is the difference between (i.e.)

```
NSData *htmlData = [NSURLConnection sendSynchronousRequest:self.request returningResponse:&response error:nil]; 
```

and

```
NSData *htmlData = [NSData dataWithData:[NSURLConnection sendSynchronousRequest:self.request returningResponse:&response error:nil]] 
```

Or isn't there any difference at all? If it matters, yes I use ARC.

Thanks a lot!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:03:08.100

There is not a simple and short answer :)

In the first, you handle the data returned from the URL connection.

In the second, you create a copy of that data -- that 'copy' btw, may not actually be a deep copy for a number of reasons.

How this performs can actually go *both ways*, and a lot of it is hard to answer because:

*   a) it depends largely on how your program uses that data and
*   b) internal optimizations and implementation details of the APIs you're using
*   c) copy or retain semantics of your objects

Personally, I prefer the latter when I need to pass that data around. The reason is that you should declare your ivars for types which have mutable variants as copy (`NSMutableData` in this case), and you should generally work with immutable copies of these objects where possible. Once much of your implementations handle these types with mutable variants by copy, then you can actually *reduce* copying by ensuring the objects you deal with are in fact immutable -- immutable objects can avoid deep and even shallow copies when a copy is requested.

If that data is passed nowhere else, then you could avoid a potential copy in the event the API returns an instance of `NSMutableData` (i.e. you can use the first safely).

# java - 为 Intents 添加条目到 android manifest

> ID：12938344
> 
> 赞同：1
> 
> 时间：2012-10-17T15:54:20.880
> 
> 标签：java, android, android-intent, manifest

我只是在构建一个非常简单的应用程序。三个按钮。第一个打开浏览器，第二个打开手机，第三个打开地图应用程序。目的是了解有关触发其他应用程序启动的意图的更多信息。

```
public void openBrowser(){
    //Create intent
    Intent i = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://www.facebook.com"));
    startActivity(i);
}

public void openPhone(){
    Intent i = new Intent(android.content.Intent.ACTION_DIAL, Uri.parse("tel: +3531234567890"));
    startActivity(i);
}

public void openMap(){
    Intent i = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("geo:53.2803, -6.1529"));
    startActivity(i);

} 
```

这些特定意图的清单文件中是否应该有一个条目？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:57:17.920

不，您只需要在清单文件中添加活动条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:03:06.193

不，您不需要 ManifestEntrys 用​​于内置 Intent。

您可能需要权限：一个活动（特别是如果它不是您自己的）可能需要您拥有调用此功能的权限。您可以通过 Intent 调用 Barcode 中 resultString 的条码扫描应用程序（即来自 XZing 团队的 BarcodeScanner）可能需要调用者具有 Permission `CAMERA`。如果您想从默认的 Android 联系人应用程序中选择联系人，则需要您拥有`READ_CONTACTS`权限。否则，如果没有权限的应用程序能够通过联系人应用程序读取联系人（当然是拥有此权限），则可以将其视为一种本地漏洞利用。

# css - 覆盖 Jquery 移动样式

> ID：12938350
> 
> 赞同：0
> 
> 时间：2012-10-17T15:54:43.297
> 
> 标签：css, jquery-ui, jquery-mobile

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:00:46.337

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T22:31:33.837

如果您使用 ThemeROller，则必须进入 CSS 文件并添加“text-decoration: none !important;” 进入控制页面的色板主题的链接部分。前任。转到 ThemeROller 中的“K”样本以解决下划线问题。ThemeRoller 很棒，但有时不稳定。有时它强调链接，有时它没有，但这个技巧每次都对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T12:54:11.077

有点扩展李在上面的答案。我遇到了同样的问题，所以我接受了他的建议并检查了我在 themeroller 中制作的自定义主题。它已经具有以下内容 -

```
/* Buttons
-----------------------------------------------------------------------------------------------------------*/
.ui-btn,
label.ui-btn {
font-weight: bold;
border-width: 1px;
border-style: solid;
}
.ui-btn:link {
text-decoration: none !important; 
```

但是我得到了下划线，所以我添加了 text-decoration: none !important; 到我的全局字体部分-

```
/* Globals */
/* Font
-----------------------------------------------------------------------------------------------------------*/
html {
font-size: 100%;
}
body,
input,
select,
textarea,
button,
.ui-btn {
font-size: 1em;
line-height: 1.3;
  font-family: sans-serif /*{global-font-family}*/;
  text-decoration: none !important; 
```

这停止了​​下划线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-21T03:07:06.623

或者，更好的是，这里有一个修改过的 jquery.mobile-1.4.3.min.css，它没有下划线链接：[https](https://drive.google.com/file/d/0B9z4E6c3ozD8Vi1WQkxnQ2FmVzQ/view?usp=sharing) ://drive.google.com/file/d/0B9z4E6c3ozD8Vi1WQkxnQ2FmVzQ/view?usp=sharing 。而且我没有使用 !important 标记，因此对链接类和下划线的控制在`<head>`标记中恢复给您。几周前我已经为自己做了这个，但我看到了这个问题，并想为什么不分享它。我现在知道它的版本是 1.4.5，但我没有升级，因为如果您查看更改日志，他们所做的大部分工作都是锁定更多默认设置，并且 themeroller 并不是真正的解决方案，因为它仍然适用你的属性不一致。

# c - 在C中将多维数组转换为一维

> ID：12938357
> 
> 赞同：1
> 
> 时间：2012-10-17T15:55:01.897
> 
> 标签：c, arrays, multidimensional-array

如果我在 C 中有一个如下定义的数组：

```
int B[d1][d2][d3][d4][d5][d6][d7][d8][d9]; 
```

然后很容易将“B”转换为一维。但是如果我在 C 中有一个数组，它的定义如下：

```
int********* A;
//which will be allocated as follows for example
A = (int*********) malloc(N*sizeof(int********));
for(int i=0; i<N; i++)
{
 //differentSizes will be distinct for every "i"
 //the same distinctness of sizes will be for every other 
 //inner parts of all inner for loops
 compute(&differentSizes);
 A[i] = (int********) malloc(differentSizes*sizeof(int*******));
 for(...)
 {
  ...
 }
} 
```

其中“A”对于每个维度都有非常大的大小，并且对于“A”的所有内部数组/子数组来说它们都是不同的。

我的问题：有没有一种有效的方法将“A”转换为一维？如果可能的话，你能举一个简单的例子吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:59:39.287

我没有看到你的问题。多维数组在内存中是连续的，因此可以进行类型转换：

```
int B[13][37];
int *oneDimension = (int *)B; 
```

从现在开始，您可以`B`通过计算每个维度中其大小的适当偏移量来访问元素；使用上面的例子：

```
int valueAtB_2_6 = oneDimension[2 * 13 + 6]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:02:25.870

声明数组的方式所有内容将在内存中连续。如果您可以确定元素的数量，您可以将数组复制到一维或迭代原始数组，这取决于您想要做什么：

```
int* singleIndex = (int*)B;

for (int i = 0; i < d1 * d2...dN; i++)
{
    printf("Element # %d = %d\n", i, *singleIndex);
} 
```

例如。

现在，如果您正在对数组进行堆初始化，那么这将不起作用，因为所有内存都将分散在堆上，但对于静态/堆栈分配的数组，它会。

# jquery - 嵌套无序列表的jQuery修改

> ID：12938358
> 
> 赞同：0
> 
> 时间：2012-10-17T15:55:04.380
> 
> 标签：jquery, html-lists

这就是我想要实现的目标。

我使用 JQuery 在`>`每个元素旁边添加`<li>`了一个嵌套`<ul>`的元素，以指示该元素具有嵌套菜单。

我正在尝试将`href`属性从`<li>`嵌套中取出`<ul>`并创建（作为嵌套菜单中的第一项）`Overview`菜单项。

例如：

```
• Phones
    - Overview
    - Phone Types
    - Phone FAQs 
```

菜单是使用`Phones`父级上的 Overview 链接创建的，并且该`Overview`链接是动态创建的。

这是我目前拥有的：

```
$('li.menu-item').each(function(index){
        if($(this).children('ul').length>0){
            var theHref = $(this).children('a').attr('href');
            var ulContent = $(this).children('ul').html();
            $(this).children('a').attr('href', '#');
            $(this).children('ul').html('<li><a href="'+theHref+'">Overview</a></li>'+ulContent);
            $(this).append('<div class="menu-ticker"><a class="ticker">></a></div>');
        }
    }); 
```

`menu-ticker`是指`>`元素。

我的错误是（使用上面的示例）电话类型也有一个嵌套菜单。但是，一旦我添加了`Overview`链接，`>`它就不会出现在子菜单上。没有`Overview`代码，它工作正常。

有人可以帮忙吗？

**更新：**
根据要求，这是一个 JSFiddle - [http://jsfiddle.net/wGKQh/](http://jsfiddle.net/wGKQh/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:52:09.543

好的，解决方案正盯着我看，因为我将 html 撕掉到一个变量中，然后通过添加重新添加它，选择器没有针对我修改过的那个。

而不是这个，我使用了前置。

```
$('li.menu-item').each(function(index){
        if($(this).children('ul').length>0){
            var theHref = $(this).children('a').attr('href');
            $(this).children('a').attr('href', '#');
            $(this).children('ul').prepend('<li><a href="'+theHref+'">Overview</a></li>');
            $(this).append('<div class="menu-ticker"><a class="ticker">></a></div>');
        }
    }); 
```

# gwt - 在 DevMode 中运行 Grails/GWT 应用程序时出现 UnsatisfiedLinkError

> ID：12938360
> 
> 赞同：4
> 
> 时间：2012-10-17T15:55:10.010
> 
> 标签：gwt, grails, dto, dev-mode

在 GGTS 3.1.0 中使用带有 gwt 插件 (gwt:0.7.1) 和 dto 插件 (dto:0.2.4) 的 Grails 2.1.0。我有一个简单的 DTO 对象：

```
public class TestDTO implements grails.plugins.dto.DTO {
    private static final long serialVersionUID = 1L;

    String text;

    // Required for DTO serializer
    public TestDTO() {}

    public String getText()
    {
        return text;
    }
    public void setText(String text)
    {
        this.text = text;
    }
} 
```

当我编译 gwt 模块并启动应用程序时，它工作正常。但是，当我启动 DevMode 时，它​​会失败并显示`java.lang.UnsatisfiedLinkError`.
错误的详细信息是`com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.eval(Ljava/lang/String;)Lcom/google/gwt/core/client/JavaScriptObject;`。

服务器端服务被调用，异步回调正在点击 onFailure(...) 方法，这是我得到错误的地方。

这是客户端源问题吗？我已经验证 gwt-user.jar 和 gwt-dev.jar 在 DevMode 启动配置的源类路径中。我已经单步执行了该应用程序，但看不到它失败的地方。

# c# - 在 asp.net gridview 中显示空格填充的记录

> ID：12938369
> 
> 赞同：2
> 
> 时间：2012-10-17T15:55:21.960
> 
> 标签：c#, asp.net, gridview

我有一个 gridview 控件，我在其中显示数据集中的记录。数据集包含根据需要填充空格的记录。我正在尝试按照这篇文章中的解决方案以[编程方式更改 ASP.NET GridView 中列的样式（填充）](https://stackoverflow.com/q/2342232/165694)

但是，当我在 gridview 中显示它们时，记录显示为左对齐。

如何显示空格填充记录？

```
<asp:GridView runat="server" ID="gvCustomer" Visible="false"
    Width="350px" CellSpacing="1" ClientIDMode="Static" CellPadding="2" 
    AutoGenerateColumns="false" OnRowDataBound="gvCustomer_OnRowDataBound"
    ViewStateMode="Enabled" EmptyDataText="">
        <Columns>
            <asp:BoundField DataField="CustomerName" ControlStyle-Width="225px" HeaderStyle-HorizontalAlign="Center" HeaderText="Customers" />
        </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:04:05.633

您需要做的是将您的更改`BoundField`为 a `TemplateField`，并使用`RowDataBound`事件将所有空格替换为`&nbsp;`. HTML 不会以您想要的方式处理空格，这就是您需要不间断空格 ( `&nbsp;`) 字符的原因。

或者，如果您真的想使用 a `BoundField`，请修改您的 sql 查询以替换空格`&nbsp;`并绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:58:37.180

看起来您只是在设置标题的对齐方式。您要添加：

`ItemStyle-HorizontalAlign="Center"`

到`asp:BoundField`控制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:00:36.233

HTML 并不像您认为的那样处理空格。如果文本或标签之间有多个空格，浏览器将忽略任何多余的空格。

换句话说，以下内容将以完全相同的方式呈现在屏幕上

```
<b>Hello                     World</b>
<b>Hello World</b> 
```

所以，我建议你用`&nbsp;`浏览器*会*注意到的“无中断空格”字符替换每个前导空格。

不幸的是，我不能做的是给你一个例子，说明你将如何使用`<BoundField>`in a `GridView`... 因为我从未使用过它，因此无法发表评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:03:40.270

如果您想申请您的`css`课程，请执行此操作

```
 <asp:BoundField>
            <ItemStyle CssClass="MyCSSClass" />
            </asp:BoundField> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-02T18:05:48.060

在边界字段上将其标记为 HtmlEncode = false 并使用

```
&nbsp;&nbsp;&nbsp; 
```

输入 3 个空格

# c# - 不支持将数据直接绑定到存储查询（DbSet、DbQuery、DbSqlQuery）

> ID：12938371
> 
> 赞同：21
> 
> 时间：2012-10-17T15:55:29.870
> 
> 标签：c#, linq, visual-studio, data-binding, entity

**我在Visual Studio 2012**上编码并使用**实体模型**作为我的数据层。但是，当页面尝试加载时，我使用 Linq 语句的下拉控件往往会引发未处理的异常（上面的标题）。下面是我的代码；

```
using (AdventureWorksEntities dw = new AdventureWorksEntities())
        {
            ddlCon.DataSource = (from em in dw.Employees
                                 select new { em.Title, em.EmployeeID });

            ddlCon.DataTextField = "Title";
            ddlCon.DataValueField = "EmployeeID";
            ddlCon.DataBind();
            ddlCon.Items.Insert(0, new ListItem("--Select--", "--Select--"));
        } 
```

1.  我想知道为什么会发生这个错误
2.  使用 LINQ 时绑定到控件的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-17T16:02:37.530

错误很明显 - 您不能直接绑定到查询结果，而是需要填充一些本地集合。

最简单的方法是将其转换为`List<T>`, via `ToList()`：

```
 ddlCon.DataSource = (from em in dw.Employees
                             select new { em.Title, em.EmployeeID }).ToList(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-14T08:12:09.837

或者，如果您想避免编写 LINQ 表达式，您可以这样做：

```
var dbContext = new EF.CustomerEntities();
gvCustomers.DataSource = dbContext.CustomersTable.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-05T20:34:25.523

虽然这个问题已经得到了回答，但我想表明你甚至可以直接从消息框中得到答案（我得到了同样的错误） [错误对话框图像](https://i.stack.imgur.com/zyB9w.png)

```
using (var retrive=new Models.Academy_MSDBEntities())
        {
            var query = retrive.Students.Where(s => s.Year == year).ToList();
            return query;
        } 
```

# javascript - DOM：强制从父类继承类属性

> ID：12938380
> 
> 赞同：-1
> 
> 时间：2012-10-17T15:55:48.383
> 
> 标签：javascript, html, class, dom

比如说，一个 HTML 文件包含以下元素：

```
<div class="mydiv">  
    <img src="img.jpg"/>  
</div> 
```

我想知道以编程方式将其转换为是否安全

```
<img class="mydiv" src="img.jpg" /> 
```

也就是说，将父级的类添加到子元素中并撕掉父级本身。当类存在 CSS 规则时，两个版本的 HTML 代码是否产生相同的呈现？如果没有，哪些情况实际上没有发生？

**注意：**
- 父级仅具有类的特征，它没有其他有意义的属性
- CSS 文件不能更改
- 在加载 HTML 后由 javascript 执行转换
- 目标是摆脱父级，但所有 CSS 规则渲染相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:01:14.763

不，不是所有的 CSS 声明都向下级联。哪些级联以及它们如何级联取决于浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:03:12.610

首先解决问题的标题：类永远不会被继承。CSS规则可以。

有几个一般情况可能会出错。

可能存在仅在某些条件下适用的规则（例如`margin: auto`，根据 的值具有不同的效果`display`（对于不同的元素具有不同的默认值）。

选择器可能更具体`.mydiv`。可能有`div.mydiv`或`.mydiv img`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:08:23.967

如果该类在 DIV 中的原因仅仅是为了定义图像独有的属性，那么是的，您可以换掉并且行为应该是相同的。你还必须更新你的 CSS 以确保你处理这个新的类分配。

然而。确保没有 DIV 分配来建立上下文。也就是说，HTML 中可能还有其他 IMG 现在可以被新的类分配覆盖。

div.mydiv>img 是比 img.mydiv 更具体的场景

此外，该父 div 可能被另一个范围更广的类似 CSS 规则覆盖。

# c - 数组到c中的函数

> ID：12938383
> 
> 赞同：2
> 
> 时间：2012-10-17T15:56:02.160
> 
> 标签：c, arrays, pointers, multidimensional-array

我用来将一维数组传递给函数的常规方法如下。

```
#include <stdio.h>
#define ARRAY_SIZE 5 

void function(int *ptr_array, int size) 
{
  int index;
  printf("Destination array contents: ");
  for(index=0;index<size;index++)
  {
     printf("%d ",ptr_array[index]);
  }
}

int main()
{
   int array[ARRAY_SIZE]={1,2,3,4,5};
   function(array,ARRAY_SIZE);
   printf("\n");
   return 0;
} 
```

我确实意识到接受参数的函数也可以跟随为`void function(int ptr_array[],int size)`(or) `void function(int ptr_array[5],int size)`。在这种情况下，传递的参数是 a`int *`但收到 in `int []`。所以问题是

*   在我看来，编译器必须**对函数中接受的参数进行**强制转换。数组索引如何影响强制转换？
*   如果传递给函数的是二维数组的基地址，那么接受`int[][]`表单 参数的正确类型是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:17:16.690

在函数参数声明的上下文中，`T a[]`和是;`T a[N]`的同义词 是指针类型，不是数组类型，不管你用or还是. `T *a``a``[]``[N]``*`

[章节和诗句：](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

> ### 6.7.6.3 函数声明器（包括原型）
> 
> ...
> 7 将参数声明为“*类型*数组”应调整为“指向 *类型*的限定指针”，其中类型限定符（如果有）是在数组类型派生的`[`and中指定的那些。`]`如果关键字`static`也出现在数组类型派生的`[`and`]`中，那么对于函数的每次调用，对应的实际参数的值应提供对数组的第一个元素的访问，该数组的元素至少与大小指定的一样多表达。

为什么会这样？这就是为什么：

> ### 6.3.2.1 左值、数组和函数指示符
> 
> ...
> 3 除非它是运算`sizeof`符、运算符`_Alignof`或一元`&`运算符的操作数，或者是用于初始化数组的字符串文字，否则类型为 ''array of *type* '' 的表达式将转换为表达式类型 ''pointer to *type* '' 指向数组对象的初始元素并且不是左值。如果数组对象具有 `register`存储类，则行为未定义。

在对 的调用中`function`，*表达式* `array`的类型为“5 元素数组`int`”；根据 6.3.2.1/3 中的规则，它被转换（“decays”）为“pointer to `int`”类型的表达式，其值为第一个元素的地址（`&array[0]`）；这个指针值是传递给`function`.

如果`array`已声明为`int array[5][5]`，则表达式`array`将从“5 元素数组的 5 元素数组`int`”转换为“指向 5 元素数组的指针`int`”，或者`int (*)[5]`，您的函数声明将如下所示

```
void function(int (*array)[5], int size) 
```

也可以写成

```
void function(int array[][5], int size) 
```

或者

```
void function(int array[5][5], int size) 
```

请注意，在这种情况下，外部尺寸的大小*不是可选*的；必须指定它以便编译器知道所指向的类型的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:01:56.610

> 在我看来，编译器必须对函数中接受的参数进行强制转换。数组索引如何影响强制转换？

除了在某些情况下（根据 C11 标准用作和一元运算符`sizeof`的操作数），数组被评估为指向其第一个元素的指针。此外，以下形式是等价的（在函数参数的情况下）：`_Alignof``&`

```
void function(int ptr_array[], int size);
void function(int *ptr_array, int size); 
```

因此，没有真正的论点“演员”；数组被隐式转换为指针，并且与参数类型匹配。

> 如果传递给函数的是二维数组的基地址，那么接受 int[][] 形式的参数的正确类型是什么？

以下表格是正确的：

```
void f(int t[][SIZE]);
void f(int (*t)[SIZE]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:00:01.440

所有数组都可以隐式转换为与数组相同类型的指针，但反之则不行。这就是为什么可以将数组传递给接受指针或将数组分配给指针的函数，但不能将指针分配给数组。

至于您的第二个问题，您要么必须将参数作为双精度数组（即`type array[][]`）或指向数组的指针（即`type (*array)[]`）。在这种情况下，指向指针的指针将*不起作用*，因为它是别的东西。

# jquery - 将外部 div 内容加载到我的页面 div

> ID：12938386
> 
> 赞同：2
> 
> 时间：2012-10-17T15:56:24.567
> 
> 标签：jquery, load, external

我正在尝试将外部网站#external-div 内容加载到#mydiv div 上的页面。我试过附上这个jquery

`<script src="js/jquery-1.8.2.min.js"></script>`

和脚本是

```
<script>
    $(document).ready(function(){
        $('#mydiv').load('http://localhost/qa/ask #external-div');
    });
</script> 
```

我的 div

`<div id="mydiv">loading...</div>`

我从这里下载了 jquery [http://jquery.com/download/?rdfrom=http%3A%2F%2Fdocs.jquery.com%2Fmw%2Findex.php%3Ftitle%3DDownloading_jQuery%26redirect%3Dno](http://jquery.com/download/?rdfrom=http%3A%2F%2Fdocs.jquery.com%2Fmw%2Findex.php%3Ftitle%3DDownloading_jQuery%26redirect%3Dno)

但它没有加载任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:06:07.377

尝试下面的代码以获得回调响应：

```
$('#mydiv').load('http://localhost/qa/ask #external-div', function(response, status, xhr) {
    if (status == "error") {
        var msg = "Sorry but there was an error: ";
        alert(msg + xhr.status + " " + xhr.statusText);
      }
}); 
```

# angularjs - Jasmine 测试没有看到 AngularJS 模块

> ID：12938388
> 
> 赞同：35
> 
> 时间：2012-10-17T15:56:26.090
> 
> 标签：angularjs, jasmine

我正在尝试使用 Jasmine 规范文件对 Angular 服务进行单元测试。这需要加载一个模块。这是一个简单的规范，旨在简单地加载 Angular 模块：

```
describe('Submission services', function () {
  it('Finds angular', function () {
    module('submissionServices');
  });
}); 
```

当我运行 Jasmine 时，这会导致以下错误

```
Running Jasmine specs...
FAIL: 1 test, 1 failure, 0.004 secs.

Submission services Finds angular. (/Users/XXX/Projects/globe_town/spec/javascripts/SubmissionsSpec.js:3)
ReferenceError: Can't find variable: module

Test ordering seed: --seed 1826
rake aborted!
Jasmine::Headless::TestFailure 
```

jasmine.yml 文件包含

```
src_files:
  - public/javascripts/jquery.js
  - spec/javascripts/lib/angular/angular.js
  - spec/javascripts/lib/angular/angular-resource.js
  - app/assets/javascripts/services/submissions.js

stylesheets:
  - stylesheets/**/*.css

helpers:
  - helpers/**/*.js

spec_files:
  - '**/*[sS]pec.js'

src_dir:

spec_dir: spec/javascripts 
```

软件版本如下：

*   导轨 3.2.7
*   茉莉花核 1.2.0
*   茉莉花无头webkit 0.8.4
*   AngularJS 1.0.2

**我需要做什么才能让 Jasmine 找到 Angular？**

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-17T17:27:13.637

确保为[angular](http://code.angularjs.org/1.1.0/angular-mocks.js) -jasmine-helper 函数（如`module`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-08T15:45:10.900

这可能是一个遥远的机会，但我遇到了同样的问题，发现我的 angular-mocks.js 文件已损坏，其中有 HTML。我不知道它是如何到达那里的。因此，如果您在尝试修复后遇到此错误，请仔细检查您的所有 js 文件，以确保它们都没有被弄乱或损坏。

# java - 在 tomcat 中记录身份验证

> ID：12938390
> 
> 赞同：1
> 
> 时间：2012-10-17T15:56:34.967
> 
> 标签：java, authentication, tomcat, logging

我在 tomcat 6 中有一个 Web 应用程序，需要通过 JNDI 进行身份验证。我需要以这种格式登录 sql db 的主要身份验证事件：

> 日期时间、用户名、操作（登录/注销）

我发现记录身份验证事件的唯一方法是启用登录 org.apache.catalina.realm 和身份验证器（在[此处](http://mail-archives.apache.org/mod_mbox/tomcat-users/200811.mbox/%3C491ABEE6.40205@kippdata.de%3E)描述），但这种日志对我来说不可用。

现在我的想法是编写一个扩展原始 FormAuthenticator 的类，并将 authenticate() 方法放入我的日志记录实现中。

你觉得我的想法可以实现吗？还有其他（更好的）选择吗？在我看来，这个解决方案有点突兀......

提前致谢。

# flash - Flash只允许一个类？

> ID：12938392
> 
> 赞同：0
> 
> 时间：2012-10-17T15:56:40.613
> 
> 标签：flash, class, data-structures

我想在 Flash 中创建一个客户类，以帮助更有效地存储有关人员的信息。

```
class Teacher
{
    var id:uint;
    var username:String;
    var pword:String;
}
class Student
{
    var id:uint;
    var firstname:String;
    var surname:String;
    var pword:String;
    var teacher:String;
    var group:String;
    var tasksSet:Array;
}
public class Main extends MovieClip 
```

{ .... } 但由于某种原因，flash 只允许一个类。互联网上的所有帮助都远远超出了这个简单的问题，我是 flash 的新手，我以前从未遇到过制作数据结构的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:10:54.100

从技术上讲，您可以在 Actionscript 文件中定义任意数量的类。但是，除了 Actionscript 文件中定义的主类（即：名称与 .as 文件相同的类）之外，其他任何东西都无法访问这些“内部”类。

为了避免您遇到的错误，需要在包之外定义内部类。例如，给定文件`MyClass.as`：

```
package com.mydomain.whatever
{
    public class MyClass
    {
        public function MyClass()
        {
            var e:ExampleInnerClass = new ExampleInnerClass();
             // do something
        }
    }
}

class ExampleInnerClass
{
    public function ExampleInnerClass()
    {
        // do something
    }
} 
```

# java - 在 PDF 中搜索单词并在 android 中使用 iText 提取它

> ID：12938397
> 
> 赞同：1
> 
> 时间：2012-10-17T15:56:55.673
> 
> 标签：java, android, pdf, itext

我最近下载了 iText 5.3.3，但我在使用它时遇到了一些麻烦。

**我使用哪些类来搜索单词并从 PDF 中提取它们并在 Android 中显示文本？**

我看过类**PdfTextExtractor**，我想知道在类中有一个参数为`TextExtractionStrategy strategy`. 他们指的是什么 TextExtractionStrategy ？

```
 public static String getTextFromPage(PdfReader reader,
                                 int pageNumber,
                                 TextExtractionStrategy strategy) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:20:40.510

您可以检查这些链接，它还会告诉您`TextExtractionStrategy`（最后一个链接）：

[http://itextpdf.com/examples/iia.php?id=275](http://itextpdf.com/examples/iia.php?id=275)
[http://itextpdf.com/examples/iia.php?id=277](http://itextpdf.com/examples/iia.php?id=277)
[http://itextpdf.com/examples/iia.php?id= 278](http://itextpdf.com/examples/iia.php?id=278)
[http://api.itextpdf.com/itext/com/itextpdf/text/pdf/parser/TextExtractionStrategy.html](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/parser/TextExtractionStrategy.html)

# php - 在 Opencart 中登录 Facebook

> ID：12938400
> 
> 赞同：0
> 
> 时间：2012-10-17T15:57:16.750
> 
> 标签：php, oauth, opencart, facebook-login

我想在 OC 1.5 中实现 Facebook 登录。更具体地说 - 我的网站上有 Facebook 登录按钮，我要求扩展权限。但是在我收到用户的电子邮件后，我无法将其登录到我的网站，因为我没有密码（它是散列的）。

这个 Facebook 自动登录网站背后的秘密是什么？如何仅使用电子邮件在 Opencart 中登录用户？

再次，对不起，如果我遗漏了一些明显的东西。我不熟悉 OC 和 MVC-L 模型，但如果我只将电子邮件传递给 /catalog/controller/account/login.php，可能还有登录用户的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:50:51.257

如果您使用的是 opencart，那么您无需密码即可登录用户。试试这个：

```
$this->customer->login($email, $password,TRUE) 
```

通常未指定参数 true ，但是当您将其指定为 true 时，它​​会覆盖密码要求，您将能够与用户创建会话。

# iphone - 使用 iOS Facebook-SDK 3.1 获取电子邮件和个人资料的图像

> ID：12938402
> 
> 赞同：1
> 
> 时间：2012-10-17T15:57:18.717
> 
> 标签：iphone, ios, facebook, facebook-graph-api, ios6

最近我开始了我的应用程序与 facebook-sdk 集成的冒险。

我有一个提供 Facebook 登录的应用程序。因此，在与 facebook 创建会话之后，这个想法是从用户那里获取一些数据并在我的服务器上创建一个带有一些数据的新数据，

*   姓名
*   图片网址
*   电子邮件
*   脸书ID

因此，我使用的是最新版本[facebook sdk-3.1](http://developers.facebook.com/ios/)。我创建了一个具有用户权限的会话以获取电子邮件。

```
 NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_location",
                        @"email",
                        nil];

[FBSession openActiveSessionWithReadPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:
 ^(FBSession *session,
   FBSessionState state, NSError *error) {
     [self sessionStateChanged:session state:state error:error];
 }]; 
```

会话成功创建，之后我开始创建用户。

```
 if (FBSession.activeSession.isOpen) {
        [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
             if (!error) {

                 self.userData.firstNameUser=user.name;
                 self.userData.lastNameUser=user.last_name;
                 self.userData.mainLocation=user.location.name;
                 self.userData.urlImageUser=user.link;
             }
         }];   
    } 
```

那么，我怎样才能将使用最后一个 SDK 的用户的其他数据、**电子邮件**和图像的**个人资料**发送到我的服务器？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T11:27:08.440

您在用户对象本身中有用户的个人资料图像。

只需创建 FBProfilePictureView 的对象，设置对象的 ProfileID 属性。

例如

```
FBProfilePictureView *profileImage = [[FBProfilePictureView alloc] initWithFrame:frame];
profileImage.profileID = user.id; 
```

它将显示用户的个人资料图像。

您可以在处理程序响应中添加以下代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T11:26:07.560

有用。只需添加

```
[self.view addSubview:profileImage]; 
```

# symfony - 使用 PHPUnit 3.7.7 和 Symfony2 时出错

> ID：12938406
> 
> 赞同：3
> 
> 时间：2012-10-17T15:57:33.750
> 
> 标签：symfony, phpunit, runtime-error, symfony-2.1

全新安装 PHPUnit 3.7.7 和 Symfony2.1.2。当我尝试在作为演示预安装的 Acme 包上运行 PHPUnit 时，我收到以下错误：

```
$ phpunit -c app/
PHPUnit 3.7.7 by Sebastian Bergmann.

Configuration read from /home/kevin/www/diva/app/phpunit.xml.dist

E

Time: 4 seconds, Memory: 7.25Mb

There was 1 error:

1) Acme\DemoBundle\Tests\Controller\DemoControllerTest::testIndex
Symfony\Component\Config\Definition\Exception\InvalidConfigurationException: Unrecognized options "enable" under "framework.profiler"

/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/Config/Definition/ArrayNode.php:278
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/Config/Definition/BaseNode.php:266
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/Config/Definition/ArrayNode.php:270
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/Config/Definition/BaseNode.php:266
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/Config/Definition/Processor.php:35
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/Config/Definition/Processor.php:52
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/DependencyInjection/Extension.php:103
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/DependencyInjection/FrameworkExtension.php:62
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Compiler/MergeExtensionConfigurationPass.php:42
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/DependencyInjection/MergeExtensionConfigurationPass.php:39
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Compiler/Compiler.php:119
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/ContainerBuilder.php:453
/home/kevin/www/diva/app/bootstrap.php.cache:945
/home/kevin/www/diva/app/bootstrap.php.cache:854
/home/kevin/www/diva/app/bootstrap.php.cache:566
/home/kevin/www/diva/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Test/WebTestCase.php:43
/home/kevin/www/diva/src/Acme/DemoBundle/Tests/Controller/DemoControllerTest.php:11

FAILURES!
Tests: 1, Assertions: 0, Errors: 1. 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:53:11.023

删除`framework.profiler`删除`app/config/config_test.yml`错误，但似乎是一个草率的黑客，没有解决根本问题。

编辑：根据官方论坛，它包含在 2.1.2 标准版中可能是一个错误： http: [//forum.symfony-project.org/viewtopic.php?f=32 &t=49451](http://forum.symfony-project.org/viewtopic.php?f=32&t=49451)

# exception - 如何将空值和异常传递给客户端 Spring 集成入站/出站 JMS 网关？

> ID：12938411
> 
> 赞同：1
> 
> 时间：2012-10-17T15:57:53.987
> 
> 标签：exception, null, jms, spring-integration, gateway

我在客户端设置了一个**出****站 JMS 网关，在服务器端设置了一个入站 JMS 网关**。客户端使用这些网关以同步方式调用服务器端的服务。

服务器端服务是一个查找方法，它返回一个找到的对象，或者如果什么都找不到，则返回 null。

问题是不可能将 null 传回给客户端，所以我的问题是：

1.  将 null 传递回客户端的最佳做法是什么？
2.  如果服务器端方法抛出异常，我如何将此异常传递回客户端？

问候，克里斯蒂安·冯·温特-詹森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T10:27:19.730

Spring 还不支持 null 有效负载的想法，但它可以抛出异常。将服务激活器的“requires-reply”属性设置为 true。如果您直接在入站网关上使用调用，那么您需要抛出一个异常，您不能返回 null，因为它会静默返回，如果未指定超时，调用者线程将无限期等待。

例如

如果您使用服务激活器，则通过将“requires-reply”设置为 true，如果生成空回复，spring 集成将抛出ReplyRequiredException，您可以将其发送给客户端调用代码。

要在客户端发送异常，您可以使用以下策略。

在入站网关上配置错误通道。

```
<int-jms:inbound-gateway request-channel="req" reply-channel="reply" error-channel="serverError" /> 
```

在 serverError 通道上添加一个服务激活器以重新抛出。我通常将异常包装在一些常见的异常持有者类中，以便在客户端使用它进行有效负载路由。

```
<int:channel id="serverError" />

<int:service-activator input-channel="serverError"  expression="new package.ExceptionWrapper(payload.cause==null ? payload : payload.cause)" /> 
```

在客户端，使用有效负载路由器，如果它是 ExceptionWrapper 类型，则将其路由到某个通道，例如“errorChannel”，您可以在其中解开它从服务器端抛出的异常。默认情况下，向网关回复通道发送有效负载路由器回复。

```
<int:payload-type-router input-channel="replyRoute" default-output-channel="reply">
  <int:mapping type="package.ExceptionWrapper" channel="errorThrower" />
</int:payload-type-router>

<int:channel id="errorThrower" /> 

<int:service-activator input-channel="errorThrower" ref="exceptionHandler" method="process" /> 
```

# java - 获取某个类别的文档数

> ID：12938412
> 
> 赞同：0
> 
> 时间：2012-10-17T15:57:55.003
> 
> 标签：java, lucene, faceted-search

我使用 Lucene 实现了分面搜索。我有一个文档索引和一个分类索引。然后我为给定的分类级别收集方面。

我的问题是：**如何获得在给定分类法类别中索引的文档数量？**

我认为我的问题很简单，但我在 Lucene 的 API 中找不到任何方法，也没有在 Google 中搜索。`numDocs()`我只找到了如何使用类的方法获取整个索引中的文档数`IndexReader`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:45:42.147

如果索引中的每个类别都有一个术语，也许您可​​以使用类似[TermEnum.docFreq()](http://lucene.apache.org/core/3_6_1/api/all/org/apache/lucene/index/TermEnum.html#docFreq%28%29)的东西？[您可以从IndexReader.terms(Term)](http://lucene.apache.org/core/3_6_1/api/all/org/apache/lucene/index/IndexReader.html#terms%28org.apache.lucene.index.Term%29)获取 TermEnum 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:12:16.243

我对您的索引结构知之甚少，无法为您建议正确的查询，但是如果您执行查询以搜索您类别中的所有文档，则返回的结果集通常会包含总数的计数查询的命中。

例如，如果您使用以下任一方式进行查询：

```
search(Query query, int n)
search(Query query, Filter filter, int n) 
```

然后你会得到一个[TopDocs](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/search/TopDocs.html)对象，你可以从中得到总的命中数：[TopDocs.totalHits](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/search/TopDocs.html#totalHits)。

# solr - 控制 Solrj bean 如何处理空值？

> ID：12938415
> 
> 赞同：0
> 
> 时间：2012-10-17T15:57:57.557
> 
> 标签：solr, solrj

使用 JAXB 和 JSON，我可以在一定程度上控制空值的处理方式，Solrj bean (@Field) 是否有相应的功能？

我想要的是 Solr 多值字段作为空 (size() == 0) 列表而不是 null 读回。

TIA

# progress-4gl - 进度错误：包含 CONTAINS 的无效查询

> ID：12938421
> 
> 赞同：0
> 
> 时间：2012-10-17T15:58:24.840
> 
> 标签：progress-4gl, openedge, progress-db

我在我们的一个应用程序服务器日志中收到错误“包含 CONTAINS 的无效查询”。该服务昨天没有遇到此错误，我不知道我们的代码中可能发生了任何更改。

任何人都可以深入了解在我们的代码之外可能导致此错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:20:41.130

1) CONTAINS 运算符使用单词索引。检查是否为错误查询正确设置了索引。

2) 如果在一个很大的 CHARACTER 字段上定义了单词索引，您可以考虑增加 Stash Area (-stsh) 启动参数的值。

3) 您还可以尝试使用带有 IDXBUILD 或 IDXFIX 限定符的 PROUTIL 实用程序来重建索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:25:25.713

这是由 Progress ABL 还是您的逻辑产生的错误？你有一个进度错误号码吗？

您是否更改了数据库的编码？CONTAINS 运算符依赖于分词规则，如果您更改数据库的编码（例如更改为未定义分词规则的 UTF-8），您可能会遇到 CONTAINS 运算符不再工作而无需更改任何内容代码。如果是这种情况，您必须生成分词规则。但这只是一个猜测。

# php - CakePHP 查询和 JSON 输出 - 改进当前解决方案

> ID：12938422
> 
> 赞同：0
> 
> 时间：2012-10-17T15:58:36.387
> 
> 标签：php, mysql, cakephp, cakephp-2.0

我正在用 CakePHP（最新版本）编写一个标记系统，但与 CakePHP 的其余部分的简单程度相比，我所做的解决方案似乎过于复杂。希望有人可以为我指明正确的方向或帮助我改进当前的解决方案。

我需要以这种格式（JSON）传递给我的视图数据：

```
[{label:'actionscript', count: 14}, {label:'php', count: 2} ... ] 
```

现在我知道以下 SQL 查询为我提供了所需的数据：

```
SELECT tags.name, count(*)
FROM tags
RIGHT JOIN tags_users
ON tags.id=tags_users.tag_id
GROUP BY name"; 
```

所以使用我制作的 CakePHP find 方法：

```
$options = array();
$options['contain'] = '';   
$options['recursive'] =  -1;            
$options['joins'][0]['table'] = 'tags_users';
$options['joins'][0]['type'] = 'RIGHT';
$options['joins'][0]['conditions'] = 'Tag.id = tags_users.tag_id';
$options['fields'] =  array('name', 'COUNT(*) as tag_counter');
$options['group']  =  'Tag.name';
$options['order']  =  'tag_counter DESC';       
$availableTagsArray = $this->User->TagsUser->Tag->find('all', $options); 
```

这给了我一个数组：

```
Array
(
[0] => Array
    (
        [Tag] => Array
            (
                [name] => actionscript
            )

        [0] => Array
            (
                [tag_counter] => 14
            )

    )

[1] => Array
    (
        [Tag] => Array
            (
                [name] => php
            )

        [0] => Array
            (
                [tag_counter] => 2
            )

    )
) 
```

然后我通过以下方式将此数组转换为 JSON：

```
$availableTags = "[";

foreach ($availableTagsArray as $tag) {
        $availableTags .= "{label:'{$tag['Tag']['name']}', count:{$tag[0]['tag_counter']}},";   
    }

$availableTags = substr($availableTags, 0, -1);
$availableTags .= "]";  
$this->set("availableTags", $availableTags); 
```

**[更新]**

经过大量研究并使用这两个答案。我发现有多种方法可以做到这一点，其中包括我原来的解决方案。您还可以使用虚拟字段，然后使用 afterFind 方法并在那里展平结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:03:23.873

您无需编写自己的循环即可从数组中手动​​输出 JSON 字符串。PHP 已经有一个将数组编码为 JSON 的函数：

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

您只需要确保进入的数组具有正确的键，以便正确标记 JSON。

* * *

另请阅读[正确设置模型关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)，然后您可以使用`containable`查找选项中的行为来获取标签，而无需手动指定连接，这通常是混乱和复杂的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:04:50.520

您可以使用[Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)来简化查询，并使用[JSON 视图](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)来简化输出。

# java - 如果在所有可能的情况下如何捕捉？

> ID：12938427
> 
> 赞同：2
> 
> 时间：2012-10-17T15:58:47.477
> 
> 标签：java, regex

我希望找到一个匹配单词所有组合的正则表达式`if`。所以有效的是：

`iF, IF , If and if`

我在这里有一个正则表达式：`[iIfF]*`

尽管它与我想要的匹配，但它也匹配单词`Fi`和其他此类组合。

我在哪里犯错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:02:59.617

由于您似乎正在使用 Java，因此您希望：

```
Pattern p = Pattern.compile("if", Pattern.CASE_INSENSITIVE); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:00:50.147

```
[iI][fF] 
```

括号中的所有内容都可以任意组合。

**EDIT** Java 允许不区分大小写的 RegEx

```
"(?i)if" 
```

就足够了

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T16:02:04.730

这将匹配`iF, IF , If and if`

```
[iI][fF] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T16:03:14.187

我怀疑你想要类似的东西：

```
Pattern pat = Pattern.compile("if", Pattern.CASE_INSENSITIVE); 
```

这是使您的模式在 Java 中不区分大小写的常用方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-17T16:03:34.577

`(?i)`您可以使用标志 使您的正则表达式不区分大小写：

```
String regex = "(?i)if"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T16:01:07.493

~~尝试使用这个：~~

 ~~```
/if/i 
```~~ 

~~最后`i`的使匹配不区分大小写。~~

抱歉——戴上了我的 Perl 帽子。您可以使用不区分大小写的模式：

```
Pattern p = Pattern.compile("if", Pattern.CASE_INSENSITIVE); 
```

或者，更简洁地说：

```
Pattern p = Pattern.compile("(?i)if"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-17T16:06:16.713

我知道您要求使用正则表达式，但是您为什么不使用[equalsIgnoreCase(String) 之](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)类的

```
boolean b = yourString.equalsIgnoreCase("if"); 
```

# mysql - SELECT INTO OUTFILE WITH "WHERE" 语句

> ID：12938430
> 
> 赞同：3
> 
> 时间：2012-10-17T15:58:58.930
> 
> 标签：mysql

我正在尝试通过“SELECT INTO OUTFILE”从表中导出数据库记录。一切正常。但我需要过滤记录，这就是问题所在。这是代码：

```
SELECT * INTO OUTFILE 'file.txt' FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n'
FROM table_name WHERE name LIKE '%John%' AND LENGTH(name) <= 10 ORDER BY name 
```

该语句不起作用，但如果我删除“name LIKE '%John%'”条件，它就会起作用。但是我需要指定这个 LIKE 条件，我该如何完成呢？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:12:02.480

可能是`%`标志的问题。尝试更换

```
WHERE name LIKE '%John%' 
```

和

```
WHERE LOCATE(name, 'John') > 0 
```

# python - Google App Engine 帐户未启用结算功能

> ID：12938432
> 
> 赞同：1
> 
> 时间：2012-10-17T15:59:05.527
> 
> 标签：python, google-app-engine, web-applications, billing

在过去的 3 天里，我经历了 3 次“启用计费”的步骤，每次我在我的 GAE python 应用程序上启动启用计费后，它告诉我计费正在激活，然后我回来，它要求我启用计费......

所以我再次经历这个过程，输入我的信用卡（我尝试过换卡——我的卡在其他地方也可以使用，它们没有任何问题）。

在“激活计费”页面上，它说最多需要 15 分钟，我在其他地方读到激活计费可能需要 30 分钟。

这是一个问题的原因是我的应用程序已上线，但我已达到免费帐户的数据库读取配额。

有谁知道，尤其是谷歌的人，为什么我的应用计费没有启用。我需要尽快解决这个问题，这个应用程序是为客户准备的。我将在我的代码中暂时停止从站点读取数据库，这样人们至少可以访问内容。

真的非常感谢您的帮助！！！

注意 - 我从来没有收到任何收费失败或任何错误...我只是提示再次单击启用计费按钮..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:23:45.667

支持团队可以帮助处理一些与计费相关的请求，但他们需要您的应用程序 ID。请在此处填写表格：http: [//support.google.com/code/bin/request.py ?hl=en&contact_type=cloud_platform_billing&ctx=go](http://support.google.com/code/bin/request.py?hl=en&contact_type=cloud_platform_billing&ctx=go)

# java - Android SQLite 尝试更新一个字段

> ID：12938434
> 
> 赞同：1
> 
> 时间：2012-10-17T15:59:10.190
> 
> 标签：java, android, sqlite

我的代码在下面，但它使我的应用程序崩溃。我对使用 db 还是很陌生，但这似乎是有道理的。有任何迹象表明为什么这不起作用？

```
 public void updateLevel(String level){
             mDb.rawQuery("UPDATE "+ DATABASE_TABLE + " SET " + KEY_CUR_LEVEL + " = " + level + " WHERE " + KEY_NAME + " = Default", null);
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:00:55.100

你`Default`被解释为列名；如果是字符串，则必须使用`'Default'`.

为避免此类格式问题，建议使用参数，在 SQL 命令中以`?`. `rawQuery`它们从（或其他 SQL 函数的类似参数）的第二个参数中的相应条目中获取它们的值。这比放置`'`字符串、记住在字符串中转义`'`以及使用带有控制字符的字符串更容易。

```
mDb.rawQuery("UPDATE "+ DATABASE_TABLE +
             " SET " + KEY_CUR_LEVEL + " = " + level +
             " WHERE " + KEY_NAME + " = ?",
             new String[] { "Default" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:01:14.363

我看到两个问题：

1) 由于 SQL 注入，不鼓励使用 rawQuery。如果可能，请使用[SQLiteDatabase 查询](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)。

2) 如果列是 varchar 类型，值应该用单引号括起来。

例子：

```
mDb.rawQuery("UPDATE "+ DATABASE_TABLE + " SET " + KEY_CUR_LEVEL + " = '" + level + "' WHERE " + KEY_NAME + " = 'Default'", null); 
```

注意：以上查询是手动输入的，可能存在语法错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:12:50.210

我发现使用[更新](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29 "更新")方法不太容易出现人为错误。

```
ContentValues cv = new ContentValues();
cv.put(KEY_CUR_LEVEL, level);

mDb.update(DATABASE_TABLE, cv, "? = ?", new String[] { KEY_NAME, "Default"}); 
```

# objective-c - Apple Mach-O 链接器 - 忽略文件

> ID：12938438
> 
> 赞同：0
> 
> 时间：2012-10-17T15:59:22.023
> 
> 标签：objective-c, xcode, ios6

这可能是一个愚蠢的问题，但我想问一下 xcode 是否显示警告说

```
ignoring file /filepath, file was built for archive which is not the architecture being linked(armv7) 
```

这是否意味着xcode在构建项目时实际上跳过了文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:45:59.963

不，这意味着 GCC 或 Clang（或者更确切地说是它们调用的链接器）在构建项目时会跳过文件。

# java - CORBA ORB 运行时定义本地 IP 接口使用

> ID：12938439
> 
> 赞同：2
> 
> 时间：2012-10-17T15:59:29.137
> 
> 标签：java, solaris, corba

我们有一个现有的应用程序，它设置了一个 CORBA ORB 运行时环境作为客户端。

目前我们没有指定要使用的任何本地接口（IP/以太网），并且运行时似乎在我们的本地机器上获得了一些默认接口。使用的机器是带有 Solaris 操作系统的 Oracle。

这里使用的 ORB 运行环境是 Java 7 JDK 内置的 ORB。

有什么方法可以明确指出应该通过某些属性来使用某个本地 IP 接口`ORB.init(...)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:18:35.287

对于 Oracle JDK 的 ORB，它是

```
 -Dcom.sun.CORBA.ORBServerPort=10023 -Dcom.sun.CORBA.ORBServerHost=1.2.3.4 
```

在命令行或

```
 Properties prop = new Properties();
    prop.put("com.sun.CORBA.ORBServerPort", "10000");
    prop.put("com.sun.CORBA.ORBServerHost", "11.1.1.11");
    ORB orb = ORB.init(args, prop); 
```

如果以编程方式使用。

# php - FPDF 错误：不支持 Alpha 通道：

> ID：12938440
> 
> 赞同：6
> 
> 时间：2012-10-17T15:59:31.817
> 
> 标签：php, html, png, pdf-generation, fpdf

我正在尝试从 HTML（PHP 文件的输出）生成 PDF。

我正在使用 FPDF 生成 PDF。

我有三个 PNG 透明图像（Alpha 通道），它们相互重叠，看起来像一个图像。

FPDF 遇到第一张图像的那一刻，它给了我“FPDF 错误：不支持 Alpha 通道：”

有没有这方面的工作。任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-03T13:31:45.393

FPDF 不支持 alpha 透明度，但它支持索引透明度。因此，只需编辑您的 PNG，以便它使用索引透明度。我正在使用 Fireworks，这是 PNG8 和 PNG24 的导出选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T18:39:44.020

实际上，有一个粉丝制作的扩展程序确实允许 Alpha 通道。试试看，它只是 PHP 代码：[http ://www.fpdf.de/downloads/addons/1091/](http://www.fpdf.de/downloads/addons/1091/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T08:33:38.850

DOMPDF 为我解决了问题。它很好地支持 Alpha 通道图像。它很好地管理了 CSS 浮动。

与非 Alpha 通道图像相比，处理透明 PNG（Alpha 通道图像）需要更多时间。

由于我的 HTML 的大小和图像的数量，我的脚本比我的主机在执行时间方面所允许的要多几秒钟。

通过增加执行时间和 DOMPDF，现在一切都完美无缺。

我希望它对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:05:29.847

如前所述，FPDF 不支持 alpha 通道，因此没有解决方法。

也许您可以渲染单个图像并使用它？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-06T16:15:51.063

从 v1.7 (2011-06-18) 版本开始，它支持 PNG 上的 alpha 通道。[在http://www.fpdf.org/](http://www.fpdf.org/)查看变更日志

所以你应该更新你的 FPDF 版本来解决这个问题。这对我有用。

# java - 如何使用 Json-Simple 从 JSON 解析到 Map 并保留键顺序

> ID：12938442
> 
> 赞同：3
> 
> 时间：2012-10-17T15:59:34.793
> 
> 标签：java, json, json-simple

我正在使用 Json-Simple 使用 Json-Simple lib 编写配置文件，但在将 json 字符串转换为映射时遇到问题。

调试我发现 parse 方法返回一个 Map 对象！但是当我尝试直接转换为 LinkedMap 时，我得到一个 ClassCastException：

```
 String json = aceptaDefault();
 JSONParser parser = new JSONParser();
 Object obj = parser.parse(json);  
 LinkedHashMap map = (LinkedHashMap)obj; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T00:13:55.073

除非您知道底层对象实际上是 LinkedHashMap（或者是扩展 LinkedHashMap 的类的实例），否则您不能只将 Map 转换为 LinkedHashMap。

默认情况下，JSON-Simple 可能在后台使用 HashMap，并且故意不保留原始 JSON 中键的顺序。显然，这个决定是出于性能原因。

但是，你很幸运！有一种解决方法 - 事实证明，您可以在解码（解析）JSON 时向解析器提供自定义 ContainerFactory。

[http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_4__-_Container_factory](http://code.google.com/p/json-simple/wiki/DecodingExamples#Example_4_-_Container_factory)

```
String json = aceptaDefault();
JSONParser parser = new JSONParser();

ContainerFactory orderedKeyFactory = new ContainerFactory()
{
    public List creatArrayContainer() {
      return new LinkedList();
    }

    public Map createObjectContainer() {
      return new LinkedHashMap();
    }

};

Object obj = parser.parse(json,orderedKeyFactory);  
LinkedHashMap map = (LinkedHashMap)obj; 
```

这应该保留原始 JSON 中的密钥顺序。

如果您不关心密钥顺序，则不需要 LinkedHashMap 并且您可能只是打算这样做：

```
String json = aceptaDefault();
JSONParser parser = new JSONParser();
Object obj = parser.parse(json);  
Map map = (Map)obj; 
```

您仍然可能会收到 ClassCastException，但前提是 json 是 list`[...]`而不是 object `{...}`。

# php - 上传图片后添加页面

> ID：12938460
> 
> 赞同：1
> 
> 时间：2012-10-17T16:00:56.667
> 
> 标签：php, html, image, dom

如果图像存在于我服务器上的文件夹中，如何将图像添加到页面？

我正在为我的平面设计工作建立一个投资组合网站；而且我希望能够将图片上传到我服务器上的文件夹并自动添加到页面中，这样我就不必每次想要添加新图片时都对 html 进行物理编辑。

这可能吗？如果是这样，怎么办？我学得很快，所以我真的不在乎它有多复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:06:34.713

你可以使用这样的东西：

```
 <?php

    $files = glob('folder/*.{jpg,png,gif}', GLOB_BRACE);
    foreach($files as $file) {
      echo "<img src='$file'>";
    }

    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:06:43.347

试试这个：

```
$handle = opendir(dirname(realpath(__FILE__)).'/pictures/');
        while($file = readdir($handle)){
            if($file !== '.' && $file !== '..'){
                echo '<img src="pictures/'.$file.'" border="0" />';
            }
        } 
```

这段代码真的很容易理解，我们首先定义一个变量“$handle”，它将包含文件夹绝对路径的句柄（我总是选择绝对路径，因为我觉得它们更安全） dirname(realpath( **FILE** ) ) 返回当前文件 (gallery.php) 的绝对路径，然后我们添加到它的末尾 /pictures/

然后，我们遍历目录中的所有文件，我使用的那个简单的 if 语句是为了防止某些函数返回 . 或 .. 有时作为文件名。然后我们以标准 html 显示图像

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:11:02.427

我会使用这个伪代码：

```
if (file_was_uploaded()) {
    update_page();
} 
```

在`file_was_uploaded`函数中，您放置代码来处理文件上传。如果有（成功的）文件上传，则返回 true。

在`update_page`函数中，您放置代码来处理更新页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:07:37.053

您可以尝试读取文件夹中的文件名，然后在页面上显示每个图像：

```
<?php
$dir_path   = '/images';
$filenames = scandir($dir);
?>

<?php foreach($filenames as $filename): ?>
    <img src="<?=$filename;?>" alt="photo"/> <!-- and other HTML stuff -->
<?php endforeach; ?> 
```

# c# - 有没有办法用测试数据创建一个类型的实例？

> ID：12938466
> 
> 赞同：5
> 
> 时间：2012-10-17T16:01:32.200
> 
> 标签：c#, autofixture, nbuilder

我有一个类型，想用测试数据创建它的一个实例。

我知道像**NBuilder**或**AutoFixture**`<T>`这样的框架可以创建在设计时（ ）已知的类型的实例。这些框架是否能够基于仅在运行时才知道的类型（`Type`）创建实例？

最后我想做类似的事情：

```
var value = Builder.Create(type);
var constant = Expression.Constant(value, type); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:07:22.163

AutoFixture 确实支持这一点。但是，据我所知，没有方便的扩展方法可以做到这一点。

以下通用代码：

```
var value = fixture.CreateAnonymous<MyType>(); 
```

看起来像这样，只有在运行时才知道的类型：

```
var context = new SpecimenContext(fixture.Compose());
var value = context.Resolve(new SeededRequest(typeof(MyType), null)) 
```

# java - HttpSession 和 JSP 属性 - 未刷新（Ajax 调用）

> ID：12938470
> 
> 赞同：1
> 
> 时间：2012-10-17T16:01:41.923
> 
> 标签：java, ajax, google-app-engine, jsp, servlets

我在我的一个 servlet 中得到了这段代码（在 App Engine 上运行）

```
//get Session
User user = (User)req.getSession(true).getAttribute("user");

//set blob key to user
user.setAvatarBlobKey("new value"); 
```

这个 servlet 是通过和 ajax 调用来调用的。

我在我的jsp中得到了以下代码

```
<img src="serve?normal=1&blob-key=${user.avatarBlobKey}" width="144" height="144" alt="xxxx" /> 
```

当我刷新页面时， ${user.avatarBlobKey} 仍然分配给旧值，而不是“新值”。

可能是什么原因？会不会是 App Engine 的原因？

# jquery - 特定类上的 jQuery toggleClass

> ID：12938475
> 
> 赞同：-2
> 
> 时间：2012-10-17T16:01:57.717
> 
> 标签：jquery, toggleclass

我制作了这个 jQuery 代码来切换类以打开和关闭。但是当我单击仪表板导航器时，它也会影响其他类

[这是我的示例代码。](http://jsfiddle.net/efAZU/7/)

JavaScript：

```
$(document).ready(function(){
    $('ul.nav li a#mainnav').click(function(){
        $('ul.nav li ul').toggleClass('opened');
    });
}); 
```

CSS：

```
div#wrapper div#main_sidebar ul.nav li ul.closed{
    height: 0;
    overflow: hidden;
}
div#wrapper div#main_sidebar ul.nav li ul.opened{
    height: auto;
} 
```

HTML：

```
<div id="main_wrapper">
    <div id="wrapper">
        <div id="main_sidebar">
            <ul class="nav">
                <li>
                    <a id="mainnav">Dashboard</a>
                    <ul class="closed opened">
                        <li><a href="#">Menu Manager</a></li>
                        <li><a href="#">Script Pages</a></li>
                        <li><a href="#">Plugin Manager</a></li>
                        <li><a href="#">User Manager</a></li>
                    </ul>
                </li>
                <li>
                    <a id="mainnav">Settings</a>
                    <ul class="closed">
                        <li><a href="#">Post settings</a></li>
                        <li><a href="#">User settings</a></li>
                        <li><a href="#">Permalink Structure</a></li>
                    </ul>
                </li>
                <li>
                    <a>Edit</a>
                    <ul id="main_nav" class="closed">
                        <li><a href="#">Edit Posts</a></li>
                        <li><a href="#">Edit Pages</a></li>
                        <li><a href="#">Edit Links</a></li>
                        <li><a href="#">Edit Menu Items</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:03:26.477

为了仅切换特定列表，请使用[`next()`](http://api.jquery.com/next/)or [`siblings("ul")`](http://api.jquery.com/siblings/)：

```
$("#mainnav").click(function() {
    $(this).next().toggleClass("opened");
});​ 
```

**演示：http:** [//jsfiddle.net/efAZU/10/](http://jsfiddle.net/efAZU/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:06:22.560

`click`单击 mainNav 后，您将使用选择器切换所有这些，而不是在您的函数中尝试这样的操作：

```
$(this).siblings('ul').toggleClass('opened'); 
```

如果你想要幻灯片效果，你可以使用[slideToggle()](https://api.jquery.com/slideToggle/)代替。

# objective-c - UINavigationController 像 music.app 一样的颜色和色调？

> ID：12938484
> 
> 赞同：0
> 
> 时间：2012-10-17T16:02:28.297
> 
> 标签：objective-c, ios, uinavigationbar

如何创建一个与当前音乐应用程序中的 UINavigationController 完全相同的 UINavigationController？

![Music.app 导航栏](../Images/5ec2b2a248306fd6b741f1088ce9bb2b.png)

我试过 ...

```
[[UINavigationBar appearance] setTintColor:[UIColor colorWithRed:0.761 green:0.761 blue:0.761 alpha:1]]; 
```

但这不是我想要的。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:47:08.477

该条使用渐变来创建 z 轴圆角效果，因此您需要一个图案图像，它只需要是您想要的渐变的 4x44 像素条，然后调用`+[UIColor colorWithPatternImage:[UIImage imageNamed:@"myImage"]];`

# asp.net - ASP.NET - 如果条件与 HTML 代码内联

> ID：12938485
> 
> 赞同：0
> 
> 时间：2012-10-17T16:02:28.803
> 
> 标签：asp.net

> **可能重复：**
> [ASP.net 页面中的条件逻辑](https://stackoverflow.com/questions/368169/conditional-logic-in-asp-net-page)

我是 ASP.NET 的新手。

假设我有几个表，有些表我使用 TD 标签将 GridView 和 DetailsView 放在一边。注意这些DetailsView和GridView是没有关系的，就像一键刷新一样，只是显示记录而已。在 DetailsView 中，我还有添加、编辑和删除选项。下面的例子。

```
<form name="form1" runat="server" class="FormDetail">
<table width="80%" align="center" >
    <tr>
        <td width="20%"></td>
        <td width="80%" class="PageTitle"></td>
        <td width="20%">
            <asp:Button runat="server" CommandName="AddNewProposal" ID="AddNewProposal" Text="Create Note" 
            href="ProposalCreateNote.aspx?ProposalID=ProposalID=" 
            title="Create Note" class="button3"/>           
        </td>
    </tr>
</table>   

    <div style="width:40%; margin-right: auto; margin-left: auto;">
        <asp:DetailsView AutoGenerateRows="False" DataKeyNames="ProposedID" DataSourceID="SqlDataSource2"
            HeaderText="Proposal Detail View" ID="DetailsView1" 
            runat="server" Width="100%" validateRequest="false" 
            CssClass="products"
            HeaderStyle-CssClass="header"
            FieldHeaderStyle-CssClass="fieldHeader"
            AlternatingRowStyle-CssClass="alternating"
            RowStyle
            CommandRowStyle-CssClass="command"
            PagerStyle-CssClass="pager"
            >

        <Fields>
            <asp:TemplateField HeaderText="ProposedID" SortExpression="Name" > 
                <ItemTemplate >
                    <asp:Label ID="ProposalID" runat="Server" style="text-align:left;" 
                     Text='<%# Eval("ProposedID")%>' />
                </ItemTemplate>
            </asp:TemplateField>

            <asp:BoundField DataField="MDFName" HeaderText="MDF Name" SortExpression="MDFName" />  

                <asp:TemplateField HeaderText="VendorName">
                    <ItemTemplate>
                        <asp:Label ID="lblVendorName" runat="Server" style="text-align:left;" Text='<%# Eval("VendorName")%>'/>
                    </ItemTemplate>
                    <InsertItemTemplate>
                        <asp:DropDownList id="insertVendorName" datasourceid="VendorSqlDataSource"
                            datatextfield="VendorName" DataValueField="VendorID" 
                            SelectedValue='<%# Bind("VendorID") %>'
                            OnSelectedIndexChanged="ddlVendor_SelectedIndexChanged" 
                            runat="server" AutoPostBack="true">
                            <asp:ListItem Text="Select" Value="-1"></asp:ListItem>  
                        </asp:DropDownList>

                        <asp:SqlDataSource ID="VendorSqlDataSource"  ConnectionString="<%$Connectionstrings:ConnectionString%>"
                            SelectCommand="SELECT VendorID, VendorName from MDF_Vendor"  runat="server">
                        </asp:SqlDataSource>
                    </InsertItemTemplate>

                    <EditItemTemplate>
                        <asp:DropDownList id="updateVendorName" datasourceid="VendorSqlDataSource"  AutoPostBack="true"
                        datatextfield="VendorName"  DataValueField="VendorID"  
                        SelectedValue='<%# Bind("VendorID") %>'     
                        runat="server" 
                        OnSelectedIndexChanged="ddlVendor_SelectedIndexChanged"  />                       
                        <asp:SqlDataSource ID="VendorSqlDataSource"  ConnectionString="<%$Connectionstrings:ConnectionString%>"
                            SelectCommand="SELECT VendorID, VendorName from MDF_Vendor"  runat="server">
                        </asp:SqlDataSource>
                    </EditItemTemplate>
                </asp:TemplateField>

        </Fields>

        </asp:DetailsView>                   
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ConnectionStrings:ConnectionString %>"
            SelectCommand="SELECT p.*
                        , (SELECT VendorName FROM MDF_Vendor WHERE VendorID = p.VendorID) AS VendorName
                        , (SELECT VendorBUName FROM MDF_VendorBU WHERE VendorBUID = p.VendorBUID) AS VendorBUName
                        FROM dbo.MDF_Proposed p Where p.ProposedID = @ProposedID"
            UpdateCommand="UPDATE [MDF_Proposed] SET [VendorID] = @VendorID
                        , [VendorBUID] = @VendorBUID
                        , [MDFSummary] = @MDFSummary
                        , [MDFAmount] = @MDFAmount
                        , [BeginDate] = @BeginDate
                        , [EndDate] = @EndDate
                        WHERE ProposedID = @ProposedID"
            InsertCommand = "INSERT INTO [MDF_Proposed] ([VendorID], [VendorBUID], [MDFName], [BeginDate], [EndDate], [CreatedBy]) 
                             VALUES (@VendorID, @VendorBUID, @MDFName, @BeginDate, @EndDate, '1234') "
            DeleteCommand = "DELETE  [MDF_Proposed]  WHERE ProposedID = @ProposedID"
        >   
            <SelectParameters>
                    <asp:QueryStringParameter Name="ProposedID" QueryStringField="ProposedID"  runat="server" />
            </SelectParameters>                        
            <UpdateParameters> 
            <asp:Parameter Name="ProposedID" Type="Int32" />
            </UpdateParameters>                    
        </asp:SqlDataSource>
    </div>

<hr align="center" width="96%" size="1" color="darkblue" /> 

<!-- //////////////////// NEED TO HIDE THI TABLE WHERE QueryString Mode=Insert ///////////////////// -->
<table  align="center"  width="96%" id="table2" border="0">
    <tr>
         <td class="center TitleSmall">Notes</td>
     </tr>
    <tr>
        <td width="48%">
    <asp:GridView ID="GridView_Note" runat="server"
    AutoGenerateColumns="False" 
        DataKeyNames="ProposedNoteID"
        DataSourceID="dsProposalNote" 

        ShowFooter="true"
        CssClass="mGrid"
        PagerStyle-CssClass="pgr"
        AlternatingRowStyle-CssClass="alt"                      
    >
    <AlternatingRowStyle ForeColor="Black"  BackColor="#F7F6F3"  VerticalAlign="top" />
    <HeaderStyle BackColor="#B5DAFF" Font-Bold="True" HorizontalAlign="center" />
    <PagerStyle BackColor="Gold" ForeColor="White" HorizontalAlign="Center" />    
    <FooterStyle Font-Bold="True" ForeColor="White"  BackColor="" />
        <Columns>

            <asp:BoundField DataField="ProposedNoteID" HeaderText="ID"  ItemStyle-Width="5%" />
            <asp:TemplateField ItemStyle-Width="70%">
                <ItemTemplate>

                    <asp:Label runat="server" DataField="Note" HeaderText="Note" Text='<%#Eval("Note") %>' />

                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="CreatedBy" HeaderText="Created By"  ItemStyle-Width="13%"/>
            <asp:BoundField DataField="CreatedDate" HeaderText="Created Date"  ItemStyle-Width="12%" DataFormatString="{0:dd/MM/yyyy}"/>

            <asp:TemplateField HeaderText="Delete"> 
                <ItemTemplate> 

                    <asp:LinkButton ID="btnDelete" runat="server" CommandName="Delete" Text="Delete" 

                  OnClientClick="return confirm('Are you certain you want to delete this?');"/> 

                </ItemTemplate> 
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
        <asp:sqldatasource ID="dsProposalNote" runat="server"  ConnectionString="<%$ConnectionStrings:ConnectionString %>"
        SelectCommand="Select * from MDF_ProposedNote where ProposedID = @ProposedID"    
        DeleteCommand="DELETE MDF_ProposedNote where ProposedNoteID = @ProposedNoteID"
            >
        <SelectParameters>
            <asp:QueryStringParameter Name="ProposedID" QueryStringField="ProposedID"  runat="server" />
        </SelectParameters>

    </asp:sqldatasource>

    </td>
        <td></td>
        <td width="48%"></td>
    </tr>
</table>
</form> 
```

我想做的是，如果 QueryString 在 URL 上以插入模式发送（Page1.aspx?mode=insert）。在页面加载时，我希望 DetailsView1 处于插入模式，并隐藏 Table2，其中包含 GridView (GridView_Note) 和其他 HTMLcode。

如果这是经典的 ASP，我相信我可以将 queryString 值存储在一个变量中，然后根据 Page.asp?mode=insert 的条件显示之前的 do 和 IF 语句。

任何建议如何在 ASP.NET 中完成此任务？如何存储变量并将其与 HTML 代码内联？如果我让你感到困惑，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:24:46.263

您可以将表格包装在 asp:placeholder 或 asp:panel 中，然后在 Page_Load 事件中查询“mode”键值对的 QueryString 集合并相应地隐藏或显示。

**HTML**

```
<asp:Panel id="pnlNotes" runat="server">
   ... Table and gridView
</asp:Panel> 
```

**代码背后**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
         if (Request.QueryString["mode"] != null && Request.QueryString["mode"] == "Insert")
         {
             pnlNotes.Visible = false;
         }
    }
} 
```

# javascript - Javascript 用户名验证

> ID：12938489
> 
> 赞同：1
> 
> 时间：2012-10-17T16:02:39.000
> 
> 标签：javascript, validation

对于这个作业，我必须编写代码来检查用户名是否有效，如下所示，但是如果前两个警报存在，最后一个警报会如何？

```
 function isUserNameValid(user) {
    "use strict";
    var alert = "";
    if (user.length > 12) {
    alert("cannot be more than 12 letters long");
    return false;
  }
    alert = /^[A-Za-z]+$/;
    if (!alert.test(user)) {
    alert("must only use letters A-Z or a-z");
    return false;
  }
    alert = /^[A-Za-z]+$/;     //<--(this part is the question?)
    if(user.length > 12 || if(!alert.test(user)) {
    alert("must only use letters A-Z or a-z and cannot be more than 12 letters long)";
    return false;
 }
return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:10:03.533

如果如下所示放在第一位，然后放在其余两个之后

```
if(user.length > 12 && if(!a.test(user)) {   
 alert("must only use letters A-Z or a-z and cannot be more than 12 letters long)";   return false; 
} 
```

# linq-to-sql - Linq2SQL 排序

> ID：12938490
> 
> 赞同：1
> 
> 时间：2012-10-17T16:02:45.420
> 
> 标签：linq-to-sql, sql-order-by

我需要通过以下方式订购一些数据

```
DTO{
  id //nullable
  name // not nullable
}

demodata
entry1: Null / "TopItem"
entry2: 1    / "Numer1"
entry2: 3    / "Numer3"
entry2: 2    / "Numer2" 
```

假设我需要将 id 为 null 的项目放在顶部，所有其他条目按列名排序

这可以用 LINQ2SQL 完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:09:21.020

尝试这样的事情：

```
from dto in context.DTO
orderby !dto.id.HasValue, dto.name
select dto 
```

# c# - Dll导入带有drv扩展名的文件

> ID：12938496
> 
> 赞同：1
> 
> 时间：2012-10-17T16:03:13.047
> 
> 标签：c#, dll, dllimport

我发现这句话说：

```
[ DllImport( "winspool.drv",CharSet=CharSet.Unicode,ExactSpelling=false, CallingConvention=CallingConvention.StdCall )]
public static extern long OpenPrinter (string pPrinterName,ref IntPtr phPrinter, int pDefault); 
```

我想知道为什么它没有导入winspool.dll，因为它是一个DLLImport 命令，winspool.dll 和winspool.drv 有什么区别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:08:47.260

文件`drv`只是具有不同扩展名的动态链接库 (DLL)。操作系统也会对它公开的操作有不同的期望。

驱动程序专门用于在软件和硬件之间提供一些接口层，而 DLL 只是类+方法的通用模块。

如果没有编写驱动程序，我将无法提供比这更多的说明。

然而，就您而言，它只是一个您可以加载的 DLL，然后您可以调用其导出的方法。如果你知道签名，那就是。

**更新**

从更多的研究来看 - Winspool.drv 实际上可能被 Windows 封装为一个进程。

至于*为什么*从`.drv`模块而不是`.dll`模块声明导入，我最终无法明确回答，因为编写代码时我不在！但最终，它们不一定是相同的东西，因此不一定有相同的出口等。

# objective-c - 如何显示来自 NSMutableDictionary 的 NSMutableArray 的动态值列表？

> ID：12938498
> 
> 赞同：0
> 
> 时间：2012-10-17T16:03:15.583
> 
> 标签：objective-c, ios, uitableview, nsmutablearray

我有艺术家的表格视图。单击后，我们将进入详细视图，其中应列出他们的所有专辑、发行年份和每张专辑中的歌曲数量。

我有一组字典被传递给包含所有这些信息的详细视图。

显示此列表的最佳/最简单方法是什么？由于它是动态的，我应该遍历数组并创建标签（如果是这样，请给我看一个例子）还是最好在详细视图中创建另一个 uitableview？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:16:20.517

只需将另一个表视图控制器推下去。这就是它的设计目的：显示列表；并且对于未知数量的数据，这非常方便。

如果有关于每张专辑的详细信息的第三个级别，那么这可能最适合静态定义的布局。

# python - 如何获取 GAE 上传的图像大小

> ID：12938500
> 
> 赞同：1
> 
> 时间：2012-10-17T16:03:21.633
> 
> 标签：python, google-app-engine

我使用 GAE 上传图片，并使用 google.appengine.api.images 调整它的大小。但我想上传这张图片的原始大小。我尝试使用 image.width 和 image.height。但是得到了 int是不可调用的错误。所以感谢任何帮助。

请看下面的代码：

```
class PictureUploader( webapp.RequestHandler ):
    WANNA_RATIO_ = 0.833333 # icon width : height | 100 : 120
    MAX_RATIO_ = 0.913043 # 105 : 115
    MIN_RATIO_ = 0.76 # 95 : 125
    def get( self ):
        self.post()

    def post( self ):
        if not check_session(self):
            self.redirect('login', True)

        from google.appengine.api import images   
        image_ = images.Image( self.request.get( 'picture' ) )

        from decimal import Decimal   
        i_width = Decimal( image_.size[0] )
        i_height = Decimal( image_.size[1] )
        w_h_ratio = i_width / i_height 
        if PictureUploader.MIN_RATIO_ > w_h_ratio: # picture too narrow
            h_ratio = i_height/120
            expected_w = Decimal("%.6f"%(i_width/h_ratio))
            image_ = images.resize(image_,expected_w,120)
        elif PictureUploader.MAX_RATIO_ < w_h_ratio: # picture too short
            w_ratio = i_width/100
            expected_h = Decimal("%.6f"%(i_height/w_ratio))
            image_ = images.resize(image_,100,expected_h)
        else:
            image_ = images.resize( image_, 100, 120 )

        models.Life(user = self.session['key'],pictureblob=image_).put() 
```

你看到 image_.size[0]，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:24:32.787

利用

```
image.height
image.width 
```

您收到的错误意味着您正在调用这些属性，例如：

```
image.height() -> wrong
image.width()  -> wrong 
```

# amazon-ec2 - 如何配置 StatsD 和 Graphite 在不同的服务器上运行

> ID：12938502
> 
> 赞同：5
> 
> 时间：2012-10-17T16:03:25.090
> 
> 标签：amazon-ec2, graphite, statsd, graphite-carbon

我对此进行了全面检查，但没有找到任何人谈论如何设置和配置`StatsD`以及`Graphite`如何在单独的服务器上进行通信。我目前所有东西都在一个上运行，但我试图将它们分开但没有成功。

这是我设置的方法`StatsD exampleConfig.js`

```
exampleconfig
{
  graphitePort: 2003
, graphiteHost: "(graphite server IP)"
, port: 8125
} 
```

我能想到在另一个盒子上设置的唯一另一件事是`example-client.py`.

```
currently it says this:
CARBON_SERVER = '127.0.0.1'
CARBON_PORT = 2003 
```

我认为它需要保持本地主机与同一服务器上的耳语或石墨进行通信。我有我的防火墙设置来监听`2003`，并且使用数据包转储服务器确实从 statsd 获取 UDP。它似乎并没有被碳和石墨消耗掉。

我错过了什么？
还有什么推荐用于扩展 statsd 石墨设置？我现在有自己的 statsd 和石墨 + 碳 + 在另一台服务器上窃窃私语。statsd 是最耗电还是石墨盒？我想知道这一点，因为我很快就会每天向服务器发送数百万位数据进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:12:10.337

**修改example-client.py**

如果您想在运行您的石墨/碳实例的不同服务器上运行**example-client.py 。**然后您需要将**CARBON_SERVER**更改为石墨/碳服务器的 IP 地址。

* * *

**网络测试**

您可能还需要进行一些快速测试，以确保进程正在侦听您期望的端口上的更正，并且底层网络将允许此通信。

在运行石墨/碳的服务器上，您应该能够通过**lsof**命令检查服务器是否接受来自本地主机以外的连接

```
$ lsof -Pi:2003
COMMAND    PID    USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
carbon-ca 1596 graphite   7u  IPv4   9517      0t0  TCP *:2003 (LISTEN) 
```

从上面可以看出，我有一个 carbon-cache 进程在 TCP 2003 上的所有接口上运行和监听。

远程机器的一个非常简单的测试是在它正在侦听的端口（默认值：2003）上与石墨/碳服务器进行 telnet 连接，看看是否有效。

**监听套接字示例***

```
$ telnet graphite-server 2003
Trying graphite-server...
Connected to graphite-server.
Escape character is '^]'.
^]
telnet> quit
Connection closed. 
```

**封闭套接字的示例***

```
$ telnet graphite-server 2003
Trying graphite-server...
telnet: Unable to connect to remote host: Connection refused 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:47:37.220

所以我终于发现了问题。我假设 statsd 不仅收到了 UDP，而且还向 carbon 发送了 UDP。在我意识到 statsd 改为发送 TCP 后，我能够调整我的防火墙，现在它工作得很好。我离开了 CARBON_SERVER 作为本地主机。

谢谢！

缩放石墨/碳的最佳方法是什么？我应该将碳与石墨分开吗？那可能吗？碳对处理器的压力是否比石墨更大？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:12:27.190

paperlesspost statsd fork 也可能对您有用：[https ://github.com/paperlesspost/statsd](https://github.com/paperlesspost/statsd)

# exception - 起订量：死还是活？

> ID：12938504
> 
> 赞同：0
> 
> 时间：2012-10-17T16:03:31.857
> 
> 标签：exception, moq

> **可能的重复：**
> [最小起订量项目已经死了吗？我投资学习它是否明智？](https://stackoverflow.com/questions/6454936/is-the-moq-project-dead-is-it-wise-for-me-to-invest-in-learning-it)

该线程是从胎面的衍生产品起订量[项目是死是活？....](https://stackoverflow.com/questions/6454936/is-the-moq-project-dead-is-it-wise-for-me-to-invest-in-learning-it)，并且由于答案已过时并且指的是不存在的 CodePlex 站点，因此我想重新打开该问题。

我已经使用 Moq 很长一段时间了，而且大部分都很满意。问题是，从它的家谷歌代码来看，它自 2011 年 4 月以来一直没有更新，这已经有一段时间了。

现在 .NET 4.5 已经发布，我预计需要进行一些更改。我也遇到了随机错误，我很好奇它们是否会在某个时候得到解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:24:37.960

预编辑您已经找到了答案：

[https://github.com/Moq](https://github.com/Moq)

# bash - 如何查找一行中的每个数字并将平均值存储在单独的每行变量中

> ID：12938508
> 
> 赞同：0
> 
> 时间：2012-10-17T16:03:42.353
> 
> 标签：bash, shell, unix, awk, aix

我刚开始学习shell脚本。

我正在尝试从结构如下的文件中读取：

```
harddrive1 10 20 30 40
harddrive2 20 30 40 50
harddrive3 30 40 50 60 
```

我想以某种方式将每行的平均值保存在一个单独的变量中……只有 3 行 5 列。所以我的输出是：

```
hd_AVG1=20
hd_AVG2=35
hd_AVG3=45 
```

我怎样才能做到这一点？

编辑：我需要将它保存在不同的变量中，以便我可以调用该变量...例如

```
if [[ $hd_AVG1 -eq 20 ]];
    then 
    do something...
elif [[ $hd_AVG2 -gt 40 ]];
    then
    do something...
fi 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:07:10.990

```
$ awk '{print $1"="($2+$3+$4+$5)/4}' file
harddrive1=25
harddrive2=35
harddrive3=45 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:14:11.527

这个 bash 脚本应该做你想做的事。它要求`bc`进行浮点运算，因为 bash 不能自己做。

```
#!/bin/bash
while read -a line ; do
    sum=0
    for ((i=1; i<${#line[@]}; i++)) ; do
        let sum+=line[i]
    done;
    hd[j++]=$(bc -l <<< "$sum/($i-1)")
done < input
echo ${hd[0]} ${hd[1]} ${hd[2]} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T16:49:51.750

使用`Perl`（非常便携）：

```
perl -lane 'print $F[0] . "=" . ($F[1] + $F[2] + $F[3] + $F[4]) / 4' file.txt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T15:54:18.387

使用我刚刚从@steve 学到的数组填充技巧：

```
$ cat file
harddrive1 10 20 30 40
harddrive2 20 30 40 50
harddrive3 30 40 50 60
$
$ hd_AVG=($(awk '{print ($2+$3+$4+$5)/4}' file))
$ echo "${hd_AVG[0]}"
25
$ echo "${hd_AVG[1]}"
35
$ echo "${hd_AVG[2]}"
45 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T17:27:38.037

你可以用 coreutils 和 sed 来做这样的事情：

```
. <(paste -d=                                                   \
      <(cut -d' ' -f1  infile                                 ) \
      <(cut -d' ' -f2- infile  | sed 's/$/ + + + 4 \/ p/' | dc) \
   )
echo $harddrive1 $harddrive2 $harddrive3 
```

输出：

```
25 35 45 
```

### 解释

该`<( )`符号在其中运行命令并通过 fifo 将其输出管道化，因此`paste`可以看到两个管道并将其输出列`=`作为分隔符。

第二个`cut`从文件中获取数字，`sed`将适当的运算符附加到数字并让`dc`我们进行计算。的输入`dc`如下所示：

```
cut -d' ' -f2- infile | sed 's/$/ + + + 4 \/ p/' 
```

输出：

```
10 20 30 40 + + + 4 / p
20 30 40 50 + + + 4 / p
30 40 50 60 + + + 4 / p 
```

`dc`是一个逆波兰计算器；它支持任意精度，但需要被告知使用小数。这将`dc`使用两位小数：

```
cut -d' ' -f2- dims | sed 's/^/2k/; s/$/ + + + 4 \/ p/' 
```

整个命令也包含在 中`<( )`并以 为来源`.`，即变量将在当前环境中可用。

# java - POI - 在 Excel 中打开文件时无法写入文件？

> ID：12938509
> 
> 赞同：3
> 
> 时间：2012-10-17T16:03:50.987
> 
> 标签：java, windows, apache-poi

我是网站上的新手。我尝试在打开 excel 文件时写入它（使用 POI / JAVA）。

`java.io.FileNotFoundException`当我尝试创建文件输出流以写入文件时出现错误。

`FileOutputStream`没用。我收到以下消息：

> 该进程无法访问该文件，因为它正被另一个进程使用。

```
 try {
           FileOutputStream fileOut;
           XSSFWorkbook wb = new XSSFWorkbook(new FileInputStream("Classeur.xlsm")); 
           ...
           ...
           fileOut = new FileOutputStream("Classeur.xlsm");
           wb.write(fileOut);
           fileOut.close();
           }
        catch (FileNotFoundException e){
           e.printStackTrace();
           } 
        catch (IOException e) {
           e.printStackTrace();
           } 
```

有人知道我该如何解决吗？我正在编写一个（POI-Java-Swing）应用程序来动态读取/写入 excel 文件。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:09:13.817

Windows 本身不会让您这样做。恐怕您的代码中没有任何内容可以让您这样做。您需要先在 Excel 中关闭该文件。

编辑 - 我从您的描述中假设您已经在 Excel 中自己打开了文件。你可能不是。然而，其他东西肯定会发生 - 例如，它可能是您的 Java 应用程序的另一个实例。甚至确保诸如 Windows Explorer 之类的东西没有访问/使用该文件，例如检查属性。直到您排除这一点，如前所述，Windows 本身会阻止您访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:09:36.140

某个地方正在运行另一个进程，它正在访问您尝试写入的**确切Excel 文件。**查看是否没有正在运行的 Excel 应用程序（如 Microsoft Excel）锁定了您的文件，或者是否有 Java 进程已经锁定了同一文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:12:39.023

如果文件已打开，您将获得`java.io.FileNotFoundException`. 这就是为什么在写文件之前你必须检查它。

例子 ：

```
File file = new File("workbook.xls");
if(file.canWrite()) {
    System.out.println("File is open");
} else {
    FileOutputStream fileOut = new FileOutputStream(file);
    wb.write(fileOut);
    fileOut.close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:09:27.560

[I can't delete a file in java](https://stackoverflow.com/questions/991489/i-cant-delete-a-file-in-java) topic中讨论的类似问题。也许它可以帮助您找到解决问题的正确方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T18:49:17.987

好吧，我不知道这是否可行，但我想你应该试一试。

当我做和你做类似的事情时，我了解到 excel 公式可以引用另一个 excel 文件的单元格，例如

```
='D:\excelfiles\[Book1.xlsx]Sheet1'!$A$1 
```

那么为什么不更新另一个文件，例如 Book1.xlsx（它已关闭，因此您不会得到异常），并让您打开的文件引用 Book1.xlsx 中单元格的位置

好吧，我在这里期待很多反对票，但我认为值得一试:)

# jquery - 如何使用 jQuery 设置页面上每个表格的第一行的样式

> ID：12938510
> 
> 赞同：2
> 
> 时间：2012-10-17T16:03:57.063
> 
> 标签：jquery, css, html-table

我需要手动设置页面上每个表格的第一行的样式。不幸的是，我正在处理一些旧浏览器，所以想通过 jQuery 来做这件事。

目前我正在使用：

```
$(function() {
 $(".OpenCourse tr:first").addClass("OpenCoursesHeader");
}); 
```

然后添加`.OpenCoursesHeader td {}`到样式。

该类`OpenCoursesHeader`似乎仅适用于第一个表。

任何想法如何让它适用于第二个？如果这样更简单，页面上将始终只有两个表格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:09:38.660

您可以使用`first-child`选择器。 `first`只会选择您正在使用的选择器的第一个元素。

```
$(function() {
 $(".OpenCourse tr:first-child").addClass("OpenCoursesHeader");
}); 
```

但如果您有嵌套表，此解决方案还将将该类添加到第一个`tr`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:06:07.657

您可以使用[`find()`](http://api.jquery.com/find/)，它会工作：

```
$(".OpenCourse").find("tr:first").addClass("OpenCoursesHeader"); 
```

**演示： http:** [//jsfiddle.net/bUqPX/1/](http://jsfiddle.net/bUqPX/1/) --*感谢[Fabrício](https://stackoverflow.com/a/12938549/1249581) :)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:06:20.370

```
$(function() {
    $(".OpenCourse tr:nth-child(1)").addClass("OpenCoursesHeader");
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/bUqPX/)

[`:nth-child() selector`参考](http://api.jquery.com/nth-child-selector/)

或者您可以使用@ComputerArts 回答的[`:first-child`选择器](http://api.jquery.com/first-child-selector/)，这相当于`:nth-child(1)`按照[文档](http://api.jquery.com/first-child-selector/)。

`<thead>`此外，如果您有//元素，这可能无法正常工作，在这种情况下，您还必须在选择器中指定要应用样式的元素`<tbody>`：`<tfooter>`

```
$(".OpenCourse thead:nth-child(1) tr:nth-child(1)").addClass("OpenCoursesHeader"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:08:18.883

```
$(function() {
    $(".OpenCourse").each(function() {
        $("tr:first",this).addClass("OpenCoursesHeader");
    });
}); 
```

试试看，有没有可以查看代码的页面？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T16:08:20.640

首先选择`table`并执行一个`find`on `tr:first`。

下面假设这`OpenCourse`是一个用于收集表格的容器..

```
$(".OpenCourse table").find("tr:first").addClass("OpenCoursesHeader"); 
```

如果`OpenCourse`是表的类别，请尝试[@Vision](https://stackoverflow.com/a/12938544/297641)的答案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T16:06:56.803

尝试这个：

```
$(function() {  
     $("table tr:first").addClass("OpenCoursesHeader"); 
}); 
```

这将适用于页面上的所有表格。希望这可以帮助！！

# php - 根据帖子的年龄限制用户编辑帖子

> ID：12938514
> 
> 赞同：0
> 
> 时间：2012-10-17T16:04:07.297
> 
> 标签：php, wordpress, restrict, capability

在 Wordpress 中，如何限制用户（基于[Capabilities](http://codex.wordpress.org/Roles_and_Capabilities)）在自定义时间后编辑他们发布的帖子。

例如，可以`publish_posts`（作者）的用户**不能**编辑超过 3 天的帖子，而可以`moderate_comments`（编辑）的用户不能编辑超过 20 天的帖子。显然，管理员可以随时编辑。

这样的事情怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:58:49.963

[这是wordpress.stackexchange.com 上一个问题](https://wordpress.stackexchange.com/questions/69577/restrict-users-from-editing-post-based-on-the-age-of-the-post)的副本。我在下面复制了我的答案。

> 我从 Wordpress [user_has_cap filter codex page](http://codex.wordpress.org/Plugin_API/Filter_Reference/user_has_cap)中获取了示例代码并对其进行了修改。将此代码添加到您的主题functions.php：
> 
> ```
> function restrict_editing_old_posts( $allcaps, $cap, $args ) {
> 
>   // Bail out if we're not asking to edit a post ...
>   if( 'edit_post' != $args[0]
>     // ... or user is admin
>     || ! empty( $allcaps['manage_options'] )
>     // ... or user already cannot edit the post
>     || empty( $allcaps['edit_posts'] ) )
>       return $allcaps;
> 
>   // Load the post data:  
>   $post = get_post( $args[2] );
> 
>   // Bail out if the post isn't published:    
>   if( 'publish' != $post->post_status )
>       return $allcaps;
> 
>   $post_date = strtotime( $post->post_date );
>   //if post is older than 30 days ... 
>   if( $post_date < strtotime( '-30 days' )
>     // ... or if older than 4 days and user is not Editor
>     || ( empty($allcaps['moderate_comments']) 
>     && $post_date < strtotime('-4 days') ) ) {
>       $allcaps[$cap[0]] = FALSE;  
>   }
>   return $allcaps;
> }
> add_filter( 'user_has_cap', 'restrict_editing_old_posts', 10, 3 ); 
> ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T16:35:08.490

这应该在插件中工作

```
 function remove_edit() {

    // Adjust 604800 to the number of days in seconds that you want to check against. Posts will only appear if they are newer than that time.//
     if ( !current_user_can( 'manage_options' ) && (current_user_can('edit_posts') && ((current_time(timestamp) - get_the_time('U') - (get_settings('gmt_offset') * 3600) ) < 604800) )
     {
        unset( $actions['edit'] );
     }
   }
   add_filter('post_row_actions','remove_edit',10,1); 
```

来自 wordpress 法典[http://codex.wordpress.org/Roles_and_Capabilities#edit_posts](http://codex.wordpress.org/Roles_and_Capabilities#edit_posts)

```
edit_posts
  Since 2.0
  Allows access to Administration Panel options:
   Posts
   Posts > Add New
   Comments
   Comments > Awaiting Moderation 
```

# javascript - HTML5：在拖动过程中阻止助手自动滚动功能

> ID：12938516
> 
> 赞同：3
> 
> 时间：2012-10-17T16:04:13.220
> 
> 标签：javascript, html, scroll

很难在 Internet 上搜索有关此行为的信息，因为我不知道与之相关的术语。我会尽力描述它。

这是几乎所有支持滚动的浏览器元素中通常发生的行为：如果单击鼠标，然后按住按钮将其拖动到滚动区域*之外*，它将自动向您退出的方向水平或垂直滚动​​。

当您尝试选择页面元素来复制它们时非常有用，但在执行其他自定义操作时必须防止该行为。我试图实现的功能是通过拖动鼠标来拖动页面的能力，就像在 PDF 查看器中突出显示的抓手鼠标工具一样。它用最少的代码工作得很好，但我不知道如何在鼠标离开可滚动区域后禁用这个助手自动滚动。

```
 $("#scroll_area").on('mousedown', function (e) {
        startPos.x = e.clientX;
        startPos.y = e.clientY; 
        drag = true;
    });
    $(document).on('mousemove', function (e) {
        if (drag) {
            // find relative mouse motion
            var diffX = e.clientX - startPos.x;
            var diffY = e.clientY - startPos.y;
            // scroll our body by the relative amount. 
            document.body.scrollTop -= diffY;
            document.body.scrollLeft -= diffX;
            startPos.x = e.clientX;
            startPos.y = e.clientY; // continue updating
            return false; // if dragging do not perform regular things
        }
    });
    $(document).on('mouseup', function (e) {
        // clean up the drag no matter where you let go of the mouse.
        // don't bother evaluating motion here. 
        drag = false;
    }); 
```

我希望 return false 可以解决问题，但事实并非如此。事实上，即使鼠标停止移动（当它被拖出滚动区域时），自动滚动也会继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:28:56.853

你试过preventDefault吗？

```
$("#scroll_area").on('mousedown', function (e) {
    e.preventDefault();
}); 
```

这将防止页面上的所有拖动。然后，您可以仅实现您希望在拖动时发生的功能。

JSFiddle 示例：http: [//jsfiddle.net/nwGaF/1/](http://jsfiddle.net/nwGaF/1/)

# iphone - iPhone 上 SQLite 数据库的光保护

> ID：12938517
> 
> 赞同：3
> 
> 时间：2012-10-17T16:04:13.840
> 
> 标签：iphone, ios, security, sqlite, encryption

这里有很多关于如何保护 iPhone 上的 SQLite 数据库的问题。这些问题主要是关于：

*   防止数据篡改；
*   使用应由用户输入的密码保护用户的个人数据。

但我们有一点不同的情况：

*   我们有一个与 sqlite 数据库一起分发的应用程序；
*   该数据库包含公开可用的信息，但在一个地方收集所有这些信息需要付出一些努力，而且我们不希望竞争对手有一种简单的方式来访问我们的数据；
*   所有数据库内容都可以通过应用程序 UI 获得，基本上应用程序的目的是很好地呈现这些数据。因此可以通过 UI 重新创建数据库，而每条记录大约有 50k 条记录 x 40 个字段，每个版本都会更新，因此手动抓取需要一些时间。也可能使用一些自动屏幕抓取来提取数据，但同样需要一些努力；
*   由于前一点，我们不是在寻找一些工业级的数据保护，我们只是想防止任何人访问越狱设备上的应用程序包并从中复制数据库。

我认为我们需要对列内容进行某种奇特的混淆。可能我们应该使用应用程序独有的某个密钥来加密列，并且其他任何人都无法访问（如果 AppStore 中存在这样的密钥）。

任何建议和最佳实践表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-05T02:13:06.750

只是为了回答我自己的问题——最终我们使用了*SQLCipher*，它运行良好，性能影响可以忽略不计，而破解它可能比屏幕抓取应用程序更难。

# vba - MS Word 将每个页面保存为单独的 PDF 文档，并以文档中的特定文本命名

> ID：12938519
> 
> 赞同：0
> 
> 时间：2012-10-17T16:04:17.240
> 
> 标签：vba, pdf, ms-word

我想转换发票数据的 Microsoft excel 表并填充邮件合并模板，一旦合并，我需要拆分每张发票并将其保存为 pdf。

下面的代码可以满足我的要求，但将它们保存为 1、2、3 等。我想使用的名称是在文档上找到的发票号（每页的前 8 个字符，不包括标题）。

这就是我的代码现在的样子：

```
 Sub BreakOnPage()
     Selection.HomeKey Unit:=wdStory
     ' Used to set criteria for moving through the document by page.
     Application.Browser.Target = wdBrowsePage

     For i = 1 To ActiveDocument.BuiltInDocumentProperties("Number of Pages")

     'Select and copy the text to the clipboard.
     ActiveDocument.Bookmarks("\page").Range.Copy

     ' Open new document to paste the content of the clipboard into.
     Documents.Add
     Selection.Paste
     ' Removes the break that is copied at the end of the page, if any.
     Selection.TypeBackspace
     Selection.HomeKey Unit:=wdStory
     Selection.EndKey Unit:=wdStory
     Selection.TypeBackspace
     Selection.Delete Unit:=wdWord, Count:=1
     Selection.Delete Unit:=wdCharacter, Count:=1

     Dim strInvoiceNumber As String
     Selection.HomeKey Unit:=wdStory
     With Selection.Find
     .ClearFormatting
     Text:="^#^#^#^#^#^#^#^#"
     .Forward = True
     .MatchWildcards = False
     .Execute
     End With

     ' Defines the DocNum

     strInvoiceNumber = Selection.Text

     ' Exports the document to a pdf file and saves in sequence starting at 1 and closes the word document without saving

     ActiveDocument.ExportAsFixedFormat OutputFileName:= _
     "C:\Users\MLock\Documents\MacrosDocs\" & strInvoiceNumber & ".pdf", ExportFormat:= _
     wdExportFormatPDF, OpenAfterExport:=False, OptimizeFor:= _
     wdExportOptimizeForPrint, Range:=wdExportAllDocument, From:=1, To:=1, _
     Item:=wdExportDocumentContent, IncludeDocProps:=True, KeepIRM:=True, _
     CreateBookmarks:=wdExportCreateNoBookmarks, DocStructureTags:=True, _
     BitmapMissingFonts:=True, UseISO19005_1:=False

     ActiveDocument.Close savechanges:=wdDoNotSaveChanges

     ' Move the selection to the next page in the document.
     Application.Browser.Next
     Next i
     ' ActiveDocument.Close savechanges:=wdDoNotSaveChanges
 End Sub 
```

如何在此处设置 PDF 文档的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:34:31.460

因此，您必须在页面上找到发票编号并将其分配给一个变量，然后您可以使用该变量替换 docnum。

进行查找的两种方法是使用 Selection.Find，执行查找，然后将变量分配给 Selection.Text。那可能是最简单的。

您还可以使用正则表达式，捕获反向引用中的前 8 个字符，然后使用它。

如果您需要，我可以澄清其中任何一点，但不确定您的专业水平。

这是一些代码来完成我认为您正在尝试做的事情。我假设 Selection.HomeKey Unit:wdStory 指的是包含发票编号的文档。

```
Sub BreakOnPage()
    Dim strInvoiceNumber as String
    Selection.HomeKey Unit:=wdStory
    With Selection.Find
        .ClearFormatting
        .Text:="^#^#^#^#^#^#^#^#"
        .Forward = True
        .MatchWildcards = False
        .Execute
    End With 
```

现在将选择您的 8 位数发票号码。将变量 strInvoiceNumber 分配给 Selection.Text，如下所示：

```
strInvoiceNumber = Selection.Text 
```

现在在您的 ExportAsFixedFormat 语句中使用 strInvoiceNumber，而不是 DocNum。

祝你好运。

# performance - 最大化 OpenCL 内存输出

> ID：12938520
> 
> 赞同：0
> 
> 时间：2012-10-17T16:04:23.513
> 
> 标签：performance, memory, opencl

使用 OpenCL，我似乎无法从 Radeon 7970 将超过 7MB/秒的数据提取到 i5 Desktop 的主内存中。

```
#include <iostream>
#include <Windows.h>
#include <CL/cl.h>

int main(int argc, char ** argv)
{
    cl_platform_id platform;
    clGetPlatformIDs(1, &platform, NULL);
    cl_device_id device;
    clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, 1, &device, NULL);
    cl_context context = clCreateContext(NULL, 1, &device, NULL, NULL, NULL);
    cl_command_queue queue = clCreateCommandQueue(context, device, 0, NULL);
    const char *source =
    "__kernel void copytest(__global short* dst) {\n"
    "    __local short buff[1024];\n"
    "    for (int i = 0; i < 1024; i++) {\n"
    "        for (int j = 0; j < 1024; j++)\n"
    "            buff[j] = j;\n"
    "        (void)async_work_group_copy(&dst[i*1024], buff, 1024, 0);\n"
    "    }\n"
    "}\n";
    cl_program program = clCreateProgramWithSource(context, 1, &source, NULL, NULL);
    clBuildProgram( program, 1, &device, NULL, NULL, NULL);
    cl_kernel kernel = clCreateKernel( program, "copytest", NULL);
    cl_mem buf = clCreateBuffer(context, CL_MEM_WRITE_ONLY, 1024 * 1024 * 2, NULL, NULL);
    const size_t global_work_size = 1;
    clSetKernelArg(kernel, 0, sizeof(buf), (void*)&buf);
    LARGE_INTEGER pcFreq = {}, pcStart = {}, pcEnd = {};
    QueryPerformanceFrequency(&pcFreq);
    QueryPerformanceCounter(&pcStart);
    clEnqueueNDRangeKernel(queue, kernel, 1, NULL, &global_work_size, NULL, 0, NULL, NULL);
    clFinish(queue);
    QueryPerformanceCounter(&pcEnd);
    std::cout << 2.0 * pcFreq.QuadPart / (pcEnd.QuadPart-pcStart.QuadPart) << "MB/sec";
} 
```

如您所见，它只在一个工作单元上运行。我尝试用分布在多个 (64) 工作单元之间的循环替换 async_work_group_copy() ，但这没有帮助。

有什么方法可以让 Radeon 的内存速度超过 7MB/秒？我对数百 MB/秒感兴趣。英伟达会更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:28:29.187

问题是您只在 GPU 上使用一个线程，导致数千个线程处于空闲状态。在这种情况下，您可以做两件事来帮助您实现更快的速度。

首先，尝试在工作组中使用更多线程：

```
__kernel void copytest(__global short* dst) {
    __local short buff[1024];
    for (int i = 0; i < 1024; i++) {
        for (int j = get_local_id(0); j < 1024; j+= get_local_size(0))
            buff[j] = j;
        barrier(CLK_LOCAL_MEM_FENCE);
        (void)async_work_group_copy(&dst[i*1024], buff, 1024, 0);
    }
} 
```

然后您可以将工作组的大小增加到 256 个左右。

```
const size_t local_work_size = 256;
clEnqueueNDRangeKernel(queue, kernel, 1, NULL, &global_work_size, &local_work_size, 0, NULL, NULL); 
```

其次，您使用的是 GPU，因此您可能不应该只使用一个工作组。您可以使用更多工作组，如：

```
__kernel void copytest(__global short* dst) {
    __local short buff[1024];
    for (int i = get_group_id(0); i < 1024; i += get_num_groups(0)) {
        for (int j = get_local_id(0); j < 1024; j+= get_local_size(0))
            buff[j] = j;
        barrier(CLK_LOCAL_MEM_FENCE);
        (void)async_work_group_copy(&dst[i*1024], buff, 1024, 0);
    }
} 
```

然后你可以增加工作组的数量：

```
const size_t local_work_size = 256;
const size_t global_work_size = local_work_size * 32;
clEnqueueNDRangeKernel(queue, kernel, 1, NULL, &global_work_size, &local_work_size, 0, NULL, NULL); 
```

希望这将有助于加快您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:03:19.143

确保正确分配缓冲区：阅读 NVIDIA OpenCL 编程指南（如果可以找到）以查看分配固定内存。有一个成熟的例子可以让你达到 6GB/s——同样的原则也适用于 AMD。特别是 CL_MEM_ALLOC_HOST_PTR 标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:55:17.410

你在这里并不需要你的'j'循环。async_work_group_copy 双向工作；您可以复制到/从全局和本地空间。

```
//kernel will copy 2MB of short* in memory
__kernel void copytest(__global short* dst) {
  __local short buff[1024];
  for (int i = get_group_id(0); i < 1024; i += get_num_groups(0)) {
    (void)async_work_group_copy(buff, &dst[i*1024], 1024, 0);
    (void)async_work_group_copy(&dst[i*1024], buff, 1024, 0);
  }
} 
```

opencl 1.0 规范说必须有 16kb 或更多的本地内存可供您使用（32kb+ 与 ocl v1.1 或更高版本）。许多设备实际上有 32kb。我建议轮询系统并尽可能多地使用。实际上，您仍然需要为其他目的保存一些本地内存。[参见 clGetDeviceInfo](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clGetDeviceInfo.html) (CL_DEVICE_LOCAL_MEM_SIZE)

```
//using 16kb local memory per work group to copy 2MB...
__kernel void copytest(__global short* dst) {
  __local short buff[16384];
  for (int i = get_group_id(0); i < 64; i += get_num_groups(0)) {
    (void)async_work_group_copy(buff, &dst[i*16384], 16384, 0);
    (void)async_work_group_copy(&dst[i*16384], buff, 16384, 0);
  }
} 
```

如果要做的复制量足够小，您可以通过使用完成工作所需的工作组数量来摆脱“i”循环。这会导致程序集中的分支更少。

```
//using 32kb and 16 work groups to copy 2MB...
__kernel void copytest(__global short* dst) {
  __local short buff[32768];
  int i = get_group_id(0);
  (void)async_work_group_copy(buff, &dst[i*32768], 32768, 0);
  (void)async_work_group_copy(&dst[i*32768], buff, 32768, 0);
} 
```

# xcode - 为 Retina 调整 OSX 应用程序的图像

> ID：12938527
> 
> 赞同：1
> 
> 时间：2012-10-17T16:04:53.507
> 
> 标签：xcode, user-interface, graphics, retina-display

我们有一个正在开发的应用程序，目前仅使用标准显示分辨率。我们如何修改 Mac Retina 显示器的 @2x 图像？

假设我有一个 50 x 100 像素的按钮。我可以将尺寸加倍并添加@2x 扩展名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:12:05.917

OS X 上的 Retina 图像的行为方式与它们在 iOS 中的行为方式相同。所以，是的，重绘（而不是放大）您的图像，并使用它们的 @2x 扩展名重新保存它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:34:58.333

> 假设我有一个 50 x 100 像素的按钮。我可以将尺寸加倍并添加@2x 扩展名吗？

您至少应该找到原始的高分辨率艺术品，然后将其缩小到目标尺寸。在某些情况下，您还需要一个稍微不同（例如更详细）的高分辨率图像。

应该避免简单地升级现有资源；最终绘制时它什么也做不了（除了更大的应用程序和更多的内存消耗）。也就是说，它不会是“高分辨率”，它只是一个更大的图像，对最终用户来说看起来是一样的——重新缩放只是发生在不同的时间点，结果都会*被*像素化（或同样模糊，取决于它是如何重新缩放的）。我能想到你会在哪里这样做的唯一原因是，如果你丢失（或从未有过更大的）原始总部艺术品，并且想要使用使用高质量缩放器重新缩放的重新缩放图像 - 在事件中绘制这些图像时，您也无需重新缩放。

# json - JSON/JSONP/PHP 头痛 D：

> ID：12938528
> 
> 赞同：0
> 
> 时间：2012-10-17T16:04:59.663
> 
> 标签：json, cross-domain, jsonp, same-origin-policy, cross-domain-policy

好的，所以基本上我要做的是绕过 javascript 的跨域/同源限制，以便我们可以在客户网站的底部包含一个标语（托管在我们的服务器上并且可以在一个地方进行更新）更新一百万个网站）。我想用 JSONP 在 jq 中做到这一点。这是进入显示标语的页面的代码：

```
<div id="tagline"></div>
<script type="text/javascript">
 $(document).ready(function() {
  var url =  "http://www.mydomain2.com/api/tagline.php";
   $.getJSON(url + "?callback=taglineDisp", null, function(taglineDisp) {
    for(i in taglineDisp) {
     payload = taglineDisp[i];
     $("#tagline").append(payload.text);
    }
   });
 });
</script> 
```

以下是 tagline.php 的内容：

```
<?php header('Access-Control-Allow-Origin: *'); ?>
<?PHP echo "taglineDisp({\"tagline\" : \"Powered by <strong><a href='http://www.mydomain2.com'>Company Name</a></strong>\"}); "; 
```

最初 tagline.php 不是动态的，我只是在 tagline.json 中有这个：

```
taglineDisp({"tagline" : "Powered by <strong><a href='http://www.mydomain2.com'>Company Name</a></strong>"}); 
```

这是正确的，对吧？JSONP 需要有 taglineDisp(); 包裹在 JSON 对象周围，是吗？

起初我遇到了典型的来源限制错误，但是当我更改为 .php 并添加“Access-Control-Allow-Origin：*”标头指令时，我现在得到：

```
Given URL is not allowed by the Application configuration.: One or more of the given URLs is not allowed by the App's settings.  It must match the Website URL or Canvas URL, or the domain must be a subdomain of one of the App's domains. oauth:1 
```

我希望我的描述和代码示例没问题。我已经阅读了关于 bajillion JSON 文章（在 SO 和其他站点上——IBM 实际上也有一些很棒的 JSON 资源），但我仍然不知道我哪里出错了。我主要是一个 jq 菜鸟。:\

所有这些工作都值得吗？iframe 会不会让我头疼？我认为 jq 可能会更好地实现跨浏览器兼容性，但代价是一些额外的资源开销。:|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-27T06:45:19.850

您正在使用 $.getJSON，因此您可以设置一个调用`taglineDisp(json)`. 但是如果你想使用 JSONP，Javascript 方法有点不同！如果你想动态加载你的 JSONP，你应该这样做：

```
function load_script(url) {
  var s = document.createElement('script'); 
  s.src = url;
  document.body.appendChild(s);
}

function load_scripts() {
  load_script('http://www.mydomain2.com/api/tagline.js');
}

window.onload=load_scripts; 
```

如果你想伪造一个复杂的 JSONP，你也可以使用：[Simple JSON for PHP](https://github.com/AlexisTM/Simple-Json-PHP)。

```
include('includes/json.php');

$Json = new json('callback', 'taglineDisp'); 

$Json->add('status', 200);
$Json->add('message', success);
$Json->add('tagline', "Powered by <strong><a href='http://www.mydomain2.com'>Company Name</a></strong>");

$Json->send(); 
```

更新 ：

您可以通过 getJSON 使用 JSONP，只需发送没有回调的 JSON

```
$.getJSON(
    'http://www.mydomain2.com/api/tagline.js',
    {'callback': 'process'}
); 
```

# objective-c - 我们可以向 UIPageViewController 添加多个 viewController 吗？

> ID：12938530
> 
> 赞同：0
> 
> 时间：2012-10-17T16:05:01.057
> 
> 标签：objective-c, xcode4.3, uipageviewcontroller

我正在寻找 UIPageViewController 并找到了这个： http: [//www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/](http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/)

这很可疑。为什么它最初插入一个只有 1 个 viewController 的数组。

所以我做了一个程序试图插入2-10。如果我最初只插入 1 个 viewController，该程序就可以工作。但是，如果我尝试插入 2-10，它就不起作用。

```
 [self.containerView addSubview:self.pageViewController.view];
    self.pageViewController.view.frame = self.containerView.bounds;

    NSMutableArray * arrayOfControllers=[NSMutableArray array];
    for (int i = 0; i<1 ; i++) { //if I set this into for (int i = 0; i<10 ; i++) { instead it wouldn't work
        BlankImageViewController *contentViewController = [[BlankImageViewController alloc] init];
        contentViewController.view.frame = self.containerView.bounds;
        [arrayOfControllers addObject:contentViewController];
        //contentViewController.labelContents = [self.modelArray objectAtIndex:0];
    }

    NSArray *viewControllers = @[arrayOfControllers.lastObject];
    viewControllers = [NSArray arrayWithArray:arrayOfControllers]; //If this line is commented it works
    [self.pageViewController setViewControllers:viewControllers
                                      direction:UIPageViewControllerNavigationDirectionForward
                                       animated:YES
                                     completion:nil]; 
```

如果 viewControllers 只有一个元素，它就可以工作。self.pageViewController.viewControllers 将填充该 1 元素。

如果 viewControllers 有多个元素，那么事情就不再起作用了。self.pageViewController.viewControllers 将有空数组。

我想知道为什么。我是 UIPageViewController 的新手。如果你只能填充一个 UIViewController 为什么要一个数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:26:39.773

如果您一次只显示一页，则有一个视图控制器。如果一次显示两个页面，则有两个视图控制器。

顺便说一句，我的书教你开始使用 Page View Controller：

[http://www.aeth.com/iOSBook/ch19.html#_page_view_controller](http://www.apeth.com/iOSBook/ch19.html#_page_view_controller)

但我还没有为 iOS 6 和新的滚动过渡样式更新它。

# c# - 如何使用 .net api 获取 wordpress 的内容？

> ID：12938533
> 
> 赞同：0
> 
> 时间：2012-10-17T16:05:04.470
> 
> 标签：c#, .net, wordpress, api

我正在使用[joeblogs](https://github.com/alexjamesbrown/JoeBlogs)作为 .net 的 wordpress api

我使用该代码获取有关我的博客的信息

```
 WordPressWrapper wrapper = new WordPressWrapper("http://www.xxxx.org/xmlrpc.php", "xxx", "yyyyy");
  var post = new Post()
           {
               Body = "This is a test body",
               Categories = new string[] { "1", "2", "3" },
               Tags = new string[] { "tag one", "another tag", "one more" },
               Title = "Test post "                         
           };

           int idsi= wrapper.NewPost(post, true);
          IEnumerable<Post> recentPosts = wrapper.GetRecentPosts(100);
           foreach (Post recentPost in recentPosts)
           {

           }

           var userBlogs = wrapper.GetUserBlogs();
           var tags = wrapper.GetTags();
           var categories = wrapper.GetCategories();

           var authors = wrapper.GetAuthors(); 
```

该代码没有问题。但是例如我想获取另一个 wordpress 网站的内容.. 例如这个网站：[http](http://en.blog.wordpress.com/) ://en.blog.wordpress.com/和主题 [http://en.blog.wordpress.com/2012/10/11 /new-themes-babylog-and-delicacy/](http://en.blog.wordpress.com/2012/10/11/new-themes-babylog-and-delicacy/)

它被称为喂养。这是这个主题的馈送链接

[http://en.blog.wordpress.com/2012/10/11/new-themes-babylog-and-delicacy/feed/](http://en.blog.wordpress.com/2012/10/11/new-themes-babylog-and-delicacy/feed/)

但它没有主题的内容。我可以用 blogger api 做到这一点，因为它支持提供内容。如何使用 .net 的 api 获取主题的内容？

ps：我不想使用该api的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:15:22.047

JoeBlogs 包装器用于支持 XML RPC Api（metaweblog 或 wordpress）允许的操作

您需要处理 RSS 提要以支持您提供的 URL。
看到这篇文章：[https ://stackoverflow.com/questions/87278/what-is-the-best-net-library-to-handle-feeds-atomrss](https://stackoverflow.com/questions/87278/what-is-the-best-net-library-to-handle-feeds-atomrss)

如果做不到这一点，您可以为另一个站点实例化一个新的 WordpressWrapper 吗？

资料来源：我是[JoeBlogs的作者](http://github.com/alexjamesbrown/joeblogs)

# ios - 带有视频背景和绘画叠加性能问题的完整视频屏幕捕获

> ID：12938545
> 
> 赞同：5
> 
> 时间：2012-10-17T16:06:10.023
> 
> 标签：ios, ipad, core-graphics, avfoundation

长时间的stackoverflow阅读器，第一次海报。

我正在尝试创建一个名为**CloudWriter**的 iPad 应用程序。该应用程序的概念是绘制您在云中看到的形状。下载应用程序后，在启动**CloudWriter**时，用户将看到一个实时视频背景（来自后置摄像头），其顶部有一个 OpenGL 绘图层。用户将能够打开应用程序，将 iPad 指向天空中的云，然后在显示屏上绘制他们所看到的内容。

该应用程序的一个主要功能是让用户记录会话期间显示器上发生的情况的视频屏幕截图。实时视频源和“绘图”视图将成为平面（合并）视频。

关于目前如何运作的一些假设和背景信息。

*   使用 Apple 的 AVCamCaptureManager（[AVCam](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)示例项目的一部分）作为大部分与相机相关的代码的基础。
*   **使用AVCaptureSessionPresetMedium**作为预设来初始化 AVCamCapture 会话。
*   开始通过 videoPreviewLayer 将摄像头馈送作为背景输出。
*   使用允许使用 openGL 进行“绘图”（指画风格）的视图覆盖该实时 videoPreviewLayer。“绘图”视图背景是 [UIColor clearColor]。

在这一点上，想法是用户可以将 iPad3 相机对准天空中的一些云并绘制他们看到的形状。此功能完美无缺。当我尝试对用户会话进行“平面”视频屏幕捕获时，我开始遇到性能问题。生成的“平面”视频将使相机输入与用户绘图实时叠加。

与我们正在寻找的功能相似的应用程序的一个很好的例子是[Board Cam](https://itunes.apple.com/us/app/board-cam-standard-live-exhibitions/id443410754?mt=8)，可在 App Store 中找到。

要启动该过程，视图中始终可见一个“记录”按钮。当用户点击录制按钮时，期望在再次点击录制按钮之前，会话将被录制为“平面”视频屏幕截图。

当用户点击“记录”按钮时，代码中会发生以下情况

*   **AVCaptureSessionPreset**从**AVCaptureSessionPresetMedium**更改为**AVCaptureSessionPresetPhoto**，允许访问

    ```
    - (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
    ```

*   **isRecording**值设置为**YES**。
*   didOutputSampleBuffer 开始获取数据并从当前视频缓冲区数据创建图像。它通过调用

    ```
    - (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer 
    ```

    *   self.currentImage 设置为此
*   应用程序根视图控制器开始覆盖 drawRect 以创建平面图像，用作最终视频中的单个帧。

*   该帧被写入平面视频

为了创建一个平面图像，用作单独的帧，在根 ViewController 的 drawRect 函数中，我们抓取 AVCamCaptureManager 的**didOutputSampleBuffer**代码接收到的最后一帧。也就是下面

```
- (void) drawRect:(CGRect)rect {

    NSDate* start = [NSDate date];
    CGContextRef context = [self createBitmapContextOfSize:self.frame.size];

    //not sure why this is necessary...image renders upside-down and mirrored
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, self.frame.size.height);
    CGContextConcatCTM(context, flipVertical);

    if( isRecording)
        [[self.layer presentationLayer] renderInContext:context];

    CGImageRef cgImage = CGBitmapContextCreateImage(context);
    UIImage* background = [UIImage imageWithCGImage: cgImage];
    CGImageRelease(cgImage);

    UIImage *bottomImage = background;

    if(((AVCamCaptureManager *)self.captureManager).currentImage != nil && isVideoBGActive )
    {

        UIImage *image = [((AVCamCaptureManager *)self.mainContentScreen.captureManager).currentImage retain];//[UIImage
        CGSize newSize = background.size;
        UIGraphicsBeginImageContext( newSize );
        // Use existing opacity as is
        if( isRecording )
        {
            if( [self.mainContentScreen isVideoBGActive] && _recording)
            {
                [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
            }
            // Apply supplied opacity

            [bottomImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:1.0];

        }
        UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

        UIGraphicsEndImageContext();

        self.currentScreen = newImage;

        [image release];
    }

    if (isRecording) {
        float millisElapsed = [[NSDate date] timeIntervalSinceDate:startedAt] * 1000.0;
        [self writeVideoFrameAtTime:CMTimeMake((int)millisElapsed, 1000)];
    }

    float processingSeconds = [[NSDate date] timeIntervalSinceDate:start];
    float delayRemaining = (1.0 / self.frameRate) - processingSeconds;

    CGContextRelease(context);

    //redraw at the specified framerate
    [self performSelector:@selector(setNeedsDisplay) withObject:nil afterDelay:delayRemaining > 0.0 ? delayRemaining : 0.01];  
} 
```

**createBitmapContextOfSize**如下

```
- (CGContextRef) createBitmapContextOfSize:(CGSize) size {
    CGContextRef    context = NULL;
    CGColorSpaceRef colorSpace = nil;
    int             bitmapByteCount;
    int             bitmapBytesPerRow;

    bitmapBytesPerRow   = (size.width * 4);
    bitmapByteCount     = (bitmapBytesPerRow * size.height);
    colorSpace = CGColorSpaceCreateDeviceRGB();
    if (bitmapData != NULL) {
        free(bitmapData);
    }
    bitmapData = malloc( bitmapByteCount );
    if (bitmapData == NULL) {
        fprintf (stderr, "Memory not allocated!");
        CGColorSpaceRelease( colorSpace );
        return NULL;
    }

    context = CGBitmapContextCreate (bitmapData,
                                     size.width ,
                                     size.height,
                                     8,      // bits per component
                                     bitmapBytesPerRow,
                                     colorSpace,
                                     kCGImageAlphaPremultipliedFirst);

    CGContextSetAllowsAntialiasing(context,NO);
    if (context== NULL) {
        free (bitmapData);
        fprintf (stderr, "Context not created!");
        CGColorSpaceRelease( colorSpace );
        return NULL;
    }

    //CGAffineTransform transform = CGAffineTransformIdentity;
    //transform = CGAffineTransformScale(transform, size.width * .25, size.height * .25);
    //CGAffineTransformScale(transform, 1024, 768);

    CGColorSpaceRelease( colorSpace );

    return context;
} 
```

**- (void)captureOutput:didOutputSampleBuffer fromConnection**

```
// Delegate routine that is called when a sample buffer was written
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{

    // Create a UIImage from the sample buffer data
    [self imageFromSampleBuffer:sampleBuffer];
} 
```

**- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer**下面

```
// Create a UIImage from sample buffer data - modifed not to return a UIImage *, rather store it in self.currentImage
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer
{

    // unlock the memory, do other stuff, but don't forget:

    // Get a CMSampleBuffer's Core Video image buffer for the media data
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    // Lock the base address of the pixel buffer
    CVPixelBufferLockBaseAddress(imageBuffer, 0);

   // uint8_t *tmp = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);
    int bytes = CVPixelBufferGetBytesPerRow(imageBuffer); // determine number of bytes from height * bytes per row
    //void *baseAddress = malloc(bytes);
    size_t height = CVPixelBufferGetHeight(imageBuffer);     
    uint8_t *baseAddress = malloc( bytes * height );
    memcpy( baseAddress, CVPixelBufferGetBaseAddress(imageBuffer), bytes * height );
    size_t width = CVPixelBufferGetWidth(imageBuffer);

    // Create a device-dependent RGB color space
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    // Create a bitmap graphics context with the sample buffer data
    CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8,
                                                 bytes, colorSpace, kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedFirst);

    // CGContextScaleCTM(context, 0.25, 0.25); //scale down to size
    // Create a Quartz image from the pixel data in the bitmap graphics context
    CGImageRef quartzImage = CGBitmapContextCreateImage(context);
    // Unlock the pixel buffer
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    // Free up the context and color space
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);
    free(baseAddress);

    self.currentImage = [UIImage imageWithCGImage:quartzImage scale:0.25 orientation:UIImageOrientationUp];

    // Release the Quartz image
    CGImageRelease(quartzImage);

    return nil; 
} 
```

**最后，我使用writeVideoFrameAtTime:CMTimeMake**将其写入磁盘，代码如下：

```
-(void) writeVideoFrameAtTime:(CMTime)time {
    if (![videoWriterInput isReadyForMoreMediaData]) {
        NSLog(@"Not ready for video data");
    }
    else {
        @synchronized (self) {
            UIImage* newFrame = [self.currentScreen retain];
            CVPixelBufferRef pixelBuffer = NULL;
            CGImageRef cgImage = CGImageCreateCopy([newFrame CGImage]);
            CFDataRef image = CGDataProviderCopyData(CGImageGetDataProvider(cgImage));

            if( image == nil )
            {
                [newFrame release];
                CVPixelBufferRelease( pixelBuffer );
                CGImageRelease(cgImage);
                return;
            }

            int status = CVPixelBufferPoolCreatePixelBuffer(kCFAllocatorDefault, avAdaptor.pixelBufferPool, &pixelBuffer);
            if(status != 0){
                //could not get a buffer from the pool
                NSLog(@"Error creating pixel buffer:  status=%d", status);
            }

            // set image data into pixel buffer
            CVPixelBufferLockBaseAddress( pixelBuffer, 0 );
            uint8_t* destPixels = CVPixelBufferGetBaseAddress(pixelBuffer);
            CFDataGetBytes(image, CFRangeMake(0, CFDataGetLength(image)), destPixels);  //XXX:  will work if the pixel buffer is contiguous and has the same bytesPerRow as the input data

            if(status == 0){
                BOOL success = [avAdaptor appendPixelBuffer:pixelBuffer withPresentationTime:time];
                if (!success)
                    NSLog(@"Warning:  Unable to write buffer to video");
            }

            //clean up
            [newFrame release];
            CVPixelBufferUnlockBaseAddress( pixelBuffer, 0 );
            CVPixelBufferRelease( pixelBuffer );
            CFRelease(image);
            CGImageRelease(cgImage);
        }

    }

} 
```

一旦 isRecording 设置为 YES，iPad 3 的性能就会从大约 20FPS 变为可能 5FPS。使用**Insturments**，我可以看到以下代码块（来自**drawRect:**）是导致性能下降到无法使用的水平的原因。

```
 if( _recording )
        {
            if( [self.mainContentScreen isVideoBGActive] && _recording)
            {
                [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
            }
            // Apply supplied opacity

            [bottomImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:1.0];

        } 
```

我的理解是，因为我正在捕获全屏，我们失去了“drawInRect”应该提供的所有好处。具体来说，我说的是更快的重绘，因为理论上，我们只更新显示的一小部分（在 CGRect 中传递）。同样，捕获全屏，我不确定**drawInRect**是否能提供几乎一样多的好处。

为了提高性能，我想如果我缩小**imageFromSampleBuffer**提供的图像和绘图视图的当前上下文，我会看到帧速率增加。不幸的是，CoreGrapics.Framework 不是我过去使用过的东西，所以我不知道我是否能够有效地将性能调整到可接受的水平。

任何 CoreGraphics 大师有意见吗？

此外，某些代码的 ARC 已关闭，分析器显示有一次泄漏，但我认为这是误报。

即将推出，**CloudWriter** ™，**天空**无限！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:55:01.813

如果您想要良好的录制性能，您将需要避免使用 Core Graphics 重绘事物。坚持纯 OpenGL ES。

您说您已经在 OpenGL ES 中完成了手指绘画，因此您应该能够将其渲染为纹理。实时视频馈送也可以定向到纹理。从那里，您可以根据手指绘画纹理中的 Alpha 通道对两者进行叠加混合。

使用 OpenGL ES 2.0 着色器很容易做到这一点。事实上，如果您从绘画代码中提供渲染纹理，我的[GPUImage](https://github.com/BradLarson/GPUImage)开源框架可以处理其中的视频捕获和混合部分（请参阅 FilterShowcase 示例应用程序以获取叠加在视频上的图像示例）。您必须确保绘画使用的是 OpenGL ES 2.0，而不是 1.1，并且它与 GPUImage OpenGL ES 上下文具有相同的共享组，但我将在 CubeExample 应用程序中展示如何做到这一点。

我还通过使用可用的纹理缓存（在 iOS 5.0+ 上）以高性能方式在 GPUImage 中为您处理视频录制。

通过使用类似我的框架并保持在 OpenGL ES 中，您应该能够以稳定的 30 FPS 录制 720p 视频 (iPad 2) 或 1080p 视频 (iPad 3) 的这种混合。

# java - Java 项目和 git 存储库

> ID：12938547
> 
> 赞同：0
> 
> 时间：2012-10-17T16:06:15.983
> 
> 标签：java, git, class, jar, package

我正在做两个项目。其中一个是一个库，其中包含一些类，例如`Neuron.java`、`ANN.java`等。另一个是一个可视化程序，它使用这些类并运行一些模拟，然后显示结果。

我打算让这两个项目具有不同的名称并位于不同的 git 存储库中。但是，有一个问题。我所有的项目目录（我计划在其中保存`.git/`目录、文档、类和`.jar`所有类的文件）都位于`com/yannbane/`.

如果我将我的类声明为属于`com.yannbane.library`包（例如），如果下载 repo 的人没有相同的文件夹结构，他将如何使用该库？

`com/yannbane`简单地放弃并将所有项目保存在完全独立的目录中并属于它们自己的独立包对我来说会更容易吗？如果这样做，我将不得不`.jar`自己在项目之间共享库文件，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:15:56.597

您的代码的所有包结构都应该在存储库中。

您不需要使用 Maven 或 IDE（Netbeans、Eclipse），但您可以使用相同类型的结构来组织您的代码。

我会有类似的东西：

```
Library/
        .git/
        src/
            com/
                yanbanne
        libs/
             dependencyL1.jar
             dependencyL2.jar
        dist/
             library.jar
             library.doc

Visualization/
              .git/
              src/
                  com/
                      yanbanne
              libs/
                   dependencyV1.jar
                   dependencyV2.jar
                   library.jar
              dist/
                   visualization.jar
                   visualization.doc 
```

`lib`可以使用 Maven 或 Ivy 等工具省略这些文件夹。复制`library.jar`到*Visualization*的依赖关系可以通过在 IDE 中建立项目之间的依赖关系来自动完成，但这是基本思想。

# c# - 使用 FileStream 读取 zip 文件，然后使用 CopyTo 损坏文件

> ID：12938557
> 
> 赞同：2
> 
> 时间：2012-10-17T16:06:42.477
> 
> 标签：c#, hex, filestream

嗨，我正在从用户的计算机中读取文件，然后使用特定的网络凭据将其写入网络共享，这会损坏一小部分文件。当我在十六进制编辑器中打开文件时，第一行的十六进制不同

```
Header:    00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f
Good File: 50 4b 03 04 14 00 08 00 00 00 37 57 51 41 6f 61
Bad File:  50 4b 03 04 14 00 08 00 00 00 b7 56 51 41 6f 61 
```

0a 和 0b 列的差异存在于整个文件中，

如果我以错误的方式解决这个问题，请务必纠正我，或者如果它只是一些更好的小东西。任何帮助深表感谢。我正在使用的代码如下

```
var fileStream = 
    new FileStream(source, FileMode.Open, FileAccess.Read, FileShare.None);

var impersonationContext =
    new WrapperImpersonationContext("myDomain", "myname", "myPass");

        impersonationContext.Enter();

        try
        {
            using (Stream file = File.OpenWrite(destination))
            {
                fileStream.CopyTo(file);
            }
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
        finally
        {
            impersonationContext.Leave();

            if(fileStream != null)
            {
                fileStream.Close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:32:12.920

`FileStream.CopyTo()`会将 n 个字节写入目标文件，但不会擦除先前存在的目标文件的末尾。打开输出流`FileMode.Create`应该保证一个精确的副本。

最后调用`file.SetLength(file.Position);`也可能有效，但我不确定如何可靠......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:53:19.557

您正在查看 .zip 文件头。可识别的是“PK”，这是发明该格式的人 Phil Katz 的首字母。标头格式[在此处记录](http://en.wikipedia.org/wiki/Zip_%28file_format%29#File_headers)。差异发生在偏移量 10。这是“文件最后修改日期”。具有不同修改日期的文件并不神秘，也不能轻易解释问题。

# java - 我怎样才能让这个 switch 语句使用扫描仪工作？

> ID：12938563
> 
> 赞同：6
> 
> 时间：2012-10-17T16:06:57.903
> 
> 标签：java, string, switch-statement, java.util.scanner, phonetics

我正在尝试编写一个程序，它将字母表中的任何字母（大写或小写）转换为 Phontic 字母表。例如，如果我输入“A”或“a”，我的程序会给我（将其更改为）“Alpha”。我对这个和 switch 语句做了很多研究，但我一直卡住。我意识到我不能在扫描仪中使用“char”。但是，当我将 'char' 更改为 'String' 时，我的 switch 语句会变得混乱（特别是我的代码中的*toUpperCase*有下划线。我看不到我的错误。这是我到目前为止所做的：

```
import java.util.Scanner;
public class PhoneticTranslate {
public static void main(String[] args) {

char letter;
String phonetic;

Scanner kb = new Scanner(System.in);

System.out.print("Please enter a letter: ");
letter = kb.next();

switch(Character.toUpperCase(letter))
{
case 'A':
    phonetic = "Alpha";
break;
case 'B':
    phonetic = "Bravo";
    break;
case 'C':
    phonetic = "Charlie";
    break;
case 'D': 
    phonetic = "Delta";
    break;
case 'E':
    phonetic = "Echo";
    break;
case 'F':
    phonetic = "Foxtrot";
    break;
case 'G':
    phonetic = "Golf";
    break;
case 'H':
    phonetic = "Hotel";
    break;
case 'I':
    phonetic = "India";
    break;
case 'J':
    phonetic = "Juliet";
case 'K':
    phonetic = "Kilo";
    break;
case 'L':
    phonetic = "Lima";
    break;
case 'M':
    phonetic = "Mike";
    break;
case 'N':
    phonetic = "November";
    break;
case 'O':
    phonetic = "Oscar";
    break;
case 'P':
    phonetic = "Papa";
    break;
case 'Q':
    phonetic = "Quebec";
    break;
case 'R':
    phonetic = "Romeo";
    break;
case 'S':
    phonetic = "Sierra";
    break;
case 'T':
    phonetic = "Tango";
    break;
case 'U':
    phonetic = "Uniform";
    break;
case 'V':
    phonetic = "Victor";
    break;
case 'W':
    phonetic = "Whiskey";
    break;
case 'X':
    phonetic = "X-Ray";
    break;
case 'Y':
    phonetic = "Yankee";
    break;
case 'Z':
    phonetic = "Zulu";
    break;

}

}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:08:46.230

您需要使用 charAt。`Scanner.next()`方法`String`不返回`char`，因此您需要转换`String`为`char`

```
letter = kb.next().charAt(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:11:56.090

您可以更好地创建一个`Map<Character, String>`来避免自己`26 cases`在 switch 中写入。这样你只需要`get`一个特定字符的字符串。

```
Map<Character, String> mapping = new HashMap<Character, String>();
mapping.put('a', "Alpha");
mapping.put('b', "Beta");
..  And so on.. 
```

当然你必须承担初始化的负担`Map`，但它会比一个`Mess`更好`switch - case`

好处是，你还可以`populate`从`Map`一些`file`以后。

然后，当您从扫描仪读取字符时，用于`charAt(0)`获取第一个字符，因为`Scanner.next()`返回一个字符串：-

```
letter = kb.next().charAt(0);

// Fetch the Phonetic for this character from `Map`
phonetic = mapping.get(letter); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:22:49.323

```
String letter;
String phonetic;
Map<String,String> codes = new HashMap<String,String>();
codes.put("A","Alpha");
codes.put("B","Bravo");
codes.put("C","Charlie");
codes.put("D","Delta");
    // not showing all assignments to make it shorter
codes.put("W","Whiskey");
codes.put("X","X-Ray");
codes.put("Y","Yankee");
codes.put("Z","Zulu");

Scanner kb = new Scanner(System.in);

System.out.print("Please enter a letter: ");
letter = kb.next().toUpperCase();

phonetic = codes.get(letter);

if (phonetic == null) {
    System.out.println("bad code : " + letter);
} else {
    System.out.println("Phonetic: " + phonetic);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:11:57.257

该[`Scanner.next()`方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)返回 a `String`，而不是 a ，因此您需要在将其与 s 进行比较之前`char`获取该`String`using的第一个字符。[`String.charAt(...)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#charAt%28int%29)`char`

# ruby-on-rails-3 - Rails 3：过滤后模型导致无限循环

> ID：12938565
> 
> 赞同：0
> 
> 时间：2012-10-17T16:07:03.787
> 
> 标签：ruby-on-rails-3, activerecord, infinite-loop, after-save

我有以下过滤后：

用户模型：

```
 def check_for_custom_district
    unless self.custom_district.blank?
      district = District.new(:name => custom_district, :state_id => state_id, :school_type_id => school_type_id)

      if district.save(false)
        school = School.new(:name => custom_school, :state_id => state_id, :country_id => 1, :source => "User")
        if school.save(false)
          district.schools << school
          update_attribute(:school_id, school.id)
        end
      end
    end
  end

  def check_for_custom_school
    if self.custom_district.blank? and self.custom_school.present?
      school = School.new(:name => custom_school, :state_id => state_id, :country_id => 1, :source => "User", :school_district_id => district_id)
      school.save(false)
      update_attribute(:school_id, school.id)
    end
  end 
```

我进行了一些调试以将结果输出到控制台，并且代码正在访问该`check_for_custom_district`方法并由于某种原因导致无限循环。不知道如何阻止这种情况......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:18:55.973

我假设它是一个`after_save`过滤器。

因此，假设您刚刚保存了`model`.

它触发`after_save`过滤器。但是，在您的过滤器中，您实际上调用`update_attribute(:school_id, school.id)`了 ，这也会保存当前模型，这会`after_save`再次触发您的过滤器。

这就是你的无限循环的来源。

解决此问题的一种方法可能是根本不使用`after_save`过滤器。例如，只需重新实现该`save`方法：

```
def save(*)
  # your custom logic goes here
  super
end 
```

# sql - 如何按照 Magento（不是 Zend）加入Left？

> ID：12938566
> 
> 赞同：1
> 
> 时间：2012-10-17T16:07:06.950
> 
> 标签：sql, magento

我用函数 getRooms() 创建了块。它应该返回房间集合。但是由于搜索的条件很多，我需要对其他表进行joinLeft查询。

```
public function getRooms(){

    $rooms = array();

    $productId = $this->getRequest()->getParam('product'); 

    $from = $this->getRequest()->getParam('from');
    $to = $this->getRequest()->getParam('to');

    $fromStamp = strtotime( $from );
    $toStamp = strtotime( $to );

    $rooms = Mage::getModel('reservation/roomtypes')->getCollection();

    $newInventoryTable = $rooms->getTable('reservation/newinventory');

    $datefilters =  array('filter1'=>$fromStamp, 'filter2'=>$toStamp );
    $dateconditions = array( 'filter1' => $cond1, 'filter2' => array('from'=>'ni.date_from','to'=>'ni.date_to') );

    $datecond = "({$fromStamp} >= ni.date_from and {$fromStamp} <= ni.date_to) or ({$toStamp} >= ni.date_from and {$toStamp} <= ni.date_to) OR ni.date_from is NULL";
    $rooms = $rooms
                    ->addFieldToSelect('id')
                    ->addFieldToSelect('room_type')
                    ->addFieldToSelect('room_price_per_night')
                    ->addFieldToSelect('second_night_price')
                    ->addFieldToSelect('room_quantity')
                    ->addFieldToFilter("main_table.entity_id", $productId )
                    ->getSelect()
                    ->where( $datecond )
                    ->joinLeft( array("ni"=>$newInventoryTable), "main_table.id = ni.room_type_id", "SUM(ni.rooms_count)  AS rooms_reserved" )
                    ->group("main_table.id")
                    ->having("((`room_quantity`-`rooms_reserved`) > 0) OR (`rooms_reserved` is NULL) ");

$rooms = $rooms->query();
$rooms = $rooms->FetchAll();
    return $rooms;
} 
```

我已经正确创建了 sql-query，但 FetchAll() 给了我 Array()。因为我已经使用了低级 Zend db API。我想要获取 Varien Collection 并使用它的神奇 getField() 功能。

换句话说，我想留在 Magento 级别。那么如何使用 Magento 方法重写 leftJoin、group、运算符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:39:14.587

尝试查看此文档： http: [//www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)

我认为你不应该使用`addFieldToSelect()`但是`addFieldToFilter()`

这是一个加入的例子

```
$collection = Mage::getModel('module/model_name')->getCollection();
$collection->getSelect()->join( array('table_alias'=>$this->getTable('module/table_name')), 'main_table.foreign_id = table_alias.primary_key', array('table_alias.*'), 'schema_name_if_different'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:12:02.817

落入那个简单的把戏非常简单。您已经正确地完成了所有操作，除了......当您完成此操作时，您已将`Zend_Db_Select`实例分配给您的变量：`$room`

```
$rooms = $rooms
                ....
                ->getSelect()
                .... 
```

相反，您应该做的是将过滤器分配给`$select`，但使用其`$collection`本身进行操作。顺便说一句，您不需要将您的收藏重新分配给自己以应用过滤器。这是你应该如何做的：

```
$rooms = Mage::getModel('reservation/roomtypes')->getCollection();

$newInventoryTable = $rooms->getTable('reservation/newinventory');

$datefilters =  array('filter1'=>$fromStamp, 'filter2'=>$toStamp );
$dateconditions = array( 'filter1' => $cond1, 'filter2' => array('from'=>'ni.date_from','to'=>'ni.date_to') );

$datecond = "({$fromStamp} >= ni.date_from and {$fromStamp} <= ni.date_to) or ({$toStamp} >= ni.date_from and {$toStamp} <= ni.date_to) OR ni.date_from is NULL";
$rooms->addFieldToSelect('id')
                ->addFieldToSelect('room_type')
                ->addFieldToSelect('room_price_per_night')
                ->addFieldToSelect('second_night_price')
                ->addFieldToSelect('room_quantity')
                ->addFieldToFilter("main_table.entity_id", $productId );
$rooms->getSelect()
                ->where( $datecond )
                ->joinLeft( array("ni"=>$newInventoryTable), "main_table.id = ni.room_type_id", "SUM(ni.rooms_count)  AS rooms_reserved" )
                ->group("main_table.id")
                ->having("((`room_quantity`-`rooms_reserved`) > 0) OR (`rooms_reserved` is NULL) ");
return $rooms; 
```

现在说几句为什么你在退货之前不需要`load`收集。Magento在操作集合时具有**延迟加载原则。**它包含有关选择和内部过滤器的所有信息，但直到需要输出数据的地方（例如`foreach`循环）才将查询提取到数据库。然后`load`触发方法并`_items`用对象填充受保护的属性。通过这种方式，您仍然可以添加或删除过滤器并修改`Block`对象甚至`.phtml`模板中的选择对象 - 当然不鼓励这样做，但有时是最快和最简单的方法。

So you don't need to `query` or `fetch` or `load` collection to insert it into foreach loop and get the desired array-like behavior (thanks to Iterator interface).

# python - Matplotlib savefig 到 PDF 的不同页面

> ID：12938568
> 
> 赞同：11
> 
> 时间：2012-10-17T16:07:13.250
> 
> 标签：python, pdf, pagination, matplotlib

我有一个冗长的情节，由几个水平的子情节组成，组织成一列。

当我调用 fig.savefig('what.pdf') 时，生成的输出文件会显示所有图都挤在一个页面上。

问题：有没有办法告诉 savefig 保存任何数量（可能是自动确定）的 pdf 页面？

如果可能的话，我宁愿避免使用多个文件，然后使用 os.system('merge ...')。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T16:44:41.737

我自己没有尝试过，但是在 matplolib 常见问题解答中有一些说明可以在几页中以 pdf 格式保存绘图。

*   常见问题解答[http://matplotlib.org/faq/howto_faq.html#save-multiple-plots-to-one-pdf-file](http://matplotlib.org/faq/howto_faq.html#save-multiple-plots-to-one-pdf-file)
*   示例[http://matplotlib.org/examples/pylab_examples/multipage_pdf.html](http://matplotlib.org/examples/pylab_examples/multipage_pdf.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:14:59.803

我怀疑有一种更优雅的方法可以做到这一点，但一种选择是使用 tempfiles 或 StringIO 来避免在系统上制作传统文件，然后您可以将它们拼凑在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-16T20:59:35.690

我想知道如何执行类似的事情。我有一组来自不同图像文件的图，这些图因文件而异。所以这个想法是，一旦我发现可以在页面中绘制的大量绘图，将其应用于文件。[幸运的是，我在这里找到了建议的解决方案： http](http://blog.marmakoide.org/?p=94) ://blog.marmakoide.org/?p=94 。但是它不能正常工作，因为它只绘制第一个面板图，其余面板为空。我修改了它，在这里我包含了一个（1XN）网格和输出图的工作版本。

```
import numpy

from matplotlib import pyplot as plot
from matplotlib.backends.backend_pdf import PdfPages

# Generate the data
data = numpy.random.randn(7, 1024)

# The PDF document
pdf_pages = PdfPages('histograms.pdf')

# Generate the pages
nb_plots = data.shape[0]
nb_plots_per_page = 5
nb_pages = int(numpy.ceil(nb_plots / float(nb_plots_per_page)))
grid_size = (nb_plots_per_page, 1)

for i, samples in enumerate(data):
  print
  print i,i % nb_plots_per_page,samples
  # Create a figure instance (ie. a new page) if needed
  if i % nb_plots_per_page == 0:
    print 'Opening'
    fig = plot.figure(figsize=(8.27, 11.69), dpi=100)
  # Close the page if needed
  elif (i + 1) % nb_plots_per_page == 0 or (i + 1) == nb_plots:
    plot.subplot2grid(grid_size, (i % nb_plots_per_page, 0))
    plot.hist(samples, 32, normed=1, facecolor='#808080', alpha=0.75)
    plot.title(str(i+1))

    plot.tight_layout()
    pdf_pages.savefig(fig)
    print 'Closing'
    print i,samples
    # Plot stuffs !
  print i,samples
  plot.subplot2grid(grid_size, (i % nb_plots_per_page, 0))
  plot.hist(samples, 32, normed=1, facecolor='#808080', alpha=0.75)
  plot.title(str(i+1))

# Write the PDF document to the disk
pdf_pages.close()
print 'histograms.pdf' 
```

[![第1页](../Images/a742eaea3231f5b6227914613a3441f4.png)](https://i.stack.imgur.com/dO9S9.jpg)

[![第2页](../Images/82e70e586863c94d49e2490ae984815a.png)](https://i.stack.imgur.com/ZbVvJ.jpg)

# windows-8 - 将 WinJS 绑定到 WinRT 对象

> ID：12938570
> 
> 赞同：1
> 
> 时间：2012-10-17T16:07:27.037
> 
> 标签：windows-8, windows-runtime, winjs

我们正在编写一个 Windows 应用商店应用程序。许多数据处理和聚合是在 WinRT 组件中完成的，并且 UI 是用 WinJS/HTML 编写的。我们遇到的主要问题之一是 WinJS 无法绑定到 WinRT 对象。具体来说，WinJS 运行时会引发一个无法扩展 WinRT 对象的异常。这是在尝试在数据对象上定义新属性的代码行中。这适用于 WinJS 对象，因为它们是动态的。WinRT 并非如此。我可以绑定的唯一方法是通过 oneTime 绑定，因为这不会尝试从 WinRT 对象创建 Observable 对象。WinRT 对象是否可以实现某种接口来支持一种方式甚至两种方式的绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:13:57.587

不，如果不创建自己的包装器，这是不可能的：

*   “代理” WinRT 对象，并使该代理侦听来自 WinRT 对象的事件并设置属性
*   制作一些*看起来*像可观察并从 WinRT 层投射出来的东西（例如，它有一个接受回调等的“绑定”函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T23:42:10.010

我不需要担心双向绑定，但下面描述的类似代码对我有用。注意：请不要遵循所示的 JS 方法命名约定。

## C＃

```
public sealed class Stock
{
   //... other private/internal methods/members
   private String _symbol;

   public string Symbol
   {
       get
       {
           return this._symbol;
       }
   }
} 
```

## JS

```
_makeBindable: function (obj) {
    var o = new Object();
    for (m in obj) {
        o[m] = obj[m];
    }
    return o;
}

var projectedStockObj = getStockObjFromWinRTComponent();
var bindableStockObj = _makeBindable(projectedStockObj);
// ... use bindableStockObj in binding scenario(s) 
```

此解决方案创建一个新对象并向其中添加 WinRT 成员（也包含它们的值）。

# c# - 复杂模型/子模型验证 (MVC) 的最佳方法

> ID：12938576
> 
> 赞同：15
> 
> 时间：2012-10-17T16:07:57.247
> 
> 标签：c#, asp.net-mvc, model-view-controller, model-validation, validationattribute

# 问题

我知道在 MVC 中有很多方法可以进行模型验证，并且有很多关于这个主题的文档。但是，我不太确定验证**模型**属性的最佳方法是**相同类型**的*“子模型”*。

 **请记住以下几点

*   我仍然想从`TryUpdateModel/TryValidateModel`方法中获利
*   这些*“子模型”*中的每一个都有强类型视图
*   有一个用于`MainModel`呈现整体显示视图的类的强类型视图

这可能听起来有点混乱，但我会抛出一些代码来澄清。以以下类为例：

**主要型号：**

```
class MainModel{
    public SomeSubModel Prop1 { get; set; }
    public SomeSubModel Prop2 { get; set; }
} 
```

**一些子模型：**

```
class SomeSubModel{
      public string Name { get; set; }
      public string Foo { get; set; }
      public int Number { get; set; }
} 
```

**主模型控制器：**

```
class MainModelController{

    public ActionResult MainDisplay(){
         var main = db.retrieveMainModel();
         return View(main); 
    }

    [HttpGet]
    public ActionResult EditProp1(){
         //hypothetical retrieve method to get MainModel from somewhere
         var main = db.retrieveMainModel();

         //return "submodel" to the strictly typed edit view for Prop1
         return View(main.Prop1);
    }

    [HttpPost]
    public ActionResult EditProp1(SomeSubModel model){

         if(TryValidateModel(model)){
              //hypothetical retrieve method to get MainModel from somewhere
              var main = db.retrieveMainModel();
              main.Prop1 = model;
              db.Save();

              //when succesfully saved return to main display page 
              return RedirectToAction("MainDisplay");
         }
         return View(main.Prop1);
    }

    //[...] similar thing for Prop2 
    //Prop1 and Prop2 could perhaps share same view as its strongly 
    //typed to the same class
} 
```

我相信这段代码到目前为止都是有意义的（如果不是这样，请纠正我）因为`TryValidateModel()`正在验证一个没有`ValidationAttribute`.

问题出在哪里，哪里是最好的地方，或者什么是最好和最优雅的方式来对**不同的验证约束**，`Prop1`同时`Prop2`仍然利用`TryValidateModel()`而不是用条件语句填充 Edit 方法和`ModelState.AddModelError()`

通常你可以在`SomeSubModel`类中有验证属性，但在这种情况下它不起作用，因为每个属性都有不同的约束。

其他选项是`MainModel`类中可能有自定义验证属性，但在这种情况下它也不起作用，因为`SomeSubModel`对象直接传递给视图并且在验证时没有对其`MainModel`对象的引用。

我能想到的唯一剩下的选择是每个属性的 ValidationModel，但我并不是最好的方法。

# 解决方案

这是我根据@MrMindor 的回答实施的解决方案。

**基础 ValidationModel 类：**

```
public class ValidationModel<T> where T : new()
{
    protected ValidationModel() {
        this.Model = new T();
    }
    protected ValidationModel(T obj) { 
        this.Model = obj; 
    }

    public T Model { get; set; }
} 
```

**Prop1 的验证模型**

```
public class Prop1ValidationModel:ValidationModel<SomeSubModel>
{
    [StringLength(15)]
    public string Name { get{ return base.Model.Name; } set { base.Model.Name = value; } }

    public Prop1ValidationModel(SomeSubModel ssm)
        : base(ssm) { }
} 
```

**Prop2 的验证模型**

```
public class Prop2ValidationModel:ValidationModel<SomeSubModel>
{
    [StringLength(70)]
    public string Name { get{ return base.Model.Name; } set { base.Model.Name = value; } }

    public Prop2ValidationModel(SomeSubModel ssm)
        : base(ssm) { }
} 
```

**行动**

```
[HttpPost]
public ActionResult EditProp1(SomeSubModel model){

     Prop1ValidationModel vModel = new Prop1ValidationModel(model);
     if(TryValidateModel(vModel)){

          //[...] persist data

          //when succesfully saved return to main display page 
          return RedirectToAction("MainDisplay");
     }
     return View(model);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:45:23.517

我们在其中一个应用程序中遇到了*类似*的情况，其中每个应用程序都`SomeSubModel`代表一个作业的参数设置。由于每种类型的作业都有不同数量和类型的参数，因此我们的作业模型具有这些参数的集合，而不仅仅是设置属性。

我们有一个`JobParameter`子类到可用的不同类型（`StringParameter`, `BoolParameter`, `DoubleParameter`, ...）。这些子类有自己的验证属性集。
共享的“JobParameterModel”用于将参数传递给视图。
对于验证，返回的模型被转换为其特定的 JobParameter。
**参数类型：**

```
public enum ParameterType
{
    Empty = 0,
    Boolean = 1,
    Integer = 2,
    String = 3,
    DateTime = 4,
    ...
} 
```

**作业参数：**

```
class JobParameter
{ 
  [AValidationAttributeForAllParamters] 
  public string Name { get; set; }  
  public virtual string Foo { get; set; }  
  public int Number { get; set; }
  public ParameterType Type {get;set;}

  private static readonly IDictionary<ParameterType, Func<object>> ParameterTypeDictionary =
  new Dictionary<ParameterType, Func<object>>{
                {ParameterType.Empty, () => new EmptyParameter() },
                {ParameterType.String, ()=>new StringParameter()},
                {ParameterType.Password, ()=>new PasswordParameter()},
                ...
              };
    public static ScriptParameter Factory(ParameterType type)
    {
        return (ScriptParameter)ParameterTypeDictionary[type]();
    }
} 
```

**布尔参数：**

```
[ABoolClassLevelValidationAttribute]
class BoolParameter:JobParameter
{
    [AValidationAttribute]
    public override string Foo {get;set;}
}

.... 
```

在我们的验证框架中（我被告知它的模型非常接近 MS），ViewModel 总是被转换回它的域对象进行验证。
**参数型号：**

```
class ParameterModel: JobParameter
{
    public JobParameter ToDomain()
    {
        var domainObject = JobParameter.Factory(Type);
        Mapper.Map(this, domainObject);
        return domainObject;
    }
    public bool Validate()
    {
        var dom = ToDomain();
        return TryValidate(dom);
    }

} 
```

**控制器：**

```
class Controller(){

    [HttpPost]                                
    public ActionResult SaveParameter(JobParameter model){                                

         if(TryValidateModel(model)){                                

              //persist stuff to db.

          //when succesfully saved return to main display page                                 
              return RedirectToAction("MainDisplay");                                
         }                                
         return View(main.Prop1);
    }                                
} 
```

为了您的具体情况，您不需要搞得这么复杂（或者相信我们的验证框架的细节会为您工作）。
**为每个道具编辑/保存操作：为每个道具**
创建一个验证模型。`Prop1ValidationModel`,`Prop2ValidationModel`

```
[HttpGet]
public ActionResult EditProp1()
{
    var main = db.retrieveMainModel();
    db.Prop1.SubmitUrl = Url.Action("SaveProp1","Controller");
    return View(main.Prop1);
}
[HttpPost]                                
public ActionResult SaveProp1(SomeSubModel model){                                
     var validationModel = new Prop1ValidationModel{
     ///copy properties                                   
         };
     if(TryValidateModel(validationModel)){                                

          var main = db.retrieveMainModel();                                
          main.Prop1 = model;                                
          db.Save();                                

          //when succesfully saved return to main display page                                 
          return RedirectToAction("MainDisplay");                                
     }                                
     return View(main.Prop1);
} 
```

有了这个，您可以对 Prop1 和 Prop2 使用相同的强类型视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T20:04:07.280

如果 SomeSubModel 具有不同的验证属性，具体取决于它是在 Prop1 还是 Prop2 中应用...意味着实际上 prop1 和 prop2 的两个 SomeSubModel 是两个不同的类，因为如果它们具有相同的字段，则该字段的含义会有所不同，具体取决于如果它们附加到 prop1 或 prop2（这就是它们具有不同验证属性的原因。因此，最好的方法是定义 SomeSubClass 的两个子类，例如从 Common SomeSubClass 继承的 SomeSubClass1 和 SomeSubClass2。一旦继承，您不能添加新属性，而只是新的验证规则通过使用流式验证或使用[MetaDataTypeAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute.aspx)在类定义之外指定验证属性。所以你会得到类似的东西：

```
[MetaDataType(typeof(ValidationClass1)]
public class SomeSubClass1: SomeSubclass{} 
```

和

```
[MetaDataType(typeof(ValidationClass2)]
public class SomeSubClass2: SomeSubclass{} 
```**

# objective-c - 为什么某些 Objective-C 文件名的名称中有减号或加号

> ID：12938577
> 
> 赞同：9
> 
> 时间：2012-10-17T16:07:56.890
> 
> 标签：objective-c, cocoa

在我想添加到我的项目的库中，有一个名为 NSString-Base64Extensions.h（带有 NSString-Base64Extensions.m）的文件和一个名为 NSString+PECrypt.h（带有 NSString+PECrypt.m）的文件。

这意味着什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T16:11:01.173

这是命名文件的约定，其中包含现有*类*的类别。- 和 + 符号只是表达方式不同，除了风格没有区别。

您可以期望 NSString+PECrypt.m 包含一个添加到 `NSString`. 同样，NSString-Base64Extensions 是`NSString`.

类别是在 Objective-C 中向现有类添加方法的一种方式，无需子类化，[此处](http://macdevelopertips.com/objective-c/objective-c-categories.html)将进行更详细的讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:12:36.963

如果编写文件的程序员遵循 Cocoa 命名约定，那么这些文件就是实现了类的类别的文件。例如，在 中`NSString-Base64Extensions.h`，应该有以下类别实现：

```
@implementation NSString (Base64Extensions)

// ...

@end 
```

顺便说一句，类和类别名称之间的分隔符是“-”还是“+”号并不重要，它可以是下划线或开发人员喜欢的任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T16:10:51.193

它们是用于包含特定类的文件的约定。

```
NSString+PECrypt.h  ---> NSString : class name, PECrypt : category name 
```

# css - CSS sprite 之间有推荐的间距吗？

> ID：12938580
> 
> 赞同：6
> 
> 时间：2012-10-17T16:08:04.120
> 
> 标签：css, image, css-sprites

通常，如果我创建 CSS 精灵，我会将它们全部排列在一起，完全没有间距。例如，如果所有图像都是 10x10 像素，我会将它们放在坐标 0,10；0,20; 10,10; 10,20。

但这似乎在某些情况下会引起问题。例如，在页面缩放和移动设备上，您可以看到下一个精灵的边缘。

为什么会出现这个问题，是否与舍入误差有关？简单地在精灵周围添加间距是避免问题的最佳方法吗？如果是这样，我们应该在精灵图像中的图标之间留出最小或推荐的间距吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:12:13.473

由于舍入，Sprite Bleeding 可能会在缩放时发生，尤其是在 IE 中（旧版本只是简单地舍入到最接近的整数，例如计算值`20.343px`将呈现为`20px`）。
由于舍入误差永远不会大于`1px`，因此在所有边上填充 ，`1px`您已经可以解决该问题。

现代浏览器使用一种称为亚像素渲染的方法来缓解这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T07:10:25.660

维护存储在 50px x 50px 或 100px x 100px 盒子中的 CSS sprite 会更容易。

*   它有助于在 sprite 中组织相关图像。
*   您可以复制粘贴以前的样式，只需更改一位数字即可获得新样式。
*   您无需手动找出完美的像素位置。
*   它还可以避免出现问题的情况，有时您无法控制 html 元素的宽度/高度，并且它会显示精灵图像的其他非预期部分。

例如：

```
div.test {
    background-image: url(image.png);
    background-position: 100px 0px;
}
div.test:hover {
    background-position: 100px 100px; /* Simple relation with previous style */
}

div.box1 {
    background-image: url(image.png);
    background-position: 200px 0px;
}
div.box2 {
    background-image: url(image.png);
    background-position: 300px 0px; /* No efforts required to find out perfect pixel position */
} 
```

# audio - FFMPEG 多路复用视频和音频（来自另一个视频） - 映射问题

> ID：12938581
> 
> 赞同：96
> 
> 时间：2012-10-17T16:08:03.843
> 
> 标签：audio, video, map, ffmpeg, mux

我想将视频中的音频放置到另一个没有音频的视频中（在一个命令中）：

```
ffmpeg.exe -i video1_noAudio.mov -i video2_wAudio.mov -vcodec copy -acodec copy video1_audioFromVideo2.mov 
```

我猜“-map”是正确的方法，但我对此感到困惑。

你能建议如何解决它吗？

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-10-17T20:39:45.580

# 输入概述

`input_0.mp4`具有所需的视频流和`input_1.mp4`所需的音频流：

![映射图](../Images/c1c33d007b9a4af84ee39eb4538da6d3.png)

在`ffmpeg`流中看起来像这样：

```
$ ffmpeg -i input_0.mp4 -i input_1.mp4

Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'input_0.mp4':
  Duration: 00:01:48.50, start: 0.000000, bitrate: 4144 kb/s
    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 1280x720, 4014 kb/s, SAR 115:87 DAR 1840:783, 23.98 fps, 23.98 tbr, 16k tbn, 47.95 tbc (default)
    Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 124 kb/s (default)

Input #1, mov,mp4,m4a,3gp,3g2,mj2, from 'input_1.mp4':
  Duration: 00:00:30.05, start: 0.000000, bitrate: 1754 kb/s
    Stream #1:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 720x480 [SAR 8:9 DAR 4:3], 1687 kb/s, 59.94 fps, 59.94 tbr, 60k tbn, 119.88 tbc (default)
    Stream #1:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 55 kb/s (default) 
```

### 身份证号码

`ffmpeg`指带有索引号的输入文件和流。格式为`input_file_id:input_stream_id`. 由于`ffmpeg`从 0 开始计数，因此 stream`1:1`指的是来自 的音频`input_1.mp4`。

### 流说明符

这可以通过[流说明符](http://ffmpeg.org/ffmpeg.html#Stream-specifiers-1)来增强。例如，您可以告诉`ffmpeg`您想要来自第一个输入 ( ) 的第一个视频流`0:v:0`，以及来自第二个输入 ( ) 的第一个音频流`1:a:0`。我更喜欢这种方法，因为它更有效。此外，它更不容易发生意外映射，因为`1:1`它可以引用任何类型的流，而`2:v:3`只引用第三个输入文件的第四个视频流。

# 例子

该[`-map`](http://ffmpeg.org/ffmpeg.html#Advanced-options)选项指示`ffmpeg`您想要什么流。要从以下位置复制视频`input_0.mp4`和音频`input_1.mp4`：

```
$ ffmpeg -i input_0.mp4 -i input_1.mp4 -c copy -map 0:0 -map 1:1 -shortest out.mp4 
```

下一个示例将执行相同的操作：

```
$ ffmpeg -i input_0.mp4 -i input_1.mp4 -c copy -map 0:v:0 -map 1:a:0 -shortest out.mp4 
```

*   `-map 0:v:0`可以翻译为：从第一个输入（`0`），选择视频流类型（`v`），第一个视频流（`0`）

*   `-map 1:a:0`可以翻译为：从第二个输入（`1`），选择音频流类型（`a`），第一个音频流（`0`）

### 补充说明

*   流将`-c copy`被[流复制](http://ffmpeg.org/ffmpeg.html#Stream-copy)，而不是重新编码，因此不会有质量损失。如果要重新编码，请参阅[FFmpeg Wiki: H.264 Encoding Guide](https://trac.ffmpeg.org/wiki/Encode/H.264)。

*   该`-shortest`选项将导致输出持续时间与最短输入流的持续时间相匹配。

*   有关详细信息，请参阅[`-map`选项文档](http://ffmpeg.org/ffmpeg.html#Advanced-options)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-10T07:36:55.237

我有一个将音频合并到视频的新命令

```
ffmpeg -i video.mp4 -i audio.mp4 -map 0.0 -map 1.0 -acodec copy -qscale 4 -vcodec mpeg4 outvideo.mp4 
```

> **-qscale**是 ffmpeg 视频的选项集质量
> 
> **-acodec 复制**是选项复制音频的默认质量以输出视频
> 
> **-vcodec mpeg4**是选项将默认视频质量复制到输出视频

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-06T12:56:26.513

接受的答案是对 ffmpeg使用该选项的灵活[流选择的一个很好的解释。](https://ffmpeg.org/ffmpeg.html#Stream-selection)`-map`

但是，上面链接的文档还描述了一种更简单的语法来执行提问者的要求，而无需`-map`：

```
ffmpeg -an -i video1_noAudio.mov -vn -i video2_wAudio.mov -c:a copy -c:v copy video1_audioFromVideo2.mov 
```

这`-an`意味着从第一个输入文件中`-vn`丢弃任何音频，从录音中丢弃任何视频。`ffmpeg`然后以明显的方式组合它们以生成单个输出文件。

（`-c:a`并且`-c:v`只是问题的替代品 `-acodec`，`-vcodec`可用于复制速度，或在需要时重新编码流。）

# php - JQuery ui 自动完成将项目列表发送到 PHP 脚本

> ID：12938582
> 
> 赞同：0
> 
> 时间：2012-10-17T16:08:13.033
> 
> 标签：php, javascript, ajax, forms, jquery-ui

我有一个自动完成表单，它返回 HTML 列表中的值并在单击时删除项目：

```
...
//Print selected item
select: function(event, ui) {
    var message = ui.item.value;
    //Display item
    $('<li/>').text(message).prependTo("#result");
    $( "#result" ).scrollTop( 0 );
    //Clear autocomplete form
    event.preventDefault();
    $(this).val('');
    //Deselect item
    $("#result").selectable({
        selected: function (event, ui) {
            $(ui.selected).remove();
        }
    });
}
... 
```

HTML 表单：

```
...
<form id="form" >
    <ol id="selectable" class="ui-widget" style="margin-top:2em">
        <li id="result" class="ui-widget-content" style="height: 200px; width: 500px; overflow: auto;"></li>
    </ol>
    <input id="submitButton" type="submit" name="submit"  />
</form>
... 
```

现在，如何将项目列表发送到 PHP 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:12:51.513

由于您使用的是 jQuery，因此使用它的`$.ajax()`方法很容易（尽管我建议学习如何在原始 JS 中实现它，这相当容易）。另一种选择是通过`$_POST`将表单标签更改为：

```
<form id="form" action="path/to/php" method="post"> 
```

# jquery - 将事件分配给 .hide(); 元素

> ID：12938587
> 
> 赞同：0
> 
> 时间：2012-10-17T16:08:34.700
> 
> 标签：jquery

我有几个`.hide();`页面加载中的链接。这些链接用于触发 ajax 事件，我想为它们分配事件。
我尝试结合页面加载分配事件，但链接没有任何功能`.show();`
所以我的问题是我应该在页面加载时分配事件还是结合`show();`？

```
 $('.submit-reply-button').each(function(){
    $(this).click(function(e){
        e.preventDefault();
        var commentid = $(this).data('commentid');
        var reply = $(textarea.commentid).val();
        var filename = $('.mainimage').data('filename');
        var imgowner = $('.mainimage').data('imgowner');
        $.ajax({
            type: 'POST',
            url: '?category=addimgcomment',
            data: {
                "commentid" : commentid,
                "imgcomment" : reply,
                "filename" : filename,
                "imgowner" : imgowner
            },
            success: function(data){
                $(textarea.commentid).val("");
                $('.'+commentid+'subcomments').html(data);
            }
        });
        return false;
    });
}); 
```

附加到按钮标签，该标签又位于页面加载时隐藏的元素内。所以有几个按钮，都是 .hide(); 在页面加载。当它们出现时，单击时不会触发任何事件。

# c# - 内联模型编辑器 MVC3。再次

> ID：12938592
> 
> 赞同：0
> 
> 时间：2012-10-17T16:08:44.667
> 
> 标签：c#, .net, asp.net-mvc-3

朋友们..我还有一个麻烦。可能很愚蠢，但我看不出，有什么问题。

```
 public ActionResult Images(Guid? id)
    {
        ViewBag.Gallery = _core.GetGalleryByID(_client, (Guid)id);

        List<ImageModel> models = new List<ImageModel>();

        foreach (var img in _core.GetImagesByGalleryID(_client, (Guid)id))
        {
            ImageModel model = new ImageModel(_client);
            model.Thumbneil = img.Thumbneil;
            model.Description = img.Description;
            model.AlternateText = img.AlternateText;
            model.GalleryID = img.GalleryID;
            model.ID = img.ID;
            models.Add(model);
        }

        ViewBag.Images = models;
        return View();
    }

    [HttpPost]
    public ActionResult SaveImageInfo(ImageModel imageModel)
    {
        Image img = _core.GetImageByID(_client, imageModel.ID);
        img.AlternateText = imageModel.AlternateText;
        img.Description = imageModel.Description;

        _core.SaveImageInfo(_client, img);
        return View();
    } 
```

这是控制器的一部分。这是观点的一部分：

```
@model WebUI.Models.ImageModel
@{
    ViewBag.Title = "Images";
    Layout = "~/Views/Admin/_Layout.cshtml";
}

<h2>@ViewBag.Gallery.Name</h2>

<table id="grid-table" >

    @foreach (var image in ViewBag.Images)
    {
    <tr>
        ....
        <td >
            @using(Html.BeginForm("SaveImageInfo", "Admin", FormMethod.Post))
            {
                @Html.HiddenFor(m => m.ID)
                @Html.TextAreaFor(m => m.Description) <br />
                @Html.TextBoxFor(m => m.AlternateText) <br />

                <div id="item-post" >
                    <input title="Подтвердить" type="submit" value="Подтвердить" />
                </div>
            }
        </td>

    </tr>
    }

</table> 
```

和型号：

```
 public class ImageModel
{
    public Byte[] Thumbneil { get; set; }

    [Required]
    public String Description { get; set; }

    [Required]
    public Guid GalleryID { get; set; }

    [Required]
    public String AlternateText { get; set; }

    [Required]
    public Guid ID { get; set; }
} 
```

在 ActionResult SaveImageInfo(ImageModel imageModel) 我应该有 2 个 Guid：ID 和 GalleryID。但。我有这个： ![在运行时观看](../Images/60c620481963d18e73bbf00bc8c9f7f4.png) 这是我的问题：为什么？我看不到...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:15:10.153

在我看来，您需要在视图中为 GalleryId 添加一个 HiddenFor：

@Html.HiddenFor(m => m.GalleryId)

# list - 淘汰赛 - 减去数组中的值

> ID：12938604
> 
> 赞同：0
> 
> 时间：2012-10-17T16:09:29.487
> 
> 标签：list, knockout.js, nested, computed-observable

我在以下方面遇到了一些麻烦。我正在使用淘汰赛来编辑包含嵌套列表的列表，有点像淘汰赛网站上的联系人编辑器：

[http://knockoutjs.com/examples/contactsEditor.html](http://knockoutjs.com/examples/contactsEditor.html)

在我的示例中，“设计”与上述示例中的“联系人”相关，“设计交付”与“电话号码”相关。

所以我在每个“设计”中都有一个名为 MaxQuantity 的值，在每个“designDelivery”中都有一个名为 Quantity 的值。实际上，我想要实现的是在每个名为“Remaining”的“设计”中都有另一个值，它基本上是“MaxQuantity”减去与特定“设计”相关的所有“designDeliveries”中“Quantity”的总和”。当我添加新的“designDeliveries”并填充“Quantity”字段时，这当然应该从该特定设计的新“Remaining”值中扣除

到目前为止，我有以下代码：

```
var DesignsModel = function (designs) {

    var self = this;
    self.designs = ko.observableArray(ko.utils.arrayMap(designs, function (design) {
        return {    BookingDesignId: design.BookingDesignId, 
            DesignName: design.DesignName, 
            MaxQuantity: design.Quantity,
            DesignDeliveries: ko.observableArray(design.DesignDeliveries) };
    }));

    self.addDesignDelivery = function (design) {
        design.DesignDeliveries.push({
            Quantity: "",
            DepotId: ""
        });
    };

    self.removeDesignDelivery = function (designDelivery) {
        $.each(self.designs(), function () { this.DesignDeliveries.remove(designDelivery) })
    };

    self.save = function () {
        self.lastSavedJson(JSON.stringify(ko.toJS(self.designs), null, 2));
    };

    self.lastSavedJson = ko.observable("");

};

ko.applyBindings(new DesignsModel(initialData)); 
```

初始数据看起来像这样：

```
[{"DesignId":"1","DesignName":"Design1","Quantity":50,"DesignDeliveries":[]},{"DesignId":"2","DesignName":"Design2","Quantity":50,"DesignDeliveries":[]},{"DesignId":"3","DesignName":"Design3","Quantity":500,"DesignDeliveries":[]}] 
```

和这样的html：

```
<div data-bind="foreach: designs">

    <div>
        <span data-bind="text: DesignName"></span>
        <a href="#" data-bind="click: $root.addDesignDelivery">Add</a>
    </div>
    <div>
        <span data-bind="text: MaxQuantity"></span>
    </div>
    <div>
        <span data-bind="text: Remaining"></span>
    </div>

    <div data-bind="foreach: DesignDeliveries">
        <div>
            <input data-bind="value: Quantity" />
        </div>
        <div>  
            <a href="#" data-bind="click: $root.removeDesignDelivery">
                Delete
            </a>             
        </div>          
    </div>    
</div> 
```

我希望这足够清楚。有人知道我将如何实现这一目标吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:42:56.987

我建议您将复杂的视图模型拆分为几个小视图模型。然后要实现所需的功能，您只需要添加计算剩余数量的计算：

```
var DesignDeliveryModel = function(quantity, depotId) {
    var self = this;

    self.Quantity = ko.observable(quantity);
    self.DepotId = depotId;
};

var DesignModel = function(bookingDesignId, designName, maxQuantity, deliveries) {
    var self = this;

    self.BookingDesignId = bookingDesignId;
    self.DesignName = designName;
    self.MaxQuantity = maxQuantity;
    self.DesignDeliveries = ko.observableArray(deliveries);

    self.Remaining = ko.computed(function() {
        var result = self.MaxQuantity;
        ko.utils.arrayForEach(self.DesignDeliveries(), function(item) {
            result = result - item.Quantity();
        });
        return result;
    });

    self.addDesignDelivery = function() {
        self.DesignDeliveries.push(new DesignDeliveryModel(0, ""));
    };

    self.removeDesignDelivery = function(designDelivery) {
        self.DesignDeliveries.remove(designDelivery);
    };
};

var DesignsModel = function(designs) {
    var self = this;

    self.designs = ko.observableArray(ko.utils.arrayMap(designs, function(design) {
        return new DesignModel(design.BookingDesignId, design.DesignName, design.Quantity, design.DesignDeliveries);

    }));

    self.save = function() {
        self.lastSavedJson(JSON.stringify(ko.toJS(self.designs), null, 2));
    };

    self.lastSavedJson = ko.observable("");
}; 
```

以及对 html 的小更新以更改调用添加和删除函数的上下文：

```
<div data-bind="foreach: designs">
    <div>
        <span data-bind="text: DesignName"></span>
        <a href="#" data-bind="click: addDesignDelivery">Add</a>
    </div>
    <div>
        <span data-bind="text: MaxQuantity"></span>
    </div>
    <div>
        <span data-bind="text: Remaining"></span>
    </div>

    <div data-bind="foreach: DesignDeliveries">
        <div>
            <input data-bind="value: Quantity" />
        </div>
        <div>  
            <a href="#" data-bind="click: $parent.removeDesignDelivery">
                Delete
            </a>             
        </div>          
    </div>    
</div> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/7JUGE/](http://jsfiddle.net/vyshniakov/7JUGE/)

# python - Python os.path.dir

> ID：12938607
> 
> 赞同：0
> 
> 时间：2012-10-17T16:09:43.000
> 
> 标签：python

我试图找到位于一个目录上方并包含特定单词的路径。例如，我试图在这里找到的路径将是 /whatever/path/2343blah344

```
 oldpath = '/whatever/path/itis'
        newpath = os.path.join(os.path.dirname(oldpath), '/*blah*') 
```

当我打印 newpath 时，它只显示为 /*blah，所以我很确定 * 不起作用，或者这不是处理它的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:24:25.293

需要明确的是， os.path.join 适用于文本字符串。它实际上并没有以任何复杂的方式将它们与底层操作系统进行比较。这对于效率和当您想要创建不绑定到当前正在执行的计算机的路径时都很有用。

正如 Burhan Khalid 建议的那样，glob 是实现您真正想要的最佳方式。如果出于某种原因你想用 os 库来做这一切，那么你可以做一些事情，比如使用[os.walk](http://docs.python.org/library/os.html?highlight=os.walk#os.walk)来获得所有的可能性，然后过滤这些可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:24:56.357

基于你只期待一场比赛......

```
import glob
oldpath = '/whatever/path/itis'
newpath = glob.glob(os.path.join(os.dirname(oldpath), '*blah*/'))[0] 
```

# facebook - 检索别人上传的照片到我的墙上

> ID：12938609
> 
> 赞同：2
> 
> 时间：2012-10-17T16:09:57.807
> 
> 标签：facebook, get, photos

我正在开发一个 Facebook 应用程序（游戏），它使用“我/照片”上传照片。在应用程序页面上，我希望显示应用程序上传的照片的时间线，它们的来源是我的朋友（不是我）。使用 FQL 时**桌子**

 **```
SELECT post_id, message, description, type
FROM stream
WHERE filter_key = 'others' AND source_id = me() AND app_id = MY_APP_ID 
```

我得到了相关的帖子，但没有照片的网址。我尝试过的任何其他表都没有加入似乎有效。我确实扩展了我的访问令牌以包括friends_photos 特权……如果您有任何意见，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:24:25.277

要获取照片，请使用“附件”字段。

如果您只想获取带有照片的帖子，您可以像这样重写您的查询：

```
SELECT post_id, message, description, type, attachment
FROM stream
WHERE filter_key = 'others' AND source_id = me() AND app_id = MY_APP_ID 
  AND attachment.fb_object_type = 'photo' 
```

照片的网址可在`attachment.media.src`**

# ios - 从 UITableView 中删除行导致崩溃

> ID：12938610
> 
> 赞同：0
> 
> 时间：2012-10-17T16:09:57.150
> 
> 标签：ios, uitableview, sdk, crash

我从表视图中删除一行时遇到问题。这是按下行上的按钮时调用的代码。我使用 tag 参数告诉我正在处理哪一行，这就是为什么我在最后调用 reloadTableView 以重新应用所有标签。如果我更新可见行，我就会崩溃。所以我一定在这里做错了什么？

```
- (void) deleteLineItem:(id)sender
{
    UIButton *deleteBtn = sender; // Need to get tag (which was set to table row)
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:(deleteBtn.tag/3) inSection:0];
    NSLog(@"Removed entry at %d, with tag %d", indexPath.row, deleteBtn.tag);
    [self.productItems removeObjectAtIndex:indexPath.row];

    [self.tableview beginUpdates];
    [self.tableview deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
    [self.tableview endUpdates];

    // Hack to keep table animation ok as we have to do it after the row delete above
    [self performSelector:@selector(reloadTableview) withObject:nil afterDelay:0.35];
} 
```

在这种情况下，我在表中有两行。数据源如下：

```
Printing description of self->productItems:
(__NSArrayM *) productItems = 0x084fa3b0 @"2 objects" 
```

索引路径如下：

```
Printing description of indexPath:
<NSIndexPath 0x1069bff0> 2 indexes [0, 1] 
```

当调用 endUpdates 方法时，我在控制台中遇到以下崩溃

```
2012-10-17 17:04:33.424 myAppname[5782:15203] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]'
*** First throw call stack:
(0x1bf0022 0x1918cd6 0x1bdcd88 0xa5553 0xa576b 0x925420 0x963284 0x9633d0 0x925219 0x8fd4f2 0x8fa4c3 0x9050b7 0x9050e5 0xa6ae1 0x1bf1e99 0x87814e 0x8780e6 0x91eade 0x91efa7 0x91e266 0xb39a1a 0x1bc499e 0x1b5b640 0x1b274c6 0x1b26d84 0x1b26c9b 0x25007d8 0x250088a 0x875626 0x1f2ba 0x2ba5)
terminate called throwing an exception(lldb) 
```

我不知道为什么会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:02:33.737

代码看起来不是很健壮。似乎您已将 设置`deleteBtn.tag`为一个错误的值（更准确地说，在 3 和 5 之间），而您只有一个单元格。只是一个猜测。

对于此类任务，我使用的一种更强大的技术是在我的`UITableViewCell`子类中实现 IBAction，然后通过委托将请求传播到控制器，并将单元本身作为参数。在控制器中，我通过检索 indexPath

```
[self.tableView indexPathForCell:cell]; 
```

这样我就避免了这种黑客行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:13:37.267

@ilimiacs 是的，这是正确的，这将是一个好方法。但是单元格很复杂，两个按钮和两个文本字段。

该标签用于通过除以 3 来确定我所在的单元格以获得行（每个单元格使用 3 个标签，0、1、2）。那么标签 3 将是第 1 行，这就是我除以 3 的原因。

但是我确实在那里有单元格类，我将研究使用委托来实现它的可行性，按钮很容易，但对于文本字段来说并不那么容易，因为它是一个表单，我们有下一个/上一个按钮可以让你从一个字段到下一个字段，标签使这变得容易。

无论如何，我会接受这个答案，因为它肯定会有所帮助，也许我可以把它变成完整的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T18:32:04.690

@ilmiacs 谢谢你的建议。我按照你说的实现了，摆脱了标签，现在一切都在表现自己。重新实现有点痛苦，但它减少了 hacky 和更易读的代码。

我能够只更新第一行，而不是重新计算剩余行的所有标签值。如果删除按钮是您看到的最后一行，我需要从第一个删除按钮...正如您所看到的，现在它更简单了。

```
- (void) deleteCell:(NSIndexPath *)indexPath
{
    NSIndexPath *firstRow = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.productItems removeObjectAtIndex:indexPath.row];

    [self.tableview beginUpdates];
    [self.tableview deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
    [self.tableview reloadRowsAtIndexPaths:[NSArray arrayWithObject:firstRow] withRowAnimation:UITableViewRowAnimationNone];
    [self.tableview endUpdates];
} 
```

谢谢...

# assembly - 如何将 MMX 与 SSE 操作并行使用

> ID：12938612
> 
> 赞同：3
> 
> 时间：2012-10-17T16:10:01.253
> 
> 标签：assembly, intel, sse, mmx

在[Wikipedia](https://en.wikipedia.org/wiki/Streaming_SIMD_Extensions)中，它说：

*SSE2 中增加的整数支持使得 MMX 在很大程度上是多余的，尽管在某些情况下可以通过将 MMX 与 SSE 操作并行使用来进一步提高性能。*

这是否意味着处理器可以在运行 SSE/MMX 指令的同时运行另一个 MMX/SSE 指令，因为这些指令在单独的单元中运行？

或者只是因为它们使用不同的寄存器，你可以一起使用它们而不需要切换模式（MMX模式和FPU模式不能“*同时*”工作，你必须手动切换到不同的模式）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T20:10:52.787

现代 CPU 没有用于 MMX 和 SSE 的单独执行单元，而是具有 128 位执行单元，可以运行 SSE 或 MMX 微操作。在后一种情况下，将仅使用处理器的一半计算能力。

组合 SSE 和 MMX 指令的唯一好处来自额外的 8 个 MMX 寄存器。如果性能受到寄存器压力的限制，有时可以通过使用 MMX 寄存器和 SSE 来提高性能。在几乎所有情况下，您都必须编写汇编来进行此类优化。

# git - STS 中的 Git 插件问题

> ID：12938614
> 
> 赞同：2
> 
> 时间：2012-10-17T16:10:03.947
> 
> 标签：git

我是 Git 客户端的新手，对其操作非常困惑。我对 SVN 和 CVS 等其他版本控制工具非常熟悉。我已经在 STS 中安装了 Git 插件，并花费了大量时间检查了该项目。我的操作系统是 Windows-7，在 STS Eclipse 2.8.1 上使用 Eclipse Git 1.3.0。

最初我不知道“简单提交操作”实际上并没有将文件签入服务器存储库，而是必须“推送到上游”。只要没有发现冲突就可以了，但是当我想执行类似的操作时就麻烦了

1.  还原本地更改
2.  取消本地提交
3.  与服务器存储库同步（同步透视窗口不出现）
4.  推送到远程大部分时间都不起作用

当我说不起作用时，我的意思是 Git 抛出异常。

以下是我曾经遇到的一些错误。

> 1.  执行合并命令期间捕获的异常。org.eclipse.jgit.errors.MissingObjectException：缺少提交 c6c4fce9e8a0a228ac1d60f4e5549b5adafa638a
>     
>     
> 2.  缺少未知的 c6c4fce9e8a0a228ac1d60f4e5549b5adafa638a
>     
>     
> 3.  查找提交
>     
>     
> 4.  AnyObjectId[c6c4fce9e8a0a228ac1d60f4e5549b5adafa638a]
>     
>     
> 5.  执行合并命令期间捕获的异常。org.eclipse.jgit.errors.MissingObjectException：
>     
>     
> 6.  在“与 refs/remotes/origin/master 合并”期间发生内部错误

当提交发生冲突或问题时，我不得不采取一些方法（硬）重置我的工作区，并重新完成我所有的工作。

我觉得你们中的许多人都会遇到这样的问题，我想看看我能如何更好地解决这种情况。

感谢您对此的任何评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T06:40:22.620

这些错误通常反映了尚未正确更新的存储库（`git fetch`或`git pull`），并且缺少完成这些操作（合并或推送）的参考。

[该线程](http://www.eclipse.org/forums/index.php/t/205022/)说明了合并时的“丢失提交”错误。

> 我不得不从本地 git 中提取来解决这个问题。
> 在那之后，由于某些我不明白的原因，我的一些源文件有一个“修改过的”标记，比如合并的源文件没有在本地提交或类似的东西。
> 我不得不手动提交合并的代码。推送仍然失败。我不得不先再次拉动。

EGit 的主要问题是确保您没有处于分离的 HEAD 模式（如“[无法使用 EGit 向上游推送](https://stackoverflow.com/a/12171567/6309)”中详述）。

除此之外，最好先按照[Egit 教程](http://www.vogella.com/articles/EGit/article.html)和[手册](http://wiki.eclipse.org/EGit/User_Guide)进行训练（当然要先了解 git，使用[git 教程](http://sixrevisions.com/resources/git-tutorials-beginners/)，如[gitimmersion](http://gitimmersion.com/)）。

# c# - 如何在操作过滤器中记录所有查询参数？

> ID：12938621
> 
> 赞同：4
> 
> 时间：2012-10-17T16:10:37.103
> 
> 标签：c#, asp.net-mvc-3, logging, action-filter

我正在实现一个记录器，该记录器应通过操作过滤器捕获详细信息，以用于用户活动记录和故障查找。

```
 public interface ISessionLogger
    {
        void LogUserActionSummary(int sessionId, string userActionType);    
        void LogUserActionDetail(int session, string userActionType, DateTime userActionStartedUtc, long actionDurationInMilliseconds, string queryParams, string referredFrom);
    } 
```

我想`queryParams`从表单集合、路由值、操作参数、json 调用和查询字符串中捕获所有键和值，这听起来像是我需要的

`filterContext.Controller.ValueProvider`

但似乎不可能循环通过这个。所以在我的 FilterAttribute 我有

```
public void OnActionExecuting(ActionExecutingContext filterContext)
{
    var paramList = new List<string>();
    if(filterContext.ActionParameters != null)
    {
        paramList.AddRange(filterContext.ActionParameters.Select(param => String.Format("{0}:{1}", param.Key, param.Value.ToString())));
    }
    if(filterContext.Controller.ValueProvider != null)
    {
        //loop through the valueprovider and save the key value pairs to paramList
    }

    _queryParams = string.Join(",", paramList);
} 
```

在动作过滤器的 OnActionExecuting 方法中是否有另一种方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:01:17.590

为什么不简单地记录整个请求正文？这样，您将拥有重建用户请求所需的一切。

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    var stream = filterContext.HttpContext.Request.InputStream;
    var data = new byte[stream.Length];
    stream.Read(data, 0, data.Length);
    Log(Encoding.UTF8.GetString(data));
} 
```

作为替代方案，您可以尝试记录所有`filterContext.HttpContext.Request.Params`值以及`filterContext.RouteData`值：

# java - 匹配字母数字的正则表达式只需要字母和数字

> ID：12938623
> 
> 赞同：4
> 
> 时间：2012-10-17T16:10:44.153
> 
> 标签：java, regex

我想匹配一个至少包含一个字母和一个数字的字母数字字符串。有没有一种简单的方法可以将以下内容组合成一个正则表达式？

```
strValue.matches("[A-Z0-9]+")
    && strValue.matches(".*[A-Z].*")
    && strValue.matches(".*[0-9].*") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:12:29.237

使用前瞻断言。

```
strValue.matches("^(?=.*[A-Z])(?=.*\\d)[A-Z\\d]+$") 
```

# asp.net-mvc - 忽略具有路由约束的请求

> ID：12938624
> 
> 赞同：0
> 
> 时间：2012-10-17T16:10:50.737
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在中定义了几条路线`Global.asax.cs`

```
routes.MapRoute(
        "Custom",
        "party/get/{a}~{b}",          
        new { controller = "party", action = "get" },
        new { a = @"\d+", b = @"\d+" }
);

routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Party", action = "Index", id = UrlParameter.Optional }
); 
```

如果请求是`http://localhost:58684/party/get/37~12`那么它将与第一条路由以及 和 的`a`值分别`b`匹配。`37``12`

如果请求是`http://localhost:58684/party/get/37~-12`那么第一个路由不匹配这个请求，因为`-12`不匹配约束`@"\d+"`并且默认路由匹配请求（**我不想要这种行为**）。

**如果由于某种限制，一个请求没有被一个路由匹配，我该如何避免匹配请求的其他后续路由？我没有兴趣为以下路线设置任何约束。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:57:58.130

您不能告诉路由引擎“如果路由匹配该路由的一部分但不是全部，则忽略该路由”。但是，您可以添加另一个路由来捕获错误请求并对它们执行其他操作 - 显示错误页面或重定向到另一个操作。

如果您在所需路线之后直接添加它，它应该会捕获不需要的请求。

```
routes.MapRoute(
    "BadPartyValue",
    "party/get/{badValue}",          
    new { controller = "party", action = "BadValue" }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:11:56.987

你可以使用 routes.IgnoreRoute。

一个例子：

```
routes.IgnoreRoute("{*allaspx}", new { allaspx = @".*\.aspx(/.*)?" }); 
```

# shopify - Shopify 初始安装障碍

> ID：12938626
> 
> 赞同：7
> 
> 时间：2012-10-17T16:10:53.313
> 
> 标签：shopify

为了让演示应用程序启动并运行，我将我的应用程序初始安装到测试商店时有点碰壁。我已经完全按照教程进行操作，shopify_app 生成器使用我的 API 密钥和秘密共享生成初始代码（它确实要求我替换比教程中列出的更多的文件）但是当我运行服务器并放置大约 30 秒后要安装的测试存储的子域当回调类开始推回 localhost:3000 时，我得到一个 SSL Connection Reset By Peer 超时。该应用程序显示为已安装在测试商店中，但我无法让它在我的终端上启动演示，也无法通过初始安装屏幕。

非常感谢任何帮助！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-04T07:32:55.537

使用以下服务之一通过 SSH 连接来隧道化您的 localhost。免费：[https](https://ngrok.com/) : //ngrok.com/ 付费：[https ://forwardhq.com/](https://forwardhq.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T00:49:14.897

Shopify runs on https and loads your localhost:3000 via an iframe, which isn't https obviously.

As your browser doesn't load insecure content so you have to tell it to... Here is a discussion for changing that setting:

**Chrome** [https://superuser.com/questions/487748/how-to-allow-chrome-browser-to-load-insecure-content](https://superuser.com/questions/487748/how-to-allow-chrome-browser-to-load-insecure-content)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T12:34:19.870

Try working with shopify on a public domain and not on localhost. Do you have a staging environment with a public domain name? If you do not you can use an ssh reverse proxy on a public domain (aka ssh tunneling)

# installation - Wix如何隐藏功能选项

> ID：12938627
> 
> 赞同：11
> 
> 时间：2012-10-17T16:10:52.157
> 
> 标签：installation, wix, windows-installer, wix3.5

我正在使用 Wix 3.5 构建 MSI 安装程序。我想知道是否有任何方法可以从“功能自定义设置对话框”（您从功能树中选择要安装的内容）中隐藏某些选项。

我只想选择“将安装在本地硬盘上”和“整个功能将不可用”

目前，除了这两个选项之外，我还有以下选项：

*   “整个功能将安装在本地硬盘上”
*   “将安装为从网络运行”
*   “将安装整个功能以从网络运行”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T10:16:41.790

功能选择对话框使用Windows Installer 的内置控件[SelectionTree控件。](http://msdn.microsoft.com/en-us/library/aa371604.aspx)

[您可以使用功能表](http://msdn.microsoft.com/en-us/library/aa371604.aspx)`Attributes`的列来控制为某个功能显示哪些安装选项。

[WiX 的Feature 元素](http://wix.sourceforge.net/manual-wix3/wix_xsd_feature.htm)有四个属性来控制如何安装一个功能：

*   缺席：允许/禁止
*   AllowAdvertise：否/系统/是
*   InstallDefault：followParent/本地/源
*   典型默认值：广告/安装

[组件表](http://msdn.microsoft.com/en-us/library/aa368007.aspx)还控制组件是否可以从源代码运行。Component 元素具有`Location`以下属性：

*   *local*
    防止组件从源或网络运行（如果未设置此属性，这是默认行为）。
*   *source*
    强制组件只能从源运行（它不能从用户的计算机运行）。
*   *允许组件从源或本地运行*。**

 *因此，要删除从网络运行的选项，请将`Location`组件的属性设置为`local`.

您不能从选项中删除*整个功能将安装在本地硬盘上*。它仅在存在子功能并启用子功能以及功能本身的安装时才显示，而不是*将安装在本地硬盘上*，后者仅安装选定的功能并且不影响子功能。

如果子功能始终与父功能一起安装，您可以尝试将`InstallDefault`子功能的属性设置为`followParent`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-10T15:30:54.533

[要删除在您的功能 AllowAdvertise="no" https://www.firegiant.com/wix/tutorial/user-interface/custom-settings/](https://www.firegiant.com/wix/tutorial/user-interface/custom-settings/)中设置的“此功能将在需要时安装”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:46:56.847

如果您使用的是 WiX UIExtension，那么您需要下载该扩展的 WiX 源代码并进行适当的修改。以下链接应该可以帮助您入门：

[WiX UI 自定义](http://wix.sourceforge.net/manual-wix3/WixUI_customizations.htm)

[用于 SQL 数据库安装的 Wix 自定义 UI](https://stackoverflow.com/questions/10887486/wix-custom-ui-for-sql-database-installation)

[如何将 UI 添加到 WiX 3 安装程序？](https://stackoverflow.com/questions/596919/how-to-add-a-ui-to-a-wix3-installer)

**更新：**

在检查 WiX UI 源时，FeaturesDlg 显示一个“SelectionTree”控件。该控件（连同 WiX UI 显示的其他控件）似乎是 Windows Installer 控件，而不是特定于 WiX 的控件。请参阅[选择树](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371604%28v=vs.85%29.aspx)。因此，似乎没有简单的方法可以“关闭”这些选项。*

# r - 在 R (CRAN) 中创建和裁剪网格

> ID：12938629
> 
> 赞同：2
> 
> 时间：2012-10-17T16:11:00.650
> 
> 标签：r, spatial

I need to create a mask grid for spatial interpolation in gstat library. In details, I have different sampling points randomly distributed and I need to create the minimum convex polygon enclosing these points. Then, I have to create a spatial grid that should be cropped by the computed hull just to limit the interpolation to the extent of this polygon. I'd be very grateful if someone could explain me the detailed procedure also providing some examples. Thank you in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:14:20.223

我自己找到了解决方案。

```
library(spatstat)
library(sp)
library(plotKML)
library(maptools) 
```

创建随机点

```
x<-rnorm(100,3)
y<-rnorm(100,3)
plot(x,y)
xy<-cbind(x,y)
xy<-as.data.frame(xy) 
```

将点转换为空间点数据框，然后转换为栅格。

```
coordinates(xy)=c("x","y")
pnts<-vect2rast(xy)
summary(pnts) 
```

检查汇总单元格大小值并记住它

从点创建凸包。然后，将“owin”对象（凸包类）转换为空间多边形（创建栅格的基本步骤）

```
conv<-convexhull.xy(x,y)
SpP<-as(conv,  "SpatialPolygons")
plot(SpP)
points(x,y)
attr  =  data.frame(a=1,  b=1)
SrDf  =  SpatialPolygonsDataFrame(SpP,  attr) 
```

将“cell.size”设置为与“summary(pnts)”相同（在本例中设置为 0.085）。

```
rast <- vect2rast(SrDf,cell.size=0.085) 
```

玩得开心！

```
plot(rast)
image(rast)
points(x,y) 
```

注意：使用vect2rast，如果没有为“rast”对象设置cell.size，该函数会自动计算最适合的单元格大小，基于un点密度分布。在这种情况下，多边形仅由其顶点定义，因此我们使用为我们想象被多边形包围的点计算的像元大小。

# jquery - 带有与掩码不匹配的默认值的 Jquery 表单字段掩码？

> ID：12938632
> 
> 赞同：0
> 
> 时间：2012-10-17T16:11:07.900
> 
> 标签：jquery, forms, mask

有谁知道允许字段具有与掩码不匹配的默认值的表单字段屏蔽插件或脚本？

例如，最初显示“出生日期”的文本字段。当您单击它时，“出生日期”会消失，并显示“mm/dd/yyyy”，它会在您键入时填写，例如“12/21/1970”。

我编写了一个显示/清除默认值的脚本，并且我找到了允许屏蔽的插件，但我不确定如何将两者结合起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T17:49:22.713

您将使用占位符（如果您使用的是引导程序）

在输入语句中添加 placeholder="XXXX" 作为​​子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:08:12.657

这个插件->

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

你可以做

```
$(function(){
    $("#product").mask("99/99/9999",{placeholder:"Whatever value I want"});
}); 
```

# url - 对多个 URL 进行 RESTful POST 的工具

> ID：12938634
> 
> 赞同：-1
> 
> 时间：2012-10-17T16:11:19.507
> 
> 标签：url, rest, post

是否有任何工具可以同时通过 POST 请求访问多个 URL？我需要它来一次对许多宁静的服务器进行一些验证，而不是一次验证一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:19:31.133

我认为[http://jmeter.apache.org/](http://jmeter.apache.org/)足以满足您的需求：-您可以同时触发多个 URL-您可以同时加载具有多个请求的单个 URL-您可以评估响应时间- 您可以进行断言测试以检查一切是否正常。

# c# - VS 2010 不服从控制台应用程序的工作目录

> ID：12938636
> 
> 赞同：1
> 
> 时间：2012-10-17T16:11:26.833
> 
> 标签：c#, visual-studio-2010, console-application

我正在使用 Visual Studio C# 2010 Express 并创建了一个控制台应用程序。

我希望它在某个目录中运行，所以我转到项目的属性并在 Debug-Tab 中更改工作目录。

但是当我调试应用程序时，它永远不会在那里运行，而是始终在项目目录/bin/Debug 中。

我还尝试更改 Build-Tab 下的输出目录，但也没有遵守。（二进制文件不会复制到那里，但总是在 /projectdirectory/bin/Debug 中）

编辑：我不应该这样做：在同一个解决方案中，我有其他项目（类库和 Windows 窗体应用程序），它们实际上尊重工作目录和输出路径的设置。它似乎只是控制台应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:17:03.600

工作目录是[GetCurrentDirectory](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)返回的内容。类似于`cd`在命令提示符中。

工作目录也会影响相对文件路径是相对的 - 即打开“myFile.txt”（无文件路径）将在“工作目录”中搜索文件作为基本路径，如果在调试对话框中指定，则在“输出路径”中指定。您在命令提示符下一直更改工作目录：`cd c:\temp & findstr test *.txt" will run`findstr` 工作目录为“c:\temp”，但不会更改 findstr 的位置。

二进制文件放在输出路径中，与当前工作目录无关。

# javascript - 如何设置间隔，但在 20 分钟后停止

> ID：12938637
> 
> 赞同：4
> 
> 时间：2012-10-17T16:11:28.787
> 
> 标签：javascript, jquery

目前在我的网页上，我有一个每 30 秒运行一次功能的计时器：

```
setInterval("someFunction(userId)", 30000); 
```

这很好用，但问题是如果有 100 名用户打开他们的浏览器（比如他们去吃午饭时），它将无缘无故地轮询我们的系统并增加我们服务器上的负载。

如何在 20 分钟后停止此计时器的运行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T16:12:47.400

只需将超时设置为 20 分钟即可清除间隔：

```
var interval = setInterval(function() {
    someFunction(userId);
}, 30000);

setTimeout(function() {
    clearInterval(interval);
}, 1000 * 60 * 20); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:14:12.500

当您调用 时`setInterval`，您会得到一个返回值，它是运行间隔的句柄。

所以解决方案是安排*另一个*关闭，这将阻止这个间隔运行：

```
var interval = setInterval("someFunction(userId)", 30000);  
setTimeout(function(){ clearInterval(interval) }, 20 * 60 * 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:14:07.523

将间隔设置为变量。

设置另一个计时器以重置该间隔，或在 20 分钟后为您的轮询脚本设置禁用标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:14:14.390

试试这个：

```
var intervalId= setInterval(function(){
   someFunction(userId);
 }, 30000); 

setTimeout(function(){
   clearInterval(intervalId);
},20*60*1000); 
```

`setInterval`返回一个可以用于`clearInterval`稍后传递的 intervalId。

# mysql - SQL 错误 [mysql] 冲突读取锁 [1223]

> ID：12938638
> 
> 赞同：0
> 
> 时间：2012-10-17T16:11:32.330
> 
> 标签：mysql, locking, flush, master, slave

我在 MySQL 中有一个主从配置。现在我需要创建一个表，所以我执行

```
FLUSH TABLES WITH READ LOCK; 
```

在主数据库上，之后，我试图执行`CREATE TABLE...`但它不起作用。我得到：

> 错误“无法执行查询，因为您有一个冲突的读锁”

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:19:49.007

最后我解决了。

我不知道为什么，但是如果你在 services.msc 中杀死 MySQL 进程，然后重新启动它，它就可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-06T00:38:19.160

所以我们需要做的是解锁表，通过这个命令：

```
UNLOCK TABLES; 
```

# oracle - pl/sql：我该如何编写这个查询？

> ID：12938650
> 
> 赞同：-2
> 
> 时间：2012-10-17T16:12:07.477
> 
> 标签：oracle, plsql, pivot

我有两列（都是主要的）[PLAYER_ID] [LEAUGE_ID]

像这样的东西：

```
Player_id      League_id
2139            8
2153            8
2302            10
2441            8
2441            10 
```

我正在努力寻找在两个联赛中都打过球的同一个球员

根据上表，我试图只找到：

```
Player_id     League_id_1     League_id_2
2441          8               10 
```

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T16:23:45.433

看来您希望在第一行中使用它。因此，您可以使用以下命令将其放在一行中`PIVOT`：

```
select player_id,
  league_id_1,
  league_id_2
from
(
  select t1.player_id, t1.league_id,
    row_number() over(partition by t1.player_id order by t1.league_id) rn
  from table1 t1
  inner join
  (
    select player_id
    from table1
    group by player_id
    having count(distinct league_id) > 1
  ) t2
    on t1.player_id = t2.player_id
) x
pivot
(
  max(league_id)
  for rn in (1 as league_id_1, 2 as league_id_2)
) p; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/8395c/10)

或者，如果您无权访问该`PIVOT`函数，则可以使用`CASE`带有聚合的语句：

```
select player_id,
  max(case when rn = 1 then league_id end) league_id_1,
  max(case when rn = 2 then league_id end) league_id_2
from
(
  select t1.player_id, t1.league_id,
    row_number() over(partition by t1.player_id order by t1.league_id) rn
  from table1 t1
  inner join
  (
    select player_id
    from table1
    group by player_id
    having count(distinct league_id) > 1
  ) t2
    on t1.player_id = t2.player_id
) x
group by player_id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/0145d/1)

如果您不希望它在一行中，那么您可以使用内部子查询：

```
 select t1.player_id, t1.league_id
  from table1 t1
  inner join
  (
    select player_id
    from table1
    group by player_id
    having count(distinct league_id) > 1
  ) t2
    on t1.player_id = t2.player_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/0145d/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:15:36.690

如果您不介意将其排成一行：

```
SELECT t.*
FROM myTable t
INNER JOIN
(
    SELECT Player_id
    FROM myTable
    GROUP BY Player_id
    HAVING COUNT(*) = (SELECT COUNT(DISTINCT(League_id)) FROM myTable)
) p ON t.Player_id = p.Player_id 
```

这应该返回：

```
Player_id League_id
2441 8
2441 10

```

[SQL小提琴](http://sqlfiddle.com/#!4/961c2/11)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:08:57.533

如果您不能使用 PIVOT（仅限 11g），并且希望在一行中输出所有 League_id，请尝试以下操作：

```
 DECLARE
               v_owner VARCHAR2 ( 40 );
               v_player_id VARCHAR2 ( 40 );
               v_league_id VARCHAR2 ( 100 );
               v_league_id_total VARCHAR2 ( 1000 );

               /* First cursor */
               CURSOR get_player_id
               IS
                  SELECT DISTINCT player_id
                  FROM            table1
                  ORDER BY        player_id;

               /* Second cursor */
               CURSOR get_league_id
               IS
                  SELECT   league_id
                  FROM     table1
                  WHERE    player_id = v_player_id
                  ORDER BY league_id;
            BEGIN
               -- Open first cursor
               OPEN get_player_id;

               LOOP
                  FETCH get_player_id
                  INTO  v_player_id;

                  v_league_id_total := '';
                  EXIT WHEN get_player_id%NOTFOUND;

                  -- Open 2nd cursor
                  OPEN get_league_id;

                  LOOP
                     FETCH get_league_id
                     INTO  v_league_id;

                     EXIT WHEN get_league_id%NOTFOUND;
                     v_league_id_total := v_league_id_total || ' , ' || v_league_id;
                  END LOOP;

                  DBMS_OUTPUT.put_line ( RPAD ( v_player_id,
                                                26,
                                                ' '
                                              ) ||
                                         RPAD ( v_league_id_total,
                                                26,
                                                ' '
                                              ) );

                  CLOSE get_league_id;
               END LOOP;

               CLOSE get_player_id;
            EXCEPTION
               WHEN OTHERS
               THEN
                  raise_application_error ( -20001,
                                            'An error was encountered - ' ||
                                            SQLCODE ||
                                            ' -ERROR- ' ||
                                            SQLERRM );
            END; 
```

输出将如下所示：

```
2139     , 8                      
2153     , 8                      
2303     , 8 , 10   (I added one more record.)              
2441     , 8 , 10 , 11 , 12   (I added 2 more records) 
```

# php - 登录/会话

> ID：12938662
> 
> 赞同：-1
> 
> 时间：2012-10-17T16:12:55.193
> 
> 标签：php

我正在尝试开始学习 php 并进行登录并保持登录。虽然我不确定登录后如何设置“变量”以让服务器没有系统没有你登录。我正在尝试用谷歌搜索，但想出了一些看起来有点像希腊语的东西。不确定这是否是我搜索的方式

有谁知道我可以看的教程或视频吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:25:34.673

您正在寻找的是会话变量。它们在您启动 PHP 会话时存储，并且只要会话处于活动状态，整个应用程序就可以访问它们。您可以为会话变量设置几乎任何您想要的内容，例如用户名，这样您就可以在每个页面的顶部添加“欢迎用户名”。

具体来说，您想设置一个布尔值，比如 is_logged_in，然后每个需要用户登录的页面都会检查是否设置了该变量，如果没有将它们重定向。

```
if(isset($_SESSION['is_logged_in)
{
    do stuff here;
} else {
    send them away they aren't allowed to be here;
} 
```

这里有一个很好的入门解释：http: [//php.about.com/od/advancedphp/ss/php_sessions_2.htm](http://php.about.com/od/advancedphp/ss/php_sessions_2.htm)

和一个很好的整体 PHP 初学者教程：http: [//net.tutsplus.com/tutorials/php/30-php-best-practices-for-beginners/](http://net.tutsplus.com/tutorials/php/30-php-best-practices-for-beginners/)

抱歉，您还询问了如何设置它们，而我给您的一个教程中已经回答了这个问题，这真的很简单。在您的用户成功通过您的登录过程后，您只需要设置变量。

```
$_SESSION['is_logged_in']=1; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T16:16:49.540

这是您要开始的地方：http: [//us1.php.net/tut.php](http://us1.php.net/tut.php)

祝你好运。

# c++ - 使用 C++11 在 Cygwin 上使用 Clang

> ID：12938663
> 
> 赞同：7
> 
> 时间：2012-10-17T16:12:57.220
> 
> 标签：c++, cygwin, clang++

我在 Cygwin 上安装了 Clang 并尝试编译此代码：

```
#include <iostream>
int main() {
  std::cout << "hello world!" << std::endl;
  return 0;
} 
```

如果我这样做，那效果很好`clang++ file.cpp`。如果我这样做是行不通的`clang++ file.cpp -std=c++11`。我从这样的标准标题中得到错误：

```
In file included from file.cpp:1:
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/iostream:39:
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/ostream:39:
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/ios:39:
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/exception:150:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/exception_ptr.h:132:13: error:
      unknown type name 'type_info'
      const type_info* 
```

Cygwin Clang 是否不能在打开 C++11 的情况下工作，或者我可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T23:45:11.057

它看起来像标准库中的一个错误。exception_ptr.h 仅包含在 C++11 模式中，这就是为什么您在其他情况下看不到它的原因。问题是，正如错误所说，没有声明 std::type_info 。似乎 GCC 神奇地向前声明了 std 命名空间中的某些名称，这就是它不受影响的原因！你可以用一个简单的程序自己证明：

```
namespace std {  

    class A
    {
    public:
         type_info* B();
    };
} 
```

这与 GCC 4.5.3 一起编译，但无论 -std 设置如何，Clang 都会出错。

该问题已在最新版本的 GCC 中得到修复，因此手动更新可能是您最好的选择。配置了 --enable-languages=c,c++ 的 4.7.2 版本在 Cygwin 下编译没有问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T12:43:57.390

使用 C++11 让 Clang 包在 Cygwin 上运行是可能的并且相对容易。

例如，您描述的错误是通过添加来修复的

```
#ifdef __clang__
    class type_info;
#endif 
```

到`exception_ptr.h`. 另一个需要修复的错误是将复制构造函数添加到`std::pair`.

不过，这很不幸，希望 Cyginw gcc 包能够更新到 C++ 标准库的更新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:54:14.723

我认为默认情况下，Windows 上的 clang 将使用 ms 兼容模式和 ms 扩展。Windows 上的这些和其他默认值可能不适用于 Cygwin。

使用该`-###`标志来获取从驱动程序传递给编译器的实际选项，以便您可以尝试调整它们。

# java - 如何确定客户端/服务器套接字连接的所有资源（线程、PrintWriters 等）是否正确关闭？

> ID：12938668
> 
> 赞同：0
> 
> 时间：2012-10-17T16:13:07.237
> 
> 标签：java, eclipse, multithreading, sockets

我正在编写客户端/套接字连接，并且正在使用 ThreadPools 来处理多个客户端。

在我的服务器启动后，我使用了几个资源。如果 f.ex.：服务器对客户端说它应该关闭，我想关闭所有这些，我想关闭所有东西。

我仍然编写了一个基本的关机功能：

```
public static void killClient() {
    try {
        threadpool.shutdown();
        in.close();//client input
        out.close();//client output
        socket.close();
    } catch(Exception e) {
        System.out.println("Client has been shutdown! " + e);
        e.printStackTrace();
    }
} 
```

我的问题是：

如何确保一切都已正确关闭并且不再运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:16:29.800

如果您使用的是 Java7，那么您可以利用[`try-with-resources`](http://docs.oracle.com/javase/7/docs/technotes/guides/language/try-with-resources.html)所有[可关闭](http://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html)对象（如 Socket、Connection、Statement 等）的构造，一旦超出范围就会自动关闭它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:17:33.690

> 如何确保一切都已正确关闭并且不再运行？

我已经回答了下面的具体问题。

我认为“关闭”你的课程比专注于关闭资源更重要。如果一个类（例如`Client`上面的类）包装了线程池和套接字等资源，那么它应该有一个`close()`方法（例如`killClient()`上面的）。如果服务器分叉一个客户端，那么它应该管理它们以便`server.close()`调用各种`client.killClient()`方法。

如果您对正确关闭各种类、`try {} finally {}`在任何地方使用块，您不应该担心未关闭的资源和挂起的线程。

* * *

这很难做到，并且没有针对所有资源类型的一揽子答案。这里有一些可能会有所帮助的想法。

*   对于线程，您可以使用类似的东西`Threads.getAllStackTraces()`来显示剩下的线程。如果您在程序启动和完成时比较此列表，您应该能够看到剩下的内容。

*   文件描述符要困难得多。如果您在 Linux 上运行，那么您可以查看`/proc/self/fd`目录以查看哪些描述符仍处于打开状态。再次比较开始和结束。您还可以查看应用程序中的[`OpenFileDescriptorCount`JMX 变量](http://java-monitor.com/forum/showthread.php?t=130)( `java.lang:type=OperatingSystem`)，但这只是给出了没有上下文的描述符的数量。

*   没有简单的方法可以检测其他资源中的泄漏。您可以`ResourceManager`围绕它们包装一个类型类，从中“生成”和“释放”资源，但这需要编程支持。如果您在管理器之外创建资源，则没有简单的方法来检测泄漏。

*   我为[ORMLite](http://ormlite.com/)测试所做的就是这种机制的一个例子。ORMLite 打开和关闭大量数据库连接，我想确保我的代码中没有泄露它们。我创建了一个围绕数据库连接的包装器，它会在创建时向管理器注册，并在关闭时取消注册。然后我可以确定`assertTrue(connectionManager.isAllConnectionsClosed());`。不确定这是否有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:19:52.253

确保将所有 close() 和 shutdown() 方法放在单独的 try 块中，如果 in.close() 失败，则永远不会调用 out.close() 和 socket.close() 在代码中。

还要确保从 finally 块中调用方法 killclient()。

# python - 云端硬盘的 Google OAuth 2.0（服务帐户）中使用了哪个电子邮件地址？

> ID：12938671
> 
> 赞同：1
> 
> 时间：2012-10-17T16:13:24.663
> 
> 标签：python, oauth-2.0, google-openid, google-authentication, google-api-python-client

我正在尝试通过 Google 进行身份验证以使用 Google 云端硬盘，但是当我尝试列出文件时，没有任何回复（而且我知道我的 Google 云端硬盘中有文件）。

我正在使用这段代码，当我执行它时，没有列出任何文件。它是否尝试获取与我的帐户 blah@blah.com 或 298741233858@developer.gserviceaccount.com 关联的文件？因为我在 blah@blah.com 中有文件，但 298741233858@developer.gserviceaccount.com 只是为开发人员访问而创建的。

```
from oauth2client.client import SignedJwtAssertionCredentials
import httplib2
from apiclient.discovery import build

email = 'blah@blah.com'
service_email = '298741233858@developer.gserviceaccount.com'
scope = 'https://www.googleapis.com/auth/drive'

f = file('google-api-key', 'rb')
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials(service_email, key, scope=scope)
http = httplib2.Http()
http = credentials.authorize(http)
drive_service = build('drive', 'v2', http=http)

def get_all_files(service):
  result = []
  page_token = None
  while True:
    param = {}
    if page_token:
      param['pageToken'] = page_token
    files = service.files().list(**param).execute()
    result.extend(files['items'])
    page_token = files.get('nextPageToken')
    if not page_token:
      break
  return result

files = get_all_files(drive_service)
print files 
```

# c# - 如何使用 winforms-geplugin API 创建自定义地标图标？（使用 C# 而不是 Javascript）

> ID：12938676
> 
> 赞同：0
> 
> 时间：2012-10-17T16:13:27.357
> 
> 标签：c#, google-earth-plugin

我正在使用以下代码在我的 C# 项目中创建地标。

```
kmlTreeView.ParseKmlObject(
     KmlHelpers.CreatePlacemark(ge,
                                Coord,
                                d.sSerialNumber,    // ID (ESN)
                                d.sNickname,     // Name - shown in tree
                                "Device Type: " + d.sName + "\n" +
                                "IP Address: " + d.sIPAddress + "\n" + 
                                "ESN: " + d.sSerialNumber)); // shown in bubble 
```

我不知道如何从标准的黄色图钉更改图标。我见过的所有 javascript 示例都使用 ge.createIcon() 和 ge.createStyle()。这些函数在托管代码 API 中似乎不可用。

是否有其他方法可以访问我无法找到的地标对象？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:18:12.897

找到了答案。在此处使用示例 javascript -(https://developers.google.com/earth/documentation/placemarks#custom) - 我只是将单引号 (') 更改为双引号 (")，并且效果很好。

```
 dynamic placemark = KmlHelpers.CreatePlacemark(
                      ge,
                      Coord,
                      d.sSerialNumber,    // ID (ESN)
                      d.sNickname,     // Name - shown in tree
                      "Device Type: " + d.sName + "\n" +
                      "IP Address: " + d.sIPAddress + "\n" + 
                      "ESN: " + d.sSerialNumber);
                var icon = ge.createIcon("");
                icon.setHref("http://maps.google.com/mapfiles/kml/paddle/red-circle.png");
                var style = ge.createStyle(string.Empty);
                style.getIconStyle().setIcon(icon);
                style.getIconStyle().setScale(5.0);
                placemark.setStyleSelector(style); 
```

# tfs - MSBuild 程序文件环境变量跨平台？

> ID：12938678
> 
> 赞同：0
> 
> 时间：2012-10-17T16:13:36.573
> 
> 标签：tfs, msbuild, path, program-files

我有一个 MSBUILD 目标片段，它具有如下内容来执行外部应用程序：

```
<Exec Command="&quot;C:\Program Files\dir\do.exe....&quot;" /> 
```

它在 x86 机器上运行良好，但在 x64 系统上运行时它当然坏了，因为路径应该是“Program Files (x86)”。以跨平台方式处理构建文件路径的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:24:16.037

读这个：

[http://social.msdn.microsoft.com/Forums/en/msbuild/thread/261edf66-c16d-4be0-995f-5f1edc2ac7b6](http://social.msdn.microsoft.com/Forums/en/msbuild/thread/261edf66-c16d-4be0-995f-5f1edc2ac7b6)

表明设置变量然后进行覆盖将起作用。我正在试验这个，它似乎工作：

```
 <PropertyGroup>
     <properPath>c:\program files\etc...</properPath>
     <properPath Condition="'$(PROCESSOR_ARCHITECTURE)'=='AMD64' or '$(PROCESSOR_ARCHITEW6432)'=='AMD64'">c:\program files (x86)\etc...</properPath>
 </PropertyGroup> 
```

# javascript - 提交表单详细信息的更好方法是什么

> ID：12938680
> 
> 赞同：1
> 
> 时间：2012-10-17T16:13:50.363
> 
> 标签：javascript, html, forms

我正在开发一个使用 PHP 作为服务器端的 ERP 系统。所以我需要非常小心我的网站/系统的安全性。我还将使用 JavaScript 进行客户端验证。所以我想确保客户端打开了 JavaScript，当然我也会验证数据服务器端，但我不想要不必要的服务器调用，主要是我关心表单......以及客户端填写的数据并提交..那么我应该用什么来提交我的数据？

默认 HTML 在此处使用 JavaScript 提交和验证（注意：如果客户端关闭了 JavaScript，则无用）

```
<input type="submit" name="Add Data" /> 
```

或者在 JavaScript 的帮助下使用锚标记提交`<a>`（我发现这很有意义，好像 JavaScript 被关闭了他将无法提交数据）

```
<a href="#" onclick="document.getElementById("form_id").submit();">Submit</a> 
```

那么，如果我使用`<a>`标签提交数据，或者我应该坚持使用默认`submit`按钮，会有什么不好的地方吗？如果我`<a>`用于提交表单数据，我将能够使用 JavaScript 验证数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:18:47.250

> 所以我想确保客户端打开了 JavaScript

你不能。即使您将系统设计为在没有 JavaScript 的情况下崩溃，也有人可以对其进行逆向工程并手动提交不良数据。

> 当然我也会验证数据服务器端

这就是解决方案

> 但我不想要不必要的服务器调用

如果你从关闭 JavaScript 的人那里得到足够多的意外提交，其中包含错误，以提供显着的性能或负载问题，我会吃掉我的帽子。

> 默认 HTML 在此处使用 JavaScript 提交和验证

是的。将 JavaScript 绑定到`submit`表单上的事件。

> `<a href="#"`

不要那样做。

> `<a>`那么如果我使用标签提交数据有什么不好的地方吗

*   它看起来不像会提交表单的东西
*   它不会在屏幕阅读器的*表单模式中显示*
*   如果 JavaScript 因任何原因不起作用，它会静默失败

> 我应该坚持使用默认提交按钮吗？

是的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:17:31.237

尽可能使用浏览器默认设置。坚持使用提交按钮，并将您的验证绑定到`submit`表单上的事件。这样，无论是否使用 JavaScript，您的表单都可以按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:17:58.950

不，您永远无法将客户端操作视为可靠或安全的。如果我有意这样做，我可以阻止验证，但让 JavaScript 为提交工作。

至于您的问题，这很简单：您是否希望用户能够在没有 JavaScript 的情况下提交。这不是关于什么是“更好”的问题，而是您的要求的问题。

# qt - 自动更新新版symbian应用

> ID：12938687
> 
> 赞同：0
> 
> 时间：2012-10-17T16:14:12.353
> 
> 标签：qt, symbian, auto-update

我有一个 Qt Symbian 应用程序。我没有通过诺基亚 OVI 商店发布它。我正在我自己的网站上分发该应用程序。我需要知道的是，如果我发布了我的应用程序的新版本，用户应该能够自动下载新版本。

我的意思是，每当他/她启动应用程序时，都应该通知他新版本的发布（如果有可用更新）。然后他可以选择安装更新或跳过它。

如何实现这个......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:30:05.860

据我所知，Symbian 中没有自动机制。您可以在您的网站上设置一个 Web 服务（它可以像一个静态 txt 文件一样简单，您可以在推出应用程序的新版本时手动更新该文件），它会返回您的应用程序的最新发布版本号。然后，当您启动应用程序时，它会查询 Web 服务并将最新发布的版本与其自己的版本进行比较。如果安装的应用程序较旧，它可以启动新版本的安装。

# c# - EF 代码优先元数据异常

> ID：12938691
> 
> 赞同：0
> 
> 时间：2012-10-17T16:14:31.273
> 
> 标签：c#, .net, sql-server, entity-framework

我已经通过 NuGet 将 EF v5 安装到 VS 2010 项目中。这是代码：

```
public class HeliosCpDataContext : DbContext
{
    public HeliosCpDataContext() : base(Properties.Settings.Default.cn_HeliosCpNtAuth) {}
    public IEnumerable<Test> GetTests()
    {
            return this.Database.SqlQuery<Test>("EXEC App.Test");
    }
}

   public class Test
    {
       public string OrderNumber { get; set; }
       public int OrderId {get;set;}
    }

   CREATE PROC [dbo].[Test]
   AS 
    SET NOCOUNT ON

SELECT TOP 10 OrderNumber, OrderId
FROM dbo.Orders o 
```

字段 [OrderNumber] 为 Varchar(20)，[OrderId] 为 INT

这是app.config：

```
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="HeliosCp.Data.Properties.Settings.cn_HeliosCpNtAuth"
      connectionString="Data Source=DCXVRSQ471;Initial Catalog=SCPT_HeliosCp;Integrated Security=True;MultipleActiveResultSets=True"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

当我尝试执行时：

```
 var context = new HeliosCp.Data.HeliosCpDataContext();
  var test = context.GetTests().FirstOrDefault(); 
```

我得到一个 MetadataException “指定的架构无效。错误：（137,6）：错误 0063：int 类型的属性不允许精确刻面。（137,6）：错误 0063：不允许缩放刻面int 类型的属性。”

我尝试将 sproc 中的每个字段显式转换为 Varchar & int，通过 SqlQuery 函数而不是 sproc 显式执行查询（“SELECT TOP 10 ...”），从 sproc 中完全*删除*查询（即，离开sproc 的主体中没有任何内容），并且每次我都会得到完全相同的异常。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:09:40.060

尝试打开您的 edmx 文件并删除您的 int 的精度属性

# c# - 为什么我的每个接口都占用 2mb 的 RAM？

> ID：12938694
> 
> 赞同：0
> 
> 时间：2012-10-17T16:14:39.743
> 
> 标签：c#, memory, interface

好的，所以我确实有一个关于在 WinForms 应用程序中实现接口的问题。基本上我有一个我已经构建的控件库。每个控件都定义了一个与主窗体交互的接口。

我一直在做的是创建一个属性处理程序，它是接口的类型，然后这样做。

**在控件上：**

```
public interface ITest {
    void Test1();
    void Test2();
}

private ITest _testHandler;

public ITest TestHandler { 
    get { return _testHandler; }
    set { _testHandler = value; }
} 
```

**在主窗体上：**

```
public MainForm : Form, MyControl.ITest { 

    public MainForm() { 
        InitializeComponent();
        MyTestControl.TestHandler = this;
    }

    // Implementing methods here...
} 
```

界面工作正常。我只是好奇为什么每个人都占用这么多内存。我不认为接口应该真正影响性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:07:03.333

接口不占用内存；数据确实如此。您是实现类（除其他外）实际上占用了内存。

我会寻找一个内存分析器来帮助你缩小占用这么多内存的范围。您可能会一遍又一遍地创建不必要的对象，并且可以使用工厂模式进行改进，该模式将缓存可重用的对象。

Viausl Studio（我认为是 Premium 和 Ultimate 版本）有一个性能向导，包括内存分析（在 VS 2010 和 2012 中的“分析”菜单下）

我使用过[Ants Memory Profiler](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)并且喜欢它，但它不是免费的。但是，它确实有 14 天的免费试用期，可以让您度过难关。

# android - 使用openGL用位图设置ImageView的照片

> ID：12938698
> 
> 赞同：0
> 
> 时间：2012-10-17T16:14:47.853
> 
> 标签：android, image, opengl-es, bitmap

我知道有很多这样的问题，但没有任何帮助。所以我有`bitmap`，我应该把它设置为图像`ImageView`。这是我的代码的一部分

```
Size previewSize = camera.getParameters().getPreviewSize(); 
YuvImage yuvimage=new YuvImage(data, ImageFormat.NV21, previewSize.width, previewSize.height, null);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
yuvimage.compressToJpeg(new Rect(0, 0, previewSize.width, previewSize.height), 80, baos);
byte[] jdata = baos.toByteArray();

// Convert to Bitmap
Bitmap bmp = BitmapFactory.decodeByteArray(jdata, 0, jdata.length);
m_VideCaptureBitmap.setImageBitmap(bmp); 
```

我`data`的图像是字节数组，以字节为单位。所以我需要我的应用程序运行得更快，这就是我需要使用`openGl`. 任何人都可以提供链接或过去的简单代码，我可以将其用于我的应用程序吗？

# sql - 根据第 2 列的公共数据检索第 1 列的行

> ID：12938700
> 
> 赞同：5
> 
> 时间：2012-10-17T16:14:52.167
> 
> 标签：sql, sql-server

假设我有这样的输入：

```
1st column ---------2nd column
23 ---------------------- 0080
23 ---------------------- 0010
23 ---------------------- 0080
25 ---------------------- 0010
25 ---------------------- 0010
34 ---------------------- 0080
27 ---------------------- 0010
27 ---------------------- 0080 
```

我想检索第二列中同时包含 0080 和 0010 数据的第一列的所有行。结果将是这样的：

```
1st column--------- 2nd column
23 ---------------------- 0080
23 ---------------------- 0010
23 ---------------------- 0080
27 ---------------------- 0010
27 ---------------------- 0080 
```

从结果中我们可以看到第一列不包括 25，因为 25 在第二列中只有 0010，对于 34 在第二列中只有 0080 也是如此。

我尝试使用嵌套查询，但它变得非常慢，因为我的表非常大（包含大约 30,000 多行）。我正在寻找对大型数据表更快的智能技术。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:20:19.230

```
select * from your_table
where col1 in 
(
   select col1
   from your_table
   where col2 in ('0080', '0010')
   group by col1
   having count(distinct col2) = 2
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:21:05.713

```
select first
from t
where second in ('0080', '0010')
group by first
having count(distinct second) = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:23:48.847

```
SELECT t.Col1,t.Col2
  FROM dbo.YourTable t
  JOIN(
    SELECT Col1, 
        MAX(CASE WHEN Col2 = '0010' THEN 1 ELSE 0 END) Has0010,
        MAX(CASE WHEN Col2 = '0080' THEN 1 ELSE 0 END) Has0080
      FROM dbo.YourTable
      GROUP BY Col1
  )FilterTbl f
  ON t.Col1 = f.Col1 AND f.Has0010 = 1 AND f.Has0080 = 1 
```

# html - 需要从下拉 html 5 中进行选择

> ID：12938701
> 
> 赞同：6
> 
> 时间：2012-10-17T16:14:52.240
> 
> 标签：html, requiredfieldvalidator, required

是否可以强制/要求用户从下拉菜单中进行选择？例子：

```
<form action="">
<select name="cars">
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat">Fiat</option>
<option value="audi">Audi</option>
</select>
</form> 
```

默认选择“沃尔沃”。我想要的是让浏览器知道用户已经做出选择并且不接受自动默认值。

我在想这样的事情：

```
<form action="">
<select name="cars" required="required">
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat">Fiat</option>
<option value="audi">Audi</option>
</select>
</form> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:51:04.837

我调整了一个来自 jquery validate 的例子，让它为你工作。我知道在您最初的问题中您要求它基于 HTML5，但也许这个混合示例是可以接受的。

[http://jsfiddle.net/36MkJ/](http://jsfiddle.net/36MkJ/)

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
    <script>
        $(document).ready(function(){
            $("#carsForm").validate();
        });
    </script>
</head>
<body>
<form class="cmxform" id="carsForm" method="get" action="">
    <select name="cars" class="required">
        <option value="">Select a car</option>
        <option value="volvo">Volvo</option>
        <option value="saab">Saab</option>
        <option value="fiat">Fiat</option>
        <option value="audi">Audi</option>
    </select>
    <p>
        <input class="submit" type="submit" value="Submit"/>
    </p>
</form> 
```

原始示例位于[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-14T13:31:33.007

自问题发布以来已经过去了很多时间。对于像我一样遇到这个问题的任何人，现在解决方案变得更加简单：您可以在选择中添加第一个选项，而不设置任何值。浏览器会自动将其视为“未选择任何内容”：

```
<!DOCTYPE html>
<html>
  <body>
    <form>
      <select required>
        <option value="">Please select</option>
        <option value="volvo">Volvo</option>
        <option value="saab">Saab</option>
        <option value="opel">Opel</option>
        <option value="audi">Audi</option>
      </select>
      <input type="submit"/>
    </form>
  </body>
</html> 
```

JSFiddle 显示它无需进一步的 JS 即可工作：[https ://jsfiddle.net/nrs5a7qh/](https://jsfiddle.net/nrs5a7qh/)

# mysql - SQL 注入和多行注释

> ID：12938703
> 
> 赞同：0
> 
> 时间：2012-10-17T16:14:58.787
> 
> 标签：mysql, sql, oracle, sql-injection

我正在测试客户的查询并遇到了一个有趣的问题。恶意的黑客 SQL 是否会注入以下查询：

```
SELECT * FROM mytable WHERE 1
AND cfield='0'
AND (
field1 like '%$searchterm%' OR
field2 like '%$searchterm%' OR
) 
```

例如，在我看来，他无法注释掉第一个 $searchterm 之后的内容，而只需插入其他查询：

```
field1 like '%$searchterm%' 
```

不过，我可能是错的。期待您的意见。先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:26:58.147

试试这个：

```
SELECT * FROM mytable WHERE 1
AND cfield='0'
AND (
field1 like '%' || :searchterm || '%' OR
field2 like '%' || :searchterm || '%' OR
) 
```

...`:searchterm`输入参数在哪里填写您最喜欢的语言提供的任何功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T16:20:12.630

```
searchterm = "');drop table customers;SELECT * FROM mytable WHERE ( field1 like '" 
```

# parallel-processing - OpenCL 中不支持的原子操作

> ID：12938705
> 
> 赞同：2
> 
> 时间：2012-10-17T16:15:01.190
> 
> 标签：parallel-processing, opencl

我正在为 OpenCL 使用原子操作。相同的代码适用于英特尔 CPU，但在 Nvidia GPU 上出错。我为 32 位和 64 位都启用了 Atomics。

```
 int cidx=idx%10;

     int i=1;
     C[idx]=In1[idx] & In2[idx];
     atomic_add(R,i); 
```

这只是整体代码的一部分。它在 Nvidia Quadro GPU 上运行时出现构建错误“不支持的操作”，而在 Intel i3、Xeon 和 AMD 处理器上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T13:49:28.037

atomic_add 没有出现在 OpenCL 1.0 中，它是在规范的更高版本中添加的。您可能在两种不同的实现上运行，它们符合不同的 OpenCL 版本。

# javascript - 为网站制作“立即打印”部分

> ID：12938708
> 
> 赞同：2
> 
> 时间：2012-10-17T16:15:15.217
> 
> 标签：javascript, html, printing

我已经为一个网站制作了一个发票系统，我希望能够只打印发票（非网站图形），所以我设置了一个页面，其中只有我想要打印的内容和底部的按钮说现在打印的页面，它会按照它说的去做。

问题是打印的页面上仍然明显有打印按钮。我想知道是否有一种方法可以让我拥有一个打印按钮，但能够在打印时摆脱该按钮？

这是我正在使用打印页面的代码：

```
<form>
    <input type="button" value=" Print this page" 
        onclick="window.print();return false;" />
</form> 
```

那么有没有办法做到这一点，一个简单的方法？

谢谢你的时间。

我刚刚意识到我可以把“window.print();return false;” 在我的 HTML 正文标记的“onload”部分，然后我可以删除按钮，一切都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:18:40.057

您需要使用 CSS 来定位打印媒体：

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

添加一些方法来定位您的打印按钮

```
<input type="button" value=" Print this page" class="button-print" onclick="window.print();return false;" /> 
```

并`print.css`隐藏你的按钮

```
.button-print {
    display:none;
} 
```

你可以做很多其他的事情来让你的页面更容易打印。[这是一篇关于它的好文章](http://www.onextrapixel.com/2009/05/05/how-to-create-a-simple-print-css-for-your-site/)

或者，您可以在主 CSS 文件中使用[打印 CSS 媒体查询](http://www.joshuawinn.com/css-print-media-query/)，但如果您想支持早期版本的 IE ( [http://caniuse.com/#search=media](http://caniuse.com/#search=media) )，您最好使用第一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:18:21.067

使用 css @media 打印。请参阅 css 媒体类型[http://www.w3schools.com/css/css_mediatypes.asp](http://www.w3schools.com/css/css_mediatypes.asp)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T16:18:37.320

我刚刚意识到我可以把“window.print();return false;” 在我的 HTML 正文标记的“onload”部分，然后我可以删除按钮，一切都很好。

现在，当我单击上一页上的打印链接时，这会在 chrome 中加载打印预览页面。

# c# - 性能调整分隔文件读取和写入数据库

> ID：12938709
> 
> 赞同：3
> 
> 时间：2012-10-17T16:15:35.513
> 
> 标签：c#, winforms, multithreading, enterprise-library

我需要帮助加快我的应用程序。应用程序读取大约 53,000 行分隔记录，解析每一行，然后继续将每一行发送到数据库以进行写入。到目前为止，我已将数据库端确定为主要瓶颈，我将不胜感激请帮助调整它。目前，处理所有记录（53,000 条）大约需要 20 分钟，每个记录有 190 个字段，我想从将数据发送到数据库的代码开始显着减少这个数字。

我使用 Enterprise Library 5，利用那里的连接池）像这样连接到数据库

```
 internal void SaveItem(String connString)
    {
        try
        {
            ImportDataAccessor dbacess = new ImportDataAccessor(connString);

            foreach (ItemDetail item in itemEZdetails)
            {
                if (dbacess.SaveProduct(RecordID, item))
                {
                    updatecounter++;
                }
            }
            successfulsaves = dbacess.RowsProcessed;
            updatecounter = dbacess.TotalRows;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

public bool SaveProduct(String RecordUID, ItemDetail item)
{
 //. . . . start function here
 DbCommand insertCommand = db.GetStoredProcCommand("IDW_spEZViewRecordImport");
 db.AddInParameter(insertCommand, "SessionUID", DbType.String, recordUID);
  // the other 189 Parameters go here 
        int rowsAffected = db.ExecuteNonQuery(insertCommand);
                   // Object sreturnval = (String)db.GetParameterValue(insertCommand, "ReturnVal");
                    String returnval = String.Empty;
                    if ( ! (db.GetParameterValue(insertCommand, "ReturnVal") == DBNull.Value))
                        returnval = (String)db.GetParameterValue(insertCommand, "ReturnVal");
                    if (returnval == "60")
                        RowsProcessed++;
                    result = rowsAffected > 0;
}
//end of line add 
```

我如何使用我现在拥有的代码来实现这一点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:52:43.277

使用[SQLBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)，因为它在输入多行时非常快。

```
DataTable newProducts = MakeTable();

    using (SqlBulkCopy bulkCopy = new SqlBulkCopy(connection))
    {
        bulkCopy.DestinationTableName = 
            "dbo.BulkCopyDemoMatchingColumns";

        try
        {
            // Write from the source to the destination.
            bulkCopy.WriteToServer(newProducts);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    } 
```

您只需要`DataTable`使用匹配的列名传递它，瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:48:33.890

可能，通过在存储过程中使用多记录 INSERT 命令可以获得更好的性能，如下所示：

```
Insert into ItemType (ItemTypeName)
VALUES
('TYPE1'),
('TYPE2'),
('TYPE3') 
```

# oop - 编程语言真的需要静态方法吗？

> ID：12938711
> 
> 赞同：1
> 
> 时间：2012-10-17T16:15:37.320
> 
> 标签：oop, static-methods

像 C# 或 Java 这样的编程语言具有静态方法，尽管它非常面向对象。

我知道在很多情况下出于性能或方便的原因使用静态方法，但我不禁想知道是否存在如果不使用静态方法就无法解决的实际编码问题。

我认为这里命名的一些常见情况可能只是“正常”方法，而不是静态方法，例如：

*   *main*：*main*方法的目的是创建程序的第一个运行线程并启动它。所以这也可能只是一个从 Thread 类派生的对象
*   *记录器*：记录器实现通常使用静态方法。我没有看到这一点，因为我可能想用相同的界面将一个记录器换成另一个
*   *数学*：乍一看，数学函数似乎确实是静态方法的完美候选者，但在某些情况下，您可能希望透明地将数学库交换为另一个数学库（即，如果您需要更多的 sin() 函数性能如果精度对您的应用程序不重要，则可能希望使用更快、精度更低的算法的实现）
*   *单身人士*：被许多人认为是不好的做法。如果只需要一个实例，您可能会考虑实际只创建一个实例。

那么，在哪些情况下**确实**需要静态方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:22:04.323

IMO，在定义工厂以创建给定类型的不同子类型的对象时需要静态方法，其中子类型的选择取决于此静态工厂方法的输入并且对客户端隐藏。

您的 Logger 示例实际上属于此类，其中实际记录器是根据所需的包/类决定的（当然，Logger 上的其他工厂方法采用其他参数来决定要返回的适当 Logger 实例）。

# c# - 如何选择随机数

> ID：12938713
> 
> 赞同：3
> 
> 时间：2012-10-17T16:15:44.397
> 
> 标签：c#, random, numbers

我需要在 C# 中获取一个随机数，`(-15, 15)`但不会在`(-10, 10)`浮点数之间生成值。像随机应该带有 in`(-15,-10)`和`(10,15)`。

有可能得到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T16:26:29.940

这可以在一行中完成，但为了清楚起见，我将其分开。

```
public double GetRandomNumber()
{ 
    //Between 0 and 1
    Random random = new Random();
    double randomNumber = random.NextDouble();

    //Between -0.5 and 0.5;
    randomNumber -= 0.5;

    //Between -5.0 and 5.0;
    randomNumber *= 10.0;

    //Between [-15.0, -10.0] or [10.0, 15.0]
    randomNumber += Math.Sign(randomNumber) * 10.0;

    return randomNumber;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:20:12.300

一种方法是使用它：

```
var random = new Random();

var result = random.NextDouble();
if(result < 0.5)
    result = -15 + result * 10;
else
    result = 5 + result * 10; 
```

`Random.NextDouble`生成一个介于 0.0 和 1.0 之间的数字。
如果它小于 0.5，我们将其视为创建负数的指标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:21:37.373

另一种方法，假设您确实希望结果中有一个小数位（因为它并不完全清楚）。

```
Random rand = new Random();
var intValue = rand.Next(10,15);
var decimalValue = rand.NextDouble();
var sign = rand.Next(0,1);
if (sign == 0) sign = -1;
return (intValue + decimalValue) * sign; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:18:51.517

生成两个随机数。第一个随机数将选择您是在 -15 到 -10 范围内，还是在 10 到 15 范围内，第二个随机数 - 您想要在该范围内走多远。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T16:19:44.637

尝试：

```
Random random = new Random();
float value = (float) (Math.Sign((random.NextDouble() - 1)) * (10 + 5 * random.NextDouble())); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T16:26:56.133

```
 static Random r = new Random(2);

    static void Main(string[] args)
    {

        int d = r.Next(-15, 15);
        while ((d >= -15 && d <= -10) || (d >= 10 && d <= 15))
            Console.WriteLine(d);
        Console.ReadLine();
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T16:39:10.283

如果您想要整数并且希望它具有高性能，我会使用：

```
var rand = new Random();
int value = rand.Next(-5, 7);
return value > 0 ? value + 9 : value - 10; 
```

我假设您想要范围内的数字：[-15, -10] 和 [10, -15]。适当调整上面的硬编码值。为了提高性能，可能有一种方法可以做一些算术并避免比较，但我会把它留给评论。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-17T16:48:04.683

这是实现此目的的静态方法：

```
public static int RandomRange(int min, int max, bool includeNegatives = false)
{
    if( min >= max) throw new Exception("min can't be greater than max");
    Random rdm = new Random();
    int num = 0;
    while (num < min) num = rdm.Next(max + 1);
    return num * (rdm.Next() % 2 == 0 ? -1 : 1);
} 
```

调用它：

```
var TenToFifteenNegatives = RandomRange(10, 15, true);
var TenToFifteenNoNegatives = RandomRange(10, 15); 
```

# facebook-graph-api - graph.facebook 没有按预期工作

> ID：12938715
> 
> 赞同：2
> 
> 时间：2012-10-17T16:15:54.267
> 
> 标签：facebook-graph-api

为什么这个[http://graph.facebook.com/mytrimet](http://graph.facebook.com/mytrimet)返回这个......

```
{
   "error": {
      "message": "Unsupported get request.",
      "type": "GraphMethodException",
      "code": 100
   }
} 
```

而不是关于页面的通常信息。我忽略了什么简单的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:22:18.183

似乎“mytrimet”在 Facebook 中不是有效的有效对象。如果这是您创建的对象，请检查它是否是公共的。查看[http://graph.facebook.com/platform](http://graph.facebook.com/platform)。它是平台。

# ruby-on-rails - 在 application.css 预编译上的 Rails 3.2 sass 错误

> ID：12938716
> 
> 赞同：1
> 
> 时间：2012-10-17T16:15:54.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline, assets

升级到 rails 3.2 后，出现此错误`rake assets:precompile`

```
Invalid CSS after "*": expected "{", was "html .fileinput..." 
```

这是跟踪： http: [//paste.ubuntu.com/1285319/](http://paste.ubuntu.com/1285319/)

`application.css`几乎是默认值：

```
/*
 * This is a manifest file that'll automatically include all the stylesheets available in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 *= require_self 
 *= require_tree . 
*/ 
```

显然它不喜欢 CSS 中的注释，SASS 或 Rails 中是否有一些我没有注意到的变化？

以下是 sass 的版本：

```
sass (3.2.1)
sass-rails (3.2.5)
  railties (~> 3.2.0)
  sass (>= 3.1.10)
  tilt (~> 1.3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:21:34.593

该错误是由`jquery.fileupload-ui.css`（jQuery File Upload UI Plugin CSS 6.3）中的这一行引起的

```
/* Fix for IE 6: */
*html .fileinput-button {
  line-height: 22px;
  margin: 1px -3px 0 0;
} 
```

# linux-kernel - MSI 和 MSI-X 载体支持

> ID：12938727
> 
> 赞同：1
> 
> 时间：2012-10-17T16:16:28.310
> 
> 标签：linux-kernel, interrupt

我在 Linux 内核代码中究竟可以在哪里找到分别支持 32 个向量和 2048 个向量的 MSI 和 MSI-X 的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:01:32.363

您所指的限制实际上来自 PCI 标准。例如，请参阅此免费提供的关于 MSI 的简报：

[http://www.pcisig.com/developers/main/training_materials/get_document?doc_id=1c17cc8e96e3c1969ef8969569648e10d65d7e4d](http://www.pcisig.com/developers/main/training_materials/get_document?doc_id=1c17cc8e96e3c1969ef8969569648e10d65d7e4d)

在内核本身中，MSI 源代码中进行了一些健全性检查，但看起来最大矢量数是从设备的 PCI 配置空间中提取的，它永远不应返回超过 32（2048）：

[http://lxr.free-electrons.com/source/drivers/pci/msi.c?a=sh#L811](http://lxr.free-electrons.com/source/drivers/pci/msi.c?a=sh#L811)

# mysql - 使用 Filesort - 无法避免，即使使用索引

> ID：12938731
> 
> 赞同：1
> 
> 时间：2012-10-17T16:16:40.613
> 
> 标签：mysql, filesort

我有一个包含 40,000,000 行的表，我正在尝试优化我的查询，因为耗时太长。
首先，这是我的表：
CREATE TABLE `resume`(
`yearMonth`char(6) DEFAULT NULL,
`type`char(1) DEFAULT NULL,
`agen_o`char(5) DEFAULT NULL,
`tar`char(2) DEFAULT NULL,
`cve_ent`char(1) DEFAULT NULL,
`cve_mun`char(3) DEFAULT NULL，
`cve_reg`int(1) 默认 NULL，
`id_ope`char(1) 默认 NULL，
`ope_tip`char(2) 默认 NULL，
`ope_cve`char(3) 默认 NULL，
`cob_u`int(9) 默认 NULL，
`tot_imp`bigint(15) 默认 NULL，
) ENGINE=MyISAM 默认字符集=拉丁语1；

这是我的查询：
SELECT m.name_ope AS cve,
SUBSTRING(r.yearMonth,5,2) AS period,
COUNT(DISTINCT(CONCAT(r.agen_ope,r.cve_ope))) AS num,
1 PRIMARY r ref indice indice 2 const 14774607 使用 where；使用文件排序

所以我用 yearMonth 添加了另一个索引 ope_cve，但我仍然有“使用文件排序”。我该如何优化呢？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:01:56.130

在不修改表结构的情况下，如果您在 yearMonth 上有索引，则可以尝试以下操作：

```
SELECT m.name_ope AS cve,
SUBSTRING(r.yearMonth,5,2) AS period,
COUNT(DISTINCT(CONCAT(r.agen_ope,r.cve_ope))) AS num,
SUM(CASE WHEN r.type='A' THEN r.cob_u ELSE 0 END) AS tot_u,
FROM resume r, media m
WHERE CONCAT(r.id_ope,SUBSTRING(r.ope_cve,3,1))=m.ope_cve AND
r.type IN ('C','D','E') AND
r.yearMonth LIKE '2012%' AND
r.id_ope='X' AND
SUBSTRING(r.ope_cve,1,2) IN (SELECT cve_med FROM catNac WHERE numero='0')
GROUP BY r.yearMonth,SUBSTRING(r.ope_cve,3,1) 
```

变化：

*   Using`r.yearMonth LIKE '2012%'`应该允许将索引用于 where 子句的那部分。
*   由于除了 2012 年之外，您每年都在过滤，因此您可以`GROUP BY r.yearMonth`单独分组。
*   `ORDER BY`由于 MySQL 排序，因此不需要该子句`GROUP BY`，除非您包括`ORDER BY NULL`

# c# - 发布和调试之间的区别？

> ID：12938732
> 
> 赞同：6
> 
> 时间：2012-10-17T16:16:41.897
> 
> 标签：c#, visual-studio-2010, while-loop, backgroundworker, release

当我将 Visual Studio 2010 配置从 Debug 更改为 Release 时，我得到了一个非常奇怪的行为：

我有一个`BackgroundWorker`: `_bg`，在`DoWork`我有：

```
 iswaiting = true;
                _bg.ReportProgress(1, filePath);
                while (iswaiting)
                {                        
                  ;
                }
                //My other part of code (EDIT: something do to with the `result` I get from the user.) 
```

在`ProgressChanged`我有一个`MessageBox`和用户交互之后，`iswaiting`将设置回false并且`_bg` `DoWork`程序将继续。

```
 void _bg_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        //my other part of code........
       result = Microsoft.Windows.Controls.MessageBox.Show("Question" ,"Title", MessageBoxButton.YesNoCancel, MessageBoxImage.Warning);

       iswaiting=false; 
       log(iswaiting.toString());                  
    } 
```

*当我从 Visual Studio 运行它或在Debug*模式下构建时，所有这些工作都非常好，但是当我将它构建到*Release*时，我永远不会退出`while(iswaiting)`循环，尽管我可以从日志中看到`iswaiting`已经设置回`false`.

**编辑**：

**更好的方法是非常受欢迎的！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T16:19:25.407

这可能是由于线程优化。为了安全地“看到”`iswaiting`释放模式的变化，您需要一个内存屏障。

“修复”此问题的最简单方法是将标记`iswaiting`为[`volatile`](http://msdn.microsoft.com/en-us/library/x13ttww7.aspx)：

```
volatile bool iswaiting; 
```

话虽如此，像这样“旋转”将完全消耗一个 CPU 内核。更好的方法是使用 a`ManualResetEvent`表示您可以继续。

```
// Add:
private ManualResetEvent allowProgress = new ManualResetEvent(false); 
```

然后，而不是使用 iswaiting，你会这样做：

```
_bg.ReportProgress(1, filePath);
allowProgress.WaitOne(); // This will block until it's set 
```

要允许此操作继续，请使用：

```
 result = Microsoft.Windows.Controls.MessageBox.Show("Question" ,"Title", MessageBoxButton.YesNoCancel, MessageBoxImage.Warning);

  allowProgress.Set(); 
```

这里的好处是你在阻塞的时候不会消耗CPU，你也不必自己担心内存屏障。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T16:20:05.297

因此，您的问题很可能是您使用的是布尔字段，并且您没有将其标记为`volatile`. 因此，某些优化（通常仅在发布模式下应用）可能导致两个线程都访问其线程本地的字段副本（例如，可能在其处理器核心的缓存上）。

但是，在这里标记字段`volatile`并不是一个好主意。您有一个更根本的问题，因为您正在执行旋转等待，这实际上总是一个坏主意。您应该使用一种实际暂停线程直到它应该继续的方法。一种方法是使用 a`ManualResetEvent`或 a `Semaphore`。

查看您的代码，您正在等待用户关闭在进度更改事件中触发的消息框。我想说的是，您应该简单地将其包含在实际的“工作”事件中，而不是将其包含在进度更改事件中。doWork 方法最好在触发后不关心进度更改事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-18T14:31:10.167

更好的方法是使用可以继续的信号量信号。

```
private Semaphore semaphore = new Semaphore(1, 1000);
semaphore.WaitOne(); 
```

在你想释放之后

```
semaphore.Release(); 
```

# drupal - Drupal 7：使自定义模块在用户菜单中创建菜单项

> ID：12938733
> 
> 赞同：2
> 
> 时间：2012-10-17T16:16:46.400
> 
> 标签：drupal, drupal-7, drupal-navigation

就像标题所说的那样。如果您将一个项目添加到 hook_menu 函数并将其声明为“MENU_NORMAL_ITEM”类型，它将显示在导航菜单中。有没有办法在那里创建一个显示在用户菜单中的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:25:53.503

[有关hook_menu](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)函数，请参阅 drupal 文档。使用您的自定义菜单项，您可以声明“menu_name”，然后传递您希望添加项目的菜单的名称。在您的情况下，它将是“用户菜单”：

```
<?php

function mymodule_menu(){
    $items['mymodulepath'] = array(
        'title' => 'My Module User Item',
        'type' => MENU_NORMAL_ITEM,
        'menu_name' => 'user-menu',
    );

    return $items;
} 
```

# javascript - 根据属性值隐藏div？

> ID：12938737
> 
> 赞同：0
> 
> 时间：2012-10-17T16:16:59.403
> 
> 标签：javascript, jquery, plugins, jquery-masonry

我希望根据其属性值更改某些 div 的类（隐藏）。
这是我的代码，一旦你看到它可能会更有意义：

```
jQuery('#menu1').click(function() {
      jQuery([.attr('imageref')]!=[.attr('menuref')]).removeClass('pics').addClass('.pics-hidden').removeClass('pics').fadeOut(200);
      jQuery('#projectimages').masonry('reload');
       }); 
```

所以我想要的是，如果你点击`#menu1`它，它将使用与atrtribute`.pics`相同的`imageref`属性来删除。`#menu1``menuref`

因此，单击等于 1 的，将隐藏也等于 1 的相关`#menu1`项。希望这是有道理的，任何帮助将不胜感激！`menuref``.pics``imageref`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:33:03.897

您可以使用 css 选择器来完成此操作。

IE：

```
jQuery('#menu1').click(function()
{
  jQuery('[imgeref="menuref"]').removeClass('pics').addClass('pics-hidden');
}); 
```

编辑：

这将搜索他的属性“imageref”设置为“menuref”的所有元素，然后删除类图片并添加类图片隐藏。如果只需要 img 标签。那么你可以改变：

```
jQuery('[imgeref="menuref"]') 
```

至

```
jQuery('img[imgeref="menuref"]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:20:07.993

您可能会使用 jQuery 过滤器功能。

[http://api.jquery.com/filter/](http://api.jquery.com/filter/)

> 描述：将匹配元素的集合减少为匹配选择器或通过函数测试的元素。

```
var menuref = ("#menu1").attr('menuref')
// Get all pics with an imageref attribute
jQuery(".pics[imageref]")
// Filter them
.filter(function(){
  return $(this).attr('imageref') != menuref; 
})
// Do what ever you want e.g. remove the pics class
.removeClass('pics') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:33:14.703

您使用[*属性等于选择器*](http://api.jquery.com/attribute-equals-selector/)，并将属性的值连接到选择器中`menuref`。

```
jQuery('#menu1').click(function() {
      var menu = $(this).attr('menuref');
      jQuery(".pics[imageref='" + menu + "']").toggleClass('pics pics-hidden')
                                              .fadeOut(200);
      jQuery('#projectimages').masonry('reload');
}); 
```

# eclipse - MoSync IDE：如何在 Bluestacks 中运行 apk？

> ID：12938744
> 
> 赞同：0
> 
> 时间：2012-10-17T16:17:30.957
> 
> 标签：eclipse, mosync, bluestacks

我正在尝试 MoSync IDE（Eclipse 的特殊版本，用于使用 HTML/Javascript 开发跨浏览器的 Android 和 iOS 应用程序）。

它目前使用标准的 SDK Android 模拟器，速度非常慢。我发现 Bluestacks 是一个闪电般的安卓模拟器。

我已经找到了如何在 Eclipse 中将 Bluestacks 与 Phonegap 一起使用（通过使用`adb connect`命令），但我不知道是否可以从 MoSync IDE 中测试 Bluestacks 上的应用程序......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:26:47.803

这适用于 Mac，我认为它不应该在 Windows 上也适用：

*   启动 Bluestacks
*   运行*MOSYNCDIR* /bin/android/adb connect localhost:10001，其中*MOSYNCDIR*是您的 MoSync 安装目录
*   **在 MoSync IDE 中，单击Select Target Device**工具栏项旁边的小箭头，然后在下拉列表中选择**Scan for Android USB device**
*   如果连接正确，则会弹出一个对话框，其中包含已连接设备的列表。选择*localhost:10001*并单击**确定**
*   要在模拟器上实际运行，请在**Project Explorer**中选择一个项目（通常是 IDE 中最左侧的面板）。然后单击**发送到目标设备**工具栏项。

# python - 更改/添加有效负载现有 TCP 包？

> ID：12938750
> 
> 赞同：0
> 
> 时间：2012-10-17T16:17:51.633
> 
> 标签：python, regex, networking

我想更改所有现有传出数据包的有效负载，因此所有包含“wordA”的数据包都将更改为“wordB”，这将通过正则表达式匹配来完成。

我尝试了 Python 的 scapy，但我不知道如何让它工作。

PS：这里不会涉及任何wifi。需要端口转发的选项已折旧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:00:55.273

```
import re
text = re.sub("\bwordA\b", "wordB", text) 
```

# android - 单击时从 RelativeLayout 获取 ImageView 和 TextView

> ID：12938753
> 
> 赞同：0
> 
> 时间：2012-10-17T16:18:06.133
> 
> 标签：android, textview, android-linearlayout, android-relativelayout

我在 Realtive Layout 中有 ImageView 和 textview。相对布局的 Onclcik 我需要获取文本视图的值并需要更改图像视图。获取空指针异常。这是代码

活动代码

```
inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                int id=0;

                    for (int idx = 0; idx < dataFromDb.size(); idx++) {
                        id = idx + 1;
                        rel = (RelativeLayout) inflater.inflate(
                                R.layout.newdata, null);
                        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                                LayoutParams.WRAP_CONTENT,
                                LayoutParams.WRAP_CONTENT);
                        params.setMargins(0, 50, 0, 0);
                        txt = (TextView) rel.findViewById(R.id.fetchData);
                        txt.setText(dataFromDb.get(idx));
                        txt.setId(id);

                        img = (ImageView) rel.findViewById(R.id.tickbox);
                        img.setImageResource(R.drawable.tickbox1a);
                        img.setId(id);

                        rel.setOnClickListener(new ImageView.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                // TODO Auto-generated method stub
                                Toast.makeText(DoTask.this,
                                        "Selected" + v.getId(),
                                        Toast.LENGTH_LONG).show();
                                RelativeLayout im=(RelativeLayout)v;
                                ImageView i=(ImageView)im.findViewById(im);
                                i.setImageResource(R.drawable.tickbox1b);
                            }
                        });

                        content.addView(rel, params);

                    } 
```

新数据.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/tickbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/tickbox1a"
        android:paddingBottom="10dp" />

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/fetchData"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:paddingTop="2dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/gray"
        android:textSize="18sp" />

</RelativeLayout> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:36:49.023

我相信你应该是这样的：

```
 public void onClick(View v) {
                            // TODO Auto-generated method stub
                            Toast.makeText(DoTask.this,
                                    "Selected" + v.getId(),
                                    Toast.LENGTH_LONG).show();
                            RelativeLayout im=(RelativeLayout)v;
                            ImageView i=(ImageView)im.findViewById(R.id.tickbox);
                            i.setImageResource(R.drawable.tickbox1b);
                        } 
```

您正在尝试在 relativelayout 上调用 findViewById，这是它期望和 id 时的视图。或者只使用您在上面定义的 img，不需要创建另一个 imageview 实例，因为您已经有了一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:48:58.743

活动代码应该是

```
inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int id=0;

                for (int idx = 0; idx < dataFromDb.size(); idx++) {
                    id = idx + 1;
                    rel = (RelativeLayout) inflater.inflate(
                            R.layout.newdata, null);
                    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                            LayoutParams.WRAP_CONTENT,
                            LayoutParams.WRAP_CONTENT);
                    params.setMargins(0, 50, 0, 0);
                    txt = (TextView) rel.findViewById(R.id.fetchData);
                    txt.setText(dataFromDb.get(idx));
                    txt.setId(id);

                    img = (ImageView) rel.findViewById(R.id.tickbox);
                    img.setImageResource(R.drawable.tickbox1a);
                    img.setId(id);

                    rel.setOnClickListener(new ImageView.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            Toast.makeText(DoTask.this,
                                    "Selected" + v.getId(),
                                    Toast.LENGTH_LONG).show();

                            img.setImageResource(R.drawable.tickbox1b);
                        }
                    });

                    content.addView(rel, params);

                } 
```

# vb.net - 允许用户在文本框中只写一个点和数字 VB.NET 2010

> ID：12938755
> 
> 赞同：1
> 
> 时间：2012-10-17T16:18:07.930
> 
> 标签：vb.net, forms, validation

我有一个文本框，我正在使用以下内容来验证用户只能添加数字，但我怎样才能让用户只写一个“。”

```
Private Sub txtDiagnostic_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles txtConsultor.KeyPress
        If e.KeyChar <> ChrW(Keys.Back) Then
            If Char.IsNumber(e.KeyChar) Then
            Else
                e.Handled = True
            End If
        End If
    End Sub 
```

我打算使用 contains() 或其他东西，但我怎么能意识到文本框 **只有一个点**？或者如何让用户可以只写一个点并且只写一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:20:18.340

在您的第一行之前添加此行`IF`

```
If (e.KeyChar.ToString = ".") And (txtDiagnostic.Text.Contains(e.KeyChar.ToString)) Then
     e.Handled = True
     Exit Sub
End If 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-11-18T23:21:42.633

试试这个代码对金钱有好处

```
 Private Sub LoanFeeTextBox_KeyPress(sender As Object, e As KeyPressEventArgs) Handles LoanFeeTextBox.KeyPress
        If Char.IsControl(e.KeyChar) Then
        ElseIf Char.IsDigit(e.KeyChar) OrElse e.KeyChar = "."c Then
            If LoanFeeTextBox.TextLength = 12 And LoanFeeTextBox.Text.Contains(".") = False Then
                LoanFeeTextBox.AppendText(".")
            ElseIf e.KeyChar = "." And LoanFeeTextBox.Text.IndexOf(".") <> -1 Then
                e.Handled = True
            ElseIf Char.IsDigit(e.KeyChar) Then
                If LoanFeeTextBox.Text.IndexOf(".") <> -1 Then
                    If LoanFeeTextBox.Text.Length >= LoanFeeTextBox.Text.IndexOf(".") + 3 Then
                        e.Handled = True
                    End If
                End If
            End If

        Else
            e.Handled = True
        End If
    End Sub 
```

# nhibernate - NHibernate ICritera 子查询与父值合并

> ID：12938759
> 
> 赞同：0
> 
> 时间：2012-10-17T16:18:20.137
> 
> 标签：nhibernate

我想从 ICriteria 生成以下 sql

```
select   c.Id, 
       sum(c.Amount) Amount,
       (select COALESCE(max(AuditDate), c.WhenAdded) FROM Audit a WHERE c.Id = a.CId) StatusDate
from    c
join    l
on  c.Id = l.CId
Group By c.Id, c.WhenAdded 
```

到目前为止我有

```
ICriteria crit = CurrentSession.CreateCriteria<C>()
     .CreateAlias("L", "l")
     .SetProjection(Projections.ProjectionList()
     .Add(Projections.Group<C>(x => x.Id), "Id")
     .Add(Projections.Sum("l.Amount"), "Amount")
     .Add(Projections.SubQuery(DetachedCriteria.For<Audit>("ca")
        .SetProjection(Projections.ProjectionList().Add(
              Projections.SqlFunction("COALESCE", 
                NHibernateUtil.DateTime, 
                Projections.Max<ClaimAudit>(x=> x.AuditDate),
                Projections.Property<C>(x => x.WhenAdded)), "StatusDate"))))
     .SetResultTransformer(Transformers.AliasToBean<CDto>()); 
```

但是我无法在子子查询的合并中获取父列。我得到以下异常

找不到属性 C.WhenAdded

我知道子查询正在子查询中查找名为 WhenAdded 的列，但不确定如何告诉它在父查询中查找？关于如何实现这一目标的任何想法？

附言。我需要以这种复杂的方式执行此操作，否则我会得到不正确的金额。因此，除非考虑到这一点，否则没有建议在没有子查询的情况下重新编写。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:06:24.400

将合并从子查询中移出并使用别名来限制 Adit 条目

```
ICriteria crit = CurrentSession.CreateCriteria<C>("c")
     .CreateAlias("L", "l")
     .SetProjection(Projections.ProjectionList()
         .Add(Projections.Group<C>(x => x.Id), "Id")
         .Add(Projections.Group<C>(x => x.WhenAdded), "WhenAdded")
         .Add(Projections.Sum("l.Amount"), "Amount")
         .Add(Projections.SqlFunction("COALESCE", NHibernateUtil.DateTime, 
             Projections.SubQuery(DetachedCriteria.For<Audit>()
                 .Add(Restrictions.PropertyEq("C.Id", "c.Id")
                 .SetProjection(Projections.Max<ClaimAudit>(x=> x.AuditDate)),
             Projections.Property<C>(x => x.WhenAdded)), "StatusDate")))
     // AliasToBean !?
     .List(); 
```

# python - GWTP mergelocales.py 的问题

> ID：12938761
> 
> 赞同：0
> 
> 时间：2012-10-17T16:18:27.690
> 
> 标签：python, gwt, gwtp

我正在尝试使用 mergelocales.py 脚本，但无法正常工作。

在我的 ui.xml（我用来测试它的那个）中，我有这个语言环境：

```
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    ui:generateFormat='com.google.gwt.i18n.rebind.format.PropertiesFormat'
    ui:generateKeys="com.google.gwt.i18n.rebind.keygen.MD5KeyGenerator"
    ui:generateLocales="en_US, es_ES"
    ui:defaultLocale="es_ES"
    xmlns:g="urn:import:com.google.gwt.user.client.ui"> 
```

然后我使用“-extra extras”参数编译我的项目。这会在我的项目中生成一个“extras”目录，该目录有一个名为“myModule”的文件夹，该文件夹内是生成的 .properties 文件：

```
/myproject/extras/myModule/com.mycompany.myproject.client.mvp.views.MyViewImplMyViewImplUiBinderImplGenMessages_en_US.properties
/myproject/extras/myModule/com.mycompany.myproject.client.mvp.views.MyViewImplMyViewImplUiBinderImplGenMessages_es_ES.properties 
```

现在，我正在尝试运行 mergelocales.py 以获取 LocalizableResources*.properties 文件，并且当我尝试运行时：

python2.5 ~/Downloads/mergelocales.py extras/myModule src/main/java/com/google/gwt/i18n/client/

我得到以下堆栈跟踪：

```
Skipping non-default locale in extra directory: com.mycompany.myproject.client.mvp.views.MyViewImplMyViewImplUiBinderImplGenMessages_en_US.properties
Skipping non-default locale in extra directory: com.mycompany.myproject.client.mvp.views.MyViewImplMyViewImplUiBinderImplGenMessages_es_ES.properties
Traceback (most recent call last):
  File "/Users/admin/Downloads/mergelocales.py", line 497, in <module>
    main()    
  File "/Users/admin/Downloads/mergelocales.py", line 131, in main
    mergeLocales( args[0], args[1] )
  File "/Users/admin/Downloads/mergelocales.py", line 466, in mergeLocales
    pathname = os.path.join( resourcesDir, defaultLocaleFilename )
  File "/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/posixpath.py", line 60, in join
    if b.startswith('/'):
AttributeError: 'NoneType' object has no attribute 'startswith' 
```

为了让这个脚本正常工作，我缺少什么东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-13T18:34:39.973

**现在，我正在尝试运行 mergelocales.py 以获取 LocalizableResources*.properties 文件，并且 [...] 我得到以下堆栈跟踪...**

您必须自己**手动**创建空白的 LocalizableResource.properties 文件，它们将由 mergeLocales 脚本填充。看这里：

*假设我们希望我们的应用程序也提供法语版本。**我们需要创建两个**名为 LocalizableResource.properties 和 LocalizableResource_fr.properties 的空文件。LocalizableResource.properties 将包含默认（英语）文本，而 LocalizableResource_fr.properties 将包含法语文本。这些文件应位于 src/main/resources/com/google/gwt/i18n/client 中。*

来自[http://blog.arcbees.com/2015/09/15/i18n-using-gwts-uibinder/](http://blog.arcbees.com/2015/09/15/i18n-using-gwts-uibinder/)

# r - 将函数应用于列表列表的有效方法

> ID：12938765
> 
> 赞同：6
> 
> 时间：2012-10-17T16:18:40.397
> 
> 标签：r, plyr

我有 80 个有关项目的清单。每个列表都是长度为 1000 的列表。我想在每个列表（1000 个中的每一个）上运行一个函数，并将结果分配回原始对象。总数据超过 150 个演出，所以我想确保在实际数据上运行它之前这是最有效的。这个简单的例子是做我需要的最好的方法吗？

```
# my actual function is obviously more complicated.
# But let's say the goal is to keep 2/5 items in each list
trivial <- function(foo) {
keep <- c("S1", "S2")
foo[which(keep %in% names(foo))]
}

sublist <- replicate(5, as.list(1:5), simplify=FALSE)
names(sublist) <- paste0("S", 1:5)
eachlist <- replicate(5, sublist, simplify = F)
a1 <- a2 <- a3 <- a4 <- a5 <- eachlist

# To clarify the layout
length(a1)
[1] 5
> length(a1[[1]])
[1] 5
> names(a1[[1]])
[1] "S1" "S2" "S3" "S4" "S5"
# I need to drop S3-S5 from each of 5 sublists of a1.
# Now I'd like to repeat this for all 80 lists named a[0-9].

# all the objects have a pattern sometextNUMBER. This list is 
# just the names of all the lists.
listz <-  as.list(ls(pattern="[a-z][0-9]"))
> listz
[[1]]
[1] "a1"

[[2]]
[1] "a2"

[[3]]
[1] "a3"

[[4]]
[1] "a4"

[[5]]
[1] "a5"
# I don't need anything returned, just for a1-a80 updated such that
# in each sublist, 3 of 5 items are dropped.

# This works fine, but my concern now is just scaling this up.
l_ply(listz, function(x){
     assign(as.character(x), llply(get(x), trivial), envir = .GlobalEnv)
    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:06:52.027

您可以遍历名称列表，使用`substitute()`and`eval()`首先构造然后执行您（不是！）想在命令行中单独键入的表达式：

```
objNames <- ls(pattern="[a-z][0-9]")

for(objName in objNames) {
    expr <- 
        substitute({
            OBJ <- lapply(OBJ, function(X) X[names(X) %in% c("S1", "S2")])
            }, list(OBJ = as.symbol(objName)))
    eval(expr)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:25:44.400

这是一个很好的用例`rapply`：

```
listz <- replicate(5, as.list(1:5), simplify=FALSE)
fun <- function(x) x*10
out <- rapply(listz, fun, how="replace") 
```

# c# - 从 Windows 服务 PInvoke

> ID：12938767
> 
> 赞同：0
> 
> 时间：2012-10-17T16:18:49.020
> 
> 标签：c#, c++, pinvoke

我正在尝试从 ac# windows 服务调用 cpp dll 函数，但每次调用时 - 服务立即停止并且不显示任何错误或抛出异常，并且事件日志为空。我还尝试通过另一个程序集（在服务之外）进行 PInvoke 调用，它可以工作。该服务正在 x86 中编译（与程序集相同）。

有任何想法吗？

下面是我的代码：

```
[DllImport(@"C:\Test.dll",
            EntryPoint = @"TestFn",
            SetLastError = true,
            CallingConvention = CallingConvention.Cdecl)]
        private static extern int TestCppDll(); 
```

调用我只是调用`TestCppDll();`

这解决了我的问题：

我将 cpp 代码中的 TestFn fn 从

```
extern "C" __declspec(dllexport) int
    TestFn() 
{
      return 1;
} 
```

至：

```
extern "C" __declspec(dllexport) int __stdcall 
    TestFn() 
{
      return 1;
} 
```

然后我更改了 c# 调用约定以使用 std 而不是 Cdecl

# objective-c - NSTask 启动路径错误

> ID：12938772
> 
> 赞同：0
> 
> 时间：2012-10-17T16:19:01.470
> 
> 标签：objective-c

> **可能重复：**
> [NSTask 启动路径不可访问](https://stackoverflow.com/questions/3221432/nstask-launch-path-not-accessible)

任何想法为什么要调用这个，

```
NSTask *buildMTask = [[NSTask alloc] init];
[buildMTask setLaunchPath:@"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\\ Simulator.app/Contents/MacOS/iPhone\\ Simulator"];
[buildMTask launch]; 
```

结果是

'启动路径不可访问' ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:26:20.273

```
NSString *appname = @"/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app/Contents/MacOS/iPhone Simulator";
NSTask *aTask = [[NSTask alloc] init];
[aTask setLaunchPath:appname];
BOOL exists = [[NSFileManager defaultManager] isExecutableFileAtPath:[aTask launchPath]];
NSLog(@"%@ '%@'\n", exists ? @"Exists" : @"Does Not Exist", [aTask launchPath]);
[aTask launch]; 
```

工作正常，甚至记录可执行文件存在。删除`\\`可执行文件名称中的 - 所有这些。

我建议在尝试运行应用程序之前使用可执行存在检查。

# file - 使用 Camel 逐行写入和读取文件

> ID：12938776
> 
> 赞同：1
> 
> 时间：2012-10-17T16:19:15.890
> 
> 标签：file, serialization, bytearray, apache-camel

我想用 Camel 在文件中写一个字节数组。但是，为了取回我的数组，我想逐行编写它们，或者使用另一个分隔符。如何用骆驼做到这一点？

```
from(somewhere)
    .process(new Processor() {

      @Override
      public void process(final Exchange exchange) throws Exception {
        final MyObject body = exchange.getIn().getBody(MyObject.class);

        byte[] serializedObject = MySerializer.serialize(body);
        exchange.getOut().setBody(serializedObject);

        exchange.getOut().setHeader(Exchange.FILE_NAME, "filename");
      }
    }).to("file://filepath?fileExist=Append&autoCreate=true"); 
```

或者有人有其他方法可以让他们回来吗？

PS：我只需要一个文件，否则就太容易了...

**编辑：** 我成功地使用 out.writeObject 方法逐行编写了我的文件（感谢 Petter）。我可以阅读它们：

```
InputStream file = new FileInputStream(FILENAME);
InputStream buffer = new BufferedInputStream(file);
input = new ObjectInputStream(buffer);

Object obj = null;
while ((obj = input.readObject()) != null) {
        // Do something
} 
```

但我无法用骆驼拆分和阅读它们。你有什么想法用 Camel 阅读它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:02:58.720

这取决于您的序列化对象的外观，因为您似乎拥有自己的序列化程序。它是标准的java二进制文件吗

```
ByteArrayOutputStream bos = new ByteArrayOuputStream();
ObjectOutput out = new ObjectOutputStream(bos);
out.writeObject(obj);
return bos.toByteArray(); 
```

使用像 \n 这样的基于文本的分隔符可能不是一个好主意。

你不能序列化成一些文本格式吗？Camel 有几种易于使用的数据格式：(http://camel.apache.org/data-format.html)。例如，Xstream 是一行左右的代码，用于从您的对象创建 XML，然后将文件拆分为几个 XML 部分并用 XStream 将它们读回并不是什么大问题。

在您的示例中，如果您真的想要一个分隔符，为什么不将它附加到字节 [] 中？将数组复制到一个新的、更大的 byte[] 并在最后插入一些唯一的序列。

# android - 在选项卡开关中保存片段状态

> ID：12938778
> 
> 赞同：3
> 
> 时间：2012-10-17T16:19:29.427
> 
> 标签：android, android-asynctask, android-viewpager, android-tabs

这是一个星期，我试图解决这个问题，但没有成功。请帮我。

我使用带有 viewpager 的标签导航。这是我放置选项卡和 FragmentPagerAdapter 类的类：

```
 public class Detail extends SherlockFragmentActivity {

    ViewPager  mViewPager;

    TabsAdapter mTabsAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

     ...

     ActionBar bar = getSupportActionBar();
     bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
     bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

     mViewPager = (ViewPager)findViewById(R.id.pager);

     // Add the tabs
     mTabsAdapter = new TabsAdapter(this, bar, mViewPager);
     mTabsAdapter.addTab(bar.newTab().setText(R.string.filmtab),
             FragmentFilm.class, null);
     mTabsAdapter.addTab(bar.newTab().setText(R.string.cinematab),
             FragmentCinema.class, null);
     mTabsAdapter.addTab(bar.newTab().setText(R.string.dintornitab),
             FragmentPdi.class, null);

     if (savedInstanceState != null) {
         bar.setSelectedNavigationItem(savedInstanceState.getInt("tab"));
     }

    }

     @Override
        protected void onSaveInstanceState(Bundle outState) {
            super.onSaveInstanceState(outState);
            outState.putInt("tab", getSupportActionBar().getSelectedNavigationIndex());
        }

     public static class TabsAdapter extends FragmentPagerAdapter
     implements ViewPager.OnPageChangeListener, ActionBar.TabListener {
         private final Context mContext;
         private final ActionBar mBar;
         private final ViewPager mViewPager;
         private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

         static final class TabInfo {
             private final Class<?> clss;
             private final Bundle args;

             TabInfo(Class<?> _class, Bundle _args) {
                 clss = _class;
                 args = _args;
             }
         }

         public TabsAdapter(Detail activity, ActionBar bar, ViewPager pager) {
             super(activity.getSupportFragmentManager());
             mContext = activity;
             mBar = bar;
             mViewPager = pager;
             mViewPager.setAdapter(this);
             mViewPager.setOnPageChangeListener(this);
         }

         public void addTab(ActionBar.Tab tab, Class<? extends Fragment> clss, Bundle args) {
             TabInfo info = new TabInfo(clss, args);
             tab.setTag(info);
             tab.setTabListener(this);
             mTabs.add(info);
             mBar.addTab(tab);
             notifyDataSetChanged();
         }

         @Override
         public int getCount() {
             return mTabs.size();
         }

         @Override
         public Fragment getItem(int position) {
             TabInfo info = mTabs.get(position);
             return Fragment.instantiate(mContext, info.clss.getName(), info.args);
         }

         @Override
         public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
         }

         @Override
         public void onPageSelected(int position) {
             mBar.setSelectedNavigationItem(position);
         }

         @Override
         public void onPageScrollStateChanged(int state) {
         }

         @Override
         public void onTabSelected(Tab tab, FragmentTransaction ft) {
             Object tag = tab.getTag();
             for (int i=0; i<mTabs.size(); i++) {
                 if (mTabs.get(i) == tag) {
                     mViewPager.setCurrentItem(i);
                 }
             }
         }

         @Override
         public void onTabUnselected(Tab tab, FragmentTransaction ft) {

         }

         @Override
         public void onTabReselected(Tab tab, FragmentTransaction ft) {

         }
     }
} 
```

3个片段类都是一样的，我这里只复制一个；在片段类中，我使用异步任务下载需要放入视图的数据，我在 onActivityCreated 方法中执行此操作：

```
public class FragmentFilm extends SherlockFragment
{

    private Detail act;

    private DetailedRec detail_film;
    private View view;
    private String a;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    {

        setRetainInstance(true);
        view = inflater.inflate(R.layout.tab_film_info, container, false);

        return view;
    }

    /*
    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

    }*/

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        act =  (Detail) getActivity();

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        new DownloadFilmDetailAsyncTask().execute();

    }

    private class DownloadFilmDetailAsyncTask extends AsyncTask<Void, DetailedRec, Void>
    {

        @Override
        protected void onPreExecute() {

            super.onPreExecute();

        }

        @Override
        protected void onPostExecute(Void result) {

            super.onPostExecute(result);

            ProgressBar prBar = (ProgressBar)getView().findViewById(R.id.progressbar_film);
            prBar.setVisibility(View.GONE);
            ScrollView lay = (ScrollView)getView().findViewById(R.id.tab_filmsummary);
            lay.setVisibility(View.VISIBLE);

        }

        @Override
        protected Void doInBackground(Void... params)
        {
            try
            {

                String locale = getResources().getConfiguration().locale.getDisplayName();

                JSONObject objSend = new JSONObject();
                objSend.put("idFilm", act.getIdFilm());
                objSend.put("cinemaId",act.getIdCinema());
                int ind = locale.indexOf("(");
                String locale_send = locale.substring(0, ind-1);
                objSend.put("locale", locale_send);
                ArrayList<String> otherCin = new ArrayList<String>(Arrays.asList(act.getOtherCinemas()));
                JSONArray othCin = new JSONArray(otherCin);
                objSend.put("otherCinemas", othCin );
                JSONObject jsonObject = sendAndGetJSONObject(JSON_SERVER+"JsonServer?op=getFilmbyId",objSend);

                DetailedRec detail_rec = new DetailedRec();
                //FILM
                detail_rec.setFilmId(jsonObject.getString("filmId"));
                detail_rec.setName(jsonObject.getString("name"));
                detail_rec.setImageUrl(jsonObject.getString("imageUrl").replace("640", "80"));
                detail_rec.setActors(jsonObject.getString("actors"));
                detail_rec.setGenre(jsonObject.getString("genre"));
                detail_rec.setDirector(jsonObject.getString("director"));
                detail_rec.setPlot(jsonObject.getString("plot"));
                detail_rec.setYear(jsonObject.getString("year"));
                detail_rec.setDuration(jsonObject.getString("duration"));
                detail_rec.setTrailer(jsonObject.getString("trailer"));
                detail_rec.setRating(jsonObject.getString("rating"));

                detail_film = detail_rec;
                publishProgress(detail_rec);

            }
            catch (IOException ignored)
            {
            }
            catch (JSONException ignored)
            {
            }
            return null;
        }

        @Override
        protected void onProgressUpdate(DetailedRec... values)
        {
            for (final DetailedRec detail_rec : values)
            {

                updateViews(detail_rec);

            }

        }

        private  JSONObject getJSONObject(String url) throws IOException, MalformedURLException, JSONException
        {
            HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();

            InputStream in = conn.getInputStream();

            try
            {
                StringBuilder sb = new StringBuilder();
                BufferedReader r = new BufferedReader(new InputStreamReader(new DoneHandlerInputStream(in),"WINDOWS_1252"));
                for (String line = r.readLine(); line != null; line = r.readLine())
                {
                    sb.append(line);
                }
                return new JSONObject(sb.toString());
            }
            finally
            {
                in.close();
            }
        }

        private  JSONObject sendAndGetJSONObject(String url,JSONObject request) throws IOException, MalformedURLException, JSONException
        {

            HttpClient client = new DefaultHttpClient();
            HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
            InputStream in=null;
            try{
                 HttpPost post = new HttpPost(url);
                 StringEntity se = new StringEntity(request.toString());  
                 se.setContentType((Header) new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                 post.setEntity(se);
                 HttpResponse response = client.execute(post);
                 HttpEntity entity = response.getEntity();
                 in = entity.getContent();
                 StringBuilder sb = new StringBuilder();
                 BufferedReader r = new BufferedReader(new InputStreamReader(new DoneHandlerInputStream(in),"WINDOWS_1252"));
                 for (String line = r.readLine(); line != null; line = r.readLine())
                 {
                    sb.append(line);
                 }
                 return new JSONObject(sb.toString());
            }catch(Exception e){

            }
            finally
            {
                in.close();
            }

            return null;

        }

    }

    private void updateViews(final DetailedRec detail_rec){
        //FILM
        TextView filmName = (TextView) getView().findViewById(R.id.movieTitle);
        filmName.setText(detail_rec.getName().trim());
        TextView actors = (TextView) getView().findViewById(R.id.movieActor);
        actors.setText(detail_rec.getActors().trim());
        TextView genre = (TextView) getView().findViewById(R.id.movieGenre);
        genre.setText(detail_rec.getGenre().trim());
        TextView director = (TextView) getView().findViewById(R.id.movieDirector);
        director.setText(detail_rec.getDirector().trim());
        TextView plot = (TextView) getView().findViewById(R.id.moviePlot);
        plot.setText(detail_rec.getPlot().trim());
        TextView year = (TextView) getView().findViewById(R.id.movieYear);
        year.setText(detail_rec.getYear().trim());
        TextView duration = (TextView) getView().findViewById(R.id.movieDuration);
        duration.setText(detail_rec.getDuration().trim());
        ImageView image = (ImageView) getView().findViewById(R.id.moviePoster);

        new DownloadImagesTask(detail_rec.getImageUrl().trim().replace("80", "100")).execute(image);
        //image.setImageBitmap(downloadBitmap(detail_rec.getImageUrl().trim().replace("80", "100")));
        //Rating
        if(detail_rec.getRating().compareTo("N/A")!=0){
            RatingBar rateBar = (RatingBar)getView().findViewById(R.id.MovieRatingBar);
            rateBar.setRating(Float.parseFloat(detail_rec.getRating()));
        }
        //Trailer 
        Button trailer = (Button)getView().findViewById(R.id.trailer);
        if(detail_rec.getTrailer().compareTo("")!=0){
            trailer.setVisibility(View.VISIBLE);
            trailer.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    int index = detail_rec.getTrailer().indexOf("v=");
                    String videoId="";
                    if(index!=-1){
                        videoId = detail_rec.getTrailer().substring(index+2); //"Fee5vbFLYM4";
                        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube:"+videoId)); 
                        intent.putExtra("VIDEO_ID", videoId); 
                        startActivity(intent); 
                    }

                }
            });
        }

    }

} 
```

好的，在我的应用程序中，我希望片段加载一次。我解释得很好：当我启动 Detail 类时，片段类是 istantiate 并且所有 3 个片段中的 AsyncTask 都启动，现在当用户从一个选项卡切换到另一个选项卡时，我希望选项卡中的片段未选中不会丢失数据和视图，因为现在当我从一个选项卡切换到另一个选项卡然后返回第一个选项卡时，这是重新创建的，并且再次调用 onActivityCreated 方法！

请帮助我，我在所有地方搜索，但我没有找到解决方案！

PS 我使用 SherlockActionBar，我不知道它是否相关。对不起，我的英语不好

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T18:13:40.743

在实例化之后`ViewPager`，添加这个

```
mViewPager = (ViewPager)findViewById(R.id.pager);
mViewPager.setOffscreenPageLimit(3); 
```

应该这样做！

# android - 在 BaseAdapter 中在 Android 中实现 SeekBar

> ID：12938781
> 
> 赞同：0
> 
> 时间：2012-10-17T16:19:35.810
> 
> 标签：android, json, seekbar

在我的应用程序中，我正在尝试实现 SeekBar。第一次播放声音时，SeekBar 工作正常。但是当我单击按钮再次播放声音时，我会陷入关于**MediaPlayer**的无休止的错误循环。我想要的是，当我在播放声音时，如果我点击播放按钮，声音应该从头开始播放，SeekBar 也应该从头开始。如果我删除了 SeekBar，那么一切正常。但是 SeekBar 在我的应用程序中是必须的。我已经在 BaseAdapter 中实现了所有这些东西。我必须在 BaseAdapter 中做所有的**事情**。所以请帮助我让我使用**BaseAdapter**的代码..

这是我的代码...请看一下...

```
mediaPlayer.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(activity, "Loading Message", Toast.LENGTH_LONG).show();

                mp.reset();
                try {
                    mp.setDataSource("url for any mp3 audio file");
                } catch (IllegalArgumentException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                mp.prepareAsync();
                mp.setOnPreparedListener(new OnPreparedListener() {

                    public void onPrepared(final MediaPlayer mp) {
                        // TODO Auto-generated method stub
                        mp.start();
                        mediaPlayer.setBackgroundResource(R.drawable.m_pause);
                        seekBar.setProgress(0);
                        seekBar.setMax(100);
                        mUpdateTimeTask = new Thread(new Runnable() {

                            public void run() {
                                // TODO Auto-generated method stub
                                try {
                                    Thread.sleep(100);
                                } catch (InterruptedException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                                long totalDuration = mp.getDuration();
                                   long currentDuration = mp.getCurrentPosition();
                                   int progress = (int)(utils.getProgressPercentage(currentDuration, totalDuration));
                                   seekBar.setProgress(progress);
                                   mHandler.post(this);
                            }
                        });
                        mUpdateTimeTask.start();
                    }
                });
            }
        });
        mp.setOnCompletionListener(new OnCompletionListener() {

            public void onCompletion(MediaPlayer mp) {
                // TODO Auto-generated method stub
                mediaPlayer.setBackgroundResource(R.drawable.m_play);
                mp.stop();
                try {
                    mUpdateTimeTask.join();
                    mHandler.sendEmptyMessage(0);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                mHandler.removeCallbacks(mUpdateTimeTask);
            }
        });
        seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            public void onStopTrackingTouch(final SeekBar seekBar) {
                // TODO Auto-generated method stub
                //mHandler.removeCallbacks(mUpdateTimeTask);
                if(mp.isPlaying())
                {
                    int totalDuration = mp.getDuration();
                    int currentPosition = utils.progressToTimer(seekBar.getProgress(), totalDuration);
                    mp.seekTo(currentPosition);
                    mUpdateTimeTask = new Thread(new Runnable() {

                        public void run() {
                            // TODO Auto-generated method stub
                            try {
                                Thread.sleep(100);
                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                            long totalDuration = mp.getDuration();
                               long currentDuration = mp.getCurrentPosition();
                               int progress = (int)(utils.getProgressPercentage(currentDuration, totalDuration));
                               //timer.setText(""+utils.milliSecondsToTimer(currentDuration));
                               seekBar.setProgress(progress);
                               mHandler.post(this);
                        }
                    });
                    mUpdateTimeTask.start();
                }
                else
                {
                    seekBar.setProgress(0);
                }
            }

            public void onStartTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub
                if(mp.isPlaying())
                {
                    mHandler.removeCallbacks(mUpdateTimeTask);
                }
                else
                {
                    seekBar.setProgress(0);
                }
            }

            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {
                // TODO Auto-generated method stub

            }
        });
        mp.setOnErrorListener(new OnErrorListener() {

            public boolean onError(MediaPlayer mp, int what, int extra) {
                // TODO Auto-generated method stub
                return false;
            }
        }); 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:25:17.463

在 BaseAdapter 中创建一个方法，将当前 seekbarprogress 设置为零

```
void setSeekBarValuetoZero(){  
    seekBar.setProgress(0);
} 
```

请检查 seekbar 初始化的初始位置。您可以在 mp.reset(); 之前从 yourMediaPlayer 类调用此函数；

# python - 格式字符串的参数不足

> ID：12938786
> 
> 赞同：0
> 
> 时间：2012-10-17T16:19:52.297
> 
> 标签：python, psycopg2

我试图在我的 python 脚本中传递一个 sql （如果我在客户端上运行它，它可以完美地工作），但我收到错误“格式字符串的参数不足”

接下来，代码：

```
sql = """
SELECT
  rr.iserver,
    foo.*, rr.queue_capacity,
    rr.queue_refill_level,
    rr.is_concurrent,
    rr.max_execution_threads,
    rr.retrieval_status,
    rr.processing_status
FROM
    (
        SELECT DISTINCT
            ip.package,
            it. TRIGGER
        FROM
            wip.info_package ip,
            wip.info_trigger it
        WHERE
            ip.service = it.service and
      ip.iserver = '%(iserver)s' and
      it.iserver = %(iserver)s'
        AND package = '%(package)s'
        UNION
            SELECT
                '%(package)s' AS package,
                TRIGGER
            FROM
                info_trigger
            WHERE
                TRIGGER LIKE '%(package)s%'
    ) AS foo,
    info_trigger rr
WHERE
    rr. TRIGGER = foo. TRIGGER
""" % {'iserver' : var_iserver,'package' : var_package}
dcon = Database_connection()
getResults = dcon.db_call(sql, dbHost, dbName, dbUser, dbPass)
# more and more code to work the result.... 
```

我的主要问题是如何`'%(iserver)s' , '%(package)s'` 正确通过。因为通常，当我在数据库上选择或插入时，我只使用两个变量，但我不知道如何使用两个以上的变量。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T16:24:38.520

不要使用以下方式构建 SQL `%`：

```
"SELECT %(foo)s FROM bar WHERE %(baz)s" %
  {"foo": "FOO", "baz": "1=1;-- DROP TABLE bar;"} 
```

这为讨厌的 SQL 注入攻击打开了大门。

使用正确形式的[Python 数据库 API 规范 v2.0](http://www.python.org/dev/peps/pep-0249/)适配器。对于 Psychopg，此表格在[此处](http://initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries)进行了描述。

```
cur.execute("SELECT %(foo)s FROM bar WHERE %(baz)s",
  {"foo": "FOO", "baz": "1=1;-- DROP TABLE bar;"}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T16:21:08.027

```
WHERE
                TRIGGER LIKE '%(package)s%' 
```

你有一个额外的“%”

如果你想要实际的字符 '%'，你需要用一个双 '%' 转义。

所以应该是

```
WHERE
                TRIGGER LIKE '%(package)s%%' 
```

如果你想显示一个 '%'

和

```
WHERE
                TRIGGER LIKE '%(package)s' 
```

如果你不

# r - 如何根据另一个数据帧中的值引用一个数据帧中的值？

> ID：12938798
> 
> 赞同：0
> 
> 时间：2012-10-17T16:20:41.867
> 
> 标签：r, pattern-matching, dataframe

我是 R 新手，在处理一些环境监测数据时对这个问题感到困惑。

我有两个数据集，分别记录了实际的监测时间序列和监测点信息。我将它们存储在两个数据框中`monitoring`，并且`sites`：

`monitoring:`

```
 date       site obs
 1 2001-01-01 10:00:00  riverside  NA
 2 2001-01-01 11:00:00  riverside  52
 3 2001-01-01 12:00:00  riverside  52
 4 2001-01-01 13:00:00  riverside  56
 5 2001-01-01 10:00:00       dorm  52
 6 2001-01-01 11:00:00       dorm  64
 7 2001-01-01 12:00:00       dorm  76
 8 2001-01-01 13:00:00       dorm  80
 9 2001-01-01 10:00:00        kfc  78
10 2001-01-01 11:00:00        kfc  74
11 2001-01-01 12:00:00        kfc  66
12 2001-01-01 13:00:00        kfc  68 
```

`sites:`

```
 site       type
 1      DORM   suburban
 2       KFC      urban
 3 RIVERSIDE      rural 
```

我想在其中添加一`site.type`列，`monitoring`其中提取的信息`sites`如下所示：

```
 date       site obs site.type
 1 2001-01-01 10:00:00  riverside  NA     rural
 2 2001-01-01 11:00:00  riverside  52     rural
 3 2001-01-01 12:00:00  riverside  52     rural
 4 2001-01-01 13:00:00  riverside  56     rural
 5 2001-01-01 10:00:00       dorm  52  suburban
 6 2001-01-01 11:00:00       dorm  64  suburban
 7 2001-01-01 12:00:00       dorm  76  suburban
 8 2001-01-01 13:00:00       dorm  80  suburban
 9 2001-01-01 10:00:00        kfc  78     urban
10 2001-01-01 11:00:00        kfc  74     urban
11 2001-01-01 12:00:00        kfc  66     urban
12 2001-01-01 13:00:00        kfc  68     urban 
```

我尝试`grep()`了以下命令：

```
for (i in 1:nrow(monitoring)) {
  monitoring$site.type[i] <- as.character(sites$type[grep(monitoring$site[i], sites$site, ignore.case = T)])
} 
```

它在这个小示例集上运行良好`monitoring`。但是，当我将它应用于包含 654,525 条记录的真实数据集时，它从未停止在具有 16 GB RAM 的 i5-2400 计算机上运行......

我尝试在 stackoverflow 上搜索现有问题，并确实找到了一些为类似场景提供相同解决方案的答案，因此更加困惑为什么它在我的情况下不起作用。所以，

1.  有人可以指出问题出在哪里吗？
2.  请问`for`在这种情况下如何避免循环，因为它可能不那么“时尚”和高效？:)

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:55:02.543

正如本建议的那样，正确的做法是使用`merge`，但这里有一个简单的技巧：

```
rownames( sites ) <- tolower( sites$site ) 
```

现在您可以`sites`使用诸如`riverside`try之类的键进行访问`sites[ "riverside", ]`。该`tolower()`功能仅用于`RIVERSIDE`变成`riverside`. 因此，你可以做

```
monitoring$site.type <- sites[ monitoring$site, "type" ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:15:57.373

按照 Ben 的建议使用`merge`会很容易

```
monitoring
sites$site <- factor(tolower(sites$site)) # cols are unordered

merge(monitoring, sites, by='site')

# fixing col order...
merge(monitoring, sites, by='site')[,c('date', 'site', 'obs', 'type')] 
```

# java - 空指针将二维数组对象方法设置为 true

> ID：12938799
> 
> 赞同：-1
> 
> 时间：2012-10-17T16:20:42.750
> 
> 标签：java, arrays, boolean, multidimensional-array

我有一个二维数组，它是 Node 类的对象。这是节点类：

```
public class Node {
private boolean edge;
private int parent;

public Node() {
 edge = false;
    parent = 0;
}

public Node(boolean edge, int parent) {
    this.edge = edge;
    this.parent = parent;
}

public boolean isNode() {
    return edge;
}

public void setNode(boolean node) {
    this.edge = node;
}

public int getParent() {
    return parent;
}

public void setParent(int parent) {
    this.parent = parent;
}
} 
```

这是我的二维数组：

```
private Node[][] adjMatrix = new Node[x][y]; 
```

在名为 addEdge 的方法中，我试图将数组中点 i、j 处的节点设置为 true。

```
public void addEdge(int i, int j) {
        adjMatrix[i][j].setNode(true);
        adjMatrix[j][i].setNode(true);
} 
```

但是我在这条线上得到了一个空指针异常，我不知道如何修复它。

```
adjMatrix[i][j].setNode(true); 
```

我认为这是一个简单的答案，但我一直找不到答案，因为我一直在寻找。所以任何帮助表示赞赏。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:22:33.223

您还没有`Nodes`在列表中实例化您的。

```
Node[][] adjMatrix = new Node[x][y]; 
```

上面的语句只初始化你的数组，并没有实例化其中的元素。

您需要使用 for 循环遍历矩阵，并对每个元素执行以下操作： -

```
adjMatrix[i][j] = new Node(); 
```

您需要在使用矩阵元素之前执行此操作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:22:39.490

数组初始化为 null，你必须分配 Node 的实例来填充数组。

# algorithm - 如何解决逻辑等价

> ID：12938801
> 
> 赞同：-1
> 
> 时间：2012-10-17T16:20:48.663
> 
> 标签：algorithm, math, logic, equivalence

好吧，我有一个等价物，我必须证明。这些等价使用双条件和布尔代数。但我不确定我应用逻辑等价定律的顺序。

### 编辑：

这是一个任务。几天来，我一直坚持下去，在不同的时间得到不同的答案。

```
-(p V (q ^ -r)) ^ q == (-p ^ q) ^ r 
```

我不一定希望任何人解决它，我希望他们以通用的方式解释他们将如何解决它以及他们适用法律的顺序。这样我就可以从中学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:18:08.990

好吧，只有这么多等价物可以解决。通过这些类型的课程和数学课程，通常你在工具箱中没有一些技巧可以这么说。德摩根定律等。一章可能会提到 4-5 条规则，你绝对应该尝试所有这些。

如果您只在一个方向上处理方程式，也可能有助于从另一侧工作。在您获得足够的经验来确定更好的初始猜测之前，这在很大程度上是一种游戏。但是当你玩它时，你会开始看到一些操作来相当接近，然后解决问题来找出你没有看到的 1-2 个操作。即使是我最好的教授也告诉我，你必须在桌子上敲打你的头，直到它起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:50:16.847

-(p V (q ^ -r)) ^ q

-((p V q) ^ (p V -r)) ^ q [通过 V 的分布 ^]

(-(p V q) V -(p V -r)) ^ q [德摩根]

((-p ^ -q) V (-p ^ r)) ^ q [德摩根]

(-p ^ -q) ^ q V (-p ^ r) ^ q [通过 V 的分布 ^]

-p ^ (-q ^ q) V (-p ^ r) ^ q [by assoc of ^]

-p ^ FV (-p ^ r) ^ q [由 A ^ -A == F，其中 F 为假 (0)]

FV (-p ^ r) ^ q [由 A ^ F == F，其中 F 为假 (0)]

(-p ^ q) ^ r [由 A v F == A，其中 F 为假 (0)]

# javascript - 在 ajax 请求上启用 jQuery contextMenu 项

> ID：12938805
> 
> 赞同：3
> 
> 时间：2012-10-17T16:21:05.517
> 
> 标签：javascript, jquery-plugins, contextmenu, jquery

如果 ajax 请求改变了我的 div 内容，我正在尝试更新[上下文菜单项。](http://medialize.github.com/jQuery-contextMenu/docs.html)

这就是我的意思，我有一个这样的 div：

```
<div id="" class="message" data-options='{"update":"YES", "delete":"NO">
</div> 
```

和上下文菜单 jquery 部分（仅在正文加载时发生一次）：

```
$.contextMenu({
        selector: '.message', 
        trigger: 'left',
        callback: function(key, options) {
            var m = "clicked: " + key;
            window.console && console.log(m) || alert(m); 
        },
        items: {
            "update": {
                name: "Update",
                disabled: function(key, opt) { 
                    return (this.data("options").update === "NO")
                },
            },
            "delete": {
                name: "Delete", 
                 disabled: function(key, opt) { 
                    return (this.data("options").delete=== "NO")
                }
           //etc. rest of the code 
```

我希望在发生某些 ajax 请求或以某种方式禁用/启用项目时重新创建它

所以现在发生了一些 ajax 请求并且成功后我正在尝试更新`div.message` `data-option`，因为我虽然启用/禁用了这样的按钮：

```
In ajax.success function :
- disable or enable menu items 
```

`--------Actually--------Simplified`

实际上这个问题/答案与我当前的问题非常相似：

[禁用和启用 jQuery 上下文菜单](https://stackoverflow.com/questions/4728957/disable-and-enable-jquery-context-menu)

我想在单击某些按钮时启用/禁用 contextMenu 项，如果我能够在这个虚拟示例中执行此操作，我想我也可以处理 ajax 请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T01:18:10.507

我使用`build`选项添加新项目，你可以看到你可以在这里做任何你想要的项目：http: [//jsfiddle.net/oceog/Tvv4P/1/](http://jsfiddle.net/oceog/Tvv4P/1/)

HTML：

```
<div class="context-menu-one box menu-1">
    <strong>right click me</strong>
</div>

<button id="add"> Add item</button>
<button id="disable_cut"> Disable cut</button>
<button id="enable_cut"> enable cut</button>
​ 
```

JS：

```
$.contextMenu({
    selector: '.context-menu-one',
    build: function($trigger, e) {
        console.log(e);
        return {
            callback: function(key, options) {
                var m = "clicked: " + key;
                console.log(m);
                //window.console && console.log(m) || alert(m); 
            },
            items: items
        };
    }
});
var items = {
    "edit": {
        name: "Edit",
        icon: "edit"
    },
    "cut": {
        name: "Cut",
        icon: "cut"
    },
    "copy": {
        name: "Copy",
        icon: "copy"
    },
    "paste": {
        name: "Paste",
        icon: "paste"
    },
    "delete": {
        name: "Delete",
        icon: "delete"
    },
    "sep1": "---------",
    "quit": {
        name: "Quit",
        icon: "quit"
    }};
var newitemN=0;
$('#add').click(function() {
            var newitem={};
        newitem['newitem_'+newitemN]={
            name: 'new item #'+newitemN,
            icon: "copy"
        };
   newitemN++;
   $.extend(items,newitem);
});

$('#disable_cut').click(function() {
    items.cut.disabled=true;
});

$('#enable_cut').click(function() {
    items.cut.disabled=false;
}); 
```

# bash - awk script, need to return results on multi lines following keyword

> ID：12938810
> 
> 赞同：0
> 
> 时间：2012-10-17T16:21:15.883
> 
> 标签：bash, shell, awk

Using this:

```
awk '$1 == "pool" { f=1; print $1,$2; next }         
     f == 1 { if ($1 == "pool") { print }               
              else if ($1 == "members") { print }   
              else if ($0 ~ /^}/) { f=0 }               
     }' bigip.conf 
```

That works fine until the config has the IPs on following lines. How can I get it to print the IPs if they are on following lines. The config has both, some have it on the same line, some on then next 1, 2 or 3 lines.

the data :

```
 pool pl_stage_xxx_microsites_9483 {
       monitor all tcp_half_open
       members {
          11.11.11.11:9483 {}
          11.22.22.22:9483 {
             session user disabled
          }
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:29:05.863

Try the following `awk` code:

```
awk '
$1 == "pool" {
    f=1
    print $1,$2
    next
}         
f == 1 {
    if ($1 == "pool") {
        print
    }               
    else if ($1 == "members") {
        print
        getline
        while ($0 ~ "[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}:[0-9]{1,5}"){
            print
            getline
        }
     }   
     else if ($0 ~ /^}/) {
         f=0
     }               
 }' 
```

That will print the IP lines while they exists.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:55:24.273

It's hard to say without seeing more of your data and your expected output but I think all you need is something like this:

```
awk '
/^}/ { inPool=0 }
$1 == "pool" { inPool=1; inMembers=0 }
inPool {
   if ($1 == "pool") {
      print $1, $2
      print
   }
   else if ($1 == "members") {
      inMembers = 1
   }
   if (inMembers) {
      print
   }
}
' file 
```

The above should be a good starting point at least. wrt the other answer posted using getline - getline has some appropriate uses but this isn't one of them, don't use getline until you fully understand and can live with all of it's caveats, see [http://awk.info/?tip/getline](http://awk.info/?tip/getline).

# python - python 机械化代码以获取网页截图-但表单提交不起作用

> ID：12938811
> 
> 赞同：3
> 
> 时间：2012-10-17T16:21:16.573
> 
> 标签：python, forms, post, mechanize, webpage-screenshot

我浏览到这个网站：[http](http://ctrlq.org/screenshots/) ://ctrlq.org/screenshots/ ，发现这个页面上的表格可以给出我们给它的任何URL的网页截图。

现在，我想尝试使用 mechanize 进行相同的操作，看看是否可以通过 python 代码提交表单来实现。

如果表单提交成功，我应该得到

> 恭喜，[http](http://www.gnu.org) ://www.gnu.org 的截图已经准备好了。下载图片

**但是，我的提交未能获得预期的结果。我哪里错了？**

这是代码：

```
import mechanize
import cookielib
from BeautifulSoup import BeautifulSoup
import re

# Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
#br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

# Follows refresh 0 but not hangs on refresh > 0
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

# User-Agent (this is cheating, ok?)
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

# The site we will navigate into, handling it's session
br.open('http://ctrlq.org/screenshots/')

html = br.response().read()
soup = BeautifulSoup(html)

hidden_str = str(soup.find('input', { "name" : "labnol" }))
m = re.search('value="(.*?)"', hidden_str)
hidden_val = m.group(1)

print hidden_val

br.select_form(nr=0)

br['url'] = "http%3A%2F%2Fwww.gnu.org"

for form in br.forms():
    print '---------------'
    print form

br.submit()

html2 = br.response().read()

##print html2

print 'if congrat.. exists in result'
print 'congrat' in html2.lower() 
```

而且，结果如下：

```
>>> ================================ RESTART ================================
>>> 
2f043008c3ecfa0a86ea8a9ed8a19916
---------------
<POST http://ctrlq.org/screenshots/ application/x-www-form-urlencoded
  <TextControl(url=http%3A%2F%2Fwww.gnu.org)>
  <SubmitButtonControl(<None>=) (readonly)>
  <HiddenControl(labnol=2f043008c3ecfa0a86ea8a9ed8a19916) (readonly)>>

False
>>> 
```

附带说明一下，使用 python 获取具有给定 url 的网页屏幕截图的最佳方法是什么。我不想使用 pyqt，因为我不知道它是如何工作的。具有内置模块或更简单模块的任何其他更简单的替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-07T09:51:37.663

很久没有问这个问题了。但是如果有人需要可以使用这个：

```
from selenium import webdriver
driver = webdriver.Firefox()
driver.get('http://www.python.org/')
driver.save_screenshot('screenshot.png')
driver.quit() 
```

你必须从这里下载 selenium 包：[https](https://pypi.python.org/pypi/selenium) ://pypi.python.org/pypi/selenium 或者运行命令

> 点安装硒

注意：您还需要**geckodriver.exe**。它应该与您的脚本位于同一位置。壁虎下载链接：[https](https://github.com/mozilla/geckodriver/releases) ://github.com/mozilla/geckodriver/releases 。

Selenium的其他有用文档：[http](http://selenium-python.readthedocs.io/faq.html) ://selenium-python.readthedocs.io/faq.html Selenium 还有许多机械化没有的其他功能：[Selenium Webdriver vs Mechanize](https://stackoverflow.com/questions/31530335/selenium-webdriver-vs-mechanize)

[![在此处输入图像描述](../Images/31edb0ca26f896a6b9e139dec30e6290.png)](https://i.stack.imgur.com/i5ET1.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T23:52:11.753

您可以在您的 linux 机器上尝试[此操作，以自行生成自动屏幕截图。](https://github.com/niklasb/webkit-server)

# maven - Maven 试图下载“-sources.src”工件？

> ID：12938815
> 
> 赞同：4
> 
> 时间：2012-10-17T16:21:29.090
> 
> 标签：maven

我有一个 Maven 项目，到目前为止它可以毫无问题地编译。今天，当我跑步时`mvn clean package -U`，我得到：

> [错误] 无法在项目 myproj 上执行目标：无法解析项目 org.myorg.myproj:myproj:jar:1.0-SNAPSHOT 的依赖项：无法解析以下工件：javax.servlet:javax.servlet-api:src :sources:3.0.1, org.eclipse.jetty:jetty-servlet:src:sources:8.1.2.v20120308, org.eclipse.jetty:jetty-server:src:sources:8.1.2.v20120308, org.eclipse .jetty:jetty-webapp:src:sources:8.1.2.v20120308, commons-io:commons-io:src:sources:2.4: 找不到工件 javax.servlet:javax.servlet-api:src:sources:3.0 .1 在 MyRepo (http://maven.myorg.org:9001/nexus/content/repositories/myrepo/) -> [帮助 1]

我尝试使用新的本地 Maven 存储库 ( `rm -fr ~/.m2/repository`)，但这并没有任何区别。

为什么 Maven 会尝试查找`source`/`src`人工制品？问题可能出在哪里的任何想法？

**编辑：**我的依赖项（如使用所示`mvn help:effective-pom`）没有任何`source`分类器。例如，`jetty-server`错误消息中提到的依赖项如下所示：

```
<dependency>
  <groupId>org.eclipse.jetty</groupId>
  <artifactId>jetty-server</artifactId>
  <version>8.1.2.v20120308</version>
  <scope>compile</scope>
</dependency> 
```

**解决方案：**在@AlessandroSantini 和@brian-topping 的帮助下，我终于确定了问题所在。我的一个间接依赖项有一个`<classifier>sources</classifier>`and `<type>src</type>`。（`mvn help:effective-pom`没有显示这些间接依赖关系，并且`mvn dependency:tree`也因上述错误消息而失败；最终，a`grep -r 'jetty-server' ~/.m2/repository/ -C 3`识别出具有混乱依赖关系的工件。）

事实证明，我自己的一个[SBT](http://www.scala-sbt.org)项目需要（不存在的）源工件来实现其依赖项之一：我使用了[SBT`withSources()`](http://www.scala-sbt.org/release/docs/Detailed-Topics/Library-Management.html#download-sources)，而我应该使用[sbteclipe`EclipseKeys.withSource := true`](https://github.com/typesafehub/sbteclipse/wiki/Using-sbteclipse#wiki-withsource)来获取 Eclipse 中的源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:23:28.710

你对公共快照有任何依赖吗？我会看一下的输出，`mvn dependency:tree`看看你是否能找到一个以某种方式包含源的传递依赖。自从您上次构建以来，可能其中一个传递性已经改变并且*他们*搞砸了一些东西。

# android - 在 Android 中使用 dip/dp 支持多屏幕？

> ID：12938817
> 
> 赞同：1
> 
> 时间：2012-10-17T16:21:29.010
> 
> 标签：android, android-layout, android-screen-support, multiscreen

假设我在 XML 文件中将按钮或文本视图的宽度定义为 100 dip 和高度为 30 dip。据我所知，Android 本身会处理 ldpi、mdpi 或 hdpi 设备之间的按钮或文本视图外观成比例或相同，因为我在 dip 中定义了尺寸。如果您想提供多屏幕支持，这是建议之一。我的问题是**dip**仅在处理具有相同宽度和高度的 ldpi、mdpi 或 hdpi 设备时是否有用意味着所有 320X480 或所有 400X840 类似，或者它是否也支持跨多屏幕尺寸意味着如果我为 320X480 设备定义一个具有 100X30 倾角的按钮，在 manifest 文件中添加所有屏幕支持 true 后，android 系统会自行重新计算小部件尺寸，以一些 200X60 下降到 700X1024 设备。

如果**dip**不能跨多个屏幕尺寸工作（如果设备物理尺寸不同），那么我需要为每个设备编写单独的布局文件，在这些设备中我无法使用具有某些权重的线性布局定义我的复杂布局，请纠正我，如果我错误的。有没有其他选择，建议我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:51:19.673

`dip`是“与密度无关的”，因此这些度量单位与密度相关，而不是与屏幕尺寸相关。例如，仍然有 10" 平板电脑，`mdpi`当然在小型`mdpi`手机上看起来不错的布局在这些设备上看起来很糟糕。这里的解决方法是使用尺寸值并在这种情况下覆盖它们。现在，而不是使用，例如，`10dip`在您的 XML 中，您将使用，这将在和`@dimen/dip_10`中具有不同的值。希望这会有所帮助。`values/mdpi``values/xlarge-mdpi`

# security - 查看 PhoneGap/Cordova 网页视图的源代码

> ID：12938827
> 
> 赞同：3
> 
> 时间：2012-10-17T16:21:53.800
> 
> 标签：security, cordova, cordova-2.0.0

我正在使用 PhoneGap/Cordova 2.0 来构建 IOS 和 Android 应用程序。我不太担心使用 Cordova 的代码安全性，因为所有代码都是 HTML、Javascript 而不是编译的。有没有办法从应用程序 UIWebView 中查看代码？有人可以从 UIWebView 中查看源代码吗？如果是这样，那么如何混淆代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T14:27:42.603

当然我们可以看到源代码，从 iOS 6 开始，设置中有一个选项可以启用从桌面 safari 调试 web 内容。

此外，您的应用程序将作为 .ipa 文件分发，这是一个 .zip 文件，解压缩它，您将获得资源

如何混淆代码？你真的不能，你可以使 html 代码更难阅读，但你永远不会阻止别人复制它。

# linux - 在 64 位 linux、mac 等中，long double 所需的对齐方式是什么？

> ID：12938828
> 
> 赞同：2
> 
> 时间：2012-10-17T16:21:57.743
> 
> 标签：linux, macos, gcc, memory-alignment

我一直试图找出 x86-64 mac 和 linux 中 long double 所需的对齐方式。我发现了各种暗示不同要求的不同事物，但找不到权威来源。

我在 Mac OS X 上发现，gcc 有时会生成使用 movaps 复制长双精度的代码，这需要 16 字节对齐。但是clang没有，而且gcc已经很老了，所以也许这只是一个不会被修复的老错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:46:41.947

Linux x86_64 ABI 指定 long double 应为 16 字节对齐。这与 32 位 x86 Linux ABI 不同，后者指定 long double 仅 4 字节对齐（在当前 CPU 上不是最理想的，但已成为历史产物）。

我不确定 Mac OSX x86 ABI，但如果他们保留这样的历史包袱，我会感到惊讶。因此我的猜测是 16 字节对齐。

# android - 更改 AlertDialog 的背景、文本颜色

> ID：12938835
> 
> 赞同：0
> 
> 时间：2012-10-17T16:22:10.990
> 
> 标签：android, styles, android-dialog, android-theme

我尝试更改 **AlertDialog的****背景**和文本颜色。 但我只能用 Activity 改变标题的颜色： **`android:windowTitleStyle`

`AlertDialog.Builder adb = new AlertDialog.Builder(new ContextThemeWrapper(this, R.style.AlertDialogCustom));`** 

 **样式.xml

`style name="AlertDialogCustom" parent="Holo.Theme.Sherlock"`

 `我怎样才能做到这一点？谢谢。`

 `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:29:33.697

```
adb.setMessage(Html.fromHtml("<font color='#FF0000'><b>John:</b></font>"+"How are you?")) 
```

这是用于更改文本颜色您可以创建自己的对话框检查此链接 [http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:09:18.177

检查这个

*   [Android 自定义对话框示例](http://www.androidpeople.com/android-custom-dialog-example)

*   [在 Android 中使用布局的自定义对话框弹出](http://www.thiyagaraaj.com/articles/android-articles/customdialogboxpopupusinglayoutinandroid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:29:21.957

尝试这个：

```
<?xml version="1.0" encoding="utf-8"?> 
<resources> 
<style name="AlertDialogCustom" parent="@android:style/AlertDialog"> 
    <item name="android:textColor">#00FF00</item> 
    <item name="android:background">#0000FF</item>
    <item name="android:typeface">monospace</item> 
    <item name="android:textSize">10sp</item> 
</style> 
</resources> 
````**

# c# - WPF 避免（主）窗口的大小小于内容

> ID：12938841
> 
> 赞同：0
> 
> 时间：2012-10-17T16:22:32.660
> 
> 标签：c#, wpf, resize, window-resize

我使用以下 XAML 代码创建了一个简单的 WPF 应用程序：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" SizeToContent="WidthAndHeight">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Button MinWidth="200" MinHeight="40" Content="Hello 1"/>
    <Button MinWidth="200" MinHeight="40" Content="Hello 2" Grid.Column="1"/>

</Grid>
</Window> 
```

如果我启动应用程序，我可以将窗口的大小调整为小于两个按钮的大小。

如您所见，我使用了 MinWidth 和 MinHeight 属性，但它们不起作用。

在这种情况下请帮助我。

问候，

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-18T01:23:00.677

您可能已经解决了您的问题，但我会为仍然不熟悉 WPF 的任何人（如我）留下一个简单的解决方案。

在`<Window>`标签内，为事件添加一个事件处理程序`ContentRendered`：

```
<Window x:Class="MyTest.MyForm" 
    ... 
    ... 
    SizeToContent="WidthAndHeight"
    ContentRendered="Window_ContentRendered">` 
```

然后添加代码隐藏：

```
private void Window_ContentRendered(object sender, EventArgs e)
{
    MinWidth = ActualWidth;
    MinHeight = ActualHeight;
} 
```

这样，窗口将首先计算其大小（基于`SizeToContent="WidthAndHeight"`），然后在呈现其内容后设置最小值，从而防止用户将其大小调整为小于内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T16:52:23.527

您可能希望将 MinHeight 和 MinWidth 添加到 WINDOW 级别，以永远不会小于您在其内容中期望的最小元素......

Title="MainWindow" Height="350" Width="525" MinHeight="90" MinWidth="410" SizeToContent="WidthAndHeight"

两个按钮高 40 (80) 加上一些任意间隙 (10) = 90 的最小高度......宽度也是如此。两个按钮的最小宽度为 200 = 总共 400 加上任意间隙 (10) = 410。

# http - 是否可以透明地委托 HTTP 请求？

> ID：12938845
> 
> 赞同：1
> 
> 时间：2012-10-17T16:22:37.780
> 
> 标签：http, redirect, request

假设计算机 A 向服务器 B 发送 HTTP 请求，而 B 希望 C 回答它。C 是否可以在没有 B 干预且没有来自 A 的特定操作的情况下将响应发送回 A（如 3xx 重定向）？假设 C 可能没有公共 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:15:01.773

这就是 a`reverse proxy`会做的。根据您所在的平台，有很多选择。

在许多平台上工作的一种方法是，例如`node-http-proxy`，您可以在服务器 B 上启动。在最简单的情况下，这个单线可以：

```
require('http-proxy').createServer(81, 'serverb').listen(80); 
```

它侦听端口 80 并重定向到 serverb 上的端口 81。

有关更多选项，请参阅[https://github.com/nodejitsu/node-http-proxy](https://github.com/nodejitsu/node-http-proxy)。

当然，有很多成熟的代理有更多的花里胡哨（尽管 node-http-proxy 也可以做 https 隧道等），但是配置这些可能比运行这个单线更具挑战性。这完全取决于您的用例。

**编辑**：阅读您的评论，这可以使用**直接路由**来完成。您的问题是关于 HTTP（第 7 层），并且由于*直接路由*在较低层上工作，因此 HTTP 等较高级别的协议也可以工作。引自[http://horms.net/projects/has/html/node9.html](http://horms.net/projects/has/html/node9.html)：

> **直接路由**：来自客户端的数据包直接转发到后端服务器。IP 数据包不会被修改，因此后端服务器必须配置为接受虚拟服务器 IP 地址的流量。这可以使用虚拟接口或数据包过滤来完成，以将寻址到虚拟服务器 IP 地址的流量重定向到本地端口。后端服务器可以将回复直接发送回客户端。也就是说，如果使用基于主机的第 4 层交换机，它可能不在返回路径中。

# php - PHP DOM 挑战 - 解析有问题的 javascript

> ID：12938848
> 
> 赞同：0
> 
> 时间：2012-10-17T16:22:44.513
> 
> 标签：php, javascript, dom

这是一个奇怪的问题，我看不到一个简单的解决方案。

如果您尝试使用 DOM 解析`</head>`包含在 javascript 函数中的标记的文档，则它无法正常工作。它将`</head>`javascript函数内部作为结束`</head>`标记。

我已经为此苦苦挣扎了好几个小时——有什么想法吗？

```
<?php
$contents =
<<<EOF
<!DOCTYPE html>
<html><head>
<script>function myFunc() { var myVar = "<head></head>"; } </script>
</head>
<body><p>This is a test</p></body>
</html>
EOF;

//GET CONTENT & LOAD INTO DOM
$doc = new DOMDocument('1.0', 'UTF-8');
$doc->loadHTML($contents);

//STRIP OUT THE JAVASCRIPT
$scripts = $doc->getElementsByTagName('script');
$length = $scripts->length;
for ($i = 0; $i < $length; $i++) {
    $scripts->item(0)->parentNode->removeChild($scripts->item(0));
}

echo htmlentities($doc->saveHTML()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:42:23.217

常见的 Javascript 问题：改用这个：

```
var myVar = "<head><\/head>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:45:09.827

您可以转义不想解释的字符。例如：

```
var myVar = "\x3chead\x3e\x3c/head\x3e";
console.log(myVar); 
```

将创建没有实际 < > 字符的“<head></head>”。

# pattern-matching - jmeter中的管道符号模式匹配

> ID：12938851
> 
> 赞同：3
> 
> 时间：2012-10-17T16:22:48.833
> 
> 标签：pattern-matching, jmeter, jmenu

获取“UTR\|UTIBH0000000000\|”；作为回应JMeter。想从 "UTR\|UTIBH0000000000\|" 中读取 \|UTIBH000000000\；我能够阅读使用`(.+?)`，但**错误**来了： **令牌解析错误：第 3 行第 88 列的词法错误。遇到：“|” (124)，在 : "\"UTR\" 之后**

试过：

1.  “UTR（。）”；
2.  “UTR[.]”；
3.  “UTR”；
4.  "UTR(.+?)";

但没有成功。

也尝试过类似的问题，但没有成功。

**脚本：**

```
${__log(${__eval("SUCC01"+"UserID:"+"${__P(FinacleUserID)}"+": Payment Order ID - "+"${SuccessPaymentID}"+"UTR No:-"+"${UTRNO}"+" Verified Successfully")},,,)} 
```

**应用正则表达式提取器：** window.returnValue = "UTR\|UTIBH0000000000\|";

**正则表达式：** `window.returnValue = "UTR(.+?)"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:04:29.237

试试这个正则表达式：

UTR(\\[^\\]*\\)

![在此处输入图像描述](../Images/3f208bc12d0c5caec172a47222502c4f.png)

# html - 如何填充对象内的高度

> ID：12938853
> 
> 赞同：0
> 
> 时间：2012-10-17T16:22:48.370
> 
> 标签：html, css, css-float

我想要一个页面，左边有两个固定宽度的列，一个主列填满`<body>`. 在每一列中，我想`<div>`在顶部放置一些对象，并`<ul>`在其余部分放置一个对象。我尝试了以下，但无法使`<ul>`对象的高度自动调整以填充高度。相反，它溢出到底部的高度与`<div>`它们上方的高度一样多。

```
<html>
<style>
body{
    margin:0;padding:0;
    overflow: hidden;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color:red;
}
.column{
    float: left;
    background-color:blue;
}
.column>ul{
    height: 100%;
    width: 100;
    overflow-y: scroll;
    overflow-x: hidden;
    background-color:green;
}
#main-column>ul{
    height: 100%;
    overflow-y: scroll;
    overflow-x: hidden;
    background-color:brown;
}
</style>
<body>
<div class="column">
  <div>Column 1 Title</div>
  <ul>
    <li>Item 1</li>
    <li>Item 2</li>
  </ul>
</div>
<div class="column">
  <div>Column 2 Title</div>
  <ul>
    <li>Item 3</li>
    <li>Item 4</li>
  </ul>
</div>
<div id="main-column">
  <div>Main Column Title</div>
  <ul>
    <li>Item 5</li>
    <li>Item 6</li>
  </ul>
</div>
</body></html> 
```

如何使`<ul>`对象的高度自动调整以填充剩余高度？这是我到目前为止所得到的。滚动条被截断并延伸到窗口边框下方，这表明它的高度溢出了。

![截屏](../Images/b71ee5d23d7fd7df9b98917ae6a4ec8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:31:44.660

如果你给列标题一个固定的高度，你可以使用它和`position: absolute`s`ul`来获得你想要的布局。演示：http: [//jsbin.com/ecilob/1/edit](http://jsbin.com/ecilob/1/edit)

HTML：

```
<body>
    <div class="column fw">
        <div class="title">Column 1 Title</div>
        <ul>
            <li>Item 1</li>
            <li>Item 2</li>
        </ul>
    </div>
    <div class="column fw">
        <div class="title">Column 2 Title</div>
        <ul>
            <li>Item 3</li>
            <li>Item 4</li>
        </ul>
    </div>
    <div class="column main">
        <div class="title">Main Column Title</div>
        <ul>
            <li>Item 5</li>
            <li>Item 6</li>
        </ul>
    </div>
</body> 
```

CSS：

```
body {
 margin: 0;
  padding: 0;
}

.column .title { 
  height: 30px;
  border-bottom: 1px dashed #333;
}

.column {
  background: lightblue;
  float: left;
  position: absolute;
  top: 0;
  bottom: 0;
}
.column + .column {
  background: coral;
  left: 120px;
}
.column + .column + .column { background: goldenrod; }

.column.fw {
  width: 120px;
}
.column.main {
  left: 240px;
  right: 0;
}

.column ul {
 position: absolute;
  margin: 0;
  top: 30px;
  bottom: 0;
  left: 0;
  right: 0;
  overflow-y: scroll;
} 
```

# php - 使用 Post 数据打开新窗口（PHP、Javascript）

> ID：12938855
> 
> 赞同：0
> 
> 时间：2012-10-17T16:22:55.900
> 
> 标签：php, javascript, post, window, request

我正在尝试执行以下操作，有人可以帮忙吗？

我创建了一个接受 json 对象的 php 文件。该网页旨在直接向用户显示。

如何在不使用 html 表单的情况下从另一个页面打开此页面？我需要一个简单的解决方案，如下所示。

Javascript（如果需要，支持 JQuery）：

```
 var JsonParamToPass=jsonObj;
    var postData=JsonParamToPass;
    window.open("www.myAwesomePageThatAcceptsPostData.com",'_blank',method=POST,postData); 
  //the last two variables are made up and i need to find a way to do that, that can easily be given to other people to use. 
```

我想避免使用 ajax 请求并将输出写入新页面，并且我想尽可能避免创建表单。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:53:48.950

您可以使用 javascript window.opener 方法来访问父窗口变量。

```
var myVar = window.opener.parentVar; 
```

您不能使用隐藏表单并使用 javascript 提交它的任何原因，如下所示：（这将在您的原始窗口中，并且 document.submit 将打开一个新窗口而不是使用当前窗口）

```
<form name="myForm" action="http://yourAwesomePage" method="POST">
    <input type="hidden" id="myVar" name="myVar" value = "">
</form>

<SCRIPT type="text/javascript">
    document.myForm.myVar.value = someValue;
    document.myForm.submit();
</SCRIPT> 
```

# haskell - Parsec：要导入哪个模块？

> ID：12938856
> 
> 赞同：3
> 
> 时间：2012-10-17T16:22:58.570
> 
> 标签：haskell, parsec

> **可能重复：**
> [Text.ParserCombinators.Parsec 和 Text.Parsec 之间有什么不同](https://stackoverflow.com/questions/6029371/whats-the-different-between-text-parsercombinators-parsec-and-text-parsec)

每次我导入 Parsec 模块时，都有两种选择：`Text.Parsec`和`Text.ParserCombinators.Parsec`. 我找不到任何关于这两者有什么不同的信息（`Text.ParserCombinators.Parsec`主要的 Haddock 页面只提到它是某种兼容性模块，而根本没有介绍性的句子`Text.Parsec`）。

所以这让我想知道：这两个包有什么区别，在不同的情况下我应该更喜欢哪一个？

# php - 使用php插入多个数组

> ID：12938859
> 
> 赞同：0
> 
> 时间：2012-10-17T16:23:26.617
> 
> 标签：php, mysql

我正在尝试从动态填充的输入文本字段中插入值。我必须采取哪些进一步的步骤？

我的样本表格：

```
<form action="" method="POST">
    <label>Name:</label><input type="text" name="name[]">
    <label>Name:</label><input type="text" name="grade[]">
    <input type="submit" name="submit">
</form> 
```

我的 insert.php 文件：

```
$grade = $_POST['grade'];
$name = $_POST['name'];
$count_name = count($_POST['name']);

for($i=0;$i<$count_name ;$i++){
    $new_name  = $name[$i];

    $query = "INSERT INTO test_table (name, grade)VALUES('$new_name','$grade')";
    $result = mysql_query($query); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:38:11.813

Try it:

Form:

```
<form action="insert.php" method="POST">
    <label>Name:</label><input type="text" name="name[]">
    <label>Name:</label><input type="text" name="grade[]">
    <input type="submit" name="submit">
</form> 
```

insert.php

```
$grade = $_POST['grade'];
$name = $_POST['name'];
$count_name = count($_POST['name']);

for($i=0;$i<$count_name ;$i++){
    $_name  = mysql_escape_string($name[$i]);
    $_grade  = mysql_escape_string($grade[$i]);

    $query = "INSERT INTO test_table (name, grade) VALUES ('$_name','$_grade')";
    $result = mysql_query($query); 
} 
```

# android - 如何检查安卓设备是否连接了蓝牙鼠标？

> ID：12938862
> 
> 赞同：0
> 
> 时间：2012-10-17T16:23:29.100
> 
> 标签：android, android-hardware

当我的应用程序启动时，我想检查android设备是否连接到蓝牙鼠标，并监听connected事件。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:41:53.493

使用[Android 蓝牙 API](http://developer.android.com/guide/topics/connectivity/bluetooth.html)，您可以获得连接设备的列表，如下所示：

```
BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();
Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices(); 
```

没有很好的方法来判断连接的设备类型，但是您可以通过遍历`pairedDevices`Set 来遍历设备及其名称。Android 蓝牙指南有更多关于蓝牙的详细信息。

# java - 多维 Java ArrayList（声明元素语法）

> ID：12938866
> 
> 赞同：1
> 
> 时间：2012-10-17T16:23:46.650
> 
> 标签：java, generics, multidimensional-array, arraylist

是否可以执行以下操作？

```
private static ArrayList<integer<integer<String>>> myArrayList; 
```

换句话说，使用声明的元素语法创建一个 ArrayList？

例子：

```
myArrayList[0][0] = "This is the string."; 
```

如果没有，是否可以使用普通数组这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:27:12.390

看来您正在寻找 Java 中的多维数组，声明如下：

```
String [][] list = new String[10][10];
list[0][0] = "This is a string";
System.out.println(list[0][0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:27:25.587

您可以通过以下方式声明`List`：`List`-

```
List<List<String>> listOfList = new ArrayList<List<String>>(); 
```

初始化您的列表，然后将字符串添加到您的列表元素：-

```
listOfList.add(new ArrayList<String>());

listOfList.get(0).add("my String"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:27:27.463

你可以做

```
List<List<String>> list = new ArrayList<List<String>>();
list.add(new ArrayList<String>());

list.get(0).add("This is the string"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T16:33:52.610

您想实时实现什么？Java 定义了一组 API，它们有自己的用途和目的。如果你想使用多维数组，我建议你去 for `Object[][]`，虽然你应该能够声明

```
ArrayList list[][] = new ArrayList[5][7]; 
```

这样做会使您的操作变得有点复杂。更多`ArrayList`的只是一维`Object`数组。

供参考

[如何在 Java 中创建多维 ArrayList？](https://stackoverflow.com/questions/4401850/how-to-create-multidemensional-arraylist-in-java)

# r - 尝试在 R 中计算运行团队统计数据 - 计算本场比赛前以及对手的平均进攻码数

> ID：12938867
> 
> 赞同：3
> 
> 时间：2012-10-17T16:23:48.210
> 
> 标签：r

**我被要求让不同的问题更清楚，所以它们在顶部：**

*   如何计算团队的滚动平均值，不包括当前周
*   如何为对手球队添加包含相似统计数据的列

*以下是原文：*

我正在学习 R 来对运动进行一些扶手椅分析。现在，我遇到了一个问题，我有一个 NFL 赛季中每场比赛的列表，我正在尝试计算在这场比赛之前的几周内进攻的 AvgTotalYds 是多少。最终，我希望能够计算出本赛季至今的平均值，以及过去 X 个时期的移动平均值。

更复杂的是，我还想获得有关对手前一周的相同信息。我已经搜索了很多类似的问题，但找不到任何解决方案。

以下是数据样本。我得到的数据库有一些不幸的列名。ScoreOff 实际上是指球队在 TeamName 字段中的总得分，无论是进攻、防守还是特殊球队比赛。*Def，同样，指的是对手。代码示例使用标记为“df2”的数据框。

```
dput(head(df2))

structure(list(Date = structure(c(14126, 14126, 14129, 14129, 
14129, 14129), class = "Date"), TeamName = structure(c(21L, 32L, 
1L, 2L, 3L, 4L), .Label = c("Arizona Cardinals", "Atlanta Falcons", 
"Baltimore Ravens", "Buffalo Bills", "Carolina Panthers", "Chicago Bears", 
"Cincinnati Bengals", "Cleveland Browns", "Dallas Cowboys", "Denver Broncos", 
"Detroit Lions", "Green Bay Packers", "Houston Texans", "Indianapolis Colts", 
"Jacksonville Jaguars", "Kansas City Chiefs", "Miami Dolphins", 
"Minnesota Vikings", "New England Patriots", "New Orleans Saints", 
"New York Giants", "New York Jets", "Oakland Raiders", "Philadelphia Eagles", 
"Pittsburgh Steelers", "San Diego Chargers", "San Francisco 49ers", 
"Seattle Seahawks", "St Louis Rams", "Tampa Bay Buccaneers", 
"Tennessee Titans", "Washington Redskins"), class = "factor"), 
    ScoreOff = c(16L, 7L, 23L, 34L, 17L, 34L), FirstDownOff = c(21L, 
    11L, 18L, 23L, 21L, 13L), ThirdDownPctOff = structure(c(34L, 
    14L, 20L, 21L, 35L, 16L), .Label = c("0%", "10%", "11%", 
    "12%", "13%", "14%", "15%", "17%", "18%", "19%", "20%", "21%", 
    "22%", "23%", "24%", "25%", "27%", "29%", "30%", "31%", "33%", 
    "35%", "36%", "37%", "38%", "40%", "41%", "42%", "43%", "44%", 
    "45%", "46%", "47%", "50%", "53%", "54%", "55%", "56%", "57%", 
    "58%", "59%", "60%", "61%", "62%", "63%", "64%", "65%", "67%", 
    "69%", "73%", "77%", "8%", "80%", "9%", "92%"), class = "factor"), 
    RushAttOff = c(32L, 24L, 39L, 42L, 46L, 29L), RushYdsOff = c(154L, 
    84L, 109L, 318L, 229L, 106L), PassAttOff = c(35L, 27L, 30L, 
    13L, 29L, 31L), PassCompOff = c(19L, 15L, 19L, 9L, 15L, 20L
    ), PassYdsOff = c(216L, 133L, 197L, 161L, 129L, 234L), PassIntOff = c(1L, 
    0L, 0L, 0L, 0L, 0L), FumblesOff = c(0L, 0L, 0L, 0L, 2L, 0L
    ), SackYdsOff = c(16L, 8L, 21L, 5L, 0L, 2L), PenYdsOff = c(70L, 
    35L, 40L, 68L, 64L, 14L), TimePossOff = structure(c(348L, 
    52L, 368L, 175L, 354L, 239L), .Label = c("14:45", "18:15", 
    "18:27", "19:31", "19:56", "20:11", "20:12", "20:26", "20:48", 
    "21:03", "21:08", "21:16", "21:26", "21:28", "21:35", "21:44", 
    "21:45", "21:52", "21:54", "22:03", "22:08", "22:12", "22:16", 
    "22:25", "22:30", "22:31", "22:33", "22:34", "22:38", "22:39", 
    "22:53", "22:55", "22:59", "23:09", "23:10", "23:12", "23:15", 
    "23:23", "23:28", "23:30", "23:33", "23:37", "23:38", "23:42", 
    "23:43", "23:45", "23:48", "23:49", "23:56", "24:06", "24:13", 
    "24:17", "24:18", "24:21", "24:33", "24:34", "24:35", "24:41", 
    "24:43", "24:49", "24:50", "24:54", "24:58", "24:59", "25:01", 
    "25:02", "25:05", "25:11", "25:14", "25:16", "25:19", "25:25", 
    "25:29", "25:31", "25:32", "25:34", "25:36", "25:37", "25:38", 
    "25:40", "25:41", "25:46", "25:47", "25:53", "25:55", "25:57", 
    "25:58", "26:00", "26:04", "26:09", "26:10", "26:11", "26:12", 
    "26:13", "26:16", "26:20", "26:27", "26:32", "26:36", "26:37", 
    "26:38", "26:39", "26:40", "26:41", "26:44", "26:46", "26:49", 
    "26:53", "26:56", "26:59", "27:01", "27:04", "27:10", "27:12", 
    "27:13", "27:15", "27:18", "27:20", "27:24", "27:25", "27:26", 
    "27:27", "27:28", "27:30", "27:32", "27:37", "27:40", "27:44", 
    "27:46", "27:47", "27:48", "27:50", "27:51", "27:52", "27:53", 
    "27:55", "27:57", "27:58", "27:59", "28:00", "28:01", "28:03", 
    "28:05", "28:06", "28:07", "28:13", "28:14", "28:16", "28:17", 
    "28:18", "28:19", "28:21", "28:22", "28:24", "28:25", "28:28", 
    "28:29", "28:32", "28:38", "28:40", "28:41", "28:45", "28:47", 
    "28:49", "28:51", "28:53", "28:55", "28:57", "28:58", "28:59", 
    "29:00", "29:02", "29:04", "29:05", "29:07", "29:08", "29:11", 
    "29:13", "29:14", "29:18", "29:19", "29:20", "29:26", "29:27", 
    "29:29", "29:31", "29:32", "29:33", "29:34", "29:36", "29:37", 
    "29:38", "29:41", "29:42", "29:43", "29:49", "29:50", "29:55", 
    "29:56", "29:59", "30:01", "30:04", "30:05", "30:10", "30:11", 
    "30:17", "30:18", "30:19", "30:22", "30:23", "30:24", "30:26", 
    "30:27", "30:28", "30:29", "30:31", "30:33", "30:34", "30:40", 
    "30:41", "30:42", "30:46", "30:47", "30:49", "30:52", "30:53", 
    "30:55", "30:58", "31:00", "31:01", "31:02", "31:03", "31:05", 
    "31:07", "31:09", "31:11", "31:13", "31:15", "31:19", "31:20", 
    "31:22", "31:28", "31:31", "31:32", "31:35", "31:36", "31:38", 
    "31:39", "31:41", "31:42", "31:43", "31:44", "31:46", "31:47", 
    "31:53", "31:54", "31:55", "31:57", "31:59", "32:00", "32:01", 
    "32:02", "32:03", "32:05", "32:07", "32:08", "32:09", "32:10", 
    "32:12", "32:13", "32:14", "32:16", "32:20", "32:23", "32:28", 
    "32:30", "32:32", "32:33", "32:34", "32:35", "32:36", "32:40", 
    "32:42", "32:45", "32:47", "32:48", "32:50", "32:56", "32:59", 
    "33:01", "33:04", "33:07", "33:11", "33:14", "33:16", "33:19", 
    "33:20", "33:21", "33:22", "33:23", "33:24", "33:28", "33:33", 
    "33:40", "33:44", "33:47", "33:48", "33:49", "33:50", "33:51", 
    "33:56", "34:00", "34:02", "34:03", "34:05", "34:07", "34:13", 
    "34:14", "34:19", "34:20", "34:22", "34:23", "34:24", "34:26", 
    "34:28", "34:29", "34:31", "34:35", "34:41", "34:44", "34:46", 
    "34:49", "34:55", "34:58", "34:59", "35:01", "35:02", "35:06", 
    "35:10", "35:11", "35:17", "35:19", "35:25", "35:26", "35:27", 
    "35:39", "35:42", "35:43", "35:47", "35:54", "36:04", "36:11", 
    "36:12", "36:15", "36:17", "36:18", "36:22", "36:23", "36:27", 
    "36:30", "36:32", "36:37", "36:45", "36:48", "36:50", "36:51", 
    "37:01", "37:05", "37:07", "37:21", "37:22", "37:26", "37:27", 
    "37:29", "37:30", "37:35", "37:42", "37:44", "37:48", "37:52", 
    "37:57", "38:08", "38:15", "38:16", "38:23", "38:25", "38:32", 
    "38:34", "38:44", "38:52", "38:57", "39:12", "39:34", "39:48", 
    "39:49", "40:04", "40:29", "41:33", "41:45", "45:15"), class = "factor"), 
    PuntAvgOff = c(36.3, 37.9, 45, 38.3, 48.2, 46.6), Opponent = structure(c(32L, 
    21L, 27L, 11L, 7L, 28L), .Label = c("Arizona Cardinals", 
    "Atlanta Falcons", "Baltimore Ravens", "Buffalo Bills", "Carolina Panthers", 
    "Chicago Bears", "Cincinnati Bengals", "Cleveland Browns", 
    "Dallas Cowboys", "Denver Broncos", "Detroit Lions", "Green Bay Packers", 
    "Houston Texans", "Indianapolis Colts", "Jacksonville Jaguars", 
    "Kansas City Chiefs", "Miami Dolphins", "Minnesota Vikings", 
    "New England Patriots", "New Orleans Saints", "New York Giants", 
    "New York Jets", "Oakland Raiders", "Philadelphia Eagles", 
    "Pittsburgh Steelers", "San Diego Chargers", "San Francisco 49ers", 
    "Seattle Seahawks", "St Louis Rams", "Tampa Bay Buccaneers", 
    "Tennessee Titans", "Washington Redskins"), class = "factor"), 
    ScoreDef = c(7L, 16L, 13L, 21L, 10L, 10L), FirstDownDef = c(11L, 
    21L, 13L, 21L, 8L, 16L), ThirdDownPctDef = structure(c(14L, 
    34L, 25L, 13L, 7L, 10L), .Label = c("0%", "10%", "11%", "12%", 
    "13%", "14%", "15%", "17%", "18%", "19%", "20%", "21%", "22%", 
    "23%", "24%", "25%", "27%", "29%", "30%", "31%", "33%", "35%", 
    "36%", "37%", "38%", "40%", "41%", "42%", "43%", "44%", "45%", 
    "46%", "47%", "50%", "53%", "54%", "55%", "56%", "57%", "58%", 
    "59%", "60%", "61%", "62%", "63%", "64%", "65%", "67%", "69%", 
    "73%", "77%", "8%", "80%", "9%", "92%"), class = "factor"), 
    RushAttDef = c(24L, 32L, 20L, 21L, 23L, 21L), RushYdsDef = c(84L, 
    154L, 108L, 62L, 65L, 85L), PassAttDef = c(27L, 35L, 20L, 
    33L, 25L, 41L), PassCompDef = c(15L, 19L, 14L, 24L, 10L, 
    17L), PassYdsDef = c(133L, 216L, 195L, 262L, 99L, 190L), 
    PassIntDef = c(0L, 1L, 1L, 1L, 1L, 1L), FumblesDef = c(0L, 
    0L, 4L, 0L, 1L, 1L), SackYdsDef = c(8L, 16L, 12L, 16L, 10L, 
    23L), PenYdsDef = c(35L, 70L, 20L, 30L, 40L, 30L), TimePossDef = structure(c(52L, 
    348L, 32L, 225L, 46L, 161L), .Label = c("14:45", "18:15", 
    "18:27", "19:31", "19:56", "20:11", "20:12", "20:26", "20:48", 
    "21:03", "21:08", "21:16", "21:26", "21:28", "21:35", "21:44", 
    "21:45", "21:52", "21:54", "22:03", "22:08", "22:12", "22:16", 
    "22:25", "22:30", "22:31", "22:33", "22:34", "22:38", "22:39", 
    "22:53", "22:55", "22:59", "23:09", "23:10", "23:12", "23:15", 
    "23:23", "23:28", "23:30", "23:33", "23:37", "23:38", "23:42", 
    "23:43", "23:45", "23:48", "23:49", "23:56", "24:06", "24:13", 
    "24:17", "24:18", "24:21", "24:33", "24:34", "24:35", "24:41", 
    "24:43", "24:49", "24:50", "24:54", "24:58", "24:59", "25:01", 
    "25:02", "25:05", "25:11", "25:14", "25:16", "25:19", "25:25", 
    "25:29", "25:31", "25:32", "25:34", "25:36", "25:37", "25:38", 
    "25:40", "25:41", "25:46", "25:47", "25:53", "25:55", "25:57", 
    "25:58", "26:00", "26:04", "26:09", "26:10", "26:11", "26:12", 
    "26:13", "26:16", "26:20", "26:27", "26:32", "26:36", "26:37", 
    "26:38", "26:39", "26:40", "26:41", "26:44", "26:46", "26:49", 
    "26:53", "26:56", "26:59", "27:01", "27:04", "27:10", "27:12", 
    "27:13", "27:15", "27:18", "27:20", "27:24", "27:25", "27:26", 
    "27:27", "27:28", "27:30", "27:32", "27:37", "27:40", "27:44", 
    "27:46", "27:47", "27:48", "27:50", "27:51", "27:52", "27:53", 
    "27:55", "27:57", "27:58", "27:59", "28:00", "28:01", "28:03", 
    "28:05", "28:06", "28:07", "28:13", "28:14", "28:16", "28:17", 
    "28:18", "28:19", "28:21", "28:22", "28:24", "28:25", "28:28", 
    "28:29", "28:32", "28:38", "28:40", "28:41", "28:45", "28:47", 
    "28:49", "28:51", "28:53", "28:55", "28:57", "28:58", "28:59", 
    "29:00", "29:02", "29:05", "29:07", "29:08", "29:11", "29:13", 
    "29:14", "29:18", "29:19", "29:20", "29:26", "29:27", "29:29", 
    "29:31", "29:32", "29:33", "29:34", "29:36", "29:37", "29:38", 
    "29:41", "29:42", "29:43", "29:49", "29:50", "29:55", "29:56", 
    "29:59", "30:01", "30:04", "30:05", "30:10", "30:11", "30:17", 
    "30:18", "30:19", "30:22", "30:23", "30:24", "30:26", "30:27", 
    "30:28", "30:29", "30:31", "30:33", "30:34", "30:40", "30:41", 
    "30:42", "30:46", "30:47", "30:49", "30:52", "30:53", "30:55", 
    "30:56", "30:58", "31:00", "31:01", "31:02", "31:03", "31:05", 
    "31:07", "31:09", "31:11", "31:13", "31:15", "31:19", "31:20", 
    "31:22", "31:28", "31:31", "31:32", "31:35", "31:36", "31:38", 
    "31:39", "31:41", "31:42", "31:43", "31:44", "31:46", "31:47", 
    "31:53", "31:54", "31:55", "31:57", "31:59", "32:00", "32:01", 
    "32:02", "32:03", "32:05", "32:07", "32:08", "32:09", "32:10", 
    "32:12", "32:13", "32:14", "32:16", "32:20", "32:23", "32:28", 
    "32:30", "32:32", "32:33", "32:34", "32:35", "32:36", "32:40", 
    "32:42", "32:45", "32:47", "32:48", "32:50", "32:56", "32:59", 
    "33:01", "33:04", "33:07", "33:11", "33:14", "33:16", "33:19", 
    "33:20", "33:21", "33:22", "33:23", "33:24", "33:28", "33:33", 
    "33:40", "33:44", "33:47", "33:48", "33:49", "33:50", "33:51", 
    "33:56", "34:00", "34:02", "34:03", "34:05", "34:07", "34:13", 
    "34:14", "34:19", "34:20", "34:22", "34:23", "34:24", "34:26", 
    "34:28", "34:29", "34:31", "34:35", "34:41", "34:44", "34:46", 
    "34:49", "34:55", "34:58", "34:59", "35:01", "35:02", "35:06", 
    "35:10", "35:11", "35:17", "35:19", "35:25", "35:26", "35:27", 
    "35:39", "35:42", "35:43", "35:47", "35:54", "36:04", "36:11", 
    "36:12", "36:15", "36:17", "36:18", "36:22", "36:23", "36:27", 
    "36:30", "36:32", "36:37", "36:45", "36:48", "36:50", "36:51", 
    "37:01", "37:05", "37:07", "37:21", "37:22", "37:26", "37:27", 
    "37:29", "37:30", "37:35", "37:42", "37:44", "37:48", "37:52", 
    "37:57", "38:08", "38:15", "38:16", "38:23", "38:25", "38:32", 
    "38:34", "38:44", "38:52", "38:57", "39:12", "39:34", "39:48", 
    "39:49", "40:04", "40:29", "41:33", "41:45", "45:15"), class = "factor"), 
    Site = structure(c(1L, 3L, 3L, 1L, 1L, 1L), .Label = c("H", 
    "N", "V"), class = "factor"), Line = c(4.5, -4.5, 2.5, -3, 
    -2, 1), Totalline = c(41.5, 41.5, 42, 41, 37.5, 38.5), TotalYdsOff = c(370L, 
    217L, 306L, 479L, 358L, 340L), TotalYdsDef = c(217L, 370L, 
    303L, 324L, 164L, 275L), ActualLine = c(-9L, 9L, -10L, -13L, 
    -7L, -24L)), .Names = c("Date", "TeamName", "ScoreOff", "FirstDownOff", 
"ThirdDownPctOff", "RushAttOff", "RushYdsOff", "PassAttOff", 
"PassCompOff", "PassYdsOff", "PassIntOff", "FumblesOff", "SackYdsOff", 
"PenYdsOff", "TimePossOff", "PuntAvgOff", "Opponent", "ScoreDef", 
"FirstDownDef", "ThirdDownPctDef", "RushAttDef", "RushYdsDef", 
"PassAttDef", "PassCompDef", "PassYdsDef", "PassIntDef", "FumblesDef", 
"SackYdsDef", "PenYdsDef", "TimePossDef", "Site", "Line", "Totalline", 
"TotalYdsOff", "TotalYdsDef", "ActualLine"), row.names = c(NA, 
6L), class = "data.frame") 
```

我添加了 TotalYds[Off|Def] 列，因为这很简单。最接近正确计算移动平均值的方法是使用 zoo 和 plyr 库以及以下命令完成的：

```
ddply(df2, .(TeamName), summarise, rollmean(TotalYdsOff, k=4, fill=0, align="right")) 
```

这*几乎*可以满足我的要求，只是它将平均使用当前一周的信息。

至于获取对手的匹配信息，我想有一种方法可以从“TeamName”和“Date”都匹配当前行的“Opponent”和“Date”的行中提取相同的数据。 " 这是因为数据库有两个关于给定比赛的条目，一个用于主队，一个用于客队（并且 *Off 和 *Def 被交换）。查看示例数据中的第 1 行和第 2 行，特别是 Date、TeamName 和 Opponent，您就会明白我想说什么。

这里有什么指导吗？我想这对于在 R 中修修补补几天的人来说是相对微不足道的，他们会知道一些函数或库可以做到这一点。然而，我只有几天，因此遇到了一些麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:11:09.027

解决问题 1 的一种简单方法是使用`ddply`您描述的调用，但要传递一个数据框，其中删除了本周的所有游戏：

```
require(plyr)
dfRedacted <- ddply(df2, .(TeamName), function(x) subset(x, Date!=max(Date)))
meanStats <- ddply(dfRedacted, .(TeamName), summarise, rollmean(TotalYdsOff, k=4, fill=0, align="right")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:41:25.257

现在，我最终创建了一个函数来计算（但不包括）给定比赛的赛季平均值，并将结果放入单独的向量中，然后仅使用 cbind() 将其添加到数据框中：

```
foo <- vector()
for(each in levels(df$TeamName)) {
  foo <- c(foo, calc_avg_yds(df, each))
} 
```

df <- cbind(df[order(df$TeamName), ], AvgTotalYdsOff = foo)

如您所见，我按团队名称对 df 进行了重新排序（次要是日期，它已经被排序）以确保它们匹配。

为了从相应的行（游戏中另一支球队的行）获取信息，我做了一个循环并将所有内容放在一个向量中，然后是另一个 cbind()：

```
for(i in nrow(df)) {
   foo <- c(foo, subset(df, TeamName==df[i,]$Opponent & Date==df[i,]$Date)$AvgTotalYdsOff)
}
df <- cbind(df, AvgTotalYdsDef = foo) 
```

最后，我选择了简单粗暴的路线，因为我不知道有更好的选择。希望这可以帮助将来遇到类似问题的人。

# mysql - 用于选择列中由空格分隔的最常见子字符串的 MySQL 查询？

> ID：12938869
> 
> 赞同：4
> 
> 时间：2012-10-17T16:23:51.797
> 
> 标签：mysql, string, varchar

我有一个 MySQL 食谱数据库。其中一列 NAME 是 varchar(255)。每个名称可以是多个单词（例如，“Chocolate Chip Cookies”和“Oatmeal Cookies”）。

我正在寻找一种方法来有效地将食谱名称解析为单个单词，然后返回最常用单词的列表。因此，鉴于上面的两个配方，查询将返回：

饼干、2 块巧克力、1 块薯片、1 块燕麦片、1

有没有一种有效的方法来做到这一点？我可以查询所有结果，将每个配方名称拆分为单词，然后在数据库之外构建一个数据结构来执行此操作。或者，我可以提前拆分字符串并建立一个表格。

我想我真正希望的是利用数据库更快地做到这一点（就像使用索引一样）。我不知道这是否可以通过单个查询来实现。

那么，我是否被困在提前建一张桌子上？或者这可以通过单个查询有效地完成吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:44:36.217

如果您的表使用 MyISAM 存储引擎并且您在列上构建`FULLTEXT`索引`NAME`，则可以使用[myisam_ftdump 的`--count`选项](http://dev.mysql.com/doc/en/myisam-ftdump.html#option_myisam_ftdump_count)来获取每个单词的总计数。然而，遗憾的是，这将在 SQL 之外。

# css - 覆盖父级：悬停在子级：悬停

> ID：12938870
> 
> 赞同：0
> 
> 时间：2012-10-17T16:23:55.497
> 
> 标签：css, hover, css-selectors

我有两个默认设置为隐藏的子元素。

```
.child1, .child2{
visibility:hidden;
}

#parent :hover .child1, #parent:hover .child2{
visibility:visible;
} 
```

如您所见，每当我将鼠标悬停在父级上时，子级就会变得可见。到目前为止很容易。

现在是棘手的部分：当我将鼠标悬停在其中一个孩子上时，我希望所有其他孩子再次隐藏起来。因此，当我将鼠标悬停在 child1 上时，child2 应该不再可见。我想“撤消”父母的悬停，可以这么说，只让我悬停的孩子可见。

如何覆盖或撤消 parent:hover ？

**编辑：** 我发现了这个，这是朝着正确的方向发展的：

```
#parent:hover > .child1:hover{
    do something;
} 
```

基本上，当 parent 和 child1 都悬停时，样式适用于 child1。这就是我要找的，但现在的问题是，如何将样式应用于 child2 而不是 child1？

**Edit2：** 另一个想法是使用这样的东西：

```
#parent:hover >.children:not(.child1){
    do something;
} 
```

这将选择父级的所有非 child1 的子级并将样式应用于它们。再一次，一个问题：这只在单独悬停父级时触发。当 parent AND child1 悬停时，如何触发完全相同的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:48:26.660

好的，因为似乎没有正确的方法来做我想要的，我使用了一些变通方法并使用不透明度解决了它：

```
.child1, .child2{ 
    opacity:0; 
}

#parent:hover .child1, 
#parent:hover .child2{ 
    opacity:0.6; 
}

#parent:hover > .child1:hover,
#parent:hover > .child2:hover{
    opacity:1; 
} 
```

所以基本上，当我单独悬停父母时，所有孩子都是“半透明的”，当我将父母和孩子悬停时，那个孩子变得完全可见。这与最初的想法有点不同，但结果还不错。

# xml - 基于属性值的 T-SQL 条件更新 XML

> ID：12938871
> 
> 赞同：0
> 
> 时间：2012-10-17T16:23:55.577
> 
> 标签：xml, tsql, sql-server-2008-r2

我有以下内容：

```
declare @xml XML

SET @xml = '<record priref="2" creation="2009-12-14T10:39:04">
      <field tag="aa" occ="1" lang="nl-NL">somedata</field>
      <field tag="bb" occ="1" lang="en-US">somedata</field>
      <field tag="bb" occ="2" lang="en-US">somedata</field>
      <field tag="cc" occ="1">testdata</field>
      <field tag="dd" occ="1">testdata</field>
      <field tag="ee" occ="1" lang="nl-NL">somedata</field>
      <field tag="ee" occ="1" lang="en-US">somedata</field>
    </record>' 

DECLARE @nodeCount int
DECLARE @i int

SET @i = 1

SELECT @nodeCount = @xml.value('count(/record/field/@lang)','varchar(5)') 

WHILE (@i <= @nodeCount)
BEGIN
Set @xml.modify('replace value of (/record/field/@lang)[.="en-US"][1] with "nl-NL"')

SET @i = @i + 1
END

SELECT @xml 
```

我想有条件地更新属性@lang。

如果有一个节点具有相同的 'tag' 和 'occ' 属性值组合（如 tag=ee），@lang 的属性值必须保持不变。

在其他情况下，它必须像上面的查询一样进行更改：将“en-US”更改为“nl-NL”。

任何人都知道如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:23:38.043

这应该这样做

```
DECLARE @xml XML;

SET @xml = '<record priref="2" creation="2009-12-14T10:39:04">
      <field tag="aa" occ="1" lang="nl-NL">somedata</field>
      <field tag="bb" occ="1" lang="en-US">somedata</field>
      <field tag="dd" occ="1">testdata</field>
      <field tag="bb" occ="2" lang="en-US">somedata</field>
      <field tag="cc" occ="1">testdata</field>
      <field tag="ee" occ="1" lang="nl-NL">somedata</field>
      <field tag="ee" occ="1" lang="en-US">somedata</field>
    </record>' 

DECLARE @no INT;
DECLARE @updneeded INT;
DECLARE nodecur CURSOR LOCAL FAST_FORWARD
FOR
  SELECT  rn,
          CASE WHEN COUNT(1) OVER ( PARTITION BY tag, occ ) > 1 THEN 0
               ELSE 1
          END updneeded
  FROM    ( SELECT  ROW_NUMBER() OVER ( ORDER BY node ) AS rn,
                    node.value('@tag', 'NVARCHAR(MAX)') AS tag,
                    node.value('@occ', 'NVARCHAR(MAX)') AS occ
            FROM    @xml.nodes('/record/field') x ( node )
          ) X;
OPEN nodecur;
WHILE ( 1 = 1 ) 
  BEGIN
    FETCH NEXT FROM nodecur INTO @no, @updneeded;
    IF ( @@FETCH_STATUS <> 0 ) BREAK;

    IF ( @updneeded = 1 ) 
      SET @xml.modify('replace value of (/record/field[sql:variable("@no")]/@lang)[.="en-US"][1] with "nl-NL"');
  END
CLOSE nodecur;
DEALLOCATE nodecur;

SELECT  @xml; 
```

但是，对于这些类型的操作，SQL 的速度不是很快。在应用程序代码中执行此操作或将一些 CLR 函数放在一起可能更有效。

# linux - 将程序的执行传递给另一个窗口管理器

> ID：12938873
> 
> 赞同：0
> 
> 时间：2012-10-17T16:24:05.327
> 
> 标签：linux, xserver, x11, xmonad

我目前正在使用 Arch Linux 和 Xmonad，但在我的大学课程中，我的 OpenGL 项目似乎并不能很好地发挥作用。目前，如果我知道我将使用 OpenGL，我只是切换到另一个运行 Openbox 的 X 服务器并在那里完成我所有的工作，但是我失去了 Xmonad 的所有漂亮的平铺功能。

考虑到我是登录两个 X 服务器的用户，有没有办法让我将 OpenGL 程序的执行从 Xmonad X 服务器传递到 Openbox X 服务器？这样，我需要 Openbox X 服务器来正确运行 OpenGL 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:08:49.170

在您的 WM 中，环境变量`$DISPLAY`标识了显示。不同的 X11 实例会有不同的`$DISPLAY`变量。

找出你的电流`$DISPLAY`：

```
echo $DISPLAY 
```

例如，打印`:0`.

现在您可以为特定显示器启动程序：

```
DISPLAY=":1" someprogram 
```

如果安全允许（例如，请参阅`man xhost`），程序将在指定的 X11 显示器上打开。

# php - 如何将 PHP 数组转换为特定的 Javascript 格式

> ID：12938877
> 
> 赞同：1
> 
> 时间：2012-10-17T16:24:28.040
> 
> 标签：php, arrays, json

我知道这一定是非常基本的，但我真的不知道如何解决这个问题。我想将 php 数组转换为以下符号，以便在 javascript 脚本中使用。这些是在初始化时传递给 js 脚本的国家。

源符号 (PHP)

```
array(3) { [0]=> array(1) { ["code"]=> string(2) "AR" } [1]=> array(1) { ["code"]=> string(2) "CO" } [2]=> array(1) { ["code"]=> string(2) "BR" } } 
```

期望的结果（JS）

```
[ "AR", "FK","CO", "BO", "BR", "CL", "CR", "EC", "GT", "HN", "LT", "MX", "PA", "PY", "PE", "ZA", "UY", "VE"] 
```

我可以根据需要重新格式化原始 PHP 数组，我需要知道的是如何格式化它以获得所需的结果。

我正在使用以下代码将数组传递给 js：

```
echo "<script>var codes = " . json_encode($codes) . ";</script>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:30:05.040

看起来以下内容对您有用：

```
<?php

$arr[0]['code'] = 'AR';
$arr[1]['code'] = 'CO';
$arr[2]['code'] = 'BR';

print_r($arr);

function extract_codes($var) { return $var['code']; }

print_r(array_map('extract_codes', $arr));

echo json_encode(array_map('extract_codes', $arr));

?> 
```

输出：

```
Array
(
    [0] => Array
        (
            [code] => AR
        )

    [1] => Array
        (
            [code] => CO
        )

    [2] => Array
        (
            [code] => BR
        )

)
Array
(
    [0] => AR
    [1] => CO
    [2] => BR
)
["AR","CO","BR"] 
```

它通过将每个两个字母代码映射到一个普通的一维数组，然后将其传递给 json_encode 来工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:40:52.020

Going with [`array_reduce`](http://php.net/manual/en/function.array-reduce.php):

```
$output = array_reduce($array, function($result, $item){

    $result[] = $item['code'];
    return $result;

}, array());

echo json_encode($output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:47:32.870

您需要遍历 PHP 关联数组并设置适当的变量。像这样：

```
$item = ''; // Prevent empty variable warning
foreach ($php_array as $key => $value){
  if (isset($key) && isset($value)) { // Check to see if the values are set
    if ($key == "code"){ $item .= "'".$value."',"; } // Set the correct variable & structure the items
  }
}
$output = substr($item,'',-1); // Remove the last character (comma)
$js_array = "[".$output."]"; // Embed the output in the js array
$code = $js_array; //The final product 
```

# sql - SQL - 从数据库中选择最“活跃”的时间

> ID：12938880
> 
> 赞同：3
> 
> 时间：2012-10-17T16:24:33.183
> 
> 标签：sql, tsql, datetime, stored-procedures

与 SQL密切相关[- 从数据库中选择最“活跃”的时间跨度](https://stackoverflow.com/questions/12938302/sql-select-most-active-timespan-fromdb)但不同的问题。

“我有一张交易表。在这张表中，我以 UTC 格式存储交易日期时间。我有几个月的数据，每天大约 20,000 笔交易。”

会怎么变

```
 select datepart(hour, the_column) as [hour], count(*) as total 
  from t 
  group by datepart(hour, the_column) 
  order by total desc 
```

这样我就可以选择最“活跃”的特定年、月、日、小时、分钟和秒。

澄清一下，我不是在寻找一天中哪个小时或分钟最活跃。相反，哪个时刻最活跃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:34:41.517

如果分钟分辨率足够：

```
select top 1 cast(the_column as smalldatetime) as moment, count(*) as total 
from t 
group by cast(the_column as smalldatetime)
order by total desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:27:31.543

```
Select 
    DATEPART(year, the_column) as year
    ,DATEPART(dayofyear,the_column) as day
    ,DATEPART(hh, the_column) as hour
    ,DATEPART(mi,the_column) as minute
    ,DATEPART(ss, the_column) as second
    ,count(*) as count from t
Group By 
    DATEPART(year, the_column)
    , DATEPART(dayofyear,the_column)    
    , DATEPART(hh, the_column)
    , DATEPART(mi,the_column)
    , DATEPART(ss, the_column)
order by count desc 
```

# ruby - 有用的 gem 版本应该有 1.0 版吗？

> ID：12938887
> 
> 赞同：4
> 
> 时间：2012-10-17T16:24:51.453
> 
> 标签：ruby, github, rubygems, gem

找到了这篇相关的帖子，[https://stackoverflow.com/questions/7139/should-a-first-release-be-an-0-1-version-or-1-0b](https://stackoverflow.com/questions/7139/should-a-first-release-be-an-0-1-version-or-1-0b)，但它与 Ruby Gems 无关。我在询问 Ruby Gems 的最佳和常见做法。

我将从 0.0.1 开始，当它经过全面测试并准备好使用时，可能会达到 0.0.10。

将版本保留为 0.xx 有意义吗？或者这是否意味着 gem 处于测试阶段且不稳定且无法使用？将版本设置为 1.0.0 会更好吗？

托管在 RubyGems 和 GitHub 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T20:33:12.113

感谢 matt，[semver.org](http://semver.org/)上的文档说是的，发布软件至少应该是 v1.0。

# jquery - jQuery克隆最后一个表行与排除

> ID：12938891
> 
> 赞同：1
> 
> 时间：2012-10-17T16:24:57.163
> 
> 标签：jquery, find, clone

我有一个输入表，它的最后一行是：

```
 <tr>
        <td>
           <input type="hidden" value="" readonly="" size="3" name="id[]">
       </td>
<td>
      <input type="hidden" value="" readonly="" size="3" name="fkcommand[]">
      </td>
<td>
<select name="type[]">
<option value="C" selected="selected">C</option>
<option value="P">P</option></select>
</td>
<td>
  <input type="input" value="1200" size="6" name="strike[]">
</td><td>
      <input type="input" value="-2" size="6" name="quantity[]">
    </td>
    </tr> 
```

我想克隆这个输入行，清空它的值，**除了隐藏值 fkcommand**并将其附加到表的末尾

我正在使用这个：

```
var row = $(this).parent().find('table tbody tr:last');
row.clone().find('input').val('').end().insertAfter(row).find('[name=fkcommand[]]').val('222'); 
```

它不会将值 '222' 添加到 fkcommand

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:30:08.127

可能问题出在选择器上。最好引用属性值：

```
.find("[name='fkcommand[]']") 
```

但是，我建议您以这种方式重写您的代码：

```
row.clone().insertAfter(row).find("input").each(function() {
    this.value = this.name == "fkcommand[]" ? "222" : "";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:36:47.880

给你

```
var clonedRow = $(table).last('tr').clone(); 
```

# java - 当我打算打开标准视频播放器时，我可以剥离图库界面或重新路由它吗？

> ID：12938892
> 
> 赞同：1
> 
> 时间：2012-10-17T16:24:58.707
> 
> 标签：java, android, android-intent

我在我的应用程序中打开一个视频，意图是使用默认播放器。它在左上角显示了一个画廊，该画廊将转到我不想要的设备的画廊。有没有办法自定义它，以便该图标将触发相当于后退按钮的按钮，或者完全删除它？

我在想意图中有参数或活动可以解释的东西。

**目标：** 我希望能够在没有顶部导航栏的情况下启动默认播放器。我觉得我应该为它创建自己的 VideoView，而不是使用默认播放器。我只是不希望画廊按钮指向画廊。感觉可能会有些混乱。

我还没有看到任何告诉我可以传递给视频活动的可选参数。

# php - PHP 在表单下拉列表中显示今天的日期/时间

> ID：12938895
> 
> 赞同：0
> 
> 时间：2012-10-17T16:25:13.920
> 
> 标签：php

我有这个长代码可以在表单下拉列表中显示今天的日期和时间。它确实工作正常，但我想知道是否有更简单的方法来做到这一点......？

我想显示所有月、日、年（只有几年）、所有小时（24 小时格式）、所有分钟和所有秒，但在每个下拉列表中选择当前日期/时间。

```
<select name="event_month">
<?
$arr_m = array("January","February","March","April","May","June","July","August","September","October","November","December");
$date_m = date(m);
$count = 1;
$months = 12;
do{
    $month = $arr_m[$count-1];
    if ($date_m == $count) {
        echo ("<option value='$month' selected='selected'>$month</option>");
        } else {
        echo ("<option value='$month'>$month</option>");
    }
    $count++;
}while($count<=$months);
?></select>

<select name="start-day">
<?
$date_d = date(d);
$day=1;
$days = 31;
do{
    if($date_d == $day){
        echo ("<option value='$day' selected='selected'>$day</option>");
    }else{
        echo ("<option value='$day'>$day</option>");
    }
    $day++;
}while($day<=$days);
?></select>

<select name="start-year"><?
$date_y = date(Y);
$year =intval($date_y);
$years = $year+2;
do{
    if($date_y == $year){
        echo ("<option value='$year' selected='selected'>$year</option>");
    }else{
        echo ("<option value='$year'>$year</option>");
    }
    $year++;
}while($year<=$years);
?></select>

<select name="start-hour"><?
$date_h = date(H);
$hour = 1;
$hours = 24;
do{
    if($date_h == $hour){
        echo ("<option value='$hour' selected='selected'>$hour</option>");
    }else{
        echo ("<option value='$hour'>$hour</option>");
    }
    $hour++;
}while($hour<=$hours);
?></select>

<select name="start-min"><?
$date_min = date(i);
$min = 1;
$mins = 60;
do{
    if($date_min == $min){
        echo ("<option value='$min' selected='selected'>$min</option>");
    }else{
        echo ("<option value='$min'>$min</option>");
    }
    $min++;
}while($min<=$mins);
?></select>

<select name="start-sec"><?
$date_sec = date(s);
$sec = 1;
$secs = 60;
do{
    if($date_sec == $sec){
        echo ("<option value='$sec' selected='selected'>$sec</option>");
    }else{
        echo ("<option value='$sec'>$sec</option>");
    }
    $sec++;
}while($sec<=$secs);
?></select> 
```

**-- 更新 --** 这是更干净的版本 - 谢谢！

```
<select name="start-month">
<?
$arr_m = array("January","February","March","April","May","June","July","August","September","October","November","December");
$month = date('m');
for ($i = 0; $i <= 12; $i++) {
    $name = $arr_m[$i-1];
    $sel = ($i == $month) ? ' selected="selected"' : '';
    echo "<option value=\"$i\"$sel>$name</option>";
}
?>
</select>

<select name="start-day">
<?
$day = date('d');
for ($i = 0; $i <= 31; $i++) {
    $sel = ($i == $day) ? ' selected="selected"' : '';
    echo "<option value=\"$i\"$sel>$i</option>";
}
?>
</select>

<select name="start-year">
<?
$year = date('Y');
$years = $year+2;
for ($i = $year; $i <= $years; $i++) {
    $sel = ($i == $year) ? ' selected="selected"' : '';
    echo "<option value=\"$i\"$sel>$i</option>";
}
?>
</select>

<select name="start-hour">
<?
$hour = date('G');
for ($i = 0; $i <= 24; $i++) {
    $sel = ($i == $hour) ? ' selected="selected"' : '';
    echo "<option value=\"$i\"$sel>$i</option>";
}
?>
</select>

<select name="start-min">
<?
$min = date('i');
for ($i = 0; $i <= 59; $i++) {
    $sel = ($i == $min) ? ' selected="selected"' : '';
    echo "<option value=\"$i\"$sel>$i</option>";
}
?>
</select>

<select name="start-sec">
<?
$sec = date('s');
for ($i = 0; $i <= 59; $i++) {
    $sel = ($i == $sec) ? ' selected="selected"' : '';
    echo "<option value=\"$i\"$sel>$i</option>";
}
?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:48:34.217

看看你是如何调用`date()`函数的：

```
$date_m = date(m); 
```

在您的代码中，您不断传递一个常量，例如`m`, `d`, `Y`。之所以可行，是因为 PHP 在这种情况下非常宽松，它会查找常量，但没有找到它，然后假定您指的是字符串`m`并将其传递给函数。

尽管代码有效，但您仍然应该通过在传递给的值周围添加引号来解决问题，`date()`例如：

```
$date_m = date('m'); 
```

这样做的原因是为了防止将来出现任何错误，您可能会定义一个名为`m`. 例如：

```
define('m', 'something...');

// here you would be passing something... to the date function and not m
$date_m = date(m); 
```

* * *

在简化代码方面，@MarcB 的建议会很好。另一种选择是创建一个函数，它将一个数组和选定的选项作为参数，并生成`<select>`HTML。这将消除代码中的大量 HTML 重复，因为您无需一遍又一遍地重复下拉 HTML，而是创建一个数组并调用您的函数，例如

```
echo getHTMLDropdown($options, $selectedOption); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:27:08.007

一些小的优化，以减少 LOC 计数：

```
for ($i = 0; $i <= 59; $i++) {
    $sel = ($i == $sec) ? ' selected="selected"' : '';
    echo "<option value=\"$i\"$sel>$i</option>";
} 
```

对于其他下拉菜单也是如此。

# alignment - open：直接 I/O 中的参数无效

> ID：12938898
> 
> 赞同：0
> 
> 时间：2012-10-17T16:25:28.370
> 
> 标签：alignment, aio

我试图通过[内核 AIO API进行](http://lse.sourceforge.net/io/aio.html)[AIO](http://en.wikipedia.org/wiki/Asynchronous_I/O)练习。这是一些代码：

```
#define _GNU_SOURCE /* syscall() not POSIX */
#define ALIGN_SIZE 4096
#define RD_WR_SIZE 1024

/* ... */

/* Make the alignment according to page size to validate open() */
posix_memalign(&buf, ALIGN_SIZE, RD_WR_SIZE);
fd = open("aio_test_file", O_RDWR | O_CREAT | O_DIRECT, 0644);
if (fd == -1) {
    perror("open");
    return -1;
}
/* ... */ 
```

但我的`open()`电话仍然失败：

```
open: Invalid argument 
```

我已经搜索了那个错误。他们中的一些人说您必须在直接 I/O 的情况下进行对齐。通过使用命令：

```
$ sudo dumpe2fs /dev/sda1 | grep -i "block size" 
```

我得到的`block size`是 4096。但是为什么 open() 调用仍然失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:51:41.530

从[手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)：

> 在 Linux 内核版本 2.4.10 中添加了 O_DIRECT 支持。较旧的 Linux 内核只是忽略此标志。一些文件系统可能没有实现该标志，并且如果使用 open() 将失败并显示 EINVAL。

那将是我的第一个猜测。

# c++ - How do the "<<" and ">>" operators do I/O?

> ID：12938899
> 
> 赞同：14
> 
> 时间：2012-10-17T16:25:32.643
> 
> 标签：c++

> **Possible Duplicate:**
> [Operator overloading](https://stackoverflow.com/questions/4421706/operator-overloading)

I'm making a long awaited return to C++ and there's some basic notation that doesn't really seem to be that prominent in other languages.

If you look at this line of code

```
cout << "firstvalue is " << firstvalue << endl; 
```

I realise *what* this does. It write's "firstvalue is x" to the console. x being the value of firstvalue. However, I do not know anything about the "<<" or ">>" double angled brackets. I haven't been able to research them or what they do as I don't know the formal name for them.

My question is, what actually *happens* (step by step) in the above statement? And what are these "<<" for? I think I understand that cout is a standard library function for writing to the console. However I'm used to either objective-c or dot notation. I do not see what object this "cout" function is a member of.

I can understand printf a little more easily, as at least it provides braces for the arguments. e.g. printf("your string here").

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-17T16:29:50.310

C++ allows operator overloading. That means a user-defined type can define its own behavior on built-in operators. In this case the operators are called: `left shift` or `right shift` operators. Those operators have been traditionally been used for bit-shifting, but the standard library repurposes them to symbolize streaming operations.

You can find a list of the available operators in [C and C++ here](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Bitwise_operators).

In your case you are streaming a string literal and a value of some type into [std::cout](http://en.cppreference.com/w/cpp/io/cout), which is an object of type [std::basic_ostream](http://en.cppreference.com/w/cpp/io/basic_ostream).

**Step-by-Step**

After precedence rules have been applied your code looks like this:

```
((cout << "foobar") << x) << endl; 
```

The compiler will basically transform the `object << object` expressions into function calls.

```
operator<<(operator<<(operator<<(cout, "foobar"), x), endl); 
```

Then it will figure out which overload to call. (This is really tricky. For now it should be sufficient to believe that it simply looks for an overload of `operator<<` with matching arguments).

Most of the built-in overloads for basic_ostream are [here](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt) and [here](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T16:37:48.100

The `<<` operator is the "arithmetic left shift" in C++. For example:

```
3 << 2 
```

evaluates to 12\. The reason is that the binary representation of 3 is

```
00000011 
```

shifting it twice to the left you get

```
00001100 
```

and the numeric value of the result is 12.

What it has to do this with output? Nothing at all, actually. However in C++ you can redefine the meaning of operators thanks to overloading. The C++ standard library decided to redefine the meaning of the left-shift operator as sort of a "send-to-stream".

So what happens is that

```
std::cout << "whatever" 
```

returns as value `std::cout`, but as side effect it outputs the string "whatever".

The operator was chosen because it had a reasonable precedence (overloading cannot change precedence, and you cannot define new operators) and the shape makes it appear somewhat "natural". Note however that the left-shift operator is just a normal operator and for example there is no guarantee about order of evaluation:

```
std::cout << f() << g() << h(); 
```

here the output will be the result of calling `f()`, followed by the result of calling `g()` and followed by the result of calling `h()`... but the functions themselves may be are called in a different order and for example `h()` could be called first!

So in a sense the "sequence look" of the operator is misleading, because it's about the sequence of output, but not about the sequence of evaluation.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T16:35:05.183

They're referred to as stream insertion (or extraction, in the case of `istream >>`), and are actually a semantic overload of the left-shift and right-shift operators.

So, this:

```
int x = 1 << 1; 
```

is a bit shift, but this:

```
std::cout << x; 
```

is a stream insertion. You can write it out explicitly as:

```
operator <<(std::cout, x); 
```

and get exactly the same result. The conventional format of stream insertion operators (they can be overloaded for user-defined types, so it's not unusual to write your own) is

```
std::ostream& operator <<(std::ostream&, T value); 
```

The output stream is returned (by reference) so you can chain calls: your example translates as:

```
operator<< (
  operator<< (
    operator<<(std::cout, "firstvalue"),
    firstvalue
  ),
  std::endl
); 
```

* * *

Oh, and ... `std::cout` (and `std::cerr` etc.) are not functions: they're global objects. The function here is the overloaded `<<` operator. Think of them as `FILE *stdout, *stderr` equivalents.

There are some advantages of C++ iostreams over `printf` et. al:

*   type-safety: you can't mistakenly print an integer with `"%f"` and get garbage, because overload resolution automatically selects the `std::ostream& operator<<(std::ostream&, double)` function at compile time
*   support for user-defined types: you can write a stream insertion operator for your whizzy new class, and it will just work, everywhere
*   stream abstraction: you can use the same overloads (so you only write them once) to format to stdout and stderr (`cout`/`cerr`), and files (`std::ofstream`) and strings (`std::ostringstream`). There's no need to handle `printf`/`fprintf`/`snprintf` separately.

There are also some disadvantages:

*   performance: there is some penalty to all that abstraction, and the generality of the locale system which is configured at runtime
*   verbosity: at least for primitive types already supported by `printf`, the format strings are much terser and more expressive

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T16:39:51.230

The `<<` is an operator, the same way `+` is an operator and `*` is an operator. In the way the following are equivalent expressions:

```
5 + 3 + 2
((5 + 3) + 2) 
```

So are the next two:

```
std::cout << "Hello" << std::endl
((std::cout << "Hello") << std::endl) 
```

It's just an operator with two operands. For the fundamental types, the `<<` and `>>` operators are actually known as the left and right shift operators. They perform bitwise shifting. For example, `5 << 1` will shift all the bits in 5 (`0101`) left one place, to get 10 (`1010`).

However, as with most other operators, you can overload the shift operators. In the case of the input/output library, the shift operators are overloaded to provide a natural syntax for input and output to a stream. That's because the directionality of the `<<` and `>>` tokens look like something is flowing one way or the other. With these I/O classes, these operator overloads return a reference to the stream you're performing the operator on so that they can be chained together.

You can overload the shift operators for a particular class by either providing a member function `operator<<` or `operator>>` that takes one argument (the operand to the right of the operator). Alternatively, you can provide non-member function with the same names that take two arguments, the two operands of the operator respectively.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T16:33:47.967

It's syntactic sugar for the following:

```
// Let the function 'print' be a renaming of 'operator<<'
// with T being the type of the object you want to print.
std::ostream& print(std::ostream&, const T&);

// 1) Print "first value is" and then return the stream you
// to which to just printed (ie. cout). 2) Use the returned
// stream to chain function calls and print 'firstValue'.
print(print(std::cout, "first value is"), firstValue); 
```

# r - 从波动率和现货价格的多元 XTS 计算期权价格

> ID：12938901
> 
> 赞同：1
> 
> 时间：2012-10-17T16:25:36.147
> 
> 标签：r, finance, xts

这是我下载现货价格和计算一堆指数的实际波动率的代码。

```
library(quantmod)
library(PerformanceAnalytics)
library(RQuantLib)

tickers.index = c("^RUT","^STOXX50E","^HSI")
myEnv <- new.env()
getSymbols(tickers.index, src='yahoo', from = "2004-03-26", to = "2012-10-10", env = myEnv, adjust=TRUE)
index <- do.call(merge, c(eapply(myEnv, Ad), all=TRUE))
index <-na.locf(index)

#Calculate daily returns for all indices and convert to arithmetic returns
index.ret <- exp(CalculateReturns(index,method="compound")) - 1
index.ret[1,] <- 0

#Calculate realized vol for all the indices
index.realized <- xts(apply(index.ret,2,runSD,n=20), index(index.ret))*sqrt(252)
index.realized[1:19,] <- 1 
```

我现在想做的是使用函数 EuropeanOption 为每个指数计算一系列看跌价格，每天使用以下参数：

*   基础价格 - 指数 XTS 的今日收盘价
*   行使价 - XTS 指数昨天的收盘价
*   隐含成交量 - 昨天指数的已实现成交量。已实现 XTS
*   所有其他参数将只是常量

我试图通过各种尝试使用 apply 等来实现这一点，但无法让它发挥作用。我不必使用 RQuantLib - 如果计算欧式期权价格的其他函数可以使这更容易，我可以接受。非常感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:00:37.650

好的，我开始工作了

```
puts.unwind <- mapply(EuropeanOption,"put",index,na.locf(lag(index,1),fromLast=TRUE),0,0,29/365‌​,index.realized) 
puts.unwind <- xts(matrix(as.numeric(puts.unwind[1,]),nrow(index),ncol(index)),index(index)) 
```

第一行计算看跌期权，第二行仅提取价格并重新格式化为 XTS。

# tsql - 对具有多个重复数据组的列进行分组

> ID：12938904
> 
> 赞同：4
> 
> 时间：2012-10-17T16:25:43.503
> 
> 标签：tsql, date, range, grouping, gaps-and-islands

我需要根据位置的日期对一些数据进行分组，包括确定日期范围何时没有位置。我有一些方法，因为我设法生成了范围和位置中所有日期的列表。

*   日期 1 位置 1
*   日期 2 位置 1
*   日期3 位置1
*   date4 未知
*   日期 5 未知
*   date6 未知
*   日期7 位置2
*   日期8 位置2
*   日期9 位置2
*   date10 位置2
*   日期11 位置1
*   日期 12 位置 1
*   日期 13 位置 1

使用普通组（显示 min(date) 和 max(date) 我会得到类似的结果：

*   位置 1，日期 1，日期 13
*   位置 2，日期 7，日期 10
*   未知，日期 4，日期 6

但我想要这个：

*   位置 1，日期 1，日期 3
*   未知，日期4，日期6
*   位置 2、日期 7、日期 9
*   位置 1，日期 11，日期 13

我还需要过滤掉短距离的未知，但这是次要的。

我希望这是有道理的，它看起来应该很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:20:59.147

看看岛屿和差距问题和 Itzik Ben-gan。有一种基于集合的方法可以获得您想要的结果。

我正在研究使用 ROW_NUMBER 或 RANK，但后来我偶然发现了 LAG 和 LEAD（在 SQL 2012 中引入），它们很好。我有下面的解决方案。它绝对可以简化，但是将它作为几个 CTE 让我的思维过程（尽管可能有缺陷）更容易看到。我只是慢慢地将数据转换成我想要的。如果您想查看每个新 CTE 产生的内容，请一次取消注释一个选择。

```
create table Junk
(aDate Datetime,
aLocation varchar(32))

insert into Junk values
('2000', 'Location1'),
('2001', 'Location1'),
('2002', 'Location1'),
('2004', 'Unknown'),
('2005', 'Unknown'),
('2006', 'Unknown'),
('2007', 'Location2'),
('2008', 'Location2'),
('2009', 'Location2'),
('2010', 'Location2'),
('2011', 'Location1'),
('2012', 'Location1'),
('2013', 'Location1'),
('2014', 'Location3')

;WITH StartsMiddlesAndEnds AS
(
    select
    aLocation, 
    aDate, 
    CASE(LAG(aLocation) OVER (ORDER BY aDate, aLocation)) WHEN aLocation THEN 0 ELSE 1 END [isStart],
    CASE(LEAD(aLocation) OVER (ORDER BY aDate, aLocation)) WHEN aLocation THEN 0 ELSE 1 END [isEnd]
    from Junk 
)
--select * from NumberedStartsMiddlesAndEnds
,NumberedStartsAndEnds AS --let's get rid of the rows that are in the middle of consecutive date groups
(
    select 
    aLocation,
    aDate,
    isStart,
    isEnd,
    ROW_NUMBER() OVER(ORDER BY aDate, aLocation) i
    FROM StartsMiddlesAndEnds 
    WHERE NOT(isStart = 0 AND isEnd = 0) --it is a middle row
)
--select * from NumberedStartsAndEnds
,CombinedStartAndEnds AS --now let's put the start and end dates in the same row
(
    select
    rangeStart.aLocation,
    rangeStart.aDate [aStart],
    rangeEnd.aDate [aEnd]
    FROM NumberedStartsAndEnds rangeStart
    join NumberedStartsAndEnds rangeEnd ON rangeStart.aLocation = rangeEnd.aLocation
    WHERE rangeStart.i = rangeEnd.i - 1 --consecutive rows
    and rangeStart.isStart = 1
    and rangeEnd.isEnd = 1
)
--select * from CombinedStartAndEnds
,OneDateIntervals AS --don't forget the cases where a single row is both a start and end
(
    select
    aLocation,
    aDate [aStart],
    aDate [aEnd]
    FROM NumberedStartsAndEnds
    WHERE isStart = 1 and isEnd = 1
)
--select * from OneDateIntervals
select aLocation, DATEPART(YEAR, aStart) [start], DATEPART(YEAR, aEnd) [end] from OneDateIntervals
UNION
select aLocation, DATEPART(YEAR, aStart) [start], DATEPART(YEAR, aEnd) [end] from CombinedStartAndEnds
ORDER BY DATEPART(YEAR, aStart) 
```

它产生

```
aLocation   start   end
Location1   2000    2002
Unknown 2004    2006
Location2   2007    2010
Location1   2011    2013
Location3   2014    2014 
```

没有2012吗？然后您仍然可以使用 ROW_NUMBER 获得相同的 StartsMiddlesAndEnds CTE：

```
;WITH NumberedRows AS
(
    SELECT aLocation, aDate, ROW_NUMBER() OVER (ORDER BY aDate, aLocation) [i] FROM Junk
)
,StartsMiddlesAndEnds AS
(
    select
    currentRow.aLocation, 
    currentRow.aDate, 
    CASE upperRow.aLocation WHEN currentRow.aLocation THEN 0 ELSE 1 END [isStart],
    CASE lowerRow.aLocation WHEN currentRow.aLocation THEN 0 ELSE 1 END [isEnd]
    from
    NumberedRows currentRow
    left outer join NumberedRows upperRow on upperRow.i = currentRow.i-1
    left outer join NumberedRows lowerRow on lowerRow.i = currentRow.i+1
)
--select * from StartsMiddlesAndEnds 
```

# javascript - JavaScript：`if / else` 语句是否比条件语句更快？

> ID：12938905
> 
> 赞同：0
> 
> 时间：2012-10-17T16:25:52.470
> 
> 标签：javascript, performance, if-statement, conditional-statements, micro-optimization

考虑以下两段代码：

```
var adj=0>grip.y?0<grip.x?0:-180:0<grip.x?-360:-180; 
```

和

```
var adj;    
if (grip.y < 0) {   
    if (grip.x > 0)
        adj = 0;
    else
        adj = -180;
}
else {      
    if (grip.x > 0)
        adj = -360;
    else
        adj = -180;
} 
```

它们都产生相同的结果，但哪个更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:28:56.653

速度差异可以忽略不计 - 使用您认为更方便和可读的任何一个。错误的条件构造不会有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T04:34:24.903

使用 switch 条件，这比 if 和其他条件语句更快。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-11-02T03:40:54.393

只是为了检查 JavaScript 的性能，我尝试做一个小实验。

```
console.time("ternary operator");
const val = (5 > 2) ? true : false;
console.log(val);
console.timeEnd("ternary operator");

console.time("if condition");
let val2;
if (5 > 2) {
val2 = true;
} else {
val2 = false;
}
console.log(val2)

console.timeEnd("if condition"); 
```

并且输出非常令人震惊，因为`if`条件几乎比三元语句快两倍。

结果 ：- [![在此处输入图像描述](../Images/d0db8be8e16f02a72115c78cf78540ad.png)](https://i.stack.imgur.com/LUkKn.png)

因此，总而言之，我建议`if`在三元运算符上使用条件。

# vb.net - VB导出列表视图到Excel

> ID：12938907
> 
> 赞同：0
> 
> 时间：2012-10-17T16:26:08.443
> 
> 标签：vb.net, excel, listview, extract

运行代码时，我不断收到“HRESULT 异常：0x800A03EC”错误。一些论坛说“1”需要更改为“0”，反之亦然。在这一点上，我只是不知道出了什么问题，没有什么突出的。我相信我已经加载了我需要的所有参考资料，因此非常感谢任何建议/帮助。

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    Dim objExcel As New Excel.Application
    Dim bkWorkBook As Workbook
    Dim shWorkSheet As Worksheet
    Dim i As Integer
    Dim j As Integer

    objExcel = New Excel.Application
    bkWorkBook = objExcel.Workbooks.Add
    shWorkSheet = bkWorkBook.ActiveSheet
    For i = 0 To Me.ListView1.Columns.Count
        shWorkSheet.Cells(1, Chr(64 + i)) = Me.ListView1.Columns(i)
    Next
    For i = 1 To Me.ListView1.Items.Count
        shWorkSheet.Cells(i + 2, "A") = Me.ListView1.Items(i).Text
        For j = 2 To Me.ListView1.Items.Count
            shWorkSheet.Cells(i + 2, Chr(64 + j)) = Me.ListView1.Items(i).SubItems(j - 1)
        Next
    Next

    objExcel.Visible = True
End Sub 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:54:58.237

```
shWorkSheet.Cells(1, Chr(64 + i)) 
```

应该

```
shWorkSheet.Cells(1, i) 
```

Cells 需要一个或两个数字参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:56:12.887

我重新测试并发现我没有完全测试超过几列的列表视图。尝试这个：

```
 Try
        Dim objExcel As New Excel.Application
        Dim bkWorkBook As Workbook
        Dim shWorkSheet As Worksheet
        Dim i As Integer
        Dim j As Integer

        objExcel = New Excel.Application
        bkWorkBook = objExcel.Workbooks.Add
        shWorkSheet = CType(bkWorkBook.ActiveSheet, Worksheet)
        For i = 0 To Me.ListView1.Columns.Count - 1
            shWorkSheet.Cells(1, i + 1) = Me.ListView1.Columns(i).Text
        Next
        For i = 0 To Me.ListView1.Items.Count - 1
            For j = 0 To Me.ListView1.Items(i).SubItems.Count - 1
                shWorkSheet.Cells(i + 2, j + 1) = Me.ListView1.Items(i).SubItems(j).Text
            Next
        Next

        objExcel.Visible = True
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-11T20:11:19.800

此代码仅添加： CreateObject 和 autofit 行和列

```
 Public Sub ExportLw2Excel(Lw As ListView)
    Try
        Dim objExcel As Object ' New Excel.Application
        objExcel = CreateObject("Excel.Application")
        Dim bkWorkBook As Object 'As Workbook
        Dim shWorkSheet As Object 'As Worksheet
        Dim i As Integer
        Dim j As Integer

        'objExcel = New Excel.Application
        bkWorkBook = objExcel.Workbooks.Add
        shWorkSheet = bkWorkBook.activesheet '  CType(bkWorkBook.ActiveSheet, Worksheet)
        For i = 0 To Lw.Columns.Count - 1
            shWorkSheet.Cells(1, i + 1) = Lw.Columns(i).Text
        Next
        For i = 0 To Lw.Items.Count - 1
            For j = 0 To Lw.Items(i).SubItems.Count - 1
                shWorkSheet.Cells(i + 2, j + 1) = Lw.Items(i).SubItems(j).Text
            Next
        Next

        objExcel.Cells.Select
        objExcel.Cells.EntireColumn.AutoFit
        objExcel.Cells.EntireRow.AutoFit
        objExcel.Range("A1:B1").Select
        objExcel.Selection.Font.Bold = True
        objExcel.Range("A1").Select

        objExcel.Visible = True
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-19T10:29:09.303

如果您想将带有彩色线条的列表视图导出到 Excel，这是一个解决方案。请根据您的 ListViews 行和列索引正确定位索引！

```
Try
    Dim objExcel As New Excel.Application
    Dim bkWorkBook As Excel.Workbook
    Dim shWorkSheet As Excel.Worksheet
    Dim i As Integer
    Dim j As Integer

    objExcel = New Excel.Application
    bkWorkBook = objExcel.Workbooks.Add
    shWorkSheet = CType(bkWorkBook.ActiveSheet, Excel.Worksheet)
    For i = 0 To objLv.Columns.Count - 1
        shWorkSheet.Cells(1, i + 1) = objLv.Columns(i).Text
    Next

    For i = 0 To objLv.Items.Count - 1
        Dim clr = ColorTranslator.ToOle(objLv.Items(i - 1).BackColor)
        shWorkSheet.Rows(i).Interior.Color = clr
        For j = 2 To objLv.Columns.Count
                shWorkSheet.Cells(i + 1, j - 1).Value = objLv.Items(i - 1).SubItems(j - 1).Text
        Next
    Next

    objExcel.Visible = True
Catch ex As Exception
    MsgBox(ex.Message)
End Try 
```

# apache - 在我的 WAMP 上，当我将 Apache 设置为以用户身份登录时，它不会启动，否则会

> ID：12938909
> 
> 赞同：0
> 
> 时间：2012-10-17T16:26:20.477
> 
> 标签：apache, wamp, windows-server-2003

当我尝试在我的计算机（Windows Server 2003）上以本地用户身份登录 Apache 时，我无法启动它。如果我将它设置为本地系统帐户，它开始就好了。

关于什么可以阻止它的任何想法？

# javascript - 动态移除之前动态添加的div

> ID：12938915
> 
> 赞同：0
> 
> 时间：2012-10-17T16:26:44.653
> 
> 标签：javascript

我编写了一个函数来将 div 动态插入到网页中。但后来我必须删除这些 div。在添加 div 时，我对所有 div 使用了类名。因此，我使用 getElementsByClassName() 从 dom 中获取所有元素，并遍历所有这些元素并删除 div。我的代码没有删除之前创建的所有 div。

请找到我的代码片段：

```
var elements = document.getElementsByClassName("xxxx");

for (var i = 0; i < elements .length; i++) {

  var element = elements[i];

  if (element && element.hasChildNodes()) {

      var parent_node = element.parentNode;

      while(element.firstChild) {

          parent_node.insertBefore(element.firstChild, element);
      }

      parent_node.removeChild(element);

   }

   elements = document.getElementsByClassName("xxxx");

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:47:04.467

如果您只想删除该类的所有 DIV 元素，则可以使用以下代码：

```
var elements = document.getElementsByClassName("xxxx");
while ( elements[0] ) {
    elements[0].parentNode.removeChild(elements[0]);
} 
```

它还将删除您的 DIV 及其子节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:32:31.473

您需要删除最后一行“elements = document.getElementsByClassName("xxxx");” - 那条线会导致你在循环中错过所有其他元素。

# java - 无法使用 itext + 飞碟呈现表单字段

> ID：12938916
> 
> 赞同：2
> 
> 时间：2012-10-17T16:26:50.363
> 
> 标签：java, html, itext, flying-saucer

我正在使用 iText 和飞碟从 XHTML 创建 PDF。当我看到我的输出 PDF 时，我看不到 XHTML 页面中的输入文本框、复选框、单选按钮、下拉框和按钮。除了输出 PDF 中的段落外，我看不到任何 HTML。有什么办法可以克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:35:20.030

我可以通过使用[YAHP-Converter来解决这个问题。感谢](http://www.allcolor.org/YaHPConverter/)[@RealHowTo](https://stackoverflow.com/questions/6133581/html-to-pdf-using-itext-how-can-produce-a-checkbox)的发帖， 我在飞碟上推荐这个。

# python - Python：实例没有属性

> ID：12938917
> 
> 赞同：20
> 
> 时间：2012-10-17T16:26:52.297
> 
> 标签：python, class, attributeerror

我在 python 的一个类中的列表有问题。这是我的代码：

```
class Residues:
    def setdata(self, name):
        self.name = name
        self.atoms = list()

a = atom
C = Residues()
C.atoms.append(a) 
```

像这样的东西。我收到一条错误消息：

```
AttributeError: Residues instance has no attribute 'atoms' 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-17T16:31:22.843

您的类没有`__init__()`，因此在实例化时，该属性`atoms`不存在。你必须这样做`C.setdata('something')`才可`C.atoms`用。

```
>>> C = Residues()
>>> C.atoms.append('thing')

Traceback (most recent call last):
  File "<pyshell#84>", line 1, in <module>
    B.atoms.append('thing')
AttributeError: Residues instance has no attribute 'atoms'

>>> C.setdata('something')
>>> C.atoms.append('thing')   # now it works
>>> 
```

与 Java 等语言不同，您在编译时就知道对象将具有哪些属性/成员变量，而在 Python 中，您可以在运行时动态添加属性。这也意味着同一类的实例可以具有不同的属性。

为了确保你总是有（除非你把它弄乱了，那是你自己的错）一个`atoms`列表，你可以添加一个构造函数：

```
def __init__(self):
    self.atoms = [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-29T02:41:22.587

该错误意味着类 Residues 没有函数调用原子。解决方案可能如下：

```
class Residues:
    def setdata(self,  atoms, name=None):
        self.name = name
        self.atoms =[]

C = Residues()
C.setdata(atoms= " a ") 
```

# android - 在 Android 中的 ProgressDialog/AlertDialog 上禁用背景暗淡

> ID：12938918
> 
> 赞同：25
> 
> 时间：2012-10-17T16:26:54.657
> 
> 标签：android, android-alertdialog, progressdialog

我使用了一个带有 ProgressDialog 的 AsyncTask。这会自动导致大约 40% 的背景暗淡。我想关闭这个暗淡（0% 暗淡），但我尝试过的，没有奏效：

```
myLoadingDialog = new ProgressDialog(MainActivity.this.getApplicationContext());
myLoadingDialog.setMessage("Loading...");
myLoadingDialog.setIndeterminate(true);
myLoadingDialog.setCancelable(false);
WindowManager.LayoutParams lp = myLoadingDialog.getWindow().getAttributes();
lp.dimAmount = 0.0f; 
myLoadingDialog.show(); 
```

那个暗淡的问题是，我不得不终止我的平板电脑的 SystemUI-Process 以实现 Kiosk 模式（没有 System-Bar），并且 ProgressDialog 使除了 System-Bar 所在的区域之外的所有内容都变暗，所以我有一个明亮的边框在屏幕底部。

如果有办法获得完整的全屏暗淡，我也会很高兴。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-17T16:36:06.243

采用

```
myLoadingDialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHI‌​ND); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-13T14:01:19.503

您还可以使用以下方法更改相对调光量：

```
window?.setDimAmount(0.2f) 
```

这是在对话类的 onCreate 中设置的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-12-18T09:45:44.427

你也可以添加这个主题来解决这个问题

```
<item name="android:backgroundDimEnabled">false</item> 
```

# .net - RegSvcs.exe 两次注册同一个 dll

> ID：12938921
> 
> 赞同：0
> 
> 时间：2012-10-17T16:27:01.387
> 
> 标签：.net, com+, component-services

假设我在两个不同 exe 应用程序的两个不同 bin 文件夹中有相同的 .net 托管 dll（相同版本，相同代码）。如果我使用 RegSvcs.exe /appname:app1 pathtodll1/example.dll 和 RegSvcs.exe /appname:app2 pathtodll2/example.dll 将两个 dll 注册到 COM+ 中。我可以假设一个 exe 将始终运行 app1 com+，而另一个 exe 将运行 app2 com+？

我的意思是，如果我能够在注册时更改应用程序名称，我看不到 exe 客户端应用程序（顺便说一句，托管应用程序）如何解决在请求 dll 时应该运行哪个 COM+ 应用程序...

~~他们是否使用注册表 CodeBase 属性来确定应用程序名称？~~

编辑：看来我无法第二次注册。然后我有另一个问题......当app2运行并询问example.dll服务时，哪个dll真的上传到app1.exe旁边的那个还是app2.exe中的那个？我真的需要在 app2 bin 文件夹中复制 example.dll 吗？

如果我在混合中添加第三个非 com+ dll (second.dll)，这将被两个 exe 和 example.dll 引用，哪个 second.dll 将被加载到 app2.exe 应用程序域中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:47:21.253

加载器选择哪个dll似乎与组件服务无关。从.net 的角度来看，COM+ 只是一个设置存储。因此，当一个给定的 dll 像往常一样在应用程序域中加载时，它会询问 COM+ 存储本身（即具有相同版本和接口的 dll）是否存在于那里。如果它存在，那么它会读取它的 COM+ 设置。如果不是，我认为它会尝试在 COM+ 中自动注册（使用默认的 COM+ 设置）。

# java - 在不同的类中引用一个类

> ID：12938924
> 
> 赞同：-1
> 
> 时间：2012-10-17T16:27:05.640
> 
> 标签：java, class

在我的 B 类中，我希望能够使用我的 A 类中的方法。这是我尝试过的。

1.  进口A类
2.  初始化它 - classA a = new classA(null, null);
3.  添加到我想使用 A 类方法的方法中

    public void getAMethod() { a.getTestValue; }

我的问题是：

1.  这是正确的方法吗？
2.  每次执行 B 类时，是否总是创建 A 类的新实例？
3.  如果打开了 A 类并且我运行 B 类，那么 B 类是获取 A 类中变量的当前值，还是因为 new classA(null, null) 而获取了 A 类的默认值？

我的问题是：

1.  对于同一个变量，我得到了 2 个不同的值。

示例：A 类 -

```
initialize = boolean test = false 
```

当 A 类对话框打开时，设置 test = true

创建方法

```
public boolean getTestValue() {
   return test;
} 
```

从 A 类中运行 getTestValue 时，它​​始终为真 从 B 类调用 getTestValue 时，它​​始终返回 false（即使 A 类对话框打开）

好像b类每次都在做A类的新实例，所以它只看到A类的默认值。当B类调用A类时，我需要获取A类的当前值，而不是默认值

***编辑*** 我将 A 类中的方法更改为静态，它解决了我遇到的问题。这对我帮助很大——感谢大家的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:40:31.670

好的，有相当多的基础要涵盖，但我会尽量简短并依次回答每个问题。

**1\. 这是正确的做法吗？**

您*通常*不需要在小程序中导入类。如果`ClassA`和`ClassB`位于同一个*包*中，或者它们都没有分配包，但位于同一目录中，则不需要导入。

至于在方法中包装`ClassA`方法`ClassB`，不，*不*。您可以随时从内部访问`ClassA` *静态*方法`ClassB`；

```
ClassA.myMethodInClassA(); 
```

如果`myMethodInClassA();`不是静态的，*那么*你需要在一个这样的**实例**上调用它`ClassA`，（仍然在 ClassB 中）你会这样做；

```
ClassA myA = new ClassA();
myA.myMethodInClassA(); 
```

这让我想到了`static`vs`non static`领域。如果您的字段`initialize`和`test`标记为`static`，例如；

```
public static boolean initialize = false; 
```

然后它们将在*所有*实例中*始终*具有相同的值，并且可以从任何地方访问；*`ClassA`*

 *```
if(ClassA.initialize) {
    //something
} 
```

如果它们*没有*被标记为静态，那么（很像非静态方法）你需要一个**实例**来`ClassA`查询字段，例如；

```
ClassA myA = new ClassA();
if(myA.initialize) {
    //something
} 
```

在这种情况下， 的每个**实例**都有`ClassA`自己的 副本`initialize`，因此 的值`initialize`取决于您要查询的实例。

**2.是不是每次执行B类，总是创建一个A类的新实例？**

如果你在构造函数中调用构造`ClassA`函数 for`ClassB`那么答案是肯定的，换句话说，如果你这样做了；

```
public ClassB() {
    //constructor for ClassB
    ClassA c = new ClassA();
} 
```

那么是的，`ClassA` *每次*创建新的`ClassB`.

**3.如果A类打开，我运行B类，B类是获取A类中变量的当前值，还是因为new classA(null, null)得到A类默认值？**

如果“打开”是指您在命令提示符下运行`java ClassA`然后运行`java ClassB`，那么您所拥有的是两个独立的程序，两个并行运行的 JVM 实例。这两个程序彼此没有任何关系，除非您专门实现某些东西，否则它们无法以**任何方式相互通信。**

如果“打开”是指构造，`new ClassA();`那么我们再次谈论类与实例成员。

在我对问题 1 的回答中，我对`static`vs`non-static`领域和方法进行了咆哮，该问题涵盖了这一点。总的来说，我建议您阅读一些文档，例如：

[http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

**TLDR：去阅读这个链接^^**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:54:46.677

@Jkteater因为你不支持你的代码片段的问题，但根据你的问题

```
Is this the correct way to do it ? 
```

Ans：您可以通过两种方法在任何其他类中使用 A 类的方法，一种是我在 B 类中创建 A 类的对象（classA a=new classA(); A.getTestValue();），第二种是通过继承将 A 类扩展为 B 类（B 类扩展 A 类）。

```
Is every time I execute class B, is it always creating a new instance of class A? 
```

Ans：如果您不想创建 A 类的新实例，那么要么在 B 类中扩展 A 类，要么在 A 类中使您的方法静态。在静态情况下，您将仅通过类名使用它（A.getTestValue();）

```
If class A is opened and I run class B, does class B get the current
  values of variables in class A, or does it get the class A defaults
   because of new classA(null, null) 
```

Ans:classA a=new classA(null,null);this class(null,null)是一个构造函数，用于初始化A类的非静态数据成员不会有任何区别B类的当前值是多少，该值您将通过此构造函数，这将初始化 A 类的非静态数据成员。

对于您的以下问题，您可以粘贴确切的代码，以便我能够给出确切的答案..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:33:17.770

将变量 test 设为静态，因为您正在创建 A 的新实例，所以值不同

这是正确的方法吗？
好吧，这取决于详细的用例

是每次我执行 B 类时，它总是创建 A 类的新实例吗？
是的，每次创建 B 的实例时，它都会创建一个新的 A

实例因为新的classA（null，null）？
由于您正在创建一个新实例，因此您将获得默认值*

# c++ - 编译 PyGAMMA Mac Lion：g++ 找不到标准 C++ 头文件（字符串/iostream...）

> ID：12938931
> 
> 赞同：0
> 
> 时间：2012-10-17T16:27:30.203
> 
> 标签：c++, compiler-construction, osx-lion

我试图根据这些说明编译 PyGAMMA [http://scion.duhs.duke.edu/vespa/gamma/wiki/PyGammaBuildingLibrary](http://scion.duhs.duke.edu/vespa/gamma/wiki/PyGammaBuildingLibrary)：

我的设置：XCode：4.5.1 + CommandLineTools MacOSX Lion

我得到以下输出：

```
~/gamma/platforms/OSX $ make pysgdist

Include directory: /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7
Library directory: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages

Checking for python include and lib directories

Good. The Python Includes Directory Exists. /Library/Frameworks/Python.framework/Versions/2.7/include/python2.7
Good. The Python Library Directory Exists. /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages

g++ -c -fPIC -Wall -mmacosx-version-min=10.6 -isysroot /Developer/SDKs/MacOSX10.6.sdk -I../../src  -D_USING_LAPACK_ -O3 -arch x86_64 ../../src/Basics/Gutils.cc -o ../../mac-darwin/Gutils.pso
In file included from ../../src/Basics/Gutils.cc:33:
../../src/Basics/Gutils.h:33:50: error: string: No such file or directory
../../src/Basics/Gutils.h:34:60: error: iostream: No such file or directory
In file included from ../../src/Basics/Gutils.h:35,
from ../../src/Basics/Gutils.cc:33:
../../src/GamGen.h:163:19: error: cstdlib: No such file or directory
../../src/Basics/Gutils.cc:37:20: error: stdlib.h: No such file or directory
../../src/Basics/Gutils.cc:38:18: error: math.h: No such file or directory
In file included from ../../src/Basics/Gutils.cc:33:
../../src/Basics/Gutils.h:52: error: expected unqualified-id before ‘&amp;’ token
../../src/Basics/Gutils.h:52: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.h:54: error: expected unqualified-id before ‘&amp;’ token
../../src/Basics/Gutils.h:54: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.h:56: error: expected unqualified-id before ‘&amp;’ token
../../src/Basics/Gutils.h:56: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.h:58: error: expected unqualified-id before ‘&amp;’ token
../../src/Basics/Gutils.h:58: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.h:59: error: expected unqualified-id before ‘&amp;’ token
../../src/Basics/Gutils.h:59: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.h:60: error: expected unqualified-id before ‘&amp;’ token
../../src/Basics/Gutils.h:60: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.h:77: error: expected unqualified-id before ‘&amp;’ token
../../src/Basics/Gutils.h:77: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.h:78: error: expected unqualified-id before ‘&amp;’ token
../../src/Basics/Gutils.h:78: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.h:79: error: expected unqualified-id before ‘&amp;’ token
../../src/Basics/Gutils.h:79: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:40: error: ‘std::string’ has not been declared
../../src/Basics/Gutils.cc:41: error: ‘std::cout’ has not been declared
../../src/Basics/Gutils.cc:42: error: ‘std::cin’ has not been declared
../../src/Basics/Gutils.cc:43: error: ‘std::endl’ has not been declared
../../src/Basics/Gutils.cc:61: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:61: error: ISO C++ forbids declaration of ‘string’ with no type
../../src/Basics/Gutils.cc: In function ‘void query_parameter(int, char**, int, int)’:
../../src/Basics/Gutils.cc:63: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc:64: error: ‘cout’ was not declared in this scope
../../src/Basics/Gutils.cc:64: error: ‘Q’ was not declared in this scope
../../src/Basics/Gutils.cc:64: error: ‘cin’ was not declared in this scope
../../src/Basics/Gutils.cc:64: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc: At global scope:
../../src/Basics/Gutils.cc:68: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:68: error: ISO C++ forbids declaration of ‘string’ with no type
../../src/Basics/Gutils.cc: In function ‘void query_parameter(int, char**, int, int)’:
../../src/Basics/Gutils.cc:68: error: redefinition of ‘void query_parameter(int, char**, int, int)’
../../src/Basics/Gutils.cc:61: error: ‘void query_parameter(int, char**, int, int)’ previously defined here
../../src/Basics/Gutils.cc:70: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc:70: error: ‘atof’ was not declared in this scope
../../src/Basics/Gutils.cc:71: error: ‘cout’ was not declared in this scope
../../src/Basics/Gutils.cc:71: error: ‘Q’ was not declared in this scope
../../src/Basics/Gutils.cc:71: error: ‘cin’ was not declared in this scope
../../src/Basics/Gutils.cc:71: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc: At global scope:
../../src/Basics/Gutils.cc:75: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:75: error: ISO C++ forbids declaration of ‘string’ with no type
../../src/Basics/Gutils.cc: In function ‘void query_parameter(int, char**, int, int)’:
../../src/Basics/Gutils.cc:75: error: redefinition of ‘void query_parameter(int, char**, int, int)’
../../src/Basics/Gutils.cc:61: error: ‘void query_parameter(int, char**, int, int)’ previously defined here
../../src/Basics/Gutils.cc:77: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc:77: error: ‘atoi’ was not declared in this scope
../../src/Basics/Gutils.cc:78: error: ‘cout’ was not declared in this scope
../../src/Basics/Gutils.cc:78: error: ‘Q’ was not declared in this scope
../../src/Basics/Gutils.cc:78: error: ‘cin’ was not declared in this scope
../../src/Basics/Gutils.cc:78: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc: At global scope:
../../src/Basics/Gutils.cc:82: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:82: error: ISO C++ forbids declaration of ‘string’ with no type
../../src/Basics/Gutils.cc: In function ‘bool ask_set(int, char**, int, int)’:
../../src/Basics/Gutils.cc:85: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc:85: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:89: error: ‘cout’ was not declared in this scope
../../src/Basics/Gutils.cc:89: error: ‘Q’ was not declared in this scope
../../src/Basics/Gutils.cc:90: error: ‘cin’ was not declared in this scope
../../src/Basics/Gutils.cc:91: error: expected `;' before ‘ss’
../../src/Basics/Gutils.cc:91: warning: statement has no effect
../../src/Basics/Gutils.cc:92: error: ‘ss’ was not declared in this scope
../../src/Basics/Gutils.cc:93: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc: At global scope:
../../src/Basics/Gutils.cc:98: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:98: error: ISO C++ forbids declaration of ‘string’ with no type
../../src/Basics/Gutils.cc: In function ‘bool ask_set(int, char**, int, int)’:
../../src/Basics/Gutils.cc:98: error: redefinition of ‘bool ask_set(int, char**, int, int)’
../../src/Basics/Gutils.cc:82: error: ‘bool ask_set(int, char**, int, int)’ previously defined here
../../src/Basics/Gutils.cc:101: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc:101: error: ‘atoi’ was not declared in this scope
../../src/Basics/Gutils.cc:105: error: ‘cout’ was not declared in this scope
../../src/Basics/Gutils.cc:105: error: ‘Q’ was not declared in this scope
../../src/Basics/Gutils.cc:106: error: ‘cin’ was not declared in this scope
../../src/Basics/Gutils.cc:107: error: expected `;' before ‘ss’
../../src/Basics/Gutils.cc:107: warning: statement has no effect
../../src/Basics/Gutils.cc:108: error: ‘ss’ was not declared in this scope
../../src/Basics/Gutils.cc:109: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc:109: error: ‘atoi’ was not declared in this scope
../../src/Basics/Gutils.cc: At global scope:
../../src/Basics/Gutils.cc:114: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:114: error: ISO C++ forbids declaration of ‘string’ with no type
../../src/Basics/Gutils.cc: In function ‘bool ask_set(int, char**, int, int)’:
../../src/Basics/Gutils.cc:114: error: redefinition of ‘bool ask_set(int, char**, int, int)’
../../src/Basics/Gutils.cc:82: error: ‘bool ask_set(int, char**, int, int)’ previously defined here
../../src/Basics/Gutils.cc:117: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc:117: error: ‘atof’ was not declared in this scope
../../src/Basics/Gutils.cc:121: error: ‘cout’ was not declared in this scope
../../src/Basics/Gutils.cc:121: error: ‘Q’ was not declared in this scope
../../src/Basics/Gutils.cc:122: error: ‘cin’ was not declared in this scope
../../src/Basics/Gutils.cc:123: error: expected `;' before ‘ss’
../../src/Basics/Gutils.cc:123: warning: statement has no effect
../../src/Basics/Gutils.cc:124: error: ‘ss’ was not declared in this scope
../../src/Basics/Gutils.cc:125: error: ‘V’ was not declared in this scope
../../src/Basics/Gutils.cc:125: error: ‘atof’ was not declared in this scope
../../src/Basics/Gutils.cc: At global scope:
../../src/Basics/Gutils.cc:143: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:143: error: ISO C++ forbids declaration of ‘string’ with no type
../../src/Basics/Gutils.cc: In function ‘void GAMMAerror(int)’:
../../src/Basics/Gutils.cc:154: error: expected `;' before ‘s’
../../src/Basics/Gutils.cc:154: warning: statement has no effect
../../src/Basics/Gutils.cc:155: error: ‘cout’ was not declared in this scope
../../src/Basics/Gutils.cc:155: error: ‘s’ was not declared in this scope
../../src/Basics/Gutils.cc:155: error: ‘noret’ was not declared in this scope
../../src/Basics/Gutils.cc:155: error: ‘endl’ was not declared in this scope
../../src/Basics/Gutils.cc: At global scope:
../../src/Basics/Gutils.cc:158: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:158: error: ISO C++ forbids declaration of ‘string’ with no type
../../src/Basics/Gutils.cc: In function ‘void GAMMAerror(int)’:
../../src/Basics/Gutils.cc:158: error: redefinition of ‘void GAMMAerror(int)’
../../src/Basics/Gutils.cc:143: error: ‘void GAMMAerror(int)’ previously defined here
../../src/Basics/Gutils.cc:160: error: expected `;' before ‘msg’
../../src/Basics/Gutils.cc:160: warning: statement has no effect
../../src/Basics/Gutils.cc:161: error: ‘eidx’ was not declared in this scope
../../src/Basics/Gutils.cc:163: error: ‘msg’ was not declared in this scope
../../src/Basics/Gutils.cc:163: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:164: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:165: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:166: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:167: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:168: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:169: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:170: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:171: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:172: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:173: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:174: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:175: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:176: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:177: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:178: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:179: error: ‘noret’ was not declared in this scope
../../src/Basics/Gutils.cc:179: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:181: error: ‘hdr’ was not declared in this scope
../../src/Basics/Gutils.cc:181: error: ‘msg’ was not declared in this scope
../../src/Basics/Gutils.cc:181: error: ‘noret’ was not declared in this scope
../../src/Basics/Gutils.cc: At global scope:
../../src/Basics/Gutils.cc:184: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
../../src/Basics/Gutils.cc:184: error: ISO C++ forbids declaration of ‘string’ with no type
../../src/Basics/Gutils.cc: In function ‘void GAMMAerror(int)’:
../../src/Basics/Gutils.cc:184: error: redefinition of ‘void GAMMAerror(int)’
../../src/Basics/Gutils.cc:143: error: ‘void GAMMAerror(int)’ previously defined here
../../src/Basics/Gutils.cc:186: error: expected `;' before ‘msg’
../../src/Basics/Gutils.cc:186: warning: statement has no effect
../../src/Basics/Gutils.cc:187: error: ‘eidx’ was not declared in this scope
../../src/Basics/Gutils.cc:189: error: ‘msg’ was not declared in this scope
../../src/Basics/Gutils.cc:189: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:190: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:191: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:192: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:193: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:194: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:195: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:195: error: ‘pname’ was not declared in this scope
../../src/Basics/Gutils.cc:196: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:197: error: ‘string’ cannot be used as a function
../../src/Basics/Gutils.cc:199: error: ‘hdr’ was not declared in this scope
../../src/Basics/Gutils.cc:199: error: ‘msg’ was not declared in this scope
../../src/Basics/Gutils.cc:199: error: ‘pname’ was not declared in this scope
../../src/Basics/Gutils.cc:199: error: ‘noret’ was not declared in this scope
../../src/Basics/Gutils.cc: In function ‘volatile void GAMMAfatal()’:
../../src/Basics/Gutils.cc:204: error: ‘cout’ was not declared in this scope
../../src/Basics/Gutils.cc:204: error: ‘endl’ was not declared in this scope
../../src/Basics/Gutils.cc:205: error: ‘exit’ was not declared in this scope
make: *** [../../mac-darwin/Gutils.pso] Error 1 
```

似乎标准 C++ 包含不会自动包含在内。有人对如何解决这个问题有预感吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:44:53.680

刚刚解决了。。

1) 告诉 gcc 通常的 C++ 标准头。因此更改：SRCDIRINCL = -I$(SRCDIR) 到 SRCDIRINCL = -I$(SRCDIR) -I/usr/include -I/usr/include/c++/4.2.1/

2) 告诉 gcc 通常的 osx 框架路径并包含 Accelerate 框架。因此更改：LAPACK_LIBS = 到 LAPACK_LIBS = -F/System/Library/Frameworks/ -framework Accelerate

现在应该可以正常工作了。

# html - 具有不同字体和高度线大小的文本区域中的光标位置

> ID：12938933
> 
> 赞同：0
> 
> 时间：2012-10-17T16:27:39.943
> 
> 标签：html, css, internet-explorer

我尝试为 textarea 控件设置字体大小（13px）和行高大小（23px）。

例如第一个代码：（[http://jsfiddle.net/D6T4f/](http://jsfiddle.net/D6T4f/)）

```
<TEXTAREA style="font-family: Arial, Helvetica, sans-serif; font-size: 13px; line-height: 23px; height: 70px;"></TEXTAREA> 
```

如果我在空白文本区域内单击，光标将位于正确的位置。

但在这段代码中，我包含样式**背景颜色**：（[http://jsfiddle.net/4e2dL/](http://jsfiddle.net/4e2dL/)）

```
<TEXTAREA style="background-color: white; font-family: Arial, Helvetica, sans-serif; font-size: 13px; line-height: 23px; height: 70px;"></TEXTAREA> 
```

我只添加了一种样式**背景颜色：白色；**. 因此，如果我尝试在文本区域内单击，光标的位置将与第一个代码中不同（略高）。但是如果我开始输入一些文本，光标会移动到正确的位置。

如果我需要使用这种风格，如何避免这种情况？

问题出现在 IE 9 中。Chrome（最新）没问题。

**如果我使用样式background-image: none;**也会导致同样的问题

 **谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:36:04.220

您可以尝试删除 HERE 之间的空格或换行吗

可能是因为这个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:53:11.203

它只是一个 IE9 问题，看起来当您添加背景样式时，它也会覆盖和删除一些其他标准 IE9 样式。

解决方案，您将需要更明确地使用样式以帮助规范影响 textareas 的样式，我已经将一个示例放在一起，其中 textarea 的样式已被 css 样式完全覆盖以带来两者内联：http: [//jsfiddle.net/PXgxU/2/](http://jsfiddle.net/PXgxU/2/)**

# regex - 正则表达式密码要求和可选要求

> ID：12938934
> 
> 赞同：1
> 
> 时间：2012-10-17T16:27:40.330
> 
> 标签：regex, passwords

我在 ASP.NET 项目的密码要求正则表达式方面遇到了一些困难

输出要求如下

*   必须至少为 8 个字符
*   必须具备以下 4 项中的至少 3 项：
    *   至少有 1 个大写字母
    *   至少有 1 个小写字母
    *   至少有 1 个特殊字符
    *   至少有 1 个号码

我正在使用的正则表达式如下（它被转义和编码以在 web.config xml 文件中使用：

```
passwordStrengthRegularExpression="^.*(?=.{8,})(?=.*[a-zA-Z])(?=.*\d)(?=.*[!@#$%^&amp;*()\?\+\,\-\.\/\:\:\;\&lt;\=\&gt;\[\]\\_\`\{\|\}\~\&quot;\']).*$" 
```

我不知道如何允许其中一项要求是可选的。

密码 Reaction7 应该足够了，但是因为没有特殊字符而被拒绝。

任何人都知道我可以做些什么来评估除长度之外的 4 个要求中的 3 个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:37:40.733

不确定我是否喜欢这个解决方案，但如果您仅限于使用单个正则表达式（看起来像这种情况），您可以使用管道或组枚举所有可能性：

```
passwordStrengthRegularExpression="^.*(?=.{8,})((?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&amp;*()\?\+\,\-\.\/\:\:\;\&lt;\=\&gt;\[\]\\_\`\{\|\}\~\&quot;\'])|(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&amp;*()\?\+\,\-\.\/\:\:\;\&lt;\=\&gt;\[\]\\_\`\{\|\}\~\&quot;\'])|(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()\?\+\,\-\.\/\:\:\;\&lt;\=\&gt;\[\]\\_\`\{\|\}\~\&quot;\'])|(?=.*[a-z])(?=.*[A-Z])(?=.*\d)).*$" 
```

它相当长，但确实完成了工作。但是，添加第五个要求会使该字符串的大小爆炸式增长，因此它并不完全是“可扩展的”。

# python - 向用户显示包括货币计算在内的总金额

> ID：12938935
> 
> 赞同：1
> 
> 时间：2012-10-17T16:27:44.983
> 
> 标签：python, math, currency

注意：我已经在使用 decimal.Decimal

当您需要以以下粗略样式输出时，执行计算并向最终用户显示计算的最佳方式是什么：

```
Item - £ 70.10 
Item - £  5.67
Item - £ 10.33

--------------
Total  £ 86.10 
```

我小时候一直被教导数学不要在你的最终答案之前四舍五入，否则你会失去精确度，但在这种情况下，如果你不这样做，看起来我们有计算错误。因为显示背后的计算与用户根据显示给他们的数字所做的不同。

例如：

```
My app will be doing: 70.1034 + 5.6693 + 10.333333333 = 86.1060333 (86.11 2dp)

My end user will be doing as above: 70.10 + 5.67 + 10.33 = 86.10 
```

因此我似乎是不正确的。克服这个问题的最佳方法是什么？（我的意思是一般，但 python 特定的方法也会有所帮助）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:31:38.770

使用该[`decimal`模块](http://docs.python.org/library/decimal.html)来获得正确计算的数学。您可以设置它，以便每个值将自动使用两位小数。

```
>>> decimal.getcontext().prec = 2
>>> decimal.Decimal(1)/decimal.Decimal(3)
Decimal('0.33') 
```

当您使用金钱时，在每个中间计算中丢失精度是正常的。

# c# - 从循环 C# 添加到数组

> ID：12938937
> 
> 赞同：3
> 
> 时间：2012-10-17T16:27:54.000
> 
> 标签：c#, arrays, string, loops, foreach

如何添加到 foreach 循环中的数组。

伪例子

```
String[] mylist;

foreach ( ipadress ip in list )
{
    // I want to add to array ip.ToString();
}
// then put my list to a textbox 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T16:31:57.980

如果您使用的是 linq，请尝试以下操作：

```
String[] mylist = list.Select(I => Convert.ToString(I.ip)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T17:02:53.073

首先，如果这是一个家庭作业问题，它真的应该被标记为这样。

无论如何，假设您完全控制了要向其传递值的 string[]，并假设您的 ipaddress 类已重载 .ToString() 以返回一些智能信息：

```
string[] myList = new string[list.Count];
int i = 0;
foreach (IPAddress ip in list)
{
    myList[i++] = ip.ToString();
} 
```

虽然我不得不质疑你为什么要在数组和列表对象之间来回切换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T16:34:59.643

快速而简短：

```
 String[] myList;

 List<int> intList = new List<int> { 1, 2, 3, 4 };

 myList = intList.ConvertAll<String>(p => p.ToString()).ToArray<String>(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T17:16:45.990

想通了……编程新手……谢谢大家。我使用了 tharindlaksh 发布的相同代码。

这是它的样子：

```
string[] all ;
int i = 0;

foreach (IPAddres ip in host.AddressList)
{
     all[i] = ip.ToString();
     i++;
}

textBoxMain.Text = all[0] + "\n" + all[1] + \n" + all[2] + "\n" + all[3]; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-17T16:36:49.597

```
int i=0;
String[] mylist;
foreach(ipaddress ip in list)
{
mylist[i]=ip.ToString();
i++
} 
```

# c# - 对 IDisposable 的引用调用 dispose()

> ID：12938938
> 
> 赞同：1
> 
> 时间：2012-10-17T16:28:00.580
> 
> 标签：c#, email, attachment, idisposable

我有一些代码可以将附件添加到电子邮件中。我通过类构造函数的`Stream`重载添加它们。`Attachment`执行此操作的代码如下所示：

```
List<UploadedDocument> docs = DataBroker.GetUploadedDocs(Convert.ToInt32(HttpContext.Current.Session["offer_id"].ToString()));
//no need to keep this in session
HttpContext.Current.Session["offer_id"] = null;
int counter = 1;
foreach (UploadedDocument doc in docs)
{
    stream = new MemoryStream(doc.doc);
    attach = new Attachment(stream, "Attachment-" + counter.ToString());
    message.Attachments.Add(attach);              
} 
```

`doc.doc`字节数组在哪里。我想正确处理每个附件和流，但是在发送消息之前我不能这样做，所以我正在考虑将它们添加到 a 中`List<Attachment>`，`List<Stream>`然后遍历并调用 dispose。

像这样的东西：

```
List<Attachment> attachments;
List<Stream> streams;
//...
foreach(UploadedDocument doc in docs)
{
    stream = new MemoryStream(doc.doc);
    streams.Add(stream);
    attach = new Attachment(stream,"Name");
    attachments.Add(attach);
    message.Attachments.Add(attach);
}
//other processing
emailClient.Send(message);

if(attachments != null)
{
    foreach(Attachment attachment in attachments)
    {
        attachment.Dispose();
    }
}
if(streams != null)
{
    foreach(MemoryStream myStream in streams)
    {
        myStream.Dispose();
    }
} 
```

但是有些事情告诉我，如果仍然有一个参考漂浮在周围，没有得到垃圾收集或其他东西，那么它们就不会正确处理。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:32:35.123

处理此问题的最简单方法是仅调用`Dispose()`.`MailMessage`

`MailMessage.Dispose`将自动处理所有附件，这反过来将关闭/`Dispose()`所有底层流。

```
//other processing
emailClient.Send(message);
message.Dispose();  // Or just wrap this entire block in a using statement 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:33:02.960

这已经由[MailMessage.Dispose](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.dispose.aspx)方法实现：

```
protected virtual void Dispose(bool disposing)
{
    if (disposing && !this.disposed)
    {
        this.disposed = true;
        if (this.views != null)
        {
            this.views.Dispose();
        }
        if (this.attachments != null)
        {
            this.attachments.Dispose();
        }
        if (this.bodyView != null)
        {
            this.bodyView.Dispose();
        }
    }
} 
```

只需将 MailMessage 的使用情况包装到`using`语句中，MailMessage 使用的所有资源将在您离开`using`块后释放：

```
using(var message = new MailMessage(from, to))
{
   foreach (UploadedDocument doc in docs)
   {
       stream = new MemoryStream(doc.doc);
       attach = new Attachment(stream, "Attachment-" + counter.ToString());
       message.Attachments.Add(attach);              
   }

   emailClient.Send(message);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:42:01.717

已经有正确方式的回复（MailMessage.Dispose），所以“如果仍有参考，请正确处理它们......”：

Dispose 将（也预期）在调用时释放资源，而不管谁引用了该对象。一种常见的方法是在实现 Dispose 的对象中也有内部标志，该标志将通过抛出“Object Disposed”异常来阻止任何进一步的调用。

如果您在使用完流之前处理流，您可以（并且可能已经这样做）观察到这种行为。即在您的邮件案例中，您可能会尝试立即处理流，之后很可能会在稍后的通话`message.Attachments.Add(attach);`期间导致“流处理”异常。`Send`

请注意，有些对象（如 MemoryStream）在 Dispose 之后具有特殊定义的行为。即 MemoryStream 阻止除 ToArray/Lenght/GetBuffer 之外的所有调用，因为此类的主要目的之一是为您提供流的结果字节数组。作为副作用`MemoryStream`的`Dispose`本质上只是设置标志来阻止其他调用（这很好，因为这个类没有任何本机资源）。

# c# - 高效的插入语句

> ID：12938940
> 
> 赞同：0
> 
> 时间：2012-10-17T16:28:14.823
> 
> 标签：c#, sql, sql-server

我正在为我的 C#/MVC 应用程序寻找一种将记录插入 SQL 服务器的有效方法。有谁知道最好的方法是什么？

通常我只是在其中完成了一个while循环和插入语句，但是我又没有太多的记录要处理。我需要插入大约 50 万行，并且使用 while 循环以每分钟 300 行的速度插入，我会在这里一整天！

我正在做的是遍历一个大的保存表，并使用它的行在不同的表中创建记录。我已经为新表所必需的查找数据设置了一些函数，这无疑会增加工作量。

所以这是我的查询。对于大量数据来说效率极低！

```
Declare @HoldingID int
Set @HoldingID = (Select min(HoldingID) From HoldingTable)

While @JourneyHoldingID IS NOT NULL
Begin
    Insert Into Journeys (DepartureID, ArrivalID, ProviderID, JourneyNumber, Active)
    Select 
        dbo.GetHubIDFromName(StartHubName), 
        dbo.GetHubIDFromName(EndHubName), 
        dbo.GetBusIDFromName(CompanyName), 
        JourneyNo, 1
    From Holding
    Where HoldingID = @HoldingID

    Set @HoldingID = (Select MIN(HoldingID) From Holding Where HoldingID > @HoldingID)
End 
```

我听说过基于集合的方法——有什么方法可以解决上述问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:32:49.927

如果你想在 MSSQL Server 中插入大量数据，那么你应该使用[BULK INSERTs](http://msdn.microsoft.com/en-us/library/ms188365.aspx) - 为此有一个名为[bcp 实用程序](http://msdn.microsoft.com/en-us/library/ms162802.aspx)的命令行工具，还有一个用于执行[Bulk Copy Operations](http://msdn.microsoft.com/en-us/library/7ek5da1a.aspx)的 C# 包装器，但在幕后它们是全部使用`BULK INSERT`.

根据您的应用程序，您可能希望首先将数据插入临时表，然后将[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)这些`INSERT INTO SELECT...`行从临时表传输到目标表 - 如果您有大量数据，那么这将需要一些时间，但是会比单独执行插入*要*快得多。

如果您想加快速度，那么[您可以执行各种操作，](http://msdn.microsoft.com/en-us/library/ms190421%28v=sql.105%29.aspx)例如更改恢复模型或调整/删除触发器和索引（取决于这是否是实时数据库）。如果它仍然很慢，那么您应该考虑分批执行此过程（例如，一次 1000 行）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T17:03:01.217

这应该正是您现在正在做的事情。

```
Insert Into Journeys(DepartureID, ArrivalID, ProviderID, JourneyNumber, Active)
Select 
    dbo.GetHubIDFromName(StartHubName), 
    dbo.GetHubIDFromName(EndHubName), 
    dbo.GetBusIDFromName(CompanyName), 
    JourneyNo, 1
From Holding
ORDER BY HoldingID ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:40:21.017

you (probably) are able to do it in one statement of the form

```
INSERT INTO JOURNEYS
SELECT * FROM HOLDING; 
```

Without more information about your schema it is difficult to be absolutely sure.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:19:34.637

SQLServer 2008 引入了表参数。这些允许您在一次访问数据库中插入多行（将其作为大 blob 发送）。不使用临时表。本文描述了它是如何工作的（文章中的第四步）

[http://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/](http://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/)

它与批量插入的不同之处在于您不需要特殊的实用程序并且检查所有约束和外键。

使用它并并行化插入，我的吞吐量增加了四倍。现在在同一个表中以 15.000 次插入/秒的速度持续。具有索引和超过十亿行的常规表。

# iphone - iPhone 中的运营商计费

> ID：12938941
> 
> 赞同：3
> 
> 时间：2012-10-17T16:28:24.353
> 
> 标签：iphone

我正在尝试为我的 iPhone 应用程序实施运营商计费支付模式，但找不到太多参考资料。任何工作相同的人都可以将我重定向到任何运营商计费提供商或任何对我有帮助的库/SDK吗？

提前致谢， 瓦苏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:45:43.620

您不能在用于 AppStore 的 iPhone 应用程序中进行运营商计费。这违反了指导方针

[应用商店指南](https://developer.apple.com/appstore/resources/approval/guidelines.html#purchasing-currencies)

> 使用应用内购买 API (IAP) 以外的系统购买应用中的内容、功能或服务的应用将被拒绝

# nginx - Nginx 从 URL 中删除一个 get 参数

> ID：12938950
> 
> 赞同：1
> 
> 时间：2012-10-17T16:29:09.617
> 
> 标签：nginx

在 NGINX 中，我如何重定向包含 ?SID=(insert long string of numbers/letters) 的任何 URL

到一个完全相同但没有此查询的干净 URL？其他获取查询必须保持不变。

此外，如果 URL 也不包含“/sgps/”，我只想执行此重定向

有接盘侠吗？

# linq - 使用 linq 查询文本块？

> ID：12938958
> 
> 赞同：1
> 
> 时间：2012-10-17T16:29:42.223
> 
> 标签：linq, text

我有一个文本文件，其中包含一些“块”格式的数据：

```
source : source location
filename : somefile.txt
vendor : somevendor
version : xx.xx.xxx

source : source location2
filename : somefile2.txt
vendor : somevendor2
version : yy.yy.yyy 
```

我可以使用 Linq 查询这些数据吗？如果可以，你会怎么做？我已经多次使用 linq 从文本文件中查询数据行，但从来没有像上面那样查询数据“块”。感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:39:43.310

是的，您可以使用 LINQ，如果您有大文件，这种方法不会优化太多。下面是获取数据的方法：

```
var lines = File.ReadLines("C:\\text.txt")
                .Where(line => !string.IsNullOrWhiteSpace(line))
                .ToList();

for (int i = 0; i < lines.Count; i += 4)
{
    var location = lines[i].Split(':')[1];
    var fileName = lines[i + 1].Split(':')[1];
    var vendor = lines[i + 2].Split(':')[1];
    var version = lines[i + 3].Split(':')[1];
} 
```

使用 LINQ 的版本：

```
var result = Enumerable.Range(0, lines.Count()/4).Select(i => new {
        location = lines[4*i].Split(':')[1];
        fileName = lines[4*i + 1].Split(':')[1];
        vendor = lines[4*i + 2].Split(':')[1];
        version = lines[4*i + 3].Split(':')[1];
    }); 
```

# objective-c - 到达文档目录时，空数组的索引 0 超出范围

> ID：12938962
> 
> 赞同：0
> 
> 时间：2012-10-17T16:29:55.530
> 
> 标签：objective-c, ios, cocoa-touch, nsarray, ios6

我使用以下代码进入文档目录。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

为什么我的应用程序会因以下消息而崩溃？

```
*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array 
```

我看不出我的`NSArray`（不可变数组）如何为空。该函数应该以数组的形式返回文档文件夹。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:35:49.243

1）你确定崩溃在那里吗？

2）不完全相关，但可以[提供帮助](https://stackoverflow.com/questions/6515979/nssearchpathfordirectoriesindomains-returns-the-wrong-directory)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T13:13:41.757

尝试`NSHomeDirectory()`改用...这是获取应用程序主目录的更好方法。

注意：如果您在文档目录之后，那么您可能需要附加`@"Documents/"`到字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:33:59.367

由返回的数组中`NSSearchPathForDirectoriesInDomains`包含零个元素。它是空的。正是错误消息所说的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T13:02:46.173

不回答*为什么*，而是从 Xcode 5 开始：

```
NSString *documentsDirectory = [paths firstObject]; 
```

如果它是空的，它不会引发异常，它会返回 nil。没有崩溃。

# javascript - 这个jquery代码是做什么的？

> ID：12938963
> 
> 赞同：1
> 
> 时间：2012-10-17T16:29:57.167
> 
> 标签：javascript, jquery

```
$('[role="button"]').click(function () {
            myMethod();
        }); 
```

我知道点击它调用的东西`myMethod()`，但是点击什么？

是什么`role`意思？

是这个按钮吗？

```
<input type="button" ... /> 
```

什么是：`[role="button"]`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T16:31:02.517

它是一个[属性等于](http://api.jquery.com/attribute-equals-selector/)选择器。`$('[role="button"]')`将选择所有属性`role`设置为`button`.

**例如：**
当你这样做时，将选择以下三个`$('[role="button"]')`

```
<div role="button" ></div>
<p role="button" ></p>
<button role="button"></button> 
```

但这不会

```
<input type="button"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:31:29.137

具有属性角色的选择器，其值为按钮

```
$('[role="button"]')  ; // It is not the button in context 
```

//

```
<input role="button" ... />  // this is selected
    <input type="button" ... />  // Not this
    <input role="button" ... />  // this is selected 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:30:52.953

选择器正在选择`role`等于 的属性`button`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T16:31:37.400

这是属性等于选择器

*   [http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

# java - 用每个元素之间的空格数分割行

> ID：12938964
> 
> 赞同：0
> 
> 时间：2012-10-17T16:30:04.250
> 
> 标签：java, string, split

我想读取每一行并将其拆分为一个字符串数组，每行在每个元素之间具有不同数量的空白字符。

如何使用“”（空格）作为参数将`split`行拆分为数组元素？

这是我要处理的文件类型的示例：

```
1   Build-walls     4 2       5       0
2   Build-roofs     6 4       0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:30:54.663

您可以使用量词`(+)`在正则表达式中指定一个或多个空格的拆分：-

```
String str = "1   Build-walls     4 2       5       0";

String[] tokens = str.split("\\s+"); 
```

这将用一个或多个空格分割你的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T16:31:24.683

使用简单的正则表达式：

```
"1   Build-walls     4 2       5       0".split("\\s+") 
```

`"\\s+"`意思是“*至少一个空格*”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:34:10.487

```
 String [] words = lineString.split("\\s+"); 
```

# git - ^{} 在 git 中是什么意思？

> ID：12938972
> 
> 赞同：67
> 
> 时间：2012-10-17T16:30:27.260
> 
> 标签：git

我在 git ls-remote 命令的末尾偶然发现了两个奇怪的字符，我想知道这是什么意思？

```
0e4c39557ccb6789173c  refs/tags/2011-11-04
966f8df553f18c486820  refs/tags/2011-11-04^{} 
```

你碰巧知道这个 ^{} 是什么意思吗？另外，为什么这个 git 标签似乎重复了？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-17T16:44:58.940

该`^{}`符号在[`gitrevisions`](http://www.kernel.org/pub/software/scm/git/docs/gitrevisions.html)手册中进行了解释：

```
<rev>^{}, e.g. v0.99.8^{} 
```

> 后缀 ^ 后跟一个空大括号对意味着该对象可以是一个标签，并递归地取消引用该标签，直到找到一个非标签对象。

在这种情况下 -`refs/tags/2011-11-04`是指向标签对象的标签`0e4c39557ccb6789173c`。通过这样做`refs/tags/2011-11-04^{}`，我们可以将标签取消引用到最终的非标签对象，在这种情况下是 - `966f8df553f18c486820`（提交）。请注意，`^{}`当应用于非标记对象时，这是一个 noop。

该`git show-ref`命令可用于查看标签以及最终取消引用的非标签对象：

```
$ git show-ref --tags
3521017556c5de4159da4615a39fa4d5d2c279b5 refs/tags/v0.99.9c
423325a2d24638ddcc82ce47be5e40be550f4507 refs/tags/v1.0rc4^{}

$ git show-ref --tags --dereference
3521017556c5de4159da4615a39fa4d5d2c279b5 refs/tags/v0.99.9c
6ddc0964034342519a87fe013781abf31c6db6ad refs/tags/v0.99.9c^{}
055e4ae3ae6eb344cbabf2a5256a49ea66040131 refs/tags/v1.0rc4
423325a2d24638ddcc82ce47be5e40be550f4507 refs/tags/v1.0rc4^{} 
```

从[`git show-ref`](http://www.kernel.org/pub/software/scm/git/docs/git-show-ref.html)手册：

```
-d 
--dereference 
```

> 也将标签取消引用到对象 ID。它们将显示为附加“^{}”。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-05T08:23:13.193

请注意，[`git ls-remote`](https://github.com/git/git/blob/bd6934af9bb8c4b86026d6aeb3a9c85d32ae1790/Documentation/git-ls-remote.txt)带有 git 2.8（2016 年 3 月）的新过滤器。

请参阅[Thomas Gummerer (](https://github.com/tgummerer) [)的](https://github.com/tgummerer)[提交 99c08d4](https://github.com/git/git/commit/99c08d4eb28f0525d71125e7903fd4462bfd6787)、[提交 ba5f28b](https://github.com/git/git/commit/ba5f28bf79ea652fbe2be12f5ca6b351bb6ad591)、[提交 80b17e5](https://github.com/git/git/commit/80b17e5831aab10eed0519c39c132820a61181fd)、[提交 40a8852](https://github.com/git/git/commit/40a88529080295dd9a4218e1a72d1e8143ee4f7b)、[提交 54813bd](https://github.com/git/git/commit/54813bdd2ca9172fa21b1535ce0d566efd69c496)（2016 年 1 月 18 日） 。 推荐人：[pedro rijo (](https://github.com/pedrorijo91) [)](https://github.com/pedrorijo91)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 bd6934a](https://github.com/git/git/commit/bd6934af9bb8c4b86026d6aeb3a9c85d32ae1790))^(中，2016 年 2 月 3 日）)[`tgummerer`](https://github.com/tgummerer)
[`pedrorijo91`](https://github.com/pedrorijo91)
^([`gitster`](https://github.com/gitster))

这意味着您只能显示带有的标签

```
git ls-remote --refs 
```

> 不要在输出中显示剥离的标签或像 HEAD 这样的伪引用。

# sql - Oracle 8i 中的四表连接

> ID：12938973
> 
> 赞同：3
> 
> 时间：2012-10-17T16:30:35.003
> 
> 标签：sql, oracle, join

我想加入 Oracle 8i 中的四个表。这四个表名是 users、picks、putaways 和 relocates。四个表中的每一个都有一个 user_id 字段。挑选、存放和搬迁如下所示：

```
| USER_ID | PICKS | PICK_VOLUME |
+---------+-------+-------------+

| SMITH12 | 234   | 2431.12     | 
```

putaways 和 relocates 表看起来相同，除了 'PICKS' 和 'PICK_VOLUME' 分别被 putaways 和 relocates 替换。

我想要进行左连接的表是 users 表，因为它将包含所有 user_id，无论他们是否只选择库存并且没有重新定位，或者将其中任何一个都收起来。换句话说，即使某些用户只有重新定位，而不是选择、存放和重新定位，或者它们的任何组合，我也希望查看所有记录。

用户表如下所示：

```
| USER_ID | SHIFT | GROUP_ID   |
+---------+-------+------------+

| SMITH12 | NIGHT | STOCK_KEEP | 
```

因此，理想情况下，我希望将这三列放在结果集的左侧，将picks、putaways 和relocates 表连接到右侧。最终选择结果应如下所示：

```
| USER_ID | SHIFT | GROUP_ID   | PICKS | PICK_VOL | RELOCATES | RELOCATE_VOL | PUTAWAYS | PUTAWAY_VOL |
+---------+-------+------------+-------+----------+-----------+--------------+----------+-------------+

| SMITH12 | NIGHT | STOCK_KEEP | 234   | 2431.12  | NULL      |  NULL        |  4       |   76.52     | 
```

我试过这个 SQL 查询：

```
select users.user_id, users.group_id, users.shift, pi."Picks", pi."Pick Volume", pu."Putaways", pu."Putaway Volume", re."Relocates", re."Relocate Volume"
from users, pi, pu, re
where users.user_id = pi.user_id
and users.user_id = pu.user_id
and users.user_id = re.user_id; 
```

但它只返回用户在pick、relocates 和putaways 表中至少有一个事务的行。这是意料之中的，因为我正在做一个香草加入。我假设我需要某种左连接，但我不确定如何在 Oracle 8i 中编写它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:32:46.633

使用 (+) 运算符：

```
select users.user_id, users.group_id, users.shift, pi."Picks", pi."Pick Volume", pu."Putaways", pu."Putaway Volume", re."Relocates", re."Relocate Volume"
from users, pi, pu, re
where users.user_id = pi.user_id(+)
and users.user_id = pu.user_id(+)
and users.user_id = re.user_id(+); 
```

[http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries006.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries006.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:42:12.073

您可以使用“左外连接”：

```
 select users.user_id
                 , users.group_id
                 , users.shift
                 , pi."Picks"
                 , pi."Pick Volume"
                 , pu."Putaways"
                 , pu."Putaway Volume"
                 , re."Relocates" 
                 , re."Relocate Volume"
            from users
            LEFT OUTER JOIN pi
              ON users.user_id = pi.user_id
            LEFT OUTER JOIN pu
              ON users.user_id = pu.user_id
            LEFT OUTER JOIN re
              ON users.user_id = pi.user_id
            ; 
```

# ruby-on-rails-3 - 从资产中排除文件：在 Rails 中预编译

> ID：12938995
> 
> 赞同：12
> 
> 时间：2012-10-17T16:31:36.680
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, less, asset-pipeline, precompile

我使用 codekit 来编写 less，然后它会自动转换为 css。

我不希望 rails 将我的 less 文件转换为 css，我宁愿使用 codekit 来做。

如果我通过预编译资产

```
rake assets:precompile 
```

我明白了

```
rake aborted!
cannot load such file -- less 
```

如何从预编译中**排除**特定的文件夹/文件类型？（我所有的 less 文件都在 app/assets/stylesheets/less 中，而 css（我确实希望被预编译）在 app/assets/stylesheets/css

**更新**

删除`application.less`解决了这个问题，但我如何首先将其排除在处理之外？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T17:15:40.450

来自[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)指南：

> 编译文件的默认匹配器包括 application.js、application.css 和所有非 JS/CSS 文件（即 .coffee 和 .scss 文件在编译为 JS/CSS 时不会自动包含在内）：

```
[ Proc.new{ |path| !File.extname(path).in?(['.js', '.css']) }, /application.(css|js)$/ ] 
```

> 如果您有其他清单或单独的样式表和 JavaScript 文件要包含，您可以将它们添加到预编译数组中：

```
config.assets.precompile += ['admin.js', 'admin.css', 'swfObject.js'] 
```

所以，我会说你的解决方案是修改`config.assets.precompile`以排除`.less`文件。也许是这样的（在合适的环境文件中，比如`config/environments/production.rb`）：

```
config.assets.precompile = [ Proc.new{ |path| !File.extname(path).in?(['.js', '.css', '.less']) }, /application.(css|js)$/ ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:47:39.477

如果你的 app/assets 文件夹下的目录结构是这样的：

```
application.css
/css
 (generated by code kit)
 |...home.css
 |...index.css
/less
 |...home.less (assuming this is the extension)
 |...index.less 
```

然后，在您的 application.css 文件中，必须有一个指令，`*= require_tree .`它告诉 rails 扫描所有文件/目录并尝试将所有文​​件编译成一个 css 文件。

将此更改为`*= require_directory ./css`，它将加载目录下的`css`文件进行编译。

# ruby - 使用 mechanize-ruby 提交登录表单时，我可以使用变量来表示字段名称吗？

> ID：12938998
> 
> 赞同：2
> 
> 时间：2012-10-17T16:31:44.560
> 
> 标签：ruby, forms, mechanize-ruby

我在使用 Mechanize 提交登录表单时遇到了问题。例如，如果我需要登录到 bitbucket：

```
a = Mechanize.new
a.get('https://bitbucket.org/') do |page|
  login_page = a.click(page.link_with(text: 'Log In'))

  my_page = login_page.form_with(action: '/account/signin/') do |f|
    # The "username" and "password" below are the values of the "name" attribute of the two login form fields
    f.username = 'MY_ACCOUNT_NAME' 
    f.password = 'MY_PASSWORD' 
  end.click_button
end 
```

这很简单，但是，并非所有登录表单在这两个字段上都具有相同的“名称”值。例如，WordPress 的登录表单使用 "log" 和 "pwd" 。这将使上述代码无效。

我想将一些参数传递给这个方法，以便它可以用于不同的登录表单。我试图遵循“[如何从字符串转换为对象属性名称？](https://stackoverflow.com/questions/903763/how-to-convert-from-a-string-to-object-attribute-name) ”但没有成功：

```
# auth_info is a hash
def website_login(auth_info) 
  a = Mechanize.new
  a.get(auth_info[:login_page_url]) do |page|
    land_page = page.form_with(action: auth_info[:login_form_action]) do |f|
      # Now I am stuck with these two lines
      ????????
      ????????
      # I tried to do it like this. Not working.
      f.instance_variable_set('@'+auth_info[:username_field_name], auth_info[:username])
      f.instance_variable_set('@'+auth_info[:password_field_name], auth_info[:password])
    end.click_button
  end
end 
```

如果有人可以提供帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:35:18.033

解决。就像这样：

```
f.send(auth_info[:username_field_name] + '=', auth_info[:username])
f.send(auth_info[:password_field_name] + '=', auth_info[:password]) 
```