# StackOverflow 问答 15506000-15506999

# jquery-mobile - ember-1.0.0-rc.1 + jquery.mobile-1.3.0.min.css [HowTo required]

> ID：15506010
> 
> 赞同：1
> 
> 时间：2013-03-19T17:07:13.723
> 
> 标签：jquery-mobile, ember.js, handlebars.js

如何在最近的 ember 应用程序中包含 jquery.mobile-style？howto 和 jsFiddle 会很棒。

就我而言，我想为链接列表设置样式==>按钮

```
{#each entry in controller}}
      <li>              
          <div>              
              {{view "App.EntryView" contentBinding="entry"}}

              {{#linkTo "entries.entry" line}}
                {{entry.name}}
              {{/linkTo}}
          </div>          
      </li>
      {{else}}
      <li>Loading...</li>
    {{/each}} 
```

我在已弃用的版本中发现了两个示例，这是可能的。

[来自 LuisSala 的样品](https://github.com/LuisSala/emberjs-jqm/blob/master/index.html)

[托马斯·博罗夫斯基](https://coderwall.com/p/ylogzg)

我在这里找到了一个快速的[stackoverflow](https://stackoverflow.com/questions/9857247/can-i-use-jquery-mobile-with-emberjs)提示。

我用最新版本尝试了 LuisSalas 示例：

```
<script src="js/lib/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="js/lib/jquery.mobile-1.3.0.min.js" type="text/javascript"></script>

<script src="js/lib/handlebars.1.0.0-rc.3.js" type="text/javascript"></script>

<script src="js/lib/ember-1.0.0-rc.1.js" type="text/javascript"></script>

<link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" /> 
```

不幸的是，页面保持白色。在包含 jquery.mobile-1.3.0.min.js 之后，使用我自己的应用程序得到相同的结果

帮助会很棒！^Thx~ 提前。

# java - 使用 addMergedRegion 时出现 Apache POI 错误

> ID：15506016
> 
> 赞同：2
> 
> 时间：2013-03-19T17:07:34.140
> 
> 标签：java, excel, apache-poi

使用 addMergedRegion 时出现 Excel 错误。这是我的代码：

```
journalEntrySheet.addMergedRegion(new CellRangeAddress(1, 1, 0, 6)); 
```

我在 Excel 中遇到的错误说下载的文件有“不可读的内容”，并询问我是否要恢复内容。我点击是。

Excel 然后打开文件，一个窗口说它修复或删除了错误，然后它说：

```
Removed Records: Merge cells from /xl/worksheets/sheet2.xml part
Removed Records: Merge cells from /xl/worksheets/sheet3.xml part 
```

等等。有很多床单。

我检查了我想要合并的单元格的表格，它完全按照我想要的方式合并。

那么为什么 Excel 会给我这个错误，我该如何解决呢？谢谢。

# html - 仅当 2 个类共存时才匹配的 CSS 规则

> ID：15506021
> 
> 赞同：0
> 
> 时间：2013-03-19T17:07:53.750
> 
> 标签：html, css

我正在寻找仅在有 2 个班级时才会发生的事情。

例如：

```
.positive{
  color:#46a546;
}
.positive:after{
  content: "\25b2";
}
.negative{
    color:#F00;
}

.arrow:after{
  content: "\25bc";
}

<span class="positive"> hi </span>
<span class="positiveArrow"> hi </span> 
<span class="negativeArrow"> hi </span> //what i have

<span class="positive arrow"> hi </span>
<span class="negative arrow"> hi </span> // what i want 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:11:02.273

CSS：

```
.negative.arrow {
    /* Apply your CSS rules here */
}

.positive.arrow {
    /* Apply your CSS rules here */
} 
```

# maven - Apache Maven 项目中的 GitHub 依赖项

> ID：15506022
> 
> 赞同：5
> 
> 时间：2013-03-19T17:07:58.653
> 
> 标签：maven

我在 github.com 上有一个 Maven 项目：

```
<project ...>
  ...
  <groupId>com.example</groupId>
  <artifactId>my-github-library</artifactId>
  <packaging>jar</packaging>
  <version>1.0.0</version>
  ...
</project> 
```

现在我想将 my-github-library 作为依赖项添加到另一个 my-local-application 项目：

```
<project ...>
  ...
  <groupId>com.example</groupId>
  <artifactId>my-local-application</artifactId>
  <packaging>jar</packaging>
  <version>1.0.0</version>
  ...
  <dependencies>
    ...
    <dependency>
      <groupId>com.example</groupId>
      <artifactId>my-github-library</artifactId>
      <version>1.0.0</version>
    </dependency>
    ...
  </dependencies>
  ...
</project> 
```

这当然行不通，因为 GitHub 不是 Maven 存储库。

**如何向项目 pom 文件添加额外的 Maven 存储库？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:34:50.817

[您可以向Sonatype OSS 团队](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)请求开源托管您的 Github 项目的工件。然后你必须设置你的项目以便能够部署到他们的存储库（`<distributionManagement/>`在你的`pom.xml`和`<servers/>`你的中使用`settings.xml`）。一旦您部署了您所依赖的工件，您可以通过 a 使您的其他项目依赖它，并在您的部分中`<dependency/>`定义 a指向您在 Sonatype 的存储库。`<repository>``<repositories/>`

# ios - 将 UIWebView 屏蔽为按钮以显示应用商店中允许的“在日历中显示”操作表？

> ID：15506024
> 
> 赞同：0
> 
> 时间：2013-03-19T17:08:03.127
> 
> 标签：ios, uiwebview, eventkit

我需要跳转到 iOS 日历并显示特定日期。我通读了文档，没有日历应用程序的架构 url，但我可以找到一个将日期嵌入 UIWebView 的 hack（我让它看起来像一个按钮）。这使得操作表在触摸时显示选项“创建事件”和“在日历中显示”。它工作得很好，但我不确定在本机应用程序中这样做是否安全。有向应用商店提交类似代码的经验吗？

# java - 使用默认布局将 JPanel 添加到 JFrame

> ID：15506029
> 
> 赞同：2
> 
> 时间：2013-03-19T17:08:19.430
> 
> 标签：java, swing, layout, layout-manager, border-layout

很快你就可以阅读我的代码并看到我把它作为图片的输出

```
/*
 * Suppose I have 4 buttons vertically on the right hand side in First PAnel
 * and 4 buttons on bottom horizantally in second Panel
 * and 4 text fiedls in the center in 4 rows in third Panel
 * Using Frame's default border 
 */
       JPanel p1= new JPanel();
        for (int i = 0; i < right.length; i++) {
            right[i]=new JButton("right "+(i+1));
            p1.add(right[i]);
        }
        JPanel p2 = new JPanel();
        for (int i = 0; i < down.length; i++) {
            down[i] = new JButton("Down "+(i+1));
            p2.add(down[i]);
        }

        JPanel p3=new JPanel();
        for(int i = 0 ; i<text.length;i++){
            text[i]=new JTextField(30);
            p3.add(text[i]);
        }
        Container c =getContentPane();
        c.add(p1,"East");
        c.add(p2,"South");
        c.add(p3,"Center");
        setSize(300,400);
        setVisible(true);
        setDefaultCloseOperation(3); 
```

输出 ： ![在此处输入图像描述](../Images/f97211629a6266859ef3aa3d4bd5afd8.png)

我想变成这样 ![在此处输入图像描述](../Images/d0b5639d8b1d17059361601eb77e599c.png)

注意第二个输出我使用了 Null 布局和 setBounds 方法

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:21:50.060

首先，您应该**始终**使用一个或多个布局管理器。

标签和字段将通过 GridBagLayout 添加到 JPanel。

第一个、上一个、下一个和最后一个按钮将添加到具有 BoxLayout LINE_AXIS 的 JPanel。按钮应该按照我给出的顺序，第一个，上一个，下一个和最后一个。这是用户习惯的。

添加、清除、编辑、保存和删除按钮将被添加到具有 BoxLayout、PAGE_AXIS 的 JPanel。首先应该是编辑和保存按钮，然后是添加、清除和删除按钮。我会在保存和添加按钮之间以及清除和删除按钮之间放置一些空间，以便在视觉上分离功能并最大限度地减少意外单击删除按钮。我还会在删除按钮上放置一个“你确定”对话框。

退出按钮将被添加到带有 FlowLayout 的 JPanel。

四个 JPanel 将被添加到具有 GridBagLayout 的主 JPanel。

主 JPanel 将被添加到 JFrame。

编辑添加：这是我将四个 JPanel 添加到主 JPanel 的代码。

```
protected static final Insets spaceInsets = new Insets(10, 10, 4, 10);

protected JPanel panel;

protected JPanel formPanel;
protected JPanel nextPanel;
protected JPanel editPanel;
protected JPanel exitPanel;

protected void createPartControl() {
    panel = new JPanel();
    panel.setLayout(new GridBagLayout());

    int gridy = 0;
    gridy = createPanelLayout(gridy);
}

protected int createPanelLayout(int gridy) {
    addComponent(panel, formPanel, 0, gridy, 1, 1, spaceInsets,
            GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

    addComponent(panel, editPanel, 1, gridy++, 1, 1, spaceInsets,
            GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

    addComponent(panel, nextPanel, 0, gridy, 1, 1, spaceInsets,
            GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

    addComponent(panel, exitPanel, 1, gridy++, 1, 1, spaceInsets,
            GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

    return gridy;
}

protected void addComponent(Container container, Component component,
        int gridx, int gridy, int gridwidth, int gridheight, 
        Insets insets, int anchor, int fill) {
    GridBagConstraints gbc = new GridBagConstraints(gridx, gridy,
            gridwidth, gridheight, 1.0D, 1.0D, anchor, fill, insets, 0, 0);
    container.add(component, gbc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:15:10.647

为右侧和底部的按钮创建面板 - 为它们使用[FlowLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)。为标签和文本字段创建另一个面板并使用[GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)或[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)。

# selenium - Selenium WebDriverJs 命令

> ID：15506037
> 
> 赞同：10
> 
> 时间：2013-03-19T17:08:44.233
> 
> 标签：selenium, webdriver, selenium-webdriver

我第一次运行 Node.js + Mocha + Selenium Webdriverjs 的组合。我根据这里的文档设置了所有内容[https://code.google.com/p/selenium/wiki/WebDriverJs](https://code.google.com/p/selenium/wiki/WebDriverJs)，但我发现实际上很难找到通过网络驱动程序可用的所有命令的列表。在使用 Selenium webdriverjs 编写测试时，是否有可用的命令列表？

例如，我将如何使用 Javascript 实现以下 java 代码

```
new Wait("Couldn't find close button!") {
  boolean until() {
    return selenium.isElementPresent("button_Close");
  }
}; 
```

我知道我可以使用`driver.wait`，但它无法识别`until`命令或`isElementPresent`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T05:36:05.103

我在这里直接查看文档的源文件。其实还不错：

[https://code.google.com/p/selenium/source/browse/javascript/webdriver/webdriver.js](https://code.google.com/p/selenium/source/browse/javascript/webdriver/webdriver.js)

在回答你的问题时，你真的不想在 WebDriverJS 中等待，你想习惯延迟对象和承诺 api。我刚刚在这里写了一篇关于它的博客文章，应该可以帮助你：

[http://xolv.io/blog/2013/04/end-to-end-testing-for-web-apps-meteor](http://xolv.io/blog/2013/04/end-to-end-testing-for-web-apps-meteor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T22:19:58.483

我也在查看源代码。他们有一个 API 文档的编译版本，在这里更容易浏览：

[http://selenium.googlecode.com/git/docs/api/javascript/module_selenium-webdriver.html](http://selenium.googlecode.com/git/docs/api/javascript/module_selenium-webdriver.html)

不幸的是，没有仅包含方法名称的摘要。您仍然需要滚动页面。

关于如何等待：

```
webdriver = require 'selenium-webdriver'
driver = ... // init your driver

driver.wait(webdriver.until...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-31T18:50:42.670

@op，最好使用链式语句。我使用 until 和 isElementPresent 命令，它们适用于生产就绪 (CI/CD) 训练流程。因此调整你的代码应该可以工作

```
var isDisplayed = function(){
        driver.isElementPresent(by.id('button id')).then(function(isDisplayed){
            expect(isDisplayed).to.be.true
        });
    }; 
```

# php - 一起使用时最大限度地发挥 php 和 MySQL 的特性

> ID：15506040
> 
> 赞同：2
> 
> 时间：2013-03-19T17:08:54.970
> 
> 标签：php, mysql

我们坚持使用臭名昭著的 php 和 MySQL 组合（出于各种原因），并试图生成尽可能遵循最佳实践的应用程序。

不幸的是，尽管尝试遵守[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则，但我们注意到 MySQL 存在局限性，这意味着我们最终将 php 用于某些 RDBMS 功能（例如，MySQL 不支持 CHECK，因此我们必须使用 php 进行验证）同时，我们使用 php 也有缺点，这意味着我们使用 MySQL 来做一些在 php 中不可行的事情（严格的数据类型、分层数据结构、关系等）。结果，尽管试图保持代码干净和松耦合，php + MySQL 的缺点不可避免地意味着 SQL 以紧耦合的方式潜入 php 代码。

有没有人有任何关于如何克服您遇到的限制的示例，或者以类似方式将两者混合在一起的其他应用程序的示例？

# java - 在 Eclipse 中创建一个 Maven 项目抱怨“无法解析原型”

> ID：15506043
> 
> 赞同：73
> 
> 时间：2013-03-19T17:09:05.250
> 
> 标签：java, eclipse, maven

我完全是Maven的新手。我想用原型为“webapp”的 Eclipse Juno EE 创建一个 Maven 项目。我安装了“Maven Integration for Eclipse WTP（孵化）”，我还安装了“Maven Integration for Eclipse”（在 Eclipse Marketplace 的已安装选项卡上找到它）。当我尝试从**File->New_>Maven Project**创建新项目时，出现错误：

```
无法从任何已配置的存储库解析原型 org.apache.maven.archetypes:maven-archetype-webapp:RELEASE。
无法解析工件 org.apache.maven.archetypes:maven-archetype-webapp:pom:RELEASE
无法解析 org.apache.maven.archetypes:maven-archetype-webapp:pom:RELEASE 的版本：在本地找不到元数据 org.apache.maven.archetypes:maven-archetype-webapp/maven-metadata.xml (C :\Documents and Settings\PEP35KD\.m2\repository)
无法解析 org.apache.maven.archetypes:maven-archetype-webapp:pom:RELEASE 的版本：在本地找不到元数据 org.apache.maven.archetypes:maven-archetype-webapp/maven-metadata.xml (C :\Documents and Settings\PEP35KD\.m2\repository)

```

它发生在各种原型上。我正在使用代理，并在 C:\Documents and Settings\PEP35KD.m2\ 下创建文件 settings.xml，内容如下：

```
<proxies>
    <proxy>
        <id>myId</id>
        <active>true</active>
        <protocol>http</protocol>
        <username>rete\pep35kd</username>
        <password>XXXX</password>
        <host>XXXX</host>
        <port>8080</port>
        <nonProxyHosts>localhost</nonProxyHosts>
    </proxy>
</proxies> 
```

请考虑一下，我似乎无法从命令行使用 mvn 命令（找不到命令）。我从来没有安装过 Maven，我认为插件就足够了：这是一个正确的假设吗？

**更新**问题肯定与代理有关。经过：

*   在本地 PC 上安装 Maven；
*   从 Eclipse Market Place 安装 Maven Eclipse；
*   将 Maven 安装目录设置为本地 PC Maven 目录，而不是默认的 Embedded Maven，

一切都按预期工作。我真的不明白为什么，但可能防火墙阻止了 Maven 服务器的流量。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2014-03-08T05:20:32.200

[我按照这个其他 StackOverflow 问题](https://stackoverflow.com/a/15789286/7989)的解决方案解决了这个问题

> 我有同样的问题。我通过将 Maven 原型目录添加到 Eclipse 来修复它。步骤如下：（请注意https协议）
> 
> 1.  打开窗口 > 首选项
> 2.  打开 Maven > 原型
> 3.  单击“添加远程目录”并添加以下内容：
>     *   目录文件：[https ://repo1.maven.org/maven2/archetype-catalog.xml](https://repo1.maven.org/maven2/archetype-catalog.xml)
>     *   说明：maven目录

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-20T02:38:39.790

假设您的代理设置正确，您可能错过了将 Eclipse 指向预期`settings.xml`文件的操作。当您将 Maven 作为管理单元安装并在 Eclipse 之外进行外部安装时，通常会发生这种情况。您需要告诉 Eclipse 它应该使用哪个 Maven 安装，以及它应该寻找哪个 settings.xml 文件。

首先检查 settings.xml 文件是否包含您的代理设置。

![在此处输入图像描述](../Images/8dcec034ebe8b9be1ca521cd8608e007.png)

接下来，检查此处的用户 settings.xml 文件是否包含您的代理设置。

![在此处输入图像描述](../Images/16fab699a3526c8558d9299b41ec4225.png)

如果您进行了任何更改，请重新启动 Eclipse。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-02-02T09:26:00.890

在用户 setting.xml 文件的“镜像”部分中添加以下内容对我有用。

```
<mirror>
  <id>ibiblio.org</id>
  <url>http://mirrors.ibiblio.org/maven2</url>
  <mirrorOf>central</mirrorOf>
</mirror> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-29T17:31:27.193

我发现最简单的方法是删除/删除 .m2 文件夹并重新创建它，放回您的 settings.xml 配置详细信息（如果适用）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-19T17:11:20.167

添加您的`MAVEN_HOME`环境变量，编辑您的路径以包含，`%MAVEN_HOME%/bin`然后尝试使用 Maven 手动创建项目：

```
mvn archetype:generate -DgroupId=com.program -DartifactId=Program -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false 
```

然后将现有的 Maven 项目导入 Eclipse。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-01-08T10:41:57.830

您可以通过在 Eclipse 中配置 settings.xml 来解决它。

进入Window --> Preferences --> Maven --> User Settings --> 选择settings.xml的实际路径

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-11T08:28:36.573

我找到它的解决方案 [http://www.scriptscoop.net/t/7c42f9d698a4/java-create-maven-project-could-not-resolve-archetype-connection-refused.html](http://www.scriptscoop.net/t/7c42f9d698a4/java-create-maven-project-could-not-resolve-archetype-connection-refused.html)

我们可以看到问题的根源：连接被拒绝：连接

我已经这样做了：

1) 窗口 -> 首选项 -> 常规 -> 网络连接。我在 Manual 中输入了 HTTP 协议代理的 url 和端口。它之所以有效，是因为在此之前，Spring Tool Suite 不想更新。之后，就好了。

2) 窗口 -> 首选项 -> Maven -> 用户设置。在全局设置中，为空。在用户设置中，我放置了 settings.xml 的路径。在这个文件中，我有：

[![在此处输入图像描述](../Images/468062b0f0bc61639e90d7bf545fe44a.png)](https://i.stack.imgur.com/F96Fp.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-06-13T21:06:40.207

转到首选项：-> Maven 单击“添加远程目录”文件：[http](http://repo1.maven.org/maven2/archetype-catalog.xml) ://repo1.maven.org/maven2/archetype-catalog.xml 描述：目录

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-01-26T07:10:19.743

单击窗口-> 首选项-> Maven。取消选中“离线”复选框。这无法下载我正在使用的原型。当我取消选中它时，一切都很顺利。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-28T03:43:23.713

您在 maven/conf 文件夹中定义的 settings.xml 文件也可能定义了它无法访问的位置

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-06-12T14:10:21.707

这可能听起来很傻，但请确保 Maven 设置中的“离线”复选框未选中。我试图创建一个项目并收到此错误，直到我注意到该复选框。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-19T17:30:06.627

首先，您必须在工作站上安装[Maven 。](http://maven.apache.org/)您还需要安装 M2E，这显然是您所做的。并非所有 Juno 发行版都预装了它。

然后配置您的 Eclipse，以便它可以找到您的 Maven 安装。在菜单 Window -> Preferences 中，然后打开 Maven 部分。在您的右侧面板中，您有一个 Eclipse 知道的 Maven 安装列表。添加您的安装并选择它，而不是 M2E 提供的嵌入式 Maven。不要忘记使用 Maven 安装的 settings.xml 的路径设置“安装目录的全局设置”字段。

这将我们引向 settings.xml。如果上述方法不能解决您的问题，您将不得不配置您的 Maven。更多信息[在这里](http://maven.apache.org/settings.html)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-13T06:11:39.303

我在 eclipse 中创建 web-app 时遇到了类似的错误，仅通过清理（删除所有文件）和重建 maven 存储库来解决问题

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2013-08-15T17:44:44.917

您需要在 Eclipse 中安装 m2eclipse 或任何其他 maven 插件。一些 Eclipse 附带了 maven 及其插件。否则去Help->software Install，选择All sites，用maven过滤列表，然后安装插件。然后看看[这个](http://rajanpupa.blogspot.com/2013/08/overview-i-still-remember-my-initial.html)链接。希望能帮助到你。

# spring - Spring MVC：从基本控制器重定向 - 如何获取重定向到的路径？

> ID：15506045
> 
> 赞同：9
> 
> 时间：2013-03-19T17:09:10.547
> 
> 标签：spring, spring-mvc

我已经搜索和搜索，没有发现任何说这是不可能的，也没有找到任何解释如何做到这一点的东西。

如果您有一个扩展的基本控制器，我知道请求映射方法也是继承的。

所以与....

```
public abstract class BaseController
{

    @RequestMapping(value="hello", method=RequestMethod.GET)
    public String hello(Model model) {
        return "hello-view;
} 
```

...像这样的控制器...

```
@Controller
@RequestMapping("/admin/")
public abstract class AdminController
{
 ....
} 
```

...将继承一个在 /admin/hello 上侦听的方法，该方法返回 hello-view。

这一切都很好。

但是如果我有一个重定向的 BaseController 方法：

```
public abstract class BaseController
{

    @RequestMapping(value="hello", method=RequestMethod.POST)
    public String hello(Model model) {
        return "redirect:/success/;
} 
```

据我了解，重定向需要相对或绝对 URL 而不是视图名称？

那么我的 AdminController 如何确保重定向到 /admin/success/？

BaseController 方法如何在我的 AdminController 上获得类级别 @requestMapping 的句柄？

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T17:17:44.453

一种选择：

```
public abstract class BaseController
{
    /** get the context for the implementation controller **/
    protected abstract String getControllerContext();

    @RequestMapping(value="hello", method=RequestMethod.GET)
    public String hello(Model model) {
        return "redirect:"+getControllerContext()+"success/";
    }
} 
```

这是管理控制器。

```
@Controller
@RequestMapping(AdminController.context)
public abstract class AdminController
{
    static final String context = "/admin/";
    @Override
    protected String getControllerContext() {
        return context;
    }
 ....
} 
```

另一个涉及反射的选项可能会起作用......：

```
public abstract class BaseController
{
    String context = null;

    @RequestMapping(value="hello", method=RequestMethod.GET)
    public String hello(Model model) {
        return "redirect:"+getControllerContext()+"success/";
    }

    // untested code, but should get you started.
    private String getControllerContext() {
        if ( context == null ) {
            Class klass = this.getClass();
            Annotation annotation = klass.getAnnotation(RequestMapping.class);
            if ( annotation != null ) {
                context = annotation.value();
            }
        }
        return context;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-21T19:18:06.537

根据[http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-redirecting-redirect-prefix](http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-redirecting-redirect-prefix) `redirect:/myapp/some/resource`将重定向相对于当前 Servlet 上下文。

我的检查：应用程序上下文是`topjava`，Servlet 上下文是`meals`，请求`http://localhost:8080/topjava/meals/update?...`

重定向`redirect:meals`到[http://localhost:8080/topjava/meals/meals](http://localhost:8080/topjava/meals/meals)

重定向`redirect:/meals`到[http://localhost:8080/topjava/meals](http://localhost:8080/topjava/meals)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:54:57.953

在 Spring 中无需提供相对 url

```
"redirect:/admin/success/"; 
```

而不是上面的代码，直接你可以像这样给出

```
"redirect:/success/"; 
```

默认情况下，它将采用上下文路径。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T17:21:34.540

只要您不需要任何动态的东西，我就会重定向到字符串中的请求映射。尚未使用重定向自己，但您的管理成功的映射将是：

`return "redirect:/admin/success/"`

这应该使用相应的请求映射创建一个浏览器重定向到您的控制器。

另一种可能性是使用反射并获取父级的请求映射注释。

# android - 片段、ActionBarSherlock 和菜单

> ID：15506048
> 
> 赞同：1
> 
> 时间：2013-03-19T17:09:13.033
> 
> 标签：android, android-fragments, actionbarsherlock

我正在使用 ActionBarSherlock 库和片段。但是，在第二个片段出现后，我很难让菜单显示在屏幕上。这是一个非常简单的程序，一个屏幕接着另一个屏幕。我使用 FragmentTransaction 并且每次都替换。我在每个片段中使用 setHasOptionsMenu(true)。onCreateOptionsMenu 和 onPrepareOptionsMenu 被调用，但我在菜单所在的位置有一个空白区域。我可以选择那个区域，它似乎可以工作，但没有文字。有任何想法吗？片段代码：

```
public class MyListFragment extends SherlockListFragment {  
@Override  
public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setHasOptionsMenu(true);  
}  
    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        if (menu.findItem(R.id.save) == null) {
            menu.clear();
            inflater.inflate(R.menu.new_menu, menu);
        }
    } 
```

活动：

```
public class MyMain extends SherlockFragmentActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        supportFragmentManager = getSupportFragmentManager();
        handler = new Handler();
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    }
} 
```

片段代码

```
fragmentEntries.push(stackEntry);
FragmentTransaction ft = mFragmentManager.beginTransaction();
ft.replace(contentId, fragment, fragmentName);
ft.commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:45:48.677

[每个文档](http://developer.android.com/guide/topics/ui/menus.html)只会调用一次 onCreateOptionsMenu ..

> 系统调用 onCreateOptionsMenu() 后，它会保留您填充的 ​​Menu 的一个实例，并且不会再次调用 onCreateOptionsMenu()，除非菜单由于某种原因而无效。但是，您应该只使用 onCreateOptionsMenu() 来创建初始菜单状态，而不是在活动生命周期中进行更改。
> 
> 如果要根据活动生命周期中发生的事件修改选项菜单，可以在 onPrepareOptionsMenu() 方法中进行。此方法向您传递当前存在的 Menu 对象，以便您可以对其进行修改，例如添加、删除或禁用项目。（片段还提供了一个 onPrepareOptionsMenu() 回调。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:41:04.223

看起来这只是一个愚蠢的错误。我有一个带有图标的菜单（那是一个选择器），似乎掩盖了文本。我的测试也失败了，因为我使用的菜单包含具有相同 ID 的项目。

# html - 交换我的内容和侧边栏的位置？

> ID：15506056
> 
> 赞同：0
> 
> 时间：2013-03-19T17:09:33.797
> 
> 标签：html, css, web

我不确定为什么，但我创建了两个 CSS 类`content`和`sidebar1`，目的是将侧边栏放在右侧。但不管我做什么，当我把`<div>`s 放进去时，侧边栏最终会在左边！

# 我的代码

## CSS

```
.container {
    max-width: 1500px;
    min-width: 1200px;
    background-color: #000000;
    margin: 0 auto; 
}
.sidebar1 {
    float: right;
    width: 200px;
    padding-bottom: 10px;
}
.content {
    padding: 10px 0;
    width: 1000px;
    float: right;
    border-left-color: #FFF;
    border-right-color: #FFF;
} 
```

## HTML

```
<div class="container">

  <div class="content">

    <h1>Heading</h1>
    </div>

  <div class="sidebar1">
    </div>
</div> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:16:10.853

当您将多个元素向右浮动时，DOM 中的后续元素将出现在第一个元素的**左侧**。

尽管这似乎违反直觉，但如果您必须向右浮动，只需切换元素的顺序即可。

```
<div class="container">
    <div class="sidebar1">
      Sidebar
    </div>
    <div class="content">
         <h1>Heading</h1>
    </div>
</div> 
```

**[演示](http://jsfiddle.net/w227h/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:15:34.557

您的顺序是错误的——首先，您的内容 div 尽可能正确地浮动，然后，您的侧边栏会浮动。（所以基本上，向右浮动多个内容会颠倒顺序。）你能安排侧边栏在源中的内容 div 之前吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:11:25.610

为什么不将内容向左浮动，侧栏向右浮动呢？而不是你目前拥有的两个权利

例如

```
.container {
    max-width: 1500px;
    min-width: 1200px;
    background-color: #000000;
    margin: 0 auto; 
}
.sidebar1 {
    float: right;
    width: 200px;
    padding-bottom: 10px;
}
.content {
    padding: 10px 0;
    width: 1000px;
    float: left;
    border-left-color: #FFF;
    border-right-color: #FFF;
} 
```

# c# - 从 DataGrid 在默认查看器中打开 PDF

> ID：15506059
> 
> 赞同：1
> 
> 时间：2013-03-19T17:09:36.780
> 
> 标签：c#, asp.net, pdf

我有一个网格，显示文件夹中所有 pdf 文件的名称和链接。该链接在浏览器中打开文件。

这并不理想，因为浏览器会缓存文件，因此如果文档被移动或更改，旧的缓存版本仍然可以访问。

是否可以让链接在默认安装的 pdf 查看器中打开文件并完全避免缓存？

这是我的网格代码：

```
<form runat="server">
Search for a file: <asp:TextBox ID="txtFilter" runat="server"></asp:TextBox>
    <asp:Button ID="btnShow"
        runat="server" Text="Display" onclick="btnShow_Click" />
</form>

<asp:DataGrid runat="server" id="FileList" Font-Name="Verdana" CellPadding="5"
AutoGenerateColumns="False" AlternatingItemStyle-BackColor="#eeeeee"
HeaderStyle-BackColor="Navy" HeaderStyle-ForeColor="White"
HeaderStyle-Font-Size="15pt" HeaderStyle-Font-Bold="True">
<Columns>
<asp:HyperLinkColumn DataNavigateUrlField="Name" DataTextField="Name" 
       HeaderText="File Name" target="_blank"/>
<asp:BoundColumn DataField="LastWriteTime" HeaderText="Last Write Time"
    ItemStyle-HorizontalAlign="Center" DataFormatString="{0:d}" />
</Columns>
</asp:DataGrid> 
```

CS：

```
protected void btnShow_Click(object sender, EventArgs e)
    {
     ShowData();
    }

    public void ShowData()
    {
        DirectoryInfo dirInfo = new DirectoryInfo(Server.MapPath(""));

        FileInfo[] info = dirInfo.GetFiles("*.pdf");            //Get FileInfo and Save it a FileInfo[] Array

        List<Getfiles> _items = new List<Getfiles>();          // Define a List with Two coloums

        foreach (FileInfo file in info) //Loop the FileInfo[] Array
           _items.Add(new Getfiles { Name = file.Name, LastWriteTime = file.LastWriteTime.ToString("MM/dd/yyyy") });  // Save the Name and LastwriteTime to List

        var tlistFiltered1 = _items.Where(item => item.Name.Contains(txtFilter.Text)); // Find the file that Contains Specific word in its File Name

        FileList.DataSource = tlistFiltered1; //Assign the DataSource to DataGrid
        FileList.DataBind();

    }

    public class Getfiles
    {
        public string Name { get; set; }
        public string LastWriteTime { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:37:55.020

最好向用户提示一个对话框并要求他下载文件，然后它将避免在浏览器中缓存...

尝试如下...

**HTML：**

`Change the DataGrid HyperLinkColumn`如下所示：

```
<asp:HyperLinkColumn DataNavigateUrlField="Name" DataTextField="Name" 
       HeaderText="File Name" target="_blank"  DataNavigateUrlFormatString="Download.aspx?FileName={0}" /> 
```

然后`Add a New .aspx page`到您的网站并将其命名为**Download.aspx** ...

和写下面的代码`Page load event`..`Download.aspx`

**C＃ ：**

```
 protected void Page_Load(object sender, EventArgs e)
        {
            string FName = Server.MapPath(@"Files\" + Request.QueryString["FileName"].ToString());
            Response.Clear();
            Response.ContentType = "application/pdf";
            Response.AppendHeader("Content-Disposition", "attachment; filename=" + FName);
            Response.TransmitFile(FName);
            Response.End(); 
        } 
```

# r - 将简单的递归关系转换为函数式程序

> ID：15506060
> 
> 赞同：2
> 
> 时间：2013-03-19T17:09:36.967
> 
> 标签：r, functional-programming

您好我正在尝试将以下递归伪代码定义转换为 R 中的函数式编程构造：

```
a = [ random numbers between 0 and 10 ]
b = [ random numbers between -5 and 5 ]
c = [ random numbers between 0 and -10 ]

x0 = 200
index = 0

function f(x) {
    index = index + 1
    if( x is between 200 and 220 ) return f(x + a[index])
    else if(x is between 220 and 250) return f(x + b[index])
    else if(x is 250 and above) return f(x + c[index])
} 
```

可执行的R代码是：

```
a <- sample(1:10,size=50, replace=TRUE)
b <- sample(-5:5,size=50, replace=TRUE)
c <- sample(-1:-10,size=50, replace=TRUE)

index <- 0;

myfunc <- function(x){
  index <<- index + 1;
  if(index == 50) return(x)
  if(x <= 220){ return(myfunc(x + a[index])) }
  else if(x > 220 & x < 250){ return(myfunc(x + b[index])) }
  else {return( myfunc(x + c[index]))}
}
print(myfunc(200)); 
```

想讨论任何方法，包括 Map/Filter/Reduce 或 Vectorisation。提前谢谢了。

此外，我怎样才能保留 50 个 x 元素的整个路径（而不是只看 x 的一个答案）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T19:01:41.760

您可以使用带有累积选项的 Reduce 函数来保存所有中间值。

要了解它是如何工作的，请在简单的“sum”函数上尝试一下

```
x = rep(200, 50)
Reduce(x=x, f=sum) 
Reduce(x=x, f=sum, accumulate=T) 
```

您正在寻找的答案需要您重写您的特殊函数，以便将其传递给 Reduce：

```
foo <- function(x, y = 0){
    if (200 <= x & x < 220){
        x + sample(1:10, 1)
    }
    else if(220 <= x & x < 250){
        x + sample(-5:5, 1)
    }
    else if (250 <= x){
        x + sample(-1:-10, 1)
    }
}

Reduce(x=rep(200, 50), f=foo, accumulate=T) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T18:24:00.543

我还没有把它变成函数形式，但我可以在 R 中做我认为你想做的事情：

```
 x=200; index=0; while (index < 50) {index <- index + 1;
    if(tail(x,1) <= 220){ x <-c(x,  tail(x,1)+a[index]) } else
     { if(tail(x,1)  & tail(x,1)  < 250) { x <-c(x , tail(x,1)+b[index]) }  else
        {x <-c( x , tail(x,1)+c[index])} }
  }
 x
 [1] 200 204 206 210 213 215 216 219 227 222 219 220 223 221 224 229 231 227 226 229 224 223 221 221
[25] 216 218 223 220 226 221 217 224 228 228 231 236 233 234 229 227 230 229 227 227 225 225 228 232
[49] 227 230 228 
```

也许这将有助于找到一种“功能化”它的方法。我认为`Reduce`或者`replicate`也许一个参考类对象很有可能提供机制。这只是将 x 向量扩展 1 个元素，然后在下一次迭代中使用该元素来选择要使用的增量向量。如果你想超过 50 长度的输出，你可以使用模余数作为索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T13:12:11.410

首先，我将首先对函数进行参数化以匹配您的原始描述，并在模拟参数发生变化时使事情更容易改变。

```
foo_cat <- function(x) {
  if (200 <= x & x < 220) return("a")
  if (220 <= x & x < 250) return("b")
  if (250 <= x) return("c")

  stop("x out of range")
}
ranges <- list(a = 1:10, b = -5:5, c = -(1:10))

foo_sample <- function(x, n = 1) {
  sample(ranges[[foo_cat(x)]], n, rep = TRUE)
} 
```

对我来说，这是函数式编程最重要的部分：编写封装解决方案重要组件的函数。

接下来我们将使用`foo_sample`for 循环来解决问题。这使得当前值和先前值之间的关系变得明确：

```
n <- 50
out <- c(200, rep(NA, n - 1))

for(i in seq(2, n)) {
  out[i] <- out[i - 1] + foo_sample(out[i - 1])
} 
```

接下来，您可以考虑删除 for 循环并将其替换为[函数式](https://github.com/hadley/devtools/wiki/functionals). 不幸的是，没有封装此模式的内置函数，因此您可以编写自己的（如果这是代码中非常常见的模式，这是一个好主意），或者坚持使用 for 循环（如果您愿意，这是个好主意您的代码易于阅读）。

# qt - QMenu::actionAt(const QPoint& pt) 中的点是什么意思？

> ID：15506067
> 
> 赞同：1
> 
> 时间：2013-03-19T17:09:51.190
> 
> 标签：qt

我是 Qt 的新手。QMenu::actionAt(const QPoint& pt) 中的点是什么意思？它是屏幕中的物理位置，以什么单位（例如像素）？还是相对整数索引？还是别的什么意思？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:13:52.293

它是相对于菜单左上角的 XY 位置，以像素为单位。

# php - 在 PHP 中获取文件锁定时应该使用循环吗？

> ID：15506072
> 
> 赞同：5
> 
> 时间：2013-03-19T17:10:05.463
> 
> 标签：php

我想创建一个简单的方法来将字符串写入日志文件，并且由于文件可能同时由不同的 Web 服务器进程写入，因此原子性需要文件锁定。

例如

```
function log_to_file($message)
{
   $fp = fopen("/tmp/lock.txt", "r+");

   while (!flock($fp, LOCK_EX)) {
     sleep(1); // Sleep for 1 second and try again
   }

   fwrite($fp, $message);
   fflush($fp);            
   flock($fp, LOCK_UN);    // release the lock

   fclose($fp);
} 
```

上面的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:26:41.793

我正在使用[error_log](http://www.php.net/manual/en/function.error-log.php) ('My log message',3,$logFile); 出于同样的目的。我在窥视时间达到每秒 300 个写入请求，大约两个月，文件锁定仍然没有任何问题。

# c++ - 在 CryptoAPI 中识别 CSP 提供者

> ID：15506077
> 
> 赞同：1
> 
> 时间：2013-03-19T17:10:14.647
> 
> 标签：c++, cryptography, digital-signature, hsm, mscapi

我正在使用 MS CAPI API 来使用 USB 令牌进行数字签名。

使用 CryptAcquireContext，我可以打印出所有可用 CSP 的名称，但我如何知道哪个 CSP 与插入的 USB 令牌相关联？

此外，如果有多个令牌插入计算机怎么办？

应用程序应该如何选择 CSP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:05:16.947

Windows CAPI 中的智能卡或令牌与加密提供程序之间没有关系。此外，多个提供商可以支持相同的令牌。

对于智能卡和令牌开发人员来说，为“Microsoft 基础智能卡加密提供程序”实施“智能卡微型驱动程序”是一种很好的做法。但这不是强制性的。

UPD：如果PC中插入了多个令牌，则需要手动将“智能卡读卡器”属性设置为提供者。可用阅读器列表可以通过 SCardListReaders 函数获取。

此外，一些提供商可以将来自所有阅读器的密钥混合在一个池中。

# java - 如何从 java 中的 TextArea 获取输入？

> ID：15506082
> 
> 赞同：0
> 
> 时间：2013-03-19T17:10:31.377
> 
> 标签：java, swing

```
public class Idunno 

{
static Scanner commandSystem = new Scanner (System.in);
public static String[] nextCmd;

public static void tellConsole(String msg)
{
    Window.tellWindow(msg);
    System.out.println(msg);
}
public static void main (String[] args)
{
    Window.main();

    tellConsole("I dunno Version 1.0.0.0 By: Lukario45");
    tellConsole("Type /help for command list!");
    while (true)
    {
        String nextCmd = commandSystem.nextLine();
        if (nextCmd.startsWith("/"))
        {
            String[] cmdNext = nextCmd.split(" ");
            String cmd = cmdNext[0];

            Command.run(cmd , nextCmd);             
        }
        else
        {
            tellConsole("I am sorry! You can only do commands in this version!");
        }
    }

}
} 
```

这是我的主要课程^^^

```
package net.mcthunder.idunno.src;

import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import java.awt.TextArea;
import java.awt.TextField;
import java.awt.Label;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class Window extends JFrame {
static TextArea outputBox2 = new TextArea();
public static TextField inputBox2 = new TextField();
private JPanel contentPane;
public void read()
{

}
/**
 * Launch the application.
 */
public static void main() {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Window frame = new Window();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}
public static void tellWindow(String msg)
{
    outputBox2.setText(outputBox2.getText() + msg + "\n");
}

/**
 * Create the frame.
 */
public Window() {
    setTitle("IDunno Verson 1.0.0.0");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 568, 396);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    TextArea outputBox = new TextArea();
    outputBox = outputBox2;
    outputBox.setBounds(5, 38, 537, 282);
    contentPane.add(outputBox);

    TextField inputBox = new TextField();

    inputBox.setBounds(5, 326, 537, 22);
    contentPane.add(inputBox);

    Label label = new Label("IDunno Version 1.0.0.0");
    label.setBounds(5, 10, 311, 22);
    contentPane.add(label);

}
} 
```

这是我的 Windows 课程 ^^
这是程序的样子 [http://puu.sh/2kvpt](http://puu.sh/2kvpt)

底部的文本框是我正在谈论的文本框

好的，所以这是我的问题，我正在尝试将我的整个程序转换为在 GUI 上显示，我对此非常感兴趣。但我不知道如何使底部文本框作为 System.in 工作以使扫描仪工作。我怎样才能做到这一点？谢谢！9错误的代码格式来自 4spaces stuff OO)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:15:16.090

不要使用 awt 组件（已弃用）。更喜欢使用 Swing 等效项：JTextArea

见[http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTextArea.html](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTextArea.html)

然后，您可能会找到一个 getText() 方法

# java - Java 小程序显示问题

> ID：15506083
> 
> 赞同：0
> 
> 时间：2013-03-19T17:10:35.443
> 
> 标签：java, applet, awt, layout-manager

问题在于这个程序计算正确并正确输出信息，虽然它输出正确的值，但它没有正确显示它们。它们被随机切断或部分覆盖。如果我调整小程序窗口的大小，即使我不移动它而只是单击调整栏，它也会移动输出语句并正确显示它。下面是我的 Java 代码。

```
/* 
 *Programmer 
 *Project: Ohm's Law AKA the program of difficulties
 */ 

import java.awt. *; 
import java.applet.*;
import java.awt.event.*;
import java.awt.datatransfer.*;
import java.text.DecimalFormat;

public class ohmslaw extends Applet implements ActionListener 
{
    Color seablue = new Color(70,191,243);
    Color white = new Color (250,250,250);
    Color black = new Color (0,0,0);
    Color NavyBlue = new Color (0,0,153);
    Color VegasGold = new Color (197,179,88); 
    Font fontOne = new Font("Century Schoolbook",Font.PLAIN, 16);
    Font fontTwo = new Font("Comic Sans", Font.BOLD, 16);
    Font fontThree = new Font ("Times New Roman", Font.PLAIN, 16);

    Label titleLabel = new Label ("The Ohm's Law calculator");
    Label noteLabel = new Label ("For all unknown values enter 0");
    Label voltagelabel = new Label ("Please enter the voltage");
    TextField voltageField = new TextField(10); 

    Label currentlabel = new Label ("Please enter the current"); 
    TextField currentField = new TextField(10); 

    Label resistancelabel = new Label ("Please enter the resistance"); 
    TextField resistanceField = new TextField(10); 

    Button calcButton = new Button("Calculate");
    Label calcLabel = new Label("Click calculate to output the other variable");

    Button clearButton = new Button("Clear");   
    Label clearLabel = new Label("Click the Clear Buttton to add new data.");

    Label newresistanceLabel = new Label ("                 ");
    Label newcurrentLabel = new Label ("                    ");
    Label newvoltageLabel = new Label ("                    ");
    Label blankarea = new Label ("                          "); 

    public void init()
    {
        setBackground(seablue);
        setForeground(white); 
        add(titleLabel); 
        add(noteLabel); 
        add(voltagelabel); 
        setForeground(black);
        add(voltageField);
        setForeground(white); 
        add(currentlabel); 
        setForeground(black);
        add(currentField);
        setForeground(white); 
        add(resistancelabel); 
        setForeground(black); 
        add(resistanceField);
        add(calcButton); 
        calcButton.addActionListener(this); 
        setForeground(white);
        setForeground(black); 
        add(clearButton);
        clearButton.addActionListener(this);
        setForeground(white);
        add(clearLabel);

        add(newresistanceLabel);

        add(newcurrentLabel);

        add(newvoltageLabel); 

    }

    public void actionPerformed(ActionEvent e)
    {
        double resistance;
        double current;
        double voltage; 

        if(e.getActionCommand() == "Calculate")
        {
            resistance = Double.parseDouble(resistanceField.getText());
            current = Double.parseDouble(currentField.getText());
            voltage = Double.parseDouble(voltageField.getText()); 

            if(resistance == 0)
            {
            doResistance(current, voltage); 

            }
            if(current == 0)
            {
                doCurrent(resistance, voltage);

            }   
            if(voltage == 0)
            {
                doVoltage(resistance, current);

            }
        }   
        if(e.getActionCommand() == "Clear")
        {
            voltageField.setText("");
            currentField.setText(""); 
            resistanceField.setText("");
            newresistanceLabel.setText ("      ");
            newcurrentLabel.setText ("         ");
            newvoltageLabel.setText("         ");
            calcLabel.setText("Click the Calculate Button to output your other value.");
            voltageField.requestFocus();
        }

    }

    public double doResistance(double current, double voltage)
    {
        double Rfinal;

            Rfinal = ((voltage)/(current));
            ResistanceOutput(current, voltage, Rfinal);
            return(0);

    } 
    public double doCurrent(double resistance, double voltage)
    {
        double Ifinal;

            Ifinal = ((voltage)/(resistance));
            CurrentOutput(resistance, voltage, Ifinal);
            return (0); 
    }
    public double doVoltage(double resistance, double current)
    {
        double Vfinal;

            Vfinal = ((resistance)*(current));
            VoltageOutput(resistance, current, Vfinal);
            return(0); 
    }

    public double ResistanceOutput(double current, double voltage, double Rfinal)
    {

        DecimalFormat two = new DecimalFormat(".0");

        newresistanceLabel.setForeground(white);
        newresistanceLabel.setText("Your Resistance is " 
            + two.format(Rfinal) + ".");
        return(0);
    }
    public double CurrentOutput(double resistance, double voltage, double Ifinal)
    {

                    DecimalFormat two = new DecimalFormat(".0");

        newcurrentLabel.setForeground(white);
        newcurrentLabel.setText("Your current is " 
            + two.format(Ifinal) + ".");
        return(0);
    }

    public double VoltageOutput(double resistance, double current, double Vfinal)
    {

        DecimalFormat two = new DecimalFormat(".0");

        newvoltageLabel.setForeground(white);
        newvoltageLabel.setText("Your voltage is " 
            + two.format(Vfinal) + ".");
        return(0);
    }

        public void paint(Graphics g)
    {
        Image picture;
        picture = getImage(getDocumentBase(), "ohm.jpg");
        g.drawImage(picture, 55,350, this); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:46:12.500

我建议查看一些有关 Java 布局的信息。默认情况下，Applet 带有[FlowLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)，这可能不是您想要的，因为它基本上是并排添加组件的。最好使用的布局可能是[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)。

此外，您可能希望使用 setSize 方法为您的小程序设置固定大小。

为了更清楚地说明这一点，如果您想使用 GridLayout（比 GridBagLayout 更容易使用），您可以在代码中添加以下行：

```
import java.awt.GridLayout;

//...

public void init(){
this.setLayout(new GridLayout(7,2));

//your code for adding components...

this.setSize(550,250);//sets fixed size
} 
```

此 GridLayout 会将所有组件添加到 7x2 网格中。

# asp.net - asp.net c#编译器报错CS1061

> ID：15506087
> 
> 赞同：1
> 
> 时间：2013-03-19T17:10:45.117
> 
> 标签：asp.net, c#-4.0, compiler-errors, runtime-error

我在我的大学项目社交网站上工作.....听到一些关键问题...... -->当我拖动一个下拉按钮或图像按钮时，页面很容易运行，但双击它后打开 aspx.cs 页面没有代码赖特仍然页面显示 CS1061-error 。

点击按钮后生成点击事件......

```
namespace newsns
{
    public partial class WebForm6 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click1(object sender, EventArgs e)
        {

        }
    }
} 
```

-->在任何类中都没有问题，任何命名空间......或任何代码......所以为什么浏览器会显示这个消息

> “/”应用程序中的服务器错误。
> 
> 编译错误
> 
> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS1061：“ASP.forgotpassword_aspx”不包含“Button1_Click1”的定义，并且找不到接受“ASP.forgotpassword_aspx”类型的第一个参数的扩展方法“Button1_Click1”（您是否缺少 using 指令或装配参考？）
> 
> 源错误：
> 
> 第 331 行： 第 332 行：
> 第 333 行： Text="Button" /> 第 335 行：
> 
> 源文件：c:\Users\DHAVAL\Documents\Visual Studio 2010\Projects\NEWSNS\newsns\forgotpassword.aspx 行：333

显示详细的编译器输出：

显示完整的编译源：

--> 我的某些页面无法显示此错误，但其他页面显示它....为什么...????? 请回答我的问题....我是 c#asp.net 的新手...我失去了更多时间来寻找解决方案...

我尝试了所有方法来解决问题....但它仍然让我感到尴尬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T19:31:51.867

有了同样的错误，我不得不忍受并解决了它。这背后的原因如下：如果您忘记了任何 {} 或者您使用了任何逻辑运算符，请通过将其更改为 > 或 < 来正确检查它。你很快就会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T15:44:14.450

我想如果你重建你的应用程序解决了这个问题

如果您使用任何 asp 控件，则必须重新部署您的应用程序或 Web 应用程序以将相关的 dll 文件定位到 bin 文件夹中。

祝你好运

# parsing - 在没有左手递归的情况下解析布尔表达式

> ID：15506088
> 
> 赞同：7
> 
> 时间：2013-03-19T17:10:45.513
> 
> 标签：parsing, grammar, peg, pegjs

我正在尝试匹配这个

```
f(some_thing) == 'something else' 
```

*   **f(some_thing)**是一个函数调用，它是一个表达式
*   **==**是一个布尔运算符
*   **'something else'**是一个字符串，也是一个表达式

所以布尔表达式应该是

```
expression operator expression 
```

问题是如果没有左递归，我无法弄清楚如何做到这一点这些是我的规则

```
expression 
  = 
  bool_expression
  / function_call
  / string
  / real_number
  / integer
  / identifier

bool_expression
  = l:expression space* op:bool_operator space* r:expression 
  { return ... } 
```

使用语法符号，我有

```
O := ==|<=|>=|<|>|!=  // operators
E := B|....           // expression, many non terminals
B := EOE 
```

因为我的语法是 EOE 我不知道如何使用左手算法

```
A := Ab|B
transforms into
A := BA'
A':= e|bA 
```

其中 e 为空，b 为终端

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T19:44:15.940

这样的事情应该这样做：

```
expression
 = bool_expression

bool_expression
 = add_expression "==" bool_expression
 / add_expression "!=" bool_expression
 / add_expression

add_expression
 = mult_expression "+" add_expression
 / mult_expression "-" add_expression
 / mult_expression

mult_expression
 = atom "*" mult_expression
 / atom "/" mult_expression
 / atom

atom
 = function_call 
 / string
 / real_number
 / integer
 / identifier

function_call
 = identifier "(" (expression ("," expression)*)? ")"

string
 = "'" [^']* "'"

identifier
 = [a-zA-Z_]+

integer
 = [0-9]+

real_number
 = integer "." integer?
 / "." integer 
```

# jquery - Jquery $.ajax 不工作

> ID：15506090
> 
> 赞同：0
> 
> 时间：2013-03-19T17:10:53.233
> 
> 标签：jquery, ajax, codeigniter

我正在使用 codeigniter 并尝试使用带有 jQ​​uery 的 Ajax 调用来获得结果。我有一个选择框，其中从数据库中填充选项，如下所示：

```
echo "<select id=\"agent_select\" name =\"agent_select\" >";
echo "<option id=\"0\" value=\"0\" selected=\"selected\">Select Agent Name</option>";
$rs=$this->Model_ocperformance->get_all_activeusers_except($this->session->userdata('id'));
foreach($rs->result() as $row){
    echo "<option id=\"".$row->id."\" value=\"".$row->id."\" >".$row->name."</option>";
}
echo "</select>";
echo "<div id=\"results\">
</div>"; 
```

我的 JQuery 脚本是这样的：

```
$(document).ready(function(){
        $("#agent_select").change(function(){
            $.ajax({    
                    type:"POST",
                    url:"<?=base_url()?>index.php/ajax/find_status",
                    data:{agent_id:$(this).val()},
                    success:function(response){
                        alert("Response: "+ response);},
                    error:function(){
                        alert("Failed to retrieve information");
                        }
                });

        });
    }); 
```

当我更改选择框时，它应该调用 ajax 函数并从 ajax/find_status 函数中检索数据。但不幸的是，什么也没发生。我错过了什么或犯了错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:12:08.997

抱歉，我在页面中的其他脚本有问题，这就是为什么这不起作用。@Jai 如果我添加`php`而不是`=`那么我也必须使用`echo`. 但是在我修复了页面的其他脚本之后，我使用的那个起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:19:44.210

我猜错误在这里：

```
 url:"<?=base_url()?>index.php/ajax/find_status" 
```

试试这个：

```
url:"<?php base_url(); ?>/index.php/ajax/find_status" 
```

尝试添加`php`而不是简短的`=`，并尝试`/`在 index.php 之前添加

# c++ - 常量函数指针

> ID：15506094
> 
> 赞同：4
> 
> 时间：2013-03-19T17:11:12.173
> 
> 标签：c++, function, pointers

我对函数指针有一些困难。我有一个基类，它定义了一个函数指针，通过**typedef double (*function)(double *x) const;**

*   一个小问题：为什么上面的 typedef 不能编译？

    给出以下错误：**错误：'function'上的'const'和'volatile'函数说明符在类型声明中无效**

对于下面的部分，我使用**typedef double (*function)(double *x)**。现在每个子类都可以实现这种类型的多个不同版本的函数。通过枚举，我选择了我选择的函数，它将我的非成员函数指针（在基类中定义）设置为由子类的这些成员函数指针之一初始化。这是一个代码片段：

子类的源文件：

```
PndLmdROOTDataModel1D::PndLmdROOTDataModel1D(interpolation_type intpol_type) {
  if(intpol_type == CONSTANT) {
    setModelFunction(&PndLmdROOTDataModel1D::evaluateConstant); 
  }
  else if (intpol_type == SPLINE) {
    setModelFunction(&PndLmdROOTDataModel1D::evaluateSpline);
  }
  else {
    setModelFunction(&PndLmdROOTDataModel1D::evaluateLinear);
  }
} 
```

和基类（头文件）：

```
class MultiModel1D: public Model1D {
protected:
  function model_func;

public:
  MultiModel1D();
  virtual ~MultiModel1D();

  void setModelFunction(function f);
} 
```

编译时出现以下错误：

> 注意：没有已知的参数 1 从 'double (PndLmdROOTDataModel1D::*)(double*)' 到 'function {aka double (*)(double*)}'的转换</p>

由于速度问题，我正在使用函数指针（至少我认为这应该比不断运行某些开关盒更快）。我究竟做错了什么？也许还有一些设计模式可以作为更好的选择......提前致谢！

史蒂夫

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T17:15:12.843

这是因为（自由）函数指针和成员函数指针之间存在根本区别。您的“附带问题”已经包含问题的提示。为了解释，您可以执行以下任一操作：

```
typedef double (SomeClass::*function)(double *x) const; 
```

或者

```
typedef double (*function)(double *x); 
```

`const`但是永远不能在函数级别声明非成员函数。这些类型不能相互转换，这是编译器指出的代码中的问题。

如果它们*可以*转换，你最终会遇到一个问题：成员函数指针告诉编译器它需要一个要调用的对象，该对象将在调用成员函数时放入`this`。如果可以将指针转换为普通函数指针，则该对象将丢失，并且可能所有参数都会因此而混乱。所以，不，你真的不能只施放它们。现实更加复杂（多重/虚拟继承），但你明白了......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T17:15:17.853

出于同样的原因，我们不会写：

```
void foo() const
{
   // ...
} 
```

在类声明之外。非成员函数不能是`const`.

您的函数指针是普通函数指针，而不是指向成员函数的指针，因此在`const`那里没有任何意义。

# objective-c - 目标 C 中的多个条件

> ID：15506095
> 
> 赞同：0
> 
> 时间：2013-03-19T17:11:15.697
> 
> 标签：objective-c, if-statement, conditional-statements

我对目标 c 和条件有一个小问题。我们如何证明在 6 个条件下，我给出的至少 3 个必须被验证为正确？

谢谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:13:40.200

你可以这样做：

```
int validated=0;

if(condition1){
    validated++;
}
if(condition2){
    validated++;
}
if(condition3){
    validated++;
}
if(condition4){
    validated++;
}
if(condition5){
    validated++;
}
if(condition6){
    validated++;
}
if(validated>=3){
      //do your stuffs
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:14:09.670

```
int counter = 0;
if (condition1) counter++;
if (condition2) counter++;
if (condition3) counter++;
if (condition4) counter++;
if (condition5) counter++;
if (condition6) counter++;
if (counter >= 3) {
    // something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:14:51.600

您可以尝试计算正确的条件：

伪代码：

```
int counter = 0;
if(A) counter++;
if(B) counter++;
if(C) counter++;
if(D) counter++;
if(E) counter++;
if(F) counter++;

if(counter >= 3){
//do stuff here
}
counter = 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T17:26:26.077

除了已经给出的答案之外，这里还有一个针对可变数量条件的更灵活的解决方案：

```
int conditions[6] = {condition1, condition2, condition3, 
                     condition4, condition5, condition6};
int counter = 0;
for (int i = 0; i < sizeof(conditions)/sizeof(int); i++) {
    counter += conditions[i];  // Assuming your conditions are 0 or 1.
}
if (counter >= 3) {
    // do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T17:40:01.373

```
 @interface Conditions
 @property (nonatomic, strong) NSMutableArray *conditions;

 - (void) addCondition: (Condition*) theCondition;
 - (NSInteger) count;
 - (NSInteger) satisfying: ( void (^block)(Condition*)  );
 @end 
```

将您的条件列表包装在一个对象中。当您需要知道是否满足三个条件时：

```
 if ([self.conditions satisfying: ^(Condition *c){ return [c isSatisfied]; })>3) {...}; 
```

如果这是一个一次性的项目，这就是矫枉过正——也许是可笑的矫枉过正。但是，如果长期维护是一个问题，这会使条件与实施细节脱钩。你避免了长长的条件列表。您可以轻松地添加或更改条件，如果它们的逻辑变得复杂，您将拥有一个很好的面向对象的界面来处理它。（条件可能是作为门面运行的协议，而不是对象）。

# wpf - 从 DataGrid 中的表填充 ComboBox

> ID：15506101
> 
> 赞同：0
> 
> 时间：2013-03-19T17:11:40.070
> 
> 标签：wpf, datagrid

我正在尝试做一些我认为非常简单的事情，但目前完全让我感到困惑。

假设我有两张桌子。一个包含所有者列表（以保持唯一性）。另一个有一个项目列表及其所有者。我想要两个数据网格：1）所有者列表。2）项目及其所有者的列表，其中所有者是从组合框中选择的。

其中第一个非常简单：将表设置为数据源，并将其拖到 WPF 表单上。工作得很好：

```
<DataGrid ItemsSource="{Binding Source={StaticResource ownersViewSource}}" Name="ownersDataGrid" DataContext="{Binding}">
    <DataGrid.Columns>
        <DataGridTextColumn x:Name="ownerColumn1" Binding="{Binding Path=Owner}" />
    </DataGrid.Columns>
</DataGrid> 
```

另一部分不工作。我原以为这会起作用，但我显然不明白：

```
<DataGridTemplateColumn Header="Header">
    <DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <ComboBox ItemsSource="{Binding Source={StaticResource ownersViewSource}}" DisplayMemberPath="Owner" />
    </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

（显然，这是在 DataGrid 中）

问题是这显示了列表 - 但从组合框中选择项目也会将所有其他行中的选定项目更改为该项目！

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:30:08.630

Got it!

```
<DataGridComboBoxColumn Header="Owner Choice" ItemsSource="{Binding Source={StaticResource ownerViewSource}}" DisplayMemberPath="Owner" SelectedItemBinding="{Binding Path=Owner}"  /> 
```

(The ItemsSource binds to one place, the SelectedItemBinding binds to the other.)

# opengl-es - OpenGL ES：在每一帧上调用 glClear 的目的

> ID：15506110
> 
> 赞同：3
> 
> 时间：2013-03-19T17:12:05.107
> 
> 标签：opengl-es

我是 OpenGL ES 的新手，我尝试绘制三角形，但我不明白在每一帧上调用 glClear(GL10.GL_COLOR_BUFFER_BIT) 的目的是什么？没有它，屏幕上会出现一些奇怪的伪影。我应该每每帧开始的时间？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:53:45.367

简化：如果你绘制一个三角形，只有实际*包含*三角形的帧缓冲区部分被重绘。因此，如果您绘制一次，然后将其移动一点并在下一帧再次绘制，而不调用 glClear，前一帧的内容仍将存在于帧缓冲区中。

这就是您的伪影的原因，也是`glClear`每次您怀疑显示的图像*发生变化时都应该使用帧缓冲区的原因。*对于大多数应用程序，这确实意味着：每一帧。

# javascript - Phonegap Windows phone 8 自定义网络字体

> ID：15506112
> 
> 赞同：2
> 
> 时间：2013-03-19T17:12:10.480
> 
> 标签：javascript, cordova, mobile, windows-phone-8, webfonts

我正在尝试将自定义字体嵌入到 Windows Phone 8 应用程序中的 WebView 中，并且已经尝试了所有方法。我遇到了一篇很有前途的文章：[blogs.msdn.com/b/wsdevsol/archive/2012/10/23/about-webview-and-embedded-fonts.aspx](http://blogs.msdn.com/b/wsdevsol/archive/2012/10/23/about-webview-and-embedded-fonts.aspx)，但没有成功。

前任：

```
@font-face {
   font-family: 'Avenir LT W01 35 Light';
   src: url('35-light/avenirltstdlight.eot');
   src: url('35-light/avenirltstdlight.eot?#iefix') format('embedded-opentype'),
        url('35-light/avenirltstdlight.woff') format('woff'),
        url('35-light/avenirltstdlight.ttf') format('truetype'),
        url('35-light/avenirltstdlight.svg#avenirltstdlight') format('svg');
   font-weight: normal;
   font-style: normal;
} 
```

还尝试仅包括以下路径：

```
x-wapp0:avenir...woff 
```

甚至使用 Base64。有趣的是，在浏览器中打开应用程序，一切正常。只有当它嵌入到 Phonegap 时我才会遇到问题。

你们中的任何人都可以提供帮助或对完成此任务有任何指示吗？

同样，最后我想在我的 HTML 中使用自定义字体（带有网络图标），通过 Phonegap 在应用程序中显示。

更奇怪的是，即使是嵌入的 woff base64 字体也不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T19:07:28.890

尝试使用[TTFEdit](http://sourceforge.net/projects/ttfedit/)将字体上的可嵌入标签设置为 0。这应该可以解决问题，但请确保您在出售您的应用程序之前有权嵌入字体。

我[对类似](https://stackoverflow.com/questions/14558331/getting-a-web-font-to-work-on-an-html5-windows-phone-app/20573678#20573678)问题的完整回答也可能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T07:04:29.637

我有同样的问题，这解决了我的问题： [http ://code.tutsplus.com/articles/the-easyest-way-to-use-any-font-you-wish--net-3927](http://code.tutsplus.com/articles/the-easiest-way-to-use-any-font-you-wish--net-3927)

# java - DataTable 排序和会话范围不起作用

> ID：15506115
> 
> 赞同：0
> 
> 时间：2013-03-19T17:12:17.390
> 
> 标签：java, spring, jsf, primefaces

**简单数据表示例的排序正在使用 Controler 的视图范围，但不适用于 session**。我在下面提供了我的代码以获取更多信息。用户数据列表填充表格。

有人知道为什么会有这种行为吗？

**模型**

```
...
public class User implements Serializable {

    private static final long serialVersionUID = 1L;

    private Long mId;
    private String mUsername;
    private String mPassword;
    private String mEmail;
    private Date mBirthdate;

    public User() { 
    }

    public User(Long aId, String aUsername, String aPassword, String aEmail,
            Date aBirthdate) {
        super();
        mId = aId;
        mUsername = aUsername;
        mPassword = aPassword;
        mEmail = aEmail;
        mBirthdate = aBirthdate;
    }

    ....
} 
```

**控制器**

```
...    
@Controller("register")
@Scope("session")
public class Register implements Serializable {

    private static final long serialVersionUID = 1L;

    private User mUser;
    private List<User> mUsers = new LinkedList<User>();
    private char[] mChars = "abcdefghijklmnopqrstuvwxyz".toCharArray();

    public Register() {
    }

    @PostConstruct
    public void init() {
        mUser = new User();

        for (int i = 0; i < 10; i++) {
            mUsers.add(new User(1L, randStr(3)+"_user", randStr(1)+"pass", randStr(1)+"user@mail.com", new Date()));
        }
    }

    public User getUser() {
        return mUser;
    }

    public List<User> getUsers() {
        return mUsers;
    }

    public void submit() {
        FacesMessage msg = new FacesMessage("Registration successful");
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }
    private String randStr(int len){
        StringBuilder sb = new StringBuilder();
        Random random = new Random();
        for (int i = 0; i < len; i++) {
            char c = mChars[random.nextInt(mChars.length)];
            sb.append(c);
        }
        return sb.toString();
    }

} 
```

**看法**

```
<p:dataTable value="#{register.users}" var="usr" paginator="true" rows="4" sortBy="#{usr.username}">
    <p:column headerText="a" sortBy="#{usr.username}">
        <h:outputText value="#{usr.username}"></h:outputText>
    </p:column>
    <p:column headerText="b" sortBy="#{usr.password}">
        <h:outputText value="#{usr.password}"></h:outputText>
    </p:column>
    <p:column headerText="c" sortBy="#{usr.email}">
        <h:outputText value="#{usr.email}"></h:outputText>
    </p:column>
</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:08:59.750

好的，我发现了问题所在。

虽然它使用 AJAX，但数据表必须包装在`<h:form>`.

但是在`view`不需要的范围内，奇怪...

感谢您的友好合作，不胜感激。

# php - 从 Vagrant 中的 Chef Recipe 运行 PHP 脚本时 MySQL 无法正常工作

> ID：15506116
> 
> 赞同：3
> 
> 时间：2013-03-19T17:12:20.167
> 
> 标签：php, mysql, virtual-machine, chef-infra, vagrant

我有一个预装了 PHP、Apache2 和 MySQL 的自定义虚拟机基础盒。所以我可以使用这个盒子启动虚拟机，它不需要从 Chef Cookbooks 安装上述任何内容。

但是，我正在尝试安装一本 Chef Cookbook，但它失败了。我尝试安装的 Cookbook 运行一个 PHP 脚本，该脚本连接并使用 MySQL 数据库。

它失败的原因是因为PHP无法连接到mysql服务器。我认为这是因为在脚本尝试连接时 MySQL 尚未启动（或准备好）。它仅在我启动 VM 时失败。当我提供它（流浪者提供）时，它可以工作。所以这就是为什么我认为当 PHP 脚本尝试连接时 MySQL 还没有准备好。

错误：

> mysql_connect(): 无法通过socket '/var/run/mysqld/mysqld.sock' (2) in .....

厨师食谱食谱中的代码：

```
execute "doInstall" do
  cwd "/vagrant"
  command "php path/to/my/script.php"
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:27:01.823

也许你可以做一个

```
service "mysql" do
  action :start, :immediately
end 
```

在你的食谱开始时，或者只是做一个启发式

```
execute "doInstall" do
  cwd "/vagrant"
  command "sleep 10; php path/to/my/script.php"
end 
```

这对我来说似乎有点脏，但可能会很快解决您的问题。

# paypal - 贝宝沙盒 - 多个问题

> ID：15506117
> 
> 赞同：4
> 
> 时间：2013-03-19T17:12:23.130
> 
> 标签：paypal, paypal-sandbox

[咆哮] 我已经使用新的 PayPal 开发环境了。虽然它看起来很酷，但有几个严重的问题使它成为 PayPal 的尴尬版本 [/rant]

# 主要问题：无论我做什么，测试资金 0 美元

我尝试了以下方法：

*   删除个人测试账号并重新创建
*   从“银行账户”添加资金（但我必须使用 SSN/TaxID 确认我的身份，我虚构地不知道）
*   添加假信用卡（4111111111111111 已在使用；虚构的卡号已实际验证，无法使用）

# 其他问题/投诉：

**无需登录真实的 PayPal 帐户即可对结帐工作流程进行 QA**

我的客户可以创建她自己的测试帐户并使用它，但是我必须更改结帐工作流程的企业电子邮件地址。如果我们中的一个人无法访问另一个人的真实 PayPal 帐户，我们就无法同时进行测试。这种改变在理论上是一个好主意，但还没有实现。

**严重的 cookie 问题**

[“注销”功能（ https://developer.paypal.com/cgi-bin/devscr?cmd=_logout](https://developer.paypal.com/cgi-bin/devscr?cmd=_logout)）给出 503 错误已经够糟糕了。我们确实必须不断地清除 cookie，以排除任何不是由 cookie 引起的错误。

**无法从开发人员测试帐户页面登录沙盒站点**

每个测试帐户下都有一个不错的小助手链接，上面写着“沙盒站点”。有人会认为单击它会使您使用该帐户登录到沙箱。没有。

# 跆拳道，贝宝

自从本月初推出新的开发者网站以来，我遇到了各种问题（此处列出的问题除外）。我从来没有见过 PayPal 对问题的正式认可。“嘿，我们正在处理它！”的状态消息。会给我我需要向客户解释我的延误​​。

我非常喜欢新界面。如果它有效，我会更喜欢它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:55:09.337

**主要问题：无论我做什么，测试资金 0 美元**

我们目前正在努力解决此问题。我将在今天晚些时候分享有关此问题的更多详细信息。我一定会在有更新后立即更新我的答案。此时，您将在创建新帐户时遇到间歇性成功。作为一种解决方法，您可以登录您的一个测试账户并手动从银行账户中添加资金。启动转移后，进入该交易的详细信息并清除待处理的转移。这应该允许您将资金添加到您的帐户。

更新：这个问题现在应该已经解决了。

**无需登录真实的 PayPal 帐户即可对结帐工作流程进行 QA**

我们知道，必须使用真实的 PayPal 帐户使用 PayPal 访问权限登录是令人沮丧的。然而，这确实消除了为 PayPal.com 和 developer.paypal.com 维护两个单独帐户的需要。我将确保与我们的沙盒团队分享此反馈。

**严重的 cookie 问题**

我们正在努力解决导致这些错误的登录问题。我将确保在获得有关此问题修复的更多详细信息后立即更新此问题。正如您所提到的，解决方法是清除缓存和 cookie 或尝试其他网络浏览器。

更新：这个问题也应该得到解决。如果您在登录时遇到任何问题，请告诉我。

**无法从开发人员测试帐户页面登录沙盒站点**

这是很好的反馈。我将与我们的沙盒团队分享这个，看看我们是否可以在未来的版本中解决这个问题。

**单击沙盒中的配置文件页面时出错**

这是一个已知问题，昨晚进行了修复以解决此问题。尝试访问沙盒帐户中的个人资料页面时，您不应再收到错误消息。

谢谢，

# r - 使用 R 中的 tm 包为多个语料库制作前 N 个频繁项的数据框

> ID：15506118
> 
> 赞同：15
> 
> 时间：2013-03-19T17:12:23.570
> 
> 标签：r, text-mining, corpus, tm

我用R 中的包`TermDocumentMatrix`创建了几个 s 。`tm`

我想在每组文档中找到 10 个最常用的术语，最终得到如下输出表：

```
corpus1   corpus2
"beach"   "city"
"sand"    "sidewalk"
...        ...
[10th most frequent word] 
```

根据定义，`findFreqTerms(corpus1,N)`返回出现 N 次或更多的所有术语。要手动执行此操作，我可以更改 N 直到返回 10 个左右的术语，但输出`findFreqTerms`按字母顺序列出，所以除非我选择了正确的 N，否则我实际上不知道哪些是前 10 个。我怀疑这个涉及操纵 TDM 的内部结构，您可以使用`str(corpus1)`R [tm 包创建 N 最常见术语的矩阵，](https://stackoverflow.com/questions/11508728/r-tm-package-create-matrix-of-nmost-frequent-terms)但这里的答案对我来说非常不透明，所以我想重新表述这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-19T17:52:41.930

这是在文档术语矩阵中查找前 N 个术语的一种方法。简而言之，您将 dtm 转换为矩阵，然后按行总和排序：

```
# load text mining library    
library(tm)

# make corpus for text mining (data comes from package, for reproducibility) 
data("crude")
corpus <- Corpus(VectorSource(crude))

# process text (your methods may differ)
skipWords <- function(x) removeWords(x, stopwords("english"))
funcs <- list(tolower, removePunctuation, removeNumbers, stripWhitespace, skipWords)
a <- tm_map(corpus, FUN = tm_reduce, tmFuns = funcs)
a.dtm1 <- TermDocumentMatrix(a, control = list(wordLengths = c(3,10))) 
```

这是您 Q 中的方法，它以字母顺序返回单词，并不总是很有用，正如您所注意到的......

```
N <- 10
findFreqTerms(a.dtm1, N)

[1] "barrel"     "barrels"    "bpd"        "crude"      "dlrs"       "government" "industry"   "kuwait"    
[9] "market"     "meeting"    "minister"   "mln"        "month"      "official"   "oil"        "opec"      
[17] "pct"        "price"      "prices"     "production" "reuter"     "saudi"      "sheikh"     "the"       
[25] "world" 
```

以下是您可以按照其丰富程度来获取前 N 个单词的方法：

```
m <- as.matrix(a.dtm1)
v <- sort(rowSums(m), decreasing=TRUE)
head(v, N)

oil prices   opec    mln    the    bpd   dlrs  crude market reuter 
86     48     47     31     26     23     23     21     21     20 
```

对于几个文档术语矩阵，您可以执行以下操作：

```
# make a list of the dtms
dtm_list <- list(a.dtm1, b.dtm1, c.dtm1, d.dtm1)
# apply the rowsums function to each item of the list
lapply(dtm_list, function(x)  sort(rowSums(as.matrix(x)), decreasing=TRUE)) 
```

那是你想做的吗？

向我第一次看到这种方法的 Ian Fellows 的[wordcloud包致敬。](http://cran.r-project.org/web/packages/wordcloud/index.html)

**更新：在下面的评论之后，这里有更多细节......**

以下是一些数据，用于制作具有多个语料库的可重现示例：

```
examp1 <- "When discussing performance with colleagues, teaching, sending a bug report or searching for guidance on mailing lists and here on SO, a reproducible example is often asked and always helpful. What are your tips for creating an excellent example? How do you paste data structures from r in a text format? What other information should you include? Are there other tricks in addition to using dput(), dump() or structure()? When should you include library() or require() statements? Which reserved words should one avoid, in addition to c, df, data, etc? How does one make a great r reproducible example?"

examp2 <- "Sometimes the problem really isn't reproducible with a smaller piece of data, no matter how hard you try, and doesn't happen with synthetic data (although it's useful to show how you produced synthetic data sets that did not reproduce the problem, because it rules out some hypotheses). Posting the data to the web somewhere and providing a URL may be necessary. If the data can't be released to the public at large but could be shared at all, then you may be able to offer to e-mail it to interested parties (although this will cut down the number of people who will bother to work on it). I haven't actually seen this done, because people who can't release their data are sensitive about releasing it any form, but it would seem plausible that in some cases one could still post data if it were sufficiently anonymized/scrambled/corrupted slightly in some way. If you can't do either of these then you probably need to hire a consultant to solve your problem" 

examp3 <- "You are most likely to get good help with your R problem if you provide a reproducible example. A reproducible example allows someone else to recreate your problem by just copying and pasting R code. There are four things you need to include to make your example reproducible: required packages, data, code, and a description of your R environment. Packages should be loaded at the top of the script, so it's easy to see which ones the example needs. The easiest way to include data in an email is to use dput() to generate the R code to recreate it. For example, to recreate the mtcars dataset in R, I'd perform the following steps: Run dput(mtcars) in R Copy the output In my reproducible script, type mtcars <- then paste. Spend a little bit of time ensuring that your code is easy for others to read: make sure you've used spaces and your variable names are concise, but informative, use comments to indicate where your problem lies, do your best to remove everything that is not related to the problem. The shorter your code is, the easier it is to understand. Include the output of sessionInfo() as a comment. This summarises your R environment and makes it easy to check if you're using an out-of-date package. You can check you have actually made a reproducible example by starting up a fresh R session and pasting your script in. Before putting all of your code in an email, consider putting it on http://gist.github.com/. It will give your code nice syntax highlighting, and you don't have to worry about anything getting mangled by the email system."

examp4 <- "Do your homework before posting: If it is clear that you have done basic background research, you are far more likely to get an informative response. See also Further Resources further down this page. Do help.search(keyword) and apropos(keyword) with different keywords (type this at the R prompt). Do RSiteSearch(keyword) with different keywords (at the R prompt) to search R functions, contributed packages and R-Help postings. See ?RSiteSearch for further options and to restrict searches. Read the online help for relevant functions (type ?functionname, e.g., ?prod, at the R prompt) If something seems to have changed in R, look in the latest NEWS file on CRAN for information about it. Search the R-faq and the R-windows-faq if it might be relevant (http://cran.r-project.org/faqs.html) Read at least the relevant section in An Introduction to R If the function is from a package accompanying a book, e.g., the MASS package, consult the book before posting. The R Wiki has a section on finding functions and documentation"

examp5 <- "Before asking a technical question by e-mail, or in a newsgroup, or on a website chat board, do the following:  Try to find an answer by searching the archives of the forum you plan to post to. Try to find an answer by searching the Web. Try to find an answer by reading the manual. Try to find an answer by reading a FAQ. Try to find an answer by inspection or experimentation. Try to find an answer by asking a skilled friend. If you're a programmer, try to find an answer by reading the source code. When you ask your question, display the fact that you have done these things first; this will help establish that you're not being a lazy sponge and wasting people's time. Better yet, display what you have learned from doing these things. We like answering questions for people who have demonstrated they can learn from the answers. Use tactics like doing a Google search on the text of whatever error message you get (searching Google groups as well as Web pages). This might well take you straight to fix documentation or a mailing list thread answering your question. Even if it doesn't, saying “I googled on the following phrase but didn't get anything that looked promising” is a good thing to do in e-mail or news postings requesting help, if only because it records what searches won't help. It will also help to direct other people with similar problems to your thread by linking the search terms to what will hopefully be your problem and resolution thread. Take your time. Do not expect to be able to solve a complicated problem with a few seconds of Googling. Read and understand the FAQs, sit back, relax and give the problem some thought before approaching experts. Trust us, they will be able to tell from your questions how much reading and thinking you did, and will be more willing to help if you come prepared. Don't instantly fire your whole arsenal of questions just because your first search turned up no answers (or too many). Prepare your question. Think it through. Hasty-sounding questions get hasty answers, or none at all. The more you do to demonstrate that having put thought and effort into solving your problem before seeking help, the more likely you are to actually get help. Beware of asking the wrong question. If you ask one that is based on faulty assumptions, J. Random Hacker is quite likely to reply with a uselessly literal answer while thinking Stupid question..., and hoping the experience of getting what you asked for rather than what you needed will teach you a lesson." 
```

现在让我们以通常的方式稍微处理一下示例文本。首先将字符向量转换为语料库。

```
library(tm)
list_examps <- lapply(1:5, function(i) eval(parse(text=paste0("examp",i))))
list_corpora <- lapply(1:length(list_examps), function(i) Corpus(VectorSource(list_examps[[i]]))) 
```

现在删除停用词、数字、标点符号等。

```
skipWords <- function(x) removeWords(x, stopwords("english"))
funcs <- list(tolower, removePunctuation, removeNumbers, stripWhitespace, skipWords)
list_corpora1 <- lapply(1:length(list_corpora), function(i) tm_map(list_corpora[[i]], FUN = tm_reduce, tmFuns = funcs)) 
```

将已处理的语料库转换为术语文档矩阵：

```
list_dtms <- lapply(1:length(list_corpora1), function(i) TermDocumentMatrix(list_corpora1[[i]], control = list(wordLengths = c(3,10)))) 
```

获取每个语料库中出现频率最高的单词：

```
top_words <- lapply(1:length(list_dtms), function(x)  sort(rowSums(as.matrix(list_dtms[[x]])), decreasing=TRUE)) 
```

并按照指定的形式reshape成dataframe：

```
library(plyr)
top_words_df <- t(ldply(1:length(top_words), function(i)  head(names(top_words[[i]]),10)))
colnames(top_words_df) <- lapply(1:length(list_dtms), function(i) paste0("corpus",i))
top_words_df

    corpus1    corpus2      corpus3    corpus4     corpus5    
V1  "example"  "data"       "code"     "functions" "answer"   
V2  "addition" "people"     "example"  "prompt"    "help"     
V3  "data"     "synthetic"  "easy"     "relevant"  "try"      
V4  "how"      "able"       "email"    "book"      "question" 
V5  "include"  "actually"   "include"  "keywords"  "questions"
V6  "what"     "bother"     "recreate" "package"   "reading"  
V7  "when"     "consultant" "script"   "posting"   "answers"  
V8  "are"      "cut"        "check"    "read"      "people"   
V9  "avoid"    "form"       "data"     "search"    "search"   
V10 "bug"      "happen"     "mtcars"   "section"   "searching" 
```

你能适应它来处理你的数据吗？如果不是，请编辑您的问题以更准确地显示您的数据的样子。

# android - android ndk-build 未定义的参考，但 NM 说它在那里

> ID：15506120
> 
> 赞同：3
> 
> 时间：2013-03-19T17:12:39.483
> 
> 标签：android, c++, android-ndk, ld, nm

已编辑：帖子末尾的解决方案。

我正在使用 NDK r8d、使用来自 NDK 的示例项目 hello-jni 以及使用 ARM 独立工具链编译的一些静态库为 android 构建一个共享库。

NDK-BUILD 抱怨未定义的引用。查看链接器命令及其输出：

```
c:/android/ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-
androideabi-g++ -Wl,-soname,libhello-jni.so -shared --sysroot=c:/android/ndk/platforms
/android-9/arch-arm ./obj/local/armeabi/objs-debug/hello-jni/hello-jni.o ./obj/local
/armeabi/libDataProvider.a ./obj/local/armeabi/libPDF.a ./obj/local/armeabi/libMisc.a
 ./obj/local/armeabi/libNetwork.a ./obj/local/armeabi/libboost_filesystem.a ./obj/local
/armeabi/libcryptoeng.a ./obj/local/armeabi/libcryptopp.a ./obj/local/armeabi
/libMiniSstructs.a ./obj/local/armeabi/libOBSstructs.a ./obj/local/armeabi
/libSerialization.a ./obj/local/armeabi/libstdc++.a ./obj/local/armeabi
/libboost_iostreams.a ./obj/local/armeabi/libboost_thread.a ./obj/local/armeabi/libz.a 
./obj/local/armeabi/libboost_system.a -no-canonical-prefixes -Wl,--no-undefined 
-Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -lc -lm -o ./obj/local/armeabi/libhello-jni.so

c:/android/ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/../lib/gcc
/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld.exe: ./obj/local
/armeabi/libNetwork.a(CertificatesManager.o): in function 
OBInfo::GetVersionAsNumber():c:\trunk\src\libMisc/obinfo.h:19: error: 
undefined reference to 'OBInfo::versionAsNumber'collect2: ld returned 1 exit status 
```

然而，NM 说这个符号实际上是存在的：

```
$ nm Tests/hello-jni/obj/local/armeabi/libMisc.a --demangle | grep versionAsNumber
00000000 D OBInfo::versionAsNumber 
```

简化的 OBInfo.h：

```
class OBInfo
{
 public:    
    static uint32_t GetVersionAsNumber() {return versionAsNumber;};
 private:
    static uint32_t versionAsNumber;
}; 
```

简化的 OBInfo.cpp

```
#include "obinfo.h"
#include "version_info.h"
uint32_t OBInfo::versionAsNumber = VERSION_AS_NUMBER; 
```

如果我删除 -Wl,--no-undefined 链接器没有错误结束。为什么 LD 找不到符号，但 NM 可以？（顺便说一句：NM 来自 MSYS，而 LD 来自工具链）

编辑：我解决了在 Android.mk LOCAL_STATIC_LIBRARIES 变量中更改静态库顺序的问题。我还重新编译了一些预构建的库，因为有些是在没有优化 -O0 的情况下编译的，而另一些是 -O2 优化的。

# html - 最小高度不适用于父级

> ID：15506123
> 
> 赞同：1
> 
> 时间：2013-03-19T17:12:48.380
> 
> 标签：html, css, css-float

`min-height``float:left`在我将属性设置为它的子 div后，它不适用于父div。

你可以帮帮我吗 。

```
<style type="text/css">
*{ margin: 0 auto; padding: 0; }

 #wrapperd{
 width : 500px;
 border : 1px solid red;
 min-height:200px;
 }

 #test {
 border:2px solid blue; 
 width:600px; 
 float:left; 
 height:500px;

  }
 </style> 
```

HTML 代码

```
 <div id = "wrapperd"> <!-- Parent Div -->
 <div id = "test"> </div> <!-- Child Div -->
 </div> 
```

演示链接：- [http://jsfiddle.net/rushijogle/cFX68/2/](http://jsfiddle.net/rushijogle/cFX68/2/)

提前感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:01:02.680

经典清除修复问题：
1）将父级设置为溢出：隐藏；如上所述。唯一的问题是是否有任何内容会溢出父框。
2）我喜欢使用的另一个明确的修复技巧是：[http](http://nicolasgallagher.com/micro-clearfix-hack/) ://nicolasgallagher.com/micro-clearfix-hack/我认为这与 Cherry 的评论相似......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:17:16.447

你可以做两件事。一种是添加清除元素（与浮动元素一起`clear: left`或之后。`clear: both`

[http://jsfiddle.net/ExplosionPIlls/cFX68/3/](http://jsfiddle.net/ExplosionPIlls/cFX68/3/)

另一种是添加`overflow: hidden`到父 div，它的作用是将 div 的高度“拉”下，使其包围更高的浮动 div。

[http://jsfiddle.net/ExplosionPIlls/cFX68/4/](http://jsfiddle.net/ExplosionPIlls/cFX68/4/)

请注意，这对子 div的*宽度没有任何影响。*

# android - 在 Handler#postDelayed(Runnable, long) 中启动另一个活动会产生“SPAN_EXCLUSIVE_EXCLUSIVE 跨度不能有零长度”

> ID：15506124
> 
> 赞同：0
> 
> 时间：2013-03-19T17:12:51.800
> 
> 标签：android, android-activity, android-handler

当我开始一项活动时，`Handler#postDelayed(Runnable, long)`我收到一条错误日志消息（是的，重复了两次）：

```
03-19 18:39:26.628: E/SpannableStringBuilder(11502): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-19 18:39:26.628: E/SpannableStringBuilder(11502): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length 
```

应用程序不会崩溃，但是总是看到这个错误很烦人。在此示例中，我在 LogCat 中没有得到其他输出。

我的第一个活动：

```
public class ActivityOne extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        startActivityTwoDelayed();
    }

    private void startActivityTwoDelayed() {
        new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                Intent captureIntent = new Intent(ActivityOne.this,
                        ActivityTwo.class);
                startActivity(captureIntent);
            }
        }, 1000);
    }
} 
```

我的第二个活动：

```
public class ActivityTwo extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }
} 
```

我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.test03"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".ActivityOne"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityTwo"
            android:label="@string/title_activity_main" >
        </activity>
    </application>

</manifest> 
```

# php - html/php SQL 填充导航栏不

> ID：15506125
> 
> 赞同：0
> 
> 时间：2013-03-19T17:12:54.110
> 
> 标签：php, html, sql, nav

这是我的 php 代码，用于通过 SQL 查询填充我的导航栏。我收到以下错误：

> 解析错误：语法错误，意外的 'index' (T_STRING)，期待 ',' 或 ';' 在第 102 行的 /home/hj016/public_html/SKSSTW/index1.php

```
<?php
$sqlCommand = "SELECT id, linklabel FROM pages "; 
$query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error()); 
while($row = mysqli_fetch_array($query )) 
{    
echo "<li><a href="index.php?pid=".$row['linklabel'].>".$row['linklabel']."</a></li>";     
}
?> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:14:19.287

改变

```
echo "<li><a href="index.php?pid=".$row['linklabel'].>".$row['linklabel']."</a></li>"; 
```

至

```
echo '<li><a href="index.php?pid='.$row['linklabel'].'">'.$row['linklabel'].'</a></li>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:14:29.880

双引号有问题，您正在关闭`echo`字符串，因为您没有转义它们。

我建议您对`echo`函数使用简单的字符串：

```
echo '<li><a href="index.php?pid="'.$row['linklabel'].'>"'.$row['linklabel'].'"</a></li>'; 
```

如果你使用双引号，你也可以`{` `}`结合转义标签使用`\`：

```
echo "<li><a href=\"index.php?pid=\"{$row['linklabel']}\">{$row['linklabel']}</a></li>'; 
```

另一个转义选项打开和关闭标签是：

```
echo "<li><a href=\"index.php?pid=".$row['linklabel']."\">".$row['linklabel']."</a></li>"; 
```

# c++ - 从 Typelist 子集创建函数指针

> ID：15506127
> 
> 赞同：3
> 
> 时间：2013-03-19T17:13:01.687
> 
> 标签：c++, templates, variadic-templates, typelist

[我有一个与这个](http://loki-lib.sourceforge.net/html/a00681.html)非常相似的 Typelist 实现。如果您不知道什么是类型列表：简而言之，它的行为类似于使用嵌套元组的可变参数模板。[你可以在这里](http://books.google.co.uk/books?id=aJ1av7UFBPwC&pg=PA64&lpg=PA64&dq=loki%20typelists&source=bl&ots=YRgG1oOi6Y&sig=kN6r9BrM2I8Se48TY7Nto3QOO-E&hl=en&sa=X&ei=vpJIUcigJLOy0AXzwYDgCw&ved=0CF8Q6AEwBQ#v=onepage&q=loki%20typelists&f=false)阅读更多关于它们的信息。

我想从这个类型列表的一个子集构建一个函数指针类型。该子集由索引列表（任何大小）定义，所需的操作在类型列表中查找这些索引，并使用这些类型作为参数定义函数上的指针类型。

API 看起来像：

```
#include "typelist.h"
// typelist definition
typedef Typelist<float, Typelist<double, Typelist<int, NullType>>> Pixel;

typedef FunctionFromFields<Pixel, 0, 2>::Type field_0_and_2;
// I want the definition above to be equivalent to:
// typedef void (*field_0_and_2)(float*, int*); 
```

假设这是可能的似乎是合理的，因为在编译时一切都是已知的，但我还没有找到正确的语法。

我不想使用可变参数模板来替换类型列表，但是它们可以用来定义指针类型。

有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:18:31.043

这应该相当容易。首先定义一个`typelist_nth`类型函数（留作练习；我假设你的 中有一个`typelist.h`）：

```
template<typename TL, int I> struct typelist_nth; 
```

然后使用可变参数模板构建函数类型：

```
template<typename TL, int... Is> struct FunctionFromFields {
    typedef void (*Type)(typename typelist_nth<TL, Is>::type *...);
}; 
```

# c# - 在我的表上执行 UPDATE 时出现 sql 错误

> ID：15506134
> 
> 赞同：-2
> 
> 时间：2013-03-19T17:13:18.740
> 
> 标签：c#, sql, sql-server-2008, tsql

错误信息

> 消息 2601，级别 14，状态 1，第 1 行无法在具有唯一索引“唯一键 RTU”的对象“dbo.RTU_ADDRESS”中插入重复键行。重复键值为 (2, 5, 4, 6, 500, 610, IUY )。该语句已终止。

表格脚本

```
USE [hts]
GO

/****** Object:  Table [dbo].[RTU_ADDRESS]    Script Date: 03/19/2013 21:07:19 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[RTU_ADDRESS](
    [RowNo] [int] IDENTITY(1,1) NOT NULL,
    [StationId] [int] NULL,
    [SystemId] [int] NULL,
    [CCNumber] [int] NULL,
    [LineNumber] [int] NULL,
    [RTUNumber] [int] NULL,
    [SRTUNumber] [int] NULL,
    [Description] [char](100) NOT NULL,
    [SDescription] [char](100) NOT NULL,
    [Area_ID] [char](10) NOT NULL
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO 
```

索引脚本

```
USE [hts]
GO

/****** Object:  Index [Unique Key RTU]    Script Date: 03/19/2013 21:08:31 ******/
CREATE UNIQUE NONCLUSTERED INDEX [Unique Key RTU] ON [dbo].[RTU_ADDRESS] 
(
    [StationId] ASC,
    [SystemId] ASC,
    [CCNumber] ASC,
    [LineNumber] ASC,
    [RTUNumber] ASC,
    [SRTUNumber] ASC,
    [Area_ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

C#代码：

```
SqlDataAdapter sqlAdapter = null;
                strSelectCmd = "SELECT RowNo FROM RTU_ADDRESS";
                SqlCommand sqlCmd = new SqlCommand();
                sqlCmd.Connection = m_SqlConn;
                sqlCmd.CommandText = strSelectCmd;
                int i = Convert.ToInt32(sqlCmd.ExecuteScalar());
                sqlAdapter = new SqlDataAdapter();
                sqlAdapter.SelectCommand = sqlCmd;

                strInsCmd = "UPDATE RTU_ADDRESS SET RTUNumber='" + rtunum.Text + "', SRTUNumber='" + srtunum.Text + "', Description='" + desc.Text + "', SDescription='" + sdesc.Text + "' WHERE Area_ID='" + area_ID.Text + "' AND StationId='" + station.Text + "' AND SystemId='" + sys.Text + "' AND CCNumber='" + ccnum.Text + "' AND LineNumber='" + linenum.Text + "'";

                strErrorMsg = Utilities.ExecuteSQLCommand(m_SqlConn, strInsCmd);
                string check = "duplicate";
                bool d = check.Any(strErrorMsg.Contains);
                if (d == true)
                {
                    MessageBox.Show(" Duplicates Entries Found", "Database Insertion");
                }
                else if (string.IsNullOrEmpty(strErrorMsg) == false)
                {
                    MessageBox.Show(this, "Error!Unable to Add New RTU Configurations!", "RTU Configurations error");
                }
                else
                {
                    d = false;
                    this.Close();
                } 
```

我现在不知道该怎么做，我没有放任何重复项。

我只想更新 RTUNumber、SRTUNumber、Description 和 SDescription，同时保持我的 stationID、systemID、CCNumber、LineNumber 和 Area_ID 不变。请帮忙

更新：选择语句

```
SELECT * FROM RTU_ADDRESS WHERE Area_ID='IUY ' AND StationId='2' AND SystemId='5' AND CCNumber='4' AND LineNumber='6' 
```

给我 2 个结果，但 RTUNumber 和 SRTUNumber 不同。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:16:56.217

好吧，很明显，您尝试执行的更新将在您的表中生成重复项。您是否尝试过根据您尝试用于更新的值对表进行选择？您很可能会找到现有的记录...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:13:28.150

查看更新语句的 where 子句中的条件，如果有多个记录具有相同的 AreaId、SystemId、StationId、CCNumber 和 LineNumber，您将收到此错误，因为您尝试使用相同的 RTUNumber 和 SRTUNumber 更新它们。您可以通过运行以下 sql 来检查：

```
SELECT AreaId, SystemId, StationId, CCNumber, LineNumber, COUNT(*)
FROM RTU_ADDRESS
GROUP BY AreaId, SystemId, StationId, CCNumber, LineNumber
HAVING COUNT(*) > 1 
```

如果返回任何行，那么您将收到“重复”错误。

事实上，你的编辑版本说情况就是这样。尽管这两条记录可能具有不同的 SRTUNumber 和 RTUNumber，但您尝试在更新语句中为它们提供相同的 SRTUNumber 和 RTUNUMBER。

# android - 如何从一个功能广播消息并在另一个功能中收听

> ID：15506135
> 
> 赞同：0
> 
> 时间：2013-03-19T17:13:22.517
> 
> 标签：android

我正在开发其他人的大型复杂应用程序，其中代码 A、B、C、D 等的许多不同部分都需要图像。但总是调用相同的函数 Z。函数 Z 可能有也可能没有图像在它被调用的时候就准备好了，如果图像没有准备好，它会立即返回一个临时的，然后继续异步工作，获取正确的图像（可能来自网络）。我已经在代码 Z 中找到了在最终加载正确图像时执行的位置，但是现在我需要做的是以某种方式将这个事实传达给首先调用此函数的人，以便我可以说服原始调用者（A、B、C 等）重新调用函数 Z。

有没有标准的方法来做到这一点？我应该查什么？

# powershell - PowerShell 参数数组

> ID：15506157
> 
> 赞同：1
> 
> 时间：2013-03-19T17:14:30.107
> 
> 标签：powershell, powershell-2.0

我想创建一个支持参数数组的函数，类似于 VB.Net 中的 ParamArray：

```
function foo{ 

   param(
     $a,
     $b, 
     [Array]$arr
   )

   write-host "a: $a"
   write-host "b: $b"   
   write-host "arr: $arr"

   Foreach($s in $arr) {
     write-host $s
   }

} 

PS> foo -a "abc" -b "123" -c 456 -d 789 
```

不幸的是，没有找到参数“c”和“d”。有没有办法构建`Param()`定义来支持我的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:32:24.503

PowerShell 具有`$args`包含任何额外参数的自动变量。

尝试运行：

```
function foo {
    param(
        $a,
        $b
    )

    "a: $a"
    "b: $b"
    foreach($arg in $args) { 
        "Arg: $arg"
    }
}

foo -a 1 -b 2 3 4 5 
```

输出：

```
a: 1
b: 2
Arg: 3
Arg: 4
Arg: 5 
```

# matlab - matlab中的向量排序

> ID：15506163
> 
> 赞同：-2
> 
> 时间：2013-03-19T17:14:56.313
> 
> 标签：matlab

我有以下代码计算峰值及其索引并显示它们，但我想对峰值进行排序并显示，所以我的代码如下

```
function [peaks,peak_indices] = find_peaks(row_vector)
    A = [0 row_vector 0];
    j = 1;
    for i=1:length(A)-2
        temp=A(i:i+2);
        if(max(temp)==temp(2))
            peaks(j) = row_vector(i);

            peak_indices(j) = i;
            j = j+1;
        end
    end
end 
```

在通过以下方式实现它之后，它显示了我的输出

```
A = [2 1 3 5 4 7 6 8 9];
>> [peaks, peak_indices] = find_peaks(A)

peaks =

     2     5     7     9

peak_indices =

     1     4     6     9 
```

但不是直接显示峰值，我想以降序显示峰值，或者像这样 9 7 5 2，我知道 matlab 中存在排序函数，如下方式

```
b=[2 1 3 4 6 5];
>> sort(b)

ans =

     1     2     3     4     5     6 
```

但是有两个问题，首先它按升序排序，以及如何在我的第一个函数中使用排序函数以降序形式返回峰值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:17:57.930

你可以做：

```
peaks = sort(peaks, 'descend') 
```

要分别重新排序，也可以`peak_indices`从以下位置获取排序索引`sort`：

```
[peaks, idx] = sort(peaks, 'descend');  %// Sort peaks
peak_indices = peak_indices(idx);       %// Reorder peak indices accordingly 
```

# matplotlib - 在具有多个轴的 loglog 图中关闭网格

> ID：15506166
> 
> 赞同：4
> 
> 时间：2013-03-19T17:14:59.660
> 
> 标签：matplotlib

我想绘制一个带有两个 y 刻度的图形和一个 loglog 图。我按照[这里](http://matplotlib.org/examples/api/two_scales.html)给出的例子：

现在，我想关闭网格，因为如果我在小纸上打印它看起来很丑。然而，网格并没有消失！如果我使用非对数刻度执行此操作，一切正常，但不知何故这不起作用。

这是代码：

```
import numpy as np
import matplotlib.pyplot as plt
fig = plt.figure()
ax1 = fig.add_subplot(111)
t = np.arange(0.01, 10.0, 0.01)
s1 = np.exp(t)
ax1.loglog(t, s1)
plt.hold(False)
plt.draw()
plt.show() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T11:31:09.313

您可以使用[网格功能](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.grid)`ax1.grid(b=False)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T19:34:26.533

`fig = plt.subplots(m, n, subplot_kw={'xticks': [], 'yticks': []}) # m_by_n grid`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T04:13:29.520

[在关于axis_api](http://matplotlib.org/api/axis_api.html)的v1.5.3文档中说明了以下内容：

> `grid(self, b=None, which='major', axis='both', **kwargs)`
> 
> 打开或关闭轴网格；*b*是一个布尔值。（对于 MATLAB 兼容性，*b*也可以是字符串，“on”或“off”。）
> 
> 如果*b*是*None*并且`len(kwargs)==0`，切换网格状态。如果 提供了*kwargs*，则假定您需要一个网格，因此将*b*设置为*True*。

换句话说，调用`ax.grid()`应该在不需要知道现有状态的情况下打开和关闭网格。（回答上面 arbulgazar 的问题。我的声誉低于 50，所以无法回复评论。）

# graphviz - 自定义 sdl 节点形状

> ID：15506167
> 
> 赞同：3
> 
> 时间：2013-03-19T17:15:03.280
> 
> 标签：graphviz

Graphviz 支持[*SDL 形状*](http://www.graphviz.org/doc/info/shapes.html)，一个外部图像库：

![在此处输入图像描述](../Images/c2255a358199a60cc0c3525008906f65.png)

如何使用 SDL 节点形状？我试过了：

```
digraph foo {
    rankdir=LR;
    a [shape=sdl_stop, label=""];
    b;
    a -> b;
} 
```

和：

```
dot -Tpng sdl.dot  -o sdl.png 
```

这给出了以下警告：

```
Warning: using box for unknown shape sdl_stop 
```

代码，包括一个 makefile，[可以在 github 上找到](https://github.com/adamatan/graphviz_linked_list)。

**如何使用 SDL 形状作为 graphviz 节点图像？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T12:44:16.930

正如[Graphviz Shapes](http://www.graphviz.org/doc/info/shapes.html#sdlshapes)文档中所解释的，这些是旧版形状并且“可用作 PostScript 函数”。您正在使用 .png 输出处理器，因此它们不可用。

您可能希望自己绘制它们（或从您拥有的图像中剪辑），然后使用`<IMG SRC=... />`类似于 HTML 的节点中的符号从位图图像中包含它们以引用它们。

# jquery - 使用 jquery 动态创建输入元素

> ID：15506175
> 
> 赞同：-5
> 
> 时间：2013-03-19T17:15:21.567
> 
> 标签：jquery, eventtrigger

我用 jquery 添加了动态输入字段。现在我想用jquery“focusout”来做事件，但它没有触发......有什么想法吗？

这个输入是用 jQuery 动态创建的。

```
<input type="text" id="input_id" name="input_name" value="" />

$("#input_id").focusout(function(){
     alert("test");
}); 
```

已解决的更新：

```
$("#input_id").live('focusout', function() { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:21:53.310

在创建输入字段时，为输入元素提供一个 id。`<input type='text' id='myfield' />`现在你可以像下面这样编写聚焦/模糊的代码

```
$("#myfield").blur(function(){
    // Your code here
   // If you want to Get the value from that field ?
   var val1 = $("#myfield").val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:31:00.040

你正在寻找的是

```
$("#input_id").live('focusout', function() { 
```

# python - Python-Mysql：多次尝试连接 - 最佳实践

> ID：15506176
> 
> 赞同：0
> 
> 时间：2013-03-19T17:15:26.053
> 
> 标签：python, mysql, database-connection

我有以下数据库连接代码，最初我没有多次尝试的while循环，但后来我认为在真正失败之前进行多次尝试会更好。我的问题是，实现这一目标的最佳方法是什么？我应该使用计时器吗？并在再次尝试之前睡一会？

```
 while connect_attempts < 3:
        try:
            # dbname cann't have hyphen but host name can'
            db_name = self.language.replace('-','_') + 'db'
            print 'Connecting to DB ' + db_name
            logging.info("Connecting to Toolserver MySql Db: " + db_name)
            self.dbConnection = MySQLdb.connect(
                db=db_name,
                host=self.language + "someserver_name.org",
                read_default_file=os.path.expanduser("~/.my.cnf"))
            logging.info("Connection Successful: " + str(self.dbConnection))
            self.dbCursor = self.dbConnection.cursor(cursors.DictCursor)
        except MySQLdb.Error, e:
            logging.error("Unable to establish connection MySQL ERROR - attempt-" + str(connect_attempt), e.value)
            connect_attempts += 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:37:45.340

我认为默认参数是没有超时，如此[处所示](http://structure.usc.edu/mysqldb/MySQLdb-3.html)

您可以传递一个参数来设置超时，例如。10 秒后，此连接将被断开，并会再次尝试建立连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:06:04.093

根据 Sumeet 的建议，您应该在调用时设置超时`MySQLdb.connect()`。但是连接也可能由于许多其他原因而失败（例如，服务器因为太忙而立即拒绝连接，或者它处于某种维护模式——不是现实生活中的例子，只是想象一下）

你自己的循环也应该包括一个短暂的延迟。我会在您的异常处理程序中将执行延迟几秒钟。

# windows - 如何使用 IVMRSurface9 在 VMR9 IDirect3DSurface9 上绘制文本

> ID：15506183
> 
> 赞同：0
> 
> 时间：2013-03-19T17:15:52.520
> 
> 标签：windows, visual-c++, video, directshow, directx-9

我正在尝试构建一个就地转换过滤器，该过滤器插入到解码器和渲染器之间的 DirectShow 过滤器图中，目的是显示一些随每一帧而变化的覆盖文本。

我有转换过滤器工作，但我正在努力将文本写入传递给渲染器的图像。

我有以下用于 VMR9 的测试代码。

```
#define HR(x) if(FAILED(x)) { return x; }

HRESULT COverlay::Transform(IMediaSample* pSample)
{
    HR(pSample->GetMediaType(&pMt));
    if (pMt)
    {
        // Media type has changed grab the bitmap header so we have frame size etc.
        if (IsEqualGUID(pMt->formattype,FORMAT_VideoInfo))
        {
            VIDEOINFOHEADER* pVInfo = (VIDEOINFOHEADER*)pMt->pbFormat;
            ::memcpy(&bmi,&(pVInfo->bmiHeader),sizeof(BITMAPINFOHEADER));
        }
        else if (IsEqualGUID(pMt->formattype,FORMAT_VideoInfo2))
        {
            VIDEOINFOHEADER2* pVInfo = (VIDEOINFOHEADER2*)pMt->pbFormat;
            ::memcpy(&bmi,&(pVInfo->bmiHeader),sizeof(BITMAPINFOHEADER));
        }
        else
        {
            return S_FALSE;
        }
        DeleteMediaType(pMt);
    }

    IVMRSurface9* pvs = NULL;
    HR(pSample->QueryInterface(IID_IVMRSurface9, (void**)&pvs));

    IDirect3DSurface9* psfc;
    HR(pvs->GetSurface(&psfc));
    IDirect3DDevice9* pdev;
    HR(psfc->GetDevice(&pdev));

    if (_font == NULL)
    {
        // Create a font we can use to draw overlay text
        D3DXFONT_DESC fontDesc = {bmi.biHeight / 18,
                0,
                400,
                0,
                false,
                DEFAULT_CHARSET,
                OUT_TT_PRECIS,
                CLIP_DEFAULT_PRECIS,
            DEFAULT_PITCH,
                L"Arial"
        };

        _fontPosition.top = 0;
        _fontPosition.left = 0;
        _fontPosition.right = abs(bmi.biWidth);
        _fontPosition.bottom = abs(bmi.biHeight);

        HR(D3DXCreateFontIndirect(pdev,&fontDesc,&_font));
    }

    HR(pdev->BeginScene());

    //RECT qtr;
    //qtr.top = 0;
    //qtr.left = 0;
    //qtr.bottom = abs(bmi.biHeight)/4;
    //qtr.right = abs(bmi.biWidth)/4;
    //HR(pdev->ColorFill(psfc,&qtr,D3DCOLOR_ARGB(0xFF,0,0,0)));

    int x = _font->DrawText(NULL,L"Hello", -1, &_fontPosition, DT_CENTER|DT_VCENTER, 0xffffffff);

    HR(pdev->EndScene());

    //HR(pdev->Present(NULL,NULL,NULL,NULL));

    pdev->Release();
    psfc->Release();
    pvs->Release();
} 
```

使用此代码，在播放视频时，如果我移动或调整视频窗口的大小，我只会看到框架上的文本。在正常播放期间，文本不可见，当我移动或调整窗口大小时，文本仅在移动或调整大小正在进行时才可见。

我正在使用 graphedit 在 W7 64 上以 32 位模式运行图形。

我已经尝试过，无论是否调用 Present，我都遇到了同样的问题。

为小矩形着色的注释代码在所有情况下都能正常工作。

我有一个定制的源过滤器将 H264 NAL 流馈送到连接到我的覆盖过滤器（包含上面的代码）的 ffdshow 解码器，该过滤器又连接到 VMR9。

如果我使用不同的解码后帧格式，问题不会改变，我看到 NV12 和 RGB32 的症状相同。

我猜这个问题在于我缺乏与 D3D 渲染管道相关的知识。谁能告诉我如何正确显示我的文本叠加层？

谢谢

# android - 将特殊字符转换为字符串

> ID：15506186
> 
> 赞同：0
> 
> 时间：2013-03-19T17:15:55.493
> 
> 标签：android, string, sockets, inputstream

我被困在这个奇怪的问题上。我正在做的是通过蓝牙与 2 个设备通信。当我发送像 ß à æ é 这样的特殊字符时，我会收到这样的问号 ????? 在另一台设备上。这是接收端的代码

```
private class ConnectedThread extends Thread {

        private final Socket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

        public ConnectedThread(Socket socket) {
            Log.d("ConnectionService", "create ConnectedThread");
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the BluetoothSocket input and output streams
            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) {
                Log.d("ConnectionService", "temp sockets not created", e);
            }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;
        }

        public void run() {
            Log.i("ConnectionService", "BEGIN mConnectedThread");

            byte[] buffer = new byte[4096];
            int bytes;

            // Keep listening to the InputStream while connected
            while (true) {
                try {
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer);

                    if(bytes==0){
                        break;
                    }
                    String message = new String(buffer, 0, bytes);
                    Log.d("PC-DATA", message);
                    inputAnalyzer(message);

                } catch (IOException e) {
                    Log.d("ConnectionService", "disconnected", e);
                    connectionLost();
                    break;
                }
            }

            connectionLost();
        }

        public void write(byte[] buffer) {
            try {
                mmOutStream.write(buffer);
            } catch (IOException e) {
                Log.d("ConnectionService", "Exception during write", e);
            }
        }

        public void cancel() {
            try {

                mmSocket.close();
                connection = false;
            } catch (IOException e) {
                Log.d("ConnectionService", "close() of connect socket failed",
                        e);
            }
        }
    } 
```

从输入流中读取后，我以这种方式将缓冲区转换为字符串。

```
String message = new String(buffer, 0, bytes); 
```

这是错误的还是我缺少的其他东西！有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:25:39.573

```
String message = new String(buffer, 0, bytes); 
```

切勿在不提及正确字符集的情况下将字节转换为字符表示。改用这个。

```
String(byte[] bytes, int offset, int length, String charsetName) 
```

UTF-8 应该能够显示大多数特殊字符。如果它不适合您的情况，请使用涵盖您希望客户端接收的字符的字符集。

# android - 在什么情况下应该使用 INVISIBLE 而不是 GONE？

> ID：15506189
> 
> 赞同：8
> 
> 时间：2013-03-19T17:16:11.380
> 
> 标签：android

对于`View`有时可见有时不可见的，取决于用户的操作，（留在同一个活动中）什么是可取的？

```
myView.setVisibility(View.INVISIBLE); // or
myView.setVisibility(View.GONE); 
```

没有其他元素取决于`myView`的大小或尺寸，因此图形结果是相同的。

由于 INVISIBLE 不会改变视图的尺寸，我想它比 GONE 更可取，因为使用 GONE 我们可能不得不不必要地测量和重绘其他视图。然后重新测量并在`myView`再次变为可见时重新绘制它们。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-19T17:23:36.880

考虑对测量的影响，您走在正确的轨道上。哪个更有效取决于您更改视图可见性的频率。

例如，如果视图在大部分时间不可见，那么让它`GONE`可能会更有效，因为系统不会在需要调整屏幕上的其他视图时不必要地测量和布置您的不可见视图。

另一方面，如果视图在可见和不可见之间频繁变化，您可能会获得更好的性能，`INVISIBLE`因为您可能会避免在每次转换时额外测量/布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T11:30:08.520

我想从我这边添加一些经验：

我有一个动画按钮（使用`ValueAnimator`）。按钮从一侧移动到另一侧。

此按钮将切换列表的内容。

*   第一种方法：使用一个列表视图并更改适配器 => 不流畅；“按钮移动动画”跳转到它的结束位置，因为新适配器的加载需要 UI 线程的太多时间。该按钮只有 200 毫秒的时间来执行它的动画，而这个时间完全由`ListView`.
*   我添加了第二个`ListView`，使用`ViewSwitcher`=> 相同的问题。
*   因为`ViewSwitcher`实际上只是将视图设置为**VISIBLE**或**GONE ，所以我希望在将列表设置为****VISIBLE**时重绘会花费很多 UI 线程时间。所以我现在做的是添加一个`FrameLayout`，把两个`ListView`s 放在那里并将它设置为**INVISIBLE**而不是**GONE**。现在看不到口吃了！

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-19T17:20:03.657

我的其他元素不依赖于您的视图的可见性，那么您可以使用它们中的任何一个......两者都将用于相同的目的。

# ios - 当我尝试导入它时，为什么它说找不到我的课程，而它显然在侧边栏中？

> ID：15506193
> 
> 赞同：1
> 
> 时间：2013-03-19T17:16:22.283
> 
> 标签：ios, objective-c, xcode, ios5, ios6

我收到此错误：

![在此处输入图像描述](../Images/703c12903483264a0c7eeff352d9ed26.png)

这是怎么回事？它只是随机停止工作，尽管 ArticleCell.h 就在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:28:15.637

很可能，当您最初添加文件时，**您仅将其添加为参考**（而不是复制它）。当您稍后移动项目或引用指向的文件时，XCode 不再知道在哪里查找它

将文件重新添加到您的项目中，**确保选中复选框以制作副本**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:33:59.457

尝试这个：

从左侧面板中选择 .m 文件，然后为该文件的右侧面板*显示文件检查器*。 ![参考这张图片](../Images/6eb81cc1259eb79018c2ec0a6706434f.png)

检查是否选中了针对您的项目目标的复选标记。如果没有，请检查它。

还有一件事：

导入时，您必须交叉检查是否将此文件复制到目标。

然后清理您的项目并尝试重新构建。

# jquery - 从 iframe 调用 colorbox 关闭

> ID：15506197
> 
> 赞同：1
> 
> 时间：2013-03-19T17:16:41.153
> 
> 标签：jquery, iframe, colorbox

我正在尝试从 iframe 调用 colorbox close() 函数。这就是我所拥有的。

主页

```
 <script>
        $(document).ready(function(){
            $("#click").colorbox({width:"60%",
                        height:"60%",
                        iframe:true

            });
        });
    </script>

     <a href="login.html" id="click">Click Me!</a> 
```

登录.html

```
 <!DOCTYPE html>
     <html>
          <head>
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
          <script src="jquery.colorbox.js"></script>
    <script>
        $(document).ready(function(){
            setTimeout(function() {
                parent.jQuery.fn.colorbox.close();
            }, 3000);
        });
    </script>
    </head><body></body>
</html> 
```

调用 settimeout 时出现此错误。

> 未捕获的类型错误：无法读取未定义的属性“fn”

我试图按照这个线程中的答案。 [如何关闭 iframe 中的颜色框？](https://stackoverflow.com/questions/2101011/how-to-close-colorbox-within-iframe)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-08T15:40:17.040

我们可以用

> parent.jQuery.fn.colorbox.close();

它工作正常

# python - 带有 .order_by('title') 的 Django 查询不按字母顺序，按更改日期排序

> ID：15506198
> 
> 赞同：1
> 
> 时间：2013-03-19T17:16:47.100
> 
> 标签：python, database, django, sqlite

在我的 Django 应用程序中使用以下模型：

```
class Story(models.Model):
#1:1 Fields
    title = models.CharField(max_length=100, unique=True)
    tagline = models.TextField(blank=True, null=True)
    contents = models.TextField()
    updated = models.DateTimeField(auto_now_add=True)
    slug = models.SlugField(unique=True)
    full_length_book = models.BooleanField(default=False)
    publish_now = models.BooleanField(default=False)
    date_added = models.DateTimeField('date added to archive')
    def __unicode__(self):
        return self.title
    class Meta:
        verbose_name_plural = "Stories"
        ordering = ['title'] 
```

我有几个视图可以从这个模型中查询数据并使用`.order_by('title')`，例如：

```
newlist = Story.objects.filter(tag=tag, publish_now=True).order_by('title') 
```

问题：在查询结果中，以及当我在 django 管理员中为故事组使用“排序列”箭头时，它会按最后更改的顺序列出故事，并在该顺序中按字母顺序排列。我需要首先按标题排序的故事，按字母顺序排列。为什么它将最近更改的条目放在列表的末尾？

我可能对 SQLite 有误解——即使我进入数据库管理器并调用`SELECT * FROM table_name ORDER BY LOWER(title)`，顺序仍然是先更新，然后按字母顺序排列。

*编辑*Django 调用的 SQL 如下：

```
'SELECT "app_story"."id", "app_story"."title", "app_story"."tagline", "app_story"."contents", "app_story"."updated", "app_story"."slug", "app_story"."full_length_book", "app_story"."publish_now", "app_story","date_added" FROM "app_story" ORDER BY "app_story"."title" ASC' 
```

这看起来应该按标题排序，所以我仍然不知道为什么订单会在列表末尾出现新编辑的项目。

# sql - 使用 CASE 和 GROUP BY 的动态替代方案

> ID：15506199
> 
> 赞同：31
> 
> 时间：2013-03-19T17:16:48.660
> 
> 标签：sql, postgresql, pivot, crosstab, window-functions

我有一个看起来像这样的表：

```
id    feh    bar
1     10     A
2     20     A
3      3     B
4      4     B
5      5     C
6      6     D
7      7     D
8      8     D 
```

我希望它看起来像这样：

```
bar  val1   val2   val3
A     10     20 
B      3      4 
C      5        
D      6      7     8 
```

我有这个查询：

```
SELECT bar, 
   MAX(CASE WHEN abc."row" = 1 THEN feh ELSE NULL END) AS "val1",
   MAX(CASE WHEN abc."row" = 2 THEN feh ELSE NULL END) AS "val2",
   MAX(CASE WHEN abc."row" = 3 THEN feh ELSE NULL END) AS "val3"
FROM
(
  SELECT bar, feh, row_number() OVER (partition by bar) as row
  FROM "Foo"
 ) abc
GROUP BY bar 
```

这是一种非常随意的方法，如果要创建很多新列，就会变得笨拙。我想知道这些`CASE`语句是否可以更好地使这个查询更加动态？另外，我很想看到其他方法来做到这一点。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-20T02:42:31.057

如果您尚未安装附加模块[**tablefunc**](http://www.postgresql.org/docs/current/interactive/tablefunc.html) ，请为每个数据库运行*一次*此命令：

```
CREATE EXTENSION tablefunc; 
```

## 回答问题

适用于您的案例的非常基本的交叉表解决方案：

```
SELECT * FROM crosstab(
  'SELECT bar, 1 AS cat, feh
   FROM   tbl_org
   ORDER  BY bar, feh')
 AS ct (bar text, val1 int, val2 int, val3 int);  -- more columns? 
```

这里的**特殊困难**是，基表中没有*类别*( `cat`)。对于基本的**1 参数形式**，我们可以只提供一个带有虚拟值的虚拟列作为类别。无论如何，该值被忽略。

这是**不需要**函数的**第二个参数**的**罕见情况**之一，因为根据此问题的定义，所有值仅出现在右侧的悬空列中。并且顺序可以由*值*来确定。**`crosstab()`**`NULL`****

 *****如果我们有一个实际的*类别*列，其名称决定结果中值的顺序，我们需要**2 参数形式**的`crosstab()`. 这里我在窗口函数的帮助下合成了一个类别列，[`row_number()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)基于`crosstab()`：

```
SELECT * FROM crosstab(
   $$
   SELECT bar, val, feh
   FROM  (
      SELECT *, 'val' || row_number() OVER (PARTITION BY bar ORDER BY feh) AS val
      FROM tbl_org
      ) x
   ORDER BY 1, 2
   $$
 , $$VALUES ('val1'), ('val2'), ('val3')$$         -- more columns?
) AS ct (bar text, val1 int, val2 int, val3 int);  -- more columns? 
```

其余的几乎都是普通的。在这些密切相关的答案中找到更多解释和链接。

*基础知识：*
[***如果您不熟悉该`crosstab()`功能，请先阅读此内容！***]

*   [PostgreSQL 交叉表查询](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query/11751905#11751905)

*先进的：*

*   [使用 Tablefunc 旋转多列](https://stackoverflow.com/questions/15415446/pivot-on-multiple-columns-using-tablefunc/15421607#15421607)
*   [将表和更改日志合并到 PostgreSQL 中的视图中](https://stackoverflow.com/questions/10109564/merge-a-table-and-a-change-log-into-a-view-in-postgresql/10110519#10110519)

### 正确的测试设置

这就是你应该如何提供一个测试用例开始的方式：

```
CREATE TEMP TABLE tbl_org (id int, feh int, bar text);
INSERT INTO tbl_org (id, feh, bar) VALUES
   (1, 10, 'A')
 , (2, 20, 'A')
 , (3,  3, 'B')
 , (4,  4, 'B')
 , (5,  5, 'C')
 , (6,  6, 'D')
 , (7,  7, 'D')
 , (8,  8, 'D'); 
```

## 动态交叉表？

[正如@Clodoaldo 评论](https://stackoverflow.com/questions/15506199/dynamic-alternative-to-pivot-with-case-and-group-by/15514334#comment21984934_15514334)的那样，还不是很有*活力*。使用 plpgsql 很难实现动态返回类型。但是有*一些*方法可以解决它 -*有一些限制*。

 **因此，为了不使其余部分进一步复杂化，我用一个***更简单***的测试用例进行演示：

```
CREATE TEMP TABLE tbl (row_name text, attrib text, val int);
INSERT INTO tbl (row_name, attrib, val) VALUES
   ('A', 'val1', 10)
 , ('A', 'val2', 20)
 , ('B', 'val1', 3)
 , ('B', 'val2', 4)
 , ('C', 'val1', 5)
 , ('D', 'val3', 8)
 , ('D', 'val1', 6)
 , ('D', 'val2', 7); 
```

称呼：

```
SELECT * FROM crosstab('SELECT row_name, attrib, val FROM tbl ORDER BY 1,2')
AS ct (row_name text, val1 int, val2 int, val3 int); 
```

回报：

```
 row_name | val1 | val2 | val3
----------+------+------+------
 A        | 10   | 20   |
 B        |  3   |  4   |
 C        |  5   |      |
 D        |  6   |  7   |  8 
```

### `tablefunc`模块的内置功能

tablefunc 模块为通用`crosstab()`调用提供了一个简单的基础设施，而不提供列定义列表。编写的许多函数 `C`（通常非常快）：

```
`**crosstab*N*()**`
```

`crosstab1()`-`crosstab4()`是预定义的。一个小问题：他们需要并返回所有`text`. 所以我们需要铸造我们的`integer`价值观。但它简化了调用：

```
SELECT * FROM crosstab4('SELECT row_name, attrib, val::text  -- cast!
                         FROM tbl ORDER BY 1,2') 
```

结果：

```
 row_name | category_1 | category_2 | category_3 | category_4
----------+------------+------------+------------+------------
 A        | 10         | 20         |            |
 B        | 3          | 4          |            |
 C        | 5          |            |            |
 D        | 6          | 7          | 8          | 
```

### 自定义`crosstab()`函数

对于***更多列***或***其他数据类型***，我们创建自己的*复合类型*和*函数*（一次）。
类型：

```
CREATE TYPE tablefunc_crosstab_int_5 AS (
  row_name text, val1 int, val2 int, val3 int, val4 int, val5 int); 
```

功能：

```
CREATE OR REPLACE FUNCTION crosstab_int_5(text)
  RETURNS SETOF tablefunc_crosstab_int_5
AS '$libdir/tablefunc', 'crosstab' LANGUAGE c STABLE STRICT; 
```

称呼：

```
SELECT * FROM crosstab_int_5('SELECT row_name, attrib, val   -- no cast!
                              FROM tbl ORDER BY 1,2'); 
```

结果：

```
 row_name | val1 | val2 | val3 | val4 | val5
----------+------+------+------+------+------
 A        |   10 |   20 |      |      |
 B        |    3 |    4 |      |      |
 C        |    5 |      |      |      |
 D        |    6 |    7 |    8 |      | 
```

## *一种*适用于所有人的多态动态函数

*这超出了`tablefunc`模块所涵盖的范围。*
为了使返回类型动态，我使用了多态类型，并在此相关答案中详细介绍了一种技术：

*   [重构 PL/pgSQL 函数以返回各种 SELECT 查询的输出](https://stackoverflow.com/questions/11740256/refactor-a-pl-pgsql-function-to-return-the-output-of-various-select-queries/11751557#11751557)

1-参数形式：

```
CREATE OR REPLACE FUNCTION crosstab_n(_qry text, _rowtype anyelement)
  RETURNS SETOF anyelement AS
$func$
BEGIN
   RETURN QUERY EXECUTE 
   (SELECT format('SELECT * FROM crosstab(%L) t(%s)'
                , _qry
                , string_agg(quote_ident(attname) || ' ' || atttypid::regtype
                           , ', ' ORDER BY attnum))
    FROM   pg_attribute
    WHERE  attrelid = pg_typeof(_rowtype)::text::regclass
    AND    attnum > 0
    AND    NOT attisdropped);
END
$func$  LANGUAGE plpgsql; 
```

使用此变体对 2 参数形式进行重载：

```
CREATE OR REPLACE FUNCTION crosstab_n(_qry text, _cat_qry text, _rowtype anyelement)
  RETURNS SETOF anyelement AS
$func$
BEGIN
   RETURN QUERY EXECUTE 
   (SELECT format('SELECT * FROM crosstab(%L, %L) t(%s)'
                , _qry, _cat_qry
                , string_agg(quote_ident(attname) || ' ' || atttypid::regtype
                           , ', ' ORDER BY attnum))
    FROM   pg_attribute
    WHERE  attrelid = pg_typeof(_rowtype)::text::regclass
    AND    attnum > 0
    AND    NOT attisdropped);
END
$func$  LANGUAGE plpgsql; 
```

`pg_typeof(_rowtype)::text::regclass`：为每个用户定义的复合类型定义了一个行类型，以便在系统目录中列出属性（列）[`pg_attribute`](http://www.postgresql.org/docs/current/interactive/catalog-pg-attribute.html)。获得它的快车道：将注册的类型 ( `regtype`) 转换为`text`并将其`text`转换为`regclass`。

### 一次创建复合类型：

您需要为要使用的每种返回类型定义一次：

```
CREATE TYPE tablefunc_crosstab_int_3 AS (
    row_name text, val1 int, val2 int, val3 int);

CREATE TYPE tablefunc_crosstab_int_4 AS (
    row_name text, val1 int, val2 int, val3 int, val4 int);

... 
```

对于临时呼叫，您也可以只创建一个**临时表**以达到相同（临时）的效果：

```
CREATE TEMP TABLE temp_xtype7 AS (
    row_name text, x1 int, x2 int, x3 int, x4 int, x5 int, x6 int, x7 int); 
```

或者使用现有表、视图或物化视图的类型（如果可用）。

### 称呼

使用上述行类型：

1 参数形式（无缺失值）：

```
SELECT * FROM crosstab_n(
   'SELECT row_name, attrib, val FROM tbl ORDER BY 1,2'
 , NULL::tablefunc_crosstab_int_**3**);
```

2 参数形式（可能缺少某些值）：

```
SELECT * FROM crosstab_n(
   'SELECT row_name, attrib, val FROM tbl ORDER BY 1'
 , $$VALUES ('val1'), ('val2'), ('val3')$$
 , NULL::tablefunc_crosstab_int_**3**);
```

这个**函数**适用于所有返回类型，而模块提供的框架需要为每个类型提供单独的函数。 如果您按照上面演示的顺序命名了您的类型，则只需替换粗体数字。要查找基表中的最大类别数：`crosstab*N*()``tablefunc`

```
SELECT max(count(*)) OVER () FROM tbl  -- returns 3
GROUP  BY row_name
LIMIT  1; 
```

*如果您想要单独的列*，那将是动态的。@Clocoaldo[演示的数组](https://stackoverflow.com/a/15513319/939860)或简单的文本表示形式或包装在文档类型中的结果，例如`json`or`hstore`可以动态地用于任意数量的类别。

**免责声明：**
将用户输入转换为代码时总是存在潜在危险。确保这不能用于 SQL 注入。不要（直接）接受来自不受信任用户的输入。

### 要求原始问题：

```
SELECT * FROM crosstab_n('SELECT bar, 1, feh FROM tbl_org ORDER BY 1,2'
                       , NULL::tablefunc_crosstab_int_3); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-10-17T18:57:48.357

虽然这是一个老问题，但我想添加另一个解决方案，这可以通过 PostgreSQL 的最新改进实现。该解决方案实现了从动态数据集中返回结构化结果的相同目标，**而根本不使用交叉表函数。** 换句话说，这是一个很好的例子，它重新审视了无意和隐含的假设，这些假设阻止我们发现旧问题的新解决方案。;)

为了说明，您要求一种方法来转置具有以下结构的数据：

```
id    feh    bar
1     10     A
2     20     A
3      3     B
4      4     B
5      5     C
6      6     D
7      7     D
8      8     D 
```

变成这种格式：

```
bar  val1   val2   val3
A     10     20 
B      3      4 
C      5        
D      6      7     8 
```

传统的解决方案是创建动态交叉表查询的一种聪明（并且知识渊博）的方法，在 Erwin Brandstetter 的回答中进行了详细解释。

但是，如果您的特定用例足够灵活，可以接受稍微不同的结果格式，那么另一种解决方案可以很好地处理动态枢轴。这种技术，我在这里学到的

*   [使用 JSON 和 PostgreSQL 的动态数据透视表](http://bender.io/2016/09/18/dynamic-pivot-tables-with-json-and-postgresql/)

使用 PostgreSQL 的新[`jsonb_object_agg`](https://www.postgresql.org/docs/9.5/static/functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE)函数以 JSON 对象的形式动态构建旋转数据。

我将使用 Brandstetter 先生的“更简单的测试用例”来说明：

```
CREATE TEMP TABLE tbl (row_name text, attrib text, val int);
INSERT INTO tbl (row_name, attrib, val) VALUES
   ('A', 'val1', 10)
 , ('A', 'val2', 20)
 , ('B', 'val1', 3)
 , ('B', 'val2', 4)
 , ('C', 'val1', 5)
 , ('D', 'val3', 8)
 , ('D', 'val1', 6)
 , ('D', 'val2', 7); 
```

使用该`jsonb_object_agg`函数，我们可以创建所需的具有这种简洁美感的旋转结果集：

```
SELECT
  row_name AS bar,
  json_object_agg(attrib, val) AS data
FROM tbl
GROUP BY row_name
ORDER BY row_name; 
```

哪个输出：

```
 bar |                  data                  
-----+----------------------------------------
 A   | { "val1" : 10, "val2" : 20 }
 B   | { "val1" : 3, "val2" : 4 }
 C   | { "val1" : 5 }
 D   | { "val3" : 8, "val1" : 6, "val2" : 7 } 
```

如您所见，此函数通过在示例数据中的`attrib`和`value`列中创建 JSON 对象中的键/值对来工作，所有这些都按`row_name`.

尽管这个结果集显然看起来不同，但我相信它实际上会满足许多（如果不是大多数）现实世界的用例，尤其是那些数据需要动态生成的数据透视，或者结果数据由父应用程序使用的情况（例如，需要重新格式化以在 http 响应中传输）。

这种方法的好处：

*   **更简洁的语法。** 我想每个人都会同意这种方法的语法比最基本的交叉表示例更清晰、更容易理解。

*   **完全动态。** 无需事先指定有关基础数据的信息。列名和它们的数据类型都不需要提前知道。

*   **处理大量列。** 由于透视数据保存为单个 jsonb 列，因此您不会遇到 PostgreSQL 的列限制（我相信≤1,600 列）。仍然有一个限制，但我相信它与文本字段相同：每个创建的 JSON 对象 1 GB（如果我错了，请纠正我）。这是很多键/值对！

*   **简化的数据处理。** 我相信在数据库中创建 JSON 数据将简化（并可能加快）父应用程序中的数据转换过程。（您会注意到，我们的示例测试用例中的整数数据已正确存储在生成的 JSON 对象中。PostgreSQL 通过根据 JSON 规范自动将其内在数据类型转换为 JSON 来处理这个问题。）这将有效地消除需要手动转换传递给父应用程序的数据：它都可以委托给应用程序的本机 JSON 解析器。

差异（和可能的缺点）：

*   **它看起来不一样。** 不可否认，这种方法的结果看起来不同。JSON 对象不如交叉表结果集漂亮；但是，这些差异纯粹是表面上的。生成相同的信息，并且其格式可能对父应用程序*更友好。*

*   **缺少钥匙。** 交叉表方法中的缺失值用空值填充，而 JSON 对象只是缺少适用的键。您必须自己决定这是否是您的用例可接受的折衷方案。在我看来，在 PostgreSQL 中解决这个问题的任何尝试都会使过程变得非常复杂，并且可能会以额外查询的形式进行一些内省。

*   **不保留密钥顺序。** 我不知道这是否可以在 PostgreSQL 中解决，但这个问题主要也是装饰性的，因为任何父应用程序都不太可能依赖密钥顺序，或者有能力通过其他方式确定正确的密钥顺序。最坏的情况可能只需要对数据库进行附加查询。

**结论**

我很想听听其他人（尤其是@ErwinBrandstetter）对这种方法的意见，尤其是与性能有关的意见。当我在 Andrew Bender 的博客上发现这种方法时，就像被击中头部一样。在 PostrgeSQL 中采用全新的方法解决难题是多么美妙的方式。它完美地解决了我的用例，我相信它同样会为许多其他人服务。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-04T14:46:44.067

这是为了完成[@Damian](https://stackoverflow.com/a/40093700/131874)的好答案。`json_object_agg`在 9.6 的便捷功能之前，我已经在其他答案中建议了 JSON 方法。使用以前的工具集只需要更多的工作。

提到的两个可能的缺点实际上并非如此。如有必要，随机密钥顺序会被简单地纠正。缺少的键（如果相关）需要处理几乎微不足道的代码量：

```
select
    row_name as bar,
    json_object_agg(attrib, val order by attrib) as data
from
    tbl
    right join
    (
        (select distinct row_name from tbl) a
        cross join
        (select distinct attrib from tbl) b
    ) c using (row_name, attrib)
group by row_name
order by row_name
;
 bar |                     data                     
-----+----------------------------------------------
 a   | { "val1" : 10, "val2" : 20, "val3" : null }
 b   | { "val1" : 3, "val2" : 4, "val3" : null }
 c   | { "val1" : 5, "val2" : null, "val3" : null }
 d   | { "val1" : 6, "val2" : 7, "val3" : 8 } 
```

对于理解 JSON 的最终查询消费者来说，没有缺点。唯一的一个是它不能作为表源使用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-20T00:51:25.933

在你的情况下，我猜一个数组是好的。[SQL小提琴](http://www.sqlfiddle.com/#!12/9a403/2)

```
select
    bar,
    feh || array_fill(null::int, array[c - array_length(feh, 1)]) feh
from
    (
        select bar, array_agg(feh) feh
        from foo
        group by bar
    ) s
    cross join (
        select count(*)::int c
        from foo
        group by bar
        order by c desc limit 1
    ) c(c)
;
 bar |      feh      
-----+---------------
 A   | {10,20,NULL}
 B   | {3,4,NULL}
 C   | {5,NULL,NULL}
 D   | {6,7,8} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-29T06:58:52.090

很抱歉过去返回，但解决方案“动态交叉表”返回错误的结果表。因此，valN 值错误地“左对齐”并且它们不对应于列名。当输入表的值有“洞”时，例如“C”有 val1 和 val3，但没有 val2。这会产生一个错误：val3 值将在最终表中的 val2 列（即下一个空闲列）中进行排列。

```
CREATE TEMP TABLE tbl (row_name text, attrib text, val int); 
INSERT INTO tbl (row_name, attrib, val) VALUES ('C', 'val1', 5) ('C', 'val3', 7);

SELECT * FROM crosstab('SELECT row_name, attrib, val FROM tbl 
ORDER BY 1,2') AS ct (row_name text, val1 int, val2 int, val3 int);

row_name|val1|val2|val3
 C      |   5|  7 | 
```

为了在右列中返回带有“孔”的正确单元格，交叉表查询需要在交叉表中进行第二次选择，如下所示`"crosstab('SELECT row_name, attrib, val FROM tbl ORDER BY 1,2', 'select distinct row_name from tbl order by 1')"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-20T00:57:15.637

从某种意义上说，这并不是真正*动态*的，因为您仍然必须枚举与您预期的值一样多的列，但是这样做很容易。一个问题是列需要一个序号键来匹配，没有中断。此外，如果有重复的键，它就会把它弄得一团糟，所以也需要重复数据删除。这些集合都必须预先分区以容纳适当的 N 集合。

对我来说，它看起来很笨拙，所以不确定它是否物有所值。但是我将其添加到社区狗堆中，希望它会为其他人提供一些煽动以提出更好的方法。

```
/** build a dataset **/
DROP TABLE IF EXISTS tmpT ;
CREATE TEMP TABLE tmpT AS
SELECT
 NULL::INT AS key
 ,NULL::INT AS ints
 ,NULL::VARCHAR(1) AS chars
 ,NULL::VARCHAR(3) AS unnest
LIMIT 0 ;

insert into tmpT (key, ints, chars, unnest)
values   (1 , 1   , 'o',  CHR( 130 - 10 ) )       
        ,(2 , 2   , 'n',  CHR( 130 - 11 ) )       
        ,(3 , 3   , 'm',            NULL  )       
        --,(4 , 4   , 'l',  CHR( 130 - 13 ) ) -- missing set       
        ,(5 , 5   , null, CHR( 130 - 14 ) )        
        ,(6 , null, 'j',  CHR( 130 - 15 ) )        
        ,(7 , 7   , null, CHR( 130 - 16 ) )         
        ,(8 , null, 'h',  CHR( 130 - 17 ) )        
        ,(9 , 9   , null, CHR( 130 - 18 ) )         
        ,(10, null, 'f' ,           NULL  )        
        ,(11, null, 'a',  CHR( 130 - 20 ) )        
        ,(12, 12  , null, CHR( 130 - 21 ) )         
 ; /** end of build a dataset **/

/** set up full set of pivotal column positions, to backfill any missing  **/
DROP TABLE IF EXISTS tGenSer ; 
CREATE TEMP TABLE tGenSer AS SELECT generate_series( 1, 1000 )::INT AS key ; 
```

/** 然后是枢轴 **/

```
/* Pivot 10 columns */
SELECT *
FROM     /* name the columns*/
(    SELECT a a ,a b ,a c ,a d ,a e ,a f ,a g ,a h ,a i ,a j /*,a k ,a l ,a m ,a n ,a o ,a p ,a q ,a r ,a s ,a t*/ /* ,a u ,a v ,a w ,a x ,a y ,a z*/ FROM ( SELECT NULL::VARCHAR(3) AS a /**seed the typed columns **/) a  

    UNION /** union is just a helper, to assign names to unnamed columns **/

    /** 20 columns **/
    SELECT * FROM
    (
        /* enumerate columns, no name */
        SELECT t1.x[1 ] ,t1.x[2 ] ,t1.x[3 ] ,t1.x[4 ] ,t1.x[5 ] ,t1.x[6 ] ,t1.x[7 ] ,t1.x[8 ] ,t1.x[9 ] ,t1.x[10] 
        FROM ( SELECT  ARRAY( SELECT  a.ints::TEXT  AS v   
                        FROM tGenSer tg /**backfill missing keys**/ 
                        LEFT JOIN tmpT a ON tg.key = a.key ORDER BY tg.key 
                        ) AS x 
             ) t1

        UNION ALL

        SELECT t1.x[1 ] ,t1.x[2 ] ,t1.x[3 ] ,t1.x[4 ] ,t1.x[5 ] ,t1.x[6 ] ,t1.x[7 ] ,t1.x[8 ] ,t1.x[9 ] ,t1.x[10] 
        FROM ( SELECT  ARRAY( SELECT  a.chars::TEXT AS v 
                        FROM tGenSer tg /**backfill missing keys**/ 
                        LEFT JOIN tmpT a ON tg.key = a.key ORDER BY tg.key 
                        ) AS x 
            ) t1

        UNION ALL

        SELECT t1.x[1 ] ,t1.x[2 ] ,t1.x[3 ] ,t1.x[4 ] ,t1.x[5 ] ,t1.x[6 ] ,t1.x[7 ] ,t1.x[8 ] ,t1.x[9 ] ,t1.x[10] 
        FROM ( SELECT  ARRAY( SELECT  a.unnest      AS v 
                        FROM tGenSer tg /**backfill missing keys**/ 
                        LEFT JOIN tmpT a ON tg.key = a.key 
                        ORDER BY tg.key 
                        ) AS x 
           ) t1
     ) a
)b
WHERE ( a,b,c,d,e,f,g,h,i,j) IS DISTINCT FROM ( NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL )        

; 
```

结果：

```
+---+---+--+--+--+--+--+--+--+--+
| a | b |c |d |e |f |g |h |i |j |
+---+---+--+--+--+--+--+--+--+--+
| x | w |  |  |t |s |r |q |p |  |
| o | n |m |  |  |j |  |h |  |f |
| 1 | 2 |3 |  |5 |  |7 |  |9 |  |
+---+---+--+--+--+--+--+--+--+--+ 
```*******

# python - 为什么我的数组没有被这个 python 脚本填充？

> ID：15506205
> 
> 赞同：0
> 
> 时间：2013-03-19T17:16:58.477
> 
> 标签：python, binary, binaryfiles

我有一个金字塔/python 应用程序，它具有以下可调用视图：

```
@view_config(route_name='home_page', renderer='templates/edit.pt')
def home_page(request):
    if 'form.submitted' in request.params:
        name= request.params['name']

        input_file=request.POST['stl'].file
        vertices, normals = [],[]
        if input_file.read(5) == b'solid':
            for line in input_file:
                parts = line.split()
                if parts[0] == 'vertex':
                    vertices.append(map(float, parts[1:4]))
                elif parts[0] == 'facet':
                    normals.append(map(float, parts[2:5]))

            ordering=[]
            N=len(normals)
            for i in range(0,N):
                ordering.append([3*i,3*i+1,3*i+2])
            data=[vertices,ordering]
        else:
            f=input_file
            points=[]
            triangles=[]
            normals=[]
            def unpack (f, sig, l):
                s = f.read (l)
                fb.append(s)
                return struct.unpack(sig, s)

            def read_triangle(f):
                n = unpack(f,"<3f", 12)
                p1 = unpack(f,"<3f", 12)
                p2 = unpack(f,"<3f", 12)
                p3 = unpack(f,"<3f", 12)
                b = unpack(f,"<h", 2)

                normals.append(n)
                l = len(points)
                points.append(p1)
                points.append(p2)
                points.append(p3)
                triangles.append((l, l+1, l+2))
                #bytecount.append(b[0])

            def read_length(f):
                length = struct.unpack("@i", f.read(4))
                return length[0]

            def read_header(f):
                f.seek(f.tell()+80)

            read_header(f)
            l = read_length(f)

            try:
                while True:
                   read_triangle(f)
            #except Exception, e:
                #print "Exception",e[0]

            #write_as_ascii(outfilename)
            data=[points,triangles]

        jsdata=json.dumps(data)
        renderer_dict = dict(name=name,data=jsdata)

        path=shortuuid.uuid()
        html_string = render('tutorial:templates/view.pt', renderer_dict, request=request)
        s3=boto.connect_s3(aws_access_key_id = 'AKIAIJB6L7Q', aws_secret_access_key = 'sId01dYCMhl0wX' )
        bucket=s3.get_bucket('cubes.supercuber.com')
        k=Key(bucket)
        k.key='%(path)s' % {'path':path}
        k.set_contents_from_string(html_string, headers={'Content-Type': 'text/html'})
        k.set_acl('public-read')

        return HTTPFound(location="http://cubes.supercuber.com/%(path)s" % {'path':path})

    return {} 
```

如您所见，代码检查上传的 stl 文件是 ascii（如果是以单词“solid”开头）还是二进制文件。如果它的 ascii ，一切正常，数据变量被顶点和排序填充。但是，如果它不是以solid 开头并且是二进制stl 文件，则数据变量永远不会被填充。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:19:01.437

您读取前 5 个字节以检查文件类型，但从未将文件位置重置为开头。

添加调用`.seek(0)`：

```
f=input_file
f.seek(0) 
```

您总是可以相对地寻求，而无需调用`f.tell()`：

```
f.seek(80, 1)  # relative seek, you can use `os.SEEK_CUR` as well. 
```

# android - Android ActionBar 进度条位置

> ID：15506209
> 
> 赞同：3
> 
> 时间：2013-03-19T17:17:08.523
> 
> 标签：android, android-actionbar

我有一个带有 3 个菜单项的 ActionBar。最后一个是刷新按钮。

刷新按钮设置...

```
setProgressBarIndeterminateVisibility(true);
setProgressBarVisibility(true); 
```

... 为 true，这会在 ActionBar 上显示旋转的进度图标。伟大的！

但问题是它显示在所有其他图标的前面。我希望它位于所有图标的右侧，因此我可以隐藏刷新按钮，这样当微调器可见时，它看起来就像替换了刷新按钮。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T18:57:36.480

您需要制作自定义 ActionBar 布局并将进度条（设置为不确定模式）放置在您想要的任何位置。然后，而不是调用`setProgressBarVisibility(true)`，只需`ProgressBar.setVisibility()`根据您是否需要显示微调器来调用。

这是我的应用的自定义 ActionBar 布局的示例：

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:text="@string/app_name"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"/>

<ProgressBar
    android:id="@+id/action_bar_progress_spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:indeterminate="true"
    android:layout_toStartOf="@id/search_view"
    android:visibility="gone" />

<SearchView
    android:id="@+id/search_view"
    android:layout_height="match_parent"
    android:layout_width="wrap_content"
    android:title="@string/menu_search"
    android:icon="@drawable/ic_search"
    android:showAsAction="always"
    android:actionViewClass="android.widget.SearchView"
    android:layout_alignParentLeft="false"
    android:queryHint="@string/menu_search_hint"
    android:iconifiedByDefault="false"
    android:layout_alignParentRight="true"/>
</RelativeLayout> 
```

只需调整 ProgressBar 的位置，直到它位于您想要的位置。然后，在您的 Activity 中`onCreate()`设置布局：

```
ActionBar actionBar = getActionBar();
actionBar.setCustomView(R.layout.activity_start_screen_actionbar);
actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM); 
```

# ssl - JBoss 7 - 从standalone.xml 中的系统属性中检索路径

> ID：15506210
> 
> 赞同：1
> 
> 时间：2013-03-19T17:17:12.037
> 
> 标签：ssl, jboss7.x

我正在尝试在standalone.xml 中配置ssl 并通过系统属性传递密钥库文件的路径值。

我的第一次尝试是定义路径，哪个值将是属性：

```
<paths>
    <path name="ssl.dir" path="${ssl.dir.property}"/>
</paths> 
```

因此在 ssl 配置中使用它：

```
<server-identities>
    <ssl>
        <keystore path="server/server.keystore" relative-to="ssl.dir" keystore-password="xxxxxx"/>
    </ssl>
</server-identities> 
```

但在这种情况下，系统属性“ssl.dir.property”没有得到解决。“ssl.dir”的值为空。如果系统属性的值直接放入 keystore 路径而没有定义“相对”，它也不起作用。

你知道如何将路径值传递给可以用作密钥库路径的standalone.xml吗？

我在网上找不到任何东西，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:17:07.887

看起来 path 属性直到 7.1.1.Final 发布后才允许表达式。您可以使用[EAP 6.1.Alpha](http://www.jboss.org/jbossas/downloads/)，它本质上是 7.2.0.Final。它是建立在那个标签上的

# sharepoint - MSAccess 查询将文本字段视为列

> ID：15506212
> 
> 赞同：1
> 
> 时间：2013-03-19T17:17:16.450
> 
> 标签：sharepoint, ms-access

我需要分析一些存在于 SharePoint 服务器上的数据，它的设置方式如下所示：

```
Campaign ID         | Changes
------------------------------------
12345               | 56789 - Name 1
                      98766 - Name 2
                      54789 - Name 3
------------------------------------
67890               | 98764 - Name 4
                      56789 - Name 1
------------------------------------ 
```

因此，每个更改文本字段行都由换行符分隔并由破折号分隔

我试图弄清楚如何查询和返回如下所示的内容：

```
Campaign ID         | ChangesID | Name
------------------------------------
12345               | 56789     | Name 1
12345               | 98766     | Name 2
12345               | 54789     | Name 3
67890               | 98764     | Name 4
67890               | 56789     | Name 1 
```

有任何想法吗？

# c# - Specflow Feature files with same steps causing multiple browser instances to launch

> ID：15506214
> 
> 赞同：10
> 
> 时间：2013-03-19T17:17:16.900
> 
> 标签：c#, specflow

I have at least 3 .feature files in my C# Specflow tests project in which I have the step, for instance:

`Given I am at the Home Page`

When I first wrote the step in the file `Feateure1.feature` and created the step method, I placed it in a step file, let's say, `Steps1.cs`, which inherits from a base class that initializes a `FirefoxDriver`. All my `StepsXXXX.cs` classes inherit from this base class.

Then, I wrote `Feature2.feature`, which also has a step `Given I am at the Home Page`. And the step was automaticaly bound to the one in `Steps1.cs`

'Till now, no problem. That's pretty much what I wanted - to have reusable steps throughout the test project. But the problem is, whenever I'm running a scenario that has steps in diferent `StepsXXXX` files, I get various browser instances running.

======

I'm pretty sure this is due to the fact that My `StepsXXXX` (binding classes) all inherit from this base class that has a IWebDriver of its own, and when the step is called, everything else (including the before/after scenario methods) is called. But I can't figure out how to work around this.

I still want reusable steps. I tried to put these steps in the base class, but it did not work. I thought of changing the bindings too, but specflow uses meaningfull strings to do so, and I don't want to change them to misleading strings.

Has anyone stumbled across this? Any help is really appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T18:50:34.927

问题是 SpecFlow 绑定不尊重继承。所有自定义属性都被认为是全局的，因此 SpecFlow 所做的只是搜索具有 [Binding] 的类列表，然后为所有 [Given]/[When]/[Then] 构建一个字典，以便它可以评估它们为最佳匹配。然后它会创建一个类的实例（如果它还没有这样做的话）并调用它的方法。

结果，您的简单案例都保留在 Steps1 类中，因为它是第一个完美匹配。您更复杂的案例开始实例化更多类，因此需要多个浏览器，并且您的重构尝试将不起作用，因为您的抽象基类上没有 [Binding]。

我可能会首先将所有步骤类层次结构扁平化为一个大的 AllSteps.cs 类。*这看起来可能会适得其反，但您真正要做的只是安排代码，以使当前绑定显示在您的 SpecFlow 功能中。*通过这种方式，您可以开始重构不同 GWT 绑定之间的重叠。

目前，您的绑定是围绕场景安排的。您需要做的是围绕您的功能重构它们。无论如何阅读[谁的域？](http://dannorth.net/2011/01/31/whose-domain-is-it-anyway/)在你开始之前，这可能会给你一些好主意。然后查看 SpecFlow 文档中的[Sharing-Data-between-Bindings](https://github.com/techtalk/SpecFlow/wiki/Sharing-Data-between-Bindings)以了解如何在新步骤类之间进行链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-28T08:46:12.913

您可以使用在特定场景或功能上引用的[Scoped 绑定，如下所示：](https://github.com/techtalk/SpecFlow/wiki/Scoped-bindings)`[Scope(Tag = "mytag", Feature = "feature title", Scenario = "scenario title")]`

```
Feature: Feateure1

Scenario: demo
Given I am at the Home Page
When ....

[Binding, Scope(Feature = "Feateure1")]
public class Steps1{

 [Given(@"Given I am at the Home Page")]
 public void GivenIAmAtTheHomePage(){
  {  }
}

Feature: Feateure2

Scenario: demo
Given I am at the Home Page
When ....
...

[Binding,Scope(Feature = "Feateure2")]
public class Steps2{

 [Given(@"Given I am at the Home Page")]
 public void GivenIAmAtTheHomePage(){
 {  }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-18T10:57:25.063

i think this is a lot more simple than the question and answers here make it out to be. there are really two questions at play here:

AISki gave you the right answer in the link to documentation about specflow context, but it was not really presented as the answer and there was distraction in presenting an inferior answer as the actual answer.

the answer as to the behavior you see is that you should expect exactly what is happening with the way you set things up. if you have multiple binding classes that create browser instances (and you do if they all have a common base that creates a browser instance) and they have matches in your features, you should expect multiple browser instances.

The answer for what you intend (a single browser shared among your steps) is that you should use the context feature of specflow to control the dependency on a browser instance. this amounts to dependency injection. your step definition classes should take a constructor dependency on something that creates your browser instance - specflow manages dependencies for you and you'll get a new instance for the first of your classes created and then the same one after that.

[https://github.com/techtalk/SpecFlow/wiki/Sharing-Data-between-Bindings](https://github.com/techtalk/SpecFlow/wiki/Sharing-Data-between-Bindings)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-01T16:27:01.077

我面临同样的问题。

我想拥有一个功能文件，它将调用不同 cs 类中的步骤。当我想为每个场景设置和拆除时遇到了这个问题。

使用步骤类构造函数并且`Dispose()`不可能，因为该场景使用了多个步骤类，我不想在一个场景中多次“设置”。

对两个 step 类使用`[BeforeScenario]`and`[AfterScenario]`也会使运行器在两个类中运行 before 和 after 方法，这使得 setup 运行两次。

所以我所做的是创建另一个第三类，称为`BrowserScenarioSetup`将之前和之后的场景类放入其中，为场景设置浏览器并分配给`ScenarioContext.Current`字典。测试运行时，只为一个场景创建了一个浏览器，我可以使用任何类中定义的场景步骤，但仅用于`Scenario.Context.Current`获取浏览器实例。

我可以让两个步骤类都有一个基本步骤类并创建一个简短的方法来获取浏览器实例（或在设置中创建的任何共享实例）只是为了隐藏`Scenario.Context.Current`

最后，我可以`[BeforeScenario("Browser", "IE")]`在功能或场景中标记和使用@Browser 和@IE，以便仅在合适的上下文中调用此设置方法。

# java - 摇摆动画问题？

> ID：15506223
> 
> 赞同：1
> 
> 时间：2013-03-19T17:17:45.943
> 
> 标签：java, swing, animation

我试图让 Sprite 在摆动的背景图像上移动，但每次我更新位置并重新绘制时，它也会使用图像的先前位置重新绘制。但是我只是想让它在每次按下右箭头时移动 10 个像素。这是控制运动的 Main 类。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.*;

public class Main extends JFrame implements KeyListener, ActionListener{
    private static final long serialVersionUID = 1L;

    //Caitlan info
    Image caitlanImage = new ImageIcon("Caitlan.png").getImage();
    Person caitlan = new Person(caitlanImage, "Caitlan", 50, 200, true);

    //Jake info
    Image jakeImage = new ImageIcon("Jake.png").getImage();
    Person jake = new Person(jakeImage, "Jake", 0, 200, true);

    //Level objects
    Image granadaBackground = new ImageIcon("Granada Background.jpg").getImage();
    Level granada = new Level(granadaBackground, "Granada", new Point(600, 300));

    Image elevatorBackground = new ImageIcon("Elevator.png").getImage();
    Level elevator = new Level(elevatorBackground, "Elevator", new Point(0,0));

    public static void main(String[] args) throws InterruptedException{
        new Main();
    }
    public Main() throws InterruptedException{  //Constructor (only should be called once)
        setSize(700,300);
        setTitle("Project Anniversary");
        setVisible(true);   
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        addKeyListener(this);
    }
    public void paint(Graphics g){      //Overridden paint method.

        if(checkIfLevelDone(granada, caitlan)){
            granada.setDone();
        }
        if(!granada.isDone()){
            g.drawImage(granada.getImage(), 0, 0, granadaBackground.getWidth(null), granadaBackground.getHeight(null),null);
            g.drawImage(jake.getImage(), jake.getPosX(), jake.getPosY(), jake.getImage().getWidth(null), jake.getImage().getHeight(null),null);
            g.drawImage(caitlan.getImage(), caitlan.getPosX(), caitlan.getPosY(), caitlan.getImage().getWidth(null), caitlan.getImage().getHeight(null), null);
        }
        else if(granada.isDone()){
            setSize(300,300);
            g.drawImage(elevator.getImage(), 0, 0,   
    elevator.getImage().getWidth(null), elevator.getImage().getHeight(null),null);
            g.drawImage(jake.getImage(), jake.getPosX(), jake.getPosY(), 
    jake.getImage().getWidth(null), jake.getImage().getHeight(null),null);
            g.drawImage(caitlan.getImage(), caitlan.getPosX(), caitlan.getPosY(), 
     caitlan.getImage().getWidth(null), caitlan.getImage().getHeight(null), null);
        }
    }
    public void keyPressed(KeyEvent e) { //Method called whenever a key is pressed
        caitlan.printLocation();
        int code = e.getKeyCode();
        if(code == KeyEvent.VK_RIGHT){   //When the user presses the right arrow
            caitlan.setLocation(caitlan.getPosX() + 10, caitlan.getPosY());
            repaint();
        }
        if(code == KeyEvent.VK_LEFT){    //When the user presses the left arrow
            caitlan.setLocation(caitlan.getPosX() - 10, caitlan.getPosY());
            repaint();
        }
        if(code == KeyEvent.VK_UP){         //Implement jumping code here
            repaint();
        }
    }
    public boolean checkIfLevelDone(Level l, Person p){ 
    //Method to check if a given level is done
        if(l.getCompletionPoint().x <= p.getPosX()){
            return true;
        }
        return false;
    }
    public void followOtherPerson(Person a, Person b) throws InterruptedException{               
    //Method to follow the other character

    }
    public void jump(Person p) throws InterruptedException{     //Jump method
        caitlan.setLocation(caitlan.getPosX(), caitlan.getPosY() - 60);
        repaint();
    }
    public void keyReleased(KeyEvent e) {           //IGNORE

    }
    public void keyTyped(KeyEvent e) {              //IGNORE

    }
    public void actionPerformed(ActionEvent e) {    //IGNORE

    }

    } 
```

这是级别类：

```
 import java.awt.Image;
 import java.awt.Point;

 public class Level {

//Private attributes
private Image backgroundImage;           //Image
private String levelName;               //Name of level
private boolean levelComplete;      //Status that holds if the level is done
private Point completionPoint;      //Point at which the level is completed

public Level(Image i, String l, Point p){       //Constructor
    this.backgroundImage = i;
    this.levelName = l;
    this.completionPoint = p;
    levelComplete = false;
}
public void setDone(){
    levelComplete = true;
}
public boolean isDone(){        //Returns if the level is done or not
    return levelComplete;
}
public Image getImage(){            //Getters and setters
    return backgroundImage;
}
public String getLevelName(){
    return levelName;
}
public void setImage(Image i){
    this.backgroundImage = i;
}
public void setName(String name){
    this.levelName = name;
}
public Point getCompletionPoint(){
    return completionPoint;
}
public void setCompletionPoint(Point p){
    this.completionPoint = p;
}

 } 
```

最后，这是 Person 类。

```
 import java.awt.*;

public class Person{

    //Attributes
    private Image image;
    private String name;
    private int xlocation;
    private int ylocation;

    /*Boolean that you can publically access to determine if the given Person object is a 
    player*/
    public boolean isPlayer;      

    public Person(Image i, String s){       //Really shouldn't be used
        this.image = i;
        this.name = s;
    }
    public Person(Image i){             //Really shouldn't be used
        this.image = i;
    }
    public Person(Image i, String s, int xloc, int yloc){       //Basic constructor
        this.name = s;
        this.image = i;
        this.xlocation = xloc;
        this.ylocation = yloc;
    }
    public Person(Image i, String s, int xloc, int yloc, boolean isPlayer){ //Detailed constructor
        this.name = s;
        this.image = i;
        this.xlocation = xloc;
        this.ylocation = yloc;
        this.isPlayer = isPlayer;
    }
    public void printLocation(){
        System.out.println("Person " + name + " is at location (" + xlocation +", " + ylocation +").");
    }
    public void incrementPositionX(){                       //Increase xlocation by 1
        xlocation++;
    }
    public void incrementPositionY(){                       //Increase ylocation by 1
        ylocation++;
    }
    public void setName(String name){                       //Method to change the name of a sprite
        this.name = name;
    }
    public void setImage(Image image){  //Method to change the image of a sprite
        this.image = image;
    }
    public Image getImage(){                //Get image
        return image;
    }
    public int getPosX(){                   //Get x position
        return xlocation;
    }
    public int getPosY(){                   //Get y position
        return ylocation;
    }
    public String getName(){                //Get name
        return name;
    }
    public void setLocation(int x, int y){  //Method to change the location of a sprite
        this.xlocation = x;
        this.ylocation = y;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:25:36.613

您不应该直接在顶级容器上绘画，例如`JFrame`. 相反，使用`JComponent`or `JPanel`。覆盖`paintComponent()`绘画而不是`paint()`并且不要忘记调用`super.paintComponent(g)`

查看[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)教程以获取更多信息。

此外，键侦听器是较低级别的接口。最好改用键绑定。有关详细信息和示例，请参阅[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

此外，无需创建`ImageIcon`即可获得`Image`. 研究`ImageIO.read()`方法。

# css - 为子类别赋予与父类别不同的 风格 - NopCommerce

> ID：15506227
> 
> 赞同：0
> 
> 时间：2013-03-19T17:17:50.287
> 
> 标签：css, razor, nopcommerce

下午好，我正在使用 NopCommerce 2.65（在 CSHTML 中）开发一个网站，客户要求我进行两种我目前无法进行的样式修改：

1st – 当用户浏览特定子类别时，同一级别中的所有子类别都必须着色（在本例中为红色），除了我正在浏览的子类别具有反转的前景色和背景色。我已经尝试更改 CSS3 文件，甚至在找到这些 NopCommerce 论坛主题之后： [http ://www.nopcommerce.com/boards/t/19630/suggestion-categorynavigationcshtml-add-some-style-rules-to-child- categories-so-we-can-easily-customise-through-css.aspx](http://www.nopcommerce.com/boards/t/19630/suggestion-categorynavigationcshtml-add-some-style-rules-to-child-categories-so-we-can-easily-customise-through-css.aspx) 和 [http://nopcommerce.codeplex.com/SourceControl/changeset/0c83401329d9](http://nopcommerce.codeplex.com/SourceControl/changeset/0c83401329d9) 我还没有解决它。

第二 – 我在站点中安装了 NopTemplate MegaMenu 插件，并且在浏览与 MegaMenu 关联的页面之一时，我想将该页面标记为当前看到的，并在其中放置一个小箭头。

这样做的最佳选择是什么？任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:04:07.910

不幸的是，nop 2.65 在显示级别上没有区分 cat 和 sub cat，它们使用相同的视图。所以不，如果你打算使用管理员，那是不可能的

您正在寻找的视图应该是 CategoryTemplate.ProductsInGridOrLines.cshtml 或 CategoryTemplate.ProductsInGridOrLines.Mobile.cshtml

模型是类别模型

您可以在视图中硬编码（

if(Model.Id == XXX) 或 if(Model.Name == XXX)

或者您分配一个新变量在数据库中添加一个新的 int 列即 (CSSLevel)

***数据端***

**Nop.Core.Domain.Category** public virtual int CSSLevel{ get; 放; }

**Nop.Data.Mapping.CategoryMap this.Property** (c => c.CSSLevel);

***管理员端，因此用户可以输入自己***

**Nop.Admin.Models.Catalog.CategoryModel** public int CSSLevel{ get; 放; }

**Nop.Admin.Views.Category** _CreateOrUpdate.cshtml

@Html.EditorFor(model => model.CSSLevel) *没有提供完整的表格，但你应该可以看到

最后向网络客户展示

Nop.Web.Models.Catalog.CategoryModel public int CSSLevel{ get; 放; }

Nop.Web.Category.Controller inside (category function) model.CSSLevel = category.CSSLevel;

CategoryTemplate.ProductsInGridOrLines.cshtml @if (Model.CSSLevel == 1)

只要记住总是先做模型，然后在 vs 内做模型，当您更改视图和控制器时，您应该会看到它出现

# c# - 从文本文件构建表格

> ID：15506232
> 
> 赞同：-4
> 
> 时间：2013-03-19T17:18:00.303
> 
> 标签：c#

我正在尝试从文本文件构建表格，但是：当我编译程序时，输入的信息出现在它应该出现的表格之后，但表格是空白的。显然我在某个地方犯了一个错误..你能帮忙吗？

```
 StreamReader swreNames = File.OpenText("Names.txt");

        do
        {
            Console.SetCursorPosition(15, 2);
            Console.Write("--- Names Table ---");
            Console.SetCursorPosition(10, 4);
            Console.Write("First Name");
            swrNames.WriteLine(firstname); // Reads from first name from file Names.txt
            Console.SetCursorPosition(10, Counter + 6); // Aligns first name within table settings 
            Console.SetCursorPosition(28, 4);
            Console.Write("Surname");
            swrNames.WriteLine(lastname); // Reads from last name from file Names.txt
            Console.SetCursorPosition(28, Counter + 6);
            Console.SetCursorPosition(48, 4);
            Console.Write("Age");
            swrNames.WriteLine(age); // Reads from age from file Names.txt
            Console.SetCursorPosition(48, Counter + 6);
            Console.ReadLine();
            Console.Clear();
        } while ((firstname = swreNames.ReadLine()) != null); //Writes out the input from the text file 
```

好的，我已经编辑了代码以显示我认为有问题的地方，希望它的阅读格式稍微容易一些！

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:21:59.907

Ok, **let's suppose** that your file's content follow the format `[first name] [last name]`, like:

```
Axl Rose
Joey Ramone
Steve Vai
BB King 
```

So, your code would look like:

```
 StreamReader fileContent = File.OpenText(@"C:\my-file.txt");

        Console.SetCursorPosition(15, 2);
        Console.Write("--- Names Table ---");
        Console.SetCursorPosition(10, 4);
        Console.Write("First Name");
        Console.SetCursorPosition(28, 4);
        Console.Write("Surname");

        int topOffset = 6;

        string currentLine = fileContent.ReadLine();

        while (!string.IsNullOrWhiteSpace(currentLine))
        {
            string firstName = currentLine.Split(' ')[0];
            string lastName = currentLine.Split(' ')[1];

            Console.SetCursorPosition(10, topOffset);
            Console.Write(firstName);
            Console.SetCursorPosition(28, topOffset);
            Console.Write(lastName);

            topOffset += 2;
            currentLine = fileContent.ReadLine();
        }

        fileContent.Dispose();

        Console.ReadLine(); 
```

This is **not** the best solution and your file might differ from this format. Well, now it's your turn to write code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:02:58.000

当您的评论说您正在写作时，您正在从文件流中读取，而当您的评论说您正在阅读时，您正在写作。您永远不会将读取的数据放入控制台流中。

此外，您将文件流的整个读取行，一次一个放入文件名，然后将其写回同一个流......在那里并不可取。

# bash - Bash 将空格视为新行

> ID：15506234
> 
> 赞同：1
> 
> 时间：2013-03-19T17:18:07.857
> 
> 标签：bash

举个小例子：

```
#!/bin/bash -x
myvar="\"Hello Stackoverflow\""
ping $myvar 
```

这样做的结果是，任何命令（此处只是 ping 示例）都会自动将 'Hello' 和 'Stackoverflow' 之间的空格视为换行符或回车符。

```
#  ./test.sh
+ myvar='"Hello Stakeoverflow"'
+ ping '"Hello' 'Stakeoverflow"'
ping: unknown host "Hello 
```

无论如何我可以忽略这个吗？

忽略 ping 的使用，我知道你不能 ping 单词，它只是有助于绘制关于变量作为参数提供给 shell 命令时如何处理的示例，所以我需要一个错误来显示这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:28:12.123

内部引号对你没有好处——不要试图使用它们。在 的情况下`myvar="\"foo\""`，外引号是语法，但内引号是数据。作为数据的引号不会被 shell 用于字符串拆分目的，它们以后也不会变成语法（除非您使用`eval`，这会引入许多新问题，其中许多会影响安全）；他们所做的只是添加您的实际命令不需要或不需要的数据。

您需要在扩展周围使用*语法*引号，以防止字符串拆分和全局扩展。比较这四个例子（只有第一个是正确的）：

```
do_something_with() {
   printf '<%s> ' "$@"
   echo
}

myvar="Hello Stackoverflow"
do_something_with "$myvar"  # output: <Hello Stackoverflow>
do_something_with $myvar    # output: <Hello> <Stackoverflow>

myvar2="\"Hello Stackoverflow\""
do_something_with $myvar2   # output: <"Hello> <Stackoverflow">
do_something_with "$myvar2" # output: <"Hello Stackoverflow"> 
```

如果你想在一个变量中存储一些应该被解释为多个参数的东西，那么使用数组是正确的：

```
my_array=( Hello "Stack Overflow" )
do_something_with "${my_array[@]}" # output: <Hello> <Stack Overflow> 
```

另请参阅[http://mywiki.wooledge.org/BashFAQ/050](http://mywiki.wooledge.org/BashFAQ/050)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:21:09.673

你需要双引号变量

```
ping "$myvar" 
```

# web-services - 让 ColdFusion 调用的 Web 服务与 JavaLoader 加载的对象一起工作

> ID：15506237
> 
> 赞同：4
> 
> 时间：2013-03-19T17:18:18.547
> 
> 标签：web-services, coldfusion, classpath, coldfusion-9, javaloader

是否可以使用 JavaLoader 获取由 CF 调用的 Web 服务返回的对象，并且 JavaLoader 加载的对象是相同的类路径上下文？我的意思是，没有很多困难？

```
// get a web service
ws = createObject("webservice", local.lms.wsurl);
// user created by coldfusion
user = ws.GenerateUserObject();
/* user status created by java loader.
** this api provider requires that you move the stubs
** (generated when hitting the wsdl from CF for the first time)
** to the classpath.
** this is one of the stubs/classes that gets called from that.
*/
UserStatus = javaLoader.create("com.geolearning.geonext.webservices.Status");
// set user status: classpath context clash
user.setStatus(UserStatus.Active); 
```

错误：

*   详细信息：要么没有具有指定方法名称和参数类型的方法，要么 setStatus 方法被 ColdFusion 无法可靠破译的参数类型重载。ColdFusion 找到 0 个与提供的参数匹配的方法。如果这是一个 Java 对象并且您验证了该方法存在，请使用 javacast 函数来减少歧义。
*   消息：未找到 setStatus 方法。
*   方法名 setStatus

即使从表面上看，该调用与用户上的方法签名匹配——setStatus(com.geolearning.geonext.webservices.Status)——该类位于不同的类路径上下文中。这就是为什么我得到上面的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T21:10:08.760

Jamie 和我在此离线工作并提出了一个创造性的解决方案 :)

（为冗长的答案道歉，但我认为对于那些发现类加载器和我一样令人困惑的人来说，有必要进行一些解释。如果您对“为什么”方面不感兴趣，请随意跳到最后）。

**问题：**

问题肯定是由于多个类加载器/路径。显然 CF Web 服务使用*动态* [URLClassLoader](http://docs.oracle.com/javase/6/docs/api/java/net/URLClassLoader.html)（就像 JavaLoader 一样）。这就是它可以即时加载生成的 Web 服务类的方式，即使这些类不在核心 CF“[类路径](http://blogs.adobe.com/cantrell/archives/2004/07/the_definitive.html)”中。

（基于我有限的理解......）[类加载器](http://www.objectsource.com/j2eechapters/Ch21-ClassLoaders_and_J2EE.htm)遵循层次结构。当涉及多个类加载器时，它们必须遵守一定的规则，否则它们将无法很好地协同工作。规则之一是子类加载器只能“看到”由祖先（父母、祖父母等）加载的对象。他们看不到*兄弟姐妹*加载的类。

如果您检查由 JavaLoader 创建的对象，另一个由`createObject`. 因此，一个将无法识别另一个加载的对象，这可以解释`setStatus`调用失败的原因。 ![两个对象的子类和父类加载器](../Images/cf7a2dd9200ae4da7d5d1694a90ad801.png)

鉴于孩子*可以*看到父母加载的对象，显而易见的解决方案是更改对象的构造方式。对调用进行结构化，以便其中一个类加载器最终成为另一个类加载器的父级。奇怪的是，事实证明这比听起来更棘手。[尽管尝试了多种组合（包括使用switchThreadContextClassLoader](https://github.com/markmandel/JavaLoader/wiki/Switching-the-ThreadContextClassLoader)方法），但我找不到实现这一目标的方法。

**解决方案：**

最后我有一个疯狂的想法：不要加载*任何*罐子。只需将 Web 服务的加载程序用作`parentClassLoader`. 它已经在自己的“类路径”中拥有所需的一切：

```
 // display class path of web service class loader
    dynamicLoader = webService.getClass().getClassLoader();
    dynamicClassPath = dynamicLoader.getURLS();
    WriteDump("CLASS PATH: "& dynamicClassPath[1].toString() ); 
```

JavaLoader 将自动将它找不到的类的调用委托给`parentClassLoader`- 并且宾果 - 一切正常。不再有类加载器冲突。

```
 webService = createObject("webservice", webserviceURL, webserviceArgs);
    javaLoader = createObject("component", "javaloader.JavaLoader").init(
            loadPaths = [] // nothing
            , parentClassLoader=webService.getClass().getClassLoader()
        );

    user = webService.GenerateUserObject();
    userStatus = javaLoader.create("com.geolearning.geonext.webservices.Status");
    user.setStatus(userStatus.Active);
    WriteDump(var=user.getStatus(), label="SUCCESS: user.getStatus()"); 
```

# parsing - 使用 lex/flex 匹配 HTML 样式的注释

> ID：15506240
> 
> 赞同：0
> 
> 时间：2013-03-19T17:18:31.300
> 
> 标签：parsing, lex, flex-lexer, lexical-analysis

我希望这样匹配 COMMENT `<!--C-->`：

1.  它开始于`<!--`
2.  以**第一个结尾** `-->`
3.  C - 可以是任何东西（包括制表符、换行符等）

我遇到了第一个结尾的问题`-->`

因此显然这个解决方案不起作用： `COMMENT (\<!--((.|(\n))*)--\>)`

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:42:30.183

尝试这个：

```
COMMENT    <!--([^-]|-[^-]|--+[^->])*-*--> 
```

我知道读起来有点痛苦。它转化为：

An`<!--`后跟任意数量的：

*   破折号以外的任何东西，或

*   一个破折号后跟破折号以外的任何内容（包括`>`），或

*   两个或多个破折号，后跟除破折号或`>`

最后是两个或多个破折号，后跟一个`>`

# qt - 未找到 QML 运行时环境

> ID：15506242
> 
> 赞同：0
> 
> 时间：2013-03-19T17:18:31.657
> 
> 标签：qt, runtime, qml, environment

我有 QT 版本 4.7.4（32 位）。我正在学习 QML，但不知道如何运行它。该网站表示应提供 QML 运行时环境，并与 QT 本身一起安装。但是我的电脑中没有 QML 运行时环境。如何手动提供这个环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:48:39.397

It seems you need [QML Viewer](http://harmattan-dev.nokia.com/docs/library/html/qt4/qmlviewer.html):

> The viewer is located at *QTDIR/bin/qmlviewer*. To load a .qml file with the viewer, run the viewer and select the file to be opened, or provide the file path on the command line

# java - 需要解释：如何使用 AsyncTask？

> ID：15506244
> 
> 赞同：2
> 
> 时间：2013-03-19T17:18:41.153
> 
> 标签：java, android, asynchronous, android-asynctask

我有一个包含一些数据的 XML 文件，所以我创建了一个代表它的类：

```
public class MyData
{
    ArrayList<SpecialData> list;
    int currentPage, totalPages;
} 
```

您可以猜到我有一个`SpecialData`项目列表，每个项目都包含许多字段，并且`currentPage`/`totalPages`是 XML 文件中的两个唯一值。我需要异步获取和解析 XML 文件，所以我创建了这个类：

```
class GetXMLTask extends AsyncTask<String, Void, MyData>
{
    @Override
    protected MyData doInBackground(String... params)
    {
        MyData md = null;
        // Getting/parsing data
        return md;
    }
} 
```

我试了一下，问题不是来自这里，因为我正确解析了我的 XML 文件并且我的`MyData`对象是完美的。但是后来我在我的主课中使用了这样的任务`Activity`：

```
MyData md = null;
GetXMLTask task = new GetXMLTask(this);
task.execute(new String[]{url});
// How can this change my md object? 
```

这可能很愚蠢，但我根本不知道如何将我的`MyData`实例从我的主类链接到我得到的实例`AsyncTask`。我应该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T17:22:56.440

覆盖`AsyncTask`的`onPostExecute`方法：

```
protected void onPostExecute(MyData result) {
     md = result;
 } 
```

请注意，这假定您的 AsyncTask 是您的活动的内部类。如果不是这种情况，您可以将构造函数中对 Activity 的引用传递给 AsyncTask。在这些情况下，您应该小心使用`WeakReference`Activity 来防止资源泄漏：

```
GetXMLTask(MyActivity activity)
{
    this.mActivity = new WeakReference<MyActivity>(activity);
}

protected void onPostExecute(MyData result)
{
     MyActivity activity = this.mActivity.get();
     if (activity == null) // Activity was destroyed due to orientation change, etc.
         return;
     activity.updateUiFromXml(result);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T17:27:29.570

您可能想要实现某种回调。通过这种方式，您可以通过公开访问来避免暴露您的数据，并且您可以实现其他回调（例如，如果加载数据时出现错误回调）。

例如，您可以定义这样的接口：

```
interface MyAsyncFinishedLister {
    void onFinished(MyData resultData);
} 
```

你的 AsyncTask 将有一个 MyAsyncFinishedListener 的实例，你可以这样调用 onPostExecute：

```
protected void onPostExecute(MyData result) {
     myAsyncFinishedListener.onFinished(result);
} 
```

你的主要活动将实现这个接口，看起来像：

```
class MyActivity extends Activity implements MyAsyncFinishedListener {
    MyData md;

    public void onCreate() {
        super.onCreate();

        GetXMLTask task = new GetXMLTask(this);
        task.execute(new String[]{url});
        task.setOnFinishedListener(this);
    }

    onFinished(MyData result) {
        md = result;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T17:21:57.857

如果希望 AsyncTask 返回数据对象，则需要将其存储在类范围内的变量中，而不是函数范围内。为了简单起见，任务通常是一个私有内部类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T17:23:35.677

声明`MyData`为*对整个类可见的变量，*并尝试**`onPostExecute()`**通过将结果分配给 MyData 变量来访问它。

# java - Android w3c DOM解析很慢

> ID：15506245
> 
> 赞同：1
> 
> 时间：2013-03-19T17:18:47.053
> 
> 标签：java, android, xml, parsing, dom

我的 android 应用程序中的解析存在一些实际问题。我正在使用 DOM 样式解析器提取一些 XML 文件，它需要将近 20 秒的时间来完成并在它们上运行一些代码，这些文件不超过 30KB。

这是从该方法中获取的一些代码：

代码如下：

```
HttpURLConnection vehicles_conn = (HttpURLConnection) new URL("XXXXXXX").openConnection();
                vehicles_conn.setRequestMethod("POST");                     
                vehicles_conn.setDoInput(true);
                vehicles_conn.setDoOutput(true);
                vehicles_conn.setRequestProperty("Content-type", "application/x-www-form-urlencoded");
                vehicles_conn.setChunkedStreamingMode(0);
                String vehicles = URLEncoder.encode("LogonToken", "UTF-8") + "=" + URLEncoder.encode(gettoken, "UTF-8");
                OutputStream vehicles_os = vehicles_conn.getOutputStream();
                Writer vehicles_wr = new OutputStreamWriter(vehicles_os);
                vehicles_wr.write(vehicles);
                vehicles_wr.flush();
                InputStream vehicles_is = vehicles_conn.getInputStream();
                vehicles_wr.close();
                DocumentBuilderFactory vehicles_dbFactory = DocumentBuilderFactory.newInstance();
                DocumentBuilder vehicles_dBuilder = vehicles_dbFactory.newDocumentBuilder();
                Document vehicles_doc = vehicles_dBuilder.parse(vehicles_is);
                NodeList vehicles_nList = vehicles_doc.getElementsByTagName("UNIT");

for (int temp = 0; temp < vehicles_nList.getLength(); temp++) {
                    //Create a new vehicle object   
                    Vehicle v = new Vehicle();

                    Node vehicles_nNode = vehicles_nList.item(vehicles_temp);
                    if (vehicles_nNode.getNodeType() == Node.ELEMENT_NODE) {

                        Element vehicles_eElement = (Element) vehicles_nNode;
                        String something = (getTagValue("ID", vehicles_eElement));

......... 
```

现在，我有其中的 3 个（http 连接仅在方法中调用一次），它在第一个 XML 文件中运行 26 个“单元”——我们称之为 XML1，然后迭代第二个，XML2 和 25' Places'，直到 ID 字段与 XML1 匹配，然后抓取 XML2 的一些其他字段并将它们存储到 arraylist 中，然后对带有 'Peopel' 的 XML3 执行相同的操作。完成后，它会返回顶部并从列表中的下一个 ID 重新开始。

现在，我的问题是，理想情况下，这个过程需要不到几秒钟，它需要 20 秒！根据记录，这是通过 LG Nexus 4 上的 20Mbit 的 Wifi。可以通过 Motoral Defy 和 Galaxy Ace 2 复制。有谁知道它为什么这么慢？

我是 Java/Android 的新手，所以我不知道我是否编码错误，或者 XML 解析速度很慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:27:35.807

看来您的代码正在将 XML 解析为 DOM，然后遍历 DOM 一次以提取您需要的数据。您应该考虑使用 SAX 解析器并在将解析的项目传递给您的应用程序时即时提取数据。

# java - 代码编译，但不返回任何内容

> ID：15506248
> 
> 赞同：3
> 
> 时间：2013-03-19T17:18:54.143
> 
> 标签：java

我有一个任务，我有两个类，一个驱动程序类，它使用扫描仪实用程序从键盘读取字符串，然后记录它的字母频率。（每个字母在输入的字符串中出现多少次）。我的程序应该继续输入文本行，直到您连续键入两个 Returns。然后代码应该打印字母频率，然后是一个报告，给出最常见的字母及其计数（如果最常见的字母并列，任何最常见的字母都可以）。我的代码也忽略了字母大小写 - 所以应该计算大写字母和小写字母。

我的司机班是

```
import java.util.*;

public class LetterDriver{
  public static void main(String[] args){
    Scanner s = new Scanner(System.in);
    String tScan = " ";
    while(tScan.length() > 0){
      tScan = s.nextLine();
    }
  }
} 
```

我的实际个人资料课程是

```
public class LetterProfile {
  int score[] = new int [26];

 public void countChars (String s) {
    s.toLowerCase();
    char a = 'a';
    for (int i = 0; i < s.length(); i++) {
      int next = (int)s.charAt(i) - (int) a;
      if ( next<26 && next >= 0)
        score[next]++;
    }
 }

    public void scoreLine (String lines) {  // prints letter + # of appearance
      int index = lines.length();
      for (int j = 0; j<index; j++) {
        score[j]++;
        System.out.println(j + score[j]);
     }
 }

    public int largestLength() { // finds most frequent letter
      int largest = 0;
      int largestindex = 0;
      for(int a = 0; a<26; a++) 
        if(score[a]>largest){
        largest = score[a];
        largestindex = a;
      }
      return largestindex;

    }

    public void printResults() {
       largestLength();
      System.out.println(largestLength());
    }
  } 
```

我的代码再次编译，当我运行它时，它允许我输入我的文本输入，但是当我返回两次时，我得到的只是空白输出。我认为这可能与我的配置文件类没有从我的驱动程序类中正确读取但无法找出问题所在有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:21:48.657

您只是在您的 main 方法中从扫描仪读取数据，您还没有在 Main 方法中实例化您的类 LetterProfile，所以它什么也不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:42:59.100

您只是从 main 方法中的输入获取数据，您必须在静态 main 方法中实例化名为 LetterProfile 的第二个类，因此它什么也不做。java从读取静态变量开始，然后是静态方法，然后是其他的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T17:44:35.743

你在主类的哪里调用了 LetterProfile 的方法？

请参考以下代码：-

```
import java.util.*;

public class LetterDriver{
  public static void main(String[] args){
    Scanner s = new Scanner(System.in);
    LetterProfile lp=new LetterProfile();
    String tScan = " ";
    while(tScan.length() > 0){
      tScan = s.nextLine();
    }
   lp._any_of_letter_profile_class_method();
  }
} 
```

或者

```
public class LetterDriver{
  public static void main(String[] args){
    Scanner s = new Scanner(System.in);
    LetterProfile lp=new LetterProfile();
    String tScan = " ";
    while(tScan.length() > 0){
      tScan = s.nextLine();
      lp._any_of_letter_profile_class_method();
    }

  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T17:23:57.220

您没有`LetterProfile`在任何地方使用课程！您只是在读取输入，但没有传递到`LetterProfile`. 在您的驱动程序中实例化`LetterProfile`类并调用相关方法。

您的驱动程序类可能如下所示：

```
public class LetterDriver{
  public static void main(String[] args){
    LetterProfile letterProfile = new LetterProfile();
    Scanner s = new Scanner(System.in);
    String tScan = " ";
    while(tScan.length() > 0){
      tScan = s.nextLine();
      letterProfile.countChars(tScan);
    }

    // Print the result
    letterProfile.printResults()
  }
} 
```

# svn - 为什么 svn log -r head 与 svn log -l 1 不同？

> ID：15506250
> 
> 赞同：1
> 
> 时间：2013-03-19T17:18:57.970
> 
> 标签：svn, logging, svn-repository

我刚刚在其中一个脚本中对 SVN 做了一个小改动（提交了那个改动）（在 SVN 存储库深处有几个目录）。

现在如果我跑

```
svn log -l 1 
```

在我的主目录中，我不会得到我的最后一次更改。虽然如果我跑

```
svn log -r head 
```

我会得到它。有什么不同 ？为什么`svn log -l 1`不将其限制在最后一次提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:29:08.600

`-r`您选中的默认修订版 ( ) 是`BASE`(range `BASE:1`)，在这种情况下是 on 后面的一个或多个修订版`HEAD`。如果您还没有更新您的工作目录，那么最后一次提交是否有一些目录关闭并不重要，`svn`只有在您使用该目录时才能确定它`svn up`。如果你运行`svn stat -v`，你可以看到你的各种目录实际上是什么版本。

# mysql - MySQL处理重复键错误插入具有多个唯一索引的表；不是多列唯一索引

> ID：15506252
> 
> 赞同：2
> 
> 时间：2013-03-19T17:19:02.587
> 
> 标签：mysql, mysql-error-1062, unique-index

如何从存储过程中找到哪个唯一索引失败？

我创建了一个具有单列主键和三个单列唯一索引的表：

```
CREATE TABLE tableName (
  id INT UNSIGNED NOT NULL AUTO_INCREMENT,
  col1 VARCHAR(50) NOT NULL,
  col2 VARCHAR(50) NOT NULL,
  col3 VARCHAR(50) NOT NULL,
  PRIMARY KEY (id),
  UNIQUE INDEX id_UNIQUE (id ASC),
  UNIQUE INDEX col1_UNIQUE (col1 ASC),
  UNIQUE INDEX col2_UNIQUE (col2 ASC),
  UNIQUE INDEX col3_UNIQUE (col3 ASC)
) ENGINE = InnoDB; 
```

我创建了一个存储过程来处理错误“1062”：“密钥 %d 的重复条目 %s”：

```
DELIMITER $$
CREATE PROCEDURE insertRecord (
        col1Value   VARCHAR(50), 
        col2Value   VARCHAR(50), 
        col3Value   VARCHAR(50), 
    OUT idValue     INT,
    OUT errColName  VARCHAR(50)
) BEGIN
    DECLARE EXIT HANDLER FOR 1062 BEGIN
        SET errColName = 'Insert Column Name Here';
    END;

    INSERT tableName SET
        col1 = col1Value, 
        col2 = col2Value, 
        col3 = col3Value;

    SET idValue = LAST_INSERT_ID();
END;
$$
DELIMITER ; 
```

我已经用不同的数据调用了存储过程 5 次以返回各种结果：

第一次插入尝试成功

```
-- Initialize parameters
SET @col1Val = 'MySQL', 
    @col2Val = 'Is', 
    @col3Val = 'Cool', 
    @Id = NULL, 
    @ErrColName = NULL;
-- 1st Insert Attempt
CALL insertRecord(@col1Val, @col2Val, @col3Val, @Id, @ErrColName);
-- Expected result: @Id = 1, @ErrColName = NULL
SELECT @Id '@Id', @ErrColName '@ErrColName'; 
```

第二次插入尝试失败，因为 col1 不是唯一的

```
-- Re-initialize parameters
SET @col1Val = 'MySQL', -- Intended to generate an error
    @col2Val = 'Is', 
    @col3Val = 'Cool', 
    @Id = NULL, 
    @ErrColName = NULL;
-- 2nd Insert Attempt
CALL insertRecord(@col1Val, @col2Val, @col3Val, @Id, @ErrColName);
-- Expected result: @Id = NULL, @ErrColName = 'col1'
SELECT @Id '@Id', @ErrColName '@ErrColName'; 
```

第三次插入尝试失败，因为 col2 不是唯一的

```
-- Re-initialize parameters
SET @col1Val = 'SQL', 
    @col2Val = 'Is', -- Intended to generate an error
    @col3Val = 'Cool', 
    @Id = NULL, 
    @ErrColName = NULL;
-- 3rd Insert Attempt
CALL insertRecord(@col1Val, @col2Val, @col3Val, @Id, @ErrColName);
-- Expected result: @Id = NULL, @ErrColName = 'col2'
SELECT @Id '@Id', @ErrColName '@ErrColName'; 
```

第 4 次插入尝试失败，因为 col3 不是唯一的

```
-- Re-initialize parameters
SET @col1Val = 'SQL', 
    @col2Val = 'For', 
    @col3Val = 'Cool', -- Intended to generate an error
    @Id = NULL, 
    @ErrColName = NULL;
-- 4th Insert Attempt
CALL insertRecord(@col1Val, @col2Val, @col3Val, @Id, @ErrColName);
-- Expected result: @Id = NULL, @ErrColName = 'col3'
SELECT @Id '@Id', @ErrColName '@ErrColName'; 
```

第 5 次插入尝试成功

```
-- Re-initialize parameters
SET @col1Val = 'SQL', 
    @col2Val = 'For', 
    @col3Val = 'Life', 
    @Id = NULL, 
    @ErrColName = NULL;
-- 5th Insert Attempt
CALL insertRecord(@col1Val, @col2Val, @col3Val, @Id, @ErrColName);
-- Expected result: @Id = 5, @ErrColName = NULL
SELECT @Id '@Id', @ErrColName '@ErrColName'; 
```

我需要在存储过程中做什么才能从存储过程中找到哪个唯一索引失败？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:58:19.517

[我在插入时击中了哪个唯一键](https://stackoverflow.com/questions/1486068/which-unique-key-is-hit-with-my-insert?rq=1)下找到了答案？. 这并不理想，但确实解决了问题。

以下是应用的解决方案：

```
 ...
    DECLARE EXIT HANDLER FOR 1062 BEGIN
        -- Check if col1Value is already in use
        IF EXISTS (
            SELECT 1
            FROM tableName
            WHERE col1 = col1value
            LIMIT 1
        ) THEN
            SET errColName = 'Col1';

        -- Check if col2Value is already in use
        ELSEIF EXISTS (
            SELECT 1
            FROM tableName
            WHERE col2 = col2value
            LIMIT 1
        ) THEN
            SET errColName = 'Col2';

        -- Check if col3Value is already in use
        ELSEIF EXISTS (
            SELECT 1
            FROM tableName
            WHERE col3 = col3value
            LIMIT 1
        ) THEN
            SET errColName = 'Col3';

        END IF;
    END;
    ... 
```

# jsf - JSF 不加载 css 文件，错误消息：“来自此 URL 的资源不是文本”

> ID：15506254
> 
> 赞同：0
> 
> 时间：2013-03-19T17:19:04.997
> 
> 标签：jsf, jsf-2, facelets

这是我的 JSF 文件头：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:f="http://java.sun.com/jsf/core" 
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui">
<h:head>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1"/>
    <title>#{txt.TXT_TITLE_LOGIN}</title>
    <link rel="stylesheet" type="text/css" href="scripts/styles.css"/>
    <link rel="shortcut icon" href="./images/favicon.ico"></link>
    <script src="./scripts/scripts.js" type="text/javascript"/>
</h:head>
<body... 
```

当我打开页面时，没有加载样式，看起来很丑，Firebug 显示：

```
<link href="scripts/styles.css" type="text/css" rel="stylesheet">
    The resource from this URL is not text: http://localhost:8080/EWC/scripts/styles.css
</link> 
```

...但文件在那里，位于 /EWC/scripts 位置。

当我打开具有相同标题的其他页面时，一切正常。然后我回到这个页面，它也可以。但是，当此页面在干净的浏览器现金后首次加载时，它再次发生。

什么地方出了错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:23:46.637

解决了。
类似问题的接缝与[会话到期时的授权重定向在提交 JSF 表单时不起作用，页面保持不变](https://stackoverflow.com/questions/14580267/jsf-redirect-isnt-working-when-button-submitted)。

以下代码没有捕获`css`文件请求，因此它们被转发到登录页面`gotoLogin()`（以防用户未登录）。

```
if( requestURI.startsWith(req.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER) )
    chain.doFilter(request, response);
    return;
else
    gotoLogin(null, request, response);
    return; 
```

我已经添加了

```
if( requestURI.endsWith("css") )
    chain.doFilter(request, response);
    return; 
```

......它的工作原理。

正如 BalusC 所说，我应该在标题中使用`<h:outputStylesheet>`,`<h:outputScript>`而`<h:graphicImage>`不是`<link>`,`<script>`而`<img>`这永远不会发生。

# windows - vim：使用变量执行 shell 命令并将输出重定向到新缓冲区

> ID：15506255
> 
> 赞同：2
> 
> 时间：2013-03-19T17:19:06.787
> 
> 标签：windows, vim

我想从下面的函数调用 msbuild 并将输出重定向到一个新的缓冲区。

我的问题是我需要为文件名使用一个变量，因此不能使用“！” （我可以吗？），当我使用 exe 或 system() read 抱怨我没有给它一个正确的文件。

```
func! myFunction()
    let findstr = "findstr /s /m " . '"' . expand("%:t") . '"' . " *.vcxproj"
    for project in split(system(findstr), nr2char(10))
        echo "Building '" . project . "'"
        let msbuild = "c:\\windows\\Microsoft.NET\\Framework\\v4.0.30319\\msbuild.exe" . " " . project . " " . "/t:rebuild /p:configuration=debug"
        :tabnew | r system(msbuild) "<--THIS LINE HERE
    endfor
endfunc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:16:13.037

该`:read`命令采用文件而不是 vim 表达式。但是它可以通过`:read !{cmd}`. 例子`:%r!ls`。使用该`:execute`命令，您可以使用变量构建新命令。

```
exe '%r!' . msbuild 
```

或者，`:put`如果您想使用类似的表达式，您可以与表达式寄存器一起使用`system()`。（可能想按照这个`:0d_`删除第一个空行）

```
put=system(msbuild) 
```

现在看起来您正在尝试构建您的项目并获取错误列表。我建议您查看`:make`、`'makeprg'`选项和`quickfix`列表，因为这是构建项目的更 vim 方式。

如需更多帮助，请参阅：

```
:h :r!
:h :exe
:h :pu
:h @=
:h :make
:h 'makeprg'
:h quickfix 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:43:26.773

这是一个可以用来执行任意 shell 命令并在新窗口中显示它们的输出的函数（你可以把它放在你的 _vimrc 中）：

```
let s:lastcmd = ''
function! s:RunShellCommand(cmdline, bang)
    " Support for repeating last cmd with bang:
    let _ = a:bang != '' ? s:lastcmd : a:cmdline == '' ? '' : join(map(split(a:cmdline), 'expand(v:val)'))

    if _ == ''
        return
    endif

    let s:lastcmd = _
    let bufnr = bufnr('%')
    let winnr = bufwinnr(_)
    " You can position the new window whenever you want, I chose below + right:
    silent! execute  winnr < 0 ? 'belowright new ' . fnameescape(_) : winnr . 'wincmd w'
    " I could set buftype=nofile, but then no switching back and forth buffers.
    " The results are presented just for viewing, not editing, modify at will:
    setlocal buftype=nowrite bufhidden=wipe nobuflisted noswapfile wrap number

    setlocal modifiable
    silent! :%d
    " Useful for debugging, if you encounter issues with fnameescape():
    call setline(1, 'You entered:  ' . a:cmdline)
    call setline(2, 'Expanded to:  ' . _)
    call append(line('$'), substitute(getline(2), '.', '=', 'g'))

    silent execute '$read !' . _
    silent! execute 'autocmd BufUnload <buffer> execute bufwinnr(' . bufnr . ') . ''wincmd w'''
    " If resizing is unwanted for commands with too much output, remove this line:
    silent! execute 'autocmd BufEnter  <buffer> execute ''resize '' .  line(''$'')'
    " You can use <localleader>r to re-execute the last command:
    silent! execute 'nnoremap <silent> <buffer> <localleader>r :call <SID>RunShellCommand(''' . _ . ''', '''')<CR>'

    execute 'resize ' . line('$')

    setlocal nomodifiable
    1
endfunction " RunShellCommand(cmdline)
command! -complete=shellcmd -nargs=* -bang Shell call s:RunShellCommand(<q-args>, '<bang>') 
```

像这样使用：

```
:Shell gcc -ggdb -o test test.c && ./test 
```

# javascript - jquery noconflict 破坏了一些 javascript

> ID：15506258
> 
> 赞同：0
> 
> 时间：2013-03-19T17:19:19.397
> 
> 标签：javascript, jquery

我知道这个问题之前已经被问过了，我已经看过并且无法解决我的问题

```
<script type="text/javascript">
$.noConflict(true);
</script> 
```

当我插入此代码时，“jquery-latest.min.js”停止工作

这是有冲突的线

```
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script> 
```

和

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

我可能是我把代码放在了错误的地方......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:20:59.597

您只需要对 jquery 的一个引用。1.4.2 是一个非常旧的版本，您是否有理由同时包含该版本以及最新版本？

删除您的参考之一，您就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:27:08.263

尝试`migrate`：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js">
</script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script> 
```

### 并删除旧的。

## 从文档：

### jQuery 迁移插件

> 我们创建了 jQuery Migrate 插件来简化从旧版本 jQuery 的转换。该插件恢复了已弃用的功能和行为，以便旧代码仍能在 jQuery 1.9 及更高版本上正常运行。使用未压缩的开发版本来诊断兼容性问题，它将在控制台上生成警告，您可以使用这些警告来识别和修复问题。使用压缩的生产版本来简单地修复兼容性问题，而不会生成控制台警告。

[在这里阅读更多](http://jquery.com/download/)

# jquery - 内容区域中的 jQuery Accordian 填充

> ID：15506263
> 
> 赞同：-3
> 
> 时间：2013-03-19T17:19:44.667
> 
> 标签：jquery, jquery-ui-accordion

使用 jQuery 版本 1.10.2 手风琴

我使用来自网站的样本作为我的模板 - 但面板内的内容区域在内面板的所有四个侧面都有如此大的空间......

我需要回收一些空间 - 我如何回收面板左侧、右侧、顶部和底部的一些空间？

谢谢你

它不是同一个问题 - 这个问题在面板内工作......上一个问题是手风琴面板之间的空间。

你们将问题标记为已回答和重复的人没有阅读问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:48:40.143

如果您阅读文档，在[theming](http://docs.jquery.com/UI/Accordion#theming)下，您将看到由 jQuery Accordion 创建的 HTML。每个部分的内容都使用类`ui-accordion-content`。

您可以在自己的样式表中修改此类以更改[填充](https://developer.mozilla.org/en-US/docs/CSS/padding)

# algorithm - 算法 - 根据两个标准平等地填充不同大小的容器

> ID：15506265
> 
> 赞同：4
> 
> 时间：2013-03-19T17:19:49.177
> 
> 标签：algorithm, sorting

我正试图围绕一个算法。我以前从未编写过算法，也不知道如何解决这个问题。这是它的要点：

我可以有 n 个容器，每个容器都有两组对我很重要的数字：内存量 (x) 和逻辑处理器的数量 (y) 每个容器可以有不同的值。

每个虚拟机都有一定数量的内存 (x) 和一定数量的逻辑处理器 (y)。我正在尝试创建一种算法，该算法将平均平衡集群中所有主机的内存负载（x）和逻辑处理器数量（y）。它不会在所有主机之间真正相等，但所有主机将在每台主机的 10% +/- 范围内。

我将如何解决这个问题，我会在数学上假设。

![插图](../Images/ad1e9f941875358c823c6d70b36b632b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:34:50.210

如果我正确理解了您的问题，您希望最小化主机的相对负载，以便每个主机的负载与其他主机的偏差不超过 10%。所以我们想通过找到一个**最小值**来优化主机之间的**“相对负载”**。

 **为此，您可以使用某种[组合优化](http://en.wikipedia.org/wiki/Combinatorial_optimization)来达到可接受或最优的解决方案。像[模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)或[禁忌搜索](http://en.wikipedia.org/wiki/Tabu_search)这样的经典元启发式算法就可以完成这项工作。

您的问题的示例通用步骤：

*   通过将每个 VM 随机分配给主机来定义初始状态
*   通过在主机之间迭代交换 VM 来查找新状态，直到：
    *   找到了一些可接受的解决方案，或
    *   迭代次数已用尽，或
    *   满足其他一些条件（如模拟退火的“温度”）
*   开发一个比较函数来决定何时在每次迭代中切换状态（解决方案）
    *   在您的情况下，您应该测量所有主机之间的相对负载，并且仅当新状态的相对负载**低于**当前状态时才交换状态。

这当然假设您将使用某种形式的逻辑表示而不是实际的 VM 来执行此算法。一旦您找到模拟您的真实条件的解决方案，您就可以将它们物理地应用到您的虚拟机/主机配置中。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:55:33.067

您现在可能已经继续前进，但是如果您回到这个问题，这个答案可能会很有用。如果任何部分令人困惑，请告诉我，我会尽力澄清。

**您的问题是没有**旋转的 2D 可变尺寸箱包装的情况。您的尺寸是内存和 CPU，而不是长度和宽度（因此没有旋转）。

我会使用一个简单的离线打包算法。（离线意味着你的虚拟机和主机都是事先知道的）我使用的简单打包是：

1.  按所需内存对未分配的虚拟机进行排序
2.  按可用内存对您的主机集进行排序
3.  找到可容纳 VM 的可用内存最多的主机并将其分配给该主机（请务必检查 CPU 容量。可用内存最多的主机可能没有足够的 CPU 资源）
4.  从列表中删除虚拟机
5.  减少主机的可用内存和 CPU 容量
6.  如果您仍有虚拟机，请转到 2

以下是我定义虚拟机和主机的方式：

```
[DebuggerDisplay("{Name}: {MemoryUsage} | {ProcessorUsage}")]
class VirtualMachine
{
    public int MemoryUsage;
    public string Name;
    public int ProcessorUsage;

    public VirtualMachine(string name, int memoryUsage, int processorUsage)
    {
        MemoryUsage = memoryUsage;
        ProcessorUsage = processorUsage;
        Name = name;
    }
}

[DebuggerDisplay("{Name}: {Memory} | {Processor}")]
class Host
{
    public readonly string Name;
    public int Memory;
    public Host Parent;
    public int Processor;

    public Host(string name, int memory, int processor, Host parent = null)
    {
        Name = name;
        Memory = memory;
        Processor = processor;
        Parent = parent;
    }

    public bool Fits(VirtualMachine vm) { return vm.MemoryUsage <= Memory && vm.ProcessorUsage <= Processor; }
    public Host Assign(VirtualMachine vm) { return new Host(Name + "_", Memory - vm.MemoryUsage, Processor - vm.ProcessorUsage, this); }
} 
```

主机`Fits`和`Assign`方法对于检查 VM 是否适合，并减少主机可用内存/CPU 非常重要。我创建了一个“Host-Prime”来表示资源减少的主机，删除原始主机并将 Host-Prime 插入到主机列表中。这是bin pack求解算法。如果您针对大型数据集运行，应该有很多机会加快执行速度，但这对于小型数据集来说已经足够了。

```
class Allocator
{
    readonly List<Host> Bins;
    readonly List<VirtualMachine> Items;

    public Allocator(List<Host> bins, List<VirtualMachine> items)
    {
        Bins = bins;
        Items = items;
    }

    public Dictionary<Host, List<VirtualMachine>> Solve()
    {
        var bins = new HashSet<Host>(Bins);
        var items = Items.OrderByDescending(item => item.MemoryUsage).ToList();

        var result = new Dictionary<Host, List<VirtualMachine>>();

        while (items.Count > 0)
        {
            var item = items.First();
            items.RemoveAt(0);
            var suitableBin = bins.OrderByDescending(b => b.Memory).FirstOrDefault(b => b.Fits(item));
            if (suitableBin == null)
                return null;

            bins.Remove(suitableBin);

            var remainder = suitableBin.Assign(item);
            bins.Add(remainder);

            var rootBin = suitableBin;
            while (rootBin.Parent != null)
                rootBin = rootBin.Parent;
            if (!result.ContainsKey(rootBin))
                result[rootBin] = new List<VirtualMachine>();
            result[rootBin].Add(item);
        }
        return result;
    }
} 
```

所以你现在有一个打包算法，但你仍然没有一个负载平衡解决方案。由于该算法会将虚拟机打包到主机上，而不用担心内存使用的平衡，因此我们需要另一个级别的解决方案。为了达到一些粗略的记忆平衡，我采取了蛮力的方法。减少每个主机上的初始内存以表示目标使用目标。然后解决以查看您的虚拟机是否适合减少的可用内存。如果没有找到解决方案，请放宽内存限制。重复此操作，直到找到解决方案，或者没有可能（使用给定的算法）。这应该给出最佳内存负载的粗略近似值。

```
class Program
{
    static void Main(string[] args)
    {
        //available hosts, probably loaded from a file or database
        var hosts = new List<Host> {new Host("A", 4096, 4), new Host("B", 8192, 8), new Host("C", 3072, 8), new Host("D", 3072, 8)};
        var hostLookup = hosts.ToDictionary(h => h.Name);

        //VMs required to run, probably loaded from a file or database
        var vms = new List<VirtualMachine>
                      {
                          new VirtualMachine("1", 512, 1),
                          new VirtualMachine("2", 1024, 2),
                          new VirtualMachine("3", 1536, 5),
                          new VirtualMachine("4", 1024, 8),
                          new VirtualMachine("5", 1024, 1),
                          new VirtualMachine("6", 2048, 1),
                          new VirtualMachine("7", 2048, 2)
                      };

        var solution = FindMinumumApproximateSolution(hosts, vms);
        if (solution == null)
            Console.WriteLine("No solution found.");
        else
            foreach (var hostAssigment in solution)
            {
                var host = hostLookup[hostAssigment.Key.Name];
                var vmsOnHost = hostAssigment.Value;

                var xUsage = vmsOnHost.Sum(itm => itm.MemoryUsage);
                var yUsage = vmsOnHost.Sum(itm => itm.ProcessorUsage);
                var pctUsage = (xUsage / (double)host.Memory);
                Console.WriteLine("{0} used {1} of {2} MB {5:P2} | {3} of {4} CPU", host.Name, xUsage, host.Memory, yUsage, host.Processor, pctUsage);
                Console.WriteLine("\t VMs: " + String.Join(" ", vmsOnHost.Select(vm => vm.Name)));
            }
        Console.ReadKey();
    }

    static Dictionary<Host, List<VirtualMachine>> FindMinumumApproximateSolution(List<Host> hosts, List<VirtualMachine> vms)
    {
        for (var targetLoad = 0; targetLoad <= 100; targetLoad += 1)
        {
            var solution = GetTargetLoadSolution(hosts, vms, targetLoad / 100.0);
            if (solution == null)
                continue;
            return solution;
        }
        return null;
    }

    static Dictionary<Host, List<VirtualMachine>> GetTargetLoadSolution(List<Host> hosts, List<VirtualMachine> vms, double targetMemoryLoad)
    {
        //create an alternate host list that reduces memory availability to the desired target
        var hostsAtTargetLoad = hosts.Select(h => new Host(h.Name, (int) (h.Memory * targetMemoryLoad), h.Processor)).ToList();

        var allocator = new Allocator(hostsAtTargetLoad, vms);
        return allocator.Solve();
    }
} 
```**

# spring-mvc - 当dijit对话框关闭时Spring mvc持久化数据

> ID：15506267
> 
> 赞同：0
> 
> 时间：2013-03-19T17:19:52.990
> 
> 标签：spring-mvc, dojo

我有一个创建视图，用户在其中填写一些数据，如果他们单击一个按钮，则会打开一个 dijit.dialog，其中包含要选择的项目列表。一切正常，除了当对话框确认所选项目时，它会转到控制器执行一些逻辑并刷新创建视图，删除用户之前填写的数据。

如何使对话框保留用户已填写的内容（可能在打开之前转到控制器设置数据）？或者可能尝试关闭对话框，刷新我在对话框上显示的列表以及使用用户选择的创建视图的一部分。

不确定我是否足够清楚。

**编辑**

我的项目基于 Spring Roo：

```
<form:create .....>
 .. inputs and tables ..
  <input type="button" ../> //goes to controller and loads page with dialog open

<tiles:insertTemplate template="/WEB-INF/views/dialog.jspx" />

</form> 
```

对话框代码：

```
<div id="dialog" dojoType="dijit.Dialog">
  <form id="items" dojoType="dijit.form.Form">
    <jsp:doBody/>
    <input id="save" type="submit" name="sendDialogData">
  </form>
</div> 
```

我认为这会使对话框成为表单的一部分，但只是用 firebug 进行了检查，它是在“包装器”（包含所有内容的 div）之后创建的

# svg - D3 Sunburst 文本的剪辑路径

> ID：15506269
> 
> 赞同：2
> 
> 时间：2013-03-19T17:20:11.733
> 
> 标签：svg, d3.js, sunburst-diagram

我正在尝试基于旭日形图实现 d3 可视化，并且我找到了一个几乎完美的在线示例，我已经开始使用
[http://tributary.io/inlet/4127332/](http://tributary.io/inlet/4127332/)：

![在此处输入图像描述](../Images/43318d113c56967d41d6c5fc48be8ddb.png)

我的主要问题是我还需要将文本剪辑到片段中，我尝试使用 svg 剪辑路径，但我微薄的 d3 技能让我失望了。对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:16:51.683

所以我第一次剪辑文本的尝试没有奏效，我认为这是因为弧的坐标空间没有按照你想要的方式与文本的坐标空间对齐，如果你正在使用弧生成器，就像你一样。

我发现如果我将剪辑应用于您为每个节点创建的组，那么它就像一个魅力。有一个警告。当我尝试生成我的剪辑路径然后应用它们时，节点连接到元素的顺序不同，因此错误的路径正在剪辑错误的文本。我通过向每个数据元素添加一个 id 来解决这个问题。[你可以在这里](http://tributary.io/inlet/5200169)看到最终版本

重要的部分是添加剪辑路径（注意使用新的 id 字段）：

```
svg.append('defs')
   .selectAll("clipPath")
   .data(partition.nodes)
   .enter().append('svg:clipPath')
   .attr('id', function(d,i) { return d.id;})
   .append('path').attr('d', arc); 
```

然后你只需要在你的节点组上引用它们（再次使用 id）：

```
group = 
   svg.selectAll("g")
   .data(partition.nodes)
   .enter().append('svg:g')
   .attr('clip-path', function(d,i) { return 'url(#' + d.id + ')';}); 
```

在支流中，我将 svg 数据连接放在首位，以便“defs”节点出现在通常的位置（首先在 svg 标记之后），但我认为这在技术上没有必要。

# mysql - MySQL 按状态查询计数

> ID：15506270
> 
> 赞同：1
> 
> 时间：2013-03-19T17:20:16.713
> 
> 标签：mysql, count, records

这是我的设置

```
database = mine
table = mytable
field = hair
field = eyes
field = state 
```

目前，我可以运行一个查询，让我计算任何在头发和眼睛字段中具有“棕色”的人的数量。我在跑：

```
SELECT count(*)
FROM mine.mytable
WHERE hair = 'brown' OR eyes = 'brown' 
```

但我需要对在任一领域显示棕色眼睛或棕色头发的每个州进行计数。我知道如何做到这一点的唯一方法是将 AND state = 'NY' 作为查询的一部分，但这意味着我需要对每个组合运行查询 50 次才能获得每个状态的计数。我将如何运行查询以在不运行查询 50 次的情况下为我提供显示每个状态的计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:21:50.047

```
SELECT count(*) state_count,IFNULL(state,'Total') state
FROM mine.mytable
WHERE hair = 'brown' OR eyes = 'brown'
GROUP BY state WITH ROLLUP; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T17:22:47.203

您需要按州分组以按州计数。

```
SELECT state, COUNT(*) count
FROM   mine.mytable.
WHERE hair = 'brown' OR eyes = 'brown'
GROUP BY state 
```

# fifo - [FIFO] 从 FIFO 读取时 getline 阻塞

> ID：15506271
> 
> 赞同：0
> 
> 时间：2013-03-19T17:20:19.317
> 
> 标签：fifo

我有两个过程。一种是生产者，它将数据写入以 O_RDWR 模式打开的 FIFO 文件。另一个进程是消费者。它使用文件指针以“读取模式”打开 FIFO。

当生产者向 FIFO 写入数据时，消费者正在使用 getline 从 FIFO 中读取数据。当生产者停止写入数据时，getline 返回 -1 并带有“ferror”。在生产者没有向 FIFO 写入任何数据的 2-3 小时后，getline 调用阻塞了消费者进程。

谁能解释为什么会这样？

# ampersand - XSLT 在遇到 & 符号时崩溃

> ID：15506272
> 
> 赞同：1
> 
> 时间：2013-03-19T17:20:24.610
> 
> 标签：ampersand

我目前在尝试输出包含与符号 (&) 的某个 XML 标记时遇到了一些麻烦。

更具体地说，当我尝试输出以下标签时。我收到一个错误

```
<fullname>Ben & Jerry</fullname> 
```

但是使用以下标签运行得很好

```
<fullname>Ben and Jerry</fullname> 
```

我已经用下面的代码试过了

```
<xsl:template match="fullname">
    <xsl:apply-templates/>
</xsl:template> 
```

我也试过

```
<xsl:template match="fullname">
    <xsl:value-of-select="." disable-output-escaping="Yes"/>
</xsl:template> 
```

两者都导致了错误。我让它工作的唯一方法是像这样使用 CDATA

```
<fullname><![CDATA[Ben & Jerry]]></fullname> 
```

但是，我无法控制收到的 XML 文件，因此这不是一个可行的选择。我可以在 XSLT 中做些什么来规避/解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:22:59.717

＆符号不能在格式良好的 XML 中显示为自身。你的例子应该是

```
<fullname>Ben &amp; Jerry</fullname> 
```

我认为您无法使用任何 XSLT 处理器来解决这个问题。您需要修复生成 XML 的任何内容，使其格式正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:14:52.197

> 更具体地说，当我尝试输出以下标签时。我收到一个错误
> 
> `<fullname>Ben & Jerry</fullname>`

实际上，这不是标签。它是一个开始标签，后跟一些无效内容，后跟一个结束标签。

您不能使用 XSLT 输出无效内容。如果必须输出非 XML 的内容，则需要使用非 XML 工具来完成。而且您更有可能在非 XML 论坛上获得建议。

你没有说清楚的是你的输入和输出到底是什么。你说你试图输出无效的 XML，但你没有说输入是什么。

# c++ - C++ 用户输入字符串错误

> ID：15506275
> 
> 赞同：1
> 
> 时间：2013-03-19T17:20:51.520
> 
> 标签：c++, stl

当我尝试将用户输入作为字符串获取时，我遇到了一个奇怪的错误。

我有正确的包含；

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std; 
```

这是代码，执行时出现错误；

```
write("Enter your name");
string name = readString();
write(name); 
```

上面的代码调用了这两个函数；

```
void game::write(std::string message)
{
    cout << message << "\n";
}

string game::readString()
{
    string userInput = NULL;
    std::cin >> userInput;
    return userInput;
} 
```

这是我得到的错误： ![C++ 错误](../Images/19e516edc25d48ef714894c589a59025.png)

我已经尝试重新构建解决方案 - 我应该使用 char 数组而不是字符串作为应用程序中文本的数据容器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:22:07.337

您不能从`NULL`指针初始化字符串。尝试：

```
string userInput = ""; 
```

或者干脆

```
string userInput; 
```

请参见[此处](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)并检查 ctor 编号。5、基于C++标准：

> ### 21.4.2 basic_string 构造函数和赋值运算符 [string.cons]
> 
> `basic_string(const charT* s, const Allocator& a = Allocator());`
> 
> ⁸          *要求：* s 不得为空指针。

# sql - sql developer访问中的round语句

> ID：15506279
> 
> 赞同：0
> 
> 时间：2013-03-19T17:21:11.577
> 
> 标签：sql, oracle, oracle-sqldeveloper

我正在尝试复制一个查询，但我遇到了这条线的问题。有人可以帮忙吗？

```
Round([AMOUNT]*[AG_COEF],0) AS Exp, 
```

给出：

```
Error at Command Line:6 Column:9
Error report:
SQL Error: ORA-00936: missing expression
00936\. 00000 -  "missing expression" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:25:14.987

尝试

```
Round(AMOUNT*AG_COEF,0) AS Exp 
```

# c++ - 如何在 Cython 中使用 C++ 运算符 []？

> ID：15506284
> 
> 赞同：3
> 
> 时间：2013-03-19T17:21:28.153
> 
> 标签：c++, python, cython

我需要包装一个定义 operator[] 的 C++ 类 FooContainer：

```
//foo.h:
#include <vector>
using namespace std;

struct Foo
{
  Foo()
    : value(42) {};
  int value;   
};

class FooContainer
{
public:
    FooContainer() { this->values = vector<Foo> (100) ;}
    Foo operator[](int i) {return values[i];}; // <-- the function I need to call

private:
  vector<Foo> values;    

}; 
```

我正在尝试编写相应的 .pyx 文件，但无论我尝试什么，我都无法弄清楚如何使用 Foo::operator

```
from cython.operator cimport dereference as deref

cdef extern from "foo.h":
   cdef cppclass CppFoo "Foo":
     pass

cdef extern from "foo.h":
   cdef cppclass CppFooContainer "FooContainer":
     FooContainer()
     Foo operator[](int)

cdef class Foo:
    cdef CppFoo * thisptr

cdef class FooContainer:
    cdef CppFooContainer* thisptr

    def __cinit__(self):
       self.thisptr = new CppFooContainer ()

    def __dealloc__(self):
       if self.thisptr:
           del self.thisptr
           self.thisptr = <CppFooContainer*> 0

    def __getitem__(self, int i):
       cdef CppFoo f  = deref(self.thisptr)[i]  #just one out of many try 
```

我可能错过了简单的解决方案，但我总是以错误告终：“无法将 Python 对象转换为 'CppFoo'”。使用 operator[] 的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:13:16.093

的用法`operator[]`是正确的（Cython 不需要数组索引运算符的特殊语法），但是

```
cdef extern from "foo.h":
   cdef cppclass CppFooContainer "FooContainer":
     FooContainer()
     Foo operator[](int) 
```

应该：

```
cdef extern from "foo.h":
   cdef cppclass CppFooContainer "FooContainer":
     CppFooContainer()
     CppFoo operator[](int) 
```

因为`FooContainer`并`Foo`引用之后声明的 Python 扩展类类型，而不是“foo.h”中的 C++ 类类型。

# c# - 如何在实体框架中模拟存储库和工作单元模式？

> ID：15506285
> 
> 赞同：3
> 
> 时间：2013-03-19T17:21:33.520
> 
> 标签：c#, .net, unit-testing, mocking, nunit

我是起订量和单元测试的新手。我想用实体框架 5 测试我的存储库和工作单元模式。但我不明白我从哪里开始以及如何开始。

我的存储库界面：

```
public interface ISmRepository<T>
{
    void Add(T entity);
    void Remove(T entity);
    void Update(T entity);
    IQueryable<T> SearchFor(Expression<Func<T, bool>> expression);
    IQueryable<T> GetAll();
    T GetById(Int64 id);
} 
```

我的仓库：

```
public class SmReporitory<T> : ISmRepository<T> where T : class, IEntity, new()
{
    private readonly DbSet<T> _dbSet;
    private readonly DbContext _dbContext;

    public SmReporitory(DbContext dbContext)
    {
        _dbSet = dbContext.Set<T>();
        _dbContext = dbContext;
    }

    public void Add(T entity)
    {
        _dbSet.Add(entity);
    }

    public void Remove(T entity)
    {
        _dbSet.Remove(entity);
    }

    public void Update(T entity)
    {
        _dbContext.Entry(entity).State = EntityState.Modified;
    }

    public IQueryable<T> SearchFor(Expression<Func<T, bool>> expression)
    {
        return _dbSet.Where(expression);
    }

    public IQueryable<T> GetAll()
    {
        return _dbSet;
    }

    public T GetById(long id)
    {
        return _dbSet.FirstOrDefault(x => x.Id == id);
    }
} 
```

我的工作单元界面：

```
public interface ISmUnitOfWork : IDisposable
{
    ISmRepository<BreakdownCause> BreakdownCasus { get; }
    ISmRepository<BreakDownType> BreakDownTypes { get; }
    ISmRepository<CompanyInformation> CompanyInformations { get; }
    void Save();
} 
```

我的工作单元实施：

```
public class SmUnitOfWork : ISmUnitOfWork
{
    private readonly DbContext _dbContext;
    private ISmRepository<BreakDownType> _breakDownTypes;
    private ISmRepository<BreakdownCause> _breakdownCasus;
    private ISmRepository<CompanyInformation> _companyInformations;

    public SmUnitOfWork() : this(new SmDbContext())
    {
    }

    public SmUnitOfWork(SmDbContext smDbContext)
    {
        _dbContext = smDbContext;
    }

    public ISmRepository<BreakdownCause> BreakdownCasus
    {
        get { return _breakdownCasus ?? (_breakdownCasus = new SmReporitory<BreakdownCause>(_dbContext)); }
    }

    public ISmRepository<BreakDownType> BreakDownTypes
    {
        get { return _breakDownTypes ?? (_breakDownTypes = new SmReporitory<BreakDownType>(_dbContext)); }
    }

    public ISmRepository<CompanyInformation> CompanyInformations
    {
        get { return _companyInformations ?? (_companyInformations = new SmReporitory<CompanyInformation>(_dbContext)); }
    }
    public void Save()
    {
        try
        {
            _dbContext.SaveChanges();
        }
        catch
        {
            throw;
        }
    }
    public void Dispose()
    {
        if (_dbContext!=null)
        {
            _dbContext.Dispose();
        }
    } 
```

现在我想测试 ISmRepository 接口方法的。

我已经在一个类库项目中引用了 NUnit 和 Moq。现在我需要一个起点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-12T05:36:24.630

您确实不需要在编写存储库时对其进行测试。原因是，正如 Mystere Man 所暗示的，您基本上只是在包装 Entity Framework API。当使用 EF 并使用我自己的存储库或某些存储库时，`DbContext`我不担心在集成测试之前测试这些数据访问调用，原因已经说明。

但是，您当然可以（并且应该）模拟您的存储库和工作单元，以测试所有其他依赖于它们的代码。通过测试您的存储库，您实际上是在测试 Entity Framework 的功能，而且我确信已经比您更彻底地测试了它。您可以做的一件事是不要将业务逻辑放入直接与 EF 交互的存储库中，而是将其移至利用存储库进行数据访问的另一层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:29:06.047

简短的回答是你真的不能。至少不完全。其原因是由于固有的 sql 翻译，moq'd EF 上下文的行为方式与真实上下文不同。

有很多代码会传递 Moq'd 上下文，但会在真实上下文中爆炸。因此，您不能在 EF 上下文中依赖 Moqing 的假货，而必须使用集成测试。

# qt - QEventfilter 类的全局事件捕获

> ID：15506298
> 
> 赞同：1
> 
> 时间：2013-03-19T17:21:57.943
> 
> 标签：qt, events, qevent

我想为我的 Qt 应用程序添加一个帮助网页。用户可以使用 Qt::WhatsThis “工具提示”来获得关于主题的解释和网页的 URL。我用 Qt Designer 编辑 WhatsthisTooltips 并让它语言独立。

现在我创建了一个用于过滤的“LinkFilter”类，将它安装在视图类中并对 QEvent::WhatsThisClicked 事件做出反应。这工作正常。

现在我会在我的应用程序中捕获每个 QEvent::WhatsThisClicked，但是在每个对话框/视图/动作/小部件上安装它看起来真的很乱。这有某种全局事件处理程序，我可以安装我的“LinkEvent”类吗？必须有一个很好的 Qt 风格的方法来解决这个问题。

为了安装 EventFilter，我强烈关注这个视频教程[http://youtu.be/DHgbYxpZkbg](http://youtu.be/DHgbYxpZkbg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:32:07.540

[http://qt-project.org/doc/qt-4.8/qapplication.html#notify](http://qt-project.org/doc/qt-4.8/qapplication.html#notify)

本质上，您需要继承`QApplication`并覆盖此函数。然后您可以检查它是否是您正在寻找的事件类型并采取相应的行动。

# paypal - 需要一个 API 代表第三方接受付款

> ID：15506301
> 
> 赞同：1
> 
> 时间：2013-03-19T17:22:06.843
> 
> 标签：paypal, payment-gateway, payment

我需要帮助寻找支付处理器。我们需要能够接受买家对实物商品的付款，并将资金存入我们客户的账户。我们真的不希望保留资金并转移它们，但如果这是我们唯一的选择，那就这样吧。

我们一直在研究 Paypal API，但我似乎不明白如何完成这个场景。

任何帮助或建议表示赞赏！

编辑：我们希望避免让我们的客户在我们以外的地方开派对。Stripe 要求我们的客户也与他们一起创建一个帐户。对于希望快速与我们签约的人来说，这有点让人头疼……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:26:55.150

让您的客户开设一个 Paypal 帐户供自己使用，并从您的软件直接向该帐户付款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:58:03.927

如果您希望资金直接转给您的客户，那么他们将需要一个他们自己的帐户，以便您将这笔钱汇给他们。不知道你还期待什么..？？

[不过，您可以使用Adaptive Accounts API](https://www.x.com/developers/paypal/products/adaptive-accounts)将其与您自己网站上的注册相关联。Stripe 有类似的东西叫做[Stripe Connect](https://stripe.com/blog/stripe-connect)。

不过，Stripe 会让你等上一周才能收到钱，所以我建议你使用 PayPal。

# javascript - 使用 JavaScript 更改 iframe src 不起作用

> ID：15506303
> 
> 赞同：4
> 
> 时间：2013-03-19T17:22:20.157
> 
> 标签：javascript, iframe, youtube

我正在尝试从 img 中提取 YouTube 视频 ID，然后将其传递到 iframe 以播放嵌入的视频。我的 iframe 位于一个 div 中，在单击 img 之前它是不可见的：

```
<div id="testimonialbackground" style="display:none;">  
    <a href="#" onclick="toggledisplay(this);">Click here</a> to close the video  
    <iframe id="testimonialframe" src="" frameborder="0" allowfullscreen></iframe>  
</div>  
<img src="http://img.youtube.com/vi/x-ROeKGEYSk/1.jpg" onclick="toggledisplay(this);" /> 
```

这里是 JavaScript。它工作正常，直到这一行`elem.setAttribute('src', newsrc);`，此时我的页面冻结：

```
function toggledisplay(obj) {  
    var div = document.getElementById('testimonialbackground');  
    var elem = document.getElementById('testimonialframe');  
    if (div.style.display == "block") {  
        div.style.display = "none";  
        elem.setAttribute('src', "");  
    }  
    else {  
        div.style.display = "block";  
        var explosion = obj.src.split("/");  
        var newsrc = "http://www.youtube.com/embed/" + explosion[4] + "?autoplay=1";  
        elem.setAttribute('src', newsrc); // <---- BROKEN LINE RIGHT HERE
        elem.contentWindow.location.reload(); //to refresh the iframe  
    }  
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T17:30:05.637

`src`是您可以直接访问的属性，因此`elem.setAttribute('src', newsrc);`只需使用以下命令即可：

```
elem.src = "http://www.youtube.com/embed/" + explosion[4] + "?autoplay=1"; 
```

一旦你设置了`src`，就不需要刷新了`iframe`，因为设置`src`会自动完成。请参阅[使用 JavaScript 重新加载/刷新 iframe 的最佳方法是什么？](https://stackoverflow.com/questions/86428/whats-the-best-way-to-reload-an-iframe-using-javascript) 有关重新加载的更多信息`iframes`。（基本上它指出您可以将`src`an设置`iframe`为自身以刷新`iframe`）。

# laravel - Laravel 4：作曲家更新后 Path() 不再工作

> ID：15506308
> 
> 赞同：1
> 
> 时间：2013-03-19T17:22:28.257
> 
> 标签：laravel, laravel-4

我`composer update`刚才在 Laravel 4 上运行。我试图解决一个问题`Input::json()`，该问题在之前的`composer update`. 现在，`path()`返回一个未定义的函数错误。

泰勒改变了其中任何一个吗？如果他把它们拿出来，有人知道他们的替代品吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T12:44:50.737

JSON 输入现已合并到`Input::all()`，因此您可以使用与表单数据输入相同的 JSON 接口。或者，您可以使用`Input::json()->all()`.

要生成 URL，您现在需要`URL`外观（请参阅[Illuminate\Routing\UrlGenerator](https://github.com/laravel/framework/blob/master/src/Illuminate/Routing/UrlGenerator.php)）...

```
URL::to('some/url')
URL::action('MyController@action')
URL::route('my.route') 
```

在磁盘上生成路径（参见[Illuminate\Support\helpers.php](https://github.com/laravel/framework/blob/master/src/Illuminate/Support/helpers.php)）...

```
app_path()      // Path to 'app'
base_path()     // Path to project root
public_path()   // Path to 'public'
storage_path()  // Path to 'app/storage' 
```

# java - 挣扎着用spring SimpleJdbcCall调用Oracle函数

> ID：15506309
> 
> 赞同：6
> 
> 时间：2013-03-19T17:22:35.407
> 
> 标签：java, oracle, procedure

我正在努力使用以下代码使其工作，搜索文档和论坛并卡住。最后我决定向你寻求帮助。我所拥有的是带有 TYPES、FUNCTION 声明和 FUNCTION BODY 声明的包。将来我想使用 SYNONYM 到 MYPACKAGE （这只是模拟 - 我的数据库中没有包和类型声明，但使用 dblink 到外部数据库和 Java 代码来运行过程/函数，但现在我没有此 dblink 可访问）和 MYPACKAGE 将可通过 dblink 访问：

```
create public synonym dblink_MYPACKAGE for SOME_SCHEMA.MYPACKAGE@dblink_externalDB; 
```

我将在 Java 代码中使用 dblink_MYPACKAGE 而不是 MYPACKAGE。（但这没关系吗？）外部数据库不是我们的，所以我们不能在那里改变任何东西......

```
public class TestClassSpringBased {

private DataSource dataSource;

private SimpleJdbcCall jdbcCall;

@Override
public void testMe(Integer id) {

    int iid = 1;
    SqlParameterSource in = new MapSqlParameterSource().addValue("IN_1", iid);

    Map<String, Object> out = jdbcCall.execute(in);

}

public DataSource getDataSource() {
    return dataSource;
}

public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
    JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);
    jdbcTemplate.setResultsMapCaseInsensitive(true);

    this.jdbcCall = new SimpleJdbcCall(dataSource)
            .withCatalogName("MYPACKAGE")
            .withProcedureName("MYFUNCTION")
            .withReturnValue()
            .useInParameterNames("IN_1")
            .declareParameters(
                    new SqlInOutParameter("IN_1", OracleTypes.NUMBER),
                    new SqlInOutParameter("OUT_1", OracleTypes.STRUCT, "MYPACKAGE.CUSTOMELEMENTSTYPE",
                            new SqlReturnType() {
                                public Object getTypeValue(CallableStatement cs, int colIndx, int sqlType,
                                        String typeName) throws SQLException {

                                    return null; //just let it work, the I will think what to write here
                                }
                            }));

}

}

 create or replace 
 PACKAGE         MYPACKAGE IS 

   TYPE CUSTOMELEMENTSTYPE_R IS RECORD (
     C1 VARCHAR2(60),   
     C2    VARCHAR2(30)

  );

  TYPE CUSTOMELEMENTSTYPE IS TABLE OF CUSTOMELEMENTSTYPE_R 
  INDEX BY PLS_INTEGER;

 FUNCTION MYFUNCTION(
   IN_1 IN INTEGER, OUT_1 OUT CUSTOMELEMENTSTYPE )
 RETURN VARCHAR2;

   END;

create or replace 
 PACKAGE BODY MYPACKAGE  IS

   FUNCTION MYFUNCTION(
     IN_1 IN INTEGER, OUT_1 OUT CUSTOMELEMENTSTYPE )
    RETURN VARCHAR2  IS

  BEGIN

 SELECT *  BULK COLLECT INTO OUT_1
    FROM  SOME_TABLE;
   RETURN 'return param';
 END MYFUNCTION; 

  END MYPACKAGE ; 
```

错误是：org.springframework.jdbc.UncategorizedSQLException: CallableStatementCallback; SQL [{? = 调用 MYPACKAGE.MYFUNCTION(?, ?)}]; SQL 状态 [99999]；错误代码 [17074]；无效的名称模式：MYPACKAGE.CUSTOMELEMENTSTYPE；嵌套异常是 java.sql.SQLException：无效名称模式：MYPACKAGE.CUSTOMELEMENTSTYPE

问题仅在于 OUT 参数，相同的代码有效，当我不传递 OUT 参数并针对另一个没有 OUT 参数的 MYFUNCTION 版本运行它时。

我也尝试使用 OracleTypes.ARRAY（无效名称模式）和 OracleTypes.OTHER（原因：java.sql.SQLException：错误的列类型：1111）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-24T15:01:09.003

您似乎使用了不正确的方法调用：您的代码： **.withProcedureName("MYFUNCTION")[..]** 应替换为 **.withFunctionName[...]**

这是整个函数调用的一些简单示例：

```
JdbcTemplate jdbc = new JdbcTemplate(txManager.getDataSource());
    SimpleJdbcCall jdbcCall = new SimpleJdbcCall(jdbc)
            .withCatalogName("p_adm_www")
            .withFunctionName("fn_usr_get_login_sequence")
            .declareParameters(new SqlOutParameter("RETURN", OracleTypes.NUMBER))
            .withoutProcedureColumnMetaDataAccess();
    jdbcCall.setAccessCallParameterMetaData(false);
    BigDecimal returnId = jdbcCall.executeFunction(BigDecimal.class, null);
    return returnId.longValue(); 
```

# xml - 在groovy中将节点对象转换为JSON对象

> ID：15506310
> 
> 赞同：0
> 
> 时间：2013-03-19T17:22:39.007
> 
> 标签：xml, json, groovy

使用此代码，它返回 xml 文档的节点对象

```
def rootNode = new XmlParser().parseText(text) 
```

如何将此对象解析为 JSON 对象（可能使用 JsonBuilder）？

我确实尝试通过一个字符串对象 (XmlUtil.serialize(rootNode)) 但它没有成功。

有什么我可以使用的或者我需要创建自己的东西吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:02:43.707

您必须推出自己的解决方案。

Json 没有属性的概念，您需要决定如何处理同名的兄弟标签。

从 xml 映射到 Json 没有直接明显的方法

# java - 声明对象数组数组时遇到问题 Java

> ID：15506314
> 
> 赞同：0
> 
> 时间：2013-03-19T17:22:47.847
> 
> 标签：java, nullpointerexception, 2d, slick2d

我在使用对象数组或简单的对象数组时遇到问题，我很确定这与 slick 无关。每当 init 方法运行并到达块部分时，我都会得到一个空指针异常。我也确定问题在于我没有正确声明 Block 对象。请我真的需要一些帮助。

```
import org.newdawn.slick.*;
import org.newdawn.slick.state.*;

public class Stages extends BasicGameState {
    LevelInfo level = new LevelInfo(1);
    Block block[][];
    public Stages(int state) {

    }
    public void init(GameContainer gc, StateBasedGame sbg) throws SlickException {
        level.init();
        for(int i = 0; i < 13;i++) {
            for(int j = 0; j < 13;j++) {
                block[i][j] = new Block(level.type[i][j]);
            }
        }

    }
    public void render(GameContainer gc, StateBasedGame sbg,Graphics g) throws SlickException {
        for(int i = 0; i < 13;i++) {
            for(int j = 0; j < 13;j++) {
                g.drawImage(block[i][j].image,j*60,i*60);
            }
        }
    }
    public void update(GameContainer gc, StateBasedGame sbg,int delta) throws SlickException {

    }
    public int getID() {
        return 2;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:25:13.990

你永远不会初始化`block`自己——它总是有一个`null`. 你需要：

```
block = new Block[13][13]; 
```

在您的`init`方法，构造函数或变量声明中。

其他几点注意事项：

*   你几乎肯定应该让你的变量`private`
*   您可能应该避免经常对数字 13 进行硬编码……您可以使用`WIDTH`and的常量`HEIGHT`吗？
*   将变量声明为：

    ```
    private Block[][] block; 
    ```

    这将有关变量的所有类型信息保存在一起。当 Java 被引入时，“变量名后面的数组部分”确实是为了让现有的 C/C++ 程序员感到高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:25:11.043

您永远不会实例化您的`2D` `block`数组，导致`NPE`您尝试在此处分配变量

```
block[i][j] = new Block(level.type[i][j]); 
```

你可以这样声明你的数组：

```
private Block block[][] = new Block[13][13]; 
```

# iphone - IOS Segue - 由于未捕获的异常“NSGeneric Exception”而终止应用程序

> ID：15506324
> 
> 赞同：1
> 
> 时间：2013-03-19T17:23:11.010
> 
> 标签：iphone, ios, xcode, debugging, uistoryboard

故事板截图
![图片](../Images/d0e62918557890b4cb6ff9afa03a187d.png)

在 Xcode 4.6 Storyboard 中，我有 2 个 ViewControlers，一个包含按钮，另一个是 labelView，在点击主页按钮时传递一个字符串“Home Tapped”

这是 ViewController.m 代码

```
#import "ViewController.h"
#import "ViewController2.h"

@interface ViewController ()

@end

@implementation ViewController

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"Home"])
    {
        NSString *message = @"Tapped on home";
        ViewController2 *vc = [segue destinationViewController];
        vc.labelString = message;
    }
} 
```

ViewController2.h

```
#import <UIKit/UIKit.h>

@interface ViewController2 : UITableViewController

@property(nonatomic,strong) UILabel *mylabel;
@property(nonatomic,strong) NSString *labelString;

@end 
```

和错误

```
Terminating app due to uncaught exception 'NSGenericException', reason: 'Could not find a navigation controller for segue 'Home'. Push segues can only be used when the source controller is managed by an instance of UINavigationController.'
*** First throw call stack:
(0x1c91012 0x10cee7e 0x468f31 0x45ab99 0x45ac14 0x10e2705 0x162c0 0x16258 0xd7021 0xd757f 0xd66e8 0x45cef 0x45f02 0x23d4a 0x15698 0x1becdf9 0x1becad0 0x1c06bf5 0x1c06962 0x1c37bb6 0x1c36f44 0x1c36e1b 0x1beb7e3 0x1beb668 0x12ffc 0x28dd 0x2805)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:01:04.900

你需要`NavigationController`为你的故事板做你的入口点。现在它是`View Controller`，由指向它的箭头表示，没有来源。

# mysql - 如何让我的程序在不需要安装程序的情况下在不同的机器上运行？

> ID：15506327
> 
> 赞同：0
> 
> 时间：2013-03-19T17:23:32.100
> 
> 标签：mysql, vb.net, installation, jit, connector

我创建了一个程序，它使用 MySql.* 参考 MySql 命令。该程序在我自己的 PC 上运行良好，我安装了 MySQL Connector/NET。尽管尝试在另一台 PC 上使用该程序时，它给了我一个 JIT 错误，提示缺少 MySql.Data 引用。

注意：我实际上并没有发布程序二重奏，因为它很简单，因为我更喜欢拥有一个可移植的应用程序，所以我只是从我的`Visual Studio\Projects\appDayZAdmin\appDayZAdmin\bin\Debug`文件夹中获取 exe。

我有什么方法可以让这个程序在其他不一定安装连接器的 PC 上运行？还是我别无选择，只能实际发布项目，从而为其制作安装程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:15:16.900

如果您编写了引用 MySql.Data 的代码，您将不得不将其作为使用程序的先决条件，或者提供一种安装它的方法。

您可能可以假设某些通用数据库接口（如 OBDC 或 JDBC）的可用性，但在某些百分比的系统上并非如此。即使那样，您也可能遇到版本控制问题。

# android - 从 IntentService 更新 ListView

> ID：15506331
> 
> 赞同：0
> 
> 时间：2013-03-19T17:23:42.300
> 
> 标签：android, multithreading, intentservice

我有一个 IntentService，它在 WindowManager 的帮助下创建了一个 Overlay。在 WindowManager 中，我添加了一个包含 ListView 的视图。现在我想在 onHandleIntent 方法中向 ListView 添加一个新项目，但是如果我调用

```
data.add("String");
adapter.notifyDataSetChanged(); 
```

系统抛出错误

```
Only the original thread that created a view hierarchy can touch its views. 
```

我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:44:32.693

屏幕只能由 UI 线程更新。服务不能保证它在 UI 线程中运行。因此，服务可能不会直接更新屏幕。

解决方案是向 UI 线程发送消息。有很多方法可以做到这一点。这是一个：

在附加到屏幕的 Activity 的 onCreate() 中，创建一个消息处理程序：

```
 mHandler = new Handler(Looper.getMainLooper()) {
    @Override
    public void handleMessage(Message inputMessage) {
       Update the UI here using data passed in the message.
    }
  } 
```

使 mHandler 可用于服务（可能通过 StartService() 中使用的意图）。

在服务中向处理程序发送消息：

```
 Message msg = mHandler.obtainMessage(...);
      ... add info to msg as necessary
    msg.sendToTarget(); 
```

这些页面可能有助于详细信息：

[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

和

[http://developer.android.com/reference/android/os/Message.html](http://developer.android.com/reference/android/os/Message.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:28:33.553

您可以通过让包含 ListView 的 Activity 进行更新来解决此问题。[Activity.runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)应该做的工作=]

# c# - WinCE：无法将数据插入 sdf 数据库

> ID：15506335
> 
> 赞同：0
> 
> 时间：2013-03-19T17:23:55.023
> 
> 标签：c#, .net, winforms

我在设置 SDF 数据库的路径时遇到了一些问题。

我的原始连接

```
<add name="Model1Container" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SqlServerCe.4.0;provider connection string=&quot;data source=|DataDirectory|\Database1.sdf&quot;" providerName="System.Data.EntityClient" /></connectionStrings> 
```

然后我尝试使用 ConfigurationManager 获取数据库连接字符串，但它产生错误（元数据不支持）

之后，我没有使用连接字符串，而是尝试了其他几种方法，例如：

```
string StartupPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase);
        string datalogicFilePath = Path.Combine(StartupPath, "Database1.sdf");
        string connectionString = string.Format("DataSource={0}", datalogicFilePath); 
```

这个会抛出URI格式异常

```
@"Data Source = |DataDirectory|\Database1.sdf" 
```

这个能够为 ExecuteNonQuery 返回 1，但我在它自己的 db 上看不到任何更改。

然后我意识到它可能是复制到输出目录属性。我试过“不要复制”，它在找不到 bin\database1.sdf 的地方产生了错误消息。我已将其设置回“如果较新则复制”。

但是当我使用数据库的完整路径 C:.....................\Project\database1.sdf 时，它能够更新数据库。有没有办法做到这一点，而不是提供一个完整的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-16T02:11:21.890

尝试使用您的本地路径 Data Source=C:\Users\ABC\Documents\Visual Studio 2010\Projects\ABC\ABC\Database1.sdf;Password=qwer!234;Persist Security Info=True"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T04:41:48.467

我遇到了同样的问题，终于解决了，实际上它保存了数据，但没有保存在它显示在服务器资源管理器中的 .sdf 中（通常在应用程序的根文件夹中），但是当你发布应用程序时也在调试文件夹中的 .sdf 中它与正常插入数据的根 .sdf 一起发布。希望我没有让您感到困惑，并且对您有所帮助。-Masology

# c++ - 延迟调用 MATLAB 函数

> ID：15506337
> 
> 赞同：0
> 
> 时间：2013-03-19T17:23:59.677
> 
> 标签：c++, matlab

我从我的 C++ 代码中调用了一个 MATLAB 函数 (dll)。该函数获取一个数组作为参数。函数对数组的每个成员进行一些计算。我做了两个测试。我第一次用一个有 24 个元素的数组调用这个函数。我第二次用 8 个元素调用了这个函数 3 次。第二次测试花费了两倍多的时间。为什么 ？进入 MATLAB 函数和退出它需要很多时间吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:49:18.170

您注意到的是，调用 MEX 函数需要花费大量时间。考虑 Matlab 必须做的最小值：

1.  扫描 Matlab 路径以确保函数映射到 MEX 文件（并且 MEX 文件没有更改）
2.  从其 DLL 或共享库中加载 MEX 函数，然后解析其`mexFunction`符号。
3.  分配输入和输出参数的数组，并初始化它们
4.  调用你的函数
5.  查找并释放 MEX 函数加载的任何临时变量
6.  释放输入和输出参数数组

理论上，Matlab 可以使用缓存来避免前两个步骤。不过，我不确定它是否确实如此。Matlab 解释器（或其 JIT 编译器）不能跳过任何后续步骤，甚至不能真正优化。基本上，如果您的计算速度很快，那么调用 MEX 函数的时间将比实际运行它多得多。

您已经找到了最大化 MEX 性能的方法，即让 MEX 函数尽可能多地处理每个调用。

除了在每次调用中尽可能多地处理数据之外，您还应该将任何简单的外部循环推送到 MEX 函数中。简单的循环很容易在 MEX 函数中实现。它们也比 Matlab 中的循环（甚至是 JIT 编译的 Matlab）更快，并且避免了重复调用 MEX 函数的成本。

您还可以查看是否明智地使用该[`mexLock`](http://www.mathworks.com/help/matlab/apiref/mexlock.html)功能会有所帮助。您应该提供一些方法来解锁 MEX 功能[`mexUnlock`](http://www.mathworks.com/help/matlab/apiref/mexunlock.html)，否则您可能会开始泄漏内存，并且每次更改 MEX 功能时都必须重新启动您的 Matlab 会话。

# twitter - Twitter API：“TwitterError：您的推文文本太长。”

> ID：15506339
> 
> 赞同：1
> 
> 时间：2013-03-19T17:24:14.633
> 
> 标签：twitter

我正在使用 Twitter 的 python API 来广播推文。有时它工作正常。对于我认为应该完全合法的推文，有时它会给我一个错误“你的推文的文本太长”。

该网站解释说，推文中的所有链接基本上应计为 20 个字符：[https ://dev.twitter.com/docs/tco-link-wrapper/faq#How_do_I_calculate_if_a_Tweet_with_a_link_is_going_to_be_over_140_characters_or_not](https://dev.twitter.com/docs/tco-link-wrapper/faq#How_do_I_calculate_if_a_Tweet_with_a_link_is_going_to_be_over_140_characters_or_not)

但它仍然对我不起作用。我有一条 132 个字符的推文。它包括链接 bit.ly/YmoXqw。（那是一个虚构的链接。但链接的大小和形式是相同的）。它给了我上面的错误。根据我的计算，即使我将此链接计为 20 个字符，它仍然会出现 139 个字符，小于 140。那么这里的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:43:03.630

[您可以查询帮助/配置](https://dev.twitter.com/docs/api/1.1/get/help/configuration)并使用 *short_url_length_https* 和 *short_url_length* ，而不是对数字进行硬编码。Twitter 的[使用 t.co 最佳实践](https://dev.twitter.com/docs/tco-url-wrapper/best-practices)指南建议将这些值缓存长达 24 小时。Twitter 最近宣布了[即将到来的 t.co 更改](https://dev.twitter.com/blog/upcoming-tco-changes)，其中长度正在增加。由于 http 和 https 长度的差异，您可能会看到这一点，并且可能会在 power tweets 上遇到错误计算。

# eclipse - 在 Eclipse 动态 Web 项目中放置静态文件目录的位置

> ID：15506341
> 
> 赞同：3
> 
> 时间：2013-03-19T17:24:17.187
> 
> 标签：eclipse, jsp, static

我使用 Eclipse 创建了一个动态 Web 项目。我有一些 Java 程序放在“Java Resources/src”文件夹中。这些程序使用`Lucene`我放在“ `WebContent/WEB-INF/lib`”文件夹中的库。Java 程序需要访问一些文本文件和一个包含由`Lucene`. 我将这些静态文件放在`WebContent`eclipse 下，以便它们出现在导出的 WAR 文件中。

我通过在 Java 程序中直接引用它们来访问这些静态文件。

```
BufferedReader br = new BufferedReader(new FileReader("abc.txt")); 
```

> //abc.txt 位于 Eclipse 项目的 WebContent 文件夹中。

在 JSP 页面中，我正在调用 java 程序（其中包含上述行），但它显示了一个`FileNotFoundException`. 请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:36:57.853

您不能直接从 Java 访问 webapp 中可用的资源。

随着文件从编译时`/src/YourClass.java`消失。`/WEB-INF/classes/`因此，当您尝试访问`BufferedReader br = new BufferedReader(new FileReader("abc.txt"));`.

它根据您给定的示例在 /WEB-INF/classes/abc.txt 中搜索“abc.txt”。

使用`servletContext.getRealPath("/");`which 返回您的 Web 应用程序`webapps`目录的路径，然后您可以使用此路径访问资源。

**注意：**返回的路径`servletContext.getRealPath("/");`还取决于您如何部署 Web 应用程序。默认情况下，eclipse 使用自己的内部机制来部署 Web 应用程序。

这是关于它应该如何的示例屏幕截图![Tomcat-Web 应用程序部署架构](../Images/f15a4f758d996ad37e464ec4d516cfba.png)

**小服务程序代码：**

```
import java.io.File;
import java.io.IOException;

import javax.servlet.ServletConfig;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class StaticTestServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private ServletContext servletContext;
    private String rootPath;

    public StaticTestServlet() {
        super();
        // TODO Auto-generated constructor stub
    }
    @Override
    public void init(ServletConfig config) throws ServletException {
        // TODO Auto-generated method stub
        super.init(config);
        servletContext = config.getServletContext();
        rootPath = servletContext.getRealPath("/");
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        System.out.println("In Get and my path: " + rootPath + "documents"); // documents is the direcotry name for static files
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub

        System.out.println("In Post and my path: " + rootPath + "documents"); // documents is the direcotry name for static files
    }
} 
```

# ios - UIScrollView 在方向改变之前不会滚动

> ID：15506347
> 
> 赞同：5
> 
> 时间：2013-03-19T17:24:53.697
> 
> 标签：ios, objective-c, uiscrollview

我有一个 UIScrollView 动态添加到主视图中，我用小的 UIView 对象填充它。我将它的 contentSize 设置为大于设备分辨率的值，但在更改设备方向之前我无法滚动它。

如何在方向更改之前使其滚动？

稍后编辑：

我意识到问题来自我正在添加的某些子视图，更具体地说是为这些子视图添加了一些约束：

这是我添加子视图的代码（该方法被调用了大约 10-20 次）：

```
-(void) addShelve:(NSInteger) index
{
FSShelf *shelf = [[FSShelf alloc] initWithFrame:CGRectMake(0, index * [FSConstants getShelfVerticalDistance], 0, 0)];
[shelves addObject:shelf];

[shelfView addSubview:shelf];
[shelf addShelfConstraints];
} 
```

FSShelf 是 UIView 的子类，shelfView 是我的 UIScrollView 的子类。

以下是添加的约束`addShelfContraints`：

```
 [self.superview addConstraint:[FSUtils getWidthConstraintFor:self.superview with:self constant: -2 * ([FSConstants getShelveMargin])]];
    [self addConstraint:[FSUtils getSelfHeightConstraintFor:self constant:30]];
    [self.superview addConstraint:[FSUtils getCenterXConstraintFor:self.superview with:self constant:0]]; 
```

FSUtils 类中用于添加约束的方法：

```
+ (NSLayoutConstraint *)getSelfHeightConstraintFor:(UIView *)view constant:(CGFloat)constant
{
    NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:view
                                                                  attribute:NSLayoutAttributeHeight
                                                                  relatedBy:NSLayoutRelationEqual
                                                                     toItem:nil
                                                                  attribute:NSLayoutAttributeNotAnAttribute
                                                                 multiplier:1.0
                                                                   constant:constant];
    return constraint;
}

+ (NSLayoutConstraint *)getCenterXConstraintFor:(UIView *)superView with:(UIView *)subView constant:(CGFloat)constant
{
    NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:subView
                                                                  attribute:NSLayoutAttributeCenterX
                                                                  relatedBy:NSLayoutRelationEqual
                                                                     toItem:superView
                                                                  attribute:NSLayoutAttributeCenterX
                                                                 multiplier:1.0
                                                                   constant:constant];

    return constraint;
}

+ (NSLayoutConstraint *)getWidthConstraintFor:(UIView *)superView with:(UIView *)subView constant:(CGFloat)constant
{
    NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:subView
                                                                  attribute:NSLayoutAttributeWidth
                                                                  relatedBy:NSLayoutRelationEqual
                                                                     toItem:superView
                                                                  attribute:NSLayoutAttributeWidth
                                                                 multiplier:1.0
                                                                   constant:constant];
    return constraint;
} 
```

你注意到这些约束有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:04:10.530

您尝试施加的约束`shelfView`（我假设是您的 UIScrollView）是不明智的。您正在创建具有零宽度和零 x 原点的架子子视图，`FSShelf *shelf = [[FSShelf alloc] initWithFrame:CGRectMake(0, index * [FSConstants getShelfVerticalDistance], 0, 0)];`然后立即尝试将架子视图约束为具有相同的零宽度减去一些常数（因此架子视图需要负宽度），然后与子视图相同的中心 x，但架子视图仍然是零宽度并且具有零 x 原点！您分配给货架子视图的唯一约束是它们的高度。事实上，我认为这里缺少一些东西。使用您发布的代码，您的货架子视图的宽度始终为零。你真的在屏幕上看到任何货架子视图吗？

无论如何，这是我的建议：尝试`shelfView`根据其每个货架子视图添加约束是一个失败的提议。在这种情况下，约束似乎是不可满足的，并且通常您会发现各种约束变得不可满足，除非您非常小心地确保所有子视图始终就它们的父视图应该如何布局达成一致。

而不是所有这些，只需忘记约束代码。你想要做的很简单。ShelfView 应该有一个等于屏幕大小的框架（或应用程序框架，无论如何可能是其父视图的边界），并且架子视图应该垂直排列，它们之间有一些垂直边距和一些水平边距分开他们从屏幕的边缘。像现在一样添加视图，而不是添加任何约束调用`[self.view setNeedsLayout];`，然后`viewDidLayoutSubviews`在视图控制器中实现该方法。你会想要这样的东西：

```
- (void)viewDidLayoutSubviews {
    const CGRect rootViewBounds = self.view.bounds;
    shelfView.frame = rootViewBounds;

    const CGFloat kHorizontalMargin = [FSConstants getShelveMargin];
    const CGFloat kVerticalDistancePerShelf = [FSConstants getShelfVerticalDistance];
    const CGFloat kShelfHeight = 30.0;
    const NSUInteger shelvesCount = [shelves count];
    for (NSUInteger j = 0; j < shelvesCount; j++) {
        UIView *shelf = [shelves objectAtIndex:j];
        shelf.frame = CGRectMake(kHorizontalMargin,
                                 j * kVerticalDistancePerShelf,
                                 CGRectGetWidth(rootViewBounds) - 2.0 * kHorizontalMargin,
                                 kShelfHeight);
    }
    shelfView.contentSize = CGSizeMake(CGRectGetWidth(rootViewBounds), (shelvesCount - 1) * kVerticalDistancePerShelf + kShelfHeight);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T05:20:37.467

滚动与设备分辨率没有任何关系。当您的内容的大小大于您的 scrollView 框架的大小时，就会发生滚动。

通常，要使大小为 100*100 的内容可以滚动，您应该有一个帧大小小于 100*100 的滚动视图。如果 frame.width < contentsize.width，它将允许水平滚动。同样的，如果 frame.height < contentsize.height，它将允许垂直滚动。

您可能选择了自动布局，或者您可能不小心使用了自动调整大小标志，这可能导致您的 scrollview.frame 的大小大于 contentsize。当您提供方向时，框架可能会完美固定并且您可以滚动。

如果您想发现确切的问题，请发布代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T12:39:29.450

在您的单次点击中，尝试像这样创建

```
UIScrollView * scrollview = [[UIScrollView alloc]init];
CGRect viewFrame = self.view.frame;
[scrollview setFrame:viewFrame];
[scrollview setShowsHorizontalScrollIndicator:YES];
[scrollview setShowsVerticalScrollIndicator:YES];

UIView * view = [[UIView alloc]init];
CGRect viewDoubleFrame = CGRectMake(viewFrame.origin.x,viewFrame.origin.y,viewFrame.size.width * 2,viewFrame.size.height *2);
[view setFrame:viewDoubleFrame];
[view setBackgroundColor:[UIColor darkGrayColor]];

// add your additional components here

[scrollview setContentSize:CGSizeMake(view.frame.size.width,view.frame.size.height)];
[scrollview addSubview:view];

[self.view addSubview:scrollview]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T14:51:01.500

请注意，如果您使用自动布局，仅更改内容大小是不够的。滚动视图以不同的方式布局。我在 stack [Here](https://stackoverflow.com/questions/13499467/uiscrollview-doesnt-use-autolayout-constraints)上发现这个问题非常有帮助。因此，请检查您是否正在使用自动布局并适应或禁用它。
希望这会有所帮助，Andrea

[编辑]
如果您的目标设备 >=iOS6，为什么不使用集合视图。它们是非常酷的东西，具有令人敬畏的布局功能，感谢 Peter，您可以替换 iOS>=4.3。据我了解，它们可以满足您的要求。 [github](https://github.com/steipete/PSTCollectionView)

# ruby-on-rails - Ruby - :: 在类名中

> ID：15506352
> 
> 赞同：9
> 
> 时间：2013-03-19T17:25:05.783
> 
> 标签：ruby-on-rails, ruby, class, syntax, module

我正在使用一些遗留的 RoR 代码，它有四个相关的类，每个类都定义在自己的文件中。所有这些类都是解析器类，并且存在于 app/models/parsers 中。每个文件名都以 _parser.rb 结尾。

这是来自文件 adf_parser.rb 的示例类定义行：

```
class Parsers::AdfParser 
```

我不知道 Parsers:: 的一部分在做什么。

*   在我能找到的任何地方都没有定义名为 Parsers 的显式模块。
*   我没有看到任何有关仅通过将模块规范添加到类名来隐式创建模块的文档。
*   唯一的外部依赖是“需要'csv'”。
*   类 def 中有 include 语句，但我认为它们没有任何可以解释类名的东西。
*   我创建了一个新的 RoR 测试项目并将这些文件的存根放在并行目录中，由于名称错误，它们不会从命令行运行。
*   我没有看到任何以这种方式命名的类的在线示例。

我敢肯定这不是火箭手术，但我早上的大部分时间都在试图弄清楚这一点，如果有人能告诉我这是怎么回事，我会很高兴的。

更新：听起来这只是基于子目录名称的一点 Rails 魔法。我认为我在测试应用程序中出错的原因是我只是通过 ruby​​ 解释器运行文件，而不是以某种方式使用 Rails 调用它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T17:33:10.227

`class Parsers::AdfParser`在实践中相当于：

```
module Parsers
  class AdfParser 
```

为了使其正常工作，并且要自动加载的文件，其位置应该是 parsers/adf_parser.rb，无论是在 app/models 还是 lib 下。基本上文件路径需要模仿类层次结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T17:39:17.740

它在`parsers`模块的子目录中；按照惯例为您提供 Rails 命名空间。

# android - SurfaceView 上的位图优化

> ID：15506356
> 
> 赞同：0
> 
> 时间：2013-03-19T17:25:18.203
> 
> 标签：android, bitmap, surfaceview, lag, android-traceview

此链接：[http ://www.mediafire.com/view/?hr441qalu6b6d7s](http://www.mediafire.com/view/?hr441qalu6b6d7s)

指向显示我的位图绘制需要很长时间并导致我的应用程序滞后的图像。我该如何优化这一点，以免造成太大的延迟。目前我有这个作为我的画布方法：

```
 Canvas c = holder.lockCanvas();
    Paint p = new Paint();
    p.setTextSize(30);
    p.setColor(Color.BLACK);
    new handleStuff().execute("");
    //Actions End

    //Background
    Bitmap scaledBackground = Bitmap.createScaledBitmap(background, this.getWidth(), this.getHeight(), true);
    c.drawBitmap(scaledBackground, 0, 0, null);
    //Background End 
```

我最初的想法是，每次都绘制背景是导致滞后的原因，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T22:43:12.813

将所有对象创建放在 draw 方法之外（所以只在你的 init/whatever 中创建 bmp/paint 等），然后在 draw 方法中使用它们。

这将加速事情并减少内存使用并减少垃圾收集......很多。

# jquery-masonry - 即使在唱 jquery Masonry 之后，DIV 之间的空间

> ID：15506368
> 
> 赞同：0
> 
> 时间：2013-03-19T17:26:01.160
> 
> 标签：jquery-masonry

我正在尝试安排几个动态多尺寸的 DIV 以适合容器。根据 stackoverflow 中的成员建议，我正在尝试利用 jquery masonry 来完成我的工作。但我有如下所述的问题。

他们在使用 jquery masonry 解决这个问题时有什么特别的技巧吗？我阅读了他们的文档，但我肯定错过了一些东西。

如果有人可以提供帮助，将不胜感激。

HTML 代码：

```
<div class="blockscont">
    <div class="blocks" style="width:200px;height:200px">A</div>
    <div class="blocks" style="width:400px;height:400px">B</div>
    <div class="blocks" style="width:200px;height:200px">C</div>
    <div class="blocks" style="width:200px;height:200px">D</div>
    <div class="blocks" style="width:200px;height:200px">E</div>
    <div class="blocks" style="width:200px;height:200px">F</div>
    <div class="blocks" style="width:600px;height:200px">G</div>
    <div class="blocks" style="width:200px;height:200px">H</div>
    <div class="blocks" style="width:200px;height:200px">I</div>
    <div class="blocks" style="width:400px;height:200px">J</div>
</div> 
```

JQUERY砌体：

```
$(function() {
    $(window).load(function(){
        $('#blockscont').masonry({
            itemSelector : '.blocks',
            columnWidth : 0
        });
    });
}); 
```

输出： ![例子](../Images/3ac933b122fb28f933e797cc52606706.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T11:48:37.410

我认为在此布局中使用 Masonry 没有问题，只要容器大小正确，您将获得所需的格式。

[我已经在 jsFiddle](http://jsfiddle.net/8qFkt/)中设置了你的示例，它似乎工作正常。

**HTML**（与您的相同）

```
<div id="blockscont">
    <div class="blocks" style="width:200px;height:200px">A</div>
    <div class="blocks" style="width:400px;height:400px">B</div>
    <div class="blocks" style="width:200px;height:200px">C</div>
    <div class="blocks" style="width:200px;height:200px">D</div>
    <div class="blocks" style="width:200px;height:200px">E</div>
    <div class="blocks" style="width:200px;height:200px">F</div>
    <div class="blocks" style="width:600px;height:200px">G</div>
    <div class="blocks" style="width:200px;height:200px">H</div>
    <div class="blocks" style="width:200px;height:200px">I</div>
    <div class="blocks" style="width:400px;height:200px">J</div>
</div> 
```

**脚本**（为在 jsfiddle 中使用而简化）

```
$(function(){
    $('#blockscont').masonry({
      itemSelector: '.blocks'
    });
}); 
```

我删除了该选项`columnWidth : 0`，因为它似乎没有任何区别。

**CSS**

```
.blocks {
    background-color: #D7E4BC;
    outline:1px solid white;
} 
```

`outline`用于显示块，而不是`border`用于显示块，但防止它们的大小增加和弄乱布局（至少在 Chrome 中）。

不需要将浮动应用到任何元素，因为 Masonry 的工作是定位块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T16:45:47.790

Just for posterity (as i came across this while having a similar problem) Gaps in the layout can be cause by incorrectly setting the columnWidth.

If you don't explicitly state the columnWidth it is taken from the width of the first item. My problem came about because my first item was supposed to cross two columns. I got over this by using another item's width to set columnWidth.

```
$('#m-container').masonry({
  itemSelector: '.m-item',
  columnWidth: $('.size1')[0]
}); 
```

# c# - mono 真的实现了命名空间 System.AddIn.Hosting 吗？

> ID：15506374
> 
> 赞同：0
> 
> 时间：2013-03-19T17:26:16.833
> 
> 标签：c#, mono

以下页面显示 mono 实现了 System.AddIn.Hosting 命名空间。

[单声道 API 状态](http://go-mono.com/status/status.aspx?reference=4.0&profile=4.5&assembly=System.AddIn)

在单声道中找不到 System.AddIn.dll 后，我查看了单声道源。

我查看了 mono，版本 2.10.8.1 + mono 3.0.7，源代码，但一直找不到。我查找“System.AddIn.Hosting”并键入“AddInSecurityLevel”之类的名称，但没有找到匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:26:16.833

似乎[mono api status](http://go-mono.com/status/status.aspx?reference=4.0&profile=4.5&assembly=System.AddIn)中的标题具有误导性，此页面显示的是 .net 4.0 + .net 4.5 之间的差异。

这可以从这里[mono api status summary page看到](http://go-mono.com/status/)

所以答案似乎是：No Mono 没有实现 System.AddIn.Hosting 或任何 System.AddIn 命名空间。

更新：可以在[此处](https://hg.sr.ht/%7Ehindlemail/system.addin.dll)找到在带有单声道的 Linux 上运行的 System.Add 的开源实现。

# magento - Magento：列出单个属性的所有值

> ID：15506377
> 
> 赞同：6
> 
> 时间：2013-03-19T17:26:18.387
> 
> 标签：magento, attributes, mage

我正在尝试列出 magento 1.7.0.2 中新创建的属性的所有现有值。（并使它们成为可点击的链接，以便在单击时列出具有特定属性值的所有项目，但这不是现在的优先事项）

属性代码是“艺术家”

到目前为止，我使用以下代码在 app/code/core/Mage/Catalog/Block/ 中创建了文件 Artist.php：

```
public function getAllArtists()
{
$product = Mage::getModel('catalog/product');
$attributes = Mage::getResourceModel('eav/entity_attribute_collection')
    ->setEntityTypeFilter($product->getResource()->getTypeId())
    ->addFieldToFilter('attribute_code', 'artist');
$attribute = $attributes->getFirstItem()->setEntity($product->getResource());
$artists = $attribute->getSource()->getAllOptions(false);
  return $artists;  
} 
```

和 /app/design/frontend/default/template-name/template/catalog/product 中的文件 artist.phtml 使用以下代码：

```
 <ul id="artist_list">
  <?php foreach ($this->getAllArtists() as $artist): ?> 
  <li><a href="<?php Mage::getURL() ?>catalogsearch/advanced/result/?&artist;[]=<?php echo $artist['value'] ?>&search;="><?php echo $artist['label'] ?></a></li>
  <?php endforeach; ?>
 </ul> 
```

然后我在一个静态块中调用

```
{{block type="core/template" template="catalog/product/artist.phtml"}} 
```

但什么都没有出现...

我使用了这个线程的代码：http: [//www.magentocommerce.com/boards/viewthread/19982/P0/](http://www.magentocommerce.com/boards/viewthread/19982/P0/)

该属性设置为“在前端的产品视图页面上可见”，我将 ../template/product/view.phtml 中每个项目的属性值称为

```
<?php echo $_product->getData('artist') ?> 
```

并正确显示该值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-24T11:37:21.630

```
 $name='whatever_your_attribute_name';
    $attributeInfo = Mage::getResourceModel('eav/entity_attribute_collection')->setCodeFilter($name)->getFirstItem();
    $attributeId = $attributeInfo->getAttributeId();
    $attribute = Mage::getModel('catalog/resource_eav_attribute')->load($attributeId);
    $attributeOptions = $attribute ->getSource()->getAllOptions(false); 
    print_r($attributeOptions); 
```

参考：[Magento - 获取所有属性值](https://stackoverflow.com/questions/18043690/magento-get-all-attribute-value)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:25:30.450

这将只是

```
$attribute = Mage::getModel('eav/config')->getAttribute(4,'artist');
if($attribute->usesSource()) {
    $options = $attribute->getSource()->getAllOptions(false);
    foreach($options as $key=>$value) {
        if(count($value)==2) {
            $artists[] = $value['label'];
        }
    }
} 
```

# twitter-bootstrap - 你如何将 YII Bootstrap 设置为只有一个固定大小？

> ID：15506384
> 
> 赞同：0
> 
> 时间：2013-03-19T17:26:39.763
> 
> 标签：twitter-bootstrap, less

我知道这种方式违背了引导程序的目的，但出于各种（临时）原因，无论如何我都需要将总宽度设置为 1000px。默认尺寸在 responsive.less 中导入：

```
@import "responsive-1200px-min.less";
@import "responsive-768px-979px.less";
@import "responsive-767px-max.less"; 
```

我想基本上排除 responsive-768px-979px.less 和 responsive-767px-max.less，只使用：responsive-1200px-min.less，但不是宽度为 1200，而是我希望它设置为 1000px。或者更具体地说，1015。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:10:00.653

首先，您需要删除`bootstrap-responsive.css`包含 767-979 和 767 max 的媒体查询的部分（或重新编译 less 文件并排除您不想要的导入）。

在此之后，您将需要通过`bootstrap-responsive.css`并将 1200px 媒体查询作为默认值（删除媒体周围标签）并将 1200px 和相关值更改为大小的 5/6，以创建基于 1000px 的自定义设计。通过这样做，你应该有一个 1000px 宽的布局。

**备选方案 1**

您可以简单地不包括响应式对应物并坚持使用固定的 940 像素宽体。（这不是 1000 像素宽，但非常接近）。

**问题**

我猜 bootstrap`bootstrap-responsive.css`有充分的理由选择了特定的响应大小和固定大小（不使用时），而更改它们不是一个好主意。

# c# - 无法使序列化信息出现在 XML 中

> ID：15506388
> 
> 赞同：1
> 
> 时间：2013-03-19T17:26:50.117
> 
> 标签：c#, serialization

我正在运行以下代码：

```
public String Serialize()
{
  XmlSerializer serializer = new XmlSerializer(typeof(SomeInformation));
  StringWriter writer = new StringWriter();
  serializer.Serialize(writer, new SomeInformation());
  String output = writer.ToString();
  return output;
} 
```

序列化如下。

```
[XmlRoot("MyRoot")]
public class SomeInformation
{
  public SomeInformation() { }

  [XmlElement("SomeNode1")]
  public String Prop1 { get { return "Some prop 1"; } }

  [XmlElement("SomeNode2")]
  public String Prop2 { get { return "Some prop 2"; } }
} 
```

我正在获取包含 XML 但没有内部标签的字符串。我是序列化的新手，完全被卡住了。关于我做错了什么有什么建议吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:31:10.930

XmlSerializer 不序列化只读属性。尝试向它们添加空设置器。

有关更多详细信息，请查看：[Why are properties without a setter not serialized](https://stackoverflow.com/questions/13401192/why-are-properties-without-a-setter-not-serialized)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T17:31:12.547

序列化只读属性没有意义。我会制作`Prop1`和`Prop2`读/写属性并在代码中设置它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T17:35:47.183

您正在使用只读属性。不。

我刚刚添加了空设置器来运行您的课程，并获得了字符串中的数据。

```
[XmlRoot("MyRoot")]
public sealed class SomeInformation
{
  public SomeInformation() { }

  [XmlElement("SomeNode1")]
  public String Prop1 { get { return "Some prop 1"; } set { } }

  [XmlElement("SomeNode2")]
  public String Prop2 { get { return "Some prop 2"; } set { } }
} 
```

# java - 将字节数组作为 POST 与 BasicNameValuePairs 一起发送

> ID：15506390
> 
> 赞同：1
> 
> 时间：2013-03-19T17:26:54.280
> 
> 标签：java, php, http, post, apache-commons

我正在尝试将数据作为 POST 数据发送到服务器。我有 3 个字段，一个是字符串，另一个是 TIMEDATE，最后一个是 BLOB。

我一直在尝试以下代码，但它似乎不起作用。我无法将字节数组转换为字符串，并且不确定如何将字节数组作为参数附加。

如果有人有想法，我将不胜感激！

```
public static void main(String[] args) {

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("http://127.0.0.1/add_new_profile");

   ProfileData profileData = getProfileData();
   try {
      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

      nameValuePairs.add(new BasicNameValuePair("name",profileData.getName()));
      nameValuePairs.add(new BasicNameValuePair("created",profileData.getTimeCreated()));

      nameValuePairs.add(new BasicNameValuePair("profile_data",new String(profileData.getDataAsByteArray())));

      post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

      HttpResponse response = client.execute(post);
      BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
      String line = "";
      while ((line = rd.readLine()) != null) {
        System.out.println(line);
      }

    } catch (IOException e) {
      e.printStackTrace();
    } 
```

服务器 PHP 脚本：

```
<?php
include('connect_db.php');
include('tools.php');

$name = $_POST['name'];
$created = $_POST['created'];
$profile_data = $_POST['profile_data'];

$query = "INSERT INTO fingerprint_profiles(name,created,fingerprint) VALUES ('".$name."','".$created"','".$fingerprint_data."')";

$result = mysql_query($query);
print_as_json($result);

?> 
```

# java - 使课程可打印

> ID：15506393
> 
> 赞同：4
> 
> 时间：2013-03-19T17:27:07.767
> 
> 标签：java

当我将某些类的实例（例如`ArrayList`）打印到流中时，例如`System.out.println(`*ArrayList*`)`的实例，它不会打印参考 id（例如 ArrayList@2144c53d），而是打印带有某些格式的实际值（例如 [1,2, 3,4]）。我想知道如何为自己的课程做到这一点？我是否可能必须定义一些方法/实现一些接口？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T17:27:44.027

很简单：您覆盖该[`Object.toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toString%28%29)方法。例如：

```
public class Person {
    private final String name;
    private final LocalDate birthDate;

    public Person(String name, LocalDate birthDate) {
        this.name = name;
        this.birthDate = birthDate;
    }

    @Override public String toString() {
        return String.format("%s (born %s)", name, birthDate);
    }
} 
```

对于更复杂的处理，您可能需要考虑实现[`Formattable`](http://docs.oracle.com/javase/7/docs/api/java/util/Formattable.html)接口 - 尽管我自己从未亲自这样做过。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T17:29:59.590

当您尝试使用 打印类的对象时`System.out.print`，它会在该类中查找`toString()`方法。如果在给定的类中没有找到，那么它会尝试在其超类中查找该方法，直到找到一个。然后打印类中定义`String`的方法返回。`toString()`如果一个类没有扩展任何东西，那么它默认调用的`toString`方法`Object`，它返回的字符串是这样的：

```
public String toString() 
{
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

这就是为什么在打印自己的类对象时会得到这种类型的输出。要打印不同的内容，您应该覆盖`toString()`您自己的类中的方法。例如：

```
public class MyClass
{
  private int roll;
  private String name;
  MyClass(int roll,String name)
  {
    this.roll = roll;
    this.name = name;
  }
  @Override
  public String toString()
  {
    return "roll="+roll+",name="+name;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T17:27:52.837

> . 我想知道如何为自己的课程做到这一点？

通过覆盖`toString()`你的类中的方法。

```
public class MyClass {
@override
public String toString(){
return "I am a legend MwhAhAH";
}
} 
```

如果你没有在你的类中覆盖 toStirng()，`Object#toString()`将被调用，它返回`yourclassname+ "@"+ hexnumberOfHashcode`.

```
public String toString() {
  237           return getClass().getName() + "@" + Integer.toHexString(hashCode());
  238       } 
```

ArrayList 确实覆盖了 toString 方法：

```
 public String toString() {
431        Iterator<E> i = iterator();
432        if (! i.hasNext())
433            return "[]";
434
435        StringBuilder sb = new StringBuilder();
436        sb.append('[');
437        for (;;) {
438            E e = i.next();
439            sb.append(e == this ? "(this Collection)" : e);
440            if (! i.hasNext())
441                return sb.append(']').toString();
442            sb.append(", ");
443        }
444    }
445
446} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T17:27:54.753

覆盖

`toString()`方法。

此方法是 Object 类，它基本上提供类似的输出。

```
getClass().getName() + '@' + Integer.toHexString(hashCode()) 
```

要获得其他任何内容，您需要在课堂上覆盖它。

示例：当您打印 ArrayList 时，ArrayList 将提供 ArrayList 元素而不是 ArrayList@2144c53d

```
 public String toString() {
   return "Stackoverflow";
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T17:30:06.997

很简单，你应该只需要覆盖`toString()`方法。

需要执行以下操作：

```
public class MyClass {
    @override
    public String toString(){
        return "My custom string, perhaps using some of the class propertis";
    }
} 
```

# google-tv - 谷歌电视频道提供商

> ID：15506395
> 
> 赞同：0
> 
> 时间：2013-03-19T17:27:10.027
> 
> 标签：google-tv

我目前是使用 dvblink 产品流式传输电视的 Windows 媒体中心用户。我希望切换到 Google TV，但想要相同的指南/流媒体集成。

Dvblink 有一个 android 应用程序，但它们也提供了一个可以实现的 Client API。所以问题是，是否可以在 Google TV 中实现一个新的频道列表提供程序并上传到索尼 NSZ-GS7 之类的盒子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:40:59.143

虽然您可以实现一个，但您将无法让它取代现有的 ChannelListingProvider - 您可以安装它，但它不会按您期望的方式工作。实际上，您可以将任何您想要的提供商添加到 Google TV，但它不会被任何系统应用程序拾取或使用。

# unix - 带有 mtime 的 unix find 命令 - 意外结果

> ID：15506397
> 
> 赞同：1
> 
> 时间：2013-03-19T17:27:10.463
> 
> 标签：unix, find

抱歉，我办公室里似乎没人能回答的烦人的小问题……

在我们的 Linux 系统 (ksh) 上执行以下命令：

```
find . -mtime -3 -exec ls -lrt {} \; 
```

...我希望列出不到 3 天前修改的所有文件。

但是，我得到的是当前目录中所有文件的列表以及底部的 2 个文件的额外条目（名称由组成，为清楚起见省略了完整的细节），这些文件实际上不到 3 天，即。

```
...
fred.txt
john.sh
./fred.txt
./john.sh 
```

我试过使用'-execdir'，但没什么区别。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:29:04.180

您`find`正在查找当前目录。IE，

```
$ find . -mtime -3
.
$ 
```

这意味着`find`正在做一个`ls -lrt .`，它打印所有内容。

# php - 如何使用 PHP 将文件从服务器复制到 Dropbox？

> ID：15506402
> 
> 赞同：6
> 
> 时间：2013-03-19T17:27:23.240
> 
> 标签：php, dropbox-php

我想我可能找到了一个 PHP 程序，可以将特定文件夹中的文件上传到我的 Dropbox 帐户。完整的解决方案可以在[这里](http://www.ryandiver.com/wordpress/2013/03/08/website-backup-to-dropbox/)找到。

该代码似乎有效，因为正在上传文件和文件夹。但是，我不希望事先压缩服务器上的文件：我想复制所有文件以及其中的文件和文件夹。

请问如何修改代码？我想要的只是将一个名为 uploads 的特定目录从我的服务器复制到 Dropbox。修改代码后，我设法得到了这个代码：

```
 <?php

    // Set the timezone so filenames are correct
    date_default_timezone_set('Europe/London');

    // Dropbox username/password
    $dropbox_email='dropbox@dropbox.com';
    $dropbox_pass='password';

    // Filenames for backup files
    $backup_files = "files_" . date("Y.m.d-h.i.s_l") . '.zip';

    // File to backup
    $siteroot = "/site/home/public_html/website/parent/child/uploads/";

    // Backup all files in public_html apart from the gz
    system("zip -r $backup_files $siteroot");

    include("DropboxUploader.php");

    $uploader = new DropboxUploader($dropbox_email, $dropbox_pass);
    $uploader->upload($backup_files,'Backup/Files/');

    system("rm $backup_files");

    ?> 
```

**实际解决方案** 特别感谢 Alireza Noori、halfer 和其他所有人。

```
<?php

// Set the timezone so filenames are correct
date_default_timezone_set('Europe/London');

// Backup all files in public_html apart from the gz
$siteroot = "/path/to/backup";

$dropbox_email='dropbox@email';  //Dropbox username
$dropbox_pass='pass';   // Dropbox password

include("DropboxUploader.php");

$uploader = new DropboxUploader($dropbox_email, $dropbox_pass);

function FolderToDropbox($dir, $dropbox_link){    
    $dropbox_folder = 'FolderInDropboxRoot/';
    $files = scandir($dir);
    foreach($files as $item){
        if($item != '.' && $item != '..'){
            if(is_dir($dir.'/'.$item)) FolderToDropbox($dir.'/'.$item,$dropbox_link);
            else if(is_file($dir.'/'.$item)) {
                $clean_dir = str_replace("/path/to/backup", "", $dir);
                $dropbox_link->upload($dir.'/'.$item,$dropbox_folder.$clean_dir.'/');  
            } 
        }
    }
}

FolderToDropbox($siteroot,$uploader);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T00:05:04.777

@halfer 的建议是这样的（我只是根据他的想法修改了你的潜在解决方案）所以他应该相信：

```
<?php

function uploadx($dirtocopy, $dropboxdir, $uploader){
    if ($handle = opendir($dirtocopy)) {
        while (false !== ($entry = readdir($handle))) {
            if ($entry != "." && $entry != "..") {

                if(is_dir($entry)){
                    uploadx($dirtocopy.$entry.'/', $dropboxdir.$entry.'/', $uploader);
                } else {
                    $uploader->upload($dirtocopy.$entry, $dropboxdir.$entry);
                }

            }
        }
        closedir($handle);
    }
}

// Dropbox username/password
$dropbox_email='dropbox@dropbox.com';
$dropbox_pass='password';

// File to backup
$siteroot = "./";

include("DropboxUploader.php");

$uploader = new DropboxUploader($dropbox_email, $dropbox_pass);

uploadx($siteroot, 'Backup/Files/', $uploader);

?> 
```

顺便说一句，上面的功能来自这里：[How to backup files from a specific directory to Dropbox only using PHP?](https://stackoverflow.com/questions/15356766/how-to-backup-files-from-a-specific-directory-to-dropbox-using-php-only)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T23:20:57.190

这是我在评论中指出的 PHP 站点的一段代码。它所做的只是获取目录路径（作为字符串）并输出其中所有文件的完整路径名（作为多个字符串）。这非常有用，因为我们可以使用此功能对单个文件执行某些操作（例如将它们上传到 Dropbox）。

```
<?php

$path = realpath('/etc');
$objects = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator($path),
    RecursiveIteratorIterator::SELF_FIRST
);
foreach($objects as $name => $object) {
    echo "$name\n";
} 
```

所以，既然你想学习 PHP，而且如果我给你一个现成的解决方案你什么都学不到`:-)`，试试下面的方法：

1.  从代码中删除`system`调用，因为您不想进行任何压缩
2.  获取我提供的在您的机器上工作的代码片段（它将自行工作），将“/ etc”更改为您想要的任何路径
3.  更改您`$path`在我的代码中`$siteroot`使用的代码
4.  删除`$path = ...`我的代码中的行（因为你`$siteroot`自己定义）
5.  再次测试片段
6.  `$objects`在您定义后，将我的代码中的行添加`$siteroot`到您的代码中
7.  `$uploader->upload()`用我提供的循环在你的代码中换行，`for`从我的代码中删除 echo 语句
8.  在您的代码中更改`$name`为`$backup_files`

稍微摇晃一下，它应该可以工作。祝你好运，随时提问！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:31:30.897

使用 Dropbox 的命令行版本怎么样？[http://www.dropboxwiki.com/Using_Dropbox_CLI](http://www.dropboxwiki.com/Using_Dropbox_CLI)

将文件复制到保管箱文件夹并让守护程序执行它需要执行的操作。

# python - Python 正则表达式替换字符串部分的多次出现

> ID：15506405
> 
> 赞同：0
> 
> 时间：2013-03-19T17:27:34.670
> 
> 标签：python, regex

我有一大块包含多个`<img>`标签的 HTML。标签的当前格式是：

```
<img width="580" height="183" src="/images/stories/acidalkalinetable.jpg" alt="acid alkaline table" title="Body pH Balance"> 
```

我想通过 html 并将每个`<img>`标签的格式更改为：

```
<img width="580" height="183" src="{{media url="wysiwyg/acidalkalinetable.jpg"}}" alt="acid alkaline table" title="Body pH Balance"> 
```

你可以看到它正在`src`改变。我保留了文件名，但更改了文件的其他部分`src`

如果 img 是单个字符串，我可以执行以下操作：

```
content = '<img width="580" height="183" src="/images/stories/acidalkalinetable.jpg" alt="acid alkaline table" title="Body pH Balance">'

filename = re.search(r'/images/stories/\w+\.(jpg|png|gif)', content)

new_content = re.sub(r'/images/stories/\w+\.(jpg|png|gif)', '{{media url="wysiwyg/' + filename + '"}}', content) 
```

（我没有测试过）

但我不确定如何为`<img>`HTML 中每次出现的标签做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:30:05.693

您需要将文件名捕获为一个组，然后可以一次性替换它：

```
re.sub(r'/images/stories/([\w%]+\.(?:jpg|png|gif))', r'{{media url="wysiwyg/\1"}}', content) 
```

这会在包括扩展名在内的整个文件名周围放置一个捕获组 ( `(...)`)（它现在使用*非*捕获组`(?:...)`），从而导致：

```
>>> re.sub(r'/images/stories/([\w%]+\.(?:jpg|png|gif))', r'{{media url="wysiwyg/\1"}}', content)
'<img width="580" height="183" src="{{media url="wysiwyg/acidalkalinetable.jpg"}}" alt="acid alkaline table" title="Body pH Balance">' 
```

这`\1`用作替换模式，请参阅[`re.sub()`文档](http://docs.python.org/2/library/re.html#re.sub)。

此`re.sub()`调用将使用语法替换*所有*匹配`/images/stories/..`的路径。`{{media url="wisywig/.."}}`

# android - 在 ViewPager 中初始化活动的最佳方式

> ID：15506406
> 
> 赞同：0
> 
> 时间：2013-03-19T17:27:35.580
> 
> 标签：android

我想在 ViewPager 中编写一些活动的应用程序，所以我这样写：

```
calendarView = inflater.inflate(R.layout.calendar, null);
calendarView.setTag(getString("tag")); 
```

单个视图的初始化是相当多的代码。事实上，我有 3 个视图，所以它们的初始化看起来都很糟糕。我只是好奇是否有任何其他（正确的）方式来处理 ViewPager？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:40:08.617

我不太确定我是否得到了您想要的，但是模块化的一种好方法是使用[Fragments](http://developer.android.com/guide/components/fragments.html)。在 Fragment 中打包您的视图 + 功能并相应地返回每个 Fragment `getItem`（[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)方法）。这里有关于 Android 培训的源代码[http://developer.android.com/training/implementing-navigation/lateral.html#horizo​​ntal-paging](http://developer.android.com/training/implementing-navigation/lateral.html#horizontal-paging)

# asp.net - 对齐表格中 DropdownList 和 TextBox 的宽度

> ID：15506409
> 
> 赞同：2
> 
> 时间：2013-03-19T17:27:47.977
> 
> 标签：asp.net, drop-down-menu, textbox, alignment, css-tables

我有一个 1 列的表。在此列中，有带有文本框或带有下拉列表的行。我现在想要的是这些控件具有相同的宽度。所以我将控件的宽度设置为 100%。然而，结果是下拉列表比文本框短 5-10 像素。我试过设置：

```
Width="100%" 
```

也：

```
style="width: 100%" 
```

但那里没有成功。在 Visual Studio 设计器中，所有控件的宽度都是正确的。但在 Firefox、Chrome 甚至 IE 中，下拉列表更短。

请提出建议:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:34:04.000

我已经看到这项工作使用`box-sizing`：

```
input, select, textarea {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
} 
```

[JS 小提琴演示](http://jsfiddle.net/fthrd/)

# php - html文件中的php脚本错误

> ID：15506410
> 
> 赞同：0
> 
> 时间：2013-03-19T17:27:52.120
> 
> 标签：php

我对此相对较新，试图让用户名的 mysql 数据库数组显示在另一个表单的 html 下拉输入中，但是 php 脚本只是继续显示而不是函数。下面是错误的截图

[http://s10.postimage.org/j4xuamkwp/untitled.png](http://s10.postimage.org/j4xuamkwp/untitled.png)

php 脚本位于我的 html 文件中

```
<?php
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$db = 'fid';

$conn = mysql_connect($dbhost,$dbuser,$dbpass);
if (!$conn)
die('Could not connect: ' . mysql_error());

mysql_select_db($db);

echo '<label class="input" for="investigator" type="input">Importance:</label><select id="investigator" name="investigator">';
$resource = mysql_query("SELECT `Username` FROM `user`");
if($resource && mysql_num_rows($resource)) {
    while ($row = mysql_fetch_assoc($resource)){
        echo '<option value="'.$row['Username'].'">'.$row['Username'].'</option>';
    }
}
echo '</select>';
mysql_close($conn)
?> 
```

我认为它是 while 循环中的一个问题，但是无法修复它并且它变得非常令人沮丧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:29:05.673

您的文件需要具有`.php`扩展名才能正常工作。

`.html`不会被识别为 php 文件。

为您的文件命名：myfile.php 用于其中包含 php 代码的文件。不是 myfile.html

编辑：正如其他人指出的那样，您可以将 html 添加为 php 类型，但这通常不是这样做的，我也不推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:32:29.117

听起来您的服务器没有正确解析 PHP。夫妇故障排除技巧-

1）确保您在服务器上启用了PHP。
2) 确保文件的扩展名是“.php”。
3) 如果您希望您的服务器将“.htm|html”文件解析为 PHP，您可以[按照以下步骤更改您的 .htaccess（假设您使用的是 apache）。](http://www.velvetblues.com/web-development-blog/how-to-parse-html-files-as-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:34:01.040

是的，PHP 解释器（读取和计算 PHP 脚本的 Web 服务器的一部分）`.html`不会读取。

如果您以`.php`结尾重命名文件，例如`file.php`（**不是** `file.html`）您的脚本应该可以工作。

你脚本的这一部分让我很困惑：

```
if (!$conn)
die('Could not connect: ' . mysql_error()); 
```

不应该

```
if (!$conn) {
die('Could not connect: ' . mysql_error());
} 
```

`{`and`}`告诉你脚本的`PHP`哪一部分是`if`或`while`哪一部分不是。

# iphone - 音频单元中可能的输出采样率

> ID：15506414
> 
> 赞同：2
> 
> 时间：2013-03-19T17:27:55.253
> 
> 标签：iphone, ios, core-audio, audiounit

我正在尝试为远程 I/O 音频单元的输入流设置不同的采样率（如 32kHz、24kHz 等）。但无论我设置什么，输出总是以这些采样率之一播放 - 22.05kHz、33.1kHz、11.0kHz。令人惊讶的是，当我调用 for`AudioUnitGetProperty`时，它总是返回 44.1kHz`kAudioUnitScope_Output``kAudioUnitProperty_SampleRate`

```
- (void)startToneUnit
{
    AudioComponentDescription defaultOutputDescription;
    defaultOutputDescription.componentType = kAudioUnitType_Output;
    defaultOutputDescription.componentSubType = kAudioUnitSubType_RemoteIO;
    defaultOutputDescription.componentManufacturer = kAudioUnitManufacturer_Apple;
    defaultOutputDescription.componentFlags = 0;
    defaultOutputDescription.componentFlagsMask = 0;

        // Get the default playback output unit
    AudioComponent defaultOutput = AudioComponentFindNext(NULL, &defaultOutputDescription);
    NSAssert(defaultOutput, @"Can't find default output");

        // Create a new unit based on this that we'll use for output
    OSErr err = AudioComponentInstanceNew(defaultOutput, &toneUnit);
    NSAssert1(toneUnit, @"Error creating unit: %hd", err);

        // Set our tone rendering function on the unit
    AURenderCallbackStruct input;
    input.inputProc = RenderTone;
    input.inputProcRefCon = (__bridge void *)(self);
    err = AudioUnitSetProperty(toneUnit,
                               kAudioUnitProperty_SetRenderCallback,
                               kAudioUnitScope_Input,
                               0,
                               &input,
                               sizeof(input));
    NSAssert1(err == noErr, @"Error setting callback: %hd", err);

        // Set the format to 32 bit, single channel, floating point, linear PCM
    const int four_bytes_per_float = 4;
    const int eight_bits_per_byte = 8;

    AudioStreamBasicDescription streamFormat;
    streamFormat.mSampleRate = SAMPLE_RATE;
    streamFormat.mFormatID = kAudioFormatLinearPCM;
    streamFormat.mFormatFlags =
    kAudioFormatFlagsNativeFloatPacked;
    streamFormat.mBytesPerPacket = four_bytes_per_float;
    streamFormat.mFramesPerPacket = 1;
    streamFormat.mBytesPerFrame = four_bytes_per_float;
    streamFormat.mChannelsPerFrame = 1;
    streamFormat.mBitsPerChannel = four_bytes_per_float * eight_bits_per_byte;
    err = AudioUnitSetProperty (toneUnit,
                                kAudioUnitProperty_StreamFormat,
                                kAudioUnitScope_Input,
                                0,
                                &streamFormat,
                                sizeof(AudioStreamBasicDescription));

    NSAssert1(err == noErr, @"Error setting stream format: %hd", err);

        // Stop changing parameters on the unit
    err = AudioUnitInitialize(toneUnit);
    NSAssert1(err == noErr, @"Error initializing unit: %hd", err);

        // Start playback
    err = AudioOutputUnitStart(toneUnit);
    NSAssert1(err == noErr, @"Error starting unit: %hd", err);

    Float64 outSampleRate = 0.0;
    UInt32 size = sizeof(Float64);
    AudioUnitGetProperty (toneUnit,
                          kAudioUnitProperty_SampleRate,
                          kAudioUnitScope_Output,
                          0,
                          &outSampleRate,
                          &size);
    NSLog(@"Output sample rate is now at %f Hz", outSampleRate);

   } 
```

音频单元支持的所有可能的输出采样率是多少？对此苹果文档的任何参考都将非常有帮助

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:47:01.230

`AudioUnit`通常，s 可以以您指定的任何采样率运行。作为硬件门面的`RemoteIO`（或 Mac OS X 上的 HAL）AudioUnits 受到更多限制 - 变速时钟发生器，可以以任意采样率运行的采样率发生器，非常昂贵，通常不适合电话 :)

不同的 iOS 硬件、硬件型号或硬件线或版本可能支持不同的采样率。 `RemoteIO`只需接受您请求的速率并将板载转换器设置为最接近您请求的速率。你总是必须做一个`AudioUnitGetProperty`看看你实际得到了什么。如果您想以不同的速度录制或工作，则需要使用转换器插件。

# ios - AVFoundation - 是否可以查看缓冲了多少视频流？

> ID：15506415
> 
> 赞同：2
> 
> 时间：2013-03-19T17:28:00.463
> 
> 标签：ios, objective-c, cocoa-touch, video-streaming, avfoundation

我想知道是否有任何 AVPlayer 类上的属性或方法告诉我我的流视频的百分比（或多少 CMTime/CMTimeRange）可播放/缓冲到设备上？

我看过`AVPlayer`,`AVURLAsset`和`AVPlayerItem`. 除了方法之外，我还没有发现任何看起来会有所帮助的东西`seekableTimeRanges`。

感谢您的任何帮助。

# spring - 无法使用复合键持久化瞬态对象

> ID：15506419
> 
> 赞同：1
> 
> 时间：2013-03-19T17:28:23.233
> 
> 标签：spring, hibernate, spring-mvc

我有一个`Hibernate(3.3)`实体`Basket`：

```
@Entity
@Table(name = "BASKETS")
@IdClass(BasketId.class)
public class Basket {

    @ManyToOne
    @Id
    @JoinColumn(name = "id_order", referencedColumnName = "id_o")
    private Order id_order;

    @ManyToOne
    @Id
    @JoinColumn(name = "id_item", referencedColumnName = "id_i")
    private Item id_item;

    private int amount;

    public Basket() {}

    // generated getters and setters
} 
```

`BasketId`原样：

```
@Embeddable
public class BasketId implements Serializable {

    private int id_order;
    private int id_item;

    public BasketId() {}

    public BasketId(Order o, Item i) {
        id_order = o.getId_o();
        id_item = i.getId_i();
    }

    // public BasketId(int id_order, int id_item) {
    // this.id_item = id_item;
    // this.id_order = id_order;
    // }

    //generated getter and setters
} 
```

问题是当我想`Order`用 autowired `SessionFactory session`as保存瞬态时`session().save(o)`：

```
@Entity
@Table(name = "ORDERS")
public class Order {
    @Id
    @GeneratedValue
    @Column(name = "id_o")
    private int id_o;

    @Column(name = "date")
    private Timestamp date;

    @OneToMany(mappedBy = "id_order")
    private Set<Basket> basketItems;

    public Order() {}
    //generated getter and setters
} 
```

我得到了一个愚蠢的例外：

```
message Request processing failed; nested exception is org.hibernate.PropertyAccessException: could not set a field value by reflection setter of foo.server.hib.BasketId.id_item

description The server encountered an internal error that prevented it from fulfilling this request.

exception

    org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.PropertyAccessException: could not set a field value by reflection setter of foo.server.hib.BasketId.id_item
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)

root cause

    org.hibernate.PropertyAccessException: could not set a field value by reflection setter of foo.server.hib.BasketId.id_item
    org.hibernate.property.DirectPropertyAccessor$DirectSetter.set(DirectPropertyAccessor.java:114)
    org.hibernate.tuple.component.AbstractComponentTuplizer.setPropertyValues(AbstractComponentTuplizer.java:104)
...
root cause

    java.lang.IllegalArgumentException: Can not set int field foo.server.hib.BasketId.id_item to foo.server.hib.Item
    sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146)
    sun.reflect.UnsafeIntegerFieldAccessorImpl.set(UnsafeIntegerFieldAccessorImpl.java:80)
... 
```

堆栈跟踪中的项目是：

```
public class Item {
    //other fields
    @OneToMany(mappedBy = "id_item")
    private Set<Basket> basketsWithThisItem;

    public Item() {}
    //generated getter and setters
} 
```

* * *

如上所示，我尝试使用`BasketId`(as`(Item, Order)`和`(int,int)`) 的不同构造函数，并将`Object`构造函数添加到`Basket`. 接下来是做一个`merge()`而不是`save()`但没有任何帮助。

提前致谢。

**编辑**Getter 和 Setter 在那里。我使用 create 函数实现为：

```
@Transactional
public class HibOrderService implements OrderService {
    @Autowired
    private SessionFactory sessionFactory;

    public Session session() {
        return sessionFactory.getCurrentSession();
    }    

    @Override
    public void create(Order o) {
        session().merge(o);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:39:54.820

将访问器添加到您的 @Embeddable 类。获取/setId_Order()，获取/setId_Item()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:31:51.133

此处存在错误

```
Can not set int field foo.server.hib.BasketId.id_item to foo.server.hib.Item

 public BasketId(Order o, Item i) {
        id_order = o.getId_o();
        id_item = i.getId_i();
    } 
```

这里的问题是什么 `i.getId_i();`返回

# spring-webflow - Spring WebFlow 神秘问号

> ID：15506422
> 
> 赞同：1
> 
> 时间：2013-03-19T17:28:26.393
> 
> 标签：spring-webflow

有谁知道“bookingService.findBookings(currentUser?.name)”部分的问号是什么意思？

```
<view-state id="enterSearchCriteria">
    <on-render>
        <evaluate expression="bookingService.findBookings(currentUser?.name)" result="viewScope.bookings" result-type="dataModel" />
    </on-render>
    <transition on="search" to="reviewHotels"/>
    <transition on="cancelBooking">
        <evaluate expression="bookingService.cancelBooking(bookings.selectedRow)" />
    </transition>
</view-state> 
```

这是服务类中的方法：

```
@Transactional(readOnly = true)
    @SuppressWarnings("unchecked")
    public List<Booking> findBookings(String username) {
        if (username != null) {
            return em.createQuery("select b from Booking b where b.user.username = :username order by b.checkinDate").setParameter("username", username).getResultList();
        } else {
            return null;
        }
    } 
```

当前用户是我假设当前登录到应用程序的人，但代码段来自用户尚未登录的页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:32:02.960

那看起来是“安全导航操作员”。如果 currentUser 为 null，则对 currentUser?.name 的访问尝试不会导致错误（空指针）。

# asp.net-mvc-3 - @Html.RenderPartial 仅用部分视图内容替换主视图窗口，而不是在主视图内显示部分视图

> ID：15506423
> 
> 赞同：1
> 
> 时间：2013-03-19T17:28:33.397
> 
> 标签：asp.net-mvc-3, master-detail, asp.net-mvc-partialview

问题是，当我尝试在主视图内呈现部分视图时，它仅用部分视图内容替换主视图窗口，而不是在主视图内显示部分视图

## 搜索表单.html

```
@model IEnumerable<MobileFirmDirectory.Models.User>
@using (Html.BeginForm("SearchResultsPar", "User", FormMethod.Post))
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
@using (Ajax.BeginForm("SearchResultsPar", 
                       new AjaxOptions 
                       {
                           UpdateTargetId = "SearchResults",
                           InsertionMode = InsertionMode.Replace,
                           HttpMethod="GET"
                       })) 
{
    <fieldset><legend>Firm Directory Search:</legend>
      <div style="float:left;margin:10px;">
        <table style="padding:20px 0px 0px 20px;">
          <tr>
            <td style="font-weight:bold; font-size:12pt;" >Last Name:</td>
            <td style="width:300px">@Html.TextBox("lname")</td>
          </tr>
          <tr>
            <td style="font-weight:bold; font-size:12pt;">First Name:</td>
            <td>@Html.TextBox("fname")</td>
          </tr>
          <tr>
            <td style="font-weight:bold; font-size:12pt;">Title Name:</td>
            <td>@Html.TextBox("titletext")</td>
          </tr>
          <tr>
            <td style="font-weight:bold; font-size:12pt;">Office:</td>
            <td>@Html.DropDownList("Office", ViewBag.officeList as SelectList, "Select Office") </td>
          </tr>
          <tr>
            <td></td>
            <td>
              <table style="float: right;">
                <tr>
                  <td>
                    <input type="submit" value="Search" onclick="return submitcheck();" />
                  </td>
                  <td>
                    <input type="reset" value="Clear" />
                  </td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </div>

      <div id="SearchResults" style="float:right;margin:10px;padding:10px;border:dotted 5px black;">
        @{Html.RenderPartial("SearchResultsPartial");}
      </div>
    </fieldset>
} 
```

## 控制器动作

```
public ActionResult SearchResultsPar(string lname, string fname, string titletext, string office)
{
    **Code is hidden intentionally**
    return PartialView("SearchResultsPartial",obj);
} 
```

# multithreading - JavaFx ProgressBar 不更新

> ID：15506426
> 
> 赞同：6
> 
> 时间：2013-03-19T17:28:39.950
> 
> 标签：multithreading, progress-bar, javafx

我试图了解如何在多线程环境中更新 ProgressBar。我在这里做错了什么，但我不明白它是什么。这应该只是每 3 秒填满一次，但它不会：

```
 Task<Void> task = new Task<Void>(){
        @Override
        public Void call(){
            for (int i = 1; i < 10; i++)    {
                try {
                    Thread.sleep(3000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println(i);
                updateProgress(i , 10);
            }
        return null;                
        }
    };

    updProg = new ProgressBar();
    updProg.progressProperty().bind(task.progressProperty());

    Thread th = new Thread(task);
    th.setDaemon(true);
    th.start(); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T23:46:41.650

你的样品对我来说很好。

样品每 3 秒填充一点点，半分钟内完全填满。

我只是将它包装在一些脚手架代码中以使其可执行并且无需更改即可工作（java7u15，win7）。

![简单任务进度](../Images/91d3bd38301891ae274c1d67cf1ea4ce.png)

```
import javafx.application.Application;
import javafx.concurrent.Task;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class ProgressTest extends Application {
  public static void main(String[] args) { Application.launch(args); }
  @Override public void start(Stage stage) {
    Task<Void> task = new Task<Void>() {
      @Override public Void call() {
        for (int i = 0; i < 10; i++) {
          try {
            Thread.sleep(100);
          } catch (InterruptedException e) {
            Thread.interrupted();
            break;
          }
          System.out.println(i + 1);
          updateProgress(i + 1, 10);
        }
        return null;
      }
    };

    ProgressBar updProg = new ProgressBar();
    updProg.progressProperty().bind(task.progressProperty());

    Thread th = new Thread(task);
    th.setDaemon(true);
    th.start();

    StackPane layout = new StackPane();
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
    layout.getChildren().add(updProg);

    stage.setScene(new Scene(layout));
    stage.show();
  }
} 
```

* * *

也许您一直在使用 Java 8 的一些早期访问版本，其中包含有关 ProgressBar 更新的错误（现已修复）。

[RT-29018 ProgressBar 和 ProgressIndicator 在更新 progressProperty 时消失](http://javafx-jira.kenai.com/browse/RT-29018)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:41:26.870

您使用的是最新的 JDK 8 Early-Access 吗？如果是这样，请参阅我提交的此错误报告：http: [//javafx-jira.kenai.com/browse/RT-29018](http://javafx-jira.kenai.com/browse/RT-29018)

基本上，在最近发布的抢先体验版本中，他们对皮肤和 css 进行了一些更改。这导致了一个隐藏的错误被揭示，其中子节点比父节点更脏但都需要在相同的脉冲中重新绘制，父节点的脏级别最终会覆盖子节点的脏级别。

这导致进度不显示，事实上，对我来说`progressBar`，一旦`updateProgress`从任务中调用，它就变得完全不可见。他们有一个补丁，我不知道什么时候会通过。

一种解决方法，要么在等待补丁时使用 jdk7，要么你可以做我所做的并将旧 css 中的它应用到你的 css 样式表中：

```
/*hack to get progress bar working. From: JDK7u17 jfxrt.jar!/com/sun/javafx/scene/control/skin/caspian/caspian.css */

/*******************************************************************************
 *                                                                             *
 * ProgressBar                                                                 *
 *                                                                             *
 ******************************************************************************/

.progress-bar {
    -fx-skin: "com.sun.javafx.scene.control.skin.ProgressBarSkin";
    -fx-background-color:
        -fx-box-border,
        linear-gradient(to bottom, derive(-fx-color,30%) 5%, derive(-fx-color,-17%));
    -fx-background-insets: 0, 1;
    -fx-indeterminate-bar-length: 60;
    -fx-indeterminate-bar-escape: true;
    -fx-indeterminate-bar-flip: true;
    -fx-indeterminate-bar-animation-time: 2;
    -fx-focus-traversable: true;
}

.progress-bar .bar {
    -fx-background-color:
        -fx-box-border,
        linear-gradient(to bottom, derive(-fx-accent,95%), derive(-fx-accent,10%)),
        linear-gradient(to bottom, derive(-fx-accent,38%), -fx-accent);
    -fx-background-insets: 0, 1, 2;
    -fx-padding: 0.416667em; /* 5 */
}

.progress-bar:indeterminate .bar {
    -fx-background-color: linear-gradient(to left, transparent, -fx-accent);
}

.progress-bar .track {
     -fx-background-color:
        -fx-box-border,
        linear-gradient(to bottom, derive(-fx-color,-15%), derive(-fx-color,2.2%) 20%, derive(-fx-color,60%));
    -fx-background-insets:  0, 1;
}

.progress-bar:disabled {
    -fx-opacity: 1.0
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-18T15:24:49.313

如果您在 FXML 文件中定义了 updProg，那么问题可能是这里的初始化。

尝试删除这一行：

```
updProg = new ProgressBar(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-21T11:22:23.587

```
 Timeline updateProgressBar = new Timeline(new KeyFrame(Duration.seconds(1), new EventHandler<ActionEvent>() {
                @Override
                public void handle(ActionEvent event) {
                      /*Where Seconds and TotalSeconds are counter and total
                      respectively, also put somewhere Seconds++ or 
                      however you want to update progress. This time line 
                      will reapit each second */
                      progressBar.setProgress(Seconds / TotalSeconds);
                }
    }));
    updateProgressBar.setCycleCount(Timeline.INDEFINITE);
    updateProgressBar.play(); 
```

# c++ - C++11：通用执行器

> ID：15506427
> 
> 赞同：5
> 
> 时间：2013-03-19T17:28:41.507
> 
> 标签：c++, templates, c++11, overloading, overload-resolution

我想知道如何编译这段代码：

```
// test3.cpp                                                                                                                                                                                      

#include <iostream>

using namespace std;

template<typename R, typename... rArgs>
R universal_exer(R(*f)(rArgs...), rArgs... args)
{
    return (*f)(forward<rArgs>(args)...);
}

int addition(int a)
{
    return a;
}

int addition(int a, int b)
{
    return a + b;
}

template<typename... Args>
int addition(int a, int b, Args... args)
{
    return a + b + addition(args...);
}

int main()
{
    cout << universal_exer(&addition, 1) << endl;
} 
```

错误消息（gcc 4.7.2）：

```
test3.cpp: In function 'int main()':
test3.cpp:31:40: error: no matching function for call to 'universal_exer(<unresolved overloaded function type>, int)'
test3.cpp:31:40: note: candidate is:
test3.cpp:8:3: note: template<class R, class ... rArgs> R universal_exer(R (*)(rArgs ...), rArgs ...)
test3.cpp:8:3: note:   template argument deduction/substitution failed:
test3.cpp:31:40: note:   couldn't deduce template parameter 'R' 
```

如何指示`addition`函数的正确重载？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:35:20.190

用

```
int main()
{
    int (*f)(int) = &addition;
    cout << universal_exer(f, 1) << endl;

    // or alternatively
    // cout << universal_exer((int (*)(int))addition, 1) << endl;
} 
```

# tfs - 使用 TFPT 自动化 TFS 构建定义转储过程

> ID：15506431
> 
> 赞同：1
> 
> 时间：2013-03-19T17:29:02.987
> 
> 标签：tfs, tfs-power-tools

我正在尝试自动化 TFS 构建定义转储过程。TFPT 有 buildefinition /dump 选项，看起来非常方便。但是当我执行命令时，它会提示我提供用户名和密码以访问 TFS。所以我尝试了以下命令：

> tfpt builddefinition /dump project\definition /format:detailed /collection:xxx:8080/xxx /filepath:D:\log1.txt /login:Domain\id

这将自动填写凭据框中的用户名部分，并且我需要填写密码。但是当我尝试

> tfpt builddefinition /dump project\definition /format:detailed /collection:xxx:8080/xxx /filepath:D:\log1.txt /login:Domain\id,password

我收到以下错误：**/Dump 需要一个参数，但提供了 2 个。**

/login 开关不作为 builddefinition 的选项提供。有没有一种方法可以自动化我每次调用 TFPT 命令时需要提供 TFS 用户名和密码的部分？

# grails - 当enver代码更改/重新编译时，Grails JMS/ActiveMQ 停止工作

> ID：15506436
> 
> 赞同：1
> 
> 时间：2013-03-19T17:29:08.080
> 
> 标签：grails, jms, activemq

这很奇怪。我将 JMS 与 ActiveMQ 一起使用。在开发模式下，一切正常，但每当我在控制器或服务方法中编辑任何代码时，队列就会停止工作。

从日志中我可以看到消息已发送到队列，但从未被消费者接收/处理。我必须停止运行应用程序并重新运行 grails 运行应用程序。发送到队列的消息在重新启动时得到处理。我无法弄清楚是什么原因造成的。任何人都可以解释一下吗？非常感谢。

我正在使用带有 JMS 1.2 插件和 ActiveMQ 5.7.0 的 Grails 2.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:04:07.237

我自己想通了。所以有两个问题结合在一起并导致了这种奇怪的行为。

1.  缓存的类
    我必须运行 grails clean，然后 grails compile 给了我一个关于 JMS bean 无法启动的错误

2.  错误
    它是由我猜的方法名称使用保留字引起的。

```
@Queue(name="quickBook")
def reserve(msg) {} 
```

我将“保留”更改为其他内容，它再次起作用。

编辑：
好吧，我错了第二个。由于某种原因，注释@Queue 导致了问题。所以我不得不改用服务方法 onMessage() 。

编辑（06-07-2013）：又错了，它只是短暂地工作。

# mysql - MySQL 是否允许为一组选择器指定表？

> ID：15506439
> 
> 赞同：-1
> 
> 时间：2013-03-19T17:29:20.423
> 
> 标签：mysql

我知道为您选择的列显式指定表的 MySQL 语法：

```
SELECT p1.first, p1.last FROM people p1 /* JOIN */; 
```

但是，MySQL 是否允许语法 ~ （见下文）可以达到相同的结果？

```
SELECT p1 (first, last) FROM people p1 /* JOIN */; 
```

我遇到的常见问题是我已经有一个表示 SELECT 语句的连接字符串，尽管我需要为这些值添加前缀，例如我的字符串是`first, last`，尽管实际查询是期望的`p1.first, p1.last`。所描述的场景是在程序级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:34:01.800

你的问题的答案是，不，这是不允许的。

在使用连接字符串构建查询时，您确实需要小心，以免暴露 SQL 注入漏洞（如果这些字符串包含来自用户的数据输入）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:33:43.287

没有语法可以满足您的要求，但您只需限定非唯一列的列名。如果`first`和`last`列仅存*在于*上`p1`，则`p1.`不需要 。

如果不是这种情况，那么如果您要加入特定列，您可以使用`USING`它来解决这个问题。例如：

```
SELECT first, last FROM people p1 JOIN people p2 USING (first, last) 
```

已验证。但是，如果您`ON`改用它，您仍然必须限定列名。

如果列存在于多个表中并且您没有加入它们，那么您将无法在字段列表中限定列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:53:22.357

如果问题是将表别名“注入”到预先构建的列列表中，您可以尝试以下操作：

```
CONCAT(table_alias, '.', REPLACE(column_list, ', ', CONCAT(', ', table_alias, '.'))) 
```

即用逗号+空格+表别名后跟a替换列表中的每个逗号+空格，`.`同时在列表的开头添加带有a的别名`.`。当然，这假设列表不以逗号 + 空格结尾。

请不要告诉我你在列名中有逗号*！*

# grails - 使用 GORM 保存 LocalDate 列表

> ID：15506449
> 
> 赞同：0
> 
> 时间：2013-03-19T17:29:40.900
> 
> 标签：grails, grails-orm, jodatime

我正在尝试在 grails 中保留 joda LocalDate 列表。我现在拥有的是这样的：

```
package com.publidirecta

import org.joda.time.LocalDate

class Evento {

    List <LocalDate> fechas = []

    static hasMany = [fechas:LocalDate]
} 
```

我收到以下错误：

```
MappingException: Missing type or column for column[fechas_persistent_local_date] on domain[Evento] referencing[org.jadira.usertype.dateandtime.joda.PersistentLocalDate]
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread 
```

我试过没有 hasMany 属性，但也不起作用（只是没有添加任何东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:20:13.970

正如 Alidad 建议的那样，您应该用新实体包装 LocalDate 并与该实体建立多对多关系。此外，您必须注意将`LocalDate`类型映射到数据库，因为这不是 Hibernate 本身支持的类型。查看涵盖该主题的本[指南。](http://gpc.github.com/grails-joda-time/guide/persistence.html)

使用[用户类型](http://usertype.sourceforge.net/usertype.jodatime/index.html)库，您的类应该类似于：

```
package com.publidirecta

class Evento {

    static hasMany = [fechas: Fecha]

    List <Fecha> fechas = []
} 
```

和

```
import org.jadira.usertype.dateandtime.joda.PersistentLocalDate
import org.joda.time.LocalDate

class Fecha {
    LocalDate date

    static mapping = {
        date type: PersistentLocalDate
    }
} 
```

确保将以下内容添加到您的`BuildConfig`：

```
dependencies {
        compile 'org.jadira.usertype:usertype.jodatime:1.9'
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:07:20.307

如何使用 localDate 将您的“fechas”定义为另一个域并创建 hasmany 关系：

像这样的东西：

/Evento.groovy

```
class Evento  {
 static hasMany = [fechas: Fecha]
} 
```

/Fecha.groovy

```
import org.joda.time.LocalDate

class Fecha  {

    LocalDate date

} 
```

# unit-testing - 在 VS 2012 中运行 MVC4 单元测试用例时出现错误调用执行程序“executor://mstestadapter/v1”时发生异常：

> ID：15506460
> 
> 赞同：1
> 
> 时间：2013-03-19T17:30:10.900
> 
> 标签：unit-testing, visual-studio-2012

在 VS 2012 中尝试在 MVC4 中运行我的单元测试用例时，出现错误：-

调用执行程序“executor://mstestadapter/v1”时发生异常：对象引用未设置为对象的实例。

我搜索了很多，大部分答案都是针对 Entity framework dll 但我没有使用 Entity Framework 。

我在 MVc3 中创建了单元测试用例，最近，我们转换为 MVC4。但我不确定这是因为我团队中的其他人能够运行他们的测试用例。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:04:55.977

只需在您的测试mentod 类中使用以下方法即可。

```
 [TestCleanup]
    public void TestCleanup()
    {
        //Clear you object here. whatever in error message.
        OperationContext.OperationContext.Clear();
    } 
```

我也遇到过这种问题，加了这个功能后，就可以了。

# java - 滑动菜单和 Maven

> ID：15506465
> 
> 赞同：0
> 
> 时间：2013-03-19T17:30:29.277
> 
> 标签：java, android, maven, slidingmenu

当尝试将[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)添加为如下依赖项时：

```
<dependency>
    <groupId>com.slidingmenu</groupId>
    <artifactId>parent</artifactId>
    <version>1.2</version>
    <type>pom</type>
</dependency> 
```

我收到一条错误消息，说它找不到 SlidingMenu。依赖是否正确？我还没有发现它在任何地方定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:39:35.607

你至少有两个问题。

1.  此依赖项在中央存储库中似乎不可用，这意味着 Maven 将无法自动下载它。您需要手动下载和构建项目，然后使用`install`插件安装在本地存储库中：[http ://maven.apache.org/plugins/maven-install-plugin/examples/specific-local-repo.html](http://maven.apache.org/plugins/maven-install-plugin/examples/specific-local-repo.html)
2.  和元素不正确`artifactId`。`type`查看项目链接，工件 ID 为`slidingmenu`，类型应为`apklib`。请注意，我没有看得很深；该项目中可能还有其他模块。

此外，Maven 可能也可能无法正确组合`apklib`依赖类型。我没有使用 Maven 构建 Android，所以不知道配置是什么，但怀疑它需要使用一些程序集插件。

# javascript - Valums Uploader 额外请求有效负载添加到文件

> ID：15506467
> 
> 赞同：2
> 
> 时间：2013-03-19T17:30:33.163
> 
> 标签：javascript, asp.net, vb.net, file-upload

我正在尝试在 VB 中使用 ASP.NET设置 Valums 文件上传器（[https://github.com/valums/file-uploader ）。](https://github.com/valums/file-uploader)该文件当前正在上传和存储在我想要的位置并且似乎正在工作，但是似乎 Firefox 和 Chrome（我也假设 Safari）都在正在上传的实际 CSV 文件中附加了一些额外的文本。

例如，这是我在通过 Firefox 上传的文件中看到的：

```
-----------------------------31203180683076
Content-Disposition: form-data; name="qqfile"; filename="test.csv"
Content-Type: application/vnd.ms-excel

/* ACTUAL CONTENTS OF FILE HERE */

-----------------------------31203180683076-- 
```

同样，Chrome：

```
------WebKitFormBoundarytB00bSQcafSOAnmq
Content-Disposition: form-data; name="qqfile"; filename="test.csv"
Content-Type: application/vnd.ms-excel

/* ACTUAL CONTENTS OF FILE HERE */

------WebKitFormBoundarytB00bSQcafSOAnmq-- 
```

如果我在 Chrome 中查看网络面板，我确实看到上面发布的内容是在请求有效负载中发送的，但是我想删除它，或者在服务器上写文件时完全忽略它。当我添加`paramsInBody: false`到上传器时，我以为我已经找到了解决方案，它确实消除了一些混乱，但不是全部。

下面是客户端的相关代码：

```
function createUploader() {
    var uploader = new qq.FineUploader({
        element: document.getElementById('bootstrapped-fine-uploader'),
        request: {
            paramsInBody: false,
            endpoint: 'Uploader.ashx'
        },
        validation: {
            allowedExtensions: ['csv', 'txt']
        },
        text: {
            uploadButton: '<div><i class="icon-upload-alt icon-white"></i> Browse for files...</div>'
        },
        template: '<div class="span12"><div class="qq-uploader">' +
                  '<pre class="qq-upload-drop-area span12"><span>{dragZoneText}</span></pre>' +
                  '<div class="qq-upload-button btn btn-success" style="width: auto;">{uploadButtonText}</div>' +
                  '<span class="qq-drop-processing"><span class="qq-drop-processing-spinner"></span></span>' +
                  '<ul class="qq-upload-list" style="margin: 0; list-style-type: none; margin-top: 20px;"></ul>' +
                '</div></div>',
        classes: {
            success: 'alert alert-success',
            fail: 'alert alert-error'
        }
    });
} 
```

这是相关的服务器端处理程序：

```
Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest
    On Error GoTo upload_error

    Dim Request = context.Request
    Dim strm As Stream = Request.InputStream
    Dim br As BinaryReader = New BinaryReader(strm)
    Dim fileContents() As Byte = {}
    Const ChunkSize As Integer = 1024 * 1024

    ' We need to hand IE a little bit differently...
    If Request.Browser.Browser = "IE" Then
        Dim myfiles As System.Web.HttpFileCollection = System.Web.HttpContext.Current.Request.Files
        Dim postedFile As System.Web.HttpPostedFile = myfiles(0)
        If Not postedFile.FileName.Equals("") Then
            Dim fn As String = System.IO.Path.GetFileName(postedFile.FileName)
            br = New BinaryReader(postedFile.InputStream)
        End If
    End If

    ' Now have the binary reader on the IE file input Stream. Back to normal...
    Do While br.BaseStream.Position < br.BaseStream.Length - 1
        Dim b(ChunkSize - 1) As Byte
        Dim ReadLen As Integer = br.Read(b, 0, ChunkSize)
        Dim dummy() As Byte = fileContents.Concat(b).ToArray()
        fileContents = dummy
        dummy = Nothing
    Loop

    ' Or write it to the filesystem:
    Dim writeStream As FileStream = New FileStream("C:\TEMP\" & System.Guid.NewGuid.ToString() & ".csv", FileMode.Create)
    Dim bw As New BinaryWriter(writeStream)
    bw.Write(fileContents)
    bw.Close()

    ' it all worked ok so send back SUCCESS is true!
    context.Response.Write("{""success"":true}")
    Exit Sub

upload_error:
    context.Response.Write("{""error"":""An Error Occured""}")
End Sub 
```

关于为什么它会以这种方式工作的任何想法？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:16:59.317

我能够通过删除 VB 代码中的浏览器检查来解决这个问题。我没有检查 IE，而是让它在所有浏览器上运行。

在运行调试时，我注意到一些东西被拉出，我想使用条件内的代码拉出，所以我尝试使用 Chrome 运行它，它运行良好。

VB 的代码现在看起来像这样。我所要做的就是注释掉条件并保持内部完整：

```
'Removed the If conditional and it worked.
'If Request.Browser.Browser = "IE" Then
    Dim myfiles As System.Web.HttpFileCollection = System.Web.HttpContext.Current.Request.Files
    Dim postedFile As System.Web.HttpPostedFile = myfiles(0)
    If Not postedFile.FileName.Equals("") Then
        Dim fn As String = System.IO.Path.GetFileName(postedFile.FileName)
        br = New BinaryReader(postedFile.InputStream)
    End If
'End If 
```

# ios - 在 iPhone 上录制音频不保存

> ID：15506468
> 
> 赞同：1
> 
> 时间：2013-03-19T17:30:35.613
> 
> 标签：ios, cordova

我已经做了很多查找，并且看起来代码是正确的。我不知道从这里去哪里。它只是不记录任何东西

```
if(device.platform == "iPhone")
{
myFileRecord = "myrecording.wav";myMime="audio/x-wav";

document.addEventListener("deviceready", function onDeviceReady() {
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS1, function fail1(){});
}, false);

var gotFS1 = function (fileSystem) {
fileSystem.root.getFile("myrecording.wav",
    { create: true, exclusive: false }, //create if it does not exist
    function success(entry) {
        var src = entry.toURI();
        console.log(src); //logs blank.wav's path starting with file://
    },
    function fail1() {}
);
};

}
recordAudio(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:39:04.467

您不能使用 '==' 来检查字符串。

尝试：

```
if ([device.platform isEqualToString:@"iPhone"]) 
```

此外，您可能需要查看[http://theiphonewiki.com/wiki/Models](http://theiphonewiki.com/wiki/Models)并查看“标识符”列。这些可能是 'device.platform' 将要设置的。

# c# - 为什么我的 EF 存储过程函数导入会返回之前的结果？

> ID：15506470
> 
> 赞同：1
> 
> 时间：2013-03-19T17:30:37.313
> 
> 标签：c#, wpf, entity-framework, data-binding, stored-procedures

这里的 3 位程序员同事对此感到困惑。**为什么从先前的存储过程调用返回旧数据？**这里我展示了第二次搜索的错误结果：

![在此处输入图像描述](../Images/b261e3b6168c36a5b4763c8136f6e850.png)

第一次搜索工作正常。我输入7392，点击按钮，按预期得到库存7392结果。但是，如果我输入第二个数字 (7395)，则会再次返回不需要的 7392 结果。

我首先与设计器一起使用 EF 数据库。存储过程由实体框架函数 import ( `usp_StockSearch`) 包装。结果进入实体。这是代码：

```
TofsData.TofsEntities context = mainWindow.TofsEntitiesContext;

ObjectResult<TofsData.StockSearchResult> stockSearchResults = 
                        context.usp_StockSearch(NewStockNumTextBox.Text);

List<TofsData.StockSearchResult> stockList = stockSearchResults.ToList();

StockSearchResultsListBox.ItemsSource = stockList; 
```

随着程序运行，函数导入结果进入`ObjectResult<t>`我的实体类型 ( `StockSearchResult`)。调用`ToList()`ObjectResult 运行存储过程并将返回的数据库值放入`List<StockSearchResult>`.

在运行此代码之前，我看到 stockList、stockSearchResults 和 ListBox.ItemsSource 为空，而 ListBox.Items.Count 为 0。当我单步执行代码时，我看到 .ToList() 执行后的结果不正确。

当存储过程从 SSMS 运行时，它每次都会返回预期的结果。我已经运行 SQL Profiler 以确保将正确的搜索参数传递给 SPROC。

如果我运行返回多个结果的搜索，我会返回附加到先前结果的预期结果。对这里发生的事情有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:48:45.587

当上下文是仅在构造父类时创建的全局变量时，我之前已经看到过这种情况。基本上，这是一个我认为在 6.0 中得到修复的 EF 缓存问题（遗憾的是，它仍处于 alpha 版本）。

我会尝试使用每个请求的上下文模式 - 它解决了我几周前遇到的类似问题。

# android - 安卓下拉列表

> ID：15506472
> 
> 赞同：0
> 
> 时间：2013-03-19T17:30:39.363
> 
> 标签：android, xml

嗨，我正在尝试创建一个类似图像的 GUI。我用 Photoshop 创建了这个。我在互联网上搜索但没有，你能帮我一些教程或其他任何东西。感谢帮助！

![我用 Ps 创建了这个](../Images/2fcfed44b8a4a700b6455dda269b1a07.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:06:52.613

我的直接想法：

`ViewPager`– 对于部分 –[文档](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)和[教程](http://developer.android.com/training/animation/screen-slide.html)

`ExpandableListView` - 对于可扩展菜单 -[文档](http://developer.android.com/reference/android/widget/ExpandableListView.html)和看[这里](https://stackoverflow.com/questions/9824074/android-expandablelistview-looking-for-a-tutorial)

`ImageView`或`ImageButton`– 对于图像 –[查看文档](http://developer.android.com/reference/android/widget/ImageView.html)，[按钮文档](http://developer.android.com/reference/android/widget/ImageButton.html)。也许你也可以看看[`NinePatch`](http://developer.android.com/tools/help/draw9patch.html)（[文档](http://developer.android.com/reference/android/graphics/NinePatch.html)和[指南](http://developer.android.com/tools/help/draw9patch.html)）

`EditText`– 对于输入框 –[文档](http://developer.android.com/reference/android/widget/EditText.html)

[这](http://developer.android.com/training/basics/firstapp/index.html)是一个很好的 Android 开发初学者指南，它还展示了如何使用 EditTexts 和其他不同的东西。

还有其他解决方案，但这应该让您有机会自己在互联网上找到更多。看看你能想出什么，然后再问你是否在某个*特定问题上付出了一些**努力*，但你似乎无法解决它。

 *编辑：刚刚意识到您可能只是在寻找下拉列表。哦，好吧，希望你能用剩下的。*

# jquery - 运行 PHP onClick - session_destroy

> ID：15506476
> 
> 赞同：3
> 
> 时间：2013-03-19T17:31:01.583
> 
> 标签：jquery, html, php

当用户单击“注销”时，我希望销毁会话，我试图通过使用 jQuery 调用 onClick 函数来执行此操作，然后调用包含 .PHP 文件的 .PHP 文件`session_destroy();`。

索引.php

```
<?php  
if(isset($_SESSION['username'])) {
  echo "<li><a href='#' id='logOut' onclick='logOut();'>Log Out</a></li>";
}
?> 
```

这使得注销按钮仅在用户登录时和 onClick 应该调用时可见，该按钮`logOut()`包含在 Nav.js 中。

导航.js

```
function logOut() {
  $.get("../Controller/logOut.php");
  return false;
} 
```

logOut.php

```
<?php
  session_destroy();
?> 
```

当我单击“注销”时，似乎什么都没有发生，并且我在 Chrome 开发控制台中没有收到任何错误。问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:35:58.087

您必须在调用之前开始会话`session_destroy()`

```
<?php
  session_start();
  session_destroy();
  header("Location: login.php");   //redirect your page to login page
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:34:29.443

您正在使用 AJAX 请求。要直接注销，直接调用`logOut.php`文件即可。

```
function logOut() {
  window.location = "../Controller/logOut.php";
  return false;
} 
```

或者最简单的方法：

```
<?php  
if(isset($_SESSION['username'])) {
  echo "<li><a href='../Controller/logOut.php' id='logOut'>Log Out</a></li>";
}
?> 
```

`logOut.php`销毁会话后，您可能需要向文件添加重定向。

# linux - 汇编代码，输入代码时的错误值，阶乘

> ID：15506477
> 
> 赞同：0
> 
> 时间：2013-03-19T17:31:10.270
> 
> 标签：linux, assembly, x86, segmentation-fault, push

这是我的完整代码：

```
SYSCALL = 0X80
STDIN = 0
STDOUT = 1
SYSREAD = 3
SYSWRITE = 4
SYSEXIT = 1

.section .data

WYBOR_MAXLEN = 2
WYBOR: .space WYBOR_MAXLEN
WYBOR_LEN: .byte

.section .text
.globl _start

_start:

mov $WYBOR_MAXLEN, %edx
mov $WYBOR, %ecx
mov $STDIN, %ebx
mov $SYSREAD, %eax
int $SYSCALL

movl $0, %edi
mov WYBOR(, %edi, 1), %al

pushl %eax
call silnia
addl $4, %esp
movl %eax, %ebx
movl $1, %eax
int $0x80

#To jest rzeczywista definicja funkcji
.type silnia, @function

silnia:

pushl %ebp
movl %esp, %ebp
movl 8(%ebp), %eax
cmpl $1, %eax
je end_silnia

decl %eax
pushl %eax
call silnia
movl 8(%ebp), %ebx
imull %ebx, %eax

end_silnia:
movl %ebp, %esp
popl %ebp
ret 
```

我希望该程序运行并输入值以从中计算阶乘。我可以写值，但它会“分段错误”。如果我将 pushl $LOl 更改为 ecample pushl $4，它将计入正常阶乘。我可以更改代码以从键盘输入值以进行编程吗？

@edit 我改变了这个片段：

```
movl $0, %edi
mov WYBOR(, %edi, 1), %al

pushl %eax 
```

如果我在键盘上输入任何内容，它每次都会返回值“0”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:29:21.247

阶乘函数的退出条件是`n == 1`（`n`参数在哪里）。因此，如果您调用值为 0 的函数（就像您现在所做的那样，因为您已定义`LOL`为 0），则需要很长时间才能`n`达到 1（大约 40 亿次递归调用）。
在此之前，您的程序很可能会耗尽其分配的堆栈空间。

要么将退出条件更改为`n <= 1`，要么确保永远不会将 0 传递给函数。

# vb.net - ExpandoObject 在 vb.net 和 c# 中的工作方式不同

> ID：15506480
> 
> 赞同：0
> 
> 时间：2013-03-19T17:31:14.267
> 
> 标签：vb.net, facebook, expandoobject

[在从这里https://github.com/facebook-csharp-sdk/facebook-winforms-sample](https://github.com/facebook-csharp-sdk/facebook-winforms-sample)转换一些代码之后，isnt acseptig 代码就像`parameters.client_id`

这是我遇到问题的部分

```
Private Function GenerateLoginUrl(ByVal appId As String, ByVal extendedPermissions As String) As Uri
        Dim parameters As New ExpandoObject() =
        parameters.client_id = appId
        parameters.redirect_uri = "https://www.facebook.com/connect/login_success.html"

        ' The requested response: an access token (token), an authorization code (code), or both (code token).
        parameters.response_type = "token"

        ' list of additional display modes can be found at http://developers.facebook.com/docs/reference/dialogs/#display
        parameters.display = "popup"

        ' add the 'scope' parameter only if we have extendedPermissions.
        If Not String.IsNullOrWhiteSpace(extendedPermissions) Then
            parameters.scope = extendedPermissions
        End If

        ' when the Form is loaded navigate to the login url.
        Return _fb.GetLoginUrl(parameters)
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:16:33.807

尝试删除行尾的等号`Dim parameters As New ExpandoObject()`

# c# - 向 DevExpress 的 TreeList 的一行添加值

> ID：15506484
> 
> 赞同：0
> 
> 时间：2013-03-19T17:31:25.473
> 
> 标签：c#, devexpress, xtratreelist

我正在创建一个应用程序并使用 DevExpress 的 TreeList。目前，我是在节点编辑器中创建 TreeList 的节点的人，并计划通过将其添加到指定列中来读取或传输我的 TreeList 中的所有数据。

我怎么能做到这一点？

这是我的代码

```
tbl.Rows.Add(4,  4, 10 );
tbl.Rows.Add(5, 5, 30); 
```

但它根本不起作用。我只是得到一个例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:53:43.430

Devexpress 控件的工作方式与内置的 winforms 控件不同。

这是一个关于如何`TreeView`以非绑定方式将项目添加到您的示例的示例：

```
using DevExpress.XtraTreeList.Columns;
using DevExpress.XtraTreeList.Nodes;

public class Form1
{

    private void Form1_Load(System.Object sender, System.EventArgs e)
    {
        TreeList1.Columns.Clear();
        TreeListColumn newColumn = TreeList1.Columns.Add();
        newColumn.Caption = "Tree Column";
        newColumn.Visible = true;

        TreeList1.Nodes.Clear();
        TreeListNode rootNode = TreeList1.Nodes.Add({ "Root Node" });
        TreeListNode child1 = rootNode.Nodes.Add({ "Child 1" });
        child1.Nodes.Add({ "GrandChild 1.1" });
        child1.Nodes.Add({ "GrandChild 1.2" });

        TreeListNode child2 = rootNode.Nodes.Add({ "Child 2" });
        child2.Nodes.Add({ "GrandChild2.1" });
        child2.Nodes.Add({ "GrandChild2.2" });
        child2.Nodes.Add({ "GrandChild2.3" });

        TreeList1.RefreshNode(rootNode);
    }
} 
```

如果您需要更多代码示例，请单击下面 - 您会在那里找到大量示例：

[http://documentation.devexpress.com/#WindowsForms/CustomDocument5558](http://documentation.devexpress.com/#WindowsForms/CustomDocument5558)

# jquery-plugins - 将 jQuery 过滤插件 (Filtrify) 中的菜单集成到站点菜单中

> ID：15506487
> 
> 赞同：1
> 
> 时间：2013-03-19T17:31:34.540
> 
> 标签：jquery-plugins, filter, tags

我需要为用户创建一种方法来通过来自不同类别的多个标签来解析数据库查询结果，并在相关菜单项旁边显示一个带有匹配数的图例*（类似于 shopstyle.com 上使用的导航 + 过滤和许多零售网站）*。

jQuery 插件[Filtrify](http://luis-almeida.github.com/filtrify/)似乎是一种通过搜索条件动态过滤项目的简单方法，但是它会动态生成自己独特的菜单，我需要将过滤功能集成到网站的现有菜单和搜索选项中。Filtrify 创建一个搜索菜单，`data attributes`其中包含已分配给“containerID”中项目的每个类别 (HTML5) 的字段标签，并且菜单中的每个字段标签都会触发一个“弹出”过滤面板。无论 'placeHolderID' 位于何处，都会完整调用 Filtrify 的菜单。

我试图弄清楚如何调用特定类别而不是整个菜单，以便我可以将其合并到菜单的相关部分并应用必要的格式？或者，我愿意接受允许我这样做的另一种方法或插件。

Filtrify 插件的脚本可[在此处](https://github.com/luis-almeida/filtrify/blob/master/js/filtrify.js)获得，我在下面包含了用于将插件应用于我的文档的代码。

```
<script type="text/javascript">
    $(function () {
        $.filtrify("containerID", "placeHolderID");
    });
</script>    

<div id="placeHolderID" style="display:none"></div>

<ul id="containerID">
<li data-item="Dresses" data-style="Long Sleeves, V-Neck" data-price="$300 - $400" data-color="Black">
<!-- Product Fields -->
</li>
</ul> 
```

# django - 将应用程序推送到 Heroku 的困难

> ID：15506491
> 
> 赞同：0
> 
> 时间：2013-03-19T17:31:37.877
> 
> 标签：django, heroku, github

我无法将我的 Django 应用程序从 github 推送到 Heroku。我已经同步了 App 目录中的文件。之后，我按照这个给出的[程序](https://stackoverflow.com/questions/14492538/error-pushing-django-project-to-heroku)

1.  克隆你的 git 仓库
2.  从您的 requirements.txt 中删除 virtualenv==1.8.4
3.  混帐添加。
4.  git commit -m "删除 virtualenv 要求
5.  git push heroku 大师

在第 4 步之前一切正常。执行第 4 步后，它说

```
#On Branch master
nothing to commit , working directory clean 
```

当我执行第 5 步时，我遇到了这个错误。我不知道这是什么意思。

```
$ git push heroku master
Counting objects: 16, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (14/14), done.
Writing objects: 100% (16/16), 5.63 KiB, done.
Total 16 (delta 0), reused 0 (delta 0)

 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:tranquil-bastion-1294.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:tranquil-bastion-1294.git' 
```

请指导我该怎么做，因为这是我在 Heroku 上的第一次部署。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:57:03.730

您的存储库是否在您的存储库`requirements.txt`的顶层有一个文件？这就是 Heroku 用来确定您的应用程序是否应该使用 Python 构建包的方法。细节：

*   [https://devcenter.heroku.com/articles/python](https://devcenter.heroku.com/articles/python)
*   [https://github.com/heroku/heroku-buildpack-python/blob/master/bin/detect](https://github.com/heroku/heroku-buildpack-python/blob/master/bin/detect)

# graphviz - 防止 Grphviz 箭头边缘穿过相邻节点

> ID：15506492
> 
> 赞同：2
> 
> 时间：2013-03-19T17:31:44.247
> 
> 标签：graphviz

我创建了以下 graphviz 图，表示带有循环的链表：

```
igraph foo {
    rankdir=LR;
    node [shape=record];
    a [label="{ <data> 12 | <ref>  }", width=1.2]
    b [label="{ <data> 99 | <ref>  }"];
    c [label="{ <data> 37 | <ref>  }"];
    a:ref:c -> b:data [arrowhead=vee, arrowtail=dot, dir=both, tailclip=false, arrowsize=1.2];
    b:ref:c -> c:data [arrowhead=vee, arrowtail=dot, dir=both, tailclip=false];
    c:ref:c -> b:data [arrowhead=vee, arrowtail=dot, dir=both, tailclip=false];
} 
```

不幸的是，从`c:ref`到的箭头`b:data`穿过节点`c`：

![在此处输入图像描述](../Images/48d4a9bfa75c1dba5912a3ba48af6c88.png)

如何强制边缘绕过节点而不越过它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-02T14:29:07.793

我找不到一个简单且完全令人满意的答案，但更改指南针点可能会有所帮助。

```
digraph foo {
    rankdir=LR;
    node [shape=record];
    a [label="{ <data> 12 | <ref>  }", width=1.2]
    b [label="{ <data> 99 | <ref>  }"];
    c [label="{ <data> 37 | <ref>  }"];
    a:ref:c -> b:data [arrowhead=vee, arrowtail=dot, dir=both, tailclip=false, arrowsize=1.2];
    b:ref:c -> c:data [arrowhead=vee, arrowtail=dot, dir=both, tailclip=false];
    c:ref:s -> b:data:s [arrowhead=vee, arrowtail=dot, dir=both, tailclip=false];
} 
```

[![改变罗盘点](../Images/2f8838d39bb4baeeb82ea7538d827844.png)](https://i.stack.imgur.com/97VJl.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:41:00.540

你可以`"dot -Tsvg"`为你的点文件运行，然后打开`svg`文件，`ms visio`例如，做类似的事情![在此处输入图像描述](../Images/24767e5acbb5670fed4b939bec01984f.png)

# php - 使用 PHP 通过明文安全登录？

> ID：15506495
> 
> 赞同：0
> 
> 时间：2013-03-19T17:31:54.227
> 
> 标签：php, web-services, curl, mediawiki, password-protection

我正在使用 Mediawiki API 在我的服务器 #1 上创建帐户，当创建帐户时，我想自动登录到安装在不同服务器 #2 上的 Mediawiki。

服务器 #2 上有一个脚本，用于接受查询字符串中的用户名和密码，并自动登录到安装在其上的 Mediawiki。

如何在不损害安全信息的情况下将凭据从服务器 #1 传递到服务器 #2？

```
$postfield = "action=login&lgname=user&lgpassword=pass&lgtoken={$token}&format=json";
$url = "http://wiki.sign.com/api.php"; // url to wiki's api 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T09:25:25.917

使用对称加密（例如 AES）：一台服务器使用密钥加密 API 参数，发送加密字符串，另一台服务器使用相同的密钥解密它们。

# codeigniter - 代码点火器调整大小（）

> ID：15506497
> 
> 赞同：0
> 
> 时间：2013-03-19T17:31:56.447
> 
> 标签：codeigniter

我正在使用 resize() 来调整缩略图的大小。我的源图像是 1024 * 768。这是我的配置

```
 $demo= array(
                  'source_image' => $x['full_path'],
                  'new_image' => $this->image,
                  'maintain_ratio' => true,
                  'create_thumb' => true,
                  'width' => 192,
                  'height' => 92
                ); 
```

但是我的图像被调整为 123 * 98。为什么不使用宽度值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:11:32.690

您已启用该`maintain_ratio`选项，因此 CI 将尝试创建“在保留原始纵横比的同时尽可能接近目标宽度和高度”的缩略图。

在您的情况下，您有一个尺寸为 1024x768 的图像，纵横比为 1.33854 (1024/768)。

这对应于使用您指定的宽度和高度值的 192x143 缩略图或 123x92 缩略图。

CI 决定 123x92 更合适（可能基于缩略图的区域）。

为什么是 123x98？可能是调整大小算法的一些工件（数学舍入错误？）。

需要查看 CI 代码详细信息以获得更准确的答案。

**脚注**
有一些关于 CI 中图像大小调整的讨论，模块中有一些怪癖：

```
[quote author="Saete" date="1346125636"]You will not beleive me, 
y had the same problem and y changed the order of configuration parameters 
with the maintain_ratio = true, and it worked :S
I needed to adjust to height:

Didn't work:
$config['width'] = 126;
$config['height'] = 84;
$config['maintain_ratio'] = TRUE;

Worked!
$config['height'] = 84;
$config['width'] = 126;
$config['maintain_ratio'] = TRUE;

Some years later, but it may help someone...[/quote] 
```

显然，参数的顺序会有所不同（肯定是一个错误）。
参考：[http ://ellislab.com/forums/viewthread/119169/#594586](http://ellislab.com/forums/viewthread/119169/#594586)

# r - 获取每个组中的最后 2 行

> ID：15506510
> 
> 赞同：2
> 
> 时间：2013-03-19T17:32:26.210
> 
> 标签：r, dataframe

我有一个数据框，其中包含列名为 FirmID 和 DEF 的数据行。DEF 列仅包含零。FirmID 列包含公司 ID。我想对给定的 FirmID 进行最后 2 次观察。DEF 的列仅为零。

```
FirmID LTQ DLCQ DEF
1004   0.45 0.21 0 
1004   0.32 0.43 0
1004   0.36 0.47 0
1004   0.25 0.67 0
1004   0.56 0.34 0
1021   0.12 0.39 0
1021   0.16 0.31 0
1021   0.24 0.76 0
1021   0.37 0.56 0
1035   0.89 0.78 0
...      .   .   .
...      .   .   . 
```

那么如何仅获取给定 FirmID 的最后 2 行

```
1004  .   .   0
1004  .   .   0
1021  .   .   0
1021  .   .   0
1035  .   .   0
1035  .   .   0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T17:54:25.430

您可以按如下方式使用“data.table”包（假设您以`data.frame`命名为“mydf”的开头）：

```
> library(data.table)
> DT <- data.table(mydf, key="FirmID")
> DT[, tail(.SD, 2), by = key(DT)]
   FirmID  LTQ DLCQ DEF
1:   1004 0.25 0.67   0
2:   1004 0.56 0.34   0
3:   1021 0.24 0.76   0
4:   1021 0.37 0.56   0
5:   1035 0.89 0.78   0 
```

显然，将“2”更改为您实际想要的行数（问题的标题和文本存在矛盾）。

* * *

另一种选择是以`plyr`类似方式使用：

```
> library(plyr)
> ddply(mydf, .(FirmID), tail, 2)
  FirmID  LTQ DLCQ DEF
1   1004 0.25 0.67   0
2   1004 0.56 0.34   0
3   1021 0.24 0.76   0
4   1021 0.37 0.56   0
5   1035 0.89 0.78   0 
```

* * *

并且，使用基础 R 的一种不同寻常的替代方法：

```
temp <- within(mydf, {
  ID <- ave(FirmID, FirmID, FUN = function(x) rev(seq_along(x)))
})

temp[temp$ID %in% c(1, 2), 1:4] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T17:42:15.033

假设您的数据称为`DF`：

```
lasttwo <- do.call(rbind,by(DF,DF$FirmID,tail,2)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T17:44:29.980

执行此操作的 base-R 方法是手动执行 split-apply-combine dance。使用您的数据：

```
dat <- read.table(text = "FirmID LTQ DLCQ DEF
1004   0.45 0.21 0 
1004   0.32 0.43 0
1004   0.36 0.47 0
1004   0.25 0.67 0
1004   0.56 0.34 0
1021   0.12 0.39 0
1021   0.16 0.31 0
1021   0.24 0.76 0
1021   0.37 0.56 0
1035   0.89 0.78 0", header = TRUE) 
```

我们

1.  `FirmID`在:上拆分数据`split(dat, dat$FirmID)`。这将返回一个列表，我们
2.  `lapply`结束，应用该`tail`函数最多返回最后两行，结果是一个列表，其组件是 的结果`tail`，然后我们
3.  `do.call`使用和组合回数据框`rbind`。

整个调用可以串成一行：

```
do.call("rbind", lapply(split(dat, dat$FirmID), tail, 2)) 
```

这使：

```
> (out <- do.call("rbind", lapply(split(dat, dat$FirmID), tail, 2)))
       FirmID  LTQ DLCQ DEF
1004.4   1004 0.25 0.67   0
1004.5   1004 0.56 0.34   0
1021.8   1021 0.24 0.76   0
1021.9   1021 0.37 0.56   0
1035     1035 0.89 0.78   0 
```

如果您不喜欢那些讨厌的行名，只需删除它们：

```
> rownames(out) <- NULL
> out
  FirmID  LTQ DLCQ DEF
1   1004 0.25 0.67   0
2   1004 0.56 0.34   0
3   1021 0.24 0.76   0
4   1021 0.37 0.56   0
5   1035 0.89 0.78   0 
```

# mysql - 跨一对多关系选择 COUNT

> ID：15506512
> 
> 赞同：15
> 
> 时间：2013-03-19T17:32:32.100
> 
> 标签：mysql, sql, select, count, relational-database

对于两个表

**播放器**

和

**团队**

1-∞ 关系（球员与球队）：你如何计算每个球队有多少球员？

尝试失败：

```
SELECT team.teamid, (SELECT COUNT(player.team) FROM player)
FROM team
LEFT JOIN player ON player.team = team.teamid 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-19T17:34:57.183

尝试

```
SELECT t.teamid, COUNT(p.team) player_count
FROM team t LEFT JOIN
     player p ON p.team = t.teamid
GROUP BY t.teamid 
```

**[SQLFiddle](http://sqlfiddle.com/#!2/52132/1)**

*如果某些球队没有分配球员，它将给出正确的结果事件。请参阅 sqlfiddle （第 3 队没有球员）。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-29T16:39:00.593

这个对我有用

```
SELECT *, (select count(*) from receipt_note_stock b where 
b.receipt_note_id = a.id) from receipt_notes a 
```

# jsp - Tomcat环境下JSP页面中session对象的getAttribute返回非空对象而不是空对象

> ID：15506513
> 
> 赞同：0
> 
> 时间：2013-03-19T17:32:33.033
> 
> 标签：jsp, session, tomcat, getattribute

我`getAttribute()`在 Tomcat 环境中遇到了 JSP 会话对象的问题。

当从初始 jsp 页面 login.jsp 中单击 Connect 按钮时，将调用 connect.jsp 页面（连接页面）以获取数据库连接对象，并将该对象作为属性存储在会话对象中。当用户从登录页面点击断开按钮时，另一个页面disconnect.jsp（断开页面）被调用，`getAttribute()`被调用以获取连接对象，并被`setAttribute()`调用以将连接对象设置为空。当使用 来检查连接对象的值时`getAttribute()`，它的值为 null，正如断开页面中所预期的那样。这正如预期的那样。

断开连接后，在登录页面点击Connect按钮再次连接数据库时，连接页面发现使用的连接对象`getAttribute()`是非空对象，而不是空对象。这就是问题。`getAttribute()`即使在断开连接页面中已将其设置为 null，为什么还要返回非 null 对象？

大约有 10 次代码按预期工作！但大多数时候它会失败。

这是重现问题的实际代码：

## 登录页面：

```
 /* When connection page is invoked 2nd time after disconnecting an 
    * existing connection, the connection page returns saying connection 
    * already exists! - this is not what I expect.
    *
    * The page invoke connection page if user clicks a connect button.
    * It invokes disconnect page if user clicks a disconnect button.
    */

<HTML>
<BODY>
<FORM METHOD="POST" NAME="login_form">

<INPUT TYPE=SUBMIT VALUE="Connect"  ONCLICK="react_connect(this.form)">
<INPUT TYPE=SUBMIT VALUE="Disconnect" ONCLICK="react_disconnect(this.form)">

<SCRIPT LANGUAGE="JavaScript">
function react_connect(form)
{
    form.action = "connect.jsp";
    form.submit();  
}

function react_disconnect(form)
{
    form.action = "disconnect.jsp";
    form.submit();  
}
</SCRIPT>

</FORM>
</BODY>
</HTML> 
```

## 连接页面：

```
<HTML>
<BODY>  
<FORM METHOD="POST" NAME="conn_form">

<% 
    HttpSession theSession = request.getSession(true); 
    String CONN_OBJ_NAME = "connobj";
    // Use a string object instead of actual database connection object for
    // simulating the problem.
    String CONN_OBJ_VALUE = "dummy conn obj"; 

    String conn = (String)theSession.getAttribute(CONN_OBJ_NAME); 
    if (conn == null) { 
        theSession.setAttribute(CONN_OBJ_NAME, CONN_OBJ_VALUE); 
    out.print("After connect: connobj=["+
        theSession.getAttribute(CONN_OBJ_NAME).toString()+
        "], sessionid="+theSession.getId());
    } else { 
        out.print("Already connected. connobj=["+
            theSession.getAttribute(CONN_OBJ_NAME).toString()+"], sessionid="+
            theSession.getId());
    }
%>   

<BR><BR><BR>

<INPUT TYPE=SUBMIT VALUE="Back to Main page"  ONCLICK="goback(this.form)">

<SCRIPT LANGUAGE="JavaScript">
function goback(form)
{
    form.action = "login.jsp";
    form.submit();  
}
</SCRIPT>

</FORM>
</BODY>
</HTML> 
```

## 断开页面：

```
<HTML>
<BODY>
<FORM METHOD="POST" NAME="disconn_form">
<% 
    HttpSession theSession = request.getSession(true); 
    String CONN_OBJ_NAME = "connobj";
    String conn =  (String)theSession.getAttribute(CONN_OBJ_NAME); 
    if (conn == null) { 
        out.print("Not connected to database.");
    } else {    
        out.print("Before Disconnecting: connobj=[" +
                theSession.getAttribute(CONN_OBJ_NAME).toString() + 
                "], sessionid="+theSession.getId());

    // set connection object to null in the session.
    theSession.setAttribute(CONN_OBJ_NAME, null); 

    out.print("<BR>After setting to null, connobj =[" + 
            theSession.getAttribute(CONN_OBJ_NAME)+"], sessionid="+
            theSession.getId());

    theSession.invalidate();
    }
%>
<BR><BR><BR>

<INPUT TYPE=SUBMIT VALUE="Back to Main page"  ONCLICK="goback(this.form)">

<SCRIPT LANGUAGE="JavaScript">
function goback(form)
{
    form.action = "login.jsp";
    form.submit();  
}
</SCRIPT>

</FORM>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:57:17.343

当您`getSession`使用`boolean`as 'true调用时`request.getSession(true);`，如果找不到，它会创建新的会话。

首先，您应该`getSession(false)`在断开连接时使用会话。
其次，使用`session.invalidate();`- 它使该会话无效，然后解除绑定到它的任何对象。

引用`getSession(boolean create)`Java[文档](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)

> 返回与此请求关联的当前 HttpSession，或者，如果没有当前会话并且 create 为 true，则返回一个新会话。
> 
> 如果 create 为 false 并且请求没有有效的 HttpSession，则此方法返回 null。

# css - 媒体查询冲突

> ID：15506515
> 
> 赞同：1
> 
> 时间：2013-03-19T17:32:37.627
> 
> 标签：css, media-queries

我正在使用媒体查询在不同的设备上修改我的 css，但是，当我对第二个媒体查询（最大宽度：767）进行更改时，它会覆盖移动设备的 css。有人知道为什么会这样吗？

这是CSS：

```
/* Mobile */

@media only screen and (min-width: 320px) and (max-width: 480px) {
  /* Style adjustments for viewports 480px and under go here */
    .row {
        text-align: center !important;
        margin-left: auto !important;
        margin-right: auto !important;
        width: 98% !important;
        padding-left: 1% !important;
        padding-right: 1% !important;
    }

    span {
        letter-spacing: 20px !important;
    }

    .nav li {
        margin-right: 22px !important;
        text-align: center !important;
        letter-spacing: 2px !important;
    }

    ul li:last-child { 
        margin-right: 0px !important; 
    }

    .intro h1 {
        font-size: 44px !important;
        margin-bottom: -40px !important;
    }

    .intro img {
        visibility: hidden !important;
    }

    .dotted_line {
        visibility: hidden !important;
    }

    .cta {
        height: 450px !important;
        width: 330px !important;
        margin-top: -30px !important;
        margin-bottom: -250px !important;
    }

    .cta h2 {
        font-size: 20px !important;
        margin-left: 5px !important;
        margin-top: -10px !important;
    }

    .cta p {
        font-size: 16px !important;
        margin-left: 5px !important;
        margin-top: -10px !important;
    }

    .home_form {
        margin-left: 20px !important;
    }

    .left input {
        width: 280px !important;
        margin-bottom: 10px !important;
    }

    .right {
        width: 280px !important;
        float: none !important;
    }

    .right textarea {
        height: 120px !important;
        width: 285px !important;
    }

    .submit {
        background: url('../img/submit_btn.png') no-repeat !important;
        float: left !important;
        margin-top: 20px !important;
    }

    .social {
        visibility: hidden !important;
    }

    .social_icons {
        margin-right: auto;
        margin-left: auto;
    }

    footer .left p {
        width: 330px !important;
    }

    footer .middle {
        visibility: hidden;
    }

    footer .right {
        visibility: hidden;
    }

    .copyright {
        margin-left: 10px !important;
        margin-bottom: -40px;
    }
}

@media only screen and (max-width: 767px) {
    body { -webkit-text-size-adjust: none; -ms-text-size-adjust: none; width: 100%; min-width: 0; margin-left: 0; margin-right: 0; padding-left: 0; padding-right: 0; }

    .container { min-width: 0; margin-left: 0px; margin-right: 0px; }
    .row { width: 100%; min-width: 0; margin-left: 0; margin-right: 0; }
    .row .row .column, .row .row .columns { padding: 0; }
    .column, .columns { width: auto !important; float: none; margin-left: 0; margin-right: 0; }
    .column:last-child, .columns:last-child { margin-right: 0; float: none; }
    .row .row .column, .row .row .columns { padding: 0; }
    .column, .columns { width: auto !important; float: none; margin-left: 0px; margin-right: 0px; }
    .column:last-child, .columns:last-child { margin-right: 0; float: none; }
    [class*="column"] + [class*="column"]:last-child { float: none; }
    [class*="column"]:before, [class*="column"]:after { display: table; }
    [class*="column"]:after { clear: both; }

    .push_one, .push_two, .push_three, .push_four, .push_five, .push_six, .push_seven, .push_eight, .push_nine, .push_ten, .push_eleven, .centered { margin-left: 0% !important; }

    span {
        letter-spacing: 40px !important;
    }

    .nav li {
        margin-right: 62px !important;
        text-align: center !important;
        letter-spacing: 6px !important;
    }

    ul li:last-child { 
        margin-right: 0px !important; 
    }

    .intro h1 {
        font-size: 44px !important;
        margin-bottom: -40px !important;
    }

    .intro img {
        visibility: hidden !important;
    }

    .dotted_line {
        visibility: hidden !important;
    }

    .cta {
        height: 450px !important;
        width: 330px !important;
        margin-top: -30px !important;
        margin-bottom: -250px !important;
    }

    .cta h2 {
        font-size: 20px !important;
        margin-left: 5px !important;
        margin-top: -10px !important;
    }

    .cta p {
        font-size: 16px !important;
        margin-left: 5px !important;
        margin-top: -10px !important;
    }

    .home_form {
        margin-left: 20px !important;
    }

    .left input {
        width: 280px !important;
        margin-bottom: 10px !important;
    }

    .right {
        width: 280px !important;
        float: none !important;
    }

    .right textarea {
        height: 120px !important;
        width: 285px !important;
    }

    .submit {
        background: url('../img/submit_btn.png') no-repeat !important;
        float: left !important;
        margin-top: 20px !important;
    }

    .social {
        visibility: hidden !important;
    }

    .social_icons {
        margin-right: auto;
        margin-left: auto;
    }

    footer .left p {
        width: 330px !important;
    }

    footer .middle {
        visibility: hidden;
    }

    footer .right {
        visibility: hidden;
    }

    .copyright {
        margin-left: 10px !important;
        margin-bottom: -40px;
    }

} 
```

除了跨度和 .nav li 之外，我没有对第二个媒体查询进行很多调整，但这足以在标题和导航中看到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:35:46.917

因为`@media only screen and (max-width: 767px)`还寻址屏幕宽度为`320px <= x <= 480px`. 你需要在`min-width: 481px`这里设置一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:35:54.703

是的，您可能需要在第二个媒体查询中使用最小宽度，因为满足第一个媒体查询条件的所有设备将自动满足第二个条件。

# linux - 如何通过 Gall 和 Lempitsky 编译 opencv Hough 森林实现

> ID：15506518
> 
> 赞同：0
> 
> 时间：2013-03-19T17:33:06.090
> 
> 标签：linux, opencv

我正在尝试编译为 opencv 编写的 Gall 和 Lempitsky 的 Hough 森林实现。

它可以从他们的网站[[mirrors]](http://www.mirrorcreator.com/files/0L6HNLEY/forest.tar.gz_links)[下载](http://www.vision.ee.ethz.ch/~gallju/projects/houghforest/index.html) 。

看起来它在查找 opencv 时遇到了问题。我在 ubuntu 上安装了 opencv 2.3.1（或 2.4.4，我不确定）`sudo apt-get install libopencv-dev opencv-doc`，我可以编译和运行示例`/usr/share/doc/opencv-doc/examples`

我更改了make文件路径如下：

```
# change paths if necessary
# INCLUDES = -I/usr/pack/opencv-1.0.0-dr/amd64-debian-linux4.0/include/opencv
# LIBS = -lcxcore -lcv -lcvaux -lhighgui -lml
# LIBDIRS = -L/usr/pack/opencv-1.0.0-dr/amd64-debian-linux4.0/lib

INCLUDES = -I/usr/include/opencv
LIBS = -lopencv_calib3d -lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_objdetect -lopencv_photo -lopencv_stitching -lopencv_ts -lopencv_video -lopencv_videostab
LIBDIRS = -L/usr/lib 
```

我运行时遇到的错误`make all`是：

```
g++ -c -I/usr/include/opencv CRForest-Detector.cpp -O3 -Wno-deprecated
CRForest-Detector.cpp: In function ‘void run_train()’:
CRForest-Detector.cpp:543:27: warning: ignoring return value of ‘int system(const char*)’, declared with attribute warn_unused_result [-Wunused-result]
CRForest-Detector.cpp: In function ‘void run_detect()’:
CRForest-Detector.cpp:521:27: warning: ignoring return value of ‘int system(const char*)’, declared with attribute warn_unused_result [-Wunused-result]
g++ -c -I/usr/include/opencv CRPatch.cpp -O3 -Wno-deprecated
g++ -c -I/usr/include/opencv HoG.cpp -O3 -Wno-deprecated
g++ -c -I/usr/include/opencv CRForestDetector.cpp -O3 -Wno-deprecated
g++ -c -I/usr/include/opencv CRTree.cpp -O3 -Wno-deprecated
g++ -L/usr/lib -lopencv_calib3d -lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_objdetect -lopencv_photo -lopencv_stitching -lopencv_ts -lopencv_video -lopencv_videostab -o CRForest-Detector CRForest-Detector.o CRPatch.o HoG.o CRForestDetector.o CRTree.o -O3 -Wno-deprecated
CRForest-Detector.o: In function `detect(CRForestDetector&)':
CRForest-Detector.cpp:(.text+0x3340): undefined reference to `cvLoadImage'
CRForest-Detector.cpp:(.text+0x34a3): undefined reference to `cvCreateImage'
CRForest-Detector.cpp:(.text+0x357b): undefined reference to `cvCreateImage'
CRForest-Detector.cpp:(.text+0x35d9): undefined reference to `cvConvertScale'
CRForest-Detector.cpp:(.text+0x3620): undefined reference to `cvSaveImage'
CRForest-Detector.cpp:(.text+0x3634): undefined reference to `cvReleaseImage'
... 
```

我需要更改什么以便 g++ 看到必要的库？如何检查是否安装了所需的库？

* * *

编辑：

这是输出`pkg-config --modversion opencv`：2.4.4

这是的输出`/usr/lib$ ls | grep "opencv"`

```
libopencv_calib3d.a
libopencv_calib3d.so
libopencv_calib3d.so.2.3
libopencv_calib3d.so.2.3.1
libopencv_contrib.a
libopencv_contrib.so
libopencv_contrib.so.2.3
libopencv_contrib.so.2.3.1
libopencv_core.a
libopencv_core.so
libopencv_core.so.2.3
libopencv_core.so.2.3.1
libopencv_features2d.a
libopencv_features2d.so
libopencv_features2d.so.2.3
libopencv_features2d.so.2.3.1
libopencv_flann.a
libopencv_flann.so
libopencv_flann.so.2.3
libopencv_flann.so.2.3.1
libopencv_gpu.a
libopencv_gpu.so
libopencv_gpu.so.2.3
libopencv_gpu.so.2.3.1
libopencv_highgui.a
libopencv_highgui.so
libopencv_highgui.so.2.3
libopencv_highgui.so.2.3.1
libopencv_imgproc.a
libopencv_imgproc.so
libopencv_imgproc.so.2.3
libopencv_imgproc.so.2.3.1
libopencv_legacy.a
libopencv_legacy.so
libopencv_legacy.so.2.3
libopencv_legacy.so.2.3.1
libopencv_ml.a
libopencv_ml.so
libopencv_ml.so.2.3
libopencv_ml.so.2.3.1
libopencv_objdetect.a
libopencv_objdetect.so
libopencv_objdetect.so.2.3
libopencv_objdetect.so.2.3.1
libopencv_video.a
libopencv_video.so
libopencv_video.so.2.3
libopencv_video.so.2.3.1 
```

和输出`/usr/include/opencv$ ls | grep ''`

```
cvaux.h
cvaux.hpp
cv.h
cv.hpp
cvwimage.h
cxcore.h
cxcore.hpp
cxeigen.hpp
cxmisc.h
highgui.h
ml.h 
```

是我需要的所有文件还是我遗漏了什么？

* * *

编辑2：

按照建议将我的包含和库更改为以下内容：

```
INCLUDES = -I/usr/include/opencv
LIBS = /usr/lib/libopencv_core.so /usr/lib/libopencv_highgui.so /usr/lib/libopencv_imgproc.so
LIBDIRS = -L/usr/lib 
```

这导致以下输出：

```
user@user:~/Code/hough_forest$ make clean
rm -f *.o *~ CRForest-Detector
user@user:~/Code/hough_forest$ make all
g++ -c -I/usr/include/opencv CRForest-Detector.cpp -O3 -Wno-deprecated
CRForest-Detector.cpp: In function ‘void run_train()’:
CRForest-Detector.cpp:543:27: warning: ignoring return value of ‘int system(const char*)’, declared with attribute warn_unused_result [-Wunused-result]
CRForest-Detector.cpp: In function ‘void run_detect()’:
CRForest-Detector.cpp:521:27: warning: ignoring return value of ‘int system(const char*)’, declared with attribute warn_unused_result [-Wunused-result]
g++ -c -I/usr/include/opencv CRPatch.cpp -O3 -Wno-deprecated
g++ -c -I/usr/include/opencv HoG.cpp -O3 -Wno-deprecated
g++ -c -I/usr/include/opencv CRForestDetector.cpp -O3 -Wno-deprecated
g++ -c -I/usr/include/opencv CRTree.cpp -O3 -Wno-deprecated
g++ -L/usr/lib /usr/lib/libopencv_core.so /usr/lib/libopencv_highgui.so /usr/lib/libopencv_imgproc.so -o CRForest-Detector CRForest-Detector.o CRPatch.o HoG.o CRForestDetector.o CRTree.o -O3 -Wno-deprecated
CRForest-Detector.o: In function `detect(CRForestDetector&)':
CRForest-Detector.cpp:(.text+0x3a87): undefined reference to `cvLoadImage'
CRForest-Detector.cpp:(.text+0x3b9e): undefined reference to `cvCreateImage'
CRForest-Detector.cpp:(.text+0x3c61): undefined reference to `cvCreateImage'
CRForest-Detector.cpp:(.text+0x3cae): undefined reference to `cvConvertScale'
CRForest-Detector.cpp:(.text+0x3d03): undefined reference to `cvSaveImage'
CRForest-Detector.cpp:(.text+0x3d12): undefined reference to `cvReleaseImage'
CRForest-Detector.cpp:(.text+0x3d39): undefined reference to `cvReleaseImage'
CRForest-Detector.cpp:(.text+0x3d67): undefined reference to `cvReleaseImage'
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:58:02.550

我已经设法使用以下路径进行编译：

```
INCLUDES = -I/usr/local/include/opencv
LIBS = /usr/local/lib/libopencv_core.dylib /usr/local/lib/libopencv_highgui.dylib /usr/local/lib/libopencv_imgproc.dylib
LIBDIRS = -L/usr/local/lib 
```

请注意，我使用的是 OSX，而​​不是 linux，但使用显式库文件的路径有效。请注意，在 osx 上编译的库是 .dylib 文件，而在 linux 上可能是 .so 或 .a 并且路径略有不同，因此您可能想尝试以下操作：

```
INCLUDES = -I/usr/include/opencv
LIBS = /usr/lib/libopencv_core.so /usr/lib/libopencv_highgui.so /usr/lib/libopencv_imgproc.so
LIBDIRS = -L/usr/lib 
```

**更新** 我已经在虚拟机上安装了 Ubuntu 12 并从源代码编译了 OpenCV 2.4.4 并注意到了这一点：

1.  OpenCV`/usr/local/include`在默认情况下安装了头文件和库`/usr/local/lib`（如在 OSX 上）
2.  正如您发布的那样，我遇到了确切的错误。我没想到这些类是在核心库中定义的。

主要问题似乎是编译库的链接顺序。[我在这个问题和答案](https://stackoverflow.com/questions/7816607/opencv-2-3-compiling-issue-undefined-refence-ubuntu-11-10)中找到了一些方便的细节。使用我更新了makefile的这一部分的信息：

```
CRForest-Detector: $(OBJS)
        $(CC) $(LIBDIRS) $(LIBS) -o $@ $+ $(OPT) 
```

像这样：

```
CRForest-Detector: $(OBJS)
        $(CC) -o $@ $+ $(OPT) `pkg-config opencv --cflags --libs` 
```

这很有效，我已经设法在 Ubuntu/Linux 上进行编译。

好消息是：`make all`工作 坏消息是：我以前从未使用过 pkg-config，但它似乎很好地输出了正确的路径。即便如此，当我运行 ./CRForest-Detector 时，我在查找我不完全理解的 opencv 库时遇到错误。我猜你可以[在这里](https://stackoverflow.com/questions/9661547/opencv-libopencv-core-so-2-3-cannot-open-shared-object-file-no-such-file-or)和[这里找到一些有用的建议](https://stackoverflow.com/questions/12335848/opencv-program-compile-error-libopencv-core-so-2-4-cannot-open-shared-object-f)

总之：使用`pkg-config`make 文件中的选项，因为这将解决这个问题（编译应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:21:22.127

我已经在 Ubuntu 机器上运行 CRFOREST 7 个月了。以下是一些建议：

对于 Makefile：

```
 CRForest-Detector: $(OBJS)
                    $(CC) $(LIBDIRS) -o $@ $+$(OPT) $(LIBS) 
```

**注意：**请将 $(LIBS) 放在最后，否则，我建议您按照正确的配置指南在 Ubuntu 中重新安装软件包 opencv。

# c# - 将 .xml 与 Windows 服务 c# 一起使用

> ID：15506519
> 
> 赞同：-1
> 
> 时间：2013-03-19T17:33:07.487
> 
> 标签：c#, xml, windows-services

我需要为我的服务使用 XML 来读取一旦运行就可以更改的值，而且我只能找到有关他们当前 XML 设置有问题的人的资源，而对于初学者来说几乎一无所获。

谁能简要解释一下在设计 Windows 服务时如何开始使用 XML，或者向我指出一个初学者可以理解的良好资源的方向？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:57:33.473

如果您愿意，可以使用 XML 序列化。这假定输出目录中有一个名为 Demo.xml 的文件：

```
string filePath = ".\\Demo.xml";
private void Form1_Load(object sender, EventArgs e)
{
    ReadSettings();
}

void ReadSettings()
{
    XmlSerializer s = new XmlSerializer(typeof(Settings));
    Settings newSettings = null;
    using (StreamReader sr = new StreamReader(filePath))
    {
        try
        {
            newSettings = (Settings)s.Deserialize(sr);
        }
        catch (Exception ex)
        {
            Debug.WriteLine("Error:" + ex.ToString());
        }
    }
    if (newSettings != null)
        this.Text = newSettings.WatchPath;

}

public class Settings
{
    public string WatchPath { get; set; }
} 
```

XML 格式：

```
<?xml version="1.0" encoding="utf-8" ?>
<Settings>
  <WatchPath>C:\Temp</WatchPath>
</Settings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:44:00.993

XML 与 Windows 服务无关。

在 c# 中有多种使用方法，一种简单的方法是 XmlDocument 类。

例如

```
XmlDocument configDoc = new XmlDocument();
configDoc.Load("ServiceConfig.xml");
XmlNode pollingNode = configDoc.DocumentElement.SelectSingleNode("PollingInterval");
if (pollingNode != null)
{
/// Grab pollingNode.InnerText, convert to an int and set Property...
} 
```

以上假设 xml 是

```
<Config>
<PollingInterval>30</PollingInterval>
</Config> 
```

你最大的问题是你要把文件放在哪里，处理它被损坏的问题，一些笨蛋把你锁在外面，它被删除了......

在考虑这个想法之前，我会先考虑一下。

# arrays - Actionscript 3 Count 字符串出现在数组中的次数

> ID：15506521
> 
> 赞同：0
> 
> 时间：2013-03-19T17:33:10.997
> 
> 标签：arrays, actionscript-3, actionscript

如果我有一个类似的数组：

```
var myArray:Array = new Array("a","b","c","d","e","f","g","b"); 
```

如何搜索它以确定其中出现值的次数以及出现在哪些位置？我发现下面的代码很接近，但它只会返回第一次出现。

```
function findIndexInArray(value:Object, arr:Array):Number {
    for (var i:uint=0; i < arr.length; i++) {
        if (arr[i]==value) {
            return i;
        }
    }
    return NaN;
}

var myArray:Array = new Array("a","b","c","d","e","f","g","b");
trace(findIndexInArray("b", myArray));

// OUTPUT
// 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:39:09.133

您可能会考虑返回存在搜索词的索引数组。例如：

```
var list:Array = ['a', 'b', 'b', 'c', 'd', 'e', 'f'];

function find(obj:Object, list:Array):Array
{
    var result:Array = [];
    for(var i:int = 0; i < list.length; i++)
    {
        if(list[i] = obj)
        {
            result.push(i);
        }
    }
    return result;
 }

 var search:Array = find('b', list);
 trace('b is found: ' + search.length + ' times at indices: ' + search); 
 // -- 'b is found: 2 times at indices [1, 2] 
```

这样，您可以通过检查返回数组的长度来查看搜索词出现了多少次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:51:50.550

you could use `join` and `regex` to do the count

something like this:

```
// convert to one long string
var str:String = myArray.join("");

// regex find the letter and count result
var count:int = str.match(new RegExp(letter,"a")).length; 
```

haven't tested it, so the code might need a tweak, but this should be faster than looping through the array.

* * *

update

```
// convert to one long string
var str:String = myArray.join("");

var pos:Array = new Array();       
var n:int = -1;     

// loop through array and find all indexes
while ((n = str.indexOf(searchFor, n+1)) != -1) pos.push(n); 
```

just a warning though, this will break if any string in the array has more than one character

# allegro5 - Allegro 5 在失去焦点后不响应键盘事件或窗口关闭

> ID：15506522
> 
> 赞同：2
> 
> 时间：2013-03-19T17:33:12.807
> 
> 标签：allegro5

标题说明了一切。当窗口处于焦点时，一切正常（我可以使用 esc 按钮或按 X 退出窗口），但是一旦我最小化它，或者打开另一个窗口，当我再次将 Allegro 应用程序置于焦点时 - 事件别再工作了。它不再对 Escape 或 X 做出反应。有什么解决办法吗？

代码：

```
#include <allegro/allegro5/allegro.h>
#include <allegro/allegro5/allegro_native_dialog.h>
#include <allegro/allegro5/allegro_font.h>
#include <allegro/allegro5/allegro_ttf.h>
#include <allegro/allegro5/allegro_image.h>
#include <allegro/allegro5/allegro_primitives.h>
#include <iostream>

#define SCREENWIDTH 800
#define SCREENHEIGHT 600

using namespace std;

bool running = true;

int main(int argc, char** argv)
{
    al_init();
    al_init_font_addon();
    al_init_ttf_addon();
    al_init_primitives_addon();
    al_install_keyboard();

    ALLEGRO_DISPLAY* display = al_create_display(SCREENWIDTH, SCREENHEIGHT);
    ALLEGRO_FONT* font = al_load_font("soviet.ttf", 36, 0);
    ALLEGRO_EVENT_QUEUE* event_queue = al_create_event_queue();
    al_register_event_source(event_queue, al_get_keyboard_event_source());
    al_register_event_source(event_queue, al_get_display_event_source(display));

    if(!al_init())
    {
        al_show_native_message_box(NULL, NULL, NULL, "Could not initialize Allegro 5", NULL, ALLEGRO_MESSAGEBOX_YES_NO);
        return -1;
    }

    if(!display)
    {
        al_show_native_message_box(display, "ERROR", "Display settings", "Display window was not created sucessfully", NULL, ALLEGRO_MESSAGEBOX_YES_NO);
        return -1;
    }

    int x1 = 10;
    int y1 = 10;
    int x2 = 30;
    int y2 = 30;

    while(running)
    {
        ///OnUpdate
        ALLEGRO_EVENT events;
        al_peek_next_event(event_queue, &events);

        if(events.type == ALLEGRO_EVENT_KEY_DOWN)
        {
            if(events.keyboard.keycode == ALLEGRO_KEY_ESCAPE)
            {
                running = false;
                break;
            }
        }
        if(events.type == ALLEGRO_EVENT_DISPLAY_CLOSE)
        {
            running = false;
            break;
        }

        x1++;
        y1++;
        x2++;
        y2++;

        ///OnRender
        al_draw_text(font, al_map_rgb(255, 0, 255), 200, 200, 0, "Test");
        al_draw_filled_rectangle(x1, y1, x2, y2, al_map_rgb(255, 0, 0));

        al_flip_display();
        al_clear_to_color(al_map_rgb(0, 0, 0));
        al_rest(0.05);
    }

    ///DEALLOCATE MEMORY
    al_destroy_font(font);
    al_destroy_display(display);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:05:44.257

`al_peek_next_event()`不会删除事件，也不会阻止。因此，由于这两个原因，您的代码将无法正常工作。

如果您将其替换为`al_wait_for_event()`(which blocks and remove the event)，那么我认为您的代码将执行您期望它执行的操作。

# java - Ajax 没有为我在检票口工作

> ID：15506523
> 
> 赞同：1
> 
> 时间：2013-03-19T17:33:28.387
> 
> 标签：java, wicket, wicket-6

我想在 wicket 6.5 中测试一些 AJAX DropDown（尝试了 wicket 6.6 并遇到了同样的问题）。

我使用快速启动检票口页面创建了检票口测试项目 - [http://wicket.apache.org/start/quickstart.html](http://wicket.apache.org/start/quickstart.html)

> mvn archetype:generate -DarchetypeGroupId=org.apache.wicket -DarchetypeArtifactId=wicket-archetype-quickstart -DarchetypeVersion=6.6.0 -DgroupId=net.betlista -DartifactId=tests.wicket-6.6 -DarchetypeRepository= [https://repository.apache .org/](https://repository.apache.org/) -DinteractiveMode=false

我改变`HomaPage`了我`LoadableDropDownTestPage`的`getHomePage()`生成`WicketApplication`类。

LoadableDropDownTestPage 的 Java 代码是：

```
package net.betlista;

import java.io.Serializable;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;

import org.apache.wicket.ajax.AjaxRequestTarget;
import org.apache.wicket.ajax.IAjaxIndicatorAware;
import org.apache.wicket.ajax.form.OnChangeAjaxBehavior;
import org.apache.wicket.ajax.markup.html.form.AjaxButton;
import org.apache.wicket.markup.html.WebPage;
import org.apache.wicket.markup.html.form.DropDownChoice;
import org.apache.wicket.markup.html.form.Form;
import org.apache.wicket.markup.html.panel.FeedbackPanel;
import org.apache.wicket.model.IModel;
import org.apache.wicket.model.LoadableDetachableModel;
import org.apache.wicket.model.Model;
import org.apache.wicket.model.PropertyModel;

public class LoadableDropDownTestPage extends WebPage implements IAjaxIndicatorAware {

    public LoadableDropDownTestPage() {
        addComponents();
    }

    private void addComponents() {
        add(new FeedbackPanel("feedback"));

        FormObject formObject = new FormObject();
        Form<FormObject> form = new Form<FormObject>("loadableDropDownTestForm", Model.of(formObject));
        form.setOutputMarkupId(true);
        form.setOutputMarkupPlaceholderTag(true);

        final DropDownChoice<String> countryDD = new LoadableDropDown("countryDD", new PropertyModel<String>(formObject, "country"));
        countryDD.setChoices(new CountryLoadableModel());
        countryDD.setOutputMarkupId(true);
        countryDD.setRequired(true);
        countryDD.setOutputMarkupPlaceholderTag(true);

        final DropDownChoice<String> cityDD = new LoadableDropDown("cityDD", new PropertyModel<String>(formObject, "city"));
        cityDD.setChoices(new CityLoadableModel());
        cityDD.setOutputMarkupId(true);
        cityDD.setRequired(true);
        cityDD.setOutputMarkupPlaceholderTag(true);

        countryDD.add(new OnChangeAjaxBehavior() {
            @Override
            protected void onUpdate(AjaxRequestTarget target) {
                System.out.println("country DD changed");
                target.add(cityDD);
            }
        });

        form.add(countryDD);
        form.add(cityDD);

        form.add(new AjaxButton("ab") {} );

        add(form);
    }

    static class LoadableDropDown extends DropDownChoice<String> {

        public LoadableDropDown(String id, IModel<String> model) {
            super(id);
            setModel(model);
        }

    }

    static class FormObject implements Serializable {
        String country;
        String city;
    }

    class CountryLoadableModel extends LoadableDetachableModel<List<String>> {

        @Override
        protected List<String> load() {
            System.out.println("loading CountryLoadableModel");
            List<String> result = Arrays.asList(new String[] { "CR", "SR" } );
            return result;
        }

    }

    class CityLoadableModel extends LoadableDetachableModel<List<String>> {

        List<String> choices = new LinkedList<String>();

        @Override
        protected List<String> load() {
            System.out.println("loading CityLoadableModel");
            if (choices.isEmpty()) {
                choices.add("1");
            } else {
                int size = choices.size();
                choices.add(Integer.toString(size+1));
            }

            return choices;
        }

    }

    @Override
    public String getAjaxIndicatorMarkupId() {
        return "ajaxIndicator";
    }

} 
```

页面的 HTML 是：

```
<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">

    <div wicket:id="feedback"></div>

    <form wicket:id="loadableDropDownTestForm">
        Countries: <select wicket:id="countryDD"></select><br>
        Cities: <select wicket:id="cityDD"></select><br>
        <!-- input type="submit"-->
        <button wicket:id="ab"></button>
    </form>

</html> 
```

我的第一个问题是，我在我的页面上看不到 AJAX 调试链接。但我认为，虽然有，但`OnChangeAjaxBehavior`我应该看到它。

下一个问题是，当我更改国家下拉菜单中的值时，什么也没有发生，我不知道我做错了什么。

在我的代码中，您可以看到，我也尝试使用 AjaxButton，但这也没有用。

编辑：

日志的一部分（它在 DEV 模式下运行）

```
********************************************************************
*** WARNING: Wicket is running in DEVELOPMENT mode.              ***
***                               ^^^^^^^^^^^                    ***
*** Do NOT deploy to your live server(s) without changing this.  ***
*** See Application#getConfigurationType() for more information. ***
******************************************************************** 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T00:55:33.060

我认为问题在于您没有`<body>`在 HTML 中使用标签。这会破坏 HTML 解析器，这就是您看不到 AJAX 调试窗口（以及任何其他 javascript 行为）的原因。

有一个很好的例子说明你在 Wicket 示例中尝试做的事情，看看它： http: [//www.wicket-library.com/wicket-examples/ajax/choice](http://www.wicket-library.com/wicket-examples/ajax/choice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:05:20.650

尝试`AjaxFormComponentUpdatingBehaviour`改用。以下是我的代码中有效的部分 -

```
DropDownChoice<String> actionSelect = new DropDownChoice<String>("myDropdown", updateActions, choiceRenderer);
actionSelect.add(new AjaxFormComponentUpdatingBehavior("onchange") {

  @Override
  protected void onUpdate(AjaxRequestTarget target) {
    ...
  }
}); 
```

# powershell - 使用powershell根据文件名将数据插入文件

> ID：15506524
> 
> 赞同：0
> 
> 时间：2013-03-19T17:33:33.630
> 
> 标签：powershell, scripting

我有一个放入文件的 powershell 脚本，对于**E:**的每个实例，它将用**CBM-FS01|2013-02-03|E 替换它：**

```
$filenames = @("C:\SCRIPT\CBM-FS01-E-20130203114114.txt.out")
foreach ($file in $filenames) {
    $outfile = "$file" + ".sql"

    Get-Content $file | Foreach-object {
       $_ -replace "E:","CBM-FS01|2013-02-03|E:" `
    } | Set-Content $outfile
} 
```

如果您仔细观察，您会发现我正在根据文件名获取此信息。文件名将始终为**MNEMONIC-MACHINE-DRIVE-YYYMMDDHHMMSS.txt**。

修改几个文件的脚本很好，但我可能需要在一百个文件上运行它！有没有办法使用 powershell 来使用 GET-CHILDITEM cmdlet 并让 powershell 根据不同的文件名自动执行 -replace？

**编辑：** 我需要提取部分文件名，并将其插入文件中。例如，对于文件**CBM-FS01-E-20130203114114.txt**，我需要将助记符机器（CBM-FS01）和 YYYMMDD（2013-02-03）提取到文件中。因此

```
$_ -replace "E:","CBM-FS01|2013-02-03|E:" ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:02:15.257

我认为这应该可行，前提是这些文件名模式是可预测的（并且我已经正确预测了它们）

```
$filenames = @("C:\SCRIPT\CBM-FS01-E-20130203114114.txt.out")

$regex = '^([^-]+-[^-]+)-([A-Z])-(\d{4})(\d\d)(\d\d).+'

foreach ($file in $filenames) {

    $outfile = "$file" + ".sql"

    $ReplaceString = ($file | Split-Path -leaf) -replace $regex,'$1|$3-$4-$5|$2:'

    Get-Content $file | Foreach-object {
       $_ -replace "E:",$ReplaceString
    } | Set-Content $outfile
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:47:52.797

不太确定这个问题。听起来您有一大堆具有相同模式的文件。您可以使用 -match 运算符进行一些[正则表达式](http://www.regular-expressions.info/reference.html)比较。

```
$pattern = '[a-zA-Z]+-[a-zA-Z]+-E-[0-9]+\.txt'
$files = Get-ChildItem C:\ -Recurse | ? {$_.name -match $pattern}
foreach($file in $files){
    ...
} 
```

# c# - 创建和更新 UI 元素异步 Wpf

> ID：15506527
> 
> 赞同：1
> 
> 时间：2013-03-19T17:33:49.543
> 
> 标签：c#, wpf, multithreading, asynchronous

我正在尝试将多个图像异步加载到 ui 中。

加载图像时（从路径创建位图），应将图像设置为窗口上矩形的填充。

当我将位图图像的创建也放在 Dispatcher.Invoke 方法中时，代码就可以工作了。但显然我希望在胎面而不是在调用中完成繁重的工作（创建位图）。

我尝试了几种解决方案，包括 backgroundworker，但我无法让它工作。现在我有以下代码：

```
private void Window_ContentRendered(object sender, EventArgs e)
{
    Thread loadThread = new Thread(new ThreadStart(LoadImagesAsync));
    loadThread.Start();
}

private void LoadImagesAsync()
{
    IEnumerable<string> images = System.IO.Directory.GetFiles(IMAGE_FOLDER, "*.jpg").Skip(_PageNumber * NUMBER_OF_IMAGES).Take(NUMBER_OF_IMAGES);

    for (int i = 0; i < NUMBER_OF_IMAGES; i++)
    {
        var bitm = new BitmapImage(new Uri(images.ElementAt(i)));                

        this.Dispatcher.Invoke(() =>
        {
            Grid grid = (Grid)grd_photoBox.Children[i];

            var rectangle = (from e in grid.Children.OfType<Rectangle>()
                                where e is Rectangle
                                select e).First();

            ImageBrush brush = new ImageBrush(bitm);

            rectangle.Fill = brush;
        });
    }
} 
```

我得到以下异常：

```
The calling thread cannot access this object because a different thread owns it. 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:12:06.383

如果是大图像，请使用以下代码，它将直接重新缩放图像并加载到其他线程然后主线程，以确保立即加载图像。编辑以下值以更改加载格式：

```
bitm.DecodePixelWidth = 200;
bitm.DecodePixelHeight = 100; 
```

* * *

```
private void LoadImagesAsync()
        {
            IEnumerable<string> images = System.IO.Directory.GetFiles(IMAGE_FOLDER, "*.jpg").Skip(_PageNumber * NUMBER_OF_IMAGES).Take(NUMBER_OF_IMAGES);

            for (int i = 0; i < NUMBER_OF_IMAGES; i++)
            {
                int j = i;
                var bitm = new BitmapImage();

                bitm.BeginInit();
                bitm.CacheOption = BitmapCacheOption.OnLoad;
                bitm.UriSource = new Uri(images.ElementAt(i));
                bitm.DecodePixelWidth = 200;
                bitm.DecodePixelHeight = 100;
                bitm.EndInit();

                ImageBrush brush = new ImageBrush(bitm);
                brush.Freeze();

                this.Dispatcher.BeginInvoke(new Action(() => 
                {
                    Grid grid = (Grid)grd_photoBox.Children[j];

                    var rectangle = (from e in grid.Children.OfType<Rectangle>()
                                        where e is Rectangle
                                        select e).First();

                    rectangle.Fill = brush;
                }));
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:29:01.063

诀窍是[冻结](http://msdn.microsoft.com/en-us/library/ms750509.aspx)位图以允许从另一个线程访问。因此，您还必须确保位图在创建时立即加载，因为默认行为是延迟加载。

```
var bitm = new BitmapImage();
bitm.BeginInit();
bitm.CacheOption = BitmapCacheOption.OnLoad; // load immediately
bitm.UriSource = new Uri(images.ElementAt(i));
bitm.EndInit();
bitm.Freeze(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:23:26.060

我尝试了下面的代码，它对我有用。

```
Task<IEnumerable<string>>.Factory.StartNew(() => System.IO.Directory.GetFiles(
            imagePath,
            "*.jpg")).
            ContinueWith(task =>
                        {
                            foreach (var item in task.Result)
                            {
                                this.Dispatcher.BeginInvoke((Action)(() =>
                                {
                                    var img = new Image
                                                    {
                                                        Source =
                                                            new BitmapImage(
                                                            new Uri(item))
                                                    };
                                    LayoutRoot.Children.Add(img);

                                }));

                            }
                        }); 
```

LayoutRoot 是我在 xaml 中的网格。

希望它会有所帮助。

# java - Java 中的 Restful Web 服务帮助

> ID：15506530
> 
> 赞同：0
> 
> 时间：2013-03-19T17:33:55.387
> 
> 标签：java, web-services, rest

下面是我的代码，它在执行时给出了空指针异常。请帮我解决这个问题：

```
@POST
@GET
@Path("/Auth/{uname}")
public String checkUserAccess(@PathParam("uname") String username) {
    String message = svc.checkUserAccess(username);
    return message;
} 
```

**服务接口：**

```
public String checkUserAccess(String id); 
```

**服务实施：**

```
public String checkUserAccess(String id) {
    String message = Dao.checkUserAccess(id);
    return message;
} 
```

**DAO接口：**

```
public String checkUserAccess(String id); 
```

**DAO 实现：**

```
public String checkUserAccess(String id) {
    String result = null;
    String user = propertyProvider.getProperty("Auth");
    if (user.equalsIgnoreCase(id))
        result = "Valid User";
    else
        result = "Invalid User";
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:42:08.593

我猜你从属性提供者那里获取用户的代码行导致了`NullPointerException`. IE

```
String user = propertyProvider.getProperty("Auth"); 
```

我猜你正在让用户成为`null`. `if( user.equalsIgnoreCase(id) )`投掷也是如此`NullPointerException`。在对用户进行身份验证之前进行空检查。

```
if(user!=null && user.equalsIgnoreCase(id) ) {
    result = "Valid User"; 
else 
    result = "Invalid User"; 
return result; } 
```

# sql - 关于如何使用存在和不存在的 PL/SQL 查询的问题

> ID：15506531
> 
> 赞同：0
> 
> 时间：2013-03-19T17:33:55.877
> 
> 标签：sql, oracle, plsql, oracle10g, plsqldeveloper

我有一张包含位置详细信息的表格：-

```
Location id    Manager Name             SubFunction      
  1             HR      XYZ             direct sales    
  2             IT      ABC             Gaming         
   3            HR      DEC              Agent     

Location id   Lookupcode
1          123
2          126
3          231
4          222 
```

子函数表详细信息：-

```
Lookup code  Subfunction
123          Agent
126          Gaming
222          Customer services 
```

基本上，我有两张表，一张的位置定义了 function ， sub function ，另一张带有 subfunction 表，其中 subfunction 名称在 location 表中使用。

现在我必须编写一个 PL/SQL 查询，以便将位置表中不存在的所有函数显示为仅将管理器作为“HR”。我尝试了以下查询：-

```
select Subfuntion
from subfunction_table
where exists                     //Part a
(select null
from subfunction_table

)
and not exists
(select null                 // Partb
from 
location
where manger='HR') 
```

例如：- 在子功能表中的上表中有“客户服务”，它在子功能表中但不在位置中，因此查询应显示子功能“客户服务”

但是我没有得到关于如何使用从 Part a 到 Part b 的子函数名称的逻辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:14:44.173

```
SELECT *
  FROM subfunction sf
 WHERE NOT EXISTS (SELECT 1
                     FROM function f JOIN location l USING (locationid)
                    WHERE l.manager = 'HR'); 
```

我这就是你要找的？这是我从你的问题中了解到的。

# android - 画布类上的 clipRect 和 translate 有什么区别？

> ID：15506537
> 
> 赞同：-2
> 
> 时间：2013-03-19T17:34:04.360
> 
> 标签：android, android-canvas

一个明确的例子会有所帮助。我很困惑为什么我不能每次都使用翻译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:47:12.713

剪辑矩形是画布的绘图部分——你在这个矩形之外绘制的任何东西都不算数——即。不要最终呈现在显示器上。将其视为画布的边界。

画布也有一个坐标系，它从`0,0`AKA 原点开始，`x`从左到右`y`递增，从上到下递增。当您使用任何需要坐标的绘图命令（例如`drawLine`, `drawRect`）时，坐标是相对于该坐标系的。

您可以使用 移动此坐标系`canvas.translate`。把它想象成一个可以移动的参考框架

# javascript - 从 MSWord 粘贴如何删除 里面的标签 / 标签

> ID：15506538
> 
> 赞同：0
> 
> 时间：2013-03-19T17:34:06.633
> 
> 标签：javascript, regex

我正在从从 MSWord 粘贴到我的 NicEdit RTE 的 html 中删除垃圾标签。

```
<OL>
<LI>Hello</LI>
<P dir=ltr align=left>
<LI>Two</LI>
<P></P>
<P dir=ltr align=left>
<LI>Three</LI>
<P></P>
<P dir=ltr align=left>
<LI></LI>
<P></P></OL> 
```

我已经剥离了一大堆我们的应用程序不使用的标签。但是我们确实使用`<p>`标签，所以我不能只删除所有`<p>`粘贴的标签。

我需要一种快速（不一定准确）的方法来剥离`<p>`标签内部的`<ol>`标签`<ul>`。

我必须`</?p\s?.*?>`匹配一个`p`标签，但我不知道如何检查我是否在里面`ol`或`ul`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:38:54.193

不要使用正则表达式，使用 DOM 操作：

```
var div = document.createElement("div"),
    p;

div.innerHTML = str;
p = div.querySelectorAll("ol p, ul p");

for (var i = 0, len = p.length; i < len; i++) {
    p[i].parentNode.removeChild(p[i]);
}

console.log(div.innerHTML); 
```

请注意，这`querySelectorAll`对您的问题非常有用，但仅现代浏览器支持。[**请参阅MDN**](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll#Browser_compatibility)上的兼容性信息。

**演示：http:** [//jsfiddle.net/bSdMW/](http://jsfiddle.net/bSdMW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:39:16.887

您是否尝试过使用来自[http://tidy.sourceforge.net/](http://tidy.sourceforge.net/)的 HtmlTidy ？您可能根本不需要编写自己的源代码。无论如何，使用正则表达式解析 XML 是充满危险的。

# java - 去除 XML 标记的 Java 正则表达式不起作用

> ID：15506540
> 
> 赞同：0
> 
> 时间：2013-03-19T17:34:20.800
> 
> 标签：java, xml, regex

我正在尝试从 Java 字符串中删除任何 XML 标记。在我看来，如果它遵循以下一种或两种形式，那么它就是一个 XML 标记：

*   `<*>*<*/*>`, 如`<fizz>buzz< /fizz>`; 或者
*   `<*/*>`， 如`< fizz />`

我的正则表达式很简单：

```
String tagful = "Hello <fizz>buzz</fizz>Regexes!";
String tagless = tagful.replaceAll("<*>*<*/*>", "");
tagless = tagless.replaceAll("<*/*>", "");
System.err.println("TAGLESS:\n\t" + tagless); 
```

当我运行它时，我得到`Hello <fizzbuzz</fizzRegexes!`了输出，而（如果我的 XML 剥离代码是正确的），我应该得到`Hello Regexes!`. 我会误入歧途吗？

**请注意**：我不想使用任何现有的库；我在这里寻找一个纯 Java 正则表达式解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:37:49.953

也许你想要这样的东西 - 它会替换任何标签（即'<>'），无论标签的属性或人字形内容如何，​​无论你想怎么称呼它

```
String tagful = "Hello <fizz>buzz</fizz>Regexes!";
String tagless = tagful.replaceAll("<[^>]*>", "");
//tagless = tagless.replaceAll("<*/*>", "");
System.err.println("TAGLESS:\n\t" + tagless); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:38:11.080

您需要将您的更改`*`为`.*?`. 尝试使用`"<.*?>.*?</.*?>"`和`"<.*?/>"`。
要不就 `"<.*?>.*?</.*?>|<.*?/>"`

*   `*`表示该元素之前可以出现 0 次或更多次。
*   `.`意思是“新行标记之外的任何东西”。

所以`<.*>`会接受 和 之间`<`的任何东西`>`。

但是这种形式`.*`是贪婪的，并且在 String 中`"<abc>def<ghi>"`会匹配`"abc>def<ghi"`部分。

为了使它匹配最小集合，我们需要使用`?`after `*`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:45:42.410

你也可以试试这个。。

```
String tagful = "Hello <fizz>buzz</fizz>Regexes!";
String tagless = tagful.replaceAll("\\<.*?\\>", "");
System.out.println("TAGLESS:\n\t" + tagless); 
```

# database - 如何保持现有记录的数据不变

> ID：15506542
> 
> 赞同：0
> 
> 时间：2013-03-19T17:34:25.873
> 
> 标签：database, database-design, relational-database

考虑为交通部门设计一个数据库。有一个表格：违规，合法性和驱动程序。

在合法性表中，我们有罚款成本、条款编号、解释、原因等属性。

现在，如果我们将来更改成本和条款编号，我不希望这影响已经存在的记录。但是表违规和合法性已经在一起，因此如果查询它们，这将更改旧记录。

我举了一个简单的例子来说明我的担忧，但我想知道解决这种情况的概念。

这个怎么做？

**更新 1)**

我觉得也许我没有准确地解释我想要什么，因为有些答案没有朝着正确的方向发展。因此，我将解释：我有以下实体：

```
violation, committee, decision, meeting, and legal terms 
```

关系 1 说：`committee`持有 a`meeting`并接受`decision`关于`violation`x 的 a。另一个关系说：`decision`是基于`legal terms`.

现在，不深入“法律条款”表的细节，假设它具有罚款、法律条款和参考等属性......如果有一天我们将条款“abc”的罚款改为 100 美元而不是 50 美元，那么我们检索了一条旧违规记录，其罚款基于“abc”条款，成本将显示为 100 美元，尽管它应该显示为 50 美元。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:46:22.143

以下是我将如何处理这种情况：

1.  首先，我假设您的`Violations`表有违规发生的日期。如果没有，它应该有。
2.  `Clause`和实体是分开的`Cost`，因此需要在单独的表中。
3.  该`Violations`表应具有对`Clauses`标识单个子句的主键的外键引用。这可确保如果条款编号发生更改，您仍将引用违规表中的正确条款。
4.  该`Costs`表应该有一个对子句表 IE 的外键引用，每个成本记录都与一个子句相关联。
5.  该`Costs`表应该有一个日期列，用于标识价格的有效时间。这样，一个子句可以有多个价格记录（但只有一个会被视为“有效”，即具有最新有效起始日期的那个）。
6.  这意味着条款编号和价格都可以相互独立变化，而不影响`Violations`表中数据的有效性。

架构可能看起来像这样：

![在此处输入图像描述](../Images/fa2d04e35a2e9352b07717415405d91a.png)

然后在查询您的违规行为时，您只需提取违规发生日期**之前的****最新条款**价格。

 **例如，假设我有一个包含以下数据的子句：

```
Id        Code        Description
---------------------------------
1          101         Speeding 
```

该子句可能具有与其关联的以下成本记录：

```
Id        Cost        Valid From        ClauseId
------------------------------------------------
1          $60         01/01/2013          1
2          $70         01/02/2013          1
3          $80         01/03/2013          1 
```

因此，上述所有费用都与“超速”条款有关。如果您想知道当前的成本是多少，您可以从成本表中选择与该条款相关联并且具有最新有效起始日期的记录，这将为您提供 80 美元。

现在假设您有以下违规行为：

```
Id        Name        ClauseId        Date Occurred
---------------------------------------------------
1         Benjamin        1            16/02/2013 
```

在发生这种违规行为时，费用为 70 美元。因此，为了选择具有正确价格的违规记录，您需要构建一个连接违规、子句和成本表的查询。您将只选择有效起始日期的成本小于违规发生日期的记录。

这将为您提供以下结果：

```
Name        Date Occurred        Description        cost        Valid From
--------------------------------------------------------------------------
Benjamin      16/02/2013           Speeding          $60        01/01/2013
Benjamin      16/02/2013           Speeding          $70        01/02/2013 
```

然后，您只需选择具有最大有效起始日期的记录，留下一行，在此违规发生时为您提供 70 美元的正确价格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:53:14.743

这是一种非常标准的方法，当您想以这种方式保存一行的数据时，例如，当您想在订单或发票上保存产品的价格时，您只需将值存储在行中。对于旨在保持不变且对保留价值非常重要的数据，这是我推荐的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:54:16.437

以你为例，

> 在合法性表中，我们有罚款成本、条款编号、解释、原因等属性。
> 
> 现在，如果我们将来更改成本和条款编号，我不希望这影响已经存在的记录。

因此，让我们定义 Legalities 表。

```
Legalities
----------
Legalities ID
Explantion
Reason
etc 
```

合法性 ID 是主（集群）键。它是一个升序整数或长整数，或其他一些 UID。

我们定义一个子句表。我假设您同时更改成本和条款。

```
Clause
------
Clause ID
Legalities ID
Date written
Clause
Cost 
```

子句 ID 是主（集群）键。它是一个升序整数或长整数，或其他一些 UID。

您将在（合法性 ID，日期写入降序）上定义唯一索引。这样，检索到的第一行将是最近的子句和成本。

您将为要保留更改历史记录的任何列定义一个类似于 Clause 的表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T17:51:44.207

The solution is to normalize the tables. Here is a good explanation of the concept:[Explain_normalization_with_examples](http://wiki.answers.com/Q/Explain_normalization_with_examples)**

# extjs - Ext.js 图表系列和轴

> ID：15506546
> 
> 赞同：1
> 
> 时间：2013-03-19T17:34:42.000
> 
> 标签：extjs, sencha-charts

假设我有一些数据要显示在 Ext.js 条形图上，并且我希望我的数据围绕自定义值旋转，例如，y 轴上的“1.0”（相对于传统的“0.0”）。

意思是，下图中的负值用倒置柱表示，我希望小于“1.0”的值在图表上显示为倒置柱。

![在此处输入图像描述](../Images/8ece427eaba545ec75ca7751634520b1.png)

有没有我可以设置的设置来实现这一点？如果是这样，它会在系列和轴定义中吗？也许图表本身？

显示的图表代码如下：

```
Ext.require('Ext.chart.*');
Ext.require(['Ext.Window', 'Ext.fx.target.Sprite', 'Ext.layout.container.Fit', 'Ext.window.MessageBox']);

Ext.define('CPI', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'ReportingPeriod',
        type: 'string'
    }, {
        name: 'CPI_P',
        type: 'decimal'
    }, {
        name: 'CPI_C',
        type: 'decimal'
    }]
});

var store1 = Ext.create('Ext.data.Store', {
    model: 'CPI',
    data: [{
        ReportingPeriod: 'Period1',
        CPI_P: '1.9',
        CPI_C: '1.2'
    }, {
        ReportingPeriod: 'Period2',
        CPI_P: '1.2',
        CPI_C: '1.1'
    }, {
        ReportingPeriod: 'Period3',
        CPI_P: '0.1',
        CPI_C: '0.5'
    }, {
        ReportingPeriod: 'Period4',
        CPI_P: '-0.5',
        CPI_C: '0.6'
    }, {
        ReportingPeriod: 'Period5',
        CPI_P: '-0.9',
        CPI_C: '0.8'
    }, {
        ReportingPeriod: 'Period6',
        CPI_P: '-1.0',
        CPI_C: '-0.6'
    }, {
        ReportingPeriod: 'Period7',
        CPI_P: '-1.1',
        CPI_C: '-0.7'
    }, {
        ReportingPeriod: 'Period8',
        CPI_P: '-1.5',
        CPI_C: '-0.8'
    }]
});

var chart = Ext.create('Ext.chart.Chart', {
    style: 'background:#fff',
    animate: true,
    theme: 'Category1',
    store: store1,
    width: 300,
    height: 300,
    renderTo: 'chart',
    axes: [{
        type: 'Numeric',
        position: 'left',
        fields: ['CPI_P', 'CPI_C'],
        title: 'CPI',
        grid: true
    }, {
        type: 'Category',
        position: 'bottom',
        fields: ['ReportingPeriod'],
        title: 'Reporting Period'
    }],
    series: [{
        type: 'column',
        axis: 'left',
        xField: 'ReportingPeriod',
        yField: 'CPI_P',
        markerConfig: {
            type: 'cross',
            size: 3
        }, 
        renderer: function(sprite, record, attr, index, store) {

                var value = (record.get('CPI_P') >> 2) % 2;
                var color = ['rgb(213, 70, 121)', 
                             'rgb(44, 153, 201)'
                             ][value];
                return Ext.apply(attr, {
                    fill: color
                });
            }
    }]
});

chart.show(); 
```

**更新**

如果我在 y 轴上添加一个最小值，我会更接近（有点）

```
...
axes: [{
        type: 'Numeric',
        position: 'left',
        fields: ['CPI_P', 'CPI_C'],
        title: 'CPI',
        grid: true,
        minimum: 1,
    }.... 
```

![在此处输入图像描述](../Images/4201e4b848b13a03aa5e30fd745048c7.png)

这是正确的想法，因为条形现在与数字 1 相关，但我显然需要将条形保留在图表上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:18:09.387

似乎有效的方法是从我的数据中减去 1，然后在标签上加 1。

```
axes: [{
            type: 'Numeric',
            position: 'left',
            grid: true,
            maximum: 1.0, //will render to 2.0
            fields: ['PeriodAmount', 'CumulativeAmount'],
            label:{
                renderer:function(v){
                    return (v+1).toFixed(2);
                }
            }         
        }...] 
```

![在此处输入图像描述](../Images/1a7c474f67fbf0f907f4ff83698fce2d.png)

这对我来说是一个可行的解决方法，但我不会认为这是一个优雅的答案，因为它对于自定义值不是很可配置。例如，将其更改为 -1 或 2 将需要比仅更改简单设置更多的工作。

# c# - 如何创建动态 Lambda 表达式

> ID：15506547
> 
> 赞同：3
> 
> 时间：2013-03-19T17:34:46.497
> 
> 标签：c#, expression, lambda

我有一个问题，如何添加另一个过滤器并且我必须验证它是否被选中？

```
private Expression < Func < Entity.Modelos.Flux, bool >> Filter() {
    var dateStart = dtpDateStart.Value.Date;
    var dateEnd = dtpDateEnd.Value.Date;

    Expression < Func < Entity.Modelos.Flux, bool >> expr = null;

    expr = f = > f.DatFlux >= dateStart.Date && f.DatFlux <= dateEnd.Date;

    if (txtDescription.Text != String.Empty) {
        //add filter
    }

    return expr;
} 
```

**更新：**我将在此函数中使用表达式：

```
public virtual IQueryable < T > Filter(Expression < Func < T, bool >> expressao) {
    return DbSet.Where(expressao).AsQueryable < T > ();
} 
```

我试图做的是这个，但有一个表达

```
public List < Users > GetUsers(int ? id, string name) {
    using(DBContext ctx = new DBContext()) {
        IQueryable query = ctx.Usuarios;
        if (id.HasValue)
            query = query.Where(x = > x.ID == id);

        if (!string.IsNullOrEmpty(name))
            query = query.Where(x = > x.Name.StartsWith(name));

        return query.ToList();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:51:14.243

If this is just a demo of your requirements, then you can create and modify [`Expression Trees`](http://msdn.microsoft.com/en-us/library/bb397951.aspx) using the [`System.Linq.Expressions`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.aspx) namespace.

However, in the case of your question, it would probably be easier to use EF:

```
bool filterDescription = !String.IsNullOrEmpty( txtDescription.Text );

expr = f =>
  (
    ( f.DatFlux >= dateStart.Date && f.DatFlux <= dateEnd.Date )
    &&
    ( !filterDescription || ... add filter ... )
  )
; 
```

or normal C#:

```
if ( String.IsNullOrEmpty( txtDescription.Text ) )
{
  expr = f => f.DatFlux >= dateStart.Date && f.DatFlux <= dateEnd.Date;
}
else
{
  expr = f => f.DatFlux >= dateStart.Date && f.DatFlux <= dateEnd.Date
    &&
    ... add filter ...
  ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:56:15.900

好的，这里有一个关于如何嵌入 lambda 语句的示例。这不是你的例子，但你去吧：

```
Func<int, int, EventHandler> makeHandler =
    (dx, dy) => (sender, e) => {
        var btn = (Button) sender;
        btn.Top += dy;
        btn.Left += dx;
    };

btnUp.Click += makeHandler(0, -1);
btnDown.Click += makeHandler(0, 1);
btnLeft.Click += makeHandler(-1, 0);
btnRight.Click += makeHandler(1, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:59:29.050

[这很简单。访问此链接](https://stackoverflow.com/questions/41244/dynamic-linq-orderby/233505#233505)

棘手的事情是调用`OrderByAlias`- using`MakeGenericMethod`可能是方式，如上面的链接所示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:04:55.930

试试这个方法：

```
private Expression<Func<Entity.Modelos.Flux, bool>> Filter()
{
    var dateStart = dtpDateStart.Value.Date;
    var dateEnd = dtpDateEnd.Value.Date;

    Func<Entity.Modelos.Flux, bool> expr = null;

    expr = f => f.DatFlux >= dateStart.Date && f.DatFlux <= dateEnd.Date;

    if(txtDescription.Text != String.Empty)
    {
       expr = f => expr(f) && f.Title.Equals(txtDescription.Text); // ← Your additional filter
    }

    return f => expr(f);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T20:57:21.853

继承自[`ExpressionVisitor`](http://msdn.microsoft.com/en-us/library/dd323984.aspx)

```
public class MyVisitor: ExpressionVisitor
{
    private LambdaExpression visitor;
    public Expression Modify(Expression expression, LambdaExpression visitor)
    {
        this.visitor = visitor;
        return Visit(expression);
    }

    protected override Expression VisitBinary(BinaryExpression b)
    {
        var binary = visitor.Body as BinaryExpression;

        return Expression.MakeBinary(ExpressionType.AndAlso, b, binary, b.IsLiftedToNull, b.Method);
    }
} 
```

你的`Filter()`方法可能看起来像这样

```
 private Expression<Func<Entity.Modelos.Flux, bool>> Filter()
    {
        var dateStart = dtpDateStart.Value.Date;
        var dateEnd = dtpDateEnd.Value.Date;
        var description = txtDescription.Text;

        Expression<Func<Entity.Modelos.Flux, bool>> expr = null;

        expr = f => f.DatFlux >= dateStart.Date && f.DatFlux <= dateEnd.Date;

        if (description != String.Empty)
        {
            //add filter
            Expression<Func<Entity.Modelos.Flux, bool>> other = f => f.Description == description;

            var modifier = new MyVisitor();
            expr = (Expression<Func<Entity.Modelos.Flux, bool>>)modifier.Modify((Expression)expr, (LambdaExpression)other);
        }

        return expr;
    } 
```

[例子](https://gist.github.com/axrwkr/5200097)

查看以下内容以获取更多信息

[如何：修改表达式树（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/bb546136.aspx)

# http-status-code-404 - 位置搜索的 OSClass 404 错误

> ID：15506548
> 
> 赞同：0
> 
> 时间：2013-03-19T17:34:47.137
> 
> 标签：http-status-code-404, osclass

我安装了 OSClass 并添加了一些带有特定位置（例如纽约）的广告。我可以看到，针对该位置，计数为 1 表示该位置有一个广告，但是当我单击该区域的名称（纽约）以访问添加时，会出现一个 404 错误页面找不到该页面。我是一个新的 OSClass 用户，请问有什么我遗漏的吗？来自该地区的超链接不应该直接指向该地区发布的广告列表而不会出错吗？

任何帮助是极大的赞赏。

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:26:56.943

搜索结果页面，如果没有结果，返回状态码 404（未找到），您可以通过 oc-admin -> tools -> Location stats 重新计算 location item stats

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T03:29:56.590

打开：

```
/oc-includes/osclass/controller/search.php 
```

搜索：

```
if( count($aItems) === 0 ) { 
```

用。。。来代替：

```
if( count($aItems) === -1 ) { 
```

来源（或了解更多信息）：

[http://forums.osclass.org/3-1-x/3-1-1-search-bug-404-page-not-found/](http://forums.osclass.org/3-1-x/3-1-1-search-bug-404-page-not-found/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T15:59:16.813

我有同样的问题，可以解决：

1.  转到管理>设置>永久链接
2.  对于页面 URL 使用`p/{PAGE_SLUG}`
3.  对于类别 URL 使用`{CATEGORIES}`

> “解决此问题的方法是使用使 url 不同的东西，例如 cat/{CATEGORIES} 或 page/{PAGE_SLUG} 或 {PAGE_SLUG}-{PAGE_ID} ,....”
> 
> 神奇的是，我不仅可以在没有预路径的情况下打开所有类别的 URL，现在也可以打开位置。

源代码：[https ://github.com/osclass/Osclass/issues/907](https://github.com/osclass/Osclass/issues/907)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-11T09:53:01.310

有时在您将 osclass 安装在其名称包含空格的子目录中时会出现问题。前任： `C:/xampp/htdocs/Free Advertisement Scripts/OsClass/`

您必须将其更改为： **`/Free_Advertisement_Scripts/`**

# php - if($var) 在 PHP 中有多少个含义

> ID：15506557
> 
> 赞同：0
> 
> 时间：2013-03-19T17:35:34.810
> 
> 标签：php, variables, if-statement

在 PHP 上，您有以下代码：

```
if($var) {
    //do something
} 
```

这意味着什么（除了我在下面指出的表达式），我知道在以下情况下`//do something`将被执行：

*   `$var`不是`false`
*   `$var`不是 0
*   `$var`不是空字符串或数组
*   `$var`不是`null`

我知道这并不意味着：

*   `$var`已经设置好了

上面的代码似乎代表了**测试**变量的 PHP（以及 javascript 和 python）方式。我偏爱显式检查（即`$var == TRUE`or `$var != 0`），但这似乎（在某种程度上）是一种“垂死的艺术”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:39:36.100

if ($var) 仅当 $var 的值包含不为 false 的内容时才执行 true。如果您想知道什么是 false/true 值，请从 php.net 中查看以下内容

```
var_dump((bool) "");        // bool(false)
var_dump((bool) 1);         // bool(true)
var_dump((bool) -2);        // bool(true)
var_dump((bool) "foo");     // bool(true)
var_dump((bool) 2.3e5);     // bool(true)
var_dump((bool) array(12)); // bool(true)
var_dump((bool) array());   // bool(false)
var_dump((bool) "false");   // bool(true) 
```

**如果 ($var)**有一个定义（据我所知），如果**$var**具有**非假**值，则评估为**真**

 ****我建议强制转换并检查特定类型。

我也不同意明确的检查是“**垂死的艺术**”。请注意以下事项：

```
$var = 1;
if($var) // returns true since $var is 1 
```

然而，

```
 if ($var === true) // returns false since $var is not true its 1 
```

结论：如果我想特别检查 $var 必须保存一个布尔值，我不会使用**if ($var)**，因为它会在系统中创建一个错误。****

# php - 如何让用户上传文件夹并在codeigniter中显示特定内容？

> ID：15506560
> 
> 赞同：1
> 
> 时间：2013-03-19T17:35:48.850
> 
> 标签：php, codeigniter, file-upload

我正在尝试为我网站上的每个用户创建一个上传文件夹，并在特定区域显示他们的照片。我已经能够让 codeigniter 上传助手工作，并且可以将文件上传到文件夹。现在我希望能够：

1.  将特定用户上传的照片放置在特定于其 ID 的动态创建的该用户的文件夹中

2.  自动调整两种尺寸的照片。缩略图和更大的尺寸

我想我是通过研究如何做那些我不知道如何在语法上插入他们的 id 以及创建文件夹并上传它的事情来建立它的。

最后一步是在我选择的与他们的身份相关的位置显示这些照片。

这是我的控制器

```
public function upload()
    {
        mkdir('./upload/' . $this->session->userdata('id'), 0777);
        $config['image_library'] = 'gd2';
        $config['source_image'] = 'PATH TO FOLDER??';
        $config['create_thumb'] = TRUE;
        $config['maintain_ratio'] = TRUE;
        $config['width']     = 75;
        $config['height']   = 50;

        $this->load->library('image_lib', $config); 

        $this->image_lib->resize();
        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

            $data['main_content'] = 'account/upload';
            $this->load->view('includes/templates/main_page_template', $data);
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());

            $this->load->view('upload_success', $data);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:30:49.347

您正在创建用户目录，但没有将其设置为上传路径...

```
$user_folder = './upload/' . $this->session->userdata('id');
if(!is_dir($user_folder)){
    mkdir($user_folder, 0777);
}
...
$config['upload_path'] = $user_folder;
.... 
```

# css - div中的CSS背景图像不起作用

> ID：15506563
> 
> 赞同：0
> 
> 时间：2013-03-19T17:36:08.460
> 
> 标签：css, background-image

的HTML：

```
<div id="header">
</div> 
```

CSS：

```
#header{
    height: 280;
    width: 850;
    background-image: url('/image.png');
} 
```

我在这看不到任何东西`div`；背景不显示。我已经测试了 url 以确保它可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:37:22.127

您需要为背景图像显示的`width`和`height`属性上的值指定一个单位。可以省略该值的唯一情况是您指定 0

您可以使用的单位示例：`px` `%` `pt` `em` `rem` `ch` `vmin`

[价值观和单位模块 3 级](http://www.w3.org/TR/css3-values/)

# php - PHP试图找出一种在浏览器刷新时刷新会话的方法

> ID：15506565
> 
> 赞同：1
> 
> 时间：2013-03-19T17:36:17.220
> 
> 标签：php, session

您好，我现在确实在一项任务挑战中找到了自己，基本上我已经能够完全实现挑战，但有一件事我应该能够在浏览刷新上更改 $_SESSION 超全局我已经查看了所有类型的可能替代方案，但似乎没有工作，感谢任何帮助这是我的代码我正在寻找的是一种在浏览器刷新时更改 $_SESSION 的方法，每个工作版本似乎有可能我不知道尝试哪种其他方式我曾尝试取消设置或销毁会话，但它会删除整个表单：

```
<?php
session_start();

if(!isset($_SESSION['secret'])) {
  $possible_chars = array_merge(range('A','Z'),range('0','9'));
  shuffle($possible_chars);
  $string = substr(implode($possible_chars),0,5);
  $_SESSION['secret'] = $string;
}
else {
?>
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>THIS FORM POST TO ITSELF TO BE SURE THE USER ENTERS THE RIGHT INFO</title>
    <IMG SRC="index.php" alt="captcha"/>
  </head>
  <body>
    <h1>Captcha Form</h1> 
    <form method="post" action="index.php">
      <fieldset>
        <ul>
          <li>
            <label for="email">Email</label>
            <br>
            <input name="email" id="email" value="<?php if(isset($_POST['email'])) echo $_POST['email']; ?>" />
          </li>
          <li>
            <label for="comments">Comments</label>
            <br>
            <input name="comments" id="comments"  value = "<?php if(isset($_POST['comments'])) echo $_POST['comments']; ?>" />
          </li>
          <li>
            <label for="captcha">Please input CAPTCHA:</label>
            <br>
            <input name="captcha" id="captcha"/>
          </li>
          <li>
            <input type="submit" name="submit" value="Submit My Captcha!"/>
          </li>
        </ul>
        <?php print_r($_SESSION['secret']); ?>
        <br\>
        <br\>
        <?php
        $answer = (isset($_POST['captcha']) ? $_POST['captcha'] : null);
        $email = (isset($_POST['email']) ? $_POST['email']: null);
        $comments = (isset($_POST['comments']) ? $_POST['comments']: null);
        if( !empty( $_POST )) {
          if (strcasecmp($answer,$_SESSION['secret']) != 0) {
            //($_SESSION['secret'] != $answer )
            echo "Fee Fi Fo Fum Fot I smell the blood of an automated bot!";
            //$_SESSION['secret'] = NULL;
            header('captcha_challenge.php');
            //$_SESSION['secret'] = NULL;
          }
          elseif (strcasecmp($answer,$_SESSION['secret']) == 0) {
            //($_SESSION['secret'] == $answer)
            unset ($_SESSION['secret']);
            $_SESSION['email'] = $_POST['email'];
            $_SESSION['comments'] = $_POST['comments'];
            $query = ("INSERT INTO comments (email, content) VALUES ( '$email', '$comments')");
            $results = $db->query($query);
            header('Location:goodMessage.php');
          }
        }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:53:56.117

这是我使用的会话超时。

最初创建会话时：

```
session_start();
$_SESSION['LAST_ACTIVITY'] = time(); 
```

导航到新页面时在其他页面中调用以更新会话超时的函数

```
function check_timeout($timeout, &$SESSION)
    {
        if (isset($_SESSION['LAST_ACTIVITY']))
        {        
            if((time() - $_SESSION['LAST_ACTIVITY']) > $timeout)
            {
                end_session($SESSION);
            }
            $_SESSION['LAST_ACTIVITY'] = time();
        }
        else 
        {
            end_session($SESSION);
        }
    } 
```

我有一个单独的函数 (end_session()) 来结束会话。参数中的 & 允许函数更新会话。

在每一页上，我调用：

```
session_start();
check_timeout($timeout, $SESSION); 
```

# jquery - 打印页面时隐藏jquery ui手风琴格式

> ID：15506566
> 
> 赞同：3
> 
> 时间：2013-03-19T17:36:22.550
> 
> 标签：jquery, css, printing

我正在尝试为运行提示页面创建一个有效的 print.css。该页面包含一个 jQuery UI Accordion 来显示各种主题，但我不想在打印页面时显示手风琴。

这是我打印时的外观截图。

![在此处输入图像描述](../Images/efed2fc0680924238c65322a97863a1b.png)

* * *

打印页面时，我希望它显示为好像禁用了 javascript，如下面的屏幕截图：

![在此处输入图像描述](../Images/826d686fc427ccf2f4e3c363b7af503a.png)

* * *

手风琴是用 a 创建的`<div id="gettingStarted_accordion">`，因此将其隐藏在 print.css 中会使整个部分消失。

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:04:00.910

在您的打印 css 或媒体打印 css 上添加显示方法，如下所示：

```
@media print {

 #gettingStarted_accordion > *{display:block !important;}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:07:40.240

仅供参考，我想出了一个解决办法。我只是添加`media="screen"`到 jquery ui 样式表的链接。像这样：

```
<link media="screen" rel="stylesheet" type="text/css" href="jquery-ui.css"> 
```

并在我的 print.css 中使用它（感谢 Riskbreaker）：

```
#gettingStarted_accordion > * {
    display: block !important;
} 
```

# php - MySQL跳过第一行

> ID：15506568
> 
> 赞同：8
> 
> 时间：2013-03-19T17:36:37.470
> 
> 标签：php, mysql, sql, database

我见过其他人有这个问题，但我看到的解决方案对我没有帮助，或者我不知道如何使用它们：P

```
<?php
$ordre = "nom";
$croissance = "ASC";

if(isset($_GET["ordre"])){
    $ordre = $_GET["ordre"];
};  

if(isset($_GET["croissance"])){
    $croissance = $_GET["croissance"];
};

$con = mysql_connect('localhost','root','');
mysql_select_db('sdj_jeux', $con);
$sql = "SELECT * FROM jeux ORDER BY $ordre $croissance";
$result = mysql_query($sql, $con);
$row = mysql_fetch_array($result);  

$couleurcompteur = 0;
while ($row = mysql_fetch_array($result)){
    $couleurcompteur += 1;
if($couleurcompteur % 2){
    $classe = "pale";   
} else {
    $classe = "fonce";  
    };
?> 
```

我的代码跳过了我的数据库的第一行，我不明白为什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T17:37:56.460

删除行：

```
$row = mysql_fetch_array($result); 
```

循环将`while`在第一次迭代时抓取第一行。

结果代码：

```
<?php
$ordre = "nom";
$croissance = "ASC";

if(isset($_GET["ordre"])){
    $ordre = $_GET["ordre"];
};  

if(isset($_GET["croissance"])){
    $croissance = $_GET["croissance"];
};

$con = mysql_connect('localhost','root','');
mysql_select_db('sdj_jeux', $con);
$sql = "SELECT * FROM jeux ORDER BY $ordre $croissance";
$result = mysql_query($sql, $con);

$couleurcompteur = 0;
while ($row = mysql_fetch_array($result)){
    $couleurcompteur += 1;
if($couleurcompteur % 2){
    $classe = "pale";   
} else {
    $classe = "fonce";  
    };
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T17:38:53.013

这是你的问题：

```
$row = mysql_fetch_array($result);  

$couleurcompteur = 0;
while ($row = mysql_fetch_array($result)){ 
```

你`mysql_fetch_array()`在`while`. 这会抛出第一行，因为您不使用它。删除那个不需要的电话。

**注意：**不要使用 MySQL_*，因为它在 PHP 5.5 中已被弃用。改用 MySQLi_* 或 PDO

# metadata - Datanucleus：JDO Deprecated 字段（不创建，如果存在则读取）

> ID：15506570
> 
> 赞同：1
> 
> 时间：2013-03-19T17:36:40.437
> 
> 标签：metadata, jdo, deprecated, datanucleus

场景：不推荐使用字段。

是否可以通过以下方式映射字段：

*   即使“datanucleus.autoCreateColumns”设置为 TRUE（由字段属性覆盖），它也不会在数据库中创建

*   它是从数据库中加载的（如果存在）

谢谢

# jquery - 在 ajax 加载的内容中加载 jquery

> ID：15506572
> 
> 赞同：0
> 
> 时间：2013-03-19T17:36:47.227
> 
> 标签：jquery

通过 ajax 调用内容时（使用 jQuery） - 如果在 ajax 加载的内容中有 ajax 交互，是否应该在该文件中再次调用 jQuery？如果有脚本/插件只能在 ajax 加载的内容中调用，它们应该只在 ajax 加载的内容中调用，还是在父文件中调用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:05:26.670

对您的问题的简短回答是，我建议处理与原始 ajax 调用（或如您所说的“父”文件）中的 ajax 加载内容相关的任何内容。鉴于您没有发布任何代码，我不能使用任何特定于您的场景的示例，但是您想要执行以下操作：

```
$.ajax({
  url: "/foo",
  success: function(response) {
    do_something_related_to_this_content(response);
  }
});

do_something_related_to_this_content = function(response){
    // This function contains the code you originally 
    // wanted to put in the ajax-loaded content.
} 
```

如果您要将您的 javascript 放在 ajax 加载的内容中，我会担心的一个问题是您的 ajax 加载脚本可能具有假定存在于“父”文件中的依赖项，但是如果这种情况发生变化（IE 你加载您的 ajax 内容在完全不同的上下文中），突然您的代码中断了。

此外，如果您多次重新加载相同的内容，您的 ajax 加载代码将被多次加载。

最后，作为记忆服务，如果您的代码在一个`<script>`块内，我不相信它会在通过 AJAX 加载时自动被调用（试图具体找出这一点......等待）

希望这是有道理的。

**编辑**：

关于`<script>`块加载，请查看[这个答案](https://stackoverflow.com/a/4620099/877472)，它证实了我写的内容。您必须对`<script>`块内容执行 eval() 。

# php - PHP mysql：注册返回false

> ID：15506579
> 
> 赞同：0
> 
> 时间：2013-03-19T17:37:13.700
> 
> 标签：php, mysql, forms, registration

我正在尝试从两个文本框在数据库中输入值，但是当我提交用户名和密码时，我收到此错误：尚未在数据库中输入用户，请与系统管理员检查。

```
<?php
    session_start();
    $logged_in = isset($_SESSION['USERNAME']) && $_SESSION['USERNAME'] ?
 $_SESSION['USERNAME'] : null;
    if(!$logged_in) {   
    }
error_reporting(E_ALL & ~E_NOTICE);
include 'dbconfig.php';

     global $db;

$username=$_POST['username'];
$password=$_POST['password'];

// encrypting password
$encrypted_password=md5($password);

$stmt = $db->prepare("SELECT * FROM user_info WHERE username = ?");
$stmt->execute(array($username)); 
$row = $stmt->fetch(PDO::FETCH_ASSOC);

if (! $row){

//add new user to database
$stmt = $db->prepare("INSERT INTO user_info(username, password) VALUES (?,?)");
$params1 = array($username, $encrypted_password);

if (!$stmt ->execute($params1)){
echo "user has not been entered on the database check with administrator of the system.  
<span class='label label-important'>Important</span>";

}else{
echo $username." has been added to the database as a supervisor. <span class='label 
label-success'>Success</span>";

}
else{
echo $username." is already a user of the system <span class='label label- 
warning'>Warning</span>";

}
$db = null; 
?> 
```

var_dump($row); 返回一个错误的布尔值，它不会将值加载到数据库中。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:53:31.760

从您的代码中无法完全理解错误在哪里。

但，

当您遇到错误时

```
if (!$stmt ->execute($params1)){ 
```

声明，我认为这是与数据库相关的错误。

所以首先检查表中用户名字段的大小。针对该字段对用户输入进行最大长度检查。

另外，需要注意的是，md5 密码加密返回近 30 个字符。因此，将密码字段设置为 50 个字符长是安全的。

也可能有其他原因导致错误，但请先确认上述原因，然后再试一次。

谢谢

# java - 更改 listView 中的特定行项布局

> ID：15506580
> 
> 赞同：1
> 
> 时间：2013-03-19T17:37:20.227
> 
> 标签：java, android

我创建了一个 listView，我可以将图像和文本放在 listView 中，并动态地将行添加到 listView。

但是我不明白如何实现我可以更改列表视图中的特定行项目布局？

例如，在活动开始时，我将用 5 行初始化 listView，当触发发生时（几分钟后）我想更改例如第四个 listView 项（仅更改第四个条目的布局，所有其他条目保留原始布局）

多谢

```
private  ListView lv;
private List<String> text = new ArrayList<String>();
private List<Bitmap> listImages;
private String freindsId;

ArrayList<String> text_sort = new ArrayList<String>();
ArrayList<Bitmap> image_sort = new ArrayList<Bitmap>();

private MyCustomAdapter adapter;
  adapter =new MyCustomAdapter(text,listImages);
  lv.setAdapter(adapter);

class MyCustomAdapter extends BaseAdapter{
          public   List<String> text_array = new ArrayList<String>();
          public   List<Bitmap> image_array = new ArrayList<Bitmap>();
          public int getCount(){
               return text_array.size();
          }

          MyCustomAdapter(List<String> text, List<Bitmap> image)
          {
           text_array = text;
           image_array = image;
          }
          public long getItemId(int position){
               return position;
          }
          public String getItem(int position){
               return null;
          }
          public View getView(final int position, View convertView, ViewGroup parent) {
            LayoutInflater inflate = getLayoutInflater();
            View v = inflate.inflate(R.layout.listview, parent, false);
            final ImageView image = (ImageView) v.findViewById(R.id.ImageView01);
            TextView txtUnderImage =(TextView) v.findViewById(R.id.TextView01);

             if(listImages.get(position) != null) {
                         Bitmap bitmap = image_array.get(position);
                        image.setImageBitmap(bitmap);
                        ByteArrayOutputStream stream = new ByteArrayOutputStream();
                        bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
                        final byte[] byteArray = stream.toByteArray();

                         image.setOnClickListener(new View.OnClickListener() {

                            public void onClick(View v) {
                                // Switching to Register screen
                             Intent i = new Intent(getApplicationContext(), itemSaleActivity.class);
                             i.putExtra("picture", byteArray);
                            startActivity(i);

                                }
                        });
                         txtUnderImage.setText(text_array.get(position));
                         image.setVisibility(View.VISIBLE);
              } else {
                         image.setVisibility(View.GONE);
                         image.setImageBitmap(null);
                          image.setVisibility(View.VISIBLE);
          }
         return v;

        }
         public void addObject(String text, Bitmap bitmap) {
                text_array.add(text);
                image_array.add(bitmap);
            notifyDataSetChanged();
         } 

         public void addFirst(String text, Bitmap bitmap) {

                image_array.add(0,bitmap);
                text_array.add(0,text);

                notifyDataSetChanged();
             } 
         public void removeObject(String text,Bitmap bitmap) {

                int indexToRemove = image_array.indexOf(bitmap);
                image_array.remove(indexToRemove);
                text_array.remove(indexToRemove);
                notifyDataSetChanged();
         }
         public void deleteAll() {
             image_array.clear();
             text_array.clear();
             notifyDataSetChanged();
         }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:39:49.487

尝试像这样获取您对特定位置的看法

getChildAt(position) 你会得到你的看法，

并更改行的布局并调用 notifyDataSetChanged()。

如果您尝试突出显示选定的行， [请在 Android 中使用 OnClickListener 中的此 Inflate ListView 行？](https://stackoverflow.com/questions/15253987/inflate-listview-row-from-onclicklistener-in-android/15254297#15254297)

当事件触发您的适配器的更改数据并在适配器对象上调用 notifyDataSetChanged()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:43:47.977

使用该[`getChildAt()`](http://developer.android.com/reference/android/view/ViewGroup.html#getChildAt%28int%29)方法访问您要更改的任何行。例如`listView.getChildAt(4)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:44:31.897

对第四行项目进行更改。在适配器上调用 notifyDataSetChanged()。

notifyDataSetChanged() 通知附加的观察者底层数据已更改，任何反映数据集的视图都应自行刷新。

notifyDataSetChanged() 刷新您的列表视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-28T20:31:08.843

此处描述的方法将查看整个列表，而您只需要更新可见的视图，其余更改将在“重绘”时得到注意。

因此，请查看[THIS LINK](https://stackoverflow.com/questions/2123083/android-listview-refresh-single-row)提供的答案，它提供了一个解决方案，您只需要识别视图的位置，并且只有在当时可见时才能更新视图。

引用那个答案——

```
int iFirst = getFirstVisiblePosition();
int iLast = getLastVisiblePosition();

if ( indexToChange >= numberOfRowsInSection() ) {
    Log.i( "MyApp", "Invalid index. Row Count = " + numberOfRowsInSection() );
}
else {      
    if ( ( index >= iFirst ) && ( index <= iLast ) ) {
        // get the view at the position being updated - need to adjust index based on first in the list
        View vw = getChildAt( sysvar_index - iFirst );
        if ( null != vw ) {
            // get the text view for the view
            TextView tv = (TextView) vw.findViewById(com.android.myapp.R.id.scrollingListRowTextView );
            if ( tv != null ) {
                // update the text, invalidation seems to be automatic
                tv.setText( "Item = " + myAppGetItem( index ) + ". Index = " + index + ". First = " + iFirst + ". Last = " + iLast );
            }
        }
    }
} 
```

# php - 将 $_SESSION 数组中的大量值写入数据库记录的最佳时间是什么时候？

> ID：15506586
> 
> 赞同：0
> 
> 时间：2013-03-19T17:37:34.270
> 
> 标签：php, mysql, session

我的 MySQL 数据库表之一有 125 列。我通过向用户展示大量表单来收集这些列的值，他们在这些表单中选择或输入我存储在 $_SESSION 数组中的值。

鉴于 $_SESSION 数组中要存储 125 个值，何时开始将这些值写入 MySQL 数据库的最佳时间？

我可能会回答我自己的问题，但很想听听更有经验的人的意见。我猜最安全的方法是一次将一个列值写入 MySQL。而且，我再次猜测，是组装所有 125 个列值然后将它们全部写入 MySQL 的一个 INSERT 语句中的最快方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:41:05.000

这取决于您的需要。您是否只需要在收集完所有 125 个字段后记录数据，还是要一次收集一个字段的部分（不完整）数据？您在这里的需求应该确定您围绕如何将此数据持久保存到数据库的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:42:43.287

大概你被这个数据设计困住了。听起来很笨拙。

无论如何，如果您实际上拥有所有可用的数据项，您应该使用单个 INSERT 将它们放入 MySQL。

如果您先执行 INSERT，然后执行一系列 UPDATE 操作，您将必须弄清楚如何让您的 UPDATE 到达您刚刚插入的行。这有时可能有点棘手。

# ruby-on-rails - 又一个找不到生成器 rspec:install with ruby on rails

> ID：15506598
> 
> 赞同：1
> 
> 时间：2013-03-19T17:38:15.493
> 
> 标签：ruby-on-rails, rspec

我无法安装 rspec。我添加到我的 gem 文件中：

```
group :test, :development do
gem 'rspec-rails','~> 2.0'
end 
```

跑了

```
bundle install
gem install rspec-rails
rails generate rspec:install 
```

并收到

```
Could not find generator rspec:install. 
```

gem 显示在 gem 列表下，但不在捆绑安装中。我一直在用谷歌搜索这个错误，但没有一个解决方案对我有用。我在我的 gem 文件中尝试了不同的条目。我已经更新了我的宝石。我有当前版本的捆绑器。我试过了

```
gem install rspec-rails --pre 
```

我试过了

```
rspec -v 
```

哪个有效

我没主意了。你们有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:05:03.630

我想到了！这就像在错误的 gemfile 中一样简单！好尴尬

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-21T17:09:50.430

在我在我的 gemfile 中注释掉这些 gem 之前，没有什么对我有用：

```
gem 'sdoc', '~> 0.4.0',          group: :doc
gem 'spring',        group: :development 
```

终于重回正轨了。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T19:47:57.177

这可能是因为另一个 Rails 环境正在运行。做

```
spring stop 
```

从命令行然后再试一次。这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T17:51:26.210

In your **application.rb** file, just add the following configuration.

```
config.generators do |g|
  g.test_framework  :rspec
end 
```

and now try to run the following command

```
rails generate rspec:install 
```

# c# - 读取 Wireshark 文件

> ID：15506599
> 
> 赞同：1
> 
> 时间：2013-03-19T17:38:21.030
> 
> 标签：c#

我想构建发送数据包的应用程序，我知道 SharpPcap 和 Pcap.Net 但想从我自己构建。我要开始的第一件事是打开 Wireshark 文件，但与 SharpPcap 和 Pcap.Net 不同，我希望我的应用程序能够处理所有 Wireshark 文件，而不仅仅是 pcap 文件。我是一名新开发人员，甚至不知道从哪里开始，所以请原谅我没有在这里发布我尝试过的内容。我唯一尝试的是 BinaryReader 读取我的文件并且只得到奇怪的字符。我想要任何可以引导我学习的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:41:39.920

您可以查看 Pcap.Net 实现并了解他们是如何做到的。

# objective-c - 清除 ViewController 类中的连接/插座？

> ID：15506600
> 
> 赞同：2
> 
> 时间：2013-03-19T17:38:22.637
> 
> 标签：objective-c, xcode, interface-builder, storyboard, viewcontroller

我在 XCode 中工作，并将视图控制器复制到另一个项目，但所有连接/插座仍连接到旧项目。如果我将鼠标悬停在连接点上，它会突出显示另一个项目中的插座对象。如何删除课程的所有连接？

看起来如果 ViewController 的名称相同，如果我添加相同类型和名称的 IBOutlet，它将自动连接到旧项目。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T18:09:24.253

如果在源项目打开时粘贴类，它会由于某种原因链接。一旦您退出 xCode 并重新打开新项目，它将清除与旧项目的连接！

# html - 如何在 HTML Select Tag 中输入文本？

> ID：15506601
> 
> 赞同：6
> 
> 时间：2013-03-19T17:38:24.237
> 
> 标签：html, html-select

我想在选择标签中创建输入选项，以便用户可以在选项之间进行选择或插入不同的值。
可能吗？

```
<select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
  **<insert user value>**
</select> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-11-17T23:33:57.257

具有“list”属性的 HTML 解决方案：

```
<input type="text" name="city" list="citynames">
<datalist id="citynames">
  <option value="Boston">
  <option value="Cambridge">
</datalist> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T17:43:16.507

您将不得不使用 javascript 来获得附加值。查看这篇文章以获取一些示例代码：

[Jquery在选择中动态更新“其他”选项](https://stackoverflow.com/questions/1962041/jquery-dynamically-update-other-option-in-select)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T17:47:58.070

选择元素不能包含除`option`or`optgroup`元素以外的任何内容。这是规范的参考[http://www.w3.org/TR/html5/forms.html#the-select-element](http://www.w3.org/TR/html5/forms.html#the-select-element)

您最好在下拉列表中添加“其他”选项，然后使用 JS 检测该选项以动态显示自定义值的输入（下拉列表下方）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T17:16:56.483

在选择框上方放置一个输入框，去掉输入框的边框。使输入框的长度比选择框的长度短，这样选择框的末端仍然可以使用。

使用 oninput 事件检测输入框中输入的内容。在每次击键时，检查选择框中的连续匹配。当匹配不再存在时，不再需要选择框。

服务器将期望同时接收文本框输入（如果有）和选择框输入（如果有），并且应该使用选择值（如果提供），否则使用输入值（如果提供）。

# php - 无法使用 Composer 安装学说/mongodb-odm

> ID：15506605
> 
> 赞同：3
> 
> 时间：2013-03-19T17:38:45.417
> 
> 标签：php, mongodb, composer-php, doctrine-odm, doctrine-mongodb

尝试通过 Composer 安装教义/mongodb-odm 我得到了这个：

```
Loading composer repositories with package information
Updating dependencies (including require-dev)
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - doctrine/mongodb 1.0.x-dev requires ext-mongo >=1.2.12,<1.4-dev -> the requested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.2 requires ext-mongo >=1.2.12,<1.4-dev -> the requested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.1 requires ext-mongo >=1.2.12,<1.4-dev -> the requested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.0-BETA3 requires ext-mongo >=1.3.1,<1.4-dev -> the requested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.0-BETA2 requires ext-mongo >=1.2.12,<1.3-dev -> the requested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.0-BETA1 requires ext-mongo * -> the requested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.0 requires ext-mongo >=1.2.12,<1.4-dev -> the requested PHP extension mongo is missing from your system.
    - Installation request for doctrine/mongodb 1.0.*@dev -> satisfiable by doctrine/mongodb 1.0.0, doctrine/mongodb 1.0.0-BETA1, doctrine/mongodb 1.0.0-BETA2, doctrine/mongodb 1.0.0-BETA3, doctrine/mongodb 1.0.1, doctrine/mongodb 1.0.2, doctrine/mongodb 1.0.x-dev. 
```

然而`php -m`有：

```
[PHP Modules]
...
mongo
... 
```

并且`composer.phar show --platform`有：

```
...
ext-mongo        1.3.5     The mongo PHP extension
... 
```

有任何想法吗？该扩展肯定安装正确，Composer 甚至列出了它。版本（>=1.2.12,<1.4-dev）也符合要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:18:51.527

原来这是 Sublime Text 2 Composer 插件的错。如果我通过终端运行 Coomoser 就可以了。为什么它在 ST2 中不起作用有点神秘，据我所知，它正在执行完全相同的命令：`/bin/composer.phar update -n -v`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T04:17:07.020

如果您将 Mongo 加载到通过 WAMPSERVER 安装的 PHP 实例中，则可能导致此问题的原因是 2 个 php.ini 文件中只有一个被修改`path\to\wamp\bin\php\php5\php.ini`。如果您添加`extension=php_mongo.dll`到`path\to\wamp\bin\apache\apche2\bin\php.ini`您应该能够从命令行或编辑器 cli 工具使用 mongo 函数执行 php。

如果您遇到作曲家错误：

```
doctrine/mongodb 1.0.x-dev requires ext-mongo >=1.2.12,<1.5-dev -> the requested PHP extension mongo is missing from your system 
```

那么这是您需要更新`apache2x\bin\php.ini`文件的另一个指标

# youtube-api - 如何以低音量自动启动 Youtube 播放列表？

> ID：15506619
> 
> 赞同：0
> 
> 时间：2013-03-19T17:39:28.537
> 
> 标签：youtube-api

使用此向导，我无法让 Youtube 播放列表以低音量自动播放。

[https://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

试过iframe、as3、as2。

需要音量/全屏控制。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:03:30.573

因为播放器参数（左栏）不支持音量控制。
因此，嵌入代码在您的情况下没有用。

在 iframe API 参考中，您可以[`player.setVolume()`](https://developers.google.com/youtube/iframe_api_reference#setVolume)在播放器准备好后使用它来设置音量。

如果要控制音量，则必须用 Javascript 编写一些代码。

[示例](https://developers.google.com/youtube/iframe_api_reference#Examples)（请参阅大声播放）

# excel - 宏执行 VLOOKUP 搜索特定列名以输入特定信息

> ID：15506620
> 
> 赞同：0
> 
> 时间：2013-03-19T17:39:33.450
> 
> 标签：excel, vlookup, vba

我需要一些关于宏/vlookup 的帮助。最初，我录制了宏，只是手动进行了 VLOOKUP，认为这总是有效的。最近，它没有正常运行（我不知道为什么，除了可能列有时并不总是在同一个地方）。有没有办法写出这个宏，以便它每次都能工作？

这是我正在尝试做的事情：

我有一个主电子表格和一个空缺电子表格。主电子表格包含我需要移至空缺电子表格的信息。并非主电子表格中的每个人都列在空缺电子表格中（反之亦然），也不是按指定顺序列出的。我已经有一个宏，可以将我需要的列名添加到空缺电子表格中，以便进行设置。我只需要在那里获取信息。

我想要执行以下操作：从空缺电子表格中获取员工编号并在主电子表格中搜索它，然后将特定列名（从主电子表格中）中的信息复制到列（同名）中空缺电子表格

例如：员工编号 12345 在空缺电子表格中。宏在主电子表格中搜索员工编号 12345，然后将信息（在主电子表格中）从类别、中心名称、工作、位置、代码、跟踪、原因、薪水等列中移动到相同名称的列中。空缺电子表格。

我需要从更多列中获取信息，但这只是一个示例。这些电子表格非常庞大，包含数万行数据。您能提供的任何帮助将不胜感激！

我希望这一切都有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:31:48.347

**根据工作簿文件示例进行编辑**

在 SAMPLE Milestone Report.xlsx 文件的 M 列中，放置以下公式：

`=INDEX('[SAMPLE Master Active.xlsx]Sheet1'!$1:$4,MATCH($A2,'[SAMPLE Master Active.xlsx]Sheet1'!$A:$A,FALSE),MATCH(M$1,'[SAMPLE Master Active.xlsx]Sheet1'!$1:$1,FALSE))`

然后，您可以将此公式复制并粘贴到其余的行/列中。其中一些将返回`#N/A`，因为列标签不完全匹配。如果找不到员工编号，则会返回类似的错误。

索引函数引用主活动工作簿的第 1:4 行，工作表 1。

下一个参数使用 MATCH() 函数在主活动工作簿第 1 页的 A 列中查找员工编号的行号。

下一个参数使用 MATCH() 函数在 Master Active 工作簿的第 1 行，工作表 1 中查找列标签的列 #。

所以通过这种方式，我们可以引用包含您的 Master Active 工作簿中所有数据的范围，并动态识别员工编号所在的 ROW 以及列标签所在的 COLUMN。Index 函数然后返回此交集的值。

**原始答案**

该`VLOOKUP`函数需要三个参数和一个可选的第四个参数。

1.  Lookup_Value - 这是您要搜索的值
2.  Table_Array - 这是您要搜索的范围/表格`lookup_value`
3.  Column_# - 公式将返回匹配行中的值，对于此列 #，在`table_array`.
4.  Range_lookup（可选）- 告诉 Excel 是返回近似匹配还是完全匹配。我从来不需要使用近似匹配，所以我总是将它设置为`False`.

您需要做的是`Column_#`根据其他一些标准使值成为动态值。您可能可以使用该`MATCH()`功能执行此操作。

以下示例使用工作表函数约定，但应该很容易转换为 VBA。

`=VLOOKUP("steve", "A:C", 3, False)`将从 A 列中找到“steve”的行返回第 3 列中的值。

但是假设您的数据并不总是在第 3 列中......假设您正在寻找“类别”并且它可能在任何列中，但您知道 ccolumn 标签将在第 1 行中。然后，而不是“3 " 在`VLOOKUP...`公式中，你会这样做：

匹配（“类别”，'Vacancy_Sheet_Name'！1：1，假）

所以你最终得到的公式是：

`=VLOOKUP("steve", "A:C", Match("Category",'Vacancy_Sheet_Name'!1:1, False), False)`

在 vba 中，这将是：

`= Application.WorksheetFunction.Vlookup("steve", "A:C", Application.Match("Category",Sheets("Vacancy_Sheet_Name").Range("1:1"),False), False)`

**重要说明：**`VLOOKUP`总是在第一列中`Table_Array`查找`Lookup_Value`. 如果您的数据结构发生了变化，并且`lookup_value`不再位于 FIRST 列中，`VLOOKUP`则不适合使用该函数。在这种情况下，可能需要使用`INDEX()`和`MATCH()`函数的组合，因为`VLOOKUP`它不起作用。

# php - 有什么方法可以从网页执行 bash 脚本并在执行时捕获输出？

> ID：15506625
> 
> 赞同：2
> 
> 时间：2013-03-19T17:39:38.857
> 
> 标签：php, javascript, ajax, bash, shell

我在我的 Ubuntu 10.04 服务器上运行了一些长时间运行的 bash 脚本，这些脚本正在执行诸如备份和数据库转储之类的操作。

我目前正在通过 cron 执行它们并将结果邮寄给我。但是，最好在整个 Web 界面中手动触发它们。（我不想给任何用户 SSH 访问权限，以便他可以触发脚本）

例如，在 PHP 中，有 exec 命令在脚本完成后获取脚本输出。这没有用，因为脚本持续时间超过 30 秒浏览器超时。（而且我想监控进度）所以我目前一直在寻找一种方法来定期收集脚本输出或“拖尾”并通过 JavaScript 或 Pagereloads 或类似的东西显示它。

正如我所注意到的，例如，当您通过 Web 界面运行 apt 等系统命令时，Webmin 会以某种方式执行此操作。

我可以想象的一种方法是分叉脚本执行并将输出重定向到文件，而主进程正在页面重新加载/ Ajax 请求上读取它。但这听起来像是一种解决方法:)

那么，有人对这个问题有好的解决方案吗？不需要是 PHP，也可以是 python 或 perl 或服务器端的其他任何东西。或者是否有用于此类事情的工具或库？

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:44:31.117

我不确定您是否打算在您的解决方案中使用 PHP，但如果不是……</p>

过去，我曾将[Jenkins](http://jenkins-ci.org/)用于此类事情。您可以将它用作 cron 替代品*和*手动触发脚本的一种方式，同时保留所发生事件的日志。

可以设置 Jenkins，使某些用户只有触发作业的权限，而 Jenkins 管理员可以执行诸如设置和编辑作业等操作。

如果你喜欢接收电子邮件，Jenkins 也可以这样做。如果有的话，Jenkins 最大的缺点是它非常灵活/可配置，因此如何最好地设置它以满足一个人的特定需求并不总是很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:44:19.683

任何语言都可以。我可以推荐 Webmin 的大锤方法。

[http://www.webmin.com/](http://www.webmin.com/)

优点是您要求的内容已被烘焙，您无需编写任何程序。

在php中你应该看看

缓冲和冲洗。您基本上可以在收到输出时输出到页面。

[http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)

有关 popen 语法，请参阅此相关问题。

[php shell_exec 实时更新](https://stackoverflow.com/questions/8370628/php-shell-exec-with-realtime-updating)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:00:01.830

我做了类似的事情（快速而肮脏但可能不是很有效）我使用数据库日志表来存储输出（来自后端脚本）然后网页会定期发出 ajax 请求以仅获取那些它没有获取的日志之前并将其显示（附加）到前端。

数据库表非常简单，有列

id（自动递增）

日志文本

script_identifier（如果您跟踪多个脚本，则为唯一）

上次修改时间

output_displayed (value = 0 表示这个输出没有被 ajax 读取)

一个简单的过程是这样的 打开一个网页并点击一个按钮发送一个ajax请求以启动后端脚本每隔5秒发送另一个ajax请求，看看是否有未读的日志表行如果有未读的行，标记它们读取时，获取它们并显示

您可以在许多方面进行改进，例如使用 apc 或 memcached 而不是数据库表 保持日志表较小或为每个脚本动态创建日志表

# shell - 将命令响应写入 KornShell 脚本中的输出文件

> ID：15506626
> 
> 赞同：1
> 
> 时间：2013-03-19T17:39:42.683
> 
> 标签：shell, unix, scripting, ksh

我想在输出文件中捕获以下 ./symmir 可执行文件的输出。

如果我想继续，可执行文件首先会问一个问题。正如您在以下 KornShell (ksh) 脚本中所见，我对问题的回答是“Y”。我想在回答问题后专门捕获响应。

```
#!/bin/ksh
./symmir <<EOF
Y
EOF 
```

以下将不起作用，因为它只会将问题重定向到 file1 而不是我回答问题后的响应。

```
#!/bin/ksh
./symmir >> file1 <<EOF
Y
EOF 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:04:35.950

将

```
#!/bin/ksh
./ask_me <<EOF >> file1
Y
EOF 
```

工作？

但是，您的代码

```
#!/bin/ksh
./ask_me >> file1 <<EOF 
Y
EOF 
```

在我的测试中也可以正常工作。

获取/打印字符串的代码是（ask_me.c）：

```
 #include <stdio.h>

 int main()
 {
   char input[256];
   gets(input); /* Unsafe */

   printf("You have entered '%s'\n", input);

   return 0;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:13:23.380

如果知道答案中的行数，您可以执行以下操作：

```
# assumed 1 line in the answer
./symmir <<EOF |tail -n 1 >>file1
Y
EOF 
```

或者，如果您可以`symmir`将问题和答案输出到不同的流 - 一个到 stdout，一个到 stderr，则只能重定向其中一个：

```
# assumed symmir writes answer to stderr: echo $answer 1>&2
./symmir <<EOF 2>>file1
Y
EOF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:57:13.897

这可能是 EMC symcli symmir 命令吗？

如果是这种情况，请使用该`-noprompt`选项，以防止命令要求确认。

# javafx - JavaFX - 每个阶段的独特场景

> ID：15506634
> 
> 赞同：0
> 
> 时间：2013-03-19T17:40:16.543
> 
> 标签：javafx, instance, stage

我有一个扩展应用程序并调用初级阶段的类。这个主要阶段有一个下一步按钮，它将调用另一个阶段（选项阶段）。选项阶段有一个上一个按钮。我想获取主要阶段的实例，处于用户单击“下一步”按钮之前的状态，例如：带有输入数据的文本字段或带有所选项目的组合框。我怎样才能做到这一点？

主类：

```
public class MainClass extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {

        final FXMLLoader loader = new FXMLLoader(getClass().getResource("interfaceOne.fxml"));
        final Parent root = (Parent)loader.load();
        final MyController controller = loader.<MyController>getController();

        primaryStage.initStyle(StageStyle.TRANSPARENT);
        primaryStage.getIcons().add(new Image(getClass().getResourceAsStream("icon.png")));

        Scene scene = new Scene(root);
        primaryStage.setScene(scene);
        Platform.setImplicitExit(false);

        controller.setStage(primaryStage);
        primaryStage.show();        
    }

    public static void main(String[] args) {
        launch(args);
    } 
```

}

我的控制器：

```
public class MyController{

    // Some declarations ...

    Stage stage = null;

    public void setStage(Stage stage) {
       this.stage = stage;
    }

    // Next button's action
    @FXML
    public void handleNextAction(ActionEvent event) {

        try {  

            Parent root = FXMLLoader.load(getClass().getResource("optionInterface.fxml"));

            stage.initStyle(StageStyle.TRANSPARENT);
            stage.getIcons().add(new Image(getClass().getResourceAsStream("icon.png")));
            stage.setScene(new Scene(root));
            stage.show();

            // Hide the current screen
            ((Node)(event.getSource())).getScene().getWindow().hide();

        } catch (Exception exc) {
            System.out.println("Error: " + exc.getMessage());
        }
    }
} 
```

选项控制器：

```
public class OptionsController implements Initializable {

    public void handlePreviousAction(ActionEvent event) {
        try {
            Parent root = FXMLLoader.load(getClass().getResource("interfaceOne.fxml"));;
            MyController controller = MyController.getInstance();

            stage.initStyle(StageStyle.TRANSPARENT);
            stage.getIcons().add(new Image(getClass().getResourceAsStream("icon.png")));
            stage.setScene(new Scene(root));

            controller.setStage(stage);
            controller.isLocationLoaded(false);
            stage.show();

            // Hide the current screen
            ((Node)(event.getSource())).getScene().getWindow().hide();

        } catch (IOException exc) {
            System.out.println("Error: " + exc.getMessage());

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T17:49:37.647

*推荐方法*

不要为此使用多个阶段，而是使用单个阶段和多个场景或分层窗格。

*示例参考*

1.  [Angela Caicedo 的复杂场景切换教程](https://blogs.oracle.com/acaicedo/entry/managing_multiple_screens_in_javafx1)。
2.  [向导式配置](https://gist.github.com/jewelsea/2850787)。

*背景*

阅读有关 JavaFX 背后的[剧院隐喻的讨论，以帮助理解](https://stackoverflow.com/questions/15039344/is-it-possible-to-open-a-new-fxml-file-in-the-same-frame)[舞台](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html)和[场景](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#setScene%28javafx.scene.Scene%29)之间的区别，以及为什么您可能希望在应用程序中更改场景而不是舞台。

*简单示例*

我根据您的应用程序描述创建了一个简单的示例，它只是在主场景和选项场景之间来回切换。当您在场景之间来回切换时，您可以看到主场景和选项场景的场景状态都保留了下来。

对于示例，只有一个阶段引用，它在其`start`方法中传递给应用程序，并且阶段引用保存在应用程序中。[应用程序为主屏幕创建一个场景，为选项屏幕创建另一个场景，保存两个场景引用根据需要使用stage.setScene](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#setScene%28javafx.scene.Scene%29)在这些引用之间来回切换当前显示的场景。

该演示刻意简化以使其易于理解，并且不保留任何使用的数据或使用 MVC 样式架构或 FXML，这可能在更真实的演示中完成。

![预订](../Images/018fd0648ebf3d81e29e7c1397e015cf.png) ![选项](../Images/a3d828381f924a8491c3841007f26a4d.png)

```
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.event.*;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class RoomReservationNavigator extends Application {
  public static void main(String[] args) { Application.launch(args); }

  private Scene mainScene;
  private Scene optionsScene;
  private Stage stage;

  @Override public void start(Stage stage) {
    this.stage = stage;
    mainScene    = createMainScene();
    optionsScene = createOptionsScene();

    stage.setScene(mainScene);
    stage.show();
  }

  private Scene createMainScene() {
    VBox layout = new VBox(10);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
    layout.getChildren().setAll(
      LabelBuilder.create()
        .text("Room Reservation System")
        .style("-fx-font-weight: bold;") 
        .build(),
      HBoxBuilder.create()
        .spacing(5)
        .children(
          new Label("First Name:"),
          new TextField("Peter")
         )
        .build(),
      HBoxBuilder.create()
        .spacing(5)
        .children(
          new Label("Last Name:"),
          new TextField("Parker")
         )
        .build(),
      new Label("Property:"),
      ChoiceBoxBuilder.<String>create()
        .items(FXCollections.observableArrayList(
          "The Waldorf-Astoria", 
          "The Plaza", 
          "The Algonquin Hotel"
        ))
        .build(),
      ButtonBuilder.create()
        .text("Reservation Options  >>")
        .onAction(new EventHandler<ActionEvent>() {
          @Override public void handle(ActionEvent t) {
            stage.setScene(optionsScene);
          }
        })
        .build(),
      ButtonBuilder.create()
        .text("Reserve")
        .defaultButton(true)
        .onAction(new EventHandler<ActionEvent>() {
          @Override public void handle(ActionEvent t) {
            stage.hide();
          }
        })
        .build()
    );

    return new Scene(layout);
  }

  private Scene createOptionsScene() {
    VBox layout = new VBox(10);
    layout.setStyle("-fx-background-color: azure; -fx-padding: 10;");
    layout.getChildren().setAll(
      new CheckBox("Breakfast"),
      new Label("Paper:"),
      ChoiceBoxBuilder.<String>create()
        .items(FXCollections.observableArrayList(
          "New York Times", 
          "Wall Street Journal", 
          "The Daily Bugle"
        ))
        .build(),
      ButtonBuilder.create()
        .text("Confirm Options")
        .defaultButton(true)
        .onAction(new EventHandler<ActionEvent>() {
          @Override public void handle(ActionEvent t) {
            stage.setScene(mainScene);
          }
        })
        .build()
    );

    return new Scene(layout);
  }
} 
```

# c++ - 第一个项目 MySQL 上未解析的外部符号

> ID：15506641
> 
> 赞同：0
> 
> 时间：2013-03-19T17:40:59.563
> 
> 标签：c++, mysql, visual-studio-2012

尝试了一切，整天在谷歌上搜索。但我没有成功解决这个问题。Visual Studio 说：

```
1>Main.obj : error LNK2001: unresolved external symbol "class sql::mysql::MySQL_Driver * __cdecl sql::mysql::get_driver_instance(void)" (?get_driver_instance@mysql@sql@@YAPAVMySQL_Driver@12@XZ) 
```

SDK：MySQL 连接器 C++ 1.1.2

我能做些什么 .. ？

# iphone - UITableViewController控件中的多选

> ID：15506645
> 
> 赞同：0
> 
> 时间：2013-03-19T17:41:06.520
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我仍然是 iOS 开发的新手，我有两个相关的问题。在 iOS 邮件应用程序中，可以进入编辑模式，选择多封电子邮件，并对它们执行一些操作，例如移动或删除。此外，当进入编辑模式时，UITableViewController 底部会出现一个工具栏。我想模仿这个功能，但我很难找到可用作指南的资源。

我已将导航控件添加到 tableviewcontroller 作为编辑按钮的容器，但我不确定这是否是正确的方向。此外，当我在情节提要视图中向表单添加工具栏控件时，加载 UITableViewController 时它不会显示。

有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:07:51.843

我认为您想要的与本教程所做的非常相似[http://behindtechlines.com/2012/06/enabling-configuring-uitableview-edit-mode/](http://behindtechlines.com/2012/06/enabling-configuring-uitableview-edit-mode/)

# java - 使用 JTextPane 显示 HTML，是否支持 SVG？

> ID：15506646
> 
> 赞同：0
> 
> 时间：2013-03-19T17:41:10.860
> 
> 标签：java, swing, svg

我正在尝试在 HTML 中嵌入 svg 图像，它们似乎没有与 or 标记一起使用。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:43:27.203

Swing 仅支持 HTML/CSS/JavaScript 的一个子集。

[JavaFX](http://docs.oracle.com/javafx/index.html)有更好的支持，如此[处所示](http://medianetwork.oracle.com/video/player/1193176134001)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:45:32.253

像这样：

```
</head>

<body>
    <object width="700" height="200" data="fileName.svg"></object>
</body>
</html> 
```

# c# - 如何使用带有进度条的 ASP.NET MVC4 Web Api 上传大文件

> ID：15506648
> 
> 赞同：17
> 
> 时间：2013-03-19T17:41:16.727
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

如何使用 ASP.NET MVC4 Web Api 上传大文件
并取得进展？

我看到了这篇文章，我了解如何处理上传的文件，但是如何获取进度数据？ [如何接受文件 POST](https://stackoverflow.com/questions/10320232/how-to-accept-a-file-post-asp-net-mvc-4-webapi)

请不要向我发送上传产品的链接。我想了解如何以 MVC4 Web Api 方式处理此问题...这是在 MVC4 WebApi 中处理文件上传的示例代码

```
 public async Task<HttpResponseMessage> Post()
    {
        if (Request.Content.IsMimeMultipartContent())
        {
            var path = HttpContext.Current.Server.MapPath("~/App_Data");

            var provider = new MultipartFormDataStreamProvider(path);

            await Request.Content.ReadAsMultipartAsync(provider).ContinueWith(t =>
            {
                if (t.IsFaulted || t.IsCanceled)
                    throw new HttpResponseException(HttpStatusCode.InternalServerError);
            });

            return Request.CreateResponse(HttpStatusCode.OK); 
        }
        else
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
        }
    } 
```

现在，当

```
 await Request.Content.ReadAsMultipartAsync(provider) 
```

我怎样才能得到如何加载字节？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-23T05:58:56.667

默认情况下，在两个地方上传文件的大小有限制。一个在请求级别，第二个，如果您在 IIS 上托管，那么在 Web 服务器级别。[我添加了这个博客](http://code.msdn.microsoft.com/windowsazure/Uploading-large-files-386ec0af)中提到的几个配置，我能够上传一个 36mb 的文件而没有任何问题。我已经发布了下面的片段。

基本上

1.

```
 <system.web> 
    <httpRuntime maxRequestLength="2097152"/>
  </system.web> 
```

2.

```
<system.webServer> 
  <security> 
      <requestFiltering> 
         <requestLimits maxAllowedContentLength="2147483648" /> 
      </requestFiltering> 
  </security><system.webServer> 
```

如果您愿意，很容易找到加载到服务器中的文件的大小。在您的代码中

在读取流中的文件数据时，对于文件数据中的每个项目，您可以读取本地文件名，如下所示。

```
 string savedFile = fileData.LocalFileName;
 // use the file info class to derive properties of the uploaded file
 FileInfo file = new FileInfo(savedFile);
//this will give the size of the uploaded file 
long size = file.length/1024 
```

希望这可以帮助。我想知道为什么这被标记了？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-28T06:49:02.403

我使用这个解决方案：

```
public class UploadController : ApiController
{
    private static ConcurrentDictionary<string, State> _state = new ConcurrentDictionary<string, State>();

    public State Get(string id)
    {
        State state;

        if (_state.TryGetValue(id, out state))
        {
            return state;
        }

        return null;
    }

    public async Task<HttpResponseMessage> Post([FromUri] string id)
    {
        if (Request.Content.IsMimeMultipartContent())
        {
            var state = new State(Request.Content.Headers.ContentLength);
            if (!_state.TryAdd(id, state))
                throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.Conflict));

            var path = System.Web.Hosting.HostingEnvironment.MapPath("~/App_Data");

            var provider = new FileMultipartStreamProvider(path, state.Start, state.AddBytes);

            await Request.Content.ReadAsMultipartAsync(provider).ContinueWith(t =>
            {
                _state.TryRemove(id, out state);

                if (t.IsFaulted || t.IsCanceled)
                    throw new HttpResponseException(HttpStatusCode.InternalServerError);
            });

            return Request.CreateResponse(HttpStatusCode.OK);
        }
        else
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotAcceptable, "This request is not properly formatted"));
        }
    }
}

public class State
{
    public long? Total { get; set; }

    public long Received { get; set; }

    public string Name { get; set; }

    public State(long? total = null)
    {
        Total = total;
    }

    public void Start(string name)
    {
        Received = 0;
        Name = name;
    }

    public void AddBytes(long size)
    {
        Received = size;
    }
}

public class FileMultipartStreamProvider : MultipartStreamProvider
{
    private string _rootPath;
    private Action<string> _startUpload;
    private Action<long> _uploadProgress;

    public FileMultipartStreamProvider(string root_path, Action<string> start_upload, Action<long> upload_progress)
        : base()
    {
        _rootPath = root_path;
        _startUpload = start_upload;
        _uploadProgress = upload_progress;
    }

    public override System.IO.Stream GetStream(HttpContent parent, System.Net.Http.Headers.HttpContentHeaders headers)
    {
        var name = (headers.ContentDisposition.Name ?? "undefined").Replace("\"", "").Replace("\\", "_").Replace("/", "_").Replace("..", "_");

        _startUpload(name);

        return new WriteFileStreamProxy(Path.Combine(_rootPath, name), _uploadProgress);
    }

}

public class WriteFileStreamProxy : FileStream
{
    private Action<long> _writeBytes;

    public WriteFileStreamProxy(string file_path, Action<long> write_bytes)
        : base(file_path, FileMode.Create, FileAccess.Write)
    {
        _writeBytes = write_bytes;
    }

    public override void EndWrite(IAsyncResult asyncResult)
    {
        base.EndWrite(asyncResult);

#if DEBUG
        System.Threading.Thread.Sleep(100);
#endif

        if (_writeBytes != null)
            _writeBytes(base.Position);

    }

    public override void Write(byte[] array, int offset, int count)
    {
        base.Write(array, offset, count);

#if DEBUG
        System.Threading.Thread.Sleep(100);
#endif
        if (_writeBytes != null)
            _writeBytes(base.Position);
    }
} 
```

非缓冲输入流的小配置：

```
config.Services.Replace(typeof(IHostBufferPolicySelector), new CustomPolicy()); 
```

实现了这个：

```
public class CustomPolicy : System.Web.Http.WebHost.WebHostBufferPolicySelector
{
    public override bool UseBufferedInputStream(object hostContext)
    {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T03:28:02.967

I Ended Up using an HttpModule but even the HttpModule won't show the progress bar I found out something very interesting it's seems that when i upload the file in a Secure Protocol(over https://) then the progress are working but in non secure protocl (http://) the progress is not working and the file is fully buffered i don't know way is like that i believe it's a bug somewhere between the IIS to Asp.net Framework when the Request are get Procced.

now because i success make it work over https with an HttpModule i believe it is possible to make it work also with Mvc Web Api but i currently don't have the time to check that.

for parsing Mutlipart form data i used Nancy HttpMultipart parser here: [https://github.com/NancyFx/Nancy/tree/master/src/Nancy](https://github.com/NancyFx/Nancy/tree/master/src/Nancy) just grabbed the classes:
HttpMultipart.cs
HttpMultipartBoundary.cs
HttpMultipartBuffer.cs
HttpMultipartSubStream.cs

here is the HttpModule Source:

```
public class HttpUploadModule : IHttpModule
{
    public static DateTime lastClean = DateTime.UtcNow;
    public static TimeSpan cleanInterval = new TimeSpan(0,10,0);
    public static readonly object cleanLocker = new object();

    public static readonly Dictionary<Guid,UploadData> Uploads = new Dictionary<Guid,UploadData>();

    public const int KB = 1024;
    public const int MB = KB * 1024;

    public static void CleanUnusedResources( HttpContext context) 
    {
        if( lastClean.Add( cleanInterval ) < DateTime.UtcNow ) {

            lock( cleanLocker ) 
            {

                if( lastClean.Add( cleanInterval ) < DateTime.UtcNow ) 
                {
                    int maxAge = int.Parse(ConfigurationManager.AppSettings["HttpUploadModule.MaxAge"]);

                    Uploads.Where(u=> DateTime.UtcNow.AddSeconds(maxAge) > u.Value.createdDate ).ToList().ForEach(u=>{    
                        Uploads.Remove(u.Key);
                    });

                    Directory.GetFiles(context.Server.MapPath(ConfigurationManager.AppSettings["HttpUploadModule.Folder"].TrimEnd('/'))).ToList().ForEach(f=>{     
                        if( DateTime.UtcNow.AddSeconds(maxAge) > File.GetCreationTimeUtc(f)) File.Delete(f);
                    });

                    lastClean = DateTime.UtcNow;
                }
            }

        }
    }

    public void Dispose()
    {   

    }

    public void Init(HttpApplication app)
    {
        app.BeginRequest += app_BeginRequest;
    }

    void app_BeginRequest(object sender, EventArgs e)
    {
        HttpContext context = ((HttpApplication)sender).Context;

        Guid uploadId = Guid.Empty;

        if (context.Request.HttpMethod == "POST" && context.Request.ContentType.ToLower().StartsWith("multipart/form-data"))
        {
            IServiceProvider provider = (IServiceProvider)context;
            HttpWorkerRequest wr = (HttpWorkerRequest)provider.GetService(typeof(HttpWorkerRequest));
            FileStream fs = null;
            MemoryStream ms = null;

            CleanUnusedResources(context);                

            string contentType = wr.GetKnownRequestHeader(HttpWorkerRequest.HeaderContentType);
            NameValueCollection queryString = HttpUtility.ParseQueryString( wr.GetQueryString() );

            UploadData upload = new UploadData { id = uploadId ,status = 0, createdDate = DateTime.UtcNow };

            if(
                                    !contentType.Contains("boundary=") ||   
            /*AT LAST 1KB        */ context.Request.ContentLength < KB ||
            /*MAX 5MB            */ context.Request.ContentLength > MB*5 || 
            /*IS UPLOADID        */ !Guid.TryParse(queryString["upload_id"], out uploadId) || Uploads.ContainsKey( uploadId )) {
                upload.id = uploadId;
                upload.status = 2;
                Uploads.Add(upload.id, upload);

                context.Response.StatusCode = 400;
                context.Response.StatusDescription = "Bad Request";
                context.Response.End();

            }

            string boundary = Nancy.HttpMultipart.ExtractBoundary( contentType );

            upload.id = uploadId;
            upload.status = 0;
            Uploads.Add(upload.id, upload);

            try {

                if (wr.HasEntityBody())
                {
                    upload.bytesRemaining = 
                    upload.bytesTotal     = wr.GetTotalEntityBodyLength();

                    upload.bytesLoaded    = 
                    upload.BytesReceived  = wr.GetPreloadedEntityBodyLength();

                    if (!wr.IsEntireEntityBodyIsPreloaded())
                    {
                        byte[] buffer = new byte[KB * 8];
                        int readSize = buffer.Length;

                        ms = new MemoryStream();
                        //fs = new FileStream(context.Server.MapPath(ConfigurationManager.AppSettings["HttpUploadModule.Folder"].TrimEnd('/')+'/' + uploadId.ToString()), FileMode.CreateNew);

                        while (upload.bytesRemaining > 0)
                        {
                            upload.BytesReceived = wr.ReadEntityBody(buffer, 0, readSize);

                            if(upload.bytesRemaining == upload.bytesTotal) {

                            }

                            ms.Write(buffer, 0, upload.BytesReceived);

                            upload.bytesLoaded += upload.BytesReceived;
                            upload.bytesRemaining -= upload.BytesReceived;

                            if (readSize > upload.bytesRemaining)
                            {
                                readSize = upload.bytesRemaining;
                            }

                        }

                        //fs.Flush();
                        //fs.Close();
                        ms.Position = 0;
                        //the file is in our hands
                        Nancy.HttpMultipart multipart = new Nancy.HttpMultipart(ms, boundary);
                        foreach( Nancy.HttpMultipartBoundary b in multipart.GetBoundaries()) {
                            if(b.Name == "data")   {

                                upload.filename = uploadId.ToString()+Path.GetExtension( b.Filename ).ToLower();

                                fs = new FileStream(context.Server.MapPath(ConfigurationManager.AppSettings["HttpUploadModule.Folder"].TrimEnd('/')+'/' + upload.filename  ), FileMode.CreateNew);
                                b.Value.CopyTo(fs);
                                fs.Flush();
                                fs.Close();

                                upload.status = 1;

                                context.Response.StatusCode = 200;
                                context.Response.StatusDescription = "OK";
                                context.Response.Write(  context.Request.ApplicationPath.TrimEnd('/') + "/images/temp/" +  upload.filename  );
                            }
                        }

                    }

                }
            }
            catch(Exception ex) {
                upload.ex = ex;
            }

            if(upload.status != 1)
            {
                upload.status = 2;
                context.Response.StatusCode = 400;
                context.Response.StatusDescription = "Bad Request";
            }
            context.Response.End();
        }
    }
}

public class UploadData {
    public Guid id { get;set; }
    public string filename {get;set;}
    public int bytesLoaded { get; set; }
    public int bytesTotal { get; set; }
    public int BytesReceived {get; set;}
    public int bytesRemaining { get;set; }
    public int status { get;set; }
    public Exception ex { get;set; }
    public DateTime createdDate { get;set; }
} 
```

# kendo-ui - Kendo Grid - 对于具有组合框和输入的列，单击事件在 Chrome 中不起作用

> ID：15506649
> 
> 赞同：1
> 
> 时间：2013-03-19T17:41:19.717
> 
> 标签：kendo-ui, kendo-grid

我有一个剑道网格，其中一列有一个组合框和一个输入。输入的 On click 事件在 IE 和 Firefox 中有效，但在 Chrome 中无效。OnaBai 帮助创建了以下 jsFiddle，我按照自己的方式对其进行了修改。[http://jsfiddle.net/ehnSq/17/](http://jsfiddle.net/ehnSq/17/)。

请注意，如果您单击 chrome 中的图像，它只会关闭单元格。在 IE 或 Firefox 中，您可以单击按钮并获取警报。

这是我的专栏编辑。

```
$('<input data-text-field="CustomerName" data-value-field="CustomerId" style="width:175px" data-bind="value:' + options.field + '" class="k-combobox"/>')
        .appendTo(container)
        .kendoComboBox({
            autoBind: false,
            filter: "contains",
            dataSource: customerData,
            placeholder: strings.EmptyDropDownMessage,
            dataTextField: "CustomerName",
            dataValueField: "CustomerId"
        });
    $('<input type="image" class="k-icon-addcustomer" src="../Images/Add2.png" title="' + strings.AddCustomerToolTipText + '" />')
        .appendTo(container);

    $(".k-icon-addcustomer").on("click", function (evt) {
        evt.preventDefault();
        alert("Code Needs to Go Here");
    }); 
```

这将适用于 IE 和 Firefox，我不知道为什么在 chrome 中没有触发 click 事件。

# python - 尝试使用 python 访问 Google 专利时出现 503 错误

> ID：15506651
> 
> 赞同：1
> 
> 时间：2013-03-19T17:41:21.890
> 
> 标签：python, urllib2, urlopen, http-status-code-503

今天早些时候，我能够使用下面的代码从谷歌专利中提取数据

```
import urllib2

url = 'http://www.google.com/search?tbo=p&q=ininventor:"John-Mudd"&hl=en&tbm=pts&source=lnt&tbs=ptso:us'
req = urllib2.Request(url, headers={'User-Agent' : "foobar"})

response = urllib2.urlopen(req) 
```

现在，当我运行它时，我收到以下 503 错误。我只在上面循环了这段代码 30 次（我试图获得 30 个人拥有的所有专利）。

```
HTTPError                                 Traceback (most recent call last)
<ipython-input-4-01f83e2c218f> in <module>()
----> 1 response = urllib2.urlopen(req)

C:\Python27\lib\urllib2.pyc in urlopen(url, data, timeout)
    124     if _opener is None:
    125         _opener = build_opener()
--> 126     return _opener.open(url, data, timeout)
    127 
    128 def install_opener(opener):

C:\Python27\lib\urllib2.pyc in open(self, fullurl, data, timeout)
    404         for processor in self.process_response.get(protocol, []):
    405             meth = getattr(processor, meth_name)
--> 406             response = meth(req, response)
    407 
    408         return response

C:\Python27\lib\urllib2.pyc in http_response(self, request, response)
    517         if not (200 <= code < 300):
    518             response = self.parent.error(
--> 519                 'http', request, response, code, msg, hdrs)
    520 
    521         return response

C:\Python27\lib\urllib2.pyc in error(self, proto, *args)
    436             http_err = 0
    437         args = (dict, proto, meth_name) + args
--> 438         result = self._call_chain(*args)
    439         if result:
    440             return result

C:\Python27\lib\urllib2.pyc in _call_chain(self, chain, kind, meth_name, *args)
    376             func = getattr(handler, meth_name)
    377 
--> 378             result = func(*args)
    379             if result is not None:
    380                 return result

C:\Python27\lib\urllib2.pyc in http_error_302(self, req, fp, code, msg, headers)
    623         fp.close()
    624 
--> 625         return self.parent.open(new, timeout=req.timeout)
    626 
    627     http_error_301 = http_error_303 = http_error_307 = http_error_302

C:\Python27\lib\urllib2.pyc in open(self, fullurl, data, timeout)
    404         for processor in self.process_response.get(protocol, []):
    405             meth = getattr(processor, meth_name)
--> 406             response = meth(req, response)
    407 
    408         return response

C:\Python27\lib\urllib2.pyc in http_response(self, request, response)
    517         if not (200 <= code < 300):
    518             response = self.parent.error(
--> 519                 'http', request, response, code, msg, hdrs)
    520 
    521         return response

C:\Python27\lib\urllib2.pyc in error(self, proto, *args)
    442         if http_err:
    443             args = (dict, 'default', 'http_error_default') + orig_args
--> 444             return self._call_chain(*args)
    445 
    446 # XXX probably also want an abstract factory that knows when it makes

C:\Python27\lib\urllib2.pyc in _call_chain(self, chain, kind, meth_name, *args)
    376             func = getattr(handler, meth_name)
    377 
--> 378             result = func(*args)
    379             if result is not None:
    380                 return result

C:\Python27\lib\urllib2.pyc in http_error_default(self, req, fp, code, msg, hdrs)
    525 class HTTPDefaultErrorHandler(BaseHandler):
    526     def http_error_default(self, req, fp, code, msg, hdrs):
--> 527         raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
    528 
    529 class HTTPRedirectHandler(BaseHandler):

HTTPError: HTTP Error 503: Service Unavailable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T07:32:54.897

可悲的是，谷歌的 TOS 禁止自动查询。它几乎可以肯定地检测到你“没有做好事”。

来源：[https ://support.google.com/websearch/answer/86640?hl=en](https://support.google.com/websearch/answer/86640?hl=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:22:25.007

暗中猜测：

您是否查看响应中是否有“Retry-After 标头”。503确实有可能。

[来自 RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.37)：

> 14.37 重试后
> 
> Retry-After response-header 字段可以与 503（服务不可用）响应一起使用，以指示服务预计对请求客户端不可用的时间。该字段也可以与任何 3xx（重定向）响应一起使用，以指示在发出重定向请求之前要求用户代理等待的最短时间。该字段的值可以是响应时间之后的 HTTP 日期或整数秒数（十进制）。Retry-After = "Retry-After" ":" (HTTP-date | delta-seconds)
> 
> 其使用的两个示例是 Retry-After: Fri, 31 Dec 1999 23:59:59 GMT Retry-After: 120
> 
> 在后一个示例中，延迟为 2 分钟。

# database-design - 无法分解此与 BCNF 的关系

> ID：15506661
> 
> 赞同：0
> 
> 时间：2013-03-19T17:41:53.903
> 
> 标签：database-design, relational-database, normalization

我有关系

```
R = { A, B, C, D, E, F, G, H, I } 
```

和功能依赖

```
F ={
ABC -> DE
E -> C
AB -> F
C -> G
F -> H
H -> IJ
F -> B
} 
```

我可以做简单的 BCNF 分解，但我不能分解它。我有 ABC 作为唯一的候选键。然后我把它分成两个关系来摆脱第一个破坏 BCNF 的 FD `E -> C`，给我关系

```
{ A, B, D, E, F, G, H, I, J } and { E, C } 
```

但是现在我马上就失去了第一个关系的候选键。那么这是否意味着我现在必须为第一个关系找到一个新的候选键，然后继续分解它的过程，直到我们没有违反 BCNF 的关系？有人可以告诉我如何进行这种分解吗？

**编辑：**

好的，这就是我继续做的事情：

我目前有`{ A, B, D, E, F, G, H, I, J }`和`{ E, C }`

我为更大的关系找到了一把新钥匙。这个新钥匙是`ABDEG`？

然后我通过在违反 BCNF 的地方拆分关系来继续分解。以下是我采取的步骤：

```
{ A, B, D, E, F, G, H, I, J } // { E, C }

{ A, B, D, E, G, H, I, J } // { AB, F } // { E, C }

{ A, B, D, E, G, H, J } // { H, I } // { AB, F } // { E, C }

{ A, B, D, E, G, H } // { H, J } // { H, I } // { AB, F } // { E, C } 
```

所以最后一行是我的最终结果。这似乎是在BCNF？我的答案是否正确，我是否正确分解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:24:26.707

我没有检查你的结果，但如果目的是“分解成 BCNF”，那么你的结果可能确实是正确的。

这并不意味着您的分解也是最**合适**的选择。

一个设计在 BCNF 中并不意味着它本身就是最好的。

获得最**合适**分解的最佳机会是从“交织”最少的 FD 开始。例如，H->IJ 是一个很好的候选者，因为在其他任何地方都没有提到 I 和 J。

因此，您会得到 {ABCDEFGH} 和 {HIJ}，它们各自的 FD 从原始集合“继承”。

现在另一个好的候选是 C->G。所以你得到 {ABCDEFH} {CG} 和 {HIJ}。

现在另一个好的是 F->H。所以你得到 {ABCDEF} {FH} {CG} 和 {HIJ}。

不，你只剩下讨厌的 FD ABC->DE E->C AB->F F->B。现在你**必须**选择其中之一，并接受其他一些 FD 变得无法表达的后果。

但这并不意味着您的解决方案是**错误**的（就获得 BCNF 结果而言）。

# php - Magento 扩展布局更新：在 config.xml 中不可能？

> ID：15506666
> 
> 赞同：0
> 
> 时间：2013-03-19T17:42:12.267
> 
> 标签：php, xml, magento

当扩展必须进行布局更新时，以下内容对我不起作用：

**命名空间/模块/etc/config.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<config> 
    <modules>
        <Namespace_Modulename>
            <version>0.0.1</version>
        </Namespace_Modulename>
    </modules>
    <frontend>
        <layout>
            <updates>
                <catalog_product_view>
                    <reference name="content">
                        <remove name="product.info.upsell" />
                    </reference>
                </catalog_product_view>
            </updates>
        </layout>
    </frontend>
</config> 
```

但这确实有效：

**命名空间/模块/etc/config.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<config> 
    <modules>
        <Namespace_Modulename>
            <version>0.0.1</version>
        </Namespace_Modulename>
    </modules>
    <frontend>
        <layout>
            <updates>
                <Namespace_Modulename>
                    <file>modulename.xml</file>
                </Namespace_Modulename>
            </updates>
        </layout>
    </frontend>
</config> 
```

然后我只是把相关的布局更新放在：*app/design/frontend/base/default/layout/modulename.xml*

我本可以发誓我前段时间在教程中读到了方法#1，但现在我再也找不到它了。那个教程是错误的吗？方法#2是正确的方法吗？*将我的布局更新文件放入前端/基础*似乎有点笨拙......有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:09:44.703

如果你读到它是

1.  对于古代版本的 Magento

2.  明显不正确

布局更新 XML 文件是一个独立于全局`config.xml`配置树的系统。布局 XML 已加载

```
#File: app/code/core/Mage/Core/Model/Layout/Update.php
public function getFileLayoutUpdatesXml($area, $package, $theme, $storeId = null)
{
    if (null === $storeId) {
        $storeId = Mage::app()->getStore()->getId();
    }
    /* @var $design Mage_Core_Model_Design_Package */
    $design = Mage::getSingleton('core/design_package');
    $layoutXml = null;
    $elementClass = $this->getElementClass();
    $updatesRoot = Mage::app()->getConfig()->getNode($area.'/layout/updates');
    Mage::dispatchEvent('core_layout_update_updates_get_after', array('updates' => $updatesRoot));
    $updateFiles = array();
    foreach ($updatesRoot->children() as $updateNode) {
        if ($updateNode->file) {
            $module = $updateNode->getAttribute('module');
            if ($module && Mage::getStoreConfigFlag('advanced/modules_disable_output/' . $module, $storeId)) {
                continue;
            }
            $updateFiles[] = (string)$updateNode->file;
        }
    }
    // custom local layout updates file - load always last
    $updateFiles[] = 'local.xml';
    $layoutStr = '';
    foreach ($updateFiles as $file) {
        $filename = $design->getLayoutFilename($file, array(
            '_area'    => $area,
            '_package' => $package,
            '_theme'   => $theme
        ));
        if (!is_readable($filename)) {
            continue;
        }
        $fileStr = file_get_contents($filename);
        $fileStr = str_replace($this->_subst['from'], $this->_subst['to'], $fileStr);
        $fileXml = simplexml_load_string($fileStr, $elementClass);
        if (!$fileXml instanceof SimpleXMLElement) {
            continue;
        }
        $layoutStr .= $fileXml->innerXml();
    }
    $layoutXml = simplexml_load_string('<layouts>'.$layoutStr.'</layouts>', $elementClass);
    return $layoutXml;
} 
```

虽然这段代码确实获得了对`<updates/>`节点的引用

```
$updatesRoot = Mage::app()->getConfig()->getNode($area.'/layout/updates'); 
```

这仅用于汇总文件列表

```
foreach ($updatesRoot->children() as $updateNode) {
    if ($updateNode->file) {
        $module = $updateNode->getAttribute('module');
        if ($module && Mage::getStoreConfigFlag('advanced/modules_disable_output/' . $module, $storeId)) {
            continue;
        }
        $updateFiles[] = (string)$updateNode->file;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:11:30.360

[`Mage_Core_Model_Layout_Update::getFileLayoutUpdatesXml()`(link)](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/Layout/Update.php#L409)是为了配置视图而合并基于文件的布局更新的方法，它不具备从配置 DOM 合并布局更新指令的逻辑。

# foursquare - 与签到共享的照片

> ID：15506669
> 
> 赞同：0
> 
> 时间：2013-03-19T17:42:15.030
> 
> 标签：foursquare

我正在使用 checkins/CHECKIN_ID API 来检索有关特定签入的数据。即使它应该始终存在，也没有照片对象，如果用户已经拍摄了它......这是当前问题还是我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:50:43.457

你确定你正在检查的签到有照片吗？如果签到的创建者没有拍照，则它不会出现在响应中。此外，请确保 API 请求是从能够查看签入的用户帐户发出的。

# jsp - Spring：创建名称为“controller.HelloController#0”的 bean 时出错 设置属性值时出错

> ID：15506673
> 
> 赞同：0
> 
> 时间：2013-03-19T17:42:36.417
> 
> 标签：jsp, tomcat, spring-mvc

一直在试图解决这个问题，我相信我的 setter 和 getter 没问题。从[这里开始](http://netbeans.org/kb/docs/web/quickstart-webapps-spring.html)

这是我的错误

```
javax.servlet.ServletException: Servlet.init() for servlet dispatcher threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)
root cause

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'controller.HelloController#0' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'helloService' of bean class [controller.HelloController]: Bean property 'helloService' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1361)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:467)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)
root cause

org.springframework.beans.NotWritablePropertyException: Invalid property 'helloService' of bean class [controller.HelloController]: Bean property 'helloService' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
    org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1052)
    org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:921)
    org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
    org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1358)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:467)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.21 logs. 
```

这是我的 dispathcer-servlet

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<bean class="controller.HelloController" p:helloService-ref="helloService"/>
    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

    <!--
    Most controllers will use the ControllerClassNameHandlerMapping above, but
    for the index controller we are using ParameterizableViewController, so we must
    define an explicit mapping for it.
    -->
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="index.htm">indexController</prop>
            </props>
        </property>
    </bean>

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <!--
    The index controller.
    -->
    <bean name="indexController"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          p:viewName="index" />

</beans> 
```

这是 HelloController

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package controller;

import java.net.BindException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.SimpleFormController;
import service.HelloService;

/**
 *
 * @author ahmed
 */
public class HelloController extends SimpleFormController {

    public HelloController() {
        //Initialize controller properties here or 
        //in the Web Application Context

        setCommandClass(Name.class);
        setCommandName("Name");
        setSuccessView("helloView");
        setFormView("nameView");
    }

    //Use onSubmit instead of doSubmitAction 
    //when you need access to the Request, Response, or BindException objects

   //@Override
protected ModelAndView onSubmit(
            HttpServletRequest request,
            HttpServletResponse response,
            Object command,
            BindException errors) throws Exception {

        Name name = (Name) command;
        ModelAndView mv = new ModelAndView(getSuccessView());
        mv.addObject("helloMessage", HelloService.sayHello(name.getValue()));
        return mv;
   }

} 
```

最后 Name.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package controller;

/**
 *
 * @author ahmed
 */
public class Name {
   private String value;

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

如果我需要显示代码的任何其他部分，请告诉我，我现在找了几天，找不到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:59:29.487

根据中的错误，您的班级 中`dispatcher-servlet.xml`不应该有一个`setHelloService`方法吗？`HelloController`

哦，是的，我认为这是问题所在，我刚刚查看了您链接的教程，请查看第 15 点。

# c++ - 从方法返回变体类型

> ID：15506678
> 
> 赞同：0
> 
> 时间：2013-03-19T17:42:56.897
> 
> 标签：c++, templates, trailing-return-type

所以我有一个资源管理器，它基本上是一个 void* 对象的字典，其中包含一些描述其类型的元数据（基本元数据，如字符串）。我现在有一个返回对象的模板方法：

```
class ResourceManager
{
    template<typename Type>
    Type RetrieveResource( Text name );
}; 
```

我的问题是如何使此方法*不是*模板方法？我已经对尾随返回类型和使用那种时髦的语法进行了一些研究。这个想法是，在某些时候，我将数据作为正确的类型，并且我想将其作为该类型返回，而无需在最终用户方面进行额外的转换。

我正在拍摄这样的东西：

```
auto RetrieveResource( Text name)
{
    return _dictionary[ name ]; // There's more to this, but imagine it returns varying type objects.
} 
```

我已经考虑过实现 Boost::Any 类型的对象，但它有点复杂（不是我懒惰）。我试图避免最终用户的模板语法。

任何帮助都会很棒。此外，我不能使用变体或任何（项目规范）之类的 Boost 库结构。提前致谢！

我知道我在这里要求魔法，但我认为这就是 S/O 的目的：寻找魔法。如果不可能，我理解。但是，如果有人有一个创新的解决方案，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:12:29.410

除了其他答案之外，您还可以执行以下操作，假设每个`Text`键都唯一地对应于具有已知不同的资源`Type`：

```
class BaseText
{
    // constructors that take const char *, std::string, etc.
    // .. whatever else you currently have in class Text
};

template<typename Type>
class Text : public BaseText
{
   // constructors that take const char *, std::string, etc.
}; 
```

然后更改`ResourceManager`为：

```
class ResourceManager
{
    template<typename Type>
    Type RetrieveResource( Text<Type> name );
}; 
```

请注意，这仍然需要编译时多态性，但这意味着只要您的用户可以获得正确类型的版本`Text<Type>`，他们就可以使用它来获得正确类型的资源，而无需`Type`再次显式提供参数，所以看起来就像一个普通的函数调用。

如果`Text<Type>`可以使用正确的类型静态声明和初始化一组可能的对象，这很容易，我不确定在你的情况下是否正确。相反，如果用户必须能够在运行时创建它们，那么他们将需要知道要创建的正确类型，所以它只是将问题推得更远：但是，如果相同的话，它可能会很方便`Text<Type>`对象将被一遍又一遍地使用。

请注意，如果您或客户需要将不同的`Text<Type>`对象一起存储在某种数据结构中，您也很不走运，因为这将需要某种类型的擦除（即向上转换为`BaseText`）。因此，这在某种程度上是一种专门的解决方案，但它可能很有用，具体取决于事物的结构（如果没有看到更多代码，我真的无法知道）。

**编辑**：根据下面的评论，对象的类型似乎是由客户端在插入对象时确定的，因此您可以执行以下操作：

```
class ResourceManager
{
    BaseText PutResource( const BaseText& name, BaseResource& resource );

    template<typename Type>
    Text<Type> PutResource( const BaseText& name, Type& resource );

    BaseResource& RetrieveResource( const BaseText& name );

    template<typename Type>
    Type& RetrieveResource( const Text<Type>& name );
}; 
```

因此，客户端需要保留唯一的类型化密钥对象，以便稍后检索资源；如果他们选择通过向上转换回类型来擦除它`BaseText`，那么他们将负责正确恢复类型信息，方法是在检索之前向下转换密钥或在之后向下转换资源。

请注意，这只是您无论如何都必须做的事情之外的一个额外选项：如果您想使用非特定类型的键提供对资源的访问，唯一的方法是返回非特定资源type （即`BaseResource`, `boost::any`, `boost::variant<...>`, 或它们的道德等价物之一。）但是，创建特定于类型的子类`BaseText`允许您使用完全相同的语法（即不需要显式模板参数）获得正确类型的资源。此外，这允许以下用法：

```
// tree is a resource of type `Tree`
auto key = manager.PutResource("Tree01", tree);

// ...

const BaseText& basekey = key; // lose type information

// ...

// these are all equivalent
Tree& tree = dynamic_cast<Tree&>(manager.RetrieveResource("Tree01"));
Tree& tree = dynamic_cast<Tree&>(manager.RetrieveResource(basekey));
Tree& tree = manager.RetrieveResource(key); // no casts required
Tree& tree = manager.RetrieveResource<Tree>("Tree01") 
```

在没有这些模板化重载的情况下，这些`dynamic_cast`版本基本上是您需要做的，但其他两个版本是除此之外的额外选项，您可以使用这种方法而无需任何运行时成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:45:35.340

恐怕这会模棱两可。您[不能通过返回类型重载，](https://stackoverflow.com/questions/9568852/overloading-by-return-type)也不能`auto`用作返回类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:57:30.463

我认为，最好的选择是返回一些基类指针。缺点是你强迫任何人从中派生，但是使用基类的智能架构可能会有更多的优点

# iphone - iPhone SDK：裁剪掉 UIImageView 的未使用部分

> ID：15506683
> 
> 赞同：0
> 
> 时间：2013-03-19T17:43:11.423
> 
> 标签：iphone, ios, ios5, xcode4, uiimageview

我正在做一个应用程序，在我的例子中，一个物体根据倾斜移动，一个足球。我试图检测足球何时在使用 UIImageView 显示的线上。为了检测足球是否在线，我正在使用这段代码。

```
 if ([line pointInside: [self.view convertPoint:buttonNewCenter toView: line] withEvent:nil]) {
    NSLog(@"inside");
} 
```

此代码有效，但是只要球在图像视图内而不是实际线，如图所示：![在不应该在图像视图内检测到球](../Images/86c10d7af29beb77e5b3c24e0b8e4622.png)

所以，我的问题是是否有可能检测到球线内的球，并且当它不在线上并且仍然在图像视图中时不会被检测到。我曾想过通过裁剪图像视图的未使用部分来解决这个问题，但我不确定这是否可能。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:39:54.453

我不建议这样做。我建议使用“瓷砖”，或者像一个多边形，它会告诉你它何时进入或没有（因为该区域似乎是弯曲的）。像：[http ://alienryderflex.com/polygon/](http://alienryderflex.com/polygon/)

# actionscript-3 - 使用 AS3 检测虚拟机

> ID：15506689
> 
> 赞同：1
> 
> 时间：2013-03-19T17:43:22.740
> 
> 标签：actionscript-3, virtual-machine

是否可以从 Action Script3（或更低版本）的代码中检测到我在虚拟机下运行？

我知道有 Capabilities 类提供有关系统的一些信息，但它似乎并不能完全满足我的需求。

也许任何地方都没有这样的标志，但我可以依靠一些间接信息来了解环境是虚拟化的吗？

问候，谢尔盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:31:41.943

我怀疑检查这一点会很容易，尤其是在浏览器插件沙箱这样的孤立环境中。现代虚拟机可以非常精确地模拟到 CPU 寄存器的所有内容，即使您可以访问常规的操作系统 API，通常也很难检测到虚拟机。而在浏览器中运行时，您甚至没有（使用 AIR，您可以编写本机扩展）。您可以查看[此线程](https://stackoverflow.com/questions/154163/detect-virtualized-os-from-an-application)以获取一些可能有用的信息。

# algorithm - 来自两个不同图像的点匹配算法

> ID：15506690
> 
> 赞同：5
> 
> 时间：2013-03-19T17:43:26.053
> 
> 标签：algorithm, sorting, matching, point, stereo-3d

我正在寻找一种方法或算法，它可以让我识别和配对来自两个不同图像的点集，以达到立体视觉的目的。 ![图片](../Images/ffe95da913825121ea4eb2dec0331415.png)

附图展示了我目前所拥有的：2 个相机在 Y 轴上对齐并在 X 轴上略微偏移，看着一组点。我能够跟踪并获取两个相机图像（IMG0 和 IMG1）上每个点的 2D 位置。

因此，我有两个二维坐标列表：

```
L0 = { a0, a1, a2, a3, a4, a5, a6 }
L1 = { b0, b1, b2, b3, b4, b5, b6 } 
```

现在，为了进行三角测量以获得每个点的 3D 位置，我需要知道图像 IMG1 上的哪个点对应于 IMG0 上的哪个点。两台相机都看到完全相同的一组点，具有相同的整体形状，但显然，由于轻微的变形和相机在水平方向上的偏移，二维坐标在图像和另一张图像之间不匹配。

理想情况下，我正在寻找的点匹配算法会产生一个列表，例如：

```
List = {a0-b0, a1-b1, a2-b2,...} 
```

只要我确定每个点都与第二张图像中的正确点配对，列表的顺序并不重要。

我一直在看几篇介绍立体映射算法的论文，但我没有发现任何与我的问题相关的内容，因为大多数算法都基于重图像特征识别，这不适合我想要快速处理真实所有内容的情况-时间。我似乎找到的最接近的解决方案是[这里提出](http://greatpanic.com/pntmatch.html)的点匹配算法，但这对我的问题来说似乎太重了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:56:58.473

首先，您应该确保您了解[极线几何](http://en.wikipedia.org/wiki/Epipolar_geometry)的基本概念，尤其是**极线**的概念。

简而言之：假设您有一个 3D 点投影到相机图像中的`P`2D 点。现在你有了第二个摄像头，调用它，你想找到in的图像。极线几何告诉您，给定图像的可能位置仅限于一条线，称为极线。它还告诉您（以及如何）您可以使用所谓的基本矩阵计算这条线并校准您的相机。`q``A``B``P``B``P``B``q``q`

对于您的问题，这具有以下含义：

让我们`q`成为 list 中的一个点`L0`。

*   如果您的列表中有**一个点**`L1`位于第二张图像的核线上`q`，那么这是 的正确对应关系`q`。
*   如果核线上有几个点，那么你的问题不能用给定的信息解决。在这种情况下，您需要对点在 3D 中的分布进行启发式假设，因为对于每对`q`与核线上的点，您都会获得一个可能的 3D 点。

如果您的相机仅沿 X 轴偏移，并且它们的方向相同（即图像平面平行），那么这是您的幸运日：在这种特殊的相机配置中，极线是水平的，即对于一个`(x,y)`点极线是具有任意X坐标和Y坐标的所有点的线`y`。

请注意，在实践中，您还面临一个问题，即由于测量误差和数值问题，点不太可能完全位于核线上。

# python - 为什么定义函数后出现语法错误？

> ID：15506706
> 
> 赞同：0
> 
> 时间：2013-03-19T17:43:50.537
> 
> 标签：python

我有这段代码来定义一个函数

```
def f(Frequency,Omegahot,Beta,Omegacold,Thot,Tcold):
    C=300000000
    k=1.38E-23
    h=6.062E-34
    return(Omegahot*numpy.power(Frequency,Beta))*((2*h*numpy.power(Frequency,3)/(C**2)))*(1/(numpy.exp(h*Frequency/(k*Thot))-1)) + (Omegacold*numpy.power(Frequency,Beta)*((2*h*numpy.power(Frequency,3)/(C**2)))*(1/(numpy.exp(h*Frequency/(k*Tcold))-1))

xdata=[1,2,3,4,5]   
popt, pcov = curve_fit(f,xdata,fluxs,p0=None,)
print popt 
```

但是我在 xdata=[1,2,3,4,5] 行遇到语法错误我在做什么错

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:44:54.370

上一行的括号不平衡，在最后添加一个修复

```
return (Omegahot*numpy.power(Frequency,Beta))*((2*h*numpy.power(Frequency,3)/(C**2)))*(1/(numpy.exp(h*Frequency/(k*Thot))-1)) + (Omegacold*numpy.power(Frequency,Beta)*((2*h*numpy.power(Frequency,3)/(C**2)))*(1/(numpy.exp(h*Frequency/(k*Tcold))-1))) 
```

但是要弄清楚它们真正属于*哪里*，公式有点混乱。

您真的想将该公式拆分为适合 80 个字符行并使用临时变量的内容：

```
temp1 = Omegahot * numpy.power(Frequency, Beta)
temp2 = 2 * h * numpy.power(Frequency, 3) / (C ** 2)
temp3 = 1 / (numpy.exp(h * Frequency / (k * Thot)) - 1)
temp4 = Omegacold * numpy.power(Frequency, Beta) *
temp5 = 1 / (numpy.exp(h * Frequency / (k * Tcold)) - 1)
return (temp1 * temp2 * temp3) + (temp4 * temp2 * temp6) 
```

但有更好的变量名。我已经设法通过将其`temp2`分解为更小的块来从公式中删除重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:59:50.863

可读性很重要。这是重写函数的一种方法，它更具可读性。通过预先计算出现不止一次的表达式，您将需要更少的括号级别，并使计算完成得更快一点。

```
import numpy as np
def f(Frequency, Omegahot, Beta, Omegacold, Thot, Tcold, exp=np.exp, power=np.power):
    C = 300000000
    k = 1.38E-23
    h = 6.062E-34
    fb = power(Frequency, Beta)
    f3 = power(Frequency, 3)
    C2 = C ** 2
    C3 = fb * 2 * h * f3 / C2
    hF = h * Frequency
    return ((Omegahot * C3 / (exp(hF / (k * Thot)) - 1))
            + (Omegacold * C3 / (exp(hF / (k * Tcold)) - 1)))) 
```

# iphone - iPhone/iPad 浏览器模拟器？

> ID：15506708
> 
> 赞同：86
> 
> 时间：2013-03-19T17:43:54.117
> 
> 标签：iphone, ios, xcode, ipad, ios-simulator

我需要查看我的网页在我的 Windows 桌面上的 iPhone 和 iPad 上的外观。这可能吗？

快速搜索了一些 iPhone 测试站点，这似乎是我想要的。但是，当我与自己的 iPhone 进行比较时，它们非常不准确！我真的需要尽可能接近 100% 准确的东西。

XCode 有 100% 准确的模拟器吗？我知道我需要一台 Mac 来运行 XCode ......

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-19T17:47:05.670

Xcode 附带的 iPhone/iPad 模拟器包括 Safari。如果您在模拟器中运行 Safari，您可以查看您的网站，它应该与在真实设备上的显示相同。这可能适用于一般布局测试。但由于它是一个模拟器，因此可能并非每一个功能都与使用真正的 iOS 设备完全相同。

如果您正在编写一个网站并且您需要验证它在给定设备上看起来是否正确，那么您需要在该实际设备上测试您的网站。使用真实硬件进行测试是开展业务的一部分。

是的，你需要一台 Mac 来运行 Xcode。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-10-11T11:48:50.873

**编辑 2020：**其中大多数基本上只是为了测试分辨率的东西，其中一些甚至已经过时了，可悲的是，移动浏览器的开发与桌面（尤其是在 Apple 中）并驾齐驱，因此无法真正用这些“模拟”一部真正的手机在评论中提到。

为了模拟真实的手机，最好的选择通常是下载一个桌面应用程序，对于 Windows，通常是付费/免费增值的，在 Mac 上只需使用 Xcode （但我怀疑 Mac 用户正在寻找这个 Q/A）。

我最近发现的免费增值在线易于使用的是[Appetize.io](https://appetize.io/)，它似乎真的根据网络渲染屏幕，但老实说我并没有真正深入研究它是否也有与真正的iOS相同的功能和相同的缺失功能。

# 忠告：
在发布之前，请务必在*真*机上进行测试:)

我遇到过这样的情况，即使是 iOS 本身在 2 部 iPhone 上的行为也不同......

# ~~我使用~~的在线模拟器/模拟器

 ~~## 1) 重组

精细的模拟器 -***与**将浏览器窗口调整为手机尺寸*不同- 与智能手机一样。不要因为您无法在 safari 中编辑地址栏而感到困惑 - 只需打开开发工具（通常是 F12）并将 iframe 的源 URL 重写为您的。
链接：[http ://recombu.com/mobile/interactive/ios7-demo/](http://recombu.com/mobile/interactive/ios7-demo/)

## 2) 响应模拟器

似乎像recombu一样工作，但是您可以通过文本输入直接打开url，并且可以放大/缩小。
链接：[http ://www.responsimulator.com/](http://www.responsimulator.com/)

## 3) 幻化

这个似乎处理网页，但它模拟旧 iPhone - 有时仍然很方便。
链接：[http ://transmog.net/iphone-simulator/mobile-web-browser-emulator.php](http://transmog.net/iphone-simulator/mobile-web-browser-emulator.php)

## X）谷歌它/互联网搜索它

始终使用谷歌（或其他互联网搜索器）来检查其他模拟器/模拟器和新版本。
与示例 google 搜索链接：
[https ://www.google.cz/search?q=online+iphone+emulator](https://www.google.cz/search?q=online%20iphone%20emulator)

# 浏览器设备模式

如果您打开浏览器的开发工具（在 Chrome F12 中），可能会有一个切换设备模式的选项（在 Chrome 中，它是左上角的智能手机小图标）。
[![chrome 设备模式图标](../Images/47e9649f4dcf5a5bab4fae8d1dad4e27.png)](https://i.stack.imgur.com/NXc2R.png)

选择此选项后，GUI 将更改并提供选择要模拟的设备的选项（在 Chrome 中位于顶部 - 选择选项“设备”），选择设备后，通常建议刷新页面以确保模拟器的准确性。
[![chrome 设备模式 - 设备选择选项](../Images/e2d5aeea3518ebcfc245ffeda29747d3.png)](https://i.stack.imgur.com/mam5e.png)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-02-26T03:53:37.760

[Chrome](https://developer.chrome.com/devtools/docs/device-mode)和[Firefox](https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_Mode)现在都有内置的模拟器。它们并不完美，但足够好，几乎可以让您在实际设备上进行测试之前完成所有工作。最好的部分是，如果您喜欢浏览器的开发人员工具（[Chrome](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation)、[Firefox](https://developer.mozilla.org/en-US/docs/Tools)），您可以在模拟时使用它们。

要获得模拟器：[Ctrl+Shift+M] 并选择要模拟的设备。您可能必须刷新页面，尤其是如果您有任何依赖于在页面加载时执行的脚本的内容。

[![谷歌浏览器模拟模式](../Images/2cd333d55cf910998891913a89cf8bbd.png)](https://i.stack.imgur.com/HWhVA.png)

[Internet Explorer](https://msdn.microsoft.com/en-us/library/dn255001(v=vs.85).aspx)还具有设备仿真模式。F12，然后 CTRL+8。它不像 Chrome 移动设备仿真那样直接，但允许您模拟地理位置：

[![Internet Explorer 仿真模式](../Images/04d6e5c3715a7c5092444b8b6ab6253c.png)](https://i.stack.imgur.com/gC8hs.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-08-02T08:42:12.430

现在我认为最好的模拟器是[https://app.crossbrowsertesting.com](https://app.crossbrowsertesting.com)

它具有真实尺寸和虚拟键盘（这是最重要的），缩放事件......

[https://appetize.io/demo](https://appetize.io/demo)也有同样的东西，但有时间限制。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-19T17:46:55.747

您可以在 Xcode 的模拟器中运行 safari，它应该可以准确地模拟 iPad 和 iPhone。市场上我听到好评的另一件事是[Ripple for chrome](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc?hl=en)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-19T17:50:54.307

在实际设备上进行测试是无可替代的。

真实设备具有更高的显示密度，这意味着像素更小。如果您不在真实设备上进行测试，您可能不会意识到您的设计包含太小而无法阅读的文本或太小而无法点击的按钮。

您用手指而不是鼠标使用真实设备。这意味着您点击的准确性要低得多，并且您正在点击的内容会被手指遮挡。如果您不在真实设备上进行测试，您可能不会意识到您在设计中引入了可用性问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-19T17:48:40.873

XCode[确实带有](http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/iOS_Simulator_Guide/GettingStartedwithiOSStimulator/GettingStartedwithiOSStimulator.html)适用于 iPad 和 iPhone 的模拟器。

您还可以[在 OS X 上使用 Safari 来调试](http://developer.apple.com/library/safari/#documentation/appleapplications/Reference/SafariWebContent/DebuggingSafarioniPhoneContent/DebuggingSafarioniPhoneContent.html#//apple_ref/doc/uid/TP40006515)iOS 设备上的网站。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-01T20:10:21.383

我一直在使用[Mobilizer](http://www.springbox.com/about/tools/)，这是一个很棒的~~免费应用~~

目前，它具有 Iphone4、Iphone5、Samsung Galaxt S3、Nokia Lumia、Palm Pre、Blackberry Storm 和 HTC Evo 的默认模拟。简单直接有效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-10T22:20:19.700

您可以在 Chrome 上使用[Ripple 模拟器。](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc?hl=en)

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-02-09T10:09:17.580

我使用具有 iphone 设备类型[的 mobile-browser-emulator](https://chrome.google.com/webstore/detail/mobile-browser-emulator/lbofcampnkjmiomohpbaihdcbjhbfepf?utm_source=chrome-app-launcher-info-dialog) chrome 插件。它实际上使用了用户代理和设备大小，在该设备上呈现基于响应的页面~~

# angularjs - 一页的多个angularjs应用程序

> ID：15506709
> 
> 赞同：0
> 
> 时间：2013-03-19T17:43:56.290
> 
> 标签：angularjs

我想为页面上的每个用户控件提供 Angular js 应用程序。这是一个好习惯吗？

如果不允许，那么隔离 angularjs 模块的正确方法是什么？

我之所以问，是因为我对 angular ui 的问题提出了疑问： [AngularUI sortable does not work for more than one applications](https://stackoverflow.com/questions/15486976/angularui-sortable-does-not-work-for-more-then-one-applications)

# sql - IIF 的 CASE 转换

> ID：15506710
> 
> 赞同：0
> 
> 时间：2013-03-19T17:43:57.700
> 
> 标签：sql, oracle, ms-access, oracle-sqldeveloper

我从 SQL（访问）开始

```
IIf(Len([CAT]) < 3, 
Left([CAT],1) & 0 & Right([CAT],1),
[CAT]) AS CAT1, 
[HD0] &

IIf([TABLE].[HD1]<>"00",
" / " & [HD1_ABR],
Null) & 
IIf([HD2]<>"00",
" / " & [HD2_NAME],
Null) & 
IIf([HD3]<>"000",
" / " & [HD3_NAME],
Null) & 
IIf([HD4]<>"00",
" / " & [HD4_NAME]) AS NAME, 
```

并做了Oracle（Sql Developer）

```
Case
When length(cat) < 3
Then SubStr(cat,1,1) || '0' || SubStr(cat,-1,1)
Else cat
End cat1,hd0
Case
When TABLE <>"00"
then " / "
else HD1_ABR,null 
```

当我在 SQLDev 中运行查询时，在命令行出现错误错误：9 列：4 错误报告：SQL 错误：ORA-00923：在预期的位置找不到 FROM 关键字 00923。00000 -“在预期的位置找不到 FROM 关键字”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:49:14.110

MS Access syntax is entirely different to Oracle syntax. No square brackets, and different names for the SQL functions. [http://docs.oracle.com/cd/E11882_01/server.112/e17118/functions.htm#SQLRF006](http://docs.oracle.com/cd/E11882_01/server.112/e17118/functions.htm#SQLRF006)

```
 Case
   When length(cat) < 3
   Then SubStr(cat,1,1) || '0' || SubStr(cat,-1,1)
   Else cat
 End cat1 
```

# wpf - WCF ServiceHost 受限用户 netsh/httpcfg

> ID：15506711
> 
> 赞同：2
> 
> 时间：2013-03-19T17:44:00.033
> 
> 标签：wpf, wcf, user-permissions, netsh

我在 WPF 应用程序中使用自托管服务来完成某些任务。服务主机在运行时启动，其基地址为`http://localhost:Whatever-port-is-free-at-runtime`. 当用户具有管理员权限时，这可以正常工作，但当应用程序由受限用户运行时会出现问题。

我在网上找到了一些建议，建议保留 url 使用`netsh/httpcfg`这对管理员用户来说效果很好，但对受限用户来说却失败了，因为他们可能无权使用这些工具来保留 url。由于端口号直到运行时才知道，因此 url 保留命令在逻辑上只能在运行时运行，这意味着该进程将由没有执行命令的权限的受限用户启动。我这样想对吗？

我想知道是否有合适的工作？另外，我想知道受限用户是否可以打开本地托管的 WCF 服务，因为如果受限用户不能这样做，解决上述问题将毫无意义。

[这个问题完美的描述了我的第一期网址预约](https://stackoverflow.com/questions/8816493/add-ports-with-netsh-in-wcf-as-domain-admin-without-admin-privileges)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:54:53.533

在 WCF 中，HTTP 和 HTTPS 绑定使用 HTTP.sys 来为特定的 WCF 服务保留所需的 URL，这与 IIS 自身在为其管理的网站进行绑定时所遵循的路径相同。这解释了为什么执行 HTTP/HTTPS 绑定的进程需要在提升模式下运行。

话虽如此，我会以两种不同的方式解决您的问题：

选项 1：**使用不同类型的绑定**。例如，[NetTcpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.nettcpbinding.aspx)和[NetNamedPipesBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx)*通常*不需要管理权限：这是迄今为止最简单的方法。

选项 2：**在安装时设置所需的命名空间预留。**这样，您可能会要求您的用户以提升模式执行安装，然后允许受限制的帐户运行它。在执行初始安装/保留时，您还可能会找到一个可用的端口来使用（并可能将其保存在配置文件中以供以后重用）。

# ruby-on-rails - I18n localize Activerecord 模型值 Date strftime On Rails 控制台

> ID：15506713
> 
> 赞同：0
> 
> 时间：2013-03-19T17:44:00.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, rails-console, rails-i18n

所以我正在使用 I18n 印度尼西亚本地化。

我在 config/locales 上有一个 id.yml。

我想在保存之前将 created_at （日期时间）的值存储到代码（字符串）和月份转换到我的语言环境..

```
self.code = account.created_at.strftime("%d%B%Y").to_s 
```

我试图看到翻译在 Rails 控制台中有效。

所以我尝试了：

```
irb(main):003:0> account = Account.last.created_at
   ←[1m←[36mAccount Load (35.0ms)←[0m  ←[1mSELECT "public"."accounts".* FROM "pub
lic"."accounts" ORDER BY "public"."accounts"."id" DESC LIMIT 1←[0m
=> Sat, 16 Mar 2013 10:07:37 UTC +00:00
irb(main):004:0> account.strftime("%d%B%Y").to_s
=> "16March2013"
irb(main):007:0> I18n.default_locale
=> :id
irb(main):008:0> I18n.t account.strftime("%d%B%Y").to_s
=> "translation missing: id.16March2013"
irb(main):006:0> I18n.l account.strftime("%d%B%Y").to_s
#<Class:0x6fc52c8>: Object must be a Date, DateTime or Time object. "16March2013
" given. 
```

如何本地化月份值？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:26:30.857

根据[rails 指南](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)，日期不应使用`#translate`方法 ( `I18n.t`)本地化，而应使用`#localize`方法( ) 本地化`I18n.l`。

我还建议您使用[rails-i18n gem](https://github.com/svenfuchs/rails-i18n)，其中包含常见的翻译，例如月份名称。

如果您仍然无法找到解决方案，请告诉我。

# c# - 如何使用 C# 任务并行库和 IProducerConsumerCollection 实现通用回调？

> ID：15506718
> 
> 赞同：2
> 
> 时间：2013-03-19T17:44:26.917
> 
> 标签：c#, .net, generics, task-parallel-library, blockingcollection

我有一个向基于 Web 的 API 提交请求的组件，但必须限制这些请求，以免违反 API 的数据限制。这意味着所有请求都必须通过一个队列来控制它们提交的速率，但它们可以（并且应该）并发执行以实现最大吞吐量。每个请求必须在将来某个时间点完成时将一些数据返回给调用代码。

我正在努力创建一个很好的模型来处理数据的返回。

使用 a`BlockingCollection`我不能只`Task<TResult>`从`Schedule`方法中返回 a，因为入队和出队过程位于缓冲区的两端。因此，我创建了一个`RequestItem<TResult>`包含表单回调的类型`Action<Task<TResult>>`。

这个想法是，一旦从队列中拉出一个项目，就可以使用已启动的任务调用回调，但是到那时我已经丢失了泛型类型参数，我只能使用反射和各种讨厌的东西（如果它是甚至可能）。

例如：

```
public class RequestScheduler 
{
    private readonly BlockingCollection<IRequestItem> _queue = new BlockingCollection<IRequestItem>();

    public RequestScheduler()
    {
        this.Start();
    }

    // This can't return Task<TResult>, so returns void.
    // Instead RequestItem is generic but this poses problems when adding to the queue
    public void Schedule<TResult>(RequestItem<TResult> request)
    {
        _queue.Add(request);
    }

    private void Start()
    {
        Task.Factory.StartNew(() =>
        {
            foreach (var item in _queue.GetConsumingEnumerable())
            {
                // I want to be able to use the original type parameters here
                // is there a nice way without reflection?
                // ProcessItem submits an HttpWebRequest
                Task.Factory.StartNew(() => ProcessItem(item))
                   .ContinueWith(t => { item.Callback(t); });
            }
        });
    }

    public void Stop()
    {
        _queue.CompleteAdding();
    }
}

public class RequestItem<TResult> : IRequestItem
{
    public IOperation<TResult> Operation { get; set; }
    public Action<Task<TResult>> Callback { get; set; }
} 
```

`Task<TResult>`当请求从缓冲区中拉出并提交给 API 时，如何继续缓冲我的请求但向客户端返回一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:12:10.473

首先，你*可以*`Task<TResult>`从中返回`Schedule()`，你只需要使用[`TaskCompletionSource`](http://msdn.microsoft.com/en-us/library/dd449174.aspx)它。

其次，为了解决泛型问题，您可以将所有内容隐藏在 (non-generic)`Action`中。在`Schedule()`中，使用完全符合您需要的 lambda 创建一个操作。然后消费循环将执行该操作，它不需要知道里面有什么。

第三，我不明白你为什么要`Task`在循环的每次迭代中开始一个新的。一方面，这意味着您实际上不会受到任何限制。

通过这些修改，代码可能如下所示：

```
public class RequestScheduler
{
    private readonly BlockingCollection<Action> m_queue = new BlockingCollection<Action>();

    public RequestScheduler()
    {
        this.Start();
    }

    private void Start()
    {
        Task.Factory.StartNew(() =>
        {
            foreach (var action in m_queue.GetConsumingEnumerable())
            {
                action();
            }
        }, TaskCreationOptions.LongRunning);
    }

    public Task<TResult> Schedule<TResult>(IOperation<TResult> operation)
    {
        var tcs = new TaskCompletionSource<TResult>();

        Action action = () =>
        {
            try
            {
                tcs.SetResult(ProcessItem(operation));
            }
            catch (Exception e)
            {
                tcs.SetException(e);
            }
        };

        m_queue.Add(action);

        return tcs.Task;
    }

    private T ProcessItem<T>(IOperation<T> operation)
    {
        // whatever
    }
} 
```

# windows-phone-7 - 是否有适用于 Windows Phone 7 的夏威夷的离线替代方案？

> ID：15506725
> 
> 赞同：2
> 
> 时间：2013-03-19T17:44:33.247
> 
> 标签：windows-phone-7, windows-phone, speech-recognition

好吧，我一直在寻找某种方法可以在**Windows Phone 7**上离线将语音翻译成文本，但我能找到的只有夏威夷，不幸的是它需要连接到互联网。我需要一些可以独立于连接工作的东西——离线。

是否有某种图书馆，微软的服务可以帮助我在离线模式下将语音翻译成文本？

对于 Windows Phone 7，夏威夷是否有离线替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:43:28.077

我不知道（对于 Windows Phone 7）。因为没有对语音 API 的低级访问，您最好的选择是实现自己的语音识别引擎（最大时间/努力） - 您可以直接访问麦克风输入，或者使用 Web 服务（最合理的选项）。

# r - 如果没有执行，如何“测试”一个函数并重复它？在 R 中

> ID：15506728
> 
> 赞同：1
> 
> 时间：2013-03-19T17:44:36.727
> 
> 标签：r, function, loops

我必须在元素列表上运行一个函数（在 R 中）。此函数通过最大似然估计模型的参数。要运行该函数，我需要给出一组初始参数值，然后由算法对其进行优化。

然后这是我的问题：

每次对列表的每个元素执行函数时，我都想随机化初始参数值。我用函数runif（）来做。但是，并非所有初始参数的组合似乎都有效（它给出了错误）。在这种情况下，我想在列表的那个元素上一次又一次地执行函数，尝试不同的起始值，直到我得到使函数工作的初始参数值的组合。只有这样循环才能继续到列表的下一个元素。

你能否给我一些关于如何解决这个问题的想法？

非常感谢提前。

蒂娜。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:02:55.303

将生成错误的调用包装在`try`or中`tryCatch`。

在伪代码中：

```
out <- vector(mode = "list", length = 10)
for (i in seq_along(out)) {
  res <- try(...function call here...)
  ## res contains the actual error msg in object of class "try-error"
  while(inherits(res, "try-error")) {
    res <- try(...function call here...)
  }
  out[[i]] <- res
} 
```

或使用`repeat`

```
out <- vector(mode = "list", length = 10)
for (i in seq_along(out)) {
  repreat {
    res <- try(...function call here...)
    if(!inherits(res, "try-error"))
      break
  }
  out[[i]] <- res
} 
```

~~您需要安排`out`为所需的长度或类型的对象来保存结果，您认为合适，以及是否需要记录函数是否失败（如上面的示例使用`NA`）取决于您的内容是做。如果没有明确的例子，那是你能得到的最好的。~~

阅读`?try`并查看`?tryCatch`，后者是一种更通用的捕获错误的机制。`try`本身是使用`tryCatch`例如实现的......

# javascript - 全面的条件错误消息

> ID：15506729
> 
> 赞同：0
> 
> 时间：2013-03-19T17:44:36.820
> 
> 标签：javascript, validation, error-handling, conditional

当谈到抛出综合错误时，我很好奇人们如何生成长 if 语句而不为每种可能性发出消息。

类似以下内容的好处：

```
if(typeof hello !== "undefined" && hello == 3){

} 
```

是不是这两个条件都是必要的。我尝试过使用数组和对象来进行 if 语句，如下所示。

```
var validate = [
    (typeof hello !== "undefined"),
    (hello == 3)
]; 
```

然后你可以使用类似`underscore`的`_.without()`函数来获取`true`vs`false`值并检查是否有任何错误。上面这个数组的问题是，如果 hello 未定义，则会出现错误。

```
var validate = [
    (typeof hello !== "undefined"),
    (typeof hello !== "undefined" && hello == 3)
]; 
```

所以我必须这样做，这是非常重复的。

到目前为止，这些例子还没有得到任何回应。我刚想出这个。

```
var valid = [
    (_.isObject(email)) ? false : "email is not object",
    (dotty.exists(email, "event")) ? false : "event does not exist",
    (email.event == "inbound") ? false : "event is not set to inbound",
    (dotty.exists(email, "ts")) ? false : "ts does not exist"
];
var errors = _.without(valid, false);
if(errors.length == 0) // no errors 
```

哪个更进步。

```
var valid = [
    (_.isObject(email)) ? false : "email is not object",
    (dotty.exists(email, "event")) ? false : "event does not exist",
    (dotty.exists(email, "event") && email.event == "inbound") ? false : "event is not set to inbound",
    (dotty.exists(email, "ts")) ? false : "ts does not exist"
];
var errors = _.without(valid, false);
if(errors.length == 0) // no errors 
```

但我仍然需要详细说明。

这一切都带来了下一个想法。

有两个是处理错误。

1.  出现错误时，在继续之前处理该错误
2.  显示所有错误

我更喜欢后者。

是否存在任何库来帮助复杂的 if 语句进行验证？

**更新**

因为下一个陈述与前一个无关，有时这很好，我陷入了一个疯狂的斜坡。

必须有一些方法来防止这种情况......

```
typeof email !== "undefined"
typeof email !== "undefined" && _.isObject(email))
typeof email !== "undefined" && _.isObject(email)) && dotty.exists(email, "event"))
typeof email !== "undefined" && _.isObject(email)) && dotty.exists(email, "event")) && email.event == "inbound" 
```

与阅读的便利性相比

```
typeof email !== "undefined"
_.isObject(email))
dotty.exists(email, "event"))
email.event == "inbound" 
```

我希望这更简单并且没有斜率。在下面的示例中，让我们说`email`is`undefined`但`color`is 并且它等于`yellow`。我很想看到以下错误报告

```
(typeof email !== "undefined") ? false : "no email",
(_.isObject(email)) ? false : "email isn't object",
(dotty.exists(email, "event")) ? false : "event not present",
(email.event == "inbound") ? false : "event not inbound",
(typeof color !== "undefined") ? false : "no color",
(color == "yellow") ? false : "color not yellow",

[
    "no email",
    "email isn't object",
    "event not present",
    "event not inbound",
    false,
    false       
] 
```

换句话说，我希望颜色不会作为错误返回，因为它是有效的。但我想返回所有其他错误。

还是我只需要：

```
[
    "no email",
    false,
    false
] 
```

如果`color`和`email`在哪里都未定义我不只是想看到：

```
[
    "no email"
] 
```

这是误导。我至少想看看

```
[
    "no email",
    "no color"
] 
```

或全部

```
[
    "no email",
    "email isn't object",
    "event not present",
    "event not inbound",
    "no color",
    "color not yellow"
] 
```

更多倾斜示例：

```
var valid = [
    (typeof email !== "undefined") ? false : "email is undefined", // halt the code 
    (typeof email !== "undefined" && _.isObject(email)) ? false : "email is not object",
    (typeof email !== "undefined" && dotty.exists(email, "event")) ? false : "event does not exist",
    (typeof email !== "undefined" && dotty.exists(email, "event") && email.event == "inbound") ? false : "event is not set to inbound",
    (typeof email !== "undefined" && dotty.exists(email, "ts")) ? false : "ts does not exist"
];
var errors = _.without(valid, false);
if(errors.length == 0) // no errors 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-08T02:52:33.253

根据评论中的建议，这`nools`是一个非常有趣的资源。

*   [https://github.com/doug-martin/nools](https://github.com/doug-martin/nools)
*   [https://en.wikipedia.org/wiki/Rete_algorithm](https://en.wikipedia.org/wiki/Rete_algorithm)

# android - 实施 Android Share

> ID：15506730
> 
> 赞同：0
> 
> 时间：2013-03-19T17:44:37.320
> 
> 标签：android, service, share

我已经看到很多人们从他们的应用程序中共享内容的例子，但我希望能够与我的应用程序共享内容，例如用户可以通过 Twitter 按下共享。有人知道任何教程或指南吗？您还可以与服务共享吗？将是一个很棒的功能：）谢谢

PS 我不想与 Twitter/Facebook 分享，我想从浏览器等应用程序分享到我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:53:55.013

您可以使用适用于[Facebook](http://developers.facebook.com/android/)和[Twitter](http://twitter4j.org/en/index.html)的 SDK / API，也可以使用`Intent.ACTION_SEND`在 Facebook 和 Twitter 上将文本和图像共享到墙上...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:11:21.513

你看过这些[开发者文档](http://developer.android.com/training/sharing/receive.html)吗？它有一个示例代码片段。

# version-control - 西班牙语的免费源代码存储库

> ID：15506731
> 
> 赞同：1
> 
> 时间：2013-03-19T17:44:38.420
> 
> 标签：version-control, localization

我正在寻找以西班牙语提供的在线源代码存储库。我对 BitBucket 和 GitHub 有一些经验，但他们的网站似乎都没有本地化为西班牙语。我发现用西班牙语工作的唯一网站是有偿的，因为我在 Peace Corps 的预算中，所以这是一个非首发。

背景：我正在与巴拉圭一所大学的一群学生一起工作，作为项目的一部分，我想教他们良好的开发实践，例如使用源代码控制和问题跟踪系统。然而，他们并不是都有很强的英语能力，所以很难使用他们母语中没有的任何东西。

是否有人建议其网站本地化为西班牙语的良好托管源代码控制系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:30:56.183

Bitbucket 刚刚推出了 beta 翻译，西班牙语翻译看起来相当不错，所以这就是我将使用的。

# javascript - AJAX 调用未将值传递给操作

> ID：15506732
> 
> 赞同：1
> 
> 时间：2013-03-19T17:44:39.993
> 
> 标签：javascript, ajax, asp.net-mvc, asp.net-mvc-4

我有一个包含以下内容的视图：

```
(...)

<div id="txtMan@(item.ManufacturerId)" hidden>
    @Html.TextBoxFor(modelItem => item.ManufacturerName, new { @id = "txtBoxMan"+item.ManufacturerId })
</div>
<td>
    <input class="btnSave" id="btnSave@(item.ManufacturerId)" type="button" value="Save" onclick="saveButtonPressed(@item.ManufacturerId);" hidden />
</td>

(...) 
```

对应的 JavaScript：

```
saveButtonPressed = function (id) {
    var newManName = $('#txtMan' + id).val();

    $.ajax({
        type: "POST",
        async: true,
        url: '/Admin/BrandConfigurationNameUpdate/' + newManName,
        dataType: "json",
        success: function () {
            alert('Added');
        }
    });
} 
```

和控制器：

```
public static void BrandConfigurationNameUpdate(string id)
{ 

} 
```

我的目标是将文本框值保存到数据库中。但是，我在我的控制器中放置了一个断点，它永远不会到达它。有什么建议吗？

编辑：我尝试过使用 GetJSON，但仍然无法正常工作。这是代码：

```
saveButtonPressed = function (id) {
    var newManName = $('#txtBoxMan' + id).val();
    alert(newManName);
    var URL = "~/Areas/Admin/Controller/Admin/BrandConfigurationNameUpdate/";

    $.getJSON(URL, { "id": id, "newManName": newManName }, function (data) {
        alert("finished");
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T18:02:03.000

您必须将`data`选项作为对象（键值对）传递，否则不会发布该值：

```
saveButtonPressed = function (id) {
    var newManName = $('#txtMan' + id).val();

    $.ajax({
        type: "POST",
        async: true,
        url: '/AdminController/BrandConfigurationNameUpdate/',
        data : {newManName : newManName},
        dataType: "json",
        success: function () {
            alert('Added');
        }
    });
} 
```

# breeze - 在 EntityManager 上使用 setProperties 不会创建 dataServiceAdapterInstance

> ID：15506738
> 
> 赞同：0
> 
> 时间：2013-03-19T17:44:57.710
> 
> 标签：breeze

在我的应用程序中，我们创建了一个`EntityManager`没有属性的实例，然后`setProperties`使用`EntityManager`. 但是我遇到了一个问题，当您使用`setProperties`并为其提供服务名称时，它不会在`dataServiceAdpterInstance`上设置属性`EntityManager`，这会导致所有查询失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:44:57.710

`this.dataServiceAdapterInstance = a_config.getAdapterInstance("dataService");`通过将*EntityManager*构造函数添加到*setProperties*方法中，我能够解决我的问题。

# javascript - 浏览器化后请求模块不回调

> ID：15506740
> 
> 赞同：0
> 
> 时间：2013-03-19T17:44:57.740
> 
> 标签：javascript, browserify

我正在尝试使用带有 browserify 的客户端库中的“请求”npm 模块，但我遇到了麻烦。

我拥有的代码非常标准，我正在从浏览器版本向服务器发布请求，例如：

```
request.post("/comments", { json: self }, function(err, resp, body) {
  // ... handle response here ...
}); 
```

但即使我在 Chrome 的网络选项卡中看到请求成功，我也没有收到请求的回调。有没有人见过这个？我需要用客户端版本的“请求”替换 node.js 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:13:23.380

`request`有很多依赖项，当我尝试浏览它时，我得到以下版本：

```
Error: module "dns" not found from "node_modules/request/node_modules/hawk/node_modules/sntp/lib/index.js" 
```

我建议以下之一：

*   [browser-request](https://github.com/iriscouch/browser-request) - 浏览器的端口`request`。
*   [hyperquest](https://github.com/substack/hyperquest) - 流式传输 http 请求。不是`request`提供的完整 api，但它的重量更轻。它不会为你解析响应体，我猜你想要的。

# java - JTable - AutoRowSorter - getColumnClass - 不工作

> ID：15506745
> 
> 赞同：1
> 
> 时间：2013-03-19T17:45:07.070
> 
> 标签：java, swing, model, jtable

在我的表模型中，我有一个`ArrayList<ArrayList<Object>>`包含我的数据的。

数据已从 .csv 文件中读取，每条记录的格式为：

> 7.68573749,-8.551567,21,276,AUD,AAA,7.224,1002,250,AUD Eurobonds Secondary,01/02/1996,T00001

我尝试使用适当的类型读取每个单元格，但例如，`7.68573749`不会使用扫描仪方法读取`nextDouble()`。所以默认情况下所有内容都被读入`String`。

所以我的 TableModel extends `AbstractTableModel`，我已经`getColumnClass`使用硬连线的 Class 类型数组覆盖了该方法，并`getColumnClass(int col)`返回了适当的 Class 等

不幸的是，我仍然无法将每个单元格设置为适当的类型，因为我收到错误：尝试使用 Double.Class 时无法将对象呈现为数字。

但是，我可以将所有内容设置为字符串或整数。

但即便如此，`AutoRowSorter`仍然只按字符串对每一列进行排序。

我可以发布代码，但是有很多代码，当被问到具体需要什么时，我可以提供它。

任何帮助都会很棒，谢谢，这里的最终目标是能够正确排序表数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:57:50.797

尝试将列的 Datatype 设置为 double ，然后使用 Double.valueOf() 将 String 数字转换为 Double 并同时将其插入 JTable

例子

```
for(int i=0;i<ss.length;i++)
  {
   table_model_object.addRow(i,Double.valueOf(ss[i]);
   } 
```

# linux - Amazon AMI tomcat7 tomcat-users.xml：找不到命令

> ID：15506746
> 
> 赞同：0
> 
> 时间：2013-03-19T17:45:12.537
> 
> 标签：linux, tomcat, amazon-web-services, tomcat7, amazon-ami

我在亚马逊 ec2 上创建了免费的 AMI linux 实例。我正在尝试设置 tomcat7，但似乎在设置 tomcat7 的管理员用户时遇到了问题。我已经安装了以下。

> sudo yum install tomcat7-webapps tomcat7-docs-webapp tomcat7-admin-webapps

当我尝试使用以下命令访问 xml 时。

> 须藤/etc/tomcat7/tomcat-users.xml

我收到以下错误，sudo: /etc/tomcat7/tomcat-users.xml: command not found

我承认，我是 linux 的新手，所以我不确定我是否遗漏了什么。有人会碰巧知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:02:38.720

`sudo`只会升级 privs。您没有提供使用 sudo 的命令。也许你打算这样做

```
sudo vi /etc/tomcat7/tomcat-users.xml 
```

# android - 附加的依赖属性

> ID：15506748
> 
> 赞同：1
> 
> 时间：2013-03-19T17:45:17.147
> 
> 标签：android, design-patterns

我用 android 开发不到两个月，我认为这是一个很棒的工具，现在我已经开始我的项目来扩展一些视图以添加新功能（例如：使用自定义字体），但我有一个问题，有一个 WPF 功能（.NET 框架）在这种情况下非常有用，无需扩展类。

这称为[Attached Property](http://msdn.microsoft.com/en-us/library/ms749011.aspx)，基本上是将新属性添加到现有类的能力。

### 普通安卓示例

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:my="http://schemas.android.com/apk/res/com.package.custom"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical">

    <com.package.CustomTextView  
        android:layout_width="fill_parent" 
        android:text="@string/hello" 
        android:layout_height="wrap_content" 
        android:id="@+id/TextView01" 
        android:textColor="@colors/text_color"
        my:fontface="fonts/my-custom-font.ttf"
        my:autosize="true"/>

    <com.package.CustomButton
        android:id="@+id/btn_continue"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="@string/text_btn"
        my:fontface="fonts/my-custom-btn-font.ttf" /> 
</LinearLayout> 
```

定期添加这样的功能必须扩展 TextView 类，但使用附加属性可以做到这一点

### 附加属性示例

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:my="http://schemas.android.com/apk/res/com.package.custom"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical">

    <!-- there is no need to extend the class -->
    <TextView  
        android:layout_width="fill_parent" 
        android:text="@string/hello" 
        android:layout_height="wrap_content" 
        android:id="@+id/TextView01" 
        android:textColor="@colors/text_color"
        my:fontface="fonts/my-custom-font.ttf"
        my:autosize="true"/>

    <Button
        android:id="@+id/btn_continue"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="@string/text_btn"
        my:fontface="fonts/my-custom-btn-font.ttf" /> 
</LinearLayout> 
```

这节省了很多工作，因为我们不仅可以与 TextView 一起使用，还可以与其他类一起使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:27:05.490

抱歉，您不能发明用于现有类的新属性并使用标准的膨胀机制。对于初学者来说，没有地方可以将这些数据存储在`View`.

话虽如此，没有什么能阻止您使用第二个 XML 块中的语法。只是`LayoutInflater`会忽略无法识别的东西（并且构建工具可能会抱怨）。你可以：

*   尝试克隆`LayoutInflater`到您自己的应用程序中，并使用与您的自定义属性相关的其他功能来增强它，或者

*   自己将布局 XML 加载`Resources`到 中`XmlResourceParser`，遍历它以查找所有自定义属性，并将它们应用于由常规扩展的小部件`LayoutInflater`

后者虽然更麻烦，但可能更容易实现（`LayoutInflater`可能在 SDK 之外有很多依赖项）并且应该更容易维护（`LayoutInflater`可能会随着时间而改变，需要重新报告）。

# xslt - 调试 XSL-FO 溢出

> ID：15506750
> 
> 赞同：1
> 
> 时间：2013-03-19T17:45:33.310
> 
> 标签：xslt, pdf-generation, xsl-fo, apache-fop

我的 PDF 一代抛出了一堆溢出
警告

```
INFO: An fo:table  (No context info available) is wider than the available room in inline-progression-dimension. Adjusting end-indent based on overconstrained geometry rules (XSL 1.1, ch. 5.3.4)
WARNING: Line 1 of a paragraph overflows the available area by 2165 millipoints. (No context info available)
INFO: An fo:table  (No context info available) is wider than the available room in inline-progression-dimension. Adjusting end-indent based on overconstrained geometry rules (XSL 1.1, ch. 5.3.4)
WARNING: No space remaining to distribute over columns.
WARNING: Line 1 of a paragraph overflows the available area by 2165 millipoints. (No context info available)
WARNING: Content overflows the viewport of the fo:region-before on page 1 in block-progression direction by 68746 millipoints. (No context info available)
INFO: Rendered page #1. 
```

**如何显示“视口”或填充“上下文信息”**以了解哪里出了问题？

# html - CSS 最大高度或简单高度会导致更快地加载图像吗？

> ID：15506751
> 
> 赞同：2
> 
> 时间：2013-03-19T17:45:35.123
> 
> 标签：html, css

我在我的网站上放了一些照片，但我不知道哪种语法会更快地加载它们。我的照片通常为 4300x3000 或 3000x4300（每张照片 7-10 MB）。我在用

```
#image {
    max-height:500px;
    max-width:750px;
} 
```

当我在低端 PC 上查看我的网站时，加载需要很长时间。我不想使用固定`height`的，`width`因为我可以拥有 2500x2500 大的照片，这会造成混乱。我应该怎么做才能减少加载时间？是否有类似“自动调整大小”的东西可以保持高宽比？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:48:38.223

# 压缩

您应该使用一些外部软件来压缩图像（如果您没有使用除 HTML 和 CSS 之外的任何其他语言）。我会推荐[Photoshop](http://www.photoshop.com/)或[GIMP](http://www.gimp.org/downloads/)。

这是改善负载的唯一方法：**减少图像重量**。强制调整大小只是从服务器加载相同数量的数据。

# 提高调整后图像的质量：

如果您对提高调整后图像的质量感兴趣，可以看看这篇文章：

[http://articles.tutorboy.com/2010/09/13/resize-images-in-same-quality/](http://articles.tutorboy.com/2010/09/13/resize-images-in-same-quality/)

# 自动调整大小的背景

[即使在具有完整背景的网站中，](http://webdesignledger.com/inspiration/30-examples-of-big-backgrounds-in-web-design)加载 4.000 像素的图像也不是很常见的做法。通常所做的是加载大约 1800-2000 像素宽度的图片，然后使用 CSS 将图像调整为更大或更小的显示器。

这里有一篇关于这个的文章： [http ://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

# 响应式图像：

您还可以根据您选择的预定义分辨率加载不同的图像。不过，您将需要拥有每个图像的多个版本。

[有关它使用的更多信息。](http://css-tricks.com/on-responsive-images/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T17:48:48.193

> 我的照片通常是 4300x3000 或 3000x4300（从 7-10 mb/照片）。

`max-height`它与vs几乎没有关系`height`。性能损失来自图像的原始大小，导致浏览器：

1.  下载一个大文件
2.  针对大量像素执行缩放算法

> 我应该怎么做才能减少加载时间？是否有类似自动调整大小的东西可以保持高宽比？

上传文件时创建文件的较小版本，并提供较小版本。当用户单击小图像时，您可以选择打开原始版本。

您可以手动创建文件的一个或多个副本，并使用不同的文件名上传它们。

一个更优雅的解决方案是以编程方式创建文件的一个或多个副本（您没有指出服务器技术，但有很多可用选项）。例如，Facebook 会为您上传的每张图片创建六个副本，以便他们可以在不同的地方以正确的大小快速提供这些图片。

无论您是自动还是手动，您都可以选择调整/裁剪图像以达到所需的纵横比。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T17:48:59.287

You should be resizing your images and loading those resized images instead if you want quicker loading. You could keep both large and small on disk and only load the large images when user clicks the link.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T17:51:35.020

## To resolve loading time

You have to compress your photos before uploading them to the server. Use export to web in photoshop, make sure the image size is reasonable (I would say never more than 1mb); You can also use image optimisation software (In Mac I would recommend JPEGmini).

You can, if you wish keep your large images in a folder in your site and link to them (so that one can download them if you allow this).

## To resolve the ratio issue (square vs rectangle)

You can just use one of the properties and css will calculate the other. For example, if you put only

```
#image{
width:750px;
} 
```

This will resolve the matter of things "getting messed up" if you mix rectangle images with square images.. Good luck!

# security - 如何禁用某个有权访问 EC2 机器的用户

> ID：15506754
> 
> 赞同：-1
> 
> 时间：2013-03-19T17:45:40.367
> 
> 标签：security, amazon-web-services

我们已经向少数用户提供了 pem 文件，并且只想撤销特定用户的访问权限，这是否可行，或者是否有办法限制仅从来自我们 LAN 的流量访问该计算机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:59:09.550

如果您的用户共享同一个 PEM 文件，您将受限于您可以执行的操作。您最好的前进路线是为 aws 生成一个新密钥，并仅将其提供给负责该帐户的一两个人。然后让每个用户生成自己的密钥。您可以通过在机器中添加或删除公钥来控制访问。

您也可以为每个人创建唯一的用户，但根据您使用实例的方式，这可能是矫枉过正。

# ruby - 如何从 ruby 执行和管理 ruby 脚本？

> ID：15506755
> 
> 赞同：0
> 
> 时间：2013-03-19T17:45:41.533
> 
> 标签：ruby, execute, health-monitoring

我有一个名为 program.rb 的脚本，并想编写一个名为 main.rb 的脚本来执行以下操作：

```
system("ruby", "program.rb")

constantly check if program.rb is running until it is done
if program.rb has reached completion
    exit main.rb
end
otherwise keep doing this until program.rb reaches completion{
if program.rb is not running and stopped before completing
    restart program.rb from where it left off
end} 
```

我已经研究过 Pidify，但找不到一种方法来应用它以完全正确地适应这种方式......在如何处理这个脚本方面的任何帮助将不胜感激！

更新：如果在 main.rb 中没有办法，我可以弄清楚如何从它在 program.rb 中停止的地方继续运行脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:51:28.437

It's impossible to "restart script from where it left off" without full cooperation from the `program.rb`. That is, it should be able to advertise its progress (by writing current state to a file, maybe?) and be able to start correctly from a step specified in ARGV. There's no external ruby magic that can replace this functionality.

Also, if a program terminated abnormally, it means one of two things:

*   the error is (semi-)permanent (disk is full, no appropriate access rights to a file, etc). In this case, simply restarting the program would cause it to fail again. And again. Infinite fail loop.
*   the error is temporary (shaky internet connection). In this case, program should do better job with exception handling and retry on its own (instead of terminating).

In either case, there's no need for restarting, IMHO.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:00:20.683

好吧，这是一种方法。

修改`program.rb`以采用可选的标志参数`--restart`或其他东西。

当`program.rb`没有此参数启动时，它将初始化一个文件以记录其当前状态。它会定期将所需的任何内容写入此文件以记录某种检查点。

当*以*重新*启动*`program.rb`标志启动时，它将读取其检查点文件并在该点开始处理。为此，它必须检查点所有状态更改或安排检查点之间的所有处理是幂等的，以便可以重复它而不会产生不良影响。

 **有很多方法可以监控`program.rb`. 最好的方法是使用某种 ping，可能类似于`GET /health_check`通过套接字或管道的虚拟消息。您可以只拥有一个锁定文件来检测锁定是否仍然存在，或者您可以在启动时记录 PID 并检查它是否仍然存在。**

# java - jar 文件下载位置/如何判断类路径是否不正确？

> ID：15506759
> 
> 赞同：0
> 
> 时间：2013-03-19T17:45:53.997
> 
> 标签：java, jar, codebase

呃——我不得不做一些我知之甚少的事情，所以我不确定我是否在寻找正确的事情。

我的网站提供了一个 java 小程序（不幸的是，仅在公司内部），当人们使用 JRE 1.7/Java 7 访问它时，我收到一个 Class Not Found 错误。它适用于 JRE 1.6/Java 6。

如果我通过浏览器在本地调用演示页面，当所有文件都在同一个文件夹中时，它会完美运行：

```
APPLET CODEBASE = "./"
ARCHIVE  = "my.jar"
CODE     = "my.class"
NAME     = "Test"
WIDTH    = 400
HEIGHT   = 150
COL      = 7
HSPACE   = 0
VSPACE   = 0
ALIGN    = top 
```

但是我不知道/理解的是，当浏览器让 JVM 下载 JAR 文件时——我不确定我的 7 个客户端*是否正在*下载 JAR 文件——这些文件去哪里了？他们的名字是一样的吗？（如果是，并且名称相同，那么我*知道*文件没有被下载，这将解释很多。当然，然后我需要弄清楚为什么它们不在 7 上而是在 6 上. *sigh* ) 由于我不知道这些文件的去向，我无法判断我的 CODEBASE 路径是否正确，我认为这是实际问题。我无法通过谷歌找到答案 - 但可能是问题太基本了以至于答案不存在，或者我只是没有在寻找正确的东西。

请问有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:45:22.827

尝试

```
<!DOCTYPE html>
<html>
...

<object type="application/x-java-applet" height="150" width="400">
    <param name="code" value="My" />
    <param name="archive" value="my.jar" />
    No Java plug-in was found.
</object> 
```

对于一个`public class My extends JApplet`。

# c# - C# 如何从 AfterLabelEdit 事件中获取 listviewItem/row？

> ID：15506760
> 
> 赞同：-1
> 
> 时间：2013-03-19T17:45:56.043
> 
> 标签：c#, listview, event-handling

**目标：**我正在尝试在我的 Listview 上更改/编辑标签时更新字典

**问题：**我不知道如何从触发 AfterLabelEdit 的行中检索行/ListViewItem

我的班级正在订阅该活动

```
myListView.AfterLabelEdit +=new LabelEditEventHandler(myListView_AfterLabelEdit); 
```

我正在用函数处理事件

```
 private void myListView_AfterLabelEdit(object sender, LabelEditEventArgs e )
        {
            MessageBox.Show("You Renamed Me to: "+e.Label.ToString());

            if (deviceDictionary.ContainsKey(***)) <--I need to retreive this row that was edited
            {

                MessageBox.Show("Entry updated");
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:56:07.460

该[`AfterLabelEditEvent`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.afterlabeledit.aspx)事件将类型对象[`LabelEditEventArgs`](http://msdn.microsoft.com/en-us/library/system.windows.forms.labelediteventargs.aspx)作为参数传递给处理程序方法。这个参数被命名为`e`；您已经将其显示为事件处理程序方法签名的一部分。

可通过 访问的此类的属性之一`e`是，它返回正在编辑[`Item`](http://msdn.microsoft.com/en-us/library/system.windows.forms.labelediteventargs.item.aspx)的 的从零开始的索引。[`ListViewItem`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.aspx)

一旦有了这个从零开始的索引，就可以使用它从`ListView`控件的[`Items`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.items.aspx)属性中检索适当的项目：

```
// Retrieve the item that is being edited.
ListViewItem item = myListView.Items[e.Item]; 
```

一旦你有正确的`ListViewItem`，你可以查询它的属性。我认为你所说的“钥匙”是作为[`Name`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.name.aspx)财产公开的。

```
private void myListView_AfterLabelEdit(object sender, LabelEditEventArgs e)
{
    MessageBox.Show("You Renamed Me to: " + e.Label.ToString());

    if (deviceDictionary.ContainsKey(myListView.Items[e.Item].Name))
    {
        MessageBox.Show("Entry updated");
    }
} 
```

# apache-cayenne - Cayenne 3.1 - 动态设置数据源

> ID：15506761
> 
> 赞同：2
> 
> 时间：2013-03-19T17:45:55.917
> 
> 标签：apache-cayenne

我目前使用 Cayenne 3.1B2 作为一些 Web 服务的持久层。服务需要公开几个数据库之一，所有数据库都具有相同的模式，在调用服务操作时确定数据库。使用哪个数据库的决定需要基于调用服务的客户端的身份。

我将如何定义它并在运行时使用它？似乎我应该定义 2 个数据节点，它们都引用同一个数据图，因为我的所有实体在数据库之间都是相同的。

但是在运行时，我会以某种方式创建两个不同的上下文，每个数据节点一个，如果是这样，我将如何为每个上下文指定它？

感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:10:41.867

我将使用 DataMap 和单个 DataNode 创建一个项目。删除它的“DataSource Factory”，因为我们将在代码中指定它（从未尝试过，如果将“DataSource Factory”留空导致启动时出现任何问题，您可以将其设置为任何提供的选项，例如 JNDIDataSourceFactory，带有理解这只是占位符，将在运行时被忽略）。

现在启动您的 2 个 ServerRuntime，每个都使用同一个映射项目，但 DataSource 有 2 组不同的属性。这些属性导致 Cayenne 忽略 XML 中设置的 DataSource Factory。

```
Module m1 = new Module() {

    @Override
    public void configure(Binder binder) {
        binder.bindMap(Constants.PROPERTIES_MAP)
              .put(Constants.JDBC_DRIVER_PROPERTY, "com.my.Driver")
              .put(Constants.JDBC_URL_PROPERTY, "jdbc://db1_url")
              .put(Constants.JDBC_USERNAME_PROPERTY, "db1login")
              .put(Constants.JDBC_PASSWORD_PROPERTY, "db1password");
    }
};

Module m2 = new Module() {

    @Override
    public void configure(Binder binder) {
        binder.bindMap(Constants.PROPERTIES_MAP)
               .put(Constants.JDBC_DRIVER_PROPERTY, "com.my.Driver")
               .put(Constants.JDBC_URL_PROPERTY, "jdbc://db2_url")
               .put(Constants.JDBC_USERNAME_PROPERTY, "db2login")
               .put(Constants.JDBC_PASSWORD_PROPERTY, "db2password");
    }
};

ServerRuntime r1 = new ServerRuntime("cayenne-project.xml", m1);
ServerRuntime r2 = new ServerRuntime("cayenne-project.xml", m2); 
```

r1 和 r2 应该是应用程序单例，您可以根据每个请求从其中一个创建 ObjectContexts。如果您在请求之间重用 ObjectContexts（例如，这是一个主要是只读的应用程序），您可以从 r1 和 r2 创建 2 个上下文并缓存它们。

# ruby - 为什么在ruby2.0中改变了true和nil的object_id？

> ID：15506763
> 
> 赞同：16
> 
> 时间：2013-03-19T17:45:58.150
> 
> 标签：ruby, internals, ruby-2.0, objectid

我在某个时候遇到了[这个](https://stackoverflow.com/questions/3430280/ruby-how-does-object-id-assignment-work)ruby​​ object_id 分配问题，然后阅读了这篇很棒的[文章](http://www.oreillynet.com/ruby/blog/2006/01/the_ruby_value_1.html)，它讨论了 VALUE 并解释了为什么 object_id 的 true、nil 和 false 是这样的。当我发现关于 true 和 nil 的 object_id 的明显变化时，我一直在玩弄 ruby​​2.0 object_id。

```
forbidden:~$ ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-linux]
forbidden:~$
forbidden:~$ irb
irb(main):001:0> true.object_id
=> 20
irb(main):002:0> false.object_id
=> 0
irb(main):003:0> nil.object_id
=> 8
irb(main):004:0> exit
forbidden:~$
forbidden:~$ rvm use 1.9.3
Using /home/forbidden/.rvm/gems/ruby-1.9.3-p392
forbidden:~$ ruby -v
ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-linux]
forbidden:~$
forbidden:~$ irb
irb(main):001:0> true.object_id
=> 2
irb(main):002:0> false.object_id
=> 0
irb(main):003:0> nil.object_id
=> 4 
```

***tl;dr：*** **true 和 nil 的值在 1.9.3 和 1.8.7 中分别为 2、4，但在 ruby​​2.0.0 中已更改为 20、8 - 即使 false 的 id 保持不变，即 0 和Fixnum 的 ids 保持相同的旧 2n+1 模式。**

此外，Fixnum 和 Bignum 的实现方式在 2.0.0 中仍然是相同的，因为上面提到的文章中给出的示例也与以前相同的方式运行：

```
irb(main):001:0> 
irb(main):002:0* ((2**62)).class
=> Bignum
irb(main):003:0> ((2**62)-1).class
=> Fixnum
irb(main):004:0> 
```

这个 object_id 变化背后的原因是什么？

为什么会做出这样的改变？这将如何帮助开发人员？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T14:47:09.900

查看[定义这些值的 Ruby 源代码](https://github.com/ruby/ruby/blob/v2_0_0_0/include/ruby/ruby.h#L383-431)表明这与“flonums”有关（另请参阅引入它的[提交](https://github.com/ruby/ruby/commit/b3b5e626ad69bf22be3228f847f94e1b68f40888)）。搜索“flonum”时[，Ruby 邮件列表中](http://www.ruby-forum.com/topic/4404164)出现了一条讨论它的消息。

这是一种通过对某些浮点值使用立即值来加速 64 位机器上的浮点计算的技术，类似于对整数使用 Fixnums。Flonums 的模式是`...xxxx xx10`（即最后两位是`10`，而对于 fixnums 的最后一位是`1`）。其他立即数的`object_id`s 已更改以适应此更改。

`object_id`通过查看Ruby 1.9.3 和 2.0.0 中的浮点数，您可以看到这种变化。

在 1.9.3 中，具有相同值的不同浮点数是不同的对象：

```
1.9.3p385 :001 > s = 10.234
 => 10.234 
1.9.3p385 :002 > t = 10.234
 => 10.234 
1.9.3p385 :003 > s.object_id
 => 2160496240 
1.9.3p385 :004 > t.object_id
 => 2160508080 
```

在 2.0.0 中它们是相同的：

```
2.0.0p0 :001 > s = 10.234
 => 10.234 
2.0.0p0 :002 > t = 10.234
 => 10.234 
2.0.0p0 :003 > s.object_id
 => 82118635605473626 
2.0.0p0 :004 > t.object_id
 => 82118635605473626 
```

# ios - 来自命令行的 xcodebuild - 权利问题 -SecItemCopyMatching：缺少权利

> ID：15506764
> 
> 赞同：1
> 
> 时间：2013-03-19T17:46:04.870
> 
> 标签：ios, xcode, xcodebuild, codesign, entitlements

我有两个应用程序 - 一个名称中有空格，另一个没有。当我尝试通过命令行构建过程运行应用程序时，我遇到了应用程序无法正常运行的问题 - 即：用“SecItemCopyMatching:missing entitlement”炸毁

--- 当我尝试使用空格检查应用程序命令行上的权利时：

```
>machine:Release-iphoneos builder$ codesign -d --entitlements - Application\ Name.app 
Executable=/Users/Shared/Jenkins/Home/jobs/My_Application_Name/workspace/build/Release-iphoneos/Application Name.app/Application Name 
```

--- 当我在名称中没有空格的应用程序上运行它时：

```
machine:Release-iphoneos builder$ codesign -d --entitlements - application.app         
Executable=/Users/Shared/Jenkins/Home/jobs/My_Application_Name/workspace/ios/build/Release-iphoneos/Application.app/Application
??qq?<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>application-identifier</key>
    <string>ABC123456.com.company.app</string>
    <key>aps-environment</key>
    <string>production</string>
    <key>get-task-allow</key>
    <false/>
    <key>keychain-access-groups</key>
    <array>
        <string>ABC123456.com.company.app</string>
    </array>
</dict>
</plist> 
```

* * *

所以这里最大的问题是 - 这个应用程序名称已经在全球范围内使用，我无法更改它 - 我该如何解决这个问题，以便我可以进行这些命令行构建？？？

恕我直言：Apple 在 xcode 中的非 posix 合规性方面犯了一个大错误。

任何建议表示赞赏。

苹果的回应：“只有在使用 Xcode 应用程序构建和签署您的应用程序时，DTS 才支持 iOS 应用程序的代码签名。使用 xcodebuild 签署 iOS 应用程序的工作流程不受支持。”

所以他们不支持自己的命令行工具......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T22:09:16.110

删除所有配置文件可能解决了这个问题，尽管我在上次没有运气之前做了几次。一天晚上，它在自动化构建中自行解决，令我惊讶的是......

# ios - 为什么 Xcode 认为我的变量在应该返回 NSString 时却返回了 NSURL？

> ID：15506767
> 
> 赞同：3
> 
> 时间：2013-03-19T17:46:14.860
> 
> 标签：ios, objective-c, xcode, ios5, ios6

我收到以下警告：“从 NSURL 分配 NSString 的指针类型不兼容”。

这是有问题的代码：

```
cell.articleURL.text = [self.articles[row] URL]; 
```

我正在为 Article 对象的 URL 属性的值分配一个标签。self.articles 数组仅用于保存 Article 对象。

在文章类中，我有这个：

```
@property (nonatomic, strong) NSString *URL; 
```

为什么它认为它是一个 NSURL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:54:05.210

问题是`self.articles[row]`它将返回一个 type 的对象`id`，这意味着 Objective-C 运行时无法确定应用哪个方法实现。`URL`它在另一个接口中找到一种方法并使用该方法。

在Matt Gallagher撰写[的 Objective-C 的弱类型中的大弱点一](http://www.cocoawithlove.com/2011/06/big-weakness-of-objective-c-weak-typing.html)文中有关于这个问题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:56:29.637

```
cell.articleURL.text = [self.articles[row] URL]; 
```

正如你所说的`self.articles[row]`回报`id`，所以你需要强制它的类型是`Article`。

```
cell.articleURL.text = [(Article *)self.articles[row] URL]; 
```

你有一个名为 URL 的方法，它被返回的对象调用，`self.articles[row]`它的返回类型是`NSURL`

由于我找不到任何具有调用方法的类`URL`，因此它必须存在于您正在使用的任何框架或类/库中并且它被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:58:11.593

重构代码以避免混淆：

```
Article *article = self.articles[0];
cell.articleURL.text = article.URL; 
```

正如 Jim 所说，编译器正在`URL`为对象找到错误的方法`id`。通过拆分代码，您可以避免此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T17:31:58.150

当您创建一个`NSMutableArray`当时的编译器时，编译器不知道您将存储哪种类型的对象。它是动态决定的。因此，当您尝试`URL`从 `[self.articles[row] URL];`编译器获取时，将其视为 id 类型。所以你必须使用类型转换`cell.articleURL.text = [(Article *) self.articles[row] URL];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T17:58:54.340

您的代码不知道数组的返回类型，因此猜测您可能从哪个类调用哪个方法。您需要像这样添加一个强制转换，它可以让编译器确切地知道期望哪个类：

```
cell.articleURL.text = [(Article *) self.articles[row] URL]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T17:59:54.150

添加到@Jim 答案。您需要将结果转换为声明`[self.articles[row]]`的正确类`@property (nonatomic, strong) NSString *URL;`。因此，Objective-C 运行时可以确定可以应用哪种方法实现。

IE

```
[(Article *)[self.articles[row]] URL] 
```

或者将其存储在 type 的变量中`Article`，然后在该对象上调用 URL。

# vbulletin - vbulletin 会员列表标题更改

> ID：15506771
> 
> 赞同：0
> 
> 时间：2013-03-19T17:46:33.490
> 
> 标签：vbulletin

我有一个 vbulletin 网站。我需要将标签“帖子”更改为“论坛”。只是标签，而不是功能。如果您需要查看示例，请访问此链接[http://www.vbulletin.org/forum/memberlist.php](http://www.vbulletin.org/forum/memberlist.php)。在这里，您可以在表格标题中看到“帖子”。我需要改变它。这可能很简单，但我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:59:45.200

在*成员列表*模板中，我认为您正在寻找

< vb:if condition="$show['searchcol']">< th>< span class="blocksubhead">{vb:rawphrase find_posts_user}

您想将 {vb:rawphrase find_posts_user} 更改为论坛

编辑：对vb代码中的空格感到抱歉。它试图在此处将其呈现为 HTML。

# c - 在 c 编程中使用 Char

> ID：15506773
> 
> 赞同：2
> 
> 时间：2013-03-19T17:46:38.270
> 
> 标签：c

我是 c 编程语言的新手，我有一个与使用字符相关的大学教程作业（我不会为这个作业评分）你必须计算单词，我必须编译并在在线网络中提交我的答案我的代码将针对我不可见的测试用例运行的环境。这是我的任务：

> 编写函数 'wc'，它返回一个包含如下格式的字符串： "NUMLINES NUMWORDS NUMCHARS NUMBYTES" 。空白字符是空格、制表符 (\t) 和换行符 (\n)。字符是任何不是空格的东西。给定的字符串以空字符 (\0) 结尾。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
char* wc(char* data) {
  char* result ;
  int numLine ;
  int numWords ;
  int numChars ;
  int i;
  int numBytes =strlen(data);
  char* empty=NULL;
  while(strstr(data,empty)>0){
    numWords=1;

    for (i = 0; i < sizeof(data); i++) {

    if(data[i]=='\n'){
     numLine++;
   }
    if(data[i]==' ' ){
     numWords++;
   }
    if(data[i]!=' '){
     numChars++;
   }
   }

   }

    sprintf(result, "%d %d %d %d", numLine, numWords, numChars, numBytes);
    return result;
} 
```

这段代码会给我正确的输出结果，但我在这里遗漏了一些东西，至少测试告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:53:23.607

你有一个非常严重的错误：

```
 char* result;
  ...
  sprintf(result, "%d %d %d %d", numLine, numWords, numChars, numBytes); 
```

这在 C 中是不允许的。您需要先为字符串分配足够的内存。声明`result`为一个足够大的静态数组，或者`malloc`如果您在课程中已经介绍过，请使用它。

例如

```
char buf[100];  // temporary buffer

sprintf(buf, "%d %d %d %d", numLine, numWords, numChars, numBytes);

char *result = malloc(strlen(buf) + 1);   // just enough for the string
strcpy(result, buf);                      // store the string

return result; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T17:49:20.500

What if you have this input?

```
Two        Words. 
```

You have to count the transitions between whitespace/non-whitespace, not just count spaces.

* * *

Also, I'm pretty sure `strstr(data,NULL)` will not do anything useful.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T17:49:19.473

1) **sizeof is wrong:**

Instead of `sizeof` operator you need to use `strlen()` in for loop, like:

```
for (i = 0; i < strlen(data); i++)
                ^ not sizeof 
```

`sizeof(data)` returns only size of data pointer address that is `4`. Because you are to read all char in `data[]` you need `strlen()` that will return length of `data[]` (or number of chars in `data[]`)

2) **memory error:**

Next Error I can notice there is no memory allocated for `result`. it declare like:

```
char* result ; 
```

and No memory allocate! and you are writing using `sprintf` that cause **undefined behavior** of your code

3) **while(strstr(data,empty)>0)** is wrong

`strstr()` search position of a string in to other you empty string is `NULL` , CHECK: [char *strstr(const char *s1, const char *s2);](http://pubs.opengroup.org/onlinepubs/009695399/functions/strstr.html)

you strstr() always returns `data`, Why are you calling this? I believe *you don't need* this `while()` loop.

I improved you code upto some extend as below, There was only three error as I mentioned above now corrected(*to understand read comments*), You basic algo is correct:

```
#define SIZE 256   // added size macro
char* wc(char* data)  
  char* result = malloc(SIZE*sizeof(char)); //(2) allocated memory for result 
  int numLine ;
  int numWords ;
  int numChars ;
  int i;
  int numBytes =strlen(data);
    numWords=1; 
                    // (3) remove while loop
    for (i = 0; i < strlen(data); i++) {  //(1) change size
        if(data[i]=='\n'){
         numLine++;
     }
        if(data[i]==' ' ){
         numWords++;
     }
        if(data[i]!=' '){
         numChars++;
     }
    }
    sprintf(result, "%d %d %d %d", numLine, numWords, numChars, numBytes);
    return result;
 }

int main(){
    printf("\nresult: %s\n", wc("q toei lxlckmc    \t \n ldklkjjls \n i \t nn "));
    return 1;
} 
```

Output:

```
result: 2 14 28 41 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T17:57:46.493

wc unix命令源码：

[http://www.gnu.org/software/cflow/manual/html_node/Source-of-wc-command.html](http://www.gnu.org/software/cflow/manual/html_node/Source-of-wc-command.html)

处理所有测试用例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T17:54:27.087

您似乎还缺少`\t`空格检查器中的 for 选项卡，并且您在输入或输出单词时没有正确检查。*您可以为此使用在stdbool.h*`bool`中定义的布尔类型。

# ios - UILabel 不注册触摸

> ID：15506774
> 
> 赞同：1
> 
> 时间：2013-03-19T17:46:44.107
> 
> 标签：ios, objective-c, ios6

我有一个问题，我想用手指拖动标签，但我什至无法在其上注册触摸。有什么问题？self 是我的视图控制器，self.label 是我的标签。

编辑：

我的标签是通过 uiimageview 以编程方式制作的。UserInteractionEnables 设置为 YES。我不确定出了什么问题，这是完整的代码：

在里面：

```
 UIImage *myImage = [UIImage imageNamed:@"fish.jpg"];
    UIImageView *mainImageView = [[UIImageView alloc] initWithImage:myImage];
    self.view.frame = CGRectMake(0, 0, 320, 480);
    self.view = mainImageView;
    self.label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 100)];
    self.label.userInteractionEnabled = YES;
    self.label.text = @"Hello, World";
    [self.view addSubview:self.label]; 
```

拖动：

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches]anyObject];
    if([[touch view] isEqual:self.label])
    {
        NSLog(@"touch on label");

        self.startLocation = [[touches anyObject] locationInView:self.label];
        // startLocation is a CGPoint declare globaly in .h..and lblName is your UILabel
    }
}

- (void) touchesMoved:(NSSet *)touches withEvent: (UIEvent *)event
{
    UITouch *touch = [[event allTouches]anyObject];
    if([touch view] == self.label)
    {
        CGPoint pt = [[touches anyObject] previousLocationInView:self.label];
        CGFloat dx = pt.x - self.startLocation.x;
        CGFloat dy = pt.y - self.startLocation.y;
        CGPoint newCenter = CGPointMake(self.label.center.x + dx, self.label.center.y + dy);

        self.label.center = newCenter;

    }
} 
```

编辑2：我也试过这段代码，但它也不起作用。我认为问题不在于这些方法，而在于注册触摸。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    self.startLocation = [[touches anyObject] locationInView:self.view];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    CGPoint point = [[touches anyObject] locationInView:self.label];
    self.label.center = CGPointMake(self.label.center.x + point.x - self.startLocation.x, self.label.center.y + point.y - self.startLocation.y);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:52:38.367

确保您在界面构建器的标签上选中“启用用户交互”，或者如果您在代码中执行此操作，`userInteractionEnabled=YES`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:53:17.277

默认情况下，`UILAbel`不响应触摸。您需要启用该`userInteractionEnabled`属性。

```
label.userInteractionEnabled = YES; 
```

# android - android 动作是否按照 onCreate 中所写的顺序完成？

> ID：15506778
> 
> 赞同：0
> 
> 时间：2013-03-19T17:46:54.703
> 
> 标签：android, oncreate

我想知道这些操作是否在创建时按顺序完成

```
 mWebView.loadUrl("file:///android_asset/game.swf");

    AdView adView = (AdView)this.findViewById(R.id.adView);
    adView.loadAd(new AdRequest()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:57:49.313

是的。Java 方法体内的语句将按顺序执行。

# jquery - 如何通过 jquery 选择 .class:before , .class:after

> ID：15506783
> 
> 赞同：0
> 
> 时间：2013-03-19T17:47:07.720
> 
> 标签：jquery, css

```
.left_data{
    width:60%;
    float:left;
    position: relative;
    height:400px;
    background: #f00;
    border: 4px solid #f00;
    -webkit-box-shadow: 0px 0px 14px rgba(0, 0, 0, 0.66);
    -moz-box-shadow:    0px 0px 14px rgba(0, 0, 0, 0.66);
    box-shadow:         0px 0px 14px rgba(0, 0, 0, 0.66)
    }

.left_data:after, .left_data:before {
    left: 100%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.left_data:after {
    border-color: rgba(255, 255, 255, 0);
    border-left-color: #f00;
    border-width: 30px;
    top: 20%;
    margin-top: -30px;
}
.left_data:before {
    border-color: rgba(255, 255, 255, 0);
    border-left-color: #f00;
    border-width: 36px;
    top: 20%;
    margin-top: -36px;
} 
```

我需要通过 jquery 选择这些类来编辑它们 .left_data:after , .left_data:before 我尝试使用此代码但我收到错误

```
$(".left_data:after").css("border-left-color","#FFF"); 
```

# android - 如何以相同的分辨率为 4" 和 10" 显示器创建不同的布局？

> ID：15506786
> 
> 赞同：0
> 
> 时间：2013-03-19T17:47:19.817
> 
> 标签：android, android-layout, screen-resolution

根据此 Android 文档[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)，似乎 4" 屏幕以 320ppi 显示的图像也将被 10" 以 300ppi 使用，但是，由同一 4" 显示器显示的布局将与共享7" 显示屏，216ppi。

**作为参考，一些流行的 Android 设备：**
**Nexus 4：** 4.7" 1280 x 768 像素分辨率 (320 ppi)
**Nexus 7：** 7" 1280x800 (216ppi)
**Nexus 10：** 10.055" 2560 x 1600 (300 ppi)

那么如何实际制作特定布局，包括特定类型设备的艺术作品？

例如单独的图像或布局： 4" 布局上的 xhdpi 图像 4" 布局上的 mdpid 图像 10" 布局上的 xhdpi 图像

![支持的屏幕范围](../Images/7d52f28d4d9a84c22e25a19438718e92.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:55:01.393

> 似乎 4" 屏幕以 320ppi 显示的图像也将被 10" 屏幕以 300ppi 使用

默认情况下，是的，只要两个设备都从同一个`-xhdpi`资源集中提取。它们都将以大致相同的物理尺寸进行渲染。

> 同一 4" 显示器显示的布局将与 216ppi 的 7" 显示器共享。

默认情况下，不，只要 4" 显示器`-normal`和 7" 显示器是`-large`，使用旧的大小桶集，因此如果您在这些目录中有不同的布局，每个设备将使用适合该设备的布局。

> 那么如何实际制作特定布局，包括特定类型设备的艺术作品？

对于布局，要么使用传统大小的桶（例如，，`-normal`），`-large`要么创建您自己的（例如，`-sw600dp`）。

对于可绘制对象，首先将它们放入特定密度的桶中（例如，`-mdpi`、`-hdpi`、`-xhdpi`）。如果您确定您的图像在逻辑上是相同的，但您不想在相同密度的设备上使用相同物理尺寸的图像（“320ppi 的 4”屏幕也将被 300ppi 的 10“屏幕使用” )，您也可以混合大小资源集限定符（例如，`res/drawable-large-hdpi/`将在`-large`具有`-hdpi`密度的设备上使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:50:47.117

您可以将资源 xml 文件放在正确的文件夹中，例如 layout-xlarge-xhdpi 或 layout-normal-hdpi 或 layout-large-hdpi 等。

# xaml - XAML：点击文本框以启用？

> ID：15506797
> 
> 赞同：1
> 
> 时间：2013-03-19T17:48:16.897
> 
> 标签：xaml, textbox, windows-runtime, windows-store-apps, tap

在 XAML 和 WinRT 中，有没有办法设置文本框，以便在被点击之前禁用文本输入。

我尝试设置 Tapped 事件，然后设置 IsEnabled=true，但这似乎只在 IsEnabled=true 首先起作用。

我在 MSDN 上找到了这个：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/708c0949-8b06-40ec-85fd-201139ca8b2d](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/708c0949-8b06-40ec-85fd-201139ca8b2d)

谈到手动将 TappedEvent 添加到为每个 TextBox 处理的事件中，这很麻烦，但除非 IsEnabled 已设置为 true，否则似乎也不起作用。

基本上，我想要一个所有文本框都显示数据但被禁用的表单，除非用户点击以启用该框然后键入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:33:05.950

您可以使用`IsReadOnly`而不是`IsEnabled`来实现您正在寻找的东西。此外，您可以轻松地在代码中设置点击事件处理程序。如上所述，我不确定是否需要在代码中设置处理程序才能使其正常工作；但是，它确实简化了事情。

这是详细信息。

在页面类的构造函数中（这里是`MainPage`），调用 setup 函数：

```
public MainPage()
{
    this.InitializeComponent();
    // call the setup for the textboxes
    SetupTextBoxes();
} 
```

这是我们做魔术的地方 - 将此页面上的所有文本框设为只读并设置点击处理程序：

```
private void SetupTextBoxes()
{
    var tbs = GetVisualChildren<TextBox>(this, true);
    foreach (var tb in tbs)
    {
        tb.IsReadOnly = true;
        tb.AddHandler(TappedEvent, new TappedEventHandler(tb_Tapped), true);
    }
} 
```

实用函数，用于获取`T`传入父项的给定类型 () 的所有子项的列表。

```
private List<T> GetVisualChildren<T>(DependencyObject parent, bool recurse = true)
where T : DependencyObject
{
    var children = new List<T>();
    int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
    for (int i = 0; i < numVisuals; i++)
    {
        DependencyObject v = (DependencyObject)VisualTreeHelper.GetChild(parent, i);
        var child = v as T;
        if (child == null && recurse)
        {
            var myChildren = GetVisualChildren<T>(v, recurse);
            children.AddRange(myChildren);
        }
        if (child != null)
            children.Add(child);
    }
    return children;
} 
```

最后是事件处理程序。这会在点击时启用每个文本框。

```
private void tb_Tapped(object sender, TappedRoutedEventArgs e)
{
    ((TextBox)(sender)).IsReadOnly = false;
} 
```

# c - 如何以编程方式检索附加到 Xorg 屏幕的图形适配器和监视器名称？

> ID：15506800
> 
> 赞同：0
> 
> 时间：2013-03-19T17:48:25.557
> 
> 标签：c, x11, xorg

显然，此信息在 xorg.conf 中可用，因此我可以尝试解析此文件。但是有没有办法只使用 Xlib 调用（+扩展）来实现这一点？

谢谢， PMJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:37:41.563

这一定是可能的，因为我知道程序`xdpyinfo`可以做到。起初，我打算建议在你的程序中执行它并解析输出。不过，这不是必需的，因为[xdpyinfo 的来源是免费提供的](http://cvsweb.xfree86.org/cvsweb/xc/programs/xdpyinfo/xdpyinfo.c?rev=HEAD&content-type=text/vnd.viewcvs-markup)。

看起来如果你有一个 (Display*) 变量（你*会*的，因为几乎每个 X11 函数调用都需要一个），你可以调用[这些精彩的宏](http://www.tronche.com/gui/x/xlib/display/display-macros.html)来获取有趣的数据，包括 ServerVendor 和 VendorRelease。这应该涵盖您的任务的“图形适配器”部分。

至于监视器名称，根据 xdpyinfo.c，这是由 XF86VidModeGetMonitor() 管理的，它是 X11 扩展的一部分。这将返回一个 XF86VidModeMonitor 结构，该结构将显示供应商、型号和其他有趣的数据。

运行`xdpyinfo`——如果该程序可以查询数据，那么您的程序也可以。

# mysql - Ruby on Rails 并发

> ID：15506801
> 
> 赞同：0
> 
> 时间：2013-03-19T17:48:33.177
> 
> 标签：mysql, ruby-on-rails

Ruby on Rails 是单线程应用程序吗？我觉得它不支持任何并发，尤其是在我做mysql查询的时候。

我正在使用 ruby​​ 1.8.7 和 rails 2.3.11 和 Phusion Passenger（均由 Bluehost 提供）。另外，这就是我用于我的开发服务器的样子

```
[2013-03-19 10:42:00] INFO  WEBrick 1.3.1
[2013-03-19 10:42:00] INFO  ruby 1.8.7 (2012-02-08) [universal-darwin12.0]
[2013-03-19 10:42:00] INFO  WEBrick::HTTPServer#start: pid=23034 port=3000 
```

以下情况严重使我的应用程序无法使用：

第 1 步：批量插入（大量数据）<- 当事务提交数据时，这会卡住。

第 2 步：从插入的不同表中查询，获取 JSON 对象。

我可以告诉这是从控制台发生的。我尝试增加“池”（我相信这会增加 mysql 并发连接数），但它并没有提高我的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:59:57.493

默认情况下，Rails 是单线程的，主要是因为 MRI ruby​​ 对线程并发的支持很差。您可以尝试通过以下方式将 Rails 置于多线程模式：

```
config.thread_safe! 
```

这将是 Rails 4 中的默认设置。通常，如果您需要在 Rails 中启动一个长时间运行的进程，您可能希望使用诸如[DelayedJob](https://github.com/tobi/delayed_job)、[Resque](https://github.com/defunkt/resque)或[Beanstalk](https://github.com/kr/beanstalkd)之类的东西在单独的后台进程中完成大部分工作。结果多久可用于其他线程将取决于完成需要多长时间以及整个批量插入是在单个事务中还是在几个较小的事务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:54:45.593

我相信默认情况下它是串行线程的（一直处理一个请求，然后处理另一个）。要启用多线程，请像您一样指定池大小，然后运行

```
config.threadsafe! 
```

在您的 environment.rb 类型文件中。

不过，我认为这不会影响您描述的场景，这听起来更像是 MySql 正在“等待”另一个提交完成，然后再继续进行自己的插入。

# authentication - Overriding IAuthSession OnRegistered handler

> ID：15506809
> 
> 赞同：1
> 
> 时间：2013-03-19T17:48:50.160
> 
> 标签：authentication, servicestack

I am using ServiceStack's SocialBootstrapApi and it contains a class CustomUserSession that I can use to override the OnRegistered method. I want to override it because I am attempting to obtain information about the registration so that I can publish an event that a new user has registered. This handler provides an instance of the RegistrationService that handled the registration but not anything about the registration request itself or the resulting UserAuth instance. For instance, I'd like to get the e-mail address used to register.

```
 public override void OnRegistered(IServiceBase registrationService)
    {
        base.OnRegistered(registrationService);

        // Ideally, I could do get the registered user's primary e-mail address from the UserAuth instance.
        var primaryEmail = ((RegistrationService) registrationService)
            .UserAuthRepo
            .GetUserAuth(this, null)  //<--- 'this' is a mostly empty session instance
            .PrimaryEmail;
    } 
```

This of course doesn't work because the session instance I'm using for the GetUserAuth call doesn't contain any of the necessary authentication information to be useful for looking up the user's authentication information. So GetUserAuth returns null as you would expect. So how should I go about obtaining this information? Would it be incorrect design for the OnRegistered handler to be passed the UserAuth instance created by the RegistrationService?

```
 public interface IAuthSession
    {
        ...
        void OnRegistered(IServiceBase registrationService, UserAuth userAuth); // <-- new signature
        ...
    } 
```

That would be convenient! :)

Or perhaps there's another way to go about this?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:12:33.083

**那么我应该如何获取这些信息呢？**

您应该能够通过registrationService访问注册请求的所有数据。你只需要做一点挖掘和铸造......

```
public override void OnRegistered(IServiceBase registrationService)
{
    base.OnRegistered(registrationService);

    var requestContext = (HttpRequestContext)registrationService.RequestContext;
    var dto = ((Registration)requestContext.Dto);
    var primaryEmail = dto.Email;
} 
```

**将 OnRegistered 处理程序传递给由 RegistrationService 创建的 UserAuth 实例是否是不正确的设计？**

我会把设计决定留给专业人士。上面的代码应该可以工作。选角看起来有点难看，但所有必要的数据都在那里。

我不喜欢入侵 SS，所以我选择通过 dto.UserName 从 UserAuth 集合中选择用户身份验证信息

# matlab - 在matlab中检查具有潜在尾随单维的矩阵大小

> ID：15506810
> 
> 赞同：1
> 
> 时间：2013-03-19T17:48:52.510
> 
> 标签：matlab

我想验证（在函数中），矩阵的大小`A`是`a x b x c`，可能是`c=1`。

到目前为止，我有：

```
if size(A) ~= [ a b c ]
    error('bad size');
end 
```

但是，如果`c=1`（并且`A`具有所需的大小）：

```
size(A) = [ a b ] 
```

因为`size`删除了尾随的单例维度。因此，比较将导致错误，因为向量 (`[a b]`和`[a b c]`) 的大小不同。

有什么比

```
if c == 1 && size(A) ~= [ a b ] || c ~= 1 && size(A) ~= [ a b c ]
    error('bad size');
end 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:53:26.010

[validateattributes](http://www.mathworks.com/help/matlab/ref/validateattributes.html)完成这项工作：

```
 validateattributes(A, {'numeric'}, {'size', [ a b c ]}); 
```

`c=1`如果并且`A`具有正确的尺寸，则不会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:56:06.787

的输出`size(A)`随调用方式的不同而不同。对于您的情况，您可以简单地使用：

```
[a1,b1,c1] = size(A);
if(any([a1,b1,c1]~=[ a b c ]))
    error('bad size');
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T00:03:11.660

另一种解决方案是：

```
if (size(A) ~= [ a b c ](1:ndims(A)))
    error('bad size');
end 
```

只要 A 不超过 3 个维度，这将起作用。如果 A 确实有超过 3 个维度，那么您将需要事先有一个条件：

```
if (ndims(A)>3 || size(A)~=[a b c](1:ndims(A)))
    error('bad size');
end 
```

显然，如果 A 超出第三个维度的维度是单例维度，这将认为它的大小不好……但这可能是可以接受的。

# asp.net-mvc - 在多个 asp.net mvc 3 项目之间共享视图、css、javascript

> ID：15506811
> 
> 赞同：3
> 
> 时间：2013-03-19T17:48:53.730
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

在几个 asp.net mvc 3 项目之间共享视图似乎是不可能/困难的。至少，这是谷歌告诉我的。如果我错了，请纠正我...

css 和 js 文件是怎么回事？有人已经这样做了吗？如果是这样，实现这一目标的最佳实践是什么（在具有多个 asp.net mvc 3 项目的 vs studio 2010 解决方案中）？

只是好奇，是否可以在 mvc3 区域之间共享 css 和 js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:00:36.030

由于您提到了 svn - 它具有“svn:externals”属性，可让您将文件夹（甚至来自不同的存储库）映射到网站根文件夹下的位置。我们成功地使用它在许多 MVC 应用程序中重用具有外部资源（脚本、css 文件、图像和视图）的多个库工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-11T09:00:15.743

有一种很酷的方法可以使用 VS 的“添加为链接”功能来共享 js、cshtml、css 等文件。[这里](https://stackoverflow.com/questions/8540292/how-do-you-share-scripts-among-multiple-projects-in-one-solution#answer-8541764)有一个很好的答案，描述了整个过程。另外不要忘记[添加构建任务以在构建时复制文件，](http://mattperdeck.com/post/Copying-linked-content-files-at-each-build-using-MSBuild.aspx)以便您能够调试它们。

# mysql - MYSQL 查询连接表

> ID：15506812
> 
> 赞同：1
> 
> 时间：2013-03-19T17:48:57.570
> 
> 标签：mysql, sql, wordpress

这是我对 WP 数据库的查询。

```
$letters = $wpdb->get_col(
"SELECT DISTINCT LEFT(post_title,1) AS first_letter FROM $wpdb->posts
WHERE post_type = '$post_type' AND post_status = 'publish'
ORDER BY first_letter ASC"
); 
```

这是一个婴儿姓名数据库，我想制作一个小部件来分隔男性/女性，所以我需要像上面一样进行查询，但要获取只有某些 postmeta 的帖子，下面是我正在寻找的关键和价值。

键 - spin2

价值 - 男性

由于它位于不同的表中，如何将其添加到查询中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:53:42.433

你只需要使用一个`INNER JOIN`：

```
SELECT DISTINCT LEFT(posts.post_title,1) AS first_letter 
FROM $wpdb->posts AS posts 
    INNER JOIN $wpdb->postmeta AS meta
        ON posts.ID = meta.post_id
WHERE posts.post_type = '$post_type' 
    AND posts.post_status = 'publish'
    AND meta.meta_key = 'spin2'
    AND meta.meta_value = 'Male'
ORDER BY first_letter ASC 
```

# perl - SOAP::Lite 中可能存在的错误？

> ID：15506815
> 
> 赞同：2
> 
> 时间：2013-03-19T17:49:11.430
> 
> 标签：perl, soap, soap-client

我正在尝试使用 SOAP::Lite 在 Perl 中调用 SOAP 服务，它似乎在解析返回值时遇到了问题。这是一个稍微净化过的版本，当我`use SOAP::Lite q/trace/;`

请注意，我已将响应 XML 重新格式化为`xmllint --format -`

```
SOAP::Transport::new: ()
SOAP::Serializer::new: ()
SOAP::Deserializer::new: ()
SOAP::Parser::new: ()
SOAP::Lite::new: ()
SOAP::Transport::HTTP::Client::new: ()
SOAP::Lite::call: ()
SOAP::Serializer::envelope: ()
SOAP::Serializer::envelope: uaas:getOrganizationListInput
SOAP::Data::new: ()
SOAP::Data::new: ()
SOAP::Data::new: ()
SOAP::Data::new: ()
SOAP::Transport::HTTP::Client::send_receive: HTTP::Request=HASH(0x975730)
SOAP::Transport::HTTP::Client::send_receive: POST http://sv-websvc-t2:9087/UAASCIAMWebServices/services/UAASPort HTTP/1.1
Accept: text/xml
Accept: multipart/*
Accept: application/soap
Content-Length: 758
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://www.myemployer.com/ciam/services/uaas#getOrganizationListInput"

<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope 
    xmlns:uaas="http://www.myemployer.com/ciam/services/uaas" 
    xmlns:ciam_types="http://associate.insidemyemployer.com/ciamservices/service/ciam_types" 
    soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:uaas_types="http://associate.insidemyemployer.com/ciamservices/service/uaas_types" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <uaas:getOrganizationListInput xmlns="http://www.myemployer.com/ciam/services/uaas" xsi:nil="true" />
      </soap:Body>
</soap:Envelope>
SOAP::Transport::HTTP::Client::send_receive: HTTP::Response=HASH(0x1262480)
SOAP::Transport::HTTP::Client::send_receive: HTTP/1.1 200 OK
Connection: Close
Date: Tue, 19 Mar 2013 15:27:47 GMT
Server: WebSphere Application Server/8.0
Content-Language: en-US
Content-Length: 11672
Content-Type: text/xml; charset=utf-8
Client-Date: Tue, 19 Mar 2013 15:27:48 GMT
Client-Peer: 170.22.136.114:9087
Client-Response-Num: 1
X-Powered-By: Servlet/3.0

<?xml version="1.0"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <soapenv:Header/>
  <soapenv:Body>
    <p672:getOrganizationListOutput xmlns:p490="http://associate.insidemyemployer.com/ciamservices/service/uaas_types" xmlns:p672="http://www.myemployer.com/ciam/services/uaas">
      <response>
        <responseCode>9000</responseCode>
        <responseDescription>Success</responseDescription>
      </response>
      <p490:organizations>
        <id>506</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>1577487</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577480</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>6</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>AMEX006</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>7</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>AMEX002</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>202</id>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>252</id>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>201</id>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>101</id>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>102</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>EMP123</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>108</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>BC12334</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>113</id>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577494</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577493</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>105</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>bb1</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1151</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>1302</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>H001</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1303</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>4343</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>116</id>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577489</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>301</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>275</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>602</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>1577497</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577484</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>32053</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>1301</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>213</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577486</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>351</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>271</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577496</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>14435</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>605</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>1577490</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1604</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>1009</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1654</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1655</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>253</id>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>1577481</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577488</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577495</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>256</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>1577483</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577491</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>50</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>1577485</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>258</id>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>203</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1577482</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>100</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>251</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>117</id>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>118</id>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>151</id>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>155</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>TL004</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>255</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>119</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>111111</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1304</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>1308</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>154</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>123</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>120</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>999999</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>51</id>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>2554</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>383</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>2604</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>384</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>107</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>T878787</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>104</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchId>78906</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>407</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>408</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>549</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>257</id>
        <legalName>ABC</legalName>
        <branchId>1586</branchId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>2654</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>406</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>403</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>405</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>404</id>
        <taxId>00000000</taxId>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>254</id>
        <legalName>ABC</legalName>
      </p490:organizations>
      <p490:organizations>
        <id>112</id>
        <taxId>00000000</taxId>
        <branchName>DEF</branchName>
      </p490:organizations>
      <p490:organizations>
        <id>111</id>
        <taxId>00000000</taxId>
        <branchName>DEF</branchName>
      </p490:organizations>
    </p672:getOrganizationListOutput>
  </soapenv:Body>
</soapenv:Envelope>
SOAP::Deserializer::deserialize: ()
SOAP::Parser::decode: ()
SOAP::SOM::new: ()
Incorrect parameter at /opt/perl/lib/site_perl/5.12.2/SOAP/Lite.pm line 1993.
SOAP::SOM::DESTROY: ()
SOAP::Lite::DESTROY: ()
SOAP::Serializer::DESTROY: ()
SOAP::Data::DESTROY: ()
SOAP::Data::DESTROY: ()
SOAP::Data::DESTROY: ()
SOAP::Data::DESTROY: ()
SOAP::Transport::DESTROY: ()
SOAP::Transport::HTTP::Client::DESTROY: ()
SOAP::Deserializer::DESTROY: ()
SOAP::Parser::DESTROY: () 
```

我希望得到修复或解决方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:24:59.010

[我在SourceForge 上](http://sourceforge.net/tracker/?func=detail&aid=3547564&group_id=66000&atid=513017)找到了这个线程并尝试了解决方案，它似乎可以工作。

我将消息中引用的行`Incorrect parameter at /opt/perl/lib/site_perl/5.12.2/SOAP/Lite.pm line 1993`从

```
die "Incorrect parameter" unless $itself =~/^\d$/; 
```

到

```
die "Incorrect parameter" unless $itself =~/^\d+$/; 
```

# java - Webservice increment variable for id use singleton/synchronize

> ID：15506817
> 
> 赞同：1
> 
> 时间：2013-03-19T17:49:13.747
> 
> 标签：java, web-services, design-patterns, singleton, primary-key

I am implementing a webservice witch is used to attack one DB. i need to generate ID for objects that i store and i don't know what's the best way to do it. i need to increment a INT.

Obviously the webservice must to be used for so much people and maybe various at same time.

so, what's is a good solution?

singleton/synchronize??

i think is the only way i know, maybe there are others better.

if u can show me one example it will be very appreciated.

thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:49:58.630

Use synchronize block to achieve this. In synchronized block only one thread can enter inside it.

JVM guarantees that Java synchronized code will only be executed by one thread at a time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:01:29.060

同步有可怕的开销。如果您只需要一个增量计数器，您可以使用[AtomicLong 的 incrementAndGet()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicLong.html#incrementAndGet%28%29)。将 AtomicLong 放在 Singleton 中以具有服务器范围的访问权限。

**编辑：**一些代码示例：

```
import java.util.concurrent.atomic.AtomicLong;

public class AtomicIdGenerator
{
    private static class SingletonHolder
    {
        public static final AtomicIdGenerator instance = new AtomicIdGenerator();
    }

    public static AtomicIdGenerator getInstance()
    {
        return SingletonHolder.instance;
    }

    private AtomicLong mIdGenerator = null;

    private AtomicIdGenerator()
    {
        mIdGenerator = new AtomicLong();
    }

    private AtomicLong getGenerator()
    {
        return mIdGenerator;
    }

    public long getNewId()
    {
        return getGenerator().incrementAndGet();
    }
} 
```

使用示例很简单：

```
long tNewId = AtomicIdGenerator.getInstance().getNewId(); 
```

这将是线程安全的，并且没有任何同步开销。如果您预见自己将来会处理大量并发用例，那么[java.util.concurrent](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)包为您的用例提供了许多经过实战验证的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:04:54.587

你可以做这样的事情。我已经做过一段时间了，它基于 PostgreSql 和 iBatis，但你可以理解。

```
public class Sequence implements Serializable {
    private static final long serialVersionUID = 7526471155622776147L;
    private String name  = null;
    private int nextId = 0;

    public Sequence () {
    }

    public Sequence (String name, int nextId) {
        this.name = name;
        this.nextId = nextId;
    }

    public final String getName () {
        return name;
    }

    public final void setName (String name) {
        this.name = name;
    }

    public final int getNextId () {
        return nextId;
    }

    public final void setNextId (int nextId) {
        this.nextId = nextId;
    }

}

public class SequenceSqlMapDao extends SqlMapClientDaoSupport implements SequenceDao {

  /**
   * This is a generic sequence ID generator that is based on a database
   * table called 'SEQUENCE', which contains two columns (NAME, NEXTID).
   * <p/>
   * This approach should work with any database.
   *
   * @param name The name of the sequence.
   * @return The Next ID
   * @
   */
  public final synchronized int getNextId(String name) {
    Sequence sequence = new Sequence(name, -1);
    //Sequence sequence = new Sequence();
    sequence = (Sequence) getSqlMapClientTemplate ().queryForObject("getSequence", sequence);
    if (sequence == null) {
            try {
                throw new IllegalArgumentException("Error: SHOOT! A null sequence was returned from the database (could not get next " + name + " sequence).");
            } catch (Exception ex) {
                Logger.getLogger(SequenceSqlMapDao.class.getName()).log(Level.SEVERE, null, ex);
            }
    }
    Object parameterObject = new Sequence(name, sequence.getNextId() + 1);
    getSqlMapClientTemplate ().update("updateSequence", parameterObject);
    int nextId = sequence.getNextId();

    parameterObject  = null;
    sequence = null;

    return nextId;
  }

} 
```

如果不出意外，这与数据库无关。您仍然必须在您的网络服务中公开该方法。PS - 我忘记了我从哪里得到的，否则我会归功于适当的来源。

# php - Paypal can't reach my website (IPN, .htaccess)

> ID：15506822
> 
> 赞同：0
> 
> 时间：2013-03-19T17:49:23.067
> 
> 标签：php, .htaccess, paypal-ipn

When someone pays with paypal standard in my opencart site, the payment gets done, but the IPN notification never reaches my site. The return address is fine, but it seems like paypal is unable to reach my website.

Is there something I could change in my .htaccess file or hosting settings? I really don't know what to do now.

I even created a dummy php script called ipn.php in my site that sends me an email when it's opened. I gave it's address to paypal as the notification address but it doesn't get called neither!

UPDATE: After testing with the IPN simulator in Paypal's sandbox, I am getting the following error: **IPN Delivery Failed:I/O error: Connection timed out; nested exception is java.net.ConnectException: Connection timed out**

My htaccess file:

```
# 1.To use URL Alias you need to be running apache with mod_rewrite enabled. 

# 2\. In your opencart directory rename htaccess.txt to .htaccess.

# For any support issues please visit: http://www.opencart.com

Options +FollowSymlinks

# Prevent Directoy listing 
Options -Indexes

# Prevent Direct Access to files
<FilesMatch "\.(tpl|ini|log)">
 Order deny,allow
 Deny from all
</FilesMatch>

# SEO URL Settings
RewriteEngine On
# If your opencart installation does not run on the main web folder make sure you folder it does run in ie. / becomes /shop/ 

#RewriteBase /
RewriteRule sitemap.xml /farmaciagimeno.com/index.php?route=feed/google_sitemap
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^?]*) /farmaciagimeno.com/index.php?_route_=$1 [L,QSA]

### Additional Settings that may need to be enabled for some servers 
### Uncomment the commands by removing the # sign in front of it.
### If you get an "Internal Server Error 500" after enabling any of the following settings, restore the # as this means your host doesn't allow that.

# 1\. If your cart only allows you to add one item at a time, it is possible register_globals is on. This may work to disable it:
# php_flag register_globals off

# 2\. If your cart has magic quotes enabled, This may work to disable it:
php_flag magic_quotes_gpc Off

# 3\. Set max upload file size. Most hosts will limit this and not allow it to be overridden but you can try
# php_value upload_max_filesize 999M

# 4\. set max post size. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value post_max_size 999M

# 5\. set max time script can take. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value max_execution_time 200

# 6\. set max time for input to be recieved. Uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
# php_value max_input_time 200

RedirectMatch 301 ^/farmaciagimeno.com(.*)$ http://www.farmaciagimeno.com$1 
```

# java - 设置警报到期

> ID：15506826
> 
> 赞同：1
> 
> 时间：2013-03-19T17:49:49.183
> 
> 标签：java, date, alarmmanager, android-alarms

所以我在我的应用程序从中获取的数据库中设置了警报，但是我希望能够在这些警报上设置到期日期（用于药物治疗）。我该怎么做？

这是我的警报代码：

```
private void calMeds(int medication1, String time1) {

    String string = time1; 
    String[] parts = string.split(":");
    String part1 = parts[0]; 
    String part2 = parts[1]; 
    Log.e("DATABASE", "Hours: " + part1);
    Log.e("DATABASE", "Minutes: " + part2);

    hourCorrect = Integer.parseInt(part1);
    minuteCorrect = Integer.parseInt(part2);

    Date date = new Date();
    Calendar cal_Alarm = Calendar.getInstance();
    Calendar cal_Now = Calendar.getInstance();
    cal_Now.setTime(date);

    cal_Alarm.setTime(date);
    cal_Alarm.set(Calendar.HOUR_OF_DAY, hourCorrect);
    cal_Alarm.set(Calendar.MINUTE, minuteCorrect);
    cal_Alarm.set(Calendar.SECOND, 3);

    if (cal_Alarm.before(cal_Now)) { 
        cal_Alarm.add(Calendar.DATE, 1);

    }

    alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    String ALARM_ACTION; 
```

如果我每天都有一个闹钟在 9:00 响起，并且它的到期日期是 3 月 21 日，我该如何阻止它在此日期之后发出警报？这些时间被输入数据库，每个都有不同的到期日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:03:26.383

使用调度程序来安排闹钟的到期时间

示例：-（假设您想在 30 分钟后退出程序）

```
 java.util.Timer timer = new java.util.Timer();
  timer.schedule(new TimerTask() {

                        @Override
                        public void run() {
                            System.exit(0);
                        }
                    }, 30 * 60 * 1000);
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:08:02.910

根据您的修订：

```
Calendar now = Calendar.getInstance();
    Calendar then = Calendar.getInstance();
    then.set(Calendar.MONTH, month);
    then.set(Calendar.DAY_OF_MONTH, day);
    then.set(Calendar.HOUR, hour);
    then.set(Calendar.MINUTE, minute);

    long dif = then.getTimeInMillis() - now.getTimeInMillis();

    ActionListener action = new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        if(!alarm.isStopped())
            alarm.stop();
    }
    };

    Timer timer = new Timer((int)dif, action);
    timer.start(); 
```

# algorithm - What memory management algorithms are well-regarded and used by major compiler vendors?

> ID：15506828
> 
> 赞同：6
> 
> 时间：2013-03-19T17:49:55.620
> 
> 标签：algorithm, memory-management, msvcrt

As an exercise I am writing a memory manager - that is, the code which implements malloc, realloc and free (or new and delete.) The RTL for my language, Delphi, [allows the RTL's memory manager to be replaced easily](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SetMemoryManager). For those of you using C++, this is similar to, but lower-level than, overriding new and delete (it hooks into the RTL itself rather than being a language feature.) I'm looking for resources about high-quality approaches others have taken to the same problem.

I'm aware of a couple of memory management algorithms and implementations, including [FastMM4](http://sourceforge.net/projects/fastmm/) (quite complex), [Doug Lea's allocator](http://g.oswego.edu/dl/html/malloc.html), [Buddy](http://en.wikipedia.org/wiki/Buddy_memory_allocation), [JeMalloc](https://stackoverflow.com/questions/1624726/how-does-jemalloc-work-what-are-the-benefits), [TcMalloc](http://goog-perftools.sourceforge.net/doc/tcmalloc.html), and [Hoard](http://www.hoard.org). I am searching for information about the following:

*   **Known, recommended algorithms**: what other high-quality algorithms than the above have been published?

*   Are there **specific algorithms tailored for highly threaded applications?** That is, where there may be high thread contention at any locked points for allocation or freeing, and where memory may be allocated in one thread but deallocated in a different thread? Most algorithms - with the notable exceptions of Hoard, JeMalloc and TcMalloc - seem to be designed for single-threaded work, and the thread awareness is only thread safety in that there are locks or other synchronisation at appropriate points - no special design.

*   **What do major vendors use?** While [Delphi and C++ Builder's is documented](http://edn.embarcadero.com/article/33416), I cannot find any information about the implementations used by MS VC++, .Net, or Objective C. (All documentation seems to be higher-level, such as `NSAutoReleasePool` for example. [Linux seems to use Buddy](http://en.wikipedia.org/wiki/Buddy_memory_allocation#Implementation_and_efficiency).) These vendors do not seem to allow their RTL to be hooked into like Delphi does. I would be very interested to read about their implementations.

# linux - While loop, username in /etc/passwd

> ID：15506834
> 
> 赞同：0
> 
> 时间：2013-03-19T17:50:23.717
> 
> 标签：linux, bash, scripting

How would I go about writing a while loop that says: While a username is in the /etc/passwd file, do (command)? I'm trying to use a command such as `grep -q "^{usern}:" /etc/passwd` but I'm not sure how to put that as the condition of the while loop.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T17:58:15.497

要遍历用户`/etc/passwd`并对每个用户执行某些操作，请尝试以下操作：

```
cut -d: -f1 /etc/passwd | while IFS= read -r user
do
    echo "$user"
    # do something with $user
done 
```

如果要检查特定用户是否存在`/etc/passwd`然后执行某些操作，请使用 if 语句：

```
if grep -q "^username:" /etc/passwd
then
    # do something
fi 
```

# linux - Having trouble compressing a file in a different directory

> ID：15506835
> 
> 赞同：0
> 
> 时间：2013-03-19T17:50:30.440
> 
> 标签：linux, bash, copy, cp

Okay so essentially what I'm doing, is I'm taking all the directories inside of the /servers/ folder, and moving them to a secondary hard drive mounted at /media/backupdrive/. This script is ran once a day, so it makes the directory with the name of the date, and should copy the folders directly over there (The reason I have to do it this way is because my client has limited disk space on his main hard drive and his worlds are upwards of 6-7gb each). Anyway, I can get them to copy the folders to /media/backupdrive/currentdate, but then when I try to compress it, it says it can't compress an empty directory or something along the lines of that.

Here's the code:

```
#!bin/bash
folderName=$(date +"%m-%d-%y")
mkdir "/media/backupdrive/$folderName"

for i in servers/*; do
    cp -rf $i /media/backupdrive/$folderName/
    cd /media/backupdrive/$folderName/
    tar -C ${i:8} -czvf "${i:8}.tar.gz"
    cd /root/multicraft/
done 
```

Sorry for the image, it was on a virtual machine and I had to re-type it, because I couldn't copy and paste.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:19:14.000

在我看来，您的 tar 命令缺少其输入（例如，最后的“.”），因此说，“tar：懦弱地拒绝创建空存档”。

使用此 tar 命令，您的脚本似乎对我有用：

```
tar -C ${i#servers/} -czvf "${i#servers/}.tar.gz" . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:33:54.137

我会尝试一种稍微不同的方法。`tar`本身不使用临时文件，因此您可以`tar`将源直接发送到目标并在第二步中压缩它们`gzip`。

```
#!bin/bash

dst="/media/backupdrive/$(date +"%m-%d-%y")"

for d in servers/*; do
  tarfile="$dst/${d#servers/}.tar"
  tar -C "$d" -cvf "$tarfile" .
  gzip -9 "$tarfile"
done 
```

# css-float - CSS：浮动元素在包含元素上给出零高度

> ID：15506841
> 
> 赞同：1
> 
> 时间：2013-03-19T17:51:01.730
> 
> 标签：css-float, css

`float`我对应用于`li`元素似乎意味着包含`ul`元素没有高度这一事实感到困惑。您可以看到[这个 jsFiddle 中](http://jsfiddle.net/CuCdr/)演示的问题。

基本上，我想`ul`用任意数量的`li`元素创建一个。我希望每个`li`元素的宽度为 20%，所以我最终`li`每行有五个元素。

我还希望`ul`元素有一些高度，所以我可以应用底部边框。

如果我在 s 上使用这个类`li`：

```
.result1 { 
  width: 20%;
  float: left;
} 
```

那么 的`ul`高度为 0。我看过推荐的帖子`display: inline-block`，但如果我改用它：

```
.result2 { 
  width: 20%;
  display: inline-block;
} 
```

然后s`ul`有高度，但是 s 之间有空格，`li`所以它们超过了两行。

这一定是我无法理解的 CSS 规范中的内容。如何每行获得五个元素，高度在包含元素上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:53:46.433

添加`overflow: hidden;`到父级`<ul class="results">`

[**小提琴**](http://jsfiddle.net/Lotus/CuCdr/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T17:53:27.100

浮动元素导致父元素崩溃，需要清除父元素。

```
.results:after {
  content: "";
  display: table;
  clear: both;
} 
```

[http://jsfiddle.net/CuCdr/1/](http://jsfiddle.net/CuCdr/1/)

# python - 在因子分解程序中找不到错误

> ID：15506849
> 
> 赞同：0
> 
> 时间：2013-03-19T17:51:42.137
> 
> 标签：python, prime-factoring

我正在尝试编写一个找到 n 的素数分解的程序！. 我之前已经成功完成了，但是我找不到我已经编写的代码，所以我必须重写它！:p 这里是代码：

```
import math                                                                                                                                                 
import numpy as np
import itertools as it
import operator as op

def primes(n):
    """A simple sieve to find the primes less than n"""                                                                                                                                              
    nums = np.arange(3,n+1,2)                                                                                                                               
    sqrtn = int(n**0.5)/2                                                                                                                                   
    for step in nums[:sqrtn]:                                                                                                                               
        if step:
            nums[step*step/2-1::step]=0
    return [2] + map(int, filter(None, nums))

def factFactors(n):
    """Finds the prime factorization of n! using the property found
    here: http://en.wikipedia.org/wiki/Factorial#Number_theory"""                                                                               
    ps = primes(n)                                                                                                                                        
    for p in ps:                                                                                                                             
        e = 0                                                                                                                                               
        for i in it.count(1):                                                                                                                                
            epeice = n/(p**i)                                                                                                                               
            if epeice == 0: break
            e += epeice                                                                                                                                     
        yield p, e                                                                                                                                               

if __name__=="__main__":
    x = list(factFactors(100))
    print x, reduce(op.mul, [p**e for p, e in x], 1)==math.factorial(100) 
```

输出是这样的：

```
[(2, 97), (3, 48), (5, 24), (7, 16), (11, 9), (13, 7), (17, 5), (19, 5), (23, 4), (29, 3), (31, 3), (37, 2), (41, 2), (43, 2), (47, 2), (53, 1), (59, 1), (6
1, 1), (67, 1), (71, 1), (73, 1), (79, 1), (83, 1), (89, 1), (97, 1)] False 
```

我一直在看这个几个小时，我不知道出了什么问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:28:42.837

这段代码在我试验时更改了多次，但当前版本的一个问题是，因为`factFactors`它是一个生成器，

```
x = factFactors(100)                                       
print list(x), reduce(op.mul, [p**e for p, e in x], 1)==math.factorial(100) 
```

调用`list`将耗尽生成器，因此`reduce`没有什么可采取的行动。改为使用`x = list(factFactors(100))`。

-

更正`result`/`results`错字后（好吧，当我开始写这篇文章时就已经存在了！）我无法运行代码：

```
~/coding$ python2.7 factbug4.py
factbug4.py:31: RuntimeWarning: overflow encountered in long_scalars
  print x, reduce(lambda a, b: a*b, [p**e for p, e in x], 1)==math.factorial(100)
[(2, 97), (3, 48), (5, 24), (7, 16), (11, 9), (13, 7), (17, 5), (19, 5), (23, 4), (29, 3), (31, 3), (37, 2), (41, 2), (43, 2), (47, 2), (53, 1), (59, 1), (61, 1), (67, 1), (71, 1), (73, 1), (79, 1), (83, 1), (89, 1), (97, 1)]
Traceback (most recent call last):
  File "factbug4.py", line 31, in <module>
    print x, reduce(lambda a, b: a*b, [p**e for p, e in x], 1)==math.factorial(100)
  File "factbug4.py", line 31, in <lambda>
    print x, reduce(lambda a, b: a*b, [p**e for p, e in x], 1)==math.factorial(100)
TypeError: unsupported operand type(s) for *: 'long' and 'numpy.int32' 
```

但它确实暗示了问题可能是什么。（由于代码不会为我运行，我不能确定，但​​我有理由确定。）返回的大多数元素`primes`不是 Python 任意精度整数，而是有限范围的 numpy 整数：

```
>>> primes(10)
[2, 3, 5, 7]
>>> map(type, primes(10))
[<type 'int'>, <type 'numpy.int32'>, <type 'numpy.int32'>, <type 'numpy.int32'>] 
```

并且对它们的操作可能会溢出。如果我转换`p`为：`e``int`

```
print x, reduce(lambda a, b: a*b, [int(p)**int(e) for p, e in x], 1)==math.factorial(100) 
```

我明白了

```
[(2, 97), (3, 48), (5, 24), (7, 16), (11, 9), (13, 7), 
(17, 5), (19, 5), (23, 4), (29, 3), (31, 3), (37, 2), 
(41, 2), (43, 2), (47, 2), (53, 1), (59, 1), (61, 1), 
(67, 1), (71, 1), (73, 1), (79, 1), (83, 1), (89, 1), (97, 1)] True 
```

如果你想方便`numpy`任意精度的数组索引，你可以使用 dtype `object`，即

```
>>> np.arange(10,dtype=object)
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=object) 
```

但老实说，我建议不要`numpy`在这里使用。

# r - 几种分布的成对图形比较

> ID：15506850
> 
> 赞同：8
> 
> 时间：2013-03-19T17:51:42.083
> 
> 标签：r, heatmap, density-plot, ggally

这是上一个问题的编辑版本。

我们得到了一个*m* x *n*表，其中包含*m个变量（基因等）的**n 个*观测值（样本），我们正在研究每对观测值之间的变量行为 - 例如，具有最高正值或负值的两个观测值相关性。为此，我在 Stadler 等人中看到了一张很棒的图表。自然论文（2011）：

 *![在此处输入图像描述](../Images/ce0db3f7e81bd6f52ce0cefbecee6177.png)

这里可能是要使用的示例数据集。

```
m <- 1000
samples <- data.frame(unif1 = runif(m), unif2 = runif(m, 1, 2), norm1 = rnorm(m), 
                      norm2 = rnorm(m, 1), norm3 = rnorm(m, 0, 5)) 
```

我已经测试过产生这个`gpairs(samples)`的包。`gpairs`这是一个好的开始，但无法将相关系数放在右上角，也无法将密度图放在下角：

![在此处输入图像描述](../Images/3cc14d1a6bf9aee2b83c46246ec352c9.png)

接下来我使用`ggpairs(samples, lower=list(continuous="density"))`了包`GGally`（感谢@LucianoSelzer 在下面发表评论）。现在我们在上角和下角有相关性，但是我们缺少对角线条形图，并且密度图不是热图形状的。

![在此处输入图像描述](../Images/4ce2893062c490b9996cb7ccf5e56639.png)

有什么想法可以使更接近所需图片（第一个）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T19:59:19.687

您可以尝试组合几种不同的绘图方法并组合结果。这是一个示例，可以相应地进行调整：

```
cors<-round(cor(samples),2) #correlations

# make layout for plot layout
laymat<-diag(1:5) #histograms
laymat[upper.tri(laymat)]<-6:15 #correlations
laymat[lower.tri(laymat)]<-16:25 #heatmaps

layout(laymat) #define layout using laymat

par(mar=c(2,2,2,2)) #define marginals etc.

# Draw histograms, tweak arguments of hist to make nicer figures
for(i in 1:5) 
  hist(samples[,i],main=names(samples)[i])

# Write correlations to upper diagonal part of the graph
# Again, tweak accordingly
for(i in 1:4)
  for(j in (i+1):5){
    plot(-1:1,-1:1, type = "n",xlab="",ylab="",xaxt="n",yaxt="n")
    text(x=0,y=0,labels=paste(cors[i,j]),cex=2)
    }

# Plot heatmaps, here I use kde2d function for density estimation
# image function for generating heatmaps
library(MASS)
for(i in 2:5)
  for(j in 1:(i-1)){
     k <- kde2d(samples[,i],samples[,j])
     image(k,col=heat.colors(1000))
    } 
```

编辑：更正了最后一个循环的索引。 ![成对图](../Images/6db13aab7a4280dafac164d18eb58554.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-06T13:40:06.693

您可以使用三个不同的包和两个不同的函数来执行类似的操作，如下所示：

`cor_fun`用于上三角相关计算。 `my_fn` 用于下三角绘图

你还需要`ggpairs`.

```
library(GGally)
library(ggplot2)
library(RColorBrewer)

m <- 1000
samples <- data.frame(unif1 = runif(m), unif2 = runif(m, 1, 2), norm1 = rnorm(m), 
                      norm2 = rnorm(m, 1), norm3 = rnorm(m, 0, 5))

cor_fun <- function(data, mapping, method="pearson", ndp=2, sz=5, stars=TRUE){ #ndp is to adjust the number of decimals

  x <- eval_data_col(data, mapping$x)
  y <- eval_data_col(data, mapping$y)

  corr <- cor.test(x, y, method=method)
  est <- corr$estimate
  lb.size <- sz 

  if(stars){
    stars <- c("***", "**", "*", "")[findInterval(corr$p.value, c(0, 0.001, 0.01, 0.05, 1))]
    lbl <- paste0(round(est, ndp), stars)
  }else{
    lbl <- round(est, ndp)
  }

  ggplot(data=data, mapping=mapping) +
    annotate("text", x=mean(x, na.rm=TRUE), y=mean(y, na.rm=TRUE), label=lbl, size=lb.size)+
    theme(panel.grid = element_blank(), panel.background=element_rect(fill="snow1")) 

}

colfunc<-colorRampPalette(c("darkblue","cyan","yellow","red"))

my_fn <- function(data, mapping){
  p <- ggplot(data = data, mapping = mapping) + 
    stat_density2d(aes(fill=..density..), geom="tile", contour = FALSE) +
    scale_fill_gradientn(colours = colfunc(100)) + theme_classic()
}

ggpairs(samples, columns = c(1,2,3,4,5),
        lower=list(continuous=my_fn),
        diag=list(continuous=wrap("densityDiag", fill="gray92")), #densityDiag is a function
        upper=list(continuous=cor_fun)) + theme(panel.background=element_rect(fill="white")) +
  theme(axis.text.x = element_text(angle = 0, vjust = 1, color = "black")) + 
  theme(axis.text.y = element_text(angle = 0, vjust = 1 , color = "black")) 
```

[![在此处输入图像描述](../Images/171dd218542d53c070b82822883b49a4.png)](https://i.stack.imgur.com/6zsSM.jpg)*

# jquery - JQuery1.8.0：通过 AJAX 从表单发送文件

> ID：15506855
> 
> 赞同：0
> 
> 时间：2013-03-19T17:52:01.473
> 
> 标签：jquery, ajax, forms, cakephp, cakephp-2.3

*我用 CakePHP 开发，最初认为这个问题与 Cake 相关；不是。我已经重写了这个问题，以使我收到的答案更广泛适用*

我有一个表格

```
 <form action"">
      <fieldset> 
      <!---- bunch of fields----->
      <input type="file" name="data[Upload][file]" id="UploadFile">
      <button id="ajaxUploadSubmit"> Submit </button>
      </fieldset>
  </form> 
```

我写的提交函数看起来像：

```
$( "#ajaxUploadSubmit" ).click(function() {
                $.ajax({
                    url:"uploads/add",
                    data: $( "#UploadsAddForm" ).serialize()
                }).done(function(responseText) {
                    alert(responseText);
                  })
                 .fail(function() {
                     alert('failxors');
                  })
                }); 
```

但是这一行返回一个空数组：`$this->request->data`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:56:28.943

我认为您不会停止提交表单：

```
$( "#ajaxUploadSubmit" ).click(function(e) {
      e.preventDefault(); 
```

而不是`click`尝试`submit`：

尝试改变这个：

```
$( "#ajaxUploadSubmit" ).click(function() { 
```

对此：

```
$(".form").submit(function(e) {
    e.preventDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:00:02.357

我只是添加这个答案，所以这个问题可以标记为已回答；事实上 thaJeztah 在 Jai 的回答的第三条评论中回答了这个问题：在这种情况下，问题是我应该使用 FormData() 而不是 Serialize() 如此处所示： [how to do file upload using jquery serialization](https://stackoverflow.com/questions/4545081/how-do-to-file-upload-using-jquery-serialization)

# django - django 固定装置 DateTimeField 运行时警告

> ID：15506858
> 
> 赞同：15
> 
> 时间：2013-03-19T17:52:07.253
> 
> 标签：django, runtime-error, fixtures

我为我的 django 项目设置了一些基本的装置。插入数据库的记录之一如下所示：

```
 {
    "model": "articles.article",
    "pk": 1,
    "fields": {
      "title": "Blackened Recordings Launches",
      "headline": "we're so psyched about our new adventure",
      "content": "<p>We like to make it a point here not to bore you with the not-so-exciting business aspects of making and sharing music, but we're so psyched about our new adventure that we just had to tell you about it as we officially launch our very own record label, Blackened Recordings.</p><p>Some of you, who have followed along throughout the years, are aware that in 1994 we renegotiated our contract with the Warner Music Group, which resulted in a joint venture with our record company for releasing all of our recordings including long form videos. Per that agreement, as of today we have taken ownership of all of our master recordings and Blackened Recordings will be the home of all of our current albums and videos along with all future releases including the December 10 release of the \"Quebec Magnetic\" DVD and Blu-ray.</p><p>You may have heard us say it once or twice or a thousand times before, but it's always been about us taking control of all things 'Tallica to give you 110% on every single level every single time. Forming Blackened Recordings is the ultimate in independence, putting us in the driver's seat of our own creative destiny. We're looking forward to making more music and getting it all out to you in our own unique way.</p>",
      "image": "examples/slide-03.jpg",
      "active": 1,
      "created_at": "2013-03-16 17:41:28"
    }
  }, 
```

这是它对应的模型：

```
class Article(models.Model):
    """News article, displayed on homepage to attract users"""
    class Meta:
        db_table = 'article'
    title = models.CharField(max_length=64)
    headline = models.CharField(max_length=255)
    content = models.TextField()
    image = models.ImageField(upload_to = 'articles/', null=True, blank=True)
    active = models.BooleanField()
    created_at = models.DateTimeField()
    def __unicode__(self):
        return self.title 
```

插入夹具记录时，我收到以下警告：

```
/usr/local/lib/python2.7/dist-packages/django/db/models/fields/__init__.py:827: RuntimeWarning: DateTimeField received a naive datetime (2013-03-16 17:41:28) while time zone support is active.
  RuntimeWarning) 
```

我不知道这里有什么问题。我尝试关注[这篇博](http://note.harajuku-tech.org/datetimefield-received-a-naive-datetime-while)文，但我确实安装了 pytz，并且`USE_TZ=True`在我的 settings.py 中有选项。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-20T14:12:36.470

实际上，该解决方案深深地隐藏在[python 文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#fixtures)中，引用如下：

> 序列化感知日期时间时，包括 UTC 偏移量，如下所示：
> 
> `"2011-09-01T13:20:30+03:00"`

这样的装置被完全接受，在我的情况下是：

```
"2013-03-16T17:41:28+00:00"
"2013-03-17T23:36:12+00:00"
"2013-03-18T13:19:37+00:00" 
```

输出是：

```
$ ./manage.py loaddata articles/fixtures/initial_data.json 
Installed 3 object(s) from 1 fixture(s) 
```

请注意，这`'2013-03-16 17:41:28 UTC+0000'`不是正确的时区感知日期时间格式，它会给您以下错误：

```
DeserializationError: Problem installing fixture 'articles/fixtures/initial_data.json': [u"'2013-03-16 17:41:28 UTC+0000' value has an invalid format. It must be in YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] format."] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-05T14:42:15.017

此外，如果您用于序列化，则在反序列化s 中`yaml`似乎存在错误：`datetime``PyYaml`

[https://code.djangoproject.com/ticket/18867](https://code.djangoproject.com/ticket/18867)

尝试使用`json`作为序列化程序，或者您可以在 .yaml 文件中的日期时间周围添加引号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T18:31:39.000

您可能应该仔细研究您的`created_at`领域（您[知道](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.DateField) `auto_now_add=True`吗？）。

我猜你正在使用什么，所以你可以尝试类似

```
import datetime
from django.utils.timezone import utc

Article.created_at = datetime.datetime.utcnow().replace(tzinfo=utc) 
```

或者您可以通过设置禁用时区支持

```
USE_TZ = False 
```

在你的`settings.py`

或者你可以让你不知道的日期时间知道

```
import datetime
import pytz
utc=pytz.UTC

#  where ever you get your datetime from
unaware = datetime.datetime(2013,3,16,17,41,28,0)

now_aware = utc.localize(unaware) 
```

# combinations - 1,2,3的组合数可以达到一个数n

> ID：15506859
> 
> 赞同：0
> 
> 时间：2013-03-19T17:52:13.233
> 
> 标签：combinations

已经尝试过的部分：方程 x +2y + 3z = n 的解数。令 F(n) 为数。获得解决方案的方法。所以，F(n) = F(n-3) + floor(n/2) + 1。这就是我从 x+ 2y + 3z' = n -3 得到的。对于这种情况 ,(z =0 ) x + 2y = n 。我们得到 , floor(n/2) + 1 个解。我无法达到 f(n) 的一般值示例：8 可以表示为 1+1+1+1+1+1+1+1 、 1+1+1+1+1+1+ 2 , 1+1+1+1+2+2 , 1+1+2+2+2, 2+2+2+2 , 1+1+1+1+1+3 , 1+1+3+ 3 , 1+2+2+3 , 2+3+3 , 1+1+3+3 这是系列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:09:00.943

不完全理解这个顺序，只是一些可以帮助您找到答案的链接：

[http://oeis.org/A008724](http://oeis.org/A008724)

[http://en.wikipedia.org/wiki/Molien_series](http://en.wikipedia.org/wiki/Molien_series)

# html - 使用 Css 样式化 HTML5 表单输入占位符

> ID：15506861
> 
> 赞同：0
> 
> 时间：2013-03-19T17:52:18.630
> 
> 标签：html, forms, placeholder

我有一个占位符的基本输入。我将占位符文本颜色设为浅灰色。但是，当我在输入中单击并键入内容时，颜色保持不变。有没有办法可以在输入内容和未输入内容时更改文本的颜色？

```
<input type="text" placeholder="Your Name"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:03:03.767

不幸的是，目前还没有涵盖所有浏览器的本地方法。但是，您可以使用供应商特定的 css 规则，如本[jsfiddle 所示](http://jsfiddle.net/RYm23/)。

```
::-webkit-input-placeholder {
   color: red;
}

:-moz-placeholder { /* Firefox 18- */
   color: red;  
}

::-moz-placeholder {  /* Firefox 19+ */
   color: red;  
}

:-ms-input-placeholder {  
   color: red;  
} 
```

# android - Android 为图像文件创建自定义 Exif 属性

> ID：15506862
> 
> 赞同：7
> 
> 时间：2013-03-19T17:52:19.320
> 
> 标签：android, jpeg, exif

目前我正在尝试将自定义 exif 标签/数据添加到相册中的图像文件。

我能够修改[`ExifInterface`](http://developer.android.com/reference/android/media/ExifInterface.html)类中定义的现有标签

但是，我想存储自定义数据，例如我的应用用户的用户 ID，但似乎我无法创建自定义 exif 属性

我找到的最接近的解决方案是[here](https://stackoverflow.com/questions/8851425/android-exif-data-in-jpeg-file)，但不起作用，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T21:28:47.283

尝试使用标签保存 Exif 数据：

> “用户评论”

代码：

```
String mString = "Your message here";     
ExifInterface exif = new ExifInterface(path_of_your_jpeg_file);
exif.setAttribute("UserComment", mString);
exif.saveAttributes(); 
```

你可以把你想要的任何东西（作为字符串）放在那里，然后简单地解析字符串。我希望我们可以创建和命名我们自己的 exif 标签，但事实是我们做不到。所以这是我想出的最好的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-18T09:17:37.253

使用标签保存 Exif 数据`"ImageDescription"`

[https://developer.android.com/reference/android/media/ExifInterface.html](https://developer.android.com/reference/android/media/ExifInterface.html)

代码

```
try {
  String imageDescription = "Your image description";     
  ExifInterface exif = new ExifInterface(file_name_of_jpeg);
  exif.setAttribute("ImageDescription", imageDescription);
  exif.saveAttributes();
} catch (IOException e) {
  // handle the error
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-14T15:13:59.997

如果您不能使用现有的 exif 属性（例如“UserComment”或“ImageDescription”），那么您在使用`ExifInterface`.

Exif 属性表示为二进制标记号，其值以二进制数据格式编码。 `ExifInterface`类从程序员那里抽象出来，并提供了一个`setAttribute`方法，其中标签和值作为字符串提供。在幕后，它在字符串形式和相应的二进制属性表示之间进行映射。

问题是`ExifInterface`该类只知道如何映射一组固定的属性。此外，API 不提供将新的（例如自定义）exif 属性的描述符添加到其映射表的方法。

如果你真的很绝望，替代方案是：

*   寻找适用于 Android 的替代库。
*   用反射做一些讨厌的事情，为`ExifInterface`的内部 ( `private`) 映射表添加额外的映射。如果您尝试这样做，您将需要处理这样一个事实，即`ExifInterface`' 的实现随着时间的推移发生了根本性的变化。（在一些旧版本中，属性的编码和解码是在本机代码库中实现的！）

# php - PHP 类型提示静默失败

> ID：15506864
> 
> 赞同：0
> 
> 时间：2013-03-19T17:52:21.050
> 
> 标签：php, type-hinting

我正在尝试将 PHP 类型提示集成到一个新项目中。我真的很喜欢为函数引入一些类型检查的事实。只要我没有调用错误类型的函数，类型提示就可以完美地工作。PHP 没有给出错误消息，而是默默地失败。脚本停止。该页面保持白色，甚至错误日志也不包含任何错误条目。

更具体地说，我有以下功能：

```
 private static function parseFilterResult(FilterResult $filterResult) {
 ... DoSomeStuff ...} 
```

如果我使用 FilterResult 对象调用该函数，则没有问题。如果我用任何其他对象调用该函数。发生静默失败。以前有人见过这种行为吗？

非常感谢马丁

# php - json获取正确的代码

> ID：15506866
> 
> 赞同：-1
> 
> 时间：2013-03-19T17:52:24.117
> 
> 标签：php, json

目前试图让这段代码打印数组中的所有内容，但有一个小问题。

```
$json = file_get_contents('https://api.twitch.tv/kraken/channels/zettslive/follows?limit=10&offset=0');  

$vid_arr = json_decode($json,true);
$vid_count  = count($vid_arr);

foreach ($vid_arr as $vid)
{ 
echo '<img src="'.$vid[1]['user']['logo'].'">';
} 
```

我必须使用`[1]`它才能让它工作。我希望能够回应所有这些。不要一次做一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:59:53.050

```
$json = file_get_contents('https://api.twitch.tv/kraken/channels/zettslive/follows?limit=10&offset=0');  

$vid_arr = json_decode($json,true);
$vid_count  = count($vid_arr);

foreach ($vid_arr['follows'] as $follow)
{ 
echo '<img src="'.$follow['user']['logo'].'">';
} 
```

# css - 无法使用 site.com 平台导入引导 css

> ID：15506871
> 
> 赞同：1
> 
> 时间：2013-03-19T17:52:34.370
> 
> 标签：css, twitter-bootstrap, import, salesforce

我正在尝试通过 site.com/salesforce 平台实现引导程序，但是在导入 css 时，我可以同时导入 bootstrap.css 和 bootstrap.min.css，但是 bootstrap-responsive 和 bootstrap-responsive.min 失败，因为根据site.com，“错误：无法保存 CSS 代码，因为它的格式不正确。确保代码不包含无效字符，例如不匹配或缺少括号，然后重试”。

我认为这是因为 CSS 中的“@”，例如“@-ms-viewport”，但我找不到解决方案。将不胜感激任何解决这个问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T21:05:20.003

一种解决方法是将 css 文件作为文档导入，并选择不将其转换为 css：

![不要转换成样式表](../Images/afe19290a40726007d6f653162796c74.png)

您将能够像往常一样在模板/页面设置区域中添加样式表： ![正常选择样式表](../Images/b313e1e19f503b54b21c4b0d658e48d3.png)

这样做的一个缺点是样式不会被拉入页面编辑器。但是，它们在用户端功能齐全。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T01:29:46.717

我按照 David Scruggs 的建议做了，并将 bootstrap.css 的片段粘贴到 Site.com 编辑器中。我成功粘贴了所有 CSS 选择器，但以下内容除外——

```
.carousel-control.left {
  background-image: -webkit-linear-gradient(left, color-stop(rgba(0, 0, 0, .5) 0%), color-stop(rgba(0, 0, 0, .0001) 100%));
  background-image:         linear-gradient(to right, rgba(0, 0, 0, .5) 0%, rgba(0, 0, 0, .0001) 100%);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000', endColorstr='#00000000', GradientType=1);
  background-repeat: repeat-x;
}
.carousel-control.right {
  right: 0;
  left: auto;
  background-image: -webkit-linear-gradient(left, color-stop(rgba(0, 0, 0, .0001) 0%), color-stop(rgba(0, 0, 0, .5) 100%));
  background-image:         linear-gradient(to right, rgba(0, 0, 0, .0001) 0%, rgba(0, 0, 0, .5) 100%);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#80000000', GradientType=1);
  background-repeat: repeat-x;
}
@-ms-viewport {
  width: device-width;
} 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T20:48:38.313

您可以将带有 @-webkit-[x] 元素的样式表导入 Site.com。问题可能出在其他地方。当其他 CSS 验证器遗漏了一个分号时，我已经看到了这种情况。我认为 Site.com 导入工具比您习惯的其他工具更严格。

当您拥有格式良好的样式表时，导入会更容易，您可以在 Site.com 编辑器中创建一个空的样式表。在编辑该样式表时，您会看到一个标有“编辑样式表代码”的按钮；如果您点击该按钮，您将有一个编辑器对话框，您可以将现有样式表粘贴到零碎中。确保您粘贴在完整的块中——您需要对您粘贴的任何样式项目有完整的定义，包括右括号。

您可以在将样式表逐步粘贴到现有样式表中时“快速保存”样式表，当保存失败时，您会发现 CSS 的格式不正确。您可能会在该块中看到错误并且能够轻松修复它——如果没有，您可以省略它或通过正常的样式表编辑过程创建一个具有相同属性的同名新样式项。

无论哪种方式，您都可以继续逐步粘贴样式表，直到加载了完全有效的样式表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-25T20:29:23.467

我们注意到将自定义 css 文件导入 site.com 的类似问题，它似乎是`calc`标签。前任：`width: calc(50% - 30px);`

# android - 从我的程序中推荐关于打开和关闭第三方软件的工作方法

> ID：15506874
> 
> 赞同：0
> 
> 时间：2013-03-19T17:52:39.053
> 
> 标签：android

我从我的程序中打开第三方软件，例如：

```
Intent i2 = new Intent();
                 PackageManager manager = getPackageManager();
                 i2 = manager.getLaunchIntentForPackage("com.3rd.program"); 
                 i2.addCategory(Intent.CATEGORY_LAUNCHER);
                 startActivity(i2); 
```

当这个程序关闭时，我需要在我的程序中做一些事情。

如何识别该程序关闭并返回我的程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:27:44.493

你不是在找`startActivityForResult`是吗？

[https://developer.android.com/reference/android/app/Activity.html#StartingActivities](https://developer.android.com/reference/android/app/Activity.html#StartingActivities)

> **public void startActivityForResult (Intent intent, int requestCode, Bundle options)**
> 
> *在 API 级别 16 中添加*
> 
> 启动一项您希望在完成后获得结果的活动。当此活动退出时，您的 onActivityResult() 方法将使用给定的 requestCode 调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:20:29.733

> 如何识别该程序关闭

就像您的网页链接到另一个网站时一样，您不会发现用户在那之后去了哪里。

> 并返回我的程序

当您调用的活动返回前台时，它将`startActivity()`通过正常的生命周期方法（例如， ）。`onResume()`但是，请记住，用户可以离开其他应用程序而不返回您的应用程序，例如按下 HOME 按钮。

# python - Openerp 7 复选框

> ID：15506879
> 
> 赞同：1
> 
> 时间：2013-03-19T17:52:52.400
> 
> 标签：python, xml, module, openerp

我需要在OpenerP表单中添加复选框。检查该框后，然后需要在下面显示文本框。如果在该框中只需要在该框中查询。

如何在 openerp (ver 7) 中执行此要求？

狐狸前任：

[x] 有资格获得 EPF

公积金号码 : [ ***_* __ *_* __ *_* _** ]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:13:05.697

整个表单是自定义的，还是继承自现有表单？无论哪种方式，您都希望向表中添加几个字段（在`.py`文件中）：

```
'epf_eligible': fields.boolean("eligible for EPF"),
'epf_number': fields.integer("EPF Number", size=10), 
```

然后你需要将显示逻辑放在`..._view.xml`文件中，它看起来像这样：

```
<field name="epf_eligible"/>
<field name="epf_number" attrs="{'invisible':[('epf_eligible','=',False)]}"/> 
```

现在，`EPF Number`只会在`eligible for EPF`is时出现`True`。

# jquery - jquery ajax自动完成不知道如何使它工作

> ID：15506883
> 
> 赞同：-3
> 
> 时间：2013-03-19T17:53:05.430
> 
> 标签：jquery

我第一次尝试使用 jquery ajax 自动完成扩展器，到目前为止它对我来说并不奏效。请指出错误和建议以使这项工作。

```
 <script type="text/javascript">

$(document).ready(function()
{
                $.support.cors=true;
        $('#firstName').autocomplete({

                alert('HEY');
                minLength:2,
                source: function( request, response) {
                $.ajax({
                    type: 'GET',
                    url: 'http://MyServer/MyService/api/StaffSearch/GetStaffByFirstName'
                    data: {'term': request.term},
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(data) {
                        alert('success in autocomplete');
                        response(data);
                    },
                    error: function(msg) {
                        alert('error in autocomplete');
                    }
                })
        },

        })//end autocomplete

});
    </script>

    <div>
        <label for="firstName">First Name</label>
        <input type="text" id="firstName" name="firstName">
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:54:20.543

你错过`$`了`.ajax({`

# jquery - 将 jQuery 函数应用于特定变量

> ID：15506898
> 
> 赞同：0
> 
> 时间：2013-03-19T17:53:41.870
> 
> 标签：jquery

我想将 flip_error() 仅应用于这些具有空值的输入字段。就目前而言，它适用于所有这些：

```
function flip_error(element){
    element.addClass('flipped');
}

function add_color(element, color){
    element.css('background-color', color);
}

    $('form input:not(.submit, .email, .test)').each(function(){
        if ($(this).val() == '') {
            flip_error(input.parent()); 
        }

        else {
            add_color($(this), white);
        }

    }); 
```

[在此处](http://jsfiddle.net/mM6Uh/3/)查看完整代码

问题是，当我第一次单击提交并且没有在输入字段中输入任何文本时，会翻转为红色（另一个输入字段），到目前为止还不错。但是，如果我用文本填充其中一个输入字段，它仍然会变成红色，这是错误的，因为它需要应用 add_color() 函数。

# ruby-on-rails - 坚持 embeds_one 关系 mongoid

> ID：15506901
> 
> 赞同：1
> 
> 时间：2013-03-19T17:53:44.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid

```
class Order
 include Mongoid::Document
 include Mongoid::Timestamps

 #relationships
  embeds_one :user_detail

  #fields
  field :description

  #validations  
  validates :user_detail, presence: true
end 
```

这是按顺序嵌入的对象：

```
class UserDetail
  include Mongoid::Document
  include Mongoid::Timestamps

  #fields
  field :name, :type => String
  field :zip_code, :type => String
  field :email, :type => String

  # Relationships
  embedded_in :order

  #validations
  validates_presence_of :name, :zip_code, :email
end 
```

`order`我想用`user_detail`对象对象保存/持久化 mongodb`embedded_in` `order`对象。

我尝试过：

```
order = Order.new(description: "checking description")
order.user_detail = Order.new(:name => "John", :zip_code => "26545", :email => "john@john.com")
order.save! 
```

但我得到验证失败：

```
o.save!
Mongoid::Errors::Validations: 
Problem:
  Validation of Order failed.
Summary:
  The following errors were found: User detail is invalid
Resolution:
  Try persisting the document with valid data or remove the validations.... 
```

**我该如何解决这个问题？**我正在使用 mongoid **3.x**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:56:33.453

应该：

```
order = Order.new(description: "checking description")
order.user_detail = UserDetail.new(:name => "John", :zip_code => "26545", :email => "john@john.com")
order.save! 
```

你`Order.new`有`OrderDetail.new`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T05:42:58.360

您不需要手动创建 user_detail 使用

`order.user_detail = UserDetail.new... order.save!`

如果您添加 autobuild 属性，嵌入的 user_detail 将自动创建

`embeds_one :user_detail autobuild: true`

如果您也想在数据库中保留 user_detail，请不要忘记添加

`validates_presence_of :user_detail`

否则您将不会在 mongo db 中看到持久化的 user_detail。

# actionscript-3 - AS3/Adobe AIR 从纵向开始并改为横向变得错误

> ID：15506904
> 
> 赞同：1
> 
> 时间：2013-03-19T17:53:51.873
> 
> 标签：actionscript-3, air, adobe, resolution

我会尽量用有限的英语解释这一点！

好的，我正在构建一个应用程序，它将在手机上处于纵向模式，在平板电脑上处于横向模式。我这样做的方法是，首先计算显示尺寸而不是基本上说`"if display size is more than 5 inches, consider this device to be a tablet".`

这很好用。我将 Adob​​e Flash CS6 与 FlashDevelop 一起使用，因此一旦应用程序启动，我就会将纵向模式设为默认模式。如果设备是平板电脑，它会使用**stage.setAspectRatio(StageAspectRatio.LANDSCAPE);**

这也很好用。现在，问题是 stage.stageWidth 不会将其值更改为新的 aspectRatio。这是一个简单的修复，只需使用 stage.stageHeight 作为宽度。但是蜂窝/ics 平板电脑/设备上的系统栏不会改变。

抱歉解释不好，但让我告诉你一些数字......

这就是我在平板电脑上启动应用程序时发生的情况。

1.  应用程序从肖像开始。高度 = 1232 宽度 = 800。如您所见，显示分辨率应为 1280x720，但无法通过任何命令获取系统栏的高度。我已经测试了所有返回分辨率的东西，但它们都没有返回完整的分辨率（1280x720）。

2.  现在应用程序变成横向（因为它是平板电脑）并获得此分辨率高度：800，宽度 1232。

你可以想象这是错误的。因为系统栏在底部。分辨率应为高度：752，宽度 1280。

* * *

**有什么解决办法吗？我一直在考虑一种解决方法，它基本上可以计算出 systembar **应该****是什么。但在我开始之前，我想知道是否有任何方法可以解决这个问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:03:21.767

-1。我不知道是否有官方的方式来做这些，但你的第一个标准听起来类似于：

[链接：AS3/AIR：如果手机使用纵向，如果平板电脑使用横向？](https://stackoverflow.com/questions/15346702/as3-air-if-phone-use-portrait-if-tablet-use-landscape?rq=1)

这也解决了某些设备默认方向是“纵向”而某些设备是“横向”的问题

-2。至于屏幕的面积

以下应给出设备的像素尺寸：

```
stage.align = StageAlign.TOP_LEFT;
stage.scaleMode = StageScaleMode.NO_SCALE;    
stage.fullScreenWidth;
stage.fullScreenHeight;

//import flash.system.Capabilities;
Capabilities.screenResolutionX;
Capabilities.screenResolutionY; 
```

然后使用它（我假设你一直在使用）*应该*返回可用区域减去状态栏（我读过的一篇文章提到它对 iPad 是正确的，但一些 Android 平板电脑没有考虑到导航栏）：

```
stage.stageWidth;
stage.stageHeight; 
```

那么这个应该给出屏幕分辨率减去状态栏和导航栏区域的正确值：

```
//import flash.display.Screen
var screenBounds:Rectangle = Screen.mainScreen.visibleBounds; 
```

# android - 无法将孩子附加到场景

> ID：15506906
> 
> 赞同：2
> 
> 时间：2013-03-19T17:53:54.727
> 
> 标签：android, andengine

我正在尝试将文本对象附加到标题**处理玩家死亡事件** [http://www.matim-dev.com/full-game-tutorial---part-13.html下给出的场景](http://www.matim-dev.com/full-game-tutorial---part-13.html)

我有一个扩展 Player 类的 AnimatedSprite。我创建了一个播放器，

```
mPlayer = new Player(x, y, resourceManager.getVertexBufferObjectManager(), resourceManager.getCamera(), mPhysicsWorld)
{
    @Override
    public void onDie() {
        if (!gameOverDisplayed)
        {
            displayGameOverText();
        }
    }
}; 
```

该`displayGameOverText()`方法给出为，

```
private void displayGameOverText()
{
    mCamera.setChaseEntity(null);
    gameOverText.setPosition(mCamera.getCenterX(), mCamera.getCenterY());
    attachChild(gameOverText);
    gameOverDisplayed = true;
} 
```

我还在`createScene()`方法中初始化了gameOverText，

```
gameOverText = new Text(0, 0, resourceManager.getFontArial(), "Game Over!", mVBOM); 
```

在这个阶段，代码工作正常，文本**游戏结束！**`onDie()`调用时显示。

但是当我重新设计`onDie()`下面给出的方法时，文本**游戏结束了！**`onDie()`调用时不显示。

```
@Override
public void onDie() {
    if (!gameOverDisplayed)
    {
        mCamera.setChaseEntity(null);
        gameOverText.setPosition(mCamera.getCenterX(), mCamera.getCenterY());
        attachChild(gameOverText);
        gameOverDisplayed = true;
    }
} 
```

这种行为对我来说似乎很奇怪，因为代码是相同的。唯一的区别是我在后一种`onDie()`方法中给出了内联代码。

有人可以帮助我了解导致这种行为的原因。logcat 中没有关于此的日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:11:16.513

在第一个版本中，您`displayGameOverText()`从`Player`类中调用该方法。但我猜该方法`displayGameOverText()`是在`Player`课堂之外的某个地方。这就是为什么第二个版本不起作用的原因，因为该行`attachChild(gameOverText);`实际上将 附加`gameOverText`到`Player`而不是附加到`Scene`.

`Player`似乎扩展了该类`Sprite`，因此您可以将想要的任何内容附加到播放器。每个`Entity`(Sprite, Text, Rectangle...) 都可以附加到另一个`Entity`或一个`Scene`（场景也是一个实体）。但它并不总是具有相同的效果（或者甚至可能根本不可见）！所以我想这就是在第二个版本中发生的事情。文本附加到播放器，但播放器没有附加到场景，或者文本不在屏幕上。

当您将某些东西附加到实体（例如将文本附加到播放器）时，该东西的位置总是相对于它的父实体。因此，如果它`Player`位于附加到场景的位置 (100,100) 处，并且文本附加到位置 (50,50) 到播放器 - 文本实际上位于场景中的位置 (150,150)。

长话短说，这条线`attachChild(gameOverText);`需要从场景中调用，而不是从玩家内部调用。

希望这可以帮助！

# camera - 不需要计算机的流式 IP 摄像机解决方案？

> ID：15506911
> 
> 赞同：1
> 
> 时间：2013-03-19T17:54:07.730
> 
> 标签：camera, ip-camera

我想将视频流嵌入到我的网页中，这是我们自己的基于云的软件的一部分。视频应该是低延迟的（如视频会议），并且最好包含音频，但不是必需的。我很乐意从服务器端提供流式二进制数据，并使用 HTML5 视频将其嵌入到页面中。

我不满意的是从一开始就捕获视频数据的能力。客户还没有合适的解决方案，正在向我们寻求帮助。视频将通过我们的服务器设备进行路由，而不是直接连接到视频源的嵌入式设备。

使用 USB 或计算机内置摄像头对我们来说是一个已知数量。我想了解更多关于独立相机的信息。

某些型号的相机有自己的 API 文档[（示例）](http://www.paillassou.com/DCS-2121/CGI_2121.pdf)。从我所读到的内容看来，制造商通常会拥有自己的 API，他们会在许多或所有模型上重复这些 API，并且每个制造商的 API 都会有所不同。然而，我只是做了表面阅读，希望从已经研究过这个，甚至可能有第一手经验的人那里获得更多的知识。

*   独立相机通常包含 API 吗？（这不是一个常见的要求，所以安全软件可以使用多行摄像头吗？）或者如果不是 API，如何从车载网络服务器检索数据？它通常是基于闪存的吗？也许我可以从那里捕获一个可重复使用的视频流？或者流格式通常是多种多样的？

    尝试让服务器端捕获该数据时会遇到什么？

*   与 USB 摄像头解决方案相比，独立设备的延迟如何？

*   您是否有挑选适合通过服务器流式传输的独立摄像机的技巧？

我在使用 JavaScript（HTML5 和 Node.JS）、Perl 和 Java 方面经验丰富。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:29:20.060

每个相机制造商都有自己的接入点。通常，您应该能够请求快照或 MJPEG 流，但它可能会有所不同。看看CodeProject上的[这个条目；](http://www.codeproject.com/Articles/15537/Camera-Vision-video-surveillance-on-C)它解决了两种常见的方法。 [这是另一个](http://robseder.wordpress.com/2012/09/15/a-simple-foscam-ip-viewer-in-c/)专门针对 Foscam 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:04:03.927

获得一个好的 NAS，我建议 Synology，查看他们支持的 IP 网络摄像头的长列表。您可以将它们连接到集线器或路由器或任何您想要的东西。它不是“塔”中的“计算机”，但它可以完成许多计算机工作，并且可以在您的计算机关闭或离开时保持打开状态，并执行诸如视频源、种子文件、备份等之类的操作。

我不是所有功能的专家，所以我不知道如何让它在没有录制的情况下播放，但即使它做到了，至少它是分开的。Synology 是一个受欢迎的品牌，它有很多授权和未授权的插件。检查它们，看看是否适合您。

# iis-7 - 从 IIS 7 上的经典 ASP 创建 COM+ 组件时出现“Server.CreateObject 失败”

> ID：15506912
> 
> 赞同：5
> 
> 时间：2013-03-19T17:54:08.760
> 
> 标签：iis-7, asp-classic, com+, createobject

我有一个在 Windows Server 2008 R2 Standard 的 IIS 7 上运行的经典 ASP 应用程序。

它在一天中的某个时候工作正常，突然，在没有任何代码更改的情况下，它在实例化 COM+ 组件时开始抛出以下错误：

```
MyObject = Server.CreateObject("MyCustomComponent.MyCustomObject") 
```

> 服务器对象错误“ASP 0177：80004005”
> 
> Server.CreateObject 失败
> 
> /path/script.asp，第 xx 行
> 
> 80004005

可能是什么问题呢？我进行了互联网搜索，发现了几十个可能的答案，但似乎都与问题无关。我知道我使用了正确的对象名称——它在不久前还在工作。什么也没有变！我花了将近 2 个小时试图弄清楚这一点，但结果却是空的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T17:54:08.760

## 错误 80004005 的一般故障排除

鉴于导致此错误的潜在原因种类繁多，可能很难解决此错误。快速的[互联网搜索](http://www.google.com/search?q=Server+object+error+'ASP+0177+%3A+80004005'++Server.CreateObject+Failed)显示了大量的建议。

将可能的问题缩小到合理列表的关键方面是代码正在工作，但突然开始失败，*没有任何代码更改*。假设没有重大的 IIS 或 COM 配置更改，这排除了以下可能性，例如，为组件使用了错误的类名，或组件未正确注册。相反，必须将注意力转向 IIS 和 COM 本身的某些配置，这些配置可能会导致不一致的行为，而不会发生设置更改。

*   查看对访问站点的用户、为运行 IIS 设置的用户或 COM 组件设置为模拟的用户帐户所做的任何用户帐户权限更改。
*   查看在 IIS 中为站点或应用程序设置的应用程序池。
*   查看 ASP 代码中的所有权限/身份验证/模拟代码。
*   查看 COM 组件本身的设置。

## 实际问题

最终，问题归结为多个 IIS 站点和应用程序，每个都位于不同的 IIS 应用程序池中，使用相同的 COM 组件。这本身不是问题，除了 COM 组件被设置为允许最多 1 个应用程序池一次访问它。

页面工作了一段时间的原因是它设法第一个抓住了 COM 组件。如果有人访问它，使用相同 COM 组件的其他站点/页面/应用程序池将会失败。由于 COM 组件被设置为在 3 分钟后释放，这使得其他页面在被访问时有机会“抓住”它并阻止它在正在测试的新页面中使用。

## 修复

以下是在 Windows Server 2008 中增加 COM 组件的应用程序池限制的详细说明：

1.  转到控制面板 > 管理工具 > 组件服务。

2.  在树中，浏览 Component Services > My Computer > COM+ Applications 并找到您的自定义组件。

3.  右键单击组件并获取属性。

4.  在 Pooling & Recyling 属性页选项卡上，将 Pool Size 设置为大于 1 的数字，以匹配将同时从 IIS 或其他地方访问组件的潜在应用程序池的数量。

    ![COM+ 池化和回收](../Images/4766596b7295838f441282e1d6452216.png)

5.  再次尝试您的网页，瞧，它又可以工作了！

# autohotkey - 如何在 AutoHotKey 的热字符串中声明变量？

> ID：15506914
> 
> 赞同：5
> 
> 时间：2013-03-19T17:54:12.733
> 
> 标签：autohotkey

我正在尝试创建一个脚本，该脚本将采用名称并将其添加到预先编写的文本块中。

本质上，我想写“emailDave”并将名字 Dave 插入到一个文本字符串中，然后发送。我只是不确定如何以这种方式修改热字符串。

我目前正在使用一种方法，该方法使用 InputBox 询问名称并将名称插入文本中。这在桌面上工作得很好，但我使用的是 Windows 8，由于某些可怕的原因，InputBox 不会出现在应用程序内（即在桌面模式之外）。

我知道必须有一种方法可以使用我输入的文本“email vs emailDave”来影响变量，而不是让我用 InputBox 进行这种鹅追逐。

也就是说，如果有人知道在 Windows 8 应用程序（尤其是邮件）中显示 InputBox 的解决方法，那将非常有帮助。

当前脚本在桌面上运行良好但不能在应用程序中运行：

```
::email::
InputBox, thename, Enter the name, What is the name
SendInput Hi %thename%,{enter}{enter}Sample text.{enter}{enter}Thanks,{enter}Zach
Return 
```

有没有办法让这样的工作？

```
::email{%thename%}::
SendInput Hi %thename%,{enter}{enter}Sample text.{enter}{enter}Thanks,{enter}Zach
Return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:45:32.820

他的呢：

```
:?*:email::
Input, thename, v,{Enter}{Space}
If (thename = "")
{
    SendInput, {Bs}email `
    Return
}
StringLen,MyLen, thename
MyLen++
SendInput {BackSpace %MyLen%}Hi +%thename%,{Enter 2}Sample text.{Enter 2}Thanks,{Enter}Zach
Return 
```

通过在名称字符串前面添加 +，第一个字母将大写。

输入：“emailrobert{Enter}”或“emailRobert{Enter}”都给出：

嗨罗伯特，

示例文本。

谢谢，
扎克

和 email{Space} 将给 email{Space}。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T19:01:46.420

如果你真的想避免使用 InputBox，我有一个更复杂的解决方案给你。您可以使用名为[RegEx Powered Dynamic HotStrings](http://www.autohotkey.com/board/topic/15015-regex-powered-dynamic-hotstrings/)的库。

将该链接处的文件保存到包含 AutoHotkey.exe 的文件夹内的 lib 文件夹中（如有必要，请创建）。

在此示例中，您键入`emailJohn`后跟一个`Space`.

```
#Include lib\DynamicHotstrings.ahk

hotstrings("email(\w+)\s", "email")
Return

email:
    SendInput, Hi %$1%,{Enter 2}Sample text.{Enter 2}Thanks,{Enter}Zach
return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:04:37.920

```
::email::
inputbox, name
msgbox, %name%
return 
```

将“dave”从热门字符串中删除

测试后，将 替换为`msgbox, %name%`您想要的任何发送线路。

# javascript - Symfony、grunt、requires.js 和 Assetic

> ID：15506915
> 
> 赞同：3
> 
> 时间：2013-03-19T17:54:13.587
> 
> 标签：javascript, symfony, less, assetic, gruntjs

我们的应用程序使用了 amd 加载的 js 和使用 less 定义的 css 的组合。对于我们的开发环境，我们使用单个文件运行并使用前端脚本。但是对于生产，我热衷于删除前端要求并编译/压缩库。

目前我们可以在 symfony 之外使用 grunt 来做这件事——但是将它自动化并与 symfony 系统集成是非常可取的。

例如：

开发：Assetic 使用符号链接从包中映射文件——这允许在项目中进行编辑和测试。

Prod：Assetic 运行 Grunt 并在将文件部署到 Web 目录之前对其进行压缩。

我热衷于保留与树枝模板的集成以及 Assetic 提供的文件的版本控制。

显然 grunt 确实与 Assetic 重叠——但他们/他们能很好地一起玩吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:01:40.437

我只会使用 Assetic，除非有特定的东西需要使用 Grunt。它们可以共存并很好地发挥作用，但重叠似乎非常多余。我们将多个过滤器与 Assetic 一起用于我们的自动化部署，而不是使用 require.js，我们有额外的脚本块，我们在每个模板的基础上覆盖这些块，这样我们就不会在不需要它的页面上加载脚本。

下面是我们的 Assetic 在一些过滤器配置下的样子：

```
assetic:
debug:          %kernel.debug%
use_controller: false
bundles:        ['AcmeBundle', 'FOSUserBundle', 'FooBundle']
java:           /usr/local/bin/java
filters:
    less:
        node:       /usr/local/bin/node
        node_paths: [/usr/local/lib/node_modules]
        apply_to:   "\.less$"
    cssrewrite: ~
    cssembed:
        jar:      %kernel.root_dir%/Resources/java/cssembed-0.4.5.jar
        apply_to: "\.css$|\.less$"
    yui_css:
        jar:      %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar
        apply_to: "\.css$"
    yui_js:
        jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar
        apply_to: "\.js$"
    closure:
        jar: %kernel.root_dir%/Resources/java/compiler.jar 
```

# java - FopFactory.newInstance() 时出现 Fop 异常

> ID：15506922
> 
> 赞同：2
> 
> 时间：2013-03-19T17:54:27.193
> 
> 标签：java, exception, struts2, apache-fop

我正在使用 struts 2，我正在尝试使用 fop 从 xml 和 xsl 创建一个 pdf 文件。我在这两个 url [http://svn.apache.org/viewvc/xmlgraphics/fop/trunk/examples/embedding/java/embedding/ExampleXML2PDF.java?view=markup](http://svn.apache.org/viewvc/xmlgraphics/fop/trunk/examples/embedding/java/embedding/ExampleXML2PDF.java?view=markup)和[http://justcode.wordpress .com/2009/01/16/generare-pdf-con-struts2-fop-xml-e-xslt/](http://justcode.wordpress.com/2009/01/16/generare-pdf-con-struts2-fop-xml-e-xslt/)

这是我的代码，我正在尝试使用两种不同的方式

```
public class JspToPdfTest extends ActionSupport{

private InputStream inputStream;
private Xml2PdfManager xml2PdfManager;

public InputStream getInputStream() {
    return inputStream;
}
public void setInputStream(InputStream inputStream) {
    this.inputStream = inputStream;
}   
public JspToPdfTest(){
    xml2PdfManager = new Xml2PdfManager();
}

public String doPrint()  {
    String xml = "C:\\Users\\Administrator\\workspace\\path\\actions\\forms\\testeFOPxml.xml";
    String xslPath = "C:\\Users\\Administrator\\workspace\\path\\actions\\forms\\xml2fo.xsl";
    InputStream xmlInput = new ByteArrayInputStream(xml.getBytes());

    ByteArrayOutputStream out = (ByteArrayOutputStream) xml2PdfManager.convertXML2PDF(xmlInput, new File(xslPath));

    inputStream = new ByteArrayInputStream(out.toByteArray());
    return SUCCESS;
}

public String xmlToPdf() {
                try {
                    System.out.println("FOP ExampleXML2PDF\n");
                    System.out.println("Preparing...");

                    File baseDir = new File("C:\\Users\\Administrator\\workspace\\path\\actions\\forms\\");
                    File outDir = new File(baseDir, "out");
                    outDir.mkdirs();

                    File xmlfile = new File(baseDir, "testeFOPxml.xml");
                    File xsltfile = new File(baseDir, "xml2fo.xsl");
                    File pdffile = new File(outDir, "ResultXML2PDF.pdf");

                    final FopFactory fopFactory = FopFactory.newInstance();

                    FOUserAgent foUserAgent = fopFactory.newFOUserAgent();

                    OutputStream out = new java.io.FileOutputStream(pdffile);
                    out = new java.io.BufferedOutputStream(out);

                    try {
                        Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, out);

                    TransformerFactory factory = TransformerFactory.newInstance();
                    Transformer transformer = factory.newTransformer(new StreamSource(xsltfile));

                        transformer.setParameter("versionParam", "2.0");

                        Source src = new StreamSource(xmlfile);

                        Result res = new SAXResult(fop.getDefaultHandler());

                        transformer.transform(src, res);
                    } finally {
                        out.close();
                    }
                } catch (Exception e) {
                e.printStackTrace(System.err);
                    System.exit(-1);
                }
            return SUCCESS;
            }
} 
```

和 struts.xml 动作

```
<action name="printDomAction2" class="com.somePackage.actions.JspToPdfTest"  method="xmlToPdf"> -->
        <result type="stream" name="success"> 
            <param name="contentType">application/pdf</param>
            <param name="contentDisposition">filename="dom.pdf"</param> 
            <param name="bufferSize">1024</param> 
        </result> 
        <interceptor-ref name="defaultStack"/> 
    </action>

    <action name="printDomAction" class="com.somePackage.actions.JspToPdfTest"  method="doPrint">
        <result type="stream" name="success">
            <param name="contentType">application/pdf</param>
            <param name="contentDisposition">filename="dom.pdf"</param>
            <param name="bufferSize">1024</param>
        </result>
        <interceptor-ref name="defaultStack"/>
    </action> 
```

最后是 xml2PdfManager.convertXML2PDF 方法：

```
public OutputStream convertXML2PDF(InputStream xml, File xsl) {
    ByteArrayOutputStream out = new ByteArrayOutputStream();

    FopFactory fopFactory = FopFactory.newInstance();

    TransformerFactory tFactory = TransformerFactory.newInstance();

    try {
    Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, out);

    Source src = new StreamSource(xml);

    Source xsltSrc = new StreamSource(xsl);
    Transformer transformer = tFactory.newTransformer(xsltSrc);

    Result res = new SAXResult(fop.getDefaultHandler());
    transformer.transform(src, res);
    } catch (Exception e) {
        e.printStackTrace(System.err);
    }
    return out;
    } 
```

在这两种情况下，我都有：

```
java.lang.NoSuchMethodError:     
org.apache.xmlgraphics.util.Service.providerNames(Ljava/lang/Class;)Ljava/util/Iterator; 
```

当我做 FopFactory.newInstance();

任何能帮助我的建议都会很棒！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:59:57.360

我解决了我的问题！我有 xmlgraphics-commons-1.3 而不是 xmlgraphics-commons-1.5。这很奇怪，因为我使用了 fop bin 附带的所有库。

顺便说一下，在浏览器上转换和显示 pdf 文件的代码如下：

```
<action name="printDomAction" class="com.somePackage.actions.JspToPdfTest"  method="xmlToPdf">
        <result type="stream" name="success">
            <param name="contentType">application/pdf</param>
            <param name="contentDisposition">filename="ResultXML2PDF.pdf"</param>
            <param name="bufferSize">1024</param>
        </result>
        <interceptor-ref name="defaultStack"/>
    </action> 
```

和方法

```
private InputStream inputStream;

public String xmlToPdf() {
                try {
                    System.out.println("FOP ExampleXML2PDF\n");
                    System.out.println("Preparing...");

                    // Setup directories
                    File baseDir = new File("C:\\Users\\Administrator\\workspace\\path\\actions\\forms\\");
                    File outDir = new File(baseDir, "out");
                    outDir.mkdirs();

                    // Setup input and output files
                    File xmlfile = new File(baseDir, "testeFOPxml.xml");
                    File xsltfile = new File(baseDir, "xml2fo.xsl");
                    File pdffile = new File(outDir, "ResultXML2PDF.pdf");

                    System.out.println("Input: XML (" + xmlfile + ")");
                    System.out.println("Stylesheet: " + xsltfile);
                    System.out.println("Output: PDF (" + pdffile + ")");
                    System.out.println();
                    System.out.println("Transforming...");

                    // configure fopFactory as desired
                    final FopFactory fopFactory = FopFactory.newInstance();

                    FOUserAgent foUserAgent = fopFactory.newFOUserAgent();
                    // configure foUserAgent as desired

                    ByteArrayOutputStream out = new ByteArrayOutputStream();

                    TransformerFactory tFactory = TransformerFactory.newInstance();

                    Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF,foUserAgent, out);
                    //Setup input
                    Source src = new StreamSource(xmlfile);

                    //Setup Transformer
                    Source xsltSrc = new StreamSource(xsltfile);
                    Transformer transformer = tFactory.newTransformer(xsltSrc);

                    //Make sure the XSL transformation's result is piped through to FOP
                    Result res = new SAXResult(fop.getDefaultHandler());
                    transformer.transform(src, res);

                    System.out.println("Success!");
                    ByteArrayOutputStream baos = out;
                    inputStream = new ByteArrayInputStream(baos.toByteArray());
                } catch (Exception e) {
                e.printStackTrace(System.err);
                    System.exit(-1);
                }

            return SUCCESS;
            } 
```

感谢大家的提示和帮助！

# wordpress - htaccess 和 wordpress 冲突

> ID：15506923
> 
> 赞同：0
> 
> 时间：2013-03-19T17:54:32.640
> 
> 标签：wordpress, .htaccess

我的网站有问题，因为它似乎有太多重定向。

例如，如果我用谷歌浏览器打开我的网站，我会收到以下错误：

```
 "Errore 310 (net::ERR_TOO_MANY_REDIRECTS)" 
```

以下是我的 htaccess：

* * *

```
 # BEGIN W3TC Browser Cache
            <IfModule mod_mime.c>
                AddType text/css .css
                AddType text/x-component .htc
                AddType application/x-javascript .js
                AddType application/javascript .js2
                AddType text/javascript .js3
                AddType text/x-js .js4
                AddType text/html .html .htm
                AddType text/richtext .rtf .rtx
                AddType image/svg+xml .svg .svgz
                AddType text/plain .txt
                AddType text/xsd .xsd
                AddType text/xsl .xsl
                AddType text/xml .xml
                AddType video/asf .asf .asx .wax .wmv .wmx
                AddType video/avi .avi
                AddType image/bmp .bmp
                AddType application/java .class
                AddType video/divx .divx
                AddType application/msword .doc .docx
                AddType application/vnd.ms-fontobject .eot
                AddType application/x-msdownload .exe
                AddType image/gif .gif
                AddType application/x-gzip .gz .gzip
                AddType image/x-icon .ico
                AddType image/jpeg .jpg .jpeg .jpe
                AddType application/json .json
                AddType application/vnd.ms-access .mdb
                AddType audio/midi .mid .midi
                AddType video/quicktime .mov .qt
                AddType audio/mpeg .mp3 .m4a
                AddType video/mp4 .mp4 .m4v
                AddType video/mpeg .mpeg .mpg .mpe
                AddType application/vnd.ms-project .mpp
                AddType application/x-font-otf .otf
                AddType application/vnd.oasis.opendocument.database .odb
                AddType application/vnd.oasis.opendocument.chart .odc
                AddType application/vnd.oasis.opendocument.formula .odf
                AddType application/vnd.oasis.opendocument.graphics .odg
                AddType application/vnd.oasis.opendocument.presentation .odp
                AddType application/vnd.oasis.opendocument.spreadsheet .ods
                AddType application/vnd.oasis.opendocument.text .odt
                AddType audio/ogg .ogg
                AddType application/pdf .pdf
                AddType image/png .png
                AddType application/vnd.ms-powerpoint .pot .pps .ppt .pptx
                AddType audio/x-realaudio .ra .ram
                AddType application/x-shockwave-flash .swf
                AddType application/x-tar .tar
                AddType image/tiff .tif .tiff
                AddType application/x-font-ttf .ttf .ttc
                AddType audio/wav .wav
                AddType audio/wma .wma
                AddType application/vnd.ms-write .wri
                AddType application/vnd.ms-excel .xla .xls .xlsx .xlt .xlw
                AddType application/zip .zip
            </IfModule>
            <IfModule mod_expires.c>
                ExpiresActive On
                ExpiresByType text/css A31536000
                ExpiresByType text/x-component A31536000
                ExpiresByType application/x-javascript A31536000
                ExpiresByType application/javascript A31536000
                ExpiresByType text/javascript A31536000
                ExpiresByType text/x-js A31536000
                ExpiresByType text/html A3600
                ExpiresByType text/richtext A3600
                ExpiresByType image/svg+xml A3600
                ExpiresByType text/plain A3600
                ExpiresByType text/xsd A3600
                ExpiresByType text/xsl A3600
                ExpiresByType text/xml A3600
                ExpiresByType video/asf A31536000
                ExpiresByType video/avi A31536000
                ExpiresByType image/bmp A31536000
                ExpiresByType application/java A31536000
                ExpiresByType video/divx A31536000
                ExpiresByType application/msword A31536000
                ExpiresByType application/vnd.ms-fontobject A31536000
                ExpiresByType application/x-msdownload A31536000
                ExpiresByType image/gif A31536000
                ExpiresByType application/x-gzip A31536000
                ExpiresByType image/x-icon A31536000
                ExpiresByType image/jpeg A31536000
                ExpiresByType application/json A31536000
                ExpiresByType application/vnd.ms-access A31536000
                ExpiresByType audio/midi A31536000
                ExpiresByType video/quicktime A31536000
                ExpiresByType audio/mpeg A31536000
                ExpiresByType video/mp4 A31536000
                ExpiresByType video/mpeg A31536000
                ExpiresByType application/vnd.ms-project A31536000
                ExpiresByType application/x-font-otf A31536000
                ExpiresByType application/vnd.oasis.opendocument.database A31536000
                ExpiresByType application/vnd.oasis.opendocument.chart A31536000
                ExpiresByType application/vnd.oasis.opendocument.formula A31536000
                ExpiresByType application/vnd.oasis.opendocument.graphics A31536000
                ExpiresByType application/vnd.oasis.opendocument.presentation A31536000
                ExpiresByType application/vnd.oasis.opendocument.spreadsheet A31536000
                ExpiresByType application/vnd.oasis.opendocument.text A31536000
                ExpiresByType audio/ogg A31536000
                ExpiresByType application/pdf A31536000
                ExpiresByType image/png A31536000
                ExpiresByType application/vnd.ms-powerpoint A31536000
                ExpiresByType audio/x-realaudio A31536000
                ExpiresByType image/svg+xml A31536000
                ExpiresByType application/x-shockwave-flash A31536000
                ExpiresByType application/x-tar A31536000
                ExpiresByType image/tiff A31536000
                ExpiresByType application/x-font-ttf A31536000
                ExpiresByType audio/wav A31536000
                ExpiresByType audio/wma A31536000
                ExpiresByType application/vnd.ms-write A31536000
                ExpiresByType application/vnd.ms-excel A31536000
                ExpiresByType application/zip A31536000
            </IfModule>
            <IfModule mod_deflate.c>
                <IfModule mod_headers.c>
                    Header append Vary User-Agent env=!dont-vary
                </IfModule>
                    AddOutputFilterByType DEFLATE text/css text/x-component application/x-javascript application/javascript text/javascript text/x-js text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon application/json
                <IfModule mod_mime.c>
                    # DEFLATE by extension
                    AddOutputFilter DEFLATE js css htm html xml
                </IfModule>
            </IfModule>
            <FilesMatch "\.(css|htc|js|js2|js3|js4|CSS|HTC|JS|JS2|JS3|JS4)$">
                FileETag MTime Size
                <IfModule mod_headers.c>
                    Header set Pragma "public"
                    Header set Cache-Control "public"
                </IfModule>
            </FilesMatch>
            <FilesMatch "\.(html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml|HTML|HTM|RTF|RTX|SVG|SVGZ|TXT|XSD|XSL|XML)$">
                FileETag MTime Size
                <IfModule mod_headers.c>
                    Header set Pragma "public"
                    Header set Cache-Control "public"
                </IfModule>
            </FilesMatch>
            <FilesMatch "\.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|json|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip|ASF|ASX|WAX|WMV|WMX|AVI|BMP|CLASS|DIVX|DOC|DOCX|EOT|EXE|GIF|GZ|GZIP|ICO|JPG|JPEG|JPE|JSON|MDB|MID|MIDI|MOV|QT|MP3|M4A|MP4|M4V|MPEG|MPG|MPE|MPP|OTF|ODB|ODC|ODF|ODG|ODP|ODS|ODT|OGG|PDF|PNG|POT|PPS|PPT|PPTX|RA|RAM|SVG|SVGZ|SWF|TAR|TIF|TIFF|TTF|TTC|WAV|WMA|WRI|XLA|XLS|XLSX|XLT|XLW|ZIP)$">
                FileETag MTime Size
                <IfModule mod_headers.c>
                    Header set Pragma "public"
                    Header set Cache-Control "public"
                </IfModule>
            </FilesMatch>
            # END W3TC Browser Cache
            # BEGIN W3TC CDN
            <FilesMatch "\.(ttf|otf|eot|woff)$">
            <IfModule mod_headers.c>
                Header set Access-Control-Allow-Origin "*"
            </IfModule>
            </FilesMatch>
            # END W3TC CDN
            # BEGIN W3TC Page Cache core
            <IfModule mod_rewrite.c>
                RewriteEngine On
                RewriteBase /
                RewriteCond %{HTTP_USER_AGENT} (2\.0\ mmp|240x320|alcatel|amoi|asus|au\-mic|audiovox|avantgo|benq|bird|blackberry|blazer|cdm|cellphone|danger|ddipocket|docomo|dopod|elaine/3\.0|ericsson|eudoraweb|fly|haier|hiptop|hp\.ipaq|htc|huawei|i\-mobile|iemobile|j\-phone|kddi|konka|kwc|kyocera/wx310k|lenovo|lg|lg/u990|lge\ vx|midp|midp\-2\.0|mmef20|mmp|mobilephone|mot\-v|motorola|netfront|newgen|newt|nintendo\ ds|nintendo\ wii|nitro|nokia|novarra|o2|openweb|opera\ mobi|opera\.mobi|palm|panasonic|pantech|pdxgw|pg|philips|phone|playstation\ portable|portalmmm|ppc|proxinet|psp|pt|qtek|sagem|samsung|sanyo|sch|sec|sendo|sgh|sharp|sharp\-tq\-gx10|sie|small|smartphone|softbank|sonyericsson|sph|symbian|symbian\ os|symbianos|toshiba|treo|ts21i\-10|up\.browser|up\.link|uts|vertu|vodafone|wap|willcome|windows\ ce|windows\.ce|winwap|xda|zte) [NC]
                RewriteRule .* - [E=W3TC_UA:_low]
                RewriteCond %{HTTP_USER_AGENT} (acer\ s100|android|archos5|blackberry9500|blackberry9530|blackberry9550|cupcake|docomo\ ht\-03a|dream|htc\ hero|htc\ magic|htc_dream|htc_magic|incognito|ipad|iphone|ipod|lg\-gw620|liquid\ build|maemo|mot\-mb200|mot\-mb300|nexus\ one|opera\ mini|samsung\-s8000|series60.*webkit|series60/5\.0|sonyericssone10|sonyericssonu20|sonyericssonx10|t\-mobile\ mytouch\ 3g|t\-mobile\ opal|tattoo|webmate|webos) [NC]
                RewriteRule .* - [E=W3TC_UA:_high]
                RewriteCond %{HTTP_COOKIE} w3tc_referrer=.*(google\.com|yahoo\.com|bing\.com|ask\.com|msn\.com) [NC]
                RewriteRule .* - [E=W3TC_REF:_search_engines]
                RewriteCond %{HTTPS} =on
                RewriteRule .* - [E=W3TC_SSL:_ssl]
                RewriteCond %{SERVER_PORT} =443
                RewriteRule .* - [E=W3TC_SSL:_ssl]
                RewriteCond %{HTTP:Accept-Encoding} gzip
                RewriteRule .* - [E=W3TC_ENC:_gzip]
                RewriteCond %{REQUEST_METHOD} !=POST
                RewriteCond %{QUERY_STRING} =""
                RewriteCond %{REQUEST_URI} \/$
                RewriteCond %{HTTP_COOKIE} !(comment_author|wp-postpass|w3tc_logged_out|wordpress_logged_in) [NC]
                RewriteCond %{HTTP_USER_AGENT} !(bot|ia_archive|slurp|crawl|spider) [NC]
                RewriteCond "%{DOCUMENT_ROOT}/wp-content/cache/page_enhanced/%{HTTP_HOST}/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.html%{ENV:W3TC_ENC}" -f
                RewriteRule .* "/wp-content/cache/page_enhanced/%{HTTP_HOST}/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.html%{ENV:W3TC_ENC}" [L]
            </IfModule>
            # END W3TC Page Cache core
            # BEGIN WordPress
            <IfModule mod_rewrite.c>
            RewriteEngine On
            RewriteBase /
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} !-d
            RewriteRule . /index.php [L]
            </IfModule>
            # END WordPress 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T22:16:02.083

清除您的浏览器缓存和 cookie，奇怪的是，检查您 PC 上的日期是否正确。这两个似乎是该问题的最大原因。

# java - Tomcat 和 Java 升级导致 CMS 主要收集期间的 CPU 峰值

> ID：15506925
> 
> 赞同：2
> 
> 时间：2013-03-19T17:54:36.217
> 
> 标签：java, concurrency, cpu

最近，我们升级了在我们的生产环境中运行的第三方Web 应用程序的`Java (1.6.0_18->1.6.0_38)`和版本。我们很快收到警报说服务器上的 CPU 每天有几次超过 50% 的峰值。经过进一步分析，我观察到峰值与并发标记扫描主要 gc 的同时发生，并且完成它们所需的总 CPU 时间大大增加，特别是在 CMS-concurrent-mark 和 CMS-concurrent - 扫描阶段：`Tomcat (6.0.32->7.0.34)``J2EE`

前：

```
2013-03-08T14:36:49.861-0500: 553875.681: [GC [1 CMS-initial-mark: 4152134K(8303424K)] 4156673K(8380096K), 0.0067893 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
2013-03-08T14:36:49.868-0500: 553875.688: [CMS-concurrent-mark-start]
2013-03-08T14:36:55.682-0500: 553881.503: [GC 553881.503: [ParNew: 72675K->4635K(76672K), 0.0322031 secs] 4224809K->4157567K(8380096K), 0.0327540 secs] [Times: user=0.12 sys=0.01, real=0.03 secs] 
2013-03-08T14:36:58.224-0500: 553884.045: [CMS-concurrent-mark: 8.320/8.356 secs] [Times: user=9.18 sys=0.02, real=8.36 secs] 
2013-03-08T14:36:58.224-0500: 553884.045: [CMS-concurrent-preclean-start]
2013-03-08T14:36:58.276-0500: 553884.097: [CMS-concurrent-preclean: 0.051/0.052 secs] [Times: user=0.06 sys=0.00, real=0.05 secs] 
2013-03-08T14:36:58.277-0500: 553884.097: [CMS-concurrent-abortable-preclean-start]
2013-03-08T14:37:01.458-0500: 553887.279: [GC 553887.279: [ParNew: 72795K->4887K(76672K), 0.0332472 secs] 4225727K->4158532K(8380096K), 0.0337703 secs] [Times: user=0.13 sys=0.00, real=0.03 secs] 
 CMS: abort preclean due to time 2013-03-08T14:37:03.296-0500: 553889.117: [CMS-concurrent-abortable-preclean: 1.462/5.020 secs] [Times: user=2.04 sys=0.02, real=5.02 secs] 
2013-03-08T14:37:03.299-0500: 553889.119: [GC[YG occupancy: 22614 K (76672 K)]553889.120: [Rescan (parallel) , 0.0151518 secs]553889.135: [weak refs processing, 0.0356825 secs] [1 CMS-remark: 4153644K(8303424K)] 4176259K(8380096K), 0.0620445 secs] [Times: user=0.11 sys=0.00, real=0.06 secs] 
2013-03-08T14:37:03.363-0500: 553889.183: [CMS-concurrent-sweep-start]
2013-03-08T14:37:07.248-0500: 553893.069: [GC 553893.069: [ParNew: 73047K->5136K(76672K), 0.0510894 secs] 3182253K->3115235K(8380096K), 0.0516111 secs] [Times: user=0.19 sys=0.00, real=0.05 secs] 
2013-03-08T14:37:08.277-0500: 553894.097: [CMS-concurrent-sweep: 4.856/4.914 secs] [Times: user=5.67 sys=0.02, real=4.91 secs] 
2013-03-08T14:37:08.277-0500: 553894.097: [CMS-concurrent-reset-start]
2013-03-08T14:37:08.325-0500: 553894.145: [CMS-concurrent-reset: 0.048/0.048 secs] [Times: user=0.07 sys=0.00, real=0.05 secs] 
```

后：

```
2013-03-07T17:18:01.323-0500: 180055.128: [CMS-concurrent-mark: 10.765/20.646 secs] [Times: user=50.25 sys=3.32, real=20.65 secs] 
2013-03-07T17:18:01.323-0500: 180055.128: [CMS-concurrent-preclean-start]
2013-03-07T17:18:01.401-0500: 180055.206: [CMS-concurrent-preclean: 0.076/0.078 secs] [Times: user=0.08 sys=0.00, real=0.08 secs] 
2013-03-07T17:18:01.401-0500: 180055.206: [CMS-concurrent-abortable-preclean-start]
2013-03-07T17:18:03.074-0500: 180056.879: [GC 180056.880: [ParNew: 76670K->8512K(76672K), 0.1024039 secs] 5980843K->5922977K(8380096K), 0.1028797 secs] [Times: user=0.28 sys=0.04, real=0.10 secs] 
2013-03-07T17:18:05.447-0500: 180059.253: [CMS-concurrent-abortable-preclean: 3.132/4.046 secs] [Times: user=3.94 sys=0.07, real=4.05 secs] 
2013-03-07T17:18:05.448-0500: 180059.254: [GC[YG occupancy: 51161 K (76672 K)]180059.254: [Rescan (parallel) , 0.0243232 secs]180059.279: [weak refs processing, 0.2053571 secs] [1 CMS-remark: 5914465K(8303424K)] 5965627K(8380096K), 0.2569077 secs] [Times: user=0.33 sys=0.01, real=0.26 secs] 
2013-03-07T17:18:05.706-0500: 180059.512: [CMS-concurrent-sweep-start]
2013-03-07T17:18:12.511-0500: 180066.316: [CMS-concurrent-sweep: 6.804/6.804 secs] [Times: user=13.98 sys=0.80, real=6.80 secs] 
2013-03-07T17:18:12.511-0500: 180066.316: [CMS-concurrent-reset-start]
2013-03-07T17:18:12.558-0500: 180066.363: [CMS-concurrent-reset: 0.047/0.047 secs] [Times: user=0.11 sys=0.02, real=0.05 secs] 
```

在这些持续约一分钟的峰值期间，Tomcat 服务器响应时间从平均 2 毫秒变为大约 90 秒。在生产 3 天后，我们回滚了更改，此后没有看到 CPU 峰值。您是否知道可能导致此行为的 JDK 或 Tomcat 中的任何更改？注意：此 Web 应用程序在堆中缓存了大量数据（启动时高达 3GB）。

以下是 JVM 设置：

```
(Before) Tomcat 6 / JDK 1.6.0_18:
JAVA_HOME="/usr/local/java/jdk1.6.0_18"
JAVA_OPTS="$JAVA_OPTS -server -d64 -XX:PermSize=128m -XX:MaxPermSize=128m"
CATALINA_OPTS="$CATALINA_OPTS -Xms8192m -Xmx8192m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:CMSInitiatingOccupancyFraction=50 -XX:+UseCMSInitiatingOccupancyOnly -verbose:gc -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xloggc:/env/tomcat-instance/logs/gc.log -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=(omitted) -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false

(After) Tomcat 7 / JDK 1.6.0_38:
JAVA_HOME="/usr/local/java/jdk1.6.0_38"
JAVA_OPTS="$JAVA_OPTS -server -d64 -XX:PermSize=128m -XX:MaxPermSize=128m"
CATALINA_OPTS="$CATALINA_OPTS -Xms8192m -Xmx8192m -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:CMSInitiatingOccupancyFraction=50 -XX:+UseCMSInitiatingOccupancyOnly -verbose:gc -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xloggc:/env/tomcat-instance/logs/gc.log -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=(omitted) -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false 
```

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:59:28.087

轶事反馈 - 我们在 6u2n 中遇到了一个严重的内存泄漏错误，直到 7 才修复：

> [http://bugs.sun.com/view_bug.do?bug_id=7013538](http://bugs.sun.com/view_bug.do?bug_id=7013538)
> 
> [http://bugs.sun.com/view_bug.do?bug_id=7042582](http://bugs.sun.com/view_bug.do?bug_id=7042582)

6u21 是我使用过的最安全的 Java 6 JRE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:52:56.263

您同时升级了 Tomcat 和 JVM，因此峰值可能是由其中任何一个引起的。您可以限制 GC 的线程数。

`-XX:ParallelGCThreads=12`

如果您运行多个 JVM，请确保 GC 线程数不超过内核数。也看看 JVM 1.7。

使用这些来查看有效的 jvm 参数并查找更改：

```
-XX:+UnlockDiagnosticVMOptions
-XX:+PrintFlagsFinal
-XX:+LogVMOutput
-XX:LogFile=logs/jvm.log 
```

# ios - iOS UIWebView 检测混合 SSL 内容

> ID：15506928
> 
> 赞同：0
> 
> 时间：2013-03-19T17:54:51.497
> 
> 标签：ios, uiwebview

您将如何检测在 WebView 中显示包含非 SSL 资产的 SSL URL 的任何尝试？就像浏览器给你一个混合 SSL 警告一样。

[我在UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)或[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)上看不到任何明显的属性。我可以继承 NSURLProtocol，并以某种方式将非 SSL 连接传回 UIWebView。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:35:23.497

一种解决方案是创建您的自定义 URL 缓存并将其设为默认值，以便您可以捕获所有 HTTP 请求，然后您可以检查混合的 SSL 内容。

这是一个例子：

```
@interface MonitoringURLCache : NSURLCache
@end

@implementation MonitoringURLCache
- (NSCachedURLResponse*)cachedResponseForRequest:(NSURLRequest *)request {
    NSURL *requestURL = [request URL];
    NSURL *pageURL = [request mainDocumentURL];

    if ([[pageURL scheme] isEqualToString:@"https"] && [[requestURL scheme] isEqualToString:@"http"]) {
        NSLog(@"Non safe resource: %@ referenced from page: %@", requestURL, pageURL);
    }

    return [super cachedResponseForRequest:request];
}
@end

/// Register your custom cache
MonitoringURLCache *cache = [[MonitoringURLCache alloc] init];
[NSURLCache setSharedURLCache:cache];

/// Make a request to a website with mixed SSL content
NSURL *url = [NSURL URLWithString:@"https://some-website-with-mixed-ssl-content/"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[webview loadRequest:request]; 
```

# android - 无法在中启动活动组件信息

> ID：15506931
> 
> 赞同：0
> 
> 时间：2013-03-19T17:54:54.477
> 
> 标签：android, android-emulator

在 Android 模拟器中启动我的应用程序时，它崩溃并出现以下错误我附上了下面的代码文件。请检查代码并建议我寻求解决方案

**错误日志**

```
03-19 17:42:07.613: W/Trace(901): Unexpected value from nativeGetEnabledTags: 0
03-19 17:42:07.623: W/Trace(901): Unexpected value from nativeGetEnabledTags: 0
03-19 17:42:08.273: D/dalvikvm(901): GC_FOR_ALLOC freed 64K, 7% free 2514K/2696K, paused 44ms, total 47ms
03-19 17:42:08.294: I/dalvikvm-heap(901): Grow heap (frag case) to 3.569MB for 1050832-byte allocation
03-19 17:42:08.354: D/dalvikvm(901): GC_FOR_ALLOC freed 1K, 5% free 3539K/3724K, paused 57ms, total 57ms
03-19 17:42:08.454: D/dalvikvm(901): GC_CONCURRENT freed <1K, 5% free 3576K/3732K, paused 10ms+22ms, total 100ms
03-19 17:42:08.614: D/AndroidRuntime(901): Shutting down VM
03-19 17:42:08.614: W/dalvikvm(901): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
03-19 17:42:08.624: E/AndroidRuntime(901): FATAL EXCEPTION: main
03-19 17:42:08.624: E/AndroidRuntime(901): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mypiano/com.example.mypiano.Piano}: java.lang.NullPointerException
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.os.Looper.loop(Looper.java:137)
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-19 17:42:08.624: E/AndroidRuntime(901):  at java.lang.reflect.Method.invokeNative(Native Method)
03-19 17:42:08.624: E/AndroidRuntime(901):  at java.lang.reflect.Method.invoke(Method.java:511)
03-19 17:42:08.624: E/AndroidRuntime(901):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-19 17:42:08.624: E/AndroidRuntime(901):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-19 17:42:08.624: E/AndroidRuntime(901):  at dalvik.system.NativeStart.main(Native Method)
03-19 17:42:08.624: E/AndroidRuntime(901): Caused by: java.lang.NullPointerException
03-19 17:42:08.624: E/AndroidRuntime(901):  at com.example.mypiano.Piano.onCreate(Piano.java:118)
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.app.Activity.performCreate(Activity.java:5104)
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-19 17:42:08.624: E/AndroidRuntime(901):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-19 17:42:08.624: E/AndroidRuntime(901):  ... 11 more
03-19 17:42:39.023: I/Process(901): Sending signal. PID: 901 SIG: 9 
```

**钢琴.java**

```
package com.example.mypiano;

import android.app.Activity;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.RadioButton;

public class Piano extends Activity {
MediaPlayer curSnd;
Button sa,ri,ga,ma,pa,da,ni;
RadioButton msc,ani,hrn,rb;
OnClickListener radioListener;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_piano);
        System.out.print("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXxxx");
        sa = (Button)findViewById(R.id.B1);
        ri = (Button)findViewById(R.id.B2);
        ga = (Button)findViewById(R.id.B3);
        ma = (Button)findViewById(R.id.B4);
        pa = (Button)findViewById(R.id.B5);
        da = (Button)findViewById(R.id.B6);

        AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 20, 0);

        radioListener = new OnClickListener(){

            @Override
            public void onClick(View v) {
                System.out.println("coming here 1");
                // TODO Auto-generated method stub
                RadioButton rb= (RadioButton)v;
                curSnd = MediaPlayer.create(Piano.this,R.raw.rb);
                playSound(curSnd);
                switch(rb.getId())
                {
                case R.id.music : System.out.print("MUSIC");break;
                case R.id.animals:System.out.print("ABIMALS");break;
                case R.id.horns: System.out.print("HORN");break;
                }
            }
        };      
        msc  = (RadioButton)findViewById(R.id.music);
        msc.setOnClickListener(radioListener);

        ani  = (RadioButton)findViewById(R.id.animals);
        ani.setOnClickListener(radioListener);

        hrn  = (RadioButton)findViewById(R.id.horns);
        hrn.setOnClickListener(radioListener);

        sa.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                System.out.print("SA playing");
                // TODO Auto-generated method stub
                curSnd = MediaPlayer.create(Piano.this,R.raw.sa);
                curSnd.start();
            }
        });
        ri.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                curSnd = MediaPlayer.create(Piano.this,R.raw.ri);
                curSnd.start();
            }
        });
        ga.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                curSnd = MediaPlayer.create(Piano.this,R.raw.ga);
                curSnd.start();
            }
        });
        ma.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                curSnd = MediaPlayer.create(Piano.this,R.raw.ma);
                curSnd.start();
            }
        });
        pa.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                curSnd = MediaPlayer.create(Piano.this,R.raw.pa);
                curSnd.start();
            }
        });
        da.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                curSnd = MediaPlayer.create(Piano.this,R.raw.da);
                curSnd.start();
            }
        });
        ni.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                curSnd = MediaPlayer.create(Piano.this,R.raw.ni);
                curSnd.start();
            }
        });

    }
    private void playSound(MediaPlayer mediaPlayer) {
        mediaPlayer.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_piano, menu);
        return true;
    }

} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mypiano"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.mypiano.Piano"
        android:label="@string/app_name" >
        <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    </application>

</manifest> 
```

**活动.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@drawable/piano"
    tools:context=".Piano" >

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="128dp"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
        android:id="@+id/B1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="1" />

        <Button
        android:id="@+id/B2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="2" />

        <Button
        android:id="@+id/B3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="3" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="128dp"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
        android:id="@+id/B4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="4" />

        <Button
        android:id="@+id/B5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="5" />

        <Button
        android:id="@+id/B6"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="6" />

    </LinearLayout>

    </LinearLayout>

    <RadioGroup
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <RadioButton
        android:id="@+id/music"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:gravity="center_vertical|start|fill_vertical"
        android:text="MUSIC" />

    <RadioButton
    android:id="@+id/animals"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="ANIMALS" />

    <RadioButton
    android:id="@+id/horns"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="HORN" />
</RadioGroup>
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:29:49.577

你好像忘记初始化了`ni`

```
ni = (Button) findViewById (R.id.buttonName); 
```

所以你到`null`了这里

```
ni.setOnClickListener(new View.OnClickListener() { 
```

`onClick`此外，这只是一个建议，但您可以通过在 xml 中定义`Buttons`类似的内容来节省大量代码

```
<Button
...
android:onClick="functionName"/> 
```

然后在您的代码中使用 switch 案例或类似来定义您的功能逻辑

```
public void functionName(View v)
{
    switch (v.getId())
    case R.id.button1
        // do something 
```

语法可能不完全正确，但这应该给你的想法。然后你没有所有的听众，因为他们都做同样的事情，除了 set a `resource`。

# jquery - 在多个元素上使用带有 css 的 toggle()

> ID：15506932
> 
> 赞同：1
> 
> 时间：2013-03-19T17:54:57.097
> 
> 标签：jquery, css

我有多个不同高度的 div 需要切换，每个 div 都有相同的类。实现这一目标的最佳方法是什么？

[http://jsfiddle.net/hS6RH/41/](http://jsfiddle.net/hS6RH/41/)

```
$('.smallify').on('click', function() {
    if ($(this).parent('.container').css('height', '');) {
        $(this).parent('.container').css('height', '20px');
    } else {
        $(this).parent('.container').css('height', '');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T17:59:10.437

您的问题不太清楚，但这可能是您正在寻找的（基于您的 jsFiddle）

```
$('.smallify').on('click', function() {
    $(this).siblings('ul').toggle();
}); 
```

链接：http: [//jsfiddle.net/zsh6U/](http://jsfiddle.net/zsh6U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:58:09.263

我认为应该这样做：

```
$('.smallify').on('click', function() {
    $("ul", $(this).parent('.container')).toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:05:31.910

您可以尝试切换课程：

```
$('.smallify').on('click', function() {
   $(this).closest('.container').toggleClass('full');
}); 
```

CSS类是：

```
.full{height:300px;} 
```

# c - sparc64 上的 DBX 核心转储和堆栈跟踪输入/输出寄存器

> ID：15506934
> 
> 赞同：1
> 
> 时间：2013-03-19T17:55:12.690
> 
> 标签：c, core, sparc, dbx

假设我有这些功能

```
void foo(int a, int b, int c);
void bar(int d);
void start(); 
```

我得到一个看起来像这样的核心转储

```
foo(<value of a>, <value of b>, <value of c>, <three garbage values>)
bar(<value of d>, <five garbage values>)
start(<six garbage values>)
.... [other functions] 
```

所以开始调用 bar，它调用 foo，我们在 foo 中崩溃了。问题是，堆栈中的这些值是在调用每个函数时跟踪 %o1、..、%o5 寄存器的值，还是当时的 %i0、..、%i5 寄存器的值崩溃的原因（意味着如果函数更改了这些输入寄存器之一，堆栈跟踪中的值会不同）？

我问的原因是因为我认为这是输出寄存器的值，但是客户最近升级了他们的硬件并且有一个核心转储，其中堆栈跟踪中的一个参数看起来有问题。调用者的反汇编看起来是正确的，即使是用于设置该特定参数的寄存器，我已经检查了通常的类型不匹配、有符号/无符号等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:53:34.000

堆栈跟踪通常显示每次调用的堆栈帧转储（请原谅重言式）。函数参数后跟返回地址、指向前一个堆栈帧的指针等。这些是你的垃圾值。有关堆栈布局的详细信息，您可以搜索“AIX 调用约定”之类的内容。生成核心转储时，无法判断调用函数时堆栈上的值是什么。您会看到崩溃时的值。因此，如果函数为形参分配新值或参数由于错误（如堆栈缓冲区溢出）而被覆盖，则值将与调用时的值不同。

# entity-framework - 带有显式加载的 EF 5.0 错误？

> ID：15506936
> 
> 赞同：0
> 
> 时间：2013-03-19T17:55:19.053
> 
> 标签：entity-framework, code-first

我有两个实体，SalesRep 和 Customer。我的客户有一个 OEM SalesRep 和一个 Direct SalesRep，因此有两个外键，如下所示：

```
public int OemRepId { get; set; }
[ForeignKey("OemRepId")]
public SalesRep OemRep { get; set; }

public int DirectRepId { get; set; }
[ForeignKey("DirectRepId")]
public SalesRep DirectRep { get; set; } 
```

在我的上下文中，我禁用了延迟加载（并且属性不是虚拟的）。我想在整个项目中强制显式加载。这是我在上下文的构造函数中禁用 LazyLoading 的方法。

```
this.Configuration.LazyLoadingEnabled = false; 
```

现在，当我从上下文中收到客户属性时，OemRep 和 DirectRep 都是正确的 NULL。

然后我可以像这样显式加载 OemRep：

```
//I already have my CurrentCustomer entity loaded with its OemRep and DirectRep both NULL
_ctx.Entry(currentCustomer).Reference(c => c.OemRep).Load(); 
```

如果我在此行之后立即中断代码，我会看到 OemRep 引用属性现在已加载。这是错误。

如果 OemRepId 和 DirectRepId 恰好相同，则 OemRep 和 DirectRep 引用属性都已填充。如果它们碰巧不同，我必须像这样显式加载它们：

```
_ctx.Entry(currentCustomer).Reference(c => c.OemRep).Load();
_ctx.Entry(currentCustomer).Reference(c => c.DirectRep).Load(); 
```

为什么在我没有显式加载 DirectRep 时填充它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:01:03.147

EF 尝试使用可用的数据填充上下文中的所有属性。

知道当它加载带有 id 的 SalesRep 行时，它可以使用该 id 作为外键`1764`填充类型的所有属性，这很聪明。`SalesRep`

在您的情况下，这意味着加载 an`OemRep`可能会填充`DirectRep`属性，如果它引用相同的数据库行。

如果外键引用不同`SalesReps`，则必须显式加载两者。

# asp.net - 是否可以显示详细信息查看内联

> ID：15506938
> 
> 赞同：0
> 
> 时间：2013-03-19T17:55:32.220
> 
> 标签：asp.net, css, detailsview

就是这样，真的。我的 ASP.NET 页面上有一个 DetailsView 和一个按钮，并且该按钮始终出现在 DetailsView 下方。使用浮动 DIV 会以其他方式破坏事物，那么有什么方法可以抑制 DetailsView 之后的换行符，并让它与按钮内联显示？

我尝试将`Display:Inline`CSS 应用到 DetailsView，但没有奏效。

编辑 - 在下面添加代码

```
<asp:DetailsView ID="dvPremisesYardName" runat="server" datasourceid="SQLGeneralDetails" DefaultMode="Edit" AutoGenerateRows="False" FieldHeaderStyle-CssClass="fieldtitleyardname" 
    GridLines="None" onchange="hideControl('imgGeneralDetailsTick');"  >
    <Fields>
        <asp:TemplateField HeaderText="Yard Name">
            <EditItemTemplate>
                <asp:DropDownList ID="ddlPremisesYardName" runat="server" DataSourceID="SQLPremisesLookup" DataTextField="PremisesYardName" DataValueField="PremisesID" AutoPostBack="True" 
                    SelectedValue='<%# Bind("AdmissionPremisesID")%>' AppendDataBoundItems="True"  >
                    <asp:ListItem Text="Unknown" Value="" />
                </asp:DropDownList>                                                    
            </EditItemTemplate>
        </asp:TemplateField>
    </Fields>
</asp:DetailsView>
<asp:Button ID="btnPremisesAdd" runat="server" Text="Add New Premises" />
<asp:Button ID="btnPremisesEdit" runat="server" Text="Edit"  /> 
```

![截屏](../Images/d7a3aa9e99fa25a7c29f6898cfcdc1cf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:57:49.543

正如您所说，**您不想使用 float div**。最简单的方法是使用表。

虽然我们不喜欢使用表格进行页面布局，但我想不出其他解决方案。

```
<table>
  <tr>
    <td><asp:DetailsView .../></td>
    <td><asp:Button.../></td>
    <td><asp:Button.../></td>
  </tr>
</table> 
```

# javascript - 如何使用 ngResource 为集合与单个记录指定不同的 URL

> ID：15506940
> 
> 赞同：1
> 
> 时间：2013-03-19T17:55:50.147
> 
> 标签：javascript, rest, angularjs

我正在尝试使用 ngResource 来使用 firebase rest API。此 API 使用稍微不同的 URL 来检索集合和单个记录。例如，我有一个可以访问的集合：

[https://angular-resource-test.firebaseIO.com/systems.json](https://angular-resource-test.firebaseIO.com/systems.json)

但是，如果我想访问我使用的单个系统：

[https://angular-resource-test.firebaseIO.com/systems/1.json](https://angular-resource-test.firebaseIO.com/systems/1.json)

如何在资源声明中为此指定基于参数的 URL？

通常我会做类似的事情

```
app.factory('System', ['$resource', function($resource) {
  var System = $resource(
    'https://angular-resource-test.firebaseIO.com/systems/:id.json',
    {id: "@id"},
    {update: {method: "PUT"}}
  );
  return System;
}]); 
```

但是集合失败了，因为它缺少结尾的 .json。或者，当我指定适用于集合的 URL 时，选择单个行的情况会失败。有关示例，请参见此 jsfiddle：

[http://jsfiddle.net/D5E6w/15/](http://jsfiddle.net/D5E6w/15/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T02:39:54.807

有两种方法可以在资源中发送 HTTP GET。

*   get : 期望收到一个对象
*   查询：期望收到一个数组

您的 api 不是很安静，因此，您将需要 2 个资源来做您想做的事情，因为它们使用不同的 URI（请参阅 Carl 的回答）。我不知道您是否可以编辑您的 REST 服务，但最好的方法是： [https](https://angular-resource-test.firebaseIO.com/systems/) ://angular-resource-test.firebaseIO.com/systems/用于查询（期望数组） [https://angular -resource-test.firebaseIO.com/systems/:id](https://angular-resource-test.firebaseIO.com/systems/:id)获取。（期待一个对象）

使用此服务，您可以使用您的资源：

```
var System = $resource(
  'https://angular-resource-test.firebaseIO.com/systems/:id',
  {id: "@id"},
  {update: {method: "PUT"}}
); 
```

你会这样打电话：

```
var systems = System.query({});
var system = System.get({id:1}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:11:04.407

您的问题应该通过使用 isArray: true 来解决您的查询和获取 System 和 SystemType 的方法。它与您的 json 在服务器端的格式化方式有关。有关扩展讨论，请参阅 angular 文档。[http://jsfiddle.net/D5E6w/24/](http://jsfiddle.net/D5E6w/24/)

```
{
   update: { method: "PUT" },
   query: { method: "GET", isArray: true },
   get: { method: "GET", isArray: true }
} 
```

这是一个包含系统集合和单个记录的工作示例。请注意每个的 isArray 值。[http://jsfiddle.net/D5E6w/51/](http://jsfiddle.net/D5E6w/51/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T08:42:43.037

这是我替换整个 $resource URL 的解决方案。我需要它，因为我正在使用[HAL](http://stateless.co/hal_specification.html) Rest 响应，例如，在分页时，我想替换整个 URL 而不仅仅是其中的参数。

```
app.factory('$rest', ['$resource', 'HALParser', function($resource, HALParser) {
    return function($url) {
        $url = ($url == null) ? 'http://localhost:8000/:type' : $url;
        return $resource($url, {type: ''}, {
            update: { method:'PUT' },
            get : {
                method: 'GET',
                transformResponse: [function(data) {
                    return (new HALParser()).parse(angular.fromJson(data));
                }]
            }
        });
    }
}]); 
```

接着，

```
app.controller('VendorsController', ['$scope', '$rest', 
        function($scope, $rest) {

        $scope.data = $rest().get({type: 'vendors'});

        $scope.create = function() {
            $rest().save({type: 'vendors'}, {name: $scope.item});
        };
        $scope.load = function($item) {
            console.log($item);
        };

        $scope.page = function($url) {
            $scope.data = $rest($url).get();
        };
    }]); 
```

我只是将 $resource 从我的服务信息返回一个带有参数 URL 的函数。

# r - 使用knitr编译PDF时出错

> ID：15506947
> 
> 赞同：-1
> 
> 时间：2013-03-19T17:56:11.193
> 
> 标签：r, latex, knitr, rstudio

当我尝试使用 knitr 编译 PDF 时，出现以下错误：

```
there is no package called 'knitr' Error: object 'opts_knit' not found
Execution halted 
```

我正在使用 RStudio 0.97.332 和 R 版本 2.15.3。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:57:06.730

听起来您需要安装knitr。从错误消息中应该很明显。

```
install.packages("knitr") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:37:23.710

你可以：

```
install.packages("knitr") 
```

或来自*Rstudio*

*Rstudio > 工具 > 安装包。*

在窗口**安装包**上输入**knitr**并安装

 **为了测试是否安装了软件包，请尝试

```
library(knitr) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T01:56:32.843

在 R 中安装 knitr 后，在使用之前不要忘记在某处调用它。我通常在 \begin{document} 之后使用我的第一个块来调用我使用的所有库，即

```
<<chunk0, >>=
library("knitr")
library("xtable")
...
@ 
```

然后是 knitr 选项的第二个块。**

# javascript - Javascript奇怪的声明和调用函数的方式

> ID：15506954
> 
> 赞同：0
> 
> 时间：2013-03-19T17:56:26.850
> 
> 标签：javascript, function, module, frontend

嗨，我是 javascript 新手，我正在尝试维护某人的代码，但我似乎无法弄清楚他们在做什么。

他们似乎在声明这样的函数：

```
(function(Module) {
    Module.register(...) {
       ....
       return ...;
    };
    Module.register(...) {
       ....
       return ...;
    };
 }(hb.Core)); 
```

如果您想创建一个调用 Module.register 两次的函数（我认为他们正在尝试这样做），您不会执行以下操作吗？

```
function myFunction(Module) {
     Module.register(...) {
        ...
     };
     Module.register(...) {
        ...
     };
}
myfunction(Module); 
```

另外，不知道这是否真的相关，但他们正在使用沙盒模型（他们有不同的模块仅通过沙盒与应用程序核心进行通信）。

希望有人能帮忙。总的来说，我对 Javascript 和前端开发真的很陌生，我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:58:53.143

重复[javascript中自执行函数的目的是什么？](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)

这是一个自我执行的匿名函数调用。您的示例是一个函数声明，您在其中为函数分配了一个名称，因此它不再是匿名的。当需要将变量范围限定为仅可用于自执行函数内部的任何内容时，将使用自执行函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:00:43.183

如果你的意思是那个功能

```
(function(Module) {}(hb.Core)); 
```

它是一个自调用函数，接收`hb.Core`其`Module`参数的值。在 javascript 函数中声明范围，因此这是上述原因的主要原因。

该函数内部的变量在它之外是不可访问的，这意味着在它的范围之外

# java - Couchbase Memcached 过滤器

> ID：15506960
> 
> 赞同：2
> 
> 时间：2013-03-19T17:56:33.810
> 
> 标签：java, memcached, couchbase

是否可以过滤 Couchbase Memcached 文档？

它不必像我们在 Couchbase 存储桶类型中那样是复杂的过滤器，它可以像 startKey 和 endKey 过滤器一样简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:22:55.243

Couchbase 中的 memcached 存储桶是普通的旧 memcached，因此无法在服务器端运行查询或进行任何过滤。

# clojure - 使用 lein uberjar 构建的 Clojure 应用程序未启动

> ID：15506961
> 
> 赞同：3
> 
> 时间：2013-03-19T17:56:35.543
> 
> 标签：clojure, leiningen

我有一个使用“lein uberjar”构建的小型命令行 Clojure 应用程序。结果 jar 文件在启动时不会调用我的 main 函数，也不会给我任何类型的堆栈跟踪或其他错误情况指示。

```
% lein version
Leiningen 2.0.0 on Java 1.7.0_10 Java HotSpot(TM) 64-Bit Server VM
% lein uberjar
Compiling spelunker.core
Compiling spelunker.core
Created /Users/temerson/Work/ddp-qa-tool/spelunker/target/spelunker-0.1.0-SNAPSHOT.jar
Including spelunker-0.1.0-SNAPSHOT.jar
Including lucene-core-3.6.2.jar
Including clojure-1.4.0.jar
Created /Users/temerson/Work/ddp-qa-tool/spelunker/target/spelunker-0.1.0-SNAPSHOT-standalone.jar 

% java -jar target/spelunker-0.1.0-SNAPSHOT-standalone.jar
% 
```

它应该显示一条使用消息，而不是任何内容。我已经检查了（对我而言）显而易见的事情：我的项目文件包含

```
(defproject spelunker "0.1.0-SNAPSHOT"
  :description "Spelunk through Lucene data to find nuggets of useful data."
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.apache.lucene/lucene-core "3.6.2"]]
  :main spelunker.core
  :aot [spelunker.core]) 
```

和 spelunker/core.clj 包括

```
(ns spelunker.core
  (:import (org.apache.lucene.analysis.standard StandardAnalyzer)
           (org.apache.lucene.document Document Field Field$Store Field$Index)
           (org.apache.lucene.index IndexReader IndexWriter IndexWriter$MaxFieldLength)
           (org.apache.lucene.store NIOFSDirectory RAMDirectory)
           (org.apache.lucene.util Version))
  (:gen-class)) 
```

并且主要功能是这样定义的（现在）：

```
(defn -main [& args]
  (print "DAFUQ?")) 
```

出于所有意图和目的，这应该有效：如果我用`leiningen app new`它创建一个存根应用程序就可以了。但与上述无关。

如果我至少得到某种堆栈跟踪（即我可以调查的东西），我会感觉很好，但是沉默正在杀死我。

有人有想法么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:52:01.207

您在退出前没有冲洗。更改`print`为`println`in`-main`并且换行符将自动刷新，或者以其他方式使用显式刷新来跟随您的打印。

# html - 在表单中包含其他 HTTPS 请求标头信息

> ID：15506963
> 
> 赞同：2
> 
> 时间：2013-03-19T17:56:51.467
> 
> 标签：html, forms, authentication, http-headers

`action`除了and之外，有没有办法在表单数据中包含其他请求标头`method`？我希望在不让用户重新输入他们的登录凭据的情况下跨域发送一些身份验证凭据。即我想直接从表单提交构建一个身份验证标头。

该域启用了 SSL，因此我考虑在 URL 中包含凭据，但正如[这里](http://answers.google.com/answers/threadview/id/758002.html)所解释的，这是一个坏主意，因为这些凭据可能通过连接是安全的，但其他应用程序可能通过浏览器访问这些凭据。

**大图**

我可以通过对客户端服务器（主域）的 AJAX 请求访问跨域用户名和密码。我想获取这些凭据并通过非 AJAX 请求提交它们，这样用户就可以安全地下载文档，而无需公开访问 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:06:00.330

对于具体问题，我相信答案是否定的——您无法控制从表单本身发送任何额外的标题。您可以使用表单发送其他一些内容，但它们对您想要做的事情没有用：[W3 Form Tag Specification](http://www.w3.org/TR/html401/interact/forms.html#h-17.3)

你可以做的是做一个表单 POST，这是在会话 cookie 不可用并且查询字符串不起作用时进行通信的标准方式；只需使用带有某种令牌/凭据哈希的隐藏字段。避免像瘟疫这样的明文密码，并且真的尽量避免对它们进行可逆加密。这只是您必须格外小心以避免创建易于利用的安全漏洞的领域之一。

但一般来说它工作得很好，任何可以做 AJAX GET 的东西都应该能够做 AJAX POST。

# c# - 有谁知道像这样创建一个winforms (C#) prefrerences GUI

> ID：15506964
> 
> 赞同：0
> 
> 时间：2013-03-19T17:56:51.717
> 
> 标签：c#, winforms

我是一名新手程序员，想使用 C# 为我的应用程序开发一个模块，该模块的界面类似于我展示的图像。主要的好奇心是它具有相似的导航风格。

图片详情： ![图片](../Images/1a34dd9342419bc656e76b8b40297deb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:58:18.883

这只是左侧的 ListView 控件。它有一个视图模式，可以显示类似的大图标和文本。

# javascript - 调整另一个元素的大小时调整元素的大小

> ID：15506968
> 
> 赞同：0
> 
> 时间：2013-03-19T17:57:19.003
> 
> 标签：javascript, jquery, css, html

当使用以下方法调整窗口大小时，我正在使用 jQuery 来调整元素的大小：

```
$(window).resize(function() {
  topHeight = $("#top").height();
  height = $(window).height() - 210;
  $("#container").height(height);
  $("#g").height(height-25);
}); 
```

使用 topHeight 获取顶部栏的最新高度，因为它可以重新排列。

我的问题是，当#top 改变高度时，我无法找到调整#container 大小的方法。我试过使用`$("#topRow").resize(function() { })`，但似乎这不适用于元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:05:57.700

`#top`当' 的高度发生变化时，您必须捕捉每个事件。

如果在您调整窗口大小时发生这种情况，那么您应该将您的逻辑绑定到`window.resize`，因此问题中的代码应该可以工作。

`#top`如果在改变高度时还有其他事件，那么你也应该在那里绑定逻辑。

**更新：**在您提到的评论中，有一个多选字段，可以使`#topRow`元素更改其高度，因此这是一个事件，您可以将逻辑添加到该事件中。

**注意：**还有另一种选择。您创建一个`setInterval`定期检查大小`#topRow`并在`#container`必要时调整大小，但我个人不推荐此解决方案。

# for-loop - 矩阵中列的最大值？

> ID：15506970
> 
> 赞同：0
> 
> 时间：2013-03-19T17:57:23.453
> 
> 标签：for-loop, matrix, max

java - 如何在Java中仅使用2个for来找到矩阵中列的最大值？

```
for(int i = 1; i< N; i++)
    for(int j = 1; j < M; j++)
         i want to find the maxim for each column 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:00:18.570

```
public int findMaxInCol(int colIndex){
  int max = Integer.Min;
  for(int row=0;row<Matrix.Rows;row++){

    if(matrix[row][colIndex] > max){
       max = matrix[row]colIndex];
   }

}
   return max;
}

void int findMaxOfMaxes() {
   int maxOfMaxs = Integer.min;
   for(int col=0;col<j;col++){
      int maxInCol = findMaxInCol(col);
      if( maxInCol > maxOfMaxs)
          maxOfMaxs = maxInCol;
    }
    return maxOfMaxs 

} 
```

//伪代码

//在发现您想要矩阵中的最大值后进行编辑。你是对的，你需要 2 个 for 循环。

# python - 'reload' 的递归版本

> ID：15506971
> 
> 赞同：36
> 
> 时间：2013-03-19T17:57:23.047
> 
> 标签：python, python-module, python-import

当我开发 Python 代码时，我通常在解释器中以特别的方式对其进行测试。我会`import some_module`，测试它，找到一个错误，修复错误并保存，然后使用内置`reload`函数`reload(some_module)`再次测试。

但是，假设`some_module`我有`import some_other_module`，并且在测试时`some_module`我发现了一个错误`some_other_module`并修复它。现在调用`reload(some_module)`不会递归地重新导入`some_other_module`。我必须手动重新导入依赖项（通过执行类似`reload(some_module.some_other_module)`, 或的操作`import some_other_module; reload(some_other_module)`，或者，如果我更改了一大堆依赖项并且忘记了我需要重新加载的内容，我需要重新启动整个解释器。

更方便的是，如果有一些`recursive_reload`功能，我可以做`recursive_reload(some_module)`并且让 Python 不仅 reload `some_module`，而且递归地重新加载每个导入的模块`some_module`（以及每个模块导入的每个模块，等等），这样我可以确定我没有使用任何其他`some_module`依赖的模块的旧版本。

我认为 Python 中没有任何内置的东西可以像`recursive_reload`我在这里描述的函数一样，但是有没有一种简单的方法可以将这样的东西组合在一起？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-19T15:08:46.217

我遇到了同样的问题，你激励我真正解决了这个问题。

```
from types import ModuleType

try:
    from importlib import reload  # Python 3.4+
except ImportError:
    # Needed for Python 3.0-3.3; harmless in Python 2.7 where imp.reload is just an
    # alias for the builtin reload.
    from imp import reload

def rreload(module):
    """Recursively reload modules."""
    reload(module)
    for attribute_name in dir(module):
        attribute = getattr(module, attribute_name)
        if type(attribute) is ModuleType:
            rreload(attribute) 
```

或者，如果您使用的是 IPython，只需使用或在启动时`dreload`传递。`--deep-reload`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T17:58:31.037

每次修改完模块后，实际编写一些测试用例并运行它们不是更简单吗？

你所做的很酷（你本质上是在使用 TDD（测试驱动开发），但你做错了。

考虑到通过书面单元测试（使用默认的python [unittest](http://docs.python.org/2/library/unittest.html)模块，或者更好的[nose](https://pypi.python.org/pypi/nose/)），您可以获得***可重用***、***稳定***的测试，并且比在交互式测试模块中更快更好地**帮助**您检测代码中的不一致性环境。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-06T04:02:43.360

我遇到了同样的问题，我已经建立了@Mattew 和@osa 的答案。

```
from types import ModuleType
import os, sys
def rreload(module, paths=None, mdict=None):
    """Recursively reload modules."""
    if paths is None:
        paths = ['']
    if mdict is None:
        mdict = {}
    if module not in mdict:
        # modules reloaded from this module
        mdict[module] = [] 
    reload(module)
    for attribute_name in dir(module):
        attribute = getattr(module, attribute_name)
        if type(attribute) is ModuleType:
            if attribute not in mdict[module]:
                if attribute.__name__ not in sys.builtin_module_names:
                    if os.path.dirname(attribute.__file__) in paths:
                        mdict[module].append(attribute)
                        rreload(attribute, paths, mdict)
    reload(module)
    #return mdict 
```

有以下三个区别：

1.  在一般情况下， reload(module) 也必须在函数末尾调用，正如@osa 指出的那样。
2.  使用循环导入依赖项，之前发布的代码将永远循环，因此我添加了一个列表字典来跟踪其​​他模块加载的模块集。虽然循环依赖并不酷，但 Python 允许它们，所以这个 reload 函数也可以处理它们。
3.  我添加了一个允许重新加载的路径列表（默认为 ['']）。一些模块不喜欢以正常方式重新加载（如图所示[）](https://stackoverflow.com/questions/1615148/what-is-causing-unbound-method-init-must-be-called-with-instance-as-first)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-02T12:36:44.300

该代码对于导入的依赖模块非常有效`import another_module`，但是当模块导入函数时它失败了`from another_module import some_func`。

我扩展了@redsk 的答案，试图对这些功能保持聪明。我还添加了一个黑名单，因为不幸的是`typing`并且`importlib`没有出现`sys.builtin_module_names`（也许还有更多）。我还想防止重新加载我知道的一些依赖项。

我还跟踪重新加载的模块名称并返回它们。

在 Python 3.7.4 Windows 上测试：

```
def rreload(module, paths=None, mdict=None, base_module=None, blacklist=None, reloaded_modules=None):
    """Recursively reload modules."""
    if paths is None:
        paths = [""]
    if mdict is None:
        mdict = {}
    if module not in mdict:
        # modules reloaded from this module
        mdict[module] = []
    if base_module is None:
        base_module = module
    if blacklist is None:
        blacklist = ["importlib", "typing"]
    if reloaded_modules is None:
        reloaded_modules = []
    reload(module)
    reloaded_modules.append(module.__name__)
    for attribute_name in dir(module):
        attribute = getattr(module, attribute_name)
        if type(attribute) is ModuleType and attribute.__name__ not in blacklist:
            if attribute not in mdict[module]:
                if attribute.__name__ not in sys.builtin_module_names:
                    if os.path.dirname(attribute.__file__) in paths:
                        mdict[module].append(attribute)
                        reloaded_modules = rreload(attribute, paths, mdict, base_module, blacklist, reloaded_modules)
        elif callable(attribute) and attribute.__module__ not in blacklist:
            if attribute.__module__ not in sys.builtin_module_names and f"_{attribute.__module__}" not in sys.builtin_module_names:
                if sys.modules[attribute.__module__] != base_module:
                    if sys.modules[attribute.__module__] not in mdict:
                        mdict[sys.modules[attribute.__module__]] = [attribute]
                        reloaded_modules = rreload(sys.modules[attribute.__module__], paths, mdict, base_module, blacklist, reloaded_modules)
    reload(module)
    return reloaded_modules 
```

一些注意事项：

1.  我不知道为什么某些 builtin_module_names 带有下划线前缀（例如`collections`列为`_collections`，所以我必须进行双字符串检查。
2.  `callable()`返回`True`课程，我想这是意料之中的，但这是我不得不将额外模块列入黑名单的原因之一。

至少现在我能够在运行时深度重新加载一个模块，并且从我的测试中我能够深入多个级别`from foo import bar`并在每次调用时查看结果`rreload()`

（为长而丑陋的深度道歉，但黑色格式的版本在 SO 上看起来不太可读）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-16T18:32:41.840

我找到了清除所有模块然后[在此处](https://www.oreilly.com/library/view/python-cookbook/0596001673/ch14s02.html)重新导入模块的想法，建议这样做：

```
import sys
sys.modules.clear() 
```

这会弄乱您不想重新加载的模块（如果您只想重新加载自己的模块）。我的想法是只清除包含您自己文件夹的模块。像这样的东西：

```
import sys
import importlib

def reload_all():
    delete_folders = ["yourfolder", "yourotherfolder"]

    for module in list(sys.modules.keys()):
        if any(folder in module for folder in delete_folders):
            del sys.modules[module]

    # And then you can reimport the file that you are running.
    importlib.import_module("yourfolder.entrypoint") 
```

重新导入您的入口点将重新导入其所有导入，因为模块已被清除并且它是自动递归的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T18:12:29.333

从技术上讲，您可以在每个文件中放置一个重新加载命令，以确保每次导入时都会重新加载

一个.py：

```
def testa():
    print 'hi!' 
```

b.py：

```
import a
reload(a)
def testb():
    a.testa() 
```

现在，交互式地：

```
import b
b.testb()
#hi!

#<modify a.py>

reload(b)
b.testb()
#hello again! 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-07T10:41:36.103

我发现redsk的答案非常有用。我提出了一个简化的（对于用户，而不是作为代码）版本，其中自动收集模块的路径，并且递归适用于任意数量的级别。一切都在一个函数中自包含。在 Python 3.4 上测试。我猜对于 python 3.3 来说，必须`import reload from imp`而不是`... from importlib`. 它还检查`__file__`文件是否存在，如果编码人员忘记在子模块中定义文件，这可能是错误的`__init__.py`。在这种情况下，会引发异常。

```
def rreload(module):
    """
    Recursive reload of the specified module and (recursively) the used ones.
    Mandatory! Every submodule must have an __init__.py file
    Usage:
        import mymodule
        rreload(mymodule)

    :param module: the module to load (the module itself, not a string)
    :return: nothing
    """

    import os.path
    import sys

    def rreload_deep_scan(module, rootpath, mdict=None):
        from types import ModuleType
        from importlib import reload

        if mdict is None:
            mdict = {}

        if module not in mdict:
            # modules reloaded from this module
            mdict[module] = []
        # print("RReloading " + str(module))
        reload(module)
        for attribute_name in dir(module):
            attribute = getattr(module, attribute_name)
            # print ("for attr "+attribute_name)
            if type(attribute) is ModuleType:
                # print ("typeok")
                if attribute not in mdict[module]:
                    # print ("not int mdict")
                    if attribute.__name__ not in sys.builtin_module_names:
                        # print ("not a builtin")
                        # If the submodule is a python file, it will have a __file__ attribute
                        if not hasattr(attribute, '__file__'):
                            raise BaseException("Could not find attribute __file__ for module '"+str(attribute)+"'. Maybe a missing __init__.py file?")

                        attribute_path = os.path.dirname(attribute.__file__)

                        if attribute_path.startswith(rootpath):
                            # print ("in path")
                            mdict[module].append(attribute)
                            rreload_deep_scan(attribute, rootpath, mdict)

    rreload_deep_scan(module, rootpath=os.path.dirname(module.__file__)) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-25T16:13:40.247

对于 Python 3.6+，您可以使用：

```
from types import ModuleType
import sys
import importlib

def deep_reload(m: ModuleType):
    name = m.__name__  # get the name that is used in sys.modules
    name_ext = name + '.'  # support finding sub modules or packages

    def compare(loaded: str):
        return (loaded == name) or loaded.startswith(name_ext)

    all_mods = tuple(sys.modules)  # prevent changing iterable while iterating over it
    sub_mods = filter(compare, all_mods)
    for pkg in sorted(sub_mods, key=lambda item: item.count('.'), reverse=True):
        importlib.reload(sys.modules[pkg])  # reload packages, beginning with the most deeply nested 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-15T06:34:04.230

下面是我使用的递归重载函数，包括 ipython/jupyter 的一个[魔术](https://ipython.readthedocs.io/en/stable/interactive/magics.html)函数。

它对所有子模块进行深度优先搜索，并以正确的依赖顺序重新加载它们。

```
import logging
from importlib import reload, import_module
from types import ModuleType
from IPython.core.magic import register_line_magic

logger = logging.getLogger(__name__)

def reload_recursive(module, reload_external_modules=False):
    """
    Recursively reload a module (in order of dependence).

    Parameters
    ----------
    module : ModuleType or str
        The module to reload.

    reload_external_modules : bool, optional

        Whether to reload all referenced modules, including external ones which
        aren't submodules of ``module``.

    """
    _reload(module, reload_external_modules, set())

@register_line_magic('reload')
def reload_magic(module):
    """
    Reload module on demand.

    Examples
    --------
    >>> %reload my_module
    reloading module: my_module

    """
    reload_recursive(module)

def _reload(module, reload_all, reloaded):
    if isinstance(module, ModuleType):
        module_name = module.__name__
    elif isinstance(module, str):
        module_name, module = module, import_module(module)
    else:
        raise TypeError(
            "'module' must be either a module or str; "
            f"got: {module.__class__.__name__}")

    for attr_name in dir(module):
        attr = getattr(module, attr_name)
        check = (
            # is it a module?
            isinstance(attr, ModuleType)

            # has it already been reloaded?
            and attr.__name__ not in reloaded

            # is it a proper submodule? (or just reload all)
            and (reload_all or attr.__name__.startswith(module_name))
        )
        if check:
            _reload(attr, reload_all, reloaded)

    logger.debug(f"reloading module: {module.__name__}")
    reload(module)
    reloaded.add(module_name) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-03-19T18:00:47.360

这是一件棘手的事情 - 我在这个答案中有一个工作示例： [如何查找依赖于 python 中特定模块的模块列表](https://stackoverflow.com/questions/1827629/how-to-find-list-of-modules-which-depend-upon-a-specific-module-in-python/1847094#1847094)

# sql - SQL连接多个表

> ID：15506973
> 
> 赞同：0
> 
> 时间：2013-03-19T17:57:31.267
> 
> 标签：sql, join

我正在尝试将 3 个表加入 1 个。但我收到“无法绑定”错误消息。

由于我是 SQL 新手，我不确定它是否在我的代码中出错，或者我是否将表关系设置错了？

我在这里有一张主键和外键的图片： [http ://crystalise.tw/shadow/public.php?service=files&t=b036d2b2516576b27532b947dfb96293](http://crystalise.tw/shadow/public.php?service=files&t=b036d2b2516576b27532b947dfb96293)

这是我使用的 SQL 代码。我已经设法仅使用 2 个表就可以正常工作了。但是当我尝试实现第三张表时遇到问题。这次我应该仔细看看什么？

```
--
--SELECT Artists.nameArtist, Albums.nameAlbum 
--  FROM Artists
--  INNER JOIN Albums 
--  ON Artists.idArtist = Albums.idArtist
--  ORDER BY nameAlbum 
--  

SELECT Artists.nameArtist, Albums.nameAlbum, Songs.nameSong 
  FROM Artists
  JOIN Songs
  ON Artists.idArtist = Albums.idArtist

JOIN Albums
  ON Artists.idArtist = Songs.idArtist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:59:42.620

您需要正确订购您的加入条件。在条件出现在子句`on`之前，您不能在条件中包含表名（或别名） ：`from`

```
SELECT Artists.nameArtist, Albums.nameAlbum, Songs.nameSong 
  FROM Artists
  JOIN Songs
  ON Artists.idArtist = Songs.idArtist
JOIN Albums
  ON Artists.idArtist = Albums.idArtist 
```

# javascript - 脚本弹出 jquery

> ID：15506986
> 
> 赞同：-3
> 
> 时间：2013-03-19T17:58:15.457
> 
> 标签：javascript, jquery

您好，我想知道如何才能[使显示插件](http://www.zurb.com/playground/reveal-modal-plugin)起作用，而不是仅在您单击链接时才起作用，在进入页面时使用此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:34:47.970

操作，

我**认为**您想在页面加载时触发点击事件。此插件希望您的标记中有一个与此匹配的元素：

```
$('a[data-reveal-id]') 
```

所以，看起来像这样：

```
<a href="#" data-reveal-id="foo"></a> 
```

如果您在单击链接时插件正常工作，您需要做的就是：

```
$(function(){
    $('a[data-reveal-id="foo"]').trigger('click');
}); 
```

# javascript - jquery mobile没有将div附加到内容

> ID：15506989
> 
> 赞同：3
> 
> 时间：2013-03-19T17:58:20.017
> 
> 标签：javascript, jquery, html, jquery-mobile

我有一个脚本应该将一些元素附加到内容 div，但它不起作用。如您所见，“messageBox”的内容来自一个 php 文件，该文件选择 mysql 表和其中的数据。

这是JS文件的内容：

```
 function getWallMsg(){
    $.getJSON('SELECT_uzenofal.php?callback=?',function(data) {
        data.forEach(function(e){
            $('#posts').append($('<div class="messageBox">'+'<img src="img/profilok/'+e.kep+'"/>'+'<p class="name">'+e.nev+'</p>'+'<p>'+e.uzenet+'</p>'+'<p class="time">'+e.ido+'</p>'+'</div>'));
        });
    });
}

$(document).ready(function(){
    drawNavbar();
    getWallMsg();
}); 
```

和html：

```
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" >
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>
<body>
    <!-- Home -->
    <div data-role="page" id="fal">
        <!-- header -->
        <div data-role="header">
            <h3>
                Üzenőfal
            </h3>
        </div>
        <!-- content -->
        <div data-role="content" id="posts">

        </div>
        <!-- footer -->
        <div class="nav" data-role="footer" data-position="fixed" data-theme="a"></div>
    </div>
</body> 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:00:11.793

这应该改变：

```
$(document).ready(function(){
    drawNavbar();
    getWallMsg();
}); 
```

对此：

```
$(document).on('pagebeforeshow', '#fal', function(){       
    drawNavbar();
    getWallMsg();
}); 
```

基本上**`document ready`**不应该用**`jQuery Mobile`**，要了解更多关于这个看看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，要透明的是我的个人博客。或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

基本上，**`document ready`**当页面内容未加载到**`DOM`**. 相反，应该使用适当的**`jQuery Mobile`**页面事件，例如。**`pagebeforeshow`**

**编辑 ：**

您甚至在 pagebeforeshow 中添加了不正确的 id。它现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:13:12.427

无法发表评论，因此发布为答案。

```
$('#posts').append($('<div class="messageBox">'+'<img src="img/profilok/'+e.kep+'"/>'+'<p class="name">'+e.nev+'</p>'+'<p>'+e.uzenet+'</p>'+'<p class="time">'+e.ido+'</p>'+'</div>')); 
```

你试过把上面改成

```
$('#posts').append('<div class="messageBox">'+'<img src="img/profilok/'+e.kep+'"/>'+'<p class="name">'+e.nev+'</p>'+'<p>'+e.uzenet+'</p>'+'<p class="time">'+e.ido+'</p>'+'</div>'); 
```

# c# - 在一个文本框中显示整个文本，在另一个框中显示单词

> ID：15506992
> 
> 赞同：-1
> 
> 时间：2013-03-19T17:58:26.457
> 
> 标签：c#, loops, text

请帮助我希望程序从文本框 1 中获取文本显示文本框 2 中的所有文本，如果遇到空格停止并在文本框 3 中显示单词，程序会在文本框 2 中显示整个文本，但它确实不适用于文本框 3 帮助

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace WindowsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        string[] sent = new string[100];
        string[] word = new string[50];

        private void button1_Click(object sender, EventArgs e)
        {
            for (int i = 0; i <= textBox1.Text.Length; i++)
            {
                sent[i] = textBox1.Text;  
                textBox2.Text = sent[i];
                for (int j = 0; j <= textBox1.Text.Length; j++)
                {
                    if (sent[i] == " ")
                        word[j] = sent[i];
                    textBox3.Text = word[j];
                }
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:06:50.507

如果要拆分文本，请使用`String.Split`给您一个单词数组：

```
string[] words = textBox1.Text.Split(" "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:20:48.913

This does exactly what is outlined in the "question" and assumes a singular "word" may be among the input. Such as "dfsgkujhdafkj;hsadfkjsd word sdfkjhsdfkjsdf"

```
 string originalText = textBox1.Text.Trim();
    textBox2.Text = originalText;
    textBox3.Text = originalText.Contains(" ") ? originalText.Substring(originalText.IndexOf(" "), (originalText.Substring(originalText.IndexOf(" ") + 1).Contains(" ") ? originalText.Substring(originalText.IndexOf(" ") + 1).IndexOf(" ") + 1 : originalText.Length - originalText.IndexOf(" "))) : string.Empty; 
```

# html - 在媒体查询中更改视口

> ID：15506993
> 
> 赞同：5
> 
> 时间：2013-03-19T17:58:27.913
> 
> 标签：html, css, mobile, media-queries, viewport

我目前正在开发响应式网页设计。“智能手机视图”还没有准备好，因为我的客户必须获得更多预算。

因此，我需要实现一个临时视图，我想用一个仅在智能手机上激活的固定视口来实现。

我以这种方式设置视口：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

如果触发以下媒体查询，我想将设备宽度更改为 700 像素：

```
@media only screen and (max-width:700px){

} 
```

以下代码不起作用：

```
@media only screen and (max-width:700px){
    .pagewrapper{
        width:700px;
    }

    @-ms-viewport{
        width:700px;
    }

    @-o-viewport {
        width: 700px;
    }

    @viewport {
        width: 700px;
    }

} 
```

您知道完成此任务的其他解决方案吗？也许使用 JavaScript / jQuery？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-05T12:42:36.150

接受的答案是正确的，但是如果您使用的是 jQuery，并且 jQuery 需要准备好。在慢速连接上，您会遇到该代码的问题，因此您可能会遇到`'$' undefined`错误。

这就是为什么在这种情况下我更喜欢纯 JavaScript：

```
<meta name="viewport" id="viewport" content="width=device-width; initial-scale=1">
<script type="text/javascript">
    (function setViewPort() {

        if (screen.width < 640 && (window.orientation == 0 || window.orientation == 180)) {
         document.getElementById("viewport").setAttribute("content", "width=480, initial-scale=0.68");
         //alert('480 @ 0.68, landscape');
        } else if (screen.width < 640) {
         // document.getElementById("viewport").setAttribute("content", "width=device-width, initial-scale=1");
         // disabled, since its the same as the default. if this one is different, uncomment line above
         //alert('device-width @ 1, landscape');
        } else if (screen.width >= 640) {
         document.getElementById("viewport").setAttribute("content", "width=640; initial-scale=0.5");
         //alert('640, high res phones');
        }
    })();
</script> 
```

在我的情况下，我将纵向设置为 480 像素，缩放为 0.68，横向设置为 320 像素，以便用户可以看到更大的文本（因为这是一个仅限移动设备的页面），如果 screen.width 高于 640（比如在我的 android 5 上）屏幕尺寸为 1900x1080 的手机）到 640 像素，缩放为 0.5（因为宽度始终保持在 320 像素）。

问候， 马克斯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T11:31:25.813

这是我的解决方案，效果很好。这样，脚本只运行一次并在文档准备好之前执行。也支持 no-js。谢谢你的帮助。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="text/javascript">
    if($(window).width() < 765)
    {
        x=1;
        if(x==1)
        {
            $('meta[name=viewport]').remove();
            $('head').append('<meta name="viewport" content="width=765px, initial-scale=1.0">');
            x=0;
        };
    };
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T18:55:18.020

如果您只针对设备，我认为您可以尝试使用 max-device-width 而不是 max-width 或 min-width。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T18:06:43.967

```
@media only screen and (min-width:700px){

} 
```

您只能使用这种类型的媒体查询来更改您的 CSS。如果这被击中，`min-width:700px`请写下你的 css wrt。并更改您的容器宽度，例如`<div class="pagewrapper"></div>`

以下*元*标记是完美的：

> `<meta name="viewport" content="width=device-width, initial-scale=1.0">`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T22:41:14.570

```
if ($('body').width() < 700){   
      $('head').append('<meta name="viewport" content="width=700, initial-scale=1.0">');
}
else{
      $('head').append('<meta name="viewport" content="width=device-width, initial-scale=1.0">');
} 
```

# asp.net-mvc-4 - 使用不返回空值的 Automapper 解析

> ID：15506996
> 
> 赞同：1
> 
> 时间：2013-03-19T17:58:37.073
> 
> 标签：asp.net-mvc-4, automapper

我正在开发一个 MVC 4 项目并尝试将 KeyValue 列表中的值转换为可为空的 DateTime。我在映射器中使用了以下行（我没有包括其他属性，因为有很多）

```
.ForMember(d => d.Deadline, m => m.ResolveUsing<DeadlineResolver>()) 
```

我的解析器如下所示：

```
public class DeadlineResolver : ValueResolver<Booking, DateTime?>
{
    protected override DateTime? ResolveCore(Booking source, ResolutionResult resolutionResult)
    {
        KeyValue keyValue = source.KeyValues.FirstOrDefault(k => k.Key.KeyId == "DEADLINE");
        return (keyValue != null) ? DateTime.Parse(keyValue.Value) : (DateTime?)null; 
    }
} 
```

如下所示定义的deadline的值永远不会返回为null，而是返回DateTime.MinDate。当我在视图中绑定结果时，我需要它为空，这样我只在有日期时才显示一个值。

```
public DateTime? Deadline { get; set; } 
```

如何在映射后不检查这些值以查找最小日期并设置为 null（我已实施临时黑客以便代码运行），而使这些值为 null？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:10:45.957

使用 LinqPad 和 AutoMapper 2.2.1 下面给了我一个有效的日期 when `KeyValue`has a date 和 a `null` `DateTime`when `KeyValue`is `null`。（请注意，由于未提供类定义，因此对解析器进行了细微更改以简化它）。

```
void Main()
{
    AutoMapper.Mapper.CreateMap<Booking, dest>()
        .ForMember(d => d.Deadline, m => m.ResolveUsing<DeadlineResolver>());
    AutoMapper.Mapper.AssertConfigurationIsValid();

    // Gives a valid DateTime
    var booking = new Booking { KeyValue = "2013-01-01" };
    booking.Dump();
    var rc = AutoMapper.Mapper.Map<Booking, dest>(booking);
    rc.Dump();

    // Gives a null DateTime
    booking = new Booking { KeyValue = null };
    booking.Dump();
    rc = AutoMapper.Mapper.Map<Booking, dest>(booking);
    rc.Dump();
}

// Define other methods and classes here
public class Booking
{
    public string KeyValue { get; set; }
}

public class dest
{
    public DateTime? Deadline { get; set; }
}

public class DeadlineResolver : AutoMapper.ValueResolver<Booking, DateTime?>
{
    protected override DateTime? ResolveCore(Booking source)
    {
        return (source.KeyValue != null)
            ? DateTime.Parse(source.KeyValue)
            : (DateTime?)null; 
    }
} 
```

这是您追求的功能吗？如果是这样，那么问题可能与旧版本的 AutoMapper 或意外`KeyValue`值有关。

# windows - 代码区 32 位位移内的可执行内存

> ID：15506997
> 
> 赞同：0
> 
> 时间：2013-03-19T17:58:46.567
> 
> 标签：windows, 64-bit, jit, virtualalloc

在 64 位 Windows 上用 C++ 编写 JIT 编译器，生成的代码有时需要调用用 C++ 编写的运行时函数。目前我正在分配内存来放置生成的代码`VirtualAlloc(0, bytes, MEM_COMMIT, PAGE_EXECUTE_READWRITE)`；最后一个标志很重要，因为分配的内存不可执行。

`VirtualAlloc`大概可以在 64 位地址空间中的任何位置返回内存，这对于数据来说很好（通常需要超过 4 GB，因此它确实需要 64 位寻址），但 x64`call`指令的最有效形式需要一个 32 位 IP 相对偏移量，并且由于生成的代码量将小于 4 GB，因此最好将其定位在从 C++ 编译的代码的 32 位位移内。

有没有办法安排这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:20:48.047

You can specify a virtual address near which you want the allocation to happen as the first argument. To increase the chance of getting the allocation within the boundaries you want to could reserve the virtual memory region first and then request for committed memory as and when needed from the reserved space. Allocation by default happens bottom unless MEM_TOP_DOWN is specified or system is configured to perform memory layout top down to catch pointer truncation problems. Gist is that you can only increase the chance of having allocation within the boundary but should have code to handle when allocation is out of boundary.