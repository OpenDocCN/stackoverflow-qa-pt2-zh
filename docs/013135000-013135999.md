# StackOverflow 问答 13135000-13135999

# dojo - 如何在 Worklight 中正确使用 Dojo？

> ID：13135007
> 
> 赞同：1
> 
> 时间：2012-10-30T08:14:35.273
> 
> 标签：dojo, ibm-mobilefirst

我需要一些关于如何在我的项目中正确使用 Dojo 的帮助和建议。目前，这就是我正在做的事情：

假设我设置了一个名为“测试”的项目。Test.html 是第一个命中的文件，在该文件中我有以下内容：

```
<script type="text/javascript" data-dojo-config="isDebug: false, async: true, parseOnLoad: true" src="dojo/dojo.js"></script>
<script type="text/javascript" src="dojo/core-web-layer.js"></script>
<script type="text/javascript" src="dojo/mobile-ui-layer.js"></script>
<script type="text/javascript" src="dojo/mobile-compat-layer.js"></script>
<script type="text/javascript">
  require(
  // Set of module identifiers
  [ "dojo", "dojox/mobile/parser", "dojox/mobile/SwapView", "dojox/mobile", "dojox/mobile/compat", "dojox/mobile/deviceTheme", "dojox/mobile/ScrollableView" ],
  // Callback function, invoked on dependencies evaluation results  
  function(dojo) {
    dojo.ready(function() {});
  });
</script> 
```

我在 Test.js 中也有这个：

```
require([ "dojo", "dojox/mobile/parser", "dojox/mobile/deviceTheme",
  "dojox/mobile/ScrollableView", "dojox/mobile/compat", "dojox/mobile",
  "dojox/mobile/Button", "dojox/mobile/View", "dojox/mobile/Heading",
  "dojox/mobile/TabBarButton", "dojox/mobile/TabBar",
  "dojox/mobile/TextBox", "dojox/mobile/RoundRectList",
  "dojox/mobile/ListItem", "dojox/mobile/Button",
  "dojox/mobile/SpinWheel", "dojox/mobile/SpinWheelSlot",
  "dojox/mobile/IconContainer", "dojox/mobile/SwapView" ], 
  function(dojo, parser) {
    dojo.ready(function() {

    });
  }); 
```

现在，当我在其中一个按钮上单击 a 时，它会触发 WL.Page.Load 方法，并且我的 pagePort div 现在会在我的 Test.html 页面内显示我的新页面（假设这是 Page2.html），但是，有一个问题。Dojo 的东西在第一页上运行良好，但现在它在第二页上不起作用。我不确定幕后发生了什么，但我觉得我错过了一步（我需要卸载 Dojo 吗？在下一页再次声明它？）。

如果有人可以帮助我让 Dojo 在第二页上工作，以便我能够在更多页面上使用 Dojo（在了解我做错了什么之后），我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:46:47.483

根据您提供的信息，我最好的猜测是 Page2.html 并不真正在 Test.html 中，它是一个新页面。在这种情况下，您还需要在 Page2 中有脚本引用。

如果您在 Web 浏览器中测试您的代码，您可以查看控制台，并希望能深入了解到底出了什么问题。

您还可以尝试使用 Worklight 记录器来帮助定位问题。 [http://wpcertification.blogspot.com/2012/03/enabling-debuglog-console-in-worklight.html](http://wpcertification.blogspot.com/2012/03/enabling-debuglog-console-in-worklight.html)

这是 IBM 的“问题确定”的一般链接以及 [http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.worklight/worklight/5.0 /Problem_Determination/IMFV50_ProblemDetermination/player.html](http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.worklight/worklight/5.0/Problem_Determination/IMFV50_ProblemDetermination/player.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:05:38.773

正如尼克所说，如果您加载完全不同的 HTML 页面，您将拥有该页面来声明您正在使用的类。例如，在 dojox/mobile/tests 中，请参见 test_IconContainer.html。

也就是说，您可以通过使用片段机制在相同的 HTML 中定义替代视图或在 Worklight 中定义替代视图来进行不同的操作（请参阅[https://www.ibm.com/developerworks/mobile/worklight/getting-started /](https://www.ibm.com/developerworks/mobile/worklight/getting-started/)模块 60.1、2 和 3)。

# jsp - 从jsp发送多个相同类的对象到spring控制器

> ID：13135009
> 
> 赞同：0
> 
> 时间：2012-10-30T08:14:38.370
> 
> 标签：jsp, spring-mvc

当我在 jsp 中保持两个输入名称相同时。我希望他们应该以两个不同的对象进入控制器。@模型属性

```
@RequestMapping(value = "/addUser", method = RequestMethod.POST)
public String addAdvertiser(@ModelAttribute("userInfoEntity") UserInfoEntity userInfoEntity,@ModelAttribute("addressEntity") AddressEntity personalAddress,@ModelAttribute("addressEntity") AddressEntity billingAddress){
// save this two address to my userInfo Entity 
// here i had one to many relationaship. from UserInfoEntity to AddressEntity
} 
```

我的JSP如下：

```
Personal Address
<div class="label"><b>Address 1 :</b></div>
                        <div class="leftSide"><input type="text" name="address1" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>City :</b></div>
                        <div class="leftSide"><input type="text" name="city" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>Zipcode :</b></div>
                        <div class="leftSide"><input type="text" name="zipcode" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>Address 2 :</b></div>
                        <div class="leftSide"><input type="text" name="address2" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>State :</b></div>
                        <div class="leftSide"><input type="text" name="state" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>Phone :</b></div>
                        <div class="leftSide"><input type="text" name="phone" class="textBox" style="width:250px;" /></div>

Billing Address
                        <div class="label"><b>Address 1 :</b></div>
                        <div class="leftSide"><input type="text" name="address1" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>City :</b></div>
                        <div class="leftSide"><input type="text" name="city" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>Zipcode :</b></div>
                        <div class="leftSide"><input type="text" name="zipcode" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>Address 2 :</b></div>
                        <div class="leftSide"><input type="text" name="address2" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>State :</b></div>
                        <div class="leftSide"><input type="text" name="state" class="textBox" style="width:250px;" /></div>

                        <div class="label"><b>Phone :</b></div>
                        <div class="leftSide"><input type="text" name="phone" class="textBox" style="width:250px;" /></div> 
```

请告诉我如何将两个具有相同地址实体的对象从 jsp 发送到控制器的解决方案，为输入类型的属性“名称”保持相同的值。

在给定的场景中，我正在获取对象，但它包含两个地址的值，由“，”（逗号）分隔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:20:53.487

如果名称相同，**它将返回一个对象数组**，这就是为什么当您尝试打印它时，它会显示以逗号分隔的字符串。

> 您需要将对象转换为返回类型的数组（在您的情况下可能是字符串）。并获取值 arr[0] 和 arr[1]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:09:25.243

您需要创建一个`AddressDataBean`如下。

```
public class AddressDataBean {
    private Address personalAddress;
    private Address billingAddress;

    // Getters and Setters for the properties;
} 
```

和地址类如下。

```
public class Address {
    // All the address fields those are in your jsp.

    // Getters and setters for the fields.
} 
```

在您的 jsp 中，您需要使用 spring form taglib 并绑定 personalAddress 字段和 billingAddress 字段。

例如。和

在控制器中，您需要将 AddressDataBean 定义为 @ModelAttribute。

**编辑**

您可以在**UserInfoEntity** bean 中拥有 personalAddress 和 billingAddress 属性。后来我意识到了。:)

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:27:49.130

我们可以在文档中找到它，只需阅读有关嵌套属性的部分即可。

对于提供的情况，您需要正确设置字段名称：

```
user.address[0].city
user.address[1].city
user.address[2].city 
```

其余的也一样。

# python - 使用具有多个变量的字符串打开文件

> ID：13135017
> 
> 赞同：0
> 
> 时间：2012-10-30T08:15:32.000
> 
> 标签：python, string, list, for-loop, urlopen

当我将机场设置为一个变量时，我可以获得文本文件。但是，如何获取多个机场代码的文本文件并显示信息？

```
airport = 'KSFO, KSJC, KOAK'

for metar in urlopen('http://weather.noaa.gov/pub/data/observations/metar/stations/%s.TXT' %airport):
        metar = metar.decode("utf-8")
        if "%s" %airport in metar:
            print metar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:27:13.887

如果您的目标是获取每个机场的天气观测数据，您可以使用：

```
from urllib import urlopen
airports = 'KSFO, KSJC, KOAK'

for airport_code in airports.split(","):
    for metar in urlopen('http://weather.noaa.gov/pub/data/observations/metar/stations/%s.TXT' % airport_code.strip()):
        metar = metar.decode("utf-8")
        print metar 
```

对我来说，输出是：

> 2012/10/30 07:56 KSFO 300756Z 29005KT 10SM FEW001 13/11 A3006 RMK AO2 SLP178 T01280111 402110117
> 
> 2012/10/30 07:53 KSJC 300753Z 汽车 00000KT 10SM CLR 10/ A3005 RMK AO2 SLP175 T0100 402060089 $
> 
> 2012/10/30 08:14 KOAK 300814Z 06003KT 10SM OVC004 13/12 A3007 RMK AO2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:26:16.337

```
airport = 'KSFO, KSJC, KOAK'

for airports in airport.split(', '):
    for metar in urlopen('http://weather.noaa.gov/pub/data/observations/metar/stations/%s.TXT' %airports):
            metar = metar.decode("utf-8")
            if "%s" %airports in metar:
                print metar 
```

基本上，我们将分隔符（逗号和空格）的`airport`变量拆分为三个不同的变量：`,`

```
`airport.split(', ')` 
```

# local - CUPS @LOCAL 值

> ID：13135018
> 
> 赞同：4
> 
> 时间：2012-10-30T08:15:38.603
> 
> 标签：local, broadcast, discovery, cups

我有两台机器。一个使用 CUPS 1.5.0，另一个使用 CUPS 1.6.1。两台机器在同一个本地网络上。我想要全面发现网络上的打印机。如果我运行以下命令：

```
CUPS_DEBUG_LEVEL=2 /usr/lib/cups/backend/snmp 2>&1 
```

在两台机器上我得到不同的结果。带有 CUPS 1.5.0 的那个也是我想要从另一台带有 CUPS 1.6.1 的机器上得到的结果。

我解决了这个问题！`@LOCAL`CUPS 中有一个变量。上面的命令等于：

```
CUPS_DEBUG_LEVEL=2 /usr/lib/cups/backend/snmp @LOCAL 2>&1 
```

问题是在第二种情况下（CUPS 1.6.1）的值`@LOCAL`是机器的本地 IP（192.168.3.69）而不是广播（192.168.3.255）。

如果我在机器 2 上运行以下命令，则一切正常：

```
CUPS_DEBUG_LEVEL=2 /usr/lib/cups/backend/snmp 192.168.3.255 2>&1 
```

请解释我如何配置`@LOCAL`变量的值。或者为什么 CUPS 1.5.0 在安装时可以很好地配置它而 1.6.1 没有？（安装后我什么都没做，效果很好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-15T14:42:42.250

## 第一的...

**...让我们弄清楚是什么*`@LOCAL`*意思：**

该`@LOCAL`字符串并不完全是一个变量——在 CUPS 配置 ( */etc/cups/cupsd.conf* ) 的上下文中，它被称为*宏*。还有更多可以使用的宏：`@IF`、`@GROUP`、`@ACL`和.`@OWNER``@SYSTEM`

宏在`@LOCAL`1.1.15 版本中被引入 CUPS。相应的 CHANGELOG 条目内容如下：

> ```
>  - The Allow, Deny, BrowseAllow, BrowseDeny, and
>    BrowseAddress directives now support the network
>    interface names "@LOCAL" and "@IF(name)" for access
>    control and browsing based on the current interface
>    addresses instead of fixed names or IP addresses. 
> ```

换句话说：在将其引入 CUPS 代码库之前，您必须将主机的当前 IP 地址硬编码为`cupsd.conf`. 之后，您可以选择只写`@LOCAL`or`@IF(eth0)`或`@IF(wlan1)`in`cupsd.conf`并且 CUPS 将使用当前 IP 地址（***所有***本地 IP 地址，如果该框有多个！）即使它已更改。（PPP/拨号连接的地址不算本地IP地址...）

## 第二...

**...让我们看看为什么您会看到差异：**

如果无法访问两台机器的完整 CUPS 和网络设备配置，就不可能回答这个问题。

*可能*是一台服务器比另一台服务器具有更多的网络接口和/或更多不同的 IP 地址（例如使用`eth0:1`技巧来使用额外的虚拟网络接口）。

您*可能*还偶然发现了您机器的两个 CUPS 化身之一中的错误。

# javascript - 如何动态调整 iFrame 的大小（跨浏览器解决方案）

> ID：13135019
> 
> 赞同：5
> 
> 时间：2012-10-30T08:15:42.117
> 
> 标签：javascript, html, drupal, iframe, resize

我正在尝试`iframe`在 Drupal 页面上包含一个。到目前为止，我成功地包含了框架，但我编写的高度调整大小功能仅适用于 Internet Explorer。我的目标是在 Firefox 和 Chrome 中也可以调整大小。我搜索了互联网，但找不到我要找的东西。长话短说，我希望我的框架能够自动调整高度本身。

这是我到目前为止所做的（这是 Drupal 中包含的 HTML 页面的代码）：

```
<script type="text/javascript">
    function resize() {
        var iframe = document.all.icw;
        document.getElementById("icw").style.height = iframe.document.body.scrollHeight + "px";
    }
</script>
<iframe id="icw" src="XXXXX" width="100%" scrolling="no" onload="resize()"> 
```

我知道如果`iframe`生活在另一个域中，由于权限的原因，解决方案可能会更加困难。那是对的吗？

这些是我在 Chrome 和 Firefox 中遇到的错误：

> Chrome：无法读取未定义的属性“正文”
> 
> Chrome：JavaScript 尝试从具有 URL YYY 的框架访问具有 URL XXX 的框架。域、协议和端口必须匹配。
> 
> Firefox：document.all 未定义

**编辑：**如果我想更改其中一个`iframe`元素怎么办？就我而言，我需要更改文本框值。我知道当页面加载时我必须这样做，但我找不到解决方案。无论我把代码放在哪里，我总是得到一个

> 无法调用未定义的方法“getElementById”

当我尝试访问 iFrame 文本框时。

**EDIT2：**问了一个新问题，因为它们不相关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:29:14.313

只要您可以访问两者，此解决方案甚至可以跨域工作。有很多边缘情况，但至少你可以从这个开始。您还可以添加计时器事件以确保 iFrame 始终是正确的大小，因此您永远不会有滚动条。请记住，由于使用了 postMessage，这仅适用于支持 HTML5 的浏览器。

内部 iFrame

```
function resize(){
    var body = document.body,
    html = document.documentElement,
    height = body.offsetHeight;
    if(height === 0){
        height = html.offsetHeight;
    }
    parent.postMessage({'action':'RESIZE', 'height':height}, '*');
} 
```

家长

```
function handleMessage(e) {
    if (e.data.action == 'RESIZE') {
        var targetHeight = e.data.height;
        $('#iFrame').height(targetHeight);
    }
}

window.addEventListener("message", handleMessage, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T12:52:47.520

```
window.addEventListener("message", handleMessage, false); 
```

此代码不适用于 IE。

对于 IE 使用

```
window.attachEvent("onmessage", handleMessage, false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T21:01:37.343

查看这个小型库，它可以为您完成此操作并管理所有其他边缘案例。

[https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)

# c++ - 使用空间索引库批量加载 R* 树

> ID：13135026
> 
> 赞同：3
> 
> 时间：2012-10-30T08:16:20.213
> 
> 标签：c++, spatial, bulk-load, r-tree, libspatialindex

在使用空间库成功构建 R* 树后，将记录一一插入 250 万次，我试图通过批量加载创建 R* 树。我实现了 DBStream 类以迭代地将数据提供给 BulkLoader。本质上，它调用以下方法并为 Bulkloader 准备一个 Data（代码中的 d 变量）对象：

```
void DBStream::retrieveTuple() {
if (query.next()) {
    hasNextBool = true;

    int gid = query.value(0).toInt();

            // allocate memory for bounding box
            // this streets[gid].first returns bbox[4]
    double* bbox = streets[gid].first;

            // filling the bounding box values
    bbox[0] = query.value(1).toDouble();
    bbox[1] = query.value(2).toDouble();
    bbox[2] = query.value(3).toDouble();
    bbox[3] = query.value(4).toDouble();

    rowId++;

    r = new SpatialIndex::Region();
    d = new SpatialIndex::RTree::Data((size_t) 0, (byte*) 0, *r, gid);
    r->m_dimension = 2;
    d->m_pData = 0;
    d->m_dataLength = 0;

    r->m_pLow = bbox;
    r->m_pHigh = bbox + 2;
    d->m_id = gid;
} else {
    d = 0;
    hasNextBool = false;
    cout << "stream is finished d:" << d << endl;
}
} 
```

我初始化 DBStream 对象并通过以下方式调用批量加载：

```
// creating a main memory RTree
memStorage = StorageManager::createNewMemoryStorageManager();

size_t capacity = 1000;
bool bWriteThrough = false;
fileInMem = StorageManager
   ::createNewRandomEvictionsBuffer(*memStorage, capacity, bWriteThrough);

double fillFactor = 0.7;
size_t indexCapacity = 100;
size_t leafCapacity = 100;
size_t dimension = 2;
RTree::RTreeVariant rv = RTree::RV_RSTAR;

DBStream dstream();

tree = RTree::createAndBulkLoadNewRTree(SpatialIndex::RTree::BLM_STR, dstream,
   *fileInMem,
   fillFactor, indexCapacity,
   leafCapacity, dimension, rv, indexIdentifier);

cout << "BulkLoading done" << endl; 
```

批量加载调用我的 next() 和 hasNext() 函数，检索我的数据，对其进行排序，然后在构建阶段分割故障。有什么线索吗？是的，错误是：

```
 RTree::BulkLoader: Building level 0
    terminate called after throwing an instance of 'Tools::IllegalArgumentException' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:49:57.837

据说问题在于内存分配和代码中的一些错误（也与内存分配有些相关）。首先需要正确分配 Data 变量的属性：

```
memcpy(data->m_region.m_pLow, bbox, 2 * sizeof(double));
memcpy(data->m_region.m_pHigh, bbox + 2, 2 * sizeof(double));
data->m_id = gid; 
```

其次（也是最重要的）getNext 必须返回一个包含所有值的新对象：

```
RTree::Data *p = new RTree::Data(returnData->m_dataLength, returnData->m_pData,
returnData->m_region, returnData->m_id);
return returnData; 
```

内存的解除分配是由 RTree 完成的，所以这里不需要注意。

# objective-c - 如何避免我的 UITextView 被我的 UITableView 覆盖？

> ID：13135028
> 
> 赞同：1
> 
> 时间：2012-10-30T08:16:45.397
> 
> 标签：objective-c, ios, uitableview, uitextfield, uiviewanimation

我创建了一个带有视图的论坛，并在视图中放置了一个文本字段。我的问题是，每当我向上滑动时，它们的键盘会将 tableView 中的文本放置在 UIView 和被覆盖的 TextField 上。任何想法这背后的原因可能是什么？当我们这样做时，也许我不应该创建一个带有 TextField 的视图，而是使用 iPhone 短信应用程序中的标准外观，但我不知道他们是如何创建那个栏的。有任何想法吗？我在下面发布所有图片：

iPhone标准外观，如何创建这样的东西？：![http://oi46.tinypic.com/4zssbk.jpg](../Images/044e43be7409c1fe037b78866418ed9f.png)

我的文本字段视图：![http://oi47.tinypic.com/313kleu.jpg](../Images/abe389d5f8d2723aa5f3857d10cce321.png)

我的问题如上所述：![http://oi50.tinypic.com/fz5atf.jpg](../Images/7289593025a4faa0b1d84c0e6c1357f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:38:26.120

您可以为此创建自定义视图并将其添加为`inputAccessoryView`键盘。有关更多详细信息，请查看[有关此的苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uitextview_class/Reference/UITextView.html)。当键盘关闭时，在屏幕底部显示此视图，当键盘出现时，将其从底部移除并使其成为 inputAccessoryView。

> **输入附件视图：**
> 
> 当文本视图成为第一响应者时显示的自定义附件视图

# ruby-on-rails - 返回选定字段的所有语言环境

> ID：13135033
> 
> 赞同：1
> 
> 时间：2012-10-30T08:17:04.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

说我有一本模型书

```
class Book
  include Mongoid::Document
  field :name, localize: true
  # ... much more fields
end 
```

现在我只想查询名称，但查询所有语言环境。Book.only(:name) 似乎返回当前语言环境，虽然我可以做 Book.only(:name, :"name.ar")，但它要求我手动添加我拥有的所有语言环境。

有没有办法告诉 Mongoid 我想要选定字段的所有语言环境？

# java - 在 Java 中创建 JSON 对象并在 javascript/jquery 中访问它

> ID：13135035
> 
> 赞同：5
> 
> 时间：2012-10-30T08:17:05.297
> 
> 标签：java, javascript, jquery, json, struts2

我想在 java 代码中创建一个 JSON 对象，然后将其传递给 javascript/jquery 进行解析（进一步处理）。我正在使用 Struts 2 框架。

这必须在页面加载时完成，而不是在 AJAX 调用之后。如何在 javascript/jquery 中访问 JSON 对象（用 java 创建）。

还有用于为 java 对象创建 JSON 对象的任何 API 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T08:19:30.790

您应该查看[Google GSON](http://code.google.com/p/google-gson/)库。

将 Object 转换为 JSON 字符串非常简单：

```
Gson gson = new Gson();
String jsonString = gson.toJson(myObject); 
```

对于您的用例（Struts 2），一个简单的解决方案是将`jsonString`属性放在您的 中`Action`，然后在 JSP 页面中引用它，如下所示：

```
<!-- this goes into your .jsp -->
<script type="text/javascript">
    var myJsonObject = <s:property value="jsonString" default="[]" escape="false" />; 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:28:57.270

您可以为问题库尝试此[POST](https://stackoverflow.com/questions/2496494/library-to-encode-decode-from-json-to-java-util-map)。至于在 javascript 中使用 json 字符串，您可以使用[jQuery](http://api.jquery.com/jQuery.parseJSON/)

```
 jQuery.parseJSON( string ); 
```

# backbone.js - 使用带有backbone.js的twiiter工具提示

> ID：13135038
> 
> 赞同：2
> 
> 时间：2012-10-30T08:17:17.437
> 
> 标签：backbone.js, twitter-bootstrap

[完整样本在这里](http://jsfiddle.net/kkXAK/)

我有一个非常简单的主干 js 结构。

```
 var Step1View = Backbone.View.extend({
    el:'.page',
    render:function () {
        var template = _.template($('#step1-template').html());
        this.$el.html(template);

    }
});

var step1View = new Step1View();
var Router = Backbone.Router.extend({
    routes:{
        "":"home"
    }
});

var router = new Router;
router.on('route:home', function () {
    step1View.render();
})
Backbone.history.start(); 
```

这很好用，但是我无法调用这个简单的 jquery 函数。

$(document).ready(function() { $('.tip').tooltip(); });

## 更新

小学生错误在这里。jquery onload 函数需要放在路由中。我对骨干很陌生，所以我不确定这是否是最佳做法。但以下工作。

```
 render:function () {

            var that = this;
            var savings = new Savings();
            savings.fetch({
                success:function () {
                    var template = _.template($('#step3-template').html(), {savings:savings.models});
                    that.$el.html(template);
// put your jquery good ness here
                    $('.tip').tooltip();
                    $(".step3-form").validate();
                }
            })

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:11:39.533

看起来你找到了答案！只是想分享一下，您可以通过这样做来缩小 jQuery 的范围。

```
 savings.fetch({
            success:function () {
                var template = _.template($('#step3-template').html(), {savings:savings.models});
                that.$el.html(template);
                that.$el.find('.tip').tooltip();
                that.$el.find(".step3-form").validate();
            } 
```

您在示例中的内容有效，但它每次都会扫描整个文档以查找 HTML 类`tip`，您可以使用您刚刚创建的元素向下扫描您刚刚在其中创建的提示。轻微优化。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-28T19:44:14.280

看起来你找到了答案！只是想分享一下，您可以通过这样做来缩小 jQuery 的范围。

```
 savings.fetch({
        success:function () {
            var template = _.template($('#step3-template').html(), {savings:savings.models});
            that.$el.html(template);
            that.$el.find('.tip').tooltip();
            that.$el.find(".step3-form").validate();
        } 
```

您在示例中所拥有的内容有效，但它每次也使用类提示扫描整个文档以查找 HTML，您可以使用刚刚创建的元素向下扫描仅针对您刚刚在其中创建的提示。轻微优化。

希望这有帮助！

# c# - 无法在我的 wpf 应用程序中复制内存

> ID：13135047
> 
> 赞同：1
> 
> 时间：2012-10-30T08:18:03.553
> 
> 标签：c#, .net, wpf, memory-management, mvvm

我是一名 C++ 开发人员，最近开始研究 WPF。我正在研究一系列组合框和一个按钮。这是代码：

XAML：

```
<GroupBox Header="EEPROM Version Strings" Grid.Column="1" Height="Auto" HorizontalAlignment="Stretch" Margin="10,0,10,0" Name="groupBox1" VerticalAlignment="Stretch" Width="Auto">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Button Content="Write EEPROM" Command="{Binding WriteEEPROMCommand}" Grid.Row="4" Height="23" HorizontalAlignment="Center" Margin="0,0,0,0" Name="WriteEEPROMVersionStrings" VerticalAlignment="Center" Width="116" />
                <ComboBox Height="23" ItemsSource="{Binding I2CAddressList}" SelectedItem="{Binding SelectedI2CAddressList, Mode=TwoWay}" SelectedIndex="0" Grid.Row="0" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox1" VerticalAlignment="Center" Width="200" />
                <ComboBox Height="23" ItemsSource="{Binding BoardBoxList}" SelectedItem="{Binding SelectedBoardBoxList, Mode=TwoWay}" SelectedIndex="0" Grid.Row="1" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox2" VerticalAlignment="Center" Width="200" />
                <ComboBox Height="23" ItemsSource="{Binding VersionBoxList}" SelectedItem="{Binding SelectedVersionBoxList, Mode=TwoWay}" SelectedIndex="0" Grid.Row="2" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox3" VerticalAlignment="Center" Width="200" />
                <ComboBox Height="23" ItemsSource="{Binding SerialBoxList}" SelectedItem="{Binding SelectedSerialBoxList, Mode=TwoWay}" SelectedIndex="0" Grid.Row="3" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox4" VerticalAlignment="Center" Width="200" />
            </Grid>                    
        </GroupBox> 
```

由于我使用的是 MVVM，这是我的 ViewModel 类：

```
Byte[] sendBuf = new Byte[256];
    Byte[] readBuf = new Byte[256];       

    public ObservableCollection<string> _I2CAddressList;
    public ObservableCollection<string> _BoardBoxList;
    public ObservableCollection<string> _VersionBoxList;
    public ObservableCollection<string> _SerialBoxList; 
```

在构造函数中：

```
var myboard = new[]
        {      
               "",
               "S1010012",   // redhook
               "S1010018",   // bavaria
               "S1010020"    // flying dog
        };

        var myVariant = new[]
        { 
               "",    
               "001A",
               "001B",
               "001C",
               "002A",
               "002B",
               "002C",
               "003A",
               "003B",
               "003C",
        };      

        _I2CAddressList = new ObservableCollection<string>();
        _BoardBoxList = new ObservableCollection<string>(myboard);
        _VersionBoxList = new ObservableCollection<string>(myVariant);
        _SerialBoxList = new ObservableCollection<string>();

        for (int i = 1; i < 200; i++)
        {
            _SerialBoxList.Add(i.ToString());
        }

        //List of I2C Address
        _I2CAddressList.Add("0x50");
        _I2CAddressList.Add("0x53");

        this.SelectedI2CAddressList = this._I2CAddressList[1];
        this.SelectedBoardBoxList = this.BoardBoxList[2];
        this.SelectedVersionBoxList = this.VersionBoxList[2];
        this.SelectedSerialBoxList = this.SerialBoxList[0]; 
```

这是组合框和按钮属性：

```
public ObservableCollection<string> I2CAddressList
    {
        get { return _I2CAddressList; }
        set
        {
            _I2CAddressList = value;
            OnPropertyChanged("I2CAddressList");
        }
    }

    private string _SelectedI2CAddressList;
    public string SelectedI2CAddressList
    {
        get { return _SelectedI2CAddressList; }
        set
        {
            _SelectedI2CAddressList = value;
            OnPropertyChanged("SelectedI2CAddressList");
        }
    }        

    // Similar property for other comboboxes

    private ICommand mWriteEEPROMCommand;
    public ICommand WriteEEPROMCommand
    {
        get
        {
            if (mWriteEEPROMCommand == null)
                mWriteEEPROMCommand = new DelegateCommand(new Action(mWriteEEPROMCommandExecuted), new Func<bool>(mWriteEEPROMCommandCanExecute));

            return mWriteEEPROMCommand;
        }
        set
        {
            mWriteEEPROMCommand = value;
        }
    }

    public bool mWriteEEPROMCommandCanExecute()
    {
        return true;
    }

    char[] version = 
        {
                'A', 'U', 'D', 'I', 'E', 'N', 'C', 'E',         // name
                '0', '0', '0', '0', '0', '0', '0', '0' ,        // reserved,  firmware size
                '0', '0', '0', '0', '0', '0', '0', '0' ,        // board number
                '0', '0', '0', '0', '0', '0', '0', '0' ,        // variant, version, serial
                '0', '0', '0', '0', '0', '0', '0', '0'          // date code, reserved
        };               

    public void mWriteEEPROMCommandExecuted()
    {
        int temp, memloc = 0;
        int cmd = 0x0A53;

        // fill in the I2C address
        if ((I2CAddressList.IndexOf(_SelectedI2CAddressList) + 1) == 1)
        {
            cmd = 0x0A50;
        }

        // fill in the address to write to -- 0
        sendBuf[memloc++] = 0;
        sendBuf[memloc++] = 0;   

        // fill in the audience header
        for (int i = 0; i < 8; i++)
        {
            sendBuf[i + memloc] = Convert.ToByte(version[i]);       // the first 8 bytes
        }               
        memloc += 16;                                               // the 8 copied, plus 8 reserved bytes

        temp = (BoardBoxList.IndexOf(_SelectedBoardBoxList) + 1);
        if (temp >= 1 && temp <= 3) 
        {
            // How to perform the memory operation here
        }

        memloc += 8;            // move regardless if this was set
    } 
```

我无法弄清楚如何在`myboard`. 虽然我能够做到这一点`version`。这就是我在 C++ 代码中所做的

```
sendBuf[memloc++] = 0;
    sendBuf[memloc++] = 0;

    // fill in the audience header
    memcpy(sendBuf+memloc, version, 8); // the first 8 bytes
    memloc += 16;

temp = m_boardBox->getSelectedId();
    if(temp >= 1 && temp <= 3) // a valid board selection
        memcpy(sendBuf+memloc, boards[temp], 8);
    memloc += 8; 
```

板子是这样的：

```
static const signed char boards[][9] = {
{},                                           // left blank to indicate no selection
{ 'S', '1', '0', '1', '0', '0', '1', '2', 0 },   // redhook
{ 'S', '1', '0', '1', '0', '0', '1', '8', 0 },   // bavaria
{ 'S', '1', '0', '1', '0', '0', '2', '0', 0 },   // flying dog 
```

};

因此，当我单击 WRITEEEPROM 按钮时，会执行一系列代码。我在某种程度上是成功的，但是当我遇到如何为字符串数组复制内存时，我无法解决它。我已经展示了上面的 C++ 示例 :)

我怎样才能实现它？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:21:18.740

在 .NET 中，System.Buffer 包含一堆用于复制缓冲区的方法。

[http://msdn.microsoft.com/en-us/library/system.buffer.aspx](http://msdn.microsoft.com/en-us/library/system.buffer.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:41:43.103

我不确定这是否是您正在寻找的东西，但无论如何我都会尝试。

字符串使用[`System.Text.Encoding`](http://msdn.microsoft.com/en-us/library/vstudio/system.text.encoding.aspx)类进行编码。此类提供使用指定编码将字符串转换为字节数组的方法：

```
Byte[] encodedBytes = System.Text.Encoding.ASCII.GetBytes("string"); 
```

框架本身提供了几种编码，例如 ASCII、UTF7、UTF8、Unicode 等。如果需要特殊编码，则必须使用 Encoding 作为基类自行实现。

生成的字节数组可以使用`System.Buffer`.

# ios - 如何在卸载 iphone 应用程序时触发事件？

> ID：13135050
> 
> 赞同：0
> 
> 时间：2012-10-30T08:18:12.923
> 
> 标签：ios

在卸载 iphone 应用程序时。我想从我的数据库服务中删除所有数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:42:20.770

这是可能的，但我认为当用户删除您的应用程序时，没有一种非常简单的方法可以实现方法。您可以查看[APNS 反馈服务](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW3)，这可能会对您有所帮助。

> 如果提供者尝试向应用程序发送推送通知，但该应用程序不再存在于设备上，则设备会将该事实报告给 Apple Push Notification Service。这种情况经常发生在用户卸载应用程序时。如果设备报告应用程序的交付尝试失败，APNs 需要某种方式通知提供者，以便它可以避免向该设备发送通知。这样做可以减少不必要的消息开销并提高整体系统性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:31:06.027

对于 iOS 应用程序，长按图标后出现的删除选项是唯一的“卸载”选项，它将始终从设备中删除应用程序的任何存储日期。当用户这样做时，不会触发任何特定事件。

# c# - 更改cultureinfo并获得正确的resx翻译

> ID：13135051
> 
> 赞同：2
> 
> 时间：2012-10-30T08:18:17.493
> 
> 标签：c#, resx, cultureinfo

我尝试使用以下代码从我的瑞典语 resx 中获取翻译，但它只会从我的默认 resx 中返回英文翻译。我在两个文件中都有完全相同的密钥的翻译。我从命令行 c# 程序调用它。谁知道为什么不翻译？

```
public String GetString(String resxPackageName, String xmlKey)
{            
    Thread.CurrentThread.CurrentCulture = new CultureInfo("sv-SE", false);
    ResourceManager rm = new ResourceManager("MyPackage.CustomerPortal.Followup", this.GetType().Assembly);
    return rm.GetString("CurrentPriceTagTranslation");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:22:05.567

我认为如果你没有在*GetString*方法中指定一种文化，它将使用调用线程的*CurrentUICulture*，如果你改变它，一切都应该工作。

# ruby-on-rails - 自定义载波验证消息

> ID：13135053
> 
> 赞同：0
> 
> 时间：2012-10-30T08:18:18.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, carrierwave

carrierwave 给了我这个验证错误：

> 图片 不允许上传“页面”文件，允许的类型：jpg、jpeg、gif、png

知道如何从一开始就删除“图像”属性位吗？它读起来不太好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:48:58.733

我相信这应该有效：

```
class MyModel < ActiveRecord::Base

  ...

  HUMANIZED_COLUMNS = {:image => ""}

  def self.human_attribute_name(attribute)
    HUMANIZED_COLUMNS[attribute.to_sym] || super
  end

 ...

end 
```

[关于 human_attribute_name 的文档](http://apidock.com/rails/ActiveModel/Translation/human_attribute_name)

或者，在您的语言环境文件中，添加：

```
en:
  activerecord:
    attributes:
      my_model:
        image: "" 
```

在这两种情况下，将`MyModel`/替换`my_model`为您将图像上传到的 activerecord 类的名称。

# java - 休眠 HQL 中 mysql 等效的 time_to_sec

> ID：13135055
> 
> 赞同：3
> 
> 时间：2012-10-30T08:18:29.833
> 
> 标签：java, hibernate

`TIME_TO_SEC`hibernate HQL 中是否有与MySQL 数据库具有相同功能的方法。

问这个是因为我想在我的 Oracle 数据库中使用这个 HQL 查询：

```
"select count(log) from Entry log where time_to_sec(lclTime) between '"
             + timeInSeconds + "' and '" + nextHour + " 
```

我必须使用 hibernate HQL 使这个查询在 Oracle 和 MySQL 数据库中都可以执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:34:18.220

由于您使用的是特定于数据库的函数（本机 MySQL 查询），因此当您将数据库更改为 Oracle 时，它​​将不起作用。我认为明智的解决方法是使用 HQL。我发现您的查询不像您所写的那样可移植。

修复：
1\. 将 MySQL 时间数据类型迁移到 Oracle 日期数据类型。
2\. 将您的实体字段更改为 java.sql.Date 类型。

如果您遇到任何问题，请尝试使用 Hibernate User Type 来映射它。

在这种情况下，用户类型数据类型有很大帮助。

# php - 记录“反弹” - 分析

> ID：13135057
> 
> 赞同：0
> 
> 时间：2012-10-30T08:18:36.367
> 
> 标签：php, seo, google-analytics

我不太确定我的头衔是否好，但无论如何。继续我的问题/问题。

我正在开发我公司的新时事通讯，它不仅旨在为我们的客户提供优惠的交易和有趣的信息，而且我们还将使用它来确定我们的客户想要什么。

现在，当我决定添加“内部”日志记录时，我的问题出现了，这本身并不复杂。时事通讯中的 URL 遵循以下结构；[http://domain.com/?page=newsclick&n_ref=RANDOM_CODE](http://domain.com/?page=newsclick&n_ref=RANDOM_CODE)，代码已保存，一切都很好，RANDOM_CODE 只是创建链接时保存的值，因此每个链接到目的地，这就是我的问题所在。如果我通过自己的 logging.php 文件将它们退回，googleanalytics 会跟随吗？因为在 logging.php 中没有打印任何内容，因为它只是将访问者反弹到正确的页面。

我想知道，我应该以不同的方式做这一切，还是谷歌足够聪明，可以捕捉到这个“问题”并忽略它？我是 Analytics 的新手，我很确定您可以看到。

感谢任何和所有的帮助！

亲切的问候，约翰。

# c# - 动态打印更新的行数

> ID：13135060
> 
> 赞同：1
> 
> 时间：2012-10-30T08:18:57.913
> 
> 标签：c#, sql

我工作的公司拥有大型数据库，单个表中有数百万条记录。我编写了一个在远程服务器之间迁移表的 C# 程序。

我首先使用 SMO 创建所有表而不复制数据，然后在创建所有表后完成数据插入。

在记录插入期间，由于记录太多，控制台窗口保持空白，直到所有行都被插入。由于数据量巨大，这需要很长时间。

我现在想要的是一种打印 n 行更新的方法，就像在 MSSQL 导入导出数据向导中一样。
插入部分只是一个简单的`insert into select *`查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:29:48.180

听起来您可能正在使用 SqlCommands，如果是这样，这里是一个示例

```
using (SqlConnection connection = new SqlConnection(Connection.ConnectionString) )
{
    using(SqlCommand command = new SqlCommand("insert into  OldCustomers select * from customers",connection))
    {
        connection.Open();
        var numRows = command.ExecuteNonQuery();
        Console.WriteLine("Affected Rows: {0}",numRows);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:10:26.550

您绝对需要查看[`OUTPUT`](http://msdn.microsoft.com/en-us/library/ms177564.aspx)条款。MSDN 上有有用的示例。

```
using (SqlConnection conn = new SqlConnection(connectionStr) )
{
    var sqlCmd = "
                  CREATE TABLE #tmp (
                      InsertedId BIGINT                                             
                  );
                  INSERT INTO TestTable
                  OUTPUT Inserted.Id INTO #tmp
                  VALUES ....
                  SELECT COUNT(*) FROM #tmp";
    using(SqlCommand cmd = new SqlCommand(sqlCmd,conn))
    {
        conn .Open();
        var numRows = command.ExecuteNonQuery();
        Console.WriteLine("Affected Rows: {0}",numRows);
    }
} 
```

我还建议为此目的使用存储过程。

# c# - 在一个位置共享程序集？

> ID：13135061
> 
> 赞同：1
> 
> 时间：2012-10-30T08:19:14.493
> 
> 标签：c#, asp.net, .net, .net-4.0, shared-libraries

我有一个包含许多子项目的大项目。（如图所示）

两者`WebSiteA`都`WebSiteB`引用了*这两个*DLL 项目。

但是，当我更改 dll 时 - 我需要更新每个网站中的*每个*bin。

我不想那样。

*我知道我可以把它们放进去，`GAC`但我被告知不要（请不要问我为什么。）*

![在此处输入图像描述](../Images/4acd518bc97bf9c01129971558b1edd6.png)

有没有像这样的解决方案：

![在此处输入图像描述](../Images/e8a42703f70d5c24df016f05e33ceddb.png)

所以当我更新任何 dll 时 - 我只把它放在一个地方？（因此 dll 不会在每个站点上`bin`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:45:22.787

`.refresh`您可以使用文件参考来制造技巧，*但未在实时服务器上进行测试*。

首先将您的公用 dll 放在公用目录中。
其次，在每个 bin 上，将`*.refresh`文件与 dll 放在一起，如果找到新版本，则说明从哪里更新 dll。

所以你在垃圾箱里面有这样的东西：

```
mySuperModule.dll
mySuperModule.dll.refresh 
```

在**mySuperModule.dll.refresh**中需要检查更新的模块的位置 ->

```
d:\Dlls\mySuperModule.dll 
```

`d:\dlls`搜索新更新的 dll 的常见位置在哪里。

最后，您只更新公共目录 dll，而您离开项目使其余部分自动进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:22:15.163

GAC 的全部意义在于提供该功能，如果您不使用该功能，那么您将无法以您想要的方式共享 DLL。这是由于站点是如何保护和相互分离的。

# silverlight - 在 silverlight 上播放 rtmp 流

> ID：13135068
> 
> 赞同：2
> 
> 时间：2012-10-30T08:19:45.827
> 
> 标签：silverlight, streaming, rtmp

嗨，我有一个带有链接 rtmp://IP/live 的直播。

我知道这个 rtmp 流只能用 Flash 播放器播放。但是我想在silverlight或window phone 7上玩这个，这可能吗？

# sql - 为什么调用函数比直接执行函数代码需要更多时间

> ID：13135069
> 
> 赞同：1
> 
> 时间：2012-10-30T08:19:46.323
> 
> 标签：sql, sql-server-2008

在我的 SQL Server 2008 R2 数据库中，我有一个调用函数的查询。

最近这个查询开始执行得很慢。我发现用户定义的函数阻碍了所有的查询。

我尝试单独执行此功能，它需要 40 秒才能完成，而之前它需要 3-4 秒才能执行。所以我尝试执行函数内部的代码并在这 3-4 秒内执行。

我不明白为什么执行函数代码比调用函数本身花费的时间要少得多。我只在 SSMS 中尝试了所有这些。

这就是函数本身

```
ALTER FUNCTION [dbo].[fn_SI_GetMark] (@AREA_ID int, @BD datetime, @ED datetime)  
RETURNS decimal(24, 2) AS  
BEGIN 

Declare @mon int;
set @Mon = 1;
if(DateDiff(day, @BD, @ED) > 40)
begin

declare @q1sb datetime; set @q1sb = Convert(datetime, '01.01.'+Convert(nvarchar(4), Year(@BD)));
declare @q1eb datetime; set @q1eb = Convert(datetime, '01.04.'+Convert(nvarchar(4), Year(@BD)));
declare @q2sb datetime; set @q2sb = Convert(datetime, '01.04.'+Convert(nvarchar(4), Year(@BD)));
declare @q2eb datetime; set @q2eb = Convert(datetime, '01.07.'+Convert(nvarchar(4), Year(@BD)));
declare @q3sb datetime; set @q3sb = Convert(datetime, '01.07.'+Convert(nvarchar(4), Year(@BD)));
declare @q3eb datetime; set @q3eb = Convert(datetime, '01.10.'+Convert(nvarchar(4), Year(@BD)));
declare @q4sb datetime; set @q4sb = Convert(datetime, '01.10.'+Convert(nvarchar(4), Year(@BD)));
declare @q4eb datetime; set @q4eb = Convert(datetime, '01.01.'+(Convert(nvarchar(4), Year(@BD) + 1)));
if((@BD >= @q1sb) and (@BD < @q1eb))
begin
    set @BD = @q1sb;
end
else if((@BD >= @q2sb) and (@BD < @q2eb))
begin
    set @BD = @q2sb;
end
else if((@BD >= @q3sb) and (@BD < @q3eb))
begin
    set @BD = @q3sb;
end
else if((@BD >= @q4sb) and (@BD < @q4eb))
begin
    set @BD = @q4sb;
end

declare @q1se datetime; set @q1se = Convert(datetime, '01.01.'+Convert(nvarchar(4), Year(@ED)));
declare @q1ee datetime; set @q1ee = Convert(datetime, '01.04.'+Convert(nvarchar(4), Year(@ED)));
declare @q2se datetime; set @q2se = Convert(datetime, '01.04.'+Convert(nvarchar(4), Year(@ED)));
declare @q2ee datetime; set @q2ee = Convert(datetime, '01.07.'+Convert(nvarchar(4), Year(@ED)));
declare @q3se datetime; set @q3se = Convert(datetime, '01.07.'+Convert(nvarchar(4), Year(@ED)));
declare @q3ee datetime; set @q3ee = Convert(datetime, '01.10.'+Convert(nvarchar(4), Year(@ED)));
declare @q4se datetime; set @q4se = Convert(datetime, '01.10.'+Convert(nvarchar(4), Year(@ED)));
declare @q4ee datetime; set @q4ee = Convert(datetime, '01.01.'+(Convert(nvarchar(4), Year(@ED) + 1)));
if((@ED >= @q1se) and (@ED <= @q1ee))
begin
    set @ED = @q1ee;
end
else if((@ED >= @q2se) and (@ED <= @q2ee))
begin
    set @ED = @q2ee;
end
else if((@ED >= @q3se) and (@ED <= @q3ee))
begin
    set @ED = @q3ee;
end
else if((@ED >= @q4se) and (@ED <= @q4ee))
begin
    set @ED = @q4ee;
end

set @Mon = datediff(month, @BD, @ED) / 3;

end

declare @i int;

DECLARE @Mark decimal(24, 2); SET @Mark = 0;
declare @count int; SET @count = 0;

DECLARE @AREA_PATH nvarchar(max), @SI_CheckListId int, @SI_CheckListTitle nvarchar(max), @SI_CheckListCreatedBy int;

DECLARE @Mark2 decimal(24, 2); set @Mark2 = 0;
declare @count2 int; SET @count2 = 0;

DECLARE @areaIdStr nvarchar(max);
set @areaIdStr = convert(nvarchar(max), @AREA_ID);

DECLARE db_cursor_rights2 CURSOR
for
SELECT     tbl_SI_CheckList.SI_CheckListId
FROM         tblArea INNER JOIN
                  tbl_SI_CheckList ON tblArea.AREA_ID = tbl_SI_CheckList.AreaId
WHERE ('%/'+tblArea.AREA_PATH+'/%' like '%/'+@areaIdStr+'/%') 
and (((tbl_SI_CheckList.SI_CheckListIsDeleted <> 1) and (tbl_SI_CheckList.SI_CheckListDateCreated <= @ED))
    or  
    ((tbl_SI_CheckList.SI_CheckListIsDeleted = 1) and (tbl_SI_CheckList.SI_CheckListDateDeleted is not null) and (tbl_SI_CheckList.SI_CheckListDateDeleted >= @BD) and (tbl_SI_CheckList.SI_CheckListDateCreated <= @ED)))

OPEN db_cursor_rights2;  
FETCH NEXT FROM db_cursor_rights2
INTO @SI_CheckListId;
WHILE @@FETCH_STATUS = 0
BEGIN   

    set @i = 1
    while @i <= @Mon
    begin
        set @Mark2 = 0
        set @count2 = 0

        SELECT     @Mark2 = @Mark2 + Mark
        FROM       tbl_SI_CheckListRegistr
        WHERE     (SI_CheckListId = @SI_CheckListId) and ((tbl_SI_CheckListRegistr.DateCreated >= @BD) and (tbl_SI_CheckListRegistr.DateCreated < @ED) and (tbl_SI_CheckListRegistr.IsDeleted <> 1))

        if(@Mark2 is not null)
        begin 
            set @Mark = @Mark + @Mark2;
        end
        set @i = @i + 1;    

        SELECT     @count2 = count(Mark)
        FROM       tbl_SI_CheckListRegistr
        WHERE     (SI_CheckListId = @SI_CheckListId) and ((tbl_SI_CheckListRegistr.DateCreated >= @BD) and (tbl_SI_CheckListRegistr.DateCreated < @ED) and (tbl_SI_CheckListRegistr.IsDeleted <> 1))

        if(@count2 = 0)
        begin 
            set @count2 = @count2 + 1;
        end 

        set @count = @count + @count2;      

    end

    FETCH NEXT FROM db_cursor_rights2
    INTO @SI_CheckListId;

END
CLOSE db_cursor_rights2;
DEALLOCATE db_cursor_rights2;

if(@count = 0)
begin
set @count = 1;
end

set @Mark = round(@Mark/@count, 2)

RETURN (@Mark)

END 
```

这就是我尝试称呼它的方式

```
DECLARE @AREA_ID int; SET @AREA_ID=1;
DECLARE @BD datetime, @ED datetime;
SET @BD=cast('2012-10-01' AS DATETIME);
SET @ED=cast('2012-11-01' AS DATETIME);
DECLARE @MArk decimal(24,2);
set @Mark = (select dbo.fn_SI_GetMark(@AREA_ID, @BD, @ED));
PRINT @Mark 
```

另外一件事，我试图在另一个 dbserver 上执行这个函数（在这两个服务器之间设置了复制），它执行得非常快。还有一个观察，如果我调用不带参数的函数，直接在函数中设置它们，它也执行得很快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:11:30.743

可能是旧的统计数据。尝试更新

```
UPDATE STATISTICS tbl_SI_CheckListRegistr
UPDATE STATISTICS tblArea
UPDATE STATISTICS tbl_SI_CheckList 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:23:05.373

函数尚未编译，并未以最佳执行计划运行。尝试重新编译函数以提高性能。

> [RECOMPILE](http://msdn.microsoft.com/en-us/library/ms188332.aspx)：在模块执行后强制编译、使用和丢弃新计划。如果模块已有查询计划，则该计划保留在缓存中。

请参阅[sp_recompile](http://msdn.microsoft.com/en-us/library/ms181647.aspx)：

```
sp_recompile [ @objname = ] 'object' 
```

# java - TopComponent 调整大小行为

> ID：13135076
> 
> 赞同：3
> 
> 时间：2012-10-30T08:20:20.647
> 
> 标签：java, swing, netbeans, netbeans-platform, jsplitpane

目前，当您尝试手动调整 TopComponent 的大小时，它将显示一条黑线，表示 TopComponent 的未来大小。

![在此处输入图像描述](../Images/fbfac455c51deb803c44a551ae8fd2ee.png)

我想知道`JComponent`这条黑线的背后是什么？我怎样才能访问它？

* * *

**编辑**

我的问题的第一部分得到了回答。附图中显示的组件是`JSplitPane`.

现在，我希望能够访问它（即获取`JSplitPane`用于`TopComponent`在 netbeans 平台中调整大小的 ' 实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T08:25:21.987

*   有[JSplitPane](http://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html)，

*   但不确定 Netbeans 是否用 Java 编译（与 Eclipse 相比）

    编辑`I'd like to add a listener on it.`

*   将 PropertyChangeListener 添加到 JSplitPane，

*   有几个有用的方法`if (propertyName.equals(JSplitPane.XxxXxx))`

*   嵌套 JSplitPane 的通知，必须分别为每个 JSplitPanes 添加侦听器

*   例如

.

```
import java.awt.Dimension;
import java.awt.GridLayout;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTable;

public class JSplitPaneToy {

    public static void main(String[] args) {
        JSplitPane sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), makePanel());
        JPanel pnl = new JPanel();
        pnl.setLayout(new GridLayout(4, 1, 10, 10));
        pnl.add(makePanel());
        pnl.add(makePanel());
        pnl.add(makePanel());
        pnl.add(makePanel());
        PropertyChangeListener propertyChangeListener = new PropertyChangeListener() {

            public void propertyChange(PropertyChangeEvent changeEvent) {
                JSplitPane sourceSplitPane = (JSplitPane) changeEvent.getSource();
                String propertyName = changeEvent.getPropertyName();
                if (propertyName.equals(JSplitPane.LAST_DIVIDER_LOCATION_PROPERTY)) {
                    int current = sourceSplitPane.getDividerLocation();
                    System.out.println("Current: " + current);
                    Integer last = (Integer) changeEvent.getNewValue();
                    System.out.println("Last: " + last);
                    Integer priorLast = (Integer) changeEvent.getOldValue();
                    System.out.println("Prior last: " + priorLast);
                }else if (propertyName.equals(JSplitPane.RESIZE_WEIGHT_PROPERTY)) {
                    int current = sourceSplitPane.getDividerLocation();
                    System.out.println("Current: " + current);
                    Integer last = (Integer) changeEvent.getNewValue();
                    System.out.println("Last: " + last);
                    Integer priorLast = (Integer) changeEvent.getOldValue();
                    System.out.println("Prior last: " + priorLast);
                }
            }
        };
        sp.addPropertyChangeListener(propertyChangeListener);
        JFrame frame = new JFrame("JSplitPane Toy");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new GridLayout(0, 2, 10, 10));
        frame.add(sp);
        frame.add(pnl);
        frame.pack();
        frame.setVisible(true);
    }

    private static JScrollPane makePanel() {
        JScrollPane pane = new JScrollPane(new JTable(
                new Object[][]{{0, 1, 2}, {1, 2, 3}, {2, 3, 4}}, new Object[]{1, 2, 3}));
        pane.setPreferredSize(new Dimension(200, 100));
        return pane;
    }
} 
```

# zend-framework - 如何在 zf1.12.0 中使用 Zend Session Destroy？

> ID：13135079
> 
> 赞同：0
> 
> 时间：2012-10-30T08:20:34.233
> 
> 标签：zend-framework, session

我想为注销功能实现**销毁**会话。如何使用 zend 会话销毁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:48:51.240

```
$session = new Zend_session_Namespace('Your_namespace');
$session->unsetAll(); 
```

# mysql - 在 MySQL 中获得最佳得分手

> ID：13135081
> 
> 赞同：0
> 
> 时间：2012-10-30T08:20:48.617
> 
> 标签：mysql, sql

我有简单的表：

```
ID    Score
1     90
2     85
3     96
4     96
5     73 
```

我想获得最佳射手，所以我使用了 max 函数：

```
select max(s.score) as score,
    s.id
from student_score as s 
```

结果：

```
score    id
96       1 
```

问题是，有两个最佳射手，我要如何获得所有最佳射手？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T08:22:35.277

子查询从表中获取最大分数，`student_score`结果将用于比较`WHERE`子句。

```
SELECT a.*
FROM student_score a
WHERE Score = 
(
    SELECT MAX(Score)
    FROM student_score
) 
```

*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/f20f9/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T08:21:59.287

```
select s.score, s.id
from student_score as s
where
    s.score in 
    (
        select max(t.score)
        from student_score as t
    ) 
```

如果您希望您的子查询可重用，试试这个

```
select s.score, s.id, m.score
from student_score as s
    cross join (select max(t.score) as score from student_score as t) as m
where s.score = m.score 
```

[**SQL 提琴示例**](http://sqlfiddle.com/#!2/f20f9/17)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T08:22:33.970

试试这个：

使用您的查询作为子查询从实际表中选择分数

```
select * 
from  student_score 
where score in
 (
    select max(score)
    from   student_score ) 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/f20f9/4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T08:22:21.593

Max 是一个聚合函数，只返回一行。最简单的方法是发出子查询：

```
SELECT * FROM student_score
WHERE score = (
    SELECT MAX(score) FROM student_score
) 
```

如果您有很多行，请确保您有一个分数索引。

# c# - 如何从 C# 中的 WinForm.Opacity 中排除控件

> ID：13135082
> 
> 赞同：3
> 
> 时间：2012-10-30T08:20:51.753
> 
> 标签：c#, .net, winforms

我有一个表格，我将它的不透明度设置为 50%，如下所示：

```
this.Opacity = 0.5D; <--this==Form 
```

我的问题是表单上的所有内容都具有 50% 的不透明度

我在表单上有两个按钮，我希望它们没有不透明度。

**我知道这`this.Opacity`包括所有控件，出于某种原因，图形也包括在内**

我的问题是，如何排除控件的不透明度？

示例图像： ![示例 2](../Images/4b2fdb632d36eb54b98c6810ddfd2232.png)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T09:36:16.173

由于`Control`没有`Opacity`属性，而且大多数控件不支持透明颜色，所以一个可行的解决方案可以是：

1.  创建一个`Form`调用`MainForm`并放置您将被排除的所有控件。

    1.1 将 of`BackColor`和的`TransparencyKey`属性设置`MainForm`为相同的颜色，例如`Color.Red`

2.  创建另一个名为的窗体`TransparentForm`并放置所有必须变为透明的控件。将`ShowInTaskbar`属性设置为`False`。

3.  在`MainForm` `Load`事件中显示`TransparentForm`并将其发送回。

    ```
    private void MainForm_Load(object sender, EventArgs e)
    {
        TransparentForm form = new TransparentForm();
        form.Opacity = 0.5D;
        form.Show();
        form.SendToBack(); 
    } 
    ```

    ![在此处输入图像描述](../Images/0fc59a483c0d1f108056e98dd9164ba1.png)

两种形式的控件的位置必须是这样的，当组合时，它显示正确的用户界面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-01T15:52:46.890

创建一个 C# 项目并添加 3 个名为

1.  主要的
2.  背景
3.  孩子

并为“MAIN”表单加载事件添加以下代码；

```
private void MAIN_Load(object sender, EventArgs e)
{
     Child frm1 = new  Child();
     BACKGOUND frm2 = new BACKGOUND();
     frm2 .WindowState = System.Windows.Forms.FormWindowState.Maximized;      

     frm2.Opacity = 0.5;
     frm2.Show();

     frm1.ShowDialog();
     frm2.Close();
} 
```

# sql - datagridview 更新到数据库

> ID：13135085
> 
> 赞同：2
> 
> 时间：2012-10-30T08:21:07.210
> 
> 标签：sql, vb.net, datagridview

请帮我...

我在数据网格视图中加载我的数据库并编辑一些单元格。现在我只需要更新我的数据库

这是我的代码

```
 Dim dT As DataTable = MyDB.ExecCommand("SELECT `Field Name` FROM `tblfield`", "wellsfargo").Tables(0)

    Dim sSQL As String = ""

    Dim dZ As DataTable = MyDB.ExecCommand("SELECT " & sColumn & " FROM `" + cboJob.Text.Trim + "`", "wellsfargo", 0).Tables(0)

    dColumn = New DataTable
    dColumn = MyDB.ExecCommand("SHOW COLUMNS IN tblrecord", "wellsfargo", 0).Tables(0)

    If dZ.Rows.Count <> 0 Then
        sSQL = "UPDATE " & sColumn & " FROM `" + cboJob.Text.Trim + "`"
        MyDB.ExecQuery(sSQL, "wellsfargo")
    Else
        Dim sColumn As String = ""

        For z As Integer = 0 To dT.Rows.Count - 1
            If z = 0 Then
                sColumn = "`" & dT.Rows(z).Item(0).ToString & "`"
            Else
                sColumn = sColumn & ",`" & dT.Rows(z).Item(0).ToString & "`"
            End If
        Next
        sSQL = "INSERT INTO `" + MyJob + "` (" + sColumn + ") "

        MyDB.ExecQuery(sSQL, "wellsfargo")
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T07:34:33.850

完毕。我用这个代码..

```
 Try
        Cursor = Cursors.WaitCursor
        Dim sSQL As String
        sSQL = "UPDATE `" + cboJob.Text.Trim + "` SET `Description` ='" + TextBox1.Text + "' WHERE `Description`= '" + Label2.Text + "' AND `Line Number` ='" + comList.Text + "'"
        MyDB.ExecQuery(sSQL, "wellsfargo")
        MsgBox("Updated!")
        btnUpdate.Enabled = False

    Catch ex As Exception
        MsgBox("Select table first to Update")
    End Try
    Cursor = Cursors.Default 
```

# php - Apache Server 和 SQL Server 2008 Express 性能。隔离、方法或建议

> ID：13135087
> 
> 赞同：2
> 
> 时间：2012-10-30T08:21:14.513
> 
> 标签：php, sql-server, performance, apache, debugging

我想知道是否可以为以下问题提供一些提示或指导。

环境类型：小型办公室，大约 20 个用户。网络：所有服务器、工作站属于一个子网基础设施：虚拟化网络服务器和虚拟化数据库服务器。

目前我有一个运行 Apache 2.2.22 (Win32) 和 PHP 5.3.10 的 Web 服务器 (Win7SP1 x64)。我已经构建了一些连接到我们的数据库（SQL2k8 Express）并调用过程的页面，这些过程基本上只是带有连接和条件的基本选择语句。一旦返回结果集，PHP 会逐行遍历结果集，并在流经时显示行。

有时，结果页面可能需要很长时间才能加载，其中没有显示结果集，但 Web 浏览器加载栏/图标闪烁。有时它只会在加载结束时显示一个空白屏幕，这通常意味着查询连接已超时，或者有时它会返回结果集。例如，在正常情况下，页面加载大约需要 1-3 秒，而在奇数情况下，可能需要 20-30 秒。

我注意到，如果我在 SQLSVR Mgmt Studio 中运行查询，可能需要约 5 秒才能返回结果集的查询可能需要约 15 秒才能加载到我的 Web 服务器上。

我知道糟糕的 PHP 编码会导致速度变慢，但奇怪的性能行为让我有点困惑，因为我确信我的编码并没有那么糟糕。

因此，如果人们可以就我如何诊断或隔离问题提供一些建议，或者建议我可以研究的领域，那就太好了。我知道有 Apache 日志、SQL SVR 日志和性能指标，但我对这个领域还是很陌生，我真的迷失了我应该采用的方法/方法。

例如，我应该在 Apache 等中启用的任何特定模块或我应该使用的 Apache 服务器类型、Web 服务器中的连接套接字等？

我的 PHP 查询/过程调用示例

```
$queryStatement = "exec myProc @para1='asd'";
$prepare = $dbConnect->prepare($queryStatement);
$result = $prepare->execute();
WHILE($result = $prepare->fetch(PDO::FETCH_ASSOC)){
set_time_limit(180);
echo $result
} 
```

祝大家好运:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:49:30.543

我建议您阅读有关如何处理 SQL Server 性能故障排除的内容。[Waits and Queues](http://msdn.microsoft.com/en-us/library/cc966413.aspx)方法是一个好的开始，但如果你是绝对的初学者，它可能有点太抽象了。[SQL Server 文章中](http://msdn.microsoft.com/en-us/library/cc966413.aspx)还有“性能问题疑难解答”，这是一种更实用的方法来识别瓶颈。SQL Server 客户咨询团队整理了一个可以提供帮助的[性能故障排除流程图](http://sqlcat.com/files/folders/280/download.aspx)。还有很多好书，比如[Professional SQL Server 2008 Internals and Troubleshooting](https://rads.stackoverflow.com/amzn/click/com/0470484284)或[Troubleshooting SQL Server - A Guide for the Accidental DBA](https://rads.stackoverflow.com/amzn/click/com/1906434786)（还有更多）。

一些可能导致与您描述的症状相似的原因：

*   一个糟糕的查询计划。有时你会得到一个在 1-2 秒内执行的好计划，但有时你会得到一个需要 30 秒的坏计划。这个问题在[应用程序中的慢，SSMS 中的快？了解性能奥秘](http://www.sommarskog.se/query-plan-mysteries.html)和调查需要捕获和比较执行计划。但是，症状是问题页面是响应式的，然后突然间，在 30 秒的加载时间内变得无响应，*保持无响应一段时间*，然后又神秘地再次响应。
*   锁定更新争用。这意味着您的读取被阻塞在等待提交的写入后面。这将导致零星的单次、奇数、无响应的页面。但是 30 秒的加载意味着 30 秒的写入，这是不太可能的。
*   数据库增长事件，特别是日志增长事件。这会导致您所描述的症状：奇怪的，一次，无响应的页面需要 30-40 秒才能加载。此外，当这种情况发生时，您网站上的*任何*页面都需要 30-40 秒才能加载，然后它们都会再次响应。这可以通过您的数据库文件（特别是日志文件）必须增长来解释，而 30-40 秒是扩展文件并将其初始化为零所需的时间。幸运的是，这很容易调查：增长事件在性能计数器[SQL Server、数据库对象](http://msdn.microsoft.com/en-us/library/ms189883(v=sql.100).aspx) **日志增长中可见**: 数据库的事务日志被扩展的总次数。如果此计数器在您的数据库中不为零，则可能是罪魁祸首。不幸的是，数据文件的增长没有被捕获，但它们被捕获在[默认跟踪](http://msdn.microsoft.com/en-us/library/ms175513.aspx)中（链接的文章显示了如何阅读它）。请注意，日志增长还表明您设置了非简单的恢复模型并且没有发生日志备份，您的日志可能会增长直到填满整个磁盘......使用[sys.database_files](http://msdn.microsoft.com/en-us/library/ms174397.aspx)易于验证。

这些只是一些基本的想法，几乎没有掠过你需要看的表面......不幸的是，没有灵丹妙药。

# windows-8 - 处于捕捉状态时如何检查屏幕左侧或右侧的 Windows 应用商店应用程序？

> ID：13135091
> 
> 赞同：1
> 
> 时间：2012-10-30T08:21:21.277
> 
> 标签：windows-8, microsoft-metro

我想通过代码检查处于捕捉状态（屏幕左侧或右侧）的 Windows 应用商店应用程序的位置。如果它在左边，我会做点什么。如果它在右边，我会做其他事情。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:34:42.397

结合[ApplicationView检查](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.value.aspx)[当前](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.window.current.aspx#Y193)窗口的左边缘

```
if (Windows.UI.ViewManagement.ApplicationView.Value == Windows.UI.ViewManagement.ApplicationViewState.Snapped)
{
    if (Window.Current.Bounds.Left == 0)
        // snapped left
    else
        // snapped right
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:33:12.347

我认为您无法检测到应用程序被吸附到哪一侧。您可以检测应用程序是否已捕捉、填充、FullScreenLandscape 和 FullScreenPortrait 仅此而已。

[Windows.UI.ViewManagement](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.aspx)命名空间不提供任何捕捉状态位置的功能。

**更新**

正如**Jim O'Neil**所说，以下代码可以完美运行。

```
if (Windows.UI.ViewManagement.ApplicationView.Value == Windows.UI.ViewManagement.ApplicationViewState.Snapped)
{
    if (Window.Current.Bounds.Left == 0)
        // snapped left
    else
        // snapped right
} 
```

# eclipse - eclipse maven 文件名规范

> ID：13135095
> 
> 赞同：3
> 
> 时间：2012-10-30T08:21:38.553
> 
> 标签：eclipse, maven, filenames

如何在 Eclipse 中配置 Maven 构建以使用另一个文件名？

模拟：

```
mvn -f custom_pom_name.pom

mvn --help
...
-f,--file                              Force the use of an alternate POM
                                   file.
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-28T10:10:48.847

添加`-f custom_pom_name.pom`到`Goals:`运行配置对话框中的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:32:01.283

选择`Run As`-> `Maven build...`。在对话框中添加`f`作为参数，以 pom-File 作为值。

...或考虑使用配置文件而不是不同的 pom 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-19T00:53:31.063

在 pom.xml 中设置`finalName`属性如下：

```
 <build>
   <finalName>myjar</finalName>
 </build> 
```

从命令行：我们不能直接覆盖`fileName`. 在 pom 中添加以下属性，我们可以这样做：

```
<myCustomName>${artifactId}-${version}</myCustomName>
....
<build>
<finalName>${myCustomName}</finalName>
...
</build> 
```

从命令行，我们可以定义如下：

```
-DmyCustomName=%maven.project.artifcatId%-%build.number% 
```

# objective-c - 为什么我应该使用基于块的动画而不是开始/结束动画？

> ID：13135096
> 
> 赞同：3
> 
> 时间：2012-10-30T08:21:41.823
> 
> 标签：objective-c, ios, cocoa, core-animation

如您所知，Apple 鼓励我们在 iOS 4.0 上使用一种称为基于块的动画的新方法。

我真的很想知道基于块的动画比开始/结束风格的动画更好。
    表现？
    并发？
    编码效率和便利性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:48:22.447

我当时也想知道这个。

但是在使用这样的基于块的动画之后：

```
[UIView animateWithDuration:0.5 ... ^{
    // animated custom view vertically
} completion:^{
    [UIView animateWithDuration:0.5 ... ^{
        // animate the fade in alpha of buttons
    }];
}]; 
```

它以简洁的方式提供完成处理程序。您还可以将子动画块相互嵌套。

对于 BeginAnimation/EndAnimation，我不记得究竟如何为完成处理程序执行回调，但您通常会执行以下操作：

// 开始动画 // 设置委托 // 为每个 beginAnimation 创建委托回调函数

现在想象一下，如果你想嵌套 3 或 4 层动画，比如复制 CSS Lightbox 效果：

1) 淡入灯箱容器

2) 展开宽度

3) 展开高度

4) 淡入淡出形式

您必须处理一些非常混乱的 if-else 条件。

您的工作流程如下：

“在这个 beginAnimation 完成后，它会向我的回调方法发送一条消息，向下滚动 Xcode 以找到回调委托方法，然后在回调方法中调用另一个 UIView beginAnimation，向上滚动 Xcode 以找到下一个 beginAnimation ...”

使用基于块的动画，每个进程都封装在一个块中，您可以将其嵌套在另一个块中。如果您决定要更改顺序，则显示如下：

1) 淡入灯箱容器

2) 这次在 Width 之前展开 Height

3) 这次在高度之后展开宽度

4) 淡入淡出形式

使用 beginAnimation 方法，您将开始拔毛。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:52:00.423

很大程度的方便。

使用块几乎无法提高性能。所以这不太可能。我原以为动画的所有块语法都是调用旧方法（或通过调用类似的内部方法有效地做到这一点），然后在执行 beginAnimation 和 commitAnimation 之间运行块。

所以，方便。无论如何，我建议单独使用它。它更易于使用，并且可以轻松嵌套动画并在完成时执行操作，因为您无需创建其他方法来在完成时调用 - 它只是另一个块。

# vb.net - vb.net string.format 指数（科学）表示法

> ID：13135097
> 
> 赞同：0
> 
> 时间：2012-10-30T08:21:42.547
> 
> 标签：vb.net, string, format

目前我正在使用以下东西

```
String.format({0,16:e6},freq) 
```

但这会以以下符号返回我的频率

```
0.000000e+000 
```

我需要它在

```
0.000000e+00 
```

所以我需要将指数因子减少一个零。有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:35:14.070

好的，我已经弄清楚如何解决这个问题。@GSerg 的评论是正确的，但有一个解决方法。

```
String.format("{0,16:0.000000e+00}",freq) 
```

这就是我解决问题的方法。感谢您的支持。

# objective-c - 自定义 UIButtons 的有效方法

> ID：13135098
> 
> 赞同：3
> 
> 时间：2012-10-30T08:21:42.847
> 
> 标签：objective-c, ios, xcode, uibutton, interface-builder

在应用程序中自定义 UIButtons 外观的最佳方法是什么？我正在开发一个应用程序，我们以编程方式更新 UIButtons 以看起来我们想要的方式。大多数按钮都是在 Interface Builder 中创建的，我们希望以`customizeButton`有效的方式在它们上执行我们的 -method。我只看到两种方法来实现这一点：

1.  在 IB 中创建按钮，将它们分配给插座并在代码中调用`customizeButton`每个按钮。 **问题：**太多的杂乱无章
2.  UIButton 的子类，在构造函数`initWithCoder:`调用`customizeButton`中。然后将此类用于 IB 中的按钮。 **问题：**尽管这适用于在 IB 中创建的按钮，并且比第 1 点需要更少的样板代码，但由于它们的类集群，我已经阅读了所有反对子类化 UIButton 的警告。

显然必须有一些更好的方法，第 3 点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:27:07.147

看看 UIAppearance。它从 iOS 5 开始可用，特别适用于自定义标准 UI 元素。

永远可定制的类是一个被调用的类方法`+appearance:`，你可以像这样使用它。

```
[[UIButton appearance] setBackgroundColor:[UIColor redColor]]; 
```

每个按钮现在都将具有红色背景色。

要开始使用，请查看[iOS 5 中的 Ray Wenderlichs 教程用户界面自定义](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)和/或`114 - Customizing the Appearance of UIKit Controls`WWDC11 视频会话。

# sql - SQL 中的 SUM 函数

> ID：13135107
> 
> 赞同：-4
> 
> 时间：2012-10-30T08:22:15.553
> 
> 标签：sql, sql-server

共有三个表，我们必须使用一个主键和一个外键从这些表中选择数据。但是在一张表中，第三张表中有很多数据。我们必须在主键的基础上对数据求和。

![表格1](../Images/96805b8fe233e868714367f3b1b198c9.png) ![表2](../Images/1e616d2a865001a7b55638c57786da53.png) ![表3](../Images/64bd6f4a4e225f3dea4a58ccd46d9568.png)

```
BAl = Balance, met = Method, amo = amount, cst_id, cut_id, cut_i = customer_id 
```

现在我们必须对同一个查询中的 10 个客户 ID 的方法和总和进行求和。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:25:08.147

如果您提供一些示例数据，那么编写查询来帮助您会更容易。但是，如果您的`MET`字段是数字并且您想对其求和，那么您需要。

```
select
   t1.cst_n, t2.bal,
   sum(t3.met) as met,
   sum(t3.amo) as amo
from table1 as t1
   inner join table2 as t2 on t2.cut_id = t1.cst_id
   inner join table3 as t3 on t3.cut_i = t1.cst_id
group by t1.cst_n, t2.bal 
```

好吧，如果您想将所有 10 个客户的数据汇总为一个数字，您可能只需要

```
select
   sum(t3.met) as met,
   sum(t3.amo) as amo
from table3 as t3
where t3.cut_i in (select t.customerid from @<your variable table with cust. ids> as t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:31:15.170

```
;WITH cte 
AS
(
    SELECT 
      *, 
      ROW_NUMBER() OVER (ORDER BY  t1.cst_id) RowNum
    FROM Table1 t1
    INNER JOIN Table2 t2 
            ON t1.cst_id = t2.cut_id
    INNER JOIN Table3 t3 
            ON t2.cut_id = t3.customer_id 
           AND t2.BAL = t3.Balance 
           AND t2.amo = t3.amount
)
SELECT SUM(*)
FROM cte
WHERE RowNum Between 1 AND 10
-- You can add a GROUP BY here 
```

# curl - Box Api 上传或下载

> ID：13135111
> 
> 赞同：2
> 
> 时间：2012-10-30T08:22:23.200
> 
> 标签：curl, box-api

如何将此代码转换为使用 Box Api 下载和上传到 C#

```
curl https://www.box.com/api/2.0/files/content \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \
-F filename=@FILE_NAME \
-F folder_id=FOLDER_ID 
```

我想使用 WebRequest 将此 cURL 转换为 c#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:19:03.023

我在上面的评论中听从 John Hoerr 的回答。

# linux - 查看屏幕中运行的代码？

> ID：13135119
> 
> 赞同：2
> 
> 时间：2012-10-30T08:22:52.590
> 
> 标签：linux, gnu-screen

我不小心rm了一个python脚本。它当前在分离的屏幕会话中运行。有没有办法从屏幕会话中恢复代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:24:46.973

不会。Python 运行时不会在脚本运行时将源代码保存在内存中（相反，它会保存已编译的表示形式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:34:49.593

只需从备份中复制最后一个版本或从版本控制系统中签出即可。你至少使用其中一种，对吧？

# python - 如何在 Sphinx 中定义应该使用哪些 .rst 文件和目录？

> ID：13135120
> 
> 赞同：4
> 
> 时间：2012-10-30T08:22:52.847
> 
> 标签：python, python-sphinx, restructuredtext, autodoc

**如何在 Sphinx 中定义应该使用哪些 .rst 文件和目录？**

我想在我的测试/构建/文档脚本中包含一个自动文档生成器。 *sphinx-quickstart*在我的工作区中执行并创建了一个 index.rst 文件。由于 Sphinx 使用重组的文本文件作为文档，我在工作区中导航并使用*sphinx-autogen*手动创建它们。它导致了 tasks.rst 文件（见下文）。

当我使用“make html”时，会收到几个警告：

> **警告**：自动模块的签名无效（u'tasks/add_to_config'）
> 
> **警告**：autodoc 无法导入/查找模块 'tasks.add_to_config'，它报告错误：“没有名为 wl_build.tasks 的模块”，请检查您的拼写和 sys.path
> 
> **警告**：不知道要导入哪个模块来自动记录 u'tasks/add_to_config'（尝试在文档中放置“模块”或“当前模块”指令，或给出明确的模块名称）
> 
> ...

**我的索引.rst**

```
Welcome to build's documentation!
====================================

Contents:

.. toctree::
   :maxdepth: 2

.. automodule:: tasks/add_to_config
   :members:

.. automodule:: tasks/build_egg
   :members: 
```

**任务.rst**

```
tasks Package
=============

:mod:`tasks` Package
--------------------

.. automodule:: tasks.__init__
    :members:
    :undoc-members:
    :show-inheritance:

:mod:`add_to_config` Module
---------------------------

.. automodule:: tasks.add_to_config
    :members:
    :undoc-members:
    :show-inheritance:

:mod:`build_egg` Module
-----------------------

.. automodule:: tasks.build_egg
    :members:
    :undoc-members:
    :show-inheritance: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T16:26:28.910

尝试用句点 ( )替换`/`index.rst 文件中的字符`.`

像这样：

```
Welcome to build's documentation!
====================================

Contents:

.. toctree::
   :maxdepth: 2

.. automodule:: tasks.add_to_config
   :members:

.. automodule:: tasks.build_egg
   :members: 
```

看看是否有帮助。

如果 Sphinx 仍然找不到要记录的代码，那么您可能需要修改您的文件`PYTHONPATH`或更改`sys.path`您的`conf.py`文件，以帮助 Sphinx 找到它正在寻找的内容。

# jquery - 如何使用 jquery 在 webapi 中更新？

> ID：13135122
> 
> 赞同：2
> 
> 时间：2012-10-30T08:23:09.657
> 
> 标签：jquery, asp.net-web-api, updating

大家好，我现在正在处理 webapi，我需要更新数据，因为我有表（实体模型）

```
 id  | value
          1  | previous data
          2  | new data 
```

现在我需要更新表意味着我正在更新 ckeditor 数据 iam 一些文本到 ckeditor 并且一旦鼠标移到 ckeditor div 我需要将该数据保存到数据库中所以当 iam 移动到控制器时一切正常我得到控制器空表单 ajax 调用可以你请帮帮我

这是我的ajaxcall：

```
 <script type="text/javascript">
$(document).ready(function () {
var editor = CKEDITOR.editor.replace('editor1');
$('#btndiv').mouseleave(function (event) {
    $('#btndiv1').hide("slow");
        alert(1);
        var value = editor.getData();
        $('#btndiv').append(value);
    // send your ajax request with value

        var dataToPost = JSON.stringify(value);
        alert('hi');
        alert(dataToPost+"got data");
        $.ajax({
            type: "Put",
            url: "/api/UpdateCkeditor",
            contentType: "application/json; charset=utf-8",
            data: dataToPost,
            dataType: "json",
            success: function () {
                // do what you want on success.

            }
        });
    });
});
</script> 
```

这里我有数据（值）od，当它移动到控制器时它显示为空

这是我的控制器：

```
 public void Put(ckeditormodels value)
    {
        webapiEntities db = new webapiEntities();

        var empObj = db.ckeditorDatas.First(c => c.value ==value.value);
        empObj.value = value.value;

        db.SaveChanges();

    } 
```

这是我的模型：

```
 public class ckeditormodels
{
    public int id { get; set; }
    public string value { get; set; }
 } 
```

即使它显示错误并且在控制器中显示一些错误，例如对象引用而不是实例对象请帮助我完成这项工作，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:31:57.367

由于您构建`.ajax()`调用`data`属性的方式，您没有获得模型绑定。本质上，您现在发布的只是一堆纯文本，而不是 JSON 对象。

试试这个：

```
var id = getId(); // Implement this to actually get your ID.

$.ajax({
    type: "Put",
    url: "/api/UpdateCkeditor",
    contentType: "application/json; charset=utf-8",
    data: { 'id': id, 'value': dataToPost },
    dataType: "json",
    success: function () {
        // do what you want on success.
    }
}); 
```

注意`data`属性的形成方式——它是一个与您要绑定到服务器端的模型的签名完全匹配的对象。

我还建议在您的服务器端方法签名中将其更改为：

```
public void Put([FromUri]int id, [FromBody]ckeditormodels value) {
    value.id = id;
    webapiEntities db = new webapiEntities();

    var empObj = db.ckeditorDatas.First(c => c.value == value.value);
    empObj.value = value.value;

    db.SaveChanges();
} 
```

原因是您正在对现有对象进行更改 - 从 RESTful 的角度来看，最好使用指示正在更新哪个唯一服务器端资源（记录 ID）的 URL 来完成。不过，这只是一种方法论/风格上的东西 - 它不会对您的数据绑定产生任何实际影响。

# javascript - 如何在 onChange 中传递两个值

> ID：13135124
> 
> 赞同：1
> 
> 时间：2012-10-30T08:23:09.610
> 
> 标签：javascript, dom

所以，我有 2 个选择标签，并且在第二个选择标签的 onChange 事件期间；我想传递 2 个选择标签的值

```
 <td>District:
    <div>
    <select name="district" id="district" onchange="getZone(this.value)">
    <option value="ALL">ALL</option>
    <?php
     include_once 'newcompute.php';
     $computation = new newcompute();
     echo $computation->getDistrict();
    ?>
    </select>
    </div>
    </td>
    <td>Barangay:&nbsp;
<div id="barangay" name="barangay">
    <select onchange="loadReport(barangay.value,district.value)">
<option>Select a Barangay</option>
<option value="ALL">ALL</option>
</select>
    </div>
</td>
    </tr> 
```

所以，我尝试做 onchange="loadReport(barangay.value,district.value)" 但我只得到了一个 UNDEFINED 值

如何让 loadReport 传递选择标签区的当前选定值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:25:42.920

您可以在函数本身中检索其他标签。无需从这里传递。

```
function loadReport(barangayValue)
{
    var district = document.getElementById('district');
    var districtValue = district.value;
    //Your stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:34:52.800

试试这个方法

```
<select onchange="loadReport(this.value,document.getElementById('district').value)">
<option>Select a Barangay</option>
<option value="ALL">ALL</option>
</select> 
```

# javascript - 动态生成内容的事件处理程序

> ID：13135125
> 
> 赞同：0
> 
> 时间：2012-10-30T08:23:40.920
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何等到元素存在？](https://stackoverflow.com/questions/5525071/how-to-wait-until-an-element-exists)

我正在使用 jquery 插件来显示模式对话框。该对话框的内容是通过 ajax 加载的。该内容的最外层`div`是`msg`. 由于`msg`加载页面时 div 不存在（稍后通过单击按钮显示模态对话框），我无法在该 div 上应用 jquery。例如`$(".msg").some_Action()`不起作用。

`on`我对or了解一些`live`（现在已弃用）。但是我怎样才能在这里应用它呢？或任何其他解决方案？

注意：ajax 请求是通过插件本身处理的，所以我不能（或者可能不会）`success`在 ajax 请求上写一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:28:26.303

```
$("body").on('// some actions e.g ready or click', '// element on which action is to be implemented e.g. button', function() {
// some functions here e.g. show() and hide()
}); 
```

# php - 警告：mysql_result() [function.mysql-result]: Unable to jump to row 0 on MySQL result index 2 in

> ID：13135129
> 
> 赞同：1
> 
> 时间：2012-10-30T08:23:53.283
> 
> 标签：php, mysql, restrict

我正在努力做到这一点，这样我就可以将“员工面板”限制为“3”为“member_level”的用户，这样其他人就会被重定向到 account_page.php 但我目前收到一个仅在 1 小时前出现的错误，这个不知从何而来，我没有改变任何东西，它只是出现了。

这是人员面板的代码：

```
<?php
    ob_start();
mysql_connect('localhost', 'u1908470_cms', 'BeingX1309X')or die("Error: ".mysqlerror());
mysql_select_db('u1908470_cms'); 

$query1 = mysql_query("SELECT 'member_level' FROM `users` WHERE `username` = '" . mysql_real_escape_string ($_SESSION['user']['username'])."'");
$query2 = mysql_result($query1,0,'member_level') or die(mysql_error());

switch ($query2)
{
case 3: 
  {
  echo "<p>Now Logged into Staff Panel!</p>";

  }
  break;

case 2:
  {
  header("location: http://www.cookiedenied.com/account_page.php"); 
  }
  break;

case 1:
  {
  header("location: http://www.cookiedenied.com/account_page.php"); 
  }
  break;

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:40:22.287

**正确转义字段和表名**

代替

```
 SELECT 'member_level', .... 
```

...请用...

```
 SELECT `member_level`, .... 
```

**验证您的查询。**

像这样重写你的代码：

```
$SQL = "SELECT `member_level`
    FROM `users` 
    WHERE `username` = '" 
    . mysql_real_escape_string($_SESSION['user']['username'])
    . "'";

$MyQ = mysql_query($SQL);
$MyR = mysql_result($MyQ,0,'member_level') or die(mysql_error()); 
```

...并`var_dump($SQL);`查看您的陈述是否有效。在使用另一个 MySQL 工具（Workbench、phpMyAdmin、SQLyog 或其他工具）执行它时检查它，以查看它是否生成任何结果。也许`$_SESSION`变量设置不正确或类似的东西，你会发现这种方式。

**请改用 MySQLi 或 PDO。**

从手册：

> 不鼓励使用 mysql 扩展。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

**重新格式化您的`switch`-Block。**

与您的问题无关，但您的`switch`-Block 看起来过于复杂，无法更轻松地归档。尝试这个：

```
switch ($query2) {
    case 3: 
        echo "<p>Now Logged into Staff Panel!</p>";
        break;
    default:
        header("location: http://www.cookiedenied.com/account_page.php"); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:30:40.953

尝试这个 ：

```
$R = mysql_fetch_assoc($query1);
$query2 = $R["member_level"] 
```

但也许您应该检查您的查询是否返回至少 1 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:30:50.467

首先尽量避免mysql_query。这已经过时了，并养成了使用 PDO 的习惯。

在您的查询中，您已用引号将表名括起来。删除引号并尝试。

更改代码。并替换为以下代码。

```
<?php
ob_start();
try {

      $pdo = new PDO('mysql:host=localhost;dbname=u1908470_cms', 'u1908470_cms','BeingX1309X');

} catch (PDOException $e) {

      print "Error!: " . $e->getMessage() . "<br/>";
      die();

}

$username = $_SESSION['user']['username'];
$statement = $pdo->prepare("select `member_level` from `users` where username = :username");
$statement->execute(array(':username' => $username));
$row = $statement->fetch();

$member_level = $row['member_level'];
switch ($member_level)
{
    case 3: {
        echo "<p>Now Logged into Staff Panel!</p>";
        break;
    }
    default:{

        header("location: http://www.cookiedenied.com/account_page.php"); 
        break;
    }
} 
```

您实际上可以删除 switch 语句并只放置 if-else 条件。

```
if($member_level == 3) {

  echo "<p>Now Logged into Staff Panel!</p>";

}else{

  header("location: http://www.cookiedenied.com/account_page.php"); 

}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T08:30:55.443

为什么你的查询中有`'`周围`table name`，它可能是反勾号

```
$query1 = mysql_query("SELECT `member_level` FROM `users` WHERE `username` = '" . mysql_real_escape_string ($_SESSION['user']['username'])."'") or die(mysql_error()); 
```

用于`or die(mysql_error());`检查查询中的错误。

# php - PHP，从另一个 php 文件中获取变量

> ID：13135131
> 
> 赞同：42
> 
> 时间：2012-10-30T08:23:55.897
> 
> 标签：php

所以我想知道当变量名用于多个 php 文件时，是否可以从特定的 php 文件中获取变量。一个例子是这样的：

```
<header>
 <title>
  <?php echo $var1; ?>
 </title>
</header> 
```

page1.php 有`$var1 = 'page1'` page2.php 有`$var1 = 'page2'`

footer.php 应该有`<a href="">$var1 from page1</a><a href="">$var1 from page2</a>`

好的，这个例子有点抽象，但我可以做到尽可能短。我想你明白我的意思！所以它是我所追求的页脚！有什么解决办法吗？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-30T08:26:28.527

可以，但是最后一个包含中的变量将覆盖第一个包含中的变量：

**我的文件.php**

```
$var = 'test'; 
```

**我的第二个文件.php**

```
$var = 'tester'; 
```

**测试.php**

```
include 'myfile.php';
echo $var;

include 'mysecondfile.php';
echo $var; 
```

输出：

> 测试
> 
> 测试仪

我建议使用不同的变量名。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-10-30T09:30:52.787

您还可以使用会话来传递少量信息。您将需要 session_start(); 在使用会话的 PHP 页面的顶部，否则变量将无法访问

page1.php

```
<?php

   session_start();
   $_SESSION['superhero'] = "batman";

?>
<a href="page2.php" title="">Go to the other page</a> 
```

page2.php

```
<?php 

   session_start(); // this NEEDS TO BE AT THE TOP of the page before any output etc
   echo $_SESSION['superhero'];

?> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-15T08:13:29.397

在第二页中使用`include 'page1.php'`是一种选择，但它会生成未定义变量的警告和错误。
您可以通过三种方法在另一个 php 文件中使用一个 php 文件的变量：

*   使用会话将变量从一个页面传递到另一种
    方法：
    首先，您必须使用 php 命令在两个文件中启动会话

    > **会话开始（）；**
    > 然后在第一个文件中考虑你有一个变量
    > **$x='var1'**；
    > 
    > > 现在使用以下方法将 $x 的值分配给会话变量：
    > > $_SESSION['var']=$x;
    > > 现在在任何另一个 php 文件中获取值：
    > > $y=$_SESSION['var'];//$y 是任何声明的变量

*   使用 get 方法并在单击链接
    *方法时获取变量*

    > `<a href="page2.php?variable1=value1&variable2=value2">clickme</a>`
    > 通过 $_GET 函数获取 page2.php 文件中的值：
    > `$x=$_GET['variable1'];//value1 be stored in $x`
    > `$y=$_GET['variable2'];//vale2 be stored in $y`

*   如果您想使用按钮传递变量值，那么您可以通过以下方法使用它：

    > `$x='value1'`
    > `<input type="submit" name='btn1' value='.$x.'/>`
    > 在第二个 php
    > `$var=$_POST['btn1'];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T06:01:44.320

您也可以使用**file_get_contents**

```
 $url_a="http://127.0.0.1/get_value.php?line=a&shift=1&tgl=2017-01-01";
 $data_a=file_get_contents($url_a);

 echo $data_a; 
```

# android - 打开手机时，我想向 android 中的给定电子邮件发送警报消息

> ID：13135135
> 
> 赞同：1
> 
> 时间：2012-10-30T08:24:02.667
> 
> 标签：android, email, alert

我有一个获取盗窃手机新手机号码的项目。如果有人偷了我们的手机，我正在做这个项目，如果那个人从我们的 SIM 卡上下来并且他放了新的 SIM 卡，我们可以通过它找到。那么一旦他用新的SIM卡打开手机，那个特定的号码应该被发送到给定的电子邮件ID？

有没有可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:25:58.207

使用[广播接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。

这是您可以使用的重启意图操作：[ACTION_BOOT_COMPLETED](http://developer.android.com/reference/android/content/Intent.html#ACTION_BOOT_COMPLETED)。

[这个线程](https://stackoverflow.com/q/8950854/645270)有更多关于这个主题的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:32:48.587

当然可以 ！您使用 On Reboot Receiver。

```
android.intent.ACTION.BOOT_COMPLETED 
```

为该操作注册一个接收器，并在广播接收器的 onReceive 方法中获取新 SIM 卡的电话号码并将其通过电子邮件发送到所需的电子邮件 ID。

我宁愿发送短信也不愿发送电子邮件，因为您无法确定用户是否可以上网

希望这可以帮助 ！

# c# - 在新语句中动态分配属性

> ID：13135137
> 
> 赞同：-1
> 
> 时间：2012-10-30T08:24:32.217
> 
> 标签：c#, .net

我想在新语句中使用 foreach 循环分配属性 subdecision_typex_value ，它是 DtoReport 类的属性。

这可能吗？是否有意义 ？

```
public DtoReport Get(Report repResp)
   return new DtoReport()
   {
      archivingId = repResp.archivingId.ToString(),
      dateCreated = DateTime.Now,

      //I'D LIKE TO DO IT THAT WAY IS IT POSSIBLE SOMEHOW ?
      foreach(Subdecision d in repResp.decisionMatrix.subdecisions){
         if(d.type == "SOME VALUE"){
            //Dynamically assign DtoReport subdecision_typex_value Property 
            subdecision_typex_value = d.value                   
         }
      }
      //END

      anotherProperty = repResp.AnotherProperty
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:30:55.723

您可以使用 Linq：

```
return new DtoReport()
{
  archivingId = repResp.archivingId.ToString(),
  dateCreated = DateTime.Now,
  subdecision_typex_value = repResp.decisionMatrix.subdecisions
                           .Where(d => d.type == "SOME VALUE")
                           .Select(d => d.value)
                           .FirstOrDefault(),
  anotherProperty = repResp.AnotherProperty
} 
```

请注意，您的方法很可能不是它应该做的。您正在枚举所有子决策，然后您将使用`type=="SOME VALUE"`. 我假设您想采用这种类型的第一个值，对吗？

# html - 使用 jquery UI - 菜单

> ID：13135141
> 
> 赞同：0
> 
> 时间：2012-10-30T08:25:01.280
> 
> 标签：html, css

我正在使用 UI 中的菜单
我有这个`ul`

```
<ul id="menu">
  <li><a href="#">Loans</a></li>
  <li>
    <a href="#">Bancassurance</a>
    <ul>
      <li><a href="#">Aman el darb</a></li>
      <li><a href="#">Aman el elem</a></li>
      <li><a href="#">Aman el ghad</a></li>
    </ul>
  </li>
  <li>
    <a href="#">Services</a>
    <ul>
      <li><a href="#">Audi Mobile</a></li>
      <li><a href="#">Pin-Pay</a></li>
      <li><a href="#">ADSL Services</a></li>
      <li><a href="#">Bill Payment</a></li>
      <li><a href="#">Internet Accesses</a></li>
    </ul>
  </li>
  <li>
    <a href="#">Accounts</a>
    <ul>
      <li><a href="#">Wedding Account</a></li>
      <li><a href="#">Payroll Account</a></li>
      <li><a href="#">Saving Account</a></li>
      <li><a href="#">Current Account</a></li>
    </ul>
  </li>
</ul> 
```

我的 CSS ：

```
.ui-menu-item { } 
```

`<ul id="menu">`
这从CSS选择器的外观如何选择所有li，所以我可以选择#menu中的子菜单`ul

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:27:12.440

如果我正确理解您的问题，您将需要这个

```
#menu ul {
} 
```

如果您需要在#menu 中定位特定的 UL，您应该向该特定 UL 添加一个 ID 或类，然后使用它引用它

```
#menu #example {
} 
```

您可以更进一步，以相同的方式定位每个 LI，就像这样

```
#menu #example li {
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:28:13.357

在#menu 中选择UL 非常简单：

```
#menu ul { /*CSS HERE*/ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:35:58.050

根据你的脚本使用这个`.ui-menu-item #menu ul{ }`

* * *

你可以这样写

```
#menu ul li a{ css here} 
```

**[演示](http://jsfiddle.net/GyS8r/1/)**

或者

```
#menu ul li{ css here } 
```

**[演示 2](http://jsfiddle.net/GyS8r/7/)**

# javascript - Windows 中的 ShellExecute 权限被拒绝

> ID：13135144
> 
> 赞同：4
> 
> 时间：2012-10-30T08:25:12.233
> 
> 标签：javascript, windows-shell, activexobject

有人可以告诉我为什么在 Windows 中运行 shell 命令的权限被拒绝以及如何解决？

```
function executeCommands(inputparms)
{
  var oShell = new ActiveXObject("Shell.Application");
  var commandtoRun = "C:\\WINDOWS\\Notepad.exe";
  if (inputparms != "")
  {
    var commandParms = document.Form1.filename.value;
  }
  oShell.ShellExecute(commandtoRun, commandParms, "", "open", "1");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T16:54:12.100

有必要打开两个设置。

1.  **为当前区域启用未签名的 ActiveX 控件**
    工具 > Internet 选项 > 安全 > 自定义级别...
    启用“ActiveX 控件和插件”>“初始化并编写未标记为可安全执行脚本的 ActiveX 控件”

2.  **允许活动内容运行文件**
    工具 > Internet 选项 > 高级 > 安全 启用“允许活动内容在我的电脑上的文件中运行”

    **** 确保关闭所有 IE 浏览器窗口。**

注意：如“Internet 选项 > 高级 > 安全”块底部所示，必须重新启动计算机才能考虑此选项。

# python - 使用 dict 理解时的问题。NameError：未定义全局名称

> ID：13135145
> 
> 赞同：9
> 
> 时间：2012-10-30T08:25:15.103
> 
> 标签：python, shell, dictionary, namespaces, dictionary-comprehension

我正在尝试创建一个以键为`name`和值作为对应`User`对象的字典。

我正在使用来自 Django shell wrapper 的 Python shell `python manage.py shell`：

```
>>> from django.contrib.auth.models import User
>>> names = ['carl', 'jim', 'jack', 'john', 'mark']
# Now using some dict comprehension
>>> u = {name: User.objects.get(username=name) for name in names}
NameError: global name 'User' is not defined 
```

但是，这对我有用：

```
u = {}
for name in names:
    u[name] = User.objects.get(username=name) 
```

我得到了所需的输出，即：

```
{ 
  'carl': <User: carl>,
  'jack': <User: jack>,
  'jim' : <User: jim>,
  'john': <User: john>,
  'mark': <User: mark>
} 
```

我知道，还有其他方法可以做到这一点，但我很好奇为什么 dict 理解在这里不起作用。

有小费吗？
我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:50:40.660

我相信[python 的问题跟踪器](http://bugs.python.org/issue13557)是你最好的答案。

简而言之：它不会在 shell 中工作。这同样适用于 shell 中的函数定义。那里无法进口。

关于您的问题，我建议：

```
names = [...]
users = User.objects.filter(username__in=names)
name_to_user = {user.username: user for user in users} 
```

它执行一个 sql 查询而不是`len(names)`.

# javascript - 如何跳过 N 个节点？

> ID：13135146
> 
> 赞同：1
> 
> 时间：2012-10-30T08:25:17.583
> 
> 标签：javascript, jquery, nodes

我有一个代码：

```
$(this).parents("tr:first").next().next().find(".fileinfo-td:first > div"); 
```

是任何可以跳过N个节点并且可以用来代替next().next()的方法；

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:33:00.547

```
$(this).parents("tr:first").nextAll(":eq(1)").find(".fileinfo-td:first > div"); 
```

# mysql - MySQL - phpmyadmin 导入一个 csv 并将数据插入两个表

> ID：13135151
> 
> 赞同：1
> 
> 时间：2012-10-30T08:25:35.637
> 
> 标签：mysql, csv, import, phpmyadmin

我有一个数据库，例如 test，有两个表`table1:general, table2:credentials`。在 table1 我有 2 个字段`name, surname`，在 table2 我有两个字段`username, password` 我有一个 csv 文件，它有 4 列`name, surname, username, password`。

我可以导入该文件`(PHPMyadmin)`并将数据同时插入两个表吗？谢谢

# iphone - 如何在 iPhone 的应用内购买中实现每月订阅？

> ID：13135158
> 
> 赞同：3
> 
> 时间：2012-10-30T08:26:07.160
> 
> 标签：iphone, ios, in-app-purchase

嗨，我是 inApp 购买的新手，我想在我的应用程序中实现每月订阅。

我的申请最近被拒绝，这是状态：

**我们发现您的应用使用自动续订订阅，但不是期刊、商业应用或媒体应用。自动续订订阅仅适用于这些类型的应用；其他用途不符合 App Store 审核指南。将您的应用内购买产品更改为非续订订阅是合适的。**

因此，请指导我以合法方式在我的应用中实施每月订阅的最佳方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:45:14.060

嗨，我在进行了大量研究并在网上搜索后回答了这个问题，以便其他人可以从中获得帮助。

[http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/13_ManagingIn-AppPurchases_Robert/ManagingIn-AppPurchases.html](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/13_ManagingIn-AppPurchases_Robert/ManagingIn-AppPurchases.html)

在上述链接中，Apple 记录了关于非更新 iAp 的信息

**非续订订阅允许在有限的期限内销售服务。非续订订阅必须用于提供基于时间的静态内容访问且仅适用于 iOS 应用的应用内购买。如果您使用非续订订阅，您的应用负责将订阅发送到用户的所有设备。由于非续订订阅要求用户每次都续订，因此您的应用必须包含识别订阅何时到期的代码。它还必须提示用户购买新订阅。**

所以我简单地将我的购买类型更改**为非续订订阅**并将我的代码更改为提醒用户，以识别订阅何时到期，并且它还必须提示用户购买新订阅。

# sql - XML 到 SQL 的转换

> ID：13135164
> 
> 赞同：7
> 
> 时间：2012-10-30T08:26:17.543
> 
> 标签：sql, xml, relational-database

我知道这不是一个非常简单的问题，但是您将如何设计一个 SQL 数据库来存储来自 XML 文件的数据？，（您没有 XML 模式，只有一个具有许多不同标记名、属性和嵌套元素）。

这比技术更概念化。我们如何从分层数据模型 (XML) 到关系模型 (SQL)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:31:20.453

如果您没有架构，并且想使用传统的关系型数据库管理系统（RDBMS），那么您基本上就完蛋了。

但是您可以选择所有主要数据库系统中都存在的 XML 数据类型（在[Oracle](http://www.oracle-base.com/articles/9i/xmltype-datatype.php) (>9i)、[MS SQL](http://msdn.microsoft.com/en-us/library/ms345117.aspx) (>2005)、[Postgres](http://www.postgresql.org/docs/devel/static/datatype-xml.html)和[DB2中）。](http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.apdv.embed.doc/doc/c0023366.htm)这允许您使用 XPath 表达式来处理 XML 内容，这非常简洁。

还推荐阅读：

*   [Microsoft SQL Server 2005/2008：XML 与 text/varchar 数据类型](https://stackoverflow.com/questions/514827/microsoft-sql-server-2005-2008-xml-vs-text-varchar-data-type)

或者，您可以跳过将层次模型转换为关系模型的步骤，因为这似乎是[NoSQL DB](http://en.wikipedia.org/wiki/NoSQL)（如[Cassandra](http://cassandra.apache.org/)或[MongoDB](http://www.mongodb.org/) ）的完美用例。

（最初作为评论发布，但我认为它可能值得成为一个答案......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:35:33.667

嗯，有什么问题？将树表示为关系很简单。

```
NODE ( id, tag-name, text )
ATTR ( id, attr-name, attr-value )
NODEATRR ( node-id, attr-id )
NODENODE ( node-id, child-node-id ) 
```

我希望，关系之间的关键和联系是显而易见的。当然，它很丑而且是字符串类型的，但是如果你想存储*任意*XML，那就是你得到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:02:30.280

SQL中有一些巧妙的[树编码方案](https://stackoverflow.com/questions/4048151/what-are-the-options-for-storing-hierarchical-data-in-a-relational-database)。同样，即使是聪明的树编码也不如正确设计的数据库模式。

# locking - SSHClient jsch bufferedinputstream LOCK

> ID：13135165
> 
> 赞同：1
> 
> 时间：2012-10-30T08:26:20.693
> 
> 标签：locking, jsch

基于jsch session get lock通过SShClient执行命令时：

```
 Exec thread devapp090@1046" prio=5 tid=0x14 nid=NA runnable
    java.lang.Thread.State: RUNNABLE
    at java.io.FileInputStream.readBytes(FileInputStream.java:-1)
    at java.io.FileInputStream.read(FileInputStream.java:220)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    - locked <0x420> (a java.io.BufferedInputStream)
    at com.jcraft.jsch.ChannelSession.run(ChannelSession.java:245)
    at java.lang.Thread.run(Thread.java:662) 
```

这里我如何称呼客户：

```
 client.openSession();
    String[] result = client.execCommands(new String[]{"ps ax|grep karaf"});
    client.openSession(); 
```

这里执行方法：

```
 public String[] execCommands(String[] commands) throws JSchException, IOException {

    String[] results = new String[commands.length];
    for (int j = 0; j < commands.length; j++) {
        ChannelExec channel = (ChannelExec) session.openChannel("exec");
        channel.setInputStream(System.in, true);
        channel.setCommand(commands[j]);

        channel.connect();
        InputStream in = channel.getInputStream();

        byte[] tmp = new byte[1024];
        StringBuilder result = new StringBuilder();
        long startTime = System.currentTimeMillis();
        while (System.currentTimeMillis() - startTime < timeout) {
            while (in.available() > 0 && System.currentTimeMillis() - startTime <  timeout) {
                int i = in.read(tmp, 0, 1024);
                if (i < 0) break;
                result.append(new String(tmp, 0, i));
                if (isLoggerEnabled)
                    LOGGER.info(new String(tmp, 0, i));
            }
            if (channel.isClosed()) {
                if (isLoggerEnabled)
                    LOGGER.info("exit-status: " + channel.getExitStatus());
                break;
            }
        }
        in.close();
        channel.disconnect();

        results[j] = result.toString();
    }

    return results;
     } 
```

打开和关闭会话方法：

```
 public void openSession() throws JSchException {
    JSch jsch = new JSch();
    Session session = jsch.getSession(user, host, port);
    session.setUserInfo(new SSHUserInfo(user, password));
    session.setTimeout(timeout);
    session.connect();
    this.session = session;
    }

    public void closeSession() {
    if (session != null && session.isConnected()) {
        session.disconnect();
    }
    } 
```

我正在关闭输入，与频道和会话断开连接。但没有任何帮助。而且我不知道什么被锁定。如果我理解正确，它将锁定从 ChannelSession.java 中的 System.in 读取。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:16:27.040

不要这样做 channel.setInputStream(System.in, true);

# multithreading - 如何管理多个线程的数据快照连接

> ID：13135166
> 
> 赞同：0
> 
> 时间：2012-10-30T08:26:19.900
> 
> 标签：multithreading, delphi, connection, datasnap

我得出的结论是，只有 1 个客户端线程可以通过连接访问服务器。但是如何管理呢？

每次使用 TSQLConnection 时都需要锁定连接吗？例如，使用服务器方法？

如何自动化我的服务器方法来锁定和解锁与我的服务器的连接？

我应该将我所有的服务器方法调用从

```
ServerMethod(); 
```

至

```
Try
  Datamodule.lock;
  ServerMethod
Finally
  Datamodule.unlock;
end; 
```

或者我应该给我的线程新的连接？

我使用其他线程进行打印，这需要来自服务器的信息。打印应在后台完成，但仍使用来自主应用程序的 SQL 连接。

**编辑**：创建新连接的问题是服务器创建了一个新的 ClientSession。所以我需要创建并关闭这个会话。有没有办法创建到同一个会话的新连接？

# linux - Linux 驱动程序：如何访问 PCI 声卡 ADC 和 DAC

> ID：13135167
> 
> 赞同：1
> 
> 时间：2012-10-30T08:26:19.860
> 
> 标签：linux, audio, drivers

最近我对 Linux 驱动程序开发产生了兴趣。我阅读了 LDD3 的书，一些文章和例子。所以我决定是时候自己尝试一些东西了。

那么 IO 的目标是什么：**我想知道如何从我的 PCI 声卡中读取 ADC 数据以及如何将数据写入 DAC**

我搜索了很多示例，它们最终都使用了来自用户空间的 ALSA api。这不是我想做的。

我想创建自己的用户空间接口，通过它我将传输数据并配置设备。

所以这里有一些问题：

1.  这可能吗？或者我应该坚持使用 ALSA。

2.  一些设计指南将不胜感激。（我有一些想法，但我需要其他意见）。

3.  我在哪里可以找到一些示例代码、教程等。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:47:11.460

请参阅[编写 ALSA 驱动程序](http://www.alsa-project.org/~tiwai/writing-an-alsa-driver/)和硬件文档。

# tfs - TFS 发行说明和内部版本中的工作项

> ID：13135172
> 
> 赞同：0
> 
> 时间：2012-10-30T08:26:49.220
> 
> 标签：tfs, msbuild

我每晚都在运行自动构建，运行良好。

我正在尝试获取作为通宵构建的一部分已完成哪些工作项的报告。

我目前正在使用 TF.EXE 历史 * /recursive /v:d$.......

这对变更集来说非常有用，但是这些变更集对发布团队没有用，因为他们需要知道工作项。

关于如何获取工作项报告的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:20:35.107

如果您以正确的方式使用 TFS，它应该会自动为您提供此信息。如果您确保所有签入都与一个工作项关联，那么当您运行构建时，您将看到与构建关联的工作项列表。

该项目列表为每种构建类型单独维护，因此如果您确保“夜间构建”是与（例如）CI 构建不同的构建定义，您应该会发现您得到了您正在寻找的列表.

出于报告目的提取该信息可能会更加困难 - 但我想可以从构建日志中提取此信息或插入自定义构建步骤以将信息写入文件。

# sap-ase - sybase 存储过程中的动态 where 条件

> ID：13135173
> 
> 赞同：3
> 
> 时间：2012-10-30T08:26:50.507
> 
> 标签：sap-ase

我将 where 子句语句存储在数据库表中，之后我在 select 语句中获取和使用。

这是我的sybase查询，

```
"INSERT table(RUN_ID,RUN_DATE,GRGR_ID,SGSG_ID,COLUMN_NAME,ERROR_CODE)SELECT @pnRunId,getdate(),GRGR_ID,SGSG_ID,@COLUMN_NAME,@ERROR_CODE from table1_exct where + @WHERE_CLAUSE"

@WHERE_CLAUSE = '@IKA_COLUMN_NAME IS NOT NULL' 
```

请帮助我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:57:08.057

我觉得你可以插入你的 where 子句，但不知道如何运行它们。

这将很难，但并非不可能。您必须使用游标或循环在 VARCHAR 中构建一段 Sql。

```
declare @Sql VARCHAR(2000)

select @Sql = 'INSERT table(RUN_ID,RUN_DATE,GRGR_ID,SGSG_ID,COLUMN_NAME,ERROR_CODE)SELECT @pnRunId,getdate(),GRGR_ID,SGSG_ID,@COLUMN_NAME,@ERROR_CODE from table1_exct where ' 

while 1 = 1 
begin
    declare @claus VARCHAR(200)
    SET ROWCOUNT 1
    SELECT @claus = where_clause from some_table
    select @sql = @sql + @claus
    delete some_table where where_clause = @claus
    set rowcount 0
end 
```

这有两件事要考虑 - 它没有为第一个和后续子句提供 WHERE 和 AND （​​我相信你可以这样做，）并且它从它们的源中删除你的 where 子句（你可以把它们全部放入首先是一个临时标签来解决这个问题。）

如果您的子句都在同一列上，您可以在一列中拥有一个 LIKE 表达式列表，并使用 LIKE 运算符连接到该列表 - 这很方便。

无论如何在上面结束时，运行sql：

执行（@Sql）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:07:16.187

Abe 的回答是正确的，如果您将动态 SQL 查询构建为 varchar，如果这只是一个 1-off 问题，您可以通过 EXEC(@varname) 执行它。

您可以考虑在 ASE 15 中使用 XML 功能。实际上，我们曾经针对深入的业务规则引擎进行了完全相同的练习，并且完全确定使用 ASE 15 中的 xml 功能来合并计算列、case 语句和数据库中 XML 文本内的 where 子句。

这是一些信息 [http://www.sypron.nl/xml.html](http://www.sypron.nl/xml.html)

所以，我相信这样的解决方案可以比动态 SQL 更优雅地解决您的问题。

我们最终没有使用它，因为我们无法在生产中启用 XML 支持（遗留 2k 页面问题）......但我觉得如果您的问题足够大以支持实现可以使用的东西的工作量，这可以解决您的问题它（我们最终只使用了java。）

# django - Django - 对 n 个表排序值进行分页

> ID：13135179
> 
> 赞同：1
> 
> 时间：2012-10-30T08:27:11.967
> 
> 标签：django, sorting

我已经为我的一些关键模型和一个管理视图设置了一个小的历史审计跟踪（[django-simple-history](https://bitbucket.org/q/django-simple-history/src) ），以对按降序日期排序的（聚合）条目进行[分页。](https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs)问题是，我使用的方法不是最理想的......

```
historical_foo = Foo.history.all()
historical_bar = Bar.history.all()
historical_qux = Qux.history.all()

#sort the aggregate by modified date
result_list = sorted(chain(historical_foo, historical_bar, historical_qux), key=attrgetter('history_date'), reverse=True)

paginator = Paginator(result_list, 100)

try:
    result = paginator.page(page_num)
    #... 
```

这肯定不会很好地扩展，因为这些表变大了。有没有办法将聚合和排序逻辑下推到 Django / DB 或相同结果的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:59:28.713

你可以把所有东西放在一张桌子上`contenttypes`：

```
from django.db import models
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import generic

class HistoryRecord(models.Model):
    history_date = models.DateTimeField()
    history_id = models.PositiveIntegerField()
    content_type = models.ForeignKey(ContentType)
    content = generic.GenericForeignKey('content_type', 'history_id') 
```

那么你需要创建那些：

```
poll = Poll.history.all()[0]
record = HistoryRecord(content=poll, history_date=poll.history_date)
record.save() 
```

或者你可以子类`HistoricalRecords`：

```
class IndexedHistoricalRecords(HistoricalRecords):
    def create_historical_record(self, instance, type):
        history_user = getattr(instance, '_history_user', None)
        manager = getattr(instance, self.manager_name)
        attrs = {}
        for field in instance._meta.fields:
            attrs[field.attname] = getattr(instance, field.attname)
        content = manager.create(history_type=type, history_user=history_user, **attrs)
        record = HistoryRecord(content=poll, history_date=poll.history_date)
        record.save() 
```

那么你可以查询一张表：

```
result_list = HistoryRecord.objects.all()
paginator = Paginator(result_list, 100)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:55:05.010

所有模型都可以从一个表继承（通过`one-to-one`键）。

这样，您可以使用基表在此字段上按 django ORM 排序，然后获取适当的实例。

有关获得最终实例的帮助，请参阅[该讨论。](https://stackoverflow.com/questions/5225556/determining-django-model-instance-types-after-a-query-on-a-base-class)

# linux - linux中QGLFrameBufferObject渲染的颜色错误

> ID：13135181
> 
> 赞同：1
> 
> 时间：2012-10-30T08:27:29.720
> 
> 标签：linux, qt, opengl, alpha, fbo

当我将操作系统从 win7 更改为 Ubuntu 12.04 LTS 时，我遇到了 QGLFrameBufferObject 的一些问题。在新的ubuntu系统中重新编译代码后，颜色出错了。所以我做了一个最小的测试。我只是用颜色（1.0、0.0、0.0、0.8）清除颜色缓冲区，就是这样。

当我直接渲染到屏幕上时，我得到了正确的结果，所有像素都是（1.0、0.0、0.0、0.8）。

但是，离线渲染（使用 QGLFrameBufferObject）的结果是错误的，如offline.png 所示。这个颜色是 (0.3, 0.0, 0.0, 0.8)。

当 alpha>0.0 且 <1.0 时会出现此问题。对于 0.0 和 1.0，它工作正常。

我已经在另一台装有win7操作系统的计算机（计算机A）上编译了这个测试代码，一切正常。还尝试在另一台带有 ubuntu OS 的计算机（计算机 B）上运行，一切正常。

我正在使用 NVidia GeForce GTX 570 GPU，并尝试了最新的稳定驱动程序 (304.60) 和旧版本 (290.10，用于计算机 B) 用于 linux-64bit，但没有任何变化。

有谁知道为什么？下面是代码。

```
mywidget::mywidget(QWidget * parent) :
    QGLWidget(parent)
{
}

void mywidget::resizeGL(int width, int height )
{
    glViewport(0, 0, width, height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0.0, 1.0, 0.0, 1.0);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

void mywidget::paintGL()
{
    glClearColor(1.0, 0.0, 0.0, 0.8);

    // DRAW ON THE SCREEN
    {
        glClear(GL_COLOR_BUFFER_BIT);
    }

    QGLFramebufferObject fbo(width(), height());
    fbo.bind();

    // DRAW ON THE FBO USING THE SAME CODE AND THE SAME CONTEXT
    {
        glClearColor(1.0, 0.0, 0.0, 0.8);
        glClear(GL_COLOR_BUFFER_BIT);
    }

    fbo.release();
    fbo.toImage().save("offline.png");
} 
```

我注意到有两个类似的帖子，但没有答案或详细答案： [在 QGLFramebufferObject 上渲染时错误的 alpha blending](https://stackoverflow.com/questions/12306894/wrong-alpha-blending-when-rendering-on-a-qglframebufferobject)；[渲染到 QGLFrameBufferObject 与屏幕时 Alpha 合成错误](https://stackoverflow.com/questions/9913957/alpha-compositing-wrong-when-rendering-to-qglframebufferobject-vs-screen)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:41:27.950

正如@Nicol Bolas 指出的那样，问题出`fbo.toImage().save("offline.png");`在`toImage()`函数中。返回的图像以 'QImage::Format_ARGB32_Premultiplied' 格式创建，但像素颜色数据设置为就好像它是`QImage::Format_ARGB32`格式一样。也许这是 Qt 4.8 中的一个错误。我认为通过更改`QImage::Format_ARGB32_Premultiplied`为`QImage::Format_ARGB32`in`QImage qt_gl_read_framebuffer(const QSize &size, bool alpha_format, bool include_alpha)`功能将解决问题。这段代码在`qgl.cpp`. 还是我没试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:45:58.617

您链接的问题给出了一个提示：您的代码中没有任何地方启用混合。尝试添加

```
 glEnable(GL_BLEND​​); 
```

在进行任何渲染之前。

# css - css固定div区域

> ID：13135186
> 
> 赞同：0
> 
> 时间：2012-10-30T08:27:50.363
> 
> 标签：css

大家好，我有固定的 div 区域。我将这些固定的 div 放在一个 div 中，我称之为“页面”，这里是 css：

```
.page {
    width: 964px;
    margin-top:6px;
    margin-left: auto;
    margin-right: auto;
    background-image:url(../images2/images/orta_alan_bg_GOLGE.png);
    background-repeat:repeat-y;
} 
```

但是当我用不同分辨率检查我的设计时，固定 div 区域远离我的“页面”div

这是固定的div css：

```
#rocket_left
{
  width:127px;
  height:148px;
  background-image:url(../../images2/images/tapinak_resim.jpg);
  top:244px;
  left: 5.4%;
  position:fixed;
}

#rocket_left_desc
{
 background-image:url(../../images2/images/bg_sol_bslk_tpnk.png); 
  width:130px;
  height:335px;
  top:385px;
  left:70px;
  position:fixed;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:37:26.097

我认为你的意思是让火箭相对于页面而不是浏览器文档定位。在这种情况下，只需更改定位指令：

```
.page {
    position: relative; /* Position context for the rockets */
    width: 964px;
    margin-top:6px;
    margin-left: auto;
    margin-right: auto;
    background-image:url(../images2/images/orta_alan_bg_GOLGE.png);
    background-repeat:repeat-y;
}

#rocket_left
{
  width:127px;
  height:148px;
  background-image:url(../../images2/images/tapinak_resim.jpg);
  top:244px;
  left: 5.4%;
  position: absolute; /* Absolute positionning within the page */
}

#rocket_left_desc
{
 background-image:url(../../images2/images/bg_sol_bslk_tpnk.png); 
  width:130px;
  height:335px;
  top:385px;
  left:70px;
  position: absolute; /* Absolute positionning within the page */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:20:39.150

`"But when I check my design with different resolution fixed div area go far from my "page" div"`.

这是因为当您将元素的位置设置为固定时，它的位置是相对于屏幕计算的，在您的情况下，元素将始终定位在：`top:244px; left: 5.4%;`和`top:385px; left:70px;`屏幕上。

我的建议是绝对定位它们（​​使用`position:absolute;`），然后检测（使用 JavaScript）查看器屏幕的宽度是否大于文档的宽度（在您的情况下为 964px），如果是，则更改火箭的位置`position:fixed;`

这是我上面建议的 jQuery 代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        if($(window).width()>=964){
            $('#rocket_left').css('position','fixed');
            $('#rocket_left').css('position','fixed');
        }
    });
</script> 
```

这是您应该使用的 css（由 MarvinLabs 发布）：

```
.page {
    position: relative; /* Position context for the rockets */
    width: 964px;
    margin-top:6px;
    margin-left: auto;
    margin-right: auto;
    background-image:url(../images2/images/orta_alan_bg_GOLGE.png);
    background-repeat:repeat-y;
}

#rocket_left
{
  width:127px;
  height:148px;
  background-image:url(../../images2/images/tapinak_resim.jpg);
  top:244px;
  left: 5.4%;
  position: absolute; /* Absolute positionning within the page */
}

#rocket_left_desc
{
 background-image:url(../../images2/images/bg_sol_bslk_tpnk.png); 
  width:130px;
  height:335px;
  top:385px;
  left:70px;
  position: absolute; /* Absolute positionning within the page */
} 
```

# iphone - 哪个 Facebook 类用于在 iPhone ios 6 中检索提要

> ID：13135187
> 
> 赞同：0
> 
> 时间：2012-10-30T08:28:03.297
> 
> 标签：iphone

我正在我的 Native IOS App ios 6 中进行 Facebook 集成，

我可以使用 FBFriendPickerViewController 类检索 Facebook 好友列表，并且可以使用 FBPlacePickerViewController 类检索附近的地方，现在我想检索我应该使用哪个类的 Facebook 提要。

请帮我 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:04:18.580

您需要使用 SLRequest 类并将其指向您想要从中获取信息的任何 Graph API 端点。

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *facebookAccountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:@"YOUR_FACEBOOK_APP_ID", ACFacebookAppIdKey,
                         nil];

[accountStore requestAccessToAccountsWithType:facebookAccountType options:options completion:^(BOOL granted, NSError *error) {
    if(granted) {
        ACAccount *account = [[accountStore accountsWithAccountType:facebookAccountType] lastObject];

        NSDictionary *parameters = @{};
        NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/SOME_GRAPH_ENDPOINT"];
        SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                requestMethod:SLRequestMethodGET
                                                          URL:url
                                                   parameters:parameters];
        request.account = account;
        [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
            NSError *jsonerror;
            NSDictionary *myData = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&jsonerror];
        }];
    } else {
        NSLog(@"error: %@, %@",error,[error description]);
    }
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:52:40.977

您可以使用 API

[http://www.new.facebook.com/feeds/notifications.php?id=YOUR_FACEBOOK_ID&viewer=YOUR_FACEBOOK_ID&key=](http://www.new.facebook.com/feeds/notifications.php?id=YOUR_FACEBOOK_ID&viewer=YOUR_FACEBOOK_ID&key=) YOUR_INTERNAL_KEY&format=rss20

这是我在 API 上面找到的[链接](http://www.methodshop.com/2010/02/facebook-rss-feed.shtml)。希望能帮助到你。

# python - Buildout 是否可以覆盖包含其自身依赖项的应用程序的依赖项？

> ID：13135190
> 
> 赞同：2
> 
> 时间：2012-10-30T08:28:19.737
> 
> 标签：python, django, dependency-management, buildout

是否可以覆盖鸡蛋的构建中的依赖关系？我需要向一些包含旧包要求的鸡蛋添加一些更新的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:13:18.810

您可以编辑 buildout.cfg 并添加一个包含您需要的所有依赖项的版本部分：

```
[buildout]
...
versions = versions

[versions]
south = 0.7.3 
```

您还可以查看以下文档了解更多信息：

*   [http://packages.python.org/buildout-versions/use.html](http://packages.python.org/buildout-versions/use.html)
*   [http://maurits.vanrees.org/weblog/archive/2010/08/fake-version-pinning](http://maurits.vanrees.org/weblog/archive/2010/08/fake-version-pinning)

# php - 上传文件PHP代码时自动重命名相同文件名

> ID：13135196
> 
> 赞同：0
> 
> 时间：2012-10-30T08:28:30.577
> 
> 标签：php

多重上传.php

下面的代码是multiple_upload.php，它有2个上传按钮和一个提交按钮。它的实际图片：

```
<table width="500" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<form action="multiple_upload_ac.php" method="post" enctype="multipart/form-data" name="form1" id="form1">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td><strong>multiple Files Upload </strong></td>
</tr>
<tr>
<td>Select file 
<input name="ufile[]" type="file" id="ufile[]" size="50" /></td>
</tr>
<tr>
<td>Select file
<input name="ufile[]" type="file" id="ufile[]" size="50" /></td>
</tr>
<tr>
<td align="center"><input type="submit" name="Submit" value="Upload" /></td>
</tr>
</table>
</td>
</form>
</tr>
</table> 
```

![在此处输入图像描述](../Images/6e53c877cf5bd5683c7f95e7784d5cc6.png)

multiple_upload_ac.php

此代码将处理您放入这行代码中的文件，`<input name="ufile[]" type="file" id="ufile[]" size="50" />`它将保存在我的上传文件夹中。

```
<?php

//set where you want to store files
//in this example we keep file in folder upload 
//$HTTP_POST_FILES['ufile']['name']; = upload file name
//for example upload file name cartoon.gif . $path will be upload/cartoon.gif

$path1= "upload/".$HTTP_POST_FILES['ufile']['name'][0];
$path2= "upload/".$HTTP_POST_FILES['ufile']['name'][1];

//copy file to where you want to store file
copy($HTTP_POST_FILES['ufile']['tmp_name'][0], $path1);
copy($HTTP_POST_FILES['ufile']['tmp_name'][1], $path2);

// Use this code to display the error or success.

$filesize1=$HTTP_POST_FILES['ufile']['size'][0];
$filesize2=$HTTP_POST_FILES['ufile']['size'][1];

if($filesize1 || $filesize2!= 0) 
{
echo "We have recieved your files";
}
else {
echo "ERROR.....";
}

// What files that have a problem? (if found)

if($filesize1==0) {
echo "There're something error in your first file";
echo "<BR />";
}

if($filesize2==0) {
echo "There're something error in your second file";
echo "<BR />";
}
?> 
```

这是我的问题：例如，如果可能，我上传 samplefile.ppt 并且其他用户上传相同的文件名和文件类型（samplefile.ppt）。如果可能，新上传的文件名将像 samplefile(1)。 ppt 或 samplefile_1.ppt 因为已经存在一个文件，当其他用户再次上传时，该文件将变为 samplefile(2).ppt 或 samplefile_2.ppt。谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:38:20.093

在复制文件之前，使用[file_exists检查文件是否已经存在。](http://php.net/manual/en/function.file-exists.php)

如果存在，把文件名改成你想要的，我也建议你循环做所有这些事情，**不要重复自己**。

如下：

```
if( file_exists($path1) ) {
    // change another filename to overwrite $path1
} 
```

抱歉，即使文件有计数，我也忘记检查文件是否存在，因此除了简单的 if 之外，您还有一些更复杂的工作要做，以下是编辑后的代码：

```
for( $i = 0; isset($HTTP_POST_FILES['ufile']['name'][$i]); $i++ ) {
    /*
     * do things before copy
     */
    $path = 'upload/'.$HTTP_POST_FILES['ufile']['name'][$i];
    $lastDot = strrpos($path, '.');
    $base = substr($file, 0, $lastDot);
    $ext = substr($file, $lastDot);
    // this loop will keep doing until find a path that no file exists
    for( $seq = 0; file_exists($path); $seq++ ) {
        if( file_exists($path) ) {
            $path = $base . '_'. $seq. $ext;
        }
    }
    /*
     *  do copy and something else
     */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:55:52.000

您可以[`file_exists()`](http://php.net/manual/en/function.file-exists.php)在复制前检查[`pathinfo()`](http://www.php.net/manual/en/function.pathinfo.php)文件信息，例如：

```
$file = $HTTP_POST_FILES['ufile']['tmp_name'][0];
$path_info = pathinfo($file);
$count = 0;

while(file_exists($file) {
    $count ++;
    $file = $path_info['dirname'] . $path_info['filename'] '_' . $count . '.' $path_info['extension'];
}

copy($file, $path) ; 
```

# wordpress - 如何使用 wp_mail mail 发送附件邮件

> ID：13135200
> 
> 赞同：6
> 
> 时间：2012-10-30T08:28:48.507
> 
> 标签：wordpress, email

`wp_mail`有没有人告诉我如何使用wordpress的功能发送附件电子邮件？我正在使用以下代码，但它不起作用

```
$attachments = array(ABSPATH . '/uploads/abc.png');
wp_mail($email, 'Testing Attachment' , 'This is subscription',$attachments); 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T08:36:14.897

试试这个，然后让我知道——

```
$attachments = array(ABSPATH . '/uploads/abc.png');
wp_mail($email, 'Testing Attachment' , 'This is subscription','This is for header',$attachments); 
```

在这种情况下，您的附件设置为标题。

# php - Magento 覆盖本地文件夹中的核心控制器

> ID：13135207
> 
> 赞同：3
> 
> 时间：2012-10-30T08:29:27.667
> 
> 标签：php, magento, magento-1.7

我已将**app/code/core/Mage/Checkout/controllers/OnepageController.php 复制**到**app/code/local/Mage/Checkout/controllers/OnepageController.php**并覆盖了一个函数。我也刷新了缓存，但没有调用覆盖的控制器，而是调用了原始控制器。

为什么我的覆盖不起作用？我对其他核心文件做了同样的覆盖，效果很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:36:50.437

1.  编译关闭了吗？

2.  尝试创建自己的控制器来覆盖核心控制器，而不是复制和编辑 Magento 核心文件。

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/how_to_overload_a_controller](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)

另请参阅：[如何覆盖 Magento 控制器？](https://stackoverflow.com/questions/6374344/how-can-i-override-a-magento-controller)

# javascript - 为什么说 WebGL 是 2D API，而不是 3D API？

> ID：13135210
> 
> 赞同：13
> 
> 时间：2012-10-30T08:29:50.483
> 
> 标签：javascript, graphics, opengl-es, html5-canvas, webgl

[根据 HTML5 Rocks](http://www.html5rocks.com/en/tutorials/webgl/webgl_fundamentals/)，WebGL 实际上是一个 2D API，而不是 3D API。他们为什么这么说，这是什么意思？

我们可以在 WebGL 顶点着色器和片段着色器中指定 X、Y、Z 坐标。我无法理解 2D 和 3D 图形 API 之间的区别。你能解释一下为什么他们说这是一个 2D API 吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-30T16:26:31.867

> WebGL 实际上是一个 2D API，而不是 3D API。这是什么意思？

这意味着您应该停止听任何网站或人告诉您的任何内容。当人们说这样愚蠢的话时，最好忽略它们并继续进行更合理的教程/信息/讨论。

您当然可以在纯 2D 术语中使用 WebGL。您可以将 2D 位置传递给顶点着色器。您可以完全关闭深度测试。等等。但是你的顶点着色器的输出是一个[4D 齐次坐标](http://en.wikipedia.org/wiki/Homogeneous_coordinates)，即使你的 W 是 1 而你的 Z 是 0。所以渲染系统将完成它通常对 3D 场景所做的所有 3D 数学运算。

是的，光栅化基本上是一个 2D 过程，深度测试是一种“黑客”，可以去除隐藏的表面。但这对于*所有*基于光栅化的渲染都是如此。D3D、OpenGL、GLIDE 和每个软件光栅化器*也*将是这种逻​​辑的“2D API”。

如果它们都是 2D API，那么这种说法毫无意义。它将 OpenGL/D3D 置于与SDL 和 Direct2D 等*实际*“2D API”相同的级别。然而，那些“2D API”根本无法进行 3D 渲染（或者并非没有很大的痛苦）。

因此，该陈述在事实上是不正确的，并且具有令人难以置信的误导性。谁说这不值得你花时间或注意力。

> 来自评论：

最初写这个“WebGL 是 2D”的人已经屈尊解释他的推理，所以我将在这里解决这些问题。

让我们使用他对 API 维度的定义。他的准确报价是：

> 你只给了他们 3D 数据，他们只给了你一个 3D 显示。OpenGL ES 2.0 是一个 2D api。您必须自己提供所有 3D 到 2D 的数学转换。

由此，我们可以推断出“3D API”的意思是“‘你’将 3D 值输入以导致 3D 渲染发生的 API”。类似地，“2D API”表示“‘你’将 2D 值输入以导致 2D 渲染发生的 API”。

让我们假设“你”不仅仅意味着从缓冲区对象中获取的值的维度。“你”是指你可以直接控制的每一段代码，包括你的着色器。好的。因此，对于 WebGL，“你”会停在顶点着色器的末尾。因此，WebGL 开始处理顶点着色器输出。

顶点着色器的输出是一个 4D 齐次坐标。我猜这个论点是 4D 齐次坐标在某种程度上与 2D 坐标相同。即使它显然不是，因为它还有 2 个组件，并且您对它们执行的各种数学运算非常不同。

我会让您决定是否要将 4D 齐次坐标视为与 2D 坐标相同。

相反，我将看看*WebGL*如何处理 4D 输出。它是否将其转换为二维坐标？OpenGL规范说不。

来自[OpenGL ES 2.0](http://www.khronos.org/registry/gles/specs/2.0/es_full_spec_2.0.25.pdf)，第 2.12 节，对开页 44：

> 顶点着色器执行会产生一个顶点坐标`gl_Position`，该坐标假定在剪辑坐标中。对剪辑坐标进行透视分割以产生归一化的设备坐标，然后进行视口变换以将这些坐标转换为窗口坐标（见图 2.4）。

> 剪辑坐标是由 x、y、z 和 w 坐标（按此顺序）组成的四维齐次向量。如果一个顶点的剪辑坐标是：

> (x [c] , y [c] , z [c] , w [c] )

> 那么顶点的归一化设备坐标是

> (x [d] , y [d] , z [d] ) = (x [c] /w [c] , y [c] /w [c] , z [c] /w [c] )

标准化设备坐标空间有 3 个分量。因此它不是二维空间。但是后来的转变呢？

好吧，来自同一规范的第 2.12.1 节（对开页 44-45）：

> 视口变换由视口的宽度和高度（分别以像素 p [x]和 p [y]为单位）及其中心 (o [x] , o [y] )（也以像素为单位）确定。顶点的窗口坐标 (x [w] , y [w] , z [w] ) 由下式给出

> x [w] = (p [x] /2)x [d] + o [x]

> y [w] = (p [y] /2)y [d] + o [y]

> z [w] = ((f - n)/2)z [d] + (n + f)/2

所以是的，即使是*窗口空间*也是一个 3D 坐标系。窗口空间是 OpenGL 在其计算中使用的最终空间；窗口空间直接进入光栅化器。这就是渲染的内容。

因此，*根据 OpenGL ES 2.0 规范*，在整个渲染管道中没有一点可以将任何东西转换为*纯*2D 空间。

WebGL 是一种 API，您可以将 4D 齐次坐标输入其中。WebGL 绝不会执行任何“3D 到 2D 数学转换”，用户也不会。没有人会在 WebGL 中的任何点将任何东西转换为 2D 坐标。2D 值不通过 2D 管道馈送；4D 值通过 3D 管道馈送。

因此，*按照他自己的定义*，WebGL 不是 2D API。

QED。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-06T23:57:12.613

在我看来（作为拥有 15 年以上 3D 图形经验的游戏开发人员），gman 将 WebGL 描述为 2D API 充其量是高度误导，我倾向于认为这完全是错误的。Nicol Bolas 在他的回答中指出了大部分原因，但对我来说，关键是一旦你从 gman 在他的画布 / WebGL 示例中使用的线框图形移动到纹理化，就不可能获得正确渲染的 3D 场景如果 WebGL 没有在顶点着色器的输出中提供 z 和 w 信息，并且它在光栅化期间没有使用它们来获得透视正确插值并使用 z 缓冲区执行隐藏表面移除，则为三角形。

gman 似乎真正试图说明的一点是，WebGL 不像古老的古老 3D 图形 API 那样是固定功能的 3D 图形 API，而是具有可编程管道。然而，所有现代 3D 图形 API（Direct3D 8、9、10、11；OpenGL 2.0 及更高版本；您可以在 PS3、PS4、Wii U 等控制台上找到的专有 API）都是如此。它们都以基本相同的方式工作：顶点着色器输出齐次坐标，光栅器使用 z 和 w 信息正确插入投影到 2D 图像的 3D 三角形，并使用 z 缓冲区执行隐藏表面移除。这与没有 z 和 w 坐标、没有透视正确插值概念和没有用于去除隐藏表面的 z 缓冲区的 2D API 非常不同。

[**更新**] 在他的[一篇文章](http://games.greggman.com/game/webgl-2d-vs-3d-libraries/)中， gman 或多或少地交替使用“API”和“库”。我认为这两个术语没有明确且完善的定义，但我认为对这些术语的不同理解可能会导致这里的一些分歧。

Khronos 描述了 WebGL：

> WebGL™ 是专为 Web 设计的即时模式 3D 渲染 API。

我认为这是一个准确的描述。“API”的一个常用含义是定义的用于访问底层硬件或操作系统服务的软件接口，是指面向公众的软件接口，而不是任何特定的实现。从这个意义上说，所有旨在访问 3D 图形硬件的主流现代 API 都可以被认为是低级的“即时模式 3D 渲染 API”。我会在这个类别中包括 OpenGL、OpenGL ES、WebGL、Direct3D 和在控制台上找到的专有 API。

在行业中将所有这些都称为“3D API”是正常的，因为它们旨在提供对主要功能是渲染 3D 图形的 GPU 的访问，并且它们公开了支持该功能的低级功能（透视正确插值和 z -光栅化期间基于缓冲区的隐藏表面去除、各向异性纹理过滤、在某些情况下镶嵌硬件等）以及对 3D 管道的可编程部分（顶点、像素、几何着色器、外壳和域着色器等）进行编程的方法。 ）。

我倾向于认为“库”与“API”的含义略有不同。像three.js 这样的东西将自己描述为“库”而不是“API”：

> Three.js 是一个使 WebGL（浏览器中的 3D）变得非常简单的库。虽然原始 WebGL 中的简单立方体会产生数百行 Javascript 和着色器代码，但 Three.js 等价物只是其中的一小部分。

虽然这两个术语没有硬性和快速的定义，但我倾向于认为库更多地指代功能的特定实现，并暗示可能比直接 API 更高级的辅助功能。

其他更高级别的 3D“库”可能将自己描述为“引擎”或“框架”，例如

> OGRE（面向对象的图形渲染引擎）是用 C++ 编写的面向场景的灵活 3D 引擎，旨在使开发人员更轻松、更直观地使用硬件加速 3D 图形生成应用程序。

有一大堆功能不是旧式固定功能“API”的一部分，例如 2.0 之前的 OpenGL 或 DX8 之前的 DirectX，但如果您只想渲染一些 3D 对象而不需要详细了解 3D 图形，那么它非常有用——比如场景图、加载和渲染模型的函数以及附加材质、对灯光和阴影的高级支持等，但这不是 Direct3D 或 WebGL 等低级 3D 'API' 的目标。这不是他们试图解决的问题。我可以看到尝试将其传达给只想在浏览器中渲染一些 3D 对象的新手可能会有用，但我不认为声称 WebGL 是“2D API”是一种有用或准确的方式来实现这一点.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-02T14:53:41.793

好吧，我不知道其他人——无论 Khronos 在他们的网站上说什么，我都会倾向于去。对我来说似乎很清楚。：耸肩：

> WebGL™ 是专为 Web 设计的即时模式 3D 渲染 API。它源自 OpenGL® ES 2.0，并提供类似的渲染功能，但在 HTML 上下文中。WebGL 被设计为 HTML Canvas 元素的呈现上下文。HTML Canvas 为网页中的编程呈现提供了一个目的地，并允许使用不同的呈现 API 执行该呈现。描述为 Canvas 规范一部分的唯一此类接口是 2D 画布渲染上下文 CanvasRenderingContext2D。本文档描述了另一个这样的接口，WebGLRenderingContext，它提供了 WebGL API。

[https://www.khronos.org/registry/webgl/specs/1.0/](https://www.khronos.org/registry/webgl/specs/1.0/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-30T09:28:32.777

这是一个观点。

在 WebGL 中没有任何要求以 3d 建模世界、创建相机、设置灯光等。最后，渲染器只关心点、线和三角形，它们的 4 个坐标与`|w*x|<w, |w*y|<w, |w*z|<w.`默认情况下只能传递给着色器两个坐标，x 和 y，而框架设置 z=0 和 w=1。

也可以使用 opengl 来绘制 2d 精灵，而不用担心设置一些投影矩阵。可以省略 z 缓冲区和 z 坐标的处理，直到需要保存的点：|z*w| <= w 表示要渲染的任何内容。

但也很明显，API 非常适合渲染 3D 模型并非巧合。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-01T09:01:14.950

WebGL 是光栅化 API 而不是 3D api。您必须为其提供投影坐标。在很多方面它与 Canvas 没有什么不同。它只是更快。让我们比较一下。

这是 Canvas 中的 3D

```
const cubeVertices = [
  -1, -1, -1,
   1, -1, -1,
   1,  1, -1,
  -1,  1, -1,
  -1, -1,  1,
   1, -1,  1,
   1,  1,  1,
  -1,  1,  1,
];
const indices = [
  0, 1,
  1, 2,
  2, 3,
  3, 0,
  4, 5,
  5, 6,
  6, 7,
  7, 4,
  0, 4,
  1, 5,
  2, 6,
  3, 7,
];

const canvas = document.querySelector("#c");
const ctx = canvas.getContext("2d");

function render(time) {
  time *= 0.001;

  const scale = 2;

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.save();
  ctx.translate(canvas.width / 2, canvas.height / 2);
  ctx.scale(canvas.width / scale, -canvas.height / scale);
  ctx.lineWidth = scale / canvas.width;
  ctx.strokeStyle = "black";

  const fieldOfView = Math.PI * 0.25;
  const aspect = canvas.width / canvas.height;
  const projection = m4.perspective(fieldOfView, aspect, 1, 500);
  const radius = 5;
  const eye = [
      Math.sin(time) * radius,
      2,
      Math.cos(time) * radius];
  const target = [0, 0, 0];
  const up = [0, 1, 0];
  const camera = m4.lookAt(eye, target, up);
  const view = m4.inverse(camera);

  const worldViewProjection = m4.multiply(projection, view);

  drawLines(cubeVertices, indices, worldViewProjection);
  ctx.restore();
  requestAnimationFrame(render);
}
requestAnimationFrame(render);

function drawLines(cubeVertices, indices, worldViewProjection) {
  ctx.beginPath();
  //
  // transform points from 3D to 2D.
  //
  const points = [];
  for (let ii = 0; ii < cubeVertices.length; ii += 3) {
    points.push(m4.transformPoint(
      worldViewProjection,
      cubeVertices.slice(ii, ii + 3)));
  }
  for (let ii = 0; ii < indices.length; ii += 2) {
    var p0 = points[indices[ii + 0]];
    var p1 = points[indices[ii + 1]];
    ctx.moveTo(p0[0], p0[1]);
    ctx.lineTo(p1[0], p1[1]);
  }
  ctx.stroke();
}
```

```
canvas { border: 1px solid red; }
```

```
<!-- just a math lib -->
<script src="https://webglfundamentals.org/webgl/resources/m4.js"></script>
<canvas id="c"></canvas>
```

这是 WebGL 中相同的 3D

```
const cubeVertices = [
  -1, -1, -1,
   1, -1, -1,
   1,  1, -1,
  -1,  1, -1,
  -1, -1,  1,
   1, -1,  1,
   1,  1,  1,
  -1,  1,  1,
];
const indices = [
  0, 1,
  1, 2,
  2, 3,
  3, 0,
  4, 5,
  5, 6,
  6, 7,
  7, 4,
  0, 4,
  1, 5,
  2, 6,
  3, 7,
];

const canvas = document.querySelector('#c');
const gl = canvas.getContext('webgl');

const vs = `
attribute vec4 a_position;
uniform mat4 u_worldViewProjection;

void main() {
    //
    // transform points from 3D to 2D.
    //
    gl_Position = u_worldViewProjection * a_position;
}
`;

const fs = `
void main() {
   gl_FragColor = vec4(0,0,0,1);
}
`;

const program = webglUtils.createProgramFromSources(
    gl, [vs, fs]);
gl.useProgram(program);

const positionLoc = gl.getAttribLocation(program, "a_position");
const worldViewProjectionLoc =
    gl.getUniformLocation(program, "u_worldViewProjection");

const buffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
gl.bufferData(
    gl.ARRAY_BUFFER,
    new Float32Array(cubeVertices),
    gl.STATIC_DRAW);
gl.enableVertexAttribArray(positionLoc);
gl.vertexAttribPointer(positionLoc, 3, gl.FLOAT, false, 0, 0);

const buffer2 = gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer2);
gl.bufferData(
    gl.ELEMENT_ARRAY_BUFFER,
    new Uint16Array(indices),
    gl.STATIC_DRAW);

function render(time) {
  time *= 0.001;

  const scale = 4;

  const fieldOfView = Math.PI * 0.25;
  const aspect = canvas.width / canvas.height;
  const projection = m4.perspective(fieldOfView, aspect, 0.0001, 500);
  const radius = 5;
  const eye = [
      Math.sin(time) * radius,
      2,
      Math.cos(time) * radius];
  const target = [0, 0, 0];
  const up = [0, 1, 0];
  const camera = m4.lookAt(eye, target, up);
  const view = m4.inverse(camera);

  const worldViewProjection = m4.multiply(projection, view);
  gl.uniformMatrix4fv(
      worldViewProjectionLoc, false, worldViewProjection);

  gl.drawElements(gl.LINES, indices.length, gl.UNSIGNED_SHORT, 0);
  requestAnimationFrame(render);
}
requestAnimationFrame(render);
```

```
canvas { border: 1px solid red; }
```

```
<!-- just a math lib -->
<script src="https://webglfundamentals.org/webgl/resources/m4.js"></script>
<script src="https://webglfundamentals.org/webgl/resources/webgl-utils.js"></script>
<canvas id="c"></canvas>
```

Canvas 和 WebGL 之间的唯一区别是在 Canvas 中我使用 JavaScript 进行投影，而在 WebGL 中我在着色器中进行投影。在这两种情况下，**我编写的代码**都进行了投影。

在 Canvas 版本中，该代码为：

```
m4.transformPoint(
    worldViewProjection,
    cubeVertices.slice(ii, ii + 3)); 
```

在 WebGL 版本中，该代码是：

```
gl_Position = u_worldViewProjection * a_position 
```

API 本身只光栅化。无论哪种情况，我都必须提供投影代码。WebGL 中没有任何东西可以做 3D。只有一个光栅化 api 和 2 个函数，顶点着色器和片段着色器，它们都是用 GLSL 编写的，我必须提供它们运行速度非常快并包含一个数学库。在这两种情况下，我仍然需要提供对 API 进行 3D 处理的代码。

WebGL **不是* 3D API

我认为指出这一点很重要。有各种版本的 OpenGL。1993 年的原始 OpenGL 是一个 3D api。你给了它 3D 数据，你告诉它用什么颜色来制作东西，你告诉它各种灯光。你给了它一个模型矩阵和一个投影矩阵，它为你绘制了 3D。

OpenGL ES 2.0 和 WebGL 摆脱了所有这些。它们提供光栅化 API 和着色器，让您对硬件进行编程。但是由你来写所有的预测。您必须从 3D 计算投影坐标。你有计算照明方程，颜色和所有其他的。

这使得 WebGL 和 OpenGL ES 2.0 可以说比旧的固定函数 OpenGL 更难，但同时也使它们更加灵活。如果您对所有这些转换和数学操作感到满意，或者如果您不介意学习它，那么就开始做吧。如果您不习惯做所有事情，那么有很多 WebGL 3D 库可以为您做这件事。

对于声称 WebGL 是 3D 库的您，让我们尝试一个思维游戏。

这是一个物理库[box2d.js](http://box2d-js.sourceforge.net/)。你给它形状、质量和力，它会为你计算物理。如果它真的只是一个数学库，而你必须自己提供所有物理方程，你还会称它为物理库吗？一个叫做物理库的东西必须提供物理知识，否则它就不是物理库。同样，称为 3D 库的东西必须提供 3D 知识，否则它就不是 3D 库。

OpenGL 1.0 是一个 3D 库。你给它 3D 位置、顶点颜色、灯光，它会为你绘制 3D。您不需要 3D 知识。另一方面，WebGL 不提供任何 3D 知识。你必须知道如何进行 3D 投影，你必须知道如何采样纹理，你必须知道如何进行光照计算。它不再是一个 3D 库，它只是一个光栅化 API。将其称为 3D 库是一个谎言，对那些真正寻找 3D 库（即提供 3D 的库）的人来说是一种伤害。

称它为 2D 库可能有点夸张，但称它为 3D 库是错误的。

[这是另一篇关于它的文章](https://webglfundamentals.org/webgl/lessons/webgl-2d-vs-3d-library.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-13T18:35:58.273

哇，你的问题太棒了！你让所有这些大师像上一场战斗一样战斗 Oo

好吧，也许您还想阅读具有 1 年 WebGL 经验且几乎没有 OpenGL 编程技能的人的答案，所以让我们这样做吧！:)

首先，我必须说一些我还没有读过的东西，我觉得它很重要。@gman 说：

> API 提供了一个解决方案，因此您个人并不具备该知识。

好吧，我真的不同意这种说法。API 提供了一些解决方案，但这并不意味着您不需要这些知识。

现在回到你的问题，正如你所说：

> 我们可以在 webGL 顶点着色器和片段着色器中指定 x,y,z 坐标。我无法理解 2D 和 3D 图形 API 之间的区别。

正如其他人所说，您可以在着色器中指定（我认为您甚至**必须**指定）它是 4D 矢量。`gl_Position`以前，只有 javascript 和一些分离的 gpu。然后 WebGL 出现了新的选项。WebGL 本身不为*3D 行为*`gl_Position`提供任何解决方案，但它带来了在着色器中指定的选项。

我计算新选项，而不仅仅是整个解决方案。所以我认为这个问题也是关于 API 真正适合你的。为了我？在这种情况下，它带来了通过着色器制作 3D 应用程序的可能性。所以它是 3D API。

我希望它有帮助...

# google-maps-api-3 - 谷歌地图 api 3 缩放

> ID：13135211
> 
> 赞同：1
> 
> 时间：2012-10-30T08:29:52.043
> 
> 标签：google-maps-api-3

我正在使用谷歌地图 3 API。我在谷歌地图中遇到问题，我想在整个地图中显示一个标记，如果我试图根据该点的纬度经度拟合边界，则开始显示将达到最大值。有人可以为此建议任何最佳解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:58:07.300

您只想显示一个标记，那么为什么要拟合边界？这应该做-

```
map.setCenter(marker.getPosition()); 
```

还

```
//you can set a zoom level like `map.setZoom(6);` 
```

* * *

**更新：**

在放置标记时分析它是一个还是多个。我不认为这应该是艰难的。由于您没有提供任何代码，因此无法准确指出该位置。如果要超过一个-

```
if(number of markers to be placed > 1 )
{
   bounds.extend(marker.getLocation());
   map.fitBounds(bounds);
}
else //markers to be placed is only one 
{
   map.setCenter(marker.getPosition());
} 
```

* * *

如果两个标记之间的距离非常小并且您不想放大那么高，一个简单的解决方案是使用`maxZoom`地图的属性。只需在创建地图时设置此值。因此，您永远不会超出该缩放级别。

# single-page-application - 带有 WCF 数据服务的 Breeze.js

> ID：13135215
> 
> 赞同：3
> 
> 时间：2012-10-30T08:30:13.173
> 
> 标签：single-page-application, breeze

我刚刚开始探索 js 库，breeze.js。我浏览了这些示例，但似乎找不到任何关于如何使用 WCF 数据服务的示例（所有示例似乎都在 Web API 上）。

有谁知道如何使用微风.js 使用 WCF 数据服务（或任何其他 OData 服务）？

我在文档中的某处读到微风.js 目前仅支持读取 OData 服务。这对我来说很好，因为我正在考虑使用它的用例不包括对 OData 服务的写入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T17:25:35.413

# 此答案中描述的配置不再正确！

我是微风的工程师​​之一。

使用 Breeze 与 OData 服务对话的最简单方法是首先配置微风以与 OData 对话。

```
breeze.core.config.setProperties({
    // the OData provider
    remoteAccessImplementation: entityModel.remoteAccess_odata;
    // this is the Knockout provider but we also provide a Backbone provider
    //  and we have others on the way
    trackingImplementation: entityModel.entityTracking_ko,
}); 
```

然后初始化一个 EntityManager 并进行第一个查询。

```
var myServiceName = "http://localhost:9009/ODataService.svc";
var em = new breeze.entityModel.EntityManager( {serviceName: myServiceName });

var query = breeze.entityModel.EntityQuery.from("Customers")
    .where("CompanyName", "startsWith", "B")
    .orderBy("City");

em.executeQuery(query).then(function(data) {
   // process the results here.
}); 
```

您应该能够以这种方式使用任何 OData 服务。

[http://www.breezejs.com/documentation/introduction](http://www.breezejs.com/documentation/introduction)上的 Breeze 文档可以提供大量更多信息。

另外，请告诉我们是什么让您觉得 JayData 更合适。这就是我们改进产品的方式。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T02:24:25.500

# 更正了 OData 配置和示例

杰伊的回答似乎已经过时了。我不相信`entityModel`在该答案中出现的那种类型的微风中会留下任何痕迹。该答案的以下片段**将失败**：

```
entityModel.remoteAccess_odata // does not work! 
```

## 做这个！

在我撰写本文时，推荐的配置 Breeze 使其与标准 OData 源（例如 WCF OData 服务）对话的方法是

```
breeze.config.initializeAdapterInstance('dataService', 'OData', true); 
```

杰伊的答案的平衡需要稍微更正以删除对 的引用`entityModel`：

```
// specify the absolute URL to the WCF service address
var serviceName = "http://localhost:9009/ODataService.svc";

var em = new breeze.EntityManager(serviceName );

var query = breeze.EntityQuery.from("Customers")
    .where("CompanyName", "startsWith", "B")
    .orderBy("City");

em.executeQuery(query).then(function(data) {
   // process the data.results here.
}); 
```

# multilingual - 管理动态语言数据的数据库结构

> ID：13135218
> 
> 赞同：0
> 
> 时间：2012-10-30T08:30:40.543
> 
> 标签：multilingual

我想这个问题有一个标准的解决方案，但我找不到它..

我有一些存储用户数据的表。包含文本数据的列可以转换为不同的语言。

我想我必须创建一个表，其中包含诸如“fr”、“en”之类的语言 id 和另一个 PER 用户的内容表，其中存储了翻译、相关语言和用户内容表行的外键。

问题是这个解决方案强制为每个用户的内容表添加一个语言翻译表（因为外键列不能指向不同的表）。

有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:01:45.520

你必须决定什么是可翻译的，什么是不可翻译的。

如果您可以决定将用适当语言的字符串替换的“键”或“令牌”，这将有所帮助。

它可以帮助您构建 schema.table_name.column_name.value 形式的键，因此您具有一些结构（在某种程度上有点像 Windows 注册表路径）。

但是，是的，这是很多工作，而且没有任何捷径。

--

既然您告诉我们您正在使用 Symfony 2，也许以下链接会对您有所帮助？

[http://symfony.com/doc/2.0/book/translation.html](http://symfony.com/doc/2.0/book/translation.html)

[http://api.symfony.com/2.0/Symfony/Component/Translation/Loader/LoaderInterface.html](http://api.symfony.com/2.0/Symfony/Component/Translation/Loader/LoaderInterface.html)

# java - SSL 和 TLS 之间的区别及其在 Java 中的用法

> ID：13135230
> 
> 赞同：38
> 
> 时间：2012-10-30T08:31:15.870
> 
> 标签：java, ssl

我正在尝试在我正在设置的 Java 客户端和服务器之间建立 SSL 或 TLS 连接。

我一直在使用它`SSLContext.getInstance("SSL")`来构建`SSLContext`，并且它有效。

我想知道`protocol`参数的用途是什么[`SSLContext.getInstance(String protocol)`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLContext.html#getInstance%28java.lang.String%29)。

特别是，使用`SSLContext.getInstance("SSL")`and`SSLContext.getInstance("TLS")`或其他可能的值之间有什么变化？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-30T12:02:00.143

这是我不久前写的一个[相当详细的答案](https://serverfault.com/a/368574/47187)，描述了 SSL 和 TLS 之间的区别。简而言之，TLS 是 SSL 的继承者，TLS 1.0 可以认为是“SSL 3.1”。

如果您查看[JSSE 参考指南，在 SSLContext 部分](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#SSLContext)中，它说：

> 这些静态方法每个都返回一个实例，该实例至少实现了所请求的安全套接字协议。返回的实例也可以实现其他协议。例如，getInstance("TLSv1") 可能会返回实现“TLSv1”、“TLSv1.1”和“TLSv1.2”的实例。

[标准名称](http://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html#SSLContext)文档中也提到了这一点。

特别是，如果您检查[SSLContextImpl](http://www.docjar.com/html/api/sun/security/ssl/SSLContextImpl.java.html)的 Oracle/OpenJDK 7 源代码，您会发现它的所有`SSLContext`s 都支持所有协议（从使用 SSLv2 Client Hello 的 SSLv3 到 TLS 1.2）。不同的是默认启用哪些协议。此外，一般情况下，您不应该依赖它，因为其他 Java 实现（例如 IBM JRE）的行为可能会有所不同。

如果您希望将一组特定的协议用于连接，您应该使用`SSLSocket`or`SSLEngine`的`setEnabledProtocols`方法。否则，它将使用默认值，如[Providers 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:23:31.437

协议用于服务器和客户端之间的通信。所以`SSLContext(String protocol)`返回协议的实例，然后使用该服务器或客户端相互通信以获得安全级别。

有关更多参考，请参阅此链接。 [http://www.herongyang.com/JDK/SSL-java-net-ssl-SSLContext-Class-Test.html](http://www.herongyang.com/JDK/SSL-java-net-ssl-SSLContext-Class-Test.html)

# java - 对 PUT/POST 的 RESTful 响应

> ID：13135234
> 
> 赞同：1
> 
> 时间：2012-10-30T08:31:27.177
> 
> 标签：java, rest, response, put, restful-architecture

在 POST/PUT 上返回一个稍微不同的对象（例如发送到服务器的对象）是 RESTful 吗？

例子：

客户端向服务器发送 (POST/PUT)`Order`以创建订单。服务器发送一个响应对象，让我们调用它`OrderResponse`，其中包含创建的属性`Order`以及一些不同的信息，如交货时间、付款条件等。这是 RESTful 还是我应该只返回一个 OrderId 并提供一个新服务，客户端可以在其中检索`OrderResponse`？

**编辑：**

我无法为客户提供新订单的 URL，因为订单未保存在数据库中。我的应用程序通过消息将订单发送到第三方系统，我无法从中读取，但第三方系统向我发送了一些附加信息，我将这些信息添加到`OrderResponse`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:28:36.920

我不会考虑`Order`和`OrderResponse`成为不同的资源。它们属于同一类型。只是客户不能也不应该知道这个资源的所有细节。例如，确切的 ID 由服务器分配。

*   使用可能具有不同表示的相同资源。
*   `Location`在 HTTP 响应中返回`POST`包含创建的 URI 的请求的标头`Order`。
*   使`Order`URI 和这个 URI的表示`POST`比客户端编辑的更完整。

# c# - 在 C# 中的运行时未选中复选框时禁用文本框

> ID：13135235
> 
> 赞同：5
> 
> 时间：2012-10-30T08:31:35.767
> 
> 标签：c#, wpf

我有一个复选框和一个文本框。在运行时，
如果 CheckBox 被选中，则 TextBox 被启用。

我使用以下代码做到了

```
private void checkTime_Checked(object sender, RoutedEventArgs e)
{
    if (checkTime.IsChecked == true)
    {
        txtTime_SR.IsEnabled = true;
    }
} 
```

我需要做的是，在运行时未选中 CheckBox 时禁用 TextBox。

有这样做的想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T08:44:12.867

阅读您的帖子和评论，我猜您正在使用 WPF 或 silverlight。然后，在这种情况下，您可以在 XAML 中完成所有操作：

```
<CheckBox x:Name="checkTime" />
<TextBox x:Name="txtTime_SR" IsEnabled="{Binding IsChecked, ElementName=checkTime, Converter={StaticResource NotConverter}, Mode=OneWay}"/> 
```

然后，您需要创建转换器。这可以通过阅读此处的帖子来完成：[如何在 WPF 中绑定逆布尔属性？](https://stackoverflow.com/questions/1039636/how-to-bind-inverse-boolean-properties-in-wpf)

希望能帮助到你

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T08:32:38.587

如果我理解，您希望在选中复选框时启用文本框，并在取消选中复选框时禁用它？

```
private void checkTime_Checked(object sender, RoutedEventArgs e)
{
    txtTime_SR.Enabled = checkTime.Checked;
} 
```

您使用的是标准的 .NET`TextBox`和`CheckBox`控件吗？

编辑：好的，所以它是 WPF。做这个：

```
private void checkTime_Checked(object sender, RoutedEventArgs e)
{
    txtTime_SR.IsEnabled = checkTime.IsChecked;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-18T21:35:57.703

更简单

```
<CheckBox Content="Include the following..." IsChecked="{Binding IncludeMyItems}" Name="checkBox_includeMyItems" />
<TextBox Name="myItems" Text="{Binding MyItems}" Height="23" Width="165" IsEnabled="{Binding IsChecked, ElementName=checkBox_includeMyItems}" />
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T08:34:43.107

```
private void checkTime_Checked(object sender, RoutedEventArgs e)
{
 txtTime_SR.Enabled = checkTime.Checked;
} 
```

**或者**

```
private void checkTime_Checked(object sender, RoutedEventArgs e)
{
    txtTime_SR.IsEnabled = checkTime.IsChecked;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-23T12:13:56.217

我知道这是一个旧帖子，但是这应该可以。使用 Checked/Unchecked 事件。

```
 private void checkbox_otherflag_Unchecked(object sender, RoutedEventArgs e)
    {
        this.textbox_otherflagtext.IsEnabled = false;
    }

    private void checkbox_otherflag_Checked(object sender, RoutedEventArgs e)
    {
        this.textbox_otherflagtext.IsEnabled = true;
    } 
```

# php - 让我的 Cakephp 链接有虚荣网址

> ID：13135239
> 
> 赞同：0
> 
> 时间：2012-10-30T08:32:13.387
> 
> 标签：php, cakephp, routing, routes, cakephp-2.1

我正在使用 CakeRoute 类为 php 创建路由。

parse 方法工作正常，但我如何在应用程序中创建映射的 url：

```
mydomain.com/teachers/contentProfile/1

to

mydomain.com/chris-willis 
```

我重写了 parse() 方法以使我的 slugs 在请求中正确映射，但链接没有转换为 mydomain.com/chris-willis，它们看起来仍然是旧的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T23:05:31.993

首先，确保您使用数组语法指定 URL；如果您向 CakePHP 提供字符串 url，CakePHP 将无法翻译 url。

```
$this->Html->url(array('controller' => 'teachers', 'action' => 'contentProfile', $id)); 
```

代替

```
$this->Html->url('/teachers/contentProfile/' . $id); 
```

* * *

您可能需要交替提供 slug 而不是 ID

```
$this->Html->url(array('controller' => 'teachers', 'action' => 'contentProfile', 'slug' => 'teacher-name')); 
```

* * *

或者，更新您的自定义路由类的`match()`方法以在仅提供 id 时查找正确的 slug。

```
class CustomRoute {
  match($url) {
    if (empty($url['slug']) && isset($url[0])) {
      // lookup slug
    }
    unset($url[0]);
    return parent::match($url);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:38:48.247

> mydomain.com/teachers/contentProfile/1

将 slug 而不是 id 传递给链接： array('slug' => $teacher['Teacher']['slug']);

> mydomain.com/teachers/contentProfile/

# objective-c - iOS - 在 C 代码中使用 Objective C 变量

> ID：13135240
> 
> 赞同：1
> 
> 时间：2012-10-30T08:32:18.227
> 
> 标签：objective-c, ios, c, core-audio

我正在iOS中进行一些Core Audio编程，并且遇到了一种情况，我需要在一些C回调代码中使用我在Objective C中声明的变量。缓冲区变量必须可由 Objective C 和 C 语法访问，但在 C 语法中存在错误提示“使用未声明的标识符缓冲区”。

我该如何解决这个问题？提前致谢。

码头。

变量是缓冲区，在 RIORecerdingViewController.h 中声明如下：

```
@interface RIORecoerdingViewController : UIViewController <AVAudioSessionDelegate> {
OSStatus status;
AudioComponentInstance audioUnit;

AudioStreamBasicDescription audioFormat;
RIO rio;

IBOutlet UIButton *button;
BOOL isPlaying;
Float64 graphSampleRate;

NSString *destinationFilePath;
CFURLRef destinationURL;
ExtAudioFileRef outExtAudioFile;

// New
AUGraph theGraph;
TPCircularBuffer buffer;
} 
```

我希望在 C 回调函数中使用它

```
static OSStatus recordingCallback(void *inRefCon, 
                              AudioUnitRenderActionFlags *ioActionFlags, 
                              const AudioTimeStamp *inTimeStamp, 
                              UInt32 inBusNumber, 
                              UInt32 inNumberFrames, 
                              AudioBufferList *ioData) {

if (rio->recording)
{   
    TPCircularBufferProduceBytes(&buffer, abl.mBuffers[0].mData, inNumberFrames * 2 * sizeof(SInt32)); //&buffer has an error "Use of undeclared identifier buffer"
}
return noErr;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:05:48.953

您的`buffer`变量是具体`RIORecoerdingViewController`实例的实例变量。在没有实例的情况下使用它是没有意义的（“缓冲区属于哪个对象？”）。

所以如果你有一个实例，你可以像往常一样引用 ivar（即`yourRecoerdingViewController->buffer`如果你想走 C 指针路线）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:26:41.367

这就是你的`void * inRefCon`论点的`recordingCallback`目的。当您设置 RemoteIO 回调时，它可能看起来像这样：

```
AURenderCallbackStruct callbackInfo;
callbackInfo.inputProc = &recordingCallback;
callbackInfo.inputProcRefCon = NULL;

AudioUnitSetProperty(rio,
                     kAudioOutputUnitProperty_SetInputCallback,
                     kAudioUnitScope_Global,
                     0,
                     &callbackInfo,
                     sizeof(callbackInfo)); 
```

您可以将用作在回调期间`inputProcRefCon`将成为指针的任意指针。`inRefCon`如果您只想访问一个变量，这很容易（您只需传入该变量的地址）。例如，如果您只需要 TPCircularBuffer：

```
callbackInfo.inputProcRefCon = &buffer; 
```

然后当你`recordingCallback`被调用时，你可以通过 arg 访问你的缓冲区，`inRefCon`如下所示：

```
TPCircularBuffer * bufferPtr = (TPCircularBuffer *)inRefCon;
TPCircularBufferProduceBytes(bufferPtr, abl.mBuffers[0].mData, inNumberFrames * 2 * sizeof(SInt32)); 
```

如果您需要访问更多变量（例如`recording`布尔值），您可以创建一个结构并传递它的地址。

大街上的消息是，您应该避免在 AURenderCallbacks 中调用 Objective-C 调用（由于消息传递开销），但我目前没有任何硬数据来支持这一点。您可以传递`self`为`inputProcRefCon`，但 YMMV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T21:54:25.010

Objective C 是纯 C 的纯超集。它允许您将对象和实例变量指针复制到标准 C 全局变量、参数变量和结构（等）

一种（被认为是丑陋的）可能性是将缓冲区指针复制到 C 全局变量中（并确保手动将其置空，或者在释放缓冲区时不使用它）。然后从任何地方访问它，任何 C 函数。

其他（可能更优雅）的可能性包括将缓冲区指针复制到传递给 C 回调的结构中，或者将指向对象本身的指针直接或通过结构元素传递给 C 回调。然后，您可以使用 .m 文件中 C 函数的“->”语法来访问传递给标准 C 函数的任何对象的任何实例变量，例如音频单元回调。（必须在 .m 文件中声明 C 函数，以便可以导入用于对象定义的 Objective C 接口。）

还有另一种可能性，但不适合音频回调，是让 C 函数（在 .m 文件中）向单例模型对象发送消息，以获取/设置模型对象状态（包括缓冲区指针）。

# javascript - 为什么我的代码不显示距离和持续时间？

> ID：13135243
> 
> 赞同：-3
> 
> 时间：2012-10-30T08:32:43.230
> 
> 标签：javascript, html, google-maps

为什么我的代码不显示距离和持续时间？

这是我的代码（html + js）：

```
<!DOCTYPE html>
<html>
   <head>
      <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
      <meta charset="utf-8" />
      <title>Google</title>
      <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
      <style type="text/css">
         #result{
         width: 300px;
         height: 400px;
         background-color: red;
         }
      </style>

      <script>
         var service = new google.maps.DistanceMatrixService();
         service.getDistanceMatrix(
         {
         origins: ["Berlin"],
         destinations: ["Frankfurt"],
         travelMode: google.maps.TravelMode.DRIVING,
         }, callback);

         function callback(response, status) {
         $("#result").text(response.rows[0].elements.distance.text + " and " + response.rows[0].elements.duration.text);
         }
      </script>
   </head>

   <body>
      <div id="result"></div>
   </body>
</html> 
```

这是示例 JSON 输出：

[http://maps.googleapis.com/maps/api/distancematrix/json?origins=Berlin&destinations=Frankfurt&mode=driving&language=de-DE&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Berlin&destinations=Frankfurt&mode=driving&language=de-DE&sensor=false)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:44:19.250

`elements`也是一个数组，因此您的回调函数必须如下所示：

```
 function callback(response, status) {
     $("#result").text(response.rows[0].elements[0].distance.text + " and " + response.rows[0].elements[0].duration.text);
 } 
```

这是一个[工作 JSfiddle](http://jsfiddle.net/kKh3h/)。

提示：使用 Javascript 控制台查看 Javascript 中的错误。

# javascript - 页面搜索和 console.log 在 JSBin 中不起作用

> ID：13135246
> 
> 赞同：0
> 
> 时间：2012-10-30T08:32:55.437
> 
> 标签：javascript, jsbin

**我做错了什么，因为“页面搜索”（Ctrl-cmd / Ctrl-f）在 JSBin 中不起作用？**

[http://jsbin.com/oqojan/42/edit](http://jsbin.com/oqojan/42/edit)

我尝试在 Javascript 窗口中搜索术语“path2curve”，但只找到第一个匹配项，尽管该术语在 Javascript 窗口中存在几次。

我使用 Chrome 版本 22.0.1229.92 (Mac OS X 10.6.8)。最新的FF也有同样的问题。

在代码中搜索的能力对于开发至关重要。现在我使用了一种解决方法将文本复制到 Ultraedit 并在那里找到术语并在 JSBin 中再次修改代码后粘贴。我更喜欢 JSBin 而不是 JSfiddle，因为 JSBin 会立即显示键入的字母，并且文本光标的移动速度与移动速度一样快。在 JSFiddle 中，如果代码很长（如 Raphaël 源代码），则挂起时间可以是几秒钟。

**JSBin 中的另一个问题是 console.log(object) 没有将对象显示为可遍历**（通过单击 Chrome 控制台中的箭头符号），尽管在其他页面中对象是可遍历的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T10:57:15.290

我知道这是一个旧线程，但我认为搜索问题是固定的（或者当然当我在 chrome 中测试它时，它会产生结果）。jsbin（和许多其他人一样）使用 codemirror，这就是问题所在。它已经升级了，我认为这不再是问题了。

关于 console.log - 我不确定您的帖子中有足够的内容来实际诊断。我应该添加自定义控制台最近已重构，我知道深度对象曝光已更新。如果可以的话，请再做一次测试。

# android - 使用翻译映射变量的最佳实践

> ID：13135249
> 
> 赞同：0
> 
> 时间：2012-10-30T08:33:09.360
> 
> 标签：android, performance, optimization, internationalization

我有一张表，里面有很多应该翻译的行。大多数值都是整数，因此不需要翻译这些值。

但是，我的数据来自 JSON 结构，其中数据以键值对的形式正常存储。例如：

```
{
  "age":24,
  "hair-color":"black",
  "weight":42,
  "height":123,
  // ...
} 
```

到目前为止，我有一个如下所示的 strings.xml：

```
<resources>
  <string name="meta_age">Alter</string>
  <string name="meta_hair_color">Haarfarbe</string>
  <string name="meta_weight">Gewicht</string>
  <string name="meta_height">Körpergröße</string>
  <!-- ... -->
</resources> 
```

此数据在带有自定义 ArrayAdapter 的列表视图中可视化。这很好用，但是我不确定将键值对与其翻译映射的最佳方法是什么。

我现在在这里有这段代码：

```
public static final int[] fields = new int[] {R.string.meta_age, R.string.meta_hair_color, R.string.meta_weight, R.string.meta_height, /* ... */; 
```

为了构建 UI，字符串需要映射到*键*，到目前为止，这是通过这个混乱的代码完成的：

```
List<Integer> fieldIndex = new ArrayList<Integer>(fields.length);
for(int i : fields) {
    fieldIndex.add(i);
}
translation = new HashMap<String, Integer>();
translation.put("age", fieldIndex.indexOf(R.string.meta_age));
translation.put("hair-color", fieldIndex.indexOf(R.string.meta_hair_color));
translation.put("weight", fieldIndex.indexOf(R.string.meta_weight));
translation.put("height", fieldIndex.indexOf(R.string.meta_height)); 
```

下一步是我现在知道 json 字段的目标索引，并将它们与字符串 id 的字段列表放在一起。但我认为这段代码的性能不是很好。我怎样才能写得更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:36:57.353

听起来确实有点复杂。为什么不只是以一种关键/翻译的方式拥有所有可能翻译的字典。
大多数翻译框架也是这样工作的。

# java - 将字符串转换为小写以在xhtml中进行属性绑定？

> ID：13135253
> 
> 赞同：7
> 
> 时间：2012-10-30T08:33:35.040
> 
> 标签：java, jsf, jakarta-ee

我怎么能总是将属性转换`username`为小写？

这不起作用：

```
<h:inputText value="#{userService.user.username.toLowerCase()}" /> 
```

由于目标因此而“无法访问”。我怎么能这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T09:01:20.587

```
<h:inputText value="#{userService.user.username.toLowerCase()}" /> 
```

您不能对给定的 EL 表达式执行“设置”操作，但这是强制性的，以便使用提交的值更新模型值。`toLowerCase()`方法表达式没有对应的 setter 方法。

从技术上讲，您应该[`Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)为工作创建一个。这是一个启动示例：

```
@FacesConverter("toLowerCaseConverter")
public class ToLowerCaseConverter implements Converter {

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object modelValue) {
        if (!(modelValue instanceof String)) { 
            return null; // Or throw ConverterException.
        }

        return ((String) modelValue).toLowerCase();
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
        if (submittedValue == null) { 
            return null;
        }

        return submittedValue.toLowerCase();
    }

} 
```

按如下方式使用它：

```
<h:inputText value="#{userService.user.username}" converter="toLowerCaseConverter" /> 
```

您最好不要使用转换策略使模型混乱。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T08:37:22.750

您可以为此使用 jstl 函数

包括：<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

并使用 < h:inputText value="${fn:toLowerCase(string)}"/>

或者您可以通过 .toLowerCase() 在 java 中将用户名设为小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T08:37:15.333

这种方式应该有效。设置名称后，名称将被小写。

```
String name;

public void setName(String name){
 this.name = name.toLowerCase();
} 
```

# java - Http 状态 404，Servlet 不可用

> ID：13135254
> 
> 赞同：0
> 
> 时间：2012-10-30T08:33:49.053
> 
> 标签：java, web-services, jakarta-ee, tomcat, axis2

我是使用 AXIS 2、Tomcat 6、Java EE、eclipse (Juno) 创建 Web 服务的新手。我的工作区中有 2 个项目。其中一个工作正常，另一个不工作，所以我猜有一些通往某个图书馆的路径被破坏了。

所以当我在服务器上运行这个不工作的项目时，这个页面打开没有任何错误

> 本地主机：8080/项目名称/

它有 3 个选项服务、验证、管理。然后，如果我进入服务，我得到 404，验证给我 500，而管理再次给我 404 错误。

**Web.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns="http://java.sun.com/xml/ns/javaee" 
 xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
 http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
 <display-name>AdBoxWSProject</display-name>
 <welcome-file-list>
<welcome-file>index.html</welcome-file>
<welcome-file>index.htm</welcome-file>
<welcome-file>index.jsp</welcome-file>
<welcome-file>default.html</welcome-file>
<welcome-file>default.htm</welcome-file>
<welcome-file>default.jsp</welcome-file>
<welcome-file>/axis2-web/index.jsp</welcome-file> 
```

```
 <servlet>
  <display-name>Apache-Axis Servlet</display-name>
  <servlet-name>AxisServlet</servlet-name>
  <servlet-class>org.apache.axis2.transport.http.AxisServlet</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>AxisServlet</servlet-name>
  <url-pattern>/servlet/AxisServlet</url-pattern>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>AxisServlet</servlet-name>
  <url-pattern>*.jws</url-pattern>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>AxisServlet</servlet-name>
  <url-pattern>/services/*</url-pattern>
</servlet-mapping>
<servlet>
  <display-name>Apache-Axis Admin Servlet Web Admin</display-name>
  <servlet-name>AxisAdminServlet</servlet-name>
  <servlet-class>org.apache.axis2.transport.http.AxisAdminServlet</servlet-class>
  <load-on-startup>100</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>AxisAdminServlet</servlet-name>
  <url-pattern>/axis2-admin/*</url-pattern>
</servlet-mapping>
<servlet>
  <display-name>SOAPMonitorService</display-name>
  <servlet-name>SOAPMonitorService</servlet-name>
  <servlet-class>
       org.apache.axis2.soapmonitor.servlet.SOAPMonitorService
     </servlet-class>
  <init-param>
    <param-name>SOAPMonitorPort</param-name>
    <param-value>5001</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup> 
```

SOAPMonitorService

```
 <url-pattern>/SOAPMonitor</url-pattern> 
```

Axis Admin Servlet AdminServlet

```
 <servlet-class>org.apache.axis.transport.http.AdminServlet</servlet-class>

    <load-on-startup>100</load-on-startup>

    </servlet>
    <servlet-mapping>
     <servlet-name>AdminServlet</servlet-name>
     <url-pattern>/servlet/AdminServlet</url-pattern>
   </servlet-mapping>
     </web-app> 
```

同样在我的控制台窗口中，当我运行本地主机时，我收到此错误：-

```
 Oct 30, 2012 2:33:42 PM org.apache.catalina.core.StandardWrapperValve invoke
       INFO: Servlet AxisAdminServlet is currently unavailable 
```

# tsql - 在 T-SQL 中减去 DateTime 间隔

> ID：13135256
> 
> 赞同：0
> 
> 时间：2012-10-30T08:34:04.967
> 
> 标签：tsql

我有第一张表定义了工作时间：`FreeTimes table (start datetime, end datetime)`第二张表已经计划了任务：`TaskTime table (start datetime, end datetime)`。

我需要以某种方式从第一个表中减去第二个表，所以在这种情况下我得到了一个剩余空闲时间的结果集：

*   如果TaskTime（或更多TaskTimes）位于FreeTime中间，我需要将FreeTime拆分为任务之前的时间和任务之后的时间
*   如果 TaskTime 与整个 FreeTime 重叠，我需要过滤掉这个 FreeTime
*   如果 TaskTime 与 FreeTime 相交，我需要从 FreeTime 中减去 TaskTime 并只留下 FreeTime 的剩余部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:44:11.917

我解决这个问题的一般方法如下：

```
;With AllTimes as (
    select [Start] as EventTime from FreeTimes
    union
    select [End] from FreeTimes
    union
    select [Start] from TaskTimes
    union
    select [End] from TaskTimes
), OrderedTimes as (
    select EventTime,ROW_NUMBER() OVER (ORDER BY EventTime) rn
    from AllTimes
), Intervals as (
    select
        ot1.EventTime as StartTime,
        ot2.EventTime as EndTime
    from
        OrderedTimes ot1
            inner join
        OrderedTimes ot2
            on
                ot1.rn = ot2.rn - 1
)
select * from Intervals i
where not exists (
    select * from TaskTimes T where --Overlapped
       T.[Start] < i.EndTime and
       T.[End] > i.StartTime)
and exists (
    select * from FreeTimes T where
       T.[Start] < i.EndTime and
       T.[End] > i.StartTime) 
```

Where we basically order all datetime values of interest, and then for each pair of successive values, work out if there's some overlap with the `TaskTimes` table. If there is, then that pair shouldn't be in the final result. (**edit** - we also have to check that the interval pair does actually overlap with `FreeTimes` too)

You can, if needed, take this further and merge intervals (if there are overlapping rows in `FreeTimes`, you may end up with multiple intervals which are adjacent to each other)

# delphi - Delphi列表框+检查列表框

> ID：13135259
> 
> 赞同：0
> 
> 时间：2012-10-30T08:34:27.213
> 
> 标签：delphi, delphi-5

我正在开发一个 mp3 发送程序。我正在使用一个列表框来显示一个简单的 mp3 文件名列表（1.mp3、2.mp3、3.mp3 等）和一个连接（ip adress1、ip adress2）所在的复选框。我想知道如何将带有复选框选中项目的列表框项目保存为（链接）？例如，如果我想将 1.mp3 发送到 ipadress1 和 ipadress2，那么 2.mp3、3.mp3 仅用于 ipadress2 等。）我想使用“文件发送”按钮将其保存到一些 txt 文件. 有什么想法吗？感谢您的回答！

```
procedure TForm1.ListBox1Click(Sender: TObject);
 var
Item : TStringList;
I: Integer;
begin
 if ListBox1.ItemIndex = -1 then
  Exit ;
 if Assigned(ListBox1.Items.Objects[ListBox1.ItemIndex]) then
  Item := ListBox1.Items.Objects[ListBox1.ItemIndex] as TStringList
 else
 begin
   Item := TStringList.Create ;
   ListBox1.Items.Objects[ListBox1.ItemIndex] := Item;
 end ;
for I := 0 to CheckListBox1.Items.Count - 1 do
 CheckListBox1.Checked[I] := False; 
for I := 0 to Item.Count - 1 do
CheckListBox1.Checked[CheckListBox1.Items.IndexOf(Item[I])] := True; 
end;

procedure TForm1.CheckListBox1ClickCheck(Sender: TObject);
var
Item : TStringList;
I    : Integer;
begin
if ListBox1.ItemIndex = -1 then
begin
  ShowMessage('Select the mp3 first!');
  Exit ;
  end ;
 if Assigned(ListBox1.Items.Objects[ListBox1.ItemIndex]) then
 Item := ListBox1.Items.Objects[ListBox1.ItemIndex] as TStringList
 else
 begin
  Item := TStringList.Create;
  ListBox1.Items.Objects[ListBox1.ItemIndex] := Item;
end;
Item.Clear;
 for I := 0 to CheckListBox1.Items.Count - 1 do
 if CheckListBox1.Checked[I] then
  Item.Add(CheckListBox1.Items[I]);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:35:26.353

如果您有一些额外的选项，您可以使用 xml 文件。您可以根据需要添加任意数量的属性。

```
<Body>
  <F1.mp3 ipaddress1="True" ipaddress2="False"/>
  <F2.mp3 ipaddress1="False" ipaddress2="True"/>
</Body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:44:30.397

你可以把它保存到ini文件。我认为它符合你的要求。

使用 mp3 文件名作为部分名称，ip 作为名称=值对

```
[1.mp3]
ip1=1
ip2=1

[2.mp3]
ip2=1
ip4=1 
```

# linux - 无法提交 *.o 文件

> ID：13135260
> 
> 赞同：1
> 
> 时间：2012-10-30T08:34:30.643
> 
> 标签：linux, eclipse, svn, subclipse

我想通过 subclipse 提交一个目标文件。我知道这不是一个好的“风格”，但我必须这样做。

我通过谷歌找到了这个：

[svn 不提交 .o 文件，但为什么呢？](https://stackoverflow.com/questions/6502776/svn-doesnt-commit-o-files-but-why)

但这并不是我要寻找的。我不想通过命令行做颠覆主题。

我更改了 subclibse/config 文件 // 我`*.o`从`global ignores`

但是甚至不可能在 Eclipse Team 菜单中提交它。它是灰色的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:00:05.260

您的 *.o 文件在您的 svn 存储库中未版本化，因为它们是新生成的，因此必须在“svn commit”之前执行“svn add”

# math - 在不同计算机上使用不同编译器的 fortran 中一致的浮点运算？

> ID：13135262
> 
> 赞同：5
> 
> 时间：2012-10-30T08:34:43.003
> 
> 标签：math, floating-point

如何使用不同的编译器和可能的不同计算机通过浮点运算获得相同的结果？

这是 p.f90

```
program fl
implicit none
real(kind=8) :: a

a=9d0/10d0
write(*,*) a

end program 
```

使用 gfortran -op p.f90 我得到 0.90000000000000002

使用 ifort -g -op p.f90 我得到 0.900000000000000

有没有办法实现一致性？小东西传播并变得更大。

最好的问候亚历山德罗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T10:11:56.230

我们将在下面转向浮点运算，但让我首先处理您的一个误解。您在 write 语句中使用*列表导向格式*意味着编译器选择的写出变量的格式是编译器的选择；它不是由语言标准规定的。您对第二个`*`in`write(*,*)`的使用告诉编译器根据需要写出变量的值。`gfortran`因此，您所拥有的并不是算术有问题的证据，而是和之间存在差异`ifort`。如果我将您的 write 语句修改为

```
write(*,'(f21.18)') a 
```

然后我的英特尔 Fortran 程序写道

```
0.900000000000000022 
```

到控制台。

SO充满了因不熟悉浮点运算细节而引起的问题，所以我不打算写一篇论文，只是与您的问题相关的一些观察。

IEEE-754 64 位浮点数（这可能是您从声明中得到的`real(kind=8)`）仅提供大约 16 位十进制数字的有用信息。实际上，由于它们是二进制的，并且在一个基数和另一个基数之间没有简单的对应关系，它实际上是 15.95 个十进制数字，许多用户将其四舍五入，从不查看浮点数中第 15 个有效数字之后的任何内容-点数的十进制表示。所以两者`ifort`都`gfortran`用尾随`2`的 s 误导你。

IEEE-754 不仅定义了 fp 数的格式，还定义了一些舍入和算术运算的规则。一个精心编写的程序，它只使用那些算术运算（我认为还指定了平方根）并且关心舍入模式和舍入操作应该在两个不同的处理器上产生相同的结果。当然，没有多少有用的数值程序只限于基本的算术运算。

由于 2003 年标准 Fortran 包含了一个名为的内部模块`ieee_arithmetic`，它使程序员可以直接访问其运行的硬件的底层 IEEE-754 功能——但请注意，它并不要求硬件具有任何此类功能。如果您的硬件提供了必要的支持，使用`ieee_arithmetic`另一个称为您的内部模块`ieee_exceptions`，您应该能够编写在两者下编译的程序，`gfortran`并且`ifort`在执行时，每个 fp 数的最后一位产生相同的结果。

您还需要熟悉您正在使用的编译器的优化选项和数值算术选项。大多数编译器都有一个选项，其含义是`sacrifice IEEE compliance for speed`（因为`ifort`我认为它是`fp-model`）。一般来说，遵守 IEEE-754 的操作会减慢您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:19:08.400

**你不能。**

请参阅[《每个计算机科学家应该了解的浮点运算知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)》中的*系统方面*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:53:39.253

正如阿里：你不能。

FORTRAN 编译器的一个众所周知的问题是结果无法与不同的编译器和体系结构进行比较。不可能的主要原因与 FORTRAN 社区的设计决策有关：计算机可能会更改执行顺序并使用内部计算机专业来优化速度。由于浮点算术不是分布式的 [ x(y+z) != xy + xz ] 并且结果确实取决于执行顺序

例如

1E308 (MAX) + (1E308 - 2E308) ~= 0E308

(1E308 (MAX) + 1E308) - 2E308 == 无穷大

你被困住了。一些编译器使用例如 Fused multiply-add 来计算多项式，这些多项式给出的结果与“正常”不同，这是完全允许的。

你被困住了。对不起。

# python - 循环通过子节点在python中不起作用

> ID：13135263
> 
> 赞同：0
> 
> 时间：2012-10-30T08:34:44.730
> 
> 标签：python, xml-parsing

```
import xml.etree.ElementTree as ET

doc    = ET.parse("users.xml")
root = doc.getroot() #Returns the root element for this tree.
root.keys()          #Returns the elements attribute names as a list. The names are returned in an arbitrary order
for child in root:
    username             = child.attrib['username']
    password             = child.attrib['password']
    grant_admin_rights   = child.attrib['grant_admin_rights']
    create_private_share = child.attrib['create_private_share']
    uid                  = child.attrib['uid']

root  = ET.Element("users")
user  = ET.SubElement(root, "user")
user.set("username",username)
user.set("password",password)
user.set("grant_admin_rights",grant_admin_rights)
user.set("create_private_share",create_private_share)
user.set("uid",uid)

tree = ET.ElementTree(root)
myxml = tree.write("new.xml")

print myxml 
```

我的输入xml：-

```
<users>
<user username="admin" fullname="admin" password="admin" create_private_share="yes" remote_access="yes" grant_admin_rights="yes" enable_encrypt_share="yes" volume="DataVolume5" uid="1000"></user>
<user username="os" fullname="sp" password="sp" grant_admin_rights="no" create_private_share="no" uid="1000" ></user>
<user username="us" fullname="sp" password="sp" grant_admin_rights="no" create_private_share="no" uid="1000" ></user>
</users> 
```

输出这段代码：

```
<user create_private_share="no" grant_admin_rights="no" password="sp" uid="1000" username="us" /> 
```

我试图获得确切的 xml 作为我的输入 xml，但目前它迭代所有子项，但仅输出，最后一个？我如何迭代所有子项并打印确切的 xml。

在我的情况下，打印也没有工作，它显示无。

我希望我的输出应该是这样的：

```
<users>
<user username="admin" fullname="admin" password="admin" create_private_share="yes" remote_access="yes" grant_admin_rights="yes" enable_encrypt_share="yes" volume="DataVolume5" uid="1000"></user>
<user username="os" fullname="sp" password="sp" grant_admin_rights="no" create_private_share="no" uid="1000" ></user>
<user username="us" fullname="sp" password="sp" grant_admin_rights="no" create_private_share="no" uid="1000" ></user>
</users> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:47:56.113

你的逻辑有些问题。只会使用循环的最后一个值。您应该尝试在每次循环时创建节点，然后加入结果并将它们写入文件

# android - 屏幕太高 (android)

> ID：13135269
> 
> 赞同：-4
> 
> 时间：2012-10-30T08:35:23.670
> 
> 标签：android, height, screen

有人知道为什么我的布局是[这样](http://i47.tinypic.com/2012h3m.png)的吗？

所有元素都是 layout_height="wrap_content"...

我不知道为什么，如果我添加滚动视图，我必须看到那里的所有空白。

```
 <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        >

        <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="466dp"
        android:background="@drawable/fondo"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="@string/generandoDemandaTitulo"
            tools:context=".GenerandoDemanda" />

        <EditText
            android:id="@+id/editTextTitulo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            tools:ignore="TextFields" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="@string/generandoDemandaDescripcion"
            tools:context=".GenerandoDemanda" />

        <EditText
            android:id="@+id/editTextDescripcion"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            tools:ignore="TextFields" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textoAmbito"
                android:layout_weight="1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:text="@string/generandoDemandaAmbito" />

            <Button
                android:id="@+id/botonSeleccionarAmbito"
                android:layout_weight="2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical|right|center_horizontal"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:gravity="center"
                android:text="@string/generandoDemandaBotonAmbito"
                android:onClick="showMenuAmbito" />
        </LinearLayout>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="@string/generandoDemandaDesde" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="left"
            android:orientation="horizontal" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_weight="1"
                android:onClick="showDatePickerDialogDesde"
                android:text="@string/eligeFecha" />

            <TextView
                android:id="@+id/fechaDesde"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_weight="1" />

            <TextView
                android:id="@+id/horaDesde"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1" />
        </LinearLayout>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginTop="15sp"
            android:text="@string/generandoDemandaHasta" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_weight="1"
                android:onClick="showDatePickerDialogHasta"
                android:text="@string/eligeFecha" />

            <TextView
                android:id="@+id/fechaHasta"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_weight="1" />

            <TextView
                android:id="@+id/horaHasta"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="2" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="3"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/generandoDemandaPrecio" />

                <EditText
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:inputType="numberDecimal" />
            </LinearLayout>

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_marginLeft="20dp"
                android:layout_weight="1"
                android:gravity="center_vertical|center"
                android:text="@string/generandoDemandaBotonZona" >
            </Button>
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="53dp"
        android:layout_weight="4"
        android:gravity="left"
        android:orientation="horizontal" 
        android:layout_marginTop="10dp">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/generandoDemandaPublica" />

            <ToggleButton
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textOff="Publico"
                android:textOn="Privado" />
    </LinearLayout>

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:layout_weight="1"
    android:drawableLeft="@drawable/clearcache"
    android:drawablePadding="10dp"
    android:gravity="center"
    android:text="@string/generandoDemandaBotonCrear" />

    </LinearLayout>

</LinearLayout>
</ScrollView> 
```

那么，有人可以帮助我吗？哪里可能是错误或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:40:00.503

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="466dp"
                               ^^^^^
        android:background="@drawable/fondo"
        android:orientation="vertical" > 
```

您提供`466 dp`高度替换它`wrap_content`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:11:46.473

这是我在父 ScrollView 中的 LinearLayout。在添加 ScrollView 之前，我将图像作为背景。将 ScrollView 的背景而不是在 LinearLayout 中已经解决了。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="466dp"
    android:background="@drawable/fondo"
    android:orientation="vertical" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T17:56:25.243

试试这样；

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="wrap_content" 
     android:scaleType="fitXY"
     android:background="@drawable/backgroundlogin">

    <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" > 
```

# magento - Magento 在导航栏中添加类别列表项，如果设置了类别属性，则链接到不同的类别

> ID：13135274
> 
> 赞同：0
> 
> 时间：2012-10-30T08:35:32.947
> 
> 标签：magento, drop-down-menu, navigation, categories, listitem

我有一个相当奇怪的问题。我必须在 magento 中创建一个网上商店。

问题出在导航菜单中。我的客户想要一个包含所有类别的下拉列表项。但他也想选择几个类别分别显示在导航栏中。

当然，我可以为此使用 url 重写。但问题是。客户可以随时更改选择的类别。这些类别也可以有子类别。

到目前为止，我创建了一个新的类别属性，其中包含所有类别的下拉列表。如果设置了此属性，我想这样做。然后它将在此列表项上加载的类别将更改（下拉项的值是类别的 ID）。

我希望到目前为止我是有道理的。

我不知道如何解决这个问题。

希望有人能指出我正确的方向。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:46:55.530

我建议为类别模型使用一个新的布尔属性，该属性在导航栏中显示/隐藏类别。使用设置模型很容易添加。对于下拉列表，我的解决方案是使用 AJAX 调用获取特定类别的子树并更新下拉列表。而且我会添加一些子树缓存，以避免过多的数据库操作。不知道我是否完全理解你想要达到的目标；）

这样，客户端可以启用/禁用显示的类别并重新排列其他所有内容，将来不会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:07:34.523

上面的 Novalis 答案工作正常。但我最终解决了它有点不同。

我在创建类别页面中添加了一个新字段。该字段有一个所有类别的下拉列表。如果您创建一个类别并在下拉列表中选择某些内容。它将在下拉列表中加载所选类别的所有信息。

所以我为客户创建了三个类别。（特色类别 1,2 和 3）。在所有三个中，我在这个下拉列表中选择了一些东西。所以现在它显示：牛仔裤配件和包。

# python - Python - 你如何检测到一个模块已被自定义加载器加载？

> ID：13135280
> 
> 赞同：5
> 
> 时间：2012-10-30T08:36:02.903
> 
> 标签：python, python-3.3

在 Python-3.3 之前，我检测到一个模块是由带有`hasattr(mod, '__loader__')`. 在 Python-3.3 之后，所有模块都具有该`__loader__`属性，无论是否由自定义加载器加载。

Python-2.7、3.2：

```
>>> import xml
>>> hasattr(xml, '__loader__')
False 
```

Python-3.3：

```
>>> import xml
>>> hasattr(xml, '__loader__')
True
>>> xml.__loader__
<_frozen_importlib.SourceFileLoader object at ...> 
```

如何检测到模块是由自定义加载器加载的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:51:40.353

在 Python 3.3中，对属性是否存在的简单检查`__loader__`已不再足够。[PEP 302](http://www.python.org/dev/peps/pep-0302)要求所有加载程序将其信息存储在`__loader__`模块的属性中。

我会添加一个额外的检查`type(module.__loader__)`来查看模块是否加载了您正在搜索的自定义加载器（或加载器列表）：

```
>>> CUSTOM_LOADERS = [MyCustomLoader1, MyCustomLoader2]
>>> type(xml.__loader__) in CUSTOM_LOADERS
True 
```

从维护的角度来看，这可能很糟糕，因为您必须使自定义加载程序列表保持最新。另一种类似的方法可能是创建标准内置加载器列表并将检查更改为`not in`STANDARD_LOADERS。不过，这仍然存在维护问题。

# jquery - 为什么我无法检索链接的值？

> ID：13135281
> 
> 赞同：0
> 
> 时间：2012-10-30T08:36:03.943
> 
> 标签：jquery

```
<ul class="search_item" style="display: block;">
    <li><a href="#">test one</a></li>
    <li><a href="#">two</a></li>
    <li><a href="#">three</a></li>
</ul> 
```

代码：

```
$('.search_list li a').click(function(){
    var test = $(this).text();
    alert('test');
    return false;
}) 
```

当我单击链接时，为什么它没有提醒值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T08:37:31.907

首先，您的选择器似乎是错误的。的`ul`类名是“search_item”，但您选择的是`.search_list`.

其次，您只警告字符串文字。您需要删除引号以引用您在上一行声明的变量：

```
$('.search_item li a').click(function (){
    //     ^-------Wrong selector!
    var test = $(this).text();
    alert(test);
    //    ^--^-----No quotes!
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:38:23.303

为什么这里不简单得多：**Demo** [http://jsfiddle.net/wLhgY/1/](http://jsfiddle.net/wLhgY/1/)

希望它适合原因`:)`

**代码**

```
$(document).ready(function() {
    $('a').click(function() {
        var test = $(this).text();
        alert(test);
        return false;

    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T08:37:03.837

`alert(test)`， 不是`alert('test')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T08:37:42.150

伙计，`.search_list`您在上面定义的类在哪里`class="search_item"`！

你的警报也应该是`alert(test);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T08:38:02.740

尝试这个

```
$('.search_item li a').click(
function(){
   var test = $(this).text();
   alert(test);
    return false;
 }) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-30T08:38:29.030

尝试这个：

```
$('.search_item li a').click(
function(){
    var test = $(this).text();
   alert(test);
  return false;    
}); 
```

# c# - 开盖安装

> ID：13135285
> 
> 赞同：0
> 
> 时间：2012-10-30T08:36:35.163
> 
> 标签：c#, windows, dll, regsvr32, opencover

我正在尝试在 win xp 系统中使用 Opencover（用于 C# 包测试覆盖率），并且在尝试手动将 Opencover.profiler.dll 注册到 regsvr32.exe 时遇到一个奇怪的错误。我收到一条错误消息，告诉“加载库（“dll 名称”）失败”，错误级别为 9009。（我在尝试注册 dll 后做了回显 %ERRORLEVEL%）

谷歌搜索表明这个错误代码与 xcopy 有关。但我不确定为什么在注册 dll 时会发生这种情况。

我知道有一个 register:user 开关可以做到这一点。但是我试了上面的方法就知道为什么注册失败了。

我收到上述错误的 Opencover 版本是 2.0.802。在同一系统中，我可以毫无问题地注册 4.0.804 dll。并且版本 2.0.802 dll 可以与我的其他 XP 系统一起使用。

我可以知道这可能是什么问题吗？我希望这是做 Windows 而不是 Opencover

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:30:43.987

OpenCover 的早期版本依赖于“VC++ redistributables”，如果它们缺失，可能会导致您注册失败。

更高版本现在静态链接以避免这种情况。

[https://github.com/sawilde/opencover/issues/52](https://github.com/sawilde/opencover/issues/52)

# html5-canvas - HTML5 Canvas：在大于窗口的区域上绘图

> ID：13135288
> 
> 赞同：0
> 
> 时间：2012-10-30T08:36:48.420
> 
> 标签：html5-canvas

我有一个可以拖动的 HTML 画布上绘制的地图的全屏视口。

我尝试了两种实现拖动动画的方法。

首先，我在画布上设置窗口的宽度和高度，在用户拖动地图时为每个 mousemove 事件重新绘制，平移绘制的元素。但尤其是 firefox 非常生涩，FPS 很低，即使使用 requestAnimationFrame 也是如此。

相反，我尝试在用户拖动时移动画布元素本身。换句话说，在画布上绘制窗口宽度和高度的 3 倍，居中，允许在任何方向上完全拖动，并在每次用户完成拖动时重新绘制。这适用于 chrome，但 IE 和 firefox 只绘制了画布的左上象限。（所以只有当画布被拖到右下角时才能看到任何绘图。）

任何人都可以提出一种检测何时无法使用第二种方法的好方法吗？使用第二种方法，IE 和 Firefox 都`$('canvas').attr("width")`将画布宽度返回为窗口高度的 3 倍，所以这不是一个选项。

我能想到的唯一选择是在每个浏览器上手动测试第二种方法，并创建一个查找数组，以便代码知道何时回退到第一种方法。

也许有人知道处理这一切的更好方法？

谢谢

# oracle - PLSQL :NEW 和 :OLD

> ID：13135295
> 
> 赞同：36
> 
> 时间：2012-10-30T08:37:20.753
> 
> 标签：oracle, plsql, triggers

任何人都可以帮助我了解何时使用`:NEW`和`:OLD`在 PLSQL 块中，我发现很难理解它们的用法。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-30T08:49:26.760

您通常使用[触发器](https://docs.oracle.com/en/database/oracle/oracle-database/19/lnpls/plsql-triggers.html) 中的术语`:old`来引用旧值和`:new`引用新值。

这是上面链接到的 Oracle 文档中的一个示例

```
CREATE OR REPLACE TRIGGER Print_salary_changes
  BEFORE DELETE OR INSERT OR UPDATE ON Emp_tab
  FOR EACH ROW
WHEN (new.Empno > 0)
DECLARE
    sal_diff number;
BEGIN
    sal_diff  := :new.sal  - :old.sal;
    dbms_output.put('Old salary: ' || :old.sal);
    dbms_output.put('  New salary: ' || :new.sal);
    dbms_output.put_line('  Difference ' || sal_diff);
END; 
```

在此示例中，触发器触发`BEFORE DELETE OR INSERT OR UPDATE` `:old.sal`将包含触发器触发之前的薪水，`:new.sal`并将包含新值。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-05-10T12:27:04.590

:New 和 :Old 值可以在 DML 语句中区分。
**插入** -- **:Old** = NULL **:New** = 插入新值

**更新** - **：旧**= 更新语句之前表中存在的值 触发 **：新**= 给更新新值

**删除** -- **:Old** = 删除前的值 **:New** = NULL

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-06-01T13:33:59.973

:old 和 :new 是在使用行级触发器时引用访问行级数据的伪记录。

*   :old - 指旧值
*   :new - 指新值

对于以下操作，分别为旧值和新值：

1.  **INSERT** - :old.value= NULL, :new value= 后插入值
2.  **DELETE** - :old.value= 预删除值, :new value= null
3.  **UPDATE** - :old.value= 更新前值， :new value= 更新后值

例如：

```
CREATE OR REPLACE TRIGGER get_dept
  BEFORE DELETE OR INSERT OR UPDATE ON employees
  FOR EACH ROW
BEGIN
    DBMS_OUTPUT.PUT('Old Dept= ' || :OLD.dept|| ', ');
  DBMS_OUTPUT.PUT('New Dept= ' || :NEW.dept );
END; 
```

触发语句：

```
UPDATE employees
SET dept ='Accounts'
WHERE empno IN (101 ,105); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-10-22T09:56:20.307

:new 表示您尝试插入的新值 :old 表示数据库中的现有值

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-11T20:14:21.877

:old 是你的旧值 :new 是你的新值，

它在触发器中使用很多，例如 Creation_Date 和 Modified_By 字段

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-19T17:10:51.833

:old 和 :new 是在使用行级触发器时引用访问行级数据的伪记录。

•:old - 指旧值 •:new - 指新值

例如：

```
CREATE OR REPLACE TRIGGER mytrig BEFORE
  INSERT OR
  UPDATE
    ON mytab FOR EACH ROW
BEGIN
  IF INSERTING THEN
    SELECT trunc(sysdate), trunc(sysdate) INTO :new.created, :NEW.last_updated FROM DUAL;
  END IF; --INSERTING

  IF UPDATING THEN

      SELECT trunc(sysdate) INTO :NEW.last_updated FROM DUAL;

  END IF; --UPDATING

END; 
```

希望这能解释新旧概念。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-30T20:25:14.730

:new 是新值 - 触发触发器后，这是列的值 :old 是旧值 - 触发触发器后，此值替换为 :new value

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-09-30T16:08:19.117

New 和 Old 与触发器内的更新操作更相关，获取字段的旧值使用 old 和最近的值使用 new

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-03-13T15:03:06.703

以简单的方式，

当您将数据操作到表中时，触发器将触发。所以在触发调用时，你有两个价值。一个是指旧数据值，一个是您最近更新/删除/插入的新数据值。的情况下

插入-旧值将为空，新值包含一些值更新-旧值和新值都有一些值删除-旧值有值但新值不包含值。

因此，通过使用 :OLD 和 :NEW，您可以插入/更新要维护历史记录的其他表，或者基于 :OLD 或 :NEW 值，您可以插入/更新其他一些依赖表。

希望这可以帮助你..

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-06-17T06:11:59.533

这很简单

```
If Insert :old = NULL and :New = New Inserted Value
If Update  :Old = Value already in the table  :New = Updated Value in the Table
If Delete :Old = Value before deletion :New = NULL 
```

换句话说

1.  对于 INSERT 触发器，OLD 不包含任何值，而 NEW 包含新值。

2.  对于 UPDATE 触发器，OLD 包含旧值，NEW 包含新值。

3.  对于 DELETE 触发器，OLD 包含旧值，NEW 不包含任何值。

例子：

```
CREATE OR REPLACE TRIGGER update_name_view_trigger
INSTEAD OF UPDATE ON emp_locations
BEGIN
  UPDATE employees SET
    first_name = substr( :NEW.name, instr( :new.name, ',' )+2),
    last_name = substr( :NEW.name, 1, instr( :new.name, ',')-1)
  WHERE employee_id = :OLD.employee_id;
END; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-02-18T07:00:25.483

:OLD 和 :NEW 是 Record 类型的变量，并且在列中与触发触发器的表行相同。它们仅适用于行级触发器。由于触发器会在预定义的事件上自动触发，因此 :OLD 和 :NEW 也会自动获取它们的值。顾名思义， :OLD 将有完整的行值存在于表中（即在更新和删除的情况下具有现有值）并且 :NEW 将具有该行的新值（即在更新和删除的情况下具有行值）插入 ）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-06T05:37:59.657

```
A simple example that shows the use of old and new using triggers

CREATE TABLE emp_log(
emp_id NUMBER;
updated_by DATE,
new_salary VARCHAR2(15),
Action VARCHAR2(20));

CREATE OR REPLACE TRIGGER log_sal 
AFTER UPDATE OF sal on emp
FOR EACH ROW
BEGIN
INSERT INTO emp_log( emp_id, updated_by, new_salary, Action)
VALUES(:NEW.empno, USER, :NEW.sal, 'New salary');
END;
/ 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-12-04T22:53:54.413

您可以`:OLD`在更新之后/之前工作时使用 100% 的时间 `:NEW`是由（插入或更新）添加的新值的记录， `:OLD`用于旧值。没有它们，触发器是无用的

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-03-11T13:01:06.310

主要是这里指的词

:old 指触发触发前的旧值。:new 包含触发后触发的值。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-08-08T13:20:18.087

尝试进行任何数据库修改（更新）时，您可能会遇到此问题。当您插入（添加/新）数据`:New`时会出现。由于您没有任何现有数据，因此没有任何内容显示为`:Old`. 当您通过代码更新现有详细信息时，您将看到现有数据`:Old`和更新的详细信息`:New`。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-06T11:04:41.170

在触发器主体中，:OLD 和 :NEW 关键字使您能够访问受触发器影响的行中的列

:OLD 用于在更新或删除之前获取列的旧值。因此 OLD 仅与删除或更新语句触发器一起使用

:NEW 用于获取更新或刚刚插入数据库的值。因此 NEW 与唯一的更新和插入语句触发器一起使用

# c++ - 用函子错误排序

> ID：13135298
> 
> 赞同：1
> 
> 时间：2012-10-30T08:37:30.217
> 
> 标签：c++, sorting, functor

想知道是否有人可以帮助我。下面的代码给了我这个错误：致命错误C1903：无法从以前的错误中恢复；停止编译

```
template <class T>
class CompareList
{
public:

    CompareList( const long& lBlobFeature, const bool& bIsAscending )
{
    ...
}

bool operator()( T &lhs, T &rhs ) 
{

    double dFirstValue  = lhs.GetValue( ... );
    double dSecondValue = rhs.GetValue( ... );

    if( m_bIsAscending )   // Sort Ascending.
    {
        if( dFirstValue < dSecondValue )
            return true;
        else 
            return false;
    }
    else                   // Sort Descending.
    {
        if( dFirstValue > dSecondValue )
            return true;
        else 
            return false;
    }
}

};

CVParentList     *m_pList;
m_pList = new CVChildList[ nBlobs ]; //CVChildList is a derived class of CVParentList

std::sort( m_pList, m_pList+GetBlobsNumber(), CompareList <CVChildList> ( lBlobFeature, TRUE) ); 
```

**编辑：** 我真的很抱歉，实际上这是第一个错误：错误 C2664: 'bool CompareList ::operator ()(T &,T &)' : cannot convert parameter 1 from 'CVParentList' to 'CVChildList &'

“致命错误 C1903：无法从以前的错误中恢复；停止编译”之后出现，我只看到最后一条错误消息。非常抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:44:05.707

您可能需要将`const`引用传递给您的仿函数，因为比较不应该改变被比较的对象。编译器可能需要也可能不需要。将函子签名更改为

```
bool operator()(const  T& lhs, const T& rhs ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:17:36.830

您的比较器，或您的动态列表。需要改变。您可以丢弃比较器的模板部分，只需将其声明为 CVParentList 比较器：

```
class CompareList
{
public:
    CompareList(long lBlobFeature, bool isAscending);

    bool operator()(const CVParentList& left, const CVParentList& right) const
    {
        bool ans = false;
        // your comparison code goes here
        return ans;
    }
private:
    bool m_bIsAscending;
}; 
```

*并在没有*模板参数的情况下调用您的 std::sort<>

```
std::sort( m_pList, m_pList+GetBlobsNumber(), CompareList( lBlobFeature, TRUE) ); 
```

您还可以分配列表，对其进行排序，然后在完成后向下转换列表头：

```
CVParentList *m_pList = new CVChildList[ nBlobs ];
std::sort( (CVChildList *)m_pList, (CVChildList *)m_pList+GetBlobsNumber(), CompareList<CVChildList> ( lBlobFeature, TRUE) ); 
```

但我真的推荐你的情况下的第一个选项。

# python - python中的破坏性操作？

> ID：13135300
> 
> 赞同：3
> 
> 时间：2012-10-30T08:37:32.360
> 
> 标签：python

> **可能重复：**
> [如何在 python 中克隆列表？](https://stackoverflow.com/questions/2612802/how-to-clone-a-list-in-python)

我发现了一些有趣的结果

```
a = [1, 2] 
b=a 
b.append(3) 
print a, b

#=> [1,2,3] [1,2,3]

a = [1, 2] 
b=a 
b += [3] 
print a, b

#=> [1,2] [1,2,3] 
```

似乎某些操作更改了引用值，有些操作创建了一个新值。我记得在 Ruby 中，它可以`!`用来指示哪种方法具有这种破坏性。python是否有类似的方法让我区分它们？或者提供一个列表来显示所有最常用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:15:14.773

与这里的一些现有答案相反，真正的原因实际上恰恰相反。`+=`旨在成为在 Python中修改*self的就地运算符。*但有一些问题。

* * *

对于元组和字符串等不可变类型，`my_tuple += (1, )`相当于`my_tuple = my_tuple + (1, )`创建一个*新*对象然后将其分配给`my_tuple`：

```
>>> my_tuple = (1,2,3)
>>> t = my_tuple
>>> t += (2,)
>>> t
(1, 2, 3, 2)
>>> my_tuple
(1, 2, 3) 
```

这是因为元组和字符串等不可变类型没有实现`__iadd__`（`dir(tuple)`例如，您可以检查）。在这种情况下，它会退回使用[`__add__`](http://docs.python.org/2/reference/datamodel.html#object.__iadd__)。这将创建一个新对象并将其分配给原始变量。

* * *

但是，对于某些可变类型（例如列表和字典），`__iadd__`已实现，并将`+=`改为调用它：

```
>>> inspect.getdoc(list.__iadd__)
'x.__iadd__(y) <==> x+=y'

>>> a = [1,2,3]
>>> b = a
>>> b += [4]
>>> b
[1, 2, 3, 4]
>>> a
[1, 2, 3, 4] 
```

所以对于可变类型，这个就地操作被执行（通过修改*self*）并且[原始对象将被更新](http://docs.python.org/dev/library/operator.html#inplace-operators)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:45:36.270

没有命名约定。

但是，用途是修改对象的方法返回 None，而创建新对象的方法将返回所述对象。

# java - 如何找出一个实体是否在 JPA / Hibernate 中分离？

> ID：13135309
> 
> 赞同：48
> 
> 时间：2012-10-30T08:38:07.437
> 
> 标签：java, hibernate, jpa

有没有办法查询 JPA **EntityManager**是否已分离给定实体？[这篇 SO 帖子](https://stackoverflow.com/questions/2779857/how-to-know-if-a-detached-jpa-entity-has-already-been-persisted-or-not)正在讨论一个类似的问题，但并未指出一种在 JPA **EntityManager**中查询实体分离状态的方法。我更喜欢 JPA 方式，否则是特定于 Hibernate 的。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-30T14:30:32.050

要检查给定实体是否由当前管理，`PersistenceContext`您可以使用[`EntityManager#contains(Object entity)`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#contains%28java.lang.Object%29).

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-11-10T09:41:26.813

Piotr Nowicki 的回答提供了一种确定实体是否被*管理*的方法。要确定一个实体是否已*分离*，我们需要知道它是否以前被管理过（即来自数据库，例如通过持久化或从`find`操作中获取）。Hibernate 不提供“实体状态历史”，所以简短的回答是没有 100% 可靠的方法来做到这一点，但在大多数情况下，以下解决方法应该足够了：

```
public boolean isDetached(Entity entity) {
    return entity.id != null  // must not be transient
        && !em.contains(entity)  // must not be managed now
        && em.find(Entity.class, entity.id) != null;  // must not have been removed
} 
```

以上假设 ,是`em`实体类，并且有一个作为主键的公共字段。（它还假定在实体分离后的时间内，外部进程尚未从数据库表中删除具有此 ID 的行。）`EntityManager``Entity``id``@GeneratedValue`

# c# - Fluent NHibernate 和 HasMany 映射

> ID：13135310
> 
> 赞同：0
> 
> 时间：2012-10-30T08:38:08.777
> 
> 标签：c#, .net, fluent-nhibernate, mapping

我在使用流利的 nhibernate 和 HasMany 时遇到以下问题。我已经通过谷歌和 SO 搜索类似的问题，但我发现的任何解决方案都不能解决我的问题。

我映射了以下实体（为清楚起见，我省略了大多数属性）：

PaymentSchedule.cs

```
public class PaymentSchedule
{
    public virtual BinaryId Id { get; set; }

    public virtual IList<PaymentToSchedule> Payments { get; set; }
} 
```

PaymentToSchedule.cs

```
 public class PaymentToSchedule
  {
    public virtual BinaryId Id { get; set; }        

    public virtual PaymentSchedule PaymentSchedule { get; set; }
} 
```

映射文件

PaymentScheduleMap.cs

```
public class PaymentScheduleMap : ClassMap<PaymentSchedule>
{
    public PaymentScheduleMap()
    {
        Table("A_Payment_Schedule");
        Id(x => x.Id, "A_Payment_Schedule_Id").CrmId();
        HasMany<PaymentToSchedule>(x => x.Payments).Table("A_Payment_To_Schedule").KeyColumns.Add("A_Payment_Schedule_Id").Fetch.Select();
    }
} 
```

PaymentToScheduleMap.cs

```
public class PaymentToScheduleMap : ClassMap<PaymentToSchedule>
{
    public PaymentToScheduleMap()
    {
        Table("A_Payment_To_Schedule");
        Id(x => x.Id, "A_Payment_To_Schedule_Id").CrmId();            
        References(x => x.PaymentSchedule, "A_Payment_Schedule_Id");            
    }
} 
```

基本上我想在加载 PaymentSchedule 对象时获取 PaymentToSchedule 实体列表。现在，要做到这一点，我必须使用这样的查询：

```
var paymentSchedules = dataAccess.Session.QueryOver<PaymentSchedule>().List(); 
```

并针对每个付款时间表

```
 var paymentToSchedule = (from pts in dataAccess.Session.Query<PaymentToSchedule>()
                                                where pts.PaymentSchedule.Id == ps.Id).
                                                      ToList<PaymentToSchedule>(); 
```

这很好用，但是有没有办法在查询 PaymentSchedule 时获取 PaymentToSchedule 实体列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:25:12.100

```
var paymentSchedules = dataAccess.Session.QueryOver<PaymentSchedule>()
    .Fetch(x => x.Payments).Eager;
    .List();

// payments are already initialised, you can safly do
var allPayments = paymentSchedules.SelectMany(ps => ps.Payments).ToList(); 
```

# opencv - OpenCV 库中的 PCA 源代码

> ID：13135313
> 
> 赞同：2
> 
> 时间：2012-10-30T08:38:12.383
> 
> 标签：opencv, pca, eigenvector, eigenvalue

# 以下 API 函数是 OpenCV 库中 PCA 的源代码：

```
static CvStatus CV_STDCALL icvCalcEigenObjects_8u32fR( int nObjects, void* input, int objStep,
                        void* output, int eigStep, CvSize size,
                        int  ioFlags, int ioBufSize, void* userData,
                        CvTermCriteria* calcLimit, float* avg,
                        int    avgStep, float  *eigVals ) 
```

这个函数来自 Eigenobjects.cpp

# 而且我不明白以下代码：

```
 for( i = 0; i < m1; i++ )       /* e.o. annulation */
    {
        float *be = ((float **) output)[i];

        for( p = 0; p < eigSize.height; p++, be += eigStep )
            for( l = 0; l < eigSize.width; l++ )
                be[l] = 0.0f;
    }

    for( k = 0; k < nObjects; k++ )
    {
        uchar *bv = (ioFlags & CV_EIGOBJ_INPUT_CALLBACK) ? buf : ((uchar **) input)[k];

        if( ioFlags & CV_EIGOBJ_INPUT_CALLBACK )
        {
            CvCallback read_callback = ((CvInput *) & input)->callback;

            r = (CvStatus)read_callback( k, (void *) buf, userData );
            if( r )
            {
                cvFree( &ev );
                if( iev )
                    cvFree( &eigVals );
                if( buffer )
                    cvFree( &buffer );
                if( buf )
                    cvFree( &buf );
                return r;
            }
        }

        for( i = 0; i < m1; i++ )
        {
            float v = eigVals[i] * ev[i * nObjects + k];
            float *be = ((float **) output)[i];
            uchar *bu = bv;

            bf = avg;

            for( p = 0; p < size.height; p++, bu += objStep1,
                 bf += avgStep, be += eigStep1 )
            {
                for( l = 0; l < size.width - 3; l += 4 )
                {
                    float f = bf[l];
                    uchar u = bu[l];

                    be[l] += v * (u - f);
                    f = bf[l + 1];
                    u = bu[l + 1];
                    be[l + 1] += v * (u - f);
                    f = bf[l + 2];
                    u = bu[l + 2];
                    be[l + 2] += v * (u - f);
                    f = bf[l + 3];
                    u = bu[l + 3];
                    be[l + 3] += v * (u - f);
                }
                for( ; l < size.width; l++ )
                    be[l] += v * (bu[l] - bf[l]);
            }
        }                   /* i */
    }                       /* k */ 
```

我知道PCA是通过计算协方差矩阵及其特征值和特征向量，但是当部分函数调用内部函数icvCalcCovarMatrixEx_8u32fR()来计算特征值和特征向量，然后“上面代码的目的是什么在[其他部分]”？我猜 [else part] 是计算特征向量，但是函数 icvCalcCovarMatrixEx_8u32fR() 已经完成了，那么，有没有人可以帮我回答这段代码的目的是什么？谢谢！！！

# django - 姜戈！动态网址错误

> ID：13135320
> 
> 赞同：2
> 
> 时间：2012-10-30T08:38:25.663
> 
> 标签：django

我正在尝试制作指向下一页的超链接。但我得到错误。未找到带有参数“()”和关键字参数“{}”的“show_units_list”的反向操作。请检查我的代码。

视图.py

```
def units_list(request):
    units_list = unit.objects.all()
    return render_to_response(
        'portal/units.html',
        {'units': units_list},
        context_instance=RequestContext(request)
    ) 
```

网址.py

```
urlpatterns = patterns('',
    # Main web portal entrance.
    (r'^$', views.portal_main_page),
    url(r'^portal/', views.units_list, name='show_units_list'),
) 
```

html

```
<a href="?page={% url show_units_list %}"> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:59:28.173

units_list 是应用程序“门户”的一部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:52:15.400

你忘记了**app_name**，

```
url(r'^portal/', app_name.views.units_list, name='show_units_list'), 
```

# c# - 如何在调用时“连接到我的数据库”的类中创建一个方法？

> ID：13135321
> 
> 赞同：2
> 
> 时间：2012-10-30T08:38:25.267
> 
> 标签：c#, database, oop, class, oledb

有人可以告诉我如何在一个类中创建一个在调用时执行以下代码的方法？？？

```
OledbConnection con;
private void createcon()
{
    con = new OleDbConnection();

    string currentPath = Directory.GetCurrentDirectory();
    string DBPath = "";
    if (Directory.Exists(currentPath + @"\Database") == true)
    {
        DBPath = currentPath + @"\Database\SMAStaff.accdb";
    }
    else
    {
        for (int i = 0; i < 2; i++)
        {
            currentPath = currentPath.Remove(currentPath.LastIndexOf("\\"));
        }
        DBPath = currentPath + "\\Database\\SMAStaff.accdb";
    }
    con.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + DBPath + ";" +
    "Persist Security Info = False;Jet OLEDB:Database Password=123";
} 
```

这种方法存在于我项目的每一种形式中，所以我认为创建一个类会是一个更好的主意。我能够做到这一点，但是当我打电话时

```
con.open() 
```

没有任何反应，错误窗口中显示错误。当前上下文中不存在名称 con。我知道这意味着什么，但我不知道如何克服它。我试图让“骗局”公开和内部但仍然注意到发生...如果有人可以帮助我将不胜感激...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T08:46:08.493

您可以更改方法的返回类型，如果将其放在新类上，则必须将私有更改为公共：

```
public OledbConnection createcon()
{
   OledbConnection con = new OleDbConnection();

    string currentPath = Directory.GetCurrentDirectory();
    string DBPath = "";
    if (Directory.Exists(currentPath + @"\Database") == true)
    {
        DBPath = currentPath + @"\Database\SMAStaff.accdb";
    }
    else
    {
        for (int i = 0; i < 2; i++)
        {
            currentPath = currentPath.Remove(currentPath.LastIndexOf("\\"));
        }
        DBPath = currentPath + "\\Database\\SMAStaff.accdb";
    }
    con.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + DBPath + ";" +
    "Persist Security Info = False;Jet OLEDB:Database Password=123";

    return con;

} 
```

所以你可以这样使用：`classInstance.createcon().open();`

# c# - 使用 Active Directory 验证密码

> ID：13135324
> 
> 赞同：0
> 
> 时间：2012-10-30T08:38:35.020
> 
> 标签：c#, .net, active-directory

我想检查`login`和`password`匹配的广告信息。我尝试使用这段代码，但出现异常`FindOne`（用户名或密码错误......但它们是正确的）。我知道有`PrincipalContext`解决方案，但我需要能够设置服务器（生产，开发，...）

谢谢，

```
var Ad = new DirectoryEntry("LDAP://server1.domain.com", username, password);

var AdSearcher = new DirectorySearcher(Ad);
AdSearcher.Filter = String.Format("(anr={0})", username);
AdSearcher.PropertiesToLoad.Add("sAMAccountName");
AdSearcher.PropertiesToLoad.Add("displayName");

var AdSearcherResults = AdSearcher.FindOne();
var userFullName = AdSearcherResults.Properties["displayName"][0].ToString();
var userUid = AdSearcherResults.Properties["sAMAccountName"][0].ToString();

if (Membership.ValidateUser(username, userUid))
    return true;
return false; 
```

**Update1**我也试过这个：

```
using (var context = new PrincipalContext(ContextType.Domain, "server1.domain.com"))
{
    var isValid = context.ValidateCredentials(username, password);
} 
```

我的计算机没有连接到域上，但我认为应该可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:57:05.207

我的 ActiveDirectory 身份验证代码。

```
 public DirectoryEntry connDirectory(string usr, string pwd)
    {

        string ip = iniMan.IniRead("LDAP", "adres");
        DirectoryEntry oDE;
        oDE = new DirectoryEntry(ip, usr, pwd, AuthenticationTypes.Secure);
        return oDE;
    }
    public bool AD_Login(string kullanici_adi, string sifre)
    {
        try
        {
            DirectoryEntry entLogin = connDirectory(kullanici_adi, sifre);
            object loginObj = entLogin.NativeObject;
            return true;
        }
        catch (Exception ex)
        {
            return false;
        }

    }
    void TestMetod(){
     if(AD_Login("ozan","ozan"){
      //ok
     }
    } 
```

# mysql - sql比较几乎相等的记录

> ID：13135326
> 
> 赞同：1
> 
> 时间：2012-10-30T08:38:58.683
> 
> 标签：mysql, sql, match-against

我在数据库中有这样的记录：

```
Тормозной диск 
```

和

```
Диски тормозные LPR 
```

ETC

我试着比较

```
Тормозной диск 
```

和

```
Диски тормозные LPR 
```

这里

```
select * from (....) where match(`cross_value`) against ("*Тормозной диск*" in boolean mode) 
```

当然它给我它不包括它......

但是我怎么能告诉mysql，这是真的呢？那`Диски Тормозные`和`Тормозной Диск`包含=> 是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:41:00.013

如果订单无关紧要，请将您的条款列为强制性条款：

```
select * from (....)
where match(`cross_value`) against ('+Тормозн* +диск*' in boolean mode) 
```

# iphone - 在 UITableView 中的 UITextField 单元格之间切换

> ID：13135329
> 
> 赞同：0
> 
> 时间：2012-10-30T08:39:22.620
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uitableview

非常初学者的 obj-c 问题。

我将[http://uaimage.com/image/c6c9ca23](http://uaimage.com/image/c6c9ca23)`TableView`分为两个部分。在第一部分中，我有自定义单元格，其中包含's。我需要使用附加按钮“下一步”、“上一个”（在第一部分的文本字段之间切换）和“完成”（关闭键盘）为键盘实现输入附件视图[http://uaimage.com/image/62f08045](http://uaimage.com/image/62f08045) .`UITextField`

问题是：我需要什么来实现通过点击输入附件按钮在 TableView 第一部分的单元格中的文本字段之间切换的可能性？我是否需要标记单元格或文本字段，如果需要，当用户点击输入附件按钮时如何检索它们的值？或者这是一个更好的方法来做到这一点？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:06:01.510

我假设你有 3 个 UITextField 即 txt ,txt1, txt 2 和`tags`0 1 和 2; 现在添加 `UITableViewCell *cell`.h 文件。

**编辑：** 现在要从当前 tableView 单元格中获取所有 textField 的引用，请添加此委托方法：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    cell = nil;
    cell = (UITableViewCell *)[textField superView];
    return YES;
} 
```

现在在 Input Accessory prev 按钮操作中执行以下操作：

```
-(IBAction)previousBtn:(id)sender
{
   UITextField *txt = (UITextField*)[cell viewWithTag:0];
   UITextField *txt1 = (UITextField*)[cell viewWithTag:1];
   UITextField *txt2 = (UITextField*)[cell viewWithTag:2];
   if(txt.isFirstResponder)
   {
    [txt resignFirstResponder];
    [txt2 becomeFirstResponder];
   }
   else if(txt1.isFirstResponder)
   {
    [txt1 resignFirstResponder];
    [txt becomeFirstResponder];
   }
   else if(txt2.isFirstResponder)
   {
    [txt2 resignFirstResponder];
    [txt1 becomeFirstResponder];
   }
} 
```

现在在 Input Accessory 的下一个按钮操作中执行以下操作：

```
-(IBAction)nextBtn:(id)sender
{
   UITextField *txt = (UITextField*)[cell viewWithTag:0];
   UITextField *txt1 = (UITextField*)[cell viewWithTag:1];
   UITextField *txt2 = (UITextField*)[cell viewWithTag:2];

   if(txt.isFirstResponder)
   {
    [txt resignFirstResponder];
    [txt1 becomeFirstResponder];
   }
   else if(txt1.isFirstResponder)
   {
    [txt1 resignFirstResponder];
    [txt2 becomeFirstResponder];
   }
   else if(txt2.isFirstResponder)
   {
    [txt2 resignFirstResponder];
    [txt becomeFirstResponder];
   }
} 
```

# c++ - 执行我的代码的 .exe 结果时出错，但在调试器中执行时没有

> ID：13135330
> 
> 赞同：0
> 
> 时间：2012-10-30T08:39:23.213
> 
> 标签：c++, winforms, visual-studio-2008, executable

我对我的程序的结果有疑问。我有一个可以做很多事情的双 winforms 应用程序。其中之一是可视化我存储在给定目录中的几个 .txt 文件中的一堆数据。它需要一个，阅读它，关闭它，然后在阅读下一个之前将其可视化。

我的问题是，如果我只是执行程序，告诉它文件的目录并要求可视化，在读取 2 或 3 个文件后，它会因为内存访问冲突而崩溃。但是，如果我在从 Visual Studio 的调试器执行时重现了确切的步骤，则没有任何错误或警告，也没有任何内容，它就可以正常工作。

我知道调试器就是这样，一个调试器，并且事情在调试器中的执行方式不同，但我不知道为什么会发生这种情况。

知道为什么我的程序崩溃了吗？或者我应该怎么做才能避免崩溃？

我知道我的问题可能太模棱两可了，但是我没有其他方法可以向您展示我的问题，除非您希望我发布 20.000 行代码:)。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:47:14.237

崩溃后附加调试器（JIT 调试）。

[http://msdn.microsoft.com/en-us/library/5hs4b7a6(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/5hs4b7a6(v=vs.80).aspx)

# java - 将字符串写入文件的最有效方法

> ID：13135331
> 
> 赞同：5
> 
> 时间：2012-10-30T08:39:24.177
> 
> 标签：java, file, text, output

> **可能重复：**
> [如何使用 Java 将字符串保存到文本文件？](https://stackoverflow.com/questions/1053467/how-do-i-save-a-string-to-a-text-file-using-java)

我想将机器的读数添加到文件（Java）中。读数将采用我已格式化的字符串形式。该文件只是一个文本文件。目前我正在考虑 Filewriter/Buffered writer 这是正确的使用吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T08:46:03.487

使用[FileWriter](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)将完成您的工作。

```
BufferedWriter writer = new BufferedWriter( new FileWriter( yourfilename));
writer.write( yourstring);
// do stuff 
writer.close(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T08:42:41.237

如果您打算单独使用 JDK，您可能需要考虑`BufferedWriter`用 a包装您`PrintWriter`的

```
PrintWriter printWriter=new PrintWriter(bufferedWriter);
printWriter.println(yourString); 
```

printWriter 带有一个不错的`println`方法。

或者，如果您可以自由使用外部库，请尝试[FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html) `writeStringToFile`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T08:43:57.613

是的。使用`java.io.BufferedWriter`.

# delphi - 没有引用计数的接口

> ID：13135332
> 
> 赞同：6
> 
> 时间：2012-10-30T08:39:24.923
> 
> 标签：delphi

在阅读了 StackOverflow 上关于对接口使用自动引用计数的缺点的许多帖子后，我开始尝试手动引用计数每个接口实例。

在尝试了一个完整的下午后，我放弃了！

为什么我在调用 FreeAndNil(p) 时会出现访问冲突？

下面是我的简单单元的完整列表。

```
unit fMainForm;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm4 = class(TForm)
    btn1: TButton;
    procedure FormCreate(Sender: TObject);
    procedure btn1Click(Sender: TObject);
  end;

type
  IPersona = interface(IInterface)
  ['{44483AA7-2A22-41E6-BA98-F3380184ACD7}']
    function GetNome: string;
    procedure SetNome(const Value: string);
    property Nome: string read GetNome write SetNome;
  end;

type
  TPersona = class(TObject, IPersona)
  strict private
    FNome: string;
    function GetNome: string;
    procedure SetNome(const Value: string);
  protected
    function _AddRef: Integer; stdcall;
    function _Release: Integer; stdcall;
    function QueryInterface(const IID: TGUID; out Obj): HResult; stdcall;
  public
    constructor Create(const ANome: string);
    destructor Destroy; override;
  end;

var
  Form4: TForm4;

implementation

{$R *.dfm}

procedure TForm4.FormCreate(Sender: TObject);
begin
  ReportMemoryLeaksOnShutdown := True;
end;

procedure TForm4.btn1Click(Sender: TObject);
var
  p: IPersona;
begin
  p := TPersona.Create('Fabio');
  try
    ShowMessage(p.Nome);
  finally
    FreeAndNil(p);
  end;
end;

constructor TPersona.Create(const ANome: string);
begin
  inherited Create;
  FNome := ANome;
end;

destructor TPersona.Destroy;
begin
  inherited Destroy;
end;

function TPersona._AddRef: Integer;
begin
  Result := -1
end;

function TPersona._Release: Integer;
begin
  Result := -1
end;

function TPersona.QueryInterface(const IID: TGUID; out Obj): HResult;
begin
  if GetInterface(IID, Obj) then
    Result := S_OK
  else
    Result := E_NOINTERFACE;
end;

function TPersona.GetNome: string;
begin
  Result := FNome;
end;

procedure TPersona.SetNome(const Value: string);
begin
  FNome := Value;
end;

end. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T08:59:19.773

发生访问冲突是因为`FreeAndNil`接收到预期为对象引用的无类型 var 参数。您正在传递一个不符合要求的接口引用。不幸的是，您只能在运行时发现。在我看来，这是反对使用`FreeAndNil`.

您的引用计数通过接口引用计数机制禁用生命周期管理。为了销毁一个对象，你需要调用它的析构函数。为了做到这一点，您必须有权访问析构函数。您的界面不公开析构函数（也不应该公开）。因此，我们可以推断，为了销毁对象，您需要有一个对象引用。

以下是一些选项：

```
var
  obj: TPersona;
  intf: IPersona;
....
obj := TPersona.Create('Fabio');
try
  intf := obj;
  //do stuff with intf
finally
  obj.Free;
  // or FreeAndNil(obj) if you prefer
end; 
```

或者你可以这样做

```
var
  intf: IPersona;
....
intf := TPersona.Create('Fabio');
try
  //do stuff with intf
finally
  (intf as TObject).Free;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:48:42.940

您不能`FreeAndNil()`与接口引用一起使用，只能与对象引用一起使用。如果您启用了接口的引用计数，您只需分配`nil`给接口引用（或让它超出范围）以正确释放对象，例如：

```
type
  TPersona = class(TInterfacedObject, IPersona)
  strict private
    FNome: string;
    function GetNome: string;
    procedure SetNome(const Value: string);
  public
    constructor Create(const ANome: string);
    destructor Destroy; override;
  end;

procedure TForm4.btn1Click(Sender: TObject);
var
  p: IPersona;
begin
  p := TPersona.Create('Fabio');
  try
    ShowMessage(p.Nome);
  finally
    p := nil;
  end;
end; 
```

但是由于您已禁用接口上的引用计数，因此您需要在代码中重新使用普通对象引用变量，例如：

```
procedure TForm4.btn1Click(Sender: TObject);
var
  p: TPersona;
  intf: IPersona;
begin
  p := TPersona.Create('Fabio');
  try
    if Supports(p, IPersona, intf) then
      ShowMessage(intf.Nome);
  finally
    FreeAndNil(p);
  end;
end; 
```

# parameters - 在带有瓷砖的jsp页面中设置参数

> ID：13135334
> 
> 赞同：2
> 
> 时间：2012-10-30T08:39:26.937
> 
> 标签：parameters, jstl, jsp-tags, tiles

我所拥有的是：

```
<definition name="error" extends="baseLayout">
<..../>
<put-attribute name="login" value="login.jsp"/>
</definition> 
```

在 login.jsp 中有一个变量；

```
<body onload='<c:if test="${not empty param.login_erro}">Username don't match </c:if>
...</body> 
```

当我在控制器 /error.htm 登录时出错时，我调用此图块如何将变量 login_error 设置为 1 以显示消息（错误登录）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:50:44.787

任何`EL`正在查看的人`${param.something}`都只能找到`parameter`它是否符合原始请求。

在您的情况下，您`controller`需要`attribute`在请求中添加一个，例如：

```
if( userLoginFailed ) {
  request.setAttribute("login_erro", "1");
} 
```

...然后您的 jsp 将检查`${not empty login_erro}`.

`${foo}`会找到一个`attribute`名为**foo**

`${param.foo}`会找到一个`parameter`名为**foo**

`${foo.bar}`将找到一个`attribute`名为**foo**并调用它的`.getBar()`方法

# php - 从 mysql 数据库中检索图像的不同方式

> ID：13135337
> 
> 赞同：2
> 
> 时间：2012-10-30T08:39:57.560
> 
> 标签：php, mysql, database

我已经编写了用于将图像存储在 mysql 数据库中的 php 代码，并且我也知道如何检索它们，但是有没有一种方法可以通过 URL 检索它们，就像我们访问 facebook 图像的方式一样。我的意思是提供 mysql 数据库的 URL，然后以某种方式获取这些图像。这甚至可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:51:45.063

上传您的图片

```
$imageName = "123.jpg";
$saveImg = move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $imageName; 
```

然后运行数据库查询以设置用户图像 URL ("upload/123.jpg")

```
INSERT INTO images (imageUrl) VALUES ('upload/123.jpg'); 
```

要显示图像，请运行 SELECT 查询，然后使用类似于：

```
<img src="<?php echo $row['imageUrl']; ?>" alt="my image"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:46:04.720

是的，这是可能的——您可以将图像作为 blob 存储在数据库中。不幸的是，MySQL 有一些限制。例如，blob 的默认缓冲区大小仅为 1 MB。它可以增加，但可能需要调整服务器配置。

PHP 可以从 db 中读取该 blob，使用适当的 MIME 类型对其进行格式化并将其发送到浏览器。

# audio - 在 jPlayer 中循环播放列表时如何消除延迟？

> ID：13135346
> 
> 赞同：1
> 
> 时间：2012-10-30T08:40:37.890
> 
> 标签：audio, loops, jplayer

我的循环播放列表功能适用于：

```
{
swfPath: "js",
supplied: "oga, mp3",
wmode: "window",
loop: "true",
}); 
```

但是，播放列表结束和重新开始之间有几秒钟的间隔。

播放列表只包含一个文件，所以我想要一个“无缝”的音效，但目前播放列表结束和重新开始之间存在间隙。

有谁知道是否可以选择消除此差距或以某种方式对其进行管理以使其看起来没有差距？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:21:31.397

来自开发商：

“好吧，如果你只播放一个媒体，使用播放列表是一种冗长的方式......引入了一些通常不会出现的效果。延迟是由于播放列表假设下一首曲目与上一首曲目不同......所以它每次总是重新设置媒体，这将是延迟的来源。

更像一个单人玩家，延迟会小得多。总会有一个小的延迟，但比你所经历的要好得多。

例如，这里的这个演示更适合：http: [//jplayer.org/latest/demo-01/](http://jplayer.org/latest/demo-01/) "

# sql - SQL 语句返回错误值（TOP n ... ORDER BY）

> ID：13135347
> 
> 赞同：1
> 
> 时间：2012-10-30T08:40:40.780
> 
> 标签：sql, ms-access, jet

我尝试使用以下查询获取表的最后一行和下一行：

```
SELECT TOP 1 Nummer FROM Empfänger WHERE Nummer < 4748 ORDER BY Nummer DESC
UNION 
SELECT TOP 2 Nummer FROM Empfänger WHERE Nummer >= 4748 ORDER BY Nummer ASC; 
```

主键“Nummer”是唯一的并且是自增的，所以有

```
4747, 4748, 4749 
```

它应该恕我直言返回上述数字，而是返回：

```
4747, 4798, 4799 
```

当我使用 Access 打开数据库并将过滤器设置为“之间”时，值会正确显示。

我将声明更改为：

```
SELECT DISTINCT TOP 1 Nummer FROM Empfänger WHERE Nummer < 4748 ORDER BY Nummer DESC
UNION 
SELECT DISTINCT Nummer FROM Empfänger WHERE Nummer = 4748 
UNION 
SELECT DISTINCT TOP 1 Nummer FROM Empfänger WHERE Nummer > 4748 ORDER BY Nummer ASC; 
```

这几乎完美无缺。

```
4747, 4748, 4750 
```

当我在单个查询中编写每个语句时，它会返回正确的值......

```
SELECT DISTINCT TOP 1 Nummer FROM Empfänger WHERE Nummer < 4748 ORDER BY Nummer DESC
= 4747
SELECT DISTINCT Nummer FROM Empfänger WHERE Nummer = 4748 
= 4748
SELECT DISTINCT TOP 1 Nummer FROM Empfänger WHERE Nummer > 4748 ORDER BY Nummer ASC;
= 4749 
```

\

```
SELECT DISTINCT TOP 1 Nummer FROM Empfänger WHERE Nummer < 4750 ORDER BY Nummer DESC
UNION 
SELECT DISTINCT Nummer FROM Empfänger WHERE Nummer = 4750 
UNION 
SELECT DISTINCT TOP 1 Nummer FROM Empfänger WHERE Nummer > 4750 ORDER BY Nummer ASC; 
```

我再次检查了一下，突然上面显示的查询起作用了。感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:00:24.667

Access 使用 JET 引擎。似乎ORDER BY 是在 TOP 子句之后应用[的](http://www.mrexcel.com/forum/microsoft-access/496073-access-sql-top-n-order-issue.html)*，*您需要使用表单的子查询

```
select top n ...
from (
  select ...
  from table
  where ...
  order by ...
) 
```

让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:41:23.190

是的，Access 在这方面不符合 ANSI-92，而 SQL-Server 是，并且可以使 SQL-Server 模仿 Access 的不符合行为作为一个选项。我在可以选择将 id 字段（即 PK）添加到 ORDER BY 并因此解决该问题的情况下发现了这一点。只要您的解决方案导致多字段 ORDER BY 中的至少一个字段的值在连续记录中不同，您的解决方法将遵循 TOP 参数。如果您的密钥在至少一个字段上没有中断，那么您可以认为 SELECT TOP 以这种令人惊讶的业余方式强制执行：

“返回前 n 条记录并查看第 n 条记录的 ORDER BY 字段的值，并包括具有该（那些）值的所有其他记录”。

# enum-class - 如何在枚举中定义标点符号？

> ID：13135351
> 
> 赞同：1
> 
> 时间：2012-10-30T08:41:07.390
> 
> 标签：enum-class

我使用斯坦福 POSTagger，我想将枚举定义为：

```
public enum POSType {
    CC("Conjunction"),
    CD("Number"),
        ! ("Punctuation")
         ......
} 
```

如何将标点符号定义为枚举变量？

# java - Hibernate Criteria API - 如何获取对象属性的列表

> ID：13135354
> 
> 赞同：2
> 
> 时间：2012-10-30T08:41:13.467
> 
> 标签：java, hibernate, hibernate-criteria

我有两节课

```
class House {
    String id
    Long size
    Resident resident
}

class Resident {
    String id
    String name
} 
```

我想要的是一份居民名单，但我需要对房子进行一些限制。Eq 大小 eq > 20 并将结果限制为 10

居民没有提到房子。

我真的不知道该怎么做。

我试过这个：

```
Criteria crit = session.createCriteria(House.class);
crit.add(Expression.ge("size", 20));
crit.setMaxResults(10);
crit.addOrder(Order.desc("size"));
return crit.list(); 
```

但我不知道如何连接到 Resident

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:20:12.920

试试下面的代码：

```
Criteria crit = session.createCriteria(House.class);
crit.add(Expression.ge("size", 20));
crit.setMaxResults(10);
crit.addOrder(Order.desc("size"));
crit.setFetchMode("resident", FetchMode.JOIN);
crit.setProjection(Projections.property("resident"));
return crit.list(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:52:55.943

“居民没有对房子的引用” - 当没有关联时，AFAIK 休眠标准无法对给定条目的另一个条目创建限制。

所以你不能在那里创建一个`Criteria`for`Resident.class`和 add `Restriction`s。

您可以尝试`Criteria`为您的 s 创建 a `House.class`，添加所需`Restriction`的 s，然后设置 a`Projection`以获取您的`Resident.class`实例。

你试过什么了？

# jquery - 使用jquery将鼠标悬停在链接上时如何缩小菜单

> ID：13135356
> 
> 赞同：1
> 
> 时间：2012-10-30T08:41:29.343
> 
> 标签：jquery, html, css

下面是我使用的代码，当我将鼠标悬停在新闻、照片等标签上时，我想缩小导航栏中的标签。最好的例子是访问 apple.com，当你点击搜索栏时，其他标签会缩小。如何实现相同？将鼠标悬停在选项卡上时，其他选项卡应缩小。

[http://jsfiddle.net/ATPRu/](http://jsfiddle.net/ATPRu/)

HTML：

```
<div id="wrapper">
    <nav id="mainnav">
        <ol>
            <li class="home"><a href="http://www.domain.com"></a></li>
            <li class="news"><a href="http://www.domain.com/p/">News</a></li>
            <li class="photos"><a href="http://www.domain.com/channels/s/">Photos</a> </li>
            <li class="biography"><a href="http://www.domain.com/e/">Biography</a></li>
        </ol>
    </nav>
</div> 
```

CSS：

```
div#wrapper{
width:990px;
height:auto;
margin:0 auto;

font:15px Arial,Verdana,Helvetica,sans-serif;

}
div#wrapper #mainnav{
width:100%;
height:40px;

border-bottom:1px solid #c4c4c4;
float:left;
clear:both;
background-color: #5b5b5b;
background-image: -moz-linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f); 
background-image: -webkit-linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f); 
background-image: -o-linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f);
background-image: -ms-linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f);
background-image: linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f);
}

div#wrapper #mainnav ol{
list-style:none;
margin:0px; padding:0;
}
div#wrapper #mainnav li{
float:left;
}

div#wrapper #mainnav li.home{
background: #6db3f2; /* Old browsers */
background: -moz-linear-gradient(top,  #6db3f2 0%, #54a3ee 40%, #3690f0 56%, #1e69de 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6db3f2),  color-stop(40%,#54a3ee), color-stop(56%,#3690f0), color-stop(100%,#1e69de)); /*  Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* IE10+ */
background: linear-gradient(to bottom,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%);    /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6db3f2', endColorstr='#1e69de',GradientType=0 ); /* IE6-9 */

float:left;
width:48px;
height:40px;
position:relative;
margin-top:0px ; padding:0;
}
div#wrapper #mainnav li.home a{
background:url(home.png) 0px 0px no-repeat; 
margin-left:0px;
}

div#wrapper #mainnav li.home:hover{
background: #6db3f2; /* Old browsers */
background: -moz-linear-gradient(top,  #6db3f2 0%, #54a3ee 40%, #3690f0 56%, #1e69de 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6db3f2), color-stop(40%,#54a3ee), color-stop(56%,#3690f0), color-stop(100%,#1e69de)); /*  Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* IE10+ */
background: linear-gradient(to bottom,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6db3f2', endColorstr='#1e69de',GradientType=0 ); /* IE6-9 */
float:left;
width:48px;
height:40px;
position:relative;
margin-top:0px ; padding:0;
}
div#wrapper #mainnav li.home a:hover{
background:url(home.png) 0px 0px no-repeat; 
margin-left:0px;

}

div#wrapper #mainnav li.news:hover{
cursor:pointer;
border:1px solid #b30808; background-color: #e40a0a;
 background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#e40a0a), color-stop(100%, #9f0202));
 background-image: -webkit-linear-gradient(top, #e40a0a, #9f0202);
background-image: -moz-linear-gradient(top, #e40a0a, #9f0202);
background-image: -ms-linear-gradient(top, #e40a0a, #9f0202);
background-image: -o-linear-gradient(top, #e40a0a, #9f0202);
background-image: linear-gradient(top, #e40a0a, #9f0202);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#e40a0a, endColorstr=#9f0202); 
 }
 div#wrapper #mainnav li.news a:hover{
background:url(awatch_icon.png) 5px 6px no-repeat; 
padding-top:9px;
text-shadow:1px 1px 1px blue;border-left:1px solid #000;
}

div#wrapper #mainnav li.photos:hover{
background: #6db3f2; /* Old browsers */
background: -moz-linear-gradient(top,  #6db3f2 0%, #54a3ee 40%, #3690f0 56%, #1e69de 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6db3f2), color- stop(40%,#54a3ee), color-stop(56%,#3690f0), color-stop(100%,#1e69de)); /* Chrome,Safari4+  */
background: -webkit-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* IE10+ */
background: linear-gradient(to bottom,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6db3f2', endColorstr='#1e69de',GradientType=0 ); /* IE6-9 */
}
div#wrapper #mainnav li.photos a:hover{
background:url(domain_icon.png) 5px 6px no-repeat;padding-top:10px;text-shadow:1px 1px 1px blue;}

div#wrapper #mainnav li.biography:hover{
background-color: #ffaf46;
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffaf46), color-stop(100%, #e78404));
background-image: -webkit-linear-gradient(top, #ffaf46, #e78404);
background-image: -moz-linear-gradient(top, #ffaf46, #e78404);
background-image: -ms-linear-gradient(top, #ffaf46, #e78404);
background-image: -o-linear-gradient(top, #ffaf46, #e78404);
background-image: linear-gradient(top, #ffaf46, #e78404);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#ffaf46, endColorstr=#e78404);
}
div#wrapper #mainnav li.biography a:hover{
 background:url(icon.png) 5px 6px no-repeat;padding-top:10px;text-shadow:1px 1px 1px blue;}

div#wrapper #mainnav li{background:url(mainnav_sep.jpg) no-repeat left top;float:left;}
div#wrapper #mainnav li a{display:block;padding-top:11px;color:#fff;margin:0  10px;cursor:pointer;height:27px;text-shadow:1px 1px 1px #000;}
div#wrapper #mainnav li a:link, div#wrapper #mainnav li a:visited{text-decoration:none;}
div#wrapper #mainnav li a:hover,div#wrapper #mainnav li a:active, div#wrapper #mainnav li a:focus {
width:120px;height:29px;margin:0px 0px 0px 0px ;text-indent:35px;text- decoration:none;color:#fff;text-shadow:1px 1px 1px #000;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:45:32.590

如果你想像苹果一样，我的意思是慢动作，你可以使用 CSS3 而不是 jQuery

使用 CSS3 过渡属性

```
transition: width 2s;
-moz-transition: width 2s; /* Firefox 4 */
-webkit-transition: width 2s; /* Safari and Chrome */
-o-transition: width 2s; /* Opera */ 
```

或者，如果您需要它有点像 apple.com，您可以查看[这个](http://demo.marcofolio.net/apple_menu/)或[这个](http://www.kriesi.at/archives/apple-menu-improved-with-jquery)

[演示](http://www.kriesi.at/wp-content/extra_data/kwicks_tutorial/kwicks_4.html)

# android - 如何在 Android 中进行排序和分组？

> ID：13135359
> 
> 赞同：1
> 
> 时间：2012-10-30T08:41:51.173
> 
> 标签：android, listview, sorting

我有 ArrayList，我想在 Android 中按标题对所有数据进行排序和分组。在Android中怎么可能？请帮助我。在我下面从所有者那里设置标题我和乔经理从所有者那里并在列表视图中设置标题。如何在 Android 中做到这一点？

![在此处输入图像描述](../Images/f96d147b701d20c56e5856b9946d0bfe.png)

我的代码在下面::

```
public class Request extends Activity {
    private String assosiatetoken;
    private ArrayList<All_Request_data_dto> list = new ArrayList<All_Request_data_dto>();
    ListView lv;
    Button back;
    private Spinner spndata;
    String[] reqspinner = { "Request Date", "Last Update", "Type", "Owner",
            "State" };
    ArrayAdapter<String> adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.request);
        assosiatetoken = MyApplication.getToken();

        new doinbackground(this).execute();

        back = (Button) findViewById(R.id.button1);
        spndata = (Spinner) findViewById(R.id.list_all_quize_req);
        adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, reqspinner);
        spndata.setAdapter(adapter);
        lv = (ListView) findViewById(R.id.listrequestdata);
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> a, View v, int position,
                    long id) {
                Intent edit = new Intent(Request.this, Request_webview.class);
                // edit.putExtra("Cat_url", url_link);

                startActivity(edit);
            }
        });

        spndata.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {

                switch (position) {

                case 0:
                    list = DBAdpter.requestUserData(assosiatetoken);
                    Collections.sort(list, byDate1);
                    // Collections.reverse(list);
                    for (int i = 0; i < list.size(); i++) {

                        if (list.get(i).submitDate != null) {
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));
                        }
                    }
                    break;
                case 1:
                    list = DBAdpter.requestUserData(assosiatetoken);
                    Collections.sort(list, byDate);
                    for (int i = 0; i < list.size(); i++) {
                        if (list.get(i).lastModifiedDate != null) {
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));
                        }
                    }
                    break;
                case 2:
                    list = DBAdpter.requestUserData(assosiatetoken);
                    Collections.sort(list, byDate3);
                    // Collections.reverse(list);
                    for (int i = 0; i < list.size(); i++) {
                        if (list.get(i).state != null) {
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));
                        }
                    }
                    break;

                case 3:
                    list = DBAdpter.requestUserData(assosiatetoken);
                    for (int i = 0; i < list.size(); i++) {

                        lv.setAdapter(new MyListAdapter(
                                getApplicationContext(), list));

                    }
                    break;

                default:
                    break;
                }

            }

            public void onNothingSelected(AdapterView<?> arg0) {
            }

        });
        back.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                finish();
            }
        });

    }

    static final Comparator<All_Request_data_dto> byDate = new Comparator<All_Request_data_dto>() {
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");

        public int compare(All_Request_data_dto ord1, All_Request_data_dto ord2) {
            java.util.Date d1 = null;
            java.util.Date d2 = null;
            try {
                d1 = sdf.parse(ord1.lastModifiedDate);
                d2 = sdf.parse(ord2.lastModifiedDate);

            } catch (java.text.ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return (d1.getTime() > d2.getTime() ? -1 : 1); // descending
            // return (d1.getTime() > d2.getTime() ? 1 : -1); //ascending
        }
    };
    static final Comparator<All_Request_data_dto> byDate1 = new Comparator<All_Request_data_dto>() {
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");

        public int compare(All_Request_data_dto ord1, All_Request_data_dto ord2) {
            java.util.Date d1 = null;
            java.util.Date d2 = null;
            try {
                d1 = sdf.parse(ord1.submitDate);
                d2 = sdf.parse(ord2.submitDate);

            } catch (java.text.ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return (d1.getTime() > d2.getTime() ? -1 : 1); // descending
            // return (d1.getTime() > d2.getTime() ? 1 : -1); //ascending
        }
    };
    static final Comparator<All_Request_data_dto> byDate3 = new Comparator<All_Request_data_dto>() {
        public int compare(All_Request_data_dto ord1, All_Request_data_dto ord2) {
            String d1 = null;
            String d2 = null;
            d1 = ord1.state;
            d2 = ord2.state;
            return d1.compareToIgnoreCase(d2);
        }
    };

    class doinbackground extends AsyncTask<Void, Void, Void> {
        ProgressDialog pd;
        private Context ctx;

        public doinbackground(Context c) {
            ctx = c;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pd = new ProgressDialog(ctx);
            pd.setMessage("Loading...");
            pd.show();

        }

        @Override
        protected Void doInBackground(Void... Params) {

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            pd.cancel();

        }

    }

    public class MyListAdapter extends BaseAdapter {

        private ArrayList<All_Request_data_dto> list;

        public MyListAdapter(Context mContext,
                ArrayList<All_Request_data_dto> list) {
            this.list = list;
        }

        public int getCount() {
            return list.size();

        }

        public All_Request_data_dto getItem(int position) {
            return list.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // if (convertView == null) {
            LayoutInflater inflator = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            convertView = inflator.inflate(R.layout.custom_request_data, null);
            TextView req_id = (TextView) convertView.findViewById(R.id.req_txt);
            TextView date = (TextView) convertView.findViewById(R.id.date_txt);
            TextView owner = (TextView) convertView
                    .findViewById(R.id.owner_txt);
            TextView state = (TextView) convertView
                    .findViewById(R.id.state_txt);

            req_id.setText(list.get(position).requestId + " - "
                    + list.get(position).title);
            date.setText(list.get(position).lastModifiedDate + " - "
                    + list.get(position).submitDate);
            owner.setText(list.get(position).owner);
            state.setText(list.get(position).state);

            // }
            return convertView;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:36:35.633

您可以为每个类别制作单独的列表，并为这些列表制作一个列表，并为类别名称制作另一个列表，而不是您可以使用 ExpandableListView 和 Adapter ，如下所示。在此示例中，它使用 2d 数组，您可以将其替换为您的列表。

```
public class ExpAdapter extends BaseExpandableListAdapter {
private Context myContext;
String[][] arrChildelements;
String[] arrGroup;

public ExpAdapter(Context context, String[] arrGroup, String[][] arrChild) {
    myContext = context;
    this.arrGroup = arrGroup;
    this.arrChildelements = arrChild;
}

public Object getChild(int groupPosition, int childPosition) {
    return null;
}

public long getChildId(int groupPosition, int childPosition) {
    return 0;
}

public int getChildrenCount(int groupPosition) {

    return arrChildelements[groupPosition].length;
}

public Object getGroup(int groupPosition) {
    return null;
}

public int getGroupCount() {
    return arrGroup.length;
}

public long getGroupId(int groupPosition) {
    return 0;
}

public boolean hasStableIds() {
    return false;
}

public boolean isChildSelectable(int groupPosition, int childPosition) {
    return true;
}

public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) myContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.group_row, null);
    }

    TextView tvGroupName = (TextView) convertView
            .findViewById(R.id.tvGroupName);
    tvGroupName.setText(arrGroup[groupPosition]);

    return convertView;
}

public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) myContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.child_row, null);
    }

    TextView tvPlayerName = (TextView) convertView
            .findViewById(R.id.tvPlayerName);
    tvPlayerName.setText(arrChildelements[groupPosition][childPosition]);

    return convertView;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:49:18.800

你必须写下你自己的`Adapter`。例如，您可以扩展`BaseAdapter`并覆盖以下方法：

*   `getCount()`它会返回数据集中的项目数
*   `getView()`它会扩大你的视野
*   `getItemViewType()`获取将由 getView() （示例中的组元素 Baroque/Classic）或“普通”项创建的视图类型。
*   `getViewTypeCount ()`您拥有的视图类型的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:53:31.313

我不确定，但如果你试图缩短你的列表，那么试试这个字符串

```
public void sort(List<arraylist> itemLocationList) {
    if(itemLocationList!=null)
    {
        Collections.sort(itemLocationList, new Comparator<arraylist>() {
            @Override
            public int compare(list o1, list o2) {
                return o1.res_name.compareToIgnoreCase(o2.res_name);
            }           
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T05:21:57.160

我的问题得到了解决。谢谢Jignesh！！！

```
public class Request extends Activity {
    private String assosiatetoken;
    private ArrayList<All_Request_data_dto> list = new ArrayList<All_Request_data_dto>();
    ListView lv;
    ExpandableListView exlistView;
    ArrayList<String> catOwner = new ArrayList<String>();
    ArrayList<String> uniCatOner = new ArrayList<String>();
    ArrayList<ArrayList<All_Request_data_dto>> masterOwner = new ArrayList<ArrayList<All_Request_data_dto>>();
    ArrayList<String> catState = new ArrayList<String>();
    ArrayList<String> uniCatState = new ArrayList<String>();
    ArrayList<ArrayList<All_Request_data_dto>> masterState = new ArrayList<ArrayList<All_Request_data_dto>>();
    Button back;
    private Spinner spndata;
    String[] reqspinner = { "Request Date", "Last Update", "Type", "Owner",
            "State" };

    ArrayAdapter<String> adapter;
    ExpAdapter expAdapter;

    private void setOwner() {
        for (int i = 0; i < list.size(); i++) {
            catOwner.add(list.get(i).owner);
        }

        HashSet<String> hasSetstate = new HashSet<String>(catOwner);
        uniCatOner = new ArrayList<String>(hasSetstate);

        for (String str : uniCatOner) {
            ArrayList<All_Request_data_dto> cats = new ArrayList<All_Request_data_dto>();
            masterOwner.add(cats);
        }

        for (int i = 0; i < list.size(); i++) {
            for (int j = 0; j < uniCatOner.size(); j++) {
                if (uniCatOner.get(j).equals(list.get(i).owner)) {
                    masterOwner.get(j).add(list.get(i));
                }
            }
        }
    }

    private void setState() {
        for (int i = 0; i < list.size(); i++) {
            catState.add(list.get(i).state);
        }

        HashSet<String> hasSetstate = new HashSet<String>(catState);
        uniCatState = new ArrayList<String>(hasSetstate);

        for (String str1 : uniCatState) {
            ArrayList<All_Request_data_dto> cats = new ArrayList<All_Request_data_dto>();
            masterState.add(cats);
        }

        for (int i = 0; i < list.size(); i++) {
            for (int j = 0; j < uniCatState.size(); j++) {
                if (uniCatState.get(j).equals(list.get(i).state)) {
                    masterState.get(j).add(list.get(i));
                }
            }
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.request);
        assosiatetoken = MyApplication.getToken();
        list = DBAdpter.requestUserData(assosiatetoken);
        exlistView = (ExpandableListView) findViewById(R.id.ExpList);

        setOwner();
        setState();

        new doinbackground(this).execute();

        back = (Button) findViewById(R.id.button1);
        spndata = (Spinner) findViewById(R.id.list_all_quize_req);
        adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, reqspinner);
        spndata.setAdapter(adapter);
        lv = (ListView) findViewById(R.id.listrequestdata);
        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> a, View v, int position,
                    long id) {
                Intent edit = new Intent(Request.this, Request_webview.class);
                // edit.putExtra("Cat_url", url_link);

                startActivity(edit);
            }
        });

        spndata.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {

                switch (position) {

                case 0:
                    list = DBAdpter.requestUserData(assosiatetoken);
                    Collections.sort(list, byDate1);
                    exlistView.setFocusable(false);
                    // Collections.reverse(list);
                    for (int i = 0; i < list.size(); i++) {

                        if (list.get(i).submitDate != null) {
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));
                        }
                    }
                    break;
                case 1:
                    list = DBAdpter.requestUserData(assosiatetoken);
                    exlistView.setVisibility(View.GONE);
                    Collections.sort(list, byDate);
                    for (int i = 0; i < list.size(); i++) {
                        if (list.get(i).lastModifiedDate != null) {
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));
                        }
                    }
                    break;
                case 2:
                    list = DBAdpter.requestUserData(assosiatetoken);
                    exlistView.setVisibility(View.GONE);
                    Collections.sort(list, byDate3);
                    // Collections.reverse(list);
                    for (int i = 0; i < list.size(); i++) {
                        if (list.get(i).state != null) {
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));
                        }
                    }
                    break;

                case 3:

                    lv.setVisibility(View.GONE);
                    expAdapter = new ExpAdapter(Request.this, uniCatOner,
                            masterOwner);
                    exlistView.setAdapter(expAdapter);
                    break;
                case 4:

                    lv.setVisibility(View.GONE);
                    expAdapter = new ExpAdapter(Request.this, uniCatState,
                            masterState);
                    exlistView.setAdapter(expAdapter);
                    break;

                default:
                    break;
                }

            }

            public void onNothingSelected(AdapterView<?> arg0) {
            }

        });
        back.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                finish();
            }
        });

    }

    static final Comparator<All_Request_data_dto> byDate = new Comparator<All_Request_data_dto>() {
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");

        public int compare(All_Request_data_dto ord1, All_Request_data_dto ord2) {
            java.util.Date d1 = null;
            java.util.Date d2 = null;
            try {
                d1 = sdf.parse(ord1.lastModifiedDate);
                d2 = sdf.parse(ord2.lastModifiedDate);

            } catch (java.text.ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return (d1.getTime() > d2.getTime() ? -1 : 1); // descending
            // return (d1.getTime() > d2.getTime() ? 1 : -1); //ascending
        }
    };
    static final Comparator<All_Request_data_dto> byDate1 = new Comparator<All_Request_data_dto>() {
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");

        public int compare(All_Request_data_dto ord1, All_Request_data_dto ord2) {
            java.util.Date d1 = null;
            java.util.Date d2 = null;
            try {
                d1 = sdf.parse(ord1.submitDate);
                d2 = sdf.parse(ord2.submitDate);

            } catch (java.text.ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return (d1.getTime() > d2.getTime() ? -1 : 1); // descending
            // return (d1.getTime() > d2.getTime() ? 1 : -1); //ascending
        }
    };
    static final Comparator<All_Request_data_dto> byDate3 = new Comparator<All_Request_data_dto>() {
        public int compare(All_Request_data_dto ord1, All_Request_data_dto ord2) {
            String d1 = null;
            String d2 = null;
            d1 = ord1.state;
            d2 = ord2.state;
            return d1.compareToIgnoreCase(d2);
        }
    };

    class doinbackground extends AsyncTask<Void, Void, Void> {
        ProgressDialog pd;
        private Context ctx;

        public doinbackground(Context c) {
            ctx = c;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pd = new ProgressDialog(ctx);
            pd.setMessage("Loading...");
            pd.show();

        }

        @Override
        protected Void doInBackground(Void... params) {
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            pd.cancel();

        }

    }

    public class MyListAdapter extends BaseAdapter {

        private ArrayList<All_Request_data_dto> list;

        public MyListAdapter(Context mContext,
                ArrayList<All_Request_data_dto> list) {
            this.list = list;
        }

        public int getCount() {
            return list.size();

        }

        public All_Request_data_dto getItem(int position) {
            return list.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // if (convertView == null) {
            LayoutInflater inflator = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
            convertView = inflator.inflate(R.layout.custom_request_data, null);
            TextView req_id = (TextView) convertView.findViewById(R.id.req_txt);
            TextView date = (TextView) convertView.findViewById(R.id.date_txt);
            TextView owner = (TextView) convertView
                    .findViewById(R.id.owner_txt);
            TextView state = (TextView) convertView
                    .findViewById(R.id.state_txt);

            req_id.setText(list.get(position).requestId + " - "
                    + list.get(position).title);
            date.setText(list.get(position).lastModifiedDate + " - "
                    + list.get(position).submitDate);
            owner.setText(list.get(position).owner);
            state.setText(list.get(position).state);

            // }
            return convertView;
        }
    }

} 
```

# jquery - 使用带有 Knockout js 的 Jquery 自动完成

> ID：13135360
> 
> 赞同：1
> 
> 时间：2012-10-30T08:41:57.413
> 
> 标签：jquery, autocomplete, knockout.js

我正在尝试使用 jquery 进行自动补全。

我正在使用可编辑网格。像这样我尝试在没有淘汰 js 代码的情况下实现自动完成。它工作正常。[我的代码没有淘汰js代码][http://jsfiddle.net/bhagirathip/WC5P7/2/]

然后我尝试用淘汰赛js实现自动完成。现在它是第一个文本框的工作。如果我通过单击 AddMore 按钮添加更多文本框，则自动完成功能不起作用。[我的代码：][http://jsfiddle.net/bhagirathip/x6H8s/6/]

当我尝试在没有 KnockOut js 查询的情况下进行自动完成时，它工作正常，但是当我包含敲除 js 查询时，自动完成不起作用。

请找出我在哪里做错了。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:18:53.817

[解决方案 jsfiddler](http://jsfiddle.net/x6H8s/22/)

实际上，您没有使用新添加的测试框添加自动完成事件，即它不起作用

```
 <script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.1.0/knockout-min.js" type="text/javascript">
    </script>
<div class='liveExample'>
        <p>You have asked for <span data-bind='text: gifts().length'>&nbsp;</span> gift(s)</p>
        <table data-bind='visible: gifts().length > 0'>
            <thead>
                <tr>
                    <th>Gift name</th>
                    <th>Price</th>
                    <th />
                </tr>
            </thead>
            <tbody data-bind='foreach: gifts'>
                <tr>
                    <td>
                        <input data-bind='value: name' class='tags' /></td>
                    <td>
                        <input data-bind='value: price' /></td>
                    <td><a href='#' data-bind='click: $root.removeGift'>Delete</a></td>
                </tr>
            </tbody>
        </table>
        <button data-bind='click: addGift'>Add Gift</button>
        <button data-bind='enable: gifts().length > 0' type='submit'>Submit</button>
    </div>​ 
```

和脚本就像

```
//For autocomplete extender genarting members

    var GiftModel = function (gifts) {
        var self = this;
        self.gifts = ko.observableArray(gifts);

        self.addGift = function () {
            self.gifts.push({
                name: "",
                price: ""
            });
            var availableTags2 = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
            $(".tags").autocomplete({
                source: availableTags2
            });            

        };

        self.removeGift = function (gift) {
            self.gifts.remove(gift);
        };           
    };

    var viewModel = new GiftModel([
        { name: "", price: "" }
    ]);

    $(document).ready(function () {
        ko.applyBindings(viewModel);

          var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $(".tags").autocomplete({
            source: availableTags
        });
    });​ 
```

下面是对服务器进行的示例 ajax 调用，在完成该调用后，您可以在客户端分配变量，确保变量是全局变量，以便您可以在不同函数之间访问它

```
 function getResult() {
        var URL = "/Home/GetResult";
        var typeJSON = {};
        typeJSON["sql"] = $("#sqltext").val();
        $.ajax({
            type: "POST",
            url: URL,
            data: typeJSON,//data to be send to server
//omit above data tag if not required to send data to server

            success: function (data) {
//on success you can assign your variable here

            },
            failure: function (data) {
                //on faliure of ajax call can show some message here
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:47:02.423

你可以做一件事：

```
$(function(){

 $.noConflict();

//put all other code here

}); 
```

# php - 从 IBAN 银行帐号生成 BIC

> ID：13135361
> 
> 赞同：24
> 
> 时间：2012-10-30T08:41:57.583
> 
> 标签：php, iban

是否有任何现有的库或脚本可用于从 IBAN 银行帐号（和其他必要信息）生成 BIC 代码？

我在网上搜索过，但只找到了 IBAN 生成器。

提前致谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2017-04-10T13:11:18.130

找到所有 IBAN 帐户的解决方案（我认为）：

```
https://openiban.com/validate/IBAN_NUMBER?getBIC=true 
```

例如，如果您对该 URL 进行 CURL 调用，您将免费获得账户银行信息。替换`IBAN_NUMBER`为您的 IBAN 帐户。

**例子：**

```
`https://openiban.com/validate/DE89370400440532013000?getBIC=true` 
```

**结果：**

```
{
  "valid": true,
  "messages": [],
  "iban": "DE89370400440532013000",
  "bankData": {
    "bankCode": "37040044",
    "name": "Commerzbank",
    "zip": "50447",
    "city": "Köln",
    "bic": "COBADEFFXXX"
  },
  "checkResults": {}
} 
```

# 重要更新

由于 GDPR 法规对服务提供商构成未知风险，OpenIBAN 已**关闭其 API 服务。**请参阅[openIBAN.com](https://openiban.com/)上的声明。还包含一个指向自托管指南的链接，请参阅[此 github 页面](https://github.com/fourcube/goiban-service#running-the-service)。

# 更新 (2019/07/25)

Openiban 重新上线。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-02T22:19:45.313

我不认为这样的图书馆存在（至少是免费的）。

唯一可靠的方法是使用[SWIFT IBAN Plus 目录](http://swiftref.swift.com/iban-plus)（以前称为[SWIFT BICplusIBAN 目录](http://www.swift.com/products/bicplusiban_directory)。

该目录由 IBAN 注册商 SWIFT 提供。有了它，您可以将 IBAN 与各种机构信息（包括 BIC）进行匹配。

SWIFT IBAN Plus 目录由 SWIFT 定期更新最新数据，可作为文件或通过 WebService API 访问，但遗憾的是并非免费提供。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-30T10:43:17.603

比利时IBAN银行账号解决方案：

有一个比利时 iban 号码的网络服务，很容易从 iban 银行帐号中获取 bic。

```
$client = new SoapClient('http://www.ibanbic.be/IBANBIC.asmx?WSDL');
$bban = $client->getBelgianBBAN(array('Value' => $iban))->getBelgianBBANResult;
$bic = $client->BBANtoBIC(array('Value' => $bban))->BBANtoBICResult; 
```

我也搜索过荷兰语网络服务，但找不到。但是您始终可以使用来自[http://www.betaalvereniging.nl/europees-betalen/sepa-documentatie/bic-afleiden-uit-iban/的数据自己制作一个](http://www.betaalvereniging.nl/europees-betalen/sepa-documentatie/bic-afleiden-uit-iban/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-05T09:50:40.427

~~我创建了一个可以将荷兰语和比利时语 IBAN 转换为相应 BIC 的 Web 服务。如果可行的话，未来可能会增加更多的国家。~~

看看：http: [//iban2bic.nl](http://iban2bic.nl)

~~api的使用：http://iban2bic.nl/api/: [iban](http://iban2bic.nl/api/:iban)~~

这个网站已经离线一段时间了。我现在在这里开源了代码：[https ://bitbucket.org/wilgert/iban2bic](https://bitbucket.org/wilgert/iban2bic)

免责声明：代码很旧，可能包含错误、愚蠢的错误和/或安全漏洞。此外，荷兰银行的名单还远未完成，因为自 2013 年以来已添加了大量银行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-21T15:09:39.003

```
 $json_url = 'http://iban2bic.nl/api/'.$iban_number_of_dutch_bank;
 $json = file_get_contents($json_url);
 $data = json_decode($json, TRUE);

 $bic  = $data['bic']; // holds the BIC number 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-30T10:20:23.680

我环顾四周，发现您可以使用这个 php iban 验证器从 iban 号码中检索银行名称：

[http://code.google.com/p/php-iban/](http://code.google.com/p/php-iban/)

![从上面的链接发挥](../Images/ccc336ed59ded6578975ca506703a71c.png)

但是当你到达那里时，你需要一个包含所有银行机构代码和相应 BIC 代码的数组。

我想所有的 BIC 代码都可以在这里找到：

[http://www.nbb.be/doc/gg/Protocol/R_List_of_Codes_Current.pdf](http://www.nbb.be/doc/gg/Protocol/R_List_of_Codes_Current.pdf)

但我不确定如何将 IBAN 银行代码链接到 BIC 代码列表。

没有找到一个现成的图书馆很难..

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-16T11:34:10.707

没有简单的方法可以从 IBAN “生成” BIC，因为 BIC 是 IBAN 中不存在的独立编号。（一些国家在 IBAN 中有一部分 BIC）。

有许多服务提供此类数据。www.swift.com 是一项企业服务。虽然不是很便宜。

对于中小型企业来说，一个好的解决方案可能是： [https ://www.iban.com/validation-api-v2.html](https://www.iban.com/validation-api-v2.html)

他们有一些更灵活的定价计划。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-15T11:05:01.127

轻松获取给定 IBAN 的 BIC：

[https://www.ibancalculator.com/iban_validieren.html](https://www.ibancalculator.com/iban_validieren.html)

刚刚将它用于 IBAN，它给了我看似正确、有效的 BIC。

我不知道页面的转换是否可以很容易地自动化。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-30T15:32:47.550

您可以自己从各个国家银行当局收集查找表：[https](https://www.bundesbank.de/en/tasks/payment-systems/services/bank-sort-codes/download-bank-sort-codes-626218) ://www.bundesbank.de/en/tasks/payment-systems/services/bank-sort-codes/download-bank-sort-codes-626218 （德国）因此，如果您只有少数几个可能可行的市场。或者使用openiban。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-25T05:59:58.403

这是一个相当古老的问题，从那时起情况发生了很大变化。

所选答案仅涵盖一个国家/地区，但是，如果您需要涵盖所有使用 IBAN 的国家/地区，那么我建议您使用[IBAN API](https://ibanapi.com/get-api)服务或任何类似的 API。

[DISCLIMAR] 我参与了这项服务

# java - Beans：如何正确管理受另一个属性影响的属性

> ID：13135362
> 
> 赞同：-2
> 
> 时间：2012-10-30T08:41:57.507
> 
> 标签：java, javabeans

我有一个`Ticket`代表服务台票证的实体/JSF 托管 Bean。

它有一个`status`属性；当状态设置为`closed`我想将`closingDate`属性的值更改为当前系统时间。但我认为代码应该包含在 bean 中，因为每次关闭票证时都应该记录时间。

管理它的正确方法是什么？我有几个想法。

1.  将 setter 设为私有，并在调用 setter`creationTime`时更改其值 。`status`快速且快速，但让 setter 更改了两个属性。此外，迫使我使用 JPA 字段访问（问题不大，因为我已经在使用它，但仍然是一个限制）并且我不清楚当 bean 被序列化时会发生什么。
2.  使`status`属性成为 JavaBeans 中描述的绑定属性，并使类成为`PropertyChangeListener`其自身。非常正式，但对我来说有点过于复杂了。
3.  `close()`将两个属性的设置器设为私有，并添加一个执行这两个操作的非 bean 方法 。我会这样做，但它会让我使用 JSF 变得复杂。
4.  没做什么。尽可能让 bean 保持愚蠢，并将逻辑移至控制器；交叉手指希望没有人忘记更新这两个属性。

我赞成 1) 或 3)，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:48:20.840

我不知道是否有人可以告诉您管理它的**正确**方法，因为可以为许多不同的方法提出论据，就像您提出的那样。要将 1) 和 3) 的组合添加到您的列表中，例如：

*   当设置为关闭时让`status`更新的设置者保持公开状态。两者都有好处，因为从 JPA 的角度来看，我不知道这有什么缺点。`creationTime``status`

然而，我建议反对的是拥有一个*Entity/JSF Managed Bean*。我建议有两个，一个实体 bean 和一个 JSF 托管 Bean。这样，您的 Entity bean 可以尽可能地保持*哑*，而您的 JSF Managed Bean 将具有*智能*方法，例如`close()`or`reopen()`并且由对 Entity bean 的一系列*哑*调用组成。此外，您可以执行类似`persist()`in 的操作`@PreDestroy`。易于开发、易于维护、易于决策。希望你会发现这很有帮助。

# jquery - 如何在可编辑的 jQuery 中设置文本输入的样式

> ID：13135369
> 
> 赞同：0
> 
> 时间：2012-10-30T08:42:56.317
> 
> 标签：jquery, css, jeditable, textinput

我必须完美地自定义使用 jQuery 可编辑的[表格中的文本输入。](http://tommywebdesigner.com/jeditable/email.html)

[如果您在此处](http://tommywebdesigner.com/jeditable/email.html)查找并单击**Wordpress 设计**，您可以在创建的文本输入中编辑文本。我的问题是，一旦我单击**Wordpress 设计**，文本输入不会保持固定为可在**Concepto**中编辑的文本区域。事实上，如果你点击**Concepto**，你会得到一个文本区域，但在这种情况下，文本区域保持固定，不会像 Wordpress 设计中的文本输入那样向下移动。

可能这取决于我如何配置 CSS

**这是Wordpress Design 标题**上文本输入的 CSS 代码

 **```
.editable_text_titulo input { font-size: 25px; } 
```

我需要做什么才能将可编辑的文本输入固定为可编辑的文本区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:51:10.293

您应该删除`h2.editable_text_titulo` `margin`并提供`line-height:1em`;

像

```
h2.editable_text_titulo {
    line-height: 1em;
    margin: 0;
} 
```**

# xcode - 加载默认数据（例如 PageTitle）

> ID：13135371
> 
> 赞同：0
> 
> 时间：2012-10-30T08:43:11.527
> 
> 标签：xcode

我正在编写一个应用程序，我希望很多数据、文字甚至图像文件都来自数据文件，而不是硬编码。

因此，例如，如果我打开一个新页面，页面标题将来自文件并覆盖输入的内容。

这可能吗？如果可以，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:48:16.473

查看资源文件：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html)

# jquery - Vimeo iframe 在另一个 iframe 内

> ID：13135372
> 
> 赞同：0
> 
> 时间：2012-10-30T08:43:15.080
> 
> 标签：jquery, vimeo

我想在 html 页面中嵌入 Vimeo Iframe。我使用另一个 iframe 来显示该 Vimeo iframe 视频，但是输出确实存在一些问题。

我可以悬停视频，但不能按下按钮播放？

我究竟做错了什么？

请查看 www.sebastiankornum.com，转到博客和尝试视频测试博客文章。

问题主要出在 Firefox 中。

谢谢 - 克劳斯

//更新这是我的部分，我有一个 Iframe。

```
 <section class="st-panel" id="st-panel-3" style="overflow:hidden;">
        <div class="content" style="width:100%; position: absolute; left:0%; right:0%; bottom: 0; text-align:middle;">
          <a href="http://sebastiankornum.com/sebs-update.aspx" target="blogFrame"><h2 style="left:18%;">Latest news</h2></a>
          <iframe src="http://sebastiankornum.com/sebs-update.aspx" style="border:0px; overflow:auto;" name="blogFrame" width="100%" height="100%"></iframe>
        </div>
      </section> 
```

# c++ - Method not a static member of a class

> ID：13135375
> 
> 赞同：2
> 
> 时间：2012-10-30T08:43:42.510
> 
> 标签：c++, class, header

Hello guys i had this error while i was compiling

```
error:'unisgned int vehicle::accelerate' is not a static member of 'class vehicle' 
```

Any idea how to fix this?

Header file

```
class vehicle
{
    public:
    enum Switch
    {
     SWITCH_ON=0,
     SWITCH_OFF
                };
     vehicle();
    ~vehicle();

    bool powerSwitch(Switch );
    unsigned int accelerate(unsigned int );
    unsigned int decelerate(unsigned int );
    bool isMoving();
    unsigned int getSpeed();
    unsigned int setSpeed(unsigned int);

private:
unsigned int speed;
bool moving;
}; 
```

vehicle.cpp

```
unsigned int vehicle::accelerate(amount)
{

if(moving==true;){
speed+=amount;
 }

 return speed;

 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T08:45:58.720

You are missing the type in the parameter list:

```
unsigned int vehicle::accelerate(unsigned int amount)
{
  .....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T08:46:12.880

As you have declared:

```
unsigned int accelerate(unsigned int ); 
```

So you must implement:

```
unsigned int vehicle::accelerate(unsigned int amount)
{
  //... 
```

The type needs to be given again at this point.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T08:46:00.833

The error might be somewhere else, where you're trying to access the `accelerate` member not using the operator `->` or `.`, but `::`, apart from forgetting the type of the parameter

# android - 数据库说明

> ID：13135379
> 
> 赞同：0
> 
> 时间：2012-10-30T08:43:57.813
> 
> 标签：android, imdb

在我的应用程序中，我有动态更新的电影列表。当用户点击电影项目，启动安装的 Imdb 应用程序并显示电影描述时，是否有可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:54:30.090

你可以尝试使用

```
imdb:///name/<nameID>
imdb:///find?q=<search_query>
imdb:///title/<titleID> 
```

作为您意图中的 URI 参数。例如

```
startActivity(android.intent.action.VIEW, imdb:///title/<titleID>); 
```

有关更多信息，请参阅[http://www.openintents.org/en/uris](http://www.openintents.org/en/uris)和[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

# search - angularJS 搜索模型

> ID：13135382
> 
> 赞同：4
> 
> 时间：2012-10-30T08:44:08.733
> 
> 标签：search, angularjs

我是 angularJS 的新手。我需要对 JSON 数据执行搜索。这是一个示例 JSON 结构

```
countries =   [
{
    "country_name" : "India",
    "stations" : [
        {
            "name": "Dream Factory"
        }
    ]
},

{
    "country_name" : "Indonesia",
    "stations" : [
        {
            "name": "Drummer Factory"
        },  
        {
            "name": "Beats"
        }
    ]
}
] 
```

假设我键入`Ind`，我需要匹配字符串的国家/地区并返回两者`India`，`Indonesia` 并且在其他字段中，键入`Factory`应该检索与字符串匹配的站名（此处`Drummer Factory`为 , `Dream Factory`）。

实现这一目标的简单方法是什么？是否有任何内置指令可以解决这个问题或者我可以使用过滤器，如果是，请发布示例...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:17:01.667

您可以使用名为“filter”的过滤器（是的，这有点令人困惑）：[http ://docs.angularjs.org/api/ng.filter:filter](http://docs.angularjs.org/api/ng.filter:filter)

这是一个演示：http: [//jsfiddle.net/g/pXnRs/4/](http://jsfiddle.net/g/pXnRs/4/)

HTML：

```
<div ng-controller="CountryController">
    Filter: <input ng-model="nameFilter" />
    <ul>
        <li ng-repeat="country in countries | filter: nameFilter">
            {{country | json}}
        </li>
    </ul>      
</div>​ 
```

JS：

```
var app = angular.module('app', []);

app.controller('CountryController', function($scope){
    $scope.nameFilter = '';
    $scope.countries = [
    {
        "country_name" : "India",
        "stations" : [
            {
                "name": "Dream Factory"
            }
        ]
    },   
    {
        "country_name" : "Indonesia",
        "stations" : [
            {
                "name": "Drummer Factory"
            },  
            {
                "name": "Beats"
            }
        ]
    }];
});

angular.bootstrap(document, ['app']); 
```

如果您只需要站点作为结果，则应首先将 JSON 对象层次结构展平为站点列表。​</p>

# java - 如何在 java 中使用 ActiveX(ocx)

> ID：13135388
> 
> 赞同：4
> 
> 时间：2012-10-30T08:44:42.360
> 
> 标签：java, ocx

我想使用 OCX 中的函数，如何在 JAVA 中调用它？如果可能的话，请给我一个例子。非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T08:54:49.707

我认为您必须使用 COM 桥才能在 Java 中使用 OCX。

1\. [Java 到 COM 和 ActiveX 2 路桥连接实用程序](http://java2com.com/)

2\. [JACOB - Java COM 桥接器](http://sourceforge.net/projects/jacob-project/)

3\. [Java COM 桥接器](http://javacombridge.com/)

4\. [Java - COM 互操作性](http://sourceforge.net/projects/j-interop/)

# javascript - 画布，绘制线段

> ID：13135389
> 
> 赞同：0
> 
> 时间：2012-10-30T08:44:44.980
> 
> 标签：javascript, html, canvas, drawing, line

我的三角函数很弱，因此我不知道如何绘制比全线起点和终点短的线段。

[http://jsfiddle.net/psyketom/TUyJb/](http://jsfiddle.net/psycketom/TUyJb/)

我尝试过的是，从起点减去目标点的一小部分，但这会导致错误的行。

```
/* 
 * this is an excerpt from fiddle, that shows
 * the actual calculation functions I have implemented
 */
var target = {
    x : width / 2 + 60,
    y : 20
};

var start = {
    x : width / 2,
    y : height
};

var current = {
    x : 0,
    y : 0
};

var growth = 0.5;

current.x = start.x - (target.x * growth);
current.y = start.y - (target.y * growth); 
```

我敢打赌，我必须使用 sin / cos 或三角学分支中的其他东西才能让它正确。但是，由于我的三角函数甚至没有生锈，但总的来说很弱，所以我被卡住了。

如何绘制正确的目标线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:47:03.277

如果我对您的理解正确，那么这应该可以为您提供所需的内容：

```
current.x = start.x + (target.x - start.x) * growth;
current.y = start.y + (target.y - start.y) * growth; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-20T14:29:18.387

该方程是一个线性插值，它与线性缓动相同。您取开始和结束的增量（最小值和最大值），将其乘以增量的百分比（法线），然后将其添加回起始值。非常重要的算法:)

# java - 任何人都可以帮助我进行依赖注入吗？

> ID：13135390
> 
> 赞同：1
> 
> 时间：2012-10-30T08:44:52.227
> 
> 标签：java, android, dependency-injection, roboguice

```
public class Apple {  
    private final Orange orange;  
    private final Pear pear;  
    private final Banana banana;  

    public Apple(Orange orange, Pear pear, Banana banana) {  
        this.orange = orange;  
        this.pear = pear;  
        this.banana = banana;  
    }  

    // methods  
} 
```

这是我的 POJO 课程。现在，我在 onClick 方法中执行实例化部分。

```
button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Apple apple = new Apple(myOrange, aPear, theBanana);   
        new AppleAsyncTask(apple ).execute();
    })
}; 
```

我怎样才能避免这个实例化部分并使用依赖注入做得更好？还是我做对了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:47:09.287

如果您询问将 Apple 注入 AppleAsynTask，那么您所做的是正确的。依赖注入是一种[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)。还有其他方法可以在此程序之外实例化 Apple。例如，您可以使用[工厂](http://en.wikipedia.org/wiki/Factory_pattern)或[服务定位器](http://en.wikipedia.org/wiki/Service_locator_pattern)

```
button.setOnClickListener(new View.OnClickListener() {
   public void onClick(View v) {
      new AppleAsyncTask(AppleFactory.getApple(myOrange, aPear, theBanana)).execute();
  })
}; 
```

你在做什么在我看来很好。

# asp.net-mvc-4 - 嵌套的 json 反序列化不完全

> ID：13135394
> 
> 赞同：2
> 
> 时间：2012-10-30T08:45:20.180
> 
> 标签：asp.net-mvc-4, json.net

我在标题中提到，json 未完全反序列化，因为某些对象在控制器中具有正确的值（我将 json 发送到 asp.net mvc 4 控制器），但是存储在数组中的对象的属性会出现问题（到确切地说，问题出现在数据上）

我有以下课程：

```
public class Node
{
    [JsonProperty("id")]
    public int? Id { get; set; }
    [JsonProperty("name")]
    public string Name { get; set; }
    [JsonProperty("type")]
    public string Type { get; set; }

    private Data _data = new Data();

    [JsonProperty("data")]
    public Data Data { get; set; }

    private List<Adjacency> _adjacencies = new List<Adjacency>();
    [JsonProperty("adjacencies")]
    public List<Adjacency> Adjacencies
    {
        get { return _adjacencies; }
        set { _adjacencies = value; }
    }

    private List<Instance> _dependendStates = new List<Instance>();

    public List<Instance> DependentStates
    {

        get { return _dependendStates; }
        set { _dependendStates = value; }
    }
}

public class Data
{
    [JsonProperty("$posX")]
    public decimal PosX { get; set; }
    [JsonProperty("$posY")]
    public decimal PosY { get; set; }
}

public class Adjacency
{
    [JsonProperty(PropertyName = "nodeTo")]
    public string NodeTo { get; set; }
    [JsonProperty(PropertyName = "data")]
    public AdjData Data { get; set; }
    //doesn't contain definition for automated transitions
}

public class AdjData
{
    [JsonProperty(PropertyName = "$labelid")]
    public string LabelId { get; set; }
    [JsonProperty(PropertyName = "$labeltext")]
    public string Label { get; set; }
    [JsonProperty(PropertyName = "$type")]
    public string Type { get; set; }    
} 
```

我已经突出显示了没有正确值的字段。

[空问题 http://img19.imageshack.us/img19/530/36976913.png](http://img19.imageshack.us/img19/530/36976913.png)

json 看起来像这样：

```
{
   "result":[
      {
         "id":"100",
         "name":"Start",
         "data":{
            "$posX":-100,
            "$posY":-100,
            "$deployed":true,
            "$color":"#000000",
            "$selected":"true"
         },
         "adjacencies":[
            {
               "nodeTo":"188",
               "data":{
                  "$type":"labeled_arrow",
                  "$labelid":"Label Name",
                  "$labeltext":"Label Name"
               }
            }
         ]
      },
      {
         "id":"188",
         "name":"Second  ",
         "data":{
            "$dim":20,
            "$color":"#000000",
            "$selected":"true"
         },
         "adjacencies":[

         ]
      }
   ],
   "smName":"gftrds"
} 
```

我在解决这个问题时遇到了问题，因为我不明白或看不出问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:55:43.437

免责声明：我无法准确地重现这一点，就像我的情况一样`Label`，并且`LabelId`反序列化很好，虽然`Type`没有，所以我的回答器可能无法解决您遇到的问题。

`"$type":"labeled_arrow"`就我而言，如果它不是第一个属性，我只能反序列化它 - 如果它出现在它之后`"$labelid":"Label Name"`或者`"$labeltext":"Label Name"`它工作正常。

奇怪的是，如果在 Json`$type`中调用该属性并在 C# 中引用该属性，则无论顺序如何，它都会很好地反序列化。`type``[JsonProperty(PropertyName = "type")]`

在您的情况下，您不能反序列化`Label`或`LabelId`两者之一，因此您的问题可能是由其他原因引起的。为了排除我的建议，尝试修改一些属性名称（可能只是去掉 $）以查看它们是否导致属性被错误地反序列化可能是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T14:37:55.200

我遇到了同样的问题，但是在我的情况下，这与从客户端传输数据的方式有关。确保 AJAX 请求使用正确的标头和格式。例如：

```
 dataType: 'json',
        contentType: 'application/json; charset=UTF-8',
        data: JSON.stringify({
            MemberId : '123',
            UserName: '456',
            Parameters: [
                { Value : 'testing' },
                { Value : 'test2' }
            ]
        }), 
```

# excel - 选择选项空白时删除VBA单元格条目中的逗号

> ID：13135410
> 
> 赞同：0
> 
> 时间：2012-10-30T08:46:33.523
> 
> 标签：excel, vba

我想将来自三个不同下拉列表的数据插入到我的电子表格中，但我遇到了一些困难。共有三个下拉菜单，称为**cbo_fac1**、**cbo_fac2**和**cbo_fac3**。以下是用例：

**用例 1**

```
cbo_fac1 - User selects 'No Preference' 
cbo_fac2 - User selects 'No Preference' 
cbo_fac3 - User selects 'No Preference' 
```

在这种情况下，我只想将 No Preference 插入到电子表格单元格中。到目前为止，这件事处理得很好。

**用例 2 和 3**

```
cbo_fac1 - User does not select 'No Preference' 
cbo_fac2 - User does not select 'No Preference' 
cbo_fac3 - User selects 'No Preference' 

cbo_fac1 - User does not select 'No Preference' 
cbo_fac2 - User selects 'No Preference' 
cbo_fac3 - User selects 'No Preference' 
```

在这两种情况下，我都希望 'No Preference 被跳过，只有那些不`No Preference`被插入的值。

我已经尝试过了，但不幸的是系统插入了我想省略的逗号。因此，我不想拥有类似的条目，`PC,DVD,`或者`,DVD,PC`如果用户选择了该`No Preference`选项，我想整理它并让它看起来像`PC, DVD`或`DVD, PC`删除与空白条目关联的逗号。

我希望我的解释足够清楚，我在下面包含了代码来展示我到目前为止所完成的工作。

```
 If Me.cbo_fac1 <> "No preference" Then
    cbo_fac1Entry = Me.cbo_fac1.Value
    Else
    cbo_fac1Entry = ""
    End If
    If Me.cbo_fac2 <> "No preference" Then
    cbo_fac2Entry = Me.cbo_fac2.Value
    Else
    cbo_fac2Entry = ""
    End If
    If Me.cbo_fac3 <> "No preference" Then
    cbo_fac3Entry = Me.cbo_fac3.Value
    Else
    cbo_fac3Entry = ""
    End If

    cbo_facEntry = cbo_fac1Entry & "," & cbo_fac2Entry & "," & cbo_fac3Entry

    If cbo_facEntry = ",," Then
    cbo_facEntry = "No Preference"
    Else
    End If

    rng1.Offset(1, 13) = cbo_facEntry 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:44:27.667

后

```
If cbo_facEntry = ",," Then
cbo_facEntry = "No Preference"
Else
End If 
```

我会插入

```
cbo_facEntry = Trim(cbo_facEntry)

If Right(cbo_facEntry, 1) = "," Then
   cbo_facEntry = Left(cbo_facEntry, Len(cbo_facEntry) - 1)
End If

If Left(cbo_facEntry, 1) = "," Then
   cbo_facEntry = Right(cbo_facEntry, Len(cbo_facEntry) - 1)
End If

If InStr(1, cbo_facEntry, ",,") Then
   cbo_facEntry = Replace(cbo_facEntry, ",,", ", ")
End If 
```

封面案例“,DVD,,PC,”

# r - R spCbind 错误

> ID：13135413
> 
> 赞同：1
> 
> 时间：2012-10-30T08:46:47.617
> 
> 标签：r, shapefile, rgdal

我之前已经成功地将信息添加到 shapefile（请参阅我在[http:](http://rusergroup.swansea.ac.uk/Healthmap.ashx?HL=map) //ruse​​rgroup.swansea.ac.uk/Healthmap.ashx?HL=map 上的帖子）。

但是，我只是尝试使用稍微不同的 shapefile（威尔士的新当地健康委员会）再次执行此操作，并且代码失败`spCbind`并出现“行名不相同错误”

```
o <- match(wales.lonlat$NEW_LABEL, wds$HB_CD)
wds.xtra <- wds[o,]
wales.ncchd <- spCbind(wales.lonlat, wds.xtra) 
```

我的行之前确实有不同的名称，这没有造成任何问题。我重新标记了 wds.xtra 中的列以匹配“NEW_LABEL”，但这没有帮助。

wales.lonlat 和 wds.xtra 之间的标签和标签顺序完全匹配。

（我使用的是基于 R 2.13.2 构建的 Revolution R 5.0）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:14:38.763

我使用 match 根据行名（或任何其他公共 ID）将数据合并到 sp 数据槽。这避免了 spCbind 函数使用 maptools 的必要性。

```
# Based on rownames
sdata@data=data.frame(sdata@data, new.df[match(rownames(sdata@data), rownames(new.df)),])

# Based on common ID
sdata@data=data.frame(sdata@data, new.df[match(sdata@data$ID, new.df$ID),])

# where; sdata is your sp object and new.df is a data.frame object that you want to merge to sdata. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T15:56:37.970

我有同样的错误，可以通过删除所有其他数据来解决它，这些数据实际上并没有被添加。我想，他们混淆了 spCbind 因为匹配想要匹配所有行元素，而不仅仅是给定的。在我的示例中，我使用了

```
xtra2 <- data.frame(xtra$ID_3, xtra$COMPANY) 
```

提取相关字段并随后将它们提供给 spCbind

```
gadm <- spCbind(gadm, xtra2) 
```

# ruby-on-rails - 很多“承诺”；在 PostgreSQL 慢查询日志中

> ID：13135422
> 
> 赞同：8
> 
> 时间：2012-10-30T08:47:14.033
> 
> 标签：ruby-on-rails, postgresql

我正在尝试为我正在开发的 Rails 应用程序优化*PostgreSQL 9.1 数据库。*在*postgresql.conf*我已经设置

```
log_min_duration_statement = 200 
```

然后我使用*PgBadger*分析日志文件。到目前为止，占用大部分时间的语句是：

```
COMMIT; 
```

我没有得到比这更多的信息，我很困惑这是什么陈述。有谁知道我可以做些什么来获得有关 COMMIT 查询的更多详细信息？所有其他查询显示语句中使用的变量、SELECT、UPDATE 等。但不是 COMMIT 查询。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T10:32:40.087

正如@mvp 所指出的， if`COMMIT`很慢，通常的原因是 slow `fsync()`s，因为每个事务提交都必须将数据刷新到磁盘 - 通常使用 fsync() 调用。不过，这并不是缓慢提交的唯一可能原因。你可能会：

*   如前所述，fsync() 速度较慢
*   有缓慢的检查点停止 I/O
*   有一套`commit_delay`- 我还没有验证延迟提交是否被记录为长时间运行的语句，但这似乎是合理的

如果 fsync() 很慢，最好的选择是重新组织你的工作，这样你就可以在更少的大事务中运行它。一个合理的替代方法是使用 a`commit_delay`来分组提交；这将组提交以提高整体吞吐量，但实际上会减慢单个事务的速度。

更好的是，解决问题的根源。升级到具有电池支持的回写式缓存的 RAID 控制器或电源故障安全的高质量 SSD。看，普通磁盘每次旋转通常可以执行不到一个 fsync()，或者每分钟 5400 到 15,000 次，具体取决于硬盘驱动器。有大量事务和大量提交，这将大大限制您的吞吐量，特别是因为如果他们所做的只是微不足道的刷新，那是*最好的情况。*相比之下，如果您在 RAID 控制器或 SSD 上有一个持久写入缓存，则操作系统不需要确保数据实际上在硬盘驱动器上，它只需要确保它到达持久写入缓存 - 这是速度*大大*提高，因为这通常只是一些受电源保护的 RAM。

fsync() 可能不是真正的问题。它可能是缓慢的[检查点](http://www.postgresql.org/docs/current/static/runtime-config-wal.html#RUNTIME-CONFIG-WAL-CHECKPOINTS)。最好的查看方法是检查日志，看看是否有任何关于检查点发生过于频繁或耗时过长的投诉。您还可以启用[`log_checkpoints`](http://www.postgresql.org/docs/current/static/runtime-config-logging.html#GUC-LOG-CHECKPOINTS)记录检查点的时间和频率。

如果检查点花费的时间太长，请考虑调高 bgwriter 完成目标（请参阅文档）。如果他们太频繁，增加`checkpoint_segments`。

有关更多信息，请参阅[调整 PostgreSQL 服务器](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T09:31:46.077

`COMMIT`是完全有效的声明，其目的是提交当前待处理的事务。由于它真正做的事情的性质 - 确保数据真正刷新到磁盘，它可能需要大部分时间。

如何让您的应用程序运行得更快？现在，您的代码很可能正在使用所谓的自动提交模式——也就是说，每条语句都是隐式`COMMIT`的。如果您将更大的块显式包装到`BEGIN TRANSACTION;`...`COMMIT;`块中，您将使您的应用程序运行得更快并减少提交次数。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T09:48:10.897

尝试将每个查询记录几天，然后在 COMMIT 语句之前查看事务中发生了什么。

> log_min_duration_statement = 0

# sas - SAS DI Studio 中的部署和重新部署有什么区别？

> ID：13135424
> 
> 赞同：1
> 
> 时间：2012-10-30T08:47:33.170
> 
> 标签：sas

我猜测它可能只保留元数据 ID（重新部署）而不是生成新的 ID（部署），但这是唯一的区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:32:27.177

这只是区别，但非常重要。您应该始终重新部署任何流程所依赖的作业。如果您部署已添加到流程的作业，流程将被损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-26T23:33:56.280

我不同意@barjey 之前关于流程已损坏的评论。它没有损坏，只是以新的 .sas 文件的形式为同一个作业创建了一个新的元数据 ID **，**例如**JOB_NAME_00000.sas**并部署

这增加了很多混乱，并且很多版本的相同工作浮动，这是不正确的。这就是总是**重新部署**作业的原因，以便覆盖以前版本的代码并在流程中反映新的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:07:24.227

哟重新部署作业以通过自动识别您已部署作业的环境来合并环境更改。这些更改然后反映在实际保存作业的后端（在流程中安排的作业）。

# c - 从C中用空格分隔的文件中读取两个字符串

> ID：13135428
> 
> 赞同：1
> 
> 时间：2012-10-30T08:47:53.200
> 
> 标签：c, gcc, readfile

我有以下代码：

```
#include<iostream>
#include<stdio.h>
using namespace std;
int main(){
    char* username, *password;
    cout<<"Content-type: text/html"<<endl<<endl;
    FILE *in = fopen("useri.txt","r");
    while (fscanf(in,"%s %s",username, password) != EOF) {
        cout<<username<<endl;
    }
    fclose(in);
} 
```

该文件如下所示：

```
admin admin 
```

由于某种原因，特定文件中的所有文本都被读入`username`var。代码按原样打印出我文件中的两个值（在单独的行上），但这是错误的，因为它应该只打印 1。

一旦我尝试打印`password`，程序就会退出，没有错误（甚至没有分段错误）。难道我做错了什么？

**注意**：我需要它来保持 C，而不是 C++（除了`cout`部分，因为我很懒）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:49:42.733

内存不分配给变量。

```
char* username, *password; 
```

用于`malloc()`动态分配内存。

不强制只使用动态内存。您也可以使用静态内存。IE

```
//100 is just a sample value. 
//Modify as per your requirement.
#define MAX_STR_LEN 100    

char  username[MAX_STR_LEN], password[MAX_STR_LEN]; 
```

# c++ - 如何在 C++ 中获取 .csv 文件的一部分？

> ID：13135438
> 
> 赞同：0
> 
> 时间：2012-10-30T08:48:49.140
> 
> 标签：c++, csv

我对 C++ 很陌生。我只想在“.csv”文件中获取某个字段，而不是全部删除。我很确定，它一定很容易，但我不知道该怎么做。这是我获取所有“.csv”内容的代码：

```
#include <iostream>
#include <fstream>
#include <string>
// #include "Patient.h"

using namespace std;

int main()
{
    // CPatient patient; 

    ifstream file("C:/Users/Alex/Desktop/STAGE/test.csv");

    if(file)
    {
         // the file did open well

        string line;      

        while(getline(file, line, ';'))    //Until we did not reach the end we read
        {

            cout << line << endl; //Console Result

        }
    }
    else
    {
        cout << "ERROR: Could not open this file." << endl;
    }
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:56:33.357

如果您可以使用`boost`库，那么[`boost::tokenizer`](http://www.boost.org/doc/libs/1_51_0/libs/tokenizer/introduc.htm)将提供您需要的功能。最值得注意的是，它正确处理包含逗号的引用字段值。以下是从链接页面复制的代码片段：

```
// simple_example_2.cpp
#include<iostream>
#include<boost/tokenizer.hpp>
#include<string>

int main(){
   using namespace std;
   using namespace boost;
   string s = "Field 1,\"putting quotes around fields, allows commas\",Field 3";
   tokenizer<escaped_list_separator<char> > tok(s);
   for(tokenizer<escaped_list_separator<char> >::iterator beg=tok.begin();
       beg!=tok.end();
       ++beg)
   {
       cout << *beg << "\n";
   }
} 
```

您可以将每次`ligne`读取传递给 a`tokenizer`并提取您需要的字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T09:04:51.293

Try reading whole lines and split them afterwards:

```
int N = 5; // search the fifth field
char separator = ';';
while (std::getline(fichier, ligne)) {
    // search for the Nth field
    std::string::size_type pos = 0;
    for (int i = 1; i < N; ++i)
        pos = ligne.find_first_of(separator, pos) + 1;

    std::string::size_type end = ligne.find_first_of(separator, pos);
    // field is between [pos, end)
} 
```

# c# - 如何在 C# 中将类设为 IEnumerable？

> ID：13135443
> 
> 赞同：21
> 
> 时间：2012-10-30T08:49:08.457
> 
> 标签：c#, class, ienumerable

所以我里面有一个类和一个通用列表，但它是私有的。

```
class Contacts
{
    List<Contact> contacts;
    ...
} 
```

我想让课堂像这样工作：

```
foreach(Contact in contacts) .... ; 
```

像这样（不工作）：

```
Contacts c;
foreach(Contact in c) .... ; 
```

在上面的示例中，Contact 类实例 c 必须从联系人（c 的私有成员）返回每个项目

我该怎么做？我知道它必须是带有收益返回的 IEnumerable，但是在哪里声明呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-30T08:50:35.837

实现接口IEnumerable：

```
class Contacts : IEnumerable<Contact>
{
    List<Contact> contacts;

    #region Implementation of IEnumerable
    public IEnumerator<Contact> GetEnumerator()
    {
        return contacts.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
    #endregion
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-30T09:01:43.307

或者`IEnumerator<Contact>`通过提供一个`GetEnumerator`方法返回一个：

```
class Contacts
{
    List<Contact> contacts;

    public IEnumerator<Contact> GetEnumerator()
    {
        foreach (var contact in contacts)
            yield return contact;
    }
} 
```

`foreach`寻找`GetEnumerator`. _ 在此处查看有关此的语言规范详细信息：[https ://stackoverflow.com/a/3679993/284240](https://stackoverflow.com/a/3679993/284240)

[如何使 Visual C# 类在 foreach 语句中可用](http://support.microsoft.com/kb/322022/en-us)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-30T08:52:59.503

```
public class Contacts: IEnumerable
{
     ...... 
    public IEnumerator GetEnumerator()
    {
        return contacts.GetEnumerator();
    }
} 
```

应该为你做一个伎俩。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-30T09:20:21.570

```
class Program
{
    static void Main(string[] args)
    {
        var list = new Contacts();
        var a = new Contact() { Name = "a" };
        var b = new Contact() { Name = "b" };
        var c = new Contact() { Name = "c" };
        var d = new Contact() { Name = "d" };
        list.ContactList = new List<Contact>();
        list.ContactList.Add(a);
        list.ContactList.Add(b);
        list.ContactList.Add(c);
        list.ContactList.Add(d);

        foreach (var i in list)
        {
            Console.WriteLine(i.Name);
        }
    }
}

class Contacts : IEnumerable<Contact>
{
    public List<Contact> ContactList { get; set; }

    public IEnumerator<Contact> GetEnumerator()
    {
        return ContactList.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return ContactList.GetEnumerator();
    }
}

class Contact
{
    public string Name { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-17T13:40:57.277

只是扩展如何`List<Contact>`

如果您不想扩展任何其他类，这是一个非常简单、快速的选择：

```
class Contacts :List<Contact>
{   
} 
```

# android - 为 EditText 的 Drawable 权限设置 onClickListener

> ID：13135447
> 
> 赞同：127
> 
> 时间：2012-10-30T08:49:31.513
> 
> 标签：android, android-edittext

在我的应用程序`EditText`中，右侧有一个搜索图标。我使用了下面给出的代码。

```
 <EditText
        android:id="@+id/search"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_margin="4dip"
        android:layout_weight="1"
        android:background="@drawable/textfield_search1"
        android:drawableLeft="@drawable/logo"
        android:drawableRight="@drawable/search_icon"
        android:hint="Search Anything..."
        android:padding="4dip"
        android:singleLine="true" /> 
```

我想为`onClickListener`分配给右侧可绘制对象的搜索图标图像设置`EditText`. 这怎么可能？

* * *

## 回答 #1

> 赞同：372
> 
> 时间：2014-10-09T02:38:31.960

**简单的解决方案，使用 Android 已经提供的方法，而不是重新发明 wheeeeeeeeeel :-)**

```
editComment.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            final int DRAWABLE_LEFT = 0;
            final int DRAWABLE_TOP = 1;
            final int DRAWABLE_RIGHT = 2;
            final int DRAWABLE_BOTTOM = 3;

            if(event.getAction() == MotionEvent.ACTION_UP) {
                if(event.getRawX() >= (editComment.getRight() - editComment.getCompoundDrawables()[DRAWABLE_RIGHT].getBounds().width())) {
                    // your action here

                 return true;
                }
            }
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2012-10-30T08:57:54.643

```
public class CustomEditText extends androidx.appcompat.widget.AppCompatEditText {

    private Drawable drawableRight;
    private Drawable drawableLeft;
    private Drawable drawableTop;
    private Drawable drawableBottom;

    int actionX, actionY;

    private DrawableClickListener clickListener;

    public CustomEditText (Context context, AttributeSet attrs) {
        super(context, attrs);
        // this Contructure required when you are using this view in xml
    }

    public CustomEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);        
    }

    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    public void setCompoundDrawables(Drawable left, Drawable top,
            Drawable right, Drawable bottom) {
        if (left != null) {
            drawableLeft = left;
        }
        if (right != null) {
            drawableRight = right;
        }
        if (top != null) {
            drawableTop = top;
        }
        if (bottom != null) {
            drawableBottom = bottom;
        }
        super.setCompoundDrawables(left, top, right, bottom);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        Rect bounds;
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            actionX = (int) event.getX();
            actionY = (int) event.getY();
            if (drawableBottom != null
                    && drawableBottom.getBounds().contains(actionX, actionY)) {
                clickListener.onClick(DrawablePosition.BOTTOM);
                return super.onTouchEvent(event);
            }

            if (drawableTop != null
                    && drawableTop.getBounds().contains(actionX, actionY)) {
                clickListener.onClick(DrawablePosition.TOP);
                return super.onTouchEvent(event);
            }

            // this works for left since container shares 0,0 origin with bounds
            if (drawableLeft != null) {
                bounds = null;
                bounds = drawableLeft.getBounds();

                int x, y;
                int extraTapArea = (int) (13 * getResources().getDisplayMetrics().density  + 0.5);

                x = actionX;
                y = actionY;

                if (!bounds.contains(actionX, actionY)) {
                    /** Gives the +20 area for tapping. */
                    x = (int) (actionX - extraTapArea);
                    y = (int) (actionY - extraTapArea);

                    if (x <= 0)
                        x = actionX;
                    if (y <= 0)
                        y = actionY;

                    /** Creates square from the smallest value */
                    if (x < y) {
                        y = x;
                    }
                }

                if (bounds.contains(x, y) && clickListener != null) {
                    clickListener
                            .onClick(DrawableClickListener.DrawablePosition.LEFT);
                    event.setAction(MotionEvent.ACTION_CANCEL);
                    return false;

                }
            }

            if (drawableRight != null) {

                bounds = null;
                bounds = drawableRight.getBounds();

                int x, y;
                int extraTapArea = 13;

                /**
                 * IF USER CLICKS JUST OUT SIDE THE RECTANGLE OF THE DRAWABLE
                 * THAN ADD X AND SUBTRACT THE Y WITH SOME VALUE SO THAT AFTER
                 * CALCULATING X AND Y CO-ORDINATE LIES INTO THE DRAWBABLE
                 * BOUND. - this process help to increase the tappable area of
                 * the rectangle.
                 */
                x = (int) (actionX + extraTapArea);
                y = (int) (actionY - extraTapArea);

                /**Since this is right drawable subtract the value of x from the width 
                * of view. so that width - tappedarea will result in x co-ordinate in drawable bound. 
                */
                x = getWidth() - x;

                 /*x can be negative if user taps at x co-ordinate just near the width.
                 * e.g views width = 300 and user taps 290\. Then as per previous calculation
                 * 290 + 13 = 303\. So subtract X from getWidth() will result in negative value.
                 * So to avoid this add the value previous added when x goes negative.
                 */

                if(x <= 0){
                    x += extraTapArea;
                }

                 /* If result after calculating for extra tappable area is negative.
                 * assign the original value so that after subtracting
                 * extratapping area value doesn't go into negative value.
                 */               

                if (y <= 0)
                    y = actionY;                

                /**If drawble bounds contains the x and y points then move ahead.*/
                if (bounds.contains(x, y) && clickListener != null) {
                    clickListener
                            .onClick(DrawableClickListener.DrawablePosition.RIGHT);
                    event.setAction(MotionEvent.ACTION_CANCEL);
                    return false;
                }
                return super.onTouchEvent(event);
            }           

        }
        return super.onTouchEvent(event);
    }

    @Override
    protected void finalize() throws Throwable {
        drawableRight = null;
        drawableBottom = null;
        drawableLeft = null;
        drawableTop = null;
        super.finalize();
    }

    public void setDrawableClickListener(DrawableClickListener listener) {
        this.clickListener = listener;
    }

} 
```

同时创建一个接口

```
public interface DrawableClickListener {

    public static enum DrawablePosition { TOP, BOTTOM, LEFT, RIGHT };
    public void onClick(DrawablePosition target); 
    } 
```

如果您需要任何帮助，请发表评论

还要在活动文件中的视图上设置 drawableClickListener。

```
editText.setDrawableClickListener(new DrawableClickListener() {

        public void onClick(DrawablePosition target) {
            switch (target) {
            case LEFT:
                //Do something here
                break;

            default:
                break;
            }
        }

    }); 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2014-06-23T06:55:54.037

这已经得到解答，但我尝试了一种不同的方法来使其更简单。

这个想法是使用`ImageButton`在右侧放置一个`EditText`并对其具有负边距，以便`EditText`流入`ImageButton`使其看起来像 Button 在`EditText`.

![在此处输入图像描述](../Images/a235792cda5415a09bffe829c9275a4d.png)

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <EditText
            android:id="@+id/editText"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:hint="Enter Pin"
            android:singleLine="true"
            android:textSize="25sp"
            android:paddingRight="60dp"
            />
        <ImageButton
            android:id="@+id/pastePin"
            android:layout_marginLeft="-60dp"
            style="?android:buttonBarButtonStyle"
            android:paddingBottom="5dp"
            android:src="@drawable/ic_action_paste"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout> 
```

此外，如上所示，`paddingRight`如果`EditText`您不希望其中的文本在`ImageButton`.

我在 android-studio 的布局设计器的帮助下猜测了边距大小，它在所有屏幕尺寸上看起来都相似。否则，您可以计算宽度`ImageButton`并以编程方式设置边距。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-30T08:53:43.060

据我所知，您无法访问正确的图像，除非您覆盖该`onTouch`事件。我建议使用 a `RelativeLayout`, 和 one`editText`和 one `imageView`，并`OnClickListener`在图像视图上设置如下：

```
<RelativeLayout
        android:id="@+id/rlSearch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:drawable/edit_text"
        android:padding="5dip" >

        <EditText
            android:id="@+id/txtSearch"
            android:layout_width="match_parent"

            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/imgSearch"
            android:background="#00000000"
            android:ems="10"/>

        <ImageView
            android:id="@+id/imgSearch"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:src="@drawable/btnsearch" />
    </RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-08T19:01:50.927

我知道这已经很老了，但我最近不得不做一些非常相似的事情，并想出了一个更简单的解决方案。

它归结为以下步骤：

1.  创建一个包含 EditText 和 Image 的 XML 布局
2.  子类 FrameLayout 并扩展 XML 布局
3.  为单击侦听器和您想要的任何其他行为添加代码......而不必担心单击的位置或任何其他凌乱的代码。

有关完整示例，请参阅此帖子： [在 EditText 中处理可绘制对象上的单击事件](https://stackoverflow.com/questions/3554377/handling-click-events-on-a-drawable-within-an-edittext/22945875#22945875)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-30T08:53:17.023

请使用以下技巧：

*   使用您的图标创建一个图像按钮并将其背景颜色设置为透明。
*   将图像按钮放在 EditText 上
*   实现按钮的“onclic”侦听器以执行您的功能

# asp.net-mvc-3 - mvc3 简单的自定义输出缓存

> ID：13135449
> 
> 赞同：0
> 
> 时间：2012-10-30T08:49:40.550
> 
> 标签：asp.net-mvc-3, caching

我正在尝试遵循一些教程，我应该在一个地方覆盖 GetVaryByCustomString .... 代码如下

```
public override string GetVaryByCustomString(HttpContext context, string arg)
        {
            // It seems this executes multiple times and early, so we need to extract language again from cookie.
            if (arg == "culture") // culture name (e.g. "en-US") is what should vary caching
            {
                string cultureName = null;
                // Attempt to read the culture cookie from Request
                HttpCookie cultureCookie = Request.Cookies["_culture"];
                if (cultureCookie != null)
                    cultureName = cultureCookie.Value;
                else
                    cultureName = Request.UserLanguages[0]; // obtain it from HTTP header AcceptLanguages

                // Validate culture name
                cultureName = CultureHelper.GetImplementedCulture(cultureName); // This is safe

                return cultureName.ToLower();// use culture name as cache key, "es", "en-us", "es-cl", etc.
            }

            return base.GetVaryByCustomString(context, arg);
        } 
```

问题是：我应该把这些代码放在哪里，放在哪个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:13:13.263

**您可以在Global.asax**中覆盖它

# asp.net - TransferRequestHandler 和 BeginRequest 的性能问题

> ID：13135452
> 
> 赞同：6
> 
> 时间：2012-10-30T08:49:47.367
> 
> 标签：asp.net, performance

我已经开始使用 New Relic 来监控[http://alternativeto.net](http://alternativeto.net)这个相当大的网站的性能。

我注意到的是，他们报告为“TransferRequestHandler”的方法花费了大量时间，当我深入研究它时，我发现它确实是“BeginRequest()”方法需要时间。

在New Relic中看起来像这样。

![http://content.screencast.com/users/stuckish/folders/Jing/media/22c8137e-21b1-4b36-8185-15989e173f57/2012-10-30_0941.png](../Images/09f060bbcd9fdcbe14b208ea3187d61c.png)

我最接近的发现任何可能是问题的东西是 Stack Overflow 上的这个线程[我刚刚发现为什么所有 ASP.Net 网站都很慢，我正在努力解决它，](https://stackoverflow.com/questions/3629709/i-just-discovered-why-all-asp-net-websites-are-slow-and-i-am-trying-to-work-out)但我已经实际上试图替换会话模块，但这并没有帮助。

该站点是 ASP.NET MVC 和 Webforms 的混合体。

我已经意识到这是一个很长的镜头，你没有太多可以“继续”的事情，但如果有人能让我朝着正确的方向前进，最重要的是能够在本地重现这种行为或类似的事情，我会非常感激的 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:08:19.423

BeginRequest 是一切开始的地方，因此通常会有延迟，但您必须更深入地找到导致延迟的代码的实际点。

如果会话是问题，则在用户进行长时间操作时禁用会话，例如下载文件或使页面长时间停留的复杂程序。

相对于会话：
[调用 aspx 页面以随机返回图像 慢速](https://stackoverflow.com/questions/9694117/call-aspx-page-to-return-an-image-randomly-slow)
[ASP.NET 服务器不异步处理页面](https://stackoverflow.com/questions/12284530/asp-net-server-does-not-process-pages-asynchronously/12285168#12285168)
[尝试使 Web 方法异步](https://stackoverflow.com/questions/11325150/trying-to-make-web-method-asynchronous)
[Web 应用程序在处理共享同一会话的另一个 Web 应用程序时被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)  
[哪些性能计数器可用于识别 ASP.NET瓶颈？](https://stackoverflow.com/questions/9056240/what-perfmon-counters-are-useful-for-identifying-asp-net-bottlenecks/9056650#9056650)  
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)  

下一步是创建一个完全自定义的会话。

现在，如果您使用多个池（网络花园）来运行您的站点，它可能会有所帮助，但在此之前，您必须确保您已正确同步数据并使用 Mutex 和其他锁定机制在多池环境中运行。

# java - 在运行时更改类路径中的 jar 顺序

> ID：13135453
> 
> 赞同：0
> 
> 时间：2012-10-30T08:49:51.560
> 
> 标签：java

java中是否有一个选项可以在运行时更改jar文件的顺序取决于应用程序的参数。

案例1：值为true的输入参数：jar A将在类路径中的jar B之前

案例2：值为false的输入参数：jar B将在类路径中的jar A之前

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:53:36.430

据我所知，您只能通过在应用程序启动时手动加载类来实现这一点。

看看这个：[URLClassLoader](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLClassLoader.html)

这样，您可以根据参数更改加载类的顺序。

# linux - 我收到“运行时 API 错误：设备序号无效。” 当我使用 GTX 590 在 Ubuntu 10.04 上运行 cuda 代码时

> ID：13135459
> 
> 赞同：1
> 
> 时间：2012-10-30T08:50:20.847
> 
> 标签：linux, ubuntu, cuda, nvidia

我正在尝试在带有 GeForce GTX 590 的 Ubuntu 10.04 系统上运行 cuda 应用程序
。我正在使用 295.41 驱动程序。我已经使用此代码设置了 3 个其他系统，并且都可以正常工作。其中两个有 GT 640，一个有 GTX 480（或 460——我不太记得了）。我以前在这台机器上用相同的硬件运行过 cuda 代码，但它已经被格式化了。

当我运行我的代码以及运行 SDK 示例时，我得到了无效的设备序号错误。我用 gentoo 设置了这台机器并得到了这个错误 - 我认为它可能与操作系统有关，所以我安装了 ubuntu 并遇到了同样的问题。我想不出还有什么可以尝试的。有没有人有什么建议？

下面是一些可能很方便的输出。

> 用户@pchan1:~$ lspci | grep nVidia
> 02:00.0 PCI 桥：nVidia Corporation 设备 05b1 (rev a3)
> 03:00.0 PCI 桥：nVidia Corporation 设备 05b1 (rev a3)
> 03:02.0 PCI 桥：nVidia Corporation 设备 05b1 (rev a3)
> 06:00.0 PCI 桥： nVidia Corporation 设备 05b9 (rev a3)
> 07:00.0 PCI 桥：nVidia Corporation Device 05b9 (rev a3)
> 07:02.0 PCI 桥：nVidia Corporation Device 05b9 (rev a3)
> 08:00.0 3D 控制器：nVidia Corporation Device 1088 (rev a1)
> 08:00.1 音频设备：nVidia Corporation 设备 0e09 (rev a1)
> 09:00.0 VGA 兼容控制器：nVidia Corporation Device 1088 (rev a1)
> 09:00.1 音频设备：nVidia Corporation Device 0e09 (rev a1)
> 
> user@pchan1:~$ ls -l /dev/nvidia*
> crw-rw-rw- 1 根 195, 0 2012-10-30 10:22 /dev/nvidia0
> crw-rw-rw- 1 根 195, 1 2012-10-30 10:22 /dev/nvidia1
> crw-rw-rw- 1 根 195、255 2012-10-30 10:22 /dev/nvidiactl

**编辑：**当我让这个系统工作时，我使用的是 64 位操作系统和 64 位驱动程序。我现在使用的是 32 位操作系统和 32 位驱动程序。

另一个编辑：

非常感谢 Przemyslaw Zych。你帮我解决了问题。我必须通过执行以下操作将 Nouveau 列入黑名单。在 /etc/modprobe.d 中添加一个名为 blacklist-nouveau.conf 的文件（只是 .conf 结尾很重要），并在该文件中放入以下两行。
blacklist nouveau
options nouveau modeset=0
按照以下指南
[ftp://download.nvidia.com/XFree86/Linux-x86_64/256.44/README/commonproblems.html的说明](ftp://download.nvidia.com/XFree86/Linux-x86_64/256.44/README/commonproblems.html)

问题解决了 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:32:25.653

正如 Przemyslaw Zych 所建议的那样，还有另一个使用 GPU 的驱动程序（在本例中为 nouveau）。
要使用 nvidia 驱动程序 nouveau，必须禁用。该过程在此处列出 - [ftp://download.nvidia.com/XFree86/Linux-x86_64/256.44/README/commonproblems.html](ftp://download.nvidia.com/XFree86/Linux-x86_64/256.44/README/commonproblems.html) - 我将在下面进行总结。

在 /etc/modprobe.d 中创建一个名为 blacklist-nouveau.conf 的文件
添加以下两行：
blacklist nouveau
options nouveau modeset=0
然后重启电脑。这应该可以防止加载 nouveau 并允许使用 nvidia 驱动程序。

# c++ - c ++将输入字符串中的\r\n转换为回车符和换行符

> ID：13135463
> 
> 赞同：-2
> 
> 时间：2012-10-30T08:50:33.263
> 
> 标签：c++, string, printf, scanf

我需要转换一个可以包含 \r\n 作为字符串一部分的输入字符串。例如如下所示

```
\r\n Content-type: text/plain; charset=iso-8859-1 \r\n Subject: Test Subject \r\n\r\n Test Message 
```

现在，在通过 HTTP Post 数据发送此字符串时，我需要将 \r\n 转换为百分位数编码。但是当我使用 curl_easy_escape 函数时，它会将 \r\n 理解为不同的字符并且编码不正确。因此，为避免此类错误，我需要将上面的字符串中的 \r\n 转换为回车符和换行符，以便通过 curl_easy_escape() 函数正确转换缓冲区。我尝试将 sstream 对象、sprintf 和 sscanf 与缓冲区一起使用（因为缓冲区是 std::string 对象），但没有太大帮助。基本上我想转换缓冲区如下

内容类型：文本/纯文本；charset=iso-8859-1 主题：测试主题

测试消息

因此，当我们将此缓冲区传递给 curl_easy_escape 时，它​​会正确编码。因此，这方面的任何指示都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:04:31.773

您可以在循环中使用[`std::string::find`](http://en.cppreference.com/w/cpp/string/basic_string/find)and来执行此操作：[`std::string::replace`](http://en.cppreference.com/w/cpp/string/basic_string/replace)

```
std::string input = "\\r\\n Content-type: text/plain; charset=iso-8859-1 \\r\\n Subject: Test Subject \\r\\n\\r\\n Test Message";

std::string::size_type pos = 0;
while ((pos = input.find("\\r\\n", pos)) != std::string::npos)
{
    input.replace(pos, 4, "\r\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:40:52.960

`<regex>`如果您有权访问成员，则可以使用成员：

```
std::string const input("abcd\\r\\nefgh\\r\\nijkl");
std::string const output(std::regex_replace(input, std::regex("\\\\r\\\\n"), std::string("\r\n"))); 
```

# java - 在Java中仅提取文本形式的字符串

> ID：13135464
> 
> 赞同：-1
> 
> 时间：2012-10-30T08:50:32.967
> 
> 标签：java

我有类似 str = Adob​​e Flash Player 11.4.402.287 (11.3 MB) 的字符串，我只需要提取 Adob​​e Flash Player 作为输出。请建议..

我尝试使用正则表达式：

```
String str = "Adobe Flash Player 11.4.402.287 (11.3 MB)";
        Pattern p = Pattern.compile("^[a-zA-Z]+([0-9]+).*");
        Matcher m = p.matcher(str);

        if (m.find()) {
            System.out.println(m.group(1));
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:59:05.203

正如所建议的`@MarkoTopolink`，正则表达式`[\\p{L}\\s]+`帮助了我。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:02:09.750

尝试这个：

```
 String str = "Adobe Flash Player 11.4.402.287 (11.3 MB)";
    Pattern p = Pattern.compile("^([a-zA-Z ]+)([0-9]+).*");
    Matcher m = p.matcher(str);

    if (m.find()) {
        System.out.println(m.group(1));
    } 
```

您的尝试有两个问题：

1.  分组是使用完成的`()`，你没有为你真正想要的文本定义一个组
2.  您需要添加一个空格才能获得多个单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:00:01.627

您可以使用正则表达式：

```
String str = "Adobe Flash Player 11.4.402.287 (11.3 MB)";
String [] strs = str.split("([ |0-9|.|(.*MB)]*) [ |0-9|.|(.*MB)]*");
for (String strng : strs) {
    System.out.println(strng.trim());
} 
```

# javascript - 在 Django 应用程序中使用 jQuery $.ajax 处理 AJAX 响应

> ID：13135469
> 
> 赞同：0
> 
> 时间：2012-10-30T08:51:13.577
> 
> 标签：javascript, jquery, python, ajax, django

我正在对服务器进行 ajax 调用，并希望接收一个数组以进行进一步处理。我是一个初学者，对我真正在做什么感到很困惑。下面是我到目前为止想出的一个片段。在我尝试处理返回的数据之前，它运行良好。我认为我的问题是我并不真正了解如何形成正确的响应以及如何处理它。

**JAVASCRIPT/JQUERY：**

```
var shoppingList = {
    // SOME CODE BEFORE

    'foodIngredients' : function() {
        // Send a list of food ids and receive an array of necessary ingredients. Make the returned array unique.
        $.ajax({
            url: 'http://localhost:8000/ingredients/',
            // ingredients.html template:
            // [{% for item in ingredients %}{% if forloop.last %}{{ item.id }}{% else %}{{ item.id }},{% endif %}{% endfor %}]
            type: 'POST',
            data: JSON.stringify(shoppingList.selectedFoods),
            dataType: 'text',
            cache: 'false',
            success: function(result){
                console.log(result); // [33,85,88,89,91]
                shoppingList.returnedIngredients = result;
                shoppingList.uniqueIngredients = _.unique(shoppingList.returnedIngredients);
                console.log(shoppingList.uniqueIngredients); // [,3,,,8,5,9,1,] <-- NOT OK; Expected [33,85,88,89,91]
            }
    });
    },

    // SOME CODE AFTER
}; 
```

**成分视图：**

```
def ingredients(request):
    if request.is_ajax():
        ourid = json.loads(request.raw_post_data)
        ingredients = Ingredience.objects.filter(food__id__in=ourid)
        t = get_template('ingredients.html')
        html = t.render(Context({'ingredients': ingredients,}))
        return HttpResponse(html)
    else:
        html = '<p>This is not ajax</p>'      
        return HttpResponse(html) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:18:41.053

结果是一个字符串，而不是一个数字数组。所以 _.unique 返回字符串中的唯一字符。您需要使用`jSON.Parse`将结果转换为数组。或`dataType: 'json'`在选项中指定。

# database - 黑盒测试 - 通过存储过程测试存储在数据库中的值的最大长度

> ID：13135471
> 
> 赞同：1
> 
> 时间：2012-10-30T08:51:15.823
> 
> 标签：database, web-testing

几天前我遇到了这个问题，但我仍在努力寻找答案。

我们获得了一个功能来测试为选定的汽车上传图像。页面中只有一个`Browse`按钮和一个`Upload`按钮。

我们必须测试图像名称是否以格式保存

```
(make year-car make-car model-car version-unique ID.jpg) 
```

我们对许多不同的汽车进行了测试，功能运行良好。

但是，我们错过了一件事。

为将这些图像 URL 保存到数据库中创建了一个存储过程（它没有与我们共享。我们通常进行黑盒测试。）

用于保存的数据库列大小为 100 个字符，但存储过程将图像 URL 存储在长度为 50 个字符的变量中

现在，大多数汽车的图像名称和 URL 都已正确保存。

但是，对于图像 URL 长度超过 50 个字符的汽车，数据在保存在数据库中时会被截断。

这导致了生产中的一个重大问题，我很困惑我怎么能早点发现这个问题。

这是一个可以通过黑盒测试发现的错误，或者这是你学会通过经验检查的那种错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:19:25.663

这是一个糟糕的设计，可以通过黑盒测试发现。对于未知/不完全确定的输入，数据库设计人员得到了大约 100 个字符。存储过程应设计为匹配数据库。这应该是通过 [**边界值测试**](http://www.guru99.com/black-box-testing.html)发现的。

> 边界值测试侧重于边界值。该技术确定系统是否可以接受某个范围的值。它对于减少测试用例的数量非常有用。它主要适用于输入在一定范围内的系统。

即 .jpg <=100 个字符的长度

# java - 理解代码片段IPCamera for android

> ID：13135475
> 
> 赞同：0
> 
> 时间：2012-10-30T08:51:48.447
> 
> 标签：java, android, sockets, nanohttpd

任何人都请帮助我理解这段代码。这是从我从 googlecode 中获取的 android 的 IPCamera 中获取的。我试图弄清楚的代码是：

```
public NanoHTTPD( int port, File wwwroot ) throws IOException
    {
        myTcpPort = port;
        this.myRootDir = wwwroot;
        myServerSocket = new ServerSocket( myTcpPort );
        myThread = new Thread( new Runnable()
            {
                public void run()
                {
                    try
                    {
                        while( true )
                            new HTTPSession( myServerSocket.accept());
                    }
                    catch ( IOException ioe )
                    {}
                }
            });
        myThread.setDaemon( true );
        myThread.start();
    }

private class HTTPSession implements Runnable
    {
        public HTTPSession( Socket s )
        {
            mySocket = s;
            Thread t = new Thread( this );
            t.setDaemon( true );
            t.start();
        }

        public void run()
        {
            try
            {
                InputStream is = mySocket.getInputStream();
                if ( is == null) return; 
```

我想知道的事情。请告诉我我的理解是否有误：

1-`myServerSocket.accept()`此代码将返回什么？布尔值是真还是假？

2-`InputStream is = mySocket.getInputStream();`输入流是获取字节流。但是程序在 mySocket 上读取了什么。据我了解，它读取端口号。获取字节与 mySocket 有什么关系？

如果我的理解完全错误，我真的很抱歉，因为套接字不是我的知识。请帮助我更多地了解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:56:57.023

这是ServerSocket的[accept()方法](http://developer.android.com/reference/java/net/ServerSocket.html#accept%28%29)

> 等待传入请求并阻塞，直到连接打开。

和

> 退货
> 
> 表示套接字的连接。

这是getInputStream [()](http://developer.android.com/reference/java/net/Socket.html#getInputStream%28%29)

> 返回输入流以从此套接字读取数据。

您可能想阅读套接字和流。

这是 Java 的教程[All About Sockets](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)。

# c++ - 在简单情况下同时写入和读取布尔值的危险

> ID：13135479
> 
> 赞同：3
> 
> 时间：2012-10-30T08:52:13.840
> 
> 标签：c++, multithreading, nonatomic

我读过一些类似的问题，但那里描述的情况要复杂一些。

我在堆和两个线程中有一个`bool b`初始化。`false`我确实理解`bools`are 的操作`not atomic`，但请阅读问题直到最后。

第一个线程只能设置`b = true`一次，并且不做任何其他事情。第二个线程`b`在一个循环中检查，如果它`true`做了一些动作。

我是否需要使用一些同步机制（如互斥锁）来保护`b`？如果我不这样做会发生什么？当`ints`我同时读写时，我显然可以得到任意值。但是有了`bools`just `true`and`false`我不介意一次得到`false`而不是`true`. 有潜力`SIGSEGV`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T09:00:55.990

数据竞争导致未定义的行为。就标准而言，允许符合标准的实现出现段错误。

在实践中，主要的危险是如果没有同步，编译器将在读取器循环中观察到足够多的代码来判断`b`“从不更改”，并优化除第一次读取值之外的所有代码。它可以这样做，因为如果它观察到循环中没有同步，那么它就知道对该值的任何写入都是数据竞争。允许优化器假设您的程序不会引发未定义的行为，因此允许假设没有来自其他线程的写入。

标记`b`为`volatile`将在实践中阻止这种特定的优化，但即使在`volatile`对象上，数据竞争也是未定义的行为。调用优化器“看不到”的代码也会在实践中阻止优化，因为它不知道该代码是否修改了`b`. 当然，与仅编译时优化相比，优化器无法看到的链接时间/整个程序优化更少。

无论如何，阻止在软件中进行优化并不能阻止在具有非一致缓存的系统上的硬件中发生相同的事情（至少，所以我声称：其他人认为这是不正确的，并且需要`volatile`访问通过缓存读/写。一些实现确实是这样）。如果您询问标准的内容，那么硬件是否无限期地向您显示陈旧的缓存并不重要，因为行为仍然未定义，因此无论此*特定*优化是否是问题，实现都可能破坏您的代码这打破了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T09:03:11.873

您*可能会*遇到的问题是，我们不知道读取线程需要多长时间才能看到更改的值。如果它们位于不同的 CPU 上，具有单独的缓存，则除非您使用内存屏障来同步缓存，否则无法保证。

在 x86 上，这是由硬件协议自动处理的，但在其他一些系统上则不然。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T09:01:33.800

> 我是否需要使用一些同步机制（如互斥锁）来保护`b`？

如果你不这样做，你就有了数据竞赛。具有数据竞争的程序具有未定义的行为。这个问题的答案与“你希望你的程序有明确定义的行为吗？”这个问题的答案是一样的。

> 如果我不这样做会发生什么？

从理论上讲，任何事情都可能发生。这就是未定义行为的含义。最可能发生的坏事是“第二个线程”可能永远看不到`true`值。

编译器可以假设一个程序没有数据竞争（如果它的行为不是由标准定义的，那么表现得好像它没有问题一样）。由于第二个线程只从具有 value 的变量中读取`false`，并且没有影响这些读取的同步，因此逻辑结论是 value 永远不会改变，因此循环是无限的。（并且一些无限循环在 C++11 中有未定义的行为！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T09:47:20.727

以下是一些替代解决方案：

1.  使用互斥锁，详细信息已在上面的其他答案中介绍。

2.  考虑使用一个读/写锁来管理/保护同时的读写。pthread 库提供了一个实现：pthread_rwlock_t

3.  根据您的应用程序正在做什么，考虑使用条件变量（pthread lib impl: pthread_cond_t）。这实际上是从一个线程到另一个线程的信号，它可以让您删除您的 while 循环和布尔检查。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-30T09:07:45.177

使布尔值 volatile 就足够了（在 x86 架构上），不需要互斥体：

```
volatile bool b; 
```

# hardware - Smartmontools 的可能性

> ID：13135481
> 
> 赞同：1
> 
> 时间：2012-10-30T08:52:20.067
> 
> 标签：hardware

smartmontools 是否有可能发送特定命令？例如，读取本机最大地址。如果有可能怎么办？

阅读手册并没有给我任何相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:04:19.497

不，smartctl 不能那样做。

如果您想知道真实的物理磁盘大小，您应该使用`hdparm -N`.

# python - 使用python创建新的xml

> ID：13135487
> 
> 赞同：0
> 
> 时间：2012-10-30T08:52:35.390
> 
> 标签：python

```
import xml.etree.ElementTree as ET

doc    = ET.parse("users.xml")
root = doc.getroot() #Returns the root element for this tree.
root.keys()          #Returns the elements attribute names as a list. The names are returned in an arbitrary order
for child in root:
    username             = child.attrib['username']
    password             = child.attrib['password']
    grant_admin_rights   = child.attrib['grant_admin_rights']
    create_private_share = child.attrib['create_private_share']
    uid                  = child.attrib['uid']

root  = ET.Element("users")
user  = ET.SubElement(root, "user")
user.set("username",username)
user.set("password",password)
user.set("grant_admin_rights",grant_admin_rights)
user.set("create_private_share",create_private_share)
user.set("uid",uid)

tree = ET.ElementTree(root)
myxml = tree.write("new.xml") 
```

此代码的输出：-

```
<users><user create_private_share="no" grant_admin_rights="no" password="sp" uid
="1000" username="us" /></users> 
```

但我试图让它像这样：-

```
<users>

<user create_private_share="no" grant_admin_rights="no" password="sp" uid
="1000" username="us" ><group>hfhfhf</group> </user>

</users> 
```

而不是这个`<user />`，我正在尝试`<user> <group>fgfg</group> </user>`。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:56:35.777

试试[`SubElement`](http://effbot.org/zone/pythondoc-elementtree-ElementTree.htm#elementtree.ElementTree.SubElement-function)工厂功能：

```
group = SubElement(user, "group")
# ... 
```

# java - 根元素中的属性会导致 Java 中的 XPath 评估出现问题

> ID：13135494
> 
> 赞同：0
> 
> 时间：2012-10-30T08:53:11.970
> 
> 标签：java, xml, xpath

我正在尝试使用以下方法评估 XPath 表达式“/feed/entry/title”：

```
NodeList nodeList = (NodeList) inputXMLxpath.evaluate("/feed/entry/title", xmlDoc,
                XPathConstants.NODESET); 
```

如果 xmlDoc 是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<feed>
  <entry>...
<feed> 
```

我得到了正确的结果，但是当 xmlDoc 是这样的时候：

```
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-US">
  <entry>...
</feed> 
```

XPath 评估的结果始终是一个空列表。

任何人都可以说出原因并提出解决方案，以便我在第二种情况下也能得到正确的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:51:30.283

xmlns-"...." 是一个命名空间声明，它的作用是改变文档中元素的名称，使它们不再被称为“feed”和“entry”，而是更复杂的东西。谷歌“XPath 默认命名空间声明”。

# java - 如何在 PageFactory @FindBy 注释中使用属性文件值？

> ID：13135495
> 
> 赞同：4
> 
> 时间：2012-10-30T08:53:15.897
> 
> 标签：java, webdriver

我最近开始将 Selenium2 与 Page Object Pattern 与 Page Factory 结合使用。我有使用 @FindBy Annotations 声明的 WebElements，它们在类初始化时由 PageFactory 初始化。但是，我想将 @FindBy 注释与 locators.properties 文件一起使用。不幸的是，我似乎无法做到这一点，因为注释仅限于允许常量表达式。一般来说，这似乎是 Java Annotations 的一个限制，但我只是想知道是否有人找到了解决方法。我宁愿从外部源加载定位器，但我会失去使用 PageFactory 的好处。

公共类登录页面 {

```
 protected WebDriver driver; 

    @FindBy(id = "username") 
    private WebElement usernameField; 

    @FindBy(id = "password") 
    private WebElement passwordField; 

    @FindBy(id = "button_login") 
    private WebElement loginButton; 

    public LoginPage(WebDriver driver) { 
            this.driver = driver; 
            PageFactory.initElements(driver, this); 
    } 
```

}

我想实现与此类似的东西，但我不能，因为注释不允许这样做：

公共类登录页面 {

```
 protected WebDriver driver; 

    Properties locators = new Properties(); 

    @FindBy(id = locators.getProperty("login.usernameField")) 
    private WebElement usernameField; 

    @FindBy(id = locators.getProperty("login.passwordField")) 
    private WebElement passwordField; 

    @FindBy(id = locators.getProperty("login.loginButton")) 
    private WebElement loginButton; 

    public LoginPage(WebDriver driver) { 
            this.driver = driver; 
            // Load the locators.properties File here 
            PageFactory.initElements(driver, this); 
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:32:48.030

你暂时不能。

您总是可以编写一种方法来实现它，并将其作为可以应用回 Selenium 代码库的补丁提供：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T10:22:19.290

这是可能的，这个链接确实很有帮助[Selenium Page Object Reuse](https://stackoverflow.com/questions/3981498/selenium-page-object-reu) ‌​se

我已经设法从配置中读取定位器，请看一下 [Selenium Page Object。如何从外部源读取@FindBy 定位器？](https://stackoverflow.com/questions/39914981/selenium-page-object-how-to-read-findby-locator-from-external-source/39947857#39947857)

# script# - 如何在 script# 中编写一个函数，以便使用任何对象调用，而不仅仅是使用定义它的类的实例？

> ID：13135498
> 
> 赞同：2
> 
> 时间：2012-10-30T08:53:32.360
> 
> 标签：script#

我正在用脚本# 编写 javascript。我想写一个看起来像的函数

```
function myFunc()
{
    if(this.value > 100)
          return true;
    else
          return false;
} 
```

可以使用具有属性“值”的任何实例调用此函数。

如何在 Script# 中编写此函数？在 Script# 中，生成的 javascript 代码似乎正在对 this 进行本地引用，并且当某些其他对象作为“this”传递时不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:13:56.173

这类似于能够在 jQuery 回调函数中引用“this”。例如，请参阅 jQuery 类的 Current 属性（https://github.com/nikhilk/scriptsharp/blob/cc/src/Libraries/jQuery/jQuery.Core/jQuery.cs）。

具体来说，如果你这样写：

```
[ScriptImport]
public static class Global {

    [ScriptField, ScriptAlias("this")]
    public static object This {
        get { return null; }
    }
} 
```

然后你可以这样写：

```
public static class MyCode {

    public static bool MyFunction() {
         return (Script.GetField<int>(Globals.This, "value") > 100);
    }
} 
```

当然，您也可以编写导入的类以返回一个强类型类（再次参见 jQuery 示例），这样就可以在不使用 Script.GetField 的情况下编写 MyFunction。

上面的代码假定使用 script# 0.8 API（您可以从 github 上的项目下载页面获取）。对于以前的构建，将 [ScriptImport] 替换为 [Imported]，将 [ScriptField] 替换为 [IntrinsicProperty]。

我希望在 Script 类中放置类似 This 属性的内容，以便在 0.8 最终确定时可以立即使用它。

# objective-c - 在 ios 中重绘视图

> ID：13135502
> 
> 赞同：5
> 
> 时间：2012-10-30T08:53:45.417
> 
> 标签：objective-c, ios

是否可以重绘整个视图。

我需要它来完成我的语言设置。问题是语言只有在再次绘制视图后才会改变。就像您退出设置然后再次进入，然后更改语言。但是，当您保存所有内容时，语言保持不变。

那么，在发现语言更改后，我应该如何重绘我的视图，或者最好是整个应用程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T09:02:45.960

在 ARC 中：

```
- (void)setLanguage:(LanguageType)languageType
{
    _language = languageType;

    //TODO:your settings

    [_theWholeView setNeedsDisplay];
} 
```

如果这样不行，有一个非常麻烦的解决方案，它可以重新加载整个视图。

您可以这样编写代码：在 view.h 中，您需要创建一个委托。@protocol WholeViewDelegate

```
- (void)reloadData; 
```

@结尾

在视图中.m

```
- (void)setLanguage:(LanguageType)languageType
{
    _language = languageType;

    //TODO:your settings

    [_delegate reloadData];
} 
```

在控制器中，您需要在 controller.m 中实现委托

```
- (void)reloadData
{
    if(_wholeView)
    {
        [_wholeView removeFromSuperview];
    }
    // in the wholeView init method you should refresh your data
    _wholeView = [[WholeView alloc] init];
    self.view addSubview:_wholeView
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T09:02:54.180

是的。调用`[UIView setNeedsDisplay]`（[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/setNeedsDisplay)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:10:42.590

只需调用 setNeedsDisplay.. 即可解决问题。setNeedsDisplay 实际调用 UIView 类中的 drawRect 函数，是通过将视图的边框作为矩形参数传入。希望有帮助....

# android - 如何将长期价值从一项活动发送到另一项活动？

> ID：13135505
> 
> 赞同：1
> 
> 时间：2012-10-30T08:54:10.830
> 
> 标签：android, listview, cursor, bundle

我在我的活动中使用 ListView。在任何已选择的列表项（ID）上，它应该在另一个活动中显示整行（与 ID 关联）。我使用捆绑对象通过“putExtra”传递长值。但这也不起作用。我可以知道我怎么能完成它。？

**第一项活动：**

```
Bundle dataBundle = new Bundle();
dataBundle.putLong("ID",id);

Intent myIntent = new Intent();
myIntent.setClassName("com.mink7.databaseapplication", "com.mink7.databaseapplication.OnItemClickFromLV");
myIntent.putExtras(dataBundle);
startActivity(myIntent); 
```

**第二个活动：**

```
Bundle extras = getIntent().getExtras(); 

if(extras !=null)
{
    long idd = extras.getLong("ID",0);
    Cursor c=db.getName(idd);
    final String name_ret = c.getString(c.getColumnIndex("name"));
    final int age_ret = Integer.valueOf(c.getString(c.getColumnIndex("age")));
    final String city_ret = c.getString(c.getColumnIndex("city"));
    t1.setText(name_ret);
    t2.setText(age_ret);
    t3.setText(city_ret);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:14:51.997

尝试这个。

对于将数据从第一个活动传递到第二个活动：-

```
Intent myIntent = new Intent();
myIntent.setClassName("com.mink7.databaseapplication", "com.mink7.databaseapplication.OnItemClickFromLV");
myIntent.putExtras("ID", id);
startActivity(myIntent); 
```

对于获取数据：-

```
Bundle bdl=getIntent().getExtras();
long id=bdl.getLong("ID"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:56:12.017

直接加long就好`intent.putExtra("ID",value)`了，就好像extra已经是键值对了。然后用于接收第二个活动值的代码应该可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T10:17:24.920

```
//First Activity(Pass Long Value through intent.putExtra("KEY",LongValue) )        
long longValue = 991909000000L;    
Intent myIntent = new Intent(getApplicationContext(),Second.class);    
myIntent.putExtra("KEYVALUE",longValue);    
startActivity(myIntent);    
//SecondActivity (Second.class)(Get Long value through Bungle)    
Bundle b1 = getIntent().getExtras();
long longValue = b1.getLong("KEYVALUE");    
Toast.makeText(getApplicationContext(),"Long Value :- " + longValue,Toast.LENGTH_LONG).show();        
//Manifest.xml (define your second class file in manifest file)    
<activity android:name=".Second" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T09:11:18.330

```
// In Activity A                 
Hashtable hashtable = new Hashtable();  
/* adding element in hashtable */  

Intent intent = new Intent(A.this, B.class);    
intent.putExtra("hashtable", hashtable);  
intent.putExtra("MyClass", obj);  
startActivity(intent);   

//in Activity B  
Bundle bundel = getIntent().getExtras();  
try{  
    ads = (myClass) bundel.get("MyClass");  
    hashtable = (Hashtable) bundel.get("hashtable");  
}catch(Exception e){
    Log.i(" Error at bundle " , e.toString());
} 
```

并使用此链接，您可以将所有值从一个活动传递到另一个活动..

[http://www.coderanch.com/t/470615/Android/Mobile/Passing-object-one-other-activity](http://www.coderanch.com/t/470615/Android/Mobile/Passing-object-one-other-activity)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T08:56:16.837

尝试这个。您可以直接将值传递给活动，而无需使用 bundle。

```
myIntent.putExtras("ID",id); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T09:02:10.420

尝试这个

```
myIntent.putExtra("ID",id); 
```

检查此以获取更多信息

[http://droidweb.com/2010/02/developer-tip-10-passing-data-between-activities-via-bundles/](http://droidweb.com/2010/02/developer-tip-10-passing-data-between-activities-via-bundles/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T09:23:04.417

嘿伙计们，我能够完成它。

利用

t1.setText(String.valueOf(name_ret));

代替

t1.setText(name_ret)

# freebase - Freebase 数据库中有哪些类型？

> ID：13135509
> 
> 赞同：4
> 
> 时间：2012-10-30T08:54:30.160
> 
> 标签：freebase

我读到，对于每个实体，都可以有一个或多个与之相关的类型。总体而言，Freebase 中可用/涵盖的所有类型有哪些？有没有可以获取这些信息的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:27:22.207

Freebase中有[23425](http://www.freebase.com/queryeditor?q=%5B%7B%22type%22%3a%22/type/type%22,%22return%22%3a%22count%22%7D%5D&autorun=true)种类型，但其中许多没有或很少有与之关联的实体。[最有趣的类型是“commons”中的类型，您可以在 Freebase主页上](http://www.freebase.com/home)看到按域分组的类型。

[您可以使用这样](http://www.freebase.com/queryeditor?q=%5B%7B%22type%22%3a%22/type/type%22,%22name%22%3anull,%22id%22%3anull,%22domain%22%3a%5B%7B%22key%22%3a%5B%7B%22namespace%22%3a%7B%22id%22%3a%22/%22%7D,%22limit%22:0%7D%5D,%22id%22%3anull,%22name%22%3anull%7D%5D,%22limit%22:2200%7D%5D)的查询来获取公用类型的完整列表。这将为您提供属于根 ("/") 中的域的所有当前 2,174 种类型，以及它们的名称、ID 和它们所属的域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T11:14:56.160

如果你写

```
{
  "type": "/type/type",
  "return": "estimate-count"
} 
```

您得到**40616，截至 2013 年 6 月 17 日**

# android - Android：从 arrayadapter / arraylist 填充列表视图

> ID：13135510
> 
> 赞同：1
> 
> 时间：2012-10-30T08:54:36.573
> 
> 标签：android, eclipse, listview, arraylist, android-arrayadapter

我正在制作一个应用程序，它通过 AsyncTask 从 url 轮询 XML 表，因此它不会干扰 mainThread。

我已经能够建立连接、检索 xml 并在循环中解析值并将它们添加到数组列表中。

我的问题是，当应用程序在手机上加载时，arraylist 应该转换为 arrayadapter，然后在应用程序中填充 listview。

我已经让它与一个硬编码的 xml 文件一起工作，但是当我尝试使用我的动态 xml 中的解析值时，应用程序就会失败。

此代码正在获取 XML 表并将其添加到数组列表“menuItems”中 - 这很好用

```
@Override
protected Boolean doInBackground(String... params) {

Log.d("beskeden", "Henter adressen: " + URL);

try{
ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();            

XMLParser parser = new XMLParser(); 
String xml = parser.getXmlFromUrl(URL); // getting XML 
Document doc = parser.getDomElement(xml); // getting DOM element 

NodeList nl = doc.getElementsByTagName(KEY_ITEM); 

// looping through all item nodes <item> 
for (int i = 0; i < nl.getLength(); i++) { 

     HashMap<String, String> map = new HashMap<String, String>(); 
     map.put(KEY_NAVN, nl.item(i).getChildNodes().item(1).getTextContent());
     map.put(KEY_BESKRIVELSE, nl.item(i).getChildNodes().item(1).getTextContent()); 
     map.put(KEY_THETYPE, nl.item(i).getChildNodes().item(1).getTextContent()); 
     map.put(KEY_THETIMER, nl.item(i).getChildNodes().item(1).getTextContent()); 
     map.put(KEY_THEGRADER, nl.item(i).getChildNodes().item(1).getTextContent()); 
     map.put(KEY_THESEMERE, nl.item(i).getChildNodes().item(1).getTextContent()); 
     map.put(KEY_IDP, nl.item(i).getChildNodes().item(1).getTextContent());                  

    Log.e("Beskeden", nl.item(i).getChildNodes().item(1).getNodeName() + ": " + nl.item(i).getChildNodes().item(1).getTextContent());               
    Log.e("Beskeden", nl.item(i).getChildNodes().item(3).getNodeName() + ": " + nl.item(i).getChildNodes().item(3).getTextContent());               
    Log.e("Beskeden", nl.item(i).getChildNodes().item(5).getNodeName() + ": " + nl.item(i).getChildNodes().item(5).getTextContent());               
    Log.e("Beskeden", nl.item(i).getChildNodes().item(7).getNodeName() + ": " + nl.item(i).getChildNodes().item(7).getTextContent());

    menuItems.add(map);                 
}        

Log.d("beskeden", "Antal theer: " + nl.getLength());            
Log.d("beskeden", "Xml er blevet parset");

return true;
} catch (Exception e){
return false;
}

} 
```

以下代码正在执行，所以我无法编译和测试它 - 真令人沮丧：/

```
//@Override
protected void onPostExecute(final Boolean success) {
//super.onPostExecute(result);
Log.d("Besked", "Post executen");

if (success) {
    Log.d("Beskeden", "SUCCES!!");
    ArrayAdapter adapter = new ArrayAdapter(this, R.layout.list_item, menuItems);
}else{
        Log.d("Beskeden", "FAIL!!");
} 
```

我有点卡住了，所以欢迎任何帮助:)

# android - 损坏... SDK 管理器中的 Android 系统映像

> ID：13135511
> 
> 赞同：8
> 
> 时间：2012-10-30T08:54:46.523
> 
> 标签：android

我在我的 Android SDK 管理器中注意到以下内容（如下截图）：

```
Broken Intel x86 Atom System Image, API 16
Broken Mips System Image, API 16
Broken ARM EABI v7a System Image, API 16 
```

我应该在哪里将我的系统映像存储在 android-sdk 内的哪个文件夹中以消除“Broken”错误消息？

* * *

![在此处输入图像描述](../Images/8be1e3f6453bb9e014659a50c99551c8.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T06:19:18.970

我意识到实际上，我的 SDK 管理器中需要有 API 16，否则系统映像会损坏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-14T00:49:57.420

你必须安装“Google play services for fit Preview”这对我有用 ![在此处输入图像描述](../Images/5a7e53929ebf7ea314289a83f5d37690.png)

# c++ - 在 C++ 中从 ComTypes.STGMEDIUM 获取 IStorage

> ID：13135518
> 
> 赞同：0
> 
> 时间：2012-10-30T08:54:55.777
> 
> 标签：c++, .net, winapi, visual-c++

我有一个[ComTypes.STGMEDIUM](http://msdn.microsoft.com/en-us/library/7hfcbw59%28v=vs.100%29.aspx)对象，我想得到它的 IStorage。从[STGMEDIUM 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683812%28v=vs.85%29.aspx)中，您可以在 pstg 成员的帮助下获得它。ComTypes.STGMEDIUM[类](http://msdn.microsoft.com/en-us/library/7hfcbw59%28v=vs.100%29.aspx)缺少这样的成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:21:15.540

它就在那里，联合被展平为一个简单的 IntPtr 类型的单个字段。你可以投它：

```
#include <windows.h>

using namespace System::Runtime::InteropServices;

    //...
    ComTypes::STGMEDIUM foo;
    IStorage* pStore = (IStorage*)foo.unionmember.ToPointer(); 
```

或者，如果您愿意，也可以编组整个结构：

```
::STGMEDIUM native;
Marshal::StructureToPtr(foo, IntPtr(&native), false);
IStorage* pStore = native.pstg; 
```

# jquery - 在什么场景下我们需要在mvc中使用jQuery？

> ID：13135526
> 
> 赞同：-2
> 
> 时间：2012-10-30T08:55:38.623
> 
> 标签：jquery, asp.net-mvc, c#-4.0

作为 MVC 的初学者，我仍然无法理解在什么场景下我们需要使用 jQuery，jQuery 和 MVC 之间的关系。到目前为止，我注意到我们在 MVC 中大量使用 jQuery，如果没有 jQuery 知识，就不可能学习 MVC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:02:11.920

The first thing you need to do is understand the difference between the **server** and the **client**.

[ASP.NET MVC](http://www.asp.net/mvc) lives on the server. MVC is a framework for serving up web requests. You can write MVC applications that use 0 lines of JavaScript or jQuery.

The client-side JavaScript, specifically [jQuery](http://jquery.com/), is its own monster. jQuery provides shortcuts for working and manipulating the DOM. jQuery and JavaScript is independent of the server, and can be used with any type of web server, Microsoft stack or otherwise.

The two are very closely related because there is a lot of functionality where constant communication between the server and the client, or pages that change as the user performs various actions, is almost necessary functionality in "modern" web applications.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:05:43.337

版本 3 中的 MVC 框架中的 jQuery 用于

*   客户端不显眼的验证
*   不显眼的阿贾克斯

它提供了一个优雅的基于 CSS 3 的语法来遍历你的 DOM，一个流畅的 API 用于操作和动画 DOM 元素，以及非常简洁的 Ajax 调用包装器——所有这些都经过精心抽象以消除跨浏览器的差异。

# java - JInput 不更新/刷新

> ID：13135528
> 
> 赞同：3
> 
> 时间：2012-10-30T08:55:51.237
> 
> 标签：java, jinput, gamepad-api

我在 Win7 64 位上使用 JInput 进行游戏手柄控制。我遇到了一个问题：一旦我得到`DefaultEnvironment`控制器列表就不会更新或刷新。

```
 for (Controller c : ControllerEnvironment.getDefaultEnvironment().getControllers()) {
        if (c.getType() == Controller.Type.GAMEPAD) {
            pluggedControllers.put(c);
        }
    } 
```

因此，如果在我调用之后控制器被插入或拔出，​​则`ControllerEnvironment.getDefaultEnvironment()`没有任何变化。该列表仍将提供死控制器，并且无法添加新控制器。

目前我正在使用这种我认为非常难看的解决方法。任何想法如何在没有这个黑客的情况下使它工作：

```
if (System.getProperty("os.name").equals("Windows 7") &&
    System.getProperty("os.arch").equals("amd64"))
        try {
            Class<?> clazz = Class.forName("net.java.games.input.DefaultControllerEnvironment");
            Constructor<?> defaultConstructor = clazz.getDeclaredConstructor();
            defaultConstructor.setAccessible(true); // set visibility to public

            Field defaultEnvironementField = ControllerEnvironment.class.getDeclaredField("defaultEnvironment");
            defaultEnvironementField.setAccessible(true);
            defaultEnvironementField.set(ControllerEnvironment.getDefaultEnvironment(), defaultConstructor.newInstance());
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:23:51.147

过去偶尔会要求这样做。2种方法来解决这个问题。

1) 在开始游戏之前插入所有控制器。并非所有现有游戏都支持这一点。

2）实现存在的接口接口。我已经多次要求志愿者来做这项工作，但每当我这样做时，这突然变得不那么重要了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-19T10:09:38.237

通过调用获取您的控制器

```
DirectAndRawInputEnvironmentPlugin directEnv = new DirectAndRawInputEnvironmentPlugin();
controllers = directEnv.getControllers(); 
```

# c# - 使用 WCF 和 InRequestScope 在 N 层应用程序中注入

> ID：13135532
> 
> 赞同：0
> 
> 时间：2012-10-30T08:56:05.747
> 
> 标签：c#, wcf, entity-framework, ninject

我正在使用带有 WCF 扩展和 Web 扩展的 Ninject 3.01.1.10（全部来自 nuget）

我在使用实体框架和存储库模式的 WCF 服务（具有多个客户端桌面应用程序）中使用 NInject。

由于我使用的是 EF，因此我想使用 InRequestScope 以便在每次有服务请求时创建每个存储库（正如 EF 良好实践所规定的那样）。

我通过 nuget 安装了所有东西，并让 NinjectWebCommon 引导程序类在 RegisterServices 中注册服务，如 Ninject WCF 示例所示。当我在网上某处阅读时，我在 InstanceContextMode.PerCall 中也有 WCF 服务。

我的问题是：注入对象的所有链是否都需要在 InRequestScope 中以便范围有效？

我的 WCF 服务在构造函数中注入了 ServiceHandlerDispatcher：

```
public VanillaService(IServiceHandlerDispatcher serviceHandlerDispatcher) { ... } 
```

这个 ServiceHandlerDispatcher 有一个对象字典 ServiceHandler，它根据客户端的处理程序请求调用一个 Controller 对象。此控制器对象具有使用存储库的方法。

```
public ServiceHandlerDispatcher(IMessageHandler[] messageHandlers) { ... }

public SaveSubmissionHandler(SubmissionController submissionController) { ... }

public SubmissionController(IRepository<Submission> submissionRepository) { ... } 
```

所以链是这样的：Service -> ServiceHandlerDispatcher -> ServiceHandler -> 控制器 -> 存储库 -> DB

出于性能和内存的目的，我希望 ServiceHandlerDispatcher 和所有 ServiceHandler 在单例范围内，但在 InRequestScope 中的存储库对象（以便在每次调用中释放 EF 的 DbContext ），因为我可以有几十个 ServiceHandler 对象。

同样，Service -> ServiceHandlerDispatcher (SingletonScope) -> ServiceHandler (SingletonScope) -> 控制器 (none) -> 存储库 (InRequestScope) -> DB

这是可能的还是我必须让内核在每次调用中创建每个 ServiceHandler？如果需要链中的每个对象都需要是 InRequestScope，那么如何实现 ServiceHandler 字典呢？使用工厂扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:44:42.920

所以，这是不可能的。如果链中的第一项具有比其他项更大的范围（在本例中为 SingletonScope），则链中的其他项也将具有该范围。

# iphone - GCD 出现问题并在 TableView 中加载缩略图

> ID：13135537
> 
> 赞同：0
> 
> 时间：2012-10-30T08:56:32.717
> 
> 标签：iphone, ios, cocoa-touch, parallel-processing, grand-central-dispatch

我有以下代码尝试异步加载表格视图中的一行缩略图：

```
for (int i = 0; i < totalThumbnails; i++)
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), 
    ^{
        __block GraphicView *graphicView;
        __block Graphic *graphic;

        dispatch_async(dispatch_get_main_queue(), 
        ^{
            graphicView = [[tableViewCell.contentView.subviews objectAtIndex:i] retain];
            graphic = [[self.thumbnailCache objectForKey: [NSNumber numberWithInt:startingThumbnailIndex + i]] retain];

            if (!graphic)
            {
                graphic = [[self graphicWithType:startingThumbnailIndex + i] retain];
                [self.thumbnailCache setObject: graphic forKey:[NSNumber numberWithInt:startingThumbnailIndex + i]];
            }

            [graphicView setGraphic:graphic maximumDimension:self.cellDimension];
        });

        [graphicView setNeedsDisplay];

        dispatch_async(dispatch_get_main_queue(), 
        ^{
            CGRect graphicViewFrame = graphicView.frame;
            graphicViewFrame.origin.x = ((self.cellDimension - graphicViewFrame.size.width) / 2) + (i * self.cellDimension);
            graphicViewFrame.origin.y = (self.cellDimension - graphicViewFrame.size.height) / 2;
            graphicView.frame = graphicViewFrame;
        });

        [graphicView release];
        [graphic release];
    });

} 
```

但是，当我运行代码时，我在这一行的访问权限不好：`[graphicView setNeedsDisplay];`值得一提的是，当我这样设置代码时，代码工作正常：

```
for (int i = 0; i < totalThumbnails; i++)
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), 
    ^{
        dispatch_async(dispatch_get_main_queue(), 
        ^{
              //put all the code here
        });
} 
```

它工作正常，并且在`UITableView`第一次调用时异步加载，但是滚动仍然非常不稳定。

所以我想让第一个代码工作，这样我就可以在全局线程而不是主线程中完成绘图（我假设这会修复不连贯的滚动？）。

由于 iOS4 绘图能够异步完成，所以我不认为这是问题所在。可能我在滥用`__Block`类型？

有谁知道我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:32:16.080

你完全误解了如何使用 GCD。查看您的代码：

```
 __block GraphicView *graphicView; 
```

您在此处的变量未初始化为零。向其发送消息是不安全的。

```
 __block Graphic *graphic;

        dispatch_async(dispatch_get_main_queue(), 
        ^{
            //statements
        }); 
```

您在此处的调度语句会立即返回。该系统可让您在不同的线程上执行此任务。在执行上述语句之前，或者可能同时执行上述语句，我们在此处继续执行下一行...

```
 [graphicView setNeedsDisplay]; 
```

此时，图形视图可能已由您上面的调度语句初始化，也可能未初始化。很可能不会，因为没有时间。由于它还没有被初始化，它指向随机内存，因此尝试向它发送消息会导致 EXC_BAD_ACCESS。

如果您想异步绘制单元格内容（或预渲染图像等）。我强烈建议您观看[WWDC 2012](https://developer.apple.com/videos/wwdc/2012/)会议 211“在 iOS 上构建并发用户界面”。他们几乎完全按照您似乎正在尝试做的事情，并解释了您可能遇到的所有陷阱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:00:58.880

`UIView`我认为问题是因为您试图在工作线程上重新绘制。你应该移动这个：

```
[graphicView setNeedsDisplay]; 
```

到主队列。

# sql - 在 SQL 中查找两个嵌套聚合函数的最大值

> ID：13135540
> 
> 赞同：0
> 
> 时间：2012-10-30T08:56:36.433
> 
> 标签：sql, ms-access

我有一个带有以下表格和属性的 MS Access 2007 数据库：

*   人物：姓名
*   行星：名称
*   时间表：行星名称，角色名称

时间表表示如果一个角色访问过一个星球，一个星球可能有多个条目。
我想要得到的查询是这样的：
对于每部电影，哪些角色访问的行星数量最多？

这是我的尝试：

```
SELECT T.Movie, T.[Character's Name], Count(T.[Planet's Name]) AS planets
FROM TimeTable T
GROUP BY T.Movie, T.[Character's Name]
HAVING Count(T.[Planet's Name]) >= ALL (SELECT Count(T2.[Planet's Name])
FROM TimeTable T2 WHERE T.Movie = T2.Movie); 
```

它给了我一个空的结果。我的查询有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:04:38.133

您已要求大于或等于所有行的行。下面的查询将返回匹配项，即将返回具有相同最大值的所有行。

```
SELECT t.movie,
       t.character,
       Count(t.planet) AS CountOfPlanet
FROM   timetable t
GROUP  BY t.movie, t.character
HAVING Count(t.planet) = (
   SELECT Max(countofplanet)
   FROM   (
   SELECT movie,
          [character],
          Count(planet) AS CountOfPlanet
          FROM   timetable
          GROUP  BY movie, [character]) q
   WHERE  q.movie = t.movie) 
```

恐怕我无法应付您的字段名称。我可能忽略了这些空间，但撇号太过分了。

# java - 为什么我的网络接口列表不会打印？

> ID：13135543
> 
> 赞同：0
> 
> 时间：2012-10-30T08:56:51.387
> 
> 标签：java, collections

我正在尝试打印网络接口列表（最终将它们存储在某种字符串数组中）。以下代码仅在以下情况下打印接口列表

```
 String[] networkInterfaces = new String[Collections.list(nets).size()]; 
```

线不存在。如果该单行不存在，它将打印整个列表。

```
 Enumeration<NetworkInterface> nets = null;
    try {
        nets = NetworkInterface.getNetworkInterfaces();
    } catch (SocketException e) {
        e.printStackTrace();
    }
    System.out.println(Collections.list(nets).size());
    String[] networkInterfaces = new String[Collections.list(nets).size()];

    for (NetworkInterface netint : Collections.list(nets)) {
        System.out.println(netint.getName());
    } 
```

抱歉，这个问题没有标签，我不确定什么是合适的。知道为什么会这样吗？我已经对其进行了修改，以便将集合保存到 ArrayList 中（这似乎很好）

```
 ArrayList<NetworkInterface> netints = Collections.list(nets); 
```

但我仍然很好奇为什么其他方式不起作用。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:08:16.003

简而言之，这是因为 an`Enumeration`是一个有状态的迭代器。

第一次调用时`Collections.list(nets)`，这个库方法将遍历`nets`枚举，拉出元素，直到枚举不再返回。这按预期工作，返回的列表如您所料。

但是，在下一行您`Collections.list(nets)` *再次*调用。这会从 中提取所有元素`nets`，**这些元素现在已用尽**，因此“正确”地从没有（更多）元素的枚举中创建了一个空列表。

解决此问题的一种方法是立即转换`nets`为列表，然后在任何地方引用该列表。因此，您可以将代码的开头更改为：

```
List<NetworkInterface> nets = null;
try {
    nets = Collections.list(NetworkInterface.getNetworkInterfaces());
}
... 
```

然后只需稍后引用该`nets`列表，而不是每次都包装一个枚举。

# android - Android：如果从最近的任务启动应用程序，则活动正在使用旧意图

> ID：13135545
> 
> 赞同：25
> 
> 时间：2012-10-30T08:56:52.830
> 
> 标签：android, android-intent, notifications, flags

我正在实施 GCM。我的应用程序有两个活动，比如`A`和`B`。我正在使用此代码`B`从 NotificationBar 启动：

```
long when = System.currentTimeMillis();
NotificationManager notificationManager =
    (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
String title = context.getString(R.string.app_name);        
Notification notification = new Notification(R.drawable.app_notification_icon, "De Centrale", when);//message
Intent notificationIntent = new Intent(context, B.class);
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP); //|Intent.FLAG_ACTIVITY_REORDER_TO_FRONT
PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT);
notification.setLatestEventInfo(context, title, msg, intent);
notification.flags |= Notification.FLAG_AUTO_CANCEL;
notificationManager.notify(0, notification); 
```

NotificationBar 打开`B`带有 Intent 的 Activity，例如“B-notification-intent”，然后我使用“后退”按钮打开 Activity，然后再次`A`从拥有新 Intent（例如“BA-intent”）启动。我使用下面的代码：`B``B``A`

```
intent = new Intent(this, B.class); 
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);              
startActivity(intent); 
```

然后我得到新数据`B`（即`B`刷新屏幕）。但是，如果我按下主页按钮，然后从最近的应用程序启动应用程序，那么我会看到`B`带有“B-notification-intent”的旧屏幕。相反，我想要最新的 Intent，即“BA-intent”。我正在使用此代码`B`：

```
@Override
protected void onCreate(Bundle b)
{
    fetchDataFromDB(getIntent());           
}

@Override
protected void onNewIntent(Intent intent)
{
    fetchDataFromDB(intent);        
} 
```

所以任何人都请帮助我获取我当前的屏幕（意图）。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-04-07T10:22:45.177

我还注意到，有时从“最近”启动时`Activity`'s`onCreate()`会变得陈旧`Intent`，但有*一种*方法可以检查它，以便您可以`Intent`适当地处理。

爪哇：

```
protected boolean wasLaunchedFromRecents() {
    return (getIntent().getFlags() & Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY) == Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY;
} 
```

科特林：

```
fun wasLaunchedFromRecents(): Boolean {
    val flags: Int = intent.flags and Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY
    return flags == Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY
} 
```

在我看来，这个标志的名字很糟糕（引用最近列表的其他标志实际上使用了这个词，例如`FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS`, `FLAG_ACTIVITY_RETAIN_IN_RECENTS`）并且文档从未更新以反映许多流行的 Android 设备都有一个专门的最近按钮的事实：

> 此标志通常不由应用程序代码设置，但如果此活动从历史记录启动（长按主页键），则由系统为您设置。

（注意，我意识到您几年前以另一种方式解决了您的问题，但是这个问题是“android old intent recent”的热门搜索结果之一，其他相关问题都没有提到这个标志，所以希望这个答案可以帮助其他人.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-21T18:29:21.793

出于某种原因[，bkDJ 的 / 接受的答案](https://stackoverflow.com/a/29489276/14745399)对我不起作用。仅当接受的答案也对您不起作用时，请尝试以下操作：

FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY 和在第一次处理意图后设置布尔值都不会阻止意图被重用。

我必须为发生此问题的每个意图添加一个时间戳。并且仅在时间戳不超过 30 秒时执行意图。

像这样：

```
Intent intent = new Intent(CONTEXT, TargetActivity.class);
Calendar now = Calendar.getInstance();
intent.putExtra("timestampOfIntentInMilliseconds", now.getTimeInMillis());
// put your actual extras to the intent 
```

然后在处理意图时：

```
Bundle extras = intent.getExtras();
long timestampOfIntentInMilliseconds = extras.getLong("timestampOfIntentInMilliseconds");
now = Calendar.getInstance();
if(now.getTimeInMillis() < (timestampOfIntentInMilliseconds + 30000))
{
   // do what you want to do with the intent
} 
```

# c# - 使用多个对象填充 ViewModel

> ID：13135550
> 
> 赞同：1
> 
> 时间：2012-10-30T08:57:19.190
> 
> 标签：c#, asp.net, sql, asp.net-mvc, repository

考虑到这个 ViewModel

```
public class DocumentReferenceViewModel
{
    public int IdDocumentReference { get; set; }
    public string DocumentTitle { get; set; }
    public string PageNbr { get; set; }
    public string Comment { get; set; }
} 
```

*   **DocumentTitle 是Document**对象的一个​​属性
*   IdDocumentReference和**PageNumber**是 DocumentReference 对象的**属性**

 ****Document**和**DocumentReference**与属性*IdDocument链接*

*   我有一个可以返回**Document**对象的存储库
*   我有一个可以返回**DocumentReference**对象的存储库

* * *

```
public class DocumentReference
{
    public int IdDocumentReference;
    public string PageNbr { get; set; }
    public string Comment { get; set; }
}

public class Document
{
    public int IdDocument;
    public string DocumentTitle { get; set; }
} 
```

如何在不循环 DocumentReference 和每个查询数据库以检索 de DocumentTitle 的情况下从这两个对象（表）绑定 ViewModel ？

ps：我没有使用 EF，我有调用手写存储过程的存储库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:07:30.017

您可以在 ViewModel 中使用构造函数：

```
public class DocumentReferenceViewModel
{
    public int IdDocumentReference { get; set; }
    public string DocumentTitle { get; set; }
    public string PageNbr { get; set; }
    public string Comment { get; set; }

    public DocumentReferenceViewModel(){}

    public DocumentReferenceViewModel(Document doc, DocumentReference docRef){

      this.DocumentTitle = doc.DocumentTitle;
      this.IdDocumentReference = docRef.IdDocumentReference;
      this.PageNbr = docRef.PageNbr ;
    }
} 
```

您也可以使用 Comment 属性添加构造函数。

```
public DocumentReferenceViewModel(Document doc, DocumentReference docRef, string comment){

      this.DocumentTitle = doc.DocumentTitle;
      this.IdDocumentReference = docRef.IdDocumentReference;
      this.PageNbr = docRef.PageNbr ;
      this.Comment = comment;
    } 
```

您从存储库中获取`Document`并`DocumentReference`使用新构造函数之一创建一个实例。**

# sql - oracle SQL如何从日期中删除时间

> ID：13135552
> 
> 赞同：51
> 
> 时间：2012-10-30T08:57:41.530
> 
> 标签：sql, oracle

我有一个名为的列`StartDate`，其中包含这种格式的日期：`03-03-2012 15:22`

我需要的是把它转换成日期。它应该看起来像这样：`DD/MM/YYYY`

我没有成功的尝试是：

```
select 
p1.PA_VALUE as StartDate,
p2.PA_VALUE as EndDate
from WP_Work p 
LEFT JOIN PARAMETER p1 on p1.WP_ID=p.WP_ID AND p1.NAME = 'StartDate'
LEFT JOIN PARAMETER p2 on p2.WP_ID=p.WP_ID AND p2.NAME = 'Date_To'
WHERE p.TYPE = 'EventManagement2'
AND TO_DATE(p1.PA_VALUE, 'DD/MM/YYYY') >= TO_DATE('25/10/2012', 'DD/MM/YYYY')
AND TO_DATE(p2.PA_VALUE, 'DD/MM/YYYY') <= TO_DATE('26/10/2012', 'DD/MM/YYYY') 
```

有没有办法做到这一点？

EDIT1：该`PA_VALUE`列是：`VARCHAR2`

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-30T09:01:14.387

您可以在 DateTime 上使用[TRUNC](http://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_functions_2127.htm)来删除 DateTime 的时间部分。所以你的 where 子句可以是：

```
AND TRUNC(p1.PA_VALUE) >= TO_DATE('25/10/2012', 'DD/MM/YYYY') 
```

> TRUNCATE (datetime) 函数返回日期，其中一天中的时间部分被截断为格式模型指定的单位。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-30T09:33:56.927

当您将字符串转换为日期时，您需要将日期掩码与字符串中的格式相匹配。这包括一个时间元素，您需要使用截断来删除它：

```
select 
    p1.PA_VALUE as StartDate,
    p2.PA_VALUE as EndDate
from WP_Work p 
LEFT JOIN PARAMETER p1 on p1.WP_ID=p.WP_ID AND p1.NAME = 'StartDate'
LEFT JOIN PARAMETER p2 on p2.WP_ID=p.WP_ID AND p2.NAME = 'Date_To'
WHERE p.TYPE = 'EventManagement2'
AND trunc(TO_DATE(p1.PA_VALUE, 'DD-MM-YYYY HH24:MI')) >= TO_DATE('25/10/2012', 'DD/MM/YYYY')
AND trunc(TO_DATE(p2.PA_VALUE, 'DD-MM-YYYY HH24:MI')) <= TO_DATE('26/10/2012', 'DD/MM/YYYY') 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-01-18T01:05:15.960

我们可以在 Oracle DB 中使用 TRUNC 函数。这是一个例子。

```
SELECT TRUNC(TO_DATE('01 Jan 2018 08:00:00','DD-MON-YYYY HH24:MI:SS')) FROM DUAL 
```

输出：2018 年 1 月 1 日

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-30T09:47:56.123

尝试

```
SELECT to_char(p1.PA_VALUE,'DD/MM/YYYY') as StartDate,
       to_char(p2.PA_VALUE,'DD/MM/YYYY') as EndDate
   ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-22T09:52:32.080

如果您的 DATE 数据类型的列具有如下值：-

列中的值：2005 年 11 月 10 日 06:31:00

然后，您可以在选择查询中使用 TRUNC 函数将您的日期时间值转换为仅日期，例如 - DD/MM/YYYY 或 DD-MON-YYYY

从 table1 中选择 TRUNC(column_1)；

结果：2005 年 11 月 10 日

您将看到上述结果 - 前提是 NLS_DATE_FORMAT 设置如下：-

更改会话 NLS_DATE_FORMAT = 'DD-MON-YYYY HH24:MI:SS';

# jsf - a4j:jsfunction 没有被触发

> ID：13135553
> 
> 赞同：0
> 
> 时间：2012-10-30T08:57:52.560
> 
> 标签：jsf, ajax4jsf

我希望看到警报，不幸的是 setTempIshCaseId() 的 js-function-body 从未像 Firebug-JS-Debugger 告诉我的那样被触发。

我的 jsf 代码（由表单标签包围）：

```
<t:div id="setTempIshCaseIdContainer">
    <a4j:jsFunction name="setTempIshCaseId" reRender="debugIshCaseId" > 
    <a4j:actionparam name="tempIshCaseId" assignTo="#{CaseController.tempIshCaseId}"/> 
    </a4j:jsFunction>
    <h:outputText id="debugIshCaseId" value="#{CaseController.tempIshCaseId}" style="BACKGROUND-COLOR:red;"/>
</t:div> 
<a4j:commandLink id="preSaveCaseButton" onclick="setTempIshCaseId();" title="#{resources.labels['biobank_lims_saveTable']}" reRender="jsonpRemoteURLs,hNumberRemoteURL,eNumberRemoteURL,ishCaseRemoteURL,tempIshCaseIdContainer" oncomplete="jQuery('a#form_saveCaseButton').click()">
</a4j:commandLink> 
```

我的javascript代码：

```
function setTempIshCaseId(){
    alert('BP');
    console.log("setTempIshCaseId() Start ");
    // setze den Wert des a4j-js-function action param
    var ishCaseId = jQuery('#form_ish').val(); 
    jQuery('#form_tempIshCaseId').text(ishCaseId);
    jQuery('#form_debugIshCaseId').text(ishCaseId);
    console.log("setTempIshCaseId() Ende ");
} 
```

为什么单击 preSaveCaseButton 后没有调用 setTempIshCaseId()？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:11:39.673

是的！问题解决了。阅读本教程后：http: [//mkblog.exadel.com/2010/06/using-richfaces-a4jjsfunction-sending-an-ajax-request-from-any-javascript/](http://mkblog.exadel.com/2010/06/using-richfaces-a4jjsfunction-sending-an-ajax-request-from-any-javascript/)

很明显，我必须将 actionParam-attribute 的参数传递给 JavaScript 函数，如下所示：

```
onclick="setTempIshCaseId(jQuery('#form_ish').val());" 
```

# javascript - 仅在模态打开时以 jQuery 模态加载图像

> ID：13135556
> 
> 赞同：0
> 
> 时间：2012-10-30T08:57:57.257
> 
> 标签：javascript, jquery

我有一个默认隐藏的模态 div。

div 包含一些图像，我想尽快加载页面。

是否可以仅在打开模式而不是之前才实际加载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:00:54.433

如果您使用的是模型，如果您在第一次显示对话框时`Dialog`附加元素，这很容易。`img`您可以通过以下`open`事件执行此操作`Dialog`：

```
var hasOpened = false;

$( "#dialog" ).dialog({
   autoOpen: false,
   open: function(event, ui) { 
      if (!hasOpened) {
         $('#dialog').append($('<img src="someurl"></img>'));
      }
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:01:35.633

是的，有可能，当用户单击链接模型时，您必须将图像加载到分隔器中，

为此，您需要在单击链接后编写一个 ajax 调用来加载图像

# oracle - 如何显示存储过程的输出？

> ID：13135561
> 
> 赞同：1
> 
> 时间：2012-10-30T08:58:22.750
> 
> 标签：oracle, stored-procedures, plsql, feedback, output

我正在处理数百万行，这需要几个小时，所以我需要一些反馈来让我了解流程的状态。不可能从存储过程中获得实时反馈，因为只有在完成执行后才能获得输出。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:18:25.823

有几个解决方案。

一种是写入一些描述的日志。您可以使用文件（[使用 UTL_FILE 写出](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm#sthref16386)）或表（使用[自治事务](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#sthref603)，以便记录在另一个会话中可见，而不会影响主事务）。

另一种解决方案是使用 DBMS_APPLICATION_INFO.SET_SESSION_LONGOPS 写入 V$SESSION_LONGOPS 视图。[找到更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_appinf.htm#sthref519)

我认为记录长期运行的后台程序总是一个好主意。如果出现问题，您的日志是您拥有的唯一信息来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T09:20:28.287

您可以有一个写入不同表的 ReportStatus 过程（您可以在过程运行时从中选择一个）。

它需要一个 PRAGMA AUTONOMOUS_TRANSACTION 以便它可以独立于您的主程序提交。

例子：

```
CREATE OR REPLACE PROCEDURE ReportStatus(status NUMBER)
AS
  PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN
  INSERT INTO StatusTable VALUES(SYSDATE, status);
  COMMIT;
END ReportStatus;
/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-20T15:31:45.707

从运行的 PL/SQL 块中获取反馈的另一种方法是使用会话间通信。为了使用此解决方案，您至少需要两个会话。

在审计（第一次）会议中：

```
set head off arrays 1 pages 0 feedback off timing off
select column_value notification from table (notificationReceive); 
```

在第一条消息到达之前，它将被卡在那里。
作为下一步，在另一个（第二个）会话中执行您的 PL/SQL 块：

```
begin 
    notificationSend ('START: '||'myBlockName');
    /* UPDATE table1 SET col1 = value ... WHERE some condition;
    */ dbms_lock.sleep(3);
    notificationSend ('Updated 1000000 rows'); -- sql%rowcount instead of literal 
    /* INSERT INTO table2 (val1, SYSDATE, v_user_id);
    */ dbms_lock.sleep(2);
    notificationSend ('Inserted 1000000 rows'); 
    notificationSend ('ENDTX');
end;
/ 
```

现在，您可以回到第一个会话并查看运行 PL/SQL 块的实时反馈：

```
11:13:39: START: myBlockName

11:13:42: Updated 1000000 rows

11:13:44: Inserted 1000000 rows 
```

下面是几乎一行函数的代码：

```
create or replace procedure notificationSend (message varchar2) is
pragma autonomous_transaction;
begin
    dbms_alert.signal ('feedback$_queue', message);
    commit;
end;
/
create or replace function notificationReceive return sys.odciVarchar2List pipelined is
pragma autonomous_transaction;
    message varchar2(1800) := 'NONE';
    status number := -1;
begin 
    dbms_alert.register('feedback$_queue');
    <<reading>> loop 
        dbms_alert.waitone('feedback$_queue', message, status); 
        if status = 0 and message != 'ENDTX' then
            pipe row (to_char (sysdate, 'hh:mi:ss')||': '||message);
            pipe row (null); -- dummy row for prefetch in sqlplus 
        else 
            exit reading; 
        end if;
    end loop reading;
    dbms_alert.remove('feedback$_queue');
    return;
end;
/ 
```

使用版本 11.2.0.4.0、12.2.0.1.0 进行测试。

# .net - 打开一个包含附件的新电子邮件窗口

> ID：13135563
> 
> 赞同：1
> 
> 时间：2012-10-30T08:58:30.243
> 
> 标签：.net, windows, email, outlook, lotus-notes

在我们的应用程序中，我们希望用户能够向客户发送包含 PDF 附件的电子邮件。但是，我们的用户同时使用 Notes 和 Outlook（可能还有其他客户端），因此我们不想使用任何内部邮件库。理想的是能够使用客户端默认邮件软件打开“新消息”窗口，预先附加文件并在电子邮件的主题和正文中预先输入更多数据。

有没有（好的？）这样做的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:50:53.203

通过代理在服务器级别创建和发送电子邮件。

当用户单击按钮发送时，使用对话框构建电子邮件的内容并允许用户自定义它（通过 Notes 或浏览器客户端）并让他们保存文档。代理然后附加文件并发送电子邮件。根本不需要访问最终用户的邮件软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:16:56.723

您对带有附件的 sendmail 尝试此操作。

```
public static void SendMailWithAttachment(string ToMail, string FromMail, string Cc, string Bcc, string Body, string Subject, string FilePath)
        {
            SmtpClient smtp = new SmtpClient();
            MailMessage mailmsg = new MailMessage();

            mailmsg.From = new MailAddress(FromMail);
            mailmsg.To.Add(ToMail);
            if (Cc != "")
            {
                mailmsg.CC.Add(Cc);
            }
            if (Bcc != "")
            {
                mailmsg.Bcc.Add(Bcc);
            }
            else
            {
                string bccAddress = GetConfigValue("TestEmailID");
                if (!bccAddress.IsNullOrEmpty())
                    mailmsg.Bcc.Add(bccAddress);
            }
            mailmsg.Body = Body;
            mailmsg.Subject = Subject;
            mailmsg.IsBodyHtml = true;

            //mailmsg.Priority = MailPriority.High;

            if (File.Exists(FilePath))
            {
                FileInfo objFileInfo = new FileInfo(FilePath);
                Attachment objAttachment = new Attachment(FilePath);
                string strFileName = Subject.Replace(" ", "_");
                objAttachment.Name = strFileName + objFileInfo.Extension;
                mailmsg.Attachments.Add(objAttachment);

            }

            //Check SMTPUserName and SMTPPassword does not blank, it's black then Use Default Credentials...
            if (GetApplicationValue("SMTPUserName").ToString() != String.Empty && GetApplicationValue("SMTPPassword").ToString() != String.Empty)
            {
                NetworkCredential basicAuthenticationInfo = new NetworkCredential(GetApplicationValue("SMTPUserName").ToString(), GetApplicationValue("SMTPPassword").ToString());
                smtp.UseDefaultCredentials = false;
                smtp.Credentials = basicAuthenticationInfo;
            }

            smtp.Host = GetApplicationValue("SMTPHost");
            smtp.Port = GetApplicationValue("SMTPPort").ParseNativeInt();

            try
            {
                smtp.Send(mailmsg);
                mailmsg.Dispose();
            }
            catch (Exception)
            {
                //throw ex;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:27:12.967

我没有办法知道。据我所知，“mailto：” URL 无法指定您想要的每个附加文件。

要为 Lotus Notes 执行此操作，您必须使用 IBM 提供的 OLE 类，从 CreateObject("Notes.NotesSession") 和 CreateObject("Notes.NotesUIWorkspace") 开始。这显然不适用于任何其他邮件客户端。

# javascript - 如何使用按钮从 json 填充主干集合

> ID：13135564
> 
> 赞同：1
> 
> 时间：2012-10-30T08:58:29.830
> 
> 标签：javascript, json, backbone.js, underscore.js

我有大量的 json 对象集合，我通过搜索函数检索它们，虽然取决于搜索字符串，但输出可以达到我填充到列表中的数千个数组。在移动环境中，一旦我将 touchmove、touchstart 和 touchend 添加到每个对象，这就会变得很麻烦并且会消耗内存。我找到了解决这个问题的方法，即使用backbone.js 显示对象的最小方式，并且使用诸如按钮之类的触发器，这可能会变得健壮。虽然我不知道如何继续它。这是没有按钮的工作示例。我应该怎么做？

```
<script>
    //model - define value objects.
    var Client = Backbone.Model.extend({
        defaults: {
            name: 'cole',
            age: '12'
        }
    });
    //collection - load json
    var ClientCollection = Backbone.Collection.extend({
        defaults: {
            model: Client
        },
        model: Client,
        url: './json/test.json',
    //override parse due to json format. point to "items"
        parse: function (response, xhr) {
            return response.items;
        }
    });
    //view. init collection. listen for data to be loaded. render.
    var ClientView = Backbone.View.extend({
        initialize: function () {
            this.collection = new ClientCollection();
            this.collection.bind("reset", this.render, this);
            this.collection.fetch();
        },
        render: function () {
            //append to html here ...
            //alert(this.collection.at(0).get("name"));
            //alert(this.collection.length)
            for (var i = 0; i < this.collection.length; i++) {
                $('#append-el').append('<li>' + this.collection.at([i]).get("name") + '; ' + this.collection.at([i]).get("age") + '</li>')
            }

        }
    });
    var clientView = new ClientView();

</script>

<div id = "append-el"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:57:06.607

如果我理解你，那么这应该工作：

```
var ClientView = Backbone.View.extend({
    el: '#append-el',
    events: {
        'click button': 'onButtonClick'
    },
    initialize: function() {
        _.bindAll(this);
        this.collection = new ClientCollection();
        this.collection.bind("reset", this.renderClients);
        this.render();
    },
    render: function() {
        //append to html here ...   
        this.$el.append('<button type="button">Fetch clients</button><ul class="clients"></ul>');
    },
    renderClients: function() {
        var $ul = this.$('ul.clients').empty();
        this.collection.each(function(client) {
            $ul.append('<li>' + client.get("name") + '; ' + client.get("age") + '</li>');
        });
    },
    onButtonClick: function(e) {
        this.collection.fetch();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:00:13.653

将事件侦听器添加到您的视图中，并使用事件哈希指向您的按钮，如下所示

```
,events {
   "click #buttonID" : "fillCollection"// <- this is a method name
} 
```

然后创建这个方法并触发一个[`collection.fetch`](http://backbonejs.org/#Collection-fetch)，像这样

```
,fillCollection: function(){
    this.collection.fetch();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T10:42:31.713

我建议不要一次获取数千件物品。将其限制为 100 最大 200 百。然后我会开始收听列表上的滚动，并根据需要获取其余项目（一旦用户接近滚动区域的末尾，您可以自动加载它们，或者只需在底部放置一个“加载更多”按钮） .

Backbone 有几个分页器插件，或者您可以简单地限制 render() 函数中渲染元素的数量。

# php - 代理和盗版 - 网站安全

> ID：13135568
> 
> 赞同：0
> 
> 时间：2012-10-30T08:58:52.863
> 
> 标签：php, proxy, piracy

我正在建立我的第一个网站。它是一家在线房地产中介。用户可以自己创建个人资料，然后插入广告并上传图片。

有人告诉我，我应该检测**多个日志记录尝试**以防止**暴力攻击**。好吧，我使用以下代码检测 IP：

```
if(isset($_SERVER['HTTP_X_FORWARDED_FOR']))
{ $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];} else
{ $ip=$_SERVER['REMOTE_ADDR'];} 
```

系统在一定的延迟内计算错过的记录尝试，并在数据库中保存一个禁止列表。它工作得很好......至少当我自己测试它时！

然后当我被告知“谨防通过虚假 IP 进行盗版”时，我得到的印象是我上面提到的保护系统无效。

有 ：

1) 盗版者可以使用的软件，其中包含可以隐藏其真实 IP 的代理

2) 网络上的代理也可以隐藏真实 IP。

1) 和 2) 有什么区别？

**我想知道如何使用代理以及他们在非法行为方面能够做什么**

*   有人可以随意更改它的IP吗？
*   中国或俄罗斯的某个人可以“模拟”西欧或美国的 ip 吗？
*   我可以做更多的事情来检测任何可疑活动吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T09:07:41.953

任何人都可以更改 ip、proxy、vpn ....
我使用此功能来检测 REAL IP 地址是否有效：

```
function getrealip() {
    if (getenv('HTTP_CLIENT_IP') && long2ip(ip2long(getenv('HTTP_CLIENT_IP')))==getenv('HTTP_CLIENT_IP') && validip(getenv('HTTP_CLIENT_IP')))
        return getenv('HTTP_CLIENT_IP');

    if (getenv('HTTP_X_FORWARDED_FOR') && long2ip(ip2long(getenv('HTTP_X_FORWARDED_FOR')))==getenv('HTTP_X_FORWARDED_FOR') && validip(getenv('HTTP_X_FORWARDED_FOR')))
        return getenv('HTTP_X_FORWARDED_FOR');

    if (getenv('HTTP_X_FORWARDED') && long2ip(ip2long(getenv('HTTP_X_FORWARDED')))==getenv('HTTP_X_FORWARDED') && validip(getenv('HTTP_X_FORWARDED')))
        return getenv('HTTP_X_FORWARDED');

    if (getenv('HTTP_FORWARDED_FOR') && long2ip(ip2long(getenv('HTTP_FORWARDED_FOR')))==getenv('HTTP_FORWARDED_FOR') && validip(getenv('HTTP_FORWARDED_FOR')))
        return getenv('HTTP_FORWARDED_FOR');

    if (getenv('HTTP_FORWARDED') && long2ip(ip2long(getenv('HTTP_FORWARDED')))==getenv('HTTP_FORWARDED') && validip(getenv('HTTP_FORWARDED')))
        return getenv('HTTP_FORWARDED');

    $ip = htmlspecialchars($_SERVER['REMOTE_ADDR']);
    /* Added support for IPv6 connections. otherwise ip returns null */
    if (strpos($ip, '::') === 0) {
        $ip = substr($ip, strrpos($ip, ':')+1);
    }

   return long2ip(ip2long($ip));
} 
```

[X-Forwarded 的](http://en.wikipedia.org/wiki/X-Forwarded-For)更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T09:21:11.850

正如 Dagon 所说，IP 地址是一种非常弱的识别用户的方法，黑客几乎肯定不会使用自己的 IP 地址，而是使用被盗的机器或僵尸网络；另一方面，许多企业用户可能看起来都来自同一个 IP 地址，如果有人忘记了密码，您很容易最终阻止该建筑物/公司的每个用户。

抵御暴力攻击的第一道防线是拥有强大的密码策略；通常，这被假定为至少 7 个字符，至少有一个数字和一个标点符号。这通常会惹恼用户，并使他们讨厌您的网站。

下一个防御——如果你认为你真的处于危险之中——是验证码；这让用户更加讨厌你。

底线是：如果你正在构建你的第一个网站，我会看一个现成的框架，而不是自己发明一切。考虑[PEAR:auth](http://pear.php.net/package/Auth/docs)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T09:24:30.460

代理是一个可以屏蔽你的ip的服务器。它会像发送请求一样发送您的请求，然后将收到的响应发回给您。

> 有人可以随意更改它的IP吗？

不，他们不能只是将他们的 ip 更改为他们喜欢的任何内容。但他们可以掩盖它。

> 中国或俄罗斯的某个人可以“模拟”西欧或美国的 ip 吗？

是的

> 我可以做更多的事情来检测任何可疑活动吗？

如果您使用暴力技术检测到某些用户名使用错误密码登录太多次，您可以使用[`sleep`](http://php.net/manual/en/function.sleep.php)函数减慢他的速度。这种技术不会切断没有恶意使用代理的用户，并且会减慢蛮力黑客攻击的速度。

```
if($wrongAttempts > 5) sleep(3000);

if($password == $_GET[pass]) 
{
   // ...
} 
```

您还可以开始包含验证码图像以提高安全性或阻止帐户一段时间。

# java - 在 Netbeans 可视化编辑器中添加 JScrollPane

> ID：13135569
> 
> 赞同：0
> 
> 时间：2012-10-30T08:58:53.450
> 
> 标签：java, swing, netbeans

我使用 Netbean 的可视化编辑器设计了一个窗口。现在，我有一个 JTextField，我想使用滚动条添加它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:41:09.873

您不应该将 Scollbar 添加到 TextField。TextField 用于输入来自用户的小条目，如姓名、年龄、卷号等。从用户输入大尺寸文本（如评论）的最佳组件是 JTextArea。所以您必须添加JTextArea 而不是 JTextField。

将 JTextArea 添加到 JFrame 后，您可以编写几行代码：-

```
JScrollPane jsc=new JScrollPane();
jsc.add(jta); 
```

其中“jta”是您的 Netbeans 为您生成的 JTextArea 的名称。

（现在，当您添加大于文本区域限制大小的文本时，滚动条会出现。如果您希望滚动条永久显示，那么 JScrollPane 有两个属性：horizo​​ntalScrollBarPolicy 和 verticalScrollBarPolicy。将这两个属性设置为 ALWAYS，您将无论 JTextArea 中文本的大小如何，都可以看到滚动条。）

这是向您展示您可以做什么的完整代码：-

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

class TextAreaDemo
{
JTextArea jta;
TextAreaDemo()
{
JFrame jfrm=new JFrame("Text Area");
jfrm.setSize(200,300);
jfrm.getContentPane().setLayout(new FlowLayout());
jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

jta=new JTextArea("Type Here");

//You can use this line to wrap that text when it extends on right side.
//jtxt.setLineWrap(true);

JScrollPane jscrp=new JScrollPane(jta);
jscrp.setPreferredSize(new Dimension(180,100));
jscrp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

jfrm.add(jscrp);
jfrm.setVisible(true);

}

public static void main(String args[])
{
 SwingUtilities.invokeLater(new Runnable(){public void run(){new TextAreaDemo();}});
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:34:20.857

使用 JTextArea 并将其放入 JScrollPane。如果您使用的是可视化编辑器，它将默认完成（将 TextArea 拖放到您的窗口中）。JScrollPane 有两个属性：horizo​​ntalScrollBarPolicy 和verticalScrollBarPolicy。将这两个属性设置为 ALWAYS，您将看到滚动条。

# java - 从 Redis 中提取密钥

> ID：13135573
> 
> 赞同：6
> 
> 时间：2012-10-30T08:59:16.980
> 
> 标签：java, redis, jedis

我使用以下代码提取所有以“NAME：”开头的键，它只返回超过 5,000 条记录（我的索引中有超过 60,000 个键）。谁能解释它为什么会发生，或者我如何从 Redis 数据库中提取所有密钥。

```
jedis.select(3);

    Set<String> names=jedis.keys("NAME:*");

    Iterator<String> it = names.iterator();
    while (it.hasNext()) {
        String s = it.next();
        System.out.println(s);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-09T08:17:19.530

当 Redis 服务器存储许多记录时，使用`jedis.keys()`命令会使其过度处理。因此，导致它在任务未完成时停止。取而代之的是，您使用它`jedis.hscan()`以避免上述问题。

```
ScanParams scanParam = new ScanParams();
String cursor = "0";
int i = 0;
scanParam.match(prefix + "*");
scanParam.count(50000); // 2000 or 30000 depend on your
do {
ScanResult<Map.Entry<String, String>> hscan = jedis.hscan(key, cursor, scanParam);

// any code here
//
//

// check cursor 
cursor = hscan.getStringCursor();
} while("0".equals(cursor)); 
```

它适用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T10:39:57.427

您不应该使用`keys`下面 JavaDoc 中所述的方法来正常使用 Redis。

[http://javadox.com/redis.clients/jedis/2.2.0/redis/clients/jedis/Jedis.html#keys(java.lang.String)](http://javadox.com/redis.clients/jedis/2.2.0/redis/clients/jedis/Jedis.html#keys(java.lang.String))

而是考虑使用这样的 Redis 集。

```
final Jedis jedis = new Jedis("localhost");
jedis.sadd("setName", "someValue");
jedis.smembers("setName");
jedis.close(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-01-29T10:58:29.503

尝试在键搜索模式中不使用 NAME。

```
 Set<String> names = jedis.keys("*");

        java.util.Iterator<String> it = names.iterator();
        while(it.hasNext()) {
            String s = it.next();
            System.out.println(s + " : " + jedis.get(s));
        } 
```

# c# - 将自定义菜单项添加到 Windows 窗体中的上下文菜单

> ID：13135577
> 
> 赞同：0
> 
> 时间：2012-10-30T08:59:28.033
> 
> 标签：c#, .net, winforms, contextmenu

我有一个 Windows 应用程序。现在，当我右键单击文件时，我得到一个上下文菜单。

![在此处输入图像描述](../Images/78710de52f5b0ae5c8107ced4cf72d12.png)

我想要的是在内置的上下文菜单中添加一个自定义菜单项。例如，在这种情况下，“我的自定义菜单”。

![在此处输入图像描述](../Images/5f4ca56ebd2b9948412c382f0d5889e8.png)

我怎样才能做到这一点？任何链接或某种参考点都会非常有帮助。我正在使用 C#

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:17:20.303

If you would like to add a context menu **in code using C#**:

Here is a good reference: [Visual Studio 2010 Plug-in - Adding a context-menu to the Solution Explorer](https://stackoverflow.com/questions/3017063/visual-studio-2010-plug-in-adding-a-context-menu-to-the-solution-explorer)

If you **only want this in your IDE**:

Go to `Tools -> Customize`

2.  Choose Commands
3.  Choose the appropriate context menu

4.  Add a new menu / command - depending on what exactly you need

![enter image description here](../Images/cf75824aa1bf39eca2e160dc60016342.png)

# vba - 拆除循环引用

> ID：13135579
> 
> 赞同：3
> 
> 时间：2012-10-30T08:59:33.653
> 
> 标签：vba, excel, vb6

以下代码为集合中的每个元素创建循环引用。例程中的代码是否`UserForm_Terminate`足以破坏关系以释放内存？或者是否需要使用指针和弱引用？

如果是/不是，测试对象是否已释放的最佳方法是什么？

用户表单代码：

```
Option Explicit
Implements IBtnClick

Dim coll As Collection

Private Sub UserForm_Initialize()
Dim x As Long
Dim e As CBtnEvents

Set coll = New Collection

For x = 1 To 5
    Set e = New CBtnEvents
    Set e.btn = Me.Controls.Add("Forms.CommandButton.1")
    e.ID = x
    e.Register Me
    With e.btn
        .Height = 30
        .Width = 30
        .Top = 10
        .Left = .Width * x
    End With
    coll.Add e
Next x

End Sub

Private Sub UserForm_Terminate()
Dim itm

For Each itm In coll
    msgbox itm.ID
    itm.Unregister
Next itm

End Sub

Private Sub IBtnClick_click(ID As Long)
    MsgBox ID
End Sub 
```

IBtn点击代码：

```
 Public Sub click(ID As Long)

    End Sub 
```

CBtnEvents 代码：

```
 Private WithEvents p_btn As MSForms.CommandButton
    Private p_ID As Long
    Private click As IBtnClick

    Public Property Set btn(value As MSForms.CommandButton)
        Set p_btn = value
    End Property

    Public Property Get btn() As MSForms.CommandButton
        Set btn = p_btn
    End Property

    Public Sub Register(value As IBtnClick)
        Set click = value
    End Sub

    Public Sub Unregister()
        Set click = Nothing
    End Sub

    Private Sub p_btn_Click()
        click.click p_ID
    End Sub

    Public Property Get ID() As Long
        ID = p_ID
    End Property

    Public Property Let ID(ByVal lID As Long)
        p_ID = lID
    End Property

    Private Sub Class_Terminate()
        MsgBox p_ID
    End Sub 
```

我已经包含了 VB6 标签，因为我认为这个问题同样适用，但我使用的是 Excel VBA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:03:33.557

这就是我们（手动）保存实例簿记集合的方式：

在每个类/表单/控件中，我们放置这样的东西

```
Option Explicit
DefObj A-Z
Private Const MODULE_NAME As String = "cTransStub"

'=========================================================================
' Constants and member variables
'=========================================================================

' Consts here

' Vars here
#If DebugMode Then
    Private m_sDebugID          As String
#End If

' Props here

' Methods here

'=========================================================================
' Base class events
'=========================================================================

#If DebugMode Then
    Private Sub Class_Initialize()
        DebugInstanceInit MODULE_NAME, m_sDebugID, Me
    End Sub

    Private Sub Class_Terminate()
        DebugInstanceTerm MODULE_NAME, m_sDebugID
    End Sub
#End If 
```

`DebugInstanceInit/Term`填充`DebugIDs`集合的辅助 subs 的示例实现：

```
Public Sub DebugInstanceInit(sModuleName As String, sDebugID As String, oObj As Object)
    Dim sCount          As String
    Dim lObjPtr         As Long
    Dim sObjCtx         As String

    On Error Resume Next
    sDebugID = sDebugID & GetDebugID()
    If DebugIDs Is Nothing Then
    Else
        ...
        lObjPtr = ObjPtr(oObj)  
        DebugIDs.Add sDebugID & " " & LIB_NAME & "." & sModuleName & "|&H" & Hex(lObjPtr) & "|" & Format$(time, "hh:mm:ss") & "|" & sObjCtx & "|", "#" & sDebugID
    End If
    ...
    If Not DebugConsole Is Nothing Then
        DebugConsole.RefreshConsole
    End If
    On Error GoTo 0
End Sub

Public Sub DebugInstanceTerm(sModuleName As String, sDebugID As String)
    On Error Resume Next
    If DebugIDs Is Nothing Then
    Else
        DebugIDs.Remove "#" & sDebugID
    End If
    ...
    If Not DebugIDs Is Nothing Then
        If DebugIDs.Count = 0 Then
            Debug.Print "DebugIDs collection is empty"; Timer
        End If
    End If
    If Not DebugConsole Is Nothing Then
        DebugConsole.RefreshConsole
    End If
    On Error GoTo 0
End Sub 
```

在程序终止时，我们会警告`DebugIDs`收集中的任何对象泄漏。

# mysql - mysql 根据当前项目选择相关项目

> ID：13135580
> 
> 赞同：1
> 
> 时间：2012-10-30T08:59:35.260
> 
> 标签：mysql, sql, database

我有一个场景，假设 3 个用户评论了一个 id 为 10 的业务，我如何获取评论该业务的用户的所有唯一 ID，并使用该唯一 ID 找到另一个不等于 10 的业务评论？

示例表 user_review：

```
review_id | user_id | business_id | rating | review_date
  1           2          10           3       20121030124001
  2           2          9            3       20121022120627
  3           2          10           4       20121023120627
  4           3          10           4       20121024120627
  5           3          6            3       20121022140627
  6           4          10           2       20121025120627
  7           4          10           5       20121030120627
  8           3          10           2       20121010120627
  9           4          8            5       20121028120627 
```

我应该得到这些结果

```
review_id | user_id | business_id | rating | review_date
  2           2          9            3       20121022120627
  5           3          6            3       20121022140627
  9           4          8            5       20121028120627 
```

在上述结果中，如果同一 user_id 和同一 business_id 有 2 条评论，则应返回最新的一条。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:04:41.400

Try this query:

Here is link to sqlfidle with running results [http://sqlfiddle.com/#!2/cd4ea/1](http://sqlfiddle.com/#!2/cd4ea/1)

```
SELECT
  tblreview.*,tblusers.user_name
FROM
  (
      SELECT
           MAX(tblreview.review_id) review_id
           , tblreview.user_id
      FROM
          (
            SELECT
                DISTINCT user_id
            FROM
               tblreview
            WHERE business_id = 10
          ) reviewsb10
      INNER JOIN
           tblreview
      ON
           tblreview.user_id = reviewsb10.user_id
      AND
           tblreview.business_id <> 10
      GROUP BY
           user_id
  ) tblLastReviewPerUser
INNER JOIN
  tblreview
ON
  tblreview.review_id = tblLastReviewPerUser.review_id
INNER JOIN
  tblusers
ON
  tblusers.user_id = tblLastReviewPerUser.user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:02:23.990

```
SELECT t1.*
FROM TableName t1
INNER JOIN 
(
    SELECT user_id, business_id, MAX(review_date) review_date
    FROM TableName
    WHERE business_id <> 10
    GROUP BY user_id, business_id
) t2 ON  t1.user_id = t2.user_id 
     AND t1.review_date = t2.review_date
     AND t1.business_id = t2.business_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:34:53.400

试试这个查询 -

```
SELECT * FROM (
    SELECT * FROM user_review
    ORDER BY IF(business_id = 10, 1, 0), review_date DESC
  ) t
GROUP BY user_id
HAVING
  COUNT(IF(business_id = 10, 1, NULL)) > 0
  AND COUNT(IF(business_id <> 10, 1, NULL)) > 0

+-----------+---------+-------------+--------+----------------+
| review_id | user_id | business_id | rating | review_date    |
+-----------+---------+-------------+--------+----------------+
|         2 |       2 |           9 |      3 | 20121022120627 |
|         5 |       3 |           6 |      3 | 20121022140627 |
|         9 |       4 |           8 |      5 | 20121028120627 |
+-----------+---------+-------------+--------+----------------+ 
```

# javascript - 让 Kinetic 使用我现有的画布

> ID：13135582
> 
> 赞同：2
> 
> 时间：2012-10-30T08:59:37.057
> 
> 标签：javascript, html5-canvas, kineticjs

我有一个现有的 html5 画布白板。我怎样才能让 Kinetic 使用我现有的画布来添加它的一些功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:35:57.257

你可以像这样创建一个新层：

```
var whiteboardLayer = new Kinetic.Layer(); 
```

并像这样访问生成的画布元素：

```
var canvas = whiteboardLayer.getCanvas().getElement(); 
```

# jquery - 无法更改 text() 值

> ID：13135584
> 
> 赞同：1
> 
> 时间：2012-10-30T08:59:41.780
> 
> 标签：jquery

```
<div class="search_on" id="search-item">
    <span class="text">one</span>
</div>
<ul class="search_item" style="display: none;">
    <li><a href="#">one</a></li>
    <li><a href="#">two</a></li>
    <li><a href="#">three</a></li>
</ul> 
```

jQuery代码：

```
$('.search_item li a').click(function() {        
    $('#search-item .text').text() = $(this).text();
    return false;
    $('ul.search_item').hide();
}); 
```

我想得到：当用户单击标签`a`中的链接时`li`，然后将值更改为标签中`<span class="text">one</span>`的值。为什么上面的代码不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:00:56.033

变更声明

```
$('#search-item .text').text() = $(this).text(); 
```

至

```
$('#search-item .text').text($(this).text()); 
```

和 move`return false`语句，`$('ul.search_item').hide();`如果你想`ul.search_item`在设置文本后隐藏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T09:02:02.963

做这个：

```
 $('#search-item .text').html( $(this).text()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T09:01:11.687

您需要将`text()`值作为参数传递。像这样：

```
$('#search-item .text').text($(this).text()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T09:01:53.543

改变

```
$('#search-item .text').text() = $(this).text(); 
```

至

```
$('#search-item .text').text($(this).text()); 
```

与`.text() = $(this).text()`您尝试将其设置为属性，但它是一个函数，因此您需要像这样调用它`.text($(this).text())`

# vb.net - 绘制实例

> ID：13135586
> 
> 赞同：1
> 
> 时间：2012-10-30T08:59:47.803
> 
> 标签：vb.net, diagram, instantiation

我在互联网上查看，我可以找到一个正在绘制实例的示例。我有流动的vb代码：

```
Dim Me1 as cMe
Dim Me2 as cMe
Me1 = new cMe
Me2 = new cMe
Me1 = new cMe 
```

我如何绘制上述代码的实例化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:05:14.477

```
 Me1 <- cMe1  
 Me2 <- cMe2  
 Me1 <- cMe3  
        cMe1 -> disposed sometime later 
```

# c# - 创建一个自己的类并启动它

> ID：13135588
> 
> 赞同：0
> 
> 时间：2012-10-30T08:59:49.230
> 
> 标签：c#

我希望我自己的课程开始，但它似乎不起作用。

我的班级是：

```
namespace Ts3_Movearound
{
    class TS3_Connector
    {
        public class ccmove : EventArgs
        {
            public ccmove(int clid, int cid)
            {
                this.clid = clid;
                this.cid = cid;
            }
            public int clid;
            public int cid;
        }

        public event EventHandler runningHandle;
        public event EventHandler stoppedHandle;
        public event EventHandler RequestMove;

        bool running = true;
        public Main()
        {

            using (QueryRunner queryRunner = new QueryRunner(new SyncTcpDispatcher("127.0.0.1", 25639)))  // host and port
            {
                this.runningHandle(this, new EventArgs());
                while (running == true)
                {
                    this.RequestMove(this, new EventArgs());
                    System.Threading.Thread.Sleep(1000);
                }
                this.stoppedHandle(this, new EventArgs());
            }
            Console.ReadLine();
        }
    }
} 
```

我这样称呼它：

```
 private void button1_Click(object sender, EventArgs e)
    {
        TS3_Connector conn = new TS3_Connector();

        conn.runningHandle += new EventHandler(started);
        conn.stoppedHandle += new EventHandler(stopped);
    } 
```

但似乎班级永远不会正确开始。runningEvent 永远不会被触发，stopped 和 Request 也是如此。我现在如何运行这个课程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:04:40.577

The lifespan of your conn object ends when button1_Click has returned. You should declare conn in the class scope.

```
TS3_Connector conn = null;

private void button1_Click(object sender, EventArgs e)
{
    conn = new TS3_Connector();

    conn.runningHandle += new EventHandler(started);
    conn.stoppedHandle += new EventHandler(stopped);
} 
```

`TS3_Connector` itself does nothing. You should explicitly call `main()` (please rename the function to something understandable)

# java - 旋转内存中的图像

> ID：13135590
> 
> 赞同：0
> 
> 时间：2012-10-30T08:59:54.823
> 
> 标签：java, image, rotation, awt

我在内存中保存了一个 java.Awt 图像列表，并且需要旋转它们。我已经阅读了一些解决方案，但它们处理的是改变图像的显示方式，而不是真正旋转图像本身。我需要旋转图像本身，而不是以旋转的方式绘制。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:02:13.080

以下代码将图像旋转任意角度（以度为单位）。

正值`degrees`将顺时针旋转图像，负值逆时针旋转。生成的图像将调整大小，以使旋转后的图像完全适合它。
我已经用图像文件作为输入对其`jpg`进行了测试。`png`

```
public static BufferedImage rotateImage(BufferedImage src, double degrees) {
double radians = Math.toRadians(degrees);

int srcWidth = src.getWidth();
int srcHeight = src.getHeight();

/*
 * Calculate new image dimensions
 */
double sin = Math.abs(Math.sin(radians));
double cos = Math.abs(Math.cos(radians));
int newWidth = (int) Math.floor(srcWidth * cos + srcHeight * sin);
int newHeight = (int) Math.floor(srcHeight * cos + srcWidth * sin);

/*
 * Create new image and rotate it
 */
BufferedImage result = new BufferedImage(newWidth, newHeight,
    src.getType());
Graphics2D g = result.createGraphics();
g.translate((newWidth - srcWidth) / 2, (newHeight - srcHeight) / 2);
g.rotate(radians, srcWidth / 2, srcHeight / 2);
g.drawRenderedImage(src, null);

return result;
} 
```

# javascript - 谷歌浏览器仅在刷新后正确显示 css 样式

> ID：13135592
> 
> 赞同：-1
> 
> 时间：2012-10-30T08:59:57.337
> 
> 标签：javascript, jquery, css, google-chrome

我目前正在用 javascript 编写脚本，以便将图像显示到网页中。这些图像是通过 ajax 请求加载的，并且直接从 jquery 应用 css 样式。该脚本适用于 firefox/Opera/IE，但 Google Chrome 无法正确显示 CSS。

当我使用 Google Chrome 调试 HTML 页面时，代码是正确的，并且图像包含正确的 css 样式。如果我取消选中并检查 css 编辑器面板中的属性，chrome 会刷新样式并正确显示所有元素。

代码如下所示

```
function displayCroppedFace(faceData, parentElem) {
    var randomid = Math.floor(Math.random() * Math.pow(2, 32));
    $("#" + parentElem).append("<div id=\"faceImg_border_" + randomid + "\" />");
    $("#faceImg_border_" + randomid).append("<div id=\"faceImg" + randomid + "\" />");
    $("#faceImg" + randomid).attr('class','cropped_model');
    $('#faceImg' + randomid).append('<img id="faceImg' + randomid + '_img" src="' + faceData.image_url + '"/>');
    $('#faceImg' + randomid + '_img').load(function() {
        crop($(this), faceData.x, faceData.y, faceData.w, faceData.h);
    });
}

function crop(imgObj, x, y, width, height) {
    var originalWidth = imgObj.width();
    var originalHeight = imgObj.height();
    var scale_x = imgObj.parent().width() / (width + 20);
    var scale_y = imgObj.parent().height() / (height + 20);

    imgObj.css({
        'position' : 'absolute',
        'display' : 'block',
        'left' : (-x * scale_x - 5) + 'px',
        'top' : (-y * scale_y - 5) + 'px',
        'width' : (originalWidth * scale_x + 10) + 'px',
        'height' : (originalHeight * scale_y + 10) + 'px',
        'z-index' : '10'
    });
} 
```

`faceData`是一个 javascript 对象，包含一个图像 url 和四个坐标 (x, y, w, h)。

有人知道谷歌浏览器有什么问题以及如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:17:15.497

问题解决了！错误出现在 CSS 中。

# java - 为 MimeMessage 设置内容类型？

> ID：13135593
> 
> 赞同：3
> 
> 时间：2012-10-30T08:59:58.800
> 
> 标签：java, jakarta-mail, mime-types, mime-message

我对 mime 消息的内容类型感到困惑。假设我有一条 mime 消息。这是一个多部分消息，正文部分是这样的

1.  包含纯文本、html 文本的 Mime 正文部分（如正文中的一些粗体字母）
2.  包含附件的第二个 mime 身体部分，
3.  第三个 mime 正文部分包含一个内联图像（从带有 cid 的正文引用）

当我创建正文部分时，我是否应该明确设置顶部 mime 消息的内容类型，然后是每个正文部分？

如果是，在上面的例子中它们应该是什么？

`multipart/alternative`建议用于 html，`multipart/mixed`建议用于附件，`multipart/related`建议用于内联。我正在使用所有这些，那么完整消息和不同正文部分的内容类型应该是什么？

只是为了提供信息，我试图复制上面的场景，我既没有为整个 MimeMessage 也没有为正文部分设置内容类型。

但我仍然得到了预期的东西，比如纯文本、正文中的粗体字母、附件、詹姆斯在正确位置的内联图像

为什么 James 在不设置内容类型的情况下解释 mime 消息和正文部分，又为什么以正确的方式显示它们？

**参考代码**

```
 MimeMessage   msg = new MimeMessage(mailSession);
  MimeMultipart mpart = new MimeMultipart();
  MimeBodyPart bp = new MimeBodyPart();
  bp.setText("plain text and html text like<b>Test</>", CHARSET_UTF_8, MESSAGE_HTML_CONTENT_TYPE);
  // add message body
  mpart.addBodyPart(bp);

 // adding attachment
  MimeBodyPart bodyPart = new MimeBodyPart();
  bodyPart.setFileName("WordFile1");
  file = new File("word file");
  DataSource source = new FileDataSource(file);
  bodyPart.setDataHandler(new DataHandler(source));
  mpart.addBodyPart(bodyPart);

 // adding image inline
  MimeBodyPart bodyPart2 = new MimeBodyPart();
  bodyPart2.setFileName("inline image");
  file2 = new File("image1");
  DataSource source2 = new FileDataSource(file);
  bodyPart2.setDataHandler(new DataHandler(source));
  bodyPart2.setDisposition(MimeBodyPart.INLINE);
  bodyPart2.setHeader("Content-ID", "Unique-CntentId");
  bodyPart2.setHeader("Content-Type", "image/jpeg");
  mpart.addBodyPart(bodyPart2);

  // At last setting multipart In MimeMessage
  msg.setContent(mpart); 
```

使用上面的代码，我在与 James 集成的 ThunderBird 中的正确位置获得了正确的 html 文本、纯文本、内联图像和附件。

所以我不明白何时何地将,`multipart/mixed`设置为 Content-Type 还是邮件服务器在内部设置它？`multipart/alternative``multipart/related`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:21:17.590

如果我了解您要执行的操作，则您需要具有以下结构的消息：

```
 multipart/mixed
    multipart/alternative
      text/plain - a plain text version of the main message body
      multipart/related
        text/html - the html version of the main message body
        image/jpeg - an image referenced by the main body
    application/octet-stream (or whatever) - the attachment 
```

这意味着三个嵌套的多部分。除了默认的“混合”之外，您需要为每个多部分指定子类型。

多部分/混合和多部分/替代部分相对简单。多部分/相关部分更复杂，您可能想阅读[RFC 2387](https://www.rfc-editor.org/rfc/rfc2387)和/或找到一些其他教程来帮助您。

您可以通过摆脱 multipart/related 并让 html 文本引用 Internet 上某处的图像来简化结构。

您还应该测试具有此结构的消息是否将被您关心的所有邮件阅读器正确显示。一些邮件阅读器会比其他结构复杂的邮件阅读器做得更好。

# javascript - 消息容器宽度 CSS 的问题

> ID：13135597
> 
> 赞同：0
> 
> 时间：2012-10-30T09:00:17.427
> 
> 标签：javascript, jquery, css

我正在尝试在`top - center`我的网页上显示一条消息。我创建了一个非常基本的示例：

[http://jsbin.com/eniwax/3/edit](http://jsbin.com/eniwax/3/edit)

这里的问题在于消息容器。我想将容器宽度设置为等于消息文本宽度的意思（自动，宽度根据消息的大小而变化）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:04:58.967

像这样做[**DEMO**](http://jsfiddle.net/wHazG/)

说明：使用嵌套 div 并将容器 div 宽度设为 100% 并赋予`text-align: center;`容器 div

CSS

```
.test {
    top: 0;
    text-align: center;
    position: relative;
    width:auto;
    z-index: 100;
    border: 1px solid #F0C36D;
    background-color: #F9EDBE;
    font-size: 12px;
    font-weight: bolder;
    padding : 4px;
    display: inline-block;
}

.container {
  width: 100%;
  text-align: center;
} 
```

HTML

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div class="container">
  <div class="test">I am a sample text</div>
  </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:03:57.570

在您的 div 中使用 a`<span />`而不是单独使用 a `<div />`。

Div 是块级元素，这意味着它们填充了它们拥有的所有可用宽度。跨度是内联的，这意味着它们的宽度与其内容一样宽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:06:43.937

### 给`display: inline-block;`和`text-align: center;`给父母。

```
body {text-align: center;}
.test
{
    top: 0;
    text-align: center;
    position: relative;
    width:auto;
    display: inline-block;
    z-index: 100;
    border: 1px solid #F0C36D;
    background-color: #F9EDBE;
    font-size: 12px;
    font-weight: bolder;
    padding : 4px;

} 
```

### 演示：http: [//jsbin.com/eniwax/15](http://jsbin.com/eniwax/15)

# c# - 类中的类c#

> ID：13135600
> 
> 赞同：-2
> 
> 时间：2012-10-30T09:00:30.513
> 
> 标签：c#

我想在一个类中定义一个类。

例子：

```
private class newClient
{
    public int ID { get; set; }
    public string Name{ get; set; }        

    private class ClientExtraData
    {
       public string ExtraField1 { get; set; }
       public string ExtraField2 { get; set; }
    }
} 
```

现在我想以这种方式访问​​ ExtraField1：

```
newClient nclnt= new newClient();
string s=nclnt.ClientExtraData.ExtraField1; 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:04:59.643

要实现以下目标，

```
newClient nclnt= new newClient();
string s=nclnt.ClientExtraData.ExtraField1; 
```

您需要做的就是公开这样的属性

```
private class NewClient
{
        public class NewClient() 
        {
            this.ClientExtraData = new ClientData();
        }
        public int ID { get; set; }
        public string Name{ get; set; }
        public ClientData ClientExtraData {get;set;}
} 
```

`ClientData`你的程序集中的一个类在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:04:21.043

No it can't be done like that. The class is not a method, property or anything which is instanziated by the class.

It is also very bad design :-)

You could however say:

var myclass = new ClassOne.ClassTwo()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:14:23.973

1.  使内部类公开，以便可以访问它。
2.  将您需要访问的属性设为静态（或创建实例以访问该字段）

类 newClient { public int ID { get; 放; } 公共字符串名称 { 获取；放; }

```
 public class ClientExtraData
    {
        public static string ExtraField1 { get { return "10"; }  }
        public string ExtraField2 { get; set; }
    }
} 
```

访问代码：

newClient nclnt = new newClient(); 字符串 s = newClient.ClientExtraData.ExtraField1;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T09:09:44.020

用你的代码准确地归档这个

```
newClient nclnt= new newClient();
string s=nclnt.ClientExtraData.ExtraField1; 
```

`newClient`班级必须是，班级必须是`public` 并且`ClientExtraData``public``static`

但更好的方法是明确地创建类，其中 newClient 包含一个 Get-Property 到 ClientExtraData 类的实例。

查看[访问修饰符（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T09:03:50.200

I usually do this kind of stuff like this:

```
//the two classes can live in the same code file, if you want.
private class ClientExtraDataClass
{
    public string ExtraField1 { get; set; }
   public string ExtraField2 { get; set; }
}
private class newClient
{
    public int ID { get; set; }
    public string Name{ get; set; }

    //you may want to make it a readonly property too, 
    // it depends on your needs.
    public ClientExtraDataClass ClientExtraData = new ClientExtraDataClass();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T09:05:34.693

不，您不能以这种方式访问​​内部类，`nclnt.ClientExtraData.ExtraField1;`因为如果要访问其属性，则必须拥有该对象的实例。然后你不能使用`private`访问修饰符，但你必须以`internal`这种方式使用：

```
class newClient
{
    public int ID { get; set; }
    public string Name { get; set; }
    public ClientExtraData clientExtraData{ get; set; }

    public newClient()
    {
        clientExtraData = new ClientExtraData();
    }

    internal class ClientExtraData
    {
        public string ExtraField1 { get; set; }
        public string ExtraField2 { get; set; }
    }
} 
```

或者，如果您想以这种方式使其在外部可访问，则可以`ClientExtraData` `public`代替：`internal``newClient`

```
newClient.ClientExtraData clientExtraData = new newClient.ClientExtraData(); 
```

* * *

那么你可以这样做：

```
newClient nclnt= new newClient();
string s = nclnt.clientExtraData.ExtraField1; 
```

# git - 将git“生产分支”拉到生产服务器的“正确”方式

> ID：13135601
> 
> 赞同：25
> 
> 时间：2012-10-30T09:00:32.187
> 
> 标签：git, github, git-pull, git-remote

我对 Git 很陌生，并且已经阅读了 Pro Git 书籍@http: [//git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)。我的问题是我今天所做的是否是使用生产服务器和远程 Git 存储库的首选方式。

我将我的 repo 托管在 GitHub 上，使用三个远程分支：开发 -> 测试 -> 主控。

每当“测试”分支被验证可以正常工作时，我`git merge`在本地使用“测试”（快进？）`git push`“掌握”，并在 GitHub 上“掌握”。

在生产服务器（/opt/www/url.com/）上，我已经完成了：

```
git init
git remote add origin https://github.com/.....
git pull origin master 
```

现在每次我想更新主人我都会发出`git pull`

```
git pull origin master 
```

生产永远不会将任何更改推送到远程。并且不会发生本地更改。我做对了吗？如果不是，将更新拉到生产环境的首选方式是什么？

编辑＃1：我不想管理我现在面临的生产服务器上的任何冲突（不知何故我做错了）。我只是想拉下最新更新的主分支，然后切换到它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2018-06-28T20:08:20.030

为此，执行 'git pull' 很普通，但还有一种更防弹的方法。

如果您不以某种方式进行本地更改，就不会有任何冲突。但是，如果您只想获取最新的树，并消除任何本地更改，那么有一种更好的方法，它会忽略本地的任何内容：

首先，您需要从服务器获取最新的。为此，我们将使用以下命令，而不是“git pull”：

```
git fetch origin master 
```

这是“git pull”的前半部分。（第二个是合并到您的本地 master 中，这是您遇到问题的地方）。

Git fetch 会：

1.  查找提交 master 在远程上指向的内容
2.  下载提交的内容及其引用的您在本地没有的所有内容。
3.  更新 origin/master ref 以指向该提交，以记住远程在其“master”版本上的位置。

接下来，我们将简单地更新我们的本地“master”以指向相同的提交，并更新我们的工作树。

为此，我们将使用：

```
git reset --hard origin/master 
```

（这是假设您没有为远程仓库使用不同的名称，而不是默认的“来源”——如果您这样做了，请进行相应的调整）。

这实际上做了三件事：

1.  更新您的本地主分支以指向您刚刚从远程获取的相同提交。
2.  将该树加载到您的索引中
3.  更新您的工作树以匹配索引。

您现在有一个与远程匹配的本地主分支和树。

但是还有一个步骤，就是清理剩下的任何东西，它不会被 git 跟踪。

```
git clean -fdx 
```

将删除先前构建创建的所有文件，并为您提供一个干净的环境。在任何情况下，您都应该将要保留的任何构建工件复制到其他位置。

'git pull' 是针对开发人员协调他们的工作，所以它真的不是这个工作的理想工具。'git fetch' 和 'git reset --hard' 更具体，没有防止意外覆盖本地工作的保护。

但这正是你想要的。

尽管如此，如果您有时会进行更改以修复生产服务器上的问题，您可能希望继续使用“git pull”。合并和可能的冲突可能比有害更有用。

但有时您只想将可靠的更新作为自动化的一部分，而任何本地更改都是需要消除的问题。

但是即使使用 'git pull'，你也可能想要那个 'git clean'。遗留文件可能会以神秘且难以识别的方式破坏构建和部署。

# python - 如何将nas的所有文件路径信息保存到一个文件中？仅 10M RAM 可用

> ID：13135613
> 
> 赞同：1
> 
> 时间：2012-10-30T09:01:31.213
> 
> 标签：python

如何将nas的所有文件路径信息保存到一个文件中？问题是 nas 只有 10MB RAM Free。

在 nas linux 上使用 python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:51:22.600

用这个

```
find -type f | xargs ls -lrt -d -1 $PWD/* | awk '{print $5,$6,$7,$8,$9}' | your_python_program.py 
```

你的 python_program.py：

```
...
for line in sys.stdin:
   #process input 
```

或者`os.walk`在这样的函数生成器中：

```
def f():
    w = os.walk('/')
    for path in w:
        if os.path.isfile(path[0]) yield path[0] 
```

如果一个目录中有很多文件，第二个可能不起作用

# node.js - NodeJS：Express 3.0 with connect-flash（按照护照本地策略中的建议），仍然为 req.flash 找到异常

> ID：13135616
> 
> 赞同：2
> 
> 时间：2012-10-30T09:01:36.553
> 
> 标签：node.js, express, passport.js

我是 NodeJS 的新手，并试图在 Express3.0 上构建一个应用程序，包括用于身份验证的护照本地策略。但是以下异常（关于 req.flash）阻碍了我的进步。

```
异常发生在以下行。
res.render('login', { user: req.user, message: req.flash('error') });

```

```
表达
500 TypeError: Object # has no method 'flash'

    在 /Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/app.js:115:54
    在回调（/Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/node_modules/express/lib/router/index.js:162:37）
    在参数（/Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/node_modules/express/lib/router/index.js:136:11）
    通过（/Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/node_modules/express/lib/router/index.js:143:5）
    在 Router._dispatch (/Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/node_modules/express/lib/router/index.js:171:5)
    在 Object.router (/Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/node_modules/express/lib/router/index.js:33:10)
    在下一个（/Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/node_modules/express/node_modules/connect/lib/proto.js:190:15）
    在 store.get.next (/Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/node_modules/express/node_modules/connect/lib/middleware/session.js:310:9)
    在 /Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/node_modules/express/node_modules/connect/lib/middleware/session.js:333:9
    在 /Users/vivekanandan/Source/Git/ExpressApp/CosmicEnergyCoupled/node_modules/express/node_modules/connect/lib/middleware/session/memory.js:52:9

```

我已经按照作者的建议（passport-local-strategy）安装了 connect-flash 来恢复已弃用的 req.flash 方法。请找到应用程序中安装的 npm 包。

```
├── connect-flash@0.1.0
├── ejs@0.8.3
├── ejs-locals@0.2.5
├─┬ express@3.0.0
│ ├── 指挥官@0.6.1
│ ├─┬ connect@2.6.0
│ │ ├── bytes@0.1.0
│ │ ├── formidable@1.0.11
│ │ ├── pause@0.0.1
│ │ ├── qs@0.5.1
│ │ └─┬ send@0.0.4
│ │ └── mime@1.2.6
│ ├── cookie@0.0.4
│ ├── crc@0.2.0
│ ├── debug@0.7.0
│ ├── 新鲜@0.1.0
│ ├── methods@0.0.1
│ ├── mkdirp@0.3.3
│ ├── range-parser@0.0.4
│ └─┬ 发送@0.1.0
│ └── mime@1.2.6
├─┬ 护照@0.1.12
│ └── pkginfo@0.2.3
├─┬ passport-local@0.1.6
│ ├── 护照@0.1.12
│ └── pkginfo@0.2.3
├─┬ socket.io@0.9.10
│ ├── policyfile@0.0.4
│ ├── redis@0.7.2
│ └─┬ socket.io-client@0.9.10
│ ├─┬ active-x-obfuscator@0.0.1
│ │ └── zeparser@0.0.5
│ ├── uglify-js@1.2.5
│ ├─┬ ws@0.4.22
│ │ ├── 指挥官@0.6.1
│ │ ├── options@0.0.3
│ │ └── tinycolor@0.0.1
│ └── xmlhttprequest@1.4.2
└─┬ stylus@0.30.1
  ├── cssom@0.2.5
  ├── 调试@0.7.0
  └── mkdirp@0.3.4

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:18:58.150

尝试将此添加到您的主要 app.configure 方法

```
app.use(flash()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:22:17.077

```
npm install connect-flash --save

var flash = require('connect-flash')
app.use(flash()); 
```

我认为你用错了。您只需要在 res.redirect 之前使用类型和消息调用 req.flash()

```
 req.flash('info', 'Welcome to the site, a welcome email has been sent to you.');
   res.redirect('/'); 
```

# javascript - 为什么我要在常规 Web 应用程序中使用输入类型日期？

> ID：13135618
> 
> 赞同：0
> 
> 时间：2012-10-30T09:01:36.693
> 
> 标签：javascript, html, date, input, w3c

我目前正在使用 Phonegap 和 jQuery Mobile 构建一个 iOS 应用程序，并且我正在使用 HTML5 输入类型日期元素，以便用户输入他们的生日。这对于使用 Phonegap 应用程序来说是完全有意义的，因为这会调用手机的本机日期选择器 - 太棒了！

但是，当使用桌面浏览器测试我的应用程序时（我使用的是 Firefox 16），没有显示日期选择器，这显然是因为 Firefox 尚未实现这一点。这很酷，除了我可以在该字段中输入我想要的任何内容 - 任何我想要的格式。

规范说它应该使用这种`yyyy-mm-dd`格式，而我的 iOS 设备就是这样做的。但是，如果我输入 eg `06-09-94`，当我尝试将它转换为 JavaScript 日期对象时，它不会很好地发挥作用。

这是我的测试：

```
// Value is set to 1994-09-06
console.log(new Date($("input[type=date]")[0].value));
// > Date object representing September 6, 1994

// Value is set to 06-09-1994
console.log(new Date($("input[type=date]")[0].value));
// > Invalid date 
```

我在某处读过（至少对于 chrome），所有“有效”日期格式都将表示为`yyyy-mm-dd`，但这并没有发生。[http://updates.html5rocks.com/2012/08/Quick-FAQs-on-input-type-date-in-Google-Chrome](http://updates.html5rocks.com/2012/08/Quick-FAQs-on-input-type-date-in-Google-Chrome)

> 输入值返回什么样的格式？
> 
> input.value 始终以 yyyy-mm-dd 的形式返回，无论呈现格式如何。

所以，正如标题所示：*我为什么要`<input type="date">`在基于非移动设备的 Web 应用程序中使用？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:24:59.553

您可能希望使用 HTML 5 表单元素，因为希望有一天所有主要浏览器都支持它们。正如您所注意到的，日期选择器等提供了非常棒的开箱即用功能，否则必须手动编码。

但是，在您无法控制用户使用的浏览器的环境中，您不希望让它们独立存在。

目前处理此问题的建议方法是检查浏览器是否支持所需的表单字段，如果不支持，请使用 jQuery UI 元素之类的替代方法。快速搜索教程：[http ://www.javascriptkit.com/javatutors/createelementcheck2.shtml](http://www.javascriptkit.com/javatutors/createelementcheck2.shtml)

我认为，一些 js 框架在内部处理这样的检查，至少对于 dojo，我知道他们尝试使用尽可能多的本机浏览器功能 - 但我不确定它是如何使用 datepickers 处理的。

我不得不说，我很惊讶 Firefox 还没有实现这一点，Chrome 和 Opera 似乎处于领先地位......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:15:59.607

Since not all browsers still support all HTML5 features you can't see all it's benefits right away.
The `<input type=date>` tag is one of those features, if you run the code in the Chrome browser it will open date picker, when you can choose the date by clicking on the arrow button. This feature is missing though on Safari browser. Just wait for updates of browsers.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:18:23.720

`Date`在尝试将其转换为对象之前，请检查该值是否采用适当的日期格式。

如果不是，则改为向用户显示错误消息（例如，通过添加 a`<label>`或`<input>`使用`alert`）。

# raphael - 使用 raphael.js 中的单击事件启动 Web 音频 api 缓冲音频文件

> ID：13135620
> 
> 赞同：0
> 
> 时间：2012-10-30T09:01:46.657
> 
> 标签：raphael, html5-audio, web-audio-api

我有一个拉斐尔圆圈，我想附加一个启动函数的鼠标事件。该函数称为 PlayAudioFile()，Raphael.js 代码块无法访问该函数。我不知道如何修改下面的代码以使其范围可用。

```
 window.onload = function () {
                var R = Raphael(0, 0, "200px", "200px"),
                    r = R.circle(100, 100, 50).attr({fill: "hsb(0, 1, 1)", stroke: "none", opacity: .5}).click(function(){

                   alert("Wish I was an audio file being triggered instead");     // this needs to launch the playAudioFile() function. That function is not accessible however. So how do I modify playAudioFile()'s scope so that it is?

                    });

                var start = function () {
                    this.ox = this.attr("cx");
                    this.oy = this.attr("cy");
                    this.animate({r: 70, opacity: .25}, 500, ">");
                },
                move = function (dx, dy) {
                    this.attr({cx: this.ox + dx, cy: this.oy + dy});
                },
                up = function () {
                    this.animate({r: 50, opacity: .5}, 500, ">");
                };
                R.set(r).drag(move, start, up);
 };

var context = new webkitAudioContext(),
    savedBuffer;
var nameOfAudioFile = new XMLHttpRequest();
nameOfAudioFile.open('GET', 'A.mp3', true);
nameOfAudioFile.responseType = 'arraybuffer';
nameOfAudioFile.onload = function () {
        context.decodeAudioData(nameOfAudioFile.response,
             function(incomingBuffer) {
                 //save the buffer, we'll reuse it
                 savedBuffer = incomingBuffer;
                 //once the file has been loaded, we can start listening for click on the div, and use playAudioFile since it no longer requires a buffer to be passed to it
                 var myDiv= document.getElementById("myDiv");
                 myDiv.addEventListener("click", playAudioFile , false);

             }
             );
 playAudioFile = function () {
    var source = context.createBufferSource();
    source.buffer = savedBuffer;
    source.connect(context.destination);
    source.noteOn(0); // Play sound immediately
};

};
nameOfAudioFile.send();

</script>

<div id="myDiv">This div triggers playAudioFile() when clicked. Good!</div>

<style> 
#myDiv {
    position:relative;
    left:150px;
    top:240px;
background-color: green;
width:160px;
height:100px;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:18:23.360

尝试将 playAudioFile 函数移到 nameOfAudioFile 的 onload-listener 之外。此外，您可以将整个内容包装在 window.onload 函数中，以将其全部保留在该范围内。

```
 window.onload = function() {
            var context = new webkitAudioContext(),
                savedBuffer,
                playAudioFile = function() {
                   var source = context.createBufferSource();
                   source.buffer = savedBuffer;
                   source.connect(context.destination);
                   source.noteOn(0); // Play sound immediately
               };

           var nameOfAudioFile = new XMLHttpRequest();
           nameOfAudioFile.open('GET', 'A.mp3', true);
           nameOfAudioFile.responseType = 'arraybuffer';
           nameOfAudioFile.onload = function() {
               context.decodeAudioData(nameOfAudioFile.response, function(incomingBuffer) {
                   savedBuffer = incomingBuffer;
                   var myDiv = document.getElementById("myDiv");
                   myDiv.addEventListener("click", playAudioFile, false);

                    //at this point we know that the buffer has loaded and it should be safe to draw the button
                    var R = Raphael(0, 0, "200px", "200px"),
                       r = R.circle(100, 100, 50).attr({
                           fill: "hsb(0, 1, 1)",
                           stroke: "none",
                           opacity: .5
                       }).click(function() {
                            playAudioFile();
                       });

                   var start = function() {
                           this.ox = this.attr("cx");
                           this.oy = this.attr("cy");
                           this.animate({
                               r: 70,
                               opacity: .25
                           }, 500, ">");
                       },
                       move = function(dx, dy) {
                           this.attr({
                               cx: this.ox + dx,
                               cy: this.oy + dy
                           });
                       },
                       up = function() {
                           this.animate({
                               r: 50,
                               opacity: .5
                           }, 500, ">");
                       };
                   R.set(r).drag(move, start, up);

               });
           };
           nameOfAudioFile.send();
       }; 
```

# apache - 在 Lotus Domino 8.5.3 上安装 OSGi jar

> ID：13135622
> 
> 赞同：2
> 
> 时间：2012-10-30T09:01:55.207
> 
> 标签：apache, jar, osgi, lotus-domino, lotus

我正在开发一个 Servlet，我将其部署为 Lotus Domino 服务器（8.5.3）上的 OSGi 插件。

servlet 使用 HttpClient 向后端服务器发出 REST 样式的请求。

目前 Domino 8.5.3 附带 org.apache.commons.httpclient (3.0.0.20110912-1350)。我真的很想使用 org.apache.httpcomponents.httpclient-4.2.1。

知道如何在服务器上部署 jars（有依赖项、核心、日志记录、编解码器），以便它们可用于我的 osgi 插件吗？

到目前为止，我已经得到了很多帮助，但是这个让我失望了，而且我的代码只要我可以访问 httpcomponents.httpclient api 就可以工作:-)

非常感谢提前:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:11:05.470

不知道 Lotus Domino 是否是支持 OSGi 的服务器，但通常您只需为 httpclient api 包的 import-package 部分添加一个版本。例如，您的清单应该包含类似

导入包：org.apache.httpclient;version=[4.2,5)

现在，如果 Lotus Domino 是一个支持 OSGi 的服务器，那么应​​该直接在 4.2.1 版本中部署您的 httpclient jar（我认为这个已经包含声明正确包的清单）如果不是这种情况，您可能想要创建你自己的 OSGi-ready httpclient 包，BND 工具和 apache maven-bundle-plugin 将帮助你。

# facebook-javascript-sdk - commenting on facebook externally

> ID：13135629
> 
> 赞同：-1
> 
> 时间：2012-10-30T09:02:12.230
> 
> 标签：facebook-javascript-sdk

How can i comment on a facebook post externally? i.e. through my web page?

I can like a post this way but can't seem to find a way to comment on it. I have added a comment box and given it the url to the facebook post but it does not show up there, only on my page or publishes it to the user's wall who is commenting but not on the actual post.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:53:12.513

阿法克这是不可能的。评论插件无法连接到 Facebook 上的特定帖子。API似乎也没有办法：

[https://developers.facebook.com/docs/reference/api/Comment/](https://developers.facebook.com/docs/reference/api/Comment/)

您可以通过 API“点赞”、“删除”和“阅读”评论，但不能创建评论。我想这是出于安全和垃圾邮件的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:33:55.313

没有为此预先构建的社交插件，但常规 API 支持向大多数类型的对象添加注释，而且非常简单。

向您的用户请求`publish_stream`许可，对于大多数类型的对象（例如[Post](https://developers.facebook.com/docs/reference/api/post/)和[Photo](https://developers.facebook.com/docs/reference/api/photo/)对象），您可以向`/<object ID>/comments?message=message goes here&access_token=ACCESS_TOKEN`

这显然不适用于 URL，因为除了通过评论插件外，无法在 URL 上发表评论

# objective-c - 将 NSMutableArray 从 NSObject 传递到 ViewController 时出错

> ID：13135630
> 
> 赞同：1
> 
> 时间：2012-10-30T09:02:21.263
> 
> 标签：objective-c, ios, uitableview, bluetooth, core-bluetooth

我在 NSObject 类中有一个 MutableArray 我想将 NSMutableArray 传递给 detailViewController 然后我想在 tableView(detailViewController) 中显示 NSMutableArray。在这个项目中我有两个视图控制器，一个是 firstViewcontroller 和 detailviewcontroller。问题是数据无法通过来自 NSObject。如果您需要更多信息，请给我一个想法请询问。

外围管理器.m

```
- (void)centralManager:(CBCentralManager *)central 
didDiscoverPeripheral:(CBPeripheral *)peripheral 
 advertisementData:(NSDictionary *)advertisementData 
              RSSI:(NSNumber *)RSSI
{

  NSLog(@"didDiscoverPeriphera.peripheral: %@ rssi: %@, UUID:%@ advertisementData:%@", peripheral,RSSI,peripheral.UUID, [advertisementData description]);

  targetPeripheral = peripheral;
  peripheral.delegate = self;
  //  [[centralManager retrievePeripherals:NSArray arrayWithObject:(id)peripheral.UUID] ];
  //  rssilabel.text=[RSSI stringValue];
  if (!peripheral.isConnected)
  {
  [centralManager connectPeripheral:peripheral options:nil];
  }
  // MeBleAppDelegate *appdelegate=(MeBleAppDelegate *)[[UIApplication sharedApplication]delegate];
  MeBleDetailViewController *obj=[[MeBleDetailViewController alloc]init];
  // MeBleDetailViewController *obj=[[appdelegate sharedappdelegate].navigationController objectATindex:MeBleDetailViewController];
  obj.dataArray=self.mutableArray;
  [self.mutableArray addObject:peripheral];
  printf("New UUId,addin\r\n");

} 
```

详细视图控制器.m

```
- (void)viewDidLoad
{
  //NSMutableArray *dataArray=[[NSMutableArray alloc]init];
  [super viewDidLoad];
  NSLog(@"%@",self.dataArray);
  NSLog(@"%@",objCurrentDevice.mutableArray);
  //  PeripheralManager *peripheralmanager=[[PeripheralManager alloc]init];
  self.label.text=[NSString stringWithFormat:@" %@ ",dataArray];
  // Do any additional setup after loading the view.
  // [self.dataArray addObject:objCurrentDevice.mutableArray];

  appDelegate.arrDevices=dataArray;
  appDelegate = [[UIApplication sharedApplication] delegate]; 
  // write below line in any function in this file
  // NSLog(@"%d",[appDelegate.arrDevices count]);  
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *simpleTableIdentifier=@"Cell1";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
  if(cell==nil)
  {
    cell =[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
}

    cell.textLabel.text=[dataArray objectAtIndex:indexPath.row];
     //  PeripheralManager *objtemp=[[dataArray objectAtIndex:indexPath.row]deviceName];
     NSLog(@"%@",objCurrentDevice.deviceName);
    return cell;
} 
```

错误信息

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '***    -[__NSArrayM insertObject:atIndex:]: object cannot be nil'

*** First throw call stack:

(0x356c888f 0x37a6f259 0x3561d1d7 0x164db 0x33135c8b 0x331421e9 0x33142059 0x33141f3f 0x331417c1 0x33141503 0x33135aff 0x331357d5 0x331ae903 0x33228627 0x351e2933 0x3569ca33 0x3569c699 0x3569b26f 0x3561e4a5 0x3561e36d 0x372ba439 0x3312acd5 0x1500f 0x14fb4)

terminate called throwing an exception(lldb) 
```

我想要这样的图像输出..请给出一个想法..请向我询问更多信息。

![在此处输入图像描述](../Images/2598fe274c50878218bd986baa2ffde7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:08:36.787

您可以使用**指定初始化**程序来解决此问题

在你的**FirstViewController**

```
-(id)initwithData (NSArray*)array
{
  //store the data in array
} 
```

在DetailedViewController 你可以调用这个方法..

```
MeBleDetailViewController *obj=[[MeBleDetailViewController alloc]initwithData:yournsarrayname]; 
```

您可以看到您的数组将加载数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:07:44.913

我认为您没有阅读异常消息：

```
-[__NSArrayM insertObject:atIndex:]: object cannot be nil' 
```

此异常与传递数组无关，它与您填充数组的方式有关。Cocoa 集合类不能保存`nil`指针（看看`NSNull`你是否想要这样的东西）并且你正试图将一个`nil`指针放入数组中，它对（字面意思）例外。

添加一些保护代码：

```
obj.dataArray=self.mutableArray;
if (peripheral != nil)
    [self.mutableArray addObject:peripheral]; 
```

# asp.net-mvc - 在 MVC3 中定义路由的文件

> ID：13135633
> 
> 赞同：3
> 
> 时间：2012-10-30T09:02:24.940
> 
> 标签：asp.net-mvc, asp.net-mvc-3, routes

我有这个文件：

```
<fru>
 <url action="product" controler="Home" params="{id=123}" >this_is_the_an_arbitrary_url_of_a_product.html</url>
 <url action="customer" controler="Home" params="{id=445}" >this_is_the_an_arbitrary_url_of_a_customer.html</url>
... other urls ...
</fru> 
```

我正在寻找将此文件或此对象结构与 MVCHandler 绑定，以便将请求映射到具有参数的良好操作。对于 url 我来说，重要的是 url 不遵守任何结构规则。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:32:11.770

您可以为 MVC 项目设置完全任意的路由，不受任何特定 URL 结构的影响。

**在 Global.asax.cs 中：**

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapRoute(
        "",
        "superweirdurlwithnostructure.whatever",
        new { controller = "Home", action = "Products", id = 500 }
    );
} 
```

确保在映射正常路线*之前执行此操作。*这些特定的需要先行，否则默认路由条目将阻止请求通过。

如果你想基于你展示的 XML 文件，我会做一些简单的事情：

```
XDocument routes = XDocument.Load("path/to/route-file.xml");
foreach (var route in routes.Descendants("url"))
{
    //pull out info from each url entry and run the routes.MapRoute(...) command
} 
```

XML 文件本身当然可以以某种方式嵌入到项目中，这取决于您。

**编辑：**

至于参数的处理，您可以使用`routes.MapRoute(...)`命令轻松发送您想要的任何参数。只需像这样添加它们：

```
routes.MapRoute(
    "",
    "my/route/test",
    new { controller = "Home", action = "Index",
          id = "500", value = "hello world" } // <- you can add anything you want
); 
```

然后在动作中，您只需这样做：

```
//note that the argument names match the parameters you listed in the route:
public ActionResult Index(int id, string value)
{
    //do stuff
} 
```

# iphone - 要解析的奇怪 XML 文档

> ID：13135636
> 
> 赞同：-1
> 
> 时间：2012-10-30T09:02:36.330
> 
> 标签：iphone, ios, xcode, xml-parsing

我正在尝试在 IOS 中解析此 XML 代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<ofertas>
    <oferta>
        <id>138</id>
        <connector/>
        <codigo>PARMAD</codigo>
        <titulo><![CDATA[Madrid, BordÈus e Paris]]></titulo>

        <descricao><![CDATA[ 7 dias c/ Pequeno AlmoÁo - Apenas Circuito Terrestre - Alojamento e Pequeno-AlmoÁo ; 7 dias c/ Pequeno AlmoÁo - SaÌda com voo de Lisboa - Alojamento e Pequeno-AlmoÁo ; 7 dias c/ Pequeno AlmoÁo - SaÌda com voo do Porto - Alojamento e Pequeno-AlmoÁo ; 7 dias c/ Pequeno AlmoÁo - SaÌda com voo de Faro - Alojamento e Pequeno-AlmoÁo]]></descricao>
        <datas><![CDATA[Consultar programa]]></datas>
        <data1>2012-07-31</data1>
        <data2>2013-03-23</data2>

        <categoria>Europa</categoria>
        <subcategoria>Circuitos Europa</subcategoria>
        <zona>Turistica</zona>
        <tipo>Circuitos Europa</tipo>

        <valor>575</valor>
        <dias>6</dias>

        <imagem>http://www.optitravel.net/optitravel/www/media/custom/cli_202/media/PKT_138_1343738358.jpg</imagem>

        <link/>

    </oferta>

    <oferta>
        <id>140</id>
        <connector/>
        <codigo>PARPRG</codigo>
        <titulo><![CDATA[Paris, Frankfurt e Praga]]></titulo>

        <descricao><![CDATA[ 7 dias c/ Pequeno AlmoÁo - Apenas Circuito Terrestre - Alojamento e Pequeno-AlmoÁo ; 7 dias c/ Pequeno AlmoÁo - SaÌda com voo de Lisboa - Alojamento e Pequeno-AlmoÁo ; 7 dias c/ Pequeno AlmoÁo - SaÌda com voo do Porto - Alojamento e Pequeno-AlmoÁo ; 7 dias c/ Pequeno AlmoÁo - SaÌda com voo de Faro - Alojamento e Pequeno-AlmoÁo]]></descricao>
        <datas><![CDATA[01/Nov, 08/Nov, 15/Nov, 29/Nov, 13/Dez, 27/Dez, 10/Jan/2013, 24/Jan/2013, 07/Fev/2013, 21/Fev/2013, 07/Mar/2013, 21/Mar/2013]]></datas>
        <data1>2012-08-01</data1>
        <data2>2013-03-21</data2> 
```

我不知道这是否是解析大文件的最佳选择，但我正在使用`SMXMLDocument`它来解析这个特定的 XML。我遇到的问题是我无法解码这个 XML。这是我正在使用的 XML 解析器的作者给出的代码示例：

```
 //REPLACED WITH MY XML DOC
NSString *sampleXML = [[NSBundle mainBundle] pathForResource:@"global" ofType:@"xml"];
NSData *data = [NSData dataWithContentsOfFile:sampleXML];

// create a new SMXMLDocument with the contents of sample.xml
NSError *error;
SMXMLDocument *document = [SMXMLDocument documentWithData:data error:&error];

// check for errors
if (error) {
    NSLog(@"Error while parsing the document: %@", error);
    return;
}

// demonstrate -description of document/element classes
NSLog(@"Document:\n %@", document);

// Pull out the <books> node
SMXMLElement *books = [document.root childNamed:@"????"];

// Look through <books> children of type <book>
for (SMXMLElement *book in [books childrenNamed:@"????"]) {

    // demonstrate common cases of extracting XML data
    NSString *isbn = [book attributeNamed:@"id"]; // XML attribute
    NSString *title = [book valueWithPath:@"titulo"]; // child node value

    // show off some KVC magic
    NSArray *authors = [[book childNamed:@"authors"].children valueForKey:@"value"];

    NSLog(@"Found a book!\n ISBN: %@ \n Title: %@ \n Price: %f \n", isbn, title, price);
} 
```

如果有更好的 XML 解析器来解析这个文档，请告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:09:19.483

您可以选择[TBXML Parser](http://www.tbxml.co.uk/TBXML/TBXML_Free.html) 。它旨在提供最快的 XML 解析，同时使用最少的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:43:26.823

正如@AppleDelegate 所说，我也使用TBXML Parser。这是我将使用的代码。您需要先导入`TBXML+HTTP.h`才能使用它。只需在您想要的地方调用 [self getXML]，代码将完成剩下的工作。

首先获取xml：

```
-(void)getXML {

    NSLog(@"Getting XML");

    // Create a success block to be called when the async request completes
    TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {

        // If TBXML found a root node, process element and iterate all children
        if (tbxmlDocument.rootXMLElement)
            [self traverseElement:tbxmlDocument.rootXMLElement];

    };

    // Create a failure block that gets called if something goes wrong
    TBXMLFailureBlock failureBlock = ^(TBXML *tbxmlDocument, NSError * error) {
        NSLog(@"Error! %@ %@", [error localizedDescription], [error userInfo]);
    };

    // Initialize TBXML with the URL of an XML doc. TBXML asynchronously loads and parses the file.
    TBXML *tbxml = [[TBXML alloc] initWithURL: [NSURL URLWithString:@"File.xml"] 
                                      success: successBlock 
                                      failure: failureBlock];
} 
```

然后通读文件：

```
- (void) traverseElement:(TBXMLElement *)element {

    TBXMLElement *oferta = element->firstChild;

    do {

        // Obtain first attribute from element
        TBXMLElement *element = oferta->firstChild;
        NSString *ofertaId = [NSString stringWithString: [TBXML textForElement:element]];
        NSLog(@"%@", ofertaId);

        // Obtain the next element
        element = element->nextSibling;
        // Nothing to do (<connector/>)

        // Obtain the next element
        element = element->nextSibling;
        NSString *codigo = [TBXML textForElement:element];
        NSLog(@"%@", codigo);

        // Obtain the next element
        element = element->nextSibling;
        NSString *titulo = [TBXML textForElement:element];
        NSLog(@"%@", titulo);

        // Obtain the next element
        element = element->nextSibling;
        NSString *descricao = [TBXML textForElement:element];
        NSLog(@"%@", descricao);

        // Obtain the next element
        element = element->nextSibling;
        NSString *datas = [TBXML textForElement:element];
        NSLog(@"%@", datas);

        // Obtain the next element
        element = element->nextSibling;
        NSString *data1 = [TBXML textForElement:element];
        NSLog(@"%@", data1);

        // Obtain the next element
        element = element->nextSibling;
        NSString *data2 = [TBXML textForElement:element];
        NSLog(@"%@", data2);

        // Obtain the next element
        element = element->nextSibling;
        NSString *categoria = [TBXML textForElement:element];
        NSLog(@"%@", categoria);

        // Obtain the next element
        element = element->nextSibling;
        NSString *subcategoria = [TBXML textForElement:element];
        NSLog(@"%@", subcategoria);

        // Obtain the next element
        element = element->nextSibling;
        NSString *zona = [TBXML textForElement:element];
        NSLog(@"%@", zona);

        // Obtain the next element
        element = element->nextSibling;
        NSString *tipo = [TBXML textForElement:element];
        NSLog(@"%@", tipo);

        // Obtain the next element
        element = element->nextSibling;
        NSString *valor = [TBXML textForElement:element];
        NSLog(@"%@", valor);

        // Obtain the next element
        element = element->nextSibling;
        NSString *dias = [TBXML textForElement:element];
        NSLog(@"%@", dias);

        // Obtain the next element
        element = element->nextSibling;
        NSString *imagem = [TBXML textForElement:element];
        NSLog(@"%@", imagem);

        // Obtain the next element
        element = element->nextSibling;
        // Nothing to do (<link/>)

        // Save infos

    } while ((oferta = oferta->nextSibling));

    NSLog(@"Done");
} 
```

我已经测试了代码，它似乎工作正常（运行代码，并检查控制台日志）。您需要做的就是`// Save infos`从我的代码更改为您可以根据需要保存所有字符串的地方。do-while 将遍历`<oferta>`xml 中的所有元素，并将所需的所有元素保存在单独的字符串中。然后，您可以操纵字符串来存储日期、数字和所有内容。

# hook - 如何挂钩 API 函数

> ID：13135642
> 
> 赞同：1
> 
> 时间：2012-10-30T09:02:49.403
> 
> 标签：hook, windows-ce

我必须拦截一个调用 .dll 的 coredll.dll 中的函数的 DLL `Windows CE 5.0`。DLL 不在 ROM 中。如何挂钩被测者的调用并将其重定向到我自己的函数？

示例：当 DLL 代码调用 RegFlushKey 时，我不希望执行实际代码，因为它非常耗时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:51:37.683

我绝对认为它是不可扩展的，不可维护的，可能会在现实世界的部署中引起问题，并且通常是一件疯狂的事情，但是您可以直接挂钩 RegFlushKey API，以便对它的*所有*调用都重新路由。对于 SO 帖子来说这太复杂了，但是[在 Codeproject 上有一个不错的解释](http://www.codeproject.com/Tips/124496/Easy-API-hooking-in-Windows-CE)。

我更倾向于找到任何类型的解决方法，无论是对 DLL 的后台线程调用，还是在我诉诸 API 挂钩之前很久。

# ruby-on-rails - How to specify a controller and action in form to create new resources

> ID：13135647
> 
> 赞同：1
> 
> 时间：2012-10-30T09:03:06.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

I have QuestionsController and TrueFalseQuestionsController. I built a form to create question true/false, this is my form:

```
<%= simple_form_for @question, defaults: { error: false } do |question_form| %>
  <fieldset>
    <legend>Question</legend>
    <%= render 'shared/error_messages', object: question_form.object %>
    <%= question_form.input :content, input_html: { rows: 3, class: 'span6' } %>
    <%= question_form.input :mark, input_html: { class: 'span1' } %>
    <%= question_form.association :topic %>

    <%= question_form.simple_fields_for :answers do |answer_form| %>    
      <%= answer_form.input :correct,
            collection: [[true, 'True'], [false, 'False']],
            as: :radio_buttons,
            label: 'Answer',
            value_method: :first,
            label_method: :last,
            item_wrapper_class: 'inline' %>
    <% end %>
  </fieldset>

    <%= question_form.button :submit, class: 'new_resource' %>
<% end %> 
```

Now when I submit the form, it uses create action in QuestionsController, so how can I specify form to use create action in TrueFalseQuestionsController?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:48:34.727

你又来了:)，正如我在上一个问题中告诉你的那样，如果你为这三种类型的问题准备了三个部分，只需在每个部分中做不同的事情。我假设你已经在 routes.rb 中设置了嵌套路由

例如，在真假问题表格中，您可以这样做

```
form_for @question, :url=>true_false_questions_path do |f| 
```

其他人也这样做。

# mysql - Returning multiple results from one row

> ID：13135650
> 
> 赞同：0
> 
> 时间：2012-10-30T07:29:44.550
> 
> 标签：mysql

I have a set of MySQL data similar to the following:

```
| id | type       | start               | end                 |
===============================================================
|  1 |      event | 2011-11-01T00:00:00 | 2012-01-02T00:00:00 |
|  2 |    showing | 2012-11-04T00:00:00 | 2012-11-04T00:00:00 |
|  3 | conference | 2012-12-01T00:00:00 | 2012-12-04T00:00:00 |
|  4 |     event2 | 2012-01-01T00:00:00 | 2012-01-01T00:00:00 | 
```

I want to retrieve events within a certain date range, but I also want to return individual results for each row that has a time span of more than one day. What's the best way to achieve this?

**EDIT**: In other words, I want to return two results from the **event** row, four results from the **conference** row and a single result for all the others.

Any ideas would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:13:29.467

试试这个说法：

```
SELECT * FROM table
WHERE START BETWEEN '2012-01-01' AND '2012-01-03'
OR END BETWEEN '2012-01-01' AND '2012-01-03'    
OR TO_DAYS(end) - TO_DAYS(start) > 1 
```

我创建它是为了在[SQL Fiddle上进行测试](http://www.sqlfiddle.com/#!2/0dda1/14/0)

# c# - 如何调用 App_Code 文件夹 (AJAX) 中的类

> ID：13135651
> 
> 赞同：-1
> 
> 时间：2012-10-30T09:03:18.093
> 
> 标签：c#, javascript, asp.net, webmatrix, typescript

我通过 AJAX 将一些内容发布到数据库中，而我的 ASP.NET *WebPages*网站的 App_Code 文件夹中的 C# 代码将执行此操作。

我的问题是，我用什么作为 ajax 部分的文件路径？

`xmlhttp.open("POST", "App_Code/MyClass/MyMethod()");`?

显然这不起作用，因为它是错误的，但我找不到任何来源来确认如何做到这一点。我知道这是可以做到的，因为几个月前我在 SO 上找到了一个代码示例，但我再也找不到它了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:09:09.293

`App_code`由于它是受保护的文件夹，因此无法直接请求内容。

相反，您应该有一个 .cshtml 文件，该文件使用位于 中的类`App_code`，然后从您的 Ajax 函数中调用它。传递给 Ajax 调用的 URL 就是 .cshtml 文件的 URL。您可以将参数作为表单数据、查询字符串值或 UrlData 传递给 .cshtml 文件。

# mongodb - Any sample to store and retrieve image on mongodb using gridfs, scala and playframework2

> ID：13135653
> 
> 赞同：3
> 
> 时间：2012-10-30T09:03:18.703
> 
> 标签：mongodb, playframework, playframework-2.0, salat

I have a model

```
case class Person(
  _id: ObjectId = new ObjectId,
  empno: String,
  name: String,
  picture: String
) 
```

I'm a bit lost on how do I handle the picture upload on the `form`, `controller` and `view`. Appreciate help for sample or point me to the correct direction.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:22:07.710

此答案使用 GridFS，但是您可以使用方法中的文件执行您想要的操作`upload`。

表单视图：

```
@helper.form(routes.Application.upload, 'enctype -> "multipart/form-data") {
  @helper.inputFile(form("photo"))
  <button type="submit">upload</button>
} 
```

显示视图：

```
<img src='@routes.Application.getPhoto(fileId)'/> 
```

控制器：

```
def upload = Action(parse.multipartFormData) { request =>
  request.body.file("photo") match {
    case Some(photo) =>
      val gridFs = salat.gridFS("photos")
      val uploadedFile = gridFs.createFile(photo.ref.file)
      uploadedFile.contentType = photo.contentType.orNull
      uploadedFile.save()
      Ok(...)
    case None => BadRequest("no photo")
  }
}

def getPhoto(file: ObjectId) = Action {
  import com.mongodb.casbah.Implicits._

  val gridFs = salat.gridFS("photos")

  gridFs.findOne(Map("_id" -> file)) match {
    case Some(f) => SimpleResult(
      ResponseHeader(OK, Map(
        CONTENT_LENGTH -> f.length.toString,
        CONTENT_TYPE -> f.contentType.getOrElse(BINARY),
        DATE -> new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss 'GMT'", java.util.Locale.US).format(f.uploadDate)
      )),
      Enumerator.fromStream(f.inputStream)
    )

    case None => NotFound
  }
} 
```

路线：

```
GET /upload controllers.Application.upload
GET /photos/:file controllers.Application.getPhoto(file: ObjectId) 
```

# shell - 制作与模式匹配的多个文件的备份副本

> ID：13135657
> 
> 赞同：1
> 
> 时间：2012-10-30T09:03:47.797
> 
> 标签：shell, backup

我有文件：`x0001_test.xml z0054_test.xml k5487_test.xml`....

我想保存他们做类似的事情：`cp *_test.xml ${BEGINNING}_test.xml.SAVE`.

bash脚本中有没有办法存储`*`每个文件的内容以便之后重新注入？还是我应该使用循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:09:12.167

这样做的循环可能很简单，不需要单独的单行命令。您不需要保存文件名的*一部分*，因为您只是添加`.SAVE`到*整个*内容中：

```
for fspec in *_test.xml; do
    cp "${fspec}" "${fspec}.SAVE"
done 
```

而且，无论如何，如果您真的想要，您可以在一行中完成：

```
for fspec in *_test.xml; do cp "${fspec}" "${fspec}.SAVE" ; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:43:29.540

@paxdiablo 给了你最直接的答案。另外几个选择

```
printf "%s\0" *_test.xml | xargs -0 -L1 -I{}  cp {} {}.SAVE 
```

```
find . -name \*_test.xml -exec  cp {} {}.SAVE \; 
```

这假设您有 GNU xargs，并且 find 命令可能会在子目录中找到匹配的文件。

# python - Pool with permanent objects for each worker without “global” keyword

> ID：13135659
> 
> 赞同：5
> 
> 时间：2012-10-30T09:03:51.150
> 
> 标签：python, multiprocessing

I am using a Pool to benefit of multiple cores. Each worker in the pool needs its own Calculator object. The initialization of calculator is quite time consuming, so I would like to have it generated only once per worker in the pool and not every time, a new task arrives. The only way, I got this working was by using the “ugly“ keyword `global`. Is there a “cleaner” way to implement this?

I would like to avoid queues (parent thread is often sigkill’d and leaves child processes when using queues) and managers (performance too slow).

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import multiprocessing

def init_pool():
    global calculator
    calculator = Calculator()   # should only executed ones per worker

def run_pool(args):
    return calculator.calculate(*args)  # time consuming calculation

class Organiser():
    def __init__(self):
        self.__pool = multiprocessing.Pool(initializer=init_pool)

    def process(self, tasks):
        results = self.__pool.map(run_pool, tasks)
        return results 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T06:45:43.823

我没有看到一种方法来实现你想要的（每个工人只初始化一次）。

**但是，如果您想为整个工作组**只初始化一次“计算器”，则以下方法似乎有效。

```
def run_pool(args):
    calculator,arg = args
    return calculator.calculate(arg)  # time consuming calculation

class Organiser():
    def __init__(self):
        self.calculator = Calculator()
        self.__pool = multiprocessing.Pool(processes=4)

    def process(self, tasks):
        results = self.__pool.map(run_pool, [(self.calculator,data) for data in tasks])
        return results 
```

要为每个工作人员仅初始化一次，在我看来，您必须使用全局变量或单例（等效）。我也将等待您的问题的其他答案:)

问候， 悉达多

# contacts - 在多个类别中搜索 Outlook 联系人 - AND 不是 OR

> ID：13135663
> 
> 赞同：0
> 
> 时间：2012-10-30T09:04:14.210
> 
> 标签：contacts, categories, outlook-2010

环境是连接到 Exchange 服务器的 Outlook 2010。

联系人位于公用文件夹中。

我想查找归类为“教育和活动”的联系人。

使用高级搜索，我可以找到归类为“教育或活动”的联系人，但这对我没有用。

我知道我可以将列表导出到 Excel 电子表格并手动完成，但普通用户需要此功能并且需要不断完成。

任何关于如何做到这一点的想法都将受到欢迎。

谢谢，

哈南·科恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:29:50.937

:) 我有同样的问题，只是我希望 Outlook 向我显示一个类别的联系人，而不是另一个类别。所以，有办法做到这一点，只是发现了。如果您转到搜索字段并写下以下内容：

**类别：="教育"+"活动"**

它应该一起显示**教育**和**活动**类别下的联系人。:-) 如果您想要有**Education**但没有**Events**的联系人，那么您将加号替换为减号，它应该可以完成这项工作。

这是 Outlook 2010 的一种隐藏搜索机制，我不知道它是否适用于旧版本的 Outlook，但我刚刚发现它，我非常高兴！！！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T13:21:03.600

答案很有用，但并不完全正确，至少在 Outlook 2013 中没有。您应该在搜索字段中写下：**category:="Education"+category:"Events"** （用我的语言，荷兰语，在荷兰语 Outlook，fe : 类别:="能量"+类别:"Armoede")

# java - Navigation is not working with struts 2

> ID：13135664
> 
> 赞同：0
> 
> 时间：2012-10-30T09:04:16.377
> 
> 标签：java, struts2

I have called struts action through json like this

```
function(){ 
    var data = {};
    data['userLogin.userName'] = $('#username').val().trim();
    data['userLogin.password']  = $('#password').val().trim();

    $.ajax({url:'loginAction', 
        cache: false,
        data:data, 
        dataType: 'json'
        });     
}; 
```

.

this is my struct action mapping code segment

```
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

    <struts>

    <constant name="struts.objectFactory" value="org.apache.struts2.spring.StrutsSpringObjectFactory"/>

    <!-- Configuration for the default package. -->
    <package name="default" extends="struts-default,json-default">

      <action name="loginAction" class="loginAction" method="doLogin">
            <result name="success">/test.jsp</result>
            <result name="error">/index.jsp</result>
      </action>
    </package>

</struts> 
```

and this is my spring configuration file data

```
<bean id="loginDAO" class="com.mls.dao.LoginDAOImpl"></bean>

<bean id="loginService" class="com.mls.service.LoginServiceImpl">
    <property name="loginDAO" ref="loginDAO"></property>
</bean> 

<bean id="loginAction" class="com.mls.action.LoginAction">
    <property name="loginService" ref="loginService"></property>
</bean> 
```

loginSerice return success but navigation is not working. Give me idea how to fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:38:36.457

这是ajax请求。如果您想重定向到其他网址，您必须在 javascript 中执行此操作。阅读[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)和[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

# java - How to retrieve Videos from a YouTube CHANNEL with java gdata client

> ID：13135669
> 
> 赞同：2
> 
> 时间：2012-10-30T09:04:35.283
> 
> 标签：java, youtube-api, gdata-api

im using the java google gdata client api for retrieving youtube videos which works fine so far. But today i faced a problem. Im trying to receive videos from a **channel** but getting no results. The (example) url of a channel im trying to find videos: [http://www.youtube.com/channel/HCrrUf3dKG1Gw](http://www.youtube.com/channel/HCrrUf3dKG1Gw)

I tried to use the YouTubeQuery setAuthor method with "HCrrUf3dKG1Gw" (no matter if setPartner was false or true) and setFullTextQuery "PERSONA 4"-> no results

Getting videos from url containing the "user" works fine with setting the author in the query.

Thats the code im using (slightly modified):

```
YouTubeService service = new YouTubeService(<clientId>)
service.setConnectTimeout(2000)
YouTubeQuery query = new YouTubeQuery(new URL(<url>)
query.setOrderBy(YouTubeQuery.OrderBy.RELEVANCE)
query.setTime(Time.ALL_TIME)
query.setFullTextQuery(<query>)
query.setSafeSearch(YouTubeQuery.SafeSearch.NONE)
query.setMaxResults(50)
if (isPartner) {
   query.setUploader(Uploader.PARTNER)
}
if (author) {
   query.setAuthor(<author>)
}
VideoFeed videoFeed = service.query(query, VideoFeed.class)
List<VideoEntry> videos = videoFeed.getEntries() 
```

Does anybody have a clue what im missing here? Are channels different handled than user?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T00:51:26.930

首先解决 HTTP URL，然后考虑 java API。

当 URL 以“videos”结尾时，可以在“?”后面添加查询参数：

[http://gdata.youtube.com/feeds/api/videos?q=puppy&safeSearch=none&orderby=viewCount](http://gdata.youtube.com/feeds/api/videos?q=puppy&safeSearch=none&orderby=viewCount)

当 URL 以“channels”/channelID 结尾时，您不能。

在您的频道页面 [http://www.youtube.com/channel/HCrrUf3dKG1Gw](http://www.youtube.com/channel/HCrrUf3dKG1Gw)上，在“搜索频道”框中输入“MODOK”并进行搜索。结果页面是
[http://www.youtube.com/channel/HCrrUf3dKG1Gw/videos?query=MODOK](http://www.youtube.com/channel/HCrrUf3dKG1Gw/videos?query=MODOK)

即在您可以添加查询参数之前，基于通道的 URL 必须如下所示：

[http://www.youtube.com/channel/HCrrUf3dKG1Gw/videos](http://www.youtube.com/channel/HCrrUf3dKG1Gw/videos)。

Java API 生成 HTTP URL 并通过基于 HTTP 的套接字发送它们 - 与上述相同。

**解决方案：**

```
 YouTubeQuery query = 
 new YouTubeQuery(new URL("http://www.youtube.com/channel/HCrrUf3dKG1Gw/videos"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-13T09:37:51.440

我遇到了同样的问题。网址错误。在 gdata 库中调用这个

```
https://GDATA.youtube.com/feeds/api/channels 
```

如果使用 Data API 2.0，则必须用于通道查询。

和

```
https://GDATA.youtube.com/feeds/api/videos 
```

用于视频查询。

[https://developers.google.com/youtube/2.0/developers_guide_protocol_channel_search](https://developers.google.com/youtube/2.0/developers_guide_protocol_channel_search)

在数据 API 3.0 的情况下

```
https://www.googleapis.com/youtube/v3/channels
https://www.googleapis.com/youtube/v3/videos
https://developers.google.com/youtube/v3/docs/channels/list 
```

试试这个例子 [https://developers.google.com/youtube/v3/code_samples/java#retrieve_my_uploads](https://developers.google.com/youtube/v3/code_samples/java#retrieve_my_uploads)

# javascript - jQuery slider trouble

> ID：13135677
> 
> 赞同：1
> 
> 时间：2012-10-30T09:04:54.947
> 
> 标签：javascript, jquery, css

Hi I'm creating a simple jQuery slide show. The requirement for the slide is simple, just the slide just flip continuously towards the left. Most of the tutorial shown on line is pretty advanced and fancy. But then I came across one that is pretty much almost what I want.

[http://www.webchiefdesign.co.uk/blog/simple-jquery-slideshow/index.php](http://www.webchiefdesign.co.uk/blog/simple-jquery-slideshow/index.php)

But the problem is when the image slides to the end it will slide backward to my first image. Is there any way that I can change the code so that when the image is slid to the end, the slide will keep on back to first image but not by slide backward.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:35:30.037

如果您需要避免最后一张幻灯片回到第一张并重新开始，我建议对 Pushpesh 的回答稍作改动：

```
$(document).ready(function() {
var currentPosition = 0;
var slideWidth = 500;
var slides = $('.slide');
var numberOfSlides = slides.length;
var slideShowInterval;
var speed = 900;
var lastSlideReached = false;

slides.wrapAll('<div id="slidesHolder"></div>');
slides.css({ 'float' : 'left' });
$('#slidesHolder').css('width', slideWidth * numberOfSlides);
slideShowInterval = setInterval(changePosition, speed);

function changePosition() {
    if( ! lastSlideReached ) {
        if(currentPosition == (numberOfSlides-1)) {
            lastSlideReached = true;
        } else {
            currentPosition++;
        }

        moveSlide();

    } else {                     
        resetSlide()
    }

}

function moveSlide() {
    $('#slidesHolder').animate({'marginLeft' : slideWidth*(-currentPosition)});
}

function resetSlide(){
    currentPosition = 0;
    $('#slidesHolder').css('marginLeft', currentPosition );
    lastSlideReached = false;

} 
```

});​</p>

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:24:45.043

请将您的 javascript 更改为：

**更新：**您希望滑块在到达幻灯片后滑回原始位置。`slideLeft`一旦到达最后一张幻灯片，该功能就可以实现这一点。

```
$(document).ready(function() {
    var currentPosition = 0;
    var slideWidth = 500;
    var slides = $('.slide');
    var numberOfSlides = slides.length;
    var slideShowInterval;
    var speed = 3000;
    var lastSlideReached = false;

    slides.wrapAll('<div id="slidesHolder"></div>');
    slides.css({ 'float' : 'left' });
    $('#slidesHolder').css('width', slideWidth * numberOfSlides);
    slideShowInterval = setInterval(changePosition, speed);

    function changePosition() {
        if( ! lastSlideReached ) {
            if(currentPosition == (numberOfSlides-1)) {
                lastSlideReached = true;

                            clearInterval( slideShowInterval );
                slideLeft();
            slideShowInterval = setInterval(changePosition, speed);
            } else {
                currentPosition++;
            }
        } else {
            if( currentPosition == 0 ) {
                lastSlideReached = false;
            } else {
                currentPosition--;
            }
        }

        moveSlide();
    }

    function moveSlide() {
         $('#slidesHolder').animate(
            {'marginLeft' : slideWidth*(-currentPosition)}
         );
    }

function slideLeft() {
    $('#slidesHolder').animate({'marginLeft' : 0});
    currentPosition = 0;
    lastSlideReached = false;
}
}); 
```

我添加了一个变量`var lastSlideReached = false;`并对函数进行了一些更改`changePosition`。

希望能帮助到你。

# php - Symfony2 验证可选字段

> ID：13135686
> 
> 赞同：2
> 
> 时间：2012-10-30T09:05:24.710
> 
> 标签：php, forms, validation, symfony, symfony-2.0

在我的表单中，我有一个必填选项设置为 false 的字段，该字段是可选的。

但是，我希望在使用该字段时对该字段进行 notBlank 验证：

```
@Assert\NotBlank(
 *     message="The name field can't be blank",
 *     groups={"flow_poemDataCollector_step1"}
 * ) 
```

现在，我不能使用验证约束 NotBlank，因为当字段未使用时，它会导致我的表单验证失败。

我尝试在 onPostBindRequest 侦听器的字段中添加一个随机值，但它很复杂并且无法让它工作。我不确定这是否是正确的方法。

这是我尝试过的：（$form 是 Symfony\Component\Form\FormInterface 对象）

```
 $form = $event->getForm();
    $formData = $form->getData();
    $formData->setUserName("foo");
    $form = $form->setData($formData); 
```

但后来我收到一个错误，我无法在未绑定的表单上调用 isValid()。

我怎样才能实现我的目标？IE。仅在某些情况下验证字段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-08-28T10:00:48.933

这是一个老问题，但现在我们似乎可以这样做：

```
@Assert\Optional(
    @Assert\NotBlank(
        message="The name field can't be blank",
        groups={"flow_poemDataCollector_step1"}
    )
) 
```

参考：[http ://symfony.com/doc/2.7/reference/constraints/Collection.html](http://symfony.com/doc/2.7/reference/constraints/Collection.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T09:25:42.727

我能看到实现这一目标的最佳方法是在您的实体上使用[回调验证器。](http://symfony.com/doc/current/reference/constraints/Callback.html)由于此回调是在您的实体中定义的，因此它可以访问所有属性。通过 ExecutionContext，您可以根据需要设置违规。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:35:30.090

唔。我不得不多次重读您的问题，因为其中的某些内容在逻辑上无效。

如果您希望该字段不是必需的，那么使用`NotBlank`约束是没有意义的。一个字段怎么可能不是必填项和必填项？

如果你想要的是，如果在该字段中输入的内容不只包含空格，那么你根本不需要`NotBlank`约束，因为 Symfony 默认会修剪用户输入，所以它最终会好像什么都没有完全进入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-10T07:07:37.267

如果您希望该字段是可选的，您可以：

`new Assert\Length(array('min' => 0))`

因为从约束中省略字段将导致意外字段错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-19T15:23:19.183

最后在这里搜索如何使一个字段成为可选字段，如果输入，则验证，如可选电子邮件：

来自 symfony 文档：

> 与大多数其他约束一样，null 和空字符串被视为有效值。这是为了让它们成为可选值。如果该值是强制性的，一个常见的解决方案是将此约束与 NotBlank 结合起来。

[https://symfony.com/doc/current/reference/constraints/Email.html](https://symfony.com/doc/current/reference/constraints/Email.html)

所以解决方案只是验证 as`Email`并且该字段仍然是可选的。

# jquery - 带有 async=true 的 JQuery .ajax 总是返回错误

> ID：13135688
> 
> 赞同：2
> 
> 时间：2012-10-30T09:05:34.127
> 
> 标签：jquery, ajax, asynchronous

我尝试进行 jQuery.ajax 调用：

```
jQuery("#search_form").live("submit", function() {
    search_nr = jQuery("#search_input").val();
    jQuery.ajax({
        url: '/modules/mod_findarticle/process.php',
        data: "search_nr="+search_nr,
        async: true,
        'success':  function(data) {
                        alert(data);
                    },
        'error': function(jqXHR, textStatus, errorThrown) {
                  alert(jqXHR.status+",  " + jqXHR.statusText+",  "+textStatus+",  "+errorThrown);
        }
    });
}); 
```

作为回报，我总是收到带有**“0，错误，错误”**消息的警报。一切都很好**async=false**。我知道通过异步调用脚本在收到任何实际数据之前完成工作，但是可以做些什么来避免这种情况呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:26:30.740

由于用户***mccannf***解决了问题：数据通过触发表单上的“提交”事件提交了两次，因此脚本总是在第二次调用之前停止处理数据。替换`function()`为`.live(...)`禁用`function(e) {e.preventDefault; ... }`默认提交操作，因此可以解决问题！

# java - org.apache.log4j 无法识别我的 log4j.properties 文件

> ID：13135689
> 
> 赞同：0
> 
> 时间：2012-10-30T09:05:34.053
> 
> 标签：java, log4j

我第一次尝试使用 log4j（或就此而言，任何类型的日志库）。经过近 2 天的努力，我无法使其工作。

这是我正在使用的 log4j.properties 文件，但似乎记录器（从 junit 测试套件类中调用）根本不使用该文件。

```
private static final Logger logger = Logger.getLogger(myclass.class.getName());
...
logger.error("Message");
... 
```

它只是在控制台中输入消息（未创建文件），当我从 rootLogger 中删除附加程序 X 时，它仍然在控制台中吐出消息。

该文件保存在 Eclipse 项目目录下名为“resources”的包下。我还有其他三个源包，我想从中使用这个配置文件，这就是为什么我为这个文件制作了一个单独的包。

是文件创建权限问题，还是参数大小写错误（假设 java 是强类型），还是这个文件的位置？

任何帮助将不胜感激。

```
log4j.rootLogger=DEBUG, X, RUNLOG

log4j.appender.X=org.apache.log4j.ConsoleAppender
log4j.appender.X.layout=org.apache.log4j.PatternLayout
log4j.appender.X.layout.ConversionPattern=%m%n

log4j.appender.RUNLOG=org.apache.log4j.FileAppender
log4j.appender.RUNLOG.file=run.log
log4j.appender.RUNLOG.threshold=INFO
log4j.appender.RUNLOG.layout=org.apache.log4j.PatternLayout
log4j.appender.RUNLOG.layout.ConversionPattern=%m%n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:16:48.717

我认为您的`resources`文件夹不在您的类路径中。尝试使用将文件夹添加到您的类路径`Project->Properties->Java Build ->Libraries ->Add Class Folder`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:47:51.507

默认情况下，Log4J 期望在“默认包”中找到它的配置文件：它只是查找一个名为`log4j.properties`（以及后来`log4j.xml`，但这是另一回事）的资源，并期望在类路径中找到它。

您提到您的 Log4J 配置文件位于名为 的包`resources`中，这正是它找不到它的原因。

您有以下选择：

*   移动`log4j.properties`文件，使其位于默认包中。
*   在您的项目中创建一个文件夹（*不是*包），将您的`log4j.properties`文件放在那里并将该文件夹添加到您的运行时类路径中。
*   指定`log4j.configuration`系统属性，为其提供 Log4J 配置文件的路径。

# php - 在多次上传中收到致命错误

> ID：13135695
> 
> 赞同：-3
> 
> 时间：2012-10-30T09:05:51.620
> 
> 标签：php

这段代码实际上可以正常工作，我没有问题，但是当我的领导要求我进行多次上传时，问题开始了，我的领导希望有 2 个上传按钮，这样当用户单击提交时，2 个文件将保存在服务器文件夹中。

**索引aa.php**

```
<?php
$smp_id = (int) @$_GET['i'];
$i = $db->get_row("select * from sample where smp_id='$smp_id'");
?>

    <form name="form" enctype="multipart/form-data" method="post" action="upload.php">
    <input type="hidden" name="smp_id" value="<? echo $smp_id ?>"/>
        <table class='generic'>
            <tr><td>Proposal Attachment</td><td><input type='file' name='file' value=''></td></tr>
            <tr><td>Proposal Attachment</td><td><input type='file' name='file1' value=''></td></tr>     
            <tr><td colspan='2'>
            <input type="submit" value="Submit" class="JSPOPUP_close">
            <input type="button" value="Close" class="JSPOPUP_close">
            </td></tr>
        </table>

    </form> 
```

这行代码`<tr><td>Proposal Attachment</td><td><input type='file' name='file1' value=''></td></tr>`只需要添加它，这样我就有 2 个上传按钮。然后在upload.php中我添加了这一行`$file1 = fs_upload($_FILES['file1']);`来支持`file1`并且我添加了这个`$sm_sql['presentation'] = $file1;`以便`file1`名称将保存在我的示例表中，我忘记了什么吗？*注意：不是多次上传时有效（仅限1个文件上传）*

**上传.php**

```
<?
include("base_main.php");
$smp_id = (int) $_POST['smp_id'];

$file = fs_upload($_FILES['file']);
$file1 = fs_upload($_FILES['file1']);

$sm_sql['proposal'] = $file;
$sm_sql['presentation'] = $file1;

$insert = insertformat($sm_sql);
$query = $db->query("update sample set $insert where smp_id='$smp_id'");

if($query){
message_set("File uploaded: <a href='$fileserver_path/dex/$file'>$file</a>  <a href='$fileserver_path/dex/$file1'>$file1</a>");
goback();
}
?> 
```

这是

> 错误：致命错误：无法在第 363 行重新声明 C:................................\class.upload.php 中的类上传

[http://www.verot.net/download/class.upload.php/class.upload_0.25.txt](http://www.verot.net/download/class.upload.php/class.upload_0.25.txt)的链接`class.upload.php`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:12:57.513

您在某处包含包含`class upload`两次的文件：

```
include 'class.upload.php'; 
```

据说它在`fs_upload`函数中的某个地方。

使用或代替仅包含文件*一次*。`require_once``include_once``include`

# javascript - 自己的 RTE - 获取和设置选择样式

> ID：13135699
> 
> 赞同：2
> 
> 时间：2012-10-30T09:05:59.320
> 
> 标签：javascript, jquery, range, selection, rte

我必须使用 javascript 或 JQuery 构建自己的 RTE。但是我真的找不到一些好的、评论的、工作的例子或教程，只是一段代码。但我不想要一个解决方案，我想了解我在做什么！

我知道如何使选定的文本变为粗体（获取选择，创建一个范围，然后在它周围加上一个 b-tag 或 span-tag，包括 font-weight:bold。）

但是我怎么能得到任何选择的所有样式呢？

示例：text text text [//] text text text（[//]应该是图片） 现在用户选择了包含图片的文本，那么选中的html代码就像'text text text text text text'。现在我不能简单地用标签围绕选定的范围。

其他示例：aaa bbb **ccc** ddd 如果我选择“cc d”，我会得到这样的“cc”：**cc**但是当我选择“ccc”时，我只会得到“ccc”。但我必须知道选择的所有样式才能突出显示（例如粗体）按钮。

总而言之，我必须知道如何处理（获取）/设置选择的样式。

我希望能帮助我！最好的问候莱尼

* * *

这里有一些我实际拥有的代码（但这段代码并不能解决我的问题）

```
function getSelectedNodes_txt(){
var sel = window.getSelection();
try{var frag=sel.getRangeAt(0).cloneContents()}catch(e){return(false);}
var tempspan = document.createElement("span");
tempspan.appendChild(frag);
console.log(tempspan);
window.selnodes = tempspan.childNodes;
var output = ''
for(var i=0, u=selnodes.length;i<u;i++){
    if (typeof selnodes[i].tagName !== 'undefined'){
      output += "A "+selnodes[i].tagName+" was found";
      output += " - Containing: "+selnodes[i].textContent+"\n";
    }else{
        output += "Some text was found: '"+selnodes[i].textContent+"'";
        output += " - Parent: '"+selnodes[i].parentNode.tagName+"'\n";
     }
    //do something cool with each element here...
}
return(output) 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:48:36.420

这是一个指针：`execCommand`允许您查询插入符号位置文本的粗体或斜体。

# bash - 如何将进程的时间戳附加到 Unix 中的文件名

> ID：13135701
> 
> 赞同：0
> 
> 时间：2012-10-30T09:06:05.457
> 
> 标签：bash, unix, mv

我有一个目录`/home/user/ingest/`，里面有很多不同大小的文件。我需要将此文件夹中的每个文件移动到`/home/user/ingest/inbox`每两分钟一次。可能存在第一个文件可能需要 2 分钟以上才能移入`/home/user/ingest/inbox`. 在这种情况下，当它移动第二个文件时，它不应该也拿第一个文件。这就是为什么我想在移动时将时间戳附加到文件名的原因。无论如何在shell脚本中这样做？

而且我也知道使用 crontab 可能会帮助我安排每两分钟执行一次 shell 脚本。我对 cron 有一个基本的了解，但对于我的特殊要求，我如何检查文件是否每两分钟被爱一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:19:36.543

你可以用这个 bash 脚本来做到这一点：

```
#!/bin/bash

TIMESTAMP=$(date +%s)

for f in /home/user/ingest/*
do
   if [ -f "$f" ]; then
      name=$(basename "$f")
      mv $f /home/user/ingest/inbox/${name}_${TIMESTAMP}
   fi
done 
```

这`${TIMESTAMP}`是自纪元（1970 年 1 月）以来的秒数。for 循环遍历`/home/user/ingest/`目录中的所有内容，if 语句检查文件是否为*常规文件*（不是目录，不是符号链接），然后将文件移动到`/home/user/ingest/inbox/`末尾附加时间戳的位置。

# jquery - 在 webapi 中 ajax 调用数据为空之后？

> ID：13135704
> 
> 赞同：0
> 
> 时间：2012-10-30T09:06:10.270
> 
> 标签：jquery, asp.net-web-api

我正在处理 webapi 在这里我在 ajax 调用后得到空数据。我怎么能得到数据？

这是我的ajax调用：

```
<script type="text/javascript">
$(document).ready(function () {
var editor = CKEDITOR.editor.replace('editor1');
$('#btndiv').mouseleave(function (event) {
    $('#btndiv1').hide("slow");
        alert(1);
        var data1 = editor.getData();
        $('#btndiv').append(data1);
    // send your ajax request with value

        var dataToPost = JSON.stringify(data1);
        alert('hi');
        alert(data1 + "got data");
        $.ajax({
            type: "Post",
            url: "/api/UpdateCkeditor",
            contentType: "application/json; charset=utf-8",
            data: dataToPost,
            dataType: "json",
            statusCode: {
                200: function (data1) {
                    alert("Updated successfully");
                }
            }
            //success: function (value) {
            //    // do what you want on success.
            //    alert("Updated successfully");

            //}
        });
    });
});

</script> 
```

这里是我的控制器：

```
 public void create(ckeditormodels data1)
    {
        webapiEntities db = new webapiEntities();

        var empObj = db.ckeditorDatas.First(c => c.id == 1);
        empObj.value = data1.value;

        db.SaveChanges();

    } 
```

这是我的模型：

```
 public class ckeditormodels
{
    public int id { get; set; }
    public string value { get; set; }
    public string dataToPost { get; set; }
    public string data1 { get; set; }
} 
```

在这里，我的数据为空。如何从我的控制器中获取数据形式的 ajax 调用？任何帮助表示赞赏 - 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:45:30.497

CKEditor的`getData()`方法是从编辑器返回原始数据（与编辑器自己发布的相同）。您需要包装该字符串以更好地适应您的模型：

```
<script type="text/javascript">
    $(document).ready(function () {
    var editor = CKEDITOR.editor.replace('editor1');
    $('#btndiv').mouseleave(function (event) {
            ...
            var rawEditorValue = editor.getData();
            ...
            //If you want more properties here just extend this object
            var dataToPost = JSON.stringify({ value: rawEditorValue });
            ...
        });
    });
</script> 
```

结果，`rawEditorValue`来自编辑器的数据将绑定到`value`模型的属性。我在这里还假设请求正在执行您的操作（URL 和方法似乎不合适，但 yoru 说该操作已执行且只有数据为空，所以我相信您）。

# javascript - 加载大小的图像事件

> ID：13135705
> 
> 赞同：4
> 
> 时间：2012-10-30T09:06:12.093
> 
> 标签：javascript, metadata, dom-events, image-size

如您所见，当网页加载大图像时，浏览器可以在加载开始时知道图像大小（宽度和高度）。

我正在寻找一种在 Javascript 中添加已知大小时调用的事件的方法（而不是在加载完整图像时）；有点像`metadataloaded`视频。

代码示例：

```
var img = new Image();
img.src = 'images/picture.jpg';

console.log(img.width,img.height);  // 0, 0 (image size is not known yet)

img.addEventListener('imagesizeloaded', () => {
    console.log(img.width,img.height);  //expected: 1024, 768 (for example)
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:20:48.363

您可以在服务器上创建一个 AJAX 回调来获取元数据。更好的是，发送带有文件名的元数据。

使用 jQuery 的示例（客户端）：

```
var img = new Image();
img.src = "images/picture.jpg";

$.get("ajax.php", {action: "getImageSize", url: img.src})
 .success(function(r){
   console.log(r.width, r.height)
 }) 
```

服务器部分将取决于您使用的服务器端技术。它需要

```
open the image by its url
read the image metadata
send a JSON response 
```

* * *

在最坏的情况下，您可以轮询图像数据，直到它不为零。

```
var img = new Image();
img.src = "images/picture.jpg";

(function testImageSizeKnown(){
  if(img.height && img.width){
    console.log(img.height, imp.width)
  }else{
    setTimeout(testImageSizeKnown, 100) // check every 100 ms
  }
)() 
```

# postgis - 从栅格记录中提取所有像素值以放入另一个表中

> ID：13135709
> 
> 赞同：1
> 
> 时间：2012-10-30T09:06:33.217
> 
> 标签：postgis, raster

我有一个用 PostGIS Raster 构建的表，并且有一些栅格记录。我想提取所有像素和像素值并将其放在另一个表中。例如，如果一个栅格大小为 300*400，则结果表将有 120000 条记录，其中包含像素位置和像素值。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T18:14:30.763

我意识到已经有一段时间了，但如果有人遇到这个问题，你可能会做类似的事情：[Postgres/Postgis - Querying all values in clipped raster](https://stackoverflow.com/questions/19981411/postgres-postgis-querying-all-values-in-clipped-raster/20007789#20007789) without doing the clip。

# python - 类方法 __instancecheck__ 不起作用

> ID：13135712
> 
> 赞同：16
> 
> 时间：2012-10-30T09:06:45.707
> 
> 标签：python

我在 Windows 上使用 python 2.7.3。我试图将`__instancecheck__`魔术方法重写为类方法。但我不能让它工作。

```
class Enumeration(int):
    @classmethod
    def __instancecheck__(cls, inst):
        if type(inst) == cls:
            return True
        if isinstance(inst, int) and inst in range(0,10):
            return True
        return False

print isinstance(1, Enumeration)   # prints False
print isinstance(1, Enumeration()) # prints True 
```

我假设第一个打印语句会得到 True。但似乎`__instancecheck__`没有调用魔术方法。而且我不知道为什么第二个打印语句可以工作，因为它`isinstance`应该将类/类型作为第二个参数。

有谁知道问题是什么？谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-30T09:12:57.380

`instancecheck`必须在元类中定义：

```
class Enumeration(type):
    def __instancecheck__(self, other):
        print 'hi'
        return True

class EnumInt(int):
    __metaclass__ = Enumeration

print isinstance('foo', EnumInt) # prints True 
```

这是为什么？出于同样的原因，您的第二个示例有效。当 python 评估`isinstance(A, B)`它假定`B`为一个对象时，查找它的类并调用`__instancecheck__`该类：

```
isinstance(A, B):
    C = class-of(B)
    return C.__instancecheck__(A) 
```

但是当`B`是一个类本身时，那么它的类`C`应该是一个类中的一个类，或者说是一个元类！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T09:09:51.947

文档说：

> 请注意，这些方法是根据类的类型（元类）查找的。它们不能被定义为实际类中的类方法。这与查找在实例上调用的特殊方法是一致的，只是在这种情况下，实例本身就是一个类。

[http://docs.python.org/2/reference/datamodel.html#customizing-instance-and-subclass-checks](http://docs.python.org/2/reference/datamodel.html#customizing-instance-and-subclass-checks)

# windows-phone-7 - 我如何为 Windows Phone 7（如 iOS）提供用户测试版本？这里是否存在 UDID 或其他？

> ID：13135713
> 
> 赞同：0
> 
> 时间：2012-10-30T09:06:48.670
> 
> 标签：windows-phone-7, testing

我是 Windows Phone Dev 的新手。

我做了一些应用程序。我如何像在 Apple iOS Dev 上那样将其提供给另一个用户（测试人员）？

我的意思是 - 在 iOs 中，我从测试用户那里获得设备 UDID，并向他发送带有配置文件的 .ipa 文件。

对于Windows是否存在类似的程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:34:41.013

你有两个选择：

*   [**将测试仪的设备注册**](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769508%28v=vs.92%29.aspx)为开发人员设备。您最多可以注册**三部**手机进行开发。然后，您只需从 Visual Studio 部署 XAP。

*   提交您的应用程序以进行[**Beta 分发**](http://msdn.microsoft.com/en-us/library/hh334585%28v=vs.92%29.aspx)。在那里，您将被要求指定您的 Beta 用户的 Windows Live ID 电子邮件地址。他们将能够通过特定的 URL 下载该应用程序。

# wpf - 分离 Visual Studio WPF 设计器面板

> ID：13135715
> 
> 赞同：1
> 
> 时间：2012-10-30T09:06:52.023
> 
> 标签：wpf, visual-studio-2010

有什么方法可以完全分离（例如让它们在不同屏幕上的不同窗口上）Visual Studio 中 WPF 设计器的 XAML 和设计选项卡？我一直在找vt没有找到它。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:46:09.123

您可以打开两个 Visual Studio 实例并打开同一个文件，一个在 xaml 中，另一个在设计模式下。

# android - 将 Listview 移动到视图 android 的底部

> ID：13135720
> 
> 赞同：1
> 
> 时间：2012-10-30T09:07:28.847
> 
> 标签：android, android-layout, android-listview

对android很新，所以不要咬...

我正在做@thenewboston 的教程，但我正处于我自己做更多探索的阶段，而不是遵循教程。

我想知道（是否可能......）将列表视图向下移动视图/窗口/屏幕。目前，我的列表视图中有一个项目列表，从视图/窗口/屏幕的顶部向下填充。我想将我的列表视图限制在屏幕的下半部分说..？

我试过使用 android:gravity 但无济于事......

有人有什么想法吗？如果我没有意义，我可以张贴我想要实现的目标的图片......

**编辑：我已经对我正在寻找的内容进行了视觉描述[http://tinypic.com/view.php?pic=2hn2jaa&s=6](http://tinypic.com/view.php?pic=2hn2jaa&s=6)。如果第一个回复合适，那么该法案将受到好评！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:10:14.823

使用相对布局，在列表视图上添加：android:layout_alignParentBottom="true"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:35:34.993

您可以使用线性布局中的权重来执行此操作，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <View 
        android:id="@+id/empty_screen_space"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:background="#ff0000"
        android:layout_weight="0.4"/>
    <ListView 
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:background="#00FF00"
        android:layout_weight="0.6"/>

</LinearLayout> 
```

# javascript - Javascript 运行时错误：应用未定义

> ID：13135732
> 
> 赞同：0
> 
> 时间：2012-10-30T09:08:15.253
> 
> 标签：javascript, windows-8, windows-applications, createjs

我正在尝试使用 Canvas 和 Javascript 为我正在制作的 Windows 8 应用程序制作一个有点基本的应用程序。在为 Windows 8 应用程序编译 Visual Studio 2012 中的代码后，我收到以下消息

> 0x800a1391 - JavaScript 运行时错误：“应用程序”未定义

我做错了什么，我用什么代码来解决这个问题？

HTML

```
 <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Untitled</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <!-- references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>
    <!-- CreateJS -->
    <script src="js/createJS/easeljs-0.5.0.min.js" type="text/javascript"></script>
    <script src="js/createJS/preloadjs-0.2.0.min.js" type="text/javascript"></script>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
</body>
</html> 
```

JS

```
var canvas, content, stage;
var bgimage, b1Image, p2Image, ammoImage, p1Lives, p2Lives, title, endGameImage;
var bgbitmap, p1bitmap, p2bitmap, ammoBitmap;
var preload;

// Scale Factor
var SCALE_X = window.innerWidth / 800;
var SCALE_Y = window.innerHeight / 480;
var MARGIN = 25;
var GROUND_Y = 390 * SCALE_Y;

function initialize() {
    canvas = document.getElementById("gameCanvas");
    canvas.width = window.innWidth
    canvas.height = window.innerHeight;
    context = canvas.getContext("2d");

    function prepareGame() {
        bgimage = preload.getResult("screenImage").result;
        bgbitmap = new Bitmap(bgimage);
        bgbitmap.scaleX = SCALE_X
        bgbitmap.scaleY = SCALE_Y
        stage.addChild(bgBitmap);

        stage.update();
    }

    //PreloadJS
    preload = new PreloadJS();
    preload.onComplete = prepareGame;
    var manifest = [
    { id: "screenImage", src: "images/Backgrounds/gameplay_screen.png" },
    { id: "redImage", src: "images/Catapults/Red/redIdle/redIdle.png" },
{ id: "blueImage", src: "images/Catapluts/Blue/blueIdle/blueIdle.png" },
{ id: "ammoImage", src: "images/Ammo/rock_ammo.png" },
{ id: "winImage", src: "images/Backgrounds/victory.png" },
{ id: "loseImage", src: "images/Backgrounds/defeat.png"  },
{ id: "blueFire", src: "images/Catapults/Blue/blueFire/blueCatapult_fire.png" },
{ id: "redFire", src: "images/catapults/Red/redFire/redCatapult_fire.png" }
];
preload.loadManifest(manifest);

stage = new Stage(canvas);
}

function gameLoop() {
    update();
    draw();
}

function update() {

}

function draw() {

}

app.oncheckpoint = function  (args) { 
    document.addEventListener("DOMContentLoaded", initialize, false);
    app.start();
}; 
```

另外，如果这意味着什么，我正在使用 CreateJS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:20:29.873

`app`不是全局的，因此在您上面显示的上下文中确实是未定义的。它在一个模块（匿名函数）中定义`default.js`：

```
(function () {
    "use strict";

    WinJS.Binding.optimizeBindingReferences = true;

    var app = WinJS.Application; 
```

也就是说，你想在这段代码中做什么？ [oncheckpoint](http://msdn.microsoft.com/en-us/library/windows/apps/br229839.aspx)将包含在您的应用程序暂停时保持状态的代码；在这种情况下，添加事件侦听器和调用`start`并没有真正意义。

# javascript - 通过 url 打开 jQuery 手风琴选项卡

> ID：13135738
> 
> 赞同：0
> 
> 时间：2012-10-30T09:08:35.833
> 
> 标签：javascript, jquery, url, anchor, accordion

我正在使用简单的 jQuery 手风琴，当我单击带有指向选项卡 HMTL 元素 ID 的锚点的 URL 时，我想打开选项卡。

真实世界场景：我有一个 URL 为 www.domain.com/index.php&something#sometabid 的导航链接。如果我单击该链接，我将被重定向到具有该 URL 的页面，页面将滚动到具有 CSS id sometabid 的手风琴选项卡。在那一点上，我想打开这个手风琴选项卡，默认状态是关闭的。

代码：

```
<!DOCTYPE html>
<html>
<head>
<style>
    body {
        padding: 20px
    }    
        h4.open-close {
        background: #f5f5f5;
        border: 1px solid #DDD;
        border-radius: 5px;
        box-shadow: 0 1px 0 white inset;
        margin-bottom: 10px;
        padding: 7px;
    }
    .desc {
        overflow: hidden;
        padding-bottom: 10px;
        padding-top: 0;
    }
</style>

<script type="text/javascript">
    $('.desc').hide();
        $('h4.open-close').click(function (evt) {
            evt.preventDefault();
            if ($(this).is('.current')) {
                $(this).removeClass('current');
                $(this).next('.desc').slideUp(400);
            } else {
                $('.desc').slideUp(400);
                $('h4.open-close').removeClass('current');
                $(this).addClass('current');
                $(this).next('.desc').slideDown(400);
            }
        });​
</script>
</head>
<body>
    <h4 id="sometabid1" class="open-close">
        <a href="#">Urniki</a>
    </h4>
    <div class="desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas a luctus mi. Sed non libero turpis. Donec mauris lorem, sollicitudin non facilisis in, fermentum vel tortor.</div>

    <h4 id="sometabid2" class="open-close">
        <a href="#">Dejavnosti</a>
    </h4>
    <div class="desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas a luctus mi. Sed non libero turpis. Donec mauris lorem, sollicitudin non facilisis in, fermentum vel tortor.</div>
</body>
</html> 
```

[jsfiddle链接](http://jsfiddle.net/esedic/uF3jB)

如果您使用 jQuery UI 手风琴，我知道有一个解决方案，但我不想使用 jQuery UI，因为我更喜欢轻量级解决方案，而且这个附加功能一开始就没有计划。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:13:22.250

首先获取哈希链接：

```
function getAnchor(url)
{
    var index = url.lastIndexOf('#');
    if (index != -1)
        return url.substring(index);
} 
```

并使用它来处理您的文档。

```
currentAnchor = getAnchor(location.href);
$("#" + currentAnchor).show(); 
```

或类似的东西。

### 解释：

假设您在 URL 中：

```
http://example.com/index.html#slide2 
```

现在，当您使用该功能时：

```
currentAnchor = getAnchor(location.href); 
```

`currentAnchor`遗嘱具有价值`slide2`。假设你有这样的手风琴：

```
<ul>
    <li class="slide" id="slide1">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>
    <li class="slide" id="slide2">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>
    <li class="slide" id="slide3">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>
    <li class="slide" id="slide4">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>
    <li class="slide" id="slide5">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</li>
</ul> 
```

现在你可以通过这种方式找到正确的手风琴：

```
$(currentAnchor).show(); 
```

在您的情况下，它将是：

```
 $('.desc').slideUp(400);
    $('h4.open-close').removeClass('current');
    $(currentAnchor).addClass('current');
    $(currentAnchor).next('.desc').slideDown(400); 
```

# android - 关机会删除 Android 4 上的帐户

> ID：13135740
> 
> 赞同：1
> 
> 时间：2012-10-30T09:08:38.797
> 
> 标签：android, shutdown, accountmanager

安装我的应用程序并登录后，该应用程序会存储一个我需要的帐户以供将来操作。问题是，在我重新启动平板电脑后，该帐户不存在。从我读到的问题是，Android 4 清除了安装在 sd 卡中的应用程序的所有帐户，所以我在清单中添加了 installLocation="internalOnly" 以强制安装在内部存储器上。该应用程序现在安装在内部存储器中，但问题仍在验证中。

建议？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-30T10:13:28.243

使用 SharedPrefrences，例如：

```
 SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE); 
```

存储数据：

```
 SharedPreferences.Editor editor = settings.edit();
    editor.putBoolean(BOOLEAN_VAR, false);others data types
    editor.apply(); 
```

读取数据：

```
 boolean mydata = settings.getBoolean(BOOLEAN_VAR, true); 
```

有很多 getXXX() 和 setXXX() 用于不同的数据类型。

# jquery-ui - 如何将选择应用于 jQuery UI 日期选择器选择框？

> ID：13135743
> 
> 赞同：1
> 
> 时间：2012-10-30T09:09:09.577
> 
> 标签：jquery-ui, jquery-chosen

有谁知道日期选择器日历顶部的样式选择框是如何出现 [的](http://jqueryui.com/datepicker/)：

```
$('.input-field').datepicker(); 
```

与[选择](http://harvesthq.github.com/chosen/)

我尝试将它应用到**ui-datepicker-div**内部，但没有运气。

**[这是要玩的代码](http://jsbin.com/udelok/2)**

有谁知道如何做对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T00:03:30.893

这解决了它。:)

使用我之前回复中提供的概念扩展 datepicker 的 _updateDatepicker 函数。

```
var updateDatepickerOriginal = $.datepicker._updateDatepicker;
$.datepicker._updateDatepicker = function(){
  var response = updateDatepickerOriginal.apply(this,arguments);
  this.dpDiv.find('select').chosen();
  return response;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T08:11:32.047

**几乎**可以工作：单击输入字段后，将 .chosen() 应用于每个选择。:)

```
$("#the_date_input_field").click(function(event){

    $("#ui-datepicker-div select").each(function() {
        $(this).chosen();
    });

}); 
```

[**查看演示！**](http://jsbin.com/udelok/8/edit)

选择一个月似乎会重置整个日历。因此，确实需要一种方法来扩展初始化，以便固有地应用所选择的。

# c++ - 如何在 C++ win32 API 中使用 pwdlastset 值和 maxpwdage 值获取 pwdexpirydate？

> ID：13135747
> 
> 赞同：0
> 
> 时间：2012-10-30T09:09:22.090
> 
> 标签：c++, windows, winapi, active-directory, adsi

我使用 ADSI 获得 maxpwdage 值和 pwdlastset 值。

现在我想检查密码到期日期...

`hr = pDomain->get_MaxPasswordAge(&ret);`

maxpwdage 给出 432000 ...

`hr = pUser->get_PasswordLastChanged(&expirationDate);`

pwdlastset 给出 41176.470196759263 ......

如何使用此值实现密码到期日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:41:42.057

**最大密码年龄**

*   指示用户必须更改密码的最大时间间隔（以秒为单位）。

**密码上次更改**

*   上次更改密码的时间。

您需要将 MaxPasswordAge 添加到 PasswordLastChanged。

**变体日期**

类型：日期

*   日期和时间值。日期表示为双精度数字，其中 1900 年 1 月 1 日午夜是 2.0，1900 年 1 月 2 日是 3.0，依此类推。

*   可以使用 VariantTimeToDosDateTime 将日期转换为 MS-DOS 表示或从 MS-DOS 表示转换。

所以这意味着 1.0 代表一天。

**来自 WTypes.h ：**

```
typedef double DATE; 
```

所以：

```
DATE expirationDate;
VARIANT vtExpDate;

expirationDate += (double)(ret / 86400);

vtExpDate.vt = VT_DATE ;
vtExpDate.date = date ; 
```

86400 = 24 * 60 * 60 = 秒/天

然后使用[VariantTimeToDosDateTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221199%28v=vs.85%29.aspx)获取人类可读的日期。

# sql-server - 检查事务复制是否成功的策略

> ID：13135748
> 
> 赞同：0
> 
> 时间：2012-10-30T09:09:24.240
> 
> 标签：sql-server, transactional-replication

我们想使用事务复制将数据从一个源数据库复制到接收数据库。如果复制成功，则有必要通知工作流中的其他一些系统。是否有任何方法可以根据某些属性检查复制是否成功？您会选择什么策略来通知（例如缓存）某些数据可用？

**更新：** 我想我不够清楚。我们想知道的是，如果实体已经是所有订阅者。例如：我将一辆新 *汽车*和一些*汽车*详细信息插入到主数据库的两个表中。我想知道是否将一辆*新车*及其详细信息复制给所有订阅者，以便能够说：*“汽车在线”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:31:38.090

尝试查看[这篇 MSDN 文章](http://technet.microsoft.com/en-us/library/ms152758.aspx)，其中详细介绍了验证复制是否发生的策略。

基本上它提供了两种策略：

1）检查行数。

2）检查行数并运行`CHECKSUM`操作以增加稳健性。

# c# - 正则表达式查找字符串 C#

> ID：13135753
> 
> 赞同：0
> 
> 时间：2012-10-30T09:09:49.247
> 
> 标签：c#, regex, asp.net-4.0

我想从我的字符串中匹配像`<word>~`, `<word>~0.1`,这样`<word>~0.9`的字符串。

`"<word>~0.5"`但如果它在双引号内，如or ，则不应匹配`"<word>"~0.5`。

几个例子：

```
"World Terror"~10 AND music~0.5                --> should match music~0.5
"test~ my string"                              --> should not match
music~ AND "song remix" AND "world terror~0.5" --> should match music~ 
```

我现在已经应用了下面的正则表达式`\w+~`，但如果匹配包含在引号内，它也匹配。

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:35:58.500

这适用于不包含转义引号的字符串（因为这些字符串会使偶数引号的计数失去平衡）：

```
Regex regexObj = new Regex(
    @"\w+~[\d.]*  # Match an alnum word, tilde, optional digits/dots
    (?=           # only if there follows...
     [^""]*       # any number of non-quotes
     (?:          # followed by...
      ""[^""]*    # one quote, and any number of non-quotes
      ""[^""]*    # another quote, and any number of non-quotes
     )*           # any number of times, ensuring an even number of quotes
     [^""]*       # Then any number of non-quotes
     $            # until the end of the string.
    )             # End of lookahead assertion", 
    RegexOptions.IgnorePatternWhitespace); 
```

如果需要解决转义的引号，它会变得有点复杂：

```
Regex regexObj = new Regex(
    @"\w+~[\d.]*         # Match an alnum word, tilde, optional digits/dots
    (?=                  # only if there follows...
     (?:\\.|[^\\""])*    # any number of non-quotes (or escaped quotes)
     (?:                 # followed by...
      ""(?:\\.|[^\\""])* # one quote, and any number of non-quotes
      ""(?:\\.|[^\\""])* # another quote, and any number of non-quotes
     )*                  # any number of times, ensuring an even number of quotes
     (?:\\.|[^\\""])*    # Then any number of non-quotes
     $                   # until the end of the string.
    )                    # End of lookahead assertion", 
    RegexOptions.IgnorePatternWhitespace); 
```

# iphone - XIB 的 ViewController 类在 Sample.framework 中不起作用

> ID：13135755
> 
> 赞同：1
> 
> 时间：2012-10-30T09:09:51.623
> 
> 标签：iphone, frameworks

我用 NSObject 类创建了 sample.framework 项目。所以它在每个项目中都可以正常工作，但是当我要在 sample.framework 中添加带有 .XIB 的 ViewController 类并尝试在任何项目中使用相同的框架时，它会说

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“SampleViewController”

请让我们知道我可以在 sample.framework 中使用带有 XIB 的 ViewController 类吗？？？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:52:35.473

静态库不提供资源包，仅提供代码。您需要手动将共享 xib 添加到应用程序目标`Copy Bundle Resources`阶段，或者您可以将单个共享 .bundle 与所有资源一起使用；如果是后者，您必须先获取捆绑包，然后从那里读取笔尖：

```
NSString * path = [[NSBundle mainBundle] pathForResource:@"mybundle" ofType:@"bundle"];
NSBundle * bndl = [NSBundle bundleWithPath:path];
NSArray *nibs = [bndl loadNibNamed:@"mynib.xib" owner:self options:nil]; 
```

或者

```
[[Myviewcontroller alloc] initWithNibName:@"mynib.xib" bundle:bndl]; 
```

`Copy Bundle Resources`如果您决定使用捆绑包，请不要忘记将 .bundle 文件添加到应用程序的目标阶段。

# xslt - 如何在 xslt 中使用通配符比较字符串？

> ID：13135757
> 
> 赞同：0
> 
> 时间：2012-10-30T09:10:00.230
> 
> 标签：xslt

我在 xslt 工作，我必须用另一个字符串测试一个字符串，如下所示：

```
<xsl:if test="$mesg = 'this is message of method add*'">
    ....
    ....
    .....
</xsl:if> 
```

我必须使用我在上面的代码中添加的文本以及字符串后面的任何内容来测试“mesg”变量内容，目前我尝试使用“*”通配符。但它不起作用。

谢谢和问候， BSalunke

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:23:13.077

XSLT 1.0 没有任何“通配符支持”，但是 XSLT 2.0 引入了正则表达式支持。正如已经指出的那样，对于您使用 XSLT 1.0 进行的简单检查，它应该足以测试

```
<xsl:if test="starts-with($mesg, 'this is a message of method add')"> 
```

如果您切换到 XSLT 2.0（通过使用像 Saxon 9 或 AltovaXML 这样的 XSLT 2.0 处理器），您可以使用[函数`matches`和](http://www.w3.org/TR/xquery-operators/#func-matches)正则表达式，例如

```
<xsl:if test="matches($mesg, '^this is a message of method add.*')"> 
```

# c# - 循环中方法调用的开销是多少？

> ID：13135759
> 
> 赞同：6
> 
> 时间：2012-10-30T09:10:12.137
> 
> 标签：c#, performance, compiler-construction

我一直在研究 C# 迷宫生成器，它可以生成 128000x128000 像素的迷宫。所有内存使用都已经优化，所以我目前正在考虑加快生成速度。

我发现的一个问题（远远超出兴趣点）如下（只是一些示例代码来说明问题）：

当 pixelChanged 为空时，此代码在我的机器上运行大约 1.4 秒：

```
public void Go()
{
    for (int i = 0; i < bitjes.Length; i++)
    {
        BitArray curArray = bitjes[i];
        for (int y = 0; y < curArray.Length; y++)
        {
            curArray[y] = !curArray[y];
            GoDrawPixel(i, y, false);
        }
    }
}

public void GoDrawPixel(int i, int y, Boolean enabled)
{
    if (pixelChanged != null)
    {
        pixelChanged.Invoke(new PixelChangedEventArgs(i, y, enabled));
    }
} 
```

以下代码的运行速度实际上快了 0.4 秒

```
public void Go()
{
    for (int i = 0; i < bitjes.Length; i++)
    {
        BitArray curArray = bitjes[i];
        for (int y = 0; y < curArray.Length; y++)
        {
            curArray[y] = !curArray[y];
            if (pixelChanged != null)
            {
                pixelChanged.Invoke(new PixelChangedEventArgs(i, y, false));
            }
        }
    }
} 
```

似乎只调用一个“空”方法会占用该算法使用的大约 20% 的 cpu。这不是很奇怪吗？我尝试在调试和发布模式下编译解决方案，但没有发现任何明显的差异。

这意味着我在这个循环中的每个方法调用都会使我的代码减慢大约 0.4 秒。由于迷宫生成器代码目前由许多执行不同操作的单独方法调用组成，这开始获得大量。

我还检查了 Google 和 Stack Overflow 上的其他帖子，但还没有真正找到解决方案。

是否可以像这样自动优化代码？（也许像 Roslyn 项目这样的东西？？？）或者我应该把所有东西放在一个大方法中？

编辑：我也可能对这两种情况下的 JIT/CLR 代码差异进行一些分析。（所以这个问题实际上来自哪里）

Edit2： **所有代码都是在发布模式下编译的**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T09:17:18.047

这是一个问题，JIT 对方法进行了内联优化（其中整个方法代码实际上被注入到调用父代码中），但这仅发生在编译为 32 字节或更少字节的方法上。我不知道为什么存在 32 字节限制，并且还希望在 C# 中看到一个“内联”关键字，就像在 C/C++ 中一样，正是针对这些问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T09:18:18.020

我会尝试的第一件事是将其设为静态而不是实例：

```
public static void GoDrawPixel(PixelChangedEventHandler pixelChanged,
    int x, int y, bool enabled)
{
    if (pixelChanged != null)
    {
        pixelChanged.Invoke(new PixelChangedEventArgs(x, y, enabled));
    }
} 
```

这改变了一些事情：

*   堆栈语义保持可比性（它加载一个引用，2个整数和一个布尔值）
*   `callvirt`变成- 这避免了`call`一些小开销
*   `ldarg0`/对`ldfld`( `this.pixelChanged`) 变成一个单一的`ldarg0`

接下来我要看的是`PixelChangedEventArgs`；如果避免大量分配，则将其作为结构传递*可能会更便宜；*或者也许只是：

```
pixelChanged(x, y, enabled); 
```

（原始参数而不是包装对象 - 需要更改签名）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T09:15:59.203

这是在调试模式还是发布模式？方法调用相当昂贵，但是当您在发布模式下构建/运行它时，它们可能会被内联。它不会在调试模式下从编译器获得任何优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T10:06:31.810

正如 Marc 所说，主要开销是进行虚拟调用并传递参数。PixelChanged 的​​值可以在方法执行过程中改变吗？如果不是这可能有效（我不完全确定 JIT 将空操作委托优化为 nop，您必须自己测试它（如果不是，我将忽略这里的良好实践，只做调用，一个调用 pixelChanged.Invoke，一个不调用（内联），并且只调用最适合的调用...毕竟有时您必须使代码不那么优雅以使其更快）。

```
public void Go()
{
  if (pixelChanged != null)  
     GoPixelGo((x,y,z) => { });  
  else
     GoPixelGo((i, y, enabled) => pixelChanged.Invoke(i, y, enabled));
}

public void GoPixelGo(Action<int, int, bool> action)
{
  for (int i = 0; i < bitjes.Length; i++)
  {
      BitArray curArray = bitjes[i];
      for (int y = 0; y < curArray.Length; y++)
      {
         curArray[y] = !curArray[y];
         action(i,y, false);
      }
  }
} 
```

# swing - swing gui返回用户输入

> ID：13135764
> 
> 赞同：1
> 
> 时间：2012-10-30T09:10:31.230
> 
> 标签：swing

我编写了一个小摇摆程序来获取用户输入（一系列 0/1 字符，后跟“完成”）将字符串返回给主类 - 代码附在下面。问题是它在正常模式下运行时挂起，但在“return new String(str)”行（在函数 getData() 中）放置断点时工作正常，之后单步运行。我认为这是一个时间问题，并在 while 循环之前放入了一个“Thread.sleep(400)”（参见注释行） - 现在它工作正常。

但是这段代码看起来很愚蠢。有没有更好的方法来编写这段代码——接受用户输入并将用户给定的字符串返回给调用类？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class DataEntryPanel extends JPanel implements ActionListener {
    private JButton Button0, Button1, ButtonDone;
    private JLabel DataEntered;
    public char[] str = "________".toCharArray();
    int posn = 0;
    public boolean dataDone = false;
    public DataEntryPanel() {
        this.setLayout(new FlowLayout(FlowLayout.CENTER));
        Button0 = new JButton("0"); Button0.addActionListener(this); this.add(Button0);
        Button1 = new JButton("1"); Button1.addActionListener(this); this.add(Button1);
        ButtonDone = new JButton("Done"); ButtonDone.addActionListener(this); this.add(ButtonDone);
        DataEntered = new JLabel("xxxxxxxx"); this.add(DataEntered);
    }
    public void actionPerformed(ActionEvent e) {
        Object source  = e.getSource();
        if(source==Button0) DataEntered.setText(setData('0'));
        else if(source==Button1) DataEntered.setText(setData('1'));
        else if(source==ButtonDone) dataDone=true;
    }
    public String setData(char c) {
        if(posn<8) str[posn++] = c;
        return new String(str);
    }
}
class DataEntryFrame extends JFrame {
    public JPanel panel;
    private void centerWindow (Window w) {
        Toolkit tk = Toolkit.getDefaultToolkit();
        Dimension d = tk.getScreenSize();
        setLocation((d.width-w.getWidth())/2, (d.height-w.getHeight())/2);
    }
    public DataEntryFrame() {
        setTitle("Data Entry");
        setSize(267, 200);
        centerWindow(this);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        panel = new DataEntryPanel();
        this.add(panel);
    }
    public String getData() {
        DataEntryPanel p = (DataEntryPanel) panel;
        System.out.printf("waiting for data......\n");
        // try {
           while(!p.dataDone) 
                // Thread.sleep(400)
                ; // looping on data completion
        // } catch (InterruptedException e) { e.printStackTrace(); }
        return new String(p.str);
    }
}

public class FRead {
    public FRead() {
        JFrame frame  = new DataEntryFrame();
        frame.setVisible(true);
        DataEntryFrame f = (DataEntryFrame) frame;
        String s = f.getData();
        System.out.printf("string obtained=%s\n", s);
        System.exit(0);
    }

    public static void main(String[] args) throws Exception {
        new FRead();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:28:54.560

您可能遇到了 EDT 问题，并且您的 while 循环会占用您的 CPU。

1.  与 UI 相关的一切都应在 EDT（事件调度线程）上执行
2.  要使框架居中，请设置其大小（使用`pack()`or `setSize()`），然后只需调用`setLocationRelativeTo(null);`
3.  永远不要`while(!true) ;`循环，这会占用你的 CPU 并阻塞当前线程。
4.  `dataDone`应该声明您的变量，`volatile`因为您正在“主”线程中读取它，但它已被 EDT 修改。

考虑阅读有关[Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

这是您的代码稍作修改的版本，似乎效果更好：

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class GUI {

    class DataEntryPanel extends JPanel implements ActionListener {
        private JButton button0, button1, buttonDone;
        private JLabel dataEntered;
        public char[] str = "________".toCharArray();
        int posn = 0;
        public volatile boolean dataDone = false;
        private String data;

        public DataEntryPanel() {
            this.setLayout(new FlowLayout(FlowLayout.CENTER));
            button0 = new JButton("0");
            button0.addActionListener(this);
            this.add(button0);
            button1 = new JButton("1");
            button1.addActionListener(this);
            this.add(button1);
            buttonDone = new JButton("Done");
            buttonDone.addActionListener(this);
            this.add(buttonDone);
            dataEntered = new JLabel("xxxxxxxx");
            this.add(dataEntered);
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            Object source = e.getSource();
            if (source == button0) {
                dataEntered.setText(setData('0'));
            } else if (source == button1) {
                dataEntered.setText(setData('1'));
            } else if (source == buttonDone) {
                JOptionPane.showMessageDialog(this, "Data entered is " + String.format("string obtained=%s\n", getData()));
                System.exit(0);
            }
        }

        public String getData() {
            return data;
        }

        public String setData(char c) {
            if (posn < 8) {
                str[posn++] = c;
            }
            return data = new String(str);
        }

    }

    protected void initUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Data Entry");
        frame.setSize(267, 200);
        frame.setLocationRelativeTo(null);
        DataEntryPanel panel = new DataEntryPanel();
        frame.add(panel);
        frame.setVisible(true);
    }

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new GUI().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:14:21.593

一种选择是您使用模式对话框。一旦你打开模态对话框，之后的代码只有在你关闭它之后才会执行。关闭后，您可以从外部调用对话框类的 getter 方法，以获取输入的值。

# templates - 定义实时环绕模板的快捷方式

> ID：13135766
> 
> 赞同：1
> 
> 时间：2012-10-30T09:10:43.997
> 
> 标签：templates, phpstorm

周边直播模板的缩写怎么用？（例如`t`，...）在非包围模板中键入缩写并按 Tab 将插入模板，但在包围模板时我们首先选择一部分代码并且我们不键入缩写。

如何为特定的周围模板定义快捷方式，例如如何定义模板，以便当我选择一部分代码**然后按`g`key**时，所选代码被`<?=_('`and包围`')?>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T10:21:41.107

> 周围实时模板的缩写如何有用？

每个人都自己决定这件事或另一件事如何有用，因此即使它对我有用，也不一定意味着它对你有用。

但一般来说——通过加快我的工作速度对我来说**非常有用——而不是输入一些文本（这需要大量的光标移动或输入不同的字符），我只需按几下键就可以输入它。**

> 如何定义模板

1\. [http://www.jetbrains.com/phpstorm/webhelp/creating-and-editing-live-templates.html](http://www.jetbrains.com/phpstorm/webhelp/creating-and-editing-live-templates.html)

2.**设置 | 实时模板**

3\. 创建新条目：

*   缩写：随便你觉得好
*   简介：随心所欲
*   模板文本：`<?=_('$SELECTION$')?>`
*   上下文：我猜是 HTML（如有必要，请选择其他适用的上下文）。

现在，当它被保存时——转到要使用它的文件，选择文本，然后调用**Code | 用实时模板环绕...**并从下拉列表中选择所需的模板

* * *

要回答修改后的问题（您至少可以费心发表评论）：

**缩写对于 SURROUND 模板几乎没有任何意义**，因为它们的调用方式与普通的实时模板完全不同。如果您希望通过一`g`键完成此操作——尝试录制宏——可能有效，也可能无效（我只是看不到太多意义——它只会节省 1 个组合键）。

# python - 从已安装的包创建 pip 存储库 - 找不到错误 setup.py

> ID：13135767
> 
> 赞同：2
> 
> 时间：2012-10-30T09:10:46.173
> 
> 标签：python, django, pip

我在我的 /usr/local/lib/python2.7/dist-packages/package-name 中安装了一个包，它是我们的私人仓库很久以前就安装在那个地方而且那个 pip 仓库现在不可用，所以我可以使用那个特定的/usr/local/lib/python2.7/dist-packages/package-name 目录安装在其他任何地方？这就是我所做的：

压缩目录 /usr/local/lib/python2.7/dist-packages/package-name
上传到我的服务器
然后尝试像这样使用 pip 安装： pip install myserverpackageurl

然后我收到错误消息说“setup.py”不可用（IOError）。

我还尝试从我的目录中创建一个包，如下所示：

```
 cd /usr/local/lib/python2.7/dist-packages/package-name
  pip bundle package-name package-name 
```

然后我又得到了错误：

```
 ("Directory %r is not installable. File 'setup.py' not found.", 'mm/')
 Storing complete log in /home/bhaskar/.pip/pip.log 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:21:14.037

您不能只压缩已安装的软件包；它不包括安装 python 包等`setup.py`工具所需的文件，`pip`并确保安装正确和完整。

Pip 仅适用于源代码分发；`sdist`您通常通过在现有`setup.py`文件上运行命令来创建这样的分发：

```
python setup.py sdist 
```

最新的 pip 版本也支持 python 鸡蛋，但您仍然需要该`setup.py`文件来创建它们。

# facebook - 关于迁移到 OAuth2 的 Facebook API 错误

> ID：13135776
> 
> 赞同：0
> 
> 时间：2012-10-30T09:11:49.777
> 
> 标签：facebook

我收到此 Facebook API 错误：

> API 错误代码：100
> API 错误描述：无效参数
> 错误消息：请迁移到 OAuth2 并使用新的 /dialog/oauth 端点。return_session 不再可用。

但是，我为 Facebook API 密钥和 API 机密设置了变量。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:00:36.507

您使用的是最新的 PHP SDK 吗？

[https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

我的猜测是您使用的是旧版本（2.x），因此您应该升级。如果这没有帮助，请查看登录文档：

[https://developers.facebook.com/docs/reference/plugins/login/](https://developers.facebook.com/docs/reference/plugins/login/)

[https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

[https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)

# c# - 如何按wpf中的后续数字对数组列表进行排序？

> ID：13135777
> 
> 赞同：1
> 
> 时间：2012-10-30T09:11:55.223
> 
> 标签：c#, wpf, arraylist

```
ArrayList SortItems = new ArrayList();
        SortItems.Add("Item1");
        SortItems.Add("Item2");
        SortItems.Add("Item3");
        SortItems.Add("Item4");
        SortItems.Add("Item5");
        SortItems.Add("Item6");
        SortItems.Add("Item7");
        SortItems.Add("Item8");
        SortItems.Add("Item9");
        SortItems.Add("Item10");
        SortItems.Add("Item11");

        SortItems.Sort(); 
```

如果我运行这个程序，我会得到以下结果

![在此处输入图像描述](../Images/7fcbcc20a64b85cd03d3881e4565f6cd.png)

但我想对列表进行排序，如**Item1,Item2,Item3,Item4,Item5,Item6,Item7,Item8,Item9,Item10,Item11**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:17:49.120

Build custom comparer:

```
public class CusComparer: IComparer
{
    public int Compare(object x, object y)
    {
        return int.Parse((x as string).Substring(4)) - int.Parse((y as string).Substring(4));
    }
} 
```

So you can use:

```
ArrayList SortItems = new ArrayList();
SortItems.Add("Item1");
SortItems.Add("Item2");
SortItems.Add("Item3");
SortItems.Add("Item4");
SortItems.Add("Item5");
SortItems.Add("Item6");
SortItems.Add("Item7");
SortItems.Add("Item8");
SortItems.Add("Item9");
SortItems.Add("Item10");
SortItems.Add("Item11");

SortItems.Sort(new CusComparer()); 
```

But instead of using `ArrayList`, you should consider using `List<T>` with stronger type

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:20:19.847

结果以这种方式排序，因为它对字符串使用字典顺序。比较算法从左到右比较两个字符串，因为`"1"`小于`"9"`，所以`"10"`也会小于`"9"`。

您可以用零填充字符串的数字部分，例如，`"Item05"`而不是`"Item5"`.

更通用和灵活的方法是使用`ArrayList.Sort(IComparer)`，并实现一个`IComparer`理解您的字符串格式并可以正确排序字符串的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:16:33.730

Your question does not show what kind of result it is giving.

Use SortedList. As and when you add new item, it would be sorted. [http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx) Downside would be, you cannot have a repetition in the inputs.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T09:17:38.463

If it's always prepended with `"Item"`, you can split both and order by the numic part.

Note that i'll use a strongly typed `List<String>` instead:

```
List<String> SortItems = list.Select(s => new
                              {
                                  Item = s, 
                                  Number = int.Parse(s.Substring("Item".Length))
                              }).OrderBy(x => x.Number)
                              .Select(x => x.Item).ToList(); 
```

or you can use [this `Sort` method](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx) overload to sort the original list directly:

```
list.Sort((a, b) =>  
    int.Parse(a.Substring("Item".Length)).CompareTo(int.Parse(b.Substring("Item".Length)))
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T09:19:19.080

您可以实现 a`IComparer`并将其传递给`Sort`方法。

[http://msdn.microsoft.com/en-us/library/0e743hdt.aspx](http://msdn.microsoft.com/en-us/library/0e743hdt.aspx)

# android - 保存选定的新闻文章以供离线使用

> ID：13135781
> 
> 赞同：0
> 
> 时间：2012-10-30T09:12:11.157
> 
> 标签：android, xml

我有一个从在线 XML 文件解析 XML 并将其显示在列表视图中的应用程序。然后，用户可以单击一个项目并查看完整的故事。这一切都很好，但我希望用户能够保存某些文章，以便他们可以在以后或离线阅读它们。我认为这相当简单，但很难找到任何东西来引导我朝着正确的方向前进。下面是显示单个新闻文章的活动。

```
public class SingleActivity  extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);

        // getting intent data
        Intent in = getIntent();

        // Get XML values from previous intent
        String title = in.getStringExtra("name");
        String date = in.getStringExtra("date");
        String content = in.getStringExtra("content");

        // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.name_label);
        TextView lblDate = (TextView) findViewById(R.id.date_label);
        TextView lblCont = (TextView) findViewById(R.id.content_label);

        lblName.setText(title);
        lblDate.setText(date);
        lblCont.setText(Html.fromHtml(content));
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:23:14.027

您可以使用 SQLite 数据库。为用户提供保存选项。您可以使用按钮或图像按钮或任何可以引发事件的东西。当它引发事件时，只需将它们保存到数据库中。[如果您对 DB 不满意，请在此处](https://stackoverflow.com/questions/12015731/android-sqlite-example/12015869#12015869)获取示例。您修改后的代码将如下所示。

```
 public class SingleActivity  extends Activity {

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.single_list_item);

        // getting intent data
        Intent in = getIntent();

        // Get XML values from previous intent
        String title = in.getStringExtra("name");
        String date = in.getStringExtra("date");
        String content = in.getStringExtra("content");

        // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.name_label);
        TextView lblDate = (TextView) findViewById(R.id.date_label);
        TextView lblCont = (TextView) findViewById(R.id.content_label);

        lblName.setText(title);
        lblDate.setText(date);
        lblCont.setText(Html.fromHtml(content));

        Button b = (Button)  findViewById(R.id.savebutton);
        b.setonclicklistsener() {
             saveToDB(lblName's text, lblDate's text, lblCont's text);
        }

    }

     public void saveToDB(lblName's text, lblDate's text, lblCont's text){

           // do database stuff here    

     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:19:42.413

对于这种特殊情况，您可以使用 sqlite [http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

# ios - 如何使用混合模式将 CALayer 添加到您的视图中？

> ID：13135783
> 
> 赞同：1
> 
> 时间：2012-10-30T09:12:24.213
> 
> 标签：ios, cocoa-touch

我有一个纹理，我为我的视图控制器视图添加了一个单独的图层，如下所示。该层不是不透明的。我想将混合模式设置为`textureLayer`kCGBlendModeMultiply 之类的东西。我该怎么做？

```
UIColor* textureBackground = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Texture.png"]];
CALayer* textureLayer = [[CALayer alloc] init];
[textureLayer setFrame:self.view.bounds];
[textureLayer setBackgroundColor:textureBackground.CGColor];
[textureLayer setOpacity:0.5];
[self.view.layer insertSublayer:textureLayer above:self.view.layer]; 
```

# mercurial - 无法使用 Mercurial 推送：中止：错误：''

> ID：13135785
> 
> 赞同：4
> 
> 时间：2012-10-30T09:12:34.380
> 
> 标签：mercurial, push, commit, bitbucket

我正在尝试将我的更改推送到 Mercurial [Bitbucket.org](https://bitbucket.org/)存储库中，但是在推送时，它突然中止并出现以下空错误：

```
abort: error: '' 
```

这是什么意思？我怎样才能避免这个错误？

**注意**：根据我的尝试，推送并不总是失败。有时它会正确完成。但我想知道这个错误是什么意思。我不能一次又一次地尝试，直到推送没有失败。

# javascript - 制作滚动网站的好方法

> ID：13135786
> 
> 赞同：0
> 
> 时间：2012-10-30T09:12:36.633
> 
> 标签：javascript, html, scroll

我想知道制作“滚动网站”的最佳方法是什么，这种图形网站会在用户滚动时做出反应。

喜欢

[http://www.evanshalshaw.com/bondcars/](http://www.evanshalshaw.com/bondcars/)
或
[http://www.angelamorelli.com/water/](http://www.angelamorelli.com/water/)

是 jQuery 吗？HTML5 ?

它是一个虚拟`$(document).scroll()`函数中的巨大算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:15:33.610

我还使用了滚轮插件[http://brandonaaron.net/code/mousewheel/docs](http://brandonaaron.net/code/mousewheel/docs)。有了它，我就可以使用绝对定位的元素制作滚动站点（水平和垂直）。[Tweenmax https://www.greensock.com/tweenmax/](https://www.greensock.com/tweenmax/)也是一个很好的补充。帮助在滚动输入上制作动画。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:32:52.920

有一些 JQuery 插件可以帮助您制作“滚动站点”：

*   [http://johnpolacek.github.com/superscrollorama/](http://johnpolacek.github.com/superscrollorama/)
*   [http://areaaperta.com/nicescroll/](http://areaaperta.com/nicescroll/)（这个是你提供的第二个站点使用的）

并查看您提供的网站的 javascript 代码，看看他们是如何做到的。

# .net - 配置系统无法初始化/无法识别的配置部分

> ID：13135787
> 
> 赞同：2
> 
> 时间：2012-10-30T09:12:38.307
> 
> 标签：.net, frameworks

我在新安装的桌面上调试以下代码。检查我的环境很简单。我已经通过互联网搜索了错误，但没有答案可以解决我的问题。我想这可能是由文件系统权限引起的。

```
static void Main(string[] args)
{
    string test = ConfigurationManager.AppSettings["aaa"].ToString();
    Console.WriteLine(test);
} 
```

App.config 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <appSettings>
    <add key="aaa" value="bbb" />
  </appSettings>
</configuration> 
```

我得到如下错误：

```
System.Configuration.ConfigurationErrorsException: Configuration system failed to initialize ---> System.Configuration.ConfigurationErrorsException: Unrecognized configuration section appSettings
  at System.Configuration.ConfigurationSchemaErrors.ThrowIfErrors(Boolean ignoreLocal)
  at System.Configuration.BaseConfigurationRecord.ThrowIfParseErrors(ConfigurationSchemaErrors schemaErrors)
  at System.Configuration.BaseConfigurationRecord.ThrowIfInitErrors()
  at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey)
  --- End of inner exception stack trace ---
  at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey)
  at System.Configuration.ClientConfigurationSystem.PrepareClientConfigSystem(String sectionName)
  at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName)
  at System.Configuration.ConfigurationManager.GetSection(String sectionName)
  at System.Configuration.ConfigurationManager.get_AppSettings() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T02:17:02.477

我已经解决了这个问题，它是由安装不完整的 .net 框架引起的。请参考以下链接以本地化问题的根源“http://www.codeproject.com/Articles/19675/Cracking-the-Mysteries-of-NET-2-0-Configuration”

# javascript - 缩小时位置固定的div走远

> ID：13135790
> 
> 赞同：0
> 
> 时间：2012-10-30T09:12:48.523
> 
> 标签：javascript, html, css

大家好，我想在向下滚动时显示 div 区域，div 区域必须向下滚动。所以我使用了 position:fixed 并且我在一个 div 中固定了 div 区域，我称之为“页面”div。这里是 CSS

```
.page {
    width: 964px;
    margin-top:6px;
    margin-left: auto;
    margin-right: auto;
    background-image:url(../images2/images/orta_alan_bg_GOLGE.png);
    background-repeat:repeat-y;
} 
```

当我缩小我的固定 div 远离我的主要 div 区域“页面”时，我该如何解决这个问题？

这是固定的div

```
#rocket_left
{
  width:127px;
  height:148px;
  background-image:url(../../images2/images/tapinak_resim.jpg);
  top:244px;
  left: 5.4%;
  position:fixed;
}

#rocket_left_desc
{
 background-image:url(../../images2/images/bg_sol_bslk_tpnk.png); 
  width:130px;
  height:335px;
  top:385px;
  left:70px;
  position
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:28:04.367

html:

```
<div class="wrapper">
    <div class="fixed"></div>   
</div>​ 
```

和CSS：

```
.wrapper {
    position: relative;
    width: 300px;
    height: 1200px;
}

.fixed {
    width:300px;
    height:30px;
    display: block;
    position: fixed;
    background-color: #000;
    top: 0;
}​ 
```

并为此[http://jsfiddle.net/scv6a/](http://jsfiddle.net/scv6a/)

# iphone - 在 sqlite3_prepare_v2 中不定期获取 Exc_Bad_Access

> ID：13135794
> 
> 赞同：2
> 
> 时间：2012-10-30T09:12:57.767
> 
> 标签：iphone, xcode, sqlite, crash, exc-bad-access

在插入 livecategories 之前，我正在检查此 id 是否存在，如果不存在则插入该值。但有时它会崩溃并获得 exc_bad_access。为什么我会得到这个？请参阅附图。

![在此处输入图像描述](../Images/16ca4d67615504a0e5d7951dd3d48e09.png)

当我将鼠标悬停在 &statement 上时，它会显示这个 0x000000：

![在此处输入图像描述](../Images/f425542c10d340b82bae74b914195be8.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-30T09:34:21.780

检查以下示例代码：

```
// Setup the database object
    sqlite3 *database;

    // Init the animals Array
    animals = [[NSMutableArray alloc] init];

    // Open the database from the users filessytem
    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
        // Setup the SQL Statement and compile it for faster access
        const char *sqlStatement = "select * from animals";
        sqlite3_stmt *compiledStatement;
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) {
            // Loop through the results and add them to the feeds array
            while(sqlite3_step(compiledStatement) == SQLITE_ROW) {
                // Read the data from the result row
                NSString *aName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];
                NSString *aDescription = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 2)];
                NSString *aImageUrl = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];

                // Create a new animal object with the data from the database
                Animal *animal = [[Animal alloc] initWithName:aName description:aDescription url:aImageUrl];

                // Add the animal object to the animals Array
                [animals addObject:animal];

                [animal release];
            }
        }
        // Release the compiled statement from memory
        sqlite3_finalize(compiledStatement);

    }
    sqlite3_close(database); 
```

另一个[链接](http://www.edumobile.org/iphone/iphone-programming-tutorials/adding-data-using-sqlite-for-iphone/)寻求帮助。

希望这对你有用..

# entity-framework-4 - J. Kowalski 的 EF 4.0 的 EFCachingProvider 不会使缓存数据失效

> ID：13135796
> 
> 赞同：1
> 
> 时间：2012-10-30T09:13:13.527
> 
> 标签：entity-framework-4, second-level-cache

我对[EFCachingProvider](http://code.msdn.microsoft.com/EFProviderWrappers-c0b88f32)有疑问。它缓存了我想要的内容，但是当在特定表的上下文中调用 SaveChanges 时，它不会使对该表的引用无效。要发布很多代码。如果有人可以解释失效是如何完成的，我会很感激，规则是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T23:22:31.597

我在使用 TransactionScope 时遇到了类似的问题。在我删除它后，问题得到了解决。我不知道如何让它一起工作。

# iphone - 如何卸载情节提要？

> ID：13135800
> 
> 赞同：0
> 
> 时间：2012-10-30T09:13:18.700
> 
> 标签：iphone, ios, ios5, storyboard

我需要卸载故事板并用另一个视图控制器替换根视图控制器。当我完成另一个视图控制器时，我需要卸载他并恢复情节提要和根视图控制器。当我尝试替换根视图控制器时，情节提要仍然与其他视图一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:29:02.230

在里面`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

```
{
UINavigationController *nav = [[UINavigationController alloc]initWithRootViewController:DesiredViewController];
} 
```

并且当您希望storyBoard在desiredViewController之后接管时..

使用desiredViewController中的代码

```
AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
 UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil]; //MainStoryBoard is the name of your storyBorad
        UIViewController* myStoryBoardInitialViewController = [storyboard instantiateInitialViewController];

        [appDelegate.window setRootViewController:myStoryBoardInitialViewController ]; 
```

# c - 'getContent' : 并非所有控制路径都返回一个值“

> ID：13135802
> 
> 赞同：3
> 
> 时间：2012-10-30T09:13:27.390
> 
> 标签：c

```
`getContent` : not all control paths return a value 
```

这是我在编译`C`程序时收到的警告，其中`getContent`是一个`bool`以网站名称和缓冲区作为参数的方法，如果未在缓冲区中检索到所需页面，则在该函数中递归调用该方法。

如何删除此警告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T09:23:49.080

> 并非所有控制路径都返回值

当并非所有控制路径都返回值时，就会出现此警告。例如，以下代码可能会产生警告。

```
int f(bool b)
{
    if(b)
    {
        return 42; 
    } 
} 
```

为了修复此警告，您应该从所有控制路径返回一个值。

```
 int f(bool b)
{
    if(b)
    {
        return 42; 
    }
    return 50; //<--
} 
```

# editor - Wordpress 简码所见即所得

> ID：13135803
> 
> 赞同：1
> 
> 时间：2012-10-30T09:13:33.543
> 
> 标签：editor, wysiwyg, execute, shortcode

我正在寻找一个简单的代码，我可以用它在 wordpress 内容编辑器中“执行”短代码。假设我有一个列短代码 [one_third]。将一些内容放入其中（[one_third]some long content..[/one_third] 短代码将作为占据页面内容区域三分之一的列出现在我的页面中。

如果我创建一个页面（示例页面）并将一些文本写入内容，我将如何实现代码。然后我想选择所有文本，单击 one_third 按钮（这些按钮应该放在编辑器上方 - 知道如何做到这一点）。因此，我希望不写在内容编辑器中但已经执行的短代码。所以对于上面的例子，我会得到这样的东西：

![在此处输入图像描述](../Images/2c79e1cd09e150fae6920b90a89bbd47.png)

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:23:51.557

我不相信你能做到这一点，因为只有在查看帖子/页面时才会处理短代码。在编辑期间不会生成/处理简码。

但是，您可以编写一个 WordPress 插件来扩展所见即所得编辑器的功能，例如将 HTML 模板插入所见即所得编辑器的按钮，并生成您希望看到的 1/3 视图。

# c++ - 类定义期间的结构初始化

> ID：13135804
> 
> 赞同：1
> 
> 时间：2012-10-30T09:13:36.483
> 
> 标签：c++

我在类定义期间遇到结构初始化问题。我知道 C++ 标准不允许在类定义期间定义变量，但`static const`变量除外。

就我而言，我已经生成了许多结构初始化的 C 代码。此代码（纯 C 代码）中的所有 POD 变量都是全局的。我想让这个 POD 本地化，所以我尝试将此代码包含在一个类中，并且需要解决结构初始化的问题。生成结构的基本示例是：

```
// generated C-code
struct G { int a; };
G GS = {0}; 
```

如果我们尝试把它放在一个类中，我们可以说：

```
class CL{
public:
    struct G { int a; } GS = {0}; //error
}; 
```

我们有一个错误：

```
error C2059: syntax error : '{'
error C2334: unexpected token(s) preceding '{'; skipping apparent function body 
```

好的。一些变化。

```
class CL{
public:
    struct G { int a; } GS;
    CL() { GS.a = 0; }
}; 
```

工作正常。但就我而言，我有很多包含很多字段的结构。我不想对生成的代码进行很多更改。怎么样`static const`？

```
class CL{
public:
    static const struct G { int a; } GS; //ok
    static const struct GT { int a; } GST = {0}; //error
}; 
```

也许我可以将所有结构作为`static const`结构并初始化它们？我怎样才能解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:21:34.640

您可以将静态成员结构的初始化放在 .cpp 文件中，例如：

```
// cl.h
class CL{
public:
  static const struct G { int a; } GS; 
  };

// cl.cpp
const CL::G CL::GS = {0}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:44:50.390

也许这个解决方案对你来说是可以接受的

```
// your header
template<typename T> T Create();

#define DECLARE_CREATE(STRUCT_TYPE, INITIALIZER)\
    template<> STRUCT_TYPE Create<STRUCT_TYPE>()\
{\
    STRUCT_TYPE GS = INITIALIZER;\
    return GS;\
}\

// generated C-code
struct G { int a; };
// replace G GS = {0};
DECLARE_CREATE(G, {0});

int _tmain(int argc, _TCHAR* argv[])
{
    G g = Create<G>(); // use initialized structure
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T09:26:10.707

为什么不为结构定义一个构造函数来初始化它。

```
class CL
{
public:
    CL() {};
    ~CL() {};

    struct G
    {
        int a;
        G() { memset(this, 0, sizeof(G)); }
    };

    G GS;
}; 
```

# php - 从 csv 到数据库的层次结构最简洁的方法是什么？

> ID：13135805
> 
> 赞同：0
> 
> 时间：2012-10-30T09:13:37.787
> 
> 标签：php, mysql, csv, hierarchical-data

在一个网络应用程序中，我的用户上传了一个 csv 文件，我需要在进入数据库的过程中对其进行检查。部分信息形成了一个简单的分层数据集，因此我想确保行是唯一的。这是我想做的事情，举个例子。

CSV 包括这些行...

```
field5      field6      field7
fred        bert        apple
fred        bert        apple
fred        george
fred        george      pear
will        tom         orange
will        tom         plum 
```

我打算将它们吸收到这样的 PHP 数组中。

```
$unique_fields = array();
while( $row = fgetcsv($handle) ){
    if( $row[5] ){
        if( !array_key_exists( $row[5] , $unique_fields ) ){
            $unique_fields[ $row[5] ] = array();
        }
        if( $row[6] ){
            if( !array_key_exists( $row[6] , $unique_fields[ $row[5] ] )){
                $unique_fields[ $row[5] ][ $row[6] ] = array();
            }

            if( $row[7] ){
                if( !array_key_exists( $row[7], $unique_fields[ $row[5] ][ $row[6] ]  )){
                    $unique_fields[ $row[5] ][ $row[6] ][ $row[7] ] = array();
                }
            }
        }
    }
} 
```

如果这是一个好主意（我愿意接受建议）——那之后最好的方法是什么？我想将数组传输到我的数据库中，使其看起来像上面的 csv 示例，但没有重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:24:57.197

好的，没有人想要尝试它，所以我坚持了下来，这就是我想出的。如果有人有更好的解决方案，我会观看该页面。感谢您的关注。

```
if( count($unique_fields) ){
    foreach( $unique_fields as $k1=>$v1 ){
        if( is_array($v1) ){
            foreach( $v1 as $k2=>$v2 ){
                if( is_array($v2) ){
                    foreach( $v2 as $k3=>$v3 ){
                        //insert $k1, $k2, $k3
                    }
                }else{
                    //insert $k1, $k2
                }
            }
        }else{
            //insert $k1 on its own
        }
    }
} 
```

# c# - 启动另一个 C# 应用程序

> ID：13135807
> 
> 赞同：1
> 
> 时间：2012-10-30T09:13:42.810
> 
> 标签：c#, launching-application

我有两个 C# 应用程序（Windows 窗体）。都是我自己开发的。我希望一个应用程序启动另一个应用程序并打开一个与从第一个应用程序传递的参数相关的表单。如果第二个应用程序已经打开，那么我只需要在第二个应用程序中打开表单并将其放在前面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:21:59.257

您需要归档的是
您的 2 个 c# 应用程序支持命令行参数
并且能够一起通信

[Main() 和命令行参数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/acy3edy3.aspx)

[进程间通信](http://msdn.microsoft.com/en-us/library/aa365574%28VS.85%29.aspx#base.using_data_copy_for_ipc)

另请查看 [数据复制](http://msdn.microsoft.com/en-us/library/ms648710%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:26:42.200

第一步：
如果未启动，则启动应用程序
1）确定，如果应用程序正在运行：[在此处回答](https://stackoverflow.com/questions/4722198/checking-if-windows-application-is-running)
2）如果未运行，则运行应用程序：[MSDN 示例](http://blogs.msdn.com/b/csharpfaq/archive/2004/06/01/146375.aspx)

第二步：
然后尝试使用命名管道进行进程间通信：[示例此处](http://www.switchonthecode.com/tutorials/interprocess-communication-using-named-pipes-in-csharp)

# file - [System.IO.File]::WriteAllLines 在末尾添加换行符

> ID：13135808
> 
> 赞同：1
> 
> 时间：2012-10-30T09:13:50.073
> 
> 标签：file, shell, powershell, newline

我有这个代码：

```
# Generate bash script
$bashScript = "#!/bin/bash`n";
$bashScript += [string]::Join("`n", $cmds)

[System.IO.File]::WriteAllLines($location.ToString() + ".\build.sh", $bashScript); 
```

问题是我总是`CRLF`在文件末尾得到字符！

```
#!/bin/bash [LF]
tsc ... [LF]
java ... [LF]
java ... [CR][LF] 
```

除了最后更换，我能做些什么`CRLF`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:53:16.043

我不会说 Powershell，但在我看来，你已经告诉它写一个大行 ( `$bash_script`)，最后有一个换行符 (CRLF)。[`WriteAllText`](http://msdn.microsoft.com/en-us/library/ms143375.aspx)改为打电话。确保文件末尾有一个 LF。

```
$bashScript = "#!/bin/bash`n" + [string]::Join("`n", $cmds) + "`n"
[System.IO.File]::WriteAllText($location.ToString() + ".\build.sh", $bashScript); 
```

# c# - asp.net c#登录系统

> ID：13135811
> 
> 赞同：1
> 
> 时间：2012-10-30T09:14:08.500
> 
> 标签：c#, asp.net, login, system

我正在开发带有登录系统的系统，有三种类型的安全级别用户，经理，管理员，系统用户将超过 1500 个用户，所以我对 asp.net 有点陌生，所以我提出了一些建议来覆盖 asp 中的会员系统.net 因为我发现它很复杂，我的用户表结构是

```
user_id int
user_pass int
user_level int    there will be one of three values in this column 1 or 2 or 3 
```

我的网络配置认证部分是

```
<authentication mode="Forms">

    <forms loginUrl="login.aspx" name="3345C" timeout="60" protection="All" >
        <credentials passwordFormat="Clear">
            <user name="nissadmin" password="nissADM"/>
            <user name="nissuser" password="nissuser"/>
        </credentials>
    </forms>
</authentication>
<location path="oper">
    <system.web>
        <authorization>
            <allow users="nissuser"/>
            <deny users="*"/>
        </authorization>
    </system.web>
</location>
<location path="admin">
    <system.web>
        <authorization>
            <allow users="nissadmin"/>
            <deny users="*"/>
        </authorization>
    </system.web>
</location> 
```

我的登录页面代码是

```
protected void Button1_Click(object sender, EventArgs e)
    {
        string connectionString
        = System.Configuration.ConfigurationManager.ConnectionStrings["nisss"].ConnectionString;
        SqlConnection conn = new SqlConnection();
        try
        {
            if (user.Text == "" || pw.Text == "")
            {
                Label1.Text = "Please Fill the required Fields";
            }
            else
            {
                conn = new SqlConnection(connectionString);
                conn.Open();
                SqlCommand cmd = new SqlCommand("logi", conn);
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.Parameters.Add(new SqlParameter("@usr", int.Parse(user.Text)));
                cmd.Parameters.Add(new SqlParameter("@pass", pw.Text));
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                DataSet data = new DataSet();
                da.Fill(data);
                if (data.Tables[0].Rows.Count == 1) // if the user and password true
                {
                    int role = data.Tables[0].Rows[0].Field<int>(3);
                    Response.Cookies["id"].Value = user.Text;
                    if (role == 0)
                    {
                        if (System.Web.Security.FormsAuthentication.Authenticate("nissuser", "nissuser"))
                        {
                            system.Web.Security.FormsAuthentication.RedirectFromLoginPage("nissuser", false);
                            Response.Cookies["rolee"].Value = null;
                            Response.Redirect("oper/order.aspx");
                        }

                    }
                    else if (role == 1)
                    {
                        if (System.Web.Security.FormsAuthentication.Authenticate("nissuser", "nissuser"))
                        {
                            System.Web.Security.FormsAuthentication.RedirectFromLoginPage("nissuser", false);
                            Response.Cookies["rolee"].Value = "456";
                            Response.Redirect("oper/order.aspx");
                        }
                    }
                    else if (role == 2)
                    {
                        if (System.Web.Security.FormsAuthentication.Authenticate("nissadmin", "nissADM"))
                        {
                            System.Web.Security.FormsAuthentication.RedirectFromLoginPage("nissadmin", false);
                            Response.Redirect("admin/tabs.html");
                        }
                    }
                }
                else
                {
                    Label1.Text = "wrong password or id";
                }
            }
        }
        finally
        {
            conn.Close();
        }
    } 
```

这在测试中运行良好，但我需要知道的是，这将适用于同时登录的大量用户，没有任何问题请帮助我提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:48:48.340

我将首先使用内置的成员资格提供程序添加一个 asp.net 表单身份验证的示例。一旦你有了这个工作，我会考虑对成员资格提供者进行子类化以自定义安全模型。

你上面的东西太复杂了，你在一个地方有太多的责任。

您可能还想看看[SimpleMembership Provider](https://www.google.com/search?q=asp.net+simplemembership)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:51:42.437

尝试使用 int.TryParse 而不是 int.Parse。您永远不知道用户可能会在该字段中输入什么...

# image - OpenCV 比较图像

> ID：13135820
> 
> 赞同：0
> 
> 时间：2012-10-30T09:14:41.523
> 
> 标签：image, opencv, javacv

我需要 OpenCV 的帮助来解决以下问题：

1.  我有一些地方的照片
2.  每张照片与第一张对比
3.  在照片中，除了第一张我需要画出有变化的框架

谁能给我建议或推荐一个主要的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:10:53.703

这听起来像是*背景减法*的工作。

[BackgroundSubtractorMOG2](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#BackgroundSubtractorMOG2%20%3a%20public%20BackgroundSubtractor)是您可能想要的类。

我自己没用过，这里有[教程](http://mateuszstankiewicz.eu/?p=189)

# java - 在 Maven 和 Eclipse 中获取相同的 Findbugs 错误

> ID：13135822
> 
> 赞同：12
> 
> 时间：2012-10-30T09:14:52.967
> 
> 标签：java, eclipse, maven, findbugs

我设法在我的 maven 构建过程中运行 findbugs，并且我还在 eclipse 中配置了 findbugs。但是，当在 Eclipse 和 Maven 中运行时，我会遇到不同的错误，而且我似乎无法找到一个设置，其中错误的数量与 Eclipse 和 Maven 中的匹配。

我的 Maven 设置是这样的：

```
<version>2.5.2</version>
<configuration>
        <failOnError>false</failOnError>
        <threshold>Normal</threshold>
        <effort>Default</effort>
        <xmlOutput>true</xmlOutput>
        <findbugsXmlOutput>true</findbugsXmlOutput>
        <findbugsXmlWithMessages>true</findbugsXmlWithMessages>
</configuration> 
```

在 Eclipse 中，我有：

```
Findbugs Version: 2.0.1
Analysis Effort: Default
Minimum Rank to report: 20
Minimum Confidence to Report: Medium
Reported categories: All 
```

使用这些设置，我在 Eclipse 中遇到了更多错误。我的主要问题是，我什至无法匹配 maven 和 eclipse 之间的不同设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:38:42.233

您可以尝试使用[m2e-code-quality](http://m2e-code-quality.github.com/m2e-code-quality/)，其中包括一个 m2eclipse“连接器”，它应该确保您的 Eclipse FindBugs 配置与您的 pom.xml 中指定的配置相匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:22:16.847

我有完全相同的问题。Eclipse（使用 FindBugs 2.0.1）和 Maven 插件（2.5.2 版）中可用的设置不匹配。Maven 插件中缺少的一项设置是“信心”。使用另一个软件来匹配配置并不能解决问题，因为 Eclipse 匹配只是突出了一个问题。我希望完全独立于 Eclipse 的 Maven 构建报告的某些错误没有被报告。碰巧可以在 Eclipse 中报告它们。

# android - Android 服务没有停止

> ID：13135823
> 
> 赞同：0
> 
> 时间：2012-10-30T09:14:57.197
> 
> 标签：android, service, android-intent, forceclose

在我的应用程序中，当我登录时，我启动`UpdaterService.class`. 当我注销时，应用程序已成功注销。但是当我再次登录时，它首先给出*FORCE CLOSE*，第二次在我再次登录*AFTER CLOSE*时，它工作正常。我无法弄清楚背后的原因。

**更新服务**

```
public class UpdaterService extends Service implements InvitationListener {
    private static XMPPConnection connection;
    String Friend;
    String user = "";
    String senderName ="";
    String subID="";
    int subscription = 1;

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        // Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        super.onCreate();
    }   

    @Override
    public void onDestroy() {

        super.onDestroy();
    }

    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        showToast("My Service Started", 0);
        connection = getConnection();
        if (connection.isConnected()) {
            final Roster roster = connection.getRoster();
            RosterListener r1 = new RosterListener() {

                @Override
                public void presenceChanged(Presence presence) {
                    // TODO Auto-generated method stub

                       //notification("changed");

                }

                @Override
                public void entriesUpdated(Collection<String> arg0) {
                    // TODO Auto-generated method stub
                    //notification("entriesUpdated");
                }

                @Override
                public void entriesDeleted(Collection<String> arg0) {
                    // TODO Auto-generated method stub
                    //notification("entriesDeleted");
                }

                @Override
                public void entriesAdded(Collection<String> arg0) {
                    // TODO Auto-generated method stub
                    Iterator<String> it = arg0.iterator();
                    if (it.hasNext()) {
                        user = it.next();
                    }
                    /*RosterEntry entry = roster.getEntry(user);
                    if(entry.getType().toString().equalsIgnoreCase("to")){
                        int index_of_Alpha = user.indexOf("@");
                        String subID = user.substring(0, index_of_Alpha);

                        notification("Hi,"+subID+" wants to add you");
                    }       */      
                }
            };

            if (roster != null) {
                System.out.println("subscription going on");
                roster.addRosterListener(r1);
            }

        } else {
            showToast("Connection lost-", 0);
        }

        //Group Chat Invitation
        MultiUserChat.addInvitationListener(connection, new InvitationListener() {

            @Override
            public void invitationReceived(Connection arg0, String arg1, String arg2,
                    String arg3, String arg4, Message arg5) {
                // TODO Auto-generated method stub

                System.out.println("Received");
                notification("Invitation Received");

            }
        });

        //presence check
        connection.addPacketListener(new PacketListener() {

            @Override
            public void processPacket(Packet arg0) {
                // TODO Auto-generated method stub

                Presence presence = (Presence)arg0;
                if(presence.getType().equals(Presence.Type.subscribe))
                {

                    user = presence.getFrom();
                    int index_of_Alpha = user.indexOf("@");
                    subID = user.substring(0, index_of_Alpha);

                    /*Roster roster = connection.getRoster();
                    RosterEntry entry = roster.getEntry(user);*/

                        notification("Hi,"+subID+" wants to add you");

                }

                if(presence.getType().equals(Presence.Type.subscribed)){

                    Roster roster = connection.getRoster();
                    RosterEntry entry = roster.getEntry(user);
                    if(entry.getType().toString().equalsIgnoreCase("to")){
                        int index_of_Alpha = user.indexOf("@");
                        subID = user.substring(0, index_of_Alpha);

                }

                }
            }
        },new PacketTypeFilter(Presence.class));

        PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
        final PacketCollector collector = connection.createPacketCollector(filter);
        connection.addPacketListener(new PacketListener() {

            @Override
            public void processPacket(Packet packet) {
                // TODO Auto-generated method stub
                //notification(packet.getFrom());
                packet = collector.nextResult();
                Message message = (Message)packet;
                senderName = packet.getFrom();

                int alphaPOS = senderName.indexOf("@");
                String subSenderName = senderName.substring(0,alphaPOS); 

                notificationforChat(subSenderName+": "+message.getBody(),packet.getFrom().toString());
            }
        }, filter);

         /*while (true) {
                Packet packet = collector.nextResult();
                if (packet instance of Message) {
                    Message message = (Message) packet;
                    if (message != null && message.getBody() != null)
                        System.out.println("Received message from "
                                + packet.getFrom() + " : "
                                + (message != null ? message.getBody() : "NULL"));

                    notification(""+message.getBody());

                }
            }*/

    }

    protected void showToast(String msg, int time) {
        Toast.makeText(this, msg, time).show();
    }

    private XMPPConnection getConnection() {
        return CCMStaticVariable.CommonConnection;
    } 
```

这是停止服务的代码（**LOGOUT**代码）

```
if (CCMStaticVariable.CommonConnection.isConnected()) {
                    //super.onBackPressed();

                    final AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);      
                    alertDialog.setTitle("CCM Logout");
                    alertDialog.setMessage("Are you sure you want to logout?");
                    alertDialog.setIcon(R.drawable.ic_launcher);

                    //Ok button for Logout
                    alertDialog.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                            CCMStaticVariable.CommonConnection.disconnect();

                            Intent serviceIntent = new Intent(UserMenuActivity.this,UpdaterService.class);
                            stopService(serviceIntent);

                            //CCMStaticVariable.CommonConnection.removeConnectionListener(arg0);
                            finish();

                        }
                    }); 
```

**LOGCAT**

```
10-30 14:53:00.189: D/dalvikvm(944): GC_CONCURRENT freed 919K, 55% free 3013K/6663K, external 2582K/2706K, paused 8ms+3ms
10-30 14:53:01.248: W/dalvikvm(944): threadid=10: thread exiting with uncaught exception (group=0x40015560)
10-30 14:53:01.278: E/AndroidRuntime(944): FATAL EXCEPTION: AsyncTask #2
10-30 14:53:01.278: E/AndroidRuntime(944): java.lang.RuntimeException: An error occured while executing doInBackground()
10-30 14:53:01.278: E/AndroidRuntime(944):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
10-30 14:53:01.278: E/AndroidRuntime(944):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
10-30 14:53:01.278: E/AndroidRuntime(944):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
10-30 14:53:01.278: E/AndroidRuntime(944):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
10-30 14:53:01.278: E/AndroidRuntime(944):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
10-30 14:53:01.278: E/AndroidRuntime(944):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
10-30 14:53:01.278: E/AndroidRuntime(944):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
10-30 14:53:01.278: E/AndroidRuntime(944):  at java.lang.Thread.run(Thread.java:1019)
10-30 14:53:01.278: E/AndroidRuntime(944): Caused by: java.lang.NullPointerException
10-30 14:53:01.278: E/AndroidRuntime(944):  at org.jivesoftware.smackx.muc.MultiUserChat$1.connectionCreated(MultiUserChat.java:114)
10-30 14:53:01.278: E/AndroidRuntime(944):  at org.jivesoftware.smack.XMPPConnection.initConnection(XMPPConnection.java:607)
10-30 14:53:01.278: E/AndroidRuntime(944):  at org.jivesoftware.smack.XMPPConnection.connectUsingConfiguration(XMPPConnection.java:556)
10-30 14:53:01.278: E/AndroidRuntime(944):  at org.jivesoftware.smack.XMPPConnection.connect(XMPPConnection.java:984)
10-30 14:53:01.278: E/AndroidRuntime(944):  at com.cipl.CCM.frontend.XMPPConn.checkXMPPConnection(XMPPConn.java:51)
10-30 14:53:01.278: E/AndroidRuntime(944):  at com.cipl.CCM.frontend.LoginActivity$LoginUserTask.doInBackground(LoginActivity.java:135)
10-30 14:53:01.278: E/AndroidRuntime(944):  at com.cipl.CCM.frontend.LoginActivity$LoginUserTask.doInBackground(LoginActivity.java:1)
10-30 14:53:01.278: E/AndroidRuntime(944):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
10-30 14:53:01.278: E/AndroidRuntime(944):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
10-30 14:53:01.278: E/AndroidRuntime(944):  ... 4 more
10-30 14:53:01.878: E/WindowManager(944): Activity com.cipl.CCM.frontend.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4063f7f8 that was originally added here
10-30 14:53:01.878: E/WindowManager(944): android.view.WindowLeaked: Activity com.cipl.CCM.frontend.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4063f7f8 that was originally added here
10-30 14:53:01.878: E/WindowManager(944):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
10-30 14:53:01.878: E/WindowManager(944):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
10-30 14:53:01.878: E/WindowManager(944):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
10-30 14:53:01.878: E/WindowManager(944):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
10-30 14:53:01.878: E/WindowManager(944):   at android.app.Dialog.show(Dialog.java:241)
10-30 14:53:01.878: E/WindowManager(944):   at com.cipl.CCM.frontend.LoginActivity$LoginUserTask.onPreExecute(LoginActivity.java:130)
10-30 14:53:01.878: E/WindowManager(944):   at android.os.AsyncTask.execute(AsyncTask.java:391)
10-30 14:53:01.878: E/WindowManager(944):   at com.cipl.CCM.frontend.LoginActivity$1.onClick(LoginActivity.java:62)
10-30 14:53:01.878: E/WindowManager(944):   at android.view.View.performClick(View.java:2485)
10-30 14:53:01.878: E/WindowManager(944):   at android.view.View$PerformClick.run(View.java:9080)
10-30 14:53:01.878: E/WindowManager(944):   at android.os.Handler.handleCallback(Handler.java:587)
10-30 14:53:01.878: E/WindowManager(944):   at android.os.Handler.dispatchMessage(Handler.java:92)
10-30 14:53:01.878: E/WindowManager(944):   at android.os.Looper.loop(Looper.java:123)
10-30 14:53:01.878: E/WindowManager(944):   at android.app.ActivityThread.main(ActivityThread.java:3683)
10-30 14:53:01.878: E/WindowManager(944):   at java.lang.reflect.Method.invokeNative(Native Method)
10-30 14:53:01.878: E/WindowManager(944):   at java.lang.reflect.Method.invoke(Method.java:507)
10-30 14:53:01.878: E/WindowManager(944):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-30 14:53:01.878: E/WindowManager(944):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-30 14:53:01.878: E/WindowManager(944):   at dalvik.system.NativeStart.main(Native Method) 
```

登录活动

```
public class LoginActivity extends Activity {
    /** Variable define here. */
    private EditText metLoginUserName, metLoginPassword;
    private Button mbtnLogin;
    private ImageView ivRegister;
    private String Host, username, password;
    private int Port;
    private UserChatActivity xmppClient;
    public static ArrayList<String> all_user = new ArrayList<String>();
    public static CustomProgressDialog mCustomProgressDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.loginlayout);

        metLoginUserName = (EditText) this.findViewById(R.id.etLoginUserName);
        metLoginPassword = (EditText) this.findViewById(R.id.etLoginPassword);
        mbtnLogin = (Button) findViewById(R.id.btnLogin);
        ivRegister = (ImageView) findViewById(R.id.ivRegister);

        /** Set the hint in username and password edittext */
        metLoginUserName = CCMStaticMethod.setHintEditText(metLoginUserName,
                getString(R.string.hint_username), true);
        metLoginPassword = CCMStaticMethod.setHintEditText(metLoginPassword,
                getString(R.string.hint_password), true);

        /** Click on login button */
        mbtnLogin.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                /** Login Activity */
                username = metLoginUserName.getText().toString();
                password = metLoginPassword.getText().toString();
                CCMStaticVariable.musername = username;
                CCMStaticVariable.musername = password;
                if(CCMStaticMethod.isInternetAvailable(LoginActivity.this)){
                    LoginUserTask loginUserTask = new LoginUserTask(v.getContext());
                    loginUserTask.execute();
                }
            }
        });

        /** Click on forgot button */
        this.findViewById(R.id.ivForgot).setOnClickListener(
                new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        startActivity(new Intent(LoginActivity.this,
                                ForgotPassActivity.class));
                    }
                });

        /** Click on register button */
        ivRegister.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                startActivity(new Intent(LoginActivity.this,
                        RegisterActivity.class));
            }
        });
    }

    public class LoginUserTask extends AsyncTask<Void, Void, XMPPConnection> {
        public LoginUserTask(Context context) {
            super();
            this.context = context;
        }
        private Context context;

        @Override
        protected void onPostExecute(XMPPConnection result) {
            if (result != null) {
                /**Start services*/
                startService(new Intent(LoginActivity.this, UpdaterService.class));
                /**Call user menu activity*/    
                //finish();

                LoginActivity.this.runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub

                        startActivity(new Intent(LoginActivity.this,UserMenuActivity.class));

                    }
                });

            } else {
                DialogInterface.OnClickListener LoginUnSuccessOkAlertListener = new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                    }
                };
                CCMStaticMethod.showAlert(context, "Login",
                        "Invalid Username or Password. Try Again !", R.drawable.unsuccess,
                        true, true, "Ok", LoginUnSuccessOkAlertListener, null,
                        null);
            }
            mCustomProgressDialog.dismiss();
        }

        @Override
        protected void onPreExecute() {
            mCustomProgressDialog = CustomProgressDialog.createDialog(
                    LoginActivity.this, "", "");
            mCustomProgressDialog.show();
        }

        @Override
        protected XMPPConnection doInBackground(Void... params) {
            CCMStaticVariable.CommonConnection = XMPPConn.checkXMPPConnection(username,
                    password);
            return CCMStaticVariable.CommonConnection;
        }
    } 
```

请让我知道我的错误是什么或如何解决？

# sql-server - 传递非 Null 参数在 SQL Server 中返回 NULL 记录

> ID：13135827
> 
> 赞同：0
> 
> 时间：2012-10-30T09:15:25.010
> 
> 标签：sql-server, ssrs-2008, reporting-services

我最近发布了一个关于如何在 SQL Server Reporting Services 中处理 NULL 值的问题。该问题位于[处理 SQL Server Reporting Services 中的 NULL 值](https://stackoverflow.com/questions/13087095/handle-null-values-in-sql-server-reporting-services)。

应用`WHERE @MyParam=MyCol OR @MyParam IS NULL`面临一个问题，如果我选择单个 NON-NULL 值（从下拉列表中并在 SQL Server 中传递它），这也会带来 NULL 值记录。它应该只带来非 NULL 值的记录。

如果选择了 NON-NULL 记录，应该如何避免 NULL 记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:00:28.817

您正在寻找的是异或（XOR）：

```
-- Exclusive OR is an either/or combination which, 
-- using => as "is defined as" symbol, can be shown as:
-- 
-- x XOR y => (x AND (NOT y)) OR ((NOT x) AND y)

-- x => @MyParam = MyCol  
-- y => @MyParam IS NULL

-- DECLARE @MyParam NVARCHAR(32) = 'MC1,MC2'; -- returns two lines
-- DECLARE @MyParam NVARCHAR(32) = 'MC1';     -- returns one line
   DECLARE @MyParam NVARCHAR(32) =  NULL;     -- returns one line

DECLARE @MyParamXML XML = N'<root><r>' + replace(@MyParam,',','</r><r>') + '</r></root>'

;WITH   SOExample AS
(
    SELECT cast('MC1' AS NVARCHAR(12)) AS MyCol, 'Line 1'    AS MyCol2 UNION ALL
    SELECT      'MC2'                          , 'Line 2'              UNION ALL
    SELECT       NULL                          , 'Line NULL'
)
SELECT * from SOExample 
WHERE
       (@MyParam IS NULL     AND ISNULL(MyCol,'<NULL Value>') = '<NULL Value>') 
    OR (@MyParam IS NOT NULL AND 
        SOExample.MyCol IN 
            (SELECT SSRSlist.MyParams.value('.','NVARCHAR(32)') as MyParam 
             FROM   @MyParamXML.nodes('//root/r') as SSRSlist(MyParams))) 
```

# ruby - 是否可以使用 []= 的 ruby 隐式返回值

> ID：13135828
> 
> 赞同：0
> 
> 时间：2012-10-30T09:15:23.930
> 
> 标签：ruby

`[]=`使用方法时是否可以使用ruby的隐式返回值，我正在徘徊

`[]=`使用`rb_hash_aset`并且它正在返回`val`- [http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-5B-5D-3D](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-5B-5D-3D)

这是一个小代码来演示我的意思：

```
require 'benchmark'
CACHE = {}
def uncached_method(key)
    warn "uncached"
    rand(100)
end
def cached(key)
  CACHE[key] || (CACHE[key] = uncached_method(key))
end
def longer_cached(key)
  return CACHE[key] if CACHE[key]
  CACHE[key] = uncached_method(key)
  CACHE[key]
end

Benchmark.bm(7) do |x|
    y = rand(10000)
    cached(y)
    x.report("shorter:") { 10000000.times do cached(y) end }
    x.report("longer:") { 10000000.times do longer_cached(y) end }
end 
```

当然`longer_cached`速度较慢，因为它会执行两次哈希查找以返回缓存值，但是当您逐行读取它时，它比该`cached`方法更有意义。

我认为使用隐式返回是使 ruby​​ 很棒的事情之一，但我一直质疑它们在设置值时的使用。

所以我的问题是：你会使用隐式 return from`(hash[key] = val)`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:41:02.350

`||=`在这种情况下，您也可以使用运算符。

```
CACHE[key] ||= uncached_method(key) 
```

这是一个很常见的成语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:05:18.033

只是因为到目前为止没有人提到它：您不依赖`Hash#[]=`. 无论如何，该返回值都会被忽略：

```
class ReturnFortyTwo
  def []=(*)
    return 42
  end
end

r = ReturnFortyTwo.new

r[23] = 'This is the value that is going to be returned, not 42'
# => 'This is the value that is going to be returned, not 42' 
```

在 Ruby 中，赋值表达式*总是*计算出被赋值的值。没有例外。语言规范保证了这一点。所以，我认为依赖它没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:22:51.620

在这种情况下，较短的是优选的。通常`=`在子表达式中使用是不赞成的，但在这里没关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T10:50:03.690

我会尽可能保持简单和干净（它也更快）：

```
def cached(key)
  value = CACHE[key]
  unless value
    value = uncached_method(key)
    CACHE[key] = value
  end
  value
end 
```

# c++ - 无法从后台缓冲区 (DirectX9) 捕获数据

> ID：13135829
> 
> 赞同：2
> 
> 时间：2012-10-30T09:15:25.697
> 
> 标签：c++, visual-studio-2008, visual-c++, gdi, directx-9

我正在尝试找到最快的截屏方法。到目前为止，我已经发现可以使用 GDI 或 DirectX。使用 GDI 我能够在 35 毫秒内捕获屏幕，而使用 DirectX 前端缓冲区平均需要 73 毫秒。我想要比这更快的方法。为此，在 DirectX 中捕获 Back Buffer 似乎是一个好方法。我正在使用以下代码来做同样的事情：

```
 D3DDISPLAYMODE  ddm;
    D3DPRESENT_PARAMETERS   d3dpp;

    if((g_pD3D=Direct3DCreate9(D3D_SDK_VERSION))==NULL)
    {
        ErrorMessage("Unable to Create Direct3D ");
        return E_FAIL;
    }

    if(FAILED(g_pD3D->GetAdapterDisplayMode(D3DADAPTER_DEFAULT,&ddm)))
    {
        ErrorMessage("Unable to Get Adapter Display Mode");
        return E_FAIL;
    }

    ZeroMemory(&d3dpp,sizeof(D3DPRESENT_PARAMETERS));

    d3dpp.Windowed=WINDOW_MODE;
    d3dpp.Flags=D3DPRESENTFLAG_LOCKABLE_BACKBUFFER;
    d3dpp.BackBufferFormat=ddm.Format;
    d3dpp.BackBufferHeight=nDisplayHeight=gScreenRect.bottom =ddm.Height;
    d3dpp.BackBufferWidth=nDisplayWidth=gScreenRect.right =ddm.Width;
    d3dpp.MultiSampleType=D3DMULTISAMPLE_NONE;
//  d3dpp.SwapEffect=D3DSWAPEFFECT_DISCARD;
    d3dpp.SwapEffect=D3DSWAPEFFECT_COPY;
    d3dpp.hDeviceWindow=hWnd;
    d3dpp.PresentationInterval=D3DPRESENT_INTERVAL_DEFAULT;
    d3dpp.FullScreen_RefreshRateInHz=D3DPRESENT_RATE_DEFAULT;

    if(FAILED(g_pD3D->CreateDevice(D3DADAPTER_DEFAULT,D3DDEVTYPE_HAL,hWnd,D3DCREATE_SOFTWARE_VERTEXPROCESSING ,&d3dpp,&g_pd3dDevice)))
    {
        ErrorMessage("Unable to Create Device");
        return E_FAIL;
    }

    if(FAILED(g_pd3dDevice->CreateOffscreenPlainSurface(ddm.Width, ddm.Height, D3DFMT_A8R8G8B8, D3DPOOL_SCRATCH, &g_pSurface, NULL)))
    {
        ErrorMessage("Unable to Create Surface");
        return E_FAIL;
    }

g_pd3dDevice->GetBackBuffer(0,0,D3DBACKBUFFER_TYPE_MONO,&g_pSurface);
D3DXSaveSurfaceToFile("d:\\v\\temp.bmp",D3DXIFF_BMP,g_pSurface,NULL,NULL); 
```

问题是，输出文件大小为 5MB，但在输出中只显示黑色。在相同的代码中，如果我使用 GetFrontBufferData 我可以成功捕获屏幕。我做错什么了吗？请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:44:02.253

您无法从后台缓冲区捕获屏幕截图。

前缓冲区-后缓冲区的关系是这样工作的：后缓冲区被擦除，然后一次将场景绘制到它上。一旦它准备好，它就会与前端缓冲区一起翻转，这样前端缓冲区就会显示最终图像，同时再次擦除后端缓冲区。

从理论上讲，后台缓冲区有你想要的数据，但我不相信你可以可靠地获得这种状态。前缓冲区是为这个任务设计的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T23:08:02.743

这是我截取屏幕截图的方式：

```
IDirect3DSurface9 *offscreenSurface = 0;
d3dDevice->GetBackBuffer(0, 0, D3DBACKBUFFER_TYPE_MONO, &offscreenSurface);
D3DXSaveSurfaceToFile( filename, D3DXIFF_BMP, offscreenSurface, 0, 0 ) 
```

请注意，此代码在调用*之前运行。* `Present`

# xcode - MapView 缩放取决于坐标

> ID：13135831
> 
> 赞同：1
> 
> 时间：2012-10-30T09:15:37.300
> 
> 标签：xcode, mkmapview, zooming, coordinates, ios5.1

我正在用不同的地图在 IOS 5 中开发一个应用程序。我想根据从服务器获得的坐标缩放每张地图。正如我所说，每张地图都有不同的缩放比例。我希望所有坐标都出现在地图上。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:15:37.300

我有最好的解决方案。首先，我必须从服务器获取最大值和最小值（纬度和经度）。最后，我执行以下操作：

```
CLLocationCoordinate2D min = CLLocationCoordinate2DMake([lati_min floatValue], [longi_min floatValue]);

CLLocationCoordinate2D max = CLLocationCoordinate2DMake([lati_max floatValue], [longi_max floatValue]);

CLLocationCoordinate2D center = CLLocationCoordinate2DMake((max.latitude + min.latitude) / 2.0, (max.longitude + min.longitude) / 2.0);
        MKCoordinateSpan span = MKCoordinateSpanMake(max.latitude - min.latitude, max.longitude - min.longitude);
MKCoordinateRegion region = MKCoordinateRegionMake(center, span); 
```

它完美地工作。

# c++ - 为什么 std::atomic 比 volatile bool 慢得多？

> ID：13135834
> 
> 赞同：35
> 
> 时间：2012-10-30T09:15:41.783
> 
> 标签：c++, multithreading, performance, c++11, atomic

多年来，我一直在使用 volatile bool 进行线程执行控制，效果很好

```
// in my class declaration
volatile bool stop_;

-----------------

// In the thread function
while (!stop_)
{
     do_things();
} 
```

现在，由于 C++11 增加了对原子操作的支持，我决定尝试一下

```
// in my class declaration
std::atomic<bool> stop_;

-----------------

// In the thread function
while (!stop_)
{
     do_things();
} 
```

但它比 ! 慢几个数量级`volatile bool`！

我编写的简单测试用例大约需要 1 秒才能完成`volatile bool`。`std::atomic<bool>`然而，我已经等了大约 10 分钟并放弃了！

我尝试使用`memory_order_relaxed`flag`load`来`store`达到相同的效果。

我的平台：

*   Windows 7 64 位
*   MinGW gcc 4.6.x

我做错了什么？

注意：我知道 volatile 不会使变量成为线程安全的。我的问题不是关于 volatile，而是关于为什么 atomic 慢得离谱。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-30T11:35:27.417

来自“Olaf Dietsche”的代码

```
 USE ATOMIC
 real   0m1.958s
 user   0m1.957s
 sys    0m0.000s

 USE VOLATILE
 real   0m1.966s
 user   0m1.953s
 sys    0m0.010s 
```

**如果您使用的是 GCC SMALLER 4.7**

[http://gcc.gnu.org/gcc-4.7/changes.html](http://gcc.gnu.org/gcc-4.7/changes.html)

> 添加了对指定 C++11/C11 内存模型的原子操作的支持。这些新的 __atomic 例程替换了现有的 __sync 内置例程。
> 
> 原子支持也可用于内存块。如果内存块的大小和对齐方式与支持的整数类型相同，则将使用无锁指令。没有无锁支持的原子操作被保留为函数调用。GCC atomic wiki 的“External Atomics Library”部分提供了一组库函数。

所以是的..唯一的解决方案是升级到 GCC 4.7

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-30T11:23:14.893

由于对此感到好奇，我自己在 Ubuntu 12.04、AMD 2.3 GHz、gcc 4.6.3 上对其进行了测试。

```
#if 1
#include <atomic>
std::atomic<bool> stop_(false);
#else
volatile bool stop_ = false;
#endif

int main(int argc, char **argv)
{
    long n = 1000000000;
    while (!stop_) {
        if (--n < 0)
            stop_ = true;
    }

    return 0;
} 
```

编译`g++ -g -std=c++0x -O3 a.cpp`

虽然，与@aleguna 的结论相同：

*   只是`bool`：

    > 真实 0m0.004s
    > 用户 0m0.000s
    > 系统 0m0.004s

*   `volatile bool`：

    > $ time ./a.out
    > real 0m1.413s
    > user 0m1.368s
    > sys 0m0.008s

*   `std::atomic<bool>`：

    > $ time ./a.out
    > real 0m32.550s
    > user 0m32.466s
    > sys 0m0.008s

*   `std::atomic<int>`：

    > $ time ./a.out
    > real 0m32.091s
    > user 0m31.958s
    > sys 0m0.012s

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T14:23:52.170

我的猜测是这是一个硬件问题。当您编写 volatile 时，您告诉编译器不要对变量进行任何假设，但据我了解，硬件仍会将其视为普通变量。这意味着变量将一直在缓存中。当您使用 atomic 时，您会使用特殊的硬件指令，这可能意味着每次使用该变量时都会从主内存中获取该变量。时间上的差异与这个解释是一致的。

# .net - 应用程序使用时如何保存图像文件？

> ID：13135835
> 
> 赞同：1
> 
> 时间：2012-10-30T09:15:48.980
> 
> 标签：.net, image, c#-4.0, windows-applications

我的应用程序的图片框控件中显示了一张图像。现在我想在我的应用程序正在运行并且该应用程序已经使用该图像时更新该图像。

我使用这行**代码**来更新我的徽标图像：**更新代码**

```
 public void showRow()
  {
      string _fileName = Application.StartupPath + "\\Logo" + ".png";

      using (var stream = new FileStream(_fileName, FileMode.Open, FileAccess.Read))
      {
          var img = Image.FromStream(stream);
          pbStoreLogo.Image = img;
      }
  }

  private void btnsave_Click(object sender, EventArgs e)
  {
      using (var m = new MemoryStream())
      {
          pbStoreLogo.Image.Save(m,System.Drawing.Imaging.ImageFormat.Png);
          var img = Image.FromStream(m);
          img.Save(Application.StartupPath + "\\Logo" + ".png");
      }
  } 
```

它通过异常：`A generic error occurred in GDI+.`

所以请建议我如何在运行时更改我的图像或为我提供此异常的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:21:53.830

要将`Image`应用程序中的对象保存到文件系统中的物理路径，您必须确保该文件没有被您的应用程序或任何其他应用程序使用。因此，您不仅要注意如何保存文件，还要注意如何将图像读取到图片框。

要释放物理资源，您必须将文件读取到流中，然后从流中形成图像，然后将图像分配给图片框。像这样：

```
string _fileName = Application.StartupPath + "\\Logo" + ".png";

using (var stream = new FileStream(_fileName, FileMode.Open, FileAccess.Read))
{
    var img = Image.FromStream(stream);
    pbStoreLogo.Image = img;
} 
```

在保存的同时：

```
using (var m = new MemoryStream())
{
    pbStoreLogo.Image.Save(m, ImageFormat.Png);
    var img = Image.FromStream(m);
    img.Save(_fileName);
} 
```

如果您将该文件作为项目中的资源文件，那么所有这些麻烦都不应该存在。你可以这样做：

```
pbStoreLogo.Image = Properties.Resources.Image1; 
```

和

```
pbStoreLogo.Image.Save(_fileName); 
```

[您可以在这个 SO question](https://stackoverflow.com/questions/1053052/a-generic-error-occurred-in-gdi-jpeg-image-to-memorystream)中找到更多信息。

# java - Java to php, Byte, Type, Array

> ID：13135837
> 
> 赞同：0
> 
> 时间：2012-10-30T09:15:55.260
> 
> 标签：java, php

Here is a small Java Code Snippet.

```
ConfigData[] cd = new ConfigData[1];
cd[0] = new ConfigData();
byte[] tmpbyte ={1,(byte)0x01};
cd[0].settmpdata(tmpbyte); 
```

"ConfigData" is my custom Type (int, Byte Array).

In my last thread i found the tip how to Build / work with a "ByteArray" in php. But this seems to be a question of the structure of those objects / array.

So.. How can i depict that in PHP.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:23:00.213

我希望这可以为您提供一些指导，就您可以在 PHP 中执行的操作以及与您的代码片段（代码经过测试）的关系而言：

```
<?php

// define class
class ConfigData
{
    var $intVal;
    var $tmpData;
}

$cData = new ConfigData();             // new ConfigData instance
$array[0] = $cData;                 // put it in a single element array
$array[0]->intVal = 5;                 // assign an integer to intVal
$array[0]->tmpData = array(1, 1, 2);  // assign an array of whatever to tmpData

foreach($array[0]->tmpData as $val)   // iterate through assigned array
    echo $val." ";                     // print array item (and append " " )

?> 
```

现在，您可能还想检查 PHP 中的字节操作是如何实现的。我建议你做一点谷歌搜索，也许查看官方手册。你的问题不够具体，所以我不能多说。

# android - Building separate Android modules with dexpreopt disabled

> ID：13135844
> 
> 赞同：10
> 
> 时间：2012-10-30T09:16:37.447
> 
> 标签：android, android-source, android-build, android-framework

For my thesis, I'm modifying the android framework and building the source (4.1.1 Jelly Bean). I can do a full build, but because this is very time consuming (I'm developing on a ubuntu 12.04 64bit virtual machine) I'd like to build separate modules.

For example: When doing changes to the location modules, it should be possible to just build the changed module, and make a new system image:

```
mmm frameworks/base
make snod 
```

But this doesn't work. Every time I try to boot, the new system image won't boot because of:

```
I/dalvikvm( 1696): DexOpt: mismatch dep signature for '/system/framework/framework.odex' 
```

After some research, I tried to disable dexpreopt with the enviroment variables

```
export $WITH_DEXPREOPT=false 
```

and

```
export $DISABLE_DEXPREOPT=true 
```

and doing a full rebuild with 'make installclean'. The full rebuild works, and the changes to the framework are present in the build. But after doing a new change, still 'mmm frameworks/base' and 'make snod' result in dexpreopt mismatch.

The build/core/makefile from 'make snod' also gives the warning: 'Warning: with dexpreopt enabled, you may need a full rebuild.', which comes from this line in the makefile:

```
ifeq (true,$(WITH_DEXPREOPT))
$(warning Warning: with dexpreopt enabled, you may need a full rebuild.)
endif 
```

This leads me to believe the $WITH_DEXPREOPT variable isn't correctly set or read? So far I haven't been able to get a bootable system image without doing a clean full rebuild. Is the procedure I follow the correct to disable dexpreopt, or are there any other ways to build separate modules after doing changes to the framework and getting a new system image?

Build target is 'full-eng'.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T08:00:45.490

显然 WITH_DEXPREOPT 环境变量被内部 WITH_DEXPREOPT 变量覆盖

```
build/target/board/generic/BoardConfig.mk 
```

将其更改为 false，或者根据 google 群组中的人员的说法，使用以下命令开始制作：

```
make showcommands WITH_DEXPREOPT=false 
```

成功了。构建特定模块并制作新系统映像现在会生成可引导构建。

（来源：[https](https://groups.google.com/d/topic/android-building/vJCkg8Yq9Ic/discussion) ://groups.google.com/d/topic/android-building/vJCkg8Yq9Ic/discussion ）

# char - 如何将字符转换为字节？

> ID：13135850
> 
> 赞同：-1
> 
> 时间：2012-10-30T09:16:54.773
> 
> 标签：char, type-conversion, byte

我有一个简单的问题。正如我们所知，它`Char`占用两个字节（16 位），`Byte`占用一个字节（8 位）。但是在许多编程语言中都有一个函数可以转换`Char`为`Byte`. 如何在不丢失任何东西的情况下转换`Char`为？`Byte`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:29:55.947

在 C# 和 java 中，char 是 16 位 Unicode 字符。在其他（较旧的？）语言（C、C++ 等）中， `char`s 是 ASCII 字符的 8 位表示。在这些语言中，在不丢失任何内容的情况下转换类型是有意义的。

在 C# 中，您可以将`char`s 转换为 s 的两倍`byte`，或者假设（确实如此）`char`您尝试转换的 s 是 8 位`char`s（查看 ASCII 表），写为 Unicode `char`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:07:13.830

这是不可能的。我认为没有任何语言带有这样的功能。比如Java有`String.getBytes`，C#有`Encoding.GetBytes`，他们得到的是`byte`s，不是`byte`。这种转换就像 C 中的从转换到转换`short[]`，`char[]`非常简单，没有操作，只是转换，整个对象的大小（字节总数）保持不变；没有任何损失。

# html - 使用 Nokogiri 以奇怪的编码解析 HTML

> ID：13135851
> 
> 赞同：0
> 
> 时间：2012-10-30T09:16:56.907
> 
> 标签：html, ruby, parsing, nokogiri

我不能使用 XPath，因为编码变得很奇怪。我希望你能帮我摆脱这个麻烦。

```
require "Nokogiri"
require "open-uri"
link = "http://www.arla.dk/Services/SearchService.asmx/RecipeResult?q=allRecipe&paging=6&include=&exclude=&area=recipeSearch&languageBranch=da"
doc = Nokogiri::HTML(open(link))
doc.xpath("//h2") 
```

该`xpath`方法返回一个空数组。看起来文档没有被正确解析。我认为这是由于正在解析的文件包含编码字符：

```
&lt;strong&gt;Frokost til 8&lt;/strong&gt;
&lt;ul&gt;&lt;li class='ingHeading'&gt;&lt;strong&gt;&lt;b&gt;Flade 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:09:49.027

响应是 XML，所以首先用 Nokogiri::XML 解析它：

```
xml = Nokogiri::XML open(link) 
```

然后第一个字符串包含一些 HTML，所以用 Nokogiri::HTML 解析它

```
doc = Nokogiri::HTML xml.at('string').text 
```

现在您可以进行搜索：

```
doc.xpath '//h2' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:00:46.057

如上所述，问题在于 HTML 已编码，这就是您看到转义序列的原因；例如，`&lt;`代替`<`. 要绕过它，请对 HTML 进行转义。

“[如何在 Ruby 中编码/解码 HTML 实体？](https://stackoverflow.com/questions/1600526/how-do-i-encode-decode-html-entities-in-ruby)基本上建议使用[htmlentities](http://htmlentities.rubyforge.org/)。

# jquery - jQuery Border Animation

> ID：13135852
> 
> 赞同：0
> 
> 时间：2012-10-30T09:17:02.100
> 
> 标签：jquery, css

I'm trying to animate a button click by using borders and jQuery animate function.

```
jQuery( '#sendForm' ).hover( function (){
    jQuery( this ).animate({
        borderTopWidth: "5px",
        borderBottomWidth: "0px"
    }, 'fast' );
}, function (){
    jQuery( this ).animate({
        borderTopWidth: "0px",
        borderBottomWidth: "5px"
    }, 'fast' );
}); 
```

From some reason it doesn't animate the top border only the bottom.

**Update**

```
.submitButton { 
    padding: 10px; 
    border: 0px; 
    border-bottom: 5px solid #1B5A81; 
    background-color: #267DAD; 
    color: white; 
    font-weight: bold; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:24:30.823

[如果你愿意，你也可以使用 CSS3 过渡演示](http://jsfiddle.net/kPF4E/1/)来完成同样的事情

HTML

```
<button>BlahBlah</button> 
```

CSS

```
 button {
   border-top: 5px solid #ff0000;
   border-bottom: 0px solid #ff0000;
   transition: border-top 2s, border-bottom 2s;
   -moz-transition: border-top 2s, border-bottom 2s; /* Firefox 4 */
   -webkit-transition: border-top 2s, border-bottom 2s;; /* Safari and Chrome */
   -o-transition: border-top 2s, border-bottom 2s; /* Opera */
}

button:hover {
   border-top: 0px solid #ff0000;
   border-bottom: 5px solid #ff0000;
   transition: border-top 2s, border-bottom 2s;
   -moz-transition: border-top 2s, border-bottom 2s; /* Firefox 4 */
   -webkit-transition: border-top 2s, border-bottom 2s;; /* Safari and Chrome */
   -o-transition: border-top 2s, border-bottom 2s; /* Opera */
} 
```

CSS3 过渡[w3 链接](http://www.w3.org/TR/css3-transitions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:26:16.930

这是你想要的吗？

[jsfiddle](http://jsfiddle.net/uZPPj/)

我将CSS更改为

```
.submitButton { 
    padding: 10px; 
    border-bottom: 5px solid #1B5A81; 
    border-top: 0px solid #1B5A81; 
    background-color: #267DAD; 
    color: white; 
    font-weight: bold; 
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:26:58.863

我设法找到了问题，我必须在 CSS 中定义边框类型和颜色：

固定的CSS：

```
.submitButton
        {
            padding: 10px;
            border: 0px;
            border-top: 0px solid white;
            border-bottom: 5px solid #1B5A81;
            background-color: #267DAD;
            color: white;
            font-weight: bold;
        } 
```

感谢所有的帮助:)

# ios - When an iphone Application install ,is there any package generated?

> ID：13135864
> 
> 赞同：0
> 
> 时间：2012-10-30T09:17:32.670
> 
> 标签：ios

I want to know that when i run iphone application in the simulator..that means it is installing,...so is there any package generated while installing, I want to know the whole process behind installation of an iphone application.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:59:14.327

在 iOS 模拟器中从 Xcode 运行 iOS 应用程序时，将创建一个应用程序包并将其放置在此处（对于 iOS 5.1 模拟器）：

> ~/Library/Application Support/iPhone Simulator/5.1/Applications/

*.app*包被放置在一个文件夹中（其名称是一个随机生成的标识符）。您可以右键单击*.app*包并选择“显示包内容”以查看捆绑的资源。包的结构与安装在设备上的非常相似，但二进制文件是为 i386（而不是 armvX）编译的，并且在模拟器中没有代码签名。

# informatica-powercenter - Informatica 如何在 Datastage 中完成链接收集器的工作？

> ID：13135866
> 
> 赞同：1
> 
> 时间：2012-10-30T09:17:40.430
> 
> 标签：informatica-powercenter, informatica

是否可以使用其预先构建的转换在 Informatica 的 Datastage 中复制链接收集器的功能？

我在同一个映射中有 4 个不同的流。我想要所有流的联合。它可能彼此相关，也可能不相关。因此我没有一个共同的专栏。我只想将这 4 个流中的值转储到 informatica 中的单个列中。有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:02:55.857

该`Union`转换允许您定义多个输入组和输入端口（在您的情况下为 4 个具有单个端口的组）并将源行合并在一起。

# jquery - 根据 jquery 中的输入属性标题值添加 div 代码

> ID：13135868
> 
> 赞同：0
> 
> 时间：2012-10-30T09:17:46.327
> 
> 标签：jquery

我想根据输入 attr 标题添加 div，我的意思是说我想在我有输入 title=date-of-graduation 的地方添加 div

```
 <div class="personalisation_input">
    <input type="text" value=""  title="date-of-graduation">
  </div>
  <div class="personalisation_input">
    <input type="text" value=""  title="date-of-age">
  </div>
  <div class="personalisation_input">
    <input type="text" value=""  title="date-of-graduation">
  </div> 
```

**需要这样的输出**

```
 <div class="personalisation_input">
    <input type="text" value=""  title="date-of-graduation">
    <div>test</div>
  </div>
  <div class="personalisation_input">
    <input type="text" value=""  title="date-of-age">
  </div>
  <div class="personalisation_input">
    <input type="text" value=""  title="date-of-graduation">
    <div>test</div>
  </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:19:19.813

您可以使用[“属性等于”选择器](http://api.jquery.com/attribute-equals-selector/)来选择正确的`input`元素，以及在[`.after()`](http://api.jquery.com/after/)其后立即插入一些内容的方法：

```
$("input[title='date-of-graduation']").after("<div>test</div>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:21:28.170

```
$('.personalisation_input input').each(function(){
 if($(this).attr('title') == 'date-of-graduation'){
     $(this).after('<div>Test</div>')
 }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:24:11.847

​​​

```
 $("input[title='date-of-graduation']").parent().append("<div>test</div>");​​​​​​​​​​​​​​​​​​​ 
```

# git - Hudson SSH 密钥权限被拒绝

> ID：13135872
> 
> 赞同：2
> 
> 时间：2012-10-30T09:17:59.017
> 
> 标签：git, ssh, hudson, centos

我通过在 /etc/sysconfig/hudson 中将配置更改为“HUDSON_USER=myuser”，以自定义用户身份运行 Hudson 服务（守护程序）。我已确认 SSH 服务器添加了 /home/myuser/.ssh 中的 RSA 密钥。

当我通过以“myuser”身份登录系统来运行 Hudson 时，它可以工作并且可以从 git 存储库中获取代码。

```
nohup java -jar hudson.war --httpPort=8081 > /home/myuser/hudson.out 2>&1 & 
```

当我运行 Hudson 守护程序时，然后在运行构建时，我无法从 git 存储库中获取源代码，并显示以下日志并显示 Permission denied 错误。

```
Started by user anonymous
Checkout:workspace / /home/myuser/.hudson/jobs/test/workspace - hudson.remoting.LocalChannel@6083969e
Using strategy: Default
Last Built Revision: Revision a0d97d4d7bf5ee08124f76e5eb98bab354754cad (origin/master)
Checkout:workspace / /home/myuser/.hudson/jobs/test/workspace - hudson.remoting.LocalChannel@6083969e
Fetching changes from the remote Git repository
Fetching upstream changes from ssh://myuser@10.10.10.10:20/home/git-repos/test-proj.git
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
ha:AAAAWB+LCAAAAAAAAABb85aBtbiIQSmjNKU4P08vOT+vOD8nVc8DzHWtSE4tKMnMz/PLL0ldFVf2c+b/lb5MDAwVRQxSaBqcITRIIQMEMIIUFgAAckCEiWAAAAA=ERROR:  (Underlying report) : Error performing command: /usr/bin/git fetch -t ssh://myuser@10.10.10.10:20/home/git-repos/test-proj.git +refs/heads/*:refs/remotes/origin/*
Command "/usr/bin/git fetch -t ssh://myuser@10.10.10.10:20/home/git-repos/test-proj.git +refs/heads/*:refs/remotes/origin/*" returned status code 128: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).
fatal: The remote end hung up unexpectedly

ha:AAAAWB+LCAAAAAAAAABb85aBtbiIQSmjNKU4P08vOT+vOD8nVc8DzHWtSE4tKMnMz/PLL0ldFVf2c+b/lb5MDAwVRQxSaBqcITRIIQMEMIIUFgAAckCEiWAAAAA=ERROR: Could not fetch from any repository
ha:AAAAWB+LCAAAAAAAAABb85aBtbiIQSmjNKU4P08vOT+vOD8nVc8DzHWtSE4tKMnMz/PLL0ldFVf2c+b/lb5MDAwVRQxSaBqcITRIIQMEMIIUFgAAckCEiWAAAAA=FATAL: Could not fetch from any repository
ha:AAAAWB+LCAAAAAAAAABb85aBtbiIQSmjNKU4P08vOT+vOD8nVc8DzHWtSE4tKMnMz/PLL0ldFVf2c+b/lb5MDAwVRQxSaBqcITRIIQMEMIIUFgAAckCEiWAAAAA=hudson.plugins.git.GitException: Could not fetch from any repository
        at hudson.plugins.git.GitSCM$3.invoke(GitSCM.java:887)
        at hudson.plugins.git.GitSCM$3.invoke(GitSCM.java:845)
        at hudson.FilePath.act(FilePath.java:758)
        at hudson.FilePath.act(FilePath.java:740)
        at hudson.plugins.git.GitSCM.gerRevisionToBuild(GitSCM.java:845)
        at hudson.plugins.git.GitSCM.checkout(GitSCM.java:622)
        at hudson.model.AbstractProject.checkout(AbstractProject.java:1483)
        at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:507)
        at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:424)
        at hudson.model.Run.run(Run.java:1366)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        at hudson.model.ResourceController.execute(ResourceController.java:88)
        at hudson.model.Executor.run(Executor.java:145) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:12:57.520

我已将 RSA 密钥更改为无密码并添加到 Github 服务器。它解决了将 hudson 作为 init.d 服务运行时从 Git 获取源的问题。

此外，这就是我向 Github 添加密钥的方式，适用于正在搜索 HOW TO [https://help.github.com/articles/generating-ssh-keys的任何人](https://help.github.com/articles/generating-ssh-keys)

# android - Why getView() of BaseAdapter showing image multiple times?

> ID：13135873
> 
> 赞同：0
> 
> 时间：2012-10-30T09:17:58.777
> 
> 标签：android, list, listview, baseadapter

I'm using the following code to make a custom `listview`. I have to show image dynamically, so all the images are added to this in Linearlayout. The problem is that these dynamic images add multiple times. Below is the code of my `getView()`.

```
 LinearLayout fbpiclayout = null;

        if (convertView == null)
            vi = inflater.inflate(R.layout.popular_event_list, null);

         fbpiclayout = (LinearLayout) vi
                .findViewById(R.id.fbpic_layout);

        ArrayList<String> list=  mDbManager
                .getAllValuesComingSoonFriendList(facebookEventList
                        .get(position).getEventId());

        int height = 0;

        for(int i=0;i<list.size();i++)
        {
            if(i<3)
            {
                String friendPics = "http://graph.facebook.com/"
                        + list.get(i)
                        + "/picture?type=large";

                Log.d("Friends","list no "+i+" "+mDbManager
                        .getFacebookFriendName(list.get(i)));

                ImageView fbFriendimage = new ImageView(getActivity());
                LinearLayout.LayoutParams vp = new LinearLayout.LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
                vp.setMargins(3, 0, 3, 3);
                fbFriendimage.setLayoutParams(vp);
                fbFriendimage.setAdjustViewBounds(true);
                fbFriendimage.getLayoutParams().height = height;

                fbFriendimage.getLayoutParams().width = width_iv;
                fbFriendimage.setScaleType(ImageView.ScaleType.CENTER_CROP);
            //  image.setImageBitmap(bm);
                imageLoader.DisplayImage(friendPics, fbFriendimage);
                fbpiclayout.addView(fbFriendimage, vp);     

            }
        } 
```

Kindly suggest me on that issue. Thanks in Advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:27:23.847

试试下面的代码：

```
LinearLayout fbpiclayout = null;

        if (convertView == null)
            vi = inflater.inflate(R.layout.popular_event_list, null);

         fbpiclayout = (LinearLayout) vi
                .findViewById(R.id.fbpic_layout);

          //if the convertView was not null it would have the child view you added the 
          //  last time liner layout was used. So remove the added child view.  
          fbpiclayout.removeAllViews();

        ArrayList<String> list=  mDbManager
                .getAllValuesComingSoonFriendList(facebookEventList
                        .get(position).getEventId());

        int height = 0;

        for(int i=0;i<list.size();i++)
        {
            if(i<3)
            {
                String friendPics = "http://graph.facebook.com/"
                        + list.get(i)
                        + "/picture?type=large";

                Log.d("Friends","list no "+i+" "+mDbManager
                        .getFacebookFriendName(list.get(i)));

                ImageView fbFriendimage = new ImageView(getActivity());
                LinearLayout.LayoutParams vp = new LinearLayout.LayoutParams(
                        LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
                vp.setMargins(3, 0, 3, 3);
                fbFriendimage.setLayoutParams(vp);
                fbFriendimage.setAdjustViewBounds(true);
                fbFriendimage.getLayoutParams().height = height;

                fbFriendimage.getLayoutParams().width = width_iv;
                fbFriendimage.setScaleType(ImageView.ScaleType.CENTER_CROP);
            //  image.setImageBitmap(bm);
                imageLoader.DisplayImage(friendPics, fbFriendimage);
                fbpiclayout.addView(fbFriendimage, vp);     

            }
        } 
```

EDIT1：尝试使用智能图像视图[http://loopj.com/android-smart-image-view/](http://loopj.com/android-smart-image-view/)来提高性能....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:29:18.297

不要使用那个循环。将该列表的大小放入 getCount() 中。它会正常工作

# c++ - Code compiles on g++ with warning but gives error for same code on clang3.1(Xcode 4.3.3)

> ID：13135875
> 
> 赞同：4
> 
> 时间：2012-10-30T09:18:10.960
> 
> 标签：c++, macos

Following line compiles successfully on g++ but gives error on clang::

```
static_assert(tBits <= sizeof(ULONG)*8, "This is IO method"); 
```

g++ warning ::

> there are no arguments to 'static_assert' that depend on a template parameter, so a declaration of 'static_assert' must be available

clang error ::

> use of undeclared identifier 'static_assert'; did you mean 'static_cast'?

please help me out.

Function declaration from comment:

```
template < size_t tBits >
HRESULT DoIO( std::bitset< tBits >& bitsetToSerialize ) const 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T05:06:42.563

“static_assert”是在 C++11 中作为语言关键字引入的——不是函数或宏。

两个编译器都给你“我不知道这个函数”警告/错误。

为了让编译器在您使用“static_assert”时为您提供“我不知道这个函数”，编译器不得使用 C++11 支持 (-std=c++11) 进行编译。

为了证明这一点，我采用了以下代码：

```
#include <bitset>

template<size_t tBits>
int DoIO(std::bitset<tBits>& /*bitsetToSerialize*/)
{
    static_assert(tBits <= sizeof(unsigned long) * 8, "tBits is too big.");
    return tBits;
} 
```

然后我用 GCC 4.7.3 编译它，我得到了以下错误：

```
osmith@olivia64 ~/src $ g++ -o sa.o -c sa.cpp
sa.cpp：在函数'int DoIO(std::bitset<_Nb>&)'中：
sa.cpp:6:78: 错误：“static_assert”没有依赖于模板参数的参数，因此“static_assert”的声明必须可用 [-fpermissive]
sa.cpp:6:78: 注意：（如果你使用'-fpermissive'，G++ 将接受你的代码，但不允许使用未声明的名称）

```

然后我在启用 C++11 支持的情况下编译它并且编译没有问题：

```
osmith@olivia64 ~/src $ g++ -std=c++11 -o sa.o -c sa.cpp -Wall
osmith@olivia64 ~/src $

```

所以，然后我用 Clang 编译它

```
osmith@olivia64 ~/src $ clang++ -o sa.o -c sa.cpp
sa.cpp:6:9：错误：使用未声明的标识符“static_assert”；你是说'static_cast'吗？
        static_assert(tBits <= sizeof(unsigned long) * 8, "tBits 太大了。");
        ^
产生 1 个错误。

```

最后我使用 C++ 11 支持的 Clang 编译它，它编译得很好。

```
osmith@olivia64 ~/src $ clang --version
Ubuntu clang 版本 3.2-1~exp9ubuntu1 (tags/RELEASE_32/final) (基于 LLVM 3.2)
目标：x86_64-pc-linux-gnu
线程模型：posix
osmith@olivia64 ~/src $ clang++ -std=c++11 -o sa.o -c sa.cpp
osmith@olivia64 ~/src $

```

可以肯定的是，让编译器有机会帮助我们并打开“-Wall”：

```
osmith@olivia64 ~/src $ g++ -Wall -o sa.o -c sa.cpp
sa.cpp:6:9：警告：标识符“static_assert”是 C++11 [-Wc++0x-compat] 中的关键字
sa.cpp：在函数'int DoIO(std::bitset<_Nb>&)'中：
sa.cpp:6:78: 错误：“static_assert”没有依赖于模板参数的参数，因此“static_assert”的声明必须可用 [-fpermissive]
sa.cpp:6:78: 注意：（如果你使用'-fpermissive'，G++ 将接受你的代码，但不允许使用未声明的名称）

```

# ios - My IOS orientation acting very strange and won't listen to any programing-code?

> ID：13135878
> 
> 赞同：0
> 
> 时间：2012-10-30T09:18:15.797
> 
> 标签：ios, orientation, uiinterfaceorientation, portrait, info-plist

As the title describes I am having a big "what the ***** is this" at my app atm. It seems I can't get the control over the orientation at all in the different slides. I can only manage the orientation in one way, via the info-plist file. The problem is, info-plist file sets the orientation for the whole app and I am not interested in that.In some slides I want to allow Landscape left/right and others only Portrait and this is not doable vie info-plist?

I have tried my best to understand the problem but I can not say I have gained any bigger "aha moment" so far. I am using UINavigatorbar and Tabbar in my IOS-app which may occur the problem. How can I make the app to start listening to the code in each-file so I can manage the orientation localy ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:26:23.987

您使用的是 iOS 6 吗？如果是这样，该`-shouldAutorotateToInterfaceOrientation`方法已被弃用。

您现在必须重写`-supportedInterfaceOrientations`和`-preferredInterfaceOrientationForPresentation`方法才能管理屏幕方向。您可以在全局范围内或在单个视图控制器中执行此操作。

有关更多详细信息，请参阅[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation%3a)。

# android - Drag and move multiple objects

> ID：13135880
> 
> 赞同：0
> 
> 时间：2012-10-30T09:18:21.077
> 
> 标签：android, touch, drag, move

After observing SDK samples, testing myself and searching a lot on stack overflow.Can't find any example with multiple object moved by touch. Any ideas ?

# android - 在activity中插入两个activity时出错

> ID：13135885
> 
> 赞同：1
> 
> 时间：2012-10-30T09:18:32.253
> 
> 标签：android

在我的 MounthActivity 中，有两个活动。

第一个是 MonthChart，第二个是测试。

我的代码如下：

```
package com.h.callsta;

    import android.app.ActivityGroup;
    import android.app.LocalActivityManager;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.view.Window;
    import android.widget.LinearLayout;

public class MonthActivity extends ActivityGroup{

    private LinearLayout lo1, lo2;   

       LocalActivityManager lam = getLocalActivityManager();

public void onCreate(Bundle savedInstanceState) {   

    super.onCreate(savedInstanceState);   
    setContentView(R.layout.activity_month);
    lo1 = (LinearLayout) findViewById(R.id.lo1);  
    lo2 = (LinearLayout) findViewById(R.id.lo2);
    start_activity();

      }

public void start_activity(){

   Window win1 = lam.startActivity("0",new Intent(MonthActivity.this, MonthChart.class));
   View view1 = win1.getDecorView();
   lo1.addView(view1);  
   Window win2 = lam.startActivity("1",new Intent(MonthActivity.this, test.class));
   View view2 = win2.getDecorView();
   lo2.addView(view2);

     }

} 
```

运行时仅显示`MonthChart`，而`test`没有

但是，如果我更改它们的顺序，Test 活动将是第一个，MonthChart 将是第二个，并且它们变得正确可见，为什么？

我猜是因为 MonthChart 太长了，是吗？

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:43:13.027

我认为您应该使用[Fragment](http://developer.android.com/guide/components/fragments.html)概念，它们很容易成为您可以使用的多种活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:22:21.920

`startActivity`只会显示位于[Activity Stack](https://developer.android.com/guide/components/tasks-and-back-stack.html)顶部的 Activity 。因此调用该`Activity.startActivity`方法将只显示其中一个。

你到底想在这里实现什么？

# sql - 在ms sql中创建总行显示列项的总差值

> ID：13135891
> 
> 赞同：-1
> 
> 时间：2012-10-30T09:18:56.017
> 
> 标签：sql, sql-server-2008

我正在尝试创建一个总行，该行从列中获取项目并显示总字段中的差异而不是总和。这在 SQL 中甚至可能吗？

```
SELECT P.Part_Number, P.Units_On_Hand 
FROM Part AS P 
WHERE P.Part_Number IN ('AX12', 'AZ52') 
```

这是我当前必须显示需要处理的项目的查询。如何修改它以合并一个总列以显示差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:27:58.970

```
;with cte as
(
    select part_number, SUM(units_on_hand) total
    from yourtable
    where part_number IN ('AX12', 'AZ52')
    group by part_number
)
    select t1.part_number, t2.part_number, abs(t1.total-t2.total)
    from cte t1
        inner join cte t2
        on t1.part_number<t2.part_number 
```

# xaml - Show different content-related templates for ListView item

> ID：13135893
> 
> 赞同：0
> 
> 时间：2012-10-30T09:19:01.003
> 
> 标签：xaml, listview, windows-8, datatemplate

I have this data structure:

```
Post {
       attachments { }, 
       postText
} 
```

To display this, i am using ListView

```
<ListView ItemsSource="{Binding Posts}"
          ItemTemplate="{StaticResource PostTemplate}"
          Width="Auto"
          Height="Auto" /> 
```

The problem is, when i am trying to display a list of attachments inside each post. Every attachment is simply typed link for some typed content (video/audio/image)

```
Attachment {
    type: video,
    url: urlToVideo
} 
```

How can i display context-based template for rendering all kind of this content in attachment?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:07:51.363

As a wpf developer my first answer was to use triggers but according to this article [this](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/77604041-b991-4f1e-9adb-78c701ac4d9a/) is not an option for windows-8 app. But as you can see there is a way to do that using `DataTemplateSelector`. I assume that you have created one template for one attachment type and you display attachments as some `ItemsControl` so simply fallow this [article](http://www.comyoucom.com/implementing-a-custom-datatemplateselector-in-winrt/).

# expressionengine - 处理列表中布局更改的理想方法

> ID：13135897
> 
> 赞同：3
> 
> 时间：2012-10-30T09:19:12.357
> 
> 标签：expressionengine

所以我愚蠢地设计了一个最近的文章列表，世界上一切都很好，但前 2 个条目 html 与其余条目明显不同。

我还没有打开一行代码，因此非常感谢任何人提供的任何建议。

简单地说， ul 看起来像：

```
<li class="1of2"> /* It's number 1 – give it a class to identify it as special */
<h1>{title}</h1>
<p>{short_desc}</p>
</li>
<li class="1of2"> /* It's number 2 – give it a class to identify it as special */
<h1>{title}</h1>
<p>{short_desc}</p>
</li>
<li> /* It's not number 1 or 2 – ie. every other item, NO class per se */
<h1>{title}</h1>
<p>{short_desc}</p>
</li> 
```

如果您想象所有条目的 3 列网格，但前 2 个条目各有 1.5 列。这里有点面条划痕，任何想法都感激地投票。

**PS。如果有帮助，我将使用 Stash！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T10:49:31.313

只需根据 的值输出类名`{count}`。`<li>`为了简单起见，我在这里输出了整个开始标记，但您可以只输出类属性或类名本身。

```
{if count<=2}
    <li class="special">
{if:else}
    <li>
{/if}
        <h1>{title}</h1>
        ... etc.
    </li> 
```

顺便说一句，我不认为你可以有以数字开头的类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:27:09.667

如果您希望前 2 个中的每一个都具有唯一的类名，我会这样做：

```
<li{if count<=2}class="top{count}"{/if}> 
```

那将输出

```
<li class="top1">...
<li class="top2">...
<li>... 
```

如果您希望前 2 个项目具有相同的类别：

```
<li{if count<=2}class="whateveryouwant"{/if}> 
```

这将输出

```
<li class="whateveryouwant">...
<li class="whateveryouwant">...
<li>... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:58:09.020

你不能`{if count == "1|2"}class="whatever"{/if}`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:37:43.810

似乎您要求两个独特的课程，一个用于第一个条目，一个用于第二个条目。在这种情况下，这将起作用：

```
{if count == 1}
    <li class="first">
        <h1>{title}</h1>
        <p>{short_desc}</p>
    </li>
{if:else if count == "2"}
    <li class="second">
        <h1>{title}</h1>
        <p>{short_desc}</p>
    </li>
{if:else}
    <li>
        <h1>{title}</h1>
        <p>{short_desc}</p>
    </li>
{/if} 
```

此外，以数字开头的类名也不会生效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T17:07:44.143

如果没有“其他”类需要条件的 if:else 部分，您也可以使用简单的条件来做到这一点：

```
<li{if count == "1"} class="first"{/if}{if count == "2"} class="second"{/if}">
    <h1>{title}</h1>
    <p>{short_desc}</p>
</li> 
```

这假设您没有任何其他差异，例如一个选项与另一个选项中的不同自定义字段，MediaGirl 的建议会更优雅地处理。如果它们之间的唯一区别是班级分配，这是另一种选择。

# asp.net - 存放自定义 IPrincipal 的地方

> ID：13135903
> 
> 赞同：0
> 
> 时间：2012-10-30T09:19:37.620
> 
> 标签：asp.net

我正在使用我的自定义 IPrincipal，因为我需要一些额外的字段，例如 id 和密码（登录到外部 wcf 服务）。我在 Application_PostAuthenticateRequest 事件中设置主体，但必须在每个请求上完成。我想将它缓存在某个地方，但最好的解决方案是什么？会话不可用。我有一个密码，所以我不想使用 FormsAuthenticationTicket，即使它是加密的。HttpContext.Current.Items 仅存储一个请求的值。对象应用程序和缓存可用于每个用户。其他的可能性是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:36:50.603

存储可能无限量的自定义信息的最佳选择是 cookie。但是请记住，Forms cookie 的大小是有限的，如果超出大小，基础架构将无法正常工作。

一种可能的方法是切换到由`SessionAuthenticationModule`. 如果您使用表单身份验证，我已经写了一篇关于如何无缝切换到此模块的博客：

[http://netpl.blogspot.com/2012/09/forms-authentication-revisited.html](http://netpl.blogspot.com/2012/09/forms-authentication-revisited.html)

[http://netpl.blogspot.com/2012/09/sessionauthenticationmodule-and-dynamic.html](http://netpl.blogspot.com/2012/09/sessionauthenticationmodule-and-dynamic.html)

# tsql - 不能使用 t-sql contains 短词

> ID：13135905
> 
> 赞同：1
> 
> 时间：2012-10-30T09:19:47.010
> 
> 标签：tsql, contains

我用函数调用我的语句`CONTAINS`，但有时它不会返回正确的记录，例如我想返回包含在一个字段中的单词'Your'的行：

```
SELECT [Email]
      ,[Comment]
  FROM [USERS]
  WHERE CONTAINS(Comment, 'Your') 
```

尽管此字段包含此单词，但它给出 mi 0 结果（与“as”、“to”、“was”、“me”相同）。当我使用“给定”而不是“你的”时，我会收到一个结果。是否有可能无法与 一起使用的单词列表`CONTAINS`？或者也许这个词太短了（当我使用“名称”时，我会收到结果）？作品“你的”是在现场的开始`Comment`。

该字段的类型为“文本”并启用了全文索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:28:18.677

你提到的那些词是“停用词”；由于它们的普遍性（因此对搜索毫无意义），它们被明确排除在全文搜索中的索引和搜索之外。例如，在搜索 Google 时，您会注意到同样的事情。

可以编辑列表，但我会避免这样做，除非可能会在其中*添加*单词；恕我直言，列表中的单词选择得非常好，因为它们在搜索中缺乏实用性。

# ios - heightForRowAtIndexPath 无法识别方向

> ID：13135906
> 
> 赞同：1
> 
> 时间：2012-10-30T09:20:11.710
> 
> 标签：ios, uitableview, orientation

我有一个 tableView，我必须根据设备是纵向还是横向来定义不同的单元格高度，但似乎这种方法无法识别设备方向。此方法不起作用：

```
 -(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

  UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice]orientation];//here doesn't recognize the orientation

 if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){
     if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation== UIInterfaceOrientationPortraitUpsideDown) {
         self.tableView.rowHeight =33.33333;

     }
     else if (deviceOrientation== UIInterfaceOrientationLandscapeRight || deviceOrientation==UIInterfaceOrientationLandscapeLeft){

         self.tableView.rowHeight = 16.333333;
     }
 }

 else {
     if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation== UIInterfaceOrientationPortraitUpsideDown){
         self.tableView.rowHeight = 66.66666;

     }else if (deviceOrientation== UIInterfaceOrientationLandscapeRight || deviceOrientation==UIInterfaceOrientationLandscapeLeft){
         self.tableView.rowHeight = 33.333333;

     }

 }
 return self.tableView.rowHeight;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:44:10.527

采用：

```
UIDeviceOrientation deviceOrientation = [UIApplication sharedApplication].statusBarOrientation; 
```

识别 statusBar 方向，而不是：

```
UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice]orientation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:26:57.570

使用单例类方法 UIDeviceOrientation deviceOrientation = [UIApplication sharedApplication].statusBarOrientation];

# junit - 单元测试春季批处理作业

> ID：13135909
> 
> 赞同：5
> 
> 时间：2012-10-30T09:20:17.667
> 
> 标签：junit, spring-batch

在 Spring Batch 作业中测试以下场景的方法是什么：

1）一个独立的tasklet在spring批处理作业的一个步骤中运行。

2) 一个由几个步骤组成的作业，其中一些步骤具有 itemreader、itemprocessor、itemwriters，而一些步骤具有 tasklet。

3) itemreader，其中对 item reader 的输入查询是一个非常复杂的 sql 查询，具有来自许多表的连接 - 这种情况不允许清空所有使用的表并用虚拟数据填充它们以进行测试。换句话说，在现实世界中可能存在无法清空表进行测试的情况。在这种情况下应该采取什么方法？

如果我在这个论坛上得到关于要采取的方法的一点帮助，我想准备一个示例套件，其中包含有关测试具有不同工作场景的 spring 批处理作业的示例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T10:05:53.293

很难对 spring 批处理作业进行“单元”测试，纯粹是因为与外部资源（例如数据库或文件等）的交互太多。我的方法有两个级别：

tasklet 中的各个方法正常进行单元测试，我只是直接从 JUnit 测试中调用这些方法，并使用通常的模拟或存根。

其次，我通过直接调用 main 方法从 JUnit 测试中运行批处理，并配备所有必要的基础设施。对于我的批处理作业，我需要一个数据库和一些输入文件。我的 JUnit 测试将该测试的所有必要文件复制到一个临时目录（我通常使用 maven `target/it`）以及一个数据库（我的 MySQL 数据库的副本以 HSQLDB 格式保存）。然后我`Main.main()`直接用正确的参数调用，让批处理运行然后检查结果，检查是否生成了正确的文件，数据库是否已正确更改等。

作为一种工作方式，这有几个优点。

1.  我可以从 Eclipse 运行这些测试，从而缩短了调试周期，因为我不需要每次都构建完整的包来测试它。
2.  它们很容易合并到构建中，我只是将它们包含在 maven 的故障安全插件中。

有几个警告：

您需要在 SecurityManager 中运行 main 方法。如果您的 main 调用 System.exit()，您不希望 JVM 停止。有关 SecurityManager 的示例，请参阅[org.junit.tests.running.core.MainRunner](https://github.com/KentBeck/junit/blob/master/src/test/java/org/junit/tests/running/core/MainRunner.java)。这被称为：

```
Integer exitValue = new MainRunner().runWithCheckForSystemExit(new Runnable() {
    public void run() {
    Main.main(new String[] {});
  }
}); 
```

使用上述方法，您可以断言批处理调用 System.exit() 在失败时使用正确的值，也允许测试失败条件。

其次，您可以从 JUnit 测试中进行大量设置，但不能全部完成，因此，例如，如果您需要 FTP 服务器，我通常在故障安全插件运行之前从 maven 而不是 JUnit 启动它. 有时这可能有点繁琐。

# c# - 在单独的线程上运行自己的类

> ID：13135915
> 
> 赞同：1
> 
> 时间：2012-10-30T09:20:25.297
> 
> 标签：c#

我想在另一个线程中运行一个自己的类，但是如果我这样做了，我就不能使用我的，例如，在 a 中的标签`EventHandler`，我该如何避免这种情况？

这就是我的代码的样子：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Ts3_Movearound
{
    public partial class Form1 : Form
    {
        TS3_Connector conn = new TS3_Connector();
        Thread workerThread = null;
        public Form1()
        {
            InitializeComponent();
            conn.runningHandle += new EventHandler(started);
            conn.stoppedHandle += new EventHandler(stopped);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //System.Threading.Thread connw = new System.Threading.Thread(conn);
            workerThread = new Thread(conn.Main);
            workerThread.Start();
        }

        public void started(Object sender, EventArgs e)
        {
            label1.Text = "Status: Running!";
        }
        public void stopped(Object sender, EventArgs e)
        {
            label1.Text = "Status: Stopped!";
        }
    }
} 
```

这就是错误：

> *InvalidOperationExpetion in Line "label1.Text = "Status: Running!";"*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T09:23:34.013

您只能通过 UI 线程更新控件。使用 label1.Invoke() 来做到这一点：

```
label1.Invoke((MethodInvoker)delegate {
    label1.Text = "Status: Running!";"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T10:10:04.503

我会考虑为此使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。然后，您使用以下内容：

1）在调用 RunWorkerAsync 之前，您将标签设置为运行，因为没有线程问题。2）如果您设置任何控件使用，则在调用 RunWorkerAsync 后：

```
 label1.Invoke(new Action(() => label1.Text = @"Status: Running!")); 
```

3) 进程完成后，您可以通过将方法分配给 RunWorkerCompleted 事件来将标签设置为停止。这个方法应该没有线程问题，因为它在主线程上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:24:21.117

SO有很多关于它的数据。我为你找到了一些：

[您可以从另一个线程访问 UI 元素吗？（不设置）](https://stackoverflow.com/questions/10450750/can-you-access-ui-elements-from-another-thread-get-not-set)

[如何在另一个线程中访问 GUI 元素？](https://stackoverflow.com/questions/6507111/how-do-i-access-gui-elements-in-another-thread)

[如何从 WPF 中的 BackgroundWorker 线程直接访问 UI 线程？](https://stackoverflow.com/questions/1775843/how-to-directly-access-the-ui-thread-from-the-backgroundworker-thread-in-wpf)

# apache - 使用 .htaccess 重定向

> ID：13135924
> 
> 赞同：-2
> 
> 时间：2012-10-30T09:21:04.760
> 
> 标签：apache, .htaccess

在我的服务器根目录中，我有一个名为“repos”的目录。我想要像“server-name/repos/identifier”这样的请求来调用“repos/index.php?id=identifier”，其中标识符是用户可以选择的。

如何使用 .htaccess 完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:30:09.223

您可以将这些规则放在文档根目录中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?repos/(.*)$ /repos/index.php?id=$1 [L,QSA] 
```

或者如果您希望将规则放在`/repos`目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteBase /repos/
RewriteRule ^(.*)$ index.php?id=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:35:59.407

您可以将这些规则放在`.htaccess`根目录的文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^repos/(.+) /repos/index.php?id=$1 
```

# rdf - 基于本体的语义网生成工具

> ID：13135927
> 
> 赞同：3
> 
> 时间：2012-10-30T09:21:13.033
> 
> 标签：rdf, semantics, jena, ontology, protege

在 protege IDE 中创建本体和使用 jena 在 netbeans 中创建 RDf/本体有什么区别？

我正在使用本教程 [http://jena.sourceforge.net/tutorial/RDF_API/](http://jena.sourceforge.net/tutorial/RDF_API/) 使用 JENA 在 netbeans 中创建 RDF。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:15:40.870

对于创建本体的人来说，这完全是为了方便。使用 Protégé 创建本体不需要任何编程知识，并且一旦您习惯了界面，就可以非常快速和轻松。但是，您无法自动化该过程，例如将 CSV 或其他数据源转换为 RDF。使用 Jena，创建本体更难（您必须编写 Java 代码，而不仅仅是指向和单击 GUI），但最终结果更容易重复且更容易自动化。

然而，归根结底，就它们在 OWL 中可以表达的内容而言，任何一种方法创建的本体都是等价的。

# c++ - 这段代码有意义吗？

> ID：13135929
> 
> 赞同：-6
> 
> 时间：2012-10-30T09:21:17.973
> 
> 标签：c++

这段代码中真正返回的内容对我来说没有`return 4 return 2 return 6`意义可能有人向我解释他们返回的内容，我在堆栈流上看到了这段代码有人想要解释中缀和前缀转换

```
#include<stdio.h> 
#include<conio.h> 
#include<string.h> 
#define MAX 20 

char stack[MAX]; 
int top = -1; 
char pop(); 
void push(char item); 

int prcd(char symbol) 
{ 
    switch(symbol) 
    { 
    case '+': 
    case '-': 
        return 2; 
    case '*': 
    case '/': 
        return 4; 
    case '^': 
    case '$': 
        return 6; 
    case '(': 
    case ')': 
    case '#': 
        return 1; 
    } 
} 

int isoperator(char symbol) 
{ 
    switch(symbol) 
    {
    case '+': 
    case '-': 
    case '*': 
    case '/': 
    case '^': 
    case '$': 
    case '(': 
    case ')': 
        return 1; 
    default: 
        return 0; 
    } 
} 

void convertip(char infix[],char prefix[]) 
{ 
    int i,symbol,j=0; 
    char test[MAX]; 

    infix=strrev(infix); 
    stack[++top]='#'; 

    for(i=0;i<strlen(infix);i++) 
    { 
        symbol=infix[i]; 
        if(isoperator(symbol)==0) 
        { 
            prefix[j]=symbol; 
            j++; 
        }
        else 
        { 
            if(symbol==')') 
            { 
                push(symbol); 
            } 
            else if(symbol=='(') 
            {    
                while(stack[top]!=')') 
                { 
                    prefix[j]=pop(); 
                    j++; 
                }    

                pop();//pop out (. 
            } 
            else 
            { 
                if(prcd(symbol)>prcd(stack[top])) 
                { 
                    push(symbol); 
                }
                else 
                { 
                    while(prcd(symbol)<=prcd(stack[top])) 
                    { 
                        prefix[j]=pop(); 
                        j++; 
                    } 
                    push(symbol); 
                }//end of else. 
            }//end of else. 
        }//end of else. 
    }//end of for. 

    while(stack[top]!='#') 
    { 
        prefix[j]=pop(); 
        j++; 
    } 

    prefix[j]='\0';//null terminate string. 
    prefix=strrev(prefix); 

} 

int main() 
{ 
    char infix[20],prefix[20]; 
    //clrscr(); 
    printf("Enter the valid infix string:\n"); 
    gets(infix); 
    convertip(infix,prefix); 
    printf("The corresponding prefix string is:\n"); 
    puts(prefix); 
    getch(); 

    return 0; 
} 

void push(char item)
{ 
    top++; 
    stack[top]=item; 
} 

char pop() 
{ 
    char a; 
    a=stack[top]; 
    top--; 
    return a; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:26:46.343

此代码可能会解释数字术语，例如。17 + 3 * 8。要正确计算，代码必须确定先取*，然后取+。评估顺序由优先规则设置：* 和 / 在 + 和 - 之前。

这些`return`语句看起来像一些优先代码。

*   (, ), #:`return 1`
*   +, -:`return 2`
*   *, /:`return 4`
*   ^, $:`return 6`

(, ) 和 # 的优先级最低。之后 + 和 - 具有次低优先级。然后是*和/。最高优先级是 ^ 和 $。

# java - 图像上传在 Grails 中调整大小和裁剪

> ID：13135939
> 
> 赞同：2
> 
> 时间：2012-10-30T09:21:56.373
> 
> 标签：java, grails, image-processing, frameworks

我有一个 Grails 应用程序，用户可以在 ../user/create 表单中上传个人资料图片。

选择要使用的图像文件时，上传应自动开始，并且进度条应显示上传进度。上传完成后，用户应该能够缩放和裁剪图像。之后，当用户提交表单以创建新用户时，它将被保存。

是否有可以处理要求的 Grails 插件？如果没有，我必须结合哪些插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:21:35.977

对于上传，您可以使用

[http://grails.org/Simple+Avatar+Uploader](http://grails.org/Simple+Avatar+Uploader)

并用于调整大小、裁剪、缩放

[https://github.com/can3p/iviewer](https://github.com/can3p/iviewer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:36:45.410

对于后端图像处理，已经有一个插件，它不在 grails 公共存储库中，但它在 github 上有一个 repo：

[https://github.com/ricardojmendez/grails-imagetools](https://github.com/ricardojmendez/grails-imagetools)

对于前端，有现有的 jQuery 或 MooTools 插件。

# jquery - CSS更改收音机的活动选择

> ID：13135942
> 
> 赞同：0
> 
> 时间：2012-10-30T09:22:05.767
> 
> 标签：jquery, css

我正在使用以下内容来创建切换开关而不是单选按钮-效果很好

```
.switch
{
    display: block;
    float: left;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    border-radius: 6px;
    font-weight: bold;
    text-transform: uppercase;
    background: #eee;
    border: 1px solid #aaa;
    padding: 2px;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
    margin-left: 20px;
}

.switch input[type=radio]
{
    display: none;
}

.switch label
{
    display: block;
    float: left;
    padding: 3px 6px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    color: #aaa;
    cursor: pointer;
}

.switch label:hover
{
    text-shadow: 0 0 2px #fff;
    color: #888;
}

.switch label.checked 
{
    background: #8fc800;
    color: #eee;
    text-shadow: 0 -1px 1px rgba(0,0,0,0.5);
    background: -webkit-linear-gradient(top, #8fc800, #438c00);
    background: -moz-linear-gradient(top, #8fc800, #438c00);
    background: -ms-linear-gradient(top, #8fc800, #438c00);
    cursor: default;
} 
```

和html：

```
<div class="switch">
    <input type="radio" name="weekly_new" id="weekSW-0" <?=$yes_checked?> value="Yes" />
    <label for="weekSW-0" id="yes">ON</label>
    <input type="radio" name="weekly_new" id="weekSW-1" <?=$no_checked?> value="No" />
    <label for="weekSW-1" id="no">OFF</label>
</div> 
```

和jQuery：

```
<script>
     $(".switch label:not(.checked)").click(function(){
        var label = $(this);
        var input = $('#' + label.attr('for'));

        if (!input.prop('checked')){
            label.closest('.switch').find("label").removeClass('checked');                        
            label.addClass('checked');
            input.prop('checked', true);
        }
    });

    $(".switch input[checked=checked]").each(function(){
        $("label[for=" + $(this).attr('id') + "]").addClass('checked');
    });
    </script> 
```

如您所见， label.checked 为按钮提供了“外观”-我想要做的是在选择“否”而不是“是”时使用不同的颜色-红色表示否，绿色表示是，开创性的吧？

无论如何，我一生都无法弄清楚是否可以做到

我为标签分配了 ID 并尝试了例如

```
.switch label.checked #yes { blah blah } 
```

但这使得样式毫无用处！

由于我以这种方式完成了代码，可以这样做吗？

如果更容易摆弄，我已经创建了一个小提琴...... obv 必须放置 valuse checked=checked 因为我通常从 mysql 表加载但它不能

[http://jsfiddle.net/aS69U/](http://jsfiddle.net/aS69U/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:26:12.110

这个 CSS 应该适用于您的代码：

```
.switch #no.checked {
    background:red;
} 
```

**[演示](http://jsfiddle.net/gionaf/aS69U/3/)**

* * *

顺便说一句很酷的定制;-)

# batch-file - 用于在文件中查找变量并将其值读取到变量的批处理脚本

> ID：13135946
> 
> 赞同：1
> 
> 时间：2012-10-30T09:22:25.797
> 
> 标签：batch-file

我正在寻找一个批处理脚本来搜索文件中的变量并读取它的值。示例：我的文本文件的行为

```
VERSION=6.0.196.0
CS_VERSION=6.0 
```

我希望我的批处理脚本找到该变量并将其值 ( )`VERSION`读取到我的批处理脚本中的一个变量，然后将( ) 的值读取到另一个变量。`6.0.196.0``PVERSION``CS_VERSION``6.0``DVERSION`

我怎样才能做到这一点？搜索了一些类似的问题，但他们给我的输出如下：

```
PVERSION==VERSION=6.0.196.0
DVERSION==CS_VERSION=6.0. 
```

我只需要输出为

```
PVERSION=6.0.196.0
DVERSION=6.0. 
```

请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:06:00.333

一种方法（读取每一行，`=`将 lhs/rhs 定界并捕获到`%%A`& `%%B`）；

```
@echo off
setlocal EnableDelayedExpansion
for /F "eol= tokens=1,2 delims==," %%A in (the.file) do (
    if "%%A"=="VERSION" (
        set version=%%B
    ) else if "%%A"=="CS_VERSION" (
        set cs_version=%%B
    )
)

echo VERSION is %version%
echo CS_VERSION is %cs_version% 
```

* * *

测试;

```
@echo off
@(
echo 1
echo 2
echo 3
echo 4
echo 5
echo 6
echo 7
echo 8
echo 9
echo 10
echo 11
echo 12
echo 13
echo 14
echo 15
echo 16
echo 17
echo VERSION=6.0.196.0
echo CS_VERSION=6.0
) > the.file

setlocal EnableDelayedExpansion
for /F "eol= tokens=1,2 delims==, skip=17" %%A in (the.file) do (
    if "%%A"=="VERSION" (
        set version=%%B
    ) else if "%%A"=="CS_VERSION" (
        set cs_version=%%B
    )
)

echo VERSION is %version%
echo CS_VERSION is %cs_version% 
```

# php - 如何解析 JSON 数组？

> ID：13135947
> 
> 赞同：-1
> 
> 时间：2012-10-30T09:22:27.547
> 
> 标签：php, jquery, json

两者都可以分成单独的数组，由 php 脚本返回的格式化 JSON 字符串？我的 JS 代码

```
function GetData(id){
    $.ajax({
        url: 'list.php',
        data: 'id=' + id,
        type: 'POST',
        success: function(data){
            alert(data)
            console.log(data)
        }
    })
} 
```

我的 list.php

```
<?php
$id = $_POST['id'];
$connect = mysql_connect("localhost", "admin", "118326") or die(mysql_errno());
$db = mysql_select_db("flabers", $connect) or die(mysql_error());
$result = mysql_query("SELECT * FROM list WHERE id = '$id'") or die(mysql_error());
$array = mysql_fetch_assoc($result) or die(mysql_errno());
echo json_encode($array);
?> 
```

返回json字符串

```
{"id":"88","country":"Korea, Japan, USA","brand":"Samsung, Sony, HTC"} 
```

如何获得两个阵列的国家和品牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:25:08.590

用户`dataType:'json'`

```
 $.ajax({
    url: 'list.php',
    data: 'id=' + id,
    contentType: 'application/json',
    type: 'POST',
    dataType: 'json',
    success: function(data){
        alert(data)
        console.log(data) //access it like data.id, data.country etc
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:28:07.593

PHP 应该通知客户端它正在发送 JSON 而不是 HTML（默认情况下）。

```
header('Content-Type: application/json'); 
```

jQuery 会自动将其解析为 JavaScript 对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T09:29:36.460

按以下方式解析 json。

```
//var obj = JSON.parse(jsonstring); //javascript way

var obj = jQuery.parseJSON(jsonstring); //jquery way

alert(obj.country + " : " + obj.brand); 
```

# jquery - 为什么要单击两次触发事件？

> ID：13135949
> 
> 赞同：0
> 
> 时间：2012-10-30T09:22:32.847
> 
> 标签：jquery

```
<div class="search_on" id="search-item">
    <span class="text">one</span>
</div>
<ul class="search_item" style="display: none;">
    <li><a href="#">one</a></li>
    <li><a href="#">two</a></li>
    <li><a href="#">three</a></li>
</ul> 
```

jQuery代码：

```
$(document).ready(function(){

    $('#search-item .text').toggle(function () {
        $('ul.search_item').show();
    }, function () {
        $('ul.search_item').hide();
    });

    $('.search_item li a').click(function(){
        $('ul.search_item').hide();
        $('#search-item .text').text($(this).text());
        return false;
    }); 

}); 
```

当我单击`a`链接时，上面的值按预期更改为两个。但是来自更改的值我应该单击两次，底部`ul`列表将显示。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:26:02.117

`toggle`不推荐使用事件方法，您可以改用显示/隐藏`toggle`：

```
$('#search-item .text').click(function() {
    $('ul.search_item').toggle();
}); 
```

**工作演示** [http://jsfiddle.net/kH36R/](http://jsfiddle.net/kH36R/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:32:06.850

**或者**试试这个：http: [//jsfiddle.net/sM7Tn/](http://jsfiddle.net/sM7Tn/)

你可以做`$('ul.search_item').is(':visible'))`的是可见的检查和休息会像火箭一样工作`:)`

希望它符合原因 B-)

**代码**

```
$(document).ready(function() {
    $('#search-item .text').click(function() {
        if (!$('ul.search_item').is(':visible')) 
            $('ul.search_item').show();
        else 
            $('ul.search_item').hide();

    });

    $('.search_item li a').click(function() {
        $('ul.search_item').hide();
        $('#search-item .text').text($(this).text());
        return false;

    });
});​ 
```

# java - SQLiteException: no such column itemId: ，编译时：

> ID：13135950
> 
> 赞同：0
> 
> 时间：2012-10-30T09:22:36.537
> 
> 标签：java, android, sqlite

```
public class ListsSQLiteOpenHelper extends SQLiteOpenHelper {

public static final int VERSION = 1;
public static final String DB_NAME  = "lightsettings_db.sqlite";
public static final String ITEMS_TABLE  = "light_setting_items";
public static final String ITEM_ID = "itemId";
public static final String ITEM_TYPE = "itemType";
public static final String ITEM_VALUE = "itemValues";
public static final String ITEM_BUSTYPE = "itemBustype";
public static final String ITEM_LIGHTTYPE = "itemLighttype";
public static final String ITEM_SELECT  = "itemSelected";

public ListsSQLiteOpenHelper(Context context) {
    super(context, DB_NAME, null, VERSION);
    int i=0;
    int y=i;
}

@Override
public void onCreate(SQLiteDatabase db) {
    createTable(db);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

protected void createTable(SQLiteDatabase db) {
    db.execSQL(
            "create table " + ITEMS_TABLE +" (" +
            ITEM_ID + " integer primary key autoincrement not null, " +
            ITEM_TYPE + " text," +
            ITEM_VALUE + " text," +
            ITEM_BUSTYPE + " text," +
            ITEM_LIGHTTYPE + " text," +
            ITEM_SELECT + " text" +
            ");"
        );
}
}

public class EntryManagerApplication extends Application {

private ArrayList<Entry> currentEntries;

private long lineNumber = 1;

private SQLiteDatabase database;

@Override
public void onCreate() {
    super.onCreate();
    ListsSQLiteOpenHelper helper = new ListsSQLiteOpenHelper(this);
    database = helper.getWritableDatabase();
    if(currentEntries == null){
        loadItems();
    }
}

private void loadItems() {
    currentEntries = new ArrayList<Entry>();

    Cursor itemsCursor = database.query(
            ITEMS_TABLE,
            new String[] {ITEM_ID, ITEM_TYPE, ITEM_VALUE, ITEM_BUSTYPE, ITEM_LIGHTTYPE, ITEM_SELECT},
            null, null, null, null, String.format("%s,%s", ITEM_SELECT, ITEM_TYPE));

    itemsCursor.moveToFirst();
    Entry e;
    if(!itemsCursor.isAfterLast()){
        do{
            long id = itemsCursor.getLong(0);
            String type = itemsCursor.getString(1);
            String values = itemsCursor.getString(2);
            String bustype = itemsCursor.getString(3);
            String lighttype = itemsCursor.getString(4);
            String boolvalue = itemsCursor.getString(5);
            boolean select = Boolean.parseBoolean(boolvalue);
            e = new Entry(id, type, values, bustype, lighttype);
            e.setRowId(id);
            e.setSelected(select);
            currentEntries.add(e);
        } while(itemsCursor.moveToNext());
    }

    itemsCursor.close();
}

public void setCurrentEntries(ArrayList<Entry> currentEntries){
    this.currentEntries = currentEntries;
}

public ArrayList<Entry> getCurrentEntries(){
    return currentEntries;
}

public void addEntry(Entry e){
    assert(e!= null);
    currentEntries.add(e);
}

public long getLineNumber() {
    return lineNumber;
}

public void setLineNumber(long lineNumber) {
    this.lineNumber = lineNumber;
}
} 
```

当我尝试运行此代码时，我收到一个错误，我不知道请帮忙。

> android.database.sqlite.SQLiteException：没有这样的列：itemId：，编译时：SELECT itemId，itemType，itemValues，itemBustype，itemLighttype，itemSelected FROM light_setting_items ORDER BY itemSelected，itemType

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:09:12.813

您的`CREATE TABLE`命令不起作用，因为您在结束之前~~有~~一个逗号`)`。

此外，`SQLiteOpenHelper`不会`onCreate`为现有数据库调用您的方法；您将不得不增加`VERSION`并对该方法进行必要的更改`onUpdate`。或者，删除并重新安装您的应用程序。

# python - auth_permissions 中未创建新用户

> ID：13135951
> 
> 赞同：0
> 
> 时间：2012-10-30T09:22:38.383
> 
> 标签：python, django, authentication, permissions, django-south

我是 Python 和 Django 的新手，所以请多多包涵。我正在破解的项目不是我制作的，所以我在黑暗中摸索。

创建新用户时，他们没有权限，`user.has_perm('places.add_place')`并且与 PostgreSQL 表中的用户 ID 没有关系`auth_permissions`，我猜这是症状。

如果`manage.py flush --settings=settings.jacob`我得到：

```
Error: One or more models did not validate:
users.userprofile: "uuid": Primary key fields cannot have null=True.
places.category: "uuid": Primary key fields cannot have null=True.
places.image: "uuid": Primary key fields cannot have null=True.
places.masterplace: "uuid": Primary key fields cannot have null=True.
places.place: "uuid": Primary key fields cannot have null=True. 
```

如果我看一下桌子，`places_masterplace`我会看到`Primary key <no primary key>`，而像这样的桌子`users_userprofile`确实有一张。

我们使用`Django==1.4.1`和`South==0.7.6`。

我们的登台服务器上只有这个问题。

这可能是本地数据库问题，还是部署到生产也会导致它出现在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:39:19.347

问题是设置中的一条注释行，由于 django-social-auth 的升级版本，现在需要它。

```
'django.contrib.auth.backends.ModelBackend', 
```

# mysql - 许多 UPDATE WHERE 在一个 SQL 中

> ID：13135952
> 
> 赞同：0
> 
> 时间：2012-10-30T09:22:49.453
> 
> 标签：mysql

我有一个架构非常糟糕的数据库，没有人想要修复任何东西，我必须使用我拥有的东西。所以问题出在屏幕上

![BD](../Images/fcf2ea53397b592beac6d3e476a9e9e9.png)

我需要更新用户连接以及更多字段......我看到的解决方案是`SET ... WHERE AND SET .. WHERE AND SET ... WHERE`（是的，在这一点上我什至不确定它是否会起作用）。那么可能有更常见的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:27:02.483

只要您的价值观是不同的记录，我认为您将需要进行个别更新。

你也可以考虑这样的事情：

```
UPDATE categories
    SET display_order = CASE id
        WHEN 1 THEN 3
        WHEN 2 THEN 4
        WHEN 3 THEN 5
    END,
    title = CASE id
        WHEN 1 THEN 'New Title 1'
        WHEN 2 THEN 'New Title 2'
        WHEN 3 THEN 'New Title 3'
    END
WHERE id IN (1,2,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:27:13.467

是否有特殊原因为什么您应该在一个查询中更新所有字段。为什么不尝试编写单个更新查询并将其作为批处理推送到数据库。

# xml - Word Ribbon XML：折叠组仅显示默认图像

> ID：13135956
> 
> 赞同：4
> 
> 时间：2012-10-30T09:23:03.333
> 
> 标签：xml, image, ms-word, ribbon

我们有一个用 C++ 实现的 Word 插件作为 COM 插件。我们的功能区组是使用 GetCustomUI 回调加载的。当 Word 2010 以折叠布局显示我们的功能区组时，仅显示默认图标。

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" onLoad="OnLoad">
  <ribbon>
    <tabs>
      <tab idMso="TabReviewWord">
        <group id="MyGroup" label="My AddIn" getImage="GetGroupImage" insertAfterMso="GroupProofing" >
        .......

STDMETHODIMP CWordPlugIn::GetGroupImage(IDispatch* pRibbon, IPictureDisp** ppdispImage)
{
   return GetImage(GetGroupIcon(16), ppdispImage);
};

HRESULT CWordPlugIn::GetImage(HICON hIcon, IPictureDisp** ppdispImage)
{
   PICTDESC    pd;
   memset(&pd, 0, sizeof(pd));
   pd.cbSizeofstruct = sizeof(pd);
   pd.picType = PICTYPE_ICON;
   pd.icon.hicon = hIcon;
   if ( pd.icon.hicon == NULL )
   {
      return E_INVALIDARG;
   };

   HRESULT     hRes = OleCreatePictureIndirect(&pd, IID_IPictureDisp, FALSE, (LPVOID *) ppdispImage);
   if ( hRes != S_OK )
   {
      //write log
   };

   return hRes;
}; 
```

当我没有为组定义“getImage”回调时，折叠组显示 Microsoft 默认图标。当我定义“getImage”回调时，我的图标没有显示，只是一个空图像。相同的回调非常适用于按钮图标。如何以编程方式定义为折叠组显示的组图标？我尝试了 16 和 32 像素的图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:22:33.747

修复：当我返回一个包含 16 和 32（和 48 像素）图像的图标时，它按预期工作。

无论出于何种原因，我们为大小功能区按钮使用了不同的图标资源（包含 16 或 32 像素图标的单个文件）。相反，应该在一个图标文件中使用包含所有尺寸的图标。奖励：当图标也包含 48 像素图像时，功能区按钮将正确绘制为放大的系统字体。

# php - 使用 PHPExcel 更改列的大小

> ID：13135964
> 
> 赞同：1
> 
> 时间：2012-10-30T09:23:45.303
> 
> 标签：php, phpexcel, column-sizing

我在使用 PHPExcel 时遇到了一些麻烦，

事实上，我已经阅读了我找到的所有教程，但它对我不起作用。

我已将此代码放在页面上：

```
$i = -1; // index des enregistrements

$objPHPExcel->setActiveSheetIndex(0);
$sheet->getColumnDimension('A')->setWidth(75);
$sheet->getColumnDimension('B')->setWidth(150);
$sheet->getColumnDimension('C')->setWidth(190);
$sheet->getColumnDimension('D')->setWidth(150);
$sheet->getColumnDimension('E')->setWidth(115);
$sheet->getColumnDimension('F')->setWidth(115);
$sheet->getColumnDimension('G')->setWidth(380);
$sheet->getColumnDimension('H')->setWidth(75);
$objPHPExcel->getActiveSheet()->SetCellValue('D1', '<img src="images/agenda.png" alt="AGENDA" width="168" height="24">');
$objPHPExcel->getActiveSheet()->SetCellValue('A3', 'Du '.$_REQUEST['date1'].' Au '.$_REQUEST['date2'].', Critères: '.$_REQUEST['tache'] );
$objPHPExcel->getActiveSheet()->SetCellValue('A5', 'CLIENT');
$objPHPExcel->getActiveSheet()->SetCellValue('B5', 'N° DE DOSSIER');
$objPHPExcel->getActiveSheet()->SetCellValue('C5', 'DEBITEUR');
$objPHPExcel->getActiveSheet()->SetCellValue('D5', 'TEL');
$objPHPExcel->getActiveSheet()->SetCellValue('E5', 'DATE');
$objPHPExcel->getActiveSheet()->SetCellValue('F5', 'TRAITEMENT');
$objPHPExcel->getActiveSheet()->SetCellValue('G5', 'DESCRIPTION');
$objPHPExcel->getActiveSheet()->SetCellValue('H5', 'RESTANT DU EN PPAL'); 
```

但它给了我以下错误：

注意：未定义的变量：第 173 行中的工作表

注意：未定义的变量：第 173 行中的工作表

我真的迷路了，我认为改变列大小的方式是这样的。

任何形式的帮助将不胜感激。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:30:47.327

您必须在使用它之前定义 $sheet ，就像 PHP 中的任何变量一样，它在实际创建之前不存在；但您也希望它是您要设置列宽的实际 PHPExcel 工作表。

所以

代替

```
$objPHPExcel->setActiveSheetIndex(0); 
```

利用

```
$sheet = $objPHPExcel->setActiveSheetIndex(0); 
```

这是有效的，因为调用 setActiveSheetIndex() 返回活动的工作表对象

将 $sheet 定义为当前工作表后，您可以调用设置列宽

**编辑**

然后，您还可以简化调用以设置单元格值

```
$objPHPExcel->getActiveSheet()->SetCellValue('D1', '<img src="images/agenda.png" alt="AGENDA" width="168" height="24"> 
```

至

```
$sheet->SetCellValue('D1', '<img src="images/agenda.png" alt="AGENDA" width="168" height="24"> 
```

ETC

**但是请注意**，在单元格中设置 HTML 标记只是将单元格设置为包含文本字符串，这不会在您的工作表中嵌入图像

# jquery - 使用 jquery 向下拉选项卡添加按钮

> ID：13135968
> 
> 赞同：0
> 
> 时间：2012-10-30T09:23:59.897
> 
> 标签：jquery

HTML

```
<div class="sign-up-wrapper">

<div class="sign-up-container">
<div id="sign-up-myButton" class="sign-up-header"></div>
<div id="sign-up-content" class="hide-content">content here content here content here content here content here content here content here content here content here content here content here</div>
</div>
<div id="sign-up-myButton3" class="sign-up-footer">Button 1</div>

</div> 
```

CSS

```
body {padding:0;margin:0;}

.sign-up-wrapper {border:1px solid red;width:459px;line-height:normal;font-size:18px;z-index:110;position:absolute;left:0;top:0;}
.sign-up-container {}
.sign-up-header {height:8px;}
.hide-content {position: absolute !important;top: -9999px !important;left: -9999px !important;}

.sign-up-footer {text-align:center;width:99px;height:23px;cursor:pointer;background:#999;margin-left:19px;}

#sign-up-content {background:#096;width:420px;margin:auto;} 
```

jQuery

```
var $button = jQuery('#sign-up-myButton3'),
  $text   = jQuery('#sign-up-content'),
  visible = false;

$button.click(function(){
if ( visible ) {
  $text.slideUp('fast',function(){
    $text.addClass('hide-content')
         .slideDown(0);
  });
} else {
  $text.slideUp(0,function(){
    $text.removeClass('hide-content')
         .slideDown('fast');
  });
}
visible = ! visible;
}); 
```

可以请帮助我，如何在按钮 1 旁边添加 2 或 3 个按钮，按下时每个按钮的内容都不同

我只有 1 个带有内容的按钮，这是我的小提琴[http://jsfiddle.net/gbFKe/](http://jsfiddle.net/gbFKe/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:40:20.070

过滤器解决方案[在这里](http://jsfiddle.net/gbFKe/1/) html

```
 <div class="sign-up-wrapper">
<div id="sign-up-myButton1" class="sign-up-footer">Button 1</div>
<div id="sign-up-myButton2" class="sign-up-footer">Button 2</div>
<div id="sign-up-myButton3" class="sign-up-footer">Button 3</div>
<div class="sign-up-container">
<div id="sign-up-myButton" class="sign-up-header"></div>
<div id="sign-up-content1" class="hide-content">content here content here content here content here content here content here content here content here content here content here content here</div>
    <div id="sign-up-content2" class="hide-content">button2 content</div>
    <div id="sign-up-content3" class="hide-content">button3content</div>
</div>
</div>​ 
```

jquery ，有冗余代码，您可以根据需要自定义

```
 var $button1 = jQuery('#sign-up-myButton1'),
      $text1   = jQuery('#sign-up-content1'),
      visible = false;

    $button1.click(function(){
    if ( visible ) {
      $text1.slideUp('fast',function(){
        $text1.addClass('hide-content')
             .slideDown(0);
      });
    } else {
      $text1.slideUp(0,function(){
        $text1.removeClass('hide-content')
             .slideDown('fast');
      });
    }
    visible = ! visible;
    });
var $button2 = jQuery('#sign-up-myButton2'),
      $text2   = jQuery('#sign-up-content2'),
      visible = false;

    $button2.click(function(){
    if ( visible ) {
      $text2.slideUp('fast',function(){
        $text2.addClass('hide-content')
             .slideDown(0);
      });
    } else {
      $text2.slideUp(0,function(){
        $text2.removeClass('hide-content')
             .slideDown('fast');
      });
    }
    visible = ! visible;
    });

var $button3 = jQuery('#sign-up-myButton3'),
      $text3   = jQuery('#sign-up-content3'),
      visible = false;

    $button3.click(function(){
    if ( visible ) {
      $text3.slideUp('fast',function(){
        $text3.addClass('hide-content')
             .slideDown(0);
      });
    } else {
      $text3.slideUp(0,function(){
        $text3.removeClass('hide-content')
             .slideDown('fast');
      });
    }
    visible = ! visible;
    });

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:59:42.213

这将使您对应该做什么有基本的了解。

Javascript

```
$('#content').hide();
$('#content2').hide();
$('#content3').hide();

$('#button1').on('click',function(){
    $('#content').slideDown();
});​​​​​​​​

$('#button2').on('click',function(){
    $('#content2').slideDown();
});   

$('#button3').on('click',function(){
    $('#content3').slideDown();
}); 
```

​ HTML

```
 <button id='button1'>Button1</button>
    <div id='content'>
        <p>Test</p>
        <button id='button2'>Button1</button>
        <button id='button3'>Button1</button>
        <div id='content2'>
            <p>alsdkfjasdfl</p>
        </div>
        <div id='content3'>
            <p>asdfladsf</p>
        </div>
    </div> 
```

# android - 如何为旧版本创建 ICS 全息样式编辑文本？

> ID：13135972
> 
> 赞同：2
> 
> 时间：2012-10-30T09:24:06.797
> 
> 标签：android, android-edittext

我搜索了很多网站以`EditText`在`Android`旧版本中创建 ICS holo 样式。但结果并没有帮助我。请给我一些示例链接/代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:29:50.497

从 android-sdk 文件夹中复制图像，然后使用它们。

在此处搜索 textfield_bg_*

/android-sdks/platforms/android-16/data/res/drawable-mdpi

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T14:11:06.217

基本上你想下载这个xml选择器drawable并将其作为每个的背景`EditText`： [https ://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable/edit_text_holo_light.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable/edit_text_holo_light.xml)

（如果你想要全息黑暗，那么显然只需将每个“光”实例替换为“黑暗”。）

然后，您需要找到该选择器中引用的每个可绘制对象，并将它们下载到适当大小类别的 res 文件夹中。您可以使用该 github 项目来搜索它们 - 例如，可以在[https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/textfield_multiline_default_holo_light找到 xhdpi 版本的 textfield_multiline_default_holo_light .9.png](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/textfield_multiline_default_holo_light.9.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-20T15:15:22.727

您可能应该使用[HoloEveryWhere 库](https://github.com/Prototik/HoloEverywhere)。它允许您在较旧的 API 级别上使用 Holo 主题。

# java - Java JAX-WS，wsgen，类作为参数？

> ID：13135975
> 
> 赞同：0
> 
> 时间：2012-10-30T09:24:12.290
> 
> 标签：java, jax-ws, wsgen

我使用 wsgen 来生成 Java SOAP 存根。

使用 Java 基本类型或集合也没有问题。

但是，如果我尝试使用自定义类作为参数，我会从 wsgen 收到错误消息。我之前对 java-files 所做的 javac 没有错误。

这里以我的 Interface.java 为例：

```
@WebService (targetNamespace = "TNS")
public class Interface
{
  public int foo (F f)
  {
    return 1;
  }
}

class F
{
} 
```

来自 wsgen 的错误是“找不到符号：F 类”。我还尝试了包，自己文件中的 F 等。

wsgen 的调用是： wsgen -cp 。-wsdl 接口

有任何想法吗？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:42:21.083

额外的注释解决了这个问题：

```
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE) 
```

通过查看由 wsimport 以另一种方式（wsdl -> java）生成的代码来发现。

# svn - 在多个版本的组件的 SVN 中创建里程碑

> ID：13135976
> 
> 赞同：0
> 
> 时间：2012-10-30T09:24:16.367
> 
> 标签：svn

我想从开发分支创建构建的里程碑。该里程碑中的某些组件的版本早于 HEAD。

所以在开发分支中：

最佳

```
|- CompA    v: 6
|- CompB    v: 8
|- CompC    v: 10 
```

在我想要的里程碑标签中：

最佳

```
|- CompA    v: 5
|- CompB    v: 7
|- CompC    v: 10 
```

尝试了不同的方法来做到这一点，但我总是让里程碑成为所有组件的开发分支的负责人。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:25:31.860

好吧，你知道：“里程碑”、“组件”......不是来自颠覆的词，它们来自另一个星球。如果你想被理解，你必须说同一种语言，但用模棱两可的术语几乎是不可能的。

组件是什么意思？在 Subversion 存储库中，它可以是：

*   父目录中的普通子目录
*   单独的独立实体，使用 svn:externals 链接到基础

这两个选项中的每一个都涉及*不同*的解决方案

旁注：如果标签必须与当前 HEAD 不相关，*按照惯例*，它仍然**必须**锁定存储库在**某个先前版本**中的状态，而不是随机设置和自愿选择。只是`svn up -r`到*这个版本*并标记它

# opencv - opencv cvblob 坐标到像素

> ID：13135978
> 
> 赞同：0
> 
> 时间：2012-10-30T09:24:27.703
> 
> 标签：opencv

我有一个视频，可以计算多个 blob 质心（浮点数）的 x/y 坐标，如何将这些坐标转换为像素值？我需要像素值来移动计算红色平均值的矩阵在 rgb 中。谢谢你们！

# iis - 谁能告诉我这个 IIS URL 重写有什么问题？

> ID：13135989
> 
> 赞同：0
> 
> 时间：2012-10-30T09:25:16.037
> 
> 标签：iis, url-rewrite-module

因此，如果我没有 wibble 的用户代理，我应该能够访问 rsstest/test.xml 并被转发到 article.xml。

为什么这不起作用？

`<rule name="df" patternSyntax="ExactMatch" stopProcessing="true"> <match url="^rsstest/test.xml" negate="true" /> <conditions> <add input="{HTTP_USER_AGENT}" pattern="Wibble" negate="true" /> </conditions> <action type="Rewrite" url="article.xml" /> </rule>`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:24:52.937

尝试将规则更改为此。

```
<rule name="df" patternSyntax="ExactMatch" stopProcessing="true"> 
    <match url="^rsstest/test.xml" negate="true" /> 
    <conditions> 
        <add input="{HTTP_USER_AGENT}" pattern="Wibble" negate="true" />
    </conditions> 
    <action type="Redirect" url="article.xml" /> 
</rule> 
```

使用重定向会向客户端发送 HTTP 301 或 302，告诉客户端它应该尝试使用另一个 URL 访问页面。

重写发生在服务器上，只是将一个 URL 转换为另一个 URL，供您的 Web 应用程序使用。客户不会看到任何变化。

# tortoisesvn - 乌龟 svn - svn：忽略 - 递归？

> ID：13135990
> 
> 赞同：0
> 
> 时间：2012-10-30T09:25:23.203
> 
> 标签：tortoisesvn

对于我的工作，我正在与starteam 合作。

但我想尝试使用 svn。所以我第一次在我的电脑上安装了tortoisesvn（windows 7 home premium x64）

我有那个目录：

```
c:\svn\lab 
```

在那个目录上我做：

```
right click - tortoiseSVN - create a repository here 
```

然后我有

```
c:\java\lab 
```

我愿意

```
right click - SVN checkout - and choose my local repository file:///c:/svn/lab 
```

在 c:\java\lab 中，我创建了该结构

```
│   a.txt
│   b.xlsx
│
├───target
└───test
    │   c.txt
    │   d.xlsx
    │
    └───target 
```

我想忽略 txt 文件和目标目录。

如果我做

```
right click - svn commit 
```

在提交对话框中，所有文件和目录都在列表中——好的，这很正常。

现在我试过了

```
svn propset -R svn:ignore *.txt . 
```

在提交对话框中，a.txt 不存在（很酷，它正在工作）但 c.txt 仍然存在！

与目标目录同上。

我能怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:28:21.677

右键单击顶部目录 > TortoiseSVN > 属性。

在属性窗口中，检查目录是否包含`svn:ignore`属性。如果没有，请单击“添加”，然后设置属性名称`svn:ignore`和属性值：

```
*.txt
target. 
```

否则，请双击该属性。

选中“递归应用属性”。单击“确定”。

# c++ - Eclipse 无法链接到 kernel32.lib

> ID：13135992
> 
> 赞同：8
> 
> 时间：2012-10-30T09:25:31.403
> 
> 标签：c++, c, eclipse, eclipse-cdt

我已经安装了 Eclipse CDT，所以我将能够编写和编译 C 代码。

编译进度失败，出现如下错误：

```
LNK1104 : cannot open file kernel32.lib 
```

我一直在我的电脑中搜索这个文件，发现它出现在一些文件夹中，

```
C:\Program Files\Microsoft SDKs\Windows\v7.0A\Lib
C:\Program Files\Microsoft SDKs\Windows\v6.0A\Lib 
```

我怎么能将 eclipse “引用”到这个特定路径之一，以便`kernel32.lib`找到该文件并且我将能够编译和运行`C`文件？

**编辑** 感谢@mux的回答， `LNK1104 : cannot open file kernel32.lib`现在已经消失了，但是现在出现了一个新错误： `LNK1104 : cannot open file 'C:\Program.lib'`。再一次，任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-17T16:25:49.917

我在这上面浪费了很多时间......这就是你正在寻找的答案

在 Eclipse > Project > Properties > Paths and Symbols > Libraries 选项卡中，将库的路径括在单引号中：

'C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Lib\Kernel32.Lib'

会有一条警告说该路径不存在，但在您重建项目后它应该会消失。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-30T20:37:50.130

我有同样的问题，由于在我的计算机上安装了 Microsoft Visual Studio 2010，我已经解决了：

1.  右键单击您的`C/C++ project -> Properties -> C/C++ Build -> Environment`
2.  在，点击右侧 `LIB`的按钮`Edit`
3.  添加`;C:\Program Files\Microsoft SDKs\Windows\v7.0A\Lib` <----`;`分隔第一个自动检测到的路径"

*** 必须在 Debug 和 Release 配置上：否则你会得到同样的错误 ***

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T09:28:23.853

[您需要从常见问题解答](http://wiki.eclipse.org/CDT/User/FAQ#How_do_I_add_an_external_library_to_my_C.2B.2B_project.3F)中将库的路径添加到您的项目中

> 右键单击项目名称并选择属性，转到您的项目的属性。单击“C/C++ 构建”。在工具设置选项卡下，单击目录。单击添加按钮并选择文件系统。选择包含 C/C++ 库的文件夹。应用然后确定。包括新库。

**编辑：**

wiki 似乎已过时，但我确实找到了与此处链接相关的选项：

> C/C++ 构建->设置->工具设置选项卡

您应该将头文件的包含路径（如果有）添加到*编译器* `Includes`，将库添加到*链接器*选项`Libraries(-l)`，并将库路径添加到`Library Search path (-L)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T09:58:02.313

转到：
“Project Properties>c/c++ Build>Settings>c++ Linker>Libraries”
添加库 kernel32 并设置库的搜索路径或设置 LIBRARY_PATH 环境变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-03T19:39:36.497

对于“LNK1104：无法打开文件 kernel32.lib”错误，您需要在 Eclipse > Project > Properties > Paths and Symbols > Libraries 选项卡中包含 kernel32.lib 的路径

对于 LNK1104：无法打开文件 'C:\Program.obj' 错误，您需要确保之前提供的路径在单引号 (') 内。[参考](https://stackoverflow.com/questions/133698/why-does-fatal-error-lnk1104-cannot-open-file-c-program-obj-occur-when-i-c)

希望这能解决您的问题。

# java - 如何区分生成的方法（AspectJ）

> ID：13135993
> 
> 赞同：1
> 
> 时间：2012-10-30T09:25:37.817
> 
> 标签：java, reflection, aspectj, compile-time-weaving

我目前正在使用 aspectJ @Around 来检查我的代码。我正在使用 aspectJ 编译器来编织方面。但是，在运行时，我也在使用反射分析类的结构`type.getDeclaredMethods()`。但是我需要区分哪些方法最初存在，哪些方法是由 aspectJ 编译器添加的。是否可以？还是有一些解决方法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:10:58.513

您可以检查 AspectJ 生成的成员是否是[综合](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Member.html#isSynthetic%28%29)的。如果不是这种情况，您可以为作为切入点目标的方法生成注释。在反射期间，您可以过滤具有此类注释的成员。

# azure - Azure 的 DiagnosticMonitorConfiguration 的生命周期是多久？

> ID：13135997
> 
> 赞同：2
> 
> 时间：2012-10-30T09:26:00.347
> 
> 标签：azure, azure-diagnostics

在我尝试清除的过程中，`DiagnosticMonitorConfiguration`我尝试了以下方法：

*   重启（唯一）webrole 实例
*   重新启动 IIS 应用程序池（通过 RDP => IIS 管理器）
*   重新部署了网络角色
*   修改 global.asax 代码 => 重新部署

`DirectoryConfiguration`但是我仍然在 DiagnosticMonitorConfiguration 的目录数据源中看到了额外的成员副本。这些额外的副本是在`Application_Start()`每次 IIS 线程退役（20 分钟空闲时间）时调用 global.asax 时意外添加的。我已经复制粘贴了 BUGGY 代码，显示了它们是如何添加的（最终我得到了一个例外，例如`OverallQuotaInMB is 150MB but sum of requested sub-quotas is 850MB`）。

***问题***：我明白为什么会有重复。但是，尽管尝试了上述项目符号列表中的操作，但为什么 DiagnosticMonitorConfiguration 没有被清除？它的状态究竟是如何被持久化的？我只能认为它必须是 Azure 表或 Azure SQL - 但这只是一个猜测。

```
// called from global.asax's Application_Start()
    public bool Initialize()
    {

        RoleInstanceDiagnosticManager roleInstanceDiagnosticManager = getRoleInstanceDiagnosticManager();
        config = roleInstanceDiagnosticManager.GetCurrentConfiguration();

        if (config == null) 
            config = DiagnosticMonitor.GetDefaultInitialConfiguration();

        LocalResource localResource = RoleEnvironment.GetLocalResource("MyAppLogFolder");
        DirectoryConfiguration dirConfig = new DirectoryConfiguration();
        dirConfig.Container = "myapplog-blob";
        dirConfig.DirectoryQuotaInMB = localResource.MaximumSizeInMegabytes;
        dirConfig.Path = localResource.RootPath;

        // This is a BUG, keeps adding duplicate entries
        config.Directories.DataSources.Add(dirConfig);

        limitOtherDefaultDirSizes(config); // limits overall quota to 150MB
        config.Directories.ScheduledTransferPeriod = TimeSpan.FromMinutes(10.0);

        roleInstanceDiagnosticManager.SetCurrentConfiguration(config); 

        return true;
    } 
```

远程调试显示 DiagnosticMonitorConfiguration 数据结构如下。你可以清楚地看到这里的重复，保证例外。

```
- config    {Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorConfiguration}
-  Directories  {Microsoft.WindowsAzure.Diagnostics.DirectoriesBufferConfiguration}
-    DataSources Count = 85 System.Collections.Generic.IList<Microsoft.WindowsAzure.Diagnostics.DirectoryConfiguration> 
+     [0] {Microsoft.WindowsAzure.Diagnostics.DirectoryConfiguration}
+     [1] {Microsoft.WindowsAzure.Diagnostics.DirectoryConfiguration}
+     [2] {Microsoft.WindowsAzure.Diagnostics.DirectoryConfiguration}
-     [3] {Microsoft.WindowsAzure.Diagnostics.DirectoryConfiguration}
        Container   "myapplog-blob" string
        DirectoryQuotaInMB  10  int
        Path    "C:\\Resources\\directory\\73c8a6bf9a5e434ab3d0c44034e7b7e9.MyAPP.API.MyAppLogFolder\\" string
-     [4] {Microsoft.WindowsAzure.Diagnostics.DirectoryConfiguration}   
        Container   "myapplog-blob" string
        DirectoryQuotaInMB  10  int
        Path    "C:\\Resources\\directory\\73c8a6bf9a5e434ab3d0c44034e7b7e9.MyAPP.API.MyAppLogFolder\\" string
+     [5] {Microsoft.WindowsAzure.Diagnostics.DirectoryConfiguration}   
...
+     [84] {Microsoft.WindowsAzure.Diagnostics.DirectoryConfiguration} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:50:01.903

查看 MSDN 上的以下文章：[Windows Azure 诊断概述](http://msdn.microsoft.com/en-us/library/windowsazure/hh411552.aspx)

> 实施 Windows Azure 诊断时应考虑以下事项：
> 
> *   **配置信息存储在/wad-control-container/deploymentID/rolename/roleinstance**下的 Windows Azure blob 存储中的 XML 文件中

 **配置保存在当前部署的 blob 存储中的 XML 文件中。在您调用的代码`GetCurrentConfiguration`中，它将加载此 XML 文件。然后你会一遍又一遍地添加目录（这意味着每次回收都会尝试将目录添加到当前配置中）。

`GetCurrentConfiguration`当您尝试修改远程设置时非常有用（即：您想在部署应用程序后添加一些性能计数器）。如果你总是调用**GetDefaultInitialConfiguration();** 你将从一个干净的石板开始。

PS：试着把这段代码放在WebRole.cs中，这样它只会在你的实例启动时执行一次，而不会在每次启动时减慢应用程序池的速度。**

# android - 什么是“无法识别的 maven-android 项目”？

> ID：13135999
> 
> 赞同：6
> 
> 时间：2012-10-30T09:26:07.110
> 
> 标签：android, maven

有趣的麻烦。当我尝试通过 maven 更新项目时，我收到消息：

```
error configuring project
un-recognised maven-android project type 
```

谷歌帮不了我...