# StackOverflow 问答 15231000-15231999

# javascript - 解包缩小 javascript 的合法性

> ID：15231003
> 
> 赞同：6
> 
> 时间：2013-03-05T18:07:34.177
> 
> 标签：javascript, jquery

我知道这更像是一个法律问题，但我想我会试一试。

我正在学习 javascript，我在网页上发现了一些有趣的下拉菜单。我想了解更多关于它们的信息，但代码在缩小代码上方的注释中被缩小为以下内容：

> `// Unauthorized decryption/reproduction of any codes contained herein is strictly prohibited and will result in severe civil and criminal penalties.`

我打开代码并查看它真的违法吗？我可以因为在没有实际使用代码的情况下查看代码而被起诉吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T18:09:42.357

我不是专家，但如果查看网站源代码有什么犯罪行为，那么浏览器就不会那么容易了。

虽然我可以肯定地说未经许可*使用*别人的代码是错误的，但我认为从中学习是一件好事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T18:12:29.020

[**伊纳尔**]

缩小*不是*加密。您已经有权将文件复制到您的计算机并打开它（因为您的浏览器需要这些权限才能使用它）。检查免费提供的文件的内容没有法律保护。您甚至可以在您自己的系统上随意修改它，这些版权津贴属于[合理使用](http://en.wikipedia.org/wiki/Fair_use)范围，因为您这样做是出于教育目的。

您*不能*做的是分发文件或修改后的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T18:12:38.107

老实说，查看代码不应该（也可能不是）非法，因为它对任何人开放。

使用源代码和从源代码中学习是完全不同的两件事。无论上下文是什么（代码、图像、艺术等），未经他人许可使用他们的作品都是错误的。

但是从其他源代码中学习可能是学习和变得更好的最好方法。

至于他们的法律说明，我认为他们只是把它放在那里吓跑人们，但我认为它不会在法庭上成立。

# debian - 将 dpkg-buildpackage 与现有上游源 tarball 一起使用的最简单方法

> ID：15231016
> 
> 赞同：1
> 
> 时间：2013-03-05T18:09:09.777
> 
> 标签：debian, packaging, deb

已经阅读了数百个教程，但我仍然无法理解这一点：

*   我有一个上游提供的上游包，名为 foo-1.2.3.tar.bz2。
*   我把文件放在 /tmp/debplayground/.
*   手动安装该软件包的方法是 cd /tmp/debplayground/ && tar -xvf foo-1.2.3.tar.bz2 && cd foo-1.2.3 && ./configure --prefix=/usr && make && sudo make安装
*   我希望我的包裹被命名为“special-foo”。
*   我只想生成一个二进制包（.deb 文件），对源包不感兴趣。

鉴于上述前提，这是我的问题：

1.  为了能够通过“dh_make -i --createorig”创建基本的 debian pkg 文件，我需要创建一个名为“special-foo-1.2.3”的文件夹并在其中调用 dh，对吗？但是我需要将 foo-1.2.3.tar.bz2 重命名为 special-foo-1.2.3.tar.bz2 吗？
2.  我需要解压缩 .tar.bz2 或 dpkg-buildpackage 吗？
3.  我需要在哪里放置与 dh_make 创建的 debian/ 文件夹相关的上游压缩包，以便 dpkg-buildpackage 正确调用 ./configure 和 make？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:58:24.073

1.  dh_make 在这方面有点傻。我不会花太多时间弄清楚如何让它快乐。您真正需要关心的是它设置的包装模板。为了回答我认为您的问题，如果您没有创建“本机”包，dpkg-buildpackage 将期望找到一个`../special-foo_1.2.3.orig.tar.{gz,bz2,lzma}`在构建时调用的文件，以便正确生成`.diff.gz`源包的一部分，这应该是识别 Debian 软件包中上游源代码的任何更改。当您告诉 dh_make 上游 tarball 是什么时，它通常会为您创建一个符号链接。

2.  您确实需要至少解压缩原始 .tar.bz2 一次，以便将您的打包信息放在适当的位置（参见 #3）。但是之后你不需要解压它；dpkg-source（在适当时由 dpkg-buildpackage 调用）将在需要生成新差异时在 tmp 目录中自行完成。

3.  您的`debian/`文件夹应该位于包源代码树的顶层。在你的情况下，它会是`/tmp/debplayground/foo-1.2.3/debian`.

# javascript - 替换脱机文件javascript中的所有链接

> ID：15231017
> 
> 赞同：0
> 
> 时间：2013-03-05T18:09:11.123
> 
> 标签：javascript, php, file

我有一个动态下载的离线 html 文件，我向最终用户显示

```
while (!feof($file_handle)) {
   $line = fgets($file_handle);
   echo $line;

}
fclose($file_handle); 
```

是否有可能，在 javascript 或 php 中，我不介意替换页面上的所有链接，以便所有标签都转到 mysite.com/redirct.php?link_here。感谢您的帮助，祝您有美好的一天:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:32:23.507

首先，为此，您最好将所有文件内容保存到所有转换的变量中。fgets 以固定大小的块抓取数据，字符串可能会被截断，并且无法确定它们是否是链接。

```
$buffer = '';
while (!feof($file_handle)) {
   $buffer .= fgets($file_handle);
}
echo $buffer;

fclose($file_handle); 
```

链接可能很棘手。你是强迫一切都以'http'开头，还是会有子域？无论如何，您都在正则表达式领域。这里有一些可以帮助您入门：

```
$buffer = preg_replace("/(https?:\/\/.+)\s/U", "<a href=\"http://mysite.com/redirct.php?$1\">$1</a>", $buffer); 
```

也就是说，对于任何以“http://”或“https://”开头的字符串，都是一个用于替换的 URL。URL 在第一次出现空格字符时结束。

```
$buffer = preg_replace("/\s(www\..+)\s/U", "<a href=\"http://mysite.com/redirect.php?http://$1\">$a</a>", $buffer); 
```

同样，这会查找以“www”开头的任何字符串。并将其标记为 URL。

对于所有不同的 URL 变体以及它们在文本中的显示方式，这变得更加复杂，但它应该为您指明解决方案。

# c# - 存储在成员字符串中的 MaskedText 值的 Xml 序列化

> ID：15231020
> 
> 赞同：0
> 
> 时间：2013-03-05T18:09:25.687
> 
> 标签：c#, xml, winforms, xml-serialization, maskedtextbox

//更新我已经添加了更正并提供了完整的 Form1.c 代码。

为了简单起见，我将其简化了一点。所以我所有的表单控件都设置好了。为了这个问题，日期为 DateTimePicker(Short)，员工编号为 maskedTextBox("###-##")，员工姓名为简单文本框，SS 编号为 maskedTextBox(标准 SSNum) 等。为了处理所有这些数据，我创建了一个名为 Employee_Data 的类，如下所示...

```
namespace Employee
{
    public class Employee_Data
    {
        //Make Members Xml elements
        [XmlElement("EmployeeNumber")]
        public String EmployeeNumber {get; set;}
        [XmlElement("Date")]
        public DateTime Date {get; set;}
        [XmlElement("EmployeeName")]
        public String EmployeeName {get; set;}
        [XmlElement("SSNumber")]
        public String SSNumber {get; set;}

    }
} 
```

我在 Form1.cs 中创建了一个名为 e_d 的对象，并在 VS 中使用了自动事件处理。调试器显示这些值被很好地存储到类对象中（maskedText 值包括破折号）。但是，一旦我尝试如下所示序列化数据，则 xml 文件中将省略屏蔽的 textValues ...

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Xml.Serialization;
using System.IO;
using System.Xml;

namespace Employee
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        Employee_Data e_d = new Employee_Data();

        private void EmployyeeNumber_TextChanged(object sender, EventArgs e)
        {
            e_d.EmployeeNumber=EmployeeNumber.Text;
        }

        private void Date_ValueChanged(object sender, EventArgs e)
        {
            e_d.Date=Date.Value;

        }

        private void EmployeeName_TextChanged(object sender, EventArgs e)
        {
            e_d.EmployeeName=EmployeeName.Text;
        }

        private void SSNumber_ValueChanged(object sender, EventArgs e)
        {
          e_d.SSNumber=SSNumber.Text;
    }

    private void saveButton_Click(object sender, EventArgs e)
    {
        saveFileDialog1.DefaultExt = "xml";
        saveFileDialog1.Filter = "XML File (.xml)|*.xml";
        saveFileDialog1.AddExtension = true;
        saveFileDialog1.RestoreDirectory = true;
        saveFileDialog1.ShowDialog();
    }

private void saveFileDialog1_FileOk(object sender, CancelEventArgs e)
{
    string name = saveFileDialog1.FileName;

    using (TextWriter texWrt =  new StreamWriter(saveFileDialog1.FileName))
    {
        XmlSerializer serializer = new XmlSerializer(typeof(Employee_Data));
        serializer.Serialize(texWrt, e_d);
    }
} 
```

我已经研究过这个问题，关于这个特定主题似乎没有太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:49:19.063

答案是事件处理，或 PROGRAMMER FAILURE。当程序员手动编写文本输入的事件处理时（因为 VS 中的默认值是 MaskInputRejected），他忘记了设置事件处理程序。我会确保与程序员讨论这整个事情，每个人。但他在这个过程中学到了很多关于 csharp 和 xml 的知识。感谢大家花时间提供帮助。

# c# - 将jar可执行文件重写为c#

> ID：15231022
> 
> 赞同：0
> 
> 时间：2013-03-05T18:09:37.560
> 
> 标签：c#, jar, rewrite

我被赋予了将 jar 程序重写或转换为另一种语言（如 C#）的任务。该程序就像工人签入和签出时的虚拟时间戳。该程序的作者制作了一个未完成的程序，如果它需要更新或更改用户，它或多或少地无用，因为使用它的人都无法重写或编辑此代码。我的问题是我对 Java 编程知之甚少或没有经验。

我的问题是：从头开始会更容易吗，或者在 Java 和 C# 方面都有很好的知识的人可以看看它并指出正确的方向。

我的努力：好吧，我尝试了Java Eclipse，但这让我比以前更加困惑，然后我尝试了一个名为Java Decompiler的程序，这就是我发现作者甚至没有完成这个程序的一半，还有用于用户注册的类文件和用于编辑的管理面板，因此可以通过图形用户界面访问所有内容。

这是界面视图（请注意，由于隐私，面部和名称已被鞭打，另请注意，有些词是丹麦语，请忽略这些。“Tids registrering”表示：“时间注册”和“ikke til stede”表示它们不在那里）

![图片](../Images/f9321d91128cf8fbe7836868afeb072b.png)

目标是使程序能够： 1\. 保存每个用户的签入/签出时间和日期。2\. 与其保存在 *.log 中，不如将其保存在数据库中。3\. 管理员访问编辑添加/编辑/删除用户的图形界面

如果 Java/C# 程序员想要提供帮助，我们可以私下讨论传输文件的方式、地点和时间（同样由于隐私）从头开始，所以来自 C# 程序员的帮助也将不胜感激。

* * *

如果这篇文章有任何语法和/或拼写错误，我很抱歉并道歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:27:43.783

由于框架不同，将 UI 从 Java（源代码或字节代码）移植到 C#（或任何其他 .Net 语言）的工作很可能与重写相当或显着高于重写。

对于非 UI 代码，您可以手动或使用一些自动化工具直接移植大部分代码，因为语言足够接近。如果原始代码没有单元测试/集成测试并且没有以您喜欢的风格编写，那么重写成本可能会更低。

最终，是否值得移植工作由*您决定。*

# database - 出租虚拟商品的数据库模型

> ID：15231023
> 
> 赞同：0
> 
> 时间：2013-03-05T18:09:40.453
> 
> 标签：database, modeling

我有一个与数据库建模相关的问题，希望你们给我一些建议，我该如何解决它。

我需要销售“虚拟服务”。我制作了一些表格：Clients、Services、Order、OrderLine。所以一个订单可以包含多个服务。每项服务都有一个“合同时间”。如果我订购的服务有效期为 30 天，那么如果我想继续使用它，我需要再次订购。如果我订购了 30 天的服务，而 10 天过去了，我还有 20 天。如果我再次订购，我将有 50 天。

我如何对数据库建模来控制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:12:22.753

看起来您只需要使用 Orderline 并让开始日期和结束日期对该特定订单有效。

因此，您每次续订都会有一个条目。并且这个表应该有 FK 来服务和订购。

# java - 使用 setExtractWar(false) 在嵌入式 Jetty 中加载战争会引发 IllegalArgumentException

> ID：15231028
> 
> 赞同：4
> 
> 时间：2013-03-05T18:09:50.243
> 
> 标签：java, jetty, classloader, war, embedded-jetty

我使用 Jetty 8.1.9 作为 API 并通过向服务器添加 WebAppContext 处理程序来手动部署。

```
Server server = new Server();

WebAppContext webapp = new WebAppContext();
webapp.setContextPath(CONTEXT_PATH);
webapp.setWar(WEBAPP_PATH);
webapp.setExtractWAR(false);
server.setHandler(webapp);

server.start();
server.join(); 
```

如果 webapp 不包含 WEB-INF/lib 中的任何 jars，那么这工作得很好。但是，如果 webapp 包含 jars，我会收到以下异常：

```
java.lang.IllegalArgumentException: !file: jar:file:/F:/projects/jetty-example/webapps/app.war!/WEB-INF/lib/whatever.jar
    at org.eclipse.jetty.webapp.WebAppClassLoader.addClassPath(WebAppClassLoader.java:245) 
```

如果我设置它会起作用`webapp.setCopyWebInf(true);`

我做错了吗，它是一个错误，还是 Jetty 不能直接从战争中加载库？

**编辑：**
为了提供有关我的设置的更多信息，Jetty 嵌入在一个 jar 中，该 jar 具有一个设置所有内容的主类，类似于 start.jar。这旨在简化标准码头部署（如果您愿意，可以作为外观）。只会使用特定的war包，但由于它们可能是可选的，它们在可执行jar之外。因此，目录结构如下所示：

```
/ baseDirectory
  | embedded-jetty.jar
  / webapps
    | myWar1.war
    | myWar2.war 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:56:47.300

看来您必须`webapp.setCopyWebInf(true);`根据jetty jira的[此页面进行设置。](http://jira.codehaus.org/browse/JETTY-1531)

# objective-c - NSError 代码 256 - Twitter GET

> ID：15231029
> 
> 赞同：2
> 
> 时间：2013-03-05T18:09:51.287
> 
> 标签：objective-c, url, twitter, error-handling, nsdata

我这里有这段代码，*有时*可以。在尝试从 Twitter 获取之前，我确保我已连接到互联网，我很确定这不是问题。

```
 ...
    NSString *twitterURLString = [NSString stringWithFormat:@"https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2"];NSURL *url = [NSURL URLWithString:twitterURLString];

    NSError *error  = nil;
    NSData *dataFromURL = [NSData dataWithContentsOfURL:url
                                            options:0
                                              error:&error];
    NSLog(@"%@", error);  
    ... 
```

这将返回以下内容：

> 错误域 = NSCocoaErrorDomain 代码 = 256 “操作无法完成。（可可错误 256。）” UserInfo = 0x4f6520 {NSURL = [https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts =true&screen_name=twitterapi&count=2](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitterapi&count=2) }

我确定它与 url 编码或其他东西有关，因为实际链接运行良好。此外，它实际上有时会工作，具有相同的互联网连接（我重复一遍，已经过测试并且工作正常）。任何想法将不胜感激！

# javascript - JavaScript 代码约定 - 对象声明

> ID：15231034
> 
> 赞同：0
> 
> 时间：2013-03-05T18:10:09.233
> 
> 标签：javascript, coding-style, conventions

我正在开发 JavaScript 样式指南，并且我知道可以应用于代码约定的唯一规则是保持一致，但我对这个问题很好奇，因为没有一个主要框架使用这个约定。

声明对象/变量时，冒号/等号垂直对齐的优缺点是什么？

```
var a   = 1,
    ab  = 2,
    abc = 3;

var obj = {
    a   : 1,
    ab  : 2,
    abc : 3
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:12:06.310

更好的代码可读性。就是这样。

缺点是使用 find 来查找变量的值时，因为空格比需要的多。`variablename =`因此，由于它实际上被定义为 ，因此搜索可能不会产生任何结果`variablename[space][space][space]=`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:15:26.697

当您再次阅读（或其他人阅读）时，将每个变量放在单独的行上将使您受益，因为很明显这些是不同的变量，因此提高可读性是主要因素。

从长远来看，主要是当将代码传递给其他程序员以维护或修改某些内容时，或者如果您在很长一段时间后重新使用它并且不记得代码时，它会带来好处。

在大多数语言中都是一样的。

此外，将变量与彼此（和值）对齐可以使代码看起来非常整洁，但这样做很麻烦，而且大多数人不这样做。您将对齐行的开头，但之后不会对齐其他任何内容。

想象一下，如果某些事情发生了变化并且您必须重新调整所有内容，将会发生什么。

不好。浪费时间可以花在编程上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:16:44.867

在代码中搜索将是一个明显的缺点：

想象一下我继承了你的系统，或者必须在它上面工作。在这个过程中，我需要弄清楚`a`变量是什么。该系统有一个包含很多行的庞大代码库，因此不能简单地滚动浏览每一行。

如果代码标准是`variable = 123`，那么我可以简单地为`variable[SPACE]=[SPACE]`.

这是您发布的标准可能不是一个好主意的地方。我不知道变量名和等号之间会有多少空格。当然，我可以搜索`a[SPACE]=`,`a[SPACE][SPACE]=`等`a[SPACE][SPACE][SPACE]=`，但这会更难。

搜索声明的唯一方法（在没有“查找声明”助手的原始代码编辑器中）是对`variable\s+=`（一个或多个空格）或`variable\s*=`（零个或多个空格）进行正则表达式搜索，这将花费更长的时间和需要具有正则表达式搜索功能的编辑器。

# javascript - 用数组填充选项框的 Javascript

> ID：15231035
> 
> 赞同：1
> 
> 时间：2013-03-05T18:10:09.330
> 
> 标签：javascript, arrays, option

嗨，想知道您是否可以提供帮助，当用户指定他们的性别类型时，我需要使用 JavaScript 在衣服选项框中填充适当的选项。这是我到目前为止的代码，

```
<script type="text/javascript">
var subListArray = [];
subListArray[0] = 'Select a type first';
subListArray[1] = ['skirt', 'dress', 'tights'];
subListArray[2] = ['jeans', 'hat'];
</script> 
```

## 人

```
 Gender Type: <select name="genderType" id="genderType" >
      <option value="">Gender Type?</option>
      <option value="girl">Female</option>
      <option value="boy">Male</option>
    </select> </br>

        Clothes <select name="clothType">
      <option value="">Choose a Type</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:16:21.530

使用对象而不是数组，以便您可以将 映射`subList`到选定的性别。您不必这样*做*，但它会简化一些事情。向为新选择框创建选项元素的性别选择器添加一个“更改”侦听器：

```
var subListArray = {
    'default': ['Select a type first'],
    'girl': ['skirt', 'dress', 'tights'],
    'boy': ['jeans', 'hat'],
};

document.getElementById('genderType').addEventListener('change', function () {
    var sel = document.getElementById('clothType'),
        value = this.value ? this.value : 'default';
    sel.innerHTML = '';
    subListArray[value].forEach(function (item) {
       sel.appendChild(new Option(item));
    });
}); 
```

[http://jsfiddle.net/VdXk6/](http://jsfiddle.net/VdXk6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:20:35.117

请参阅此页面，其中解释了向 DOM 添加元素： [http ://www.javascriptkit.com/javatutors/dom2.shtml](http://www.javascriptkit.com/javatutors/dom2.shtml)

您需要使用 createElement、setAttribute 和 appendChild。例如：

html:

```
<select id="mySelect">...</select>
<select id="mySubSelect"></select> 
```

javascript:

```
var myNewOption = document.createElement( 'option' );
myNewOption.setAttribute( 'value', 'myOptionValue' );
document.getElementById( 'mySubSelect' ).appendChild( myNewOption ); 
```

这可以循环进行。您还可以检测选择何时更改，如下所示：

javascript:

```
document.getElementById('mySelect').addEventListener('change',function(){
    document.getElementById('mySelect').selectedIndex; // a number showing which element is selected
}); 
```

使用 jQuery 就容易多了。

# sql-server - 在 vb.net 中更新后刷新数据网格视图

> ID：15231036
> 
> 赞同：0
> 
> 时间：2013-03-05T18:10:13.480
> 
> 标签：sql-server, vb.net, visual-studio-2010, datagridview

我有一个特定表的数据网格视图和详细信息。我更新了详细信息，但它没有在数据网格视图中更新？我的更新语句工作正常，因为一旦我退出项目，它就会更新。

```
cmd.CommandText = "update emp_tbl set sal= '" & SalTextBox.Text & "' where id='" & id & "'" 
```

表名：`emp_tbl`

数据网格视图：`emp_tbldatagridview`

更新按钮：

```
cn.Open()

cmd.CommandText = "update emp_tbl set sal= '" & SalTextBox.Text & "' where id='" & id & "'"

cmd.ExecuteNonQuery()
cn.Close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:14:54.073

你必须重新绑定它：

```
 BindingSource binding = new BindingSource(); //req. by win forms
     DataTable dt = new DataTable();
     dt.Load(sql_command.ExecuteReader());
     dgv.DataSource = dt; 
```

这是我发现在 win 表单中执行此操作的最佳方法，.update 不起作用，因为它实际上需要从 SQL 中重新提取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:15:46.640

只需尝试在 datagridview 中重用您的启动代码或从数据中调用启动代码。这是最简单的方法。因为您的启动代码用于将您的数据库绑定到您的 datagridview。所以，每次你保存时，你的代码只是保存它而不是再次重新绑定它。所以，你需要的只是尝试通过调用启动代码来重新绑定

# c# - 触发检查动态创建的单选按钮的更改事件？

> ID：15231039
> 
> 赞同：0
> 
> 时间：2013-03-05T18:10:39.013
> 
> 标签：c#, asp.net, .net, events, radio-button

在下面的代码中，单选按钮是动态创建的，但我想创建动态创建的 КadioИuttons 的选择索引更改事件并处理它.....下面是不触发事件的代码。

```
DataSet ds = SqlHelper.ExecuteDataset(sCon, "Ps_Quiz_QuestionsWithOptions_Get",sQuestions);

if (ds.Tables.Count > 0 ?? ds.Tables[0].Rows.Count > 0)
{
    int iCnt = 0;
    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
    {
        Table tblQsn = new Table();

        //.....Begin Text Qsn Creation.....//
        tblQsn.Width = 500;

        TableRow trQsn = new TableRow();
        iRowCounter++;
        trQsn.ID = "Row_" + iRowCounter.ToString();

        TableCell tcQsn = new TableCell();
        TableCell tcQsnSNo = new TableCell();

        tcQsn.CssClass = "Label";
        tcQsn.BackColor = System.Drawing.Color.Gainsboro;
        tcQsn.Font.Bold = true;
        tcQsn.Text = ds.Tables[0].Rows[i][1].ToString();
        tcQsn.Width = Unit.Percentage(99.5);
        iCellCounter++;
        tcQsn.ID = "Cell_" + iCellCounter.ToString();

        tcQsnSNo.CssClass = "Label";
        tcQsnSNo.Attributes.Add("valign", "top");
        tcQsnSNo.BackColor = System.Drawing.Color.Gainsboro;
        tcQsnSNo.Font.Bold = true;
        tcQsnSNo.Width = Unit.Percentage(0.5);
        iCellCounter++;
        tcQsnSNo.ID = "Cell_" + iCellCounter.ToString();
        iCnt++;
        tcQsnSNo.Text = iCnt.ToString() + ".";

        trQsn.Cells.Add(tcQsnSNo);
        trQsn.Cells.Add(tcQsn);
        tblQsn.Rows.Add(trQsn);

        int rcnt = i;
        int iOptCnt = 0;
        string sStatus = "N";
        while ((rcnt >= 0) && (rcnt < ds.Tables[0].Rows.Count))
        {
            if (ds.Tables[0].Rows[rcnt][2].ToString() == ds.Tables[0].Rows[i][2].ToString())
            {
                if (sStatus == "N")
                {
                    sStatus = "Y";
                }

                TableRow trQsnOpt = new TableRow();
                iRowCounter++;
                trQsnOpt.ID = "Row_" + iRowCounter.ToString();
                TableCell tcQsnOpt = new TableCell();
                tcQsnOpt.CssClass = "Label";
                iCellCounter++;
                tcQsnOpt.ID = "Cell_" + iCellCounter.ToString();
                tcQsnOpt.Attributes.Add("valign", "top");
                tcQsnOpt.VerticalAlign = VerticalAlign.Middle;
                TableCell tcQsnOptSNo = new TableCell();
                tcQsnOptSNo.CssClass = "Label";
                iCellCounter++;
                tcQsnOptSNo.ID = "Cell_" + iCellCounter.ToString();

                iOptCnt++;
                RadioButton oRbOptions = new RadioButton();
                oRbOptions.GroupName = ds.Tables[0].Rows[rcnt][2].ToString() + "_Group";
                oRbOptions.Text = ds.Tables[0].Rows[rcnt][3].ToString().Trim();
                iRbTCounter++;
                oRbOptions.ID = ds.Tables[0].Rows[i][0].ToString() + "_" + ds.Tables[0].Rows[rcnt][2].ToString() + "_" + "Option" + iOptCnt.ToString() + "_" + iRbTCounter.ToString();
                oRbOptions.Enabled = true;

                if (ds.Tables[0].Rows[i][2].ToString() == "Option" + iRbTCounter.ToString())
                {
                    oRbOptions.Checked = true;
                }

                oRbOptions.CssClass = "Label";
                tcQsnOpt.Controls.Add(oRbOptions);
                oRbOptions.CheckedChanged += new System.EventHandler(CheckedChanged);
                oRbOptions.AutoPostBack = false;
                tcQsnOptSNo.Text = iOptCnt.ToString() + ".";
                trQsnOpt.Cells.Add(tcQsnOptSNo);
                trQsnOpt.Cells.Add(tcQsnOpt);
                rcnt++;
                //.....Add Option Image.....//
                tblQsn.Rows.Add(trQsnOpt);
            }
            else
                break;
        }
        i = rcnt - 1;
        PlPreview.Controls.Add(tblQsn);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:16:06.600

简单地为检查的更改事件附加一个事件处理程序

```
oRbOptions.CheckedChanged += (s,e) => {
    oRbOptions.AutoPostBack = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:15:47.897

您正在为单选按钮设置 AutoPostBack 为 false 。所以，

请把假改成真

```
oRbOptions.AutoPostBack = true; 
```

# api - 将外部库添加到项目

> ID：15231045
> 
> 赞同：0
> 
> 时间：2013-03-05T18:11:00.160
> 
> 标签：api, jar, coding-style, licensing, naming-conventions

就我而言，我正在开发一个 Java Web 应用程序，并且我想添加 Jersey JAX-RS API，但这个问题很笼统：

有没有什么推荐的/专业的/最好的方式来为我们的项目添加外部 API？我的意思是，在我的大学项目中，我总是只将 jar 文件导入到我在 Eclipse/NetBeans 中的项目中，但我想知道是否有更专业的方式，也涉及许可证等等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T20:06:15.857

更专业的方法是为您的项目使用 Gradle、Maven、Ivy 等依赖管理工具。

# 马文

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.17.1</version>
</dependency> 
```

# 摇篮

```
'com.sun.jersey:jersey-server:1.17.1' 
```

# 常春藤

```
<dependency org="com.sun.jersey" name="jersey-server" rev="1.17.1"/> 
```

在此之后，当定义所有外部库/api 时，您的项目中有一个位置。检查您正在使用的内容非常容易，比查看 JAR 文件中的其他信息要容易得多。

# java - 短对象创建

> ID：15231049
> 
> 赞同：3
> 
> 时间：2013-03-05T18:11:24.383
> 
> 标签：java, constructor, wrapper, short

我看过这篇文章[Java instantiate Short object in Java](https://stackoverflow.com/questions/11526432/java-instantiate-short-object-in-java)但并没有完全响应我正在寻找的内容。

有谁知道为什么第一行 (//1) 给出错误而第二行 (//2) 没有

```
 Short s = new Short(4);//1

    short s1 = 4;//2 Here I know why it works it gets
 //implicitly narrow converted into a short. 
```

如代码中所述，我理解为什么第二行可以正常工作，但是第一行呢？写作的意义在哪里`Short s = new Short((short)4);` 底线：为什么它不隐含地投射它？它是一个常数而不是一个变量。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:20:47.977

您可以定义一个构造函数采用“short”，另一个采用“int”，语言语义会使您对构造函数的调用模棱两可。所以你需要使用严格类型。此外，由于 Short 是最终的，请尝试使用 Short.valueOf((short) 4) 以避免不必要的对象分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:17:20.400

这是因为 Java 使用“搜索机制”来查找 int 类型的构造函数。当您为 varialbe 赋值时，它的类型被定义并且编译器可以优化代码。使用构造函数（或任何其他方法）这是不可能的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T18:21:35.717

当你说

```
Short s = new Short(4); 
```

您指定的是整数文字，而不是短文字，并且在[Java 语言规范中](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3)`4`是不允许的Method Invocation Conversion 。

然而，当你说

```
short s1 = 4; 
```

这取决于 Java 语言规范所称的[Narrowing Primitive Conversion](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)，即使它会失去精度也是允许的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T18:19:16.630

你应该像下面这样：

```
 Short s = new Short((short) 4); 
```

**原因**： 4 的类型是 Integer/int 而**不是 Short**。因此，您需要进行显式类型转换以确保 Short 构造函数采用兼容类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T18:20:03.530

只是不支持。

对于其他数字对象类型，值有一个文字，数字默认为 int，但很长一段时间你有 L 后缀，double 有 d 等等。

如果您要让 new Short(int) 抛出异常，则构造函数将与其他数字构造函数不一致。

尝试创建一个太大的短原语在编译时进行测试，与字节相同。

如果你这样做：

```
byte b = 1000000; 
```

您的代码不会编译，而是抛出异常。

因此，当您考虑编译器时，行为是一致的。

# java - 在两个不同的端口上运行 Tomcat 服务器

> ID：15231052
> 
> 赞同：47
> 
> 时间：2013-03-05T18:11:37.470
> 
> 标签：java, tomcat, port

我想部署一个 tomcat 服务器，使其同时侦听两个端口（均用于 http 协议）。

只是为了确保您正确理解此要求，我们只有一个服务器实例，但想在两个端口上侦听 HTTP 协议。例如，任何人都可以使用端口号 7080 和 8080 访问部署在我的服务器中的应用程序

有可能这样做吗？如果可能的话，我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-05T18:15:56.700

这很简单。您只需要查看`conf/server.xml`配置文件即可为您想要的端口添加新的连接器。例如，如果您有这样的连接器：

```
<Connector port="8080" 
           protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           redirectPort="8443" 
           URIEncoding="UTF-8" /> 
```

只需在配置文件中添加与上述相同的新连接器，但更改端口参数。就这样。重新启动，你就完成了。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-05T18:15:52.083

是的，有可能。只需像这样编辑 server.xml（位于名为 conf 的文件夹中）：

```
<Connector port="8080" protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="8443" />
<Connector port="8081" protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="8444" /> 
```

这将设置 Tomcat 监听*8080*和*8081*端口。

该[文档](https://tomcat.apache.org/tomcat-9.0-doc/config/http.html)指出：

*   **port：**此连接器将在其上创建服务器套接字并等待传入​​连接的 TCP 端口号。您的操作系统将只允许一个服务器应用程序侦听特定 IP 地址上的特定端口号。如果使用特殊值 0（零），则 Tomcat 将随机选择一个空闲端口用于此连接器。这通常仅在嵌入式和测试应用程序中有用。

*   **redirectPort：**如果此连接器支持非 SSL 请求，并且接收到匹配`<security-constraint>`需要 SSL 传输的请求，Catalina 将自动将请求重定向到此处指定的端口号。

因此，更改 redirectPort 是可选的，具体取决于您希望这样的重定向如何工作。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-12-24T09:32:42.403

您可以在 /conf/server.xml 中定义 2 个不同的服务。

示例如下，

```
<Service name="Catalina_2">
    <Connector port="8081" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8444" />
    <Connector port="8010" protocol="AJP/1.3" redirectPort="8444" />
    <Engine name="Catalina_2" defaultHost="localhost">
      <Realm className="org.apache.catalina.realm.LockOutRealm">
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
      </Realm>
      <Host name="localhost"  appBase="webapps_2" unpackWARs="true" autoDeploy="true">
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log." suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
      </Host>
    </Engine>
  </Service>

  <Service name="Catalina">
    <Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" />
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />
    <Engine name="Catalina" defaultHost="localhost">
      <Realm className="org.apache.catalina.realm.LockOutRealm">
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
      </Realm>
      <Host name="localhost"  appBase="webapps" unpackWARs="true" autoDeploy="true">
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log." suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
      </Host>
    </Engine>
  </Service> 
```

**注意**：您可能需要增加 tomcat 堆大小。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-05T18:22:55.160

您可以在 server.xml 中指定以下代码

```
<Service name="sample">

    <Connector port="81" protocol="HTTP/1.1" maxThreads="100" connectionTimeout="2000"/>

    <Engine name="sample" defaultHost="sample">
         <Host name="myhostname" appBase="webapp2">
             <Context docBase="C:\websites\sample\" />
         </Host>
     </Engine>

</Service> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-20T16:00:35.610

请确定您在哪个用户上运行 Tomcat，因为如果您想在任何特权端口上使用它，您必须在 root 用户下使用它。

您可以做的另一件事是使用 iptables 将端口 80 重定向到 8080。像这样的东西：

```
iptables -t nat -A PREROUTING -d 192.168.10.16 -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 8080 
```

希望能帮助到你

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-15T10:09:08.003

在不同的端口运行tomcat。我们必须更改 server.xml 文件的服务标签内的四件事

1.  我们必须更改端口号。比如8080到80
2.  我们必须将 redirectPort no like 8443 更改为 8444
3.  我们必须将像 Catalina 这样的引擎名称更改为 Catalina_2
4.  我们必须将 appBase 名称（如 webapps）更改为 webapps_1

# java - 如何使用 keytool 运行测试并检查 JCE 是否存在或不存在？

> ID：15231056
> 
> 赞同：0
> 
> 时间：2013-03-05T18:11:48.080
> 
> 标签：java, jce

最近我遇到了来自 Oracle 的 JDK 安装，其中包含 JCE 文件，例如`local_policy.jar`存在于`jre/lib/security`目录中，但这些文件是假文件，并没有真正启用无限强度加密。将它们替换为从 Oracle 下载后，事情变得更加顺利。

现在我认为应该有一种简单的方法来对系统进行健全性测试并防止这样的混乱。所以，我想知道：

> 如果安装并使用了适当的 JCE jar，我可以运行哪些`keytool`操作才能成功？

这样，当它失败时，我知道 local_policy.jar 要么不可用，要么存在一个无用的虚拟文件，应该用真实文件换掉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:04:01.757

正如我在各种评论中已经提到的，您可以使用`getMaxAllowedKeyLength()`测试来确定 jdk/jre 是否支持无限强度加密（在我的测试中，我使用了“AES”密码，但“RC5”也应该可以工作）。在测试这个功能时，你需要有正确的罐子（罐子的内容是重要的部分）。

在我的本地盒子中，加密强度有限的 jdk 有一个包含以下内容的 local_policy.jar 文件：

```
// Some countries have import limits on crypto strength. This policy file
// is worldwide importable.

grant {
    permission javax.crypto.CryptoPermission "DES", 64;
    permission javax.crypto.CryptoPermission "DESede", *;
    permission javax.crypto.CryptoPermission "RC2", 128, 
                                     "javax.crypto.spec.RC2ParameterSpec", 128;
    permission javax.crypto.CryptoPermission "RC4", 128;
    permission javax.crypto.CryptoPermission "RC5", 128, 
          "javax.crypto.spec.RC5ParameterSpec", *, 12, *;
    permission javax.crypto.CryptoPermission "RSA", *;
    permission javax.crypto.CryptoPermission *, 128;
}; 
```

而实力无限的jdk则有以下内容：

```
// Country-specific policy file for countries with no limits on crypto strength.
grant {
    // There is no restriction to any algorithms.
    permission javax.crypto.CryptoAllPermission; 
}; 
```

（请注意，US_export_policy.jar 在两种情况下都是相同的）。

# c# - 如何保持跑分？

> ID：15231063
> 
> 赞同：0
> 
> 时间：2013-03-05T18:12:14.537
> 
> 标签：c#

我正在做一个迷你测试，但我不确定如何在用户提交测试后更新当前分数的运行分数。根据问题是否从错误到正确，分数可能会波动 25 分，反之亦然。

```
public partial class _Default : System.Web.UI.Page
{
private int totalScore = 0;

public void IncrementScore()
{
    totalScore += 25;
}

protected void Page_Load(object sender, EventArgs e)
{

    if (!IsPostBack)
    {
        lblHeader.Text = "quiz not taken";
    }
    else
    {
        lblHeader.Text = "Score: " + totalScore;
    }
}

protected void Submit_Click(object sender, EventArgs e)
{

    /***************************************************************************/
    if (IsValid)
        if (txtAnswer.Text.Equals("primary", StringComparison.InvariantCultureIgnoreCase))
        {
            lblQuestionResult1.ForeColor = System.Drawing.Color.Green;
            lblQuestionResult1.Text = "Correct";
        }
        else
        {
            lblQuestionResult1.ForeColor = System.Drawing.Color.Red;
            lblQuestionResult1.Text = "Incorrect";
        }

    /***************************************************************************/
    if (ddList.SelectedItem.Text.Equals("M:N"))
    {
        lblQuestionResult2.ForeColor = System.Drawing.Color.Green;
        lblQuestionResult2.Text = "Correct";
    }
    else
    {
        lblQuestionResult2.ForeColor = System.Drawing.Color.Red;
        lblQuestionResult2.Text = "Incorrect";
    }

    /***************************************************************************/
    if (RadioButton4.Checked == true)
    {
        lblQuestionResult3.ForeColor = System.Drawing.Color.Green;
        lblQuestionResult3.Text = "Correct";
    }
    else
    {
        lblQuestionResult3.ForeColor = System.Drawing.Color.Red;
        lblQuestionResult3.Text = "Incorrect";
    }

    /***************************************************************************/
    lblQuestionResult4.ForeColor = System.Drawing.Color.Red;
    lblQuestionResult4.Text = "Incorrect";
    if (Answer2.Checked && Answer3.Checked && !Answer1.Checked && !Answer4.Checked)
    {
        lblQuestionResult4.ForeColor = System.Drawing.Color.Green;
        lblQuestionResult4.Text = "Correct";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:15:04.650

递增的方法

```
private int totalScore = 0; 
```

将不起作用，因为您会`_Default`为每个 HTTP 请求获取一个新实例。

您可以将您的跑步成绩保持在`Session`.

但是，我建议始终在需要时通过循环遍历与每个答案相关的答案和分数来重新计算总分。如果人们返回并更改答案（假设允许这样做），这会简化逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:53:58.317

将其修改为查看，检查语法，未使用 VS

protected void Page_Load(object sender, EventArgs e) {

```
if (!IsPostBack)
{
    lblHeader.Text = "quiz not taken";
}
else
{
    Session["TotalScore"] = ""+totalScore; //Storing it in a session
    lblHeader.Text = "Score: " + Session["TotalScore"];
} 
```

}

//递增方法

```
if(Session["TotalScore"]!=null)
 { 
  totalScore += 25;
 } 
else
{
totalScore=int.Parse(Session["TotalScore"])+25;
} 
```

# r - 在 R 中拟合具有时变协变量的全参数比例风险模型

> ID：15231064
> 
> 赞同：3
> 
> 时间：2013-03-05T18:12:16.190
> 
> 标签：r, survival-analysis

我需要用时变协变量拟合参数 PH 模型（因此，不是 Cox 模型）。我们可以在 R 中做到这一点吗？我听说 survreg 函数无法处理随时间变化的协变量。我徒劳地寻找可以解决这个问题的软件包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-20T15:52:01.880

正如@adibender 所写，您可以轻松地估计一个具有恒定基线的模型，该`poisson`系列的对数时间`offset`为`glm`. 这是一个例子

```
> # Input parameters
> n <- 100         # Number of individuals
> t_max <- 5       # max number of period per individual
> beta <- c(-1, 1) # true coefficient
> 
> # Simulate data
> set.seed(47261114)
> sim_dat <- replicate(
+   n, 
+   {
+     out <- data.frame(
+       tstart = rep(NA_integer_, t_max), 
+       tstop  = rep(NA_integer_, t_max),
+       event  = rep(NA, t_max),
+       x      = rnorm(t_max))
+     
+     for(i in 1:t_max){
+       rate     <- exp(beta %*% c(1, out$x[i]))
+       tstop <- min(rexp(1, rate), 1)
+       out[i, ] <- list(i - 1, i - (1 - tstop),  tstop < 1, out$x[i])
+       if(out$event[i])
+         break
+     }
+     out[!is.na(out$tstart), ]
+   }, simplify = FALSE)
> 
> sim_dat <- do.call(rbind, sim_dat)
> head(sim_dat) # show final data
  tstart     tstop event          x
1      0 0.3018182  TRUE  0.7095841
2      0 0.6724803  TRUE  1.5152877
3      0 1.0000000 FALSE  0.1036868
4      1 2.0000000 FALSE -0.5214508
5      2 2.4831577  TRUE  1.0101403
6      0 1.0000000 FALSE  0.1437594
> 
> # Fit with glm
> glm(event ~ x + offset(log(tstop - tstart)), sim_dat, family = poisson())

Call:  glm(formula = event ~ x + offset(log(tstop - tstart)), family = poisson(), 
    data = sim_dat)

Coefficients:
(Intercept)            x  
    -0.9053       0.9714  

Degrees of Freedom: 248 Total (i.e. Null);  247 Residual
Null Deviance:      382.5 
Residual Deviance: 306.4    AIC: 498.4 
```

[`flexsurv`](https://cran.r-project.org/web/packages/flexsurv/)对于其他发行版，该软件包似乎可以。看到[这个帖子](https://stats.stackexchange.com/a/208306/81865)。

# php - 如何选择多个文件并获取它的路径来处理 - php - zend 框架

> ID：15231071
> 
> 赞同：1
> 
> 时间：2013-03-05T18:12:24.300
> 
> 标签：php, zend-framework, path

我想用 zend_form 选择多个文件并获得它的完整路径以在我的操作中处理。但是我无法根据需要选择多个文件，只能选择一个文件，并且在提交时出现错误“文件'视频'超出定义的 ini 大小”。用 Firebug 检查页面，我看到：

```
 <input type="hidden" id="MAX_FILE_SIZE" value="2097152" name="MAX_FILE_SIZE"> 
```

1.  如何选择多文件/2.如何获取文件的物理路径？/这是我的表格

    ```
     $videos = new Zend_Form_Element_File('videos');
     $videos->setLabel('Videos:')
     ->addValidator('Count', false, array('min' => 1, 'max' => 10))
     ->addFilter('StringTrim')
     ->addValidator('NotEmpty')
     ->addValidator(new Zend_Validate_File_Size('200MB'))
     ->setAttrib('enctype','multipart/form-data')
     ; 
    ```

我只想获取文件的路径，不想上传文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:42:39.547

您可以使用 HTML5 的 multiple 属性来选择多个文件。

```
<html>
    <head>
        <title>Test</title>
    </head>
    <body>
        <form>
        <input type="file" multiple />
        </form>
    </body>
</html> 
```

您可以使用javascript获取路径....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:49:54.030

您所指的路径是文件在您的服务器上上传的路径。因此，您需要先将文件上传到服务器上的特定文件夹（即上传）。然后获取文件的路径。

IE

```
$adapter = new Zend_File_Transfer_Adapter_Http();
$adapter->setDestination(APPLICATION_PATH.'/temp/upload');

if($adapter->receive()){
    $fileInfo = $adapter->getFileInfo();
    $filePath = APPLICATION_PATH.'/temp/upload/'.$fileInfo['uploadedFile']['name']
} 
```

# php - PHP Echo 数组值循环（不显示数据）

> ID：15231078
> 
> 赞同：0
> 
> 时间：2013-03-05T18:12:52.520
> 
> 标签：php

我有一个数组......这是结构/数据：

```
array(1) { 
    [0]=> object(SimpleXMLElement)#1 (18) 
        { 
            ["data_123"]=> object(SimpleXMLElement)#3 (29) 

            { 
                ["field1"]=> string(7) "123" 
                ["field2"]=> string(2) "10" 
                ["field3"]=> string(19) "2013-03-05 17:00:00" 
                ["field4"]=> string(19) "2013-03-05 18:00:00" 

            } 

                ["data_234"]=> object(SimpleXMLElement)#4 (29) 

            { 

                ["field1"]=> string(7) "234" 
                ["field2"]=> string(2) "10" 
                ["field3"]=> string(19) "2013-03-05 17:40:00" 
                ["field4"]=> string(19) "2013-03-05 18:10:00" 

            } 

        } 

    } 
```

我正在尝试创建一个循环来显示数据，但没有显示任何内容：

```
foreach ($result as $key => $list) {
   echo "key.: " . $key . "\n";
   echo "field1: " . $list['field1'] . "\n";
   echo "field2: " . $list['field2'] . "\n";
} 
```

它只是不返回任何数据。

我猜这个数组结构的循环可能是错误的？

我怎样才能得到这个数组的回显数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:21:01.700

`$list`是一个*对象*数组，因此您需要两个循环和适当的语法。例如：

```
foreach($list as $objects) {
    foreach($objects as $key => $obj) {
        echo "key.: " . $key . "\n";
        echo $obj->field1 . "\n";
        echo $obj->field2 . "\n";
        echo $obj->field3 . "\n";
        echo $obj->field4 . "\n";
    }
} 
```

# ajax - Wordpress Ajax - 获取函数和 JSON？

> ID：15231082
> 
> 赞同：0
> 
> 时间：2013-03-05T18:13:19.320
> 
> 标签：ajax, json, wordpress

有人能告诉我为什么我用第一个代码而不是第二个代码得到 JSON 的结果吗？

第一的：

```
 jQuery.ajax({
                url: ajax_object.ajax_url,
                data:{
                    action : 'a2m_add_vote',
                    post_id: jQuery('input[name="a2m_post_id"]').val(),
                    answer_option: answer_number
                   },
                dataType: 'JSON',
                success:function(data){
                alert(data);
                },
              error: function(errorThrown){
                   alert('error');
                   console.log(errorThrown);
              }
         }); 
```

第二：

```
 jQuery.get(
            ajax_object.ajax_url,
            {
                action : 'a2m_add_vote',
                post_id: jQuery('input[name="a2m_post_id"]').val(),
                answer_option: answer_number
            },function(data) {
                alert(data);
                },'JSON'); 
```

# git - 如何始终接受带有 github 合并的特定分支

> ID：15231083
> 
> 赞同：0
> 
> 时间：2013-03-05T18:13:24.870
> 
> 标签：git, github

我创建了两个分支并按如下方式开发它们：

```
arc_conversion   / () - () - () - () - () \
master           - () - () - ()   (1) -   (2)
onboarding       \ () - () - () / 
```

请注意，我在树中有数字 1 和 2。我想做的第一件事是将入职合并到大师。请注意，在 master 上有一些提交。我想完全忽略这些更改并始终接受入职分支中的内容，但我不知道如何告诉 git 这样做。这是一个有用的策略吗？过去，我逐个文件地阅读“>>>>>>>>”“<<<<<<<<”标签并擦除部分，但我真的很想避免这种情况，因为这是一个很大的项目。

git checkout master git merge (????) 入职

然后是2。）我想将arc_conversion合并到master中，但这将是一个标准的合并，我觉得我可以做得很好。如果您发现我可以更轻松地执行此操作，请拨打电话。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:33:49.133

您需要使用合并`-X`策略`theirs`

签出主分支

```
git checkout master 
```

将入职分支与 -Xtheirs 选项合并：

```
git merge onboarding -Xtheirs 
```

接下来合并 arc_conversion

```
git merge arc_conversion 
```

应该这样做

# php - 如何更新 JSON 元素

> ID：15231084
> 
> 赞同：1
> 
> 时间：2013-03-05T18:13:28.047
> 
> 标签：php, json

我有一个来自 Joomla 中 CCK 的 JSON 文件。我需要更新文件中包含的评级元素，因为该网站将从使用 5 星评级变为 10 星评级。这意味着所有评级都必须乘以 2。

我可以通过以下方式做到这一点：

```
<?php

$file = "file.txt";
$json = json_decode(file_get_contents($file));

$i = 1;
foreach($json->items as $element){

    foreach($element->elements as $item) {
        if ($item->type == "rating") {

            // Now I have the values of votes and can multiply with 2
            $newRating = number_format($item->data->value * 2 , 4);

            // Now what?
            // How do I get that value back in the json file, in the correct place?

        }

    }

}

?> 
```

如何在正确位置的 json 文件中获取该值？

文件中的完整项目：

```
"items":  {
    "bergans-rondane-lady-65-liter":  {
        "searchable": "1",
        "state": "1",
        "created": "2012-01-19 10:15:25",
        "modified": "2012-01-19 10:23:27",
        "hits": "1312",
        "access": "1",
        "priority": "0",
        "publish_up": "2012-01-19 10:15:25",
        "publish_down": "0000-00-00 00:00:00",
        "author": "Rasmus Bech",
        "tags":  {
            "0": "Bergans"
        },
        "content": null,
        "metadata":  {
            "description": "",
            "keywords": "",
            "robots": "",
            "author": ""
        },
        "config":  {
            "page_title": "",
            "enable_comments": "1",
            "primary_category": "rygsaekke-og-tasker-2"
        },
        "categories":  {
            "0": "rygsaekke-og-tasker-2"
        },
        "elements":  {
            "11cafcc4-0015-48d5-9da0-5c732e33f212":  {
                "type": "text",
                "name": "M\u00e6rke",
                "data":  {
                    "0":  {
                        "value": ""
                    }
                }
            },
            "b13f8b6a-6dc2-4af9-b297-0839f4aa7c5a":  {
                "type": "text",
                "name": "Model",
                "data":  {
                    "0":  {
                        "value": ""
                    }
                }
            },
            "d3b5ddeb-6122-430b-99e9-f9f068ba7f8e":  {
                "type": "image",
                "name": "Teaserbillede",
                "data":  {
                    "file": "images\/anmeldelser\/bergans_rondane.jpg",
                    "title": "",
                    "link": "",
                    "target": "",
                    "rel": "",
                    "lightbox_image": "",
                    "width": "600",
                    "height": "979"
                }
            },
            "c489f3ed-22ec-44a2-8fa3-597f7065f66e":  {
                "type": "image",
                "name": "Flere billeder 1",
                "data":  {
                    "file": "",
                    "title": "",
                    "link": "",
                    "target": "",
                    "rel": "",
                    "lightbox_image": ""
                }
            },
            "a4df94fe-ba21-4932-947c-1860fda062d3":  {
                "type": "image",
                "name": "Flere billeder 2",
                "data":  {
                    "file": "",
                    "title": "",
                    "link": "",
                    "target": "",
                    "rel": "",
                    "lightbox_image": ""
                }
            },
            "f7bd3bdb-7832-423a-a441-a09e456509fd":  {
                "type": "image",
                "name": "Flere billeder 3",
                "data":  {
                    "file": "",
                    "title": "",
                    "link": "",
                    "target": "",
                    "rel": "",
                    "lightbox_image": ""
                }
            },
            "9bac915e-3edd-4761-9fae-48f11b28a6f7":  {
                "type": "image",
                "name": "Flere billeder 4",
                "data":  {
                    "file": "",
                    "title": "",
                    "link": "",
                    "target": "",
                    "rel": "",
                    "lightbox_image": ""
                }
            },
            "e4431ff2-8237-4b6e-9c7c-a091ef3e5e6b":  {
                "type": "textarea",
                "name": "Anmeldelse",
                "data":  {
                    "0":  {
                        "value": "<p>Testen er et battle mellem Bergans Rondane Lady 65 vs. Lowe TFX Annapurna ND 65:80<\/p>\n<p><em>Den samme test ligger under&nbsp;Lowe TFX Annapurna ND 65:80, hvor du kan se kommentarer og karakterne som er givet til Lowe rygs\u00e6kken.<\/em><\/p>\n<p>For de fleste aktive kvinder er en rygs\u00e6k p\u00e5 60 liter en fast, og vigtig, del af udstyrsarsenalet, og hvad enten den bruges p\u00e5 fjeldturen eller til rygs\u00e6ksrejsen, skal den sidde perfekt og have en indretning, der ikke giver gr\u00e5 h\u00e5r i hovedet. Vi har testet to af markedets mest popul\u00e6re modeller, der overraskende nok viste sig at byde p\u00e5 markante forskelle i b\u00e6rekomfort og betjening.<\/p>\n<p>Selv om rygs\u00e6kke udvikler sig med lige s\u00e5 stor hast som alt andet udstyr, er det de f\u00e6rreste af os, der skifter rygs\u00e6kken ud oftere end hver tiende \u00e5r. S\u00e5 er det ved at v\u00e6re l\u00e6nge siden du investerede i din trofaste slider, vil du sandsynligvis blive overrasket over, hvor meget der faktisk er sket p\u00e5 udviklingen af rygs\u00e6kke.<\/p>\n<p>I forbindelse med vores test har vi kigget n\u00e6rmere p\u00e5 to popul\u00e6re modeller, nemlig Bergans Rondane Lady 65 og Lowes TFX Annapurna ND65:80, der begge er allround-rygs\u00e6kke i den nogenlunde fornuftige ende af prisskalaen, hvilket for os vil sige 1500-2000 kroner.<br \/>Vi har gennem en cirka fire m\u00e5neder lang testperiode haft rygs\u00e6kkene med to kvinder p\u00e5 ture, der mest har budt p\u00e5 vandring med 15-20 kilos belastning, men s\u00e6kkene har ogs\u00e5 v\u00e6ret en tur i kanoen og v\u00e6ret brugt som decideret rejserygs\u00e6kke.<\/p>\n<p>Vores test viser f\u00f8rst og fremmest, at man faktisk f\u00e5r meget kvalitet for pengene, n\u00e5r man handler rygs\u00e6k i den ovenn\u00e6vnte prisklasse. Kvinde-detajlerne er ogs\u00e5 i orden p\u00e5 begge rygs\u00e6kke, hvilket vil sige at b\u00e6resystemer sidder som de skal, mens hofteb\u00e6lter er korrekt vinklede til kvinders hofter. Andre detaljer, som flot design og god plads til langt h\u00e5r, er der ogs\u00e5 t\u00e6nkt p\u00e5, men vigtigst af alt blev vi bekr\u00e6ftet i, at rygs\u00e6kke sidder vidt forskelligt, og at det ofte kommer an p\u00e5 smag og behag, samt den enkelte rygs anatomi, n\u00e5r det g\u00e6lder det vigtige valg af rygs\u00e6k.<\/p>\n<p>For eksempel viste Bergans-s\u00e6kken sig at sidde virkelig stabilt p\u00e5 ryg og hofter, mens Lowen havde et kontant og mere dynamisk b\u00e6resystem, der tiltalte folk med god balance og hang til h\u00e5rd polstring. Overordnet kan man sige, at Bergans, med sit afstivede og bl\u00f8de b\u00e6resystem, umiddelbart er den, der vil passe p\u00e5 flest forskellige kvinderygge, mens Lowe deler vandene, og kan overraske positivt s\u00e5vel som negativt. Derudover har Bergans den bedst gennemt\u00e6nkte indretning og dermed letteste adgang til indholdet, mens Lowe uden tvivl er den mest solide og materialem\u00e6ssigt gennemf\u00f8rte af de to.<\/p>"
                    }
                }
            },
            "8acbd5df-6584-40e7-84e0-d918373fe7dc":  {
                "type": "textarea",
                "name": "Design",
                "data":  {
                    "0":  {
                        "value": "<p>B\u00e6rekomfort: **** <br \/>Bergans Rondane Lady 65l byder p\u00e5 et klassisk, bl\u00f8dt og velpolstret b\u00e6resystem. Den giver en fornemmelse, der tiltalte samtlige testere, der ogs\u00e5 vendte tommelfingrene opad for et s\u00e6t virkelig velsk\u00e5rne b\u00e6reremme, der sidder som malet p\u00e5 kvinders overkrop og ikke kommer i vejen for armenes bev\u00e6gelser. S\u00e5 l\u00e6nge v\u00e6gten ikke kommer over 20 kilo, f\u00f8lger hofteb\u00e6ltet ogs\u00e5 godt med uden at klappe sammen.<\/p>\n<p><br \/>Indretning:****(*)<br \/>Hoved-featuren i Bergans-rygs\u00e6kken er en k\u00e6mpestor hesteskoformet \u00e5bning, der giver adgang til s\u00e6kkens hovedrum fra fronten. Hvis man er vant til den klassiske opbygning med adgang fra top og bund, kr\u00e6ver systemet lige lidt tilv\u00e6nning, men p\u00e5 tur fungerer det generelt godt, og vi havde ikke st\u00f8rre problemer med at f\u00e5 fat i indholdet, s\u00e5 l\u00e6nge det ikke var pakket for langt ned i bunden Der er god plads i sidelommerne, og topl\u00e5get kan h\u00e6ves, hvilket er fedt n\u00e5r man skal have lidt ekstra plads. Det ses, at der er t\u00e6nkt over tingene, og faktisk savnede vi kun sm\u00e5 lommer p\u00e5 hofteb\u00e6ltet.<\/p>"
                    }
                }
            },
            "b2e7178c-f277-40be-ae5f-332290452beb":  {
                "type": "textarea",
                "name": "Brugervenlighed",
                "data":  {
                    "0":  {
                        "value": "<p>N\u00e5r det g\u00e6lder selve betjeningen og brug af Rondane Lady, har vi kun minimale sm\u00e5ting at uds\u00e6tte p\u00e5 den ellers meget gennemf\u00f8rte rygs\u00e6k, der fungerer mere eller mindre perfekt og fremkaldte tilfredse smil i testpanelet. Rygl\u00e6ngden kan justeres med et snuptag, mens remme, sp\u00e6nder og lynl\u00e5se k\u00f8rer up\u00e5klageligt og tilmed er lette at betjene med vanter p\u00e5.<\/p>"
                    }
                }
            },
            "f146d372-e22f-4f28-bcca-a902ea3306ef":  {
                "type": "textarea",
                "name": "V\u00e6rdi for pengene",
                "data":  {
                    "0":  {
                        "value": ""
                    }
                }
            },
            "cb9a09d6-4de4-4c8b-94ce-82a66f47a69f":  {
                "type": "textarea",
                "name": "Finish",
                "data":  {
                    "0":  {
                        "value": "<p>Der er brugt gode, robuste materialer til Rondane-rygs\u00e6kken, og man f\u00e5r hurtigt indtrykket af en rygs\u00e6k, der ikke kan sl\u00e5s ihjel. Det er en god metervare, der ikke r\u00e5ber alt for h\u00f8jt, og der er ikke brugt resurser p\u00e5 overdrevent luksuri\u00f8se materialer. Vi er lidt skuffede over lynl\u00e5sene, der i forhold til Lowe Annapurna, virker lidt billige og spinkle, men om kraftigere lynl\u00e5se er n\u00f8dvendige, vil kun mange \u00e5rs brug vise.<\/p>"
                    }
                }
            },
            "69b25ccd-8625-4556-a058-dcd994668d1e":  {
                "type": "textarea",
                "name": "Samlet vurdering",
                "data":  {
                    "0":  {
                        "value": "<p>Norsk fornuft n\u00e5r det er bedst \u2013 Bergans Rondane lady 65l er en velsiddende sejtr\u00e6kker med en genial indretning og virkelig nem adgang til indholdet \u2013 i et apsis er det ligefrem en forn\u00f8jelse at skulle finde grej frem. P\u00e5 ryggen sidder s\u00e6kken virkelig godt, men du skal v\u00e6re forberedt p\u00e5 en lidt statisk og fastsp\u00e6ndt fornemmelse, da b\u00e6resystemet ikke f\u00f8lger dine bev\u00e6gelser, hvis du i stejlt terr\u00e6n skal ud i kroppens yderstillinger. Dette er dog ikke noget problem under almindelige forhold. S\u00e6kken har desuden den helt store fordel, at den kan bruges til b\u00e5de fjeldtur og backpacking.<\/p>"
                    }
                }
            },
            "f951e74e-f30c-4f83-b5fd-fe8d90e03f99":  {
                "type": "rating",
                "name": "Design",
                "data":  {
                    "votes": "1",
                    "value": "4.0000"
                }
            },
            "7bb05e07-fbdd-4dee-ade9-ee2082281b52":  {
                "type": "rating",
                "name": "Brugervenlighed",
                "data":  {
                    "votes": "1",
                    "value": "5.0000"
                }
            },
            "4e522fab-0cb5-4342-84d8-518050592150":  {
                "type": "rating",
                "name": "V\u00e6rdi for pengene",
                "data":  {
                    "votes": "",
                    "value": ""
                }
            },
            "c0c3ca0f-055d-4dec-bfe6-07c23730d6bc":  {
                "type": "rating",
                "name": "Finish",
                "data":  {
                    "votes": "1",
                    "value": "3.0000"
                }
            },
            "fb3abe5f-7493-4bc7-84b2-b8acd9e34346":  {
                "type": "rating",
                "name": "Samlet vurdering",
                "data":  {
                    "votes": "1",
                    "value": "4.0000"
                }
            },
            "70536a2f-000c-4081-8262-eafcfff8e65d":  {
                "type": "rating",
                "name": "Design (bruger)",
                "data":  {
                    "votes": "",
                    "value": ""
                }
            },
            "6492789c-057d-40c3-9342-449c01145c27":  {
                "type": "rating",
                "name": "Brugervenlighed (bruger)",
                "data":  {
                    "votes": "",
                    "value": ""
                }
            },
            "8256f96f-57af-411c-ba00-61899225fb56":  {
                "type": "rating",
                "name": "V\u00e6rdi for pengene (bruger)",
                "data":  {
                    "votes": "",
                    "value": ""
                }
            },
            "f89f5edd-fafc-4025-818d-e7923eeb3aee":  {
                "type": "rating",
                "name": "Finish (bruger)",
                "data":  {
                    "votes": "",
                    "value": ""
                }
            },
            "8a54778d-bd8b-4f4b-90bc-016e50b7d8bc":  {
                "type": "rating",
                "name": "Samlet vurdering (bruger)",
                "data":  {
                    "votes": "",
                    "value": ""
                }
            },
            "ddd92a65-ebe3-482b-890b-0ca9bd1884b4":  {
                "type": "text",
                "name": "Pris",
                "data":  {
                    "0":  {
                        "value": "1599"
                    }
                }
            },
            "8cd2f1b9-6734-4e5b-910e-1f5bf237f0d8":  {
                "type": "link",
                "name": "Link",
                "data":  {
                    "0":  {
                        "value": "http:\/\/www.spejdersport.dk",
                        "text": "",
                        "target": "",
                        "custom_title": "",
                        "rel": ""
                    }
                }
            },
            "f3abcc85-97cc-4e55-a94a-41ea497ffe02":  {
                "type": "socialbookmarks",
                "name": "Sociale netv\u00e6rk",
                "data":  {
                    "value": "1"
                }
            }
        },
        "group": "Anmeldelse af udstyr",
        "name": " Bergans Rondane Lady 65 liter"
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:19:26.520

读取 json 文件，使用`json_decode()`. 迭代对象，更改评级，然后`json_encode()`将其写回文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:18:31.313

我认为你不能在没有对 json 的交互的情况下做到这一点，但这个库可能有助于完成这项任务

[http://jsonselect.org/#overview](http://jsonselect.org/#overview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T18:41:35.813

```
<?php

$file = "file.txt";
$json = json_decode(file_get_contents($file));

$i = 1;
foreach($json->items as $key => $element){

    foreach($element->elements as $key2 => $item) {
        if ($item->type == "rating") {

            // Now I have the values of votes and can multiply with 2
            $newRating = number_format($item->data->value * 2, 4);

            // Now what?
            // How do I get that value back in the json file, in the correct place?
            $json->items->{$key}->elements->{$key2}->data->value = $newRating;

        }
    }
}

// back to a string
$newJson = json_encode($json);

// here you then write back to file with fopen, fwrite and fclose

?> 
```

# javascript - 如何在现代浏览器中跟踪/分析 GeoLocation 请求？

> ID：15231087
> 
> 赞同：1
> 
> 时间：2013-03-05T18:13:33.040
> 
> 标签：javascript, html, geolocation

Firefox 和 Google Chrome 等现代浏览器提供了一个 javascript API，在用户许可后，它可以检测用户的位置坐标并与 Web 服务器共享。但要做到这一点，它必须向Web 服务**发出额外的 HTTP 或其他网络请求。**是否有一种简单的方法可以检查此请求以进行故障排除？查看发送的内容、发送到的位置以及发送时间。

它不会出现在 Firebug 或 Web Inspector 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:55:33.767

每个浏览器引擎都使用自己的逻辑工作。**每个人都通用**的经过验证的功能提供了许多功能（成功、错误回调、监视等），可以帮助您正确排除故障。

如果您想了解更多信息，请在下面的 mozilla 文档中找到有关它的信息。

[https://developer.mozilla.org/en/docs/Using_geolocation](https://developer.mozilla.org/en/docs/Using_geolocation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:33:07.643

使用数据包嗅探器实用程序分析原始网络请求。

# internet-explorer - IE没有定位绝对div

> ID：15231090
> 
> 赞同：0
> 
> 时间：2013-03-05T18:13:43.177
> 
> 标签：internet-explorer, html, positioning

在[此链接](http://www.pelicanworldwide.com)上，您将看到标志和顶部图像在 FF 中是正确的，但在 IE7-8 中则不正确。为什么？容器是否缺少某些东西？

```
#container { min-width:1024px; max-width:1024px; margin: 0 auto; text-align: left; } 
#bannerFlag { position:absolute; top:8px; margin-left:36px; } 

<div id="container">
<div id="bannerFlag">
</div>
</div> 
```

# c# - 用户控件内的下拉控件的RequiredFieldValidator 不会触发

> ID：15231091
> 
> 赞同：1
> 
> 时间：2013-03-05T18:13:45.193
> 
> 标签：c#, drop-down-menu, requiredfieldvalidator

以下是我的代码的测试场景。1) 一旦用户选择了 Webpage.aspx 上的一个单选按钮，就会出现一个模态弹出扩展器。2) 在模式弹出窗口中定义了一个用户控件 (SSL_Ticket.ascx)。3) 为包含在用户控件内的下拉列表定义了一个RequiredFieldValidator。4) 如果用户从下拉列表中选择“0”值，则不会显示验证错误消息。

# 代码

网页.aspx

```
 <asp:RadioButtonList ID="RadioButtonListForTicket" runat="server"  AutoPostBack="true"
                         OnSelectedIndexChanged="radioButtonListForTicket_OnSelectedIndexChanged">
                            <asp:ListItem Selected="True">No</asp:ListItem>
                            <asp:ListItem>Yes</asp:ListItem>
                      </asp:RadioButtonList>
                      <ajaxToolkit:ModalPopupExtender ID="ModalPopupExtenderForTicket" runat="server" BackgroundCssClass="popUpStyle"
                          DropShadow="true" PopupControlID="divTicketPreview" PopupDragHandleControlID="panelDragHandle"
                          TargetControlID="btnForPopupAppear"   CancelControlID="btnForPopupDisappear"/> 
```

…………
_

网页.aspx.cs

```
protected void radioButtonListForTicket_OnSelectedIndexChanged(object sender, System.EventArgs e)
{
    if (RadioButtonListForTicket.SelectedItem.Text.ToString().Equals("Yes"))
    {

        // Check if the sites are selected
        updateSelectionCount();
        updateListOfSites();

        if (selectionCount == 0)
        {
            lblSSLTicketSelection.Text = "Please select a site.";
            RadioButtonListForTicket.SelectedValue = "No";
            return;
        }
        else
        {
            lblSSLTicketSelection.Text = "";
        }

        ....

        ModalPopupExtenderForTicket.Show();
    }
} 
```

...

SSL_Ticket.ascx

```
 <asp:DropDownList ID="cmbRootCause" runat="server" Width="255px" OnSelectedIndexChanged="cmbRootCause_SelectedIndexChanged" AutoPostBack="true"
                CausesValidation="true">
                <asp:ListItem Value="0">Select</asp:ListItem>
                <asp:ListItem Value="1">Item1</asp:ListItem>
           </asp:DropDownList>
           <asp:RequiredFieldValidator ID="reqdFieldForRootCause" runat="server" ControlToValidate="cmbRootCause" InitialValue="Select" 
               ErrorMessage="Please select root cause" ValidationGroup="validateRootCause"  Visible="false" Display="Dynamic" EnableClientScript="true">
           </asp:RequiredFieldValidator> 
```

...

SSL_Ticket.ascx.cs

```
 protected void cmbRootCause_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (cmbRootCause.SelectedItem.ToString().Equals("Other"))
        {
            lblcmbRootCause.Text = "";
            lblcmbRootCause.Visible = false;
            txtRootCauseOther.Visible = true;
        }
        else if (cmbRootCause.SelectedItem.ToString().Equals("Select"))
        {
            lblcmbRootCause.Visible = true;
            lblcmbRootCause.Text = "Please select root cause";
        }
        else
        {
            lblcmbRootCause.Text = "";
            lblcmbRootCause.Visible = false;
            txtRootCauseOther.Visible = false;
        }
    } 
```

我确实浏览了几个解决方案（ValidateProperty、客户端验证、RangeValidation 等），但它没有触发验证文本。

这没有帮助 -[在用户控件中处理 RequiredFieldValidator](https://stackoverflow.com/questions/4829758/handling-requiredfieldvalidator-inside-of-a-user-control)

非常感谢您的帮助。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:22:26.137

从必填字段验证器中删除`visible = false`属性，默认情况下它们不会在开头显示。

```
<asp:RequiredFieldValidator ID="reqdFieldForRootCause" runat="server" ControlToValidate="cmbRootCause" InitialValue="Select" 
               ErrorMessage="Please select root cause" ValidationGroup="validateRootCause"  **Visible="false"** Display="Dynamic" EnableClientScript="true">
           </asp:RequiredFieldValidator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:22:44.540

> 那么在您的“RequiredFieldValidator”中，您`DropDownList`需要删除它：

```
InitialValue="Select" 
```

# ios - 为什么 Reachability connectionRequired 很重要，为什么需要它？

> ID：15231096
> 
> 赞同：1
> 
> 时间：2013-03-05T18:13:59.853
> 
> 标签：ios, reachability

为什么 Reachability connectionRequired 很重要，为什么需要它？

我有一些使用connectionrequired的旧代码，如下所示：

```
BOOL connectionRequired= [curReach connectionRequired]; 
```

我的问题是为什么我们需要检查上面的内容以及所需的连接？主机/服务器或用户/电话等？

# shell - sed 命令更改行的一部分

> ID：15231097
> 
> 赞同：0
> 
> 时间：2013-03-05T18:14:00.493
> 
> 标签：shell

我想我可以编写一个小 Python 脚本来执行此操作，但我正在尝试学习如何仅使用 shell 来执行此类操作，因为我认为它更有意义。

基本上我有这样的事情：

数据库.txt：

```
line1|tag1
line2|tag1
line3|tag2
line4|tag1 
```

lines_to_change.txt：

```
line1
line4 
```

what_i_want.txt：

```
line1|tag2
line2|tag1
line3|tag2
line4|tag2 
```

所以，基本上，我想要的是，对于`lines_to_change.txt`文件中的每一行，将该行的标记从更改`tag1`为`tag2`. 有人告诉我这是命令行的工作`sed`，但在 man 文档中找不到我的方式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:26:28.027

尝试这个

```
cat lines_to_change.txt | xargs -I '{}' sed -i 's/{}|tag1/{}|tag2/g' database.txt 
```

结果将保存到`database.txt`自身中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:16:15.150

这是一个在 tag1 和 tag2 之间切换的解决方案。

（因此，如果是 tag1，则将其更改为 tag2，如果是 tag2，则将其更改为 tag1。）它围绕一个中间标签“tag3”（不管您如何称呼它），但它允许您切换在不知道现有标签状态的情况下。file2.txt 有您的令牌，而 file1.txt 是您的数据库文件（-i 命令就地添加）：

```
cat file2.txt | xargs -I '{}' sed -i 's/{}|tag1/{}|tag3/gp;s/{}|tag2/{}|tag1/gp;s/{}|tag3/{}|tag2/gp' file1.txt 
```

我恳请您记住的一件事是能够通过以下字符串将一个命令的输出传递到另一个命令的输入：

```
| xargs -I '{}' 
```

因为这将使您成为一个非常强大的命令行用户。

编辑：

如果您只是想将所有 tag1 更改为 tag2，请执行以下操作：

```
cat file2.txt | xargs -I '{}' sed -i 's/{}|tag1/{}|tag2/gp' file1.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:28:06.807

```
awk 'NR==FNR { a[$0]; next } 
    $1 in a{ $2 = "tag2" } 1' FS=\| OFS=\| lines_to_change.txt input.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T18:33:39.730

首先在您的 lines_to_change.txt 文件上使用 sed 创建另一个 sed 脚本：

```
sed 's;.*;/&/s/tag1/tag2/;' lines_to_change.txt > lines_to_change.sed 
```

然后使用该新命令文件编辑您的原始文件：

```
sed -f lines_to_change.sed database.txt > what_i_want.txt 
```

# android - Android选项卡选定的图像颜色

> ID：15231103
> 
> 赞同：0
> 
> 时间：2013-03-05T18:14:15.447
> 
> 标签：android, android-tabhost, android-styles, android-style-tabhost

Android 是否有一种内置机制可以让选项卡上的图像看起来“亮起”？如果是这样，我该如何实施？

# vb.net - 如何使用 Exchange Server 打开和处理 Excel 附件？

> ID：15231106
> 
> 赞同：0
> 
> 时间：2013-03-05T18:14:37.337
> 
> 标签：vb.net, exchangewebservices, excel-interop

我正在寻找一些关于将 Excel 附件加载到内存中的帮助，然后处理 Excel 文档。我遇到的主要问题是使用 EWS 将附件加载到内存中，然后处理文档。最终结果是加载附件，逐行读取excel文档并将数据存储到一个对象中以匹配excel布局。我已经有了存储 EWS 邮件对象的附件属性的代码。然后我需要在这里进行处理...

```
 Public Function ParseEmails(ByVal emails As List(Of MailDT)) As List(Of    PriceInjectionDT)
    Dim ParsedEmails As New List(Of PriceInjectionDT)

    For Each email As MailDT In emails
        For Each a As Microsoft.Exchange.WebServices.Data.Attachment In email.Attachment
            a.Load()

        Next
    Next

End Function 
```

这使用 .Load 将附件加载到内存中，但不允许我访问 excel 属性:( 帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:50:32.570

您可以使用将附件写入磁盘，而不是将附件加载到内存中[`FileAttachment.Load`](http://msdn.microsoft.com/en-us/library/dd634091%28v=exchg.80%29.aspx)。然后，您将代码更改为以下（未经测试）：

```
For Each email As MailDT In emails
    For Each a As Microsoft.Exchange.WebServices.Data.FileAttachment In email.Attachment
        a.Load("C:\temp\" + a.Name);

    Next
Next 
```

将附件保存到磁盘后，您可以使用 Office 主互操作程序集 (PIA) 的功能打开和操作它。我[在 CodeProject](http://www.codeproject.com/Articles/5123/Opening-and-Navigating-Excel-with-C)上找到了一篇关于如何使用 PIA 的文章。

# php - 在 Laravel 中使用自动控制器路由是个坏主意

> ID：15231107
> 
> 赞同：5
> 
> 时间：2013-03-05T18:14:43.513
> 
> 标签：php, laravel, laravel-3

我从 CodeIgniter 来到 Laravel。

那么，使用自动路由到所有控制器是一个坏主意吗？

```
Route::controller(Controller::detect()); 
```

我应该使用它而不是在 routes.php 中创建路由吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T18:19:43.043

是的，这很糟糕。

Controller::detect() 实际上在 Laravel 4 中并不存在，因为它有点坏了。

detect() 将通过您的文件系统并返回控制器文件，但这是一个坏主意，因为*您定义路由的顺序很重要*。如果你有任何嵌套的控制器，你会发现这很容易被破坏。

detect() 还会根据文件系统以不同的顺序返回文件，因此这会导致很多不可预测性。

我认为您应该以任何方式定义所有路由，它更容易阅读和调试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T18:17:21.747

Laravel 没有 CI 的一个有趣的事情是，对于某些页面，您可以直接路由到视图，而根本不需要控制器。想想像“关于我们”这样的静态页面。CodeIgniter 需要您为此设置一个控制器 + 视图，即使控制器几乎不会做任何事情。在 Laravel 的情况下，您可以在这种情况下直接路由到视图。

手动设置路线将允许您设置这些短路路线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T18:21:40.007

自动检测是个坏主意。

您可以使用路由或使用 Route::controller('mycontroller') 或控制器数组，如 Route::controller(array('mycontroller', mycontroller2');

然后你得到好处，没有自动检测。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-11T23:03:58.303

在 laravel 4 中：

[你可以使用像文档http://laravel.com/docs/controllers#restful-controllers](http://laravel.com/docs/controllers#restful-controllers)这样的 Restful Controller

但 `Route::controller()`必须以两个参数为最低要求第一个参数代表URL响应，第二个参数是控制器名称

还

您可以将第三个参数写入`Route::controller()`一个数组，其中包含操作名称（带有 HTTP 动词的操作名称）和此操作的路由名称

前任：

```
Route::controller('users','UsersController',array(
            'getUsers' =>"listUsers" , 
           )); 
```

getUsers 操作的路由名称是 listUsers

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-04T06:01:50.097

下面是 CRUD 和通用路由的一个很好的例子

类型 `php arisan controller:make SampleController`

编辑***routes.php***并添加

```
Route::resource('sample', 'SampleController'); 
```

然后键入 `php artisan routes`以显示新创建的路线

# r - 使用ggplot2从已经汇总的计数中堆叠直方图

> ID：15231109
> 
> 赞同：10
> 
> 时间：2013-03-05T18:14:50.237
> 
> 标签：r, graphics, ggplot2, histogram

我需要一些帮助，为从已经汇总的计数数据生成的 ggplot2 直方图着色。

这些数据类似于生活在许多不同地区的 # 名男性和 # 名女性的数量。绘制总计数的直方图很容易（即男性 + 女性）：

```
set.seed(1)
N=100;
X=data.frame(C1=rnbinom(N,15,0.1), C2=rnbinom(N,15,0.1),C=rep(0,N)); 
X$C=X$C1+X$C2;
ggplot(X,aes(x=C)) + geom_histogram() 
```

但是，我想根据 C1 和 C2 的相对贡献为每个条形图着色，以便获得与上例相同的直方图（即整体条形图高度），另外我还可以看到“C1”类型的比例和堆积条形图中的“C2”个体。

建议使用 ggplot2 以干净的方式执行此操作，在示例中使用“X”之类的数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T20:29:57.637

很快，您可以使用`stat="identity"`选项和`plyr`包手动计算直方图来执行 OP 想要的操作，如下所示：

```
library(plyr)

X$mid <- floor(X$C/20)*20+10
X_plot <- ddply(X, .(mid), summarize, total=length(C), split=sum(C1)/sum(C)*length(C))

ggplot(data=X_plot) + geom_histogram(aes(x=mid, y=total), fill="blue", stat="identity") + geom_histogram(aes(x=mid, y=split), fill="deeppink", stat="identity") 
```

我们基本上只是为如何定位列制作一个“中间”列，然后制作两个图：一个是总数（C）的计数，另一个是调整到其中一列的计数（C1）的列。您应该可以从这里进行自定义。

![直方图演示](../Images/af502a5866703a038fe9e7cce5c07ac8.png)

**更新 1**：我意识到我在计算中频时犯了一个小错误。现在修好了。另外，我不知道为什么我使用“ddply”语句来计算中间值。那很愚蠢。新代码更清晰、更简洁。

**更新 2**：我返回查看评论并注意到一些令人恐惧的事情：我使用总和作为直方图频率。我已经对代码进行了一些清理，并从有关着色语法的评论中添加了一些建议。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T21:20:35.980

这是一个使用`ggplot_build`. 这个想法是首先得到你的旧/原始情节：

```
p <- ggplot(data = X, aes(x=C)) + geom_histogram() 
```

存储在`p`. 然后，用于`ggplot_build(p)$data[[1]]`提取数据，特别是列`xmin`和`xmax`（以获得相同的直方图中断/binwidths）和`count`列（通过 标准化百分比`count`。这是代码：

```
# get old plot
p <- ggplot(data = X, aes(x=C)) + geom_histogram()
# get data of old plot: cols = count, xmin and xmax
d <- ggplot_build(p)$data[[1]][c("count", "xmin", "xmax")]
# add a id colum for ddply
d$id <- seq(nrow(d)) 
```

现在如何生成数据？我从你的帖子中了解到的是这样的。以情节中的第一个栏为例。它的计数为 2，并且从 延伸`xmin = 147`到`xmax = 156.8`。当我们检查`X`这些值时：

```
X[X$C >= 147 & X$C <= 156.8, ] # count = 2 as shown below
#    C1 C2   C
# 19 91 63 154
# 75 86 70 156 
```

在这里，我计算`(91+86)/(154+156)*(count=2) = 1.141935`和`(63+70)/(154+156) * (count=2) = 0.8580645`作为我们将生成的每个条的两个标准化值。

```
require(plyr)
dd <- ddply(d, .(id), function(x) {
    t <- X[X$C >= x$xmin & X$C <= x$xmax, ]
    if(nrow(t) == 0) return(c(0,0))
    p <- colSums(t)[1:2]/colSums(t)[3] * x$count
})

# then, it just normal plotting
require(reshape2)
dd <- melt(dd, id.var="id")
ggplot(data = dd, aes(x=id, y=value)) + 
      geom_bar(aes(fill=variable), stat="identity", group=1) 
```

这是原始情节：

![original_ggplot2_plot](../Images/cf07ba7d4ab39b520738cc187d0dd393.png)

这就是我得到的：

![ggplot2_weird_histogram_plot](../Images/6ce45f9c6b9026d24074b08cc108512f.png)

**编辑：**如果您还想获得正确的休息时间，那么您可以`x`从旧情节中获取相应的坐标并在此处使用它而不是`id`：

```
p <- ggplot(data = X, aes(x=C)) + geom_histogram()
d <- ggplot_build(p)$data[[1]][c("count", "x", "xmin", "xmax")]
d$id <- seq(nrow(d))

require(plyr)
dd <- ddply(d, .(id), function(x) {
    t <- X[X$C >= x$xmin & X$C <= x$xmax, ]
    if(nrow(t) == 0) return(c(x$x,0,0))
    p <- c(x=x$x, colSums(t)[1:2]/colSums(t)[3] * x$count)
})

require(reshape2)
dd.m <- melt(dd, id.var="V1", measure.var=c("V2", "V3"))
ggplot(data = dd.m, aes(x=V1, y=value)) + 
      geom_bar(aes(fill=variable), stat="identity", group=1) 
```

![在此处输入图像描述](../Images/22c09ae0234fe5c134acff267ea6a302.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T18:19:12.843

怎么样：

```
library("reshape2")
mm <- melt(X[,1:2])
ggplot(mm,aes(x=value,fill=variable))+geom_histogram(position="stack") 
```

# telerik-mvc - 防止在 Telerik MVC dll 网格中回发回车键

> ID：15231113
> 
> 赞同：-1
> 
> 时间：2013-03-05T18:15:02.303
> 
> 标签：telerik-mvc

我想防止在 Telerik MVC dll 网格中按回车键回帖。有什么办法可以做到这一点。请建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:24:06.493

你试图阻止事件冒泡是什么？我会建议这样的事情：

```
 $(function(){
        $('.t-grid').data().tGrid.element.on('keydown',function(e){
          if(e.keyCode==13){
                e.stopImmediatePropagation();
         }
        })
    }) 
```

# javascript - express.js 表单，新类

> ID：15231115
> 
> 赞同：0
> 
> 时间：2013-03-05T18:15:06.283
> 
> 标签：javascript, node.js, express, coffeescript

我想在快递中做这样的事情。我正在使用 express-coffee [https://github.com/twilson63/express-coffee](https://github.com/twilson63/express-coffee)

```
require "../forms/register"
exports.index = (req, res) ->
    rf = new registerForm
    rf.setField("username", "letters")
    res.render 'index' 
```

我在表格/注册表中写了

```
class registerForm
  setField: (var1, var2) ->
    return "test" 
```

但它不起作用

如何编写类、导入、扩展和使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:19:54.433

你应该明确地导出你的表单类：

```
module.exports = class RegisterForm
  setField: (var1, var2) ->
    return "test" 
```

并明确引用您需要的内容：

```
RegisterForm = require "../forms/register" 
```

顺便说一句，类的 TitleCase 是一种 CoffeeScript 约定。

# ruby-on-rails - 找不到编辑视图的路径

> ID：15231116
> 
> 赞同：0
> 
> 时间：2013-03-05T18:15:09.343
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我目前正在尝试查看我的网站资源之一的索引，无论我尝试了什么，它都无法找到编辑路线。它不断给我：

```
No route matches {:action=>"edit", :controller=>"posts", :user_id=>nil, :id=>nil} 
```

index.html.erb：

```
<h1>Listing posts</h1>

<table>
  <tr>
    <th>Postname</th>
    <th>Postcontent</th>
    <th>Poster</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @posts.each do |post| %>
  <tr>
    <td><%= post.postname %></td>
    <td><%= post.postcontent %></td>
    <td><%= post.poster %></td>
    <td><%= link_to 'Show', user_posts_path %></td>
    <td><%= link_to 'Edit', edit_user_post_path(@user,@post) %></td>
    <td><%= link_to 'Destroy', user_posts_path, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Post', new_user_post_path %> 
```

控制器：

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all
    @users = User.all
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end 
```

路线：

```
 resources :users do
    resources :posts
  end 
```

耙路线输出：

```
 user_posts GET    /users/:user_id/posts(.:format)          posts#index
               POST   /users/:user_id/posts(.:format)          posts#create
 new_user_post GET    /users/:user_id/posts/new(.:format)      posts#new
edit_user_post GET    /users/:user_id/posts/:id/edit(.:format) posts#edit
     user_post GET    /users/:user_id/posts/:id(.:format)      posts#show
               PUT    /users/:user_id/posts/:id(.:format)      posts#update
               DELETE /users/:user_id/posts/:id(.:format)      posts#destroy
         users GET    /users(.:format)                         users#index
               POST   /users(.:format)                         users#create
      new_user GET    /users/new(.:format)                     users#new
     edit_user GET    /users/:id/edit(.:format)                users#edit
          user GET    /users/:id(.:format)                     users#show
               PUT    /users/:id(.:format)                     users#update
               DELETE /users/:id(.:format)                     users#destroy
          root        /                                        home#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:17:57.207

如果您像这样在路由路径上指定参数名称怎么办：

```
<td><%= link_to 'Edit', edit_user_post_path(:user_id => @user.id, :id => @post.id) %></td> 
```

# c# - 在样式中指定列表框 ItemContainer 上的数据上下文类型

> ID：15231120
> 
> 赞同：14
> 
> 时间：2013-03-05T18:15:30.320
> 
> 标签：c#, wpf, silverlight, xaml, binding

在`ListBox`我有一个 ItemContainer 的属性使用语法`IsSelected`绑定到我的 ViewModel 的属性。`IsSelected``<ListBox.ItemContainerStyle>`

它工作正常，但我收到 Resharper 警告：

> 无法解析“FooSolution.BarViewModel”类型的数据上下文中的属性“IsSelected”。

如何在 ListBox ItemContainer 上指定 DataContext 类型以消除此警告？

这是代码。我有一`BarViewModel`堂课：

```
public ObservableCollection<FooViewModel> FooItems { get;set; } 
```

`BarViewModel`分配给包含 ListBox 的控件中的 DataContext

如下`FooViewModel`：

```
public bool IsSelected
{
    get
    {
        return isSelected;
    }

    set
    {
        if (isSelected == value)
        {
            return;
        }

        isSelected = value;
        RaisePropertyChanged(() => IsSelected);
    }
} 
```

和这样的 XAML：

```
<ListBox ItemsSource="{Binding FooItems}" SelectionMode="Multiple">        
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="IsSelected" Value="{Binding IsSelected}" />
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

**更新** 我尝试过`d:DataContext`使用设置器进行设置，正如 HighCore 所建议的那样，但不幸的是，它无济于事，甚至破坏了构建：

```
<Setter Property="d:DataContext" Value="{d:DesignInstance yourxmlns:yourItemViewModelClass}"/> 
```

（抛出：错误 1 ​​XML 命名空间“schemas.microsoft.com/expression/blend/2008”中不存在标记“DesignInstance”；。第 31 行位置 50。）

**更新 2** 最后，解决方案是设置`d:DataContext`样式元素本身（请参阅下面的答案）：

```
<ListBox.ItemContainerStyle>
    <Style TargetType="{x:Type ListBoxItem}" d:DataContext="{d:DesignInstance local:FooViewModel }">
        <Setter Property="IsSelected" Value="{Binding IsSelected}" />
    </Style> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-05T19:39:00.743

正如@HighCore 所指出的，解决方案是`d:DataContext`从 blend SDK 中指定属性，但是，它仅在 Style 元素本身上设置时才起作用，而不是在属性设置器中：

```
<ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}" d:DataContext="{d:DesignInstance local:FooViewModel }">
            <Setter Property="IsSelected" Value="{Binding IsSelected}" />
        </Style>
</ListBox.ItemContainerStyle> 
```

这消除了 Resharper 的警告，并在 ViewModel 上重新命名属性时更改绑定路径。凉爽的！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-09T01:09:41.130

使用标记`d:DataContext="{d:DesignInstance nmspc:Clz}"`的其他属性指定对我**没有**帮助：R# / IntelliSense 确实停止突出显示我绑定到的属性，*但设计器还向我显示了错误消息而不是 view*。`Style`

 ***我发现的技巧是在标签`<d:Style.DataContext>` **内指定。**`Style`它似乎是如此普遍，以至于它回答了另一个问题，关于将接口用作`d:DataContext`.

这是我对这个问题的回答，举了一个小例子： [https ://stackoverflow.com/a/46637478/5598194](https://stackoverflow.com/a/46637478/5598194)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T18:35:43.360

像这样使用`d:DataContext`：

```
<Setter Property="d:DataContext" Value="{d:DesignInstance yourxmlns:yourItemViewModelClass}"/> 
```

您还需要将以下`xmlns`es 添加到根元素：

```
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
     mc:Ignorable="d" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-21T13:28:05.840

除了以前的答案：摆脱错误

> 属性“DataContext”不可附加到“样式”类型的元素

添加一些虚拟命名空间

```
xmlns:ignore="designTimeAttribute" 
```

现在使用它而不是 d:DataContext

```
<Style TargetType="{x:Type ListBoxItem}" ignore:DataContext="{d:DesignInstance local:FooViewModel }">
...
</Style> 
```***

# php - 存储多个布尔值的字段

> ID：15231121
> 
> 赞同：0
> 
> 时间：2013-03-05T18:15:32.373
> 
> 标签：php, mysql, json

我的观点如下：
我有一个存储事件的 MySQL 数据库。这些事件可能发生在一周中的不同日子。您可以说它如下所示：

```
Day | Active
Mon | yes
Tue | yes
Wed | no
Thu | no
Fri | yes
Sat | no
Sun | no 
```

现在我不完全确定如何将其保存到数据库中。当然有几种可能性，但我认为我能想到的一切都有缺点：

*   将它们存储为 7 个 Bool 类型的字段（似乎有很多类似的字段）
*   将它们存储为 7 位数字（这样我只需要一个整数，但这需要一些努力来转换并且缺乏可读性）

在 C++ 中，这些数据可以存储到 std::bitset 中。我敢打赌，在 MySQL 中可以使用一些东西……请指点我：）

PS：
我不知道是否重要：数据将用PHP读取并作为JSON提供给外界。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:21:55.253

您可以使用 SET 类型（[http://dev.mysql.com/doc/refman/5.0/en/set.html](http://dev.mysql.com/doc/refman/5.0/en/set.html)）。例如，这就是您的表格可能的样子：

```
+-------------+--------------------+
| event_name  | days               |
+-------------+--------------------+
| some event  | 'monday,friday'    |
+-------------+--------------------+
| another one | 'tuesday'          |
+-------------+--------------------+ 
```

从这种表中选择行很容易，并且对于潜伏在数据库中的任何人来说都是可读的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:19:15.700

你应该使用 int 的想法。在您的 php 中，您可以将掩码定义为常量，然后使用按位运算来确定设置了哪些标志。

所以而不是做类似的事情

```
myvar & 0x010 
```

它看起来更像是在使用常数进行操作

```
myvar & IS_MONDAY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:24:29.950

If your entry is merely to store weekly events with the input you provided, why not create a VARCHAR field and store it as a JSON string: { "Mon":"yes", "Tue":"yes", "Wed":"no", "Thu":"no", "Fri":"yes", "Sat":"no", "Sun":"no" }

# ios - iOS 在运行时更改 Localizable.strings

> ID：15231122
> 
> 赞同：1
> 
> 时间：2013-03-05T18:15:33.907
> 
> 标签：ios, localization, localizable.strings

我希望能够在运行时更新本地化字符串文件，但[不可能](https://stackoverflow.com/questions/4441025/how-to-update-localizable-strings-from-app-by-code)。

我想过这个：我的应用程序使用网络服务。所以我可以有一个返回 .strings 文件的 Web 服务，并且该文件将保存在应用程序目录中。

现在的问题是：如何更改 NSLocalizedString 以从我的文件中读取？是否可以？

该应用程序不适用于苹果商店，因此如果苹果不同意更改应用程序语言，这不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T14:11:14.483

您可以将数据下载到沙箱中的捆绑包中，并使用`NSLocalizedStringFromTableInBundle()`内置系统获取正确的本地化。

# r - 混合颜色以在 R 中制作自定义图

> ID：15231135
> 
> 赞同：0
> 
> 时间：2013-03-05T18:16:08.900
> 
> 标签：r, graphics, ggplot2, heatmap

更新：现在删除了不相关的序言并更新了进度。

嗨，我正在尝试像热图一样犁一个水平条，它将根据以下值改变颜色。默认情况下，该条应为红色，但会根据两个参数的值更改颜色。

我发现了一些尝试对 SO 产生类似效果的页面：[R matrix plot with color threshold and grid](https://stackoverflow.com/questions/12081843/r-matrix-plot-with-colour-threshold-and-grid)

[一个人如何混合 2 个或多个调色板来显示组合的颜色值](https://stackoverflow.com/questions/11773295/how-can-one-mix-2-or-more-color-palettes-to-show-a-combined-color-value)

所以我认为最好的方法是水平绘制一系列瓷砖，每个瓷砖都有一个基于两个值的计算颜色。

我设法做的是生成我想要的颜色。我通过获取一个矩阵 [2xn] 来做到这一点，其中 n 是瓷砖的数量。第 1 行包含每个图块的值 1，第 2 行包含每个图块的值 2：

```
 colourmatrix[,c(1:5)]
     [,1]      [,2]      [,3]      [,4]      [,5]     
     "81"      "82"      "82"      "82"      "82"     
     "58"      "58"      "58"      "58"      "58" 
```

然后，我通过将以下内容应用于所有列来为每个图块生成颜色：

```
col.deter <- function(invalues) {
  cols <- rgb(green=invalues[1], red=100, blue=invalues[2], maxColorValue=100)
  return(cols)
}

cols <- unlist(lapply(1:ncol(colourmatrix), function(i) col.deter(colourmatrix[,i]))) 
```

然后我做了一个 rbind() 我的结果是：

```
 > colourmatrix[,c(1:5)]
     [,1]      [,2]      [,3]      [,4]      [,5]     
     "81"      "82"      "82"      "82"      "82"     
     "58"      "58"      "58"      "58"      "58"     
cols "#FFCF94" "#FFD194" "#FFD194" "#FFD194" "#FFD194" 
```

所以对于每个图块，值 1 越高，添加到混合中的绿色越多，值 2 越高，添加到混合中的蓝色越多。因此，每个图块的颜色都被确定并添加为第三行。

我现在想要做的是类似于此页面中生成的网格，其中 ggplot2 在此代码的答案中：

```
dat <- expand.grid(blue=seq(0, 100, by=10), red=seq(0, 100, by=10))
dat <- within(dat, mix <- rgb(green=0, red=red, blue=blue, maxColorValue=100))

library(ggplot2)
ggplot(dat, aes(x=red, y=blue)) + 
  geom_tile(aes(fill=mix), color="white") + 
  scale_fill_identity() 
```

但想象只有一行。我试图实现从左到右的一行瓷砖，它们的颜色由生成的值决定。

我试图用 ggplot2 和 image() 来做到这一点，但我的尝试失败了，而且我通常不使用 ggplot 2 我不理解 aes 和我得到的所有错误，但我试过了，因为那是过去的生成由上面的代码块生成的红色和蓝色瓦片图。

我失败的尝试：

```
ggplot(c(1,ncol(colourmatrix)), 1, aes(x=x, y=y)) + 
  geom_tile(aes(fill=colourmatrix[3,]), color="white") + 
  scale_fill_identity()

Error in ggplot.data.frame(fortify(data, ...), mapping) : 
  Mapping should be created with aes or aes_string

  qplot(c(1,ncol(colourmatrix)), c(1,ncol(colourmatrix)), fill=colourmatrix[3,], geom='tile')

Error: Aesthetics must either be length one, or the same length as the dataProblems:c(1, ncol(colourmatrix)), c(1, ncol(colourmatrix)) 
```

我也有一些失败的尝试尝试 image() 我读过的页面来尝试实现这一点：

[一个人如何混合 2 个或多个调色板来显示组合的颜色值](https://stackoverflow.com/questions/11773295/how-can-one-mix-2-or-more-color-palettes-to-show-a-combined-color-value)

[具有颜色阈值和网格的 R 矩阵图](https://stackoverflow.com/questions/12081843/r-matrix-plot-with-colour-threshold-and-grid)

谢谢，

本·W。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:03:20.893

像这样的东西（或者在给定窗口位置的总相似度被标准化的版本）呢？ [R - ggplot2，几个问题，多个相关图](https://stackoverflow.com/questions/10554504/r-ggplot2-several-questions-multiple-correlated-plots)

编辑：这将只用于一个字符串（也就是说，您将为 A、B、C 中的每一个制作一个）。

# java - Webfilter 只能在第二个响应中登录用户（记住我）

> ID：15231137
> 
> 赞同：0
> 
> 时间：2013-03-05T18:16:10.590
> 
> 标签：java, jsf-2, servlet-filters

我一直在玩从 balusC 的[答案](https://stackoverflow.com/questions/5082846/java-ee-6-how-to-implement-stay-logged-in-when-user-login-in-to-the-web-appli)之一启发的代码。基本上它是一个网络过滤器，如果有一个记住我的 cookie，它会尝试登录用户。

登录发生后，它首先从 userService-EJB 获取 MyUser 实体并将其放置在作为 @SessionScoped jsf-ManagedBean 的 MUserSessionBean 中

问题是在第一个响应中，用户显示为未登录。

但是在日志中我可以看到它正在登录，如果我只是在浏览器中请求页面刷新，响应将显示登录用户。

登录发生后，我尝试在不同的地方放置重定向，但是当我尝试这样做时页面布局中断..

如何在第一响应中成功显示登录用户？

```
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException,
        ServletException {

    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;

    MUserSessionBean mUserSessionBean = (MUserSessionBean) request.getSession(true)
            .getAttribute("mUserSessionBean");

    if (mUserSessionBean != null && mUserSessionBean.getCurrentUser() == null) {

        String uuid = CookieUtil.getCookieValue(request, CookieUtil.COOKIE_NAME);

        if (uuid != null) {
            MyUser user = userService.findUserByUUID(uuid);

            if (user != null) {
                mUserSessionBean.setCurrentUser(user);
                CookieUtil.addCookie(response, CookieUtil.COOKIE_NAME, uuid, CookieUtil.COOKIE_AGE); 
            } else {
                CookieUtil.removeCookie(response, CookieUtil.COOKIE_NAME);
            }
        }
    }

    // pass the request along the filter chain
    chain.doFilter(req, res);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:37:15.593

从我所见，您实际上并没有在第一次访问时登录用户。到目前为止，您所做的只是在没有容器实际验证用户身份的情况下在创建的会话中设置一个值。

remember-me 功能要求您使用您使用 remember-me 令牌提取的凭据代表用户对领域进行身份验证。你没有这样做。即使在用户已登录的页面刷新时，从技术上讲，这也是不正确的。它只显示为已登录，因为

```
 if (mUserSessionBean != null && mUserSessionBean.getCurrentUser() == null) 
```

`true`在第一次请求页面后解析并跳过所有检查。后续请求只是因为您`MyUser`在会话中强行放置了一个实例而通过。实际上，用户没有登录，这可能是导致应用程序中其他地方出现分页符的原因。

您需要针对领域对用户进行真正的身份验证才能和平统治:)

```
 if (uuid != null) {
        MyUser user = userService.findUserByUUID(uuid);

        if (user != null) {
            request.login(user.username,user.password); //Authenticate!!!!
            mUserSessionBean.setCurrentUser(user);
            CookieUtil.addCookie(response, CookieUtil.COOKIE_NAME, uuid, CookieUtil.COOKIE_AGE); 
        } else {
            CookieUtil.removeCookie(response, CookieUtil.COOKIE_NAME);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:55:40.883

我做了一个快速修复，解决了这个问题。我没有将用户实体存储在 SessionScoped ManagedBean 中，而是将其直接存储在会话中。所以过滤方法看起来像这样：

```
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException,
        ServletException {

    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;

    MyUser user = (MyUser) request.getSession(true).getAttribute("user");

    if (user == null) {

        String uuid = CookieUtil.getCookieValue(request, CookieUtil.COOKIE_NAME);

        if (uuid != null) {
            user = ub.findUserByUUID(uuid);

            if (user != null) {
                request.getSession().setAttribute("user", user);
                CookieUtil.addCookie(response, CookieUtil.COOKIE_NAME, uuid, CookieUtil.COOKIE_AGE);
            } else {
                CookieUtil.removeCookie(response, CookieUtil.COOKIE_NAME);
            }
        }
    }

    // pass the request along the filter chain
    chain.doFilter(req, res);
} 
```

优点是过滤器不必等待 ManagedBean 被构造。然后 SessionScoped-Bean 进入会话并获取过滤器可能放置在那里的实体。

```
@ManagedBean
@SessionScoped
public class MUserSessionBean {

    private MyUser currentUser;

    @PostConstruct
    public void init() {
        if (currentUser == null) {
            ExternalContext context = FacesContext.getCurrentInstance().getExternalContext();

            currentUser = (MyUser) context.getSessionMap().get("user");
        }
    }
...
} 
```

我将研究 servlet-managed-authentication 或它可能被称为 Kolllossus sugested 的东西，但至少眼前的问题已经消失了。

# grails - 运行应用程序时 Grails 应用程序数据源配置错误

> ID：15231139
> 
> 赞同：0
> 
> 时间：2013-03-05T18:16:30.723
> 
> 标签：grails

我在尝试初始化 Grails 应用程序时遇到错误。我想连接到 Sybase 数据库，因此我的配置文件中包含相关数据。这是错误。

```
 | Loading Grails 2.2.1
| Configuring classpath
| Configuring classpath.
| Environment set to development
| Environment set to development.
| Environment set to development..
| Environment set to development...
| Environment set to development....
| Environment set to development.....
| Packaging Grails application
| Packaging Grails application.
| Packaging Grails application..
| Packaging Grails application...
| Packaging Grails application....
| Compiling 1 source files
| Compiling 1 source files.
| Compiling 1 source files..
| Compiling 1 source files...
| Compiling 1 source files....
| Compiling 1 source files....
| Compiling 1 source files....
| Compiling 1 source files.....
| Compiling 1 source files.....
| Compiling 1 source files.....
| Running Grails application
| Error 2013-03-05 13:06:40,074 [localhost-startStop-1] ERROR context.GrailsContextLoader  - Error initializing the application: Error creating bean with name 'transactionManagerPostProcessor': Ini
tialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessio
nFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve r
eference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandle
rDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.c
ommons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.sybase.jdbc3.jdbc.SybDriver'
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating
bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreati
onException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is org.springframework.
beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessExcepti
on: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.sybase.jdbc3.jdbc.SybDriver'
   Line | Method
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception
 is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHa
ndler'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.sp
ringframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.sybas
e.jdbc3.jdbc.SybDriver'
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'lobHandlerDetector' while setting bean property 'lobHandler'; nested exception is
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.M
etaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.sybase.jdbc3.jdbc.SybDriver'
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'lobHandlerDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException:
Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.sybase.jdbc3.jdbc.SybDriver'
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'com.sybase.jdbc3.jdbc.SybD
river'
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by SQLNestedException: Cannot load JDBC driver class 'com.sybase.jdbc3.jdbc.SybDriver'
->> 1429 | createConnectionFactory in org.apache.commons.dbcp.BasicDataSource
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   1371 | createDataSource in     ''
|   1044 | getConnection in     ''
|   303 | innerRun in java.util.concurrent.FutureTask$Sync
|   138 | run . .  in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . .  in     ''
^   662 | run      in java.lang.Thread

Caused by ClassNotFoundException: com.sybase.jdbc3.jdbc.SybDriver
->>  59 | findClass in org.grails.plugins.tomcat.ParentDelegatingClassLoader
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|   306 | loadClass in java.lang.ClassLoader
|   247 | loadClass in     ''
|   1420 | createConnectionFactory in org.apache.commons.dbcp.BasicDataSource
|   1371 | createDataSource in     ''
|   1044 | getConnection in     ''
|   303 | innerRun in java.util.concurrent.FutureTask$Sync
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread 
```

我应该对 Datasource.groovy 进行什么更改（如果这是原因）？这里是。

```
dataSource {
    pooled = true
    driverClassName ="com.sybase.jdbc3.jdbc.SybDriver"
    username = "starry"
    password = "allcodes"

    dialect = org.hibernate.dialect.SybaseDialect
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:sybase:Tds:he2unx182:3025/cei001db"
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:testDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
        }
    }
    production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:prodDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
            pooled = true
            properties {
               maxActive = -1
               minEvictableIdleTimeMillis=1800000
               timeBetweenEvictionRunsMillis=1800000
               numTestsPerEvictionRun=3
               testOnBorrow=true
               testWhileIdle=true
               testOnReturn=true
               validationQuery="SELECT 1"
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:35:05.367

向下滚动-它说`ClassNotFoundException: com.sybase.jdbc3.jdbc.SybDriver`。如果您已将 jar 放在 lib 目录中（不建议），请运行`grails compile --refresh-dependencies`将其添加到类路径中。

最好为此使用依赖项`BuildConfig.groovy`，例如

```
dependencies {
   compile 'net.sourceforge.jtds:jtds:1.3.0'
} 
```

# actionscript-3 - PurePDF ImageElement 抛出错误

> ID：15231141
> 
> 赞同：1
> 
> 时间：2013-03-05T18:16:38.540
> 
> 标签：actionscript-3, air, purepdf

嘿，所以我正在尝试创建一个生成 PDF 供用户保存的空中应用程序，但我遇到了 PurePDF 的问题。每当我运行 ImageElement.getInstance() 方法时，都会返回一个运行时错误：

```
Error: Error #2030: End of file was encountered. at flash.utils::ByteArray/readUnsignedByte() 
```

我还只是在测试阶段，晚上没有做任何疯狂的事情。这就是我的代码的样子：

```
var bd:BitmapData = new BitmapData( 1024,768 );
bd.draw(pdfClip); //A simple movieclip on the stage containing an image
var bytes:ByteArray = bd.getPixels(new Rectangle(1024,768));
var image:ImageElement = ImageElement.getInstance( bytes ); 
```

如果任何使用过 purePDF 的人可以提供任何建议，我将不胜感激，文档非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:09:41.847

您应该改用“getBitmapDataInstance”，因为“getInstance”方法需要一个 png 编码的字节数组。

`ImageElement.getBitmapDataInstance( bitmap );`

另请参阅此示例： [https ://code.google.com/p/purepdf/source/browse/examples/src/ImageBitmapData.as](https://code.google.com/p/purepdf/source/browse/examples/src/ImageBitmapData.as)

# java - 测试 300,000 多个 URL 的最有效 Java 方法

> ID：15231142
> 
> 赞同：10
> 
> 时间：2013-03-05T18:16:41.383
> 
> 标签：java, url, httpurlconnection

我试图找到最有效的方法来测试数据库中的 300,000 多个 URL，以基本上检查这些 URL 是否仍然有效。环顾该网站后，我发现了许多出色的答案，现在正在使用以下内容：

从文件中读取 URL .... 测试 URL：

```
 final URL url = new URL("http://" + address);
        final HttpURLConnection urlConn = (HttpURLConnection) url.openConnection();
        urlConn.setConnectTimeout(1000 * 10);
        urlConn.connect();
        urlConn.getResponseCode(); // Do something with the code
        urlConn.disconnect(); 
```

将详细信息写回文件....

所以有几个问题：1）有没有更有效的方法来测试 URL 并获取响应代码？

2) 最初我能够每分钟测试大约 50 个 URL，但在 5 分钟左右之后事情真的变慢了 - 我想有一些资源我没有发布但我不确定是什么

3）即使设置了连接超时，某些 URL（例如 www.bhs.org.au）也会导致上述内容挂起几分钟（当我有这么多 URL 要测试时不好），有什么办法可以收紧吗？

在此先感谢您的帮助，自从我编写任何代码以来已经有好几年了，我又从头开始了:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:28:59.897

这可能有帮助，也可能没有帮助，但您可能希望将请求方法更改为`HEAD`而不是使用默认方法，即`GET`：

```
urlConn.setRequestMethod("HEAD"); 
```

这告诉服务器您实际上不需要响应，除了响应代码。

*[What Is a HTTP HEAD Request Good for 一](https://ochronus.com/http-head-request-good-uses/)*文描述了 的一些用途`HEAD`，包括链接验证：

> [Head] 要求的响应与对应于 GET 请求的响应相同，但没有响应正文。这对于检索写入响应标头中的元信息很有用，而不必传输整个内容......这可用于例如创建更快的链接验证服务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T18:29:10.860

到目前为止，最快的方法是使用[java.nio](http://docs.oracle.com/javase/1.4.2/docs/guide/nio/)在端口 80 上打开到目标主机的常规 TCP 连接。然后，只需向它发送一个最小的 HTTP 请求并自己处理结果。

这样做的主要优点是您可以同时打开和加载 10 或 100 甚至 1000 个连接的池，而不必一个接一个地进行。例如，这样一来，一台服务器 (www.bhs.org.au) 需要几分钟来响应就没有多大关系了。它只会占用池中的众多连接之一，但其他连接将继续运行。

[您还可以通过使用线程池](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)`HttpURLConnections`在多个线程中并行运行许多（您现在正在执行的方式）来实现同样的事情，但需要更多的开销，但编码的复杂性要低得多。

# php - Htaccess 不能单独用于我的域子文件夹

> ID：15231155
> 
> 赞同：0
> 
> 时间：2013-03-05T18:17:42.553
> 
> 标签：php, .htaccess

我使用了很多代码来重定向我的子文件夹 url，但没有工作。

```
From :: http://www.mydomain.com/doctor/searchresult.php?txtcity=Chennai&txtarea=Annanagar

To  :: http://www.mydomain.com/doctor/Chennai/Annanagar 
```

使用的htaccess代码如下

```
RewriteRule ^doctor/([a-zA-Z0-9_-]+)/searchresult$ /doctor/searchresult.php?txtcity=$1&txtarea=$2 [R=301,L]

RewriteRule ^([a-zA-Z0-9_-]+)/doctor/$  searchresult.php?txtcity=$1&txtarea=$2

RewriteRule ^doctor/([a-zA-Z0-9_-]+) /doctor/searchDocResult.php?selFindDocCity=$1&txtFindDocAreaRzip=$2 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:57:03.507

假设您只是尝试将第一个 URL 重定向到第二个列出的 URL，这适用于我的服务器。

需要注意的一件事是，它们列出的顺序确实有所不同。最具体的需要首先列出，这样一个 txt 城市内的所有 txtarea 必须按照我下面的示例首先列出。

祝你好运，让我知道它对你有用。

蒂姆

Tim@mpact-media.com

```
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain.com [NC]
RewriteCond %{REQUEST_URI} searchresult\.php
RewriteCond %{QUERY_STRING} txtarea=Annanagar
RewriteRule .* doctor/Chennai/Annanagar/? [R=301,L]
RewriteCond %{HTTP_HOST} ^(www\.)?mydomain.com [NC]
RewriteCond %{REQUEST_URI} searchresult\.php
RewriteCond %{QUERY_STRING} txtcity=Chennai
RewriteRule .* doctor/Chennai/? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:02:05.960

为了进行任何`.htaccess`工作，您需要做两件事。

首先是在 Apache 配置文件中启用它，在`<Directory>`与您的路径匹配的指令中，`AllowOverride`. 例如：

```
<Directory />
    Options None
    AllowOverride All
    Order deny, allow
    Deny from all
</Directory> 
```

这将允许使用`.htaccess`文件中指定的内容覆盖“/”（webroot）。这是指令的完整[规范](http://httpd.apache.org/docs/2.2/mod/core.html)`AllowOverride`。

第二件事是放在`.htaccess`任何有效的指令内。

请记住，`RewriteCond`规则相互叠加，直到您输入`RewriteRule`指令。这样您就可以制定更复杂的规则。[你会在这里](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)找到一个很好的指南。

# php - PHP：图像调整大小和裁剪为纵向

> ID：15231156
> 
> 赞同：0
> 
> 时间：2013-03-05T18:17:43.477
> 
> 标签：php, image, resize, crop

我需要重新调整大小并将图像裁剪到中心。最终结果图像需要为 250W x 330H。

我需要将上传的图像重新调整为 330 高度，但要与宽度保持正确的比例。然后在重新调整大小后检查宽度是否为 250 或更大。如果不是，那么我需要将图像从原始大小重新调整为 250 宽度，但保留与高度的正确比例。

因此，如果它确实将大小重新调整为 330 高度并且宽度为 250 或更大，那么我需要将图像裁剪到宽度为 250 的中心。但如果它重新调整为 250 宽度，高度为 330 或更大，那么我需要将图像裁剪到高度为 330 的中心。

我试图自己创建它，但我对裁剪到中心部分感到很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:55:30.363

我写了一个库来做到这一点：**[Php Image Magician](http://phpimagemagician.jarrodoberto.com/)**

```
<?php
    require_once('../php_image_magician.php');

    $magicianObj = new imageLib('racecar.jpg');
    $magicianObj -> resizeImage(250, 330, 'crop');
    $magicianObj -> saveImage('racecar_cropped.jpg', 100);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:38:32.970

使用 Wideimage 库（[http://wideimage.sourceforge.net/](http://wideimage.sourceforge.net/)）：

```
$thumb = WideImage::load('uploaded_image.png')->resize(250, 330);
if ($thumb->getWidth() > 250 || $thumb->getHeight() > 330) {
    $thumb = $thumb->crop('center', 'center', 250, 330);        
}
$thumb->saveToFile('cropped_image.png'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T01:27:27.770

这是我刚刚完成的一个函数，用于强制一个精确的像素大小——我不能保证它 100%，但我用许多选项对其进行了测试，到目前为止得到了完美的结果，它给出了最接近的结果 imo。首先，它通过计算比率来调整源图像和指定尺寸之间的最小差异。然后修剪掉多余的像素。我已经补偿了奇数，负值等。到目前为止我已经取得了不错的成绩。如果我错过了什么或者它是否以某种方式中断，请告诉我：

PHP：

```
 // set source/export paths and pixel sizes for final sizes
    $src="path/to/source.jpg";
    $exp="path/to/output.jpg";
    $crop_w=300;
    $crop_h=200;

    $size = getimagesize("$src");

    //check image sizes
    if( ($size[0] < $crop_w) || ($size[1] < $crop_h) ){
    echo 'Image not big enough to crop';
    exit();
    }

    //get differential ratios of image vs crop sizes - 
        //smaller ratio must be resized
    $ratio_w = $size[0]/$crop_w;
    $ratio_h = $size[1]/$crop_h; 

    //square or landscape - shave sides

    if($ratio_w >= $ratio_h){

        //resize width / shave top&bottom
        exec("convert $src -resize x".$crop_h." $exp ");
        $size = getimagesize("$exp");
        $diff=abs($crop_w-$size[1]);

        //dividing 1 by 2 will leave a zero on round down - just force resize
        if($diff < 2){

        // skip shave - diff too small
        exec('convert $exp -resize  '.$crop_h.'X! $exp ');
        }
        else{
            //divide difference by 2 for shave amount
            $shave = round($diff/2,0,PHP_ROUND_HALF_DOWN); //halve & round difference down to avoid cropping smaller

            exec('convert '.$exp.' -shave  '.$shave.'x0 '.$exp.' '); //shave sides

            //odd $diff leave a rounded down pixel - force height resize 
            if($diff%2 !==0){//if $diff was not divisible by two then 1 pixel is left from round down
            exec('convert '.$exp.' -resize  '.$crop_w.'x! '.$exp.' ');
            }
        }
    }

    //portrait - shave height
    else{

        //resize width / shave top&bottom
        exec("convert $src -resize ".$crop_w."x $exp ");
        $size = getimagesize("$exp");
        $diff=abs($crop_h-$size[1]);

        //dividing 1 by 2 will leave a zero on round down - just force resize
        if($diff < 2){

        exec('convert $exp -resize  x'.$crop_h.'! $exp ');
        }
        else{
            //divide difference by 2 for shave amount
            $shave = round($diff/2,0,PHP_ROUND_HALF_DOWN); //halve & round difference down to avoid cropping smaller

            exec('convert '.$exp.' -shave  0x'.$shave.' '.$exp.' '); //shave sides

            //odd $diff leave a rounded down pixel - force height resize 
            if($diff%2 !==0){//if $diff was not divisible by two then 1 pixel is left from round down

            exec('convert '.$exp.' -resize  x'.$crop_h.'! '.$exp.' ');
            }
        }

    } 
```

随意使用/发表评论。PHP 5.4<，Imagemagick 6.8.8.1，Windows xampp。

# java - 如何使用 AutoBean 实现带参数的方法？

> ID：15231160
> 
> 赞同：0
> 
> 时间：2013-03-05T18:18:00.487
> 
> 标签：java, gwt, autobean

我有以下界面：

```
public interface beanExample {
   public BigDecimal norm(BigDecimal dec);
} 
```

然后我为它创建一个类别：

```
public class beanExampleCategory {

   public static BigDecimal norm(BigDecimal dec) {
    return dec != null ? dec : BigDecimal.ZERO;
   }
} 
```

我的工厂看起来像：

```
@Category(beanExampleCategory.class)
public interface myFactory extends AutoBeanFactory { 
   AutoBean<beanExample> mybean();
} 
```

但是当我编译时，我得到了这些错误：

```
[ERROR] The beanExample parameterization is not simple 
 and the following methods did not have static implementations:
[ERROR] public abstract java.math.BigDecimal norm(java.math.BigDecimal dec)
[ERROR] Unable to complete due to previous errors 
```

我尝试解决几种方法，但我无法弄清楚如何解决它！

如何使用 AutoBean 实现带有参数的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:21:56.630

您的类别方法必须将 an`AutoBean<beanExample>`作为其第一个参数。

请参阅[https://code.google.com/p/google-web-toolkit/wiki/AutoBean#Categories](https://code.google.com/p/google-web-toolkit/wiki/AutoBean#Categories)

# c# - 图像属性的值 (C#)

> ID：15231161
> 
> 赞同：2
> 
> 时间：2013-03-05T18:18:06.743
> 
> 标签：c#, image, bitmap

我正在尝试解决更改 Bitmap 对象的 ImageDescription 值的问题。为文件添加描述。搜索相关主题，我没有找到解决方案。

我的代码：

```
public Bitmap ImageWithComment(Bitmap image)
{
   string filePath = @"C:\1.jpg";
   var data = Encoding.UTF8.GetBytes("my comment"); 
   var propItem = image.PropertyItems.FirstOrDefault();
   propItem.Type = 2;
   propItem.Id = 40092;
   propItem.Len = data.Length;
   propItem.Value = data;
   image.SetPropertyItem(propItem);
   image.Save(filePath);
   return image;
} 
```

但是带有新评论的图像不会保存在文件夹中（（请帮帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:39:52.150

根据[MSDN - Property Tags](http://msdn.microsoft.com/en-us/library/ms534417%28v=vs.85%29.aspx)，您必须使用正确的 int 值`Id`

**样本**

```
 using (var image = new Bitmap(@"C:\Desert.jpg"))
            {
                string filePath = @"C:\Desertcopy.jpg";
                var data = Encoding.UTF8.GetBytes("my comment");
                var propItem = image.PropertyItems.FirstOrDefault();
                propItem.Type = 2;
                propItem.Id = 0x010E; // <-- Image Description
                propItem.Len = data.Length;
                propItem.Value = data;
                image.SetPropertyItem(propItem);
                image.Save(filePath);
            } 
```

使用 MSDN 中的以下号码

![图片描述码](../Images/c526e6f21851346657b48694fec2ecee.png)

运行代码后，您可以看到它如何影响图像

**前**

![原来的](../Images/03253ba1d103237384954df2365b4b42.png)

**后**

![编辑后](../Images/91631a9b0fe41ccea118d31fcc56b202.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:37:07.443

ID 40092 转换为 0x9C9C。据此，[这](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.propertyitem.id.aspx)不是有效的属性项 ID。据此，[_](http://msdn.microsoft.com/en-us/library/system.drawing.image.setpropertyitem.aspx)

> 如果图像格式支持属性项但不支持您尝试设置的特定属性，则此方法会忽略该尝试但不会引发异常。

从外观上看，您希望您的 ID 为 0x010E。此外，有关每个属性项 ID 的详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ms534416.aspx)。

# vb6 - 字节移位/强制转换 VB6

> ID：15231165
> 
> 赞同：0
> 
> 时间：2013-03-05T18:18:21.870
> 
> 标签：vb6, byte

我对VB6非常不熟悉，所以请原谅菜鸟问题：

我正在尝试将 long 转换为它的组件字节。在 C 中，由于自动截断和位移运算符，它很简单。对于我的生活，我无法弄清楚如何在 VB6 中做到这一点。

到目前为止的尝试通常看起来都是这样的

```
sys1 = CByte(((sys & &HFF000000) / 16777216))   ' >> 24
sys2 = CByte(((sys & &HFF0000) / 65536))      ' >> 16 
```

sys1 和 sys2 被声明为`Byte`sys 被声明为`Long`

尝试执行此操作时出现类型不匹配异常。有人知道如何将 a 转换`Long`为 4 `Byte`s 吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T23:50:40.537

您正确划分，但您忘记仅屏蔽最低有效位。

提供要划分为字节的单词和索引（0 是最不重要的，1 是下一个，等等）

```
Private Function getByte(word As Long, index As Integer) As Byte
    Dim lTemp As Long
    ' shift the desired bits to the 8 least significant
    lTemp = word / (2 ^ (index * 8))
    ' perform a bit-mask to keep only the 8 least significant
    lTemp = lTemp And 255
    getByte = lTemp
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:36:50.590

在[FreeVBCode.com](http://www.freevbcode.com/ShowCode.asp?ID=2066)上找到。未测试，抱歉。

```
Option Explicit

Private Declare Sub CopyMemory Lib "kernel32" _
Alias "RtlMoveMemory" (Destination As Any, Source As Any, ByVal _
Length As Long)

Public Function LongToByteArray(ByVal lng as Long) as Byte()

'Example:
'dim bytArr() as Byte
'dim iCtr as Integer
'bytArr = LongToByteArray(90121)
'For iCtr = 0 to Ubound(bytArr)
   'Debug.Print bytArr(iCtr)
'Next
'******************************************
Dim ByteArray(0 to 3)as Byte
CopyMemory ByteArray(0), Byval VarPtr(Lng),Len(Lng) 
LongToByteArray = ByteArray

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T22:50:10.617

您可以通过结合 UDT 和`LSet`语句在简单值类型和字节数组之间进行转换。

```
Option Explicit

Private Type DataBytes
    Bytes(3) As Byte
End Type

Private Type DataLong
    Long As Long
End Type

Private DB As DataBytes
Private DL As DataLong

Private Sub cmdBytesToLong_Click()
    Dim I As Integer

    For I = 0 To 3
        DB.Bytes(I) = CByte("&H" & txtBytes(I).Text)
    Next
    LSet DL = DB
    txtLong.Text = CStr(DL.Long)

    txtBytes(0).SetFocus
End Sub

Private Sub cmdLongToBytes_Click()
    Dim I As Integer

    DL.Long = CLng(txtLong.Text)
    LSet DB = DL
    For I = 0 To 3
        txtBytes(I).Text = Right$("0" & Hex$(DB.Bytes(I)), 2)
    Next

    txtLong.SetFocus
End Sub 
```

# ruby-on-rails - Rails Paperclip - 获取不同大小图像的路径

> ID：15231170
> 
> 赞同：2
> 
> 时间：2013-03-05T18:18:40.140
> 
> 标签：ruby-on-rails, paperclip

我正在使用回形针来存储两种不同尺寸的图像（除了原始图像）。这是课程：

```
class PassTemplate < ActiveRecord::Base
  self.table_name = "ba_pass_templates"
  belongs_to :organization
  has_many :passes
  has_attached_file :logo, styles: { :logo => ["29x29#", :png], :logo_2x => ["58x58#", :png] }, :dependent => :destroy 
```

我可以很容易地获取原始文件的文件路径：

```
PassTemplate.find(1).logo.path 
```

这给了我：

```
"<full_system_path>/public/system/pass_templates/logos/000/000/040/original/dog_closeup.jpg" 
```

是否有快速简便的访问器来获取其他尺寸的路径？我可以自己写，但我认为会有一种更简单的方法来获取它。

理想情况下，我能够拥有这样的东西：

```
PassTemplate.find(1).logo.logo_path (or small_path, or whatever the path for that image was)
"<full_system_path>/public/system/pass_templates/logos/000/000/040/original/dog_closeup.jpg" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:09:09.683

将样式作为参数传递给路径方法：

```
PassTemplate.find(1).logo.path(:logo_2x) 
```

# asp.net-mvc - 在 mvc 中路由 gclid google 参数的更优雅的方式？

> ID：15231173
> 
> 赞同：1
> 
> 时间：2013-03-05T18:19:08.083
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

对于谷歌分析，并在关键字策略上正确匹配网络搜索参数，我想确保在控制器中发生重定向时传递谷歌提供的 gclid 参数。

重定向的原因是进行拆分测试，对登录页面进行 A/B 测试，以及更好地匹配活动主题的虚 URL。

目前 - 这是我“破解”它的方式：

```
 public class ArtclassController : Controller
    {
    //
    // GET: /Artclass/
    public ActionResult Kid(string gclid)
    {
        string _glcid = gclid;
        return RedirectToAction("Index", "ArtClassesForKids", new {glcid= _glcid  });
    } 
```

我的问题是 - 有没有办法更优雅地做到这一点？比如在MVC路由中？

（为简洁起见，在提供的代码示例中，我省略了第二个重定向，以及选择不同登录页面的随机函数。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:26:17.677

我不相信有办法，尽管您可能能够逃脱使用`Session`甚至`TempData`完成您的任务。

`gclid`现在在您的代码中确定的任何位置都使用：

```
Session["gclid"] = gclid; 
```

在需要的地方`gclid`使用：

```
gclid = Session["gclid"]; 
```

# java - 尝试使用常量字符串分隔符从扫描仪读取 - java.util.scanner

> ID：15231185
> 
> 赞同：1
> 
> 时间：2013-03-05T18:19:39.453
> 
> 标签：java, file, delimiter, meta

我一直在尝试找到一种方法来从由常量字符串分隔符分隔的文件中读取一些数据。

分隔符包括元字符，我试图只在它出现的地方分割，所以正则表达式不合适。

有人可以为我建议一个方法吗，我知道如何实现我自己的方法来做到这一点，我要问的是java是否有内置的东西来做到这一点。

例子：

John %#@!~23s,243 doe %#@!~23s,243 去 %#@!~23s,243 去市场买了一些牛奶。

会导致。

呼叫 1：`.next()`--> 约翰呼叫 2：`.next()`--> doe 呼叫 3：`.next()`--> 去呼叫 4：`.next()`--> 去市场买一些牛奶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:22:43.377

> 分隔符包括元字符，我试图只在它出现的地方分割，所以正则表达式不合适。

您仍然可以使用正则表达式作为分隔符 - 只需使用[`Pattern.quote`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)以确保正则表达式中的“特殊”字符不会干扰。

当然，这是假设您仍想使用`Scanner`. 您可以在[Guava](http://guava-libraries.googlecode.com)[`Splitter`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Splitter.html)中使用该类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:34:29.213

嗯，我不确定你在哪里遇到问题。这应该有效：

代码：

```
 String input = "John %#@!~23s,243 doe %#@!~23s,243 went %#@!~23s,243 to market to buy some milk.";
    Scanner scanner = new Scanner(input).useDelimiter("\\s+" + Pattern.quote("%#@!~23s,243") + "\\s+");
    while (scanner.hasNext()) {
        System.out.println("Token: ." + scanner.next() + ".");
    } 
```

输出：

```
Token: .John.
Token: .doe.
Token: .went.
Token: .to market to buy some milk.. 
```

`Pattern.quote()`对于该示例字符串（不包含元字符），这并不是绝对必要的，但根据实际输入可能需要。

# java - 如何通过 Java 向 Layout 添加新对象？安卓

> ID：15231188
> 
> 赞同：3
> 
> 时间：2013-03-05T18:19:48.003
> 
> 标签：java, android

例如，我有一个由此得到的 ImageView：

```
public ImageView get_image_by_name(String name)
{
    int image_id = getResources().getIdentifier(name , "drawable", getPackageName());
    return (ImageView)findViewById(image_id);
} 
```

不确定它是否有效。

我该如何将它添加到布局中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:26:59.513

假设这个函数被放置在某个地方`Activity`，你可以试试这个：

```
public ImageView get_image_by_name(String name)
{
    int image_id = getResources().getIdentifier(name , "drawable", getPackageName());
    ImageView iv = new ImageView(this);
    ViewGroup.LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    iv.setLayoutParams(lp);
    iv.setImageDrawable(getResources().getDrawable(image_id));
    return iv;
} 
```

您也可以更改`LayoutParams`以满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:22:14.187

布局都派生自 ViewGroup，因此它们都有一个名为 addView 的函数。将 ImageView 传递给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:27:22.010

> 不确定它是否有效

答案是你是对的，你当前的代码不起作用，因为你试图在当前布局中找到任何可绘制资源作为 imageView。将您的代码更改为返回您动态创建的 imageView ：

```
public ImageView get_image_by_name(String name)
{
    int image_id = getResources().getIdentifier(name , 
                   "drawable", getPackageName());
    ImageView imageView=new ImageView(Your_Current_Activity.this);
    imageView.setImageDrawable(image_id);
    imageView.setLayoutParams(new    
                 LayoutParams(LayoutParams.WRAP_CONTENT,
                                    LayoutParams.WRAP_CONTENT));
    return imageView;
} 
```

# cocoa-touch - 多次写入 NSOutputStream 会导致多少事件？

> ID：15231190
> 
> 赞同：0
> 
> 时间：2013-03-05T18:19:49.793
> 
> 标签：cocoa-touch, nsstream

对 NSOutputStream 的两次写入是否会在 stream:handleEvent: 中产生两个 NSStreamEventHasBytesAvailable（我在其中处理读取的数据）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:36:03.773

您是否查看过有关输出流的“流编程指南”？[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/WritingOutputStreams.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Articles/WritingOutputStreams.html)

在输出流上，序列为：

1.  分配/初始化
2.  设置委托
3.  在运行循环中调度
4.  打开
5.  等待 NSStreamEventOpenCompleted
6.  等待 NSStreamEventHasSpaceAvailable

当收到 NSStreamEventHasSpaceAvailable 时（每次写入操作只会收到一次），您可以选择执行写入。如果执行写入，则需要等待接收 NSStreamEventHasSpaceAvailable 才能再次写入。执行写入时，您还必须确认您尝试写入的所有内容均已实际写入。如果写入尝试仅部分完成，则可能需要处理部分写入。

# android - 重用 Android 自定义枚举 xml 属性

> ID：15231191
> 
> 赞同：28
> 
> 时间：2013-03-05T18:20:02.117
> 
> 标签：android, enums, custom-attributes

我在 XML 中定义了一个自定义属性，它是一个枚举。它看起来像这样：

```
<declare-styleable name="MyControl">
    <attr name="myProperty">
        <enum name="None" value="0"/>
        <enum name="One" value="1"/>
        <enum name="Two" value="2"/>
        <enum name="Three" value="3"/>
        <enum name="Four" value="4"/>
        <enum name="Five" value="5"/>
        <enum name="Six" value="6"/>
        <enum name="Seven" value="7"/>
        <enum name="Eight" value="8"/>
        <enum name="Nine" value="9"/>
        <enum name="Ten" value="10"/>
    </attr>
</declare-styleable> 
```

现在假设我希望另一个不相关的类使用同一组枚举值。有没有办法做到这一点，而无需在新节点的新节点中复制枚举列表？例如，具有如下语义的东西：

```
 <declare-styleable name="MyUnrelatedControl">
    <attr name="myProperty" format="[myEnum Format Reference]"/>
 </declare-stylable> 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-05T18:44:36.680

只需定义您无法控制的属性：

```
<attr name="myProperty" format="enum">
    <enum name="None" value="0"/>
    <enum name="One" value="1"/>
    <enum name="Two" value="2"/>
    <enum name="Three" value="3"/>
    <enum name="Four" value="4"/>
    <enum name="Five" value="5"/>
    <enum name="Six" value="6"/>
    <enum name="Seven" value="7"/>
    <enum name="Eight" value="8"/> 
    <enum name="Nine" value="9"/>
    <enum name="Ten" value="10"/>
</attr> 
```

然后将其重用于所有控件：

```
<declare-styleable name="MyControl">
    <attr name="myProperty"/>
</declare-styleable>

<declare-styleable name="MyUnrelatedControl">
    <attr name="myProperty"/>
</declare-styleable> 
```

# google-maps - 谷歌地图按小时和位置显示标记

> ID：15231195
> 
> 赞同：-1
> 
> 时间：2013-03-05T18:20:23.073
> 
> 标签：google-maps, google-places-api

我正在尝试实施恢复社区会议查找器。我有一个数据库和地图设置。我正在尝试添加一个变量来显示当天的会议，该会议也基于“最近”位置优先级。如何在我的数据库中获取今天的日期变量以选择性地仅显示当天的会议？我正在使用谷歌地图 API。

谢谢，

特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:10:32.630

在您的数据库中，您有一个日期时间字段，用于存储我猜测的会议日期和时间。

当您从数据库中提取信息以放入地图时，只需使用任何适当的 sql 语言来仅选择与您需要的日期匹配的那些记录。

这实际上更多的是一个sql问题。

最近的位置可能不适合，但你需要做的也是一个sql问题。您需要将纬度和经度字段添加到数据库并存储每个会议地点的纬度/经度。

然后，一旦你有了这些和用户的纬度/经度，你就可以进行基于距离的 sql 搜索。

地图根本没有进入选择过程。

... 编辑。

按时间选择相当简单，但我想我会分享一个基于距离的 sql SELECT 我以前使用过的。笔记。它与 MySQL 一起使用，但我认为它几乎可以与任何 sql db 一起使用。

```
"SELECT name, tel, (((acos(sin((".$latitude."*pi()/180)) * sin((`latitude`*pi()/180))+cos((".$latitude."*pi()/180)) * cos((`latitude`*pi()/180)) * cos(((".$longitude."- `longitude`)*pi()/180))))*180/pi())*60*1.1515) AS distance FROM takeaway WHERE active AND (((acos(sin((".$latitude."*pi()/180)) * sin((`latitude`*pi()/180))+cos((".$latitude."*pi()/180)) * cos((`latitude`*pi()/180)) * cos(((".$longitude."- `longitude`)*pi()/180))))*180/pi())*60*1.1515) < 10 AND tel AND type = 'transport/taxi' ORDER BY distance LIMIT 5" 
```

这为您提供了编辑和重用的基础知识。请记住将时间/日期检查添加到您的最终字符串中。

# iphone - iPhone - 使用 IOS SDK 开发视频聊天应用程序的示例

> ID：15231199
> 
> 赞同：2
> 
> 时间：2013-03-05T18:20:47.990
> 
> 标签：iphone, ios, xcode, video-streaming, videochat

我正在寻找一个示例 helloworld 应用程序（或教程）来使用 IOS SDK 开发视频聊天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T18:14:52.203

这是我自己编写的[教程，使用 tokbox api 进行流式传输，使用 Parse.com 进行用户管理后端：](http://www.iphonegamezone.net/ios-tutorial-create-iphone-video-chat-app-using-parse-and-opentok-tokbox/)

Opentok 根据 api 请求向您收费，所有 3rd 方提供商都将遵循该模型。对您的好处是您可以根据需求进行扩展，并免费获得一些数量。不过你可能有自己的判断。我不工作，也不保证 tokbox 或解析，链接只是一个指导方针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:35:32.050

尝试使用[OpenTok API](http://www.tokbox.com/opentok/api)。这将使事情变得更快。从头开始创建视频聊天应用程序需要一些时间和大量的专业知识。

# asp-classic - 经典 ASP 中 Select/Case 语句的条件

> ID：15231204
> 
> 赞同：0
> 
> 时间：2013-03-05T18:21:01.387
> 
> 标签：asp-classic

我最近的任务是更新一个经典的 ASP 页面，并且没有使用这种语言的经验。是否可以像这样将条件写入`Select`语句`case`：

```
Select Case <variable>
Case <value> && <if variable2 == something>
Case <value> || <if variable2 == something else> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:51:15.530

这使用逗号语法：

```
Case <value>, variable2 = something else   <--- case satisfies either condition. 
```

您不能将 IF 语句构建到案例中。

顺便说一句：VBScript 使用“and”、“or”和“=”，而不是“&&”“||” 或“==”

相等和赋值都使用“=”并且是上下文相关的。

# ruby-on-rails-3 - 在 Rails 3.2.x 中，为跨操作使用的实例变量设置默认值的正确方法是什么？

> ID：15231213
> 
> 赞同：1
> 
> 时间：2013-03-05T18:21:39.137
> 
> 标签：ruby-on-rails-3, controller

我们希望为呈现的每个页面使用默认名称和描述，除非操作另有定义。

这样做的正确方法是什么？

我们在 Rails 3.2.12 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:33:25.187

假设您想要整个站点范围内的变量，我通常在 ApplicationController 上定义一个 before_filter：

```
class ApplicationController < ActionController::Base

  before_filter :intialize_var

  def initialize_var
    @var = "some default"
  end
end 
```

然后在我想要的任何地方手动覆盖该过滤器 - 就像这样：

```
class PeopleController < ApplicationController

  def initialize_var
    @var = 'parents just dont understand'
  end
end 
```

你可以`@var`在你的视图中使用，你很高兴。

# php - 尝试使用 MAIL 功能时出现 500 错误

> ID：15231214
> 
> 赞同：1
> 
> 时间：2013-03-05T18:21:39.330
> 
> 标签：php, email, iis, error-handling

我们刚刚将 PHP 5.2 / IIS 8 网站迁移到新服务器。

我们无法使用 MAIL 功能。

```
mail($to, $subject, $message, $headers); 
```

返回：

> 500 错误

1.  如何启用详细的错误消息？
2.  我需要安装什么东西才能使该`mail`功能正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:29:25.493

默认情况下，PHP 使用 sendmail，您需要配置 PHP 设置以在 Windows 上使用 SMTP 服务器。

下面的链接将帮助您开始...

[http://geekswithblogs.net/tkokke/archive/2009/05/31/sending-email-from-php-on-windows-using-iis.aspx](http://geekswithblogs.net/tkokke/archive/2009/05/31/sending-email-from-php-on-windows-using-iis.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:24:51.333

500 是永久性 smtp 错误，因此邮件服务器或电子邮件收件人的配置存在问题。

如果您通过端口 25 远程登录到服务器并发出以下命令；

```
helo localhost
mail from:<your.email.address>
rcpt to:<recipient.email.address>
data

ctrl c 
```

发生什么了？

# java - 向上转换时的 ClassCastException

> ID：15231216
> 
> 赞同：1
> 
> 时间：2013-03-05T18:21:42.513
> 
> 标签：java, casting, classcastexception

我有 2 个类：SubEditor 和 Editor。

`public class SubEditor extends Editor {`

我正在创建一个 SubEditor 对象并尝试将其转换为 Editor，但我会得到一个 ClassCastException：

```
try {
    (Editor) ClassLoader.getSystemClassLoader().loadClass("bla.SubEditor").newInstance();
} catch (Exception ex) {
    try {
        Object object = ClassLoader.getSystemClassLoader().loadClass("bla.SubEditor").newInstance();

        // prints "false":
        System.out.println(object instanceof Editor);

        // prints "bla.SubEditor":
        System.out.println(object.getClass().getCanonicalName());

        // prints "Super: bla.Editor":
        System.out.println("Super: "+object.getClass().getSuperclass().getCanonicalName());
    } catch (Exception e) {
        // do sth
    }
} 
```

我怎么可能在“SubEditor instanceof Editor”上得到“假”？

例外：

`java.lang.ClassCastException: bla.SubEditor cannot be cast to bla.Editor`

希望你能帮忙！

问候，

马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:28:08.167

可能是使用不同的 ClassLoader 实例加载这两个类。

我认为您可以通过比较两个类加载器来检查是否是这种情况：

```
Editor.getClassLoader().equals(ClassLoader.getSystemClassLoader()) 
```

使用不同的类加载器会产生两个不同`Class`的对象，因此`ClassCastException`

# javascript - 将日期/时间设置为 00:00:00

> ID：15231222
> 
> 赞同：13
> 
> 时间：2013-03-05T18:22:02.243
> 
> 标签：javascript, datetime, google-apps-script, google-sheets

我有一个日期数组，日期中有不同的时间。

示例：{4/15/13 05:00:00、03/10/13 13:00:00、02/10/13 02:00:00 等}

如果我只想将小时更改为 00:00:00，那么数组将显示为：

{4/15/13 00:00:00、03/10/13 00:00:00、02/10/13 00:00:00 等}

我该怎么做？

我试过使用 getTime()，但我无法控制时间。任何帮助都会很棒。谢谢！

编辑：我试过这个循环：

```
 for (var i = 0; i < gValues.length; i++) { // repeat loop
    sheet.getRange(i + 2, 7, 1, 1).setValue(gValues[i][0].setHours(00,00,00,00));
  } 
```

但我得到的不是预期的结果，而是每个单元格的“12/20/5828963 0:00:00”。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-05T19:02:02.570

Google Apps 脚本是 JavaScript，[这里解释了](http://www.w3schools.com/jsref/jsref_obj_date.asp)日期操作，

设置时间是这样的：

```
Date.setHours(hour,min,sec,millisec) 
```

这是一个例子：

```
//   3/16/2013 17:00:00

function test(){
 var x = new Date('3/16/2013 17:00:00');// x is now a date object
 x.setHours(0,0,0,0); set  hours to 0, min Secs and milliSecs as well
 Logger.log(x);// show result
} 
```

记录器值：`Sat Mar 16 00:00:00 GMT+01:00 2013`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-05-12T14:49:32.570

当您的系统时间配置为使用 UTC 时：

```
DateUtils.setSeconds(DateUtils.setMinutes(DateUtils.setHours(new Date(),5),30),0) 
```

除此以外：

```
DateUtils.setSeconds(DateUtils.setMinutes(DateUtils.setHours(new Date(),0),0),0) 
```

# ios - iOS应用程序中的表单提交？

> ID：15231223
> 
> 赞同：0
> 
> 时间：2013-03-05T18:22:04.400
> 
> 标签：ios, objective-c, sendmail

我对 iOS 开发真的很陌生，但我在 OSX 方面有一些经验。我正在尝试制作一个应用程序，用户在其中填写带有信息的文本字段，然后按下提交按钮。然后他们填写的字段内容会通过电子邮件自动发送给我。

我构建了一个类似的 OSX 应用程序可以做到这一点，但我不知道如何在 iOS 上做到这一点。

我不想使用 MessageUI.framework，因为据我所知，用户必须在显示电子邮件表单后按下发送按钮。我只是希望它在后台发送。

我对电子邮件地址和密码进行硬编码，或者使用相同的电子邮件进行发送和接收都没有问题。例如：至：me@gmail.com 来自：me@gmail.com

任何指针都会很甜蜜！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:26:52.950

您将需要制作一个自定义表单，然后将表单中的所有字段作为 POST 参数发送到您在某个服务器上创建的自定义 API。然后，您可以通过 SMTP 之类的方式将其作为电子邮件重定向给自己

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:40:43.153

如果您不想向用户显示邮件编辑器窗口，您有两个选择

1.  [使用类似这样](https://github.com/jetseven/skpsmtpmessage)的适用于 iOS 的 SMTP 客户端，并使用应用程序中硬编码的电子邮件 ID 和密码从您的应用程序发送电子邮件。但是，如果您以后想更改电子邮件 ID 或更改密码，则需要更新应用程序。所以这是一个不太理想的解决方案

2.  在您的服务器上创建一个 Web 脚本，该脚本接受用户提交的表单字段。然后从这个 web 脚本中，将电子邮件发送到您的电子邮件 ID（例如，如果您使用 PHP 脚本，请使用 mail 函数发送电子邮件）。使用 NSURLConnection 在应用程序中调用此脚本。

# android - 在eclipse项目中找不到错误

> ID：15231224
> 
> 赞同：0
> 
> 时间：2013-03-05T18:22:13.043
> 
> 标签：android, eclipse

在 Eclipse 中对以前工作的 android 项目进行一系列编辑后，我尝试运行该应用程序并收到一条消息`"Your project contains errors, please fix them before running your application."`通常在这些情况下，有问题的文件旁边有一些红色标记，和/或文本描述Eclipse 的“问题”选项卡中列出的错误。但是这次在任何地方都看不到红色标记，并且我在“问题”选项卡中看到的错误指的是（据我所知）与我的项目无关的文件。

我注意到在我的问题列表的顶部它说“错误（192 个项目中的 100 个）......我想知道是否可能向我展示了来自*其他*项目的 100 个问题（我同时有很多问题）我的严重错误是剩下的 92 个错误之一，我没有被显示出来……我不知道如何继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:32:43.483

关闭您不关心的项目并进行干净的构建。

# c - 如何在 Windows 内核驱动程序中编译 OPENSSL（RSA、DSA、HMAC）？

> ID：15231227
> 
> 赞同：1
> 
> 时间：2013-03-05T18:22:19.997
> 
> 标签：c, windows, cryptography, openssl, kernel

我想在 Windows 内核驱动程序中编译主要是 RSA、DSA 和 HMAC 的 openssl。基本上我想提取给定的算法并只编译它们。已经完成了吗？还是有替代品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:25:35.810

请解释“主要是 RSA，...”和“在 Windows 内核驱动程序中”是什么意思。

OpenSSL 是*加密软件*。里面的算法很脆弱，因为它们的使用方式上的小错误可能会导致灾难性的后果。所以，除非你*真的*知道自己在做什么（在这种情况下，你不会在这里问，现在是吗？）让你的手指牢牢地插在口袋里。

也许[NaCL](http://rdist.root.org/2009/07/14/nacl-djbs-new-crypto-library/)更接近您的需要？还是其他一些密码库？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T07:48:06.513

我正在做你所说的：将我需要的算法从 OpenSSl 提取到一个小而紧凑的库中。这是可以做到的，根据我的经验，这是一个非常痛苦的过程。您最终将被迫包含比您预期更多的模块。由于缺乏文档，大多数时候您还需要通过源代码来了解模块功能。我的建议是：除非你别无选择，否则不要这样做。

# c# - SerialPort 第一个命令确定。第二个命令错误

> ID：15231231
> 
> 赞同：2
> 
> 时间：2013-03-05T18:22:29.997
> 
> 标签：c#, serial-port

我正在编写一个串口应用程序来通过串口与蓝牙模块通信。我发送到设备的第一个`At`命令运行良好，我得到了模块版本的响应。所有后续命令都失败并返回 ERROR。

部分代码在这里：

```
namespace PhoneApp
{
    public partial class Form1 : Form
    {
        //SerialPort myport = OPenPort.OpenIt();
        SerialPort myport = new SerialPort();

        public Form1()
        {
            InitializeComponent();
            myport.PortName = "COM3";
            myport.BaudRate = 115200;
            myport.Parity = Parity.None;
            myport.DataBits = 8;
            myport.StopBits = StopBits.One;
            myport.NewLine = System.Environment.NewLine;
            myport.ReadTimeout = 500;
            myport.WriteTimeout = 500;
            myport.DtrEnable = false;
            myport.RtsEnable = false;
            myport.WriteBufferSize = 4096;
            myport.ReadBufferSize = 4096;
            myport.Handshake = Handshake.None;
            myport.Encoding = System.Text.Encoding.ASCII;

            if (!myport.IsOpen)
            {                
                myport.Open();
            }

            calling.Visible = false;
            myport.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);
            mycommand.Text = @"AT+BGVER"; 
```

发送命令的按钮。该设备需要在每个命令后换行。

```
private void button2_Click(object sender, EventArgs e)
{
    try
    {               
        myport.WriteLine(mycommand.Text.Trim());
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

不知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:46:22.443

感谢您的回复。我发现了问题。事实上，我不得不使用 myport.Write 而不是 myport.WriteLine。我删除了 myport.NewLine 行，并将“\r”附加到每个命令。现在设备按预期响应。至于 DTR 和 RTS，根据供应商，设备不需要它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:35:51.330

不确定这是否能解决您的问题，但我注意到您没有启用流量控制（例如`myport.RtsEnable = false; myport.DtrEnable = false;`）。

您是否检查过文档以确保蓝牙模块不需要它？通常具有 115kbps 和更高速率的设备需要流量控制。

要检查的另一件事是 NewLine 常量。您将其设置为系统默认值，可能是 Cr+Lf。确保模块期望它。

# magento - 产品有库存但无法添加到购物车

> ID：15231232
> 
> 赞同：1
> 
> 时间：2013-03-05T18:22:30.567
> 
> 标签：magento, e-commerce

我有一个产品（特别是可配置的相关产品），通过所有明显的措施都应该可用，但是当尝试将其添加到购物车时（从可配置产品页面的下拉列表中选择“中等”尺寸），我得到

> 目前这款产品缺货。
> 
> 部分产品目前缺货

我检查过的中等简单产品：

> 管理库存：是
> 
> 数量：3
> 
> 库存情况：有货
> 
> 状态：启用
> 
> 可见性：单独不可见

所有这些值都与这些值匹配`cataloginventory_stock_*`。

我已经重新索引并清除了缓存。

1.  为什么我不能将此商品添加到我的购物车？
2.  如果它不可销售，为什么它会显示在下拉列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:34:30.973

问题是有两个`medium`产品与可配置相关联。一个可用，另一个不可用。所以下拉菜单显示了可用的，但是在尝试添加到购物车时，使用了禁用的。

我从相关产品中删除了禁用的产品，它可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:28:58.927

检查是否有任何这些属性在特定商店视图中被覆盖。（意思是左上角的下拉“选择商店视图：”）

# codeigniter - 分页后缀不适用于以前的链接

> ID：15231235
> 
> 赞同：5
> 
> 时间：2013-03-05T18:22:39.983
> 
> 标签：codeigniter

嗨，这在我的分页代码中

```
$config['base_url']    = base_url().'cp/orders/';
$config['suffix'] = '?'.http_build_query($_GET, '', "&");
$config['uri_segment'] = 3;
$config['total_rows']  = $count_all;
$config['per_page']    = 20 ;
$this->pagination->initialize($config);
echo $this->pagination->create_links(); 
```

所以在第一页它工作正常，当我点击 page2 它去

```
http://mysite.com/cp/orders/20?sort=id&adc=desc 
```

但是在第二页中，如果我单击第一页或上一页（ < ）它会转到

```
http://mysite.com/cp/orders/20 
```

这

```
$config['suffix'] = '?'.http_build_query($_GET, '', "&"); 
```

在前面的链接中不起作用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T05:58:01.120

我发现并修复了一个与首页链接与其余页面链接不一致的错误。我建议在 Github 存储库中使用当前版本扩展分页库，直到 CodeIgniter 3.0 发布，此时它将被内置，您可以删除扩展库。

新版本还有一个名为 的配置选项`reuse_query_string`，当设置为时`TRUE`将保留任何现有的查询字符串。因此，如果它们在您到达页面时已经存在，则无需担心将它们指定为后缀。

```
$config['reuse_query_string'] = TRUE; 
```

当前库文件：[https](https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Pagination.php) ://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Pagination.php 相关拉取请求信息：[https ://github.com/EllisLab/CodeIgniter/pull/2199](https://github.com/EllisLab/CodeIgniter/pull/2199)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-26T06:06:37.890

`first_url`如果您不想更改库，可以设置如下：

```
$config['first_url'] = $config['base_url'] . $config['suffix']; 
```

# android - 为什么 canvas.setBitmap() 在 Parent 中隐藏其他视图？

> ID：15231239
> 
> 赞同：0
> 
> 时间：2013-03-05T18:22:51.403
> 
> 标签：android, canvas, ondraw

我有这个扩展的类`View`：

```
public class DrawingPanel extends View {

    private Bitmap toDisk;
    private int w;
    private int h;

    public DrawingPanel(Context context, AttributeSet attrs) {
        super(context, attrs);
        System.out.println("Drawing");
        p0 = new Paint();
        p0.setStyle(Style.STROKE);

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        ...
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        this.w = w;
        this.h = h;
        toDisk = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    public void onDraw(Canvas canvas) {

        canvas.drawColor(Color.WHITE);
        canvas.drawPath(path0, p0);
        canvas.setBitmap(toDisk);

    }

} 
```

我将此类用作布局中的子视图。在`Graphical view`Eclipse 中，一切正常，所有视图都是可见的，但在模拟器中，我的类 ( `DrawingPanel`) 隐藏了它下面的其他视图。当我删除这一行时：

```
canvas.setBitmap(toDisk); 
```

所有视图将再次可见。还有一件奇怪的事情：当我把那行放在这样的`onDraw`方法的第一行时：

```
@Override
    public void onDraw(Canvas canvas) {
                canvas.setBitmap(toDisk);
        canvas.drawColor(Color.WHITE);
        canvas.drawPath(path0, p0);
    } 
```

我`DrawingPanel`和它下面的其他视图将是不可见的。我怎么解决这个问题？ **我的目的是保存用户在画布上绘制的内容。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:30:48.777

你误解了 setBitmap。它为您设置一个位图，以便将新的绘图命令发送到 INSTEAD OF the screen。它不会将先前的命令绘制到位图上。为此，您需要这样做：

```
Canvas diskCanvas = new Canvas(toDisk);
//Send all draw commands to this canvas
screenCanvas.drawBitmap(toDisk, new Matrix(), new Paint()); 
```

请注意，这只会将位图保存到内存中。要保存到磁盘，您需要将其保存到文件中。不要在 onDraw 中这样做，这是一个缓慢的操作。

# javascript - 使用新函数评估文本时的Javascript ILLEGAL char消息

> ID：15231241
> 
> 赞同：0
> 
> 时间：2013-03-05T18:23:10.200
> 
> 标签：javascript

我们有一个徽章脚本，它提取一个 json 配置文件，然后异步加载外部脚本并在加载时执行代码。js 以字符串形式存储在 JSON 文件中。为了避免使用 eval()，我们执行如下代码：

```
var codeFromJSON = "alert('this far')";
var func = new Function(codeFromJSON);
func(); 
```

这有效，但在 chrome 中返回以下错误，在其他浏览器中返回类似错误：

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

起初我认为这与一些简单的事情有关——从网上复制代码片段等——但我已经重新输入并重新测试，仍然得到同样的结果......

有任何想法吗？

# javascript - jquery如何查找指定元素的前一个元素

> ID：15231248
> 
> 赞同：1
> 
> 时间：2013-03-05T18:23:34.957
> 
> 标签：javascript, jquery

我试图找到`img`指定元素之前存在的前一个元素。但是当我运行我的代码时，它会返回`undefined`.

我的代码是：

```
 $(document).on('keypress','#sendComment', function(e) {
    if(e.keyCode==13){
        var itemId=$('#findbefore').prev('.SharedImage');//
        console.log(itemId);
        var dataid=itemId.data('id');
        var dataalid=itemId.data('alid');
        var datashareid=itemId.data('shareid');
        var alt=itemId.attr('alt');
        alert(dataid +' '+dataalid+' '+datashareid+' '+alt);
    }
}); 
```

`Object[]`这是在控制台和`undefined undefined undefined undefined`警报中打印的。

我的 div 是：

```
 <div id="S04" class="snew" style="display: block;">
 <div class="author-image"></div>
 <span>ajay shared the image xyz</span>
 <div class="s-content">
 <div class="s-message"></div>
 <div class="shpicture">
 <img class="SharedImage" width="100%" height="100%" data-shareid="1" data-alid="1" data-id="1" alt="xyz" src="data:image/jpeg;base64,">
 </div>
 </div>
 </div>
 <div class="SPcommentbox" id="findbefore">
 <div class="comment">
 <div class="commenter-image"></div>
 <div class="addcomment">
 <input id="sendComment" class="commentbox" type="text" placeholder="Write a comment...">
 </div>
 </div>
 </div> 
```

我需要找到`img`. 当用户按下输入按钮时。

**注意：我用 jQuery 添加这些 div**

请任何人帮我解决这个问题...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:27:47.887

`.prev()`只会匹配*前*一个元素，并且如果您提供了一个选择器，则只有它匹配该选择器。

鉴于您需要的现有 HTML 片段：

```
$('#findbefore').prev().find('.SharedImage'); 
```

但是我担心页面上是否可能有多个这样的元素？如果您提供更多 HTML，您可能会得到更完整的答案。

例如，您*可能*会更好：

```
$(this).closest('.SPcommentbox').prev().find('.SharedImage'); 
```

或者，如果页面上只有一个保证`.sharedImage`，那么你应该给它一个 ID 而不是一个类，并直接访问它：

```
$('#SharedImage') 
```

# java - 快速排序算法导致堆栈溢出

> ID：15231249
> 
> 赞同：1
> 
> 时间：2013-03-05T18:23:35.443
> 
> 标签：java, quicksort, stack-overflow

已解决：发布在此评论的末尾。

我不断收到这个错误，我找不到任何解释它为什么会发生。

```
Exception in thread "main" java.lang.StackOverflowError
at java.util.Random.nextDouble(Random.java:444)
at java.lang.Math.random(Math.java:716)
at assignment6quickSort.M6.qsAlgorithm(M6.java:50)
at assignment6quickSort.M6.qsAlgorithm(M6.java:60)
at assignment6quickSort.M6.qsAlgorithm(M6.java:60)
at assignment6quickSort.M6.qsAlgorithm(M6.java:60) 
```

我一直在疯狂搜索，似乎没有人遇到过同样的问题，或者我愚蠢地寻找正确的东西（完全有可能）。

无论如何，我正在创建随机数来为通用快速排序找到一个枢轴数，几个小时前它工作了几次，但现在我每次都收到这个错误。

拜托，我很沮丧……呵呵！我做错了什么？这怎么会导致溢出？

我的代码来了...

```
package assignment6quickSort;

import java.util.ArrayList;
import java.util.List;
import java.util.Comparator;

public class M6 {

    static M6Comparator<Integer> comp = new M6Comparator<Integer>();
    static Integer[] array = new Integer[20];
    static ArrayList qsSorted = new ArrayList();

    public static void main (String[] args) {       

        for (int i = 0; i < array.length; i++) {
            array[i] = (int)(50 * Math.random());
        }

        for (int i: array) {
            System.out.print(i + ", ");
        }

        quickSort(array, comp);
        System.out.println("\n");

        for (Object i: qsSorted) {
            System.out.print(i + ", ");
        }

    }

    static <T> void quickSort(T[] a, Comparator<? super T> comp) {

        ArrayList<T> temp = new ArrayList<T>();
        for (int i = 0; i < a.length; i++) {
            temp.add(a[i]);
        }

        qsSorted = qsAlgorithm(temp, comp);
    }

    static <T> ArrayList<T> qsAlgorithm(ArrayList<T> a, Comparator<? super T> comp) {

        ArrayList<T> L = new ArrayList<T>();
        ArrayList<T> G = new ArrayList<T>();

        if (a.size() <= 1) 
            return a;
        int pivot = (int)Math.random() * a.size();
        T pivotValue = a.get(pivot);
        for (int i = 0; i < a.size(); i++) {
            if (comp.compare(a.get(i), pivotValue) == -1 || comp.compare(a.get(i), pivotValue) == 0) {
                L.add(a.get(i));
            } else {
                G.add(a.get(i));
            }
        }

        L = qsAlgorithm(L, comp);
        G = qsAlgorithm(G, comp);
        L.addAll(G);

        return L;

    }

} 
```

此外，这是我的比较器：

```
package assignment6quickSort;

import java.util.Comparator;

public class M6Comparator<E> implements Comparator<E> {

    public int compare(E original, E other) {

        return((Comparable<E>)original).compareTo(other);
    }

} 
```

**＃＃＃ 解决方案 ＃＃＃**

显然是一个经典的递归溢出错误。非常感谢@pst 和@Marcin 的帮助！这是 qsAlgorithm() 方法的修订：

```
static <T> ArrayList<T> qsAlgorithm(ArrayList<T> a, Comparator<? super T> comp) {

        ArrayList<T> L = new ArrayList<T>();
        ArrayList<T> P = new ArrayList<T>();
        ArrayList<T> G = new ArrayList<T>();

        if (a.size() <= 1)
            return a;
        int pivot = (int)Math.random() * a.size();
        T pivotValue = a.get(pivot);
        for (int i = 0; i < a.size(); i++) {
            int v = comp.compare(a.get(i), pivotValue);
            if (v == -1) {
                L.add(a.get(i));
            } else if (v == 0) {
                P.add(a.get(i));
            } else {
                G.add(a.get(i));
            }
        }

        return concatenate(qsAlgorithm(L, comp), P, qsAlgorithm(G, comp));

    }

    static <T> ArrayList<T> concatenate(ArrayList<T> a, ArrayList<T> p, ArrayList<T> b) {

        a.addAll(p);
        a.addAll(b);

        return a;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:26:58.170

真正溢出堆栈的可能不是 nextDouble 函数，只是碰巧您在每个递归步骤中都调用它，因此它很可能是达到限制的函数。真正的问题是你的递归太深了（也许是你停止递归的错误基本情况）。

看起来`a.size`是你的[变种](http://en.wikipedia.org/wiki/Loop_variant)。确保`a`确实随着递归的*每一步而减少。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:31:27.170

您进入递归调用太多次，直到您的堆栈溢出。问题是您在主比较循环中到达一个点，您总是将所有元素添加到临时数组“L”，而没有添加到“G”，因此您的递归调用：

```
L = qsAlgorithm(L, comp); 
```

总是使用与参数相同数量的元素：

```
ArrayList<T> a 
```

所以你永远不会在第 49 行退出递归：

```
if (a.size() <= 1) 
    return a; 
```

解决方案是在您的临时数组具有最后 2 个相等元素时进行额外的退出。

**编辑：**一个快速而肮脏的修复......这绝不是有效的代码。我为“偶数”值使用了另一个“E”集合，并将它们添加到最后的结果列表中。

```
static <T> ArrayList<T> qsAlgorithm(ArrayList<T> a, Comparator<? super T> comp) {

    ArrayList<T> L = new ArrayList<T>();
    ArrayList<T> E = new ArrayList<T>();
    ArrayList<T> G = new ArrayList<T>();

    if (a.size() <= 1) 
        return a;
    int pivot = (int)Math.random() * a.size();
    T pivotValue = a.get(pivot);
    for (int i = 0; i < a.size(); i++) {
        int v = comp.compare(a.get(i), pivotValue);
        if (v == -1) {
            L.add(a.get(i));
        } else if (v == 0) {
            E.add(a.get(i));
        } else {
            G.add(a.get(i));
        }
    }

    L = qsAlgorithm(L, comp);
    G = qsAlgorithm(G, comp);
    L.addAll(E);
    L.addAll(G);

    return L;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T18:27:05.057

Random*不是*导致堆栈溢出的递归，而是[压垮骆驼的最后一根](http://en.wikipedia.org/wiki/Straw_that_broke_the_camel%27s_back)*稻草* 。

之前的 2 吨干草捆¹：

```
at assignment6quickSort.M6.qsAlgorithm(M6.java:50)
at assignment6quickSort.M6.qsAlgorithm(M6.java:60)
at assignment6quickSort.M6.qsAlgorithm(M6.java:60)
at assignment6quickSort.M6.qsAlgorithm(M6.java:60)
.. 
```

* * *

¹提出的代码中的问题是枢轴包含在递归子问题中。想象一下输入的情况，其中两个值都在序列中`[x,x]`被递归地选择为。将始终是终端（0 个元素），但永远不会是终端（2 个元素）。`L``x <= x``R``L`

请参阅[Wikipedia 上的 Quicksort](http://en.wikipedia.org/wiki/Quicksort)并注意伪代码`concatenate(quicksort('less'), 'pivot', quicksort('greater'))`。也就是说，枢轴元素不包括在子问题中。

# java - Hibernate 获取 CollectionOfElements Map 的值

> ID：15231250
> 
> 赞同：1
> 
> 时间：2013-03-05T18:23:41.960
> 
> 标签：java, spring, hibernate, annotations

使用object 内部`CollectionOfElements` `Map<String, String>`的注释映射Hibernate 。我希望通过在某些条件下加入和关联的 Collection 来获得 Map 的值。如果有人可以对此进行更多说明，将不胜感激。`CollectionOfElements``A``A`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:28:40.997

假设你`Map<String, String>`在 object 中有属性`A`，下面的 HQL 可以让你得到 Map 的值。

```
SELECT elements(t.attributes) FROM A as t INNER JOIN t.attributes as aAttributes
WHERE CONDITION='XYZ' 
```

# javascript - AngularJS 是否仅适用于单页应用程序 (SPA)？

> ID：15231251
> 
> 赞同：204
> 
> 时间：2013-03-05T18:23:50.023
> 
> 标签：javascript, node.js, angularjs

我们正在寻找构建我们正在创建的应用程序前端的选项，并正在尝试评估一种对我们有用并为我们提供前进的最佳平台的工具。

这是一个[Node.js](http://en.wikipedia.org/wiki/Node.js)项目。我们最初的计划是使用 Express 并沿着这条路线走，但我们决定在我们开始这个阶段之前最好先回顾一下那里有什么。我们的应用程序有几个我们认为不适合单页模型的区域，因为它们从应用程序的角度来看是相关的，但不是从视图的角度来看。

我们已经看到了一些可以用来构建客户端的框架，例如[Backbone.js](https://en.wikipedia.org/wiki/Backbone.js)、[Meteor](https://en.wikipedia.org/wiki/Meteor_%28web_framework%29)等，还有 AngularJS。

这可能是一个相当明显的问题，但我们似乎无法破译 AngularJS 是纯粹用于单页应用程序，还是可以用于像 Express 这样的多页应用程序。

* * *

**更新 2013 年 7 月 17 日** 为了让人们了解情况，我将在我们完成整个过程时更新这个问题。我们现在将一起构建所有东西，我们将看到它的表现如何。我们已经联系了一些比我们更有资格使用 AngularJS 的人，并提出了关于拆分共享上下文的大型应用程序的问题，但在单个页面上工作可能太大了。

共识是我们可以提供多个静态页面并创建仅与这些页面一起使用的 AngularJS 应用程序，有效地创建 SPA 集合并使用标准链接将这些应用程序链接在一起。现在我们的用例非常具体，因为我们的解决方案有多个应用程序，正如我所说，我们将首先尝试单一代码库并从那里进行优化。

**2016 年 6 月 18 日更新**该项目从悬崖上掉下来，所以我们从来没有完成太多工作。我们最近再次选择了它，但不再使用 angular，而是使用 React。我们仍在使用上一次更新中概述的架构，我们使用 express 和 self contains 应用程序，例如，我们`/chat`在 express 中有一个路由服务于我们的 React 聊天应用程序，我们有另一个路由`/projects`服务于项目应用程序和很快。我们有点看它的方式是，就其功能集而言，每个应用程序都是一个聚合根，它需要能够独立才能被视为本身的应用程序。从技术上讲，所有信息都在那里，它只是基本的表达以及您想要使用的客户端应用程序构建的任何风格。

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-03-05T18:28:35.983

一点也不。您可以使用 Angular 构建各种应用程序。客户端路由只是其中的一小部分。

在客户端路由之外，您有大量功能将使您受益：

*   双向绑定
*   模板
*   货币格式
*   多元化
*   可重复使用的控件
*   RESTful api 处理
*   AJAX 处理
*   模块化
*   依赖注入

认为所有这些“只能在单页应用程序中使用”真是太疯狂了。当然不是……这就像说“Jquery 仅适用于带有动画的项目”。

如果它适合您的项目，请使用它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-10-11T02:33:19.823

起初，我也为 Angular 的“如何”而苦苦挣扎。然后有一天我突然意识到：“它仍然是 javascript”。有很多关于 Angular 的来龙去脉的例子（我最喜欢的一本和本书[https://github.com/angular-app/angular-app](https://github.com/angular-app/angular-app)一起）。要记住的最重要的事情是像在任何其他项目中一样加载 js 文件。您所要做的就是确保不同的页面引用正确的 Angular 对象（控制器、视图等），然后您就可以开始运行了。我希望这是有道理的，但答案太简单了，我忽略了它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-20T10:56:09.440

也许我的经验对某人有用。我们在逻辑上拆分我们的项目。我们将一个 SPA 用于提要，另一个用于处理地图，另一个用于编辑用户资料等。例如，我们有三个应用程序：提要、用户和地图。我在分隔的网址中使用它，如下所示：

```
https://host/feed/#/top/
https://host/user/#/edit/1/
https://host/map/favorites/#/add/ 
```

这些应用程序中的每一个在应用程序的状态之间都有自己的本地路由映射。我认为这是一个很好的做法，因为每个应用程序只使用它自己的上下文并加载它真正需要的依赖项。此外，它对于调试和集成过程非常有用。

实际上，您可以非常轻松地混合使用 SPA 应用程序，例如提要将是 url 与 angularjs 应用程序，用户应用程序与 reactjs 并映射到主干.js 应用程序。

针对您的问题：

Angular 不仅仅适用于 SPA，Angular 对 SPA 应用程序的性能好又快，而且没有人费心构建各种 SPA 应用程序的 MPA 应用程序。但是考虑你的 url 架构不要忘记你的应用程序的 SEO 可用性。

我也支持这个想法：

> 项目和应用程序有什么区别？应用程序是做某事的 Web 应用程序——例如，Weblog 系统、公共记录数据库或简单的投票应用程序。项目是特定网站的配置和应用程序的集合。一个项目可以包含多个应用程序。一个应用程序可以在多个项目中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-19T20:26:01.620

如果您只需要几页带有客户端数据绑定的页面，我会选择 Knockout 和 Javascript 命名空间。

Knockout 很棒，特别是如果您需要简单的向后兼容性并且有相当直接的页面。如果您使用的是 3rd 方组件，Knockout 的自定义绑定简单易用。

Javascript 命名空间允许您将代码分开且易于管理。

```
var myCo = myCo || {};
myCo.page = {
    init: function(){ ... },
    ...
} 
```

并在加载其他脚本后的脚本标记中

```
<script>
    myCo.init();
</script> 
```

关键是，您可以在需要时使用任何您想要的工具。需要数据绑定？淘汰赛（或任何你喜欢的）。需要路由吗？sammy.js（或任何你喜欢的）。

客户端代码可以根据您的需要简单或复杂。我尝试使用现有的专有框架将 Angular 集成到一个非常复杂的站点中，这是一场噩梦。如果您刚开始，Angular 非常棒，但它有一个学习曲线，并将您锁定在一个非常紧凑的工作流程中。如果您不遵循它，您的代码可能会很快变得非常纠结。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-01T04:42:41.200

如果你只是想开发一个 SPA，我会说 Angular 是矫枉过正。当然，如果您已经习惯于使用它进行开发，请继续。但是，如果您是该框架的新手，并且只需要开发一个 SPA，那么我会选择更简单的东西，并拥有许多自己的好处。我建议查看*Vue.js*或*Aurelia.io*。

**Vue.js**使用双向数据绑定、MVVM、可重用组件、简单快速上手、更少代码编写等。它结合了 Angular 和 React 的一些最佳特性。

**Aurelia.io**，老实说，我不太了解。但我已经四处看了看，这似乎是一个值得研究的替代方案，类似于上面的。

链接：
[https ://vuejs.org/](https://vuejs.org/)
[http://aurelia.io/](http://aurelia.io/)

# ruby - Mongoid 关联和空对象模式？

> ID：15231254
> 
> 赞同：2
> 
> 时间：2013-03-05T18:24:03.913
> 
> 标签：ruby, mongoid, null-object-pattern

您将如何在 Mongoid 关系上实现空对象模式？

```
Class Owner
  include Mongoid::Document
  embeds_one :preference
end 
```

大多数所有者不会有偏好，因此我希望他们有一个 NullPreference，如 Ben Orenstein 的[精彩演讲](http://www.youtube.com/watch?v=DC-pQPq0acs)中所述。

我想要的是这样的：

```
class NullPreference
  def name
    'no name'
  end 
end

owner = Owner.new
preference = owner.preference
preference.name
=> 'no name' 
```

我在 ActiveRecord 中发现了一个关于同一事物的相关[问题，但没有答案。](https://stackoverflow.com/questions/15121737/null-object-pattern-for-associations-in-rails)

编辑：我使用的是 Mongoid 2.6，否则我可以使用`autobuild: true`并获得一个*真实的* `Preference`并使用默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:27:37.227

一个明显的方法是在该字段上构建一个抽象层。

```
class Owner
  include Mongoid::Document
  embeds_one :preference_field # internal field, don't use directly

  def preference
    preference_field || NullPreference.new
  end

  def preference= pref
    self.preference_field = pref
  end
end 
```

也许有更简单的方法。

# jsf - 了解 CDI 中类型安全的必要性

> ID：15231255
> 
> 赞同：10
> 
> 时间：2013-03-05T18:24:14.617
> 
> 标签：jsf, jakarta-ee, dependency-injection, seam, cdi

> 首先我要澄清一下，这篇文章并不是要批评 CDI，而是要发现 CDI 设计背后的思想和假设，这将对设计任何使用 CDI 的 Web 应用程序产生明显的影响。

CDI（Java EE 6）最显着的特性之一是**类型安全**。Jboss Seam 的字体不安全。它使用名称来限定要注入的任何实例。像下面这样：

```
 @Name("myBean")
   public class MyBean implements Bean {
     ...
   }

   @Name("yourBean")
   public class YourBean implements Bean {
     ...
   } 
```

在注入 MyBean 时，可以这样做：

```
 @In
   private Bean myBean; //myBean is injected

   @In
   private Bean yourBean; //yourBean is injected 
```

和 Spring 的早期版本（3.0 之前），这种类型的注入发生如下：

只需在 bean 配置文件中定义 bean：

```
 <bean id="myBean" class="com.example.common.MyBean">
       ...
   </bean>

   <bean id="yourBean" class="com.example.common.YourBean">
       ...
   </bean> 
```

并使用命名限定符，决定使用哪一个：

```
 @Autowired
   @Qualifier("myBean")
   private Bean bean;

   @Autowired
   @Qualifier("yourBean")
   private Bean bean; 
```

但现在在 CDI 中，首先您需要`Qualifier`为任何特定类型的对象定义自定义注释。然后使用该注释来限定该对象。归根结底，当您查看源代码时，您会发现，您浪费了大量时间来编写大量用于依赖注入的自定义注释。Java 社区正在转向注解，而将基于 XML 的配置（**详细的 XML**）抛在后面。有没有什么可以说服任何人认为这（自定义注释的类型安全）不是**冗长的注释**，而是 CDI 的一个优秀和杰出的特性？

**编辑：**

***点，推送以突出显示***

1.  如果我为每个服务或 dao（每个接口）的类型安全使用自定义限定符，那么对于大型应用程序，例如拥有 1000 个或更多服务或具有多个实现的 dao 类，它会很混乱。那么对于大型应用程序，使用类型安全注入是否可行？
2.  如果上述问题的答案是“否”，那么使用类型安全有什么意义呢？
3.  即使为类型安全编写注释是可行的，但在大型应用程序中，是否真的值得为避免**冗长的 xml**配置而付出努力？
4.  我什么时候需要类型安全而不是 bean 名称限定符？

***对以上几点的简短讨论***

1.  真正需要类型安全注入的情况并不多，特别是当你有一个接口的实现时，你应该使用`@Name`它作为限定符。所以是的，在大型应用程序中，在实际需要时使用类型安全是可行的。
2.  当然，类型安全是 CDI 的显着特征之一，在公认的答案中，有一个非详尽的清单列出了您可能选择使用类型安全的原因。
3.  由于您是一名聪明的程序员，并且您确切地知道何时使用类型安全，因此在真正需要时绝对值得付出努力。
4.  接受的答案的大部分部分都在真正讨论，我们什么时候需要类型安全，[这篇文章](http://java.dzone.com/articles/cdi-di-p1)也非常有助于理解。

感谢和快乐的编码！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-09T16:35:32.337

## CDI 冗长吗？需要限定符吗？

1.  首先，当您只有一个接口实现时，您不需要限定符。
2.  如果您有多个接口的实现，那么问问自己——部署后是否需要区分它们？

    *   如果答案是否定的，那么考虑使用替代方案。
    *   如果答案是肯定的，那么您仍然不需要限定符。原因如下：

        要使用您自己的示例：

        ```
        public class MyBean implements Bean {
            ...
        }

        public class YourBean implements Bean {
            ...
        } 
        ```

        然后，您只需执行以下操作：

        ```
        @Inject MyBean bean; 
        ```

        或者

        ```
        @Inject YourBean bean; 
        ```

        如果你不喜欢你的实例变量是一个具体的类型并且宁愿看到一个接口，而不是这样做：

        ```
        private Bean bean;

        @Inject
        public void setBean(MyBean bean) {
            this.bean = bean;
        } 
        ```

        或者

        ```
        private Bean bean;

        @Inject
        public void setBean(YourBean bean) {
            this.bean = bean;
        } 
        ```

        在上述所有情况下，它完全没有限定符，绝对类型安全，而且绝对不冗长。

3.  然后，详细说明最后一点 - 开发人员是否需要选择适当的实现，或者选择是否有问题？

    *   如果开发人员将选择，则按照上面 2 中的说明进行操作。
    *   如果选择有问题，则使用生产者：

        ```
        @Produces
        public Bean obtainTheAppropriateBean(InjectionPoint ip) {
            if (meetsConditionA(ip)) {
                return getBeanImplA();
            } else if (meetsConditionB(ip)) {
                return getBeanImplB();
            } else if (...) {
                ...
            } else {
                return getDefaultBeanImpl();
            }
        } 
        ```

        仍然没有限定符，类型安全，并且可能仍然不冗长（自动化的交易选择）。

    有关如何使用[InjectionPoint](http://docs.oracle.com/javaee/6/api/javax/enterprise/inject/spi/InjectionPoint.html) API的观点和想法，请参阅[这篇文章。](http://java.dzone.com/articles/cdi-di-p1)

## 是否需要限定符？

在上述示例之后，我可以看到这个问题。答案是肯定的，以下是您可能选择使用它们的非详尽原因列表：

*   在上面的一个示例中，我提到了注入接口的特定实现以避免使用限定符。当代码是内部的并且内部开发人员会知道哪个是哪个时，这完全没问题。但是，如果代码是一个库或框架，并且您不想在公共 API 中公开任何特定的实现，该怎么办？然后定义一些限定词并很好地记录它们。这与详细的 XML 有何不同？即使您作为图书馆作者可能正在做同样多的冗长工作，您的用户也不必这样做。相反，他们只会在注入点上方写一个单词，并且很高兴您没有让他们编写任何 XML - 我个人会非常非常非常高兴。:)
*   在上面的 producer 示例中，您可以使用 producer 方法中的逻辑覆盖大多数情况，但不能涵盖所有情况。或者，也许您只是希望能够在任何特定注入点覆盖该逻辑。然后，保留生产者，制作一个限定符并用它注释一些特定的实现。然后在您不希望生产者逻辑运行时使用限定符。
*   想象一下您有多个接口和多个实现的情况。特定的实现可能具有共同的可区分特征，并且这些特征对您的所有接口都是通用的。例如，让我们以 Java 集合框架为例，特别是 List、Set 和 Map 接口。它们中的每一个都有多个实现，但是所有或某些接口都有共同的特征。例如链接节点（快速迭代）——想想 LinkedList、LinkedHashSet、LinkedHashMap；sorted（排序）——想想 TreeSet、TreeMap；基于哈希表（快速插入/删除/包含）——想想 HashSet、LinkedHashSet、HashMap、LinkedHashMap；一致的；随机访问; 等等。现在，您可以定义`@Linked`、`@Sorted`和`@Hash`注释。然后注入：

    ```
    @Inject @Linked @Hash private Map map;
    @Inject @Sorted private Map map;
    @Inject @Hash private Set set;
    @Inject @Hash private Set set; 
    ```

    现在，是否值得为集合框架这样做？我不会这样做，但我有一个类似于我在当前工作项目中描述的案例（抱歉，无法讨论）。

*   最后，您可以使用限定符将参数与`@Nonbinding`. 继续上面的集合框架，定义：

    ```
    @Qualifier
    @Documented
    @Retention(RetentionPolicy.RUNTIME)
    public @interface Hash {
        @Nonbinding int capacity() default 16;
        @Nonbinding float loadFactor() default 0.75f;
    } 
    ```

    这样，您可以将所需的容量和负载因子传递给生产者，返回任何基于如下的哈希表：

    ```
    @Inject @Hash(capacity = 256, loadFactor = 0.85f) private Set set;
    @Inject @Hash private Set set;
    @Inject @Hash(capacity = 8, loadFactor = 0.65f) private Map map; 
    ```

我希望这回答了你的问题。这肯定是我喜欢 CDI 的部分原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T05:31:34.900

**什么时候需要使用自定义限定符？**

只有在以下情况下才需要使用 CDI 自定义限定符： (a) 您的（非注释）代码故意在要使用的类型中引入歧义；(b) 您希望注入比代码指示的更具体类型的对象；(c) 您希望拥有比预定义限定符@Named 提供的更灵活的类型选择和可配置性。

限定符消除了 CDI 创建/注入的类型的歧义。
(a) & (b) 当你在代码中使用高级类型来给出一个强大的通用算法，可以重用和灵活调整时发生。例如，通常可以并鼓励针对接口而不是特定类编写整个算法 - 例如针对 List、Map 或 Queue 的算法。但通常这些算法只有在我们承诺接口的特定实现时才能很好地工作，例如 SortedList、TreeMap 或 PriorityQueue。如果 CDI 要充当对象工厂，执行对象生命周期管理，初始化正确的对象以进行注入和依赖管理，那么它需要了解全部细节。

自定义限定符在消除 CDI 创建/注入的类型歧义方面是智能且可配置的。@Named 是一个更直接的工具。对于 (c)，当我提到“类型选择”时，我的意思是开发人员可以将多个限定符组合在一起以“逻辑选择”最合适的类型，而无需命名精确的类。@Named 实际上需要指定精确的类 - 多个限定符将允许 CDI 为您解决。可配置性是指在部署时通过修改 beans.xml 来改变 CDI 行为的能力（无需修改代码/注释）。即可以在逻辑上调整 CDI 正在做什么，并且可以一直执行到部署时间 - 不触及代码或注释。

**什么时候需要声明自定义限定符？**

不需要为每个可以注入的单独类型创建 CDI 自定义限定符。这是最重要的。

多个限定符可用于注入点和类型声明。在确定注入什么类型时，CDI 匹配 bean 类型加上 SET OF 限定符。为了减少要声明的限定符的数量，将类型分解为描述它们的许多属性/关注点是一个好主意。然后，每个类型“属性”可以有一个限定符，而不是每个类型一个限定符 - 即使这样的属性是多值的，例如哈希/树/枚举（请参阅下一段）。

其次，限定符应该智能地使用参数来进一步减少所需的声明数量。与其创建 10 个限定符，不如使用一个限定符，它的参数是一个字符串，或者最好是一个可以接受 10 个值的枚举。

将这两个想法（限定符=类型属性加上使用限定符参数）结合到一个集合库的示例中：可以用代表排序/非排序的属性来描述类型？哈希/树/数组？链接/未链接？如果我指定一个变量是

```
@Inject @Sorted @Organisation("hash") @Navigation("linked") Map myMap; 
```

然后我有很强的类型选择，因为保证满足这些方面中的每一个，我有一个排序的链接哈希映射，但不知道这需要特定包中的一个非常特殊的类。

> ***尚未解决的要点：***
> 
> ***如果我使用带有参数化 bean 名称的一些注释，那么它实际上是如何类型安全的？***

保证强类型，因为必须完全匹配：

*   豆类
*   限定词集
*   参数值集

没有注入类型可以违反任何这些指定的事情。与其将类型安全视为单个字符串（packagename.classname）的匹配，不如将其视为完全由开发人员控制的多个字符串/值的匹配——这些相同的字符串/值用于声明和注入端，提供安全匹配。此外，不要认为您必须匹配最低级别的具体类 - 请记住您可以匹配继承层次结构中的更高级别的类并在您的类型上智能使用 @Default 限定符（请记住 Java EE 6“智能默认配置” ?) 将带您选择首选的具体类型。

> ***如果我为每个服务或 dao（每个接口）的类型安全使用自定义限定符，那么对于大型应用程序，例如拥有 1000 个或更多服务或具有多个实现的 dao 类，它会很混乱。那么对于大型应用程序，使用类型安全注入是否可行？***

*   1000或更多的服务或道课程？真的？？！这通常会立即标记出一个大的设计问题。除非这是针对税务部门或美国宇航局等复杂企业的超大型吉尼斯记录尝试申请。即便如此，分解成更小的 Java EE 模块/SOA 服务以及更少的类也是正常的。如果这是您所拥有的，您可能想要简化您的设计 - 您可能会遇到比过去限定符定义更大的问题......

*   只有在类型不明确的情况下才需要限定符 - 即同一类型层次结构中有许多祖先/后代类。通常情况下，相对较少的服务或 DAO 类是模棱两可的。

*   如上所述，不要使用每个实现类一个限定符模式：而是重构以使用每个类型方面的限定符，并且还使用每个限定符实现模式的描述性参数

*   在大型应用程序中使用类型安全注入是可行的。

> ***如果上述问题的答案是“否”，那么使用类型安全有什么意义呢？***

*   答案是“是”
*   提议的场景（1000 多个服务/DAO 类）非常罕见

> ***即使为类型安全编写注释是可行的，但在大型应用程序中，是否真的值得为避免冗长的 xml 配置而付出努力？***

CDI 的目的不仅仅是“避免冗长的 xml 配置” CDI 有以下目标：

*   通过对象的生命周期管理支持范围（包括新的 Web 对话范围）
*   类型安全的依赖注入机制，包括在开发或部署时选择依赖项的能力，无需详细配置
*   支持 Java EE 模块化和 Java EE 组件架构——在解决 Java EE 组件之间的依赖关系时，会考虑 Java EE 应用程序的模块化结构
*   与统一表达式语言 (EL) 集成，允许在 JSF 或 JSP 页面中直接使用任何上下文对象
*   装饰注入对象的能力
*   通过类型安全的拦截器绑定将拦截器与对象关联的能力
*   事件通知模型
*   除了 Java Servlets 规范定义的三个标准 Web 上下文之外，还有一个 Web 会话上下文
*   一个 SPI 允许便携式扩展与容器干净地集成

这与将基本 XML 配置文件转换为注释的方式不同且更有用——即使是早期的基本 Java EE 5 资源注入注释也与 XML 配置转换为注释不同且更有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T21:23:19.523

不需要`@Qualifier`每次都创建自定义。只用一些参数创建一个就足够了。CDI 将`@CustomQualifier("myBean")`和`@CustomQualifier("yourBean")`视为不同的限定符。

此外，这样的限定符已经在 CDI 包中 - [@Named](http://docs.oracle.com/javaee/6/api/javax/inject/Named.html)

但有时静态限定符非常有用，例如（参见[@Alternative](http://docs.oracle.com/javaee/6/tutorial/doc/gjsdf.html)）：

```
@Alternative
@Qualifier
@Documented
@Retention(value=RUNTIME)
public @interface Mock 
```

并且您可以将一些 bean 标记`@Mock`为仅用于测试（不要忘记在测试类路径中启用`alternative`部分。`beans.xml`

# php - Ajax reCaptcha 发布并插入数据库

> ID：15231257
> 
> 赞同：0
> 
> 时间：2013-03-05T18:24:39.427
> 
> 标签：php, jquery, mysql, ajax

您好，我有一个使用 ajax 的 recaptcha，但它没有将我的表单信息插入数据库，它插入空行，我不知道为什么这是我的代码：

```
 require_once('inc/recaptchalib.php');
$publickey = "6LdW1N0SAAAAADMIPPkOGd939meXV9a9qDwwcxbu"; // you got this from the signup page
$privatekey = "";

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"     type="text/javascript"></script>
 <script type="text/javascript">
 var RecaptchaOptions = {
    theme : 'clean'
 };
 </script>
<script type="text/javascript">
function validateCaptcha()
{
    challengeField = $("input#recaptcha_challenge_field").val();
    responseField = $("input#recaptcha_response_field").val();
    //alert(challengeField);
    //alert(responseField);
    //return false;
    var html = $.ajax({
    type: "POST",
    url: "ajax.recaptcha.php",
    data: "recaptcha_challenge_field=" + challengeField + "&recaptcha_response_field=" + responseField,
    async: false
    }).responseText;

    if(html == "success")
    {
        $("#captchaStatus").html("Success. Submitting form.");
        return false;
        // Uncomment the following line in your application
        //return true;
    }
    else
    {
        $("#captchaStatus").html("Your captcha is incorrect. Please try again");
        Recaptcha.reload();
        return false;
    }
}
</script> 
```

这是我要插入数据库的表格：

```
<form id="loginform" name="loginform" action="" method="post" enctype="multipart/form-data" onSubmit="return validateCaptcha()" >
                        <fieldset class="step">

                            <p>
                                <label for="nick">Nickname:</label>
                                <input type="text" name="nick" value="" id="nicknamee" value="" >
                            </p>
                            <p>
                                <label for="email">Email:</label>
                                <input type="text" name="email" value="" id="email_comm" value="" >
                            </p>

                            <p>  
                                <textarea class="text-input textarea wysiwyg" name="add_comment" id="text_commentt"></textarea>
                            </p>';?>
                            <div id="login">

    <?php echo recaptcha_get_html($publickey);?>

<p style="color: red;" id="captchaStatus">&nbsp;</p>

</div>

<?php
    echo'                        
                            <p style="margin-top:200px;"><button id="vote_petiton_submit" type="submit" ></button>
                            </p>

                        </fieldset>
                        </form> 
```

现在验证 reCaptcha 和数据库插入文件。验证没问题，只是在数据库中插入数据不能正常工作，它不会发布值。

```
<?php
require_once('inc/recaptchalib.php');
require_once('engine/db.php');
$publickey = "6LdW1N0SAAAAADMIPPkOGd939meXV9a9qDwwcxbu"; // you got this from the signup page
$privatekey = "";
 mysql_query("SET NAMES utf8");
$resp = recaptcha_check_answer ($privatekey,
                                $_SERVER["REMOTE_ADDR"],
                                $_POST["recaptcha_challenge_field"],
                                $_POST["recaptcha_response_field"]);

if ($resp->is_valid) {
    ?>success<?
    $nick=$_REQUEST['nick'];
        $type=0;   
            $email=$_REQUEST['email'];
            $descr=$_REQUEST['add_comment'];
            $descriere=strip_tags($descr,'<br><p><a><i><u><b>');    
            $id=150;

            $insert = "INSERT INTO comments (`nickname`,`desc`,`email`,`type`,`id_pet_dem_des`)
                        VALUES ('$nick','$descriere','$email','$type',$id)";
                $result = mysql_query($insert)
                    or die("query failed: " . mysql_error());

          $queryz = "update petition set comments=comments+1 where id_petition='$id'";
    $resultz = mysql_query($queryz)
        or die("query failed: " . mysql_error());
}
else 
{
    die ("The reCAPTCHA wasn't entered correctly. Go back and try it again." .
       "(reCAPTCHA said: " . $resp->error . ")");
}
?> 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:49:58.390

我通过更改 ajax 帖子中的数据来修复它

```
data: $('#loginform').serialize() + "recaptcha_challenge_field=" + challengeField + "&recaptcha_response_field=" + responseField, 
```

# mybatis - mybatis 接口映射器——重载方法

> ID：15231259
> 
> 赞同：2
> 
> 时间：2013-03-05T18:24:45.997
> 
> 标签：mybatis

我们可以在映射器接口中重载方法吗？如果是，mybatis如何区分mapper xml中的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-02T10:31:26.087

我们可以在映射器接口中重载方法吗？如果你的意思是实现 Mapper 接口 --> 否

Mybatis 通过“id”来区分 mapper xml 中的元素。

例如，如果我们有一个没有注释的 addUser 方法，我们可以通过指定 id="addUser" 在 xml 文件中重载它：

```
public interface UserMapper {
      void addUser( String name);
} 
```

xml映射器：

```
<insert id="addUser" ... > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T20:37:06.560

不，恐怕不支持，而且似乎[不会](https://github.com/mybatis/old-google-code-issues/issues/231)。对同一功能[提出](https://github.com/mybatis/mybatis-3/issues/705)了最近的请求，但它被标记为`wontfix`

# css - 如何创建一个三角形可点击的 div？

> ID：15231266
> 
> 赞同：1
> 
> 时间：2013-03-05T18:24:58.467
> 
> 标签：css

我正在尝试创建一个像 div 这样的三角形可点击按钮，在所附图像中是我想要实际实现的。[图片](http://i.stack.imgur.com/Ib5WN.png)

这是我到目前为止所达到的，[JsFiddle](http://jsfiddle.net/dajin007/nA6yn/)

HTML：

```
 <div class="input"><</div> 
```

CSS：

```
body {padding:40px;}

.input {   
text-decoration:none;
padding:5px 10px;    
background:#117ebb;
font-size:9px;
color:#fff;
border-radius:5.5px 0px 0px 5px;
box-shadow:  0px 5px 3px #003355;
position:relative;
width:1px;
height:12px;
}

.input:after {
position:absolute;
top:0px;
left:-10px;
content:" ";
width: 0;
height: 0px;
border-top: 13px solid transparent;
border-bottom: 13px solid transparent;
border-right:13px solid #117ebb;
border-radius:0px 0px 0px 20px; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:33:06.693

CSS纯三角形和jQuery你可以添加点击事件：

html

```
<div class="input"></div> 
```

jQuery

```
$(document).ready(function(){
    $(".input").click(function(){
        alert('hello arrow');        
    });
}); 
```

css

```
body {padding:40px;}
.input{
    width: 0; 
    height: 0; 
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent; 

    border-right:10px solid blue; 
    cursor: pointer;
} 
```

[http://jsfiddle.net/TvJ6t/](http://jsfiddle.net/TvJ6t/)

# actionscript-3 - 有没有办法查看AS3中光标的AUTO模式如何工作的源码？

> ID：15231269
> 
> 赞同：2
> 
> 时间：2013-03-05T18:25:01.567
> 
> 标签：actionscript-3

我需要了解光标的 AUTO 模式 (flash.ui.MouseCursor.AUTO) 是如何工作的，以及根据光标悬停在哪个对象上控制光标显示的代码。有没有办法查看此代码？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:57:42.620

[StaticText](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StaticText.html)继承自[DisplayObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html)它不是一个[InteractiveObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/InteractiveObject.html)。`InteractiveObject`是添加（除其他外）鼠标交互的类。

查看我为每个课程链接到的文档。请注意，在 和 的属性部分中`StaticText`，`DisplayObject`没有您已经观察到的`mouseEnabled`、`mouseChildren`或属性。`buttonMode`另请注意，在事件部分中，这些类不分派鼠标事件。这些事情只有在类扩展时才有可能`InteractiveObject`。

这里的假设是这是由 Flash Player 团队进行的优化。如果您需要发送鼠标事件的文本，您将需要使用 TextField 或其他扩展的类`InteractiveObject`（使用 TLF 文本，将您`StaticText`放在 a `Sprite`or`MovieClip`中，等等）

# html - 速度快的跨平台游戏框架

> ID：15231274
> 
> 赞同：-1
> 
> 时间：2013-03-05T18:25:13.967
> 
> 标签：html, unity3d, cross-platform, game-engine

我必须开发游戏，以便在 ANDRIOID 和 IOS、Blackberry（可选）或 Windows（如果可能）中使用相同的代码（或者可能是几行代码更改）。

我的目标是：-

> 1.  最重要 - 我需要打包为原生应用程序
> 2.  使用 HTML5 和 CSS3 或可能是其他语言的良好图形速度
> 3.  提供游戏引擎需求（Unity 3D 或 Cocos 等原生引擎
> 4.  可选 - 他们可以做的比 Android/IOS 更多 - 比如平板电脑、Windows Phone、BB10 和 > 桌面（浏览器/Windows 应用商店应用程序）

谁能帮我评估哪个最好

> 1.  电话间隙
> 2.  appMobi
> 3.  鲁代
> 4.  电晕
> 5.  游戏沙拉
> 6.  湿婆
> 7.  统一
> 8.  模具
> 9.  果酱可能是别的东西？

现在我对 2D 简单游戏持开放态度，但将来我也需要开发基于 3D 上下文的游戏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:00:21.420

*PhoneGap*不是 2D/游戏 JS 框架。它将帮助您在 JS 代码和设备的本机控制器之间建立桥梁。

*GameSalad*还不错，但不是很灵活。如果你想做高级的事情，你会觉得卡在它的环境中。

*Cocos2D*发布了一个运行良好的 JS 框架 [http://cocos2d-javascript.org/](http://cocos2d-javascript.org/)

或者带有许多令人印象深刻的演示的 *GameQuery* [http://gamequeryjs.com/](http://gamequeryjs.com/)

# session - 在同一 weblogic 服务器上从 contextB 杀死 contextA 的会话

> ID：15231277
> 
> 赞同：0
> 
> 时间：2013-03-05T18:25:23.957
> 
> 标签：session, weblogic

嗨，我在同一台机器上有 2 场战争。比方说warA和warB。

当用户在 /warA 中时，我在 /warB 中有同一用户的 sessionId。我想终止这个会话。

我的目标是如果 /warA 中的用户，我想确定 /warB 中的用户会话被杀死。

有人可以说编写一个终止 /warB 的会话并从 /warA 调用它的 servlet。

我不能这样做的原因是，/warB 前面有一个代理（Oracle 访问管理器），它执行身份验证部分并且不让我直接调用 warB 的 servlet。

那么还有其他方法可以完成我的工作吗？

编辑：

我找到了这个。OAM 代理是否会中断此请求？是简单的请求还是上下文之间的请求？

servletContext.getContext("/warB").getRequestDispatcher("/logout");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:39:57.653

如果两个war文件部署到同一个WLS服务器，我相信这是默认行为。WebLogic 将会话 ID 存储在名为 jsessionid 的 cookie 中，如果您未在`weblogic.xml`. 因此，如果用户登录war2，来自war1 的jsessionid cookie 将被覆盖，并且与war1 的会话将不会被维护。

# batch-file - 遍历文档中的文件

> ID：15231279
> 
> 赞同：0
> 
> 时间：2013-03-05T18:25:28.850
> 
> 标签：batch-file, dos

我有一个像这样的文件：

```
10.4.33.22 ocean,cat,dog,monkey
33.55.66.77 rabbit,piggy 
```

我创建了一个 for 循环来遍历 IP 地址。

```
for /F %%i in (%File_dbname%) do ( 
   echo %%i database >> %output-file%
) 
```

第一个 IP 地址中有 4 个实例。

我正在考虑使用另一个 for 循环来遍历这些实例/每个 IP 地址。

我不知道如何使用任何分隔符，跳过第一个 IP 地址之间的空格并进入海洋，直到它击中猴子，当检测到猴子之后的空格时，它将进入下一行。

请多多指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:59:16.900

您可以按照您描述的方式嵌套 for 循环。这是一个例子：

```
for /F "tokens=1*" %%i in (%File_dbname%) do ( 
    for %%A in (%%j) do (
        echo %%i %%A >> %output-file%
    )
) 
```

使用您提到的示例数据，结果将是：

```
10.4.33.22 ocean 
10.4.33.22 cat 
10.4.33.22 dog 
10.4.33.22 monkey 
33.55.66.77 rabbit 
33.55.66.77 piggy 
```

这就是你要找的东西，还是至少让你看到它是如何工作的？

在`for`没有任何`/f`开关或类似的循环中，逗号被视为分隔符。在`for /f`循环中，`"tokens=1*"`means`%%i`是第一个标记（表示直到空格的所有内容），而`%%j`所有未包含在`%%i`.

# c - 如何在 C 中解决给定的 typedef

> ID：15231280
> 
> 赞同：1
> 
> 时间：2013-03-05T18:25:29.040
> 
> 标签：c, typedef

我有几个 typedef 语句，但现在确定它的原始类型是什么

```
 typedef unsigned int addrt;
 typedef addrt addr32t; 
```

“addr32t”只是一个无符号整数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:27:07.490

*   `addrt`是 的别名`unsigned int`。
*   `addr32t`是 的别名`addrt`，因此是 的别名`unsigned int`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T18:27:17.060

> “addr32t”只是一个无符号整数吗？

是的。

# common-lisp - 使用从字符串读取的大多数比较运算符避免奇怪的结果

> ID：15231281
> 
> 赞同：1
> 
> 时间：2013-03-05T18:25:29.153
> 
> 标签：common-lisp, comparison-operators

我正在使用一个名为 CCL 的通用 lisp 实现，我遇到了一个我不太理解的奇怪问题。

当我打电话时：

```
(read-from-string "(=)") 
```

我得到一个包含等号运算符的列表：

```
(=) 
```

但是当我打电话时：

```
(read-from-string "(<)") 
```

我在 < 前面有一个反斜杠：

```
(\<) 
```

我觉得这很令人困惑，我想知道这是否特定于我的实现，或者这是规范的预期部分？为什么这个 \ 会显示 < 和 > 而不是 =？

有没有办法避免反斜杠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T23:05:04.870

反斜杠只是一个演示问题。

当你这样做时，`(mapcar #'symbol-name (read-from-string "(<)"))`你可能会得到`("<")`，所以你*得到*了正确的符号。

如果您愿意，您可以将此作为错误报告给 CCL 维护人员，因为此反斜杠与 ANSI CL 标准有（微小）偏差。

# php - PHP：使用锚标签提交表单数据

> ID：15231283
> 
> 赞同：0
> 
> 时间：2013-03-05T18:25:34.250
> 
> 标签：php, mysql, database

我正在努力使用以下代码将数据提交到数据库。我只是想知道如何使用锚链接提交/更新表。

如何获取动态生成的 ID 或名称，例如`$p_id`等。提交表单时，它会正确获取值。

我需要使用 jquery 还是 PHP 才能处理这个过程？

这是我的代码

```
echo '<ul class="rm-media-list">'; 

                            while ($media = mysql_fetch_array($media_item)) {

                                $m_uid = $media['user_id'];
                                $m_uname = $media['user_login'];

                                $media_class = new q2a_review_media;
                                $thumb_path = $media_class->rm_thumbnail_url($pid,$m_uid);
                                $media_url = $media_class->rm_media_url($pid,$m_uid);
                                $mediaid = $media['id'];
                                $image_name = $media['image_name'];                                

                                echo '<li>';
                                echo '<span class="rm-media-user"><a href="'.admin_url( 'user-edit.php?user_id=' . $m_uid, 'http' ).'">',$m_uname,'</a></span>';
                                echo '<a href="'.$media_url.$image_name.'" rel="lightbox['.$pid.']" title="Post: '.$pid.' |  '.$ptitle.' | Image: '.$image_name.' | by: '.$m_uname.' " ><img src="'.$thumb_path.$image_name.'" alt="'.$media['image_name'].'" width="56" class="rm-thumbs-list" /></a>';
                                echo '<span class="rm-action-links"><a href="#" class="approve-button" id="'.$mediaid.'" >Approve</a> | <a href="#" class="delete-button" id="'.$mediaid.'" >Delete</a></span>';                            
                                echo '</li>';
                            }

                        echo '</ul>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:29:23.277

您需要使用 JavaScript 并将点击处理程序绑定到锚点。像这样的东西与 jQuery ......

**HTML**：

```
<form name="myform" id="myForm" action="foo">
    <input type="hidden" name="bar" id="bar" value="" />
</form>

<a href="#" data-val="123" class="formAnchor">Submit 123</a>
<a href="#" data-val="abc" class="formAnchor">Submit abc</a> 
```

**JS**：

```
$('.formAnchor').on('click', function(e) {
    e.preventDefault(); // prevents a window.location change to the href
    $('#bar').val( $(this).data('val') );  // sets to 123 or abc, respectively
    $('#myForm').submit();
}); 
```

**演示** [http://jsfiddle.net/jtKyv/](http://jsfiddle.net/jtKyv/)

# jquery - 在 jQuery 图像滑块上显示 html 内容

> ID：15231286
> 
> 赞同：0
> 
> 时间：2013-03-05T18:26:00.353
> 
> 标签：jquery, image, slider

这是我正在处理的页面的（有点）工作版本：[https](https://www.the-car-club.com/walsergold/home.asp) ://www.the-car-club.com/walsergold/home.asp 。内容显示正常，但只有最后一张幻灯片上的内容是可点击的。关于如何使前几张幻灯片上的内容具有交互性的任何建议？

HTML

```
<div class="square-slider">
<div class="slide slide1">
    <div class="content light">
        <h3>Recreating The Square Slider</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ac eros et augue vulputate 
        aliquet pellentesque vitae tortor. Pellentesque mi velit, euismod nec semper</p>
    </div>
    <img src="images/asset1.png" alt="" class="asset" />
</div>
<div class="slide slide2">
    <div class="content dark">
        <h3>Looks Amazing Right?</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ac eros et augue vulputate 
        aliquet pellentesque vitae tortor. Pellentesque mi velit, euismod nec semper</p>
    </div>
    <img src="images/asset2.png" alt="" class="asset" />
</div>
<div class="slide slide3 inverted">
    <div class="content light">
        <h3>And Simple To Use</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ac eros et augue vulputate 
        aliquet pellentesque vitae tortor. Pellentesque mi velit, euismod nec semper</p>
    </div>
    <img src="images/asset3.png" alt="" class="asset" />
</div>
<a href="#" class="prev">Prev</a>
<a href="#" class="next">Next</a>
<div class="overlay"></div> 
```

JavaScript (jQuery)

```
(function($){

$('.square-slider').each(function(){
    var slider = $(this),
        slides = slider.find('.slide'),
        currentSlide = 0;

    slides.show();
    $(slides[currentSlide]).addClass('active');
    $('.next,.prev', slider).show();

    $('.prev', slider).on('click', function(){
        slides.removeClass('active');
        currentSlide--;
        if(currentSlide < 0) currentSlide = slides.length - 1;
        $(slides[currentSlide]).addClass('active');
        return false;
    });

    $('.next', slider).on('click', function(){
        slides.removeClass('active');
        currentSlide++;
        if(currentSlide > slides.length - 1) currentSlide = 0;
        $(slides[currentSlide]).addClass('active');
        return false;
    });
});

})(window.jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:59:04.210

您需要显示：无/阻止幻灯片。在您当前的代码中，您只是使用“活动”类将不透明度从 1 更改为 0。所以元素仍然存在，最后一个元素（slide3）将是唯一可以点击的东西。删除对 .show() 的所有引用，编辑您的 CSS 并将 display:block 添加到“活动”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:01:29.823

为了保持可访问性，试试这个而不是 {display: none}。

```
.slide {left: -999em;}
.slide.active {left: 0;} 
```

但是，您需要将这些样式合并到您的 jQuery 中，以防止突然转换。

# javascript - javascript多个条件不起作用

> ID：15231288
> 
> 赞同：0
> 
> 时间：2013-03-05T18:26:09.357
> 
> 标签：javascript, sorting, drop-down-menu, multiple-conditions

我有一个下拉列表，列表中的每个选项都有一年和一个月。我想根据年份或月份或两者对选择的选项进行排序。所以我可以显示按年份或月份或年份和月份排序的选项或显示所有内容。我有以下事件：

```
 $('#years,#months').bind('change', function () {
         y = $('#years').val();
         m = $('#months').val();
         $('#files > option').each(function () {
             $(this).show();
         });
         $('#files > option').each(function () {
             string = $(this).text();
              //first situation 
             if (y == 'All' && m == 'All')
                $(this).show();
            // second situation 
             else if ((y == 'All') && string.indexOf(m) == -1) 
                    $(this).hide();
            //third situation 
             else if ( string.indexOf(y) == -1 && m == 'All') 
                  $(this).hide();
             // fourth situation 
             else if (string.indexOf(y) == -1 || string.indexOf(m) == -1) 
               $(this).hide();
         });
     }); 
```

使用 html 代码：

```
<select id='years'>
    <option value='All'>All</option>
    <option value='2013'>2013</option>
    <option value='2012'>2012</option>
</select>
<select id='months'>
    <option value='All'>All</option>
    <option value='Feb'>Feb</option>
    <option value='Jan'>Jan</option>
</select>
<br/>
<br/>
<select id='files' siz='10'>
    <option value='0'>sdgsdfsadfsd1-2013-Feb-1212</option>
    <option value='1'>fsadfadsfadsfadsf2-2012-Feb-123123</option>
    <option value='2'>fsadfadsfadsfadsf3-2012-Jan-123123</option>
    <option value='3'>fsadfadsfadsfadsf4-2013-Jan-123123</option>
    <option value='4'>fsadfadsfadsfadsf5-2012-Feb-123123</option>
    <option value='5'>fsadfadsfadsfadsf6-2013-Feb-123123</option>
    <option value='6'>fsadfadsfadsfadsf7-2013-Feb-123123</option>
    <option value='7'>fsadfadsfadsfadsf8-2013-Jan-123123</option>
    <option value='8'>fsadfadsfadsfadsf9-2012-Jan-123123</option>
    <option value='9'>fsadfadsfadsfadsf10-2013-Feb-123123</option>
    <option value='10'>fsadfadsfadsfadsf11-2012-Feb-123123</option>
</select> 
```

第二种和第三种情况都不起作用！它处理两个条件（true && false），（false && true），因为它们是相同的值！我不知道为什么 ！这是一个[演示](http://jsfiddle.net/qt9DV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:38:12.133

你的逻辑是错误的；最后一个条件不应该被评估。（例如：如果`y == 'All'`和也`string.indexOf(m) >= 0`）。试试这个：

```
$('#files > option').each(function () {
    var string = $(this).text();
    var show;
    if (y == 'All') {
        show = m == 'All' || string.indexOf(m) >= 0;
    } else if (m == 'All') {
        show = string.indexOf(y) >= 0;
    } else {
        show = string.indexOf(y) >= 0 && string.indexOf(m) >= 0;
    }
    if (show) $(this).show();
    else $(this).hide();
}); 
```

# mysql - 如何在 sql 查询的空字段中显示文本？

> ID：15231289
> 
> 赞同：3
> 
> 时间：2013-03-05T18:26:13.920
> 
> 标签：mysql, sql

我必须从数据库中提取客户列表，但如果第二个地址字段为空，我想显示文本无提供。这是我的查询：

```
 select concat(first_name, " ", last_name) as CustomerName, address, 
    address2, postal_code 
    from customer
    inner join address 
    using (address_id); 
```

如果 address2 为空白，我想显示“未提供”。我怎么做？我确信答案非常简单，但我脑子里放了个屁，我在任何地方都找不到答案。

好的，这就是我最终的结果：

```
 case when address2=" " or address2 is null then 'None Provided' 
    else address2 end as address2, 
```

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T18:28:10.383

您可以使用`CASE`：

```
select concat(first_name, " ", last_name) as CustomerName, 
   address, 
   case when address2 is null then 'None Provided' else address2 end as address2, 
   postal_code 
from customer
inner join address 
using (address_id); 
```

甚至更好[`COALESCE`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)：

```
select concat(first_name, " ", last_name) as CustomerName, 
   address, 
   COALESCE(address2,'None Provided') as address2, 
   postal_code 
from customer
inner join address 
using (address_id); 
```

如果数据包含空字符串或 null，那么我会考虑使用：

```
select concat(first_name, " ", last_name) as CustomerName, 
   address, 
   case 
     when address2 is null or address2 = '' 
     then 'None Provided' 
     else address2 end as address2, 
   postal_code 
from customer
inner join address 
using (address_id); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:28:17.500

您可以使用内置[`COALESCE`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)函数来实现这一点。

> 返回列表中的第一个非 NULL 值，如果没有非 NULL 值，则返回 NULL。

```
select concat(first_name, " ", last_name) as CustomerName, address, 
COALESCE(address2, 'None provided') as address2, postal_code 
from customer
inner join address 
using (address_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:28:35.273

```
select concat(first_name, " ", last_name) as CustomerName, address, 
    COALESCE(address2,'none provided') as address2, postal_code 
    from customer
    inner join address 
    using (address_id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T18:33:48.477

使用 COALESCE...

```
select concat(first_name, " ", last_name) as CustomerName, address, COALESCE(address2, 'None provided') as address2, postal_code from customer inner join address using (address_id); 
```

COALESCE 将返回列表中的第一个非 NULL 值

# java - 从一个测试调用方法时的junit测试

> ID：15231296
> 
> 赞同：1
> 
> 时间：2013-03-05T18:26:31.220
> 
> 标签：java, unit-testing, testing, junit

```
public void createRootElement() throws FileNotFoundException, IOException
    {
    Properties prop = new Properties();
    prop.load(new FileInputStream("/home/asdf/Desktop/test.properties"));
        File file = new File(prop.getProperty("filefromroot"));
        try
            {
                // if file doesn't exists, then create it
                if (!file.exists())
                    {
                        file.createNewFile();
                    }
                FileWriter fw = new FileWriter(file.getAbsoluteFile());
                BufferedWriter bw = new BufferedWriter(fw);
                bw.write("<root>"); //create the root tag for the XML File.
                bw.close();
            }
        catch(Exception e)
            {
            writeLog(e.getMessage(),false);
            }
    } 
```

我是 junit 测试的新手。我想知道如何为此编写测试用例以及要考虑的所有内容。如何调用从这个测试中调用的方法。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:08:55.017

JUnit 测试用例应该如下所示：

```
import static org.junit.Assert.assertTrue;
import org.junit.Test;

public class ClassToBeTestedTest {

    @Test
    public void test() {
        ClassToBeTested c = new ClassToBeTested();
        c.createRootElement();
        assertTrue(c.rootElementExists());
    }

} 
```

您使用 @Test 注释标记测试方法并编写执行您想要测试的代码。

在此示例中，我创建了您的类的一个实例并调用了 createRootElement 方法。

在那之后，我做了一个断言来验证一切是否像我预期的那样。

你可以断言很多事情。阅读 JUnit 文档以获取更多信息。

一个好的做法是在实际编写代码之前编写测试。因此，测试将指导您如何编写更好的代码。这称为 TDD。谷歌为它。

# javascript - 禁用整个表行的操作

> ID：15231299
> 
> 赞同：0
> 
> 时间：2013-03-05T18:26:45.943
> 
> 标签：javascript

我有一个表格，其单元格中包含用户交互控件（按钮、链接等），我想将该表格的某些行“变灰”，以便禁用这些行的所有操作。

知道什么是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:29:44.410

可以将按钮设置为`disabled`，但链接仍然可以使用。一种可能的技术可以将 href 设置为临时属性`data-link=" ... the link ... "`，然后在启用时使用 javascript 将其设置为属性 href。

创建禁用的 css 类也可能有助于产生禁用链接的错觉。

jQuery 在这里会变得很方便，但需要安装。

# java - Spring JdbcTemplate 的 queryForList() 有很多 args 是不可读的；SQLQuery 不给我列名的列表

> ID：15231300
> 
> 赞同：2
> 
> 时间：2013-03-05T18:26:49.067
> 
> 标签：java, spring, hibernate, plsql, jdbctemplate

注意：这可能是一个简单的问题，但我找不到简单的方法来说明它。所以，很抱歉这个长长的问题。

在我负责的一个项目中，我使用 Spring 2.5、Hibernate 3.3.2 作为中间件和 Oracle 数据库。由于数据库与许多其他项目相关，因此某些查询非常复杂，我无法使用 Hibernate 的解决方案（HQL、标准等）获得解决方案。所以我觉得 JdbcTemplate 的 queryForX() 方法更舒服，作为一个例子；

```
String sql = "select * from myTable";
jdbc.queryForList(sql); 
```

当然，确实存在大多数“位置”条件和参数：

```
jdbc.querForList(sql, new Object[]{obj1,obj2,obj3 /* and many more arguments... */}) 
```

在这种情况下，我必须写问号“？” 对于我的参数，所以我的 SQL 查询字符串变得有些混乱且难以阅读；像这样的东西：

```
select t1.col1, t2.col2, t1.col, --...some cols , 
    sum(nvl(some_col1,?)-nvl(other_col2,?)) over (partition by col1,col2,col3,col4) sum_of_cols 
from weird_table t1, another_table t2
where t1.col20=? and sum_of_cols>? and t1.col3=t2.col3 --and many ?'s...
and not exists (
    select ? from boring_table t3 where -- many ?'s
)
--group by  and order by order by etc 
```

那么现在，哪个问号对应哪个参数？这很明显，但很难阅读。但是对于绑定参数还有其他一些解决方案，例如：

```
select * from a_table t where t.col1= :col1 and t.col2= :col2 -- and many more ":param"s 
```

对于这种类型的查询，如果它是 Hibernate，我们可以这样写：

```
Query q = hibernateTemplate.createQuery();
q.setString("col1","a value");
q.setInteger("col2", 3); 
```

我认为它更具可读性和易于理解哪个值是什么。我知道我可以用 SQLQuery 做到这一点；

```
SQLQuery sq = hibernateTemplate.createSQLQuery();
/* same as above setInteger() etc. */ 
```

但这`sq.list()`给了我一个没有列名的列表。所以我有一个很难使用的基本数组：

```
[[1,2,"a"],[1,2,"b"], ...] 
```

但随着`queryForList()`我变得更好：

```
[{COL1=1,COL2=2,COL3="a"},{COL1=1,COL2=2,COL3="b"},...] 
```

所以如果我使用`queryForList()`，我必须写一个非常凌乱的 params 对象；或者我使用`SQLQuery`，然后我必须获取没有地图的列表作为列名。

是否有使用更具可读性的参数设置（如 query.setX()）的映射列表的简单解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:06:56.677

那么你可以使用[NamedParameterJdbcTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.html)来做到这一点

这是一个样本

```
 String query = "INSERT INTO FORUMS (FORUM_ID, FORUM_NAME, FORUM_DESC)
 VALUES (:forumId,:forumName,:forumDesc)";
    Map namedParameters = new HashMap();
    namedParameters.put("forumId", Integer.valueOf(forum.getForumId()));
    namedParameters.put("forumName", forum.getForumName());
    namedParameters.put("forumDesc", forum.getForumDesc());
    namedParameterJdbcTemplate.update(query, namedParameters); 
```

您可以使用以下链接中的源代码检查完整示例

[Spring NamedParameterJdbcTemplate 教程](http://www.dzone.com/tutorials/java/spring/spring-named-parameter-jdbc-template.html)

# xml - 从 xsd 中提取路径

> ID：15231305
> 
> 赞同：1
> 
> 时间：2013-03-05T18:26:57.693
> 
> 标签：xml, xsd, schema

假设我有以下 XML 文档：

```
<foo>
  <bar/>
  <bang bash="hello">
    <foobar>123</foobar>
  </bang>
</foo> 
```

我想提取本文档中各个叶子的所有路径列表，例如：

```
foo
foo.bar
foo.bang
foo.bang.@bash
foo.bang.foobar 
```

这个过程有术语吗？

更进一步：假设我有一个 .xsd 用于一个非常复杂的 XML 模式。有没有一种简单的方法可以从 .xsd 中提取所有此类路径？

（通过简单的方式，理想情况下，我的意思是在某处是否存在执行此操作的库？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:25:10.043

在 SGML 社区中，您正在寻找的值（当它们涉及元素时）被称为“完全限定的通用标识符”或 FQGI；因为 '。' 是 XML 中的合法名称字符，在 SGML 参考具体语法中，FQGI 通常用斜线书写，您正在书写点。（我将在这里延伸术语 FQGI 并用它来表示您感兴趣的字符串，包括表示属性而不是元素的字符串。）

对于查找所有 FQGI 集合的过程，我不知道任何既定术语，这些 FQGI 可能出现在针对特定模式有效的文档中。请记住，在许多 XML 词汇表中，这是一个无限集；如果您想要一个终止的进程，您将需要识别所有可能的 FQGI 的有限子集。

但是您需要遵循的过程相对简单。一个简单的版本是这样运行的：

1.  如果您感兴趣的模式是跨多个模式文档定义的，请将它们全部组合到单个 XML 文档（具有多个 xs:schema 子项的包装器）或可以使用 XSLT 或 XQuery 处理的模式文档的单个集合中。

2.  确定您希望开始的元素声明和属性声明集。（在你的例子中，这个集合大概由 foo 的顶级元素声明组成。）对于这个集合中的每个项目，写下它的名称和它的类型。将这组字符串/类型对称为 S。

3.  将集合 S 复制到集合 S' 中。

4.  按以下方式创建集合 S''：从 S'' 为空开始，然后对于 S' 中的每个项目，令 N 为 FQGI，T 为项目中命名的类型，并且：

    (a) 如果 N 表示一个属性，那么什么也不做。

    (b) 如果 N 表示一个元素，则识别可能出现在该元素上的属性集。对于每个这样的属性，确定其类型 T2，并通过连接 N、斜杠、at 符号和属性的扩展名称来创建字符串 N2。将 (N2, T2) 对添加到 S''。

    (c) 如果 N 表示一个元素，则找到 (i) 出现在 T 的内容模型中，(ii) 匹配 T 的内容模型中的通配符，或 (iii) 可替换的元素集合(i) 或 (ii)。对于每个这样的可能的孩子，识别孩子的类型 T3 并通过连接 N、“/”和可能的孩子的扩展名称来创建一个字符串 N3。将 (N3, T3) 对添加到 S''。

5.  如果 S'' 为空，你就完成了，你的答案在集合 S 和集合 S' 的并集中。否则，令(a new) S 为S 和S' 的并集，令(a new) S' 等于S''，并进行步骤4。

稍加思考就会告诉您，可以匹配通配符的名称集是无限的，因此步骤 4(c) 中的列表 (ii) 无法完整处理。您可以通过多种方式选择列表的有限子集；您选择哪个取决于您想要 FQGI 列表的用途。

稍加思考就会告诉您，如果词汇表中的任何元素都可以作为其自己的后代出现（如 HTML 的 div 或 li 元素），那么概述的过程将永远不会终止。同样，有多种方法可以修剪 4(c) 中生成的对集合以保证终止。

我不知道有什么库可以做到这一点，也许是因为对于有趣的 XML 词汇表来说，可能的 FQGI 集很少是有限的。使用 XQuery 引擎或在 XSLT 样式表中完成这项工作很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:34:18.063

SO上发布了[一个类似的问题。](https://stackoverflow.com/questions/9564987/create-xpath-from-xsd-in-java/9566441#9566441)除了我在相关帖子中描述的解决方案之外，我仍然不知道您的方案有任何开箱即用的解决方案（API 或其他）。

我是第一个认识到即使是我在 SO 上描述[的解决方案](https://stackoverflow.com/questions/8378648/xsd-structure-to-csv-as-path-type-cardinality)也可能缺乏对某些 XSD 功能的覆盖，或者可能与一个人对如何生成某些 XPath 的特定期望不匹配。它可以支持更新请求中的内容（包括额外的“元数据”，例如由 XPath 匹配的节点类型），因为可以使用自定义公式添加计算列以匹配您的模式。

虽然 CM Sperberg-McQueen 描述的算法肯定会让您对它可能涉及的一些事情有所了解，但它也包含一个关于头脑简单的方法的温和“免责声明”，这实际上意味着所涵盖的许多场景XSD 规范被忽略了。

除非您的 XSD 真的很简单，否则请认为这是一个预告片！一些“坏”的例子：通过复杂类型（不仅仅是元素引用）的递归 XML 结构（暗示）是棘手的，当类型层次结构在 XSD 的设计中很重且普遍时更是如此；使用抽象类型元素（想想 XML 实例中的 xsi:type 属性）、块属性的使用、表单属性、变色龙 XSD 的使用（现在步骤 1 本身就很有趣，更不用说是否使用了不同的默认值用于模式级别的元素/属性形式）。

如果您发现其中一些额外的“细节”适用于您的 XSD，那么我建议您忘记 XQuery 或 XSLT，并使用专门的模式对象模型 API（Java 上的 XSOM，.NET 也有一个很好的 API）来遍历您的 XSD - 在这里我只是重复了 @pgfearo 所说的话（据我所知，SAXON XSD 支持仅在付费版本中提供；而 Apache 和 JAXB RI 为您免费提供 XSOM）。那时你不需要担心很多事情，而且很可能你可以在合理的时间内完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-14T12:39:05.030

我创建了一个 Java 工具[XsdPathTypeGenerator](https://github.com/linus1412/XsdPathTypeGenerator)来执行此操作。它还提取元素和属性类型。

给定一个 XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="http://smitek.co.uk/example/1">
    <xsd:element name="employee">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="name" type="xsd:string"/>
                <xsd:element name="department">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="name" type="xsd:string"/>
                        </xsd:sequence>
                        <xsd:attribute name="code" type="xsd:integer"/>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
            <xsd:attribute name="active" type="xsd:boolean"/>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

它将创建一个地图

```
employee@active=xsd:boolean
employee/name=xsd:string
employee/department@code=xsd:decimal
employee/department/name=xsd:string 
```

它有一定的局限性，这意味着您将其作为工具运行而不是将其用作库，这对我来说是懒惰的，但它至少解决了我的问题:)

# ruby-on-rails - 使用特定类验证 ActiveRecord 字段

> ID：15231314
> 
> 赞同：0
> 
> 时间：2013-03-05T18:27:17.037
> 
> 标签：ruby-on-rails, validation, rails-activerecord

我想验证我的字段是否来自一个特定的类。

具体例子。*我有一个每天*必须独一无二的模型。所以，我插入一个验证

```
validates :my_date_field, uniqueness: {scope: [:scope_one, :scope_two]} 
```

如果我使用日期创建记录，则验证工作正常。但是，如果我使用 Time 创建记录（我的测试使用 Time::now），它会将其解析为 Date，但不会触发验证。

我应该如何解决它？

提前致谢。

--编辑-- 一个相关的问题：

我如何禁止某人做 MyModel::create my_date_field: 4

? 它从 active_record 传递 validate_presence，从迁移传递 null: false，并在我的 date_field 中保存一个丑陋的 4。

我在这里完全迷路了=\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:31:58.150

ActiveRecord 会将您的值类型转换为它认为适合基础数据库字段的任何类型。不过，您仍然可以通过`my_date_field_before_type_cast`. 每个`*_before_type_cast`属性都存在访问器。在那里，您可以检查课程或进行您可能需要的任何其他转换。这些也可用于自定义验证方法。

# integration - Quickbooks 同步管理器 - 将 REST 服务转换为数据

> ID：15231320
> 
> 赞同：0
> 
> 时间：2013-03-05T18:27:37.040
> 
> 标签：integration, quickbooks, intuit-partner-platform

我们正在使用 Quickbooks 同步管理器将我们的数据传输到互联网上。我们不想再使用 Web 连接器，因为我们一直在使用它以及通过它运行的应用程序遇到问题。我需要能够读取/写入同步管理器在线放置的数据，但如果不通过不支持非 SaaS 应用程序的应用中心，我无法弄清楚如何获取它......我只需要我的从 Web 服务器获取/发送一些数据到 Quickbooks 的独立代码。

关于如何开始的任何提示都会很棒。我可以做 REST 服务没问题......我只是不知道如何连接到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:20:29.330

你想做什么，是不可能的。

您应该查看 Intuit 合作伙伴平台常见问题解答：

*   [http://docs.developer.intuit.com/0025_Intuit_Anywhere/0080_FAQ](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0080_FAQ)

具体注意这一点：

> 问：我想将我的自定义（非 SaaS、单租户）解决方案与 Intuit Anywhere 集成。我可以这样做吗？
> 
> 答：不是今天，但我们正在考虑。

**如果您不是 SaaS，那么您没有资格使用 Intuit 合作伙伴平台/Intuit Anywhere/Sync Manager。**

PS：Web 连接器的*麻烦*更少，*更*可靠和同步管理器。如果您在使用 Web 连接器时遇到问题，您应该在论坛上询问 - 您可能只需要调整脚本以使其更可靠，并且这实际上不是 Web 连接器问题。

# php - 如何从我的模块布局 xml 中插入目录/类别列表块

> ID：15231324
> 
> 赞同：0
> 
> 时间：2013-03-05T18:27:41.790
> 
> 标签：php, xml, magento, templates

我正在尝试制作一个`"before_body_end"`在选定页面上插入一些 JS 跟踪代码的模块。到目前为止，我已经成功地为我自己的块注入了一个模板，该`.phtml`模板包含在我的布局 XML 中使用此代码在产品视图上跟踪 JS：

```
<catalog_product_view>
    <reference name="before_body_end">
        <block type="catalog/product_view" name="trackingjs_product" template="company/module/product.phtml"></block>
    </reference>
</catalog_product_view> 
```

并确保块类型为 catalog/product_view，以便我可以访问产品类并获取当前产品 ID 等信息。我的问题是产品列表页面。我尝试了类似的代码，`catalog/product_list`但没有奏效。

似乎我必须将它设置`catalog_product_view`为它才能输出任何东西，但是我无权访问产品集合。关于如何访问产品集合或如何使其工作的任何想法`catalog/product_list`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:39:25.830

如果您只需要产品或类别信息，则不需要此类块。只要您有 Mage::registry('current_product') 和 Mage::registry('current_category') 来检索产品和类别信息，就会找到核心/模板。

但如果你喜欢你的方式，我建议你这样做

```
<catalog_category_layered>
<reference name="before_body_end">
    <block type="catalog/product_list" name="trackingjs_list" template="company/module/list.phtml"></block>
</reference>
</catalog_category_layered>
<catalog_category_default>
<reference name="before_body_end">
    <block type="catalog/product_list" name="trackingjs_list" template="company/module/list.phtml"></block>
</reference>
</catalog_category_default> 
```

# javascript - Jquery UI 1.10 - 获取手风琴内选项卡的索引

> ID：15231331
> 
> 赞同：1
> 
> 时间：2013-03-05T18:27:51.453
> 
> 标签：javascript, jquery, jquery-ui

所以我有一个 JQuery UI 手风琴，每个折叠里面都有一些标签。我正在尝试在打开的手风琴折叠中获取当前打开的选项卡的索引。我有一个在以前版本的 JQuery 中工作的解决方案：

```
var active_tab = $(".accordion.ui-accordion-content-active.tabs").find("div:not(.ui-tabs-hide)").index()-1; 
```

但是，由于我更新了我的 JQuery 版本，我无法让它工作，它总是给我一个“-2”。

我也尝试过这样的事情：

```
var curTab = $('.accordion .ui-accordion-content-active .ui-tabs-active');
active_tab = curTab.index(); 
```

但这又给了我一个-1，不管选择的标签是什么。

[这里](http://jsfiddle.net/NALMd/)有一个 JSFiddle展示了这种行为。

需要明确的是，我需要能够记住刷新之间的页面状态。因此，我需要活动手风琴索引和活动选项卡索引，然后将它们放入 cookie 并检查刷新。然后打开相应的手风琴和选项卡，页面看起来与刷新前一样。任何提示将不胜感激。预先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:49:20.273

您需要使用`active`jQuery UI 为您提供的正确功能（选项）来查找活动的手风琴和选项卡：

```
var activeAccordionIndex = $( ".accordion" ).accordion( "option", "active");

var activeTabIndex = $(".accordion > div:eq(" + accordionIndex + ")").find(".tabs").tabs( "option", "active"); 
```

[工作示例](http://jsfiddle.net/jbabey/NALMd/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:45:31.767

使用[jQuery Tab 的`.activate()`事件](http://api.jqueryui.com/tabs/#event-activate)：

JAVASCRIPT：

```
$( ".accordion" ).accordion({
    active: false,
    heightStyle: "content",
    collapsible: true
});

$( ".tabs" ).tabs({
 activate: function( event, ui ) {
     active_tab = ui.newTab.index();
 }
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/NALMd/4/](http://jsfiddle.net/dirtyd77/NALMd/4/)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T18:48:47.457

根据您提供的 jsFiddle 代码，您必须像这样更改它：

```
var curTab = $('.accordion h3.ui-state-active');
active_tab = curTab.index('h3'); 
```

首先我们选择活动标签，然后我们得到它的正确索引

# c# - 这是获取访问令牌的正确方法吗

> ID：15231332
> 
> 赞同：0
> 
> 时间：2013-03-05T18:27:55.440
> 
> 标签：c#, access-token, http-status-code-403, yahoo-api

我设法获得了请求令牌，但我无法获得访问令牌。我获取访问令牌的方式是否正确。有什么建议么 ？

```
 //Step : 1 (Returns Request Token)
string consumer_key = "dj0yJmk9bl..........lRReU9UWXkmcz1jb25zdW1lcnNlY3JldCZ4PWIy";
string username = "some_user";
string pass = "some_pass";
string url = "https://login.yahoo.com/WSLogin/V1/get_auth_token?&login="+username+"&passwd="+pass+"&oauth_consumer_key="+consumer_key;

HttpWebRequest request_a = (HttpWebRequest)WebRequest.Create(url);
Stream objStream;
objStream = request_a.GetResponse().GetResponseStream();
StreamReader objReader = new StreamReader(objStream);
string resp = objReader.ReadLine(); //Since first line has the response - "Returns RequestToken=jUO3Qolu3AYGU1KtB9vUbxlnzfIiFRLP.."
string requesttoken = resp.Replace("RequestToken=", "");

//Step : 2 (Returns OAuth access token)
string auth_ = "&Authorization=OAuth";
string realm = "&realm=yahooapis.com";
string oauth_consumer_key = "&oauth_consumer_key=dj0yJmk9....bzlNVEV4TlRReU9UWXkmcz1jb25zdW1lcnNlY3JldCZ4PWIy"; //This is Consumer Key
string oauth_nonce = "&oauth_nonce=24829.2331";
string oauth_signature_method = "&oauth_signature_method=PLAINTEXT";
string tstamp = "&oauth_timestamp=1219450170";
string oauth_token = "&oauth_token="+ requesttoken; //
string oauth_version = "&oauth_version=1.0";
string oauth_signat = "&oauth_signature=cbbe4eacb0c171ee9a78c070d2095a86dcc2b6ba"; // This is the Consumer Secret
string new_url = "https://api.login.yahoo.com/oauth/v2/get_token?";
string command = new_url + auth_ + realm + oauth_consumer_key + oauth_nonce + oauth_signature_method + tstamp + oauth_token + oauth_version + oauth_signat;

HttpWebRequest request_b = (HttpWebRequest)WebRequest.Create(command);
Stream objStream_b;
objStream_b = request_a.GetResponse().GetResponseStream();
StreamReader objReader_b = new StreamReader(objStream); 
```

我尝试在 webbrowser 中测试命令变量，我得到以下

> 抱歉，禁止访问：您无权访问此服务器上的此 URL。

请检查 URL 的拼写和大小写是否正确。如果您在 Yahoo! 上查找目的地时遇到问题，请尝试访问 Yahoo! 主页或浏览 Yahoo! 的在线服务列表。此外，如果您尝试在下面搜索，您可能会找到您要查找的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:30:38.027

oauth_signat 的开头没有`&`...我不知道 yahoo api 但应该`string auth_ = "&Authorization: OAuth";`是这个`string auth_ = "&Authorization=OAuth";`

# jquery - jQuery - even.keyCode 在 Firefox 中没有被正确识别？

> ID：15231333
> 
> 赞同：0
> 
> 时间：2013-03-05T18:27:56.203
> 
> 标签：jquery, events, firefox, live, keycode

下面的代码在 IE 和 Chrome（最新版本）中正常工作

```
$('#searchBox').keyup(function () {
    var searchTxt = $(this).val();

    // if item contains searchTxt,
    if ($('.item:contains("' + searchTxt + '")')) {
        // hide the items that do NOT contain searchTxt
        $('.item').not(':contains(' + searchTxt + ')').hide();
    };

    // capture backspace
    if (event.keyCode == 8) {
        // show item that contains searchTxt
        $('.item:contains(' + searchTxt + ')').show();
    };

    // if search box is empty, 
    if ($('#searchBox').val() == "") {
        // show all items
        $('.item').show();
    };
}); 
```

上面的代码执行“区分大小写的实时搜索”并且无法执行在 Firefox 中捕获退格键的代码块：

```
// capture backspace
if (event.keyCode == 8) {
    // show item that contains searchTxt
    $('.item:contains(' + searchTxt + ')').show();
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:31:41.970

将`event`论据放入：

`$('#searchBox').keyup(function (event) { .. })`;

而不是`keyCode`user `event.which`。

阅读更多关于***[event.which](http://api.jquery.com/event.which/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:30:24.500

您需要声明事件对象。

```
$('#searchBox').keyup(function (event) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:34:01.203

在函数中传递事件，如下所示：

```
$('#searchBox').keyup(function (event) {

}); 
```

# html - 我怎样才能得到我的html5 在 IE 9 中正常工作？

> ID：15231338
> 
> 赞同：0
> 
> 时间：2013-03-05T18:28:11.930
> 
> 标签：html, internet-explorer, nav

想知道我的脚本是错误的还是我在 CSS 中遗漏了一些东西。除了我的 IE 9 浏览器（版本 9.0.8112.16421）之外，它在所有方面都运行良好。我认为这是把它搞砸的盒子方向，但我认为 html5shiv 会有所帮助吗？

这是我的头部 HTML：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8"> 
<link rel="apple-touch-icon" href="/apple-touch-icon.png"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>US Fire Registry</title>
<!--update based on html5-->
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<meta name="viewport" content="width=device-width, maximum-scale=1.0"/>
<meta name="description" content="Fire Registry" />    
<meta content="fire registry volunteer firefighters" />
<link REL="SHORTCUT ICON" HREF="/favicon.ico"> 
<link href="http://www.usfireregistry.com/css01.css" rel="stylesheet" type="text/css" />
</head>

Html for nav:

     <nav>

        <a href="index.html" id="selected">Home </a>
        <a href="registry.html">Firefighter Registry </a>
        <a href="agency.html">Agency Honors </a>
        <a href="auxilary.html">Auxilary Honors </a>
        <a href="training.html">Training Project </a>
        <a href="showcase.html">Equipment Showcase </a>
        <a href="store.html">Store </a>
      </nav>

And CSS:

nav {
    background-color: #992017;
    /* Safari, Opera, and Chrome */
    display: -webkit-box;
    -webkit-box-orient:horizontal;
    /* Firefox */
    display:-moz-box;
    -moz-box-orient:horizontal;
    /* W3C */
    display:box;
    box-orient:horizontal;
        -webkit-border-radius:0px;
    /*IE*/
    -ms-box-orient:horizontal;
    width: 975px;
    margin: 0 auto;
    position: relative;
    top: 40px;
    opacity: 1;
    z-index: 60;
}

nav a {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    color: #FFF;
    display: block;
    padding: 10px;
    -moz-box-flex:1.0; /* Firefox */
    -webkit-box-flex:1.0; /* Safari and Chrome */
    -ms-box-flex:1.0;
    box-flex:1.0;
    text-align: center;
    -webkit-transition:all .4s linear;
    -o-transition:all .4s linear;
    -moz-transition:all .4s linear;
    transition:all .4s linear;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:48:21.667

“Shiv”脚本将允许旧版本的 IE (7,8) 像现代浏览器一样对待 HTML 5 元素。此脚本*不允许*CSS 3 属性在不支持它们的浏览器中生效。

`display: box;`在不支持它的浏览器（IE 9）中使用新值是问题所在。前缀适用于 IE 10而`-ms`不是 9 .. 我还建议等到**CSS 灵活框布局**模块更接近推荐阶段 - 它目前正在修订中，随着它接近完成，情况肯定会发生变化。

# .htaccess - 如何删除根目录后的第一个斜杠

> ID：15231340
> 
> 赞同：0
> 
> 时间：2013-03-05T18:28:17.020
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

当我访问

```
myexamplesite.com?var/othervar 
```

我被重定向到

```
myexamplesite.com/?var/othervar 
```

但我希望 URL 保持这样：myexamplesite.com?var/othervar

是否可以使用 mod_rewrite 删除根 url 之后的第一个 / ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:11:07.803

不，使用 htaccess 和其他一切都是不可能的。

这取决于您使用的浏览器，这就是自动添加根斜杠的原因。

# sql - to_timestamp -- 以 04 或 05 结束

> ID：15231342
> 
> 赞同：1
> 
> 时间：2013-03-05T18:28:22.007
> 
> 标签：sql, postgresql

我有一个 pg 数据库，其中包含以下数据：

```
(yyyymmdd) hour (hh) minute (mm) and second (ss) 
```

都在单独的字符串类型列中。

我使用了这样的函数来获取时间戳类型..除了结果是“to_timestamp with time zone”

```
to_timestamp(txdt||hh||mm||ss, 'YYYYDDMMHH24MISS') 
```

它们似乎都是正确的，但我不确定每个时间戳末尾的 04 和 05。像这样：

“2011-03-04 23:59:50-05” “2011-04-04 00:00:18-04”

04 和 05 是什么意思？我假设时区，但是，我不确定这两个是否是相反的顺序，或者它们的顺序是否会更近的日期改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:34:01.923

是的，它们是该日期的时区，具体取决于[夏令](http://www.worldtimezone.com/daylight.html)时时区的生效时间。

有一个没有时区的时间戳：

```
to_timestamp(txdt||hh||mm||ss, 'YYYYDDMMHH24MISS')::timestamp without time zone 
```

# php - SQL 语句未在 PHP 中删除

> ID：15231343
> 
> 赞同：0
> 
> 时间：2013-03-05T18:28:34.413
> 
> 标签：php, sql, postgresql

```
echo $_POST['IDnum'];
$result = pg_prepare($conn, "city_delete",
    "DELETE FROM lab5.city WHERE lab5.city.id = $1");
$result = pg_execute($conn, "city_delete", array($_POST['IDnum'])); 
```

这将显示要删除的行的正确 ID 号，并将在 PSQL 中将其删除，但在 PHP 中实现时不会删除？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:21:12.777

尝试这个：

```
$result = pg_prepare($conn, "city_delete",
'DELETE FROM lab5.city WHERE lab5.city.id = $1'); 
```

您使用的双引号使 $1 成为 PHP 变量而不是字符串。

在此处查看 pg_prepare 的示例：http: [//php.net/manual/en/function.pg-prepare.php](http://php.net/manual/en/function.pg-prepare.php)

# c# - HttpCookie to Cookie - 如何处理缺少的域？

> ID：15231350
> 
> 赞同：1
> 
> 时间：2013-03-05T18:28:45.077
> 
> 标签：c#, asp.net, .net, cookies, httpwebrequest

我正在 ASP .NET 中创建一个代理页面（我需要绕过跨站点脚本限制）。我需要处理程序根据传入请求向此页面`Page_Load`发送一个。`HttpWebRequest`

```
var request = (HttpWebRequest)WebRequest.Create(urlToProxy);
request.Method = "GET";
request.GetResponse(); 
```

但是，我遇到了一些身份验证问题（是的，我设置`request.Credentials`正确，只是这里没有显示），所以我想将来自传入请求（命中我的代理页面）的 cookie 转发到这个传出请求。你会认为这很简单：

```
request.CookieContiner = Request.Cookies; 
```

但是，这不起作用。传出`HttpWebRequest`使用`HttpCookie`s，传入`HttpRequest`使用`Cookie`s。这些类没有继承或接口关系（确实一个在`System.Net`，另一个在`System.Web`。）

我试图将 s 复制`HttpCookie`到`Cookie`s 中，然后将它们添加到 s 中`CookieContainer`，但我也无法让它工作。

```
 public static IEnumerable<Cookie> ToCookies(this HttpCookie cookie)
 {
    var cookies = new List<Cookie>(cookie.Values.Count);
    foreach (String key in cookie.Values)
    {
        cookies.Add(new Cookie()
        {
            Domain = cookie.Domain,
            Expires = cookie.Expires,
            HttpOnly = cookie.HttpOnly,
            Name = cookie.Name,
            Path = cookie.Path,
            Secure = cookie.Secure,
            Value = cookie.Values[key]
        });                
     }
     return cookies;
 }

 ...

 var cookieContainer = new CookieContainer();
 foreach(var httpCookie in Request.Cookies)
 {
     foreach(var cookie in httpCookie.ToCookies())
     {
         cookieContainer.Add(cookie); //Exception thrown here
     }
 } 
```

抛出的异常表示`Cookie`无法添加具有`null`“域”的 a。显然，一些`HttpCookie`s 具有`null`“域”属性。

`HttpCookie`有没有人对解决这个问题的最佳方法有任何建议`Cookie`？我希望我使用的任何解决方案尽可能通用（因此不涉及将已知域硬编码到新`Cookie`的 s 中。）

更好的是，有没有一种更简单的方法可以简单地使用`HttpRequest`类而不是`HttpWebRequest`类来做我想做的事情？

# ios - 重绘渐变的快速方法？

> ID：15231355
> 
> 赞同：1
> 
> 时间：2013-03-05T18:29:07.237
> 
> 标签：ios, zooming, calayer, gradient, drawrect

我需要以编程方式绘制（有点）复杂的渐变。这是我的参数。

```
#define SHADOW_OPACITY 0.35

const size_t num_locations = 4;
const CGFloat locations[num_locations] = { 0, 0.12, 0.42, 1.0 };
const CGFloat components[num_locations * 2] = { 0.0, 1.0 * SHADOW_OPACITY,
                                                0.0, 1.0 * SHADOW_OPACITY,
                                                0.0, 0.73 * SHADOW_OPACITY,
                                                0.0, 0.0 }; 
```

三个不透明的环和一个虚线环。一切正常。

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];

    CGContextRef context = UIGraphicsGetCurrentContext();
    [self drawGradientInContext:context];

    CGContextSetLineWidth(context, CIRCLE_STROKE_WIDTH);

    CGContextBeginPath(context);

        CGFloat dashLength = DASH_LENGTH(self.circleRadius);
        CGFloat dashArray[] = { dashLength, dashLength };
        CGContextSetLineDash(context, 0, dashArray, 2);
        CGContextAddArc(context, CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds), self.circleRadius, 0, 2 * M_PI, YES);

    CGContextClosePath(context);

    CGContextSetRGBStrokeColor(context, 1.0, 1.0, 1.0, 1.0);
    CGContextDrawPath(context, kCGPathStroke);
}

- (void)drawGradientInContext:(CGContextRef)context
{
    self.layer.shouldRasterize = YES;
    self.layer.rasterizationScale = [UIScreen mainScreen].scale;

    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceGray();
    CGGradientRef gradient = CGGradientCreateWithColorComponents(colorspace, components, locations, num_locations);

    CGPoint gradientCenter = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));
    CGContextDrawRadialGradient(context,
                                gradient,
                                gradientCenter,
                                self.circleRadius - 1,
                                gradientCenter,
                                self.circleRadius + SHADOW_WIDTH,
                                kCGGradientDrawsAfterEndLocation);

    CGColorSpaceRelease(colorspace);
    CGGradientRelease(gradient);
} 
```

好吧，我需要应用缩放。

```
- (void)zoom:(UIPinchGestureRecognizer *)sender
{
    effectiveScale = beginGestureScale * sender.scale;
    self.circleRadius = effectiveScale * BASE_RADIUS;
}

- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
    if ([gestureRecognizer isKindOfClass:[UIPinchGestureRecognizer class]]) {
        beginGestureScale = effectiveScale ? effectiveScale : 1.0;
    }

    return YES;
} 
```

好吧，既然事情搞砸了：它会出故障！

![在此处输入图像描述](../Images/9526577557f87dc30abe4ab4391c36fb.png)

我可以在那里做什么？

# installation - WIX 使用 x86 安装程序安装 x64 组件？

> ID：15231356
> 
> 赞同：3
> 
> 时间：2013-03-05T18:29:08.473
> 
> 标签：installation, wix, registry, windows-installer

我有一个用于 x86 应用程序的 WiX 安装程序。但是，它需要为单个组件写入注册表的 x64 区域。为此，我有以下内容

```
<Component Id=foo"..." Win64="yes">
  <Condition>VersionNT64</Condition>
  <RegistryValue
    Root="HKLM" Key="SOFTWARE\Microsoft\...."
    ....
</Component>

.....

<Feature Id='MyFeature' Level='0'> 
    <ComponentRef Id='foo' /> 
<Condition Level='1'>VersionNT64</Condition> 
</Feature> 
```

当我尝试在 x64 系统上运行安装程序时，这工作正常。当我在 x86 系统上运行时（即使由于这种情况我不希望安装此组件），我收到以下错误：

```
SchedSecureObjectsRollback_x64 3: SchedSecureObjectsRollback 4: C:\Windows\Installer\MSIA98C.tmp 
MSI (c) (84:80) [20:31:05:701]: Font created.  Charset: Req=0, Ret=0, Font: Req=MS Shell Dlg, Ret=MS Shell Dlg

Error 1723\. There is a problem with this Windows Installer package. A DLL required for this install to complete could not be run. Contact your support personnel or package vendor. ............ 
```

如果我取出 Win64 属性，一切正常。但是，我确实需要 x64 系统的 Win64 属性。

任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T22:02:51.587

Windows 安装程序不支持创建写入 64 位位置的 x86 包。您必须制作一个 64 位软件包。这是一个古老的限制，每个人都会对此感到不安。

相反，您需要为 64 位内容创建一个 64 位 MSI 包，然后您可以将其放入`Bundle`一个 32 位 MSI 包中。该`MsiPackage`元素可以有一个`InstallCondition`确定何时安装 64 位软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:45:24.737

从. `Condition`_ `Feature`您已经在`Component`.

```
<Feature Id='MyFeature' Level='1'>
    <ComponentRef Id='foo' />
</Feature> 
```

老实说，我不确定这是否会解决问题，但在我自己的 Wix 设置中，我的代码几乎相同，但我将`Condition`唯一的代码放在 中`Component`，而不是放在 中`Feature`，并且它按我的预期工作：安装该组件& 仅在 x64 上写入注册表项，而在 x86 或 x64 上安装其他所有内容。

# python - 将 Python Flask 应用程序拆分为多个文件

> ID：15231359
> 
> 赞同：102
> 
> 时间：2013-03-05T18:29:13.713
> 
> 标签：python, web-services, file-organization, flask

我无法理解如何将烧瓶应用程序拆分为多个文件。

我正在创建一个 Web 服务，我想将 api 拆分为不同的文件（AccountAPI.py、UploadAPI.py、...），这样我就没有一个巨大的 python 文件。

我读过您可以使用蓝图来做到这一点，但我不完全确定这条路线是否适合我。

最终，我想运行一个 Main python 文件并包含其他文件，以便在运行时将它们视为一个大文件。

例如，如果我有 Main.py 和 AccountAPI.py 我希望能够做到这一点：

主要.py：

```
from flask import Flask
import AccountAPI

app = Flask(__name__)

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

帐户API.py：

```
@app.route("/account")
def accountList():
    return "list of accounts" 
```

我知道这个例子显然行不通，但是有可能做这样的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2013-03-05T18:43:06.627

是的，蓝图是正确的方法。您正在尝试做的事情可以这样实现：

主文件

```
from flask import Flask
from AccountAPI import account_api

app = Flask(__name__)

app.register_blueprint(account_api)

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == "__main__":
    app.run() 
```

AccountAPI.py

```
from flask import Blueprint

account_api = Blueprint('account_api', __name__)

@account_api.route("/account")
def accountList():
    return "list of accounts" 
```

如果这是一个选项，您可能会考虑为不同的 API/蓝图使用不同的 URL 前缀，以便清楚地分开它们。这可以通过对上述`register_blueprint`调用稍作修改来完成：

```
app.register_blueprint(account_api, url_prefix='/accounts') 
```

如需更多文档，您还可以查看[官方文档](http://flask.pocoo.org/docs/blueprints/)。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-04-17T15:57:25.527

使用您可以在目录`Blueprint`中添加您的路线。`routes`

### 结构

```
app.py
routes
    __init__.py
    index.py
    users.py 
```

### __init__.py

```
from flask import Blueprint
routes = Blueprint('routes', __name__)

from .index import *
from .users import * 
```

### 索引.py

```
from flask import render_template
from . import routes

@routes.route('/')
def index():
    return render_template('index.html') 
```

### 用户.py

```
from flask import render_template
from . import routes

@routes.route('/users')
def users():
    return render_template('users.html') 
```

### 应用程序.py

```
from routes import *
app.register_blueprint(routes) 
```

* * *

如果你想添加一个新的路由文件，比如`accounts.py`，你只需要`accounts.py`在`routes`目录中创建文件，就像`index.py`and一样`users.py`，然后在`routes.__init__.py`文件中导入

```
from .accounts import * 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-16T01:24:54.927

如果您正在使用蓝图并希望在您正在使用的模板中路由/重定向到蓝图的 url，则需要使用正确的 url_for 语句。

在您的情况下，如果您想打开蓝图的 url 帐户，您必须在**模板**中这样声明：

```
href="{{ url_for('account_api.account') }}" 
```

对于主**应用程序**，它看起来像这样：

```
redirect(url_for('account_api.account')) 
```

否则 werkzeug 库会抛出错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-17T23:54:32.337

另一种方法是[延迟加载](http://flask.pocoo.org/docs/patterns/lazyloading/)，您可以根据需要显式附加视图功能。

# c# - 在 Web API 中从存储库级别返回错误的好方法

> ID：15231363
> 
> 赞同：2
> 
> 时间：2013-03-05T18:29:29.757
> 
> 标签：c#, web-services, exception-handling, asp.net-web-api

我试图弄清楚如何从我的存储库将异常和错误返回到控制器级别，并能够在客户端调用我的 Web 服务时将自定义错误返回给客户端。

我的`BookRepository`课堂上有以下示例：

```
public BookViewModel GetBookById(Guid id)
{
      var Book = _Books.Collection.Find(Query.EQ("_id", id)).Single();
      return Book;
} 
```

显然我的函数会比这复杂一点，但是如果我在一个不存在的 id 上调用这个方法，我会得到一个异常。如何让我的异常和自定义错误冒泡到我的控制器，然后在客户端响应中很好地显示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:00:03.360

就异常处理而言，即使是 Web 服务也应该遵循与任何其他代码相同的模式。这些最佳实践包括不使用自定义异常，除非调用者要根据异常类型进行编程选择。所以，

```
public BookViewModel GetBookById(Guid id)
{
    try
    {
      var Book = _Books.Collection.Find(Query.EQ("_id", id)).Single();
      return Book;
    }
    catch (SpecificExceptionType1 ex)
    {
        Log.Write(ex);
        throw new Exception("Some nicer message for the users to read", ex);
    }
    catch (SpecificExceptionType2 ex)
    {
        Log.Write(ex);
        throw new Exception("Some nicer message for the users to read", ex);
    }
    catch (Exception ex)
    {
        Log.Write(ex);
        throw;  // No new exception since we have no clue what went wrong
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:52:00.333

what edmastermind29 mentioned is one common way to do it. i would usually the same way.

but sometimes developers like to catch the exception before the controller and return a result message based on enumerated value for example , so the controller would have no try catch blocks for that call, it will only need to check the status message.

you can use **out** parameter to check status and display messages for users accordingly.

this is how ASP.NET Membership provider is implemented. check the method create user in Membership provider for example:

[http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.createuser(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.createuser(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:31:10.127

放置`try-catch`可能在特定情况下失败的方法、LINQ 查询等（空值、空值、无效值等）。从那里，您可以捕获异常，并根据您要查找的内容抛出自定义异常。见下文。

```
public BookViewModel GetBookById(Guid id)
{
   try
   {
      var Book = _Books.Collection.Find(Query.EQ("_id", id)).Single();
      return Book;
   }
   catch (Exception e)
   {
      Log.Write(e)
      status = "Some Custom Message";
   }
   catch (DoesNotExistException dne)
   {
      Log.Write(dne)
      status = "Some Custom Message about DNE";
   }
} 
```

# java - Java- 使用 AWT 添加单选按钮？

> ID：15231364
> 
> 赞同：2
> 
> 时间：2013-03-05T18:29:30.283
> 
> 标签：java, applet, radio-button, awt

该程序有 2 个单选按钮。1：用于圆形，2：用于输出正方形。

该程序基本上设计为基于单选按钮组输出圆形或方形。

我的问题是我不知道如何在按钮上实现动作侦听器以输出形状。当我调用方法 fm 时，初始化单选按钮时出现错误。显然我认为我需要一个主要的方法。

*请记住，这是 java AWT。*

**如果您希望我添加更多详细信息或澄清，请发表评论。**

```
 import java.awt.*;
    import java.awt.event.*;
    import java.applet.*;
    import java.applet.Applet;

    public class RadioButton extends Applet
implements ActionListener
    {
        int choice;

        Frame fm = new Frame ("RadioButton Group");
        Label la = new Label ("What shape do you want to draw?:");
        fm.setLayout (new GridLayout (0, 1));
        CheckboxGroup cg1 = new CheckboxGroup ();
        fm.add (la);

        fm.add (new Checkbox ("CIRCLE", cg1, true));
        fm.add (new Checkbox ("SQUARE", cg1, true));

        fm.setSize (250, 200);
        fm.setVisible (true);
        fm.addWindowListener (new WindowAdapter ()

        {

            public void paint (Graphics g)  // How can you 'update the drawing' or repaint it?
            {
                switch (choice) // Maybe for colors if all else fails you can add a switch 'within' a switch. Inefficient-yes but helps.
                {
                    case 1:
                        if (choice == 1)
                            g.fillOval (30, 40, 20, 20);

                    case 2:
                        if (choice == 2)
                            g.fillRect (20, 40, 20, 20);
                        break;
                }
            }
            public void actionPerformed (ActionEvent evt)
            {
                if (evt.getSource () == "CIRCLE")
                    choice = 1;
                else
                    choice = 2;
            }
            public void windowClosing (WindowEvent we)
            {
                System.exit (0);
            }
        }

        );
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:09:10.630

您可以使用项目侦听器。这是一个完整的工作示例：

```
import java.awt.*;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

import javax.swing.JFrame;

public class Project1 extends JFrame implements ItemListener {

    CheckboxGroup cg1 = new CheckboxGroup ();       //create group
    Checkbox c1 = new Checkbox("Circle",cg1,true);  //circle button
    Checkbox c2 = new Checkbox("Square",cg1,true);  //square button

    public Project1() {
        setLayout(new FlowLayout());        

        //add listeners
        c1.addItemListener(this);
        c2.addItemListener(this);

        //add to frame
        add(c1);
        add(c2);

        //set visible
        this.setVisible(true);
    }

    @Override
    public void itemStateChanged(ItemEvent e) 
    {
        //c1 = circle
        //c2 = square
        if(e.getSource() == c1)
            System.out.println("Circle");
        else
            System.out.println("Square");

    }

    public static void main(String[] args) {
        Project1 p = new Project1();
    }
} 
```

将其保存为完整的 .java 并运行它。应该给你一个体面的例子来说明如何完成你所寻找的。

# javascript - 服务器总是报告检查为真？

> ID：15231366
> 
> 赞同：0
> 
> 时间：2013-03-05T18:29:34.913
> 
> 标签：javascript, ajax, jquery

我有一些 JS 将选中的回调添加到 div 中的复选框并在这种情况下执行 ajax 调用：

```
$("#filter").on('change', '[type=checkbox]', function () {

    $.ajax({
        type: "POST",
        url: "CalendarServices.aspx/UpdateFilter",
        data: 'id=' + this.value + '&checked=' + this.checked,
        success: function (data) {
            $('#calendar').fullCalendar('refetchResources');
        },
        error: function () {}
    }); 
```

但是，当我检查 ajax 调用的 POST 值时，'checked' 总是正确的。id 是正确的，但无论我切换多少，检查总是正确的。

有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:34:04.107

尝试使用

```
$(this).is(':checked') 
```

或者

```
$(this).prop('checked') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:39:25.813

您是否尝试移出 this.checked 以查看 ajax 是否不会影响它。只需使用警报测试 onchange，它就可以工作。

```
$("#filter").on('change', '[type=checkbox]', function () {
    // dirty but works...
    var datas = 'id=' + this.value + '&checked=' + this.checked;
    console.log(this.checked);

    $.ajax({
        type: "POST",
        url: "CalendarServices.aspx/UpdateFilter",
        data: datas,
        success: function (data) {
            $('#calendar').fullCalendar('refetchResources');
        },
        error: function () {}
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:40:40.270

> 但是，当我检查 ajax 调用的 POST 值时，'checked' 总是正确的。id 是正确的，但无论我切换多少，检查总是正确的。

我有一种预感，这在您的 javascript 中不是问题。但也许是您的服务器获取了这些未正确读取的值。

假设您有 2 个请求：

```
/foo/bar?checked=true
/foo/bar?checked=false 
```

现在，如果您的服务器编码如下伪代码：

```
if (params.checked) {
  doStuffWhenChecked();
} else {
  doStuffWhenNotChecked();
} 
```

那你就有问题了。这是因为`params.checked`将是一个字符串，它是 string`"true"`或 string `"false"`。在大多数语言`"false"`中，它是一个真值，任何非空字符串也是如此。

你需要更像这样的东西，它寻找字符串`"true"`来做检查的事情。

```
if (params.checked == "true") {
  doStuffWhenChecked();
} else {
  doStuffWhenNotChecked();
} 
```

# c - C 代码迭代器按 sizeof(int) 而不是按字节递增

> ID：15231370
> 
> 赞同：0
> 
> 时间：2013-03-05T18:29:57.613
> 
> 标签：c, strong-typing, type-safety

有人可以解释一下下面的 C 代码是做什么的吗？特别是第一行和迭代行？

```
int * p = &my_numbers[0];

int i;
int j = 0;

for (i = 0; i < 6; i++)
{
  j += *(p + (i));
} 
```

编译器（GCC）是否知道当我增加迭代器时，我的意思是 sizeof(int) / 4 字节而不是 1 字节？每个编译器都一样吗？最初我使用的是：

```
 j += *(p + (i * sizeof(int))); 
```

但这给出了错误的答案，但是：

```
 j += *(p + (i)); 
```

确实给出了正确答案。

如果我只想增加一个字节，我必须写什么？（不知道我为什么要这样做，我想也许该语言的强类型特性允许我使用 char 来告诉编译器？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:38:31.107

既然你用过

```
int * p 
```

编译器知道它需要找到 4 个字节之外的下一个地址。如果

```
char * p 
```

而是使用，每次只会添加1个字节的距离。

初始代码

```
j += *(p + (i * sizeof(int))); 
```

将指针移过您希望它指向的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:33:16.713

是的。在指针运算中，指针会根据所指向类型的大小进行调整。

如果您想要单字节指针算术，则必须使用`char*`和强制转换。但是，如果你真的在处理`int`s，你可能会遇到对齐问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:49:28.583

Pointer arithmetic takes the size of the pointed-to type into account; given a pointer `T *p`, the expression `*(p + i)` computes the address of the `i`'th *element* of type `T` following `p` and dereferences it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T18:33:03.107

因为 p 是指向`int`类型的指针，所以它的算术最适合`int`类型。如果指针指向，`char`那么它将增加`1 byte`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T18:42:04.783

> 因为 p 是指向 int 类型的指针，所以它的算术最适合 int 类型。如果 >pointer 指向 char 或 void 那么它将增加 1 byte 。

void 指针不能直接递增。你必须将它转换为 char、byte 等来增加它。

# html - 在不使用像素值的情况下正确调整 div 大小

> ID：15231371
> 
> 赞同：0
> 
> 时间：2013-03-05T18:29:57.650
> 
> 标签：html, css

我的情况如下。我有一个带有两个子 div 的 div。我希望“事件” div 的宽度和高度为 300 像素。第一个要求是当 'content' 和 'bar' 元素使用 100% 的父级宽度时，保持 'event' div 的大小。其次，就目前而言，“内容”元素的边框不可见。是否可以在不使用硬编码值的情况下将所有内容都放入其中并在大多数现代浏览器（FF、Chrome、Opera、IE7+）中正确显示？

这就是我想要实现的（注意左边的红色条，它占据 100% 的高度并且不会与事件元素周围的灰色边框发生冲突）：

![在此处输入图像描述](../Images/7d195496d4429a9e8e49cc8cc34cbdf3.png)

这就是我所拥有的。网页：

![在此处输入图像描述](../Images/b1f5bf130e529d1a44c5d9801be608be.png)

```
<div id="wrapper">
    <div id="scheduler">
        <div class="event" style="top: 30px; height: 300px; width: 300px">
            <div class="bar"></div>
            <div class="content">
                <div class="inner-content">Some text</div>
            </div>
        </div>
    </div>
</div> 
```

，CSS：

```
#wrapper {
    width: 600px;
    height: 600px;
}
#scheduler {
    background-color: #E1FFFE;
    display: block;
    height: 100%;
    width: 100%;
    padding: 0 10px;
    position: relative;
}
#scheduler .event {
    display: block;
    float: left;
    position: relative;
    width:100%;
    overflow:hidden;
}
#scheduler .event .bar {
    background-color: red;
    display: inline;
    float: left;
    height: 100%;
    position: relative;
    width: 5px;
}
#scheduler .event .content {
    background-color: white;
    border: 1px solid #CCCCCC;
    border-left: none;
    display: inline;
    float: left;
    height: 100%;
    position: absolute;
    width: 100%;
} 
```

和一个可运行的演示：

[http://jsfiddle.net/6nTvD/1/](http://jsfiddle.net/6nTvD/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:46:30.260

尝试这个。取出`bar`div，然后把`.content`css改成：

```
#scheduler .event .content {
    background-color: white;
    border: 1px solid #CCCCCC;
    border-left: 5px solid red; // replaces the bar
    display: inline;
    float: left;
    height: 99%; // a bit of a hack to fit the border in
    position: relative;
    width: 98%; // hack
} 
```

[http://jsfiddle.net/Dp3yz/](http://jsfiddle.net/Dp3yz/)

编辑：`.bar`仍然存在的代码：

```
#scheduler .event .bar {
    background-color: red;
    display: inline;
    float: left;
    height: 99.9%; /* Small offset at bottom */
    position: relative;
    width: 5px;
}
#scheduler .event .content {
    background-color: white;

    /* revised border */
    border-top: 1px solid #CCCCCC;
    border-right: 1px solid #CCCCCC;
    border-bottom: 1px solid #CCCCCC;

    display: inline;
    float: left;
    height: 99%;
    position: absolute;
    width: 98%;
} 
```

新版本：http: [//jsfiddle.net/JJrC9/1/](http://jsfiddle.net/JJrC9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:43:05.650

*但是，我认为我并不完全理解您的困境，*我可以窥探到您想要的结果与您当前的工作之间的唯一区别是边界的存在-`overflow:hidden;`打开`#scheduler .event`以`overflow:visible;`产生在我看来似乎达到了想要的影响。

# java - 类似于二进制数据的扫描仪

> ID：15231372
> 
> 赞同：2
> 
> 时间：2013-03-05T18:30:00.187
> 
> 标签：java

有没有类似二进制数据扫描仪的东西？例如，我想使用像 "\r\n" 这样的分隔符，并在每次调用某个方法时获取字节 []。你能给我提供可以创造这样奇迹的课程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:07:26.393

考虑使用[`DataInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)and [`DataOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html)：

```
File file = new File("binaryFile.dat");
FileOutputStream fos = new FileOutputStream(file);
BufferedOutputStream bos = new BufferedOutputStream(fos);
DataOutputStream dos = new DataOutputStream(bos);

byte[] array1 = ...
byte[] array2 = ...
byte[] array3 = ...

dos.writeInt(array1.length);
for(byte b : array1) dos.wrtieByte(b);

dos.writeInt(array2.length);
for(byte b : array2) dos.wrtieByte(b);

dos.writeInt(array3.length);
for(byte b : array3) dos.wrtieByte(b); 
```

并像这样阅读：

```
File file = new File("binaryFile.dat");
FileInputStream fis = new FileInputStream(file);
BufferedInputStream bis = new BufferedInputStream(fis);
DataInputStream dis = new DataInputStream(bis);

byte[] array1 = new byte[dis.readInt()];
for(int i = 0; i < array1.length; i++) array1[i] = dis.readByte();

byte[] array2 = new byte[dis.readInt()];
for(int i = 0; i < array2.length; i++) array2[i] = dis.readByte();

byte[] array3 = new byte[dis.readInt()];
for(int i = 0; i < array3.length; i++) array3[i] = dis.readByte(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:32:13.397

Jakarta commons 有一个可以使用的库。只需从[jakarta](http://jakarta.apache.org/)下载 .jar 并下载他们的 .jar 并通过添加外部 jar 将其添加到您的构建路径中。`IOUtils.toByteArray(InputStream input)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:34:56.450

您可以使用[java.io.InputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html)类：

```
InputStream is = new FileInputStream("your_file");
byte[] b = new byte[is.available()];  //reads how much bytes are readable from file
is.read(b);//reads the file and save all read bytes into b 
```

希望这可以帮助

# jquery - ajax 请求中的 msg 插件

> ID：15231373
> 
> 赞同：1
> 
> 时间：2013-03-05T18:30:02.903
> 
> 标签：jquery

我目前正在查看这个[插件](http://dreamerslab.com/demos/jquery-blockui-alternative-with-jquery-msg-plugin)，因为 blockui 似乎对我不起作用。我在用：

```
beforeSend: function () {
    $.msg({
    autoUnblock: false
    });
} 
```

并希望在成功、错误等情况下“解锁”它。

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:20:30.983

是的，有可能。

我刚刚测试过，它的工作原理是这样的：

**HTML**

```
<!DOCTYPE html>
<html>
<head>
  <link media="screen" href="https://raw.github.com/dreamerslab/jquery.msg/master/jquery.msg.css" rel="stylesheet" type="text/css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script src="https://raw.github.com/dreamerslab/jquery.msg/master/jquery.center.min.js"></script>

  <script src="https://raw.github.com/dreamerslab/jquery.msg/master/jquery.msg.min.js"></script>

<meta charset=utf-8 />
<title>Test Page</title>
</head>
<body>
  <div id="test"></div>
</body>
</html> 
```

**jQuery**

```
jQuery(document).ready(function($){
$.ajax({
  url: "http://www.google.com",
  beforeSend: function ( xhr ) {
      $("#test").html("before send");
    $.msg({
    autoUnblock: false
    });
  },
  success:function(){
    $("#test").html("success");
      $.msg('unblock'); //this will remove the msg box
  },
  error:function(){
     $("#test").html("error");
    $.msg('unblock'); //this will remove the msg box
  }
});
}); 
```

这是小提琴：http: [//jsfiddle.net/qqjhB/1/](http://jsfiddle.net/qqjhB/1/)

在此示例代码中，您将首先进入 `beforesend`块，因此它会向您显示味精框，然后它将在`error`块中结束，然后它将删除该味精框。

# windows - Windows 错误报告 - 在加载依赖于服务的 windows dll-s 期间报告服务挂起

> ID：15231374
> 
> 赞同：2
> 
> 时间：2013-03-05T18:30:19.197
> 
> 标签：windows, operating-system, freeze, windows-error-reporting

我有一个在 Win7 启动时启动的服务。如果我在启动后启动该服务，我在 Windows 错误报告服务报告的事件日志中找不到任何警告，但如果它在启动期间自动启动，我会得到以下信息：

```
Fault bucket , type 0
Event Name: ServiceHang
Response: Not available
Cab Id: 0

Problem signature:
P1: serviceName
P2: serviceName
P3: 0.0.0.0
P4: 10
P5: 2
P6: 
P7: 
P8: 
P9: 
P10: 

Attached files:

These files may be available here:
Analysis symbol: 
Rechecking for solution: 0
Report Id: 46283ee5-85ba-11e2-9242-001a4d425476
Report Status: 4 
```

查看生成的文件是说：

```
LoadedModule[0]=C:\Program Files (x86)\..\serviceName.exe
LoadedModule[1]=C:\Windows\SYSTEM32\ntdll.dll
LoadedModule[2]=C:\Windows\SYSTEM32\wow64.dll
LoadedModule[3]=C:\Windows\SYSTEM32\wow64win.dll
LoadedModule[4]=C:\Windows\SYSTEM32\wow64cpu.dll 
```

似乎在通过 Windows 加载程序加载服务时，它检测到一些*看起来*像挂起的东西。但是我在启动期间使用性能记录器收集了所描述报告的日志，我可以从中看到以下内容：

![在此处输入图像描述](../Images/f7ad94135c7a3b387f54e2d26f91085c.png)

通过测量加载 .exe（从上图）和加载 WER 报告中未提及的模块（kernel32.dll）之间的距离，看起来不超过 200 毫秒（所有这些都是 microsoft dll-s)。我想知道为什么 WER 将其报告为挂起，以及 II 是否可以对此做些什么。我总是在系统启动时重现，而不是在任何其他情况下。

*说明*服务启动成功。这只是每次启动时烦人的事件查看器报告。

# php - 在 php 中创建多个 html 表时，可以将宽度设置为变量吗？

> ID：15231377
> 
> 赞同：0
> 
> 时间：2013-03-05T18:30:23.173
> 
> 标签：php, html, css

我正在尝试为一个小型网站创建一个管理页面。我的计划是为每个用户创建一个表格，并将相关数据放入单个单元格中。

这是我现在的代码：

```
foreach ($user_data as $key => $element)
{
    echo <<<EOT
<div><table border="1" style="width:100%">
EOT;
        foreach ($element as $subkey => $sub_element)
        {
            echo <<<EOT
<td>$sub_element</td>
EOT;
        }
        echo <<<EOT
</table></div>
EOT; 
```

问题是每个表中的单元格长度不同，因此数据在列标题下排列不整齐（此处未显示）。我想知道是否有办法（使用 CSS？）使用宽度变量让每个单元格具有不同但特定的长度。我想我可以只使用一个计数器来跟踪正在创建的单元格，并为计数器中的每个数字使用不同的宽度（即与数据一起循环的 5 个不同长度的数组）。

我是否以正确的方式接近这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:02:25.947

以下是我想出的解决方案。这是最佳实践吗？有没有更好的办法？

```
<?php
$cell_width = array('20%','10%','10%','10%', '5%', '10%','25%','10%');

foreach ($user_data as $key => $element)
{
    $counter = 0;
    echo <<<EOT
<br /><div><table style="width:100%">
EOT;
    foreach ($element as $subkey => $sub_element)
    {
        echo <<<EOT
<td width=$cell_width[$counter]>$sub_element</td>
EOT;
        $counter++;
    }
    echo <<<EOT
</table></div>
EOT;
}
?> 
```

# intuit-partner-platform - 使用 % 查询时，SalesTermQuery 未经授权

> ID：15231378
> 
> 赞同：0
> 
> 时间：2013-03-05T18:30:23.450
> 
> 标签：intuit-partner-platform

我正在尝试查询名为“1% Net 30”的 SalesTerm。但是，它不断抛出未经授权的异常。

如果我查询没有空格或百分号的销售术语名称“Test”，它工作正常。我尝试使用 Uri 对象转义 % ，但没有成功。

代码如下所示：

```
string name = "1% Net 30";
Intuit.Ipp.Data.Qbo.SalesTermQuery qboQuery = new Intuit.Ipp.Data.Qbo.SalesTermQuery();

qboQuery.Name = name; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:12:21.320

您需要对 % 符号进行 XML 编码，以便在 XML 请求中传递它。

问候，
杰瑞德

# sas - 了解按组处理中的 SAS PDV

> ID：15231380
> 
> 赞同：2
> 
> 时间：2013-03-05T18:30:32.250
> 
> 标签：sas

虽然我已经阅读了很多关于在使用 SAS 数据步骤时概念化程序数据向量的内容，但我仍然不明白 PDV 在分组处理时是如何工作的。例如，如果我有数据集`olddata`

```
 GROUP   VAL
 A       10
 A        5
 B       20 
```

我用 by 语句调用它的 datastep，例如：

```
data newdata;
set olddata;
by group;
...
run; 
```

然后编译器将两个临时变量添加到 PDV：first.group 和 last.group。当您阅读有关 PDV 的任何教程时，它会告诉您在 SET 语句的第一遍中，PDV 将如下所示：

```
_N_    _ERROR_   FIRST.GROUP   LAST.GROUP   GROUP   VAL
  1          0             1            0       A    10 
```

并且 LAST.GROUP 为零，因为观察 1 不是 A 组中的最后一个观察。

这就是我的问题：SAS 怎么知道这不是最后一次观察？

如果 SAS`olddata`逐行处理，PDV 如何知道下一行包含另一个 A 组观察而不是新组？换句话说，SAS 似乎必须使用来自先前或未来行的信息来更新`FIRST`和`LAST`变量，但我不确定如何。`BY`在调用语句时，PDV 如何在一行之间保留值是否有一些技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:53:56.830

SAS 实际上会向前看下一条记录，看看它是否应该设置 LAST.(var) 。不幸的是，我无法找到一篇详细解释这一点的文章。我有点失望地看到，即使像[http://www.wuss.org/proceedings09/09WUSSProceedings/papers/ess/ESS-Li1.pdf](http://www.wuss.org/proceedings09/09WUSSProceedings/papers/ess/ESS-Li1.pdf)这样的论文也只是掩盖了 LAST 的确定方式。

SAS 还会提前查看是否应该设置 END= 变量、指定时以及其他一些事情。这不仅仅是使用元数据来确定这些；您可以在不修改元数据的情况下删除或修改记录，它仍然可以工作 - 没有通常的 SAS 元数据的 SQL 表仍然允许您执行正常的 BY 组处理等。

当然，FIRST 变量不需要后视。它毕竟记得它在哪里。

编辑：我将其交叉发布到 SAS-L，并得到了相同的答案 - 似乎没有任何关于该主题的文档，但它必须提前阅读。例如，参见[http://listserv.uga.edu/cgi-bin/wa?A1=ind1303a&L=sas-l#8 。](http://listserv.uga.edu/cgi-bin/wa?A1=ind1303a&L=sas-l#8)

Edit2：来自 SAS-L，Dan Nordlund 链接到证实这一点的论文。[http://support.sas.com/resources/papers/proceedings12/222-2012.pdf](http://support.sas.com/resources/papers/proceedings12/222-2012.pdf)

论文的逻辑确认了前瞻——查看从数据集中读取的观察数。

```
DATA DS_Sample1;          
Input Sum_Var 
Product;     
Cards;                  
100 3                   
100 2                   
100 1                   
;                 
*With BY statement - reads 3 observations even though it stops after 2.;
DATA DS_Sample2;    
  Set DS_Sample1;           
  by Sum_Var;               
  cnt+1; If CNT > 1 then stop;
Run;
*no BY statement - reads 2 observations as expected;
DATA DS_Sample2;    
  Set DS_Sample1;           
  cnt+1; If CNT > 1 then stop;
Run;
* END statement - again, a lookahead;
DATA DS_Sample2;    
  Set DS_Sample1 end=eof;
  cnt+1; If CNT > 1 then stop;
Run; 
```

# php - 从 PHP 中的 Soap 响应 stdclass 对象获取数据

> ID：15231386
> 
> 赞同：0
> 
> 时间：2013-03-05T18:30:38.650
> 
> 标签：php, xml, web-services, soap

我使用以下方法获取网络服务数据，

```
$client = new SoapClient("http://empblr.dyndns.org/CentralHomeDelivery_Mob/Service.asmx?wsdl");

     $result = $client->GetAlladdress(array('customerid'=>36)); 
```

当我 var_dump $result 我得到，

```
object(stdClass)[16]
  public 'GetAlladdressResult' => 
    object(stdClass)[17]
      public 'schema' => string '<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet"><xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true"><xs:complexType><xs:choice minOccurs="0" maxOccurs="unbounded"><xs:element name="Table"><xs:complexType><xs:sequence><xs:element name="AdressID" type="xs:int" minOccurs="0"/><xs:element name="CustomerID" type="xs:int" minOccurs="0"/><xs:element name="LocationID" type="xs:int" minOccurs="0"/><xs'... (length=1030)
      public 'any' => string '<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1"><NewDataSet xmlns=""><Table diffgr:id="Table1" msdata:rowOrder="0"><AdressID>643</AdressID><CustomerID>36</CustomerID><LocationID>176</LocationID><StreetName>asdf</StreetName><HouseNo>1234</HouseNo><AlternatePhone>5632256</AlternatePhone><LandMark>asdf </LandMark><MainLocID>2</MainLocID><locName>ANDOLANA CIRCLE</locName><MainLoc>Mysore    </MainLoc></Table><Table diffgr:id="Table2" m'... (length=1864) 
```

如何从子节点获取值`<CustomerID>`并存储到数组中？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T05:03:23.630

*如果*您处于 WSDL 模式，通常[`SoapClient`](http://php.net/SoapClient)应该提供一个`stdClass`对象，该对象将这些值作为标准类属性提供。

 *如果不是这种情况（从你的问题中不清楚，`var_dump`因为它被切断了）你可以解析你在`any`属性中的 XML，例如使用[`SimpleXML`parser](http://php.net/simplexml)。

一些代码示例（[在线演示](http://eval.in/11844)）：

```
$xml = new SimpleXMLElement($result->GetAlladdressResult->any);

# traversal
$table = $xml->NewDataSet->Table[0];
echo $table->LocationID, "\n", $table->MainLoc, "\n";

# xpath
echo $xml->xpath('//LocationID')[0], "\n", $xml->xpath('//MainLoc')[0], "\n"; 
```

它显示了访问数据的两种替代方法，第一种使用标准遍历，第二种通过`xpath()`运行 xpath 查询的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:03:16.077

您始终可以使用正则表达式：

```
preg_match('#<CustomerID>(\d+)</CustomerID>#', $result->GetAlladdressResult->any, $match);
$customerId = isset($match[1]) ? $match[1] : false; 
```*

# xml-rpc - 直接与 SCGI 频道通信

> ID：15231390
> 
> 赞同：1
> 
> 时间：2013-03-05T18:30:52.920
> 
> 标签：xml-rpc, php, libtorrent, scgi

在我的家庭服务器上，我正在尝试编写一个与 SCGI (XML-RPC) 服务器 (rtorrent) 通信的命令行脚本。因为它确实是我唯一擅长的语言，所以我想使用 PHP（即 php-cli）。但是，当我试图找到有关如何执行此操作的更多信息时，我能找到的唯一解决方案是使用网络服务器重定向到 SCGI 服务器。我想避免安装网络服务器只是为了运行一个简单的脚本，所以我想知道是否有任何方法可以直接在 PHP 中与 SCGI 进行通信。

我发现了一些 Python 脚本可以做到这一点，但我从未使用过 Python，而且我不想学习另一种语言。

那么，任何人都可以向我指出一些可以帮助我开始的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:37:44.930

[rutorrent](https://code.google.com/p/rutorrent/)项目有一个[插件](https://code.google.com/p/rutorrent/wiki/PluginHTTPRPC)可以做到这一点。我每天都使用这个软件。据我所知，它是纯 PHP 并且质量非常高。最好的办法是阅读插件的源代码。

编辑：我更详细地阅读了您的问题，您正在尝试直接与 rtorrent 交流。这正是 rutorrent + HTTPRPC 插件所做的。换句话说，这是一个已解决的问题。享受！

# css - 如何在两个具有绝对定位的 UL 之间放置图像？

> ID：15231391
> 
> 赞同：-1
> 
> 时间：2013-03-05T18:30:54.997
> 
> 标签：css, position, css-position, fixed

在我的标题中，我有一个标志，图像的两侧都有一个图像精灵。我试图将它们水平居中到浏览器的顶部。标题必须定位：固定。

HTML：

```
<div id="headerbg">             
            <div id="header">
                <ul id="navleft">   
                    <li id="navhome"><a href="#top"></a></li>
                    <li id="navnew"><a href="#new"></a></li>
                    <li id="navbrands"><a href="#brands"></a></li>
                </ul>               
                <div id="logo"></div>
                <ul id="navright">  
                    <li id="navsales"><a href="#sales"></a></li>
                    <li id="navlocation"><a href="#location"></a></li>
                    <li id="navcontact"><a href="#contact"></a></li>
                </ul>
            </div>          
        </div> 
```

CSS：

```
#headerbg
{
background-color: #ffffff;
width:100%;
height:50px;    
z-index: 1000;
position: fixed;
top: 0;
left:0;
}

#header
{   
width: 800px;
height: 100px;
margin: auto;
}

#logo
{
width:200px;
height:100px;
background:url(images/logo_small.jpg);
display:inline-block;
z-index: 2000;      
}

/* NAVIGATION */

#navleft
{
position:relative;

}

#navleft li
{
margin:0;
padding:0;
list-style:none;
position:absolute;
top:0;
z-index: 2000;
}

#navleft li, #navleft a
{
height:50px;
display:block;
}

#navright
{
position:relative;

}

#navright li
{
margin:0;
padding:0;
list-style:none;
position:absolute;
top:0;
z-index: 2000;
}

#navright li, #navright a
{
height:50px;
display:block;
} 
```

我为精灵的悬停图像省略了 CSS 以缩短我的帖子。我很感激我能得到的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:34:17.083

您已经知道标题和徽标的宽度。然后你知道每个人都`ul`应该有一个`width: 300px;`，只需将它们全部设置为`float:left;`或`display:inline;`

```
#header ul {
    width:300px;
}

#header {
    display:inline-block;
    *display:inline; /* IE hack */
} 
```

**编辑**

您还可以为伪元素应用特定的 CSS 样式，例如：

```
#header ul:first-child {
    width:300px;
    position:relative;
    top:0;
    left:0;
}

#header ul:last-child {
    width:300px;
    position:relative;
    right:0;
    left:0;
} 
```

我已经重新输入了您的代码以满足您的需求（我认为是您的需求）

在这里看小提琴[http://jsfiddle.net/aLQYS/](http://jsfiddle.net/aLQYS/)

对于未来，我会建议你使用类而不是 Id。您不仅可以为更重要的东西（例如 javascript）保存 ID 标签，而且还可以通过向一个对象添加多个类来重用您的 css 样式，例如

**CSS**

```
.shadow {
    box-shadow: 1px 1px 5px rgba(0,0,0,0.5);
}

.box {
    width:200px;
    height:200px;
} 
```

**HTML**

```
<div class="shadow box"></div> 
```

# android - 接受edittext中的值，即使它有空格

> ID：15231396
> 
> 赞同：0
> 
> 时间：2013-03-05T18:31:17.823
> 
> 标签：android

我的应用程序中有此代码。它接受edittext的值

```
 if (ans.equalsIgnoreCase("bag")) {

                btnEnter.setEnabled(false);
            int a=Integer.parseInt(textView2.getText().toString());
            int b=a+10;
            String s1 = String.valueOf(b);
            textView2.setText(s1);  
            Toast.makeText(getApplicationContext(), "Correct",Toast.LENGTH_SHORT).show(); 
```

我的问题是，如果用户在edittext中放置一个空格，然后继续使用“bag”，它仍然会提示错误，例如

" " = 空格

" " 包 ----- 错误包 ----- 正确

我如何设置它可以接受的空间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:36:55.793

```
 String ans2 = ans.trim();
      if (ans2.equalsIgnoreCase("bag")) {

        btnEnter.setEnabled(false);
        int a=Integer.parseInt(textView2.getText().toString());
        int b=a+10;
        String s1 = String.valueOf(b);
        textView2.setText(s1);  
        Toast.makeText(getApplicationContext(), "Correct",Toast.LENGTH_SHORT).show(); 
```

[修剪（）函数](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#trim%28%29)

> 返回字符串的副本，省略前导和尾随空格。

由于@ρяσѕρєя K 在我回来删除我的答案之前删除了他的答案，我将添加他的简化编辑。改变

```
if (ans2.equalsIgnoreCase("bag")) { 
```

到

```
if (ans.trim().equalsIgnoreCase("bag")) { 
```

那么不需要

```
String ans2 = ans.trim(); 
```

但是在某些情况下，使用第二个变量可能会更好地提高可读性或功能性

**编辑** 要注意空间之间的问题，您可以尝试

```
if (!ans.contains("") && ans.trim().equalsIgnoreCase("bag")) { 
```

不知道为什么这不起作用，但您可以使用该`replace`功能`Strings`

```
 String ans2 = ans.replace(" ", "");
       if (ans2.trim().equalsIgnoreCase("bag")) { 
```

# visual-studio-2012 - 有没有办法在 Visual Studio 项目模板中指定初始光标位置？

> ID：15231397
> 
> 赞同：5
> 
> 时间：2013-03-05T18:31:22.047
> 
> 标签：visual-studio-2012, visual-studio-templates

例如，当您通过选择 Add > New Item > Visual C# Items > Class 将类添加到项目时，新类中闪烁的文本光标将位于第 1 行第 1 列。有没有办法修改模板使闪烁的光标出现在不同的位置？

```
using System;

namespace SomeNamespace
{
    class SomeClass
    {
        | <--- I'd like the blinking cursor to initially appear here
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-11T10:45:52.730

您想使用 $END$。您还可以通过用 $$ 包围其他关键字来创建字段。

```
using System;

namespace $Namespace$
{
    public class $ClassName$
    {
        $END$
    }
} 
```

# r - R中的段错误使用reshape2包和dcast

> ID：15231407
> 
> 赞同：11
> 
> 时间：2013-03-05T18:31:47.953
> 
> 标签：r, segmentation-fault, reshape2

`dcast`当我尝试使用（来自`reshape2`包）重塑特定数据框时，RStudio 崩溃了。我发现崩溃实际上是在 R 本身中发生的，所以我在 R.app 中运行了我的强制转换代码，并得到了为该站点命名的错误类型：`Error: segfault from C stack overflow`. 在 Google 和 SO 的帮助下，我了解到这是一个内存访问错误。

好吧，我已经走了这么远，但我不知道从这里去哪里。我无法提供一个真正可重现的示例，因为我的数据框大约有 558,000 行，并且在小型玩具示例上不会出现问题。例如，即使我采用 50,000 行的数据子集，`dcast`也可以正常工作。是否存在导致问题的特定数据行？如果是这样，任何人都可以建议寻找哪些功能可能导致我遇到的错误类型？

这是我从中转换的数据框的一个子集（一些变量的假值），然后是我正在使用的转换函数。我还在`dput`下面的函数中包含了这个小数据片段，以防万一使用它会有所帮助。真实数据集大约有 700 个值`prog`、15 个 值`prog1`和 5 个 值`fa.type`。

```
 id        term   yr    nslds acad.lev    prog            prog1 fa.type amount
1  1   Fall 2009 2010 Graduate Graduate  loan 1      Other Loans    Loan   5000
2  1 Spring 2010 2010 Graduate Graduate  loan 1      Other Loans    Loan   5000
3  2   Fall 2009 2010 Graduate Graduate  loan 2    Stafford Loan    Loan   8781
4  2 Spring 2010 2010 Graduate Graduate  loan 2    Stafford Loan    Loan   8781
5  3   Fall 2007 2008 Graduate Graduate  loan 3    Stafford Loan    Loan   4250
6  3   Fall 2007 2008 Graduate Graduate grant 1 University Grant   Grant   1707 
```

`fa.wide = dcast(id + term + yr + nslds + acad.lev ~ prog1 + fa.type , data=fa, value.var="amount", fun.aggregate=sum)`

```
fa = structure(list(id = c(1, 1, 2, 2, 3, 3), term = structure(c(7L, 
8L, 7L, 8L, 1L, 1L), .Label = c("Fall 2007", "Spring 2008", "Summer 2008", 
"Fall 2008", "Spring 2009", "Summer 2009", "Fall 2009", "Spring 2010", 
"Summer 2010", "Fall 2010", "Spring 2011", "Summer 2011", "Fall 2011", 
"Spring 2012", "Summer 2012", "Fall 2012", "Spring 2013"), class = c("ordered", 
"factor")), yr = c(2010L, 2010L, 2010L, 2010L, 2008L, 2008L), 
    nslds = structure(c(7L, 7L, 7L, 7L, 7L, 7L), .Label = c("1st Year, Never Attended", 
    "1st Year, Previously Attended", "2nd Year", "3rd Year", 
    "4th Year", "5th Year+", "Graduate"), class = c("ordered", 
    "factor")), acad.lev = structure(c(6L, 6L, 6L, 6L, 6L, 6L
    ), .Label = c("Freshman", "Sophomore", "Junior", "Senior", 
    "PB Undergrad", "Graduate"), class = c("ordered", "factor"
    )), prog = c("loan 1", "loan 1", "loan 2", "loan 2", "loan 3", 
    "grant 1"), prog1 = c("Other Loans", "Other Loans", "Stafford Loan", 
    "Stafford Loan", "Stafford Loan", "University Grant"), fa.type = structure(c(3L, 
    3L, 3L, 3L, 3L, 2L), .Label = c("Athletic", "Grant", "Loan", 
    "Scholarship", "Waiver", "Work/Study"), class = "factor"), 
    amount = c(5000, 5000, 8781, 8781, 4250, 1707)), .Names = c("id", 
"term", "yr", "nslds", "acad.lev", "prog", "prog1", "fa.type", 
"amount"), row.names = c(NA, 6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T21:26:20.233

这不是答案，而是一个不适合评论的简单（无意义）可重现示例。您可以使用这个简单的示例（在我的 MacBookPro 上）重新创建此错误。

```
require(reshape2)
n = 1448
df <- data.frame( Student = rep( 1:n , each = 2 ) , Grade = sample( 100 , n*2 , repl = TRUE ) )
df2 <- dcast( df , Student ~ Student , value.var = "Grade" , sum )
Error: segfault from C stack overflow 
```

错误发生在边界处，即在何时及以下`n = 1448`都不会发生。`n=1447`似乎错误来自package `split_indices`。这可能与分组级别数被分配给一个（无符号？）整数值这一事实有关，如果组数超过 32767，它会导致内存访问错误，但 TBH 我现在正抓着稻草. `split-numeric.c``plyr`

`sessionInfo()`如果有人无法重新创建此错误，我的情况是：

```
R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] reshape2_1.2.2

loaded via a namespace (and not attached):
[1] plyr_1.8      stringr_0.6.2 
```

有趣的是，如果我`df2 <-`在收到第一个错误后再次运行该命令，R 会完全崩溃，并且我会收到一些操作系统生成的错误报告。我在此处包含崩溃日志的相关部分：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_PROTECTION_FAILURE at 0x00007fff5f3ff120

VM Regions Near 0x7fff5f3ff120:
    JS JIT generated code  00004d431a401000-00004d431a402000 [    4K] ---/rwx SM=NUL  
--> STACK GUARD            00007fff5bc00000-00007fff5f400000 [ 56.0M] ---/rwx SM=NUL  stack guard for thread 0
    Stack                  00007fff5f400000-00007fff5fc00000 [ 8192K] rw-/rwx SM=COW  thread 0

Application Specific Information:
objc[57147]: garbage collection is OFF

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_c.dylib               0x00007fff897c4632 small_free_scan_madvise_free + 41
1   libsystem_c.dylib               0x00007fff897c5f06 szone_free_definite_size + 4186
2   libsystem_c.dylib               0x00007fff897fe789 free + 194
3   libR.dylib                      0x0000000100222dbf R_gc_internal + 7327 (memory.c:952)
4   libR.dylib                      0x0000000100224919 Rf_allocVector + 841 (memory.c:2356)
5   plyr.so                         0x000000010144bd2c split_indices + 204 (split-numeric.c:23)
6   libR.dylib                      0x00000001001b4cc7 do_dotcall + 16311 (dotcode.c:593)
7   libR.dylib                      0x00000001001e4448 Rf_eval + 1672 (eval.c:494)
8   libR.dylib                      0x00000001001e5edd do_begin + 141 (eval.c:1415)
9   libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
10  libR.dylib                      0x00000001001e93b1 Rf_applyClosure + 849 (eval.c:861)
11  libR.dylib                      0x00000001001e41b2 Rf_eval + 1010 (eval.c:512)
12  libR.dylib                      0x00000001001e74e5 do_set + 709 (eval.c:1717)
13  libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
14  libR.dylib                      0x00000001001e5edd do_begin + 141 (eval.c:1415)
15  libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
16  libR.dylib                      0x00000001001e93b1 Rf_applyClosure + 849 (eval.c:861)
17  libR.dylib                      0x00000001001e41b2 Rf_eval + 1010 (eval.c:512)
18  libR.dylib                      0x00000001001e74e5 do_set + 709 (eval.c:1717)
19  libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
20  libR.dylib                      0x00000001001e5edd do_begin + 141 (eval.c:1415)
21  libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
22  libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
23  libR.dylib                      0x00000001001e5edd do_begin + 141 (eval.c:1415)
24  libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
25  libR.dylib                      0x00000001001e93b1 Rf_applyClosure + 849 (eval.c:861)
26  libR.dylib                      0x00000001001e41b2 Rf_eval + 1010 (eval.c:512)
27  libR.dylib                      0x00000001001e74e5 do_set + 709 (eval.c:1717)
28  libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
29  libR.dylib                      0x00000001001e5edd do_begin + 141 (eval.c:1415)
30  libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
31  libR.dylib                      0x00000001001e93b1 Rf_applyClosure + 849 (eval.c:861)
32  libR.dylib                      0x00000001001e41b2 Rf_eval + 1010 (eval.c:512)
33  libR.dylib                      0x00000001001e74e5 do_set + 709 (eval.c:1717)
34  libR.dylib                      0x00000001001e429c Rf_eval + 1244 (eval.c:468)
35  libR.dylib                      0x000000010021c761 R_ReplDLLdo1 + 481 (main.c:362)
36  org.R-project.R                 0x0000000100022c24 run_REngineRmainloop + 196
37  org.R-project.R                 0x00000001000159b7 -[REngine runREPL] + 119
38  org.R-project.R                 0x0000000100001f24 main + 852
39  org.R-project.R                 0x0000000100001914 start + 52 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T18:33:41.403

我在使用 reshape2 包中的 dcast 将长表旋转到宽表时遇到了同样的问题。我在这篇[plyr split_indices function crash for long vectors](https://stackoverflow.com/questions/14548570/plyr-split-indices-function-crashes-for-long-vectors)中找到了解决方案。[具体来说，您可以在此页面https://github.com/hadley/plyr/tree/master/src](https://github.com/hadley/plyr/tree/master/src)中下载 split_numeric.c 和 loop-apply.c 。从 R 控制台卸载包 plyr，最后在本地重新安装包： install.packages('/path/to/source', repos=NULL, type='source')。

这解决了我的问题，希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-12T23:11:26.320

只是为了结束这个老问题，这是一个已修复的错误，如[github 问题](https://github.com/hadley/reshape/issues/31)中所述。

# android - android线性布局中的对齐

> ID：15231410
> 
> 赞同：0
> 
> 时间：2013-03-05T18:32:00.503
> 
> 标签：android, android-layout, alignment

我正在使用带有 2 个文本视图、4 个按钮、1 个搜索栏、1 个图像视图的线性布局。如果我将这些文本视图、按钮等放在线性布局中，则在 android 手机中对齐很好。虽然我在 android 平板电脑上运行相同的代码，但对齐不正确。为什么这种对齐在平板电脑中不正确。？我已经通过 java 代码创建了文本视图、按钮等。即使我通过**devicewidth/2**设置第二个文本视图的左边距来水平指定两个文本视图，这在 android 手机和平板电脑中存在差异。我需要像下面这样对齐。

```
 TextView1                            TextView2
 Button1 Button2 Button3 Button4      SeekBar  ImageView 
```

这是我的代码。

```
 LinearLayout.LayoutParams textViewParams1 = new LinearLayout.LayoutParams(
             LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    textViewLayout.setOrientation(LinearLayout.HORIZONTAL); 
    TextView TextView1=new TextView(this);
    TextView1.setText("Text1");
    textViewParams1.gravity=Gravity.CENTER;
    textViewParams1.setMargins(60, 20, 40, 10);
    textViewLayout.addView(chooseColorTextView, textViewParams1);

    LinearLayout.LayoutParams textViewParams2 = new LinearLayout.LayoutParams(
             LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    TextView TextView2=new TextView(this);
    TextView2.setText("Text2");
    int width=getWindowManager().getDefaultDisplay().getWidth();
    textViewParams2.gravity=Gravity.CENTER;     
    textViewParams2.setMargins((width/2), 20, 40, 10);
    textViewLayout.addView(strokeWidthTextView, textViewParams2);

    parentlinearLayout.addView(textViewLayout, textViewLayoutParams); 
```

在下一个线性布局中，我添加了 4 个按钮、搜索栏和图像视图。但面临对齐问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:43:09.207

我建议创建复杂的布局，该布局必须在 XML 中而不是以编程方式呈现在不同的屏幕尺寸上，因此您可以在 res/layout 和 res/layout-large 中有两个不同的 main.xml，系统会根据具体情况选择正确的一个在屏幕尺寸上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T05:39:37.670

在 XML 中使用 layout_weight 和 weightSum：

```
<LinearLayout android:weightSum="1" android:layout_width="match_parent" android:layout_height="wrap_content">
    <!-- First column -->
    <LinearLayout android:layout_weight=".5" android:layout_width="0dp" android:layout_height="wrap_content"> ... </LinearLayout>

    <!-- Second column -->
    <LinearLayout android:layout_weight=".5" android:layout_width="0dp" android:layout_height="wrap_content"> ... </LinearLayout>
</LinearLayout> 
```

这将产生一个动态调整大小的 2 列布局。如果您想要更短或更长的分割，请将 0.5 更改为 .3 和 0.7 以获得 30/70% 的分割等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:40:50.330

你为什么不使用**TableLayout**？它是您管理单元对齐所需的：

您只需要在 span 属性中使单元格使用多列。

```
TableLayout myLayout = new TableLayout(myContext);

TableRow row1 = new TableRow(myContext);
TableRow.LayoutParams layouparams1 = new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT,TableRow.LayoutParams.WRAP_CONTENT);
layouparams1.span = 4;
row1.setLayoutParams = layouparams1 ;

TableRow.LayoutParams layouparams2 = new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT,TableRow.LayoutParams.WRAP_CONTENT);
layouparams2.span = 2;
TableRow row2 = new TableRow(myContext);
row2.setLayoutParams = layouparams2 ;

//then create and add your childs to each row :
...
row1.addView(text1);
row1.addView(text1);

row1.addView(button1);
row1.addView(button2);
row1.addView(button3);
row1.addView(button4);
row1.addView(seekbar);
row1.addView(imageView);

myLayout.addView(row1);
myLayout.addView(row2); 
```

还可以考虑在孩子身上添加**layout_weight**来管理他们留给彼此的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T18:42:18.710

请阅读有关 wrap_content 和其他 android 控件的更多信息。另请阅读有关平板电脑的 dpi 的信息。由于分辨率外观变化。

# javascript - 用一个锚标签替换 2 个表单的操作

> ID：15231412
> 
> 赞同：1
> 
> 时间：2013-03-05T18:32:07.173
> 
> 标签：javascript, html, forms, anchor

说到 HTML，我是个菜鸟。我有一个 HTML 模板。在这个模板中，我试图用标签替换两个`form`标签`a`。两者`form`有不同的`action`定义。我需要一个`a`标签，相当于执行两个`form`s 执行的相同操作。

这是我的 HTML 代码：

```
 <form target="_top" action="###URL###/spg/proxy" method="POST"></form>
 <form method="POST" action="###S_URL###" target="_top">
  <td class="buttonbg" colspan="2">
    <input name=rurl type=HIDDEN value="###URL###">
    <input name=udata type=HIDDEN value="###URLDATA###">
    <input type="submit" class="buttoned unhighlight"  value="###PROXY_VIEW_UNPROXIED###" style="*padding:0 4px;" name="###PROXY_VIEW_UNPROXIED###" />
   </td>
  </form> 
```

最后我渴望这样：

```
<td class="buttonbg" colspan="2">
  <a href="**CODE**" onClick="**CODE**" >
  <input name=rurl type=HIDDEN value="###URL###">
  <input name=udata type=HIDDEN value="###URLDATA###">
   <input type="submit" class="buttoned unhighlight"  value="###PROXY_VIEW_UNPROXIED###" style="*padding:0 4px;" name="###PROXY_VIEW_UNPROXIED###" /></a>
</td> 
```

我用谷歌搜索并找到解决方案说“添加两个 Javascript 函数`func1`和`func2`。现在调用。`func2`在标签中`func1`设置`func1`为`onClick`事件。”`a`

但我认为这是最后的选择，有没有更好的方法呢？

**编辑：** 如果您想在这里查看我的整个 HTML 代码：

```
<div  id='results_header'>
<form action="###CGIBASE###/search" autocomplete="off" method="POST" name="blah1" id="search_form" onSubmit="return verifyChecked(this);" target="_parent">
      <table cellspacing="0" cellpadding="0" border="0" >
        <tr>
          <td id='input_p'>

            <input type=hidden name=cmd value="process_search">
            <input type=hidden name=language value="###LANGUAGE###">
            <input type=hidden name=enginecount value="1">
            <input type=hidden name=pl value="">
            <input type="hidden" name="abp" class='abp' value="-1" />
            <input type=hidden name=ff value="">
            <input type=hidden name=theme value="">
            <input type=hidden id=flag_ac1 name=flag_ac value="0">
            <input name="cat" type=hidden value="###CAT###">
            <input type='text' autocomplete='off' name='query' id='query_top' value="###ESCAPEQUOTEDQUERY###" style="width:256px\9;" >

           </td>
          <td><input type='image' src='graphics/stp_search.gif' id='submit1' style="margin-left:0\9;"/></td>
          <td class="mesg"><p style="visibility:hidden"></p></td>
          <td>
              <table  border="0" cellspacing="0" cellpadding="0" class="buttonwrap">
              <tr>
                <td class="buttonbg"><a href="###HIGHLIGHTERBACKBUTTONREFERRER###" target="_top" onClick="return goback('###HIGHLIGHTERBACKBUTTONREFERRER###');" style="text-decoration: none;">
                 <input type="button" class="buttoned"  value="###HIGHLIGHTERBACKBUTTON###" style="*padding:0 21px;"/ name="BACKBUTTON"></a>
                </td>
              </tr>
            </table>
            <span class="return_result_page">###HIGHLIGHTERBACKBUTTONDESC###</span></td>
                      <td width="25"><img src="graphics/spacer.gif" width="25" height="1"/></td>
          <td>
           <form style="margin:0; padding:0" target="_top" action="###SCRIPTURL###" method="POST">
           <table  border="0" cellspacing="0" cellpadding="0" class="buttonwrap">
              <tr>
                <form target="_top" action="###CGIBASE###/spg/proxy" method="POST"></form>
                <form method=POST action="###SCRIPTURL###" target="_top">
                <td class="buttonbg">
                 <input name=rurl type=HIDDEN value="###URL###">
                 <input name=udata type=HIDDEN value="###URLDATA###">
                 <input type="submit" class="buttoned unhighlight"  value="###LINKUNHIGHLIGHTED###" style="*padding:0 4px;" name="submit" />
                </td>
              </tr>
            </table></form>
          <span class="return_result_page" style="*margin-top:-20px;">###VIEWUNHIGHLIGHTED###</span>
         </td>
        </tr>
      </table>
    </div> 
```

# c++ - 为什么我不能创建我的数组（C++）？

> ID：15231413
> 
> 赞同：6
> 
> 时间：2013-03-05T18:32:10.543
> 
> 标签：c++, arrays

我有以下代码：

```
#pragma once

class Matrix{
public:
    Matrix();
    ~Matrix();

protected:
    float mat[3] = {0.0, 0.0, 0.0};
}; 
```

但我在`float mat[3] = {0.0, 0.0, 0.0};`. 它说 Error C2059: syntax error : '{' and error C2334: unexpected token(s) before '{'; 跳过明显的函数体。

我正确地创建了数组不是我吗？那有什么问题呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T18:33:25.807

C++03 不支持成员字段的内联初始化。您需要将此初始化移动到构造函数中，例如（[链接到演示](http://ideone.com/kOiVtT)）：

```
class Matrix{
public:
    Matrix() : mat({0.0, 0.0, 0.0}) {};
    ~Matrix();

protected:
    float mat[3];
}; 
```

上面定义了内联的构造函数；如果您单独定义构造函数，请将初始化列表（即冒号`:`和左大括号之间的代码`{`）与构造函数定义一起移动。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T18:38:07.723

在 C++11 标准被批准之前，C++不支持[非静态数据成员初始化器。](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2008/n2756.htm)为了使用这个特性，你必须有一个支持 C++11 的编译器。此外，它通常默认禁用，因此您可能需要手动启用它。对于 GCC，指定`std=c++11`. 对于 Clang，执行`-std=c++11 -stdlib=libc++`. 如果您使用其他东西，请查看文档。

# vba - 如何使用 VBA 将制表符分隔的数据导入 Excel

> ID：15231420
> 
> 赞同：1
> 
> 时间：2013-03-05T18:32:22.283
> 
> 标签：vba, excel-2007

鉴于我从 Excel 导入的制表符分隔数据，我如何将其插入电子表格中，以便它像我粘贴它时那样在多个单元格中结束。

**编辑：**我有一个变量中的文本，所以我不想通过文件系统。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T19:06:46.630

这基本上是我最终想出的，它有点复杂并且使用了数组，但这就是它的要点。

```
i = 1
For Each Row In VBA.Split(text, vbCrLf)
    j = 1
    For Each Col In VBA.Split(Row, vbTab)
        ActiveSheet.Cells(i, j).Value = Col
        j = j + 1
    Next Col
    i = i + 1
Next Row 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:46:00.847

它不应该太难。请尝试：[http ://www.zerrtech.com/content/excel-vba-open-csv-file-and-import](http://www.zerrtech.com/content/excel-vba-open-csv-file-and-import)

如果您想从字符串变量中执行此操作，请按结束行拆分文本：

```
Dim linesSplit As Variant 
linesSplit = Split(yourTextVar, "\n") 
```

对每一行分割，用逗号分割：

```
Dim lineSplit As Variant 
lineSplit = Split(linesSplit[i], ",") 
```

将结果放入工作表中。GL！

# rally - 您如何为 Rally 自定义网格构建大型查询？

> ID：15231425
> 
> 赞同：1
> 
> 时间：2013-03-05T18:32:30.517
> 
> 标签：rally

我正在尝试为 Rally Custom Grid 构建查询。如果将用户故事分配给我项目中的 58 个迭代之一，我想选择它。

这行得通；((Iteration.Name = "sprint 1 - 1/1/2012 - 1/31/2012") 或 (Iteration.Name = "Sprint 1 - 1/24 - 2/1"))

但这不是；((Iteration.Name = "sprint 1 - 1/1/2012 - 1/31/2012") 或 (Iteration.Name = "Sprint 1 - 1/24 - 2/1") 或 (Iteration.Name = "sprint 2 - 2012 年 2 月 1 日 - 2012 年 2 月 29 日"))

查询对话框有限制吗？对其他值有什么建议吗？

问候，吉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:49:20.527

子句的数量没有限制。你只需要更多的括号。

一个子句：

```
(Foo = Bar) 
```

两个子句：

```
((Foo = Bar) AND (Bar = Baz)) 
```

三分句：

```
(((Foo = Bar) AND (Bar = Baz)) AND (A = 1)) 
```

# c# - Outlook 对象模型另存为 MHT 设置时区

> ID：15231426
> 
> 赞同：1
> 
> 时间：2013-03-05T18:32:30.940
> 
> 标签：c#, outlook, timezone, outlook-2010, outlook-object-model

我需要将 Outlook 电子邮件保存为 MHTML (MHT) 格式。我有一个测试应用程序，它通过 EntryID 找到一封电子邮件并将其成功保存为 MHT 格式。

我的目标是指定显示发送时间的时区。默认情况下，Outlook 对象模型使用写入 MHT 的计算机上的时区将时间写入 MHT 文件。我想指定一个任意时区和夏令时遵守。

我正在使用 Outlook 2010、Windows XP SP2、Visual Studio 2008 Professional。

我不希望更改处理计算机上的时间，以避免计算机上可能同时发生的其他事情可能出现问题。但是，我可能不得不走那条路。

我曾希望更改 Application 对象的时区，但该属性`Application.TimeZones.CurrentTimeZone`是只读的。我还没有找到 Set() 方法。尝试分配给会`CurrentTimeZone`导致此错误：`Property or indexer 'Microsoft.Office.Interop.Outlook._TimeZones.CurrentTimeZone' cannot be assigned to -- it is read only`

```
//strPst = @"D:\aaa.pst";
//strEntryId = "0000000007840E169496284E947388623A8A9F48C4012000";

//Prepare Session
Microsoft.Office.Interop.Outlook.Application objApplication = new Microsoft.Office.Interop.Outlook.Application();
Microsoft.Office.Interop.Outlook._NameSpace objNameSpace = null;
objNameSpace = objApplication.GetNamespace("MAPI");
objNameSpace.Logon(null, null, false, false);
objApplication.Session.AddStore(strPst);

//Get PST ID
string strPstId = "";
foreach (Store store in objNameSpace.Stores)
{
    if (store.FilePath == strPst)
    {
        strPstId = store.StoreID;
    }
}

try
{
    //Get item
    object xi = objNameSpace.GetItemFromID(strEntryId, strPstId);

    //Get item as MailItem
    MailItem mi = objNameSpace.GetItemFromID(strEntryId, strPstId) as MailItem;
    if (mi != null) 
    { 
        //mi.Display(null); 

        //Get time zone UTC-1200
        Microsoft.Office.Interop.Outlook.TimeZones tzs = objApplication.TimeZones;
        Microsoft.Office.Interop.Outlook.TimeZone tz = tzs[1];
        //Console.WriteLine(tz.Name);

        //Set time zone 
        objApplication.TimeZones.CurrentTimeZone = tz;

        //Save As MHT
        mi.SaveAs(@"D:\test.mht", OlSaveAsType.olMHTML);

     //...

     }
 } 
```

# c# - 尴尬的 Linq 排序

> ID：15231427
> 
> 赞同：0
> 
> 时间：2013-03-05T18:32:33.617
> 
> 标签：c#, linq

我有一个 Foo 对象列表：

```
List<Foo> 
```

Foo 本身包含一个 Bar 属性，该属性包含一个 Baz 列表，这些 Baz 具有名为 DateHappened 的 DateTime 属性：

```
public class Foo
{
   public Bar Bar { get; set; }
}

public class Bar
{
   public List<Baz> Baz { get; set; }
} 
```

是否可以根据 DateHappened 属性的最早值对我的 Foos 列表进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:47:15.693

```
var ordered = fooList.OrderBy(f => f.Bar.Baz.Min(b => b.DateHappened)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:34:50.157

```
var ordered = fooList
    .SelectMany(f => f.Bar.Bazs.Select(b => new { Foo = f, DT = b.DateTime }))
    .OrderBy(fd => fd.DT)
    .Select(fd => fd.Foo); 
```

如果您想按每个`Baz`列表中的最短时间订购，您可以执行以下操作：

```
var ordered = fooList
    .OrderBy(f => f.Bar.Bazs.Select(b => b.DateTime).Min()); 
```

# asp.net-mvc-4 - 具有不同客户端服务器持续时间的 MVC 4 OutputCache

> ID：15231428
> 
> 赞同：1
> 
> 时间：2013-03-05T18:32:34.667
> 
> 标签：asp.net-mvc-4, outputcache

我怎样才能让服务器 OutputCache Duration 为 2 分钟，浏览器缓存过期为 10 分钟，哦，特别是让它在 IE 8 中工作？

```
[OutputCachce(Duration=120,VaryByParam="*"] 
```

然后在我设置的动作中

```
ControllerContext.HttpContext.Response.Cache.SetOmitVaryStar(true);
ControllerContext.HttpContext.Response.Cache.SetExpires(DateTime.Now.AddMinutes(10)); 
```

似乎只要我有属性，它就会忽略我在操作中的响应设置的内容（有效的 OmitVaryStar 除外）。我也尝试过使用 AddHeader 并设置 Cache-Control，它再次在没有属性的情况下工作，但有了它，它被属性忽略\覆盖。如果这很重要，我将返回 FileContentResult。

# php - CakePHP MySQL 值

> ID：15231429
> 
> 赞同：0
> 
> 时间：2013-03-05T18:32:36.190
> 
> 标签：php, html, cakephp

```
echo $this->Form->input('quantity', array('options' => array('1','2','3','4'))); 
```

我有这段代码可以将值 1、2、3 或 4 输入到我的数据库中的数量字段中。

如果用户选择 1，则输入 0，2 输入 1，依此类推。

如果代码是

```
echo $this->Form->input('quantity'); 
```

用户可以输入他们喜欢的内容并猜出什么......它有效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:43:05.513

我认为您正在尝试实现一个下拉框。我想你可以试试这个：

```
$options = array('1' => '1', '2' => '2', '3' => '3', '4' => '4');
echo $this->Form->input('quantity', array('options' => $options, 'default' => '1')); 
```

这将创建一个选择下拉框。

详情[***请看这里***](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)。

# r - 向包含行的 data.table 添加倒计时列，直到遇到特殊行

> ID：15231433
> 
> 赞同：6
> 
> 时间：2013-03-05T18:32:42.553
> 
> 标签：r, data.table

我有一个`data.table`带有标签的有序数据，我想添加一个列，告诉我有多少记录，直到我得到一个重置倒计时的“特殊”记录。

例如：

```
DT = data.table(idx = c(1,3,3,4,6,7,7,8,9), 
                name = c("a", "a", "a", "b", "a", "a", "b", "a", "b"))
setkey(DT, idx)
#manually add the answer
DT[, countdown := c(3,2,1,0,2,1,0,1,0)] 
```

给

```
> DT
   idx name countdown
1:   1    a         3
2:   3    a         2
3:   3    a         1
4:   4    b         0
5:   6    a         2
6:   7    a         1
7:   7    b         0
8:   8    a         1
9:   9    b         0 
```

看看倒计时列如何告诉我有多少行直到称为“b”的行。问题是如何在代码中创建该列。

请注意，密钥不是均匀分布的，并且可能包含重复项（因此在解决问题时不是很有用）。一般来说，非 b 名称可能不同，但如果解决方案需要，我可以添加一个只是 True/False 的虚拟列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T19:08:57.003

这是另一个想法：

```
## Create groups that end at each occurrence of "b"
DT[, cd:=0L]
DT[name=="b", cd:=1L]
DT[, cd:=rev(cumsum(rev(cd)))]
## Count down within them
DT[, cd:=max(.I) - .I, by=cd]
#    idx name cd
# 1:   1    a  3
# 2:   3    a  2
# 3:   3    a  1
# 4:   4    b  0
# 5:   6    a  2
# 6:   7    a  1
# 7:   7    b  0
# 8:   8    a  1
# 9:   9    b  0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T18:51:04.397

我确信（或至少希望）会生成一个纯粹的“data.table”解决方案，但与此同时，您可以使用`rle`. 在这种情况下，您有兴趣反转倒计时，因此我们将`rev`在继续之前反转“名称”值。

```
output <- sequence(rle(rev(DT$name))$lengths)
makezero <- cumsum(rle(rev(DT$name))$lengths)[c(TRUE, FALSE)]
output[makezero] <- 0

DT[, countdown := rev(output)]
DT
#    idx name countdown
# 1:   1    a         3
# 2:   3    a         2
# 3:   3    a         1
# 4:   4    b         0
# 5:   6    a         2
# 6:   7    a         1
# 7:   7    b         0
# 8:   8    a         1
# 9:   9    b         0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T19:19:06.727

这是 Josh 和 Ananda 的解决方案的混合，其中，我使用 RLE 生成 Josh 给出答案的方式：

```
t <- rle(DT$name)
t <- t$lengths[t$values == "a"]
DT[, cd := rep(t, t+1)]
DT[, cd:=max(.I) - .I, by=cd] 
```

更好：利用`b`始终只有一个（或假设在这里）这一事实，您可以做得更好：

```
t <- rle(DT$name)
t <- t$lengths[t$values == "a"]
DT[, cd := rev(sequence(rev(t+1)))-1] 
```

**编辑：**从 OP 的评论来看，很明显有不止 1 个`b`可能，在这种情况下，所有的都`b`应该是 0。这样做的第一步是创建在每个连续的 's`b`之后结束的组。`a`

```
DT <- data.table(idx=sample(10), name=c("a","a","a","b","b","a","a","b","a","b"))
t <- rle(DT$name)
val <- cumsum(t$lengths)[t$values == "b"]
DT[, grp := rep(seq(val), c(val[1], diff(val)))]
DT[, val := c(rev(seq_len(sum(name == "a"))), 
         rep(0, sum(name == "b"))), by = grp]

#     idx name grp val
#  1:   1    a   1   3
#  2:   7    a   1   2
#  3:   9    a   1   1
#  4:   4    b   1   0
#  5:   2    b   1   0
#  6:   8    a   2   2
#  7:   6    a   2   1
#  8:   3    b   2   0
#  9:  10    a   3   1
# 10:   5    b   3   0 
```

# graph - nvd3 不显示值为 1000 或更高的数据的图表

> ID：15231436
> 
> 赞同：0
> 
> 时间：2013-03-05T18:32:50.307
> 
> 标签：graph, d3.js, nvd3.js

我正在尝试使用离散条形图为电子邮件活动设置分析，我刚刚发现 nvd3 有一个奇怪的错误，即任何值为 1000 或更高的数据点都无法正确呈现。

这是jsfiddle

[http://jsfiddle.net/aMnSb/](http://jsfiddle.net/aMnSb/)

```
 var data = [{
key: "Cumulative Return",
values: [
    {"label" : "delivered","value" : "999","color" : "458ec1",},{"label" : "opened","value" : "176","color" : "65a1cb",},{"label" : "clicked","value" : "8","color" : "7fb1d4",},{"label" : "unopened","value" : "487","color" : "aacce3",},{"label" : "bounced","value" : "357","color" : "eec4cc",},{"label" : "unsubscribed","value" : "1","color" : "e39ba9",},                 ] 
```

}];

有效，但这不起作用

```
var data_large = [{
    key: "Cumulative Return",
    values: [
        {"label" : "delivered","value" : "1000","color" : "458ec1",},{"label" : "opened","value" : "176","color" : "65a1cb",},{"label" : "clicked","value" : "8","color" : "7fb1d4",},{"label" : "unopened","value" : "487","color" : "aacce3",},{"label" : "bounced","value" : "357","color" : "eec4cc",},{"label" : "unsubscribed","value" : "1","color" : "e39ba9",},                    ]
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:41:08.990

您看到这种行为是因为 JSON 中的数字实际上不是数字，而是字符串（用引号括起来）。如果您删除 JSON 中数字周围的引号，它会起作用。

# java - Java InputStream 无法从 JAR 中读取文件

> ID：15231441
> 
> 赞同：2
> 
> 时间：2013-03-05T18:33:11.877
> 
> 标签：java, jar, inputstream

我正在尝试从我的可执行 .jar 文件中读取一个文件，但它不断获取空值。

我有这个代码：

```
public DanceEventTicketScanner(String txtfile){
    sv = new ScannerView(this);
    findcode = false;
    InputStream is = this.getClass().getResourceAsStream("/resources/copy.csv");
    if (is == null) JOptionPane.showMessageDialog(null, "Resource not located.");
} 
```

在 JAR 文件中，我（正常）有一个文件夹，其中包含我的所有 .class 文件，并且在同一目录中有一个名为 resources 的文件夹，其中包含 copy.csv 文件。

但是，此代码无法识别该文件。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:40:08.880

删除第一个斜杠：

```
InputStream is = this.getClass().getResourceAsStream("resources/copy.csv"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:42:12.407

getClass().getResourceAsStream(..) 将使用相对于类的路径（因此包括包目录）。getClass().getClassLoader().getResourceAsStream(..) 将使用绝对路径。因此，更改您的代码并获取类加载器，它将起作用。

# c# - 使用结构的 RazorEngine 中出现奇怪的 ValueType 动态绑定错误

> ID：15231444
> 
> 赞同：2
> 
> 时间：2013-03-05T18:33:17.867
> 
> 标签：c#, dynamic, razor, value-type

在 RazorEngine 中使用匿名类型模型时，我遇到了一个奇怪的动态绑定错误。我知道当模型具有匿名类型时 Razor 使用动态，因为匿名类型是内部的。这是一个重现错误的快速程序：

```
void Main()
{
    // works fine
    var model = (dynamic)new { items = new[] { Create(new { a = 2 }, 1) } };
    var items = model.@items;
    foreach (var item in items) {
        Console.WriteLine(item.Index);
    }

    RazorEngine.Razor.Compile(@"
        @{ var items = Model.@items; } 
        @foreach (var item in items) { <text>
            X @item.Index
    </text> } X", new { items = new[] { Create(new { a = 2 }, 1) } }.GetType(), "name");

    // parse failes with RuntimeBinderException: 'System.ValueType' does not contain a definition for 'Index'
    var parsed = RazorEngine.Razor.Parse(@"
        @{ var items = Model.@items; } 
        @foreach (var item in items) { <text>
            X @item.Index
    </text> } X", new { items = new[] { Create(new { a = 2 }, 1) } }, "name");
    Console.WriteLine(parsed);
}

    public struct IndexedValue<T>
    {
        private readonly T _value;
        private readonly int _index;

        public IndexedValue(T value, int index)
        {
            this._index = index;
            this._value = value;
        }

        public T Value { get { return this._value; } }
        public int Index { get { return this._index; } }
    }

    public static IndexedValue<T> Create<T>(T item, int index) { return new IndexedValue<T>(item, index); } 
```

谁能解释这里发生了什么？

# java - 如何访问集合中的集合

> ID：15231446
> 
> 赞同：1
> 
> 时间：2013-03-05T18:33:22.220
> 
> 标签：java

我有一个有一组弧的类状态。（弧是另一类）。现在 Lexicon 类有一组状态。如何选择存在特定弧的状态。

```
public class State {
private static long count = 0;
private long StateNo;
private Set<Arc> arcs;
}

public class Arc {
private char charecter;
private State destState;
private Set<String> letters;
} 
```

这些是我所指的课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:40:30.243

假设 Lexicon 有

```
private Set<State> states 
```

您需要在 Arc 类上正确实现 equals 方法，然后循环遍历 Lexicon 类中的每个状态。从那里你可以使用

```
state.getArcs().contains(targetArc) 
```

找到具有您所追求的弧的状态。

# ios6 - ios6：GameCenter 显示错误的类别（排行榜）

> ID：15231453
> 
> 赞同：2
> 
> 时间：2013-03-05T18:33:40.087
> 
> 标签：ios6, game-center, gamekit, leaderboard

我有 ID 为“1”、“2”和“3”的排行榜。“1”和“2”是为应用商店中当前版本的应用提交的，“3”是一个新版本。测试设备具有为所有类别提交的值。要从应用程序中打开排行榜，我使用以下代码：

```
 GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];
    if (leaderboardController != NULL)
    {
        leaderboardController.category = GameMode != MAIN ? @"3" : @"1";
        leaderboardController.timeScope = GKLeaderboardTimeScopeAllTime;
        leaderboardController.leaderboardDelegate = self;
        [mainWindowController presentModalViewController:leaderboardController animated:YES];
    } 
```

如果在 ios 5.0.1 和 5.1.1 上都适用于“3”和“1”，但我在 ios 6.0.1 上有一个奇怪的问题：当我尝试打开类别“1”时 - 没问题，但是当我open "3" - Game Center 通常只显示带有默认类别 ("1") 值的“排行榜”屏幕。

也许发生这种情况是因为我的“3”类别还没有“在线”，当我发布将包含“3”类别的应用程序的新版本时，这个问题会消失吗？我试图将“3”更改为“2”：

```
leaderboardController.category = GameMode != MAIN ? @"2" : @"1"; 
```

它工作了一段时间，然后我再次看到带有默认类别值的“排行榜”屏幕。

有没有人碰巧有这样的问题？

更新：作为临时解决方案，我将类别设置为 nil 以查看所有类别。

# jqplot - JQPlot 只显示条形图但不画线

> ID：15231454
> 
> 赞同：0
> 
> 时间：2013-03-05T18:33:48.340
> 
> 标签：jqplot

我在使用 JQPlot 时遇到了问题，我设法在图表中显示了条形图，但由于某种原因没有绘制线条。

您可以在 JSFiddle 上看到代码（在 Internet Explorer 上不起作用）：http: [//jsfiddle.net/gkp2N/](http://jsfiddle.net/gkp2N/)

如果我将“seriesDefaults”更改为“series”，它会显示两条线，但不会绘制条形图。我花了两个小时弄清楚这个问题，希望有人能帮助我，谢谢！

这是JS代码：

```
var s1 = [
    ['2013-02-04 4:00PM', 11],
    ['2013-02-05 4:00PM', 11],
    ['2013-02-06 4:00PM', 15],
    ['2013-02-07 4:00PM', 12],
    ['2013-02-08 4:00PM', 16],
    ['2013-02-09 4:00PM', 7],
    ['2013-02-10 4:00PM', 9],
    ['2013-02-11 4:00PM', 6],
    ['2013-02-12 4:00PM', 13],
    ['2013-02-13 4:00PM', 12],
    ['2013-02-14 4:00PM', 6],
    ['2013-02-15 4:00PM', 13],
    ['2013-02-16 4:00PM', 3],
    ['2013-02-17 4:00PM', 9],
    ['2013-02-18 4:00PM', 18],
    ['2013-02-19 4:00PM', 18],
    ['2013-02-20 4:00PM', 12],
    ['2013-02-21 4:00PM', 14],
    ['2013-02-22 4:00PM', 7],
    ['2013-02-23 4:00PM', 5],
    ['2013-02-24 4:00PM', 3],
    ['2013-02-25 4:00PM', 9],
    ['2013-02-26 4:00PM', 15],
    ['2013-02-27 4:00PM', 14],
    ['2013-02-28 4:00PM', 4],
    ['2013-03-01 4:00PM', 0],
    ['2013-03-02 4:00PM', 0],
    ['2013-03-03 4:00PM', 0],
    ['2013-03-04 4:00PM', 0],
    ['2013-03-05 4:00PM', 0]
];

var s2 = [
    ['2013-02-04 4:00PM', 55],
    ['2013-02-05 4:00PM', 55],
    ['2013-02-06 4:00PM', 75],
    ['2013-02-07 4:00PM', 60],
    ['2013-02-08 4:00PM', 80],
    ['2013-02-09 4:00PM', 35],
    ['2013-02-10 4:00PM', 45],
    ['2013-02-11 4:00PM', 30],
    ['2013-02-12 4:00PM', 65],
    ['2013-02-13 4:00PM', 60],
    ['2013-02-14 4:00PM', 30],
    ['2013-02-15 4:00PM', 65],
    ['2013-02-16 4:00PM', 15],
    ['2013-02-17 4:00PM', 45],
    ['2013-02-18 4:00PM', 90],
    ['2013-02-19 4:00PM', 90],
    ['2013-02-20 4:00PM', 60],
    ['2013-02-21 4:00PM', 70],
    ['2013-02-22 4:00PM', 35],
    ['2013-02-23 4:00PM', 25],
    ['2013-02-24 4:00PM', 15],
    ['2013-02-25 4:00PM', 45],
    ['2013-02-26 4:00PM', 75],
    ['2013-02-27 4:00PM', 70],
    ['2013-02-28 4:00PM', 20],
    ['2013-03-01 4:00PM', 0],
    ['2013-03-02 4:00PM', 0],
    ['2013-03-03 4:00PM', 0],
    ['2013-03-04 4:00PM', 0],
    ['2013-03-05 4:00PM', 0]
];
var plot = $.jqplot('placeholder', [s1, s2], {

    // Turns on animatino for all series in this plot.
    animate: true,
    // Will animate plot on calls to plot1.replot({resetAxes:true})
    animateReplot: true,
    cursor: {
        show: true,
        zoom: true,
        looseZoom: true,
        showTooltip: false
    },

    seriesColors: ["#eee", "#ccc"],
    highlighter: {
        show: true,
        showLabel: true,
        tooltipAxes: 'y',
        sizeAdjust: 7.5,
        tooltipLocation: 'ne'
    },

    seriesDefaults: {
        renderer: $.jqplot.BarRenderer,
        xaxis: 'xaxis',
        yaxis: 'yaxis',
        rendererOptions: {
            // Speed up the animation a little bit.
            // This is a number of milliseconds.  
            // Default for bar series is 3000\.  
            animation: {
                speed: 2500
            },
            barWidth: 15,
            barPadding: -15,
            barMargin: 0,
            highlightMouseOver: false

        }
    },
    axesDefaults: {
        tickRenderer: $.jqplot.CanvasAxisTickRenderer,
        tickOptions: {
            angle: 30
        },
        showTicks: false
    },
    axes: {
        xaxis: {
            renderer: $.jqplot.DateAxisRenderer,
            tickInterval: '1 day'

        },
        x2axis: {
            renderer: $.jqplot.DateAxisRenderer
        }

    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:41:04.240

不要忘记包含所需的插件（barRenderer）：

`<script class="include" src=" http://www.jqplot.com/deploy/dist/plugins/jqplot.barRenderer.min.js"></script>`

**编辑**

[小提琴上的](http://jsfiddle.net/gkp2N/6/)工作示例

# c# - 是否可以将 Windows 窗体中的表格用作矩阵？

> ID：15231456
> 
> 赞同：3
> 
> 时间：2013-03-05T18:33:53.427
> 
> 标签：c#, winforms, matrix

我正在尝试创建一个简单的 6X8 单元格矩阵，用户可以在其中单击一个单元格并将其打开或关闭，黑色或白色。我一直在尝试使用 windows 窗体控件并查看了数据网格控件，但到目前为止，我看不到使用 Winforms 工具箱中的任何内容来创建矩阵的方法。

我创建了表格，但看不到单独设置每个单元格的样式，或者对每个单元格使用 onclick 事件。这可能吗，如果没有，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:02:35.597

我认为您可以在 WinForms 中使用 DataGridView 控件。您可以设置所需的列数和行数。例如，对于列

```
m_Grid.ColumnCount = 5; 
```

对于行

```
m_Grid.Rows.Add(); 
```

您可以处理 CellClick、CellDoumleClick 或其他事件并使用参数 DataGridViewCellEventArgs 和它的字段。例如，

```
m_Grid.Rows[e.RowIndex].Cells[e.ColumnIndex].Style.BackColor = Color.Red; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:03:45.837

这是一个在运行时创建标签的解决方案。您需要一个面板来托管您的“矩阵”和一个按钮，所有这些都具有默认名称。该按钮将在单击时绘制一个棋盘格，您可以通过单击每个单元格来翻转颜色。

```
public partial class Form1 : Form
{
  public Form1()
  {
    InitializeComponent();
  }

  const int RowCount = 6;
  const int ColumnCount = 8;
  private void button1_Click(System.Object sender, System.EventArgs e)
  {
    for (int i = 0; i < RowCount; i++)
    {
      for (int j = 0; j < ColumnCount; j++)
      {
        Label lbl = new Label();
        lbl.Size = new Size(20, 20);
        lbl.Location = new Point(i * 20, j * 20);
        lbl.BackColor = (i + j) % 2 == 0 ? Color.Black : Color.White;
        lbl.Click += lbl_Click;
        panel1.Controls.Add(lbl);
      }
    }

    MessageBox.Show(CountCellsOfColor(Color.Black).ToString());
  }

  private int CountCellsOfColor(Color color)
  {
    int count = 0;
    foreach (Label lbl in panel1.Controls.OfType<Label>())
    {                
      if (lbl.BackColor == color) count += 1;
    }
    return count;
  }

  private void lbl_Click(object sender, System.EventArgs e)
  {
    Label lbl = (Label)sender;
    Color color = lbl.BackColor;
    if (color == System.Drawing.Color.Black)
    {
      color = System.Drawing.Color.White;
    }
    else
    {
      color = System.Drawing.Color.Black;
    }
    lbl.BackColor = color;
  }   
} 
```

VB.NET 版本（原始版本，后来转换为 C#，但决定保留以备不时之需）：

```
Option Strict On
Public Class Form1
  Const RowCount As Integer = 6
  Const ColumnCount As Integer = 8

  Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    For i = 0 To RowCount - 1
      For j = 0 To ColumnCount - 1
        Dim lbl As New Label
        lbl.Size = New Size(20, 20)
        lbl.Location = New Point(i * 20, j * 20)
        lbl.BackColor = If((i + j) Mod 2 = 0, Color.Black, Color.White)
        AddHandler lbl.Click, AddressOf lbl_Click
        Panel1.Controls.Add(lbl)
      Next
    Next

    MessageBox.Show(CountCellsOfColor(Color.Black))
  End Sub

  Private Function CountCellsOfColor(color As Color) As Integer
    Dim count As Integer = 0
    For Each lbl In Panel1.Controls.OfType(Of Label)()
      If lbl.BackColor = color Then count += 1
    Next
    Return count
  End Function

  Private Sub lbl_Click(sender As Object, e As System.EventArgs)
    Dim lbl As Label = CType(sender, Label)
    Dim color As Color = lbl.BackColor
    If color = Drawing.Color.Black Then
      color = Drawing.Color.White
    Else
      color = Drawing.Color.Black
    End If
    lbl.BackColor = color
  End Sub
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:42:30.087

您最好使用一组放置运行时的标签：

```
List<Label> lables=new List<Label>();

var a = new Label();
labels.Add(a);
//... set positions and sizes
a.AutoSize=False;

this.Controls.Add(a); 
```

有了这个，您以后可以索引标签数组中的每个标签以匹配您的行/列位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:11:29.787

这是我的 WPF 方法：

```
<Window x:Class="WpfApplication4.Window13"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window13" Height="300" Width="300">
    <ItemsControl ItemsSource="{Binding}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Rows="8" Columns="6" IsItemsHost="True"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <DataTemplate.Resources>
                    <Storyboard x:Key="ToBlack" TargetName="RctFill" Duration="00:00:00.5">
                        <ColorAnimation From="White" To="Black" Duration="00:00:00.5" Storyboard.TargetProperty="Color"/>
                    </Storyboard>
                    <Storyboard x:Key="ToWhite" TargetName="RctFill" Duration="00:00:00.5">
                        <ColorAnimation From="Black" To="White" Duration="00:00:00.5"  Storyboard.TargetProperty="Color"/>
                    </Storyboard>
                </DataTemplate.Resources>
                <Button Command="{Binding ToggleCommand}">
                    <Button.Template>
                        <ControlTemplate>
                            <Rectangle Stroke="Black" StrokeThickness="1" x:Name="Rct">
                                <Rectangle.Fill>
                                    <SolidColorBrush Color="White" x:Name="RctFill"/>
                                </Rectangle.Fill>
                            </Rectangle>
                            <ControlTemplate.Triggers>
                                <DataTrigger Binding="{Binding State}" Value="True">
                                    <DataTrigger.EnterActions>
                                        <BeginStoryboard Storyboard="{StaticResource ToBlack}"/>
                                    </DataTrigger.EnterActions>
                                    <DataTrigger.ExitActions>
                                        <BeginStoryboard Storyboard="{StaticResource ToWhite}"/>
                                    </DataTrigger.ExitActions>
                                </DataTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

后面的代码：

```
using System;
using System.Linq;
using System.Windows;
using System.ComponentModel;

namespace WpfApplication4
{
    public partial class Window13 : Window
    {
        public Window13()
        {
            var rnd = new Random();
            InitializeComponent();
            DataContext = Enumerable.Range(0, 48).Select(x => new Square() {State = rnd.Next(0,5) > 3});
        }
    }

    public class Square:INotifyPropertyChanged
    {
        private bool _state;
        public bool State
        {
            get { return _state; }
            set
            {
                _state = value;
                NotifyPropertyChanged("State");
            }
        }

        private DelegateCommand _toggleCommand;
        public DelegateCommand ToggleCommand
        {
            get { return _toggleCommand ?? (_toggleCommand = new DelegateCommand(x => State = !State)); }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

我使用来自 WPFTutorial.Net的[DelegateCommand](http://wpftutorial.net/DelegateCommand.html)

只需将我的代码复制并粘贴到 a 中`File -> New Project -> WPF Application`，然后自己查看结果。您还需要`DelegateCommand`我链接到的定义。

从黑色到白色的过渡是动画的，您还可以扩展我的示例以动画其他属性，在每个单元格中放置您想要的任何 UI。此外，您将意识到这完全独立于分辨率，并且调整窗口大小也会调整`UniformGrid`所有网格单元格的大小。

如果你需要把它放在一个 winforms 应用程序中，你需要使用[`ElementHost`](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)

# unit-testing - 如何使用 MS Fakes 为索引属性创建存根

> ID：15231460
> 
> 赞同：2
> 
> 时间：2013-03-05T18:34:02.583
> 
> 标签：unit-testing, microsoft-fakes

我有一个需要模拟的接口，它的索引器属性部分看起来像这样。

```
 public interface MyInterface{         
     string this[string name] {get;set;};
     string this[int index] {get;set;};
 } 
```

我想模拟接口，以便上面的 name 和 index 的某些值返回我提供的值。如何使用 Microsoft Fakes Framework 实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T23:46:13.360

您可以简单地利用 Microsoft Fakes 在测试中存根此功能。右键单击您的目标程序集（包含接口定义的项目），然后在测试项目的引用中选择添加 Fakes 程序集。

生成的假程序集将是“TargetAssembly.Fakes”。在该程序集中，您将有一个类型为“StubMyInterface”的方法，“ItemGetInt32”、“ItemGetString”、“ItemSetInt32String”、“ItemSetStringString”，这是 3 个 get/set 方法的存根实现。

您可以在测试中使用它们，如下所示。

```
[TestMethod]
public void MyInterfaceTest()
{
    var stub = new StubMyInterface()
    {
        ItemGetInt32 = (x) => { return "teststring"; }
    };

    MyInterface SUT = stub;
    var result = SUT[47];

    Assert.AreEqual("teststring", result);
} 
```

# mysql - Zend Framework 2：左连接问题

> ID：15231464
> 
> 赞同：3
> 
> 时间：2013-03-05T18:34:16.163
> 
> 标签：mysql, join, zend-framework2

```
public function getInterests($userID) {
    $result = $this->tableGateway->select(function (Select $select) use ($userID) {
                $select->join('interests', 'users_interests.interest_id = interests.interest_id', array('*'), 'left');
                $where = new Where();
                $where->equalTo('user_id', $userID);
                $select->where($where);
            });

    return $result;
} 
```

这是我的方法。它只是从 users_interests 中选择 user_id = $userID 的所有记录并加入“interests”表。到目前为止，一切都很好，但是当尝试显示获取的结果时，连接表中的字段不存在。这是 $result 的转储：

```
Zend\Db\ResultSet\ResultSet Object
(
[allowedReturnTypes:protected] => Array
    (
        [0] => arrayobject
        [1] => array
    )

[arrayObjectPrototype:protected] => Object\Model\UsersInterests Object
    (
        [settings_id] => 
        [user_id] => 
        [interest_id] => 
    )

[returnType:protected] => arrayobject
[buffer:protected] => 
[count:protected] => 2
[dataSource:protected] => Zend\Db\Adapter\Driver\Pdo\Result Object
    (
        [statementMode:protected] => forward
        [resource:protected] => PDOStatement Object
            (
                [queryString] => SELECT `users_interests`.*, `interests`.* FROM `users_interests` LEFT JOIN `interests` ON `users_interests`.`interest_id` = `interests`.`interest_id` WHERE `user_id` = :where1
            )

        [options:protected] => 
        [currentComplete:protected] => 
        [currentData:protected] => 
        [position:protected] => -1
        [generatedValue:protected] => 0
        [rowCount:protected] => 2
    )

[fieldCount:protected] => 6
[position:protected] => 
) 
```

我非常需要这方面的帮助，因为我应该在周日之前完成我的项目。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-10T18:03:07.910

您可以使用以下内容来应用左连接。$select::JOIN_LEFT 而不是“左”。

```
public function getInterests($userID) {
    $result = $this->tableGateway->select(function (Select $select) use ($userID) {
        $select->join('interests', 'users_interests.interest_id = interests.interest_id', array('*'), $select::JOIN_LEFT);
        $where = new Where();
        $where->equalTo('user_id', $userID);
        $select->where($where);
    });

    return $result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:45:22.993

看来您在联接的 WHERE 子句中有问题。这也显示在此处的错误中：

```
 [queryString] => SELECT `users_interests`.*, `interests`.* FROM `users_interests` LEFT JOIN  .
 `interests` ON `users_interests`.`interest_id` = `interests`.`interest_id` 
 WHERE `user_id` = :where1 
```

尝试这个：

```
$select->from($this->table)
       ->join('interests', 'users_interests.interest_id = interests.interest_id',
         array('*'), 'left');   
$where = new  Where();
$where->equalTo('user_id', $userID) ;
$select->where($where); 
```

我不能完全按照你的代码，就像这里：

```
$this->tableGateway->select(function (Select $select) use ($userID) { 
```

但是，这里有一篇[***非常好的文章***](http://samsonasik.wordpress.com/2012/08/14/zend-framework-2-zenddbsql-join-tables/)。我认为，您可以稍微简化代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T13:39:06.953

我以前写过这个，也许它也会对你有所帮助。 [具有多个 FROM 表的 TableGateway](https://stackoverflow.com/questions/14354802/tablegateway-with-multiple-from-tables/14371056#14371056)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T09:41:20.607

您是否对结果集进行了迭代？您可以看到有两个匹配的行：

```
[rowCount:protected] => 2 
```

您有一个 ResultSet 对象，但在请求之前它不会加载任何行，当您遍历该对象时，它们是“延迟加载”的。

您可以强制结果集为您获取所有内容：

```
var_dump($resultSet->toArray()); // force load all rows 
```

或遍历 ResultSet：

```
foreach($resultset as $row) {
    var_dump($row); // each row loaded on request
} 
```

# objective-c - objc中的“pi”和“M_PI”有什么区别

> ID：15231466
> 
> 赞同：15
> 
> 时间：2013-03-05T18:34:23.090
> 
> 标签：objective-c, math, pi

在我的代码中包含一些数学，我偶然发现了常量“PI”。至少在我的 Xcode 4.6 版中，我可以使用其中任何一个。`pi`但是和有什么区别`M_PI`？该文档在该主题上有点紧张。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-05T18:55:54.600

`pi`在“CarbonCore.framework”标头中定义为

```
extern const double_t pi  __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_0, __MAC_10_8, __IPHONE_NA, __IPHONE_NA); 
```

但标记为“已弃用”。我认为这是旧版 Carbon 框架的遗留物。

`M_PI`被定义为宏

```
#define M_PI   3.14159265358979323846264338327950288 
```

POSIX 标准的[`math.h`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/math.h.html) 一部分。

这些值是相同的，但您应该`M_PI`出于可移植性的原因使用。

（对于*Swift，*请参阅[如何在 Swift 中获取数学 PI 常数](https://stackoverflow.com/questions/26324050/how-to-get-mathemical-pi-constant-in-swift.)）

# xamarin.ios - 与带有 MonoTouch 对话框的模态 RadioGroup 部分一起使用时，无法更新 RootElement 的文本

> ID：15231472
> 
> 赞同：1
> 
> 时间：2013-03-05T18:34:40.053
> 
> 标签：xamarin.ios, monotouch.dialog

我正在使用创建`iPad`应用程序，`MonoTouch 2.10.11`并且想`MonoTouch.Dialog`在表单上创建一些可编辑字段。其中一个字段将使用 a`RadioGroup`允许用户从选项列表中进行选择。的默认行为`M.T.D`是在现有表格上显示选择列表表格。这对`iPhone`布局很有用，但是在这个`iPad`表单上，表格只在表单的一小块区域上，并且导航栏在表单中间看起来很奇怪。我想将选择显示为全屏模式，用户将点击“返回”按钮以返回带有所选项目的前一个表单。

我创建了一个这样的新`RootElement`后代类：

```
public class ModalRootElement : RootElement 
{    
    public override void Selected (DialogViewController dvc, UITableView tableView, NSIndexPath path)
    {
        tableView.DeselectRow (path, false);
        UIViewController uIViewController = this.MakeViewController ();
        this.PrepareDialogViewController (uIViewController);
        dvc.PresentViewController (uIViewController, true, null);
    }

    protected override void PrepareDialogViewController(UIViewController dvc)
    {
        base.PrepareDialogViewController(dvc);

        UIButton button = UIButton.FromType (UIButtonType.RoundedRect);
        button.Frame = new RectangleF (5, 5, 80, 20);
        button.SetTitle ("back", UIControlState.Normal);
        button.TouchUpInside += delegate {
            DialogViewController d = dvc as DialogViewController;

            (d.Root as ModalRootElement).TableView.ReloadData ();

            d.DeactivateController(true);
        };
        dvc.View.AddSubview (button);
    }
} 
```

该表使用以下代码实现：

```
var _status = new ModalRootElement("Status", new RadioGroup("status", -1)) {
    (new Section() {
        new RadioElement("New", "status"),
        new RadioElement("In process", "status"),
        new RadioElement("Rejected", "status"),
        new RadioElement("Deferred", "status"),
        new RadioElement("Transferred", "status"),
        new RadioElement("Unknown", "status"),
        new RadioElement("Complete", "status")
    })
};

var _odom = new EntryElement ("Odometer", "current odom", "");
_odom.KeyboardType = UIKeyboardType.DecimalPad;
_odom.TextAlignment = UITextAlignment.Right;

var root = new RootElement ("back") {
    new Section("") {
        _status,
        _odom
    }
};

_dvc = new DialogViewController(root);
_nav = new UINavigationController (_dvc);
_nav.SetNavigationBarHidden (true, false); 
```

当我运行应用程序时，我可以深入了解`RadioGroup`并进行选择。当我单击添加到视图中的后退按钮时，模式视图关闭并且对象`RadioSelected`的`ModalRootElement`属性设置正确，但不显示文本。

如果我将`Selected()`方法更改为 call`dvc.ActivateController`而不是`PresentViewController`，则`ModalRootElement`显示正确的文本，但`RadioGroup`表格的大小错误。当您使用而不是时，有没有办法让`RootElement`显示正确的文本？`PresentViewController``ActivateController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T13:18:27.217

我认为你需要一个 Root.Reload() 调用。

# ios - 如何防止 Xcode 4.5 允许 OpenGL ES2 调用

> ID：15231473
> 
> 赞同：0
> 
> 时间：2013-03-05T18:34:45.747
> 
> 标签：ios, opengl-es, xcode4.5

我只包含 OpenGL ES1 头文件，但我能够使用以下行成功编译我的项目：

```
glReleaseShaderCompiler(); 
```

Xcode 4.5 是否在幕后偷偷用 ES2 头文件替换 ES1 头文件？我如何能够准确检查构建过程中包含哪些标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:55:20.187

也许它有助于为 armv6 编译或将部署目标设置为 ios 4。

只是一个建议，不知道它是否有效。

# php - 致命错误：在第 8 行的 /home4/msaraiva/public_html/test.php 中的非对象上调用成员函数 find()

> ID：15231480
> 
> 赞同：-1
> 
> 时间：2013-03-05T18:35:22.660
> 
> 标签：php, parsing, find

我有这个简单的解析器，我正试图让它工作。但是我收到致命错误：在第 8 行错误的 /home4/msaraiva/public_html/test.php 中的非对象上调用成员函数 find() 错误，每个都在第一个。但是：在这个网址上[http://jantes.rupteur.com/jantes-alu/Alfa-Romeo-145](http://jantes.rupteur.com/jantes-alu/Alfa-Romeo-145)（只有 78 条记录）效果很好，但是当我去[http://jantes.rupteur.com/jantes- alu/Alfa-Romeo-159](http://jantes.rupteur.com/jantes-alu/Alfa-Romeo-159)有 399 条记录，解析器将我带到一个致命错误，我尝试了一切，但它不起作用。PS：所有页面都有相同的html结构

谢谢大家

```
<?php
 include_once('simple_html_dom.php');

    $html=file_get_html("http://jantes.rupteur.com/jantes-alu/Alfa-Romeo-145");

 foreach ($html ->find('td[valign=top]') as $t){
       foreach ($t ->find('h1') as $k)
          foreach ($t ->find('strong') as $g)
            echo $k;
            echo $g .'<br>';
       foreach ($html ->find('td[valign=top]') as $f)
           $num = explode('/>',$f);
           echo strip_tags($num[1]);           
 }
 echo '<br>';
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:51:58.217

可能会发生这种情况，因为默认情况下，如果您正在解析的 html 代码长度大于 600000，则`file_get_html`函数会返回。您的第二页非常大，因此请增加simple_html_dom.php 文件中的常量。`false``MAX_FILE_SIZE`

```
define('MAX_FILE_SIZE', 9999999); 
```

听听@PeeHaa 和@Chris 的评论：没有什么可以被“遗忘”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T09:07:23.133

以防万一有人遇到这个

```
function get_data($url)
{
  $ch = curl_init();
  $timeout = 5;
  curl_setopt($ch,CURLOPT_URL,$url);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}

$url = "your url";

$htmlraw = "";
// this is the important bit (curl function is irrelevant)
$htmlraw = get_data($url); 
// use the str_get_html function instead.
$html = str_get_html($htmlraw); 
```

希望对某人有所帮助！

# math - 做一个图表来突出推特关注者的有用性

> ID：15231481
> 
> 赞同：0
> 
> 时间：2013-03-05T18:35:23.437
> 
> 标签：math, twitter, graph, twitter-follow

我正在写一篇博文，讲述如果你在 Twitter 上关注太多人，他们最终会变得不那么有用（因为你有太多推文无法浏览/错过重要更新）。

因此，您关注的用户数量与他们的有用程度之间存在直接关联。如果你关注的太多，有用性就会下降，你需要找到合适的数量。

我试图在图表中模糊地表示这一点（没有具体点）

我可以想象该图有一个 X - 有用性是水平的，而您关注的用户数是垂直的。因此，最佳位置将在中间。

这是代表我正在尝试做的事情的好/正确的方式吗？我可以使用不同的图形类型来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T15:53:57.553

将更合乎逻辑 - 至少在西方世界 - 绘制 X（水平）轴上的朋友数和 Y（垂直）轴上的有用性，我可以在折线图中看到这一点。

该图表将帮助读者了解这个想法，但我怀疑您是否能够以相关的方式衡量“有用性”。

它的价值也会根据 twitter 朋友的个人资料而有所不同：青少年和小众专业人士对 twitter 的使用不同，因此不会发布相同数量的推文。因此，我不会在 X 轴上使用实际的追随者数量，而是只在左侧显示“少数追随者”，在右侧显示“很多朋友”。

# fortran - Fortran 中未共享的 OpenMP 和共享变量

> ID：15231482
> 
> 赞同：2
> 
> 时间：2013-03-05T18:35:24.640
> 
> 标签：fortran, openmp, shared

我遇到了我无法理解的 OpenMP 和共享变量问题。我所做的一切都在 Fortran 90/95 中。

这是我的问题：我在我的`main`程序中定义了一个并行区域，带有子句`DEFAULT(SHARED)`，我在其中调用了一个执行一些计算的子例程。我有一个分配的局部变量（一个数组）并在其上进行计算。我期待这个数组是共享的（因为该`DEFAULT(SHARED)`子句），但似乎并非如此。

这是我正在尝试做的一个例子，它重现了我得到的错误：

```
program main
  !$ use OMP_LIB
  implicit none

  integer, parameter :: nx=10, ny=10
  real(8), dimension(:,:), allocatable :: array

  !$OMP PARALLEL DEFAULT(SHARED)
  !$OMP SINGLE
  allocate(array(nx,ny))
  !$OMP END SINGLE

  !$OMP WORKSHARE
  array = 1.
  !$OMP END WORKSHARE

  call compute(array,nx,ny)

  !$OMP SINGLE
  deallocate(array)
  !$OMP END SINGLE
  !$OMP END PARALLEL

contains
  !=============================================================================
  ! SUBROUTINES
  !=============================================================================
  subroutine compute(array, nx, ny)
    !$ use OMP_LIB
    implicit none

    real(8), dimension(nx,ny) :: array
    integer :: nx, ny
    real(8), dimension(:,:), allocatable :: q
    integer :: i, j

    !$OMP SINGLE
    allocate(q(nx,ny))
    !$OMP END SINGLE

    !$OMP WORKSHARE
    q = 0.
    !$OMP END WORKSHARE

    print*, 'q before: ', q(1,1)

    !$OMP DO SCHEDULE(RUNTIME)
    do j = 1, ny
       do i = 1, nx
          if(mod(i,j).eq.0) then
             q(i,j) = array(i,j)*2.
          else
             q(i,j) = array(i,j)*0.5
          endif
       end do
    end do
    !$OMP END DO

    print*, 'q after: ', q(1,1)

    !$OMP SINGLE
    deallocate(q)
    !$OMP END SINGLE

  end subroutine compute
  !=============================================================================
end program main 
```

当我这样执行它时，会出现分段错误，因为本地数组`q`是在一个线程上分配的，而不是在其他线程上分配的，当其他线程尝试在内存中访问它时，它会崩溃。

如果我摆脱了分配`SINGLE`本地数组的区域`q`（尽管有时它会崩溃，这是有道理的，如果不同的线程尝试分配它而已经是这种情况（实际上它让我感到困惑，为什么它不会每次都崩溃））但是那么很明显，该数组好像`q`是私有的（因此一个线程返回给我预期值，而其他线程返回给我其他东西）。

`q`虽然我用子句声明了我的并行区域，但为什么不共享数组确实让我感到困惑`DEFAULT(SHARED)`。而且由于我在一个孤立的子例程中，我不能明确地声明`q`为共享，因为它只在子例程中知道`compute`......到目前为止我一直遇到这个问题，我找不到解决方法。

正常吗？我应该期待这种行为吗？有解决方法吗？我错过了一些明显的东西吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T18:52:42.693

`q`就 OpenMP 而言，是“在区域内但不在构造内”的实体。本地子例程`q`位于并行构造期间调用的过程中，但`q`其本身在词法上不会出现在 PARALLEL 和 END PARALLEL 指令之间。

然后，OpenMP 中此类实体的数据共享规则规定 q 是私有的。

DEFAULT(SHARED) 等数据共享子句仅适用于出现在构造本身中的事物（词法上出现在 PARALLEL 和 END PARALLEL 之间的事物）。（它们通常不适用于区域中的事物 - 在区域中调用的过程可能已经单独编译，并且可能在任何并行构造之外调用。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:52:29.597

该数组`q`是在被调用的子程序内部定义的。每个线程独立调用这个子程序，因此每个线程都有自己的副本。外部子程序中的`shared`指令不能改变这一点。尝试用`save`属性声明它。

# sql - 如何在 SSIS 中为 Excel 文件设置动态文件路径？

> ID：15231486
> 
> 赞同：5
> 
> 时间：2013-03-05T18:35:31.690
> 
> 标签：sql, ssis

文件的名称会根据月份而变化。每个月你都有一个新文件。

```
I:\Test\Data_201303.xlsx 
```

如何设置可使用可变文件路径的连接管理器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T18:40:02.003

在连接管理器上查找“表达式”属性。这就是您将其设置为 USER::VariableName 的地方。

更多详细信息：如果您“编辑”连接管理器，它将向您显示编辑窗口。那不是你想要的。查看“属性”窗口，您可以在其中找到“表达式”条目，位于一个空框前面。

单击空框，它将显示一个带有三个点的按钮。单击该按钮。这会调出“属性表达式编辑器”。左侧有一个带有“ConnectionString”等属性的下拉列表。在右侧，还有一个带有三个点的按钮。单击该按钮以拉出“表达式生成器”。如果您声明了任何变量，您会发现它们列在左上角，例如 User::VariableName，然后您可以将它们拖到表达式框中，它们将显示为 @[User::VariableName] .

不明显，但可行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T19:04:01.597

您需要使用 SSIS 包变量为 Excel 连接管理器 的*`ServerName`*or*`ExcelFilePath`*属性设置表达式以动态修改。*`ConnectionString`*

以下是一些处理循环多个 Excel 文件的 SO 答案：

[如何遍历 Excel 文件并使用 SSIS 包将它们加载到数据库中？](https://stackoverflow.com/questions/7411741/how-to-loop-through-excel-files-and-load-them-into-a-database-using-ssis-package)

[如何将具有不同名称和相同架构的 Excel 文件导入数据库？](https://stackoverflow.com/questions/6190578/how-to-import-excel-files-with-different-names-and-same-schema-into-database)

# android - 操作栏选项卡必须有回调

> ID：15231489
> 
> 赞同：3
> 
> 时间：2013-03-05T18:35:33.720
> 
> 标签：android, layout, android-fragments, android-actionbar, illegalstateexception

我正在尝试在我的应用程序中实现一个 ActionBar。我的代码很好，但是当我尝试加载项目时，它给了我这个错误：

> 原因：java.lang.IllegalStateException：操作栏选项卡必须有回调，并强制关闭

如何实现回调？

```
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.os.Bundle;

public class MainResource extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        Tab tabA = actionBar.newTab();
        tabA.setText("Tab A");
        tabA.setTabListener(new TabListener<Categories>(this, "Tag A", Categories.class));
        actionBar.addTab(tabA);

        Tab tabB = actionBar.newTab();
        tabB.setText("Tab B");
        tabB.setTabListener(new TabListener<Favourites>(this, "Tag B", Favourites.class));
        actionBar.addTab(tabB);

        Tab tabC = actionBar.newTab();
        tabC.setText("Tab C");
        tabC.setTabListener(new TabListener<ThisWeek>(this, "Tag C", ThisWeek.class));
        actionBar.addTab(tabC);

        Tab tabD = actionBar.newTab();
        tabC.setText("Tab D");
        tabC.setTabListener(new TabListener<Estore>(this, "Tag D", Estore.class));
        actionBar.addTab(tabD);

        if (savedInstanceState != null) {
            int savedIndex = savedInstanceState.getInt("SAVED_INDEX");
            getActionBar().setSelectedNavigationItem(savedIndex);
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        // TODO Auto-generated method stub
        super.onSaveInstanceState(outState);
        outState.putInt("SAVED_INDEX", getActionBar().getSelectedNavigationIndex());
    }

    public static class TabListener<T extends Fragment> implements ActionBar.TabListener{
        private final Activity myActivity;
        private final String myTag;
        private final Class<T> myClass;

        public TabListener(Activity activity, String tag, Class<T> cls) {
            myActivity = activity;
            myTag = tag;
            myClass = cls;
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {

            Fragment myFragment = myActivity.getFragmentManager().findFragmentByTag(myTag);

           // Check if the fragment is already initialized
           if (myFragment == null) {
               // If not, instantiate and add it to the activity
               myFragment = Fragment.instantiate(myActivity, myClass.getName());
               ft.add(android.R.id.content, myFragment, myTag);
           } else {
               // If it exists, simply attach it in order to show it
               ft.attach(myFragment);
           }
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            Fragment myFragment = myActivity.getFragmentManager().findFragmentByTag(myTag);
            if (myFragment != null) {
                // Detach the fragment, because another one is being attached
            ft.detach(myFragment);
            }
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:49:36.273

您将“this”（当前活动对象）设置为侦听器：

```
tabA.setTabListener(new TabListener<Categories>(this, "Tag A", Categories.class)); 
```

作为一个监听器，活动应该实现适当的接口。所以：

*   以这种方式声明您的活动：

```
    公共类 MainResource 扩展 Activity 实现 TabListener

```

*   在活动中实现 TabListener 接口的方法（您的 IDE 将通过建议“实现方法...”来帮助您）

也许您的代码还有一些问题，但是您肯定需要将正确的对象分配为 TabListener 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T14:57:51.967

Tab tabD = actionBar.newTab();

```
 tabC.setText("Tab D");

    tabC.setTabListener(new TabListener<Estore>(this, "Tag D", Estore.class)); 
```

将tabC更改为tabD，问题就解决了。

# ios - iOS：在后台持续播放声音

> ID：15231492
> 
> 赞同：1
> 
> 时间：2013-03-05T18:35:47.507
> 
> 标签：ios, avaudioplayer, background-process

我想知道是否有办法在预定的时间内播放声音或音乐，即使应用程序被置于后台。

例如，假设声音长达 30 分钟，但只想播放 10 分钟，如何在后台暂停声音。或者有没有办法告诉 AVAudioPlayer 循环 0.333 次？

有没有更好的类来代替 AVAudioPlayer 来实现这一点？

编辑：到目前为止，我已经搜索了 SO 和 Google 无济于事。并且一直在阅读 Apple 的文档。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:47:37.707

两种解决方案：-

-1。您可以拥有本地和推送通知

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

通知可以在发送时播放声音。

-2。您可以让您的应用程序在后台运行并播放声音

[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

iOS/iTunes 规则限制了您可以在后台执行的操作以通过审核，但它提到了播放音乐。

# jquery - 粘性页脚不会在请求的地方停止，在底部反弹

> ID：15231496
> 
> 赞同：0
> 
> 时间：2013-03-05T18:36:04.623
> 
> 标签：jquery, html, css

我正在使用 scrollToFixed 将页脚粘贴到页面底部，直到它碰到实际的页脚，然后它应该停止。但是，它会滚动到页面底部并越过页脚，然后捕捉到页脚顶部。任何想法为什么会发生此错误？这是实际站点的链接： http: [//client.analog.la/ret5/](http://client.analog.la/ret5/)

```
jQuery('#scroller').scrollToFixed({
    bottom: 0,
    limit:  function() { 
    var limit = 0;
        if (jQuery(window).height() > jQuery('#page').height()) {
            jQuery('#colophon').css({'position':'fixed','bottom':'0'});
            jQuery('#scroller').css({'position':'fixed','bottom':'40px'});
        }else {
             jQuery('#colophon').css({'position':'static'});
             limit = jQuery('#scroller').offset().top + 40;
        } return limit;
        }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:37:33.110

你应该减去页脚的高度

在我的浏览器上它很好......对于#scroller，但内容一直在底部。您使用的是哪个版本/浏览器。

# c++ - 局部变量在超出范围时删除另一个变量的内存

> ID：15231501
> 
> 赞同：5
> 
> 时间：2013-03-05T18:36:33.360
> 
> 标签：c++, destructor, local-variables

在设计一个动态分配内存的类时，我遇到了以下关于内存分配的问题。我希望你们中的一些人能够指出我应该如何以更好的方式设计我的课程的正确方向。我的类动态分配内存，因此也在其析构函数中删除它。

为了说明问题，请考虑以下愚蠢的类声明：

```
class testClass{
    int* data;
public:
    testClass(){
        data = new int;
        *data = 5;
    }
    ~testClass(){
        delete data;
    }
}; 
```

到现在为止还挺好。现在假设我在 main 中创建了这些对象之一

```
int main(){
    testClass myObject;
    return 0;
} 
```

当然仍然没有问题。但是，假设我现在编写了一个函数，该函数将 testClass 对象作为输入并从 main 中调用它。

```
void doNoting(testClass copyOfMyObject){
    //do nothing
}
int main(){
    testClass myObject;
    doNothing(myObject);
    return 0;
} 
```

这一次，该函数创建了一个局部变量 copyOfMyObject，它只是 myObject 的一个副本。然后，当到达该函数的末尾时，该本地对象会自动调用其析构函数，该析构函数会删除其数据指针指向的内存。但是，由于这是 myObject 的数据指针所指向的同一块内存，因此 myObject 在此过程中无意中删除了它的内存。我的问题是：设计课程的更好方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T18:39:02.943

当您调用 时`doNothing()`，它会复制您的`testClass`对象，因为它是按值传递的。不幸的是，当这个副本被销毁时，它会调用析构函数，它会删除`data`原始实例使用的相同内容`testClass`。

您想了解“复制构造函数”和“按引用传递”。也就是说，您应该为您的类定义一个复制构造函数，以便在复制一个实例时，它会为其`data`成员分配自己的内存。此外，您可以传递指针或对 的引用，而不是按值传递`doNothing()`，这样就不会进行复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:40:27.883

您应该创建一个*复制构造函数*，即以下形式的构造函数：

```
testClass::testClass(const testClass &o)
{ 
    // appropriate initialization here
} 
```

在您的情况下，“*适当的初始化*”可能意味着分配一个新的内存块并将内存从旧块复制到新块中。或者它可能意味着进行引用计数。管他呢。

您还应该在 StackOverflow 上阅读更多关于[三法则的信息！](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:41:46.497

这是[权威](http://www.parashift.com/c++-faq/lint-guidelines.html)的指导方针：**具有 {destructor, assignment operator, copy constructor} 的类通常需要全部 3**

您需要一个复制构造函数，它将为您的数据分配一个新的 int，然后将其破坏，但不影响原始数据。

或者，您可以创建一个空白的私有复制构造函数，从而有效地禁用它，强制您的用户通过引用或其他非复制方式进行操作。

# css - 在 Chrome 版本 25.0.1364.152 上显示被用户代理样式表覆盖的属性

> ID：15231503
> 
> 赞同：2
> 
> 时间：2013-03-05T18:36:43.703
> 
> 标签：css, google-chrome

`div { display: block; }` 我已经在opera/firefox/safari 属性上定义了以下css 属性是可以的。在我的 windows 7 chrome 版本 25.0.1364.152 m 用户代理样式表上覆盖它`display: block`（即使它不是我的也可以）但在 vista chrome 版本 25.0.1364.152 和 mac chrome 版本 25.0.1364.152 上，用户代理样式表覆盖`display:none`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T22:20:46.193

如果您安装并激活了 Chrome 插件“ **AdBlock ”，就会发生这种情况。**您可以在浏览器的右上角访问它，然后暂时停用它以查看差异。

![在此处输入图像描述](../Images/9ef79c421451cc09ee59c64437d0ff2b.png)

正如您所提到的，尝试从类名中删除“ad”以避免 AdBlock 隐藏元素。

# python - 类方法的装饰器的一些问题

> ID：15231513
> 
> 赞同：5
> 
> 时间：2013-03-05T18:37:15.277
> 
> 标签：python, python-2.7, decorator, class-method

我有一些代码，我想在 a 上使用装饰器，`classmethod`如下所示：

```
import functools

def mydeco(function):
    @classmethod
    def wrapper(cls):
        return function(cls) 
    return functools.update_wrapper(wrapper, function)
    # return wrapper

class BaseClass(object):
    @classmethod
    @mydeco
    def foo(cls):
        return "42" 

print BaseClass.foo() 
```

当我注释掉`@mydeco`代码行时，即`42`打印文本。当包括这个装饰器时，我有几个问题：

*   当使用更简单的线时，`return wrapper`我得到了错误

    ```
    TypeError: 'classmethod' object is not callable 
    ```

如何正确地做到这一点，即在给定的示例中，返回原始函数而不进行更改。

*   当使用更复杂的调用`return functools.update_wrapper(wrapper, function)`来保留一些原始功能时，我得到了错误

    ```
    AttributeError: 'classmethod' object has no attribute '__module__' 
    ```

我不确定这个错误是否与第一个问题有关，但对我来说它看起来是一个不同的问题。欢迎任何解决这些问题的具体建议。

上面的示例并没有真正“做”某事，它只是显示我遇到的问题的最小可能示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:41:05.603

这对你不起作用有什么原因吗？

```
import functools

def mydeco(function):
    def wrapper(*args, **kwargs):
        return function(*args, **kwargs) 
    return functools.update_wrapper(wrapper, function)

class BaseClass(object):
    @classmethod
    @mydeco
    def foo(cls):
        return "42" 

print BaseClass.foo()
42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T17:40:07.620

刚刚看到一篇关于装饰器的[有趣帖子](http://blog.dscpl.com.au/2014/01/how-you-implemented-your-python.html)，这是解释，但它没有提供解决方法。

> 当在@classmethod 或@staticmethod 周围应用装饰器时，它可能会因异常而失败。这是因为由这些创建的包装器没有被复制的某些属性。

我都不知道如何正确装饰静态/类方法，但是当我遇到类似的异常时，我将执行以下操作之一，只是为了让我的代码在没有任何洞察力的情况下正常工作：

*   更改@mydeco 和@staticmethod 的顺序
*   丢弃@staticmethod

### 更新

这是关于如何正确实现描述符的另一篇[精彩文章](https://github.com/GrahamDumpleton/wrapt/blob/master/blog/02-the-interaction-between-decorators-and-descriptors.md)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-05T18:43:43.293

也许问题出在`@classmethod`前面`def wrapper...`（就像`mydeco`函数定义而不是类定义一样）

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-05T18:59:38.033

```
from functools import wraps

def mydeco(function):
    @wraps(function)
    def wrapper(*args, **kwargs):
        print "Calling Decorated Function"
        return function(*args, **kwargs) 
    #return functools.update_wrapper(wrapper(function), function)
    return wrapper

@mydeco
class BaseClass():
    def foo(self, cls):
        return "42" 

a = BaseClass()
print a.foo(22) 
```

现在可以了

# mysql - #1062 - 键 'PRIMARY' 的重复条目 '87'

> ID：15231514
> 
> 赞同：0
> 
> 时间：2013-03-05T18:37:24.273
> 
> 标签：mysql, phpmyadmin

我对phpmyadmin有一个大问题，

我有两个表，我想在其中添加状态消息，例如 Facebook。

我的第一张桌子我有 ID、用户名和密码

在我的第二个中，我有 id、状态消息、竖起大拇指、竖起大拇指。

现在我想在添加“状态消息”时从用户那里发送外键的 id。

但我只得到这种错误：

```
 # 1062 - Duplicate entry '87 'for key' PRIMARY ' 
```

我尝试编写的工具包

```
 INSERT INTO `notes` (`id`, `note`) VALUES ("87", "hello") 
```

另外很高兴知道我的数据库已经是来自 id = 87 的帖子，但希望能够拥有更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:39:43.030

试试这个，如果 id 是自动递增的，你不必这样做：

```
INSERT INTO `notes` ( `note`) VALUES ("hello") 
```

# openlayers - 在 openlayers.js 中，有没有办法在绘制圆时显示圆的半径？

> ID：15231515
> 
> 赞同：1
> 
> 时间：2013-03-05T18:37:31.157
> 
> 标签：openlayers

我希望能够在地图上绘制一个圆圈，并且在绘制它时，该圆圈的半径出现在圆圈或其他东西的上方。我希望它在我画圆时改变，这样我就可以看到这个半径。有什么办法可以在openlayers中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:17:55.817

一种方法是创建一个**MapToolTip**

我做了一个跟随鼠标在一个偏移位置。基本上它是一个具有绝对位置样式的 div，它会在`mousemove`.

![工具提示](../Images/a9daa79a790edbb75c8e107c0269b632.png)

# 我的代码：

```
var MyAPP = MyAPP || {};

MyAPP.MapToolTip = function (position, text) {

    var content = '<div id="tool_tip" class="dropSheet ui-corner-all"><span id="info_window_text">' + text + '</span></div>';

    var toolTip = $(content).hide().appendTo('div#wrapper div#content_wrapper');
    toolTip.IsVisible = false;

    var mouseMove = function (e) {

        if (toolTip.IsVisible) {
            toolTip.fadeIn()
        }
        toolTip.css('top', e.clientY + 30);
        toolTip.css('left', e.clientX + 30);
        toolTip.IsVisible = true;
    };

    this.Destroy = function () {
        MyAPP.UI.Map.getMap().events.unregister("mousemove", MyAPP.UI.Map.getMap(), mouseMove);
        toolTip.IsVisible = null;
        toolTip.fadeOut();
        toolTip.remove();
        content = null;
        toolTip = null;
        mouseMove = null;
    };

    MyAPP.UI.Map.getMap().events.register("mousemove", MyAPP.UI.Map.getMap(), mouseMove);

    return;

}; 
```

```
.dropSheet {
    background-color: #000000;
    background-image: none;
    opacity: 0.6;
}
div#info_window {
    color: White;
    font-family: Verdana,Arial;
    font-size: 0.6em;
    left: 490px;
    padding: 6px;
    position: absolute;
    top: 100px;
    width: 220px;
    z-index: 99;
} 
```

# windows - 如何判断 Win32_NTLogEvent InsertionString 是否存在？

> ID：15231516
> 
> 赞同：1
> 
> 时间：2013-03-05T18:37:32.483
> 
> 标签：windows, events, vbscript, wmi

我创建了一个 VBScript 来显示我的系统日志内容。如果存在，我还想包括 InsertionString。但是，我似乎无法确定是否存在 InsertionString。这是我的脚本的开头：

```
Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\cimv2")
Set rs = objWMIService.ExecQuery ("Select * from Win32_NTLogEvent Where Logfile = 'System' and SourceName = 'mysource'")
For Each objEvent in rs
    If objEvent.InsertionString exists.... 
```

我尝试了几种变体来确定是否存在 InsertionString，但没有成功，包括：

```
If Not IsNull(objEvent.InsertionString) Then
If objEvent.InsertionString.Length > 0 Then
If GetLength(objEvent.InsertionString(1)) > 0 Then
If objEvent.InsertionString(1).Length > 0 Then 
```

任何建议，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:33:57.263

您在属性名称中拼写错误`InsertionString`应该是[`InsertionStrings`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394226%28v=vs.85%29.aspx). 所以这段代码可以正常工作

```
 If not IsNull(objEvent.InsertionStrings) Then 
```

注意：该属性是一个字符串数组，因此您可以使用循环或and函数`InsertionStrings`来迭代该属性。`For Each`[`UBound`](http://www.w3schools.com/vbscript/func_ubound.asp)[`LBound`](http://www.w3schools.com/vbscript/func_lbound.asp?output=print)

# javascript - Javascript Prototype pub sub 方法超出范围

> ID：15231520
> 
> 赞同：0
> 
> 时间：2013-03-05T18:37:39.503
> 
> 标签：javascript, prototype, publish-subscribe

在我的构造函数中，我订阅了另一个类函数。如何从订阅中调用类方法 show。

```
var MemPortfolio = MemPortfolio || {};
MemPortfolio.Portfolio = function (contentid, thumbclass, featuredid) {
    this.thumbClass = thumbclass;
    this.featuredId = "#" + featuredid;
    var that = this;
    //subscribe to menutile click
    $.subscribe("/menutile/click/portfolio", function (tilename) {
        that.Show();
    });
};

MemPortfolio.Portfolio.prototype.Show = function () {
    alert("show");

} 
```

在我准备好的文档中：/// ///

```
$(document).ready(function () {
    //check exists?
    var tilemenu = new MemTileMenu.Menu("menu", "menuitem", "contentarea");
    var portfolio = new MemPortfolio.Portfolio("contentarea", "thumb", "");
}); 
```

我得到了这个工作 -

```
/// <reference path="jquery-1.7.1.js" />
/// <reference path="jquery.ba-tinypubsub.js" />
var MemPortfolio = MemPortfolio || {};
MemPortfolio.Portfolio = function (contentid, thumbclass, featuredid) {
    this.thumbClass = thumbclass;
    this.featuredId = "#" + featuredid;    
};

MemPortfolio.Portfolio.prototype = {

    show: function () {
        alert("show");
    },
    subscribe: function () {
        var that = this;
        $.subscribe("/menutile/click/portfolio", function (tilename) {
            that.show();
        });
    } 
```

Doc.Ready 在这里：

```
/// <reference path="tilemenu.js" />
/// <reference path="portfolio.js" />
$(document).ready(function () {
    //check exists?
    var tilemenu = new MemTileMenu.Menu("menu", "menuitem", "contentarea");
    var portfolio = new MemPortfolio.Portfolio("contentarea", "thumb", "");
    portfolio.subscribe();
});
    } 
```

谢谢。书呆子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:01:53.927

尝试替换`MemPortfolio.Portfolio.prototype`为`MemPortfolio.prototype.Portfolio`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:33:13.500

这行得通。

```
 /// <reference path="jquery-1.7.1.js" />
    /// <reference path="jquery.ba-tinypubsub.js" />
    var MemPortfolio = MemPortfolio || {};
    MemPortfolio.Portfolio = function (contentid, thumbclass, featuredid) {
        this.thumbClass = thumbclass;
        this.featuredId = "#" + featuredid;    
    };

    MemPortfolio.Portfolio.prototype = {

        show: function () {
            alert("show");
        },
        subscribe: function () {
            var that = this;
            $.subscribe("/menutile/click/portfolio", function (tilename) {
                that.show();
            });
        }
    Doc.Ready here:

    /// <reference path="tilemenu.js" />
    /// <reference path="portfolio.js" />
    $(document).ready(function () {
        //check exists?
        var tilemenu = new MemTileMenu.Menu("menu", "menuitem", "contentarea");
        var portfolio = new MemPortfolio.Portfolio("contentarea", "thumb", "");
        portfolio.subscribe();
    });
        } 
```

# c# - 如何使用响应式扩展实现事件

> ID：15231521
> 
> 赞同：7
> 
> 时间：2013-03-05T18:37:44.683
> 
> 标签：c#, events, system.reactive

反应式扩展允许您使用 轻松订阅事件`Observable.FromEventPattern`，但我找不到任何关于当您*拥有*`IObservable`.

我的情况是这样的：我需要实现一个包含事件的接口。每当我的对象的某个值发生更改时，都应该调用该事件，并且出于线程安全原因，我需要在某个`SynchronizationContext`. 我还应该使用注册时的当前值调用每个事件处理程序。

```
public interface IFooWatcher
{
    event FooChangedHandler FooChanged;
} 
```

使用 Rx 获得一个可以满足我要求的 observable 相当容易`BehaviorSubject`：

```
public class FooWatcher
{
    private readonly BehaviorSubject<Foo> m_subject;
    private readonly IObservable<Foo> m_observable;

    public FooWatcher(SynchronizationContext synchronizationContext, Foo initialValue)
    {
        m_subject = new BehaviorSubject<Foo>(initialValue);
        m_observable = m_subject
            .DistinctUntilChanged()
            .ObserveOn(synchronizationContext);
    }

    public event FooChangedHandler FooChanged
    {
        add { /* ??? */ }
        remove { /* ??? */ }
    }
} 
```

现在我正在寻找一种简单的方法来让`add`and`remove`函数订阅和取消订阅`FooChangedHandler`作为`Observer<Foo>`on传递的内容`m_observable`。我当前的实现看起来与此类似：

```
 add
    {
        lock (m_lock)
        {
            IDisposable disp = m_observable.Subscribe(value);
            m_registeredObservers.Add(
                new KeyValuePair<FooChangedHandler, IDisposable>(
                    value, disp));
        }
    }

    remove
    {
        lock (m_lock)
        {
            KeyValuePair<FooChangedHandler, IDisposable> observerDisposable =
                m_registeredObservers
                    .First(pair => object.Equals(pair.Key, value));
            m_registeredObservers.Remove(observerDisposable);
            observerDisposable.Value.Dispose();
        }
    } 
```

但是，我希望找到一个更简单的解决方案，因为我需要实现其中的几个事件（具有不同的处理程序类型）。我尝试推出自己的通用解决方案，但它产生了一些需要解决的额外问题（特别是，您通常如何使用带有参数的委托`T`），所以我更愿意找到一个现有的解决方案来桥接在这个方向上的差距 - 就像`FromEventPattern`反过来一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:52:29.403

你可以这样做：

```
public event FooChangedHandler FooChanged
{
    add { m_observable.ToEvent().OnNext += value; }
    remove { m_observable.ToEvent().OnNext -= value; }
} 
```

但是，在删除时，我认为您可能只想处理订阅......或者可能从 ToEvent() 获取 Action 并将其存储为成员。未经测试。

编辑：但是，您必须使用 Action 而不是 FooChangedHandler 委托。

编辑 2：这是一个经过测试的版本。但是，我想您需要使用 FooChangedHandler，因为您有一堆这些预先存在的处理程序？

```
void Main()
{
    IObservable<Foo> foos = new [] { new Foo { X = 1 }, new Foo { X = 2 } }.ToObservable();
    var watcher = new FooWatcher(SynchronizationContext.Current, new Foo { X = 12 });
    watcher.FooChanged += o => o.X.Dump();  
    foos.Subscribe(watcher.Subject.OnNext); 
}

// Define other methods and classes here

//public delegate void FooChangedHandler(Foo foo);
public interface IFooWatcher
{
    event Action<Foo> FooChanged;
}

public class Foo {
    public int X { get; set; }
}
public class FooWatcher
{

    private readonly BehaviorSubject<Foo> m_subject;
    public BehaviorSubject<Foo> Subject { get { return m_subject; } }
    private readonly IObservable<Foo> m_observable;

    public FooWatcher(SynchronizationContext synchronizationContext, Foo initialValue)
    {
        m_subject = new BehaviorSubject<Foo>(initialValue);

        m_observable = m_subject
            .DistinctUntilChanged();
    }

    public event Action<Foo> FooChanged
    {
        add { m_observable.ToEvent().OnNext += value; }
        remove { m_observable.ToEvent().OnNext -= value; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:11:28.213

鉴于您已经混合了反应式代码和更普通代码之间的界限，您可以做一个反应性较低的版本。首先声明一个正常的事件模式

```
public event FooChangedHandler FooChanged;

protected void OnFooChanged(Foo)
{
  var temp = FooChanged;
  if (temp != null)
  {  
    temp(new FooChangedEventArgs(Foo));
  }
} 
```

然后在构造函数中简单地将 observable 连接到它

```
m_Observable.Subscribe(foo => OnFooChanged(foo)); 
```

它不是很 Rx，但它非常简单。

# mysql - 连接到 MySQL 数据库时，Hibernate 工具在 Eclipse STS 中出现错误

> ID：15231522
> 
> 赞同：4
> 
> 时间：2013-03-05T18:37:46.533
> 
> 标签：mysql, slf4j, sts-springsourcetoolsuite, hibernate-tools, jboss-tools

我正在使用带有[Hibernate Tools](http://download.jboss.org/jbosstools/updates/stable/) 3.6.0 的 Eclipse STS 3.1.0。我正在尝试连接到 MySQL 5.5 数据库以生成我的 DAO 类。我正在使用 MySQL 驱动程序 mysql-connector-java-5.1.21.jar

在设置休眠控制台文件（休眠工具）时，我能够成功 ping 我的数据库。所以我假设我的驱动程序版本没问题。

设置休眠控制台文件后，当我尝试生成休眠逆向工程文件 (reveng.xml) 时，出现以下错误 -

```
An internal error occurred during: "Fetching children of Database". 
```

我可以在 STS 的错误日志中看到以下堆栈跟踪 -

```
java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
    at org.apache.commons.logging.impl.SLF4JLocationAwareLog.debug(SLF4JLocationAwareLog.java:133)
    at org.hibernate.cfg.reveng.dialect.JDBCMetaDataDialect.getTables(JDBCMetaDataDialect.java:26)
    at org.hibernate.cfg.reveng.JDBCReader.processTables(JDBCReader.java:476)
    at org.hibernate.cfg.reveng.JDBCReader.readDatabaseSchema(JDBCReader.java:74)
    at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter$2.execute(LazyDatabaseSchemaWorkbenchAdapter.java:126)
    at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
    at org.hibernate.console.ConsoleConfiguration.execute(ConsoleConfiguration.java:107)
    at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.readDatabaseSchema(LazyDatabaseSchemaWorkbenchAdapter.java:115)
    at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.getChildren(LazyDatabaseSchemaWorkbenchAdapter.java:65)
    at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:106)
    at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

我正在使用此[链接](http://www.wikihow.com/Generate-Hibernate-Pojo-Classes-from-DB-Tables)中描述的步骤来使用 Hibernate 工具。

将不胜感激任何帮助或指针来解决这个问题。谢谢。

**更新**

我搬到了 STS 3.2.0 并安装了 JBoss Tools 4.0.0

我创建了一个简单的 Maven 快速入门项目，并按照[链接中提到的所有步骤进行操作](http://www.wikihow.com/Generate-Hibernate-Pojo-Classes-from-DB-Tables)

在这个设置中，我可以成功地为数据库表生成实体和 DAO 类。我也不必重新启动 STS。它在第一次尝试中运行良好。

这适用于 MySQL 5.5 和 Oracle 11g。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:39:37.247

我现在已经两次遇到这个问题了。在过去的两周里……我不得不把所有东西都转移到一台已知的机器上，所以我又遇到了它。我第一次通过从 pom.xml 中的任何位置删除对 commons-logging 的任何引用来修复它。我不确定你是否在使用 Maven，但这之前对我来说是半固定的。

```
<exclusions>
     <!-- Exclude Commons Logging in favor of SLF4j -->
     <exclusion>
              <groupId>commons-logging</groupId>
              <artifactId>commons-logging</artifactId>
     </exclusion>
 </exclusions> 
```

正如我们所说，我正在从头开始创建一个新项目，并同时遇到了这个问题。

我在这个问题上发现的信息很少，对我来说这似乎很奇怪，因为您只需使用 hibernate 创建一个新项目就可以很容易地复制它。

我当然需要记录，所以我计划通过记录来解决这个问题。当我这样做时，我会发布我的答案。如果您找到了可行的解决方案，您可以发布吗？谢谢！

# javascript - Raphael / SVG 路径定义是否总是以“M”开头？（如果不是，这样的路径的原点是否总是 0,0？）

> ID：15231523
> 
> 赞同：0
> 
> 时间：2013-03-05T18:37:52.017
> 
> 标签：javascript, svg, raphael

我正在开发一些类似插件的代码，以简化将 Raphael 路径移动到固定位置的过程。

通常，Raphael 路径的第一部分（使用基于 SVG 语法的语法）是一个“M”moveto 命令，用于定义路径的原点。

两个密切相关的问题：

1.  假设任何任意路径都以“M”moveto 命令开头是否合理？（我怀疑答案是否定的）
2.  假设 Q1 为“否”。上面，在遇到一个不以'M'（`somePath.attr(path)[0][0] != 'M'`）开头的Raphael路径数组时，是否可以假设该路径的原点将始终为0,0？因此，从 0,0 开始的任何移动都将来自过去的转换，因此将在`somePath.attr(transform)`?

从 Raphael 文档看来，Path 数组的规范中似乎没有任何内容与 2\. 相矛盾，但在做出假设之前总是值得检查意外情况。

* * *

换句话说，在任何情况下，此函数都不会为 Raphael 路径原点返回正确的 X 和 Y 坐标（假设它传递`somePath.attr('path')`了有效 Raphael 路径的输出）：

```
function getPathOrigin (path) {
    if (path[0][0] == 'M') {
        return {x: path[0][1], y: path[0][2]}
    } else {
        return {x: 0, y: 0}
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:04:34.243

根据[规范](http://www.w3.org/TR/SVG/paths.html#PathDataMovetoCommands)，路径必须以 moveto 命令开始。

# php - 使用 CSS3 背景大小的封面。由于这使用图像的 css url，是否可以在 IE8 和更早版本上全屏显示它？

> ID：15231524
> 
> 赞同：2
> 
> 时间：2013-03-05T18:37:59.460
> 
> 标签：php, javascript, jquery, wordpress, internet-explorer

我正在使用 css3 来获得一个漂亮的全屏背景图像。

```
body{ 
  background: url(<?php echo $background_image; ?>) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

当然 IE8 和更老的版本不玩球而且看起来很糟糕。有没有一种简单的方法让它在 IE8 上运行？

我查看了[jQuery AnyStretch](https://github.com/danmillar/jquery-anystretch)，它使用以下方法调用：

```
<script type="text/javascript">
  $.anystretch(<?php echo $background_image; ?>, {speed: 150});
</script> 
```

但即使它有效，我也无法做到，所以它只能在 IE8 浏览器中加载。使用 anystretch，浏览器会加载图像两次（一次在 css 中，一次在由 anystretch 创建的 html 中）。

任何人有任何想法的简单方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:57:01.620

你有没有检查过这个网站[CSS Tricks Perfect Full Page Background Image](http://css-tricks.com/perfect-full-page-background-image/)。它涵盖了在不支持 CSS3 属性（例如`background-size`. 它具有纯 CSS 方法和 jQuery 辅助方法。

仅 CSS 技术 #2 涵盖 IE8+ 回退

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:51:08.637

You can do this.

```
background:url("image.png")no-repeat;
filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="image.png",sizingMethod=scale);
-ms-filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src="image.png",sizingMethod=scale); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:52:12.117

It depends on how hacky you wanna get. You could place the css in a media query, so it won't load in IE8 or older (because they don't support media queries). Then place conditional comments around the javascript to specifically target IE 8 or earlier (as shown by Alex W). This way you only let IE8 or older use the anyStretch functionality, and avoid loading the image twice for those browsers.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T18:41:06.667

不，没有“简单”的方法。大多数只是为旧浏览器选择替代背景，例如带有 repeat-x 的渐变图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T18:43:23.627

> 但即使它有效，我也无法做到，所以它只能在 IE8 浏览器中加载。

这只会在 IE 8 浏览器中加载：

```
<!--[if IE 8]>
<script type="text/javascript">
  $.anystretch(<?php echo $background_image; ?>, {speed: 150});
</script>
<![endif]--> 
```

或者如果您希望它在 IE 8 及更低版本上加载：

```
<!--[if lt IE 9]>
<script type="text/javascript">
  $.anystretch(<?php echo $background_image; ?>, {speed: 150});
</script>
<![endif]--> 
```

[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

# ios - Objective C 中跨类的属性

> ID：15231525
> 
> 赞同：-1
> 
> 时间：2013-03-05T18:38:06.463
> 
> 标签：ios, objective-c

我是 Objective C 的新手，所以请原谅我的问题的简单性。

我有一堂课，让我们叫它`Class A`，它看起来像这样

```
@interface A()
@property (weak, nonatomic) IBOutlet UISegmentedControl *segment;
@end

@implementation A
  ... 
```

现在我想做的是“获取” `class B`. 我试过这样做

```
@interface B()
@property (nonatomic) B *cardy;
@end

@implementation B
 ... 
```

然后我想做`cardy.segment`，但我似乎无法访问它。我尝试`@synthesize`在 A 中使用，但需要确保准确地实现“get”。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:37:54.120

在 .h 文件中声明属性，而不是在 .m 文件中。另外，确保在 Bm 中导入 Ah

# c++ - 如果以后将不使用/设置，可以复制未初始化的数据吗？

> ID：15231527
> 
> 赞同：6
> 
> 时间：2013-03-05T18:38:10.083
> 
> 标签：c++

下面的代码是否安全，只要我不读取结构数组的任何元素而不首先将其设置为实际值？谢谢。

```
const int data_size = 5;

struct Testing
{
    int data[data_size];

    Testing(const int data[data_size])
    {
        std::copy(data, data + data_size, this->data);
    }
};

int main()
{
    int data[data_size];
    data[2] = 57;

    Testing t(data);

    t.data[1] = 93;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T18:49:14.840

`std::copy` is defined as doing `*(result + n) = *(first + n)` for each element in the sequence (§25.3.1). The value given by `*(first + n)` is an lvalue expression (§5.3.1/1), in your case referring to an uninitialized value. Since the assignment operator expects a prvalue as it's right operand (this is [ill-specified](https://stackoverflow.com/q/14991219/150634)), this will result in lvalue-to-rvalue conversion. Lvalue-to-rvalue conversion on an expression referring to an uninitialized value is undefined behaviour (§4.1):

> If the object to which the glvalue refers is not an object of type T and is not an object of a type derived from T, or if the object is uninitialized, a program that necessitates this conversion has undefined behavior.

So your code has undefined behaviour. The solution is of course to initialize the elements of the array (perhaps with `int data[data_size] = {};`).

# hadoop - 为什么hadoop jobtracker reducer进度条不能100%，但是这个job已经完成了

> ID：15231531
> 
> 赞同：1
> 
> 时间：2013-03-05T18:38:24.620
> 
> 标签：hadoop

我使用 hadoop 0.20.0 在 4 个节点的集群上运行程序。但是，当我检查jobtracker：50030时，我发现hadoop jobtrcker显示的reducer进度条无法获得100％，但作业已成功完成。屏幕截图如下。我真的很好奇为什么会出现这种情况。 ![在此处输入图像描述](../Images/af313a12f7f212aa8dc9c5676d711a8b.png)

但是，我的工作已经成功完成。 ![在此处输入图像描述](../Images/45323610702f08296c7d1dc34a42c767.png)

![在此处输入图像描述](../Images/dba996754b96d5b82bfa4c12d47231ce.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:07:34.517

这看起来像是 jobtracker 中获取进度报告的错误。然而，自从 Hadoop 0.20.0 于 2009 年发布以来，已经发布了[很多版本](http://hadoop.apache.org/releases.html)- 这是一个有争议的问题

# javascript - Rails 3 link_to 方法：：post，remote：true 原型

> ID：15231533
> 
> 赞同：0
> 
> 时间：2013-03-05T18:38:26.237
> 
> 标签：javascript, ruby-on-rails, post, link-to-remote

我正在使用 Prototype 将系统升级到 Rails 3.2。

我需要更新 link_to_remote，因为它现在已被弃用。我希望它仍然使用 AlertsController#create 方法。

以下链接在 Rails 2.3.15 中有效

```
link_to_remote 'example name', :update => "example id", :url => '/alerts?alert%5Bname%5D=MYNAME&commit=Create&inasset=true' 
```

这些似乎都不适用于 Rails 3.2。它们都调用 AlertsController#index。

```
link_to 'example name', alerts_path("alert[name]" => 'MYNAME', :commit => "Create", :inasset => true), method: :post, update: "example id", remote: true 
```

和

```
link_to 'example name', '/alerts/alert%5Bname%5D=MYNAME&commit=Create&inasset=true', method: :post, update: "example id", remote: true 
```

我的 routes.rb 有：

```
resources :alerts, except: :show 
```

所以我的问题是我应该如何更新 Rails 3.2 中的 link_to_remote 标签，特别是依赖或调用“创建”操作的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:03:36.787

您的清单文件（application.rb）中有 rails.js 吗？，通常这是您的应用程序中包含的 javascript 文件的问题，因此请检查 firefox 中的元素并检查您的 head 部分中包含的 js 文件。

# jquery - jQuery 代码 | 允许 html？

> ID：15231535
> 
> 赞同：2
> 
> 时间：2013-03-05T18:38:30.360
> 
> 标签：jquery, ticker

我根据从互联网上找到的内容编写了一个小的 jQuery 自动收录器插件。它完美地完成了它的工作，但我希望它允许 html 标签，并且我坚持使用它，因为我无法正确编写 html 标签。它只是写它们，没有别的，所以我无法创建换行符或**强**文本。

这是代码：

```
(function($) {
    $.fn.Ticker = function(cont,time) {
        var conArray = cont.split(""),
            current = 0,
            elem = this;
        setInterval(function() {
            if(current < conArray.length) {
                elem.html(elem.html() + conArray[current++]);
            }
        }, time);
    };

})(jQuery);
var tickertext = $("#tickertext").html();
$(document).ready(function(){
    $("#tickto").Ticker(tickertext,50);
}); 
```

还有一个关于它的小提琴：http: [//jsfiddle.net/29axW/](http://jsfiddle.net/29axW/) 如果我`console.log(conArray)`有这样的链接，`<a href="kissa.php">moi</a>`我会得到

```
["<", "a", " ", "h", "r", "e", "f", "=", """, "k", "i", "s", "s", "a", ".", "p", "h", "p", """, ">", "m", "o", "i", "<", "/", "a", ">"] 
```

但它只是简单地写为明文。所以我需要它首先解析 html 标签并在用户看到它的情况下插入它们，依此类推......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:45:25.753

这是因为浏览器一次获取标签的一个字符，因此不会将其呈现为标签。您可能需要将字符串拆分为标签和文本，然后将文本拆分为单个字符。

我会试着想一个简单的方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:50:01.480

You can skip the interval if a HTML-Tag is reached... Take a look how I realized this here: [https://github.com/yckart/jquery.typer.js/blob/master/jquery.typer.js#L34-L38](https://github.com/yckart/jquery.typer.js/blob/master/jquery.typer.js#L34-L38)

Here's a [working example](http://yckart.github.com/jquery.typer.js/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:56:20.663

在将其发送到浏览器之前，应完成 Html 标记。否则它会像字符串一样受到威胁。

我正在考虑解决方案。您应该使用 html 树，查找嵌套的 html 标签并将文本附加到其中。这是我的[小提琴](http://jsfiddle.net/bmUQe/2/)，它扩展了你的。对不起，这个代码应该升级，但我展示了基本的想法。

它适用于嵌套标签（like `<strong><i>text</i></strong>`）和不关闭 like 的标签`<br/>`。

说如果你需要一些额外的解释。

# c# - 推荐的 ServiceStack API 结构

> ID：15231537
> 
> 赞同：67
> 
> 时间：2013-03-05T18:38:32.140
> 
> 标签：c#, api, servicestack

我正在尝试找出构建 API 的最佳方式；我们有我们在标准 REST 结构中设置的评论（列出一个、列出所有、创建、更新等）。不太适合示例的地方是：每条评论都可以链接到一个或多个其他类型，例如事件、位置或事物。

我的想法是网址将遵循以下内容：/event/reviews/（或与此相反，例如/reviews/event/）/location/reviews//thing/reviews/

然而，我可以看到的问题是这些中的每一个的“GET”应该返回父对象，即一个事件。

那么使用 ServiceStack，处理这种情况的最佳方法是什么？是为每个数据请求创建一个自定义服务，而不是滥用开箱即用的 REST 设置，还是我错过了一些更基本的东西？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-03-05T23:01:15.657

首先，“最佳”解决方案是一个相当主观的术语。我通常会针对 DRY、可重用、高性能的解决方案，以促进最少的努力、摩擦和闲聊，而其他人可能会定义“最佳”，即它在多大程度上遵循 REST 原则。因此，您将根据目标得到不同的响应。我只能提供我将如何处理它。

### ServiceStack 服务实现与其自定义路由解耦

要记住的一件事是，您在 ServiceStack 中定义和设计服务的方式与公开它们的方式完全解耦，因为您可以在任何自定义路由下公开您的服务。ServiceStack 鼓励基于消息的设计，因此您应该为每个操作提供不同的消息。

### 使用逻辑/分层 Url 结构

我将使用一个逻辑 Url 结构，旨在表示名词的标识符，它是分层结构的，即父路径对您的资源进行分类并为其提供有意义的上下文。因此，在这种情况下，如果您想公开事件和评论，我倾向于使用以下 url 结构：

```
/events             //all events
/events/1           //event #1
/events/1/reviews   //event #1 reviews 
```

这些资源标识符中的每一个都可以应用任何 HTTP 动词

### 执行

对于实现，我通常遵循基于消息的设计，并根据响应类型和调用上下文对所有相关操作进行分组。为此，我会做类似的事情：

```
[Route("/events", "GET")]
[Route("/events/category/{Category}", "GET")] //*Optional top-level views
public class SearchEvents : IReturn<SearchEventsResponse>
{
   //Optional resultset filters, e.g. ?Category=Tech&Query=servicestack
   public string Category { get; set; } 
   public string Query { get; set; }
}

[Route("/events", "POST")]
public class CreateEvent : IReturn<Event>
{
   public string Name { get; set; }
   public DateTime StartDate { get; set; }
}

[Route("/events/{Id}", "GET")]
[Route("/events/code/{EventCode}", "GET")] //*Optional
public class GetEvent : IReturn<Event>
{
   public int Id { get; set; }
   public string EventCode { get; set; } //Alternative way to fetch an Event
}

[Route("/events/{Id}", "PUT")]
public class UpdateEvent : IReturn<Event>
{
   public int Id { get; set; }
   public string Name { get; set; }
   public DateTime StartDate { get; set; }
} 
```

并遵循类似的活动评论模式

```
[Route("/events/{EventId}/reviews", "GET")]
public class GetEventReviews : IReturn<GetEventReviewsResponse>
{
   public int EventId { get; set; }
}

[Route("/events/{EventId}/reviews/{Id}", "GET")]
public class GetEventReview : IReturn<EventReview>
{
   public int EventId { get; set; }
   public int Id { get; set; }
}

[Route("/events/{EventId}/reviews", "POST")]
public class CreateEventReview : IReturn<EventReview>
{
   public int EventId { get; set; }
   public string Comments { get; set; }
} 
```

基于这些消息，实现应该是相当直接的，这些消息（取决于代码库大小）我将组织在 2 个**EventsService**和**EventReviewsService**类中。我应该注意，我自己对服务请求 DTO 名称使用复数形式，以避免与同名的数据模型发生冲突。

虽然我已经`UpdateEvent`和这里分开了，但如果用例允许`CreateEvent`，我有时会将它们合并为一个幂等操作。`StoreEvent`

## [物理项目结构](https://github.com/ServiceStack/ServiceStack/wiki/Physical-project-structure)

理想情况下，根级**AppHost**项目应保持轻量级且无需实现。尽管对于只有少量服务的小型项目，可以将所有内容都放在一个项目中，并在需要时根据需要简单地扩展您的架构。

对于大中型项目，我们建议使用下面的物理结构，出于本示例的目的，我们假设我们的应用程序称为**EventMan**。

项目的顺序也显示了它的依赖关系，例如顶级`EventMan`项目引用**所有**子项目，而最后一个`EventMan.ServiceModel`项目引用**无**：

```
- EventMan
    AppHost.cs              // ServiceStack ASP.NET Web or Console Host Project

- EventMan.ServiceInterface // Service implementations (akin to MVC Controllers)
    EventsService.cs
    EventsReviewsService.cs

- EventMan.Logic            //For larger projs: pure C# logic, data models, etc
    IGoogleCalendarGateway  //E.g of a external dependency this project could use

- EventMan.ServiceModel     //Service Request/Response DTOs and DTO types
    Events.cs               //SearchEvents, CreateEvent, GetEvent DTOs 
    EventReviews.cs         //GetEventReviews, CreateEventReview
    Types/
      Event.cs              //Event type
      EventReview.cs        //EventReview type 
```

由于`EventMan.ServiceModel`DTO 保存在自己的单独实现和无依赖 dll 中，您可以按原样在任何 .NET 客户端项目中自由共享此 dll - 您可以将其与任何通用[C# 服务客户端](https://github.com/ServiceStack/ServiceStack/wiki/C%23-client)一起使用以提供结束没有任何代码生成的端到端类型化 API。

* * *

## 更新

*   这个推荐的项目结构现在包含在所有[ServiceStackVS 的 VS.NET 模板](https://github.com/ServiceStack/ServiceStack/wiki/Creating-your-first-project)中。

*   [简单客户 REST 示例](https://stackoverflow.com/a/30273466/85785)有一个使用 RDBMS 创建简单 REST 服务的小型自包含真实示例。

# java - if-else 结构中无法访问的代码

> ID：15231541
> 
> 赞同：3
> 
> 时间：2013-03-05T18:38:42.530
> 
> 标签：java, if-statement, compiler-construction

如果有以下代码，我会在 else if 代码中正确地在 eclipse 中收到警告：

```
final int x = 8;
if (x < 10) {
    System.out.println(x);
} else if (x < 5) {
    System.out.println(x);
} 
```

但是如果我更换线路，我不会收到任何警告

```
final int x = 8; 
```

和

```
final int x = getX(); 
```

`getX()`在某处定义。

这是什么原因？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T18:41:37.693

`JVM`知道 x在编译时**总是**小于 10，但是如果你替换`x`声明

```
final int x = getX(); 
```

`JVM`将知道`x`仅在运行时比较的值

## 相关问题：

*   [Eclipse下Java中无法访问的代码错误与死代码警告？](https://stackoverflow.com/questions/2141029/unreachable-code-error-vs-dead-code-warning-in-java-under-eclipse)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:41:24.260

```
final int x = 8;
    if (x < 10) {
        System.out.println(x);
    } else if (x < 5) {
        System.out.println();
    } 
```

在这里，您将 value 声明为 8。

所以 if 将执行。没有执行 else 的可能性。

但在第二种情况下，首先我们不知道值。在运行时只有它知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:50:08.333

If this holds x<5

Then this also holds x<10.

Therefore, the second part will never execute even the value in x is unknown.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T18:41:40.473

如果您编写`final int x = 8;`编译器肯定知道`x < 10`并且`if`总是执行分支，而在第二种情况下，它无法知道被调用函数返回的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T18:41:51.820

在编译时，编译器知道 x 总是 8。但是如果你使用一个函数，它就不会深入研究它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T18:42:03.640

最终原语是编译时间常数，因此它可以在编译时进行无法访问的代码检查。在这种情况下，编译器知道`x = 8`并可以相应地确定 if 语句的结果。

对于这种`getX()`方法，它不会在编译时进行检查。这意味着您不会看到该警告。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T18:43:11.093

```
if (8 < 10) {
  //Executing code
} else {
  if (8 < 5) {
    //Alternative code
  }
} 
```

我相信这是编译器如何读取代码的基本等价物（比我有更多知识的人可能无法纠正我。从头开始，我确信他们可以纠正我）。

话虽如此，如果您查看步骤的逻辑顺序，您会发现编译器已经确定了执行步骤，并且可以确定第二个 if 永远不会满足。如果您`getX()`交替使用，尽管编译器无法做出这些假设。

# iphone - 在 iPad 中删除超级视图时未删除子视图

> ID：15231546
> 
> 赞同：1
> 
> 时间：2013-03-05T18:39:02.203
> 
> 标签：iphone, objective-c, addsubview

我创建了一个 UIView。在视图上添加了一个搜索栏作为子视图。搜索栏也是通过代码创建的。

我已经为视图提供了一个 UIAnimation 以获得类似下拉菜单的效果。

到目前为止，它工作正常。

问题是当我删除超级视图时，视图消失但搜索栏仍然存在。

**以下是一些代码：**

```
@interface ATViewController : UIViewController<UISearchBarDelegate>
{
    UIView *dropView;

    UISearchBar *searchBar;
}

- (void)viewDidLoad
{
    dropView = [[UIView alloc]initWithFrame:CGRectMake(70, 70, 150, 100)];
    searchBar = [[UISearchBar alloc]initWithFrame:CGRectMake(0,0,150,0)];
        [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

-(IBAction)buttonClicked:(id)sender{
   // self.searchBar.delegate = self;
    [dropView addSubview:searchBar];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.9];

    dropView.backgroundColor = [UIColor blueColor];
    dropView.frame = CGRectMake(70, 70, 150, 550);
    self.searchBar.frame=CGRectMake(0,0, 150, 40);

    [UIView commitAnimations];
    [self.view addSubview:dropView];
}
-(void)doSingleTap:(UITapGestureRecognizer *)sender
{
    switch (sender.numberOfTapsRequired) {
        case 1:
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationDuration:0.5];

            dropView.frame = CGRectMake(70, 70, 150, 0);
            self.searchBar.frame=CGRectMake(0, 0, 150, 0);
            [UIView commitAnimations];
            break;

        default:
            break;
    }

} 
```

**添加子视图**

![添加子视图](../Images/ccdd4ece1e7ab29d6486cde2f38b8194.png)

**删除子视图后**

![删除视图后](../Images/06a4d3ba5ed8d5a9c08fc21ec2559459.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:19:59.797

您没有删除代码中的超级视图。您只是将其高度降低到零。如果您希望将与then`searchBar`一起剪裁，则将clipToBounds 设置为 YES。IE;`dropView``dropView`

```
dropView.clipToBounds = YES: 
```

在你把它的高度降低到零之前。

请注意，您也将搜索栏高度降低到零。但我认为您不允许编辑 UISearchBar 的高度。

# php - PHP 正在从 MySQL 打印一个空列，即使它不是空的

> ID：15231549
> 
> 赞同：-2
> 
> 时间：2013-03-05T18:39:07.770
> 
> 标签：php, mysql

我正在网页上打印一个 3 列的 MySQL 表。除了第二列，所有内容都打印出来，它只是空白。

这是我正在使用的代码：

```
$connection = mysql_connect($hostname, $username, $password);
    if (!$connection)
      {
      die('Could not connect: ' . mysql_error());
      }

mysql_select_db("MEASURE", $connection);

$numberz = 54;

mysql_query("INSERT INTO measurement (DATA)
VALUES
('$numberz')");

$result = mysql_query("SELECT * FROM measurement"); 

echo "<table border='1'>
<tr>
<th>ID</th>
<th>DATA</th>
<th>TIME</th>
</tr>";

while ($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . $row['ID'] . "</td>";             
echo "<td>" . $row['DATE'] . "</td>";
echo "<td>" . $row['TIME'] . "</td>";
echo "</tr>";
}
echo "</table>";
mysql_close($connection); 
```

这是我在我的网页上得到的：

```
ID  DATA    TIME

1   2013-02-26 14:32:26

2   2013-02-26 14:32:26

3   2013-02-26 14:32:27 
```

注意第二列是空白的

这是该表在 MySQL 中的外观：

```
ID | data | TIME                

|  1 |    1 | 2013-02-26 14:32:26 |

|  2 |    1 | 2013-02-26 14:32:26 |

|  3 |    1 | 2013-02-26 14:32:27 | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:42:55.600

您正在打印到您正在访问的页面的位置`$row['DATE']`，看起来应该是`$row['DATA']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:45:21.933

试试这个：

如果您的表字段名称是 ID、数据、时间。您使用的是大写字母和错误的字段名称。

```
$result = mysql_query("SELECT * FROM measurement"); 

echo "<table border='1'>
<tr>
<th>ID</th>
<th>DATA</th>
<th>TIME</th>
</tr>";

while ($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . $row['ID'] . "</td>";             
echo "<td>" . $row['data'] . "</td>";
echo "<td>" . $row['TIME'] . "</td>";
echo "</tr>";
}
echo "</table>"; 
```

希望这会奏效。

# mongodb - 如何查询 MongoDB 中的空文档子集合？

> ID：15231560
> 
> 赞同：1
> 
> 时间：2013-03-05T18:39:34.330
> 
> 标签：mongodb, mongodb-query

我有以下数据：

```
/* 1 */
{
  "_id" : 1,
  "FirstName" : "John",
  "LastName" : "Doe",
  "Test" : [{
      "TestId" : ObjectId("5046109daedabb0cf8800f3f"),
      "DateTaken" : ISODate("2012-09-10T15:46:32.866Z")
    }, {
      "TestId" : ObjectId("506e0928aedabb087c4ec9d1"),
      "DateTaken" : ISODate("2011-06-26T18:05:52.625Z"),
      "Responses" : [{
          "AnswerId" : "506e0928aedabb087c4ec98c",
          "QuestionId" : ObjectId("506e0928aedabb087c4ec98b"),
          "ResponseDate" : ISODate("2011-06-26T04:00:00Z")
        }]
    }]
}

/* 2 */
{
  "_id" : 2,
  "FirstName" : "Jane",
  "LastName" : "Doe",
  "TestHistory" : [{
      "TestId" : ObjectId("506e0928aedabb087c4ec9d1"),
      "DateTaken" : ISODate("2011-06-26T18:05:52.625Z"),
      "Responses" : [{
          "AnswerId" : "506e0928aedabb087c4ec98c",
          "QuestionId" : ObjectId("506e0928aedabb087c4ec98b"),
          "ResponseDate" : ISODate("2011-06-26T04:00:00Z")
        }]
    }]
} 
```

我正在尝试编写一个查询，该查询返回存在没有响应的测试的所有实例。我尝试了以下查询：

> 1.  { "Test.Responses": { $exists: false } }
> 2.  { $and: [ { Test: { $exits: true } }, { "Test.Responses": { $exists: false} } ] }

两者都返回 0 结果。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:33:54.387

我认为您正在寻找的是：

```
db.foo.find({
    Test: { $elemMatch: {
        Responses: { $exists: false }
    }
}) 
```

否则，您的查询将查找所有文档`Test`都不具有该`Responses`属性的记录。

# c# - 无法让父类调用子类方法 - 使用反射

> ID：15231561
> 
> 赞同：0
> 
> 时间：2013-03-05T18:39:34.857
> 
> 标签：c#, reflection, polymorphism, parent-child

问题：当我在父类中调用 ValidateDynData 时，程序流不会转到 ValidateDynData 的子类实现。

我使用反射创建了我的类的实例。当我从另一个项目调用子类中的方法时，它会以子类中的正确方法（而不是父类的同名方法）结束，因此看起来设置正确。

这是反射部分在我的其他项目/类中的样子：

**注 2013 年 3 月 7 日：我添加了更多信息，以便您对此有所了解。它获取盒子的数量，循环通过盒子的数量，并为每个盒子创建一个控件并向表单添加一个选项卡。这是主要的CTool Visual Studio项目，是项目中的一个类，是一个表单。当我按下表单上的一个按钮时，带有我稍后将要创建的子类的信息（选定），它转到这个方法，CreatTabs()：

```
 cb = new CB();
        int errValue = cb.FindUsbHid(ref HWndBoxID); //see how many boxes there are
        if (errValue == 0 && HWndBoxID[0, 1] != 0)
        {
            for (int i = 0; i < cb.cbInfos.Length; i++)
            {

                if (controls[i] == null)
                {
                    CB cb1 = new CB(); //need one for each box found or concurrent programming will fail
                    errValue = cb1.FindUsbHid(ref HWndBoxID); //need to do for each box to get all info
                    /////////////////////////////////////////
                    if (errValue == 0)
                    {
                       _assembly = Assembly.LoadFrom(programDll);
                       _type = _assembly.GetType("CrWriter.PC");
                       _objectInstance = Activator.CreateInstance(_type);
                       _parameters = new Object[] { cb1, programDll, templateArr, itsDll, cert, i, cb1.cbInfos[i].boxID };
                       controls[i] = new Control();
                       //The following lands in my child's GetPC method
                       //My parent also has a method called GetPC and that is called from the child. 
                       //Then, most of the program flow is in the parent until I need to call ValidateDynData,
                       //discussed below
                       controls[i] = (Control)_type.InvokeMember("GetPC", BindingFlags.Default | BindingFlags.InvokeMethod, null, _objectInstance, _parameters);

                       controls[i].Dock = DockStyle.None;
                       this.Controls.Add(controls[i]); 
                       TabPage newPage = new TabPage(string.Format("{0}:{1}", cb1.cbInfos[i].usbHandle, cb1.cbInfos[i].boxID));
                        Console.WriteLine("frmUserForm::CreateTabs - Making new tab with cb.cbInfos[i].usbHandle:" + cb1.cbInfos[i].usbHandle + " and cb.cbInfos[i].boxID:" + cb1.cbInfos[i].boxID);
                        InitializeControls(controls[i]);
                        tabCtrlMain.Size = controls[i].Size;
                        tabCtrlMain.Width += 20;
                        tabCtrlMain.Height += 100;
                        this.Width = tabCtrlMain.Width + 20;
                        this.Height = tabCtrlMain.Height + 50;
                        newPage.Controls.Add(controls[i]);
                        tabCtrlMain.TabPages.Add(newPage);
                     } //no err for this cb
                 } //controls not null
             } //for all cbInfo's
          }//if no err in general finding out how many cb's
          this.ResumeLayout();
          } 
```

由于我对 GetPC 的调用位于子类而不是父类中，因此必须正确创建它。所以我不确定为什么它没有登陆正确的 ValidateDynData 方法。也许我需要以某种方式将我的对象投射到 programDll 中。当我运行程序并检查 _objectInstance 时，它​​可能是一个问题：变量..................... ................价值

基础：{GenericCrWriter.GenericPC} ......CrWriter.PC

基础安装：................................................ GenericCrWriter.GenericPC

但是，_assembly 指的是 Ko/PC 而不是 Generic/GenericPC。

另外，我的 _assembly.GetType 看起来不错。我的 Generic/parent 没有任何名为 CrWriter.PC 的东西

对于某些子类案例，我正在尝试使用子类方法而不是父类。出于某种原因，我得到了父类方法，但它永远不会得到子类的覆盖。任何想法为什么？我一直在指[从父类调用子类方法，](https://stackoverflow.com/questions/9067885/calling-child-class-method-from-parent) 但它没有到达子类的方法。

在我的子类（Ko）的 PC.cs 中：

**注 3/8/2013：PC.cs 在 Ko Visual Studio 项目中。**这包含一个显示的表单 **注 3/7/2013：这是一个以孩子命名的单独的 Visual Studio 项目，我们称之为 Ko。这里重要的类是 PC.cs。除了将数据传递给父级，提供自定义文本框及其名称，验证稍后在父级表单中输入的数据之外，它并没有做太多事情。大部分流程都在父级中，否则。我正在添加 GetPC、setProgramName、setDTF 方法。

```
 public partial class PC : GenericPC
    {
      String childDllName = "";  //I just added this recently but it doesn't seem useful
      GenericPC baseInst = new GenericPC();
      public Control GetPC(USB_Comm.CB cbInst, string dllSel, TemplateHApp.Templates.TEMPL[] templ, string dll, SC.SC.SITE c0, int slaveIndex, int BoxID)
       {
           childDllName = dll;
           //call parent class methods  
           setProgramName();
           setDTF();
           ProcessDynData();
           return baseInst.GetPC(cbInst, dllSel, templ, dll, cert0, slaveIndex, BoxID);
       }

       public void setProgramName()
       {
           Console.WriteLine("Ko  did stuff");
           //Update label on form
           var f = new F(); //F is a class in child class containing more info on it
           string temp = f.GetProgramName();
           baseInst.setProgramName(temp); //this is displayed on parent's form
       }

       public void setDTF()
       {
           var f = new F();
           string temp = f.DTF();
           baseInst.setDTF(temp);  //this is displayed on parent's form
       }

       private void ProcessDynamicData()
       {
           Console.WriteLine("Ko PC::ProcessDynamicData");
           Label lbl_dynData0 = new Label();
           Label lbl_dynData1 = new Label();
           lbl_dynData0.Text = "AT  .";
           lbl_dynData1.Text = "VL   .";
           lbl_dynData0.Location = new Point(57, 25);
           lbl_dynData1.Location = new Point(57, 45);
           Label[] lbl_dynData_Arr = new Label[4];
           lbl_dynData_Arr[0] = lbl_dynData0;
           lbl_dynData_Arr[1] = lbl_dynData1;
           TextBox tb_dynData0 = new TextBox();
           TextBox tb_dynData1 = new TextBox();
           tb_dynData0.Location = new Point(67, 25);
           tb_dynData1.Location = new Point(67, 45);
           tb_dynData0.Size = new Size(151,22);
           tb_dynData1.Size = new Size(151, 22);
           TextBox[] tb_dynData_Array = new TextBox[4];
           tb_dynData_Array[0] = tb_dynData0;
           tb_dynData_Array[1] = tb_dynData1;
           PC pc = this;  //Tried adding this to get past problem but it's not turned out useful
           //I think the way I access parent class from child is the problem of why flow in 
           //parent class isn't reaching overridden method in child when called:
           baseInst.addDynamicDataTextBoxes(tb_dynData_Array, lbl_dynData_Arr, childDllName, pc);
       }

       public override void ValidateDynData(TextBox[] tb_dynData_Array, ref int result)
       { //I added more info here, but it's probably too much info 3/7/2013
          Console.WriteLine("Ko PC::ValidateDynData");
          result = -610; 
          //AT
          if ((Convert.ToInt16(tb_dynData_Array[0].Text) >= 1) && (Convert.ToInt16(tb_dynData_Array[0].Text) <= 99))
              result = 0;

          //VL
          if (result == 0) 
            if ((Convert.ToInt16(tb_dynData_Array[1].Text) >= 69) && (Convert.ToInt16(tb_dynData_Array[1].Text) <= 100))
                result = 0;
            else
                result = -610;
        } 
```

在我的父类的 GenericPC.cs 中：

**注 3/8/2013：GenericPC 在 Generic Visual Studio 项目中。**注意 3/7/2013 当子类调用父类初始化重要数据时，父类显示它的表单和字段（我认为简历布局显示它）。接下来，我们在表单上输入数据，包括 Ko 的自定义数据，然后我们点击表单上的一个按钮 (btn_Lock_Config_Click)，它需要处理和验证它的数据。我添加了更多方法来获得流动的感觉。父级中的方法比子级多得多（未显示），包括 try/catch 等。

```
 //base
    public partial class GenericPC : UserControl
    {
    //class variables (wave your hands..too much info)

     public Control GetPC(USB_Comm.CB cbInstance, string dllSelected, TemplateHApp.Templates.TEMPL[] template, string dll, SC.SC.SITE c0, int slaveIndex, int boxID)
    {
        cb = cbInstance;
        SlaveIndex = slaveIndex;
        createControls();
        itsDll = dll;
        templateArr = template;
        return this; //return the control for the control array
    }    

    //called from child class
    public void setProgramName(string name)
    {
        Console.WriteLine("Generic setProgramName slaveIndex:" + SlaveIndex);
        lbl_Program_Name.Text = name;
    }

    //called from child class
    public void setDTF(string theDTF)
    {
        Console.WriteLine("Generic setDTF slaveIndex:" + SlaveIndex);
        lbl_Program_Name.Text += " ";
        lbl_Program_Name.Text += theDTF;
        lbl_Program_Name.Refresh();
    }

    public void addDynamicDataTextBoxes(TextBox [] tb_dynData, Label [] lblTitle, String childName, Object child)
    { 
        childHasDynamicData = true; //somebody's knocking
        itsChildName = childName; //child name isn't turning out to be useful here
        itsChild = child; //child isn't turning out to be useful here
        Console.WriteLine("Generic addDynamicDataTextBoxes slaveIndex:" + SlaveIndex);
        //Display what child wants
        for (int i = 0; i < tb_dynData.Length; i++)
        {
            //assumes calling code knows real estate and planned for it
            gb_dynamicData.Controls.Add(lblTitle[i]);
            gb_dynamicData.Controls.Add(tb_dynData[i]);
        }
        itsEnteredDynamicData = tb_dynData; //nothing entered yet
    }

    private void btn_Lock_Config_Click(object sender, EventArgs e)
    {
        int status = 1;
        Console.WriteLine("Generic btn_Lock slaveIndex:" + SlaveIndex);
        //it does some flagging and data checking, etc.
        status = processDynamicData();
    }

    private int processDynData()
    {
        int returnCode = 0;  //I'm setting it to desired value for example
        //processes data, puts it into data arrays, etc, 
        if ((returnCode >= 0) && childHasDynamicData)
            ValidateDynData(itsEnteredDynamicData, ref returnCode);
           //start here for problem...it never calls child method, as intended
    }

    public virtual void ValidateDynData(TextBox[] tb_dynData_Array, ref int result)
    {
        Console.WriteLine("Generic::ValidateDynData passing off to child to validate special data");
    } 
```

当我在父类中调用 ValidateDynData 时，为什么它不会进入 ValidateDynData 的子类实现？这是我的代码中我试图让子类覆盖父实现的唯一区域，所以我不确定我是否做错了什么？

我检查了在孩子的项目/类中引用了正确版本的 Generic.dll。我在子类中做了一个干净的构建。还有其他应该检查的二进制文件吗？我的反映有问题吗？我对 ValidateDynData 的虚拟/覆盖使用有什么问题吗？

更新：我一直在看代码，我通过创建父/基类的实例进入父类。所以我认为这就是为什么当我在父类中调用它时，我没有进入在子类中被覆盖的 ValidateDynData。有没有另一种方法可以在不创建父级实例的情况下访问父级的方法？

```
 GenericPC baseInst = new GenericPC(); 
    return baseInst.GetPC(cbInst, dllSel, templ, dll, cert0, slaveIndex, BoxID); 
```

** 2013 年 3 月 7 日更新：问题也可能是我按下了父表单上的一个按钮，该按钮启动了一个新线程，通过这样做，它不知道子类，所以这就是为什么 flow 不当我调用 ValidateDynData 方法时，t get to child。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:42:00.227

简短的回答：只需删除所有糟糕的代码并重新开始。

更长的答案：

```
// (1)
public partial class PC : GenericPC
{
    // (2)
    GenericPC baseInst = new GenericPC();

    public Control GetPC(…)
    {
        …
        // (3)
        return baseInst.GetPC(cbInst, dllSel, templ, dll, cert0, slaveIndex, BoxID);
    }

    public override void ValidateDynData(TextBox[] tb_dynData_Array, ref int result)
    {
        // (4)
        …
    }
} 
```

对标记的代码行的注释：

1.  此时，您声明为`PC`的*后代*。`GenericPC`到目前为止，一切都很好。
2.  在这里，您**声明并实例化一个完全不同的实例，`GenericPC`**该实例与您正在使用的实例**无关。**`PC`
3.  您调用`GetPC`的一个实例的方法，该方法`PC`又调用`GetPC`完全**不同**的`GenericPC`;实例。`PC`与原始实例没有任何共同之处！
4.  最后，您希望控制流以原始`PC`实例结束；但是，当您一直有效地调用某个愚蠢实例的方法时，这种情况永远不会发生`GenericPC`！

我的建议是阅读一本关于面向对象编程的书，它提供了 C# 示例。似乎您甚至错过了继承这一点，这是 OOP 中的基本概念之一。

* * *

要修复它，您需要**删除**的声明`baseInst`，并将所有对`baseInst`的方法的调用替换为[`base` **关键字**](http://msdn.microsoft.com/en-us/library/hfw7t1ce%28v=vs.110%29.aspx)。然后您的代码将实际调用*在同一**实例***中的祖先类中声明的方法。大多数方法也应声明为`virtual`in`GenericPC`并且您必须将`override`它们声明为`PC`.

```
public partial class PC : GenericPC
{
    public override Control GetPC(…)
    {
        …
        return base.GetPC(cbInst, dllSel, templ, dll, cert0, slaveIndex, BoxID);
    }

    public override void ValidateDynData(TextBox[] tb_dynData_Array, ref int result)
    {
        …
    }
} 
```

# ruby-on-rails - 如何使用 RSpec 测试具有嵌套属性的表单？

> ID：15231564
> 
> 赞同：3
> 
> 时间：2013-03-05T18:39:43.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, ruby-on-rails-3.2, factory-bot

我有一个`Invoice`模型可能包含许多`Items`：

```
class Invoice < ActiveRecord::Base

  attr_accessible :number, :date, :recipient, :items_attributes

  belongs_to :user

  has_many :items

  accepts_nested_attributes_for :items, :reject_if => :all_blank, :allow_destroy => true

end 
```

我正在尝试使用 RSpec 对此进行测试：

```
describe InvoicesController do

  describe 'user access' do

    before :each do
      @user = FactoryGirl.create(:user)
      @invoice = @user.invoices.create(FactoryGirl.attributes_for(:invoice))
      sign_in(@user)
    end

    it "renders the :show view" do
      get :show
      expect(response).to render_template :show
    end

  end

end 
```

不幸的是，此测试（以及所有其他测试）失败，并显示来自 RSpec 的以下错误消息：

```
Failure/Error: @invoice = @user.invoices.create(FactoryGirl.attributes_for(:invoice))
ActiveModel::MassAssignmentSecurity::Error:
Can't mass-assign protected attributes: items 
```

如何创建包含将通过我的测试的项目的发票？

我正在使用 FactoryGirl 来制作这样的对象：

```
factory :invoice do
  number { Random.new.rand(0..1000000) }
  recipient { Faker::Name.name }
  date { Time.now.to_date }
  association :user
  items { |i| [i.association(:item)] } 
end

factory :item do
  date { Time.now.to_date }
  description { Faker::Lorem.sentences(1) }
  price 50
  quantity 2
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:54:38.360

- 要在您的示例中使用嵌套属性，您需要传入“item_attributes”而不是像您当前正在执行的“items”。

我不精通FactoryGirl，但也许这些方面的东西会起作用？：

```
invoice_attributes = FactoryGirl.attributes_for(:invoice)
invoice_attributes["item_attributes"] = invoice_attributes["items"]
invoice_attributes["items"] = nil
@invoice = @user.invoices.create(invoice_attributes) 
```

那应该有希望模拟从您的表单传入的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:19:32.960

编辑：误解了这个问题。道歉。

代替

```
before :each do
  @user = FactoryGirl.create(:user)
  @invoice = @user.invoices.create(FactoryGirl.attributes_for(:invoice))
  sign_in(@user)
end 
```

只需为使用用户参数传递的发票创建工厂，如下所示：

```
before :each do
  @user = FactoryGirl.create(:user)
  FactoryGirl.create :invoice, user: @user
  sign_in(@user)
end 
```

此外，这是一个次要的样式建议，但您可以使用 let 代替实例变量，如下所示：

```
let(:user) { FactoryGirl.create :user }

before :each do
  FactoryGirl.create :invoice, user: user
  sign_in(user)
end 
```

将“用户”传递给发票创建也将创建用户（并且可以简单地调用“用户”）。

*小警告：我已经这样做了大约 6 个月，所以可能会有更博学的人不同意我的风格建议。*

# primefaces - PrimeFaces 3.4.1 春季 3.1.2 休眠 4.1.7

> ID：15231581
> 
> 赞同：1
> 
> 时间：2013-03-05T18:40:45.503
> 
> 标签：primefaces

我正在使用 JSF2、PrimeFaces、Spring、Hibernate 开发应用程序。在控制台中不存在/显示任何错误。但是，某些 PrimeFaces 组件无法正常工作。我认为它与图书馆不兼容，但我没有发现哪个（S）。下面是我的库：

```
aspectjrt-1.6.8.jar
c3p0-0.9.1.jar
commons-beanutils-1.8.0.jar
commons-codec-1.7.jar
commons-collections-3.2.1.jar
commons-digester-1.8.1.jar
commons-fileupload-1.2.1.jar
commons-io-1.4.jar
commons-logging-1.1.1.jar
dom4j-1.6.1.jar
ehcache-core-2.4.3.jar
ejb3-persistence.jar
hibernate-c3p0-4.1.7.Final.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-4.1.7.Final.jar
hibernate-ehcache-4.1.7.Final.jar
hibernate-entitymanager-4.1.7.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
itext-2.1.7.jar
javassist-3.15.0-GA.jar
javax.faces-2.1.17.jar
jboss-logging-3.1.0.GA.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar
jstl.jar
jta-1.1.jar
org.springframework.aop-3.1.2.RELEASE.jar
org.springframework.asm-3.1.2.RELEASE.jar
org.springframework.aspects-3.1.2.RELEASE.jar
org.springframework.beans-3.1.2.RELEASE.jar
org.springframework.context-3.1.2.RELEASE.jar
org.springframework.core-3.1.2.RELEASE.jar
org.springframework.expression-3.1.2.RELEASE.jar
org.springframework.jdbc-3.1.2.RELEASE.jar
org.springframework.jms-3.1.2.RELEASE.jar
org.springframework.orm-3.1.2.RELEASE.jar
org.springframework.oxm-3.1.2.RELEASE.jar
org.springframework.transaction-3.1.2.RELEASE.jar
org.springframework.web-3.1.2.RELEASE.jar
poi-3.7.jar
postgresql-9.1-902.jdbc4.jar
primefaces-3.4.1.jar
rome-1.0.jar
slf4j-api-1.5.2.jar
slf4j-nop-1.5.2.jar
spring-security-acl-3.1.3.RELEASE.jar
spring-security-core-3.1.3.RELEASE.jar
spring-security-taglibs-3.1.3.RELEASE.jar 
```

非常感谢！:)

**编辑**

这是不工作的组件之一。它应该返回给我碳粉名称和型号：

```
<p:selectOneMenu id="modeloToner" value="#{tonerBean.modeloToner}">
    <p:ajax update="form:impressorasCompativeis" listener="#tonerBean.findImpressorasCompativeis}" process="form:modeloToner" />
    <f:selectItem itemLabel="Selecione..." itemValue="Nenhum" />
    <f:selectItems value="#{tonerBean.listModeloToner}" />
</p:selectOneMenu> 
```

生成的 HTML，它具有值但不工作。其他组件也不工作。

```
<select id="form:modeloToner_input" name="form:modeloToner_input">
    <option value="Nenhum">Selecione...</option>
    <option value="HP 530">HP 530</option>
    <option value="HP 532" selected="selected">HP 532</option>
    <option value="HP 53X">HP 53X</option>
    <option value="Lexmark 12738826">Lexmark 12738826</option>
   <option value="Samsung 208L">Samsung 208L</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:13:57.867

我认为您的 p:selectOneMenu 没有返回值，因为它没有转换器。改进您对其他组件的问题，让我们尝试解决

```
<p:selectOneMenu id="modeloToner" value="#{tonerBean.modeloToner}" converter="converter">
    <p:ajax update="form:impressorasCompativeis" listener="#tonerBean.findImpressorasCompativeis}" process="form:modeloToner" />
     <f:selectItem itemLabel="Selecione..." itemValue="Nenhum" />
     <f:selectItems value="#{tonerBean.listModeloToner}" />
</p:selectOneMenu> 
```

和转换器类

```
@FacesConverter(value="converter")
public class Converter implements Converter {

@Override
public Object getAsObject(FacesContext context, UIComponent component, String value) {
    YourObject o = new YourObject();
    // some operations to set the parameters of Object based on the String
    return location;
}

@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    YourObject o = (YourObject) value;
    String string;
    // some operations to save the parameters of Object into a String
    return string;
}
} 
```

# c# - Unix 日期时间差异

> ID：15231582
> 
> 赞同：2
> 
> 时间：2013-03-05T18:40:46.233
> 
> 标签：c#, datetime, unix-timestamp

下面的函数应该将以下 unix 时间转换为 C# DateTime 对象：

1362506086000

上面的时间应该代表**March 5, 2012 12:54 PM**。

但是，每次我通过下面的函数运行它时，它都会变为**5:54 PM**：

2013 年 3 月 5 日下午 5:54:46

```
 static readonly DateTime UnixEpoch = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
    static readonly double MaxUnixSeconds = (DateTime.MaxValue - UnixEpoch).TotalSeconds;

    public static DateTime UnixTimeStampToDateTime(double unixTimeStamp)
    {
        return unixTimeStamp > MaxUnixSeconds
           ? UnixEpoch.AddMilliseconds(unixTimeStamp)
           : UnixEpoch.AddSeconds(unixTimeStamp);
    } 
```

如何将 unix 时间正确表示为**12:54 而不是 5:54**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:43:10.513

这听起来像一个时区问题。确保生成 Unix 时间的时区与 Windows 系统上的时区相同，或进行相应的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:20:18.897

对我来说，解决方法是添加`ToLocalTime()`到代码中，如下所示：

```
static readonly DateTime UnixEpoch = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
static readonly double MaxUnixSeconds = (DateTime.MaxValue - UnixEpoch).TotalSeconds;

public static DateTime UnixTimeStampToDateTime(double unixTimeStamp)
{
    return unixTimeStamp > MaxUnixSeconds
       ? UnixEpoch.AddMilliseconds(unixTimeStamp).ToLocalTime()
       : UnixEpoch.AddSeconds(unixTimeStamp).ToLocalTime();
} 
```

# php - 在 zend 社交引擎 4 小部件中使用加入

> ID：15231588
> 
> 赞同：1
> 
> 时间：2013-03-05T18:41:14.030
> 
> 标签：php, zend-framework, zend-db, socialengine

我在开发社交引擎 4 模块内的小部件时尝试在查询中使用“加入”。我在 Dreamweaver 中工作。我正在尝试替换此工作代码：

```
//creates query to get user's region                
$select = $db->select();
$select->from("engine4_user_fields_search");
$select->where("item_id = ?", $user_id['user_id']);
$stmt = $db->query($select);
$result = $stmt->fetchAll(); 
```

然后我必须使用一个长的 if-else 链，使用“幻数”从索引中添加和减去以获得结果。

使用加入，我不需要做所有这些。我可以有一个简单的查询并显示结果。我正在处理的小部件位于选项卡容器中，因此当出现问题时（每次我使用连接），整个选项卡都会消失并导致调试问题。

这是我所拥有的：

```
<?php

class Widget_RegionalBreakingNewsController extends Engine_Content_Widget_Abstract
{

    public function indexAction()
    {
        //connect to DB
        $file = APPLICATION_PATH . '/application/settings/database.php';
        $options = include $file;
        $db = Zend_Db::factory($options['adapter'], $options['params']);
        $select = new Zend_Db_Select($db);
        $db->getConnection();
        //end DB setup

        $user_id = Engine_Api::_()->user()->getViewer();

        //SELECT * FROM engine4_user_fields_search as s 
        //join engine4_user_fields_options as o 
        //WHERE item_id = <current user's ID> AND s.field_7+22 = o.option_id

        $select = $db->select();
        $select->from(array('s' => 'engine4_user_fields_search'),
                      array('s.field_7', 's.user_id'))
               ->joinInner(array('o' => 'engine4_user_fields_options'),
                      's.field_7+22 = o.option_id');
        $select->where("s.item_id = ?", $user_id['user_id']);
        $stmt = $db->query($select);
        $result = $stmt->fetchAll();
        //print_r($result); 
```

因为这是我使用 Zend 开发的第一周，所以即使是最简单的错误也不要忽视。我很容易不知道可能会产生影响的简单约定。如果有人可以提供帮助，将不胜感激。

PS 无论如何不使用 Zend 选择函数并执行常规 SQL 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:03:41.877

再次查看您的代码后，我认为问题出在这一行：

```
$select->from(array('s' => 'engine4_user_fields_search'),
              array('s.field_7', 's.user_id')) 
```

你告诉它只选择两列（相当于`SELECT s.field_7, s.user_id FROM ...`），我认为这不是你想要的？您说的第一个示例是从 engine4_user_fields_search 中选择所有列。您可以将第二个数组保留在那里以获取该表中的所有列。

另外，这个：

```
$stmt = $db->query($select);
$result = $stmt->fetchAll(); 
```

可以写成：

```
$result = $db->fetchAll($select); 
```

您可以通过简单地回显选择对象来调试`Zend_Db_Select`问题，这将为您提供生成的查询作为字符串：

```
echo $select; 
```

如果您更喜欢编写原始 SQL，您可以将其作为字符串传递给查询函数：

```
$db->query("
    SELECT * FROM engine4_user_fields_search as s 
    join engine4_user_fields_options as o 
    WHERE item_id = ? AND s.field_7+22 = o.option_id
", array($user_id['user_id'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T09:39:58.973

这是我加入三个表的示例

```
 $opsDb = Engine_Db_Table::getDefaultAdapter();
     $ocrSelect = $opsDb->select()
                ->from(array('ops'=>'engine4_user_fields_options'), array('field_id', 'option_id','label'))
                ->join(array('map'=>'engine4_user_fields_maps'),'map.child_id = ops.field_id','')
                ->join(array('meta'=>'engine4_user_fields_meta'),'map.`child_id` = meta.field_id', '')
                ->where('map.option_id =?',$profileTypeId)
                ->where('meta.type LIKE  \'outcomeresult\'');
     $outcomeResults = $opsDb->fetchAll($ocrSelect); 
```

# git - 全局设置 git 的 core.precomposeunicode = true 是否安全？

> ID：15231589
> 
> 赞同：6
> 
> 时间：2013-03-05T18:41:14.850
> 
> 标签：git

我们`git 1.8`在混合环境（OSX、Linux、Windows）中进行设置，并且有些文件名使用非英文字符。我读过这`core.precomposeunicode`需要`true`在 OSX 系统上设置。

我们不关心向后兼容性。我们关心的是让开发人员的事情变得简单*。*我们宁愿不必解释`git`配置。

那么：全局设置该标志是否安全（在中央 git 服务器中）？这会加强我们需要的一致性吗？有理由不这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:51:56.407

No, that won't work. There is no such thing as a central git server in a *distributed* version control system - at least not in the technical sense.

Each developer has his own repository to which he checks in his changes. When those changes are pushed to the repository you *declare* as central, the data is not re-processed.

You will have to set that configuration on every local repository.
Unfortunately, there is no alternative with .gitattributes either.

Local options for a certain repository that will then be cloned by the developers isn't an option either. The following simple experiment shows this:

```
d:\Temp\Origin>git init
Initialized empty Git repository in d:/Temp/Origin/.git/

d:\Temp\Origin>git config --local --add core.autocrlf input
d:\Temp\Origin>git config --local --list
core.repositoryformatversion=0
core.filemode=false
core.bare=false
core.logallrefupdates=true
core.symlinks=false
core.ignorecase=true
core.hidedotfiles=dotGitOnly
core.autocrlf=input
d:\Temp\Origin>cd ..
d:\Temp>git clone d:\Temp\Origin Developer
Cloning into 'Developer'...
warning: You appear to have cloned an empty repository.
done.

d:\Temp>cd Developer

d:\Temp\Developer>git config --local --list
core.repositoryformatversion=0
core.filemode=false
core.bare=false
core.logallrefupdates=true
core.symlinks=false
core.ignorecase=true
core.hidedotfiles=dotGitOnly
remote.origin.url=d:\Temp\Origin
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
branch.master.remote=origin
branch.master.merge=refs/heads/master 
```

Note how the call to `git config --local --list` in `Origin` lists `core.autocrlf=input` and the same command in `Developer` doesn't, although we just cloned `Developer` from `Origin`.
That demonstrates that repository-local configuration values are *not* cloned.

# excel - 将 odbc/database（数据字典）导出到 excel

> ID：15231591
> 
> 赞同：0
> 
> 时间：2013-03-05T18:41:25.533
> 
> 标签：excel, odbc

我已经搜索了高低的方法来报告/导出我的数据库中已经存在的数据字典。我能找到的只是一行代码，但我不知道如何将其实现为我可以使用的东西。

现在我使用 MS Query 在 Excel 中访问我的数据库。我使用公式和函数在 Excel 中创建自己的“报告”。我需要一本圣经（某种）来查找每个表中的字段。在 MS Query 中，我可以查看数据字典，但我更愿意转储整个内容。

沿途某处有人创建了一个，我今天使用它，但它已经过时了，我想知道如何自己做。

# macos - 尝试使用 codesign 命令沙箱时出错

> ID：15231592
> 
> 赞同：4
> 
> 时间：2013-03-05T18:41:33.953
> 
> 标签：macos, sandbox, codesign, code-signing-entitlements

我正在尝试使用`codesign`命令沙箱我的 OS X 应用程序（这是一个常见的 lisp 应用程序，不使用 Xcode）。我创建了一个非常基本的权利 plist，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<plist version="1.0">
    <dict>
        <key>com.apple.security.app-sandbox</key>
        <true/>
    </dict>
</plist> 
```

我正在调用`codesign`命令：

```
codesign -s - -f --entitlements "/path/to/my/app/MyApp.app/Contents/entitlements.plist" "/path/to/my/app/MyApp.app/" 
```

但是此命令返回以下错误：

```
/path/to/my/app/MyApp.app/Contents/entitlements.plist: cannot read entitlement data 
```

这个错误是否意味着我使用了错误的命令？如果是这样，该命令有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:01:57.393

Xcode 生成的 plist 是二进制格式，对于相当标准的受限沙箱设置如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.developer.ubiquity-container-identifiers</key>
    <array>
        <string>$(TeamIdentifierPrefix)com.company.appanme</string>
    </array>
    <key>com.apple.developer.ubiquity-kvstore-identifier</key>
    <string>$(TeamIdentifierPrefix)com.company.appname</string>
    <key>com.apple.security.app-sandbox</key>
    <true/>
    <key>com.apple.security.assets.movies.read-only</key>
    <true/>
    <key>com.apple.security.assets.music.read-only</key>
    <true/>
    <key>com.apple.security.assets.pictures.read-only</key>
    <true/>
    <key>com.apple.security.files.user-selected.read-write</key>
    <true/>
    <key>com.apple.security.network.client</key>
    <true/>
    <key>com.apple.security.print</key>
    <true/>
    <key>com.apple.security.files.bookmarks.document-scope</key>
    <true/>
</dict>
</plist> 
```

我只能建议使用 Xcode 来构建 plist 并手动剥离那些您不想要的键。在你的情况...

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.security.app-sandbox</key>
    <true/>
    <key>com.apple.security.files.user-selected.read-write</key>
    <true/>
    <key>com.apple.security.network.client</key>
    <true/>
</dict>
</plist> 
```

我只是想知道`!DOCTYPE`签名工具是否出于某种原因需要该元素，并且编码属性应该是大写的。

我还留下了一些可能需要的键，即使你说它是一个基本的 lisp 应用程序，特别是`com.apple.security.files.user-selected.read-write`可以让你访问进程文件的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-30T18:52:00.353

对于通过 Google 搜索找到此内容的人：

我得到了一个几乎相同的错误：

`~/Desktop/Instagram.xcent: cannot read entitlement data`

解决方案是不在`~`路径中使用，而是`/Users/...`

# c - 阶乘程序在 C 为什么不能正常工作？

> ID：15231596
> 
> 赞同：0
> 
> 时间：2013-03-05T18:41:43.467
> 
> 标签：c

我是 c 编程的新手，我制作了一个阶乘程序，但它不能正常工作。我正在添加以下代码：

```
#include <stdio.h>
#include <conio.h>
void main()
{
    int x=1;
    int z,n;
    scanf("%d",&n);
    for(z=1;z<=n;z++)
    {
        x=x*z;
    }
    printf("%d",&x);
    getch();
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:47:11.077

These are the corrections you must make in your program

> 1.  It's `printf("%d", x)` not `printf("%d", &x)`
> 2.  Avoid using `#include<conio.h>`, it is depreciated.
> 3.  It's good practice to use `int main()` instead of `void main()`, and return a positive integer `0`, if all goes well.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T18:43:40.713

使用`printf("%d", x)`而不是`printf("%d", &x)`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T18:45:21.987

作为一元运算符`&x`，将返回 的地址`x`，其类型为`int*`。这可以解释为`int`，但是，当您尝试打印带有错误格式标志的内容时（如果您使用 GCC 尝试`-Wall`作为编译器选项），通常您的编译器会发出警告。

由于您不想打印地址，但`x`只需删除不必要的操作数的值：

```
printf("%d", x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T21:39:36.617

首先，int 的可用空间很小，您的最大值将为 n=15

其次，您不需要使用库`conio.h`

第三，它不工作，因为你正在使用`&x`，擦除它并且会工作

第四，您可以在一行中执行*for 语句*

五、最后`void main()`改成`int main()`添加`return 0;`

第六，这段代码对你有用

```
#include <stdio.h>
int main()
{
    int x=1;
    int z,n;
    scanf("%i",&n);
    for(z=1;z<=n;x*=z++,printf("value of z is =%i , value of  factorial is =%i\n",z,x));
    printf("%i",x);
    return 0;
 } 
```

# c# - 使用 iTextSharp 删除 PDF 不可见对象

> ID：15231599
> 
> 赞同：31
> 
> 时间：2013-03-05T18:42:00.537
> 
> 标签：c#, pdf, itextsharp

是否可以使用 iTextSharp 从 PDF 文档中删除不可见（或至少不显示）的对象？

更多细节：

1）我的来源是一个包含图像和文本（可能是一些矢量图）和嵌入字体的 PDF 页面。

2) 有一个界面可以设计多个“裁剪框”。

3) 我必须生成一个仅包含裁剪框内内容的新 PDF。必须从生成的文档中删除任何其他内容（实际上我可以接受一半在里面一半在外面的内容，但这不是理想的，无论如何也不应该出现）。

到目前为止我的解决方案：

我已经成功开发了一种解决方案，可以创建新的临时文档，每个文档都包含每个裁剪框的内容（使用 writer.GetImportedPage 和 contentByte.AddTemplate 到与裁剪框大小完全相同的页面）。然后我创建最终文档并重复该过程，使用 AddTemplate 方法将每个“裁剪页面”定位在最终页面中。

该解决方案有两大缺点：

*   文件的大小是[原始大小] * [裁剪框的数量]，因为整页都在那里，盖了很多次！（看不见，但它就在那里）
*   仍然可以通过在 Reader 中选择所有 (CTRL+A) 并粘贴来访问不可见的文本。

所以，我想我需要遍历 PDF 对象，检测它是否可见，然后删除它。在撰写本文时，我正在尝试使用 pdfReader.GetPdfObject。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T00:34:52.330

是的，这是可能的。您需要将 pdf 页面内容字节解析为 PdfObjects，将它们存储到内存中，删除不需要的 PdfObject，将 Pdf 内容从 PdfObject 构建回 pdf 内容字节，在通过 PdfWriter 导入页面之前替换 PdfReader 中的页面内容。

我建议你看看这个：**[http ://habjan.blogspot.com/2013/09/proof-of-concept-converting-pdf-files.html](http://habjan.blogspot.com/2013/09/proof-of-concept-converting-pdf-files.html)**

链接中的示例实现 Pdf 内容字节解析，从 PdfObjec 重建，替换 PdfReader 页面内容字节...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T05:47:30.420

如果您尝试的 PDF 是模板/预定义/固定的，那么您可以通过调用 RemoveField 来删除该对象。

```
PdfReader pdfReader = new PdfReader(../Template_Path.pdf"));
PdfStamper pdfStamperToPopulate = new PdfStamper(pdfReader, new FileStream(outputPath, FileMode.Create));
AcroFields pdfFormFields = pdfStamperToPopulate.AcroFields;
pdfFormFields.RemoveField("fieldNameToBeRemoved"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-21T19:12:46.923

```
PdfReader pdfReader = new PdfReader(../Template_Path.pdf"));
PdfStamper pdfStamperToPopulate = new PdfStamper(pdfReader, new FileStream(outputPath, FileMode.Create));
AcroFields pdfFormFields = pdfStamperToPopulate.AcroFields;
pdfFormFields.RemoveField("fieldNameToBeRemoved"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-01T16:00:52.070

这是我找到的三个解决方案，如果它可以帮助某人（使用[iTextSharp](http://sourceforge.net/projects/itextsharp/?source=typ_redirect)、[Amyuni](https://www.amyuni.com/en/developer/)或[Tracker-Software](http://www.tracker-software.com/product/pdf-xchange-editor-sdk)，正如@Hetote 在他正在寻找另一个库的评论中所说）：

**使用 iTextSharp**

正如[@martinbuberl 在另一个问题中回答的那样](https://stackoverflow.com/questions/3369635/how-can-i-crop-the-pdf-page)：

```
public static void CropDocument(string file, string oldchar, string repChar)
{
    int pageNumber = 1;
    PdfReader reader = new PdfReader(file);
    iTextSharp.text.Rectangle size = new iTextSharp.text.Rectangle(
    Globals.fX,
    Globals.fY,
    Globals.fWidth,
    Globals.fHeight);
    Document document = new Document(size);
    PdfWriter writer = PdfWriter.GetInstance(document,
    new FileStream(file.Replace(oldchar, repChar),
    FileMode.Create, FileAccess.Write));
    document.Open();
    PdfContentByte cb = writer.DirectContent;
    document.NewPage();
    PdfImportedPage page = writer.GetImportedPage(reader,
    pageNumber);
    cb.AddTemplate(page, 0, 0);
    document.Close();
} 
```

@rafixwpt 在[他的问题](https://stackoverflow.com/questions/29260154/itextsharp-crop-pdf-file-c)中的另一个答案，但它不会删除不可见的元素，它会清理页面的一个区域，这可能会影响页面的其他部分：

```
static void textsharpie()
{
    string file = "C:\\testpdf.pdf";
    string oldchar = "testpdf.pdf";
    string repChar = "test.pdf";
    PdfReader reader = new PdfReader(file);
    PdfStamper stamper = new PdfStamper(reader, new FileStream(file.Replace(oldchar, repChar), FileMode.Create, FileAccess.Write));
    List<PdfCleanUpLocation> cleanUpLocations = new List<PdfCleanUpLocation>();
    cleanUpLocations.Add(new PdfCleanUpLocation(1, new iTextSharp.text.Rectangle(0f, 0f, 600f, 115f), iTextSharp.text.BaseColor.WHITE));
    PdfCleanUpProcessor cleaner = new PdfCleanUpProcessor(cleanUpLocations, stamper);
    cleaner.CleanUp();
    stamper.Close();
    reader.Close();
} 
```

**使用 Amyuni**

正如[@yms 在另一个问题中回答的那样](https://stackoverflow.com/questions/7890101/crop-pdf-without-keeping-invisible-content-net-or-objc)：

> IacDocument.GetObjectsInRectangle 方法
> 
> GetObjectsInRectangle 方法获取指定矩形中的所有对象。

然后你可以迭代页面中的所有对象，并删除那些你不感兴趣的：

```
//open a pdf document
document.Open(testfile, "");
IacPage page1 = document.GetPage(1);
Amyuni.PDFCreator.IacAttribute attribute = page1.AttributeByName("Objects");

// listObj is an array list of graphic objects
System.Collections.ArrayList listobj = (System.Collections.ArrayList) attribute.Value.Cast<IacObject>();;

// listObjToKeep is an array list of graphic objects inside a rectangle
var listObjToKeep = document.GetObjectsInRectangle(0f, 0f, 600f, 115f,  IacGetRectObjectsConstants.acGetRectObjectsIntersecting).Cast<IacObject>();
foreach (IacObject pdfObj in listObj.Except(listObjToKeep))
{
   // if pdfObj is not in visible inside the rectangle then call pdfObj.Delete();
   pdfObj.Delete(false);
} 
```

正如@yms 在评论中所说，另一种使用 5.0 版中的新方法[IacDocument.Redact](https://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/IacDocument.Redact_Method.htm)的解决方案也可用于删除指定矩形中的所有对象并在其位置绘制一个纯色矩形。

**使用 Tracker-Software Editor SDK**

我没有尝试过，但似乎有可能，请参阅这篇[文章](http://www.tracker-software.com/forum3/viewtopic.php?f=44&t=24305)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-06T20:46:13.667

您是否尝试过使用 IRenderListener？您可以通过检查 TextRenderInfo 或 ImageRenderInfo 对象的 StartPoint 和 EndPoint 或 Area 有选择地将那些元素添加到新的 pdf 中，这些元素属于裁剪区域。

# javascript - 为什么使用 void 关键字？

> ID：15231601
> 
> 赞同：15
> 
> 时间：2013-03-05T18:42:03.263
> 
> 标签：javascript

[我在kriskowal/q](https://github.com/kriskowal/q)遇到了这个片段：

```
/**
 * Applies the promised function in a future turn.
 * @param object    promise or immediate reference for target function
 * @param args      array of application arguments
 */
Q.fapply = fapply;
function fapply(value, args) {
    return dispatch(value, "apply", [void 0, args]);
} 
```

使用[void](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)关键字有什么意义？为什么不直接写`[undefined, args]`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T18:48:45.093

来自[MDN Docs of void](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)

> **句法**
> 
> ```
> void expression 
> ```
> 
> **用途**
> 
> 此运算符允许将产生副作用的表达式插入需要计算结果为 undefined 的表达式的位置。
> 
> *void 运算符通常仅用于获取未定义的原始值*，通常使用“void(0)”（相当于“void 0”）。在这些情况下，可以使用全局变量 undefined 代替（假设它没有被分配给非默认值）。

**为什么？**见[MDN 未定义](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/undefined)

在旧版本的 JavaScript 中`undefined`可能会被覆盖，但从 JavaScript 1.8.5 开始，根据 ECMAScript 5 规范，undefined 是不可写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:53:37.180

void 是 JavaScript 中的一个重要关键字，它可以用作出现在其单个操作数之前的一元运算符，它可以是任何类型。

此运算符指定要计算的表达式而不返回值。它的语法可以是 [以下之一](http://www.tutorialspoint.com/javascript/javascript_void_keyword.htm)

# python - 从 plpython 函数之间传递一个 real[] 作为参数

> ID：15231607
> 
> 赞同：2
> 
> 时间：2013-03-05T18:42:19.943
> 
> 标签：python, postgresql, plpython

我是 python 新手，我正在尝试在 pl/python 中进行一些服务器编程（以实现更快的处理），经过多次尝试，我决定在此列表中寻求帮助。

我想通过传递一个vessel_speed创建的类型从另一个调用一个pl/python函数

```
CREATE TYPE vessel_speed AS (
  mmsi integer,
  sog real[]  
);

CREATE OR REPLACE FUNCTION dummy(c_vessel vessel_speed)
  RETURNS real[]
AS $$
    return c_vessel["sog"]

$$ LANGUAGE plpython3u; 
```

我正在尝试以这种方式从另一个 pl/python 调用虚拟函数：

```
st = "SELECT dummy(($1,ARRAY[$2])::vessel_speed)"
pst = plpy.prepare(st, ["integer", "real[]"])
rv = plpy.execute(pst, [112, (1.2,3.1)]) 
```

返回错误：

```
ERROR: spiexceptions.FeatureNotSupported: cannot convert multidimensional array to Python list
Estado SQL:0A000
Detalle:PL/Python only supports one-dimensional arrays. 
```

任何人都知道如何解决这个问题？...或任何替代解决方案？非常感谢，胡安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T08:24:37.870

如果我理解正确，您的问题是您试图将数组作为元组的成员传递给 python，而 PL/Python 不支持这一点。此问题存在于您的 dummy() 函数中。您可以做的是使用 sql 包装函数仅将数组传递给虚拟函数。就像是：

```
CREATE OR REPLACE FUNCTION dummy(c_vessel vessel_speed)
   RETURNS real[]
AS $$
      SELECT dummy(c_vessal.sog);
$$ language sql;

CREATE OR REPLACE FUNCTION dummy(sog real[]) returns real[] LANGUAGE plpython3u AS
$$
     return sog;
$$; 
```

您的另一个选择是您可以将 sog 存储在字符分隔值中。就像是：

```
CREATE TABLE c_vessal (
   id serial primary key,
   sog text not null,
   check(array_upper(string_to_array(sog, ':')::real[], 1) > 0)
); 
```

# android - Android：BroadcastReceiver 上 AlarmManager 的生命周期

> ID：15231611
> 
> 赞同：1
> 
> 时间：2013-03-05T18:42:41.330
> 
> 标签：android, broadcastreceiver, alarmmanager, lifecycle

我想在特定时间唤醒一项活动。为此，我（也）在 Boot Complete BroadcastReceiver 上注册了 AlarmManager。

据我所知，只有服务可以永远在后台存活以唤醒活动。活动和广播接收器可能因不活动而死。

我拥有的以下代码没有运行服务。但是，它似乎正在工作（即使我在 24 小时后启动它，警报也会起作用）。这安全吗？还是我应该启动一项服务？如果这可以安全使用，这背后的逻辑是什么？为什么由 BroadcastReceiver 创建的 AlarmManger 不会被 Android 生命周期管理器销毁？

```
public class BootReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        if(Intent.ACTION_BOOT_COMPLETED.equals(intent.getAction())) {
            registerAlarm(context);
        }
    }

    private void registerAlarm(Context context)
    {
        Intent intent = new Intent(context, Alarm.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager am =(AlarmManager)context.getSystemService(Activity.ALARM_SERVICE);
        long nextAlarm = System.currentTimeMillis() + 10000; //Some time later.
        am.set(AlarmManager.RTC_WAKEUP, nextAlarm, pendingIntent);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:54:26.140

> 这安全吗？

`AlarmManager`不在乎`PendingIntent`你用的是哪种。

用户可能会或可能不会喜欢突然出现的活动，但这是一个单独的问题。

> 据我所知，只有服务可以永远在后台存活以唤醒活动。

服务不会永远持续下去。

> 活动和广播接收器可能因不活动而死。

不会。您的*流程*可能会“因不活动而死亡”，其中包括该流程中的所有组件。

> 为什么由 BroadcastReceiver 创建的 AlarmManger 不会被 Android 生命周期管理器销毁？

因为`AlarmManager`是系统服务，由操作系统维护，而不是由您的应用程序维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:52:07.327

服务可以随时被 Android 杀死。有关可用于在 android 上触发重复任务或长时间运行任务的选项的详细分析，请查看此线程 - [Scheduling recurring task in Android](https://stackoverflow.com/questions/14376470/scheduling-recurring-task-in-android/)

# git - Jenkins Git 发布失败

> ID：15231613
> 
> 赞同：1
> 
> 时间：2013-03-05T18:42:44.297
> 
> 标签：git, maven, jenkins, hudson, maven-release-plugin

我正在尝试将 Jenkins Maven Release 插件与 Git 合并，但由于找不到 git 可执行文件，该工作失败了。

我的 git repo 是用 ssh 设置的，我可以在 Jenkins 服务器上执行 Git 命令。我可以使用 Jenkins 运行构建，并且成功从 Git 存储库中提取所有内容。

但是当我尝试发布时，Jenkins 找不到 git 命令。我究竟做错了什么？

詹金斯信息：

*   版本 1.504
*   Git 插件 1.2.0
*   Git 客户端插件 1.0.3
*   在 Windows Server 2008 上运行

Git 安装在 Windows 服务器上 - 1.8.1.msysgit.1

```
[INFO] Executing: cmd.exe /X /C "git add -- pom.xml"
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14.305s
[INFO] Finished at: Tue Mar 05 12:26:22 CST 2013
[INFO] Final Memory: 10M/168M
[INFO] ------------------------------------------------------------------------
[JENKINS] Archiving C:\Users\svctpsolap\jenkins_home\jobs\NBEntity\workspace\nbentity\pom.xml to C:\Users\svctpsolap\jenkins_home\jobs\NBEntity\modules\com.nb$nbentity\builds\2013-03-05_13-26-05\archive\com.nb\nbentity\0.0.1-SNAPSHOT\nbentity-0.0.1-SNAPSHOT.pom
Waiting for Jenkins to finish collecting data
mavenExecutionResult exceptions not empty
message : Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.0:prepare (default-cli) on project nbentity: Unable to commit files
Provider message:
The git-add command failed.
Command output:
'git' is not recognized as an internal or external command,
operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:25:26.023

将路径添加`git.cmd`到系统`PATH`环境。然后重启windows生效（单独重启Jenkins服务是不行的）。

# php - 在插入数据时使用 htmlspecialchars 时以正确格式从数据库中检索 html 数据

> ID：15231627
> 
> 赞同：0
> 
> 时间：2013-03-05T18:43:12.887
> 
> 标签：php, mysql

你好，我试图将整个 html 数据插入到我使用的数据库中

```
$details = htmlspecialchars(stripslashes(mysql_real_escape_string($_POST['message']))); 
```

这似乎像以前一样工作正常，因为在`""`插入 html 时有额外的错误，例如`"<p>hello</p>"`，通过使用上面的内容，当我试图检索数据时，它现在已经插入，它的格式不正确。

有人能告诉我用什么`<?php echo $row['details']; ?>`来获得正确的 html 格式吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:00:39.490

不要使用`stripslashes`. 因为`mysql_real_escape_string`把 / 放在每个报价之前`(" ')`。当您使用 stripslashes 时，它将删除该斜杠。所以你没有得到正确的输出

# performance - DB2 concat 与双管道

> ID：15231631
> 
> 赞同：7
> 
> 时间：2013-03-05T18:43:24.717
> 
> 标签：performance, db2, double, pipe, concat

这两个视图中的哪一个需要更少的 CPU？

我目前正在检查一些视图的语句，需要知道如果将concat函数替换为双管道，是否有一些性能提升。

```
create view VIEW1 as
select concat(concat(concat(concat(concat(concat(concat(concat(concat(A, B),C),D),E),F),F),G),H),I) from TABLE

create view VIEW2 as
select A||B||C||D||E||F||G||H||I from TABLE 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T22:46:30.140

从[信息中心](https://www.ibm.com/docs/en/SSEPEK_12.0.0/sqlref/src/tpc/db2z_bif_concat.html)：

> CONCAT 函数与 CONCAT 运算符相同。有关更多信息，请参阅[使用串联运算符](https://www.ibm.com/docs/en/SSEPEK_12.0.0/sqlref/src/tpc/db2z_withconcatoperator.html#db2z_withconcatoperator)。

所以，明确的答案是：它们是一样的。但是，IBM 确实有这样的说法：

> 竖线（或在某些国家/地区必须用来代替竖线的字符）可能会导致从一个 DBMS 传递到另一个 DBMS 的语句中的解析错误。如果语句使用源和目标 CCSID 的某些组合进行字符转换，则会出现问题。因此，CONCAT 是更可取的连接运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:21:47.807

我认为不会有性能差异，但使用管道更容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-06T19:38:19.303

为什么不简单地做

创建视图 VIEW1 作为 select A concat B concat C concat D concat E concat F concat F concat G concat H concat I from TABLE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-27T10:20:39.747

不确定性能，但它们在处理`null`值时表现不同。请参阅：[字符串与 null 的连接似乎会使整个字符串无效 - 这是 Postgres 中所需的行为吗？](https://stackoverflow.com/questions/34934762/string-concatenation-with-a-null-seems-to-nullify-the-entire-string-is-that-de)

# php - Symfony2 捆绑包中是否支持 OAUTH2 的“资源所有者密码凭据授予”身份验证流程？

> ID：15231634
> 
> 赞同：1
> 
> 时间：2013-03-05T18:43:39.663
> 
> 标签：php, rest, symfony, oauth-2.0

我编写了一个支持 OAUTH2 的“资源所有者密码凭据授予”身份验证工作流程的 API。[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.3](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.3)

我有一个 Symfony2 应用程序，希望用户能够将他们的用户名和密码输入到表单中，并让安全系统将这些与我的 API 交换为 access_token。

我知道可以编写自定义身份验证处理程序来完成此任务，但如果可能的话，我想使用现成的工具。经过一些研究，我可以看到很多库只支持更传统的 3 腿工作流。

是否有任何库将“资源所有者密码凭据授予”工作流程集成到 Symfony 安全系统中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T11:07:20.603

是的，[FOSOAuthServerBundle](https://github.com/FriendsOfSymfony/FOSOAuthServerBundle)可以。授予类型：client_credentials

[这里](http://blog.logicexception.com/2012/04/securing-syfmony2-rest-service-wiith.html)有一些文档，不是特定于“资源所有者密码凭据授予”的，但您应该能够解决。如果你这样做了，请在 GitHub 上创建一个 PR，并为该包提供一些额外的文档。

# javascript - Rails - 如何重构 application.js？

> ID：15231637
> 
> 赞同：1
> 
> 时间：2013-03-05T18:43:49.567
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap

我的 application.js 文件越来越乱。

应用程序.js：

```
//
//= require jquery
//= require jquery_ujs
//= require bootstrap
$(document).ready(function(){
$('#authorinfo').popover();
});
$(document).ready(function(){
$('#publisherinfo').popover();
});
...[and many more similar functions] 
//= require_tree . 
```

看法：

```
<a class="btn inline" href="#" id="authorinfo" rel="popover" data-content="Section...."><i class="icon-question-sign"></i></a> 
```

bootstrap popover javascript似乎不适用于类，只有id元素，我也很难将javascript移出application.js。

关于如何重构的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:12:38.150

您可以在单独的文件中提取 appplication.js 之外的代码。如果你使用`//=require_tree .`它会自动包含到页面js中

# javascript - 隐藏在 javascript 中的文档元素

> ID：15231638
> 
> 赞同：2
> 
> 时间：2013-03-05T18:43:52.340
> 
> 标签：javascript, html, html5-canvas

在我目前正在开发的一个 Web 应用程序中，我遇到了一些处理 javascript 文档可见性的问题。在这个应用程序中，我有一个 div，其中包含一个表示节点和边网络的 InfoVis 图，并且我为它实现了拖动缩放功能。如果您不熟悉它（很可能），InfoVis 是一个 js 库，可将图形和其他可视化呈现到 HTML5 画布中。

我对 InfoVis 的核心 .js 进行了很多修改以自定义外观和功能，这就是我计划实现拖动缩放的地方。

我正在处理的 .html 页面加载 InfoVis 核心和它自己的带有`<script../>`标签的 .js 文件。

在 InfoVis 核心中，`onMouseDown: function(e) { alert("click"); }`为画布背景定义按预期工作，但是，当涉及更改 div（在实际的 .html 文件中实例化并在 .css 文件中设置样式）时，如下所示：

```
onMouseDown: function(e) {
  e = e || window.event;
  dragging = true;
  $("#dragZoom")[0].style = "display: block; width: 0px; height: 0px; left: "+e.clientX+"; top: "+e.clientY+";";
} 
```

设置 div 的新样式，`$("#dragZoom")`在`[0]`. 换句话说，javscript 块看不到文档中的 div。

但是，如果我`function foo() { alert($("#dragZoom")[0]); }`在另一个 .js 文件（不是 InfoVis 核心）中定义一个函数，我可以像这样调用 foo()

```
onMouseDown: function(e) {
  foo();
} 
```

并且 foo() 可以访问 div！

当它们都以相同的方式加载时，为什么从一个 .js 文件而不是另一个文件中可以看到这一点..？这并没有阻止我完成任何事情，但我认为这很奇怪，想知道发生了什么。感谢您提供任何信息！

# javascript - 如何识别javascript中的动态html对象？

> ID：15231639
> 
> 赞同：0
> 
> 时间：2013-03-05T18:43:55.913
> 
> 标签：javascript

我有一个如下所示的 html 代码。我想知道如何在 javascript 中动态识别 sessionEventsDecorator[0].startDateStr、sessionEventsDecorator[1].startDateStr。目的是确保用户输入的年份值不大于 2013。

```
&lt;input id="sessionEventsDecorator[0].startDateStr" name="sessionEventsDecorator[0].startDateStr" class="text small" onchange="formDirty();" type="text" value="Mar 05, 2013"/&rt;

&lt;input id="sessionEventsDecorator[1].startDateStr" name="sessionEventsDecorator[1].startDateStr" class="text small" onchange="formDirty();" type="text" value="Mar 05, 2013"/&rt; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:49:37.933

```
document.getElementById("sessionEventsDecorator[0].startDateStr").value <=2013 
```

这将为您检查。但我不认为你理解 ids 是如何正常工作的。ID 不是动态的，也不能作为数组工作，它们作为单个 html 对象的唯一标识符。

像“sessionEventDecoratorDate0”这样的东西会更正常。

如果您想遍历所有这些并且不知道有多少，您可以通过以下方式获取值

```
var counter=0;
while (true){
  var element = document.getElementById("sessionEventsDecorator["+counter+"].startDateStr");
  if(element){
   counter++;
   //do logic here on element
  }
  else{
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:03:45.013

好的，根据您对 Sebas 的回答的评论，我认为这就是您正在寻找的，基于我们可以看到您的代码：

```
var loopIndex = 0;

while (document.getElementById("sessionEventsDecorator[" + loopIndex + "].startDateStr"))
{
    var inputField = document.getElementById("sessionEventsDecorator[" + loopIndex + "].startDateStr");

    . . . logic to check date . . .

    loopIndex++;
} 
```

话虽如此，您的 div 的命名约定有点令人困惑。简化 id 将有助于提高可读性。此外，如果您可以使用 JQuery 并为所有这些输入提供一个公共类，那么还有更简洁的迭代方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:04:17.303

您应该将元素的 id 和 name 属性设置为更简单的东西：

```
<input type="text" class="text small" onchange="formDirty()" name="dateDecorator0" id="dateDecorator0">

<input type="text" class="text small" onchange="formDirty()" name="dateDecorator1" id="dateDecorator1"> 
```

现在我们有了一些易于使用的东西。因此，在我们的 Javascript 中，我们现在可以使用`document.getElementById("dateDecorator"+i).value`. 但老实说，我什至不知道为什么要在 formDirty() 函数中执行此操作，它应该看起来像这样：

```
function formDirty(){
    var val=this.value;
    if(val.substr(val.indexOf(",")+2) > 2013){
        this.value=val.substr(0,val.indexOf(",")+2)+"2013";
    };
} 
```

# php - 正则表达式匹配字符串 BAR，只要字符串 FOO 在它之前没有出现

> ID：15231640
> 
> 赞同：3
> 
> 时间：2013-03-05T18:43:59.067
> 
> 标签：php, regex

我正在尝试编写一个仅对包含 FOO 的 BAR 字符串为真的正则表达式。

例如，正则表达式不会匹配这个：

```
FOO IS BAR 
```

但会匹配这个：

```
BAZ IS BAR 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:48:11.870

```
(?<!FOO.*)BAR 
```

is the correct regex for this (but it only works with the .NET regex engine).

`(?<!FOO.*)` is a [negative lookbehind assertion](http://www.regular-expressions.info/lookaround.html) that asserts that it's not possible to match any string containing `FOO` before the current position.

In PHP, you don't have infinite lookbehind. An alternative would be

```
^(?:(?!FOO|BAR).)*BAR 
```

**Explanation:**

```
^     # Start of string
(?:   # Match...
 (?!  # (unless the following can be matched here:
  FOO #  either FOO
 |    #  or
  BAR #  BAR)
 )    # (end of lookahead)
 .    # ... any character.
)*    # Repeat as needed
BAR   # Match BAR 
```

However, even this doesn't work with the deprecated `ereg` functions. You need `preg` functions in order to be able to use lookaround assertions.

But I think there is a way that works with `ereg`:

```
^(FO?|[^FO]|[^O]O)*BAR 
```

**Explanation:**

```
^      # Start of string
(      # Either match:
 FO?   # F or FO
|      # or
 [^FO] # any character except F or O
|      # or
 [^O]O # any non-O character followed by O
)*     # any number of times
BAR    # Then match BAR 
```

However, this will get very complicated very quickly if your exclusion string is more complicated than `FOO`...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T18:48:01.930

You can use this regex

```
^(?=.*BAR)(?!.*?FOO.*?BAR).*$
 --------- --------------
     |           |
     |           |proceed only if there's no FOO before BAR...
     |->proceed only if there's a BAR...CHEERS.. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T19:02:04.560

您可能会发现将其放入两个正则表达式更容易。例如，如果我们在谈论 Perl，你可以这样做

```
if ( /BAR/ && !/FOO.*BAR/ ) 
```

对我来说，这比试图做负面的回顾要清楚得多。

由于您似乎在 PHP 中，我认为 preg_match on`/BAR/`和另一个 on not matching没有任何问题`/FOO.*BAR/`。

# ios - Dropbox API 检查文件是否更新

> ID：15231641
> 
> 赞同：0
> 
> 时间：2013-03-05T18:44:01.797
> 
> 标签：ios, xcode, dropbox

我正在寻找某种方法来检查文件何时在 Dropbox 上更新以告知用户。我发现最好的是属于 Sync API 的代码片段，它观察是否有任何变化：

```
// First, create a file for you to change
DBPath *path = [[DBPath root] childPath:@"change-me.txt"];
self.file = [[DBFilesystem sharedFilesystem] createFile:path error:nil];

// Next, register for changes on that file
[self.file addObserver:self block:^() {

// This block will be called every time your file changes

// if newerStatus is not nil, it means a newer version is available
DBFileStatus *newerStatus = file.newerStatus;
if (newerStatus) {

if (!newerStatus.cached) {
NSLog(@"newerStatus.cached == NO; this means the file downloading");
} else {

// Update to the newly available version and print it out
[file update:nil];
NSLog(@"The file is done downloading: %@", [file readString:nil]);
}
}
}]; 
```

有任何想法吗？我实际上是想添加 Sync api 只是为了使用此功能，但我不认为添加两个 Dropbox SDK 是正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:25:35.633

我推荐使用 Sync API，我们正在努力确保 Core API 的大部分功能都可以使用 Sync API。否则，您可以使用实际为 Sync API 提供支持的 REST API的[/delta 端点。](https://www.dropbox.com/developers/core/api#delta)

# powershell - 比较两个数组与顺序问题？

> ID：15231643
> 
> 赞同：0
> 
> 时间：2013-03-05T18:44:23.620
> 
> 标签：powershell

我有以下脚本

```
$a = @(1, 2, 3)
$b = @(2, 3, 1)
if (compare -ReferenceObject $a -DifferenceObject $b) 
{ 
    echo "Output expected" 
} 
```

我希望脚本输出字符串，因为两个数组的元素顺序不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:53:03.280

你的问题不是很清楚。但你可以做一个：

```
Compare-Object $a $b -SyncWindow 0 
```

[在这里](http://dmitrysotnikov.wordpress.com/2008/06/06/compare-object-gotcha/)查看一些解释。

# python - 使用 pandas.io.sql.read_frame，我可以像 read_csv 一样解析日期吗？

> ID：15231646
> 
> 赞同：7
> 
> 时间：2013-03-05T18:44:40.657
> 
> 标签：python, sql, datetime, pandas

我正在使用以下`data_frame`方法直接从数据库中读取`pandas.io.sql.read_frame`：

```
cnx = pandas.io.sql.connect(host='srv',user='me',password='pw',database='db')
df = pandas.io.sql.read_frame('sql_query',cnx) 
```

它在检索数据方面效果很好。但我想将其中一列解析为`datetime64`，类似于从 CSV 文件读取时可以执行的操作，例如：

```
df2 = pandas.io.read_csv(csv_file, parse_dates=[0]) 
```

但是没有`parse_dates`标志`read_frame`。推荐什么替代方法？

同样的问题适用于`index_col`in read_csv，它指示哪个列。应该是索引。有没有推荐的方法来使用 read_frame 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-15T07:58:06.143

这个问题现在已经很老了。pandas 0.10 也很老了。在最新版本的 pandas 0.16 中，read_frame 方法已被弃用，取而代之的是 read_sql。即便如此，文档说就像 read_csv 函数一样，它需要一个 parse_dates 参数[Pandas 0.16 read_frame](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.sql.read_frame.html)

似乎 parse_dates 参数出现在 0.14 中，同时 read_frame 被贬低了。read_sql 函数似乎是 read_frame 的重命名，因此只需将您的 pandas 版本更新到 0.14 或更高版本并重命名您的函数即可访问此参数。这是 read_sql 函数的文档：[Pandas 0.16 read_sql](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.sql.read_sql.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T16:28:57.627

```
data_frame["column"] = pandas.to_datetime(data_frame["column"]) 
```

默认情况下应该可以工作，但如果没有，您可以指定选项。请参阅[文档](http://pandas.pydata.org/pandas-docs/version/0.13.1/generated/pandas.tseries.tools.to_datetime.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T08:13:12.783

```
df = pandas.io.sql.read_frame('sql_query', index=['date_column_name'], con=cnx) 
```

其中`date_column_name`是数据库中包含日期元素的列的名称。`sql_query`那么应该是形式`select date_column_name, data_column_name from ...`

如果它类似于日期字符串，Pandas（从 0.13+ 开始）将自动将其解析为日期格式。

```
In [34]: df.index
Out[34]: 
    <class 'pandas.tseries.index.DatetimeIndex'> 
```

# mvvm - 我的 prism 服务应该何时注册？

> ID：15231652
> 
> 赞同：1
> 
> 时间：2013-03-05T18:45:00.527
> 
> 标签：mvvm, service, prism, unity-container, bootstrapper

我一直在努力寻找理想的方法。现在，我在创建应用程序 shell 之前在 Boostrapper 中创建了我的服务，方法是：

```
protected override DependencyObject CreateShell() 
```

创建外壳后，我创建所有视图模型，传递他们需要的服务。

所以首先，我想知道这是否是一个好习惯。另外，我尝试在 .config 文件中找到声明服务的示例，但我真的没有看到任何示例。这也不是一个好习惯吗？

例子：

```
 protected override DependencyObject CreateShell()
    {
        appWnd = ServiceLocator.Current.GetInstance<ApplicationWindow>();
        Container.RegisterInstance<ILicensing>(new LicensingService());
        Container.RegisterInstance<IAnotherService>(new AnotherService());

        return appWnd;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:23:26.710

UnityBootstrapper 的方法 ConfigureContainer() 应该被覆盖以执行您的要求：

> **MSDN - 配置容器：**
> 
> 复合应用程序库和在它之上构建的应用程序都依赖于一个容器来注入所需的依赖项。在容器配置阶段，注册了几个核心服务，如 UnityBootstrapper 中的以下代码所示。

[UnityBootstrapper 上的 MSDN](http://msdn.microsoft.com/en-us/library/ff921139%28v=pandp.20%29.aspx)

MSDN 示例：

```
protected virtual void ConfigureContainer()
{
    …
    if (useDefaultConfiguration)
    {
        RegisterTypeIfMissing(typeof(IServiceLocator), typeof(UnityServiceLocatorAdapter), true);
        RegisterTypeIfMissing(typeof(IModuleInitializer), typeof(ModuleInitializer), true);
        RegisterTypeIfMissing(typeof(IModuleManager), typeof(ModuleManager), true);
        RegisterTypeIfMissing(typeof(RegionAdapterMappings), typeof(RegionAdapterMappings), true);
        RegisterTypeIfMissing(typeof(IRegionManager), typeof(RegionManager), true);
        RegisterTypeIfMissing(typeof(IEventAggregator), typeof(EventAggregator), true);
        RegisterTypeIfMissing(typeof(IRegionViewRegistry), typeof(RegionViewRegistry), true);
        RegisterTypeIfMissing(typeof(IRegionBehaviorFactory), typeof(RegionBehaviorFactory), true);
    }
} 
```

您也可以在此处注册实例等，`Container`直接使用，就像您已经做的那样。

CreateShell() 方法不是执行此操作的地方，因为您应该在此处创建外壳。

因此，简而言之，只需覆盖 ConfigureCatalog() 并将您的代码粘贴到那里。

# vb.net - 在一个表单上显示来自 3 个 SQL 表的数据

> ID：15231656
> 
> 赞同：0
> 
> 时间：2013-03-05T18:45:17.203
> 
> 标签：vb.net, visual-studio-2010, sql-server-ce

我有一个自己的程序，供我自己使用，用 Excel VBA 编写并使用 Access，我想使用 SQLCE 在 VB2010 Express 中重写。

它目前根据所附图片显示一个表格。

![我的 VBA 表单](../Images/e166826f7e5366ac82e210e86c789a7c.png)

复制类似东西的最佳方法是什么？我知道我可以为每一行创建单独的按钮和文本框，但我想知道是否有更好的方法。我尝试使用 DataGridView，但是 (a) 它非常难看 & (b) 它不允许我使用多个表！！！

如有必要，我不介意使用大量单独的按钮和文本框，但我想我会在这样做之前询问可能更了解的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:23:14.807

您可以寻找 DataGridView 的替代方案，即 3rd 方实现。它们绝对应该具有更令人愉悦的外观，并提供更好的定制。例如：

*   [SourceGrid - 开源 C# 网格控件](http://www.codeproject.com/Articles/3531/SourceGrid-Open-Source-C-Grid-Control)

还要检查这个：

*   [数据中继器控制](http://msdn.microsoft.com/en-us/vstudio//bb735936.aspx)。

两者都从这里引用：

*   [重复 WinForms 数据有比 DataGridView 更好的选择吗？](https://stackoverflow.com/questions/496409/is-there-a-better-option-than-datagridview-for-repeating-winforms-data)

# c# - 如何将控件序列化为 JSON？

> ID：15231657
> 
> 赞同：1
> 
> 时间：2013-03-05T18:45:20.300
> 
> 标签：c#, .net, xml, json, linq

我曾经将控制信息存储在 XML 文件中，如下所示：

```
<Controls>
    <Label Id="heading" Text="This is a heading!" FontStyle="(FontStyleDataHere)" Location="20, 10" />
    <Label Id="bodyText" Text="This is Body text." FontStyle="(FontStyleDataHere)" Location="20, 70" />
</Controls> 
```

我一直在寻找我去年拥有的许多页代码的打印版本，这是我留下的唯一备份，现在找不到。

而且由于我不记得我到底是怎么做到的，我总是觉得 XML 非常乏味。所以我想，为什么不试试 JSON。好像轻松了一些...

现在，给定上面的代码，我能够创建一个 Person 类型的类，并序列化对象并将其写入文件（或控制台 - 随便）：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Json;
using System.Text;
using System.Threading.Tasks;

namespace SerializeToJson
{
    class Program
    {
        [DataContract]
        internal class Person
        {
            [DataMember]
            internal String Name;

            [DataMember]
            internal Int32 Age;
        }

        static void Main(string[] args)
        {
            Person person = new Person()
            {
                Name = "Jason rules.",
                Age = 19
            };

            MemoryStream stream = new MemoryStream();
            DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(Person));
            serializer.WriteObject(stream, person);

            stream.Position = 0;

            StreamReader reader = new StreamReader(stream);
            Console.Write("Json form of Person object: ");
            Console.WriteLine(reader.ReadToEnd());

            Console.ReadKey();
        }
    }
} 
```

但问题是，我不知道如何将控件序列化为 Json。这是我真正需要的。而且，显然，我需要在稍后的时间点反序列化它们，以便可以在运行时重新创建它们。

可以使用 JSON 来完成，还是建议我仍然使用 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:59:09.870

好的，我在这里理解的是，我试图给出答案，您可以为您的 xml 对象创建等效的类。

Lable 对象的等效类

```
Public class Lable
{
   [DataMember]
    String Id{get;set;};

    [DataMember]
     String Text {get;set;};

    [DataMember]
    string FontStyle{get;set;}

} 
```

控制对象的等效类

```
Public class Controls
{
   [DataMember]
   public List<Lable> Lables{ get;set; }
} 
```

现在你只需要序列化`Controls`包含多个的对象`Lable`

现在您可以像这样使用 JavaScriptSerializer 简单地序列化对象

```
JavaScriptSerializer serializer = new JavaScriptSerializer(); 
```

**序列化：**

```
 string jsonString = serializer.Serialize(objControls); 
```

**反序列化：**

```
Controls objControls=serializer.Deserialize<Controls>(jsonString); 
```

# cryptography - 如何使用 ansible 创建用户并设置密码？

> ID：15231661
> 
> 赞同：21
> 
> 时间：2013-03-05T18:45:24.037
> 
> 标签：cryptography, pycrypto, ansible

[文档](http://docs.ansible.com/ansible/user_module.html)向我们介绍了 github[示例](https://github.com/ansible/ansible-examples/blob/master/language_features/user_commands.yml)，但这有点稀疏和神秘。

它是这样说的：

```
# created with:
# crypt.crypt('This is my Password', '$1$SomeSalt')
password: $1$SomeSalt$UqddPX3r4kH3UL5jq5/ZI. 
```

但[`crypt.crypt`](http://docs.python.org/2/library/crypt.html)不会发出示例显示的内容。它还使用 MD5。

我试过这个：

```
# python
import crypt
crypt.crypt('This is my Password', '$6$somereallyniceandbigrandomsalt$')
>> '$69LxCegsnIwI' 
```

但是用户的密码字段应该是这样的：

```
password: $6$somereallyniceandbigrandomsalt$UqddPX3r4kH3UL5jq5/ZI. 
```

其中包括三个分隔符*$*分隔符`6`（表示它是 SHA-512 哈希）、盐和加密密码。

请注意，python [crypt 文档](http://docs.python.org/2/library/crypt.html)没有提到任何关于*$N*格式的内容。

问题：

1.  提供给 的盐是`crypt.crypt`应该以尾随*$*结尾还是*$N$SALT*格式？

2.  Python 文档引用了 DES，但是如何调用 SHA-512 或 MD5，这方面的文档在哪里？

3.  我真的应该输出`crypt.crypt`并切断前*6 美元*并制作*$N$SALT$CRYPTED*吗？这是ansible需要的吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-08-01T10:56:39.253

文档中显示的 python 示例取决于您使用的操作系统上运行的 crypt 版本。

我在 OS X 上生成了 crypt，我的目标服务器是 ubuntu。

由于操作系统提供的 crypt 实现的不同，结果是不同的和不兼容的。

改用这个：

[http://pythonhosted.org/passlib/](http://pythonhosted.org/passlib/)

> Passlib 是 Python 2 和 3 的密码哈希库，它提供了 30 多种密码哈希算法的跨平台实现，以及管理现有密码哈希的框架。它被设计用于广泛的任务，从验证 /etc/shadow 中的哈希到为多用户应用程序提供全强度密码哈希。

```
>>> # import the hash algorithm
>>> from passlib.hash import sha512_crypt

>>> # generate new salt, and hash a password
>>> hash = sha512_crypt.encrypt("password")
>>> hash 
```

'$6$rounds=656000$BthPsosdEpqOM7Qd$l/ln9nyEfxM67ea8Bvb79JoW50pGjf6iM87taIvfSmpjasE4/wBG1.60pFS6W992T7Q1q2wikMbxYUvMHD1tT1'

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-04T01:43:58.883

这已在[Ansible 文档](https://docs.ansible.com/ansible/latest/reference_appendices/faq.html#how-do-i-generate-encrypted-passwords-for-the-user-module)中更新。有两种首选方式：

> 如何为用户模块生成加密密码？

> 大多数 Linux 系统上可用的 mkpasswd 实用程序是一个不错的选择：
> 
> `mkpasswd --method=SHA-512`如果您的系统上未安装此实用程序（例如，您使用的是 OS X），那么您仍然可以使用 Python 轻松生成这些密码。首先，确保已安装 Passlib 密码哈希库。
> 
> `pip install passlib`
> 
> 库准备就绪后，即可生成 SHA512 密码值，如下所示：
> 
> `python -c "from passlib.hash import sha512_crypt; import getpass; print sha512_crypt.encrypt(getpass.getpass())"`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-31T19:27:22.033

这对我有用（使用 python 2.7.4）：

```
python
>>> import crypt
>>> crypt.crypt('thisismypassword', '$6$Som3S@lt$')
'$6$Som3S@lt$XGoe9ONI00NaTkYn46CLDr8TSkvkovahinFqy95vrSe5Hzx2999C9mgF76ODFRnXMJHUCWFHLdkYd3c7AB9WV.' 
```

我有一个看起来像这样的 vars.yml：

```
---
password: $6$Som3S@lt$XGoe9ONI00NaTkYn46CLDr8TSkvkovahinFqy95vrSe5Hzx2999C9mgF76ODFRnXMJHUCWFHLdkYd3c7AB9WV. 
```

和这样的 playbook.yml ：

```
---
- hosts: vagrant
  vars_files:
    - vars.yml
  user: vagrant

  tasks:
  - name: create artefactual user
    user: name=artefactual state=present password={{password}} shell=/bin/bash 
```

我使用 vagrant, 运行我的剧本`vagrant up`，然后从另一个控制台我可以使用 ansible 创建的人工用户和密码 ssh 到新创建的虚拟机`thisismypassword`。

我只是将 crypt.crypt 的输出复制到名为 password 的 ansible 变量中并使用它。您在问题中显示的 crypt 输出看起来太短了，我不确定您为什么会这样，也许是不同版本的 python？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-26T00:59:04.200

您可以使用能够处理加密密码生成的 jinja2 过滤器。这是一个使用提供的密码创建 linux 用户的工作示例：

```
- name: Creating Linux User
  user:
    name: "{{ myuser }}" 
    password: "{{ mypassword | password_hash('sha512') }}" 
```

希望这会对您和其他人有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-14T14:20:04.527

我接受了[@felix 的回答](https://stackoverflow.com/a/17992126/117471)并将其制作成一个脚本，我可以将其包含在我正在处理的 docker 项目中。我知道很多开发人员使用 macOS/OSX 并且该`mkpasswd`平台上没有，所以我将他们保存为谷歌搜索。

我添加了以下选项：

*   PROCESS_TIME *（布尔值）*
    *   启用带有轮数和 CPU 时间的第二行输出
*   ROUNDS *（整数）*
    *   覆盖[default_rounds](http://passlib.readthedocs.io/en/stable/narr/hash-tutorial.html#choosing-the-right-rounds-value)值，该值在“平均”系统上调整为大约 300 毫秒。您需要至少 100 毫秒，但应该尽可能长。

```
#!/usr/bin/env python3

# Because OSX doesn't have mkpasswd...

# Based on https://stackoverflow.com/a/17992126/117471
# python3 -c "from passlib.hash import sha512_crypt; print(sha512_crypt.encrypt(input()))" <<< bruno  # NOQA

# Usage:
#
# $ ./mkpasswd.py
# Password:
# $6$rounds=656000$pfFmQISGcjWHOCxW$rBptiSK.tqSPnUiq6KiSHzz6LvvW/x1SjkkWFwxWB9Dt75NLNBs0N3OyGV4K5ejjBs/u.o3jtigvUKbmmwVQP.
#
# $ PROCESS_TIME=1 ./mkpasswd.py
# Password:
# $6$rounds=656000$e0OGrad82DBrUo9T$ldqtOdN54gmXI6nb0D.Y5mm5ih.LIQm/Ep/bkNL76.3hE65FqXA9wyZ.M5YOrv6dSvwhPAktXGJ6LJT0Fgd4x.
# 656000 rounds in 1.008705 seconds of cpu time
#
# $ ROUNDS=1280000 PROCESS_TIME=1 ./mkpasswd.py <<< bruno
# $6$rounds=1280000$QO5FSyw5rQpiY6PI$0zRMJ4RzCbH61XxIdpsUm/79.VZ13Mm9TBN9GvJwt1LI1U5FVzakrLya5VJsXlTou3p5ZeWmo29bIUjubRuc31
# 1280000 rounds in 1.9206560000000001 seconds of cpu time

import os
import sys
import time
from getpass import getpass
from passlib.hash import sha512_crypt

rounds = os.environ.get('ROUNDS')
if not rounds:
    rounds = sha512_crypt.default_rounds

passwd = input() if not sys.stdin.isatty() else getpass()

proc = sha512_crypt.using(rounds=rounds)
start = time.process_time()
out = proc.encrypt(passwd)
end = time.process_time()

print(out)

if os.environ.get('PROCESS_TIME'):
    print('{} rounds in {} seconds of cpu time'.format(rounds, end-start)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-15T18:55:12.790

我一直在使用以下 shell 命令来设置密码。

```
- name: "Set user password: someuser"
  command: 'echo "somepassword"| passwd --stdin "someuser"'
  sudo: yes 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-09T15:14:11.500

试试这样

```
vars_prompt:
 - name: "user_password"    
   prompt: "Enter a password for the user"    
   private: yes    
   encrypt: "md5_crypt" #need to have python-passlib installed in local machine before we can use it    
   confirm: yes    
   salt_size: 7

 - name: "add new user" user: name="{{user_name}}" comment="{{description_user}}" password="{{user_password}}" home="{{home_dir}}" shell="/bin/bash" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-08T06:17:17.310

这需要`pwgen`安装在目标主机上：

```
- name: generate linux user password
  local_action: shell /usr/bin/pwgen 16 1
  register: generated_linux_user_password 
```

如果您需要全局可用的“变量”，请使用 和 hostvars（事实在创建后是只读的`hosts: localhost`）：`set_fact`

```
{{hostvars['localhost']["new_fact"]}} 
```

# java - 最近的 JXTreeTable 的列跨度？

> ID：15231662
> 
> 赞同：1
> 
> 时间：2013-03-05T18:45:24.473
> 
> 标签：java, swingx, jxtreetable

我试图让一个特定的单元格跨越几列，像这样

![列跨越的 JXTreeTable](../Images/ee81afe50ff6c5af604014929a2929b2.png)

不过我想不通，我[在论坛上](http://www.java.net/node/691190)发现该图像有一些代码不起作用，因为它们是我不知道如何获取的随机变量。从其他一些问题来看，尽管他这样做的方式似乎是错误的方式。

有谁知道如何使用最新版本的 SwingX 来做到这一点，可能还有自 2009 年以来添加的新功能？

# dynamics-crm-2011 - CRM 以编程方式创建 CustomerAddress

> ID：15231664
> 
> 赞同：2
> 
> 时间：2013-03-05T18:45:28.050
> 
> 标签：dynamics-crm-2011, custom-activity

我正在尝试进行一项将地址从潜在客户迁移到联系人的活动。我们在 CRM 部署中不使用默认地址 1 和地址 2（不是我的决定），因此尽管资格认证过程确实将在线索中输入的地址复制到联系人，但它使用地址 1 字段这样做。我正在使用下面的代码，一切似乎都正常（没有错误注册，没有错误运行使用此活动的工作流）。只有一个问题……什么都没有发生。虽然没有错误，但没有创建地址。我以 CRM 管理员的身份运行，所以这不应该是权限问题，但是即使它不应该产生安全异常？任何想法为什么这不起作用？

```
public class MigrateLeadAddressToContactActivity : CodeActivity
{
    [Input("Contact input")]
    [ReferenceTarget("contact")]
    public InArgument<EntityReference> InContact { get; set; }

    protected override void Execute(CodeActivityContext executionContext)
    {
        // Get the tracing service                         
        var tracingService = executionContext.GetExtension<ITracingService>();

        if (InContact == null)
        {
            const string errorMessage = "Contact was not set for Address Migration Activity";
            tracingService.Trace(errorMessage);
            throw new InvalidOperationException(errorMessage);
        }

        // Get the context service.                         
        var context = executionContext.GetExtension<IWorkflowContext>();
        var serviceFactory = executionContext.GetExtension<IOrganizationServiceFactory>();

        // Use the context service to create an instance of CrmService.             
        var service = serviceFactory.CreateOrganizationService(context.UserId);

        //Retrieve the contact id
        var contactId = this.InContact.Get(executionContext).Id;

        // Get The Lead if it exists
        var query = new QueryByAttribute
                    {
                        ColumnSet = new ColumnSet(
                            new[]
                            {
                                "address1_line1",
                                "address1_line2",
                                "address1_line3",
                                "address1_city",
                                "address1_stateorprovince",
                                "address1_postalcode",
                                "address1_country",
                            }
                        ),
                        EntityName = "lead"
                    };

        // The query will retrieve all leads whose associated contact has the desired ContactId
        query.AddAttributeValue("customerid", contactId); 

        // Execute the retrieval.
        var results = service.RetrieveMultiple(query);

        var theLead = results.Entities.FirstOrDefault();
        if (null == theLead)
        {
            tracingService.Trace("Activity exiting... Contact not sourced from Lead.");
            return;
        }

        var newAddress = new Entity("customeraddress");
        newAddress.Attributes["name"] = "business";
        newAddress.Attributes["objecttypecode"] = "contact";
        newAddress.Attributes["addresstypecode"] = 200000;
        newAddress.Attributes["parentid"] = new CrmEntityReference("contact", contactId);
        newAddress.Attributes["line1"] = theLead.Attributes["address1_line1"];
        newAddress.Attributes["line2"] = theLead.Attributes["address1_line2"];
        newAddress.Attributes["line3"] = theLead.Attributes["address1_line3"];
        newAddress.Attributes["city"] = theLead.Attributes["address1_city"];
        newAddress.Attributes["stateorprovince"] = theLead.Attributes["address1_stateorprovince"];
        newAddress.Attributes["postalcode"] = theLead.Attributes["address1_postalcode"];
        newAddress.Attributes["country"] = theLead.Attributes["address1_country"];

        service.Create(newAddress);
        tracingService.Trace("Address Migrated from Contact to Lead.");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:21:20.043

一切对我来说都是正确的。如果没有找到线索，我会尝试抛出异常，只是为了验证您的查询是否正常工作。如果您没有收到异常，请确认您在创建客户地址时没有任何插件，这可能导致无法创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:47:41.680

假设确实没有抛出异常，那段代码的唯一其他出口就在这里

```
if (null == theLead)
{
    tracingService.Trace("Activity exiting... Contact not sourced from Lead.");
    return;
} 
```

因此，假设`theLead`此时它为 null 并且工作流程优雅地结束是公平的。

要对此进行测试，请改为抛出异常。假设异常是 throwm，您可以调查它*为什么*为空。据推测，您过滤的值无效或不是您所期望的 - 或者该字段为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T21:38:58.983

尝试从 Service.Create 追踪返回的 GUID 并查看其中包含的内容。

就像是：

```
Guid addressId = service.Create(newAddress);
tracingService.Trace(string.format("Address ID Result: {0}", addressId)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T11:22:30.840

您似乎正在尝试直接创建地址记录，绕过默认情况下已经为联系人记录创建的两个记录（它总是创建这两个记录，无论您是否使用它们以及是否想要它们的“影子”字段在联系表格中可见）。您说什么都没发生 - 是否通过查看 SQL 表或联系人记录中的“更多地址”链接来验证？

您似乎从创建中省略的一件事是指定地址编号（理想情况下，首先找到已与联系人关联的所有地址上的最大数字并递增 1）。在所有情况下，这至少需要为 3。

如果您查看地址实体关联视图定义，您将看到它显式过滤以包含地址编号 > 2 的地址，以提供 1 和 2 是联系人“​​一部分”而“更多”是单独记录的错觉, 而实际上包括 1 和 2 在内的所有地址本身就是地址实体表中的行。

所以我怀疑如果将该值保留为空，则该地址根本不会显示在 GUI 中，因为它不符合过滤条件。它可能会也可能不会创建失败，因为它在内部非常依赖该字段，因此我会将其视为“系统必需”并确保将其包含在列集合中。

**替代方法：**

如果您从未在表单上使用 Add_1 或 Add_2 字段，您仍然可以使用地址编号为 2 的地址记录来存储来自潜在客户的数据，使其成为此现有（空）记录的更新而不是创建。

修改 Address Associated 视图以更改过滤器，使其在视图中包含 Add_2，方法是使其过滤地址编号 > 1 而不是 2。

这对用户来说似乎已经存在一个地址，并且他们可以使用 address_3、4 等（他们可能认为是 2、3 等）的正常功能添加更多地址。地址 1 存在但为空，可以忽略。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T11:29:45.183

啊! 我现在看到您正在向后进行查询！（或者说你根本不需要查询）

客户 ID 字段仅在用户指定这是现有客户的潜在客户时使用，目的是创建与该客户链接的商机。

如果您确定潜在客户资格并创建联系人（和/或客户和/或机会），则将它们连接在一起的字段位于新创建的记录上，并且在所有三个实体的所有三种情况下都称为“originatingleadid”。请注意，这支持多次对领先者进行排位赛、取消排位赛和重新排位赛，并且通过这样做创建的每条记录都知道它的来源（想想“谁是你的爸爸？”你不会忘记这一点！）。

如果关系相反，领导者只能记住其中的最后一个。

因此，要修复代码的查询部分，请替换查询并从您正在处理的联系人的查找字段中显式获取 originatingleadid。

我的另一个答案仍然是使用更新而不是创建来处理整个过程的更好方法，但是这个答案应该让您首先使用正确的潜在客户记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-02T16:03:41.507

如果此代码是为 CRM 2011 编写的（看起来确实如此），那么您需要使用 OptionSetValue 对象而不是整数来设置 addresstypecode 值：

```
newAddress.Attributes["addresstypecode"] = 200000; 
```

变成

```
newAddress.Attributes["addresstypecode"] = new OptionSetValue(200000); 
```

我实际上希望这会引发异常。我不确定为什么不是。

# git - git hooks — 防止提交进入主题分支

> ID：15231665
> 
> 赞同：1
> 
> 时间：2013-03-05T18:45:28.880
> 
> 标签：git, version-control, githooks

如果消息格式不正确，我需要停止提交。

我知道可以使用 pre-receive 钩子在**master**分支上执行此操作。

问题是我不想在**主**分支上这样做，而是在一个主题中。

**我想用git symbolic-ref**来做。

假设我有一个名为**dev**的主题分支来自**master**。如果我从主题分支的 git 命令行运行“ *git symbolic-ref HEAD ”，我会得到“* *refs/heads/dev* ”。

我正在考虑在预接收钩子中做同样的事情来检测提交来自哪个分支。

我已经把这段代码放在了钩子里：

```
#! /usr/bin/perl

my $branch = `git symbolic-ref HEAD`;
print "Branch: $branch \n"; 
```

但是当我提交并从主题分支（即：**dev**）推送时，我得到的消息是：

```
Branch: refs/heads/master 
```

...即使提交来自**开发**分支。

我究竟做错了什么 ？这是实现我的目标的可行方式吗？

# c++ - g++ 和 operator << 在评估期间更改值时会产生意外结果

> ID：15231666
> 
> 赞同：3
> 
> 时间：2013-03-05T18:45:28.867
> 
> 标签：c++, g++, clang++

这是一些简单的代码。

```
#include <iostream>
using namespace std;

bool func(char* m)
{
    *m = '4';
    return true;
}

using namespace std;
int main()
{
    char c1 = '3';
    cout  << "a" << c1 << func(&c1) << c1 << "b" << endl;

    return 0;
} 
```

当用 g++ -O0 (4.7.2) 编译它时，输出是 a413b，对于 -O2，输出是 a414b。对于 clang++ 3.2，输出是 a314b。

在这部分代码中，我是否为 c++ 做了任何未定义的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:47:46.943

`func(&c1)`是的，和两者的评估顺序`c1`是未指定的。

这意味着可以按任何顺序评估这三个表达式，从而产生以下任何输出：

```
a313b
a314b
a413b
a414b 
```

见[函数参数评估顺序](https://stackoverflow.com/questions/9566187/function-parameter-evaluation-order)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T18:53:48.223

我们将稍微缩短您的示例以围绕它展开我们的头脑。让我们看一下代码：

```
char func(char* m) { *m = '4'; return *m; }

int main() {
    char c = '1';
    cout << c << func(&c);

} 
```

cout 线变成了这样：

```
operator<<(operator<<(cout, c), func(&c)) 
```

因为函数参数可以按任何顺序求值，编译器可以选择先求值，也可以先求`operator<<(cout, c)`值`func(&c)`。根据首先评估哪个，您将获得：

```
`14` 
```

或者

```
`44` 
```

# html - HTML 电子邮件 - 表格位置

> ID：15231669
> 
> 赞同：0
> 
> 时间：2013-03-05T18:45:46.770
> 
> 标签：html, css, email, html-email, html-table

我刚刚开始创建 HTML 电子邮件。我正在 [http://www.jn-design.co.uk/misc/Swagelok/email.html创建我的最新版本](http://www.jn-design.co.uk/misc/Swagelok/email.html)

它在浏览器中显示很好，直到 IE，甚至 9 都不同意它。其他的我还没看。将能够在 Firefox 或 chrome 中看到正确的显示。

关于为什么桌子的一半向右浮动的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:47:29.880

试着放

```
<!doctype html> 
```

在文档顶部，`<html>`标签之前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T18:57:51.863

您应该在第 22 行添加：align="center" 代替：align="left"。

在我的一天中，我已经完成了相当多的 HTML 电子邮件！

还要添加一个文档类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:08:52.523

对于段落填充，您为什么不尝试单独设置边距。我也会推荐[Boilerplate](http://htmlemailboilerplate.com/)，因为它包含很多针对每个电子邮件客户端的怪癖的解决方案。

# java - Java，我如何制作一个 jar 来编辑另一个 jar

> ID：15231672
> 
> 赞同：1
> 
> 时间：2013-03-05T18:46:04.140
> 
> 标签：java, file-io, executable-jar

我想出了一个想法，为我的学校制作一个程序，教师在其中输入问题和答案 A、B、C、D 等，并在完成后创建一个 jar 文件，该文件将成为实际的测试程序。现在我知道如何使程序达到收集教师所有数据的程度，但是我不知道如何进行。我的想法是教师的 jar 将与示例就绪的“测试 jar”（其他问题和答案存储在其变量中）位于同一文件夹中，当教师准备好时，他们的 jar 将简单地编辑“测试 jar”的变量和然后他们可以将“测试 jar”给学生，尽管我不知道如何从另一个 jar 编辑 jar 文件的代码。我该如何处理？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:52:33.003

基本上，jar 只是一个 Zip 文件。

Java 通过位于

> java.util.zip

包裹。

你的代码会是这样的：

```
ZipOutputStream outStream = new ZipOutputStream(new FileOutputStream(zipFileName));

 // Add a zip entry to the output stream
 outStream.putNextEntry(new ZipEntry(myEntryName));

 // add data to your entry by writing to outStream
 ......
 ......
 //Close zip entry and file streams
 outStream.closeEntry(); 
```

还有一个完整的[例子。](http://viralpatel.net/blogs/creating-zip-and-jar-files-in-java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:39:21.023

如果您尝试使用可自定义的问题和答案进行测验，我建议您使用文本文件来存储选项（问题和答案以及可能的问题类型，例如多项选择或输入一个值或选择一个）。

对于文件的格式可以使用xml或者干脆使用java.util.Properties，使用它的store和load来保存到文件中。

您的属性可以是“totalNumberQuestions”、“question1”“questionType1”“question1option1”等

现在在您的主程序中，查找一个文件： * 如果程序以 args.length > 0 开头，则在单独的 try catch 中查找带有 arg[0] 的文件，因此即使不存在，您也会显示错误消息并继续

*   如果在与您的程序相同的文件夹中找不到或没有名为“data.txt”的参数，则意味着： File f = new File("data.txt"); if(f.exists()){ //读取输入流

*   else 来自 jar getClassLoader().getResourseAsStream 中的类加载器（在 java.lang.Class 中查找实际函数名

这样，用户可以使用您的第二个 jar 来创建他们的 data.txt，然后将其与提出问题的主 jar 一起打包，或者简单地将其保存在同一个文件夹中，或者在启动程序时将其作为参数传递。

您可以使用 jar 命令重新打包 jar

```
jar ufMv quiz.jar  data.txt 
```

使用 jar 创建新的 zip：

```
jar cvfM quiz.jar data.txt yourPackage.*.class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T05:49:19.750

You could better make up a database of the questions and answers. The teachers program will write in the database, the child's program will read the database.

# ios - Cocos2D 和 iOS：估计内存使用的经验法则

> ID：15231675
> 
> 赞同：0
> 
> 时间：2013-03-05T18:46:11.950
> 
> 标签：ios, memory-management, cocos2d-iphone, runtime

我想知道是否有经验法则来估计粗略的运行时内存使用情况。

那是我目前的“心理算法”：

*   精灵框架表：例如 2048*2048= 大约 4MB 运行时间（我有 1 张用于 HUD 和输入精灵，1 用于玩家角色和子弹，1 用于敌人，1 用于背景，总共 16 MB）
*   mp3 背景音轨：音轨大小，例如一首 192kbps 3 分钟的歌曲需要 4 MB **这真的会扩展成 caf 并变得更大吗？**
*   caf 文件：caf 文件的大小（我有大约 15 个 caf 文件，每个大约 300KB，所以总和为 4.5 MB）
*   我倾向于忽略我分配的 CCSprite 子类的数量，但例如我可以将每个精灵相乘以获得我的 CCSprite 子类的平均大小（例如 .m 文件 45 KB = 41.270 字节和 .h 文件 4KB 总共 49KB 平均） ：如果我使用带有 200 个子弹的 BulletCache 和带有 50 个
    精灵的 EnemyCache 以及大约 100 个其他 CCSprite 子类（HUD、
    按钮、播放器精灵），简化后的总和可能是 350。所以我们有 350 * 49KB = 17.150 KB，大约是 17 MB。

所以总共 17 + 4.5 + 16 + 4 = 41.5 MB 运行时内存使用量

**这是一种足够合理的估计方式吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:43:45.183

我写了[一篇关于计算/估计内存资源大小的文章](http://www.learn-cocos2d.com/2013/01/memory-calculating-size-textures-audio-buffers-classes-collections/)。

你做了几个假设，其中一些是错误的。请允许我指出它们：

具有 32 位颜色的 2048x2048**恰好**使用4 MB。在 16 位色深下，它只有一半。如果您制作纹理 NPOT（推荐）并使用 .pvr.ccz 作为文件格式（也推荐），您可以修剪更多内存。

MP3 通常不会全部加载到内存中。MP3 是一种流媒体格式。播放正确，只需少量内存缓冲区即可流式传输（播放）MP3。

您无法通过查看 .h/.m 文件的文件大小来估计类实例的大小。这是完全错误的，因为您将 Apples（源代码、文本）与 Oranges（类对象、二进制文件）进行比较。但是你说得对，几乎在所有情况下都可以忽略类实例的大小。大多数 cocos2d 节点类实例使用少于 512 字节 - 仅计算类的 ivars 所需的内存。[您可以使用class_getInstanceSize](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/class_getInstanceSize)自己检查类实例的大小。

最后，这些类型的估算仅在您对应用程序的项目或功能有想法并且您需要估算资源使用情况以确保您不会分配千兆字节的内存时才有用。在所有其他情况下，使用 Instruments 监控应用程序的实际内存使用情况。

# mysql - 如何在 Windows 上的 AppServ 上启用 PDO？

> ID：15231676
> 
> 赞同：4
> 
> 时间：2013-03-05T18:46:23.007
> 
> 标签：mysql, pdo, appserver

我正在尝试第一次使用 PDO 创建一个应用程序，当我

```
try {
    $db = new PDO('mysql:host=localhost;dbname=DBname', 'user', 'pass');
} catch(PDOException $e){
    echo '<div class="errorMSG">Failed to connect to database. Please try to refresh this page in 1 minute. However, if you continue to see this message please contact your system administrator.</div>';
    echo '<br /><br />' . $e->getMessage();
    exit();

} 
```

当然，我已经将用户和 DBname 更改为正确的一次，但我得到一个错误找不到驱动程序

因此，通过很少的搜索，我发现我需要启用 pdo_mysql 但我似乎无法找出我在哪里以及如何做到这一点？有人可以帮助我如何启用它和/或让它在我的本地机器上工作。我有 Windows 7。我找不到我的 php.int 所在的位置。

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T18:57:16.313

查看 PHP 手册的[PDO 安装部分](http://www.php.net/manual/en/pdo.installation.php)。

这取决于您机器的操作系统。如果您自己编译 php，并且希望安装 MySQL PDO 驱动程序，那么您应该[`--with-pdo-mysql`](http://www.php.net/manual/en/ref.pdo-mysql.php)在编译 PHP 之前添加 config 选项。

在 Windows 机器上，只需启用这两个扩展...

```
extension=php_pdo.dll <- only if below php 5.3
extension=php_pdo_mysql.dll 
```

...在您的`php.ini`并重新启动您的应用服务器。`php.ini`通常应该位于您的 php 目录中。它的位置取决于您安装 php.ini 的位置。

# objective-c - 用户在 Xcode 中登录后的计时器

> ID：15231679
> 
> 赞同：-4
> 
> 时间：2013-03-05T18:46:40.500
> 
> 标签：objective-c, xcode, login, timer

问题如下：当用户登录应用程序时，我有时间（以 hh:mm:ss 为单位）。现在我必须实现一个从“登录”时间到当前时间的时钟。这应该在显示中每秒更新一次。例如：假设用户在 09:00:00 登录，当前时间是 10:00:00。然后，显示应该说 01:00:00 -> 01:00:01 -> 01:00:02 -> ...... 所以，显示每秒更新一次。

我是 Xcode 和 Objective C 的新手。你能建议一些方法吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:59:51.297

您可以在应用程序委托方法中启动和停止计时器，例如

应用程序：willFinishLaunchingWithOptions，应用程序：didFinishLaunchingWithOptions，applicationDidBecomeActive：applicationWillResignActive：applicationDidEnterBackground：applicationWillEnterForeground：applicationWillTerminate：

有关详细信息，请参阅以下文档：

[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# android - How to show menu options at the end of EditText

> ID：15231680
> 
> 赞同：0
> 
> 时间：2013-03-05T18:46:45.370
> 
> 标签：android, android-edittext

I need to EditText with arrow at the end and when you tap on edittext it will pop up with the options. Since i am unable to upload image, i have to describe it.

Same type of edit text is available in default Contacts Application comes in ICS. When you add new contact, it will have edit text with options.

Thanks Chintan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:50:47.720

当您有“家庭、移动、工作”等​​选项时？这就是后蜂窝世界中[Spinner的设计。](http://developer.android.com/reference/android/widget/Spinner.html)在 GB 及以下，它会为您提供一个带有选项的弹出对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:17:54.437

如果您只是将一个`TextView`沿边与一个箭头组合在一起，您可以实现此行为，该`ImageView`箭头`onClick`将弹出一个带有您的选项的窗口。

# css - CSS3 第一个 div 唯一技巧

> ID：15231684
> 
> 赞同：0
> 
> 时间：2013-03-05T18:47:15.820
> 
> 标签：css

我有一个带有一堆 div 的容器。我想要一个灰色的顶部边框，除了第一个应该是白色的顶部边框。我尝试了 nth-child，但我的代码似乎有问题。

```
<div class="container">
  <div class="row"> Stuff </div>
  <div class="row"> Stuff </div>
  <div class="row"> Stuff </div>
  <div class="row"> Stuff </div>
</div>

.row{ border-top-width: 1px; border-top-style: solid; border-top-color: #ccc;}
.row:nth-child1{  border-top-width: 1px; border-top-style: solid; border-top-color: #FFF;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:49:22.633

```
.row { border-top: 1px solid #ccc;}
.row:first-child {  border-top-color: #FFF;} 
```

jsFiddle：http: [//jsfiddle.net/MSDYY/](http://jsfiddle.net/MSDYY/)

另一个，背景设置为红色，以显示第一个元素实际上有白色上边框：http: [//jsfiddle.net/MSDYY/1/](http://jsfiddle.net/MSDYY/1/)

如果你想使用`nth-child`它应该是这样的：`.row:nth-child(1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:50:58.333

要么使用：

```
.row:nth-child(1) 
```

或者

```
.row:first-of-type 
```

或者

```
.row:first-child 
```

前两个是 IE9+，但最后一个也适用于 IE8。

# java - 演员表 到地图

> ID：15231686
> 
> 赞同：1
> 
> 时间：2013-03-05T18:47:23.290
> 
> 标签：java

`LazyDataModel`我在扩展Primefaces的类中有以下代码

```
@Override
    public List<Project> load(int first, int pageSize,
            String sortField, SortOrder sortOrder, Map<String, String> filters) { 
```

在上面的过滤器是类型`Map<String, String>`

在我的休眠实体类中，我有以下内容

```
private Long projectNo; // with getters and setters 
```

在 DAO 类中，我还有以下内容可以在 JSF 页面中进行搜索并返回结果

```
public void getProjects(ProjectQueryData data) { 

Map<String, String> filters = data.getFilters();
// ....
....

String projectNo = filters.get("projectNo");
List<Predicate> criteria = new ArrayList<Predicate>();
            if (projectNo!= null) {
                ParameterExpression<String> pexp = cb.parameter(String.class,
                        "projectNo");               
                Predicate predicate = cb.equal(emp.get(Project_.projectNo),
                        pexp);
                criteria.add(predicate);
            }
TypedQuery<Project> q = entityManager.createQuery(c);
TypedQuery<Long> countquery = entityManager.createQuery(countQ);
q.setParameter("projectNo", projectNo); // error in this line
countquery.setParameter("projectNo", projectNo); 
```

当我执行上述操作时，出现以下异常

```
Hibernate Parameter value [89457] did not match expected type [java.lang.Long] 
```

因为`projectNo`是龙。

我的问题是我该如何`Map<String,String>`转换，`Map<Long,Long>`这样我就不会在这一行出现错误`q.setParameter("projectNo", projectNo);`

任何帮助都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:53:36.013

您不能强制转换`Map<String,String> to Map<Long,Long>`，为什么不使用`Map<Object,Object>`，或者`Map<String,Object>`您的参数 Map 是否需要所有数据类型。

在这种情况下，您似乎也可以通过将其转换为字符串或在 Map 中设置很久之前实现修复，

```
String.valueOf(projectNo);

or 

Long.toString(projectNo); 
```

任何需要的地方。

# perl - URI->new("longerThan248Chars://bla") throws "Identifier too long at (eval 1) line 1"

> ID：15231693
> 
> 赞同：0
> 
> 时间：2013-03-05T18:47:40.813
> 
> 标签：perl, uri, runtime-error

I'm canonicalizing URLs using Perl (v. 5.12) and I've noticed that the Perl program started crashing with the message "Identifier too long at (eval 1) line 1.". Through experiments I've found out that the `URI` constructor throws error when the scheme part of the URL exceeds 248 symbols:

```
$ perl -e 'use URI; my $uri = URI->new("a" x 248 . "://bla");'
Identifier too long at (eval 1) line 1. 
```

Why is this happening? How to prevent this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:06:10.160

[URI](http://search.cpan.org/perldoc?URI)正在寻找一个名为

```
URI::aaaaaaaaaa 
```

通过做归结为

```
eval "require URI::aaaaaaaaaa;" 
```

Perl 认为你疯了。

```
>perl -e"eval 'require '.('a' x 500); die $@;"
Identifier too long at (eval 1) line 1. 
```

* * *

最好的解决方案是向作者[提交补丁](https://rt.cpan.org/Public/Dist/Display.html?Name=URI)以添加

```
return if length($scheme) > 200; 
```

到`implementor`.

* * *

同时，您可以使用捕获错误

```
my $uri = eval { URI->new( ... ) }; 
```

或者您可以预先检查该条件：

```
$uri_string =~ /^${URI::scheme_re}:/ 
```

# php - load next offer when answer has been submitted

> ID：15231695
> 
> 赞同：-1
> 
> 时间：2013-03-05T18:47:49.173
> 
> 标签：php, fuelphp

I'm trying to build a simple offer survey app (PHP using Fuel Framework).

I want to serve one question at a time. A user then has to answer Save or Bin. Only when they have answered do I want to serve the next question.

What's the best way of doing this? Currently all questions stored in the DB are displayed on a page.

Matt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:12:24.510

您可以在 PHP 中执行此操作，其中每个问题都是提交给服务器的表单，然后为用户提供下一个问题，或者您可以使用 Javascript 执行此操作，以便表单包含所有问题，但从视图中隐藏。回答一个问题会揭示下一个问题。

PHP方法的优点：

1) 保存进度会更容易 2) 每个问题可以一次验证一个 3) 可以参加调查的人数更多（没有 javascript 的人）

Javascript的优点：

1）它会更流畅，更优雅 2）整个表单一次提供并根据需要显示 3）减少页面请求的数量。

# c++ - How to generate doxygen call graph that includes class methods?

> ID：15231698
> 
> 赞同：3
> 
> 时间：2013-03-05T18:48:09.917
> 
> 标签：c++, doxygen, call-graph

I have a huge C++ project developed by someone else which I'm trying to get a good view with doxygen. I managed to properly configure doxygen to generate everything I need, except the callgraphs. They only show auxiliary functions, not the others class methods.

Is there a way to show also the class methods?

PS: [this](http://pastebin.com/37Xw24SV) is my `doxyfile`

Best

# javascript - angularjs defer 然后只被调用一次

> ID：15231701
> 
> 赞同：2
> 
> 时间：2013-03-05T18:48:15.780
> 
> 标签：javascript, angularjs

我正在使用 window 对象和 defer 来将一些内容注入到我的控制器中，这些内容在我创建它时不可用。这在我第一次调用它时工作正常 - .then 方法正在执行得很好。但是当我随后调用它时，.then 方法没有触发。什么可能导致这种情况？

```
app.factory('fromoutside', function ($window, $q, $rootScope) {
    var deferred = $q.defer();

    $window.injectIntoAngularWorld = function (obj) {
        deferred.resolve(obj);
        $rootScope.$apply();
    };

    return deferred.promise;
}); 
```

这是一个模拟我正在做的事情的小提琴，但不完全是。它会抛出关于已经在进行中的应用的错误，但话又说回来，我得到了很多并且经常忽略[它们](http://jsfiddle.net/Vbahole22/Dw2Tg/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:32:38.993

对于这类事情，您可能会更好地使用事件。

承诺被解决，然后他们就完成了。所以这意味着他们是一种一次性的交易。

以下是我的提议：

```
//set it up in your run block.
app.run(function($rootScope, $window) {
   $window.foo = function (data) {
        $rootScope.$broadcast('fooCalled', data);
   };
});

//use $on in your controller.
app.controller('MyCtrl', function($scope){ 
   $scope.$on('fooCalled', function(event, data) {
      $scope.fooData = data;
   });
}); 
```

这只是*一种*方法，但它应该可以工作，而且相当干净。如果你想创建一个服务来监听事件并设置它，你可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T02:58:45.883

我有同样的问题，我每次都通过definin de deferred修复它，我想你会是这样的：

```
$window.injectIntoAngularWorld = function (obj) {
    var deferred = $q.defer();
    deferred.resolve(obj);
    $rootScope.$apply();
}; 
```

# ios - UITextView crashes

> ID：15231706
> 
> 赞同：0
> 
> 时间：2013-03-05T18:48:34.350
> 
> 标签：ios, objective-c, ios5, ios6, uitextview

On iOS6 this cod works (myTextView is an instance variable):

```
myTextView = [[UITextView alloc] initWithFrame:CGRectMake(10, 10, 10, 10)];
myTextView.keyboardType = UIKeyboardTypeDefault;
[self addSubview:myTextView]; 
```

And on iOS5 it crashes on line:

```
[myTextView becomeFirstResponder]; 
```

But the strangest thing it that situation is: if i set `keyboardType` to `UIKeyboardTypeEmail` - no crashes!

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:14:14.780

切勿在主线程以外的线程上调用 UIKit 方法。如果它有效，那只是运气。

并且，下次您提出问题时，请务必在您的实际问题中提供更多详细信息，这样人们就不必通过评论来找到实际问题。

# jquery - 修改折叠插件以使用 select = selected

> ID：15231707
> 
> 赞同：4
> 
> 时间：2013-03-05T18:48:42.853
> 
> 标签：jquery, html, twitter-bootstrap

我正在尝试使用 a`<select>`以便在更改时隐藏/显示一个 div。

我想使用 twitter bootstrap collapse 插件。

我用这个例子做了一半[http://plnkr.co/edit/9lPe61?p=preview](http://plnkr.co/edit/9lPe61?p=preview)

但是，当您添加`selected`到选择时，它会破坏一切：[http ://plnkr.co/edit/w9XW8R?p=preview](http://plnkr.co/edit/w9XW8R?p=preview)

```
<div class="accordion" id="accordion" >
    <div class="accordion-group">
      <select class="accordion-toggle">
         <option value="1" data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">1</option>
         <option value="2" data-toggle="collapse" data-parent="#accordion" data-target="#collapseTwo">2</option>
         <option value="3" data-toggle="collapse" data-parent="#accordion" data-target="#collapseThree">3</option>
      </select>

      <div id="collapseOne" class=" collapse in">
        <div class="accordion-inner">
          Anim1 pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
        </div>
      </div>
    </div>
    <div class="accordion-group">
      <div id="collapseTwo" class=" collapse">
        <div class="accordion-inner">
          Anim2 pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
        </div>
      </div>
    </div>
    <div class="accordion-group">
      <div id="collapseThree" class=" collapse">
        <div class="accordion-inner">
          Anim3 pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
        </div>
      </div>
    </div>
</div> 
```

JS - 我想我需要添加到插件中以检查是否有一个`selected="selected"`以便它也适用于选择，但我无法弄清楚这需要去哪里？

```
/* =============================================================
 * bootstrap-collapse.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

!function ($) {

  "use strict"; // jshint ;_;

 /* COLLAPSE PUBLIC CLASS DEFINITION
  * ================================ */

  var Collapse = function (element, options) {
    this.$element = $(element)
    this.options = $.extend({}, $.fn.collapse.defaults, options)

    if (this.options.parent) {
      this.$parent = $(this.options.parent)
    }

    this.options.toggle && this.toggle()
  }

  Collapse.prototype = {

    constructor: Collapse

  , dimension: function () {
      var hasWidth = this.$element.hasClass('width')
      return hasWidth ? 'width' : 'height'
    }

  , show: function () {
      var dimension
        , scroll
        , actives
        , hasData

      if (this.transitioning || this.$element.hasClass('in')) return

      dimension = this.dimension()
      scroll = $.camelCase(['scroll', dimension].join('-'))
      actives = this.$parent && this.$parent.find('> .accordion-group > .in')

      if (actives && actives.length) {
        hasData = actives.data('collapse')
        if (hasData && hasData.transitioning) return
        actives.collapse('hide')
        hasData || actives.data('collapse', null)
      }

      this.$element[dimension](0)
      this.transition('addClass', $.Event('show'), 'shown')
      $.support.transition && this.$element[dimension](this.$element[0][scroll])
    }

  , hide: function () {
      var dimension
      if (this.transitioning || !this.$element.hasClass('in')) return
      dimension = this.dimension()
      this.reset(this.$element[dimension]())
      this.transition('removeClass', $.Event('hide'), 'hidden')
      this.$element[dimension](0)
    }

  , reset: function (size) {
      var dimension = this.dimension()

      this.$element
        .removeClass('collapse')
        [dimension](size || 'auto')
        [0].offsetWidth

      this.$element[size !== null ? 'addClass' : 'removeClass']('collapse')

      return this
    }

  , transition: function (method, startEvent, completeEvent) {
      var that = this
        , complete = function () {
            if (startEvent.type == 'show') that.reset()
            that.transitioning = 0
            that.$element.trigger(completeEvent)
          }

      this.$element.trigger(startEvent)

      if (startEvent.isDefaultPrevented()) return

      this.transitioning = 1

      this.$element[method]('in')

      $.support.transition && this.$element.hasClass('collapse') ?
        this.$element.one($.support.transition.end, complete) :
        complete()
    }

  , toggle: function () {
      this[this.$element.hasClass('in') ? 'hide' : 'show']()
    }

  }

 /* COLLAPSE PLUGIN DEFINITION
  * ========================== */

  var old = $.fn.collapse

  $.fn.collapse = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('collapse')
        , options = $.extend({}, $.fn.collapse.defaults, $this.data(), typeof option == 'object' && option)
      if (!data) $this.data('collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.collapse.defaults = {
    toggle: true
  }

  $.fn.collapse.Constructor = Collapse

 /* COLLAPSE NO CONFLICT
  * ==================== */

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }

 /* COLLAPSE DATA-API
  * ================= */

  $(document).on('click.collapse.data-api', '[data-toggle=collapse]', function (e) {
    var $this = $(this), href
      , target = $this.attr('data-target')
        || e.preventDefault()
        || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') //strip for ie7
      , option = $(target).data('collapse') ? 'toggle' : $this.data()
    $this[$(target).hasClass('in') ? 'addClass' : 'removeClass']('collapsed')
    $(target).collapse(option)
  })

}(window.jQuery); 
```

[http://plnkr.co/edit/w9XW8R?p=preview](http://plnkr.co/edit/w9XW8R?p=preview)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:31:05.557

操作，

I think this [http://plnkr.co/edit/qfB8Uf?p=preview](http://plnkr.co/edit/qfB8Uf?p=preview) is what you're after.

* * *

### The important bits

## JS

```
...
  $('document').ready(function () {
      $(".accordion-dropdpwn").on('change', function (e) {
          var selected_value = $(this).val(),
          $target_elem = $('a[href="' + selected_value + '"]');
          $target_elem.trigger('click');
      });

      $('.accordion-toggle').on('click', function () {
          var selected_value = $(this).attr('href');
          $(".accordion-dropdown option").removeAttr('selected');
          $('option[value="' + selected_value + '"]').attr('selected', 'selected');
      });

      $(".accordion-dropdown").trigger('change');
  });

... 
```

## Brief

Since the `change` event for the `<select>` returns the `value` of the selected `option` (child), I stuffed a reference to the accordion `<a>` that should be affected when the user changes the drop-down.

Once we have our reference, we simply trigger a click event on that item. The other important bit is making sure that when the page is loaded, the accordion will reflect the current state of the `select` — that is, whichever `option` has `selected="selected"` will be open/active.

Lastly, there is bi-directional control. Since if the user changes the `<select>`, the accordion changes, it's expected that clicking the accordion should change the `<select>`.

Hope this helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:32:03.410

首先，我有点懒。我添加了一些 JavaScript、HTML 和 CSS。

[在此处](http://plnkr.co/edit/Q4o6T5?p=preview)查看演示。

有一两个错误。我会尝试修复它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-07T08:55:25.330

This worked for me (See this [jsFiddle](https://jsfiddle.net/dbysLgqf/24/) for a working example):

### HTML

```
...
<select class="custom-select custom-select--collapse" aria-label="Select option to collapse">
    <option value="" selected data-target=".collapse.show">-- Choose something --</option>
    <option value="Collapse 1" data-target="#collapse1">Collapse 1</option>
    ...
</select>
...

...
<div class="collapse mb-3" id="collapse1">Content Collapse 1</div>
<div class="collapse mb-3" id="collapse2">Content Collapse 2</div>
... 
```

### JQUERY

```
// DEFINE TARGET
var target; 

// SELECT OPTION TO SHOW/HIDE COLLAPSIBLE CONTENT
$('.custom-select--collapse').on('change' , function() {

    $('.custom-select--collapse option').each(function() {
      if ( $(this).is(':selected') ) {
        // ASSIGN TARGET
        target = $(this).attr("data-target");
      }

      // HIDE ALL CONTENT IF SELECTED OPTION HAS NO VALUE
      if ( $(this).val() == "" ){
        $(target).collapse('hide');
      }else{
        $(target).collapse('toggle');
      }
  });

  console.log("TARGET = " + target);        
}); 
```

# powershell - 从模块修改和恢复 PowerShell 提示符

> ID：15231712
> 
> 赞同：3
> 
> 时间：2013-03-05T18:48:57.877
> 
> 标签：powershell, scope

我正在编写一个用于与远程服务交互的 PowerShell 模块。连接到远程服务时（通过模块中的函数），我想在提示符前添加用户名。断开连接后，我想删除用户名。

我想我可以通过复制全局`prompt`函数来实现这一点，然后在断开连接时恢复它：

```
# Doesn't work
function Connect {
    Copy-Item function:prompt function:prompt_old
    function global:prompt { "[Username] $(prompt_old)" }
}
function Disconnect {
    Copy-Item function:prompt_old function:prompt -Force
} 
```

但是，`Copy-Item`不会在全局范围内复制。因此，`prompt`抛出 a`CommandNotFoundException`并且断开功能不能替换`prompt`为`prompt_old`.

有没有办法可以从模块函数修改然后恢复 PowerShell 提示符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T21:53:58.270

您可以在工作时将函数存储在变量中。

备份使用：

```
$global:prompt_old = get-content function:\prompt 
```

然后您可以修改提示，稍后使用以下命令恢复：

```
set-content function:\prompt $global:prompt_old 
```

# node.js - NodeJS native mouse and keyboard bindings

> ID：15231713
> 
> 赞同：11
> 
> 时间：2013-03-05T18:49:07.867
> 
> 标签：node.js, macros, keyboard, mouse, native

I've been looking for a native nodejs module that supports mouse and keyboard listening and execution

i found this.. [https://npmjs.org/package/mouse](https://npmjs.org/package/mouse) but the source code looks like it only supports the browsers.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-29T18:20:30.990

我一直在研究用于发送鼠标和键盘事件的模块[RobotJS](https://github.com/octalmage/robotjs)。

示例代码：

```
var robot = require("robotjs");

//Get the mouse position, retuns an object with x and y. 
var mouse=robot.getMousePos();
console.log("Mouse is at x:" + mouse.x + " y:" + mouse.y);

//Move the mouse down by 100 pixels.
robot.moveMouse(mouse.x,mouse.y+100);

//Left click!
robot.mouseClick(); 
```

然后为了听我使用 nw.js：

[https://github.com/nwjs/nw.js/wiki/Shortcut](https://github.com/nwjs/nw.js/wiki/Shortcut)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-12T22:00:41.157

您可以使用该模块包装[`Robot Class`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)Java 提供的跨平台解决方案。[`node-java`](https://github.com/joeferner/node-java)

工作示例：

```
var java = require('java');

var Robot = java.import('java.awt.Robot');
var robot = new Robot();

robot.mouseMoveSync(0, 0); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-20T12:39:08.323

试试[iohook](https://www.npmjs.com/package/iohook)模块。
它支持Windows/Linux/MacOS

```
'use strict';
const ioHook = require('iohook');

ioHook.on("mousemove", event => {
   console.log(event);
   /* You get object like this
   {
      type: 'mousemove',
      x: 700,
      y: 400
    }
   */
});
// For keyboard hook
ioHook.on("keydown", event => { .... });
ioHook.on("keyup", event => { .... });

//Register and start hook 
ioHook.start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-06T18:44:40.607

看看[https://github.com/Loknar/node-macmouse](https://github.com/Loknar/node-macmouse)

$ npm 安装 macmouse

# 例子.js

var mouse = require('macmouse');

```
mouse.init();

var ptX = 800;
var ptY = 600;

var doThings = function() {
    mouse.Place(ptX, ptY);
    setTimeout(pressAndHold, 250);
}

var pressAndHold = function() {
    mouse.LeftButtonPress();
    setTimeout(doDragStuff, 250);
}

var doDragStuff = function() {
    ptX += 2;
    ptY += 2;
    mouse.DragPlace(ptX, ptY);
    setTimeout(doDragStuff, 250);
}

doThings();

mouse.quit(); 
```

# java - Preferences not working

> ID：15231716
> 
> 赞同：0
> 
> 时间：2013-03-05T18:49:09.017
> 
> 标签：java, android

I have this small code snippet which accesses my preferences so that when my checkbox is 'true' then splash music plays. Otherwise it does not. The tutorial I am following works with this code, but mine does not. Can anyone see a problem with my code?

When I run the app, the music plays regardless but I don't get any errors.

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.splash);

    ourSong = MediaPlayer.create(Splash.this, R.raw.clip1);

    SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    boolean musicCheck = getPrefs.getBoolean("checkbox",true);
    if (musicCheck == true){
        ourSong.start();
    } 
```

Preferences XML:

```
<EditTextPreference
    android:title="EditText"
    android:key="name"
    android:summary="Enter your name"/>

<CheckBoxPreference
    android:title="Music"
    android:defaultValue="True"
    android:key="Checkbox"
    android:summary="For the Splash Screen"/>

<ListPreference
    android:title="List"
    android:key="list"
    android:summary="This is a list"
    android:entries="@array/list"
    android:entryValues="@array/lvalues"
    ></ListPreference> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:32:02.680

更改`boolean musicCheck = getPrefs.getBoolean("checkbox",true);`为

`boolean musicCheck = getPrefs.getBoolean("Checkbox",true);`

我相信您获得的首选项的名称需要与首选项的键相匹配。

# asp.net-mvc - 如何在所有项目中避免 autofac 引用

> ID：15231721
> 
> 赞同：1
> 
> 时间：2013-03-05T18:49:25.873
> 
> 标签：asp.net-mvc, inversion-of-control, autofac

我正在使用 autofac 作为 IOC 容器处理 asp.net mvc 项目。我有一个接口 IDependencyBuilder，如下所示。

```
public interface IDependencyBuilder
{
    void Build(ContainerBuilder builder);
} 
```

现在我的客户项目，如果他们需要提供一些实现，他们实现这个接口。例如。

```
public class SomeDependencyBuilder : IDependencyBuilder
{
  public void Build(ContainerBuilder builder)
    {
        builder.RegisterType<FeedService>().As<IFeedService>();
    }      

} 
```

现在，在我的启动过程中。我得到了 IDependencyBuilder 的所有实例并调用它们的 Build Method

```
public static void BuildModule(ContainerBuilder builder)
    {
        var type = typeof(IDependencyBuilder);
        var types = AssemblyLocator.GetBinFolderAssemblies().ToList()
            .SelectMany(s => s.GetTypes())
            .Where(p => type.IsAssignableFrom(p) && !p.IsInterface && !p.IsAbstract);
        foreach (var type in types)
        {
              ((IDependencyBuilder)Activator.CreateInstance(type)).Build(builder);

        }

    } 
```

一切都很好。现在的问题是我必须在所有客户端项目中添加对 Autofac 库项目的引用。另外，如果我需要用其他一些 IOC 容器替换 autofac，我需要更改所有代码。所以这让我感觉很糟糕。我想要实现的是从客户端项目返回对象列表（实现和接口）并将它们注册到我的启动函数中。

```
public interface IDependencyBuilderNew
{
   List<SomeObject> GetList();
} 
```

现在启动功能应该是这样的

```
public static void BuildModule(ContainerBuilder builder)
{
    var type = typeof(IDependencyBuilderNew);
    var types = AssemblyLocator.GetBinFolderAssemblies().ToList()
        .SelectMany(s => s.GetTypes())
        .Where(p => type.IsAssignableFrom(p) && !p.IsInterface && !p.IsAbstract);
    foreach (var type in types)
    {
          var list  =((IDependencyBuilderNew)Activator.CreateInstance(type)).GetList();
    foreach(var l in list)
    { 
       builder.RegisterType<l.Class>().As<l.InterFace>();
    }
    }

} 
```

我将如何实现我的 SomeObject 以及类似情况的最佳实践是什么。

谢谢

帕尔米德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:34:43.610

1.  应用程序应该依赖于容器。例如，您经常更改应用程序中的 ORM？此类架构决策必须提前做出。

2.  如果非常想摆脱具体的 IOC 容器，您可以在 Agatha 请求/响应服务层上查看 [http://davybrion.github.com/Agatha/](http://davybrion.github.com/Agatha/)

3.  使用 Autofac 模块代替 IDependencyBuilder。它更灵活。 [https://code.google.com/p/autofac/wiki/StructuringWithModules](https://code.google.com/p/autofac/wiki/StructuringWithModules)

# apache - .htaccess 未从 DocumentRoot 目录正确读取

> ID：15231722
> 
> 赞同：1
> 
> 时间：2013-03-05T18:49:27.680
> 
> 标签：apache, .htaccess, codeigniter, mod-rewrite, centos

我在 /var/www/html 中安装了一个 codeigniter 项目。URL 应如下所示：[http](http://example.com/clients/abc) ://example.com/clients/abc 我正在运行 CentOS 和 Apache 2.2.15

为了让路由正常工作，我在 httpd.conf 中启用了 mod_rewrite（我可以通过 phpinfo.php 看到）和 AllowOverride All。

我在 httpd.conf 中定义的 documentroot 是 /var/www/html。

/var/www/html 中的 .htaccess 文件是：

```
<IfModule mod_rewrite.c>
    DirectoryIndex index.php
    RewriteEngine on
    RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ ./index.php/$1 [L,QSA]
</IfModule> 
```

就这一点，我在所有控制器上都获得了 404 页，并且除了索引之外，我的所有控制器/视图都没有呈现。

然而。如果我在 /var/www 中创建第二个 .htaccess 文件并将这一行放入其中：

```
ErrorDocument 404 /index.php 
```

现在我的重写工作正常，我的控制器和我的所有页面都可以正常加载。但是，我仍然得到一个在 firebug 中找不到的 404 页面，但我的页面仍在加载。

这里发生了一些我不理解或不尊重的奇怪和疯狂的事情。双重重定向？Apache 不知道 DocumentRoot 是什么意思？为什么 /var/www/html/.htaccess 文件不被识别，除非我在 /var/www 中有另一个 .htaccess 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:07:44.893

发现了问题。

在 httpd.conf 我改变了

```
<Directory "/var/www/html">
        AllowOverride none 
```

到

```
<Directory "/var/www/html">
        AllowOverride All 
```

这很难发现，因为该目录设置中有大量评论并且它掩盖了它。.conf 文件中还有许多其他 AllowOverride All 语句，这让我觉得我已经设置了设置。

# 但是等等，还有更多！

我还从 IRC 上一个名为“thumbs”的人那里了解到，我应该将 .htaccess 文件的内容直接放入 httpd.conf 中的 <Directory> 设置中。当您这样做时，您可以更改回 AllowOverride none 并获得显着的性能提升。

# iphone - uitableview headerViewForSection：总是返回 nil

> ID：15231726
> 
> 赞同：19
> 
> 时间：2013-03-05T18:49:40.143
> 
> 标签：iphone, ios, uitableview

我有一个带有自定义标题视图的表格，无论何时或为部分选择什么值，我总是得到 nil 值。我有另一张桌子也有同样的问题。

如果我打印 [tableview subviews] 的值，我可以看到标题视图，但我不知道为什么该方法不会返回任何内容。

我想要做的是获取 headerview 中的 activityIndi​​cator 并通过方法调用启动或停止它。

标题总是画得很好，但我无法得到它的参考。另外，调用`headerViewForSection:`不调用委托方法，这正常吗？

`footerViewForSection:`有同样的问题

一些代码：

```
- (UIView*) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    NSArray* objs = [[NSBundle mainBundle] loadNibNamed:@"iPadTableCells" owner:nil options:nil];
    UIView* header = [objs objectAtIndex: 0];

    UIActivityIndicatorView* activityIndicator = (UIActivityIndicatorView*) [header viewWithTag:5];
    [activityIndicator startAnimating]

    return header;

} 
```

从任何方法：

```
 UIView* headerView = [tableview headerViewForSection: section];  //returns nil

    if (headerView) {
        UIActivityIndicatorView* activityIndicator = (UIActivityIndicatorView*)[headerView viewWithTag: 5];
        [activityIndicator stopAnimating];
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T20:03:33.490

# 回答

从文档：

> 要使表格视图知道您的页眉或页脚视图，您需要注册它。您可以使用 的`registerNib:forHeaderFooterViewReuseIdentifier:`or`registerClass:forHeaderFooterViewReuseIdentifier:`方法执行此操作`UITableView`。

（对应的 Swift 是 `register(_:forHeaderFooterViewReuseIdentifier:)`.）

因此，您需要注册 nib，然后使用重用标识符获取它，而不是直接将其从应用程序包中拉出，这就是您现在正在做的事情。

...如果您想使用该`headerViewForSection`方法。

# 替代答案

或者，您可以检查是否在方法内继续旋转`viewForHeaderInSection`，然后发送调用：

```
[self.tableView beginUpdates];
[self.tableView endUpdates]; 
```

刷新节标题。

（请注意，这种替代方法会破坏并重新创建您的整个视图，因此如果您有一个包含大量数据的大表，它可能效率不高。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-26T10:01:48.653

*自从提出这个问题以来已经有一段时间了，最​​近我遇到了一个类似的问题并在这里问了我自己的问题：* [UITableView -headerViewForSection 返回（null）](https://stackoverflow.com/questions/20188049/uitableview-headerviewforsection-returns-null)
*我相信我有答案。*

* * *

## 先决条件步骤：

1.  创建一个`UITableViewHeaderFooterView`子类并命名`CustomHeaderView`
2.  为该类创建一个视图界面 nib 文件（*显然您已`iPadTableCells`在此处*命名）
3.  在 xib 中，在其**Identity Inspector中选择 View &**
    *   **将自定义类**指定为`CustomHeaderView`
4.  制作一个属性，合成并连接到xib
    *   `@property (strong, nonatomic) IBOutlet UIActivityIndicatorView *activityIndicator;`

* * *

使用以下代码：

```
- (UIView*) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    static NSString *HeaderIdentifier = @"header";
    CustomHeaderView *header = [tableView dequeueReusableHeaderFooterViewWithIdentifier:HeaderIdentifier];

    if(!header) {
        NSArray* objs = [[NSBundle mainBundle] loadNibNamed:@"iPadTableCells"
                                                      owner:nil
                                                    options:nil];
        header = [objs objectAtIndex: 0];
    }

    [header.activityIndicator startAnimating];
    return header;
} 
```

那么您可以通过以下方式访问它：

```
CustomHeaderView *headerView = (CustomHeaderView*)[tableView headerViewForSection:section];
[headerView.activityIndicator stopAnimating]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-08T00:00:34.100

# ****迅速****

**`UITableViewHeaderFooterView`您只需要为需要返回的标题视图创建一个实例**

 **```
 func tableView(tableView: UITableView, viewForHeaderInSection section: Int) -> UIView? {
        let sectionHeaderView = UITableViewHeaderFooterView()
        //customize your view here
        return sectionHeaderView
    } 
```**

# javascript - 如何从 jQueryFullcalendar 获取开始和结束日期？

> ID：15231731
> 
> 赞同：1
> 
> 时间：2013-03-05T18:50:06.680
> 
> 标签：javascript, jquery, fullcalendar

我需要知道每月和每周视图中的开始和结束日期。

有没有办法用插件轻松做到这一点？

另一个问题：是否可以为此插件实现客户端缓存，以便缓存 12 个月的事件。

这样，当用户返回时，我不必去服务器提取数据。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:22:32.663

`View Object`具有`start`、`end`和属性，因此您可以简单地尝试`visStart`：`visEnd`

```
viewDisplay: function(view) {
    alert('Visible start date ' + view.visStart);
} 
```

当然，您可以`View Object`使用 jQuery 获得整体：

```
$('#id_of_calendar_div').fullcalendar('getView') 
```

或仅特定属性：

```
$('#id_of_calendar_div').fullcalendar('getView').visStart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-19T06:55:13.673

我的回答是基于 FullCalendar v2.3.2

```
var viewStartDate = getViewFormattedDate($('#calendar').fullCalendar('getView').start._d);
var viewEndDate = getViewFormattedDate($('#calendar').fullCalendar('getView').end._d);
console.log(viewStartDate+"---"+viewEndDate); 
```

您将获得 Date 对象，并且可以将其转换为您想要的任何日期格式。

# amazon-s3 - AWS：在将 S3 文件备份到 Glacier 时降低成本的方法？

> ID：15231733
> 
> 赞同：12
> 
> 时间：2013-03-05T18:50:11.307
> 
> 标签：amazon-s3, amazon-ec2, amazon-glacier

作为我们项目的一部分，我们在 S3 上创建了一个相当茂密的文件夹/文件树，所有文件占用了大约 6TB 的数据。我们目前没有这些数据的备份，这是不好的。我们想做定期备份。似乎冰川是要走的路。

问题是：有哪些方法可以降低备份的总成本？

我们的大多数文件都是文本，因此我们可以压缩它们并上传整个 ZIP 档案。这将需要处理（在 EC2 上），所以我很好奇是否有任何经验法则来比较运行 EC2 实例进行压缩与仅上传未压缩文件的额外成本。

此外，我们必须为数据传输付费，所以我想知道除了（i）从 S3 下载文件到实例之外是否有任何备份方式；(ii) 以原始形式上传文件或压缩到 Glacier。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-05T21:52:16.807

我通常认为 Glacier 是 S3 的*替代*存储，而不是*额外*的存储。即，数据通常存储在 S3 或 Glacier 中，但很少同时存储。

如果您相信 S3 宣传的 11 个 9 的持久性，那么您就不会备份，因为 S3 本身很可能会丢失数据。

您可能希望备份数据，因为（就像我一样）您将您的 Amazon 帐户视为单点故障（例如，凭证被盗或 Amazon 阻止您的帐户，因为他们认为您在做一些滥用行为）。然而，在这种情况下，Glacier 并不是一个足够的备份，因为它仍然属于亚马逊的保护伞。

如果您担心由于用户错误、凭证泄露等原因而导致 S3 中的数据丢失，我建议您在 Amazon 之外备份 S3 数据。

我建议使用 Glacier 作为长期、廉价存储数据存档的地方，当您知道自己不需要太多访问它时（如果有的话）。当事物转移到 Glacier 时，您将从 S3 中删除它们。

亚马逊提供从 S3 到 Glacier 的自动存档，效果很好，但如果文件的平均大小很小，请注意额外费用。这是我写的一篇关于这种危险的文章：

> 将 S3 对象转换为 Glacier 的成本
> [http://alestic.com/2012/12/s3-glacier-costs](http://alestic.com/2012/12/s3-glacier-costs)

如果您仍想从 S3 复制到 Glacier，这里有一些与您的问题相关的要点：

*   您可能会将数据留在 Glacier 中很长时间，因此压缩它可能值得短期 CPU 使用。确切的权衡取决于数据的可压缩性、压缩需要多长时间以及需要执行压缩的频率等因素。

*   将数据从 S3 下载到 EC2 实例是免费的。将数据上传到 Glacier 不收取数据传输费用。

*   如果您将许多小文件上传到 Glacier，则每个项目的上传费用可能会累加。您可以通过将许多小文件合并到一个存档中并上传来节省成本。

另一个可以帮助防止因用户错误或攻击而导致意外丢失的 S3 功能是打开 S3 版本控制并启用 MFA（多因素身份验证）。这可以防止任何人永久删除对象，除非他们拥有凭据和您拥有的物理设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-29T16:46:29.773

我最初通过执行以下操作在我想要备份的 S3 存储桶中解决了相同的问题：

1.  为我要备份到 Glacier 的每个 S3 存储桶创建第二个“镜像”存储桶
2.  启动一个微型 Ubuntu 服务器实例以运行 cron 作业
3.  在服务器上安装 s3cmd
4.  编写一个shell脚本，将每个桶中的所有对象同步到镜像桶中
5.  在镜像桶上启用生命周期规则，将每个对象的状态更改为“Glacier”

这工作得很好，但出于我的目的，我决定在我的存储桶上启用版本控制更容易。这确保了如果一个对象被意外删除或更新，它可以被恢复。这种方法的缺点是恢复整个分支或子树的过程可能很耗时。但它更容易、更具成本效益，并且足以保护桶中的内容物免受永久性破坏。

希望能帮助别人。

# asp.net - Cookie 仅在 IE 中设置，而在 firefox/chrome 中不设置

> ID：15231738
> 
> 赞同：0
> 
> 时间：2013-03-05T18:50:22.837
> 
> 标签：asp.net, iis, cookies, windows-server-2012, iis-8

我有一个 ASP.NET 2.0 Web 应用程序。多年来，Cookie 在 windows server 2008 上的所有浏览器上都运行良好。

我们升级到带有 windows server 2012（IIS8）的新服务器，测试期间的第一天 cookie 没有在 Firefox 中设置，所以我们无法登录（不确定 chrome）。第二天，没有任何变化，似乎一切正常。

快进一个月左右，firefox 和 chrome 不会设置 cookie（在 chrome 开发工具和 firebug 中查看），但它仍在 IE 中工作，我可以看到 IE 开发工具中设置的 cookie。

Cookie 值正在设置中

> HttpContext.Current.Response.Cookies[][]

有谁知道为什么会这样，或者我应该从哪里开始尝试诊断这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T06:20:33.913

我们在我们的开发服务器上遇到了同样的问题，并花了几个小时来找到它的根本原因。登录可以在 IE 上工作，但不能在 FF 和 Chrome 上工作。我们终于解决了问题。不确定我们的解决方案对其他人的相关性有多大，但我想我会在这里发布它，有一天它可能会对某人有所帮助。

在我们的例子中，在尝试了很多事情之后，我们终于重新启动了服务器，然后才知道 SSL 证书已经过期，这就是导致问题的原因。完全禁用 SSL 使登录再次工作。我们更新了 SSL 并启用了 SSL，现在一切都很好。

# imagemagick - 通过imagemagick将psd转换为png提供垃圾输出

> ID：15231739
> 
> 赞同：4
> 
> 时间：2013-03-05T18:50:23.347
> 
> 标签：imagemagick, psd, imagemagick-convert

我正在尝试在 psd 上运行转换以每层创建一个 png。跑步

```
$ convert psdname.psd output.png 
```

创建正确数量的 png，但内容完全乱码 - 就像横穿屏幕的水平线

[http://imgur.com/6X2T74G](http://imgur.com/6X2T74G)

我认为这可能是一个色彩空间问题（psd 是 CMYK 格式），但添加 -colorspace 并没有做任何事情。我完全不知所措

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T07:22:57.993

不幸的是，开源软件中的 PSD 支持充其量只是微不足道的。[Gimp](http://www.gimp.org/)可以很好地处理带有图层的 PSD 文件，但它不能处理嵌套图层。您仍然可能想看一下它，因为它是高度可编写脚本的并且可能适合您。

# javascript - 在谷歌分析中跟踪事件表单查询字符串

> ID：15231742
> 
> 赞同：0
> 
> 时间：2013-03-05T18:50:40.347
> 
> 标签：javascript, events, google-analytics

我正在尝试使用谷歌分析跟踪来自具有不同 URL 的页面的下载。

那就是我正在发送树 URL：我需要跟踪人们正在访问和下载的 URL。

```
http://www.testsite.com/?id=One
http://www.testsite.com/?id=Two
http://www.testsite.com/?id=Tree 
```

我使用查询字符串创建 URL，并尝试在“onclick="_gaq.push(['_trackEvent',...”中使用“id”</p>

```
<a href="http://www.testsite.com/test.pdf" target="_blank" onclick="_gaq.push(['_trackEvent', 'Marketing', 'PDF', ???]);">test.pdf</a> 
```

我应该写什么而不是“？？？”</p>

# knockout.js - Breeze从knockoutjs foreach中隐藏数组

> ID：15231745
> 
> 赞同：0
> 
> 时间：2013-03-05T18:50:43.737
> 
> 标签：knockout.js, breeze

我有一个复杂的图表。在图中有 a) 带有数组的类型和 b) 带有数组的类型数组。

我正在使用 Breezejs 加载图表并将其传递给 knockoutjs (2.2.1)。

似乎我可以对 a) 类型中的数组进行 foreach，但不能对 b) 类型中包含的数组进行 foreach。换句话说，b) 类型本身是循环的，并且包含数组的内部循环。b) 类型中的简单元素会显示在淘汰赛 html 输出中，但不会显示在数组中。

例如：主图是医生。医生有一个 ContactInfo（上面的“a”类型）类型，其中包含名字/姓氏等。ContactInfo 中包含地址、电话号码和电子邮件的数组。这些都可以使用 data-bind="foreach: ContactInfo().Addresses()" 列出

医师图表中还包含医师可以属于的成员资格数组（上面的类型“b”）。phys.Memberships[].Organization 包含组织的名称等。它还具有包含金额的费用类型数组 (phys.Memberships[].Fees[])。我可以得到组织名称，但不能得到费用。金额。

如果我将从服务器返回的 json 文字粘贴到一个变量中，消除 Breezejs 对数据执行的任何魔法以使它们成为 ko.observables 我能够访问 b) 类型及其内部数组，但如果我不能将微风调用的成功方法中的数据传递到 viewModel。

我会粘贴 json graph litteral 但它超过 500 行。

我只是想知道这是否是breezejs 的一个已知限制，或者我做错了什么。

这是视图模型：

```
 var PhysiciansModel = function (physicians) {
    var self = this;
    self.showPhysList = ko.observable(false),
    self.physicians = ko.observableArray(physicians);
    self.selectedPhys = ko.observable(),
    self.selectedPhysIndex = ko.observable(),
    self.selectedPhysGraph = ko.observable(),
    self.save = function () {
      saveChanges();
    };
    self.getPhysByInitial = function (item, event) {
      getPhysList(event.target.textContent);
      self.showPhysList(true);
    };
    self.clickOnPhys = function (phys, event) {
      if (self.selectedPhys() == null || (phys.Id() !== self.selectedPhys().Id())) {
        self.selectedPhys(phys);
        self.selectedPhysIndex(event.target.parentElement.parentElement.id);
        getPhysGraph(self.selectedPhys().Id());
        self.showPhysList(false);
      }
    };
  }; 
```

谢谢

# facebook - 就像在 fb 中的私人群组帖子

> ID：15231746
> 
> 赞同：-1
> 
> 时间：2013-03-05T18:50:46.657
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

到目前为止，我可以让用户喜欢墙帖，但问题是当我需要通过 javascript sdk 让用户喜欢私人群组帖子时。
我什至看不到使用[https://graph.facebook.com/GROUP_ID/feed?access_token=ACCESS_TOKEN](https://graph.facebook.com/GROUP_ID/feed?access_token=ACCESS_TOKEN)的组中的提要它显示一个空白页面，写入数据，我的令牌有没有问题。还有一件事我需要使用我的应用程序访问令牌 no 或 user_access_token，如果 user_access_token 没有，那么我怎么能得到它，因为我只能设法得到 app_access_token 没有，这是通过方法[https://graph.facebook 修复的.com/oauth/access_token?client_id=CLIENT_ID&client_secret=CLIENT_SECRET&grant_type=client_credentials](https://graph.facebook.com/oauth/access_token?client_id=CLIENT_ID&client_secret=CLIENT_SECRET&grant_type=client_credentials)。但是当我尝试使用 facebook api 工具获取群组提要时，它会显示在那里。那么问题是什么
很抱歉有这么多问题，谢谢我提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:05:37.107

您需要各种权限才能在群组中查看和发布。您需要`publish_stream`发布到群组，另外还需要`user_groups`在群组中进行交互/查看。

[https://developers.facebook.com/docs/reference/api/group/](https://developers.facebook.com/docs/reference/api/group/)

# gxt - How to get an Id of a widget in GXT

> ID：15231757
> 
> 赞同：1
> 
> 时间：2013-03-05T18:51:19.230
> 
> 标签：gxt

here I got a problem with the setId of a window at the time of getId in order to retrieve the window name in a loop. Here is a snippet:

```
int counter1 =1;
final Integer counter = new Integer(counter1);
windowDoneTextButton.addSelectHandler(new SelectHandler() {
                @Override
                public void onSelect(SelectEvent event) {
                    if (counter <= 100) {
                    window.setId(new Integer(counter).toString());
                    windowQuestionVerticalLayoutContainer.setId(new Integer(counter).toString());
              window.hide();
              addItemSplitButton.removeFromParent();
              Label questionTitleLabelOfWindowQuestionTextField = new Label();
              questionTitleLabelOfWindowQuestionTextField.setText(windowQuestionTextField.getValue());
              Label questionHelpTextLabelOfWindowQuestionHelpTextTextField = new Label();
              questionHelpTextLabelOfWindowQuestionHelpTextTextField.setText(windowQuestionHelpTextTextField.getValue());
              FormPanel editFormPanel = new  FormPanel();
              HorizontalPanel editHorizontalPanel =  new HorizontalPanel();
              TextButton editButton  =  new TextButton();
             editButton.addSelectHandler(new SelectHandler() {
                  @Override
                    public void onSelect(SelectEvent event) {
                      addItemSplitButton.removeFromParent();
                      window.show();
                      homePageVerticalLayoutContainer.add(window);
                homePageVerticalLayoutContainer.add(addItemSplitButton);
                  }
              }); 
```

# google-maps - MapKit iOS 6.1 还是 Google Maps API 1.1.0？

> ID：15231759
> 
> 赞同：1
> 
> 时间：2013-03-05T18:51:22.223
> 
> 标签：google-maps, mapkit, google-maps-sdk-ios, ios6.1

我正在考虑是否应该使用`MapKit`or `Google Maps API`，我正在使用 iOS 6.1。

我将在我的应用程序上实现一些带有地图的功能，例如图钉、带有预览用户选择的跟踪器路线等。

`Google Maps`自 2 月 21 日起有一个新的 API 版本。

*   `MapKit`是一致的？我在苹果地图上读到了许多错误。
*   使用起来更难`Google API`？我会有法律问题吗？
*   我怎么知道我必须使用什么系统？

我知道这里有很多关于它的问题，但我没有找到关于`Google API`（自年初发布）和 iOS 6.1 上的 MapKit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:36:54.143

我的建议是使用地图套件。它已得到大规模改进，并且大多数初始错误已得到处理。虽然 google map API 是一个不错的解决方案，但我仍然更喜欢 map kit，因为它的原生 iOS 和功能比 google 更流畅。

# java - 带有 2 个 if 的 while 循环中的死代码警告

> ID：15231760
> 
> 赞同：4
> 
> 时间：2013-03-05T18:51:23.873
> 
> 标签：java, dead-code

我不明白为什么 Eclipse 在第二个 if 条件下给我一个死代码警告：

```
 boolean frameErreicht = false;
  while (!frameErreicht) {
        String line = reader.readLine();
        if (line.matches("@\\d*")) {
            reader.mark(reader.getLineNumber() - 1);
            reader.setLineNumber(reader.getLineNumber() - 1);
            frameErreicht = true;
        }
        if (line == null)
            throw new IOException("Keine Angaben zu Frames im Eingabestrom");
    } 
```

LinenumberReader 的 readLine() 方法的 jdoc 表示，如果到达流的末尾，它将返回`null`，因此如果在整个文本 ( `line == null`) 中都没有找到匹配项，它应该抛出异常。
但是怎么了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T18:53:01.520

如果 line 为 null，`line.matches("@\\d*")`则会抛出 NullPointerException

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T18:54:20.197

它已经死了，因为您之前在第 4 行中取消引用了指针“line”，这保证它不是 NULL，否则您会得到 NullPointerException。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T18:58:34.950

第一的：

```
boolean found = false;
String line = null;
while ((line=reader.readLine())!=null) {
    if (line.matches("@\\d*")) {
        reader.mark(reader.getLineNumber() - 1);
        reader.setLineNumber(reader.getLineNumber() - 1);
        found=true;
        break;
    }
}
if(!found) throw new IOException("Keine Angaben zu Frames im Eingabestrom"); 
```

而且您没有在每一行都进行此检查...

此代码不应返回任何死代码...

# java - 如何在java连接池中检查连接是否关闭

> ID：15231761
> 
> 赞同：0
> 
> 时间：2013-03-05T18:51:24.847
> 
> 标签：java, jdbc, connection-pooling

在下面的程序中，我一直在睡眠模式下执行。但是 con obj 仍然没有关闭。

```
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import org.apache.tomcat.jdbc.pool.DataSource;
import org.apache.tomcat.jdbc.pool.PoolProperties;
public class ConnPool {

public static void main(String[] args) throws Exception {
    PoolProperties p = new PoolProperties();
    p.setUrl("jdbc:mysql://localhost:3306/users");
    p.setDriverClassName("com.mysql.jdbc.Driver");
    p.setUsername("root");
    p.setPassword("root1");
    p.setJmxEnabled(true);
    p.setTestWhileIdle(false);
    p.setTestOnBorrow(true);
    p.setValidationQuery("SELECT 1");
    p.setTestOnReturn(false);
    p.setValidationInterval(10000);
    p.setTimeBetweenEvictionRunsMillis(10000);
    p.setMaxActive(100);
    p.setInitialSize(10);
    p.setMaxWait(10000);
    p.setRemoveAbandonedTimeout(60);
    p.setMinEvictableIdleTimeMillis(10000);
    p.setMinIdle(10);
    p.setLogAbandoned(true);
    p.setRemoveAbandoned(true);
    p.setJdbcInterceptors("org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;"
            + "org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer");
    DataSource datasource = new DataSource();
    datasource.setPoolProperties(p);

    Connection con = null;
    try {
        con = datasource.getConnection();
        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery("select * from emp");
        int cnt = 1;
        while (rs.next()) {
            System.out.println( "Name:" + rs.getString(1)+ " Address:" + rs.getString(2) );
        }
        rs.close();
        st.close();
        Thread.sleep(40000);
        System.out.print(con.isClosed());
    } finally {
       /* if (con != null) {
            try {
                con.close();
            } catch (Exception ignore) {
            }
        }*/
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:13:03.060

当您使用连接池时，您仍然需要通过调用显式关闭连接[`Connection.close()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Connection.html#close%28%29)。这将向连接池发出信号，表明连接再次空闲并且可以返回到连接池。

`Connection`您从连接池中获得的不是与数据库的实际物理连接，而是一个逻辑连接，它是实际物理连接的包装器或代理。对于某些任务（最值得注意的`close()`），它将实现稍微不同的行为（以便连接池可以重用它），但对于最终用户来说，它的行为就像是一个正常的连接（例如，所有依赖对象都应该关闭） .

您的问题不是很明确，但我假设您的意思是问为什么即使您设置了超时，连接池还没有回收连接。我能想到几个原因：

1.  您将其设置`removeAbandonedTimeout`为 60 秒，而您仅睡眠 40000 毫秒（40 秒），
2.  该实现可能使用回收“废弃”连接的合作方式（例如，它可能只检查何时`Connection`请求新连接，或者当池可用连接不足时）

# ios - NSDateFormatter 的问题

> ID：15231762
> 
> 赞同：-2
> 
> 时间：2013-03-05T18:51:37.997
> 
> 标签：ios, objective-c, nsdate, nsdateformatter

我有一个 NSString：`@"05.03.2013, 21:33"` 我想从这个字符串中获取 NSDate

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"dd.MM.yyyy',' hh:mm"];
NSDate *discussionDate = [dateFormat dateFromString:discModel.date]; 
```

之后我把 NSLog 和它打印`discussionDate`出来`nil`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:58:30.693

尝试

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
                            [dateFormat setDateFormat:@"dd.MM.yyyy',' HH:mm"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:00:02.037

你应该使用`HH`而不是`hh`你的时间格式

并且最好设置 timeZone 以避免时间变化

```
[dateFormat setTimeZone:[NSTimeZone timeZoneWithName:@"CET"]]; 
```

# html - Get background image to expand upwards rather than downwards

> ID：15231765
> 
> 赞同：0
> 
> 时间：2013-03-05T18:51:49.297
> 
> 标签：html, css

I have a large background image (3600x1600) for my website which I want to use at this resolution to cover pretty much all screens up to 2k.

However, my dilemma is that this image includes sky in it and the top 1000 or so pixels are literally just sky, meaning that at 1080p, all you can really see is the sky in the image, due to the fact that the browser will start the image at the top of the page and expand down as your resolution gets larger.

I need the background-image to stick to the bottom of the page and expand upwards as opposed to downwards, so all resolutions can see the city in the image and then the sky covers larger resolutions.

I've tried a few different things, scaling background to 100% using CSS3, which due to the aspect ratio of the picture leaves a white gap at the bottom of the page at 16:9 and the position "bottom" tag, just puts the bottom of the image at the top of the page which is ridiculous...

Any ideas of how to do this or if it is possible at all? Thanks.

# android - how to manipulate value in spinner android

> ID：15231767
> 
> 赞同：0
> 
> 时间：2013-03-05T18:51:53.640
> 
> 标签：android, android-spinner

i have a spinner with 4 value

```
String[] petak = { "Petak 1", "Petak 2", "Petak 3", "Petak 4" }; 
```

![Image 1](../Images/5b862616ae3e16b870449c45cb45fd06.png)

**First** i choose the value "Petak 1"

then i choose "foto dan save" to next step

and the value now is

![Image 2](../Images/64197ea6fe430147763ed72045409d0e.png)

because value "Petak 1" is already choosen before, so the value "Petak 1" is dissapear.

now i choose "foto dan save" again

and the value is

![Image 3](../Images/f44da85189260e48470486a248187928.png)

because value "Petak 1" and "Petak 2" is already choosen before, so the value "Petak 1" and "Petak 2" is dissapear.

The question is how to manipulate value spinner when i choose the value **Random** , Example : i choose "Petak 2" First ? so the value is show "Petak 1", "Petak 3", "Petak 4"

here is my code

```
 View spinner1 = (Spinner) findViewById(R.id.namapetak);
            String spinnerPetak=((Spinner) spinner1).getSelectedItem().toString();
            if (spinnerPetak == "Petak 1"){
                String[] petak1 = { "Petak 2", "Petak 3", "Petak 4" };
                // buat spinner manual manufaktur
                Spinner spin3 = (Spinner) findViewById(R.id.namapetak);
                //spin3.setOnItemSelectedListener(this);
                ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, petak1);
                aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                spin3.setAdapter(aa);
                //update = (Button) findViewById(R.id.update);

                spin3 = (Spinner) findViewById(R.id.namapetak);
                spin3.setOnItemSelectedListener(new OnItemSelectedListener() {
                    @Override
                    public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
                        //Toast.makeText(CPupukApp.this, "Anda Memilih: " + manufaktur[position],Toast.LENGTH_LONG).show();
                    }

                    public void onNothingSelected(AdapterView<?> parent) {

                    }

                    });
                View b = findViewById(R.id.btnPupukQuit);
                b.setVisibility(View.GONE);
                onBackPressed();
                onAttachedToWindow();

            }

            if (spinnerPetak == "Petak 2"){
                String[] petak1 = { "Petak 3", "Petak 4" };
                // buat spinner manual manufaktur
                Spinner spin3 = (Spinner) findViewById(R.id.namapetak);
                //spin3.setOnItemSelectedListener(this);
                ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, petak1);
                aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                spin3.setAdapter(aa);
                //update = (Button) findViewById(R.id.update);

                spin3 = (Spinner) findViewById(R.id.namapetak);
                spin3.setOnItemSelectedListener(new OnItemSelectedListener() {
                    @Override
                    public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
                        //Toast.makeText(CPupukApp.this, "Anda Memilih: " + manufaktur[position],Toast.LENGTH_LONG).show();
                    }

                    public void onNothingSelected(AdapterView<?> parent) {

                    }

                    });
                View b = findViewById(R.id.btnPupukQuit);
                b.setVisibility(View.GONE);
                onBackPressed();
                onAttachedToWindow();

            }

            if (spinnerPetak == "Petak 3"){
                String[] petak1 = { "Petak 4" };
                // buat spinner manual manufaktur
                Spinner spin3 = (Spinner) findViewById(R.id.namapetak);
                //spin3.setOnItemSelectedListener(this);
                ArrayAdapter<String> aa = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, petak1);
                aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                spin3.setAdapter(aa);
                //update = (Button) findViewById(R.id.update);

                spin3 = (Spinner) findViewById(R.id.namapetak);
                spin3.setOnItemSelectedListener(new OnItemSelectedListener() {
                    @Override
                    public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
                        //Toast.makeText(CPupukApp.this, "Anda Memilih: " + manufaktur[position],Toast.LENGTH_LONG).show();
                    }

                    public void onNothingSelected(AdapterView<?> parent) {

                    }

                    });
                View b = findViewById(R.id.btnPupukQuit);
                b.setVisibility(View.GONE);
                onBackPressed();
                onAttachedToWindow();

            } 
```

Anyone help me?

**EDIT**

this code work when i put this on button onClick "Foto dan Save", but error when i put to onActivityResult , line `switch (v.getId())` can `switch` add in onActivityResult?

```
String myData = toList.getSelectedItem().toString();
              int position = dataAdapter.getPosition(myData);

              switch (View.getId()) {

              case R.id.btnPetakFoto:

               if(position >= 0){
                dataAdapter.remove(myData);
                dataAdapter.notifyDataSetChanged();
               }
               else {
                Toast.makeText(getBaseContext(), myData + " not in Spinner", Toast.LENGTH_LONG).show();
               }
               break;
               // More buttons go here (if any) ...

              }

            View b = findViewById(R.id.btnPupukQuit);
            b.setVisibility(View.GONE);
            onBackPressed();
            onAttachedToWindow(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:26:29.453

使用 ArrayList 来解决您的问题，您还应该考虑使用 switch 而不是一堆 if。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:04:34.820

对，您要做的是使用 an`ArrayList`来保存您的基础数据，然后在您单击*Foto dan Save*按钮时更新它。

您将如何执行此操作的一个小示例如下：

```
public class MainActivity extends Activity {
ArrayAdapter<String> spinnerAdapter;
Spinner spinner1;
ArrayList<String> petak;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    petak = new ArrayList<String>();
    petak.add("Petak 1");
    petak.add("Petak 2");
    petak.add("Petak 3");
    petak.add("Petak 4");

    spinner1 = (Spinner) findViewById(R.id.spn_petak);
    spinnerAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, petak);

    spinner1.setAdapter(spinnerAdapter);

    Button foto = (Button)findViewById(R.id.foto);
    foto.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            petak.remove(spinner1.getSelectedItem().toString());
            spinnerAdapter.notifyDataSetChanged();

        }
    });

} 
```

这是自包含代码，因此您可以将其复制到新项目中，它会按预期工作，或者您可以获取重要部分并将它们应用到您的代码中。

基本上我们正在做的是创建一个新的`ArrayList`并将您的四个*Petak*值添加到它。然后我们创建一个新`SpinnerAdapter`的，`ArrayList`作为参考。

当用户点击*foto*`String`按钮时，我们从底层证券中移除选定的项目`ArrayList`，然后调用`notifyDataSetChanged`我们`SpinnerAdapter`的以更新显示的项目列表。

# ios - How do I use RKResponseDescriptor with an id?

> ID：15231772
> 
> 赞同：2
> 
> 时间：2013-03-05T18:52:02.573
> 
> 标签：ios, restkit

I am trying to create a RKResponseDescriptor to get people in a session.

I have a response descriptor for /sessions but I don't know how to create it to get the people in the sessions /sessions/20/people (/sessions/sessionID/people).

My session response descriptor is;

```
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:sessionsMapping
                                                                                   pathPattern:@"/sessions"
                                                                                       keyPath:nil
                                                                                   statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]; 
```

The response descriptor for the people in the session is;

```
RKResponseDescriptor *clientInSessionResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:clientsInSessionMapping
                                                                                   pathPattern:@"/sessions/:sessionID/people"
                                                                                       keyPath:nil
                                                                                   statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]; 
```

I keep getting the error, "Failed with error: No response descriptors match the response loaded."

I noticed in the documentation there is a lot of usage of the :id but can't seem to figure it out. Also, should I use a RKPathMatcher to build the path?

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:01:00.067

我所做的是发送请求路径时的参数替换。因此，在您的情况下，我将执行以下操作：

```
NSString *idValue; // this is the sessionID value
NSString *path = [@"/sessions/:sessionID/people" stringByReplacingOccurrencesOfString:@":sessionID" withString:idValue];
[[RKObjectManager sharedManager] getObjectsAtPath:path parameters:nil success:^(RKObjectRequestOperation *operation,RKMappingResult *mappingResult) 
{
  // handle success
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    RKLogError(@"*** RK load FAIL");
}] 
```

# c# - Save JPEG in Grayscale color mode

> ID：15231774
> 
> 赞同：2
> 
> 时间：2013-03-05T18:52:11.680
> 
> 标签：c#, image-processing

I'm trying to save a JPEG as a grayscale image.

I found the code below that will *make* it grayscale by blending the channels, but it still has all three RGB channels. I only need one 8 bit channel.

```
 public static Bitmap MakeGrayscale(Bitmap original)
    {
        //create a blank bitmap the same size as original
        Bitmap newBitmap = new Bitmap(original.Width, original.Height);

        //get a graphics object from the new image
        Graphics g = Graphics.FromImage(newBitmap);

        //create the grayscale ColorMatrix
        ColorMatrix colorMatrix = new ColorMatrix(
           new float[][] 
          {
             new float[] {.3f, .3f, .3f, 0, 0},
             new float[] {.59f, .59f, .59f, 0, 0},
             new float[] {.11f, .11f, .11f, 0, 0},
             new float[] {0, 0, 0, 1, 0},
             new float[] {0, 0, 0, 0, 1}
          });

        //create some image attributes
        ImageAttributes attributes = new ImageAttributes();

        //set the color matrix attribute
        attributes.SetColorMatrix(colorMatrix);

        //draw the original image on the new image
        //using the grayscale color matrix
        g.DrawImage(original, new Rectangle(0, 0, original.Width, original.Height),
           0, 0, original.Width, original.Height, GraphicsUnit.Pixel, attributes);

        //dispose the Graphics object
        g.Dispose();
        return newBitmap;
    } 
```

Is there any way in C# to actually set the color mode of JPEG?

I've tried the following, but it still outputs a 24 bit RGB image.

```
 ImageCodecInfo codec = GetEncoderInfo("image/jpeg");
            System.Drawing.Imaging.Encoder enc = System.Drawing.Imaging.Encoder.ColorDepth;
            EncoderParameters encParams = new EncoderParameters(1);
            encParams.Param[0] = new EncoderParameter(enc, 8L);

            source_bitmap.Save(outputFile, codec, encParams); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:32:57.010

有不同的灰度可以编译为图像中三个通道的线性组合。

最常用的是“亮度”，但它会根据您的图像而有所不同。[看到这个](http://www.johndcook.com/blog/2009/08/24/algorithms-convert-color-grayscale/)

转换为亮度灰度采取

```
greyscale = 0.21 * R + 0.71 * G + 0.07 * B 
```

其中 R、G 和 B 分别是您的红色、绿色和蓝色通道，并且假设它们的比例为 0 到 1。如果它们的比例为 255，则除以 255

# java - My program skips letting a user enter a value for one variable

> ID：15231778
> 
> 赞同：2
> 
> 时间：2013-03-05T18:52:21.680
> 
> 标签：java

In this program, I'm creating 2 objects from the CarOrder class with preset values. I'm then asking the user for another 2 sets of values to create 2 more objects. Unfortunately, after entering tax status for the first one, it will skip letting the user enter a value for the buyer on the second one. Why is it randomly skipping this one question?

```
public static void main(String[] args)
{
    Scanner keyboard = new Scanner(System.in);
    CarOrder speedy = new CarOrder("Speedy Rental", "Mini Cooper", 22150, 15, true);
    CarOrder zip = new CarOrder("Zip Car Co.", "Ford Fusion", 27495, 6, true);

    System.out.println("Enter Buyer: ");
    String buyer1 = keyboard.nextLine();
    System.out.println("Enter the type of car being purchased: ");
    String car1 = keyboard.nextLine();
    System.out.println("Enter the cost of this purchase: ");
    double cost1 = keyboard.nextDouble();
    System.out.println("Enter quantity of cars being purchased: ");
    int quantity1 = keyboard.nextInt();
    System.out.println("Enter tax status: ");
    boolean tax1 = keyboard.nextBoolean();

    System.out.println("Enter Buyer: ");
    String buyer2 = keyboard.nextLine();
    System.out.println("Enter the type of car being purchased: ");
    String car2 = keyboard.nextLine();
    System.out.println("Enter the cost of this purchase: ");
    int cost2 = keyboard.nextInt();
    System.out.println("Enter quantity of cars being purchased: ");
    int quantity2 = keyboard.nextInt();
    System.out.println("Enter tax status: ");
    boolean tax2 = keyboard.nextBoolean();

    CarOrder state = new CarOrder(buyer1, car1, cost1, quantity1, tax1);
    CarOrder it = new CarOrder(buyer1, car2, cost2, quantity2, tax2);

    System.out.println("Chicago Car Wholesalers" );
    System.out.println("Oct. 30th, 2012");
    System.out.println("New Car Order Report");

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:04:23.247

我认为`nextBoolean()`正在消耗布尔值但留下行尾字符，然后您`nextLine()`将其用作输入。因此，`keyboard.nextLine()`在要求第二个买家之前添加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T19:03:15.823

`keyboard.nextBoolean()`只读取布尔值。现在，当您继续阅读时，`keyboard.nextLine()`您将获得`Enter`关键（这就是您正在谈论的*跳过部分）。*

您需要`keyboard.nextLine();`在询问第二个买家后添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T19:02:23.780

也许它没有跳过它，你在创建“它”时使用了错误的买家。仔细看看这个：

```
CarOrder state = new CarOrder(buyer1, car1, cost1, quantity1, tax1);
CarOrder it = new CarOrder(buyer1, car2, cost2, quantity2, tax2); // <-- This should be buyer2 
```

# actionscript-3 - 如何在 Mobile Flex 应用程序中禁用水平滚动？

> ID：15231779
> 
> 赞同：0
> 
> 时间：2013-03-05T18:52:22.650
> 
> 标签：actionscript-3, air, scroll, flex4, flex-mobile

我有 MXML s:View 组件，它由操作栏和 3 个 100% 应用程序宽度的自定义组件组成。我像这样添加了一个滚动条：

```
 section = new VGroup();
 var scroller:Scroller = new Scroller();
 scroller.percentHeight = 100;
 scroller.viewport = section; 
```

发生的事情是我得到了垂直和水平滚动条。我想删除水平滚动条。水平滚动条似乎比应用程序的宽度略宽。据我所知，我的内容不超过应用程序宽度。

如何摆脱水平滚动条？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:43:25.573

您所要做的就是将[Horizo​​ntalScrollPolicy](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Scroller.html#style%3ahorizontalScrollPolicy)样式设置为`ScrollPolicy.OFF`：

`setStyle()`在 Actionscript 中，您可以使用以下方法设置样式：

```
section = new VGroup();
var scroller:Scroller = new Scroller();
scroller.percentHeight = 100;
scroller.viewport = section;
scroller.setStyle("horizontalScrollPolicy", ScrollPolicy.OFF); 
```

在 MXML 中，您只需传入`ScrollPolicy`该类定义的字符串：

```
<s:Scroller horizontalScrollPolicy="off">
    <s:VGroup>
    </s:VGroup>
</s:Scroller> 
```

# ios - 将 UITextField 输入添加到 NSMutableArray

> ID：15231780
> 
> 赞同：0
> 
> 时间：2013-03-05T18:52:25.167
> 
> 标签：ios, objective-c, nsmutablearray

我正在尝试使用以下连接到“已结束编辑”部分将`UITextField`输入添加到：`NSMutableArray``IBActions``UITextFields`

```
- (IBAction) returnKey1
{
    [textInputOne addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
    [textInputOne resignFirstResponder];
    [players addObject:textInputOne.text];
}

- (IBAction) returnKey2
{
    [textInputTwo addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged];
    [textInputTwo resignFirstResponder];
    [players addObject:textInputTwo.text];
NSLog(@"array: %@",players);
} 
```

我已经在`viewDidLoad`部分中初始化了 player 数组，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    players = [[NSMutableArray alloc] init];
} 
```

但数组仍然是“零”。有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:24:00.447

`UITextField`当用户点击 Return 时不发送任何操作。因此，当用户点击 Return 时，您不会收到“did end editing”操作。

`UITextField`当它辞去第一响应者时发送“结束编辑”。当用户点击 Return 时，您可以通过设置文本字段的委托和实现来使其辞职第一响应者`textFieldShouldReturn:`。首先在`ViewController.m`. 编辑它（如果它不存在则添加它）以声明该类符合`UITextFieldDelegate`：

```
@interface ViewController () <UITextFieldDelegate>

@property (nonatomic, strong) IBOutlet UITextField *textFieldOne;
@property (nonatomic, strong) IBOutlet UITextField *textFieldTwo;

@end 
```

接下来，`textFieldShouldReturn:`在类中实现使文本字段退出第一响应者：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return NO;
} 
```

最后，在您的 xib 中，将每个文本字段的`delegate`出口连接到视图控制器（通常是文件的所有者）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T05:18:52.797

我希望您已正确地将代表设置为文本字段。当您在 viewDidLoad 中分配了 player 数组时，请尝试使用以下代码

```
- (IBAction) returnKey1
{
    [players addObject:textInputOne.text];
}

- (IBAction) returnKey2
{
    [players addObject:textInputTwo.text];
} 
```

分配给文本字段的 returnKey1 和 returnKey2 IBActions 都结束了编辑事件。现在辞职键盘

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
} 
```

我在一个示例项目中尝试了同样的事情，它运行良好。

# c# - Reference instanced class with field value

> ID：15231784
> 
> 赞同：0
> 
> 时间：2013-03-05T18:52:30.593
> 
> 标签：c#, class

I have a simple Class containing 3 fields. Is there a way I can obtain the value of a field by knowing one of the others? For example, I know the sysColor.name but I need to get the corresponding value of sysColor.id? In a similar way as you would use Dictionary[key] = value.

```
class SystemColor
{
    public string name;
    public ElementId id;
    public Color color;

    public SystemColor(Material material)
    {
        name = material.Name;
        id = material.Id;
        color = material.Color;
    }
} 
```

Edit:

```
List<SystemColor> sysColorList = new List<SystemColor>();
foreach (Material mat in collector)
{
    SystemColor sysColor = new SystemColor(mat);
    sysColorList.Add(sysColor);
} 
```

Yes, I have a list of the classes.

I'm collection all of the materials in a project. Then i'm checking the names against a collection of systems. If the material doesn't exist, I'm creating it. Later, when the user updates the color of a material, I want to change the BackColor of a listView to match. The name of the system matches the name of the color. So I need the color field of the corresponding name field.

# css - iframe 在固定定位元素内的位置（android）

> ID：15231795
> 
> 赞同：1
> 
> 时间：2013-03-05T18:53:21.090
> 
> 标签：css, positioning

我有一个自写的灯箱，可以从数据库中动态加载内容，结果是这样的：

```
<div class="lightbox">

    <div class="lbtop">

    </div>

    <div class="lbcontent">

        lightbox content

    </div>

    <div class="lbbot">

    </div>

</div> 
```

灯箱中的所有元素都是块级元素，并且是浮动的（包括 p、h1 等子元素）。

灯箱使用固定定位来确保它始终在同一个地方，如下所示：

```
.lightbox {

    width: 320px;
    height: auto;
    z-index: 999;
    position: fixed;
    top: 0;
    left: 0;
    display: block;
    overflow-y: scroll;

} 
```

到现在为止还挺好。向灯箱添加内容也完全没有问题，并且元素都很好地滚动。

但是，当我尝试在灯箱内添加 iframe（特别是：soundcloud embeds）时，iframe 元素的滚动方式与灯箱内的其他元素不同，如下所示：

![iframe 移过内容（不是正确的位置）](../Images/47fbd7a4eedb6f5bf1bc01f6a76f6ceb.png)

在此示例中，我刚刚向下滚动，并且 iframe 元素现在移动到文本上方，而不是停留在原处。

我已经尝试了使用 CSS 位置、溢出的不同组合的大量解决方案，甚至尝试为此构建我自己的 jQuery 驱动修复（将 iframe 包装在正确定位的 div 中），但无济于事。总而言之，我觉得这可能是 webkit 中的一个错误（我在 Android 上遇到了问题，我正在开发的网站是一个移动网站）。我确实解决了 iOs 中的错误`-webkit-overflow-scrolling : touch;`（任何人，有没有 android 替代品？）。

在网上搜索修复也没有给我任何可用的结果。我得到的最接近的是将灯箱的位置设置为绝对，但这会影响灯箱的功能，并且不能满足我的要求。

我很想对此提出任何建议:)在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:31:20.403

过了一会儿，我设法解决了这个问题。这是一个仅在 SDK 的 android 模拟器中（奇怪地）出现的问题。太糟糕了，我花了这么多时间来修复它，但我认为阻止其他人浪费时间可能会很好。

如果您遇到此问题，请在物理 android 设备上仔细检查，因为对我而言问题不存在（跨不同的操作系统/浏览器版本）

# java - JPanel#setVisible not working.

> ID：15231796
> 
> 赞同：1
> 
> 时间：2013-03-05T18:53:21.663
> 
> 标签：java, swing, netbeans, jpanel

i have problems in the visibility of JPanel using Netbeans; i made a simple example to show you what happens. Netbeans creates the code when i design the combo and the panel -> until "private void TheFrame(java.awt.event.WindowEvent evt)".

In the windowActivated of the frame i put the panelOne(JPanel).setVisible(false) and this works ! After chosing an item(item2/item4) from the combo i would like the panelOne to be shown but this does not work.

```
/**
 *
 * @author Alessandro
 */
public class UIFrame extends javax.swing.JFrame {

    /**
     * Creates new form UIFrame
     */
    public UIFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        panelOne = new javax.swing.JPanel();
        comboBox = new javax.swing.JComboBox();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowActivated(java.awt.event.WindowEvent evt) {
                TheFrame(evt);
            }
        });

        javax.swing.GroupLayout panelOneLayout = new javax.swing.GroupLayout(panelOne);
        panelOne.setLayout(panelOneLayout);
        panelOneLayout.setHorizontalGroup(
            panelOneLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 349, Short.MAX_VALUE)
        );
        panelOneLayout.setVerticalGroup(
            panelOneLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 52, Short.MAX_VALUE)
        );

        comboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        comboBox.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                ItemListener(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(30, 30, 30)
                        .addComponent(panelOne, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(122, 122, 122)
                        .addComponent(comboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 143, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(21, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(comboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 29, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(33, 33, 33)
                .addComponent(panelOne, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(175, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    private void TheFrame(java.awt.event.WindowEvent evt) {                          
        panelOne.setVisible(false);
    }                         

    private void ItemListener(java.awt.event.ItemEvent evt) {                              
        String test = (String)(evt.getItem());   
        switch (test)
        {
            case "Item1":
                panelOne.setVisible(false);
            case "Item2":
                panelOne.setVisible(true);
            case "Item3":
                panelOne.setVisible(false);
            case "Item4":
                panelOne.setVisible(true);
        }               
    }                             

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(UIFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(UIFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(UIFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(UIFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new UIFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JComboBox comboBox;
    private javax.swing.JPanel panelOne;
    // End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:07:29.693

你`switch-case`的不正确。您的案例字符串错误，并且您缺少 break 语句。

您添加的项目是

```
"Item 1", "Item 2", "Item 3" and "Item 4" 
```

而在 switch 案例中，您正在比较

```
"item1", "item2", "item3" and "item4" 
```

其次，我认为部分问题是您获取所选字符串的方式。尝试改用此方法：

```
private void ItemListener(java.awt.event.ItemEvent evt) {
    String test = (String) (evt.getItem()); //do not use this
    System.out.println(test);

    JComboBox box = (JComboBox)evt.getSource();
    String selectedString = (String) box.getSelectedItem();

    switch (selectedString) { //replaced test with selectedString
    case "Item 1":
        panelOne.setVisible(false); break;
    case "Item 2":
        panelOne.setVisible(true); break;
    case "Item 3":
        panelOne.setVisible(false); break;
    case "Item 4":
        panelOne.setVisible(true); break;
    }
} 
```

我希望这有帮助。问题的原因可能是当您更改组合框中的项目时，项目选择更改事件被触发两次。首先，对于取消选择的项目，然后对于选定的项目。

如您所见，我添加了`println()`for`test`和 new`selectedString`变量。现在，如果您当前的选择是“项目 1”并且您选择了“项目 3”，那么`ItemEvent`将触发两个，`test`在这两种情况下的值将不同，因为它指的是不同的项目，而选定的项目将是相同的，正如你可能想要的那样。

> PS：这就是为什么你需要 break 语句。当你写：

```
switch(var){
case 1: doOne();
case 2: doTwo();
case 3: doThree();
} 
```

成功时发生`case 1`的情况是，它下面的所有情况都不会被检查，将按顺序执行。因此，所有`doOne()`,`doTwo()`和`doThree()`都将被执行。

```
switch(var){
case 1: doOne(); break;
case 2: doTwo(); break;
case 3: doThree(); break;
} 
```

这样做是每当案例成功并执行其相应的代码时，`break`将终止`switch-case`从而仅执行您要执行的代码。

为避免这种情况，您需要使用 break 语句：

另外，这是我拥有的代码

```
import java.awt.BorderLayout;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class UIFrame extends JFrame {
    final private JPanel panelOne = new JPanel();
    private JComboBox comboBox;

    public UIFrame() {
        initComponents();
    }

    private void initComponents() {
        setLayout(new BorderLayout());
        comboBox = new javax.swing.JComboBox();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        comboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] {
                "Item 1", "Item 2", "Item 3", "Item 4" }));
        comboBox.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                ItemListener(evt);
            }
        });
        panelOne.add(new JTextField("Hello"));
        add(comboBox, BorderLayout.CENTER);
        add(panelOne, BorderLayout.NORTH);

    }

    private void ItemListener(java.awt.event.ItemEvent evt) {
        panelOne.setVisible(false);
        String test = (String) (evt.getItem());
        System.out.println(test);

        JComboBox box = (JComboBox)evt.getSource();
        String selectedString = (String) box.getSelectedItem();

        switch (selectedString) {
        case "Item 1":
            panelOne.setVisible(false);
            break;
        case "Item 2":
            panelOne.setVisible(true);
            break;
        case "Item 3":
            panelOne.setVisible(false);
            break;
        case "Item 4":
            panelOne.setVisible(true);
            break;
        }

    }

    public static void main(String[] args) {
        final UIFrame frame = new UIFrame();
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T06:07:36.233

如果您使用`if ...else`而不是`switch Statement`那么它更容易编码并且如果您是java语言的新手也可以理解。

**只需在jComboBox**事件中尝试此代码

```
private void jComboBox1ItemStateChanged(java.awt.event.ItemEvent evt) {
       PanelChange();
    } 

 private void PanelChange() {
         String test = jComboBox1.getSelectedItem().toString();
        if (test.equals("Item 1") || test.equals("Item 3")) {
            jPanel1.setVisible(false);
        }else{
            jPanel1.setVisible(true);
        }
    } 
```

**创建PanelChange（）**的原因是，在选择“项目1”时， **“**项目1”是 第一次，而根据您的语句，则不可见**jpanel ，因为您必须在构造函数中复制此方法，例如：**

```
public UIFrame() {
        initComponents();
        PanelChange();
    } 
```

# ruby-on-rails - 如何在 RVM gemset 中安装 Rails 4.0？

> ID：15231798
> 
> 赞同：28
> 
> 时间：2013-03-05T18:53:27.340
> 
> 标签：ruby-on-rails, rvm

我正在尝试将 Rails 安装到新的 rvm gemset 中。我尝试了以下方法：

```
rvm gemset create rails-4.0
output: gemset created rails-4.0 
```

接下来我做了：

```
rvm 2.0.0@rails-4.0 
```

rvm gemset 列表：

```
gemsets for ruby-2.0.0-p0 (found in /Users/me/.rvm/gems/ruby-2.0.0-p0)
   (default)
   global
=> rails-4.0 
```

导轨-v

> Rails 目前没有安装在这个系统上。要获取最新版本，只需键入：
> 
> ```
> $ sudo gem install rails 
> ```

我列出的 rvm 命令**不**安装 rails 4.0 吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-05T19:00:44.107

这个命令：

```
rvm gemset create rails-4.0 
```

基本上是创建一个目录结构来保存宝石。除了“rails-4.0”之外，您也可以轻松地将其称为“foo”，这将是相同的行为。

这个命令：

```
rvm 2.0.0@rails-4.0 
```

切换到 Ruby 2.0.0 并告诉它使用名为 rails-4.0 的新 gemset。同样，这可能是“foo”或任何你叫它的东西。

现在，要获得 Rails 4.0.x，您需要：

```
gem install rails --version=4.0 
```

正如 Barrett 之前指出的，要获得 pre/beta/rc 版本，您可以指定整个版本字符串，例如`gem install rails --version=4.0.0.rc2`.

不要sudo，因为你不应该用rvm sudo，即使它告诉你。使用“system ruby​​”（rvm 未安装 ruby​​），它可能以 root 身份安装，因此您需要超级用户 (su) 访问权限（超级用户执行或“sudo”）来执行此操作。但是，rvm 让您以当前用户身份安装东西，因此您不需要 sudo。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-10T21:19:56.333

除了上面的使用技巧，如果你不指定gem版本你不会得到beta或pre版本，所以要得到rails 4，你需要：

```
gem install rails --version=4.0.0.rc1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-05T17:15:42.547

也许试试 InstallRails？

[http://installrails.com/](http://installrails.com/)是针对各种操作系统和设置处理这些问题的导轨安装指南。它可能对这样的事情有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T07:37:52.503

其他答案显示了使用默认 ruby​​ 版本创建 gemset 的说明。

要创建 gemset 并将其与不同的 ruby​​ 版本一起使用，请按照以下说明操作：

假设在我的机器上我安装了以下 ruby​​ 版本，并且 2.2.0 是默认的。

```
 =*ruby-2.2.0 [ x86_64 ]
   ruby-2.2.1 [ x86_64 ]
   ruby-2.2.3 [ x86_64 ] 
```

现在我已经从 Github 分叉了一个存储库，并希望使用 Rails 5（边缘版本）和 Ruby 2.2.3（撰写本文时的最新稳定版本）测试存储库的代码。我更喜欢使用 gemsets，所以我运行了以下命令：

```
 rvm use 2.2.3@forked-repo --create 
```

这实际上是一个捷径

```
 rvm 2.2.3
  rvm gemset create forked-repo 
```

接下来我将运行以下命令来安装捆绑器：

```
 forked_repo_root$ gem install bundler     
  forked_repo_root$ bundle 
```

这应该在上面创建的 gemset 中安装你的 forked-repo 中使用的 gem。

参考：[https ://rvm.io/gemsets/creating](https://rvm.io/gemsets/creating)

# api - Having difficulty sending small lwip packets immediately using the lwip API

> ID：15231800
> 
> 赞同：3
> 
> 时间：2013-03-05T18:53:34.823
> 
> 标签：api, tcp, send, lwip

I am creating a server on a ST Cortex M3 device. I am using the lwip API and FreeRTOS. All is working, but the response time is way off. I am currently using lwip 1.3.2 and FreeRTOS 7.3.

A single client connects to the server and must have some time-critical data sent frequently. These packets are on the order of 6 or so bytes. Other times, I am sending upwards of 20K.

The problem I am having is that these smaller packets seem to be taking forever to be sent. I assume this is because lwip is waiting for more data to be enqueued to make more efficient transmissions. I cannot wait around for 2 or 3 seconds for the data to be sent; the client is expecting the data nominally in a few micro-seconds or milli-seconds.

I have tried using lwip_send and lwip_write. (I understand that one is the same as the other with a flag passed at the end. Just had to try...) I have tried setting TCP_NODELAY on the socket to no avail. I tried to set SO_SNDLOWAT to '1', but this always returned -1, so I do not think it is supported.

I do not want to redo all of my code using TCP RAW. Is there a way to invoke the tcp_output() function outside of TCP RAW mode? Is there any way to speed things up or is this just how slow lwip TCP with small packets is?

Any and all suggestions are welcome. Thanks.

--EDIT-- I would also like to add that once I am ready to transmit, I make sure that my TX task in FreeRTOS is at the highest priority. There are no other tasks running up to the point at which I call lwip_send/write.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-24T03:22:06.023

我对 xilinx 上的裸机 lwIP 相当有经验，而且 lwip 不会等待将内容发送出去。它将在基于以太网硬件确认您的中断时尽快将数据包抽出。我一直只使用UDP。不过，我想到的是，您的问题可能出在接收端。如果您正在使用 TCP，那么这些小数据包可能会迟到，因为您遇到了接收问题。您需要做的是在代码中找到以太网传输的最低级别点，在其上放置一个通用输出切换。然后在收到以太网数据包时打开通用输出开关。查看示波器上的信号。如果它证实了您的假设，则移动输出切换以缩小问题范围。清洗、冲洗并重复，直到找到问题所在。它' 粗略且耗时，但由于纯粹的决心，这种蛮力方法通常可以解决许多“不可能”的嵌入式软件问题。祝你好运！

# objective-c - 将对象添加到 NSMutableArray 时遇到问题

> ID：15231801
> 
> 赞同：0
> 
> 时间：2013-03-05T18:53:35.197
> 
> 标签：objective-c, nsmutablearray

我很难将对象添加到我的 2 个 NSMutableArrays。数据来自数据库，我知道我的解析是正确的，因为我在使用 NSLog 时得到了有效的输出。但是我不知道如何将 2 个不同的对象添加到我的 2 个不同的 NSMutableArrays 中。这是我的代码

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection {

     allDataDictionary = [NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];
     feed = [allDataDictionary objectForKey:@"feed"];
     arrayOfEntry = [feed objectForKey:@"entry"];

     for (NSDictionary *dictionary in arrayOfEntry) {

         NSDictionary *title = [dictionary objectForKey:@"title"];
         NSString     *labelTitle = [title objectForKey:@"label"];

         [arrayLabel addObject:labelTitle];

         NSDictionary *summary = [dictionary objectForKey:@"summary"];
         NSString     *labelSummary = [summary objectForKey:@"label"]; 

         [arraySummary addObject:labelSummary]; //This line makes the application crash

     }

} 
```

出于某种原因，当我想将 labelSummary 添加到 arraySummary 时，我收到此错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil' 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:03:30.263

你的解析确实是正确的。但是，当解析器遇到一个空字段时，它会返回 nil。问题是 NSArrays 不能接受 nil，因为 nil 不是对象，它相当于 0。因此，您最多添加一个对象。这就是 NSNull 的作用。

必须测试以查看解析器是否返回 nil，如果是则添加 [NSNull null]。

```
NSString* labelSummary = [summary objectForKey:@"label"]; 

[arraySummary addObject:(labelSummary!=nil)?labelSummary:[NSNull null]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:07:45.753

错误消息告诉您，您尝试添加到数组中的对象之一是 nil。

你必须更换

```
[arrayLabel addObject:labelTitle]; 
```

和

```
if (labelTitle != nil) {
   [arrayLabel addObject:labelTitle];
} 
```

和

[arraySummary addObject:labelSummary];

和

```
if (labelSummary != nil) {
   [arraySummary addObject:labelSummary];
} 
```

如果你真的需要包含一个 nil 对象，那么使用 NSNull。

# vb.net - 如何将事件处理程序传递给在 VB 中向该处理程序添加控件的函数？

> ID：15231804
> 
> 赞同：3
> 
> 时间：2013-03-05T18:53:47.117
> 
> 标签：vb.net, visual-studio-2010

我创建了一个类来处理一组控件的显示。这些控件是在运行时创建的。因此，我还必须在运行时将它们添加到事件处理程序中。我制作了一个函数，允许我指定用于某些控件的事件处理程序。代码如下所示：

这是主要形式

```
Dim displayObj as PackageDisplay = new PackageDisplay(AddressOf CheckBox_CheckedChanged) 
```

构造函数这样做

```
Public Sub New(ByRef eventHandler as Action(Of System.Object, EventArgs)
    AddHandler chkExample.CheckedChanged, eventHandler
End Sub 
```

但是，我收到以下错误：

> 'System.Action(Of Object, System.EventArgs)' 类型的值无法转换为 'System.EventHandler'

肯定可以传递事件处理程序并分配它，但我只是不知道如何。我已经尝试了几种不同的变体，但我不知道如何使它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:40:45.590

你不需要**做**一个，使用股票`System.EventHandler`。

# android - Android application, listening to streaming radio. No internet or mobile data bug

> ID：15231806
> 
> 赞同：0
> 
> 时间：2013-03-05T18:53:49.283
> 
> 标签：android, streaming, media-player, radio

[http://pastebin.com/G4UrTT7Z](http://pastebin.com/G4UrTT7Z)

What can I do to check for a working internet connection? Or how do I check if connection is lost?

Can someone help me with this ?

I suppose this is a IOException. I am not sure. When watching logcat and console I don't see any exceptions or forcecloses.

My source code is posted on pastebin.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:59:19.283

一种方法是通过 URL 连接读取众所周知的站点内容。如果您可以阅读它，那么这意味着您有 Internet 连接。其他是连接到您的广播电台站点：这有双重要求：您有互联网连接并且广播电台站点已启动。

如果您阅读太多，也许它们都会阻止您！

有 android buggy API 可以读取网络状态并吸吮，但是如果您连接到 WIFI，那么即使您的 WAN 电缆拔出，您也会从 API 获得 Connected 状态...

# groovy - 在 Groovy 中将方法作为参数传递

> ID：15231810
> 
> 赞同：43
> 
> 时间：2013-03-05T18:54:08.007
> 
> 标签：groovy, functional-programming, closures

有没有办法在 Groovy 中将方法作为参数传递而不将其包装在闭包中？它似乎适用于函数，但不适用于方法。例如，给定以下内容：

```
def foo(Closure c) {
    c(arg1: "baz", arg2:"qux")
}

def bar(Map args) {
    println('arg1: ' + args['arg1'])
    println('arg2: ' + args['arg2'])
} 
```

这有效：

```
foo(bar) 
```

但是如果`bar`是类中的方法：

```
class Quux { 
    def foo(Closure c) {
        c(arg1: "baz", arg2:"qux")
    }

    def bar(Map args) {
        println('arg1: ' + args['arg1'])
        println('arg2: ' + args['arg2'])
    }

    def quuux() { 
      foo(bar)
    }
} 

new Quux().quuux() 
```

它失败了**No such property: bar for class: Quux**。

如果我将方法更改为封装`bar`在一个闭包中，它可以工作，但似乎不必要地冗长：

```
 def quuux() { 
      foo({ args -> bar(args) })
    } 
```

有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-05T19:23:25.137

`.&`接线员来救援！

```
class Quux { 
    def foo(Closure c) {
        c(arg1: "baz", arg2:"qux")
    }

    def bar(Map args) {
        println('arg1: ' + args['arg1'])
        println('arg2: ' + args['arg2'])
    }

    def quuux() { 
      foo(this.&bar)
    }
} 

new Quux().quuux()
// arg1: baz
// arg2: qux 
```

通常，`obj.&method`将返回一个绑定方法，即调用`method`on的闭包`obj`。

# c++ - 从基类引用派生类参数

> ID：15231811
> 
> 赞同：0
> 
> 时间：2013-03-05T18:54:11.603
> 
> 标签：c++, templates, polymorphism, abstract, managed-c++

托管 c++ 和堆栈溢出都是新手，所以我希望我做对了。

我很难找到一种方法来编写带有基类参数的函数，该参数需要派生类的类变量。

我的基类叫做 ImageBase，有两个类变量：int rows、cols；

```
public ref class ImageBase
{
    public:
        int num_rows;
        int num_cols; 
} 
```

从中派生出一个名为 ImageT 的抽象模板化类，它只包含一个模板化二维数组 pix：

```
template<class T> public ref class ImageT abstract : public ImageBase
{
public:
    property T** pix
    {
        public: T** get() { return rows; }
        protected: void set(T** val) { rows = val; }
    }
} 
```

派生自 ImageT 的是 RealImage、ShortImage 和 ComplexImage，它们只需将模板类型“T”分别更改为 float、short 或 complex。如果这更容易理解，这是一个类结构的小 MS Paint 图：

[类层次结构](http://i.imgur.com/Lf0gUop.png)

我的问题是：如果我要编写一个非常通用的函数，例如：

```
void printPixels(ImageBase^ img) 
```

这样我就可以将 RealImage、ComplexImage 等传递给它，我将如何从 ImageBase 类型访问变量“pix”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:52:44.413

你不能。至少不是没有技巧。

为了解决这个问题，我建议将`printPixels()`函数模板化：

```
template<class T> void printPixels(ImageT<T>^ img) 
```

如果你真的需要它，你可以添加一个`printPixels(ImageBase^ img)`检查 img 的类型、转换它并调用`printPixels(ImageT<T>^ img)`实际工作的权限。

# jquery - 随机背景图片 CSS3

> ID：15231812
> 
> 赞同：9
> 
> 时间：2013-03-05T18:54:12.830
> 
> 标签：jquery, html, css, background

我正在做一个小型网站，但是我的背景有 5-6 张图片，我希望每次刷新页面时都让它随机化。这就是我在 style.css 中得到的：

```
html {   
    background:  url(image/l2.jpg) no-repeat center center fixed
    -webkit-background-size: cover
    -moz-background-size: cover
    -o-background-size: cover
    background-size: cover   
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T18:56:33.513

为此，您不能仅使用 html 和 css。您应该在客户端（如使用 javascript）或服务器端（如 php 脚本）执行此操作

这是php示例：

```
<?php
  $bg = array('bg-01.jpg', 'bg-02.jpg', 'bg-03.jpg', 'bg-04.jpg', 'bg-05.jpg', 'bg-06.jpg', 'bg-07.jpg' ); // array of filenames

  $i = rand(0, count($bg)-1); // generate random number size of the array
  $selectedBg = "$bg[$i]"; // set variable equal to which random filename was chosen
?>

<style type="text/css">
<!--
body{
background: url(images/<?php echo $selectedBg; ?>) no-repeat;
}
-->
</style> 
```

这是jquery示例：

```
var images = ['image1.jpg', 'image2.jpg', 'image3.jpg', 'image4.jpg', 'image5.jpg'];
$('html').css({'background-image': 'url(images/' + images[Math.floor(Math.random() * images.length)] + ')'}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-05T18:59:51.130

我会用JS。看看这个例子：

```
<html>
<head>
<script type="text/javascript"> 
var totalCount = 8;
function ChangeIt() 
{
var num = Math.ceil( Math.random() * totalCount );
document.body.background = 'bgimages/'+num+'.jpg';
document.body.style.backgroundRepeat = "repeat";// Background repeat
}
</script>
</head>
<body> 
// Page Design 
</body> 
<script type="text/javascript"> 
ChangeIt();
</script> 
</html> 
```

您需要通过随机计数为图像命名正确的数字并将它们放在该图像文件夹中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-05T18:59:52.877

对于 jQuery：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {

    var bgArray = ['bg1.jpg', 'bg2.jpg', 'bg3.jpg'];
    var bg = bgArray[Math.floor(Math.random() * bgArray.length)];

    $('body').css('background', bg);

    // If you have defined a path for the images
    var path = 'images/bg/';

    // then you can put it right before the variable 'bg'
    $('body').css('background', path+bg);

}); 
</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-04T00:46:34.647

非常简短的选项：（如果您可以在页面中使用 php）。将您的背景网址替换为单引号中的文件名。

```
background: url('<?php $a = array('darkred.jpg','red.gif','pink.png'); echo $a[array_rand($a)];?>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-06T06:09:21.823

好吧，最后一个答案很短，但是如果将它们放在一个文件夹中呢？

```
<?php
$pt = 'BGs/';  //folder where you put your BGs       
$bg = array($pt.'bg_ants.png', $pt.'bg_boobs.png', $pt.'bg_circles.png' ); // array of filenames
?>
<Body background="<?php echo $bg[array_rand($bg)]; ?>"> 
```

您可以将其保存在一个文件中并包含它以在其他页面上使用该代码。例如：您将其另存为“rand.htm”。只需`<body>`用此代码替换标签即可。

```
<?php include("rand.htm"); ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T18:57:23.020

使用纯 CSS 是不可能的。您必须使用 javascript 来随机设置您网站的背景图片。

# linux - 如何强制 vmware 桥接以太网而不是 wlan

> ID：15231826
> 
> 赞同：1
> 
> 时间：2013-03-05T18:55:06.090
> 
> 标签：linux, vmware, wireless, ethernet, bridge

我有一个 Linux Mint 主机系统和一个`VMware`带有 Linux Debian 的来宾系统。在我的主机系统上有两个物理网络接口`eth0`和`wlan0`. 我的访客系统设置为在桥接模式下使用其网络连接。每当我的 WLAN 打开时，它会自动选择此接口进行桥接。当我关闭我的 WLAN 时，它会桥接以太网端口。

是否可以为主机系统设置默认接口来桥接？我在 VMware GUI 上也没有在谷歌上找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:00:08.390

此[页面](http://www.vmware.com/support/ws4/doc/network_configure_ws.html)应在“在 Windows 主机上配置桥接网络选项”部分说明如何执行此操作。别担心，我也很难找到它。

基本上，这些设置在编辑 > 虚拟网络编辑器中可用。

# java - 带有比较加三元运算符表达式的表达式“a==1 ? 1 : 0”是原子的吗？

> ID：15231829
> 
> 赞同：2
> 
> 时间：2013-03-05T18:55:26.013
> 
> 标签：java, c++, pthreads, atomic

快速提问？这条线在 C++ 和 Java 中是原子的吗？

```
class foo {
  bool test() {
    // Is this line atomic?
    return a==1 ? 1 : 0;
  }

  int a;
} 
```

如果有多个线程访问该行，我们最终可以先检查 a==1，然后更新 a，然后返回，对吗？

补充：我没有完成课程，当然还有其他部分更新了...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T18:59:00.993

不，对于 C++ 和 Java。

在 Java 中，您需要以相同的方式创建您的方法`synchronized`并保护其他用途`a`。确保在所有情况下都在同一个对象上进行同步。

在 C++ 中，您需要使用[`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex)to protect `a`，可能[`std::lock_guard`](http://en.cppreference.com/w/cpp/thread/lock_guard)用于确保在函数结束时正确解锁互斥锁。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T18:58:24.410

```
return a==1 ? 1 : 0; 
```

是一种简单的写作方式

```
if(a == 1)
    return 1;
else
    return 0; 
```

我没有看到任何用于更新 a 的代码。但我想你可以弄清楚。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T19:04:05.183

不管有没有写，在C++中读取一个非原子类型的值**都不**是原子操作。如果没有写入，那么您可能不在乎它是否是原子的；如果其他一些线程可能正在修改该值，那么您当然会关心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T19:01:10.540

正确的说法很简单：不！（适用于 Java 和 C++）

一个不太正确但更实际的答案是：从技术上讲，这不是原子的，但在大多数主流架构上，至少对于 C++ 来说是这样。

您发布的代码中没有任何内容被修改，该变量仅经过测试。因此，代码通常会导致访问该内存位置的单个`TEST`（或类似）指令，顺便说一下，是原子的。该指令将读取一个高速缓存行，并且在相应的位置中将有一个明确定义的值，无论它可能是什么。

但是，这是偶然/偶然的，不是您可以依赖的。

当单个其他线程写入该值时，它通常甚至会起作用 - 再次，偶然地/偶然地。为此，CPU 获取一个高速缓存行，覆盖高速缓存行内相应地址的位置，并将整个高速缓存行写回 RAM。当您测试变量时，您会获取一个包含旧值或新值（两者之间没有任何内容）的缓存行。没有任何形式的保证，但您仍然可以认为这是“原子的”。

*当多个线程同时修改*该变量时（不是问题的一部分），情况要复杂得多。为了使其正常工作，您需要使用 C++11 中的某些东西`<atomic>`，或者使用原子内在函数或类似的东西。否则，非常不清楚会发生什么，以及操作的结果可能是什么——一个线程可能会读取该值，将其递增并将其写回，但另一个线程可能会在修改后的值被写回之前读取原始值。
在所有当前平台上，这或多或少肯定会以糟糕的方式结束。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T19:28:18.507

不，它不是原子的（通常），尽管它可以在某些体系结构中（例如，在 C++ 中，在 intel 中，如果整数是对齐的，除非你强迫它不对齐）。

考虑这三个线程：

```
// thread one:                // thread two:             //thread three
while (true)                  while (true)               while (a) ;
   a = 0xFFFF0000;               a = 0x0000FFFF; 
```

如果写入`a`不是原子的（例如，intel if`a`是未对齐的，并且为了讨论，两个连续高速缓存行中的每一行都有 16 位）。现在，虽然第三个线程似乎永远无法退出循环（两个可能的值`a`都是非零），但事实是分配不是原子的，线程二可以将高 16 位更新为 0，并且线程三可以在线程二获得时间完成更新之前将低 16 位读取为 0，然后退出循环。

整个条件与问题无关，因为返回值是线程本地的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T19:11:38.473

您的问题可以改写为：是声明：

```
 a == 1 
```

原子与否？不，它不是原子的，您应该使用 std::atomic 作为 a 或在某种锁定下检查该条件。在这种情况下，如果整个三元运算符原子与否无关紧要，因为它不会改变任何东西。如果你的意思是在你的问题中如果在这段代码中：

```
bool flag = somefoo.test(); 
```

标志与 a == 1 一致，它肯定不会，并且如果您的问题中的整个三元运算符是原子的，则无关紧要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T18:57:08.560

不，它仍然是一个测试，然后是一组，然后是一个返回。

是的，多线程将是一个问题。

这只是语法糖。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-09T03:42:35.257

考虑以下代码：

```
bool done = false;

void Thread1() {
  while (!done) {
    do_something_useful_in_a_loop_1();
  } 
  do_thread1_cleanup();
}

void Thread2() {
  do_something_useful_2();
  done = true;
  do_thread2_cleanup();
} 
```

这两个线程之间的同步是使用一个布尔变量 done 完成的。这是同步两个线程的错误方法。

在 x86 上，最大的问题是编译时优化。

编译器可以将 do_something_useful_2() 的部分代码移到“done = true”下方。编译器可以将 do_thread2_cleanup() 的部分代码移到“done = true”之上。如果 do_something_useful_in_a_loop_1() 没有修改“done”，编译器可能会通过以下方式重写 Thread1：

```
 if (!done) {
    while(true) {
      do_something_useful_in_a_loop_1();
    } 
  }
  do_thread1_cleanup(); 
```

所以 Thread1 永远不会退出。

在 x86 以外的架构上，缓存效果或乱序指令执行可能会导致其他微妙的问题。

大多数种族检测器都会检测到这样的种族。

此外，大多数动态竞争检测器将报告旨在与此 bool 同步的内存访问的数据竞争

（即在 do_something_useful_2() 和 do_thread1_cleanup() 之间）

要解决此类竞争，您需要使用编译器和/或内存屏障（如果您不是专家 - 只需使用锁）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-08T17:00:47.837

这里有很多好的答案，但没有一个提到在 Java 中需要标记`a`为`volatile`.

如果没有采用其他同步方法，这一点*尤其*`a`重要，但其他线程可以更新. 否则，您可能正在读取`a`.

# spring - 如何使用 Spring Data Repositories 处理大量数据？

> ID：15231830
> 
> 赞同：19
> 
> 时间：2013-03-05T18:55:28.413
> 
> 标签：spring, repository, spring-data

我有一个大表，我想通过 Spring Data Repository 访问它。

目前，我正在尝试扩展`PagingAndSortingRepository`接口，但似乎我只能定义返回列表的方法，例如：

```
public interface MyRepository extends 
        PagingAndSortingRepository<MyEntity, Integer>
{
  @Query(value="SELECT * ...")
  List<MyEntity> myQuery(Pageable p);
} 
```

另一方面，`findAll()`附带的方法`PagingAndSortingRepository`返回一个`Iterable`（我假设数据没有加载到内存中）。

是否可以定义自定义查询也返回 Iterable 和/或不一次将所有数据加载到内存中？

有没有其他方法可以处理大表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T09:55:03.717

我们在这里有经典的咨询答案：视情况而定。由于该方法的实现是特定于存储的，因此我们依赖于底层存储 API。在 JPA 的情况下，没有机会提供流式访问作为`….getResultList()`返回一个`List`. 因此，我们还`List`向客户端公开，因为特别是 JPA 开发人员可能习惯于使用列表。因此，对于 JPA，唯一的选择是使用分页 API。

对于像 Neo4j 这样的商店，我们支持流式访问，因为存储库返回`Iterable`CRUD 方法以及 finder 方法的执行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-05T23:44:20.343

的[实现](https://github.com/SpringSource/spring-data-jpa/blob/master/src/main/java/org/springframework/data/jpa/repository/support/SimpleJpaRepository.java#L247)只是将所有实体的`findAll()`整个列表加载到内存中。它的`Iterable`返回类型并不意味着它实现了某种数据库级别的游标处理。

另一方面，您的自定义`myQuery(Pageable)`方法将仅加载一个页面的实体，因为生成的实现尊重其`Pageable`参数。您可以将其返回类型声明为`Page`或`List`。在后一种情况下，您仍然会收到相同（受限）数量的实体，但不会收到 a`Page`额外携带的元数据。

因此，您基本上做了正确的事情来避免在自定义查询中将所有实体加载到内存中。

请在[此处查看相关文档](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.special-parameters)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-19T18:56:57.267

我认为您正在寻找的是*Spring Data JPA Stream*。它为数据获取带来了显着的性能提升，尤其是在具有数百万条记录的数据库中。在您的情况下，您有几个可以考虑的选项

1.  一次在内存中拉取所有数据
2.  每次使用分页和阅读页面
3.  使用 Apache Spark 之类的东西
4.  使用 Spring Data JPA 流式传输数据

为了使 Spring Data JPA Stream 工作，我们需要修改我们`MyRepository`的返回`Stream<MyEntity>`，如下所示：

```
public interface MyRepository extends PagingAndSortingRepository<MyEntity, Integer> {
    @QueryHints(value = {
        @QueryHint(name = HINT_CACHEABLE, value = "false"),
        @QueryHint(name = READ_ONLY, value = "true")
    })
    @Query(value="SELECT * ...")
    Stream<MyEntity> myQuery();
} 
```

在这个例子中，我们禁用了二级缓存并提示 Hibernate 实体将是只读的。如果您的要求不同，请确保根据您的要求相应地更改这些设置。

# python - 带有 Python 的工业视觉相机

> ID：15231832
> 
> 赞同：11
> 
> 时间：2013-03-05T18:55:38.627
> 
> 标签：python, opencv, computer-vision, vision, simplecv

是否有任何工业计算机视觉相机带有 Python 接口，或者有完善的第三方解决方案？

我一直在使用网络摄像头做一些工作，这些摄像头可以通过例如 OpenCV 轻松访问。但是，现在我需要一台更坚固、更灵活的相机。我需要能够设置某些参数，例如曝光和增益。我想尽可能避免使用 Python 以外的其他语言进行开发，因为 Python 是我最了解的。

我见过 uEye 相机的 pyueye 之类的插件，看起来不错，只是这在 Windows 中效果不佳。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T20:34:49.183

不知道为什么这被否决了。无论如何，我是 simplecv ( [http://simplecv.org](http://simplecv.org) ) 的核心开发人员之一，每天都在使用工业相机。我们集成了对 Allied Vision 相机和 XIMEA 相机的支持。

如果您安装了驱动程序，它实际上就像：

```
cam = AVTCamera()
cam = Camera('ximea') 
```

至于 XIMEA 相机，您需要安装软件附带的 XIMEA 相机驱动程序，然后使用 flag 构建 OpenCV

```
cmake -DWITH_XIMEA=ON .. 
```

至于 Allied Vision，您只需要安装驱动程序，一切就可以正常工作了。

我已经测试了 XIMEA 相机的 USB 和 CURRERA 型号，它们都可以工作。我也在 Allied Manta 上进行了测试，但理论上应该可以使用他们所有的模型。它还使用了相关的旧版驱动程序。当时他们最近有 VIMBA 这是他们的新驱动程序，我上周给他们发了电子邮件，询问何时发布 1.1，因为它将包括 linux 支持，但他们说几个月内不会。一旦他们这样做，我将确保 SimpleCV 是兼容的。

我也没有在 Windows 上测试过（仅限 Linux），但理论上只要安装了驱动程序就应该在 Windows 上工作。

# javascript - Caniuse 不准确。Firefox 什么时候开始支持 localStorage？

> ID：15231834
> 
> 赞同：0
> 
> 时间：2013-03-05T18:55:48.067
> 
> 标签：javascript, firefox

我知道它适用于FF 14。

但是，当我查看 caniuse.com 时，它显示 FF 18+

[http://caniuse.com/#search=localStorage](http://caniuse.com/#search=localStorage)

支持实际上是从什么时候开始的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:58:16.187

[从 3.5 版开始。](https://developer.mozilla.org/en-US/docs/DOM/Storage#Browser_compatibility)但可能还有更多。标准可能已更改，并且当前形式的 localStorage 的当前版本在 caniuse 说之前不受支持。我没有对此进行调查，但他们页面上的一条注释说存储 API 曾经在 HTML5 下，也许这可能导致类别发生变化。

# r - 为什么R中的回归会删除因子变量的索引1？

> ID：15231837
> 
> 赞同：3
> 
> 时间：2013-03-05T18:55:55.423
> 
> 标签：r, statistics, regression, linear-regression

我正在尝试使用`lm`and`glm`函数在 R 中进行回归。

我的因变量是基于给定时间段内事件与非事件的比例的 logit 转换数据。所以我的因变量是连续的，而我的自变量是因子变量或虚拟变量。

我有两个可以取值的自变量

> *   第 i 年到第 m 年，我的 YEAR 变量
> *   第 j 个月到第 n 个月，我的 MONTH 变量

问题是，每当我将模型作为摘要运行时，4 月的结果（月份索引 1）和 1998 年（年份的索引 1）不在结果中......如果我将 4 月份更改为“foo_bar”，8 月份将是失踪...

请帮忙！这让我很沮丧，我根本不知道如何寻找问题的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T19:04:32.863

如果 R 为因子中的每个级别创建一个虚拟变量，则生成的变量集将是线性相关的（假设还有一个截距项）。因此，选择一个因子水平作为基线，并且没有为其生成虚拟变量。

为了说明这一点，让我们考虑一个玩具示例：

```
> data <- data.frame(y=c(2, 3, 5, 7, 11, 25), f=as.factor(c('a', 'a', 'b', 'b', 'c', 'c')))
> summary(lm(y ~ f, data))

Call:
lm(formula = y ~ f, data = data)

Residuals:
   1    2    3    4    5    6 
-0.5  0.5 -1.0  1.0 -7.0  7.0 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)  
(Intercept)    2.500      4.093   0.611   0.5845  
fb             3.500      5.788   0.605   0.5880  
fc            15.500      5.788   2.678   0.0752 .
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 5.788 on 3 degrees of freedom
Multiple R-squared: 0.7245, Adjusted R-squared: 0.5409 
F-statistic: 3.945 on 2 and 3 DF,  p-value: 0.1446 
```

如您所见，共有三个系数（与因子中的水平数相同）。这里，`a`已经被选为基线，所以`(Intercept)`指的是数据的子`f`集`a`。`b`和`c`(`fb`和`fc`)的系数是基线截距与其他两个因子水平的截距之间的*差异。*因此，截距为`b`( `6`) `2.500+3.500`，截距为`c`( `19`) `2.500+15.500`。

如果您不喜欢自动选择，您可以选择另一个水平作为基线：[如何强制 R 在回归中使用指定的因子水平作为参考？](https://stackoverflow.com/questions/3872070/how-to-force-r-to-use-a-specified-factor-level-as-reference-in-a-regression)

# c# - 使用正则表达式在一个子字符串中查找多个项目

> ID：15231838
> 
> 赞同：2
> 
> 时间：2013-03-05T18:55:57.123
> 
> 标签：c#, regex, text, substring

为我的问题想出一个合适的标题是很困难的。首先是一些背景信息，以备不时之需。

*我有一个账单，我试图从使用正则表达式中读取信息。我将需要的信息保存到 4 个不同的表中：帐户、公用事业、位置和税。

逻辑是每张账单只有一个帐号（帐户级别）。每个帐号可以属于多个实用程序（实用程序级别）。每个实用程序可以有多个位置（假设此问题只有 1 个位置）。每个位置可以有多个税。*

[因此，对于此处](https://docs.google.com/file/d/0BznvzqisVVj3dlNkdGF2UnpUajg/edit?usp=sharing) 找到的账单*，我们可以看到 4 种税（城市销售税 2.97、县销售税 1.46、州销售税 3.44 和 PPRTA 税 1.10）都属于“电力”公用事业。我们还看到 4 个公用事业（电力、燃气、水和废水）属于 1 个帐号，每个帐号都有自己的税费。*

以前我一直在做这样简单的事情来多次捕获一个捕获组中的所有税收：***税收：。* \$(. *)***

我现在想要完成的是构建一个正则表达式，它仅查找给定实用程序的所有税款。同样，它必须在一个具有多个匹配项的捕获组中。

这是迄今为止我对电税的一个示例：***(?:Electric Commercial Service(?:.* \n) *?.* ?Tax:.* \$(. *)(?:.* \n) *?.* ?此项服务的总费用）***

如您所见，这仅收取第一笔税款。我想不出一种方法来让它在“电力商业服务”和与电力服务有关的“这项服务的总收费”这两个词之间征收所有税款。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:06:42.467

在大多数语言中，你不能用一个正则表达式来做到这一点。一个捕获组只会产生匹配数组中的一个元素，即使该组是通配符。

您需要分两步完成。首先使用正则表达式（或其他方式）提取单个实用程序的账单部分。然后在该字符串中，您可以使用正则表达式

```
Tax:.* \$([\d.]+)$ 
```

找到所有的税。在 PHP 中，您将使用它`preg_match_all`来查找所有匹配项；其他语言应该有类似的东西（可能涉及`g`到正则表达式的修饰符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:33:47.393

它可以作为单线完成，这样做很有趣，但它变得丑陋：

```
Gas Commercial Service \([\S\s]+?(?:[\s]+(?:(?:(?:[\w]+ )*)?(?:[\w]+)?Tax:[xX\d\.\%\s]*?\$[\d\.\s]*?\$([\d\.]*)\s*?))(?:[\s]+(?:(?:(?:[\w]+ )*)?(?:[\w]+)?Tax:[xX\d\.\%\s]*?\$[\d\.\s]*?\$([\d\.]*)\s*?))?(?:[\s]+(?:(?:(?:[\w]+ )*)?(?:[\w]+)?Tax:[xX\d\.\%\s]*?\$[\d\.\s]*?\$([\d\.]*)\s*?))?(?:[\s]+(?:(?:(?:[\w]+ )*)?(?:[\w]+)?Tax:[xX\d\.\%\s]*?\$[\d\.\s]*?\$([\d\.]*)\s*?))?(?:[\s]+(?:(?:(?:[\w]+ )*)?(?:[\w]+)?Tax:[xX\d\.\%\s]*?\$[\d\.\s]*?\$([\d\.]*)\s*?))?(?:[\s]+(?:(?:(?:[\w]+ )*)?(?:[\w]+)?Tax:[xX\d\.\%\s]*?\$[\d\.\s]*?\$([\d\.]*)\s*?))? 
```

在这里解释演示：[http ://regex101.com/r/fI7hU9](http://regex101.com/r/fI7hU9)

`Electric`只需更改第一个单词

更新为接受`SurTax`和喜欢。

# ruby-on-rails-3 - 如何以两种不同的布局显示一个模型？

> ID：15231839
> 
> 赞同：0
> 
> 时间：2013-03-05T18:56:03.553
> 
> 标签：ruby-on-rails-3

我有两种布局：`admin_layout.html.erb`和`application.html.erb`. 管理员在其中工作`admin_layout`并创建用户。`show`每个用户都有一个页面`admin_layout`。但是现在我想让公众在布局`show`下查看每个用户页面的公共版本。`application`是否可以根据布局显示两个不同`show`的操作，或者我是否需要构建类似的东西`public_users_controller`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:22:50.007

您可以指定要在操作中使用的布局，还可以告诉它呈现与当前操作名称不同的模板。在此示例中，将使用布局向公共用户显示`app/views/users/public_show.html.erb`文件。`app/views/layouts/application.html.erb`

```
def show
  if current_user.admin? # Or however you want to determine which layout to use
    render :layout => "admin_layout"
  else
    render "public_show", :layout => "application"
  end
end 
```

# javascript - 用 JavaScript / DoJo 去掉前导零？

> ID：15231840
> 
> 赞同：0
> 
> 时间：2013-03-05T18:56:05.710
> 
> 标签：javascript, string, dojo

后端返回我每月的几天，用前导 0 填充的单个数字天，去除该前导零的最有效和浏览器友好的方法是什么？这不是硬代码，我只是不确定“正确”和最“有效”的方式是什么。这就是我现在的做法......一种简单的方式：

```
 if (newValue[0] === "0")
                    newValue = newValue[1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:57:18.373

要从第二个字符中获取字符串，请使用

```
if (newValue[0] === "0") newValue = newValue.slice(1); 
```

您还可以使用 regexp 删除所有前导 0 ：

```
newValue = newValue.replace(/^0+/, '') 
```

请注意，您实际上需要的可能是转换，即从字符串中获取数字。这可以通过

```
newValue = +newValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:01:27.133

`parseInt`忽略它们，所以你可以做`""+parseInt(newValue, 10)`.

# javascript - 仅在 JS 函数结束后显示更改？

> ID：15231843
> 
> 赞同：0
> 
> 时间：2013-03-05T18:56:26.970
> 
> 标签：javascript, jquery, ajax

我有一些在 AJAX 调用成功后运行的 JavaScript：

```
 $.ajax({
       type: "POST",
       url: "CalendarServices.aspx/UpdateFilter",
       data: 'id=' + this.value + '&checked=' + $(this).is(':checked'),
       success: function (data) {
           $('#calendar').fullCalendar('refetchResources');
           $('#calendar').fullCalendar('refetchEvents');
       }
       ,
       error: function () {
       }
   }); 
```

我不希望用户直观地看到 `$('#calendar').fullCalendar('refetchResources');`直到 `$('#calendar').fullCalendar('refetchEvents');`被调用的变化......这可能吗？

这是因为我在回调中注入了一些 html，因为 `$('#calendar').fullCalendar('refetchEvents');`当获取资源时它会被破坏，所以会有一点闪烁。

有没有办法做到这一点？

# java - Android SSL 握手异常

> ID：15231845
> 
> 赞同：0
> 
> 时间：2013-03-05T18:56:37.857
> 
> 标签：java, android, ssl, certificate, jsoup

我一直在开发一个应用程序，它可以解析三个网站页面的信息，然后将解析后的信息显示给用户。自从这工作以来，我在过去的几周里从来没有遇到过任何例外。然后今天当我再次测试解析功能时，我没有得到任何结果，并且 logcat 给出了 SSLHandshakeException 以及一堆系统错误。以下错误来自 logcat：

```
03-05 17:59:39.834: W/System.err(5525): javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
03-05 17:59:39.834: W/System.err(5525):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:374)
03-05 17:59:39.834: W/System.err(5525):     at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:209)
03-05 17:59:39.834: W/System.err(5525):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:478)
03-05 17:59:39.834: W/System.err(5525):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433)
03-05 17:59:39.834: W/System.err(5525):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
03-05 17:59:39.834: W/System.err(5525):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
03-05 17:59:39.834: W/System.err(5525):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
03-05 17:59:39.834: W/System.err(5525):     at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:165)
03-05 17:59:39.834: W/System.err(5525):     at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:425)
03-05 17:59:39.834: W/System.err(5525):     at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:446)
03-05 17:59:39.839: W/System.err(5525):     at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:410)
03-05 17:59:39.839: W/System.err(5525):     at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:164)
03-05 17:59:39.839: W/System.err(5525):     at org.jsoup.helper.HttpConnection.get(HttpConnection.java:153)
03-05 17:59:39.839: W/System.err(5525):     at com.example.queryApp.QueryActivity.onCreate(QueryActivity.java:50)
03-05 17:59:39.839: W/System.err(5525):     at android.app.Activity.performCreate(Activity.java:5206)
03-05 17:59:39.839: W/System.err(5525):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-05 17:59:39.839: W/System.err(5525):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-05 17:59:39.839: W/System.err(5525):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-05 17:59:39.844: W/System.err(5525):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-05 17:59:39.844: W/System.err(5525):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-05 17:59:39.844: W/System.err(5525):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 17:59:39.844: W/System.err(5525):     at android.os.Looper.loop(Looper.java:137)
03-05 17:59:39.844: W/System.err(5525):     at android.app.ActivityThread.main(ActivityThread.java:4898)
03-05 17:59:39.844: W/System.err(5525):     at java.lang.reflect.Method.invokeNative(Native Method)
03-05 17:59:39.844: W/System.err(5525):     at java.lang.reflect.Method.invoke(Method.java:511)
03-05 17:59:39.844: W/System.err(5525):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-05 17:59:39.849: W/System.err(5525):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-05 17:59:39.849: W/System.err(5525):     at dalvik.system.NativeStart.main(Native Method)
03-05 17:59:39.849: W/System.err(5525): Caused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
03-05 17:59:39.849: W/System.err(5525):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:192)
03-05 17:59:39.854: W/System.err(5525):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:163)
03-05 17:59:39.854: W/System.err(5525):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.verifyCertificateChain(OpenSSLSocketImpl.java:573)
03-05 17:59:39.854: W/System.err(5525):     at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
03-05 17:59:39.854: W/System.err(5525):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:371)
03-05 17:59:39.854: W/System.err(5525):     ... 27 more
03-05 17:59:39.854: W/System.err(5525): Caused by: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
03-05 17:59:39.859: W/System.err(5525):     ... 32 more 
```

下面是负责解析网页的我的 QueryActivity 的部分代码。我将三个网站的 url 从另一个活动传递到 QueryActivity 然后我使用 Jsoup 连接并获取用于解析的 html。

```
public class QueryActivity extends Activity
{
   String fWebsite = getIntent().getStringExtra("fURL");
   String sWebsite = getIntent().getStringExtra("sURL");
   String tWebsite = getIntent().getStringExtra("tURL");
   try{
       Document doc1 = Jsoup.connect(fWebsite).timeout(0).get();    
       Document doc2 = Jsoup.connect(sWebsite).timeout(0).get();
       Document doc3 = Jsoup.connect(tWebsite).timeout(0).get();
      }
  catch (IOException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
    }
} 
```

有人可以解释为什么会发生这种情况以及此问题的任何解决方案吗？据我所知，我没有更改此活动（QueryActivity）中的任何代码？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:10:39.427

如果您遇到此问题： 1\. 检查您设备的日期/时间。2\. 也许您更改了固件版本或安装了一些更新。

# .net - 如果在最新的 .Net Framework 中使用，Microsoft 是否提供对过时方法的支持

> ID：15231846
> 
> 赞同：3
> 
> 时间：2013-03-05T18:56:45.590
> 
> 标签：.net, migration, obsolete

对 Dot Net Framework 1.1 的扩展支持将于 2013 年 9 月结束，它强制每个人将框架升级到更高版本以获得微软支持的好处。经过研究决定升级到 3.5 SP1，这显然会在 2020 年之前获得扩展支持。

使用 Visual Studio 2008 成功迁移后，过时的方法显示为警告，应用程序运行成功，无需对过时的方法进行任何更改。

如果这些警告没有按照建议进行更改。如果出现任何问题，Microsoft 将根据 3.5 SP1 支持结束日期支持它们。

您能否建议正确的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:16:25.800

过时的意思就是这样。Microsft 可以在未来的版本中决定将 objsolete 方法删除或合并到其他 API 中。是否有某些原因选择 3.51 而非 4.0？尝试针对 4.0 构建并查看代码是否仍然有效，这将为您提供额外的支持窗口并考虑更改受支持的过时方法，这将是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:24:07.133

定义“支持”？

当一个成员被标记为过时，它仍然存在，没有改变，具有相同的行为，这只是意味着它*可能*在未来的某个时候被删除——仍然使用它的旧应用程序*将*继续运行，但新应用程序*不应该*使用该成员或功能。

如果您指的是“客户支持” - 就像您给 Microsoft 打个电话并支付开发人员支持费一样，那么是的，电话另一端的人会有所帮助如果您发现标记为过时的功能存在错误或问题，您可能会提供修补程序。延长支持期结束后，届时微软将不会为该功能或整个产品中的任何内容提供个人级别的支持（假设您已经升级到 4.0 或 5.0 或其他任何内容）。但是，如果您的程序运行良好，并且 Microsoft 承诺在未来的 Windows 版本中提供运行时支持（就像它在 Windows 8 上对 VB6 所做的那样），那么这不是问题。此外，Microsoft 不会删除非个人的在线支持（例如知识库文章），因此您仍然可以依赖它。但是 2020 年还有 7 年的时间，我们将达到 .NET 6。

但是，如果您确实升级到 .NET 5.0 并看到过时的功能已被删除，那么您需要相应地更改您的代码。此外，过时的项目（通常）不会在点发布或服务包中被删除（除非这是一个主要的安全问题）。

请记住，编写桌面软件与大型机软件不同——平台*会*改变，你的应用程序*会*崩溃，而你必须继续运行跑步机。您能做的最好的事情就是符合平台要求并祈祷前向兼容性。（这就是为什么许多 Windows 9x 游戏不能在现代操作系统上运行的原因：开发人员无法抽出时间来正确地做事，这很糟糕）。

# jquery - 没有表单标签的jQuery验证

> ID：15231847
> 
> 赞同：13
> 
> 时间：2013-03-05T18:56:55.620
> 
> 标签：jquery, jquery-validate

我有一个带有许多输入的“表单”，在提交按钮上我调用了一个 javascript 函数来操作信息并通过 ajax 发送到一个 php 文件..

我可以添加一个没有操作 url 的表单标签来使用 jquery 验证来验证我的“表单”吗？还是我必须手动进行验证？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T18:58:49.800

> “我有一个包含许多输入的‘表单’，在提交按钮上我调用了一个 javascript 函数来操作信息并通过 ajax 发送到一个 php 文件”

绝对需要您拥有`<form></form>`jQuery Validate 插件的标签才能正常运行，或者根本不需要。

如果你使用`ajax`，你必须[把你的 jQuery Validate 插件放在`ajax`里面`submitHandler`](http://docs.jquery.com/Plugins/Validation/validate#toptions)。请参阅下面的示例。

> “我可以添加一个没有操作 url 的表单标签来使用 jquery validate 验证我的“表单”吗？”

是的，您可以删除或阻止`action`并仍然使用 jQuery Validate。

见演示：http: [//jsfiddle.net/NEPSc/3/](http://jsfiddle.net/NEPsc/3/)

将您的`ajax`和 a`return false`放入其中`submitHandler`，不会发生常规提交：

```
$(document).ready(function() {

    $('#myform').validate({ // initialize plugin
        // your rules & options,
        submitHandler: function(form) {
            // your ajax would go here
            return false;  // blocks regular submit since you have ajax
        }
    });

}); 
```

* * *

**编辑**：

根据 OP 的评论，要使用 a`input type="button"`而不是 a `input type="submit"`，您需要使用`click`处理程序。 **不需要任何内联 JavaScript。完全删除该`onClick`功能。**

**查看更新的演示：http: [//jsfiddle.net/NEPSc/5/](http://jsfiddle.net/NEPsc/5/)**

# cocos2d-iphone - Box2d - 如何抓取和投掷物体

> ID：15231848
> 
> 赞同：0
> 
> 时间：2013-03-05T18:56:55.750
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

假设屏幕上有 3 个盒子，我怎样才能触摸其中一个以将其捡起并“扔”给其他人？我已经实现了世界其他地方，但找不到太多关于如何抓取/拖动/投掷物理对象的信息。有任何示例代码或文档可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:04:48.477

这取决于您要尝试做什么。这是一种物理模拟，因此与系统交互的典型方式是向对象施加力，而不是直接操纵 x,y 坐标。但实际上你也可以这样做。我相信最常见的方法是使用鼠标关节。在 b2MouseJoint 上的谷歌搜索将显示文档和几个例子，包括这个。

[http://muhammedalee.wordpress.com/tag/b2mousejoint/](http://muhammedalee.wordpress.com/tag/b2mousejoint/)

# jquery - animate的回调函数在ie7上不起作用

> ID：15231856
> 
> 赞同：0
> 
> 时间：2013-03-05T18:57:16.340
> 
> 标签：jquery, internet-explorer, callback, jquery-animate

我有以下内容：

```
 $(".transparentLoad").animate({
        opacity : 1,
                },100,function() {
                $(".transparentLoad").each(function(){ alert("IE &");
                                               $(this).css("filter" , " ");
                                           });
                                  }); 
```

并且，

```
 $(".transparentLoad").animate({
        opacity : 1,
                },function() {
                $(".transparentLoad").each(function(){ alert("IE &");
                                               $(this).css("filter" , " ");
                                           });
                                  }); 
```

并且，

```
 $(".transparentLoad").animate({
            opacity : 1,
                    },{complete:function() {
                    $(".transparentLoad").each(function(){ alert("IE &");
                                                   $(this).css("filter" , " ");
                                               });
                                      }
}); 
```

但这一切都在 IE7 中给出了错误。我需要做的是，在动画完成后，我需要删除添加的过滤器 css 样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:58:40.930

你在这里有一个额外的逗号：

```
opacity : 1, // <---- 
```

# spring - Spring Security 只返回控制器的根目录

> ID：15231857
> 
> 赞同：0
> 
> 时间：2013-03-05T18:57:16.757
> 
> 标签：spring, tomcat, spring-mvc, spring-security

在我的应用程序中添加了 spring security 之后，它似乎只返回了我的控制器的根目录。

当我在其中放置一个 URL 时，它应该在“工作”版本中返回 json，它会按预期返回 json。在我使用弹簧安全的版本中，它只返回我的控制器的根。

下面是我的tomcat输出。

```
DEBUG - Converted URL to lowercase, from: '/service/products/2'; to: '/service/products/2'
DEBUG - Candidate is: '/service/products/2'; pattern is /**; matched=true
DEBUG - /service/products/2 at position 1 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
DEBUG - No HttpSession currently exists
DEBUG - No SecurityContext was available from the HttpSession: null. A new one will be created.
DEBUG - /service/products/2 at position 2 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
DEBUG - /service/products/2 at position 3 of 11 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
DEBUG - /service/products/2 at position 4 of 11 in additional filter chain; firing Filter: 'DefaultLoginPageGeneratingFilter'
DEBUG - /service/products/2 at position 5 of 11 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
DEBUG - /service/products/2 at position 6 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
DEBUG - /service/products/2 at position 7 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
DEBUG - /service/products/2 at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
DEBUG - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
DEBUG - /service/products/2 at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
DEBUG - Requested session ID8FA5D77A75BFF4D7EBDD063710EFF5F4 is invalid.
DEBUG - /service/products/2 at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
DEBUG - /service/products/2 at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
DEBUG - Converted URL to lowercase, from: '/service/products/2'; to: '/service/products/2'
DEBUG - Candidate is: '/service/products/2'; pattern is /service/products/removeproduct**; matched=false
DEBUG - Public object - authentication not attempted
DEBUG - /service/products/2 reached end of additional filter chain; proceeding with original chain
DEBUG - DispatcherServlet with name 'cr' processing GET request for [/service/products/2]
DEBUG - Matching patterns for request [/service/products/2] are [/service/products/{productId}]
DEBUG - URI Template variables for request [/service/products/2] are {productId=2}
DEBUG - Mapping [/service/products/2] to HandlerExecutionChain with handler [com.cr.controllers.ProductsController@60326032] and 3 interceptors
DEBUG - Last-Modified value for [/service/products/2] is: -1
DEBUG - Invoking request handler method: public void com.cr.controllers.ProductsController.get(javax.servlet.ServletResponse) throws java.io.IOException
DEBUG - Returning cached instance of singleton bean 'org.springframework.transaction.interceptor.TransactionInterceptor#0'
DEBUG - Null ModelAndView returned to DispatcherServlet with name 'cr': assuming HandlerAdapter completed request handling
DEBUG - Successfully completed request
DEBUG - Chain processed normally
DEBUG - SecurityContext is empty or anonymous - context will not be stored in HttpSession. 
DEBUG - SecurityContextHolder now cleared, as request processing completed 
```

我将以下内容添加到我的 web.xml

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:applicationContext.xml
        classpath:spring-security.xml
    </param-value>
</context-param>
<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>

<filter-mapping>
<filter-name>springSecurityFilterChain</filter-name>
<url-pattern>/*</url-pattern> 
```

弹簧安全.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

    <http auto-config="true" path-type="ant">
        <intercept-url pattern="/service/products/removeProduct**" access="ROLE_USER" />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="user" password="user" authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

我还降级到春季版本 3.0.5。这是我的 pom.xml 中的 spring 依赖项。工作版本在 3.2.0 / 3.1.3

```
<properties>
        <spring.version>3.0.5.RELEASE</spring.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>1.0.3.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <!-- Spring Security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:52:17.937

如果您在 POM 文件（特别是 3.2.0.RELEASE）中包含 Spring 3.2，那么您的配置文件应以：

```
<beans:beans 
    xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.2.xsd"
> 
```

请注意，模式位置上的版本号与您正在使用的 Spring 框架的版本号（主要/次要）匹配。

[我试图将此作为评论添加到您的答案 zmanc，但类似 ​​URL 的字符串被系统重新解释并转换为链接（减去协议，并且较长的字符串被截断）。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:30:36.030

我发现这是我使用的弹簧版本组合的问题。我对我的 Pom 进行了以下更改，并对 spring-security.xml 进行了一项更改，它解决了这个问题。

```
<properties>
    <spring.version>3.2.0.RELEASE</spring.version>
</properties>
<dependencies>
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>1.0.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <!-- Spring Security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.10.Final</version>
    </dependency> 
```

春季安全 xml 更新

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd"> 
```

# python - 如何通过套接字和选择模块管理聊天服务器（Python）的套接字连接

> ID：15231861
> 
> 赞同：1
> 
> 时间：2013-03-05T18:57:25.910
> 
> 标签：python, sockets, select, module

很抱歉打扰大家，但我已经被难住了一段时间了。

问题是我决定重新配置我使用套接字的这个聊天程序，以便它有一个服务器，然后是两个单独的客户端，而不是一个客户端和一个服务器/客户端。

我之前问过我如何让我的服务器“管理”客户端的这些连接，以便它可以重定向它们之间的数据。我得到了一个绝妙的答案，它为我提供了显然需要执行此操作的代码。

问题是我不明白它是如何工作的，我确实在评论中问过，但除了一些文档链接外，我没有得到太多回复。

这是我得到的：

```
connections = []

while True:
    rlist,wlist,xlist = select.select(connections + [s],[],[])
    for i in rlist:
        if i == s:
            conn,addr = s.accept()
            connections.append(conn)
            continue
        data = i.recv(1024)
        for q in connections:
            if q != i and q != s:
                q.send(data) 
```

据我了解，select 模块提供了在 select.select 的情况下制作可等待对象的能力。

我有 rlist、待读取列表、wlist、待写入列表，然后是 xlist，待处理异常条件。

他正在将待写入列表分配给“s”，在我的聊天服务器中，它是在分配的端口上侦听的套接字。

我觉得我理解的足够清楚了。但我真的很想得到一些解释。

如果你觉得我问的问题不合适，请在评论中告诉我，我会删除它。我不想违反任何规则，而且我很确定我不会重复线程，因为我在求助之前做了一段时间的研究。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T00:16:43.723

*注意：我在这里的解释假设您正在谈论 TCP 套接字，或者至少是某种基于连接的类型。UDP 和其他数据报（即非基于连接的）套接字在某些方面相似，但您`select`在它们上使用的方式略有不同。*

每个套接字就像一个打开的文件，可以读取和写入数据。您写入的数据进入系统内部的缓冲区，等待在网络上发送出去。从网络到达的数据会在系统内部缓冲，直到您读取它。下面有很多聪明的东西，但是当您使用套接字时，您真正需要知道的是（至少最初是这样）。

在下面的解释中记住系统正在执行此缓冲通常很有用，因为您会意识到操作系统中的 TCP/IP 堆栈独立于您的应用程序发送和接收数据 - 这样做是为了让您的应用程序可以有一个简单的接口（这就是套接字，一种从代码中隐藏所有 TCP/IP 复杂性的方法）。

进行这种读写的一种方法是*阻塞*。使用该系统，`recv()`例如，当您调用 时，如果系统中有数据等待，那么它将立即返回。但是，如果没有数据等待，则调用会*阻塞*- 也就是说，您的程序会暂停，直到有数据要读取。有时您可以通过超时来执行此操作，但在纯阻塞 IO 中，您真的可以永远等待，直到另一端发送一些数据或关闭连接。

对于一些简单的情况，这并不算太糟糕，但仅适用于您与另一台机器通信的情况 - 当您在多个套接字上通信时，您不能只等待来自一台机器的数据，因为另一台机器可能会给你寄东西。还有其他一些问题，我不会在这里详细介绍——我只想说这不是一个好方法。

一种解决方案是为每个连接使用不同的线程，因此阻塞是可以的——其他连接的其他线程可以被阻塞而不会相互影响。在这种情况下，每个连接需要两个线程，一个用于读取，一个用于写入。但是，线程可能是棘手的野兽——您需要小心地在它们之间同步数据，这会使编码变得有点复杂。此外，对于像这样的简单任务，它们效率低下。

该`select`模块允许您使用单线程解决此问题 - 而不是阻塞单个连接，它允许您执行“进入睡眠状态，直到这些套接字中的至少一个有一些我可以读取的数据”（这是一个简化，我稍后会更正）。因此，一旦调用`select.select()`返回，您就可以确定您正在等待的连接之一有一些数据，并且您可以安全地读取它（即使使用阻塞 IO，如果您小心的话 - 因为您确定存在那里的数据，你永远不会阻塞等待它）。

当你第一次启动你的应用程序时，你只有一个套接字，它是你的监听套接字。所以，你只在对`select.select()`. 我之前所做的简化是，实际上该调用接受三个用于读取、写入和错误的套接字列表。第一个列表中的套接字被监视读取 - 因此，如果其中任何一个有数据要读取，则`select.select()`函数将控制权返回给您的程序。第二个列表用于写入 - 您可能认为您始终可以写入套接字，但实际上如果连接的另一端读取数据的速度不够快，那么您系统的写入缓冲区可能会填满，您可能暂时无法写入. 看起来给你代码的人忽略了这种复杂性，这对于一个简单的例子来说还不错，因为通常缓冲区足够大，你不太可能在这样的简单情况下遇到问题，但这是你应该解决的问题一旦你的代码的其余部分工作，未来的地址。最后的列表会被监视错误 - 这并没有被广泛使用，所以我现在将跳过它。在这里传递空列表很好。

此时有人连接到您的服务器 - 就这`select.select()`方面而言，这算作使监听套接字“可读”，因此函数返回并且可读套接字列表（第一个返回值）将包括监听套接字。

下一部分将遍历所有要读取数据的连接，您可以看到侦听套接字的特殊情况`s`。代码调用`accept()`它，它将从侦听套接字获取下一个等待的新连接并将其转换为该连接的全新套接字（侦听套接字继续侦听并且可能还有其他新连接也在等待它，但这很好 -我稍后会介绍这个）。全新的套接字被添加到`connections`列表中，这就是处理侦听套接字的结束 -如果有的话，`continue`将继续从 返回的下一个连接`select.select()`。

对于其他可读的连接，代码调用`recv()`它们来恢复下一个`1024`字节（或者如果小于 1024 字节，则任何可用的字节）。重要说明 - 如果您不习惯`select.select()`确保连接可读，则此调用`recv()`可能会阻塞并暂停您的程序，直到数据到达该特定连接 - 希望这说明了为什么`select.select()`需要。

一旦读取了一些数据，代码就会在所有其他连接（如果有的话）上运行，并使用该`send()`方法将数据复制下来。代码正确地跳过了与刚刚到达的数据相同的连接（这是关于 的业务`q != i`）并且也跳过`s`了 ，但碰巧这不是必需的，因为据我所知，它实际上从未添加到`connections`列表中。

处理完所有可读连接后，代码将返回`select.select()`循环以等待更多数据。请注意，如果连接仍有数据，则调用会立即返回——这就是为什么只接受来自监听套接字的单个连接是可以的。如果有更多连接，`select.select()`将立即再次返回，并且循环可以处理下一个可用连接。您可以使用非阻塞 IO 来提高效率，但这会使事情变得更复杂，所以现在让我们保持简单。

这是一个合理的说明，但不幸的是它存在一些问题：

1.  正如我所提到的，代码假定您始终可以`send()`安全地调用，但是如果您有一个连接，而另一端没有正确接收（可能该机器过载），那么您的代码可能会填满发送缓冲区，然后在它挂起时挂起试图打电话`send()`。
2.  该代码无法处理连接关闭，这通常会导致从`recv()`. 这应该会导致连接被关闭并从`connections`列表中删除，但是这段代码不会这样做。

我稍微更新了代码以尝试解决这两个问题：

```
connections = []
buffered_output = {}

while True:
    rlist,wlist,xlist = select.select(connections + [s],buffered_output.keys(),[])
    for i in rlist:
        if i == s:
            conn,addr = s.accept()
            connections.append(conn)
            continue
        try:
            data = i.recv(1024)
        except socket.error:
            data = ""
        if data:
            for q in connections:
                if q != i:
                    buffered_output[q] = buffered_output.get(q, b"") + data
        else:
            i.close()
            connections.remove(i)
            if i in buffered_output:
                del buffered_output[i]
    for i in wlist:
        if i not in buffered_output:
            continue
        bytes_sent = i.send(buffered_output[i])
        buffered_output[i] = buffered_output[i][bytes_sent:]
        if not buffered_output[i]:
            del buffered_output[i] 
```

我应该在这里指出，我假设如果远程端关闭连接，我们也想立即关闭这里。[严格来说，这忽略了 TCP半关闭](http://www.vorlesungen.uni-osnabrueck.de/informatik/networking-programming/notes/22Nov96/3.html)的可能性，即远程端已发送请求并关闭其端，但仍期望返回数据。我相信非常旧的 HTTP 版本有时会这样做来指示请求的结束，但实际上这很少使用，并且可能与您的示例无关。

另外值得注意的是，很多人在使用时使他们的套接字是非阻塞的`select`——这意味着调用`recv()`或`send()`否则会阻塞将返回错误（用 Python 术语引发异常）。这样做的部分原因是为了安全，以确保粗心的代码不会最终阻塞应用程序；但它也允许一些稍微更有效的方法，例如在多个块中读取或写入数据，直到没有剩余。使用阻塞 IO 这是不可能的，因为`select.select()`调用只保证有*一些*数据要读取或写入 - 它不保证有多少。因此，在需要调用之前，您只能在每个连接上安全地调用阻塞`send()`或一次`recv()``select.select()`再次查看您是否可以再次这样做。这同样适用于`accept()`监听套接字。

但是，效率节省通常只是在具有大量繁忙连接的系统上存在的问题，因此在您的情况下，我会保持简单，暂时不用担心阻塞。在您的情况下，如果您的应用程序似乎挂断并且没有响应，那么您很可能在不应该的地方进行阻塞调用。

最后，如果您想使此代码可移植和/或更快，可能值得看一下类似的东西[`libev`](https://code.google.com/p/pyev/)，它本质上有几种替代方案，`select.select()`可以在不同的平台上很好地工作。但是，这些原则大体相似，因此最好先关注一下`select`，直到您的代码运行起来，然后再研究更改它。

另外，我注意到一位评论者建议使用[Twisted](http://twistedmatrix.com/trac/)，这是一个提供更高级别抽象的框架，因此您无需担心所有细节。就我个人而言，过去我遇到过一些问题，例如很难以方便的方式捕获错误，但很多人都非常成功地使用它——这只是他们的方法是否适合你思考事物的方式的问题。至少值得调查一下，看看它的风格是否比我更适合你。我来自用 C/C++ 编写网络代码的背景，所以也许我只是坚持我所知道的（Python`select`模块非常接近它所基于的 C/C++ 版本）。

希望我已经在那里充分解释了事情 - 如果您仍有问题，请在评论中告诉我，我可以在我的答案中添加更多细节。

# matlab - 索贝尔面具的困惑

> ID：15231863
> 
> 赞同：0
> 
> 时间：2013-03-05T18:57:39.310
> 
> 标签：matlab, opencv

Sobel（Gx 和 Gy）的确切掩码是什么？我看到的是人们如何写它有两种类型，如下所示，

**样式 1**

```
Gx = [-1 -2 -1
        0 0 0
        1 2 1]

Gy = [-1 0 1
      -2 0 2
      -1 0 1] 
```

**风格 2**

```
Gx = [-1 0 1
      -2 0 2
      -1 0 1]

Gy = [-1 -2 -1
        0 0 0
        1 2 1] 
```

**已编辑**

@奥雷利斯

在 Matlab --> (row x col)

在 OpenCV --> (col x 行)

但是，下图对两者都是正确的

```
-->column
^
|row
| 
```

可能在 Matlab 中将输出 Gx == 水平边缘，如果使用样式 1，则输出 Gy == 垂直边缘，如果使用样式 2，则输出 Gx == 水平边缘，Gy == 垂直边缘。两者都将产生相同的输出（由于 col-row 主要顺序，内部操作可能会有所不同）。

@Abhishek您正在使用样式1来计算水平和垂直边缘？和 Gx 对应于水平边缘，而 Gy 对应于垂直边缘？这是否意味着风格 2 是对它的补充？例如。计算 Gx 将给出垂直边缘而 Gy 给出水平边缘？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:52:59.173

风格 2 是正确的。但是，使用这两种样式我们将得到相同的结果，因为内核与图像进行卷积

Gx = [-1 -2 -1 0 0 0 <--- 将提取 Y 方向而不是 X 方向的特征。1 2 1]

Gy = [-1 0 1 -2 0 2 <--- 将提取 X 方向而不是 Y 方向的特征。-1 0 1]

这可以通过使用简单的二维卷积来验证。

原图：![原始图像](../Images/ea9211dedc6085a47edc4ced51c69492.png)

使用样式 1，Gx： ![在此处输入图像描述](../Images/0d05a5c111328d6bff7d7015f8606596.png)

使用样式 1，Gy： ![在此处输入图像描述](../Images/46174588e2c712ee3453aee11c5ec5ed.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:49:23.307

如果您使用数学符号，则正确的掩码是样式 2（请参见[此处](http://en.wikipedia.org/wiki/Sobel_operator)）。

您的困惑可能源于 MATLAB 和 OpenCV 中的矩阵之间的差异。MATLAB 矩阵按列优先顺序指定，而 OpenCV 矩阵按行优先顺序指定。

样式 1 以列优先方式表示 Sobel 掩码，样式 2 以行优先方式表示相同掩码。

# node.js - 使用 node.js 显示 html 页面

> ID：15231864
> 
> 赞同：19
> 
> 时间：2013-03-05T18:57:42.570
> 
> 标签：node.js

这是我第一次使用 node.js。我让它显示 index.html，但它不显示网站上的图像或其他任何东西，它只显示基本的 html 内容。这是我的设置方式。服务器上没有 apache、php 或其他任何东西，只有 ubuntu、proftp 和 node（以及 curl 和其他依赖项）。我为节点文件 /var/nodeFiles 创建了主目录，而 html/site 文件的目录是 /var/nodeFiles/www 所以对于我的节点服务器文件，我这样做是这样的：

```
var http = require('http'),
    fs = require('fs');
fs.readFile('/var/nodeFiles/www/index.html', function (err, html) {
    if (err) {
        throw err; 
    }       
    http.createServer(function(request, response) {  
        response.writeHeader(200, {"Content-Type": "text/html"});  
        response.write(html);  
        response.end();  
    }).listen(80);
}); 
```

这可行，但它只显示 index.html 文件并且没有附加任何内容，因此没有图像，没有效果或 html 文件应显示的任何内容。文件和目录都是正确的，我已经仔细检查过，文件夹的权限是正确的。那么我还需要做什么才能让节点显示网站的其余部分？我希望我已经正确地解释了我自己，有人告诉我这是问开发问题的地方。感谢您抽出时间来阅读。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-05T19:11:09.683

> 但它只显示 index.html 文件并且没有附加任何内容，因此没有图像、效果或 html 文件应显示的任何内容。

这是因为在您的程序中，无论请求是什么样的，您都会返回浏览器，这是唯一的事情。

您可以在此处查看更完整的示例，该示例将返回最常见网页（HTML、JPG、CSS、JS）的正确文件[https://gist.github.com/hectorcorrea/2573391](https://gist.github.com/hectorcorrea/2573391)

另外，看看我写的这篇关于如何开始使用 node 的博客文章。我认为它可能会为您澄清一些事情：http: [//hectorcorrea.com/blog/introduction-to-node-js](http://hectorcorrea.com/blog/introduction-to-node-js)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-05T19:03:14.667

检查此基本代码以设置 html 服务器。它为我工作。

```
var http = 要求（'http'），
    fs = 要求('fs');

fs.readFile('./index.html', function (err, html) {
    如果（错误）{
        抛出错误；
    }       
    http.createServer（函数（请求，响应）{  
        response.writeHeader(200, {"Content-Type": "text/html"});  
        response.write(html);  
        response.end();  
    }).听(8000);
});

```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-10-16T19:08:50.313

这对我有用：

```
var express = require('express'),
app = express(); 
app.use('/', express.static(__dirname + '/'));
app.listen(8080); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T20:20:47.073

如果您的目标是简单地显示一些静态文件，您可以使用 Connect 包。我已经取得了一些成功（我自己对 NodeJS 还是很陌生），结合使用它和 twitter 引导 API。

在命令行

```
:\> cd <path you wish your server to reside>
:\> npm install connect 
```

然后在一个文件（我命名）Server.js

```
var connect = require('connect'),
   http = require('http');
connect()
   .use(connect.static('<pathyouwishtoserve>'))
   .use(connect.directory('<pathyouwishtoserve>'))
   .listen(8080); 
```

最后

```
:\>node Server.js 
```

注意事项：

如果您不想显示目录内容，请排除 .use(connect.directory 行。

所以我创建了一个名为“server”的文件夹，将 index.html 和 bootstrap API 放在同一个文件夹中。然后，当您访问计算机 IP:8080 时，它会自动使用 index.html 文件。

如果您想使用端口 80（所以只需访问 http://，您不必输入 :8080 或其他端口）。您需要使用 sudo 启动节点，我不确定安全隐患，但如果您只是将它用于内部网络，我个人认为这没什么大不了的。暴露在外面的世界是另一回事。

# 2014 年 1 月 28 日更新：

我不必对我的最新版本执行以下操作，因此请先像上面那样尝试，如果它不起作用（并且您阅读了抱怨它找不到 nodejs 的错误），请继续并可能尝试下面。

# 结束更新

此外，在 ubuntu 中运行时，我遇到了使用 nodejs 作为名称（使用 NPM）的问题，如果您遇到此问题，我建议使用别名或其他东西将 nodejs“重命名”为 node.js。

我使用的命令（无论好坏）：

创建一个名为 node 的新文件

```
:\>gedit /usr/local/bin/node
#!/bin/bash
exec /nodejs "$@"

sudo chmod -x /usr/local/bin/node 
```

这应该使

```
node Server.js 
```

工作得很好

# php - 很多查询 - 慢？

> ID：15231869
> 
> 赞同：0
> 
> 时间：2013-03-05T18:58:05.633
> 
> 标签：php, mysql, cron

首先，如果已经问过这个问题，我很抱歉，我至少找不到任何东西。

无论如何，我将每 5 分钟运行一次 cron 任务。该脚本加载 79 个外部页面，而每个页面包含大约 200 个我需要在数据库中检查的值（总共 15000 个值）。如果它们存在于数据库中，将检查 100% 的值，如果存在（比如 10%），我将使用 UPDATE 查询。

这两个查询都是非常基本的，没有 INNER 等。这是我第一次使用 cron，我已经假设我会得到“不要为此使用 cron”的响应，但我的主机不允许守护进程。

查询如下：

```
SELECT `id`, `date` FROM `users` WHERE `name` = xxx 
```

如果匹配，它将使用 UPDATE 查询（有时带有附加值）。

问题是，这会使我的 mysql 服务器超载吗？如果是，建议的方法是什么？如果这很重要，我正在使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:03:08.027

如果您只是一遍又一遍地检查相同的查询，有几个选项。在我的脑海中，您可以使用`WHERE name IN ('xxx','yyy','zzz','aaa','bbb'...etc)`. 除此之外，您可以将文件导入到另一个表中，并可能运行一个查询来进行插入/更新。

更新：

```
//This is what I'm assuming your data looks like after loading/parsing all the pages.
//if not, it should be similar.
$data = array(
    'server 1'=>array('aaa','bbb','ccc'),
    'server 2'=>array('xxx','yyy','zzz'),
    'server 3'=>array('111','222', '333'));
//where the key is the name of the server and the value is an array of names.

//I suggest using a transaction for this.
mysql_query("SET AUTOCOMMIT=0");
mysql_query("START TRANSACTION");
//update online to 0 for all. This is why you need transactions. You will set online=1
//for all online below.
mysql_query("UPDATE `table` SET `online`=0");
foreach($data as $serverName=>$names){
    $sql = "UPDATE `table` SET `online`=1,`server`='{$serverName}' WHERE `name` IN ('".implode("','", $names)."')";
    $result = mysql_query($sql);
    //if the query failed, rollback all changes
    if(!$result){
        mysql_query("ROLLBACK");
        die("Mysql error with query: $sql");
    }
}
mysql_query("COMMIT"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:36:43.417

**关于 MySQL 和大量查询**

如果您对此服务器有足够的权限 - 您可以尝试增加查询缓存。

您可以在 SQL 或 mysql 配置文件中执行此操作。

[http://dev.mysql.com/doc/refman/5.1/en/query-cache-configuration.html](http://dev.mysql.com/doc/refman/5.1/en/query-cache-configuration.html)

```
 mysql> SET GLOBAL query_cache_size = 1000000;
 Query OK, 0 rows affected (0.04 sec)

 mysql> SHOW VARIABLES LIKE 'query_cache_size';
 +------------------+--------+
 | Variable_name    | Value  |
 +------------------+--------+
 | query_cache_size | 999424 |
 +------------------+--------+
 1 row in set (0.00 sec) 
```

**MySQL 中的任务调度程序**

如果您的更新可能仅适用于存储在数据库中的数据（没有 PHP 变量） - 请考虑`EVENT`在 MySQL 中使用，而不是从 PHP 运行 SQL 脚本。

# python - 如何在 Python 中复制文件？

> ID：15231870
> 
> 赞同：1
> 
> 时间：2013-03-05T18:58:09.450
> 
> 标签：python, file, copy

我需要复制用户指定的文件并复制它（给它一个用户指定的名称）。这是我的代码：

```
import copy

def main():

    userfile = raw_input('Please enter the name of the input file.')
    userfile2 = raw_input('Please enter the name of the output file.')

    infile = open(userfile,'r')

    file_contents = infile.read()

    infile.close()

    print(file_contents)

    userfile2 = copy.copy(file_contents)

    outfile = open(userfile2,'w+')

    file_contents2 = outfile.read()

    print(file_contents2)

main() 
```

这里发生了一些奇怪的事情，因为它不打印第二个文件 outfile 的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:12:14.270

如果您正在阅读 outfile，为什么要使用`'w+'`? 这会截断文件。

用于`'r'`阅读。见[链接](http://docs.python.org/2.7/library/functions.html#open)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T21:06:11.473

Python 的 shutil 是一种更便携的文件复制方法。试试下面的示例：

```
import os
import sys
import shutil

source = raw_input("Enter source file path: ")
dest = raw_input("Enter destination path: ")

if not os.path.isfile(source):
    print "Source file %s does not exist." % source
    sys.exit(3)

try:
    shutil.copy(source, dest)
except IOError, e:
    print "Could not copy file %s to destination %s" % (source, dest)
    print e
    sys.exit(3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:23:58.710

为什么不直接将输入文件内容写入输出文件呢？

```
userfile1 = raw_input('input file:')
userfile2 = raw_input('output file:')

infile = open(userfile1,'r')
file_contents = infile.read()    
infile.close()

outfile = open(userfile2,'w')
outfile.write(file_contents)
outfile.close() 
```

复制的作用是对python中的对象进行浅复制，与复制文件无关。

该行实际上所做的是将输入文件内容复制到输出文件的名称上：

```
userfile2 = copy.copy(file_contents) 
```

您丢失了输出文件名，并且不会发生复制操作。

# iphone - 当只有一部手机有应用程序时，蓝牙在 iOS 之间共享一个 mp3 文件？

> ID：15231871
> 
> 赞同：0
> 
> 时间：2013-03-05T18:58:11.487
> 
> 标签：iphone, ios, ios4, bluetooth, gamekit

我正在构建一个 iOS 应用程序来匹配一个 android 应用程序，该应用程序可以将原始 mp3 文件从应用程序发送到另一部没有该应用程序的手机。该文件存储在文件结构中。

我想知道使用 GameKit 或其他方法是否能让我接近这一点。我需要发送 mp3 文件，以便接收 iPhone 不需要应用程序将它们存储在他们的 iPod 应用程序中。

这在 iPhone 上可行吗？还是我需要两部手机都安装了该应用程序？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:30:05.407

Apple iPhone 不支持通过蓝牙接收文件。因此，没有应用程序就无法接收文件。此外，如果您想将 MP3 保存到设备库，这也是不可能的，因为您只有对该库的读取权限。

但是，如果您想在不使用客户端应用程序的情况下共享文件，您可以将文件上传到基于 HTTP 的文件共享服务，然后您只需要客户端设备上的 URL。

# mysql - MySQL 中 group_concat 期间的参考价格和减去另一个价格

> ID：15231873
> 
> 赞同：0
> 
> 时间：2013-03-05T18:58:17.153
> 
> 标签：mysql, sql, e-commerce, group-concat, data-manipulation

我正在处理产品数据提要，目前正在对相关产品进行分组。我几乎得到了我想要的东西，但是，就像一个平庸的赛车手，我在最需要的时候已经用尽了技巧。

为了说明我的问题，我创建了一个简化版本。下面是数据结构：

```
CREATE TABLE `feed` (
    `sku` VARCHAR(10),
    `price` DECIMAL(6,2),
    `groupkey` VARCHAR(10)
  );

INSERT INTO `feed` (`sku`, `price`, `groupkey`) VALUES
('AAA', 10.00, NULL),
('BBB', 10.00, 'group1'),
('CCC', 12.00, 'group1'),
('DDD', 10.00, 'group2'),
('EEE', 12.00, 'group2'),
('FFF', 14.00, 'group2'),
('GGG', 20.00, NULL); 
```

我目前的查询是：

```
SELECT feed.groupkey
    , group_concat(feed.sku) AS skus
    , group_concat(feed.price) AS prices
    , feed.price AS pprice
FROM
    feed
WHERE
    feed.groupkey IS NOT NULL
GROUP BY
    feed.groupkey; 
```

该查询返回以下行：

```
+----------+-------------+-------------------+--------+
| groupkey | skus        | prices            | pprice |
+----------+-------------+-------------------+--------+
| group1   | BBB,CCC     | 10.00,12.00       |  10.00 |
| group2   | DDD,EEE,FFF | 10.00,12.00,14.00 |  10.00 |
+----------+-------------+-------------------+--------+ 
```

我真正需要做的是`pprice`从每个 concatenated中减去`price`，给我每个 sku 之间的价格差异，而不是它们的绝对价格。这将返回梦想的结果：

```
+----------+-------------+-------------------+--------+
| groupkey | skus        | prices            | pprice |
+----------+-------------+-------------------+--------+
| group1   | BBB,CCC     | 0.00,2.00         |  10.00 |
| group2   | DDD,EEE,FFF | 0.00,2.00,4.00    |  10.00 |
+----------+-------------+-------------------+--------+ 
```

总的来说，我在这个提要上花了很多时间，并且真的被困在可能是集成中的最后一个障碍上。我真的很感激一些指导，以帮助我朝着正确的方向前进。

编辑：我将此查询的结果用作“虚拟”产品行，作为组中产品的父级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:00:47.187

您可以在`group_concat()`, 中进行减法运算，例如：

```
SELECT feed.groupkey, group_concat(feed.sku) AS skus,
       group_concat(feed.price - min(feed.price)) AS prices
       min(feed.price) AS pprice
FROM feed
WHERE feed.groupkey IS NOT NULL
GROUP BY feed.groupkey 
```

问题是 。. . 哪个饲料价格？原始查询中返回的值是组中某一行的任意值。考虑到您可能想要最小值的差异，我使用了该值。

我认为编写查询的最佳方法是：

```
SELECT feed.groupkey, group_concat(feed.sku) AS skus,
       group_concat(feed.price - fsum.minprice) AS prices
       min(feed.price) AS pprice
FROM feed left outer join
     (select groupkey, MIN(feed.price) as minprice
      from feed
      group by groupkey
     ) fsum
     on feed.groupkey = fsum.groupkey
WHERE feed.groupkey IS NOT NULL
GROUP BY feed.groupkey 
```

您*不能*假设隐藏列和`group_concat()`. [文档](http://dev.mysql.com/doc/refman/5.5/en/group-by-extensions.html)在这一点上非常明确：

> MySQL extends the use of GROUP BY so that the select list can refer to nonaggregated columns not named in the GROUP BY clause. This means that the preceding query is legal in MySQL. You can use this feature to get better performance by avoiding unnecessary column sorting and grouping. However, this is useful primarily when all values in each nonaggregated column not named in the GROUP BY are the same for each group. The server is free to choose any value from each group, so unless they are the same, the values chosen are indeterminate. Furthermore, the selection of values from each group cannot be influenced by adding an ORDER BY clause. Sorting of the result set occurs after values have been chosen, and ORDER BY does not affect which values the server chooses.

If you want things in a particular order, then you need to be sure the structure is queried properly. That said, it often works in practice, but there is no guarantee.

# php - zencart上的多个mysql db连接

> ID：15231874
> 
> 赞同：0
> 
> 时间：2013-03-05T18:58:20.020
> 
> 标签：php, mysql, pdo

我需要为客户端连接到两个单独的数据库。一个数据库保存所有标准商店数据、客户、订单等，另一个数据库保存大约 41,000 个促销代码。我已经查看了 PDO 以连接到多个数据库，因为这是新标准，但是当我们有一个包含数据库连接信息的 configure.php 文件时，我不知道如何实现这一点。

configure.php 下面列出：

```
define('HTTP_SERVER', 'http://localhost');
define('HTTPS_SERVER', 'https://localhost');

// Use secure webserver for checkout procedure?
define('ENABLE_SSL', 'false');

// NOTE: be sure to leave the trailing '/' at the end of these lines if you make changes!

// * DIR_WS_* = Webserver directories (virtual/URL)
// these paths are relative to top of your webspace ... (ie: under the public_html or httpdocs folder)
define('DIR_WS_CATALOG', '/');
define('DIR_WS_HTTPS_CATALOG', '/');

define('DIR_WS_IMAGES', 'images/'); 
define('DIR_WS_INCLUDES', 'includes/');
define('DIR_WS_FUNCTIONS', DIR_WS_INCLUDES . 'functions/');
define('DIR_WS_CLASSES', DIR_WS_INCLUDES . 'classes/');
define('DIR_WS_MODULES', DIR_WS_INCLUDES . 'modules/');
define('DIR_WS_LANGUAGES', DIR_WS_INCLUDES . 'languages/');
define('DIR_WS_DOWNLOAD_PUBLIC', DIR_WS_CATALOG . 'pub/');
define('DIR_WS_TEMPLATES', DIR_WS_INCLUDES . 'templates/');

// * DIR_FS_* = Filesystem directories (local/physical)
//the following path is a COMPLETE path to your Zen Cart files. eg: /var/www/vhost/accountname/public_html/store/
define('DIR_FS_CATALOG', '/');

define('DIR_FS_DOWNLOAD', DIR_FS_CATALOG . 'download/');
define('DIR_FS_DOWNLOAD_PUBLIC', DIR_FS_CATALOG . 'pub/');
define('DIR_WS_UPLOADS', DIR_WS_IMAGES . 'uploads/');
define('DIR_FS_UPLOADS', DIR_FS_CATALOG . DIR_WS_UPLOADS);
define('DIR_FS_EMAIL_TEMPLATES', DIR_FS_CATALOG . 'email/');

// define our database connection
define('DB_TYPE', 'mysql');
define('DB_PREFIX', ''); // prefix for database table names -- preferred to be left empty
define('DB_SERVER', 'localhost');
define('DB_SERVER_USERNAME', '');
define('DB_SERVER_PASSWORD', '');
define('DB_DATABASE', '');

// The next 2 "defines" are for SQL cache support.
// For SQL_CACHE_METHOD, you can select from:  none, database, or file
// If you choose "file", then you need to set the DIR_FS_SQL_CACHE to a directory where your apache
// or webserver user has write privileges (chmod 666 or 777). We recommend using the "cache" folder inside the Zen Cart folder
// ie: /path/to/your/webspace/public_html/zen/cache   -- leave no trailing slash
define('SQL_CACHE_METHOD', 'none');
define('DIR_FS_SQL_CACHE', '/enter/your/path/to/public_html_or_htdocs/and/zencart/here/zen/cache'); 
```

挖掘 php 文件我发现了这个，这似乎是创建连接的地方：

```
// Load queryFactory db classes
require(DIR_FS_CATALOG . DIR_WS_CLASSES . 'db/' .DB_TYPE . '/query_factory.php');
$db = new queryFactory();
$db->connect(DB_SERVER, DB_SERVER_USERNAME, DB_SERVER_PASSWORD, DB_DATABASE); 
```

我看着使用：

```
try {
$db1 = new PDO('mysql:dbname=databas1;host=127.0.0.1', 'username', 'password');
$db2 = new PDO('mysql:dbname=databas2;host=127.0.0.1', 'username', 'password');
} catch (PDOException $ex) {
echo 'Connection failed: ' . $ex->getMessage();
} 
```

代替现有的：

```
$db->connect(DB_SERVER, DB_SERVER_USERNAME, DB_SERVER_PASSWORD, DB_DATABASE); 
```

但我担心这意味着需要更改所有现有查询以涵盖 $db1、$db2 问题。两个数据库都位于同一台服务器上，并使用相同的用户/密码组合。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:32:41.293

我尝试过，但 PDO 失败了，最后选择了：

```
$db = new queryFactory();
$db2 = new queryFactory();
$db->connect(DB_SERVER, DB_SERVER_USERNAME, DB_SERVER_PASSWORD, DB_DATABASE, USE_PCONNECT, false); 
$db2->connect(DB_SERVER, DB_SERVER_USERNAME, DB_SERVER_PASSWORD, DB_DATABASE2, USE_PCONNECT, true); 
```

还必须将 DB_DATABASE2 的定义添加到 configure.php 文件中。

希望它可以帮助其他禅车用户。真的很简单:)

# jquery - 通过计算隐藏字段jquery来计算表单上的数据行

> ID：15231875
> 
> 赞同：0
> 
> 时间：2013-03-05T18:58:24.020
> 
> 标签：jquery

我有一个允许用户动态添加行的表单。我需要知道表单在发布之前有多少行。我创建了一个我打算计算的隐藏字段，然后将隐藏字段的数量添加到隐藏字段value.can 任何人都可以帮助我没有得到正确的那部分。表格

```
 <tbody>
  <tr>
<td><input type="text" name="Item_No1" id="Item_No1"></td>
<td><input type="text" name="Item_Desc1" id="Item_Desc1"></td>
<td><input type="text" name="Qty1" id="Qty1"></td>
  <td><input type="hidden" name ="hidden1"id="inputfield1"></td> 
  </tr>
  </tbody> 
```

创建新行但不计算行并将其添加到隐藏字段的 jquery

```
<script>
      $(document).ready(function ($) {         
          $("button").on("click", function () {            
              addTableRow($("table"));        
              return false;
          });
          function addTableRow(table) {
              var $tr = $(table).find("tbody tr:last").clone();      
              $tr.find("input,select").val('').attr("name", function () {                 
                  var parts = this.id.match(/(\D+)(\d+)$/);                
                  return parts[1] + ++parts[2];              
              }).attr("id", function () {
                  var parts = this.id.match(/(\D+)(\d+)$/);
                  return parts[1] + ++parts[2];
              });           
              $(table).find("tbody tr:last").after($tr);
          };
          //counts hidden field
          var con = $("hidden1").length;
          //passes amount of hidden fields as value to hidden field         
          var hid = ($("input#hidden1").val("con"));
          $("#inputfield1").append(hid);
      });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:00:41.243

给其中一个字段一个类名。然后：

`$('.myClass').length`将是行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:01:58.963

```
 var con = $("hidden1").length; 
```

这是不正确的，将其更改为：

```
 var con = $("input[type=hidden]").length; 
```

# php - 存储的缓存文件名称更改

> ID：15231877
> 
> 赞同：-2
> 
> 时间：2013-03-05T18:58:25.813
> 
> 标签：php, caching, outputcache, cache-control, absolute-path

```
<?php
define('CACHE_PATH', $_SERVER["DOCUMENT_ROOT"]."/cachefiles/");
// how long to keep the cache files (hours)
define('CACHE_TIME', 12); 
// return location and name for cache file 
function cache_file() 
{ 
    return CACHE_PATH . md5($_SERVER['REQUEST_URI']);
}

// display cached file if present and not expired 
function cache_display() 
{ 
    $file = cache_file(); 
    // check that cache file exists and is not too old 
    if(!file_exists($file)) return; 
    if(filemtime($file) < time() - CACHE_TIME * 3600) return; 
    // if so, display cache file and stop processing
    readfile($file);
    exit; 
} 

// write to cache file 
function cache_page($content) 
{ 
    if(false !== ($f = @fopen(cache_file(), 'w'))) { 
        fwrite($f, $content);
        fclose($f); 
    } 
    return $content; 
} 

// execution stops here if valid cache file found
cache_display(); 

// enable output buffering and create cache file 
ob_start('cache_page');
?> 
```

上面的代码使用随机名称创建缓存

例如

4c556ca729a88177e72946a4c3732f62

a87aef8e1d11cee944a8854ab8377ac6

85f2e557d6b483fc06db804d35e6580f

它如何使它存储具有实际页面名称的缓存页面，例如

主页-4c556ca729a88177e72946a4c3732f62

关于-a87aef8e1d11cee944a8854ab8377ac6

我-85f2e557d6b483fc06db804d35e6580f

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:35:23.917

OP的问题在`cache_file()`方法中找到。此方法在查找或创建新文件时处理缓存文件名称的构建。

```
$_SERVER['REQUEST_URI'] 
```

将返回整个页面和变量（例如`/index.php?var=1`）。

在`cache_file()`中，它通过获取`MD5`请求的哈希并构建新文件的完整路径来构建名称。

```
CACHE_PATH . md5($_SERVER['REQUEST_URI']); 
```

OP 的请求是修改请求以在缓存的文件名中显示 home/about/me。这可以通过解析名称的 URI 或简单地使用文件名来完成。我将不使用重新布线`http://domain.tld/index.php`作为示例。

```
basename(__FILE__, ".php"); //gives index on index.php 
```

使用这个，我们然后修改

```
CACHE_PATH .basename(__FILE__, ".php") . "-" . md5($_SERVER['REQUEST_URI']); 
```

下面会给

```
../path/to/cache/index-{md5hash} 
```

# image - 全图滑块

> ID：15231881
> 
> 赞同：0
> 
> 时间：2013-03-05T18:58:33.363
> 
> 标签：image, jquery-ui-slider

嗨，我正在寻找一个图像滑块来放置完整的背景，最好是为这个网站提供一个很好的淡入淡出效果。[http://www.markcoffeyphotography.co.uk](http://www.markcoffeyphotography.co.uk)

目前我的网站上有一个，但我对它不太满意，我正在考虑更有效地重新编码网站（嘿，这是我的第一个 CSS、html 网站，所以让我休息一下）。

我对编码很陌生，所以任何帮助打破我需要做的事情以获得结果将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:07:02.463

冒险进入 Wordpress 可能对您有好处。那里有*许多*主题、插件和许多社区帮助。此外，请查看[Twitter 的 Bootstrap](http://twitter.github.com/bootstrap/)框架，让您开始使用干净的 HTML/CSS/JS。

[CodeDrops](http://tympanus.net/codrops/)有很多 jQuery（和其他前端）工具。

[这个也好看](http://tympanus.net/codrops/2013/02/26/full-width-image-slider/)

[这个具有您正在寻找的淡化效果。](http://jonraasch.com/blog/a-simple-jquery-slideshow)

# xml - 高速 XSLT 从 XML 转换为 CSV

> ID：15231889
> 
> 赞同：5
> 
> 时间：2013-03-05T18:58:57.457
> 
> 标签：xml, xslt, csv, transform, xslt-1.0

我一直在尝试使用 XSLT 在最有效的时间内从 XML 文档中获取 CSV 数据。以下是我的示例 XML

```
<?xml version="1.0" encoding="ISO-8859-1"?>
 <sObjects xmlns="urn:sobject.partner.soap.sforce.com">
     <sObject>
        <Name>Raagu</Name>
        <BillingStreet>Hoskote</BillingStreet>
</sObject>
     <sObject>
        <Name>Rajath</Name>
         <BillingStreet>BTM</BillingStreet>
         <age>25</age>
</sObject>
     <sObject>
        <Name>Sarath</Name>
         <BillingStreet>Murgesh</BillingStreet>
         <location>Bangalore</location>
         <age>#N/A</age>
</sObject>
     <sObject>
         <Name>Bharath</Name>
         <BillingStreet>EGL</BillingStreet>
         <location>Bangalore</location>
             <shipping>Hoskote</Shipping>
</sObject>
     <sObject>
         <Id>12312321321</Id>
         <Name>Guru</Name>
         <location>Sirsi</location>
         <date>12-12-12</date>
</sObject>
     <sObject>
         <Name>Appa</Name>
         <BillingStreet>someStrrt</BillingStreet>
         <accountNo>213213</accountNo>
</sObject>
           <sObject>
          <Name>Sarath</Name>
          <BillingStreet>Murgesh</BillingStreet>
         <location>Bangalore</location>
</sObject>
     <sObject>
          <Name>Sarath</Name>
         <BillingStreet>Murgesh</BillingStreet>
          <location>Bangalore</location>
</sObject>
     <sObject>
          <Name>Sarath</Name>
          <BillingStreet>Murgesh</BillingStreet>
           <location>Bangalore</location>
</sObject> 
```

我想要这种输出

```
 <?xml version="1.0" encoding="utf-8"?><csv xmlns="http://www.approuter.com/schemas/RootNode"><data>Name,BillingStreet,age,location,Shipping,Id,date,accountNo
Raagu,Hoskote,,,,,,
Rajath,BTM,25,,,,,
Sarath,Murgesh,#N/A,Bangalore,,,,
Bharath,EGL,,Bangalore,Hoskote,,,
Guru,,,Sirsi,,12312321321,12-12-12,
Appa,someStrrt,,,,,,213213
Sarath,Murgesh,,Bangalore,,,,
Sarath,Murgesh,,Bangalore,,,,
Sarath,Murgesh,,Bangalore,,,,</data></csv> 
```

为了完成这件事，我尝试了遵循 XSLT

```
<xsl:stylesheet version="1.0" xmlns:p0="urn:sobject.partner.soap.sforce.com" xmlns:csv="csv:csv" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output encoding="utf-8"  method="xml"/>
    <xsl:strip-space elements="*" />
    <xsl:variable name="delimiter" select="','"/>

    <xsl:key name="field" match="p0:sObject/*" use="name()"/>

<!-- variable containing the first occurrence of each field -->
    <xsl:variable name="allFields"
    select="/*/*/*[generate-id()=generate-id(key('field', name())[1])]"/>

    <xsl:template match="/">
    <!-- Output the CSV header -->
        <xsl:element name="csv" namespace="http://www.approuter.com/schemas/RootNode">
            <xsl:element name="data" namespace="http://www.approuter.com/schemas/RootNode">

                <xsl:for-each select="$allFields">
                    <xsl:value-of select="name()" />
                    <xsl:if test="position() &lt; last()">
                        <xsl:value-of select="$delimiter" />
                    </xsl:if>
                </xsl:for-each>

                <xsl:text>&#xa;    </xsl:text>

                <xsl:apply-templates select="/*/p0:sObject" />

            </xsl:element>
        </xsl:element>

    </xsl:template>

    <xsl:template match="p0:sObject">
        <xsl:variable name="this" select="." />
        <xsl:for-each select="$allFields">
            <xsl:value-of select="$this/*[name() = name(current())]" />
            <xsl:if test="position() &lt; last()">
                <xsl:value-of select="$delimiter" />
            </xsl:if>
        </xsl:for-each>
        <xsl:if test="position() &lt; last()">
            <xsl:text>&#xa;    </xsl:text>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

从功能性的角度来看，上述 XSLT 工作得非常好。但我正在尝试处理大约 10000 条记录。即 sObject 元素上的 10000 个实例，每个 sObject 将包含大约 15 个字段。

如果我在 XSLT 上运行它来处理这么多的记录，它就会被折腾。XSLT 大约需要 20 分钟来处理和提供 csv 数据。我想在几秒钟内完成这项工作。也就是说，XSLT 应该花费 3-4 秒来处理 10k 条记录（sObject 条目）以提供有效的 CSV 数据，如上所示。

这就是我坚持要增强 XSLT 并且需要帮助来修改此 XSLT 以更快地工作的地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T21:17:46.107

我认为这是一个难题。我没有看到任何明显的东西。使用多步骤构建是诀窍：我创建了 pass1.xsl 和 pass2.xsl，它们可以更快地创建输出*树*。

我制作了一个树大小为 252097 个节点（697768 个字符）的测试文件。您的 XSL 用了 21 秒，而下面的两个 xsls 用了几秒钟。

## 通过 1 个 XSL

```
<xsl:stylesheet version="2.0" xmlns:p0="urn:sobject.partner.soap.sforce.com" 
    xmlns:csv="csv:csv" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output encoding="utf-8"  method="xml" indent="no"/>
    <xsl:strip-space elements="*" />
    <xsl:variable name="delimiter" select="','"/>

    <xsl:variable name="allFields">
        <xsl:for-each select="distinct-values( /*/*/*/name() )">
            <xsl:element name="{.}" />
        </xsl:for-each>    
    </xsl:variable>

    <xsl:template match="p0:sObjects">
        <xsl:element name="{local-name(.)}" namespace="urn:sobject.partner.soap.sforce.com">
            <xsl:element name="order" namespace="urn:sobject.partner.soap.sforce.com">
                <xsl:for-each select="$allFields/*">
                    <xsl:value-of select="name()" />
                    <xsl:if test="position() &lt; last()">
                        <xsl:value-of select="$delimiter" />
                    </xsl:if>
                </xsl:for-each>
            </xsl:element>

            <xsl:apply-templates select="/*/p0:sObject" />
        </xsl:element>
    </xsl:template>

    <xsl:template match="p0:sObject">
        <xsl:variable name="this" select="." />
        <xsl:element name="{local-name(.)}" namespace="urn:sobject.partner.soap.sforce.com">
            <xsl:for-each select="$allFields/*">
                <xsl:element name="{local-name(.)}" namespace="urn:sobject.partner.soap.sforce.com">
                    <xsl:value-of select="$this/*[name() = name(current())]" />
                </xsl:element>
            </xsl:for-each>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

## 通过 2 XSL

```
<xsl:stylesheet version="2.0" xmlns:p0="urn:sobject.partner.soap.sforce.com" 
    xmlns:csv="csv:csv" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output encoding="utf-8"  method="xml" indent="no"/>
    <xsl:strip-space elements="*" />
    <xsl:variable name="delimiter" select="','"/>

    <xsl:template match="/">
        <xsl:element name="csv" namespace="http://www.approuter.com/schemas/RootNode">
            <xsl:element name="data" namespace="http://www.approuter.com/schemas/RootNode">
                <xsl:apply-templates select="/p0:sObjects/*" />
            </xsl:element>
        </xsl:element>
    </xsl:template>

    <xsl:template match="p0:order">
        <xsl:value-of select="." /> 
    </xsl:template>

    <!-- use Michael's suggestion about using first instead of last() -->
    <xsl:template match="p0:sObject/*[ position() = 1 ]">
        <xsl:text>&#xa;    </xsl:text>
        <xsl:value-of select="." />
    </xsl:template>

    <xsl:template match="p0:sObject/*[ position() > 1 ]">
        <xsl:value-of select="$delimiter" />
        <xsl:value-of select="." />
    </xsl:template>
</xsl:stylesheet> 
```

## 通过 1 个输出

这是第 1 步的输出 xml。这将创建一个如下所示的 xml（对于下一阶段来说更容易解析。查看 sObject 下的新空元素吗？）：

```
<sObjects xmlns="urn:sobject.partner.soap.sforce.com">
   <order>Name,BillingStreet,age,location,shipping,Id,date,accountNo</order>
   <sObject>
      <Name>Raagu</Name>
      <BillingStreet>Hoskote</BillingStreet>
      <age/>
      <location/>
      <shipping/>
      <Id/>
      <date/>
      <accountNo/>
   </sObject>
</xObjects> 
```

## 最后，结果：

```
<csv xmlns="http://www.approuter.com/schemas/RootNode"><data>Name,BillingStreet,age,location,shipping,Id,date,accountNo
    Raagu,Hoskote,,,,,,
    Rajath,BTM,25,,,,,
... 
```

我执行的命令：

```
saxonb-xslt -t bigxml.xml pass1.xsl > intermediate.xml
saxonb-xslt -t intermediate.xml pass2.xsl > res.xml 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T21:38:37.713

一些建议：

1.  如果您使用的是 XSLT 2.0 处理器，请不要设置 version="1.0"。这使它在向后兼容模式下运行，这涉及更多的运行时检查。

2.  这种代码在您的样式表中出现三次

    ```
    <xsl:for-each select="$allFields">
        <xsl:value-of select="name()" />
        <xsl:if test="position() &lt; last()">
            <xsl:value-of select="$delimiter" />
        </xsl:if>
    </xsl:for-each> 
    ```

    如果 position()!=1，而不是在 item()!=last() 后插入分隔符，总是会更好。这是因为 last() 是一项涉及前瞻的昂贵操作。不过，在像这样的简单情况下，整个事情都可以替换为

    ```
    <xsl:value-of select="$allFields/name()" separator="{$delimiter}"/> 
    ```

3.  如果你只打算使用一次，那么定义一个键是没有意义的。查找唯一字段名称最好使用`distinct-values(/*/*/*/name())`.

但是，我真的看不出这需要 20 分钟的任何理由，而且我认为我没有确定真正的问题是什么。

# c# - 如何从未声明的类型中获取类和属性的名称和值

> ID：15231893
> 
> 赞同：1
> 
> 时间：2013-03-05T18:59:01.040
> 
> 标签：c#, asp.net, typeof, object-type

如果我有这两个类：

```
public class A
{
    public int Id { get; set; }
}

public class B
{
    public string Name { get; set; }
} 
```

我可以使用这样的通用方法：

```
public void InitMethod(object classProperty) 
```

像这样传入数据：

```
var a = new A() { Id = 1 };
var b = new B() { Name = "John" };

InitMethod(a.Id);
InitMethod(b.Name); 
```

并从方法中获取以下信息：

*   类名（例如：“A”、“B”）
*   属性名称（例如：“Id”、“Name”）
*   属性值（例如：1，“John”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:18:31.063

有点，虽然它可能比它的价值更麻烦。

ASP.Net MVC 经常使用表达式以强类型的方式获取属性信息。表达式不一定会被评估；相反，它被解析为它的元数据。

这不是 MVC 特有的。我提到它是为了引用 Microsoft 框架中的既定模式。

这是一个从表达式中获取属性名称和值的示例：

```
// the type being evaluated
public class Foo
{
    public string Bar {
        get;
        set;
    }
}

// method in an evaluator class
public TProperty EvaluateProperty<TProperty>( Expression<Func<Foo, TProperty>> expression ) {
    string propertyToGetName = ( (MemberExpression)expression.Body ).Member.Name;

    // do something with the property name

    // and/or evaluate the expression and get the value of the property
    return expression.Compile()( null );
} 
```

你这样称呼它（注意被传递的表达式）：

```
var foo = new Foo { Bar = "baz" };
string val = EvaluateProperty( o => foo.Bar );

foo = new Foo { Bar = "123456" };
val = EvaluateProperty( o => foo.Bar ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:18:59.623

在此示例中，您需要将对象传递给 InitMethod 而不是该对象的属性，也许它会没问题。

```
class Program
{
    static void Main(string[] args)
    {
        InitMethod(new A() { Id = 100 });
        InitMethod(new B() { Name = "Test Name" });

        Console.ReadLine();
    }

    public static void InitMethod(object obj)
    {
        if (obj != null)
        {
            Console.WriteLine("Class {0}", obj.GetType().Name);
            foreach (var p in obj.GetType().GetProperties())
            {
                Console.WriteLine("Property {0} type {1} value {2}", p.Name, p.GetValue(obj, null).GetType().Name, p.GetValue(obj, null));
            }
        }
    }
} 
```

# java - Java 内存泄漏总是会出现在老一代的消费中吗？

> ID：15231896
> 
> 赞同：1
> 
> 时间：2013-03-05T18:59:13.660
> 
> 标签：java, memory, memory-leaks, heap-memory, jmap

我一直在调试我被告知的“内存泄漏”，但是比较坏构建和好构建的旧 gen 图，它们看起来几乎相同。将其称为不是内存泄漏是否安全，还是我可能会遗漏其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:05:52.513

是的，你会期望它出现在老一代中，但我见过一些写得不好的代码会不断地破坏未使用的对象，然后从其他地方未清除的数据重新创建它们的情况。

最终结果是 Eden 中有很多东西，而且几乎没有超出永久内存或内存模型的更多静态部分。这导致了很多完整的 GC，但没有明显影响终身内存。

# asp.net - 使用 C# 在 asp.net 中动态添加文本框

> ID：15231897
> 
> 赞同：0
> 
> 时间：2013-03-05T18:59:14.790
> 
> 标签：asp.net, textbox, placeholder

我编写了一个代码，其中一个文本框被动态添加到一个 gridview 单元格中。文本框中有一些默认文本。我希望当用户单击文本框时，默认文本将消失，然后用户只能在其上写任何数字，即用户将无法使用字母或特殊字符。

请让我知道如何实现这一目标。代码示例

```
 Gridview gv=new Gridview();
    gv.DataSource=dt;
    gv.DataBind();

    Textbox t1 = new Textbox();
    t1.Text="Outages if any(in mins)";
    gv.Rows[0].Cells[0].Controls.Add(t1); 
```

在此之后需要帮助，例如当用户将光标放在文本框中时，默认文本将消失，如果用户在不写任何内容的情况下移除光标，则默认文本将重新出现。默认文本也应该有点模糊

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:22:49.313

尝试这样的事情

```
Textbox t1 = new Textbox();
t1.Attributes.Add("onclick", "if(this.value == 'default text') this.value = '';"
t1.Attributes.Add("onblur", "if(this.value == '') this.value = 'default text';" /> 
```

`onfocus`如果用户使用`tab`密钥，您也可以使用

有了这个，使用`this.value`, 方法你不需要知道控件的客户端 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:14:52.010

这是一篇准确描述您要做什么的帖子：

[HowTo：在执行服务器端验证时在文本框中包含默认文本](http://weblogs.asp.net/jasonsalas/archive/2004/09/30/235932.aspx)

相关点是：

1.  为 onfocus & 和 onblur 添加 javascript 属性：

    ```
    txtName.Attributes.Add("onfocus","clearText()"); 
    txtName.Attributes.Add("onblur","resetText()"); 
    ```

2.  添加 javascript 以清除并重新填充文本框：

    ```
     function clearText() { 
            document.form1.txtName.value = "" 
        } 

        function resetText() { 
            if(document.form1.txtName.value == "") 
                document.form1.txtName.value = "(enter something here)" 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:13:06.917

你可以这样做。最简单的方法是使用 ajaxControlToolkit。您可以动态创建控件。例如：

```
 Dim mt As new TextBox 
    Dim newTest As New AjaxControlToolkit.TextBoxWatermarkExtender

    With mt
        .ID = "textBox1"
        .TextMode = TextBoxMode.SingleLine
    End With

    With newTest
        .ID = "TextBoxWatermarkExtender1"
        .TargetControlID = mt.ClientID
        .WatermarkText = "test"

    End With 
```

然后就像您对文本框所做的那样，将这两个控件添加到 gridview 中。如果您不使用 Ajax，您可以通过代码隐藏将 javascript 添加到控件中，但这比较困难。让我知道这是否是你想要做的，我会添加一些代码来告诉你如何做。

这应该创建一个带有关联的 ajax TextBoxWaterMarkExtender 的文本框控件。

# android - 创建 App Engine 连接的 Android 项目失败

> ID：15231898
> 
> 赞同：3
> 
> 时间：2013-03-05T18:59:15.233
> 
> 标签：android, google-app-engine, google-plugin-eclipse

我正在尝试在 Eclipse 4.2(Juno) 上创建“App Engine Connected Android Project”，但面临 2 个错误：

1）创建新项目时出现第一个错误：

```
Creation of Element Failed.
Reason:
Unknown protocol : d 
```

然而，新的项目文件是在项目名称下的工作区中创建的。我已经为 Eclipse、ADT 和 Android 平台工具安装了最新的 Google 插件。在创建“Android 应用程序”项目时我没有遇到任何问题，但是在创建“App Engine Connected Android 项目”时，Eclipse 向我显示了这个错误。

2）我可以在工作区中看到新创建的项目文件，但是在 src 文件夹下的 MainActivity.java 文件中有一个错误说： `RegisterActivity cannot be resolved to a type`

我正在开发 Win7 Professional 64 位和 Eclipse 4.2（32 位）。

我忘记安装任何插件了吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:25:18.363

我有一个类似的问题。您可以做的是右键单击您的 android 项目，**Google > Generate AppEngine Backend**。AppEngine 项目将自动创建。

然后，在 AppEngine 项目上，您可以右键单击**Google > Generate Cloud Endpoint Client Library**以创建端点。如果仍然`RegisterActivity cannot be resolved to a type`出现错误，请将您的 java 编译器更改为 1.6。

它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:42:11.110

这不是一个真正的答案，但评论太长了。

我看到上面的一些评论表明用户不应该使用“App Engine Connected Android Project”。

这也是我的印象，但现在我不确定。它在文档中仍然很突出（最后一次更新是 2013 年 2 月 14 日），它没有说明被弃用，我发现8 月[的一篇文章](https://groups.google.com/forum/#!msg/google-plugin-eclipse/_op9guM5pf4/BArAH-d3TgEJ)说他们只是暂时删除了它，并将再次添加它（使用 GCM支持）。

看来他们为 Endpoints 和 GCM 更新了它，它仍然存在。它是创建 Android 项目然后使用“生成 AppEngine 后端”向导的替代方法。

# c# - c# application with c++ library System.IO.FileNotFoundException

> ID：15231902
> 
> 赞同：2
> 
> 时间：2013-03-05T18:59:27.760
> 
> 标签：c#, c++, winforms, dll

我在处理一个非常困难的 dll 时遇到了麻烦。我正在使用侧 dll 使我的 Windows 窗体应用程序与网络摄像头一起使用。应用程序在装有 VS2012 的 PC 上和装有 VS2012 的笔记本电脑上运行良好，但在虚拟机上运行的 Windows XP 上根本无法运行。
我收到 JIT 消息

```
System.IO.FileNotFoundException: Could not load file or assembly '---, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified. 
```

为了防止出现很多问题，我会回答自己：
**是**的，dll 确实使用 .exe 复制到目录
**是的，**我确实将它部署为“发布”
**是的，**我确实将应用程序编译为 x86 目标平台
**是的，**我确实将 dll 编译为 x86 目标平台
**是的，**我确实安装了 vcRedist 所有版本以针对 Windows XP
**是的，**我确实安装了从 3.0 到 4.0 的 .NET 以针对 Windows XP

我只是不知道为什么我的带有 Visual Studio 的计算机可以使用该 dll，但 XP 不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:05:58.417

[Dependency Walker](http://www.dependencywalker.com/)将是用于找出您的 DLL 中缺少哪个依赖项并因此阻止 XP 加载它的工具。

您是否使用“v110_xp”工具集（Visual Studio 2012 - Windows XP 工具集随更新 1）构建了本机 C++ DLL？如果你没有，那就是你的问题。默认情况下，使用普通 v110 编译器配置在 VS2012 中构建的 C++ 代码会生成一个无法在 Windows XP 上运行但需要 Vista 或更高版本的可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:08:00.247

请注意“或其依赖项之一”短语...这可能是您的问题，而不是它自己的 dll

您的 dll 可能正在调用某些 api 或使用 XP 中不可用的 dll。

[Dependency walker](http://www.dependencywalker.com/)是你的朋友

# android - Android - 如何提高复杂动态 UI 的性能

> ID：15231903
> 
> 赞同：1
> 
> 时间：2013-03-05T18:59:30.997
> 
> 标签：android, performance, dynamic, user-interface

我有一个相对复杂的嵌套线性布局和文本视图设置，它们都是在运行时根据用户偏好创建的。

问题是启动应用程序需要大约五秒钟（智能手机时间的永恒）。

![在此处输入图像描述](../Images/faceb49dbbc429a5c19c6ec233b3db1f.png)

[这是设置图。](https://imgur.com/qgyZUsB)我在滚动视图中有大约 30 个红色线性布局，每个布局都包含 2 到 30 个紫色文本视图，它们包裹在 1 到 6 个橙色线性布局中。

我可以做些什么来加快这个 UI 的加载，或者保存它，以便当用户退出并重新打开应用程序时，它不必重新生成所有内容？

谢谢你。

我的代码在下面，它利用了[这篇文章中的 populateLinks 函数。](https://stackoverflow.com/questions/2961777/android-linearlayout-horizontal-with-wrapping-children/2968227#2968227)

```
public void displayUnits(){
    LinearLayout ll = new LinearLayout(MainActivity.this);
    ll = (LinearLayout) findViewById(R.id.fromunitslayout);

    if (ll.getChildCount() > 3) {
        ll.removeViewsInLayout(2,ll.getChildCount()-2);
    }

    fromunitlls = new ArrayList<LinearLayout>();
    fromunitlls.clear();

    int colorcount = 0;

    for (int utcount = 0; utcount < unittypes.size(); utcount++) {
        UnitType currenttype = null;
        for (int typecount = 0; typecount < unittypes.size(); typecount++) {
            if (unittypes.get(typecount).getOrder() == utcount) {
                currenttype = unittypes.get(typecount);
                Log.v("unittype disp", String.valueOf(unittypes.indexOf(currenttype)));             
            }
        }
        if (currenttype.getHidden() && !showallunits) {
            continue;
        }
        for (int unitcount = 0; unitcount < ft.size(); unitcount++) {
            if (ft.get(unitcount).getType().getID() == currenttype.getID()) {

                // Create and set up Red LLs
                LinearLayout llhorz = new LinearLayout(MainActivity.this);
                LinearLayout llvert = new LinearLayout(MainActivity.this);
                LinearLayout lllist = new LinearLayout(MainActivity.this);
                llhorz.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
                llhorz.setOrientation(LinearLayout.HORIZONTAL);
                llvert.setLayoutParams(new LayoutParams(140,LayoutParams.MATCH_PARENT));
                llvert.setOrientation(LinearLayout.VERTICAL);
                lllist.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
                lllist.setOrientation(LinearLayout.VERTICAL);

                if (colorcount % 2 != 0) {
                    llhorz.setBackgroundResource(R.color.DarkGreyT);
                }
                colorcount++;

                // Add Blue Text View to Vertical LL            
                AutoResizeTextViewSmall txtTypeName = new AutoResizeTextViewSmall(MainActivity.this);
                txtTypeName.setTag("unittype" + unittypes.indexOf(currenttype));
                txtTypeName.setPadding(5,0,5,0);
                txtTypeName.setText(currenttype.getName().toUpperCase().replace(" ","\n"));
                txtTypeName.setLayoutParams(new LayoutParams(140,LayoutParams.WRAP_CONTENT, Gravity.CENTER));
                txtTypeName.setTextSize(12);
                txtTypeName.setTypeface(Typeface.DEFAULT_BOLD);
                txtTypeName.setGravity(Gravity.CENTER);

                txtTypeName.setOnLongClickListener(new OnLongClickListener(){
                    public boolean onLongClick(View view){
                        String typenum = view.getTag().toString();
                        typenum = typenum.substring(8);
                        Log.v("typenum",typenum);
                        Intent intent = new Intent(MainActivity.this, CatSettingsActivity.class);
                        intent.putExtra("TYPENUMBER", Integer.parseInt(typenum));
                        startActivity(intent);
                        return false; 
                    }
                });
                llvert.addView(txtTypeName);
                fromunitlls.add(lllist);
                fromunitlls.get(fromunitlls.indexOf(lllist)).setId(unittypes.indexOf(currenttype));

                llhorz.addView(llvert);
                //llhorz.addView(txtTypeName);
                llhorz.addView(fromunitlls.get(fromunitlls.indexOf(lllist)));

                ll.addView(llhorz);

                txtTypeName.reSize();
                break;
            }
        }
    }

    // Call other function to populate red LLs with orange LLs and purple TVs
    for (int utcount = 0; utcount < unittypes.size(); utcount++) {
        if (unittypes.get(utcount).getHidden()) {
            continue;
        }
        for (int unitcount = 0; unitcount < ft.size(); unitcount++) {
            if (ft.get(unitcount).getType().getID() == unittypes.get(utcount).getID()) {
                populateLinks(unittypes.get(utcount), ft);
                break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:09:11.667

您可以尝试通过使用`RelativeLayout`而不是嵌套线性布局来减少布局数量。

# wpf - 如何在 PRISM CompositePresentationEvent 的发布者上调用回调操作？

> ID：15231905
> 
> 赞同：2
> 
> 时间：2013-03-05T18:59:40.163
> 
> 标签：wpf, prism, eventaggregator

是否可以在订阅者处理 PRISM CompositePresentationEvent 的发布者上调用回调操作？如果是，我该怎么做？

这是示例场景：

*   主页
*   左控制
*   右控制

LeftControl 发布一个事件，RightControl 订阅以对事件采取行动。完成右侧控件中的操作后，我想执行另一个函数来刷新左侧控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:08:18.313

没有内置的可能性这样做。但是，您可以为您的有效负载创建一个类，其中包含一个委托。然后，您可以从订阅了 CompositePresentationEvent 的方法中执行委托。

```
public class Payload
{
    // Whatever you need here
    ...

    public delegate void CallbackHandler();
    public CallbackHandler Callback { get; private set; }

    public Payload(CallbackHandler callback)
    {
        Callback = callback;
    }
} 
```

在发布者中创建有效负载：

```
var p = new Payload(SomeVoidFunctionOnPublisher); 
```

然后，在您处理订阅者中的事件后，引发回调：

```
public void HandleEvent(Payload p)
{
    // Do something first

    // Then callback
    p.Callback();
} 
```

**评论：**

CompositePresentationEvents 背后的主要思想是组件之间的解耦，这在某种程度上被回调所破坏，至少在概念上是这样。考虑重新设计您的底层架构，以避免完全需要回调。或者考虑一下，由“回调”订阅者引发的第二个事件是否合理。

# hl7 - HL7 CDA 合并文档向导

> ID：15231909
> 
> 赞同：3
> 
> 时间：2013-03-05T18:59:46.730
> 
> 标签：hl7, cda, hl7-cda

目前，我正在为一家拥有门诊和住院诊所的大型医院实施 HL7 CDA。为了减少平均咨询时间，咨询医生使用电子表格。表格必须彻底形式化（理想情况下需要最少的键盘输入）。

在实践中，最简单的正式咨询说明表格似乎包含不少于 40-50 个输入字段。

例如，普通耳鼻喉科医生的“体检”栏目包括以下子栏目：外鼻、内鼻、咽喉、喉、气管；请注意，鼻子是对称的，每个器官都可以用 10-15 个特征来描述——因此我有一个包含大约 100 个输入字段的输入表单。将 HL7 CDA 咨询说明规范定义的其他必需部分添加到此表格（访问原因、疾病史、问题、药物） - 您有大约 150 个字段。因此，我的 HL7 CDA 3 级文档正文应包含相同数量的 [观察] 元素。

在一个普通的住院病例中，医生最多可以登记 10-100 个文件。每个文档包含 20-100-200 个有意义的参数。总共：~10000 个参数。

在住院病例结束时，医生应创建一份摘要文件，该文件从之前登记的其他文件中收集数据。在这一点上，我觉得我误解了 HL7 CDA 规范。一个人不能轻易地操作 10000 个参数。您能否给我一个建议（或示例）关于如何设计符合人体工程学的用户表单，让医生创建一个简短的摘要文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:05:38.557

You're not misunderstanding the basic premise, but on the issue of providing a "human-readable display, don't try to associate independent display values for each tiny observation.

CDA allows you to provide `<text>` nodes as part of each segment, which are generally HTML data that will be displayed when read by a human being. For encounters with lots of observations, retain the parsed `observations` in the CDA, but each individual observation value should have a null `<text>` value (one that doesn't display to the provider). Instead, provide an HTML/readable version of all the observations in a higher-level parent node (so you'd have all of the observations about the "Nose" in a single HTML table stored inside the `<text>` node of the segment titled "`<title>Nose</title>`". Or - even better - you could even go to an even higher-level segment than this, and store a full HTML version of the entire observation section of the SOAP note along with the general practitioner's notes in the `<text>` node associated with the encounter `<section>`.

Long story short: formally retain all the values in the CDA, but consolidate all of these observations into a single human-readable display (HTML) in the `<text>` node of a higher level node. This will allow a nice-looking display for the provider, but retain all of the codified data for machines.

Have a look at [Blue Button Plus](http://bluebuttonplus.org/healthrecords.html) for some CDA examples that might make the whole issue a little clearer.

# maven - Eclipse Juno 的 Maven 插件 -> 在 .m2 下找不到 conf 目录

> ID：15231911
> 
> 赞同：0
> 
> 时间：2013-03-05T18:59:48.273
> 
> 标签：maven, tomcat, m2eclipse

我是 Maven 插件的新手。我已经从 eclipse MarketPlace 下载了最新的 eclipse juno 和 Maven 插件。我可以在 C:\Documents and Settings\usernam.m2 下看到 .m2 目录

我想配置 maven 插件以将 .war 文件部署到 tomcat。我在任何 Maven 功能/插件或 .m2 目录下都找不到 conf/settings.xml。

我是否需要手动下载 Maven，然后配置 eclipse 以使用这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:45:16.340

这是一篇关于[如何将基于 Maven 的战争文件部署到 Tomcat](http://www.mkyong.com/maven/how-to-deploy-maven-based-war-file-to-tomcat/)的博客，作者是[Mkyong](http://www.mkyong.com/author/mkyong/)。

通过概述，我们需要使用[tomcat-maven-plugin](http://tomcat.apache.org/maven-plugin.html)

### Tomcat 版本 6

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat6-maven-plugin</artifactId>
            <version>2.1</version>
            <configuration>
               ...
            </configuration>
    </plugin>
</build> 
```

### Tomcat 版本 7

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.1</version>
            <configuration>
               ...
            </configuration>
    </plugin>
</build> 
```

不仅如此，还需要将Tomcat安装到我们的机器上。

我希望这可能会有所帮助。

# shell - 更改默认 Eshell 目录

> ID：15231914
> 
> 赞同：1
> 
> 时间：2013-03-05T18:59:57.337
> 
> 标签：shell, emacs, eshell

自从我开始使用 git 来管理我的 .emacs 文件以来，我发现将所有内容保存在我的 ~/.emacs.d 目录中很有用。我想要 eshell，因此，在启动时阅读 ~/.emacs/eshell.el 而不是默认的 ~/.eshell 。

我认为这很简单，只需将 eshell-directory-name 变量更改为指向我想要的位置：

```
(setq eshell-directory-name '("~/.emacs.d/eshell")) 
```

但是，当我这样做时，我得到了错误：

```
call-interactively: Autoloading failed to define function eshell 
```

并且 eshell 无法加载。

更改此设置的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:29:24.363

尝试：

```
M-x customize-variable RET eshell-directory-name RET 
```

或者

```
(setq eshell-directory-name "~/.emacs.d/eshell") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T04:21:48.240

所以我想通了：错误消息与配置文件中的行无关，而是与配置文件的*名称*有关。

我将所有自定义 eshell 配置分离到一个名为 eshell.el 的文件中同名。所以将文件名更改为 my_ehsell.el 神奇地解决了这个问题。

至于定义该变量的正确方法，最好在这个问题中回答： [Common Lisp中`set`，`setq`和`setf`之间的区别？](https://stackoverflow.com/questions/869529/difference-between-set-setq-and-setf-in-common-lisp)

# javascript - javascript增量（超过++）样式属性

> ID：15231918
> 
> 赞同：2
> 
> 时间：2013-03-05T19:00:06.483
> 
> 标签：javascript, attributes, styles, increment

我在移动`div`标签时遇到了一些麻烦`onclick`。我可以让它移动一次，但是我不知道如何获取新变量并再次添加到它。

请不要 jquery，我现在并不担心跨平台

```
function addToMargin()  {

        var marginleft = 20;
        document.getElementById("show-sessions").style.marginLeft = marginleft + "px";
}

#show-sessions  {
        margin-left:10px;
        width:200px;
        overflow:hidden;
} 
```

我尝试设置一个全局变量来存储数字，但后来它变成了`NaN`

非常感谢任何帮助...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:03:13.897

```
function addToMargin()  {  
        var marginleft 
            = parseInt(document.getElementById("show-sessions").style.marginLeft) + 20;
        document.getElementById("show-sessions").style.marginLeft = marginleft + "px";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T19:05:31.330

全局变量的事情不是一个坏主意，尝试这样的事情：

```
var margin = 20;
function addToMargin()  {
        margin ++; //or += value
        document.getElementById("show-sessions").style.marginLeft = margin + "px";
} 
```

我也可能会提供初始边距作为内联样式，以防万一......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:10:25.887

我对未来参​​考和研究的贡献：

```
function addToLeft()  {  
    var left 
        = document.getElementById("show-sessions").clientLeft + 20;
    document.getElementById("show-sessions").style.Left = left + "px"; 
```

}

注意1：这改变了左边的位置，而不是marginleft。

注意2：返回值是 int 而不是 string。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:11:11.070

您的变量 marginLeft 将保持 20，这就是它移动一次的原因。您是否可能没有尝试实现这样的目标：

```
var marginLeft = 20;
var tot = document.getElementById("show-sessions").style.marginLeft;
document.getElementById("show-sessions").style.marginLeft = (tot + marginLeft) + "px" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T19:41:08.783

您可以使用该`window.getComputedStyle()`方法。并且可能制作一个可重用的函数以获得更好的抽象。就像是：

```
function move(el, val) {
    var style = window.getComputedStyle(el);
    el.style.marginLeft = parseInt(style.marginLeft) + val + "px";
}

window.onload = function () {
    document.getElementById("show-sessions").onclick = function (e) {
        move(this, 20);
    };
}; 
```

[JSFiddle](http://jsfiddle.net/LvUn9/2/)上的示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T19:04:32.003

```
function addToMargin(value)  {
    var element = document.getElementById("show-sessions");
    var marginleft = parseInt(element.style.marginLeft.replace('px', ''));
    element.style.marginLeft = (marginleft + value) + "px";
} 
```

# ios - 我的自定义委托不起作用

> ID：15231920
> 
> 赞同：0
> 
> 时间：2013-03-05T19:00:12.627
> 
> 标签：ios, objective-c, delegates

我在两个类之间使用委托，以便在有任何更新或需要添加对象时得到通知。第一个类是 UITableViewController 的子类，第二个是 UIViewController 的子类。第一个类有一个加号（addButton）来将对象添加到它的表视图中。第二类是按下添加按钮时第一个导航到的视图。所以在视图控制器类中，我在 .h 文件中添加了一个协议：

```
@protocol ViewControllerDelegate <NSObject>

- (void) addViewControllerDelegate:(ViewController *)controller didUpdateEvent:(Event *) event;

@end 
```

我添加了一个代表@propety：

```
@property (weak, nonatomic) id <SSAddViewControllerDelegate> delegate; 
```

在 .m 文件中，在按下保存按钮时触发的 IBAction 方法中添加了以下内容：

```
[self.delegate addViewControllerDelegate:self didUpdateEvent: event]; 
```

现在回到表视图控制器类，在我添加的 .h 文件和 .m 文件中我添加了以下方法：

```
- (void) addViewControllerDelegate:(ViewController *)controller didUpdatEvent:(Event *)event{
    [self saveNewEntry:event];
    NSLog(@"DELEGATE");
} 
```

问题：它不工作。虽然我想我做了所有应该做的事情。

注意：我在这里更改了类的名称，所以不，我没有名为 ViewController 的类。saveNewEntry 用于将事件对象添加到我的数组中，并且 nslog 在那里，以便知道它是否确实进入了方法。

//------------------------------------ 更多实际代码---------- ------------------- 第二类（视图控制器）.h 和 .m 分别

```
@class Course;
@class SSAddViewController;

@protocol SSAddViewControllerDelegate;

@interface SSAddViewController : UIViewController <UITextFieldDelegate>
@property (nonatomic, retain) NSManagedObjectContext *managedObjectContext;
@property (weak, nonatomic) id <SSAddViewControllerDelegate> delegate;
@end

@protocol SSAddViewControllerDelegate <NSObject>

- (void) addViewControllerDelegate:(SSAddViewController *)controller didUpdateCourse:(Course *) course;

@end
@class Course;
@class SSAddViewController;

@protocol SSAddViewControllerDelegate;

@interface SSAddViewController : UIViewController <UITextFieldDelegate>
@property (nonatomic, retain) NSManagedObjectContext *managedObjectContext;
@property (weak, nonatomic) id <SSAddViewControllerDelegate> delegate;
@end

@protocol SSAddViewControllerDelegate <NSObject>

- (void) addViewControllerDelegate:(SSAddViewController *)controller didUpdateCourse:(Course *) course;

@end

- (void) saveNewEntry
{
    SSAppDelegate *appDelegate = [UIApplication sharedApplication].delegate;
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    Course *course = (Course *) [NSEntityDescription insertNewObjectForEntityForName:@"Course" inManagedObjectContext:context];
    NSLog(@"YES");
    [course setCourseName:self.nameTextField.text];
    [course setCourseCredits:[NSNumber numberWithInt:[self.creditstextField.text intValue]]];
    [course setCourseChapters:[NSNumber numberWithInt:[self.chaptersTextField.text intValue]]];

    if (hasChanges) {
        [self.delegate addViewControllerDelegate:self didUpdateCourse:course];
    }
} 
```

第一类（表视图）.h 和 .m 分别：

```
@interface SSCoursesViewController : UITableViewController <SSAddViewControllerDelegate>

- (void) addViewControllerDelegate:(SSAddViewController *)controller didUpdateCourse:(Course *)course{
    [self saveNewEntry:course];
    NSLog(@"DELEGATE");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:07:14.037

您的 SSAddViewController 是在哪里创建的？您是使用 segue 作为故事板的一部分还是直接创建它？

如果您使用的是 segue，则需要在您的 SSCoursesViewController 中实现 prepareForSeque

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    SSAddViewController *ssavc = (SSAddViewController *)[segue destinationViewController];

    ssavc.delegate = self;

} 
```

如果是直接创建 SSAddViewController，可以直接设置。

我现在没有坐在我的 Mac 前，但上面的代码大致正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:02:55.873

你真的在你的代码中设置了`SSAddViewControllerDelegate = self;`吗？

# c# - 如何不使用 microsoft.office.interop.word 保存文档

> ID：15231923
> 
> 赞同：6
> 
> 时间：2013-03-05T19:00:29.913
> 
> 标签：c#, ms-word, office-interop

只是想知道是否有人知道在使用 Microsoft.Office.Interop.Word 时如何在创建后不保存文档。

基本上我正在使用邮件合并从 c# 打印报告，制作文档，将值传递给它没有问题，然后我可以毫无问题地打印它，但是，我只需要打印文档，我不需要在计算机上保存副本。

将所有值传递给文档后，我使用以下代码打印并关闭文档：

```
wordDoc.PrintOut();
wordDoc.Close();
wordApp.Application.Quit(); 
```

但是，这会打印文档，然后会弹出“保存”对话框，询问将文档保存在哪里。我不希望这样，因为单击取消会产生错误（并且需要用户进行另一次不需要的交互），并且我不需要保存文件。

有任何想法吗？

使用 Visual Studio 2012、.NET 4.0，并且我尝试使用以下文件类型作为办公文档：.doc、.dot、.docx、.dotx。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T19:27:23.573

您可以将`SaveChanges`参数传递给跳过保存部分`wdDoNotSaveChanges`的方法。`Close`

看一下：

[如何关闭正在运行的 Word 文档实例？（C＃）](https://stackoverflow.com/questions/7445831/how-to-close-a-running-instance-of-word-document-c)

[MSDN 参考](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._document.close%28v=office.14%29.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-03T01:03:53.620

我知道这是对 Johns 问题的一个非常晚的回复，但我还需要在不显示保存对话框的情况下关闭已编辑的文档。

我发现这种方法对我来说非常有效：

```
// Tells the application not to save changes    
((_Application)wordDoc.Application).Quit(false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T19:24:43.893

如何抑制警报？

```
Word.Application word = new Word.Application();
word.DisplayAlerts = Microsoft.Office.Interop.Word.WdAlertLevel.wdAlertsNone; 
```

# mysql - 通过 SELECT DISTINCT 插入但跳过唯一字段

> ID：15231925
> 
> 赞同：0
> 
> 时间：2013-03-05T19:00:33.717
> 
> 标签：mysql

我正在尝试通过 select 语句插入值，但我想跳过源表中的一些重复行。下面查询的 SELECT 部分生成我要插入的行。唯一的障碍是我不想插入我正在区分的值。如何利用 DISTINCT 但不插入该值？

```
INSERT INTO
    table_dest (field1, field2)
SELECT
    DISTINCT(table_src.id),  -- Don't insert this value!
    table_src.field1,
    table_src.field2
FROM table_src 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:01:59.940

改用`GROUP BY`：

```
SELECT
    table_src.field1,
    table_src.field2
FROM table_src
GROUP BY table_src.id 
```

# debian - APT 如何决定查看哪些“二进制”目录？

> ID：15231926
> 
> 赞同：4
> 
> 时间：2013-03-05T19:00:34.997
> 
> 标签：debian, raspberry-pi, apt, raspbian

使用 Raspberry Pi，我试图通过添加没有“binary-armhf”文件夹的 puppetlabs 存储库来使用比提供的 2.7 更新版本的 puppet。（对于非 Raspbian 用户 - Raspbian 是基于 wheezy 的。）这个存储库的结构如下：

*   分布
    *   耐寒
        *   ...
    *   ...
    *   喘不过气来
        *   依赖关系
            *   ...
        *   主要的
            *   二进制
            *   二进制amd64
            *   二进制 i386
            *   来源

我的期望是 APT 应该在看到没有`main/binary-armhf`目录（在`wheezy/Release`文件中）后，退回到`main/binary-all`; 相反，`apt-get update`打印错误

```
W: Failed to fetch http://apt.puppetlabs.com/dists/wheezy/Release  Unable to find expected entry 'main/binary-armhf/Packages' in Release file (Wrong sources.list entry or malformed file) 
```

并且`apt-cache madison puppet`不显示任何可从 apt.puppetlabs.com 安装的二进制包（仅源代码）。

通过检查从默认存储库正确安装的其他软件包，该平台上的 apt 似乎接受“全部”作为恰好在`binary-armhf/Packages`文件中列出的软件包的架构；但是，在寻找`Packages(.gz)`下载时，它似乎不接受“全部”作为架构。

对于实际问题：

1.  是否有任何客户实际上认为他们自己的架构是“全部”？
2.  有没有办法配置 APT 来`main/binary-all`检查`main/binary-$native_arch`？编辑：有（使用`deb [arch=all]`in sources.list）-但不清楚这是否总是安全的。（例如，如果你说`[arch=i386]`，它是否会让你的系统认为它可以安装`i386`包，还是只会获取包列表？）。
3.  如果上述答案都不是肯定的，那么`main/binary-all`没有客户端实际获取的版本的预期效用是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:14:15.153

Apt 只打印警告 ( `W:`)，而不是错误。该`Release`文件仅包含其他索引文件的校验和。`binary-all`适用于与体系结构无关的软件包，例如用 perl 或 python 编写的软件包。

我想`Packages`文件应该正确地指定在哪里寻找二进制包。我已经破解了它，并且`puppet`包似乎在`binary-all/Packages`文件中指定。但主要问题可能是 aptitude 不允许您使用存储库中不了解您的架构的任何包。也许空文件+在文件中`binary/arm-hf/Packages`提及就足够了。在此之前，您必须手动下载文件并使用.`arm-hf``Architectures: i386 amd64 all``Release``.deb``dpkg -i`

现在您的 3 个问题：我会说默认情况下没有客户端具有“全部”架构。APT 也会检查“binary-all”目录，但如果没有知道其架构的存储库，它可能无法生存。说到这一点，解决方法`[arch=all]`应该有效，但除了“全部”之外，我不会尝试任何其他方法。

这是一份关于 debian 存储库格式的文档[Debian Repository Format](http://wiki.debian.org/RepositoryFormat)。

# c++ - gluLookAt() 对最小参数大小有限制吗？

> ID：15231927
> 
> 赞同：1
> 
> 时间：2013-03-05T19:00:35.440
> 
> 标签：c++, opengl, glulookat

我有一个 OpenGL 程序，当我调用它时它可以工作：

`gluLookAt(0.1,0.1,0.1, 0,0,0, 0,0.1,0);`

...但不是当我这样称呼时：

`gluLookAt(0.01,0.01,0.01, 0,0,0, 0,0.01,0);`

（在后一种情况下，会出现空白屏幕。）

gluLookAt 是否有最小/最大浮点参数大小？

绘制是围绕原点完成的，半径约为 10-6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:13:07.670

检查 gluPerspective 的最小绘制距离的值：

`gluPerspective(45.0, (double)window.GetWidth() / (double)window.GetHeight(), 0.1d, 2000.0d);`

这行不通，因为一切都在 0.1 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:14:23.847

`gluLookAt`应该可以很好地处理您的论点。但是，您正在更改相机位置（如@sftrabbit 所说）。您的新位置可能离对象太近而无法看到它。

您应该检查透视矩阵设置中的近平面距离（可能是您的`gluPerspective()`电话？）。

# database - 是否值得索引 day_of_week 列？

> ID：15231931
> 
> 赞同：4
> 
> 时间：2013-03-05T19:00:42.987
> 
> 标签：database, performance, postgresql, indexing

我有一个包含 day_of_week 列的用户表，它是一个整数（0...6）。每天我都必须运行一个脚本并遍历当天的用户。

那么，我应该用索引标记此列以获得更快的性能吗？查询总是会返回总数的1/7，如果我添加索引，恐怕会出现相反的效果。想象一下 users 表中有 10k-100k 行。

顺便说一句，如果重要的话，我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T19:02:35.963

不。不要索引它，因为它的[基数](http://en.wikipedia.org/wiki/Cardinality_%28SQL_statements%29)非常低，所以直接表扫描更便宜。只有对结果集进行排序才值得。但这将取决于其他因素。

当一个值出现在表的总行数的百分之几中时，对它的查询过滤将不得不在索引中找到它们后访问表的大部分[页面。](http://www.postgresql.org/docs/current/interactive/storage-page-layout.html)所以首先搜索索引是没有意义的，因为这只是双重工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:28:19.350

作为一般的经验法则，如果查询将拉动超过大约 5% 的表，则索引没有太大意义。但是根据表的属性，还有其他事情需要研究。例如，在 Postgres 中，看看[partitioning](http://www.postgresql.org/docs/9.1/static/ddl-partitioning.html)。

> 分区是指将逻辑上是一张大表拆分为较小的物理块。分区可以提供几个好处：
> 
> 在某些情况下，查询性能可以显着提高，特别是当表的大部分访问量很大的行位于单个分区或少数分区中时。分区替代了索引的前导列，减少了索引大小，并使索引的大量使用部分更有可能适合内存。
> 
> 当查询或更新访问单个分区的大部分时，可以通过利用该分区的顺序扫描而不是使用分散在整个表中的索引和随机访问读取来提高性能。
> 
> 如果在分区设计中计划了该要求，则可以通过添加或删除分区来完成批量加载和删除。ALTER TABLE NO INHERIT 和 DROP TABLE 都比批量操作快得多。这些命令还完全避免了由批量 DELETE 引起的 VACUUM 开销。
> 
> 很少使用的数据可以迁移到更便宜、更慢的存储介质上。

或者说数据永远不会更新，只插入追加。位图索引之类的东西可能有意义。

# testing - 如何将参数发送到 FactoryGirl 特征？

> ID：15231934
> 
> 赞同：8
> 
> 时间：2013-03-05T19:00:53.427
> 
> 标签：testing, rspec, factory-bot

我正在编写一些测试，这些测试调用具有 after_create 特征的 FG 创建，创建关联对象。有没有办法在我制作 FG 时向相关产品发送参数，或者我需要在之后设置它们吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-26T14:08:46.603

在忽略中添加该参数：

```
FactoryGirl.define do
  trait :my_trait do
    ignore do
      associated_attributes nil
    end

    after_create do |object, evaluator|
      # Use the ignored associated_attributes when creating the associated object
      associated_object = AssociatedModel.new(evaluator.associated_attributes)
    end
  end
end 
```

这个页面还有[很多技巧](http://arjanvandergaag.nl/blog/factory_girl_tips.html)

# matlab - 如何（在 matlab/simulink 中）将八位字节串转换为一个短的双精度数组？

> ID：15231935
> 
> 赞同：0
> 
> 时间：2013-03-05T19:01:06.177
> 
> 标签：matlab, type-conversion, simulink

我想将一个八进制字符串转换为一个短的双精度数组。挑战是将两个以上的字符压缩为双精度值。一个字符很简单（只需使用字符的值并将其转换为双精度）。所以一个 'a' 可以转换为 '97.0' 。两个字符也可以很简单。'ab' 可以转换为 '97.98'。但是两个如何将三个字符转换为双精度？请考虑 matlab 中的舍入。

我想这样做的原因是所有数据都需要发送到另一个只接受双打的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:35:45.277

双精度使用 8 字节 = 64 位。
一个 ASCII 字符使用 1 个字节，但典型的 ASCII 编码只使用前 7 位。

因此，如果我们将自己限制为标准 ASCII 字符（在 1 - 127 范围内），我们应该能够将 9 个字符放入每个双精度字符中，因为 7*9=63<64。

（我们甚至还有 1 位可用，我们可以在每组 7 个双精度中加入另一个字符，但我将忽略优化。我们也忽略了任何关于 unicode 的讨论，但这适用于许多应用程序。 )

有几个 Matlab 命令需要注意：

1.  typecast：在不修改底层位的情况下执行类型转换。我们将使用它从`double`to/from转换`uint64`。

2.  bitshift：对整数数据类型执行位移。也可以使数据饱和，只保留最低的 N 位。

3.  bitor：执行顾名思义.. 对无符号整数进行位级 OR 运算。

然后，经过一些实验，我们可以取一些字符串：

```
strIn = 'How much wood could a woodchuck chuck if a woodchuck could chuck wood?'; 
```

然后我们可以使用以下循环将其编码为`asDouble`数组（通过）：`asUint64`

```
%Convert into doubles.  9 characters per double, 7 bits each.
asUint64 = zeros(1,ceil(length(strIn)/9),'uint64');
for ixChar = 1:length(strIn);
    ixUint64 = ceil(ixChar/9);  %Which uint64 are we writing to?
    ix7Group = mod(ixChar, 9);  %Which 7-bit piece are we writing to?

    %Create the encoded value
    curChar = strIn(ixChar);
    encoded = bitshift(uint64(curChar), ix7Group*7);

    %OR it into the current uint64
    asUint64(ixUint64) = bitor(asUint64(ixUint64), encoded);
end
asDouble = typecast(asUint64,'double'); 
```

我们可以使用非常相似的循环将其转换回来

```
 %Convert back to str
strOut = char(zeros(1,length(asDouble)*9));

asUint64Out =  typecast(asDouble,'uint64');
for ixChar = 1:length(strOut);
    ixUint64 = ceil(ixChar/9);    %Which uint64 are we reading from?
    ix7Group = mod(ixChar, 9);    %Which 7-bit piece are we reading from?

    %Use bitshift to get only the desired bits
    encodedOut = bitshift(asUint64Out(ixUint64), -ix7Group*7, 7);

    %Cast to a char and store
    strOut(ixChar) = char(encodedOut);
end
%Strip unset characters
strOut(strOut==0)=[]; 
```

对于它的价值，`asDouble`数组如下，但此时以十进制考虑它是非常危险的：

```
>> asDouble'
     5.56929305361178e+196
     6.06383983172222e+259
     8.04093567858749e+177
     3.37314706618397e+259
     2.82456187483837e+266
     1.79945353109827e-150
      3.3731457960492e+259
     2.81037121975641e-306 
```

由于二进制是一种更好的思考方式：

```
0110100011000111110101110110101000001110111110111110010000100000
0111010111011111100011010000011001001101111110111111101111101100
0110010011011111101111111011101000001100001010000011001001100011
0111010111010001100011010000011010111100011111010111010001100011
0111011101000001100001010000011001101101001010000011010111101111
0010000011010111100011111010111010001100011110010011011111100011
0111010111010001100011010000011001001101100111010111011111100011
0000000001111111100100110111111011111110111010000011010110000000 
```

# git - 同时使用heroku和github

> ID：15231937
> 
> 赞同：69
> 
> 时间：2013-03-05T19:01:14.577
> 
> 标签：git, heroku, github

所以我知道 heroku 用作 git 存储库，但假设我想使用 github 以及存储库。如何设置它以使我有两个存储库并且两者都同步？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-03-05T19:05:27.990

您可以在 git 安装上拥有多个遥控器。你会有一个 github 遥控器和一个 heroku 遥控器。

假设您已经设置了 github，那么您可能会通过以下方式推送到 github：

`git push origin master`

`origin`是你的遥控器，`master`是你的分支。

按照[开始使用 Heroku](https://devcenter.heroku.com/articles/quickstart)的说明选择您想要的语言并继续完成教程。本教程假设您已经安装了 github，并将向您展示如何创建您的`heroku`远程通过`heroku create`.

然后你像往常一样推送到 github，并通过以下方式推送到 heroku：

`git push heroku master`

相同的格式适用 -`heroku`是您的遥控器，`master`也是您的分支。您没有在此处覆盖您的 Github 远程，而是添加了另一个，因此您仍然可以通过一个提交使用工作流程进行两次推送，例如：

```
git add .
git commit -m "Going to push to Heroku and Git"
git push origin master -- push to Github Master branch
git push heroku master -- push to Heroku 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-04-02T21:38:39.450

## If you want to be able to push and pull to multiple remotes:

First add them:

```
git remote add origin <github repo>
git remote add heroku git@heroku.com:<app name>.git 
```

Then `push`

```
git push origin master
git push heroku master 
```

### If you want to push to both remotes at the same time:

Edit you configuration file so `origin` points to both heroku and github:

```
git config -e 
```

Add/Replace:

```
[remote "origin"]
    url = git@github.com:username/somerepo.git
    url = ssh://git@bitbucket.org/username/somerepo.git 
```

Since you are using github you can integrate with heroku by navigating to:

```
https://dashboard.heroku.com/apps/<app name>/settings#github-repo 
```

and adding your repository's name.

![github integration](../Images/e0dc008ede0a252bda98b51f6c5e9757.png)

## If you want to automatically push to heroku after committing to GitHub:

you will need to use a continuous integration platform like [TravisCI](http://travis-ci.org).

[Here are the steps to make this work.](http://docs.travis-ci.com/user/deployment/heroku/) Be careful what you push to production, make sure it works before it gets deployed. Each method has its pros and cons.

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-03-05T19:04:29.443

我认为这实际上是推荐的情况；Heroku git 存储库功能实际上是用于部署而不是代码管理。

只需像往常一样使用 github 管理您的代码，但在准备好部署时另外推送到 Heroku git 存储库。无需将它们与自动化工具等保持同步，因为您希望能够在不部署的情况下推送到您的 github 存储库，例如，以便您可以备份或协作处理未完成的功能或维护单独的暂存和生产环境.

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-03-05T19:07:27.893

我经常这样做。我为 Heroku 创建了一个站点，但我想将我的源代码保存在 Github 中以用于存档目的。我设置为遥控器：

`git remote add origin <github repo>`

和

`git remote add heroku <heroku repo>`

`git push origin master`然后你就可以了`git push heroku master`。Heroku 还允许您关联 github 存储库以查看提交差异。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-05-17T14:08:23.587

因为之前没有人提到过。Git 现在允许您向每个遥控器添加多个 url。这样做：

这将添加`fetch`和`push`来自github：

```
git remote add origin git@github.com:yourName/yourGithubRepo.git 
```

`github push`这将覆盖`heroku push`：

```
git remote set-url origin --push --add git@heroku.com:yourHerokuRepo.git 
```

这将重新添加`github push`：

```
git remote set-url origin --push --add git@github.com:yourName/yourGithubRepo.git 
```

这是最终的输出：

```
$ git remote -v
origin  git@github.com:yourName/yourGithubRepo.git (fetch)
origin  git@heroku.com:yourHerokuRepo.git (push)
origin  git@github.com:yourName/yourGithubRepo.git (push) 
```

之后运行：

```
git push 
```

如果它不是在工作，而是在说关于设置上游，那么首先输入：

```
git push --set-upstream origin master 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-06-05T19:49:58.397

如果您不想管理两个存储库并且只管理 Github 上的一个，那么您可以这样做（假设您已经创建了一个 Heroku 应用程序）。

1) 首先，将 Heroku 存储库克隆到本地。

2）然后创建一个 Github repo 并将这个本地推送到那里。

3) 完成后，使用[wercker](http://wercker.com/)

4) 转到“添加应用程序”并填写详细信息。它们相当简单。使用您刚刚创建的 Github 存储库。

5）添加应用程序后转到设置并添加部署目标。从列表中选择 heroku。然后选择您之前创建的 Heroku 应用程序和您想要推送的分支。

而已！你完成了。现在您的 Github 存储库已与您的 Heroku 应用程序同步。您使用的任何推送到 Github 存储库的内容

```
git push origin master 
```

将自动部署到您的 Heroku 应用程序。这样，您就可以在 Github 上管理您的存储库，并且您只需处理一个存储库。:)

# css - 有没有办法创建一个带有内部阴影的工具提示（没有额外的 div）

> ID：15231941
> 
> 赞同：1
> 
> 时间：2013-03-05T19:01:30.490
> 
> 标签：css

我们知道如何创建工具提示，例如：

```
div{
    width: 200px;
    height: 200px; 
    background: red;
    margin: 80px;
    border-radius: 20px;
    position: relative;
    box-shadow: inset 2px 2px 15px black; //this is the problem
}
div:before{
    content: ' ';
    display:block;
    width: 0;
    border-left: red 30px solid;    
    border-right: transparent 30px solid;
    border-bottom: transparent 30px solid;
    border-top: transparent  30px solid;
    position:absolute;
    top: 60px; right: -60px;
} 
```

上面的代码设置了 div 的内阴影，而不是 sudo 元素的内阴影，这里是[演示](http://dabblet.com/gist/5092805)。有没有办法让内部阴影在 sudo 元素的边框上起作用。或者有没有其他方法可以达到我需要的效果。

我知道如果我需要阴影，我可以在 div 上应用过滤器：

```
filter: drop-shadow(2px 2px 15px black); 
```

但是有没有办法为内部阴影做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:31:25.780

你可以尝试这样的事情：

# [*现场演示*](http://dabblet.com/gist/5093663)

将伪元素的 CSS 更改为：

```
div:before{
    content: '';
    display:block;
    width: 60px; height: 60px;
    transform: rotate(45deg);
    background: red;
    position:absolute;
    top: 60px; right: -25px;
    box-shadow: inset -10px 10px 15px -15px black;

} 
```

它并不完美，但它可以产生微妙的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:59:02.857

你总是可以像这样使用阴影：

> -webkit-filter: 阴影(0 1px 4px rgba(0,0,0,9))

或者您可以设置背景图片

希望我能以某种方式帮助：D

# javascript - onChange 对象计数事件

> ID：15231942
> 
> 赞同：1
> 
> 时间：2013-03-05T19:01:46.527
> 
> 标签：javascript, jquery

我一直在尝试找到一种方法来检测每次特定对象的计数在 DOM 中发生变化时。

例如，假设类 '.special' 当前返回 5 个对象：

```
$('.special').css('color','1px solid red'); 
```

稍后，用户会导致`.special`对象的数量增加或减少。所以，一旦`.special`对象的数量从 5 个改变，我想触发一个事件。

这可能吗？

我尝试为此使用该`change`事件，但在这种情况下它不起作用。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:40:28.167

您可以捕获 DOMNodeInserted 事件。

```
document.addEventListener('DOMNodeInserted', function(e){
    alert($('.special').length);
}); 
```

[问题是，IE8 及之前版本不支持此事件。](http://help.dottoro.com/ljmcxjla.php)

[也许您可以找到解决方法，但我还没有尝试过](https://stackoverflow.com/questions/2143929/domnodeinserted-equivalent-in-ie)。

[这是一个有效的 JSFiddle](http://jsfiddle.net/zAZ6z/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:37:55.267

好的，这确实涉及一些代码，但自定义事件可能会起作用。在这里，我有一个自定义的“specialEvent”可以触发，还有一个“trackChanges”函数可以做你想做的事。

我在小提琴中创建了一个“跟踪器”函数，它只是根据此处更改的内容添加一个类：http: [//jsfiddle.net/DsSQd/1/](http://jsfiddle.net/DsSQd/1/) 并跟踪先前在“跟踪器”元素中看到的长度 - 在这个case 组的父级。这有点难看，但你可以在那里做你想做的事，在我的，我在父包装器中跟踪组的长度，并根据长度是否改变简单地添加一个类，如果没有，只需突出显示触发事件的元素。

```
// custom event handler
$(document).on('specialEvent', '.special, .changerthing, .friendly>.specialalso', function () {
    trackChanges(this, $(this).parent(), $(this).parent());//react to the change
});
// event where I trigger the handler
$('#wrapperToBindTo').on('click wacked', '.changers,.special,.changerthing', function () {
    $(this).trigger('specialEvent');
});
// event where I trigger the handler
$('.friendly').on('click', '.specialalso', function () {
    var me = $(this);
    me.clone().appendTo($(this).parent()).text(me.text() + ' Copy of:' + me.index()); //add one
    me.parent().find('.specialalso:last').trigger('specialEvent'); //fire special event
}); 
```

例如，我们可以添加这个函数：

```
//added to show a remove, then trigger that cascades
$('#wackFriendly').click(function(){
    $('.friendly>.specialalso').last().remove();
    $('.friendly>.specialalso').last().trigger('wacked');
}); 
```

然后像这里看到的那样处理它：http: [//jsfiddle.net/DsSQd/2/](http://jsfiddle.net/DsSQd/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:23:15.757

最好的解决方案是定义一个函数来执行您希望在添加列时发生的操作，例如：

```
function on_add_column() {
  // do stuff
} 
```

现在将此函数绑定到导致添加列的所有事件，如`click`s、`ajax`s 或你有什么。

```
$("button#add").on("click", on_add_column)
$("a#add-link").on("click", on_add_column)
$("input#beh").on("change", on_add_column) 
```

使用超时意味着让 jQuery 在设定的时间间隔内查询 DOM ......效率不高。此外，您*应该*知道将导致在*您自己的*应用程序中添加列的所有操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:15:27.507

根据您的情况（用户可以通过 20 种不同的方式减少或增加 DOM 中元素的数量），我只想到了一件事。您应该存储当前`special`元素并可以使用 a`setInterval`并尝试例如每 2 秒调用一次函数并检查`specials`计数并将其与之前的数字进行比较。如果它们不相等，那么就会发生变化。而且我不会建议这种方法，我认为最好`click`对所有不同的方式进行绑定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T19:16:02.327

解决此问题的最简单方法是创建一个创建“.special”对象的代理方法。您需要创建事件来控制 DOM 中当前元素的数量，例如：

```
function createNewSpecial() {
    var specialCnt = $('.special').length;
    if (specialCnt > 5) {
        // magic
    }

    // creation of another ".special" element in DOM if needed
} 
```

# c# - 每次单击按钮时都会增加一个数组

> ID：15231943
> 
> 赞同：0
> 
> 时间：2013-03-05T19:01:47.200
> 
> 标签：c#, arrays, winforms, button

我的任务是使用一个按钮来设置输入到数组中的值。用户将按下按钮输入一个值，一旦按下按钮，用户输入的值就会存储到一个数组中。我的老师（是的，这是一个家庭作业问题）说他希望它一次只做一个值。

我遇到的问题是，我只是不知道要写什么才能发生这种情况。我试着看看我在活动中能做些什么，但这让我无处可去，除非答案就在那里，而我只是完全错过了它。

任何关于在哪里看的建议，或者关于写什么的想法都会很棒。

```
private void addToArray_Click(object sender, EventArgs e)
{
    Button bclick = (Button) sender;

    string variables = addArrayTextBox.Text;
    int []vars = new int[5];
    vars = parseVariableString(variables);
    int numberIndex = 0;

    for (int i = 0; i < vars.Length; i++)
    {
        int indexNumber = vars.Length;
        numberIndex = indexNumber;
    }
    integerTextBox.Text = numberIndex.ToString();
} 
```

是我目前打出来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:25:21.190

让你开始

让我们先把图形设计师的东西排除在外：

1.  制作你的 winforms 项目
2.  拖放一个按钮
3.  拖放文本框
4.  双击按钮以创建`button_click`事件处理程序

接下来，您可能希望您的数组保持在范围内，最简单的方法是将其声明为`Form1`实例的字段，然后在“Form1 构造函数”中实例化和/或初始化它。

然后你可以从你的事件处理程序访问它

**例子：**

```
public partial class Form1 : Form
{
    int[] vars;
    int intergersEntered;
    public Form1()
    {
        InitializeComponent();

        vars = new int[5];
        intergersEntered = 0;
        // insert other initialization here
    }

    private void button1_Click(object sender, EventArgs e)
    {
       vars[0] = int.Parse(textBox1.Text);
       intergersEntered++;
       textBox2.Text = intergersEntered.ToString();
    }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:46:33.560

在我看来，每次单击“添加到数组”按钮时，您只需将数组大小调整为大一：

```
private void addToArray_Click(object sender, EventArgs e)
{

    //Calculate the new size of the array
    int newLength = arrayOfIntegers.Length + 1;

    //Resize the array
    Array.Resize(ref arrayOfIntegers, newLength);

    //Add the new value to the array
    //Note that this will fail if the textbox does not contain a valid integer.  
    //You can use the Integer.TryParse method to handle this
    arrayOfIntegers[newLength] = Integer.Parse(addArrayTextBox.Text);  

    //Update the text box with the new count
    integerTextBox.Text = newLength.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:14:51.217

我不确定我是否会根据您的代码得到您的问题。释义，您想在按下按钮时将数组长度增加 1，是吗？

```
public partial class Form1 : Form
{
    private int[] vars;

    public Form1()
    {
        InitializeComponent();
        vars = new int[5];
    }

    private void button1_Click(object sender, EventArgs e)
    {
        int[] tmp = new int[vars.Length + 1];
        vars.CopyTo(tmp, 0);
        vars = tmp;
    }
} 
```

# ruby-on-rails - rake db 错误：迁移

> ID：15231951
> 
> 赞同：0
> 
> 时间：2013-03-05T19:02:01.887
> 
> 标签：ruby-on-rails, ruby, migration, rake

我是 ruby​​ 和 rails 的新手。我不明白为什么我的 rake db:migration 会返回这个错误

/usr/lib/ruby/vendor_ruby/rake.rb:30:in`require': no such file to load -- rbconfig(LoadError) from /usr/lib/ruby/vendor_ruby/rake.rb:30 from /usr/bin/rake:25:in`需要'来自 /usr/bin/rake:25

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:08:17.720

在这种情况下，检查您是否使用了正确的 ruby​​ 版本（或您正在`$ ruby -v`使用`$ rvm 1.9.3 --default`的版本）。另外，运行`$ bundle install`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:05:12.250

您可能错过了键入

```
require ' 
```

在您正在处理的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:21:21.183

在 Gemfile（在您的应用程序的根文件夹中）中添加以下行应该修复该错误：

```
gem 'execjs'
gem 'therubyracer' 
```

并运行`sudo bundle`

# android - 使用 AlarmManager 保持计划的最佳方式是什么？

> ID：15231953
> 
> 赞同：0
> 
> 时间：2013-03-05T19:02:04.310
> 
> 标签：android, calendar, alarmmanager

我正在尝试考虑如何构建我的应用程序。它将让用户输入不同的时间来使您的手机静音和取消静音，并且可以随时添加和取消更多时间。我正在尝试找出解决此问题的最佳方法，即拥有一个包含所有时间的日历，或者每个对象一个日历（应用商店中的每个对象都提供有关何时使手机静音和取消静音的信息），以及由于时间表重叠（这是预期的），随着时间的推移实际使电话静音和取消静音的数学运算。

构建这个的最佳方法是什么？

# c# - selenium webdriver：如何在 C# 中处理 javascript onclick

> ID：15231955
> 
> 赞同：9
> 
> 时间：2013-03-05T19:02:14.280
> 
> 标签：c#, javascript, selenium, webdriver

我正在使用 selenium web 驱动程序 C# 测试一个网站。我最初的意图是检查返回 200 的 HttpWebResponse。但是，该按钮是一个 javascript onclick 事件。我想知道是否有人过去有过如何处理这种情况的经验。这是按钮的 HTML：

```
<td>
<input id="ctl00_ContentPlaceHolder1_ExportPACEButton" type="submit" tabindex="-1" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$ContentPlaceHolder1$ExportPACEButton", "", true, "", "", false, false))" value="Export as PACE File" name="ctl00$ContentPlaceHolder1$ExportPACEButton"/>
</td> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-09T10:01:39.307

尝试这样的事情：

```
public void JavaScriptClick(IWebElement element)
{
    IJavaScriptExecutor executor = (IJavaScriptExecutor)driver;
    executor.ExecuteScript("arguments[0].click();", element);
} 
```

驱动程序是您在其他地方使用的驱动程序。

# mysql - MySQL - 从子查询更新列

> ID：15231957
> 
> 赞同：0
> 
> 时间：2013-03-05T19:02:18.927
> 
> 标签：mysql, sql-update, subquery

无法让这个工作。我有一个表'Players'，它有一个主键'Id'和一个'Name'列。另一个表“Bookings”有一个“PlayerId”列，它引用了“Players.Id”。

我刚刚在“预订”中添加了一个“名称”列，该列需要包含玩家姓名的实际副本。

我正在尝试使用以下语句设置填写 Bookings 中的所有名称：

```
UPDATE Bookings SET Name = (SELECT Name FROM Players WHERE Players.Id=Bookings.PlayerId); 
```

但我得到的是错误 1263：“列设置为默认值；NULL 提供给第 0 行的 NOT NULL 列‘名称’”。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:05:17.637

试试这个：

```
update Bookings, Players
set Bookings.Name = Players.Name
where Bookings.playerId = Players.Id 
```

您必须确保和之间存在*一对一的*关系（这是我认为这是有意义的唯一方法）。`Players``Bookings`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:10:32.883

为此目的使用 MYSQL UPDATE JOIN。这是您需要的查询：

```
UPDATE Bookings
LEFT JOIN Players
ON Players.Id=Bookings.PlayerId
SET Bookings.Name = Players.Name 
```

# .net - 控件的边界和设置控件的 X,Y,Width,Height 有什么区别？

> ID：15231958
> 
> 赞同：0
> 
> 时间：2013-03-05T19:02:19.380
> 
> 标签：.net, panel, bounds, oxygene

因此，假设我在 winform 上有一个面板，我希望它显示在特定点，并且应该在 winform 上具有特定的宽度和高度。另外，我想在运行时这样做。

那么，移动和设置面板尺寸的区别和正确方法是什么？

这边走：

```
Panel1.bounds.X:=10;
Panel1.bounds.Y:=10;
Panel1.bounds.width:=100;
Panel1.bounds.height:=103; 
```

或者这样：

```
Panel1.Left := 10;
Panel1.Top := 10;
Panel1.width:=100;
Panel1.height:=103; 
```

或者两种方式都应该在 panel1 上产生相同的效果。

我试图弄清楚我的程序到底出了什么问题……尽管我已经针对我的问题提出了一个特定的问题，但没有人试图回答甚至可以发表评论。所以，我在问一些问题来理解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:22:49.673

如果你想设置`Bounds`，你需要用一个矩形来做。（请原谅我的示例中的任何语法错误；我的 Delphi 有点生疏。）

```
BoundsRect: Rectangle;
BoundsRect.X = 10;
BoundsRect.Y = 10;
BoundsRect.Width := 100;
BoundsRect.Height := 103;
Panel1.Bounds := BoundsRect; 
```

通常，如果您想设置或更改多个属性，您会使用它。如果只想设置一两个属性，可以使用`Width`,`Top`等。

另一个区别是，每次设置这些属性之一（或者`Bounds`，或单个属性之一）时，都会在幕后进行大量工作（移动和重绘窗口等）。从矩形设置`Bounds`属性将减少工作量。

# java - 将灰度图像读入一维数组

> ID：15231959
> 
> 赞同：2
> 
> 时间：2013-03-05T19:02:22.670
> 
> 标签：java, image, image-processing, bufferedimage, grayscale

我编写了以下代码来将灰度图像的像素读取到一维数组中。运行代码时我怎么会出错

```
 public class LoadImage {
   BufferedImage image;
   void load()throws Exception { 
     File input = new File("lena.png");
     image = ImageIO.read(input);
   }
   public Dimension getImageSize() {
     return new Dimension(image.getWidth(), image.getHeight());
   }

   public int[] getImagePixels() {
     int [] dummy = null;
     int wid, hgt;

     // compute size of the array
     wid = image.getWidth();
     hgt = image.getHeight();

     // start getting the pixels
     Raster pixelData;
     pixelData = image.getData();
     return pixelData.getPixels(0, 0, wid, hgt, dummy);
   }
 } 
```

主班

```
 public static void main(String[] args) throws IOException, Exception {
   LoadImage l = new LoadImage();
   l.load();
   int pixel[];
   pixel= l.getImagePixels();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:20:12.217

好的，当您传递 File 对象时，问题来自 ImageIO.read 中的格式检测。试试这个：

```
import java.awt.Dimension;
import java.awt.image.BufferedImage;
import java.awt.image.Raster;
import java.io.IOException;
import javax.imageio.ImageIO;

public class LoadImage {
  BufferedImage image;
  void load() throws Exception { 
    image = ImageIO.read(getClass().getResourceAsStream("lena.png"));
  }

  public Dimension getImageSize() {
    return new Dimension(image.getWidth(), image.getHeight());
  }

  public int[] getImagePixels() {
    int [] dummy = null;
    int wid, hgt;

    // compute size of the array
    wid = image.getWidth();
    hgt = image.getHeight();

    // start getting the pixels
    Raster pixelData;
    pixelData = image.getData();

    System.out.println("wid:"+ wid);
    System.out.println("hgt:"+ hgt);
    System.out.println("Channels:"+pixelData.getNumDataElements());
    return pixelData.getPixels(0, 0, wid, hgt, dummy);
  }

  public static void main(String[] args) throws IOException, Exception {
    LoadImage l = new LoadImage();
    l.load();
    int[] pixel;
    pixel= l.getImagePixels();
    System.out.println("length:"+pixel.length);

    int height = 482;
    int width = 372;
    int channels = 3;
    int color = 0;

    BufferedImage red = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);
    BufferedImage green = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);
    BufferedImage blue = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);

    for (int y = 0; y < height; y++) {
      for (int x = 0; x < width; x++) {
        blue.setRGB(x, y, pixel[color * channels]);
        green.setRGB(x, y, pixel[color * channels + 1] << 8);
        red.setRGB(x, y, pixel[color * channels + 2] << 16);
        color++;
      }
    }
    ImageIO.write(red, "png", new File("red.png"));
    ImageIO.write(green, "png", new File("green.png"));
    ImageIO.write(blue, "png", new File("blue.png"));
  }
} 
```

当我传递一个 372x482（24 位（3 通道）颜色）的 PNG 时，我得到

```
wid:372
hgt:482
Channels:3
length:537912 
```

并且使用更新的代码这就是您如何获取它返回的数组并将每个通道保存回文件的方法。

# node.js - NodeJS/Forever 归档日志

> ID：15231968
> 
> 赞同：19
> 
> 时间：2013-03-05T19:02:39.123
> 
> 标签：node.js, forever, winston

我[永远](https://github.com/foreverjs/forever)使用来运行我的节点应用程序。当我永远开始时，我会指定在哪里写入日志。我还指定附加到日志。这里的问题是我的日志将在几个月内失去控制。

有没有办法按时间间隔归档/滚动日志，即每天将日志文件中的内容滚动/归档到另一个文件（即 server-2013-3-5.log）。这样我就可以根据需要删除/移走旧的日志文件。

我刚刚开始考虑将 Winston 用于我的记录器，但我还没有遇到任何有用的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-05T19:18:52.577

forever 本身不支持日志轮换，并且日志轮换仍然是 Winston 的[待处理功能请求](https://github.com/flatiron/winston/issues/10)。

您可以使用`logrotate`它包含在大多数 Linux 发行版中，用于轮换系统日志文件，以及被 Apache 等其他软件使用。

将文件添加到`/etc/logrotate.d/`

```
/path/to/server.log {
  daily         # how often to rotate
  rotate 10     # max num of log files to keep
  missingok     # don't panic if the log file doesn't exist
  notifempty    # ignore empty files
  compress      # compress rotated log file with gzip
  sharedscripts # postrotate script (if any) will be run only once at the end, not once for each rotated log
  copytruncate  # needed for forever to work properly
  dateext       # adds date to filename 
  dateformat %Y-%m-%d.
} 
```

查看[更多`logrotate`示例](http://www.thegeekstuff.com/2010/07/logrotate-examples/)。

# xcode - Mac 10.8.2 上缺少开发人员 SDK

> ID：15231969
> 
> 赞同：8
> 
> 时间：2013-03-05T19:02:43.433
> 
> 标签：xcode, macos, sdk

我最近从 10.6.8 升级到 10.8.2。我需要编译使用 10.7 SDK 的软件。但是，每当我进入时，`/Developer/SDKs/`我看到的都是：MacOSX10.4u.sdk、MacOSX10.5.sdk 和 MacOSX10.6.sdk。我希望我至少有 MacOSX10.7.sdk，但它不存在。我不确定这是否相关，但我使用的是 Xcode 4.6。

任何人都知道如何获得较新的 SDK，或者至少解释一下为什么我的 SDK 不见了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T19:04:09.593

在最新版本的 Xcode 中，它们位于 app bundle 中：

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T19:57:46.157

您升级了操作系统，但没有升级 xcode。所以这些是你最初的 SDK。

我也想知道从哪里获得 sdk。xcode 4.+ 会消耗内存并经常崩溃。

# ajax - 无法通过java控制器绘制谷歌图表

> ID：15231973
> 
> 赞同：1
> 
> 时间：2013-03-05T19:03:01.080
> 
> 标签：ajax, jsp, charts

嗨，我正在使用下面的 Ajax 代码来访问我的 java 控制器，该控制器有助于在另一个 jsp 中填充值，以显示带有数据库值的谷歌图表。但是图表没有加载到主页上，但如果单独打开可以查看。我认为 google.setOnLoadCallback(drawChart); 存在问题 功能。请让我知道在哪里/如何进行更改以使其正常工作。

```
function loadXMLDoc()
{
 var xmlhttp;
 if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
 xmlhttp=new XMLHttpRequest();
 }
 else
  {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
   xmlhttp.onreadystatechange=function()
 {
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
   {
  document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
   }
 }
xmlhttp.open("GET","<%=request.getContextPath()%>/Controller?action=FoodList",true);
xmlhttp.send();
} 
```

# node.js - AppFog 上的 Node.JS 应用程序响应 503 Service Unavailable

> ID：15231974
> 
> 赞同：2
> 
> 时间：2013-03-05T19:03:02.307
> 
> 标签：node.js, express, appfog

我正在开发一个 Node.JS 应用程序。在本地主机上运行时一切正常。

将它部署到 AppFog 后，我随机获得 503 Service Unavailable 响应，这些响应要么针对静态资源（使用 express.static() 中间件提供服务，Express 版本为 3.1.0），要么针对 API 调用（从 MongoDB 提供 JSON 文档）。同样在 AppFog 控制台中，我看到报告的状态为 0%。应用程序日志什么也不显示。而且似乎应用程序并没有停止。

我尝试运行具有 2GB 内存的单个实例以及 16 个实例，每个实例具有 128MB 仍然获得 503。

应用程序部署到美国东部基础设施。它使用 MongoHQ 插件。

您是否在 AppFog 或您的 Node.JS 应用程序中遇到过这种行为？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T16:19:20.787

只是一个快速提示：您可以使用该命令`af logs <appname>`查看您的应用程序日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T08:28:37.543

AppFog 中的 HTTPS 错误在他们的 Google Group 中得到确认。

# ruby - 将数组中的项目配对到唯一组中

> ID：15231975
> 
> 赞同：0
> 
> 时间：2013-03-05T19:03:07.320
> 
> 标签：ruby, combinatorics

我有一个数字数组（`[1,2,3,4,5,6,7,8,9,10]`）。这些数字代表球员。我希望这些玩家每个人都能“玩”一次。

我需要为这些游戏创建“回合”。这些回合将包括偶数场比赛，每个玩家最多只能在一个回合中玩一次。如果比赛的数量是奇数，那么最后一轮比赛的数量不规则是可以的。

最终结果是“圆形”数组的数组。这些圆形数组将包含玩家之间的比赛。最终结果如下所示，但完整：

`[[[1,2],[3,4],[5,6],[7,8],[9,10]],[[1,3],[2,4],[5,7],[6,8],[9,1],[10,2]]]`

我发现`Array#combination`可以创建匹配项，但我似乎无法正确构建回合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:34:53.237

这被称为循环赛。维基百科给出了以下[算法](http://en.wikipedia.org/wiki/Round-robin_tournament#Scheduling_algorithm)

```
Round 1\. (1 plays 14, 2 plays 13, ... )
 1  2  3  4  5  6  7
 14 13 12 11 10 9  8 
```

然后固定一名参赛者（本例中为第一名）并将其他参赛者顺时针旋转一个位置：

```
Round 2\. (1 plays 13, 14 plays 12, ... )
 1  14 2  3  4  5  6
 13 12 11 10 9  8  7 
```

并继续旋转：

```
Round 3\. (1 plays 12, 13 plays 11, ... )
 1  13 14 2  3  4  5
 12 11 10 9  8  7  6 
```

奇数玩家每轮由一名没有游戏的玩家处理（通常通过添加一个虚拟玩家来实现）。

# mysql - 如何计算一列 MySQL 中重复条目的数量

> ID：15231984
> 
> 赞同：0
> 
> 时间：2013-03-05T19:03:28.310
> 
> 标签：mysql, count

我在 MySQL 表中有两列：

bname 和 count

```
 bname           count        
----------      ----------

 Blah              2

 Blah              2

 huh               3

 lol               1

 huh               3

 huh               3 
```

我想要这样的东西。我已经创建了计数列，但我不知道如何像上面的示例一样显示它。计数列当前为空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T19:05:27.800

您应该使用旧组...

```
select bname, count(*) 
from mytable 
group by bname 
```

这将按唯一值对行进行分组，并提供每组的行数。

如果您也想将其存储在您的表中：

```
UPDATE myTable updated
JOIN (select bname, count(*) as cnt 
    from mytable 
    group by bname) aggregate 
  ON updated.bname= aggregate.bname
set `count`= aggregate.cnt 
```

[注意反引号，我认为你需要在这里]

这应该将所有行设置为各自的重复计数。

[SQL小提琴在这里](http://sqlfiddle.com/#!2/e241c/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:11:55.703

如果要运行查询：

```
select bname,
       (select count(*) from t t2 where t2.bname = t.bname) as cnt
from t 
```

这将为您提供每行的附加列。

如果要填写值，请使用`update`：

```
update t
    set count = (select count(*) from t t2 where t2.bname = t.bname) 
```

这实际上将表中的值更改为计数。

# android - ListView 有时不会在点击元素时做出反应

> ID：15231986
> 
> 赞同：0
> 
> 时间：2013-03-05T19:03:32.647
> 
> 标签：android, listview, onclicklistener, blocked

我在活动中有一个 ListView。列表元素是从 BaseAdapter 生成的。随着用户在屏幕上向下滚动，该列表不断增长。实际上，AsyncTask 负责从 Internet 下载数据并为 ListView 生成 View 元素。

每个 View 元素都有一组 onClickListener。OnClickListener 类开始一个新的活动......

问题是有时 GUI 对点击动作没有反应。例如 1\. 启动应用程序 2\. 点击第一个元素 -> 没有任何反应 3\. 点击第二个元素 -> 没有任何反应 4\. 向下滚动 a 但是 -> 两个相应的活动都出现（彼此）

**列表适配器：**

```
private class HirdetesListaAdapter extends BaseAdapter {

    private GSResult hirdetesek;
    private final Context context;
    private LayoutInflater inflater = null;
    private SparseArray<ImageDownloaderThread> imageDownloadThreads;
    private ListViewWorker worker;
    private int thresHold = 45;
    private ArrayList<View> views;
    private boolean isWorkerThreadRunning = false;

    public HirdetesListaAdapter(final Context context, GSResult result) throws IOException {

        this.context = context;

        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        initAdapter(result);

    }

    public void initAdapter(GSResult result) {
        if (views == null) {
            views = new ArrayList<View>();
        } else {
            views.clear();
        }
        hirdetesek = result;
        imageDownloadThreads = new SparseArray<ImageDownloaderThread>();
        worker = new ListViewWorker();
        worker.execute(null, null, null);
    }

    @Override
    public int getCount() {
        // Log.v("bar2", "HirdetesListaAdapter.getCount()=" + views.size());
        return views.size();
    }

    @Override
    public GSHirdetes getItem(int arg0) {
        Log.v("bar", "HirdetesListaAdapter.getItem(" + arg0 + ")");
        // Toast.makeText(getBaseContext(), "Találatok: " + gsr.size(),
        // 100000).show();
        return hirdetesek.get(arg0);
    }

    public void destroy() {
        synchronized (worker) {
            worker.notify();
            Log.v("thread", "Working thread notified");

            worker.cancel(true);
            Log.v("thread", "Working thread cancelled");

            for (int i = 0; i < this.imageDownloadThreads.size(); i++) {
                imageDownloadThreads.get(i).cancel(false);
                Log.v("thread", "ImageDownloadThread " + i + " cancelled");
            }
        }

    }

    @Override
    public long getItemId(int arg0) {
        Log.v("bar", "HirdetesListaAdapter.getItemId(" + arg0 + ")");
        return arg0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if ((lv.getLastVisiblePosition() + thresHold) > views.size()) {
            synchronized (worker) {
                if (!this.isWorkerThreadRunning) {
                    Log.v("wthread", "Resuming worker thread");
                    worker.notify();
                    isWorkerThreadRunning = true;
                }
            }
        }

        synchronized (imageDownloadThreads) {
            if (imageDownloadThreads.get(position) == null) {
                Log.v("ithread", "Storing download thread: " + position);
                ImageDownloaderThread thread = new ImageDownloaderThread();
                imageDownloadThreads.put(position, thread);
                thread.execute(position);
            }
        }

        Log.v("thread", "getview finished for " + position);

        return views.get(position);
    }

    private class ListViewWorker extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... arg0) {
            Log.v("thread", "ListViewWorker started");
            int buffer = 20;
            int i = 0;
            try {
                while ((views.size() != gsr.size()) && !this.isCancelled()) {
                    Log.v("thread", views.size() + "/" + gsr.size());
                    if (buffer != 0) {
                        views.add(i, makeView(i));

                        ResultActivity.this.runOnUiThread(new Runnable() {
                            public void run() {
                                lv.addFooterView(views.get(views.size() - 1));
                            }
                        });
                        i++;
                        buffer--;
                    } else {
                        synchronized (this) {
                            try {
                                Log.v("wthread", "Pausing worker thread");
                                buffer = 20;
                                this.wait();
                                HirdetesListaAdapter.this.isWorkerThreadRunning = false;
                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                    }
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        private View makeView(int position) {
            Log.v("thread", "ListViewWorker.makeView(" + position + ")");
            GSHirdetes hirdetes = hirdetesek.get(position);

            View hirdetesView = inflater.inflate(R.layout.hirdetes_listaelem, null);
            TextView hirdetesName = (TextView) hirdetesView.findViewById(R.id.hirdetesListaElemView_TextView_Name);
            TextView hirdetesAr = (TextView) hirdetesView.findViewById(R.id.hirdetesListaElemView_TextView_Ar);
            TextView hirdetesKategoria = (TextView) hirdetesView.findViewById(R.id.hirdetesListaElemView_TextView_Kategoria);
            hirdetesName.setText(position + ". " + hirdetes.getHirdetesName());
            // hirdetesName.setText(Integer.toString(position));
            hirdetesAr.setText(hirdetes.getHirdetesPrice());
            hirdetesKategoria.setText(hirdetes.getCategory());

            ImageView hirdetesImage = (ImageView) hirdetesView.findViewById(R.id.hirdetesListaElemView_ImageView_HirdetesCover);
            //hirdetesImage.setOnClickListener(new HirdetesImageListener(context, hirdetes));
            //hirdetesView.setOnClickListener(new HirdetesListaListener(context, hirdetes));

            //views.add(position, hirdetesView);
            Log.v("gui", "ListViewWorker.makeView(" + position + ") finished");
            return hirdetesView;
        }
    }

    private class ImageDownloaderThread extends AsyncTask<Integer, Integer, Bitmap> {

        private ProgressBar progressBar;
        private TextView percent;
        private URL imageUrl;
        private View view;
        private int sorszám = -1;

        public void onPreExecute() {
            super.onPreExecute();
            // while (threadCounter >= threadPool) {
            // try {
            // Log.v("konti","threadCounter:"+threadCounter+" threadPool:"+threadPool);
            // Thread.sleep(10);
            // } catch (InterruptedException e) {
            // // TODO Auto-generated catch block
            // e.printStackTrace();
            // }
            //
            // }
            //
            // threadCounter++;

        }

        public void onProgressUpdate(Integer... values) {
            progressBar.setProgress(values[0]);
            float percentValue = (float) progressBar.getProgress() / progressBar.getMax();
            DecimalFormat df = new DecimalFormat("#");
            String percentString = df.format(percentValue * 100) + "%";
            percent.setText(percentString);
            // Log.v("konti", percentString);
        }

        @Override
        protected Bitmap doInBackground(Integer... params) {
            sorszám = params[0];
            imageUrl = hirdetesek.get(sorszám).gethirdetesCoverImageUrl();

            view = views.get(sorszám);
            progressBar = (ProgressBar) view.findViewById(R.id.hirdetesListaElemView_ProgressBar_ImageDLProgressBar);
            progressBar.setIndeterminate(false);
            progressBar.setProgress(0);
            percent = (TextView) view.findViewById(R.id.hirdetesListaElemView_TextView_ImageDLPercent);
            if (imageUrl == null) {
                return null;
            }

            Log.v("thread", "Starting ImageDownloaderThread for " + sorszám);

            int size;
            try {
                size = imageUrl.openConnection().getContentLength();
                progressBar.setMax(size);
                InputStream is = imageUrl.openStream();
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                byte[] buffer = new byte[2048];
                int read = 0;
                Log.v("gui", "Downloading image for " + sorszám + ": " + imageUrl.getPath());
                while ((read = is.read(buffer, 0, buffer.length)) != -1) {
                    baos.write(buffer, 0, read);
                    // Log.v("net", "Image download progress: " +
                    // baos.size());
                    publishProgress(progressBar.getProgress() + read);
                }
                baos.flush();

                byte[] data = baos.toByteArray();
                return BitmapFactory.decodeByteArray(data, 0, data.length);
            } catch (IOException e) {
                Log.v("exception", "thread");
                return null;
            }
        }

        protected void onPostExecute(Bitmap bitmap) {
            ResultActivity.this.runOnUiThread(new Runnable() {
                public void run() {
                    ViewGroup vg = (ViewGroup) (progressBar.getParent());
                    vg.removeView(progressBar);
                    vg.removeView(percent);
                }
            });
            ImageView im = (ImageView) view.findViewById(R.id.hirdetesListaElemView_ImageView_HirdetesCover);
            if (bitmap == null) {
                im.setImageResource(R.drawable.noimage_hu);
            } else {
                im.setImageBitmap(bitmap);
            }
        }
    }

} 
```

**听众**：

```
public class HirdetesListaListener implements View.OnClickListener {

GSHirdetes hirdetes;
Context context;

public HirdetesListaListener(Context context, GSHirdetes hirdetes){
    this.hirdetes = hirdetes;
    this.context = context;
    Log.v("konti","Listener: "+hirdetes.getHirdetesName());
}

@Override
public void onClick(View v) {
    Log.v("konti","HirdetesListaListener.onClick(v) "+hirdetes.getHirdetesName());
    Intent intent = new Intent(context, HirdetesActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.putExtra("data", hirdetes);
    context.startActivity(intent);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:18:17.513

你应该使用这个代码：

```
 lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                    Toast.makeText(MainActivity.this, "item at pos "+arg2+" clicked", Toast.LENGTH_LONG).show();
        }
   }); 
```

# android - 带有可点击部分的大图

> ID：15231987
> 
> 赞同：2
> 
> 时间：2013-03-05T19:03:33.677
> 
> 标签：android

我的 android 应用程序中有一个大图像，它代表了一个真实的图片设备。现在我想知道，执行以下操作的最佳方法是什么：

*   将某些特定图像扇区标记为可点击
*   可视化预览点击事件（就像一个普通的 android 按钮）

我想过类似 [http://catchthecows.com/?p=113](http://catchthecows.com/?p=113)的“imagemap”类似解决方案。但它没有突出显示点击的部分（对我来说是必要的）。创建处理突出显示效果的“n”个不同的图片是不可能的，或者说非常复杂（例如：第 1 部分被点击 - 所以突出显示它，第 2 部分被点击 - 所以突出显示它......）。

任何建议都会很棒。

非常感谢。

顺便说一句：我的图像如下所示（红色部分应该是可点击的）。 ![在此处输入图像描述](../Images/02d9dfe32a5dbd7a611b0e48f44d35fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:45:35.280

我快速浏览了`ImageMap`您提供的来源。

这是`onDraw()`方法`ImageMap`：

```
/**
* Paint the view
* image first, location decorations next, bubbles on top
*/
@Override
protected void onDraw(Canvas canvas) {
    drawMap(canvas);
    drawLocations(canvas);
    drawBubbles(canvas);
} 
```

因此，正如评论所述，首先绘制完整图像，然后是“位置装饰”（这似乎是一个特别感兴趣的区域），最后是“气泡”区域，这基本上似乎是工具提示可选区域，可能不适用于您。

看一下'位置装饰'的绘制方法：

```
protected void drawLocations(Canvas canvas) {
    for (Area a : mAreaList) {
        a.onDraw(canvas);
    }   
} 
```

最后是对象的绘制方法`Area`（这是可定义的、可选择的图像区域）：

```
// an onDraw is set up to provide an extensible way to
// decorate an area. When drawing remember to take the
// scaling and translation into account
public void onDraw(Canvas canvas) {
    if (_decoration != null) {
        float x = (getOriginX() * mResizeFactorX) + mScrollLeft - 17;
        float y = (getOriginY() * mResizeFactorY) + mScrollTop - 17;
        canvas.drawBitmap(_decoration, x, y, null);
    }
} 
```

我会说您最好的选择是使用`ImageMap`该类来处理大部分必需的功能。您可以使用提供的`Area.onDraw()`方法来处理“突出显示”区域。不要绘制“装饰位图”，而是使用`Area`类或子类中定义的形状信息，并使用`Canvas`方法在选定区域上绘制透明的高光遮罩。

编辑：您需要`onDraw()`为每个子类单独实现`Area`，因为区域边界信息存储在子类中。

# scala - 仅使用 Akka Actor 作为邮箱的死锁

> ID：15231993
> 
> 赞同：1
> 
> 时间：2013-03-05T19:03:51.460
> 
> 标签：scala, message-queue, deadlock, akka, actor

我只想将 Akka 演员用作邮箱，即我想创建 n 个线程，每个线程创建 1 个远程演员。

每个线程获取对其他线程的所有远程参与者的引用，以便它们可以通过各自的参与者相互发送消息。

演员定义如下：

```
case class Receive
case class GroupReceive(id: Symbol)
case class GroupMsg[T](id: Symbol, msg: T)
class FooParActor(val distributor: Distributor) extends Actor
  with Stash {
  import context._

  val globalRank: Int = distributor.globalRank

  def doReceive(realSender: ActorRef, ID: Symbol) {
    unstashAll()
    become({
      case GroupMsg(ID, msg) =>
        realSender ! msg
        unbecome()
      case GroupMsg(otherId, msg) =>
        println(globalRank + ": stashing " + otherId)
        unbecome()
      case x => sys.error("bad msg: " + x)
    }, discardOld = false)
  }

  def receive = {
    case GroupReceive(id) =>
      doReceive(sender, id)
    case GroupMsg(id, x) =>
      stash()
    case x => sys.error("bad msg: " + x)
  }

} 
```

为了阅读消息，所有者线程发送`GroupReceive('someSymbol)`给他的本地actor，后者又将 GroupMsg 转发给线程。从线程的角度来看，读取消息的代码如下所示：

```
def groupRcv[T](id:Symbol) = Await.result(aref ? GroupReceive(id), timeout.duration).asInstanceOf[T] 
```

where`aref`是对该线程的本地参与者的引用。

我有时会遇到上述模式的死锁（超时 5 秒），即使使用极其简单且消息很少。我将问题缩小到演员在收到`GroupReceive(id)`消息后停滞不前，但在进入 doReceive(...): 的第一个案例之前`case GroupMsg(ID, msg) =>`。

我进行了打印输出跟踪，以检查演员在进行 doReceive 调用之前是否在存储中确实有消息，而且似乎出于某种原因，他们只是不处理它们。我上面提供的代码可以进入 a从 a的存储中`GroupMsg()`丢失的状态吗？`FooParActor`或者有没有其他方法可以让actor在收到`GroupReceive()`消息后陷入僵局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:08:29.957

您正在使用`Await.result()`但不共享您执行此操作的位置：如果您调用`groupRcv`了您的演员应该在其上运行的线程，那么您当然可以饿死（即目标演员没有可用于运行的线程，所以它永远不会完成请求）。

似乎您正在以一种不健康的方式将基于线程的并发与参与者混合，但由于您只是暗示它并且没有显示代码，因此我只能给您广泛的建议，不要这样做。在给actor编程时，忘记线程；这些由 Akka 管理。特别是不要滥用 Akka 的线程（即`Await.result`可能会在您自己的外部线程池上工作，尽管几乎总是有更好的选择）。

最后，如果您使用 actor 只是为了创建“带有邮箱的线程”，那么 Akka 无法帮助您，您将遇到所有常见的传统并发陷阱。

# c++ - 指向常量错误的 C++ 指针

> ID：15231994
> 
> 赞同：2
> 
> 时间：2013-03-05T19:03:55.327
> 
> 标签：c++, pointers, constants

在我正在阅读的一本关于 C++（C++ for Dummies）的书中，有一节内容如下：

```
int nVar = 10;
int* pVar = &nVar;
const int* pcVar = pVar; // this is legal
int* pVar2 = pcVar;      // this is not 
```

这本书接着解释：

> 赋值 pcVar = pVar; 没关系 - 这是添加 const 限制。片段中的最终赋值是不允许的，因为它试图删除 pcVar 的 const-ness

我的问题是为什么最后一行不是“合法的”。我不明白这如何阻碍 pcVar 的“常量性”。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:09:20.153

```
const int *pcVar = pVar;
int *pVar2 = pcVar; 
```

如果`pcVar`是`const int *`，那意味着`int`它所指的可能是`const`。（在这种情况下不是，但它可能是。）因此，如果您 assign `pVar2`，这是一个非常量`int *`，它仍然允许`int`它指向被修改。

因此，如果`pcVar` **实际上**指向 a `const int`，并且您将 a 分配`int *`给它的地址，那么该`int *`指针（`pVar2`在这种情况下）将允许您通过取消引用来修改它，这是非法的（这是违反约束的，因此它会调用未定义的行为）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:08:01.840

这只是说你不能`const`从一个`const`（至少，不是没有`const_cast`）创建一个非指针。

const 背后的想法是拥有不能被意外修改的对象。通过一个简单的任务摆脱`const`它是非常危险的，并且会允许这样的事情：

```
void function(int* m) {
    *m = 20;
}

int main() {
    const int x = 10;
    //Oops! x isn't constant inside function any more, and is now 20!
    function(&x); 
} 
```

另外，请查看[The Definitive C++ Book and Guide List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)，它有很多很好的参考资料（C++ for dummies 并不完全适合）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T19:08:46.080

编译器只知道这`pcVar`是一个`const int*`. 也就是说，它指向一个`const int`. 仅仅因为你把它指向一个非`const` `int`无关紧要的。就编译器所知，指针值可能会在某个时间点更改为真正的`const` `int`. 因此，编译器不会让您从 a 转换为 a `const int*`，`int*`因为它会谎报`const`它所指向的对象的性质。

举一个更简单的例子，考虑：

```
const int x;
const int* pc = x;
int* p = pc; // Illegal 
```

在这里，`x`确实是一个`const int`。如果您可以执行第三行，则可以通过（通过执行）访问该`const int`对象并对其进行修改。那会很糟糕——是有原因的。`p``*pc``x``const`

但是，在您给出的示例中，由于您*知道*原始对象是 non- `const`，您可以使用它`const_cast`来强制编译器信任您：

```
int* pVar2 = const_cast<int*>(pcVar); 
```

请注意，这仅在您*确定*该对象是非. 时才有效`const`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T19:07:24.123

混合 const 和非 const 是非法的。原因是，如果您告诉编译器一个位置的值是 const，然后使用另一个指针来修改该值，则您违反了与第一个元素签订的 const 合同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T19:08:12.923

pcVar 保持不变，但 pVar2 指向一个非常量，可以添加但不能删除 const。编译器不会将原始 nVar 视为非常量，而只是尝试将 const 分配给非常量。否则，您可以绕过 const 并更改值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T19:10:42.287

```
int * pVar = &nVar;
*pVar = 4 //is legal

const int* pcVar = pVar; // this is legal
*pcVar = 3 // this is not legal, we said the value was const thus it can not be changed

int* pVar2 = pcVar;      // this is not legal because...
*pVar2 = 3 -> *pcVar = 3 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-05T19:11:33.147

第二行 int pVar = &nVar; 是错误。g++ 编译器说。错误：从 'int*' 到 'int' 的无效转换</p>

# c# - 来自 EventHandler 的 Console.Writeline

> ID：15231997
> 
> 赞同：8
> 
> 时间：2013-03-05T19:04:04.627
> 
> 标签：c#, windows, console-application

我写了一个简单的异步 TCP-Server - 它运行良好。但现在我想在控制台测试程序上输出接收到的数据。问题是，这行不通！如果我将 MainThread 连接到 EventHandler 程序什么也不做。调试显示 sc05Server_DataAvailable 被调用，但没有发生任何事情。该程序仍然响应。

这里的代码：

```
private void ReadCallback(IAsyncResult asyncResult)
{
    Sc05BdClient sc05BdClient = asyncResult.AsyncState as Sc05BdClient;
    if (sc05BdClient == null) return;
    NetworkStream networkStream = sc05BdClient.NetworkStream;
    int read = networkStream.EndRead(asyncResult);

    if (read == 0)
    {
        lock (clients)
        {
            clients.Remove(sc05BdClient);
            return;
        }
    }

    string data = Encoding.GetString(sc05BdClient.Buffer, 0, read);
    System.Diagnostics.Debug.Print(data);
    OnDataAvailable(this, new DataAvailableEventArgs(data));  <---- here Handler is called
    networkStream.BeginRead(sc05BdClient.Buffer, 0, sc05BdClient.Buffer.Length, ReadCallback, sc05BdClient);
}

public event EventHandler<DataAvailableEventArgs> DataAvailable;

protected virtual void OnDataAvailable(object sender, DataAvailableEventArgs e)
{
    EventHandler<DataAvailableEventArgs> handler = DataAvailable;
    if (handler != null)
        handler(sender, e);
}

public class DataAvailableEventArgs : EventArgs
{
    public string Data;

    public DataAvailableEventArgs(string data)
    {
        Data = data;
    }
} 
```

主程序：

```
class Program
{
    static void Main()
    {
        Sc05BdServer sc05BdServer = new Sc05BdServer(IPAddress.Any, 2006);
        sc05BdServer.DataAvailable += sc05BdServer_DataAvailable;
        sc05BdServer.Start();

        Console.ReadKey();
        sc05BdServer.Stop();
    }

    static void sc05BdServer_DataAvailable(object sender, DataAvailableEventArgs e)
    {
       Console.WriteLine(e.Data);  <--- this is called once
    }
} 
```

我认为这与线程有关 - 但我不知道如何使用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T09:00:23.877

尽管控制台应该对此免疫，但您可能会遇到某种种族问题。检查这个问题，但请注意我无法重现该问题：[Strange behavior of Console.ReadKey() with multithreading](https://stackoverflow.com/questions/15143931/strange-behaviour-of-console-readkey-with-multithreading#comment21320353_15143931)