# StackOverflow 问答 14194000-14194999

# telerik - Telerik：如何从页脚“显示 zz 的项目 xx-yy”编辑文本

> ID：14194001
> 
> 赞同：3
> 
> 时间：2013-01-07T10:26:21.547
> 
> 标签：telerik, telerik-grid, telerik-mvc

在我的 Telerik mvc 网格中，如何更改页脚中的文本“显示 zz 的项目 xx-yy”。我只想将其显示为“xx-yy of zz”。我尝试了以下方法，但未能成功。

```
$('#MyGrid').find('.t-status-text').text("some HTML"); 
```

上面的代码在页面加载时更改了文本，但在数据加载时再次更改为默认文本。

我还尝试编辑 telerik.grid.min.js 文件，但最终无处可去。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:51:54.303

一种更简单的方法是[本地化您的网格](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-localization.html)并自定义 **DisplayItems**资源消息。

当然，您的方法也可以工作（稍有改进） - 您需要在[OnDataBound](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#OnDataBound)事件发生时执行此逻辑（不仅是在加载页面时 - 正如您目前所做的那样）。

# html - 使用 html/css/javascript 在菜单 li 中添加两个背景

> ID：14194005
> 
> 赞同：0
> 
> 时间：2013-01-07T10:26:44.543
> 
> 标签：html, css

我有这个菜单，我需要向其中添加这样的背景：

```
http://faraon.al/faraon/hover.jpg 
```

当用户将鼠标悬停在菜单上时，就会出现这种情况。

我的问题是，我可以制作蓝色+黄色的部分，但是那个小半圈我不知道如何插入它。任何帮助，将不胜感激！我是这样使用的：

```
menu ul li{
    background-image: url(images/bgtop.png), url(images/bg.png);
    background-repeat: repeat-x, repeat;
} 
```

我看到您可以将两个背景添加到一个地方，但它并没有按照我需要的方式工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:31:54.030

试试这个：

```
menu ul li:hover {
    background-image: url(images/bgtop.png), url(images/bg.png);
    background-repeat: no-repeat;
    background-position: bottom center, top left;
} 
```

# macos - 无法在 Max OS X 10.7.5 上启动 javafx jar

> ID：14194007
> 
> 赞同：4
> 
> 时间：2013-01-07T10:26:48.910
> 
> 标签：macos, javafx, executable-jar

我在 VMware 播放器上运行 Mac OS X 10.7.5。

我已经在我的系统上安装了这些 -

1.  我有 jdk-7u12-ea-bin-b07-macosx-x86_64-27_dec_2012.dmg

2.  jre-7u10-macosx-x64.dmg

3.  netbeans-7.2.1-ml-javase-macosx.dmg

我已将 java Java Home 设置为指向 java 1.7。在命令提示符下，它显示版本为 -

Java(TM) SE 运行时环境 (build 1.7.0_12-ea-b07)

Java HotSpot(TM) 64 位服务器 VM（构建 24.0-b28，混合模式）

Whenener 我正在尝试运行从我的 JavaFX 应用程序创建的 jar 文件。它在命令提示符下抛出这个致命错误-

> ```
> # A fatal error has been detected by the Java Runtime Environment:
> 
> #  SIGSEGV (0xb) at pc=0x00007fff88a54fdf, pid=404, tid=18947
> 
> # JRE version: Java(TM) SE Runtime Environment (7.0_12-b07) (build 1.7.0_12-ea-b07)
> 
> # Java VM: Java HotSpot(TM) 64-Bit Server VM (24.0-b28 mixed mode bsd-amd64 compressed oops)
> 
> # Problematic frame:
> 
> # C  [libobjc.A.dylib+0x9fdf]  objc_msgSend_fixup+0x5f 
> ```
> 
> # 无法写入核心转储。核心转储已被禁用。要启用核心转储，请在再次启动 Java 之前尝试“ulimit -c unlimited”
> 
> ```
> # An error report file with more information is saved as:
> 
> # /Users/User/Desktop/JavaFX/hs_err_pid404.log
> 
> # If you would like to submit a bug report, please visit:
> 
> #   http://bugreport.sun.com/bugreport/crash.jsp
> 
> # The crash happened outside the Java Virtual Machine in native code.
> 
> # See problematic frame for where to report the bug.
> 
> Abort trap: 6 
> ```

[前http://neelamsharma.s3.amazonaws.com/jarerrorlog.log](http://neelamsharma.s3.amazonaws.com/jarerrorlog.log)时致命错误的详细信息

在启动 netbeans 时，它会产生这个致命错误 - [http://neelamsharma.s3.amazonaws.com/hs_err_while%20_running_netbeans.log](http://neelamsharma.s3.amazonaws.com/hs_err_while%20_running_netbeans.log)

在从系统偏好设置打开 Java 偏好设置时，它显示了这个致命的错误 - [http://neelamsharma.s3.amazonaws.com/javapreferences.log](http://neelamsharma.s3.amazonaws.com/javapreferences.log)

我无法在 Mac OS X 上做任何事情，我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:38:14.487

我为这个问题记录了一个问题：http: [//javafx-jira.kenai.com/browse/RT-28144](http://javafx-jira.kenai.com/browse/RT-28144)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:53:57.077

卸载 EA jdk 并使用已发布的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-23T12:42:37.023

Neelam，您只需要`prism.order`在 JavaFX 加载您的`javafx.application.Applcation`类之前更改系统属性。

例如，如果您的类`public static void main(String[])`扩展了`javafx.application.Application`该类，则将该`main(String[])`方法移至另一个类`Main.java`。

2）向您的`main(String[])`方法添加一些将`prism.order`属性更改为`"sw"`（软件渲染）的代码，例如：

```
public class Main {

    public static void main(String[] args) {
        AccessController.doPrivileged(new PrivelegedAction<Void>() {
            @Override
            public Void run() {
                Properties props = System.getProperties();
                props.put("prism.order", "sw");
                Application.launch(YourApplication.class);
                return null;
            }
        });
    }

} 
```

# objective-c - MKMapView 显示用户位置不起作用

> ID：14194008
> 
> 赞同：1
> 
> 时间：2013-01-07T10:26:54.293
> 
> 标签：objective-c, ios, ios6, maps

我有一个 MKMapView 。在 MKMapView 的属性检查器中，我检查了显示用户位置选项并运行该应用程序。但它没有显示用户位置。任何帮助表示赞赏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:35:50.293

如果您在模拟器中运行应用程序，那么您需要打开用户位置模拟。您可以通过单击 Xcode 中调试控制台上方的小位置箭头来打开它，或者您可以通过转到 Debug > Location > Custom Location... 在模拟器中启用更可自定义的位置...

# regex - 将文件与白名单正则表达式（带有特殊字符）进行比较

> ID：14194010
> 
> 赞同：-2
> 
> 时间：2013-01-07T10:27:03.933
> 
> 标签：regex, shell, sed, grep

我有两个文件，一个是白名单文件（其中包含列入白名单的调用堆栈），另一个是正在测试的调用堆栈文件。示例内容：

```
Call stack: [thread] | object 1.0 | object 2.0 | object 3.0 | ...... | malloc
Call stack: [thread] | object 1.1 | object 2.1 | object 3.1 | ...... | malloc
Call stack: [thread] | object 1.2 | object 2.2 | object 3.2 | ...... | malloc
Call stack: [thread] | object 1.3 | object 2.3 | object 3.3 | ...... | malloc 
```

现在我得到一个包含以下内容的测试文件

```
Call stack: [thread] | object 1.0 | object 2.0 | * | ...... | malloc
Call stack: [thread] | object 1.1 | * | * | ...... | malloc
Call stack: [thread] | * | object 2.2 | object 3.2 | ...... | malloc
Call stack: [thread] | object 1.3 | object 2.3 | * | ...... | malloc 
```

我想要一个算法，如果这两个文件相互比较，它会返回一个 true 说明文件是相同的。即测试文件在白名单文件之外没有调用堆栈。

我知道在正则表达式上带有 grep 的 while 循环应该可以解决问题，问题是当我尝试遇到问题时，可能是由于调用堆栈中的特殊字符。

**约束**：只需要使用外壳。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:42:51.283

如果不涉及正则表达式，您可以尝试以下`-F`选项`grep`：

```
grep -xvFf whitelist testfile 
```

# google-visualization - Google Chart：如何绘制 LineChart 的纵轴？

> ID：14194013
> 
> 赞同：4
> 
> 时间：2013-01-07T10:27:18.933
> 
> 标签：google-visualization, linechart

我想在我的网页上画一个谷歌的折线图！这是我的js代码：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['x', 'Cats', 'Blanket 1'],
    ['A',   1,       10],
    ['B',   2,       5],
    ['C',   4,       12],
    ['D',   8,       5]
  ]);

  var options = {
      curveType: 'function',
      lineWidth: 2,
      hAxis: {
        baselineColor: 'red', 
        textStyle: {color: '#000', fontName: 'Arial', fontSize: 10}, 
        gridlines: { color: '#f3f3f3', count: 5} 
      },
      vAxis: {
        baseline: 0, 
        viewWindowMode: "explicit", 
        viewWindow:{ min: 0 },
        gridlines: { color: '#f3f3f3', count: 6} 
      }
    };
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, options);
} 
```

但是，结果图表是在没有任何垂直轴线的情况下绘制的。如何添加垂直轴线，如下图所示： ![在此处输入图像描述](../Images/d55a1149a3e41ca14f21e9c862662659.png) 非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:56:50.840

类别轴不支持网格线。因为有问题的数据使用字符串作为类别（X 轴标签），所以无法判断它们“应该”如何拆分。但是，您可以使用以下技术解决此问题。

技巧 1：将您的数据转化为数值型

所以现在你有字符串，这意味着没有网格线。我们需要网格线，所以我们必须纠正这个小问题。所以我们把我们的第一列 (X) 变成一个数字，上面有一个格式，所以当你将鼠标悬停在它上面时它会显示“A”或“B”或“C”（在图例中）：

```
 var data = new google.visualization.DataTable();
  data.addColumn('number', 'x');
  data.addColumn('number', 'Cats');
  data.addColumn('number', 'Blanket 1');
  data.addRows([
    [{v: 1, f:'A'},   1,       10],
    [{v: 2, f:'B'},   2,       5],
    [{v: 3, f:'C'},   4,       12],
    [{v: 4, f:'D'},   8,       5]
  ]); 
```

但这并不能解决问题。现在我们在底部轴上有数字，以奇怪的 0.8 间隔截断。所以我们想解决这个问题。不幸的是，使用 hAxis，您无法设置最小/最大值并坚持下去（我不知道为什么）。我们可以通过在我们的选项中添加基线：0 来修复最小值。

为了获得最大值，我们必须添加一个虚拟系列。

把它们放在一起，我们得到这个：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('number', 'x');
  data.addColumn('number', 'Cats');
  data.addColumn('number', 'Blanket 1');
  // This dummy series is to extend the chart from 0-5 for padding
  data.addColumn('number', null);
  data.addRows([
    [{v: 1, f:'A'}, 1, 10, null],
    [{v: 2, f:'B'}, 2, 5, null],
    [{v: 3, f:'C'}, 4, 12, null],
    [{v: 4, f:'D'}, 8, 5, null],
    [{v: 5, f:''}, null, null, {v: 0, f:''}]
  ]);

  options = {
    curveType: 'function',
    lineWidth: 2,
    hAxis: {
      // Show a baseline at 0
      baseline: 0,
      // 6 Gridlines, 4 labels + left and right for padding
      gridlines: {
        count: 6
      },
    },
    vAxis: {
      baseline: 0,
    },
    series: [
      {},
      {},
      // Hide our dummy series
      {
        lineWidth: 0,
        pointsize: 0,
        visibleInLegend: false
      },
    ]
  };
  chart1 = new google.visualization.LineChart(document.getElementById('visualization'));
  chart1.draw(data, options);
} 
```

现在它看起来更像你想要的。有两个主要问题。一个是，如果您将鼠标悬停在图表的右下角，则会弹出一个空白工具提示（我希望这不是一个大问题，尽管如果您使图表与事件交互，您可能必须进行一些错误捕获）。另一个是我们图表的底部显示的是数字，而不是字母。

不幸的是，没有简单的方法将数字格式化为字母（至少在 Google 实现整个 ICU 模式集而不仅仅是日期/数字之前）。所以我们需要另一种解决方法。基本上，我所做的只是创建一个全新的图表来制作标签。然后我对其进行格式化，使其隐藏除标签之外的所有内容，并确保它与上面的图表水平对齐。

```
 function drawVisualization() {
    // Create and populate the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('number', 'x');
    data.addColumn('number', 'Cats');
    data.addColumn('number', 'Blanket 1');
    // This dummy series is to extend the chart from 0-5 for padding
    data.addColumn('number', null);
    data.addRows([
      [{v: 1, f:'A'}, 1, 10, null],
      [{v: 2, f:'B'}, 2, 5, null],
      [{v: 3, f:'C'}, 4, 12, null],
      [{v: 4, f:'D'}, 8, 5, null],
      [{v: 5, f:''}, null, null, {v: 0, f:''}]
    ]);

    options = {
      curveType: 'function',
      lineWidth: 2,
      hAxis: {
        // Show a baseline at 0
        baseline: 0,
        // 6 Gridlines, 4 labels + left and right for padding
        gridlines: {
          count: 6
        },
        // Hide our labels
        textPosition: 'none'
      },
      vAxis: {
        baseline: 0,
      },
      series: [
        {},
        {},
        // Hide our dummy series
        {
          lineWidth: 0,
          pointsize: 0,
          visibleInLegend: false
        },
      ]
    };

    // Add dummy data for the axis labels
    var data2 = new google.visualization.DataTable();
    data2.addColumn('string', 'x');
    data2.addColumn('number', 'dummy');
    data2.addRows([
      ['A', null],
      ['B', null],
      ['C', null],
      ['D', null]
    ]);

    chart1 = new google.visualization.LineChart(document.getElementById('visualization'));
    chart1.draw(data, options);

    chart2 = new google.visualization.LineChart(document.getElementById('visualization2'));
    chart2.draw(data2,
                {
                  chartArea: {
                    top:0,
                    height:"0%"
                  },
                  min: 0,
                  max: 0,
                  hAxis: {
                    baselineColor: '#FFFFFF'
                  },
                  vAxis: {
                    baselineColor: '#FFFFFF',
                    direction: -1,
                    textPosition: 'none',
                    gridlines: {
                      color: '#FFFFFF'
                    }
                  }
                });
  } 
```

只需在第一个下方再制作一个，并使用 CSS 将其正确对齐（将其浮动在同一位置，或诸如此类），看起来标签属于上面的图表。

这不是光荣的，但它有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-08T09:32:20.103

通过使用有一个更优雅的解决方案`xticks`：为此，我们定义了一个这样的数据表：

```
var data = new google.visualization.DataTable();
        data.addColumn('number', 'Month');
        data.addColumn('number', 'Sales');
        data.addRows([
        [{v: 0, f:'Jan'}, 1000],
        [{v: 1, f:'Feb'}, 1170],
        [{v: 2, f:'Mar'}, 660],
        [{v: 3, f:'Apr'}, 1030]
    ]); 
```

我们在其中设置数值以及`Month`轴的字符串标签。
仅使用这个和`format`删除属性，我们将得到垂直线但数字而不是 x 轴标签的字符串，这不是我们想要的。
为了解决这个问题，我们可以设置`xticks`强制绘图中的正确标签。

```
var options = {
        title: '',
        hAxis: {
            title: 'Month',
            titleTextStyle: {
                color: '#333'
            },
            baseline: 0,
            gridlines: {
                color: '#f3f3f3',
              count: 4
            },
           ticks: [{v: 0, f:'Jan'},{v: 1, f:'Feb'},{v: 2, f:'Mar'},{v: 3, f:'Apr'}], // <------- This does the trick
        },
        vAxis: {
            minValue: 0,
            gridlines: {
                color: '#f3f3f3',
                count: 5
            }
        }
    }; 
```

特此完整的工作小提琴向您展示如何完成：http: [//jsfiddle.net/j29Pt/417/](http://jsfiddle.net/j29Pt/417/)

# java - Java/HTML - 防止 Outlook 在表格中换行

> ID：14194015
> 
> 赞同：0
> 
> 时间：2013-01-07T10:27:25.840
> 
> 标签：java, html, css, word-wrap

我有一个定义如下的css：

```
body {
    font-size: 80%;
    font-family: Calibri;
}

table.gridtable {
    color:#333333;
    text-align: center;
    border-width: 1px;
    border-color: #666666;
    border-collapse: collapse;
}

table.gridtable th {
    border-width: 1px;
    white-space:nowrap;
    padding: 8px;
    border-style: solid;
    border-color: #666666;
    background-color: #dedede;
}

table.gridtable td {
    border-width: 1px;
    white-space:nowrap;
    padding: 8px;
    border-style: solid;
    border-color: #666666;
    background-color: #ffffff;
} 
```

随后将其加载到我的 Java 主方法中。如您所见，我试图防止在标题/单元格中进行任何包装。然而，当在 Outlook 中生成并打开电子邮件时，有些行被换行，有些则没有。包装也是愚蠢的，例如一个单词 International 包装如下： Interantion|nal... 知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-07T11:08:51.837

尝试在 nowrap 属性处添加一个空格，还有一些基于 javascript 的 wrap 函数可用，请查看它们。

# java - 如何将项目划分为类

> ID：14194019
> 
> 赞同：-2
> 
> 时间：2013-01-07T10:27:42.470
> 
> 标签：java, c#, c++

*   我应该在什么基础上把项目分成几类？

*   我最多可以细分项目多少个类？我怎么知道什么时候停止？

*   将整个项目放在一个班级中是一种好习惯吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T10:30:24.903

> 我应该在什么基础上把项目分成几类？

将代码分解为逻辑组件。你想让你的代码尽可能简单明了。想象有人不知道/不记得你的项目做了什么并且不想阅读项目中的每一行代码来维护它。（这可能是六个月后的您）您如何使某人尽可能容易地找到需要他们注意的系统部分。

> 我最多可以细分项目多少个类？我怎么知道什么时候停止？

我会让每节课大约一到十个屏幕截图（非常接近）

任何超过 10,000 个类的项目都可能是一个非常大的项目。

> 将整个项目放在一个班级中是一种好习惯吗？

如果项目非常非常简单，是的。这个论坛上的许多简短示例只是一种方法或一类。

如果它相当简单，那么可能只需要几个类。对于一个大项目来说，几百甚至几千可能是一个合理的数字。

# wordpress - 如何检查是什么降低了我的网站速度？

> ID：14194020
> 
> 赞同：1
> 
> 时间：2013-01-07T10:27:48.600
> 
> 标签：wordpress, web

我的[网站](http://www.mamou-mani.com)加载大约需要 15 秒以上。我怎样才能找到让它这么慢的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:40:25.460

有几种工具可以检查您的网站是否存在性能问题，例如我使用 Google 的 Pagespeed：[https ://developers.google.com/speed/pagespeed/](https://developers.google.com/speed/pagespeed/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:42:29.440

您可以使用 Chrome -> Web 开发人员工具并检查“网络”部分以查看哪些元素会减慢您的速度。此外，您还会看到代码中的一些错误、丢失的文件等。

对我来说，加载需要 5 秒，所以还不错。

还要考虑网站的总重量。IMO 5mb 有点高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:31:59.400

如果您已经开发了该网站，那么您是回答这个问题的最佳人选。如果您还没有，那么您可能想查看由 Yahoo 开发的用于 Firefox的[YSLOW插件](http://yslow.org/)

> **Web 性能最佳实践和规则**
> 
> Yahoo! 的 Exceptional Performance 团队已经确定了 34 条影响网页性能的规则。YSlow 的网页分析基于这 34 条可测试规则中的 23 条。单击下面的每个性能规则以查看详细信息。

[http://yslow.org/](http://yslow.org/)

# iphone - 多个 uiscrollviews，滚动问题

> ID：14194021
> 
> 赞同：1
> 
> 时间：2013-01-07T10:27:52.163
> 
> 标签：iphone, ipad, uiscrollview

我有一个 iPad 应用程序，它显示财务信息，例如股票数据信息和与股票相关的提要。显示的股票数据信息是在 UIScrollView 中显示的自动滚动股票行情。与股票相关的提要也显示为带有另一个 UIScrollView 的自动滚动循环视图。这两个视图也可以手动滚动。

问题是，当用户手动滚动滚动视图之一时；例如，滚动提要滚动视图，股票代码滚动视图会自动停止。当手动滚动股票代码时，提要滚动视图停止。该视图还有一个表格视图，当滚动时会停止自动滚动视图（饲料和股票）。我已经实现了滚动视图的委托方法，并且通过检查委托方法中的特定滚动视图来定义操作。

我正在使用一个运行 UIViewanimation 的计时器来自动滚动股票行情。

这是 UIScrollview 的默认行为吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:53:07.513

让它工作..感谢这篇文章.. [UIScrollView 暂停 NSTimer 直到滚动完成](https://stackoverflow.com/questions/605027/uiscrollview-pauses-nstimer-until-scrolling-finishes)

```
NSTimer *timer = [NSTimer timerWithTimeInterval:... 
                                         target:...
                                       selector:....
                                       userInfo:...
                                        repeats:...];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

[http://bynomial.com/blog/?p=67](http://bynomial.com/blog/?p=67)

# c# - SAP 后台工作未开始

> ID：14194028
> 
> 赞同：0
> 
> 时间：2013-01-07T10:28:13.570
> 
> 标签：c#, background, saprfc, sap-dotnet-connector, sap-r3

我有问题。通过 RFC 执行下面的代码时，我们的一些外部人员开发的后台代码不会执行，但是当通过 SE37 通过频率启动 BAPI 时，我们的后台程序会启动。

系统：C#中的SAP R/3 / sapnco.dll；驱动器 C 上的 librfc32.dll：（包含在 SAP 安装中）

```
... some Code ...
RfcSessionManager.BeginContext(rfcDest);
...
IRfcFunction myfun = rfcRep.CreateFunction("BAPI_EQUI_DISMANTLE");
myfun.SetValue(.....);
myfun.Invoke(rfcDest);

myfun = rfcRep.CreateFunction("BAPI_TRANSACTION_COMMIT");
myfun.Invoke(rfcDest);
RfcSessionManager.EndContext(rfcDest); 
```

知道有什么问题吗？我不允许发布我们的 ABAP 代码，但我认为这应该不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:23:14.003

这是我们的 abab 代码中的错误。

抱歉各位浪费了你们的时间。从外部使用 BAPI 时，缺少一个标志，这是我们程序所必需的。

知道我们添加了标志，一切正常。

感谢您的所有回答，外部断点是个好主意。

# android - 片段变得可见

> ID：14194029
> 
> 赞同：4
> 
> 时间：2013-01-07T10:28:15.787
> 
> 标签：android

每次我的片段对用户可见时，我都想执行一段代码来调用 Web 服务，获取一些数据并将其显示在屏幕上。我得到了网络服务部分等工作，但不确定在什么情况下我必须添加我的代码....我试过：

1.  开始
2.  恢复
3.  附加

但是我的代码不会每次都触发。

我正在使用带有 SherlockFragment 的 Android v4 comp lib 作为我的基类。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-10T07:56:07.370

You can use

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    if (isVisibleToUser) { }
    else {  }
} 
```

Have a look at [this](https://stackoverflow.com/questions/10024739/how-to-determine-when-fragment-becomes-visible-in-viewpager)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-04T23:19:39.183

这可能很老了，但我发现 setUserVisibleHint() 不适用于我的许多用例。相反，我不得不求助于使用 ViewTreeObserver 的 hack。

基本上，在您的片段初始化后，您会在其中获得一个视图并执行以下操作：

```
myViewInFragment.getViewTreeObserver().addOnGlobalLayoutListener(
    new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            myMethodWhenFragmentFirstBecomesVisible();
            myViewInFragment.getViewTreeObserver().removeOnGlobalLayoutListener(this);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T10:31:45.973

`onCreateView()`

每次更改 Fragment 并且新的 Fragment 变得可见时调用..

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-07T06:00:32.763

下面的方法用于确定 Fragment 何时在用户面前可见。

```
private boolean loding= false; // your boolean flage

@Override
public void setUserVisibleHint(boolean isFragmentVisible) {
super.setUserVisibleHint(true);
if (this.isVisible()) {
    // we check that the fragment is becoming visible first time or not
    if (isFragmentVisible && !loding) {
       //Task to doing while displaying fragment in front of user
        loding = true;         
    }
}} 
```

* * *

## 回答 #5

> 赞同：-17
> 
> 时间：2013-01-07T10:39:25.610

`onResume()`每次您的片段对用户可见时都会调用。如果没有，您的代码还有其他问题

`onCreateView()`在片段第一次需要绘制其 UI 时调用

**更新**：这个被接受的答案在 5 年前有效 - 现在不再适用

# highcharts - 将 JSON 数据加载到 Highchart

> ID：14194032
> 
> 赞同：1
> 
> 时间：2013-01-07T10:28:34.793
> 
> 标签：highcharts

我正在尝试使用从 MySQL 获取的数据绘制样条图。

```
<script> 
var chart; 
function requestData() 
{
    $.ajax({
    url: 'get_hourly_data.php',
    datatype: "json",
    success: function(data) 
    {
            chart.series[0].addPoint(data);
    },      
    });
}
$(document).ready(function() {
    Highcharts.setOptions({
        global: {
            useUTC: false
        }
    });
chart = new Highcharts.Chart({
     chart: {
        renderTo: 'graph',
        type: 'spline',
        events: {
            load: requestData
        }
     },
     title: {
        text: 'Monitoring'
     },
     xAxis: {
        type: 'datetime',
            tickPixelInterval: 150,
            maxZoom: 20 * 1000
     },
     yAxis: {
        minPadding: 0.2,
            maxPadding: 0.2,
            title: {
                text: 'Response time (ms)',
                margin: 80
            }
     },
     series: [{
        name: 'Time',
        data: [],
     }]
  });
  });

    </script> 
```

get_hourly_data.php

```
<?php
// Query to fetch half an hour data from current time
$query = "SELECT UNIX_TIMESTAMP(current_ts), response_time FROM site_response WHERE current_ts >= DATE_SUB( NOW( ) , INTERVAL 30 MINUTE ) AND site_id ='2'";

$result = mysql_query($query,$db);

while($item = mysql_fetch_array($result)) 
{
    $current_time = $item['UNIX_TIMESTAMP(current_ts)']*1000;
    $response_time = $item['response_time']*1;      
    $ret = array($current_time, $response_time);        
    echo json_encode($ret);
}
?>

My JSON data looks like this
[1357536877000,0.012178182601929][1357536881000,0.0123610496521][1357536891000,0.011971950531006][1357536895000,0.011821985244751][1357536916000,0.010467052459717] 
```

如果我通过在 get_hourly_data.php 中替换下面提到的查询来仅限制一个返回值，则可以用一个值绘制图形，但不能绘制一组值。要求是从现在开始获取半小时的数据并绘制样条图。

```
$query = "SELECT UNIX_TIMESTAMP(current_ts), response_time FROM site_response WHERE current_ts >= DATE_SUB( NOW( ) , INTERVAL 30 MINUTE ) AND site_id ='2' limit 1"; 
```

我想在将服务器数据添加到图形时做错了。可能在 jQuery 成功函数之后。我是第一次使用 stackoverflow 用户和 jQuery 新手。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:36:44.480

发布完美运行的代码。

```
<script> 
var chart; 
function requestData() 
{
    $.ajax({
    url: 'get_hourly_data.php',
    datatype: "json",
    success: function(data) 
    {
           chart.series[0].setData(data);
    },      
    });
}
$(document).ready(function() {
    Highcharts.setOptions({
        global: {
            useUTC: false
        }
    });
chart = new Highcharts.Chart({
     chart: {
        renderTo: 'graph',
        type: 'spline',
        events: {
            load: requestData
        }
     },
     title: {
        text: 'Monitoring'
     },
     xAxis: {
        type: 'datetime',
            tickPixelInterval: 150,
            maxZoom: 20 * 1000
     },
     yAxis: {
        minPadding: 0.2,
            maxPadding: 0.2,
            title: {
                text: 'Response time (ms)',
                margin: 80
            }
     },
     series: [{
        name: 'Time',
        data: [],
     }]
  });
  });
    </script> 
```

get_hourly_data.php：

```
$ret = array();
while($item = mysql_fetch_array($result)) 
{
        $current_time = $item['UNIX_TIMESTAMP(current_ts)']*1000;
        $response_time = $item['response_time']*1;  
        $y = rand(0, 100);          
        $ret[] = array($current_time, $response_time);      
    }
    echo json_encode($ret); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:43:07.057

`$query = "SELECT UNIX_TIMESTAMP(current_ts) * 1000, response_time FROM site_response WHERE current_ts >= DATE_SUB( NOW( ) , INTERVAL 30 MINUTE ) AND site_id ='2'";`

```
$dataArr = new array();
while($item = mysql_fetch_array($result)) 
{
    $current_time = $item['UNIX_TIMESTAMP(current_ts)'];
    $response_time = $item['response_time'];      
    $dataArr[] = array($current_time, $response_time);        
}
echo json_encode($dataArr); 
```

关于成功函数

```
success: function(data) 
{
    data = jQuery.parseJSON(data);
    chart.series[0].addPoint(data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:04:06.213

您在 while 循环内回显。您需要为数据创建一个数组数组。

你需要你的 JSON 看起来像

```
[[1357536877000,0.012178182601929],[1357536881000,0.0123610496521],[1357536891000,0.011971950531006],[1357536895000,0.011821985244751],[1357536916000,0.010467052459717]] 
```

这样的事情可能会奏效

```
$dataArr=new array();
while($item = mysql_fetch_array($result)) 
{
    $current_time = $item['UNIX_TIMESTAMP(current_ts)']*1000;
    $response_time = $item['response_time']*1;      
    $dataArr[] = array($current_time, $response_time);        
}
echo json_encode($dataArr); 
```

# spring - Spring MVC 复选框标签未发布所做的更改

> ID：14194033
> 
> 赞同：1
> 
> 时间：2013-01-07T10:28:39.560
> 
> 标签：spring, data-binding, spring-mvc

我在使用 spring mvc 复选框标签时遇到问题。我有一个 BookmarkMapping 对象，它又具有 List 对象。在文件夹映射里面有 id、name 和 isMapped (boolean) 三个属性。这是我打算显示复选框的 isMapped 属性。

所以在我的页面中，我将 modelAttribute 设为“bookmarkMapping”。其中有一个文件夹映射列表。对于我的复选框选中属性，folderMapping 中的每个项目都是 isMapped 设置为 true 或 false。

我正在尝试这个

```
<c:forEach var="folderMapping" items="${bookmarkMapping.folderMapping}" varStatus="i">
    <form:checkbox path="folderMapping[${i.count-1}].isMapped" label="${folderMapping.folderName}"/>
</c:forEach> 
```

这会在 html 中很好地显示复选框，但是在发布时它也不会在发布的对象中将复选框的更改反映为 true / false。它总是显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:39:04.950

`checkbox`设置标签的 value 属性。

```
<c:forEach var="folderMapping" items="${bookmarkMapping.folderMapping}" varStatus="i">
    <form:checkbox path="folderMapping[${i.count-1}].isMapped" 
         value = "${folderMapping[${i.count-1}].isMapped}" 
         label="${folderMapping.folderName}"/>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:32:49.000

你试过`<form:checkboxes />`标签吗？我认为这就是您在这里所需要的，也许可以解决您的问题。尝试这样的事情，替换你的`<c:forEach />`标签：

```
<form:checkboxes path="folderMapping" items="${allCheckboxValues}" itemLabel="folderName" itemValue="isMapped"/> 
```

您需要`allCheckboxValues`在控制器中预先填充所有可能的值。

查看有关此标签的[spring 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/view.html#view-jsp-formtaglib-checkboxestag)以获取更多帮助和[TLD 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/spring-form.tld.html#spring-form.tld.checkboxes)。

# java - 在android中将日期与毫秒进行比较

> ID：14194036
> 
> 赞同：1
> 
> 时间：2013-01-07T10:28:46.050
> 
> 标签：java, android, time, milliseconds, android-date

我有这种格式的日期**“2003 年 3 月 23 日”**和以**毫秒为单位**的时间，其中包括**date+time**。

现在我想将此**日期**与**毫秒**进行比较，无论它是否相同。我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:43:45.073

我想这可能有效：（使用它是一个好习惯`Calendar`）

```
private boolean areEqual(String theDate, long currentTimeMillis) {
    try {
        Calendar c1 = Calendar.getInstance();
        c1.setTime(new SimpleDateFormat("dd-MMM-yyyy").parse(theDate));
        Calendar c2 = Calendar.getInstance();
        c2.setTime(new Date(currentTimeMillis));
        return ((c1.get(Calendar.DAY_OF_YEAR) == c2.get(Calendar.DAY_OF_YEAR))
                &&
           (c1.get(Calendar.YEAR) == c2.get(Calendar.YEAR)));

    } catch (ParseException e) {
        e.printStackTrace();
        return false;
    }
} 
```

像这样调用函数：

```
boolean result = areEqual("23-March-2003", System.currentTimeMillis()); 
```

# java - 如何将 jar 文件作为项目导入 eclipse 以使用该 jar 类的源代码

> ID：14194040
> 
> 赞同：1
> 
> 时间：2013-01-07T10:29:05.347
> 
> 标签：java

我有一个 jar 文件。我想查看这个 jar 文件的类的源代码，我需要使用这个 jar 文件的源代码。是否有任何选项可以查看和使用该 jar 文件源代码？eclipse 中是否有任何选项可以提取 jar 文件并查看该 jar 文件的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:32:17.017

如果您将 jar 作为依赖项添加到项目中，您还可以将源代码链接到它。右键单击项目->构建路径->配置构建路径。在那里，选择您链接到项目中的 jar，扩展它并在“源附件”下，您可以添加包含此特定 jar 源的 jar

![在此处输入图像描述](../Images/b719705dc5ddb0dd3386b7f6c724c83c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:58:43.707

您引用的 JAR 文件也可能没有附加源代码。通常，在下载第三方库时，您可以分别下载字节码和源代码的 JAR。最好的检查方法是简单地提取 JAR 文件（使用 ZIP 提取工具）并检查那里是否有源代码。如果是这样，您可以执行以下操作： 1\. 将 JAR 添加到您的 Eclipse 项目（只需将其拖到那里并选择是要复制还是链接到 JAR）。2\. 每当您打开不附带源代码的类文件并且显示“找不到源”页面时 - 只需按下按钮“附加源..”并找到带有源代码的 JAR 文件。

[编辑] 使用[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)从 JAR 文件中包含的 *.class 文件中提取源代码（*.java 文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:32:09.490

您可以添加带有字节码的 JAR 文件并附加源 JAR。你不能没有第一个；第二个是可选的。

在 IntelliJ 中很容易做到；我不确定 Eclipse 中的步骤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:03:23.020

右键单击您的 procjet。选择属性。

选择图书馆 ![在此处输入图像描述](../Images/91d7f30063846643eddc1cbec29b4aba.png) 选择你的罐子 ![在此处输入图像描述](../Images/5778cfc3ca44bccf389c591461acd94c.png) 利润 ![在此处输入图像描述](../Images/1e7844b20e170577fffbaa228b9c9092.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-27T21:15:56.737

这适用于插件罐（如果是你的情况）：

1.  确保将 jar 放入目标平台文件夹

2.  刷新你的目标平台：Window -> Preferences -> Target Platform -> Select your current target -> Edit -> Finish -> Reload -> Ok

3.  打开“插件”视图：Window -> Show view -> Plug-ins

4.  在该视图中，找到新的插件 jar：右键单击并导入为 -> 源项目。

您将在工作区中将其作为插件项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-28T12:02:09.533

在我的情况下，我在 Java Build Path Source 附件中有有意义的路径（不是 NONE），但文件本身在这个地方不存在。我将项目配置为 Maven 性质。然后从 Maven make 下载源文件 - 文件 -source.jar 出现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-08T07:54:19.767

是的，您可以看到在您的 jar 文件中添加的所有文件的源代码。首先您必须添加与 Marcin Szymczak 所示相同的 jar 文件。然后单击“引用库”。之后点击你的jar。你可以查看所有类的源代码。在我的例子中是jar文件-Hackerrank.jar，你可以看到类的源代码：

[![在此处输入图像描述](../Images/4ed97c40601689e9dca6153f4895c959.png)](https://i.stack.imgur.com/4JWlx.png)

# jquery-ui - 在打开事件中更改 jquery ui 对话框的位置

> ID：14194041
> 
> 赞同：1
> 
> 时间：2013-01-07T10:29:10.683
> 
> 标签：jquery-ui

我无法更改 jQuery-ui 对话框的位置。

我正在做的是将图像加载到打开事件中的对话框中。由于图像的高度未知，对话框不再居中在窗口中。所以我也在加载图像后重新定位它，但重新定位似乎被忽略了。

但是，如果我在重新定位之前添加一个警报，它工作正常，所以很明显某种时间问题在这里发挥作用。

有什么解决方法吗？

我的代码的相关位是：

```
$( "#dialog-message" ).dialog({
  open: function(e, ui){
    $("#theImage").attr("src","aRandomImage.jpg");
    alert(1);  // causes the next line to work properly
    $(this).dialog("option", "position", {my: "center", at: "center", of: window});
  },
  ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:36:07.080

在重新定位之前，您必须等待图像加载：

```
$( "#dialog-message" ).dialog({
  open: function(e, ui){
    var $img = $("#theImage"), mydialog = $(this);
    $img.bind('load',function(){ // bind load event
        mydialog.dialog("option", "position", {my: "center", at: "center", of: window});
    });
    $img.attr("src","aRandomImage.jpg"); // start loading
  } 
```

见： [http ://css-tricks.com/snippets/jquery/fixing-load-in-ie-for-cached-images/](http://css-tricks.com/snippets/jquery/fixing-load-in-ie-for-cached-images/)

对于 IE8 chached 图像加载事件修复。

# iphone - Gpu 图像照片应用程序崩溃

> ID：14194043
> 
> 赞同：0
> 
> 时间：2013-01-07T10:29:29.600
> 
> 标签：iphone, ios, gpuimage

我正在使用 GPU 图像开源框架来实现图像效果。问题是当我尝试在图像上定期应用过滤器时，应用程序会给我一个内存警告然后崩溃。

这是代码：

```
sourcePicture = [[GPUImagePicture alloc] initWithImage:[self scaleAndRotateImage:sourceImage] smoothlyScaleOutput:YES];

GPUImageGaussianBlurFilter *bright=[[GPUImageGaussianBlurFilter alloc]init];
[bright setBlurSize:1.0];

GPUImageFilter *sepiaFilter = bright;
[bright release];
[sepiaFilter prepareForImageCapture];
[sepiaFilter forceProcessingAtSize:self.m_imageView.image.size]; // This is now needed to make the filter run at the smaller output size
[sourcePicture addTarget:sepiaFilter];
[sourcePicture processImage];

UIImage *sep=[sepiaFilter imageFromCurrentlyProcessedOutput];
self.m_imageView.image=sep;
[sourcePicture release];
[sepiaFilter release]; 
```

请帮助我摆脱这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:36:39.957

`sepiaFilter`没有保留`bright`，所以它只是一个指向已释放对象的指针。您应该更改它以使其保留对象。

```
GPUImageFilter *sepiaFilter = [bright retain]; // Now retain count is increased +1 
```

否则，这就是该对象正在发生的事情。

```
GPUImageGaussianBlurFilter *bright = [[GPUImageGaussianBlurFilter alloc] init]; // New object with retain count 1
[bright setBlurSize:1.0];

GPUImageFilter *sepiaFilter = bright; // Still retain count 1 (not being retained)
[bright release]; // Being released. Retain count = 0.
// At this point both sephiaFilter and bright point to released memory.

[sepiaFilter prepareForImageCapture]; // This is calling messages on a released object.
[sepiaFilter forceProcessingAtSize:self.m_imageView.image.size]; // This is calling messages on a released object.
[sourcePicture addTarget:sepiaFilter]; // This is passing a released object as an argument. 
```

# php - 带有 ISAPI 过滤器的 Wordpress MultiSite

> ID：14194044
> 
> 赞同：0
> 
> 时间：2013-01-07T10:29:32.180
> 
> 标签：php, wordpress, iis, isapi, isapi-rewrite

我刚刚安装了 Wordpress 3.5 以通过一次安装来管理多个域（多站点：[http](http://codex.wordpress.org/Create_A_Network) ://codex.wordpress.org/Create_A_Network ）

在安装结束时，Wordpress 向我展示了以下代码`.htaccess`

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

# add a trailing slash to /wp-admin
RewriteRule ^wp-admin$ wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR] 
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^(wp-(content|admin|includes).*) E:\example.com\www/$1 [L]
RewriteRule ^(.*\.php)$ E:\example.com\www/$1 [L]
RewriteRule . index.php [L] 
```

我没有使用 Apache 作为 Web 服务器，我在带有 ISAPI 过滤器的 IIS 上。

如何将上述代码转换为 ISAPI？

（我会将这些说明放在名为**httpd.ini**的 ISAPI 文件中）

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:47:56.880

嗯，是不是 Helicon 的 ISAPI_Rewrite2，试试搜索他们的论坛。例如，像[这样](http://www.helicontech.com/forum/16603-wordpress_301_permalinks_with_isapi_2.html)的链接可以帮助你很多。他们的知识库是巨大的

# c# - 在 WPF 中创建阴影而不使用效果

> ID：14194046
> 
> 赞同：0
> 
> 时间：2013-01-07T10:29:38.467
> 
> 标签：c#, wpf

问题如下：我们有一个应用程序，它在一个名为 Display 的控件中显示实时图像。显示控件内的实时图像顶部可以有（可能是交互式的）层（`Display`控件基本上是`LiveImageLayer`底部的网格）。大多数可用图层由线条图形组成，不会遮挡图像。某些层由标准 WPF 控件组成，例如按钮或滑块（使用更改的模板，因此它们使用线条图形呈现）。有些图层甚至直接使用 DrawingContext 绘制。

为了提高实时嘈杂图像上图层图形的可见性和可读性，我们尝试对`DropShadow`图层进行评估。从视觉的角度来看，这非常有效。但是，从性能的角度来看，它非常糟糕。由于 ImageLayer 的快速更新（高达 60Hz），`DropShadow`所有图层的效果都以图像更新频率重新计算（即使图层本身没有改变）。

我们可以为每一层手动实现老式的阴影（下面是黑色笔刷的相同图形，向右下方移动）。如果没有更好的方法，我们实际上会这样做。

所以，我的问题是：有没有自动或半自动的方式来实现这种阴影？我想在实际图层下方创建移位矩形，该笔刷设置为实际图层的视觉笔刷。但是，我发现没有办法（除了效果）将视觉画笔重新着色为黑色。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:09:15.520

不久前，我在使用 shodows 时遇到了类似的性能问题，最后我只是`Border`用来制作假阴影，但是在我的 Usercontrols 中，我使用了一个`LinearGradientBrush`使阴影更真实的，但我不记得画笔设置了，但这是它创造的那种效果。

![在此处输入图像描述](../Images/18937175cc5ae5b6d5c881d66e800e2b.png)

```
<Grid>
     <Border Margin="57,74,162,114" BorderThickness="2,0,0,2" CornerRadius="5" BorderBrush="#AA000000">
            <Button Content="StackOverflow" />
    </Border>
</Grid> 
```

`Effects`WPF被 CPU 渲染为阴影以解决您所描述的问题，这有点令人遗憾。

# javascript - 处理 div 上的 onchange 事件的最佳方法是什么？

> ID：14194048
> 
> 赞同：-6
> 
> 时间：2013-01-07T10:29:44.700
> 
> 标签：javascript, jquery

我在 div 中有一些文本框和一些文本区域。我必须确定这些文本框中的某些值是否已更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:38:51.070

如果要检测所有表单元素，请使用：

```
$("div *").change(function(){
  // Whatever
}); 
```

祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:34:32.933

**div 没有更改**事件。如果您试图用该 div 找出 html 的变化，那么您可以在间隔后**汇集**该 div 的 html 以检查它是否已更改。您可以使用`setInterval`它来重复检查 html。

# jmeter - 如何在 jmeter 中生成具有唯一名称的 .jtl 文件？

> ID：14194053
> 
> 赞同：1
> 
> 时间：2013-01-07T10:29:55.437
> 
> 标签：jmeter

我有个疑问。
我想以格式创建具有唯一名称的 .jtl 文件`yy-mm-dd-time`。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T18:29:59.100

如果要使用 JMeter 监听器编写 JTL 文件，可以使用[time](http://jmeter.apache.org/usermanual/functions.html#__time)函数（并将其放入监听器的文件名参数中），如：

```
${__time(yy-MM-dd-HH-mm-ss)}.jtl 
```

它还具有您可能想要使用的快捷方式。

如果您想通过`-l`命令行选项创建 JTL，您可以使用常用的命令行选项。例如在linux中你可以这样做：

```
sh jmeter.sh -n -t "TestPlan.jmx" -l $(date -d "today" +"%Y-%m-%d-%H-%M-%S").jtl 
```

# windows - 访问加密 USB 设备中的原始数据

> ID：14194058
> 
> 赞同：1
> 
> 时间：2013-01-07T10:30:39.490
> 
> 标签：windows, security, cryptography, usb

我有一个加密 USB 设备，用于存储 PKI 证书，包括私钥。可以使用 Microsoft Crypto API 对其进行读取/写入。它受 PIN 保护。我正在调查该设备是否确实安全。

在我看来，设备的安全性取决于 PIN 的使用/存储方式。这与我在 crypto.stackexchange 上发布的另一个问题有关 - [https://crypto.stackexchange.com/questions/5929/crypto-usb-devices-where-is-the-pin-password-stored](https://crypto.stackexchange.com/questions/5929/crypto-usb-devices-where-is-the-pin-password-stored)

当我将设备插入我的 USB 插槽时，它会显示为一个 CD 驱动器，其中包含一个安装程序，用于安装设备的驱动程序/CSP 中间件/UI。运行安装程序并将证书存储在设备中后，当我查看为设备分配的驱动器时，我仍然只能在 Windows 资源管理器中看到安装程序。

所以为了证明设备安全或不安全，我想访问设备上的原始数据。我想知道 Windows 上有哪些 API，我可以用来绕过 Crypto API 访问设备。

或者是否有工具可以做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:54:53.970

一个想法是启动到 Linux Live CD 并以这种方式查看驱动器内容。例如，您可以尝试最新的 Ubuntu 版本之一，所有这些都可以从 CD 运行，而无需将操作系统安装到您的 Windows 机器上。

我的理论是，当您的设备从 Linux 访问时，原始数据将可用。当从 Windows 访问它时，我怀疑某种巧妙的自动播放会生效，以便将您的设备显示为 CD 驱动器。

# php - 使用没有值的 GET 参数（在 URL 中）是一种不好的做法吗？

> ID：14194059
> 
> 赞同：21
> 
> 时间：2013-01-07T10:30:42.720
> 
> 标签：php, url, get

我和我的老板就使用没有价值的 GET 参数的 URL 发生了一点争论。例如

`http://www.example.com/?logout`

我在网上经常看到这种链接，但当然，这并不意味着它是一件好事。他担心这不标准并且可能导致意外错误，所以他宁愿我使用类似的东西：

`http://www.example.com/?logout=yes`

以我的经验，我从来没有遇到过使用空参数的任何问题，而且它们有时对我来说更有意义（比如在这种情况下， where`?logout=no`没有任何意义，所以“注销”的值是无关紧要的，我只会测试参数服务器端的存在，而不是它的值）。（它看起来也更干净。）

但是我无法确认这种用法实际上是有效的，因此真的不会导致任何问题。

你有关于这个的任何链接吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-07T10:37:22.757

RFC 2396，“Uniform Resource Identifiers (URI): Generic Syntax”，§3.4，“Query Component”是有关查询字符串的权威信息来源，并指出：

> 查询组件是要由资源解释的信息字符串。
> 
> [...]
> 
> 在查询组件中，保留字符“;”、“/”、“?”、“:”、“@”、“&”、“=”、“+”、“”和“$”。

RFC 2616，“超文本传输​​协议——HTTP/1.1”，§3.2.2，“http URL”，没有重新定义这一点。

简而言之，您提供的查询字符串（“注销”）是完全有效的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T10:39:10.240

**键不需要**任何值才能产生任何效果。它也不会降低 URL 的有效性，URL [RFC1738](https://www.rfc-editor.org/rfc/rfc1738#page-9)并未将其列为 URL 的必需部分。

如果你真的不需要一个值，那只是一个偏好问题。

```
http://example.com/?logout 
```

和有效的 URL 一样

```
http://example.com/?logout=yes 
```

它所做的所有不同之处在于，如果您想确保绝对设置了“是”位，您可以检查它的值。像：

```
if(isset($_GET['logout']) && $_GET['logout'] == "yes") {
    // Only proceed if the value is explicitly set to yes 
```

如果您只想知道`logout`键是否设置在 URL 中的某处，只需列出没有分配值的键就足够了。然后你可以像这样检查它：

```
if(isset($_GET['logout'])) {
    // Continue regardless of what the value is set to (or if it's left empty) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T10:37:08.533

完全没问题，不会导致任何错误。虽然，现在大多数框架都是基于 MVC 的，所以在 URL 中你需要提到一个*控制器*和一个*动作*，所以它看起来更像`/users/logout`（顺便说一句，StackOverflow 也使用该 URL 来注销用户；）。

*对我来说它可能会导致错误*的声明听起来像是您的应用程序手动访问 raw `$_GET`，我绝对认为构建没有框架的应用程序（通常提供 MVC 堆栈和路由器/调度程序）是真正危险的事情。

# sql - SQL查询：根据二级表修改记录

> ID：14194060
> 
> 赞同：0
> 
> 时间：2013-01-07T10:30:43.360
> 
> 标签：sql, database, postgresql, alter

我在 PostgreSQL 数据库中有两个表。第一个表包含一个 ID 和一个最多 200 个字符的文本字段，第二个表包含一个数据定义表，该表有一列包含笑脸或首字母缩略词，第二列将它们转换为易读的英语。

表 1 中的记录数约为 1200，表 2 中的记录数约为 300。我希望编写一个 SQL 语句，根据表 2 中的定义将表 1 中的第 1 列中的任何文本转换为正常可读的语言.

例如，如果表 1 中的值显示为：***Finished Finished :)*** 转换后的 SQL 将类似于：***Finally Finished Smiles 或面带微笑***，其中定义是从第二个表中提取的。

请注意，笑脸可以在第一列的文本中的任何位置，也可以是三百个字符之一。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:38:50.617

是的。您是想完全用 SQL 来完成，还是要编写一小段代码来完成这项工作？我不完全确定如何在 SQL 中完成这一切，但我会考虑以下内容：

```
SELECT row.textToTranslate FROM Table_1
oldText = row.textToTranslate
Split row.textToTranslate by some delimeter
For each word in row.textToTranslate:
    queryResult = SELECT FROM Table_2 WHERE pretranslate=word
    if(queryResult!=Null)
        modifiedText = textToTranslate.replace(word, queryResult) 
UPDATE Table_1 SET translatedText=modifiedText WHERE textToTranslate=oldText 
```

# javascript - 查看 console.log 的最佳方式以及为什么没有警报

> ID：14194062
> 
> 赞同：0
> 
> 时间：2013-01-07T10:30:55.390
> 
> 标签：javascript

在代码中查看 console.log 事件输出的最简单、最清晰的方法是什么。我正在创建一个 sqlite 数据库，并想简单地发出警报或 console.log 来测试它是否存在。例如，如果我这样做：

```
function onDeviceReady() {
    var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 5000);
    db.transaction(populateDB, errorCB, successCB);
    if(db)
    {
        console.log("DB  created");
    alert('The database is working');
    }
    else
    {
        alert('There is a problem');
    }
} 
```

我没有得到任何警报。做错了什么？

我现在有了基于此的代码：[deviceReady not working in PhoneGap application，怎么办？](https://stackoverflow.com/questions/8982728/deviceready-not-working-in-phonegap-application-how-to)

```
 <body onload="onDeviceReady()">

    function init(){
    document.addEventListener("deviceready", onDeviceReady, false);
    }
   // PhoneGap is ready
   //
   function onDeviceReady() {
    var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 5000);
    if(db) {
console.log('The database is working');
db.transaction(populateDB, errorCB, successCB); // only do stuff if db exists
 }
  else{
console.log('There is a problem');
    }
} 
```

但仍然没有日志！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:38:51.883

`console`输出可以在浏览器的开发工具中看到，可以在`F12`IE、FF 和 Chrome 上打开。打开后，切换到`Console`选项卡。`console.*`从那里可以看到所有输出。

`alert()`或其他弹出窗口 ( `promt / confirm`) 可能会出现问题，因为它会暂停整个 javascript 执行，直到用户确认对话框。

很可能您没有收到任何警报，因为 javascript 已经在这一行中消失了：

```
db.transaction(populateDB, errorCB, successCB); 
```

它应该是：

```
if(db) {
    console.log('The database is working');
    db.transaction(populateDB, errorCB, successCB); // only do stuff if db exists
}
else{
    console.log('There is a problem');
} 
```

# joomla - 如何在 joomla 的自定义组件中使用 com_users 模型类

> ID：14194068
> 
> 赞同：1
> 
> 时间：2013-01-07T10:31:25.517
> 
> 标签：joomla, joomla2.5, joomla-extensions

我在`Joomla 2.5`. 在这个组件中，我想获取所有可用的用户`com_users`。为此，我想让你知道，我如何在我的组件中使用`com_users` **模型类**。任何人都有如何做到这一点的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:13:11.757

根据您想在哪里使用模型，您可以简单地询问 Joomla！为您加载它。

在`JController`类或子类`getModel`中，您可以调用传入模型名称和组件前缀...

例如

```
JModel::addIncludePath(JPATH_ADMINISTRATOR . '/components/com_users/models/');
$model = $this->getModel($name = 'User', $prefix = 'UsersModel'); 
```

*可能需要添加要加载的外部模型的路径，`JModel::addIncludePath()`如上所示。*

或者，如果您确定模型名称和类前缀，您可以使用`JModel`'s`getInstance()`创建所需的模型对象...例如

```
$model = JModel::getInstance('User', 'UsersModel'); 
```

或者，在视图中，您可以：

```
$myModel = $this->getModel('myOtherModel');
$this->setModel($myModel); 
```

*注意在第一行中，我们传递了我们想要的模型名称，通常您调用时`getModel`不带任何参数来加载组件视图控制器的默认模型。在第二行中，由于我们只是将模型传递给`setModel()`它，因此不会使其成为视图使用的默认模型。*

当我们稍后想要使用我们的模型对象时，我们可以像这样指定我们想要使用的对象：

```
$item = $this->get('Item');
$otherItem = $this->get('Item', 'myOtherModel' ); 
```

第一行使用视图的默认模型（因为我们在可选参数中指定了一个）。第二行使用`getItem()`from `myOtherModel`。

这一切都有效，因为`JView`(in *`libraries/joomla/application/view.php`*) 有这些方法：

```
/**
 * Method to get the model object
 *
 * @param   string  $name  The name of the model (optional)
 *
 * @return  mixed  JModel object
 *
 * @since   11.1
 */
public function getModel($name = null)
{
    if ($name === null)
    {
        $name = $this->_defaultModel;
    }
    return $this->_models[strtolower($name)];
}

/**
 * Method to add a model to the view.  We support a multiple model single
 * view system by which models are referenced by classname.  A caveat to the
 * classname referencing is that any classname prepended by JModel will be
 * referenced by the name without JModel, eg. JModelCategory is just
 * Category.
 *
 * @param   JModel   &$model   The model to add to the view.
 * @param   boolean  $default  Is this the default model?
 *
 * @return  object   The added model.
 *
 * @since   11.1
 */
public function setModel(&$model, $default = false)
{
    $name = strtolower($model->getName());
    $this->_models[$name] = &$model;

    if ($default)
    {
        $this->_defaultModel = $name;
    }
    return $model;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:56:15.307

尝试这样的事情

```
if(!class_exists('UsersModelUser')) require(JPATH_ROOT.DS.'administrator'.DS.'components'.DS.'com_users'.DS.'models'.DS.'user.php'); 
```

您可以从管理员端或前端添加模型的正确路径。

VM2.x 组件就是这样使用的。

或者您只需要有关您可以使用的用户的一些详细信息。

```
$user = JFactory::getUser(); 
```

希望这可以帮助你..

# java - gwt PlaceTokenizer 实际上做了什么？

> ID：14194070
> 
> 赞同：1
> 
> 时间：2013-01-07T10:31:30.620
> 
> 标签：java, gwt

我真的不明白 PlaceTokenizer 在做什么？他是否将一个地方的类名转换为一个字符串，以便 gwt 历史机制可以使用它来将其放入浏览器的 url 中？这就是我的理解，但我不确定这是否正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:49:04.637

首先，`PlaceTokenizer`仅与生成器结合使用`PlaceHistoryMapper`（即，如果您`GWT.create()`是扩展的接口`PlaceHistoryMapper`；如果您愿意，您可以自由地在具体类中实现该接口）。生成器强制*历史标记*（`#`URL 中的后面的部分）由前缀和*位置标记*组成。前缀用于匹配给定的`PlaceTokenizer`类型，或者由分`@Prefix`词器上的注释给出，或者默认为分词器处理的地点的简单名称。

解析*历史令牌*时（`handleCurrentHistory()`在初始化时调用，或使用浏览器的历史浏览时），在前缀与 a 匹配`PlaceTokenizer`并检索到该令牌生成器的实例之后（如果使用 a ，则从工厂获取`PlaceHistoryMapperWithFactory`，或创建使用其默认的零参数构造函数），将*地点标记*传递给`getPlace`方法，并且预计标记器将实例化与*地点标记*对应的地点。

序列化地点时（当您在应用程序中导航时`PlaceController#goTo(Place)`），会根据地点的类型（与标记器的通用参数匹配）检索标记器，并将地点提供给`getToken`，预计将返回*地点标记*为这个地方。然后`PlaceHistoryHandler`将添加前缀并更新 URL。

*地点标记*可以是任何东西，但基于地点所包含的数据（其字段），而不是其类型（这反映为*历史标记*的前缀）

# php - 使用两个路由创建一个控制器的方法 - 区分称为路由

> ID：14194071
> 
> 赞同：0
> 
> 时间：2013-01-07T10:31:35.297
> 
> 标签：php, routing, annotations, symfony-2.1

`@Route`我的控制器方法有以下注释：

```
/**
 * @Route("/{id}/edit", name="section_edit")
 * @Route("/{id}/duplicate", name="section_duplicate")
 * @Method({"GET", "POST"})
 * @Template
 */
public function editAction(Request $request, $id)
{
} 
```

是否有可能发现，调用了哪条路线？`edit`还是`duplicate`？

我这样做是因为两条路线的逻辑相似。我可以创建两个操作，它们将使用指定的参数调用相同的方法，但我想知道是否可以使用一种方法来执行此操作并使用/值定义一些`$method`参数。`edit``duplicate`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:02:28.463

解决方案非常简单 - 添加`defaults`与模式无关 - 如下：

```
/**
 * @Route("/{id}/edit", name="section_edit", defaults={"method" : "edit"})
 * @Route("/{id}/duplicate", name="section_duplicate", defaults={"method" : "duplicate"})
 * @Method({"GET", "POST"})
 * @Template
 */
public function editAction(Request $request, $id, $method)
{
    var_dump($method); // gives `edit` or `duplicate`
} 
```

# ruby-on-rails - 打印 HTML 页面 Twitter 引导程序

> ID：14194072
> 
> 赞同：1
> 
> 时间：2013-01-07T10:31:39.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我有一个显示页面 /invoices/show 显示我的发票内容

```
<p id="notice"><%= notice %></p>
<div class="row">
<div class="span7">
    <h2 style="text-align:center;"> CONSTRUCTION LTD </h2>
        <h3 style="text-align:center;">OHIO</h3>
            <address style="text-align:center;"> Plot 10<br/>
            </address>

        <h3 style="text-decoration:underline; text-align:center;"> UTILITY BILL </h3>
            <h4 style="text-decoration:underline; text-align:center;"> TAX INVOICE        </h4>

        <table>
            <td valign="top" align="left">
                <div style="float:left; width:450px;">No:&nbsp; <%= @invoice.id  %></div>
                <div style="float:right"> Date:&nbsp; <%= @invoice.invoice_date  %></div>
            </td>
        </table>
            <P></P>
            <P></P>
    <div>To: <%= @invoice.customer.name%></div>
        <p></p>

<table class="table table-bordered table-condensed">
<thead>
<tr class="success">
  <th><label class="control-label">Description</label></th>
  <th><label class="control-label">Rate</label></th>
  <th><label class="control-label">Tax</label></th>
  <th><label class="control-label">Amount</label></th>
</tr>
</thead>
<tbody>
<% @invoice.invoice_items.each do | item| %>
  <tr class="controls"> 
    <td><%= item.description %></td>
    <td><%= item.rate %></td>
    <td><%= item.tax_amount %></td>
    <td><%= item.amount %></td>     
  </tr>
  <tr>
      <td colspan="3" align="left"><strong>TOTAL:</strong></td>
      <td colspan="1"><%= item.amount %></td>
  </tr>
    <% end %>
</tbody>
</table>

<div class="row">
<div class="span3">
    <table>
        <tbody>
            <tr>
                <td> <b>For Landlord</b></td></tr>
            <tr> <td>Approved by:</td></tr>
            <tr> <td>Sign:</td></tr>
        </tbody>
        </table>
    </div>

<div class="span3" style="position: relative; align:left; left:150px;">
    <table>
        <tbody>
            <tr>
                <td> <b>For Tenant</b></td></tr>
            <tr> <td>Approved by:</td></tr>
            <tr> <td>Sign:</td></tr>
        </tbody>
        </table>
 </div>
</div>
<br/>
<br />
<div>
<small><strong>Terms and Conditions</strong></small>
<table>
    <tbody>
        <tr>
            <td><%= Settings.invoice_terms%></td>
        </tr>
    </tbody>
</table>
</div>
<br />

<div class="form actions">
<p>
    <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_invoice_path, :class => 'btn btn-primary' %>
</p>
</div>  
</div>
</div> 
```

在我的 application.html.erb 中，我有这个用于 CSS

```
 <%= stylesheet_link_tag    "application", :media => "all" %> 
```

更重要的是，我的应用程序文件有一个导航栏元素。

我正在尝试通过转到浏览器中的打印选项来打印 Invoices/show.html.erb 页面，但是，我不希望它在我的 application.html.erb 文件和编辑按钮中包含导航栏元素在发票/show.html 中。

我正在使用 Twitter 引导程序，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:34:14.930

这是我想到的一个解决方案：

您可以做的是，在您的`show`视图（或应用程序布局）中添加一个谓词：

```
if params[:controller] == "invoice" && params[:action] == "show"
  # do or show whatever you want
end 
```

或者您可以为您的`views/layouts`文件夹添加不同的布局。然后在你的`controllers/invoice_controller`

```
def show
  # ...
  render layout: 'a_different_layout_for_invoices'
end 
```

# javascript - pinmarklet.js 获取图像

> ID：14194075
> 
> 赞同：1
> 
> 时间：2013-01-07T10:31:45.090
> 
> 标签：javascript, pinterest

我使用 pinmarklet js 文件从网站获取图像。

有人知道脚本如何获取当前页面的 url 来获取图像吗？

我想将 url 作为参数从 php 脚本传递。

这是 pinmarklet js URL - [http://assets.pinterest.com/js/pinmarklet.js](http://assets.pinterest.com/js/pinmarklet.js)

或者 php 中是否有针对上述问题的替代解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:44:54.653

我在 javacript 上创建了一个函数来与 pinterest 共享自定义图像，传递您想要共享的图像源，并通过对 API 的一次请求加载 PinMarklet。

帖子（西班牙语）： http: [//www.jspcore.com/pinmarklet-con-imagenes-personalizadas](http://www.jspcore.com/pinmarklet-con-imagenes-personalizadas)

代码：[https ://github.com/mustaine/Pinmarklet](https://github.com/mustaine/Pinmarklet)

示例：http: [//jspcore.com/code/pinmarklet/index.html](http://jspcore.com/code/pinmarklet/index.html)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T03:35:38.777

我有类似的要求。我有一个博客列表，每个博客（唯一的 URL）都有 pinit 按钮来共享所有图像。

所以我必须从 URL 中获取图像。有没有办法做到这一点？我不确定如何从 URL 读取图像？

编辑：它的每页，因此每个博客视图将只有该博客中存在的图像。博客列表将显示当前页面中的所有图像。

# java - 如何从组合图像中提取两个图像？

> ID：14194077
> 
> 赞同：0
> 
> 时间：2013-01-07T10:31:48.213
> 
> 标签：java, swing, core-graphics, steganography

> **可能重复：**
> [是否有用于隐写术的 Java 库？](https://stackoverflow.com/questions/9701486/is-there-a-java-library-for-steganography)

```
public void  myfunction()
{
  try
  {

   BufferedImage image = ImageIO.read(new File("first.jpg"));//first image
   BufferedImage overlay = ImageIO.read(new File("second.jpg"));//second image

   int w = Math.max(image.getWidth(), overlay.getWidth());
   int h = Math.max(image.getHeight(), overlay.getHeight());
   BufferedImage combined = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);

   Graphics g = combined.getGraphics();
   g.drawImage(image, 0, 0, null);
   g.drawImage(overlay, 0, 0, null);

   //here i combined 2 images in combined.jpg
   ImageIO.write(combined, "jpg", new File("DestinationPath", "combined.jpg"));//combined image

  } 
 catch (Exception e) 
 {
 e.printStackTrace();
 }
} 
```

//我想把这个 combine.jpg 提取到我之前的 first.jpg 和 second.jpg 中？// 如何提取我与此代码组合的 2 个图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:44:58.140

绘制第一张图像后，您可以在绘制叠加层时设置一些透明度。

```
float alpha = 0.75f;
int type = AlphaComposite.SRC_OVER; 
AlphaComposite composite = AlphaComposite.getInstance(type, alpha);
g.setComposite(composite); 
```

# javascript - 有没有办法从 javascript 激活 chrome 检查器？

> ID：14194079
> 
> 赞同：2
> 
> 时间：2013-01-07T10:31:54.173
> 
> 标签：javascript, google-chrome, google-chrome-devtools

> **可能重复：**
> [我可以通过 Google Chrome 扩展程序以编程方式打开 devtools 吗？](https://stackoverflow.com/questions/6801577/can-i-programmatically-open-the-devtools-from-a-google-chrome-extension)

我想通过单击网页上的按钮来触发 chrome 检查器 - 我正在构建一个 Chrome devtools 扩展。

# jms - 在 hornetq 的客户端过滤

> ID：14194083
> 
> 赞同：2
> 
> 时间：2013-01-07T10:32:03.150
> 
> 标签：jms, hornetq

我有一台服务器将消息发布到一个队列（位于服务器端）和许多接收者......

我希望每个接收者或客户端都应该访问该队列并根据他们的接收消息我如何使用它来实现它`HornetQ JMS API`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:46:29.977

只需使用过滤器创建消费者...

然而，最好的办法是使用 pub&sub，并且每个订阅使用不同的过滤器。

# linux - Shell 编码遇到分段错误

> ID：14194084
> 
> 赞同：1
> 
> 时间：2013-01-07T10:32:03.687
> 
> 标签：linux, shell, segmentation-fault

我有一段 shell 代码***run.sh***，如下所示：

```
#!/bin/sh
PATH=/usr/local/sbin:/usr/sbin:/sbin:$PATH
export LD_LIBRARY_PATH="../../lib"

mp3proc=mp3proc
if [ ! -f "$mp3proc" ]; then
        ln -s mp3decode $mp3proc
fi

inputsonglist="$1"
intputflag="$2

cat $inputsonglist | while read line
do
    echo "$line"
    ./"mp3proc" ${line} $inputflag
done 
```

其中，**inputsonglist**是一个 txt 文件，其中存储了要处理的 mp3 文件列表的完整路径，如下所示：

```
/home/user_01/music/wcbz.mp3
/home/user_01/music/wf_hh.mp3
/home/user_01/music/zj_lw.mp3
/home/user_01/music/zj_jjdzf.mp3
/home/user_01/music/zj_jsqsjywwd.mp3
/home/user_01/music/zj_sh.mp3
/home/user_01/music/zj_tbaw.mp3 
```

**mp3proc**是我的可执行程序，它接受两个参数：

1.  定位 mp3 文件的完整 mp3 路径

2.  标志，0 或 1

但是，当我像这样运行这个 shell 脚本时：

```
./run.sh list.txt 0 
```

我遇到了以下错误：

```
/home/user_01/music/wcbz.mp3
./run.sh: line 27: 21068 Segmentation fault      ./"mp3proc" ${line} $inputflag
/home/user_01/music/wf_hh.mp3
./run.sh: line 27: 21069 Segmentation fault      ./"mp3proc" ${line} $inputflag
/home/user_01/music/zj_lw.mp3
./run.sh: line 27: 21070 Segmentation fault      ./"mp3proc" ${line} $inputflag
/home/user_01/music/zj_jjdzf.mp3
./run.sh: line 27: 21071 Segmentation fault      ./"mp3proc" ${line} $inputflag
/home/user_01/music/zj_jsqsjywwd.mp3
./run.sh: line 27: 21072 Segmentation fault      ./"mp3proc" ${line} $inputflag
/home/user_01/music/zj_sh.mp3
./run.sh: line 27: 21073 Segmentation fault      ./"mp3proc" ${line} $inputflag 
```

我不知道为什么这里发生了**“Segmentation fault”**？？？！！！

有人帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:40:51.013

1）尝试直接调用`mp3proc`，看看是否有段错误。然后使用：`strace -f mp3proc` 并查看其输出

2）检查LD_IBRARY_PATH：替换为绝对路径，或者修改

# android - ListView 优化：字体使 listview 非常滞后

> ID：14194086
> 
> 赞同：2
> 
> 时间：2013-01-07T10:32:12.143
> 
> 标签：android, listview, typeface

在过去的几个小时里，我正在浏览一些列表视图优化，但我没有成功解决我滞后的列表视图，所以我开始逐行将我的代码恢复到更早和更简单的版本以找出问题所在。所以我用包含一个图像视图和两个文本视图的自定义适配器填充一个列表视图。从项目中删除图像后，我的列表视图仍然很慢，那么猜猜看：如果我删除了文本视图的自定义字体，我的迟钝就消失了。我使用简单的 Calibri，它是一种内置字体，所以我不明白为什么它会减慢我的列表视图。有什么建议可以解决这个问题吗？

```
//viewHolder.text_tt.setTypeface(Typeface.createFromAsset(getActivity().getAssets(), "fonts/CALIBRI.TTF")); 
//viewHolder.text_ttd.setTypeface(Typeface.createFromAsset(getActivity().getAssets(), "fonts/CALIBRI.TTF")); 

viewHolder.text_tt.setText(textNames[position]);
viewHolder.text_ttd.setText("Item " + position); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T10:39:02.933

原因是从资产创建字体非常繁重。我更喜欢像这样使用 TypefaceCache..

```
public class TypefaceCache {

    private static final Hashtable<String, Typeface> CACHE = new Hashtable<String, Typeface>();

    public static Typeface get(AssetManager manager, String name) {
        synchronized (CACHE) {

            if (!CACHE.containsKey(name)) {
                Typeface t = Typeface.createFromAsset(manager, name);
                CACHE.put(name, t);
            }
            return CACHE.get(name);
        }
    }

} 
```

这样，Typeface 将只创建一次，不需要每次都重新创建。

`name`如果参数是`null`或`Typeface.createFromAsset`返回，请记住添加一个检查以返回默认字体`null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:39:49.977

这可能是因为您正在为每个 TextView 创建新对象。

当您重复以下代码时，

```
Typeface.createFromAsset(getActivity().getAssets(), "fonts/CALIBRI.TTF") 
```

这意味着您正在创建一个新对象。相反，您应该为您的字体创建一个对象并将其全局存储并在您的列表视图中使用它。不建议为每一行创建一个新对象。

让我们说这样的话，

1）有一个你的适配器的构造函数，并在其中创建这个 Typeface 对象一次，像这样，

```
Typeface typeface= null;  //global declaration

public void constructorSample()
{
   typeface= Typeface.createFromAsset(getActivity().getAssets(), "fonts/CALIBRI.TTF");
} 
```

然后像这样使用它，。

```
viewHolder.text_ttd.setTypeface(typeface); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:59:44.907

我同意上述答案。另一种解决方案是创建一个包含字体的单例类。

# php - 向 PHP 添加第二个命名空间运算符的基本原理是什么？

> ID：14194088
> 
> 赞同：2
> 
> 时间：2013-01-07T10:32:15.783
> 
> 标签：php, namespaces

在 PHP 中有两个命名空间运算符：

`\`和`::`

`::`用于内部命名空间，例如：

```
namespace example;
class Foo {
    public static $bar = 'hello';
} 
```

我可以通过以下方式访问和其他班级`$bar`成员：`Foo``Foo::$bar`

然而，完整的命名空间名称`Foo`不是`example::Foo`，它是`example\Foo`，并且 $bar 的完整命名空间名称将是`example\Foo::$bar`

使用这两个运算符而不是坚持使用一个已经存在的一致运算符的原因或原理是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:38:10.743

是[范围解析运算符](http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php)`::`，仅用于访问静态类。它与命名空间无关。在 PHP 5.3 中也添加了[命名空间](http://php.net/manual/en/language.namespaces.rationale.php)，在静态类之后很久。

我想这就是为什么他们使用两个不同的运算符（用于两个不同的目标）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T10:47:42.547

您应该看一下[命名空间分隔符 RFC](https://wiki.php.net/rfc/backslashnamespaces#use_as_namespace_separator)，它调用了支持和反对反斜杠的实际参数。

没有被选中的主要原因`::`是它在进行范围解析时可能会引起歧义。鉴于命名空间可以使用别名 ( `use \Foo\Bar as Baz;`)，可能会导致各种搞笑的 hijinks。

# java - 使用 jsoup 从网站解析数据

> ID：14194097
> 
> 赞同：0
> 
> 时间：2013-01-07T10:32:39.853
> 
> 标签：java, jsoup

我正在创建一个从 www.zamboangatoday.ph 收集数据的 android 应用程序，获取所有新闻标题或标题。但我只能检索一项可以有人检查我的代码。

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

            try{

                outputTextView = (TextView)findViewById(R.id.textView1);
                //Document doc = Jsoup.parse(html,"http://www.zamboangatoday.ph");
                Document doc = Jsoup.connect("http://www.zamboangatoday.ph/").get();
                //Elements tag = doc.select(".even h4 a");

                Iterator<Element> iter = doc.select("li.even h4 a").iterator();
                //List<Image> images = new ArrayList<Image>();
                while(iter.hasNext())
                {
                    Element element = iter.next();

                    outputTextView.setText(element.text());

                }

            }catch(Exception e)
            {
                e.printStackTrace();
            }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:57:06.283

不确定是什么组件`outputTextView`，而是使用以下代码：

```
outputTextView.setText(element.text()); 
```

您将设置文本，并在每次迭代中**覆盖它。**因此，在您的循环之后，将只有最后一个元素文本。如果可能的话，使用类似的东西`outputTextView.append(element.text());`- 否则使用 a`StringBuilder`并在循环之后设置文本。

* * *

```
outputTextView = (TextView)findViewById(R.id.textView1);
//Document doc = Jsoup.parse(html,"http://www.zamboangatoday.ph");
Document doc = Jsoup.connect("http://www.zamboangatoday.ph/").get();
//Elements tag = doc.select(".even h4 a");

Iterator<Element> iter = doc.select("li.even h4 a").iterator();
//List<Image> images = new ArrayList<Image>();
while(iter.hasNext())
{
    Element element = iter.next();

    /*
     * Append the text - don't overwrite it
     * Node: Maybe you have to add a new line ('\n').
     */
    outputTextView.append(element.text()); 

} 
```

# android - Mono for Android 的 Xamarin 设计器使用什么主题？

> ID：14194098
> 
> 赞同：3
> 
> 时间：2013-01-07T10:32:42.587
> 
> 标签：android, android-layout, xamarin.android

在 Visual Studio 中使用 Mono for Android 的设计器时，
控件具有很好的简洁设计，但是一旦您在设备（模拟器或真实设备）上运行应用程序，
控件就会具有完全不同的样式：

![在此处输入图像描述](../Images/0551c9a7ece9e3ece2235f2720eb0727.png)

这是因为设计师使用了特定的主题，如果是的话，还是我必须做的其他事情才能在设备上获得与设计师相同的风格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T12:34:23.133

您可能在设计器中将默认主题设置为 Theme.Holo.Light。在设计器的右上角，您将看到一个允许您选择主题的按钮。请参阅下面的屏幕截图。

![Mono for Android 主题选择器](../Images/937fcd6c7b5dc2add1c812a1724c7392.png)

如果您需要将主题更改为 Holo light 或只是 Holo，请参考这篇[文章](https://stackoverflow.com/questions/9681648/how-to-use-holo-light-theme-and-fall-back-to-light-on-pre-honeycomb-devices)。您将需要制作一些主题资源并更新您的应用程序清单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T12:08:51.320

这通常发生在您的 Target Framework 设置为 Automatic 时 - 它会下拉它可以使用的最低主题，您需要将其更改为 API 14/15 以从 Android 中获取“Halo”主题

# visual-studio - 在 Visual Studio 2012 中重新打开关闭的选项卡

> ID：14194102
> 
> 赞同：5
> 
> 时间：2013-01-07T10:33:12.903
> 
> 标签：visual-studio, visual-studio-2012

在我的网络浏览器（谷歌浏览器）中，关闭选项卡后，我可以使用菜单项“重新打开关闭的选项卡”重新打开它。（Firefox 也有这个功能，“撤消关闭标签”。）

如何撤消在 Visual Studio 2012 中关闭选项卡？

* * *

我从 2009 年发现了这个类似的问题，但接受的答案不适用于 Visual Studio 2012。[在 Visual Studio 中重新打开上次关闭的选项卡](https://stackoverflow.com/questions/853038/reopen-last-closed-tab-in-visual-studio)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T11:24:48.500

[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)扩展具有撤消关闭功能。一些为 VS2010 设计的旧扩展在 VS2012 中可能无法正常工作，而且这些扩展的很多功能已被合并到 VS2012 中。

在 Visual Studio 2012/2013 中，使用`CTRL`++`SHIFT`撤消`Z`关闭。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T10:45:40.343

您是否尝试过使用 2010 版的 PowerCommands ？

[http://visualstudiogallery.msdn.microsoft.com/e5f41ad9-4edc-4912-bca3-91147db95b99/](http://visualstudiogallery.msdn.microsoft.com/e5f41ad9-4edc-4912-bca3-91147db95b99/)

[http://www.patridgedev.com/wp-content/uploads/2012/02/UndoCloseSettings.png](http://www.patridgedev.com/wp-content/uploads/2012/02/UndoCloseSettings.png)

# android - android中的datepicker - 将月份和日期作为MM -DD

> ID：14194109
> 
> 赞同：1
> 
> 时间：2013-01-07T10:33:45.243
> 
> 标签：android, datepicker, date-format, getdate

我正在开发一个使用 datepicker 的 android 应用程序。当我使用：

```
request.addProperty("datetext",datePicker.getYear()+"-"+(datePicker.getMonth()+1)+"-"+datePicker.getDayOfMonth()); 
```

我得到的输出是**2013 年 1 月 7 日的 2013-1-7**

但是我怎样才能得到同样的输出 2013-01-07。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T08:27:41.893

谢谢大家...我得到了解决方案...

```
Integer month = datePicker.getMonth()+1;
Integer day = datePicker.getDayOfMonth();
request.addProperty("datetext",datePicker.getYear()+"-"+((month.toString().length()   == 1 ? "0"+month.toString():month.toString()) )+"-"+((day.toString().length() == 1 ? "0"+day.toString():day.toString()))); 
```

所以这将显示**月份**为**01 02 03 04....10 11 12** 和**天数**为**01 02 03....10 11....**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:40:10.903

```
Date yourDate= new Date(datePicker.getYear(), (datePicker.getMonth()+1), datePicker.getDayOfMonth()); 
```

您可以使用`SimpleDateFromat`如下：

```
String strDate = null;
SimpleDateFormat dateFormatter = new SimpleDateFormat(
                "yyyy-MM-dd hh:mm");
strDate = dateFormatter.format(yourDate); 
```

所以你会得到你想要的格式（yyyy-MM-dd）的日期。

编辑：

对于更改日期选择器更改日期，您可以尝试如下：

```
datePicker.init(currentYear, currentMonth, currentDay, new OnDateChangedListener() {

            @Override
            public void onDateChanged(DatePicker view, int year,
                    int monthOfYear, int dayOfMonth) {
                // TODO Auto-generated method stub
                Date selectedDate = new Date(datePicker.getYear(), (datePicker
                        .getMonth() + 1), datePicker.getDayOfMonth());
                String strDate = null;
                SimpleDateFormat dateFormatter = new SimpleDateFormat(
                        "yyyy-MM-dd hh:mm");
                strDate = dateFormatter.format(selectedDate);
            }
        }); 
```

因此，您会在日期选择器更改时找到更新的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:36:49.240

```
SimpleDateFormat form = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS");
java.util.Date date = null;
try 
{
date = form.parse("2013-01-7T09:39:01.607");
}
catch (ParseException e) 
{

e.printStackTrace();
}
SimpleDateFormat postFormater = new SimpleDateFormat("yyyy-MM-dd");
String newDateStr = postFormater.format(date); 
```

# raspberry-pi - Raspberry PI 上 XBMC 上的脏区

> ID：14194111
> 
> 赞同：5
> 
> 时间：2013-01-07T10:33:47.080
> 
> 标签：raspberry-pi, xbmc, dirtyrectangle

我有一个树莓派，并从 raspbmc.com 加载了最新的独立版本。使用 XBMC 时，我看到 CPU 使用率始终在 90% 以上。在查看了 XBMC wiki 和常见问题解答后，脏区似乎是一种减少 CPU 使用率的流行方法。

我`advancedsettings.xml`在`/home/pi/.xbmc/userdata/`. 该文件的内容是：

```
<advancedsettings>
 <gui>
   <algorithmdirtyregions>1</algorithmdirtyregions>
 </gui>
</advancedsettings> 
```

我尝试[了 XBMC wiki 中解释的脏区域](http://wiki.xbmc.org/index.php?title=Dirty_regions)模式 1 和 2 ，在这两种情况下，我都看到只有脏区域被显示，而其余区域是黑色的。OpenElec [wiki](http://wiki.openelec.tv/index.php?title=Building_and_Installing_OpenELEC_for_Raspberry_Pi#Enable_dirty_region_redraw_in_XBMC)说这是自 12 年 8 月以来构建中的一个已知问题。

现在，我能做些什么来解决/解决相同的问题？我以 1080p 播放高清电影，它们运行良好。但我有点担心 RPi 在关键事件发生之前可以占用如此多的 CPU 使用时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T01:54:28.427

我一直在研究*advancedsettings.xml*中的各种配置，最终使用了[Arch Linux ARM 板上](http://archlinuxarm.org/forum/viewtopic.php?f=31&t=3004&start=70)的以下配置：

```
<advancedsettings>
    <network>
        <cachemembuffersize>5282880</cachemembuffersize>
    </network>
   <fanartheight>560</fanartheight>
   <thumbsize>256</thumbsize>
   <gui>
       <algorithmdirtyregions>3</algorithmdirtyregions>
       <nofliptimeout>0</nofliptimeout>
   </gui>
   <lookandfeel>
       <enablerssfeeds>false</enablerssfeeds>
   </lookandfeel>
   <bginfoloadermaxthreads>2</bginfoloadermaxthreads>
</advancedsettings> 
```

但它仍然有大约 80% 的 CPU 使用率。当我在*视频硬件*设置菜单中启用*垂直空白同步*时，它最终下降到 20% 左右。

 *另请注意，某些皮肤可能会占用大量资源。我使用默认的 Confluence 皮肤效果最好。*

# c# - 如何获取文件的大小（托管在 Web 服务器上）？

> ID：14194113
> 
> 赞同：3
> 
> 时间：2013-01-07T10:33:55.430
> 
> 标签：c#, progress-bar, webclient, filesize

我正在使用`WebClient`该类从 Web 服务器下载 .exe 文件。这是我用来下载文件的代码：

```
WebClient webClient = new WebClient();    
webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(webClient_DownloadProgressChanged);
webClient.DownloadDataAsync(new Uri("http://www.blah.com/calc.exe")); 
```

我的应用程序有一个 ProgressBar，它在回调 ( `webClient_DownloadProgressChanged`) 中得到更新：

```
private void webClient_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
{
    progressBar.Value = (int)e.BytesReceived;
} 
```

我遇到的问题是我必须`Maximum`动态设置进度条的值。换句话说，我需要在下载开始*之前*知道我正在下载的文件的大小。

有没有办法在给定 uri 的情况下获取文件的大小（在下载之前）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:43:14.103

尝试像这样将最大大小设置为 e.TotalBytesToReceive

```
private void webClient_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
{
     progressBar.Max = (int)e.TotalBytesToReceive;
    progressBar.Value = (int)e.BytesReceived;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:38:05.533

其中一种方法是检查 ResponseHeaders 中的 Content-Length 或 Range 标头。

```
// To set the range
//webClient.Headers.Add("Range","bytes=-128");

// To read Content-Length
var bytes = Convert.ToInt64(webClient.ResponseHeaders["Content-Length"]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-20T15:48:53.733

如果只需要正确更新进度条，最简单的方法是使用`ProgressPercentage`

```
// progressBar.Max is always set to 100
progressBar.Value = e.ProgressPercentage; 
```

# c# - C#默认位置的配置文件？

> ID：14194114
> 
> 赞同：3
> 
> 时间：2013-01-07T10:33:57.023
> 
> 标签：c#, .net, visual-studio-2010, .net-4.0

我刚刚创建了一个 WPF 应用程序，只是想知道我的 app.config 文件在哪里？

我查看了 bin/Debug 和 bin/Release 目录，只有一个文件`"WpfApplication1.vshost.exe"`，找不到任何 app.config 文件。

我所能做的就是`Add->New`配置文件，这也不在调试或发布文件夹中。

谁能指导我是否应该手动将其复制并粘贴到调试或发布文件夹中？

**所以最后：答案**

如果 app.config 不存在，则尝试通过“Add->New Item->Application Configuration File”新建一个，并创建一个名为“App.config”的文件。在此之后，尝试重新构建您的应用程序，特定于您的项目的 .config 文件应该出现在 bin/Debug & bin/Release 文件夹中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:40:09.520

它*应该*会自动复制到 Debug/Release 文件夹中。但是，您可以尝试将属性中的“复制到输出目录”显式设置为**始终复制**并查看它是否出现。

![在此处输入图像描述](../Images/368efa695537e1bdf51964b5a7a69b53.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:39:13.363

创建简单的 WPF 项目后，我的解决方案如下所示。`App.config`就在那里，就是配置文件本身

![在此处输入图像描述](../Images/344353378908d77c3e30465a4111da51.png)

当您构建解决方案时，在我的例子中命名为 WpfApplication1，配置文件位于`WpfApplication1.exe.config`文件`\WpfApplication1\bin\Debug\`夹中。 ![在此处输入图像描述](../Images/84d265b7e7cf2a66847f4c616b253374.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:36:37.563

当您构建应用程序时，它会自动获取副本到调试/发布文件夹。只需在这些文件夹中查找 *.config 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T10:38:11.760

如果你构建你的项目，你应该有一个`foo.bar.exe.config`在你的二进制目录中命名的文件。该`app.config`文件本身应该在您的解决方案目录中可见。

# android - Jquery Mobile 第一次打开应用程序时会一直加载

> ID：14194115
> 
> 赞同：0
> 
> 时间：2013-01-07T10:34:04.153
> 
> 标签：android, cordova, jquery-mobile

我正在使用 PhoneGap 和 JqueryMobile 为 android 平台开发一个应用程序。
问题是每当我安装应用程序时，它都会打开，但如果我退出应用程序并再次打开它，它可能会继续加载，它可能会工作。它只发生在第一次之后，它很好。
我一直在努力解决这个问题，但我找不到任何解决方案。
PS它是一个离线应用程序。
感谢您的帮助。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:24:08.793

好吧，我想通了。你不能把任何东西放在下面`super.loadUrl("");`

# android - 如何从 Facebook API Android 获取用户个人资料信息

> ID：14194119
> 
> 赞同：10
> 
> 时间：2013-01-07T10:34:13.640
> 
> 标签：android, facebook, facebook-graph-api

我正在尝试获取用户个人资料信息 Facebook。开始加载，我单击以确认发送我的个人资料的权限，再次继续加载，但最终得到空白字段。

我究竟做错了什么？请帮忙。

```
public class SettingsApps extends Activity {
public final String API_KEY = "492429660800628";
Facebook facebook = new Facebook(API_KEY);

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.settings);

mPrefs=getPreferences(MODE_PRIVATE);
String acces_token=mPrefs.getString("acces_token",null);
long expires=mPrefs.getLong("acces_expires", 0);

if (Session.getActiveSession() == null || Session.getActiveSession().isClosed()) {
    Session.openActiveSession(this, true, new StatusCallback() { 
        public void call(Session session, SessionState state, Exception exception) {
            System.out.println("State= " + state);

            if (session.isOpened()) {
                System.out.println("Token=" + session.getAccessToken());
                Request request =  Request.newMeRequest(session, new GraphUserCallback() {       
                            public void onCompleted(GraphUser user, Response response) {                                

                                if (user != null) {
                                    TextView idText = (TextView)findViewById(R.id.id);
                                    TextView first_nameText = (TextView)findViewById(R.id.first_name);
                                    TextView last_nameText = (TextView)findViewById(R.id.last_name);
                                    idText.setText(user.getId());
                                    first_nameText.setText(user.getFirstName());
                                    last_nameText.setText(user.getLastName());
                                }
                                if (response != null) {
                                    System.out.println("Response="  + response);
                                    Toast.makeText(SettingsApps.this, response.toString(),
                                            Toast.LENGTH_LONG).show();
                                }
                            }
                        });
                Request.executeBatchAsync(request);
            }
            if (exception != null) {
                System.out.println("Some thing bad happened!");
                exception.printStackTrace();
            }
        }
    });
}
}   
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
  facebook.authorizeCallback(requestCode, resultCode, data);
  }
} 
```

日志猫

```
669: INFO/ActivityManager(72): Starting: Intent { cmp=com.fitness_sport_betta/.SettingsApps } from pid 847
899: INFO/ActivityManager(72): Starting: Intent { act=SSO_WITH_FALLBACK cmp=com.fitness_sport_betta/com.facebook.LoginActivity (has extras) } from pid 847
949: INFO/System.out(847): State= OPENING
539: INFO/ActivityManager(72): Displayed com.fitness_sport_betta/com.facebook.LoginActivity: +621ms (total +851ms)
669: DEBUG/dalvikvm(389): GC_CONCURRENT freed 1685K, 41% free 6996K/11783K, external 716K/1038K, paused 16ms+11ms
420: WARN/fb4a:fb:OrcaServiceQueue(389): Exception during service
420: WARN/fb4a:fb:OrcaServiceQueue(389): com.facebook.orca.protocol.base.ApiException: remote_app_id does not match stored id 
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.protocol.base.ApiResponseChecker.b(ApiResponseChecker.java:74)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.protocol.base.ApiResponseChecker.a(ApiResponseChecker.java:103)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.protocol.base.ApiResponse.g(ApiResponse.java:184)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.katana.server.protocol.AuthorizeAppMethod.a(AuthorizeAppMethod.java:267)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.katana.server.protocol.AuthorizeAppMethod.a(AuthorizeAppMethod.java:28)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.protocol.base.SingleMethodRunner.a(SingleMethodRunner.java:125)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.katana.server.handler.PlatformOperationHandler.c(PlatformOperationHandler.java:274)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.katana.server.handler.PlatformOperationHandler.a(PlatformOperationHandler.java:175)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.server.OrcaServiceQueue.d(OrcaServiceQueue.java:214)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.server.OrcaServiceQueue.d(OrcaServiceQueue.java:37)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.server.OrcaServiceQueue$3.run(OrcaServiceQueue.java:168)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at android.os.Handler.handleCallback(Handler.java:587)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at android.os.Handler.dispatchMessage(Handler.java:92)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at android.os.Looper.loop(Looper.java:123)
420: WARN/fb4a:fb:OrcaServiceQueue(389):     at android.os.HandlerThread.run(HandlerThread.java:60)
459: INFO/ActivityManager(72): Starting: Intent { act=com.facebook.platform.PLATFORM_ACTIVITY cat=[android.intent.category.DEFAULT] cmp=com.facebook.katana/.platform.PlatformActivity (has extras) } from pid 847
639: INFO/ActivityManager(72): Starting: Intent { cmp=com.facebook.katana/.platform.PlatformWrapperActivity (has extras) } from pid 389
670: INFO/ActivityManager(72): Displayed com.facebook.katana/.platform.PlatformActivity: +1s87ms
779: INFO/ActivityManager(72): Displayed com.facebook.katana/.platform.PlatformWrapperActivity: +1s106ms
449: WARN/fb4a:fb:OrcaServiceQueue(389): Exception during service
449: WARN/fb4a:fb:OrcaServiceQueue(389): com.facebook.orca.protocol.base.ApiException: remote_app_id does not match stored id 
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.protocol.base.ApiResponseChecker.b(ApiResponseChecker.java:74)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.protocol.base.ApiResponseChecker.a(ApiResponseChecker.java:103)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.protocol.base.ApiResponse.g(ApiResponse.java:184)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.katana.server.protocol.AuthorizeAppMethod.a(AuthorizeAppMethod.java:267)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.katana.server.protocol.AuthorizeAppMethod.a(AuthorizeAppMethod.java:28)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.protocol.base.SingleMethodRunner.a(SingleMethodRunner.java:125)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.katana.server.handler.PlatformOperationHandler.c(PlatformOperationHandler.java:274)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.katana.server.handler.PlatformOperationHandler.a(PlatformOperationHandler.java:175)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.server.OrcaServiceQueue.d(OrcaServiceQueue.java:214)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.server.OrcaServiceQueue.d(OrcaServiceQueue.java:37)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at com.facebook.orca.server.OrcaServiceQueue$3.run(OrcaServiceQueue.java:168)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at android.os.Handler.handleCallback(Handler.java:587)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at android.os.Handler.dispatchMessage(Handler.java:92)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at android.os.Looper.loop(Looper.java:123)
449: WARN/fb4a:fb:OrcaServiceQueue(389):     at android.os.HandlerThread.run(HandlerThread.java:60)
469: WARN/fb4a:fb:GDPDialog(389): Failed to send
469: WARN/fb4a:fb:GDPDialog(389): com.facebook.orca.ops.ServiceException: API_ERROR: API_ERROR
469: WARN/fb4a:fb:GDPDialog(389):     at com.facebook.orca.ops.OrcaServiceOperation.c(OrcaServiceOperation.java:597)
469: WARN/fb4a:fb:GDPDialog(389):     at com.facebook.orca.ops.OrcaServiceOperation.c(OrcaServiceOperation.java:38)
469: WARN/fb4a:fb:GDPDialog(389):     at com.facebook.orca.ops.OrcaServiceOperation$2.run(OrcaServiceOperation.java:562)
469: WARN/fb4a:fb:GDPDialog(389):     at android.os.Handler.handleCallback(Handler.java:587)
469: WARN/fb4a:fb:GDPDialog(389):     at android.os.Handler.dispatchMessage(Handler.java:92)
469: WARN/fb4a:fb:GDPDialog(389):     at android.os.Looper.loop(Looper.java:123)
469: WARN/fb4a:fb:GDPDialog(389):     at android.app.ActivityThread.main(ActivityThread.java:3683)
469: WARN/fb4a:fb:GDPDialog(389):     at java.lang.reflect.Method.invokeNative(Native Method)
469: WARN/fb4a:fb:GDPDialog(389):     at java.lang.reflect.Method.invoke(Method.java:507)
469: WARN/fb4a:fb:GDPDialog(389):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
469: WARN/fb4a:fb:GDPDialog(389):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
469: WARN/fb4a:fb:GDPDialog(389):     at dalvik.system.NativeStart.main(Native Method)
009: WARN/InputManagerService(72): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@40677138 (uid=10030 pid=847)
009: WARN/InputManagerService(72): Client not active, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40556e88
529: INFO/ActivityManager(72): Displayed com.fitness_sport_betta/.SettingsApps: +10s839ms 
```

最后一次变更：

```
public class SettingsApps extends Activity {

public final String API_KEY = "492429660800628";
Facebook facebook = new Facebook(API_KEY);
public final String[] permissions = {"publish_stream"};
String mUserId;
String mUserToken;
String mUserName;
String mUserEmail;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.settings);

if (Session.getActiveSession() == null || Session.getActiveSession().isClosed()) {
    Session.openActiveSession(this, true, new StatusCallback() { 
        public void call(final Session session, SessionState state, Exception exception) {
            System.out.println("State= " + state);
            authorizeAndPostMassage(); 
            if (exception != null) {
                System.out.println("Some thing bad happened!");
                exception.printStackTrace();
            }
        }
    });
}
}

public void authorizeAndPostMassage() {

    facebook.authorize(this, permissions, new DialogListener () {
        public void onComplete(Bundle values) {
                Toast.makeText(SettingsApps.this, "Authorization successful", Toast.LENGTH_SHORT).show();
                getProfileInformation();    
        }       
        public void onFacebookError(FacebookError e) {
            Toast.makeText(SettingsApps.this, "Facebook error, try again later", Toast.LENGTH_SHORT).show();                
        }       
        public void onError(DialogError e) {
            Toast.makeText(SettingsApps.this, "Error, try again later", Toast.LENGTH_SHORT).show();             
        }       
        public void onCancel() {
            //Этот коллбэк никогда не срабатывает, вероятно, ошибка в SDK
            Toast.makeText(SettingsApps.this, "Authorization canceled", Toast.LENGTH_SHORT).show();                         
        }});        
}

public void getProfileInformation() {
    try {

        JSONObject profile = Util.parseJson(facebook.request("me"));
        Log.e("Profile", "" + profile);

        mUserId = profile.getString("id");
        mUserToken = facebook.getAccessToken();
        mUserName = profile.getString("name");
        mUserEmail = profile.getString("email");
        runOnUiThread(new Runnable() {
            public void run() {
                Log.v("FaceBook_Profile",""+mUserId+"\n"+mUserToken+"\n"+mUserName+"\n"+mUserEmail);
                Toast.makeText(getApplicationContext(),
                        "Name: " + mUserName + "\nEmail: " + mUserEmail,
                        Toast.LENGTH_LONG).show();
            }
        });

    } catch (FacebookError e) {
        e.printStackTrace();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
  facebook.authorizeCallback(requestCode, resultCode, data);
  }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-26T20:43:11.537

facebook SDK 3.0 的这段代码它的工作原理！

```
public class FacebookInfo extends Activity {
...
String get_id, get_name, get_gender, get_email, get_birthday, get_locale, get_location;

private Session.StatusCallback fbStatusCallback = new Session.StatusCallback() {
    public void call(Session session, SessionState state, Exception exception) {
        if (state.isOpened()) {
            Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
                public void onCompleted(GraphUser user, Response response) {
                    if (response != null) {
                        // do something with <response> now
                        try{
                            get_id = user.getId();
                            get_name = user.getName();
                            get_gender = (String) user.getProperty("gender");
                            get_email = (String) user.getProperty("email");
                            get_birthday = user.getBirthday();
                            get_locale = (String) user.getProperty("locale");
                            get_location = user.getLocation().toString();   

                        Log.d(LOG_TAG, user.getId() + "; " +  
                            user.getName() + "; " +
                            (String) user.getProperty("gender") + "; " +        
                            (String) user.getProperty("email") + "; " +
                            user.getBirthday()+ "; " +
                            (String) user.getProperty("locale") + "; " +
                            user.getLocation());
                        } catch(Exception e) {
                             e.printStackTrace();
                             Log.d(LOG_TAG, "Exception e");
                         }

                    }
                }
            });
        }
    }
};
...
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fbinfo);
    try {
        openActiveSession(this, true, fbStatusCallback, Arrays.asList(
                new String[] { "email",  "user_location", "user_birthday",
 "user_likes", "publish_actions" }), savedInstanceState);
    }
    catch (Exception e) {
        e.printStackTrace();
    }
  private  Session openActiveSession(Activity activity, boolean allowLoginUI,
 StatusCallback callback, List<String> permissions, Bundle savedInstanceState) {
    OpenRequest openRequest = new OpenRequest(activity).
setPermissions(permissions).setLoginBehavior(SessionLoginBehavior.
SSO_WITH_FALLBACK).setCallback(callback).
setDefaultAudience(SessionDefaultAudience.FRIENDS);

    Session session = Session.getActiveSession();
    Log.d(LOG_TAG, "" + session);
    if (session == null) {
        Log.d(LOG_TAG, "" + savedInstanceState);
        if (savedInstanceState != null) {
            session = Session.restoreSession(this, null, fbStatusCallback, savedInstanceState);
        }
        if (session == null) {
            session = new Session(this);
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED) || allowLoginUI) {
            session.openForRead(openRequest);
            return session;
        }
    }
    return null;
}
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
}
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-22T15:47:39.327

Request.executeMeRequestAsync 已弃用！所以，这样做：

一旦你的会话准备好了：

```
private void getUserData(Session session, SessionState state)
{
    if (state.isOpened())
    {
        Request.newMeRequest(session, new Request.GraphUserCallback()
        {
            @Override
            public void onCompleted(GraphUser user, Response response)
            {
                if (response != null)
                {
                    try
                    {
                        String name = user.getName();
                        // If you asked for email permission
                        String email = (String) user.getProperty("email");
                        Log.e(LOG_TAG, "Name: " + name + " Email: " + email);
                    }
                    catch (Exception e)
                    {
                        e.printStackTrace();
                        Log.d(LOG_TAG, "Exception e");
                    }

                }
            }
        }).executeAsync();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T11:57:40.033

首先为facebook创建对象和veriable：

```
private static String FACEBOOK_APP_ID = "492429660800628";
private Facebook facebook;
private AsyncFacebookRunner mAsyncRunner; 
```

在 OnCreate 方法之后：

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.login_screen);

    facebook = new Facebook(FACEBOOK_APP_ID);
    mAsyncRunner = new AsyncFacebookRunner(facebook);

    loginFacebook();//this method when called when you required..

}

private void loginFacebook() {

    if (!facebook.isSessionValid()) {

        facebook.authorize(this, new String[] { "email", "publish_stream",
                "read_stream" }, new LoginDialogListener());

    } else {

        getProfileInformation();

    }

}

class LoginDialogListener implements DialogListener {

    public void onComplete(Bundle values) {
        try {

            getProfileInformation();

        } catch (Exception error) {
            Toast.makeText(LoginActivity.this, error.toString(),
                    Toast.LENGTH_SHORT).show();
        }
    }

    public void onFacebookError(FacebookError error) {
        Toast.makeText(LoginActivity.this,
                "Something went wrong. Please try again.",
                Toast.LENGTH_LONG).show();
    }

    public void onError(DialogError error) {
        Toast.makeText(LoginActivity.this,
                "Something went wrong. Please try again.",
                Toast.LENGTH_LONG).show();
    }

    public void onCancel() {
        Toast.makeText(LoginActivity.this,
                "Something went wrong. Please try again.",
                Toast.LENGTH_LONG).show();
    }
} 
```

请在登录 facebook 后尝试此方法：

```
public void getProfileInformation() {

    try {

        JSONObject profile = Util.parseJson(facebook.request("me"));
        Log.e("Profile", "" + profile);

        mUserId = profile.getString("id");
        mUserToken = facebook.getAccessToken();
        mUserName = profile.getString("name");
        mUserEmail = profile.getString("email");

        runOnUiThread(new Runnable() {

            public void run() {

                Log.e("FaceBook_Profile",""+mUserId+"\n"+mUserToken+"\n"+mUserName+"\n"+mUserEmail);

                Toast.makeText(getApplicationContext(),
                        "Name: " + mUserName + "\nEmail: " + mUserEmail,
                        Toast.LENGTH_LONG).show();

            }

        });

    } catch (FacebookError e) {

        e.printStackTrace();
    } catch (MalformedURLException e) {

        e.printStackTrace();
    } catch (JSONException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-20T12:54:37.940

```
//register callback object for facebook result
    LoginManager.getInstance().registerCallback(callbackManager, new FacebookCallback<LoginResult>() {
        @Override
        public void onSuccess(LoginResult loginResult) {

            //By Profile Class
            Profile profile = Profile.getCurrentProfile();
            if (profile != null) {
                facebook_id=profile.getId();
                f_name=profile.getFirstName();
                m_name=profile.getMiddleName();
                l_name=profile.getLastName();
                full_name=profile.getName();
                profile_image=profile.getProfilePictureUri(400, 400).toString();
            }
            //Toast.makeText(FacebookLogin.this,"Wait...",Toast.LENGTH_SHORT).show();
            GraphRequest request = GraphRequest.newMeRequest(AccessToken.getCurrentAccessToken(),
                    new GraphRequest.GraphJSONObjectCallback() {
                        @Override
                        public void onCompleted(JSONObject object, GraphResponse response) {
                            try {
                                email_id=object.getString("email");
                                gender=object.getString("gender");
                                String profile_name=object.getString("name");
                                long fb_id=object.getLong("id"); //use this for logout

                            } catch (JSONException e) {
                                // TODO Auto-generated catch block
                                //  e.printStackTrace();
                            }

                        }

                    });

            request.executeAsync();
        }

        @Override
        public void onCancel() {
            Toast.makeText(FacebookLogin.this,getResources().getString(R.string.login_canceled_facebooklogin),Toast.LENGTH_SHORT).show();
            progress.dismiss();
        }

        @Override
        public void onError(FacebookException error) {
            Toast.makeText(FacebookLogin.this,getResources().getString(R.string.login_failed_facebooklogin),Toast.LENGTH_SHORT).show();
            progress.dismiss();
        }
    }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-05T10:19:52.327

第一：登录

```
LoginManager loginManager = LoginManager.getInstance();
loginManager.registerCallback(callbackManager, new FacebookLoginCallback()); 
```

然后：获取个人资料信息

```
// call this when login success
Profile profile = Profile.getCurrentProfile();
// getAvatar
String avatar = ImageRequest.getProfilePictureUri(profile.getId(), width, height).toString(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-15T15:27:32.877

对于那些仍在使用新的 Graph API 3.0 的人来说，这里的解决方案适用于 Graph API 2.12 或更低版本。

```
 //Request a read permission of user's info from Facebook
    //Data provided by Facebook will be used for Firebase FireStore
    LoginManager.getInstance().logInWithReadPermissions(LogIn.this, Arrays.asList("email", "public_profile"));

    LoginManager.getInstance().registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {
        @Override
        public void onSuccess(final LoginResult loginResult) {

            mStateOfSuccess = false;
            //Dismiss any snackbar first before showing a new one
            mSnackBar.dismiss();
            mSnackBar.show();

            Log.d(TAG, "facebook:onSuccess:" + loginResult);

            //Bundle is use for passing data as K/V pair like a Map
            Bundle bundle=new Bundle();
            //Fields is the key of bundle with values that matched the proper Permissions Reference provided by Facebook
            bundle.putString("fields","id, email, first_name, last_name, gender,age_range");

            //Graph API to access the data of user's facebook account
            GraphRequest request = GraphRequest.newMeRequest(
                    loginResult.getAccessToken(),
                    new GraphRequest.GraphJSONObjectCallback() {
                        @Override
                        public void onCompleted(JSONObject object, GraphResponse response) {
                            Log.v("Login Success", response.toString());

                            //For safety measure enclose the request with try and catch
                            try {

                                //The get() or getString() key should be included in Bundle otherwise it won't work properly
                                //If not then error dialog will be called

                                //First re-initialize jSON object to a new Contructor with parameter that is equal to a jSON format age range
                                JSONObject ageRange  = new JSONObject(object.getString("age_range"));

                                        //Log in using Facebook with Firebase
                                        loginToFirebaseUsingFacebook(loginResult.getAccessToken()
                                                ,object.getString("first_name")
                                                ,object.getString("last_name")
                                                //Then get again get a string from object itself for the minimum age range
                                                //The idea is that we need to get minimum age only written in string format
                                                //not the whole age range data that is written in jSON format
                                                ,ageRange.getString("min")
                                                ,object.getString("gender")
                                                ,object.getString("email")
                                        );

                            }
                            //If no data has been retrieve throw some error
                            catch (JSONException e) {
                               ErrorDialog(e.getMessage(),"facebookAuth");
                            }

                        }
                    });

            //Set the bundle's data as Graph's object data
            request.setParameters(bundle);

            //Execute this Graph request asynchronously
            request.executeAsync();

        }

        @Override
        public void onCancel() {
            Log.d(TAG, "facebook:onCancel");
            ErrorDialog("Request has canceled.","facebookAuth");
        }

        @Override
        public void onError(FacebookException error) {
            Log.d(TAG, "facebook:onError", error);
            ErrorDialog(String.valueOf(error),"facebookAuth");
        }
    });

} 
```

请注意，使用年龄范围需要 App Review 才能在生产中使用，这意味着您可以尝试在自己的帐户（管理员或开发人员帐户）上使用它。访问：**[https](https://developers.facebook.com/docs/facebook-login/permissions/?locale=en_US#reference-public_profile)** ://developers.facebook.com/docs/facebook-login/permissions/?locale=en_US#reference-public_profile了解更多详情。

# objective-c - OpenGL ES不会绘制

> ID：14194123
> 
> 赞同：1
> 
> 时间：2013-01-07T10:34:24.477
> 
> 标签：objective-c, ios, xcode, opengl-es, 3d

我编写了一个类，目前允许通过数组和变量（指定数组中的变量数量）加载 3D 模型。该代码对我来说似乎很好，但没有在屏幕上绘制任何内容。

这是顶点结构。

```
typedef struct
{
    float pos[3];
    float texCoord[2];
    float colour[4];
} Vertex; 
```

这就是模型的初始化方式。

```
- (id)VModelWithArray:(Vertex[])Vertices count:(unsigned short)count
{
    self.Vertices = Vertices;
    self.count = count;
    return self;
} 
```

这两个类变量像这样在标题中声明。

```
@property (nonatomic, assign) Vertex *Vertices;
@property (nonatomic, assign) unsigned short count; 
```

它在我的视图控制器中被调用，就像这样。

```
Vertex array[] = {
        {{1, -1, 0}, {1, 0}, {1, 0, 0, 1}},
        {{1, 1, 0}, {1, 1}, {0, 1, 0, 1}},
        {{-1, 1, 0}, {0, 1}, {1, 1, 1, 1}}
    };

    unsigned short elements = sizeof(array)/sizeof(Vertex);
    self.model = [[VModel alloc] VModelWithArray:array count:elements]; 
```

Model 类在标头中声明，如下所示。

```
@property (strong, nonatomic) VModel *model; 
```

VBO 就是通过这种方法创建的。

```
- (void)CreateVBO
{
    glGenBuffers(1, &VBO);
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertex)*self.count, self.Vertices, GL_STATIC_DRAW);
} 
```

像这样在视图控制器中初始化模型后调用它。

```
[self.model CreateVBO]; 
```

模型是通过这种方法渲染的。

```
- (void)Render
{
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, pos));
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, texCoord));
    glEnableVertexAttribArray(GLKVertexAttribColor);
    glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, colour));
    glDrawArrays(GL_TRIANGLES, 0, self.count);
    glDisableVertexAttribArray(GLKVertexAttribPosition);
    glDisableVertexAttribArray(GLKVertexAttribTexCoord0);
    glDisableVertexAttribArray(GLKVertexAttribColor);
} 
```

在此方法中调用它。

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect 
{
    glClearColor(0.5, 0.5, 0.5, 1.0);
    glClear(GL_COLOR_BUFFER_BIT);
    [self.effect prepareToDraw];
    [self.model Render];
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:57:47.230

我想通了，在合并以前项目的代码时，我不小心遗漏了这些行。

```
[EAGLContext setCurrentContext:self.context];
self.effect = [[GLKBaseEffect alloc] init]; 
```

# jquery - 页面右侧的jquery mouseover -out

> ID：14194131
> 
> 赞同：0
> 
> 时间：2013-01-07T10:35:03.187
> 
> 标签：jquery

我的问题是。我在页面大小合适的地方有一个篮子。这是代码：

```
 $('#basket_container').mouseenter(function(){

    // code opening

 });
 $('#basket_container').mouseleave(function(){
    // code closing

 }); 
```

在出现右滚动条之前，它运行良好，只要鼠标移过滚动条，就会发生 mouseleave 事件。那么我怎样才能防止滚动条上的鼠标离开事件。（对不起我的英语）

# android - 通过 USB 调试时，Android 设备是否应该充电？

> ID：14194132
> 
> 赞同：-2
> 
> 时间：2013-01-07T10:35:05.027
> 
> 标签：android, debugging, permissions, usb, device

我只是在想，如果设备总是以大约 90-100% 的速度充电，那么电池内存就不会很好。
在谷歌上找不到任何东西。
有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:19:49.040

这很好，对于较旧的手机，电池无法处理不断充电和一直打开和关闭的问题，所以这是一个坏主意。

但是，较新的设备并不重要，因为电池更适合这种类型的工作。加上安卓会照顾电池，即当它感觉它可能变得有点太热时，它会停止充电（尽管手机仍会显示为正在充电）让它冷却。

这完全没问题且安全

# jquery - 如何使用jsp在多选框上显示工具提示？

> ID：14194133
> 
> 赞同：0
> 
> 时间：2013-01-07T10:35:06.910
> 
> 标签：jquery, jsp, tooltip, jquery-hover

```
<div class="span3">
                <label>Restaurants <span class="f_req">*</span></label> <select
                    id="rest_id" name="rest_id"
                    data-placeholder="- Select Restaurants -" class="chzn-select"multiple ">
                    <%
                        List <restaurant> rest_list=restaurantLocalServiceUtil.getAllRestaurantByOrganizationId(themeDisplay);                                                          
                                                        for(int i=0;i<rest_list.size();i++) {
                    %>
                    <option id="<%=rest_list.get(i).getPrimaryKey()%>"
                        value=<%=rest_list.get(i).getPrimaryKey()%>><%=rest_list.get(i).getName().toString()%>
                    </option>
                    <%
                        }
                    %>
                </select> <span id="restError3" style="color: #C62626;" class="help-block"></span>
            </div> 
```

以上是我在 jsp 代码中的一个部门的片段。它在多选框中列出了餐馆。我想要做的是，我想显示有关餐厅的一些其他详细信息作为工具提示，鼠标悬停在列表框中或选定餐厅中的餐厅名称上...工具提示详细信息，例如（餐厅城市，或地址，或州）..所以我怎么能证明这一点？谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T15:33:43.053

The tooltip is represented by the HTML element's `title` attribute.

For example,

```
<option value="42" title="This is option with label 'Foo' and ID 42">Foo</option> 
```

* * *

I'm not sure why you tagged this jQuery, but if you want fanciness, then just pick one of the many available [jQuery tooltip plugins](http://google.com/search?q=jquery%20tooltip%20plugin). Do however note that almost all of them do that based on the value of the HTML element's `title` attribute. The only what they effectively do is to turn the "standard" tooltip look'n'feel into some flashy look'n'feel by removing the `title` attribute and baking a bunch of `<div>` and CSS, etc boilerblate which shows up on mouse over.

# jpa - 从 JPA/EclipseLink 删除的对象重新出现在数据库中

> ID：14194134
> 
> 赞同：3
> 
> 时间：2013-01-07T10:35:09.050
> 
> 标签：jpa, entity, refresh, eclipselink

我有一个带有 EclipseLink/JPA 实体的 Java EE 应用程序与我的 PostgreSQL 数据库通信。一切似乎都很好，但最近我注意到我的实体越来越奇怪的行为，所以我需要你的帮助来找出哪些设置和/或代码位是错误的......

我有一个主要问题：有时（这是一个糟糕的开始），当我通过我的网络应用程序删除一个对象时，该对象在我的数据库中被很好地删除（我看到了）但是当我刷新应用程序时，被删除的对象突然重新出现（在应用程序+数据库中！）所以我猜这背后存在托管实体的问题？！

例如，我有一个实体“项目”，它有一个“分析”列表，我在从项目中删除分析时遇到了这个问题。它首先被删除（也在数据库中），但是当我重新打开项目时，分析再次出现！

这是我的课程项目：

```
/**
 * The persistent class for the projet database table.
 * 
*/
@Entity
@Table(name="projet")
public class Projet implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="id_projet", unique=true, nullable=false)
private Integer idProjet;

@Column(name="nom_projet", nullable=false, length=50)
@OrderAttribute(lang=Language.BOTH)
@ShowParameter(position=10)
@IdentifierName(lang=Language.BOTH)
private String nomProjet;

@Column(name="projet_public", nullable=false)
private Boolean projetPublic;

//bi-directional many-to-one association to Analyse
@OneToMany(mappedBy="projet", cascade={CascadeType.ALL})//orphanRemoval=true, 
private Set<Analyse> analyses;

//bi-directional many-to-one association to Utilisateur the creator of the project
@ManyToOne
@JoinColumn(name="id_utilisateur", nullable=false)
@ShowParameter(position=20)
private Utilisateur utilisateur;

//bi-directional many-to-one association to ProjetUtilDroit
@OneToMany(mappedBy="projet", cascade={CascadeType.ALL})
private Set<ProjetUtilDroit> projetUtilDroits;

public Projet() {
}

public Integer getIdProjet() {
    return this.idProjet;
}

public void setIdProjet(Integer idProjet) {
    this.idProjet = idProjet;
}

public String getNomProjet() {
    return this.nomProjet;
}

public void setNomProjet(String nomProjet) {
    this.nomProjet = nomProjet;
}

public Boolean getProjetPublic() {
    return projetPublic;
}

public void setProjetPublic(Boolean projetPublic) {
    this.projetPublic = projetPublic;
}

public Set<Analyse> getAnalyses() {
    return this.analyses;
}

public void setAnalyses(Set<Analyse> analyses) {
    this.analyses = analyses;
}

public Utilisateur getUtilisateur() {
    return this.utilisateur;
}

public void setUtilisateur(Utilisateur utilisateur) {
    this.utilisateur = utilisateur;
}

public Set<ProjetUtilDroit> getProjetUtilDroits() {
    return this.projetUtilDroits;
}

public void setProjetUtilDroits(Set<ProjetUtilDroit> projetUtilDroits) {
    this.projetUtilDroits = projetUtilDroits;
}

@Override
public boolean equals(Object o){
    if(o instanceof Projet){
        Projet project = (Projet) o;
        return (project.idProjet == this.idProjet) || (project.nomProjet.equalsIgnoreCase(this.nomProjet));
    }
    return false;
}

} 
```

这是我的课堂分析（法语分析）：

```
/**
* The persistent class for the analyz database table.
* 
 */
@Entity
@Table(name="analyz")
public class Analyse implements Serializable{
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="id_analyse", unique=true, nullable=false)
private Integer idAnalyse;

@Column(name="nom_analyse", nullable=false, length=50)
@OrderAttribute(lang = Language.BOTH)
private String nomAnalyse;

//bi-directional many-to-one association to Projet
@ManyToOne(cascade={CascadeType.MERGE, CascadeType.REFRESH})
@JoinColumn(name="id_projet", nullable=false)
private Projet projet;

//bi-directional many-to-one association to Scenario
@OneToMany(mappedBy="analyse", cascade={CascadeType.ALL})//orphanRemoval=true, 
private Set<Scenario> scenarios;

public Analyse() {
}

public Integer getIdAnalyse() {
    return this.idAnalyse;
}

public void setIdAnalyse(Integer idAnalyse) {
    this.idAnalyse = idAnalyse;
}

public String getNomAnalyse() {
    return this.nomAnalyse;
}

public void setNomAnalyse(String nomAnalyse) {
    this.nomAnalyse = nomAnalyse;
}

public Projet getProjet() {
    return this.projet;
}

public void setProjet(Projet projet) {
    this.projet = projet;
}

public Set<Scenario> getScenarios() {
    return this.scenarios;
}

public void setScenarios(Set<Scenario> scenarios) {
    this.scenarios = scenarios;
}

@Override
public boolean equals(Object o){
    if(o instanceof Analyse){
        Analyse a = (Analyse) o;
        return (this.idAnalyse == a.idAnalyse) || (a.getProjet().equals(this.getProjet()) && (this.nomAnalyse.equalsIgnoreCase(a.nomAnalyse)));
    }
    return false;
}
} 
```

我为所有经典函数（如创建/更新/删除）编写了一个通用 DAO。这是我的代码：

```
 public class BasicDAO<T extends Serializable> implements IDao<T> {

/** The entity class. */
private Class<T> entityClass;
/**
 * The entity manager factory
 */
protected EntityManagerFactory emf;
/**
 * Instantiates a new abstract dao.
 */
public BasicDAO(Class<T> c) {
    entityClass = c;
}

/**
 * Gets the emf.
 *
 * @return the emf
 */
public EntityManagerFactory getEmf() {
    return emf;
}

/**
 * Sets the emf.
 *
 * @param em the new emf
 */
public void setEmf(EntityManagerFactory emf) {
    this.emf = emf;
}

public T findById(Integer id){
    T result = null;
    EntityManager em = emf.createEntityManager();
    if (id == null || id < 1)
        throw new PersistenceException("Id may not be null or negative");
    result = em.find(entityClass, id);
    em.refresh(result);
    em.close();
    return result;
}

@SuppressWarnings({ "unchecked", "rawtypes" })
public List<T> findAll(){
    List<T> result = null;
    EntityManager em = emf.createEntityManager();
    CriteriaQuery<Object> cq = em.getCriteriaBuilder().createQuery();
    cq.select(cq.from(entityClass));
    result = (List)em.createQuery(cq).getResultList();
    em.close();
    return result;
}

public void create(T entity){
    System.out.println("Create de AbstractDAO");
    //First we check that the object is not alreadt in database
    List<T> list = findAll();
    if(list.contains(entity)){
        return;
    }
    EntityManager em = emf.createEntityManager();
    em.getTransaction().begin();
    if(entity == null)
        throw new PersistenceException("Entity to persist may not be null");//throw Persistence exception
    em.persist(entity);
    em.getTransaction().commit();
    em.close();
}

public void delete(T entity){
    EntityManager em = emf.createEntityManager();
    em.getTransaction().begin();
    if (entity == null)
        throw new PersistenceException("Entity to delete may not be null");
    em.remove(em.merge(entity));
    em.getTransaction().commit();
    em.close();
}

public T update(T entity){
    T result = null;
    if (entity == null){
        System.out.println("Exception : entity to update may not be null");
        throw new PersistenceException("Entity to update may not be null");
    }
    List<T> list = findAll();
    int numberEquals = 0;
    for(T elem : list){
        if(elem.equals(entity))
            numberEquals++;
    }
    if(numberEquals>1)
        return null;
    EntityManager em = emf.createEntityManager();
    em.getTransaction().begin();
    em.merge(entity);
    result = entity;
    em.getTransaction().commit();
    em.close();
    return result;
} 
```

}

任何帮助或批评将不胜感激！:-)

# c# - while循环外的对象会被GCed吗？

> ID：14194137
> 
> 赞同：1
> 
> 时间：2013-01-07T10:35:29.767
> 
> 标签：c#, garbage-collection, while-loop

```
 public static void TimePublisher(int port)
    {
        var ctx = ZmqContext.Create();
        var socket = ctx.CreateSocket(SocketType.REP);
        socket.Bind("tcp://*:" + port.ToString(CultureInfo.InvariantCulture));
        while (true)
        {
            try
            {
                var wait = socket.Receive(Encoding.UTF8);
                var timeString = GetTimeString();
                socket.Send(timeString, Encoding.UTF8);
            }
            catch (ZmqException ex)
            {
                Logger.ErrorException("blabla", ex);
            }

        }
    } 
```

在执行下面的 while 循环期间，对象 ctx 会被 GC 吗？我认为堆栈中存储了一个引用对象的引用，只有当方法退出时，堆栈才会被清除，因此引用被清除，只有对象应该被 GCed。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:37:58.200

这取决于。如果`socket`维护对创建它的上下文的引用，则没有。(*)

如果没有，那么也许。如果您在非调试上下文中运行，那么它*可能*会在循环运行时被收集`while`- 当然，如果在循环的生命周期内没有发生任何收集，`while`那么它将不会被收集。

如果您在调试中运行，那么所有局部变量都会保持活动状态，直到方法结束。

* * *

(*) 同样，`ZmqContext.Create`似乎是一个静态方法。如果该方法将它返回的值存储在某种静态集合中，那么它可能仍然不符合条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:36:39.100

这取决于是否`socket`持有对它的引用。

如果`socket`确实持有对它的引用，`ctx`那么它将不会被 GC 处理。

如果`socket`没有引用，`ctx`那么它可以用于 GC。

如果您不希望它被 GC 处理，那么[`GC.KeepAlive`](http://msdn.microsoft.com/en-us/library/system.gc.keepalive.aspx)在循环之后添加一个调用。

# jquery - jqgrid删除：没有得到价值

> ID：14194139
> 
> 赞同：0
> 
> 时间：2013-01-07T10:35:50.607
> 
> 标签：jquery, ajax, jsp, servlets, jqgrid

我使用 JSP 和 Servlet（IDE：Eclipse，数据库：Oracle10）开发了一个 Web 应用程序。

我`JQGRID`用来以表格格式显示数据。我还想要添加、编辑、删除的功能`JQGRID`。到目前为止，我已经完成了编辑功能。

现在我想要`Delete`功能，问题是我不能`pass data from JQGRID to servlet`。

以下是我的源代码：

```
jQuery("#list10_d2").jqGrid({
                height: "100%",
                url:'ProtocolJGridServChildStages?q=2&action=protStages',
                datatype: "xml",
                 colNames:['Sr. No.','PROTOCOL_ID',  'STAGE_ID',  'DESCRIPTION'],
                 colModel:[{name:'srNo',index:'srNo', width:35,sortable:true},
                           {name:'PROTOCOL_ID',index:'PROTOCOL_ID', width:100,sortable:false},
                           {name:'STAGE_ID',index:'STAGE_ID', width:100,sortable:false},
                           {name:'DESCRIPTION',index:'DESCRIPTION', width:150,sortable:false,editable:true}
                           ],
                rowNum:5,
                rowList:[2,4,10],
                pager: '#pager10_d2',
                sortname: 'PROTOCOL_ID',
                viewrecords: true,
                sortorder: "asc",
                multiselect: true,
                editurl: "ProtocolJGridServChildStages?action=protocolStageEdit",
                caption:"CRM_PROT_STAGES",
                onSelectRow: function(ids)
                {
                    if(ids && ids!==lastsel)
                    {               
                        var ret = jQuery("#list10_d2").jqGrid('getRowData',ids);
                        protID = ret.PROTOCOL_ID;
                        alert(protID);
                        stageID = ret.STAGE_ID;
                        alert(stageID);

                        jQuery("#list10_d2").jqGrid('setGridParam',{}, {editurl:'ProtocolJGridServChildStages?action=protocolStageEdit&protID='+protID+'&stageID='+stageID});
                        jQuery('#list10_d2').jqGrid('restoreRow',lastsel);
                        jQuery('#list10_d2').jqGrid('editRow',ids,true);
                        lastsel=ids;
                    }
                }
            });
            jQuery("#list10_d2").jqGrid('navGrid','#pager10_d2',{add:true,edit:true,del:true},{width:500},{width:500,url: 'ProtocolJGridServChildStages?action=protocolStageAdd&protID='+protID, closeAfterAdd: true},{mtype: 'GET',url: 'ProtocolJGridServChildStages?action=protocolStageDelete&protID='+protID});
            jQuery("#ms1").click( function() {
                var s;
                s = jQuery("#list10_d2").jqGrid('getGridParam','selarrrow');
                alert(s);
            }); 
```

我`protID`的. `undefined`_`DeleteServlet`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:33:01.653

你`protID`以`url`错误的方式使用。`url`用于删除操作的选项的值将在执行调用期间设置**一次**`navGrid`。目前，您尚未为变量设置任何值`protID`。您可以通过以下方式修复可以使用的代码：`onclickSubmit`、`delData`或。`beforeSubmit``serializeDelData`

`mtype: 'GET'`我对您使用选项进行删除操作有点担心。在这种情况下，通常使用 HTTP POST 或 HTTP DELETE。如果你真的需要`mtype: 'GET'`你可以更换

```
{
    mtype: 'GET',
    url: 'ProtocolJGridServChildStages?action=protocolStageDelete&protID=' + protID
} 
```

参数`navGrid`_

```
{
    mtype: 'GET',
    url: 'ProtocolJGridServChildStages',
    delData: {
        action: 'protocolStageDelete',
        protID: function () {
            return protID;
        }
    }
} 
```

或者

```
{
    mtype: 'GET',
    url: 'ProtocolJGridServChildStages',
    onclickSubmit: function (options, rowid) {
        var rowData = jQuery(this).jqGrid('getRowData', rowid);
        return {
            action: 'protocolStageDelete',
            protID: ret.PROTOCOL_ID
        };
    }
} 
```

如果您确实考虑使用`mtype`other as `GET`，但需要设置`protID`为 URL 的一部分，您可以在内部或回调中`url`动态修改选项。例如`onclickSubmit``beforeSubmit`

```
{
    mtype: 'GET',
    onclickSubmit: function (options, rowid) {
        var rowData = jQuery(this).jqGrid('getRowData', rowid);
        options.url = 'ProtocolJGridServChildStages?' + jQuery.param({
            action: 'protocolStageDelete',
            protID: ret.PROTOCOL_ID
        });
    }
} 
```

您可以选择更符合您要求的方式。

# c# - Un在C#中注册速记/内联事件

> ID：14194140
> 
> 赞同：0
> 
> 时间：2013-01-07T10:35:54.710
> 
> 标签：c#

> **可能重复：**
> [如何取消注册“匿名”事件处理程序](https://stackoverflow.com/questions/1348150/how-do-i-unregister-anonymous-event-handler)

在我正在使用的 c# 方法中

```
this.Loaded+=(sender,e)=>{ my code }; 
```

用于在加载时执行代码。但我的问题是我不知道如何取消注册这个连锁事件。我尝试了类似的东西

```
this.Loaded-=(sx,ex)=>{}; 
```

但该活动并未取消注册。任何人请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T10:39:21.820

此代码使用附加到事件的方法创建匿名类型，因此要从该事件中分离，您需要提供相同的方法而不是新方法。

所以试试这个：

```
EventHandler handler = (sender,e)=>{...};
Loaded += handler;
Loaded -= handler; 
```

附加到`this.`事件的方式通常有很好的选择，例如

```
override OnLoaded(EventArgs args) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:38:56.427

您*不能取消注册*内联事件订阅。如果您想*取消注册*，请使用常规`delegate/handler`订阅。

# android - Viewpager android中连续翻转图像

> ID：14194143
> 
> 赞同：2
> 
> 时间：2013-01-07T10:36:08.320
> 
> 标签：android, android-layout

我用 viewpager Indicator 实现了一个 Viewpager。Viewpager 在其每个页面中都有 ImageViews。现在我想自动连续翻转 Viewpager（我不应该使用 View Flipper）.. 任何人都可以帮我解决这个问题。提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:00:47.843

```
 handler = new Handler();
 runnable = new Runnable(){
   public void run() {
     handler.postDelayed(runnable, 5000);
     viewPager.setCurrentItem(viewPager.getCurrentItem() + 1, true); 
  } 
 };
 handler.postDelayed(runnable, 5000); 
```

# reporting-services - 在 SSRS 中，如何在运行时在 reprort 中评估存储在数据库表中的表达式

> ID：14194144
> 
> 赞同：0
> 
> 时间：2013-01-07T10:36:09.763
> 
> 标签：reporting-services, ssrs-2008

我正在使用 SSRS 2008 R2。表达式（特别是日期表达式）存储在数据库表中。我使用存储过程获取该表达式并将其显示在 texbox 中。现在的问题是文本框没有在运行时评估该表达式。相反，它按原样显示表达式（在字符串中。如“Today()”而不是“1/7/2003”）。

所以，简而言之，我想要一个由 VBScript 中的 Eval() 函数给出的功能。所以，如果有人试过这个，请给我解决方案或建议。

让我知道是否有任何混淆。

# django - 在 POST 中检索前缀表单列表

> ID：14194145
> 
> 赞同：0
> 
> 时间：2013-01-07T10:36:19.670
> 
> 标签：django, django-forms

我正在创建一个表单列表，每个表单都传递了一个[前缀 arg](https://docs.djangoproject.com/en/dev/ref/forms/api/#prefixes-for-forms)。在我的情况下，前缀 arg 是一个动态值（此外，每个表单在初始化期间都需要一些额外的 kwargs），例如

```
for staff in stafflist:
    form = forms.BookingForm(
                prefix=staff.pk, event=event, type=type) 
```

因此，为了重新创建 POST 请求的表单，我需要将前缀值存储在 Session 中。这允许我执行以下操作：

```
staff_list = request.session['staff_list_on_view']
    for staff in stafflist:
        post_forms_dict[staff.id] = forms.BookingForm(
            request.POST, prefix=staff.pk, event=event, type=type)

if all([form.is_valid() for form in post_forms_dict.values()]):
    for form in post_forms_dict.values():
        form.save() 
```

这一切都很好，但我想知道是否有比将前缀值存储在 Session 中更好的方法（我通常喜欢避免）。Django 是否能够自行返回前缀表单列表，而我不必再次使用前缀重新创建它们（并且必须记住它）？像 request.POST.get_prefixed_data_as dict() 这样的东西会很好;)

注意：我正在研究表单集，但我相信由于我需要为每个单独的表单设置动态 kwargs，我将无法使用它们。

# c# - System.ComponentModel.Win32Exception：访问被拒绝错误

> ID：14194146
> 
> 赞同：15
> 
> 时间：2013-01-07T10:36:22.773
> 
> 标签：c#, asp.net, iis, iis-7, iis-7.5

我正在使用 C# 代码来启动和停止窗口服务，但出现此错误。

```
System.ComponentModel.Win32Exception: Access is denied 
```

我的代码：

```
 public void StartService(string serviceName, int timeoutMilliseconds)
    {
        ServiceController service = new ServiceController(serviceName);
        try
        {
            TimeSpan timeout = TimeSpan.FromMilliseconds(timeoutMilliseconds);

            service.Start();
            service.WaitForStatus(ServiceControllerStatus.Running, timeout);
            lblMessage.Text = "Service Started.";
        }
        catch (Exception ex)
        {
            //lblMessage.Text = "Error in Service Starting.";
            lblMessage.Text = ex.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T13:00:05.820

确保您的服务器上的应用程序池身份帐户有权启动该服务。它可以在您的 ASP.NET 开发服务器上运行，因为它在您的用户帐户 (admin) 下运行。在默认的 IIS 配置中，此帐户是网络服务或 ApplicationPoolIdentity（取决于 IIS 版本），并且通常无法管理服务。

因此，在 IIS 管理器中更改池帐户（应用程序池/NameOfYourYourPool/高级设置）。您可以使用内置帐户或使用您的域之一。

![应用程序池](../Images/053d759a0e228b443c443c872692967c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-16T07:16:41.707

在管理员模式下运行你的 VS 并加载你的项目。在管理员模式下打开开发人员 VS cmd。给正确的用户名和计算机域名，如 domainname\username。希望它能正常工作。

# forms - 自定义表单域渲染

> ID：14194148
> 
> 赞同：10
> 
> 时间：2013-01-07T10:36:30.743
> 
> 标签：forms, symfony-2.1, sonata-admin

我想在 [奏鸣曲管理包](http://sonata-project.org/bundles/admin/master/doc/index.html)的编辑页面中自定义表单字段的呈现，以包含一个使用字段文本内容的小程序。

我知道我必须`configureFormFields`在管理类中编辑函数，但我需要知道 3 件事：

*   提供字段表单模板的语法是什么
*   模板文件放在哪里（哪个目录）
*   模板必须是什么样子。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-07T15:53:21.010

找到了解决方案

我所做的是：

1.  创建了一个字段类型，我们在 myCompany\myBundle\Form\Type\myfieldType.php 中将其*称为*myfieldType

    ```
    namespace myCompany\myBundle\Form\Type;

    use Symfony\Component\Form\AbstractType;
    use Symfony\Component\Form\FormBuilder;

    class myfieldType extends AbstractType
    {

        public function getParent()
        {
            return 'text';
        }

        public function getName()
        {
            return 'myfield';
        }
    } 
    ```

2.  在 app/config/services.yml 中注册了 Type

    ```
    myCompany.myBundle.form.type.myfield:
        class: myCompany\myBundle\Form\Type\myfieldType
        tags:
            - { name: form.type, alias: myfield } 
    ```

3.  在我的 myentityAdmin 课程中，

    ```
     protected function configureFormFields(FormMapper $formMapper)
     {
         $formMapper
         ->add('myfieldname', 'myfield')
         ...
     } 
    ```

    和

    ```
    public function getFormTheme() {
        return array('myCompanymyBundle:Admin:myfield_edit.html.twig');
    } 
    ```

    和模板：

    ```
    {# src/mycompany/myBundle/Resources/views/Form/myfield_edit.html.twig #}
    {% block myfield_widget %}
        {% spaceless %}
            {{ block('textarea_widget') }}
        {% endspaceless %}
    {% endblock %} 
    ```

现在我可以通过 twig 变量“value”访问表单字段值！

如此简单……当你得到它时。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-16T15:27:06.513

除非块名称前缀与表单类型的名称匹配，否则 user1254498 的解决方案将不起作用。至少在最后一个版本的奏鸣曲管理包（2.2.12）中。在这种情况下：

```
{# src/mycompany/myBundle/Resources/views/Form/myfield_edit.html.twig #}
{% block myfield_widget %}
    {% spaceless %}
        {{ block('textarea_widget') }}
    {% endspaceless %}
{% endblock %} 
```

而且，关于`getFormTheme()`，你也应该返回父主题，否则你可能会破坏整个风格......

```
public function getFormTheme()
{
    return array_merge(
            parent::getFormTheme(), array(
          'mycompanyBundle:Form:myfield_edit.html.twig')
    );        
} 
```

此外，您可以使用变量访问 twig 模板中的管理服务`sonata_admin.admim`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-25T16:03:24.613

在您的 services.yml 文件中，您为编辑操作定义模板：

```
app.admin.product:
    class: AppBundle\Admin\ProductAdmin
    arguments: [~, AppBundle\Entity\Product, AppBundle:Admin\Product]
    tags:
        - {name: sonata.admin, manager_type: orm, group: Products, label: Products}
    calls:
        - [ setTemplate, [edit, AppBundle:Product:edit.html.twig]] 
```

然后，在该模板中，您可以覆盖表单中字段的模板：

```
{% extends 'SonataAdminBundle:CRUD:base_edit.html.twig' %}

{% form_theme form.selectall 'AppBundle:Form:selectall.html.twig' %}
{% form_theme form.Country 'AppBundle:Form:country.html.twig' %} 
```

然后我的模板看起来像这样：

```
{% block form_row %}
<div class="form-group">
{{ form_label(form) }}
{% set c = 0 %}
{% for i in form %}
    {% set c = c+1 %}
    {% if (c == 1) %}
        <div style="float: left; width: 20%;">
    {% endif%}
    {{ form_row(i) }}
    {% if ((c == 60) or (form|length == loop.index)) %}
        </div>
        {% set c = 0 %}
    {% endif%}
{% endfor %}
</div>
{% endblock form_row %} 
```

在这种情况下，我的国家/地区复选框出现在 60 个元素的列中，而不是在包含整个元素列表的一列中。

希望这对其他人有帮助。

# javascript - 对 require.js 感到困惑

> ID：14194149
> 
> 赞同：0
> 
> 时间：2013-01-07T10:36:35.050
> 
> 标签：javascript, asp.net, html, sql, requirejs

我一直在看，`require.js`我对如何将它用于我的小部件系统感到有点困惑。

我的小部件系统基本上允许用户选择她/他想要查看哪些小部件存储在数据库中。

因此，当用户在下次访问时加载页面时，她/他将只看到她/他选择的小部件。实际上只加载显示的小部件所需的 html 和 javascript，而不是加载所有小部件的所有 html 和 javascript，然后隐藏不需要的东西。

我感到困惑的是如何用 require.js 做到这一点

我应该动态生成下面的 require.js 代码吗？如果用户已保存`widget_1, widget_5 and widget_70`，我假设我需要像这样动态生成 javascript？

```
require(['widget_1','widget_5','widget_70'], function(w1, w5, w70){
    // then do something here?
}); 
```

require 行，是否应该基于 sql 查询动态生成？

因此，如果他们只选择一个小部件保存以供下次查看，他们将只会得到：

```
require(['widget_90'], function(w90){
    // then do something here?
}); 
```

那是我应该做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:14:51.813

始终定义模块经常依赖的库的路径，如下所示：

```
<script data-main="scripts/main" src="scripts/require.js"></script> 
```

文件：**脚本/main.js**

```
require.config({
    paths: {
        jQuery_1_7_2: 'lib/jquery.1.7.2',
        underscore: 'lib/underscore',
        .....
        .....
    }
}); 
```

**注意：您需要在模块中包含库并作为对象返回，如下所示：**

文件：**lib/jquery.1.7.2.js**

```
define([ 'lib/jquery/jquery.1.7.2.min' ], function() {

    return jQuery.noConflict(true);

}); 
```

对于不遵循模块化方法的其他库 [AMD 规范]，可以遵循相同的方法

**[注意：使用shim 功能](http://requirejs.org/docs/api.html#config-shim)可以避免上述定义库模块的步骤**

由于您的页面是动态的，因此您永远不知道将加载哪些模块。

您可以调用多个 require() 调用来加载模块。由于 requirejs 异步加载脚本，因此以下方法不会损害您的页面性能。

**在 HTML 视图中的 Module-1**

```
<html>..
<div id="module_1">
    //contents of module 1
</div>
<script type="text/javascript">
    require(["scripts/widgets/module_1"], function( module_1 ){
        module_1.init();
    })
</script>
..</html> 
```

文件：**脚本/小部件/module_1.js**

```
define(["jQuery_1_7_2","underscore"], function($, _){
    // Module functionality goes here
    return {
        init: function(){
            // Module initialiser
        }
    }
}); 
```

**模块 2 内置 HTML 视图**

```
<html>..
<div id="module_2">
    //contents of module 2
</div>
<script type="text/javascript">
    require(["scripts/widgets/module_2"], function( module_2 ){
        module_2.init();
    })
</script>
..</html> 
```

文件：**脚本/小部件/module_2.js**

```
define(["jQuery_1_7_2","underscore"], function($, _){
    // Module functionality goes here
    return {
        init: function(){
            // Module initialiser
        }
    }
}); 
```

如果您不介意在 DOM 加载后初始化模块，您可以使用[controljs](http://stevesouders.com/controljs/)并更改脚本标签的 MIME 类型。我相信这不会对页面性能产生太大影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:48:41.040

我假设：

*   您在某处的要求配置中定义了小部件的路径
*   您的小部件是沙盒的（可以在没有依赖项的情况下运行）
*   您的应用程序可以在没有小部件的情况下运行

您可以在服务器上生成数组并将其填充到 js（例如作为内联脚本），然后[发布](https://github.com/phiggins42/bloody-jquery-plugins/blob/master/pubsub.js)某种 app.ready 事件，如下所示：

```
<script>
require(/*array from the server*/, function(){
    // publish application ready event
});
</script> 
```

# doctrine - Symfony 2.1-x / Composer ErrorException 与 DoctrineBundle

> ID：14194151
> 
> 赞同：2
> 
> 时间：2013-01-07T10:36:37.627
> 
> 标签：doctrine, symfony-2.1, composer-php

*** 更新：这个问题可以通过减少目录深度来解决 ***

我尝试使用 composer 通过推荐的方式安装最新的 Symfony 版本（2.1.6、2.1.5、2.1.x-dev），但它总是失败并出现相同的错误：

> C:\Users\made\eclipse-workspace\template-compiler\template-compiler\lib\server\symfony\vendor\doctrine\doctrine-bundle\Doctrine\Bundle\DoctrineBundle\b05c336283dc24eb535a50f89ce9d91c.0 - Das Handle ist ung¬tig。

到目前为止，搜索没有给我更多线索，我想避免从头开始创建所有内容。我尝试了作曲家的自我更新功能和上面提到的所有版本，但安装仍然失败。我在 Win7 上使用 git Bash 和 PHP 5.3.8 但我也尝试过 PHP 5.4.10

完整输出：

```
C:\Users\made\eclipse-workspace\template-compiler\template-compiler\lib\server>C:\Users\made\AppData\Roaming\Composer\bin\composer
 create-project symfony/framework-standard-edition symfony 2.1.6
Installing symfony/framework-standard-edition (v2.1.6)
  - Installing symfony/framework-standard-edition (v2.1.6)
    Loading from cache

Created project in symfony
Loading composer repositories with package information
Installing dependencies from lock file
  - Installing doctrine/common (2.3.0)
    Loading from cache

  - Installing doctrine/dbal (2.3.1)
    Loading from cache

  - Installing twig/twig (v1.11.1)
    Loading from cache

  - Installing symfony/symfony (v2.1.6)
    Loading from cache

  - Installing doctrine/doctrine-bundle (v1.0.0)
    Downloading: 100%
C:\Users\made\eclipse-workspace\template-compiler\template-compiler\lib\server\symfony\vendor\doctrine\doctrine-bundle\Doctrine\Bu
ndle\DoctrineBundle\5338efeb67b3e71765a5179fbadb1633.0 - Das Handle ist ungültig.

  [ErrorException]
  ZipArchive::extractTo(C:\Users\made\eclipse-workspace\template-compiler\template-compiler\lib\server\symfony\vendor/doctrine/
  doctrine-bundle/Doctrine/Bundle/DoctrineBundle/DoctrineBundle-1.0.0\Tests\DependencyInjection\Fixtures\Bundles\Vendor\Annotat
  ionsBundle/AnnotationsBundle.php): failed to open stream: Invalid argument

create-project [-s|--stability="..."] [--prefer-source] [--prefer-dist] [--repository-url="..."] [--dev] [--no-custom-installers]
[--no-scripts] [--no-progress] [--keep-vcs] package [directory] [version]

C:\Users\made\eclipse-workspace\template-compiler\template-compiler\lib\server> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-21T18:19:23.627

该问题可以通过减少目录深度来解决

PS：现在我有代表分数来解决这个问题......

# ajax - Ajax 将元素加载到页面中

> ID：14194156
> 
> 赞同：0
> 
> 时间：2013-01-07T10:36:57.867
> 
> 标签：ajax, load

试图将一个元素中的内容加载到另一个页面的另一个元素中，问题是在 chrome 中它将整个页面加载到元素中。在这里亲自查看：[http ://www.monsterhighshop.co.uk/gadgets-electronics](http://www.monsterhighshop.co.uk/gadgets-electonics)

```
$(function(){

    e.preventDefault(); 
    /*  
    if uncomment the above line, html5 nonsupported browers won't change the url but will display the ajax content;
    if commented, html5 nonsupported browers will reload the page to the specified link. 
    */

    //get the link location that was clicked
    $("a[rel='sort']").click(function(e){
    pageurl = $(this).attr('href')+"?rel=sort #categoryproducts-productlisting";
    $('#categoryproducts-productlisting').load(pageurl);

    //to change the browser URL to 'pageurl'
    if(pageurl!=window.location){
        window.history.pushState({path:pageurl},'',pageurl);    
    }
    return false;  
});
});

/* the below code is to override back button to get the ajax content without reload*/
$(window).bind('popstate', function() {
$.ajax({url:location.pathname+'?rel=sort',success: function(data){
    $('#categoryproducts-productlisting').html(data);
}});
}); 
```

# javascript - 在 ASP.net MVC 3 中成功上传文件后如何显示警报

> ID：14194158
> 
> 赞同：3
> 
> 时间：2013-01-07T10:37:06.300
> 
> 标签：javascript, asp.net-mvc-3, file-upload, jsonresult

现在我能够成功上传文件......我现在要做的是在文件成功上传时显示一个警报框，如果没有，则显示错误/异常警报......

这是我的看法：

```
using (Html.BeginForm("Upload", "Home", FormMethod.Post, new { @id = "File", enctype = "multipart/form-data"}))
        {
        <div class="control-group">                
            <input type="file" id="file" name="file" />
            <input type="submit" value="Upload" />
        </div>
        } 
```

这是我的控制器：

```
[HttpPost]   
public ActionResult Upload(HttpPostedFileBase file)
{
    try
    {
        //some code here for the upload....             

        /*In this part is my problem...Both Lines below is not showing the alert...*/
        //return new JavaScriptResult() { Script = "alert('The calendar XML file was uploaded successfully!');" };
        //return JavaScript("alert('The calendar XML file was uploaded successfully!');");
    }

    catch (Exception e)
    {   
        log.Error("HomeController::Upload()", e);
        return new JavaScriptResult() { Script = "alert(\"" + e.Message + "\");" };
    }
} 
```

我想要的是我的观点仍然存在......页面没有重定向......只是显示该消息的警报框......谢谢！非常感谢任何想法，因为我知道不推荐我的这种方式...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:48:26.090

这就是我为从控制器获取警报所做的工作

这是查看代码：

```
@using (@Html.BeginForm("DoSomething","secure"))
{
    <input type="submit" value="get alert" />
} 
```

这是控制器代码：

```
[HttpPost]
        public ActionResult DoSomething()
        {
            string message = "hai";
            System.Text.StringBuilder sb = new System.Text.StringBuilder();
            sb.Append("<script type = 'text/javascript'>");
            sb.Append("window.onload=function(){");
            sb.Append("alert('");
            sb.Append(message);
            sb.Append("')};");
            sb.Append("</script>");
            //return Content("<script type='text/javascript'>alert('Hello there');</script>"); //You can get the alert with this line also
            return Content(sb.ToString(), "text/javascript");
        } 
```

即使不需要脚本，`get alert`点击按钮时直接显示警报

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:14:43.253

我能够在[这里找到正确的解决方案。](http://jquery.malsup.com/form/#ajaxForm)

上面的链接用于在提交表单之前显示一个确认框，并显示一个警报，该消息是我的控制器返回的 json 对象...

```
return Json(new { isok = true, message = "Successfully uploaded the calendar XML file!" }, "application/octet-stream"); 
```

# vb.net - 使用 vb.net 在 vb.net 中发送邮件

> ID：14194159
> 
> 赞同：0
> 
> 时间：2013-01-07T10:37:06.593
> 
> 标签：vb.net, email, smtp

我正在使用下面的代码在 vb.net 中发送邮件，此代码适用于 gmail，但不适用于 rediffmail

```
Mail.Subject = "test email"
Mail.To.Add(dgr.Cells("to@xyz.com")
Mail.From = New MailAddress("from@abc.com")
Mail.Body = "Hello"
Dim attachment As System.Net.Mail.Attachment
attachment = New System.Net.Mail.Attachment("AttachPath")
Mail.Attachments.Add(attachment)
Dim SMTP As New SmtpClient("smtp.rediffmailpro")
SMTP.EnableSsl = false
SMTP.Credentials = New System.Net.NetworkCredential("xyz@.abc.com", 
"password")
SMTP.Port = 25
SMTP.Send(Mail) 
```

任何原因？或解决方案，以便我可以使用任何电子邮件 ID 发送邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:39:02.783

尝试

```
Dim SMTP As New SmtpClient("smtp.rediffmailpro.com") 
```

# java - 试图将图像插入数据库得到 ORA-01460：未实现或不合理的转换请求错误

> ID：14194165
> 
> 赞同：1
> 
> 时间：2013-01-07T10:37:15.387
> 
> 标签：java, database, image, jsp, insert

我正在尝试将图像插入数据库并使用自动增量 photo_id。

我的表格列是：

```
PHOTO_ID  (primary key),
USERNAME  (fkey),
PICTURE,
PICTURE_TITLE,
LIKES 
```

我的代码是

```
public class UploadPhotoDao {
    public int insertPhoto(UploadPhotoBean uploadBean){
        Connection con = null;
        PreparedStatement ps = null;

        int index = 0;
        final String query = "INSERT INTO PHOTOS_DETAILS (PHOTO_ID,USERNAME,PICTURE,PICTURE_TITLE,LIKES) VALUES (PHOTO_ID_SEQUENCE.nextval,?,?,?,?)";
            try {
                con = ConnectionUtil.getConnection();
                ps = con.prepareStatement(query);

                ps.setString(1, uploadBean.getUsername());
                File file =new File(uploadBean.getPicture());
                FileInputStream fis = new FileInputStream(file);
                ps.setBinaryStream(2, fis, fis.available());
                ps.setString(3, uploadBean.getPictureTitle());
                ps.setInt(4, new Integer(0));
                index = ps.executeUpdate();

            }
            catch (SQLException e) {
                e.printStackTrace();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
            finally {
                    ConnectionUtil.closeQuitly(ps);
                    ConnectionUtil.closeQuitly(con);
            }
            return index;
    }
} 
```

我收到错误：

```
java.sql.SQLException: ORA-01460: 请求未实现或不合理的转换

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:45:30.563

`InputStream.available()`不返回流***的***大小（Javadocs 中有明确记录）。

您将需要查询文件的大小，而不是输入流中的“可用字节”：

```
ps.setBinaryStream(2, fis, (int)file.length()); 
```

根据您的 JDBC 驱动程序的版本，您还可以使用

```
ps.setBinaryStream(2, fis, file.length()); 
```

但`setBinaryStream(int, InputStream, long)`在 JDBC 4.0 中定义，因此并非由所有驱动程序版本实现。`setBinaryStream(int, InputStream, int)`是 JDBC 2.0（如果我没记错的话）并且应该在所有版本中都可用。

# ruby - 使用 Capybara 获取边框样式

> ID：14194166
> 
> 赞同：4
> 
> 时间：2013-01-07T10:37:21.320
> 
> 标签：ruby, capybara

我需要获取元素的边框样式。我尝试了以下代码：

```
sample = page.execute_script("
  var x = window.document.querySelector('#{path}');
  a = window.getComputedStyle(x, null).getPropertyValue('border');
  return a;
")                     
puts sample 
```

它正在打印空值。

（注意：元素的边框是-实心）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T21:29:23.920

根据您之前的问题，我假设您使用的是 selenium-webdriver。

本机 selenium-webdriver 元素具有检查计算样式的方法 - [Element#css_value](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Element.html#css_value-instance_method)。

如果您的页面 HTML 为：

```
<html>
    <body>
        <p style="border-style:solid;">A solid border.</p>
    </body>
</html> 
```

然后您可以使用以下方法获取边框样式：

```
puts page.first('p').native.css_value('border-style')
#=> 'solid' 
```

请注意在代码中：

1.  Capybara 使用`page.first('p')`
2.  `native`用于获取 selenium-webdriver 元素
3.  `css_value`用于获取计算的样式。请注意，css_value 方法必须传递参数“border-style”而不是简写“border”。

**更新：**

对于您的具体示例：

1.  似乎如果您使用速记“边框”属性，“边框样式”属性将为空白。相反，您必须使用特定的“border-bottom-style”、“border-left-style”等属性。
2.  由于您知道元素的 id，因此您可以使用以下方法获取 Capybara 元素`page.find_by_id('option')`

考虑到上述情况，您可以使用以下方法检查计算的边框样式：

```
puts page.find_by_id('option').native.css_value('border-bottom-style')
#=> "solid"
puts page.find_by_id('option').native.css_value('border-left-style')
#=> "solid"
puts page.find_by_id('option').native.css_value('border-right-style')
#=> "solid"
puts page.find_by_id('option').native.css_value('border-top-style')
#=> "solid" 
```

# javascript - 使用 jQuery AJAX 将数据加载到字段中

> ID：14194168
> 
> 赞同：0
> 
> 时间：2013-01-07T10:37:28.507
> 
> 标签：javascript, jquery, ajax

我在下面有这段代码，通过运行该`getGrades`函数来调用它。

```
function getGrades(grading_company) {
    // Set file to get results from..
    var loadUrl = "ajax_files/get_grades.php";

    // Set data string
    var dataString = 'gc_id=' + grading_company;

    // Set the callback function to run on success
    var callback = showGradesBox;

    // Run the AJAX request
    runAjax(loadUrl, dataString, callback);
}

function showGradesBox(response) {
    // Load data into grade field

    // Hide condition fields
    jQuery('#condition').hide();
    jQuery('#condition_text').hide();

    // Show grade fields
    jQuery('#grade_wrapper').show();
    jQuery('#grade_text_wrapper').show();    
}

function runAjax(loadUrl, dataString, callback) {
     jQuery.ajax({
        type: 'GET',
        url: loadUrl,
        data: dataString,
        dataType: 'html',
        error: ajaxError,
        success: function(response) {
            callback(response);
        }
    });    
} 
```

现在你可以看到我将 AJAX 响应数据传递给`showGradesBox`函数；但是我现在不确定如何将其加载到现场。

我已经看到了使用示例，`.load()`但似乎您必须一次将其与 URL 一起使用；我遇到的唯一可能使用的其他功能是`.html()`；但它的描述听起来不对！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:48:50.407

`.html()`应该管用 ...

> 当 .html() 用于设置元素的内容时，该元素中的任何内容都会被新内容完全替换。此外，在用新内容替换这些元素之前，jQuery 从子元素中删除了其他结构，例如数据和事件处理程序。

```
function showGradesBox(response) {

  // Load data into grade field
  jQuery('#yourgradefieldID').html(response);

  // Hide condition fields
 jQuery('#condition').hide();
 jQuery('#condition_text').hide();

 // Show grade fields
 jQuery('#grade_wrapper').show();
 jQuery('#grade_text_wrapper').show();    

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:43:51.437

这会为您的回调分配一个“未定义”的值。

```
// Set the callback function to run on success
var callback = showGradesBox; 
```

在像这样的函数之前尝试将函数分配给名为 showGradesBox 的变量

```
var showGradesBox = function(response) {
    // Load data into grade field

    // Hide condition fields
    jQuery('#condition').hide();
    jQuery('#condition_text').hide();

    // Show grade fields
    jQuery('#grade_wrapper').show();
    jQuery('#grade_text_wrapper').show();    
}

function getGrades(grading_company) {
    // Set file to get results from..
    var loadUrl = "ajax_files/get_grades.php";

    // Set data string
    var dataString = 'gc_id=' + grading_company;

    // Set the callback function to run on success
    var callback = showGradesBox;

    // Run the AJAX request
    runAjax(loadUrl, dataString, callback);
}

function runAjax(loadUrl, dataString, callback) {
     jQuery.ajax({
        type: 'GET',
        url: loadUrl,
        data: dataString,
        dataType: 'html',
        error: ajaxError,
        success: function(response) {
            callback(response);
        }
    });    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:40:32.877

假设 ID 为 Grade_text 的字段并从 PHP 返回一个字符串：

```
function showGradesBox(response) {

  // Load data into grade field

  jQuery('#grade_text').val(response);

  // Hide condition fields
  jQuery('#condition').hide();
  jQuery('#condition_text').hide();

  // Show grade fields
  jQuery('#grade_wrapper').show();
  jQuery('#grade_text_wrapper').show();    

} 
```

# ios - 向 iOS 应用程序添加文本到语音功能

> ID：14194170
> 
> 赞同：1
> 
> 时间：2013-01-07T10:37:32.680
> 
> 标签：ios, xcode, text-to-speech

我想在我的应用程序中实现这样的功能，而 AFAIK，唯一的选择是使用第三方库，所以我一直在寻找可能的选择。我发现 OpenEars 似乎是为此目的最好的免费和开源库之一，它可以离线工作，但它只支持英语，我想提供多语言文本到语音，至少对于英语、葡萄牙语、西班牙语和法语。

我已经读过，对于多语言支持，Google TTS 表现良好，但它只能在线工作......而且我不确定是否存在调用限制，是吗？在哪里可以找到有关在 iOS 中使用 Google TTS 的详细信息？

最后，我还阅读了很多关于 Flite 或 Festival Lite 的参考资料……但它似乎也不支持多语言。有人知道一个免费的、开源的 iOS TTS 库吗？它支持多种语言，最好是离线工作？

只是另一个问题。我正在开发的应用程序可能有商业版本，它打算提交到 Apple Store。使用任何 TTS 第三方库都会有问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-16T08:07:19.430

iOS 7[`AVSpeechSynthesizer`](https://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVSpeechSynthesizer_Ref/Reference/Reference.html)可以在不需要任何外部框架的情况下进行开箱即用的文本转语音。

有关这方面的更多信息，[请访问此链接](http://nshipster.com/avspeechsynthesizer/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T11:28:46.180

有两个 API 支持这些语言：

1.  [**演讲**](http://www.ispeech.org/apps/tts)
2.  [**阿卡佩拉**](http://www.acapela-group.com/turkish-50-text-to-voice.html)

但两者都是**在线和付费**的。

[**OpenEars**](http://www.politepix.com/openears/)是一个离线文本到语音和语音到文本的开源库。但我不知道它是否支持英语以外的其他语言。

**使用任何 TTS 第三方库都会有问题吗？** 答：不，这没有问题。

**更新（2013 年 8 月 27 日）：**
OpenEars 现在支持西班牙语和英语。（查看以下来自 Halle 的评论）

# javascript - 跨域文件上传

> ID：14194171
> 
> 赞同：2
> 
> 时间：2013-01-07T10:37:34.567
> 
> 标签：javascript, xmlhttprequest, cross-domain, jsonp

这是我的问题。我想在网站上上传一些文件到我自己的网站上。所以我遇到了众所周知的“同源政策”问题。我的另一个问题是我不拥有文件上传网站，只能将 html 和 js 添加到现有页面。所以我也没有代理替代品。所以我搜索了一些解决方案，发现 XMLHTTPRequest 是可能的。但我不知道如何。另外我想知道 JSONP 是否可能是我的解决方案。任何关于“最佳解决方案”的想法都会受到赞赏。

谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:39:23.093

您可以拥有一个包含文件输入的表单并将操作设置为第三方站点。

如果第三方站点实施 CSRF 保护，这将被阻止。

由于您已排除使用代理，因此您无法确定表单提交的成功或失败。

* * *

> 可以使用 XMLHTTPRequest

MDN 有[一个使用 XMLHttpRequest 上传文件的指南](https://developer.mozilla.org/en-US/docs/FileGuide/FileUpDown)——但要获得任何反馈，这需要第三方站点允许您通过 CORS 访问。如果有 CSRF 保护，它将完全失败。

* * *

JSONP 无济于事，因为：

*   你只能用它发出 GET 请求
*   第三方站点提供了一个 JSONP 端点供您访问

# php - 在php中计算文件夹中的文件数

> ID：14194173
> 
> 赞同：14
> 
> 时间：2013-01-07T10:37:38.210
> 
> 标签：php

```
<?php 
$directory = '/var/www/ajaxform/';
if (glob($directory . '.jpg') != false)
{
    $filecount = count(glob($directory . '*.jpg'));
    echo $filecount;
}
else
{
    echo 0;
}
?> 
```

此目录中有四个 jpg 图像，但它返回`0`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-07T10:43:24.930

[Glob](http://php.net/manual/en/function.glob.php)返回一个`array`，出错时返回`false`。

尝试这个：

```
$directory = '/var/www/ajaxform/';
$files = glob($directory . '*.jpg');

if ( $files !== false )
{
    $filecount = count( $files );
    echo $filecount;
}
else
{
    echo 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T10:41:36.500

尝试这个：

```
<?php 
$directory = '/var/www/ajaxform/';
if (glob($directory . '*.jpg') != false)
{
 $filecount = count(glob($directory . '*.jpg'));
 echo $filecount;
}
else
{
 echo 0;
}
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-25T06:21:48.097

最小化方法：

```
function getImagesNo($path)
{
  return ($files=glob($path.'*.jpg')) ? count($files) : 0;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-07T10:40:29.207

您的 glob 模式存在错误（在 if 中）。您缺少一个 *：

```
glob($directory . '*.jpg') 
```

应该管用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T10:42:17.240

根据 PHP 文档，glob 区分大小写。你的扩展是小写的吗？执行帐户是否有权访问 /var/www/ajaxform/？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T10:43:13.713

试试这个——

```
if (glob($directory . "*.jpg") != false)
$filecount = count(glob($directory . "*.jpg"));
else
$filecount = 0; 
```

# git - 使用成功的 Git 分支模型支持多个版本

> ID：14194174
> 
> 赞同：5
> 
> 时间：2013-01-07T10:37:51.323
> 
> 标签：git, versioning, git-branch, branching-and-merging, git-flow

在我们公司，我们正在从 SvN 迁移到 Git（是的，迟到总比没有好）。有了这个，我们还尝试简化版本控制过程。为此，我找到了一篇有趣的文章：Vincent Driessen 的成功 Git 分支模型。

据我从文章中了解到，开发人员假设是线性发布。要清楚：

```
v1.0.0 --> v1.0.1 --> v1.0.2 --> v1.1.0 --> v1.1.1 etc 
```

未提及对旧版本的支持。例如：我们最多支持三个主要版本，因为有些客户不想升级。所以想象我们有以下版本：

```
v7.0.0 --> v8.0.0 --> v9.0.0 --> v10.0.0 
```

当在发布`v8.0.0` **后**`v9.0.0`发现一个严重的 bug 时，我们 checkout 标记`v8.0.0`，修复 bug，并将其合并回`develop`和`master`分支。合并到`master`gets标签`v8.0.1`中。

在我看来有点奇怪，因为有两件事：

1.  时间线将`master`如下所示`v7.0.0 --> v8.0.0 --> v9.0.0 --> v8.0.1 --> v10.0.0`。我完全知道这是可能的，但它也可以接受吗？
2.  当我从`hotfix`to合并`master`（并且在`master`那个时刻）`v9.0.0`并用`v8.0.1``v8.0.0``v9.0.0`

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:47:37.223

对我来说，标签`v8.0.1`应该是合并之前的提交`master`。如果您想修补新版本，那么您也可以合并其他标签。

```
v8.0.0 --> v9.0.0 --> v10.0.0
   \          \           \
  v8.0.1 --> v9.0.1 --> v10.0.1/master 
```

# c# - c# wpf datagrid 添加行

> ID：14194175
> 
> 赞同：4
> 
> 时间：2013-01-07T10:37:54.647
> 
> 标签：c#, wpf, datagrid, row

我需要不时在具有不同列的表中插入值。列和行数据从 MySql 更新。每行值都在具有以下格式的单个 MySql 单元格中：

```
ColumnName{Delimiter}Value{BigDelimiter}Column2Name{Delimiter}Value2... 
```

因此，我拆分单元格字符串以获取列标题和值，因为用户可以重新排列列、修改、删除或插入新列。我搜索了一个解决方案，但我得到的只是空行：

```
 private void GetDataTableValues()
    {
        if (dtData.Value != null)
        {
            try
            {
                LoadFields();
                dgwDataMain.Items.Clear();
                dgwDataMain.Columns.Clear();
                foreach (Fields field in fields)
                {
                    DataGridTextColumn column = new DataGridTextColumn();
                    column.Header = field.name;
                    column.Binding = new Binding(field.name);
                    dgwDataMain.Columns.Add(column);
                }

                if (connection.State == System.Data.ConnectionState.Broken || connection.State == System.Data.ConnectionState.Closed)
                    connection.Open();

                command.Parameters.Clear();
                DateTime dt = dtData.Value ?? DateTime.Now;
                command.Parameters.Add("@date", MySqlDbType.Date, 50).Value = dt.ToString("yyyy-MM-dd");
                command.CommandText = "SELECT value,team FROM sessions WHERE date=@date";

                List<string> teams = new List<string>();
                foreach (Control ctrl in panDataFilter.Children)
                    if ((ctrl as CheckBox).IsChecked == true)
                        teams.Add(Convert.ToString((ctrl as CheckBox).Content));

                using (MySqlDataReader reader = command.ExecuteReader())
                {

                    while (reader.Read())
                    {
                        bool v = false;
                        if (teams.Contains(reader[1].ToString()) || teams.Count == 0)
                            v = true;
                        if (v)
                        {
                            DatabaseObject obj = new DatabaseObject();
                            List<string> str2 = new List<string>(reader[0].ToString().Split(new string[] { "</s&p>" }, StringSplitOptions.None).ToList());
                            obj.Items = new List<string>(str2.Count);
                            foreach (string str in str2)
                            {
                                List<string> item = new List<string>(str.Split(new string[] { "<&p>" }, StringSplitOptions.None).ToList());
                                int index = dgwDataMain.Columns.Single(c => c.Header.ToString() == item[0].ToString()).DisplayIndex;
                                obj.Items.Insert(index, item[1].ToString());
                            }
                            dgwDataMain.Items.Add(obj);
                        }
                    }
                }
            }
            catch (MySqlException ex)
            {
                MessageBox.Show(ex.ErrorCode.ToString() + ": " + ex.Message, "Error", MessageBoxButton.OK, MessageBoxImage.Exclamation);
            }
        }
    }

    public class DatabaseObject
    {
        public List<string> Items = new List<string>();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T09:31:28.413

要从数据网格中删除额外的行，只需制作属性...

```
Canuseraddrows="false"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:51:31.970

请使用*Observablecollection*绑定数据网格。通过轻松使用*observablecollection*，您可以添加或删除项目，而无需重置数据网格的数据源。

示例代码：

> observableCollection myClass = new observableCollection(); myClass.add(类)

# iphone - 重现时间轴的动画效果，如 Google plus ios 应用程序中的动画效果

> ID：14194183
> 
> 赞同：1
> 
> 时间：2013-01-07T10:38:50.007
> 
> 标签：iphone, ios, cocoa-touch, uiview, uiviewanimationtransition

我对 Google Plus iOS 应用程序中时间轴上的 Tiles 3D 相似动画感到非常困惑。我正在研究它，但我无法成功地创建对象的完美 3D 动画。我对带有 UIView 元素块的动画有一些简单的了解。但我不知道如何应用 3D 过渡。

你可以帮帮我吗？

我找到[了这个](https://stackoverflow.com/questions/12109942/google-plus-tile-animation)，但它适用于 android，答案适用于 js。类似的东西。

![在此处输入图像描述](../Images/28b98eab4f0df52457f3941fe4fe6228.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:55:50.763

在理解了 Nikola 的回答后，我自己通过 CATransform3D 做了...

GitHub链接：

[https://github.com/mayuur/GooglePlusiOSUIViewAnimationSdk](https://github.com/mayuur/GooglePlusiOSUIViewAnimationSdk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T11:20:09.453

以下是如何进行类似的 3D 转换。只要确保调整旋转值。

```
CGFloat rotation = ??;
CATransform3D transform = CATransform3DIdentity;
transform.m34 = 1.0 / -1000.0;
transform = CATransform3DRotate(transform, rotation, 0.0f, 1.0f, 0.0f);
myView.transform3D = transform; 
```

您可以将转换应用于您想要的每个视图。在这种情况下，我们将转换添加到名为“myView”的视图中，但在您的情况下，它将是其他名称。您说您知道如何制作动画，因此您可以将此代码添加到您的动画块中，并将转换应用于您需要的视图/视图。

# php - CodeIgniter / 胖模型 / 瘦控制器

> ID：14194189
> 
> 赞同：2
> 
> 时间：2013-01-07T10:38:57.327
> 
> 标签：php, codeigniter, model-view-controller, model, controller

今天，我了解到拥有胖模型和瘦控制器被认为是一种很好的做法。到目前为止，我的想法是相反的，所以我相信我对 MVC 的理解现在都被证明是错误的。

大多数文章表明胖模型/瘦控制器方法更好，我看到的主要原因是他们声称控制器不可重用。这对于 CodeIgniter 的标准安装是正确的，但是当使用像 Wiredesignz 的 HMVC 插件这样的插件时，这不是问题。所以，简而言之，问题是：

专门用于 Code Igniter 的最佳方法是什么？

1.  胖模型/瘦控制器
2.  带有 HMVC 插件的胖控制器/瘦模型
3.  没有 HMVC 插件的胖控制器/瘦模型

我不再考虑将没有 HMVC 插件的胖控制器/瘦模型作为选项，但为了完整性而将其包括在内。

请问你的想法？因此，HMVC 插件是一件邪恶的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T13:52:25.417

你是对的，因为拆分成模块确实否定了使用 SC/FM 的一些原因。但这仍然是一种很好的做法，原因如下：

1）**代码的可重用性**正如您所说的模型应该是可重用的，您可以使可重用的代码越多越好。是的，我知道模块也可以这样做，但是模块的重点更多是关于代码的隔离和可移植性，您可能仍然希望在稍后阶段扩展这些控制器，并且在那个时候以 SC/FM 方式工作会有所帮助。

2)**代码可读性**当阅读您的代码时，大多数人会从您的路由配置开始，然后转到相应的控制器。一个瘦的控制器充当导演，应该简洁易读。只是调用更复杂和冗长的代码。更少的代码更容易理解。

3)**当在罗马**时 不容忽视，使用 MVC 框架的每个人*都以这种方式工作这一事实意味着你也应该以这种方式工作，是的，与众不同很高兴，但如果你有 5 个人在同一个团队中一起工作谁都想与众不同，这只是屁股的痛苦。

**你应该重写你的代码吗？**

可能不会马上，我相信你有更好的事情要做。如果您从现在开始尝试以这种心态思考，那么在某些时候您会回顾旧代码并对其进行更改（可能是当您在那里更改某些内容时），但是现在如果它没有损坏的话.. .

此外，以模块化方式工作并不像看起来那么简单，制作真正可重用的模块化代码并不容易，与为单个站点编写快速而肮脏的代码相比，实际上需要相当多的开销。最好在新代码上开始练习这一点，直到您很好地理解将现有代码转换为真正模块化的东西所需的内容 - 这将是整理您的胖控制器的时候了。

在为特定站点编写新代码时，我始终牢记我可能希望稍后在另一个站点上重用它，但如果我试图让所有东西都可以在阳光下的每个选项中重用，我将永远无法完成任何事情。到时候去调整它要好得多。

**对 HMVC** 的看法 老实说，我真的不知道 HMVC 位是什么，但是模块是自切片面包以来最好的东西，因为我偶然发现了 HMVC 线设计z，我现在为更多的网站做的工作要少得多 - 而且很多更重要的是，我花更少的时间做同样的事情......你想要在你的网站上的画廊。这里是画廊管理器模块，你说 Cms，是的，有一个 cms 模块，产品，是的，有一个产品模块……你明白了。我现在在一个框架上有很多变体，而不是数百个不同的站点。

**概括**

您目前可能正在处理简单的模块，这意味着代码的可重用性和清晰度不是这些模块中的主要问题。但是，今天就从良好的实践开始编码。当你在处理一些庞大的 CMS 或产品模块时，你会很高兴你做到了。

查看此内容以获取有关应该去哪里的指南[如何在 MVC 中构建模型？](https://stackoverflow.com/questions/5863870/how-should-a-model-be-structured-in-mvc/5864000#5864000)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:47:36.087

嗯，我不知道 HMVC，但我已经使用 codeigniter 很长时间了，我可以建议你关于胖模型和瘦控制器是一个很好的做法：

1.  让后端和前端访问相同的模型
2.  创建您自己的 API 以与其他应用程序交互，以便您重复使用相同的胖模型

但是，我查看了 HMVC 文档，看来这实际上取决于您将如何分配逻辑以及该模块化组件将如何共享相同的数据资源

这取决于您正在从事的项目

# exception - LitJson 通过使用单声道的 centos 上的异常

> ID：14194195
> 
> 赞同：1
> 
> 时间：2013-01-07T10:39:04.080
> 
> 标签：exception, reflection, mono, litjson

我为 centos 编译了单声道源代码（使用 ./configure、make、make install），似乎没问题。

```
mono --version
Mono JIT compiler version 2.10.9 (tarball 2013年 01月 02日 星期三 13:43:05 CST)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
    TLS:           __thread
    SIGSEGV:       altstack
    Notifications: epoll
    Architecture:  x86
    Disabled:      none
    Misc:          softdebug 
    LLVM:          supported, not enabled.
    GC:            Included Boehm (with typed GC and Parallel Mark) 
```

但是当我尝试运行一个调用 LitJson 的 .ashx 文件时，我得到了

```
<p><strong>Description: </strong>HTTP 500\. Error processing request.</p>
<p><strong>Stack Trace: </strong></p><table summary="Stack Trace" class="sampleCode">
<tr><td><pre>System.MissingMethodException: Method not found: 'System.Reflection.MethodInfo.op_Inequality'.
  at LitJson.JsonMapper.ToObject (System.Type type, System.String json) [0x00000] in &lt;filename unknown&gt;:0 
  at MobiusServer.Login..ctor (System.String jsondata) [0x00000] in &lt;filename unknown&gt;:0 
  at MobiusServer.MobiusHandler.ProcessRequest (System.Web.HttpContext context) [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.HttpApplication+&lt;Pipeline&gt;c__Iterator3.MoveNext () [0x00000] in &lt;filename unknown&gt;:0 
  at System.Web.HttpApplication.Tick () [0x00000] in &lt;filename unknown&gt;:0 </pre></td></tr>
</table>
<hr style="color: silver"/><strong>Version information: </strong> Mono Runtime Version: <tt>2.10.9 (tarball 2013/01/02 Wed 13:43:05 CST)</tt>; ASP.NET Version: <tt>2.0.50727.1433</tt></body></html>

<!--
[System.MissingMethodException]: Method not found: 'System.Reflection.MethodInfo.op_Inequality'.
  at LitJson.JsonMapper.ToObject (System.Type type, System.String json) [0x00000] in <filename unknown>:0 
  at MobiusServer.Login..ctor (System.String jsondata) [0x00000] in <filename unknown>:0 
  at MobiusServer.MobiusHandler.ProcessRequest (System.Web.HttpContext context) [0x00000] in <filename unknown>:0 
  at System.Web.HttpApplication+<Pipeline>c__Iterator3.MoveNext () [0x00000] in <filename unknown>:0 
  at System.Web.HttpApplication.Tick () [0x00000] in <filename unknown>:0 
--> 
```

我可以在我的 mac os x 上运行相同的程序，它也安装了 mono 2.10.9 运行时。我做错了什么或错过了什么？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:09:27.220

经过一整天的研究，原来 mod_mono 将使用 .NET 2.0(mod-mono-server) 编译我的程序，但我的程序需要 .NET 4.0

修改下面的 mod_mono.conf 文件后，问题解决了！

```
# mod_mono.conf

# Achtung! This file may be overwritten
# Use 'include mod_mono.conf' from other configuration file
# to load mod_mono module.

<IfModule !mod_mono.c>
    LoadModule mono_module /usr/lib/httpd/modules/mod_mono.so
</IfModule>

<IfModule mod_headers.c>
    Header set X-Powered-By "Mono"
</IfModule>

MonoAutoApplication enabled
MonoDebug true
MonoServerPath "/etc/mono/bin/mod-mono-server4"
MonoUnixSocket "/tmp/.mod_mono"

AddType application/x-asp-net .aspx
AddType application/x-asp-net .asmx
AddType application/x-asp-net .ashx
AddType application/x-asp-net .asax
AddType application/x-asp-net .ascx
AddType application/x-asp-net .soap
AddType application/x-asp-net .rem
AddType application/x-asp-net .axd
AddType application/x-asp-net .cs
AddType application/x-asp-net .vb
AddType application/x-asp-net .master
AddType application/x-asp-net .sitemap
AddType application/x-asp-net .resources
AddType application/x-asp-net .skin
AddType application/x-asp-net .browser
AddType application/x-asp-net .webinfo
AddType application/x-asp-net .resx
AddType application/x-asp-net .licx
AddType application/x-asp-net .csproj
AddType application/x-asp-net .vbproj
AddType application/x-asp-net .config
AddType application/x-asp-net .Config
AddType application/x-asp-net .dll
DirectoryIndex index.aspx
DirectoryIndex Default.aspx
DirectoryIndex default.aspx 
```

# c++ - 让编译器知道我在 sqrt - C++ 中传递正值

> ID：14194201
> 
> 赞同：-2
> 
> 时间：2013-01-07T10:39:22.880
> 
> 标签：c++, sqrt

我有这个

```
return sqrt(a-b); 
```

我知道a大于b。我怎样才能让编译器知道？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:45:52.047

编译器不在乎。来自 Linux 上的“man sqrt”：

> sqrt() 函数返回 x 的非负平方根。如果 x 为负，它会失败并将 errno 设置为 EDOM。

如果您希望在 ab 不是编译时间常数或负编译时间常数的情况下编译失败，您可以使用 static_assert 或 BOOST_STATIC_ASSERT，以您的环境中可用的为准：

```
static_assert(a - b > 0.0, "a must be > b");
return sqrt(a - b); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:41:07.273

就照原样写吧。编译器不需要知道这些信息。
`sqrt`旨在处理参数为`-ve`.
如果参数为负，则全局变量`errno`将设置为 value `EDOM`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T12:38:21.667

如果你写`if !(a > b) return 0;`在前一行，那么编译器原则上可以在你的行中推断出来`a > b`。当然，这些知识是否有任何区别完全取决于编译器。

此外，这对您是否有用取决于您认为它可能会产生什么不同。如果您希望提供优化提示，那么它可能无济于事，因为仍然会执行测试。您需要以某种特定于编译器的方式进行提示（假设您的编译器提供了一种方式）。我没有检查过这个，但例如在 GCC 上，如果你这样做，你会希望：

```
if (a > b) {
    return sqrt(a-b);
} else {
    __builtin_unreachable();
} 
```

那么优化器将（a）知道它`a > b`何时调用`sqrt`并且（b）不执行`a > b`测试，因为它知道只有一个结果是可能的。

# javascript - 如果禁用 javascript，让对话框链接转到 html 登录页面

> ID：14194204
> 
> 赞同：0
> 
> 时间：2013-01-07T10:39:30.103
> 
> 标签：javascript, html

我正在构建一个包含 javascript 的网站。

在我的网站中，如果用户**单击**登录或注册按钮，将显示一个模式弹出窗口。

我需要知道的是，如果用户在他/她的浏览器中禁用了 javascript，当用户单击登录链接时，它们应该被发送到普通的 html 注册页面（如 imdb.com）。

给我一些关于我应该做些什么来获得这样的结果的提示。

我是新手，所以不要对你的回复太苛刻。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:43:17.587

简而言之，您`onclick`为按钮设置动态处理程序并阻止默认事件（在下面的示例中`return false`）。如果 JavaScript 被禁用，原始事件（重定向）将起作用。

*HTML：*

```
<a href="/path/to/normal/sign/up.html" id="login"> 
```

*JavaScript：*

```
document.getElementById("login").onclick = function() {
    // show popup
    return false;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:44:13.280

1.  有一个指向注册页面的正常链接
2.  添加[事件侦听](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)器以创建模式
3.  防止点击链接[的默认行为](https://developer.mozilla.org/en/docs/DOM/event.preventDefault)

# android - 用户从手机图库中打开图像后如何获取图像路径？

> ID：14194206
> 
> 赞同：0
> 
> 时间：2013-01-07T10:39:35.007
> 
> 标签：android, android-gallery

我必须实现一个应用程序，一旦用户从手机图库部分打开他/她的任何图像，就将图像上传到服务器上。我的问题是如何获取图像路径？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:56:23.997

首先调用此意图从图库中选择图像：

```
private static final int SELECT_PHOTO = 100;

Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
photoPickerIntent.setType("image/*");
startActivityForResult(photoPickerIntent, SELECT_PHOTO); 
```

完成从图库中选择图像后，它将自动调用此`onActivityResult`方法：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode,
            Intent imageReturnedIntent) {
        super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

        switch (requestCode) {
        case SELECT_PHOTO:
            if (resultCode == RESULT_OK) {
                Uri selectedImage = imageReturnedIntent.getData();
                try {
                    yourImageView.setImageBitmap(decodeUri(selectedImage));
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }
            }
        }
    } 
```

您将在`selectedImage`变量中获得图像路径。

谢谢。

# c# - linq/lambda 中的 Asp.net mvc html.DisplayFor 语法

> ID：14194207
> 
> 赞同：3
> 
> 时间：2013-01-07T10:39:44.330
> 
> 标签：c#, asp.net, asp.net-mvc, razor

我目前正在学习 asp.net mvc，我刚开始，我决定从 web 表单转移到 mvc。

我了解 linq 和 lambdas 的基础知识，但我只想了解或获得有关此特定语法的良好解释。

```
@model IEnumerable<CodeplexMvcMusicStore.Models.Album>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Genre.Name)
        </td> 
```

我只想知道是什么意思`modelItem => item.Genre.Name`

我对此的了解是`modelItem`获取值 `item.Genre.Name`，然后将其传递给方法`Html.DisplayFor()`。

我也很好奇如何在不使用 lambda 的情况下编写相同的代码。

如果我错了，请纠正我我只想知道代码的含义以及如何阅读它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:48:21.067

阅读本文：**[为什么要使用所有 Lambda？](http://odetocode.com/blogs/scott/archive/2012/11/26/why-all-the-lambdas.aspx)**: 很好的文章解释了 Lambdas 的使用。

lambda 表达式（Expression 类型）允许视图作者使用强类型代码，同时为 HTML 助手提供完成工作所需的所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:13:13.983

你可以写

```
 @model IEnumerable<CodeplexMvcMusicStore.Models.Album>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.Raw(item.Genre.Name)
        </td> 
```

或者

```
@model IEnumerable<CodeplexMvcMusicStore.Models.Album>

@foreach (var item in Model) {
    <tr>
        <td>
            @item.Genre.Name
        </td> 
```

# ruby-on-rails - 如何以高性能方式批量更新许多对象的状态

> ID：14194208
> 
> 赞同：1
> 
> 时间：2013-01-07T10:39:45.997
> 
> 标签：ruby-on-rails

我们的用例与 Google 电子邮件非常相似。我已在收件箱中阅读了 10K 封电子邮件中的 8K。我想将剩余的 2K 封电子邮件标记为**READ**。如何有效地更新需要修改状态位的行（因为至少使用 Google，它会询问您是否要将所有消息标记为已读，包括 10K 消息）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:46:20.163

利用[`update_all`](http://api.rubyonrails.org/v2.3.8/classes/ActiveRecord/Base.html#M001798)

```
Billing.update_all( "read = true", "read = false" ) 
```

# string - 如何在 shell 脚本中删除字符串的子字符串？

> ID：14194211
> 
> 赞同：2
> 
> 时间：2013-01-07T10:39:58.370
> 
> 标签：string, shell, sed, scripting

我有一个包含单词列表的文件，例如：

```
FIRST_WORD abc
FIRST_WORD(1) bcd
FIRST_WORD(2) def
SECOND_WORD gh
THIRD_WORD jiu
THIRD_WORD(1) lom
... 
```

我想删除它`(i)`，当它存在时，以获得：

```
FIRST_WORD abc
FIRST_WORD bcd
FIRST_WORD def
SECOND_WORD gh
THIRD_WORD jiu
THIRD_WORD lom
... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T10:43:47.927

你可以的：

```
test="123456"
echo ${test:3} 
```

输出：

```
456 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T10:46:45.037

使用 : 全局替换括号内的所有数字字符串`sed`：

```
$ sed 's/([0-9]\+)//g' file
FIRST_WORD abc
FIRST_WORD bcd
FIRST_WORD def
SECOND_WORD gh
THIRD_WORD jiu
THIRD_WORD lom

# Save the changes back to the file  
$ sed -i 's/([0-9]\+)//g' file 
```

* * *

使用删除前 3 个字符`sed`：

```
$ sed 's/^...//' file
ST_WORD abc
ST_WORD(1) bcd
ST_WORD(2) def
OND_WORD gh
RD_WORD jiu
RD_WORD(1) lom 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T10:47:01.607

尝试这个。

```
sed 's/([0-9])//g' file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T12:31:54.407

这可能对您有用（GNU sed）：

```
sed -r '$!N;s/^((\S+).*\n\2)\([^)]*\)/\1/;P;D' file 
```

但是，如果：

```
sed 's/([0-9]\+)//' file 
```

就足够了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T14:45:48.117

这是一个纯 bash 实现：

```
while read -r a b; do
    echo "${a%(*)}" "$b"
done < input.txt 
```

# iphone - Apple Store 超链接未打开

> ID：14194220
> 
> 赞同：1
> 
> 时间：2013-01-07T10:40:28.410
> 
> 标签：iphone, objective-c

我使用**UITEXTVIEW**显示数据并将其**dataDetectorTypes**设置为**UIDataDetectorTypeLink**以检测超链接。它适用于其他所有超链接，但不能在 Web 视图中打开**Apple 商店超链接。**我应该怎么做才能打开苹果商店的超链接也像[https://t.co/0BQtx1pV](https://t.co/0BQtx1pV)

# android - 在android上使用setvisibility在布局之间切换不起作用

> ID：14194222
> 
> 赞同：0
> 
> 时间：2013-01-07T10:40:28.350
> 
> 标签：android, layout, switching

我正在使用一个屏幕，我想通过单击按钮在布局之间切换。我希望两个布局都占据屏幕的整个高度，当按下第一个布局上的按钮时，我希望这个布局消失，另一个布局占据它的位置，然后在下一个布局上相同。

```
<LinearLayout 
    android:id="@+id/layoutFirst"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    ..... views

</LinearLayout>

<LinearLayout 
    android:id="@+id/layoutSecond"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    ..... views

</LinearLayout> 
```

在每个布局上我都有一个按钮。我希望此按钮切换，以便其他布局占据全屏，但没有任何反应。第一个屏幕的点击事件中的代码如下

```
LinearLayout layoutFirst = (LinearLayout) this.findViewById(R.id.layoutFirst);
layoutFirst.setVisibility(View.GONE);
LinearLayout layoutSecond = (LinearLayout) this.findViewById(R.id.layoutSecond);
layoutSecond.setVisibility(View.VISIBLE); 
```

以防万一问题与fill_parent有关，我还尝试将高度设置为wrap_content。最初我可以在屏幕上看到两种布局，当我按下按钮时，布局仍然什么都不做。

谁能告诉我我做错了什么或者是否有办法解决这个问题。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:02:37.460

将两个 LinearLayout 放在 FrameLayout 中：

```
<FrameLayout
    android:id="@+id/framelayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/layoutFirst"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" 
        android:visibility="gone">
    </LinearLayout>

    <LinearLayout
        android:id="@+id/layoutSecond"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
    </LinearLayout>
</FrameLayout> 
```

给 LinearLayouts 不同的 id！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:17:23.307

您的父布局是“RelativeLayout”吗？=> 这里没有必要。

也试试这个非常相似的线程中提出的解决方案[如何从java代码中隐藏线性布局？](https://stackoverflow.com/questions/4226604/how-to-hide-linearlayout-from-java-code)

更新：

```
/*global or add final keyword if not global in order to use inside listener */
LinearLayout layoutFirst;
LinearLayout layoutSecond;
/*end global*/

/*in onCreate(Bundle) method*/
layoutFirst = (LinearLayout) this.findViewById(R.id.layoutFirst);
layoutSecond = (LinearLayout) this.findViewById(R.id.layoutSecond);

/*and then in your listener, alternatively*/
layoutFirst.setVisibility(View.GONE);
layoutSecond.setVisibility(View.VISIBLE); 
```

# python - 在 CentOS 上部署 Mezzanine CMS

> ID：14194225
> 
> 赞同：0
> 
> 时间：2013-01-07T10:40:31.847
> 
> 标签：python, django, centos, mezzanine

我有一个非常大的问题......我正在尝试制作一个生产服务器（在 CentoOS 6 上）以在其上部署一个夹层 cms。问题是我已经研究了很多，但找不到有用的东西。我对此有点菜鸟，但我尝试过使用 nginx，但找不到从一端到另一端的教程......与 apache + mog_wsgi 相同。使用 apache2，我无法配置虚拟主机……因为我发现的内容与纯 django 有关，并且似乎是 django 和 mezzanine 之间的差异（我知道 mezzanine 是基于 django :)）。你们能帮我解决这个问题吗？我会很感激的:)

在此先感谢，索林！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T01:47:24.993

索林，

在启动 centOS 6.3 的新实例时，这些步骤对我有用。这包括墨盒和其他一些东西，但安装了夹层。

```
yum -y install httpd
yum -y install wget
yum -y install vsftpd
yum -y install unzip
yum -y install mercurial
yum -y install java-1.6.0-openjdk
yum -y install mod_ssl
yum -y install mod_python
yum -y install mod_wsgi
yum -y install MySQL-python
yum -y install mailx
yum -y install openssh-clients
yum -y install git
yum -y install python-imaging
yum -y install python-imaging-devel
yum install python-setuptools
yum -y install gcc
sudo easy_install pip
pip install virtualenv
pip install mezzanine
pip install -U cartridge 
```

# android - Android res values-v11 或更新版本

> ID：14194228
> 
> 赞同：2
> 
> 时间：2013-01-07T10:40:35.150
> 
> 标签：android, api, android-resources

我有一个文件夹来保存要在 11 个设备的 API 中使用的资源 res/values-v11，但我希望这些资源已用于以下 api 而不仅仅是 11，因为直到现在第 12 个选择文件夹默认值​​，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T10:46:07.257

当按版本指定资源时，Android 将选择等于或小于该值的值（例外 1.5 和 1.6，它们只会采用完全匹配）。如果 values-v12 不存在，API 12 应该从 values-v11 中提取资源。如果您遇到冲突，则可能有另一个资源具有指定值的优先级。像 values-land 或 values-mdpi。[您可以在此处](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)查看优先顺序。

# wordpress - WordPress 3.2.1。搜索结果中的错误变音符号？

> ID：14194230
> 
> 赞同：-1
> 
> 时间：2013-01-07T10:40:40.217
> 
> 标签：wordpress, character-encoding

我安装了一个全新的 wordpress 博客，当我搜索帖子时，变音符号在搜索结果中的显示方式错误：

我在 Amerika die ersten Blockhäuser gab 中得到**了 Lange bevor es，**但我期望的是**在 Amerika die ersten Blockhäuser gab 中的 Lange bevor es**。

由于某种原因，“ä”变成了“Ã¤”。在网站本身和源代码中，它看起来不错，它是一个“ä”。db 字符集是 utf 8。知道可能出了什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:21:46.473

这意味着未发送正确的 Content-Type 标头或使用错误的编码发送。如果根本没有发送，您可以使用 .htaccess 或 apache 配置：

```
AddDefaultCharset utf-8 
```

在访问页面或类似工具时，您应该使用 Google Chrome 开发者工具网络选项卡检查 Content-Type 标头中的内容。

# git - 使用 gitk 查看被移动文件的完整历史

> ID：14194232
> 
> 赞同：23
> 
> 时间：2013-01-07T10:40:42.223
> 
> 标签：git, move, gitk

经过大量搜索，我没有找到一种令人满意的方法，该方法易于使用，可以在 Git 中查看移动文件的完整历史，更重要的是在 Gitk 中。使用`git log --follow [filePath]`甚至`gitk --follow [filePath]`为您提供文件所涉及的提交，但不会向您显示文件在移动之前的实际更改历史记录。因此，我想出了一个粗略但简单的解决方法。

1.  `gitk`对已移动的文件执行 a : `gitk [newFilePath]`。复制第一个提交的 SHA1 ID，这应该是文件被移动的提交。
2.  `gitk`对复制的 SHA1 ID执行 a `gitk [SHA1ID]`：。最新的提交应该是移动发生的时间。找到移动的文件并复制旧路径。
3.  对`gitk`我们刚刚复制的 SHA1 ID 和旧文件路径执行以下操作：`gitk [SHA1ID] -- [oldFilePath]`

此过程将允许您在移动之前查看文件的历史记录。如果有多次移动，则可以重复上述过程。

如果有任何更好的解决方案来解决这个问题，特别是如果有一种方法可以将这些步骤结合起来以显示完整的历史和移动，我们将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T05:07:33.083

如果您想查看每次提交中所做的更改，即使文件已被重命名，您可以使用以下选项`-p`：`git log`

```
git log -p --follow [file/with/path] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-01T23:32:33.423

这是一个 bash 函数，它应该向您展示一个文件（使用 gitk）的所有化身的历史......如果他们需要另一个 shell，我将把它作为练习留给读者：

```
# bash
gitk_follow () {
  while (( "$#" )); do
    git log --oneline --name-status --follow $1;
    shift;
  done | perl -ne 'if( s{^(?:[ACDMRTUXB]|R\d+)\s+}{} ) { s{\s+}{\n}g; print; }' | sort -u
}

# used as:
gitk $(gitk_follow some_file) 
```

* * *

更新：

更改为使用 perl，因为我没有足够关注上一个版本中 git log 的输出。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-22T14:18:37.387

一个更简单的函数，使用不同的 git log 选项和 awk 来精确文件名（包括 gitk 需要的“--”）：

```
# bash
gitk_follow () {
  while (( "$#" )); do
    git log --pretty="" --name-status --follow $1;
    shift;
  done | awk '{print $NF}' | sort -u
}

# used as:
gitk -- $(gitk_follow some_file) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-13T12:29:01.900

另一种选择是使用 Atlassian 开发的[SourceTree](http://www.sourcetreeapp.com)应用程序 (GUI)。在应用程序中，您可以右键单击文件并选择“Log Selected ...”

![已选择日志](../Images/93f1e14a8daf724154510a341d55ed47.png).

在弹出窗口中，它允许您“关注重命名的文件”：

![在此处输入图像描述](../Images/c9cbe39bbcdfb9122e529732cdad99a6.png)

我也使用[GitHub for Mac](https://mac.github.com)，但还没有看到那种功能。

（我不隶属于他们中的任何一个！）

# php - 当两列具有相同的值时，SQL 会抛出错误

> ID：14194234
> 
> 赞同：1
> 
> 时间：2013-01-07T10:40:49.990
> 
> 标签：php, mysql

如果不使用唯一 ID，我想插入一条记录，我在这里找到了这个答案：[MySQL: Insert record if not exists in table](https://stackoverflow.com/questions/3164505/mysql-insert-record-if-not-exists-in-table)。

就我而言，我有一张桌子：

```
+----+---------+---------+---------+---------+-----------+-------------+-----------+
| ID | dRelIns | vRelIns | dRelDel | vRelDel | cRelAktiv | iRelDateiId | iRelKatId |
+----+---------+---------+---------+---------+-----------+-------------+-----------+
| 1  |  blabla |  blabla |  NULL   |  NULL   |    J      |      3      |     5     |
+----+---------+---------+---------+---------+-----------+-------------+-----------+
| 2  |  blabla |  blabla |  blabla |  blabla |    N      |      3      |     1     |
+----+---------+---------+---------+---------+-----------+-------------+-----------+
| 3  |  blabla |  blabla |  NULL   |  NULL   |    J      |      3      |     2     |
+----+---------+---------+---------+---------+-----------+-------------+-----------+ 
```

我得到一个 ID 为 iRelKatId 的数组 ($_POST)和另一个 ID为*iRelDateiId的**数组*。我检查 id 是否已经存在并且 cRelAktiv = 'J'，如果不存在，我想插入一个新的。如果某些条目存在但不在列表中，我想将 cRelAktiv 设置为“N”。

我的带有 SQL 查询的 PHP 脚本：

```
$list=implode("','", $_POST["kat"]);
        $sql="UPDATE tabRel_UDK SET dRelDel=NOW(),
                                    vRelDel=USER(),
                                    cRelAktiv='N'
                                WHERE iRelDateiId='$_POST[id]' AND cRelAktiv='J' AND iRelKatId NOT IN('$list')";
        $result =  mysql_query($sql) or die(Error (" . mysql_error() . ").");

        foreach ($_POST["kat"] as $value) {
            $sql="INSERT INTO tabRel_UDK (dRelIns, vRelIns, cRelAktiv, iRelDateiId, iRelKatId)
                SELECT * FROM (SELECT NOW(), USER(), 'J', '$_POST[id]','$value') AS tmp
                WHERE NOT EXISTS (
                SELECT iRelDateiId,iRelKatId,cRelAktiv FROM tabRel_UDK 
                WHERE iRelDateiId = '$_POST[id]' AND iRelKatId='$value' AND cRelAktiv='J') LIMIT 1;";
            $result =  mysql_query($sql) or die("Error (" . mysql_error() . ").");
        } 
```

这个脚本对我有用，但是当两个 id 具有相同的值（例如 5）时，它会抛出一个错误**Duplicate column name '5'**因为`SELECT * FROM (SELECT NOW(), USER(), 'J', '$_POST[id]','$value')`

任何想法如何使其工作，或者我应该进行 2-3 个 SQL 查询并在 PHP 中手动检查 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:45:42.800

我怀疑`$_POST[id]`并且`$value`具有相同的值，因此您似乎选择了两次相同的列。这应该在代码中被禁止，所以你只选择它一次 - 或者你应该给每个别名，这样就不会发生这种情况。

我不建议返回列名以数字开头的结果集——在某些不允许的数据库系统中，除非它被引用。给他们字符串前缀作为别名，`_<number>`如果必须的话以结尾。

因此，您的子选择字符串可能如下所示：

```
"SELECT * FROM (
    SELECT
        NOW(),
        USER(),
        'J',
        '{$_POST['id']}' AS val_1,
        '{$value}' AS val_2
) WHERE ..." 
```

更重要的是，`$_POST[id]`在您的代码中包含 SQL 注入漏洞会让您面临 SQL 注入漏洞 - 始终在使用数据之前对其进行转义。更好的是，切换到 MySQL PDO 并使用参数化。

最后，变量应该是`$_POST['id']`- PHP 假定您的意思是字符串索引，但如果您跳过引号，它将引发警告。打开警告，这样你就可以看到这样的错误。

# javascript - 启用单词建议时，不会在 Android 上的 Firefox 中触发关键事件

> ID：14194247
> 
> 赞同：9
> 
> 时间：2013-01-07T10:41:59.690
> 
> 标签：javascript, android, jquery, html, firefox

我有一个在键入时触发自动完成搜索的搜索字段。我让它在keyup时触发。这在大多数浏览器中都能完美运行，但在 Android 上的 Firefox 中，这不起作用。似乎在键入时未触发 keyup 事件。仅当在 Android 键盘设置中打开单词建议时才会发生这种情况。

我在 Google 搜索中看到自动完成搜索适用于相同的设置，因此显然可以这样做。我想知道怎么做？这是我需要听的特殊事件吗？

此外，我尝试监听事件更改、keydown 和 keypress，但没有触发。

HTML：

```
<input type="text" id="searchField" 
 autocomplete="off" spellcheck="false" autocorrect="off" /> 
```

jQuery 事件绑定：

```
 $('#searchField').keyup(function (e) {
    var searchValue = $(this).val();
    searchApi._executeAutocomplete(searchValue);
  }); 
```

***注意：***
有时，按键事件*被*触发，这通常是敲击一个*不会导致形成单词的过程的*键。这里最明显的是`Enter`，它总是触发。另一个是`Space`，它触发是因为没有单词包含空格，因为空格是完成单词的定义。`Backspace`触发*如果*删除的最后一个字符不在一个单词中。这意味着如果您刚刚删除了单词的最后一个剩余字母（因此它是字段的开头，或光标后跟一个空格），它就会触发，但如果您在光标仍在的单词末尾删除了一些字符，则不会触发紧接着一封信。基本上，如果按键导致来自键盘应用程序的某种单词建议，则不会触发按键事件。

作为旁注，我可以说在同一设备上的 Chrome 中一切正常。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-02T02:22:26.070

您可以改用该[`input`](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#event-input-input)事件，它在 Android 上的 Firefox 中对我有用。您可以将事件处理程序绑定到`input`和`keyup`事件以实现向后兼容性，但在大多数现代浏览器中，这将触发两者：

```
$('#searchField').bind('input keyup', function(e){
    var searchValue = $(this).val();
    searchApi._executeAutocomplete(searchValue);
}); 
```

这里的例子：http: [//jsfiddle.net/JQ928/3/](http://jsfiddle.net/JQ928/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:10:25.770

我在另一个问题的[答案中找到了解决方案。](https://stackoverflow.com/a/4790969/109392 "使用 Javascript 动态显示输入值")问题基本上是“将我动态写入的文本复制到页面的另一部分”。答案是支持通过非键盘操作来捕获更改，例如使用鼠标粘贴文本。它是通过在文本字段中启动一个嗅探器来解决的，该嗅探器检查值是否已使用`setInterval(...)`. 它清除了模糊计时器。

这解决了我的问题，基本上是关键事件没有触发，以及在我找到这个答案之前我没有意识到的“鼠标粘贴”问题......！

这可行，但我不确定我对这个解决方案是否完全满意，因为它使用了嗅探器。无论变化的原因是什么，我都会更喜欢使用某种在价值变化时触发的事件。使用该`change`事件将不起作用，因为在焦点离开该字段之前不会触发该事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T10:09:44.803

事实上，Android 上的 Firefox 不会触发按键事件，但也会触发某种奇怪的输入事件（例如，如果您按下一个键，则会触发两个事件，如果您离开它也会触发输入事件输入）我必须编写自己的事件：

```
(function($){
var $event = $.event,
    $special = $event.special.fennecInput = {
        setup: function(){
            $(this).on('input',$special.handler);
        },
        teardown: function(){
            $(this).off('input',$spceial.handler);
        },
        handler: function(event) {
            var context = this,
                args = arguments,
                dispatch = function() {
                    event.type='fennecInput';
                    $event.dispatch.apply(context,args);
                };
            if($(context).val() != $(context).attr('data-fennecInput-oldval')){
                dispatch();
                $(context).attr('data-fennecInput-oldval',$(context).val());
            }
        }
    };
})(jQuery); 
```

仅当发生更改值的输入事件时才会触发此事件，因此它不会执行不必​​要的事件。

# ios - 如何在 NSData 中存储和检索多个 NSStrings

> ID：14194248
> 
> 赞同：0
> 
> 时间：2013-01-07T10:42:03.353
> 
> 标签：ios, nsstring, nsdata

有什么方法可以在一个`NSData`对象中存储和检索多个文本字符串？

我正在研究外部配件，只是想知道如何将多个任意参数传入和传出设备。

我假设它们需要`NSString`从一个对象解码为`NSData`对象。那么有什么方法可以区分`NSString`来自一个数据流的单独对象吗？

或者，是否将多个字符串参数存储在单独的`NSData`对象中？每个都有一个缓冲区？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:47:06.413

使用 NSKeyedArchiver 来归档一个 NSStrings 数组。

```
+ (NSData *)archivedDataWithRootObject:(id)rootObject 
```

[NSKeyedArchiver 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)

# node.js - 将backbone.js 与socket.io 一起使用

> ID：14194250
> 
> 赞同：1
> 
> 时间：2013-01-07T10:42:19.160
> 
> 标签：node.js, backbone.js, redis, socket.io

我正在尝试进入 node.js 世界，并希望构建一个简单但完整的测试应用程序来连接 node.js 与 socket.io 和使用 redis 作为存储的主干.js。我还找到了一些教程和一些示例。不知何故，我只是对我必须使用的整个架构感到困惑。通常你会在你的 server.js 中用 express 定义你的所有路由。因此，您可以完全控制服务器端的路线。现在连接主干，您必须再次定义路由？这似乎是一个模型方面，但对我来说，这似乎是我不喜欢的双重工作。那么我是否只是感到困惑并且事情的运作方式完全不同？也许有人有一个链接到一个很好的教程或例子，它变得更清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:19:28.553

我正在为前端骨干模型使用类似的东西

```
class Model extends Backbone.Model

    idAttribute: '_id'

    _sync: (method, model, options) =>
        options.data ?= {}
        @socket.emit method, @name(), model.toJSON(), options.data, (err, data) => 
            if err then console.error "error in sync with #{method} #{@.name()} with server (#{err})" else options.success(data)

    sync: (method, model, options) => 
        if @socket.connected() is no 
            @socket.once 'connect', => @_sync method, model, options
        else 
            @_sync method, model, options

    name: => 
        if @collection and @collection.name then return @collection.name else throw new Error "Socket model has no name (#{@.collection})"

    initialize: ->
        @socket = require('socket')

module.exports = Model 
```

这是我的基本骨干收藏

```
class Collection extends Backbone.Collection

    model: require('class/socket/model')

    _sync: (method, collection, options) =>
        @socket.emit method, @.name, collection.toJSON(), options.data, (err, data) => 
            if err then console.error "error in sync with #{method} #{@.name} with server (#{err})" else options.success(data)

    sync: (method, collection, options) => 
        if @socket.connected() is no 
            @socket.once 'connect', => @_sync method, collection, options
        else 
            @_sync method, collection, options

    garbage: false

    register: =>
        @socket.emit 'register', @name

    deregister: =>
        @socket.emit 'deregister', @name
        @garbage = true

    initialize: (options) ->
        @name = options.name if options and options.name
        if !@name then throw new Error 'Socket collection has no name'
        @socket = require('socket')

        # Registrating socket for connection
        @socket.on 'connect', => @register() if @garbage is off
        if @socket.connected() is yes then @register()

        @fetch()        

        # Registration for socket events for this collection
        @socket.on @name, (method, model) =>

            if method is 'reset'
                @reset(model)

            if method is 'delete'
                m = @get model._id 
                m.trigger 'destroy', m, m.collection

            if method is 'update'
                m = @get model._id
                m.set(model)

            if method is 'create'
                @add(model)

            console.log "SOCKET: " + method + " triggered for collection " + @name

module.exports = Collection; 
```

如果您不介意，那就是 CoffeeScript。

我见过的所有教程都使用注册/注销集合。

重要的是找到一种方法，通过这些集合和模型将身份验证引入后端。这并不难，但很棘手。

还要小心管理同一用户的两个套接字连接。它需要将套接字更新发送给同一个用户，但发送给另一个连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:06:38.907

> 现在连接主干，您必须再次定义路由？

取决于你所说的路线。

您需要告诉主干在哪里可以找到服务器资源，因此模型告诉它在哪里获取它是有意义的（模型中的 url 参数）。

主干中的路由类与服务器上的路由无关。它只是一种更改应用程序状态或页面内显示视图的方法。

例如，在 LOB 应用程序中，您有一个列表视图和一个详细视图。

主干允许您通过路由器在视图之间切换**而无需刷新页面**。

列表的 url 可以是[http://app.com/#list](http://app.com/#list)，详细视图的 url 可以是[http://app.com/#detail/:id](http://app.com/#detail/:id)其中 id 是产品 ID。您只需单击定义为的链接即可在视图之间切换而无需刷新页面

```
<a href="#detail/1">product 1</a> 
```

并返回列表视图

```
<a href="#list">product list</a> 
```

然后你可以有一个显示产品表单的视图

```
<a href="#newproduct">Create a new product</a> 
```

等等。因此，您不必在视图中设置事件侦听器以在不应该相互了解的视图之间切换，并且无需向服务器请求任何内容且无需刷新页面。这是一种构建应用程序的便捷方式。

# php - 如何在特定的显示/隐藏 javascript 标头中使用 cookie。包括现场示例

> ID：14194262
> 
> 赞同：0
> 
> 时间：2013-01-07T10:42:56.787
> 
> 标签：php, javascript

[在Th0rndike](https://stackoverflow.com/users/1251715/th0rndike) & [Pranav](https://stackoverflow.com/users/553098/pranav)的帮助下，我在我的网站上制作了一个显示/隐藏标题。我接下来要做的是在用户端设置一个cookie，所以下次这个用户浏览我的网站时，标题保持在最后一个状态。活生生的例子，在下面的评论。

我对饼干一无所知，除了非常基本的东西，所以，如果你有好意，请给我一点解释！！！:)

先感谢您！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:07:44.647

```
function setCookie(h,a,f){
try{
document.cookie=escape(h)+"="+escape(a)+(f?"; expires=Thu, 31 Dec 2020 23:59:59 GMT":"")+";
path=/";return true;
}catch(c){
alert(c.Message);
}
return false;
} 
```

试试这个函数，如果你像这样将参数传递给这个函数，我已经创建了它的设置会话 cookie：-`setCookie('your key','your value',false);`

cookie 有两种类型，一种是会话，另一种是持久性 cookie，会话 cookie 在特定会话后过期，而持久性 cookie 在函数中写入的时间量内持续存在。

对于持久性 cookie 传递参数`setCookie('your key','your value',true);`

这是获取cookie的功能

```
function getCookie(m){
    try{
          var f=m+"=";
          var l=document.cookie;
          var b=-1;
          var a=-1;
            if(l.length>0){
                b=l.indexOf(f);

                if(b>-1){
                    b+=f.length;
                    a=l.indexOf(";",b);
                    a=((a==-1)?l.length:a);
                     g=unescape(l.substring(b,a));
                }
            }
    }catch(h){
    alert(h.Message);
    }
    return g;
} 
```

只传递 cookie 的键名：- getCookie('your key name');

# java - 客户端发送的请求语法不正确 - Spring mvc

> ID：14194264
> 
> 赞同：2
> 
> 时间：2013-01-07T10:43:05.973
> 
> 标签：java, spring, spring-mvc

我在将值提交给 Spring MVC 中的控制器时遇到问题。

当我调用控制器并将`href`其提交给控制器方法时，我提交了以下方式：

`href='CIMtrek_Compliance_Daily_Shipments_Case_Pack_Calendar?date=<%=formatedDate%>'`

但是当我通过 javascript 提交相同的内容时，我得到了这个异常`The request sent by the client was syntactically incorrect.`

这就是我通过 javascript 提交的方式：

```
function getCasePackCalendar(date) {
     viewName ="CIMtrek_Compliance_Daily_Shipments_Case_Pack_Calendar?date="+date+" ";
     global.forms[0].action = viewName;
     global.forms[0].method = "GET"
     global.forms[0].submit()
} 
```

这是我的控制器方法：

```
@RequestMapping(value = "/CIMtrek_Compliance_Daily_Shipments_Case_Pack_Calendar", method = RequestMethod.GET)

        public ModelAndView  CIMtrek_Compliance_Daily_Shipments_Case_Pack_Calendar(@RequestParam("date") String date,HttpServletRequest request) {
            String[] data = new String[] {date};
        HttpSession session = request.getSession(true);
        String UserName = "";
        if(session.getAttribute("CIMtrek_UserName")!=null)
         UserName = session.getAttribute("CIMtrek_UserName").toString();
        ViewContent vc = new ViewContent();
        String HTML = vc
        .getContent(
        "com/cim/xml/CIMtrek_Compliance_Daily_Shipments_Case_Pack_sql.xml",
        "com/cim/xsl/view.xsl", "1 and 10","1","","0",UserName,data,"");

        List<String> ls = new ArrayList<String>();
            ls.add(HTML);
            logger.info("Welcome CIMtrek_Visitors_By___Unipart_Div__Date__Host___Visitor!");
            Map<String, Object> model = new HashMap<String, Object>();

        model.put("list", ls);
        model.put("iSPost", "N");

        logger.info("Welcome CIMtrek_Compliance_Daily_Shipments_Case_Pack!");

        return new ModelAndView("view", model);

        } 
```

这就是我的形式

```
<form id="CIMtrek_Compliance_Daily_Shipments">
                                               <input type="hidden" id="CIMtrek_selectedIDs" name="CIMtrek_selectedIDs" value="" />
                                               <input type="hidden" id="CIMtrek_xmlData" name="CIMtrek_xmlData" value="" />
                                               <input type="hidden" id="CIMtrek_formName" name="CIMtrek_formName" value="CIMtrek_Compliance_Daily_Shipments" />
                                             </form> 
```

可能是什么问题呢。

请帮我找到它。

最好的祝福。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:30:03.107

请使用一些调试工具（例如在 Chrome 中使用 F12->Network 选项卡，或使用 Firefox Firebug 查看来自浏览器的请求）在这种情况下，您将表单参数放入视图名称中（甚至在其中添加一些奇怪的空格符号参数后的引号）在您的客户端 js 中 - 它似乎不正确。

我建议您制作一个单独的控制器方法来处理您的表单。

在这种情况下，您的表单被错误地序列化（实际上正确的 html 表单序列化/参数传递由多个 RFC 规定）。

# javascript - 使用 jquery 隐藏动态创建的元素

> ID：14194269
> 
> 赞同：0
> 
> 时间：2013-01-07T10:43:19.060
> 
> 标签：javascript, jquery, html

我正在通过 ajax 获取数据。我有一个包含所有数据的数组。现在我在数组中运行一个循环，并动态创建一个与数组的每个元素相对应的“p”和一个“按钮”。如果我单击按钮对应的“p”的innerHTML应该传递给ajax并且按钮必须消失。这是我尝试过的示例：

```
<script>
for(var i=0;i<foo.length;i++)
{
     addElement(foo[i],i);
}
function addElement(foo,i)
{
    ni=document.getElementById("asdf");
    new_but=document.createElement('input');
    new_p=document.createElement('p');
    new_p.id='text'+toString(i);
    new_p.innerHTML=foo;
    new_but.type='button';
    new_but.value='add';
    new_but.id=toString(i);
    new_but.className='but';
    ni.appendChild(new_p);
    ni.appendChild(new_but);
}
$(document).ready(function(){
    $('.but').each(function(){
        $(this).click(function(){
            $.ajax({
              type:'POST',
              data:'awdwad',
              url:'aadwewq.php',
              success:function(result)
              {
                  if(result==no_error)
                  $(this).hide();
              }
});});});});
</script> 
```

元素已创建，但我以后无法使用它们的 id 或带有 jquery 的类来访问它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:46:36.327

问题是因为当元素不存在`click`时，处理程序被分配 onload 。`.but`您需要将点击处理程序委托给父元素，如下所示：

```
$(document).ready(function(){
    $('#asdf').on('click', '.but', function(){
        $.ajax({
            type:'POST',
            data:'awdwad',
            url:'aadwewq.php',
            success:function(result) {
                if (result == no_error)
                    $(this).hide();
            }
        });
    });
}); 
```

此外，您可以`addElement`使用 jQuery 缩短函数，如下所示：

```
function addElement(foo, i) {
    var $ni = $('#asdf');
    var $p = $('<p></p>', { 'id', 'text' + toString(i) }).html(foo).appendTo($ni);
    var $button = $('<input></input>', {
        'type': 'button',
        'id': toString(i),
        'class': 'but'
    }).appendTo($ni);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T10:46:13.083

在某些父对象或文档上使用`.on`和附加事件。也不需要迭代对象。

```
$(document).on("click", ".but", function(){
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:49:25.187

`this`在您`success`的调用回调`$.ajax`中指的是 ajax 调用本身。您应该首先引用该按钮。

结合其他答案的反馈：

```
$(function() {
    $(document).on('click', '.but', function() {
       var btn = $(this);
       $.ajax({
           type:'POST',
           data:'awdwad',
           url:'aadwewq.php',
           success:function(result)
           {
               if(result==no_error)
               $(btn).hide();
           }
       });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:04:01.720

```
function addElement(foo,i){
    ni=document.getElementById("asdf");
    new_but=document.createElement('input');
    new_p=document.createElement('p');
    new_p.id='text'+i; //remove toString
    new_p.innerHTML=foo;
    new_but.type='button';
    new_but.value='add';
    new_but.id=i;  // remove toString
    new_but.className='but';
    ni.appendChild(new_p);
    ni.appendChild(new_but);
} 
```

# mono - 使用嵌入式 RavenDB 跨平台 - .NET/Mono/MonoTouch/MonoDroid？

> ID：14194270
> 
> 赞同：4
> 
> 时间：2013-01-07T10:43:20.003
> 
> 标签：mono, xamarin.ios, nosql, xamarin.android, ravendb

我如何在所有主要的 .NET 平台（.NET >= 4.0、Mono、MonoTouch、Android 的 Mono、[WinRT、MonoGame 等]）上使用嵌入式[RavenDB 。](http://ravendb.net/)

以后打算支持嵌入式跨平台官方吗？如果是：什么时候？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T11:19:39.363

*   RavenDB 在 .NET >= 4 上运行
*   你可以在 Mono 上运行它。
*   客户端将在 MonoTouch、Mono for Android、WinRT 和 MonoTouch 上运行

# java - Servlet 找不到库

> ID：14194272
> 
> 赞同：1
> 
> 时间：2013-01-07T10:43:31.153
> 
> 标签：java, web-services, tomcat, servlets, netbeans

我编写了一个命令行 Java 程序（一个 html 分析器），并试图将其转换为 Web 服务。

我编写了一个 jsp 文件来收集一些信息并将它们传递给我的程序。问题是 servlet 在分析之前无法找到我用来美化 html 源代码的库 jar（HTMLCleaner），因此它会以异常停止执行。

在 Tomcat 日志中，我发现此消息：

> 严重：servlet [Validate] 在路径 [/MyWebService] 的上下文中的 Servlet.service() 引发异常 [Servlet 执行引发异常]，根本原因 java.lang.NoSuchMethodError: org.htmlcleaner.HtmlCleaner.(Ljava/io/File ;)V at it.mypackage.mybeautifierclass.(mybeautifierclass.java:39)

我使用 Netbeans 7.1.2 作为 IDE，我已经包含了 HtmlCleaner 的 jar 作为我的 web 服务项目的库，并且命令行版本运行良好。

为什么它找不到 HTMLCleaner？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:47:13.593

看起来 tomcat 找到的库版本与您开发/编译时使用的版本不同：该类存在，但与编译时使用的接口不同。

检查您使用的独立版本以及哪个版本进入您的 webapp`WEB-INF/lib`目录。此外，您可能有多个版本可用，例如在 tomcat`/lib`目录中的全局类路径中 - 如果在您的 web 应用程序中找不到它，请在全局类路径中搜索它。

编辑：正如 Anders 评论的那样，确保找到该库的每个实例，即使它与您已经找到的目录位于同一目录中。

# c++ - Windows 应用商店应用程序 - 添加项目引用警告

> ID：14194277
> 
> 赞同：2
> 
> 时间：2013-01-07T10:43:50.843
> 
> 标签：c++, windows-8, visual-studio-2012

尝试添加对我的 Windows Store App 项目的引用时，我收到以下警告：

> 不建议添加对“LegacyLibrary”的引用，因为它与 Windows 应用商店应用程序不兼容。
> 
> 您要添加此参考吗？

它在警告我什么？为什么不兼容？您可以从 Windows 应用商店应用项目中调用旧代码吗？

构建后，我收到以下警告：

> 警告 MSB8019：此版本正在使用未打包的组件“LegacyLibrary\Output\Debug x64\LegacyLibrary.lib”，因为该组件不是来自 Windows 应用商店应用项目

烦人的是，没有MSB8019的搜索结果……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:09:10.020

对于要从​​ Windows 应用商店应用程序引用的每个项目，您需要转到`Properties | General`然后更改`Windows App Store Support`为`Yes`. 这将允许您的 Windows 应用商店应用项目引用该项目。如果您想在这些旧版应用程序中使用新的 WindowsRT API，您需要转到`Properties | C/C++ | General`并更改`Consume Windows Runtime Extension`为`Yes (/ZW)`.

# java - 在 Java 中通过 SCTP 发送消息时出现异常

> ID：14194281
> 
> 赞同：1
> 
> 时间：2013-01-07T10:43:56.620
> 
> 标签：java, sctp

我正在一个简单的客户端服务器模型中使用 SCTP 进行一些测试。我的服务器代码如下：

```
public class SCTPServer extends Thread {

    InetSocketAddress serverSocketAddress=null;
    SctpServerChannel sctpServerChannel;
    SctpChannel sctpChannel;
    boolean running = false;
    ByteBuffer bf = ByteBuffer.allocateDirect(160);
    String id= null;
    public SCTPClient  sctpClient= null;
    public SCTPServer(String IP, int  port, String clientIp, int clientPort, String id) {

        try {
            serverSocketAddress = new InetSocketAddress(IP, port);
            sctpServerChannel = SctpServerChannel.open().bind(serverSocketAddress);

        } catch (Exception e) {
            System.out.println("Failed to open Sctp connection Reciver on IP:" + IP + " and Port:" + port+"  "+e);
            System.exit(0);
        }
    }

    public void run()
    {
        running = true;
        while (running) {           

            try {
                sctpClient.sendAsp();
                sctpChannel = sctpServerChannel.accept();
                try {
                sctpChannel.receive(bf, null, null);
                bf.flip();
                byte[] barry = new byte[bf.limit()];   //we may keep the received data on this new byte arrray here or in some 
                bf.get(barry, 0, bf.limit());
                bf.clear();
                System.out.println("new sctp message is received");
                System.out.println(new String(barry));

            } catch (IOException ex) {
                System.out.println("Failed to receive from sctp Channel " + ex);
            }

            } catch (Exception ex) {
                System.out.println("Exception at Starting SCTP Server channel"+ ex);
            }
        }
    }  

} 
```

以及以下客户端代码：

```
public class SCTPClient extends Thread {

    SctpChannel sctpChannel;
    InetSocketAddress socketAddress;//= new InetSocketAddress("202.51.176.44", 5555); 
    boolean runniung = false;
    ByteBuffer bf = ByteBuffer.allocateDirect(160);
    String id= null;

    public SCTPClient(String ip, int port, int maxInStream, int maxOutStream, String id) {
        socketAddress = new InetSocketAddress(ip, port);
        this.id = id;
        //InetSocketAddress sockAd = new InetSocketAddress("202.51.176.44",55556);
        try {
            sctpChannel = SctpChannel.open();
            System.out.println("SCTP  connection opened with IP==" + ip + " port == " + port);
            //sctpChannel.bind(sockAd);
            sctpChannel.connect(socketAddress, maxInStream, maxOutStream);

            runniung = true;
            sendMSG();

        } catch (Exception ex) {
            System.out.println("Exception at opening sctp connection:" + ex);
            System.exit(0);
        }
    }
    public void sendMSG()
    {
        MessageInfo messageInfo =null;
        /*try {
        } catch (IOException ex) {
            System.out.println("Failed to create Message Info " + ex.toString());
        }*/

            messageInfo = MessageInfo.createOutgoing( null, 0);
        ByteBuffer byteBuffer = buildMessage(1, "test");
        try {
            sctpChannel.send(byteBuffer, messageInfo);
            byteBuffer.clear();
            System.out.println("A message has been sent");

        } catch (Exception e) {
            e.printStackTrace();
            System.out.println("Failed to send the message due to :" + e.toString());
        }
    }

    public static ByteBuffer buildMessage(Integer id,String infoString)
    {

        //We can calculate the total length of the message hard codedly, even before building the total message.
        int totalLength = (id!=null) ? 16 : 8;
        totalLength += (infoString!=null) ? (4+infoString.length()) : 0;
        ByteBuffer data = ByteBuffer.allocateDirect(totalLength);

        //Own part of ASP Up message
        if(id!=null)
        {

            data.putInt(ASPIdentifier);            
        }
        if(infoString!=null)
        {

            data.put(infoString.getBytes());
        }
        return data;
    }
} 
```

这里的问题是，当我尝试连接到远程 PC 时，SCTP 关联已成功建立。但是当`SendMSG`调用该函数时，系统会中止并出现以下异常

```
java.net.SocketException: Invalid argument
at sun.nio.ch.SctpChannelImpl.send0(Native Method) Failed to send the message due to :java.net.SocketException: Invalid argument
at sun.nio.ch.SctpChannelImpl.sendFromNativeBuffer(SctpChannelImpl.java:1027)
at sun.nio.ch.SctpChannelImpl.send(SctpChannelImpl.java:987)
at sun.nio.ch.SctpChannelImpl.send(SctpChannelImpl.java:967)
at sctptester.SCTPClient.sendMSG(SCTPClient.java:79)
at sctptester.SCTPClient.<init>(SCTPClient.java:40)
at test.main(test.java:66) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:08:55.257

在将您的客户端代码与我上周刚刚编写的模拟器进行比较后，我只能看到一个真正的区别。您没有将客户端的套接字绑定到本地 InetSocketAddress。你在哪里：

```
sctpChannel.bind(sockAd); 
```

您需要输入以下内容：

```
InetSocketAddress localISA = new InetSocketAddress(localIPAddress, localPort);
sctpChannel.bind(localISA); 
```

我相信这会为你做这件事，或者至少让你克服你发布的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T09:07:53.187

我认为您应该在客户端发送时添加目的地，

```
 messageInfo = MessageInfo.createOutgoing( null, 0);
        //replace with
        msgInfo = MessageInfo.createOutgoing(new InetSocketAddress(ip, port), 0); 
```

# testing - Jmeter中分布式测试的目的是什么？

> ID：14194282
> 
> 赞同：-1
> 
> 时间：2013-01-07T10:44:00.503
> 
> 标签：testing, jmeter, load-testing, stress-testing

什么是 Jmeter 中的分布式测试？
它的实际目的是什么？

我在 Jmeter 中搜索并阅读了很多关于主/从概念的内容，我知道它是如何完成的，但它有什么用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T05:27:28.827

实际上单台正常配置的机器生成大用户负载测试是有限制的。因此，我们使用分布式负载测试来使用多台机器来生成负载，其中您正确地说我们使用了主从配置。有关分布式负载测试的更多信息和有关 JMeter 的其他信息，您可以参考链接 - [使用 JMeter 进行分布式负载测试](http://artoftesting.com/performanceTesting/distributed-load-testing-in-jmeter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T14:03:20.850

当您在 CPU、内存、网络方面达到机器的极限时，将使用分布式测试：

*   如果您在内存和 CPU 方面达到一个**合理**的 JVM的限制，它可以在一台机器（一台机器上的许多 JVM）内使用
*   它可以在多台机器上使用（1 台或多台机器上的 1 台或多台 JVM）

**但**在使用它之前，请确保您确实需要它，请阅读以下内容：

*   [http://www.dzone.com/links/r/see_how_to_make_jmeter_run_thousands_of_threads_w.html](http://www.dzone.com/links/r/see_how_to_make_jmeter_run_thousands_of_threads_w.html)

*   [http://jmeter.apache.org/usermanual/best-practices.html](http://jmeter.apache.org/usermanual/best-practices.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-30T12:05:46.927

jmeter中分布式测试的主要原因是负载分布。这意味着：假设您想为应用程序生成 3000 个用户的负载，Jmeter 在创建用户数量方面没有限制，但限制是我们的硬件或 CPU。我们假设由于我们的 CPU 限制，我们只能从一台计算机发送 1000 个请求。如果我需要发送 3000 个请求意味着我需要 3 个系统。这个分布式测试将在一个文件中给出 3000 个用户的累积结果作为输出。

如果您的系统运行良好并且使用 http 采样器或 smpt，您不会觉得使用分布式来生成负载。但是，如果您开始使用像 Webdriver 采样器这样的采样器或提供重负载 CPU 的东西，您需要使用分布式。因为例如：您正在运行的 Webdriver 采样器，那么在一个系统中只能启动 10 到 15 个用户，如果您需要更多用户，则需要进行分布式，除了分布式之外没有其他好的选择

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T16:39:35.890

它用于从不同的位置生成负载或生成比单台计算机更多的负载。

# javascript - 使用 JavaScript 更改 ruby 循环变量

> ID：14194283
> 
> 赞同：0
> 
> 时间：2013-01-07T10:44:01.917
> 
> 标签：javascript, ruby-on-rails, variables, sorting, loops

在我的控制器中，我有两种对图像数据库进行排序的方法：

```
def index
   @picslist = Pic.order("created_at DESC")

   @picslist2 = Pic.order("price DESC")
end 
```

在我看来，我列出了它们：

```
<% @picslist.each do |pic| %>
    PICS IN HERE
<% end %> 
```

我想用 JavaScript 点击事件将`@picslist`变量更改为，如下所示：`@picslist2`

```
$("#sortbyprice").click(function(event) {

    //replace @picslist with @picslist2

}); 
```

这是正确的做法吗？无论哪种方式，如果您能推荐一种优雅的方式，我将不胜感激！

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:58:29.563

制作两个对象@picslist 和@picslist2 不是一个好主意。当 javascript 事件发生时传递 sort_by 参数。

```
def index
   @picslist = Pic.order("#{params[:sort_by]} DESC")  
end 
```

其中 params[:sort_by] 将是“created_at”或“price”

类似的东西并使用 ajax 或表单提交来更新页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:22:19.363

感谢您的帮助...实际上，我发现最好的方法就是对结果进行排序，详见[此处](http://railscasts.com/episodes/228-sortable-table-columns?view=asciicast)

# c - ZeroMQ 请求/回复不单向回复

> ID：14194289
> 
> 赞同：2
> 
> 时间：2013-01-07T10:44:23.900
> 
> 标签：c, network-programming, zeromq

我使用 ZeroMQ 的 C 接口在多台机器之间分配计算。在本地，一切都按预期工作`tcp://localhost:5555`。但是，当在两台机器 A 和 B 上运行客户端和服务器时，请求和回复仅在服务器在 A 上运行并且客户端在 B 上运行时才有效。如果反过来，则只有在 B 上接收到请求，并且A 上的客户端永远不会收到回复。

为了验证我是否正确设置了所有内容，我编译了 ZeroMQ 指南中的第一个[示例](http://zguide.zeromq.org/page%3aall#Ask-and-Ye-Shall-Receive)，但存在同样的问题。

这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:39:00.667

该问题很可能是由 0MQ 的两个不兼容版本引起的。

这是 0MQ v3.0.x、3.1.x、3.2.0、3.2.1 的已知问题。这些版本都使用了一个未记录的、不兼容的协议版本（没有版本号，所以很难互操作），最终在 3.2.2 稳定版中得到修复。如果您运行的是旧版本，并且这可能与您使用的语言绑定一起提供，请升级它。如果有严重的原因导致您无法升级，例如您有客户在使用旧版本，请在 zeromq-dev 列表中询问，有人可能会提供帮助。值得一提的是，该协议现在具有版本号，并且向后兼容以前的稳定版本（2.2 和 2.1）。

# java - 在java中验证日期

> ID：14194290
> 
> 赞同：4
> 
> 时间：2013-01-07T10:44:27.290
> 
> 标签：java, validation, datetime

我正在使用 NetBeans IDE 7.2。我有两个单独的类`newDateTest.java`，并且`newDateMethod.java`我目前正在使用我的方法类来验证我在测试类中使用的用户输入的日期。

到目前为止，在我的测试课程中，我有以下内容：

```
try
{
    Prompt ="please enter a date in the format dd-mm-yyyy";
    System.out.println(Prompt);
    String inputDate = in.next();
    isValid = newDateMethod.validDate(input, input, input);
    if (isValid){
        System.out.println("VALID DATE");

    } else {
        System.out.println("INVALID DATE");

    }

}catch (ArrayIndexOutOfBoundsException oob) {
    System.out.println(oob);
}
} 
```

但是我不知道如何在我的方法类中验证日期，因为我对 Java 还很陌生。

任何人都可以找到解决方案吗？我被教导使用的那种 iof 东西是 Date Formmater 但不确定这在这里是否合适？如果是的话就不知道怎么用了

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T10:46:31.110

像这样：

```
Date date = null;
String inputDate = "07-01-2013";
try {
    DateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
    formatter.setLenient(false);
    date = formatter.parse(inputDate);
} catch (ParseException e) { 
    e.printStackTrace();
} 
```

2021 年 7 月 13 日更新：

我非常同意下面 Ole VV 的评论。所有 Java 和 Kotlin 开发人员都应该更喜欢 java.time 包。

如果时间允许，我将添加一个更现代的示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T10:46:54.283

看看[`SimpleDateFormat.parse(...)`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)并记得用 try-catch 包围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:49:03.647

标准的 JDK 类是[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：

```
DateFormat fmt = new SimpleDateFormat("yourformathere");

// use fmt.parse() to check for validity 
```

或者，我建议使用[Joda Time](http://joda-time.sourceforge.net)的`DateTimeFormat`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T11:14:55.600

您还可以使用Apache commons routines 包中的[DateValidator](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/DateValidator.html) ，而不是依赖往往具有较小性能开销的异常，如下所示：

```
if (DateValidator.getInstance().validate(inputDate, "dd-MM-yyyy") != null) {
  // Date is valid
}
else {
  // Date is invalid
} 
```

虽然小免责声明，我还没有查看 validate 方法的实现，我不确定它是否使用例如 SimpleDateFormat ...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-13T12:15:38.813

## java.time

我建议您使用现代 Java 日期和时间 API java.time 进行日期工作。它还为您提供比`SimpleDateFormat`其他一些答案中使用的旧类更精确的验证。

```
 String[] exampleInputStrings = { "07-01-2013", "07-01-017",
            "07-01-2ooo", "32-01-2017", "7-1-2013", "07-01-2013 blabla" };

    for (String inputDate : exampleInputStrings) {
        try {
            LocalDate date = LocalDate.parse(inputDate, DATE_FORMATTER);
            System.out.println(inputDate + ": valid date: " + date );
        } catch (DateTimeParseException dtpe) {
            System.out.println(inputDate + ": invalid date: " + dtpe.getMessage());
        }
    } 
```

我的示例代码的输出是：

> ```
> 07-01-2013: valid date: 2013-01-07
> 07-01-017: invalid date: Text '07-01-017' could not be parsed at index 6
> 07-01-2ooo: invalid date: Text '07-01-2ooo' could not be parsed at index 6
> 32-01-2017: invalid date: Text '32-01-2017' could not be parsed: Invalid value for DayOfMonth (valid values 1 - 28/31): 32
> 7-1-2013: invalid date: Text '7-1-2013' could not be parsed at index 0
> 07-01-2013 blabla: invalid date: Text '07-01-2013 blabla' could not be parsed, unparsed text found at index 10 
> ```

为了进行良好的验证，您可能应该添加范围检查。使用`isBefore`和/或 的`isAfter`方法`LocalDate`。

此外，如果您打算对日期做任何事情而不是验证它，您应该`LocalDate`避免在程序中进行解析（而不是字符串）。

## 关联

[Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T10:48:39.403

你应该使用[`SimpleDateFormat.parse(String)`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)方法。如果传递的日期格式错误，则会引发异常，在这种情况下您返回 false。

```
public boolean validateDate(String date) {
    SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
    try {
        sdf.parse(date);
        return true;
    }
    catch(ParseException ex) {
        return false;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-13T05:08:46.187

可以使用[joda-time](https://www.joda.org/joda-time/userguide.html)。

```
DateTimeFormat.forPattern(INPUTED_DATE_FORMAT);
//one can also use it with locale
DateTimeFormat.forPattern(USER_DATE_FORMAT).withLocale(locale);
fmt.parseDateTime(INPUTED_DATE); 
```

如果`parseDateTime`抛出`IllegalArgumentException`则日期无效。

# php - mysql和PHP中的结果冲突

> ID：14194293
> 
> 赞同：2
> 
> 时间：2013-01-07T10:44:33.170
> 
> 标签：php, mysql

我面临一个奇怪的问题，如果我用 PHP 检查 mysql 查询，那么我没有根据 mysql 查询得到确切的结果。

但是如果我运行相同的查询，那么我会得到预期的结果，这里是 mysql 查询：

```
SELECT id, follow_up_datetime, followed_by, follow_up_status, case_time_zone, description, case_id
FROM case_note
WHERE TYPE LIKE '%follow-up-open%'
AND (
    follow_up_datetime LIKE '%2013-01-08%'
    OR date( follow_up_datetime ) < '2013-01-08'
)
AND follow_up_status <= '1'
GROUP BY case_id
ORDER BY case_id DESC
LIMIT 0 , 30 
```

此查询的结果是：

![mysql_result](../Images/4bf3bc64db8f6651b4de3fe859ff7d9e.png)

但是当我对 php 使用相同的查询时，我得到了错误的 ID： **PHP**

```
//current date is "2013-01-08";
$follow_q = "SELECT id, follow_up_datetime, followed_by, follow_up_status, case_time_zone, description, case_id
                 FROM case_note
                 WHERE `type` LIKE '%follow-up-open%'
                 AND (
                 follow_up_datetime LIKE '%$current_date%'
                 OR date(follow_up_datetime) < '$current_date'
                 )
                 AND follow_up_status <= '1' 
                 GROUP BY case_id 
                 ORDER BY case_id DESC";
$follow_r = mysql_query($follow_q) or die('Error in Query!<br />' . mysql_error()); 
```

这个查询为我提供了 id 之类的`53, 84, 47, 36`。

最后三个 id 是正确的，但第一个是不正确的。我想要第一个 id 是`139`。任何人都可以帮助找出确切的问题吗？

**更新**：在这里我更新了 id 的结果`53`

![在此处输入图像描述](../Images/738518e70019fe1021b2e53aece4e2a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:14:09.860

关于您的查询本身的一些提示：

你`follow_up_datetime`应该是类型[时间戳或日期时间](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

`LIKE`您的日期条件中不需要运算符。

```
DATE( `follow_up_datetime` ) = '2013-01-08' 
OR 
DATE( `follow_up_datetime` ) < '2013-01-08' 
```

这可以缩短为

```
DATE( `follow_up_datetime` ) <= '2013-01-08' 
```

如果您总是与当前日期进行比较，则可以使用`CURRENT_DATE`

```
DATE( `follow_up_datetime` ) <= CURRENT_DATE 
```

不要将 int 类型的 col 与字符串进行比较，这将强制 MySQL 将 col 的所有值`follow_up_status`转换为字符串。

```
`follow_up_status` <= 1 
```

你确定你需要`LIKE`类型条件吗？

```
`type` = 'follow_up_open' 
```

会快很多。

**关于 MySQL 扩展的 PHP 文档：**

> 此扩展自 PHP 5.5.0 起**已弃用**，并将在未来删除。相反，应该使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API 指南](http://php.net/manual/en/mysqlinfo.api.choosing.php)和[相关的常见问题解答](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。

* * *

**编辑：**

才意识到你`GROUP BY case_id`。如果两者，id`53`和 id`139`相同`case_id`MySQL 需要知道哪一行可以被丢弃。如果您不提供此信息，则或多或少会随机丢弃两行之一。

要解决此问题，请使用[聚合函数](http://dev.mysql.com/doc/refman/5.0/en//group-by-functions.html#function_min)。在您的情况下`MIN()`，将提供所需的结果。

[使用 PHP heredoc 表示法](http://php.net/manual/de/language.types.string.php#language.types.string.syntax.heredoc)清理了整个查询：

```
$follow_q = <<< EOQ
    SELECT 
        MIN( `id` ) AS `id`,
        `follow_up_datetime`,
        `followed_by`,
        `follow_up_status`,
        `case_time_zone`,
        `description`,
        `case_id`
    FROM
        `case_note`
    WHERE
        `type` = 'follow-up-open'
         AND
        `follow_up_datetime` <= '{$current_date}'
        AND
        `follow_up_status <= 1
    GROUP BY 
        `case_id`
    ORDER BY 
        `case_id` DESC
EOQ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:59:50.997

问题可能来自`follow_up_status <= '1'`. 如果列是数字类型，则应将值作为数字而不是字符串传递。尝试：

```
follow_up_status <= 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:18:05.900

如果是我，我会[error_log()](http://php.net/manual/en/function.error-log.php) $follow_q 变量，然后将该查询复制并粘贴到 MySQL 中，看看它是否返回相同或错误的结果，因为您的 $current_date 变量可能是错误的。

# java - 如何将 findbugs @Nonnull 与外部库一起使用？

> ID：14194304
> 
> 赞同：2
> 
> 时间：2013-01-07T10:45:39.167
> 
> 标签：java, findbugs

我开始在现有项目上使用 findbugs`@Nonnull`和`@CheckForNull`注释，以防止 NPE，并认为它工作得很好。我将`@Nonnull`返回类型和参数用作默认值，发现已经有几个 NPE，只需添加默认值即可。现在我找到了一个类似的方法：

```
@Nonnull
private Integer getInteger(String key) {
    return Map.get(key);
} 
```

它不会产生警告。我明白为什么会这样，但我该如何解决这个问题？你如何在你的项目中解决这个问题？

可以全局应用的解决方案将是首选，例如`@ApplyCheckForNullToAllExternalCalls`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:20:40.993

您可以`@CheckForNull`通过将注释添加到包的`package-info.java`文件中来应用包内的所有方法返回值（和/或参数），但您无法控制单个方法。

首先，`@ReturnValuesAreCheckForNullByDefault`在项目的实用程序包中创建。

```
@Documented
@CheckForNull
@TypeQualifierDefault(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface ReturnValuesAreCheckForNullByDefault { /* noop */ } 
```

接下来，创建`src/java/util/package-info.java`.

```
@ReturnValuesAreCheckForNullByDefault
package java.util;

import my.project.util.ReturnValuesAreCheckForNullByDefault; 
```

最后，享受您的 FindBugs 警告。

```
@Nonnull
public String getValue() {
    Map<String, String> values = new HashMap<>();
    return values.get("foo");    // <-- Possible null pointer dereference ...
} 
```

这样做的问题是，包中有许多按`java.*`合同*不*返回的方法`null`。在不检查的情况下使用这些`null`会引发警告。例如，这个 NPE 安全代码也会引发警告：

```
@Nonnull
public Set<String> getNotNull() {
    Map<String, String> values = new HashMap<>();
    return values.keySet();
} 
```

您可以使用 来抑制警告`@SuppressFBWarnings`，但这可能会使代码过于混乱，不合您的喜好。

# c - linux分叉通讯

> ID：14194312
> 
> 赞同：1
> 
> 时间：2013-01-07T10:46:16.727
> 
> 标签：c, linux, fork

我有一个父进程和 n 个子进程等待，因此从网络接收一些东西。问题是，对于孩子从网络收到的每条消息，我需要告诉父亲消息包含什么。如果我尝试制作管道或父亲和孩子之间的套接字对，然后父亲不知道消息在哪里结束，另一个消息从哪里开始。你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:06:24.070

您正在使用面向流的管道/套接字对。所以你失去了消息边界。

使用面向数据报的套接字来保持消息边界。

有关基于数据报的 unix 套接字和套接字对的更多信息，请参见 mapage [unix(7) 。](http://www.kernel.org/doc/man-pages/online/pages/man7/unix.7.html)

有些功能可能适合您：

```
 socket(AF_UNIX, SOCK_DGRAM, 0);
   socketpair(AF_UNIX, SOCK_DGRAM, 0, int *sv); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:51:17.423

在写入管道或套接字对之前使用一些分隔符，以便每个孩子在发送给父亲之前将该分隔符添加到消息中

# android - 使用 Robotium 测试 Android 设备分辨率

> ID：14194318
> 
> 赞同：0
> 
> 时间：2013-01-07T10:46:41.770
> 
> 标签：android, device, junit4, resolution, robotium

有没有办法测试安卓设备的分辨率？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:42:39.613

在任何测试函数中，您都可以编写以下代码：

```
 Activity ACT = getActivity();

    Display display = ACT.getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int width = size.x;
    int height = size.y; 
```

或者如果 API<13

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth(); 
int height = display.getHeight(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T09:30:37.347

希望得到帮助：[如果您计划为手机/平板电脑运行相同的测试代码]

```
Configuration mConfig = mContext.getResources().getConfiguration();

// checking for XLarge screen ...U can also check for Large screen similarly    
if ((mConfig.screenLayout & Configuration.SCREENLAYOUT_SIZE_XLARGE) == Configuration.SCREENLAYOUT_SIZE_XLARGE) {  

        Log.i("TABLET MODE");
        // Do ur actions for Tablet
} 
```

# javascript - Firefox 在文本上拖动时触发 dragleave

> ID：14194324
> 
> 赞同：7
> 
> 时间：2013-01-07T10:46:55.400
> 
> 标签：javascript, firefox, drag-and-drop

我正在尝试跟踪整个屏幕的 dragenter/leave，到目前为止，它在 Chrome/Safari 中运行良好，由[https://stackoverflow.com/a/10310815/698289](https://stackoverflow.com/a/10310815/698289)中的 draghover 插件提供，如下所示：

```
$.fn.draghover = function(options) {
    return this.each(function() {

        var collection = $(),
            self = $(this);

        self.on('dragenter', function(e) {
            if (collection.size() === 0) {
                self.trigger('draghoverstart');
            }
            collection = collection.add(e.target);
        });

        self.on('dragleave drop', function(e) {
            // timeout is needed because Firefox 3.6 fires the dragleave event on
            // the previous element before firing dragenter on the next one
            setTimeout( function() {
                collection = collection.not(e.target);
                if (collection.size() === 0) {
                    self.trigger('draghoverend');
                }
            }, 1);
        });
    });
};

function setText(text) {
    $('p.target').text(text);
}

$(document).ready(function() {
    $(window).draghover().on({
        'draghoverstart': function() {
            setText('enter');
        },
        'draghoverend': function() {
            setText('leave');
        }
    });
}); 
```

但是，当我拖动文本项时，Firefox 仍然给我带来问题，这里有一个小提琴来演示：http: [//jsfiddle.net/tusRy/6/](http://jsfiddle.net/tusRy/6/)

这是 Firefox 的错误还是可以用 JS 来驯服？或者是否有更强大的方法来执行所有这些？

谢谢！

*更新*：将小提琴更新为[http://jsfiddle.net/tusRy/6/](http://jsfiddle.net/tusRy/6/)以减少混乱。解释小提琴的预期行为：

*   将文件拖到窗口中，p.target 应该是黄色的“ENTER”。
*   将文件拖出窗口，p.target 应该是红色的“LEAVE”。
*   在窗口中放置一个文件，p.target 应该是红色的“LEAVE”。

在 Firefox 中，当您将文件拖到文本上时会触发 LEAVE 事件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-17T05:59:09.530

从 22.0 版开始，Firefox 仍在执行此操作。当您拖动文本节点时，它会触发两种事件：一种是事件目标`dragenter`和`dragleave`相关目标都是文本节点的父元素，另一种是目标是父元素，而相关目标是实际的文本节点（甚至不是正确的 DOM 元素）。

`dragenter`解决方法只是检查您的和处理程序中的这两种事件`dragleave`并忽略它们：

```
try {
    if(event.relatedTarget.nodeType == 3) return;
} catch(err) {}
if(event.target === event.relatedTarget) return; 
```

我使用 try/catch 块来检查 nodeType，因为偶尔会从文档外部（例如在其他 iframe 中）触发事件（莫名其妙地），并且尝试访问它们的 nodeType 会引发权限错误。

这是实现：http: [//jsfiddle.net/9A7te/](http://jsfiddle.net/9A7te/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-01T00:36:33.967

1) 你的 dropzone 应该只有一个子元素，它可能有你需要的一切。就像是

```
<div id="#dropzone">
    <div><!--Your contents here--></div>
</div> 
```

2）使用这个CSS：

```
#dropzone * { pointer-events: none; } 
```

您可能需要包括`:before`and`:after`因为`*`不适用于它们。

这应该足以让 drop 在 Firefox 和 Chrome 中工作。在您的示例中，添加以下内容就足够了：

```
body * { pointer-events: none; } 
```

在 CSS 的末尾。我已经在这里完成了：

*   [http://jsfiddle.net/djsbellini/eKttq/](http://jsfiddle.net/djsbellini/eKttq/)

其他示例：

*   [http://jsfiddle.net/djsbellini/6yZV6/1/](http://jsfiddle.net/djsbellini/6yZV6/1/)
*   [http://jsfiddle.net/djsbellini/yR8t8/](http://jsfiddle.net/djsbellini/yR8t8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T18:05:00.587

I came up with kind of a solution, yet to test on other browsers other than Chrome and FF but working so far. This is how the `setTimeout` looks now:

```
setTimeout( function() {
    var isChild = false;

    // in order to get permission errors, use the try-catch
    // to check if the relatedTarget is a child of the body
    try {
        isChild = $('body').find(e.relatedTarget).length ? true : isChild;
    }
    catch(err){} // do nothing

    collection = collection.not(e.target);
    if (collection.size() === 0 && !isChild) {
        self.trigger('draghoverend');
    }
}, 1); 
```

The entire code here - [http://jsfiddle.net/tusRy/13/](http://jsfiddle.net/tusRy/13/).

The idea is to check if the related tag is a child of the body, in which case we are still in the Browsers and the `draghoverend` event should be not triggered. As this can throw errors when moving out of the windows, I used a try method to avoid it.

Well, perhaps somebody with more skills on JS could improve this :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-15T15:48:19.770

我在这个 SO question 的非选定答案中找到了答案，询问关于[在子元素上的 dragleave 触发](https://stackoverflow.com/questions/10867506/dragleave-of-parent-element-fires-when-dragging-over-children-elements)。我有一个`<div>`有很多子元素的。只要页面上有 a ，半透明的覆盖`<span>`就会在 上可见。正如你所发现的，'dragover' 不像. 每当您将鼠标悬停在子元素上时都会触发。`<div>``dragenter``mouseover``dragleave`

解决方案？ [Dragout](https://github.com/dancork/jquery.event.dragout) 让`dragover`工作更像`mouseover`. 很短。

# batch-file - 如何从 Windows *.bat 文件发送电子邮件

> ID：14194325
> 
> 赞同：3
> 
> 时间：2013-01-07T10:46:57.527
> 
> 标签：batch-file, batch-processing

我正在编写一个 Windows 批处理来获取 cpu 利用率并检查条件值是否大于 80。如果 cpu util 大于 80，我应该收到一封邮件。

能否请你帮忙。我用`wmic cpu get "LoadPercentage" | find /V "LoadPercentage"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:02:18.493

您需要使用 3rd 方应用程序来发送电子邮件，您可以使用[blat](http://www.blat.net/)，然后批处理的其余部分将如下所示

```
for /f %%a in ('wmic cpu get "LoadPercentage" ^| find /V "LoadPercentage"') do (
set p=%%a
goto :BREAK
)

:BREAK
if %p% geq 80 blat -params 
```

您需要将 替换为`-params`的`blat`实际参数，您可以在[此处](http://www.blat.net/syntax/syntax.html)找到。

# php - 防止条带化新行

> ID：14194326
> 
> 赞同：0
> 
> 时间：2013-01-07T10:46:58.490
> 
> 标签：php, ftp, newline

在某些服务器的新行上被服务器剥离。

当用户从 FTP 客户端上传 php 脚本并且文件编码为 UTF-8 时，就会发生这种情况。

那么我怎样才能保持 UTF-8 编码但保持新行，因为如果我留下评论或没有用 {} 关闭 IF 语句，这会导致一些错误。

我使用的编辑器是 Webmatrix 和 Notepad++。

# apache-flex - 在Flex中更改错误状态下textInput的边框粗细？

> ID：14194333
> 
> 赞同：1
> 
> 时间：2013-01-07T10:47:14.340
> 
> 标签：apache-flex, border, thickness

我知道您可以更改 textinput 的 errorColor，但我正在寻找在错误时更改边框粗细的可能性。

细红线似乎不是很明显，我想更多地关注有错误的字段。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-02T18:17:18.057

要使用`borderThickness`a 的属性`TextInput`，您需要`borderStyle`设置为`solid`。

```
 <mx:TextInput
            id="input"
            borderColor="red"
            borderThickness=2
            borderStyle="solid"
            /> 
```

默认`borderThickness`为`1`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T10:50:57.440

`errorSkin=""`您可以使用in定义您自己的@custom 错误皮肤`textInput`。这`errorskin`在更多组件中可用。您可以在 adobe 的帮助页面中了解有关[errorskin 的更多信息](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/skins/spark/ErrorSkin.html)

可能这个链接会帮助你..

# google-apps-script - 如何使用客户端处理程序验证日期？

> ID：14194334
> 
> 赞同：0
> 
> 时间：2013-01-07T10:47:19.550
> 
> 标签：google-apps-script

我想知道是否有办法在客户端验证 DatePicker 的日期？我想将 DatePicker 的日期与现在的日期进行比较。

我看到它似乎只有`validateLength()`,`validateRange()`等。

但这些似乎不适用于日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:39:56.020

怕不是。要么使用服务器处理程序，要么在 HtmlService 中编写 UI，这样你就可以编写自己的客户端验证，而不受客户端处理程序的限制。编写自己的 ui 应该不会太麻烦，特别是如果您为小部件使用 jQuery UI 之类的东西 -[这是一个示例](https://stackoverflow.com/a/13977188/140278)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:19:54.580

一个`addValueChangeHandler`会工作...

```
function doGet() {
  var app = UiApp.createApplication();
  var date = app.createDateBox().setId('date').setName('date');
  var label = app.createLabel('').setId('status');
  var handler = app.createServerHandler('checkDate').addCallbackElement(date);
  date.addValueChangeHandler(handler)
  app.add(date).add(label);
  return app;
}

function checkDate(e) {
  var app = UiApp.getActiveApplication();
  var date = e.parameter.date;
  var today = new Date().getTime();
  if (date.getTime() < today)
    app.getElementById('status').setText('Date is before today.');
  else app.getElementById('status').setText('Date is after today.');
  return app;
} 
```

[试试看](https://script.google.com/macros/s/AKfycbwQYdmws9L-waDsgQ5Ji7o6KPnbHCdSrhBRxcvaHIMzvd18wp8/exec)。

# twitter - Twitter oauth 刷新令牌

> ID：14194337
> 
> 赞同：10
> 
> 时间：2013-01-07T10:47:41.160
> 
> 标签：twitter, twitter-oauth

我看过一些关于使用 oauth 进行身份验证的视频，并且已经完成了身份验证部分，但我有以下问题。

**Q1** - 访问令牌会过期吗？

**Q2** - 一旦 twitter 访问令牌过期，我是否必须让用户完成整个用户身份验证过程（用户再次验证应用程序）？

**Q3** - 一旦我们拥有访问令牌，是否可以离线访问用户的内容

好的，只是为了提供更多背景信息，这就是我所拥有的场景。基本上，我们的移动应用程序正在寻求与 twitter 集成，并且它有一个服务器端需要咀嚼用户的 twitter 提要。这就是我们正在考虑的方式。一旦用户使用移动平台对我们的应用程序进行身份验证，我们希望将此用户访问令牌存储在我们的服务器中，定期轮询他的提要，并对他的提要进行一些数据咀嚼。为此我们需要

- 离线访问用户数据 - 如果前一个令牌在服务器端过期，则无需用户干预即可获得新的访问令牌。

我们不想让用户再次验证我们的应用程序。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T16:37:09.347

OAuth 2 规范的编写方式是过期的访问令牌是受支持的用例。例如，在[https://www.rfc-editor.org/rfc/rfc6749](https://www.rfc-editor.org/rfc/rfc6749)中搜索“过期” 。

也就是说，[Twitter OAuth FAQ](https://dev.twitter.com/docs/auth/oauth/faq)指出：

> 我们目前不会使访问令牌过期。如果用户从他们的设置中明确拒绝您的应用程序，或者如果 Twitter 管理员暂停您的应用程序，您的访问令牌将无效。如果您的申请被暂停，您的申请页面上会显示一条说明它已被暂停。

澄清一下，Twitter 对 OAuth 的使用比 Facebook 或 Google 的要基本得多。有关详细信息和进一步帮助，Google 是您的朋友。;-)

# vb.net - VB.NET 表单在系统使用时不断消失

> ID：14194339
> 
> 赞同：1
> 
> 时间：2013-01-07T10:48:12.633
> 
> 标签：vb.net, winforms

我们有一个用于运营业务的“核心”系统，任何时候都有大约 15-18 人使用它。该程序是用 VB.NET 编写的，有大约 165 种形式。

它的工作方式是当用户运行程序时，系统会提示他/她登录，如果登录成功，则会显示带有多个菜单（客户、供应商......）的“主”表单。从那里，他们可以单击菜单，在“主”顶部打开另一个表单（“主”表单需要在后台可见，因为它显示与用户相关的信息，而他们在其他屏幕中）

我们遇到的问题是，如果用户在使用“核心”系统（Outlook、Word、Chrome 等等）时打开了其他程序并切换到另一个程序然后返回系统，它只会显示“主”表格和顶部打开的任何其他表格都会消失。我们解决这个问题的方法是切换回他们打开的其他程序并单击窗口右上角的最小化按钮，直到所有其他程序都被最小化，这只会让“核心”系统可见。然而，这对所有用户（包括我自己和其他开发人员）来说都是一种滋扰，我们真的需要解决这个问题，以让员工开心:)

我将不胜感激任何有助于我们解决此问题的正确方向的建议或指示，如果您需要更多信息，请随时询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:08:55.737

似乎您正在创建`ChildForm`from the`MainForm`但它`ChildForm`本身正在使用`Me.ShowDialog()`. 您可能应该尝试的是显示表单`MainForm`并将其`MainForm`作为父级传递。这应该保持表单与其父级和顶部相关联。例如：

```
childForm.showDialog(Me) 
```

`Me`在哪里`MainForm`。[这](http://msdn.microsoft.com/en-us/library/w61zzfwe.aspx)是该方法的文档。

这是重要的部分：

> 所有者类型：System.Windows.Forms.IWin32Window
> 
> 实现 IWin32Window 的任何对象，该对象表示将拥有模式对话框的顶级窗口。

那有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:00:44.437

更改代码以显示对话框会稍微改变代码的行为，例如执行中的 main 将一直保持到您关闭子窗体

但是你可以只使用显示为孩子（不是对话框）

```
childForm.show (Me) 
```

这不会改变任何东西，除非您单击主窗体时它会在其上显示其整个子窗体。

# jquery - arshaw fullcalendar ：禁用月视图中的单击事件以及议程周和议程日中的全天

> ID：14194343
> 
> 赞同：0
> 
> 时间：2013-01-07T10:48:25.610
> 
> 标签：jquery, fullcalendar

我想在全天禁用点击事件，并希望用户能够在时间段内点击，但不能在全天时间段内点击。

为此：在月视图中：它不应该是可点击的，在议程周和议程日中相同，allDay 的顶部位置不应该是可点击的，但日历的其余部分必须是可以点击的，因为它对我有用。

简而言之，allDay 插槽必须是不可点击的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:23:39.627

我认为[这](http://arshaw.com/fullcalendar/docs/mouse/dayClick/)是您需要的文档中的页面。请参阅下面的示例。

```
$('#calendar').fullCalendar({
    dayClick: function(date, allDay, jsEvent, view) {
        if(allDay){
            alert('That is not a valid time slot!');
            return;
        } else {
            // run your code here if a slot with valid time was selected.
        }
    }
}); 
```

# visual-studio-2012 - 如何为打字稿代码窗口分配键盘快捷键？

> ID：14194344
> 
> 赞同：1
> 
> 时间：2013-01-07T10:48:27.077
> 
> 标签：visual-studio-2012, typescript

在 VS2012（安装了 ts 扩展名）中，打字稿文件（.ts）似乎不被识别为代码窗口

意思是，如果您专注于另一个窗口，按 F7 不会切换到打字稿窗口以获得焦点。

有谁知道我可以创建一个自定义键盘快捷键覆盖以允许我切换到 .ts 文件？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:25:11.287

我能想到的导航回 TypeScript、JavaScript、CSS 和其他未被归类为“查看代码”的文件的代码文件的唯一方法是：

使用`CTRL`+ `Tab`- 这将打开一个打开的文件列表。从这里您可以选择要显示的文件。

如果您想执行与“查看代码”相同的操作，这实际上是一个方便的快捷方式，但不直接转到当前的“顶部”代码文件 - 所以值得了解 - 即使它不会那么流畅作为您的 F7 快捷键。

如果您想像 F7 一样使用它，只需按`CTRL`+`Tab`然后松开 - 默认情况下会选择“顶部”文件。

# java - 从圆上的中心点找到角度

> ID：14194345
> 
> 赞同：0
> 
> 时间：2013-01-07T10:48:29.003
> 
> 标签：java, android, math, geometry, angle

> **可能重复：**
> [从圆心查找点的角度](https://stackoverflow.com/questions/8968500/find-angle-of-a-point-from-center-of-circle)

想象一个圆，中心点是固定的，圆顶部的点也是固定的。我想要的是在圆周围（或圆外）的任何地方给出第三个点，并从 0-359 获得从中心到顶点线的度数。（我实际上绘制了一张很好的图片说明，但我是新的，不能发布它）

为了提供一些背景，圆圈是一个小行星，我想在表面上放置一个小建筑物，建筑物的底部在切线处。我需要我的建筑位图的旋转角度。

编辑：感谢您的帮助，尽管我仍在努力解决这个问题。我想知道我正在使用android并且y0坐标在顶部是否相关？在其他平台上是否相反？会不会影响计算？

解决方案：因为我在android中并且y坐标是从上到下计算的，所以我不得不更改a - witha +

```
degrees =  Math.atan2(x - centerX, -y + centerY);
// and to make it count 0-360
if (degrees < 0) {degrees += 2 * Math.PI;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:51:44.553

用于`Math.atan2()`从东方获取以弧度为单位的角度，然后根据需要进行旋转和转换。

请注意，正如您所料，它`atan2`被定义为`atan2(y, x)`NOT 。`atan2(x, y)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:56:45.510

获取中心到点的水平距离和垂直差，一个除以另一个，然后将结果传递给方法[`Math.asin(double)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#asin%28double%29)。

结果将以[弧度为单位](http://en.wikipedia.org/wiki/Radian)的角度。当你需要它的程度时，你可以使用方法[`Math.toDegrees(double)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#toDegrees%28double%29)。不过，我知道的大多数 API 更喜欢弧度。

# iphone - 可达性和通知中心

> ID：14194356
> 
> 赞同：3
> 
> 时间：2013-01-07T10:49:07.060
> 
> 标签：iphone, objective-c, ios

我需要我的应用程序不断监听`reachability`更改并根据 更新我的视图`network status`，我正在考虑使用`notificationcenter`，并让我的所有视图监听更改，但我不知道如何实现这一点。

我知道如何使用`notificationcenter`，`Reachability`但我似乎无法找到实现`Reachability check`.

我应该在哪里检查网络变化，并通知对方`ViewControllers`？

我不认为`AppDelegate`是正确的地方，如果我把`Reachability`检查放在 ViewController 中，只要它`ViewController`是“活动的”，网络检查就会被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:03:01.257

创建一个“单例”`Reachability`并在应用启动时对其进行初始化。

让单例定期检查可达性，例如使用`NSTimer`. 然后它可以通知注册到的任何其他活动视图`NSNotificationCenter`。

```
// AppDelegate.m: 

@property (nonatomic, strong) Reachability *reachability;

// in applicationDidFinishLaunching...
self.reachability = [[Reachability alloc] init]; 
```

和

```
// Reachability.m

-(id)init {
   self = [super init];
   if (self) {
     [self setupTheTimer];
   }
   return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:00:14.800

我将创建一个`NSObject`处理所有网络检查的单例类。

将其命名为 NetworkChecker。

为回调创建一个委托，例如`NetworkCheckerDelegate`使用如下方法：

```
@protocol NetworkCheckerDelegate <NSObject>

-(void)networkStatusUpdated:(NSInteger)networkStatus;

@end

@interface NetworkChecker : NSObject
{
    id<NetworkCheckerDelegate> networkDelegate;
} 
```

添加一个方法来启动网络检查并向其添加一个委托，例如：

```
+(void)updateNetworkWithDelegate:(id<NetworkCheckerDelegate>)delegate
{
    networkDelegate = delegate;

    //Set timer to do Reachability checks
}

-(void)timerIsCompleted
{
    //Do Reachability check

    if( newNetworkState != oldNetworkState ){
        [networkDelegate networkStatusUpdated:newNetworkState];
    }
} 
```

然后在每个`ViewController`你需要它的地方你可以做（​​在 viewDidLoad 中做这个）：

```
[NetworkChecker updateNetworkWithDelegate:self]; 
```

并在网络状态发生变化后执行以下操作：

```
-(void)networkStatusUpdated:(NSInteger)networkStatus 
```

# c# - 使用 TCP 套接字将文件发送到多个客户端

> ID：14194359
> 
> 赞同：0
> 
> 时间：2013-01-07T10:49:20.470
> 
> 标签：c#, .net, sockets, filestream

我正在开发一个 Web 应用程序，它等待 N（例如，大约 5 个）用户通过 TCP 套接字连接到 Web 服务。服务器跟踪连接的套接字数量，一旦达到 N，他就会同时向所有套接字发送一个（单个）文件，比如最大 2MB。这里的重点是时间——他们都应该同时接收文件，而不是一个接一个。

作为 c# 和套接字编程的新手，我想知道在这种情况下最好的方法是什么？我想到了以下几点：服务器（异步）接收套接字连接，一旦达到 N，循环遍历文件中的所有字节，并在每次迭代中向每个客户端发送一个 Kbyte（或者可能更少？）已连接 - 在我看来，这是同时发送文件的最接近的方式。

我对如何实现这一点有点困惑。任何帮助都会很棒。谢谢

编辑：通过同时接收我的意思是，从技术上讲，我不希望服务器将文件发送到第一个客户端，然后发送到第二个客户端，然后发送到第三个等等，而是一次将其发送给所有客户端，一旦出服务器，就不在我手中了！假设没有网络问题，并且客户端都非常接近（物理上），他们应该或多或少地同时接收文件。也许解决方案比我想象的要简单......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:18:58.183

您已经计划异步接受套接字连接，并且由于回调发生在单独的线程上，您可以简单地使用异步回调：

*   接受传入的套接字连接
*   再次调用 BeginAccept()（在监听套接字上）
*   发送文件
*   关闭连接（先前接受的套接字）

如果多个客户端同时连接，这将导致多个线程几乎同时同时发送文件。

您的文件可能会同时被多个线程访问，因此您必须例如使用`FileShare.Read`.

希望这会有所帮助，我忽略了“N 个同时客户端”，因为我知道这并不是真正的要求。

# android - 从 Android Mobile 发送的请求在服务器上没有得到任何响应

> ID：14194361
> 
> 赞同：-1
> 
> 时间：2013-01-07T10:49:27.723
> 
> 标签：android, web-services, rest, httprequest, httpresponse

我是 android 世界和移动应用程序服务器端编程的新手。我遇到了一个问题：-当从任何 android 手机以 url 的形式向我发送请求时，我的服务器（Apache tomcat）没有找到关于该请求的任何响应。

我正在客户端（Android Mobile）中编写以下代码：-

```
public static void requestForDepartment()
{
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    String iName = null;
    String iprice = null;
    String idPrice = null;
    nameValuePairs.add(new BasicNameValuePair("storeId","s0001"));

    try {
        System.out.println("inside server try 1");
        // start - line is for sever connection/communication
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new
          HttpPost("http://192.168.1.3:8080/xybuy/rest/webservices/requestDepatment");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        // end - line is for sever connection/communication
        InputStream is = entity.getContent();
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection "
                + e.toString());
    }
} 
```

192.168.1.3:8080 是我的端点。这是我在服务器端的 web.xml 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
        <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"            xmlns="http://java.sun.com/xml/ns/javaee"    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID"    version="2.5">
  <display-name>FirstProject</display-name>
  <welcome-file-list>
  <welcome-file>index.html</welcome-file>
  <welcome-file>index.htm</welcome-file>
  <welcome-file>index.jsp</welcome-file>
  <welcome-file>index2.jsp</welcome-file>
  </welcome-file-list>
 <servlet>
 <servlet-name>ServletAdaptor</servlet-name>
 <servlet-class>
        com.sun.jersey.server.impl.container.servlet.ServletAdaptor</servlet-  class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>ServletAdaptor</servlet-name>
<url-pattern>/REST/*</url-pattern>
</servlet-mapping> 
```

实际负载可以是 JSON 或 XML。服务器是宁静的网络服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:42:51.320

@Eugene 是对的，但您的问题完全不清楚。你说它的xml和json。这个怎么可能 ？如果它是 xml，那么你需要一个“application/xml”作为内容类型，如果它是 json，那么你的 content-type = “application/json”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:17:43.157

1）尝试在您的请求中添加标头，例如

```
httppost.setHeader("Content-Type", "application/x-www-form-urlencoded"); 
```

java 默认会添加一些头文件，但有时这还不够。

2) 如果您从本地 PC 在 java 项目中运行此代码，它是否有效？

# c# - 如何在 wp7 中使用 javascript 为 Web 浏览器隐藏 div

> ID：14194362
> 
> 赞同：2
> 
> 时间：2013-01-07T10:49:31.343
> 
> 标签：c#, javascript, windows-phone-7, browser

我正在开发用于学习的简单 wp7 应用程序。我想在 Windows Phone 7 应用程序中执行以下任务。

导航到网页（http://some-url/）并能够加载此页面（使用 webBrowser）我不想显示标题 div（在页面顶部）。我如何为此 Web 浏览器页面调用 java 脚本（InvokeScript）

这个 html 网页不是我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:07:38.247

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title></title>
    <script type="text/javascript" >
    function HideDiv(id) {
        document.getElementById(id).style.display = 'none';
    }
    function ShowDiv(id) {
        document.getElementById(id).style.display = 'block';
    }
    </script>
 </head>
<body>
    <div id="hide-me">Hide me !</div>
</body>
</html> 
```

使用你是 WebView ：

*隐藏 div ：*

```
wv.InvokeScript("HideDiv", new string[] { "hide-me" }); 
```

*显示 div ：*

```
wv.InvokeScript("ShowDiv", new string[] { "hide-me" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:59:12.283

您可以尝试使用 jQuery。例如，如果标头 id 是 #header，则：

```
$("#header").hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T06:10:46.057

以上@Aure77 ans 工作正常，但应用调用脚本函数差异

你可以使用`InvokeScript`函数来删除或隐藏我也很难解决这个问题我认为你正在使用`InvokeScript`，这`PhoneApplicationPage_Loaded`会`webBrowser1_Navigated`引发错误

并且您可以在另一个事件处理程序中使用此方法，例如`MainPage_MouseLeftButtonDown`，`webBrowser1_LoadCompleted`代码是

```
private void webBrowser1_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
    {
        webBrowser1.InvokeScript("eval", "document.getElementsByTagName('your_div_name')[0].style.display = 'none';");
    } 
```

这对我来说很好:)试试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:01:36.217

使用 InvokeScript：

从 wp 应用程序调用 javascript 函数的代码

```
webBrowser1.InvokeScript("hideDiv",""); 
```

javascript代码

```
 function hideDiv(){
    document.getElementById('Your_Div_ID').style.display='none';
    } 
```

# sql - 架构：在 SQL 中查询过滤数据集的最佳方法是什么？

> ID：14194363
> 
> 赞同：0
> 
> 时间：2013-01-07T10:49:35.120
> 
> 标签：sql, sql-server, stored-procedures, parameters

在 SQL 中查询过滤数据集的最佳方法是什么？

我想象了两种解决方案，我想知道一种和另一种的优点和不便之处。

**解决方案 1**

我使用参数中的过滤器创建了一个独特的过程

```
CREATE PROCEDURE [dbo].[usp_GetByFilter] 
(
    -- Pagination
    @p_Offset                   int,
    @p_FetchNext                int,

    -- Filters
    @p_Param1                   nvarchar(255),
    @p_param2                   uniqueidentifier,
    @p_param3                   uniqueidentifier
) 
```

**解决方案 2**

我通过参数创建一个过程

```
CREATE PROCEDURE [dbo].[usp_GetByParam1] 
(
    -- Pagination
    @p_Offset                   int,
    @p_FetchNext                int,

    -- Filters
    @p_Param1                   nvarchar(255)
)

CREATE PROCEDURE [dbo].[usp_GetByParam2] 
(
    -- Pagination
    @p_Offset                   int,
    @p_FetchNext                int,

    -- Filters
    @p_param2                   uniqueidentifier
)

CREATE PROCEDURE [dbo].[usp_GetByParam3] 
(
    -- Pagination
    @p_Offset                   int,
    @p_FetchNext                int,

    -- Filters
    @p_param3                   uniqueidentifier
) 
```

**解决方案 3**

另一种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:06:13.433

我认为解决方案 1 是最好的：它允许您使用一个或多个参数进行过滤：您可以为参数设置默认值，或者在您不想按某个参数进行过滤时传递空值。那么过滤器查询可以这样写：

```
SELECT
    --your output
FROM
    Table t
WHERE 
    --some conditions AND
( @p_Param1 is null OR t.column1 = @p_Param1 ) AND
( @p_Param2 is null OR t.column2 = @p_Param2 ) AND
( @p_Param3 is null OR t.column3 = @p_Param3 ) 
```

如果您想添加更多过滤器选项，或者例如同时按参数 2 和 3 过滤，解决方案 2 将需要大量新过程。

# java - SSLHandshake 期间如何处理警告和致命警报

> ID：14194366
> 
> 赞同：0
> 
> 时间：2013-01-07T10:49:59.190
> 
> 标签：java, ssl

我正在使用 SSL 连接，对于某些用途，我需要找出从 Java 库中抛出的警报类型及其严重性。

```
sslException.getAlertLevel() or sslException.getAlertSeverity() 
```

就像严重程度是**致命**的一样，我需要采取一些措施，但我找不到从哪里可以获得这些信息。

**编辑：**

RFC 中为 TLS 定义了两个警报级别，它们是**警告**级别和**致命**级别，我需要找出它是哪个级别。

此外，如果所有都是致命级别，我还需要找出致命警报的类型。任何帮助，将不胜感激。

也许问题没有被正确提出或形成，但是如果在握手期间有一些警告警报怎么办？

[java.dzone.com/articles/how-analyze-java-ssl-errors](http://java.dzone.com/articles/how-analyze-java-ssl-errors%20this%20link%20shows%20in%20the%20Certificate%20expiration%20section%20that%20if%20the%20certificate%20are%20expired%20still%20in%20that%20case%20java%20throws%20SSL%20Exception%20but%20it%20is%20a%20warning%20according%20to%20RFC.)此链接在证书过期部分显示，如果证书仍然过期，在这种情况下，java 会抛出 SSL 异常，但它是根据 RFC 的警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:31:16.440

*除了`SSLPeerUnverifiedException`, ^(1之外，)*所有*SSLExceptions 都是致命的，除了 SocketTimeoutException 和所有其他 IOExceptions 之外，所有 SocketExceptions 都是致命的。*

 *> 1\. `SSLPeerUnverifiedException` 在你是服务器并且已经请求但不需要客户端证书的情况下是非致命的。*

# linux - 如何查找没有访问权限的目录？

> ID：14194369
> 
> 赞同：0
> 
> 时间：2013-01-07T10:50:31.797
> 
> 标签：linux, shell, unix, csh

> **可能重复：**
> [使用 `find -perm` 查找未设置权限的时间](https://stackoverflow.com/questions/4382599/using-find-perm-to-find-when-a-permission-is-not-set)

我有一个目录列表，其中一些目录没有访问权限。如何创建一个数组，使其仅包含使用 csh 可访问的目录。

我的代码如下所示：

```
set array = (`find $path_to directories -type d -name "*_xyz"`) 
```

它为我提供了与 _xyz 扩展名匹配的整个目录列表，包括没有访问权限的目录，但我不希望它们在列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:03:56.427

```
set array = (`find . -type d -perm /g+x,o+x -name "*_xyz"`) 
```

使用该 -perm 参数，它仅搜索所有者或组可访问的文件夹

# selenium - Ghostdriver 实际性能增益

> ID：14194371
> 
> 赞同：2
> 
> 时间：2013-01-07T10:50:51.220
> 
> 标签：selenium, webdriver, functional-testing, headless

我最近从 FirefoxDriver 切换到 GhostDriver。

我的测试套件（大约 150 个端到端测试）过去需要 25 分钟才能运行。现在使用 Ghostdriver 需要 23 分钟。因此，我总共获得了 2 分钟的运行时间。

这是一个进步，但没有我预期的那么大。这么低的收益正常吗？或者我应该期待从切换到无头测试运行器的时间更长吗？

我正在使用 .NET 版本的 webdriver/ghostdriver。

我真的很想将这个“基准”与最近切换到 GhostDriver 的任何人进行比较

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:00:21.973

我觉得这个问题有点模糊。例如，如果您的测试包含大量`Thread.sleep()`调用，那么测试将不会有任何改进。

我的测试使用 ChromeDriver，我没有考虑切换。但我觉得那个简单的开关不会给你带来太多好处，也许还可以考虑重构你的代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T12:23:45.890

GhostDriver 不会比 ChromeDriver 提供任何性能提升，因为它唯一没有做的就是在屏幕上渲染图形，Chrome 使用图形驱动程序而不是 CPU。

我看到的唯一好处是不会弹出浏览器窗口，也许是在 CI 服务器上运行时。

我的测试运行的一些统计数据在我的博客上：[http ://watirmelon.com/2013/02/05/watir-webdriver-with-ghostdriver-on-osx-headless-browser-testing/](http://watirmelon.com/2013/02/05/watir-webdriver-with-ghostdriver-on-osx-headless-browser-testing/)

# mysql - 从仅包含 1 列的表中删除重复行？

> ID：14194373
> 
> 赞同：1
> 
> 时间：2013-01-07T10:51:05.473
> 
> 标签：mysql, sql, duplicate-removal, delete-row

我相信我的问题是在 SO 上提出的，但我没有找到答案。

有一个`mytable`带有一列的 mysql 表`mycolumn`。

从表中删除重复项的 mysql 查询是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:57:22.463

只有一个没有 pk 的列或您可以用来查看它们是否不同的另一列？如果是，这是一个不好的做法。考虑为每条记录插入一个新列（数字）并插入 id，然后您可以尝试以下查询：

```
delete from table 
where counter > 1 and inner_query.mycolumn = table.mycolumn and inner_query.col_id = table.col_id from 
(select mycolumn, col_id, count (mycolumn) counter  
 from table group by  mycolumn
) inner_query 
```

比，你可以添加一个主键

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:59:14.417

只要没有触发器或外键，这是一种解决方法。没有测试，因为我在我的手机上，但应该可以工作。在此之后，可能会在 mycolumn 上创建一个唯一索引以防止重复。

```
Create table _mytable
Select distinct mycolumn from mytable;

delete from mytable;

Insert into mytable(mycolumn)
Select mycolumn from _mytable;

Drop table _mytable; 
```

# diagram - 在 GMF 图编辑器中禁用模型元素的属性

> ID：14194376
> 
> 赞同：1
> 
> 时间：2013-01-07T10:51:08.147
> 
> 标签：diagram, emf

我是 GMF/EMF 的新手，我有以下问题：我正在设计一个模型编辑器并希望限制一些用户操作。在“属性”视图中，图表元素具有某些属性。现在我希望用户无法更改此视图中的某些属性，但该属性必须保留且不应被删除。是否有可能隐藏或禁用组合框/文本输入或使字段只读？

如果你能帮助我，我会非常高兴。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:50:00.677

是的，您可以通过*生成器模型*文件 ( *.genmodel* ) 控制模型的生成代码。

任何模型元素属性的属性之一就是您正在寻找的，即*Property Type*：

> 此功能是否应包含在属性表中以及是否应可编辑。

可能的值是不言自明的：无、只读和可编辑。

# youtube - Video.js youtube 视频

> ID：14194379
> 
> 赞同：7
> 
> 时间：2013-01-07T10:51:22.533
> 
> 标签：youtube, html5-video, video.js

我无法让 youtube 视频与 video.js 一起使用

我在头部添加：

```
<link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
<script src="http://vjs.zencdn.net/c/video.js"></script> 
```

然后在体内：

```
<video id="example_video_1" class="video-js vjs-default-skin" controls preload="none" width="640" height="360"
  data-setup='{"techOrder":["youtube","html5"],"ytcontrols":false}'>
<source src="http://www.youtube.com/watch?v=qWjzVHG9T1I" type='video/youtube' /> 
```

但我有一个黑色 div（在最新的 Chrome 和 FF 中测试）。我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-11T03:34:46.440

上面引用的拉取请求已关闭，其他人接管并使其成为[插件](https://github.com/eXon/videojs-youtube)，可从[video.js 插件 wiki](https://github.com/videojs/video.js/wiki/Plugins)

你需要那个（或类似的）插件来播放 youtube 视频。这里有一个适用于最新 API 的示例：[使用 video.js 包装器启用 youtube 播放](https://stackoverflow.com/questions/17546633/enabling-youtube-playback-with-video-js-wrapper/17584510#17584510)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T14:00:59.717

添加 Youtube 技术功能的 Pull Request 似乎尚未合并。

虽然它现在变老了：[https](https://github.com/zencoder/video-js/pull/157) ://github.com/zencoder/video-js/pull/157 我想知道我们是否能很快拥有这个：（

# android - onAudioFocusChange 没有被调用

> ID：14194381
> 
> 赞同：0
> 
> 时间：2013-01-07T10:51:26.947
> 
> 标签：android, android-mediaplayer, android-audiomanager

我正在创建一个通过流媒体播放歌曲的应用程序。移动到后台时，我的应用程序将继续播放，这没问题。但是，当其他一些应用程序（如设备的音乐播放器）或者可能是当我当时正在播放来自 youtube 的视频时，两个媒体都重叠并且它不会进入 onAudioFocusChange() 相同的代码：

```
public class sampleMediaPlayer extends Activity implements AudioManager.OnAudioFocusChangeListener, OnClickListener {
private MediaPlayer mediaPlayer;
private String myURL; 
AudioManager audioManager;
Button buttonStart, buttonStop;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        buttonStart = (Button) findViewById(R.id.buttonStart);
        buttonStop = (Button) findViewById(R.id.buttonStop);

        buttonStart.setOnClickListener(this);
        buttonStop.setOnClickListener(this);
        audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

    }

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

        Log.e("123", "Inside sampleMediaPlayer");

}
    @Override
        protected void onStop() {
            // TODO Auto-generated method stub
            super.onStop();

        }

    @Override
    public void onAudioFocusChange(int focusChange) {
        // TODO Auto-generated method stub

        Log.e("123", "focusChange============>>>>"+focusChange);
         switch (focusChange) {
            case AudioManager.AUDIOFOCUS_GAIN:
                Log.e("123", "focusChange======AUDIOFOCUS_GAIN======>>>>"+focusChange);
                requestFocus();
                // resume playback
                //AUDIOFOCUS_GAIN (1) : audio focus, or a request of audio focus, of unknown duration.
                if (mediaPlayer == null)
                    initMediaPlayer();
                else if (!mediaPlayer.isPlaying()) 
                    mediaPlayer.start();
                mediaPlayer.setVolume(1.0f, 1.0f);

                break;

            case AudioManager.AUDIOFOCUS_GAIN_TRANSIENT:
                //AUDIOFOCUS_GAIN_TRANSIENT (2) : temporary gain or request of audio focus, e.g. event notification
                Log.e("123", "focusChange=======AUDIOFOCUS_GAIN_TRANSIENT=====>>>>"+focusChange);

//                  requestFocus();
//                  if (!mediaPlayer.isPlaying()) 
//                      mediaPlayer.start();

                break;

            case AudioManager.AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK:
                //AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK (3) : temporary request of audio focus, anticipated to last a short amount of time,
                //and where it is acceptable for other audio applications to keep playing after having lowered their output level, 
                //e.g. playback of driving directions where playback of music in the background is acceptable.
                Log.e("123", "focusChange=======AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK=====>>>>"+focusChange);
//                  requestFocus();
                break;

            case AudioManager.AUDIOFOCUS_LOSS:
                // Lost focus for an unbounded amount of time: stop playback and release media player
                // -1
                Log.e("123", "focusChange=====AUDIOFOCUS_LOSS=======>>>>"+focusChange);
                if (mediaPlayer.isPlaying())
                    mediaPlayer.stop();
                mediaPlayer.release();
                mediaPlayer = null;
                abandonFocus();
                break;

            case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT:
                Log.e("123", "focusChange======AUDIOFOCUS_LOSS_TRANSIENT======>>>>"+focusChange);
                // Lost focus for a short time, but we have to stop
                // playback. We don't release the media player because playback
                // is likely to resume
                //-2
                if (mediaPlayer.isPlaying()) 
                    mediaPlayer.pause();
                abandonFocus();
                break;

            case AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK:
                Log.e("123", "focusChange======AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK======>>>>"+focusChange);
                // Lost focus for a short time, but it's ok to keep playing
                // at an attenuated level
                //-3
                if (mediaPlayer.isPlaying()) 
                    mediaPlayer.setVolume(0.1f, 0.1f);
                break;
        }
    }

    @SuppressLint("NewApi")
    private void initMediaPlayer() {
        // TODO Auto-generated method stub
        if(mediaPlayer==null)
            mediaPlayer =  new MediaPlayer();
        //mediaPlayer =  MediaPlayer.create(this, R.raw.braincandy);

        try {
            if(!mediaPlayer.isPlaying()){
                mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                myURL = "http://202.191.185.2:10406/thathi_thathi.mp3";
                mediaPlayer.setDataSource(myURL);
                mediaPlayer.prepare();
            }

            int result = audioManager.requestAudioFocus(this, AudioManager.STREAM_MUSIC, AudioManager.AUDIOFOCUS_GAIN);
            boolean flag    =   requestFocus();

            Log.e("123", "result===============>>>"+result);
            if (result != AudioManager.AUDIOFOCUS_REQUEST_GRANTED && flag==true) {
                // could not get audio focus.
                Toast.makeText(this, "AudioFocus Request Failed", Toast.LENGTH_SHORT).show();
            }else if(result == AudioManager.AUDIOFOCUS_REQUEST_GRANTED){
                Toast.makeText(this, "AudioFocus Request Granted", Toast.LENGTH_SHORT).show();
            }

        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            Log.e("123", "Illegal Argument Exception");
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            Log.e("123", "Security Ecxeption");
            e.printStackTrace();
        //}
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.e("123", "IO Exception----------");
            e.printStackTrace();
        }

    //  setAudioManager();

        mediaPlayer.start();
        Log.e("123", "Media Player started");
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

        switch (arg0.getId()) {
        case R.id.buttonStart:

          Log.d("123", "onClick: starting srvice");
//            startService(new Intent(this, MyService.class));
        //  afh.requestFocus();
          requestFocus();
          initMediaPlayer();

          break;
        case R.id.buttonStop:
          Log.d("123", "onClick: stopping srvice");
//            stopService(new Intent(this, MyService.class));
          //afh.abandonFocus();
          if(mediaPlayer != null){
          mediaPlayer.stop();
          mediaPlayer.release();
          abandonFocus();
          }
          break;
        }

    }

    public boolean requestFocus() {
        return AudioManager.AUDIOFOCUS_REQUEST_GRANTED ==
                audioManager.requestAudioFocus(this, AudioManager.STREAM_MUSIC,
            AudioManager.AUDIOFOCUS_GAIN);
    }

    public boolean abandonFocus() {
        return AudioManager.AUDIOFOCUS_REQUEST_GRANTED ==
                audioManager.abandonAudioFocus(this);
    }
} 
```

# html - 如何在 Twitter 的 Bootstrap 模式上设置元素？

> ID：14194382
> 
> 赞同：0
> 
> 时间：2013-01-07T10:51:31.137
> 
> 标签：html, twitter-bootstrap, overlay, modal-dialog, z-index

这是我的 Twitter 引导模式的基本 HTML：

```
<div id="editModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
    <form class="form-horizontal updater" data-type="undefined" data-id="undefined">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="modalLabel">Edit Content</h3>
        </div>
        <div class="modal-body"></div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-primary">
                <strong>Save Changes</strong>
            </button>
            <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
        </div>
    </form>
</div> 
```

正如我的 Firebug 所说，该`modal`课程具有：`z-index: 1050`. 我试图添加这样的元素：

```
<div class="width: 1000px height: 200px; background: #f00; z-index: 9999;">hi there</div> 
```

进入：

```
<div class="modal-body"></div> 
```

但它不起作用。

那么，如何在所有这些 Bootstrap 组件上设置一个元素呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T12:56:04.357

您已经为类属性提供了内联样式`<div class="width: 1000px height: 200px; background: #f00; z-index: 9999;">hi there</div>`。尝试将属性更改`class`为`style`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T08:59:20.107

您可能希望`position:fixed`在模式顶部和`<style> .modal{z-index:4} </style>`代码中添加所需的 div 的 css。希望这可以帮助。

或者，您可以在另一个模态之上加载一个模态，您也可以参考这个示例以及[Modal on top of Modal](https://stackoverflow.com/a/41159276/7165943)。

或者最后你可以做一件事，你可以通过使用 jquery 或 js （这就是我所做的）来隐藏模式`$("#myModal").hide()`，`$("#yourdiv").show()`这完全解决了整个 z-index 问题。

# c# - 我的方法总是返回false，为什么？

> ID：14194387
> 
> 赞同：-1
> 
> 时间：2013-01-07T10:51:46.753
> 
> 标签：c#, linq, entity-framework

```
public bool IsUser(string username)
    {
        bool user = false;
        using (var client = new datingEntities())
        {
            var result = from x in client.Person
                         select x;

            foreach (var item in result)
            {
                if (item.Username == username)
                {
                    user = true;
                }
            }
        }
        return user;
    } 
```

我使用这种方法从我拥有的 SQL 数据库中获取数据。数据库连接没有问题，只是即使数据库中存在参数username，它总是返回false（仔细检查数据库中的数据）。我之前尝试过这种方法，然后它起作用了，但它没有。我正在对我的数据库使用实体框架

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:56:21.127

这将做：

```
public bool IsUser(string username)
{
    using (var entities = new datingEntities())
    {
        return entities.Person.Any(p => p.Username == username);
    }
} 
```

现在您请求所有用户实体并遍历它们以查看用户是否与查询的用户名匹配。您应该让 Entity Framework 或 LINQ 编写查询，如上所示。

至于你的功能不起作用的原因：设置一个断点，找出是否找到任何用户。我们无法为您调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:57:07.023

使用“ToUpper()”

```
if (item.Username.ToString().ToUpper() == username.ToUpper())
{
 user = true;
} 
```

**[编辑]**

或使用“相等”

```
item.Equals(username, StringComparison.OrdinalIgnoreCase) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:55:25.820

我的回答不如评论中提到的其他人好，但我将其留在这里以供参考。

~~我不知道为什么它返回 false 但你想要实现的通常是通过以下方式完成的：~~

 ~~```
public bool IsUser(string username)
{
    using (var client = new datingEntities())
    {
        User user = client.Persons.SingleOrDefault(u => u.Username == username);
        return user != null;
    }
} 
```~~ 

~~这种方式比您的方式高效得多，因为您首先从数据库中提取所有用户记录，然后遍历它们以找到用户名等于提供的字符串的一个用户。我的方法尝试获取用户名等于提供的字符串的一条记录，如果不存在这样的记录，我返回 false，否则返回 true。~~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T10:56:05.700

我会将 item.UserName 和 username 值都转换为小写并以这种方式进行比较。这看起来更可靠。此外，您的 linq 查询可以更改以避免循环，如下所示：

```
var result = from x in client.Person
             where x.UserName.ToLower() == userName.ToLower()
                         select x; 
```

# html - CSS下拉菜单定位

> ID：14194388
> 
> 赞同：2
> 
> 时间：2013-01-07T10:51:46.777
> 
> 标签：html, css, drop-down-menu, menu, menubar

我有一个用无序列表构建的菜单栏。每个列表项都有一个子菜单，鼠标悬停时会显示。

```
<div class="MainContainer">
<ul class="menu">
  <li class="menuTab">Menu One
    <div class="menuDropDown">

      <div class="menuDropDownColumn">  
        <h2><a href="#">Drop Down Heading</a></h2>
        <ul>
          <li><a href="#">Menu Item</a></li>
          <li><a href="#">Menu Item</a></li>
          <li><a href="#">Menu Item</a></li>
        </ul>
      </div>

      <div class="menuDropDownColumn">
        <h2><a href="#">Drop Down Heading</a></h2>
        <ul>
          <li><a href="#">Menu Item</a></li>
          <li><a href="#">Menu Item</a></li>
          <li><a href="#">Menu Item</a></li>
        </ul>
      </div>

    </div>
  </li>
</ul>
</div> 
```

CSS：

```
.menuDropDown {
  position: absolute;
  left:-999em; /* Hides the dropdown until menuTab mouseover */
  z-index: 1;
}

.menuTab:hover .menuDropDown {
  left:inherit; /* Shows the sub-menu */ 
} 
```

[jsFiddle 上的完整标记](http://jsfiddle.net/hcMBF/)

我在解决一些显示问题时遇到了问题。我希望将子菜单的位置限制在“mainContainer”div 中，并尽可能将子菜单与父菜单栏项的水平中心对齐。例如，“菜单一”和“菜单七”由于父 div 的约束，无法与父 div 水平对齐。

![菜单项 7 的示例图片](../Images/51eecc47d3a81b5fd9e6b4c03a9a7c50.png) ![菜单项 3 的示例图片](../Images/b0ac3603c95a96da9016e5cba2b70b2e.png)

有没有一种方法可以在不诉诸 JavaScript 的情况下做到这一点？

# php - 如何将日期时间字段的默认值设置为 Symfony2 中的当前时间？

> ID：14194392
> 
> 赞同：2
> 
> 时间：2013-01-07T10:51:51.827
> 
> 标签：php, symfony, default

我将如何将表单的日期时间字段的默认值设置为 Symfony2 中的当前时间？

我正在使用 FormBuilderInterface 并且以下内容不起作用：

```
$builder->add(
    'completed_datetime', 'datetime', array('data' => new \DateTime('now'))
); 
```

该表单继续显示我认为日期时间字段 2008-01-01 00:00 的默认值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:57:31.510

最后，我发现我正在查看我页面的缓存版本。Ctrl+F5 清除缓存并显示所需的结果。

我能够以这里发布的两种方式实现我想要的功能，即：

在类型类中：

```
$builder->add(
    'completed_datetime', 'datetime', array('data' => new \DateTime('now'))
); 
```

在我的控制器中：

```
$task->setCompletedDateTime(new \DateTime('now')); 
```

我相信也可以在我的任务实体类的构造函数中设置它。

# c# - 如何在后面的代码中检查端口当前是否与 IIS7 (webSite) 一起使用？

> ID：14194394
> 
> 赞同：3
> 
> 时间：2013-01-07T10:52:02.673
> 
> 标签：c#, iis, web, port, servermanager

我开发了一个程序“安装程序”，它将在 IIS 上添加和配置一个新网站。我的问题是我想在安装之前检查用户提供的端口是否已被另一个站点使用。

我的项目是 C# WinForm 风格的。有人你有想法吗？

```
string[] lPorts = System.IO.Ports.SerialPort.GetPortNames(); ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:16:18.903

检查这个：

[BindingInformation 属性](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.binding.bindinginformation%28v=vs.90%29.aspx)：获取或设置当前绑定的绑定信息。

此属性的值是一个以冒号分隔的字符串，其中包括绑定的 IP 地址、端口和主机名。您可以将主机名留空。您可以将 IP 地址设置为“*”以指示绑定适用于所有变量。

例如，为端口 80 上的所有 IP 地址设置且没有指定主机名的绑定*从该属性返回“:80:”。在端口 8080 上为 IP 地址 192.168.1.150 设置的绑定返回“192.168.1.150:8080:”。为名为“microsoft.com”的主机的端口 80 上的所有 IP 地址设置的绑定返回“* :80:microsoft.com”。

BindingInformation 属性值在 ApplicationHost.config 文件中维护。

此外，您可以检查以下内容：**[Get IIS bindings at runtime](http://blogs.msdn.com/b/carlosag/archive/2011/01/21/get-iis-bindings-at-runtime-without-being-an-administrator.aspx)**

```
foreach (Microsoft.Web.Administration.ConfigurationElement binding in mySite.GetCollection("bindings"))
        {
            string protocol = (string)binding["protocol"];
            string bindingInfo = (string)binding["bindingInformation"];

            if (protocol.StartsWith("http", StringComparison.OrdinalIgnoreCase))
            {
                string[] parts = bindingInfo.Split(':');
                if (parts.Length == 3)
                {
                    //Get the port in use HERE !!!
                    string port = parts[1];
                    yield return new KeyValuePair<string, string>(protocol, port);
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:06:24.303

您应该查看 [Microsoft.Web.Administration](http://msdn.microsoft.com/en-us/library/microsoft.web.administration%28v=vs.90%29.aspx)命名空间

您应该使用`ServerManager.Sites`来获取网站列表。查看每个站点上的集合绑定。每个站点可能有一个或多个绑定，即可以通过一个或多个地址/端口访问它。

您上面的代码查找在 USB 之前用于连接调制解调器和打印机的物理串行端口。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T01:02:10.710

不确定你是否在寻找 C#，但如果你需要 powershell，你就去吧..

打开 PowerShell 并输入以下内容： import-module webadministration get-webbinding

# java - 如何收集有关 java 集成测试的统计信息

> ID：14194395
> 
> 赞同：0
> 
> 时间：2013-01-07T10:52:03.180
> 
> 标签：java, spring, maven, integration-testing, maven-failsafe-plugin

我的开发环境包括 Maven、Failsafe 和 Spring 测试 IS (AbstractJUnit4SpringContextTests)。
我正在寻找一种方法来收集有关集成测试运行的统计信息。
诸如测试持续时间，进程内存等信息......
使用上述配置（并与 Maven 流程集成）收集此类信息的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:58:58.377

[Sonar](http://www.sonarsource.org)有一个 Maven 插件。它是高度可配置的，也许可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:57:21.240

据我记得，surefire 插件能够[将报告写入](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#reportsDirectory)某个目录（例如 jenkins 将使用该目录来呈现结果）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:16:24.320

故障安全插件会生成一个带有测试结果的 xml 文件。这可以使用，例如 jenkins 插件。

# postgresql - cfquery标签内字符串的postgres冷融合连接

> ID：14194397
> 
> 赞同：2
> 
> 时间：2013-01-07T10:52:12.883
> 
> 标签：postgresql, coldfusion, postgresql-9.1

```
<cfquery name="LOCAL.qrySelEvents" datasource="#variables.datasourceSettings.getDatasourceName()#" result="LOCAL.qryData" >
    SELECT evt_id, 
           acnt_dba_name,
           form_id,
           '#application.portals.data[request.applicationName].profileRootPath#form/index.cfm' 
               || CHAR(63) 
               || 'PKformID= ' 
               || #preserveSingleQuotes(LOCAL.formIdSql)# AS primaryFormURL,
    FROM    events
</cfquery> 
```

我必须将 #application.portals.data[request.applicationName].profileRootPath#form/index.cfm 与 char(32) 和 PKformID= ' || #preserveSingleQuotes(LOCAL.formIdSql)#。我使用过`||`postgres 的运算符。但这给了我一个错误：

> 错误：“||”处或附近的语法错误

你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:27:27.737

select 子句的最后一行末尾有一个逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:11:23.670

好的，以及错误消息，如果你已经`ROBUST EXCEPTION HANDLING`打开（它在 CFAdmin 中），你应该取回 CF 传递给服务器的 SQL。这应该向您显示 SQL 中的语法错误。您还应该始终在您的问题中发布此信息，因此即使您看不到问题，其他人也可能能够看到。

现在我*怀疑*这是因为：

```
#preserveSingleQuotes(LOCAL.formIdSql)# 
```

需要被视为一个字符串（它是），在这种情况下，您需要引用它以便 DB 将其视为一个字符串。IE：

```
'#preserveSingleQuotes(LOCAL.formIdSql)#' 
```

鉴于整个值中没有以数据库为中心的引用：

```
`'#application.portals.data[request.applicationName].profileRootPath#form/index.cfm' || CHAR(63) || 'PKformID= ' || '#preserveSingleQuotes(LOCAL.formIdSql)#'` 
```

我质疑为什么需要将它包含在 SELECT 查询中。您基本上只是将值传递给 SQL 服务器，然后再将其取回。所以我怀疑这里有些不对劲。你到底想在这里做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:13:29.660

雅终于得到了答案，CHAR(63) 在这方面造成了问题，因为 Sql-server CHAR 是一个从 ASCII 提供字符的函数，而在 postgresql 中，CHR() 函数可用于从 ASCII 提供字符。所以，新的查询是：

```
<cfquery name="LOCAL.qrySelEvents" datasource="#variables.datasourceSettings.getDatasourceName()#" result="LOCAL.qryData" >
    SELECT evt_id, 
           acnt_dba_name,
           form_id,
           '#application.portals.data[request.applicationName].profileRootPath#form/index.cfm' 
               || CHR(63) 
               || 'PKformID= ' 
               || #preserveSingleQuotes(LOCAL.formIdSql)# AS primaryFormURL
    FROM    events
</cfquery> 
```

感谢您的支持。

# java - Java exec() mysqldump 错误：找不到表“>”

> ID：14194398
> 
> 赞同：1
> 
> 时间：2013-01-07T10:52:16.040
> 
> 标签：java, exec, mysqldump

我正在从 Java 类执行 mysqldump 命令，但我不断收到标题中提到的错误。

这是我正在使用的代码：

```
 Process runtimeProcess = Runtime.getRuntime().exec("mysqldump -uroot -pmypassword valo > /etc/valbu.sql");
        int processComplete = runtimeProcess.waitFor();
        if(processComplete == 0){
            System.out.println("Backup taken successfully");
        } else {
            InputStream stderr = runtimeProcess.getErrorStream();
            InputStreamReader isr = new InputStreamReader(stderr);
            BufferedReader br = new BufferedReader(isr);
            String line = null;
            System.out.println("<ERROR>");
            while ( (line = br.readLine()) != null)
                System.out.println(line);
            System.out.println("</ERROR>");
            System.out.println("Could not take mysql backup");
        } 
```

看起来他不明白那`>`不是一张桌子，而是一个转储的命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:54:25.230

常见问题 - 您无法使用管道或重定向执行语句。它们只能由 shell 执行。

**进一步阅读**

*   [https://stackoverflow.com/a/11693833/105224](https://stackoverflow.com/a/11693833/105224)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-07T20:14:25.813

尝试使用`result-file`mysqldump 命令中的选项而不是重定向运算符`>`：

`mysqldump -uroot -pmypassword valo --result-file=/etc/valbu.sql`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:55:25.587

这将不起作用，因为`Runtime.exec()`不会调用 shell，并且`>`是 shell 重定向。

因此，要么使用 , 之类的数组`{ "/bin/bash", "-c", "thescripthere" }`（不推荐），要么使用 a `ProcessBuilder`。

# wordpress - 投资组合类别过滤器 Wordpress

> ID：14194404
> 
> 赞同：0
> 
> 时间：2013-01-07T10:52:54.653
> 
> 标签：wordpress, filter, portfolio

我正在构建一个带有流沙过滤功能的 Wordpress 投资组合。

我需要帮助的部分是我有大约 20 个类别，并且想将它们分成 3 行，每行都有自己的标题 - 声音、设计和视频。

这是我正在使用的代码：

```
 <?php  
                 $terms = get_terms("tagportfolio");  
                 $count = count($terms);  
                 echo '<ul id="portfolio-filter">';  
                 echo '<li><a href="#all" title="">All</a></li>';  
                 if ( $count > 0 ){  
                        foreach ( $terms as $term ) {  
                            $termname = strtolower($term->name);  
                            $termname = str_replace(' ', '-', $termname);  
                            echo '<li><a href="#'.$termname.'" title="" rel="'.$termname.'">'.$term->name.'</a></li>';  
                        }  
                 }  
                 echo "</ul>";  
            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:30:37.610

如果我理解正确，“tagportfolio”是一种自定义的、分层的分类法？

比使用：

```
<?php get_term_children( $ID_of_subcategory, 'tagportfolio') ?> 
```

从 $ID_of_subcategory 中获取元素。

# .htaccess - 在雅虎服务器上使用 .htaccess 的任何其他方式

> ID：14194408
> 
> 赞同：1
> 
> 时间：2013-01-07T10:53:19.730
> 
> 标签：.htaccess, web-hosting

我的一个客户从雅虎托管服务购买了一年的服务器。我为他做了一个网站，下载了一个我必须集成到其中的聊天脚本。在我的聊天脚本中，它有多个 .htacccess 文件，并且您已经知道 yahoo 托管不允许任何从 .htacccess 文件开始的文件。所以有人知道在雅虎托管服务器中使用 .htaccess 的另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:54:48.180

如果他们不允许您创建文件，那么不，没有办法创建文件。

下一次，选择不是来自大型不知名企业集团的托管服务，并且明确声明它们支持您正在尝试做的事情。

# android - onActivityResult 正在调用未完成调用的活动以获取结果

> ID：14194413
> 
> 赞同：1
> 
> 时间：2013-01-07T10:53:57.913
> 
> 标签：android, android-intent

在我的代码中，我通过代码调用应用程序卸载意图：

```
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE);
uninstallIntent.setData(Uri.parse("package:" + packageName));
uninstallIntent.setAction(Intent.ACTION_VIEW);
startActivityForResult(uninstallIntent,DELETE_APP); 
```

在我的活动中，我已经覆盖了 onActivityResult() 方法，但没有对卸载 Intent 采取任何操作，因此该方法是多余的。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    Log.d("", "request Code "+requestCode+" Result Code "+resultCode+"   "+data);

    if(requestCode==DELETE_APP){
       Log.d("Inside"'"Inside Delete Application Result");

}   
} 
```

我怎样才能摆脱它以及为什么会这样。

我在装有 Android 2.2 的 Galaxy S 上对其进行测试。卸载意图是否存在任何操作系统级别问题或问题。请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:52:33.963

实际上，调用清单中注册的卸载意图的活动

```
 android:launchMode="singleInstance" 
```

这就是问题发生的原因，但任何人都可以解释为什么会发生这种情况。

如果想阻止另一个实例，为什么只有第二次调用的 Intent 正在创建也不应该创建的实例？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-28T09:24:09.333

您必须设置意图

```
intent.putExtra(Intent.EXTRA_RETURN_RESULT, true); 
```

# xml - 遍历 XML 中的节点

> ID：14194419
> 
> 赞同：0
> 
> 时间：2013-01-07T10:54:21.110
> 
> 标签：xml, ant, xml-parsing, svnant

我需要在另一个xml文件中遍历一个xml文件的节点。所以我刚刚将第二个文件加载到我当前的 XML 文件中，我需要围绕这个文件运行一个循环来查找具有特定标签的节点。我如何在 XML 中做到这一点？

```
<loadfile
      property="changed.files"
      srcFile="log.xml">
</loadfile> 
```

现在以这种方式加载了我的文件，我尝试使用具有 for 循环的 ant-contrib 任务，但我需要在 diff 机器上运行它，而 ant-contrib 不是 ant 默认附带的任务，因此我需要将其添加到ant 配置也是如此，所以这并不理想。有什么建议我如何遍历 XML 中的节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:43:41.687

Ant 没有内置用于遍历 XML 的强大工具。您可能会很好地获取出色的[XMLTASK 库](http://www.oopsconsultancy.com/software/xmltask/)并将其 jar 包含在项目中的 /tools 目录之类的东西中。

# java - 是否有预定义的方法通过给定的行数和列数在 java 中进行 padarray

> ID：14194426
> 
> 赞同：3
> 
> 时间：2013-01-07T10:54:41.300
> 
> 标签：java, arrays, multidimensional-array

如何在Java中使用给定的数字将行和列添加到前后的现有数组中。

例如 ：-

```
let x =  1  2  3
         4  5  6
         7  8  9 
```

现在想要 2 行和列的零：

```
 x =  0 0 0 0 0 0 0 
        0 0 0 0 0 0 0
        0 0 1 2 3 0 0
        0 0 4 5 6 0 0
        0 0 7 8 9 0 0
        0 0 0 0 0 0 0
        0 0 0 0 0 0 0 
```

所以，我想知道在 java 中是否有现有的方法或方法可以做到这一点，就像在 matlab 中使用名为`padarray(x,[r,c])`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T10:57:05.230

您根本不能将行或列添加到二维数组。数组是固定大小的。您可以使用动态数据结构，例如`List<List<Integer>>`.

您还可以使用该方法创建一个新数组（大于或小于当前数组）[`Arrays.copyOf(int[] original, int newLength);`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOf%28int%5B%5D,%20int%29)。

你的数组`x`就像：

```
 int[][] x = new int[][]{{1,2,3}, {4,5,6}, {7,8,9}}; 
```

没有一种方法（我知道）可以将其*转换*为您想要的格式。您必须创建一个方法来创建一个新的二维数组并将您的值放在正确的索引处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-08T18:46:56.817

下面是一些代码，它采用您想要填充的 2D 数组、您想要填充的内容以及数组周围有多少个焊盘（您的数组将是 2，因为您希望您的数组被 2 层 0 包围）。

```
public static int[][] padArray(int[][] arr, int padWith, int numOfPads) {
    int[][] temp = new int[arr.length + numOfPads*2][arr[0].length + numOfPads*2];
    for (int i = 0; i < temp.length; i++) {
        for (int j = 0; j < temp[i].length; j++) {
            temp[i][j] = padWith;
        }
    }
    for (int i = 0; i < arr.length; i++) {
        for (int j = 0; j < arr[i].length; j++) {
            temp[i+numOfPads][j+numOfPads] = arr[i][j];
        }
    }
    return temp;
} 
```

# asynchronous - 服务总线 - “服务器没有提供有意义的回复；这可能是由于会话过早关闭造成的”

> ID：14194429
> 
> 赞同：5
> 
> 时间：2013-01-07T10:55:00.083
> 
> 标签：asynchronous, azure, servicebus

我正在按照这个实现从服务总线接收消息：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh851744.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh851744.aspx)。

问题是有时我会收到此错误，但我不知道该怎么做才能解决此问题。

```
Microsoft.ServiceBus.Messaging.MessagingCommunicationException was unhandled by user code
  HResult=-2146233088
  Message=Error during communication with Service Bus. Check the connection information, then retry.
  Source=Microsoft.ServiceBus
  IsTransient=true
  StackTrace:
    Server stack trace: 
       at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageReceiver.EndReceiveCommand(IAsyncResult result, IEnumerable`1& messages)
       at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageReceiver.ReceiveAsyncResult.<GetAsyncSteps>b__27(ReceiveAsyncResult thisPtr, IAsyncResult a)
       at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback(IAsyncResult result)
    Exception rethrown at [0]: 
       at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
       at Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
       at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageReceiver.OnEndTryReceive(IAsyncResult result, IEnumerable`1& messages)
       at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult`1.OperationComplete(IAsyncResult result)
       at Microsoft.ServiceBus.Common.AsyncResult.AsyncCompletionWrapperCallback(IAsyncResult result)
    Exception rethrown at [1]: 
       at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
       at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult`1.End(IAsyncResult result, T& output)
       at Microsoft.ServiceBus.Messaging.OpenOnceManager.End[T](IAsyncResult result, T& output)
       at Microsoft.ServiceBus.Messaging.MessageReceiver.EndTryReceive(IAsyncResult result, IEnumerable`1& messages)
       at Microsoft.ServiceBus.Messaging.MessageReceiver.EndReceive(IAsyncResult result)
       at Microsoft.ServiceBus.Messaging.SubscriptionClient.EndReceive(IAsyncResult result)
       at Azure.WorkerCommandProcessor.WorkerRole.<>c__DisplayClass17.<messageHandler>b__10(IAsyncResult ar) in d:\TFS\DEV\Azure\Azure.Development\Azure.WorkerCommandProcessor\WorkerRole.cs:line 247
       at Microsoft.Practices.TransientFaultHandling.RetryPolicy.<>c__DisplayClass7.<ExecuteAction>b__4(IAsyncResult ar)
       at Microsoft.Practices.TransientFaultHandling.RetryPolicy.<>c__DisplayClass10`1.<>c__DisplayClass12.<ExecuteAction>b__c()
       at Microsoft.Practices.TransientFaultHandling.RetryPolicy.<>c__DisplayClass10`1.<ExecuteAction>b__d(Action a)
  InnerException: System.ServiceModel.CommunicationObjectFaultedException
       HResult=-2146233087
       Message=Internal Server Error: The server did not provide a meaningful reply; this might be caused by a premature session shutdown..TrackingId:bb1281ab-2334-4fa3-88bb-eadce71b0d37, Timestamp:07-01-2013 10:46:52
       Source=Microsoft.ServiceBus
       StackTrace:
         Server stack trace: 
         Exception rethrown at [0]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Sbmp.DuplexRequestBindingElement.DuplexRequestSessionChannel.DuplexCorrelationAsyncResult.End(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Sbmp.DuplexRequestBindingElement.DuplexRequestSessionChannel.EndRequest(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.RequestAsyncResult.<GetAsyncSteps>b__4(RequestAsyncResult thisPtr, IAsyncResult r)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback(IAsyncResult result)
         Exception rethrown at [1]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.EndRequest(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Sbmp.RedirectBindingElement.RedirectContainerChannelFactory`1.RedirectContainerSessionChannel.RequestAsyncResult.<>c__DisplayClass17.<GetAsyncSteps>b__a(RequestAsyncResult thisPtr, IAsyncResult r)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback(IAsyncResult result)
         Exception rethrown at [2]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Sbmp.RedirectBindingElement.RedirectContainerChannelFactory`1.RedirectContainerSessionChannel.EndRequest(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.RequestAsyncResult.<GetAsyncSteps>b__4(RequestAsyncResult thisPtr, IAsyncResult r)
            at Microsoft.ServiceBus.Messaging.IteratorAsyncResult`1.StepCallback(IAsyncResult result)
         Exception rethrown at [3]: 
            at Microsoft.ServiceBus.Common.AsyncResult.End[TAsyncResult](IAsyncResult result)
            at Microsoft.ServiceBus.Common.AsyncResult`1.End(IAsyncResult asyncResult)
            at Microsoft.ServiceBus.Messaging.Channels.ReconnectBindingElement.ReconnectChannelFactory`1.RequestSessionChannel.EndRequest(IAsyncResult result)
            at Microsoft.ServiceBus.Messaging.Sbmp.SbmpMessageReceiver.EndReceiveCommand(IAsyncResult result, IEnumerable`1& messages)
       InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T23:56:31.840

该错误很可能代表连接的某些部分超时。这可能是您的客户端、Azure 负载均衡器或实际托管消息队列的服务总线机器。

对于这种暂时性错误，建议添加重试机制。[这篇博文](https://social.technet.microsoft.com/wiki/contents/articles/5047.best-practices-for-leveraging-azure-service-bus-brokered-messaging.aspx)对此有很好的指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T09:35:57.070

我同意实施重试政策——这应该可以解决大部分暂时性错误。以下是该主题的非常好的 Microsoft 文章：

[特定服务的重试指南](https://docs.microsoft.com/en-us/azure/architecture/best-practices/retry-service-specific#service-bus-retry-guidelines)

[服务总线消息异常](https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-messaging-exceptions)

# android - 默认情况下 Android 中图像的位置

> ID：14194430
> 
> 赞同：0
> 
> 时间：2013-01-07T10:55:04.857
> 
> 标签：android, android-camera

当我们通过模拟器拍摄这张图片时，这张图片在哪里......我如何通过给出它的位置地址来检索它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:05:39.303

使用 adb-shell 检查模拟器。请注意，默认情况下，模拟器上没有安装 sd 卡。对于加载图像，你会发现很多例子，只是谷歌'加载图像 android'。

# vb.net - 如何在 VB 10 Express 中创建 Windows 窗体

> ID：14194431
> 
> 赞同：0
> 
> 时间：2013-01-07T10:55:11.857
> 
> 标签：vb.net, winforms

这听起来像是一个愚蠢的问题，但我使用的是 VS 2010 Express 版本，找不到在哪里添加新的 Windows 窗体。提供的模板并不表示 Windows 窗体。在这个版本的 VS 中它们被称为不同的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:59:25.643

是的，我不确定，因为我使用的是相同的东西，我只是转到顶部并单击 **项目>添加 Windows 窗体**

# http - 是否可以通过指定最大请求正文大小来防止将大文件上传到服务器？

> ID：14194432
> 
> 赞同：1
> 
> 时间：2013-01-07T10:55:16.417
> 
> 标签：http, cherrypy, content-length

我在 cherrpy 中有一个服务器，我想防止上传大文件。为了防止这种情况，我指定了最大请求正文大小。但是，我不确定这是否会阻止上传大文件。如果有人在上传文件时宣传不正确的内容长度怎么办？这足以欺骗我的服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:04:17.377

我会使用 Curl 来尝试测试你的理论。看起来这可以用于设置虚假的内容长度。

```
curl_setopt($ch, CURLOPT_HTTPHEADER, 'Content-Type: application/octet-stream','Content-length: 100'); 
```

[卷曲内容长度用法](https://stackoverflow.com/questions/7139709/problem-with-curl-to-send-content-length-header)

希望这可以帮助！

安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:19:16.507

CherryPy 不会在所有情况下都允许完整上传。如果请求的 Content-Length 值超过最大值，CherryPy wsgiserver 会报错。如果 Content-Length 小于指定的最大值，服务器将只尝试读取那么多字节。如果请求使用分块编码（因此不包括 Content-Length），那么当读取的字节数超过指定的最大值时，CherryPy 会报错。

# ruby-on-rails - 从 Shopify 下载具有所有变体和元字段的所有产品

> ID：14194436
> 
> 赞同：1
> 
> 时间：2013-01-07T10:55:24.933
> 
> 标签：ruby-on-rails, ruby, api, rest, shopify

有没有办法下载具有所有变体和元字段的所有产品，而无需执行 2 个额外请求（1 个用于变体，1 个用于元字段）？也许某种批量下载？

这会下载一批，但是获取元字段和变体仍然需要额外的请求。也许某种包括？

```
ShopifyAPI::Product.find(:all, ...).each 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:53:56.090

当您下载产品时，您无需额外调用即可获得变体。检查您的产品变体属性。元字段是一个完全独立的资源，因此您确实需要在您想要该资源元字段的每个资源中使用 API 调用。

# sql - 使用 SSIS 使用唯一 ID 导入 Excel 数据

> ID：14194437
> 
> 赞同：0
> 
> 时间：2013-01-07T10:55:29.727
> 
> 标签：sql, visual-studio-2010, ssis

我有一个 Excel 文件，我想将它导入到两个不同的表 tblUni 和 tblUser 中。

我有第三个表，其中包含来自其他两个表的 id：

```
tblUni_Students
Id
UniId
StudentId 
```

我需要的是，当我将 excel 数据导入前两个表时，对于每条记录，新创建的 id 也将插入 Uni_Students 表中。

使用 SSIS，我设法将数据导入到两个 sql 目标中，但似乎无法从这些目标中获取新的 id，然后插入到查找表中。

![在此处输入图像描述](../Images/a37906d6d47258157e37eb430198cf0b.png)

任何人都可以建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:54:20.483

您将它作为一个 oledbcommand 组件，其中的命令是将值插入到表中。然后在同一个组件中，您将输出生成的身份。将生成的身份分配给输出中的新列，现在您拥有所有数据以及数据流中生成的身份。

这将一次处理一行，因此会很慢。就我个人而言，我会把它放在一个临时表中，然后按照 Ciarán 的描述进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:39:15.253

在不知道目标数据库或数据结构的情况下回答有点困难，但一般来说，通过将数据添加到“加载”表中会更好。也就是说，唯一的原因是在处理数据时临时保存数据，然后您将使用 SQL 语句通过过程或`Execute SQL Task`组件从加载区域更新 tblStudent、tblUni 和 tblUni_Student 表。

# perforce - 如何在 Perforce 中恢复文件？

> ID：14194438
> 
> 赞同：4
> 
> 时间：2013-01-07T10:55:29.893
> 
> 标签：perforce

在 Perforce 中，如何恢复对文件所做的更改？

```
$ p4 status
UI\FormMain.cs - reconcile to edit //UI/FormMain.cs#73

$ p4 revert UI/FormMain.cs
UI/FormMain.cs - file(s) not opened on this client. 
```

* * *

在 Git 中，我使用命令来执行此操作`git checkout`。

```
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   Form.cs
#
no changes added to commit (use "git add" and/or "git commit -a")

$ git checkout Form.cs

$ git status
# On branch master
nothing to commit, working directory clean 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T14:40:00.297

如果文件未打开，但您已在本地对其进行了更改，请使用

```
p4 sync -f UI/FormMain.cs 
```

告诉 Perforce 强制 (-f) 将您机器上的 FormMain.cs 副本与服务器上的版本同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:49:01.557

而不是`p4 revert UI/FormMain.cs`你应该打电话`p4 revert //UI/FormMain.cs`，因为那是仓库表示法的绝对路径。没有前导`//`的文件标记相对于您在客户端工作区中的当前位置的文件。

# tsql - UTC 日期时间偏移

> ID：14194439
> 
> 赞同：2
> 
> 时间：2013-01-07T10:55:31.950
> 
> 标签：tsql, axapta, dynamics-ax-2009

我需要从 Axapta-tables 中获取时间戳`TSQL`，每次都没有时区和/或日光偏差，例如从 table `JMGABSENCECALENDAR`。

[将此](https://stackoverflow.com/questions/1205612/axapta-dynamicsax-utc-datetime-conversion)作为初始方法，并考虑[this](http://weblogs.asp.net/sbehera/archive/2006/01/20/435994.aspx)，它适用于当前时间。但是从引用其他时间戳的表中读取数据，第二个链接中提供的解决方案没有获取到指定时间的日光信息。

例如：

我添加了今天的缺席（2012-01-07）。现在，使用 SSMS，读取这个数据集会导致

开始时间 =`2013-01-06 23:00:00.000` 和结束时间 =`2013-01-07 23:00:00.000`

没关系，我可以使用

```
DECLARE @UTCOffset SMALLINT

EXEC master..xp_regread
    'HKEY_LOCAL_MACHINE',
    'SYSTEM\CurrentControlSet\Control\TimeZoneInformation',
    'ActiveTimeBias',
    @UTCOffset OUTPUT

SELECT DATEADD(MINUTE, @UTCOffset, GETDATE()) AS UTCTime 
```

删除偏移量。这在实际日期上效果很好，但是删除过去或未来时间的偏移量的正确方法是什么，例如`2012-07-01`？

在这里，由于夏令时，偏移量为 120 分钟。读取 Reg-Value 仅返回**当前**偏移量。

该任务必须在 TSQL 2008 中解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:40:25.057

我有同样的问题，但它是在一个完全不同的环境中。我与axapta无关。但是，我遇到的问题是我必须知道不同时间的 UTC 偏移量。这里棘手的部分是不同国家对夏令时使用不同的方法，因此不同国家可能同时出现偏移量差异。

我所做的是创建一个查找表，在其中输入 UTC 偏移量更改的日期，这些是已知日期。我给了它一个偏移量列，这样我就可以使用 between 运算符轻松查找特定日期所需的偏移量。

它对我有用，也许这个解决方案可以为您提供一些东西？

附言。您不必从注册表中查找 UTC 日期偏移量。使用函数 getutcdate() 将给您相同的结果；）在 DATADD 中使用它使其更具可读性；）

玩得开心，我希望我能为您的问题做出贡献...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:12:41.310

仅仅因为夏令时切换日期每年和州之间都不同，您唯一可行的选择就是查找表。

例如，您可以在此处找到数据[http://www.timeanddate.com/time/dst/2013a.html](http://www.timeanddate.com/time/dst/2013a.html)

但是，您可能不必自己维护该列表。timeanddate.com 在他们的网站上有一个计算器。其他人提供类似的服务。您可以查找一个公共 API，然后使用几行 CLR 代码从您的数据库中调用该 API。

或者您可以使用此类服务​​来维护您自己的数据副本。拥有自己的查找表将是迄今为止最快的解决方案。

# r - 在 pdf 文件或类似文件中写下适合的摘要

> ID：14194442
> 
> 赞同：3
> 
> 时间：2013-01-07T10:55:36.710
> 
> 标签：r

我正在循环中对许多数据集进行线性拟合，并将结果绘制在 pdf 文件中。是否可以直接将summary(fit)的输出保存在同一个pdf文件中，而不是通过控制台观察大约100个数据集的摘要？

```
 LMmodel <- y ~ x
  fit <- lm(LMmodel, data = Dataset)

  pdf(file = OutputFile, width = 10, height = 6, paper = "a4r")

  xLim = range(x)
  yLim = range(y)

  plot(x, y, type = "p", xlim = xLim, ylim = yLim,
       main = plotTitle, xlab = "x [m]", ylab = "y [dB]",
       pch = 20, cex = .9)
  regLine(fit, col=palette()[2], lwd=2, lty=1)
  grid(lwd = 1.5)

  plot(density(residuals(fit)), main = "Density Plot of the Residuals"))

  dev.off()
  graphics.off()
  return(summary(fit)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T12:41:04.277

我真的推荐[Knitr](http://cran.r-project.org/web/packages/knitr/index.html)和[Rstudio](http://www.rstudio.com/)来生成报告。

在这里，我使用您的代码通过 3 个简单的步骤生成 pdf。我假设你已经安装了 Rstudio。

1.  我创建了一个新的 R sweave 文件（使用菜单）

2.  我在哪里插入 2 个块（使用右侧的*块*）

    ```
    <<myplot,echo=FALSE,fig=TRUE>>=
    library(car)
    x <- rnorm(n=20,mean=30,sd=20)
    y <- rnorm(n=20,mean=180,sd=10)
    Dataset <- data.frame(x=x,y=y)
    LMmodel <- y ~ x
    fit <- lm(LMmodel, data = Dataset)
    xLim = range(x)
    yLim = range(y)
    plot(x, y, type = "p", xlim = xLim, ylim = yLim,
        main = "plotTitle", xlab = "x [m]", ylab = "y [dB]",
        pch = 20, cex = .9)
    regLine(fit, col=palette()[2], lwd=2, lty=1)
    grid(lwd = 1.5)
    plot(density(residuals(fit)), main = "Density Plot of the Residuals")
    @ 
    ```

总结是：

```
 <<mysummary>>=
    print(summary(fit))
    @ 
```

1.  **您可以使用编译 PDF**按钮生成一个 pdf 文件。

您可以在摘要和图表之间插入您想要的内容以构建复杂的报告。

# jquery - 如何在 MVC 控制器中选择 jQuery UI Datepicker？

> ID：14194443
> 
> 赞同：1
> 
> 时间：2013-01-07T10:55:37.503
> 
> 标签：jquery, asp.net-mvc, user-interface, datepicker

我有一个带有以下代码的 MVC3 视图

```
$(document).ready(function () {
    $('#multiInlinePicker').datepick({
        multiSelect: 30, monthsToShow: 3, monthsToStep: 3,
        prevText: 'Prev months', nextText: 'Next months'
    });
   }

 <span id="multiInlinePicker"></span> 
```

我想将 datepick 控件上的选定日期传递给控制器​​。做这个的最好方式是什么？

提前致谢 问候汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:58:51.687

利用`onselect`

```
$('#multiInlinePicker').datepick({
    multiSelect: 30, monthsToShow: 3, monthsToStep: 3,
    prevText: 'Prev months', 
    nextText: 'Next months',
    onSelect:function(date){ 
        //UPDATED
        $.ajax({
           url: 'url to your controller action',
           data:'selecteddate=' + date,
           type:'post',
           success:function(response){
              alert(reponse);
           }
        })

      }
}); 
```

注意：每次选择日期选择器上的日期时，这些都会调用您的控制器操作方法..所以如果您需要，请确保..

# android - 如何发布 android 应用程序新的许可证密钥？

> ID：14194448
> 
> 赞同：5
> 
> 时间：2013-01-07T10:56:09.330
> 
> 标签：android, android-lvl

我终于准备好发布我的第一个应用程序了。我进去做付费版本，它说我需要在我的二进制文件中添加一些代码。我不知道那在哪里。这是页面上的内容（开发指南似乎对于这种新方法已经过时）：

```
SERVICES & APIS
LICENSING & IN-APP BILLING
Licensing allows you to prevent unauthorized distribution of your app. It can also be used to verify in-app billing purchases. Learn more about licensing.

YOUR LICENSE KEY FOR THIS APPLICATION
Base64-encoded RSA public key to include in your binary. Please remove any spaces.

"a bunch of random numbers and letters" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:04:41.347

您几乎必须按照[此处](http://developer.android.com/tools/publishing/app-signing.html#cert)详述的步骤进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:57:59.343

我相信这是我一直在寻找的答案[http://developer.android.com/google/play/licensing/setting-up.html](http://developer.android.com/google/play/licensing/setting-up.html)

# redirect - 如何在 Zend 2 中使用 GET 查询重定向？

> ID：14194449
> 
> 赞同：0
> 
> 时间：2013-01-07T10:56:12.120
> 
> 标签：redirect, get, zend-framework2, routes

我可以重定向到类似的可匹配路由`$this->redirect()->toRoute('controller', array('action' => 'something', 'foo' => 'bar'))`，但是如何附加 get 查询？我将它用于表格的过滤器。过滤器既可以在页面上提交（表单get方法），也可以从另一个页面链接（需要添加get查询）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:28:24.133

尝试这个 ：

```
'course' => array(
    'type'    => 'Segment',
    'options' => array(
        'route'    => '/course[/:action[/:id]]',
        'constraints' => array(
            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
            'id' => '\d+'
        ),
        'defaults' => array(
            '__NAMESPACE__' => 'Home\Controller',
            'controller' => 'course',
            'action' => 'index',
            'id' => 0
        ),
    ),
    'may_terminate' => true,
    'child_routes' => array(
        'query' => array(
          'type' => 'Query',
          'options' => array(
            'route' => '?[:filterByDepartment]'
          ),
        ),  
    ),
), 
```

确保路线在视图中满足您的需求：

```
echo $this->url('course/query', array('controller'=>'course', 'action'=>'index', 'id'=>0, 'filterByDepartment'=>'depA')); 
```

如果这是正确的，让我们在控制器操作中尝试以下操作：

```
 $this->redirect()->toRoute('course/query', array('controller'=>'course', 'action'=>'index', 'id'=>0, 'filterByDepartment'=>'depA')); 
```

# types - 在 Fortran 90 中具有派生数据类型的 MPI。广播问题

> ID：14194450
> 
> 赞同：2
> 
> 时间：2013-01-07T10:56:13.923
> 
> 标签：types, fortran, mpi

一段时间以来，我一直在使用使用模块、派生数据类型和 MPI 的 Fortran 90 代码。

我遇到的问题是，在广播派生数据类型后，只有主节点的变量具有正确的值，所有其他节点上的变量不包含它们应该包含的值。我从我们更大的代码中提取了一个最小的例子。它包含主程序：

* * *

```
include 'hello_types.f90'
include 'mpi_circle.f90'

program hello_world

use type_hello_world
use create_mpi_types

implicit none

include 'mpif.h'

integer         :: ierr, num_procs, my_id, mesg_mpi_circle
type(circle_)       :: circle

call MPI_Init(ierr)

!find out MY process ID, and how many processes were started.

call MPI_COMM_RANK (MPI_COMM_WORLD, my_id, ierr)
call MPI_COMM_SIZE (MPI_COMM_WORLD, num_procs, ierr)

allocate(circle%diameter(3),circle%straal(3))

if (my_id==0) then
print*,'enter straal and diameter'
read*,circle%diameter(1),circle%straal(1)
circle%diameter(2)=circle%diameter(1)
circle%straal(2)=circle%straal(1)
endif

call build_derived_circle(circle,mesg_mpi_circle)

call MPI_BCAST(circle,1,mesg_mpi_circle,0,MPI_COMM_WORLD,ierr)

print *, "Hello world! I'm process ", my_id, " out of", num_procs, " processes."
print*,my_id,mesg_mpi_circle%diameter(my_id+1),mesg_mpi_circle%straal(my_id+1)

call MPI_Finalize(ierr)

end program hello_world 
```

* * *

输出包含两个打印语句，其中第一个仅打印 proc_id（工作正常），第二个打印出相应节点上的变量（这是我遇到问题的地方，仅在主节点上的值很好） . 变量来自主节点上的读入。

此外，还有一个定义类型的模块：

* * *

```
module type_hello_world

type circle_
   real,allocatable  :: straal(:),diameter(:)
end type circle_

end module type_hello_world 
```

* * *

正如我所说，我是从更大的代码中抽象出来的，所以这个模块可能看起来没用，但在原始代码中是有意义的。

[作为第三个模块，它包含一个用于计算派生数据类型广播的位移的子程序.....我遵循了来自http://ladon.iqfr.csic.es/docs/MPI_ug_in_FORTRAN.pdf](http://ladon.iqfr.csic.es/docs/MPI_ug_in_FORTRAN.pdf)的 Fortran 的 MPI 用户指南

* * *

```
module create_mpi_types

contains

subroutine build_derived_circle(circle,mesg_mpi_circle)

use type_hello_world

implicit none

include 'mpif.h'

type(circle_),intent(in)     :: circle

! local
integer,parameter       :: number=2
integer                 :: ierr, i
integer             :: block_lengths(number)
integer                 :: displacements(number)
integer                 :: address(number+1)
integer                 :: typelist(number)

!output
integer,intent(out) :: mesg_mpi_circle

!----------------------------------------

!  first specify the types
typelist(1)=MPI_REAL
typelist(2)=MPI_REAL

! specify the number of elements of each type
block_lengths(1)=size(circle%straal)
block_lengths(2)=size(circle%diameter)

! calculate displacements relative to refr. 
call MPI_Address(circle,address(1),ierr)
call MPI_Address(circle%straal,address(2),ierr)
call MPI_Address(circle%diameter,address(3),ierr)

do i = 1, number
    displacements(i)=address(i+1)-address(i)
enddo

! build the derived data type
call MPI_TYPE_STRUCT(number,block_lengths,displacements,&
                    typelist,mesg_mpi_circle,ierr)
! commit it to the system, so it knows we ll use it 
! for communication
call MPI_TYPE_COMMIT(mesg_mpi_circle,ierr)

return

end subroutine build_derived_circle

!------------- END SUBROUTINE----------------------------
end module create_mpi_types 
```

* * *

对于设置：该代码旨在在使用 Intel fortran 编译的 CentOs6 下的 ETH Brutus 集群上运行。但是我们在一些机器上测试了它，得到了同样的问题，所以我不认为这是一个版本问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:51:20.637

不是版本问题。简短的回答是 MPI 不喜欢具有可分配数组的类型。[这和这个问题](https://stackoverflow.com/questions/10419990/creating-an-mpi-datatype-for-a-structure-containing-pointers)是一样的。它与指针和虚拟内存地址有关，引用的答案向您展示了如果您真的想要如何去做。但是，如果可能的话，我会通过下面概述的方法 2 来完成。

有两种可能的方法来做到这一点。1）在内部创建固定长度的数组`type_hello_world`

```
type circle_
   real :: straal(100)
   real :: diameter(100)
end type circle_ 
```

2）创建一个`circle`只有一个元素的类型，然后创建一个圆数组。

```
type circle_
   real :: straal
   real :: diameter
end type circle_ 
```

我更喜欢第二种方法。另请注意，位移应为 MPI_ADDRESS_KIND 类型。所以你的代码会改变`create_mpi_types`为

```
module create_mpi_types

contains

subroutine build_derived_circle(mesg_mpi_circle)

use type_hello_world
use mpi

implicit none

! local
type(circle_)                  :: circle
integer,parameter              :: number=2
integer                        :: ierr, i
integer                        :: block_lengths(number)
integer(kind=MPI_ADDRESS_KIND) :: displacements(number)
integer                        :: typelist(number)
real                           :: r

!output
integer,intent(out) :: mesg_mpi_circle

!----------------------------------------

do i = 0, number
    typelist(i) = MPI_REAL
    block_lengths(i) = 1
    displacements(i) = i * sizeof(r)
enddo
! build the derived data type
call MPI_Type_create_struct(number,block_lengths,displacements,&
                typelist,mesg_mpi_circle,ierr)
if (ierr /= 0 ) then
    print *, 'got an error in type create: ', ierr
    call MPI_Abort(MPI_COMM_WORLD, ierr, ierr)
endif

! commit it to the system, so it knows we ll use it
! for communication
call MPI_TYPE_COMMIT(mesg_mpi_circle,ierr)
if (ierr /= 0 ) then
    print *, 'got an error in type commit: ', ierr
    call MPI_Abort(MPI_COMM_WORLD, ierr, ierr)
endif

return

end subroutine build_derived_circle

!------------- END SUBROUTINE----------------------------
end module create_mpi_types 
```

然后在`hello_world`

```
include 'hello_types.f90'
include 'mpi_circle.f90'

program hello_world

use mpi
use type_hello_world
use create_mpi_types

implicit none

integer                    :: ierr, num_procs, my_id, mpi_circle_t
type(circle_), allocatable :: circles(:)

call MPI_Init(ierr)

!find out MY process ID, and how many processes were started.

call MPI_COMM_RANK (MPI_COMM_WORLD, my_id, ierr)
call MPI_COMM_SIZE (MPI_COMM_WORLD, num_procs, ierr)

allocate(circles(num_procs))

if (my_id==0) then
    !print*,'enter straal and diameter'
    !read*,circle%diameter(1),circle%straal(1)
    circles(:)%diameter = 10.0
    circles(:)%straal = 2.0
endif

call build_derived_circle(mpi_circle_t)

call MPI_BCAST(circles,num_procs,mpi_circle_t,0,MPI_COMM_WORLD,ierr)

print *, "Hello world! I'm process ", my_id, " out of", num_procs, " processes."
print*,my_id,circles(my_id+1)%diameter,circles(my_id+1)%straal

call MPI_TYPE_FREE(mpi_circle_t, ierr)
deallocate(circles)

call MPI_Finalize(ierr) 
```

# java - Hibernate/JPA 查询语言带有子查询的新实体构造函数 - 无法找到合适的构造函数

> ID：14194456
> 
> 赞同：1
> 
> 时间：2013-01-07T10:56:34.293
> 
> 标签：java, hibernate, jpa

我有订单和订单欺诈警报。该关联仅从欺诈警报运行到订单，反之亦然。

```
public class FraudAlerts
...
@ManyToOne
@JoinColumn(name = "customerOrderId")
private CustomerOrder customerOrder; 
```

我的查询是这样的：

```
"select new com.acme.struts.search.FraudOrderSearchViewModel"
+ "(co.orderId, co.orderPlacedDate, tot.totalIncVat, adr.email, co.customerNumber, co.ipAddress, "
+ "(select name from FraudAlerts where co.orderId = customerOrder))"
+ " from CustomerOrder as co join co.customerBillTo adr join co.originalTotal as tot"); 
```

您可以看到我使用子查询来获取与此订单相关的所有欺诈警报名称作为集合并将其传递给视图模型 bean FraudOrderSearchViewModel。

我的问题是hibernate找不到合适的构造函数并抛出异常：

```
java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.acme.struts.search.FraudOrderSearchViewModel] [select new com.acme.struts.search.FraudOrderSearchViewModel(co.orderId, co.orderPlacedDate, tot.totalIncVat, adr.email, co.customerNumber, co.ipAddress, (select name from com.acme.data.model.fraud.FraudAlerts where co.orderId = customerOrder)) from com.acme.data.model.customer.CustomerOrder as co join co.customerBillTo adr join co.originalTotal as tot]
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1364)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1300)
at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:294)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
at $Proxy65.createQuery(Unknown Source)
at com.acme.services.fraud.FraudHibQueryTest.testFraudServiceHibQuery(FraudHibQueryTest.java:72) 
```

我的构造函数如下：

```
 public FraudOrderSearchViewModel(final String orderId, final Date datePlaced, final BigDecimal originalTotal, final String customerEmail, final String customerId,
        final String ipAddress, final Object[] holdReason) 
```

我试过 String[], List List 无济于事。hibernate 希望我使用的构造函数变量的类型是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:22:53.043

我发现我只是在关系模型中遇到了一个限制。我试图获取一个数据库行列表，其中每个行都包含一列，该列由另一个表中的多行组成。一个查询是不可能的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T11:05:02.670

你的休眠实体`FraudOrderSearchViewModel`应该有一个默认的无参数构造函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-18T17:28:18.623

此问题的一个原因是您从查询中的表中检索列的顺序。它必须与构造函数中的相同。

# c++ - 将 c++98 应用程序移植到 c++11

> ID：14194459
> 
> 赞同：1
> 
> 时间：2013-01-07T10:56:54.977
> 
> 标签：c++, c++11

> **可能重复：**
> [C++11 中引入了哪些重大更改？](https://stackoverflow.com/questions/6399615/what-breaking-changes-are-introduced-in-c11)

在 c++11 模式下简单地重新编译 c++98 应用程序/库是否安全？是否存在任何可能导致程序（在 c++11 模式下编译干净）出现故障的隐藏问题？

# symfony - Symfony2中如何实现角色/资源ACL

> ID：14194460
> 
> 赞同：6
> 
> 时间：2013-01-07T10:56:58.847
> 
> 标签：symfony, acl

我对 Symfony2 中实现访问控制列表的方式感到有些不安。

在 Zend Framework（版本 1 和 2）中，定义了**资源**列表和**角色**列表，并且为每个角色分配了允许访问的资源子集。因此资源和角色是 ACL 实现的主要词汇，而在 Symfony2 中并非如此，只有角色规则。

在旧版应用程序数据库中，我有表定义角色列表、资源列表和每个角色的允许资源列表（多对多关系）。每个用户都被分配了一个角色（管理员、超级管理员、编辑等）。

我需要在 Symfony2 应用程序中使用这个数据库。我的资源如下所示：ARTICLE_EDIT、ARTICLE_WRITE、COMMENT_EDIT 等。

我`User`在 Symfony 中的实体实现了`Symfony\Component\Security\Core\User\UserInterface`接口，因此有一个`getRoles)`方法。

我打算用这个方法来定义允许的资源，也就是说我使用角色作为资源（我的意思是Zend Framework中所谓的资源在这里称为角色）。

你确认我应该使用这种方法吗？

这意味着我不再关心每个用户的角色（管理员、编辑……），而只关心它的资源。

然后我会`$this->get('security.context')->isGranted('ROLE_ARTICLE_WRITE')`在我的控制器中使用。

这是正确的方法吗？难道不是在 Symfony 中使用角色的一种规避方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-27T15:26:54.907

多年后回答这个问题，很容易解决。

解决方案是混合角色和资源的概念。

假设定义了一个`role`表、一个`resource`表和`role_resource`多对多关系。

用户存储在一个`user`表中。

以下是相应的 Doctrine 实体：

用户：

```
use Symfony\Component\Security\Core\User\UserInterface;

class User implements UserInterface
{
    /**
     * @Id @Column(type="integer")
     * @GeneratedValue
     */
    private $id;

    /**
     * @ManyToOne(targetEntity="Role")
     * @JoinColumn(name="role_id", referencedColumnName="id")
     **/
    private $role;

    // ...
} 
```

角色：

```
class Role
{
    /**
     * @Id @Column(type="integer")
     * @GeneratedValue
     */
    private $id;

    /** @Column(type="string") */
    private $name;

    /**
     * @ManyToMany(targetEntity="Resource")
     * @JoinTable(name="role_resource",
     *      joinColumns={@JoinColumn(name="role_id", referencedColumnName="id")},
     *      inverseJoinColumns={@JoinColumn(name="resource_id", referencedColumnName="id")}
     *      )
     **/
    private $resources;

    // ...
} 
```

资源：

```
class Resource
{
    /**
     * @Id @Column(type="integer")
     * @GeneratedValue
     */
    private $id;

    /** @Column(type="string") */
    private $name;

    // ...
} 
```

`getRoles`所以现在的解决方案是实现`UserInterface`这种方式：

```
use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\Role\Role;

class User implements UserInterface
{
    // ...

    /**
     * @var Role[]
     **/
    private $roles;

    /**
     * {@inheritDoc}
     */
    public function getRoles()
    {
        if (isset($this->roles)) {
            return $this->roles;
        }

        $this->roles = array();

        $userRole = $this->getRole();

        $resources = $userRole->getResources();

        foreach ($resources as $resource) {
            $this->roles[] = new Role('ROLE_' . $resource);
        }

        return $this->roles;
    }

} 
```

这样，可以通过这种方式检查归属于当前用户的资源（假设有一个名称为 的资源`ARTICLE_WRITE`）：

```
$this->get('security.context')->isGranted('ROLE_ARTICLE_WRITE') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-04T14:01:47.790

我想这会回答你的问题。

[http://symfony.com/doc/current/cookbook/security/acl.html](http://symfony.com/doc/current/cookbook/security/acl.html) [http://symfony.com/doc/current/cookbook/security/acl_advanced.html](http://symfony.com/doc/current/cookbook/security/acl_advanced.html)

```
$builder = new MaskBuilder();
$builder
->add('view')
->add('edit')
->add('delete')
->add('undelete');
$mask = $builder->get(); // int(29)

$identity = new UserSecurityIdentity('johannes', 'Acme\UserBundle\Entity\User');
$acl->insertObjectAce($identity, $mask); 
```

# javascript - 删除后如何启用点击？

> ID：14194461
> 
> 赞同：0
> 
> 时间：2013-01-07T10:56:59.133
> 
> 标签：javascript

我在这里有两个条件， cond1 和 cond2 。如果它是 cond1 我将禁用我的`onclick`事件，否则我将启用它。

这是我捞出来的：

```
if(cond1) {
    document.getElementById('mTag').removeAttribute("onclick");
} else {
    document.getElementById('mTag').setAttribute('onclick');
} 
```

问题是一旦`onclick`被禁用，它就不会再次启用。如果是`cond2`，则必须启用它。我究竟做错了什么？请提出一些解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:59:59.560

为什么要这么做？无论如何，这将是烦人的用户体验。更好的是禁用/启用标签：

```
document.getElementById('mTag').disabled = cond1; 
```

为了防止点击事件，你必须[防止事件向上冒泡](https://stackoverflow.com/questions/4725242/disable-onclick-event)。

```
document.getElementById('mTag').onclick = function(e) {
    if (!e) var e = window.event;
    event.cancelBubble = !cond1;

    ...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:59:57.517

你做错了。删除该属性不会取消绑定事件。这是正确的方法：

```
document.getElementById("mTag").onclick = null; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:00:25.643

你不需要删除 onclick 属性你可以在你的处理程序中设置一个标志

```
var enable;
function myhandler() {
    if (enable) {
        //my code
    }
}

if(cond1){
   enable = false;
} else {
   enabled = true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T11:00:39.243

我认为最好设置一个标志，并在处理程序的开头检查该标志：

```
function handler(event) {
  if ( !this.flag )
    return;
  // do the actual handling
} 
```

# jsf - ViewParam 和 a4j:commandButton 的验证

> ID：14194462
> 
> 赞同：0
> 
> 时间：2013-01-07T10:57:03.937
> 
> 标签：jsf, ajax4jsf, commandbutton

我想我遇到了`@ViewScoped`with的错误`a4j:commandButton`。

我有一个非常复杂的表单，其中所有操作都使用 a4j，除了那些需要上传数据的操作。并且根据命令的顺序，viewParam 的验证会中断。

这是工作代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j" >

  <f:metadata>
    <f:viewParam id="viewParam" name="viewParam" value="#{bean.viewParam}" required="true" />
  </f:metadata>
  <h:head>
    <title>Test View Param</title>
  </h:head>
  <h:body>
    <h:message for="viewParam" />
    <hr/>
    <h:form>
      #{bean.viewParam}<br/>
      <h:commandButton value="cmdButton" />
      <a4j:commandButton value="a4jBtn" execute="@this" render="@form" />
    </h:form>  
  </h:body>
</html> 
```

只需单击`a4jBtn`，然后单击`cmdButton`即可查看问题。你会看到参数还在！但验证失败。

`<t:saveState>`没有帮助， `<rich:message>`也不是更好，但是

```
<h:commandButton value="ajaxBtn" ><f:ajax execute="@this" render="@form" /></h:commandButton> 
```

代替

```
<a4j:commandButton value="a4jBtn" execute="@this" render="@form" /> 
```

确实工作正常！

在 Tomcat 6.0.18 和 jboss-el 2.0.0.GA 上使用 myFaces 2.0.15 和 richFaces 4.2.3.Final。

`f:ajax`我可以通过使用而不是解决我的问题`a4j:commandButton`，但也许你有更好的主意，或者你可以向我解释出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:39:55.800

您基本上需要保留同步回发的视图参数。当您使用 OmniFaces 时，您可以使用[`<o:form>`](http://showcase.omnifaces.org/components/form)它。

```
<o:form includeViewParams="true"> 
```

或者由于您已经在使用视图范围的 bean，因此仅在非回发时触发验证。

```
<f:viewParam ... required="#{not facesContext.postback}" /> 
```

或者，当您使用 OmniFaces 时，您可以使用[`<o:viewParam>`](http://showcase.omnifaces.org/components/viewParam)它来跳过回发的验证/转换/更新。

```
<o:viewParam ... /> 
```

# python - 使用 pygame 在 python 中实现 Koch 雪花

> ID：14194469
> 
> 赞同：0
> 
> 时间：2013-01-07T10:57:32.363
> 
> 标签：python, math, pygame, coordinate-systems, snowflake-schema

我想使用 pygame实现 Koch [Koch 雪花。](http://en.wikipedia.org/wiki/Koch_snowflake)

我正在使用来自[http://en.wikipedia.org/wiki/File:KochFlake.svg的以下系列图片](http://en.wikipedia.org/wiki/File:KochFlake.svg)

![雪花的数字](../Images/0175191cd4542ab86338e22e545a5451.png)

我的算法是这样的

1.  画一个三角形
2.  计算三分之一大小的三角形的点并删除中心线
3.  找出外部点（如上图第二个图所示）
4.  列出所有端点
5.  使用多边形连接所有点

我已经完成了第二步。但是我在第三步上苦苦挣扎——因为我不知道如何找到外点——有什么提示吗？

这是我的代码到第二步

```
import pygame

from pygame.locals import *

pygame.init()

fpsClock = pygame.time.Clock()

screen = pygame.display.set_mode((600,600))

pygame.display.set_caption('Koch snowflake')

white = (255, 255, 255)

black = (0, 0 ,0)

def midpoints(pt1 , pt2):
   (x1, y1) = pt1
   (x2, y2) = pt2
   return ((x1+x2)/2, (y1 + y2)/2)

def midline(pt1, pt2):
(x1, y1) = pt1
(x2, y2) = pt2
return [(x1 + float(x2-x1)/3.0,y1 + float(y2-y1)/3.0), (x1 + float(x2-x1)*2.0/3,y1+ float(y2-y1)*2.0/3)]

def drawline(pt1, pt2):
   pygame.draw.line(screen, white, pt1, pt2)

def clearline(pt1,pt2):
   pygame.draw.line(screen, black, pt1, pt2, 4)

a = [(150,150), (450,150), (300,410), (150,150)]

pygame.draw.polygon(screen, white ,(a[0], a[1], a[2]), 1)
i = 0
order = 0
length = len(a)
while order < length - 1:
   pts = midline(a[i], a[i+1])
   clearline(pts[0], pts[1])
   a = a[:i+1] + pts + a[i+1:]
   print a
   if order < 3:
      i = i+3
   order = order + 1
#pygame.draw.polygon(screen, white ,Tup, 1)

pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:24:48.387

不完全是答案，但与您的更大问题相关。

[L-system](http://en.wikipedia.org/wiki/L-system)分形（就像您在此处尝试绘制的那样）最好使用基本的 L-system 解析器来完成。对于科赫雪花，“公理”（对初始形状的描述是这样的）`D++D++D++`。代表“`D`向前移动一个单位”和`+`“顺时针转动 30 度”。指令将由一个像光标一样的[海龟“解释”。](https://en.wikipedia.org/wiki/Turtle_graphics)做到这一点并不难。

一旦公理被绘制出来，你就会有一个段来替换`D`. 对于科赫薄片，`D-D++D-D`意思是“向前移动一个单位，逆时针转动30度，向前，顺时针转动60度，向前，逆时针转动30度，向前”。这为您提供了`_/\_`替换初始三角形边的形状。一个“单位”在每次迭代中减少到原始长度的三分之一。

现在，根据您的需要重复此操作多次并且您正在寻找。这是我最早的 Python 程序之一，我在[github](https://github.com/nibrahim/PFractL)上有一个粗略的解析器/解释器。它不使用 pygame，但您应该能够很容易地交换该部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:41:12.737

要计算点，我会使用矢量方法。如果三角形的角是 a1、a2 和 a3，那么你可以得到一条直线 a1 到 a2 上所有点的方程。使用该等式，您可以找到 a1 和 a2 之间 1/3 和 2/3 处的点。这些点之间的距离为您提供了要创建的新三角形的边。使用该信息以及 a1 和 a2 之间 1/2 的点，您可以计算出第三个新点的坐标。

# html - 向jsp页面传递参数

> ID：14194470
> 
> 赞同：0
> 
> 时间：2013-01-07T10:57:34.433
> 
> 标签：html, jsp

我正在创建一个基本的 HTML 表单，它将值发送到`.jsp`托管在另一个域上的页面。由于我不熟悉`.jsp`，我不知道它如何接受参数，

当我发送这个 URL [http://otherdomain.com/login.jsp?username=abc&password=def](http://otherdomain.com/login.jsp?username=abc&password=def)

它给了我输出，但一些用户名包含像'+'等符号。

因此，在尝试此 URL 时：

[http://otherdomain.com/login.jsp?username=+abc&password=def](http://otherdomain.com/login.jsp?username=+abc&password=def)

它给了我一个无效的用户名或密码错误。

请如果有人知道解决方案，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:26:59.590

您可以像这样使用 javascript 对参数进行编码：

```
encodeURIComponent("ab+c") 
```

并在服务器端解码参数：

```
username = URLDecoder.decode(username) 
```

一般来说login.jsp应该是用http post方法接收请求的，可以尝试用post方法给jsp发送参数，这样可以避免encode参数问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:12:32.790

您可以尝试对传递给 url 的值进行 url 编码。

# mysql - 根据 MySQL 中的 ID 列表检索行

> ID：14194473
> 
> 赞同：0
> 
> 时间：2013-01-07T10:57:55.867
> 
> 标签：mysql

我正在尝试检索具有子变量的表中的所有行，其中这些行的外键等于具有父变量的表中行的主键。

从图形上看，它看起来像这样：

表 1\. 此表包含父行。

```
ID  |  variable  |  variable  |  etc.
1   |  XX        |  BB        |  ...
2   |  YY        |  AA        |  ... 
```

表 2\. 此表包含子行。

```
ID  |  FK (parent)  |  variable  |  etc.
1   |  1            |  BB        |  ...
2   |  1            |  AA        |  ...
3   |  1            |  AA        |  ...
4   |  2            |  AA        |  ...
5   |  3            |  AA        |  ... 
```

我显然不是 SQL 专家，我通常会用另一种编程语言编写一个循环，循环遍历父表中的每一行，然后检查子表是否匹配。但是，我不知道这里最有效的方法是什么。父表将有 50 多行。children 表有 8000+ 行。

更新：我想将子表中的相关数据转储到新表中。所以我不想要一个包含来自父表和子表的数据的组合表，这就是我认为的 JOIN 。

更新2：我设法得到了我想要的东西：

```
INSERT INTO NewTable 
select columns
from ChildrenTable t
    inner join ParentTable p
        on t.parentId = p.Id 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:00:35.733

你可以这样试试——

```
Select * from table1 left join table2 on table1.id = table2.fk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:02:55.623

您可以尝试使用：

```
select * from table2, table1 where table2.fk = table1.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:03:50.283

select * from child_table_name 作为 tblchild，parent_table_name 作为 tblparent，其中 tblchild.fk_column_name=tblparent.id

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T12:57:02.750

你写了：

> 我想将子表中的相关数据转储到新表中。所以我不想要一个包含来自父表和子表的数据的组合表，这就是我认为的 JOIN 。

Well JOIN 只是结合了来自所选表的两个或多个*相关数据。*我的意思是你可以选择你想要的任何列，即如果你有这样的表（从你的原始表中更新了一些列）：

**父表**

```
ID  |  variable1  |  variable2  |  etc.
1   |  XX         |  BB         |  ...
2   |  YY         |  AA         |  ... 
```

**子表**

```
ID  |  FK-ID        |  variable  |  etc.
1   |  1            |  BB        |  ...
2   |  1            |  AA        |  ...
3   |  1            |  AA        |  ...
4   |  2            |  AA        |  ...
5   |  3            |  AA        |  ... 
```

并且您只想从第一个表中检索 ID，从第一个表中检索变量 2，从第二个表中检索变量，您将编写

```
SELECT ID.parent-table, variable2.parent-table, variable.child-table
FROM parent-table 
JOIN child-table ON parent-table.ID = FK-ID.child-table; 
```

或者，如果您不喜欢连接，您可以忽略它们，只从两个表中获取数据并指定 where 子句，即

```
SELECT ID.parent-table, variable2.parent-table, variable.child-table
FROM parent-table, child-table
WHERE parent-table.ID = FK-ID.child-table; 
```

上述两个书面查询是等效的。如果您愿意，您可以创建一个新表，让我们将其称为*父子表*，该表将是一个单独的副本。或者，如果您需要大量使用它，您可以创建一个虚拟表（它存储查询）的 VIEW（您可以 google 一下），例如，如果您在*parent-*表和子表的更改将反映在*父子视图*中，但如果您创建单独的新表*，父子表的*更改将不会反映，因为它只是一个副本。

# maven - 对于使用 PowerMock 和 easymock、Surefire 的 Maven 项目，所有 jUnit 测试用例都没有运行

> ID：14194474
> 
> 赞同：4
> 
> 时间：2013-01-07T10:57:56.487
> 
> 标签：maven, junit, easymock, powermock, surefire

在一个 Maven 项目中，我使用 PowerMock-easymock 来运行 jUnit 测试用例。但是在执行“mvn clean install”时，我的输出低于..

* * *

## 测试

运行 TestSuite 测试运行：2，失败：0，错误：0，跳过：0，经过时间：0.621 秒

结果 ：

测试运行：2，失败：0，错误：0，跳过：0

* * *

但是我还有很多其他的测试用例。这是 pom.xml 的一部分

```
<dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
</dependency>
<dependency>
        <groupId>org.easymock</groupId>
        <artifactId>easymock</artifactId>
        <version>3.1</version>
        <scope>test</scope>
</dependency>
<dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-easymock-release-full</artifactId>
        <version>1.4.12</version>
        <type>pom</type>
</dependency> 
```

如果我删除 PowerMock 依赖项并执行 "mvn clean install" ，所有测试用例都运行良好。但我必须使用 PowerMock。如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T12:09:38.530

我猜你的一些测试用例没有运行，你试过这个吗

1.  使用 mvn surefire 插件，并在其中包含测试用例。

2.  确保 powermock-module-junit4 的依赖性。

    查看这些链接：code.google.com/p/powermock/wiki/EasyMock_maven [http://code.google.com/p/powermock/wiki/GettingStarted](http://code.google.com/p/powermock/wiki/GettingStarted)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T16:08:01.320

我有同样的问题，我花了一段时间才弄清楚。我的设置是引入旧版本的 jboss.javassist，奇怪的是它完全阻止了 PowerMockRunner 工作。

值得注意的是，我也有一个混合的 JUnit / TestNG 环境。我之前尝试过添加多个surefire 提供程序的解决方案，但也没有用（使用surefire 2.14.1）。升级到 surefire 2.17 后，我的 JUnit 和 TestNG 测试都开始运行，而无需声明任何 surefire 提供程序。事实上，JUnit 提供程序为我抛出了一个错误，因为我正在使用组。显然，TestNG 提供者允许自由格式的文本（例如“集成”），而 JUnit 提供者需要一个类路径（例如“com.example.UnitTests”）。

这是我的插件部分...

```
 <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.17</version>
            <configuration>
                <groups>spring, unit, integration</groups>
                <systemPropertyVariables>
                    <java.awt.headless>true</java.awt.headless>
                    <org.apache.activemq.default.directory.prefix>target/test/</org.apache.activemq.default.directory.prefix>
                    <log4j.configuration>file:${project.basedir}/src/test/resources/log4j.properties</log4j.configuration>
                </systemPropertyVariables>
                <argLine>${surefire.args}</argLine>
            </configuration>
        </plugin> 
```

...以及相关的测试部门...

```
 <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.9.5</version>
        <scope>test</scope>
    </dependency>
    <!--
    PowerMock versions are compatible with specific Mockito versions.
    https://code.google.com/p/powermock/wiki/MockitoUsage13
     -->
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-module-junit4</artifactId>
        <version>1.5.4</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-api-mockito</artifactId>
        <version>1.5.4</version>
        <scope>test</scope>
    </dependency>
    <!-- without this PowerMock tests don't run in maven -->
    <dependency>
        <groupId>jboss</groupId>
        <artifactId>javassist</artifactId>
        <version>3.8.0.GA</version>
        <scope>test</scope>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:01:45.977

根据迪帕克，

解决方案 1：在 pom.xml 中添加以下代码

```
<plugin>
       <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-surefire-plugin</artifactId>
       <version>2.13</version>
       <dependencies>
            <dependency>
                 <groupId>org.apache.maven.surefire</groupId>
                 <artifactId>surefire-junit47</artifactId>
                 <version>2.13</version>
            </dependency>
       </dependencies>
</plugin> 
```

对于正确的 ArtifactId 依赖项，如果您使用的是 jUnit ，则可以查看此[链接。](http://maven.apache.org/surefire/maven-surefire-plugin/examples/junit.html)

然后执行“mvn clean install”

解决方案 2：在 pom.xml 中添加以下代码

```
<properties>
    <powermock.version>1.5</powermock.version>
</properties>
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-module-junit4</artifactId>
        <version>${powermock.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.powermock</groupId>
        <artifactId>powermock-api-easymock</artifactId>
        <version>${powermock.version}</version>
        <scope>test</scope>
    </dependency> 
```

有关详细信息，请参阅此[链接](http://code.google.com/p/powermock/wiki/EasyMock_maven)

所有学分都归 Dipak

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-09T05:08:29.973

我最近遇到了一种情况，即运行了 PowerMock 测试，但未包含在可靠的覆盖率报告中。我们发现问题与仪器有关。

我会注意到我们的大多数测试都是使用 TestNG 运行的。一般来说，我们只在需要利用 PowerMock 时才使用 JUnit。

这是POM片段：

```
<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.18.1</version>
    <configuration>
        <systemPropertyVariables>
            <org.apache.activemq.default.directory.prefix>target/test/</org.apache.activemq.default.directory.prefix>
            <log4j.configuration>file:${project.basedir}/src/test/resources/log4j.properties</log4j.configuration>
            <jacoco-agent.destfile>${project.basedir}/target/jacoco.exec</jacoco-agent.destfile>
        </systemPropertyVariables>
        <argLine>-Xmx512m -XX:MaxPermSize=256m -Djava.awt.headless=true</argLine>
    </configuration>
</plugin>
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <version>0.7.5.201505241946</version>
    <executions>
        <execution>
            <id>instrument</id>
            <phase>process-classes</phase>
            <goals>
                <goal>instrument</goal>
            </goals>
        </execution>
        <execution>
            <id>restore</id>
            <phase>test</phase>
            <goals>
                <goal>restore-instrumented-classes</goal>
                <goal>report</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

可能与`<systemPropertyVariables>`修复无关。

另外，请注意 JaCoCo 的文档警告不要使用这种类型的配置，除非您认为有必要。

[http://www.eclemma.org/jacoco/trunk/doc/instrument-mojo.html](http://www.eclemma.org/jacoco/trunk/doc/instrument-mojo.html)

> 警告：使用 JaCoCo 进行代码覆盖分析的首选方法是动态检测。离线检测有几个缺点，只有在特定场景明确需要此模式时才应使用。在使用此模式之前，请查阅有关离线检测的文档。

# android - Nexus 7 上支持的 NFC 标签

> ID：14194477
> 
> 赞同：1
> 
> 时间：2013-01-07T10:58:05.417
> 
> 标签：android, nfc, nexus-7

我试图找到 Google Nexus 7 支持哪些 NFC 芯片以及可以执行哪些操作，但不知何故我找不到合适的信息。我想通过 NCF 芯片发送一个 Intent 并开始播放音频，例如，我将 Nexus 7 作为测试设备。那可能吗？应该使用什么芯片？我有一个可编程的 Experia SmartTag，我找到了一些关于如何对其进行编程的信息，但我认为它只能在 experia 设备上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:44:41.203

看看 Android Beam 规范，这些是可以用 Android 设备检测到的有效“技术”：

[http://developer.android.com/reference/android/nfc/tech/package-summary.html](http://developer.android.com/reference/android/nfc/tech/package-summary.html)

我已经使用 Mifare Ultralights 制作了一个像你这样的示例应用程序，它已经奏效了。

# java - Java模式匹配器查找多个字符串

> ID：14194479
> 
> 赞同：1
> 
> 时间：2013-01-07T10:58:19.707
> 
> 标签：java, regex

我`Pattern.compile()`用来查找文本字符串是否包含其他两个字符串。但它需要采用一种正则表达式模式。

例如，字符串中必须包含“StringOne”和“StringTwo”。

我可以`Pattern.compile("(StringOne StringTwo|StrinTwo StringOne")`，但是两个字符串都很长，我想看看我是否可以压缩它。

如果我这样做`"(StringOne )?StringTwo( StringOne)?"`，它将匹配“StringTwo”和“StringOne StringTwo StringOne”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:08:45.497

有速度问题。您可能可以使用前瞻来完成此操作，但它的速度成本很高。前瞻在长字符串上非常广泛。

如果字符串很长，更快的方法是进行两个单独的匹配。

如果你真的需要做一个，使用你原来的方式`string A string B|String B String A`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:00:34.847

使用这个正则表达式：

```
^(?=.*\\bStringOne\\b)(?=.*\\bStringTwo\\b) 
```

这使用锚定到输入开始的两个前瞻来断言两个字符串都出现在*某处*

编辑：在字符串的末尾添加了单词边界`\b`，以防止一个字符串在另一个字符串中匹配，尽管这不是问题的明确要求。

# symfony - Twig 和变量作为数字

> ID：14194482
> 
> 赞同：0
> 
> 时间：2013-01-07T10:58:33.507
> 
> 标签：symfony, twig

我从数据库中得到一个数字（比如说，`10`），我想在`if/else`语句中使用它。请注意，我的变量可能等于 0 或 null。

我的变量是`item.getRate.getRate`. 我在这样的模板中显示它：

> {{ item.getRate.getRate | 默认（'0'）}}

我试着做一个`if`声明

> {% if item.getRate.getRate == 1 %}某事{% endif %}

但它不起作用。

它在循环中运行，其中一项为空`getRate`。这可能是问题吗？如果是 - 我怎样才能避免它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:18:53.563

您可以将这两种测试结合起来，以使您的代码易于阅读。

```
{% if item.getRate.getRate is defined and item.getRate.getRate == 1 %} 
    checked="checked"
{% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:15:36.460

我只需要检查变量是否存在；）

> {% if item.getRate.getRate is defined %}{% if item.getRate.getRate == 1 %} checked="checked"{% endif %}{% endif %}

有点长，但有效。有人有更好的主意吗？因为它会很棒，现在它有点难看:))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:56:46.580

假设 getRate 具有非零、非空值对于这种布尔值指示是必要的，如您的示例所示：

```
{% if not(not(item.getRate.getRate)) %} 
    checked="checked"
{% endif %} 
```

# linear-algebra - 更改 IDL 线性代数例程使用的 LAPACK 实现？

> ID：14194483
> 
> 赞同：0
> 
> 时间：2013-01-07T10:58:36.270
> 
> 标签：linear-algebra, dynamic-linking, lapack, idl-programming-language

在[http://scicomp.stackexchange.com](http://scicomp.stackexchange.com) ，我问[了这个](https://scicomp.stackexchange.com/questions/4964/what-algorithm-to-use-for-parallel-dense-matrix-inversion-on-at-most-8-cores)关于 IDL 中并行矩阵算法的问题。答案建议使用多线程 LAPACK 实现，并建议一些技巧来让 IDL 使用特定的 LAPACK 库。我无法让它工作。

理想情况下，我希望现有的 LAPACK DLM 能够简单地使用多线程 LAPACK 库，感觉这应该是可能的，但我没有取得任何成功。或者，我想下一个最简单的步骤是创建一个新的 DLM 以在一些 C 代码中包装矩阵求逆调用，并确保该 DLM 指向所需的实现。不过，创建 DLM 的文档让我眼花缭乱，因此任何有关执行此操作的指示（如果需要）也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:12:31.263

你的目标是什么平台？

在我的平台（Mac OS X，IDL 8.2.1）上查看`idl_lapack.so`with`nm`似乎表明 LAPACK 例程直接在`.so`. `LD_LIBRARY_PATH`）。

```
$ nm idl_lapack.so
...
000000000023d5bb t _dgemm_
000000000023dfcb t _dgemv_
000000000009d9be t _dgeqp3_
000000000009e204 t _dgeqr2_
000000000009e41d t _dgeqrf_
000000000023e714 t _dger_
000000000009e9ad t _dgerfs_
000000000009f4ba t _dgerq2_
000000000009f6e1 t _dgerqf_ 
```

其他一些可能性...

我的[个人库](https://github.com/mgalloy/mglib)有一个目录`src/dist_tools/bindings`，其中包含为给定“简单”（即不使用 typedef）函数原型的库自动创建绑定的例程。LAPACK 将相当容易为其创建绑定（最困难的部分可能是构建您想要使用 ATLAS、PLAPACK、ScaLAPACK 等的包）。该库是免费使用的，如果您愿意，可以签订一份小型咨询合同。

下一版本的 GPULib 将包含使用 MAGMA 库的 LAPACK 的 GPU 实现。这实际上是一个高度并行的选项，但仅适用于 CUDA 显卡。如果除矩阵求逆之外的其他操作可以在 GPU 上完成以最小化内存传输，它也将工作得最好。这个选项需要花钱。

# ruby - 在 ruby 脚本中 cd 时尊重 rvmrc

> ID：14194485
> 
> 赞同：1
> 
> 时间：2013-01-07T10:58:46.457
> 
> 标签：ruby, git, rvm, rvmrc

**背景：**我在 MRI 1.9.2p320 中编写了一个简短的脚本来更新我的所有项目 - [http://git.io/eez8Kg](http://git.io/eez8Kg)。我用于更新/拉取自身的工具（[git-up](https://github.com/aanand/git-up)）也能够在发现更改的 Gemfile 后自动捆绑项目。问题是，当我在 Ruby 脚本中更改目录时，它不尊重项目的 rvmrc/gemset（每个项目都有自己的 gemset）。

**问题：**如何`cd`在 Ruby 脚本中实现与终端中相同的行为

**我试过了：**

*   `Dir.chdir`用`s中的cd命令替换
*   替换`Dir.chdir`为 `s 中的 cd 命令`zsh -ci`

**代码：**

```
Find.find('../..') do |f|
  if f =~ /\.git$/
    repository = f.gsub /\.git$/, ''
    Logger.new(STDOUT).info('Checking '){repository}
    Dir.chdir(repository){
      puts `git up`
    }
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:10:39.540

[Open3.html#popen3](http://www.ruby-doc.org/stdlib-1.9.2/libdoc/open3/rdoc/Open3.html#method-c-popen3) FTW

```
zshin, zshout, zsherr = Open3.popen3('zsh') # Open new shell
zshin.puts 'cd ~/Projects/superimportant_project' # Change directory
zshin.puts 'rvm-prompt' # Verify rvmrc is respected
zshin.puts 'exit' # Exit the shell
while (line = zshout.gets)
  puts line
end 
```

退出 shell 不是强制性的，但例如`rvm-prompt`保持挂起，不让其他任何事情发生。如果你用 ls 做同样的事情，你就不需要退出行。

*   非常感谢 yorickpeterse@Freenode#ruby-lang 让我加入 Open3 轨道
*   其他有用的阅读 -> [6 种在 Ruby 中运行 Shell 命令的方法](http://tech.natemurray.com/2007/03/ruby-shell-commands.html)

# android - 用一个 apk 安装两个 android 应用程序 - 来自谷歌市场的示例

> ID：14194486
> 
> 赞同：1
> 
> 时间：2013-01-07T10:58:48.177
> 
> 标签：android, installation, apk, google-play, android-install-apk

我是 android 开发新手。我想了解有关 android 应用程序安装的信息。是否可以在 apk 文件中有两个应用程序。我的意思是，如果我安装一个 apk 文件，它会在启动器列表中创建两个 android 应用程序图标吗？谷歌市场中是否有任何真正的应用程序，以便我可以下载并有一些经验？请帮助我。谢谢

杰扬蒂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:09:22.137

您只能使用 APK 安装一个“应用程序”。但是您可以为一个应用程序定义多个活动。在您的`manifest.xml`系统中，您可以创建多个活动，每个活动都可以完成自己的任务。一个应用程序，如果被视为执行用户需要的一组任务的东西，那么一个活动也可以被视为一个应用程序。从这个意义上说，当您的应用程序中有多个**独立**的活动时，每个活动都执行自己的任务，您的必要性就得到了满足。

**更新：** 在您重新提出问题后：是的，我认为这是允许的。查看 Go Launcher.Ex

**更新：文章** [Android Launcher 垃圾邮件](http://androidandme.com/2010/07/news/could-launcher-spam-become-a-big-problem-in-the-android-market/)

上面的文章讨论了是否创建多个启动器图标的应用程序。他们还给出了应用示例。还有一些启动器垃圾邮件应用程序只会在启动器中创建大量图标。但基本上，这是非常允许的，谷歌不检查。

有关技术细节，只需谷歌如何让应用程序创建多个启动器图标，您将获得大量信息。

# iframe - yii datepicker 小部件内嵌在fancybox 中的 iframe

> ID：14194489
> 
> 赞同：0
> 
> 时间：2013-01-07T10:58:51.550
> 
> 标签：iframe, yii, fancybox, jquery-ui-datepicker

嗨，我是 JS 的新手，正在尝试以下方法：

我有一个 Yii 应用程序，其中有一个 ajaxLink 触发了一个幻想框。此链接在幻想框内的 iframe 中呈现视图。渲染视图是一个包含 Yii zii.widgets.jui.CDatePicker 小部件的表单。这将呈现视图并显示具有正确日期值的日期文本字段。但是onclick它不显示日历。

触发fancybox的代码：

```
echo CHtml::ajaxLink('Add Entry',Yii::app()->createUrl('site/myentry', array('action'=>'new')),
 array('type'=>'GET', 'update'=>'#adexp', 'complete'=>'afterAjax')); 
```

js函数：

```
function afterAjax()
{
$.fancybox({
    href : '#adexp',
    scrolling : 'no',
    transitionIn : 'fade',
    transitionOut : 'fade', 
width: 1024, 
height: 500,
autoDimensions: false,        
    onClosed: function() { $('#adexp').html(''); location.reload();},
});
} 
```

为表单渲染 iframe：

```
<iframe src="<?php echo $this->createUrl('site/entryform', array('UtcRecord'=>$model->UtcRecord, 'UserId'=>$model->UserId, 'action'=>$action));?>"  style="width: 100%; height:440px;" id="entryform"></iframe> 
```

以及此表单视图中的小部件：

```
$this->widget(
        'zii.widgets.jui.CJuiDatePicker',
        array(
        'model'     => $model,
        'attribute' => 'EntryTime',         
        'language'=> 'en',      
        'options'   => array(
            'dateFormat' => 'dd-mm-yy',
            'style'=>'z-index: 5000;',             
        ),
        )
    ); 
```

Firebug 的观察：表单中的输入字段没有 Datepicker 类。如果我在普通页面中使用相同的 Yii 小部件代码，则此类存在于输入标签中并且小部件工作正常。

我试过： 1\. 将 datepicker 小部件的 z-index 增加到 5000。 2\. 在 iframe 头标签中手动包含 jquery 和 css，因为我认为 iframe 可能不会拾取样式和 js。

这可能是 iframe 内的 Yii 小部件渲染问题吗？

非常感谢您对这个问题的任何见解。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:41:48.147

改变你`renderPartial()`的

```
$this->renderPartial('path.to.view',$variables_into_view,false,true); 
```

最后一个参数是`$processOutput`调用[CController::processOutput()](http://www.yiiframework.com/doc/api/1.1/CController#processOutput-detail)，它将所需的客户端脚本（在您的情况下为`datePicker`js 和 css）插入到输出中。

# c# - 左键单击 GridView 中的多项选择

> ID：14194492
> 
> 赞同：1
> 
> 时间：2013-01-07T10:58:55.127
> 
> 标签：c#, windows-8, microsoft-metro

我试图在鼠标左键单击时在 gridview 中选择多个项目。我通过右键单击完成了它。我还在左键单击时完成了单项选择，如下所示

```
 if (this.UsingLogicalPageNavigation()) this.InvalidateVisualState();
        this.itemsViewSource.View.MoveCurrentTo(e.ClickedItem); 
```

我们如何在左键单击时在 GridView 中进行多项选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:11:55.097

由于您想使用左键选择项目，我假设您不希望项目单击行为？在这种情况下，请使用以下...

```
<GridView
        ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="Multiple"
        IsSwipeEnabled="false"
        IsItemClickEnabled="False" /> 
```

如果您想允许项目单击行为，您将设置`IsItemClickEnabled = true;`并使用内置的滑动选择机制来选择项目。

```
<GridView
        ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="Multiple"
        IsSwipeEnabled="true"
        IsItemClickEnabled="true"
        ItemClick="ItemView_ItemClick"> 
```

# jquery - 动画背景图像顶部位置 - Jquery

> ID：14194501
> 
> 赞同：0
> 
> 时间：2013-01-07T10:59:22.990
> 
> 标签：jquery

是否可以使用 jquery 为背景图像顶部位置设置动画？我努力了 -

```
 $('#intro1').animate({ background-position: 'top'}, 1000); 
```

和

```
 $('#intro1').animate({ background-position: '0, 1600px'}, 1000); 
```

但是两者都没有运气 - 是否有任何人可以推荐的可用插件/方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:09:09.007

有可能，试试：

```
$("#element").animate({'background-position':'top'}, 1000); 
```

和

```
$('#element').animate({
 'background-position-x':'0',
 'background-position-y':'1600px'
 }, 1000); 
```

javascript中的`-`数组对象是不允许的，你必须将它转换为字符串祝你好运

# asp.net - 有没有办法确保在回收之前关闭应用程序池中的所有活动会话

> ID：14194503
> 
> 赞同：2
> 
> 时间：2013-01-07T10:59:28.050
> 
> 标签：asp.net, .net, iis

我需要每周回收一次 IIS 应用程序池，并且在回收之前需要确保应用程序池中的所有活动会话都已关闭。有办法吗？使用.net。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:00:46.657

IIS 回收通常是“重叠的”，这意味着**请求**不会被切断：正在运行的请求被允许继续，而新的请求由新的池实例提供服务。见[这里](http://technet.microsoft.com/en-us/library/cc735206%28v=ws.10%29.aspx)。

但这对**会话**（跨越多个请求）没有帮助。InProc Session 将被回收丢弃。但是，您可以使用 stateserver 或 sqlserver 将会话状态存储在进程外，因此不会被回收。见[这里](http://msdn.microsoft.com/en-us/library/ms178586.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:05:33.313

这怎么可能？会话可能需要几分钟才能关闭。所以等待他们是不切实际的。

我想你问错问题了。您应该问“我可以防止所有会话在回收时被销毁吗？”。回答：是的。使用`StateServer`模式。

# php - 更有效地验证 PHP 文件的语法

> ID：14194509
> 
> 赞同：6
> 
> 时间：2013-01-07T09:07:05.047
> 
> 标签：php, continuous-integration, syntax

**验证一堆 PHP 文件的语法很慢**

`php -l file.php`作为持续集成设置的一部分，我们用于验证许多 php 文件的语法。我们实际上做了类似的事情：`find . -name "*.php" | xargs --max-args=1 php -l" 因为**php 可执行文件只接受一个参数**。

这非常*慢*，主要是因为它涉及为每个 PHP 文件启动一个全新的解析器/解释器（更不用说进程），以验证它的语法，我们有数千个。

有更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:09:58.183

在搜索中添加时间怎么样？

```
`find . -mtime -7 -name "*.php" | xargs --max-args=1 php -l 
```

到 find 命令只验证上周修改过的文件？

我假设您的大部分代码库不会每隔几天更改一次？

**更新**

您可能还想尝试 -newer 标志

```
`find . -newer /path/to/file -name "*.php" | xargs --max-args=1 php -l 
```

它会发现所有比给定文件更新的文件，非常方便，特别是如果您的版本控制每次结帐时都会更改某个系统文件，或者使用：

```
touch -t 201303121000 /path/to/file 
```

创建一个与 -newer 一起使用的虚拟文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:52:05.643

出于同样的原因，我完全放弃了`php -l`，尽管在我的情况下（也许在你的情况下）这并不重要。

由于我使用 PHPUnit 进行单元测试，因此不需要对正在测试的文件进行 lint。如果文件无法通过 linter，它也不会通过任何测试（即使是仅包含文件的测试）。

如果你*没有*用 PHPUnit 覆盖 100% 的文件，你可以用类似的东西来伪造 linter 的效果：

```
class FakeLinterTest extends PHPUnit_Framework_TestCase {
    public function testLintAllTheFiles() {
        foreach ($this->listAllPHPFiles() as $file) {
            include_once($file);
        }
    }

    private function listAllPHPFiles() {
        // Traverse your entire source tree.
    }
} 
```

该代码完全未经测试。此外，如果您有一个大项目，您可能需要玩有内存限制的游戏和/或将“lint”分解成块以阻止它破坏您的 CI 系统。

# c# - MVC3 脚本包只呈现空脚本标签

> ID：14194512
> 
> 赞同：0
> 
> 时间：2013-01-07T10:59:54.227
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

当我查看一个页面时，我能看到的只有 -

`<script></script>`

我的 _Layout.cshtml 看起来像

`<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/helpdesk/Scripts")"></script>`

`Application_Start()``Global.asxc.cs`看起来像

```
protected void Application_Start() {
AreaRegistration.RegisterAllAreas();
BundleTable.Bundles.EnableDefaultBundles();

RegisterGlobalFilters(GlobalFilters.Filters);
RegisterRoutes(RouteTable.Routes);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:18:36.707

您使用的自定义目录不会被默认捆绑包覆盖。您需要添加一个新捆绑包，例如

```
var bundle = new Bundle("~/helpdesk/js", new JsMinify());
bundle.AddDirectory("~/helpdesk/js", "*.js", true);
BundleTable.Bundles.Add(bundle); 
```

如果您的自定义文件夹位于默认目录之一（例如`~/Content/helpdesk/js`/ ）中`~/Scripts/helpdesk/`，则您不必这样做。

# macos - 如何使用applescript在苹果邮件中检索外发邮件的电子邮件正文？

> ID：14194515
> 
> 赞同：1
> 
> 时间：2013-01-07T11:00:01.333
> 
> 标签：macos, applescript, apple-mail

如何检索外发邮件的电子邮件正文、收件人电子邮件地址、主题等。

谢谢你的帮助。

**编辑：-** 我在外发邮件工具栏中添加了一个自定义按钮，请参见图片。

![在此处输入图像描述](../Images/859f194980d36311e415a8da4f8d7bb0.png)

该按钮的功能是发送邮件并将所有邮件详细信息保存在我的服务器上，所以我怎样才能获得这些详细信息，例如电子邮件地址“To”=“test@gmail.com”和“cc”=“test2@gmail” .com", subject="我的主题" 和电子邮件正文="我的电子邮件正文"

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:48:24.273

通过这个苹果脚本，您可以检索邮件内容，所以请尝试一下。

```
tell application "System Events"
    tell process "Mail"
        set _Contents to {}
        set _contentDetail to {}
        set the _contentDetail to entire contents of UI element 1 of scroll area 3 of window 1
        repeat with _value in _contentDetail
            set str to ""
            if class of _value is static text then
                set str to value of _value
            end if
            set str to str & return
            set _Contents to _Contents & str

        end repeat
        return get _Contents as string
    end tell
end tell 
```

# object - unity3d：如何使 SpotLight 跟随对象？

> ID：14194517
> 
> 赞同：1
> 
> 时间：2013-01-07T11:00:08.820
> 
> 标签：object, rotation, unity3d, light

我正在让一个对象在它的 update() 中移动，并根据用户输入向左向右向上向下。我想要的只是使聚光灯跟随对象。物体的旋转：0,180,0 聚光灯的旋转：90,0,0 由于旋转不同（而且它们必须是这样的），我不能让灯光跟随物体。代码 ：

```
function Update () {

    SetControl(); // Input Stuff... 

    transform.Translate (0, 0, objectSpeed*Time.deltaTime);

    lightView.transform.eulerAngles=this.transform.eulerAngles;
    lightView.transform.Rotate=this.transform.eulerAngles;
    lightView.transform.Translate(snakeSpeed*Time.deltaTime,0, 0);  //THIS IS INCORRECT

} 
```

lightView 只是指向 SpotLight。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:14:36.270

您正在寻找的是 Unity 方法[Transform.lookAt](http://docs.unity3d.com/Documentation/ScriptReference/Transform.LookAt.html)。

将以下脚本放在聚光灯下。此代码将使其附加到的对象，查看另一个对象。

```
// Drag another object onto it to make the camera look at it.
var target : Transform; 

// Rotate the camera every frame so it keeps looking at the target 
function Update() {
    transform.LookAt(target);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:12:46.123

> 我想要的只是使聚光灯跟随对象。

这是一个两步过程。首先，找到目标的坐标位置（在世界坐标中）。其次，将该位置加上偏移量应用于您的聚光灯。由于您的灯光沿 x 轴旋转 90°，因此我假设您的灯光在上方并向下看。

```
var offset = new Vector3(0, 5, 0);

function Update()
{
  // Move this object
  transform.Translate (0, 0, objectSpeed*Time.deltaTime);

  // Move the light to transform's position + offset.
  // Note that the light's rotation has already been set and does
  //  not need to be re-set each frame.
  lightView.transform.position = transform.position + offset;
} 
```

如果您想要更平滑的“跟随”动作，请随时间进行线性插值。代替

```
lightView.transform.position = transform.position + offset; 
```

和

```
lightView.transform.position = Vector3.Lerp(lightView.transform.position, transform.position + offset, Time.deltaTime * smoothingFactor); 
```

`smoothingFactor`浮动在哪里。

`transform.*`顺便说一句，调用任何类型的重复游戏循环几乎是死路一条，因为`GameObject.transform`它实际上是一个执行组件搜索的 get 属性。大多数 Unity 文档建议您首先缓存转换变量。

更好的代码：

```
var myTrans = transform;    // Cache the transform
var lightTrans = lightView.transform;
var offset = new Vector3(0, 5, 0);

function Update()
{
  // Move this object
  myTrans.Translate (0, 0, objectSpeed*Time.deltaTime);

  // Move the light to transform's position + offset.
  // Note that the light's rotation has already been set and does
  //  not need to be re-set each frame.
  lightTrans.position = myTrans.position + offset;
} 
```

# c - 将图分成三部分，使三部分的权重之和的最大值最小化

> ID：14194519
> 
> 赞同：4
> 
> 时间：2013-01-07T11:00:16.960
> 
> 标签：c, algorithm, graph, graph-algorithm, depth-first-search

我想将具有 N 个加权顶点和 N-1 个边的图划分为三个部分，以使每个部分中所有顶点的权重总和的最大值最小化。这是我试图解决的实际问题，[http://www.iarcs.org.in/inoi/contests/jan2006/Advanced-1.php](http://www.iarcs.org.in/inoi/contests/jan2006/Advanced-1.php)

我考虑了以下方法

```
/*Edges are stored in an array E, and also in an adjacency matrix for depth first search.
Every edge in E has two attributes a and b which are the nodes of the edge*/
min-max = infinity
for i -> 0 to length(E):
   for j -> i+1 to length(E):
     /*Call depth first search on the nodes of both the edges E[i] and E[j]
     the depth first search returns the sum of weights of the vertices it visits,
     we keep track of the maximum weight returned by dfs*/
     Adjacency-matrix[E[i].a][E[i].b] = 0;
     Adjacency-matrix[E[j].a][E[j].b] = 0;
     max = 0
     temp = dfs(E[i].a) 
     if temp > max then max = temp
     temp = dfs(E[i].b) 
     if temp > max then max = temp
     temp = dfs(E[i].a) 
     if temp > max then max = temp
     temp = dfs(E[i].a) 
     if temp > max then max = temp

     if max < min-max
        min-max = max
     Adjacency-matrix[E[i].a][E[i].b] = 1;
     Adjacency-matrix[E[j].a][E[j].b] = 1;
    /*The depth first search is called four times but it will terminate one time
   if we keep track of the visited vertices because there are only three components*/

  /*After the outer loop terminates what we have in min-max will be the answer*/ 
```

上述算法需要 O(n^3) 时间，因为边的数量将是 n-1，外循环将运行 (n-1)！需要 O(n^2) 的时间，dfs 将只访问每个顶点一次，因此是 O(n) 时间。

但问题是 n 可以 <= 3000 并且 O(n^3) 时间不适合这个问题。是否有任何其他方法可以比 n^3 更快地计算解决链接中的问题？

### 编辑：

我在 c 中实现了@BorisStrandjev 的算法，它给了我对问题中测试输入的正确答案，但对于所有其他测试输入，它给出了错误答案，这是我在 ideone [http://ideone.com中的代码的链接/67GSa2](http://ideone.com/67GSa2)，这里的输出应该是 390 但程序会打印 395。

我试图找出我的代码是否有任何错误，但我没有看到任何错误。任何人都可以在这里帮助我，我的代码给出的答案非常接近正确答案，那么算法还有什么更多的吗？

### 编辑2：

在下图中-

![在此处输入图像描述](../Images/5e28aec3a459375accc58ca38f8cfb45.png)@BorisStrandjev，您的算法将在其中一次迭代中选择 i 作为 1， j 作为 2，但是第三部分 (3,4) 无效。

## 编辑 3

我终于在我的代码中遇到了错误，而不是 V[i] 存储 i 的总和及其所有后代，而是存储 V[i] 及其祖先，否则它将正确解决上述示例，感谢大家的帮助.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:42:05.017

是的，有更快的方法。

我将需要一些辅助矩阵，我将以正确的方式将它们的创建和初始化留给您。

首先种植树 - 即使图形定向。计算每个顶点的数组`VAL[i]`- 一个顶点及其所有后代的乘客数量（记住我们已经种植，所以现在这是有道理的）。`desc[i][j]`如果 vertex`i`是 vertex 的后代，还计算布尔矩阵`j`。然后执行以下操作：

```
best_val = n
for i in 1...n
  for j in i + 1...n
    val_of_split = 0
    val_of_split_i = VAL[i]
    val_of_split_j = VAL[j]
    if desc[i][j] val_of_split_j -= VAL[i] // subtract all the nodes that go to i
    if desc[j][i] val_of_split_i -= VAL[j]
    val_of_split = max(val_of_split, val_of_split_i)
    val_of_split = max(val_of_split, val_of_split_j)
    val_of_split = max(val_of_split, n - val_of_split_i - val_of_split_j)
    best_val  = min(best_val, val_of_split) 
```

执行此循环后，答案将在`best_val`. 该算法显然是`O(n^2)`您只需要弄清楚如何计算`desc[i][j]`并且`VAL[i]`如此复杂，但这并不是一项复杂的任务，我认为您可以自己弄清楚。

**编辑**在这里，我将在伪代码中包含整个问题的代码。在OP自己尝试解决之前，我故意不包含代码：

```
int p[n] := // initialized from the input - price of the node itself
adjacency_list neighbors := // initialized to store the graph adjacency list

int VAL[n] := { 0 } // the price of a node and all its descendants
bool desc[n][n] := { false } // desc[i][j] - whether i is descendant of j

boolean visited[n][n] := {false} // whether the dfs visited the node already
stack parents := {empty-stack}; // the stack of nodes visited during dfs

dfs ( currentVertex ) {
   VAL[currentVertex] = p[currentVertex]
   parents.push(currentVertex)
   visited[currentVertex] = true
   for vertex : parents // a bit extended stack definition supporting iteration
       desc[currentVertex][vertex] = true
   for vertex : adjacency_list[currentVertex]
       if visited[vertex] continue
       dfs (currentvertex)
       VAL[currentVertex] += VAL[vertex]
   perents.pop

calculate_best ( )
    dfs(0)
    best_val = n
    for i in 0...(n - 1)
      for j in i + 1...(n - 1)
        val_of_split = 0
        val_of_split_i = VAL[i]
        val_of_split_j = VAL[j]
        if desc[i][j] val_of_split_j -= VAL[i]
        if desc[j][i] val_of_split_i -= VAL[j]
        val_of_split = max(val_of_split, val_of_split_i)
        val_of_split = max(val_of_split, val_of_split_j)
        val_of_split = max(val_of_split, n - val_of_split_i - val_of_split_j)
        best_val  = min(best_val, val_of_split)
    return best_val 
```

最好的分割是`{descendants of i} \ {descendants of j}`,`{descendants of j} \ {descendants of i}`和`{all nodes} \ {descendants of i} U {descendants of j}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:35:26.540

**编辑 4：这行不通！！！**

如果您按照 3、4、5、6、1、2 的顺序处理[链接](http://www.iarcs.org.in/inoi/contests/jan2006/Advanced-1.php)中的节点，在处理 6 之后，（我认为）您将拥有以下集合：{{3,4},{5}, {6}}、{{3,4,5}、{6}}、{{3,4,5,6}}，没有简单的方法可以再次拆分它们。

我只是在这里留下这个答案，以防其他人在考虑 DP 算法。

查看 DP 算法中所有已处理的邻居可能会起作用。

.

我正在考虑一个**动态编程**算法，其中矩阵是（项目 x 集数）

```
n = number of sets
k = number of vertices
// row 0 represents 0 elements included
A[0, 0] = 0
for (s = 1:n)
  A[0, s] = INFINITY
for (i = 1:k)
  for (s = 0:n)
    B = A[i-1, s] with i inserted into minimum one of its neighbouring sets
    A[i, s] = min(A[i-1, s-1], B)) // A[i-1, s-1] = INFINITY if s-1 < 0 
```

**编辑：DP的解释：**

这是一个相当基本的[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)算法。如果你需要更好的解释，你应该多读一些，这是一个非常强大的工具。

A 是一个矩阵。第 i 行表示一个包含直到 i 的所有顶点的图。列 c 表示集合数 = c 的解。

因此`A[2,3]`，将给出包含项目 0、项目 1 和项目 2 和 3 集合的图表的最佳结果，因此每个集合都在它自己的集合中。

然后从第 0 项开始，计算每个集合数的行（唯一有效的是集合数 = 1），然后使用上述公式执行第 1 项，然后执行第 2 项，依此类推。

`A[a, b]`然后是所有顶点最多包含 a 和 b 个集合的最优解。因此，您只需返回`A[k, n]`（包含所有顶点和目标集数的那个）。

**编辑 2：复杂性**

`O(k*n*b)`其中 b 是节点的分支因子（假设您使用[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)）。

因为`n = 3`，这是`O(3*k*b)`= `O(k*b)`。

**编辑 3：确定应将顶点添加到哪个相邻集**

[在联合查找](http://en.wikipedia.org/wiki/Union_find)结构中保留 n 个包含 k 个元素的数组，每个集合都指向该集合的总和。对于每个新行，为了确定可以将顶点添加到哪些集合，我们使用它的[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)并查找每个邻居的集合和值。一旦找到最佳选项，我们就可以将该元素添加到适用的集合中，并将其总和增加添加元素的值。

您会注意到该算法仅向下查找 1 行，因此我们只需要跟踪最后一行（不存储整个矩阵），并且可以修改前一行的 n 个数组而不是复制它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:45:36.333

您可以**结合使用 Binary Search 和 DFS**来解决此问题。

以下是我将如何进行：

1.  计算图的总权重，同时找出图中最重的边。让它们分别为 Sum、MaxEdge。
2.  现在我们必须**在这个范围之间进行二分搜索：[maxEdge, Sum]。**
3.  在每次搜索迭代中，middle = (start + end / 2)。现在，选择一个起始节点并**执行 DFS** st，在子图中遍历的边的总和尽可能接近“中间”。但保持这个总和小于中间值。这将是一个子图。在同一次迭代中，现在选择另一个未被先前 DFS 标记的节点。以相同的方式执行另一个 DFS。同样，再做一次，因为我们需要将图表分成 3 个部分。
4.  **分钟**。**上面计算的 3 个子图中的权重**是本次迭代的解决方案。
5.  继续运行这个二分搜索，直到它的结束变量超过它的开始变量。

在第 4 步中获得的所有分钟的**最大值**就是您的答案。您可以进行额外的簿记以获得 3 个子图。

**订单复杂度：N log(Sum)**其中 Sum 是图的总权重。

我刚刚注意到您谈到了加权顶点，而不是边。在这种情况下，只需在我的解决方案中将边视为顶点。它应该仍然有效。

# revit - 如何在不重新启动的情况下构建 Revit 应用程序

> ID：14194521
> 
> 赞同：1
> 
> 时间：2013-01-07T11:00:19.090
> 
> 标签：revit, revit-api

有谁知道如何构建 .NET C# Revit 应用程序而不必每次都重新启动 Revit？这适用于 REVIT MEP 2013。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T08:54:25.723

我认为 Jeremy Tammik 的相关帖子是：

*   [重新加载加载项以进行调试而不重新启动](http://thebuildingcoder.typepad.com/blog/2012/12/reload-add-in-for-debug-without-restart.html)
*   [在不重新启动 Revit 的情况下调试附加模块](http://thebuildingcoder.typepad.com/blog/2011/05/debugging-an-add-in-without-restarting-revit.html)

尽管我碰巧是帖子中提到的[RevitPythonShell](http://code.google.com/p/revitpythonshell/)的开发人员，但我建议您首先尝试使用 AddIn 管理器 - 这将让您在运行时重新加载您的插件，并最接近您想要实现的模型。

如果您想在插件中添加一些测试，请尝试使用文章中提到的 Python (RevitPythonShell) 或 Ruby shell 创建脚本

1.  加载你的插件
2.  在你的插件中使用一些功能

或者，在将它们放入 C# 代码之前，只需使用 shell 尝试一些 API 调用，看看它们是否按照您的想法进行操作！

# vb.net - 获取选定的非活动datagridview行

> ID：14194527
> 
> 赞同：0
> 
> 时间：2013-01-07T11:00:35.790
> 
> 标签：vb.net

当我在当前处于活动状态的 datagridview2 的某个事件处理程序中时，我必须知道在另一个（非活动）datagridview1 上选择了哪一行 datagridview1（MultiSelect = False）。

我尝试了一堆尝试，但没有正确的结果。

```
 Private Sub DataGridView2_CellDoubleClick(ByVal sender As Object, _
           ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) _
           Handles DataGridView2.CellDoubleClick

   Dim myindex1 As Integer = DataGridView1.CurrentCell.RowIndex

   OR

   Dim myindex1 As Integer = DataGridView1.CurrentRow.Index 
```

当 datagridview1 处于活动状态并且我从他们的事件处理程序中获取索引时，这些都不起作用。

我应该怎么做以及如何准确地从第二个 datagridview 的事件处理程序中获取第一个 datagridview 的选定行？

编辑：添加代码：

```
Private Sub datagridview1_RowLeave(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.RowLeave
    selrow1 = e.RowIndex
End Sub

Private Sub datagridview1_RowPrePaint(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewRowPrePaintEventArgs) Handles DataGridView1.RowPrePaint
    e.PaintParts = e.PaintParts And Not DataGridViewPaintParts.Focus
End Sub

Private Sub datagridview1_GotFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles DataGridView1.GotFocus
    DataGridView1.RowsDefaultCellStyle.SelectionBackColor = Color.FromKnownColor(KnownColor.Highlight)
End Sub

Private Sub datagridview1_LostFocus(ByVal sender As Object, ByVal e As System.EventArgs) Handles DataGridView1.LostFocus
    DataGridView1.RowsDefaultCellStyle.SelectionBackColor = Color.FromKnownColor(KnownColor.InactiveCaption)
End Sub 
```

# php - 在 joomla 中创建语言页面

> ID：14194528
> 
> 赞同：0
> 
> 时间：2013-01-07T11:00:37.703
> 
> 标签：php, internationalization, joomla2.5, joomla-extensions

joomla 是否有任何扩展程序可以生成包含将网站翻译成特定语言的链接的页面？

这将是一个类似于此链接[http://www.trekbikes.com/worldwide](http://www.trekbikes.com/worldwide)的基本页面，当在 joomla 上添加新语言时，它也会自动添加到页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:08:41.510

我已经使用了解决此问题的方法，我所做的是创建了一篇文章，然后在下面添加了以下代码：

```
{loadposition language} 
```

在内容主体上，然后我覆盖了语言切换器模块并进行了必要的更新以使其工作。:)

# dynamics-crm-2011 - CRM Restkit oData 调用以在 crm 2011 中检索自定义实体的值

> ID：14194535
> 
> 赞同：0
> 
> 时间：2013-01-07T11:00:48.137
> 
> 标签：dynamics-crm-2011, dynamics-crm

在 crm 2011 中，在一个实体中，我必须通过 CRM Restkit 从自定义实体中检索名字字段。运行代码时出现错误。我认为“过滤器”是错误的。

如果是系统实体，则**filter = "ContactId eq guid'"+Xrm.Page.data.entity.attributes.get('xyz' ).getValue( )[0].id+"'";**

工作正常。

但我的情况是，它是一个模式名称为“new_student”的自定义实体，我尝试了**filter = "new_student/Id eq guid'"+Xrm.Page.data.entity.attributes.get('xyz' ).getValue( )[ 0].id+"'";** 这是行不通的。

那么在我的情况下过滤器应该是什么

问候，维克拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:05:41.057

您可能不应该使用实体名称作为过滤器中的前缀“new_student/Id”。但话虽如此，我建议您通过几个步骤“调试”这个问题。

首先在 JSON 端点打开“new_student”JSON 提要 URL，以查看通过 Web 服务对您的自定义实体是否有效，例如：

```
http://yourCRMServer/YourInstanceName/2011/OrganizationData.svc/new_studentSet 
```

只需替换 CRM 服务器 URL 和实例名称。当您使此路径正常工作并看到“结果”时，继续将过滤器添加到 URL 以帮助您识别字段名称并更快地找到正确的过滤器：

```
http://yourCRMServer/YourInstanceName/2011/OrganizationData.svc/new_studentSet?$filter=Your_Schema_Field_Name eq 'Johnson' 
```

依此类推，那么如果您只需要名字，则应将其添加到 $select 以最小化来自 JSON Web 服务的数据负载：

```
http://yourCRMServer/YourInstanceName/2011/OrganizationData.svc/new_studentSet?$filter=Schema_Field_Name eq 'Johnson'&$select=FirstName 
```

希望能帮助到你。

# asp.net - 需要在我的网站中使用 yatra.com API

> ID：14194537
> 
> 赞同：1
> 
> 时间：2013-01-07T11:00:50.440
> 
> 标签：asp.net, xml, vb.net, api

asalamualikum ，我需要在我的网站上使用 yatra.com api，这是一个 asp.net 网站。我从 yatra 获得了一个 word 文档（空气集成文档）。Yatra api 是基于 xml 的，空中集成文档显示 xml 请求和响应的格式，但我没有在 web 服务中使用 xml，也不知道，但我有 xml 的概念，但只使用 xml 在本地系统上读取和写入文件。现在我有一个问题，我不知道如何在 web 服务中使用 xml，以及如何接收来自 api 的响应并将其显示在我的页面上或向 api 发送请求。如果有人可以帮助我，我将非常感谢他.... ..如果你能给我一个 url 或一个用户使用一些 api（基于 xml）进行集成的视频。非常感谢您的帮助。如果有人可以给我以下请求和响应的示例代码。

对 yatra api 的示例请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
<OTA_AirLowFareSearchRQ EchoToken="0" SequenceNmbr="0" TransactionIdentifier="0" AvailableFlightsOnly="" DirectFlightsOnly="" xmlns="http://www.opentravel.org/OTA/2003/05">
            <POS xmlns="http://www.opentravel.org/OTA/2003/05">
                <Source AgentSine="" PseudoCityCode="NPCK" TerminalID="1">
                    <RequestorID ID="AFFILIATE"/>
                </Source>
                <YatraRequests>
                    <YatraRequest AffiliateID="EASTBOUND"/>
                </YatraRequests>
            </POS>
            <TravelerInfoSummary>
                <AirTravelerAvail>
                    <PassengerTypeQuantity Code="ADT" Quantity="1"/>
                    <PassengerTypeQuantity Code="CHD" Quantity="1"/>
                    <PassengerTypeQuantity Code="INF" Quantity="1"/>
                </AirTravelerAvail>
            </TravelerInfoSummary>
            <SpecificFlightInfo>
                <Airline Code=""/>
            </SpecificFlightInfo>
            <OriginDestinationInformation>
                <DepartureDateTime>2011-09-11T00:00:00</DepartureDateTime>
                <OriginLocation CodeContext="IATA" LocationCode="DEL">DEL</OriginLocation>
                <DestinationLocation CodeContext="IATA" LocationCode="BOM">BOM</DestinationLocation>
            </OriginDestinationInformation>
            <TravelPreferences>
                <VendorPref Code="SG"/>
                <VendorPref Code="DN"/>
                <CabinPref Cabin=""/>
            </TravelPreferences>
        </OTA_AirLowFareSearchRQ>
    </soapenv:Body>
</soapenv:Envelope> 
```

来自 yatra api 的示例响应

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <OTA_AirLowFareSearchRS Version="2.001" xmlns="http://www.opentravel.org/OTA/2003/05">
            <PricedItineraries>
                <PricedItinerary CompositeFlightNumber="S2101" CountCompositeFlightNumber="1" OriginDestinationRPH="0" SequenceNumber="1" SupplierSystem="Amadeus">
                    <AirItinerary SupplierSystem="Amadeus">
                        <OriginDestinationOptions>
                            <OriginDestinationOption Duration="01:55:00" FromCache="true" SupplierSystem="Amadeus">
                                <FlightSegment ArrivalDateTime="2007-11-11T08:55:00" DepartureDateTime="2007-11-11T07:00:00" E_TicketEligibility="Eligible" FlightNumber="101" RPH="1" ResBookDesigCode="O">
                                    <BookingClassAvail RPH="1" ResBookDesigCode="O" ResBookDesigQuantity="4"/>
                                    <DepartureAirport LocationCode="DEL"/>
                                    <ArrivalAirport LocationCode="BOM"/>
                                    <Equipment AirEquipType="737"/>
                                    <MarketingAirline Code="S2"/>
                                </FlightSegment>
       <FormData>
                <FareInformationIDs>
                <FareInformationID BaseFare="1825" Code="" FareCode="UGOSAVE" FareID="0" PTCID="1" Quantity="">0</FareInformationID>
            </FareInformationIDs>
      </FormData>                            
</OriginDestinationOption>
                        </OriginDestinationOptions>
                    </AirItinerary>
                    <AirItineraryPricingInfo>
                        <ItinTotalFare>
                            <BaseFare Amount="1875" CurrencyCode="INR"/>
                            <Taxes>
                                <Tax Amount="1575" CurrencyCode="INR" TaxCode="TTL"/>
                            </Taxes>
                            <TotalFare Amount="3461.63" CurrencyCode="INR"/>
                            <ServiceTax Amount="11.63" Currency="INR" Description="Service Tax" ServiceTaxCode="ST" ServiceTaxRate="0.0062"/>
                        </ItinTotalFare>
                        <PTC_FareBreakdowns>
                            <PTC_FareBreakdown>
                                <PassengerTypeQuantity Code="ADT" Quantity="1"/>
                                <FareBasisCodes>
                                    <FareBasisCode>OSASAS</FareBasisCode>
                                </FareBasisCodes>
                                <PassengerFare>
                                    <BaseFare Amount="1875" CurrencyCode="INR"/>
                                    <Taxes>
                                        <Tax Amount="1575" CurrencyCode="INR" TaxCode="TTL"/>
                                    </Taxes>
                                    <TotalFare Amount="3450" CurrencyCode="INR"/>
                                </PassengerFare>
                            </PTC_FareBreakdown>
                        </PTC_FareBreakdowns>
                        <FareInfos>
                            <FareInfo>
                                <FareReference>OSASAS</FareReference>
                                <FilingAirline Code="ZZ"/>
                                <DepartureAirport LocationCode="DEL"/>
                                <ArrivalAirport LocationCode="BOM"/>
                            </FareInfo>
                        </FareInfos>
                    </AirItineraryPricingInfo>
                    <TicketingInfo DeliveryMethod="EMAIL" TicketTimeLimit="" TicketType="eTicket" TicketingStatus="" eTicketNumber="">
                        <TicketAdvisory Language="English"/>
                    </TicketingInfo>
                </PricedItinerary>
            </PricedItineraries>
        </OTA_AirLowFareSearchRS>
    </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:33:57.510

您无需担心创建 xml 或使用 xml，如果您使用 C 语言端使用 WCF 或任何工具通过使用 Yatra.com wsdl 创建客户端。现在将 evrthing 视为面向对象，它将由您的 C 语言客户端存根负责生成 XML。您只需要映射存根中的值。

# javascript - 这些天，JavaScript 的无限循环是否会使浏览器崩溃？

> ID：14194540
> 
> 赞同：3
> 
> 时间：2013-01-07T11:01:13.263
> 
> 标签：javascript, infinite-loop

我正在学习 JavaScript，并且在编程方面还很陌生，碰巧遇到了这些无限循环，据说这些循环会永远持续下去并使浏览器崩溃，但是当我用这些代码创建一个时：

```
i=0;
while (i<10) {document.write(i);} 
```

浏览器只是继续加载它并且从未加载但浏览器没有崩溃？
那么这些天的浏览器是否足够强大以承受无限循环，还是我需要一个不同的无限循环？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T11:03:05.313

**是**的，无限循环仍然会导致浏览器崩溃（或者只是运行 JS 的选项卡）。**但是**，大多数现代浏览器可以检测脚本是否挂起/运行无限循环，并为您提供中止脚本的选项。

此外，创建无限循环的更有效方法是：

```
while(true); 
```

# objective-c - 如何使用 restkit 发帖

> ID：14194542
> 
> 赞同：0
> 
> 时间：2013-01-07T11:01:13.450
> 
> 标签：objective-c, ios, web-services, post, restkit

我正在使用 restkit 构建一个应用程序来与我的网络服务通信。首先，我对此很陌生。我需要做的是将用户名和密码发布到我的网络服务，以便 url 看起来像这样。

```
http://urllinkcompany.com/en/webservice/company-user/login/apikey/key12345678?email=test@test.be&pwd=testtest 
```

当我发布这个时，我得到了一个 json。这个 json 包含一个状态码。`status = 200 --> OK Status = 404 --> NOT ok`

现在我试图发布一些东西并 NSLog 这个状态代码。

```
- (IBAction)login:(id)sender {

    RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[Person class]];
    [mapping addAttributeMappingsFromDictionary:@{
     @"data.user.cu_email":     @"cu_email",

     }];

    RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:mapping pathPattern:nil keyPath:nil statusCodes:nil];

    NSString *baseUrl = @"http://urllinkcompany.com/en/webservice/company-user/login/apikey/key12345678?";
    NSString *strUrl = [NSString stringWithFormat:@"%@email=%@&pwd=%@",baseUrl,_txtLogin.text,_txtPass.text];
    NSURL *url = [NSURL URLWithString:strUrl];
    NSLog(@"url is: %@",strUrl);
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    RKObjectRequestOperation *operation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[responseDescriptor]];
    [operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
         NSLog(@"data result is %@", [result valueForKeyPath:@"data.status"]);
    } failure:nil];

} 
```

但我收到了这个错误。

```
 E restkit.network:RKObjectRequestOperation.m:285 Object request failed: Underlying HTTP request operation failed with error: Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x1ed57c50 {NSUnderlyingError=0x20161e70 "bad URL", NSLocalizedDescription=bad URL}
2013-01-07 11:48:51.407 Offitel2[22086:907] I restkit.network:RKHTTPRequestOperation.m:152 GET '(null)'
2013-01-07 11:48:51.408 Offitel2[22086:907] E restkit.network:RKHTTPRequestOperation.m:173 GET '(null)' (0) [0.0010 s]: Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x1ed57c50 {NSUnderlyingError=0x20161e70 "bad URL", NSLocalizedDescription=bad URL} 
```

有人可以帮我吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:22:50.047

编辑：这是一个没有 RKClient 的版本

```
RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURL:[NSURL URLWithString:@"http://urllinkcompany.com/"]];

RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[Person class]];
[mapping addAttributeMappingsFromDictionary:@{
 @"data.user.cu_email":     @"cu_email",
 }];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:_txtLogin.text, @"email", _txtPass.text, @"pwd", nil];

[objectManager loadObjectsAtResourcePath:@"en/webservice/company-user/login/apikey/key12345678" delegate:self block:^(RKObjectLoader* loader) {
    loader.objectMapping = mapping;
    loader.method = RKRequestMethodPOST;
    loader.params = params;
}]; 
```

并实现这两个 RKObjectLoaderDelegate 方法：

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects

- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error 
```

# winapi - win32 - 使用 Windows XP 主页

> ID：14194545
> 
> 赞同：0
> 
> 时间：2013-01-07T11:01:21.267
> 
> 标签：winapi

在 MSDN 上很多 win32 函数包含以下语句：

要求： 支持的最低客户端 - Windows 2000 Professional。

是否真的需要使用专业版，或者功能与家庭版一起使用。我用的是windows-xp home，可以运行很多功能，但是有一个功能无缘无故失败，可能是因为我没有使用专业版而失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:38:53.250

Windows 2000没有“ *Home* ”版本，*Professional*是唯一发布的非服务器版本。

如果文档将其显示为支持的最低版本并且没有列出 XP 的例外情况，那么任何具有最低“ *Windows 2000 Professional* ”的系统都可以在 XP Home 或 Pro 上运行。

# android - MvvmCross Android 从 byte[] 绑定图像

> ID：14194546
> 
> 赞同：2
> 
> 时间：2013-01-07T11:01:27.763
> 
> 标签：android, xamarin.android, mvvmcross

有谁知道如何将 byte[] （图像）绑定到 axml 视图中的 Image 控件。我的 ViewModel 继承自 MvxViewModel。我所有的其他绑定都很好，但我找不到绑定该图像的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-08T14:52:58.620

你可以更轻松地做到这一点，我在偶然发现这个问题后也发现了这一点：

由于用于为 a 设置位图的 Android 绑定`ImageView`是`Bitmap`（如您在 [1] 中看到的），您可以像这样配置您的视图：

```
 <ImageView
        local:MvxBind="Bitmap ByteArrayToImage(ImageByteArray)" /> 
```

然后您只需要定义一个名为 的 ValueConverter，`ByteArrayToImageValueConverter`它将字节数组转换为 Bitmap 的一个实例。对我来说，使用 ValueConverter 是创建自定义绑定的首选方式；）

您已经有了将字节数组转换为位图的代码：`BitmapFactory.DecodeByteArray(_rawImage, 0,_rawImage.Length);`

[1] [https://github.com/MvvmCross/MvvmCross/blob/bbf9a2ac76e74d9404f4b57036c6e29dfe2cc6c3/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxAndroidBindingBuilder.cs#L79](https://github.com/MvvmCross/MvvmCross/blob/bbf9a2ac76e74d9404f4b57036c6e29dfe2cc6c3/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxAndroidBindingBuilder.cs#L79)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:50:52.227

我认为您可以使用自定义 UI 控件绑定它。

为此，您需要执行以下操作：

1.  继承一个新`MyImageView`的`ImageView`
2.  添加默认构造函数（将上下文和属性向下传递给基本构造函数）
3.  向 中添加一个新`RawImage`属性`MyImageView`，将其实现为：

    ```
    private byte[] _rawImage;
    public byte[] RawImage
    {
         get { return _rawImage; }
         set 
         {
                 _rawImage = value;
                 if (_rawImage == null)
                         return;

                 var bitmap = BitmapFactory.DecodeByteArray(_rawImage, 0,_rawImage.Length);
                 SetImageBitmap(bitmap);
         }
    } 
    ```

`MyImageView`然后，您可以在 axml 中使用该控件而不是普通的`ImageView`.

注意 - 上面的代码未经测试 - 但一旦你在视图中获得 byte[]，我相信你会弄清楚要使用的 Droid 代码。

* * *

作为对此的替代方法，您还可以使用自定义绑定将 a 绑定`byte[]`到法线`ImageView`- 请参阅[In MvvmCross 如何执行自定义绑定属性中的自定义绑定示例](https://stackoverflow.com/questions/10700445/in-mvvmcross-how-do-i-do-custom-bind-properties/)

# c# - 如何在 Silverlight 应用程序中禁用浏览器滚动条？

> ID：14194550
> 
> 赞同：0
> 
> 时间：2013-01-07T11:01:41.097
> 
> 标签：c#, silverlight, prism

在我的 Silverlight 应用程序中，我需要永久禁用浏览器滚动条。当我运行应用程序时，浏览器滚动条是可见的。所以我需要禁用这个。

请让我知道我们应该在哪个文件中执行以及禁用滚动条的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:24:25.907

你必须让你的 UserControle(root userControle) 更小，以适应你的浏览器，这样你的浏览器滚动条就可以禁用.....

使用 Silverlight 导航模板

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:03:05.330

当使用默认的 aspx 页面显示 Silverlight 应用程序（由 Visual Studio 生成的应用程序）时，通常不会出现滚动条。但如果是这样的话，那就是看的地方。

有时浏览器（尤其是 Internet Explorer）会在没有换行符的地方呈现换行符。`<object>`因此，请尝试从托管 Silverlight 应用程序的 - 元素周围的 HTML 标记中删除任何换行符。

示例：转换以下代码

```
<form id="form1" runat="server" style="height:100%">
    <div id="silverlightControlHost">
        <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
        </object>
        <iframe id="_sl_historyFrame" style="visibility:hidden;height:0px;width:0px;border:0px"></iframe>
    </div>
</form> 
```

通过删除所有换行符来添加以下代码（我添加了`...`以使代码在此处更具可读性，当然将原始参数保留在那里）

```
<form ...><div><object ...></object><iframe ...></iframe></div></form> 
```

就我而言，这确实解决了问题。

# c# - ScaleView.minSize 在轴上日期/时间的图表上无法正常工作

> ID：14194551
> 
> 赞同：2
> 
> 时间：2013-01-07T11:01:42.380
> 
> 标签：c#, winforms, datetime, charts, scaling

我正在构建一个带有图表 ( `system.windows.forms.datavisualization.Charting.ChartArea`) 的 winforms 应用程序。此图表中的系列在 上具有日期/时间，并在 上`AxisX`浮动`AxisY`。无论我尝试什么设置`ScaleView.MinSize`，它总是像设置为 1 天一样`ScaleView.MinSizeType`工作`AxisX`

```
 chartArea1.AxisX.Enabled = System.Windows.Forms.DataVisualization.Charting.AxisEnabled.True;
        chartArea1.AxisX.LabelStyle.Format = "dd MMM\nHH:mm";
        chartArea1.AxisX.ScaleView.MinSize = 0.001D;
        chartArea1.AxisX.ScaleView.MinSizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Days;
        chartArea1.AxisX.ScaleView.SizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Hours;
        chartArea1.AxisX.ScaleView.SmallScrollMinSize = 15D;
        chartArea1.AxisX.ScaleView.SmallScrollMinSizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Minutes;
        chartArea1.AxisX.ScaleView.SmallScrollSize = 15D;
        chartArea1.AxisX.ScaleView.SmallScrollSizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Minutes;
        chartArea1.AxisX2.Enabled = System.Windows.Forms.DataVisualization.Charting.AxisEnabled.False;
        chartArea1.AxisX2.ScaleView.SmallScrollMinSizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Hours;
        chartArea1.AxisX2.ScaleView.SmallScrollSize = 15D;
        chartArea1.AxisX2.ScaleView.SmallScrollSizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Minutes;
        chartArea1.AxisY.Enabled = System.Windows.Forms.DataVisualization.Charting.AxisEnabled.True;
        chartArea1.AxisY.ScaleView.MinSize = 1D;
        chartArea1.AxisY.ScaleView.MinSizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Number;
        chartArea1.AxisY.ScaleView.SmallScrollMinSizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Number;
        chartArea1.AxisY.ScaleView.SmallScrollSize = 1D;
        chartArea1.AxisY.ScaleView.SmallScrollSizeType = System.Windows.Forms.DataVisualization.Charting.DateTimeIntervalType.Number;
        chartArea1.AxisY2.Enabled = System.Windows.Forms.DataVisualization.Charting.AxisEnabled.False;
        chartArea1.CursorX.IsUserEnabled = true;
        chartArea1.CursorX.IsUserSelectionEnabled = true;
        chartArea1.CursorY.IsUserEnabled = true;
        chartArea1.CursorY.IsUserSelectionEnabled = true; 
```

`AxisY`数据类型 float 工作正常。也`SmallScrollSize`可以`AxisX`正常工作。但是为什么`ScaleView.MinSize`困扰着我呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:22:55.910

该问题是由光标间隔引起的。默认情况下设置为 1，因此我无法选择小于 1（天）的间隔。通过将时间间隔更改为 0.01（14.4 分钟），这不再是问题。

```
chartArea1.CursorX.Interval = 0.01D; 
```

# objective-c - AFNetworking 取消下载

> ID：14194552
> 
> 赞同：1
> 
> 时间：2013-01-07T11:01:45.190
> 
> 标签：objective-c, afnetworking

我正在使用 AFNetworking 框架。所以我创建了 AFHTTPClient 的子类：

```
 + (MyNetClient *)sharedClient
 {    
      static MyNetClient *_sharedClient = nil;
      static dispatch_once_t oncePredicate;

      dispatch_once(&oncePredicate, ^{
         _sharedClient = [[self alloc] initWithBaseURL:[NSURL URLWithString:BASE_API_URL]];
      });

      return _sharedClient;
 } 
```

并添加了一些从服务器下载 JSON 的方法。

所以在我看来，我开始在 viewWillAppear 中下载，如下所示：

```
[[MyNetClient sharedClient] getArrOfDataWithName:name
                                     block:^(NSArray *arr) {
}]; 
```

在哪里：

```
- (void)getArrOfDataWithName:(NSString *)name block:^(NSArray *arr)block
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSMutableDictionary *params = [NSMutableDictionary
                                   dictionaryWithObjectsAndKeys:name,@"name",nil];
    [self getPath:[self urlToService:@"data/get.json"] parameters:params
          success:^(AFHTTPRequestOperation *operation, id responseObject) {

              NSLog(@"result operation%@",operation);
              BOOL res = [operation isCancelled];
              if (!res)
              {
                dispatch_async(dispatch_get_main_queue(), ^{
                          block(responseObject);
                });
              }
          }
          failure:^(AFHTTPRequestOperation *operation, NSError *error) {

              dispatch_async(dispatch_get_main_queue(), ^{
                  block(nil);
              });
          }];
}); 
```

}

这需要更多时间，用户可以按回，所以我在 viewDidDisappear 中取消下载：

```
- (void)viewDidDisappear:(BOOL)animated
{
   [super viewDidDisappear:animated];
   [[[LRLoopNetClient sharedClient] operationQueue] cancelAllOperations];
} 
```

但下载操作并未取消。我在 getArrOfDataWithName 中添加了断点：

```
 NSLog(@"result operation%@",operation);
 BOOL res = [operation isCancelled]; 
```

res = NO 并且在我离开视图后调用它。我检查了：

```
 NSInteger count = [[[LRLoopNetClient sharedClient] operationQueue] operationCount];
 NSLog(@"number operations: %i",count); 
```

在 viewDidDisappear 号码操作：0 请帮我取消下载。

# core-bluetooth - 如何在 pc 上制作应用程序作为蓝牙低功耗设备？

> ID：14194553
> 
> 赞同：0
> 
> 时间：2013-01-07T11:01:43.533
> 
> 标签：core-bluetooth, bluetooth-lowenergy

我尝试在 iPhone 上制作一个可以从 ble 设备接收日期的应用程序。我已经阅读了 Apple 的 api。

但我想用 ble 加密狗从 PC 发送这些数据。

有一些用于从 ble 设备接收数据的示例。

但我需要让电脑模拟ble设备。

那可能吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:35:32.420

如果您拥有 Mac（考虑到您正在制作 iPhone 应用程序），您可以创建一个 OS X 项目，为 GATT 和 GAP 提供 CoreBluetooth。请参阅示例代码 CoreBluetooth：健康温度计。请注意，示例代码用作 Central，但是，您需要使用`CBPeripheralManager`实例和其他委托来实现 Peripheral。

在您的 Mac OS X 应用程序中，您需要使用`CBCharacteristicPropertyIndicate`或提供特征`CBCharacteristicPropertyNotify`。

在您的 iPhone 应用程序中，您需要设置此特性通知。

# unit-testing - 在 GWTTestCase 中调用后 GWT rpc 回调不调用

> ID：14194561
> 
> 赞同：0
> 
> 时间：2013-01-07T11:02:11.973
> 
> 标签：unit-testing, gwt, servlets, gwttestcase

我写了一个这样的 GWTTestCase：

```
public void testClickButton() {
    SampleView view = new SampleView();
    RootPanel.get().add(view);
    view.textBox.setText("Saeed Zarinfam");

    assertEquals("", view.label.getText());

//        ButtonElement.as(view.button.getElement()).click();
    view.button.getElement().<ButtonElement>cast().click();

    assertEquals("Bean \"OCTO\" has been created", view.label.getText());
} 
```

当我运行这个测试时，它连接到我的 servlet（我在我的 servlet 上添加了一些日志），但是 RPC 回调没有在我`SampleView`的 junit 中调用：

```
expected: <Bean "OCTO" has been created>, actual: <> 
```

这是我在按钮单击处理程序中的回调：

```
@UiHandler("button")
void onClick(ClickEvent e) {

    labelTest.setText("click button");

    AsyncCallback<FooBean> callback = new AsyncCallback<FooBean>() {
        public void onFailure(Throwable caught) {
            // Show the RPC error message to the user
            labelTest.setText("call fail");
            label.setText("Failure : " + caught.getMessage());
        }

        public void onSuccess(FooBean result) {
            labelTest.setText("call success");
            label.setText("Bean \"" + result.getName() + "\" has been created");
        }
    };

    // Make the call. Control flow will continue immediately and later
    // 'callback' will be invoked when the RPC completes.
    service.createBean("OCTO", callback);

} 
```

为什么在这种情况下不调用 GWT rpc 回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:13:58.143

RPC 调用即使在`GWTTestCase`. 你必须打电话`delayTestFinish()`告诉运行程序测试是异步的，并调用`finish()`“在未来的某个时间”告诉它它已经完成并且可以（否则你会超时）。

在您的情况下，由于调用代码无法知道 RPC 调用何时完成，您只能大胆猜测它需要多少时间，然后使用`Timer`.
如果您问我，请更好地重构您的代码以使其更具可测试性（注意：Selenium 的工作原理大致相同：每秒检查一次条件，直到超时，[http://seleniumhq.org/docs/02_selenium_ide.jsp#the-waitfor -commands-in-ajax-applications](http://seleniumhq.org/docs/02_selenium_ide.jsp#the-waitfor-commands-in-ajax-applications)，就像`Timer`如果不满足条件，您最多可以重新安排 N 次）

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideTesting#DevGuideAsynchronousTesting](https://developers.google.com/web-toolkit/doc/latest/DevGuideTesting#DevGuideAsynchronousTesting)

# objective-c - EasyAPNS 最初将所有标志设置为禁用

> ID：14194562
> 
> 赞同：0
> 
> 时间：2013-01-07T11:02:17.840
> 
> 标签：objective-c, ios, push-notification

我们正在使用[EasyAPNS](http://www.easyapns.com/apple-delegate)来帮助我们在 iPhone 应用程序中推送通知，这些通知是从我们的 PHP 网络应用程序发送的。

在第一次安装应用程序时，用户会看到允许我们发送推送通知的请求，即使他们选择了允许，所有标志都会从 iPhone 发送到 Web 服务器作为“禁用”。

如果您终止应用程序并重新打开它，当它再次发送设置时......它们将作为正确的选项发送（例如，启用）

我们完全按照我们正在使用的步骤 `application:didfinishlaunchingwithoptions:` 而不是 `applicationDidFinishLaunching`

[因为它](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)显然已被弃用

任何人都可以对此有所了解，并为我们指明正确的解决方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:32:47.220

所以如果用户拒绝推送消息，你会在终止后重新询问下一次使用该应用程序的时间？一遍又一遍地向用户询问相同的问题可能会有点烦人。

而且您必须请求许可，否则该用户将不会注册 Push。

看看[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

# html - 如何制作电子邮件发送选项

> ID：14194564
> 
> 赞同：0
> 
> 时间：2013-01-07T11:02:22.157
> 
> 标签：html

我想要实现的是，当我点击我的联系我们链接时，应该会打开一个弹出窗口，上面写着“这个链接需要用应用程序打开”。下面应该有使用 gmail 或 Outlook 或 yahoo 打开链接的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:39:15.553

当您创建类型的超链接时，`<a href="mailto:your@emailadres.com"?subject=mysubject>Contact me</a>`网络浏览器将在用户的默认电子邮件程序中打开该链接。

您不能“强制”用户打开特定的电子邮件应用程序或网络邮件系统，这也没有用，因为每个用户都有自己的默认电子邮件（网络）应用程序。

# asp.net-mvc-4 - 如何在锚标记（或@Hmtl.ActionLink）中执行“mailto”和控制器操作

> ID：14194566
> 
> 赞同：0
> 
> 时间：2013-01-07T11:02:27.213
> 
> 标签：asp.net-mvc-4, mailto

我希望用户使用他们的本地电子邮件客户端发送电子邮件，并且该活动应记录在数据库中。意味着，当用户单击链接时，我想执行“mailto”和控制器操作。

谁能帮我在锚标记（或@Hmtl.ActionLink）中执行“mailto”和控制器操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:13:06.523

您可以让链接指向记录活动的 MVC 操作，然后返回`RedirectResult`到`mailto:`URL。

# ruby-on-rails - Rails 2.2 翻译插件/宝石

> ID：14194570
> 
> 赞同：0
> 
> 时间：2013-01-07T11:02:32.847
> 
> 标签：ruby-on-rails, localization, translation, globalize2

我正在寻找在我管理的 rails 2.2.2 应用程序中使用的本地化系统。我想我以前见过一个完全符合我想要的，但我无法用谷歌找到它。

我想到的系统的工作方式如下：任何 ActiveRecord 模型（或者可能是指定模型的列表，例如在配置文件中列出）都可以有一个与之关联的翻译记录，它指定一个语言环境和一个或一个的新值该记录中的更多字段，用于列出的语言环境。请注意，这是与 i18n 解决的问题不同的问题：它是一种设置特定于区域设置的数据的方法，而不是设置特定于区域设置的字段名称或类似的“系统级”字符串。

例如，假设我的网站提供音乐课程。在英国（默认语言环境），最后一个“节拍”的音符称为“crotchets”*，而在美国则称为“四分音符”。所以，我可能有一个包含这些数据的课程：

```
#a Lesson object, with an entry in the "lessons" table in the db
id: 1234
name: "My Lesson"
description: "In this lesson you'll learn about crotchets." 
```

我想要与它相关的翻译记录：

```
id: 1
translatable_type: "Lesson"
translatable_id: 1234
locale: "US"
data: {:description => "In this lesson you'll learn about quarter notes"} 
```

现在，当我查看课程时，系统会检查当前语言环境，并查看是否有本课程的任何当前语言环境特定数据，看到有（描述）并显示它而不是标准描述。

有人见过这样的系统吗？

谢谢，最大

PS - 在这个例子中，我做了一个简单的字符串替换“crotchets”到“四分音符”，这可能会诱使读者认为我只需要某种简单的字符串替换翻译。但事实并非如此——一些美国特定的名称/描述将与英国同行完全不同，因此需要一个完全可定制的面向我们的名称、描述等。

*这在所有情况下可能在音乐上并不完全正确，但这超出了这个问题的范围:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:25:07.963

我认为[Globalize2](https://github.com/joshmh/globalize2)可能是您所追求的特定于语言环境的数据解决方案（我已经成功地将[Globalize3](https://github.com/svenfuchs/globalize3)用于我的 Rails 3.2 应用程序）。如果没有，那么希望 Globalize2 的 Github repo README 文件中的[替代解决方案部分](https://github.com/joshmh/globalize2#alternative-solutions)将提供其他适用于 Rails 2.2 的内容。祝你好运！

# java - JVisualvm：应用程序终止后如何进行堆转储？

> ID：14194571
> 
> 赞同：1
> 
> 时间：2013-01-07T11:02:32.220
> 
> 标签：java, profiling, jvisualvm

我搜索了它，但在应用程序终止后没有找到任何方法来获取堆转储。

从 eclipse 我触发了使用 eclipse 插件开发创建新项目的过程。在代码级别，我有两种创建新项目的方法。我想比较这两种方法。

我使用 JVsualVm 来分析在创建新项目生成过程中生成的数据。

当我的进程以执行结束时，我想对该正在运行的应用程序进行堆转储。

但问题是运行进程停止后，它正在从 JvisulaVM 的应用程序视图中删除，我无法对其进行堆转储。

那么有什么方法可以从 JVisualVm 中获取已停止应用程序的堆转储，因为我仍然打开了该正在运行的应用程序的选项卡，但该应用程序已从应用程序视图树中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:12:07.487

您可以在应用程序结束时以编程方式创建它： [https ://blogs.oracle.com/sundararajan/entry/programmatically_dumping_heap_from_java](https://blogs.oracle.com/sundararajan/entry/programmatically_dumping_heap_from_java)

好的，这还不是结束，但可能足以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:07:19.053

这根本不可能。应用程序终止后，它的内存，包括堆，都消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:10:02.897

甚至我也尝试从 JVisualVM 获取我创建的 MBean 的堆详细信息。

我知道一旦应用程序执行完成，我们就无法从中取回详细信息。

[已编辑]

当然，该选项卡仍保留在 JVisualVM 中，它们无法处理。

# sql - 如何不插入具有空值的双记录

> ID：14194576
> 
> 赞同：3
> 
> 时间：2013-01-07T11:02:44.330
> 
> 标签：sql, sql-server, stored-procedures, null

我试图找到一种方法，仅当表中不存在新记录时才插入它。

这是存储过程：

```
USE [ABSTest]
GO
/****** Object:  StoredProcedure [dbo].[sp_InsertBudgetCommessaInPreventivo]    Script     Date: 01/07/2013 09:12:16 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Alex Ziani>
-- Create date: <04/01/2013>
-- Description: <Insert di valori con inserimento di parametri>
-- =============================================
ALTER PROCEDURE [dbo].[sp_InsertBudgetCommessaInPreventivo] 
@Progressivo                    nvarchar(50),
@Durata                         float,
@Costo                          money,
@CostoStandard                  money,
@Tariffa                        money,
@SpeseStandard                  money,
@Codice_Tipo                    nvarchar(50),
@Codice_FiguraProfessionale     nvarchar(10),
@Codice_Risorsa                 nvarchar(50),
@Codice_Commessa                nvarchar(20),
@Codice_ODL                     nvarchar(30),
@Task                           nvarchar(100)

AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

IF NOT EXISTS   (SELECT * FROM Preventivo WHERE Progressivo = @Progressivo 
            AND Quantita = @Durata 
            AND Costo = @Costo  
            AND CostoStandard = @CostoStandard 
            AND Tariffa = @Tariffa 
            AND SpeseStandard = @SpeseStandard 
            AND FkCodiceEnumTipoPreventivo = @Codice_Tipo 
            AND FkCodiceEnumFiguraProfessionale = @Codice_FiguraProfessionale
            AND FKCodiceRisorsa = @Codice_Risorsa 
            AND FkCodiceCommessa = @Codice_Commessa 
            AND FkCodiceOrdineDiLavoro = @Codice_ODL
            AND Task = @Task)               
BEGIN           
    INSERT INTO [ABSTest].[dbo].[Preventivo]
           ([Progressivo] 
           ,[Quantita] 
           ,[Costo]
           ,[CostoStandard]
           ,[Tariffa]
           ,[SpeseStandard]
           ,[FkCodiceEnumTipoPreventivo]
           ,[FkCodiceEnumFiguraProfessionale]
           ,[FKCodiceRisorsa]
           ,[FkCodiceCommessa]
           ,[FkCodiceOrdineDiLavoro]
           ,[Task])
     VALUES
           (@Progressivo
           ,@Durata
           ,@Costo
           ,@CostoStandard 
           ,@Tariffa
           ,@SpeseStandard 
           ,@Codice_Tipo 
           ,@Codice_FiguraProfessionale
           ,@Codice_Risorsa 
           ,@Codice_Commessa 
           ,@Codice_ODL
           ,@Task)
 END
 ELSE
 BEGIN
    RAISERROR 50001 'ERRORE: RECORD GIà PRESENTE'
 END
END 
```

这很好用，但是所有值（除了主键）都是`Nullable`，所以如果我把它作为参数`Null`值，它就不起作用。我怎样才能设计它与`Null`s 一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:13:50.933

您可以使用以下代码进行检查：

```
IF NOT EXISTS   (SELECT * FROM Preventivo WHERE ISNULL(Progressivo,'') = ISNULL(@Progressivo,'') 
        AND ISNULL(Quantita,0) = ISNULL(@Durata,0) 
        AND ISNULL(Costo,0) = ISNULL(@Costo,0)
        AND ISNULL(CostoStandard,0) = ISNULL(@CostoStandard,0)
        AND ISNULL(Tariffa,0) = ISNULL(@Tariffa,0)
        AND ISNULL(SpeseStandard,0) = ISNULL(@SpeseStandard,0)
        AND ISNULL(FkCodiceEnumTipoPreventivo,'') = ISNULL(@Codice_Tipo,'')
        AND ISNULL(FkCodiceEnumFiguraProfessionale,'') = ISNULL(@Codice_FiguraProfessionale,'')
        AND ISNULL(FKCodiceRisorsa,'') = ISNULL(@Codice_Risorsa,'') 
        AND ISNULL(FkCodiceCommessa,'') = ISNULL(@Codice_Commessa,'')
        AND ISNULL(FkCodiceOrdineDiLavoro,'') = ISNULL(@Codice_ODL,'')
        AND ISNULL(Task,'') = ISNULL(@Task,'') ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:06:21.917

使用 ISNULL 作为比较运算符。可能会慢一点

```
SELECT * FROM Preventivo WHERE ISNULL(Progressivo, '') = ISNULL(@Progressivo, '') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:16:16.483

您可以使用 Case 语句来实现这一点

例如

```
AND Quantita = CASE @Durata
WHEN null THEN Quantita
ELSE @Durata 
```

因此，当 @Durata==null 案例将返回列 Quantita 本身时，结果将为真（Quantita =Quantita ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:10:54.473

您的存储过程正在尝试做

```
NULL = NULL 
```

更改存储过程的第一条语句，它应该可以工作

```
SET ANSI_NULLS OFF; 
```

如果您使用的是 SQL 2008 R2 或更高版本，请考虑使用 MERGE 语句。

拉吉

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T11:04:52.703

对于 null 你需要把条件

```
where column_name  is null 
```

在您的事业中，您可以`IsNull()`像这样使用 sql server 中可用的功能

```
 where IsNull(column_name,-1) = Isnull(@variable,-1) 
```

将变量的值与上面给出的列进行比较，轻松解决问题

# objective-c - 具有依赖项的 iOS 框架

> ID：14194577
> 
> 赞同：1
> 
> 时间：2013-01-07T11:02:54.063
> 
> 标签：objective-c, ios, frameworks, dependencies

我创建了两个 iOS .frameworks

他们都完美编译

我的结构如下：

```
iPadProject
  - framework1
     - framework2 
```

所以Framework2包含在framework1中，framework1包含在实际的iPad项目中

所以我的问题是，如果我将 framework1 和 framework2 添加到我的 iPadProject 中，它将无法编译，因为它抱怨来自 framework2 的重复符号（这是合乎逻辑的，因为它已经包含在 framework1 中）

但是，如果我只在我的 iPadProject 中包含 framework1，当我从 framework1 访问一个方法，而他又从 framework2 访问一个方法时，它会使用“signal SIGABRT”使应用程序崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:38:02.563

问题是因为它现在是嵌套的，所以链接器将 f2 链接到 f1——但只有 f1 需要的 f2 部分。

喜欢

f2 有 5 个符号 (f2_1 - 5)
f1 使用 f2_1 和 f2_2 但不是 3,4,5
=> 链接器将其丢弃

现在应用程序需要 f2_3、f2_4 和 f2_5 但它们不存在......但在编译时没有人知道。

* * *

现在您尝试通过再次将应用程序与 f2 链接来解决它，但和以前一样，在编译时没有人优化链接器 f2_3 - 5 并且假定它们在 f1 中，因此是重复的！

* * *

解决这个 Rob Napier 的方法已经提到过。**不要嵌套框架**（主要不是静态框架/第三部分）

一种解决方法是在 f1 链接到 f2 时将**-all_load传递给链接器！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:21:59.047

不要嵌套静态库，包括 iOS 框架。如您所见，它会导致重大问题（当两个框架都有自己的第三个框架时，它会导致更多问题）。最后的链接步骤应该链接所有需要的库；静态库不应该链接其他静态库。没有真正好的方法可以自动执行此操作。它只是框架文档的一部分。

但是，您不应该因为未能链接框架而获得运行时异常。您应该得到链接时失败，表明符号未定义。如果您遇到崩溃，则表明您在链接中做了一些奇怪的事情。

# css - CSS 损坏并消失 - 我该如何恢复它。- (PC BOSD & 重启)

> ID：14194582
> 
> 赞同：-1
> 
> 时间：2013-01-07T11:02:59.570
> 
> 标签：css

CSS 损坏并消失 - 我该如何恢复它。

问题 PC BOSD 并在我编辑 BOSD 和 CSS 文件时重新启动。在我重新启动电脑后不久，CSS 就消失了。所有浏览器现金也显示为空白。

请给出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:04:30.457

如果您在编辑器中丢失了 CSS 文件的内容，它可能已经消失了。

*除非您有备份，否则您可以*从中获取它的唯一地方是浏览器缓存（可能在访问该页面的其他机器上） - 根据缓存设置，它也可能在那里，但值得一试尝试。

# python - 如何在字典 [python] 中更新和访问字典的子键

> ID：14194587
> 
> 赞同：1
> 
> 时间：2013-01-07T11:03:16.450
> 
> 标签：python, python-2.7

我在字典中使用字典来计算与 20 个项目相关的四个参数。

```
resi = {'a': {'x': 0, 'y': 0, 'z': 0}, 'b': {'x': 0, 'y': 0, 'z': 0}, ...} 
```

函数“count”计算参数 x、y、z 在 20 个项目中出现的频率。

`re`: main dict 中的一个键`resi`；`bas`: 嵌套字典中的一个键

```
def count(re, bas, aa = resi) :
    t = aa[re] 
    t[bas] += 1
    print aa 
```

调用该函数时，`count`更新所有主键中的参数。我也试过

```
aa[re][0][bas] += 1 
```

这显示了一个关键错误。如何更新主字典中的特定键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:09:31.740

你一开始就搞砸了创建字典。

```
resi = dict((k, {'x':0, ...}) for k in ('a', 'b', ...)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:29:35.750

您需要为 subdict创建*唯一的*`second_dict`字典，您不能重用相同的值并期望这会为您的嵌套结构生成单独的字典。

采用：

```
resi = {k: dict(second_dict) for k in res} 
```

反而; 为每个密钥`dict(second_dict)`创建一个新副本。`second_dict`

# c# - 关闭窗口时程序卡在任务栏上

> ID：14194589
> 
> 赞同：0
> 
> 时间：2013-01-07T11:03:29.037
> 
> 标签：c#

我已经用 C# 构建了一个程序，该程序一直在 Windows 时钟附近的系统托盘上运行。当我尝试关闭 Windows 时，程序仍在运行并且关闭 Windows 卡住了。

这不是 Windows 7 的程序。所以我的问题是如何添加“魔法”以允许 Windows 关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:53:29.667

在您的表单关闭事件中，您必须捕获窗口关闭消息。[FormClosingEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.forms.formclosingeventargs.aspx)有一个名为[CloseReason](http://msdn.microsoft.com/en-us/library/system.windows.forms.formclosingeventargs.closereason.aspx)的属性。一个例子如下所示

```
 private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (e.CloseReason == CloseReason.WindowsShutDown)
        {
            e.Cancel = false;// or Application.Exit();
        }
    } 
```

# objective-c - Objective C，数组操作

> ID：14194591
> 
> 赞同：1
> 
> 时间：2013-01-07T11:03:42.647
> 
> 标签：objective-c, arrays, for-loop, uilabel

我正在尝试对数组元素执行操作，但我真的不明白为什么我的代码不起作用：

这是我的.h：

```
@interface ViewController : UIViewController
{
    NSArray *tableauScore;
    UILabel * modificationScore;
}

@property (weak, nonatomic) IBOutlet UILabel *nom1;
@property (weak, nonatomic) IBOutlet UILabel *nom2;
@property (weak, nonatomic) IBOutlet UILabel *nom3;
@property (weak, nonatomic) IBOutlet UILabel *nom4;
@property (weak, nonatomic) IBOutlet UILabel *bsc1;
@property (weak, nonatomic) IBOutlet UILabel *bsc2;
@property (weak, nonatomic) IBOutlet UILabel *bsc3;
@property (weak, nonatomic) IBOutlet UILabel *bsc4;

@end 
```

我的.m：

```
tableauScore = [NSArray arrayWithObjects:nom4, nom3, nom2, nom1, bsc1, bsc2, bsc3, bsc4, nil];
for(int i = 0; i < 8; i++)
            {
                modificationScore = [tableauScore objectAtIndex:i];
                modificationScore.hidden = NO;
                modificationScore.center = CGPointMake(modificationScore.center.x, modificationScore.center.y -40);
            } 
```

问题是我在“modificationScore = [tableauScore objectAtIndex:i];”处有一个线程点 线，我不知道为什么。我看到了很多主题，但没有人可以帮助我。你们中有人有想法吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:13:19.300

我假设“线程点”是指崩溃？如果是这样，您添加到数组的属性之一可能是`nil`.

`[tableauScore count]`在遍历它们之前检查数组 ( ) 中的元素数量；不要假设有八个。或者，更好的是，使用语法循环遍历所有元素：

```
for (a in tableauScore) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:09:35.127

`modificationScore`如果您真的不需要它，我不会全局定义。

我会做：

```
for(UILabel *tempLabel in tableauScore)
    {
        tempLabel.hidden = NO;
        tempLabel.center = CGPointMake(modificationScore.center.x, modificationScore.center.y -40);
    } 
```

我不知道你想通过 chaning 实现什么`center`，需要改变

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:19:05.790

[`[NSArray arrayWithObjects:]`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/clm/NSArray/arrayWithObjects:)只会创建一个直到第一个`nil`给定的 NSArray，所以如果其中一个 UILabels 是`nil`您将不会得到一个大小为 8 的数组，而只有一个包含 UILabels 的数组。

由于您具有硬编码的循环大小，因此您可能最终会在数组之外进行索引。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-07T11:06:58.793

如果要更改对象，`tableauScore`则不能使用，`NSArray`因为`NSArray`它是不可变的。

使用 a `NSMutableArray`，重新配置您的标签并使用`replaceObjectAtIndex:withObject:`在数组中更改它们。

# c# - 当前一个文件大于文件限制时，如何让 log4net 创建一个新文件？

> ID：14194592
> 
> 赞同：4
> 
> 时间：2013-01-07T11:03:42.543
> 
> 标签：c#, log4net

当前一个文件太大时，如何让 log4net 创建一个新文件？

我有一个需要 1 小时才能完成并生成大约 40MB 日志的任务，但是我想要 40 个 1MB 的文件而不是一个 40MB 的文件。我没有对`log4net`. 我现在只有图书馆和代码：

```
private static readonly ILog log = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType); 
```

然后我就这样做：

```
log.Debug("some message"); 
```

怎么做？

编辑：

```
<?xml version="1.0"?>
<configuration>
    <startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    </startup>
    <appSettings>
      <add key="mymail" value="mitja.resek@gmail.com" />
    </appSettings>
    <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="log.txt" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="1MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>
</configuration> 
```

这是我的 app.config 但我仍然有 40MB 文件：S

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T11:19:53.760

```
<appender name="RollingFileAppenderV1" type="log4net.Appender.RollingFileAppender">
    <file type="log4net.Util.PatternString" value="F:\HornetFeed\%property{LogName}" />
    <appendToFile value="true" />
    <rollingStyle value="Size" />
    <maxSizeRollBackups value="-1" />
    <maximumFileSize value="5000KB" />
    <staticLogFileName value="true" />
    <countDirection value="1"/>
    <layout type="log4net.Layout.PatternLayout">
       <conversionPattern value="%m%n" />
   </layout>
   <filter type="log4net.Filter.PropertyFilter">
       <Key value="Version" />
       <StringToMatch value="1" />
   </filter>
   <filter type="log4net.Filter.DenyAllFilter" />
</appender> 
```

这将创建 countdirection > 0 的无限文件备份，以便最新文件具有最新/最大名称，即 log.5 用于最新备份（第 5 次备份）。

```
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
    <file value="logfile" />
    <appendToFile value="true" />
    <rollingStyle value="Composite" />
    <datePattern value=".yyyyMMdd-HHmm" />
    <maxSizeRollBackups value="10" />
    <maximumFileSize value="1MB" />
    <countDirection value="1"/>
    <layout type="log4net.Layout.PatternLayout">
       <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
   </layout>
</appender> 
```

这是一个复合 RollingFileAppender，每分钟最多保留 10 个 1MB 日志备份。

***应用程序配置***

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    </configSections>
    <log4net debug="false">
        <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
            <file value="logfile" />
            <appendToFile value="true" />
            <rollingStyle value="Composite" />
            <datePattern value=".yyyyMMdd-HHmm" />
            <maxSizeRollBackups value="10" />
            <maximumFileSize value="1MB" />
            <countDirection value="1"/>
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
            </layout>
        </appender>
        <root>
            <priority value="ALL" />
            <appender-ref ref="RollingLogFileAppender" />
        </root>
        <category name="testApp.LoggingExample"><priority value="ALL" /></category>
    </log4net>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:20:10.650

您将必须使用[RollingFileAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.RollingFileAppender.html)，然后使用以下内容对其进行配置：

```
<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
    <file value="log.txt" />
    <appendToFile value="true" />
    <rollingStyle value="Size" />
    <maxSizeRollBackups value="10" />
    <maximumFileSize value="1MB" />
    <staticLogFileName value="true" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
    </layout>
</appender> 
```

这将生成名为*log.txt.1、log.txt.2、log.txt.3*等的 1MB 文件...

[您可以在有关 log4net 配置的文档](http://logging.apache.org/log4net/release/config-examples.html)中找到更多信息和示例。

# symfony - 获取当前路由/路径传递_internal route

> ID：14194593
> 
> 赞同：0
> 
> 时间：2013-01-07T11:03:48.620
> 
> 标签：symfony, routes

我正在通过 Twigcode 将 CMS 中的数据渲染到控制器，控制器渲染一个树枝模板。我想要目前的路线。我已经尝试使用：

```
// Controller
$request = $this->container->get('request');
$routeName = $request->get('_route');

// or Twigtemplate
{{ app.request.attributes.get('_route') }} 
```

但结果是“_internal”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:07:38.837

您忘记了`path`Twig 模板中对 Twig 函数的调用！

```
{{ path(app.request.attributes.get('_route')) }} 
```

代替

```
{{ app.request.attributes.get('_route') }} 
```

希望能帮助到你！

# variables - 我可以在配置单元中使用变量替换来获取值列表吗？

> ID：14194595
> 
> 赞同：0
> 
> 时间：2013-01-07T11:03:51.067
> 
> 标签：variables, hadoop, hive

虽然[文档](http://hive.apache.org/docs/r0.9.0/language_manual/var_substitution.html)指定了如何替换变量，但它并不支持列表。

我有一个查询需要在一个月的每一天运行，所以我想做这样的事情：

```
for day in days:
  ALTER TABLE foo ADD PARTITION(${day=hiveconf:day}); 
```

有没有办法做到这一点！使用某种脚本语言，如 python/bash。

我有一个 python 实现，但它需要为每个查询启动一个新的配置单元进程。除了丑陋之外，由于 hive 启动时间，这对于小型查询的性能很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:08:14.547

没有真正的好方法可以做到这一点，而且我很确定如果没有辅助脚本语言，根本就没有办法做到这一点。但在 bash 之类的东西中并不太痛苦：

```
hive_script=foo.hql
if [ -e "$hive_script" ]
then
    rm $hive_script
fi
days="1 2 3 4 5"
for day in $days
do
    echo "ALTER TABLE foo ADD PARTITION(day=$day);" >> $hive_script
done
hive -f $hive_script
rm $hive_script 
```

在 python 中可以使用相同的策略：让脚本生成您要执行的所有命令，并将它们写入同一个文件。然后只需执行该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-18T21:12:04.827

您可以使用

`--hivevar VALUES=1,2,3,4`

它对查询中的值进行了愚蠢的替换。所以，如果在你的查询中你写

`...WHERE values in (${VALUES})`

它会转化为

`...WHERE values in (1,2,3,4)`

此外，如果您的值是字符串，则需要用双引号将整个列表括起来，例如： `--hivevar VALUES="'1','2','3'"`

# objective-c - `typeof(self) self = weakSelf` 构造在块内是否合法？

> ID：14194600
> 
> 赞同：4
> 
> 时间：2013-01-07T11:04:11.617
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks

我想知道问题主题的变量声明是否合法。想象一下下面的代码：

```
__weak typeof(self) weakSelf = self;
[self doSomethingThatMayCauseRetainCycleWithBlock:^{
    typeof(self) self = weakSelf; // <---- !!!!
    if (self == nil) return;

    NSAssert(self.someProperty != nil, @"This doesn't lead to retain cycle!");

    [self doSomething];
    self.someProperty = someValue;

    // even
    self->someIvar = anotherValue;
} 
```

这段代码在 Xcode 4.5.2 中完美运行，只给出一个警告，即`Declaration shadows a local variable`.

**这个怪癖有什么意义：**

1.  重新声明`self`为对弱变量的强引用后，您可以安全地在块内部/外部复制/移动代码，而不会有偶尔创建保留循环的风险（除了 ivars，但它们是邪恶的）。
2.  `NSAssert`在一个块中不再导致保留周期。

**更新** 我发现这种技术`libextobjc`用于`@weakify/@strongify`宏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T22:10:30.240

这个答案有两个部分：

1.  您的声明的根本原因**掩盖了局部变量**警告，`GCC_WARN_SHADOW`以及为什么打开它可能是一个不好的警告。
2.  建立一个替代品`NSAssert`不需要这个诡计

## GCC_WARN_SHADOW

您收到的警告来自`GCC_WARN_SHADOW`，这是更无用的警告之一（无论如何，在我看来）。编译器在这里做的是正确的事情，但是由于`GCC_WARN_SHADOW`它引起了您的注意，您*可能会*做一些超出您预期的事情。

这是偏执的编译器警告擅长的事情。缺点是很难（并非不可能）删除特定警告以表明您知道自己在做什么。

启用后，此代码将`GCC_WARN_SHADOW`生成警告：

```
int value = MAX(1,MAX(2,3)); 
```

尽管如此，它将完美运行。

这样做的原因是它编译成这样，这很丑陋但（对于编译器）非常清楚：

```
({
   int __a = (1);
   int __b = (({
       int __a = (2);
       int __b = (3);
       __a < __b ? __b : __a;
   }));
   __a < __b ? __b : __a;
}) 
```

所以你的提议会很好用。`NSAssert`使用使用`self`变量的宏来实现。如果你`self`在你的范围内定义，它会`self`取而代之。

## 替换 NSAssert

但是就是说，如果您认为`GCC_WARN_SHADOW`有用，还有另一种解决方案。无论如何它可能会更好：提供您自己的宏。

```
#define BlockAssert(condition, desc, ...) \
    do { \
        __PRAGMA_PUSH_NO_EXTRA_ARG_WARNINGS \
        if (!(condition)) { \
            [[NSAssertionHandler currentHandler] handleFailureInMethod:_cmd \
            object:strongSelf file:[NSString stringWithUTF8String:__FILE__] \
                lineNumber:__LINE__ description:(desc), ##__VA_ARGS__]; \
        } \
        __PRAGMA_POP_NO_EXTRA_ARG_WARNINGS \
    } while(0) 
```

这本质上是 的复制粘贴`NSAssert`，但它使用`strongSelf`而不是`self`. 在您[使用该`strongSelf`模式](https://stackoverflow.com/a/17105368/796419)的地方，它会起作用；`strongSelf`在未定义的地方，你会得到一个编译器错误： **Use of undeclared identifier: 'strongSelf'**。我认为这是一个很好的暗示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:09:04.730

严格来说，您的代码没有任何问题——变量声明是合法的。但是，您可能会收到关于局部变量遮蔽实例的编译器警告。

GCD 块实际上是 C 函数，而不是 Objective-C 方法。编译时，每个 Objective-C 实例方法都添加了一个额外的参数，即`self`指针。`self`不像其他变量那样存储在对象结构中。

出于这个原因，我会犹豫在我将要共享的库中使用此代码。代码可能会与较新版本的 then 编译器中断，因为您实际上对运行时的攻击比立即显而易见的要多一些。此外，正如您所指出的那样，它是古怪的代码:) 我不确定其他阅读它的人会立即理解发生了什么。

# html - Schema.org 产品的几个 div 元素？

> ID：14194602
> 
> 赞同：0
> 
> 时间：2013-01-07T11:04:34.900
> 
> 标签：html, schema.org

我有一个想要设置 Schema.org 的网页`Product`，但是我需要的数据分布在整个页面中。

有没有办法`div`为 Schema.org 提供多个元素`Product`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:25:44.727

使用 Microdata，您可以使用 itemref 属性： http: [//www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html#attr-itemref](http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html#attr-itemref)

它允许您通过 id 引用页面上的其他元素。这些想法中的内容将其 itemprops 包含在当前范围内。这是一个简单的例子。

```
<div id="janedoeimage" >
   <img src="janedoe.jpg" itemprop="image" />
</div>
<div itemscope itemtype="http://schema.org/Person" itemref="janedoeimage">
    <span itemprop="name">Jane Doe</span>
</div> 
```

这将解析为以下 JSON：

```
 {
      "items": [
        {
          "type": [
            "http://schema.org/Person"
          ],
          "properties": {
            "image": [
              "http://example.com/janedoe.jpg"
            ],
            "name": [
              "Jane Doe"
            ]
          }
        }
      ]
    } 
```

RDFa Lite 可能很快就会找到一种类似于 Microdata 的 itemref 属性的原型制作方法。不过，我不确定这目前在哪里。

# c# - 通过 HttpWebRequest 将文件上传到外部域需要任何额外的步骤吗？

> ID：14194604
> 
> 赞同：0
> 
> 时间：2013-01-07T11:04:40.340
> 
> 标签：c#, asp.net-mvc, httpwebrequest

我正在为客户开发一个 Web 应用程序，他们需要将文件发布到其中，然后我用一些 XML 进行响应。

客户端应用程序使用 HttpRequest 类来执行请求。

请求本身完成，因为它们取回了 XML，但如果我计算 Request.Files 中的文件数，它始终为 0。

现在，我可以向他们解释如何通过这种方法模拟文件上传，但我不确定请求是否来自外部域是否存在问题。

该请求来自远程站点的 Winforms 应用程序。

这是一个问题，还是我网站的 200 响应是否意味着他们应该能够在请求中包含一个文件？

更新：或者换句话说：整个请求会被阻止，还是可能只有文件被剥离而其余的表单数据被允许到达终点？

# jquery - 选择父元素的下一个元素

> ID：14194605
> 
> 赞同：0
> 
> 时间：2013-01-07T11:04:40.457
> 
> 标签：jquery, html, checkbox, next

这是我的编码，

```
<tr class="ar">
   <td>
        <input type="checkbox" class="cbx">
   </td>    
   <td>
        <span class="spc">book</span>
   </td> 
</tr>
<tr class="ar"></tr> 
```

我想要做什么，如果单击复选框或跨度（在 first 内`tr`），我想将一个类切换到 second `tr`。此外，如果复选框已经被选中，那么我需要在单击其中任何一个时取消选中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:14:58.377

```
$('td input[type=checkbox], td span').click(function(){
    $(this).closest('tr')
        .find('input[type=checkbox]')
        .prop("checked", false)
        .end()
        .next()
        .toggleClass('yourclass');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T11:19:58.740

尝试这个

```
$(".cbx2").click(function(){
  $(this).closest("tr.ar").next().toggleClass("toggled_class");
}); 
```

`$(this).closest("tr.ar")`将为您提供该对象最接近的具有类的父`tr`元素，并将获得该类型的下一个元素，即您的第二个元素。`ar``.next``tr`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:17:03.300

试试这个......如果你想取消选中复选框......

```
$('#your_checkbox_id').live('click' , function() {
    if($('#your_checkbox_id').is(':checked')) {
        $('#your_checkbox_id').removeAttr('checked');
        $(this).next().toggleClass('class_name');
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:45:28.323

```
$('.cbx, .spc').click(function(e){
    $('.cbx').prop('checked', false); // uncheck everything

    $(this).toggleProp(checked, $(this).prop('checked')) // check/uncheck current
           .closest('.ar').toggleClass('yourClass'); // toggle class on next tr
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T11:45:34.093

尝试使用这个：http://jsfiddle.net/kPJJf/

```
$('td input[type=checkbox], td span').click(function () {
       $(this).parents('tr').next('tr').find('span').toggleClass('spc');
   if($(this).parents('tr').next('tr').find('input[type="checkbox"]').is(':checked')==false){
      $(this).parents('tr').next('tr').find('input[type="checkbox"]').prop('checked', true);
   }else{
      $(this).parents('tr').next('tr').find('input[type="checkbox"]').removeAttr('checked');
   }
}); 
```

# tcl - TCL 中用于检查的正则表达式问题

> ID：14194606
> 
> 赞同：0
> 
> 时间：2013-01-07T11:04:47.163
> 
> 标签：tcl

在 TCL 中，我已经声明了一个带有一些模式的数组 sstr，我想将这些模式与密码列表匹配。如果我找到匹配项，我将显示数组键和匹配的列表成员。但是下面的程序不起作用。希望我在声明正则表达式时犯了一些错误。

```
#!/bin/tclsh
set cryplist [list "$:adzctg-cm20decadt/sr" "$:yyzpty-cm23febadt/sr" "dc*aed1740.0*gbp" "dc*ars1*usd" "dc*gbp10.00*/r" "d|t|lbb/den" "d|t|ordphx"]
array set sstr {
    z "dc*[a-z]{3}*"
    dl "d\$*[0-9]"
    fd "\$:[a-z]{6}"
    md "d|t|[a-z]{3}\/[a-z]{3}"
    ms "d|t|[a-z]{6}"
}

foreach i $cryplist {
    puts "------------- $i --------------"
    foreach {n str} [array get sstr] {
        puts "$n -> $str"
        if { [regexp {$str} $i ] } {
            puts "============= $n -> $i ================"
            break
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:13:48.923

问题是您正在使用`regexp {$str} $i`，这使得正则表达式成为*文字* `$str`而不是`str`变量的内容。更改为`regexp -- $str $i`它应该可以工作；表示“没有进一步的`--`选择”（只是为了安全），未引用`$str`的从变量中读取该参数（你想要的）。

# javascript - 为什么linkbutton控件的ID在服务器在线发生变化？

> ID：14194608
> 
> 赞同：0
> 
> 时间：2013-01-07T11:05:00.177
> 
> 标签：javascript, asp.net

大家好，我正在使用**javascript**通过使用链接按钮的**ID来**根据点击的链接按钮制作**一些事件，**这里是我的asp页面的代码

 **```
<asp:LinkButton ID="Tlbr_Item_New" runat="server" CssClass="button_big">Tlbr_Item_New</asp:LinkButton>
<asp:LinkButton ID="Tlbr_Item_Save" runat="server" CssClass="button_big" OnClientClick="return ToolBarClickItem(this);" >Tlbr_Item_Save</asp:LinkButton>
<asp:LinkButton ID="Tlbr_Item_delete" runat="server" CssClass="button_big" OnClientClick="return ToolBarClickItem(this);" >Tlbr_Item_delete</asp:LinkButton>
<asp:LinkButton ID="Tlbr_Item_Undo" runat="server" CssClass="button_big" OnClientClick="return ToolBarClickItem(this);" >Tlbr_Item_Undo</asp:LinkButton>
<asp:LinkButton ID="Tlbr_Item_Clear" runat="server" CssClass="button_big" OnClientClick="return ToolBarClickItem(this);" >Tlbr_Item_Clear</asp:LinkButton>
<asp:LinkButton ID="Tlbr_Item_Search" runat="server" CssClass="button_big" OnClientClick="return ToolBarClickItem(this);" >Tlbr_Item_Search</asp:LinkButton>
<asp:LinkButton ID="Tlbr_Item_Print" runat="server" CssClass="button_big" OnClientClick="return ToolBarClickItem(this);" >Tlbr_Item_Print</asp:LinkButton>
<asp:LinkButton ID="Tlbr_Item_Close" runat="server" CssClass="button_big" OnClientClick="return ToolBarClickItem(this);" >Tlbr_Item_Close</asp:LinkButton> 
```

**这是我的javascript函数**

```
function ToolBarClickItem(Item) {
window.style = "cursor:hand;";
var bRes = true;
var sMessage = "";
var ItemID = "";
if (typeof Item == 'object')
    ItemID = Item.id;
else
    ItemID = Item;
switch (ItemID) {
    case "Tlbr_Item_New":
        if (NewButtonURL != "")
            bRes = eval(NewButtonURL);
        break;
    case "Tlbr_Item_Save":
        if (SaveButtonURL != "")
            bRes = eval(SaveButtonURL);
        if (bRes == true) {
            if (IsAnyRequiredEmpty(document.forms[0])) {
                window.alert(ErrorEmptyNotAllowed);
                bRes = false;
            }
            else
                sMessage = WarnMessageArray[ItemID];
        }
        break;
    case "Tlbr_Item_delete":
        if (DeleteButtonURL != "")
            bRes = eval(DeleteButtonURL);
        sMessage = WarnMessageArray[ItemID];
        break;
    case "Tlbr_Item_Undo":
        if (UndoButtonURL != "")
            bRes = eval(UndoButtonURL);
        sMessage = WarnMessageArray[ItemID];
        break;
    case "Tlbr_Item_Clear":
        if (ClearButtonURL != "")
            bRes = eval(ClearButtonURL);
        break;
    case "Tlbr_Item_Search":
        if (SearchButtonURL != "")
            bRes = eval(SearchButtonURL);
        break;
    case "Tlbr_Item_Print":
        if (PrintButtonURL != "")
            bRes = eval(PrintButtonURL);
        if (bRes == true && bFreeSearch == false)
            if (IsAnyPrimaryEmpty(document.forms[0])) {
                window.alert('No Record To Print');
                bRes = false;
            }
            else
                CustomPrint(PrintURL);
        break;
    case "Tlbr_Item_Close":
        if (confirm('سيتم إغلاق الشاشة؟'))
            window.close();
        bRes = false;
        break;
}
if (sMessage != "" && bRes == true)
    bRes = ShowAskMessage(WarnMessageArray[ItemID]);
return bRes; 
```

}

当我在本地 IIS 上测试它时效果很好

但是当我在我的服务器上发布它是 somee.com 时，linkbuttons 控制更改为 ctloo_Tlbr_Item_Save 并且它不起作用所以我不知道问题和解决方案是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:07:49.377

您可以使用[`ClientIdMode=Static`](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx).

您可以`ClientIDMode`通过设置站点`Web.config`文件中的 pages 元素来设置网站中所有页面的值。您可以在`@Page directive`. 使用 .NET4，您甚至可以通过 .NET 将其设置为控件[`Control.ClientIdMode`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)。

页面的 ClientIDMode 的默认值为`Predictable`。控件的 ClientIDMode 的默认值为`Inherit`。

[ASP.NET 4.0 中的 ClientIDMode](http://www.west-wind.com/weblog/posts/2009/Nov/07/ClientIDMode-in-ASPNET-40)

但是，您也可以通过以下方式获取客户端 ID `ClientID`：`$("#<%= Tlbr_Item_Save.ClientID %>")`

[使用 jQuery 查找 ASP.NET ClientID 的通用方法](http://www.west-wind.com/weblog/posts/2009/Oct/15/A-generic-way-to-find-ASPNET-ClientIDs-with-jQuery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:12:11.357

尝试这个

```
 switch (ItemID) {
        case '<%= Tlbr_Item_New.ClientID %>':
            //Your code
            break;
        case '<%= Tlbr_Item_Save.ClientID %>':
            //Your code
            break;
        case '<%= Tlbr_Item_delete.ClientID %>':
            //Your code
            break;
        case '<%= Tlbr_Item_Undo.ClientID %>':
            //Your code
            break;
} 
```**

# java - 如何使用 btrace

> ID：14194615
> 
> 赞同：1
> 
> 时间：2013-01-07T11:05:32.980
> 
> 标签：java, btrace

我想学习btrace。

java进程用户是yubaofu

yubaofu@btrace`sudo sh /home/yubaofu/study/btrace/bin/btrace 24234 JInfo.class`
知名文件不安全

yubaofu@btrace`sh /home/yubaofu/study/btrace/bin/btrace 24234 JInfo.class`
连接被拒绝

[我发现了一个类似的问题](https://stackoverflow.com/questions/9100149/jstack-well-known-file-is-not-secure)

如何解决？

操作系统：ubuntu12
jdk：jdk7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:23:42.917

您应该检查文件 /tmp/hsperfdata_$USER/$PID。$USER 到底是什么？确保它与您初始化 btrace 的用户相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T22:17:46.757

在将 btrace 附加到已附加到的进程时，我遇到了这个问题。我发现的解决方法是

```
killall -KILL java 
```

它只是杀死了所有的java进程。

# php - 在不使用密钥的情况下创建 PHP 对象？

> ID：14194618
> 
> 赞同：-1
> 
> 时间：2013-01-07T11:05:39.327
> 
> 标签：php, json, object

我有一个请求以以下格式将数据显示为 JSON 提要：

```
{
    "id": "123",
    "info": {
        "code": "ZGE",
        "description": "test1",
        "type": "AVL",
        "date": "09/08/2012"
    }
},
{
   "id": "456",
    "info": {
        "code": "ZDN",
        "description": "test2",
        "type": "CLR",
        "date": "16/02/2012"
    }
} 
```

但是在我的 PHP 代码中，我认为我需要一个密钥迭代器 - 但我最终得到了这种格式：

```
{

"0": {
    "id": "123",
    "info": {
        "code": "ZGE",
        "description": "test1",
        "type": "AVL",
        "date": "09/08/2012"
    }
},
"1": {

    "id": "456",
    "info": {
        "code": "ZDN",
        "description": "test2",
        "type": "CLR",
        "date": "16/02/2012"
    }
}
} 
```

关于如何在没有索引迭代器的情况下构建第一个数据集的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:08:08.363

简单地创建一个对象数组，不需要键（注意列表周围的 [ ]）

json.txt

```
[{
    "id": "123",
    "info": {
        "code": "ZGE",
        "description": "test1",
        "type": "AVL",
        "date": "09/08/2012"
    }
},
{
   "id": "456",
    "info": {
        "code": "ZDN",
        "description": "test2",
        "type": "CLR",
        "date": "16/02/2012"
    }
}] 
```

例子.php

```
<?php
    $data = json_decode(file_get_contents('./json.txt'));
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:21:42.463

您在第一个示例中指定的 JSON 格式（即请求的格式）不是有效的 JSON。

有效的 JSON 字符串必须计算为*单个*Javascript 对象；您给出的示例计算为两个 Javascript 对象，用逗号分隔。为了使其有效，您需要将整个内容括在方括号中，将其转换为 JS 数组或将其括在花括号中，并为这两个对象中的每一个指定一个键。

您编写的 PHP 代码正在执行这两个选项中的第二个。因此，它生成了有效的 JSON 代码，与预期的原始请求一样接近，同时仍然有效。

如果您向我们展示了您用来执行此操作的 PHP 代码，将会有所帮助；没有它，我真的不能就如何改进它给你建议，但是如果你想切换到方括号表示法，你所需要的只是将你的 PHP 对象放入一个无键数组中，并且`json_encode()`应该为你做这一切; 您不需要为此使用键控数组或迭代器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:23:27.793

它可以这样构建：

```
$arr = array(
    array(
        'id' => 123,
        'info' => array(
            'code' => 'ZGE',
            'description' => 'test1',
            'type' => 'AVL'
        )
    ),
    array(
        'id' => 456,
        'info' => array(
            'code' => 'ZDN',
            'description' => 'test2',
            'type' => 'CLR'
        )
    )
);

echo json_encode($arr); 
```

**输出**

```
[
    {
        "id": 123,
        "info": {
            "code": "ZGE",
            "description": "test1",
            "type": "AVL"
        }
    },
    {
        "id": 456,
        "info": {
            "code": "ZDN",
            "description": "test2",
            "type": "CLR"
        }
    }
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:20:47.393

json_encode 应该产生您看到的输出的唯一原因是向您传递给 json_encode 的数组添加另一个命名键，默认情况下它应该按您的意愿工作：

```
$json = '[
    {
        "id": "123",
        "recall_info": {
            "code":"ZGE",
            "description": "test1",
            "type": "AVL",
            "date": "09/08/2012"
        }
    },
    {
        "id": "123",
        "recall_info": {
            "code": "ZDN",
            "description": "test2",
            "type": "CLR",
            "date": "16/02/2012"
        }
    }
]';

$php = array(
    (object) array(
        'id' => '123',
        'recall_info' => (object) array(
            'code' => 'ZGE',
            'description' => 'test1',
            'type' => 'AVL',
            'date' => '09/08/2012'
        )
    ),
    (object) array(
        'id' => '123',
        'recall_info' => (object) array(
            'code' => 'ZGE',
            'description' => 'test2',
            'type' => 'CLR',
            'date' => '16/02/2012'
        )
    )
);

var_dump(json_encode($php)); 
```

# vb.net - 用于 HTML 的 PDF 转换器

> ID：14194623
> 
> 赞同：0
> 
> 时间：2013-01-07T11:06:14.867
> 
> 标签：vb.net

我正在寻找一种在 VB 中将 HTML 转换为 PDF 的产品。我搜索了很多产品，但大多数都非常昂贵或效果不佳。任何人都可以向我推荐一个质量好的、工作的产品吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:09:03.690

我使用[htmldoc](https://www.msweet.org/projects.php?Z1)

不知道它是否符合您对“效果很好”的定义，但对我来说，它确实有用。

另一种方法是安装打印到 PDF 的打印机驱动程序（例如 freepdf），然后从浏览器打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:09:55.227

尝试使用 mPDF。mPDF 是一个 PHP 类，它从 UTF-8 编码的 HTML 生成 PDF 文件。它是免费的，而且效果很好。

[http://www.mpdf1.com/mpdf/index.php](http://www.mpdf1.com/mpdf/index.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:12:51.257

请参阅[**WKHTMLPDF。**](http://code.google.com/p/wkhtmltopdf/)

我检查了质量并使用了这个工具。这是一个好的和开源的。这是使用 webkit 渲染引擎和 qt 将 html 转换为 pdf 的 shell 实用程序。

# java - Java程序中的正则表达式查询

> ID：14194625
> 
> 赞同：0
> 
> 时间：2013-01-07T11:06:18.050
> 
> 标签：java, regex

```
^[0-9]\\d*(\\.\\d+)?$ 
```

我不能完全弄清楚上面的正则表达式模式在寻找什么。但我不知道。

我的部分困惑源于这样一个事实，即在 SCJP6 认证书中，not 运算符包含在方括号内，而这里它在外面。另外，在正则表达式方面，我通常缺乏经验。

有人可以帮忙吗？[这是来自 Java 程序。以上是Java特有的吗？] 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:10:40.100

`^`字符串的开头

`[0-9]`一个数字

`\\d*`任意数量的数字（0-无穷大）

`(\\.\\d+)?`一次，或根本没有：一个点后跟至少一个数字

`$`字符串的结尾。

您有一个复杂的正则表达式，它将匹配任何浮点数或非浮点数。

查看[`java.util.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)课程和[Oracle Java Regex 教程](http://docs.oracle.com/javase/tutorial/essential/regex/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T11:11:59.167

它正在寻找一个或多个数字，可选地后跟一个`.`和一个或多个数字。它令人困惑，因为它不必要地复杂。它与

```
^\\d+(\\.\\d+)?$ 
```

\d 定义为`A digit: [0-9]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:10:47.220

当“ `^`”运算符在字符类“ `[]`”之外时，它表示输入的开始，“ `$`”定义输入的结束。

所以你的描述是正确的，但应该改为：

> 找到从零到九的单个数字...

有关正则表达式的更多信息，请查看此[链接](http://www.regular-expressions.info/tutorialcnt.html)

# jquery - Twitter API 的问题

> ID：14194632
> 
> 赞同：0
> 
> 时间：2013-01-07T11:06:31.387
> 
> 标签：jquery, ajax, twitter

我在我的应用程序中使用 Twitter API。我可以通过我的 Twitter 帐户登录，也可以获取我的关注者列表。现在我想向他们发送直接消息，我尝试了一些代码但没有成功。

```
function tweetf(screenname) {

  var params = 'tweetname='+screenname+'&tweetmsg=I just joined Aviesta and I love it! I think you will too! Gorgeous shoes chosen each month just for you.'; 

  $.ajax({
    type:"GET",
    url:'http://api.twitter.com/1.1/direct_messages/new.json',
    data: { screen_name:screenname,text:'hello'},
    success: function(msg){
      alert(msg);
    }                        
  });
} 
```

我在控制台中没有收到任何错误，但它不起作用。

是否有任何我必须发送的参数或其他任何参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:17:43.673

根据[API 文档](https://dev.twitter.com/docs/api/1.1/post/direct_messages/new)，您需要使用 HTTP POST 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:17:51.427

[https://dev.twitter.com/docs/api/1/post/direct_messages/new](https://dev.twitter.com/docs/api/1/post/direct_messages/new)

> 需要用户和文本参数，并且必须是**POST**

# c# - ServiceStack.Net OrmLite 在不使用属性的情况下将自动增量添加到表 id

> ID：14194633
> 
> 赞同：0
> 
> 时间：2013-01-07T11:06:36.973
> 
> 标签：c#, orm, attributes, ormlite-servicestack

我正在使用 OrmLite 创建一个 Dal，用于从一个没有（也不应该）在其类属性上具有 Orm 特定属性的库中持久保存模型。

当我使用 OrmLite 基于这些类创建表时，是否可以在没有这些属性的情况下为 Id 指定自动增量（和/或其他可以由属性定义的东西）？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:37:46.220

我遇到了同样的问题，除了使用属性来获取我的自动增量 ID 之外找不到任何方法。由于 ServiceStack.ORMlite 是开源的，因此您可以根据自己的需要轻松调整代码。我最终将所有属性移动到一个单独的库项目中。如果您根本不想使用属性，您还可以引入某种额外的命名约定，就像对 Id/PrimaryKey 所做的那样，或者只是制作任何 ID AutoIncrement。

# coq - Coq - 在 if ... then ... else 中使用 Prop (True | False)

> ID：14194635
> 
> 赞同：8
> 
> 时间：2013-01-07T11:06:56.130
> 
> 标签：coq

我对 Coq 有点陌生。

我正在尝试实现插入排序的通用版本。我正在实现的是作为一个以比较器为参数的模块。这个 Comparator 实现了比较运算符（例如 is_eq、is_le、is_neq 等）。

在插入排序中，为了插入，我必须比较输入列表中的两个元素，并根据比较的结果，将元素插入到正确的位置。

我的问题是比较运算符的实现是`type -> type -> prop`（我需要它们像这样才能实现其他类型/证明）。`type -> type -> bool`如果可以避免，我宁愿不创建运算符的版本。

有什么方法可以将`True | False`prop 转换为 bool 以在`if ... then ... else`子句中使用？

比较器模块类型：

```
Module Type ComparatorSig.

  Parameter X: Set.
  Parameter is_eq : X -> X -> Prop.
  Parameter is_le : X -> X -> Prop.
  Parameter is_neq :  X -> X -> Prop.

  Infix "=" := is_eq (at level 70).
  Infix "<>" := (~ is_eq) (at level 70).
  Infix "<=" := is_le (at level 70).

  Parameter eqDec : forall x y : X, { x = y } + { x <> y }.

  Axiom is_le_trans : forall (x y z:X), is_le x y -> is_le y z -> is_le x z.

End ComparatorSig. 
```

自然数的实现：

```
Module IntComparator <: Comparator.ComparatorSig.
  Definition X := nat.
  Definition is_le x y := x <= y.
  Definition is_eq x y := eq_nat x y.
  Definition is_neq x y:= ~ is_eq  x y.

  Definition eqDec := eq_nat_dec.

  Definition is_le_trans := le_trans.
End IntComparator. 
```

插入排序的插入部分：

```
 Fixpoint insert (x : IntComparator .X) (l : list IntComparator .X) :=
    match l with
      | nil => x :: nil
      | h :: tl => if IntComparator.is_le x h then x :: h :: tl else h :: (insert x tl)
    end. 
```

（显然，插入固定点不起作用，因为 is_le 返回 Prop 而不是 bool）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T18:19:37.313

你似乎对 Prop 有点困惑。

`is_le x y`是 Prop 类型，并且是语句`x is less or equal to y`。这不能证明这种说法是正确的。证明该陈述正确的证据是`p : is_le x y`，该类型的居民（即该陈述真实性的证人）。

这就是为什么在`IntComparator.is_le x h`.

更好的界面如下：

```
Module Type ComparatorSig.

  Parameter X: Set.
  Parameter is_le : X -> X -> Prop.
  Parameter is_le_dec : forall x y, { is_le x y } + { ~ is_le x y }. 
```

特别是， 的类型`is_le_dec`是属性 的决策过程的类型`is_le`，也就是说，它返回一个证明那个`x <= y`，或者一个证明那个`~ (x <= y)`。由于这是具有两个构造函数的类型，因此您可以利用`if`糖：

`... (if IntComparator.is_le_dec x h then ... else ...) ...`

从某种意义上说，这是一个增强的`bool`，它返回一个见证它试图决定的东西。有问题的类型被调用`sumbool`，你可以在这里了解它：http: [//coq.inria.fr/library/Coq.Init.Specif.html#sumbool](http://coq.inria.fr/library/Coq.Init.Specif.html#sumbool)

* * *

`True`一般来说，谈论或`False`执行代码是没有意义的。

首先，因为这些存在于 中`Prop`，这意味着它们不能与计算相关，因为它们将被删除。

其次，因为他们不是唯一的居民`Prop`。虽然`true`和`false`是 type 的唯一值`bool`，这意味着您可以进行模式匹配，但该类型`Prop`包含无限数量的元素（您可以想象的所有语句），因此尝试对 type 的元素进行模式匹配是没有意义的`Prop`.

# php - mcrypt_encrypt 乱码文本

> ID：14194642
> 
> 赞同：0
> 
> 时间：2013-01-07T11:07:28.610
> 
> 标签：php, encryption

首先，请原谅这个问题，这可能是一个简单的问题，但我无法理解加密方法..

我正在使用以下函数来加密/解密：

```
private function encodemc($value,$skey){ 
    if(!$value){return false;}
    $skey = substr($skey, 2, 4);
    $text = $value;
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $skey, $text, MCRYPT_MODE_ECB, $iv);
    return trim($this->safe_encode($crypttext)); // safe_encode adds another encoding using `base64_encode`
}

private function decodemc($value,$skey){
    if(!$value){return false;}
    $skey = substr($skey, 2, 4);
    $crypttext = $this->safe_decode($value);
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $decrypttext = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $skey, $crypttext, MCRYPT_MODE_ECB, $iv);
    return trim($decrypttext);
} 
```

`$key`看起来像这样：`570c45546dwq45gjk191`。

我将要加密的值传递给第一个函数，然后将其保存到数据库中，然后从数据库中检索它，解密并将其显示为 html 文本。

问题是某些文本没有得到正确的解密/加密，并且它显示在 html 页面中，就好像它是错误的文本编码一样。

奇怪的是，在 10 个项目中，只有 2 或 3 个是乱码，具体取决于密钥。此外，有时只有部分字符串是乱码。

我发现导致乱码的原因是一些随机字母。例如，当使用上面的键时，字母`S`会破坏代码并且文本会出现乱码。

因此，我已经申请`substr($skey, 2, 4);`了密钥以查看是否有任何变化。事实证明，如果我更改密钥，破坏代码的字符就会不同。

但即使使用长度 == 1 的键，问题仍然存在。

知道有什么问题吗？

编辑：

这里是其余的代码。

```
private function safe_encode($string) {
    $data = base64_encode($string);
    $data = str_replace(array('+','/','='),array('-','_',''),$data);
    return $data;
}

private function safe_decode($string) {
    $data = str_replace(array('-','_'),array('+','/'),$string);
    $mod4 = strlen($data) % 4;
    if ($mod4) {
        $data .= substr('====', $mod4);
    }
    return stripslashes(base64_decode($data));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:20:54.023

这似乎是一个非常奇怪的问题。

我没有给你一个明确的答案，但这里有几件事你可以尝试。

1.  加密/解密而不去数据库。如果问题消失，则说明数据库处理通过加密功能输出的字符时存在问题。
2.  在加密之前修剪值。如果问题消失，则加密后的修剪是错误的*。*
3.  删除`safe_encode`和`safe_decode`代码。如果问题消失了，那么这些功能正在添加/删除重要的东西。

一次完成以上所有操作很重要，因为可能存在多个问题。如果上述步骤消除了问题，则一次重新引入一个，以确定导致问题的原因。

# python - 在服务器上运行 python 脚本

> ID：14194643
> 
> 赞同：0
> 
> 时间：2013-01-07T11:07:28.813
> 
> 标签：python, linux, subprocess

我在服务器上有一个 python 脚本

```
#!/usr/bin/env  python
import cgi
import cgitb; #cgitb.enable()
import sys, os
from subprocess import call
import time
import subprocess
form = cgi.FieldStorage()

component = form.getvalue('component')
command = form.getvalue('command')

success = True

print """Content-Type: text/html\n"""

if component=="Engine" and command=="Start":
    try:
         process = subprocess.Popen(['/usr/sbin/telepath','engine','start'], shell=False, stdout=subprocess.PIPE)
         print "{ans:12}" 
    except Exception, e:
         success = False
         print "{ans:0}" 
```

当我运行此脚本并将组件和命令参数分别添加为“Engine”和“Start”时 - 它启动进程并打印到 shell

```
"""Content-Type: text/html\n"""
{ans:12} 
```

但最重要的是——它开始了这个过程！

但是，当我通过 POST 运行脚本时，它会返回 {ans:12} 但不会运行最初的整个意图的过程。有什么合乎逻辑的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:33:41.520

我怀疑这是两件事之一，首先你的进程可能正在运行，但你的`python`代码不处理输出，所以这样做：

```
process = subprocess.Popen(['/usr/sbin/telepath','engine','start'], shell=False, stdout=subprocess.PIPE)
print process.stdout.read() 
```

这是最有可能的，并解释了为什么您看到的是命令行而不是浏览器的输出，或者其次是因为脚本是以用户身份通过​​浏览器运行的，`apache`而不是您`userid`检查`/usr/sbin/telepath`.

# perl - Mojolicious websocket 请求查询字符串

> ID：14194650
> 
> 赞同：1
> 
> 时间：2013-01-07T11:07:56.830
> 
> 标签：perl, mojolicious

我在尝试访问 mojolicious websocket 请求中的查询字符串参数时遇到了意外行为。假设我的请求如下所示：

```
ws://127.0.0.1:3000/websock_action?item_id=1234 
```

然后在我的 mojo 控制器代码中，我尝试通过以下任何一种方式获取 item_id 的值：

```
#in mojo controller
my $item_id = $self->param('item_id');
my $item_id = scalar $self->param('item_id');
my $item_id = scalar $self->tx->req->url->query->param('item_id'); 
```

问题是我得到的 item_id 通常来自以前的请求，无论我使用哪种技术。我的应用程序目前正在使用 hypnotoad。

mojolicious 中的 websocket 请求是否支持查询字符串参数？有没有更可靠的方法来访问它们？本质上我想知道我是否正在尝试不支持的东西，所以我可以知道问题是否是我的应用程序特有的问题。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T22:33:00.407

我怀疑正在发生的事情是参数在 html 请求中传递，然后升级为 websocket 请求，此时它们不再可用。

正如达人所说，在Web-Socket数据中传递数据。就像是...

```
var ws = $.websocket("ws://127.0.0.1:3000/websock_action", {
  events: { message: function(e) {}
});
ws.send('message', 1234); 
```

# android - 图形在移动设备（S2）上看起来不错，但在平板电脑上模糊（Kindle/Acer Iconia）

> ID：14194651
> 
> 赞同：0
> 
> 时间：2013-01-07T11:08:03.243
> 
> 标签：android, graphics, android-view, blurry

各位程序员好！

在圣诞节假期期间，我开始开发一个填字游戏应用程序，并在我的三星 Galaxy S2 上对其进行了彻底的测试，因为它是我当时唯一拥有的设备。现在回到工作岗位，我还可以使用 Acer Iconia 和 Kindle Fire HD。问题是我的应用在任一平板电脑上看起来完全模糊。

我的应用程序不使用任何预制图像，一切都是从 xml 可绘制对象（主要是渐变）中绘制的。虽然没有必要，但我将所有 xml 渐变复制到所有 dpi 文件夹（ldpi、mdpi、hdpi、xhdpi）。我还在清单中明确添加了supports-screens 标签，将smallscreens 添加到xlargescreens 和anydensity。没有任何效果。

我的绘图程序如下所示：

```
canvas.save();
canvas.translate(mPosX, mPosY);
canvas.scale(zoom, zoom,centerx,centery);
for(int x=0;x<mapsize;x++) 
    for(int y=0;y<mapsize;y++) {
        this.gc.setBounds(cells[x][y]);
        this.gc.draw(canvas);
    }
canvas.restore(); 
```

开始时，我找出设备的最小边（800x480 = 480），将其除以填字游戏中的单元格数（15），因此我得到 S2 的单元格大小为 32。我只画了 15x15 的瓷砖，每个瓷砖的尺寸为 32x32。这在我的手机上看起来很清晰，即使我放大 15 倍，文本和图形也保持清晰。不是在平板电脑上，图形从一开始就模糊不清，越放大越糟糕。在 Acer Iconia 上，箭头甚至没有绘制，它们都在左上角杂乱无章，尽管 Logcat 说偏移量是正确计算的，他们只是似乎没有在其他任何地方被吸引。我认识到的一件事是当我在 Acer Iconia 上启动应用程序时，Logcat 还说

```
01-07 11:39:35.292: D/libEGL(7914): loaded /system/lib/egl/libEGL_tegra.so

01-07 11:39:35.292: E/(7914): file /data/data/com.nvidia.NvCPLSvc/files/driverlist.txt: not found!

01-07 11:39:35.292: I/(7914): Attempting to load EGL implementation /system/lib//egl/libEGL_tegra_impl
01-07 11:39:35.302: I/(7914): Loaded EGL implementation /system/lib//egl/libEGL_tegra_impl
01-07 11:39:35.302: D/libEGL(7914): loaded /system/lib/egl/libGLESv1_CM_tegra.so
01-07 11:39:35.302: D/libEGL(7914): loaded /system/lib/egl/libGLESv2_tegra.so
01-07 11:39:35.332: I/(7914): Loading GLESv2 implementation /system/lib//egl/libGLESv2_tegra_impl
01-07 11:39:35.332: D/OpenGLRenderer(7914): Enabling debug mode 0 
```

加载某些驱动程序似乎存在问题，有人对此了解更多吗？在网上找不到太多关于它的信息。

最后是一些图片，上面有 1000 多字。

夏普 [http://imageshack.us/photo/my-images/338/crosswords21.png](http://imageshack.us/photo/my-images/338/crosswords21.png) [http://imageshack.us/photo/my-images/593/crosswords22.png/](http://imageshack.us/photo/my-images/593/crosswords22.png/) 三星 Galaxy S2

模糊，箭头在正确的位置 [http://imageshack.us/photo/my-images/850/crosswordkindle1.png](http://imageshack.us/photo/my-images/850/crosswordkindle1.png) [http://imageshack.us/photo/my-images/252/crosswordkindle2.png/](http://imageshack.us/photo/my-images/252/crosswordkindle2.png/) Kindle Fire HD

左上角的箭头模糊不清 [http://imageshack.us/photo/my-images/259/crosswordiconia1.png](http://imageshack.us/photo/my-images/259/crosswordiconia1.png) [http://imageshack.us/photo/my-images/803/crosswordiconia2.png/](http://imageshack.us/photo/my-images/803/crosswordiconia2.png/) Acer Iconia

请帮助我:) 提前谢谢。

刚刚发现这个[我的 android 应用程序中的所有文本都变得模糊](https://stackoverflow.com/questions/8212932/all-the-text-in-my-android-application-gets-blurred)。似乎是 Iconia Tab 的常见问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:49:11.007

在 Kindle 和 Iconia 上，应用程序硬件加速标签似乎是自动激活的。当设置为 false 时，图形会变得清晰并再次清晰。现在（显然）有点慢，但它有效。相反，当我在 S2 上打开硬件加速时，图像变得像平板电脑一样模糊。

# sql-server - 这是对 datediff 进行 TSQL 计算的最有效方法吗

> ID：14194653
> 
> 赞同：0
> 
> 时间：2013-01-07T11:08:17.483
> 
> 标签：sql-server, performance, tsql, datetime

我有一个类似于下面的数据表，我需要计算直到今天所有暂停时间的总和。列中可以包含任何日期，因此 PauseStart 可以是未来日期，而 PauseEnd 也可以是未来日期。空日期 (20991231) 被视为开放式结束，即未选择暂停的结束日期。

注意：日期是英国日期格式

**数据**

```
PauseID RecID   PauseStart              PauseEnd
1022    10      2013-01-04 15:52:04.320 2013-01-21 00:00:00.000
1023    10      2013-01-01 00:00:00.000 2013-01-02 00:00:00.000
1024    10      2013-01-05 00:00:00.000 2099-01-01 00:00:00.000 
```

上面的数据显示，我们在 2013 年 1 月 1 日和 2013 年 2 月 1 日之间暂停，在 2013 年 4 月 1 日和 2013 年 21 月 1 日之间暂停（总和应记录为 2013 年 4 月 1 日到2013 年 7 月 1 日 11:00:00）和 2013 年 5 月 1 日 -> 开放（应在总和中登记为 2013 年 5 月 1 日至 2013 年 7 月 1 日 11:00:00）

列未编入索引。

**我想出**的 TSQL看起来像这样****

 **```
SELECT 
    SUM (
    CASE 
    WHEN NULLIF(PauseEnd,'20991231') IS NULL THEN
        DATEDIFF(mi, PauseStart, ISNULL(NULLIF(PauseEnd,'20991231'), GetDate()))
    WHEN PauseEnd > GetDate() THEN
        DATEDIFF(mi, PauseStart, GetDate())
    ELSE
        DATEDIFF(mi, PauseStart, ISNULL(NULLIF(PauseEnd,'20991231'), GetDate()))
    END
        ) AS Datedifference
    FROM Pauses
WHERE Pauses.RecID = 10
AND PauseStart < GetDate() 
```

这给了我结果

```
4021
1440
3533 
```

这似乎是正确的，但是我的问题仍然存在，

**这是实现这一结果的最有效方法吗？**

附录，这个表可以开始保存数百万条记录，所以我想让计算总和的 tsql 在第一个实例中有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:19:23.940

我会这样做：

```
SELECT 
PauseStart,
DATEDIFF(mi, PauseStart, CASE  WHEN PauseEnd > GetDate() THEN GetDate() ELSE PauseEnd END) as Datedifference
FROM Pauses
WHERE Pauses.RecID = 10 AND PauseStart < GetDate() 
```**

# php - 如何通过linux服务器调用任何php类的方法

> ID：14194658
> 
> 赞同：-5
> 
> 时间：2013-01-07T11:08:36.047
> 
> 标签：php, linux, scheduling

我是 linux 新手。我有一个名为 Schedule 的类，在 php 中有一个方法 DoAction()。我希望我的 linux 服务器在每周和每月的 15 分钟、1 小时、6 小时的间隔后调用方法 DoAction()。请给我一些想法来实现这个目标。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:09:56.927

Linux 有一个系统范围的调度程序，称为`cron`. 它很可能已经安装。

更多信息在这里：[http ://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:17:47.633

您必须创建一个包含您的类的 php 文件，并使用它来完成所有工作。在此步骤之后，您可以将命令添加`php /script/file.php`到您的 crontab 文件中

# mysql - SUM 后在 SQL 查询中查找 AVG 值 - 组函数的使用无效

> ID：14194663
> 
> 赞同：1
> 
> 时间：2013-01-07T11:08:48.230
> 
> 标签：mysql, sql, sum, average

我有一些对我来说很好的查询：

```
Select Name,sum(number_hours)/8)*100
from 
T1
where name='PERSON_A'
group by name,booked_date 
```

姓名始终是我放在 where 子句中的一个人。结果将是：

```
PERSON_A  100
PERSON_A  140
PERSON_A  120 
```

这是计算每个预定日期的工作人员的一些日常使用情况。现在我想计算平均每日利用率((120+120+100)/3=120) 但是当我把

```
Select Name,AVG(sum(number_hours)/8)*100)
FROM
T1
WHERE name='PERSON_A'
group by name,booked_date 
```

我收到错误无效使用组功能。为什么？在汇总日常使用值后如何计算平均值。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T11:11:22.137

尝试对总和使用子查询并计算外部查询中的平均值，例如：

```
SELECT Name, AVG (hsum)
FROM
(
    SELECT Name,sum((number_hours)/8)*100 AS hsum
    FROM
    T1
    WHERE name='PERSON_A'
    GROUP BY name,booked_date
) t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T11:55:18.623

我知道您已经接受了答案。但是也试试这个:) 不`subquery`。也蛮快的。我添加了额外的`Count of workdates`列供您查看日期。

## * [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/c2e2d/25)

样本数据表：

```
ID      NAME    HOURS       WORKDATE
100     j       20          December, 03 2012 00:00:00+0000
200     k       10          December, 03 2012 00:00:00+0000
100     j       10          December, 04 2012 00:00:00+0000
300     l       20          December, 04 2012 00:00:00+0000
100     j       5           December, 05 2012 00:00:00+0000
300     l       15          December, 03 2012 00:00:00+0000
100     j       10          December, 04 2012 00:00:00+0000
400     m       20          December, 03 2012 00:00:00+0000 
```

询问：

```
SELECT Name, ((sum(hours)/8)*100) AS sum
,count(distinct workdate) workdates, ((sum(hours)/8)*100)/count(
  distinct workdate) as avg    
FROM
    works
    WHERE name='j'
    GROUP BY name
; 
```

结果：

```
NAME    SUM     WORKDATES   AVG
j       562.5   3           187.5 
```

# php - 它没有在答案数据库表中插入 questionid

> ID：14194664
> 
> 赞同：0
> 
> 时间：2013-01-07T11:08:51.150
> 
> 标签：php, mysql, sql, mysqli

我无法插入`QuestionId`表格`Answer`。

`Question`插入没有问题，但我试图`QuestionId`从表中检索，`Question`这是一个自动增量到`Answer`表中，通过查找`SessionId`和`QuestionNo`那个特定的`QuestionId`属于。相反，它在插入表格时一直显示`0`。`QuestionId``Answer`

现在我知道尝试`QuestionId`从`Question`表中执行选择的查询是正确的，因为这已经过测试。我认为问题在于我将代码放在哪里，但我不确定？

这是数据库表：

问题表

```
QuestionId (auto)  SessionId  QuestionNo
4                  2          1
5                  2          2
6                  2          3 
```

目前答题表：

```
AnswerId (auto)  QuestionId  Answer
7                0           A
8                0           C
9                0           A
10               0           B
11               0           True 
```

答案表应如下所示：

```
AnswerId (auto)  QuestionId  Answer
7                4           A
8                4           C
9                5           A
10               5           B
11               6           True 
```

下面是代码：

```
 $questionsql = "INSERT INTO Question (SessionId, QuestionNo) 
    VALUES (?, ?)";
if (!$insert = $mysqli->prepare($questionsql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

 $answersql = "INSERT INTO Answer (QuestionId, Answer) 
    VALUES (?, ?)";
if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

//make sure both prepared statements succeeded before proceeding
if( $insert && $insertanswer)
{
    $sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '');
    $c = count($_POST['numQuestion']);

    for($i = 0;  $i < $c; $i++ )
    {

            $insert->bind_param("ii", $sessionid, $_POST['numQuestion'][$i]);

            $insert->execute();

            if ($insert->errno) 
            {
                // Handle query error here
                echo __LINE__.': '.$insert->error;
                break 1;
            }
}

        $results = $_POST['value'];
        foreach($results as $id => $value) 
        {
            $answer = $value;

            $lastID = $id;

            $questionidquery = "SELECT QuestionId FROM Question WHERE (QuestionNo = ? AND SessionId = ?)";

        if (!$questionidstmt = $mysqli->prepare($questionidquery)) {
        // Handle errors with prepare operation here
          echo __LINE__.': '.$mysqli->error;
        }

        // Bind parameter for statement
        $questionidstmt->bind_param("ii", $lastID, $sessionId);

        // Execute the statement
        $questionidstmt->execute();

                    if ($questionidstmt->errno) 
                    {
                        // Handle query error here
                        echo __LINE__.': '.$questionidstmt->error;
                        break 2;
                    }

        // This is what matters. With MySQLi you have to bind result fields to
        // variables before calling fetch()
        $questionidstmt->bind_result($quesid);

        // This populates $optionid
        $questionidstmt->fetch(); 

        $questionidstmt->close(); 

            foreach($value as $answer) 
            {
                $insertanswer->bind_param("is", $quesid, $answer);

                $insertanswer->execute();

                if ($insertanswer->errno) {
                    // Handle query error here
                    echo __LINE__.': '.$insertanswer->error;
                    break 3;
                }
            }
        }

    //close your statements at the end

    $insertanswer->close();
    $insert->close();
}

?> 
```

**更新：**

结果来自 var_dump($_POST);

```
array(8) { 
["numberAnswer"]=> array(2) { 
         [0]=> string(1) "1" 
         [1]=> string(1) "1" 
         } 
         ["numQuestion"]=> array(2) 
         { 
         [0]=> string(1) "1" 
         [1]=> string(1) "2" 
         } 
         ["questionText"]=> array(2) { 
         [0]=> string(12) "What is 2+2?" 
         [1]=> string(12) "What is 4+4?" 
         } 
         ["gridValues"]=> array(2) { 
         [0]=> string(1) "4" 
         [1]=> string(1) "4" 
         } 
         ["reply"]=> array(2) { 
         [0]=> string(6) "single" 
         [1]=> string(6) "single" 
         } 
         ["textWeight"]=> array(2) { 
         [0]=> string(1) "5" 
         [1]=> string(1) "5" 
         } 
         ["submitDetails"]=> string(14) "Submit Details" ["value"]=> array(2) { 
         [1]=> array(1) { 
         [0]=> string(1) "B" 
         } 
         [2]=> array(1) { 
         [0]=> string(1) "D" 
         } 
         } 
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:25:43.513

现在您的 QuestionID 来自`$_POST['value']`，这可能不是您想要的......您需要在插入每个问题后从 mysql 获取自动生成的 QuestionID。

您可以使用 检索最后生成的 ID `$mysqli->insert_id`。在每次调用 之后执行此操作`$insert->execute();`，然后在您插入答案时使用这些 ID。

## 编辑1：

您应该使用`$mysqli->insert_id`，因为`insert_id`仅在连接对象上有效（您的称为`$mysqli`）。

您还需要将 insert_id 分配给某些东西。我在遵循您的代码时遇到了麻烦，但我认为您想要的是将问题 ID 存储在一个数组中以供以后使用，如下所示：

```
$question_ids[$i] = $mysqli->insert_id 
```

我对您在此之后尝试做的事情感到茫然，我猜您使用相应的问题编号提供了一些答案，但是......也许如果您可以发布我们的输出，`var_dump($_POST)`我们会更好地理解。在任何情况下，您都需要某种循环来插入每个问题的答案，并且您可以（希望）使用该数组`$question_ids[$i]`来检索 QuestionID。

## 编辑2：

这是一些示例代码（未经测试），请先尝试使其正常工作，然后再使用`$_POST`和`$_SESSION`

```
<?php
$questions = array(
    array(2, 1),
    array(2, 2),
    # etc
);
$answers = array(
    array(A, C),
    array(A, B),
);

$questionsql = "INSERT INTO Question (SessionId, QuestionNo) VALUES (?, ?)";  
if (!$insert = $mysqli->prepare($questionsql)) {
    die('couldn\'t prepare statement 1');
}

$answersql = "INSERT INTO Answer (QuestionId, Answer) VALUES (?, ?)";
if (!$insertanswer = $mysqli->prepare($answersql)) {
    die('couldn\'t prepare statement 2');
}

$c = count($questions);

for($i = 0;  $i < $c; $i++)
{
    $insert->bind_param("ii", $questions[$i][0], $questions[$i][1]);
    $insert->execute();

    if ($insert->errno) 
    {
        die("Error inserting question $i");
    }

    $lastID = $mysqli->insert_id;

    foreach ($ans in $answers[$i])
    {
        $insertanswer->bind_param("is", $lastID, $ans);

        $insertanswer->execute();

        if ($insertanswer->errno) {
            die("Error inserting answer to question $i");
        }
    }

}

$insertanswer->close();
$insert->close();
?> 
```

# r - 使用 R 中的预定义变量绘制函数

> ID：14194670
> 
> 赞同：2
> 
> 时间：2013-01-07T11:09:03.177
> 
> 标签：r, function, automation, plot

我想在 R 中创建一个类。我有很多表，我想通过一个函数来绘制它们。我使用的代码是：

```
temp <- data.frame(gsbi1_30,gsbi1_29,ob_30,ob_29) 
```

其中 gsbi1_30,gsbi1_29,ob_30,ob_29 是表。

```
par(mfrow=c(2,2))
for (i in temp){ plot(i$ambtemp,type="o", pch=22, lty=2, col="brown",xlab = "Hour  2007/09/29" , ylab= "Ambient Tempreture" )
                 title(main="Hourly Mean, node 25", col.main="brown", font.main=1) } 
```

我想出了这个错误：

```
Error in plot(i$ambtemp, type = "o", pch = 22, lty = 2, col = "brown",  : 
  error in evaluating the argument 'x' in selecting a method for function 'plot': Error in i$ambtemp : $ operator is invalid for atomic vectors 
```

样本数据：

```
-0.6 -1.2 -1.0 -0.8 -0.4 -0.2 
```

所有其他样本都具有相同的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:49:41.923

问题是您不应该`temp`首先创建为 data.frame 。如果 gsbi1_30、gsbi1_29、ob_30 和 ob_29 本身是 data.frames（我怀疑），`data.frame()`将结合它们的列来生成一个大的 data.frame。

相反，创建一个`list`：

```
temp <- list(gsbi1_30,gsbi1_29,ob_30,ob_29) 
```

并用`lapply()`（`for`循环在R中非常低效）对其进行迭代：

```
par(mfrow=c(2,2))
lapply(temp, function(i) {
    plot(i$ambtemp, type = "o", pch = 22, lty = 2, col = "brown", xlab = "Hour  2007/09/29" , ylab = "Ambient Tempreture")
}) 
```

# xslt - 在 XSLT 中使用变量的值

> ID：14194679
> 
> 赞同：3
> 
> 时间：2013-01-07T11:09:35.937
> 
> 标签：xslt, xslt-1.0

谁能帮我在 XSLT 1.0 中使用动态变量值作为键创建地图

我有一个`addressID`值为 123 的变量。我想将其用作地图中的键

```
<xsl:value-of select="$addressID" /> // gives output 123

<my:map>
  <entry key="$addressID">1</entry>
</my:map> 
```

请建议我在键中使用变量的正确语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:38:09.077

首先，设置变量：

```
<xsl:variable name="addressID">123</xsl:variable> 
```

其次，您可以按如下方式使用它：

```
<my:map>
  <entry key="{$addressID}">1</entry>
</my:map> 
```

通过[http://www.w3.org/TR/xslt#variables](http://www.w3.org/TR/xslt#variables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:34:28.167

CodeGroover 是对的，您也可以使用`attribute`
下面提供的示例

```
<my:map>
  <entry>
    <xsl:attribute name="key">
       <xsl:value-of select="$addressID"/>
    </xsl:attribute>
    <xsl:value-of select="'1'"/>
  </entry>
</my:map> 
```

# flash - 如何侦听分派给某个对象的所有事件？

> ID：14194682
> 
> 赞同：0
> 
> 时间：2013-01-07T11:09:48.363
> 
> 标签：flash, apache-flex, events

[`addEventListener`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/EventDispatcher.html#addEventListener%28%29)如果将特定类型的事件分派给某个对象，则使用I 可以注册要调用的回调。*如果将任何*事件分派给对象，我如何调用我的回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:07:49.250

您可以覆盖`dispatchEvent`，如下所示：

```
public class UniversalDispatcher extends EventDispatcher {

    override public function dispatchEvent(event:Event):Boolean {
        if (event is UniversalEvent)
            return false;
        var uEvent:UniversalEvent = new UniversalEvent();
        uEvent.subEvent = event.clone();
        var res:Boolean =  super.dispatchEvent(event);
        super.dispatchEvent(uEvent);
        return res;
    }
} 
```

创建自定义事件，其中将包含原始事件：

```
public class UniversalEvent extends Event {

    public static const UNIVERSAL:String = "universal";
    public var subEvent:Event;

    public function UniversalEvent(type:String = UNIVERSAL, bubbles:Boolean = true, cancelable:Boolean = false) {
        super(type, bubbles, cancelable);
    }
} 
```

使用示例：

```
var ud:UniversalDispatcher = new UniversalDispatcher();
ud.addEventListener(UniversalEvent.UNIVERSAL, onUniversalEvent);
ud.dispatchEvent(new Event("blabla"));
ud.dispatchEvent(new Event("test"));
ud.dispatchEvent(new MouseEvent(MouseEvent.CLICK));

private function onUniversalEvent(event:UniversalEvent):void {
    trace("Event dispatched: " + event.subEvent.toString());
} 
```

痕迹：

```
[trace] Event dispatched: [Event type="blabla" bubbles=false cancelable=false eventPhase=2]
[trace] Event dispatched: [Event type="test" bubbles=false cancelable=false eventPhase=2]
[trace] Event dispatched: [MouseEvent type="click" bubbles=true cancelable=false eventPhase=2 localX=NaN localY=NaN stageX=NaN stageY=NaN relatedObject=null ctrlKey=false altKey=false shiftKey=false buttonDown=false delta=0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:59:36.137

如果您确实可以控制通过“addEventListener”添加的每个事件侦听器，您可以执行以下操作：

```
import flash.events.Event;
import flash.text.TextField;
import flash.events.MouseEvent;
import flash.utils.Dictionary;

var label:TextField;
var wrap:Wrapper;

label.addEventListener(MouseEvent.CLICK, wrap.universalFunc( MouseEvent.CLICK, onLabelClick ));
label.addEventListener(MouseEvent.MOUSE_DOWN, wrap.universalFunc( MouseEvent.MOUSE_DOWN, onLabelMouseDown ));
label.addEventListener(MouseEvent.MOUSE_UP, wrap.universalFunc( MouseEvent.MOUSE_UP, onLabelMouseUp ));

class Wrapper {
    private var _eventTypes:Dictionary = new Dictionary();

    public function universalFunc( pEventType:String, pCallbackFunc:Function ):Function {
        _eventTypes[pEventType] = pCallbackFunc;
    }

    private function universalListener(e:Event):void {
        var callback:Function = _eventTypes[e.type];
        if (!callback) {
            return;
        }

        //Do whatever common behavior you want here:
        // ...

        //Pass the event to the callback method:
        callback(e);
    }
} 
```

或者，更干净，更少冗余：

```
import flash.events.Event;
import flash.events.IEventDispatcher;
import flash.text.TextField;
import flash.events.MouseEvent;
import flash.utils.Dictionary;

var label:TextField;
var wrap:Wrapper;

wrap.listen( label, MouseEvent.CLICK, onLabelClick );
wrap.listen( label, MouseEvent.MOUSE_DOWN, onLabelMouseDown );
wrap.listen( label, MouseEvent.MOUSE_UP, onLabelMouseUp );

class Wrapper {
    private var _eventTypes:Dictionary = new Dictionary();

    public function listen( pDispatcher:IEventDispatcher, pEventType:String, pCallbackFunc:Function ):void {
        _eventTypes[pEventType] = pCallbackFunc;

        pDispatcher.addEventListener(pEventType, universalListener);
    }

    private function universalListener(e:Event):void {
        var callback:Function = _eventTypes[e.type];

        if (!callback) {
            return;
        }

        //Do whatever common behavior you want here:
        // ...

        //Pass the event to the callback method:
        callback(e);
    }
} 
```

# wordpress - WordPress新设置旧文章

> ID：14194687
> 
> 赞同：0
> 
> 时间：2013-01-07T11:09:55.313
> 
> 标签：wordpress

我们在不使用 MU 的情况下运行了多个 Wordpress 安装。整个事情在代码方面有点失控，因为服务器上有非常旧的插件版本、遗留文件和大量潜在的不安全数据。核心安装以及插件已过时。其中一些插件不再起作用。我们想要做的是干净利落，安装一个包含所有需要的插件的新版本。我们还想使用不同的主题。但我们也不想松散文章、评论、标签。

我尝试使用 Wordpress 自己的功能导出所有内容，然后将其导入新系统。工作正常，除了例程更改文章 ID，这对永久链接不利，并且在我们使用这些 ID 显示特殊的额外内容的地方进行调整时会产生副作用。

我认为最好的方法是使用旧数据库。但是，我认为我不能只使用旧版本的转储。有人知道没有系统设置的整个内容需要哪些表吗？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:16:18.130

我不建议这种方法，但是如果您想尝试，那么：

1.  评论数据：wp_commentmeta、wp_comments

2.  发布数据、类别、自定义菜单等：wp_postmeta、wp_posts、wp_terms、wp_term_relationships、wp_term_taxonomy

3.  用户：wp_usermeta，wp_users

如您所见，有 10 个强制性表和一个更多：您不想复制的 wp_options。

所有其他表都来自插件等。

# android - 刷卡活动的问题

> ID：14194693
> 
> 赞同：0
> 
> 时间：2013-01-07T11:10:19.133
> 
> 标签：android, android-activity, swipe

我正在尝试在不单击任何按钮的情况下滑动多个活动。我只想用他们各自的活动刷屏。但是现在，我不能用活动刷屏。 [在这里](https://stackoverflow.com/questions/14099573/swipe-with-activity-resource-not-found-exception) 我问看起来像这个问题。现在我只能搜索布局。我遵循 [本教程](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)。 **描述**
当我打开HotelDetails Activity时，我将它分为两​​部分，第一部分我们可以滑动，第二部分是列表视图。
在滑动部分我需要显示三个活动
1\. HotelMap（滑动部分的主屏幕和前屏幕）
2.hotelAddress（向左滑动）
3.hotelContact（向右滑动）。

这是我的代码，但它只会滑动屏幕而不是活动。

```
MyPagerAdapter adapter = new MyPagerAdapter();
     myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
     myPager.setAdapter(adapter);
     myPager.setCurrentItem(3);

private class MyPagerAdapter extends PagerAdapter {

    public int getCount(){
        return 3;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0: 
            resId = showHotelContact();             
            break;
        case 1:
            resId = showHotelAddress();         
            break;              
        case 2:     
            resId=showHotelMap();               
            break;      
        }

        View view = inflater.inflate(resId, null);
        ((ViewPager) collection).addView(view, 0);
        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public void finishUpdate(View arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);

    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public Parcelable saveState() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void startUpdate(View arg0) {
        // TODO Auto-generated method stub

    }

}

public int showHotelMap()
{
 i need to swipe activity therfore i use commented code but not able
//      Intent bookIntent = new Intent();     
//      bookIntent.setClass(HotelMap.this,ShowMap.class);
//      startActivity(bookIntent);   
//      ShowMap showmap = new ShowMap();        
    int resId = R.layout.hoteladdress;
    return resId;

}
public int showHotelAddress()
{
    int resId;
    resId = R.layout.hoteladdress;      
    TextView tvAddress = (TextView)findViewById(R.id.tvHotelAddress);
    tvAddress.setText(address);
    return resId;
}
public int showHotelContact()
{
    int resId;
    resId = R.layout.hotelcontact;
    return resId;
} 
```

}

我在 showHotelMap 中使用注释代码，但它显示以下异常

```
01-07 17:38:12.993: E/AndroidRuntime(10442): android.view.InflateException: Binary XML file line #2: Error inflating class com.google.android.maps.MapView
01-07 17:38:12.993: E/AndroidRuntime(10442):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
01-07 17:38:12.993: E/AndroidRuntime(10442):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
01-07 17:38:12.993: E/AndroidRuntime(10442):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-07 17:38:12.993: E/AndroidRuntime(10442):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-07 17:38:12.993: E/AndroidRuntime(10442):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-07 17:38:12.993: E/AndroidRuntime(10442):    at com.programr.dishoom.HotelMap$MyPagerAdapter.instantiateItem(HotelMap.java:134) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:36:26.377

MapView 必须存在于 MapActivity 中。你不能把它放在 ViewPager 中。但是，您可以使用支持 Fragments 的新 Google Maps Android API v2。不过，您仍然必须处理水平滑动问题（即，当您在地图页面上时，如何区分地图平移手势和页面更改手势？）。

另请参阅： [https ://developers.google.com/maps/documentation/android/v1/hello-mapview](https://developers.google.com/maps/documentation/android/v1/hello-mapview)

和

[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

# ajax - 如何在 primefaces ajax 请求中实现回调？

> ID：14194695
> 
> 赞同：1
> 
> 时间：2013-01-07T11:10:43.503
> 
> 标签：ajax, jsf, primefaces

我们正在开发一个购物应用程序。我们使用 jsf 和 primefaces 。我们在 primefaces 对话框上有登录表单。如果用户未登录，则单击添加到购物车（dlg.show（））时会出现对话框，否则它会直接添加到购物车。如果用户成功登录，则该项目成功添加到购物车。

我为登录对话框参考了以下示例。

[https://www.primefaces.org/showcase/ui/overlay/dialog/loginDemo.xhtml](https://www.primefaces.org/showcase/ui/overlay/dialog/loginDemo.xhtml)

我不确定我们如何在 primefaces ajax 请求中进行回调。基于登录操作的响应，我想调用添加到购物车操作。

任何人都可以为此建议更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T14:47:54.320

Primefaces 基本上为此提供了两种选择：

1.  Primefaces JavaScript API（困难的方式），您可以使用函数调用连接到 Primefacs jsf 引擎`Primefaces.ajax.AjaxRequest(cfg)`。`cfg`是与调用一起传递的 ajax 请求参数数组，其中可以包括到 ajax 进程的组件 id、要更新的 id、事件挂钩（`oncomplete`等`onerror`）和自定义请求参数。我在手机上输入这个，所以在这里列出一个例子会很痛苦，但如果这是你喜欢的路线，请查阅 Primefaces 官方手册。

2.  [`<p:remoteCommand/>`](http://primefaces.org/showcase-labs/ui/remoteCommand.jsf)，最简单的方法，是作为标准的 JSF 组件实现的，它为您提供常规 JavaScript 函数的所有功能和行为以及一半的输入。有了这个，您可以使用 JavaScript 函数的行为和语义来执行支持 bean 函数

# java - Spring Greenhouse 项目不能使用 MySql 吗？

> ID：14194697
> 
> 赞同：0
> 
> 时间：2013-01-07T11:10:47.773
> 
> 标签：java, spring

我刚刚签出了 Spring Greenhouse 项目，作为学习 Spring Security 的第一步。该项目运行良好，但我想知道以下情况：

有两种配置：标准和嵌入式。javadoc 说嵌入是默认的。我不确定如何让它在标准模式下运行。有没有人尝试过这个？

其次，在嵌入式模式下，我使用以下代码稍微修改了代码以使用 MySql 运行它，但令我惊讶的是，应用程序根本没有启动。它抛出以下错误：

```
throw new RuntimeException("Unable to determine database version", e);

@Bean(destroyMethod="shutdown")
public DataSource dataSource() {
    // EmbeddedDatabaseFactory factory = new EmbeddedDatabaseFactory();
    // factory.setDatabaseName("greenhouse");
    // factory.setDatabaseType(EmbeddedDatabaseType.);
    DriverManagerDataSource mysqldataSource = new DriverManagerDataSource();
    mysqldataSource.setDriverClassName("com.mysql.jdbc.Driver");
    mysqldataSource.setUrl("jdbc:mysql://localhost/greenhouse?useConfigs=maxPerformance&characterEncoding=utf8");
    mysqldataSource.setUsername("root");
    mysqldataSource.setPassword("mysql");
    return populateDatabase(mysqldataSource);       
} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:26:33.317

从你得到的异常来看，你感兴趣的文件是[GenericDatabaseUpgrader.java](http://git.springsource.org/greenhouse/greenhouse/blobs/c1c18b31a9e894bd4fc1b55e909cfdc90e24972b/src/main/java/org/springframework/jdbc/versioned/GenericDatabaseUpgrader.java#line93)

超过一半的代码指的`DatabaseVersion`是如果不存在则创建的表。由于我怀疑您是否已经拥有它并且根据异常类型 ( `SQLException`) 判断，我倾向于说它无法创建/插入/检索引用的表。

你可以检查你是否有桌子，然后从那里去。

此外，从您尝试注入的代码来看，我也将`connection = dataSource.getConnection()`其视为可能的罪魁祸首。

PS关于标准/嵌入式，您似乎可以通过VM参数或maven设置在两者之间切换。请查看[官方论坛，特别是此主题以获取信息](http://forum.springsource.org/archive/index.php/t-111250.html?s=fbc27b325da5c1273304f326366e169d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T10:16:22.410

我自己想通了。web.xml 中有一个标签，我将其从嵌入式更改为标准。问题在于创建数据库版本表的 sql 查询不是 mysl 投诉。还有其他查询不是 mysql 投诉。我更改了 sql 查询，现在一切都按预期工作。接下来我要做的是使用某种 og 通用数据库查询生成器，这样如果将来我改变主意使用 post gre sql 代替我的 sql，我就不必更改查询。感谢您的所有帮助和支持。

# shell - 用 sed 替换子字符串

> ID：14194702
> 
> 赞同：7
> 
> 时间：2013-01-07T11:10:59.027
> 
> 标签：shell, sed, sh

我有一个这样的字符串：

```
test:blabla 
```

使用 sed，我想用其他东西替换 ':' 之后的内容。

我可以设法替换一个单词，但不能替换“：”之后的那个。我在互联网上搜索了答案，但我没有找到任何东西。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T11:13:21.770

采用：`sed 's/:.*/:replaceword/'`

```
$ echo test:blabla | sed 's/:.*/:replaceword/'
test:replaceword 
```

或者对于`test test:blabla test`您只想替换以下单词的`:`情况 `sed 's/:[^ ]*/:replaceword/'`：

```
$ echo "test test:blabla test" | sed 's/:[^ ]*/:replaceword/'
test test:replaceword test

# Use the g flag for multiple matches on a line
$ echo "test test:blabla test test:blah2" | sed 's/:[^ ]*/:replaceword/g'
test test:replaceword test test:replaceword 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T11:14:01.683

```
> echo $SER2
test:blabla
> echo $SER2 | sed 's/\([^:]*:\).*/\1replace/g'
test:replace
> 
```

# sencha-touch - Sencha中的货币格式

> ID：14194703
> 
> 赞同：1
> 
> 时间：2013-01-07T11:11:03.397
> 
> 标签：sencha-touch

几个小时前我才开始研究煎茶。我想要的是在我的应用程序上格式化货币值。

例如，在任何看起来像 20000 的地方，我希望它看起来像 20,000

我尝试在互联网上查找并了解*Ext.util.Format.number*

所以我试着像`Ext.util.Format.number(total_value, “0,000.00”);`在任何地方使用它一样使用它`${total_value}`。但这没有用。

我是否必须包含任何外部文件或者我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T13:04:41.163

这是我在意识到 Ext.util.Format.number() 不是 Sencha Touch 的一部分后在我的项目中使用的，这是一个可以在我的应用程序的任何地方使用的小型 JS 函数：

```
/**
 * Given a number this will format it to have comma separated readable number(Rounded off)
 * with currency symbol(Rs.) prefix
 * @example
 * Helper.formatCurrency(123456.78) = "Rs. 123,456"
 * 
 * @param {Number} num
 * @return {Number}
 */
formatCurrency : function(num) {
    num = num.toString().replace(/\$|\,/g, '');
    if (isNaN(num))
        num = "0";
    sign = (num == (num = Math.abs(num)));
    num = Math.floor(num * 100 + 0.50000000001);
    num = Math.floor(num / 100).toString();
    for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++)
        num = num.substring(0, num.length - (4 * i + 3)) + ','
                + num.substring(num.length - (4 * i + 3));
    return (((sign) ? '' : '-') + 'Rs. ' + num /*+ '.' + cents*/);
}, 
```

随意复制、更改和即兴创作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:55:36.823

尝试使用`Ext.util.Format.currency(“0,000.00”);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T06:31:54.233

```
 currencyConvertion : function (value){                                               
   return Number(value).toFixed(0).replace(/./g, function(c, i, a) {
              return i > 0 && c !== "." && (a.length - i) % 3 === 0 ? "," + c : c;
                                  });
                              } 
```

# ruby-on-rails - Collection_select 基于 SQL 视图时包含空值

> ID：14194705
> 
> 赞同：0
> 
> 时间：2013-01-07T11:11:15.567
> 
> 标签：ruby-on-rails, select, collections

在我的 Rails 应用程序中，我有一个基于 SQL 视图的 collection_select。该视图在 SQL 中运行良好，并且视图中有许多条目。

```
fsix_dev=> SELECT "infinitives".* FROM "infinitives";
id  |    word     | language_id | audiofile | imagefile | gender 
-----+-------------+-------------+-----------+-----------+--------
 17 | aller       |           2 |           |           |       
 61 | venir       |           2 |           |           |       
 69 | suivre      |           2 |           |           |    
 ... etc ... 
```

我的编辑视图中的 collection_select：

```
.field
  = f.label :infinitive_id
  = f.collection_select :infinitive_id, Infinitive.find(:all), :id, :word, include_blank: :false, :title => "Infinitive" 
```

在页面上，collection_select 似乎为视图中的每一行带回了一个条目，但它以**所有空白值呈现**

```
<div class='field'>
  <label for="word_infinitive_id">Infinitive</label>
  <select id="word_infinitive_id" name="word[infinitive_id]"><option value=""></option>
  <option value=""></option>
  <option value=""></option>
  <option value=""></option>
  <option value=""></option>
  ... etc ... 
```

**楷模**

```
class Infinitive < ActiveRecord::Base
  belongs_to :word
  attr_reader :id, :word, :language_id, :audiofile, :imagefile
end

class Word < ActiveRecord::Base
  has_many :infinitives
  attr_accessible :word, :gender, :audiofile, :imagefile, :speech_part_id, :ssubject_id,  :present_participle, :past_participle, :tense_id, :mood_id, :infinitive_id, :question, :negative
end 
```

**控制器**

```
class InfinitivesController < InheritedResources::Base
end 
```

***编辑***

根据下面*Valery Kvon 的*说明，我在**rails console**尝试了以下操作，并得到了很多回复：

```
1.9.3-p194 :001 > Infinitive.find(:all)
  Infinitive Load (338.9ms)  SELECT "infinitives".* FROM "infinitives" 
 => [#<Infinitive id: 17, word: "aller", language_id: 2, audiofile: nil, imagefile: nil,     gender: nil>, #<Infinitive id: 61, word: "venir", language_id: 2, audiofile: nil, imagefile:     nil, gender: nil>, ... many results ... 
```

但是，当我尝试在 :word 中进行映射时，它会返回同样多的结果，但全部为零：

```
1.9.3-p194 :002 > Infinitive.find(:all).map(&:word)
  Infinitive Load (1.4ms)  SELECT "infinitives".* FROM "infinitives" 
  => [nil, nil, nil, nil, nil, nil, nil, nil, nil ... etc ... 
```

奇怪的是**word在之前的****find**中以符号的形式出现。

**编辑 2**

我尝试将**word**列重命名为**infinitive_word** .... 相同的结果。可以从 Rails 中的 SQL 视图构建 collection_select 吗？

```
1.9.3-p194 :002 > Infinitive.find(:all)
  Infinitive Load (1.6ms)  SELECT "infinitives".* FROM "infinitives" 
  => [#<Infinitive id: 17, infinitive_word: "aller", audiofile: nil, imagefile: nil, gender: nil>, #<Infinitive id: 61, infinitive_word: "venir", audiofile: nil, imagefile: nil, gender: nil>, ... etc .... 
```

随着地图进入**infinitive_word**：

```
1.9.3-p194 :003 > Infinitive.find(:all).map(&:infinitive_word)
  Infinitive Load (1.3ms)  SELECT "infinitives".* FROM "infinitives" 
  => [nil, nil, nil, nil, nil, nil, nil, nil, nil, 
```

**编辑 3**

我设法让**collection_select**工作，但已将其添加为编辑而不是答案，因为我不明白为什么需要此解决方案。**这似乎是一个 hacky 解决方法**

该解决方案需要进行两项更改：

*   更改了 SQL 视图，因此属性与关系不同
*   **在不定式模型上将 attr_reader**更改为**attr_accessible**。

我本来希望 Rails 可以处理与关系同名的属性，但更重要的是，我希望基于 SQL 视图的 ActiveRecord 关系是**attr_reader**，而不是**attr_accessible**。

谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:04:41.323

只需删除 'include_blank' 或`prompt`改用

```
.field
  = f.label :infinitive_id
  = f.collection_select :infinitive_id, Infinitive.find(:all), :id, :word, prompt: :false, :title => "Infinitive" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:20:12.927

那是因为你的不定式的 :id 和 :word 方法返回 nil。

```
attr_reader :id, :word 
```

*   这是一个问题。

此外 :word 是一个关联并返回 Word 对象...但对于 *collection_select* 该方法应返回字符串/fixnum 值（负责**.to_s**）。

# emacs - 遍历 Emacs Lisp 哈希表

> ID：14194709
> 
> 赞同：8
> 
> 时间：2013-01-07T11:11:21.337
> 
> 标签：emacs, elisp, hashtable, loops

**如何迭代 Elisp 哈希表中的项目（键、值）？**

我使用不同的项目创建了一个哈希表（地图、字典）`(make-hash-table)`并填充了它。在 Python 中，我可以通过以下方式遍历 dicts：

```
for k in d # iterate over keys
for k in d.keys() # same
for k in d.values() # iterate over values
for k in d.items() # iterate over tuples (key, value) 
```

我怎样才能以最简洁和优雅的方式做同样的事情，最好没有循环宏？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T11:16:40.840

`(maphash (lambda (key value) ....your code here...) hash-table)`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-07T12:23:10.347

我要给自己做一些广告，所以要小心翼翼，但基本上，这里有你的选择：

*   `maphash`- 这是内置的迭代原语，从根本上说，没有更多的方法可以做到这一点。

*   `(loop for KEY being the hash-key of TABLE for VALUE being the hash-value of TABLE ...)`可在`cl`包装中使用。无论如何它都会在内部使用`maphash`，但它在不同的迭代原语之上为您提供了一些统一。您可以使用`loop`宏来迭代多个不同的事物，并通过从视线中删除技术信息来减少混乱。

*   [http://code.google.com/p/i-iterate/](http://code.google.com/p/i-iterate/)这是我正在开发的一个库，旨在提供更多通用的方法来在 Emacs Lisp 中以不同的方式迭代不同的事物。它受到 Common Lisp Iterate 库的启发，但与它相去甚远（然而，一些基本原则仍然成立）。如果您要尝试这个库，哈希表上的迭代将如下所示：`(++ (for (KEY VALUE) pairs TABLE) ...)`or`(++ (for KEY keys TABLE) ...)`或`(++ (for VALUE values TABLE) ...)`.

`cl` `loop`我将尝试描述使用or的优缺点`i-iterate`。

*   与 不同`loop`的是， iterate 允许一次迭代多个哈希表（但您必须注意它产生的额外成本：第二个、第三个等哈希表的键必须在迭代之前收集到一个列表中，这是在后面完成的场景）。
*   Iterate 提供了可以说更多的 Lisp-y 语法，更容易在编辑器中格式化。
*   使用迭代，您有更多（将来可能甚至更多）选项来将迭代与其他操作结合起来。
*   到目前为止，除了我自己之外，没有其他人在使用它 :) 它可能仍然存在错误，并且可能会重新设计一些东西，但它已接近功能冻结并准备好正确使用。
*   明显更多的人熟悉内置的迭代原语或`cl`库。

顺便说一句，哈希表迭代的完整版本如下所示：`(for VAR pairs|keys|values TABLE &optional limit LIMIT)`，其中`LIMIT`代表您要查看的元素数量（它将生成更高效的代码，然后如果您要使用更通用的工具）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T16:18:57.633

`maphash`是你想要的功能。另外我建议你看一下手册`(info "(elisp) Hash Tables")`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-12T00:28:46.847

从 2013 年开始有一个第三方库[**`ht`**](https://github.com/Wilfred/ht.el)，它提供了许多方便的函数来操作 Elisp 哈希表。

假设您有一个哈希表，其中键是字符串，值是整数。要遍历哈希表并返回列表，请使用`ht-map`：

```
(ht-map (lambda (k v) (+ (length k) v)) table)
;; return list of all values added to length of their keys 
```

`ht-each`只是`maphash`. 上述 2 个函数也有[照应](https://en.wikipedia.org/wiki/Anaphoric_macro)`ht-amap`版本，称为和`ht-aeach`。它们不接受匿名函数，而是公开变量`key`和`value`. 这是与上述表达式等效的表达式：

```
(ht-amap (+ (length key) value) table) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-30T15:22:44.950

我更愿意将其放入评论中，但具有讽刺意味的是，我的声誉评级使我无法以适当的格式编写此内容......

`loop`被认为已弃用，`cl`库也是如此，因为它不遵守用公共库前缀为所有符号添加前缀的约定，因此用没有明确库关联的符号污染了 obarray。

而是使用`cl-lib`which 定义相同的函数和宏，但将它们命名为例如`cl-loop`and`cl-defun`而不是`loop`and `defun*`。如果您只需要宏，则可以导入`cl-macs` 。

# symfony - 用 symfony 2 编写学说查询

> ID：14194711
> 
> 赞同：1
> 
> 时间：2013-01-07T11:11:25.823
> 
> 标签：symfony, doctrine-orm

我有两张桌子：

```
 products       products_images
   -id            -id
   -name          -product_id
                  -image_name 
```

从 product 到 products_images 表存在一对多关系

我创建了两个实体，其关系定义为：Product 和 ProductImage

我需要获取产品列表及其图像，但将图像数量的记录限制为 1。

目前，我这样做了：

```
$product = $this->getDoctrine()
            ->getRepository('TestBundle:Product'); 
```

然后在树枝模板中：

```
{% for image in product.images if loop.first %}
{% endfor %} 
```

我使用这个循环来获取该产品的一张图片。我不认为这是一种有效的方法，因为我已经获取了该产品的所有图像。我想要做的只是从数据库中为每个产品获取一张图片？我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:26:59.417

我会向 Product-entity 添加另一种方法，例如`getThumbnail`. 这封装了将哪个图像视为缩略图的逻辑（即，您的视图不包含是否显示第一张、最后一张或任何其他产品图像的任何逻辑，它只是询问产品的缩略图）：

*在视图中*

```
{% if product.thumbnail %}
  {{ // Output the product.thumbnail-entity }}
{% endif %} 
```

*在实体*

```
public function getThumbnail ()
{
   return $this->getImages()->first();
} 
```

现在，在分析之后，如果您担心仅显示单个图像/产品时会加载完整的图像集合，那么我将更新存储库 DQL 以仅获取并加入单个图像，或者确保关联图像是[`EXTRA_LAZY`](http://docs.doctrine-project.org/en/latest/tutorials/extra-lazy-associations.html)

# c++ - #if 0 之后到底可以放什么？

> ID：14194713
> 
> 赞同：8
> 
> 时间：2013-01-07T11:11:26.670
> 
> 标签：c++, c, c-preprocessor

根据 C 语言标准， 和 之间的行`#if 0`只`#endif`需要包含预处理标记，因此大多数类型的完全格式错误的语法，例如`#foo`or`#include [bar]`是允许的（默默地忽略）；GCC 和 Microsoft C++ 确实默默地忽略了这些。

据我所知， An`@`不对应于任何预处理标记，因此仍然应该是语法错误。GCC 和 Microsoft C++ 默默地忽略它。这实际上是语言扩展还是我错过了什么？

`#if 0`有没有人真正使用在实践中使用格式错误的语法的能力`#endif`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T11:31:43.257

C 和 C++ 标准都在其语法中包含一个特殊的“转义子句”，这使得每个非空白字符都是（部分）预处理标记。`#if 0`出于这个原因，无论你在和之间放入一个块，`#endif`几乎都不会导致编译错误。唯一的例外是字符和字符串文字的引号不匹配。

是的，我经常将格式错误的语法放在`#if 0`和`#endif`禁用一些部分编写的代码之间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T11:31:07.627

预处理器听起来像：它在（预）编译器之前处理文件。实际编译器看到的输入是预处理器提供给它的输入，如果部分代码介于`#if 0`和 匹配`#endif`，那么编译器甚至不会看到该代码。这就是为什么您可以在该部分中放置几乎任何东西，编译器根本看不到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T11:51:24.850

#if 0 和 #endif 之间的代码不会包含在最终源代码中（在每个处理器输出之后）。如果您正在使用 Visual Studio 并希望查看预处理器的输出，请转到项目属性 -> 选择 C/C++ -> 选择预处理器 -> 在预处理到文件选项中选择“是”。

转到您的项目目录，您将看到“.i”文件。这是您的预处理器的输出。

您可以看到#if 0 和#endif 之间的代码不包括在内。所以没有错误的问题。

# java - 静态同步方法与非静态同步方法

> ID：14194714
> 
> 赞同：3
> 
> 时间：2013-01-07T11:11:29.490
> 
> 标签：java, static, synchronized, non-static

我有一堂课

```
class Foo{

    static synchronized get(){}
    synchronized() getMore(){}
} 
```

我有 2 个对象`Foo.get()`并`f.getMore()`在 2 个不同的线程 t1 和 t2 中运行。我有一个问题，当线程 t1 在类上获得锁定时，线程 t2 是否可以访问方法 getMore，或者由于类对象被 t1 锁定，是否会阻止 t2 获得对该方法的访问和锁定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:13:39.857

静态方法将同步`Class`对象而不是实例对象。您有 2 个锁在 2 个不同的对象上运行。在您上面的场景中，不会有阻塞行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T11:17:27.917

静态同步 ---> 类级别锁定（类级别范围）

它类似于

```
synchronized(SomeClass.class){
 //some code
} 
```

简单同步 ---> 实例级锁定

例子：

```
class Foo{

     public static synchronized void bar(){
         //Only one thread would be able to call this at a time  
     }

     public synchronized void bazz(){
         //One thread at a time ----- If same instance of Foo
         //Multiple threads at a time ---- If different instances of Foo class
     }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:37:59.063

将`synchonized static method`获取代表 Foo 类关联的 java.lang.Class 对象的锁。

将`synchonized instance method`获取实际对象的锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T11:15:16.393

`synchonized`锁定一个对象，a`static synchronized`锁定代表该类的对象。

t1 和 t2 可以同时调用这些方法，除非它们不能都在`static synchronized`方法中，除非除了一个线程之外的所有线程都在运行`wait()`。

注意： t1 和 t2 可以同时调用`getMore()`不同的对象。

# c++ - 匹配线段 - 稳健且快速的方式

> ID：14194716
> 
> 赞同：1
> 
> 时间：2013-01-07T11:11:32.423
> 
> 标签：c++, image-processing, vector, pattern-matching, computational-geometry

我有从单个图像数据中提取的 2D 线段，并希望与从其他源中提取的 3D 线段匹配。为此，首先我想使用共线性方程（我知道外部方向参数）将 3D 线段投影到图像空间。由于两条线段都在同一个坐标系中，现在我想找到与该线最匹配的线段。

我正在寻找一种快速且强大的算法来匹配相应的线段，以便稍后更新我的 3D 线段。

如果有人对此有任何想法，请提出一些建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:31:07.920

您正在查看类似于[line segment intersection](http://en.wikipedia.org/wiki/Line_segment_intersection_problem)的问题。所以不出所料，它的解决方案也可能相似。

直接的方法是将每个 2D 段与每个 3D 段进行比较，最佳匹配是与实际长度和位置最接近的匹配。实际是 2D 段。这类似于 O(AB)，其中 A 是 2D 段的数量，B 是 3D 段的数量。

您可以通过按字典顺序对 2D 线段进行排序来加快该方法的速度，然后使用我在这个[问题](https://stackoverflow.com/questions/13507766/using-ternary-search-to-find-all-elements-within-a-range)中询问的相同类型的算法来获取所有线段，其 x 值在一定数量内的一个或两个的预期 x 值线段终点*。在最坏的情况下，你仍然可能会遇到 O(AB)，但平均时间应该更接近 O(B log A)。虽然，目前还不清楚你是否可以根据你所说的使用这种方法，所以这一段应该更多地被认为是一个大纲。

比 O(B log A) 或 O(A log B) 更快可能需要这是一个经过充分研究的问题。

*   如果您按字典顺序对 2D 端点进行排序，则您可能会摆脱 1 个端点。

# maven - jenkins maven构建后解压jar文件的最常见方法是什么？

> ID：14194717
> 
> 赞同：1
> 
> 时间：2013-01-07T11:11:32.677
> 
> 标签：maven, build, jenkins

我是 maven 和 Jenkins 的新手，所以我不知道在同一个 Jenkins 作业中提取 maven 构建的 JAR 文件的最常见方法是什么。

`mvn install`在 Jenkins 作业中运行会输出文件`/home/user/.jenkins/workspace/$JOB_NAME/project/target/package-2.0.0.jar`。

我想将它提取到某个目录，例如`/opt/project`并调用`/opt/project/script.sh`.

我想到了一个构建后的 shell 脚本调用`jar -xvf <path>/package-2.0.0.jar`但是如何获取版本号（2.0.0）呢？也许有一个行家目标来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:14:00.373

将该工件定义为其他模块（将运行 shell 脚本的模块）中的依赖项，并使用依赖项插件将其[解压缩](http://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-artifacts.html)

这意味着您的 maven 项目中（至少）有 2 个模块 - 一个生成 jar，另一个对第一个生成的工件执行某些操作。

如果这不符合您的需要，您可以在安装阶段之后绑定解包（工件在安装阶段将其放入本地存储库，并且依赖插件仅处理来自本地存储库的工件）并在那里执行。

如果您仍然不满意，您可以在 maven pom.xml 文件中使用`${project.build.finalName}`. 默认值`${artifactId}-${version}`如您[在此处](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)看到的那样（查看超级 pom）。如果你需要它的后缀它会是这样的`${artifactId}-${version}.${packaging}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:29:32.893

if you are running on linux based systems something like

```
jar -xvf `ls <path>/package-*.jar` 
```

will do the job.

# c# - 根据参数在 Razor 中切换 Case

> ID：14194718
> 
> 赞同：4
> 
> 时间：2013-01-07T11:11:36.300
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4

我在 mvc4 中实现选项卡式视图。所以我实现了局部视图，它依次在每个视图中调用选项卡式结构。下面的代码根据从视图传递的参数设置活动选项卡。

```
<ul class="nav nav-tabs">
@{ var UserFocus = ""; var CardFocus = ""; var CarrierFocus = ""; }
@{
switch(ViewData["ActiveMenu"].ToString())
{
    case "User":
        UserFocus = "active";
        break;
    case "Card":
        CardFocus = "active";
        break;
    case "Carrier":
        CarrierFocus = "active";
        break;   
}
}
   <li class="@UserFocus">User view link</li>
   <li class="@CardFocus">card view link</li>
   <li class="@CarrierFocus">Carrier view link</li>
</ul> 
```

在每个视图中，它都会根据视图这样调用

```
@Html.Partial("_AdminSettings", new ViewDataDictionary {{ "ActiveMenu", "User" }} ) 
```

这工作正常。

1.  我确定实施是否是标准做法？
2.  这个实现还有其他简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:56:01.323

我个人不喜欢视图中的逻辑。根据经验，我通常将逻辑放在模型中并将其传递给视图，并相信视图在那里显示数据的外观，而不是操纵数据。

作为一种替代方法，您可以使用`Navigation Model`并通过：

```
ViewData["ActiveMenu"] 
```

到您的控制器并填充`Navigation Model`.

```
public class NavigationModel 
{
    public string UserFocus { get; private set; } 
    public string CardFocus { get; private set; }
    public string CarrierFocus { get; private set; }

    public NavigationModel(string ActiveMenu)
    {
       // Your switch statement to populate the properties.
    }
} 
```

您的视图将如下所示：

```
@Model NavigationModel

<ul class="nav nav-tabs">
  <li class="@Model.UserFocus">User view link</li>
  <li class="@Model.CardFocus">card view link</li>
  <li class="@Model.CarrierFocus">Carrier view link</li>
</ul> 
```

我认为哪个更清洁。

# vb.net - 使用标识列更新数据库时显示错误

> ID：14194724
> 
> 赞同：0
> 
> 时间：2013-01-07T11:11:53.983
> 
> 标签：vb.net, sql-server-2005

请帮助我...我正在尝试从 VB.net 更新我的数据库。它显示错误。我的代码如下....

```
Try
            getConnect()

            Dim strSQL As String
            strSQL = " UPDATE DEPARTMENT SET [DEP_ID]=@DEP_ID,[DEPART]=@DEPART,    [DEP_DSCRPTN]=@DEP_DSCRPTN WHERE [DEP_ID] = @DEP_ID"
            Dim cmd As New SqlCommand(strSQL, Conn)
            cmd.Parameters.AddWithValue("@DEP_ID", CInt(Me.DEPID.Text))
            cmd.Parameters.AddWithValue("@DEPART", SqlDbType.VarChar).Value =     CMBDEPT.Text
            cmd.Parameters.AddWithValue("@DEP_DSCRPTN", SqlDbType.VarChar).Value =     TXTDESC.Text
            Conn.Open()
            cmd.ExecuteNonQuery()
            MsgBox("Update Complete!", MsgBoxStyle.Information, "Update")
        Catch ex As Exception
            MsgBox("ERROR: " + ex.Message, MsgBoxStyle.Information, "Update")
        Finally
            Conn.Close()
            BTNCLEAR.PerformClick()
        End Try 
```

错误是：

> 错误：无法更新身份列“DEP_ID”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:14:03.073

从. `[DEP_ID]=@DEP_ID,`_ `SET`尝试将其设置为`WHERE`无论如何都已确保的值是没有意义的，因此它显然是多余的，并且不允许更新`IDENTITY`列。

```
UPDATE DEPARTMENT
SET    [DEPART] = @DEPART,
       [DEP_DSCRPTN] = @DEP_DSCRPTN
WHERE  [DEP_ID] = @DEP_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:15:50.900

错误消息很清楚，删除 Set DEP_ID = @DEP_ID 部分。

```
Try
    getConnect()

    Dim strSQL As String
    strSQL = "UPDATE DEPARTMENT SET [DEPART]=@DEPART," + 
             "[DEP_DSCRPTN]=@DEP_DSCRPTN WHERE [DEP_ID] = @DEP_ID"
    Dim cmd As New SqlCommand(strSQL, Conn)
    cmd.Parameters.AddWithValue("@DEP_ID", CInt(Me.DEPID.Text))
    cmd.Parameters.AddWithValue("@DEPART", SqlDbType.VarChar).Value =     CMBDEPT.Text
    cmd.Parameters.AddWithValue("@DEP_DSCRPTN", SqlDbType.VarChar).Value =     TXTDESC.Text
    Conn.Open()
    cmd.ExecuteNonQuery()
    MsgBox("Update Complete!", MsgBoxStyle.Information, "Update")
Catch ex As Exception
    MsgBox("ERROR: " + ex.Message, MsgBoxStyle.Information, "Update")
Finally
    Conn.Close()
    BTNCLEAR.PerformClick()
End Try 
```

如果您发现自己需要更改 Identity 列，那么我认为您需要更好地分析您的数据库模式。

# operating-system - 安装 Oracle solaris x86 后 GUI 未打开

> ID：14194725
> 
> 赞同：0
> 
> 时间：2013-01-07T11:11:57.383
> 
> 标签：operating-system, solaris-10

我正在我的 PC 上安装 oracle Solaris 86x64 操作系统。这是完整的安装，没有任何错误。在安装的最后一步，GUI 窗口没有打开。如果我重新启动 PC，它正在启动并且无法超越黑屏。但是，我可以从另一个命令提示符 ping 系统。有需要安装的驱动吗？因此，我无法进入系统。

# css - 使用时如何避免开始新行 ajax刷新加载？

> ID：14194729
> 
> 赞同：0
> 
> 时间：2013-01-07T11:12:15.113
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3

如果我像下面这样换行，它会自动转到下一行。
没有 ，按钮就在它旁边，这就是我想要的。
但我必须用于 ajax 重新加载目的。我该如何解决这个问题？

```
<div class="bookmark" data-communities-id="<%= community.id %>">
    <%= render :partial => "communities/bookmark", :locals => {:community => community} %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:14:06.130

将 display:inline 用于书签类。

```
.bookmark{
    display:inline;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:31:13.473

您将 div 用于您想要的内联内容，请改用 span。

```
<span class="bookmark" data-communities-id="<%= community.id %>">
    <%= render :partial => "communities/bookmark", :locals => {:community => community} %>
</span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:32:06.050

div 是块级元素。这意味着它将像一个块，而不是像一个内联元素。

`display`将属性更改为

*   `inline`如果要将其更改为内联级别元素；
*   `inline-block`如果您希望它是内联的，但充当块元素级别。

演示：http: [//jsfiddle.net/](http://jsfiddle.net/)

CSS

```
div {
 border: 1px solid red; 
 padding: 10px; 
 background-color: #ccc;
 color: white;
 width: 100px;
} 
```

HTML

```
Display: block (default):<br/><br/>
<div>Frindcode</div>
<div>Bookmark</div>

<br/><br/><br/>

Display: inline:<br/><br/>
<div style="display: inline;">Frindcode</div>
<div style="display: inline;">Bookmark</div>

<br/><br/><br/>

Display: inline-block:<br/><br/>
<div style="display: inline-block;">Frindcode</div>
<div style="display: inline-block;">Bookmark</div> 
```

# android - 如何使用 x,y 位置放置 textview

> ID：14194730
> 
> 赞同：11
> 
> 时间：2013-01-07T11:12:20.913
> 
> 标签：android, textview

我是 android 新手，谁能帮帮我？。我需要使用 x,y 位置显示 textview 值和按钮和 imageview。它是如何可能的。我的编码。

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical"
   android:background="@drawable/levelbg" >

<Button
    android:id="@+id/level1"
    android:layout_width="560dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="71dp"
    android:background="@drawable/levelbox"
   />

<TextView
    android:id="@+id/levelno1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="43dp"
    android:background="@drawable/levelno" />

<TextView
    android:id="@+id/lastshoot1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/level1"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="18dp"
    android:layout_marginLeft="85dp"
    android:text="134"
    android:textSize="20sp" />

<TextView
    android:id="@+id/bestshoot1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/lastshoot1"
    android:layout_alignBottom="@+id/lastshoot1"
    android:layout_marginLeft="50dp"
    android:layout_toRightOf="@+id/lastshoot1"
    android:text="123"
    android:textSize="20sp" />

<ImageView
    android:id="@+id/levelonestar1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/bestshoot1"
    android:layout_marginLeft="17dp"
    android:layout_marginBottom="10dp"
    android:layout_toRightOf="@+id/bestshoot1"
    android:src="@drawable/star1" />

<ImageView
    android:id="@+id/levelonestar2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/levelonestar1"
    android:layout_toRightOf="@+id/levelonestar1"
    android:src="@drawable/star1" />

<ImageView
    android:id="@+id/levelonestar3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/levelonestar2"
    android:layout_toRightOf="@+id/levelonestar2"
    android:layout_marginRight="2dp"
    android:src="@drawable/star1" /> 
```

我需要通过编程方式最多显示 50 次。（50 个按钮）。任何人都可以建议我另一种方式，谢谢提前。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-07T11:17:53.327

**Android >= Honeycomb**（自我解释）

```
view.setX(x);
view.setY(y); 
```

**Android < Honeycomb** 而不是直接将其设置到您将告诉“将其设置为距离左/上/右/下边框 x 像素”的位置。

```
RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
lp.setMargins(x, y, 0, 0);

view.setLayoutParams(lp); 
```

# java - 不使用 Lucene 建立文件索引

> ID：14194733
> 
> 赞同：0
> 
> 时间：2013-01-07T11:12:35.710
> 
> 标签：java, indexing

我只是想建立一个小型索引文件系统（超过 3000 个文本文件和超过 5 GB）。我已经从谷歌或其他地方搜索过结果，但没有得到我想要的。所有结果都与 Lucene 相关，但是我只想在没有任何第三个库的情况下做到这一点，你能给我一些建议或一些例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:39:15.817

一个非常基本的解决方案可能是使用倒排索引。这是您读取所有要索引的文档并将找到的单词作为键存储在映射中的位置，值是包含这些单词的文档列表。

文件 1；

> 这是一个示例文档

文件 2；

> 这份文件是第二个

你的地图会有；

```
this -> doc1, doc2
is -> doc1, doc2
an -> doc1
example -> doc1
document -> doc1, doc2
number -> doc2
two -> doc2 
```

# android - 在 Linux 上使用 MTP 安装 Samsung Galaxy Tab 2 7.0

> ID：14194734
> 
> 赞同：7
> 
> 时间：2013-01-07T11:12:43.090
> 
> 标签：android, debian, tablet, galaxy, mtp

我正在尝试通过 MTP 将三星 Galaxy Tab2 7.0" 连接到 Debian Wheezy 盒子。https://askubuntu.com/questions/186681/getting-mtp-to-work-with-a-galaxy 上的 askubuntu[页面-tab-2-7-0](https://askubuntu.com/questions/186681/getting-mtp-to-work-with-a-galaxy-tab-2-7-0)详细说明了我的问题，但建议的补救措施都不起作用。

重申一下，我安装了 mtp-tools 和 mtpfs。mtp-detect 产生这个：

```
libmtp version: 1.1.3

Listing raw device(s)
Device 0 (VID=04e8 and PID=6860) is a Samsung GT P7310/P7510/N7000/I9070/I9100/I9300   Galaxy Tab 7.7/10.1/S2/S3/Nexus/Note/Y.
    Found 1 device(s):
    Samsung: GT P7310/P7510/N7000/I9070/I9100/I9300 Galaxy Tab 7.7/10.1/S2/S3/Nexus/Note/Y  (04e8:6860) @ bus 1, dev 3
Attempting to connect device(s)
PTP_ERROR_IO: failed to open session, trying again after resetting USB interface
LIBMTP libusb: Attempt to reset device
LIBMTP PANIC: failed to open session on second attempt
Unable to open raw device 0
OK. 
```

我使用供应商 ID 的值 04e8 和设备 ID 的值 6860 创建了一个 /etc/udev/rules.d/51-android.rules 文件。我完成了上述操作并做到了这一点：

```
mkdir foo
mtpfs -o allow_other foo 
```

现在做“ls foo”摊位。检查 foo 上面的目录也会停止。如果不执行“killall -9 mtpfs”（类似于处理陈旧的 sshfs 挂载），我将无法恢复命令行。然后我看到这个：

```
ls: cannot access foo: Transport endpoint is not connected 
```

尝试了[https://askubuntu.com/a/88630/27480](https://askubuntu.com/a/88630/27480)并得到了相同的结果。

[来自https://github.com/hanwen/go-mtpfs](https://github.com/hanwen/go-mtpfs)的 go-mtpfs也失败了：

```
mkdir foo
./go-mtpfs foo
2013/01/07 02:39:33 compiled against libmtp 1.1.3
Device 0 (VID=04e8 and PID=6860) is a Samsung GT P7310/P7510/N7000/I9070/I9100/I9300 Galaxy Tab 7.7/10.1/S2/S3/Nexus/Note/Y.
2013/01/07 02:39:33 found device Samsung: GT P7310/P7510/N7000/I9070/I9100/I9300 Galaxy Tab 7.7/10.1/S2/S3/Nexus/Note/Y (04e8:6860) @ bus 1, dev 3
: 
PTP_ERROR_IO: failed to open session, trying again after resetting USB interface
LIBMTP libusb: Attempt to reset device
LIBMTP PANIC: failed to open session on second attempt
2013/01/07 02:41:33 rdev.open failed: open: open returned nil 
```

[来自https://github.com/kiorky/jmtpfs.git](https://github.com/kiorky/jmtpfs.git)的 jmptfs也失败了：

```
Device 0 (VID=04e8 and PID=6860) is a Samsung GT P7310/P7510/N7000/I9070/I9100/I9300 Galaxy Tab 7.7/10.1/S2/S3/Nexus/Note/Y.
PTP_ERROR_IO: failed to open session, trying again after resetting USB interface
LIBMTP libusb: Attempt to reset device
LIBMTP PANIC: failed to open session on second attempt
terminate called after throwing an instance of 'MtpErrorCantOpenDevice'
  what():  Can't open device
Aborted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-08T23:43:26.970

在终端中试试这个：

```
killall gvfs-gphoto2-volume-monitor
killall gvfs-mtp-volume-monitor 
```

之后，重新连接手机。并使用 mtp-detect 或其他基于 libmtp 的程序。它应该工作。

这是我在这个 ubuntu 错误中提出的解决方法： [https ://bugs.launchpad.net/ubuntu/+source/gvfs/+bug/1314556](https://bugs.launchpad.net/ubuntu/+source/gvfs/+bug/1314556)

# c# - Webkit.Net 等待页面完全加载

> ID：14194735
> 
> 赞同：2
> 
> 时间：2013-01-07T11:12:44.107
> 
> 标签：c#, webkit

我正在尝试使用 webbrowser 制作一个 C# windows 窗体应用程序。

我正在使用 webkit 浏览器： [链接到浏览器](http://webkitdotnet.sourceforge.net/)

网络浏览器我是否放入了一个类文件，所以我可以通过我将要使用的所有表单来访问它。

生成网络浏览器的代码：

```
public static WebKit.WebKitBrowser mainBrowser = new WebKitBrowser(); 
```

我有这段代码给出了一些问题：

```
globalVars.mainBrowser.Navigate("http://www.somesite.com/");
while (globalVars.mainBrowser.IsBusy)
    {
        System.Threading.Thread.Sleep(500);
    }
globalVars.mainBrowser.Document.GetElementById("user").TextContent = "User Name"; 
```

但它不起作用。如果我在一段时间后做一个消息框，它会在可以呈现页面之前显示出来......

那么等到网站完全加载的最佳方法是什么？

**更新 1**

在一个独立的类文件中，我是否像这样制作 webkit 控件：

```
public static WebKit.WebKitBrowser mainBrowser = new WebKitBrowser(); 
```

并且以一种形式，我现在得到了这段代码（感谢Tearsdontfalls）：

```
public void loginthen()
    {
        globalVars.mainBrowser.DocumentCompleted += mainBrowser_DocumentCompleted;
        globalVars.mainBrowser.Navigate("http://www.somesite.com/");    
    }

void mainBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    var send = sender as WebKit.WebKitBrowser;
    if (send.Url == e.Url)
    {
        MessageBox.Show("Inloggen");
        globalVars.mainBrowser.Document.GetElementById("user").TextContent = "User Name";
    }
 } 
```

但是没有消息框出现。但是，如果我使用本地（在同一表单上）webkit 浏览器，我会得到消息框。但是随后未填写用户字段。

即使是 documentCompleted 事件中的断点，也不会被触发。所以看起来事件监听器不起作用......

那么为什么它不起作用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:05:49.410

您可以简单地在 Web 浏览器上的 Document Completed Event 上创建一个事件侦听器，或者您可以像这样动态创建它：

```
globalVars.mainbrowser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(mainbrowser_DocumentCompleted); 
```

void 的名称在哪里`mainbrowser_DocumentCompleted`，您可以在哪里做这样的事情（我使用了您提供的代码的名称）：

```
void browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {
    var send = sender as WebKit.WebKitBrowser;
    if (send.Url == e.Url) {
        globalVars.mainBrowser.Document.GetElementById("user").TextContent = "User Name";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T15:01:07.250

添加以下代码让事件在浏览器处于不可见模式时触发。

```
using (Bitmap bmp = new Bitmap(webKitBrowser.Width, webKitBrowser.Height))
{
    webKitBrowser.DrawToBitmap(
        bmp, 
        new Rectangle(
            webKitBrowser.Location.X, 
            webKitBrowser.Location.Y, 
            webKitBrowser.Width, 
            webKitBrowser.Height
        )
    );
} 
```

# c++ - 在opencv中获取一个像素的Y值[Ycbcr]

> ID：14194738
> 
> 赞同：0
> 
> 时间：2013-01-07T11:12:47.210
> 
> 标签：c++, opencv

我正在尝试从处于 Ycbcr 颜色模式的帧中获取像素的 Y 值。这是我写的：

```
 cv::Mat frame, Ycbcrframe, helpframe;
 ........ 
cvtColor(frame,yCbCrFrame,CV_RGB2YCrCb); // converting to Ycbcr
Vec3b intensity =yCbCrFrame.at<uchar>(YPoint);
uchar yv  = intensity.val[0]; //  I thought it's my Y value but its not, coz he gives me I think the Blue channel of RGB color space 
```

任何想法如何正确地做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:21:17.400

下面的代码呢？

```
Vec3f Y_pix = YCbCrframe.at<Vec3f>(rows, cols);
int pixelval = Y_pix[0]; 
```

（PS我还没试过）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T23:51:52.080

您需要提前知道深度（通道样本的数字格式和精度）以及通道数（通常为 3，但也可以是 1（单色）或 4（含 alpha））。

对于 3 通道、8 位无符号整数（又名字节或`uchar`）像素格式，每个像素都可以使用

```
mat8UC3.at<cv::Vec3b>(pt); 
```

# c# - 完全基于实体相似性的无监督聚类

> ID：14194745
> 
> 赞同：2
> 
> 时间：2013-01-07T11:13:27.970
> 
> 标签：c#, machine-learning, artificial-intelligence, cluster-analysis, encog

我正在尝试聚集许多实体。我用于聚类的唯一指标是一个实体与另一个实体之间的相似性。（0-1 浮点数）

谁能想到任何可以实现这一目标的聚类算法？我很欣赏它会返回模糊组。这仍然是比我目前以编程方式估计组更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:59:57.360

作用于网络的所有聚类算法（也称为图 - 由边连接的节点），考虑到邻域拓扑。其中许多存在。我推荐 RNSC 和 MCL（免责声明：我写了后者）。详细地说，简单（未加权）网络中的集群结构可以以节点集的形式存在，其中实现了许多可能的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:09:41.627

您可以使用[DBSCAN（维基百科）](https://en.wikipedia.org/wiki/DBSCAN)或[OPTICS（维基百科）](https://en.wikipedia.org/wiki/OPTICS_algorithm)。当他们谈论距离时，他们不需要度量属性或任何东西——它们也可以与相似函数一起使用！

# windows-phone-8 - 在 windows phone 8 中观察前台应用程序

> ID：14194749
> 
> 赞同：0
> 
> 时间：2013-01-07T11:13:40.437
> 
> 标签：windows-phone-8

以某种方式可以观察 Windows Phone 8 中的前台应用程序？观察打开的应用程序的名称，可能还有打开和关闭的时间。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:48:17.180

WP8 SDK 中没有返回该信息的 API。如果这是您希望在未来版本中看到的功能，请访问[wpdev uservoice](http://wpdev.uservoice.com)，向您解释用例并让开发人员对其进行投票。

# java - Java JDBC - 如何使用 tnsnames.ora 连接到 Oracle

> ID：14194750
> 
> 赞同：19
> 
> 时间：2013-01-07T11:13:42.153
> 
> 标签：java, oracle, jdbc

`tnsnames.ora`文件包含`Databases`及其描述 ( `host`+ `port`)。

*   是否可以根据上述文件建立连接？（比如说只提供数据库名称）：

*   为了找到这个文件，我必须知道默认的 oracle home，我需要在 windows 注册表中检查，`HKEY_LOCAL_MACHINE\Software\Oracle`然后拥有所有`KEY_XXX`文件，然后检查哪个文件首先出现在`%PATH%`. 有没有办法在客户端计算机上自动找到这个文件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-07T11:38:58.457

我什至不知道可以将 tnsnames 与瘦驱动程序一起使用，但显然它是在版本 10 中添加的：

[http://docs.oracle.com/cd/B19306_01/java.102/b14355/urls.htm#BEIDIJCE](http://docs.oracle.com/cd/B19306_01/java.102/b14355/urls.htm#BEIDIJCE)

尤其：

> 笔记：
> 
> 将 TNSNames 与 JDBC Thin 驱动程序一起使用时，必须将 oracle.net.tns_admin 属性设置为包含 tnsnames.ora 文件的目录。
> 
> `java -Doracle.net.tns_admin=%ORACLE_HOME%\network\admin`

如前所述，我还没有检查这是否*真的*有效。

我不认为“查找实际的网络配置目录”逻辑可通过某些 Oracle 函数获得。您必须按照问题中所述手动执行此操作，或者可能依赖存在的 TNS_ADMIN 环境变量。在这种情况下，java 调用将是

```
java -Doracle.net.tns_admin=%TNS_ADMIN% 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-07-16T12:32:33.390

好吧，在某些 GUI 中，TNS 驱动程序配置根本没有实现或无法正常工作（例如 NetBeans :-)）

[https://netbeans.org/bugzilla/show_bug.cgi?id=231526](https://netbeans.org/bugzilla/show_bug.cgi?id=231526)

这里有一个简单的解决方法。您可以直接从 tnsnames.ora 文件中获取条目并将其附加到 jdbc 驱动程序字符串，如下所示：

使用 odbc7.jar（适用于 JDK 7 的 Oracle 12c JDBC 驱动程序）连接到 Oracle 11gR2 RAC 集群的示例：

> jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL= TCP)(HOST=hostA)(PORT= 1522))(ADDRESS=(PROTOCOL=TCP)(HOST=hostB)(PORT=1521) ))(SOURCE_ROUTE=yes)(CONNECT_DATA=(SERVICE_NAME=DatabaseService)))

请注意将双 :: 字符放在最后作为主机：端口：服务，如果您将 :: 放在最后，如下所示：

> jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL= TCP)(HOST=hostA)(PORT= 1522))(ADDRESS=(PROTOCOL=TCP)(HOST=hostB)(PORT=1521) ))(SOURCE_ROUTE=yes)(CONNECT_DATA=(SERVICE_NAME=DatabaseService)))::

您最终会遇到“NL Exception was generated”异常。

另一种方法是配置以下属性： System.setProperty("oracle.net.tns_admin","C:/app/product/11.2.0/client_1/NETWORK/ADMIN");

当然，您可以在操作系统中设置环境变量，例如 ORACLE_TNS_ADMIN，然后引用它，而不是硬编码值：

```
System.setProperty("oracle.net.tns_admin",System.getenv("ORACLE_TNS_ADMIN")); 
```

或者通过 linux 上的 -D 开关将其传递给 java 进程：

```
-Doracle.net.tns_admin=$ORACLE_TNS_ADMIN 
```

和窗口：作为

```
-Doracle.net.tns_admin=%ORACLE_TNS_ADMIN% 
```

一旦我们的应用程序知道 TNS 配置文件，我们可以通过 TNSNAMES.ora 文件中的引用服务名称进行连接，如下面的完整示例所示：

```
 // tell the driver where to look for the TNSNAMES.ORA file
System.setProperty(
          "oracle.net.tns_admin",
          "C:/app/product/11.2.0/client_1/NETWORK/ADMIN");

// ORCL is net service name from the TNSNAMES.ORA file
String dbURL = "jdbc:oracle:thin:@ORCL";

// load the driver
Class.forName("oracle.jdbc.OracleDriver");

Connection conn = null;
Statement stmt = null;

try {
  conn = DriverManager.getConnection(dbURL,
                                     "your_username",
                                     "your_password");

  stmt = conn.createStatement();

  ResultSet rs = stmt.executeQuery("SELECT dummy FROM dual"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-10-17T19:32:13.260

从 18.3 开始，提供 tnsnames.ora 文件位置的 TNS_ADMIN 可以作为连接 URL 的一部分传递。请注意语法。

```
jdbc:oracle:thin:@jdbctest_medium?TNS_ADMIN=/test/cloud/network 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-28T10:56:35.920

首先确保 SQL Developer 软件已正确安装在您的计算机中。如果您使用的是瘦驱动程序，请确保您的 ojdbcX.jar 文件位于您的构建路径中。使用 TNS 别名连接到 Oracle 数据源的步骤是：

*   为 设置系统属性`oracle.net.tns_admin`。这应该指向包含您的`tnsnames.ORA`文件的目录

    `System.setProperty("oracle.net.tns_admin", DIRECTORY_PATH_TO_TNSNAME.ORA_FILE);`

*   注册 Oracle 驱动程序

    DriverManager.registerDriver(new OracleDriver());

*   创建连接对象

    `Connection conn = DriverManager.getConnection("jdbc:oracle:thin:username/password@TNS_ALIAS_NAME");`

这应该建立数据库连接。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-09T20:17:46.597

您也可以尝试以下方法

试试这个，经过几个小时的故障排除后，我发现了一个我修改过的示例，它就像一个宝石一样工作。

```
jdbc:oracle:thin:@(description=(address_list=(address=(protocol=tcp)(port=1521)(host=19.16.200.12)) (address=(protocol=tcp)(port=1521)(host=19.16.200.10)))(load_balance = yes)(connect_data=(SERVICE_NAME=stackdb))) 
```

下面给出了一个无负载平衡示例：

```
jdbc:oracle:thin:@(description=(address_list=(address=(protocol=tcp)
(port=1521)(host=prodHost)))(connect_data=(INSTANCE_NAME=ORCL))) 
```

这是帮助[https://docs.oracle.com/cd/E11882_01/java.112/e16548/jdbcthin.htm#JJDBC28202的 URL](https://docs.oracle.com/cd/E11882_01/java.112/e16548/jdbcthin.htm#JJDBC28202)

# asset-pipeline - rails 4 资产管道供应商资产图像未预编译

> ID：14194752
> 
> 赞同：61
> 
> 时间：2013-01-07T11:13:46.567
> 
> 标签：asset-pipeline, ruby-on-rails-4

我正在为我的应用程序和`fancybox2-rails`gem 使用 rails 4 和 ruby​​ 1.9.3，但是资产管道存在一般问题。如果我运行`rake task`预编译，那么一切都很好，除了`vendor/assets/images`和`../gems/ruby-1.9.3-p327/gems/fancybox2-rails-0.2.1/vendor/assets/images`. 这两个文件夹中的图像没有被预编译，最终我遇到了指向不存在图像的死链接的问题。有什么建议么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-07T12:00:47.623

似乎默认情况下仅包含来自 app/assets 文件夹的图像。所以解决办法就是把这一行加到config/application.rb

```
config.assets.precompile += %w(*.png *.jpg *.jpeg *.gif) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-25T09:00:01.267

听起来 Sporker 无法从供应商/资产/图像中自动加载图像。

> 2.2 资产组织管道资产可以放置在三个位置之一的应用程序中：app/assets、lib/assets 或 vendor/assets。
> 
> app/assets 用于应用程序拥有的资产，例如自定义图像、JavaScript 文件或样式表。
> 
> lib/assets 用于您自己的库的代码，这些代码并不真正适合应用程序的范围或跨应用程序共享的那些库。
> 
> vendor/assets 用于外部实体拥有的资产，例如 JavaScript 插件和 CSS 框架的代码

从来自[guides.rubyonrails.org](http://guides.rubyonrails.org/asset_pipeline.html)的描述来看，我认为他们不会无意忽略 vendor/assets/images。

所以我只是添加了以下行：

```
#config/application.rb
config.assets.paths << Rails.root.join("vendor", "assets", "images") 
```

而且，我解决了我的问题。我希望这对你有用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-30T15:49:58.943

对于我的 Rails 4.2.x 项目，我只是将供应商图像移动到`vendor/assets/images`并将其添加到`application.rb`：

```
config.assets.precompile += %w(vendor/assets/images/*) 
```

在开发和生产方面工作良好。

# json - 用于父子关系的 JQuery Grid-SubGrid

> ID：14194754
> 
> 赞同：1
> 
> 时间：2013-01-07T11:13:49.780
> 
> 标签：json, jquery, jqgrid

我需要一些想法，关于如何在以下场景中实现子网格。

以下是我要在JQuery Grid和Subgrid中显示的json数据。基本上我得到一个名为“Contact”的对象，它有一个名为“actionSet”的集合。

```
{
 "total" : "10",
 "page" : "1",
 "records" : "78",
 "rows" : [ {
   "comment" : null,
   "givenName" : "Contact A",
   "familyName" : "A",
   "actionSet" : [ {
       "actionID" : 1,
       "actionDueDate" : "2012-12-08",
       "actionNote" : "Action 1"
       }, {
       "actionID" : 2,
       "actionDueDate" : "2012-12-08",
       "actionNote" : "Action 2"
  } ]
 }    ...]

} 
```

我希望每个网格行都显示“联系人”，并且与网格关联的子网格应该显示“actionSet”集合。

When a particular row in the Grid is selected, I do not want to make a server call to get the associated actions, as they are allready present in the "actionSet".

我已经让网格正常工作，很好地显示了“联系人”，但是在实现子网格时我感到困惑，因为它已经在 json 中可用。

```
jq(function() {
 jq("#grid").jqGrid({
 url:'/smallworks/project/getall.do',
 datatype: 'json',
 mtype: 'GET',
   colNames:['Id', 'First Name', 'Last Name'],
   colModel:[
     {name:'id',index:'id', width:55,editable:false,editoptions:   {readonly:true,size:10},hidden:true},
   {name:'givenName',index:'givenName', width:100,editable:true, editrules:{required:true}, editoptions:{size:10}},
   {name:'familyName',index:'familyName', width:100,editable:true, editrules:{required:true}, editoptions:{size:10}}
  ],
  postData: {
  },
  rowNum:20,
  rowList:[20,40,60],
  height: 200,
  autowidth: true,
  rownumbers: true,
  pager: '#pager',
  sortname: 'id',
  viewrecords: true,
  sortorder: "asc",
  caption:"Contacts",
  emptyrecords: "Empty records",
  loadonce: false,
  loadComplete: function() {
  }, 
```

这是可以实现的吗？我是否需要专门为子网格解析 JSON 数据？如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T22:32:36.700

我建议您将信息保存`actionSet`在一个对象中，以便以后轻松访问。例如，您可以使用`userData`参数并`userdata`在`beforeProcessing`. 您可以按照[答案](https://stackoverflow.com/a/10178440/315935)或[​​另一个](https://stackoverflow.com/a/13241406/315935)创建子网格。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/Adofo.htm)演示了实现方法：

![在此处输入图像描述](../Images/743410eaf9b49bdcb9e5fd4676e28ef6.png)

它使用以下代码

```
var mainGridPrefix = "s_";

$("#grid").jqGrid({
    url: "Adofo.json",
    datatype: "json",
    colNames: ["First Name", "Last Name"],
    colModel: [
        { name: "givenName" },
        { name: "familyName" }
    ],
    cmTemplate: {width: 100, editable: true, editrules: {required: true},
        editoptions: {size: 10}},
    rowNum: 20,
    rowList: [20, 40, 60],
    pager: "#pager",
    gridview: true,
    caption: "Contacts",
    rownumbers: true,
    autoencode: true,
    height: "100%",
    idPrefix: mainGridPrefix,
    subGrid: true,
    jsonReader: { repeatitems: false },
    beforeProcessing: function (data) {
        var rows = data.rows, l = rows.length, i, item, subgrids = {};
        for (i = 0; i < l; i++) {
            item = rows[i];
            if (item.actionSet) {
                subgrids[item.id] = item.actionSet;
            }
        }
        data.userdata = subgrids;
    },
    subGridRowExpanded: function (subgridDivId, rowId) {
        var $subgrid = $("<table id='" + subgridDivId + "_t'></table>"),
            pureRowId = $.jgrid.stripPref(mainGridPrefix, rowId),
            subgrids = $(this).jqGrid("getGridParam", "userData");

        $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
        $subgrid.jqGrid({
            datatype: "local",
            data: subgrids[pureRowId],
            colNames: ["Due Date", "Note"],
            colModel: [
                { name: "actionDueDate", formatter: "date", sorttype: "date" },
                { name: "actionNote" }
            ],
            sortname: "actionDueDate",
            height: "100%",
            rowNum: 10000,
            autoencode: true,
            autowidth: true,
            jsonReader: { repeatitems: false, id: "actionID" },
            gridview: true,
            idPrefix: rowId + "_"
        });
    }
}); 
```

**更新**：演示中使用的 JSON 数据如下所示。我添加`id`了 jqGrid 所需的属性。我用作`actionID`子`id`网格的：

```
{
    "total": "10",
    "page": "1",
    "records": "78",
    "rows": [
        {
            "id": 10,
            "comment": null,
            "givenName": "Contact A",
            "familyName": "A",
            "actionSet": [
                {
                    "actionID": 1,
                    "actionDueDate": "2012-12-08",
                    "actionNote": "Action 1"
                },
                {
                    "actionID": 2,
                    "actionDueDate": "2012-12-09",
                    "actionNote": "Action 2"
                }
            ]
        },
        {
            "id": 20,
            "comment": null,
            "givenName": "Contact B",
            "familyName": "B",
            "actionSet": [
                {
                    "actionID": 3,
                    "actionDueDate": "2012-12-11",
                    "actionNote": "Action 3"
                },
                {
                    "actionID": 4,
                    "actionDueDate": "2012-12-10",
                    "actionNote": "Action 4"
                }
            ]
        }
    ]
} 
```

# vb.net - TCPClient 几个小时后断开连接

> ID：14194763
> 
> 赞同：1
> 
> 时间：2013-01-07T11:14:12.857
> 
> 标签：vb.net, windows-services, tcpclient

我创建了一个 Windows 服务，它等待 TCPClient 连接并将任何消息中继到所有连接的客户端（发送者除外）。我的代码基于[这个](http://code.msdn.microsoft.com/windowsdesktop/Simple-Multi-User-TCPIP-43cc3b44)例子。

一个客户端在触发事件时连接，发送一些进度更新，然后断开连接。其他客户端是接收和显示更新的前端应用程序。

如果这些客户端闲置了几个小时，它们似乎会在没有任何错误\警告的情况下断开连接。我找不到任何空闲时间的相关超时，我有什么遗漏吗？

服务代码：

```
Protected Overrides Sub OnStart(ByVal args() As String)
    _Listener = New TcpListener(IPAddress.Any, 1314)
    _Listener.Start()
    ListenForClient()
    _ConnectionMontior = Task.Factory.StartNew(AddressOf DoMonitorConnections, New MonitorInfo(_Listener, _Connections), TaskCreationOptions.LongRunning)
End Sub

Private Sub ListenForClient()
    Dim info As New ConnectionInfo(_Listener)
    _Listener.BeginAcceptTcpClient(AddressOf DoAcceptClient, info)
End Sub

Private Sub DoAcceptClient(result As IAsyncResult)
    Try
        Dim monitorInfo As MonitorInfo = CType(_ConnectionMontior.AsyncState, MonitorInfo)
    If monitorInfo.Listener IsNot Nothing AndAlso Not monitorInfo.Cancel Then
        Dim info As ConnectionInfo = CType(result.AsyncState, ConnectionInfo)
        monitorInfo.Connections.Add(info)
        info.AcceptClient(result)
        ListenForClient()
        info.AwaitData()
    End If
    Catch ex As Exception
        WriteToEventLog("DoAcceptClient: " & ex.Message)
    End Try
End Sub

Private Sub DoMonitorConnections()

    Try

        'Create delegate for updating output display
        ' Dim doAppendOutput As New Action(Of String)(AddressOf AppendOutput)

        'Get MonitorInfo instance from thread-save Task instance
        Dim monitorInfo As MonitorInfo = CType(_ConnectionMontior.AsyncState, MonitorInfo)

        'Implement client connection processing loop
        Do
            'Create temporary list for recording closed connections
            Dim lostConnections As New List(Of ConnectionInfo)

            'Examine each connection for processing
            For Each info As ConnectionInfo In monitorInfo.Connections
                If info.Client.Connected Then
                    'Process connected client
                    If info.DataQueue.Count > 0 Then
                        'The code in this If-Block should be modified to build 'message' objects
                        'according to the protocol you defined for your data transmissions.
                        'This example simply sends all pending message bytes to the output textbox.
                        'Without a protocol we cannot know what constitutes a complete message, so
                        'with multiple active clients we could see part of client1's first message,
                        'then part of a message from client2, followed by the rest of client1's
                        'first message (assuming client1 sent more than 64 bytes).
                        Dim messageBytes As New List(Of Byte)
                        While info.DataQueue.Count > 0
                            messageBytes.Add(info.DataQueue.Dequeue)
                        End While

                        'Relay the message to all clients except the sender
                        For Each inf As ConnectionInfo In monitorInfo.Connections
                            If inf.Client.Connected Then
                                Dim msg As String = info.Client.Client.RemoteEndPoint.ToString & "|" & System.Text.Encoding.ASCII.GetString(messageBytes.ToArray)
                                If Not inf.Client.Client.RemoteEndPoint.ToString = msg.Split("|")(0) Then
                                    inf.Client.Client.Send(messageBytes.ToArray)
                                End If
                            End If
                        Next

                    End If
                Else
                    'Record clients no longer connected
                    lostConnections.Add(info)
                End If
            Next

            'Clean-up any closed client connections
            If lostConnections.Count > 0 Then
                While lostConnections.Count > 0
                    monitorInfo.Connections.Remove(lostConnections(0))
                    lostConnections.RemoveAt(0)
                End While
            End If

            'Throttle loop to avoid wasting CPU time
            _ConnectionMontior.Wait(1)
        Loop While Not monitorInfo.Cancel

        'Close all connections before exiting monitor
        For Each info As ConnectionInfo In monitorInfo.Connections
            info.Client.Close()
        Next
        monitorInfo.Connections.Clear()

    Catch ex As Exception
        WriteToEventLog("DoMonitorConnections" & ex.Message)
    End Try

End Sub 
```

客户代码：

```
 _ServerAddress = IPAddress.Parse(ServerIP)
 _Connection = New ConnectionInfo(_ServerAddress, 1314, AddressOf InvokeAppendOutput)
 _Connection.AwaitData() 
```

连接信息类：

```
Public Class ConnectionInfo
Private _AppendMethod As Action(Of String)
Public ReadOnly Property AppendMethod As Action(Of String)
    Get
        Return _AppendMethod
    End Get
End Property

Private _Client As TcpClient
Public ReadOnly Property Client As TcpClient
    Get
        Return _Client
    End Get
End Property

Private _Stream As NetworkStream
Public ReadOnly Property Stream As NetworkStream
    Get
        Return _Stream
    End Get
End Property

Private _LastReadLength As Integer
Public ReadOnly Property LastReadLength As Integer
    Get
        Return _LastReadLength
    End Get
End Property

Private _Buffer(255) As Byte

Public Sub New(address As IPAddress, port As Integer, append As Action(Of String))
    _AppendMethod = append
    _Client = New TcpClient
    _Client.Connect(address, port)
    _Stream = _Client.GetStream
End Sub

Public Sub AwaitData()
    _Stream.BeginRead(_Buffer, 0, _Buffer.Length, AddressOf DoReadData, Me)
End Sub

Public Sub Close()
    If _Client IsNot Nothing Then _Client.Close()
    _Client = Nothing
    _Stream = Nothing
End Sub

Private Const MESSAGE_DELIMITER As Char = ControlChars.Cr
Dim sBuilder As New System.Text.StringBuilder

Private Sub DoReadData(result As IAsyncResult)

    Dim info As ConnectionInfo = CType(result.AsyncState, ConnectionInfo)

    Try
        If info._Stream IsNot Nothing AndAlso info._Stream.CanRead Then
            info._LastReadLength = info._Stream.EndRead(result)
            If info._LastReadLength > 0 Then
                Dim message As String = System.Text.Encoding.UTF8.GetString(info._Buffer, 0, info._LastReadLength)

                If (message.IndexOf(MESSAGE_DELIMITER) > -1) Then

                    Dim subMessages() As String = message.Split(MESSAGE_DELIMITER)

                    sBuilder.Append(subMessages(0))
                    If Not info._Client.Client.LocalEndPoint.ToString = sBuilder.ToString.Split("|")(0) Then
                        info._AppendMethod(sBuilder.ToString)
                    End If

                    sBuilder = New System.Text.StringBuilder

                    If subMessages.Length = 2 Then
                        sBuilder.Append(subMessages(1))
                    Else
                        For i As Integer = 1 To subMessages.GetUpperBound(0) - 1
                            'MessageBox.Show(subMessages(i))
                            info._AppendMethod(subMessages(i))
                        Next
                        sBuilder.Append(subMessages(subMessages.GetUpperBound(0)))
                    End If
                Else
                    sBuilder.Append(message)
                End If
            End If
        End If

        info.AwaitData()

    Catch ex As Exception
        info._LastReadLength = -1
    End Try
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:18:21.160

TCP 不保证不尝试发送数据的一方可以检测到连接丢失。在设计应用程序协议时，您应该考虑到这一点。

您看到的最常见的原因是 NAT 或状态防火墙。实际上，如果您不至少每十分钟发送一次数据，您可以预期至少有一些客户端会断开连接。他们的 NAT 设备或状态防火墙只是忘记了连接。在尝试发送数据之前，双方都不会注意到。

我建议创建某种虚拟消息，服务器每五分钟将其发送给所有客户端。基本上，这只是一小部分数据，可以唯一标识为仅用于保持连接活动。

每个客户端通过将虚拟消息发送回服务器来响应虚拟消息。如果客户端在十分钟内没有收到虚拟消息，它应该认为连接丢失，关闭它，然后重新尝试连接。

仅尝试发送虚拟消息的行为将导致服务器检测到任何丢失的连接，但您可能还应该将任何在您准备好时尚未响应虚拟消息的客户端的连接视为已死发送下一个。客户端在没有收到虚拟消息时会知道连接丢失。消息交换将使 NAT/防火墙条目保持活动状态。

# java - 如何在 Socket 等 Java 类中实现超时阻塞调用

> ID：14194777
> 
> 赞同：0
> 
> 时间：2013-01-07T11:15:09.950
> 
> 标签：java, io, timeout

Java 中有许多 API 支持`blockingcall(timeout)`，如 Socket、Lock 等。这些东西是如何在 Java 中实现的？

我试图找出答案，但它导致本机代码不可见:(

在本机级别的Java中是否使用了类似的方法，例如创建线程并在超时时中断它？如果是这样，那么在 Java 级别也可以这样做，为什么要使用本机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:19:08.503

`it lead to native code which is not visible`这通常意味着它没有在 Java 中实现。通常它是由操作系统实现的。您可以获得 Linux 的源代码，但不能获得 Windows AFAIK。

使用 Java 线程中断，实际上并不会中断线程。它只是设置一个不会唤醒所有阻塞操作的标志。不使用此机制，因为它并不总是您想要的。

# android - Android 调整文本编辑控件大小

> ID：14194778
> 
> 赞同：0
> 
> 时间：2013-01-07T11:15:11.637
> 
> 标签：android, android-layout, drawing, android-edittext

我有一个文本编辑，我正在尝试在屏幕调整大小时重新调整它的大小（因为键盘）

```
@Override
    protected void onSizeChanged (int w, int h, int oldw, int oldh){
        super.onSizeChanged(w,h,oldw,oldh);
        if(m_editScreen != null){
            LayoutParams par = (LayoutParams) m_editScreen.getLayoutParams();
            par.height = h - 30;
            m_editScreen.setLayoutParams(par);          
        }
    } 
```

当点击文本区域时，框会缩小到正确的高度。（30 是顶部偏移量）当我关闭键盘时，文本框保持小。即使 h 值恢复到原来的值。

有什么我想念的吗？我真的没想到定位控制会这么难。

# change-tracking - 在 TFS 2012 中实现变更跟踪

> ID：14194780
> 
> 赞同：1
> 
> 时间：2013-01-07T11:15:17.940
> 
> 标签：change-tracking

我已经在我的服务器上安装了TFS2012，现在我需要实现更改跟踪。我已经解释了下面的细节。

更改跟踪的整个想法是，如果我更改 PBI/需求，则所有链接的工作项/错误/障碍状态都应该更改，或者 TFS 应该以某种方式通知我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:31:32.567

当链接项目发生更改时，TFS 不会自动更新一个工作项目。没有开箱即用的功能。您可以做的是[配置警报](http://www.incyclesoftware.com/2012/08/setup-alerts-tfs-2012/)。

或者您可以测试[存在于 TSF 2010](http://tfsaggregator.codeplex.com/)（开源项目）的 TFS Aggregator 是否适用于 2012（非官方支持）。当层次结构中的工作项发生更改时，它可以更新子工作项或父工作项。

* * *

开箱即用的 TFS 无法实现您想要的，但您可以使用自定义`ISubscriber`或 SOAP Web 服务相对轻松地实现这一点。请参阅[以下有关此问题的答案](https://stackoverflow.com/a/14203915/736079)。

# asp.net - 在独立的网络应用程序中使用 Google Drive SDK

> ID：14194781
> 
> 赞同：0
> 
> 时间：2013-01-07T11:15:19.923
> 
> 标签：asp.net, google-drive-api

我在工作中被分配了一项任务，将用户 Google Drive 集成到我们自己的网络应用程序中，交换文件，并最终提供从 Drive 到我们端的文件的自动同步。

我做了一些研究发现这篇文章：[http ://arstechnica.com/business/2012/04/google-drive-sdk-announced-but-apis-are-only-accesible-to-web-apps-for-现在/](http://arstechnica.com/business/2012/04/google-drive-sdk-announced-but-apis-are-only-accesible-to-web-apps-for-now/)

它指出，不可能开发一个“独立”（可以这么说）网络应用程序，让用户连接/验证他们的 Drive 帐户。也就是说，不必将我们的应用程序安装为 Web 应用程序，比如 Google Chrome，然后使用该应用程序以这种方式传输文件。如果是这样的话，整个想法就丢失了。

有人可以告诉我这是不是真的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:20:13.150

据我所知，查看文档，没有。

您可以根据需要使用驱动 SDK：

例如：

[https://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

```
POST /upload/drive/v2/files?uploadType=resumable HTTP/1.1
Host: www.googleapis.com
Authorization: **your_auth_token**
Content-Length: 38
Content-Type: application/json; charset=UTF-8
X-Upload-Content-Type: image/jpeg
X-Upload-Content-Length: 2000000

{
  "title": "My Image"
} 
```

您使用 OAuth 授权帐户，然后在上面的代码中使用该令牌。

看看这里的文档：[https](https://developers.google.com/drive/about-sdk) ://developers.google.com/drive/about-sdk ，永远不要相信 ArsTechnica 的话；）

# java - 使用 jmeter 的 Apache 多个请求

> ID：14194783
> 
> 赞同：10
> 
> 时间：2013-01-07T11:15:28.363
> 
> 标签：java, apache, jmeter, jboss5.x

我正在使用 Jmeter 测试对我的 Web 应用程序的多个请求。
我`NumberOfThread`在 Jmeter 中使用 50。

我的流程如下：

1.  登录页面。
2.  使用用户 ID 和密码登录。
3.  显示菜单页面。
4.  点击搜索页面。
5.  进入搜索页面。
6.  点击搜索按钮。
7.  点击搜索结果链接进入更新页面。
8.  更新数据并单击更新按钮。
9.  显示更新的结果页面。
10.  返回搜索页面。
11.  注销按钮单击。

在上述过程中，我将循环控制器用于进程号 5 到 10，循环次数为 5。
在那种情况下，如果我使用超过 25 个线程来运行 Jmeter 测试，就会`address already in use, the socket binding exception`发生这种情况。

我想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-07T16:51:11.990

看起来您的客户端用完了临时端口，或者您的客户端环境有问题。
你在使用 Windows 吗？

您至少可以执行以下操作：

1.  Windows：查看[这篇文章](http://www.baselogic.com/blog/system-administration/solved-java-net-bindexception-address-use-connect-issue-windows/)，了解 Windows 系统作为 jmeter 主机的解决方案。
2.  改为使用 Linux 系统作为主机来运行 Jmeter 负载方案。

您可能会发现[这篇文章](http://planet.jboss.org/post/concurrent_high_throughput_performance_testing_with_jmeter)对您的测试活动很有用（我在标签中看到过 Jboss）。

* * *

**更新：**

再次来自[上面的链接文章](http://planet.jboss.org/post/concurrent_high_throughput_performance_testing_with_jmeter)：

> 当发出 HTTP 请求时，会为 TCP/IP 连接分配一个临时端口。临时端口范围为 32678 - 61000。客户端关闭连接后，连接处于 TIME-WAIT 状态 60 秒。
> 
> 如果 JMeter (HttpClient) 每秒发送数千个 HTTP 请求并创建新的 TCP/IP 连接，系统将用完可用的临时端口来分配。
> 
> . . .
> 
> 否则，JMeter JTL 文件中可能会出现以下消息：
> 
> *非 HTTP 响应代码：java.net.BindException*
> *非 HTTP 响应消息：地址已在使用中*
> 
> 解决方案是启用快速回收 TIME_WAIT 套接字。
> 
> **回声 1 > /proc/sys/net/ipv4/tcp_tw_recycle**
> 
> 其他选项包括 TCP_FIN_TIMEOUT 以减少连接处于 TIME_WAIT 状态的时间，以及 TCP_TW_REUSE 允许系统重用处于 TIME_WAIT 状态的连接。

在服务器端：

*   这可以快速回收 TIME_WAIT 套接字

    `/sbin/sysctl -w net.ipv4.tcp_tw_recycle=1`

*   这允许重用处于 TIME_WAIT 状态的套接字以进行新连接 - 比 tcp_tw_recycle 更安全的替代方案

    `/sbin/sysctl -w net.ipv4.tcp_tw_reuse=1`

    tcp_tw_reuse 设置在许多短连接打开并处于 TIME_WAIT 状态的环境中特别有用，例如 Web 服务器。重用套接字可以非常有效地减少服务器负载。

*   系统同时持有的最大 timewait 套接字数

    `/sbin/sysctl -w net.ipv4.tcp_max_tw_buckets=30000`

或相同但以另一种方式 - 将以下行添加到`/etc/sysctl.conf`文件中，以便更改在重新启动后继续存在：

```
net.ipv4.tcp_max_tw_buckets = 30000
net.ipv4.tcp_tw_recycle = 1
net.ipv4.tcp_tw_reuse = 1 
```

同样在服务器端查看`ulimit -n`.
最大打开文件的限制默认值为 1024，这可以解释在 1000 个连接时出现 BindExceptions。

您还可以在测试运行期间使用例如监视服务器和 jmeter 之间的连接数

```
netstat -an | grep SERVER_PORT | wc -l 
```

定义连接限制 - 如果有的话。

# c++ - Qt4 Widget：在不阻塞小部件的情况下实现等待功能

> ID：14194786
> 
> 赞同：0
> 
> 时间：2013-01-07T11:15:46.970
> 
> 标签：c++, user-interface, qt4, widget, wait

我正在使用（很棒的）Qt4 库用 C++ 编写一个简单的游戏。一段时间以来，我遇到以下问题：

小部件提供（除其他外）2 种方法，改变小部件响应用户输入的方式，如鼠标移动和点击等。让我们调用这些函数`fun1()`并`fun2()`避免上下文。所有这些函数所做的，是切换小部件中的一些内部变量，这些变量由所有事件函数（例如`mouseMoveEvent()`）检查。当`fun1()`被调用时，用户应该通过与小部件交互并单击某处来执行移动。小部件检查他的移动是否有效，如果有效，则将他的移动应用到当前游戏状态。

现在，包含此小部件的主类在某些时候调用`fun1()`并`fun2()`随后调用。我必须实现一些（优雅的）以确保主循环在`fun1()`移动结束之前一直处于结束状态。

```
void Widget::fun1()
{
    // Set some members in order to tell the Widget how to respond to events
    // ...
    wait(); // wait for the move to be completed before returning from fun1()
} 
```

`wait()`在保持 GUI 的响应能力（即响应用户交互的同时）的同时应该如何实现？

过去，我通过让小部件的父级等待小部件发出通知它已完成的信号来解决此问题。只有当收到这个信号时，我才打电话`fun2()`。尽管这可能工作正常，但让我感到困扰的是，它使用小部件而不是小部件本身来等待类的责任。

任何建议都会非常有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:39:32.463

首先，让我为回答我自己的问题道歉。事实证明，我已经尝试过的解决方案*确实*有效，但是我愚蠢地从主窗口的构造函数中调用`fun1()`了`fun2()`。因此，`app.exec()`由于等待功能而从未调用过，并且未处理事件。

`wait()`对于那些感兴趣的人的工作实施是：

```
void Widget::wait()
{
    static QEventLoop loop;
    connect(this, SIGNAL(done()), &loop, SLOT(quit()));
    loop.exec();
} 
```

# c# - 如何让建议器组件在 SolrNet 中工作？

> ID：14194794
> 
> 赞同：5
> 
> 时间：2013-01-07T11:16:29.987
> 
> 标签：c#, .net, solr, solrnet

我已经配置了我的 solrconfig.xml 和 schema.xml 来查询建议。

我能够从 url 获得建议

```
http://localhost:8080/solr/collection1/suggest?q=ha&wt=xml 
```

我的 SolrConfig.xml 看起来像

目前，我的 solr 查询看起来像

```
<fields>
    <!-- declare fields of entity class -->
    <!-- type will specify the table name -->
    <field name="type" type="string" indexed="true" stored="true"  />

    <field name="id" type="string" indexed="true" stored="true" required="true" multiValued="false" />
    <field name="name" type="text_general" indexed="true" stored="true" omitNorms="true"/>

    <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>
    <field name="_version_" type="long" indexed="true" stored="true"/>

    <!-- unique field -->
    <field name="uid" type="uuid" indexed="true" stored="true" />

  </fields>

  <uniqueKey>uid</uniqueKey>

  <copyField source="name" dest="text"/>

  <types>
    <fieldType name="uuid" class="solr.UUIDField" indexed="true" />
    <fieldType name="string" class="solr.StrField" sortMissingLast="true" />
    <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true"/>

    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" positionIncrementGap="0"/>
    .....
    </types> 
```

我的 schema.xml 看起来像这样

```
<searchComponent name="suggest" class="solr.SpellCheckComponent">
    <!-- a spellchecker built from a field of the main index -->
    <lst name="spellchecker">
      <str name="name">suggest</str>
      <str name="field">name</str>
      <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
      <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>
      <str name="buildOnCommit">true</str>          
      <str name="distanceMeasure">internal</str>
      <float name="accuracy">0.5</float>
      <int name="maxEdits">2</int>
      int name="minPrefix">1</int>
      <int name="maxInspections">5</int>
      <int name="minQueryLength">4</int>
      <float name="maxQueryFrequency">0.01</float>
       <float name="thresholdTokenFrequency">.01</float>      
    </lst>

    <!-- a spellchecker that can break or combine words.  See "/spell" handler below for usage -->
    <lst name="spellchecker">
      <str name="name">wordbreak</str>
      <str name="classname">solr.WordBreakSolrSpellChecker</str>
      <str name="field">name</str>
      <str name="combineWords">true</str>
      <str name="breakWords">true</str>
      <int name="maxChanges">10</int>
    </lst>
</searchComponent>

<requestHandler name="/suggest" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <!-- Solr will use suggestions from both the 'default' spellchecker
           and from the 'wordbreak' spellchecker and combine them.
           collations (re-written queries) can include a combination of
           corrections from both spellcheckers -->
      <str name="spellcheck">true</str>
      <str name="spellcheck.dictionary">suggest</str>
      <!--<str name="spellcheck.dictionary">wordbreak</str>-->
      <str name="spellcheck">on</str>
      <str name="spellcheck.extendedResults">true</str>       
      <str name="spellcheck.count">10</str>
      <str name="spellcheck.alternativeTermCount">5</str>
      <str name="spellcheck.maxResultsForSuggest">5</str>       
      <str name="spellcheck.collate">true</str>
      <str name="spellcheck.collateExtendedResults">true</str>  
      <str name="spellcheck.maxCollationTries">10</str>
      <str name="spellcheck.maxCollations">5</str>         
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
  </requestHandler> 
```

我调用 SolrNet API 的代码如下所示

```
new SolrBaseRepository.Instance<T>().Start();
        var solr = ServiceLocator.Current.GetInstance<ISolrOperations<T>>();
        var options = new QueryOptions
        {
            FilterQueries = new ISolrQuery[] { new SolrQueryByField("type", type) }
        };
        var results = solr.Query(keyword, options);
        return results; 
```

但是，我没有得到任何数据。结果计数为零。结果中的拼写检查也为零​​。

我也没有在结果中看到建议列表。

![在此处输入图像描述](../Images/bdde89a6219c08eb005b78d263f9b55d.png)

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T15:20:00.357

我有完全相同的要求，但找不到任何方法来使用 SolrNet轻松处理[Suggester结果。](http://wiki.apache.org/solr/Suggester)不幸的是，SolrNet 似乎是围绕默认`/select`请求处理程序构建的，目前不支持任何其他处理程序，包括 `/suggest`对象类型映射 ( `T`)。它期望所有映射都与索引的 Solr 文档结果而不是建议结果一起发生。

因此，[@Paige Cook 的回答](https://stackoverflow.com/a/14196584/4872)对我不起作用。`T`带有映射的类型与建议者结果响应不兼容。`Startup.Init<T>()`从初始化请求 ( ) 到查询 ( )的所有标准管道代码都`ISolrQueryResults<T> results = solr.Query()`需要映射的 Solr 文档类型，而不是建议者提供的简单字符串数组。

因此，（类似于[@dfay](https://stackoverflow.com/a/14326721/4872)）我提出了一个 Web 请求并从 XML Web 响应中解析出建议的结果。该类`SolrConnection`用于此：

```
string searchTerm = "ha";
string solrUrl = "http://localhost:8080/solr/collection1";
string relativeUrl = "/suggest";
var parameters = new Dictionary<string, string>
                {
                    {"q", searchTerm},
                    {"wt", "xml"},
                };

var solrConnection = new SolrConnection(solrUrl);
string response = solrConnection.Get(relativeUrl, parameters);
// then use your favorite XML parser to extract 
// suggestions from the reponse string 
```

或者，请求可以使用以下`wt=json`参数返回 JSON 响应，而不是 XML：

```
var parameters = new Dictionary<string, string>
                {
                    {"q", searchTerm},
                    {"wt", "json"}, // change this!
                };
// then use your favorite JSON parser 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:10:52.027

请参阅[http://wiki.apache.org/solr/SolrRequestHandler](http://wiki.apache.org/solr/SolrRequestHandler)，特别是关于旧的 handleSelect=true 行为的部分。如果您针对较新的 Solr 服务器运行，这很可能是您的问题。（即设置“qt”无效，必须更改 SolrNet 中的默认处理程序，或者 Solr 配置需要设置 handleSelect=true。）以下是我解决此问题的方法：

```
ISolrConnection connection = ServiceLocator.Current.GetInstance<ISolrConnection>();
List<KeyValuePair<string, string>> termsParams = new List<KeyValuePair<string, string>>();
termsParams.Add(new KeyValuePair<string, string>("terms.fl", "name"));
termsParams.Add(new KeyValuePair<string, string>("terms.prefix", mySearchString));
termsParams.Add(new KeyValuePair<string, string>("terms.sort", "count"));
string xml = connection.Get("/terms", termsParams);

ISolrAbstractResponseParser<Document> parser = ServiceLocator.Current.GetInstance<ISolrAbstractResponseParser<Document>>();
SolrQueryResults<Document> results = new SolrQueryResults<Document>();
parser.Parse(System.Xml.Linq.XDocument.Parse(xml), results);

TermsResults termResults = results.Terms;
foreach (TermsResult result in termResults)
{
    foreach (KeyValuePair<string, int> kvp in result.Terms)
    {
        //... do something with keys
    }
} 
```

基本上我使用 SolrNet 解析器和连接代码，但不使用查询内容。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T13:04:38.700

为了对`/suggest`您设置的请求处理程序执行查询，您需要`qt`使用 SolrNet QueryOptions 中的 ExtraParameters 设置 Solr 参数，如下所示：

```
 new SolrBaseRepository.Instance<T>().Start();
 var solr = ServiceLocator.Current.GetInstance<ISolrOperations<T>>();
 var options = new QueryOptions
 {
     FilterQueries = new ISolrQuery[] { new SolrQueryByField("type", type) },
     ExtraParams = new Dictionary<string, string>{{"qt", "suggest"}},
 };
 var results = solr.Query(keyword, options);
 return results; 
```

否则，您的查询仍会针对标准`/select`请求处理程序（或您在 solrconfig.xml 中定义为默认值的任何内容）执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-15T21:26:56.397

传递 qt 参数不起作用，至少在 Solr 4.7 中不起作用，即使在 SolrConfig 中使用 handleSelect=true 也是如此。您可以通过指定与默认 /select 非常不同的自定义处理程序进行验证，例如让您使用 edismax 并在 ExtraParams 中发送 debugQuery = true 并在 Fiddler 中捕获结果。

此外，如果您阅读了有关 handleSelect 标志的说明，它会显示“如果请求使用“/select”但没有该名称的请求处理程序”。

您不想触摸或禁用 /select 处理程序，因为 Solr 自己使用它。

我最终使用 ExtraParams 来传递我在自定义处理程序中定义的所有值，没有那么多。似乎比只使用 SolrNET 的一部分然后进行结果解析要好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-30T09:15:16.800

使用新版本的 SolrNet（至少 .net 4.6），您可以更改默认处理程序“/select”。尝试使用这种方式调用您的建议处理程序。

```
using CommonServiceLocator;
using SolrNet;
using SolrNet.Commands.Parameters;

Startup.Init<MwDoc>("http://localhost:8983/solr/mycore");
var solr = ServiceLocator.Current.GetInstance<ISolrOperations<MyClass>>();

QueryOptions options = new QueryOptions()
            {
                RequestHandler = new RequestHandlerParameters("/suggest"),
                // define your other Options here
            };
solr.Query("keyword to search", options); 
```

# java - 试图在本体中获取特定类的成员

> ID：14194796
> 
> 赞同：1
> 
> 时间：2013-01-07T11:16:37.397
> 
> 标签：java, instance, jena, ontology

我正在使用 Jena java API 来读取/搜索本体，并且我正在尝试查找特定本体类的所有成员。

所以，我使用以下代码：

```
OntClass oc = model.getOntClass(NS + "ClassName");
for (ExtendedIterator<? extends OntResource> i = oc.listInstances(); i.hasNext();)
{
    OntResource or = i.next();
    System.out.println("Local name:" + or.getLocalName()); 
} 
```

`model`读取本体的`OntModel`对象在哪里。

我从这段代码中得到的结果是以下形式的值列表：className1、className5 等。

但是，当我使用 Protege 打开本体时，同一类的成员具有正常名称。正确`getInstances()`的功能是否适合我的目的？如果是这样，我在 Protege 中看到的存储在本体中的名称在哪里，我如何获得它们的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:10:58.527

循环本身很好。您的调用`.localName()`是提取 URI 的一部分（通常）是`prefix:name`qname 对的名称部分。这通常是一个有意义的字符串，如`myontology:Wheel`or `myontology:Truck`，但它没有在 RDF 标准中正式定义，严格来说，RDF 将整个 URI 视为没有任何内部结构的单个标记。

当您在代码中处理本体时，资源（或类、属性、个体等）的 URI 是您需要引用该资源的内容。但是，在通过某种 UI 向人类展示资源时，您需要一些更具可读性的东西。在 RDF 中对此有许多约定（不幸的是，这是复数约定）。通常，您会发现以下一个或多个附加到资源的属性：

*   `rdfs:label`- 通常用于紧凑可读的名称
*   `rdfs:comment`- 通常用于更长、更具描述性的术语
*   `skos:prefLabel`- “首选”标签
*   `skos:altLabel`- “替代”标签

大多数本体或数据集将使用`rdfs:comment`and`rdfs:label`或 SKOS 术语。有些人会同时使用两者。请记住，标签也可能有语言标记的变体：

```
<http://example.org/terms#Cat>
  a owl:Class ;
  rdfs:label "cat"@en ;
  rdfs:label "chat"@fr ;
  rdfs:comment "denotes the set of all cats"@en ;
  rdfs:comment "désigne l'ensemble de tous les chats"@fr . 
```

因此，Protege 将要做的是查看这些属性中的哪些正在被编辑的本体中使用，选择一个首选的，然后显示它。您也可以这样做，例如：

```
OntClass oc = model.getOntClass(NS + "ClassName");
for (ExtendedIterator<? extends OntResource> i = oc.listInstances(); i.hasNext();)
{
  OntResource or = i.next();
  Property labelProp = null;

  if (or.hasProperty( RDFS.label )) {
    labelProp = RDFS.label;
  }
  else if (or.hasProperty( SKOS.prefLabel )) {
    labelProp = SKOS.prefLabel;
  }

  // note: does not deal with lang tags
  String label = (labelProp != null) ? or.getProperty( labelProp ).getString() : "unknown";

  System.out.println("Resource " + or.getURI() + " is labelled: " + label ); 
} 
```

# assembly - 是否有 x86 I/O 端口分配的规范？

> ID：14194798
> 
> 赞同：13
> 
> 时间：2013-01-07T11:16:50.017
> 
> 标签：assembly, io, x86, port, specifications

我在网上找到了一些信息如下，但不完整。

[http://en.wikipedia.org/wiki/Input/output_base_address](http://en.wikipedia.org/wiki/Input/output_base_address)

[http://wiki.osdev.org/I/O_Ports](http://wiki.osdev.org/I/O_Ports)

规范在哪里下载？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T12:22:07.227

*当前*（而不是 1994 年的）I/O 端口映射的一个很好的来源是芯片组文档，例如[英特尔® 7 系列芯片组家族 PCH 数据表](https://www.intel.com/content/dam/www/public/us/en/documents/datasheets/7-series-chipset-pch-datasheet.pdf)（请参阅第 9.3 节，I/O 映射）。例如，以下是现代 PC 中常用的一些端口，旧列表中未提及：

*   2E-2F,4E-4F：Low Pin Count (LPC) 接口，通常连接到 Super I/O 或 EC（嵌入式控制器）
*   0CF8、0CFC：PCI配置空间访问
*   B2：ACPI 和 SMI 端口（写入通常会产生 SMI 中断）

请注意，某些 I/O 范围是动态的，可以通过重新编程相应 PCI 设备配置中的各个位来移动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T11:50:57.717

您可能需要查看[Ralf Brown 的中断列表 "RBIL"](http://www.cs.cmu.edu/~ralf/files.html)。

[D 部分](http://www.cs.cmu.edu/~ralf/interrupt-list/inter61d.zip)包含有关 I/O 端口的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-16T17:57:39.737

对于有关端口的经典（即 1995 年之前）信息，Bochs 项目有一个非常有用的[XT、AT 和 PS/2 端口地址](http://bochs.sourceforge.net/techspec/PORTS.LST)列表。该列表相当全面，尽管序言警告读者“不要认为这些信息是完整和准确的”。

# c# - 大型辅助数据源的 XPathNavigator 性能

> ID：14194801
> 
> 赞同：1
> 
> 时间：2013-01-07T11:16:56.873
> 
> 标签：c#, xpath, xpathnavigator

我有一个包含大约 23k 个条目的辅助数据源。用户输入一个 ID，只得到 1 个数据集。如果我使用：

`XPathNavigator test = nav.SelectSingleNode("/dfs:myFields/dfs:dataFields/d:SharePointListItem_RW[d:Title = '" + ID + "']", NamespaceManager);`

返回节点大约需要 8 秒。有没有更好（更快）的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:31:15.270

您可以在应用程序开始时收集`SharePointListItem_RW`a 中的所有节点`Dictionary`（**键**是标题 id，**值**是包含标题作为 id 的节点）。

[内存消耗在这里不是问题，因为它几乎不会超过 1MB]

然后您可以使用以下`TryGetValue`方法选择特定节点`Dictionary`

复杂性将`O(1)`是快速的

# css - Java Fx2.x：LineChart setStrokeDashArray

> ID：14194804
> 
> 赞同：1
> 
> 时间：2013-01-07T11:17:03.387
> 
> 标签：css, javafx-2, linechart

我有一个 LineChart，我可以使用不同的 Stroke Dash Array 进行绘图，但我不能绘制为虚线，例如

```
-fx-stroke-dash-array: 0.1,5.0; 
```

或者

```
-fx-stroke-dash-array: 0.8,8.0; 
```

这有什么原因吗？当我使用这些设置时，它会绘制为实线。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T12:24:18.760

根据[cssref](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)

`-fx-stroke-dash-array`有一个类型“size [size ]+”，所以它里面不需要逗号。

我尝试了一个单独的应用程序，与图表无关。和

```
-fx-stroke-dash-array: 0.1,5.0; 
```

显示一条实线，而

```
-fx-stroke-dash-array: 0.1 5.0; 
```

显示虚线。

# android - 服务放置并获取一些数据

> ID：14194808
> 
> 赞同：0
> 
> 时间：2013-01-07T11:17:27.353
> 
> 标签：android, service

我有两个应用程序。一个运行服务，第二个只是小应用程序。我想在第一个应用程序中提供一些数据服务，但我想在第二个应用程序中获取这些数据。我怎样才能做到这一点？我需要它，因为当我在第二个应用程序上使用主页按钮并返回时，我需要检查 id 是否已更改。当 onResume 检查该 id 时，我会考虑在第一个应用程序和第二个应用程序中使用 id 运行服务。

这是代码服务类：

```
public class ServiceId extends Service{

    private int id;
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public void onCreate() {

    }
    @Override
    public void onDestroy() {

    }

    @Override
    public void onStart(Intent intent, int startid) {
        id = MainActivity.getApplicationId();
        Log.v("Start", "Webservice started");
    }
} 
```

我在 mainactivity 中开始服务：

startService(new Intent(MainActivity.this, ServiceId.class));

如何在其他应用程序中获取该 ID？

# php - 通过 php 调用 web 服务 -> 错误：未找到传输或选择的传输尚不支持

> ID：14194813
> 
> 赞同：3
> 
> 时间：2013-01-07T11:17:39.437
> 
> 标签：php, web-services, soap, nusoap

**错误：未找到传输，或尚不支持所选传输！**

当我调用网络服务时，会发生此错误。

这是我的代码：

```
include("lib/bankmellat/nusoap.php");
$client = new \bankmellat\nusoap_client('https://pgwstest.bpm.bankmellat.ir/pgwchannel/services/pgw?wsdl');
$namespace = 'http://interfaces.core.sw.bps.com/';
$parameters = array();
$parameters['terminalId'] = $terminalId;
$parameters['userName'] = $userName;
.
.
.
$result = $client->call('bpPayRequest', $parameters , $namespace);
echo '<h2>Error!!</h2><pre>' . $client->getError(); . '</pre>'; 
```

*Ubuntu 12.04*

*阿帕奇2*

*PHP 5.3.10*

*在 php 上启用 cURL - 版本：7.21.3*

*cURL 支持的协议：dict、file、ftp、ftps、gopher、http、https、imap、imaps、ldap、ldaps、pop3、pop3s、rtsp、smtp、smtps、telnet、tftp*

我必须说我在其他具有几乎相似资格的服务器上实现了此代码，并且它们仍在工作！

请帮助解决这个问题..伙计们！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T04:59:44.230

终于我发现了我的问题！主要问题是**php版本（5.3.10）！**

根据[关于构造函数的 php 手册](http://php.net/manual/en/language.oop5.decon.php) ：

*从 PHP 5.3.3 开始，与命名空间类名的最后一个元素同名的方法将不再被视为构造函数。此更改不会影响非命名空间类。*

所以我将 nusoap_client 类中的**nusoap_client**（旧的构造函数样式）函数更改为**__construct**并修复了问题！

现在我遇到了另一个错误并正在努力修复它：

**wsdl 错误：获取[https://pgws.bpm.blabla.ir/pgwchannel/services/pgw?wsdl](https://pgws.bpm.blabla.ir/pgwchannel/services/pgw?wsdl) - HTTP 错误：未知方案**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-28T17:49:07.337

使用命名空间时，旧的 php OOP (php4) 构造不会自动运行。将 __construct 方法添加到所有类。在新的 __construct 方法中调用旧构造之后。

或使用这个编辑过的文件 > [nusoap_client.php](http://wikisend.com/download/501382/nusoap_client.php)

# c# - 如何加密app.config（没有解密方法）

> ID：14194814
> 
> 赞同：3
> 
> 时间：2013-01-07T11:17:39.860
> 
> 标签：c#, .net, sql, iis, app-config

我想加密`ConnectionString`位于 app.config 中的“”设置。但是在运行时，我想直接使用（读取`ConnectionString`）它，而不是解密它。

我的意思是，我不想让任何人解密字符串。应该没有解密方法。我在想; 它应该像嵌入 .net/asp.net/iis 功能一样使用。像“Windows登录”（可以输入，可以使用，但不能解密）

===

示例用法；您有一个包含一些关键数据的小型网站。您没有钱购买私人服务器，所以您正在使用共享服务器，如果服务器以某种方式被黑客入侵，您的应用程序和数据库将被盗。但是如果你将加密的连接字符串放在 app.config 中，这将很难解密它并查看数据库中的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:43:27.293

可以使用 aspnet_regiis.exe 工具从命令行对配置文件中的配置设置进行加密和解密。

以下 MSDN 文章中描述了详细信息：

> **[加密和解密配置部分](http://msdn.microsoft.com/en-us/library/zhhddkxy%28v=vs.100%29.aspx)**

由于该工具主要用于 Web 应用程序，因此它需要将配置文件命名为“web.config”。这意味着您必须暂时将 app.config 文件重命名为 web.config：

```
重命名 App.config web.config
aspnet_regiis -pef 连接字符串。-prov DataProtectionConfigurationProvider
重命名 web.config App.config

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:32:51.140

[DPAPI](http://msdn.microsoft.com/en-us/library/ms995355.aspx)可能是一个解决方案。

您可以将您的 usr/pwd/credentials 连接到机器。JGalloway 比我更了解这一点。JGalloway 比我更了解任何 dotnet。http: [//weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config -文件.aspx](http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx)

如果我没有混淆，这会创建一个绑定到机器硬件的 usr/pwd 组合。即更换网卡和东西可能会破坏。还; 不能在一台机器上创建 usr/pwd/creds 然后转移到另一台机器上。简而言之，这意味着你必须在生产机器上做任何你必须做的事情——如果你的目标是持续交付，这可能会让你头疼。

警告：我自己没有尝试过。相反，我选择了“常规”加密。如果有人掌握了我的加密字符串和字节码并对其进行逆向工程，我会被熏死。但这对我来说已经足够安全了。

# php - 创建一个新的 .HTML 文件，然后上传到服务器或数据库，以便其他人可以在线查看

> ID：14194822
> 
> 赞同：0
> 
> 时间：2013-01-07T11:18:03.273
> 
> 标签：php, javascript, html, mysql, database

我正在做一个项目，用户可以创建一个带有主页和 1 或 2 个附加页面的基本网站。

我可以很容易地将页面的内容保存到数据库，但需要帮助来创建新的 html 文件，然后将其保存到数据库或服务器，以便其他人可以在加载保存到的内容后在线查看它数据库。

最初我想在一个数据库中将两个表链接在一起，一个包含页面和每个页面将包含哪些元素的详细信息，例如导航、标题和内容。然后第二个表保存链接到其各自页面的每个元素的内容。字段将类似于

```
Page Name       Nav                   Content
index.html      Some HTML/CSS Data    Some HTML/CSS Data 
```

所以基本上我需要一些帮助来创建空白 .html 并将其保存到数据库或服务器中，以便任何人都可以查看结果，然后我认为自己可以弄清楚如何用数据填充它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:56:32.623

请让我们知道您在选择什么，是您想要构建的动态（将页面存储在数据库中）还是静态（构建标准 html）页面。

# c++ - C++ 中的小型数据库管理

> ID：14194827
> 
> 赞同：1
> 
> 时间：2013-01-07T11:18:11.263
> 
> 标签：c++, database

我正计划开发一个必须访问（读/写）小型数据库的 C++ 应用程序。前段时间，我编写了一些用于访问格式化文本文件的代码，并将其用作数据库。但是现在我想知道是否存在一些用于 c++（linux 盒）的轻量级库，它让我可以轻松处理小型数据库并具有良好的性能。

我想要一些建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T11:21:40.567

我不是 100% 确定这是否像你希望的那样“简单”，但在我看来 SQLite ( [http://www.sqlite.org/](http://www.sqlite.org/) ) 是一种我曾经使用过一段时间的易于使用的解决方案以前...希望这会有所帮助！

# iphone - 在真实设备 (iPhone) 上运行存档文件的链接器错误

> ID：14194835
> 
> 赞同：0
> 
> 时间：2013-01-07T11:18:42.143
> 
> 标签：iphone, ios

我通过直接在项目中添加项目文件来在我的项目中使用[CorePlot 。](http://code.google.com/p/core-plot/)当我为模拟器编译它时很好，但是当我尝试为真实设备编译它时它说：

```
"clang: error: no such file or directory: 
'/Users/t2wu/Library/Developer/Xcode/DerivedData/HRM-fqohcvzyvosuqmerfynaixyulpta/Build/Products/Debug-iphoneos/libCorePlot-CocoaTouch.a'" 
```

可能是什么问题呢？我正在使用带有 iOS 6 SDK 的 iPhone 4S，超级项目和嵌入式 CorePlot 的架构都设置为 Standard(armv7, armv7s)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:11:53.400

在目标项目构建设置中，仅构建构建体系结构 = YES。这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:29:57.347

Clang 是编译器。确保您的项目中有一个 libCorePlot-CocoaTouch.a 文件。

# android - Android 压缩资源不会改变 APK 大小

> ID：14194836
> 
> 赞同：0
> 
> 时间：2013-01-07T11:18:42.823
> 
> 标签：android, compression, filesize

我们正在为我的 Android 应用程序进行尺寸优化。

然而，在我们显着减少资源文件夹的大小后，将其减少了 8mb，当我编译（使用 maven）时，应用程序的大小仅减少了 0.1mb。

有人可以解释为什么会这样吗？

我正在拉链对齐，但这一切都在 pom 中。

这是 pom 的构建部分

```
 <build>

    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.2.0</version>
            <extensions>true</extensions>

            <configuration>
                <!-- replace resources with target specific -->

                <renameManifestPackage>${customerPackage}</renameManifestPackage> 
                <resourceOverlayDirectory>${customerResources}</resourceOverlayDirectory>

                 <sign>
                    <debug>false</debug>
                 </sign>
                  <manifest>
                    <versionCodeAutoIncrement>true</versionCodeAutoIncrement>
                  </manifest>
                   <zipalign>
                    <inputApk>${project.build.directory}/${project.build.finalName}.apk</inputApk>
                    <outputApk>${project.build.directory}/outputfile.apk</outputApk>
                 </zipalign>

               <proguard>
                    <skip>true</skip>
                </proguard>

                <sdk>
                    <!-- platform or api level (api level 4 = platform 1.6)-->
                    <platform>17</platform>
                </sdk>
                <assetsDirectory>${project.basedir}/${customerAssets}</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
            </configuration>

            <executions>
                <execution>
                    <id>manifestUpdate</id>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>manifest-update</goal>
                    </goals>
                </execution>
                <execution>
                    <id>alignApk</id>
                    <phase>package</phase>
                    <goals>
                        <goal>zipalign</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jarsigner-plugin</artifactId>
            <version>1.2</version>
            <executions>
                <execution>
                    <id>signing</id>
                    <goals>
                        <goal>sign</goal>
                    </goals>
                    <phase>package</phase>

                    <inherited>true</inherited>
                    <configuration>
                        <archiveDirectory></archiveDirectory>
                        <includes>
                            <include>target/*.apk</include>
                        </includes>
                        <keystore>../certificates/mycertificate.keystore</keystore>
                        <storepass>*******</storepass>
                        <keypass>******</keypass>
                        <alias>myalias</alias>

                    </configuration>
                </execution>
            </executions>
        </plugin>

        <!-- <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <configuration>
              <skip>true</skip>
            </configuration>
       </plugin> -->

    </plugins>
</build> 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:31:43.820

APK 已被压缩。通过单独压缩您的资源，您所做的一切就是在 APK 压缩阶段留下更少的工作。

这样想，创建一个大文本文件，将其压缩成一个 zip，你会发现 zip 小得多。

现在将此压缩文本文件压缩到另一个 zip 文件中。你希望它更小吗？不，它几乎不会改变，如果有的话更大。

从高层次上讲，这与压缩资源基本相同，然后要求 APK 再次压缩所有资源。

# caliburn.micro - 以 StaticResource 作为参数的 Caliburn.Micro 操作消息

> ID：14194839
> 
> 赞同：2
> 
> 时间：2013-01-07T11:18:52.750
> 
> 标签：caliburn.micro

如何将这种长格式转换为短内联格式。我尝试了各种组合，但都没有奏效。我总是将参数设为空。

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="GotFocus">
        <cal:ActionMessage MethodName="SelectTool">
           <cal:Parameter Value="{StaticResource contrastTool}" />
        </cal:ActionMessage>
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

我试过这个：

```
cal:Message.Attach="[Event GotFocus] = [Action SelectTool({StaticResource contrastTool})]" 
```

但这不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:54:07.090

它可以使用 Caliburn.Micro Contrib（也可以通过 Nuget 获得）来解决。

要启用 XamlBinding，请在引导程序中插入以下代码

```
FrameworkExtensions.Message.Attach.AllowExtraSyntax(MessageSyntaxes.SpecialValueProperty | MessageSyntaxes.XamlBinding); 
```

然后在 Xaml 中你可以使用

```
cal:Message.Attach="[Event GotFocus] = [Action SelectTool({StaticResource contrastTool})]" 
```

# mysql - 产品属性的数据库模式

> ID：14194841
> 
> 赞同：7
> 
> 时间：2013-01-07T11:19:05.290
> 
> 标签：mysql, database-design

我想在类别中实现产品过滤，我对正确的数据库模式有疑问。现在我有以下表格：

**分类**：

```
1\. id
2\. category
3\. description 
```

**产品**：

```
1\. id
2\. category_id
3\. product
4\. image
5\. price 
```

**属性**：

```
1\. id
2\. attribute 
```

**类别属性**：

```
1\. category_id
2\. attribute_id 
```

我的问题是我应该创建哪些表以及它们必须存储不同类型的值、属性值、产品属性值等的列。

再创建3个表是否正常：

**价值观**：

```
1\. id
2\. value 
```

**属性值**：

```
1\. attribute_id
2\. value_id 
```

**Products_Attributes_Values**：

```
1\. product_id
2\. attribute_id
3\. value_id 
```

我在最后几张桌子上搞砸了。什么会更好地存储和过滤？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T22:21:36.890

您要实现的是*实体-属性-值*(EAV) 或可能是*行建模*解决方案。请注意，由于各种非常好的原因，这种类型的结构在很大程度上是不受欢迎的。

但是，我曾争论过（例如， [here](https://stackoverflow.com/questions/17231834/if-eav-is-evil-what-to-use-for-dynamic-values/17233204#17233204)、[here](https://stackoverflow.com/questions/10010992/database-design-for-ecommerce-project-should-i-use-eav-approach/10027905#10027905)、[here](https://stackoverflow.com/questions/11779252/entity-attribute-value-table-design/11972029#11972029)和[here](https://dba.stackexchange.com/questions/15199/inventory-database-structure-when-inventory-items-have-varying-attributes/15211#15211)）EAV 是邪恶的，除非它不是。这些罕见的例外之一是在产品目录的情况下，您正在跟踪产品的属性并且这些属性不是那么有趣（*对您的系统而言！*）除非您需要检索这些属性并将它们打印出来产品网页或比较网格等。

考虑这样的设计：

![在此处输入图像描述](../Images/0b1c43d6eeb7b7d8108157f947f9447d.png)

您在这样的模型中所做的是描述给定类别中的产品应该具有哪些属性，这些属性可能具有哪些值，然后每个特定产品对每个属性都具有哪些值。

这种设计确实具有 EAV 施加的所有常见限制。但是，如果您想问这样的问题：“哪些珠子的直径为 8 毫米？” 这很简单。

# facebook - 没有登录用户的 Facebook App Token 到 Page Token

> ID：14194844
> 
> 赞同：-1
> 
> 时间：2013-01-07T11:19:20.840
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

拥有一个应用程序令牌，一个使用 manage_pages 权限授权应用程序的用户，我如何访问这个特定用户是管理员的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:27:40.637

你不能，你需要一个用户访问令牌来获得该权限，如文档中所述

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/) （查找帐户）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:29:30.233

您不需要应用程序令牌，而是需要用户访问令牌来访问这些页面

# objective-c - 添加应在所有视图控制器中可见的按钮

> ID：14194847
> 
> 赞同：0
> 
> 时间：2013-01-07T11:19:32.993
> 
> 标签：objective-c, ios, uinavigationcontroller, uibutton

如何制作在所有视图控制器中都应该可见的按钮或任何视图，并且可以从所有视图控制器调用其操作？视图控制器的弹出和推送应该在该按钮后面进行。我没有任何代码，但我有一个参考应用程序 Moise Bently，在这个应用程序的右上角有一个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:25:50.540

尝试将 _yourView/button 添加到您的窗口中...您可以在需要时执行此`didFinishLaunchingWithOptions`操作`[self.window bringSubviewToFront:_yourView]`..如果您在其上添加一些其他视图。

# java - 在低级别查询 SqlJet

> ID：14194851
> 
> 赞同：0
> 
> 时间：2013-01-07T11:19:35.897
> 
> 标签：java, api, sqlite, sqljet

我遇到了以下问题，不知道如何解决。我正在使用 SqlJet 来访问和管理一个小型 Sqlite DB。这个库的简单性令人惊讶！但是现在，我必须执行一个无法使用库提供的方法表达的复杂查询。在网站上，他们说

> SQLJet 不支持 SQL 查询；有一个 API 可以在较低级别上使用数据库

我想知道，你们中的任何人都知道执行 SQL 查询的低级 API 是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:30:56.170

据我从研究中得知，SQLJet 中不支持任意 SQL 查询。我最初以为它是一个 sqlite 包装器，它不是，所以也没有办法使用 JDBC。除了按名称和索引查找行之外，他们在页面上讨论的“低级”API 似乎只是直接访问内部数据库表示，如[本文](http://sqlite.1065341.n5.nabble.com/ANN-SQLJet-1-0-0-released-td52506.html#message52508)所述。

快速浏览一下 JavaDoc 和源代码，可能是 SqlJetDb.getSchema() 和 getTable() 方法。没有适当的 API 文档或教程，甚至在问题跟踪器中对此进行了投诉。

也许你可以描述你想做什么。尽管 SQLJet 提供的接口有限，但还是有办法做到这一点，或者恐怕我无能为力。直接联系开发人员也是个好主意，因为在其他地方似乎没有太多信息可以找到。

# iphone - 如何检测 NSInteger 是否在 10 到 20 之间

> ID：14194854
> 
> 赞同：-5
> 
> 时间：2013-01-07T11:19:39.177
> 
> 标签：iphone, objective-c, ios, xcode, nsinteger

嗨，我尝试了多种结合我的知识和互联网知识的方法，但我找不到检查 NSInteger 是否在 10 到 20 之间的方法。

会是这样吗？（它没有工作）

```
if (FXVolumeSlider.value == 10-20) {} 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T11:20:32.637

包括的...

```
if (FXVolumeSlider.value >= 10 && FXVolumeSlider.value <= 20) {} 
```

独家的...

```
if (FXVolumeSlider.value > 10 && FXVolumeSlider.value < 20) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:25:35.237

试试这个：

```
 if(FXVolumeSlider.value>=10 &&  FXVolumeSlider.value<=20)
{

  //your stuff
} 
```

# iphone - 如何检测 UIImageView 的宽度和高度

> ID：14194855
> 
> 赞同：0
> 
> 时间：2013-01-07T11:19:39.740
> 
> 标签：iphone, objective-c, ios, uiimageview

我正在寻找检测图像的宽度和高度并将这些尺寸传递到以下代码中：

```
 UIImageView *imgView=[[UIImageView alloc] initWithFrame:CGRectMake(25, 5, imgView.size.width, imgView.size.width)]; 
```

要么是我的语法有问题，要么是这样做的错误方法。任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:22:08.860

做：

```
UIImage *someImage = [UIImage imageNamed:@"someImage.png"];
UIImageView *someImageView = [[UIImageView alloc] initWithImage:someImage];
someImageView.frame = CGRectMake(0, 0, someImage.size.width, someImage.size.height); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:24:06.820

试试这个

```
UIImage *image = [UIImage imageNamed:@"image.png"];
UIImageView *imgView = [[UIImageView alloc] initWithImage:image];
imgView.frame = CGRectMake(0, 0, image.size.width, image.size.height); 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:24:37.467

您可以从`UIImage` `size`属性中获取图像的大小。也许是这样的：

```
UIImage *img = [UIImage imageNamed:@"image.png"];
UIImageView *imgView=[[UIImageView alloc] initWithFrame:CGRectMake(25, 5, img.size.width, img.size.width)]; 
```

或者你可以：

```
UIImageView *imgView=[[UIImageView alloc] initWithImage:img]; 
```

它会自动调整大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:26:48.473

我怀疑图像视图没有宽度或高度，因为您刚刚分配并初始化了它。initWithFrame 初始化方法需要一个浮点值，因此您无法查询 imgView 以返回宽度和高度的值，因为它尚未确定。

我通常会使用初始化程序 initWithImage。然后在初始化后修改imageview的宽高。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T11:34:17.603

如果您想设置最大宽度或高度，请尝试此代码。它将控制大小以及您可以动态设置图像视图的框架。

```
CGSize size = image.size;

// Here Maximum width of image is 220 

    if (size.width > 220)
    {
        size.height /= (size.width / 220);
        size.width = 220;
    }
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)];
imageView.image = image;

// For layer mask or round corner

imageView.layer.cornerRadius = 5.0;
imageView.layer.masksToBounds = YES; 
```

# python - ImportError: No module named django.core.wsgi for uwsgi

> ID：14194859
> 
> 赞同：25
> 
> 时间：2013-01-07T11:19:56.563
> 
> 标签：python, django, uwsgi

我正在为我的 Django(version =1.4) 项目使用 uwsgi，但是如果我运行则会出现错误

```
uwsgi --ini django.ini 
```

```
从 django.core.wsgi 导入 get_wsgi_application
    ImportError：没有名为 django.core.wsgi 的模块

```

但我可以按如下方式导入 django.core.wsgi：

```
>>> import django.core.wsgi 
```

django.ini 文件：

```
[uwsgi]
chdir=/path/to/my/app
模块=app.wsgi：应用程序
大师=真
真空=真
最大请求数=5000
套接字=127.0.0.1:9000

```

wsgi.py

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "app.settings")

# This application object is used by any WSGI server configured to use this
# file. This includes Django's development server, if the WSGI_APPLICATION
# setting points here.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-07-09T19:22:47.570

如果您在两者上都安装了 gunicorn`sudo apt-get install gunicorn`和`(venv) pip install gunicorn`，请使用`sudo apt-get remove gunicorn`并重新启动您的虚拟环境。这样，它对我有用。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-12-19T15:25:41.907

`ImportError: No module named django.core.wsgi`当 uwsgi 尝试读取 wsgi.py 文件时，通常会出现该错误，并出现以下行：

```
from django.core.wsgi import get_wsgi_application 
```

它找不到这些模块，因为没有安装 Django，或者如果安装了它，它不在 PYTHONPATH 中。

如果您的项目在 virtualenv 中并且 Django 仅安装在此 virtualenv 中，则 Django 模块的路径不在[PYTHONPATH](https://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH)中，因此 Python 找不到它。

如果你好奇，可以在文件中插入以下代码`wsgi.py`，并查看 PYTHONPATH：

```
import os
print '===== sys.path / PYTHONPATH ====='
for k in sorted(os.environ.keys()):
    v = os.environ[k]
    print ('%-30s %s' % (k,v[:70])) 
```

如果您运行安装在 virtualenv 中的本地版本的 uwsgi，那么路径将设置正确，但如果您运行全局版本的 uwsgi，它通常不会正确设置 PYTHONPATH。

你可以告诉 uWSGI 到 virtualenv 的路径，它会找出正确的 PYTHONPATH。只需使用`--virtualenv`命令行参数，例如：

```
uwsgi --http :8001 --module wsgi --virtualenv /home/jdoe/myvirtualenv 
```

（以下参数与 --virtualenv 完全相同：--venv、--home、-H）

## 令人惊讶的是，设置 $VIRTUAL_ENV 对 PYTHONPATH 没有影响

奇怪的是，如果你不使用 --virtualenv 参数，环境变量`$VIRTUAL_ENV`将被正确设置。通过插入 wsgi.py 进行测试：

```
print os.environ['VIRTUAL_ENV'] 
```

这将打印：

```
/home/jdoe/myvirtualenv 
```

但是 PYTHONPATH设置*不*正确，并且不包含来自 virtualenv 的任何内容。

我无法解释为什么会这样。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-07T12:42:11.117

如果你使用 virtualenv 尝试添加`home`到 django.ini：

```
home=/path/to/venv/ 
```

通过网络浏览器对其进行测试：

```
uwsgi --ini django.ini --protocol=http 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-31T08:44:16.310

就我而言，我为 Python3 安装了 Django 应用程序和其他所有东西，但 uwsgi 使用的是 Python2。运行uwsgi的时候检查一下log是用Python2还是Python3，如果不一致就重新安装uwsgi。在 uwsgi 启动日志中查找类似于以下行的行。

`Python version: 3.4.3 (default, Oct 14 2015, 20:31:36) [GCC 4.8.4]` VS `Python version: 2.7.6 (default, Jun 22 2015, 18:01:27) [GCC 4.8.2]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-17T09:42:54.073

由于您接受了提到的答案`virtualenv`，因此您似乎在使用它。在这种情况下，请确保它`django`已安装在您的`virtualenv`目录中（例如`venv`）。

`pip`您可以从下单独安装它`virtualenv`或手动创建符号链接（如果您在类 Unix 系统上）到`venv`的站点包

```
ln -s /usr/path_to_django venv/lib/python2.7/site-packages/django 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-25T01:40:02.173

我收到此错误是因为我在不允许符号链接的 virtualbox 共享文件夹中创建了虚拟环境。我收到了一些错误，但似乎一切正常，所以我继续，直到我收到这个错误。当我重新创建我的虚拟环境，确保没有错误并将 uwsgi 指向该文件夹时，问题就解决了。

# javascript - 淘汰赛展开复杂对象

> ID：14194862
> 
> 赞同：3
> 
> 时间：2013-01-07T11:19:58.897
> 
> 标签：javascript, jquery, jquery-ui, knockout.js, knockout-2.0

我有以下代码片段

```
function Person() {
    var id;
    var name;
    var loginName;
    var email;
}

function Substitude() {
    this.substitude = ko.observable(new Person());
    this.subBegin = ko.observable(Date());
    this.subEnd = ko.observable(Date());
}

function SampleSubstitude() {
    var testing = ko.observable(new Substitude());
    var tester = getPerson(88,"Alpha Tester","a.tester","a.tester@example.com");

    testing.substitude = tester;

    return ko.utils.unwrapObservable(testing);
}

function getPerson(id, name, login, email) {
    var person = ko.observable(new Person());
    person.id = id;
    person.name = name;
    person.loginName = login;
    person.email = email;

    return ko.utils.unwrapObservable(person);

} 
```

这是我的视图模型：

```
function AbsenceRequestModel() {
    this.delegations = ko.observableArray();
    this.addsubstitudeclick = function () {
        var raw = SampleSubstitude();
        var obj = ko.utils.unwrapObservable(new raw());
        this.delegations.push(obj);
    }
}; 
```

不幸的是，推送到我的数组的所有值都是空的。谁能给我一个提示，这里有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T11:27:57.020

如果所有值都是可观察的，那么您不需要在`Person`构造函数和对象之间使用代理方法：

```
function Person(id, name, login, email) {
    var id = ko.observable(id);
    var name = ko.observable(name);
    var loginName = ko.observable(login);
    var email = ko.observable(email);
}

var person = new Person(1, "Name", "LoginName", 'aaaa@abc.cde');
>> ko.toJS(person) 
{
    id : 1,
    name : "Name",
    loginName : "LoginName",
    email : "aaaa@abc.cde"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:22:07.857

您应该为该人的可观察操作设置值

```
person().id = id;
person().name = name;
person().loginName = login;
person().email = email; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:33:24.780

问题解决了：

```
function Person(id, name, login, email) {
    this.id = ko.observable(id);
    this.name = ko.observable(name);
    this.loginName = ko.observable(login);
    this.email = ko.observable(email);
} 
```

变量之前被设置为私有，没有注意到它。谢谢大家的帮助。

# node.js - 使用 node + express 解压 POST 正文

> ID：14194864
> 
> 赞同：8
> 
> 时间：2013-01-07T11:20:01.383
> 
> 标签：node.js, express, zlib

我有一个简单的节点应用程序，应该从客户端写入指标。客户端以使用 python 的 zlib 模块压缩的 json 格式发送指标，我正在尝试添加一个中间件以在快速 bodyParse 发生之前解压缩请求帖子。

我的中间件只是 express 默认提供的中间件：

```
app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser('your secret here'));
    app.use(express.session());
    app.use(app.router);
    app.use(require('less-middleware')({ src: __dirname + '/public' }));
    app.use(express.static(path.join(__dirname, 'public')));
}); 
```

我尝试添加一个简单的中间件来获取数据然后解压缩它：

```
app.use(function(req, res, next) {
    var data = '';
    req.addListener("data", function(chunk) {
        data += chunk;
    });

    req.addListener("end", function() {
        zlib.inflate(data, function(err, buffer) {
            if (!err) {
                req.body = buffer;
                next();
            } else {
                next(err);
            }
        });
    });
}); 
```

问题出在 zlib.inflate 我收到此错误：

```
Error: incorrect header check 
```

数据已使用 python 的 zlib 模块压缩：

```
zlib.compress(jsonString) 
```

但似乎解压缩、膨胀、gunzip 都不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T14:59:43.810

我自己找到了解决方案，问题出在这段代码上：

```
req.addListener("data", function(chunk) {
    data += chunk;
}); 
```

似乎连接请求数据不正确，所以我将中间件切换为：

```
app.use(function(req, res, next) {
    var data = [];
    req.addListener("data", function(chunk) {
        data.push(new Buffer(chunk));
    });
    req.addListener("end", function() {
        buffer = Buffer.concat(data);
        zlib.inflate(buffer, function(err, result) {
            if (!err) {
                req.body = result.toString();
                next();
            } else {
                next(err);
            }
        });
    });
}); 
```

连接缓冲区完美运行，我现在可以解压缩请求正文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-29T07:51:55.827

我知道这是一个非常晚的响应，但是使用 module [`body-parser`](https://www.npmjs.com/package/body-parser)，它将：

> 返回仅解析 json 的中间件。此解析器接受正文的任何​​ Unicode 编码，并支持 gzip 和 deflate 编码的自动膨胀。

```
var bodyParser = require('body-parser');
app.use( bodyParser.json() );       // to support JSON-encoded bodies 
```

# c# - WinForms桌面应用程序中的线程？

> ID：14194866
> 
> 赞同：-1
> 
> 时间：2013-01-07T11:20:09.410
> 
> 标签：c#, winforms, multithreading

我有一个绑定到数据网格的数据集。在数据集中，有一个保存数据状态的列。在页面加载时，它具有“待定”值。

现在，当我与 3rd 方软件交互时，它的值会更新“成功”或“失败”。但是当所有事务都完成时，这些更改会反映在数据网格上。

我想根据事务显示所有更新的结果..使用线程。

请给我一个代码。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:51:48.760

您不能从另一个线程更新 DataSet。如果这样做，应用程序将导致跨线程操作异常。我看到的最好的方法是在后台线程中计算所需的状态，但在主线程中更新 DataSet。这不应影响您的应用程序性能。这是一些示例代码：

```
...
            ThreadStart ts = new ThreadStart(UpdateStatuses);
            Thread thread = new Thread(ts);
            thread.Start();
...

        void UpdateStatuses() { 
            // calculate statuses ;
            BeginInvoke(new MethodInvoker(delegate {
                for(int i = 0; i < table.Rows.Count; i++)
                    table.Rows[i]["Status"] = someValue;
            }));
        } 
```

# iphone - NSDate 查找距今天最近的日期

> ID：14194870
> 
> 赞同：7
> 
> 时间：2013-01-07T11:20:14.160
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个排序的 NSDates 数组。有人可以帮助我如何在数组中找到最接近当前日期的日期吗？

我需要获取最接近日期的索引，以便可以在表格视图中滚动到该日期。

例如，如果我有 2013 年 1 月 1 日、2013 年 1 月 6 日、2013 年 1 月 9 日和 2013 年 1 月 10 日。我想要 2013 年 1 月 6 日的索引。

希望这是有道理的。谢谢您的帮助。

更新：

我正在尝试这个：

```
 NSTimeInterval interval = 0;
    NSUInteger indexOfDate;
    for (NSDate * date in m_arEventsSorted)
    {               
        if(abs([date timeIntervalSinceDate:[NSDate date]]) < interval)
        {
            interval = abs([date timeIntervalSinceDate:[NSDate date]]);
            indexOfDate = [m_arEventsSorted indexOfObject:date];
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T11:25:11.327

`NSDate`提供返回(a 'd ) 的`timeIntervalSinceNow`( [reference](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html) ) 方法。只需使用此功能即可找到每个日期与*现在*之间的最小差异。`NSTimeInterval``typedef``double``fabs()`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T11:29:46.160

我会推荐 timeIntervalSinceDate: 函数。像这样的东西（代码未经测试！）：

```
NSDate *currentDate = [NSDate date];
double min = [currentDate timeIntervalSinceDate:[array objectAtIndex:0]];
int minIndex = 0;
for (int i = 1; i < [array count]; ++i)
{
     double currentmin = [currentDate timeIntervalSinceDate:[array objectAtIndex:i]];
     if (currentmin < min) {
           min = currentmin;
           minIndex = i;
     }
} 
```

您可以从 minIndex 获取最接近的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:29:01.090

这应该有效：

```
NSDate *closestDate;
for( NSDate *tempDate in dates ){
    NSInteger tempDateInterval = [tempDate timeIntervalSinceNow];
    //to work with positive and negative time difference
    if( tempDateInterval < 0 ){
        tempDateInterval *= -1;
    }
    NSInteger closestDateInterval = [closestDate timeIntervalSinceNow];
    if( closestDateInterval < 0 ){
        closestDateInterval *= -1;
    }
    if( tempDateInterval < closestDateInterval ){
        closestDate = tempDate;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:29:27.893

我敢肯定有很多方法可以给猫剥皮，但我个人最喜欢的剥皮机制是将日期转换为纪元时间，这样你就知道你在比较橘子和橘子，只需将日期比较为秒。这也消除了时区问题。

如果您需要确保选择最接近日期的时间，您可能需要使用时间的 00:00:01 和 23:59:59 测试日期并使用最小的结果。

采用

```
long secondsToDate = [date timeIntervalSince1970]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-23T16:02:55.357

根据 Roland Keesom 的回答，这对我来说是这样的：

```
 NSDate *currentDate = [[objects objectAtIndex:0] valueForKey:@"date"];
    int minIndex = 0;
    for (int i = 1; i < [objects count]; ++i)
    {
        NSDate *tempDate = [[objects objectAtIndex:i] valueForKey:@"date"];
        NSInteger tempDateInterval = [tempDate timeIntervalSinceNow];
        if (tempDateInterval < 0) tempDateInterval *= -1;
        NSInteger closestDateInterval = [currentDate timeIntervalSinceNow];
        if (closestDateInterval < 0) closestDateInterval *= -1;
        if( tempDateInterval < closestDateInterval ){
            currentDate = tempDate;
            minIndex = i;
        }
    } 
```

`minIndex`返回`objects`数组中距今天最近的日期的索引。*

# javascript - 在 Google 地图 API 中获取最大（超过 20 个）结果

> ID：14194871
> 
> 赞同：0
> 
> 时间：2013-01-07T11:20:24.060
> 
> 标签：javascript, google-maps-api-3

我正在使用`Google maps API version 3`和文本搜索使用 javascript 的地方。

但我只得到 20 个结果。

如何获得超过 20 个结果（例如，大约 100 或 200 个）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:13:31.060

默认值为 20，但最多可有 60 个。但是它们将出现在后续页面上，请参阅此处的[文档和此处](https://developers.google.com/maps/documentation/javascript/places#PlaceSearchPaging)的[示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/place-search-pagination)，了解如何处理所需的分页。

# azure - 果园 NHibernate.Linq 错误

> ID：14194874
> 
> 赞同：1
> 
> 时间：2013-01-07T11:20:38.233
> 
> 标签：azure, orchardcms

我正在尝试将最新的 Twitter 模块添加到 Orchard 应用程序（托管在 Azure 上），但是注册后出现以下错误：

无法加载文件或程序集“NHibernate.Linq，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

如果我取消注册 Twitter 模块，则不会发生错误，并且我在模块中看不到任何对 NHibernate.Linq 的引用。DefaultContentQuery 类中发生错误。

知道发生了什么吗？

**更新**

啊，我想我已经发现了。该模块在其自己的 bin 文件夹中引用 Orchard.Core 和 Orchard.Framework，因此我将其更改为引用源项目。大概它是用旧版本编译的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T06:11:14.823

就我而言，这是 Cyber​​Stride.Contacts 和 Mello.ImageGallery 模块中的一个错误（在引用中）。他们直接引用了 Orchard dll，而不是 csproj 文件。

根据一个简单的 grep 命令快速检测到...

`find . -iname "*.csproj" | xargs grep -i "orchard*.dll"`

错误的例子：

```
<HintPath>..\..\bin\Orchard.Core.dll</HintPath> 
```

正确的例子：

```
<ProjectReference Include="..\..\Core\Orchard.Core.csproj"> 
```

# xslt - 根据条件将节点动态添加到节点集中

> ID：14194879
> 
> 赞同：0
> 
> 时间：2013-01-07T11:20:49.660
> 
> 标签：xslt

这是我的输入 xml 文件

```
<Collection>
<Teach>
<DeptNo>5613</DeptNo>
<DeptName>Computers</DeptName>
<SubjectNo>234</SubjectNo>
<SubjectName>XML</SubjectName>
<Teacher>Sai</Teacher>
</Teach>
<Teach>
<DeptNo>5617</DeptNo>
<DeptName>Electronics</DeptName>
<SubjectNo>789</SubjectNo>
<SubjectName>Circuits</SubjectName>
<Teacher>Hari</Teacher>
</Teach>
<Teach>
<DeptNo>5613</DeptNo>
<DeptName>Computers</DeptName>
<SubjectNo>239</SubjectNo>
<SubjectName>XSLT</SubjectName>
<Teacher>Suri</Teacher>
</Teach>
<Teach>
<DeptNo>5689</DeptNo>
<DeptName>Maths</DeptName>
<SubjectNo>749</SubjectNo>
<SubjectName>Trigonometry</SubjectName>
<Teacher>Arya</Teacher>
</Teach>
<Teach>
<DeptNo>5617</DeptNo>
<DeptName>Electronics</DeptName>
<SubjectNo>789</SubjectNo>
<SubjectName>Circuits</SubjectName>
<Teacher>Bharat</Teacher>
</Teach>
</Collection> 
```

现在我想要基于 DeptNo 的以下输出 xml 文件，如果它相同，则检查 Subjectno，如果相同，则将教师添加到主题。对主题和部门也做同样的事情。我的输出文件是

```
<Collection>
<DeptList>
<DeptNo>5613</DeptNo>
<DeptName>Computers</DeptName>
<SubjectList>
<SubjectNo>234</SubjectNo>
<SubjectName>XML</SubjectName>
<TeacherList>
<Teacher>Sai</Teacher>
</TeacherList>
</SubjectList>
<SubjectList>
<SubjectNo>239</SubjectNo>
<SubjectName>XSLT</SubjectName>
<TeacherList>
<Teacher>Suri</Teacher>
</TeacherList>
</SubjectList>
</DeptList>
<DeptList>
<DeptNo>5617</DeptNo>
<DeptName>Electronics</DeptName>
<SubjectList>
<SubjectNo>789</SubjectNo>
<SubjectName>Circuits</SubjectName>
<TeacherList>
<Teacher>Hari</Teacher>
<Teacher>Bharat</Teacher>
</TeacherList>
</SubjectList> 
</DeptList>
<DeptList>
<DeptNo>5689</DeptNo>
<DeptName>Maths</DeptName>
<SubjectList>
<SubjectNo>749</SubjectNo>
<SubjectName>Trigonometry</SubjectName>
<TeacherList>
<Teacher>Arya</Teacher>
</TeacherList>
</SubjectList>
</DeptList>
</Collection> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:04:42.550

这是一个 XSLT 2.0 样式表，可与 Saxon 9 或 AltovaXML 或 XmlPrime 或任何其他 XSLT 2.0 处理器一起运行：

```
<xsl:stylesheet version="2.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:template match="Collection">
  <xsl:copy>
    <xsl:for-each-group select="Teach" group-by="DeptNo">
      <DeptList>
        <xsl:copy-of select="DeptNo, DeptName"/>
        <xsl:for-each-group select="current-group()" group-by="SubjectNo">
          <SubjectList>
            <xsl:copy-of select="SubjectNo, SubjectName"/>
            <TeacherList>
              <xsl:copy-of select="current-group()/Teacher"/>
            </TeacherList>
          </SubjectList>
        </xsl:for-each-group>
      </DeptList>
    </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

[编辑] 如果您需要 XSLT 1.0 解决方案，您可以使用[Muechian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.xml)：

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:key name="deptNo" match="Teach" use="DeptNo"/>
<xsl:key name="deptAndSubject" match="Teach" use="concat(DeptNo, '|', SubjectNo)"/>

<xsl:template match="Collection">
  <xsl:copy>
    <!-- <xsl:for-each-group select="Teach" group-by="DeptNo"> -->
    <xsl:for-each select="Teach[generate-id() = generate-id(key('deptNo', DeptNo)[1])]">
      <DeptList>
        <xsl:copy-of select="DeptNo | DeptName"/>
        <!--  <xsl:for-each-group select="current-group()" group-by="SubjectNo"> -->
        <xsl:for-each select="key('deptNo', DeptNo)[generate-id() = generate-id(key('deptAndSubject', concat(DeptNo, '|', SubjectNo))[1])]">
          <SubjectList>
            <xsl:copy-of select="SubjectNo | SubjectName"/>
            <TeacherList>
              <xsl:copy-of select="key('deptAndSubject', concat(DeptNo, '|', SubjectNo))/Teacher"/>
            </TeacherList>
          </SubjectList>
        </xsl:for-each>
      </DeptList>
    </xsl:for-each>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

我有意注释掉 XSLT 2.0`for-each-group`指令以显示等效的基于 XSLT 1.0 键的 Muenchian 分组结构。

# c# - ASP.net 发布带有元素名称前缀“ct100$”的表单

> ID：14194886
> 
> 赞同：2
> 
> 时间：2013-01-07T11:21:18.190
> 
> 标签：c#, jquery, asp.net, .net

我正在编写一个带有会员登录表单的网站母版页以下是母版页的标记：

```
<form id="loginForm" action="account.aspx" method="POST">
<div class="div-topHead">
<input type="button" id="submitLogin" title="Login" value="Login" />
<input type="button" id="forgetPW" title="Forget password" value="?" onclick="window.open('forgetpassword.aspx','_self')" />
</div>
<div class="div-topTail">
<div class="div-login">
    <div class="row-body row-def">
    <input id="input_memID" name="input_memID" runat="server" type="text" maxlength="255" />
    </div>
    <div class="row-header row-def">
    Member ID:
    </div>
</div>
<div class="div-login">
    <div class="row-body row-def">
    <input id="input_memPW" name="input_memPW" runat="server" type="password" maxlength="255" />
    </div>
    <div class="row-header row-def">
    Password:
    </div>
</div>
</div>
</form> 
```

以下是发布脚本

```
$(function(){
    $('#submitLogin').click(function(){
        var f = $('#loginForm').get(0);
        $.post("../script/loginCheck.aspx", { "memID": f.inputID.value, "memPW": f.inputPW.value }, function(data){
            var result = JSON.parse(data);
            if(result[0] == 1){
                //Login validated
                f.submit();
            } else {
                //Login is invalid
                alert(result[1]);
            }                    
        });
    });
}); 
```

问题是，当我在浏览器上打开网站时，文本输入字段名称会自动添加一个前缀“c100$”，然后从控制台我可以看到我收到以下错误 Uncaught TypeError: Cannot read property 'value' of undefined

我试图在网上查找这是怎么回事，似乎这是 .NET 自动执行的操作。然而，我找不到让我的帖子脚本正常工作的方法。

我不需要保留没有 ct100 的 ID，只要发布脚本可以工作，我尝试更改为 f.ct100$input_memID 等但不工作

还尝试了 clientIDMode="Static" 但无法使其正常工作，或者浏览器抱怨 clientIDMode 不是 <% PAGE %> 的属性

那么有人可以请教我该怎么办吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:23:21.557

**[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)**是一个可以添加到 *单个控件*的属性。

此外（来自 MSDN）：

> 您可以通过在网站的 Web.config 文件中设置 pages 元素来为网站中的所有页面设置 ClientIDMode 值。您可以在 @ Page 指令中设置页面的 ClientIDMode 值。

例如：

```
<div id="dvDiv" runat="server" clientidmode="Static" /> 
```

将使 div 的名称在客户端和服务器端都为“dvDiv”。

所以`$("#dvDiv")`在客户端可以正常工作。

关于您的最后一句话，请确保您将其放入`<%@ Page %>` 而不是放入`<% Page %>`（注意`@`标志）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:33:18.740

您可以简单地使用此 jquery 选择器来获取您想要的任何元素：-

```
$("[id$='yourElementID']")// Select an Element whose ID ends with yourElementID 
```

例子 ：-

```
 $("[id$='submitLogin']").click(function(){
        var f = $("[id$='loginForm']").get(0);
     .................... 
```

[在此处查看详细信息](http://api.jquery.com/attribute-ends-with-selector/#attributevalue)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:33:24.693

尽管 Blachshma 的回答非常合理并且会解决您的问题，但我建议您简单地取消`runat="server"`输入的属性。

[`HtmlInputText`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlinputtext.aspx)如果您不需要从页面代码隐藏中引用它们，我看不出您有任何真正的理由将它们作为对象存在。

编辑：根据评论，如果您确实需要从代码隐藏中访问它们，那么最好将 ClientIDMode 更改为 Static。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:33:46.497

如果 Javascript 代码包含在 aspx 标记中，您也可以使用

```
var f = $('#<%= loginForm.ClientID %>').get(0); 
```

# ruby-on-rails-3.1 - Rails 包含多个表

> ID：14194887
> 
> 赞同：0
> 
> 时间：2013-01-07T11:21:18.080
> 
> 标签：ruby-on-rails-3.1

请任何人帮助我：

我使用 Rails 开发了一个应用程序。

我的**模型**如下所示：

```
 class Score < ActiveRecord::Base
      belongs_to :song
      belongs_to :user
    end

    class Song  < ActiveRecord::Base
      has_one :gsong
      has_many :scores
    end

    class Gsong < ActiveRecord::Base
      belongs_to :song
    end

    class user < ActiveRecord::Base
      has_many :scores
    end 
```

我的`ScoresController`：

```
 class scoresController < ApplicationController

     def index
  id = current_user.id
  @scores = score.where(:user_id => id)
      render :json => {
              :scores => @scores.as_json(:include => {:gsong => { :include => { :song => { :only => [:title, :album]}}, :only => [:artwork]}}, :only => [:song_id, :score]),
}
end 
```

它在功能上运行良好，但它在数据库中进行了太多查询，如下所示：

```
 score Load (0.1ms)  SELECT `scores`.* FROM `scores` WHERE `scores`.`user_id` = 3
      Gsong Load (0.1ms)  SELECT `gsongs`.* FROM `gsongs` WHERE `gsongs`.`id` = 8 LIMIT 1
      Song Load (0.1ms)  SELECT `songs`.* FROM `songs` WHERE `songs`.`id` = 8 LIMIT 1
      Gsong Load (0.1ms)  SELECT `gsongs`.* FROM `gsongs` WHERE `gsongs`.`id` = 2 LIMIT 1
      Song Load (0.1ms)  SELECT `songs`.* FROM `songs` WHERE `songs`.`id` = 2 LIMIT 1
      Gsong Load (0.1ms)  SELECT `gsongs`.* FROM `gsongs` WHERE `gsongs`.`id` = 1 LIMIT 1
      Song Load (0.1ms)  SELECT `songs`.* FROM `songs` WHERE `songs`.`id` = 1 LIMIT 1
      Gsong Load (0.1ms)  SELECT `gsongs`.* FROM `gsongs` WHERE `gsongs`.`id` = 11 LIMIT 1
      Song Load (0.1ms)  SELECT `songs`.* FROM `songs` WHERE `songs`.`id` = 11 LIMIT 1
      Gsong Load (0.1ms)  SELECT `gsongs`.* FROM `gsongs` WHERE `gsongs`.`id` = 12 LIMIT 1
      Song Load (0.1ms)  SELECT `songs`.* FROM `songs` WHERE `songs`.`id` = 12 LIMIT 1
      Gsong Load (0.1ms)  SELECT `gsongs`.* FROM `gsongs` WHERE `gsongs`.`id` = 23 LIMIT 1
      Song Load (0.1ms)  SELECT `songs`.* FROM `songs` WHERE `songs`.`id` = 23 LIMIT 1 
```

如何使用单个或两个查询来获取所有这些数据，例如：

```
 Gsong Load (0.1ms)  SELECT `gsongs`.* FROM `gsongs` 

     Song Load (0.3ms)  SELECT `songs`.* FROM `songs` WHERE `songs`.`id` IN (8,2,1,11,12,23) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:59:11.713

我会考虑使用 ActiveModel 序列化程序。我想你会发现它会让复杂的 JSON 变得轻而易举

有一个很棒的截屏视频

[http://railscasts.com/episodes/409-active-model-serializers](http://railscasts.com/episodes/409-active-model-serializers)

# java - 在 Java 中以区域设置敏感的方式验证十进制数

> ID：14194888
> 
> 赞同：7
> 
> 时间：2013-01-07T11:21:22.410
> 
> 标签：java, validation

> **可能的重复：**
> [安全和区域敏感地解析数字](https://stackoverflow.com/questions/11591810/parsing-numbers-safely-and-locale-sensitively)

如何以区域设置敏感的方式验证包含十进制数字的字符串？NumberFormat.parse 允许太多，而 Double.parseDouble 仅适用于英语语言环境。这是我尝试过的：

```
public static void main(String[] args) throws ParseException {
    Locale.setDefault(Locale.GERMAN);

    NumberFormat numberFormat = NumberFormat.getNumberInstance(Locale.getDefault());
    Number parsed = numberFormat.parse("4,5.6dfhf");
    System.out.println("parsed = " + parsed); // prints 4.5 instead of throwing ParseException

    double v = Double.parseDouble("3,3"); // throws NumberFormatException, although correct
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:33:54.163

关于

```
Number parsed = numberFormat.parse("4,5.6dfhf"); 
```

问题，您可以使用**NumberFormat.parse(String source, ParsePosition pos)**并检查它停止解析的位置是否确实是字符串的最后一个位置。

此外，在 4.5.6 问题上，您可以尝试通过**setGroupingUsed(boolean newValue)**设置分组，因为我认为这是由“。”产生的问题。字符是语言环境中的分组字符。

它应该是这样的

```
NumberFormat numberFormat = NumberFormat.getNumberInstance(Locale.getDefault());
numberFormat.setGroupingUsed(false);
ParsePosition pos;
String nString = "4,5.6dfhf";

Number parsed = numberFormat.parse(nString, pos);
if (pos.getIndex() == nString.length()) // pos is set AFTER the last parsed position
   System.out.println("parsed = " + parsed);
else
   // Wrong 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:30:08.860

从您上面的评论中，您可以使用：

```
String input = "3,3"; // or whatever you want
boolean isValid = input.matches("^\\d+([.,]\\d+)?$");
double value = Double.parseDouble(input.replaceAll(",", ".")); 
```

如果分隔符可以是逗号以外的其他内容，只需将其添加到方括号中：

```
double value = Double.parseDouble(input.replaceAll("[,]", ".")); 
```

# android - 在 Android 上的 WebView 中播放本地视频

> ID：14194890
> 
> 赞同：7
> 
> 时间：2013-01-07T11:21:32.037
> 
> 标签：android, html, video, webview, local

我正在构建一个`WebView`应该播放视频的应用程序，该视频保存在本地。奇怪的是，视频播放器无法处理本地视频文件。它确实播放保存在服务器上的视频。

本地文件（html 和视频）保存在一个文件夹中`assets/html_test`

这是文件。

**HTML**

```
<div class="video-container">
  <p>Server</p>
  <video poster="video/star.png" controls>
    <source src="http://broken-links.com/tests/media/BigBuck.m4v" />
  </video>
</div>

<div class="video-container">
  <p>local</p>
  <video poster="video/star.png" controls>
    <source src="BigBuck.m4v" />
  </video>
</div> 
```

**Activity 中的 onCreate**

```
WebView browser = (WebView) findViewById(R.id.browser);

WebSettings webSettings = browser.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setPluginState(WebSettings.PluginState.ON_DEMAND);
webSettings.setAllowFileAccessFromFileURLs(true);

browser.setWebChromeClient(new WebChromeClient());

browser.loadUrl("file:///android_asset/html_test/video.html"); 
```

第一个视频有效，第二个视频无效。我为 尝试了不同的值`source`，但它们都不适合我：

```
<source src="BigBuck.m4v" />
<source src="file:///android_asset/html_test/BigBuck.m4v" /> 
```

不确定这是否相关，但只要我按下播放键，就会`logcat`显示：

```
01-07 12:19:18.073: E/MediaPlayer(32542): error (1, -2147483648)
01-07 12:19:18.073: E/MediaPlayer(32542): Error (1,-2147483648) 
```

我不知道这里有什么问题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T10:18:35.673

Slartibarfasts 帮我解决了这个问题。由于这只是一个评论，我将不得不自己发布它。

本质上这是一个权限问题。[这是他发布的链接](http://www.weston-fl.com/blog/?p=2988)。建议的文件复制方法`MODE_WORLD_READABLE`已弃用，请使用下面链接中描述的方法并将文件保存在外部存储中

我不得不将文件复制到外部存储，并在那里访问视频文件。由于在几个版本的android中外部存储的路径不同，我复制了所有相关的HTML文件（包括所有JS、图形和视频文件）。请参阅[复制文件](https://stackoverflow.com/questions/4447477/android-how-to-copy-files-in-assets-to-sdcard)，如果您有子文件夹，请向下滚动以获取答案。

以下是我的复制方法：

```
private void copyAssets(String path)
{
    String[] files = null;

    try
    {
        files = getAssets().list(path);
    } catch (IOException e)
    {
        e.printStackTrace();
    }

    if (files.length == 0)
        copyFile(path);
    else
    {
        File dir = new File(getExternalFilesDir(null), path);

        if (!dir.exists())
            dir.mkdir();

        for (int i = 0; i < files.length; i++)
        {
            copyAssets(path + "/" + files[i]);
        }
    }
}

private void copyFile(String filename)
{
    InputStream in = null;

    File file;
    OutputStream out = null;

    try
    {
        in = getAssets().open(filename);
    } catch (IOException e)
    {
        Log.e(TAG, "ERROR WITH in = getAssets().open: " + filename);
        e.printStackTrace();
    }

    file = new File(getExternalFilesDir(null), filename);

    try
    {
        out = new FileOutputStream(file);
    } catch (FileNotFoundException e)
    {
        Log.e(TAG, "ERROR WITH out = new FileOutputStream(file);");
        e.printStackTrace();
    }

    byte[] data;

    try
    {
        data = new byte[in.available()];

        in.read(data);
        out.write(data);

        in.close();
        out.close();
    } catch (IOException e1)
    {
        e1.printStackTrace();
    }
} 
```

在我的`onCreate`电话中

```
copyAssets("matrix"); 
```

矩阵是我的资产中保存所有文件和子文件夹的文件夹。

# c# - 从 FOR XML PATH 中拆分字符串

> ID：14194896
> 
> 赞同：1
> 
> 时间：2013-01-07T11:22:02.527
> 
> 标签：c#, asp.net-mvc-3

我有这个代码：

```
public class TrainingModuleProgressStateDataModelResults
{
    public IEnumerable<DataModels.Training.TrainingModuleProgressStateDataModel> TrainingModuleProgressStates { get; set; }
} 

public class TrainingModuleProgressStateDataModel
{
    public IEnumerable<UserTrainingPointsDataModel> UserTrainingPoints { get; set; }
} 
```

我需要将其拆分为：

```
public class UserTrainingPointsDataModel
{
    public virtual int InteractionType { get; set; }
    public virtual int Points { get; set; }
    public virtual string Name { get; set; }
} 
```

在我的存储库中，我从数据库中返回`RawPoints`：

```
China Incentive Program,50,6,1|India - Q2 Incentive ,50,6,4|China - Q2 Incentive,50,6,5|India Incentive Program,100,8,3|India - Q2 Incentive ,100,8,4 
```

每个集合都由 分隔，`pipe character`然后`50 = the points,6`是交互类型，`1`是 trainingmoduleid（我不再需要将其拉出）并且名称很好，名称 :)

```
string RawPoints = row["RawPoints"].ToString();
foreach (var RawPoint in RawPoints)
{
    UserTrainingPointsDataModel.Name = RawPoints.Name;???
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:50:25.773

您可以使用[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)，如下所示：

```
string rawInput = "China Incentive Program,50,6,1|India - Q2 Incentive ,50,6,4|China -     Q2 Incentive,50,6,5|India Incentive Program,100,8,3|India - Q2 Incentive ,100,8,4";
string[] rawPoints = rawInput.Split(new char[]{'|'});

List<UserTrainingPointsDataModel> points = new List<UserTrainingPointsDataModel>();

foreach(string rawPoint in rawPoints)
{
    string[] enrty = rawPoints.Split(new char[]{','});
    var point = new UserTrainingPointDataModel();
    point.Name = entry[0];
    point.Points = entry[1];
    point.InteractionType = entry[2];

    points.Add(point);  
} 
```

# asp.net-mvc-4 - ActionMailer.net mvc4 简单的 webapp 电子邮件发件人

> ID：14194900
> 
> 赞同：0
> 
> 时间：2013-01-07T11:22:25.087
> 
> 标签：asp.net-mvc-4

```
namespace ActionMailSample.Controllers
{
    public class MailController : MailerBase
    {
        //
        // GET: /Mail/

        public EmailResult SampleEmail()
        {
                From = "ExampleEmail@this.com";
                To.Add("ExampleEmail@there.com");
                Subject = "tha pikseis kolopsaro";
                return Email();<---ERROR no overload for method Email takes 0 arguments.

        }               
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T17:17:18.203

您必须输入与要发送表单的视图相同的 EmailResult 名称和视图模型。

> ```
> public class MailController : MailerBase
> {
> 
>     public EmailResult SampleEmail(mail_ViewModel model)
>     {
> 
>         To.Add("destination@email.com");
>         From = "from@email.com";
>         Subject = "Subject of Email";
>         return Email("SampleEmail", model);
>     }
> 
> } 
> ```

不要忘记在创建视图时，将 .txt 或 .html 附加到普通或 Html 电子邮件。此视图的纯文本名称将是 SampleEmail.txt，它将成为文件名 SampleEmail.txt.cshtml

在视图 (SampleEmail.txt.cshtml) 中，您可以输入如下内容：

> @model TEST.Models.mail_ViewModel
> 
> @{ 布局 = null; }
> 
> 从网站联系
> 
> 名称：@Html.Raw(Model.Nome) 电子邮件：@Html.Raw(Model.Email) 主题：@Html.Raw(Model.Subject) 消息：@Html.Raw(Model.Message)

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:00:17.343

该方法`Email()`需要一个或多个参数。请查阅该`Email()`函数的文档以查看预期内容并提供此信息。

# android - 为 VideoView 定位不同的屏幕尺寸

> ID：14194901
> 
> 赞同：1
> 
> 时间：2013-01-07T11:22:25.513
> 
> 标签：android, android-video-player, android-screen

我正在我的应用程序中开发一个启动画面，其中包括一个 VideoView，其任一维度的属性均为 fill_parent。现在，据我所知，图形在运行时与不同文件夹的渲染方式不同，并且仅适用于图像。我设计了以下代码以根据屏幕配置运行：

```
 Display mDisplay = getWindowManager().getDefaultDisplay(); 
      int w = mDisplay.getWidth();
      int h = mDisplay.getHeight();

      if (w < 480 || h < 800) {
         mVideoView.setVideoPath(...your video in assets, of low resolution...);;
      } else {
         mVideoView.setVideoPath(...your video in assets, of high resolution...);
      }
     ... 
```

（参考：[不同屏幕尺寸的VideoView](https://stackoverflow.com/questions/13574612/videoview-in-different-screen-sizes)）

现在我想知道最常见的屏幕尺寸以及我应该支持哪些屏幕尺寸，我希望我的应用程序与大多数设备兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:39:13.677

你试过这个吗？

在 res/values-xlarge/ 中使用布尔值

```
<bool name="isTabletDevice">true</bool> 
```

在 res/values 中使用

```
<bool name="isTabletDevice">false</bool> 
```

boolean tabletDeviceSize = getResources().getBoolean(R.bool.isTabletDevice);

如果（平板设备尺寸）{

```
//use tablet support videoview 
```

} 别的

{

```
//use mobile support videoview 
```

}

根据android支持屏幕

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html) ,

也可以使用 res/values-sw600dp。

（适用于 600dp 宽的平板电脑和更大的平板电脑）。

# google-apps-script - Google Apps 数据透视图不起作用？

> ID：14194902
> 
> 赞同：0
> 
> 时间：2013-01-07T11:22:25.210
> 
> 标签：google-apps-script

我正在尝试使用此处的应用程序开发人员网站上推荐的 PivotCharts 库：[https](https://developers.google.com/apps-script/notable-script-libraries) ://developers.google.com/apps-script/notable-script-libraries - 但是当我尝试复制示例代码时：

```
function createReport(){
var app = UiApp.createApplication().setWidth(700).setHeight(450).setTitle('My report');
var data =   SpreadsheetApp.openById('0AnxR7WfXrj7adFRnVEFTQ2NldGJodUtCZDF2U0hVNUE').getSheets()   [0].getDataRange().getValues();
var panel = PivotChartsLib.createColumnChart(data, 3, 4);
app.add(panel);
SpreadsheetApp.getActiveSpreadsheet().show(app);
} 
```

初始图表加载，但当您尝试旋转时，您会收到错误“类型错误：无法调用未定义的方法“应用””

我已经在不同的计算机上进行了测试，所以我认为这是图书馆本身的问题。我不确定如何访问该代码以尝试修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:24:31.090

我看到了同样的错误。然后我从 PivotCarts 库中复制了代码，它运行良好。

似乎数据透视图库 ui 需要应用函数，应该是全局作用域函数，但数据透视图的应用函数作用域是数据透视图对象。

# asp.net - EWS：如何编辑/更新现有约会？

> ID：14194904
> 
> 赞同：0
> 
> 时间：2013-01-07T11:22:29.717
> 
> 标签：asp.net, vb.net, exchange-server, exchangewebservices

我使用 EWA 在 VB.NET 中创建了一些约会。它工作正常。现在我想编辑约会（日期或主题）。

对于每次预订，我都将预订 ID 保存在预约的扩展属性中

```
 ' Create a definition for the extended property.
            Dim extendedPropertyDefinition As New EWS.ExtendedPropertyDefinition(EWS.DefaultExtendedPropertySet.Appointment, EWS.MapiPropertyType.String)
' Add the extended property to an e-mail message object named "appointment".
            appointment.SetExtendedProperty(extendedPropertyDefinition, buchungId) 
```

例如，如何选择具有正确预订 ID 的约会并编辑主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:24:14.843

您可以按具有扩展属性的项目进行搜索。你的代码可能看起来像这样（希望 c#-Code 也能帮助你，我在 VB 中有点不习惯）：

```
ExtendedPropertyDefinition prop = new ExtendedPropertyDefinition(Microsoft.Exchange.WebServices.Data.DefaultExtendedPropertySet.PublicStrings, <Name>, MapiPropertyType.String);

SearchFilter filter = new SearchFilter.IsEqualTo(prop, "SearchValue");

FolderId folder = new FolderId(WellKnownFolderName.Inbox)

FindItemsResults<Item> result = service.FindItems(folder, filter, new ItemView(10)); 
```

如果您的“buchungid”是独一无二的，`result.Items`如果它在收件箱中，则应该有一个项目。

# .net - 在 .NET 应用程序中解析 SAP Login Ticket 时，EvalPortalTicket 返回错误代码 9

> ID：14194911
> 
> 赞同：1
> 
> 时间：2013-01-07T11:23:40.157
> 
> 标签：.net, interop, single-sign-on, sap

我正在尝试按照 SAP 提供的示例在 .NET 应用程序中解析 SAP Login Ticket（我从 MYSAPSSO2 cookie 获取票证字符串）。两者`sapssoext.dll`和`sapsecu.dll`都放在 System32 文件夹中，但我收到一个错误，编号为 9。

这是票证字符串

```
AjExMDAgAA1wb3J0YWw6QVRJQUFNiAATYmFzaWNhdXRoZW50aWNhdGlvbgEABkFUSUFBTQIAAzAwMAMAA1BNRAQADDIwMTMwMTA3MTAzNAUABAAAAAgKAAZBVElBQU3/AQUwggEBBgkqhkiG9w0BBwKggfMwgfACAQExCzAJBgUrDgMCGgUAMAsGCSqGSIb3DQEHATGB0DCBzQIBATAiMB0xDDAKBgNVBAMTA1BNRDENMAsGA1UECxMESjJFRQIBADAJBgUrDgMCGgUAoF0wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMTMwMTA3MTAzNDE1WjAjBgkqhkiG9w0BCQQxFgQUYsJ!74Po!/9lrPqttjZXqcfBSTAwCQYHKoZIzjgEAwQvMC0CFD55F60sUc2gyG0gZpbdtLqJ6MBkAhUAiQ87p3inLvWchkphT5Lfl7PJ1mA 
```

这是 trace.txt 文件中记录的详细信息

```
---------------------------------------------------
trc file: "trace.txt", trc level: 1, release: "720"
---------------------------------------------------
[Thr 2172] Mon Jan 07 13:51:44 2013
[Thr 2172] Call function MySapLoadTicketKey 
[Thr 2172] Ticket key as new PSE loaded 
[Thr 2172] Cleanup of function, memory PSE created 
[Thr 2172] Leave function MySapLoadTicketKey with rc = 0.
[Thr 2172] Mon Jan 07 13:52:15 2013
[Thr 2172] MySapEvalLogonTicketEx was called.
[Thr 2172] Unconverted ticket is the following: >>>AjExMDAgAA1wb3J0YWw6QVRJQUFNiAATYmFzaWNhdXRoZW50aWNhdGlvbgEABkFUSUFBTQIAAzAwMAMAA1BNRAQADDIwMTMwMTA3MTAzNAUABAAAAAgKAAZBVElBQU3/AQUwggEBBgkqhkiG9w0BBwKggfMwgfACAQExCzAJBgUrDgMCGgUAMAsGCSqGSIb3DQEHATGB0DCBzQIBATAiMB0xDDAKBgNVBAMTA1BNRDENMAsGA1UECxMESjJFRQIBADAJBgUrDgMCGgUAoF0wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMTMwMTA3MTAzNDE1WjAjBgkqhkiG9w0BCQQxFgQUYsJ!74Po!/9lrPqttjZXqcfBSTAwCQYHKoZIzjgEAwQvMC0CFD55F60sUc2gyG0gZpbdtLqJ6MBkAhUAiQ87p3inLvWchkphT5Lfl7PJ1mA=<<<
[Thr 2172] Initialized variables...
[Thr 2172] *** ERROR => Struct size 128 is not 128 [ssoxxext.c   459]
[Thr 2172] *** ERROR => MySapEvalLogonTicketEx returns 9\. [ssoxxext.c   958]
[Thr 2172] End of function MySapEvalLogonTicketEx. 
```

看来这是“ssoxxext.c”中的内部错误......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T06:11:58.213

SAP SSO EXT Lib (ssoextlib.dll) 支持两种解析登录票据的方式

1.  从类中实例化一个对象`SAPSSOEXT`并使用该`EvalPortalTicket`方法来评估登录票。
2.  使用静态方法`SAPSSOEXT.EvalSAPTicket`评估登录票

因此，根据门户发送的票据类型（如果是 SAP 或门户票据），应使用适当的方法。

欲了解更多信息[http://scn.sap.com/thread/1634545](http://scn.sap.com/thread/1634545)

# powershell - 使用 ++ 或等价物读取和增加文本文件中的数字

> ID：14194915
> 
> 赞同：3
> 
> 时间：2013-01-07T11:24:18.030
> 
> 标签：powershell

我正在尝试使用 Get-Content 从文件中读取一个数字并将其添加到一个变量中。

然后我将此数字添加到文件中的字符串中，将数字增加 1，然后再次将其保存到文件中。

我试过类似的东西：

```
$i = Get-Content C:\number.txt
$i++
Set-Content C:\number.txt 
```

number.txt的内容是：1000

但我得到这个错误：

```
The '++' operator works only on numbers. The operand is a 'System.String'.
At line:2 char:5
+ $i++ <<<< 
    + CategoryInfo          : InvalidOperation: (1000:String) [], RuntimeException
    + FullyQualifiedErrorId : OperatorRequiresNumber 
```

有没有人知道做这个操作的更好方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T13:54:01.503

短途：

```
[decimal]$i = Get-Content C:\number.txt # can be just [int] if content is always integer
$i++
Set-Content C:\number.txt $i 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T11:46:59.930

我猜你需要在递增之前将其转换为整数。

```
$str = Get-Content C:\number.txt
$i = [System.Decimal]::Parse($str)
$i++
Set-Content C:\number.txt $i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-28T13:41:30.760

让我们在一行中完成：

```
 [decimal] ( $i = Get-Content C:\number.txt ) | % {Set-Content C:\number.txt -value ($_ + 1); return ($_ + 1)} 
```

返回增加的值。$i 具有增量之前的值。

# c# - 如何在 C# 桌面应用程序的 DataGridView 中添加空白行

> ID：14194917
> 
> 赞同：1
> 
> 时间：2013-01-07T11:24:21.100
> 
> 标签：c#, datagridview, desktop-application

我正在尝试在 datagridview 中创建一些空白行。不幸的是，我无法做到这一点。

如何在网格中实现空白行？

我只是这样实现的..

```
dgvGetData.AllowUserToAddRows = true;
dgvGetData.Rows.Add(5); 
```

但事情不工作....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:00:22.387

您是否在创建行之前添加了列？如果没有，则会引发错误。

添加空行的一种简单方法是这样。首先，您需要添加列。

```
//You can assign the Column types while initializing
DataGridViewColumn d1 = new DataGridViewTextBoxColumn();
DataGridViewColumn d2 = new DataGridViewCheckBoxColumn();
DataGridViewColumn d3 = new DataGridViewImageColumn();

//Add Header Texts to be displayed on the Columns
d1.HeaderText = "Column 1"; 
d2.HeaderText = "Column 2";
d3.HeaderText = "Column 3";

//Add the Columns to the DataGridView
DataGridView1.Columns.AddRange(d1, d2, d3);

//Finally add the Rows
DataGridView1.Rows.Add(5); 
```

# android - 使用android google maps v2向地图添加标记的代码

> ID：14194918
> 
> 赞同：14
> 
> 时间：2013-01-07T11:24:21.273
> 
> 标签：android, google-maps-android-api-2

我有来自数据库的 lat&long 值。如何使用 android google map api v2 显示基于 lat&long 值的标记。在原始的 android google maps 中，我们基于概念 itemoverlay 显示标记。在 v2 中，我不知道如何显示标记。

```
 dbAdapter.open();
        Cursor points = dbAdapter.clustercall(Btmlft_latitude, toprgt_latitude,
                Btmlft_longitude, toprgt_longitude, gridsize1);
        int c = points.getCount();
        Log.d("count of points", "" + c);

        if (points != null) {
            if (points.moveToFirst()) {
                do {

                    int latitude = (int) (points.getFloat(points
                            .getColumnIndex("LATITUDE")) * 1E6);
                    int longitude = (int) (points.getFloat(points
                            .getColumnIndex("LONGITUDE")) * 1E6);

                    mapView.addMarker(new MarkerOptions().position(
                            new LatLng(latitude, longitude)).icon(
                            BitmapDescriptorFactory.defaultMarker()));

                } while (points.moveToNext());

            }
        }
        points.close();
        dbAdapter.close(); 
```

那是我的代码。我**从数据库中获取 lat&long 值**，但是如何根据 lat&long 值添加标记来映射。

我读了android google maps api v2.In，它只给出**了静态添加的标记数据**

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-07T11:35:08.833

使用**标记**类

放置在地图表面上特定点的图标。标记图标是针对设备屏幕而不是地图表面绘制的；即，它不一定会由于地图旋转、倾斜或缩放而改变方向。

标记具有以下属性：

**锚**

图像上将放置在标记的 LatLng 位置的点。这默认为图像左侧和图像底部的 50%。

**位置**

标记在地图上的位置的 LatLng 值。如果要移动标记，可以随时更改此值。

**标题**

用户点击标记时在信息窗口中显示的文本字符串。您可以随时更改此值。

**片段**

显示在标题下方的附加文本。您可以随时更改此值。

**图标**

为标记显示的位图。如果未设置图标，则会显示默认图标。您可以使用 defaultMarker(float) 指定默认图标的替代颜色。创建标记后，您将无法更改图标。

**拖动状态**

如果要允许用户拖动标记，请将此属性设置为 true。您可以随时更改此值。默认值为真。

**能见度**

默认情况下，标记是可见的。要使标记不可见，请将此属性设置为 false。您可以随时更改此值。

```
GoogleMap map = ... // get a map.
   // Add a marker at San Francisco.
   Marker marker = map.addMarker(new MarkerOptions()
       .position(new LatLng(37.7750, 122.4183))
       .title("San Francisco")
       .snippet("Population: 776733")); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-07T23:53:51.503

您必须使用`GoogleMap.addMarker(MarkerOptions);` 我在博客教程中解释过的方法：http: [//bon-app-etit.blogspot.be/2012/12/add-informationobject-to-marker-in.html](http://bon-app-etit.blogspot.be/2012/12/add-informationobject-to-marker-in.html)

在此博客上，您会发现更多关于新 Maps API 的帖子：

*   将地图移动到当前位置或某个位置
*   创建自定义信息窗口
*   将地理数据或对象与标记相关联

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T16:33:04.180

我猜问题是您将纬度/经度值乘以 1E6 而不是将它们除以 1E6。如果您存储的值来自 GeoPoints，那可能是您的问题。否则，您添加标记的方式很好，应该可以工作。

即您传递给 new LatLng() 的 lat/lng 值应该看起来像 45.4,-95.5 NOT 45400000,-95500000

查看以下代码：

```
//mMap is a GoogleMap and point is a GeoPoint
this.mMap.addMarker(getMarker(point, drawableId)) 
```

...

```
public MarkerOptions getMarker(GeoPoint point, int drawableId)
{
    return new MarkerOptions()
    .position(new LatLng(point.getLatitudeE6() / 1000000.0, point.getLongitudeE6() / 1000000.0))
    .icon(BitmapDescriptorFactory.fromResource(drawableId));
} 
```

# google-chrome - 如何使用 Selenium Webdriver 在没有 EULA 的情况下启动 ChromeDriver.exe？

> ID：14194920
> 
> 赞同：1
> 
> 时间：2013-01-07T11:24:29.770
> 
> 标签：google-chrome, selenium, webdriver, customization, eula

> **可能重复：**
> [如何在没有 EULA 的情况下启动 ChromeDriver.exe？](https://stackoverflow.com/questions/9936070/how-to-start-chromedriver-exe-without-eula)

当我创建 ChromeDriver 时，它总是会弹出“Google Chrome EULA”并显示两个按钮：“接受并运行”和“取消”。我希望这是一个自动化测试，所以用户点击是不可能的。

请建议我如何在没有 EULA 的情况下使用 ChromeDriver？

# php - 在 codeigniter 中上传照片无法按预期工作

> ID：14194921
> 
> 赞同：-2
> 
> 时间：2013-01-07T11:24:31.927
> 
> 标签：php, codeigniter

无法上传照片。PHP 给出错误 您没有选择要上传的文件。视图中的代码如下

```
 <?php echo form_open_multipart('upload/do_upload_member_photo');?>
                                    <div class="tab_content" id="tab2" style="display: none;">
                                      <input type="file" id="file1" name="file1" style="">
                                      <a href="#" onclick="openFileOption();return;"> <div class="one">Upload Photo / Video</div></a>
                                       <a href="#">   <div class="two">Create Photo Album</div></a>
                                       <textarea name="post" placeholder="What's on your mind?" style="margin: 0px; width: 437px; height: 39px; border:1px solid #999"></textarea>
                                       <button type="submit" class="post_button" style="float:right; color:#fff">Post</button>
                                        </div>
                                 </form> 

<script>
function openFileOption()
{
document.getElementById("file1").click();
}
</script> 
```

控制器中的代码是

```
function do_upload_member_photo()
    {       
        $this->load->helper(array('form', 'url'));

        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '2000';
        $config['width']  = '150';
        $config['height']  = '150';
        $config['maintain_ration'] =TRUE;
        $config['overwrite']=TRUE;
        $config['file_name'] = $_FILES['file1']['name'][0];;

        if(!file_exists('./uploads/' . $this->session->userdata('user_id')))
        {
            mkdir('./uploads/' . $this->session->userdata('user_id'), 0777);
        }

        $config['upload_path'] = './uploads/'.$this->session->userdata('user_id');

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

            print_r($error);
        }
        else
        {
            $data = array('upload_data' => $this->upload->data());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:38:27.270

`$this->upload->do_upload()`默认情况下，此功能搜索带有名称的文件输入，`userfile` 但是您的文件输入名称是`file`

因此您需要将其更改为`userfile`或将文件输入名称作为参数传递给上传函数`$this->upload->do_upload('file1')`

ref : [文件上传库](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

# javascript - Google Picker API 登录

> ID：14194924
> 
> 赞同：4
> 
> 时间：2013-01-07T11:24:41.710
> 
> 标签：javascript, firefox, internet-explorer-10, google-picker

我在使用 Google Picker 时遇到了一些我似乎无法解决的问题。

首先，我在通过谷歌选择器窗口登录我的谷歌账户时遇到问题（如[https://groups.google.com/forum/#!topic/google-picker-api/3VXqKO1BD5g](https://groups.google.com/forum/#!topic/google-picker-api/3VXqKO1BD5g)和其他地方报告的那样）。简而言之，选择器可以完美运行，直到它从登录操作返回为止。登录后无法加载选择器视图。采取的操作如下：

1.  打开谷歌选择器
2.  接收未登录页面，带有登录按钮。
3.  按钮为谷歌登录打开一个新窗口。
4.  输入详细信息并登录。登录成功。
5.  登录窗口关闭，焦点返回到谷歌选择器，但无法识别登录，而是收到上面提到的“您请求的功能当前不可用。请稍后再试。” 错误。使用 js ReferenceError: init is not defined

其次，我在 IE10 中遇到问题，即使我是，浏览器也会显示“您未登录”屏幕。单击该按钮将打开立即关闭的登录窗口（已识别登录？），但谷歌选择器窗口上没有任何反应。

此处找到的示例：[http](http://www-personal.umich.edu/~johnathb/misc/gpicker.html) : //www-personal.umich.edu/~johnathb/misc/gpicker.html 似乎在 IE10 上工作得很好。所以我不确定问题是什么..可能的区别是：

*   我在我的网站上启用了 Https（但关闭后似乎没有什么不同）。
*   我目前正在 Intranet 中运行我的应用程序（尽管可以访问 Internet）。
*   与公共IP有关吗？但这并不能解释为什么 Google Picker 在 Firefox 等中工作。

用于加载和处理选取器的代码如下所示：

```
$('.googleDrivePicker').click(function () {
    var inputControl = $(this).data('inputid');
    // Google Picker API for the Google Docs import
    google.load('picker',
        '1',
        {"language": '@Session["kieli"]',
            "callback" : function () {
            // Create and render a Picker object for searching images.
            var picker = new google.picker.PickerBuilder().
                addView(google.picker.ViewId.DOCS).
                addView(google.picker.ViewId.IMAGE_SEARCH).
                setCallback(function (data) {
                    // A simple callback implementation.
                    var url = '';
                    if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
                        var doc = data[google.picker.Response.DOCUMENTS][0];
                        url = doc[google.picker.Document.EMBEDDABLE_URL] || doc[google.picker.Document.URL];
                        $('#' + inputControl).val(url).change();
                    }
                }).
                build();
                picker.setVisible(true);
                $('.picker.modal-dialog-bg').css('z-index', 1101);
                $('.picker.modal-dialog.picker-dialog').css('z-index', 1102);
            }
        });
    }); 
```

非常感谢您对上述任何一个问题的帮助。

# java - Android Socket 将 Object 转换为 ArrayList

> ID：14194930
> 
> 赞同：0
> 
> 时间：2013-01-07T11:25:01.617
> 
> 标签：java, android, sockets, object

我有一个从 Android 到 Java 应用程序的客户端服务器连接。我正在做的是用 writeObject 编写一个 ArrayList，这样我就可以在执行 readObject 之后将它转换回 ArrayList 但我得到了这个异常：

```
01-07 11:10:08.821: E/AndroidRuntime(1314): Caused by: java.lang.ClassCastException: java.lang.String cannot be cast to java.util.ArrayList
01-07 11:10:08.821: E/AndroidRuntime(1314):     at com.williamhenry.audiobolle.ConnectionToServer.getUsers(ConnectionToServer.java:127) 
```

Android 应用程序告诉服务器使用命令 GETUSERS 获取用户

这是在 MainActivity.java

```
adapter=new ListAdapter(this, new ConnectionToServer().execute("GETUSERS").get()); 
```

这是在抛出异常的 ConnectionToServer.java 部分（转换它的行）：

```
private ArrayList<HashMap<String, String>> getUsers()
{
ArrayList<HashMap<String, String>> usersList = new ArrayList<HashMap<String, String>>();

try {
    Socket socket = new Socket(url, 8001);
    ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());
    oos.writeObject("GETUSERS");

    ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());

    usersList = (ArrayList<HashMap<String, String>>) ois.readObject();

    ois.close();
    oos.close();

} catch (UnknownHostException e) {} catch (IOException e) {} catch (ClassNotFoundException e) {}
return usersList;
} 
```

这就是服务器将其发送到 Android 应用程序（客户端）的方式：

```
else if(messageArray[0].equals("GETUSERS"))
            {
                try {
                    //st.setUserFullName(messageArray[1], messageArray[2], messageArray[3]);
                    oos.writeObject(st.getUsers());
                } catch (SQLException e) {oos.writeObject("[ERROR]");}
            } 
```

这是被调用的方法：

```
public ArrayList<HashMap<String, String>> getUsers() throws SQLException
    {
        ArrayList<HashMap<String, String>> usersList = new ArrayList<HashMap<String, String>>();
        Statement statement = conn.createStatement();
        try {

            String query = "SELECT userID,username,status,fullname,lastonline FROM users";
            ResultSet resultSet = statement.executeQuery(query);
            try { 
                while (resultSet.next()) {
                    HashMap<String, String> map = new HashMap<String, String>();

                    // In Hashmap das Key und den Wert reinschreiben
                    map.put(KEY_ID, resultSet.getString("userID"));
                    map.put(KEY_USERNAME, resultSet.getString("username"));
                    map.put(KEY_STATUS, resultSet.getString("status"));
                    map.put(KEY_LASTONLINE, resultSet.getString("lastonline"));
                    map.put(KEY_THUMB_URL, resultSet.getString("thumb_url"));

                    // Hashlist in die ArrayList einfügen
                    usersList.add(map);
                }
            } finally {
                resultSet.close();
            }
        } finally {
            statement.close();
        }
        return usersList;
    } 
```

谢谢你的帮助我真的很感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:13:01.967

`thumb_url`查询中缺少该字段。因此`resultSet.getString("thumb_url"))`失败，服务器发送字符串`"[ERROR]"`，客户端无法将其反序列化为 List 。

您可能可以执行以下操作：

```
Object result = ois.readObject();
if ("[ERROR]".equals(result)) {
   // something was wrong server side
   throw SomeException();
} else {
   usersList = (ArrayList<HashMap<String, String>>) result;
} 
```

但我认为最好**不要**在服务器端捕获异常

# regex - 从 URI Regex 获取 Tridion 项目 ID

> ID：14194938
> 
> 赞同：2
> 
> 时间：2013-01-07T11:25:45.193
> 
> 标签：regex, tridion

如果我有一个像这样的 Tridion URI 'tcm:1-23-8' 并且我想用正则表达式得到 23。

以下工作，但我知道有更好的方法。tcm：和'-8'总是在那里。变化的部分是 1 和 23。

```
var schemaUri = $display.getItem().getId(); // tcm:1-23-8
var re = /tcm:\d-/gi;  // = 23-8
var schemaIdWithItemType = schemaUri.replace(re, "");
re = /-8/gi;
var schemaId = schemaIdWithItemType.replace(re, ""); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T11:35:12.560

如果数字*总是* 在两个破折号之间，你可以这样做：

```
var schemaId = schemaUri.split('-')[1]; 
```

这将执行以下操作：

1.  `split`字符上的字符串`'-'`-->`['tcm:1', '23', '8'];`
2.  从该数组中获取第二项，`'23'`

或者，试试这个：

```
var schemaId = schemaUri.match(/-\d+-/)[0].replace(/-/g,''); 
```

这将在破折号之间找到数字`.match(/-\d+-/)`，然后删除破折号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T13:32:59.590

而不是调用`$display.getItem().getId();`，你可以调用`$display.getUri();`然后使用`split()`

```
var schemaId = $display.getUri().split('-')[1]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T15:48:42.080

如果您确实想要一个纯正则表达式解决方案......

```
/^tcm:(\d+)-(\d+)(?:-(\d+))?$/i 
```

应该验证您的 Tridion URI 的格式并为您提供 3 个子匹配项，其中第二个将是项目 ID

# c# - 2 个线程，1 个文件

> ID：14194943
> 
> 赞同：0
> 
> 时间：2013-01-07T11:26:07.883
> 
> 标签：c#, multithreading, file, stream

由于[这](https://stackoverflow.com/questions/14192699/how-to-read-standard-output-of-my-own-application)不能轻易解决，我如何实现 1 个线程逐行使用**将**`Console.WriteLine()`字符串写入文件/缓冲区，另一个线程也逐行从同一文件/缓冲区**读取这些字符串？**我想我需要：

*   将控制台重定向到文件/缓冲区
*   读取文件/缓冲区线程保存，写入一行时必须由另一个线程读取
*   使其异步（不`ReadToEnd()`，它必须是**实时**的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:43:36.217

尝试[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)，它将允许您从多个线程读取写入一个共享文件。至于重定向控制台尝试：

[控制台.SetIn](http://msdn.microsoft.com/en-us/library/system.console.setin.aspx)

[Console.SetOut](http://msdn.microsoft.com/en-us/library/system.console.setout.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:00:28.610

不过，我想用**缓冲区**来做到这一点。

**文件**解决方案：

```
 class Program
    {
        private static bool terminated = false;

        private static void listen()
        {
            StreamReader file = new StreamReader(new FileStream("C:/test.txt", FileMode.Open, FileAccess.Read, FileShare.ReadWrite));
            while (!terminated || !file.EndOfStream)
                if (!file.EndOfStream)
                {
                    string text = file.ReadLine();
                    MessageBox.Show(text); // display it
                }
        }

        static void Main(string[] args)
        {
            StreamWriter sw = new StreamWriter(new FileStream("C:/test.txt", FileMode.Create, FileAccess.Write, FileShare.Read));
            sw.AutoFlush = true;
            Console.SetOut(sw);
            new Thread(new ThreadStart(listen)).Start();
            for (int i = 0; i < 10; i++)
            {
                Thread.Sleep(250);
                Console.Out.WriteLine("hello world - " + i);
            }
            terminated = true;
        }
    } 
```

逐行工作，不会错过任何一个。

# android - 在首选项行中添加一个按钮

> ID：14194944
> 
> 赞同：5
> 
> 时间：2013-01-07T11:26:20.230
> 
> 标签：android, android-preferences

我想要一个按钮在我的设置屏幕上。这个确切的问题已被问到[here](https://stackoverflow.com/questions/10514005/add-a-button-into-prefrencescreen-android)。但遗憾的是没有答案。:(

![在此处输入图像描述](../Images/8eec8a53412ae00f0db130163cabbf48.png)

为了达到这个目的，我创建了一个这样的自定义首选项 -

```
 public class CustomPreference extends Preference {

    private LinearLayout mWidgetContainer;
    private View mRowView;

    public CustomPreference(Context context) {
        super(context);
    }

    public CustomPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomPreference(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected View onCreateView(ViewGroup parent) {
        LayoutInflater viewInflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        mRowView = viewInflater.inflate(R.layout.preferences_row_view, parent, false);

        mWidgetContainer = (LinearLayout) mRowView.findViewById(android.R.id.widget_frame);

        Button button = new Button(getContext());
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        button.setLayoutParams(params);
        button.setBackgroundResource(R.drawable.listview_row_bg);
        button.setTextSize(14);
        button.setPadding(5, 5, 5, 5);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(getContext(), BuyScreenActivity.class);
                getContext().startActivity(intent);
            }
        });
        button.setTypeface(null, Typeface.BOLD);
        button.setText("Buy now");
        mWidgetContainer.addView(button);

        return mRowView;
    }
} 
```

这确实有效。但它的行为很奇怪。正如您在单击该按钮时所看到的那样，我将用户带到 Activity 称为`BuyScreenActivity`. 奇怪的是，当我重新按下时`BuyScreenActivity`，我回到了我的设置屏幕，但`onDestroy`根本没有调用`onStop`of 。`BuyScreenActivity`为什么会这样？

如果我向下滚动设置屏幕，则会调用`onStop`& 。`onDestroy`为什么必须这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-22T10:58:29.940

我不知道为什么会这样，但如果它困扰你，只需覆盖 BuyScreenActivity.java 中的 onBackPressed() ：

```
@Override
public void onBackPressed() {
    startActivity(new Intent(getContext(), SettingsACtivity.class));
} 
```

请注意，我假设您只能通过设置进入 BuyScreen。如果不是，那么很容易将前一个活动的名称放入意图数据中，然后将其切换到所需的活动。

# java - 是否应该更改休眠生成的代码以适应需要？

> ID：14194947
> 
> 赞同：1
> 
> 时间：2013-01-07T11:26:35.953
> 
> 标签：java, hibernate, hbm2java

在我看来，自动生成的代码一般/首选不应该手动更改，因为我们无法重新生成任何东西。但是一位经验丰富的 hibernate 用户告诉我，他总是会更改 hbm2java 生成的代码以满足他的需要。“适合需求”也很重要，所以我不确定这个主要好处是否。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:34:00.757

> 自动生成的代码一般/首选不应该手动更改吗？

--> 您不应该手动更改代码，因为如果您手动更改代码并且下次再次自动生成 pojo 类。您可能有很多更改要做，并且很难维护您的手动更改。再次成为人类犯错误，如果你错过了重大变化，那么这对你来说真的会非常困难。

> 但是一位经验丰富的 hibernate 用户告诉我，他总是会更改 hbm2java 生成的代码以满足他的需要。

--> 您可以根据需要更改代码生成（复仇）脚本以生成类，而不是手动更改生成的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:28:56.713

我在这种情况下使用 aspectJ，因为我也不喜欢更改生成的代码。它也有帮助，因为你不能通过重新生成代码来破坏某些东西......（注意：触发构建的并不总是你）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T08:52:23.267

您最好通过 Reveng 模板间接更改代码！

*   如果您重新生成源，您的自定义将丢失。

要更改模板，`pojo`请从 Hibernate-Tools-sources 中提取 -folder 到您 `src/main/templates/pojo/Pojo.ftl`在下面的示例中喜欢的文件夹。

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>hibernate3-maven-plugin</artifactId>
  <version>2.2</version>
  <configuration>
    <components>
      <component>
        <name>hbm2java</name>
        <outputDirectory>src/main/java</outputDirectory>
      </component>
    </components>
    <componentProperties>
             <!-- to change the filename of the entitys to *Impl.java for examle -->
      <reversestrategy>mypackage.MyStrategy</reversestrategy>   
      <revengfile>/src/main/config/hibernate.reveng.xml</revengfile>
      <configurationfile>/src/main/config/hibernate.cfg.xml</configurationfile>
             <!-- modify the templates to your needs -->
      <templatepath>src/main/templates</templatepath>
    </componentProperties>
  </configuration>
</plugin> 
```

非常欢迎更改模板（即使它们很难阅读。）！通常与长寿命会话相结合是不可或缺的。

# jquery - 我们可以在不应用 jquery 函数的情况下在鼠标悬停上获得弹跳效果吗？

> ID：14194952
> 
> 赞同：2
> 
> 时间：2013-01-07T11:26:51.190
> 
> 标签：jquery, html, jquery-ui, css

我正在设计一个菜单，但如果我想在鼠标悬停到当前元素时产生弹跳效果，但我不想为此使用 jquery 函数。我们可以用css3编写代码吗？我正在尝试使用代码-

```
tab-switch li a.current {

background-image://any transition??//

     -webkit-transition:easeoutbounce 1s linear;
     -moz-transition: easeoutbounce 1s linear;
     -o-transition: easeoutbounce 1s linear;
     -ms-transition: easeoutbounce 1s linear;
     transition: easeoutbounce 1s linear;
    background-repeat:no-repeat;
    background-image:url('images/bgs/selectedmenu.png');} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:07:06.563

您可以通过使用自定义[**计时功能**](https://developer.mozilla.org/en-US/docs/CSS/timing-function)为您的过渡进行弹跳过渡。

查看我所做[**的背景图像（使用渐变创建）悬停时弹跳过渡的几个示例。**](http://dabblet.com/gist/4474482)基本上，这个想法是您使用三次贝塞尔计时函数（**`cubic-bezier(x1, y1, x2, y2)`**-**`x1`**并且**`x2`**必须在封闭区间内**`[0, 1]`**），其中第二个值 ( **`y1`**) > 1 和/或第四个值 ( **`y2`**) 是 < 0 （这意味着您的函数增加然后减少，然后在 0% 和 100% 之间再次增加，并且不会像没有反弹时那样严格增加 - 您可以通过将鼠标悬停在 Dabblet CSS 面板中的三次贝塞尔代码上来可视化该函数） .

我在示例中使用的三次贝塞尔函数是`cubic-bezier(0, 3.5, 1, -2.5)`、`cubic-bezier(0, 3.25, 1, -2.25)`和`cubic-bezier(0, 3, 1, -2)`，但您可以使用任何您想要的值。一般来说，第二个值越高，第四个值越低（或绝对值越高），则反弹越明显。

**最后一个示例的CSS**代码（弹跳渐变角度）：

```
.p4 {
    background: linear-gradient(left top, orangered 49%, lemonchiffon 51%)
            50% 50%;
    background-size: 100% 130%;
    transition: 2.75s cubic-bezier(0, 3.25, 1, -2.25);
}
.p4:hover {
    background-size: 100% 280%;
} 
```

如果您需要更多，那么您将不得不使用[**关键帧动画**](https://developer.mozilla.org/en-US/docs/CSS/@keyframes)- 请参阅我刚刚做的这个[**快速示例。**](http://dabblet.com/gist/4474556)

**CSS**：

```
.p0 {
    background-image:
    url(http://imgsrc.hubblesite.org/hu/db/images/hs-2012-49-a-small_web.jpg), 
    url(http://imgsrc.hubblesite.org/hu/db/images/hs-2002-24-a-small_web.jpg);
    background-position: 50% 50%;
    background-repeat: no-repeat;
    background-size: 100% 100%;
}
.p0:hover {
    animation: ani0 4s forwards;
}
@keyframes ani0 {
    10% { background-size: 50% 75%, 100% 100%; }
    20% { background-size: 50% 50%, 100% 100%; }
    30% { background-position: 50% 50%; background-size: 50% 25%, 100% 100%; }
    30% { background-position: 25% 50%, 50% 50%;
        background-size: 25% 25%, 100% 100%; }
    40% { background-position: 25% 0, 50% 50%; }
    50% { background-position: 50% 0, 50% 50%; }
    60% { background-position: 100% 25%, 50% 50%; }
    70% { background-position: 75% 50%, 50% 50%;
        background-size: 25% 25%, 100% 100%; }
    80% { background-position: 50% 100%, 50% 50%; }
    90% { background-position: 0 50%, 50% 50%; }
    100% { background-size: 0 0, 100% 100%; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T19:49:31.993

就像 asad 说的，你可以使用[animate.css](http://daneden.me/animate/)。但要回答您的问题，请使用 100% css。

这是一个使用纯 css 的演示（悬停反弹）：http: [//jsfiddle.net/yXJ3G/](http://jsfiddle.net/yXJ3G/)

关键是在反弹效果中添加一个悬停类。这样就不需要 JS/jQuery。

```
.bounce:hover {
-webkit-animation-name: bounce;
-moz-animation-name: bounce;
-o-animation-name: bounce;
animation-name: bounce;
} 
```

# java - 轻松禁用小程序的 log4j？

> ID：14194958
> 
> 赞同：0
> 
> 时间：2013-01-07T11:27:11.830
> 
> 标签：java, logging, applet, log4j, warnings

我正在使用相同的代码构建 Java Desktop 和 Java Applet。Log4j 正在使用中，因此桌面版本（原始版本）中的几乎每个类都有类似的行

```
private static final Logger LOG = LoggerFactory.getLogger(EachClassName.class); 
```

因为 Applet 不应该执行任何 io 操作，所以我不得不排除这个配置代码：

```
InputStream is = Log4jConfigurator.class.getClassLoader().getResourceAsStream(path);
properties.load(is);
is.close();
PropertyConfigurator.configure(properties); 
```

但现在我收到警告，因为`getLogger`它仍然存在

```
log4j:WARN No appenders could be found for logger (org.game.client.Client).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

避免此警告并仅在桌面版本中使用记录器的最优雅的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:21:13.743

在您的“Applet App”中尝试以编程方式配置 log4j：

1.  关闭日志记录

    `LogManager.getRootLogger().setLevel(Level.OFF);`

2.  添加 NullAppender（如果设置 Level.OFF 还不够）

    `LogManager.getRootLogger().addAppender(new NullAppender())`

# database - Scala Slick 连接查询

> ID：14194959
> 
> 赞同：0
> 
> 时间：2013-01-07T11:27:11.853
> 
> 标签：database, scala, slick

我正在像这样执行一个光滑的连接：

```
 val query = for { 
          o <- Orders if o.id === order_id
          p <- o.part_key
        } yield (o,p)
        query.list 
```

这会创建以下错误消息：

```
value list is not a member of org.scalaquery.ql.Query[(code.model.Orders.type, code.model.Parts.type)] 
```

如果我只返回一个 Order 或 Part 查询工作正常：

```
 val query = for { 
          o <- Orders if o.id === order_id
          p <- o.part_key
        } yield o
        query.list 
```

如何从 slick join 查询中返回元组列表？为什么我会收到上面的错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T11:27:34.760

我认为在查询中返回元组的最佳方法是使用：

```
val list = (for { 
      o <- Orders if o.id === order_id
      p <- o.part_key
    } yield o ~ p).list 
```

# javascript - javascript中每一行的值相同

> ID：14194960
> 
> 赞同：0
> 
> 时间：2013-01-07T11:27:18.593
> 
> 标签：javascript, knockout.js

我在[http://jsfiddle.net/TQXja/14/中创建了一张表](http://jsfiddle.net/TQXja/14/)

我对用户的需求是 Busy 一次为真，那么该用户的所有任务都应该为真。但它总是取 1 行值，因为我在第 24 行映射数组，var list 我正在映射数组以获得不同的用户列表。

```
var list = ko.utils.arrayMap(self.tasks(), function (item) {
    if (distinctUsers.indexOf("|" + item.members) == -1) 
        distinctUsers += "|" + item.members;
        return item;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:35:29.163

我将重组您的代码，并使用一个保存值 isBusy 的用户对象。在这个 User 对象中有一个 observableArray 的目标，如下所示：

```
function User(name, goals, isBusy, userPresence) {
    self.name = ko.observable(name);
    self.goals = ko.observableArray(goals);
    self.userPresence = userPresence;
}

function Goal(id, isPublic, note) {
    var self = this;

    self.goalId = ko.observable(id);
    self.isPublic = ko.observable(isPublic);
    self.note = ko.observable(note);
} 
```

# c# - 我无法访问同一命名空间内的类

> ID：14194962
> 
> 赞同：-3
> 
> 时间：2013-01-07T11:27:21.923
> 
> 标签：c#, asp.net, class, web-applications, namespaces

我正在尝试访问同一名称页内的类，但我无法访问类的实例。

```
namespace WebProj.Controller
{
    public class DataLayer
    {
        public string ConnString { get; set; }
    }
}

namespace WebProj.Controller
{
    public class BusinessLayer
    {

    }
} 
```

![在此处输入图像描述](../Images/516bf6c5da3ca20929b96d07a10ee23f.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T11:29:32.150

您需要将该代码放在一个方法中：

```
public class BusinessLayer
{
    public void Foo()
    {
        DataLayer dal = new DataLayer();
        dal.ConnString = ...;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T11:31:19.170

在方法声明中使用它怎么样？

```
namespace WebProj.Controller
{
    public class BusinessLayer
    {
        public void Main()
        {
            DataLayer d = new DataLayer();
            d.ConnString
        }

    }
} 
```

![在此处输入图像描述](../Images/083f5fa1e4745da2005927e0a4e98d82.png)

# mysql - 下拉框中的Mysql过滤查询

> ID：14194965
> 
> 赞同：0
> 
> 时间：2013-01-07T11:27:34.963
> 
> 标签：mysql

早上好，我有下面的 mysql 查询来显示销售情况良好的年份，直到年份发生变化，因为它现在显示 2012 年 1 月和 2013 年 1 月的组合。

为了解决这个问题，我放置了一个下拉表单框 (id=YearSelect)，其值为 2012 和 2013，是否可以使用所选值控制此查询？如果最终用户选择 2012，那么该值将作为 where 子句的一种类型发送到 Year 列？

```
<form id="yearselect">
<select name="year">
  <option value="">Select year </option>
  <option value="2012">2012</option>
  <option value="2013">2013</option>
</select>
</form> 
```

```
Select
  *,
  If(q.Adviser Is Null, 1, 0) As remove
From
  (Select
      a.ContactFullName As Adviser,  
      YEAR(b.CaseDate) As Year,
      Sum(If(Month(b.StatusSubmittedDate) = 1, b.CaseCommission, 0)) As Jan,
      Sum(If(Month(b.StatusSubmittedDate) = 2, b.CaseCommission, 0)) As Feb,
      Sum(If(Month(b.StatusSubmittedDate) = 3, b.CaseCommission, 0)) As Mar,
      Sum(If(Month(b.StatusSubmittedDate) = 4, b.CaseCommission, 0)) As Apr,
      Sum(If(Month(b.StatusSubmittedDate) = 5, b.CaseCommission, 0)) As May,
      Sum(If(Month(b.StatusSubmittedDate) = 6, b.CaseCommission, 0)) As Jun,
      Sum(If(Month(b.StatusSubmittedDate) = 7, b.CaseCommission, 0)) As Jul,
      Sum(If(Month(b.StatusSubmittedDate) = 8, b.CaseCommission, 0)) As Aug,
      Sum(If(Month(b.StatusSubmittedDate) = 9, b.CaseCommission, 0)) As Sep,
      Sum(If(Month(b.StatusSubmittedDate) = 10, b.CaseCommission, 0)) As Oct,
      Sum(If(Month(b.StatusSubmittedDate) = 11, b.CaseCommission, 0)) As Nov,
      Sum(If(Month(b.StatusSubmittedDate) = 12, b.CaseCommission, 0)) As Decb,
      Sum(b.CaseCommission) As Total
    From
      tblcontacts a Inner Join
      tblcases b On a.ContactID = b.ContactAssignedTo
    Where
      WHERE Year(b.StatusSubmittedDate) = ".(int)$_POST['year']."
    Group By
      a.ContactFullName WITH ROLLUP
    Having
      Sum(b.CaseCommission) > 0.01) q
Order By
  If(q.Adviser Is Null, 1, 0), q.Total Desc 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:33:41.187

改变这个怎么样`WHERE`：

```
Where
  b.StatusSubmittedDate > '2012 - 01 - 01' 
```

到：

```
Where
  YEAR(b.StatusSubmittedDate) = ".(int)$YEAR_VALUE_FROM_DROPDOWN." 
```

那应该够了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:52:57.567

考虑到 PHP 标记，我假设您在 PHP 基础页面上显示结果。您可以使用以下代码来做您想做的事。

```
<form id="yearselect" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" >
<select name='selyear' onchange='document.getElementById("yearselect").submit()'>
  <option value=''> - Select year </option>
  <option value='2012'>2012</option>
  <option value='2013'>2013</option>
</select>
</form>

<?
$y = date("Y");
if (isset($_POST['selyear']))
{
  if (checkdate(1, 1, $_POST['selyear']) && $_POST['selyear']>=2012)
    $y = $_POST['selyear'];
}

$query = 'Select
  *,
  If(q.Adviser Is Null, 1, 0) As remove
From
  (Select
      a.ContactFullName As Adviser,  
      YEAR(b.CaseDate) As Year,
      Sum(If(Month(b.StatusSubmittedDate) = 1, b.CaseCommission, 0)) As Jan,
      Sum(If(Month(b.StatusSubmittedDate) = 2, b.CaseCommission, 0)) As Feb,
      Sum(If(Month(b.StatusSubmittedDate) = 3, b.CaseCommission, 0)) As Mar,
      Sum(If(Month(b.StatusSubmittedDate) = 4, b.CaseCommission, 0)) As Apr,
      Sum(If(Month(b.StatusSubmittedDate) = 5, b.CaseCommission, 0)) As May,
      Sum(If(Month(b.StatusSubmittedDate) = 6, b.CaseCommission, 0)) As Jun,
      Sum(If(Month(b.StatusSubmittedDate) = 7, b.CaseCommission, 0)) As Jul,
      Sum(If(Month(b.StatusSubmittedDate) = 8, b.CaseCommission, 0)) As Aug,
      Sum(If(Month(b.StatusSubmittedDate) = 9, b.CaseCommission, 0)) As Sep,
      Sum(If(Month(b.StatusSubmittedDate) = 10, b.CaseCommission, 0)) As Oct,
      Sum(If(Month(b.StatusSubmittedDate) = 11, b.CaseCommission, 0)) As Nov,
      Sum(If(Month(b.StatusSubmittedDate) = 12, b.CaseCommission, 0)) As Decb,
      Sum(b.CaseCommission) As Total
    From
      tblcontacts a Inner Join
      tblcases b On a.ContactID = b.ContactAssignedTo
    Where
      b.StatusSubmittedDate > \''.$y.' - 01 - 01\'
      AND b.StatusSubmittedDate < \''.$y.' - 12 - 31\'
    Group By
      a.ContactFullName WITH ROLLUP
    Having
      Sum(b.CaseCommission) > 0.01) q
Order By
  If(q.Adviser Is Null, 1, 0), q.Total Desc'

  //output results
?> 
```

现在我没有检查您的查询，因为您提到它有效。此外，除了在更改选择列表时发布表单，您还可以将其更改为使用 AJAX 或其他使其更好的方法。但我想你明白了。

此外，我现在检查一个有效的年份，而不仅仅是 2012 年或 2013 年。这取决于你想要什么。

# android - Android：addview() - 在活动之上添加一个新视图

> ID：14194967
> 
> 赞同：9
> 
> 时间：2013-01-07T11:27:55.270
> 
> 标签：android, android-layout, android-activity

我有以下带有图像视图和文本字段的布局，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="26dp"
        android:layout_marginTop="22dp"
        android:src="@drawable/a01" />

     <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/imageView1"
        android:layout_marginTop="31dp"
        />

</RelativeLayout> 
```

此布局将是透明的，我想在特定活动之上调用此布局，当特定活动首次启动时，如何实现它`addview()`？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-07T12:02:19.980

当你想展示它时：

```
FrameLayout rootLayout = (FrameLayout)findViewById(android.R.id.content);
View.inflate(this, R.layout.overlay_layout, rootLayout); 
```

然后当你想删除它时：

```
FrameLayout rootLayout = (FrameLayout)findViewById(android.R.id.content);
rootLayout.removeViewAt(rootLayout.getChildCount()-1); 
```

这是一个简洁的解决方案，您应该通过在 XML 文件中`View`提供`RelativeLayout`一个 id 来删除 ，然后删除 by: `rootLayout.removeView(findViewById(R.id.the_id_of_the_relative_layout));`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T11:35:02.487

请使用以下代码添加视图。

```
LayoutInflater vi = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = vi.inflate(R.layout.your_layout, null);

// fill in any details dynamically here
TextView textView = (TextView) v.findViewById(R.id.a_text_view);
textView.setText("your text");

// insert into main view
View insertPoint =(View) findViewById(R.id.insert_point); // edited. 
insertPoint.addView(v, 0, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:45:15.937

调用活动的布局应该在 FrameLayout 内（因为在此布局中添加的最后一个视图将始终位于前一个视图的顶部），在调用活动的 onCreate 方法中使用 LayoutInflater 膨胀给定的布局并直接使用活动的 addView 方法。

# python - Fetchall 在 Python 中只返回一列？

> ID：14194969
> 
> 赞同：5
> 
> 时间：2013-01-07T11:28:02.930
> 
> 标签：python, mysql-python

我有这样的代码：

```
db = MySQLdb.connect(user='root', db='galaxy', passwd='devil', host='localhost')
cursor = db.cursor()
cursor.execute('SELECT username, password FROM galaxy_user')
names = [row[0] for row in cursor.fetchall()]
passw = [password[1] for password in cursor.fetchall()]
db.close() 
```

问题是我只能从以下代码访问名称或密码。有了这个我只能得到用户名。我得到了密码的空列表。现在，如果我像这样切换：

```
passw = [row[1] for row in cursor.fetchall()]
names = [password[1] for password in cursor.fetchall() 
```

我得到了 passw 的值，但名称是空列表。发生了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T11:29:10.203

每次之后`cursor.execute`您只能使用`cursor.fetchall`一次。它“耗尽”游标，获取其所有数据，然后无法再次“读取”。

使用以下代码，您可以同时读取所有数据：

```
db = MySQLdb.connect(user='root', db='galaxy', passwd='devil', host='localhost')
cursor = db.cursor()
cursor.execute('SELECT username, password FROM galaxy_user')
names, passw = zip(*cursor.fetchall())
db.close() 
```

另一种可能性是将所有数据存储在一个列表中，然后像游标一样读取它：

```
records = cursor.fetchall()
names = [record[0] for record in records]
passw = [record[1] for record in records] 
```

或者字典（名称->密码）怎么样？

```
user_pass = dict(cursor.fetchall()) 
```

或者简单地说（正如@JonClemens 建议的那样）：

```
user_pass = dict(cursor) 
```

# java - 在 JCache 的上下文中，假脱机意味着什么？

> ID：14194973
> 
> 赞同：2
> 
> 时间：2013-01-07T11:28:12.200
> 
> 标签：java, spool, spooler, jcache

从[JCache 的 JCP 页面](http://jcp.org/en/jsr/detail?id=107)：

> JCACHE 规范以一种允许有效实现的方式标准化 Java 对象的进程缓存，并从程序员身上消除了实现缓存过期、互斥、**假脱机**和缓存一致性的负担。

`spooling`在这种情况下是什么意思？此外，假脱机与缓存有何关系？

我无法将[Wikipedia 中给出](http://en.wikipedia.org/wiki/Spooling)的假脱机概念与 JCache 联系起来，JCache 是实现缓存的标准。

# mysql - MySQL排序性能不佳

> ID：14194976
> 
> 赞同：1
> 
> 时间：2013-01-07T11:28:35.337
> 
> 标签：mysql, performance, indexing

我看到以下（简化的）查询出现在我的慢日志 mysql 文件中，它是由搜索引擎爬虫从分页网站爬取所有页面的。

```
select * from listing 
where 
   active=1 
   and approved=1 
   and deleted=0 
   and enabled=1 
order by 
   full_listing desc,  
   picture_count*rating/rating_count desc, 
   rating desc 
limit 21230, 10; 
```

我很惊讶在只有 60,000 条记录的表上处理需要超过 8 秒。

解释计划看起来像这样

```
1   SIMPLE  listing0_   index_merge listing_active,listing_approved,listing_enabled,listing_deleted,sort_index  listing_active,listing_approved,listing_enabled,listing_deleted 1,1,1,1     3102    Using intersect(listing_active,listing_approved,listing_enabled,listing_deleted); Using where; Using filesort 
```

我可以创建什么索引来提高其性能？

表结构：

```
'CREATE TABLE `listing` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `account_id` bigint(20) DEFAULT NULL,
  `domain_id` bigint(20) DEFAULT NULL,
  `active` bit(1) NOT NULL,
  `approved` bit(1) NOT NULL,
  `denied` bit(1) NOT NULL,
  `deleted` bit(1) NOT NULL,
  `enabled` bit(1) NOT NULL,
  `full_listing` bit(1) DEFAULT b''0'',
  `public_id` varchar(255) DEFAULT NULL,
  `name` varchar(100) NOT NULL,
  `rating` int(11) NOT NULL,
  `rating_count` int(11) NOT NULL,
  `rating_enabled` bit(1) NOT NULL,
  `picture_count` int(11) DEFAULT ''0'',
  `createdAt` datetime NOT NULL,
  `createdBy` varchar(15) NOT NULL,
  `updatedAt` datetime NOT NULL,
  `updatedBy` varchar(15) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `listing_public_id` (`public_id`),
  KEY `FKB4DC521D9306A80C` (`account_id`),
  KEY `FKB4DC522D7A66E1A8` (`domain_id`),
  KEY `listing_active` (`active`),
  KEY `listing_approved` (`approved`),
  KEY `listing_enabled` (`enabled`),
  KEY `listing_deleted` (`deleted`),
  KEY `listing_picture_count` (`picture_count`),
  KEY `listing_rating` (`rating`),
  KEY `listing_rating_count` (`rating_count`),
  KEY `listing_full_listing` (`full_listing`),
  CONSTRAINT `listing_ibfk_1` FOREIGN KEY (`account_id`) REFERENCES `account` (`id`),
  CONSTRAINT `listing_ibfk_2` FOREIGN KEY (`domain_id`) REFERENCES `domain` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=59512 DEFAULT CHARSET=utf8' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:35:17.880

`Using filesort` 可能是一个原因。什么是索引？就我个人而言，我会为你正在做的事情使用位移，例如列状态包含一个 int

像这样用右手位

0000 活跃 | 批准 | 已删除 | 启用

所以在你的例子中我会有`where status = 1011` or `status = 11`（当位被转换回整数时）

然后你只有 1 个索引和所有组合（使用 0 和 1 有时可以让 mysql 忽略索引）

# sql - 为空时插入值

> ID：14194980
> 
> 赞同：0
> 
> 时间：2013-01-07T11:28:44.820
> 
> 标签：sql

我有两张桌子

**学生：**

```
roll    Name
1       A
2       B
3       C 
```

**标记**

```
roll    Mark
1       85
3       95 
```

我想要一个像

```
roll    Name    Grade
1       A       A
2       B       F
3       C       A+ 
```

我试过这个查询

```
select Stdent.Roll,Stdent.Name,Grade= case 
when (Mark between 0 and 79) then ('F')
when (Mark between 80 and 89) then ('A')
when (Mark between 90 and 100) then ('A+') end  
from Mark 
right join Stdent 
on Mark.roll=Stdent.Roll 
order by Stdent.Roll 
```

输出在成绩列的第 2 行显示为空。但我希望它是 F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:35:28.893

```
select Stdent.Roll,Stdent.Name,Grade= case 
when (func(Mark,0) between 0 and 79) then ('F')
when (Mark between 80 and 89) then ('A')
when (Mark between 90 and 100) then ('A+') end  
from Mark 
right join Stdent 
on Mark.roll=Stdent.Roll 
order by Stdent.Roll 
```

如果您使用的是 sql server，则应该使用 ISNULL 而不是 func，如果是 oracle nvl。检查[此](http://www.w3schools.com/sql/sql_isnull.asp)页面以了解其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:37:22.327

您需要处理您`Mark`的`NULL`案例陈述：

```
SELECT  Student.Roll,
        Student.Name,
        Grade = CASE 
                    WHEN Mark.Mark BETWEEN 0 AND 79 OR Mark.Mark IS NULL THEN 'F'
                    WHEN Mark.Mark BETWEEN 80 AND 89 THEN 'A'
                    WHEN Mark.Mark BETWEEN 90 AND 100 THEN 'A+'
                END  
FROM    Mark 
        RIGHT JOIN Student 
            ON Mark.roll=Student.Roll 
ORDER BY Student.Roll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:37:50.467

尝试这个：

```
select Stdent.Roll,Stdent.Name,Grade= case 
when (IsNull(Mark, 0) between 0 and 79) then ('F')
when (Mark between 80 and 89) then ('A')
when (Mark between 90 and 100) then ('A+') end  
from Mark 
right join Stdent 
on Mark.roll=Stdent.Roll 
order by Stdent.Roll 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T11:52:56.307

```
select Stdent.Roll,Stdent.Name,Grade= case 
 when (NVL(Mark,0) between 0 and 79) then ('F')
 when (Mark between 80 and 89) then ('A')
 when (Mark between 90 and 100) then ('A+') end  
from Mark 
 right join Stdent 
 on Mark.roll=Stdent.Roll 
order by Stdent.Roll 
```

使用 NVL 函数处理空值

# php - Symfony2 / 学说 2 注释：要么输入两个字段，要么不输入？

> ID：14194987
> 
> 赞同：1
> 
> 时间：2013-01-07T11:29:12.870
> 
> 标签：php, symfony, annotations, doctrine, validation

有没有办法通过 Symfony2 或教义 2 中的注解来要求：如果你填充了字段 A，那么你还必须指定字段 B？

在我的情况下，用户可以指定他们想要安排的 cron 作业类型。如果类型是 odbc，则必须至少选择一个 db-table。如果它是任何其他类型的 cron 作业，则不需要选择表（甚至没有意义）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T11:38:52.803

您可以在注释中配置断言/回调，指向验证实体数据的回调函数。

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\ExecutionContext;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 * ...
 * @Assert\Callback(methods={"validateDB"})
 */
class Item
{
    protected $type;
    protected $table; 

    public function validateDB(ExecutionContext $context)
    {
        $path = $context->getPropertyPath();
        if ($this->type == 'odbc' and empty($this->table)) {
            // ".type" is the property name where you want the error to appear
            // in the form.
            $context->setPropertyPath($path . '.type'); 
            $context->addViolation("ODBC table must be specified.", array(), null);
        }
    }
} 
```

# ruby-on-rails - 将 ActiveRecord 与业务逻辑分离的 Rails 应用程序

> ID：14194988
> 
> 赞同：4
> 
> 时间：2013-01-07T11:29:20.993
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord, decoupling

我最近遇到了 Robert Martin（鲍勃叔叔）关于如何基于用例构建 Rails 应用程序的主题演讲。我觉得这很有趣。

这是主题演讲的链接：[建筑：失落的岁月](http://confreaks.com/videos/759-rubymidwest2011-keynote-architecture-the-lost-years)

这是一个示例项目，它根据 Robert Martin 在其主题演讲中提到的原则构建应用程序：[Guru Watch](https://github.com/qertoip/guru_watch)

我想知道是否有以这种方式构建的完善的 Rails 应用程序（*用例驱动方法/实体控制边界架构/后端与前端分离*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T15:18:16.953

好吧，我不能分享代码，但我可以为你指出一些方向。我们一直在我们的应用程序中使用这个 gem： [https](https://github.com/collectiveidea/interactor) ://github.com/collectiveidea/interactor 。

Martin 的主题演讲给我很大启发，这个应用程序的开发进展顺利:)。在 ActiveRecord 和业务逻辑分离的情况下，我们做了以下工作：

我们业务逻辑中的每个类都有某种对应的 DatabaseEntity。这个对应物正在使用另一个类——我们的 ActiveRecord 适配器。它正在查询相应的 ActiveRecord 模型并将 ActiveRecord 实例转换为我们的业务逻辑类的实例。

毕竟大部分代码都集中在这个适配器上。

# jquery - 按窗口宽度加载不同的图像文件夹

> ID：14194990
> 
> 赞同：0
> 
> 时间：2013-01-07T11:29:28.983
> 
> 标签：jquery, if-statement, responsive-design

我正在制作一个响应式网站，但我需要为不同的屏幕尺寸加载不同的图像。我尝试根据 window.width 为变量“路径”设置一个值，通过应用在图像上的类获取图像名称。

为什么它不起作用？

```
 if (window.width() <= 410) {
     var path = 'images/small/';
 } else 
 if (window.width() <= 650) {
var path = 'images/medium/';
 } else {
   var path = 'images/big/';
 }

 $('.gallery li').click(function(){
    $('.content').load(path + $(this).attr('class'));
    });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:40:06.373

您不能使用 jQuery.load 方法加载图像。你应该把图像标签：

```
$('.gallery li').click(function(){
    var img = $("<img />");
    img.attr('src', path + $(this).attr('class'));
    $('.content').replaceWith(img);
}); 
```

In addition, it will be much better idea to use data attribute instead of class to get image names. For example:

```
<ul class="gallery"><li data-image="example.jpg"> ... </li> ... </ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:40:22.083

If you want to create a responsive website, your best friends are CSS Media Queries. Head over to [Media Queries](http://mediaqueri.es) to see some examples.

If you want to use a JavaScript and jQuery, I'd suggest to use a jQuery plugin instead of creating your own. [Here's an example](http://jquerypicture.com/).

Also, for CSS, there are frameworks too. From the creator of the above plugin, [here's one for CSS](http://responsablecss.com/).

# python - 键入安全的 Python 3.2 字典

> ID：14194997
> 
> 赞同：1
> 
> 时间：2013-01-07T11:29:49.640
> 
> 标签：python, types, dictionary

在 Python (3.2) 中实现类型安全字典的好方法是什么 - 一个只允许将特定类型的对象添加到自身的字典？

我自己有一个简单的解决方案：使用“addItem”方法围绕字典构建一个包装类，该方法在添加对象之前执行类型检查断言。看看是否有人有更好的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T11:34:53.623

这里的 Pythonic 方法是只使用普通字典并只向其中添加特定类型的对象 - 不要试图强制执行限制，它不应该是必需的。

* * *

编辑：为了扩展我的论点，让我解释一下——你似乎认为编写好的代码需要类型安全。第一个问题是为什么？当然，类型安全会在编译时捕获一些错误，但根据我的经验，这些错误很少见，即使是最琐碎的测试也很容易捕获，而且通常很容易修复。

相比之下，最烦人、最难修复和最难测试的错误是合乎逻辑的错误，计算机根本无法发现。最好通过制作易于理解的可读代码来防止这些错误，从而使错误更加突出。动态类型通过减少代码的冗长性极大地帮助了这一点。您可能会争辩说，键入会使代码更容易阅读（因为您可以在使用它们时看到变量的类型），但是在动态语言中，这种事情是通过仔细命名来给出的——如果我命名一个变量`seq`，人们会假设这是一个序列，可以这样使用。根据我的经验，描述性命名和良好文档的结合使动态代码变得更好。

归根结底，语言中的类型安全是一个偏好问题，然而，Python 是一种围绕鸭子类型的思想设计的动态语言。该语言中的所有内容都是围绕这一点设计的，尝试以另一种方式使用它会适得其反。如果你想写Java，就写Java。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T11:39:41.820

通过对,和进行子分类`dict`和添加警卫；添加一个从默认值中获取类型的类方法是一个很好的额外功能：`__setitem__``.update()``.setdefault()``.fromkeys()`

```
from itertools import tee

class MyTypeDict(dict):
    def __init__(self, type_=SomeType, *args, **kw):
        self.type = type_
        super(MyTypeDict, self).__init__(*args, **kw)
        for val in self.itervalues():
            self._checktype(val)

    @classmethod
    def fromkeys(cls, seq, value=SomeType()):
        res = cls(type_=type(value))
        res.update((k, value) for k in seq)
        return res

    def _checktype(self, value):
        if not isinstance(value, self.type):
            raise TypeError('Value type {!r} not allowed'.format(type(value)))

    def __setitem__(self, key, value):
        self._checktype(value)
        super(MyTypeDict, self).__setitem__(key, value)

    def update(self, other):
        # Loop over other, either a dict or an iterable (use a copy with `tee`)
        # for python 3, use `items()` instead.
        items = other.iteritems() if hasattr(other, 'iteritems') else tee(other)
        for key, value in items:
            self._checktype(value)
        super(MyTypeDict, self).update(other)

    def setdefault(self, key, default=None):
        if default is None:
            default = self.type()  # assumes no-args initializer
        else:
            self._checktype(default)
        return super(MyTypeDict, self).setdefault(key, default) 
```

将此用作：

```
mydict = MyTypeDict(type_=SomeType) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T11:39:15.503

我认为您可以扩展字典并覆盖该`__setitem__`方法

```
class MyDict(dict):
    def __setitem__(self, key, val):
        #Test for proper interface
        if val.pass_the_test:
            dict.__setitem__(self, key, val)
        else:
            raise SomeKindOfException() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T12:27:24.263

Martijn 已经给了你*一个*答案，但正如你所看到的那样，正确处理极端情况是很棘手的。

如果您只想避免在脚上开枪，那么他的回答可能比您实际需要的要多；也许您只需要 wrap `__setitem__`，或者您最好让任何类型进入字典，但在完成添加内容或访问它们时进行某种断言。最后一个问题当然是 Python 人通常的回答：如果字典中的对象没有实现正确的接口，让代码在使用时中断，而不是预先检查。

另一方面，如果您需要防止恶意代码注入流氓值，Martijn 的代码是不够的；您可以通过以下方式轻松解决它：

```
dict.__setitem__(mydict, key, rogue_value) 
```

此外，如果您真的打算将对象限制为单一类型，那么他的答案不是您想要的；你可能有一个通过`isinstance`测试但没有提供正确的鸭子打字行为的对象。

这就是为什么更多的问题背景会很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T18:50:18.210

根据**Dikei**和**Martijn Pieters**的回答，我想出了这个简单的实现，足以满足我的需求：

```
class ETypedDictonaryException (Exception):
    pass

class TypedDict(dict):

    def __init__(self, keyType, valueType):
        dict.__init__(self)
        self.keyType = keyType
        self.valueType = valueType

    def __setitem__(self, key, value):
        if ( not isinstance(key, self.keyType) or not isinstance(value, self.valueType) ):
            raise  ETypedDictonaryException("wrong key type:" +str(self.keyType) + " and " +str(self.valueType)+ "  required!")
        dict.__setitem__(self, key, value) 
```