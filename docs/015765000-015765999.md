# StackOverflow 问答 15765000-15765999

# c# - 如何在 Metro 应用程序中显示 rtf？

> ID：15765004
> 
> 赞同：1
> 
> 时间：2013-04-02T13:11:01.010
> 
> 标签：c#, windows-runtime

如何在 RichTextBlock（或任何其他 UI 文本元素）中显示 rtf 字符串？没有我可以使用的 rtf 属性（我认为与 .net 不同）。如果我将字符串绑定到普通文本属性，我只会得到 rtf 代码本身。

那么有没有办法做到这一点？否则，我会在 WebView 元素中将字符串显示为 HTML。但我更喜欢 RichTextBlock。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:20:41.867

使用 a`RichEditBox`而不是`RichTextBlock`. [您可以使用RichEditBox.Document.SetText()](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.text.itextdocument.settext.aspx)方法注入 RTF 。`RichTextBlock`不是 RTF 控件，也不理解 RTF。这`RichEditBox`是唯一支持 RTF 的内置控件。如果您不想使用它，那么您需要自己解析 RTF 并为`RichTextBlock`.

# maven - 来自 Application 类型的方法 getExpressionFactory() 引用了缺少的类型 ExpressionFactory

> ID：15765005
> 
> 赞同：0
> 
> 时间：2013-04-02T13:11:03.097
> 
> 标签：maven, jsf-2

我正在开发一个 JSF 2.0 应用程序，我正在尝试以编程方式将 ajax 操作添加到以编程方式创建的 UIComponent（相当于 commandLink 中静态声明的 f:ajax 侦听器），如[本博客](http://www.wobblycogs.co.uk/index.php/computing/jee/71-programatically-adding-ajax-actions-to-uicomponents)所示。

当我尝试获取 ExpressionFactory 以创建 MethodExpression 时，这样：

```
FacesContext fc = FacesContext.getCurrentInstance();
Application application = fc.getApplication();
ExpressionFactory ef = fc.getApplication().getExpressionFactory(); 
```

所以，就在我写这些行时，我收到一个错误消息：

```
The method getExpressionFactory() from the type Application refers to the missing type ExpressionFactory. 
```

唯一可用的快速修复是配置构建路径。

我不知道我到底应该做什么，我是否缺少任何 JAR 来解决这个问题？

这是我的`pom.xml`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>esprit.pfe2013</groupId>
  <artifactId>GCFTest4addUIC</artifactId>
  <packaging>war</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <name>GestionCongesFeki Maven Webapp</name>
  <url>http://maven.apache.org</url>

<repositories>
        <repository>
            <id>central</id>
            <name>Maven Repository Switchboard</name>
            <layout>default</layout>
            <url>http://repo1.maven.org/maven2</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>       
        <repository>
            <id>prime-repo</id>
            <name>Prime Repo</name>
            <url>http://repository.primefaces.org</url>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>central</id>
            <name>Maven Plugin Repository</name>
            <url>http://repo1.maven.org/maven2</url>
            <layout>default</layout>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <releases>
                <updatePolicy>never</updatePolicy>
            </releases>
        </pluginRepository>
    </pluginRepositories>

<!--   <repositories> -->
<!-- <repository> -->
<!--            <id>central</id> -->
<!--            <name>Central Repository</name> -->
<!--            <url>http://repo.maven.apache.org/maven2</url> -->
<!--            <layout>default</layout> -->
<!--            <snapshots> -->
<!--                <enabled>false</enabled> -->
<!--            </snapshots> -->
<!--        </repository> -->

<!--    </repositories> -->

    <dependencies>
<dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>        
</dependency>

        <!-- PrimeFaces -->
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.4.1</version>
        </dependency>

        <!-- JSF 2 -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.11</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.11</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.13</version>
        </dependency>

        <dependency>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.4.3</version>
</dependency>

    </dependencies>
    <build>
    <finalName>GCFTest4addUIC</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

# android - 如何在Android（4.1.1）中隐藏和显示系统栏

> ID：15765007
> 
> 赞同：1
> 
> 时间：2013-04-02T13:11:06.143
> 
> 标签：android, performance, statusbar, android-notifications, android-theme

我需要在我的应用程序中显示和隐藏系统栏，因此我使用了两个按钮。我曾经测试过 Android (3.0.1) 和 Android (4.1.1) 设备。对于 Android (3.0.1)，我可以根据我的要求隐藏和显示系统栏。但在 Android (4.1.1) 中，按钮无法隐藏和显示系统栏。

我的代码是

```
// Showing system bar
    showSystemBarBtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            try {
                Process proc = Runtime.getRuntime().exec(new String[]{"am","startservice","-n","com.android.systemui/.SystemUIService"});
                proc.waitFor();
            } catch(Exception e) {
                e.printStackTrace();
            }
        }
    });

    // Hiding System bar
    hideSystemBarBtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            try {
                Process proc = Runtime.getRuntime().exec(new String[]{"su","-c","service call activity 79 s16 com.android.systemui"});
                proc.waitFor();
            } catch(Exception e){
                e.printStackTrace();
            }
        }
    }); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T11:06:27.813

隐藏：

> Process proc = Runtime.getRuntime().exec(new String[]{"su","-c","service call activity 79 s16 com.android.systemui"});

" 尝试将“79”更改为“42”。

引入 ICS 时，SystemUI 类的进程 ID 从 79 更改为 42。

# sql - SQL select if count

> ID：15765011
> 
> 赞同：5
> 
> 时间：2013-04-02T13:11:17.130
> 
> 标签：sql, sql-server, database, count

我有两个表 Incident (id, date) Reminder (incidentID, type) inner join on event.id =reminder.incidentID

并且我只想在 event.id 有超过 4 个提醒时才使用它。ty​​pe = 15 我认为是

```
SELECT incident.id
FROM incident
INNER JOIN reminder ON incident.id = reminder.incidentid 
HAVING COUNT (reminder.remindertype = "something") >5
GROUP BY incident.incidentcode 
```

我得到的错误是

> 第 6 行：'=' 附近的语法不正确。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:13:47.027

该`group by`条款应在`having`条款之前声明

```
select incident.id
from incident
inner join reminder
on incident.id = reminder.incidentid
group by incident.incidentcode 
having count (reminder.remindertype) >5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:13:46.967

`COUNT`不能那样工作。

尝试：

```
select incident.id
from incident
inner join reminder
on incident.id = reminder.incidentid
WHERE reminder.remindertype = "something"
group by incident.incidentcode 
having count (reminder.remindertype) >5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:13:26.670

你很接近：

```
select incident.id
from incident inner join
     reminder
     on incident.id = reminder.incidentid
group by incident.incidentcode 
having sum(case when reminder.remindertype = "something" then 1 else 0 end) >5 
```

您的原始语法不适用于大多数 SQL 方言。您需要条件聚合。

# php - IndexController 检索 404 错误，但其他控制器工作正常

> ID：15765013
> 
> 赞同：0
> 
> 时间：2013-04-02T13:11:22.440
> 
> 标签：php, zend-framework

我已经在 localhost 上安装了 Zend Framework（版本 1.12），我在从 IndexController 访问操作时遇到问题，但是相同的代码，相同的操作名称在其他控制器中运行良好，比如说 TestController。

```
class IndexController extends Zend_Controller_Action {
public function init(){/* Initialize action controller here */}
public function indexAction(){//some code}
public function addAction(){//some code}
public function otherAction(){//other code}
}

class TestController extends Zend_Controller_Action {
public function init(){/* Initialize action controller here */}
public function indexAction(){//some code}
public function addAction(){//some code}
public function otherAction(){//other code}  
} 
```

当我在地址栏输入 zf.local/ 时，我从 index/index.phtml 文件中接收内容，但是当我输入 zf.local/index/index ZF 时，告诉我找不到 url。当我输入 zf.local/test/index 时，一切正常如果我在地址栏中输入 zf.local/index/add 我收到 404 错误，但如果我输入 zf.local/test/add 一切正常。

我已将我的虚拟主机设置为 AllowOverride All，并从 Apache 启用了重写模块。我停止、重新启动并重新加载 apache，重新启动我的电脑。我认为 apache 或虚拟主机没有问题，这就是我写这篇文章的原因. [我的 apache 和虚拟主机配置](https://askubuntu.com/questions/276871/getting-started-with-zend)

一旦我尝试输入 zf.local/default/index/add 并且代码正在运行，所以我需要在地址栏中的 /index 之前放置一个 /default

我认为这可以通过 Zend 助手在 [Zend 框架的 /index 官方文档](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html)之前插入我的 url /default 来解决，但我不知道该怎么做。到目前为止，我只设法得到错误

从 index.html 我用下一个代码从控制器调用动作：

```
<a href="<?php echo $this->url(array('controller' => 'index',
        'action' => 'add'));
    ?>">Add</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:53:10.050

在视图文件中尝试以下操作以获取正确的 url

```
<a href="<?php echo $this->url(array('module' => 'default', 'controller' => 'index',
    'action' => 'add'));
?>">Add</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:17:02.927

您的 ZF 应用程序创建不正确。首先尝试从命令行创建应用程序。之后这个问题就解决了。

# jquery - 使用 knockout.js 和 jqueryUI 的可排序表

> ID：15765019
> 
> 赞同：2
> 
> 时间：2013-04-02T13:11:35.080
> 
> 标签：jquery, json, jquery-ui, knockout.js

我正在尝试使用 knockout.js 和 jqueryUI 创建一个可排序的表，但不确定我是否使用了错误的方法。我正在为我的数据使用以下 JSON 结构：

```
{
               "columns":[
                  "Header 1",
                  "Header 2",
                  "Header 3"
               ],
               "rows":[
                  {
                     "Values":[
                        "Col1Item0",
                        "Col2Item0",
                        "Col3Item0"
                     ]
                  },
                  {
                     "Values":[
                        "Col1Item1",
                        "Col2Item1",
                        "Col3Item1"
                     ]
                  },
                  {
                     "Values":[
                        "Col1Item2",
                        "Col2Item2",
                        "Col3Item2"
                     ]
                  },
                  {
                     "Values":[
                        "Col1Item3",
                        "Col2Item3",
                        "Col3Item3"
                     ]
                  },
                  {
                     "Values":[
                        "Col1Item4",
                        "Col2Item4",
                        "Col3Item4"
                     ]
                  },
                  {
                     "Values":[
                        "Col1Item5",
                        "Col2Item5",
                        "Col3Item5"
                     ]
                  }
               ]
            } 
```

我将它绑定到表格并显示它没有问题。我可以使用 jqueryUI 可排序事件启用可排序，但是当需要收集结果时，我被卡住了。我找到了一些关于如何对列表进行排序的资源，但没有找到对表格进行排序的资源。排序的预期结果将是一个重新排列的 JSON 结构，我提供了正确的排序顺序。

我尝试使用 ko.toJSON(this) 将结果保存在页面上的隐藏字段中，但目前出现异常。有什么我想念的吗？我在小提琴中创建了一个项目，以防有人想看看：http: [//jsfiddle.net/Nikita1984/bFSbR/](http://jsfiddle.net/Nikita1984/bFSbR/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T13:27:49.693

我在这里有一个可排序的绑定：[github.com/rniemeyer/knockout-sortable](http://github.com/rniemeyer/knockout-sortable)。它可以让你用 sortable:myData 替换 foreach:myData 并让你在 UI 中保持最新状态。

您还可以通过以下方式传递选项：

```
<tbody data-bind="sortable: { data: rows, options: { handle: '.sortableHandle', cursor: 'move' } }"> 
```

或配置全局默认值，例如：

```
ko.bindingHandlers.sortable.options.handle = ".sortableHandle"; 
```

这是您的示例更新以使用它：http: [//jsfiddle.net/rniemeyer/fC2DT/](http://jsfiddle.net/rniemeyer/fC2DT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:13:00.793

您是否考虑过使用[KoGrid](https://github.com/Knockout-Contrib/KoGrid)代替？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:30:08.460

我以前遇到过这个，花了我很长时间才弄清楚。基本上发生的事情是将排序绑定到一个空表。您需要创建一个自定义绑定处理程序来添加排序，或者您可以在生成带有敲除的表后添加排序绑定。

# eventbrite - 如何在 EventBrite API 上使用 Organizer_list_events 显示未来的事件

> ID：15765021
> 
> 赞同：0
> 
> 时间：2013-04-02T13:11:37.193
> 
> 标签：eventbrite

当我使用 Organizer_list_events 时，我总是从 eventBrite api 获得结束的事件。我尝试过使用状态，开始（和两者）。但这似乎不起作用。

event_search api 具有“日期：未来”的可能性。哪个工作正常，但是我无法传递organiserId。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:36:54.970

> 请注意，我在 Eventbrite 的平台团队工作

`organizer_list_events`不接受`status`参数：

[http://developer.eventbrite.com/doc/organizers/organizer_list_events/](http://developer.eventbrite.com/doc/organizers/organizer_list_events/)

但是，`user_list_events`确实：

[http://developer.eventbrite.com/doc/users/user_list_events/](http://developer.eventbrite.com/doc/users/user_list_events/)

在一个用户有一个组织者的情况下，这些调用应该返回相同的数据。一个用户可能有多个组织者，在这种情况下`user_list_events`可能会返回比需要更多的数据。尽管如此，使用该`status`参数应该会减少您当前收到的内容。

我们正在构建一个新的、改进了很多的 API，但我可以考虑将一个`status`字段添加到`organizer_list_events`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:18:29.830

使用 user_list_events 我刚刚做了这个（在 c# 中）：

```
items = XElement.Parse(xmlResult).Elements("event").Where(e=>e.Element("organizer").Element("id").Value == this.OrganiserId.ToString()); 
```

# x86 - Netcobol cobol 命令回复“参数无效”

> ID：15765023
> 
> 赞同：0
> 
> 时间：2013-04-02T13:11:46.310
> 
> 标签：x86, 64-bit, solaris, cobol, netcobol

在 Solaris10 x86 64bit 版本上，我安装了 Fujistu NetCobol，并执行了“cobol”命令。结果操作系统回复“参数无效”。

[我按照用户指南](http://www.netcobol.com/sites/default/files/documents/NetCOBUsersGuide.pdf)中的示例使用了这个 cobol 命令。

```
$cobol -dy -M -o P1 P1.cob 
```

有什么遗漏——一些我忽略的设置吗？

我已确认以下内容：

*   具有 x 权限的 cobol
*   PATH 环境变量中的 cobol
*   NetCobol 安装后的环境变量设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:34:45.897

该错误通常意味着您正在尝试在 x86 系统上运行 SPARC 二进制文件，这在 Fujitsu 生产 SPARC 服务器时是有意义的。要验证二进制文件的平台，请运行：

```
% file `which cobol` 
```

（或者`file /opt/something/bin/cobol`如果您知道二进制文件的直接路径。）

# c# - C# 枚举错误：是一个“类型”，在给定的上下文中无效

> ID：15765024
> 
> 赞同：5
> 
> 时间：2013-04-02T13:11:51.987
> 
> 标签：c#, .net, enums

我在 C# (.NET 2.0) 中有一个代码，我在其中调用一个带有输入枚举的方法，但我无法让它工作。

我在方法 isAnOptionalBooleanValue 中有一个编译错误：

```
public static bool isAnOptionalBooleanValue(Status status, String parameterName, Object parameter) 
{
    return isAnOptionalValidValue(status, parameterName, parameter, UtilConstants.BooleanValues);
}

public static bool isAnOptionalValidValue(Status status, String parameterName, Object parameter, Enum setOfValues)
{
     ....
} 
```

在其他班级：

```
public class UtilConstants
{
    public enum BooleanValues
    {
        TRUE, FALSE
    }
} 
```

这个类的存在是因为布尔值作为来自其他系统的输入字符串，所以我将它作为一个对象传递并从我的 Enum 类将它转换为布尔值。

它返回的错误如下：“UtilConstants.BooleanValues' 是一个'类型'，在给定的上下文中无效”返回 isAnOptionalValidValue(...) 行中的错误。

但我不知道如何解决它。通过以下方式更改它：

> return isAnOptionalValidValue(status, parameterName, parameter, typeof(UtilConstants.BooleanValues));

也不起作用。

有任何想法吗？提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T13:14:44.920

而不是`UtilConstants.BooleanValues`（它确实是一种类型而不是一个值），您需要使用实际值。像这样：

```
UtilConstants.BooleanValues.TRUE | UtilConstants.BooleanValues.FALSE 
```

或者，如果您确实想检查输入字符串是否与枚举类型的常量匹配，则应更改签名：

```
public static bool isAnOptionalValidValue(Status status, String parameterName,
                                          Object parameter, Type enumType) 
```

这样，您建议的方法调用 using`typeof`将起作用。
然后，您可以通过调用获取枚举的实际字符串值`Enum.GetValues(enumType)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T13:16:29.560

你可能宁愿使用

```
bool myBool;    
Boolean.TryParse("the string you get from the other system", out myBool); 
```

而不是重新定义 bool。

您也可以将其“可选”为可空 bool（因此，如果没有 true 值，则 false 为空）：

```
bool? myBool = null;
bool tmp;
if (Boolean.TryParse("the string you get from the other system", out tmp))
    myBool = tmp; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T13:15:49.063

`Enum setOfValues`在参数列表中意味着您传递特定的值，例如`BooleanValues.TRUE`- 不是类型本身。传递类型使用`Type setOfValues`.

从字符串使用解析特定枚举值

```
BooleanValues enumValue = (BooleanValues)Enum.Parse(typeof(UtilConstants.BooleanValues), stringValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:28:45.223

你提到你`string`从另一个系统中得到一个你必须转换成`Boolean`类型的。因此，我将为此编写自己的转换器，而不是使用枚举：

```
public static class SpecificBooleanConverter
{
    private static Dictionary<string, bool> _AllowedValues;

    static SpecificBooleanConverter()
    {
        _AllowedValues = new Dictionary<string, bool>(StringComparer.CurrentCultureIgnoreCase);
        _AllowedValues.Add("true", true);
        _AllowedValues.Add("false", false);
        _AllowedValues.Add("foo", true);
        _AllowedValues.Add("bar", false);
    }

    public static bool TryParse(string value, out bool result)
    {
        return _AllowedValues.TryGetValue(value, out result);
    }
} 
```

然后可以这样调用：

```
bool dotNetBoolean;
var booleansFromOtherSystem = new[] { "hello", "TRUE", "FalSE", "FoO", "bAr" };

foreach (var value in booleansFromOtherSystem)
{
    if (!SpecificBooleanConverter.TryParse(value, out dotNetBoolean))
    {
        Console.WriteLine("Could not parse \"" + booleansFromOtherSystem + "\".");
    }

    if (dotNetBoolean == true)
    {
        Console.WriteLine("Yes, we can.");
    }
    else
    {
        Console.WriteLine("No, you don't.");
    }
} 
```

# css - 你能有两个 div，其中一个始终保持 100% 的高度吗？

> ID：15765030
> 
> 赞同：1
> 
> 时间：2013-04-02T13:12:01.413
> 
> 标签：css, html

我有 2 个容器，向左浮动：

*   带有隐藏溢出的框 1（红色 div）
*   高度为 100% 的框 2（黄色 div）

我希望框 1 始终填充到 100%，即使框 2 变大

```
<style>
* {margin:0;}
html {position: relative; min-height: 100%;}
body {margin: 0 0 100px;}
#footer{
    position: absolute;
    left: 0;
    bottom: 0;
    height: 100px;
    width: 100%; background:gray;
    }

#box1{width:200px; background:yellow; float:left; height:100%}
#box2{width:600px;background:red; float:left; overflow:hidden; height:2000px; }
</style>

<div id='box1'></div>
<div id='box2'></div>
<div id='footer'></div> 
```

[http://jsfiddle.net/isherwood/Gy7Jj/](http://jsfiddle.net/isherwood/Gy7Jj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:14:39.253

将高度设置为`100%`不会影响高度。浮动元素将环绕其内部内容。您应该使用 javascript 来动态更改高度。以下是使用`jQuery`'s 的一种方法`height()`：

文档准备好后设置高度

```
$(document).ready(function(){
    $("#box1").height($("#box2").height());
}); 
```

绑定resize事件：

```
$(window).resize(function(){
    $("#box1").height($("#box2").height());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:16:27.740

您需要在打印内容后设置高度（Jquery）

或设置主要静态 div。

```
<style>
* {margin:0;}
html {position: relative; min-height: 100%;}
body {margin: 0 0 100px;}
#footer{
    position: absolute;
    left: 0;
    bottom: 0;
    height: 100px;
    width: 100%; background:gray;
    }
#main { height:2000px; }
#box1{width:200px; background:yellow; float:left; height:100%;}
#box2{width:600px;background:red; float:left; overflow:hidden; height:100%; }
</style>
<div id="main">
  <div id='box1'></div>
  <div id='box2'></div>
</div>
<div id='footer'></div> 
```

# android - android上有没有通用的接口来模拟鼠标移动和点击？

> ID：15765032
> 
> 赞同：2
> 
> 时间：2013-04-02T13:12:04.187
> 
> 标签：android, mouse

图像是这样的，我们在一部 Android 手机上移动和触摸来控制另一部 Android 手机的鼠标操作。

我有一些关于如何模拟鼠标移动和点击 linux 的示例，但我想在 Android 上实现它。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:16:08.290

如果是出于测试原因，您可以为此尝试[monkeyrunner 。](http://developer.android.com/tools/help/monkeyrunner_concepts.html)它是非常有用的测试工具。

# javafx-2 - JavaFX ScrollPane 显示视口之外的对象

> ID：15765034
> 
> 赞同：0
> 
> 时间：2013-04-02T13:12:07.580
> 
> 标签：javafx-2, viewport, scrollpane

在我当前的应用程序中，我创建了一个以 AnchorPane 作为内容的 ScrollPane。根据用户的操作，此 AnchorPane 将填充或多或少的图像，我使用 Canvas（在图像上绘制更多信息所必需）。

但是，当我滚动 ScrollPane 时，所有子图像仍在重新绘制，即使它们不在 ViewPort 内。有没有其他人遇到过这个问题或解决方案？

截图： [https ://dl.dropboxusercontent.com/u/51537629/images%20drawn%20outside%20of%20viewport.png](https://dl.dropboxusercontent.com/u/51537629/images%20drawn%20outside%20of%20viewport.png)

滚动窗格的初始化：

```
iconPane = new AnchorPane();
iconPane.setStyle("-fx-background-color: white; -fx-border-color: gray;");
iconPane.setMinHeight(546);
iconPane.setMinWidth(814);
scrollpane = new ScrollPane();
scrollpane.setContent(iconPane);
scrollpane.setVisible(false);        
AnchorPane.setTopAnchor(scrollpane, 13.0);
AnchorPane.setBottomAnchor(scrollpane, 13.0);
AnchorPane.setLeftAnchor(scrollpane, 13.0);
AnchorPane.setRightAnchor(scrollpane, 13.0); 
```

创建图标：

```
private VBox createIconPane(TaskInformation tinfo) {
    VBox vbox = new VBox();
    Canvas canvas = new Canvas(75, 75);
    GraphicsContext gc = canvas.getGraphicsContext2D();
    Image im;
    if (tinfo.getCurrent() != null) {
        if (tinfo.isCurrentStop()) {
            String status = utilities.getCurrentTaskVersion(tinfo.getTask()).getStatus();
            if (status.equals("finished")) {
                im = new Image(this.getClass().getClassLoader().getResourceAsStream("dna-current.png"));
            } else if (status.equals("failed")) {
                im = new Image(this.getClass().getClassLoader().getResourceAsStream("dna-failed.png"));
            } else {
                im = new Image(this.getClass().getClassLoader().getResourceAsStream("dna-processing.png"));
            }
        } else {
            im = new Image(this.getClass().getClassLoader().getResourceAsStream("dna-current.png"));
        }
    } else {
        im = new Image(this.getClass().getClassLoader().getResourceAsStream("dna-excluded.png"));
    }
    gc.drawImage(im, 5, 5);
    gc.setStroke(Color.GREEN);
    gc.strokeText(tinfo.getFinished() + "", 59, 15);
    gc.setStroke(Color.RED);
    gc.strokeText(tinfo.getFailed() + "", 59, 28);
    gc.setStroke(Color.BLUE);
    gc.strokeText(tinfo.getProcessing() + "", 59, 41);
    Label namelabel = new Label(tinfo.getTask().getName());
    namelabel.setLayoutX(0);
    namelabel.setLayoutY(68);
    vbox.getChildren().addAll(canvas, 
    return vbox;
} 
```

将所有图标添加到视图中：

```
private void createChildIcon(TaskInformation tinfo) {
    VBox taskicon = createIconPane(tinfo);
    taskicon.setLayoutX((tinfo.getTask().getLevel() - 6) / 2 * 120 + 5);
    if (tinfo.getTask().getLevel() <= levelLastAddedTask && maxYCoor != 5) {
        maxYCoor += 95;
    }
    levelLastAddedTask = tinfo.getTask().getLevel();
    taskicon.setLayoutY(maxYCoor);
    iconPane.getChildren().add(taskicon);
    for (int count = 0; count < tinfo.getChildren().size(); count++) {
        createChildIcon(tinfo.getChildren().get(count));
    }
} 
```

JDK：7，但也可以编译为旧版本

JFX：2.2.21

在与我的一位同事进行一些测试后，我们发现这一定是 Windows 问题。它可以在 Linux 上完美运行，但不能在 Windows 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T22:56:48.090

尝试添加 VM 选项“-Dprism.order=j2d”。这是一种变通方法而不是解决方案，因为它正在用软件管道替换您的硬件加速图形管道。如果这可行，请添加 VM 选项“-Dprism.verbose=true”，以便我们可以查看哪些硬件存在问题。

我在 JavaFX 问题跟踪器中添加了一个错误：[https](https://javafx-jira.kenai.com/browse/RT-31044) ://javafx-jira.kenai.com/browse/RT-31044 。

# c# - 数据表列的 Linq Lambda 平均 - 删除 0 个值

> ID：15765042
> 
> 赞同：0
> 
> 时间：2013-04-02T13:12:19.553
> 
> 标签：c#, linq, lambda, datatable, average

我正在平均 DataTable 中的每一列并将这些平均值添加到列表中。如何防止平均值包含 0 值？我已经尝试了下面的代码，但得到一个错误，即运算符`!=`不能应用于类型的操作数`object[]`和`int`

```
for (int col = 5; col < DT2.Columns.Count; col++)
{
    double avg = DT2.AsEnumerable()
                 .Where(x => 
                     x[DT2.Columns[col]] != DBNull.Value || 
                     x[DT2.Rows[col].ItemArray != 0)
                 .Average(x => double.Parse(x[DT2.Columns[col]].ToString()));
    averages.Add(avg);
} 
```

我从 col = 5 开始，因为我只想对第五列之后的每一列进行平均。被平均的列中的数据是双精度类型。如果我删除我试图删除 0 值的代码，则代码运行，但如果例如我平均第一列并且该列有 10 行但其中 3 行包含 0，它将把所有行加在一起并除以 10我需要它除以 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:19:13.363

分离任务。首先，创建一个返回一列中的值的函数：

```
IEnumerable<object> GetColumnValues(DataTable dt, int columnIndex)
{
    if (dt.Columns.Count < columnIndex + 1)
        yield break;
    foreach (DataRow row in dt.Rows)
    {
        if (row[columnIndex] != DBNull.Value)
            yield return row[columnIndex];
    }
} 
```

现在您已经有了获取列值的方法，接下来您可以决定如何处理它们。例如，遍历您的列和每列执行：

```
var avg =  GetColumnValues(DT2, colIndex).OfType<double>()
           .Where(d => d > 0).Average(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:48:39.767

如果您只想要 5 之后的列，则可以使用内联列。

```
var columns = DT2.Columns.Cast<DataColumn>().Skip(5);
var rows = DT2.AsEnumerable();

IEnumerable<double> rowAverages =
      rows
        .Select(r =>
            columns
                .Where(c =>
                    r[c] != DBNull.Value &&
                    r[c] is double &&
                    ((double)r[c]) > 0)
                .Select(c =>
                    (double)r[c]))
        .Select(r =>
            r.Any() ? r.Average() : 0);

IEnumerable<double> columnAverages =
      columns
        .Select(c =>
            rows.Where(r =>
                    r[c] != DBNull.Value &&
                    r[c] is double &&
                    ((double)r[c]) > 0)
                .Select(r => (double)r[c]))
        .Select(c => c.Any() ? c.Average() : 0); 
```

# sql - webservice-将odbc访问连接转换为sql server

> ID：15765044
> 
> 赞同：0
> 
> 时间：2013-04-02T13:12:20.290
> 
> 标签：sql, vb.net, visual-studio-2010, odbc

我正在尝试将我的软件从 odbc 连接更新到我的新 sql 服务器。新的 sql 连接默认为旧数据库（见下面的代码）。我什至尝试保留 sql 的 odbc 连接并指向我的新数据库，但 web 服务返回的是布尔值，而不是肥皂。sql server 是为更新的 web 服务设置和工作的。我错过了什么？

这是旧代码：

```
<WebMethod()> Public Function LookupItem(ByVal strUPC As String) As DataSet
    Try
        Dim connUPC As New Odbc.OdbcConnection
        Dim ConnectionString As String
        Dim strSQL As String
        '//get upc info            
        strSQL = "SELECT Inv_Qty.*,PLU.*,PLU.PLU_NUM, PLU.DEPT_NUM From PLU INNER JOIN Inv_Qty ON PLU.PLU_NUM=Inv_Qty.PLU_NUM WHERE ((PLU.PLU_NUM) = '" & strUPC & "');"
        ConnectionString = "DSN=mainODBC"
        connUPC.ConnectionString = ConnectionString
        Dim cmdUPC As New Odbc.OdbcCommand(strSQL, connUPC)
        Dim dsUPC As DataSet = New DataSet
        Dim daUPC As Odbc.OdbcDataAdapter = New Odbc.OdbcDataAdapter(cmdUPC)
        connUPC.Open()
        daUPC.Fill(dsUPC, "TC")
        connUPC.Close()
        connUPC = Nothing
        Return dsUPC
    Catch ex As Exception

    End Try
End Function 
```

我试图改变连接：

```
<WebMethod()> Public Function LookupItem(ByVal strUPC As String) As DataSet
    Try
        Dim connUPC As New Data.SqlClient.SqlConnection
        Dim ConnectionString As String
        Dim strSQL As String
         '//get upc info            
        strSQL = "SELECT Inv_Qty.*,PLU.*,PLU.PLU_NUM, PLU.DEPT_NUM From PLU INNER JOIN Inv_Qty ON PLU.PLU_NUM=Inv_Qty.PLU_NUM WHERE ((PLU.PLU_NUM) = '" & strUPC & "');"
         ConnectionString = "Data Source=localhost\db;Initial Catalog=DB_SQL;Persist Security Info=True;User ID=myID;Password=myPass"
        connUPC.ConnectionString = ConnectionString
         Dim cmdUPC As New Data.SqlClient.SqlCommand(strSQL, connUPC)
        Dim dsUPC As DataSet = New DataSet
        Dim daUPC As Data.SqlClient.SqlDataAdapter = New Data.SqlClient.SqlDataAdapter(cmdUPC)
         connUPC.Open()
        daUPC.Fill(dsUPC, "TC")
        connUPC.Close()
        connUPC = Nothing
        Return dsUPC
    Catch ex As Exception

    End Try
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:33:08.883

试试这种方式:)希望它有帮助......

```
 <WebMethod()> Public Function LookupItem(ByVal strUPC As String) As DataSet
    Try
        Dim connUPC As New Data.SqlClient.SqlConnection
        Dim cmdUPC As New Data.SqlClient.SqlCommand
        Dim daUPC As New Data.SqlClient.SqlDataAdapter
        Dim dsUPC As DataSet = New DataSet
        Dim ConnectionString As String = "Data Source=localhost\db;Initial Catalog=DB_SQL;Persist Security Info=True;User ID=myID;Password=myPass"
        Dim strSQL As String = "SELECT Inv_Qty.*,PLU.*,PLU.PLU_NUM, PLU.DEPT_NUM From PLU INNER JOIN Inv_Qty ON PLU.PLU_NUM=Inv_Qty.PLU_NUM WHERE ((PLU.PLU_NUM) = '" & strUPC & "');"

        '// Opening the connection
        connUPC.Open()
        cmdUPC.Connection = connUPC
        cmdUPC.CommandText = strSQL

        daUPC.SelectCommand = cmdUPC
        daUPC.Fill(dsUPC)

        connUPC.Close()
        connUPC = Nothing

        Return dsUPC
    Catch ex As Exception

    End Try
End Function 
```

玩得开心！

# c# - nhibernate如何在复杂更新中找到坏字段

> ID：15765049
> 
> 赞同：0
> 
> 时间：2013-04-02T13:12:41.870
> 
> 标签：c#, nhibernate, fluent-nhibernate

我将一个复杂的对象树保存回我的 sql server 数据库。对象树上的字段之一必须是一个`null`或一个有趣的日期，因为我收到此错误消息。

> *“SqlDateTime 溢出。必须在 1/1/1753 12:00:00 AM 和 12/31/9999 11:59:59 PM 之间。”*

我可以通过使用视觉工作室检查器找到它并向下钻取，直到找到不可靠的字段，但这非常耗时。此外，它不会导致自己产生一个很好的日志记录错误消息。

他们是我可以让 nhibernate 返回带有错误消息的违规字段名称的一种方式吗？

我没有做任何花哨的事情，

```
public TEntity Save(TEntity entity)
    {
        return Save(entity, false);
    } 
```

注意：我正在使用 fluent nhibernate 进行配置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:33:59.657

NHibernate 不会告诉你是哪个字段导致了这种情况，但很容易缩小范围：99% 确定，它是一个你没有初始化的**不可空** `DateTime`字段，所以它的默认值是 1/1/1 (IIRC )，这显然超出了范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:23:43.547

我不能为 SQL Server 说话，但使用 SQLite，经常显示违规字段的名称，但深埋在异常消息或内部异常中，很容易错过。

简单地调用异常的 ToString() 方法可能很有价值，该方法将创建一个包含所有消息文本（包括所有内部异常）的单个字符串，并将其显示在消息框中。

或者，在即时窗口中键入以下内容，例如

```
Debug.Print( ex.ToString() ) 
```

当您可以一次看到所有内容时，您可能会在中间某个地方找到您需要的东西。

# powershell - powershell 中的持久变量

> ID：15765059
> 
> 赞同：0
> 
> 时间：2013-04-02T13:13:04.337
> 
> 标签：powershell, module, cmdlet

我用 c# 编写了一个 powershell 模块，它允许我调用一些 web 服务。在我可以使用它们之前，我必须指定服务的位置。例如：

```
Set-ServiceUrl 'http://myService.cloudapp.net/'
Create-Something ...
Get-Something ... 
```

测试函数 Create-Something 和 Get-Something 访问在 Set-ServiceUrl 函数中设置的静态变量“serviceurl”。

这类似于 Azure 模块，您必须先调用 Set-AzureSubscription 才能查询服务。

我和 Azure 模块之间的不同之处在于，每次启动 powershell 时我都必须为我的模块指定服务 url，而我只需设置一次 AzureSubscription。

powershell 中是否有任何机制可以“永久”存储此类信息？还是我必须使用基于文件/注册表或环境变量的解决方案？你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:18:48.220

PowerShell 没有用于跨会话持久化数据的内置方法；您必须想出一种自己存储和检索它的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:32:46.487

一种方法是将其存储在全局变量中并从其他函数中检查它，甚至将变量的值分配给所需的参数。

没有“永远”的机制，即使是 Azure 团队也将他们的信息保存到磁盘。

# c++ - 友元函数的 C2248 错误

> ID：15765065
> 
> 赞同：2
> 
> 时间：2013-04-02T13:13:19.817
> 
> 标签：c++, visual-c++

我正在编写 << 运算符的基本重载，因此我在类接口中添加了一个友元函数

```
namespace Warehouse
{
namespace Dto
{
    class Product;

    class AbstractOrder : public ICloneableItem
    {
      protected:
        unsigned long _id;
        std::string _name;
        std::vector<Product*> _products;

      public:
        AbstractOrder();
        virtual ~AbstractOrder();

        double computePrice() const;

        void addProduct(Product* product);
        void removeProduct(Product* product);
        void removeAllProducts();

        void setName(const std::string& name) { _name = name; }
        std::string getName() const { return _name; }

        unsigned long getId() const { return _id; }
        std::vector<Product*> getProductList() const { return _products; }

        friend std::ostream& operator<<(std::ostream& os, const AbstractOrder& ord);
    };
}
} 
```

在实现文件中，这是函数的代码

```
using namespace Warehouse::Dto;
....

std::ostream& operator<<(std::ostream& os, const AbstractOrder& ord) 
{
os << "[" << ord._id << "] Order " << ord._name << ": " << ord.computePrice();
return os;
} 
```

为什么我收到以下错误？错误 1 ​​错误 C2248：“Warehouse::Dto::AbstractOrder::_id”：无法访问在类“Warehouse::Dto::AbstractOrder”中声明的受保护成员

实际上我已经修复了它，在实现文件上的 operator<< 之前添加了命名空间。我不明白为什么即使在实现文件中我使用了**using namespace Warehouse::Dto**指令，我也必须这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:19:14.177

因为`operator <<`是在全局命名空间中定义的，而`AbstractOrder`类是在`Warehouse::Dto`命名空间中定义的。但是朋友声明是针对`Warehouse::Dto`命名空间中的流操作符的。

如果要在全局命名空间中为运算符定义正确的友元声明，则为：

```
friend std::ostream& ::operator<<(std::ostream& os, const AbstractOrder& ord); 
```

但话又说回来，您希望操作员与它正在流式传输的类位于相同的命名空间中。

# git - 将更改合并/重新调整到父分支以使所有主题分支保持最新

> ID：15765068
> 
> 赞同：0
> 
> 时间：2013-04-02T13:13:25.593
> 
> 标签：git

**更新**

这回答了我的问题： [重新定位一个分支，包括它的所有孩子](https://stackoverflow.com/questions/5600659/rebasing-a-branch-including-all-its-children)

**下面的原始问题**

考虑以下日志图：

```
A---B---C origin/master
         \
          D---E---F master
                  \
                  \ E---F topic1
                    G---H---I topic2 
```

如图所示，我有一个大师，我做了一些工作。在 master 上提交 F 之后，我也开始研究 2 个主题。

此时，我决定要获取最近的更新`git fetch`，现在我的图表如下所示：

```
A---B---C---1---2---3 origin/master
         \
          D---E---F master
                  \
                  \ E---F topic1
                    G---H---I topic2 
```

我想以最轻松的方式合并/重新调整对 master、topic1 和 topic2 的所有这些新更改（因为我真的只是想让它们保持最新）。它应该是这样的：

```
A---B---C---1---2---3 origin/master
                     \
                      D---E---F master
                              \
                              \ E---F topic1
                                G---H---I topic2 
```

我应该做什么？我看到的方式正在做

```
$git checkout master
$git rebase origin/master
$git checkout topic1
$git rebase master
$git checkout topic2
$git rebase master 
```

有没有更简单的方法来做到这一点？这似乎是一项相当普遍的任务。

# php - 解析多对多关系MYSQL数据库

> ID：15765081
> 
> 赞同：0
> 
> 时间：2013-04-02T13:14:00.380
> 
> 标签：php, mysql, database, many-to-many

我有3张桌子，

users(id) 、 userproduct (user_id,product_id) 和 product (id)。

当用户添加产品时，他们的 user_id 和 product_id 保存在 USERPRODUCT 表中。

现在同时另一个用户可以保存一个产品（有点像“设置为收藏”），我需要保存保存它的用户的 user_id 和产品的 product_id。这将创建另一个表（称为收藏夹），但是该表也是对“用户”表和“产品”表之间的多对多关系的解析。

问题：是否有可能让 2 个表解决多对多关系，或者有没有其他方法可以解决我的问题。

如果可能的话，如何在 ER 图中绘制它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:32:03.390

这取决于你想要什么。您只能使用一个表并设计与布尔字段 USERS(id) PRODUCTS(id) USERPROD(userid, productid, isbought, isfavorite, isowned) 的关系

或者您可以为每个关系使用一个多对多支持表，这取决于您

也许您希望 PRODUCTS 表中的另一个字段“所有者”来存储用户 ID。这是一对一的关系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:41:30.403

你想要做的实际上是描述用户和产品之间的关系：最喜欢的，或者他“拥有”它。
只需在`userproduct`定义关系的 -table 中添加另一个字段：`favorite`或`owned`

# ruby - Ruby FFI 枚举用法 - 发送整数

> ID：15765084
> 
> 赞同：0
> 
> 时间：2013-04-02T13:14:06.323
> 
> 标签：ruby, ffi

在 Enums 的 ffi 文档（[https://github.com/ffi/ffi/wiki/Enums](https://github.com/ffi/ffi/wiki/Enums)）中提到，当您创建 ffi 时，例如：

```
# Example using enums

module Week
  extend FFI::Library
  ffi_lib "week"

  enum :day, [:sunday, 1,
              :monday,
              :tuesday,
              :wednesday,
              :thursday,
              :friday,
              :saturday ]

  attach_function :is_work_day, [ :day ], :int
end

# How you would call the function:
Week.is_work_day( :monday )

# This is also allowed, in case you need to use integers:
Week.is_work_day( 2 ) 
```

问题是：当您发送“2”时，它会查看 :day 枚举并找到第二个条目的值，还是将实际的“2”值发送到您的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:25:08.617

两个调用都会将整数发送`2`到函数。第一次调用会将符号解析`:monday`为`2`，第二次调用不需要，因为 2 已经给出。

# grails - Grails 集成测试中的奇怪行为

> ID：15765085
> 
> 赞同：0
> 
> 时间：2013-04-02T13:14:07.553
> 
> 标签：grails, integration-testing, missingmethodexception

我正在 IBM [（此处）](http://www.ibm.com/developerworks/java/library/j-grails11188/index.html)上做 Grails 教程，但我对集成测试感到非常失望。总结一下：我调用了一个根据ID（iata）呈现JSON对象的方法。

我的域名是：

```
 class Airport {        
    String name
    String iata
} 
```

我的控制器是：

```
class AirportController {

    // In order to enable scaffolding
    def scaffold = Airport

    def iata = {
        def iata = params.id?.toUpperCase() ?: "NO IATA"
        def airport = Airport.findByIata(iata)
        if (!airport) {
            airport = new Airport(iata: iata, name: "Not found")
        }

        render airport as JSON
    }    
} 
```

当我这样做时：（ `http://localhost:8080/trip-planner/airport/iata/foo`为了检索空值）或 `http://localhost:8080/trip-planner/airport/iata/DEN`（对于 DENVER），该方法工作正常！

问题是我的集成测试：

```
class AirportControllerTests extends GroovyTestCase {
    void testWithGoodIata(){
        def controller = new AirportController()
        controller.metaClass.getParams = { ->
        return ["id":"den"]
        }

        controller.iata()

        def response = controller.response.contentAsString
        assertTrue response.contains("Denver")
    }

    void testWithWrongIata() {
        def controller = new AirportController()
        controller.metaClass.getParams = { ->
        return ["id":"foo"]
        }

        controller.iata()

        def response = controller.response.contentAsString
        assertTrue response.contains("\"name\":\"Not found\"")      
    }
} 
```

问题是：

每当我运行测试（通过运行 : `grails test-app -integration trip.planner.AirportControllerTests`）时，我总是会在第一次测试和**第二次**`groovy.lang.MissingMethodException`测试中获得良好的行为。（即使我切换两者：第二次测试总是失败）

 **如果我单独运行它们，它可以工作。异常发生在这一行（在控制器中）：`def airport = Airport.findByIata(iata)`

这与“交易”有关吗？任何帮助都会很棒:)

PS：我正在使用 Grails 2.2.1

异常堆栈跟踪：

```
groovy.lang.MissingMethodException: No signature of method: trip.planner.Airport.methodMissing() is applicable for argument types: () values: []
    at trip.planner.AirportController$_closure4.doCall(AirportController.groovy:39)
    at trip.planner.AirportControllerTests.testWithWrongIata(AirportControllerTests.groovy:25) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:28:04.113

我怀疑您在一个测试中所做的元类更改会以某种方式泄漏到另一个测试中。但是您不需要（也不应该）在*集成*测试中操作元类，只需说

```
def controller = new AirportController()
controller.params.id = "den" 
```

您只需要对*单元*测试进行模拟。

请记住，您正在查看的教程是在 2008 年（在 Grails 1.0.x 时代）编写的，从那时起 Grails 已经走了很长一段路，其中一些组件（包括测试）已经完成了或更完整的重写。**

# jquery - 在 MVC3 中使用 Jquery 验证 DropDown

> ID：15765086
> 
> 赞同：0
> 
> 时间：2013-04-02T13:14:15.040
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我已经实现了简单的 MVC3 应用程序，我想验证控制表单特定的**DIV**

//视图模型

```
public class NewStreamViewModel
    {
        public NewStreamViewModel()
        {
            this.Streams = new List<SelectListItem>();
            this.Subjects = new List<SelectListItem>();
            this.Languages = new List<SelectListItem>();
        }

        [Display(Name = "Language")]
        [Required(ErrorMessage = "{0} is Required")]
        public int? LanguageId {get;set;}

        [Display(Name = "Stream")]
        [Required(ErrorMessage = "{0} is Required")]
        public int? StreamId {get;set;}

        public int[] SubjectIds {get;set;}

        public List<SelectListItem> Languages {get;set;}
        public List<SelectListItem> Streams {get;set;}
        public List<SelectListItem> Subjects {get;set;}

    } 
```

//查看.cshtml

```
<div id="tab1">
@using (Html.BeginForm())
{
     <table style="background: none; width: 100%;">
                    <tr>
                        <td>
                            Language
                        </td>
                        <td>
                            @Html.DropDownListFor(m=>m.LanguageId.Value,Model.Languages)
                            @Html.ValidationMessageFor(m=>m.LanguageId.Value)
                        </td>
                    </tr>
                    <tr>
                        <td>Stream
                        </td>
                        <td>
                            @Html.DropDownListFor(m => m.StreamId.Value, Model.Streams)
                             @Html.ValidationMessageFor(m=>m.StreamId.Value)
                        </td>
                    </tr>
                    <tr>
                        <td>Subjects
                        </td>
                        <td>
                            @Html.ListBoxFor(m => m.SubjectIds, Model.Subjects, new { Style = "width:300px;" })
                        </td>
                    </tr>

                </table>
}
    <input type="button" value="Save" id="addspan" />
</div>  

<script type="text/javascript">
    $(function () {
        var count = 2;
        $('#wrap').tabs();
        $('#addspan').click(function () {
            var $step = $('#tab1');
            var validator = $("form").validate(); // obtain validator
            var anyError = false;
            var selects = $('#tab1').find('select');
            selects.each(function () {
                if (!validator.element(this)) { // validate every input element inside this step
                    anyError = true;
                }

            });
            if (anyError) {
                return false;
            }

            count++;
        });
    });
</script> 
```

我如何在 jquery 的客户端验证这些下拉菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:32:15.127

将此文件添加到您的页面（这将允许客户端验证）：

```
<script src="@Url.Content("~/scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

来电：

```
$('form').valid() 
```

`true`如果没有错误将返回，如果有错误并`false`在输入附近显示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:30:17.897

您可以像这样手动验证下拉列表：

```
$('#addbtn').click(function(){
var ddlvalue= $("#dropdownid option:selected").val();
if(ddlvalue!='-1')
{    
   //Do your work.
}
else
  alert('Please select product");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T13:38:52.507

```
 <script type="text/javascript" language="javascript">
        $(document).ready(function () {
            $('#<%=btnSubmit.ClientID%>').click(function () {
                if ($('#<%=ddlCity.ClientID%>').val() == 0) {
                    alert('Please select Country')
                    return false;
                   }                              
                if ($('#<%=txtName.ClientID%>').val() == "") {
                    alert(' Name')
                    return false;
                }

            });
        });  

    </script> 
```

# javascript - 如何执行：onClick Javascript，隐藏一个带有过渡效果的 div

> ID：15765088
> 
> 赞同：1
> 
> 时间：2013-04-02T13:14:18.523
> 
> 标签：javascript, onclick

这是一个与另一个成员先前的问题相关的问题，可以在[此处](https://stackoverflow.com/questions/5515527/javascript-onclick-hide-div)找到。

这是隐藏 div 的 Javascript 函数（这是对其他成员问题的回答）：

```
function hide(obj) {

    var el = document.getElementById(obj);

        el.style.display = 'none';

} 
```

HTML 是：

```
<div id='hideme'>
Warning: These are new products
<a href='#' class='close_notification' title='Click to Close'>
<img src="images/close_icon.gif" width="6" height="6" alt="Close" onClick="hide('hideme')" />
</a>
</div> 
```

我对此的后续问题是：如何添加一个很酷的过渡效果？结果将是 div 'hideme' 会慢慢关闭。有解决办法吗？

非常感谢大家！将不胜感激！

注意：我是 Javascript 的菜鸟。0-0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:22:39.813

A popular choice for this would be [JQuery UI's effect method](http://jqueryui.com/effect/). With this, you can write some very simple Javascript to hide your div in a stylish manner, for example:

```
function hide(obj) {

   $(obj).effect("scale");

} 
```

EDIT: Here's an example [jsFiddle](http://jsfiddle.net/3TVEJ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:27:41.257

使用jQuery做过渡效果：

```
$(function(){
    $("a.close_notification").click(function(e){
        e.preventDefault();
        // stop other animations and hide, 500 milliseconds
        // you can use the function fadeOut for that too
        $("#hideme").stop().hide(500);

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:20:15.130

```
$("#"+el).fadeOut(500);//el must be the id of the element 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:18:43.950

如果你使用 jQuery

```
function hide() {
    $(this).parent().fadeOut();
} 
```

由于这是由事件触发的，因此“this”变量将设置为它来自的元素，因为您希望父元素在单击时消失，这将起到作用

编辑：为此，您可能必须使用您的 HTML 以及`$(this).parent().parent()...`您需要多少，但这是最好的方法，然后您不需要传递 ID

编辑 2：所以 .parent() 选择包含所选元素的元素，所以在这种情况下 $(this) 指的是被点击的按钮，因为那是点击事件的来源。

所以 $(this).parent() 指的是容器元素，在这种情况下是`a`元素，因此 $(this).parent().parent() 指的是`div`要隐藏的元素。

所以你可以给图像一个“可关闭”类，然后执行以下操作

```
$('.closable').click(function() {
    $(this).parent().parent().fadeOut();
} 
```

这意味着每当您单击具有可关闭类的东西时，它将在 DOM 树上向上移动两个元素到 (with `.parent().parent()`)，然后将其淡出。

这将允许您从图像中删除点击事件，您只需将上面的处理程序放在 jQuery document.ready 函数中，如下所示：

```
$(document).ready(function() {
    //Click function here
}); 
```

# c - pthread 似乎没有使用更新的全局数据值

> ID：15765091
> 
> 赞同：0
> 
> 时间：2013-04-02T13:14:22.933
> 
> 标签：c, linux, multithreading, pthreads

我是线程新手。我想让两个线程`xthread`打印'X'；并`ythread`打印“Z”；连续直到用户插入`'C'`或`'c'`在`stdin`。我已经使用 select 来检查是否有任何用户输入。如果有用户输入，我会使用`scanf`它来获取它`read`并进行比较。

我一直保持`read`全球性。[有没有其他方法可以在线程之间共享非全局数据？] . 我假设，当用户`'c'`在 stdin 输入时，当前正在运行的线程读取它并将其存储在`read and breaks out`. 我已经使用该标志`read_input`向其他线程指示已经接受了输入并且您不需要再次接受用户输入。

**问题**：

用户输入`'c'`

xthread 退出 [或 ythread]

但是，ythread 仍然保持循环并仅在我`'c'`再次进入后才退出。[我的假设是它已经读取了之前的值`read`并且仍在使用相同的值进行比较]

我做错了什么？

```
#include<stdio.h>
#include<sys/select.h>
#include<pthread.h>
static unsigned int i =0;
char read;
int read_input = 0;

void* print_fn(void* arg)
{
    int fd = fileno(stdin);
    struct timeval tv = {0,0};
    fd_set fdset;
    int s;
    char *buffer = NULL;
    unsigned int len;

    while(1)
    {
        struct timespec t = {0,433300000};
        const struct timespec * tp = &t;
        nanosleep(tp,&t);

        printf("\nValue of read is %d",read);

        //sleep(1); 
        FD_ZERO(&fdset);
        FD_SET(fd, &fdset);
        printf("\n%p prints %c and i is %d",pthread_self(),*((char*)arg),i++);  
        if((s = select(fd+1, &fdset, NULL, NULL, &tv)) == 1)
        {
            printf("\nValue of s is %d",s);
            if(!read_input)
                scanf("%c",&read);
            fflush(stdin);
            printf("\nValue of read is %d",read);
            printf("\nChecked for %d or % d",'C','c');
            if(read == 'C' || read == 'c')
            {
                read_input = 1;
                break;
            }
        }
        printf("\nHere");
    }
    printf("\nI, %p survived while(1)",pthread_self());
    return NULL;
}

int main()
{

pthread_t xthread,ythread,checkThread;  
char c1 = 'X', c2 = 'Z';
pthread_create(&xthread,NULL,print_fn,&c1);
pthread_create(&ythread,NULL,print_fn,&c2);
pthread_join(xthread,NULL);
pthread_join(ythread,NULL);

return 0;
} 
```

如果有更好的方式来获取用户输入，请告诉我。我不知道使用`pthread_cond_t`是否可以解决我的问题。我没有发现使用互斥锁的必要性。[如果我错了请纠正我]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:22:36.687

> 有没有其他方法可以在线程之间共享非全局数据？

是的，它被称为 IPC（进程间通信）并且可以与 pthreads 一起使用。这包括：套接字、管道、共享内存等。

关于程序本身，正如Daniel Fischer 在评论中所写，read_input 不是易失性的，因此编译器可以自由地对其进行优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:15:01.840

编译器优化读取`read`（顺便说一句，如果有人愿意的话，坏名`#include <unistd.h>`）的可能性，因为它不在`volatile`一边，

```
if((s = select(fd+1, &fdset, NULL, NULL, &tv)) == 1)
{
    printf("\nValue of s is %d",s);
    if(!read_input)
        scanf("%c",&read);
    fflush(stdin);
    printf("\nValue of read is %d",read);
    printf("\nChecked for %d or % d",'C','c');
    if(read == 'C' || read == 'c')
    {
        read_input = 1;
        break;
    }
} 
```

`while(1)`你有打破`if(select(...))`.

因此，在第一个线程读取`'C'`或`'c'`并退出后，另一个线程仅在有新输入可用时检查条件`stdin`（在我的系统上需要`Return`按下键）。

将该条件`if (select(...))`移到第二个线程之外，以便有机会退出而不`select`报告更多输入可用。

还，

```
fflush(stdin); 
```

是未定义的行为。尽管一些实现承诺它会做一些明智的事情，但你不应该依赖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:15:28.900

您的代码的主要问题`read`是不像`volatile`丹尼尔所说的那样。这意味着编译器不知道它可以像另一个线程一样被不可预见的外力改变。

除此之外，您的代码还有很多错误和不良做法：

*   不要定义具有标准库名称等价物的符号，例如`read`.
*   不要`select`在多个线程中使用相同的文件描述符。这是灾难的秘诀。如果两个线程同时从 select 返回，它们都将尝试读取，`stdin`并且只有一个会成功，另一个会阻塞。如果您想使用文件描述符进行同步，请将其设置为 nonblocking 和 use `read`，这不是信号安全的，但比全面竞争条件更好。
*   总是`pthread.h`首先包含。
*   您知道您正在`i`非原子地递增（竞争条件）吗？我没有改变它，但`__sync_fetch_and_add`会自动完成这个技巧。

这是一种方式：

```
#include <pthread.h>
#include <unistd.h>
#include <fcntl.h>
#include <stdio.h>

static unsigned int i =0;
volatile char char_read; // has to be volatile since you are checking it with both threads
volatile int read_input = 0; // has to be volatile

void* print_fn(void* arg)
{
    // int fd = fileno(stdin);
    int fd = 0; // stdin is always 0

    while(1)
    {
        struct timespec t = {0,433300000};
        const struct timespec * tp = &t;
        nanosleep(tp,&t);

        printf("\nValue of read is %d",char_read);

        printf("\n%p prints %c and i is %d",pthread_self(),*((char*)arg),i++);  
        if(read_input || scanf("%c",&char_read) > 0) // attempt to read 1 byte
        {
            // printf("\nValue of s is %d",s);
            printf("\nValue of read is %d",char_read);
            printf("\nChecked for %d or % d",'C','c');
            if(char_read == 'C' || char_read == 'c')
            {
                read_input = 1;
                break;
            }
        }
        printf("\nHere");
    }
    printf("\nI, %p survived while(1)\n",pthread_self());
    return NULL;
}

int main()
{
    // make stdin non-blocking
    fcntl(0, F_SETFL, fcntl(0, F_GETFL) | O_NONBLOCK);

pthread_t xthread,ythread,checkThread;  
char c1 = 'X', c2 = 'Z';
pthread_create(&xthread,NULL,print_fn,&c1);
pthread_create(&ythread,NULL,print_fn,&c2);
pthread_join(xthread,NULL);
pthread_join(ythread,NULL);

return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:53:42.580

除了我发布的代码中的其他问题（正如其他 StackOverflow-ers 指出的那样）。我意识到，主要问题是线路`/*3--->*/ if((s = select(fd+1, &fdset, NULL, NULL, &tv)) == 1)`。根据我的逻辑，如果一个线程`c`从用户那里读取它设置`read_input`为 1 的字符。并且，其他线程在访问时`read_input`读取更新的值（因为它是全局的）并退出 while 循环。

现在，由于我在发生此类事情的块`/*2--->*/ if(!read_input)`内进行检查，`if``/*3--->*/ if((s = select(fd+1, &fdset, NULL, NULL, &tv)) == 1)`

*   用户输入`c`
*   xThread 读取`c`并设置`read_input`为 1
*   yThread 不能使用更新的值，`read_input`直到我在控制台上输入一些内容[即使再次按下回车键也可以]。[这表明`select`某些输入可用]，我们输入 `if(select...block` 并可以测试`read_input`

其余的东西保持原样，

将线路转移`//1---->`到 `/*2--->*/`所需`else` `/*4--->*/`的位置就可以了。

```
/*2--->*/   if(!read_input)
        {
/*3--->*/   if((s = select(fd+1, &fdset, NULL, NULL, &tv)) == 1)
            {
            printf("\nValue of s is %d",s);
//1---->        if(!read_input) 
                printf("\nValue of read is %d",read);
                printf("\nChecked for %d or % d",'C','c');
                if(read == 'C' || read == 'c')
                {
                    read_input = 1;
                    break;
                }
            }
        }
/*4--->*/   else
            break;
        printf("\nHere");
    }
    printf("\nI, %p survived while(1)",pthread_self());
} 
```

**注：** `volatile`不需要

# c++ - 映射迭代器不可递增

> ID：15765092
> 
> 赞同：0
> 
> 时间：2013-04-02T13:14:23.720
> 
> 标签：c++, map, iterator

当我尝试运行我的程序时，出现“map/set iterator not incrementable”错误。我读到当您使迭代器无效时会发生这种情况，但我只是在编辑迭代器指向的对象。这是正常行为吗？我能做些什么呢？如果我删除此行，则没有错误：

```
iterator->second.neighbour[direction] = &(find_iter->second); 
```

完整代码：

```
void Gomoku::addUniqueMap( const map_Map& map_to_add )
{
    this->unique_maps.push_front( map_to_add );

    std::list<map_Map>::iterator map_iter = this->unique_maps.begin();
    map_Iterator iterator = map_iter->begin();

    for( ; iterator != map_iter->end(); ++iterator )
    {
        for( int i = 1, direction = 0; i > -2; --i )
        {
            for( int j = -1; j < 2; ++j )
            {
                if( iterator->second.neighbour[direction] == nullptr )
                {
                    ++direction;
                    continue;
                }
                if( i == 0 && j == 0 )
                    continue;

                COORD pos( iterator->first.x + j, iterator->first.y + i );
                wrap( pos, this->map_size );

                map_Iterator find_iter = map_iter->find( pos );
                if( find_iter != map_iter->end() )
                {
                    iterator->second.neighbour[direction] = &(find_iter->second);
                }

                ++direction;
            }
        }
    }
} 
```

'map_Map' - `std::map<COORD, Pawn>`
'map_Iterator' - `std::map<COORD, Pawn>::iterator`
'Pawn' -

```
struct Pawn
{
    Pawn( Player player );
    Player      player;
    const Pawn* neighbour[8];
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:12:50.287

错误的原因是我正在访问和修改`neighbour[8]`，所以我正在修改数组范围外的元素，并且可能它对迭代器做了一些事情。
在 Debug 版本中，我`map/set iterator not incrementable`在 Release 版本中遇到错误，迭代器无法递增，导致程序无限循环。

# ant - Ant：仅在定义路径时才将文件添加到 zip

> ID：15765093
> 
> 赞同：0
> 
> 时间：2013-04-02T13:14:25.297
> 
> 标签：ant

我必须创建一个将组件 .jar 添加到 zip 的 ant 目标。问题是我没有始终定义组件的版本。例如：

```
 <zip destfile="${dist.dir}\result-${result-version}.zip">
       <fileset dir="${dist.dir}" includes="maincomponent-${maincomponenet-version}*.jar"/>
       <fileset dir="${second-componenet-folder}" includes="${second-component-version}.jar" />
   </zip> 
```

`second-component-version`如果未定义属性，如何添加一些条件来创建带有主要组件的 zip ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:06:40.143

使用[条件](https://ant.apache.org/manual/Tasks/condition.html)和`isset`（[条件](https://ant.apache.org/manual/Tasks/conditions.html)）：

```
<target name="zip">
    <fileset id="main" dir="${dist.dir}" includes="maincomponent-${maincomponenet-version}.jar" />
    <fileset id="component" dir="${second-componenet-folder}" includes="${second-component-version}.jar" />
    <condition property="jar.file" value="component" else="main">
        <isset property="second-component-version"/>
    </condition>
    <zip destfile="${dist.dir}/result-${result-version}.zip">
        <fileset refid="${jar.file}" />
    </zip>
</target> 
```

# html - CSS 将标题与内部菜单对齐

> ID：15765094
> 
> 赞同：0
> 
> 时间：2013-04-02T13:14:28.277
> 
> 标签：html, css, menu, header

嗨，我刚开始，我有一个小问题，由于某种原因，我无法让标题和菜单架对齐，菜单架出现在标题下方，我需要它在标题内

```
#header {

    max-height: 50px;
    width: 100%;
    background: url(../img/bgpattern.png) repeat-x;
    position: fixed;
    box-shadow: 0px 0px 10px 5px rgb(139, 141, 143);
    z-index: 5;

}

#menuholder {

    height:50px;
    width: 900px;
    margin-right: auto;
    margin-left: auto;
} 
```

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:29:17.907

这是你的想法吗？

```
<div id="header">
    <div id="menuholder">
        This is my menu
    </div>
</div>

#header {
    max-height: 50px;
    width: 100%;
    background: url(../img/bgpattern.png) repeat-x;
    box-shadow: 0px 0px 10px 5px rgb(139, 141, 143);
}
#menuholder {
    text-align: center;
    padding: 15px 0;
    margin: 0 auto;
} 
```

# php - 使用会话跟踪最近访问的 3 个项目

> ID：15765097
> 
> 赞同：1
> 
> 时间：2013-04-02T13:14:35.687
> 
> 标签：php, arrays

当用户访问我网站上的项目时，我有以下代码：

```
$_SESSION['recent'][] = array("title"=>$page['current_item']['title'], "link"=>$_SERVER['REQUEST_URI']); 
```

它将项目及其 URI 的记录存储在会话变量中。

但是，我只想存储最近访问的 3 个项目。

`array[]`有没有办法使用语法来做到这一点？我希望数组的最大长度为 3，如果大于 3，则旧的`array[0]`将消失，并被替换为`array[1]`,`array[1]`将被替换为`array[2]`etc。

谁能想到一个不错的简短方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:19:02.630

array_slice 看起来可以解决问题（数组的“substr”）：

```
$_SESSION['recent'] = array_slice($_SESSION['recent'],0,3) 
```

[http://php.net/manual/en/function.array-slice.php](http://php.net/manual/en/function.array-slice.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:23:53.660

您可以使用`array_slice()`仅保留最后 3 个元素：

```
$_SESSION['recent'][] = array("title"=>$page['current_item']['title'], "link"=>$_SERVER['REQUEST_URI']);
$_SESSION['recent'] = array_slice($_SESSION['recent'],-3); 
```

# php - PHP ImageMagick 从 http 获取图像

> ID：15765100
> 
> 赞同：4
> 
> 时间：2013-04-02T13:14:40.220
> 
> 标签：php, http, imagemagick

我正在尝试使用 ImageMagick 进行一些照片处理（暂时裁剪）。我以前通过使用 PHP 的 GD 库（在我的本地主机上）取得了预期的结果，但现在主机不支持它，他们建议我改用 ImageMagick。问题是我可以裁剪存储在本地的图像：

```
<?php
$four = '4fingers1.jpg';
exec("convert $four -crop 100x100+100+100 test.jpg");
?>
<img src="test.jpg"> 
```

没有问题，但是当它来自 http 源（我的脚本的实际目的）时，我没有收到任何图像。代码如下（我以表格的形式发布图像的实际 src）：

```
$src = $_POST['src'];
exec("convert $src -resize 720x720 resized.jpg"); // this is specified in the documentation
exec("convert resized.jpg -crop 100x100+100+100 final.jpg");
?>
<img src="final.jpg"> <!-- no image -->
<img src="resized.jpg"> <!-- no image -->
<img src="<?php echo $src; ?>"> <!-- alright --> 
```

该文档指定以下内容：

> IM 还可以通过指定图像 URL 来下载在“万维网”上发布的图像。这基本上提供了一个“http：”图像编码器，这就是它起作用的原因。

链接：[http ://www.imagemagick.org/Usage/files/#read](http://www.imagemagick.org/Usage/files/#read)

我已经尝试了很多在线创建的代码片段，但无法弄清楚为什么不起作用？我可以使用其他东西来达到我的目的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:20:42.113

首先，正如 Prisoner[评论](https://stackoverflow.com/questions/15765100/php-imagemagick-get-image-from-http#comment22407539_15765100)的那样，这段代码容易受到 shell 参数注入的影响。基本上任何人都可以操纵 post 参数并让您执行他们想要的任何命令行；**这可能是灾难性的，应该立即解决！**

解决安全问题的一种方法是使用[`escapeshellarg`](http://php.net/manual/en/function.escapeshellarg.php)；这也应该解决您的“原始”问题，因为该命令没有明显的失败原因。如果 URL 有效并且参数被正确转义，它应该可以正常工作。

或者，您可以通过自己下载图像并将其保存到临时文件中，然后再调用 IM 来解决安全问题和原始问题：

```
$temp = tempnam(sys_get_temp_dir());
file_put_contents($temp, file_get_contents($url));

exec("convert ".escapeshellarg($temp)." -crop 100x100+100+100 test.jpg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:26:39.910

首先，我同意 Jon 的回答和 Prisoner 的评论。您必须使用以下命令转义 $src POST var 以防止 shell 命令注入[`escapeshellarg()`](http://php.net/manual/en/function.escapeshellarg.php)：

```
$src = escapeshellarg($_POST); 
```

此外，您应该使用第二个参数（命令的输出）和第三个参数（命令的返回值）并尊重它。

像这样调用[`exec()`](http://www.php.net/manual/en/function.exec.php)：

```
exec("convert $src -resize 720x720 resized.jpg 2>&1", $output, $returnval);

if($returnval !== 0) {
    die('imagemagick error: ' . join("<br/>", $output));
} 
```

现在您可以对错误做出反应，并且可以看到出了什么问题。请注意，我已使用 shell 重定向 ( `2>&1`)将 imagemagick 的标准错误重定向到标准输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:11:05.497

问题是 IM 在我的情况下遇到了 https 协议的问题。我已经使用 http 图像进行了测试，一切正常，所以我做了以下操作：

```
<?php
$src = $_POST['src'];
$src = preg_replace('/^https\:\/\//', 'http://', $src);
$src = escapeshellarg($src);
exec('convert ' . $src . ' resized.jpg 2>&1', $output, $returnval);
if($returnval !== 0) {
    die('imagemagick error: ' . join("<br/>", $output));
}
?>
<img src="resized.jpg"> 
```

我现在显示了图像，我可以开始裁剪它等等。

# android - Android：使用旋转轮进度对话框无法正常工作

> ID：15765103
> 
> 赞同：0
> 
> 时间：2013-04-02T13:14:47.093
> 
> 标签：android, dialog

我正在设计一个登录屏幕，并希望在单击登录按钮时显示一个带有“请稍候...”文本的旋转轮。如果用户名和密码匹配，则应显示下一个屏幕，否则应显示错误消息。我的问题是，当按下按钮时，进程对话框即将到来，但下一个屏幕或关闭对话框后不显示错误消息。我有以下代码。请帮助我在哪里做错了。

```
 package com.example.first_db_app;

  import java.util.List;

  import android.os.Bundle;
  import android.app.Activity;
  import android.app.ProgressDialog;
  import android.util.Log;
  import android.view.Menu;
  import android.view.View;
  import android.widget.Button;
  import android.widget.EditText;
  import android.widget.Toast;

 public class TestDbActivity extends Activity
 {

@Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test_db);

        DatabaseHandler db=new DatabaseHandler(this);

        //CRUD operations

        //inserting the records
        /*Log.d("Insert: ", "Inserting ..");
        db.addUser(new User("Ashwin","11111"));
        db.addUser(new User("Ravi","22222"));
        db.addUser(new User("Gopal","33333"));
        db.addUser(new User("Satish","44444"));*/

         // Reading all contacts
        Log.d("Reading: ", "Reading all contacts..");
        List<User> user = db.getAllContacts();       

        for (User us : user) {
            String log = "Name: " + us.getUname()  + " ,Password " + us.getUpwd();
                // Writing Contacts to log
        Log.d("Name: ", log);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.test_db, menu);
        return true;
    }

    public void login(View v)
    {
        final  EditText edtuname=(EditText) findViewById(R.id.editTextUserNameToLogin);
        final  EditText edtpwd=(EditText) findViewById(R.id.editTextPasswordToLogin);
          Button btnlogin=(Button) findViewById(R.id.buttonSignIn);
         final DatabaseHandler db=new DatabaseHandler(this);

          btnlogin.setOnClickListener(new View.OnClickListener()
          {

            @Override
            public void onClick(View v) 
            {
                // TODO Auto-generated method stub

                final ProgressDialog mypd=ProgressDialog.show(TestDbActivity.this, "", "Loading..",true);
                new Thread (new Runnable()
                {
                    @Override
                    public void run()
                    {
                        try
                        {

                            String uname= edtuname.getText().toString();
                            String pwd=edtpwd.getText().toString();
                            String stored_pwd=db.getUser(uname);
                            Thread.sleep(5000);

                            if(pwd.equals(stored_pwd))
                            {

                                //Toast.makeText(TestDbActivity.this,"successful", Toast.LENGTH_LONG).show();
                                mypd.dismiss();
                                setContentView(R.layout.activity_next);
                            }
                            else
                            {
                                mypd.dismiss();
                                Toast.makeText(TestDbActivity.this, "failed", Toast.LENGTH_LONG).show();

                            }
                        }
                        catch (Exception e)
                        {

                        }

                    }

                }).start();

            }
        } );

    }

}

Thanks in advance. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:20:23.947

您不能显示`Toast`来自**非 ui 线程**的 a 。而是尝试如下显示：

```
TestDbActivity.this.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        Toast.makeText(TestDbActivity.this, "failed", Toast.LENGTH_LONG).show();
    }
}); 
```

更可取的是，我建议您在这里使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:25:17.090

我认为这里最好的选择是使用`AsyncTask`，因为它在后台线程上运行，并且在这样做的同时你可以显示一个进度对话框。这是一个简单的例子，你怎么能做到这一点：

```
private ProgressDialog progressDialog;

private class LoginUser extends AsyncTask<String, Void, Boolean>{

    private String username;
    private String password;

    @Override
    protected Boolean doInBackground(String... params) {

        if(params != null && params.length >= 1){
            username = params[0];
            password = params[1];

            // if everything is ok return true
            return true;

        }

        return false;
    }

    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
            progressDialog = new ProgressDialog(Test.this);
        } else {
            progressDialog = new ProgressDialog(Test.this,
                    AlertDialog.THEME_HOLO_LIGHT);
        }
        progressDialog.setIndeterminate(true);
        progressDialog.setMessage("Logging in...");
        progressDialog.show();
    }

    @Override
    protected void onPostExecute(Boolean result){
        super.onPostExecute(result);
        progressDialog.dismiss();
        if(result){
            // open new activity
        } else {
            // show your error dialog.
        }

    }

} 
```

你可以像这样从你的按钮调用它`onClick`：

```
btnlogin.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) 
        {
          new LoginUser().execute("MyUsername", "MyPassword");
         }
}); 
```

# c# - 从单元测试到集成测试的有效过渡

> ID：15765106
> 
> 赞同：7
> 
> 时间：2013-04-02T13:14:55.067
> 
> 标签：c#, java, unit-testing, testing

我目前正在研究我们应该如何在即将到来的项目中进行测试。为了在开发过程中及早发现错误，开发人员会在实际代码之前编写单元测试（TDDish）。单元测试将像他们应该的那样，孤立地关注单元（在这种情况下是一种方法），因此依赖关系将被模拟等等。

现在，我还想在这些单元与其他单元交互时对其进行测试，并且我认为应该有一个有效的最佳实践来做到这一点，因为单元测试已经编写好了。我的想法是单元测试将被重用，但模拟对象将被删除并替换为真实对象。我现在的不同想法是：

*   在每个测试类中使用一个全局标志来决定是否应该使用模拟对象。这种方法需要几个`if`语句
*   使用创建“instanceWithMocks”或“instanceWithoutMocks”的工厂类。这种方法对于新开发人员来说使用起来可能会很麻烦，并且需要一些额外的类
*   将集成测试与不同类中的单元测试分开。然而，这将需要大量冗余代码，维护测试用例将是工作的两倍

在我看来，所有这些方法都有利有弊。其中哪一个是首选，为什么？有没有更好的方法来有效地从单元测试过渡到集成测试？或者这通常以其他方式完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:25:28.267

我会选择第三种选择

*   将集成测试与不同类中的单元测试分开。然而，这将需要大量冗余代码，维护测试用例将是工作的两倍

这是因为单元测试和集成测试有不同的目的。单元测试表明单个功能是独立工作的。集成测试表明，不同的功能在相互交互时仍然有效。

因此，对于单元测试，您想要模拟事物，以便您只测试一个功能。

尽可能少地进行集成测试模拟。

我会把它们放在不同的项目中。在我这里行得通的是有一个使用 NUnit 和 Moq 的单元测试项目。这在编写代码时写成 TDD。集成测试是 Specflow/Selenium，功能文件是在产品所有者的帮助下在规划会话中编写的，因此我们可以验证我们正在交付所有者想要的东西。

这确实在短期内创造了额外的工作，但会导致更少的错误、更容易的维护和交付匹配要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:20:44.620

像 Ninject/Autofac/StructureMap 这样的 IoC 容器可能对您有用。单元测试可以通过容器解决被测系统，无论你注册了模拟还是真实对象，都只是注册的问题。类似于您的工厂方法，但 IoC 容器是工厂。新开发人员需要接受一些培训才能理解，但任何复杂系统都是如此。这样做的缺点是注册场景可能会变得相当复杂，但是对于任何给定的系统，如果不尝试就很难说它们是否*太复杂了。*我怀疑这就是您没有找到任何似乎确定的答案的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:26:57.910

集成测试应该是与单元测试不同的类，因为您正在测试不同的行为。我认为集成测试的方式是，它们是您在尝试确保一切协同工作时执行的测试。他们将使用应用程序部分的输入，并确保返回预期的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T13:29:53.520

我认为你搞乱了单元测试和集成测试的目的。单元测试用于测试单个类 - 这是低级 API。集成测试是测试类如何协作。这是另一个更高级别的 API。通常，您不能在集成测试中重用单元测试，因为它们代表不同级别的系统视图。使用 spring 上下文可能有助于为集成测试设置环境。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T13:41:03.257

我不确定用真实对象而不是模拟重用你的单元测试是实现集成测试的正确方法。

单元测试的目的是在与外界*隔离的情况下验证对象的基本正确性。*有模拟以确保隔离。如果您将它们替换为实际实现，您实际上最终会测试完全不同的东西 - 同一对象链的大部分的正确性，并且您会*多次*重复测试它。

通过使集成测试与单元测试不同，您将能够选择要验证的系统部分——通常，测试暗示配置、I/O、与第三方系统交互的部分是一个好主意， UI 或单元测试难以涵盖的任何其他内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-02T16:13:10.977

我同意大多数其他答案，即**单元测试应该与集成测试（选项 3）分开**。

但我不同意你的相反论点：

> [...] 但是，这（将单元与集成测试分开）将 **需要大量冗余代码，并且维护测试用例将是工作的两倍**。

使用测试数据生成对象可能需要做很多工作，但这可以重构为测试助手类，也就是[ObjectMother](http://martinfowler.com/bliki/ObjectMother.html)，可以从单元测试和集成测试中使用，因此不需要冗余

在单元测试中，您检查被测类的不同条件。

对于集成测试，没有必要重新检查这些特殊情况。相反，您检查组件是否协同工作。

例子

您可能对 4 种引发异常的不同情况进行了单元测试。对于集成，无需重新测试所有 4 个条件 一个与异常相关的集成测试足以验证集成系统是否可以处理异常。

# c++ - DirectShow 使用回调方法从内存中读取

> ID：15765107
> 
> 赞同：1
> 
> 时间：2013-04-02T13:15:03.700
> 
> 标签：c++, video, callback, directshow, playback

到目前为止，我使用 MCI 和 mmioInstallIOProc 进行视频播放，并借助上述回调方法直接从内存中读取数据块。

有没有使用 DirectShow 完成相同播放方法的示例？我玩了一点，使用 Platform SDK 中包含的“MemFile”示例，但是这段代码将整个文件读取到内存中，而我需要加载数据块。

在哪里查看或使用什么界面来完成目标？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:38:10.833

memfile 示例是正确的。您需要实现 IAsyncReader 接口以从内存缓冲区中提取数据，这是最接近的示例。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-03-11T17:03:25.153

我刚刚创建了一个新的源过滤器！

# python - 解析 sdf 文件，性能问题

> ID：15765112
> 
> 赞同：0
> 
> 时间：2013-04-02T13:15:25.953
> 
> 标签：python, performance, sdf

我已经编写了一个脚本，它可以读取不同的文件并在大型 sdf 数据库（每个大约 4.0 GB）中搜索分子 ID。

这个脚本的想法是将每个分子从我的原始数据库中的 id 列表（大约 287212 个分子）复制到一个新数据库中，以使每个分子只有一个副本（在这种情况下，遇到的第一个副本）

我写了这个脚本：

```
import re
import sys
import os

def sdf_grep (molname,files):
    filin = open(files, 'r')
    filine= filin.readlines()
    for i in range(0,len(filine)):
        if filine[i][0:-1] == molname and filine[i][0:-1] not in past_mol:
            past_mol.append(filine[i][0:-1])
            iterate = 1
            while iterate == 1:
                if filine[i] == "$$$$\n":
                    filout.write(filine[i])
                    iterate = 0
                    break
                else:
                    filout.write(filine[i])
                i = i+1
        else:
            continue
    filin.close()

mol_dock = os.listdir("test")
listmol = []
past_mol = []
imp_listmol = open("consensus_sorted_surflex.txt", 'r')
filout = open('test_ini.sdf','wa')

for line in imp_listmol:
    listmol.append(line.split('\t')[0])
print 'list ready... reading files'
imp_listmol.close()

for f in mol_dock:
    print 'reading '+f
    for molecule in listmol:
        if molecule not in past_mol:
            sdf_grep(molecule , 'test/'+f) 

print len(past_mol)
filout.close() 
```

它工作得很好，但它很慢......对于我需要的东西来说太慢了。有没有办法以可以减少计算时间的方式重写这个脚本？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:26:34.357

让我们`past_mol`成为一个集合，而不是一个列表。这样会加快

```
filine[i][0:-1] not in past_mol 
```

因为检查集合中的成员是 O(1)，而检查列表中的成员是 O(n)。

* * *

尽量不要一次写入一行。相反，将行保存在一个列表中，将它们连接成一个字符串，然后通过**调用**`filout.write`.

* * *

通常最好不要让函数修改全局变量。`sdf_grep`修改全局变量`past_mol`。

通过添加`past_mol`您的参数，`sdf_grep`使其明确`sdf_grep`取决于是否存在`past_mol`（否则，`sdf_grep`它并不是真正的独立函数）。

如果你`past_mol`作为第三个参数传入`sdf_grep`，那么 Python 将创建一个名为的新局部变量`past_mol`，该变量将指向与全局变量相同的对象`past_mol`。由于该对象是一个集合，而一个集合是一个可变对象，`past_mol.add(sline)`因此也会影响全局变量`past_mol`。

作为一个额外的好处，Python 查找局部变量的速度比全局变量快：

```
def using_local():
    x = set()
    for i in range(10**6):
        x

y = set
def using_global():
    for i in range(10**6):
        y

In [5]: %timeit using_local()
10 loops, best of 3: 33.1 ms per loop

In [6]: %timeit using_global()
10 loops, best of 3: 41 ms per loop 
```

* * *

`sdf_grep``found`如果您使用一个变量（让我们称之为它）来跟踪我们是否在我们想要保留的行块之一内，则可以大大简化。（我所说的“行块”是指以 开头`molname`和结尾的行`"$$$$"`）：

```
import re
import sys
import os

def sdf_grep(molname, files, past_mol):
    chunk = []
    found = False
    with open(files, 'r') as filin:
        for line in filin:
            sline = line.rstrip()
            if sline == molname and sline not in past_mol:
                found = True
                past_mol.add(sline)
            elif sline == '$$$$':
                chunk.append(line)                
                found = False
            if found:
                chunk.append(line)
    return '\n'.join(chunk)

def main():
    past_mol = set()
    with open("consensus_sorted_surflex.txt", 'r') as imp_listmol:
        listmol = [line.split('\t')[0] for line in imp_listmol]
        print 'list ready... reading files'

    with open('test_ini.sdf', 'wa') as filout:
        for f in os.listdir("test"):
            print 'reading ' + f
            for molecule in listmol:
                if molecule not in past_mol:
                    filout.write(sdf_grep(molecule, os.path.join('test/', f), past_mol))

        print len(past_mol)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:48:58.210

主要问题是您有三个嵌套循环：*内部循环中的*分子文档、分子和文件解析。这闻起来像麻烦——我的意思是，[二次复杂度](http://en.wikipedia.org/wiki/Time_complexity)。您应该将解析的大文件移到内部循环之外，并为分子使用集合或字典。像这样的东西：

1.  对于每个 sdf 文件
2.  对于每一行，如果是分子定义
3.  检查未发现分子的字典
4.  如果存在，对其进行处理并从未找到分子的字典中删除

这样，您将准确地解析每个 sdf 文件一次，并且对于每个找到的分子，速度将进一步提高。

# ms-access - 如何制作与其最大项目一样宽的下拉列表

> ID：15765121
> 
> 赞同：1
> 
> 时间：2013-04-02T13:15:54.227
> 
> 标签：ms-access, vba

我在 MS Access 中有一个下拉菜单（组合框），我想将其设置为最大的项目。目前，它当前设置为以下内容：

```
ListWidth 3.5"
ColumnWidths 1.75";1.75" 
```

这对于小于这个值的值是可以的，但是当输入更长的值时会出现问题。我搜索了这个问题并找到了一种方法来动态地使下拉列表变大[，](http://bytes.com/topic/access/insights/830511-how-dynamically-set-combo-drop-down-list-width)但这对于我想要的来说似乎相当复杂。

有没有人有任何建议 - 比如它是否需要迭代源内容，检查每个单独的值的长度以及它是否大于该点的最大值 - 将其设置为最大并继续直到值结束到达。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:13:57.513

首先，我将使用 SQL 字符串进行查询

`SELECT TOP 1 * FROM Table ORDER BY Len(Field) Desc`

然后创建一个记录集，先移动，最后将字符串的长度乘以一个字符的大小。

对不起，我的文字有任何错误。英语不是我的第一语言。

# sql - Sybase 存储过程在第二次运行时运行得更快

> ID：15765124
> 
> 赞同：0
> 
> 时间：2013-04-02T13:15:57.520
> 
> 标签：sql, performance, sybase

我在 sybase 中有一个存储过程，第一次运行比直接运行需要更多时间。

在创建这个存储过程时，我正在使用`with recompile`option。所以它不应该为存储过程保存任何计划。每次程序执行时，它都会创建新的计划。

为什么存储过程在第二次运行时会运行得更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:53:45.337

这很可能是因为 sybase 内部缓存。
所以第一次将相关数据存储在缓存中，这就是为什么第二次更快。

您可以检查`sp_helpcache`以查看已配置的内容。

# javascript - ace-editor 获取大括号之间的文本

> ID：15765127
> 
> 赞同：0
> 
> 时间：2013-04-02T13:16:08.020
> 
> 标签：javascript, ace-editor

ace-editor 如何获取大括号之间的代码值，例如：

```
 {
        "name":"Product",
        "properties":
        {
                "id":
                {
                        "type":"number",
                        "description":"Product identifier",
                        "required":true
                },
                "name":
                {
                        "description":"Name of the product",
                        "type":"string",
                        "required":true
                }
        }
} 
```

如果光标打开：`"type":"number"`

然后它应该返回

```
 {
                        "type":"number",
                        "description":"Product identifier",
                        "required":true
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:20:12.430

查看[jumpToMatching](https://github.com/ajaxorg/ace/blob/master/lib/ace/editor.js#L1748)中的代码，它找到下一个`{}`然后调用 findMatchingBracket，一旦你有范围调用`editor.session.getTextRange(range)`

# sql - 如何将值从一个外键迁移到另一个 SQL

> ID：15765129
> 
> 赞同：3
> 
> 时间：2013-04-02T13:16:10.093
> 
> 标签：sql, sql-server-2008

我正在处理从一个数据库到另一个数据库的数据迁移。

到目前为止，一切正常，但在一张桌子上我总是遇到同样的错误。我也想在这个表中迁移的外键有问题。我想我必须为外键声明一些特殊的东西？

这是我的查询：

```
INSERT INTO [asd].HolidayTracker.dbo.AnnualVacation(UserId,WorkingTime,VacationDays,FromDate,ToDate)
SELECT u1.user_htUserId,
       u1.vacationDays,
       u1.workingTime,
       CAST('2013-01-01' AS DATETIME),
       CAST('2013-12-31' AS DATETIME)

FROM    HolidayTracker.dbo.AnnualVacation u1 
            LEFT JOIN  [asd].HolidayTracker.dbo.AnnualVacation u2
                ON u1.user_htUserId = u2.UserId AND 
                   u1.vacationDays = u2.VacationDays AND
                   u1.workingTime = u2.WorkingTime 
```

这是我收到的错误消息：

```
error message INSERT INTO [asd].HolidayTracker.dbo.AnnualVacation(UserId,WorkingTime,VacationDays‌​,FromDate,ToDate) – ` 
```

这是表结构：源表

![在此处输入图像描述](https://i.stack.imgur.com/Y0AX5.gif)

目标表

![在此处输入图像描述](https://i.stack.imgur.com/I12vc.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:42:49.590

对于初学者，与您选择的字段相比，插入语句中的 WorkingTime、VacationDays 字段的方式错误。

尝试更改字段的顺序，如下所示，看看会发生什么。

错误可能很简单，就像您尝试将浮点数插入 int 列而不转换值一样。

```
INSERT INTO [asd].HolidayTracker.dbo.AnnualVacation(UserId,VacationDays,WorkingTime,FromDate,ToDate)
SELECT u1.user_htUserId,
   u1.vacationDays,
   u1.workingTime,
   CAST('2013-01-01' AS DATETIME),
   CAST('2013-12-31' AS DATETIME)

FROM    HolidayTracker.dbo.AnnualVacation u1 
        LEFT JOIN  [asd].HolidayTracker.dbo.AnnualVacation u2
            ON u1.user_htUserId = u2.UserId AND 
               u1.vacationDays = u2.VacationDays AND
               u1.workingTime = u2.WorkingTime 
```

# wso2 - 我们可以使用 WSO2ESB 将数据附加到单个文本文件中吗？

> ID：15765141
> 
> 赞同：0
> 
> 时间：2013-04-02T13:16:51.447
> 
> 标签：wso2, wso2esb, wso2dss

我从移动应用程序或任何前端的某个地方收到错误消息。

我需要将该消息保存在一个文本文件中。该文件可以存储在我的本地系统中。

如何使用 WSO2ESB 做到这一点？

```
 <proxy xmlns="http://ws.apache.org/ns/synapse" name="AppendFile" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
       <target>
          <inSequence onError="fault">
             <property name="error_TYPE" expression="//error/text()" scope="axis2" type="STRING"/>
             <property name="HTTP_METHOD" value="POST" scope="axis2" type="STRING"/>
             <payloadFactory>
                <format>
                   <error></error>
                </format>
                <args>
                   <arg expression="get-property('error')"/>

                </args>
             </payloadFactory>
               <send>
    <endpoint>
    <address uri="//home/desktop/append.txt"/>
    </endpoint>
    </send>
          </inSequence>
          <outSequence>
             <property name="CONTENT_TYPE" value="application/json" scope="axis2"/>
             <log level="full"/>
             <send/>
          </outSequence>
       </target>
       <description></description>
    </proxy> 
```

但它给出了传输错误。

我们应该怎么做？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:38:37.870

你得到什么错误？无论如何，您提供的端点看起来是错误的。它应该以传输协议开头`vfs://`

```
eg: vfs:file:///home/desktop/append.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:37:43.587

您可以使用 VFS 传输。请参考。

[http://achala11.blogspot.com/2012/08/vfs-transport-wso2-esb-using-file.html](http://achala11.blogspot.com/2012/08/vfs-transport-wso2-esb-using-file.html)

[http://docs.wso2.org/wiki/display/ESB460/VFS+Transport](http://docs.wso2.org/wiki/display/ESB460/VFS+Transport)

[http://docs.wso2.org/wiki/pages/viewpage.action?pageId=16846489](http://docs.wso2.org/wiki/pages/viewpage.action?pageId=16846489)

# silverlight - Silverlight 像素完美碰撞检测

> ID：15765142
> 
> 赞同：0
> 
> 时间：2013-04-02T13:16:54.520
> 
> 标签：silverlight, collision-detection, pixel-perfect

我正在为我的 Uni 做一个项目，目前我被困在这个网站[http://www.andybeaulieu.com/Home/tabid/67/EntryID/160/Default.aspx](http://www.andybeaulieu.com/Home/tabid/67/EntryID/160/Default.aspx)的像素完美碰撞检测上。我已经下载了使用此碰撞检测的示例项目，即使使用我自己的图片也可以正常工作。我在我的项目中做了同样的事情，但它不起作用。这是我的应用程序的链接：[https](https://www.cubby.com/pl/LostInTheMath.zip/_dd23e2c827604c068a3fe63ff42d22b2) ://www.cubby.com/pl/LostInTheMath.zip/_dd23e2c827604c068a3fe63ff42d22b2谁能告诉我它有什么问题？谢谢你。

这是主要代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Windows.Media.Imaging;

namespace LostInTheMath
   {
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
        this.Loaded += new RoutedEventHandler(Page_Loaded);
    }
    void Page_Loaded(object sender, RoutedEventArgs e)
    {
        CompositionTarget.Rendering += new EventHandler(CompositionTarget_Rendering);
    }

    private void UserCntrl_MouseMove(object sender, MouseEventArgs e)
    {
        Point pt = e.GetPosition(cnvHitTest);

        Monkey.SetValue(Canvas.LeftProperty, pt.X);
        Monkey.SetValue(Canvas.TopProperty, pt.Y);

    }

    void CompositionTarget_Rendering(object sender, EventArgs e)
    {
        Image MonkeyShell = Monkey.FindName("imgMonkey") as Image;
        Image Mazer = Maze.FindName("imgMaze") as Image;

        if (CheckCollision(Monkey, MonkeyShell, Maze, Mazer))
        {
            Monkey.Width = 1000;
            txtStatus.Text = "Collision with XAML Element!";
            return;
        }
        txtStatus.Text = string.Empty;
    }

   private bool CheckCollision(FrameworkElement control1, FrameworkElement controlElem1, FrameworkElement control2, FrameworkElement controlElem2)
     {
         // first see if sprite rectangles collide
         Rect rect1 = UserControlBounds(control1);
         Rect rect2 = UserControlBounds(control2);

         rect1.Intersect(rect2);
         if (rect1 == Rect.Empty)
         {
             // no collision - GET OUT!
             return false;
         }
         else
         {
             bool bCollision = false;
             Point ptCheck = new Point();

             // NOTE that creating the writeablebitmap is a bit intense
             // so we will do this once and store results in Tag property
             // in a real game, you might abstract this into a Sprite class.
             if (controlElem1 is Image)
                 controlElem1.Tag = GetWriteableBitmap(control1);

             if (controlElem2 is Image)
                 controlElem2.Tag = GetWriteableBitmap(control2);

             // now we do a more accurate pixel hit test
             for (int x = Convert.ToInt32(rect1.X); x < Convert.ToInt32(rect1.X + rect1.Width); x++)
             {
                 for (int y = Convert.ToInt32(rect1.Y); y < Convert.ToInt32(rect1.Y + rect1.Height); y++)
                 {
                     ptCheck.X = x;
                     ptCheck.Y = y;

                     if (CheckCollisionPoint(ptCheck, control1, controlElem1))
                         if (CheckCollisionPoint(ptCheck, control2, controlElem2))
                         {
                             bCollision = true;
                             break;
                         }

                 }
                 if (bCollision) break;
             }
             return bCollision;
         }
     }

     public bool CheckCollisionPoint(Point pt, FrameworkElement control, FrameworkElement controlElem)
     {
         if (controlElem is Image)
         {
             // NOTE that we saved the WB in the Tag object for performance.
             // in a real app, you might abstract this in your sprite class.
             WriteableBitmap wb = controlElem.Tag as WriteableBitmap;

             int width = wb.PixelWidth;
             int height = wb.PixelHeight;

             double offSetX = Convert.ToDouble(control.GetValue(Canvas.LeftProperty));
             double offSetY = Convert.ToDouble(control.GetValue(Canvas.TopProperty));

             pt.X = pt.X - offSetX;
             pt.Y = pt.Y - offSetY;

             int offset = Convert.ToInt32((width * pt.Y) + pt.X);

             return (wb.Pixels[offset] != 0);
         }
         else
         {
             List<UIElement> hits = System.Windows.Media.VisualTreeHelper.FindElementsInHostCoordinates(pt, controlElem) as List<UIElement>;
             return (hits.Contains(controlElem));
         }
     }

     private WriteableBitmap GetWriteableBitmap(FrameworkElement control)
     {
         WriteableBitmap wb = new WriteableBitmap((int)control.Width, (int)control.Height); ;
         wb.Render(control, new TranslateTransform());
         wb.Invalidate();

         return wb;
     }

     public Rect UserControlBounds(FrameworkElement control)
     {
         Point ptTopLeft = new Point(Convert.ToDouble(control.GetValue(Canvas.LeftProperty)), Convert.ToDouble(control.GetValue(Canvas.TopProperty)));
         Point ptBottomRight = new Point(Convert.ToDouble(control.GetValue(Canvas.LeftProperty)) + control.Width, Convert.ToDouble(control.GetValue(Canvas.TopProperty)) + control.Height);

         return new Rect(ptTopLeft, ptBottomRight);
     }

 }
} 
```

# string - LISP - 修改字符串

> ID：15765143
> 
> 赞同：0
> 
> 时间：2013-04-02T13:16:56.643
> 
> 标签：string, lisp, common-lisp

我必须编写一个程序，将字符串的元音、辅音和其他符号分别更改为 C、V 0。我已经这样做了，但我想知道是否有更有效和更优雅的方法来做到这一点。将不胜感激输入。

```
(defun string-to-list (string)
(loop for char across string collect char))

(defun is-vowel (char) (find char "aeiou" :test #'char-equal))

(defun is-consonant (char) (find char "bcdfghjklmnpqrstvwxyz" :test #'char-equal))

(defun letter-type (char)
(if (is-vowel char) "V"
(if (is-consonant char) "C"
"0")))

(defun analyze-word (word-string)
(loop for char across word-string collect (letter-type char))) 
```

此外，我想把它变成一个字符串，我该怎么做？我应该定义一个遍历列表并使其成为字符串的函数还是更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:15:19.087

```
(defun letter-type (char)
  (cond ((find char "aeiou" :test #'char-equal) #\V)
        ((alpha-char-p char) #\C)
        (t #\0)))

CL-USER> (map 'string #'letter-type "analyze-word")
"VCVCCCV0CVCC" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:56:25.397

只是为了这个想法：

```
(defun multi-replace-if (sequence function &rest more-functions)
  (map (type-of sequence)
       (lambda (x)
         (loop for f in (cons function more-functions)
            for result = (funcall f x)
            while (eql x result)
            finally (return result)))
       sequence))

(multi-replace-if "bcdfghjklmnpqrstvwxyz"
                  (lambda (x) (if (find x "aeiouy") #\v x))
                  (lambda (y) (declare (ignore y)) #\c))
"cccccccccccccccccccvc" 
```

# jquery - 使用 RegEx 对动态添加的控件进行表单验证

> ID：15765144
> 
> 赞同：0
> 
> 时间：2013-04-02T13:16:58.490
> 
> 标签：jquery, asp.net, validation, jquery-plugins

我正在使用 Jquery 验证插件来验证网络表单。控件根据控件类型动态加载。对于某些控件，我需要使用正则表达式进行验证。我需要为每个控件动态传递正则表达式。我有以下功能，但是如何将它概括为需要使用 RegEx 验证的所有控件

```
 $.validator.addMethod(varcharRegEx, function (value, element) {
              return this.optional(element) || /^[A-Za-z0-9\_]+$/i.test(value);
             }, "Invalid entry, must contain only letters, numbers, or underscore."); 
```

其次，有一种方法可以将错误消息显示为表单末尾的摘要。我是 Jquery 的新手。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:27:19.040

将自定义`data`属性添加到您的控件并使用您的 RegEx 填充它。然后您可以在验证函数中读取该值并应用它。

即“装饰”您需要使用某些 css 类进行验证的控件，例如：

```
<input id="control_1" class="to-validate" 
     data-regex="^[A-Za-z0-9\_]+$" 
     data-error-message="Invalid entry, must contain only letters, numbers, or underscore." /> 
```

然后在 jQuery 中将验证器附加到每个：

```
$(".to-validate").each(function(index, myControl) {

    var regex = $(myControl).data("regex");
    var errorMsg = $(myControl).data("error-message");
    var validatorName = $(myControl).attr("id"); 

    $(myControl).validator.addMethod(validatorName, function(value, element) {
        return this.optional(element) || new RegExp(regex).test(value);
    }, errorMsg);
}); 
```

我没有测试过这段代码，所以你可能需要根据你的确切需要对其进行一些调整，但我希望这能给你一个想法。

# c# - 如何确保异常“调用线程无法访问此对象，因为不同的线程拥有它”？

> ID：15765147
> 
> 赞同：2
> 
> 时间：2013-04-02T13:17:08.850
> 
> 标签：c#, wpf, multithreading, debugging, task-parallel-library

在 C# WPF 应用程序中，如果在以下按钮单击事件 habdler：

```
private void start_Click(object sender, RoutedEventArgs e)
{
  for (int i = 2; i < 20; i++)
  {
    var t = Task.Factory.StartNew
    (() =>
         {
            var result=Thread.CurrentThread.ManagedThreadId.ToString();
       //this.Dispatcher.BeginInvoke(new Action(() =>
            textBlock1.Text += "root " + i.ToString() + " " +
            result + Environment.NewLine
       ;//to comment this line if to uncomment th others
       //), null);
          }
     );
  }
} 
```

取消注释注释行，即输出到文本块，`Dispatcher.BeginInvoke()`然后填充不同的线程ID。

尽管有注释行，如上所示，文本块保持空白并且没有抛出异常。

在类似情况下使用`Parallel.For`

```
private void start_Click(object sender, RoutedEventArgs e)
{
  Parallel.For(2, 6, (i) 
     => {
           var result = Thread.CurrentThread.ManagedThreadId.ToString();
           textBlock1.Text += "root " + i.ToString() + " " +
                               result + Environment.NewLine;

         }   );
} 
```

应用程序异常中断：

> “调用线程无法访问此对象，因为不同的线程拥有它”

为什么在使用时不会在第一种情况下抛出它`Task.Factory.StartNew()`？
有什么办法可以确保这个例外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:38:33.747

任务中抛出的异常总是由任务对象本身处理。例如，当您访问 Task.Result 属性时，稍后会重新引发异常。这样，异常的处理就留给了创建任务的线程。如果您运行第一个代码片段并查看“输出”窗格，您会看到那里记录了多个第一次机会 InvalidOperationException。异常**被**抛出 - 任务只是将它们隐藏起来以便以后重新抛出。

`Parallel.For`实际上也是如此——它隐藏了委托中发生的所有异常，然后，当循环完成时，它重新抛出在单个`AggregateException`. 您会注意到调试器在线程调用中中断`Parallel.For`，而不是在传递给它的委托中。

要使任务中的异常传播到调用线程，就像`Parallel.For`调用`Wait/WaitAll`任务一样。

# css - 移动网站的插入式 CSS 模板？

> ID：15765154
> 
> 赞同：0
> 
> 时间：2013-04-02T13:17:29.353
> 
> 标签：css, templates, mobile

有没有人有任何在移动设备上工作的 CSS 模板的最新示例（或来源）？

理想情况下，它们将非常简单，目的是让某些东西以最小的麻烦/努力启动并运行，而不是迎合每台设备（或每一个花里胡哨）的个人奇思妙想。

关于 SO 的其他相关问题已经有将近 5 年的历史了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:26:16.493

Bootstrap... HTML5BP... 如果您想要完全准备好使用的模板。如果你想要响应式框架，Columnal... CSS Grid... XY.css... Skeleton...

还有很多其他的。

# java - 什么是比较合同？

> ID：15765158
> 
> 赞同：2
> 
> 时间：2013-04-02T13:17:55.670
> 
> 标签：java, comparator

我的java代码抛出了以下异常：

```
java.lang.IllegalArgumentException: Comparison method violates its general contract! 
```

我研究了 StackOverflow 上的消息，发现了几个问题，这些问题发布了他们写得很糟糕的比较方法，但我想知道合同是在哪里写的，以及它究竟说明了比较方法必须做什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T13:20:18.610

看起来[**Java Doc**](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)有

> 实现者必须确保所有 x 和 y 的 sgn(compare(x, y)) == -sgn(compare(y, x))。（这意味着当且仅当 compare(y, x) 抛出异常时 compare(x, y) 必须抛出异常。）
> 
> 实现者还必须确保关系是可传递的： ((compare(x, y)>0) && (compare(y, z)>0)) 意味着 compare(x, z)>0。
> 
> 最后，实现者必须确保 compare(x, y)==0 意味着所有 z 的 sgn(compare(x, z))==sgn(compare(y, z))。
> 
> 通常是这样，但并不严格要求 (compare(x, y)==0) == (x.equals(y))。一般来说，任何违反此条件的比较器都应清楚地表明这一事实。推荐的语言是“注意：这个比较器强加了与等于不一致的排序。”

# apache - 本地主机的 NameVirtualHost 指令警告

> ID：15765160
> 
> 赞同：2
> 
> 时间：2013-04-02T13:17:58.973
> 
> 标签：apache, wamp

我已经阅读了许多帖子，并为同一 IP 地址上的 2 个站点配置了 WAMP，如下所示（httpd.conf 提取）：

```
#Tell Apache to identify which site by name
NameVirtualHost *:80

#Tell Apache to serve the default WAMP server page to "localhost"
<VirtualHost 127.0.0.1>
ServerName localhost
DocumentRoot "C:/wamp/www"
</VirtualHost>

#Tell Apache configuration for 1 site
<VirtualHost 127.0.0.1>
ServerName client1.localhost
DocumentRoot "C:/wamp/www_client1"
<Directory "C:/wamp/www_client1">
allow from all
order allow,deny
AllowOverride all
</Directory>
DirectoryIndex index.html index.php
</VirtualHost>

#Tell Apache configuration for 2 site
<VirtualHost 127.0.0.1>
ServerName client2.localhost
DocumentRoot "C:/wamp/www_client2"
<Directory "C:/wamp/www_client2">
allow from all
order allow,deny
AllowOverride all
</Directory> 
```

我还更改了 Windows 主机文件以添加 127.0.0.1 client1.localhost 等，但是当我重新启动 WAMP 服务时， //client1.localhost 和 //client2.localhost 会转到 c:\wamp\www 中的默认站点文件夹。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:50:07.650

您是否将 vhosts.conf 包含在 httpd.conf 中？

取消注释 httpd.conf 底部附近的这一行（以“包含”开头的行）：

```
# Virtual hosts - leave this commented
Include conf/extra/httpd-vhosts.conf 
```

**编辑：** 看起来问题是`NameVirtualHost`and`VirtualHost`必须匹配，所以你不能有`NameVirtualHost *:80`and `VirtualHost 127.0.0.1`。相反，使用`NameVirtualHost *:80`and`VirtualHost *:80`或`NameVirtualHost 127.0.0.1:80`and `VirtualHost 127.0.0.1`。

如果它们不匹配，您将看到评论中提到的行为，其中与其他虚拟主机不匹配的虚拟主机将被命中，或者如果它们都相同，则第一个（您的默认本地主机）将获得打。

有关更多信息，请参阅此帖子：[Wamp 服务器：多个虚拟主机无法在 Windows 上运行](https://stackoverflow.com/questions/2530418/wamp-server-multiple-virtual-hosts-are-not-working-on-windows)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T01:17:00.740

试试这个配置，它只是你的一些小修改

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

## must be first so the the wamp menu page loads
<VirtualHost *:80>
    ServerAdmin webmaster@homemail.net
    DocumentRoot "C:/wamp/www"
    ServerName localhost
    ServerAlias localhost
    <Directory  "C:/wamp/www">
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1
    </Directory>
</VirtualHost>

#Tell Apache configuration for 1 site
<VirtualHost *:80>
   ServerName client1.localhost
   DocumentRoot "C:/wamp/www_client1"
   <Directory "C:/wamp/www_client1">
      AllowOverride All
      order Allow,Deny
      Allow from all
   </Directory>
   DirectoryIndex index.html index.php
</VirtualHost>

#Tell Apache configuration for 2 site
<VirtualHost *:80>
    ServerName client2.localhost
    DocumentRoot "C:/wamp/www_client2"
    <Directory "C:/wamp/www_client2">
        AllowOverride All
        order Allow,Deny        
        Allow from all
</Directory> 
```

# javascript - 哪种技术用于条件加载内容？

> ID：15765162
> 
> 赞同：0
> 
> 时间：2013-04-02T13:17:59.620
> 
> 标签：javascript

我正在建立一个移动优先的方法网站，并正在决定有条件地加载内容的最佳技术。

**技术1**

该技术使用[enquire.js](http://wicky.nillia.ms/enquire.js/)

连同以下代码...

```
enquire
  .register("(min-width: 500px)", {
     match: function() {
        $("#page").load("content.html");
     }
  })
  .listen(); 
```

该解决方案依赖于 jQuery 和 Enquire.js。当页面向上调整大小时，新内容会自动下载，而当向下调整大小时，加载的内容仍然存在，并且可以通过 display:none 删除，尽管代码在加载后仍保留在 DOM 中。

**技巧2**

这是第二种[技术](http://css-tricks.com/examples/ConditionalCSS/)

[我在这里](http://codepen.io/anon/pen/noqIk)完成了第二种技术的代码笔，使用警报而不是实际内容

这是基于 CSS 媒体查询的，并且似乎比第一种技术快很多，并且在断点处交换内容。调整大小后，DOM 中不会留下任何代码，只有该视口的代码。

我倾向于使用技术 2，但不确定这是否是最好的技术。你会选择哪一个，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:23:32.187

CSS media queries are the way to go (I always use them with [twitter bootstrap](http://twitter.github.com/bootstrap/)), but if you need support below IE9, I would rather recommend the enquire.js solution

More information about compatibility: [http://caniuse.com/css-mediaqueries](http://caniuse.com/css-mediaqueries)

# android - 滚动视图上的 YouTubePlayerView

> ID：15765165
> 
> 赞同：5
> 
> 时间：2013-04-02T13:18:13.880
> 
> 标签：android, youtube-api, android-scrollview, android-youtube-api

首先，我想指出，Android 中似乎存在一个限制，即 a `SurfaceView`on a`ScrollView`不能像您预期的那样工作。[此处](https://stackoverflow.com/questions/4312585/androidvideoview-inside-a-scrollview)对此进行了解释 （在内部`VideoView`使用 a `SurfaceView`，因此存在此问题）。但似乎有一个对我有用的[解决方法](https://stackoverflow.com/questions/5896921/android-scrollview-having-videoview-is-giving-problem/6832598#6832598)。`VideoView`

现在，我还想使用新[的 Android 版 YouTube API](https://www.google.com.uy/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCkQFjAA&url=https://developers.google.com/youtube/android/player/&ei=Q9daUdDwAsiZ0QGxvYHgAw&usg=AFQjCNFS3VWPxCAuZrYGTHSi3AuWn0ul4w&bvm=bv.44442042,d.eWU)在我们的 Android 应用上显示嵌入的 YouTube 视频。实现嵌入式视频播放器的`YouTubePlayerView`也存在上述问题，因为它在层次结构查看器中使用如下所示的 SurfaceView。

![YouTubePlayerView 上的 SurfaceView](https://i.stack.imgur.com/68XFe.png)

我一直无法找到解决此问题的方法。对于我们的应用程序来说， a `YouTubePlayerView`on a`ScrollView`是一个相当常见的用例（可能对许多其他应用程序也是如此）。我将不胜感激对此的任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T01:10:24.830

我也想要这个功能，但唉，它似乎仍在由谷歌实现。

见这里： [https ://code.google.com/p/gdata-issues/issues/detail?id=4514](https://code.google.com/p/gdata-issues/issues/detail?id=4514)

解决方案应该是使用`TextureView`支持[在`ScrollView`](https://stackoverflow.com/questions/10736517/playing-video-on-textureview). 希望 YouTube API 尽快支持这一点。

# mysql - Mysql：用户'root'@'localhost'的访问被拒绝

> ID：15765168
> 
> 赞同：11
> 
> 时间：2013-04-02T13:18:22.623
> 
> 标签：mysql

我知道，这真的很难过，但我无法连接到 MySQL 数据库。

我只是从 MySQL 站点下载并解压缩了 mysql-5.6.10-win32.zip。

我按照[本教程](http://www3.ntu.edu.sg/home/ehchua/programming/sql/MySQL_HowTo.html)进行操作，但无法以 root 身份连接到我的 MySQL 数据库。

我知道在没有密码的情况下以 root 身份连接是不安全的，但我只需要做一些测试，所以我现在可以这样做（如果我知道如何以 root 身份连接，我知道如何添加另一个用户也）。

# 我的.ini

```
# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.

[mysqld]

# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M

# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin

# These are commonly set, remove the # and set as required.
basedir=c:\Programs\mysql-5.6.10-win32
datadir=c:\Programs\mysql-5.6.10-win32\data
port=3306
server_id=1

# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M 

sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES 

[client]

port=3306 
```

当我开始时，`mysqld`我看到：

```
> mysqld --console --init-file=..\set_root_password.sql
2013-04-02 13:48:24 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
2013-04-02 13:48:24 8600 [Note] Plugin 'FEDERATED' is disabled.
2013-04-02 13:48:24 8600 [Note] InnoDB: The InnoDB memory heap is disabled
2013-04-02 13:48:24 8600 [Note] InnoDB: Mutexes and rw_locks use Windows interlocked functions
2013-04-02 13:48:24 8600 [Note] InnoDB: Compressed tables use zlib 1.2.3
2013-04-02 13:48:24 8600 [Note] InnoDB: CPU does not support crc32 instructions
2013-04-02 13:48:24 8600 [Note] InnoDB: Initializing buffer pool, size = 128.0M
2013-04-02 13:48:24 8600 [Note] InnoDB: Completed initialization of buffer pool
2013-04-02 13:48:24 8600 [Note] InnoDB: Highest supported file format is Barracuda.
2013-04-02 13:48:24 8600 [Note] InnoDB: 128 rollback segment(s) are active.
2013-04-02 13:48:24 8600 [Note] InnoDB: Waiting for purge to start
2013-04-02 13:48:24 8600 [Note] InnoDB: 1.2.10 started; log sequence number 1626183
2013-04-02 13:48:24 8600 [Note] Server hostname (bind-address): '*'; port: 3306
2013-04-02 13:48:24 8600 [Note] IPv6 is available.
2013-04-02 13:48:24 8600 [Note]   - '::' resolves to '::';
2013-04-02 13:48:24 8600 [Note] Server socket created on IP: '::'.
2013-04-02 13:48:24 8600 [Note] Event Scheduler: Loaded 0 events
2013-04-02 13:48:24 8600 [Note] Execution of init_file '..\set_root_password.sql' started.
2013-04-02 13:48:24 8600 [Note] Execution of init_file '..\set_root_password.sql' ended.
2013-04-02 13:48:24 8600 [Note] mysqld: ready for connections.
Version: '5.6.10'  socket: ''  port: 3306  MySQL Community Server (GPL) 
```

`set_root_password.sql`包含我在[如何重置 root 密码](http://dev.mysql.com/doc/refman/5.6/en/resetting-permissions.html)中找到的一些命令，还有一些我希望它们有所帮助的命令：

```
UPDATE mysql.user SET Password=PASSWORD('pass') WHERE User='root';
grant all privileges on *.* to 'root'@'%';
grant all privileges on *.* to 'root'@'localhost';
grant all privileges on *.* to 'root@localhost';

SHOW GRANTS FOR 'root'@'%';

FLUSH PRIVILEGES; 
```

但我仍然无法登录。

登录我试过：

```
>mysql -u root
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)

>mysql -u root --password=pass
Warning: Using a password on the command line interface can be insecure.
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

>mysql
ERROR 1045 (28000): Access denied for user 'ODBC'@'localhost' (using password: NO)

>mysql -u root --password=
Warning: Using a password on the command line interface can be insecure.
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)

>mysql -u root --password=mysql
Warning: Using a password on the command line interface can be insecure.
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

>mysql -u root mysql
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)

>mysqladmin --no-defaults -u root version
mysqladmin: connect to server at 'localhost' failed
error: 'Access denied for user 'root'@'localhost' (using password: NO)' 
```

在一些教程中，我阅读了有关`mysqladmin`命令的内容，但它也需要 root 密码。

我也试过空密码和mysql作为默认密码，没有wokrd。

我也试过`--skip-grant-tables`没有成功。

我在 MySQL 主目录的 bin 目录中没有 mysqld_safe，所以我无法尝试。

我试图在这里阅读与该问题相关的所有问题，但我不知道我可以尝试什么......

我很沮丧为什么它不像“下载和运行”那么简单。我不想下载 Win 安装程序，因为我不想在 Windows 启动时启动服务以及在我的系统中不受控制地复制其他内容...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:40:50.290

我刚刚发现，我必须连接指定 -h 和我的电脑名称`ipconfig -all`

```
>ipconfig -all

Windows IP Configuration

   Host Name . . . . . . . . . . . . : PC1234
   Primary Dns Suffix  . . . . . . . :
   Node Type . . . . . . . . . . . . : Hybrid
   IP Routing Enabled. . . . . . . . : No
   WINS Proxy Enabled. . . . . . . . : No
   DNS Suffix Search List. . . . . . : tmdev 
```

和

```
mysql -u root -h PC1234 --password=pass 
```

工作正常。感谢帮助。这很奇怪，但它现在正在工作。

**编辑：**

我在连接该配置时遇到问题。`bind-address`我通过在 my.ini 中指定来解决它：

```
bind-address=localhost 
```

# sql - 如何使用 SQL 适配器在 Worklight 中显示数据

> ID：15765178
> 
> 赞同：0
> 
> 时间：2013-04-02T13:18:56.093
> 
> 标签：sql, authentication, dojo, ibm-mobilefirst

当用户输入登录名和密码时，我无法在下一页显示他的个人资料（来自数据库的信息），我使用 SQL Adapter 来确保与数据库的连接，但直到现在我唯一能做的就是可视化使用 JavaScript 中的“警报”而不是在身份验证页面之后的页面中的信息。

如果有必要提及，我正在使用 Dojo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:49:06.897

由于您没有问任何技术问题，因此我将向您指出入门材料。熟悉 Worklight 适配器和身份验证概念（另请查看示例应用程序）。如果您有技术问题，请提出。

1.  [工作灯适配器](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#server-side-development)
2.  [Worklight 中的身份验证](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#security)

要显示通过 SQL 适配器检索的数据，请参阅此问题（它不实现身份验证，您需要自己将两者结合起来）：[如何在工作灯中的应用程序内使用适配器](https://stackoverflow.com/questions/11646797/how-to-use-adapter-inside-the-application-in-worklight)

# java - 在 Java 中针对 Xml Schema 数据类型验证字符串

> ID：15765180
> 
> 赞同：3
> 
> 时间：2013-04-02T13:19:02.503
> 
> 标签：java, xml, validation, types, schema

是否有针对任何标准 xml 模式数据类型验证字符串的标准方法（请参阅[XML 模式第 2 部分：数据类型第二版](http://www.w3.org/TR/xmlschema-2/)或更具体地说是[内置数据类型](http://www.w3.org/TR/xmlschema-2/#built-in-datatypes)）？

我不想验证一个完整的 XSD，我只是想验证一些针对 XML 数据类型的用户输入（例如针对[http://www.w3.org/2001/XMLSchema#date](http://www.w3.org/2001/XMLSchema#date)或[http://www.w3.org /2001/XMLSchema#boolean](http://www.w3.org/2001/XMLSchema#boolean)）。有没有办法使用标准 API 来做到这一点？如果没有，是否有其他可能性而不是从头开始编写？

javax.xml.validation 包中的类似乎旨在验证完整的模式而不是特定的数据类型。

我正在尝试做的示例：

```
String content = "abc";
String datatype = "http://www.w3.org/2001/XMLSchema#long";
boolean isValid = Validator.isValid(content, datatype); //return false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:51:26.220

不是标准 API，但 Xerces 有一个可能感兴趣的[XML 架构 API 。](http://xerces.apache.org/xerces2-j/javadocs/xs/index.html)在 Xerces 中，您还可以找到使您能够执行此操作的数据类型验证器：

```
import org.apache.xerces.impl.dv.InvalidDatatypeValueException;
import org.apache.xerces.impl.dv.xs.YearDV;

public class Main {

public static void main(String[] args)  {
    try {
        new YearDV().getActualValue("Notayear", null);
        System.out.println("OK");
    } catch (InvalidDatatypeValueException e) {
        System.out.println(e.getMessage());
    }
} 
```

这将打印

```
cvc-datatype-valid.1.2.1: 'Notayear' is not a valid value for 'gYear'. 
```

从那里拿走它。大量代码要阅读！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:24:31.320

您可以执行以下操作：

```
public boolean validate(String inputXml, String schemaLocation)throws SaxException, throws IOException {
// build the schema
SchemaFactory factory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
File schemaFile = new File(schemaLocation);
Schema schema = factory.newSchema(schemaFile);
Validator validator = schema.newValidator();

// create a source from a string
Source source = new StreamSource(new StringReader(inputXml));

// check input
boolean isValid = true;
try {
validator.validate(source);
} catch (SaxException e) {
System.err.printlin("Not valid");
isValid = false;
}

return isValid;
} 
```

# mysql - 自联接：表别名上的 SQL 解析错误

> ID：15765181
> 
> 赞同：0
> 
> 时间：2013-04-02T13:19:08.970
> 
> 标签：mysql, sql, oracle11g, self-join, table-alias

使用简单的**自联接**列出员工的经理：

```
CREATE VIEW AS 
SELECT e1.EMP_ID EmployeeId, e1.FNAME EmployeeName,  
       e1.MANAGER ManagerName
FROM   EMPLOYEE e1 
       LEFT JOIN EMPLOYEE e2 
       ON e1.MANAGER = e2.EMP_ID 
```

有问题的表是 EMPLOYEE，主键为 EMP_ID。

MySQL 和 Oracle 都返回代码错误；尽管我已经尝试了许多不同的变体，但主要的障碍是对有问题的表（e1 和 e2）使用别名，这两个 dbms 都不认为是合法标识符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:20:34.287

您需要为视图命名：

```
CREATE VIEW v_emp AS 
SELECT e1.EMP_ID EmployeeId, e1.FNAME EmployeeName,  
       e1.MANAGER ManagerName
FROM   EMPLOYEE e1 
       LEFT JOIN EMPLOYEE e2 
       ON e1.MANAGER = e2.EMP_ID 
```

# c# - 从 oracleDB 读取文件并添加/删除/修改数据

> ID：15765182
> 
> 赞同：0
> 
> 时间：2013-04-02T13:19:08.843
> 
> 标签：c#, oracle, file

我不太熟悉如何在 C# 中执行此操作。需要连接到 Oracle 数据库，从目录中获取一个文件，然后读取文件的每一行。行是这样的：

然后将拆分为字符串并根据此标志|A|，|D| 或 |M| 我将在里面添加/删除/修改信息。我不想给我写整个代码。只是一些想法和指导方针。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:27:16.243

**第一次[读取文件](http://msdn.microsoft.com/tr-tr/library/dd383503.aspx)：**

```
var lines  = File.ReadLines(@"filename");
foreach (string line in lines)
{
    // Then split each line
    var str = line.Split('|');  // str contains list of splitted string

    // then save it to db
   using ( var c = new OracleConnection("connectionString") )
   {
      c.Open();
     // check flag
     if ( str [2] == 'A' ) 
     {
      // prepare your sql with splitted array
      var command = c.CreateCommand();
      command.Text = "INSERT INTO table(column) values(:col1)";
      command.Parameters.AddWithValue("col1", str[0])
      command.ExecuteNonQuery();
    }

   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:54:59.053

一个[MERGE](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)可以帮助你...

```
MERGE INTO target_table T
USING source_table S
ON (D.id = S.id)
WHEN MATCHED THEN UPDATE SET 
     T.field1 = S.field1,
     T.field2 = S.field2
  DELETE WHERE (S.flag='D')
WHEN NOT MATCHED THEN INSERT (id, field1, filed2)
  VALUES (S.id, S.filed1, S.filed2)
  WHERE S.flag='A'; 
```

但是当目标中已经存在记录时，这不会插入。

# python - 带有 any() 的 Python lambda

> ID：15765185
> 
> 赞同：1
> 
> 时间：2013-04-02T13:19:23.080
> 
> 标签：python, lambda, any

我有一个列表中的单词列表`self.terms`和一个字符串`line`。如果列表中的任何术语在`line`，我想将它们写到一个文件`terms_file`中。

我使用`any()`如下所示，但这会返回一个布尔值。

```
any(terms_file.write(term) for term in self.terms if term in line) 
```

我怎样才能写出文件？我尝试添加一个 lambda，但我对它们并不十分熟悉，但没有奏效。我遇到了一些语法错误，但经过一些更改后，我`False`再次返回。

是否可以使用 来做到这一点`any()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:21:45.447

不要`any()`在这里使用；你甚至不使用返回值。

要编写所有匹配项，请使用：

```
terms_file.write(''.join(term for term in self.terms if term in line)) 
```

但最好只使用常规循环；可读性很重要！

```
for term in self.terms:
    if term in line:
        terms_file.write(term) 
```

`any()`仅在您想了解测试的布尔结果时使用；`any()`当它找到第一个`True`值时停止迭代。在你的情况下`terms_file.write()`返回`None`，所以它甚至永远不会遇到`True`并*总是*返回`False`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:22:47.047

`any`将告诉您是否存在任何术语`line`（因此得名）。

您可以创建这些术语的列表：

```
present_terms = list(terms_file.write(term) for term in self.terms if term in line) 
```

并将其写入文件，可能在加入列表项之后：

```
out_file.write(' '.join(present_terms)) 
```

# tomcat - 使用 Powershell 来自日志文件的警报

> ID：15765188
> 
> 赞同：0
> 
> 时间：2013-04-02T13:19:30.617
> 
> 标签：tomcat, powershell

当提供页面的时间超过 10 秒时，我希望通过电子邮件收到提醒。我不能使用外接显示器，因为这是一个封闭系统。

这是我想观看的日志文件的片段。

```
02-Apr-2013 10:19:50 com.domain.service.core.actions.aaa.GetInfo handleAction
SEVERE: Post call to Widget Service Request WS
02-Apr-2013 10:19:50 com.domain.service.core.actions.aaa.GetInfo handleAction
SEVERE: ERROR: cannot attach result to XML doc
02-Apr-2013 10:19:50 org.apache.jsp.run _jspService
INFO: 35 |  |  | ffffHM6Ly8qLmhhcnJvdy5nb3YudWsv | page1 - time = 7905 ms
02-Apr-2013 10:19:55 org.apache.jsp.run _jspService
INFO: 35 |  |  | ODeeeeeeM6Ly8qLmhh45y4y55YudWsv | summary - time = 7800 ms
02-Apr-2013 10:19:56 org.apache.jsp.run _jspService
INFO: 35 |  |  | ODeeeeeeM6Ly8qLmhh45y4y55YudWsv | page2 - time = 3430 ms
02-Apr-2013 10:19:56 org.apache.jsp.run _jspService
INFO: 35 |  |  | ODeeeeeeM6Ly8qLmhh45y4y55YudWsv | page1 - time = 4210 ms
02-Apr-2013 10:19:56 org.apache.jsp.run _jspService
INFO: 35 |  |  | ODeeeeeeM6Ly8qLmhh45y4y55YudWsv | page3 - time = 4370 ms
02-Apr-2013 10:19:56 org.apache.jsp.run _jspService
INFO: 35 |  |  | ODeeeeeeM6Ly8qLmhh45y4y55YudWsv | page1 - time = 5708 ms
02-Apr-2013 10:19:56 com.domain.service.netServ.netServSTUFF createSession
INFO: creating session. token: xxxxxx
02-Apr-2013 10:19:56 com.domain.service.netServ.netServSTUFF createSession
INFO: creating session. encrypted token: xxxxxx
02-Apr-2013 10:19:56 com.domain.service.core.actions.user.CreateNetsolSession handleAction
INFO: netServ Token: GisLCpQwnMrMEWa5bHuQQw++
02-Apr-2013 10:19:57 org.apache.jsp.run _jspService
INFO: 35 |  |  | ODeeeeeeM6Ly8qLmhh45y4y55YudWsv | home - time = 14000 ms 
```

我想通过电子邮件发送给我的是达到阈值的日期和时间以及加载页面所花费的时间。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:13:43.563

如果我得到这个正确你的 Tomcat 日志使用 2 行 purr 事件。

下面是一些 PowerShell 行，它们将扫描整个日志文件一次，并为`home - time`超过 10 秒的每个实例发送一封电子邮件。

```
$file = Get-Content tomcatlog.txt

$lines = $file.Count
for($i=0;$i-lt$lines;$i++){

#scaning the file for strings like  "home - time = #### ms"
if($file[$i] -like '*home - time = * ms'){

        #The date will be on the previous line
        $date = $file[$i-1].Substring(0,20)

        #Get the Milliseconds
        $time_index = $file[$i].LastIndexOf('=') + 2
        $time = [int]($file[$i].Substring($time_index).Replace(' ms',''))

        #Calculate the seconds
        $seconds = $time/1000

        "Line $i`: On $date the time is took to load was $sec seconds"

        if($seconds -ge 10){
            Send-MailMessage `
            -To 'Michael Bluth <Michale.Bluth@BluthCompany.com>' `
            -From 'Bob Loblaw <Bob.Loblaw@BobLoblaw.com>' `
            -Subject 'Tomcat' `
            -Body "Line $i`: On $date the time is took to load was $sec seconds" `
            -SmtpServer 'smtp.bobloblaw.com'
        }
    }
} 
```

现在，从您的问题来看，您似乎想要对这个日志文件进行一些实时监控。因此，每当一个新事件被添加到日志中，并且`home - time = 11000 ms`大于 10 秒时，发送一封电子邮件。如果您每天只运行一次此脚本，您将收到前一天的重复电子邮件，因为日志文件是相同的。

现在，如果您在每天开始时创建一个新的日志文件，并且在一天结束时运行脚本，那将会改变事情。因此，在脚本的末尾，您可以添加一行来重命名日志文件`Rename-Item -Path C:\tomcatlog.txt -NewName "$(Get-Date -UFormat %y%m%d)_tomcatlog.txt"`，并假设您的服务器会重新创建 Tomcat 日志。这样，您每天只会收到当天的电子邮件。

您可以将重复次数加快到每 12 小时、每 6 小时或每 1 小时。你会积累很多文件，但它会接近实时。

**试试 2**

```
$new_log_path = 'tomcatlog.txt'
$old_log_path = 'copy_tomcatlog.txt'

$lastwritetime = (Get-Item $new_log_path).LastWriteTime
while($lastwritetime -eq (Get-Item $new_log_path).LastWriteTime){
    Start-Sleep -Milliseconds 100
}

$newfile = Get-Content $new_log_path
$oldfile = Get-Content $old_log_path #Just a copy of the old original log file

#You calculate the difference of what was just written to the file
$updates = Compare-Object -ReferenceObject $newfile -DifferenceObject $oldfile

#Copy the file so we can as reference of what already was parsed
Copy-Item -Path $new_log_path -Destination $old_log_path -Force

$len = $updates.count
for($i=0;$i-lt$len;$i++){
    #it would be $updates[$i].InputObject instead of $file[$i]
    ...
} 
```

虽然文件的写入时间不会改变，但只需睡眠并在 100 毫秒内再次检查。当写入时间确实发生变化时，找出写入文件的内容并仅解析写入文件的新信息。

# javascript - 如何使用 JavaScript 创建文本文件？

> ID：15765189
> 
> 赞同：5
> 
> 时间：2013-04-02T13:19:36.787
> 
> 标签：javascript, google-chrome, text-files, creation, filesystemobject

我正在尝试使用 JavaScript 创建一个文本文件。我已经尝试了以下代码，但这不起作用。解决办法是什么？

```
var fso, file;
fso = new ActiveXObject("Scripting.FileSystemObject");
file = fso.CreateTextFile("c:\\Mytest\test.txt");
file.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:23:02.843

You cannot do it using *ActiveXObject* as it works only in Internet Explorer... Have a look on *[File System APIs of HTML5](http://www.html5rocks.com/en/tutorials/file/filesystem/)* which may help you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:25:58.987

确切地说，[ActiveX](https://en.wikipedia.org/wiki/ActiveX)仅适用于 Internet Explorer。你需要定义一个函数并调用它。

```
<script>
    function wtf() {
        set fso = CreateObject("Scripting.FileSystemObject");
        set s = fso.CreateTextFile("C:\test.txt", True);
        s.writeline("HI");
        s.writeline("Bye");
        s.writeline("-----------------------------");
        s.Close();
    }
</script>

<body onload="wtf()"> 
```

# asp.net - ASP.NET MVC 是否必须安装在部署目标机器上？

> ID：15765190
> 
> 赞同：1
> 
> 时间：2013-04-02T13:19:37.350
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, deployment, web-deployment

ASP.NET MVC 是否需要安装在您尝试将 ASP.NET MVC 3 网站部署到的计算机上？

我认为由于您的应用程序的 bin 文件夹已经具有 System.Web.Mvc 和其他必要的 DLL，因此只要 ASP.NET（您的目标版本，在此案例 v4) 已安装。

我正在使用 IIS。我不知道是哪个版本，但它有经典视图，所以它必须是7或更早。默认应用程序池如下所示（并且没有模式）：

![默认应用程序池](https://i.stack.imgur.com/K6CLJ.png)

关于框不显示版本号。MMC 管理单元管理控制台版本是 3.0。这是在 64 位 Windows 2003 R2 标准版服务器上运行的。

**为什么我要问这个/我想做什么**

我通过制作部署包、将其移动到服务器然后运行部署脚本（.cmd 文件）来部署我的 MVC 应用程序。应用程序目录是在 IIS 中创建的。但是，当我浏览到应用程序时，我得到一个 403 说目录列表被拒绝，这是有道理的。IIS 无法解决 MVC 路由问题。

我在这里检查了几个线程，它们（[线程 1](https://stackoverflow.com/questions/11369921/iis7-403-access-denied)、[线程 2](https://stackoverflow.com/questions/11799314/deploy-mvc-3-site-from-localhost-to-iis-directory-listing-denied)）似乎都表明必须在目标上安装 MVC 3。我会这样做，但我只是想检查一下。真的需要安装吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:00:11.470

Windows Server 2003 R2 附带 IIS 6。请参阅有关路由的内容：[将 ASP.NET MVC 部署到 IIS 6](http://blog.stevensanderson.com/2008/07/04/options-for-deploying-aspnet-mvc-to-iis-6/)

正如 bertl 所说，如果您使用二进制文件部署 Web 应用程序，它将起作用（假设已经安装了正确的 .NET 版本并且网站/应用程序池配置正确。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:25:23.230

不需要在服务器上安装 MVC 是正确的。如果您在部署中包含 DLLS，则此方法有效。这就是许多人所说的“BIN 部署”。 [Scott Hanselman](http://www.hanselman.com/blog/BINDeployingASPNETMVC3WithRazorToAWindowsServerWithoutMVCInstalled.aspx)很好地描述了它是如何工作的。

[Phil Haack](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)描述了另一种（更简单的）方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:23:37.593

Here is an awesome article I used many years ago to resolve the routing for IIS 6

[http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

You definitely need asp.net 4.0\. You could copy all the dll's into the bin folder but preferably installed on the host would be the better idea. Depending on the version of IIS, pre 7, you would have to make some adjustments for the [routing](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx) as well.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T09:18:36.027

是的，您不需要在服务器上安装 asp.net mvc3。我使用的服务器上没有 Visual Studio。您只需要适当的服务器配置。显然有几个原因导致 403 和 404 错误。

**403 - 禁止**

403.1 - 禁止执行访问。
403.2 - 禁止读取访问。
403.3 - 禁止写访问。
403.4 - 需要 SSL。
403.5 - 需要 SSL 128。
403.6 - IP 地址被拒绝。
403.7 - 需要客户端证书。
403.8 - 站点访问被拒绝。
403.9 - 用户过多。
403.10 - 无效配置。
403.11 - 密码更改。
403.12 - 映射器拒绝访问。
403.13 - 客户证书被吊销。
403.14 - 目录列表被拒绝。
403.15 - 超出客户端访问许可。
403.16 - 客户端证书不受信任或无效。
403.17 - 客户端证书已过期或尚未生效。
403.18 - 无法在当前应用程序池中执行请求的 URL。此错误代码特定于 IIS 6.0。
403.19 - 无法为此应用程序池中的客户端执行 CGI。此错误代码特定于 IIS 6.0。
403.20 - Passport 登录失败。此错误代码特定于 IIS 6.0。

**404 - 未找到。**

404.0 - (None) - 找不到文件或目录。
404.1 - 在请求的端口上无法访问网站。
404.2 - Web 服务扩展锁定策略阻止此请求。
404.3 - MIME 映射策略阻止此请求。

如需解决方案，请[在此处](http://support.microsoft.com/kb/318380)查看此链接。我发现该链接非常有用。我希望它也能帮助你。:)

# asp.net - 未找到 aspnet_regiis 部分

> ID：15765191
> 
> 赞同：4
> 
> 时间：2013-04-02T13:19:37.017
> 
> 标签：asp.net, iis

我正在尝试加密我的 web.config。

aspnet_regiis 一直告诉我：找不到配置部分“applicationSettings”。

我关注了这个站点：[演练：创建和导出 RSA 密钥容器](http://msdn.microsoft.com/en-us/library/2w117ede%28v=vs.85%29.ASPx)

我的 web.config 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>

    <configSections>
        <section name="x" type="x" />
     <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
   <section name="x.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </sectionGroup>
 </configSections>

    <configProtectedData>
      <providers>
         <add name="MyProvider"
              type="System.Configuration.RsaProtectedConfigurationProvider, System.Configuration, Version=2.0\. 0.0,
                    Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a,
                    processorArchitecture=MSIL"
              keyContainerName="MyKeys" 
              useMachineContainer="true" />
      </providers>
   </configProtectedData>

... 

  <applicationSettings>
    <x.Properties.Settings>
      <setting name="PollingInterval" serializeAs="String">
        <value>10000</value>
      </setting>
    </x.Properties.Settings>
  </applicationSettings>
</configuration> 
```

我使用命令：aspnet_regiis -pe "applicationSettings" -app "/MyApplication" -prov "MyProvider"

当我将部分 configProtectedData 移动到 configSections 上方时，它会加密 applicationSettings，但会删除 configSections-Section，无论如何，IIS 告诉我 configSections 需要成为第一个元素。我不确定我做错了什么。

configSections 中列出了 applicationSettings 是否有问题？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T10:52:31.210

好的，找到了解决方案，

如“configSections”中所述，“applicationSettings”是一个 SectionGroup，而不是一个 Section。aspnet_regiis 只能加密部分。

所以我不得不更深入一点：aspnet_regiis -pe "applicationSettings/x.Properties.Settings" -app "/MyApplication" -prov "MyProvider"

# c# - ObjectDatasource 更新方法 - 包含子对象的通用对象参数不起作用

> ID：15765194
> 
> 赞同：2
> 
> 时间：2013-04-02T13:19:44.707
> 
> 标签：c#, gridview, parameters, objectdatasource, business-logic

**实体**

```
public class Calculation
{
    public int UniqueID { get; set; }
    public int Value1 { get; set; }
    public int Value2 { get; set; }
    public int Result { get; set; }
    public Operation Operation { get; set; }
    public DateTime EntryDateTime { get; set; }
}

 public class Operation
{
    public int OperationID { get; set; }
    public string OperationName { get; set; }
} 
```

**业务逻辑层**

```
public bool UpdateCalculation(Calculation calcObject)
    {
        bool returnVal = false;
        try
        {
            if (GetCalculationByID(calcObject) != null)
            {
                returnVal = calcDAL.UpdateCalculation(calcObject);
                if (returnVal)
                    return returnVal;
                else
                    throw new ApplicationException(ResourceHelper.GetErrorResourceValue("MSG003"));
            }
            else
                throw new ApplicationException(ResourceHelper.GetErrorResourceValue("MSG006"));
        }
        catch (Exception exp)
        {
            LoggingHelper.WriteLog(exp, MethodBase.GetCurrentMethod(), TraceEventType.Error);
            throw exp;
        }
    } 
```

**数据访问层：**

```
public bool UpdateCalculation(Calculation calcObject)
    {
        try
        {
            object[] parameters = new object[5];
            parameters.SetValue(calcObject.UniqueID, 0);
            parameters.SetValue(calcObject.Value1, 1);
            parameters.SetValue(calcObject.Value2, 2);
            parameters.SetValue(calcObject.Result, 3);
            parameters.SetValue(calcObject.Operation.OperationID, 4);
            int returnVal = _db.ExecuteNonQuery(ResourceHelper.GetSpResourceValue("UPD_CALC"), parameters);
            if (returnVal > 0)
                return true;
            else
                return false;
        }
        catch (Exception exp)
        {
            Utilities.LoggingHelper.WriteLog(exp, MethodBase.GetCurrentMethod(), TraceEventType.Error);
            throw exp;
        }
    } 
```

我正在使用 Enterprise Library 5.0 从 DAL 执行数据库操作。

下面的代码显示了对象如何绑定到 Web 项目中的 HTML。

**网站**

```
 <asp:GridView ID="GridView1" runat="server" AllowPaging="True" PageSize="3" AutoGenerateColumns="False"
        DataSourceID="CalculationDS" AllowSorting="True" OnRowDeleted="GridView1_RowDeleted"
        OnRowUpdated="GridView1_RowUpdated" OnSorting="GridView1_Sorting" 
        onrowupdating="GridView1_RowUpdating" DataKeyNames="UniqueID">
        <Columns>
            <asp:CommandField ShowEditButton="True" />
            <asp:BoundField DataField="UniqueID" HeaderText="UniqueID" 
                SortExpression="UniqueID" />
            <asp:BoundField DataField="Value1" HeaderText="Value1" 
                SortExpression="Value1" />
            <asp:BoundField DataField="Value2" HeaderText="Value2" 
                SortExpression="Value2" />
            <asp:BoundField DataField="Result" HeaderText="Result" 
                SortExpression="Result" />
            <asp:TemplateField HeaderText="Operation" 
                SortExpression="OperationName">
                <EditItemTemplate>
                    <asp:DropDownList ID="drpOperations" runat="server" DataSourceID="OperationDS" 
                        DataTextField="OperationName" DataValueField="OperationID" 
                        SelectedValue='<%# Eval("Operation.OperationID") %>'>
                    </asp:DropDownList>
                    <asp:ObjectDataSource ID="OperationDS" runat="server" 
                        SelectMethod="GetAllOperations" TypeName="SampleBLL.OperationBLL">
                        <SelectParameters>
                            <asp:Parameter DefaultValue="OperationName" Name="sortExpression" 
                                Type="String" />
                            <asp:Parameter DefaultValue="Ascending" Name="sortDirection" Type="String" />
                        </SelectParameters>
                    </asp:ObjectDataSource>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" 
                        Text='<%# Eval("Operation.OperationName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="EntryDateTime" HeaderText="EntryDateTime" 
                SortExpression="EntryDateTime" />
        </Columns>
    </asp:GridView>
    <asp:ObjectDataSource ID="CalculationDS" runat="server" DataObjectTypeName="SampleEntities.Calculation"
        DeleteMethod="DeleteCalculation" InsertMethod="InsertCalculation" SelectMethod="GetAllCalculations"
        TypeName="SampleBLL.CalculationBLL" UpdateMethod="UpdateCalculation" OnSelecting="CalculationDS_Selecting"
        OnUpdating="CalculationDS_Updating">
        <SelectParameters>
            <asp:ControlParameter ControlID="GridView1" DefaultValue="UniqueID" Name="sortExpression"
                PropertyName="SortExpression" Type="String" />
            <asp:ControlParameter ControlID="GridView1" Name="sortDirection" PropertyName="SortDirection"
                Type="String" />
        </SelectParameters>
    </asp:ObjectDataSource> 
```

当我尝试编辑行并提交时，当我读取计算对象操作 ID 为 NULL 时，计算对象中的操作列在 DAL 中为 NULL。

我试图从 CalculationDs (ObjectDatasource) Updating 事件和 GridView Updating 事件中读取值，但没有用。

OPERATION 对象列不会自动映射到 GridView 列。

提前致谢。如果您有解决此更新的方法.. !!:(

# android - Android——存储共享偏好的数据

> ID：15765195
> 
> 赞同：3
> 
> 时间：2013-04-02T13:19:46.220
> 
> 标签：android, login, sharedpreferences, password-encryption, storing-data

我目前正在设计一个具有初始登录页面的应用程序。我提供记住我的功能，并将用户名和密码值存储在共享首选项中。我在下面说明了我的示例代码。

```
SharedPreferences preferences = getApplicationContext().getSharedPreferences("MyAppSettings",Context.MODE_PRIVATE);
SharedPreferences.Editor edit = preferences.edit();
edit.putString("username",username);
edit.putString("password",password); 
edit.commit(); 
```

**信息：***假设用户名和密码是由用户填写的字符串变量*

每当用户设置复选框时记住我，我将这些变量存储在共享首选项中。

我想知道这种方式执行这种操作是否安全可靠？

我的意思是可以从应用程序外部访问这些变量吗？

另外，我是否必须加密用户的密码并存储在共享首选项中？

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:37:23.743

尽管 Raghav Sood 确实正确回答了您的问题，但我认为您的应用程序设计方法从根本上是错误的。

现代实践要求您根本不应该在应用程序中存储用户名和密码。相反，登录过程应该生成一个 oauth 令牌，然后您的应用程序可以对其进行加密并记住以供将来访问 Web 服务器。

要全面了解 oauth 令牌，您可以查看关于它的维基百科文章[http://en.wikipedia.org/wiki/OAuth](http://en.wikipedia.org/wiki/OAuth)，例如，twitter 将这种方法用于连接到它的应用程序[https://dev.twitter .com/docs/auth/oauth/faq](https://dev.twitter.com/docs/auth/oauth/faq)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T13:21:02.570

> 我的意思是可以从应用程序外部访问这些变量吗？

任何拥有根设备的人都可以查看您的 SharedPreferences。它只是一个存储在设备上的 XML 文件。

> 另外，我是否必须加密用户的密码并存储在共享首选项中？

这样做会更安全，是的。还要加密用户名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-18T06:22:51.913

1.  让用户提交用户名和密码
2.  后端验证用户后，让服务器返回一个[JWT](https://jwt.io/ "JSON 网络令牌")
3.  [使用Hawk](https://github.com/orhanobut/hawk "Secure, simple key-value storage for Android")将此 JWT 安全地存储在共享首选项中
4.  将来使用此 JWT 对用户进行身份验证

# jquery - 使用 map() 返回 url 查询字符串

> ID：15765197
> 
> 赞同：0
> 
> 时间：2013-04-02T13:19:49.253
> 
> 标签：jquery

我希望这个脚本根据在列表项元素上检查的内容返回一个 url 查询字符串。

```
function makeQuery(){
    var catRes = $('.options input[type="checkbox"]:checked').map(function() {
      return $(this).val();
    }).get().join(", ");
    $('.catQuery').val(catRes);
}

$('.options input[type="checkbox"]').click(function(){
    makeQuery();
}); 
```

HTML

```
<input type="hidden" class="catQuery" value="< map() result here >"/>
<ul class="options">
    <li><input type="checkbox" value="url1"/>Item 1</li>
    <li><input type="checkbox" value="url2"/>Item 2</li>
    <li><input type="checkbox" value="url3"/>Item 3</li>
</ul> 
```

我知道我现在得到的结果是 url1,url2,url3 但我希望它创建一个与此等效的字符串

> ?url1=1&url2=1...

取决于检查哪个输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:22:44.147

试试这个：

```
function makeQuery() {
    var catRes = $('.options input[type="checkbox"]:checked').map(function () {
        return $(this).val() + "=1";
    }).get().join("&");
    $('.catQuery').val(catRes);
}

$('.options input[type="checkbox"]').click(function () {
    makeQuery();
}); 
```

[**演示**](http://jsfiddle.net/ejVEg/1/)

# android - 按下 HOME 或 BACK 时优雅地关闭 Android 中的应用程序

> ID：15765198
> 
> 赞同：-3
> 
> 时间：2013-04-02T13:19:55.877
> 
> 标签：android, forceclose

我有一个播放声音的 android 应用程序，但是当我按 HOME/BACK 时，我希望声音停止并关闭应用程序，当用户返回应用程序时，我想再次开始活动而不是恢复。

我的 onPause() 代码：

```
@Override
protected void onPause()
{
    super.onPause();
    if (pS.isPlaying()) {
        pS.pause(); //stop the sound
        finish();
    }
    else
        finish();
} 
```

当声音播放时，我点击 HOME 或 BACK 我的应用程序 FC 并在下面发布日志：

```
04-02 13:06:40.563: E/AndroidRuntime(925): FATAL EXCEPTION: main
04-02 13:06:40.563: E/AndroidRuntime(925): java.lang.RuntimeException: Unable to pause activity {com.testcom.myapp/com.testcom.myapp.MyappActivity}: java.lang.NullPointerException
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2354)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2311)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2291)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.access$1700(ActivityThread.java:117)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:938)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.os.Looper.loop(Looper.java:123)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-02 13:06:40.563: E/AndroidRuntime(925):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 13:06:40.563: E/AndroidRuntime(925):  at java.lang.reflect.Method.invoke(Method.java:507)
04-02 13:06:40.563: E/AndroidRuntime(925):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-02 13:06:40.563: E/AndroidRuntime(925):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-02 13:06:40.563: E/AndroidRuntime(925):  at dalvik.system.NativeStart.main(Native Method)
04-02 13:06:40.563: E/AndroidRuntime(925): Caused by: java.lang.NullPointerException
04-02 13:06:40.563: E/AndroidRuntime(925):  at com.testcom.myapp.MyappActivity.onPause(MyappActivity.java:119)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.Activity.performPause(Activity.java:3851)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
04-02 13:06:40.563: E/AndroidRuntime(925):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2341)
04-02 13:06:40.563: E/AndroidRuntime(925):  ... 12 more 
```

**注意**：如果正在播放声音并按下 HOME/BACK，则应用程序关闭正常，但如果在按下 HOME/BACK 时播放应用程序 FC 没有声音。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:22:06.747

尝试：

```
@Override
protected void onPause()
{
    super.onPause();
    if (pS!= null && pS.isPlaying()) {
        pS.pause(); //stop the sound
        finish();
    }
    else
        finish();
} 
```

我猜最有可能在没有声音播放时你的`pS`变量为空，因此在使用它时你会得到一个 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:24:38.793

在您可以完成（）您的活动之前，无需在活动生命周期中等待 onpause()

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{     

if(keyCode == KeyEvent.KEYCODE_HOME||keyCode == KeyEvent.KEYCODE_BACK)
{
    if (ps!=null) {
    pS.pause(); //stop the sound
    finish();
}
else
  finish();
}
}); 
```

# java - 删除字符串的最后一个重复字符

> ID：15765199
> 
> 赞同：5
> 
> 时间：2013-04-02T13:19:56.457
> 
> 标签：java, regex, string

假设我们有一个这样的字符串：

```
"abcdaaaaefghaaaaaaaaa"
"012003400000000" 
```

我想删除最后的重复字符，以获得这个：

```
"abcdaaaaefgh"
"0120034" 
```

有没有一种简单的方法来做到这一点，用正则表达式？我对此有点困难，我的代码开始看起来像一个巨大的怪物......

一些澄清：

*   *什么被认为是重复的？*

    结尾至少包含**2 个**字符的序列。一个字符不被视为重复。例如： in `"aaaa"`,`'a'`不被认为是重复的，但 in `"baaaa"`, 它是。因此，在 的情况下`"aaaa"`，我们不必对 String 进行任何更改。另一个例子：`"baa"`必须给`"b"`。

*   *对于只有一个字符的字符串？*

    必须返回一个像`"a"`我们只有 char 这样的字符串而不做任何更改，即我们必须 return 。`'a'``"a"`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T13:24:44.390

您可以[`replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)与反向引用一起使用：

```
str = str.replaceAll("(.)\\1+$", ""); 
```

**编辑**

为了满足不能删除整个字符串的要求，我只需在之后添加一个检查，而不是使正则表达式过于复杂：

```
public String replaceLastRepeated(String str) {
    String replaced = str.replaceAll("(.)\\1+$", "");
    if (replaced.equals("")) {
        return str;
    }
    return replaced;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T13:26:59.200

我不认为我会为此使用正则表达式：

```
public static String removeRepeatedLastCharacter(String text) {
    if (text.length() == 0) {
        return text;
    }
    char lastCharacter = text.charAt(text.length() - 1);
    // Look backwards through the string until you find anything which isn't
    // the final character
    for (int i = text.length() - 2; i >= 0; i--) {
        if (text.charAt(i) != lastCharacter) {
            // Add one to *include* index i
            return text.substring(0, i + 1);
        }
    }
    // Looks like we had a string such as "1111111111111".
    return "";
} 
```

*我个人*觉得这比正则表达式更容易理解。它可能会或可能不会更快 - 我不想做出预测。

请注意，这将*始终*删除最后一个字符，无论它是否重复。这意味着单个字符串将始终以空字符串结尾：

```
"" => ""
"x" => ""
"xx" => ""
"ax" => "a"
"abcd" => "abc"
"abcdddd" => "abc" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T13:32:23.623

我不会使用正则表达式：

```
public class Test {
  public void test() {
    System.out.println(removeTrailingDupes("abcdaaaaefghaaaaaaaaa"));
    System.out.println(removeTrailingDupes("012003400000000"));
    System.out.println(removeTrailingDupes("0120034000000001"));
    System.out.println(removeTrailingDupes("cc"));
    System.out.println(removeTrailingDupes("c"));
  }

  private String removeTrailingDupes(String s) {
    // Is there a dupe?
    int l = s.length();
    if (l > 1 && s.charAt(l - 1) == s.charAt(l - 2)) {
      // Where to cut.
      int cut = l - 2;
      // What to cut.
      char c = s.charAt(cut);
      while (cut > 0 && s.charAt(cut - 1) == c) {
        // Cut that one too.
        cut -= 1;
      }
      // Cut off the repeats.
      return s.substring(0, cut);
    }
    // Return it untouched.
    return s;
  }

  public static void main(String args[]) {
    new Test().test();
  }
} 
```

匹配@JonSkeet 的“规格”：

请注意，这*只会*删除最后*重复*的字符。这意味着不会触及单个字符串，但如果两个字符相同，则两个字符串可能会变为空：

```
"" => ""
"x" => "x"
"xx" => ""
"aaaa" => ""
"ax" => "ax"
"abcd" => "abcd"
"abcdddd" => "abc" 
```

我想知道是否有可能在正则表达式中实现这种级别的控制？

**由于...**添加，***但如果我们将此正则表达式与 aaaa 一起使用，则它不会返回任何内容。它应该返回 aaaa。*评论：**

 **相反，使用：

```
 private String removeTrailingDupes(String s) {
    // Is there a dupe?
    int l = s.length();
    if (l > 1 && s.charAt(l - 1) == s.charAt(l - 2)) {
      // Where to cut.
      int cut = l - 2;
      // What to cut.
      char c = s.charAt(cut);
      while (cut > 0 && s.charAt(cut - 1) == c) {
        // Cut that one too.
        cut -= 1;
      }
      // Cut off the repeats.
      return cut > 0 ? s.substring(0, cut): s;
    }
    // Return it untouched.
    return s;
  } 
```

其中有合同：

```
"" => ""
"x" => "x"
"xx" => "xx"
"aaaa" => "aaaa"
"ax" => "ax"
"abcd" => "abcd"
"abcdddd" => "abc" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:25:58.390

替换`(.)\1+$`为空字符串：

```
"abcddddd".replaceFirst("(.)\\1+$", ""); // returns abc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T13:36:07.920

这应该可以解决问题：

```
public class Remover {
     public static String removeTrailing(String toProcess)
     {
        char lastOne = toProcess.charAt(toProcess.length() - 1);
        return toProcess.replaceAll(lastOne + "+$", "");
     } 

     public static void main(String[] args)
     {
        String test1 = "abcdaaaaefghaaaaaaaaa";
        String test2 = "012003400000000";

        System.out.println("Test1 without trail : " + removeTrailing(test1));
        System.out.println("Test2 without trail : " + removeTrailing(test2));
     }
} 
```**

# c# - 使用字符串创建 System.Diagnostics.ConsoleTraceListener 的实例

> ID：15765200
> 
> 赞同：1
> 
> 时间：2013-04-02T13:19:56.237
> 
> 标签：c#, reflection, instance, system.diagnostics, diagnostics

我正在尝试创建一个`System.Diagnostics.ConsoleTraceListener`使用字符串的实例，该字符串是从 xml 文件中获取的。

```
Dictionary<string, TraceListener> dListeners = new Dictionary<string, TraceListener>();
string sType = "System.Diagnostics.ConsoleTraceListener";
Type oType = Type.GetType(sType);//getting null here
dListeners["Listener1"] = (TraceListener)Activator.CreateInstance(oType); 
```

我在上面得到 oType 为 null 。我不知道为什么，缺少什么？我是否还需要在字符串中指定程序集名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:02:23.023

在指定程序集的完全限定名称后，我能够创建实例。

谢谢@汉斯

```
Dictionary<string, TraceListener> dListeners = new Dictionary<string, TraceListener>();
string sType = "System.Diagnostics.ConsoleTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089";
Type oType = Type.GetType(sType);              
dListeners["Listener1"] = (TraceListener)Activator.CreateInstance(oType); 
```

# html - 在 SVG 元素中拉伸特定层

> ID：15765201
> 
> 赞同：2
> 
> 时间：2013-04-02T13:19:59.203
> 
> 标签：html, svg

我正在尝试创建一个相当复杂的 SVG 界面，由几个图形层组成。

我希望在调整浏览器窗口大小时通过使用 viewBox 属性来拉伸某些图层（即 SVG 中的“g”元素）。同一 SVG 中的其他图层应单独缩放或处理。这就是我遇到问题的地方。

我希望能够做到以下几点：

```
<svg>
    <g name="stretchable" width="900px" height="500px" viewBox="0px 0px 900px 500px">
        ...insert stretchable shapes here...
    </g>
    <g name="non-stretchable">
        ...insert other shapes here...
    </g>
</svg> 
```

...然后通过操作 viewBox 属性仅拉伸“可拉伸” g 元素。但显然， viewBox 属性不适用于 g 元素。

有没有其他方法可以在 SVG 中拉伸特定的“g”元素，而不必拉伸整个 SVG？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:04:50.943

为什么不使用`<svg>`元素而不是`<g>`元素。它确实允许使用 viewBox 属性。

如果这不好，您可以随时尝试将 transform="scale(x,y)" 添加到`<g>`x 和 y 是您需要计算的数字比例因子的元素。

BTW`<g>`元素不支持宽度或高度属性，尽管`<svg>`元素支持。

# iphone - 使用 Web 服务发送图像还是使用 Smtp 发送电子邮件？

> ID：15765205
> 
> 赞同：1
> 
> 时间：2013-04-02T13:20:05.737
> 
> 标签：iphone, ios, web-services, smtp

在我的应用程序中，我想在没有交互的情况下向用户发送图像。通过 Web 服务或通过 Smtp 电子邮件哪个选项更好

如果用户在图像发送过程中按下主页按钮。Apple 提供 10 分钟来完成您的小任务。他们中的哪一个会表现更好？

如果我使用 web 服务或 Smtp 电子邮件，应用程序是否有可能被拒绝？

谢谢贾德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:26:03.057

最好通过网络服务发送。正如苹果的隐私政策所说，没有用户的交互，你不能发送电子邮件或短信。如果您使用电子邮件发送图像，您的应用程序可能会被拒绝。

关于性能 Web 服务可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:27:16.663

如果我使用 web 服务或 Smtp 电子邮件，应用程序是否有可能被拒绝？

> > 没有应用程序不会被拒绝。但需要用户确认。

# python - Python 请求库 pre_request 钩子

> ID：15765210
> 
> 赞同：4
> 
> 时间：2013-04-02T13:20:28.163
> 
> 标签：python, python-requests

我在尝试从旧版本的 python 请求（0.14）切换到新版本（1.1、1.2 等等）时遇到问题。问题是我们有一个使用以下库在 Twitter 上发布图像的系统：[https ://github.com/maraujop/requests-oauth](https://github.com/maraujop/requests-oauth)

主要问题在于这行代码：

```
# This is taken from the documentation of the library mentioned above
session = requests.session(hooks={'pre_request': oauth_hook})
session.post(...) 
```

由于 Session 构造函数不再接受 hooks 参数。我发现 post 方法虽然接受了 hooks 参数，并像这样修改了代码：

```
session = requests.session()
session.post(..., hooks={'pre_request': oauth_hook}) 
```

这比以前更好，但是 pre_request 在新版本的 python-requests 中不再被接受（你可以在 requests 0.14 的文档中找到这个钩子，但在任何新版本中都没有）。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:33:27.507

您需要自己创建请求对象，将其传递给钩子，然后调用`.prepare()`它：

```
import requests

request = requests.Request('POST', url, ...)
request = oauth_hook(request)
prepared = request.prepare() 
```

然后发送：

```
session = requests.session()
resp = session.send(prepared) 
```

# android - Android - JNA 库

> ID：15765212
> 
> 赞同：3
> 
> 时间：2013-04-02T13:20:29.710
> 
> 标签：android, jna

您好，我正在使用[JNA](https://github.com/twall/jna)来使用外部 .dll（我没有头文件，但我有文档，因此暴露了函数签名）。

[我已按照此处的说明](https://github.com/twall/jna/blob/master/www/GettingStarted.md)设法在 java 项目中使用我的 dll，现在我正尝试在 android 应用程序上使用相同的东西。

我在我的库中导入了 jna jar，还在我的构建路径中添加了 jar，但我收到了一个错误

```
The library 'jna-3.5.1.jar' contains native libraries that will not run on the device.
The following libraries were found:
com/sun/jna/linux-amd64/libjnidispatch.so
com/sun/jna/darwin/libjnidispatch.jnilib
com/sun/jna/linux-i386/libjnidispatch.so
com/sun/jna/sunos-x86/libjnidispatch.so
com/sun/jna/sunos-amd64/libjnidispatch.so
com/sun/jna/sunos-sparc/libjnidispatch.so
com/sun/jna/sunos-sparcv9/libjnidispatch.so 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:23:00.757

This deserves an answer...

Did you compile the lib you wanna use for android?

Why not write a JNI wrapper around those native libs, and invoke that from your android app?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T10:55:18.010

浏览您的 jna.jar 并删除消息中显示的文件：

```
com/sun/jna/linux-amd64/libjnidispatch.so
com/sun/jna/darwin/libjnidispatch.jnilib
com/sun/jna/linux-i386/libjnidispatch.so
com/sun/jna/sunos-x86/libjnidispatch.so
com/sun/jna/sunos-amd64/libjnidispatch.so
com/sun/jna/sunos-sparc/libjnidispatch.so
com/sun/jna/sunos-sparcv9/libjnidispatch.so 
```

然后也许你需要重新启动你的 IDE，这应该可以工作。

# javascript - 为什么我的全局变量在局部声明之前被遮蔽了？

> ID：15765220
> 
> 赞同：6
> 
> 时间：2013-04-02T13:20:45.230
> 
> 标签：javascript, variables, global-variables

```
x = 1; 
alert(x); 
var y = function() { 
    alert(x); 
    var x = 2; 
    alert(x); 
} 
y(); 
```

3 个警报的结果是：`1`, `undefined`, `2`(Chrome 25)

我的问题是：为什么第二个警报未定义？为什么不是1？不是有一个全局变量 x 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T13:22:23.747

由于[提升](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)，这是被执行的：

```
x = 1; 
alert(x); 
var y = function() { 
    var x; // <-- this gets hoisted up from where it was.

    alert(x); 
    x = 2; 
    alert(x); 
} 
y(); 
```

在 function 开始时`y()`，声明了局部变量`x`但未初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:22:49.513

函数中的变量声明被提升到顶部。所以它在技术上看起来像这样：

```
var y = function() {
    var x;

    alert(x);

    x = 2;
}; 
```

局部变量盖过了全局变量。这就是警报返回的原因`undefined`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:17:31.703

由于 JavaScript 中的作用域是一个函数对象。当您在函数中执行某些代码（您的代码示例）时，“alert(x)”将查找函数中是否存在“x”的任何定义。所以，这个函数中有一个“var x = 2”。但是 JavaScript 运行时会这样解释你的代码：

```
x = 1; 
alert(x); 
var y = function() { 
  var x;
  alert(x); 
  x = 2; 
  alert(x); 
} 
y(); 
```

因此，第二个警报中的 x 是“未定义”而不是“1”。因此，当您在函数中声明某个变量时，我建议您在函数顶部声明变量。

# mysql - 如何使用 Play、Hibernate 和 MySql 设置每个会话的事务隔离级别

> ID：15765222
> 
> 赞同：4
> 
> 时间：2013-04-02T13:20:53.380
> 
> 标签：mysql, hibernate, playframework, isolation-level

对某些类型的 Web 请求具有可重复读取可能很有用，而其他类型的 Web 请求通过已提交读取最容易实现。如何指定每个 Http 请求或每个会话或每个事务使用哪个隔离级别？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-16T04:22:32.383

Hibernate有一个数据库事务的实现，默认是JDBC Transaction（另一个是JTA）。

也许这将有助于[休眠文档事务和并发](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch13.html)

# java - 在 XPage 中的新 Java 自定义控件中插入现有控件

> ID：15765223
> 
> 赞同：0
> 
> 时间：2013-04-02T13:20:58.040
> 
> 标签：java, xpages, xpages-extlib

嗨，我仍在尝试为 XPages 开发我自己的 java 控件。我想知道如何使用现有控件并在新控件中使用它。

可以说我想开发类似登录弹出控件的东西。我扩展了 UIDialog ，`com.ibm.xsp.extlib.component.dialog`但我怎么能`xp:inputText`在它上面添加一个？

好的，在这个例子中，我可以`xp:callback`在标记部分添加一个方面，`control.xsp-config`所以我只需要像标准控件一样在其上拖动一些输入字段，但是如果我希望它只是一个可以与更新站点一起部署的控件怎么办.

**更新：**

好的，尝试了您的解决方案 keithstric。我猜你在你的组件上工作。我为我的组件使用 e 渲染器。如果我使用渲染器添加组件或直接在我的组件中添加组件，那么组件树是否存在差异：

渲染器：

```
public class MyRenderer extends Renderer {

public void encodeBegin(FacesContext context, UIComponent component)throws IOException {
    ResponseWriter w = context.getResponseWriter();
    NewComponentXY comp = new ComponentXY();
    component.getChildren().add(comp);
} 
```

或直接：

```
public class MyComponent extends UIComponentBase {

    public void encodeBegin(FacesContext context, UIComponent component)throws IOException {
        ResponseWriter w = context.getResponseWriter();
        NewComponentXY comp = new ComponentXY();
        this.getChildren().add(comp);
    } 
```

jsf生命周期有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:23:04.080

首先，为了确保我们都说同一种语言，您所说的“java 控件”实际上是一个“组件”。这样它就不会与自定义控件混淆。

您需要在组件的 encodeBegin 方法中注入任何其他组件，而不是渲染器的 encodeBegin，而是组件的 encodeBegin。为此，您需要一个面板或 div 的某种容器，如果您不需要数据源，我推荐使用 div。然后将您的用户名和密码字段以及您可能想要的任何标签注入 div。根据您想要的复杂程度（即一个表，其中一列用于标签，另一列用于密码），此代码可能会变得相当大。但一个简单的例子是：

```
XspDiv cont = new XspDiv();
cont.setId("loginFormContainer");
cont.setStyleClass("loginFormContainer");
XspInputText userName = new XspInputText();
userName.setId("userNameInputId");
Attr placeHolderAttr = new Attr();
placeHolderAttr.setComponent(userName);
placeHolderAttr.setName("placeholder");
placeHolderAttr.setValue("Enter your Username");
userName.addAttr(attr);

XspInputText password = new XspInputText();
password.setId("passwordInputId");
password.setPassword(true);
//NOTE: I can't get the placeholder attr to work on a password field but
//you can try as your mileage may vary

cont.getChildren().add(userName);
cont.getChildren().add(password);
this.getChildren().add(cont); 
```

您可以在[此处](http://www.openntf.org/xspext/xpages%20extension%20library%20documentation.nsf/xpages-doc/Controls.html)找到 IBM 提供的 90% 的组件类以及所有组件属性的细分。我的博客上还有一篇关于组件注入的旧文章，还有一篇[关于](http://www.keithstric.com/A55BAC/keithstric.nsf/dx/KSTD-8MGJTA)组件开发的[文章](http://www.keithstric.com/A55BAC/keithstric.nsf/default.xsp?documentId=E54655CC596DF550852579840054E294)。如果 encodeBegin 方法为时已晚并且需要部分刷新才能显示注入的组件，您可能需要添加 FacesComponent 接口并在 initBeforeContents 方法中进行注入。

作为奖励，要触发部分刷新，这需要通过 CSJS 完成。所以看看

((UIViewRootEx2) FacesContext.getCurrentInstance().getViewRoot()).postScript("这里是CSJS代码");

# c# - 正则表达式多行奇怪的行为

> ID：15765227
> 
> 赞同：0
> 
> 时间：2013-04-02T13:21:04.253
> 
> 标签：c#, regex, multiline

我有一个这样的字符串：

```
string text = "ext_bus      0  0/0/3/0.0      side         CLAIMED     INTERFACE    IDE Primary Channel\r\ntarget       0  0/0/3/0.0.0    tgt          CLAIMED     DEVICE       \r\ndisk         0  0/0/3/0.0.0.0  sdisk"; 
```

当我进行正则表达式多行搜索以获取 ext_bus 第三列（0/0/3/0.0）和最后一列（IDE 主通道）中的文本时：

```
Regex regExp = new Regex(@"^ext_bus\s*[0-9]+\s*(?<HWPath>\S+).*\s{2,}(?<BusName>.*?)\r?$", RegexOptions.Multiline); 
```

第一组OK：“0/0/3/0.0”

但第二组是下一行！：“target 0 0/0/3/0.0.0 tgt CLAIMED DEVICE”

Multiline（只有一行）如何实现这一点，以及如何获得最后一列（字符串末尾的文本在 2 个或更多空格之后）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:34:09.217

简短的回答是，这是因为`.*`正则表达式中的第一个匹配到第一行的末尾，然后`\s{2,}`匹配换行符，然后`(?<BusName>.*?)`将匹配第二行的所有内容。

`Multiline`mode 意味着`^`并`$`匹配一行的开始和结束，而不仅仅是整个字符串的开始和结束。

删除 `.*`然后`<BusName>`将剩下的文本放在后面的空格后面的行上`0/0/3/0.0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:35:50.107

你为什么使用正则表达式？

您可以使用 split 轻松完成

```
string value = "ext_bus      0  0/0/3/0.0      side         CLAIMED     INTERFACE    IDE Primary Channel\r\ntarget       0  0/0/3/0.0.0    tgt          CLAIMED     DEVICE       \r\ndisk         0  0/0/3/0.0.0.0  sdisk";
char[] delimiters = new char[] {' ' }; // here you can add more seperaors
string[] parts = value.Split(delimiters, StringSplitOptions.RemoveEmptyEntries);
for (int i = 0; i < parts.Length; i++)
{
    Console.WriteLine(parts[i]);
} 
```

# css - Initial-scale vs. desktop.css+phone.css+tablet.css?

> ID：15765228
> 
> 赞同：1
> 
> 时间：2013-04-02T13:21:08.477
> 
> 标签：css, pixel, em, initial-scale

I just discovered the initial-scale meta attribute.

Previously, I've been using a default.css to define all my styles and sizes (for fonts and elements) so they appear nicely on screen real estates of desktop computers. Then I might use media queries or PHP to include an phone.css or tablet.css if you're using a phone or tablet, and this will adjust ONLY SIZES for smaller devices.

But now that I've become aware of the concept of initial-scale, should I be using that instead to control sizes of elements?

A very important consequence I'm trying to get at is this...I use to define my font sizes with EM (or REM) units like this:

```
/*desktop.css*/
html{font-size:62.5%;}
p{font-size:1.2em;}
span {font-size:1em;}

/*phone.css*/
html{font-size:125%;}

/*tablet.css*/
html{font-size:100%;} 
```

In other words, my phone.css and tablet.css only adjusts the font-size percentage on the html element, and all other elements will scale accordingly on all different devices. To a certain degree, i do this wiht padding, margins, lineheights and letterspacing.

With the introduction of initial-scale, does that mean EM/REM units are irrelevant for scaling font sizes? We can stick to the much more intuitive PX units? And let initial-scale do the rest of the scaling work?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:02:04.427

关于 em 单元的问题是它应该在不同设备和屏幕密度之间显示相同，因为实际高度由客户端决定。

我还在一些应用程序中使用了初始比例、最小比例和最大比例，并且发现 px 单位可以很好地工作，只要您为每个设备的比例选择一个合适的值。

# xml - How Magento parses XML layout code, Where are the files that parses layout XML

> ID：15765231
> 
> 赞同：0
> 
> 时间：2013-04-02T13:21:20.510
> 
> 标签：xml, magento, layout, xml-parsing, magento-1.7

I want to know how **Magento parses the XML layout codes**. Where are the parser files, I dont have idea how it is done. can anyone please share anything useful?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:29:00.033

对解析器文件了解不多。但是可以在此处找到布局 xml 说明。检查它是否适合您。
[了解 Magento 布局 xml 文件（参考，块，...）](https://stackoverflow.com/questions/9092716/understanding-magento-layout-xml-file-reference-block/14880664#14880664)

# android - 如何在 android 中转储文件系统 /dev/fuse？

> ID：15765233
> 
> 赞同：2
> 
> 时间：2013-04-02T13:21:22.297
> 
> 标签：android, filesystems

我想在我的智能手机中转储 /dev/fuse。我正在使用 Pantech Vega R3，它是 Jellybean。

我会尝试以下。

```
>adb shell
shell@android:/ $ dd if=/dev/fuse of=/storage/sdcard1 bs=2048
/dev/fuse: cannot open for read: Permission denied. 
```

sdcard1 是外部 sd。

我必须root我的手机吗？如果我必须root，我怎样才能root JellyBean？

对不起，我英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-23T10:57:04.317

Do `ls -all /dev/fuse`in terminal 显示其权限`rw-------`和所有者`root:root`。因此，它无法读取或`dd`没有 root 访问权限。

# android - 如何在 andenigne 中为等距平铺地图旋转 3D 透视相机

> ID：15765235
> 
> 赞同：0
> 
> 时间：2013-04-02T13:21:25.907
> 
> 标签：android, andengine

我正在研究等距平铺地图游戏。在介绍中我想展示完整的游戏领域。所以我使用了

```
this.mCamera = new ZoomCamera(CAMERA_WIDTH, CAMERA_HEIGHT, CAMERA_WIDTH, CAMERA_HEIGHT) {
    @Override
    public void onApplySceneBackgroundMatrix(final GLState pGLState) {
        final float widthRaw = this.getWidthRaw();
        final float heightRaw = this.getHeightRaw();

        pGLState.orthoProjectionGLMatrixf(0, widthRaw, heightRaw, 0, getZNear(), getZFar());
    }

    @Override
    public void onUpdate(float pSecondsElapsed) {
        if (timeCounter >= 1) {
            mCamera.setRotation(i);
            timeCounter = 0;
            i=i+1;
        }
        timeCounter += pSecondsElapsed;
        super.onUpdate(pSecondsElapsed);
    }
}; 
```

但它的旋转 2d 视图。我想以 3d 透视图旋转。如何在 andenigne GLES2.0 中以 3d 透视图旋转相机。请建议我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T00:12:57.500

您无法以 3D 方式旋转相机。3D 的出现是由于艺术品是透视绘制的。旋转图稿不会导致图稿改变其绘制方式，就像旋转一张上面有图画的纸会导致 3D 变换一样。要在 3D 中旋转，您需要使用 3D 引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T19:41:28.290

有几次我在 AndEngine 论坛上偶然发现了[这个教程](http://www.andengine.org/forums/tutorials/3d-perspective-tutorial-t1790.html)，其中指出可以旋转相机以显示更远的物体（更小）。它是为 AndEngine GLES1 制作的，但应该可以使其适应 GLES2。

AndEngine 知道 z 轴。该轴上的位置是根据您将 Sprite 附加到场景的顺序自动设置的。但是，您应该手动设置它。在大多数情况下，每次 Sprite 更改其位置时，根据 y 位置（z 轴 = y 轴）设置 z 轴就足够了。

```
public class YourSprite extends Sprite{
     ...
     @Override
     setPosition(float x, float y){
        super.setPosition(x,y);
        this.setZIndex(y);
     }
} 
```

如果您随后设法按照教程中的说明实现相机旋转，连同 z 轴，您应该有一个非常逼真的 3D 效果。

但是，我从未尝试过该教程，因为大多数使用鸟瞰图的游戏（作为您提供的 youtube 链接中的游戏）不需要真正的消失点，因为显示器很可能很小，所以玩家反正不会注意到。所以我坚持改变z轴上的位置。但如果有人设法旋转相机，我当然想知道更多！

# javascript - javascript排序函数排序错误

> ID：15765236
> 
> 赞同：9
> 
> 时间：2013-04-02T13:21:26.787
> 
> 标签：javascript, sorting

您好，我有一个文本框，其值如下

```
<input type="hidden" value="2,1,4,5,3,6,7,8,9,10,11,12" class="sortvalues" id="1_1_parent"> 
```

现在我想要获取这个文本框的值，想要将值拆分为数组，然后作为最后一个结果，我需要一个排序数组。

我做了什么。

```
 allsortedValues =  $(".sortvalues").val();
 allsortedValues = allsortedValues.split(",");
 allsortedValues = allsortedValues.sort(); 
```

当我检查数组

```
 console.log(allsortedValues); 
```

表明

```
 1,10,11,12,2,3,4,5,6,7,8,9 
```

将数组排序为`1, 10, 11, 12, 2.....`

我什至用过

```
allsortedValues = allsortedValues.split(",").map(function(x){return parseInt(x)}); 
```

在应用排序之前，在其他情况下我什至使用`parseInt`过

```
for(var i = 0; i < allsortedValues.length; i++) {

   allsortedValues[i] = parseInt(allsortedValues[i]);
} 
```

在应用排序之前，但在所有情况下结果都是相同的。有人会指导我做错了什么吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-02T13:23:01.170

您必须传入一个将字符串转换为数字的比较器函数：

```
allsortedvalues = allsortedvalues.sort(function(a,b) {
  return (+a) - (+b);
}); 
```

如果您的某些数组条目有可能不是格式良好的数字，那么您的比较器将不得不变得更加复杂。

该构造`(+a)`涉及一元运算符，如果已经是一个数字`+`，它不会做任何事情。`a`但是，如果*不是*`a`数字，则结果将是当*解释*为数字时的值，或者是。通过检查和解析为数字的字符串表示，字符串以显而易见的方式被*解释*为数字。布尔值将被转换为和。值变为，并且是。最后，对象引用通过调用其函数被解释为数字，否则如果这没有帮助。*`+a``a`*`NaN`*`false -> 0``true -> 1``null``0``undefined``NaN``valueOf()``NaN`***

 ***`Number(a)`如果您愿意，它等效于使用 Number 构造函数，如在 中。它的作用与`+a`. 我是一个懒惰的打字员。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-02T13:23:17.467

> 如果未提供 compareFunction，则通过将元素转换为字符串并按字典（“字典”或“电话簿”，而不是数字）顺序比较字符串来对元素进行排序。例如，“80”按字典顺序排在“9”之前，但在数字排序中，9 排在 80 之前。
> 
> 要比较数字而不是字符串，比较函数可以简单地从 a 中减去 b：

```
function compareNumbers(a, b)
{
  return a - b;
} 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)***

# android - 没有从 EditText 得到任何东西

> ID：15765240
> 
> 赞同：1
> 
> 时间：2013-04-02T13:21:37.907
> 
> 标签：android, android-edittext

嗨，我对 Android 开发真的很陌生，我只是在开发一个应用程序，它将（在 EDIT-TEXT 中）输入（整数）转换为厘米并显示为普通文本（在文本视图中）。但是我输入的编辑文本我无法检索它我发布了我的 xml 和 java 代码：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"  
>

    <EditText
        android:id="@+id/edittext1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"    
        android:hint="@string/Hint1"
        android:inputType="number" />

    <Button
        android:id="@+id/Convert"
        android:text="@string/Convert"
        android:layout_width="250dp"
        android:layout_height="wrap_content"        
        android:layout_gravity="center"
        android:gravity="center"
        android:textSize="30sp"
    />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/Result" 
       android:textSize="30sp"
     />

</LinearLayout> 
```

*** *Java代码：* ***

```
public class MainActivity extends Activity
{   
    TextView textView1 = null;
    EditText edittext1 = null;
    int no2 = 0;
    int centimeters1 = 0;
    String text1 ="ssssss";
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 

        edittext1 = (EditText) findViewById(R.id.edittext1);
        textView1 = (TextView) findViewById(R.id.textView1);    
        text1 = edittext1.getEditableText().toString().trim();
        System.out.print(text1);
        System.out.print(".................................................");

        centimeters1= no2* 24 ;
        Button button1 = (Button) findViewById(R.id.Convert);

        button1.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                textView1.setText("Your Total is:" + text1);
            }

        });

    } 
```

我尝试使用“system.out.println”，以便我可以跟踪值，但它没有工作（在模拟器中，当我在输入值后运行它时，它只显示“你的总数是：”而没有别的）。提前致谢，请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T13:25:17.263

您的代码是正确的，但被取代了。

你什么也得不到，`EditText`因为你在它创建之后就在检查它的内容。调用该函数是`onCreate`有原因的:)

移动这个：

```
text1 = edittext1.getEditableText().toString().trim(); 
```

这里：

```
button1.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        text1 = edittext1.getEditableText().toString().trim();
        textView1.setText("Your Total is:" + text1);
    }
}); 
```

这样，您在按下按钮的那一刻拿起文本，而不是在创建时，当它为空时。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T13:24:57.807

`text1 = edittext1.getEditableText().toString().trim();`改为使用您的 onClick() 方法。

`text1`目前，您在加载布局后立即分配。此时，您的 EditText 为空，因此它也获得了一个空值。将它放在 onClick() 方法中将确保它仅在您单击按钮时才获取值。

```
 button1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            text1 = edittext1.getEditableText().toString().trim();
            textView1.setText("Your Total is:" + text1);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T13:32:44.843

```
 text1 = edittext1.getEditableText().toString().trim(); 
```

在 OnClickListener 中编写这些代码，你就明白了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-02T13:38:27.093

在 setContentView() 之后，您将获得 edittext。移动你的 text1 = edittext1.getEditableText().toString().trim(); 到按钮的 onclick 方法。因此，当用户键入editext 单击按钮时，值将设置为textview。

```
button1.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        text1 = edittext1.getEditableText().toString().trim();
        textView1.setText("Your Total is:" + text1);
    }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-02T13:25:21.170

只需更改此行：

```
textView1.setText("Your Total is:" + edittext1.getText().toString()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T14:01:51.507

试试这个并编辑文本值总是在字符串中。如果你想将该编辑文本值分配给整数意味着你有隐蔽的字符串到整数（只是给你的一个信息）..这里是你问题的答案..

```
 String str = edittext.gettext.tostring;
Textview1.settext(''your total is''+str); 
```

# asp.net-mvc - 如何在单击按钮时重新绑定 igGrid igniteUI 控件中的数据？

> ID：15765246
> 
> 赞同：3
> 
> 时间：2013-04-02T13:21:59.713
> 
> 标签：asp.net-mvc, infragistics, ignite-ui, iggrid

我在我的 ASP.NET MVC3 应用程序中使用 Infragistics(Ignite UI) 控件。我有绑定到“客户”数据的网格。工作正常。现在我有按钮了。单击时，我进行了 ajax 调用。在控制器中，我编写了仅选择“客户”数据的一部分的查询。我使用 json 返回数据。我尝试使用以下方法重新绑定它：

```
$("#CustomerGrid").igGrid("dataSourceObject", returnData); 
```

但网格继续显示旧数据。它不刷新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T09:12:10.600

像这样调用数据绑定方法：

```
$("#CustomerGrid").igGrid("dataSourceObject", returnData);
$("#CustomerGrid").igGrid("dataBind"); 
```

甚至像这样：

```
$("#CustomerGrid").igGrid("dataSourceObject", returnData).igGrid("dataBind"); 
```

只是一般性说明 - 更改数据源可能会产生额外的开销，并且通常不是理想的解决方案。如果我理解正确，您是用原始收藏的一部分替换它吗？如果集合很大和/或您需要重置回原始状态 - 也许考虑简单地将 id-s 返回到 ajax 调用并使用[过滤](http://www.infragistics.com/products/jquery/sample/grid/filtering-api "过滤 API 示例") [功能](http://help.infragistics.com/NetAdvantage/jQuery/latest/CLR4.0?page=igGrid_Filtering.html "igGrid 过滤文档")？

# java - sugarcrm editview coding help for newbi

> ID：15765251
> 
> 赞同：0
> 
> 时间：2013-04-02T13:22:07.187
> 
> 标签：java, php, html, sugarcrm

I have an older version of sugarcrm 4.5 running.

Dont brake that aint broken.

I have a script i wrote that adds 30 days from current date to expected close date when creating a new opportunity, but the problem is everytime you edit the opportunity it adds 30 days, and not just when its is new. How do i tel Sugar to only look for new. this is in editview.php not a logic hook as i want to display the date in the field when creating.

Heres my code

```
var currentTime = new Date();
document.getElementsByName('date_closed')[0].value = (year = currentTime.getFullYear())+'-'+(month = currentTime.getMonth() + 2)+'-'+(day = currentTime.getDate()); 
```

regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:40:49.373

这应该通过 before save 逻辑钩子来完成 - 您可以测试记录是否在钩子中有 id。如果它没有 id，那么你可以假设它是一个新记录。

可以在此处找到有关逻辑挂钩的更多信息（您使用的是非常旧的 SugarCRM 版本，因此并非本文档中的所有内容都适用）

[http://developers.sugarcrm.com/docs/OS/5.2/-docs-Developer_Guides-Developer_Guide_5.2-DevGuide%205.2.1.47.html](http://developers.sugarcrm.com/docs/OS/5.2/-docs-Developer_Guides-Developer_Guide_5.2-DevGuide%205.2.1.47.html)

# jquery - jquery change div content on time interval

> ID：15765253
> 
> 赞同：0
> 
> 时间：2013-04-02T13:22:12.953
> 
> 标签：jquery, setinterval, timing

Have a look at this pic: ![enter image description here](https://i.stack.imgur.com/U6osF.jpg) You can see a Quote block under the image slider (it's nivo slider if it's useful). I have to change the sentence in the quote block every time the image changes. I thoungh that was impossible, but just thinking a bit pheraphs I can set an interval with setInterval() to the quote block and set the time in a way that fit the slider time.

I don't really know how to do it I think I have to set an array of sentence that are display in html at a specific time... Oh and I need a fade effect but I don't think it is a problem...

Thanks a lot in advace

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:26:01.673

我认为您可以使用 Nivo Slider 的内置字幕功能来实现您的目标。您可以根据需要设置标题元素的样式。

"*要为图像添加标题，您只需向图像添加标题属性。要添加 HTML 标题，只需将标题属性设置为包含标题的元素的 ID（以哈希为前缀）。请注意，包含标题的 HTML 元素必须应用 CSS 类 nivo-html-caption 并且必须在滑块 div 之外。* "

[http://dev7studios.com/nivo-slider/#/documentation](http://dev7studios.com/nivo-slider/#/documentation)

如果不适合，请使用 afterChange 函数更新您的标题元素：

```
$('#slider').nivoSlider({
    afterChange: function() {
        // Do your caption update here.
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:35:14.993

为什么不使用[Cycle 插件](http://malsup.com/jquery/cycle/)，听起来就像您正在寻找的那样。插件提供了一种称为循环的方法，该方法在容器元素上调用。容器的每个子元素都成为一个“幻灯片”。选项控制幻灯片转换的方式和时间。

这是一个示例[演示](http://malsup.com/jquery/cycle/basic.html)

```
$(document).ready(function() {
    $('.slideshow').cycle({
        fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
}); 
```

# jquery - 组合 $.css() 调用的性能改进？

> ID：15765256
> 
> 赞同：3
> 
> 时间：2013-04-02T13:22:21.590
> 
> 标签：jquery, performance, optimization

对于我正在维护的 jQuery 应用程序，我最近所做的一项更改涉及采用如下代码：

```
$someElement.click(function (e) {
  e.preventDefault();

  $someOverlay.css('left', e.pageX);
  $someOverlay.css('top', e.pageY);
  $someOverlay.fadeIn();
}); 
```

并将其修改为：

```
$someElement.click(function (e) {
  e.preventDefault();

  $someOverlay.css({
    'left': e.pageX,
    'top': e.pageY
  });

  $someOverlay.fadeIn();
}); 
```

在发现可以简单地将对象传递给`$.css()`方法时，我进行了更改。当然，按照我的习惯，我必须考虑这样做的性能影响。在我看来，调用`$.css()`一次会比调用两次更有效`$.css()`……但是，这也是 JavaScript，这是一种我不像 C# 那样精通的语言。

那么，**问题：**上面的哪个代码是将一些 CSS 应用于元素的更高效的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:24:29.413

第一个答案：几乎可以肯定没关系。

第二个答案：如果您浏览 jQuery`css`方法（这绝非易事！），您会发现使用组合形式（传入规范对象）可能更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:27:29.717

[第二个变体在这里](http://josefaeti.com/articles/2011/July/jquery-best-practices-for-better-performance-and-speed.html#object-literals)被描述为很好的部分，所以我认为性能会更好。

```
// passing object literals as parameters is good practice

var $foo = $( '#foo' );

$foo.css({
  'color': 'red',
  'width': '200px',
  'height': '200px'
}); 
```

# php - 为什么多重排序仅在数组的第一个深度有效？

> ID：15765259
> 
> 赞同：1
> 
> 时间：2013-04-02T13:22:29.690
> 
> 标签：php

我以为函数[array_multisort](http://php.net/manual/en/function.array-multisort.php)可以对多维数组进行排序，但是这段代码不起作用。

代码：

```
$values = array(0, 2, 1, array(0, 2, 1));
array_multisort($values, SORT_ASC);
var_dump($values); 
```

返回：

```
array(4) [
   0 => 0
   1 => 1
   2 => 2
   3 => array(3) [
      0 => 0
      1 => 2 //should be 1
      2 => 1 //should be 2
   ]
] 
```

为什么数组中的数组没有排序？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:32:55.073

你可以试试

```
sort_recursive($values);
var_dump($values); 
```

输出

```
array (size=4)
  0 => int 0
  1 => int 1
  2 => int 2
  3 => 
    array (size=3)
      0 => int 0
      1 => int 1
      2 => int 2 
```

使用的功能

```
function sort_recursive(&$array) {
    sort($array);
    foreach ( $array as &$v ) {
        is_array($v) and sort_recursive($v);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:27:44.537

是因为它`array()`是多维形式

试试这个链接看看如何排序多维数组[点击这里](https://stackoverflow.com/questions/2699086/sort-multidimensional-array-by-value-2)

# dynamics-crm-2011 - 如何从另一个查找字段向字段添加值？

> ID：15765264
> 
> 赞同：0
> 
> 时间：2013-04-02T13:22:38.360
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

我有一个自定义实体`Partnership`，其中有一个查找字段联系人。现在我想在创建时添加`partnership`from `contact`fullname的 name 字段值`Partnership`。

是否可以借助预先存在的配置设置（没有插件或网络资源）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:44:42.700

在不使用插件或网络资源的情况下，您有几个选择。

1-您可以通过转到实体（联系人）-> 关系-> 映射-> 并在那里添加新映射来配置 2 个实体之间的映射。但是，要使其正常工作，您需要从联系人的子网格创建子记录，并且如果联系人发生更改，它不会更新值。因此，它可能是也可能不是您的理想解决方案。

![在此处输入图像描述](https://i.stack.imgur.com/LEf3Q.png)

2- 您可以创建一个工作流规则，该规则在创建和/或更新合作伙伴记录时运行，将值从父联系人提取到合作伙伴记录。这样做的缺点是工作流是异步的，因此您将在几秒钟内看不到更新并刷新合作伙伴记录。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:36:51.160

如果您希望能够单击 CRM 功能区中的“新伙伴关系”按钮，然后选择一个联系人，并使用该联系人的姓名来填充表单上的另一个字段，则必须使用 JavaScript。没有可配置的方法。

如果您希望在将值保存到 CRM 数据库之前对其进行填充，您可以使用 JavaScript 或自定义插件。如果您希望在创建记录后更新值，您可以使用工作流。

您必须使用这三种方法之一来填充该字段。不过，我真正的问题是，您为什么首先要费心填充该字段？您可以将完整的联系人姓名添加到任何视图中，因此我看不出包含它的真正重要理由。

# user-interface - 如何使用 P4V 在 Perforce 中查找文件？

> ID：15765267
> 
> 赞同：8
> 
> 时间：2013-04-02T13:22:41.667
> 
> 标签：user-interface, version-control, perforce

我在巨大的 perforce 仓库中有一个文件，该文件从“Web”开始，以“.pdf”结尾，它可能放在 //depot/main/ 下。如何使用 P4V 在 Depot 中找到此文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T13:39:42.410

使用命令行可能更容易找到：

```
p4 files //depot/main/...Web*.pdf 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T13:47:35.990

在标题为“Depot”的选项卡中的 P4V 左侧窗格中，您右键单击一个 depot 并选择“Find file ...”。在打开的对话框中，您输入要在“名称包含：”字段中搜索文件和“.pdf”的库树。这应该列出指定树中的所有“.pdf”文件。

# xpages - 使用 XPage 在新选项卡中打开链接时运气不佳

> ID：15765278
> 
> 赞同：2
> 
> 时间：2013-04-02T13:23:07.303
> 
> 标签：xpages, xpages-ssjs

我正在处理应用程序，当我想在新选项卡或窗口上打开链接时遇到了问题。我正在使用 Lotus Notes Designer Release 8.5.2FP1。我附上了我的一段代码。

```
<xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action><![CDATA[#{javascript:try{
var doc = database.getProfileDocument("frmConfiguration","");
var url = doc.getItemValueString("HeaderLink1URL");
view.postScript("var tempwindow =window.open('"  +url+"','_blank');tempwindow.focus();");
}catch(e){
}}]]></xp:this.action> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:41:20.490

根据您[在评论中更新的代码，](https://stackoverflow.com/questions/15765278/no-luck-while-opening-a-link-in-new-tab-using-xpages#comment22410355_15765278)您可以简单地添加`target="_blank"`而不是使用`onClick`事件，而是使用`value`指向要打开的 URL 的属性。所以你的代码会是这样的：

```
<xp:link escape="false" id="link1" target="_blank">
    <xp:this.text>some code</xp:this.text>
    <xp:this.value><![CDATA[#{javascript:var doc = database.getProfileDocument("frmConfiguration","");
var href = doc.getItemValueString("HeaderLink1URL");
return href;}]]></xp:this.value>
</xp:link> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:30:05.850

最简单的方法是：

```
<xp:text escape="false" id="newTab"><xp:this.value><![CDATA[#{javascript:return "<a href=\"http://www.google.com/\" target=\"_blank\">Google</a>";}]]></xp:this.value></xp:text> 
```

这将在附加选项卡中打开 google。

**更新：**

如果你想使用 xp:link 你可以尝试：

```
<xp:link escape="false" id="newTab" text="test">
        <xp:this.onclick><![CDATA[var ret = window.open("http://www.google.com",'_blank');
]]></xp:this.onclick>
    </xp:link> 
```

如果您想在单独的窗口或选项卡中打开链接，我建议不要使用 aktion，请使用选项选项卡中的 onclick 客户端事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:03:01.947

这是一些在客户端和服务器端打开 URL 的示例代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

    <xp:button value="Client Side Open Button." id="ClientSideButton">
        <xp:eventHandler event="onclick" submit="false">
            <xp:this.script><![CDATA[var href = "http://www.ibm.com";
var tempwindow = window.open(href,'_blank');
tempwindow.focus();
]]></xp:this.script>
        </xp:eventHandler>
    </xp:button>
    <xp:br></xp:br>
    <xp:br></xp:br>
    <xp:button id="serverSideButton" value="Server Side Open Button ">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete">
            <xp:this.action><![CDATA[#{javascript:var href = "http://www.ibm.com";
view.postScript("var tempwindow = window.open('" + href + "','_blank'); tempwindow.focus();");

}]]></xp:this.action>
        </xp:eventHandler>
    </xp:button>
</xp:view> 
```

如果此代码无法按预期工作，则需要检查两件事。

1.  检查 url 变量是否设置正确。

2.  确保您使用的是最新版本。window.open() 直到 8.5.1FP2 才按预期工作。

# stored-procedures - 以下查询有什么问题？

> ID：15765282
> 
> 赞同：0
> 
> 时间：2013-04-02T13:23:17.190
> 
> 标签：stored-procedures, if-statement, sql-server-2008-r2

我正在尝试使用存储过程根据一些字符串（即 nvarchar 参数）从数据库中获取数据。

我正在尝试以下查询：

```
IF (@Ticket_Status IS NOT NULL AND @Ticket_Status = 'Open')
    Begin
         Select * From Tickets
         Where Ticket_Status = 'Open'
    End
else
    Begin
         Select * From Tickets
         Where Ticket_Status = 'Closed'
    End 
```

但它没有给我任何结果。

如果我尝试简单的查询，例如：

```
Select * From Tickets
Where Ticket_Status = 'Open' 
```

它给了我适当的结果。我做错了什么？这是在 SQL 存储过程中使用 If Else 的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:01:20.863

不知道为什么需要查询的两个副本和一个大`IF`条件。`NOT NULL` *也*没有理由检查它是否等于某物。如果后者为真，则前者也必须为真。

```
Select <cols> 
From dbo.Tickets
Where Ticket_Status = COALESCE(@Ticket_Status, N'Closed'); 
```

# c - %0.2lf 和 %.2lf 作为 printf 占位符有什么区别？

> ID：15765289
> 
> 赞同：11
> 
> 时间：2013-04-02T13:23:35.390
> 
> 标签：c, format, width, printf

我知道`0`在占位符的宽度之前放置任意数量的 's 会实现零填充。例如，`printf("%02d", 6);`打印`06`.

但是`0`在占位符的精度之前放置一个单曲有什么作用呢？例如，对于`printf("%0.2lf", 0.123);`和`printf("%.2lf", 0.123);`，输出都是`0.12`。

如果它什么都不做，是否有首选格式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T13:25:14.590

它们是“等价的”。如果您要使用“%07.2”，那么它会有所不同，方法是在前面添加额外的零。

编辑：最初有“％04.2”，这当然没有任何区别，因为带有两位小数的浮点数总是4宽。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T13:29:17.810

`%3.2f //(print as a floating point at least 3 wide and a precision of 2)`

`%0.2lf //(print as a floating point at least 0 wide and a precision of 2)`

`%.2lf //(print as a floating point at least 0(default) wide and a precision of 2)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T14:07:02.717

这些示例应显示差异：

`"%0.2lf", 0.123`-> `0.12`（零填充最小宽度为 0，小数点后 2 位）。

`"%6.2lf", 0.123`-> `__0.12`（空格填充最小宽度为 6，小数点后 2 位）。

`"%06.2lf", 0.123`-> `000.12`（零填充最小宽度为 6，小数点后 2 位）。

`"%0.6lf", 0.123`-> `0.123000`（最小宽度为 0，小数点后 6 位）。

第一个零指定零填充，然后是最小宽度，默认值为 0。因此它本身实际上被忽略（因为您不能填充 0 宽度）。

* * *

顺便说一句，正确的形式是，而`%f`不是`%lf`。`printf`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T13:37:46.027

> 块引用

基本上，当我们`% w.p f`用于输出时，`w`指的是用于显示值的最小位置数，`p`指的是小数点后的位数。 `%3.2f`小数点后有 3 个宽和 2 个数字的浮点数

`%0.2f`浮点至少 0 宽和小数点后 2 个数字

`%.2f`浮点至少 0（默认）宽和 2 精度）

但是不要误解 0 宽度，如果你使用`%0.2f`它可以自动调整它的最小宽度。

# android - 如何在 GridView 中添加“下一个”功能？

> ID：15765296
> 
> 赞同：0
> 
> 时间：2013-04-02T13:23:49.987
> 
> 标签：android, pagination, android-gridview

我制作了一个gridview，我试图在该网格中添加下一个功能。当有人单击“下一步”时，网格会加载新的一堆图像。

我制定了一个逻辑，不知何故它正在工作，但它并不稳定。应用程序有时会停止，有时单击“下一步”会跳过下一页（假设当前我在第 0 页，当我单击“下一个”时，网格会刷新并且显示第 2 页而不是第 1 页）

我正在做的是我做了一个异步任务，它将 http 请求发送到 php 服务器以获取新的图像 url。然后我刷新 gridview 并显示来自新图像 url 的新图像。

**代码**

```
public class UserPage extends Activity {

ImageAdapter ia = new ImageAdapter(this);
GetResponse task = new GetResponse(0);
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.userpage);

    final GridView gridview = (GridView) findViewById(R.id.gridview);

    gridview.setAdapter(ia);
    gridview.setStretchMode(GridView.STRETCH_COLUMN_WIDTH);

    Button nxt = (Button) findViewById(R.id.nextbuttongrid);
    nxt.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // next page
            int i = Integer.parseInt(GetResponse.counter);
            i=i+1;
            GetResponse.counter = Integer.toString(i);
            String x = GetResponse.response;
            task.execute();
        //this is done so that the thread sleeps until the response variable value is updated  
            while(x.equals(GetResponse.response)==true){
                try {
                    Thread.sleep(50);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    System.out.println("Here in sleep..incre");
                } }
            change(gridview);
        }
    });

    Button pre = (Button) findViewById(R.id.previousbuttongrid);
    pre.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // previous page
            int i = Integer.parseInt(GetResponse.counter);
            i=i-1;
            GetResponse.counter = Integer.toString(i);
            String x = GetResponse.response;
            task.execute();
           //this is done so that the thread sleeps until the response variable value is updated  
            while(x.equals(GetResponse.response)==true){
            try {
                Thread.sleep(50);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                System.out.println("Here in sleep.. decre");
            } }
            change(gridview);

        }
    });

    /**
     * On Click event for Single Gridview Item
     * */
     gridview.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            // Sending image id to FullImage.java
            Intent i = new Intent(getApplicationContext(), FullImage.class);
            i.putExtra("id", position);
            startActivity(i);
        }
    });
}

void change(GridView gridview) {
    ia = new ImageAdapter(this);
    gridview.invalidateViews();
    gridview.setAdapter(ia);
}
} 
```

```
public class GetResponse extends AsyncTask<Void, Void, Void> {

  public static String counter = "0";

  HttpPost httppost;
  StringBuffer buffer;
  HttpResponse response1;
  HttpClient httpclient;
  List<NameValuePair> nameValuePairs;

  public static String response;

    @Override
    protected Void doInBackground(Void... params) {

try {
    Log.d("response's Value == >", "Response previous " + response);
    httpclient=new DefaultHttpClient();
    httppost= new HttpPost(ServerAdressHere); 
    //add your data
    nameValuePairs = new ArrayList<NameValuePair>(3);

    nameValuePairs.add(new BasicNameValuePair("username",AndroidPHPConnectionDemo.userName)); 
    nameValuePairs.add(new BasicNameValuePair("password",AndroidPHPConnectionDemo.passWord));
    nameValuePairs.add(new BasicNameValuePair("count",counter));
    Log.d("Counter's Value == >", "Counter " + counter);
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    //Execute HTTP Post Request
    response1=httpclient.execute(httppost);
    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    response = httpclient.execute(httppost, responseHandler);
    Log.d("response's Value == >", "Response after " + response);
}
    catch(Exception e){
        System.out.println("Exception Here"+e);
    }
  return null;

    }
   } 
```

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;
private TextView txtUrl;
private String response;
public ImageView imageView;
public static String[] mThumbIds;

  public ImageAdapter(Context c) {
    mContext = c;
    this.response = GetResponse.response.trim();
    mThumbIds = response.split(",");
    }

private final Downloader imageDownloader = new Downloader(mContext);

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return mThumbIds[position];
}

public long getItemId(int position) {
    return mThumbIds[position].hashCode();
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {

    if(convertView==null) {
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(LayoutParams.MATCH_PARENT, 195));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(10, 10, 10, 10);
    }

    else {
         imageView = (ImageView) convertView;
         }

    imageDownloader.DisplayImage(mThumbIds[position], (ImageView) imageView);

    return imageView;
}

public Downloader getImageDownloader() {
    return imageDownloader;
}
} 
```

“计数器”变量（静态和字符串类型）在请求中发送，它将下一个 gridview 的页码告诉 php 服务器。因此，服务器将发送与该页码相关的图像 url。

我面临的问题是网格在异步任务类更新“响应”变量之前被刷新。所以这就是为什么我使用 System.sleep() 来获得两行代码的时间间隔 b/w 执行。

“响应”变量（静态和整数类型）包含图像 url。

请帮忙 ！如果需要更多细节，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:18:48.413

首先，onClick 方法中的循环中的 Thread.sleep 不是这样做的正确方法。asynctask 的重点是避免锁定主线程，而 Thread.sleep 就是这样做的。

请改用您的 asynctask 的 onPostExecute 。

但是，到目前为止，这显然有效（您的服务器和连接足够快，否则您会遇到 ANR），即使您的 ui 可能会冻结几秒钟。

在那之后，还有图像下载的问题。调用 setAdapter(new Adapter...) 似乎是一个足够好的方法。

一步一步调试你走了多远？

*   您是否收到在线的图像 ID 列表`Log.d("response's Value == >", "Response after " + response);`？
*   您是否到达 getView，如果是，您是否使用正确的 url/id/string 到达那里，无论 mThumbIds[position] 应该是什么？
*   如果是这样，什么是下载器，它是如何工作的？

出于好奇，你为什么要执行两次请求？( `response1=httpclient.execute(httppost);`)

## 编辑

我真的不敢相信你没有，尽管提到你的应用程序实际上正在崩溃很有趣，这与“网格没有刷新”完全不同。

你必须

A/ 阅读你的堆栈跟踪。

B/如果不清楚，谷歌它。

C/我不知道还能添加什么`(a task can be executed only once)`

# java - Web 服务响应中的 QR 码

> ID：15765301
> 
> 赞同：1
> 
> 时间：2013-04-02T13:24:03.283
> 
> 标签：java, web-services, qr-code, zxing

我必须实现一个返回文本二维码（授权码）的 Java SOAP Web 服务。返回此 QRCode 的最佳方式是什么？png的base64编码，ByteArrayOutputStream还是什么？

通常，客户端将使用此 Web 服务将 QRCode 嵌入网页中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:35:08.667

不要将其作为 base64 编码字符串发回。这是浪费空间，您无法流式传输图像。只需将文件的字节作为流返回并将其提供给客户端。`Content-type` `Content-length`在响应标头中返回与文件关联的任何元数据（例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:37:31.713

您可以通过让您的 webapp 响应（假设它是一个 servlet）来返回图像的数据：

```
byte[] image = getQRCodeAsByteArray();
response.setContentType('image/png')
response.setContentLength(image.length)
response.getOutputStream().write(image) 
```

如果您随后将您的网络浏览器指向该特定的 webapp URL，您将看到一个图像

# assembly - 从文件中读取并在 Assembly 中输出其内容

> ID：15765302
> 
> 赞同：1
> 
> 时间：2013-04-02T13:24:07.053
> 
> 标签：assembly, file-io, x86, x86-16, tasm

我这里有一个代码片段，它使用视频模式打印欢迎消息（菜单）`10h`。按下时`4`，它应该从文件中读取并在屏幕上显示其内容。但是，它显示垃圾值，我必须打开 DOSBox 并再次安装。

```
.model small 
.stack 1024 
.data 

MENU        DB 10,""
            DB 10,"          Welcome       "    ;24
            DB 10,""
            DB 10,"1 Novice"                ;3, 9
            DB 10,"2 Boss"                  ;3, 6
            DB 10,"3 Superb"                ;3, 11
            DB 10,"4 Scores"    
            DB 10,""
            DB 10,"Choice: ","$"                ;8

ROW1 DB 5   
ROW2 DB 10
COL DB 25       

Choice DB ?

; OTHER DECLARATIONS FOR COLORING I WON'T SHOW FOR SIMPLICITY

FileName DB "file.txt",0,8 ; name of file to open 
Handle   DW ?   ; to store file handle 

BufferSeg   dw  0

ErrMsgOpen  db  "Error opening `"
FileLength dw 0

nextLine    db  13,10

.code 

DisplayFile PROC NEAR

    ;escape to video mode
    mov ax,0A000h
    mov es,ax
    xor di,di
    xor ax,ax
    mov cx,32000d
    cld
    rep stosw

    mov     ax,cs
    mov     ds,ax
    mov     bx,ss
    add     bx,200h/10h     ;get past the end of the file
    mov     [BufferSeg],bx  ;store the buffer segment

    ;call   WriteFile 
    push    ds

    mov     ax,cs
    mov     ds,ax
    mov     ax,3d00h    ;open file (ah=3dh)
    mov     dx,offset FileName
    int     21h
    mov     bx,ax       ;move the file handle into bx

    mov     ds,[BufferSeg]
    mov     dx,0            ;load to [BufferSeg]:0000
    mov     ah,3fh
    mov     cx,0FFFFh       ;try to read an entire segments worth
    int     21h

    mov     [cs:FileLength],ax

    mov     ah,3eh
    int     21h             ;close the file

    cld
    mov     si,0
    mov     cx,[cs:FileLength]

    PrintLoop:
        mov     ah,2
        lodsb
        mov     dl,al
        int     21h         ;print a character

        dec     cx
        jne     PrintLoop

        pop     ds
        ret

    OpenError:
        mov     ah,9
        mov     dx,offset ErrMsgOpen
        int     21h

        pop     ds
        ret
DisplayFile ENDP 

.STARTUP
    mov     ax, @data 
    mov     ds, ax 

    @welcome:
        mov ax, 3
        int 10h

        MOV AX, 3       ; 80x25 color
        INT 10H         ; video BIOS call   
        MOV AH, 2       ; set cursor position
        MOV BH, 0       ; display page number
        MOV DH, ROW1        ; row number
        MOV DL, COL     ; column number
        INT 10H         ; video BIOS call
        LEA BP, ATT_BRICK       ; point to first attribute array 
        CALL FAR PTR STICK   ; display first line of video text

        ;scanf user's choice
        mov ah, 01h
        int 21h
        sub al, '0'
        mov Choice, al

        ; OTHER CODES

        cmp al, 4
        je @scores

    @score:
        call    DisplayFile

    @quit: 
        mov     ax, 4c00h       ;call dos to exit 
        int     21h 

.EXIT
END 
```

基本上，这是一个将结果保存在文件中的游戏。我可以正确写入文件，但是当我尝试从中读取时，它不会输出到屏幕。

**编辑**

`DisplayScore proc near`这与在单独的 .ASM 文件中所做的相同。它只是为了测试从文件中读取是否有效并且确实有效。

```
 .MODEL SMALL
    .STACK 200h
    .CODE
    Ideal

;===- Data -===

BufferSeg   dw  0

ErrMsgOpen  db  "Error opening `"
FileName    db  "file.txt",0,8,"'$"     ;8 is a delete character

                                        ;0 is required for filename 
                                        ;(displays a space)
FileLength dw 0

buffer db "hehe$"
;===- Subroutines -===

PROC DisplayFile NEAR
    push    ds

    mov     ax,cs
    mov     ds,ax
    mov     ax,3d00h    ;open file (ah=3dh)
    mov     dx,offset FileName
    int     21h
    jc      OpenError
    mov     bx,ax       ;move the file handle into bx

    mov     ds,[BufferSeg]
    mov     dx,0            ;load to [BufferSeg]:0000
    mov     ah,3fh
    mov     cx,0FFFFh       ;try to read an entire segments worth
    int     21h

    mov     [cs:FileLength],ax

    mov     ah,3eh
    int     21h             ;close the file

    cld
    mov     si,0
    mov     cx,[cs:FileLength]
PrintLoop:
    mov     ah,2
    lodsb
    mov     dl,al
    int     21h         ;print a character

    dec     cx
    jne     PrintLoop

    pop     ds
    ret

OpenError:
    mov     ah,9
    mov     dx,offset ErrMsgOpen
    int     21h

    pop     ds
    ret
ENDP DisplayFile

;===- Main Program -===

START:
    mov     ax,cs
    mov     ds,ax
    mov     bx,ss
    add     bx,200h/10h     ;get past the end of the file
    mov     [BufferSeg],bx  ;store the buffer segment

    ;call   WriteFile
    call    DisplayFile

    mov     ax,4c00h
    int     21h
END START 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T05:46:23.390

如果我们启动我们的应用程序，那么我们就变成了 DOS 的所有空闲内存，所以我们不知道我们实际可以使用多少内存，以及为 DOS 和 TSR 驱动程序保存了哪些段地址。因此，我们必须将目前还不需要的所有 ram 还给 DOS，然后才能从 DOS 请求一个新的指定 ram .

```
 call SETFREE               ; calculate the amoung of ram that we need
                                     ; for running our application and giviving
                                     ; back the rest of ram to DOS

          mov      bx, 2000h         ; request/reserv 128 KB ram from DOS
          call GETSPACE
          jc  NOSPACE                ; Error!
          mov      [NEWSEG], ax      ; save segment address

;------------------------------------
SETFREE:  mov      bx, ss            ; First we subtract both segmentaddresses
          mov      ax, es            ; for to become the amoung of paragraphs
          sub      bx, ax            ; from the PSP to the beginning of the stack.
          mov      ax, sp            ; Because our stackpointer beginn at the end
          add      ax, 0Fh           ; of the stacksegment, we can use the stackpointer
          shr      ax, 4             ; for the length of the stack.
          add      bx, ax
          mov      ah, 4Ah           ; Set new size
          int    21h
          ret
;------------------------------------
GETSPACE: mov      ah, 48h           ; BX = number/16
          int    21h
          ret 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-22T19:59:23.673

> ...在一个单独的 asm 文件中（只是为了测试从文件中读取是否有效）。

由于以下两个原因，从单独的程序操作时， *DisplayFile proc 工作正常：*

*   所有数据项都放在 de`.CODE`部分中，并且`DS`使用下面的代码完成了段寄存器的设置：

    ```
    mov     ax,cs
    mov     ds,ax 
    ```

*   *BufferSeg*的计算是正确的，因为它与`.STACK 200h`设置匹配：

    ```
    mov     bx,ss
    add     bx,200h/10h     ;get past the end of the file
    mov     [BufferSeg],bx 
    ```

## 那么为什么它在更大的程序中失败了呢？

### 错误

*   该程序使用一个单独的`.DATA`部分，您的`.STARTUP`代码`DS`使用`mov ax, @data` `mov ds, ax`. *DisplayFile* proc中仍然存在的`CS`into复制，不能再工作了！`DS`
**   `.STACK 1024`此外，程序现在使用了更大的堆栈*（**

 *### 建议

*   在`.STARTUP`代码中，您设置了 80x25 16 色文本视频模式（两次！），但在*DisplayFile* proc 中有一系列指令，这些指令通常用于清除 320x200 256 色图形屏幕。这充其量是令人困惑的。但是因为你说这是游戏，所以视频模式13h是合理的。尽管如此，我建议将此清算委托给单独的 proc。
*   此外，我认为没有理由在*Displayfile* proc中计算*BufferSeg*变量。它的值基于堆栈的位置，并且几乎可以肯定在程序执行期间保持不变。
**   将文件长度存储到内存变量中不仅是一种浪费的操作，而且还使`DS`段寄存器的工作变得复杂。*   与其尝试读取“整个段的价值”，不如尝试读取“合理”数量的字节。我敢打赌，分数永远不需要那么多字节……您甚至可以决定使用固定位数，这在游戏中并不少见。*   `.DATA`一旦我们接受分数是有限的资源，我们就可以选择使用在( ) 节中定义的简单通用缓冲区`Buffer db 512 dup (0)`。我们将不再需要应对变化`DS`。*

 *```
ClearScreen PROC NEAR
    push es
    mov  ax, 0A000h
    mov  es, ax
    xor  di, di
    mov  cx, 32000
    xor  ax, ax
    rep stosw
    pop  es
    ret
ClarScreen ENDP

DisplayFile PROC NEAR
    push ds
    call ClearScreen

    mov  ax, 3D00h         ; DOS.OpenFile for reading
    mov  dx, OFFSET FileName
    int  21h               ; -> AX CF
    jc   FileError
    mov  bx, ax            ; Handle

    mov  ds, [BufferSeg]
    xor  dx, dx            ; Load to [BufferSeg]:0000
    mov  cx, 512           ; Try to read a 'reasonable' number of bytes
    mov  ah, 3Fh           ; DOS.ReadFile
    int  21h               ; -> AX CF
    jc   FileError
    mov  cx, ax            ; Bytes read

    mov  ah, 3Eh           ; DOS.CloseFile
    int  21h               ; -> AX CF
    jc   FileError

    jcxz FileWasEmpty
    xor  si, si
  PrintLoop:
    lodsb
    mov  dl, al
    mov  ah, 02h           ; DOS.PrintCharacter
    int  21h      
    dec  cx
    jnz  PrintLoop

  FileWasEmpty
    pop  ds
    ret

  FileError:
    pop  ds                ; Restore DS first!
    mov  dx, OFFSET ErrMsgOpen
    mov  ah, 09h           ; DOS.PrintString
    int  21h
    ret
DisplayFile ENDP 

.STARTUP
    cld
    mov  ax, @data 
    mov  ds, ax 

    mov  ax, ss
    add  ax, 1024/16       ; Available memory (*)
    mov  [BufferSeg], ax

    ...

    call DisplayFile

    ...

    mov  ax, 4C00h         ; DOS.Terminate
    int  21h 
```

(*) [Dirk Wolfgang Glomp 的回答](https://stackoverflow.com/questions/15765302/reading-from-a-file-and-outputting-its-contents-in-assembly/16331139#16331139)显示了这样做的安全方式。**

# scala - 公共超类型绑定失败，类型类解析

> ID：15765305
> 
> 赞同：1
> 
> 时间：2013-04-02T13:24:20.183
> 
> 标签：scala, generics, type-inference, typeclass

当我有这样的通用类时

```
case class C [E] (errors : Seq[E]){
  def merge [E1 <: EX, EX >: E] (errors1 : Seq[E1]) = Seq[EX]() ++ errors ++ errors1
} 
```

一切正常 - 它将错误序列合并为一系列常见超类型。但是，当我将它与类型类模式混合时，它不会正确推断出公共超类型。

我已经根据[这种方法](https://stackoverflow.com/questions/7606587/applying-an-argument-list-to-curried-function-using-foldleft-in-scala)实现了 HList 应用程序，它可以自行工作。现在我想用它来构建每个参数都可能失败的参数列表。最后，我希望能够将此参数列表应用于可能会失败的函数。所以输出错误序列类型应该是列表错误和函数错误的超类型。（下一步将取消函数必须返回 ErrorProne 并通过某些类型类将其展平的限制，但我认为这是一个更简单的情况。）失败的参数列表包装器是这样的。请注意 :: 方法有效。

```
case class SuccessArgList [E, L <: HList[L]] (list : L) extends ArgList[E, L] {

  override def apply[S, E1 <: EX, EX >: E, F](fun : F)(implicit app : HApply[L, F, ErrorProne[E1, S]]) 
  : ErrorProne[EX, S] = app.apply(list, fun)

  override def :: [A, E1 <: EX, EX >: E] (argument : ErrorProne[E1, A]) : ArgList[EX, A :: L] = argument match {
    case Success(a) => SuccessArgList(a :: list)
    case Failure(e) => FailureArgList(e)
  }

} 
```

其中 E 是当前失败参数列表的错误类型，L 是实际参数列表的类型，S 是函数成功值类型，E1 是函数失败值类型，EX 应该是错误的常见超类型，F 是功能。失败列表类似，ErrorProne 容器是这样的（我可能会使用 Either，但这不应该是相关的）

```
sealed trait ErrorProne[+F, +S]{
  def f[To] (implicit flatrener : FlattenErrorProne[ErrorProne[F, S], To]) = flatrener.flatten(this)
}

case class Success [+F, +S] (result : S) extends ErrorProne[F, S]

case class Failure [+F, +S] (errors : Seq[F]) extends ErrorProne[F, S] 
```

当尝试使用参数列表类型参数的 apply 方法时，推断错误确定 E1 到 E，因此找不到应用程序。推理可以修复吗？是否有关于推论所依据的规则的材料？我找不到任何规格。

# qooxdoo - 打破 qx.data.Array forEach 循环？

> ID：15765307
> 
> 赞同：0
> 
> 时间：2013-04-02T13:24:21.307
> 
> 标签：qooxdoo

有没有办法打破 Qooxdoo qx.data.Array forEach 循环？

例如，

```
 myarray.forEach(function(obj){
   if(obj.match(/ra/i)){
       //break out of the loop
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:50:09.957

不，那不可能。如果需要，您可以考虑使用常规 for 循环并在条件上中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-06T21:09:55.250

不确定 2013 年存在的版本，但目前有数组方法**`some`**。如果**`true`**从传入的函数返回布尔值，则循环将终止。

```
myarray.some(function(obj) {
    if(obj.match(/ra/i))
    {
        // do something
        return true;
    }
}, this); 
```

# asp.net - ASP MVC 实体框架代码优先 Mysql UTF 8 数据库

> ID：15765315
> 
> 赞同：1
> 
> 时间：2013-04-02T13:24:52.787
> 
> 标签：asp.net, mysql, asp.net-mvc, entity-framework, web-config

我正在使用 ASP MVC 项目中的 EF Code First 和 MySql 创建一个数据库。问题是我无法将编码设置为 UTF8。

从我读过的内容来看，我必须设置`Charset=utf8;`. 但它不起作用。

```
<add name="ArticleEntities" connectionString="Server=localhost;Port=3306;Database=db; Uid=user; Pwd=pass$;Charset=utf8;" providerName="MySql.Data.MySqlClient" /> 
```

我在这里做错了吗？

# salesforce - 批量加载角色 - 有可能吗？

> ID：15765317
> 
> 赞同：0
> 
> 时间：2013-04-02T13:24:56.990
> 
> 标签：salesforce

是否可以批量加载角色？我们有 100 多个角色需要创建，而通过标准 UI 完成这些角色将非常耗时。我认为可以通过自定义 Apex 或使用 API 来完成，但有没有办法使用 Salesforce 提供的工具来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:34:53.023

您可以使用 Eclipse 或 ant 迁移工具来管理 Roles。您可以通过以下链接找到更多详细信息

[http://www.salesforce.com/us/developer/docs/daas/index_Left.htm#StartTopic=Content/daas_package.htm](http://www.salesforce.com/us/developer/docs/daas/index_Left.htm#StartTopic=Content/daas_package.htm)

[http://www.salesforce.com/us/developer/docs/api_meta/index.htm](http://www.salesforce.com/us/developer/docs/api_meta/index.htm)

```
for Eclipse:
 1\. create a project and connect it to you org
 2\. add needed roles to project 
```

![在此处输入图像描述](https://i.stack.imgur.com/3paOj.png)

# java - java.crypto.Cipher 中的 5-arg update() 方法在解密到同一个缓冲区时会产生垃圾

> ID：15765319
> 
> 赞同：0
> 
> 时间：2013-04-02T13:24:59.623
> 
> 标签：java

我正在尝试使用 5-arg`update`方法`java.crypto.Cipher`来加密/解密一堆以切片形式出现的输入数据。由于要加密的数据位于数组中的特定位置，并且我想用解密形式覆盖加密数据，因此使用 5-arg `update`（定义为`update(src, srcOffset, length, dst, dstOffset)`）的原因。

但是，我遇到的问题是，在使用 AES/CBC/PKCS5PADDING 算法时，解密后输出为 32 字节的乱码。如果我从使用 5-arg 切换`update`到创建用于保存输出的专用数组，然后执行`System.arraycopy`，则输出是正确的。

这是一个简单的测试程序：

```
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.ShortBufferException;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class CryptoTest
{
  private class Slice
  {
    byte[] array;

    int offset;

    int size;
  }

  private Slice[] createSlices(int howMany, int whatSize)
  {
    Slice[] slices = new Slice[howMany];
    for (int i = 0; i < howMany; i++)
    {
        slices[i] = new Slice();
        slices[i].array = new byte[whatSize];
        slices[i].offset = 0;
        slices[i].size = 0;
    }

    return slices;
  }

  public void testWithOffsets() throws InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException, ShortBufferException,
                IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException
  {
    int num = 10;
    int size = 32784;
    Slice[] slices = createSlices(num, size);

    // Create the keys and parameters
    KeyGenerator keyGenerator = KeyGenerator.getInstance("AES");
    SecretKey key = keyGenerator.generateKey();

    SecretKey encryptionKey = new SecretKeySpec(key.getEncoded(), "AES");
    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5PADDING");

    cipher.init(Cipher.ENCRYPT_MODE, encryptionKey);

    // save IV
    byte iv[] = cipher.getIV();

    // setup input data
    for (int i = 0; i < num; i++)
    {
        slices[i].offset = 16;
        slices[i].size = 32768;
    }
    slices[num - 1].size = 5424;

    // calculate a sum of input data, for comparisson later
    Long sum = 0L;
    for (int i = 0; i < num; i++)
        for (int j = slices[i].offset; j < slices[i].offset + slices[i].size; j++)
            sum = sum + slices[i].array[j];

    // encrypt
    int finalSize = 0;
    for (int i = 0; i < num; i++)
    {
        if (i == num - 1)
            finalSize = cipher.doFinal(slices[i].array, slices[i].offset, slices[i].size, slices[i].array, slices[i].offset);
        else
            finalSize = cipher.update(slices[i].array, slices[i].offset, slices[i].size, slices[i].array, slices[i].offset);
        System.err.println("Original size is " + slices[i].size + " final size is " + finalSize);
        slices[i].size = finalSize;
    }

    // decrypt
    SecretKey decryptionKey = new SecretKeySpec(key.getEncoded(), "AES");
    Cipher decipher = Cipher.getInstance("AES/CBC/PKCS5PADDING");

    IvParameterSpec ips = new IvParameterSpec(iv);
    decipher.init(Cipher.DECRYPT_MODE, decryptionKey, ips);

    for (int i = 0; i < num; i++)
    {
    /* ** */
        if (i == num - 1)
            finalSize = decipher.doFinal(slices[i].array, slices[i].offset, slices[i].size, slices[i].array, slices[i].offset);
        else
            finalSize = decipher.update(slices[i].array, slices[i].offset, slices[i].size, slices[i].array, slices[i].offset);
        System.err.println("Original size is " + slices[i].size + " final size is " + finalSize);
        slices[i].size = finalSize;
    }

    // sum of output data, should be the same as the input data
    Long newsum = 0L;
    for (int i = 0; i < num; i++)
        for (int j = slices[i].offset; j < slices[i].offset + slices[i].size; j++)
            newsum = newsum + slices[i].array[j];

    System.err.println("newsum " + newsum + " oldsum " + sum);
    assert newsum == sum;
  }

  public static void main(String[] args) throws Exception
  {
    CryptoTest ct = new CryptoTest();

    ct.testWithOffsets();
    ct.testWithoutOffsets();
  }
} 
```

预期的输出是'newsum 0 oldsum 0'，但我没有得到那个。如果我用以下标记替换循环的主体`**`，我会得到预期的输出：

```
 byte[] output = new byte[slices[i].array.length];

        if (i == num - 1)
            finalSize = decipher.doFinal(slices[i].array, 0, slices[i].size, output);
        else
            finalSize = decipher.update(slices[i].array, 0, slices[i].size, output);
        System.err.println("Original size is " + slices[i].size + " final size is " + finalSize);
        slices[i].size = finalSize;
        System.arraycopy(output, 0, slices[i].array, 0, finalSize); 
```

因此，我的问题是我在这里做错了什么？我希望这两种形式都能正常工作。

# c - 我如何使用 Visual Studio 2010 编写静态 ansi-c 库

> ID：15765321
> 
> 赞同：3
> 
> 时间：2013-04-02T13:25:03.800
> 
> 标签：c, visual-studio-2010, static-libraries

当我在 VS2010 中编写和编译一个 lib 文件时，我遗漏了一些东西。我不知何故没有正确标记它们以供出口。

控制台命令`dumpbin.exe -headers mylib.lib > stackoverflow.txt`生成以下输出。（我删除了空行）

```
 Microsoft (R) COFF/PE Dumper Version 10.00.30319.01 Copyright (C)
 Microsoft Corporation.  All rights reserved.
 Dump of file mylib.lib
 File Type: LIBRARY
 ANON OBJECT HEADER VALUES
                1 version
              14C machine (x86)
         515AC7B8 time date stamp Tue Apr 02 13:57:44 2013
                  ClassID: {0CB3FE38-D9A5-4DAB-AC9B-D6B6222653C2}
             171A size
                0 flags 
```

我创建了一个新的空项目。新项目是一个没有预编译头文件的空静态库项目。我将它命名为 mylib。之后我创建了两个文件。c 文件以 .c 结尾 - 这将其标记为 ansi-c 文件，编译器会将其编译为 ansi-c。

mylib.h

```
#ifndef __STACKOVERFLOW_EXAMPLE_
#define __STACKOVERFLOW_EXAMPLE_

__declspec(dllexport) int test(int magic);

#endif // __STACKOVERFLOW_EXAMPLE_ 
```

mylib.c

```
#include "mylib.h"

int test(int magic){
    return magic * 7;
} 
```

这里可能出了什么问题？为什么我的 lib 文件不包含符号？

* * *

编辑1：

放弃`__declspec(dllexport)`似乎是合理的。

mylib.h

```
#ifndef __STACKOVERFLOW_EXAMPLE_
#define __STACKOVERFLOW_EXAMPLE_

int test(int magic);

#endif // __STACKOVERFLOW_EXAMPLE_ 
```

我现在尝试了这个，但不幸的是它并没有改变结果。lib文件中仍然没有符号。

* * *

编辑2：

谜题的第二部分是我的控制台命令来显示符号。正确的命令是`dumpbin.exe -all mylib.lib > stackoverflow.txt`。之后，公共符号被揭示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:29:58.910

尽量省略`__declspec(dllexport)`，这仅用于`DLLs`。如果你编译你的文件就像

```
#ifndef __STACKOVERFLOW_EXAMPLE_
#define __STACKOVERFLOW_EXAMPLE_

int test(int magic);

#endif // __STACKOVERFLOW_EXAMPLE_ 
```

一切都应该没问题。有关示例，请参见[此处。](http://www.codeproject.com/Articles/85391/Microsoft-Visual-C-Static-and-Dynamic-Libraries#TheStaticLibrary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:28:51.787

甚至不知道你用什么样的选项来编译它，甚至很难给出答案。

但是，无论您尝试什么，VS 对 C 语言的支持真的很差，C 语言的某些功能或版本在 VS 中根本不可用，众所周知，VS 不是 C 语言的好地方。

我建议切换到MinGW并坚持下去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T17:22:55.957

在 2013 年，使用 Visual Studio 2010，我创建了非空静态库，但无论我说 /all、-all 还是 /disasm，dumpbin 和 lib 都不会产生任何输出，其中一个应该说些什么。

文件在 Windows 和 linux 上显示“当前 ar 存档”，$ ar tvf MathFuncsLib.lib rw-rw-rw- 100666/100666 16252 Jan 13 15:29 2014 Debug/MathFuncsLib.obj

是的，这是微软在他们的演练示例中使用的微不足道的数学库 (:-))

# php - smbclient put 找不到我的本地驱动器？

> ID：15765329
> 
> 赞同：0
> 
> 时间：2013-04-02T13:25:24.010
> 
> 标签：php, database-backups, samba, smb

我正在尝试使用 PHP/Samba 将我的数据库备份到另一个硬盘驱动器。但它不起作用，我被卡住了。

```
$dbBackup = 'backup_location.gz.des3';
if (!file_exists($dbBackup)) {
    throw new Exception("Today's backup does not exist!" . $dbBackup);
}
$dbBackup = realpath($dbBackup);

// create path to save on local drive
$savePath = 'folder\subfolder\\' . date('Y') . '\db\bu\\' . date('n') . '\\';
$savePath .= basename($dbBackup);

// build up SMBClient command
$command = 'smbclient';
$command .= ' -N'; // no-pass
$command .= ' -U ' . escapeshellarg($username) . '%' . escapeshellarg($password); // username/password
$command .= ' -O "TCP_NODELAY IPTOS_LOWDELAY SO_KEEPALIVE SO_RCVBUF=8192 SO_SNDBUF=8192"'; // some options
$command .= ' -d 0'; // debug level
$command .= ' ' . escapeshellarg($share); // share name, it is \\x.x.com\x\x\x\x\".
$command .= ' -c ' . escapeshellarg('put ' . $dbBackup . ' ' . $savePath); // command to execute

// execute command on shell
$output = shell_exec($command);

// try to detect error's
if (stripos($output, 'NT_STATUS_') !== false) {
    throw new Exception($output);
} 
```

使用此代码我检索此错误： NT_STATUS_OBJECT_PATH_NOT_FOUND

该错误给出了一个无法找到的路径。我可以访问路径，但文件显然不存在。

我非常确定所有路径都是正确的，用户凭据也是如此。

难道我做错了什么？错字还是什么？我已经坚持了几个星期了。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:08:06.877

问题是我放置文件的驱动器位于不同的工作组中。

我添加`-W MYCORRECTWORKGROUP`到命令中，它又可以工作了！

# blackberry-10 - Blackberry 10 Dev Alpha 更新问题

> ID：15765332
> 
> 赞同：0
> 
> 时间：2013-04-02T13:25:41.497
> 
> 标签：blackberry-10, blackberry-qnx

我在更新我的 Blackberry 10 Dev Aplha B 设备的固件时遇到问题。

操作系统已过期，显示消息如下：“感谢您的参与。Blackberry 10 Dev Alpha 设备计划已结束。有关下一步操作的详细信息，请访问 developer.blackberry.com”

我浏览了官方更新教程[http://developer.blackberry.com/devzone/blackberry10devalpha/devalpha_update.html](http://developer.blackberry.com/devzone/blackberry10devalpha/devalpha_update.html)并且行为是相同的。我尝试了一些我在网上找到的不同教程，其中主要变化是使用不同的 AutoLoader 版本。我也尝试在没有电池的情况下这样做，但仍然没有。一旦 AutoLoader 完成并打开设备，屏幕上不会出现设置向导，而是显示相同的过期消息。

如果有人对可能发生的事情有任何想法，或者我可能遗漏了什么，请发布它，我将不胜感激。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T07:01:47.770

要更新 BB 10 alpha 设备，请按照以下步骤操作：

1.  确保您使用的是 XP SP3 或更高版本的操作系统。
2.  根据您的设备[https://developer.blackberry.com/blackberry10devalphas/update/](https://developer.blackberry.com/blackberry10devalphas/update/)从此处下载自动加载器。
3.  如果自动加载器与您的设备配置不匹配，请从[http://dh.st/AY8](http://d-h.st/AY8)下载。
4.  在您的机器上运行下载的 exe 文件。
5.  当提示连接到 bootroom 时，将您的设备连接到您的计算机，如果它没有启动，请不要打扰。
6.  如果您在设备上设置了密码，请在出现提示时输入密码。
7.  这需要一些时间，让它完成并自动重新启动设备。此步骤可能需要一些时间，因此请耐心等待。
8.  设备重启后完成设置向导。

希望这将成功运行 alpha 设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T15:12:00.483

马里奥，这是一个很常见的问题，请尝试按下电源按钮 10 秒进行硬重置，确保您的设备充电良好。

这是与您的问题相关的链接：： [**设备显示 BlackBerry 10 Dev Alpha 设备程序已结束**](http://supportforums.blackberry.com/t5/Cascades-Development/Device-shows-BlackBerry-10-Dev-Alpha-device-program-has-ended/td-p/1890641)

# c# - C# 根据 TimeZone 调整 DateTime

> ID：15765334
> 
> 赞同：1
> 
> 时间：2013-04-02T13:25:52.010
> 
> 标签：c#, datetime, timezone

您好，我根据用户的时区（例如：开始：08:00 - 结束：14:00）在军事时间将两次存储在数据库中。我还将用户的时区以以下格式存储在数据库中“中部时间（美国和加拿大）（格林威治标准时间 -06:00）”

因此，在上面的示例中，用户的安静时间是中部时间上午 8:00 到下午 2:00。如果用户输入 12:00 - 10:00，我只需在较小的数字上添加一天，即 2013 年 1 月 1 日下午 12:00 - 2013 年 1 月 2 日上午 10:00。我正在使用以下方法查看服务器时间是否在该范围内。我的问题是，我怎样才能通过时区并确保我看到它是否在用户设定的时区范围内？

```
private static bool IsInQuietTime(string startDate, string endDate)
        {
            if (string.IsNullOrWhiteSpace(startDate) || string.IsNullOrWhiteSpace(endDate)) return false;
            var now = DateTime.Now;
            var sDate = DateTime.Parse(now.ToString("M/d/yyyy " + startDate));
            var eDate = DateTime.Parse(now.ToString("M/d/yyyy " + endDate));
            if (eDate <= sDate)
                eDate = eDate.AddDays(1);
            return now.Ticks >= sDate.Ticks && now.Ticks <= eDate.Ticks;
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:18:49.477

以下是您将如何执行此操作：

```
private static bool NowInTimeRange(string startTimeString, string endTimeString, string timeZoneId)
{
    // convert to timespan
    var startTime = TimeSpan.Parse(startTimeString);
    var endTime = TimeSpan.Parse(endTimeString);

    // what time is it in the timezone specified?
    var now = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, timeZoneId);

    // if they are in order, are we between the times specified?
    if (startTime <= endTime)
        return now.TimeOfDay >= startTime && now.TimeOfDay <= endTime;

    // when not in order, just see if either one of them matches.
    return now.TimeOfDay >= startTime || now.TimeOfDay <= endTime;
} 
```

请注意，我不会通过添加一天来操纵时间——我只是依靠比较来按照用户表达的方式工作。

此外，您说您为用户存储的值不是时区 ID。那是从`TimeZoneInfo.DisplayName`. 确保您使用的是从中获得的值`TimeZoneInfo.Id`。

以下是您将如何使用此方法：

```
var quietTime = NowInTimeRange("08:00", "14:00", "Central Standard Time"); 
```

如果时间顺序不正确，它也会同样有效：

```
var quietTime = NowInTimeRange("12:00", "10:00", "Central Standard Time"); 
```

# requirejs - Require.JS shim 配置全局范围？

> ID：15765336
> 
> 赞同：2
> 
> 时间：2013-04-02T13:25:55.503
> 
> 标签：requirejs, shim

我对requireJS有以下设置。

```
requirejs.config({
     paths: {
            'resources' : '/Scripts/resources'
     },
     shim: {
             'resources': {
                           exports: 'LocalizedStrings'
           }
     }
}); 
```

我的 resources.JS 如下所示：

```
LocalizedStrings = {
                    title: "Demo",
                    save: "Save"
} 
```

现在，当我在 main.JS 文件中加载资源作为依赖项时，我可以访问 LocalizedStrings 并且它可以工作。

```
//main.js
define(function(require){
    var LocalizedStrings = require('resources');
    console.log(LocalizedStrings); //works as expected
}); 
```

但是在其他模块上，我真的不需要加载资源作为访问“LocalizedStrings”的依赖项。

```
//othermodule.js
define(function(require){
    console.log(LocalizedStrings); //works as expected even though resources dependency is not loaded
}); 
```

我在这里不明白的是，如果我使用 shim 加载一个 JS 文件并加载一次，它是否会变得全局可用并且我不必在其他模块中再次加载相同的依赖项。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T14:14:25.657

Backbone 和 Underscore 都修改了全局作用域，所以如果浏览器运行了它们的代码，那么全局变量就会存在。

如果在 RequireJS 中作为 shim 加载，或者您直接在其 src 中包含脚本标记，则会发生这种情况。

一旦全局变量存在，它们就存在（除非`delete`我猜得明确）。

[这个 jsfiddle 是一个使用 shims 的简单示例](http://jsfiddle.net/h7Ga6/1/)，并且看到值（对于某些库）被设置为全局变量。

**该示例的目的是表明全局变量的值仅在`require()`调用内部得到保证。**（如果使用 AMD 加载程序，而不是简单地将库导入`script`标签中）。并且全局变量的值将在未来某个不确定的时间存在。

### 源代码

```
require.config({
    shim: {
        underscore: {
            exports: '_'
        },
        backbone: {
            deps: ["underscore", "jquery"],
            exports: "Backbone"
        }
    },
    paths: {
        jquery: "http://code.jquery.com/jquery-1.9.1",
        backbone: "http://backbonejs.org/backbone",
        underscore: "http://underscorejs.org/underscore"
    }
});

function appendVersions(msg, $, _, Backbone) {
    var pre = document.getElementById("content");
    var s = "<h2>" + msg + "</h2>";
    s += "jquery=";
    try { s += $.fn.jquery; } catch (e) { s += e.msg; }
    s += "<br>";
    s += "_=";
    try { s += _.VERSION; } catch (e) {  s += e.msg; }
    s += "<br>";
    s += "Backbone=";
    try { s += Backbone.VERSION; } catch (e) {  s += e.msg; }
    pre.innerHTML += s;
}

appendVersions("Before require (will be undefined)", window["$"], window["_"], window["Backbone"]);

require(["jquery", "underscore", "backbone"], function ($, _, Backbone) {
    appendVersions("Inside Require (should *always* be ok, unless the scripts aren't there)", $, _, Backbone);
});

appendVersions("After require (Probably be undefined, as the require probably won't have loaded the scripts yet)", window["$"], window["_"], window["Backbone"]);

setTimeout(function () {
    appendVersions("After Timeout (should be ok, but depends on how quickly the scripts load. Try changing the timeout duration)", window["$"], window["_"], window["Backbone"]);
}, 2000); 
```

### 样本输出

![在此处输入图像描述](https://i.stack.imgur.com/se94J.png)

# android - 三星 Galaxy S3 和 HTC Sensation 使用了错误的布局文件

> ID：15765343
> 
> 赞同：0
> 
> 时间：2013-04-02T13:26:07.423
> 
> 标签：android, layout, size, screen, dimension

三星 Galaxy S3 和 HTC Sensation 都符合 layout-sw360dp 的类别。

银河 S3 > (720/320) x 160 = 360

感觉 > (540/240) x 160 = 360

但是，当我尝试创建布局文件夹 layout-w540dp-h960dp 时。它不会从中读取，而是从文件夹 layout-sw360dp 中读取。

如何防止这种情况并使每个负载都在其特定布局内？为什么 layout-w540dp-h960dp 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T09:49:30.443

这是因为`layout-sw<N>dp`具有比 更高的优先级`layout-w<N>dp`。

在 Android 中，资源文件夹限定符是根据特定的优先规则选择的。看看[这张表](http://developer.android.com/guide/topics/resources/providing-resources.html#table2)。它指定了可用于提供替代资源的所有可用配置限定符。

根据该表`layout-sw<N>dp`的优先级高于`layout-w<N>dp`。因此，如果出现冲突，Android 总是选择最高的配置限定符。

在这里，您的两个设备都可以从`layout-sw360dp`. 因此，两个设备都使用相同的文件夹来选择资源。

# c++ - DirectX 11 附加缓冲区字节宽度

> ID：15765344
> 
> 赞同：2
> 
> 时间：2013-04-02T13:26:08.233
> 
> 标签：c++, append, directx-11

当您设置一个缓冲区以用作附加缓冲区时，缓冲区描述的 ByteWidth 元素是初始大小（在附加任何内容之前）还是允许达到的最大大小？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:42:16.317

经过一些试验和错误，我推断它实际上是初始大小而不是最大值。

重要编辑：我的推断是完全错误的。它实际上所做的是定义最大限制。着色器会自动删除超出此限制的任何附加内容。

# c - C将十六进制值“\xHH”转换为整数

> ID：15765346
> 
> 赞同：2
> 
> 时间：2013-04-02T13:26:14.527
> 
> 标签：c, formatting, hex, format-conversion

我想将文件中的十六进制数转换为 int。
字符串如下所示：
`\0\0\x05\xa0`
这应该是 1440。如果我尝试：
`int i = '\x05'`
我得到`5`.

但是，如果我对我做同样的事情，`\xa0`我会得到`-96`.
任何想法如何正确转换字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:29:03.297

这看起来像一个[大端](http://en.wikipedia.org/wiki/Endianness)数。

假设你有四个（不是 12，好像你显示的字节是一个字符串；我假设它们是二进制字节）的数组中的字节`unsigned char data[4]`，你应该能够像这样转换：

```
const unsigned int x = (data[0] << 24) | (data[1] << 16) |
                       (data[2] << 8)  | data[3]; 
```

如果我们插入您的数据：

```
const unsigned char data[] = { 0, 0, 0x5, 0xa0 }; 
```

以上变为：

```
const unsigned int x = (0 << 24) | (0 << 16) | (5 << 8) | 160; 
```

正如预期的那样，这只是`256 * 5 | 160`= `1280 | 160`= 。`1440`

# c++ - C++：K-mean 聚类 G-Matrix

> ID：15765351
> 
> 赞同：-1
> 
> 时间：2013-04-02T13:26:23.343
> 
> 标签：c++, cluster-analysis, k-means

我是新来的，我很抱歉这个“问题”对你们中的一些人来说有点太愚蠢了。我必须在大学做一个关于 k-mean 聚类的 C++ 项目，我需要一些帮助。这是代码。这是工作。现在，我必须单独构建 G-Matrix。在代码中，我得到以下信息：

```
 4.30  0.50   * 1 *
 3.54  0.50   * 1 *
 0.71  3.20   * 0 *
 0.71  4.61   * 0 * 
```

质心坐标为：

```
 4.50
 3.50 
```

质心坐标为：

```
1.50
1.00 
```

这很好，但我需要`1,1,0,0`一个额外的 G 矩阵，如下所示：

```
A B C D
1 1 0 0 ->c1
0 0 1 1 ->c2 
```

`A,B,C,D`点在哪里？`c1`是`c2`质心。知道如何显示这个吗？

这是我的代码：

```
float dmin, dpoint;
float sum[2][2];
int cluster[4], count[4], group;
float flips;
const int rows = 4;
const int columns = 2;
const int crows = 2;
const int ccolumns = 2;

// initialize the points

int point[rows][columns]={{1,1},{2,1},{4,3},{5,4}};

// initialize the centroids

double centroid [crows][ccolumns] = {{1,1},{2,1}};

// ...

for (i = 0; i<4; i++) cluster[i] = 0;

// until there is no change of clusters belonging to each pattern, continue

flips = 4;
while (flips>0) {

    flips = 0;

    for (j = 0; j < 2; j++) 
    {
        count[j] = 0; 
        for (i = 0; i < 2; i++) 
            sum[j][i] = 0;
    }

    // now, we need to calculate the distance

    for (i = 0; i < 4; i++) {

        dmin = 2; group = cluster[i];
        for (j = 0; j < 2; j++)
        {

            dpoint = 0.0;

            dpoint +=  sqrt(pow((point[i][0] - centroid[j][0]),2)+pow((point[i][1] - centroid[j][1]),2));
            fprintf(stdout, "%5.2f ", dpoint); // Show the value of the distance
            if (dpoint < dmin) {
                group = j;
                dmin = dpoint;
            }
        }

        // now, we need to calculate the G matrix (1 or 0)

        fprintf(stdout, "  * %d *\n", group); // displays 0 or 1 (to which cluster it belongs)

        if (cluster[i] != group) 
        {
            flips++;
            cluster[i] = group; // repeat this process until G(n)=G(n+1)
        }

        count[cluster[i]]++;

        for (j = 0; j < 2; j++) 
            sum[cluster[i]][j] += point[i][j];
    }

    // now, display the coordinates of the centroid

    for (i = 0; i < 2; i++) {
        fprintf(stderr," The coordinates of the centroid are: \n");
        for (j = 0; j < 2; j++) {
            centroid[i][j] = sum[i][j]/count[i];
            fprintf(stderr, "%5.2f \n", centroid[i][j]);
        }
    }

}

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:24:55.147

好吧，将您的第三列转换为 G 矩阵。

这实际上是微不足道的。该列为您提供要设置为 1 的行号。

# kendo-grid - 如何获得 Kendo Ui Grid 分页的当前动作？

> ID：15765354
> 
> 赞同：1
> 
> 时间：2013-04-02T13:26:26.370
> 
> 标签：kendo-grid

我有一个绑定到我的存储过程返回的 50 条记录的网格，但我在数据库中总共有近 300 条记录。

现在，我想`Kendo UI Grid`相应地自定义分页。因为我已经通过数据库实现了分页，现在要导航到下一页，我必须使用属性（、、、、）发送对数据库的调用，`"NEXT"`为此我`"PREVIOUS"`需要知道当前操作（、、、、）被调用。`"FIRST"``"LAST"``"NEXT"``"PREVIOUS"``"FIRST"``"LAST"``Kendo Grid`

有没有办法找出来？

# sml - 尝试在产品类型上编写函数时出现类型冲突

> ID：15765356
> 
> 赞同：1
> 
> 时间：2013-04-02T13:26:33.463
> 
> 标签：sml, ml

我在标准 ML 中有以下代码：

```
datatype a = a;
val x = a;
val y:a = a;
val z = a;

fun fa a = a;

fun not' x = case x of
    true => false
  | false => true;

fun fst (a,b) = a;
fun snd (a,b) = b; 
```

我在 sum 类型 ( `not'`) 上的函数工作得很好，但是当我尝试在产品类型 ( `fst`) 上使用我的函数时，它给了我这个错误：

```
- fst (1,2);
! Toplevel input:
! fst (1,2);
!      ^
! Type clash: expression of type
!   int
! cannot have type
!   a
- 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:48:34.113

您需要更加了解变量名称和范围。

发生的事情是您已经声明了具有类型构造函数`a`和值构造函数的数据类型`a`。然后，您在and函数中迟到`a`用作参数，这意味着您正在匹配该数据类型的值构造函数。可能不是你想要的。`fst``snd``a`

快速修复只是更改两个函数中使用的变量名称

```
fun fst (x, y) = x;
fun snd (x, y) = y;

- fst(1,2);
val it = 1 : int 
```

通常问题很容易从类型中看出，但是由于您选择了一个相当不幸的名称来使用，您的函数的原始类型是

```
val fst = fn : a * 'a -> a
val snd = fn : a * 'a -> 'a 
```

但是当函数被固定为不引用数据类型 a 时，它们将`'a`改为

```
val fst = fn : 'a * 'b -> 'a
val snd = fn : 'a * 'b -> 'b 
```

值构造函数以大写字母开头，类型构造函数以全部小写字母开头，通常被认为是一种好的风格。一个例子是选项数据类型，但是它使用所有大写字母作为值构造函数（一些其他语言甚至强制执行此操作）

```
datatype 'a option = NONE 
                   | SOME of 'a 
```

如果我们将用于类型和值的名称分开，并将其称为“a”以外的其他名称，整个想法可能会更有意义，因为它也用作“第一个”多态类型变量的一部分（即，大多数解释器以`'a`）。

```
datatype foo = Bar;
val x = Bar;
val y:foo = Bar;
val z = Bar;

fun fa Bar = Bar; 
```

# git - git 如何在内部跟踪文件更改？

> ID：15765366
> 
> 赞同：22
> 
> 时间：2013-04-02T13:27:04.170
> 
> 标签：git, version-control

有人可以解释一下 git 是如何在内部知道文件 X、Y 和 Z 已更改的吗？识别文件尚未添加或已修改的幕后过程是什么？我之所以问是因为，使用 Subversion 很容易发现它通过在每个文件夹下都有一个目录来跟踪这些事情`.svn`，但是对于 git，我似乎无法找到对其内部工作的描述。我怀疑它会扫描所有子目录以进行更改，因为它非常快。

那么，如果出于好奇，它的内部工作原理是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T14:28:32.767

确定文件状态的机制相当简单。要知道哪些文件已暂存，只需将`HEAD`树与索引进行比较。仅出现在索引中的任何项目都已暂存以供添加，任何仅出现在索引中的项目`HEAD`已被删除，并且任何不同的项目已暂存。

类似地，可以通过将索引与工作目录进行比较来检测未暂存的更改。

您的问题特别询问这怎么会如此之快（毕竟，计算文件的 SHA1 散列并不是很快。）这就是索引 - 也称为*缓存*- 再次发挥作用的地方。该索引还[具有文件大小和文件修改时间字段](https://code.google.com/p/git-core/source/browse/Documentation/technical/index-format.txt)。因此，可以简单地`stat(2)`在磁盘上创建一个文件，并与索引的文件大小和文件修改时间进行比较，以了解是否对文件进行哈希处理。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T13:48:14.380

您可以在免费书籍 Pro-Git 的[Git 内部章节中找到答案](http://git-scm.com/book/en/Git-Internals)

本章解释了 git 如何在幕后工作。

正如 Leo 所说，git 检查文件的 SHA1 以查看它是否已更改，您可以像这样检查它（取自 Git Internals）：

```
$ echo 'version 1' > test.txt
$ git hash-object -w test.txt
83baae61804e65cc73a7201a7252750c76066a30 
```

然后，将一些新内容写入文件，并再次保存：

```
$ echo 'version 2' > test.txt
$ git hash-object -w test.txt
1f7a7a472abf3dd9643fd615f6da379c4acb3e3a 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T13:48:59.990

如果可能重复的答案还不够，您可能想看看这个[http://www.geekgumbo.com/2011/07/19/git-basics-how-git-saves-your-work/](http://www.geekgumbo.com/2011/07/19/git-basics-how-git-saves-your-work/)

长话短说，Git 使用`SHA-1`文件内容来跟踪更改。Git 跟踪四个对象：一个 blob、一个树、一个提交和一个标签。

要回答您关于它如何跟踪更改的问题，请参考该链接的引用：

> 树对象是 Git 跟踪文件名和目录的方式。每个目录都有一个树对象。树对象在提交时指向该目录中的 SHA-1 blob、文件和其他树、子目录。您猜对了，每个树对象都被加密为其内容的 SHA-1 哈希，并存储在 .git/objects 中。树的名称，因为它们是 SHA-1 哈希，允许 Git 通过将名称与以前的名称进行比较来快速查看任何文件或目录是否有任何更改。很光滑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-22T06:11:17.843

### 我发现这篇文章很有帮助。

[https://codewords.recurse.com/issues/two/git-from-the-inside-out](https://codewords.recurse.com/issues/two/git-from-the-inside-out)

> Git 是建立在图上的。几乎每个 Git 命令都会操作这个图。要深入了解 Git，请关注此图的属性，而不是工作流或命令。

### 提取 - 进行不是第一次提交的提交

> 用户将 的内容设置`data/number.txt`为`2`。这将更新工作副本，但保留索引和`HEAD`提交原样。
> 
> 用户将文件添加到 Git。这会将一个包含 2 的 blob 添加到 objects 目录中。它将索引条目指向`data/number.txt`新的 blob。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-11T19:51:40.103

我在最近的一门课程中发现以下解释很有帮助，Kevin Skoglund 的 Git 基本培训，我在 Lynda.com 上学习过。

Git 通过对我们提交的更改运行算法来生成由 40 个十六进制字符组成的哈希键。例如，如果我们在不同的场合提交相同的一组更改，我们应该得到相同的哈希键。

此外，它通过在每次提交中保留以下元信息来跟踪以前的更改。

1.  当前提交 ID
2.  父提交 ID
3.  作者
4.  信息

每个后续提交都将引用父提交，而第一个提交将没有父提交（或 null/nil 值）。下图在这方面会有所帮助。

[图片来源：Lynda.com 上 Kevin Skoglund 的 Git 基本培训](https://i.stack.imgur.com/winKZ.png)

[Lynda.com 上 Kevin Skoglund 的 Git 基本培训](https://www.lynda.com/player/embed/111268?fs=3&w=560&h=315&ps=paused&utm_medium=referral&utm_source=embed%20video&utm_campaign=ldc-website&utm_content=vid-111268)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-06T20:06:07.580

这是一个很好的参考：A Visual Git Reference - [marklodato.github.io/visual-git-guide/index-en.html](https://marklodato.github.io/visual-git-guide/index-en.html) 。由于它在信息图表的帮助下提供了一个演练，这将有助于更好地理解 git。

# java - Java - Inside a GUI class, I want to display another GUI, how do I do it?

> ID：15765368
> 
> 赞同：0
> 
> 时间：2013-04-02T13:27:06.067
> 
> 标签：java, swing, user-interface, methods

I have a class called HotelMenu, which is called by my Main class. HotelMenu is a GUI which shows a hotel menu. Now within HotelMenu, there are two options for which I want a GUI to be displayed when add or view buttons are clicked.

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class HotelMenu extends JFrame implements ActionListener{
    // I have frame dimension constants here

public HotelMenu() {
    // this is where the GUI for HotelMenu is created           
}

public void actionPerformed(ActionEvent event) {
    JButton clickedButton = (JButton) event.getSource();
    if (clickedButton == viewBtn) {
        // Want to generate a GUI here
    }
    else if (clickedButton == addBtn) {
        //Want to generate a GUI here
    }    
    else // else it's the Exit button
        setVisible(false); //you can't see me!
        dispose(); // closes the HotelMenu form          
}    

// Maybe I can include methods that generate GUI for 2 buttons here?

} 
```

I want to know if I can write two methods within HotelMenu class that allows me to generate a simple JRadioButton GUI for when addbtn , viewbtn are clicked.

I don't want to create a separate class for these, if possible.

# javascript - 创建一个 meteor.js 站点地图

> ID：15765370
> 
> 赞同：2
> 
> 时间：2013-04-02T13:27:12.200
> 
> 标签：javascript, meteor

站点地图很酷。如果我想要一个用于我的流星项目，我想我可以执行以下操作之一：

1.  硬编码 sitemap.xml 文件并放入 /public/ 文件夹。不是动态的，但谷歌很容易找到。对于子页面很少的应用程序可能就足够了。
2.  （根本没有尝试过）使用流星路由器在/sitemap.xml（？）创建一个动态站点地图并将其输出为XML。动态的，但对于谷歌来说并不是很容易找到，因为它是动态加载的（也许是可蜘蛛的包？）

但这对我来说都不是很满意。我希望它是动态的，但存储在一个（最好是）静态文件中，Google 很容易找到它。或类似的东西。

**最好的方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:48:46.263

如果有一种方法可以使用客户端路由器动态生成站点地图，则可以使用 Meteor 路由器

你需要[meteor路由器](https://github.com/tmeasday/meteor-router)和meteor的http。Meteor router 有一个先决条件[meteorite](https://github.com/oortcloud/meteorite)，看起来你已经有了。

因此，第一步是使用服务器端路由为该 sitemap.xml 创建一个路由：

```
Meteor.Router.add('sitemap.xml', function() {
    //get sitemap data (below)
    return generated_sitemap;
}); 
```

以及生成站点地图的函数：

我们需要那个`router.js`，不幸的是它只在客户端上运行。所以我们需要使用meteor.http来获取它。该`router.js`文件基本上包含`Meteor.Router.add`您的路由器代码。将 url 调整到您的`router.js`文件可能存储的位置

```
routerdata = Meteor.http.get("http://localhost:3000/client/router.js").content 
```

然后，我们需要从那里解析路由器数据（确保使用 var，这样作用域就不会破坏实际的路由器）

**服务器端js**

```
Meteor.Router.add('/sitemap.xml', function() {
    routerdata = Meteor.http.get("http://localhost:3000/client/router.js").content 
    var Meteor = {};
    Meteor.Router = {add:function(input) {return input}};

    //drag the data out of the routerdata, eval is quick and dirty but you could shackle it down further
    routers = eval(routerdata);

    //now generate the sitemap.xml data

    xmldata = '<?xml version="1.0" encoding="UTF-8"?><urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">';
    for(var url in routers) {
        xmldata+="<url>\n";
        xmldata+="<loc>"+url+"</loc>\n";
        xmldata+="<lastmod>2013-03-03</lastmod>\n";
        xmldata+="<changefreq>daily</changefreq>\n";
        xmldata+="<priority>0.8</priority>\n";
        xmldata+="</url>\n";
    }

    xmldata+="</urlset>";

    return xmldata;
}); 
```

您可能需要进一步自定义它以完全符合您的要求。我不能说我已经尝试过上述方法，我并不真正熟悉如何以最佳方式使用站点地图，但它可能会让你开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T14:08:32.723

这个包看起来很有希望：

[https://atmosphere.meteor.com/package/sitemaps](https://atmosphere.meteor.com/package/sitemaps)

# python - 如何使用函数循环中定义的全局变量

> ID：15765375
> 
> 赞同：0
> 
> 时间：2013-04-02T13:27:23.427
> 
> 标签：python, sockets, python-2.7

对于我的[简单套接字服务器](http://pastebin.com/aCeVY90q)，我需要一个名为的函数`serverloop`（我正在努力提高我的函数技能。）在这个函数中，循环不断尝试与潜在客户连接：

```
def serverloop(s):
    while True:
        conn, addr = s.accept()
        print "Connected with", addr 
```

但是，`conn`其他功能需要运行：

```
def send_msg(conn):
    #Send some data to the remote server
    my_message = raw_input(">>>")

     #set the whole string
    conn.sendall(my_message) 
```

我试图通过 line 强制 conn 是全局的`global conn`，但我仍然收到一个错误：

```
NameError: global name 'conn' is not defined 
```

**注意：**我必须使用线程。

**尽管 conn 变量是在函数中定义的，但如何调用它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:39:59.707

*您正在使用*线程，并且`conn`在您调用.*`RECEIVE`*

 *解决方法是要么*不使用线程*，要么至少设置`conn`为`None`然后轮询，如果`main`在尝试将值传递给之前将其设置为不同的值`RECEIVE`。*

# c# - 没有主键的 EF v4 映射关系 - 数据库优先

> ID：15765380
> 
> 赞同：1
> 
> 时间：2013-04-02T13:27:43.683
> 
> 标签：c#, entity-framework

我目前正在使用一个数据库，该数据库将来自另一个系统的信息提取到其中进行操作。我决定使用 Entity Framework 和 DB first 方法来组成我的数据访问。该项目的独特之处之一是我使用来自外部系统的业务键作为将显示在关联表中的键，但它不是我系统中的主键。我将此键用于关联表 EG 中的关系`MyTable.ExternalId --> Review.ExternalId`（ExternalId 不是父表中的 pk）。因此，即使我对子表有外键约束，EF 也不会重新识别该关系，从而使该关系在数据库中已知。

有没有办法覆盖 EF 来告诉它使用 ExternalId 而不是 PK 来建立关系？还是建议我只是更改关系以使用父表的PK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:07:50.580

[EF 还不支持唯一键](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1050579-unique-constraint-i-e-candidate-key-support)，因此您不能使用您`ExternalId`作为数据库中主体记录的标识。您要么必须`ExternalId`在表中使用 PK，要么与主表的真实 PK 建立关系。

# python - Python 将损坏的 .docx 作为电子邮件附件发送（谷歌应用引擎）

> ID：15765385
> 
> 赞同：1
> 
> 时间：2013-04-02T13:27:55.330
> 
> 标签：python, google-app-engine, email, docx, zipfile

我想从 python 发送一封电子邮件：

```
thedoc = generate_doc()

mail.send_mail(sender="Support",
              to="user@mail.co.uk",
              subject="RE: ref",
              attachments=('thedoc.docx', thedoc),
              body="""Blah blah blah""") 
```

这里是`generate_doc()`：

```
zin = zipfile.ZipFile("template/thedoc.docx",'r')
zout = zipfile.ZipFile(in_memory_zip, "a", zipfile.ZIP_DEFLATED, False)

in_memory_zip = StringIO.StringIO()

for item in zin.infolist():
    buffer = zin.read(item.filename)
        zout.writestr(item, buffer)

# sets windows as the create system to avoid unix file permissions
for zfile in zout.filelist:
    zfile.create_system = 0

zin.close()
    zout.close()

in_memory_zip.seek(0)

#return in_memory_zip.getvalue() <--- This is usual return

f = file('random.docx', "w")      <--- this is test to try and diagnose
f.write(in_memory_zip.getvalue()) <--- the file written here opens correctly
f.close() 
```

邮件发送成功，但附件 .docx 无法在 word/pages/skydrive 中打开，似乎已损坏（并且比本地写入的文件略大）

如果我在本地编写文件而不是作为附件发送，它会正确打开。

我需要`f.write(in_memory_zip.getvalue())`在作为附件发送之前进行模拟吗？

如果是这样，怎么做？否则我还能做些什么来诊断问题？

# javascript - Javascript原型继承

> ID：15765388
> 
> 赞同：-2
> 
> 时间：2013-04-02T13:28:10.503
> 
> 标签：javascript

我想知道为什么子范围在使用像字符串这样的文字类型时会创建一个新属性，而在使用对象表示法时它不会创建一个新对象，下面的示例将阐明

```
paretscope.aString = 'parent string'

//now initialize a string in child scope so it will create a new property in child scope
childScope.aString = 'child string'

paretscope.model={key:"abc"}

// now i modify an object property in child scope but it will not create
// a new object in child scope instead it will modify object in parent scope

childscope.model.key ="xyz" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:41:34.603

该问题与原始值或对象/数组无关。这是您*如何*准确地访问/修改属性^([1])的问题。

在

```
childScope.aString = 'child string' 
```

您正在为该属性**分配一个新值**`aString`。如果该元素尚不存在，这将在该元素上*创建*该属性。`childScope`是否`childScope`具有具有该名称的*继承*属性无关紧要，当您进行赋值时，该属性总是在对象本身上创建。

在

```
childScope.model.key ="xyz" 
```

您**不是**为属性分配新值，而是向值本身添加属性，这是完全不同的。

字符串赋值的等效过程是为`model`属性分配一个新对象。

```
childScope.model = {key:"xyz"} 
```

* * *

1：虽然它与可变和不可变数据类型有点相关。JavaScript 中的所有原始值都是不可变的，即要修改一个值，您必须创建一个新值。数组和对象是可变的，因此您可以添加元素/属性，而无需创建新的数组或对象。

因此，不可变数据类型的值*迫使*您为属性/变量分配新值，而可变数据类型的值可以就地修改。

# c - 如何制作一个允许输入 SSH 密码的类似 shell 的程序？

> ID：15765390
> 
> 赞同：3
> 
> 时间：2013-04-02T13:28:21.837
> 
> 标签：c, ssh, pty

在 OSX 终端上，我可以使用 SSH 连接到服务器，因为终端提供密码输入会话。

```
$ ssh user@server.com
user@server.com's password: 
```

我想做自己的终端实现，所以我

1.  创建了伪终端。
2.  叉
3.  将 pty slave 重定向到子进程的标准输入。
4.  执行 bash。

然后，将字符串推`ssh user@server.com`送到父进程的 pty master 中。但是通过程序向我展示了这一点。

```
$ ssh user@server.com
Permission denied, please try again.
Permission denied, please try again.
Permission denied (publickey,password). 
```

而不是密码会话。

我的问题是什么，我该如何解决？

PS我知道我可以使用`expect`实用程序。这只是实现我自己的伪 shell 应用程序的试验。

## 更新供以后参考

解决方案的关键是使用`forkpty()`函数而不是`posix_openpt()`函数。前者处理所有烦人的工作，并给我双向主文件编号。我可以读取和写入文件号。并且创建的 pty 设备完美运行。SSH 登录会话运行良好。相比之下，后者仍然需要很多我永远无法弄清楚的作品。

我必须关心`forkpty`最后两个参数。我以为它们是输出，但实际上是输入。那是所有问题的根源，在将它们设置为 all 之后`NULL`，它现在运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:32:20.437

已经有一个程序可以满足您的需求：sshpass

[http://sshpass.sourceforge.net/](http://sshpass.sourceforge.net/)

由于它是开源的，因此您可以检查其源代码以了解其工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T14:10:45.847

我终于写了`pty`设备：[https ://github.com/eonil/PseudoTeletypewriter.Swift](https://github.com/eonil/PseudoTeletypewriter.Swift)

我的旧 Q/A 描述了更多内容：[如何将终端切换到使用 NSTask 启动的进程的新子进程？](https://stackoverflow.com/questions/7545133/how-to-switch-terminal-to-new-child-process-of-process-launched-with-nstask/27903173#27903173)

# c++ - Unsigned Long 不包含有效值

> ID：15765392
> 
> 赞同：-2
> 
> 时间：2013-04-02T13:28:28.980
> 
> 标签：c++

我的问题是我觉得很奇怪的事情。事实上，我列出了给定进程的所有子进程。

为此，我使用：[如何查找所有子进程？](https://stackoverflow.com/questions/1009552/how-to-find-all-child-processes)和RC的回答。

但是，我需要一个无符号长的出口。并且解决方案给出了一些基于a的字符串`char[]`

如果我想获取`unsigned long`，我需要修改代码以仅获取数值。另一种情况将不正确。

所以我把`char`as `unsigned long`. 然后，`scanf`带有`%ld`标签。

但我越来越废话了...

为什么这不起作用？

编辑：代码：

```
const char *name = "top";
char command[100];
unsigned long parentID; unsigned long processID;

strcpy(command, "ps -C "); strcat(command, name); strcat(command, " --format '%P %p'");

FILE *fp = popen(command, "r");
    if (fp == NULL) fprintf(stderr, "Error in reading PID child processes information !\n");

while(fscanf(fp, "%lu %lu", parentID, processID) != EOF) {
    printf("PID : %lu Parent : %lu \n", processID, parentID);
}

return processID; 
```

有了，`%s`并且`char[256]`，这项工作！

编辑：想法

我正在考虑两种方法来做到这一点：

*   首先，使用`unsigned long`代替`char[]`.
*   二、读取文件后转换`char[]`为。`unsigned long`但是，我需要逐行阅读。有可能`popen`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:30:43.973

> 所以我把`char`as `unsigned long`. 然后，`scanf()`带有`%ld`标签。

在这里，您的程序会调用未定义的行为，因为类型说明符为`unsigned long`is `%lu`。

（而且您的代码中可能还有一些其他的、我们无法说出的错误；将返回值从`char *`to更改`unsigned long`绝不是微不足道的。）

# java - 弹簧处理程序代码未执行

> ID：15765395
> 
> 赞同：0
> 
> 时间：2013-04-02T13:28:33.583
> 
> 标签：java, web-services, spring, rest, contract-first

我在这里是因为我无法理解为什么在我的合同中第一个使用 spring 创建的 web 服务中处理程序代码永远不会执行。我正在使用`SpringJUnit`测试`Mock`来运行测试。

这是我的端点：

```
@Endpoint
public class InscriptionEndpoint {
private InscriptionService inscriptionService;

private static final String NAMESPACE_URI = "http://iaws/ws/contractfirst/inscription";

public InscriptionEndpoint(InscriptionService inscriptionService) {
    this.inscriptionService = inscriptionService;
}

@PayloadRoot(namespace = NAMESPACE_URI, localPart = "InscriptionRequest")
@Namespace(prefix = "cv", uri = NAMESPACE_URI)
@ResponsePayload
public Element handleInscriptionRequest(...) 
```

这是消息发送者：

```
Source requestPayload = new StreamSource(new ClassPathResource(
            "InscriptionRequest.xml").getInputStream());
mockClient.sendRequest(withPayload(requestPayload)); 
```

这里是 InscriptionRequest.xml 文件的开头：

```
<InscriptionRequest xmlns="http://iaws/ws/contractfirst/inscription"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://iaws/ws/contractfirst/inscription InscriptionRequest.xsd"> 
```

测试的结果很好，但是如果我尝试在处理程序中进行打印，它似乎永远不会执行。我不认为问题来自端点，因为它的构造函数被成功调用。

有没有人遇到过同样的问题或知道如何解决？

如果您想了解更多详细信息，我可以给您项目的 git 地址： [https ://github.com/Ornro/CVWS](https://github.com/Ornro/CVWS)

# java - 我应该更喜欢 ThreadLocalRandom 而不是 ThreadLocal ?

> ID：15765399
> 
> 赞同：18
> 
> 时间：2013-04-02T13:28:48.973
> 
> 标签：java, random, concurrency

我正在寻找`Random`跨多个线程使用（种子）对象，javadocs指出我[`ThreadLocalRandom`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadLocalRandom.html)看起来很棒，除了我无法设置种子，所以我无法确保不同线程或运行之间的一致性。是否有任何实际理由使用`ThreadLocalRandom`或可以接受以下操作：

```
// Pass returned ThreadLocal object to all threads which need it
public static ThreadLocal<Random> threadRandom(final long seed) {
    return new ThreadLocal<Random>(){
        @Override
        protected Random initialValue() {
            return new Random(seed);
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T14:54:55.857

您可以简单地使用`Random`，只需确保每个`Random`对象只能在单个线程中访问。

`Random`, 作为一个古老的类`Vector`, 是不必要的大量同步。他们可能想炫耀 Java 的线程支持，因为这在当时很重要。此外，Java 主要用于在大多数具有单处理器的消费类 PC 上运行，因此同步不会像今天在多处理器上那样影响扩展。

现在一个明显的答案是提供一个线程不安全的版本`Random`，就像提供线程不安全版本`ArrayList`作为`Vector`. 这并没有发生，相反，我们得到了`ThreadLocalRandom`. 这有点奇怪，不知道背后的动机是什么。在 java8 中，`ThreadLocalRandom`被进一步优化为直接对`Thread`对象中的一些 int 字段进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:33:40.867

[ThreadLocalRandom](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/concurrent/ThreadLocalRandom.java)的代码似乎被实现为`ThreadLocal`无论如何（不完全像你所说的那样，但可能足够接近）。我认为你所拥有的会很好用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T16:13:59.683

首先，您的代码为每个线程使用相同的种子。这可能是一个安全问题。此外，对 Random 实例的成员的每次访问都是同步的，因此它会比 ThreadLocalRandom 的相应方法（不同步）慢。如果编译器可以确定您的 Random 实例没有逃脱当前线程，它可以优化那些“同步”的东西。但是由于您可以在 ThreadLocal 中存储共享引用，因此编译器无法检查这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-30T22:53:48.550

取决于所需种子的性质，ThreadLocalRandom 不允许设置随机种子。在某些情况下，您可能希望通过当前请求中的“用户”来播种 Random，因此“*随机性对于用户来说是一致的*”，并且由于容器为新请求重用线程（很少）并且 new Random() 很昂贵，您可能想创建自己的 ThreadLocal。由于 Java [ThreadLocalRandom](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadLocalRandom.html#setSeed-long-)不支持种子，您可以在 JDK 1.8 中轻松编写它：

```
public class RandomUtil {

 private static final ThreadLocal<Random> RANDOM_THREAD_LOCAL = ThreadLocal.withInitial(Random::new);

 public static Random threadLocalRandom(long seed){
    Random random = RANDOM_THREAD_LOCAL.get();
    random.setSeed(seed);
    return random;
} 
```

由于每个 Random 对于线程和线程安全都是本地的，因此可以“如果需要”为下一个请求/用户重新播种，而无需创建新的 Random()。这应该比`new Random(user seed)`为每个请求创建更高效​​，但比具有内部优化的 Java ThreadLocalRandom 慢。

# html - 更改标签的 HTML 表单 CSS 属性

> ID：15765402
> 
> 赞同：0
> 
> 时间：2013-04-02T13:28:51.800
> 
> 标签：html, css, forms, label, font-awesome

**我做了什么：**

我使用表单、超棒的字体和标签创建了一个 HTML 测验。我正在使用 font awesome 中的 icon-circle 和 icon-circle-blank 类来替代单选按钮，以获得更个性化的外观。我有所以当你选择一个选项时，css会将字体真棒类的颜色更改为橙​​色。

**我正在尝试做的事情：**

我正在尝试创建一个 CSS 属性，它将标签的文本属性更改为与所选字体真棒类相同的颜色。

**CSS：**

```
[type=radio] {
    display: none;
}
[type=radio] + label:before {
    content: "\f10c";
    color: #183e63;
    margin-right: 10px;
}
[type=radio]:checked + label:before {
    content: "\f111";
    color: #fcbc02;
    margin-right: 10px;
}
h3 {
    color: #5f93c5;
}
label {
    color: #183e63;
    font-weight: bold;
} 
```

完整代码（[http://jsfiddle.net/fTdRS/15/](http://jsfiddle.net/fTdRS/15/)）

**谢谢！**

编辑：对不起“简单的问题”，但我只是在学习 CSS，这是我第一次使用 [type] 属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:33:29.880

添加：

```
[type=radio]:checked + label {
    color: #fcbc02;
} 
```

[http://jsfiddle.net/fTdRS/17/](http://jsfiddle.net/fTdRS/17/)

# c# - 类数据库图

> ID：15765405
> 
> 赞同：0
> 
> 时间：2013-04-02T13:28:59.297
> 
> 标签：c#, class, database-diagram

在创建基于数据库图表的类时，我会请求一些帮助。我正在用 C# 编写我的代码。我的主要疑问是如何创建从一个类到另一个类的引用，以便它与我的数据库图匹配。

例如，在我的数据库中，我有 2 个初始表：`Screenplay`和`ScreenplayWriter`. `Screenplay`有属性`screenplayID, movieID, description`也`ScreenPlayWriter`有属性`ScreenplayWriterID, personID`。然后我有连接这两个初始表的第三个表，这个表被调用`WritesScreenplay`并且这个表有属性`screenplayID, screenplayWriterID`。

现在我想将这些表转录成 C# 类。我假设我只需要两个初始类`Screenplay`，`ScreenplayWriter`并且第三个只能作为这两个初始类之间的引用派生。我不知道如何在代码中编写这些引用以使其有意义。请注意，一个剧本可以有多个剧本作者。

任何帮助将不胜感激。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:35:03.307

您可以使用[实体框架](http://msdn.microsoft.com/en-in/library/bb399572.aspx)。如果可能的话，它可以解决你的许多问题。

对于您列出的问题，ScreenPlay 和 ScreenPlayWriters 具有 1 :m 关系

所以像下面这样一个剧本对象可以包含一个作家列表

```
public class ScreenPlay
{
    public IList<ScreenPlayWriter> Writers {get;set}
}

public class ScreenPlayWriter
{
} 
```

# jquery - 为什么 jQuery Tooltip 不显示 html 内容？

> ID：15765407
> 
> 赞同：3
> 
> 时间：2013-04-02T13:29:01.873
> 
> 标签：jquery, html, stylesheet

我在 html 页面上创建了一个 jQuery Tooltip。我想在超链接上显示带有 html 内容的工具提示。但是 jQuery 工具提示只是将所有 html 文本显示为工具提示内的普通文本，但没有 html 格式。有一个 jQuery 工具提示的例子。

```
<head>
    <title>jQuery Tooltip</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

    <script>
        $(function() {
            $(document).tooltip();
        });
    </script>
    <style>
        label {
            display: inline-block;
            width: 5em;
        }
    </style>
</head>
<body>
    <a href="#" title="<font color='#FF0000'>That's what this widgets</font>">Tooltips</a>
</body> 
```

**工具提示不是以红色**显示文本“这就是这个小部件” ，而是显示“ `<font color='#FF0000'>That's what this widgets</font>`”。html 格式不适用于工具提示文本。工具提示似乎无法识别 html 格式。问题似乎是工具提示上的样式不正确，或者可能是 jQuery 工具提示不支持 html 内容。

我想知道为什么我的 jQuery 工具提示不能显示 html 内容？我需要一些帮助来解决我的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T13:42:15.937

使用[工具提示提供的](http://api.jqueryui.com/tooltip)[内容](http://api.jqueryui.com/tooltip/#option-content)选项

```
$(function(){
  $('[title]').tooltip({
    content: function(){
      var element = $( this );
      return element.attr('title')
    }
  });
}); 
```

演示：[Plunker](http://plnkr.co/edit/iNxmjMaQhsWY2CGkeuGC?p=preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:35:49.563

最好用css设置颜色：

Javascript代码：

```
$(function () {
    $(document).tooltip({ tooltipClass: "custom-tooltip-styling" });
}); 
```

CSS：

```
.custom-tooltip-styling { color: #ff0000; } 
```

演示：http: [//jsfiddle.net/netme/3Ckk3/2/](http://jsfiddle.net/netme/3Ckk3/2/)

# android - 谷歌地图 APIv2 实施

> ID：15765411
> 
> 赞同：1
> 
> 时间：2013-04-02T13:29:07.703
> 
> 标签：android, google-maps-android-api-2

大家好，我一直在尝试在我的应用程序中实现以下内容。在谷歌地图上显示您的位置并有以下教程的页面，但每次我运行我的应用程序的这一部分时，它都会崩溃帮助，非常感谢谢谢

在我的设备上运行时它总是崩溃，我尝试了很多东西，但唉，我是 android The Place 部分的初学者，它只会显示你在地图上的位置，而且你的坐标似乎根本不适合我。

这是日志猫。

**原木猫**

```
04-02 03:45:19.025: W/dalvikvm(1102): threadid=1: thread exiting with uncaught exception     (group=0x40a71930)
04-02 03:45:19.104: E/AndroidRuntime(1102): FATAL EXCEPTION: main
04-02 03:45:19.104: E/AndroidRuntime(1102): java.lang.RuntimeException: Unable to start  activityComponentInfo{com.hangoverhelper/com.hangoverhelper.Place}: java.lang.NullPointerException
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.os.Looper.loop(Looper.java:137)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at java.lang.reflect.Method.invokeNative(Native Method)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at java.lang.reflect.Method.invoke(Method.java:511)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at dalvik.system.NativeStart.main(Native Method)
04-02 03:45:19.104: E/AndroidRuntime(1102):     Caused by: java.lang.NullPointerException
04-02 03:45:19.104: E/AndroidRuntime(1102):     at com.hangoverhelper.Place.onCreate(Place.java:42)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.Activity.performCreate(Activity.java:5104)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-02 03:45:19.104: E/AndroidRuntime(1102):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-02 03:45:19.104: E/AndroidRuntime(1102):     ... 11 more 
```

**Place.java**

```
package com.hangoverhelper;
import com.hangoverhelper.R;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.LocationSource;
import com.google.android.gms.maps.MapFragment;

import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.FragmentManager;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.Toast;

public class Place extends Activity 
        implements LocationSource, LocationListener{

    final int RQS_GooglePlayServices = 1;
    private GoogleMap myMap;
    TextView tvLocInfo;

    LocationManager myLocationManager = null;
    OnLocationChangedListener myLocationListener = null;
    Criteria myCriteria;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_place);
        tvLocInfo = (TextView)findViewById(R.id.locinfo);

        FragmentManager myFragmentManager = getFragmentManager();
        MapFragment myMapFragment 
            = (MapFragment)myFragmentManager.findFragmentById(R.id.map);
        myMap = myMapFragment.getMap();

        myMap.setMyLocationEnabled(true);

        myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);

        myCriteria = new Criteria();
        myCriteria.setAccuracy(Criteria.ACCURACY_FINE);
        myLocationManager = (LocationManager)getSystemService(LOCATION_SERVICE);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.place, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int itemId = item.getItemId();
        if (itemId == R.id.menu_legalnotices) {
            String LicenseInfo = GooglePlayServicesUtil.getOpenSourceSoftwareLicenseInfo(
                    getApplicationContext());
            AlertDialog.Builder LicenseDialog = new AlertDialog.Builder(Place.this);
            LicenseDialog.setTitle("Legal Notices");
            LicenseDialog.setMessage(LicenseInfo);
            LicenseDialog.show();
            return true;
        }
        return super.onOptionsItemSelected(item);   
    }

    @Override
    protected void onResume() {
        super.onResume();

        int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());

        if (resultCode == ConnectionResult.SUCCESS){
            Toast.makeText(getApplicationContext(), 
                    "isGooglePlayServicesAvailable SUCCESS", 
                    Toast.LENGTH_LONG).show();

            //Register for location updates using a Criteria, and a callback on the specified looper thread.
            myLocationManager.requestLocationUpdates(
                    0L,             //minTime
                    0.0f,           //minDistance
                    myCriteria,     //criteria
                    this,           //listener
                    null);          //looper

            //Replaces the location source of the my-location layer.
            myMap.setLocationSource(this);

        }else{
            GooglePlayServicesUtil.getErrorDialog(resultCode, this, RQS_GooglePlayServices);    
        }

    }

    @Override
    protected void onPause() {
        myMap.setLocationSource(null);
        myLocationManager.removeUpdates(this);

        super.onPause();
    }

    @Override
    public void activate(OnLocationChangedListener listener) {
        myLocationListener = listener;
    }

    @Override
    public void deactivate() {
        myLocationListener = null;
    }

    @Override
    public void onLocationChanged(Location location) {
        if (myLocationListener != null) {
            myLocationListener.onLocationChanged(location);

            double lat = location.getLatitude();
            double lon = location.getLongitude();

            tvLocInfo.setText(
                    "lat: " + lat + "\n" +
                    "lon: " + lon);
        }
    }

    @Override
    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub

    }

} 
```

# *AndroidManifest.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.hangoverhelper"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <permission 
        android:name="com.hangoverhelper.permission.MAPS_RECEIVE" 
        android:protectionLevel="signature"></permission>
    <uses-permission 
        android:name="com.hangoverhelper.permission.MAPS_RECEIVE"/>
    <uses-permission 
        android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission 
        android:name="android.permission.INTERNET"/>
    <uses-permission 
        android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission 
        android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission 
        android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:logo="@drawable/ic_launcher"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.hangoverhelper.SplashActivity"
            android:label="@string/title_activity_splash"
            android:theme="@style/Theme.Splash" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.hangoverhelper.MainActivity"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Place"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/local_title"
            android:theme="@style/AppTheme" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Pill"
            android:label="@string/pills_title" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Food"
            android:label="@string/food_title" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Coffee"
            android:label="@string/coffee_title" >
        </activity>
        <activity
            android:name="com.hangoverhelper.Home"
            android:label="@string/home_title" >
        </activity>
      <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="AIzaSyBkFR4cjuUf2rw8MfLBrWS8iaS2-Th5XA4"/>
    </application>

</manifest> 
```

# 活动地点.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".Place" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment"
        tools:layout="@layout/custom_info_contents" />

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="#A0FFFFFF" >
        <TextView
            android:id="@+id/locinfo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
        <ImageView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/local" />

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T18:14:54.030

您的地图活动应扩展 FragmentActivity 而不是 Activity 替换`public class Place extends Activity`为**`public class Place extends FragmentActivity`**

# iphone - 为 ARM7 使用 OCI

> ID：15765412
> 
> 赞同：0
> 
> 时间：2013-04-02T13:29:09.513
> 
> 标签：iphone, ios, xcode, oracle, arm

我正在尝试将 Oracle OCI 用于 iOS 应用程序，因为我的经理建议我将其用于内部应用程序，我正在为我的公司编码。我下载了 Mac OS X 的 OCI 并将其包含在 XCode 项目中并尝试构建该项目。登陆时出现以下警告： [https ://lh4.googleusercontent.com/-JYDw-CZXR30/UVqZ1xY68UI/AAAAAAAAAAEn8/pBz7-JneXWk/s1413/Screen%2520Shot%25202013-04-02%2520at%25202.16.00%2520PM.png](https://lh4.googleusercontent.com/-JYDw-CZXR30/UVqZ1xY68UI/AAAAAAAAEn8/pBz7-JneXWk/s1413/Screen%2520Shot%25202013-04-02%2520at%25202.16.00%2520PM.png)

关于如何进行的想法？我是否采取了正确的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:45:28.967

据我所知，Oracle 目前没有为 OCI 分发 iOS 兼容库。[您从他们的“Mac OS X”下载页面](http://www.oracle.com/technetwork/topics/intel-macsoft-096467.html)下载的库适用于 32 位和 64 位 MacOS（绝对***不是***ARM7）架构。您还会在这些 Oracle 下载页面上看到列出的其他架构，但没有专门的移动架构。

[其他人也问过这个问题](https://stackoverflow.com/questions/4594751/oracle-access-from-ios)。

# zeromq - ZMQ 将消息路由到 ROUTER/DEALER 架构中的特定工作人员

> ID：15765414
> 
> 赞同：2
> 
> 时间：2013-04-02T13:29:16.297
> 
> 标签：zeromq

当我们有多个客户端请求多个服务时，如何在 zeromq 提出的 ROUTER/DEALER 架构中向特定工作人员发送消息？更具体地说，如果我们`service A` `service B`后面有一个 ZMQ_DEALER。如何发送消息`service A`或`service B`仅发送消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-09T10:21:50.130

查看 ZeroMq 指南中的 Majordomo 模式

[https://zguide.zeromq.org/docs/chapter4/#Service-Oriented-Reliable-Queuing-Majordomo-Pattern](https://zguide.zeromq.org/docs/chapter4/#Service-Oriented-Reliable-Queuing-Majordomo-Pattern)

Majordomo 协议 (MDP) 以一种有趣的方式扩展和改进了 PPP：它为客户端发送的请求添加了一个“服务名称”，并要求工作人员注册特定服务。添加服务名称会将我们的 Paranoid Pirate 队列变成面向服务的代理。

![在此处输入图像描述](https://i.stack.imgur.com/yvml1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:43:00.607

无法**通过**ROUTER/DEALER 向特定工作人员发送消息。如果有的话，事情会变得非常复杂（在实施和可用性方面）。

不过，解决方案是显而易见的：将 worker 的端点以及路由器的端点暴露给客户端。如果您需要向特定工作人员发送消息 - 直接发送。如果您需要将其发送给随机工作人员 - 通过路由器发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T13:31:52.880

不确定这个问题中工作人员的含义，但您当然可以通过路由器套接字将消息发送到特定连接。

例如，如果经销商套接字注册了一个身份，那么路由器可以使用该身份直接与该套接字对话 - 因此，如果您在两个经销商后面有 serviceA 和 serviceB，那么路由器可以通过在消息中添加一个额外的帧来直接与任一服务对话套接字标识（并使用 SNDMORE 标志）。例如

`ZMQ.Socket dealer = context.socket(ZMQ.DEALER); dealer.setIdentity("serviceA".getBytes());`

然后路由器套接字可以通过发送以下内容直接与该经销商对话：

`routerSocket.sendMore("serviceA".getBytes()); routerSocket.send(data)`

该解决方案存在一个问题，即 ZMQ 会记住套接字不再可路由（例如，出现某种网络中断或您只是重新启动了服务），并且即使在不能路由时也不会再将消息路由到那里。重新连接。因此，使用固定字符串作为套接字标识并不是一个好主意。我倾向于使用 UUID。告诉服务器哪个客户端/服务有哪个 UUID 现在变得更有趣了！您可以采取多种方法，但我将把它留给不同的帖子，因为它已经远离了重点。

# oracle - 从子记录中获取所有父记录

> ID：15765423
> 
> 赞同：3
> 
> 时间：2013-04-02T13:29:34.257
> 
> 标签：oracle

我有一个类似的 oracle 表

表名：注

```
NoteID(PK)        NoteText    ParentNoteID
1                 x           - 
2                 y           1
3                 z           2 
```

在这里，我需要在 notetext 之上执行类似查询，例如 note.note_text like '%z%'，它单独提取第三条记录。

我也希望提取它的父记录。即在获得第三条记录后，它通过类似查询匹配我需要通过查看 parentNoteID 来返回。所以第 3 条记录的父记录是 2，2 的父记录是 1。所以结果应该获取所有三个记录。

为了扩展这一点，如果我的 like 查询匹配两个子记录，显然它应该获取两者的所有父记录。

例子：

```
NoteID(PK)  NoteText    ParentNoteID
1           x           -  
2           y           1
3           z           2
4           a           -
5           b           4
6           z           5 
```

`note.note_text like '%z%'`应该拉，以上6条记录。

在此先感谢埃斯瓦尔。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T13:36:40.483

您将使用连接方式来执行此操作。

例如像

```
select *
  from tbl1
 start with note_text like '%z%'
 connect by note_id = prior parent_note_id 
```

会做的。

小提琴示例：[http ://sqlfiddle.com/#!4/0c6ea/1](http://sqlfiddle.com/#!4/0c6ea/1)

# architecture - 多层架构 - 责任问题

> ID：15765429
> 
> 赞同：2
> 
> 时间：2013-04-02T13:29:57.160
> 
> 标签：architecture, domain-driven-design, dto, n-tier-architecture, multi-tier

我正在开发一个实现多层模式的应用程序，其中 MySQL 用于持久性。有一个 WCF 服务提供对数据的访问并提供 DTO。

此外，我计划实现以下模式： - DTO - MVP（尚不确定是被动视图还是监督控制器） - 在适用的情况下针对接口编写代码

目前，我原始具有以下项目结构：

```
+-------------------------------+
|     MySQL DB Server           |
+------+------------------------+
       ^
       | Uses Entity Framework 5.0
       |
       +
+-------------------------------------------------------------------------------+
| Application Server                                                            |
|-------------------------------------------------------------------------------|
|+------------------+ +----------------+ +--------------+ +--------------------+|
|| Data Access Layer| | Contracts      | | Communication| | Business Layer     ||
||------------------| |----------------| |--------------| |--------------------||
|| - EF 5.0 Entities| | - WCF Contracts| | - WCF Service| | - Actual Service   ||
||                  | |                | |   Hosts      | | - Session management|
||                  | |                | |              | | - Security and     ||
|+------------------+ +----------------+ +--------------+ +--------------------+|
+-------------------------------------------------------------------------------+
        ^
        | Communicates via DTOs which are acutally wrappers for Entities
        | eg. GetUserByID() or SaveUser(userDTO)
        |
        |
+-------+-----------------------------------------------------------------------+
| Clients                                                                       |
|-------------------------------------------------------------------------------|
|+-------------------+                                     +-------------------+|
|| Business Layer    |+----------------------------------->| GUI (Winforms)    ||
||-------------------|  BLL receives DTOs and creates      |-------------------||
|| -Provide WCF Servi|  Domain Objects (eg. User) which are| -Implementation of||
||  ce Access        |  Processed by presenters and passed |  View Interfaces  ||
|| -Service Reference|  to views where they are bound to   |                   ||
|| -Implementation of|  controls.                          |                   ||
||  Presenter Interf.|                                     |                   ||
|+-------------------+                                     +-------------------+|
+-------------------------------------------------------------------------------+

+------------------------------------------------------------------------+
| General                                                                |
|------------------------------------------------------------------------|
|+---------------------+ +--------------------+ +-----------------------+|
|| DTOs                | | Interfaces         | | Library               ||
||---------------------| |--------------------| |-----------------------||
|| -DTO Definitions    | | -View Interfaces   | | -General Helper Classe||
||                     | | -Presenter Interf. | |  s eg. Cryptography   ||
||                     | | -Domain Model IF.  | |                       ||
|+---------------------+ +--------------------+ +-----------------------+|
+------------------------------------------------------------------------+ 
```

外框是 Visual Studio 中的项目文件夹。内盒是 C# 项目

在我继续编码并花更多时间在实际实现之前，我只是想获得一些关于我项目的结构/架构的反馈。

我正在思考以下问题：

1.  上述结构是否符合“最佳实践”？例如。接口、DTO 的位置
2.  可以有两个业务层还是将业务层拆分为客户端和服务器？服务器 BLL 旨在提供会话管理和安全等通用功能，而客户端 BLL 提供服务访问。它还控制其演示者的视图。
3.  服务器端目前不知道域对象。在这里也使用它们会更好吗？这将导致我的实体映射到域对象，然后映射到 DTO
4.  从 WCF 服务接收 DTO 是常见的还是我应该使用域对象（我知道这里已经讨论了很多，但据我了解，如果域对象不是那么复杂并且可以节省映射和编码，它将适用更改我的域对象和数据库时需要努力）这会不会导致非常难以维护的通信链，例如：实体<->域对象<->DTO<->域对象
5.  你把验证放在哪里？我想将基本验证放入视图或演示者中（例如，格式化、null/not null 值，......），而主要验证进入域对象......？
6.  在数据库中创建新记录时，假设是一个新用户，客户端是否也应该将新的 DTO 传递给服务器，还是创建一个接受简单数据类型（如字符串和 int）的服务方法更好？

很抱歉这篇长篇文章，但我认为最好将我的问题合并到一篇文章中并在其中提供项目结构。

提前感谢您的任何回答。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:42:00.593

您提出的结构与我们 2 年前在生产中部署的应用程序之一非常相似（已做*必要的修改）。*它可以工作，但您必须仔细设计域模型，在不同的有界上下文中分离应用程序的各个方面。

所以这些是我自己的答案：

1.  不，这里没有“最佳实践”可以符合。经过 5 年的金融应用 DDD 实践，我个人的看法是，DDD 仍然是一个研究领域。但是，如果将其正确应用于价值在于**领域专家**经验的项目，则证明是非常好的。但是，您必须区分业务需求（与领域相关）和技术需求（有助于绘制应用程序所需的组件和层）
2.  业务层（如果您需要确定一个）应该只处理业务规则。它是 DDD 应用程序中的领域模型层。
3.  根据我的经验，如果您可以信任客户端机器并且正确设计了域模型，那么您根本不需要任何应用程序服务器。但是，如果您真的需要它（例如，因为客户端无法连接到数据库），我会使其尽可能简单和无状态。这里一个有用的考虑是，**大多数时候，业务规则已经阻止了对可变实体的并发访问**。在这种情况下不要尝试处理对此类实体的并发访问，只需构建互斥机制即可。
4.  对于进程间通信，仅使用 DTO。但是，您可以选择将整个域移动到应用程序服务器中（这将变得更加复杂和有状态），并在客户端中使用更简单的 MVC 模式。从客户端开发人员的角度来看，这更简单，但总体而言成本更高（特别是难以扩展）。
5.  输入字段的简单类型验证可以在视图中完成（整数、日期时间等），但是**您应该在将每个相关类型的值**传递给域之前使用自定义值对象对其进行建模。例如，您永远不应该将字符串或小数传递给域对象，而是将**Email**或**Money**传递给域对象。此外，域中唯一负责业务不变量：当操作无法执行时，[它应该抛出表达异常。](http://epic.tesio.it/2013/03/04/exceptions-are-terms-ot-the-ubiquitous-language.html)
6.  DTO 更具表现力，因此更易于调试。

在开始之前，我认为你应该问自己一些问题：

1.  我是否需要领域专家，或者我可以通过阅读 Wikipedia 或一组编写良好的规范来了解足够多的业务？提示：（至少）不需要领域专家 == 不需要 DDD。
2.  我可以信任将部署客户端的机器吗？如果不能，则应考虑将域移至应用程序服务器（并采用 MVC 模式客户端来处理 WCF 请求和 DTO 绑定）。

最后，如果你真的需要 DDD，而且你是新手，你会发现[Epic 的建模模式](http://epic.tesio.it/doc/manual/a_shared_modeling_grammar.html)很有用（免责声明，我是 Epic 开发人员之一，我在过去 5 年的 DDD 试验和错误中设计了所有这些模式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:20:46.110

我会一一解答

1）它取决于应用程序的复杂性。如果您正在处理复杂的领域，那么遵循领域驱动设计是很好的

2）如果你说 BLL，它应该只处理业务逻辑而不是任何技术细节，如会话、安全性......

3）在服务器端拥有域对象是件好事。它促进可重用性

4）您不应该将域对象暴露在外面。DTO 是更好的选择。您可以使用 Automapper 进行所有与映射相关的工作

5) 根据范围在每个组件中进行验证是很好的

6) DTO 会更好

此外，您可以服务堆栈而不是 WCF，因为它是基于行业最佳实践构建的。

# javascript - 如何在 HTML 字符串上使用 JQuery 选择器？

> ID：15765435
> 
> 赞同：1
> 
> 时间：2013-04-02T13:30:09.347
> 
> 标签：javascript, jquery

```
$.get(url, function(data){} 
```

这个 jQuery 函数返回一个带有页面 'url' 代码的字符串。

如何使用它上面的 jQuery 选择器来提取我需要的标签信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:30:50.883

如果它是有效的 HTML，您可以将其包装在 jQuery 中并像往常一样使用它：

```
$.get(url, function(data){
    $(data).find('div');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:31:32.947

试试这个

```
$(data).find('div'); 
```

你可以用这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:04:01.977

用 div 包装你的数据（包括最外层的元素也可以提取标签），而不是使用 find

```
$("<div>" + data + "</div>").find('div') 
```

# objective-c - EXC_BAD_ACCESS 在 iPad 5.0 模拟器上将 uiimageview 添加到自定义 uibutton 但适用于 iPad 6.0 模拟器

> ID：15765436
> 
> 赞同：1
> 
> 时间：2013-04-02T13:30:11.723
> 
> 标签：objective-c, ipad, ios-simulator

我的 .h 文件

```
#import <UIKit/UIKit.h>

@interface NavigationBarButton : UIButton

@property(nonatomic, retain) UIImageView *barButtonImage;

@property(nonatomic, retain) UILabel *barButtonLabel;

- (id)initWithFrame:(CGRect)frame withImage:(UIImage *) image withTitle:(NSString *) title; 
```

我的 .m 文件

```
- (id)initWithFrame:(CGRect)frame withImage:(UIImage *) image withTitle:(NSString *) title

{

self = [super initWithFrame:frame];

if (self) 

{  
        self = [UIButton buttonWithType:UIButtonTypeCustom];

        self.frame = frame;
        self.backgroundColor = [UIColor clearColor];

        barButtonImage = [[[UIImageView alloc] initWithFrame:CGRectMake(16, 1, 18, 23)]autorelease];
        [barButtonImage setImage:image];

        barButtonLabel = [[[UILabel alloc] initWithFrame:CGRectMake(0, 26, 50, 10)]autorelease];
        barButtonLabel.backgroundColor = [UIColor clearColor];
        barButtonLabel.text = title;
        barButtonLabel.font = [UIFont systemFontOfSize:11];
        barButtonLabel.textAlignment = NSTextAlignmentCenter;

        [self addSubview:barButtonLabel];
        [self addSubview:barButtonImage];

        //[barButtonImage release];
        //[barButtonLabel release];
    }
    return self;
} 
```

但应用程序在 [self addSubview:barButtonLabel] 上崩溃，这很奇怪，因为代码在 iPad 6.0 模拟器上运行良好，但在 iPad 5.0 或 iPad 5.1 模拟器上运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:36:39.647

一旦检查这个

在 .m 文件中添加这个

```
@synthesize barButtonImage, barButtonLabel; 
```

# android - 如何在android中重新启动后设置所有警报

> ID：15765437
> 
> 赞同：0
> 
> 时间：2013-04-02T13:30:23.387
> 
> 标签：android, alarm, reboot

我正在开发一个应用程序来设置警报以触发通知提醒我有关电视节目的内容

现在我将有关警报的数据存储在数据库中，但重新启动后所有警报都被删除

我曾经`receiver`在接收`BOOT_COMPLETED`时设置警报，但是当我在其中设置警报时，警报会触发另一个接收器来设置通知

我该怎么做

这是代码：

清单.xml

```
<receiver android:name=".NotAlarm" />
        <receiver android:name=".BootCompletedReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

BootCompletedReceiver.java

这些行有错误：-

**1 - 意图 alarmIntent = new Intent(this, NotAlarm.class);**

**2 - am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);**

```
package com.shadatv.shada;

import java.util.Calendar;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;

public class BootCompletedReceiver extends BroadcastReceiver {

    public DAOTimes timeDatabase = null;
    AlarmManager am;

    @Override
    public void onReceive(Context context, Intent intent) {
        Cursor allNotifs = timeDatabase.getAllNotifications();                      

        if (allNotifs.moveToFirst()) {
            do{
                Intent alarmIntent = new Intent(this, NotAlarm.class);
                String noPrName = allNotifs.getString(allNotifs.getColumnIndex("_noprogram")).toString().trim();
                String noTime = allNotifs.getString(allNotifs.getColumnIndex("_notime")).toString().trim();
                intent.setAction(noTime);
                intent.putExtra("nameSelected", noPrName);
                PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                        new Intent(), PendingIntent.FLAG_CANCEL_CURRENT);
                am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
                am.setRepeating(AlarmManager.RTC_WAKEUP, Long.valueOf(noTime),
                        7 * 24 * 60 * 60 * 1000, pendingIntent);
            }while(allNotifs.moveToNext());

        }
    }
} 
```

NotAlarm.java

```
package com.shadatv.shada;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class NotAlarm extends BroadcastReceiver {

    NotificationManager nm;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        NotificationManager nm = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);

        Notification.Builder builder = new Notification.Builder(context);
        builder.setSmallIcon(android.R.drawable.btn_star);
//      CharSequence ticker = (CharSequence) (R.string.noTitle);
        builder.setTicker("تذكير");

        Notification notify = builder.getNotification();

        CharSequence title = intent.getExtras().getString("nameSelected");
        CharSequence details = "تذكير - برنامج " + title;

        PendingIntent pending = PendingIntent
                .getActivity(context, 0, new Intent(), 0);
        notify.setLatestEventInfo(context, title, details, pending);

        nm.notify(0, notify);

    }

} 
```

**现在，我如何修改此代码以正确运行？**

# python - 通过 Python 子进程与 R 脚本交互

> ID：15765439
> 
> 赞同：0
> 
> 时间：2013-04-02T13:30:34.900
> 
> 标签：python, r, subprocess

我想知道如何打开一个 R 脚本并与之交互（例如，发送字符串、整数等）。尽管我以前没有使用过它，但 subprocess 似乎是一种合理的方法。

到目前为止，我有

```
process = subprocess.Popen(['/path/to/Rscript --no-save path/to/script.R'], stdout=subprocess.PIPE, stdin=subprocess.PIPE, shell=True) 
```

这似乎在打开 script.R 时是成功的，但是在我的脚本中，我提示用户输入一个整数，我无法完全弄清楚如何做到这一点。我试过了：

```
process.communicate(input=1)[0] 
```

但我似乎在叫错树。子进程在没有收到此输入的情况下关闭。

编辑：此时 Rpy 可能不是一个好的选择，因为这个脚本的用户不一定有权访问该模块及其依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:07:47.440

试试 PypeR 吗？

通过管道在 python 中使用 R 是一个很棒的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:03:56.297

**编辑2**

那个怎么样？

```
process = subprocess.Popen(['/path/to/Rscript', '--no-save', 'path/to/script.R'], stdout=subprocess.PIPE, stdin=subprocess.PIPE) 
```

**编辑1**

您只能通过标准输入和标准输出在进程之间通信字符串。

`process.communicate("1\n")`能帮到你吗？

# ios - 成功登录后如何在ios中从一个视图导航到另一个视图

> ID：15765443
> 
> 赞同：-8
> 
> 时间：2013-04-02T13:30:51.947
> 
> 标签：ios, objective-c, cocoa-touch, uistoryboard

成功登录后，我需要从一个视图导航到另一个视图我正在使用情节提要，但我陷入了这个过程我是 IOS 新手，所以请指导我克服这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:32:40.283

我通常`[self performSegueWithIdentifier: @"LoginSucceeded" sender:self]`在我自己的项目中使用“”，当我用于身份验证的任何方法最终返回为“成功”时。

尽管您需要将“ `@LoginSucceeded`”替换为您为转到下一个屏幕的 segue 提供的实际 segue 名称。

而且您可能还需要适当的“登录失败”segue / screen 或“身份验证错误”状态。

# python - 如何从pyside中的滑块获取值？

> ID：15765444
> 
> 赞同：3
> 
> 时间：2013-04-02T13:30:55.200
> 
> 标签：python, qt, slider, pyqt, pyside

你好美丽的人们，

我是一般gui和qt的新手，有点卡住了。[我从这里](http://qt.gitorious.org/pyside/pyside-examples/blobs/blame/ce9b2dfe456f38a166314dc2807a6b27cd944127/examples/widgets/sliders.py)[qt.gitorious.org]下载了滑块示例，并将其简化为滑块。我现在得到的代码如下： http: [//pastebin.com/EkXxdPee](http://pastebin.com/EkXxdPee)

我现在想从滑块中读取值并对其进行处理（使用 zeromq 将其发送到另一个程序）。我想我必须对 valueChanged 做点什么，但我不知道是什么。有人可以帮我一点吗？

欢迎所有提示！

[编辑] 感谢 Romha Korev 的回答和一些谷歌搜索，我在这里找到了一个完整的工作示例：http: [//zetcode.com/gui/pysidetutorial/widgets/](http://zetcode.com/gui/pysidetutorial/widgets/)

我只是从那里开始工作，我终于拥有了我现在想要的东西。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T13:38:11.263

使用方法 value() 来获取 QSlider 中的值。

```
slider = QtGui.QSlider()
slider.setValue( 5 )
print( slider.value() ) # Will print '5' 
```

# hibernate - 如何在 JPA-Hibernate 中执行数据透视查询？

> ID：15765446
> 
> 赞同：0
> 
> 时间：2013-04-02T13:30:59.663
> 
> 标签：hibernate, jpa, pivot-table

在 MYSQL 我有这个查询：

我的桌子

```
    规划
    ------------------
    process_id (int)
    project_id (int)
    期间（日期时间）
    总小时（双）

```

```
    选择 process_id，project_id，
    sum( if (period="2013-04-01 00:00:00",total_hour,0)) 作为四月，
    sum( if (period="2013-05-01 00:00:00",total_hour,0)) 可能，
    sum( if (period="2013-06-01 00:00:00",total_hour,0)) 为 6 月
    从计划
    GROUP BY process_id,project_id;

```

我需要将此子句 SQL 转换为在 JPA 中使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T14:16:05.090

SQL 到 JPQL

```
SELECT p.process_id, p.project_id,
sum( case when p.period="2013-04-01 00:00:00" then p.total_hour else 0 end ) as april,
sum( case when p.period="2013-05-01 00:00:00" then p.total_hour else 0 end ) as may,
sum( case when p.period="2013-06-01 00:00:00" then p.total_hour else 0 end ) as june,
FROM Planning p
GROUP BY p.process_id, p.project_id; 
```

但是您仍然可以使用本机查询。

映射结果集：您可以手动将结果集映射到新 bean（如果您愿意，可以使用推土机），或者您可以使用一些 @SqlResultSetMapping 请参阅[如何使用 JPA 本机查询选择多个具有相同名称的列？](https://stackoverflow.com/questions/6180214/how-to-select-multiple-columns-with-the-same-name-using-jpa-native-query)

# python-2.7 - wxPython 将数据字符串作为消息

> ID：15765449
> 
> 赞同：0
> 
> 时间：2013-04-02T13:31:09.010
> 
> 标签：python-2.7, wxpython, arcgis

如何使用 wxPython 获取计算后获得的数据字符串并将其显示为消息或带有 OK/Cancel 选项的报告？然后由我决定是否保存或取消它。注意：我想使用简单的应用程序（以避免 arcmap 崩溃），因为此报告生成是 arcgis 10.1 设置中的 pythonaddin 的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:42:55.757

您可以在 pythonaddin 中使用 wxPython 对话框，但前提是您必须正确设置。您必须导入 wx 并在扩展插件中创建 wx.App，该插件会自动加载并具有启动方法。这将允许在 Arcmap 事件循环开始之前创建 wx.App（或 PySimpleApp）。下面是我公司使用的使用 wxPython 对话框的工作扩展的一部分。

```
import os, sys, time
import shutil

#do exception handler imports now
##mp = os.path.dirname(__file__)
mp = os.path.dirname(os.path.abspath(__file__))
sys.path.append(mp)

from aiHelpers2 import print2log, ehook
print2log(u'finished standard library imports . . .')

sys.excepthook = ehook
print2log(u'set except hook')

import wx      # always load in ext (extension loads before event loop starts)
import arcpy
import pyodbc  # need to import here for toolbox scripts (loads before loop)

app = wx.App(0)

class LibLoader1(object):
    '''Implementation for wvExten_addin.ext2 (Extension)'''
    def __init__(self):
        self.enabled = True

    def startup(self):
        '''
        Internally esri-activated addin method, runs when Arcmap starts. 
        Sets up the environment. 
        '''
        soforth, so-on . . . 
```

我们在这个应用程序中只使用 wx.Dialog 子类，所以我们不需要主循环。但是你可以用一个，我试过了。

综上所述，我认为您提到的问题有一个更简单的答案。如果您只是想显示某些处理的结果，那么您可以将结果写入文件（或 mmap，如果您愿意）并使用 subprocess.Popen 触发读取文件或 mmap 并在 wx 中显示内容的脚本对话框或框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:31:53.007

根据 ESRI 的网站，他们不支持 10.1 中的 wxPython 集成：[http ://forums.arcgis.com/threads/41809-wxPython-hooked-to-arcmap](http://forums.arcgis.com/threads/41809-wxPython-hooked-to-arcmap)

听起来你可以让它工作，但对我来说听起来很麻烦。可能有一种方法可以使用其中一个 arcgis Python 模块来显示来自 ArcGIS 的对话框。我会调查和/或在他们的论坛上提问。

# google-chrome - 有效阻止域的 Chrome 扩展

> ID：15765451
> 
> 赞同：10
> 
> 时间：2013-04-02T13:31:22.557
> 
> 标签：google-chrome, google-chrome-extension

我正在制作一个非常简单的 Chrome 扩展程序来阻止对某些域的请求（厌倦了许多网站上缓慢的页面加载，等待 facebook 垃圾邮件）。我的问题是关于如何有效地加载用户指定的域列表。[Chrome 文档](https://developer.chrome.com/extensions/webRequest.html)指出，将包含“url”的映射传递给 addListener 调用比传入所有请求并在我的函数中检查它们更有效。我该怎么做，但使用用户提供的域/表达式列表？

到目前为止，这是我的清单和 js 文件：

清单.json

```
{
  "name": "I Don't Want YOur Social Networking Junk",
  "version": "1.0",
  "description": "This extension let's you block (Chrome will not download) content from domains.  Too many sites slow themselves down by bringing in a bunch of junk from sites like facebook.  This will let you block those things.",
  "permissions": ["webRequest", "webRequestBlocking", "http://*/*", "https://*/*"],
  "background": {
    "scripts": ["background.js"]
  },

  "manifest_version": 2
} 
```

背景.js

```
chrome.webRequest.onBeforeRequest.addListener(
function(details) {
    return {cancel: true}; 
}, { urls: ["*://*.facebook.com/*", "*://*.facebook.net/*"] }, ["blocking"]); 
```

正如你所看到的，我现在在 urls 列表中有几个硬编码的表达式。这就是我想从用户可以填充的内容中加载的内容。建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T13:42:40.853

使用这样的东西：

```
function blockRequest(details) {
  return {cancel: true};
}

function updateFilters(urls) {
  if(chrome.webRequest.onBeforeRequest.hasListener(blockRequest))
    chrome.webRequest.onBeforeRequest.removeListener(blockRequest);
  chrome.webRequest.onBeforeRequest.addListener(blockRequest, {urls: urls}, ['blocking']);
} 
```

您可以提供一个[选项页面](https://developer.chrome.com/extensions/options.html)，让用户指定要阻止的域（最好使用[chrome.storage](https://developer.chrome.com/extensions/storage.html) API 保存它们）。在您的后台页面中，通过在初始化或更改设置时重新注册侦听器来更新过滤器。

顺便说一句，您应该在稳定的情况下使用[声明式 Web 请求 API](https://developer.chrome.com/extensions/declarativeWebRequest.html)，因为它更高效并且不需要持久的后台页面。

# c# - 向 Gridview 添加标题行

> ID：15765462
> 
> 赞同：0
> 
> 时间：2013-04-02T13:32:13.477
> 
> 标签：c#, gridview, datatable, datasource, dataview

我的网格视图类似于：

> ```
> 12- CategoryA - other columns
> 13- CategoryA - other columns
> 14- CategoryA - other columns
> 15- CategoryA - other columns
> 
> 16- CategoryB - other columns
> 17- CategoryB - other columns
> 18- CategoryB - other columns 
> ```

我想要的是这样的：

```
CategoryA (colspan 2) 
12 - other columns 
13 - other columns 
14 - other columns 
15 - other columns 
Category B (colspan 2) 
16 - other columns
17 - other columns 
18 - other columns 
```

我可以通过修改我绑定为数据源的数据表来做到这一点吗？还是有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:59:43.353

我相信[RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件是您所需要的。您可以跟踪之前显示的类别以及将显示的类别。

```
class MyClass
{
    private string CurrentCategory{ get; set; }

    // Load_Page with databinding the GridView{  }

    protected void mygridview_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if(e.Row.RowType == DataControlRowType.DataRow && 
          (e.Row.DataItem as DataRowView)["mycolumn"].ToString() != CurrentCategory))
        {
            GridViewRow tr = new GridViewRow(e.Row.RowIndex +1, e.Row.RowIndex + 1, 
                                   DataControlRowType.DataRow, e.Row.RowState);
            TableCell newTableCell = new TableCell();
            newTableCell.Text = (e.Row.DataItem as DataRowView)["mycolumn"].ToString();
            CurrentCategory = (e.Row.DataItem as DataRowView)["mycolumn"].ToString();
            tr.Cells.Add(newTableCell);

            ((Table)e.Row.Parent).Rows.Add(tr);
        }
    }
} 
```

代码按原样提供，未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:35:20.607

GridView 控件本身不支持分组。

# jquery - jQuery DataTables 添加列过滤器不起作用

> ID：15765467
> 
> 赞同：0
> 
> 时间：2013-04-02T13:32:19.030
> 
> 标签：jquery, jquery-ui, datatables, filtering

我正在尝试将列过滤器添加到 jQuery DataTables。但没有得到任何输出。我也没有收到任何错误，也无法猜测代码在哪里不起作用。

我添加的库如下：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
<script src="http://localhost/codegen/assets/js/jquery.dataTables.js" type="text/javascript"></script>
<script src="http://localhost/codegen/js/jquery.dataTables.columnFilter.js" type="text/javascript"></script>

<style type="text/css">
    @import "http://localhost/codegen/assets/css/demo_table_jui.css";
    @import "http://localhost/codegen/assets/themes/smoothness/jquery-ui-1.8.4.custom.css";
</style> 
```

jQuery代码如下：

```
$(document).ready(function(){
        $('#datatables').dataTable({
            "sPaginationType":"full_numbers",
            "sScrollX": "100%",
            "bScrollCollapse": true,
            "bAutoWidth": true,
            "aaSorting":[[0, "asc"]],
            "bJQueryUI":true
             // Adding the filters equal to the no of columns
        }).columnFilter({
            aoColumns: [ { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  },
                         { type: "select", values: [ 'Gecko', 'Trident', 'KHTML', 'Misc', 'Presto', 'Webkit', 'Tasman']  }
                ]
        });
    }) 
```

谁能告诉我什么是问题/我错在哪里？我也没有收到任何错误，也没有输出。

提前致谢。数控

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:05:09.233

[当我在这个 URL ( http://www.datatables.net/release-datatables/examples/api/multi_filter_select.html](http://www.datatables.net/release-datatables/examples/api/multi_filter_select.html) )上查看 Datatable 插件网站时，很明显你走错了路。

以下是他们`<SELECT>`为完成数据表中列的数据过滤而添加的内容：

```
(function($) {
/*
 * Function: fnGetColumnData
 * Purpose:  Return an array of table values from a particular column.
 * Returns:  array string: 1d data array
 * Inputs:   object:oSettings - dataTable settings object. This is always the last argument past to the function
 *           int:iColumn - the id of the column to extract the data from
 *           bool:bUnique - optional - if set to false duplicated values are not filtered out
 *           bool:bFiltered - optional - if set to false all the table data is used (not only the filtered)
 *           bool:bIgnoreEmpty - optional - if set to false empty values are not filtered from the result array
 * Author:   Benedikt Forchhammer <b.forchhammer /AT\ mind2.de>
 */
$.fn.dataTableExt.oApi.fnGetColumnData = function ( oSettings, iColumn, bUnique, bFiltered, bIgnoreEmpty ) {
    // check that we have a column id
    if ( typeof iColumn == "undefined" ) return new Array();

    // by default we only want unique data
    if ( typeof bUnique == "undefined" ) bUnique = true;

    // by default we do want to only look at filtered data
    if ( typeof bFiltered == "undefined" ) bFiltered = true;

    // by default we do not want to include empty values
    if ( typeof bIgnoreEmpty == "undefined" ) bIgnoreEmpty = true;

    // list of rows which we're going to loop through
    var aiRows;

    // use only filtered rows
    if (bFiltered == true) aiRows = oSettings.aiDisplay;
    // use all rows
    else aiRows = oSettings.aiDisplayMaster; // all row numbers

    // set up data array   
    var asResultData = new Array();

    for (var i=0,c=aiRows.length; i<c; i++) {
        iRow = aiRows[i];
        var aData = this.fnGetData(iRow);
        var sValue = aData[iColumn];

        // ignore empty values?
        if (bIgnoreEmpty == true && sValue.length == 0) continue;

        // ignore unique values?
        else if (bUnique == true && jQuery.inArray(sValue, asResultData) > -1) continue;

        // else push the value onto the result data array
        else asResultData.push(sValue);
    }

    return asResultData;
}}(jQuery));

function fnCreateSelect( aData )
{
    var r='<select><option value=""></option>', i, iLen=aData.length;
    for ( i=0 ; i<iLen ; i++ )
    {
        r += '<option value="'+aData[i]+'">'+aData[i]+'</option>';
    }
    return r+'</select>';
}

$(document).ready(function() {
    /* Initialise the DataTable */
    var oTable = $('#example').dataTable( {
        "oLanguage": {
            "sSearch": "Search all columns:"
        }
    } );

    /* Add a select menu for each TH element in the table footer */
    $("tfoot th").each( function ( i ) {
        this.innerHTML = fnCreateSelect( oTable.fnGetColumnData(i) );
        $('select', this).change( function () {
            oTable.fnFilter( $(this).val(), i );
        } );
    } );
} ); 
```

# android - 录制时获取输入流

> ID：15765470
> 
> 赞同：3
> 
> 时间：2013-04-02T13:32:21.140
> 
> 标签：android, video, video-streaming, inputstream, mediarecorder

是否可以以任何方式从媒体记录器获取输入流（创建输出视频文件）？我有一个采用 2 个参数的方法（视频文件的两个输入流）。我想将第二个附加到第一个。我做了这个，但是有点慢。我想发送数据以附加到我的第一个视频，同时录制（或直接输入流，如果不是某种填充然后发送的缓冲区）。这可能吗？我查看了 android.media.MediaRecorder 的源代码，但启动函数只是对`public void native start()`. 停止方法是一样的，我无法想象视频是在哪里创建的。是本地完成的吗？我可以获取流吗？

# ssrs-2008 - 如何在 SQL 中按不同日期范围对记录进行分组？

> ID：15765474
> 
> 赞同：0
> 
> 时间：2013-04-02T13:32:32.640
> 
> 标签：ssrs-2008, reporting-services

使用 SSRS 2008，我需要按 25 天的销售额分组，并需要在折线图中反映相同的情况。以便 X 轴包含日期差异，例如。1 月 13 日 1 日至 25 日，13 年 1 月 26 日至 2 月 19 日，依此类推，直到标量 @endate...，y 轴代表实现的对应销售额。我已经按周和月分组并意识到这一点，但是当它相差 25 天时，我有点困惑。对此的任何提示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:26:16.550

要在报告级别执行此操作，您可以创建一个计算列来对各个日期进行分组。我使用了以下表达式：

```
=DateAdd(DateInterval.Day
  , 25 * Floor
    (
      (DateDiff(DateInterval.Day, CDate("01-Jan-2013"), Fields!date.Value)
      / 25)
    )
  , CDate("01-Jan-2013")) 
```

基本上，它计算自年初以来每个日期的天数，将其除以 25 并向下舍入，然后使用这个新数字来计算该期间的开始日期。

我已经在年初日期进行了硬编码，但您可以轻松地基于此参数或表达式。

这给出了一些样本数据的以下结果：

![在此处输入图像描述](https://i.stack.imgur.com/Ia18o.png)

您可以看到他们的分组日期值符合预期。基于此，您也可以在图表中轻松地将它们组合在一起。

**评论后编辑**

也许你可以仔细检查你的表情？我认为在数据集中设置计算字段比直接在图表中设置更容易 - 然后很容易将结果放在表格中以查看一切是否正常。我根据相同的表达式扩展了上面的示例。我添加了另外两个计算字段，一个用于组结束日期：

```
=DateAdd(DateInterval.Day, 24, Fields!groupDate.Value) 
```

还有一个用于创建格式良好的组标签：

```
=Format(Fields!groupDate.Value, "dd-MMM")
  & " - "
  & Format(Fields!groupDateEnd.Value, "dd-MMM") 
```

基于这些，我添加了一个具有以下类别/系列的图表：

![在此处输入图像描述](https://i.stack.imgur.com/UXZRm.png)

最终结果，按要求分组：

![在此处输入图像描述](https://i.stack.imgur.com/5DUs3.png)

或者，您也可以在数据库级别执行此操作，假设那是您的数据源；只需将分组表达式更改为等效的 T-SQL：

```
with groupDates as
(
  select *
    , groupDate = dateadd(dd, 25 * (datediff(dd, '01-jan-2013', date) / 25), '01-jan-2013')
  from departments
)
select department
  , groupDate
  , groupDateEnd = dateadd(dd, 24, groupDate)
  , groupValue = sum(value)
from groupDates
group by department
  , groupDate
order by department 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/82841/2)。

# jquery - 在 AppMobi (jQMobi - Intel XDK) 中用另一个导航栏替换垂直侧导航栏

> ID：15765475
> 
> 赞同：1
> 
> 时间：2013-04-02T13:32:33.987
> 
> 标签：jquery, jquery-mobile, web-applications, appmobi, jqmobi

我正在使用带有两个侧边栏的 AppMobi（基于 jQMobi 而不是 jQMobile 的库）开发一个 Web 应用程序。当我点击尊敬的按钮时，每个侧边栏都会显示。

按钮代码：

```
<a id='button1' href="javascript:;" onclick='showMenu1()' class='icon folder' style='float:left' >Menu 1</a>
    <script>
    function showMenu1() {
            $("#menu2").html("#menu1");
    }
</script>

<a id='button2' href="javascript:;" onclick='showMenu2()' class='icon folder' style='float:left' >Menu 2</a>
    <script>
    function showMenu2() {
            $("#menu1").html("#menu2");
    }
</script> 
```

侧边导航栏代码：

```
<nav id="menu1" >
    <div class="icon star" >Node 1</div>
        <ul>
        <li><a href="#" >Sub-node 1</a></li>
        <li><a href="#" >Sub-node 2</a></li>
        <li><a href="#"  >Sub-node 3</a></li>
    </ul>
</nav>

<nav id="menu2" >
    <div class="icon star" >Node 1</div>
        <ul>
        <li><a href="#" >Sub-node 1</a></li>
        <li><a href="#" >Sub-node 2</a></li>
        <li><a href="#"  >Sub-node 3</a></li>
    </ul>
</nav> 
```

点击有效，但“html”功能无效。问题是什么 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:36:32.593

HTML / 按钮 1 / 菜单 2

```
<a id='button1' href="#" class='icon folder' style='float:left' >Menu 1</a> 
```

代码

```
$('a#button1').on('click', function () {
 $("#menu2").html("#menu1");
}); 
```

HTML / 按钮 2 / 菜单 1

```
<a id='button2' href="#" class='icon folder' style='float:left' >Menu 1</a> 
```

代码

```
$('a#button2').on('click', function () {
 $("#menu1").html("#menu2");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T08:45:14.027

你试过这个吗？

```
$('a#button1').bind('click',function () {

  //your functions

}); 
```

# sql-server - 基于另一个增加 SQL 列

> ID：15765484
> 
> 赞同：2
> 
> 时间：2013-04-02T13:33:04.707
> 
> 标签：sql-server

鉴于我有这样的查询：

```
select employeeid as id, department as dep from employee where department in (...) 
order by department 
```

我想要一个额外的列，每 3 个部门递增一次，以便结果看起来像这样：

```
id dep        magic
1  Accounting 0
30 Accounting 0
66 HR         0
67 HR         0
33 HR         0
2  Sales      0
9  IT         1
12 R&D        1
19 Design     1
45 QA         2
46 QA         2 
```

我已经尝试过各种行号函数，over() 和其他巫术，但我似乎无法做到正确。希望你能帮我解决这个问题！

编辑：所以这并不像我希望的那样直截了当。上面的例子可能没有捕捉到我的案例中涉及的所有问题。所以这是我正在运行的真正查询：

```
select    sdi.sdcid
         ,sdi.keyid1
         ,sdi.paramlistid
         ,sdi.paramlistversionid
         ,sdi.variantid
         ,sdi.dataset
         ,sdi.paramid
         ,sdi.paramtype
         ,sdi.replicateid
         ,sd.sdidataid
        --(ROW_NUMBER() over(order by sd.sdidataid asc) -1) /3 partition
         from sdidataitem sdi
         left join sdidata sd on 
         sdi.keyid1 = sd.keyid1 
         and sdi.keyid2 = sd.keyid2 
         and sdi.keyid3 = sd.keyid3 
         and sdi.paramlistid = sd.paramlistid 
         and sdi.paramlistversionid = sd.paramlistversionid 
         and sdi.variantid = sd.variantid 
         and sdi.dataset = sd.dataset 
         where sd.sdidataid in (select top 30 sdidataid from sdidata) 
         and sdi.u_analysserieid is null
         order by sd.sdidataid asc 
```

当我使用分区列运行查询时，出现以下错误：`Cannot find either column "sd" or the user-defined function or aggregate "sd.sdidataid", or the name is ambiguous.` 这是创建所涉及的两个表的代码：

```
CREATE TABLE [lv2056d].[sdidata]  ( 
[sdcid]                     nvarchar(40) NOT NULL,
[keyid1]                    nvarchar(40) NOT NULL,
[keyid2]                    nvarchar(40) NOT NULL,
[keyid3]                    nvarchar(40) NOT NULL,
[paramlistid]               nvarchar(40) NOT NULL,
[paramlistversionid]        nvarchar(40) NOT NULL,
[variantid]                 nvarchar(40) NOT NULL,
[dataset]                   numeric(18,0) NOT NULL,
[limitruleid]               nvarchar(40) NULL,
[limitruleversionid]        nvarchar(40) NULL,
[modifiableflag]            nvarchar(1) NULL,
[approvalsequenceflag]      nvarchar(1) NULL,
[approvalpassrule]          nvarchar(20) NULL,
[condition]                 nvarchar(80) NULL,
[availabilityflag]          nvarchar(1) NULL,
[workflowid]                nvarchar(40) NULL,
[workflowversionid]         nvarchar(40) NULL,
[workflowinstance]          numeric(18,0) NULL,
[usersequence]              numeric(18,0) NULL,
[notes]                     nvarchar(2000) NULL,
[auditsequence]             numeric(18,0) NULL,
[auditdeferflag]            nvarchar(1) NULL,
[tracelogid]                nvarchar(40) NULL,
[createdt]                  datetime NULL,
[createby]                  nvarchar(40) NULL,
[createtool]                nvarchar(20) NULL,
[moddt]                     datetime NULL,
[modby]                     nvarchar(40) NULL,
[s_datasetstatus]           nvarchar(20) NULL,
[modtool]                   nvarchar(20) NULL,
[s_notebookreference]       nvarchar(20) NULL,
[s_assignedanalyst]         nvarchar(40) NULL,
[s_instrumentid]            nvarchar(40) NULL,
[s_icoverriddenflag]        nvarchar(1) NULL,
[s_retestedflag]            nvarchar(1) NULL,
[s_remeasuredflag]          nvarchar(1) NULL,
[s_remeasureinstance]       numeric(18,0) NULL,
[s_qcbatchid]               nvarchar(40) NULL,
[s_qcbatchitemid]           nvarchar(20) NULL,
[trackitemid]               nvarchar(40) NULL,
[scheduleplanid]            nvarchar(40) NULL,
[scheduleplanitemid]        nvarchar(40) NULL,
[uniquenessflag]            nvarchar(1) NULL,
[approvalflag]              nvarchar(1) NULL,
[sdidataid]                 nvarchar(40) NULL,
[sourceworkitemid]          nvarchar(40) NULL,
[sourceworkiteminstance]    numeric(18,0) NULL,
[s_cancellableflag]         nvarchar(1) NULL,
[documentid]                nvarchar(40) NULL,
[documentversionid]         nvarchar(40) NULL,
[blockflag]                 nvarchar(1) NULL,
[activeflag]                nvarchar(1) NULL,
[s_assigneddepartment]      nvarchar(40) NULL,
[s_instrumentusedflag]      nvarchar(1) NULL,
CONSTRAINT [xpksdidata] PRIMARY KEY CLUSTERED([sdcid],[keyid1],[keyid2],[keyid3],[paramlistid],[paramlistversionid],[variantid],[dataset]))
GO
CREATE TABLE [lv2056d].[sdidataitem]  ( 
[sdcid]                 nvarchar(40) NOT NULL,
[keyid1]                nvarchar(40) NOT NULL,
[keyid2]                nvarchar(40) NOT NULL,
[keyid3]                nvarchar(40) NOT NULL,
[paramlistid]           nvarchar(40) NOT NULL,
[paramlistversionid]    nvarchar(40) NOT NULL,
[variantid]             nvarchar(40) NOT NULL,
[dataset]               numeric(18,0) NOT NULL,
[paramid]               nvarchar(40) NOT NULL,
[paramtype]             nvarchar(80) NOT NULL,
[replicateid]           numeric(18,0) NOT NULL,
[aliasid]               nvarchar(80) NULL,
[mandatoryflag]         nvarchar(1) NULL,
[datatypes]             nvarchar(20) NULL,
[enteredvalue]          numeric(28,10) NULL,
[enteredtext]           nvarchar(255) NULL,
[enteredunits]          nvarchar(40) NULL,
[operatorrule]          nvarchar(255) NULL,
[transformvalue]        numeric(28,10) NULL,
[transformdt]           datetime NULL,
[transformtext]         nvarchar(255) NULL,
[transformrule]         nvarchar(4000) NULL,
[displayvalue]          nvarchar(255) NULL,
[displayunits]          nvarchar(40) NULL,
[displayformat]         nvarchar(255) NULL,
[rangeoperator]         nvarchar(20) NULL,
[enteredqualifier]      nvarchar(20) NULL,
[entrysdcid]            nvarchar(40) NULL,
[entryreftypeid]        nvarchar(40) NULL,
[calcrule]              nvarchar(4000) NULL,
[measurementactionid]   nvarchar(40) NULL,
[releasedflag]          nvarchar(1) NULL,
[valuestatus]           nvarchar(20) NULL,
[condition]             nvarchar(80) NULL,
[transformdeferflag]    nvarchar(1) NULL,
[textcolor]             numeric(18,0) NULL,
[usersequence]          numeric(18,0) NULL,
[notes]                 nvarchar(2000) NULL,
[auditsequence]         numeric(18,0) NULL,
[auditdeferflag]        nvarchar(1) NULL,
[tracelogid]            nvarchar(40) NULL,
[createdt]              datetime NULL,
[createby]              nvarchar(40) NULL,
[createtool]            nvarchar(20) NULL,
[moddt]                 datetime NULL,
[modby]                 nvarchar(40) NULL,
[modtool]               nvarchar(20) NULL,
[s_acoverriddenflag]    nvarchar(1) NULL,
[s_analystid]           nvarchar(40) NULL,
[s_qcevalstatus]        nvarchar(20) NULL,
[displayvalueformat]    nvarchar(255) NULL,
[calcexcludeflag]       nvarchar(1) NULL,
[sdidataitemid]         nvarchar(40) NULL,
[instrumentid]          nvarchar(40) NULL,
[instrumentfieldid]     nvarchar(20) NULL,
[activeflag]            nvarchar(1) NULL,
[externalreference]     nvarchar(255) NULL,
[resulttimeoffset]      numeric(28,10) NULL,
[u_analysserieid]       nvarchar(20) NULL,
[u_showindataentry]     nvarchar(20) NULL,
[w_instrumentid]        nvarchar(20) NULL,
[u_defvalset]           nvarchar(20) NULL,
CONSTRAINT [xpksdidataitem] PRIMARY KEY CLUSTERED([sdcid],[keyid1],[keyid2],[keyid3],[paramlistid],[paramlistversionid],[variantid],[dataset],[paramid],[paramtype],[replicateid]))
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:37:51.510

您可以只使用 (ROW_NUMBER() OVER ...) / 3

```
select employeeid as id, department as dep , 
(row_number() over (order by department asc) -1) /3 partition
from employee 
where department in (...) 
order by department 
```

关于您的查询。1）你似乎在第一个字段之后错过了逗号 2）如果你真的加入表格，最好使用 join，只是为了清楚起见

```
select sd.sdidataid, (ROW_NUMBER() over(order by sd.sdidataid asc) -1) /3 partition 
from sdidataitem sdi inner join sdidata sd on 
    sdi.keyid1 = sd.keyid1 (... more column restrictions) 
and sdi.dataset = sd.dataset 
where sd.sdidataid in (select top 30 sdidataid from sdidata) 
and sdi.u_analysserieid is null 
order by sd.sdidataid asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:43:53.190

```
Declare @tab table (id int,dep varchar(50))
insert into @tab Values(1,'Accounting'),(2,'Accounting'),(3,'Accounting'),(4,'AAA'),(5,'BBB'),(6,'ccc'),(7,'ddd'),(8,'eee'),(9,'fff');

Select t.*,a.Magic
from @tab t
join
(
Select dep,(ROW_NUMBER() over (order by dep) -1)/3 as Magic
from @tab
group by dep
) a on a.dep=t.dep
order by t.dep 
```

# android - Java 编译器错误：找不到 (SINGLE_CHOICE_MODE)；

> ID：15765489
> 
> 赞同：3
> 
> 时间：2013-04-02T13:33:24.783
> 
> 标签：android

这是我的代码片段：

```
import android.app.Activity;
import android.app.Bundle;
import android.app.ListActvity;
import android.app.ListView;
import android.app.AbsListView;
import android.app.AdapterView;
....

public class MyDemo extends ListActivity {
    @Override public void onCreate(Bundle icicle) {
        ListView myLV = (ListView) findViewByID(R.id.ListView1);
        myLV.setChoiceMode(SINGLE_CHOICE_MODE); 
    }
} 
```

当我尝试编译时，javac 报告错误：找不到符号 SINGLE_CHOICE_MODE。有任何想法吗？我没有导入正确的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:36:09.063

`CHOICE_MODE_SINGLE`常量是类的成员`ListView`。正确用法：

```
myLV.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:37:13.790

您必须调用正确的常量，即[`CHOICE_MODE_SINGLE`](https://developer.android.com/reference/android/widget/AbsListView.html#CHOICE_MODE_SINGLE).

# android - 在模拟器中运行已完成，但在平板电脑中，编译时出现错误，即没有这样的表 select * from table

> ID：15765490
> 
> 赞同：0
> 
> 时间：2013-04-02T13:33:27.050
> 
> 标签：android, sqlite, android-emulator

我是在 android(eclipse) 中创建应用程序的新手。现在我正在开发一个帐户跟踪器应用程序，但是当我在平板电脑上打开我的应用程序时出现问题，但在 android 模拟器中它可以正常工作。

错误是：**编译时没有这样的表 select * from table name。**

请告诉我为什么这个错误只发生在平板电脑上而不是在 Eclipse 模拟器中。

这是我的代码：

```
try
{
  db= SQLiteDatabase.openDatabase("sdcard/tracker.db",null,SQLiteDatabase.CREATE_IF_NECESSARY);
            Cursor c1 = db.rawQuery("select * from add_transaction",null);  
            int theTotal= c1.getCount();
            Toast.makeText(this, "Total: "+ theTotal, 1).show();
            String[] args= {"acc_no","trans_type","amount"};

  int acc_no_transCol= c1.getColumnIndex("acc_no");
  int trans_typeCol= c1.getColumnIndex("trans_type");
  int amountCol = c1.getColumnIndex("amount");
  TextView t1=null;

  while(c1.moveToNext()) {
    t1=new TextView(getApplicationContext());
    t1.setText("textbox");
    t1.setBackgroundColor(Color.parseColor("#ff009999"));
    l1.addView(t1);

    args[0] = Integer.toString((c1.getInt(acc_no_transCol)));
    args[1] = c1.getString(trans_typeCol);
    args[2] = Float.toString((c1.getFloat(amountCol)));

    t1.append("\nAccount Number: "+ args[0]+"\nTransaction Type: "+args[1]+"\nCurrent Balance: "+args[2]+"\n");
    //advance to the next record (first rec. if necessary)
  }
}  
catch (Exception e)
{
  Toast.makeText(getApplicationContext(),e.getMessage(), 
                  Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:25:07.933

```
package com.account;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Color;
import android.os.Bundle;
//import android.view.View;
//import android.view.View.OnClickListener;
import android.widget.*;

public class recent_trans extends Activity {
    TextView curr_user;
    //TextView data;
    Button logout, cancel;
    ImageButton home;
    SQLiteDatabase db;
    String[] name;
    LinearLayout l1;

     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.recent_trans);

            db = openOrCreateDatabase("tracker.db", SQLiteDatabase.CREATE_IF_NECESSARY, null);
            Toast.makeText(getApplicationContext(), "Database Is Created Successfully...", Toast.LENGTH_LONG).show();

           l1 = (LinearLayout)findViewById(R.id.layout1); 
           curr_user = (TextView)findViewById(R.id.lblcurrent_user);
           //data = (TextView)findViewById(R.id.txt1);
           home = (ImageButton)findViewById(R.id.img_btn_home);
           logout = (Button)findViewById(R.id.btnlogout);
           cancel = (Button)findViewById(R.id.btncancel);

            Intent myLocalIntent= getIntent();
            Bundle myBundle= myLocalIntent.getExtras();
            String v1 = myBundle.getString("uname");
            curr_user.setText(v1);

            db= SQLiteDatabase.openDatabase("sdcard/tracker.db",null,SQLiteDatabase.CREATE_IF_NECESSARY);
            **try
            {

                db.execSQL("CREATE TABLE add_transaction(acc_no INTEGER,trans_type TEXT,date DATE,amount FLOAT,cheque_no INTEGER,party_name VARCHAR(20),detail VARCHAR(200));");
                Toast.makeText(getApplicationContext(), "Table Is Created Successfully....", Toast.LENGTH_LONG).show();
            }
            catch(Exception ex)
            {
                Toast.makeText(getApplicationContext(), "Table Is Already Exists.....", Toast.LENGTH_LONG).show();
            }**

     try
     {

            //db = openOrCreateDatabase("tracker.db", SQLiteDatabase.CREATE_IF_NECESSARY, null);

            Cursor c1 = db.rawQuery("select * from add_transaction",null);  
            int theTotal= c1.getCount();
            Toast.makeText(this, "Total: "+ theTotal, 1).show();
            String[] args= {"acc_no","trans_type","amount"};
            //Cursor c1= db.rawQuery(mySQL,null);

            int acc_no_transCol= c1.getColumnIndex("acc_no");
            int trans_typeCol= c1.getColumnIndex("trans_type");
            int amountCol = c1.getColumnIndex("amount");
            TextView t1=null;

            while(c1.moveToNext()) {

                    t1=new TextView(getApplicationContext());
                    t1.setText("textbox");
                    t1.setBackgroundColor(Color.parseColor("#ff009999"));
                    l1.addView(t1);

                args[0] = Integer.toString((c1.getInt(acc_no_transCol)));
                args[1] = c1.getString(trans_typeCol);
                args[2] = Float.toString((c1.getFloat(amountCol)));

                t1.append("\nAccount Number: "+ args[0]+"\nTransaction Type: "+args[1]+"\nCurrent Balance: "+args[2]+"\n");
            //advance to the next record (first rec. if necessary)
            }

     }  

     catch (Exception e)
     {
         Toast.makeText(getApplicationContext(),e.getMessage(), Toast.LENGTH_LONG).show();
     }

    /* home.setOnClickListener(new OnClickListener(){

        public void onClick(View v) 
        {
            // TODO Auto-generated method stub

            Intent in = new Intent(getApplicationContext(), AccountTrackerActivity.class);
            startActivity(in);
            }
     });*/
     }

} 
```

# android - 如何从android中的图库中选择视频图像

> ID：15765494
> 
> 赞同：-1
> 
> 时间：2013-04-02T13:33:34.880
> 
> 标签：android, android-gallery

我有一个问题，我想从 Android 中的图库中选择图像和视频，我使用了以下代码但不成功。

1.  `setType("*/*);`
2.  `setType("video/*");`
3.  `setType("image/*");`
4.  `setType("image/* , video/*");`
5.  `setType("image/* video/*");`
6.  `Intent = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI); startActivityForResult(intent, 1);`
7.  `Intent i= new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI); i.setType("*/*"); startActivityForResult(i, RESULT_LOAD_IMAGE);`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-25T11:18:39.003

```
Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
photoPickerIntent.setType("image/*,video/*");
startActivityForResult(photoPickerIntent, SELECT_PHOTO); 
```

你会在[这个问题上找到更多细节。](https://stackoverflow.com/questions/2507898/how-to-pick-an-image-from-gallery-sd-card-for-my-app-in-android?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-18T11:36:59.813

```
 case SELECT_IMAGE:
            intent = createGetFileIntent(SELECT_IMAGE, "image/*");
            startForResult(intent, 0);
            break;
        case SELECT_VIDEO:
            intent = createGetFileIntent(SELECT_VIDEO, "video/*");
            startForResult(intent, 1);
            break;

    private Intent createGetFileIntent(int fileType,
                                   String mimeType) {
    Intent intent = new Intent(Intent.ACTION_PICK);

    if (android.os.Build.VERSION.SDK_INT >= 11) {
        intent.putExtra(Intent.EXTRA_LOCAL_ONLY, true);
    }

    intent.setType(mimeType);

    switch (fileType) {
        case SELECT_IMAGE:
            intent = Intent.createChooser(intent, getString(R.string.title_select_image));
            break;
        case SELECT_VIDEO:
            intent = Intent.createChooser(intent, getString(R.string.title_select_video));
            break;
        default:
            break;
    }

    return intent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-08T05:38:09.213

下面的代码可以让我在片段中加载视频：

```
private void loadVideo(){
    Intent intent = new Intent();
    intent.setType("video/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select Video"), LOAD_TESTING_VIDEO);
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
   if (resultCode == RESULT_OK) {
       if (requestCode == LOAD_TESTING_VIDEO) {
           // Get the Video from data
           Uri selectedVideo = data.getData();
           String[] filePathColumn = {MediaStore.Video.Media.DATA};
           Cursor cursor = getActivity().getContentResolver().query(selectedVideo, filePathColumn, null, null, null);
           if (cursor != null) {
               cursor.moveToFirst();
               int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
               mediaPath1 = cursor.getString(columnIndex);
               //uptestVideoName is a EditText
               upTestVideoName.setText(mediaPath1);
               cursor.close();
           }
        }
    }
} 
```

# android - Android中WebView上的HTML5内联视频回调

> ID：15765496
> 
> 赞同：1
> 
> 时间：2013-04-02T13:33:40.037
> 
> 标签：android, html, android-webview, html5-video

在 android webview 中，我设置了 web chrome 客户端并启用了硬件加速。在我的网页中，我有一个 html5 视频（内联）。当正在播放视频并按下主页按钮时，视频不会暂停，从而给用户带来糟糕的用户体验。如何在不破坏 webview 实例的情况下暂停所有正在播放的视频？

PS 请不要发布 JS 解决方案，因为我无法访问 JS 层（以及也有视频的 iframe）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T07:04:20.480

使用此代码

```
@Override
public void onShowCustomView(View view, CustomViewCallback callback) {
    super.onShowCustomView(view, callback);
    if (view instanceof FrameLayout){
        FrameLayout frame = (FrameLayout) view;
        if (frame.getFocusedChild() instanceof VideoView){
            VideoView video = (VideoView) frame.getFocusedChild();
            frame.removeView(video);
            a.setContentView(video);
            video.setOnCompletionListener(this);
            video.setOnErrorListener(this);
            video.start();
        }`enter code here`
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:26:07.663

默认情况下，WebView 不提供类似浏览器的小部件，不启用 JavaScript 并且忽略网页错误。如果您的目标只是将一些 HTML 显示为 UI 的一部分，这可能没问题；除了阅读网页之外，用户不需要与网页进行交互，并且网页也不需要与用户进行交互。如果您确实想要一个成熟的 Web 浏览器，那么您可能希望使用 URL Intent 调用 Browser 应用程序，而不是使用 WebView 显示它

[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:59:41.353

您可以尝试拦截视频流并使用媒体播放器类显示它。之后，您将可以访问流媒体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T12:25:12.530

我有这个问题，现在我有一个简单而明确的答案。这假设您的 webview 对象是活动或活动片段中的字段（成员、属性等）。

*   在activity的onPause()中，调用webview.onPause()；
*   在activity的onResume()中，调用webview.onResume()；

我在 stackoverflow 的其他地方得到的 onPause() 位。需要 onResume 来重新建立 webview 对视频对象的引用。如果你不这样做，如果你在前台应用程序时再次播放视频，你最终会遇到同样的问题。

# bash - 从 Bash 导出变量

> ID：15765500
> 
> 赞同：2
> 
> 时间：2013-04-02T13:33:43.990
> 
> 标签：bash, bash, osx, bash

在[bash](/questions/tagged/bash "显示标记为“bash”的问题")我有一个应该**导出**一些变量的函数，但它没有。

这里有一个*例子*：

```
function f() {

  # ...
  declare -rx TIMESTAMP_FORMAT='+%Y-%m-%d %H:%M:%S'
  # ...

} 
```

从内部执行此操作的正确方法是什么`function`？

* * *

### 我的环境

[bash](/questions/tagged/bash "显示标记为“bash”的问题") **v3.2.48(1)-发布** [osx](/questions/tagged/osx "显示标记为“osx”的问题") **10.8.3**

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:37:07.537

将变量声明为全局使用选项`-g`。像这样：

```
function f() {

  # ...
  declare -grx TIMESTAMP_FORMAT='+%Y-%m-%d %H:%M:%S'
  # ...

} 
```

引自`help declare`：

> -d 在 shell 函数中使用时创建全局变量；否则忽略

* * *

**更新**阅读您的最后一条评论后：

> 在函数之外可用，在子shell中可用

...看起来`export`是您正在寻找的命令。检查这个例子：

```
function foo {
    export BAR="test"
}

# call function
foo

# will output 'test'
echo "$BAR"

# as the var is in environemt:
export -p | grep "BAR"

# ... it will be available from sub shells as well 
```

注意：该`export`解决方案缺少`-r`声明中的（只读）功能。如果你能忍受这个，`export`应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:47:59.323

不要使用声明，您的变量也将在函数外部可用。

```
function f() {
  # ...
  TIMESTAMP_FORMAT='+%Y-%m-%d %H:%M:%S'
  # ...
}

f # call your function
echo "OUTSIDE: " $TIMESTAMP_FORMAT 
```

# jquery - 具有响应高度和宽度的 jQuery Cycle2 幻灯片

> ID：15765501
> 
> 赞同：2
> 
> 时间：2013-04-02T13:33:44.097
> 
> 标签：jquery, html, css, responsive-design, jquery-cycle

我正在尝试使用 jQuery Cycle2 插件创建一个图像幻灯片，该插件将响应，调整到浏览器的宽度*和*高度。我能够使用[Auto Height功能中的](http://www.malsup.com/jquery/cycle2/demo/autoheight.php)[Dynamic Container Sizing](http://www.malsup.com/jquery/cycle2/demo/container-resize.php)文档来使宽度正常工作。

[请参阅我在此处](http://jsfiddle.net/approach/GGU7m/1/)制作的小提琴，这是我正在处理的网站构建的简化表示。

是否有可能以某种方式给出 div 的`max-height:100%;`幻灯片`.cycle-slideshow`？

从广义上讲，我面临的问题是长肖像图像并不真正适合我的网站设计，用户必须滚动才能看到完整的图像，这并不好。

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-21T05:03:16.717

这个有点晚了，但我会试一试。

假设所有图像的高度不同：这是一个小技巧，即使使用不同尺寸的图像，也可以始终保持容器大小相同。

**伪术语：**

1.  使您的图像成为幻灯片的“背景”，而不是放置在其中。
2.  在 CSS 中添加 {background-size:cover}。
3.  使用 Cycle2 的自定义模板来启动它。（黑客？嗯，不是真的）

**让我们得到一些新的 CSS 规则：**

```
.cycle-overlay {
    position:absolute;
    bottom:auto;
    top:0;
    left:0;
    width:100%;
    height:100%;
    z-index:0;
    background:#333;
    padding:0;
    opacity:1
}
.banner-background {
    width:100%;
    height:100%;
    background-position:center;
    background-size:cover;
    position:absolute;
    top:0;
    left:0;
    z-index:10;
}
.cycle-slideshow {
    width:100%;
    max-height:400px;
    background-position:center;
    background-size:cover;
    color:#fff;
    overflow:hidden;
} 
```

**的HTML**

```
<div class="cycle-slideshow" 
  data-cycle-slides='li' 
  data-cycle-fx='scrollHorz' 
  data-cycle-speed='700' 
  data-cycle-timeout='7000'    
  data-cycle-overlay-template="<div class=banner-background style=background-image:url(http://domain.tld/images/{{background}})></div>" 
>
    <ul>
       <li data-cycle-background="slide1.jpg"></li>
       <li data-cycle-background="slide2.jpg"></li>
       <li data-cycle-background="slide3.jpg"></li>
    </ul>
    <div class="cycle-overlay"></div>
        </div> 
```

**JS**

```
$('.cycle-slideshow').on('cycle-before', function (opts) {
    var slideshow = $(this);
    var img = slideshow.find('.banner-background').css('background-image');
    slideshow.css('background-image', img);
}); 
```

* * *

假设你所有的图像都是相同的高度：几个月前我写了一个关于将 animate.css 与[Cycle2集成的示例](http://www.malsup.com/jquery/cycle2/)

这不是您要查找的内容，但该示例提供了全角自动高度解决方案。

查看代码，您将获得所需的内容。

**[在这里](http://jsfiddle.net/defonic/npqB5 "jQuery Cycle2 + animate.css 字幕转换")拉小提琴！**

另外，请记住，使用[Cycle2](http://www.malsup.com/jquery/cycle2/) 您需要将额外的插件添加到幻灯片中心[jquery.cycle2.center.js](http://www.malsup.com/jquery/cycle2/demo/center.php)

希望这会有所帮助，干杯！

# ruby-on-rails - 为什么 nginx 在开发环境中为我的 Rails 应用程序提供服务的速度非常慢？

> ID：15765506
> 
> 赞同：4
> 
> 时间：2013-04-02T13:33:55.443
> 
> 标签：ruby-on-rails, nginx, rack

我正在 mac OSX 上开发一个 RoR 应用程序。

为了能够访问我的应用程序`http://localhost`，并且为了在我的测试中支持 SSL，我使用 nginx 作为我的 Webrick 端口 3000 的代理，配置如下：

```
server {
    listen 80;
    server_name app.mysite.com;
    location / {
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_redirect off;
        proxy_pass http://127.0.0.1:3000;
    }
}

server {
    listen       443 ssl;
    server_name  secure.app.mysite.com;

    ssl                  on;
    ssl_certificate      ssl/server.crt;
    ssl_certificate_key  ssl/server.key;

    keepalive_timeout 600;
    ssl_session_timeout 10m;
    ssl_protocols  SSLv2 SSLv3 TLSv1;
    ssl_ciphers  ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
    ssl_prefer_server_ciphers   on;

    location / {
        proxy_pass http://127.0.0.1:3000;
        ### force timeouts if one of backend is died ##
        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503;
        ### Set headers ####
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        ### Most PHP, Python, Rails, Java App can use this header ###
        proxy_set_header X-Forwarded-Proto https;
        ### By default we don't want to redirect it ####
        proxy_redirect     off;
   }
} 
```

当我在其中一个上访问应用程序`http://localhost/`或`https://localhost/` 服务器快速响应时，开销`http://localhost:3000`可以忽略不计。

但是，当我尝试从同一网络上的另一台计算机（例如`http://10.0.1.9/`）访问我的机器时，服务器的响应非常缓慢，或者根本没有响应。

在这种情况下，似乎 nginx 甚至没有向端口 3000 发送内部请求，尽管请求肯定是从外部到达 nginx 的，并且从外部对端口 3000 的请求非常快。

重要的是要注意我的应用程序在开发模式下运行，并且我的资产（相当多）没有预编译。

除了 nginx 之外，还有其他选择可以轻松地在我的网络上公开我的开发站点，即易于配置并支持 SSL？

谢谢，爱丽儿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:51:40.013

原来这是nginx的权限问题。我在 nginx 错误日志中发现错误后发现它。

解决方案可以在这里找到

[https://serverfault.com/questions/235154/permission-denied-while-reading-upstream](https://serverfault.com/questions/235154/permission-denied-while-reading-upstream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:35:44.590

我敢打赌它根本不是 nginx。很难想象 nginx 会在传递到同一服务器上的上游之前将请求保留很长时间。您能否检查两个访问日志（nginx 和 ROR）以查看请求开始时间是否不同？

你的osx是哪个版本的？是狮子还是山狮？两者都存在使用 /etc/hosts 中的条目进行慢速 dns 查找的问题。

我的同事也经历了同样的缓慢。有关讨论，请参阅[Mac OSX Lion DNS 查找顺序](https://stackoverflow.com/questions/6841421/mac-osx-lion-dns-lookup-order)。有点乱

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:23:28.923

有几个项目可以尝试，因为使用 localhost 但不能在另一台计算机上正常工作听起来很可疑。

*   还要`'netstat -na | grep 80'`确保 Nginx 正在监听 0.0.0.0 或 *:80 而不是 127.0.0.1。如果 Nginx 没有监听 0.0.0.0 或 * 那么它可能是 TCP 路由问题。任何服务器都一样。这是一个很好的示例输出（我的示例是在 8000 上监听）

    `tcp4 0 0 *.8000 *.* LISTEN`

*   为了好玩，在你的 Nginx 代理语句中将“127.0.0.1”更改为“localhost”和/或“0.0.0.0”（尽管路由将在它到达时完成）

另外，我建议您尝试使用 Nginx 的日志来查看是否还有其他问题。这里已经有一个关于更好的代理/上游日志记录的stackoverflow：[logging proxy activity in nginx](https://stackoverflow.com/questions/9914792/logging-proxy-activity-in-nginx)

此外，您应该打开调试日志（我已经解决了这个问题），将其放在 access_log 指令的下方/上方。这样的事情应该做的很好：

```
 error_log  /Users/your_name/nginx_test/logs/error.log  debug; 
```

请注意，对于 Nginx，您必须为日志使用绝对路径。

祝你好运。

# cython - 在 Cython 的编译时获取整数的大小

> ID：15765509
> 
> 赞同：6
> 
> 时间：2013-04-02T13:34:04.600
> 
> 标签：cython

是否有可能，如果是的话，如何确定 Cython 中整数数据类型的大小（以位为单位）？

我正在尝试做这样的事情，以获得整数大小：

```
cdef WORD_BITS = 0
IF sizeof(unsigned long long) == 8:
    WORD_BITS = 64
    DEF VECTOR_LENGTH_SHIFT_AMOUNT = 6
ELSE:
    WORD_BITS = 32
    DEF VECTOR_LENGTH_SHIFT_AMOUNT = 5

ctypedef unsigned long long word_t

cdef int vector_length(size_t bit_size):

    cdef size_t size = bit_size >> VECTOR_LENGTH_SHIFT_AMOUNT
    if size << VECTOR_LENGTH_SHIFT_AMOUNT < bit_size:
        size += 1
    return size

cdef class BitVector(object):

    cdef size_t length
    cdef size_t array_size
    cdef word_t *array

    def __cinit__(self, size_t size):
        self.length = size
        self.array_size = vector_length(size)
        self.array = <word_t *>calloc(self.array_size, sizeof(word_t))

    def __dealloc__(self):
        free(self.array) 
```

我需要处理数组元素的单个位和元素本身，因此我必须知道它们包含多少位（以计算正确的掩码/移位）。尝试像上面那样编译代码会产生：

```
$python setup.py build_ext --inplace
Compiling bitvector.pyx because it changed.
Cythonizing bitvector.pyx

Error compiling Cython file:
------------------------------------------------------------
...
cimport cython

# check whether we are running on a 64 or 32 bit architecture.
cdef WORD_BITS = 0
IF sizeof(unsigned long long) == 8:
  ^
------------------------------------------------------------

bitvector.pyx:7:3: Invalid compile-time expression

Traceback (most recent call last):
  File "setup.py", line 6, in <module>
    ext_modules=cythonize('bitvector.pyx')
  File "/usr/lib/python2.7/dist-packages/Cython/Build/Dependencies.py", line 673, in cythonize
    cythonize_one(*args[1:])
  File "/usr/lib/python2.7/dist-packages/Cython/Build/Dependencies.py", line 737, in cythonize_one
    raise CompileError(None, pyx_file)
Cython.Compiler.Errors.CompileError: bitvector.pyx 
```

有没有可行的替代方案？

我知道有一个`stdint.h`标题应该定义整数类型，但我想不出一种使用它的方法，因为：

*   我不知道如何检查类型是否*未定义*（例如，您如何`IF uint64_t is not defined:`用 cython 编写？）。
*   Cython 的文档指出只有`DEF`和编译器定义的东西才能在`IF`s 中检查，因此我怀疑我是否能够使用`stdint.h`。

* * *

似乎这在 Cython 中是不可行的，因为我想要进行的检查只能在从 C 编译到机器代码时执行，而不是从 cython 到 C。

现在我想知道：是否可以编写一个 cython 扩展，以便在 C 源代码中添加这种检查？

我的意思是，我能以某种方式写：

```
cdef WORD_BITS = 0
IF sizeof(unsigned long long) == 8:
    WORD_BITS = 64
    DEF VECTOR_LENGTH_SHIFT_AMOUNT = 6
ELSE:
    WORD_BITS = 32
    DEF VECTOR_LENGTH_SHIFT_AMOUNT = 5

ctypedef unsigned long long word_t 
```

以这样的方式，`IF`Cython“没有处理”这个，但是它被传递了，在最终的 C 文件中有等效的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-23T00:26:29.727

而不是使用预处理器来定义大小和移位值，我会`vector_length`稍微改变你的函数，以便它可以`sizeof`直接使用。Cython 将正确翻译运算符，编译器将在*compile-time*`sizeof`替换类型的实际大小。有关使用和获取正确矢量大小的更多信息，请参阅 glibc 文档中的此部分：[https](https://www.gnu.org/software/libc/manual/html_node/Width-of-Type.html) ://www.gnu.org/software/libc/manual/html_node/Width-of-Type.html 。*`sizeof``CHAR_BIT`*

 *```
from libc.stdlib cimport calloc, free
from libc.limits cimport CHAR_BIT

ctypedef unsigned long long word_t

cdef size_t vector_length(size_t bit_size):
    cdef size_t bits_per_word = CHAR_BIT*sizeof(word_t)
    return (bit_size + bits_per_word - 1) / bits_per_word

cdef class BitVector(object):
    cdef size_t length
    cdef size_t array_size
    cdef word_t *array

    def __cinit__(self, size_t size):
        self.length = size
        self.array_size = vector_length(size)
        self.array = <word_t *>calloc(self.array_size, sizeof(word_t))

    def __dealloc__(self):
        free(self.array) 
```

还值得注意的`unsigned long long`是至少 64 位 ( [https://en.wikipedia.org/wiki/C_data_types](https://en.wikipedia.org/wiki/C_data_types) )。您的代码似乎假设它可以*是*64 位或 32 位，但在符合标准的编译器中，它只会是 64 位或更多位。*

# c# - 将 Action 和 Func 结合在一个参数中

> ID：15765513
> 
> 赞同：8
> 
> 时间：2013-04-02T13:34:11.557
> 
> 标签：c#, .net, delegates, action, func

我有许多方法需要一些具有相同模式的日志记录。有些方法需要返回一些值，有些则不需要。我创建了一个带有 Action 参数的方法，以避免复制粘贴所有逻辑。它看起来像这样：

```
private void Execute(Action action)
{
   Logger.Start();
   try
   {
      action();
   }
   catch(Exception exception)
   {
      Logger.WriteException();
      throw;
   }
   finally
   {
       Logger.Finish();
   }
} 
```

现在我有一些这样的电话

```
public void DoSomething(string parameter)
{
    Execute(() => GetProvider(parameter).DoSomething());
} 
```

但我需要一些返回值的函数。最好的方法是什么？我现在找到了两个：

1) 使用 Func 创建 Execute 方法的副本

```
private T Execute<T>(Func<T> action)
{
   Logger.Start();
   try
   {
      return action();
   }
   catch(Exception exception)
   {
      Logger.WriteException();
      throw;
   }
   finally
   {
       Logger.Finish();
   }
} 
```

此方法有效，但也有一些复制粘贴。

2）欺骗参数成为一个动作：

```
public Result DoSomething(string parameter)
{
    Result result = null;
    Execute(() => result = GetProvider(parameter).DoSomething());
    return result;
} 
```

这不需要复制粘贴，但看起来不太好。

有没有办法以某种方式加入 Action 和 Func 以避免这些方法中的任何一种，或者可能有另一种方法来实现相同的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T13:36:44.930

第三种选择仍然是重载`Execute`，但使`Action`版本根据版本工作`Func`：

```
private void Execute(Action action)
{
    // We just ignore the return value here
    Execute(() => { 
        action();
        return 0; 
    });
} 
```

当然，如果`void`更像是“真实”类型（如`Unit`F# 等），这一切都会更简单，此时我们可以只拥有`Task<T>`而不是`Task`and `Task<T>`......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T13:40:21.517

创建一个将`Execute`转换`Func`为`Action`. 您只需要编写一次丑陋的代码，并且您不会得到该`Execute`方法的完整的第二个副本：

```
private T Execute<T>(Func<T> func)
{
    T result = default(T);
    this.Execute(() => { result = func(); });
    return result;
}

...

public Result DoSomething(string parameter)
{
    return Execute(() => GetProvider(parameter).DoSomething());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T14:35:36.093

这是另一种选择。不要让日志框架调用您的实际代码，而是让您的实际代码调用日志框架。像这样的东西可以解决问题（大大简化）。

```
public class LoggerScope : IDisposable {

    private bool disposed;

    public LoggerScope() {
        Logger.Start();
    }

    public void Dispose() {
        if(!disposed) {
            Logger.Finish();
            disposed = true;
        }
    }
} 
```

使用如下：

```
 using(var scope = new LoggerScope()) {
            // actual code goes here
        } 
```

通过在代码的顶层仅捕获和记录一次异常来单独处理异常。

好处：

*   避免到处都需要 lambda，因此异常堆栈跟踪更加清晰。
*   您可以向`LoggerScope`类添加任意上下文数据，例如 GUID、时间戳、逻辑任务描述文本。

# algorithm - 给定假期和假期如何最大化假期天数？

> ID：15765517
> 
> 赞同：1
> 
> 时间：2013-04-02T13:34:20.963
> 
> 标签：algorithm

这更像是算法审查：-

问题：给定假期作为整数列表，介于 0-364 和可用的叶子数 N，如何最大化 X 假期中的天数，其中假期是一个日期范围，其中包含该范围内的假期和范围内的其余部分使用树叶。

我相信以下使用 getMaxVacations(X, 0, 364, N) 的伪代码可能适用于一些小的修复和优化，但我正在寻找其他方法来可视化问题，不一定更快。

```
available_leaves (N) = 5
holidays = [7, 14, 20, 21, 35, 36]

getMaxVacation (X, start, end, N) {
  if X = 0 return 0;
  for (d : end to start + 1) {
    for (leave : N to 1)
      total = bestSingleVacation(start, d, leave) + getMaxVacation(X-1, d, end, N-leave);
    if max < total
    max = total
  return max
}

bestSingleVacation(start, end, leaves_to_use) {
  maxVacationSize = leaves_to_use
  for (i : start; i < end-maxVacationSize; i++) {
    for (j : i ; j < leaves_to_use) {
      if (!holidays.contains(j)) j++; // use the leave
    }
    if (maxVacationSize < j-i) maxVacationSize = j-i;
  }
  return maxVacationSize;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:08:06.083

这是 Haskell 中使用联邦假期的东西（1 月 1 日至 20 日在列表的末尾，因此程序将利用寒假来构建假期子序列）。它将输出 X 个假期的总假期天数从最长到最短，使用 N 天或更少的假期 - 其中许多假期为一天（但假期可能会增加）。如果您正在寻找 X 假期中最长的最短假期，则可能需要进行一些调整。这是一种过滤的大多数组合方法。

方法：

1.  列出假期的所有子序列。

2.  从 1 形成所有 X 个子序列的组。

3.  过滤 2\. 使得中间天数（休假天数）不超过 N，并按休假天数降序返回它们。

N=15，X=4 的样本输出：

```
(17,[[1,15],[53],[150],[245]]) -17 days of vacation, 13 days of leave utilized
                                 for the first vacation 

(14,[[15,20],[53],[185],[359,1]]) -14 days of vacation, 10 days of leave utilized
                                   for the first and last vacation 
```

程序代码：

```
import Control.Monad(guard)
import Data.List(sortBy, nub, intersect, sort, inits, tails)

federalHolidays = [53,150,185,245,285,315,332,359,1,15,20]
n = 15 --days of leave
x = 4 --number of vacations

differences xs = 
  sum $ map (\x -> x - 1) . tail 
  $ zipWith (\a b -> if a > b then a-b else a + 364 - b) xs ([0] ++ init xs)

countDays vacation = if null (drop 1 vacation) 
                        then 1 
                        else if last vacation > head vacation 
                                then last vacation - head vacation
                                else last vacation + 365 - head vacation

maxVacations = 
  sortBy (\a b -> compare (fst b) (fst a)) 
  $ zip (map (\x -> sum (map countDays x)) potentialVacations) 
  $ filter (\y -> sum (map differences y) <= n) potentialVacations
 where potentialVacations = nub (map sort $ solve [])
       holidaySubsequences = 
         filter (not . null) . concatMap inits . tails $ federalHolidays
       solve result = 
         if length result == x
            then [result]
            else do
              h <- holidaySubsequences
              guard (
                differences h <= n 
                && notElem h result 
                && all null (map (intersect h) result))
              solve (h:result) 
```

# javascript - 在图像上滑动

> ID：15765518
> 
> 赞同：1
> 
> 时间：2013-04-02T13:34:21.883
> 
> 标签：javascript, jquery, html

我有这个代码可以在页面之间滑动，我的内容是一个简单的图像。

问题是我不能在图像上滑动，只能在标题和图像之间的指定区域。

但我也想在图像上滑动到下一页。

我该如何解决？需要帮忙

我的代码 HTML5：

```
<div data-role="page" id="p1">
    <div data-role="header" data-theme="a" data-position="fixed" data-id="footer">                      
  <h1>2013</h1>
    </div>
    <div data-role="content">
        <img src="imagens/HomePrincipal.jpg"/>
    </div>
    <div data-role="footer" data-position="fixed" data-id="footer">                  
   <h1>Footer</h1>
    </div>
  </div>

  <div data-role="page" id="p2">
    <div data-role="header" data-position="fixed" data-id="footer">                     
  <a href="#p1" data-icon="home" data-iconpos="notext">Home</a>
        <h1>2013</h1>
    </div>
    <div data-role="content">
        <img src="imagens/PrototipoAlternativo2.jpg"/>
    </div>
    <div data-role="footer" data-position="fixed" data-id="footer">              
     <h1>Footer</h1>
    </div>
  </div> 
```

JavaScript：

```
$(document).on('swipeleft', '[data-role="page"]', function(event){    
    if(event.handled !== true) // This will prevent event triggering more then once
    {    
        var nextpage = $(this).next('[data-role="page"]');
        // swipe using id of next page if exists
        if (nextpage.length > 0) {
            $.mobile.changePage(nextpage, {transition: "slide", reverse: false}, true, true);
        }
        event.handled = true;
    }
    return false;         
});

$(document).on('swiperight', '[data-role="page"]', function(event){   
    if(event.handled !== true) // This will prevent event triggering more then once
    {      
        var prevpage = $(this).prev('[data-role="page"]');
        if (prevpage.length > 0) {
            $.mobile.changePage(prevpage, {transition: "slide", reverse: true}, true, true);
        }
        event.handled = true;
    }
    return false;            
}); 
```

CSS master.css：

```
.gridContainer {
    width: 88.2%;
    max-width: 1232px;
    padding-left: 0.9%;
    padding-right: 0.9%;
    margin: auto;
}
#test img{position:absolute;z-index:-1} 
```

样板.css：

```
img { border: 0; -ms-interpolation-mode: bicubic; vertical-align: middle; } 
```

我使用 jquery.mobile.1.2.0.min.css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:57:09.437

（不能评论..）也许图像放在 div 的顶部？图像上的 css z-index 较低，然后在 swipediv 上，以便您可以到达它？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T13:52:07.967

尝试将您的事件附加到 以外的其他内容`document`，例如：

```
$( '[data-role="page"]' ).on( 'swipeleft', function( event ) {
   ...
} ); 
```

# css - 排除特定样式

> ID：15765520
> 
> 赞同：0
> 
> 时间：2013-04-02T13:34:27.150
> 
> 标签：css, css-selectors

我为所有图像定义了一种样式：

```
img {
    border-top-right-radius: 30px;
    border-bottom-left-radius: 30px;
} 
```

我想以不同的方式设置另一组图像的样式。我为他们创建了一个类：

```
.radius {
    border-radius: 10px;
} 
```

但是，它似乎并没有改变目标图像。据我了解，类选择器的优先级高于元素选择器。有什么建议我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:39:11.250

看看[http://www.w3.org/TR/css3-selectors/#specificity](http://www.w3.org/TR/css3-selectors/#specificity)

```
A selector's specificity is calculated as follows:

- count the number of ID selectors in the selector (= a)
- count the number of class selectors, attributes selectors, and pseudo-classes in the selector (= b)
- count the number of type selectors and pseudo-elements in the selector (= c)
- ignore the universal selector 
```

例如，您可以使用 tag + class 来增加您的特异性

```
img.radius {
     border-radius: 10px;
} 
```

[这](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)是来自 SM 的一篇好文章

# c++ - 为什么这个插入给出语法错误

> ID：15765528
> 
> 赞同：0
> 
> 时间：2013-04-02T13:34:56.307
> 
> 标签：c++, sql

```
res = PQexec(conn,"INSERT INTO worker (fullname,type) VALUES ('"ptr"',"type")"); 
```

`type`是整数并且`ptr`是字符串。这里有什么问题？我该如何解决？“”有问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:40:11.113

代替

```
res = PQexec(conn,"INSERT INTO worker (fullname,type) VALUES ('"ptr"',"type")"); 
```

使用 stringstream 创建字符串

```
#include <sstream>
std::stringstream ss;

ss << "INSERT INTO worker (fullname,type) VALUES ('" << ptr << "'," << type << ")";
res = PQexec(conn, ss.str().c_str() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:53:16.760

C++ 不会自动将值转换为字符串。要构建一个字符串，`std::stringstream`请按照 claptrap 的答案中的说明使用。

但是，除非您可以完全确定变量对注入攻击是安全的，否则最好将值作为参数传递，而不是将它们直接注入 SQL，例如：

```
std::stringstream ss;
ss << type;
std::string type_string = ss.str();  // or std::to_string(type) if available

const char * values[] = {ptr, type_string.c_str()};

res = PQexecParams(conn, "INSERT INTO worker (fullname,type) VALUES ($1,$2)",
    2, NULL, values, NULL, NULL, 0); 
```

# c++ - “...”的多重定义 c

> ID：15765529
> 
> 赞同：6
> 
> 时间：2013-04-02T13:34:59.260
> 
> 标签：c++, header

我有一个头文件“USpecs.h”：

```
#ifndef USPECS_H
#define USPECS_H
#include "Specs.h"

#include <iostream>
#include <vector>

std::vector<Specs*> UcakSpecs;

#endif 
```

我在主函数和另一个名为 Ucak 的类中都使用了这个头文件。

但是当我构建它时，会发生以下错误：

> Ucak.cpp|6|`UcakSpecs'的多重定义|

正如我之前搜索的那样，#ifndef 应该没问题，但事实并非如此。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T13:37:38.697

包含防护仅防止在单个翻译单元（即具有包含的标头的单个源文件）中的多个定义。当您包含来自多个源文件的标头时，它们不会阻止多个定义。

相反，您应该在标题中声明：

```
extern std::vector<Specs*> UcakSpecs; 
```

以及一个（也是唯一一个）源文件中的定义：

```
std::vector<Specs*> UcakSpecs; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T13:37:10.753

包含保护仅防止标头多次包含在同一翻译单元中。如果您在多个翻译单元中包含此标题，您将在`UcakSpecs`整个程序中有多个定义。

声明全局变量的方法是`extern`在头文件中声明它：

```
#ifndef USPECS_H
#define USPECS_H
#inclde "Specs.h"

#include <iostream>
#include <vector>

extern std::vector<Specs*> UcakSpecs;

#endif 
```

声明为的全局变量`extern`只是一个声明。

然后通过在实现文件中定义它来确保它只在单个翻译单元中定义（可能在 中`USpecs.cpp`）；

```
std::vector<Specs*> UcakSpecs; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T13:37:32.430

仅适用于`#ifndef`单个编译单元。由于您有两个（主函数和`Ucak`类），因此该变量被定义了两次。

考虑`extern`在头文件中声明变量：

```
extern std::vector<Specs*> UcakSpecs; 
```

并在`Ucak.cpp`文件中定义它：

```
std::vector<Specs*> UcakSpecs; 
```

这应该有效。

# java - == 不使用扫描的字符串来测试用户/密码

> ID：15765537
> 
> 赞同：-6
> 
> 时间：2013-04-02T13:35:21.077
> 
> 标签：java, equals

**在评论中解决，'（tempuser.equals（actualuser）'是正确的方法。**

这是我的代码片段；

```
if (tempuser != "a"){
  System.out.println("FAIL");
    logincount=logincount+1;
  }
else {
  System.out.println("Success");
  } 
```

该程序正在打印失败，即使我打印出扫描的变量并且一切都是“a”。

有任何想法吗？

可以根据要求发布更多代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:36:30.877

`==`不推荐使用字符串比较。比较字符串的正确方法是`equals()`

```
if(!tempuser.equals("a")) {
    // rest of code
}
else {
    // rest of code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:41:34.073

您需要将 equals() 与对象一起使用。

```
if (tempuser == null || !tempuser.equals("a")) {
  System.out.println("FAIL");
} //etc. 
```

原因是 == 检查它是否是相同的引用。这适用于原语，如 int，但对于对象，您需要依赖 equals() 方法的实现来获取特定于类的指令来测试等效性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:37:15.507

总是`String.equals(otherString)`用来比较字符串的内容。与`==`您比较对象 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:37:52.587

> 要比较字符串是否相等，请不要使用 ==。== 运算符检查两个对象是否完全相同。两个字符串可能是不同的对象，但具有相同的值（其中包含完全相同的字符）。使用 .equals() 方法比较字符串是否相等。同样，使用 .compareTo() 方法来测试不相等的比较。例如：

```
String s = "something", t = "maybe something else";
if (s == t)      // Legal, but usually WRONG.
if (s.equals(t)) // RIGHT
if (s > t)    // ILLEGAL
if (s.compareTo(t) > 0) // CORRECT> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T13:37:57.447

在 Java 中使用`==`and`!=`将检查引用是否指向完全相同的对象。这是极不可能的。

您可能希望使用该[`.equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法来检查字符串的内容是否相等。

```
if (!tempuser.equals("a")){
    // Do stuff
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T13:37:02.187

要比较字符串，您需要使用 String.equals

```
if (tempuser.equals("a"){ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T13:40:58.263

毫无疑问，在我提交此答案时，无数其他人已经说过，`==`检查对左侧对象的*引用*`tempuser`（在本例中为字符串）是否等于对右侧对象的*引用*（字符串“a”） . 您可能想要做的是使用该`String.equals()`方法，如下所示：

```
if(!tempuser.equals("a")) {
    //Foo
} else {
    //Barr
} 
```

可以在[这里](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java/513839#513839)看到更全面的答案。

# asp.net-mvc - ASP.NET MVC 4 HtmlHelper - 将解码的 HTML 与编码的 HTML 混合

> ID：15765539
> 
> 赞同：2
> 
> 时间：2013-04-02T13:35:36.797
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, html-helper, decode

我正在编写一个辅助方法，它将在页面上生成评论的 HTML，并且我希望能够显示带有“< script >alert("hello");</script >”的评论作为它的内容。

使用时

```
@HttpUtility.HtmlDecode(comment.Content) 
```

在 *.cshtml 文件中，该脚本将呈现为纯文本。

但是在视图中使用这个 HTML 助手时：

```
@Html.PendingComment(comment) 
```

该脚本被呈现为 HTML 并被执行：

```
public static IHtmlString PendingComment(this HtmlHelper helper, VoidCommentPending comment)
    {
        var sb = new StringBuilder();
        sb.Append("<p>" + HttpUtility.HtmlDecode(comment.Content) + "</p>");
        return MvcHtmlString.Create(sb.ToString());
    } 
```

尝试使用“new HtmlString()”，结果相同，当我将返回结果从 IHtmlString 更改为字符串时，甚至段落标签都呈现为纯文本。

是否可以在 HtmlHelper 中混合编码和解码 HTML 字符串，还是应该使用不同的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:45:34.470

好的，所以在将评论存储到数据库之前，我使用 HttpUtility.Encode：

```
model.Content= HttpUtility.HtmlEncode(model.Content); 
```

然后我刚刚从我的辅助方法中删除了解码

```
sb.Append("<p>" + comment.Content + "</p>"); 
```

它在我的页面上将“< script >alert("hello");</script >”显示为纯文本。问题解决了。

基本上我是“双重解码”。使用 HttpUtility.HtmlDecode 这个内容：

```
&lt;script&gt;alert(&quot;hello&quot;);&lt;/script&gt; 
```

*正在被解码为我想要*的“纯文本”html，但**随后**MvcHtmlString.Create**再次**对其进行解码并将其呈现为 HTML。

# android - ActionBar setProgressBarIndeterminateVisibility(false) 在 android 2.3 上不起作用

> ID：15765540
> 
> 赞同：6
> 
> 时间：2013-04-02T13:35:38.170
> 
> 标签：android, actionbarsherlock, android-progressbar

setProgressBarIndeterminateVisibility(false) 不适用于 2.3 android。我正在使用下面的代码。进度条始终显示并且没有隐藏。相同的代码在 android 4.x 上运行，进度条被隐藏。该活动是从 SherlockFragmentActivity 扩展而来的，并且没有像 setSupportProgressBarIndeterminateVisibility(true) 这样的调用；这将使进度条可见。我的完整代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    ((SherlockFragmentActivity) JbActivity.this)
            .requestWindowFeature((long) com.actionbarsherlock.view.Window.FEATURE_INDETERMINATE_PROGRESS);
    super.onCreate(savedInstanceState);

    setSupportProgressBarIndeterminateVisibility(false);
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    restart = false;
    actionBar = getSupportActionBar();
    if (SelectedItems.isNull()) {
        restart = true;
        try {
            String jsonString = savedInstanceState
                    .getString("SelectedItems");
            SelectedItems.build(jsonString);
        } catch (Exception e) {
            Intent mainIntent = new Intent(JbActivity.this,CityList.class);
            mainIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(mainIntent);
            finish();
        }
    }

} 
```

代码中没有我调用的地方，请您提出一种方法，以便我可以隐藏 android 2.x 上的进度条。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T13:37:39.730

尝试使用： `getSherlockActivity().setSupportProgressBarIndeterminateVisibility(false);`

如果您从 a`SherlockFragment`或只是调用它：

```
setSupportProgressBarIndeterminateVisibility(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:27:26.163

尝试使用此方法显示：

```
setSupportProgressBarIndeterminateVisibility(true); 
```

和这种隐藏方法：

```
setSupportProgressBarIndeterminateVisibility(false); 
```

两者都适用于 android 2.3.3 到 4.1.7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T16:20:15.660

打电话

```
setSupportProgressBarIndeterminateVisibility(false); 
```

**在**setContentView之后

# grails - grails 生成 css/js 资源

> ID：15765546
> 
> 赞同：3
> 
> 时间：2013-04-02T13:35:52.860
> 
> 标签：grails, coffeescript-resources, lesscss-resources

我正在使用插件`coffeescript-resources`，`lesscss-resources`如何生成资源来获取原始 js/css ？

我知道我可以打包它然后引爆战争，但是有没有办法以更简单的方式获得输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:56:29.250

在处理资源插件时，查看实际的 resourceMappers 以了解生成是如何完成的总是很有用的。

似乎coffeescript插件包含一个编译coffeescript文件的CoffeeScriptEngine，因此您可以直接调用它（[https://github.com/edvinasbartkus/grails-coffeescript-resources/blob/master/grails-app/resourceMappers的第30行/CoffeeScriptResourceMapper.groovy](https://github.com/edvinasbartkus/grails-coffeescript-resources/blob/master/grails-app/resourceMappers/CoffeeScriptResourceMapper.groovy)）。

同样，less 编译器 - [https://github.com/paulfairless/grails-lesscss-resources/blob/master/grails-app/resourceMappers/LesscssResourceMapper.groovy](https://github.com/paulfairless/grails-lesscss-resources/blob/master/grails-app/resourceMappers/LesscssResourceMapper.groovy)

grails 资源插件的工作方式使得获取独立文件变得非常困难。你最好使用像 Codekit [http://incident57.com/codekit/这样的开发工具](http://incident57.com/codekit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T09:51:30.763

试试[grails-grunt 插件](https://bitbucket.org/OverZealous/grails-grunt-plugin)。

看来这就是您所需要的。您可以使用 Grunt 为 CoffeeScript、LESS 等创建自己的编译过程。

# python - 在同一进程中非常简单的 python-dbus 服务器/客户端

> ID：15765547
> 
> 赞同：3
> 
> 时间：2013-04-02T13:35:54.177
> 
> 标签：python, debian, dbus, gobject

我在玩 DBus 和 python。我创建了一个非常简单的 DBus 客户端和相应的服务器。当每个都在自己的 python 进程上运行时，它可以完美运行。

但是，我试图让它在同一个进程中工作，但它只在我运行代码的 10% 的时间内工作。其余时间，它只是冻结。

我已经尽可能地简化了代码，问题依然存在。代码如下：

```
from threading import Thread
import gobject
import dbus
import dbus.service
import dbus.mainloop.glib

gobject.threads_init()
dbus.mainloop.glib.threads_init()
dbus.mainloop.glib.DBusGMainLoop(set_as_default=True)

objname="com.visualtools.venom.MockService"
objpath="/" + objname.replace(".","/")

class ExampleApi(dbus.service.Object):
    def __init__(self):
        dbus.service.Object.__init__(self, dbus.service.BusName(objname, dbus.SystemBus()), objpath)
    @dbus.service.method(objname, out_signature='s')
    def ping(self, msg):
        return "Message is: %s" %msg

def client():
    while not loop.is_running():
        continue
    api = dbus.Interface(dbus.SystemBus().get_object(objname, objpath), objname)
    print "calling api..."
    result = api.ping("i'm the client")
    print "api result is: %s" %result
    loop.quit()

loop = gobject.MainLoop()
server = ExampleApi()
Thread(target=client).start()
loop.run() 
```

只需复制并粘贴到一个文件中，然后运行 ​​10 次。我可以在 debian sid 和 debian squeeze 中重现该问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:28:00.157

使用线程可能是问题所在。Simon McVittie 在[dbus ML](http://lists.freedesktop.org/archives/dbus/2012-December/015424.html)中说：

> 目前尚不清楚 dbus-glib 主循环胶水（由 DBusGMainLoop 设置）是否是线程安全的。最安全的假设总是“如果你不知道 foo 是否是线程安全的，它可能不是”。在任何情况下，如果它*是*线程安全的，那么通过 dbus-python 公开的它的子集不足以在多个线程中使用它。

# css - 使用 CSS 使图像变暗（任何形状）

> ID：15765550
> 
> 赞同：56
> 
> 时间：2013-04-02T13:36:05.577
> 
> 标签：css, png, tint

所以我看到了很多用 CSS 使图像变暗的方法，包括圆角的方法，但我的问题是不同的。

假设我有一个看起来像小狗的 .png 图像（随它去吧，我没有任何好的例子），当我将它放在我的页面上时，我给它的尺寸为 100 x 100。

但是我不能只是在上面覆盖一些东西，或者给整个图像着色，因为它会导致狗的背景也被着色，看起来很难看。

是否可以使用 CSS 为任意形状的图像着色？

（我假设您理解我的观点，不需要无用的代码）

谢谢！

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2016-12-10T14:55:34.067

简单如

```
img {
  filter: brightness(50%);
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-02T13:54:04.680

考虑到任何替代方案的难度，您始终可以更改图像的不透明度，这可能是最好的方法。

CSS：

```
.tinted { opacity: 0.8; } 
```

如果您对更好的浏览器兼容性感兴趣，我建议您阅读以下内容：

[http://css-tricks.com/css-transparency-settings-for-all-broswers/](http://css-tricks.com/css-transparency-settings-for-all-broswers/)

如果你有足够的决心，你可以让这个工作早在 IE7 （谁知道！）

**注意：**正如 JGonzalezD 在下面指出的那样，如果背景颜色通常比图像本身更暗，这实际上只会使图像变暗。尽管如果您不是特别想使图像变暗，但出于任何原因想要在悬停/聚焦/其他状态下突出显示它，这种技术可能仍然有用。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-07-30T13:18:24.683

如果您只希望`background-image`受到影响，您可以使用线性渐变来做到这一点，就像这样：

```
 background: linear-gradient(rgba(0, 0, 0, .5), rgba(0, 0, 0, .5)), url(IMAGE_URL); 
```

如果你想让它更暗，让 alpha 值更高，否则你想让它更亮，让 alpha 更低

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-09T15:30:59.330

我会制作狗的轮廓（黑色）的新图像，其余部分与原始图像相同。在 html 中，添加一个以这个剪影为背景的包装 div。现在，使原始图像半透明。狗会变暗，狗的背景会保持不变。您可以通过在悬停时将原始图像的不透明度设置为 100% 来实现 :hover 技巧。然后，当您将鼠标悬停在他身上时，狗就会弹出！

风格

```
.wrapper{background-image:url(silhouette.png);} 
.original{opacity:0.7:}
.original:hover{opacity:1}

<div class="wrapper">
  <div class="img">
    <img src="original.png">
  </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T14:02:36.273

`**[Webkit only solution](http://jsfiddle.net/thirdender/AMzwm/)**`

快速解决方案，依赖于[`-webkit-mask-image`](https://developer.mozilla.org/en-US/docs/CSS/-webkit-mask-image)属性。`-webkit-mask-image`为元素设置掩码图像。

这种方法有一些陷阱：

*   显然，只适用于 Webkit 浏览器
*   需要一个额外的包装器来应用`:after`伪元素（`IMG`标签不能有`:before`/`:after`伪元素，grr）
*   因为有一个额外的包装器，我不知道如何使用`attr(…)`CSS 函数来获取`IMG`标签 URL，所以将它单独硬编码到 CSS 中。

如果您可以忽略这些问题，这可能是一个可能的解决方案。SVG 过滤器将更加灵活，Canvas 解决方案将更加灵活，支持范围更广（SVG 不支持 Android 2.x）。

# css - CSS 框定位

> ID：15765555
> 
> 赞同：-1
> 
> 时间：2013-04-02T13:36:12.843
> 
> 标签：css, positioning

```
.box {
    float: left;
    margin: 0 10px 10px 0;
    background-color: #d1d1d1;
    width: 100px; height: 30px;
}

.box.l { height: 70px; } 
```

[有固定大小的盒子](http://jsfiddle.net/RayZ/nEMxZ/)漂浮在左边。小号是中号的一半高。

```
<div class="box s"></div>
<div class="box s"></div>
<div class="box l"></div>
<div class="box s"></div>
<div class="box s"></div> 
```

我怎样才能在不使用任何容器的情况下将小一个排列在一起（2个小容器，然后大一个在右侧，2个小容器再放在另一个容器上）？是否有可能使这些盒子最适合？

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:53:02.490

我讨厌自己这样做，但不知何故它有效..

```
.box {
    display: block;
    margin: 0 10px 10px 0;
    background-color: #d1d1d1;
    width: 100px;
    height: 30px;
    overflow: hidden;
}

.box.l { height: 70px; float: left; position: relative; left: 110px; top: -80px; }
.box.l + .box.s,
.box.l + .box.s + .box.s { position: relative; top: -80px; left: 110px; } 
```

[http://jsfiddle.net/nEMxZ/13/](http://jsfiddle.net/nEMxZ/13/)

（你真的应该使用容器）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:00:59.267

好吧，我只是要发布如何使用 table 元素来做到这一点，我会让你决定哪个更干净。

```
.box {
    margin: 0 10px 10px 0;
    background-color: #d1d1d1;
    width: 100px;
    height: 30px;
}

.boxes {
    border-spacing: 10px;
}

<table class="boxes">
    <tr>
        <td class="box"></td>
        <td class="box" rowspan="2"></td>
        <td class="box"></td>
    </tr>
    <tr>
        <td class="box"></td>
        <td class="box"></td>
    </tr>
</table> 
```

这是jsfiddle：http: [//jsfiddle.net/nEMxZ/22/](http://jsfiddle.net/nEMxZ/22/)

如果你决定在这里使用一张桌子，我想我已经把它弄得尽可能干净了。请注意，我已经减轻了对盒子本身的两个不同类的需求，但为表格添加了一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:48:17.480

通常这需要将元素嵌套在网格中：

[http://jsfiddle.net/isherwood/nEMxZ/11/](http://jsfiddle.net/isherwood/nEMxZ/11/)

```
.wrapper {
    float: left;
}
.box {
    float: left;
    clear: left;
    margin: 0 10px 10px 0;
    background-color: #d1d1d1;
    width: 100px;
    height: 30px;
}
.box.l {
    height: 70px;
}

<div class="wrapper">
    <div class="box s"></div>
    <div class="box s"></div>
</div>
<div class="wrapper">
    <div class="box l"></div>
</div>
<div class="wrapper">
    <div class="box s"></div>
    <div class="box s"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:01:24.243

这是另一种方法，虽然它相当脆弱并且不支持旧浏览器：

[http://jsfiddle.net/isherwood/nEMxZ/19/](http://jsfiddle.net/isherwood/nEMxZ/19/)

```
.box {
    float: left;
    margin: 0 10px 10px 0;
    background-color: #d1d1d1;
    width: 100px;
    height: 30px;
}
.box.l {
    height: 70px;
    margin-top: -40px;
}
.box.s:nth-child(2) {
    clear: left;
}
.box.s:nth-child(4) {
    margin-top: -40px;
}

<div class="box s">One</div>
<div class="box s">Two</div>
<div class="box l">Three</div>
<div class="box s">Four</div>
<div class="box s">Five</div> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-02T13:44:52.487

像这样？

```
.box.l {
    float: right;
    clear: both;
}

.box.s { 
    clear: both;
} 
```

[您的 jsFiddle 已编辑](http://jsfiddle.net/nEMxZ/10/)

# c++ - 使用类对象提升线程工作者

> ID：15765559
> 
> 赞同：0
> 
> 时间：2013-04-02T13:36:27.070
> 
> 标签：c++, multithreading, concurrency

我是 C++ 并发的新手。我开始使用 boost 线程作为跨平台解决方案。到目前为止，我看到的大多数示例都涉及将单独的函数传递给线程。例如，像[这样](http://www.drdobbs.com/cpp/the-boostthreads-library/184401518?pgno=1)。在我的情况下，我有一个类有几个类的实例，在我的例子中是 OpenGL 上下文和渲染相关的东西。我了解到将对象分配给线程是通过以下方式完成的：

```
mythread=new boost::thread(boost::ref(*this)); 
```

其中 *this 是指向调用它的实例的指针。但是在这个类实例中复合的其他类呢？我应该对它们中的每一个都做同样的事情，还是一旦我在宿主类上调用它们就会自动线程化？我最初的问题在[这个](https://stackoverflow.com/questions/15760147/creating-parallel-offscreen-opengl-contexts-on-windows)线程中进行了概述。所以，一旦我触发线程，它看起来像 OpenGL 上下文仍保留在主线程中。（请参阅底部的 GPUThread 类）。

这是我的线程类：

```
 GPUThread::GPUThread(void)
  {
      _thread =NULL;
      _mustStop=false;
      _frame=0;

      _rc =glMultiContext::getInstance().createRenderingContext(GPU1);
      assert(_rc);

      glfwTerminate(); //terminate the initial window and context
      if(!glMultiContext::getInstance().makeCurrent(_rc)){

      printf("failed to make current!!!");
      }
         // init engine here (GLEW was already initiated)
      engine = new Engine(800,600,1);

   }
   void GPUThread::Start(){

      printf("threaded view setup ok");

       ///init thread here :
       _thread=new boost::thread(boost::ref(*this));
      _thread->join();

  }
 void GPUThread::Stop(){
   // Signal the thread to stop (thread-safe)
    _mustStopMutex.lock();
    _mustStop=true;
    _mustStopMutex.unlock();

    // Wait for the thread to finish.
    if (_thread!=NULL) _thread->join();

 }
// Thread function
 void GPUThread::operator () ()
{
       bool mustStop;

      do
     {
        // Display the next animation frame
        DisplayNextFrame();
        _mustStopMutex.lock();
        mustStop=_mustStop;
       _mustStopMutex.unlock();
    }   while (mustStop==false);

}

void GPUThread::DisplayNextFrame()
{

     engine->Render(); //renders frame
     if(_frame == 101){
         _mustStop=true;
     }
}

GPUThread::~GPUThread(void)
{
     delete _view;
     if(_rc != 0)
     {
         glMultiContext::getInstance().deleteRenderingContext(_rc);
         _rc = 0;
     }
    if(_thread!=NULL)delete _thread;
 } 
```

当此类运行OpenGL上下文时会发出错误。我无法从缓冲区中读取像素数据。我想这是因为我在调用此之前初始化_rc（渲染上下文）并设置了当前上下文：

```
 _thread=new boost::thread(boost::ref(*this)); 
```

我尝试在线程初始化之后执行此操作，但随后它直接跳入线程函数，而对象未初始化。那么在包含所有内容的类上设置 boost 线程的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:45:45.377

简短的回答：您需要将 OpenGL 调用`glMultiContext::getInstance().makeCurrent(_rc)`以及可能`new Engine()`来自`GPUThread`构造函数的调用移动到`GPUThread::operator()()`.

更长的答案： OpenGL 上下文似乎以某种方式与特定线程相关联，如此[处所示](http://www.equalizergraphics.com/documentation/parallelOpenGLFAQ.html)。您需要`makeCurrent()` *在要将上下文绑定到的线程中运行时调用。* 您当前正在运行的线程是`makeCurrent()`.

您`GPUThread`从主线程调用构造函数，然后`GPUThread::Start()`从主线程调用。您实际在子线程上运行的第一个位置是`GPUThread::operator()()`函数的顶部。`glMultiContext::getInstance().makeCurrent(_rc)`所以这是必须调用的地方（在任何调用之前`engine->Render()`）。

我不明白 OpenGL 的设计原理`makeCurrent()`。我最好的猜测是，他们必须在 OpenGL 上下文的实现中使用某种线程本地存储，或者其他东西。“正常”的 2D Windows 设备上下文也有关于绑定到单个线程的限制，这让我猜测 OpenGL 可能有类似的限制。

# iphone - 关于 ios KeychainItemWrapper 存储用户名/密码而不是对象

> ID：15765560
> 
> 赞同：1
> 
> 时间：2013-04-02T13:36:27.750
> 
> 标签：iphone, ios, keychain, keychainitemwrapper

我知道保存用户名/密码使用下面的 KeychainItemWrapper 类方法，但我想要在 KeychainItemWrapper 中添加一个额外的 [ipTF text]。怎么做？

```
KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"Login" accessGroup:nil];

[keychainItem setObject:[useridTF text] forKey:(__bridge id)(kSecAttrAccount)];
[keychainItem setObject:[passTF text] forKey:(__bridge id)(kSecValueData)];
[keychainItem setObject:[ipTF text] forKey:@"ip"];//not success! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:51:01.740

我认为不可能在密钥链项中创建任意键/值对。

**钥匙串服务参考**

> 本节列出了指定钥匙串项属性的所有键。每个项目的描述表明该键的可能值是什么。

可能的键列表由`kSecClass`. [您可以在Keychain Services References](https://developer.apple.com/library/mac/#documentation/security/Reference/keychainservices/Reference/reference.html)中的以下描述如何确定密钥集的引用下找到选项列表及其描述。

> 用于在搜索字典中设置项目类值的键常量。
> 
> ```
> CFTypeRef kSecClass;
> ```
> 
> **常数**
> 
> ```
> kSec类
> ```
> 
> 字典键，其值为项目的类代码。此键的可能值列在“<a href="https://developer.apple.com/library/mac/documentation/security/Reference/keychainservices/Reference/reference.html#//apple_ref/doc/constant_group/ Item_Class_Value_Constants" rel="nofollow">项目类值常量。”</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:44:00.360

指定一个新键并将值存储在那里

# animation - 使用 OpenCV 进行情绪/情绪检测（从快乐到悲伤）

> ID：15765566
> 
> 赞同：3
> 
> 时间：2013-04-02T13:36:36.563
> 
> 标签：animation, opencv, image-processing, computer-vision, face-detection

我的项目是检测图像中人的情绪。
我希望它是 0-100 的百分比；0 表示非常悲伤，100 表示非常高兴。

**我可以使用 OpenCV 来完成吗？**

我应该为我的项目下载任何数据库以用于培训目的吗？如果是这样，请帮我开始？

**编辑：**

我在 OpenCV 教程中遇到过这个[链接。](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/tutorial/facerec_gender_classification.html)该示例适用于 Gender，但链接中提到我们也可以为 Emotion 做同样的事情。

任何人都可以向我提供有关下载数据库的数据库以及如何进行裁剪（仅嘴唇或......）的任何参考或建议。几张图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:32:40.903

有一种面部肌肉编码系统，称为[动作单元](http://en.wikipedia.org/wiki/Facial_Action_Coding_System)，它根据 46 个不同动作描述符的存在或不存在对面部表情进行编码。这些描述符的列表可以在链接页面上找到，并可用于识别给定面部的情绪。

如果您收集一组面部图像，并为其分配幸福或悲伤分数，并另外标记动作描述符的存在和不存在，您可以获得一个简单的数据集，该数据集将允许您训练分类器（例如朴素贝叶斯或半朴素贝叶斯）来识别面部的情绪分数。

当然，这将要求您的输入图像另外预先标记有动作单元。这可能通过不同的学习系统来实现，可能基于[OpenCV 增强分类器级联](http://docs.opencv.org/trunk/doc/user_guide/ug_traincascade.html)。

# java - 在 Android 应用中使用日历实现正确的日期

> ID：15765571
> 
> 赞同：-3
> 
> 时间：2013-04-02T13:36:42.847
> 
> 标签：java, android, parsing, date, calendar

我在尝试让日期在我的应用程序中正确显示时遇到了麻烦，这是代码

```
//i declare the calendar called now
private Calendar now;

//i set up the calendar with what i believe could be the problem in setting up the wrong date
now = Calendar.getInstance();
    now.set(Calendar.MONTH, Calendar.MONTH);
    now.set(Calendar.DAY_OF_MONTH, Calendar.DAY_OF_MONTH);
    now.set(Calendar.DAY_OF_WEEK, Calendar.DAY_OF_WEEK);

//whatDay being a textview, is asked to display the date
whatDay.setText(DateFormat.format("E, dd MMMM", now)); 
```

目前，就显示日期而言，一切正常 - 只有它显示错误的日期，这有点问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:56:17.777

你可以做类似的事情

```
Calendar now = Calendar.getInstance();
now.set(MONTH, SEPTEMBER);
now.set(DAY_OF_MONTH, 22);
now.set(DAY_OF_WEEK, MONDAY); 
```

您可以获取第二个参数的值，但是您可以在代码中执行此操作。`now`然后使用[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)格式化并将其添加到您的`TextView`

[日历文档](http://developer.android.com/reference/java/util/Calendar.html)

**编辑**

我不知道您是如何获得日期的，但您可以`Constants`在代码中设置，例如 MONTH、DAY 等……当您解析文件时以任何您想要的方式进行初始化，然后`set`在`Calendar`. 还有一种param`的`add`方法。`Calendar that will add to the field values (MONTH, DAY_OF_WEEK, etc...) instead of setting them to the value in your second`您还可以在我上面链接的文档中找到其他有用的方法。让我知道这是否适合您。

您正在使用`field`第二个的值`param`。看看你的做法与我的不同。此外，[请参阅此链接](http://developer.android.com/reference/java/util/Calendar.html#MONTH)作为要输入的值的示例。

# jquery - 确定正确的复选框和按钮

> ID：15765572
> 
> 赞同：0
> 
> 时间：2013-04-02T13:36:43.627
> 
> 标签：jquery, html, checkbox

我有以下内容；

```
<div class="trp">
    <input class="makeActive" type="checkbox">
    <input class="makeRepeat" type="checkbox">

    <button class="btn" data-item="makeActive">Make Active</button>
    <button class="btn" data-item="makeRepeat" checked="checked">Make Active</button>
</div> 
```

我想做的事，

1.  如果我单击任何按钮，
    则应选中类名等于单击按钮的数据项的复选框，并且
    需要向按钮添加一个名为 .active 的类名。

2.  如果页面加载时任何一个复选框已经被选中，则需要识别与该复选框相关的按钮并需要添加类 .active。

当使用此按钮单击按钮时，我设法检查了复选框

```
$('.trp .btn').click(function(){
    var elem = $(this).attr('data-item');
    var cb = $(this).closest('.trp').find('.'+elem);

    if (cb.is(':checked')) {
        cb.prop('checked',false);
    } else {
        cb.prop('checked',true);
    }           
}); 
```

但我不能做我上面提到的第二点。

你能帮我做这个吗...

问候，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:39:31.927

绑定后触发您的点击事件处理程序：

```
$('.trp .btn').click(function(){
    var elem = $(this).attr('data-item');
    var cb = $(this).closest('.trp').find('.'+elem);

    if (cb.is(':checked')) {
        cb.prop('checked',false);
    } else {
        cb.prop('checked',true);
    }           
})
// Trigger click
.click(); 
```

或者将您的事件处理程序放在一个函数中，然后在页面加载时调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:39:39.493

```
$(document).ready(function () {
    $('.trp input[type=checkbox][checked=checked]').each(function (index, element) {
        var button = $('.trp button:eq(' + $(this).index() + ')').addClass('active');
    });
}); 
```

[jsfiddle](http://jsfiddle.net/2uSBS/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:43:31.563

试试这个：

```
$('.trp input:checkbox').each(function () {
    var this = $(this);
    if (this.is(':checked')) {
        $('.trp input:button').filter(function () {
            return ($(this).data('item') === this.attr('class'))
        }).addClass('.active');
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:40:41.100

您需要添加以下代码：

```
$(document).ready(function(){
    $('.btn').is(':checked').each(function(){
        var elem = $(this).attr('data-item');
        $('.'+elem).addClass('active')
    })
}) 
```

# wpf - 在wpf中动态添加很多控件

> ID：15765573
> 
> 赞同：0
> 
> 时间：2013-04-02T13:36:44.340
> 
> 标签：wpf, wpf-controls

我有一个简单的 foreach 语句，它创建一个用户控件并将其添加到 stackPanel 控件（参见下面的代码）。Products 只是一个整数列表。

```
 foreach (int id in Products)
 {
   ItemControl itemControlProduct = new ItemControl (id );
   this.StackPanelControl.Children.Add(itemControlProduct);
 } 
```

如果列表有大约 50 个项目（产品），这很好用，但是一旦它结束，我的应用程序就会拒绝呈现。（即没有出现异常，windows任务管理器说程序运行正常，但没有出现窗口）

我怎么解决这个问题。我需要加载 600 多个项目。ps 我不想使用分页。我希望一次列出所有元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:45:57.710

StackPanel 不是您要查找的父控件。使用 ListView，它利用了一个虚拟化面板（[VirtualizingStackPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.aspx)）并且有很多好东西，例如用于选择事物的事件，在不改变背后逻辑的情况下改变外观等。

“虚拟化”部分意味着只有有限数量的 UI 控件在运行时呈现，无论您在容器中放置了多少项目。

有很多方法可以做到，下面的示例只是假设最少的示例：

```
<ListView ItemsSource="{Binding ...your binding to Products}">
    <ListView.View>
        <GridView>
<GridViewColumn Width="100">
    <GridViewColumnHeader>
        <TextBlock Text="Item"/>
   </GridViewColumnHeader>
   <GridViewColumn.CellTemplate>
        <DataTemplate>
            <ItemControl ItemId="{Binding Path=id}"/> <!-- this is for Product.id, you'll have to change it-->
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:47:58.580

这不是一个直接的答案，但我强烈建议不要使用这种使用控件的“代码隐藏”方式。WPF 是针对数据绑定的。创建一个在集合中包含 600 个项目的视图模型，并让 WPF 完成艰苦的工作。

考虑使用`ItemsControl`设置`ItemsPanel`为 a 的 a `VirtualizingStackPanel`。这将确保控件仅在它们变得可见时创建。将属性绑定`ItemsSource`到您的集合。

```
<ItemsControl ItemsSource="{Binding MyModel.MyCollection}">
 <ItemsControl.ItemsPanel>
   <VirtualizingStackPanel/>
 </ItemsControl.ItemsPanel>
</ItemsControl> 
```

# ios - 如何在 iOS 中清除推送通知

> ID：15765576
> 
> 赞同：0
> 
> 时间：2013-04-02T13:36:51.787
> 
> 标签：ios, objective-c, push-notification, apple-push-notifications

有没有办法在 iOS 中取消/清除推送通知？（我知道 [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey] 返回字典而不是 Notification 对象。）

APN 是否有类似的东西，例如通过调用本地通知：

1.  `[[UIApplication sharedApplication] cancelLocalNotification:notification];`用于清除一个通知。

2.  `[[UIApplication sharedApplication] cancelAllLocalNotifications];`所有本地通知。??

早些时候（在应用程序的先前版本中），APN 在点击它们时会被清除。但是，现在他们没有得到清除。我就是不明白为什么？

“分发”配置文件中的权利键如下所示：

```
<key>Entitlements</key>
<dict>
    <key>application-identifier</key>
    <string>74T2SKP33D.com.xyz.abc</string>
    <key>aps-environment</key>
    <string>production</string>
    <key>com.apple.developer.default-data-protection</key>
    <string>NSFileProtectionComplete</string>
    <key>get-task-allow</key>
    <false/>
    <key>keychain-access-groups</key>
    <array>
        <string>74T2SKP33D.*</string>
    </array>
</dict> 
```

我正在使用临时配置文件并通过 testflight 分发应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T07:35:06.573

```
[[UIApplication sharedApplication] unregisterForRemoteNotifications]; 
```

会为你做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T20:45:37.633

将应用程序的徽章编号设置为零将从通知中心删除所有推送通知，并清除图标徽章。

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T13:48:38.790

您可以使用 cancelAllNotifications。调查

[UIApplication 类参考：cancelAllLocalNotifications](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/cancelAllLocalNotifications)

希望这可以帮助。

# ajax - 同一站点的多个选项卡是否发送多个 ajax 调用？

> ID：15765579
> 
> 赞同：0
> 
> 时间：2013-04-02T13:37:00.647
> 
> 标签：ajax, performance, browser, tabs

假设我们有网站，每秒钟检查一次是否有任何新消息：

```
$(function(){
    setInterval(function(){
        $.ajax({
            url: 'message_check.php',
            success: function(data){
               if(data)$('#someDiv').html('NEW MESSAGE!');              
            }
         });
    },1000);
}); 
```

现在有人用我网站的不同页面打开了 3 个标签。

我每秒会接到多少个电话，**三个**还是**一个**？

*   如果有，那么**如何制表符 sinc**？

*   如果三个那么**我们失去了非常非常多的表现**，对吧？

注意到**Firebug**为同一站点的不同页面显示相同的控制台。这意味着在我的情况下， **FireFox**（我也希望其他浏览器）**理解它的同一个站点**并且可以避免多次调用。

我考虑将结果保存到 cookie 中，并且只有在它不是“新鲜”的情况下才进行调用，但不想重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:39:41.407

我认为这取决于您使用的浏览器。一些浏览器只使用 2 个与服务器的并发连接，因此您将从多选项卡浏览器客户端获得多达 2 个并发命中。因此，如果您的 javascript 生成多个请求，它们将由浏览器查询和管理。

# makefile - makefile - 单独的文件夹

> ID：15765584
> 
> 赞同：0
> 
> 时间：2013-04-02T13:37:09.470
> 
> 标签：makefile, compiler-flags

我想每次用不同的标志编译我的源文件两次。除此之外，我需要在不同目录中编译后获得这些可执行文件（所以我希望“make”创建两个文件夹并在每个文件夹中放入一个可执行文件）。

我认为他们的主要问题是我不知道如何管理目标文件。认为我们可以用不同的名称创建它们（因为每组 .o 文件应该以某种方式与具有不同标志的另一组不同）或者将它们放在我们想要拥有可执行文件的目录中。

我仍然不知道如何以优雅的方式做到这一点：/

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:14:53.077

你没有给我们很多细节，所以我假设你有两个源文件`foo.c`和`bar.c`，并且你在两个目录中构建，`red/`并且`blue/`. 这是一个可以完成这项工作的原始生成文件：

```
OBJS := foo.o bar.o
RED_OBJS := $(addprefix red/,$(OBJS))
BLUE_OBJS := $(addprefix blue/,$(OBJS))

$(RED_OBJS): red/%.o : %.c
    $(CC) -c $< -o $@

$(BLUE_OBJS): blue/%.o : %.c
    $(CC) -c $< -o $@

red/red_exec: $(RED_OBJS)
    $(CC) $< -o $@

blue/blue_exec: $(BLUE_OBJS)
    $(CC) $< -o $@ 
```

# java - 我为一个项目创建了一个 CipherSpi 类的实例，我得到“JCE 无法验证提供者”

> ID：15765585
> 
> 赞同：0
> 
> 时间：2013-04-02T13:37:09.743
> 
> 标签：java, securityexception

我正在制作一个项目，在该项目中，我们的工作之一是重新制作密码算法和其他算法，然后使用 JCA（java 密码体系结构）规则使用它们。

我制作了一个提供多个类的提供程序。在我尝试使用 getInstance() 之前，一切似乎都运行良好。除其他外，我为 KeyAgreement 的不同用途制作了一个 DH（扩展 KeyAgreementSpi）类

```
KeyAgreement dh = KeyAgreement.getInstance("DH", myProvider); 
```

我得到：

```
 Exception in thread "Thread-0" java.lang.SecurityException: JCE cannot authenticate the provider Ts001Proj1Provider
at javax.crypto.JceSecurity.getInstance(JceSecurity.java:114)
at javax.crypto.KeyAgreement.getInstance(KeyAgreement.java:263)
at fcul.ts001.proj1.SecuredStream.(SecuredStream.java:194)
at fcul.ts001.proj1.SecureStreamTest.run(SecureStreamTest.java:24)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.SecurityException: Cannot verify jar:file:/*pathToProject*/proj/Main/bin/!/
at javax.crypto.JarVerifier.verifySingleJar(JarVerifier.java:406)
at javax.crypto.JarVerifier.verifyJars(JarVerifier.java:322)
at javax.crypto.JarVerifier.verify(JarVerifier.java:250)
at javax.crypto.JceSecurity.verifyProviderJar(JceSecurity.java:161)
at javax.crypto.JceSecurity.getVerificationResult(JceSecurity.java:187)
at javax.crypto.JceSecurity.getInstance(JceSecurity.java:110)
... 4 more
Caused by: java.security.PrivilegedActionException: java.io.FileNotFoundException: *pathToProject*\proj\Main\bin (Access is denied)
at java.security.AccessController.doPrivileged(Native Method)
at javax.crypto.JarVerifier.verifySingleJar(JarVerifier.java:384)
... 9 more
Caused by: java.io.FileNotFoundException: *pathToProject*\proj\Main\bin (Access is denied)
at java.util.zip.ZipFile.open(Native Method)
at java.util.zip.ZipFile.(ZipFile.java:214)
at java.util.zip.ZipFile.(ZipFile.java:144)
at java.util.jar.JarFile.(JarFile.java:153)
at java.util.jar.JarFile.(JarFile.java:90)
at sun.net.www.protocol.jar.URLJarFile.(URLJarFile.java:93)
at sun.net.www.protocol.jar.URLJarFile.getJarFile(URLJarFile.java:69)
at sun.net.www.protocol.jar.JarFileFactory.get(JarFileFactory.java:98)
at sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:122)
at sun.net.www.protocol.jar.JarURLConnection.getJarFile(JarURLConnection.java:89)
at javax.crypto.JarVerifier$2.run(JarVerifier.java:399)
... 11 more 
```

最好的部分是这段代码执行得很好：
`KeyPairGenerator dhKeyPairGen = KeyPairGenerator.getInstance("DH", myProvider);`

为什么我会得到它？

我正在开发 win6.1 x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:47:06.890

它不仅仅是实现一个类。您必须先让您的提供商获得认证。你为什么做这个？

# meteor - 如何修改/编辑 Meteor 包？

> ID：15765591
> 
> 赞同：16
> 
> 时间：2013-04-02T13:37:19.317
> 
> 标签：meteor

我想在同一台服务器上（在不同的端口上）运行两个不同的 Meteor 应用程序，但我想更改 Meteor 核心包之一中的某些内容，并且我希望一个应用程序使用原始包，另一个应用程序使用修改后的包。我怎么能做到？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-06-16T09:59:56.167

[基于此处](https://stackoverflow.com/a/25772395/4054019)的答案，一个更直接的答案：

1.  在您的项目中创建 packages 文件夹并将位置更改为该文件夹（'cd yourproject' && 'mkdir packages' && 'cd packages'）
2.  从 git 获取文件（'git clone [https://github.com/YOUR_PACKAGE_ADDRESS](https://github.com/YOUR_PACKAGE_ADDRESS) ' - 你需要[安装 git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)）
3.  在获取的包文件夹中找到 package.js 并在“Package.describe”名称值中进行编辑，例如通过添加“-manually-modified”
4.  在获取的包文件夹中编辑您需要修改的文件。
5.  将包添加到项目（流星添加包名称手动修改）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:50:21.677

您可以在 github 存储库中获取包的文件：[https ://github.com/meteor/meteor/tree/master/packages](https://github.com/meteor/meteor/tree/master/packages)

获取您想要的文件（除了 `package.js`文件）并将它们添加到您的项目中。值得注意的是，有时您需要确保它们的加载顺序，因此您可能必须修改文件名，看看加载顺序看看`package.js`. 默认情况下，meteor 按名称订购文件，但包不一定使用它。

如果您只是修改包并将其添加回来，则可以避免重命名文件`meteorite`：[https ://github.com/oortcloud/meteorite](https://github.com/oortcloud/meteorite)

有关如何制作的完整说明`smart.json`：[https](https://atmosphere.meteor.com/wtf/package) ://atmosphere.meteor.com/wtf/package 。如果它有什么好处，请考虑将它添加到[大气中](http://atmosphere.meteor.com)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T22:23:30.073

我的包在其根目录下的用户文件夹中，作为一个名为 .meteor 的隐藏文件夹。

也许你可以在那里检查？在 Mac 上，它将位于：

~/.meteor/packages/**你的包名**

您现在还必须进入 os.json 中的文件，并更改您更改的文件的“长度”变量以匹配新的字节文件大小。否则它可能无法编译，但请先尝试编译，看看是否是您更改了某些包代码的问题。

# forms - Google Apps脚本onEdit和onOpen中的行着色？

> ID：15765596
> 
> 赞同：0
> 
> 时间：2013-04-02T13:37:26.287
> 
> 标签：forms, google-apps-script, row, spreadsheet

我创建了一个将数据提交到 Google 电子表格的 Google 表单。我正在尝试根据特定列中的值对行进行颜色编码 - 没问题。但是，我正在使用 onEdit 函数，当用户提交表单时，行不会改变颜色。只有当我编辑特定单元格时，行才会改变颜色，因此 onEdit 函数。确实，Google 似乎没有将表单提交视为电子表格中的“编辑”，即使从技术上讲，它是一种编辑。我试图复制并粘贴该函数并将其重命名为 onOpen，但这也不起作用。我在这里想念什么？我已经在下面发布了代码，我非常感谢您能负担得起的任何帮助。另外，我是脚本新手，所以请放轻松；）

```
// Color code rows based on the status of the ticket
function onEdit(e) {
 if (e) { 
    var ss = e.source.getActiveSheet();
    var r = e.source.getActiveRange(); 

    // If you want to be specific
    // do not work in first row
    // do not work in other sheets except "Sheet1"
    if (r.getRow() != 1 && ss.getName() == "Sheet1") {

        // E.g. status column is 6th (F)
        status = ss.getRange(r.getRow(), 6).getValue();

        // Specify the range with which You want to highlight
        // with some reading of API you can easily modify the range selection properties
        // (e.g. to automatically select all columns)
        rowRange = ss.getRange(r.getRow(),1,1,6);

        // This changes row color
        if (status == 'New') {
            rowRange.setBackgroundColor("#f26c4f");
        } else if (status == 'In Progress') {
            rowRange.setBackgroundColor("#fff568");
        } else if (status == 'Ordered') {
            rowRange.setBackgroundColor("#68baff");
        } else if (status == 'Completed') {
            rowRange.setBackgroundColor("#a2e7a5");  
        // DEFAULT
        } else if (status == '') { 
            rowRange.setBackgroundColor("#FFFFFF");
        }   
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:25:19.747

*“谷歌似乎没有将表单提交视为电子表格中的“编辑”，即使从技术上讲，它是一个编辑”*

这就是为什么有一个`On form submit`功能，请参阅[此处的文档](https://developers.google.com/apps-script/understanding_triggers?hl=fr-FR#ActionTriggers)，可从脚本编辑器资源 > 当前脚本触发器中获得 ![在此处输入图像描述](https://i.stack.imgur.com/JLmtC.jpg)

# javascript - 在使用 JavaScript 拍摄照片之前延迟或显示动画照片计时器

> ID：15765602
> 
> 赞同：0
> 
> 时间：2013-04-02T13:37:33.443
> 
> 标签：javascript, timer, webcam, animated-gif

我创建了各种 JavaScript 函数来从浏览器中捕获照片。使用 JavaScript 函数，我可以成功启动相机，拍摄照片并预览，然后上传照片。

我正在考虑集成照片定时器功能。在这里，一旦我点击拍照按钮，它将等待 3 秒（例如）并显示一个动画计时器（我正在考虑加载一个动画 gif 文件），它将倒计时 3 到 1。一旦倒计时完成我想调用照片捕捉功能。

但是我无法将这个逻辑集成到我的照片捕捉功能中！

**我的示例代码是：**

```
var cameraEnabled = false;
var timer = null;

$('#takeButton').click(function(){

    if(timer != null)
    {
      clearTimeout(timer); 
      timer = null;
    }
    else
    {
        if(!cameraEnabled){
            return false;
        }
        timer = window.setTimeout(webcam.show_image(), 3000);
        webcam.freeze();
        togglePane();
        return false;
    }

}); 
```

**我的 show_image 函数是：**

```
 show_image:function()
 {
    var img = document.createElement("img");
    img.src = "countdowntimer.gif";
    document.body.appendChild(img);
 }, 
```

有人可以帮我解决这个问题吗？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:43:16.253

```
timer = window.setTimeout(webcam.show_image(), 30000); 
```

执行此操作时，实际上是调用 webcam.show_image，然后将函数结果传递给 setTimeout。要将指针传递给函数，您应该这样做

```
timer = window.setTimeout(webcam.show_image, 30000); 
```

此外，我认为使用动画 gif 进行文本倒计时并不是一个好主意，您可以在某些 DIV 中操作 innerHTML。最后，30000 毫秒是 30 秒，而不是 3 秒。

# postgresql - PostgreSQL - 如何恢复非常大的数据库

> ID：15765606
> 
> 赞同：10
> 
> 时间：2013-04-02T13:37:40.660
> 
> 标签：postgresql, postgresql-9.1, restore, dump, pg-restore

当我尝试在我的 devel 数据库节点（该节点的 RAM、CPU ......比我的生产服务器少）上恢复一个大型数据库（自定义格式几乎 32Go）时，我遇到了一个小问题。

我的数据库转储是使用类似于以下的命令生成的：

```
pg_dump -F custom -b myDB -Z 9 > /backup/myDB-`date +%y%m%d`.pg91 
```

当我恢复它时，我使用了以下命令：

```
pg_restore -F custom -j 5 -d myDB /backup/myDB-20130331.pg91 
```

但是在这里，每次还原命令失败时都会出现如下错误：

```
pg_restore: [archiver (db)] error returned by PQputCopyData: server closed the connection unexpectedly
This probably means the server terminated abnormally
    before or while processing the request.
pg_restore: [archiver] worker process failed: exit code 1
pg_restore: [archiver (db)] error returned by PQputCopyData: server closed the connection unexpectedly
This probably means the server terminated abnormally
    before or while processing the request.
pg_restore: [archiver (db)] error returned by PQputCopyData: server closed the connection unexpectedly
This probably means the server terminated abnormally
    before or while processing the request.
pg_restore: [archiver (db)] error returned by PQputCopyData: server closed the connection unexpectedly
This probably means the server terminated abnormally
    before or while processing the request. 
```

当我检查我的 postgresql 日志时，我可以读到：

```
 HINT:  In a moment you should be able to reconnect to the database and repeat your command.
   LOG:  all server processes terminated; reinitializing
   LOG:  database system was interrupted; last known up at 2013-04-02 11:41:48 UTC
   LOG:  database system was not properly shut down; automatic recovery in progress
   LOG:  redo starts at 86/26F302B0
   LOG:  unexpected pageaddr 85/E3F52000 in log file 134, segment 38, offset 16064512
   LOG:  redo done at 86/26F51FC0
   LOG:  last completed transaction was at log time 2013-04-02 11:50:47.663599+00
   LOG:  database system is ready to accept connections
   LOG:  autovacuum launcher started 
```

很奇怪，我的 postgresql 服务器仅仅因为我的恢复而“重新启动”。我尝试尽量减少工作数量（`-j 5`选项），但仍然遇到同样的问题。但是，在具有更好规格的节点上，我可以毫无问题地恢复此数据库。我不确定，但也许我的索引的更新（其中一个真的太大）可能是理解这个问题的线索？

所以我有一些问题：有没有更好的方法来恢复非常大的数据库？我错过了 pg_restore 命令中的某些内容吗？可能是我的开发服务器设置太低了？

任何线索将不胜感激。预先感谢。

env：PostgreSQL 9.1（通过 Debian 软件包安装）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T08:56:58.823

对于这种大型工作，建议在恢复过程中禁用`autovacuum`（通过`off`在您的*postgresql.conf中设置）。*

看来它终于对我有用了。

# arrays - LoadRunner Correlation：从服务器响应中捕获动态数组值

> ID：15765607
> 
> 赞同：0
> 
> 时间：2013-04-02T13:37:41.647
> 
> 标签：arrays, dynamic, capture, correlation, loadrunner

我正在尝试进行关联以从服务器响应中捕获动态数组值。问题是服务器正在返回我想在 javascript 函数中捕获的列表，但我无法捕获它。

这是片段

web_submit_data("planner.do", "Action= [https://www.irctc.co.in/cgi-bin/bv60.dll/irctc/booking/planner.do?BV_SessionID=](https://www.irctc.co.in/cgi-bin/bv60.dll/irctc/booking/planner.do?BV_SessionID=) {Session_Param}&BV_EngineID={Engine_Param}" , "Method=POST", "RecContentType=text/html", "Referer= [https://www.irctc.co.in/cgi-bin/bv60.dll/irctc/booking/planner.do?screen=fromlogin&BV_SessionID=](https://www.irctc.co.in/cgi-bin/bv60.dll/irctc/booking/planner.do?screen=fromlogin&BV_SessionID=){Session_Param}&BV_EngineID={Engine_Param}"、"Snapshot=t87.inf"、"Mode=HTTP"、ITEMDATA、"Name=BV_SessionID"、"Value={Session_Param}"、ENDITEM、"Name=BV_EngineID"、"Value ={Engine_Param}”，ENDITEM，“Name=submitClicks”，“Value=1”，ENDITEM，“Name=screen”，“Value=trainsFromTo”，ENDITEM，“Name=browser”，“Value=::: Explorer： :: 浏览器版本为 ::: 6，操作系统为 : Windows :: End of Navigator Info", ENDITEM, "Name=pressedGo", "Value=", ENDITEM, "Name=changetext", "Value=0", ENDITEM，“名称=bookTicket”，“值=”，ENDITEM，“名称=stationFrom”，"Value={stationFrom_Param}"、ENDITEM、"Name=stationTo"、"Value={stationTo_Param}"、ENDITEM、"Name=CurrentMonth"、"Value=3"、ENDITEM、"Name=CurrentDate"、"Value=2 "，ENDITEM，"Name=CurrentYear"，"Value=2013"，ENDITEM，"Name=day"，"Value=26"，ENDITEM，"Name=month"，"Value=5"，ENDITEM，"Name=year ", "Value=2013", ENDITEM, "Name=JDatee1", "Value=26/05/2013", ENDITEM, "Name=userType", "Value=0", ENDITEM, "Name=ticketType", "Value =ticket"、ENDITEM、"Name=quota"、"Value=GN"、ENDITEM、"Name=timedate"、"值=15”，ENDITEM，“名称=backRoute”，“值=true”，ENDITEM，“名称=提交”，“值=查找火车”，ENDITEM，“名称=selectedIndex”，“值=1”，ENDITEM， “名称=用户名”、“值=”、ENDITEM、“名称=密码”、“值=”、ENDITEM、LAST）；

结果，一个列表 os 像 4 train found 或 7 train found 一样回来，我想关联那个值。如果需要什么请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:58:37.257

除非您的 JavaScript 函数在服务器上执行并返回该函数，否则您无法“捕获它”。捕获仅用于从服务器返回的信息。

如果这是将数据流生成回服务器的客户端 JavaScript，则获取 JavaScript 函数并将其重写为 C 函数，以计算您需要合并到脚本中的值。或者，将您的客户端代码开发模型在 OSI 模型堆栈中向上移动到将为您执行 JavaScript 的 VUSER 类型，例如 TruClient、GUI、Citrix 或 RDP。

这个答案利用了客户端架构、服务器架构中的核心性能测试专业基础技能和测试工具语言的开发技能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-25T12:12:22.987

```
Action()
{
  int i;
  int ncount;
  char ParamName[100];

  web_set_sockets_option("SSL_VERSION", "TLS");
  web_reg_save_param("trackingno","LB=;","RB= (NTN 0430)","search=All","ord=all",LAST);
  web_submit_data("barcode.pl", 
    "Action=http://qtetools.rmtc.fedex.com/barcode/cgi-bin/barcode.pl", 
    "Method=POST", 
    "TargetFrame=", 
    "RecContentType=text/html", 
    "Referer=http://qtetools.rmtc.fedex.com/barcode/html/barcode.shtml", 
    "Snapshot=t2.inf", 
    "Mode=HTML", 
    ITEMDATA, 
    "Name=formcode", "Value=0430", ENDITEM, 
    "Name=count", "Value=10", ENDITEM, 
    "Name=narrow", "Value=2", ENDITEM, 
    LAST);

  ncount= atoi(lr_eval_string("{trackingno_count}"));

  for (i =1;i <= ncount;i++)
  {
    sprintf(ParamName, "{trackingno_%d}", i);
    lr_output_message("Value of %s: %s",ParamName,lr_eval_string(ParamName));
  }

  return 0;
} 
```

# c# - 通过 linq 过滤列表

> ID：15765609
> 
> 赞同：-4
> 
> 时间：2013-04-02T13:37:46.893
> 
> 标签：c#, linq, where-clause

我有一个列表如下（EN是你可以说默认值）

> id="1", lang="FR", value="text1FR"
> id="1", lang="EN", value="text1EN"
> id="2", lang="EN", value="text2EN "
> id="3", lang="FR", value="text3FR"
> id="3", lang="EN", value="text3EN"

有没有办法通过 linq 过滤这个列表以获得这个结果？（如果有就拿FR，否则就拿一直在那里的EN）

> id="1", lang="FR", value="text1FR"
> id="2", lang="EN", value="text2EN"
> id="3", lang="FR", value="text3FR "

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:41:02.990

```
var result = list.GroupBy(x => x.id)
    .Select(g => g.Any(x => x.lang=="FR") 
                 ? g.First(x => x.lang=="FR")
                 : g.First(x => x.lang=="EN")); 
```

这更有效：

```
var result = list.GroupBy(x => x.id)
    .Select(g => g.Where(x => x.lang == "FR")
                  .DefaultIfEmpty(g.First(x => x.lang == "EN"))
                  .First()); 
```

# bnf - bnf 转换器中的拟合顺序

> ID：15765614
> 
> 赞同：1
> 
> 时间：2013-04-02T13:37:53.713
> 
> 标签：bnf, bnfc

我对 bnf 转换器中的规则优先级有疑问。这里我复制一些规则

```
CParams. CallParams ::= [CallParam] ;
separator CallParam "," ;
VarCParam. CallParam ::= Ident ;
ExpCParam. CallParam ::= Exp ;
BExpCParam. CallParam ::= BExp ;
[...]
EVar. Exp3 ::= Ident ;
[...]
BVar. BExp2 ::= Ident ; 
```

我写了一个示例程序：

```
void p(int a) {
    a = a+7;
    print a;
}
main() {
    int i;
    p(i);
} 
```

结果，我希望 p(i) 将被转换为 CParams [VarCParam (Ident "i")]，但它被转换为 CParams [BExpCParam (BVar (Ident "i"))]。

你能告诉如何更改规则以修复此错误吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T11:49:31.783

您的语法存在冲突：两种树都是可能的。`happy`只需选择一种方式，但在编译过程中可能会打印出类似这样的内容：

```
reduce/reduce conflicts: 2 
```

要修复它，您必须删除这些规则之一：

```
VarCParam. CallParam ::= Ident ;
BExpCParam. CallParam ::= BExp ;
BVar. BExp2 ::= Ident ; 
```

# jquery - jquery柔滑的选框，仅当悬停在锚点上时才暂停，而不是在div上

> ID：15765615
> 
> 赞同：0
> 
> 时间：2013-04-02T13:37:55.023
> 
> 标签：jquery, jquery-plugins, marquee

我正在使用[这个](http://remysharp.com/2008/09/10/the-silky-smooth-marquee/) jquery 插件，即'The Silky Smooth Marquee'来创建一个选取框。

HTML

```
<div class="news_marquee">

<a href="1.php">aaaaa</a>  <a href="2.php">bbbb</a>  <a href="3.php">ccc</a>

</div> 
```

Javascript 片段：

```
$('.news_marquee').marquee().mouseover(function () {
  $(this).trigger('stop');
}).mouseout(function () {
  $(this).trigger('start');
}); 
```

结果，将光标放在选框上会`div`暂停它，但我只想在光标位于类`a`内的标签上时暂停它`news_marque`；

我尝试使用以下代码

```
 $('.news_marquee').marquee();
    $('.news_marquee a').mouseover(function () {
    $('.news_marquee').trigger('stop');
    }).mouseout(function () {
    $('.news_marquee').trigger('start');
    }); 
```

但这不起作用。

如何实现我的愿望？

**编辑：**当从左到右选取框开始时，选取框到达左端需要时间，在此期间，如果将鼠标放在左端旁边的空白处，选取框会暂停，但我想暂停它只有当鼠标在`a`标签上，即把光标放在空白处时，才不应暂停它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:42:21.440

我认为这会起作用：

```
$('.news_marquee a').marquee().mouseover(function () {
  $('.news_marquee').trigger('stop');
}).mouseout(function () {
  $('.news_marquee').trigger('start');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:56:23.623

从 Johan Sunden 的回答中得到帮助，并以这种方式找到了解决方案：

```
$('.news_marquee').marquee().mouseover(function (e) {

    if ($(e.target).is('a')) {

$(this).trigger('stop');    
    }

}).mouseout(function () {
  $(this).trigger('start');
}); 
```

**编辑：**更正了先前粘贴的代码片段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:47:55.907

使用结合 Jquery 方法的目标属性（[http://api.jquery.com/is/](http://api.jquery.com/is/)）。

```
$('.news_marquee').mouseover(function (e) {
    if ($(e.target).is('a')) {
        // Hovers anchor tag!
    }
} 
```

# python - 让 Celery 广播所有工作人员的返回结果

> ID：15765618
> 
> 赞同：3
> 
> 时间：2013-04-02T13:38:04.293
> 
> 标签：python, celery, celery-task

有没有办法从芹菜广播任务的每个工人那里获得所有结果？我想监控所有工人是否一切正常。将任务发送到的工人列表也将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:33:13.780

不，这不容易。

但是您不必将自己限制在内置的 amqp 结果后端，您可以使用 Kombu ( [http://kombu.readthedocs.org](http://kombu.readthedocs.org) ) 发送自己的结果，这是 Celery 使用的消息传递库：

```
from celery import Celery
from kombu import Exchange

results_exchange = Exchange('myres', type='fanout')

app = Celery()

@app.task(ignore_result=True)
def something():
    res = do_something()
    with app.producer_or_acquire(block=True) as producer:
        producer.send(
            {'result': res},
            exchange=results_exchange,
            serializer='json',
            declare=[results_exchange],
        ) 
```

`producer_or_acquire``kombu.Producer`将使用 celery 代理连接池创建一个新的。

# javascript - 已加载 DOM 的时间戳问题

> ID：15765620
> 
> 赞同：0
> 
> 时间：2013-04-02T13:38:07.927
> 
> 标签：javascript, jquery, timestamp

我正在为圆形仪表编写一个 jQuery 小部件（CSS3 随边框半径、旋转和剪辑而增长）。我在页面上有很多 CSS/images/js。

如果我在 DOM 加载时执行小部件代码：

```
$(document).ready(function(){
  $(".gauge").gauge();
}); 
```

我遇到了一些时间戳问题，我的代码运行不正常。时间戳 timerFinish 总是低于新的时间戳，所以 seconds 变量是负数，而 percent 总是优于 120/150 所以代码永远不会执行......就像 _create 函数一次运行并且第一个 setInterval （ _stopJauge fn) 运行很长时间。

但如果我这样做：

```
$(window).load(function(){
  $(".gauge").gauge();
}); 
```

该代码有效...

问题在于时间戳之间的差异。

如果有人对此行为有解释？

这是代码：

```
(function($){

    $.widget("as.gauge", {

        options: {
            timerSeconds: 3
        },

        _create: function() {
            var self = this;
            this._startTimer();
        },

        _startTimer: function(){
            var self = this;

            this.timerFinish = new Date().getTime() + (this.options.timerSeconds * 1000);
log('Timerfinish : ' + this.timerFinish)

            this.timer = setInterval(function(){
                log("milli : "+new Date().getMilliseconds())
                self._stopJauge();
            }, 50);
        },

        _endTimer: function(){
            clearInterval(this.timer);
        },

        _drawTimer: function(percent) {
            var deg = 360 / 100 * percent;
            percent = Math.round(percent);

            this.element.html('<div class="percent"></div><div id="slice"' +
                (percent > 50 ? ' class="gt50"' : '') +
                '><div class="pie"></div>' +
                (percent > 50 ? '<div class="pie fill"></div>' : '') +
                '</div>'
            ).find('#slice .pie').css({
                '-moz-transform' : 'rotate(' + deg + 'deg)',
                '-webkit-transform' : 'rotate(' + deg + 'deg)',
                '-o-transform' : 'rotate(' + deg + 'deg)',
                'transform' : 'rotate(' + deg + 'deg)'
            });
            this.element.find('.percent').html('<span class="int">' + percent + '%</span>');
        },

        _stopJauge: function(data) {
            var seconds = (this.timerFinish - new Date().getTime()) / 1000,
                percent = 100 - ((seconds / this.options.timerSeconds) * 100);
log('stopJauge - getTime : ' + new Date().getTime());
log('timerfinish - new Date() = ' + (this.timerFinish - new Date().getTime()))
log('seconds : ' + seconds)
log('percent : ' + percent)

            if (percent <= this.element.data('value')){
                this._drawTimer(percent);
            } else {
                this.element.find('.percent .int').html(this.element.data('value') + '%');
                this._endTimer();
            }
        }
    });

}(jQuery)); 
```

# vb.net - 泛型多态性

> ID：15765622
> 
> 赞同：0
> 
> 时间：2013-04-02T13:38:13.320
> 
> 标签：vb.net

请看下面的代码：

```
 Public Class Student
    Public Sub PassList(ByVal StudentList As List(Of Student))
        Dim s1 As New Student
        Dim s2 As New Student
        Dim s3 As New Student
        StudentList.Add(s1)
        StudentList.Add(s2)
        StudentList.Add(s3)
    End Sub

    Public Sub TestReturnList()
        Dim list As List(Of PostGraduate)
        PassList(list)
    End Sub

End Class

Public Class PostGraduate
    Inherits Student
End Class

Public Class PostUndergraduate
    Inherits Student
End Class 
```

有一个编译器错误：

> 'System.Collections.Generic.List(Of WindowsApplication1.PostGraduate)' 类型的值无法转换为 'System.Collections.Generic.List(Of WindowsApplication1.Student)

我理解错误的原因。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:46:55.103

你的问题是关于*方差*的。尝试改变这个：

```
Public Sub PassList(ByVal StudentList As List(Of Student))

End Sub 
```

对此：

```
Public Sub PassList(ByVal StudentList As IEnumerable(Of Student))

End Sub 
```

*泛型*类型参数的变体是 .NET 4.0 中的一项新功能。

在此处阅读有关[协变和逆变的](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)更多信息。

# c# - 带有 IText 的 MeasureString

> ID：15765623
> 
> 赞同：1
> 
> 时间：2013-04-02T13:38:14.387
> 
> 标签：c#, itextsharp

我希望我的列的宽度是自动大小，但我知道这是不可能的，所以我尝试使用该函数`MeasureString`但没有成功。

这是我的代码：

```
Document doc = new Document(PageSize.A4, 20, 20, 72, 72);
doc.Open();
PdfPTable t=new PdfPTable(2);
//Here I want to know the size of the column.
.
.
.
doc.Close(); 
```

我知道我需要一个对象来设置`MeasureString`它的功能，但我不知道是哪个对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:16:15.370

调用`GetWidthPoint(string text, float fontSize)`的实例`iTextSharp.text.Font.BaseFont`将返回该特定字体的给定字符串的宽度。

# git - 如何以不需要绕过 gitolite 的方式配置 gitolite 回购路径？为什么 gitlab 应用程序在正确的路径上创建存储库？

> ID：15765625
> 
> 赞同：1
> 
> 时间：2013-04-02T13:38:23.447
> 
> 标签：git, gitolite

我已经用 gitolite 安装了 Gitlab，整个站点工作正常，它创建 repos 就好了......

但是，当我尝试从开发机器推送一些代码时，它会引发一个错误......

```
git init
git remote add origin ssh://git@gitbox.com:10000/test_of_mine.git
git add .
git commit -m "first commit"
git push origin master 
```

输出：

```
fatal: '/test_of_mine.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

当我绕过 gitolite，添加一个具有完整路径的遥控器时，它会找到 repo，但由于绕过而导致另一个错误

```
git remote add origin ssh://git@gitbox.com:10000/~git/repositories/test_of_mine.git 
```

返回

```
 Delta compression using up to 4 threads.
  Compressing objects: 100% (329/329), done.
  Writing objects: 100% (667/667), 785.81 KiB, done.
  Total 667 (delta 327), reused 639 (delta 311)
  remote: Empty compile time value given to use lib at hooks/update line 6
  remote: Use of uninitialized value in require at hooks/update line 7.
  remote: Can't locate Gitolite/Hooks/Update.pm in @INC (@INC contains:  /etc/perl /usr/local/lib/perl/5.10.1 /usr/local/share/perl/5.10.1 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.10 /usr/share/perl/5.10 /usr/local/lib/site_perl .) at hooks/update line 7.
  remote: BEGIN failed--compilation aborted at hooks/update line 7.
  remote: error: hook declined to update refs/heads/master
  To ssh://git@gitbox.com:10000/~git/repositories/test_of_mine.git
   ! [remote rejected] master -> master (hook declined)
  error: failed to push some refs to 'ssh://git@gitbox.com:10000/~git/repositories/test_of_mine.git' 
```

为什么我会收到此错误？我是否缺少任何路径配置？

如何配置 gitolite 回购路径，我不需要绕过 gitolite 的方式？

为什么 gitlab 应用程序运行良好，在正确的路径上创建存储库，而不会引发任何错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:18:56.140

对于GitLab4.2， [Issue 2950](https://github.com/gitlabhq/gitlabhq/issues/2950)提到了同样的错误（请注意，GitLab 5.0 不再使用 gitolite）。

尝试升级到最新的 GitLab（使用[`gitlab-shell`](https://github.com/gitlabhq/gitlab-shell)而不是 gitolite）。

或者至少仔细检查 a in 的存在`/home/git/repositories/`。

您不应该尝试在当前设置中绕过 gitolite，但在[Issue 1495](https://github.com/gitlabhq/gitlabhq/issues/1495)中也可以看到第二条消息：

> 它发生是因为`$ENV{GL_LIBDIR}`未设置并且是[`~/.gitolite/hooks/common/update`](https://github.com/sitaramc/gitolite/blob/master/src/lib/Gitolite/Hooks/Update.pm#L162).

gitolite的安装肯定是不完整的。另外请确保您的 gitolite 是 V3.x，而不是 V2。

# c++ - std::forward_list - 如何在末尾插入元素

> ID：15765631
> 
> 赞同：8
> 
> 时间：2013-04-02T13:38:44.637
> 
> 标签：c++, c++11, stl

forward_list 是一个单链表（与标准列表容器不同）。list 具有在前面和后面插入的功能，但 forward_list 没有在后面插入元素的功能（类似于 push_back）。为什么不能在列表后面插入元素？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T14:17:49.227

这是一个深思熟虑的设计决策，`forward_list`与单链表相比应该不会产生任何开销。这在 C++11 标准 (23.3.4.1) 中有说明：

> *注意：*`forward_list`相对于手写的 C 样式单链表，它的空间或时间开销为零。与该目标相冲突的功能已被省略。

维护指向列表末尾的指针会增加空间开销（对于指针本身）和时间开销（在列表末尾插入或删除元素时更新指针）。

# ios - 从 iOS 版本 6.1.3 的通讯录数据库中获取联系人时崩溃？

> ID：15765636
> 
> 赞同：2
> 
> 时间：2013-04-02T13:39:08.157
> 
> 标签：ios, ios6, contacts, abaddressbook

我已经开发了从通讯录数据库中获取联系人的应用程序。为此，实现的代码对于 iOS 6.0 版来说是正常的，但它在 iOS 6.1.3 上会崩溃。

我已经实现从通讯簿数据库中获取联系人的代码：

```
ABAddressBookRef addressBook;

if ([self isABAddressBookCreateWithOptionsAvailable]) {
    // iOS 6
    CFErrorRef error = nil;
    addressBook = ABAddressBookCreateWithOptions(NULL,&error);
    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) { });
    ABAddressBookRevert(addressBook);
} else {
    // iOS 4/5
    addressBook = ABAddressBookCreate();
}

-(BOOL)isABAddressBookCreateWithOptionsAvailable
{
    return &ABAddressBookCreateWithOptions != NULL;
} 
```

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:00:00.763

我不确定这段代码是否会崩溃，但我认为这应该在 iOS 6.1.3 中运行

```
-(IBAction)btnShowContactClicked {
//ABAddressBookRef addressBook = ABAddressBookCreate();
CFErrorRef *aberror = NULL;
addressBook = ABAddressBookCreateWithOptions(NULL, aberror);
__block BOOL accessGranted = NO;

if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS 6
    dispatch_semaphore_t sema = dispatch_semaphore_create(0);

    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
        accessGranted = granted;
        dispatch_semaphore_signal(sema);
    });

    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
    dispatch_release(sema);
}
else { // we're on iOS 5 or older
    accessGranted = YES;
}

if (accessGranted) {
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController  alloc] init];
    picker.peoplePickerDelegate = self;
    [self presentViewController:picker animated:YES completion:nil];
    //  //[self.navigationController presentModalViewController:picker animated:YES];
    [picker release];
}
} 
```

# c# - linq to sql，从查询开始

> ID：15765637
> 
> 赞同：4
> 
> 时间：2013-04-02T13:39:09.467
> 
> 标签：c#, .net, sql, linq

我有一个语言表：

```
LangId LangName
1       English
2       EngTest
3       Germany 
```

我想写一个查询，显示 LangName 开始 'Eng'

`var query = dc.Languages.Where(p=>p.LangName.Contains(txtBxLangNameFilter.Text));`

我是 linq to sql 的新手。谁能教我怎么写？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T13:40:29.233

`Contains`测试是否在任何位置的字符串中找到字符串。由于您要测试以某个字符串开头的字符串，请使用`StartsWith()`.

```
var query = dc.Languages
              .Where(p => p.LangName.StartsWith(txtBxLangNameFilter.Text)); 
```

*   [String.StartsWith 方法](http://msdn.microsoft.com/en-us/library/baketfxw.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:40:40.803

您想更改`Contains`为`StartsWith`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:43:02.617

使用 StartsWith 而不是 Contains

```
var query = dc.Languages.Where(p=>p.LangName.StartsWith(txtBxLangNameFilter.Text)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:46:04.160

使用`StartsWith()`这里的方法将是你最好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-17T07:25:47.847

```
var Lang= from language in  dc.Languages
            where language.LangName.StartsWith("Eng")
            select  language.LangName; 
```

# javascript - 定位 div 中的所有链接 — Javascript

> ID：15765639
> 
> 赞同：5
> 
> 时间：2013-04-02T13:39:21.330
> 
> 标签：javascript, dom

我正在尝试定位某个 div 中的链接。我了解如何定位所有链接，如下所示：

```
var colors = [ 'BlueViolet', 'CadetBlue', 'Coral', 'Crimson', 'DarkGoldenRod', 'DarkOliveGreen'],
    a = document.getElementsByTagName('a');

for(var i = 0; i < a.length; i++) {
    var elem = a[i],
        color = colors[0];
    elem.style.color = color;
    colors.push(color);
    colors.shift();
} 
```

显然，它针对所有链接： http: [//lexicantest.tumblr.com/](http://lexicantest.tumblr.com/)

有没有办法让我定位某个 id/class 中的所有链接？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T13:40:25.287

对于身份证：

```
var a = document.getElementById('divYouwant').getElementsByTagName('a');
for (var i = 0; i < a.length; i++) {
    var elem = a[i],
        color = colors[0];
    elem.style.color = color;
    colors.push(color);
    colors.shift();
} 
```

如果你想从一个类中抓取它，你必须抓取每个类，然后抓取每组锚标签......

```
var divs = document.getElementsByClassName('className');
for (var i = 0; i < divs.length; i++) {
    var a = divs[i].getElementsByTagName('a');
    for (var j = 0; j < a.length; j++) {
        var elem = a[j],
            color = colors[0];
        elem.style.color = color;
        colors.push(color);
        colors.shift();
    }
} 
```

基本上，您遵循与获取所有链接相同的概念。唯一的区别是您不使用文档作为参考。首先，您获取所需的 div，然后从那里获取所有锚标记的数组。

# linux - 搜索 x 天未访问的文件

> ID：15765640
> 
> 赞同：11
> 
> 时间：2013-04-02T13:39:27.390
> 
> 标签：linux, bash, ubuntu

如何在 Linux 中找到X 天**未访问的文件？**

我找到了该命令，但它会显示过去 x 天查看的文件：

```
$ find /home/you -iname "*.pdf" -atime -60 -type -f 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T13:40:18.697

用于`-atime +60`查看过去 60 天内未访问的文件：

```
find /home/you -iname "*.pdf" -atime +60 -type f 
```

# teamcity - TeamCity 构建代理注册期间的 XmlRpcException

> ID：15765643
> 
> 赞同：2
> 
> 时间：2013-04-02T13:39:34.640
> 
> 标签：teamcity, teamcity-7.0

我已经通过几种不同的方式在我的机器上安装了 TeamCity 构建代理 - 使用 Java Web Start 和手动 .zip 分发。两者都产生了可行的安装，因为我曾经一两次能够正确连接并注册到 TeamCity 服务器。但是，在重新启动 ( `<install_location>/bin/agent.sh stop`... `<install_location>/bin/agent.sh start`) 时，我在 teamcity-agent.log 中收到以下错误（在 log4j 配置文件中打开了额外的调试）。

```
    [2013-04-03 09:05:09,870] 调试 - jetbrains.buildServer.XMLRPC - faultStringjava.lang.RuntimeException：org.jdom.input.JDOMParseException：第 28 行错误：XML 文档结构必须在同一实体内开始和结束.faultCode0
    [2013-04-03 09:05:09,878] 调试 - buildServer.AGENT.registration - jetbrains.buildServer.xmlrpc.RemoteCallException：调用 http://teamcityserver:8080/RPC2 buildServer.registerAgent3：org.apache.xmlrpc.XmlRpcException： java.lang.RuntimeException：org.jdom.input.JDOMParseException：第 28 行错误：XML 文档结构必须在同一实体内开始和结束。
    jetbrains.buildServer.xmlrpc.RemoteCallException：调用 http://teamcityserver:8080/RPC2 buildServer.registerAgent3：org.apache.xmlrpc.XmlRpcException：java.lang.RuntimeException：org.jdom.input.JDOMParseException：第 28 行错误：XML文档结构必须在同一个实体内开始和结束。
      在 jetbrains.buildServer.xmlrpc.AbstractXmlRpcTarget.call(AbstractXmlRpcTarget.java:94)
      在 jetbrains.buildServer.agent.impl.ServerXmlRpcProxy.registerAgent3(ServerXmlRpcProxy.java:62)
      在 jetbrains.buildServer.agent.impl.BuildAgentImpl.doRegisterOnBuildServer(BuildAgentImpl.java:776)
      在 jetbrains.buildServer.agent.impl.BuildAgentImpl.registerOnBuildServer(BuildAgentImpl.java:748)
      在 jetbrains.buildServer.agent.impl.ServerMonitor.run(ServerMonitor.java:71)
    原因：org.apache.xmlrpc.XmlRpcException：java.lang.RuntimeException：org.jdom.input.JDOMParseException：第 28 行错误：XML 文档结构必须在同一实体内开始和结束。
      在 org.apache.xmlrpc.XmlRpcClientResponseProcessor.decodeException（XmlRpcClientResponseProcessor.java:104）
      在 org.apache.xmlrpc.XmlRpcClientResponseProcessor.decodeResponse(XmlRpcClientResponseProcessor.java:71)
      在 org.apache.xmlrpc.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:73)
      在 org.apache.xmlrpc.TCXmlRpcClient$1.execute(TCXmlRpcClient.java:89)
      在 org.apache.xmlrpc.XmlRpcClient.execute(XmlRpcClient.java:194)
      在 org.apache.xmlrpc.XmlRpcClient.execute(XmlRpcClient.java:185)
      在 org.apache.xmlrpc.XmlRpcClient.execute(XmlRpcClient.java:178)
      在 jetbrains.buildServer.xmlrpc.impl.CommonsXmlRpcTargetImpl$1.execute(CommonsXmlRpcTargetImpl.java:72)
      在 jetbrains.buildServer.xmlrpc.AbstractXmlRpcTarget.call(AbstractXmlRpcTarget.java:84)
      ... 4 更多
    [2013-04-03 09:05:09,878] 警告 - buildServer.AGENT.registration - 调用 http://teamcityserver:8080/RPC2 buildServer.registerAgent3: org.apache.xmlrpc.XmlRpcException: java.lang.RuntimeException: org. jdom.input.JDOMParseException：第 28 行错误：XML 文档结构必须在同一实体内开始和结束。
    [2013-04-03 09:05:09,878] 警告 - buildServer.AGENT.registration - 与 TeamCity 服务器的连接可能已丢失。将尝试恢复它。查看 logs/teamcity-agent.log 了解详细信息（除非您使用自定义日志记录）。

```

根据带有额外 xmlrpc 调试的日志，这是有问题的 xml：

```
<?xml version="1.0"?><methodCall><methodName>buildServer.registerAgent3</methodName><params><param><value><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<agentDetails agentName="aaronhbox_0" agentPort="9090" authToken="" osName="Linux, version 3.5.0-17-generic">
  <alternativeAddresses>
    <address>10.2.1.232</address>
    <address>192.168.225.1</address>
    <address>192.168.80.1</address>
  </alternativeAddresses>
  <availableRunners>
    <runner runType="Ant" />
    <runner runType="Duplicator" />
    <runner runType="gradle-runner" />
    <runner runType="Inspection" />
    <runner runType="Ipr" />
    <runner runType="JPS" />
    <runner runType="Maven2" />
    <runner runType="rake-runner" />
    <runner runType="simpleRunner" />
  </availableRunners>
  <availableVcs>
    <vcs name="perforce" />
    <vcs name="mercurial" />
    <vcs name="jetbrains.git" />
    <vcs name="svn" />
    <vcs name="cvs" />
  </availableVcs>
  <buildParameters>
    <param name="env.COLORTERM" value="gnome-terminal" />
    <param name="env.COMP_WORDBREAKS"><![CDATA["'><;|]]></value></param></params></methodCall> 
```

我只有一次能够重新启动代理并让它再次正确连接。一般来说，我可以安装它，让它运行一次，然后重新启动它会出现这个错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:56:00.827

看起来`COMP_WORDBREAKS`环境变量的格式与 xml 结构混淆，不允许完整生成 xml 请求消息。

`COMP_WORDBREAKS`我机器上的值是`"'><;|&(:`. 将以下行放在 buildAgent.properties 文件中解决了这个问题并允许代理正确注册。

`env.COMP_WORDBREAKS=`

我还没有看到进行此更改的任何副作用。代理现在似乎表现正常。

# java - JBoss HelloWorld 应用程序无法启动

> ID：15765651
> 
> 赞同：7
> 
> 时间：2013-04-02T13:39:49.127
> 
> 标签：java, jboss7.x

你好，

我正在尝试启动 JBoss 示例应用程序“jboss-as-helloworld”。并得到这样的例外：

```
16:23:51,118 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) Starting deployment of "jboss-as-helloworld.war"
16:23:51,176 INFO  [org.jboss.weld] (MSC service thread 1-5) Processing CDI deployment: jboss-as-helloworld.war
16:23:51,178 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.deployment.unit."jboss-as-helloworld.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.unit."jboss-as-helloworld.war".INSTALL: Failed to process phase INSTALL of deployment "jboss-as-helloworld.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:121)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1765)
    at org.jboss.msc.service.ServiceControllerImpl$ClearTCCLTask.run(ServiceControllerImpl.java:2291)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [:1.7.0_02]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [:1.7.0_02]
    at java.lang.Thread.run(Thread.java:722) [:1.7.0_02]
Caused by: org.jboss.msc.service.DuplicateServiceException: Service jboss.naming.context.java.app.jboss-as-helloworld is already registered
    at org.jboss.msc.service.ServiceRegistrationImpl.setInstance(ServiceRegistrationImpl.java:154)
    at org.jboss.msc.service.ServiceControllerImpl.startInstallation(ServiceControllerImpl.java:226)
    at org.jboss.msc.service.ServiceContainerImpl.install(ServiceContainerImpl.java:560)
    at org.jboss.msc.service.ServiceTargetImpl.install(ServiceTargetImpl.java:201)
    at org.jboss.msc.service.ServiceControllerImpl$ChildServiceTarget.install(ServiceControllerImpl.java:2194)
    at org.jboss.msc.service.ServiceTargetImpl.install(ServiceTargetImpl.java:201)
    at org.jboss.msc.service.ServiceControllerImpl$ChildServiceTarget.install(ServiceControllerImpl.java:2194)
    at org.jboss.msc.service.ServiceBuilderImpl.install(ServiceBuilderImpl.java:307)
    at org.jboss.as.ee.naming.ApplicationContextProcessor.deploy(ApplicationContextProcessor.java:62)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:115)
    ... 5 more

16:23:51,180 INFO  [org.jboss.as.server.controller] (DeploymentScanner-threads - 2) Deployment of "jboss-as-helloworld.war" was rolled back with failure message {"Failed services" => {"jboss.deployment.unit.\"jboss-as-helloworld.war\".INSTALL" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"jboss-as-helloworld.war\".INSTALL: Failed to process phase INSTALL of deployment \"jboss-as-helloworld.war\""}}
16:23:51,191 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) Stopped deployment jboss-as-helloworld.war in 10ms
16:23:51,192 ERROR [org.jboss.as.deployment] (DeploymentScanner-threads - 1) {"Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"Failed services" => {"jboss.deployment.unit.\"jboss-as-helloworld.war\".INSTALL" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"jboss-as-helloworld.war\".INSTALL: Failed to process phase INSTALL of deployment \"jboss-as-helloworld.war\""}}}} 
```

JBoss 7.0 Runtime Server 已经启动，我可以访问 JBoss 启动页面`http://localhost:8080`和 JBoss 控制台。

我没有更改任何代码或 xml，一切都是默认的。告诉我是否需要提供其他信息来调查此问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:44:10.893

从错误中，看起来“Hello world”已经部署在服务器上（也许您选择安装示例）：

```
Caused by: org.jboss.msc.service.DuplicateServiceException: Service jboss.naming.context.java.app.jboss-as-helloworld is already registered 
```

尝试取消部署此应用，然后再次部署。或者您可以重命名您的第一个“hello world”应用程序并进行部署——这样就不会有名称冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-25T08:25:06.960

这些是我为解决问题而采取的步骤。

1.  停止服务器。
2.  转到部署路径。
3.  手动删除部署文件夹中的现有项目。
4.  重新启动了服务器
5.  再次部署应用程序。

# maven - FTP客户端无法在felix中解析

> ID：15765656
> 
> 赞同：1
> 
> 时间：2013-04-02T13:40:02.207
> 
> 标签：maven, maven-2, osgi, ftp-client, apache-felix

我面临一个问题，即捆绑部署到 Felix 控制台时无法解决 org.apache.commons.net.ftp.ftpclient。我还在 pom.xml 中添加了一个 Maven 依赖项。但没有得到我该如何解决这个问题。

由于此捆绑包处于已安装状态且未进入活动状态。

任何建议都非常重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:05:32.263

好的罗伯特。解决方案我首先将commons-net.jar 转换为bundle，然后将其添加到apache felix 控制台，从而解决了这个问题。实际上问题是它在 Apache 控制台中没有包，所以我手动添加了它

# python - 将空列表分配给具有默认值的 StringListProperty 会导致实体具有默认值？

> ID：15765659
> 
> 赞同：2
> 
> 时间：2013-04-02T13:40:13.213
> 
> 标签：python, google-app-engine, google-cloud-datastore

下面的完整工作示例可以在交互式控制台中运行。

这是预期的吗？如果是这样，我有两个问题：

1) 请在 GAE 文档中说明这一点。

2）请显示一个模式，该模式在创建`db.Model`时默认为某些属性的填充列表，但仍允许我们稍后分配空列表（或无）。

```
from google.appengine.ext import db

class TestClass(db.Model):
    my_string_list = db.StringListProperty(default=['foo', 'bar'])

instance = TestClass()
instance.put()

print instance.my_string_list
#['foo', 'bar']

instance.my_string_list = []
instance.put()
print instance.my_string_list
#[]

instance2 = db.get(instance.key())
print instance2.my_string_list
#expected [], got ['foo', 'bar'] ??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:41:15.800

值得注意的是，对于 NDB（较新的数据存储 API），repeated、required 和 default 是互斥的。也就是说，重复属性（如 StringListProperty）不能有默认值。也许您需要重新设计，而不是使用默认值，而是创建一个函数来获取模型的新实例：

```
from google.appengine.ext import db

class TestClass(db.Model):
    my_string_list = db.StringListProperty(default=[])

    @classmethod
    def get_new_instance(cls):
       entity = cls()
       entity.my_string_list = ['foo', 'bar']
       return entity 
```

这一切都假设您打开的错误报告暂时不会得到解决。如果他们在 NDB 上不支持这一点，它可能会变成与旧 DB API 类似的情况。

# iphone - MSHookFunction 可以挂钩 C 函数，如 open、fopen 或 write 吗？

> ID：15765660
> 
> 赞同：2
> 
> 时间：2013-04-02T13:40:14.127
> 
> 标签：iphone, objective-c, jailbreak, theos, cydia-substrate

由于各种原因，我需要挂钩这些功能，尤其是`open`. 所以我在**theos**中写了这段代码来测试：

```
#import <CoreFoundation/CoreFoundation.h> 
#include <substrate.h>

static int (*orig_open)(const char * pathname,int oflag,...);

int new_open(const char * pathname,int oflag,...)
{                   
  printf("-------------------I have success hook the C function open");
  //static int crashed = 0;
  va_list va;
  mode_t mode = 0;
  va_start(va, oflag);
  if (oflag & O_CREAT) mode = va_arg(va, int);
  va_end(va);
  int ret = orig_open(pathname, oflag, mode);
  if (strcmp(pathname, "/dev/dlci.spi-baseband.sms") == 0) 
  {
     printf("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!@@@@@@@@@@@@@@@@@@@@~~~~~~~~~~~~~~~~~~~~~");
  }
  else
  {
     printf("~~%%");
  }
  return ret;
}
%ctor
{
   NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];    
   MSHookFunction((void *)open, (void *)new_open, (void **)&orig_open);   
   [pool drain];
} 
```

然而，似乎什么都没有发生。那么，我的代码有什么问题吗？

# mingw - FTGL 和 MinGW - 你打算如何在土星的第三个卫星上编译这个东西？

> ID：15765661
> 
> 赞同：3
> 
> 时间：2013-04-02T13:40:18.480
> 
> 标签：mingw, build-tools, ftgl

好的，我正在尝试让 FTGL 在 MinGW 上工作，但我在编译库时遇到了麻烦。

我到处搜索谷歌，尝试了许多不同的东西，最接近让它正常工作的是[这个问题](https://stackoverflow.com/questions/9347926/compile-with-mingw-and-install-correctly-ftgl-lib-to-render-text-in-opengl?lq=1)，但是，他假设你可以编译库......我遇到麻烦的这一步。

好的，所以我将 MinGW 与 Code::Blocks 一起使用，我可以运行 OpenGL + GLUT 程序，它可以编译并运行良好。

我对编译库不是很有经验，所以请温柔一点。

所以，FTGL 不使用 CMake，它使用`./configure`, `make`, `make install`... 我看到了不同的文件`configure.???`和`Makefile.???`文件，我相信这些文件与 autoconf 和 automake 一起使用。所以我尝试下载这些，没有可执行文件指向我的`PATH`环境变量，所以我发现他们使用 Python ......

现在，我似乎无法将 Python shell 放到正确的位置来运行`./configure`命令。不知怎的，我觉得我走错了方向。

嗯，这太难了，也许 MSYS 有内置的自动工具？好吧，如果是这样，我就无法导航到库的源文件，也找不到 autoconf 和 automake。

我要做的就是在 MinGW 中编译 FTGL。有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:02:08.857

几周前我遇到了同样的问题。我最终使用了一个 custom `Makefile`，虽然不那么方便，但非常可行，因为 FTGL 不是那么大。

如果发现这两个链接很有帮助：

*   [说明和示例 Makefile](http://leeboyge.blogspot.co.at/2011/03/compiling-ftgl-213rc5-on-windows-using.html)我只需很少修改
    就可以使用那里提供的`Makefile`
*   [FTGL头文件的适配](http://web.archive.org/web/20110304035729/http://www.pitt.edu/~mwr12/compcorner/linuxstuff/ftgl.html)

# html - 如何让 div 彼此相邻浮动？

> ID：15765665
> 
> 赞同：1
> 
> 时间：2013-04-02T13:40:26.923
> 
> 标签：html, css, css-float

目标：我想让我的 div 像这样彼此相邻浮动。

[http://jsfiddle.net/x8Abc/1/](http://jsfiddle.net/x8Abc/1/)

```
.post {
   float:left;
   padding:10px;
   margin:5px;
   border:1px solid #000;
   width:25%;
} 
```

问题：当我在 div 之间有一个长度更长的内容时，它会将下面的 div 推到一边。

[http://jsfiddle.net/W3afJ/](http://jsfiddle.net/W3afJ/)

```
.post {
   float:left;
   padding:10px;
   margin:5px;
   border:1px solid #000;
   width:25%;
} 
```

如何实现像 jsfiddle.net/x8Abc/1/ 这样的统一布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:59:10.953

你需要`display: inline-block`在这种情况下使用。

像这样修改你的CSS：

```
.post {
   display: -moz-inline-stack;
   display: inline-block;
   *display: inline;
   padding: 10px;
   margin: 5px;
   border: 1px solid #000;
   width: 25%;
   zoom: 1;
} 
```

[这也是一个小提琴](http://jsfiddle.net/zWReG/)

要垂直对齐块，请更改`vertical-align`css 属性，例如

```
.post {
   display: -moz-inline-stack;
   display: inline-block;
   *display: inline;
   padding: 10px;
   margin: 5px;
   border: 1px solid #000;
   width: 25%;
   zoom: 1;
   vertical-align: top;
} 
```

有关`display: inline-block`在 IE 中工作的更多信息（如上所述），请参见此处：

[https://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/](https://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:08:10.143

你有几个不同的选择：

1.  给每个帖子一个固定的高度，并将溢出属性设置为`auto`. 这将（显然）确保每个高度相同，从而避免一个浮动在其兄弟旁边的问题，但会在`div`s 中添加带有大量文本的滚动条，并在文本很少的底部添加空白空间（见[这里](http://jsfiddle.net/cherryflavourpez/H3mAw/)）：

    ```
    .post {
        float: left;
        padding:10px;
        margin:5px;
        border:1px solid #000;
        width:25%;
        height: 250px;
        overflow: auto;
     } 
    ```

2.  坚持`float`布置您的帖子，并确保清除每行中的第一个帖子（[查看实际操作](http://jsfiddle.net/cherryflavourpez/qWxpq/)）。可以这样实现*：

    ```
    .post:nth-child(3n + 1) { clear:both; } 
    ```

3.  改变你的布局你的帖子使用的方法`inline-block`，像这样：

    ```
    .post {
        display: inline-block;
        padding:10px;
        margin:5px;
        border:1px solid #000;
        width:25%;
     } 
    ```

[您的原始示例在这里](http://jsfiddle.net/cherryflavourpez/r2RFJ/)有一个分支。我建议使用这种方法，因为它使您能够根据需要垂直对齐您的帖子，并且不会限制每个类似选项 1 中的副本数量。[这篇文章](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)很好读，并详细说明了如何即使在较旧的浏览器中也能正常工作。

* 请注意，IE<9 不支持`nth-child`伪类，因此您需要这些浏览器的 JavaScript 后备。

# sql - 使用行枢轴删除重复项

> ID：15765667
> 
> 赞同：1
> 
> 时间：2013-04-02T13:40:39.623
> 
> 标签：sql, sql-server, xml, for-loop, pivot

我想删除一列（设备名称）中的重复项，但保留另一列（app_id）中的相关数据。每个设备可以有几个应用程序（1 -> x，通常在 1-5 之间）所以我想将这些应用程序标识符放入我想调用的新列中 [APP1]、[APP2]、[APP3] 等等. 最好的选择是动态 Pivot，但也欢迎任何静态解决方案。
提前感谢您的帮助。

PS我想出了下面的代码，但只是将用逗号分隔的APP id连接成一列。

```
 USE tempdb;
    SELECT  DEVICE_NAME,
        NoOfApps,
        STUFF(( SELECT  ', ' + APP_ID
                FROM    dbo.Aperture_full_test apps
                WHERE   apps.DEVICE_NAME = Aperture_full_test.DEVICE_NAME
                FOR XML PATH(''), TYPE
                ).value('.', 'VARCHAR(MAX)'), 1, 2, '') AS Appid

    FROM    (   SELECT  DEVICE_NAME, COUNT(DEVICE_NAME) AS NoOfApps
            FROM    dbo.Aperture_full_test
            GROUP BY DEVICE_NAME     
        ) Aperture_full_test
        ORDER BY NoOfApps DESC 
```

数据样本：

```
 USE tempdb;
    GO

    IF OBJECT_ID('dbo.Aperture_full_test') IS NOT NULL
    DROP TABLE dbo.Aperture_full_test;
    GO

    CREATE TABLE dbo.Aperture_full_test
    (
    DEVICE_NAME   varchar(30) NOT NULL,
    APP_ID        varchar(10) NOT NULL
    );

    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('LDNSQLF700', 157848);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('LDNSQLF700', 155439);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('LDNSQLF700', 635533);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('NYSQL502', 189164);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('NYSQL502', 188641);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('AUSSQL140', 537990);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('AUSSQL140', 1349605);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('JAP543X2', 5646789);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('EU456CLX', 6545789);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('EUCTX654', 5637965);
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('EUCTX654', 6464367) ;
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('EUCTX654', 1323123) ;
    INSERT INTO dbo.Aperture_full_test(DEVICE_NAME, APP_ID)
    VALUES('EUCTX654', 1004326) ;
    GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:58:21.403

由于您使用的是 SQL Server，因此您可以实现[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数。

如果您有已知数量的值，则可以使用以下命令对查询进行硬编码：

```
select device_name, App1, App2, App3, App4, App5
from
(
  select device_name, app_id,
    'App'+
      cast(row_number() over(partition by device_name 
                            order by device_name) as varchar(10)) col
  from Aperture_full_test
) d
pivot
(
  max(app_id)
  for col in (App1, App2, App3, App4, App5)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/9bdd3/10)。

但是，如果您要为每个设备设置未知数量的 app_id，那么您可以使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ', ' + QUOTENAME('App'+cast(rn as varchar(10))) 
                    from
                    (
                      select row_number() over(partition by device_name 
                                              order by device_name) rn
                      from Aperture_full_test
                    ) d
                    group by rn
                    order by rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT device_name, ' + @cols + ' from 
             (
                select device_name, app_id,
                  ''App''+
                    cast(row_number() over(partition by device_name 
                                          order by device_name) as varchar(10)) col
                from Aperture_full_test
            ) x
            pivot 
            (
                max(app_id)
                for col in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/9bdd3/11)。两者都给出结果：

```
| DEVICE_NAME |    APP1 |    APP2 |    APP3 |    APP4 |
-------------------------------------------------------
|   AUSSQL140 |  537990 | 1349605 |  (null) |  (null) |
|    EU456CLX | 6545789 |  (null) |  (null) |  (null) |
|    EUCTX654 | 5637965 | 6464367 | 1323123 | 1004326 |
|    JAP543X2 | 5646789 |  (null) |  (null) |  (null) |
|  LDNSQLF700 |  157848 |  155439 |  635533 |  (null) |
|    NYSQL502 |  189164 |  188641 |  (null) |  (null) | 
```

编辑，如果要计算每台服务器的设备总数，则可以使用 `count() over()`. 硬编码版本将是：

```
select device_name, TotalDevices, App1, App2, App3, App4, App5
from
(
  select device_name, app_id,
    'App'+
      cast(row_number() over(partition by device_name 
                            order by device_name) as varchar(10)) col,
    count(app_id) over(partition by device_name) TotalDevices  -- add this line
  from Aperture_full_test
) d
pivot
(
  max(app_id)
  for col in (App1, App2, App3, App4, App5)
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9bdd3/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:44:20.760

这是一个数据透视查询，可以在 group by 中完成。您需要的是应用程序的序列号。

```
select aft.deviceName, COUNT(*) as NumApps,
       MAX(case when seqnum = 1 then App_id end) as App1,
       MAX(case when seqnum = 2 then App_id end) as App2,
       MAX(case when seqnum = 3 then App_id end) as App3,
       MAX(case when seqnum = 4 then App_id end) as App4,
       MAX(case when seqnum = 5 then App_id end) as App5
from (select aft.*,
             ROW_NUMBER() over (partition by device_name order by (select NULL)) as seqnum
      from Aperture_full_test aft
     ) aft
group by aft.deviceName
order by NumApps desc 
```

此版本没有按特定顺序排列的应用程序，因为 xml 代码没有按特定顺序排列它们。

# c++ - “Eclipse IDE”中的模板函数无法编译

> ID：15765670
> 
> 赞同：0
> 
> 时间：2013-04-02T13:40:44.160
> 
> 标签：c++, eclipse, visual-studio-2010, templates

我有这样的功能：

```
template<template <class _Ty, class _A = allocator<_Ty> > class Container>
    static void FreeAttributesVS(const Container<int>& arra)
    {
        for(Container<int>::const_iterator iter = arra.begin();
            iter != arra.end(); ++iter)
        {
            //do smthng
        }
    } 
```

它在 VisualStudio 中编译，但在 Eclipse 编译器中说`"Invalid template argumetns"`，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:47:12.167

您`typename`之前需要，`Container<int>::const_iterator`因为这是一个依赖类型：

```
static void FreeAttributesVS(const Container<int>& arra)
{
    for (typename Container<int>::const_iterator iter = arra.begin(); ...)
    //   ^^^^^^^

} 
```

# programming-languages - 为什么解释语言和编译语言之间有如此明确的界限？

> ID：15765671
> 
> 赞同：3
> 
> 时间：2013-04-02T13:40:47.640
> 
> 标签：programming-languages, interpreted-language, compiled-language

在学习 C 或 C++ 等编译语言时，您会了解编译器。为了运行你的代码，你必须先编译它。编译您的代码会将其从文本表示形式转换为可以执行的内容。生成的代码非常快，可以使用预处理器等。

在学习 Python、Matlab 或 Ruby 等动态语言时，您会了解解释器。为了运行您的代码，您只需将其输入到解释器中。因此，您可以在运行时使用您的代码并动态更改程序的行为。这样做的缺点似乎是解释型语言相当慢，而且缺乏明确的编译时间似乎使得预处理器不可能。

然后是即时编译器，它们像解释语言一样使用，但与编译语言相比性能不足。但它们通常不使用预处理器，也不输出准备运行的二进制文件。

然后我学习了 Lisp，它可以被编译、解释和你有什么，同时它既快速又拥有强大的预处理系统（宏）。这在 Lisp 世界中似乎是常识，但在其他任何地方都不是。

为什么没有流行的 C 解释器或 Python 编译器？为什么解释语言和编译语言之间存在如此大的差异？（我知道存在一些可以编译 Python 或解释 C 的项目，但总的来说它们似乎不是很受欢迎）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:21:35.467

大多数流行的编译语言都是从头开始设计的：它们倾向于避免难以生成高效编译代码的特性。这些语言特性包括方便的“动态”特性，例如动态类型、非统一容器和临时对象名称空间。

因此，编译语言的解释器不能利用解释语言可用的动态特性，但缺乏编译实现的性能优势。

相反，编译器必须复制解释语言的所有特性和行为，无论费用如何。一般来说，这意味着为解释语言编译的程序将承担解释器的大部分开销。例如，任何一种`eval()`功能都需要包含解释器。

最后，这些影响被庞大的用户群、良好的支持和强大的实施相辅相成的优势放大了。

# java - 为什么 Android API 要求提供结果参数而不是返回方法？

> ID：15765673
> 
> 赞同：9
> 
> 时间：2013-04-02T13:40:50.237
> 
> 标签：java, android, performance, optimization

我的问题是在整个 Android API 中，许多库调用都要求将`results[]`参数传递给方法，例如：

```
public boolean isInProximity(double startLat, double startLongitude, float meters) {
    float[] results = new float[3];
    Location.distanceBetween(startLat, startLongitude, endLatitude, endLongitude, results);
    return results[0] <= meters;
} 
```

对 android 的调用是`Location.distanceBetween()`，它需要`results[]`为什么他们不只在方法中包含一个返回签名？我假设这是某种内存或速度优化。我不确定它背后的确切原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:42:53.897

你是对的，它是关于优化，这样你可以多次调用这个方法，而不需要每次都分配内存。

编辑——这是一个测试：[http](http://codeyarns.com/2010/10/21/c-return-value-versus-output-parameter/)
://codeyarns.com/2010/10/21/c-return-value-versus-output-parameter/ 我猜迟到总比没有好。

# html - IE8 不显示所有表格边框

> ID：15765675
> 
> 赞同：2
> 
> 时间：2013-04-02T13:40:51.067
> 
> 标签：html, css, internet-explorer, internet-explorer-8

**编辑：我最终切换到 ul/li 列表。但我仍然想知道，表格也应该有一个解决方案。**

我已经设置了一个带有 TD 元素边框的 html 表格。在现代浏览器中显示完美。但是，虽然可以争论，但我不会尽可能地支持 IE8。

坦率地说，IE8 对表格的边框做了一些奇怪的事情。我已经查看了这里提出的很多问题，但我发现没有一个问题可以解决我的情况。

表格的 TD 元素的所有边都应该有边框。IE8 只呈现左边框和下边框。正如您在下面的屏幕截图中看到的那样。代码位于图像下方。我找不到解决方案，希望你们中的一些人有任何想法。

非常感谢您的任何想法！链接：[工作示例](http://d-serv.nl/playground/table.html)

![IE8 呈现表格边框错误](https://i.stack.imgur.com/YJqa5.png)

CSS代码：

```
.pricing-table{
border-collapse:collapse;
margin:20px;
padding:20px;
}

.pricing-table td {
width: 210px;
padding: 10px 0px;

border-top:1px solid #FFFFFF;
border-bottom:1px solid #e9e9e9;
border-left:1px solid #cdcdcd;
border-right:1px solid #cdcdcd;

font-size: 14px;
font-weight:bold;
line-height: 35px;
color: #555;
text-shadow: 0 1px 0 #fff;

background: -webkit-gradient(linear, left top, left bottom, from(rgb(250, 250, 250)), to(rgb(237, 237, 237)));
background: -webkit-linear-gradient(top, rgb(250, 250, 250), rgb(237, 237, 237));
background: -moz-linear-gradient(top, rgb(250, 250, 250), rgb(237, 237, 237));
background: -o-linear-gradient(top, rgb(250, 250, 250), rgb(237, 237, 237));
background: -ms-linear-gradient(top, rgb(250, 250, 250), rgb(237, 237, 237));
background: linear-gradient(top, rgb(250, 250, 250), rgb(237, 237, 237));
filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr='#fafafa', EndColorStr='#ededed'); /*IE6 & IE7 gradient*/
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#fafafa', endColorstr='#ededed')"; /*IE8 gradient*/
}
.pricing-table td span.icon-accept-16x16{
display:inline-block;
width:16px;
height:16px;
margin:0 10px;
background: url(img/icon-accept-16x16.png);
}
.pricing-table td.orange{
background:#ee5420;
filter:none;/*Fallback: IE 8 and below*/

font: 'Open Sans', sans-serif;
font-weight:600;

border-bottom:1px solid #b73f16;
border-top:1px solid #cdcdcd;
border-left:1px solid #ee5420;
border-right:1px solid #ee5420;

}
.pricing-table td.orange h2{
margin:0;
padding:0 0 0 36px;
font-size: 20px;
font-weight:600;
color:#FFF;
text-shadow: 0 1px 2px rgba(0,0,0,0.4);
line-height:40px;
}
/* Table Head  */
.pricing-table thead td.orange {
border:none;/*Not ideal, try ti find a fix*/
-webkit-top-left-border-radius: 5px;
-moz-border-top-left-radius: 5px;
border-top-left-radius: 5px;
-webkit-top-right-border-radius: 5px;
-moz-border-top-right-radius: 5px;
border-top-right-radius: 5px;
}

/* Footer */
.pricing-table tfoot td {
width: 190px;
padding: 20px 10px;
text-align: center;
line-height: 18px;
background: #ffffff;
filter:none;

font-size: 11px;
font-weight:normal;
color: #828282;

-webkit-border-radius: 0 0 2px 2px;
-moz-border-radius: 0 0 2px 2px;
border-radius: 0 0 2px 2px;

-webkit-box-shadow: 0px 2px 0px #e4e4e4;
-moz-box-shadow: 0px 2px 0px #e4e4e4;
box-shadow: 0px 2px 0px #e4e4e4;
} 
```

这是HTML：

```
<table class="pricing-table" >
<thead>
<tr>
<td class="orange">
<h2>Voor leerlingen</h2>
</td>
</tr>
</thead>
<tbody>
<tr>
<td>Online topotrainer</td>
</tr>
<tr>
<td>Topografieboekje</td>
</tr>
<tr>
<td>Jouw resultaten</td>
</tr>
<tr>
<td class="orange">
<h2>Voor docenten</h2>
</td>
</tr>
<tr>
<td>Toetsen genereren</td>
</tr>
<tr>
<td>Leerlingen volgen</td>
</tr>
<tr>
<td>Boekjes bestellen</td>
</tr>
</tbody>
<tfoot>
<tr>
<td>Topografie in de Klas is een 100% gratis lesmethode voor Topografie in het onderwijs.    </td>
</tr>
</tfoot>
</table> 
```

# ruby-on-rails - rails 表单验证空字段

> ID：15765676
> 
> 赞同：0
> 
> 时间：2013-04-02T13:40:52.593
> 
> 标签：ruby-on-rails, forms, validation

有没有一种简单的方法可以在 Rails 应用程序中添加表单验证，询问：“你确定要提交这个带有空主题的表单吗？”

（我用谷歌搜索“你确定”空白栏，验证空等，但没有找到有用的答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:10:52.473

如果您想在用户提交之前进行验证，您可以尝试以下操作：

```
<%= f.submit :onclick => "show_custom_confirm()" %>

<% javascript_tag do %>
  function show_custom_confirm() {
    if ('#my_field').val() == '')
      return #{confirm_javascript_function("You'll submit with an empty field. Are you sure?")};
  }
<% end %> 
```

# javascript - GAE Launcher 中的数据库 ID 号很大？

> ID：15765677
> 
> 赞同：2
> 
> 时间：2013-04-02T13:40:56.067
> 
> 标签：javascript, django, google-app-engine, google-cloud-datastore, django-serializer

我自从更新 GAE Launcher 以来，它在数据存储上创建的 ID 太大。就像 5330010158992982016 一样，这对我来说是个问题，因为在 Javascript 上这些数字是四舍五入的。

例如，在 JS

```
> a = 533001015899298254645
> 533001015899298270000 
```

读取 JSON 格式 [{"pk": 5330010158992982016, "model": " .... }],

```
$.getJSON(' ...

  $.each(data, function(i,item){ ...

    item['pk'] = 533001015899298270000 instead of 533001015899298254645
  }
} 
```

我不确定我是否会在 GAE 服务器上遇到同样的问题。任何想法限制 ID 大小？

我正在使用 Django，但我在使用 Django 和 Google 模型时遇到了同样的问题。

更新：

我找到了一个解决方案，它不会强迫您更改项目的所有 javascript 代码。在我的情况下很多。就像每个人都说最好的方法是使用 de PK（或 ID）作为字符串。但是我使用 django 序列化程序，在我的版本和 JSON 中，PK 被设置为一个数字。简单的解决方案是在序列化器类上更改它（或创建一个扩展原始序列化器并更改它的新序列化器）：

```
def end_object(self, obj):
       self.objects.append({
            "model"  : smart_unicode(obj._meta),
            "pk"     : smart_unicode(obj._get_pk_val(), strings_only=**False**),
            "fields" : self._current
        })
        self._current = None 
```

将 strings_only 设置为 False。它使 JSON 上的 pk 带有引号。所有 javascript 代码无需更改即可工作。

问题是......有没有其他方法可以强制 django 序列化程序将其作为字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:50:51.893

没有办法在 JavaScript 中准确地读取/存储这个数字，因为在 JavaScript 中数字实际上是双精度浮点数，最大值是[`900,719,925,4740,992`](https://stackoverflow.com/a/8104405/8418).

你可以

*   将 ID 作为字符串返回，或者
*   从`dev_appserver.py`一个参数开始：`--auto_id_policy=sequential`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:09:55.223

如果出于某种奇怪的原因，Lipi 的回答没有涵盖您，您可以尝试另一种方法，将所有值转换为字符串。所以你会有

```
[{"pk": "5330010158992982016", "model": " .... "}], 
```

我看到您正在使用 Ajax 调用，这可能意味着您不需要以下部分，但是对于您来说，Django 变量而不是`{{my_id}}`您可以将其设为字符串，就像`'{{my_id}}'`您在渲染时创建 JavaScript 变量一样。

AppEngine 团队已意识到该问题，并将在生产中推出更新之前解决该问题。

# delphi - 在计时应用程序中对赛车手进行排序

> ID：15765679
> 
> 赞同：1
> 
> 时间：2013-04-02T13:41:01.663
> 
> 标签：delphi, sorting, datetime, racing

我正在创建一个使用 AMB MyLaps 解码器 P3 协议的应用程序。

我想不出一种方法来根据圈数和圈速对赛车手进行分类。例如，第 1 位的人跑了 3 圈，第 2 位的人跑了 2 圈。但是，我该如何订购 2 人在同一圈的情况呢？

这是我用来保存信息的记录：

```
type
  TTimingRecord = record
    position: integer;
    transId: integer;
    racerName:  string;
    kartNumber: integer;
    lastPassingN: integer;
    laps: integer;
    lastRTCTime:  TDateTime;
    bestTimeMs: Extended;
    lastTimeMs: Extended;
    gapTimeMs:  Extended;
    splitTimeMs:  Extended;
    timestamp:  TDateTime;
  end; 
```

为每位赛车手创造了一个新纪录。

我目前使用的代码是：

```
procedure sortRacers();
var
  Pos, Pos2: Integer;
  Temp: TTimingRecord;
  GapTime: Extended;
begin
  for Pos := 0 to length(DriversRecord)-1 do
  begin
    for Pos2 := 0 to Length(DriversRecord)-2 do
    begin
      if(DriversRecord[Pos2].laps < DriversRecord[Pos2+1].laps)then
      begin
        Temp := DriversRecord[Pos2];
        DriversRecord[Pos2] := DriversRecord[Pos2+1];
        DriversRecord[Pos2+1] := Temp;
      end
      else if DriversRecord[Pos2].laps = DriversRecord[Pos2+1].laps then
           begin
             if DriversRecord[Pos2].lastRTCTime > DriversRecord[Pos2+1].lastRTCTime then
             begin
              Temp := DriversRecord[Pos2];
              DriversRecord[Pos2] := DriversRecord[Pos2+1];
              DriversRecord[Pos2+1] := Temp;
             end;
           end;
    end;
  end;

  for pos := 1 to length(DriversRecord) -1 do   //Gap Time
  begin
    if DriversRecord[Pos].laps = DriversRecord[0].laps then
    begin
      DriversRecord[Pos].gapTimeMs := DriversRecord[Pos].lastRTCTime - DriversRecord[0].lastRTCTime;

      DriversRecord[Pos].splitTimeMs := DriversRecord[Pos].lastRTCTime - DriversRecord[Pos-1].lastRTCTime;
    end;
  end;
end; 
```

但效果不太好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:22:24.727

我从您对问题的评论中假设您已将问题分解为排序和比较，并且您已经涵盖了排序部分。这留下了订单比较。

您需要一个函数来执行字典顺序比较，首先基于完成的圈数，其次是自该圈开始以来的时间。基本上它看起来像这样：

```
function CompareRacers(const Left, Right: TTimingRecord): Integer;
begin
  Result := CompareValue(Left.laps, Right.laps);
  if Result=0 then
    Result := CompareDateTime(Left.lastRTCTime, Right.lastRTCTime);
end; 
```

您会`CompareValue`在`Math`和`CompareDateTime`中找到`DateUtils`。

我不确定的是`lastRTCTime`价值观的意义是什么。您可能需要否定调用`CompareDateTime`的结果才能获得您想要的结果。

```
Result := -CompareDateTime(Left.lastRTCTime, Right.lastRTCTime); 
```

另外，如果在单圈中超车怎么办？大概在赛车手完成当前圈之前，您将无法检测到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:24:35.753

与其自己做排序算法，不如试试这个技术（如果你有兼容的 Delphi 版本）：[Best way to sort an array](https://stackoverflow.com/questions/41733/best-way-to-sort-an-array)

您的功能可能如下所示：

```
uses Types;

function CustomSort(const Left, Right: TTimingRecord): Integer
begin
  If (left.laps > right.laps) then
     result := GreaterThanValue
  else 
  if (left.laps < right.laps) then
      result := LessThanValue
  else 
  begin
      // Same laps count... Test on LastRTCTime 
      if (left.lastRTCTime < right.lastRTCTime) then
          result := GreaterThanValue1
      else
      if (left.lastRTCTime > right.lastRTCTime) then
          result := LessThanValue
      else
          result := EqualsValue; 
  end;
end)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:51:50.297

将其视为两种不同的类别可能更容易。

显然你知道冒泡排序方法，所以我不会深入讨论。

对您的排序进行 2 次传递。第一，你对圈数进行排序。

第二，您浏览整个排序圈的列表。在数组中找到相同圈值的起点和终点。从开始点和结束点再次进行排序，但这次只比较次要值。如果相同值的计数大于 1，则遍历所有相同的辅助值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T03:31:41.383

此代码是关于使用索引对数据进行排序的。比冒泡排序快得多。它是动态的，并提供从数组中的起点到终点进行排序的能力。代码本身比 Bubble-Sort 大，但没有多少算法可以在速度上进行比较。代码（当理解它的工作原理时）可以很容易地修改以适应大多数类型的排序。在 65536 个字符串的数组上，与冒泡排序相比，它只需要进行 17 次比较（或大约）每个比较周期的 CPU 周期多一些，但仍然是最快的方法之一。搜索与 BTREE 一样快。实际的排序可能会慢一些，但是之后数据更容易管理，不需要平衡树。

## 享受。

注意：例程不是实际问题的完整解决方案，但它提供了一个极快的方法的开始。

* * *

```
TYPE
  DynamicIntegerArray = ARRAY OF INTEGER;
  DynamicStringArray  = ARRAY OF STRING;

VAR
  BinSortLo, BinSortMid, BinSortHi : INTEGER; 

FUNCTION FindMid:INTEGER;
  BEGIN
    FindMid:=BinSortLo+((BinSortHi-BinSortLo) DIV 2);
  END;

PROCEDURE ShiftIndexUpAndStorePointer(VAR ArrParamIndex: DynamicIntegerArray; HighBound:INTEGER);
  VAR
    x : INTEGER;
  BEGIN
    FOR x:=HighBound-1 DOWNTO BinSortMid DO ArrParamIndex[x+1] := ArrParamIndex[x];// Shift the index.
    ArrParamIndex[BinSortMid]:=HighBound;// Store the pointer to index at its sorted place
  END;

PROCEDURE BinarySortUp(CONST ArrParam:DynamicStringArray; VAR ArrParamIndex: DynamicIntegerArray; CONST LoBound,HighBound:INTEGER); OVERLOAD;
  VAR
    TempVar : STRING;
  BEGIN
    BinSortLo:=LoBound; BinSortHi:=HighBound; BinSortMid:=FindMid;
    TempVar := ArrParam[HighBound];
    REPEAT
  IF TempVar>ArrParam[ArrParamIndex[BinSortMid]] THEN BinSortLo:=BinSortMid ELSE BinSortHi:=BinSortMid;
  BinSortMid:=FindMid;
    UNTIL (BinSortMid=BinSortLo); {OR (BinSortMid=BinSortHi);}
    IF TempVar>ArrParam[ArrParamIndex[BinSortMid]] THEN INC(BinSortMid);// We always need a last check just in case.
    ShiftIndexUpAndStorePointer(ArrParamIndex,HighBound);
  END;

PROCEDURE DynamicCreateIndex(CONST ArrParam:DynamicStringArray; VAR ArrParamIndex: DynamicIntegerArray; CONST LoBound,HighBound:INTEGER);
  VAR
    x : INTEGER;
  BEGIN
    FOR x:=LoBound TO HighBound DO
    BinarySortUp(ArrParam,ArrParamIndex,LoBound,x);
  END;

BEGIN
{
1\. Create your STRING ARRAY as a DynamicStringArray. 
2\. Create your INDEX ARRAY as a DynamicIntegerArray.
3\. Set the size of these arrays to any INTEGER size and fill the strings with data.
4\. Run a call to DynamicCreateIndex(YourStringArray,YourIndexArray,0,SizeOfArray
Now you have a sorted Index of all the strings.

}
END. 
```

# apache - 即使在设置 Apache Header 之后，CSV 文件也会在浏览器中打开

> ID：15765682
> 
> 赞同：0
> 
> 时间：2013-04-02T13:41:04.743
> 
> 标签：apache, csv, header, mime-types

我的服务器中有一个 csv 文件，我显示了该文件的链接，并且允许用户下载它。但是文件是直接在 IE9 中打开的，而不是只显示链接。对于其他浏览器，它可以正常工作。我还在我的 httpd.conf 文件中为 Apache 完成了以下设置。

```
<FilesMatch "\.(?i:csv)$">
  ForceType application/octet-stream
  Header set Content-Disposition "attachment"
</FilesMatch> 
```

这在我的本地机器上正常工作，只有当我在服务器上运行它时才会出现问题。

# spring-mvc - 如何将按钮添加到调用控制器上的方法的jsp页面

> ID：15765684
> 
> 赞同：-1
> 
> 时间：2013-04-02T13:41:09.303
> 
> 标签：spring-mvc

嗨，我想在 jsp 页面上添加一个按钮，它基本上调用控制器上的方法。

我知道可以添加一个表单和一个按钮来提交：

```
 <form:form name="info" method="POST" modelAttribute="form" > 
      <input type="submit" name="refresh" value="refresh"/>    
</form:form> 
```

是否有另一种方法可以不使用表单标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:54:39.360

当传入请求具有匹配的 URI 时，将调用控制器方法。因此，基本上您需要使用匹配的 URI 发送请求。避免表单标签

1.  使用该 URI创建一个`<a>`标签，并使用 CSS 将该标签呈现为按钮，这可以简化您的工作。
2.  如果页面不需要刷新，则在单击该按钮时使用相同的 URI 进行 AJAX 调用。

# ios - 创建示例 phonegap 应用程序时出现 Xcode 错误

> ID：15765687
> 
> 赞同：1
> 
> 时间：2013-04-02T13:41:19.653
> 
> 标签：ios, xcode, cordova

我在使用 xCode 时遇到了一些问题，所以我在这篇文章之后完全删除了它：[https ://discussions.apple.com/thread/4772117?start=0&tstart=0](https://discussions.apple.com/thread/4772117?start=0&tstart=0)

然后，在全新安装 Xcode 后，我按照 Phonegap 的入门教程（[http://docs.phonegap.com/en/2.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)） ，但是当我跑步时

```
./create ~/Documents/CordovaXY/HelloWorld org.apache.cordova.myAppName myAppName 
```

我有这个问题：

```
mv: rename /path/to/my/app/__TESTING__.xcodeproj to /path/to/my/app/myAppName.xcodeproj: No such file or directory 
```

这是关于什么的？有人可以帮助我吗？我在那里用谷歌搜索，但找不到任何有用的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:16:12.960

确保文件夹 ~/Documents/CordovaXY/HelloWorld 不存在。

# javascript - 如何在我的 HTML 5 应用程序中将作业发送到打印机？

> ID：15765688
> 
> 赞同：1
> 
> 时间：2013-04-02T13:41:22.123
> 
> 标签：javascript, html, printing, hybrid

我需要能够从我的 HTML 5 应用程序中直接从它自己的应用程序中打印内容。这是我对我需要做的事情的理解，如果我错了，请纠正我：

*   在应用程序的某处有一个按钮，单击该按钮会执行一些将数据发送到打印机的代码。现在，由于该应用程序是 HTML 5 应用程序，我认为需要将其转换为打印机可以理解的某种格式，如果是这样，我希望将其转换为什么？
*   一旦从应用程序中获取数据并将其转换为打印机友好格式，我需要将其发送到打印机。这可以通过 a) 从平板电脑的电子邮件发送到打印机的电子邮件地址或 b) 通过为我处理打印作业的 Google 云打印来完成。

本质上是这样吗？还是我在这里错过了一些重要的步骤？我以前从未这样做过，并且通过我所做的任何搜索都找不到任何东西，我似乎得到的只是现有的 Android 应用程序建议，但这不是我需要的。任何输入将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:18:35.967

是的，就是这样：您可以将其转换为对纸张友好的格式，然后通过电子邮件将其发送到打印机的电子邮件地址或使用云打印，这并不难运行。

# jquery - 向上/向下滑动后计算列表中的元素数

> ID：15765690
> 
> 赞同：1
> 
> 时间：2013-04-02T13:41:30.097
> 
> 标签：jquery

我使用这个函数来选择列表中的元素：

```
function listFilter(list, input) { 
  $(input)
  .change( function () {
    var filter = $(this).val();
    if(filter) {
      $(list).find('a:not(:Contains(' + filter + '))').parent().slideUp();
      $(list).find('a:Contains(' + filter + ')').parent().slideDown();
    } else {
      $(list).find('li').slideDown();
    }        
    return false;
  })
.keyup( function () {
    // fire the above change event after every letter
    $(this).change();

}); 
```

}

这很好用，但现在我想在选择范围缩小到列表中剩下的一个元素时触发下面数据中的搜索功能。

我一直在列表对象和 list.children 上尝试 .filter(':visible') ，但是在用户输入一些文本后没有给我正确数量的元素。

类似于 alert($(list).children().filter(':visible').length); 但我总是得到显示的元素的初始数量。

# jquery - 使用codeigniter的jquery自动完成

> ID：15765692
> 
> 赞同：0
> 
> 时间：2013-04-02T13:41:32.627
> 
> 标签：jquery, codeigniter, autocomplete

我正在使用带有 codeigniter 框架的 jQuery 自动完成功能。

这目前 100% 有效。

我的模型是：

```
 function get_sku_code($q){
    $this->db->select('ProductCode');
    $this->db->like('ProductCode', $q);
    $query = $this->db->get('ProductList');
    if($query->num_rows > 0){
      foreach ($query->result_array() as $row){
        $row_set[] = htmlentities(stripslashes($row['ProductCode'])); //build an array
      }
      $this->output->set_content_type('application/json')->set_output(json_encode($row_set));

    }
  } 
```

我的视图 javascript 是：

```
 $("#product").autocomplete( 
 { 
 source: "get_sku_codes", 
 messages: 
 { 
 noResults: '', 
 results: function() {} 
 }, 
 select: function( event, ui ) 
 { 
  var selectedObj = ui.item; 
 $.post('get_sku_prices', {data:selectedObj.value},function(result) { 
 $("#product").parent().parent().find('input[id^="price"]').val(result[0]);
 $("#product").parent().parent().find('input[id^="adjustedprice"]').val(result[0]);
 }); 
 } 
 }); 
```

如前所述，这 100% 有效。我遇到的一个问题是，如果没有数据库匹配，则自动完成列表只是空白。当模型没有返回值时，有没有办法返回“数据库中没有匹配项”？我应该使用 jquery 还是使用 codeigniter mysql 请求来执行此操作？

一如既往地感谢，

**控制器 - get_sku_codes**

```
 function get_sku_codes(){
    $this->load->model('Sales_model');
    if (isset($_GET['term'])){
      $q = strtolower($_GET['term']);
      $this->Sales_model->get_sku_code($q);
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:43:32.643

首先，根据[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式，您不应在模型中回显任何内容。所有这些逻辑都必须在 View 从中获取数据的 Controller 中。

将您的模型更改为：

```
 function get_sku_code($q){
    $this->db->select('ProductCode');
    $this->db->like('ProductCode', $q);
    $query = $this->db->get('ProductList');
    $row_set = array();
    if($query->num_rows > 0){
      foreach ($query->result_array() as $row){
        $row_set[] = htmlentities(stripslashes($row['ProductCode'])); //build an array
      }
     return $row_set;
  } 
```

和你的控制器到这个：

```
 function get_sku_codes(){
    $this->load->model('Sales_model');
    if (isset($_GET['term'])){
      $q = strtolower($_GET['term']);
      $output = $this->Sales_model->get_sku_code($q);
      $this->output->set_content_type('application/json')->set_output(json_encode($output));
    }
  } 
```

`<span id="noMatches"></span>`然后在您的视图中，您可以在下方或旁边的某处创建一个元素，`<input id="product">`以在返回结果为空时显示“不匹配”消息。

```
 $("#product").autocomplete(
 { 
    source: "get_sku_codes", 
    response: function(event, ui) {
        if (ui.content.length === 0) {
            $("#noMatches").html("No matches");
        } else {
            $("#noMatches").empty();
        }
    },
    select: function( event, ui ) 
    { 
        var selectedObj = ui.item; 
         $.post('get_sku_prices', {data:selectedObj.value},function(result) { 
             $("#product").parent().parent().find('input[id^="price"]').val(result[0]);
             $("#product").parent().parent().find('input[id^="adjustedprice"]').val(result[0]);
         }); 
    } 
 }); 
```

# sql-server-2005 - 大表子句中的Sqlserver查询优化

> ID：15765695
> 
> 赞同：1
> 
> 时间：2013-04-02T13:41:35.153
> 
> 标签：sql-server-2005, query-optimization

我有以下扫描大表的查询，不幸的是我在此列上没有索引，但通常我必须在此列上运行查询。有没有办法我可以优化这个查询。

select * from match with (nlock) where CURRENT_STATE in ('ACT','REJ')

![在此处输入图像描述](https://i.stack.imgur.com/9ygPk.png)

此表中的总记录是 30280527

如果我使用 top 子句而不是选择所有记录会提高性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:07:31.547

是的，如果您使用 TOP 子句，它将提高与该子句排除的行数成正比的性能。但是，您也只能取回在 TOP 子句指定的范围内的行。

不，您无法优化此查询。它是如此简单，没有什么可以使用的。你唯一的选择是添加一个索引，而拒绝这样做是愚蠢的。是的，索引确实会产生开销，但与它们的性能提升相比，这种开销是微不足道的。

事实上，如果您在发生插入的同时运行上述查询，我​​怀疑扫描表所需的 I/O 和 CPU 量很可能会比维护一个索引并寻找它。

如果您绝对必须保持表无索引（因为您已经测试了添加索引的性能并且结果不可接受），请考虑设置某种形式的复制，其中您有一个无索引表来接受插入，另一个表偶尔会从第一个表接收数据，并将索引放在第二个表上并对其运行查询。

# linux - Python 2.7“导入 hashlib”分段错误

> ID：15765699
> 
> 赞同：1
> 
> 时间：2013-04-02T13:41:48.363
> 
> 标签：linux, python-2.7, segmentation-fault, hashlib

每当我尝试在 Python 2.7 中导入 hashlib 时，都会出现分段错误。我已经安装了 openssl 版本 1.0.0、pyOpenssl 版本 .10，并使用未在 Modules/Setup 中注释的 ssl 行重新编译了 python，指向库的正确路径并包含 openssl 的文件。

我已经在所有我能找到的可能使用 libssl 或 libcrypto 的库上运行了 ldd，它们都指向相同版本的文件。

gdb 返回： `0x0000003d1d0f670 in EVP_PKEY_CTX_dup () from /usr/lib64/libcrypto.so.1.0.0`

任何想法可能会发生什么，以及如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:41:50.450

`hashlib`如果在构建 python 时可以找到 libcrypto，则使用 libcrypto 进行哈希算法。

我怀疑它最终会在运行时与构建时使用不同的 libcrypto。

# html - 重定向不带 .html 结尾的网站 URL

> ID：15765703
> 
> 赞同：0
> 
> 时间：2013-04-02T13:42:10.107
> 
> 标签：html, .htaccess, redirect

所以我有一个 URL，我希望人们最终访问 www.website.com/folder/file 问题是写在这些传单上的 URL 是不同的，www.website/file。

我为 www.website/file 创建了一个具有工作重定向的文件，但人们必须输入 www.website/file.html 才能使重定向工作。我希望他们能够在没有 .html 的情况下输入 JUST www.website/file

无论如何，这可以工作吗？截至目前，重定向正在使用 html 并且工作正常。我的另一种可能性是编辑我的 .htaccess 文件。我在一家使用coldfusion的公司工作，我看不到.htaccess文件（隐藏文件可见），所以我厌倦了把一个放在那里，因为我担心它可能会搞砸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:54:17.400

您可以将 file.html 重命名为 index.html，这样就足够了。

例如; www.domain.com/folder/folder/file.html 与 www.domain.com/folder/folder/ 相同

如果 file.html 被称为 index.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:55:21.980

有几个不同的选项可以解决这个问题，但其中之一可能只是创建一个名为“file”的单独文件夹并在那里添加一个 index.html 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:10:24.373

如果可能的话，我会选择 .htaccess 文件：

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteRule ^/file$ /folder/file [R]
</IfModule> 
```

[http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule)

# overflow - 在Teechart(VC++6.0,Teechart8.ocx环境)中使用“FillSampleValues()”后溢出

> ID：15765706
> 
> 赞同：0
> 
> 时间：2013-04-02T13:42:16.773
> 
> 标签：overflow, teechart

我是 TeeChart 的初学者。

当我为图表添加一个名为 m_chart 的成员变量时，它看起来没问题。

然后我添加“m_chart.Series(0).FillSampleValues(50);” 在 CMy312Dlg::OnInitDialog()......

并发生溢出。

怎么了？很遗憾地发现我没有很好地描述我的问题。（好吧，我是 StackOverflow 上的新生，由于我的声誉不佳而无法添加图像。）

但是如果您需要更多详细信息，我会尽力为您描述。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:52:58.520

在将数据添加到系列之前，您必须创建该系列并将其添加到图表中以按照您的方式访问它。您可以在教程和示例文件夹中的 Visual C++ 部分找到示例。如果问题仍然存在，请[向我们](http://www.steema.net/upload/)发送示例项目，我们可以“按原样”运行以在此处重现问题。

# visual-studio-2010 - 再次但没有解决方案：错误 C2248：“CObject::CObject”：无法访问在类“CObject”中声明的私有成员

> ID：15765707
> 
> 赞同：0
> 
> 时间：2013-04-02T13:42:19.420
> 
> 标签：visual-studio-2010, visual-c++

我和我的班级一起写了一个程序：

```
class COrder
{
public:
    COrder();
    ~COrder();

public:
        ...
    CList < CItem > m_oItem;
        ...
}; 
```

假设有我的其他类的列表 od 对象：

```
class CItem
{
public:
    CItem();
    ~CItem();

public:
    int m_i;
    double m_d;
    CString m_o;
}; 
```

并且编译器在标题中给了我这样的错误。任何想法为什么？在程序中，我在地图中使用 COrder：

```
CMap <CString, LPCTSTR, COrder, COrder> m_map 
```

引用：

> 将复制构造函数和赋值运算符添加到您的类 COrder。

我将 operator= 添加到我的班级：

```
COrder& operator=( const COrder oNewOrder )
{
        ...
    m_oItem.AddTail( oNewOrder.m_oItem.GetTail() );
        ...
    return *this;
} 
```

但是添加“复制构造函数”是什么意思？

[http://msdn.microsoft.com/en-us/library/ccb3dh5c.aspx](http://msdn.microsoft.com/en-us/library/ccb3dh5c.aspx)我发现了这个，但是如何在我的代码中实现它。我无法更改 CList 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:38:29.233

[http://www.codeproject.com/Articles/13458/CMap-How-to](http://www.codeproject.com/Articles/13458/CMap-How-to)

将复制构造函数和赋值运算符添加到您的类`COrder`。这使得类可复制。

[*如果类用作 Key，那么您需要在该类中使用 HashKey() 和 CompareElemenst()* ]

另请注意，[STL 容器优于 MFC 容器](http://forums.codeguru.com/showthread.php?504249-How-to-declare-CMap-for-two-CLists&p=1976284#post1976284)。

你会得到一个错误，因为 CMap 有默认的 copy-ctor，但是它派生自`CMap`并声明了私有复制构造函数和 operator=。`CList``CObject``CObject`

因此，`CMap`不提供“开箱即用”的复制语义。

我建议您使用 STL`std::map`容器，该容器旨在实现开箱即用的复制语义。

开箱即用的 STL 所没有的只是序列化。

注意`std::map`没有混淆`ARG_KEY`和`ARG_VALUE` 模板。 `std::map`仅具有 Key 和 Type 模板参数（以其基本形式）。

[http://msdn.microsoft.com/en-us/library/s44w4h2s%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/s44w4h2s%28VS.80%29.aspx)

否则，您可以按照 Ajay 的建议使用指针方式，您只需关闭编译器即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:36:19.700

问题陈述：

`CList<CItem> m_oItem;`

以及触发语句（或某些用法）：

`CMap <CString, LPCTSTR, COrder, COrder> m_map;`

为什么？好吧，`CMap`将调用复制构造函数和/或赋值运算符`COrder`。您没有提供任何内容，但编译器从您的类中提供了它们（即 for `COrder`）。此类包含一个`CList`对象，该对象继承自`CObject`. `CObject`不提供（或者更好地说：**防止**）复制构造函数或赋值运算符。

因此，编译器会引发错误。不幸的是，（坏的）编译器不会给你这个错误的回溯。

作为解决方案的最佳选择：

*   `CList < CItem* > m_oItem;`
*   `CList<CItem> *m_poItem;`
*   使用或实现您自己的集合。

# java - 为什么需要创建一个临时数组来将数组从 jni 返回到 java

> ID：15765709
> 
> 赞同：3
> 
> 时间：2013-04-02T13:42:22.403
> 
> 标签：java, java-native-interface

对于下面从 jni 为 java 创建一个 int 数组的代码，为什么我们需要创建一个 temp[] 数组，为什么我们不能只填充 result[] 数组并将其返回给 java.lang. 是因为 java 和 jni 应该使用不同的内存空间因此两个不同的指针？如果是这样，这样做的目的是什么？谢谢

```
JNIEXPORT jintArray JNICALL Java_ArrayTest_initIntArray(JNIEnv *env, jclass cls, int size)
{
 jintArray result;
 result = (*env)->NewIntArray(env, size);
 if (result == NULL) {
     return NULL; /* out of memory error thrown */
 }
 int i;
 // fill a temp structure to use to populate the java int array
 jint temp[256];
 for (i = 0; i < size; i++) {
     temp[i] = 0; // put whatever logic you want to populate the values here.
 }
 // move from the temp structure to the java structure
 (*env)->SetIntArrayRegion(env, result, 0, size, temp);
 return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:09:37.890

原因是您不能直接从 jinitArray 修改对象，因为它们是 Java 对象而不是 C 对象。

在您的示例中，您创建了一个 C 数组，并将其移动到 Java 结构中。更改数组内容时必须遵循相同的方法。您需要一个提供 C 数组的访问器。

一个如何使用 JNI 修改数组的示例。

```
JNIEXPORT jintArray JNICALL Java_SendArray_loadFile(JNIEnv *env, jobject obj, jintArray input) {

    // Convert incoming JNI jinitarray to C's native jint[]
    jint *inputArray = env->GetIntArrayElements(env, input, NULL); // if last param JNI_TRUE, then a copy is returned.

    if(NULL == inputArray) {
       return NULL ;
    }

    const jsize length = env->GetArrayLength(input);

    for (int i = 0; i < length; i++) {
        inputArray[n] = 0; //We can operate on native jinit[] elements.
    }

    // Convert the C's native jinit[] int JNI jinitarray
    env->ReleaseIntArrayElements(env, input, inputArray, 0); // 0 - copy back the content and free the `input` buffer

    return inputArray;
} 
```

原因是在Java数组中是一个类似于类的引用类型。这就是为什么您需要在 JNI 数组和本机数组之间进行转换的原因。

注意：介绍的示例参考 int 类型。JNI 为基本类型（布尔型、短型、字符型、字节型、整数型、长型、浮点型、双精度型）定义了九种类型的数组，另一种用于对象。

参考：

[获取<PrimitiveType>ArrayElements 例程](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/functions.html#wp17382)

[Java 编程教程 Java 原生接口](http://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html)

[访问 Java 数组](http://www.science.uva.nl/ict/ossdocs/java/tutorial/native1.1/implementing/array.html)

# sql-server - 将数据从 Postgres 导入 Microsoft SQL Server 2012

> ID：15765710
> 
> 赞同：0
> 
> 时间：2013-04-02T13:42:25.677
> 
> 标签：sql-server, postgresql, sharepoint, sharepoint-2010, sql-server-2012

我被要求开发一个必须在 SharePoint 上构建并使用 Microsft SQL Server 2012 的新软件。

我在 Postgres 中有一个数据库，它的一些表将在这个新项目中使用，所以我必须每天导入这些表。我想使用 WebService 来做到这一点，但他们希望它直接完成 DB-to-DB。

Postgres-to-Postgres 已经完成并且它“工作”，但是导入到 Microsoft 很麻烦。

有人知道一些可以连接到 Postgres 并进行导入的 MSSQL 工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:47:36.460

通常对于这种情况（假设这将是一个定期重复的过程），您将使用 SSIS（大多数版本的 MS SQL Server 附带）。看看[这个谷歌搜索](https://www.google.com/search?q=ssis+postgres+source)的前几个点击，尤其是第一个。

另一种选择是通过 ODBC 直接从您的应用程序连接到 Postgres 数据库，并消除数据的冗余副本 - 并获得实时更新，而不必等待 SSIS 作业的下一次执行。

# opengl - windows/opengl 环境中的覆盖支持

> ID：15765711
> 
> 赞同：0
> 
> 时间：2013-04-02T13:42:32.820
> 
> 标签：opengl, overlays

当文本覆盖包含许多字符串时，我必须显示图像和文本覆盖，但帧与帧之间只有一个变化。我想避免重绘整个叠加层，只更新已更改的内容。

我尝试了 wglCreateLayerContext，但我的 GPU 似乎不支持它（PIXELFORMATDESCRIPTOR bReserved 为 0）。

仅重绘部分文本覆盖的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:51:37.777

重绘整个帧缓冲区是 OpenGL 中的规范方式。您可以使用帧缓冲区对象 (FBO) 创建多个屏幕外绘图表面，您可以在这些表面上渲染各个图层。然后将图层合成为屏幕上呈现的合成图像。

> 但从一帧到另一帧只有一个变化。我想避免重绘整个叠加层

为什么？弄清楚哪些部分需要重绘、遮盖它们、只清除部分内容、更新它等，比简单地重绘整个文本覆盖需要更多的时间和精力。

# javascript - Javascript，除非先运行警报（），否则睡眠时图像不会改变

> ID：15765713
> 
> 赞同：0
> 
> 时间：2013-04-02T13:42:40.683
> 
> 标签：javascript, alert, sleep

我有一个图像，当我将其放入绘制的框中时会改变颜色。

一旦有人把它放进盒子里，我就会进入下一个屏幕。但我希望先有一个短暂的等待。

但是当我介绍等待时..图像不会改变颜色..即使它确认颜色改变代码已经运行。

但是..如果我设置了一个警报（“hi”）；在停止引擎的代码之前..然后颜色变化发生在等待会话之前。

就好像 alert(); 正在幕后做一些事情，导致 div 的颜色变化正确发生。

如何在运行 sleep 方法之前强制发生这种颜色变化？

有点像运行警报，而不必实际弹出警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:49:16.003

没有睡眠方法，所以我猜您正在使用 while 循环进行“睡眠”。while 循环锁定浏览器并阻止页面更新。警报会稍微延迟并允许页面更新。

您需要做的是分解您的代码并使用 setTimeout 进行“睡眠”。

```
var img = document.getElementById("myImg");
img.src = "foo.gif";
function nextStep() {
    alert("do your next step here");
}

window.setTimeout(nextStep, 2000); //2 seconds 
```

# powershell - 是否有一种更快的方法可以从 powershell 中的特定目录开始使用磁盘？

> ID：15765716
> 
> 赞同：0
> 
> 时间：2013-04-02T13:42:48.957
> 
> 标签：powershell, disk, disk-access

我一直在使用以下代码来获取从特定目录开始的磁盘使用情况：

```
$usage = (Get-ChildItem $webRoot -recurse | Measure-Object -property length -sum)
$diskUsage = $usage.sum 
```

问题在于，与简单地右键单击 Windows 中的目录并查看属性相比，这需要很长时间。

**我们是否可以访问资源管理器用来获取磁盘使用情况的功能？** 还是有另一种方法比我一直使用的方法更快？

我也不确定如果我的 PS 代码正在搜索的区域中有循环链接会发生什么。我想它可能会被锁定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:01:05.193

尝试“旧方式”：

```
$fso = New-Object -ComObject Scripting.FileSystemObject
$fso.GetFolder($webRoot).Size 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:49:07.850

我怀疑它可以做得更快。磁盘空间分析工具（如[TreeSize](http://www.jam-software.com/freeware/)）需要一段时间来翻阅磁盘上的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:59:59.647

即使您右键单击并查看属性资源管理器仍然需要计算大小，这就是我在网络驱动器上发生的事情。这需要一段时间，因为有 1,000,000 多个文件和 500,000 多个目录。

使用您提供的命令首先获取所有文件和文件夹并将它们存储到内存中。只是做`$files = gci $path -r`需要很长时间，因为有很多文件。然后，您的命令将大内存块传递给`Measure-Object`. 最后，`Measure`进行计算。所以你在等待一段时间没有进展。

> [PowerShell 处理 ForEachObject cmdlet，它在每个值通过管道时对其进行处理，因此它在任何给定时间使用的内存都更少。](http://windowsitpro.com/powershell/iterating-through-collections-powershells-foreach-loops)

您可以做的是使用 Foreach-Object`%`循环来处理大小，并让它输出它已经计算的内容。将文本打印到屏幕上总是会减慢速度，但至少您看到了进步。删除`cls; "Total: $($total/1GB)GB"`以提高效率。

```
gci $path -file -r | % {$total += $_.length; cls; "Total: $($total/1GB)GB"} 
```

对您的命令和作为答案给出的其他命令运行 a `Measure-Command`，看看哪个是最快的。

# wordpress - Wordpress：如何在 WP 主题中插入下拉菜单？

> ID：15765722
> 
> 赞同：0
> 
> 时间：2013-04-02T13:43:05.827
> 
> 标签：wordpress, drop-down-menu, menu, themes

似乎无法在网络上找到解决此问题的方法。我对 Java、CSS 和 PHP 的相互交织机制一无所知。

我的 WP 主题不支持下拉菜单 - 我想知道如何手动插入。通常看到的基本的对我来说已经足够了。

(www.cakwa.com)

```
.nav { 

}
.nav ul { 
    list-style: none;   
    font-size: 1.1em; 
    text-transform: uppercase; 
    overflow: hidden; 
    margin: 0 -20px 0px 0; 
    float: right; 
}
.nav ul li { 
    float: left; 
    margin: 0 20px 0 18px; 
}
.nav ul li a{ 
    color: #A6A8AC;    
}
.nav ul li a:hover, .nav ul li.active a{ 
    color: #535659;    
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:35:40.153

每个主题都有下拉菜单功能。rustik 也有。只需转到外观>菜单然后添加您的菜单。只需将菜单选项滑动到右侧即可将它们更改为下拉菜单

# android - 通过 xml 注册共享首选项更改侦听器

> ID：15765724
> 
> 赞同：0
> 
> 时间：2013-04-02T13:43:07.523
> 
> 标签：android, broadcastreceiver, android-manifest, sharedpreferences

我的应用程序需要收到有关其首选项更改的通知。我正在使用这个 api，一切正常：

```
PreferenceManager.getDefaultSharedPreferences([my component]).registerOnSharedPreferenceChangeListener([my component]); 
```

此代码在启动时执行，为**android.intent.action.BOOT_COMPLETED**注册一个 BroadcastReceiver 。

我想保留所需的最低权限配置文件，所以我想知道是否可以通过应用程序清单中的 xml 注册共享首选项更改侦听器，以便我可以删除 BroadcastReceiver 并删除权限：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

提前致谢，

大号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:03:13.860

> 此代码在启动时执行，为 android.intent.action.BOOT_COMPLETED 注册一个 BroadcastReceiver。

这是没用的，因为您的进程应该在执行此代码后不久消失，从而删除您的侦听器。

> 我想知道是否可以通过应用程序清单中的 xml 注册共享首选项更改侦听器，以便我可以删除 BroadcastReceiver 并删除权限

不，对不起。

> 一个 linux-subsystem 守护进程在这个共享首选项文件上读写

~~正在运行的 Java 进程不会看到对首选项文件的更改，这些更改是由另一个进程进行的。~~

`SharedPreferences`是一种数据存储机制。它不是进程间通信机制。要在本机进程和 Dalvik 进程之间进行通信，请使用`Binder`Android 系统服务的方式。

# c# - 通过组合框双向绑定更改数据源中的 XML 属性

> ID：15765731
> 
> 赞同：0
> 
> 时间：2013-04-02T13:43:36.380
> 
> 标签：c#, wpf, xml, data-binding, .net-4.5

这是我的 XAML 示例代码：

```
<Grid>
    <Grid.DataContext>
        <XmlDataProvider x:Name="DataProvider" Source="datacontext.xml" XPath="/"  />
    </Grid.DataContext>
    <ComboBox Name="combobox1" Width="100" Height="25" ItemsSource="{Binding XPath=Contact/ContactMethods//*}">
        <ComboBox.SelectedValue>
            <Binding XPath="Contact\ContactMethods/*[@Selected='True']" NotifyOnSourceUpdated="True" NotifyOnTargetUpdated="True" />
        </ComboBox.SelectedValue>
    </ComboBox>
</Grid> 
```

这是我的 XML 数据源：

```
<Contact ShowsInterest="true">
  <Name>John</Name>
  <Lastname>Doe</Lastname>
  <ContactMethods>
    <ContactMethod Selected="False">Phone</ContactMethod>
    <ContactMethod Selected="False">Email</ContactMethod>
    <ContactMethod Selected="True">Letter</ContactMethod>
    <ContactMethod Selected="False">Mobile</ContactMethod>
  </ContactMethods>
</Contact> 
```

上面的代码将联系人方法显示为组合框。将 XML Selected Attribute 设置为 true 的 ContactMethod 在组合框中预选并在启动时显示。

它看起来像这样：

![这是它的样子](https://i.stack.imgur.com/jfJoV.png)

我使用以下方法保存数据：

```
private void OnSubmitClick(object sender, System.EventArgs eventArgs)
{
    DataProvider.Document.Save("datacontext.xml");
} 
```

此方法更改 ContactMethod 的值，而不是 Selected 属性。

如果您选择`Mobile`并单击 [提交]，结果如下所示：

```
 <ContactMethods>
    <ContactMethod Selected="False">Phone</ContactMethod>
    <ContactMethod Selected="False">Email</ContactMethod>
    <ContactMethod Selected="True">Mobile</ContactMethod>
    <ContactMethod Selected="False">Mobile</ContactMethod>
  </ContactMethods> 
```

`Selected`在Attribute 等于 true的情况下，更改将保持不变。控件绑定的值被覆盖。

**期望的结果：**它应该是这样的：

```
 <ContactMethods>
    <ContactMethod Selected="False">Phone</ContactMethod>
    <ContactMethod Selected="False">Email</ContactMethod>
    <ContactMethod Selected="False">Letter</ContactMethod>
    <ContactMethod Selected="True">Mobile</ContactMethod>
  </ContactMethods> 
```

**问题：** 如何更改当前选中项的选中属性？是否可以保留使用所需的 xml 数据结构所做的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:42:30.440

你为什么不做这样的事情：而不是拥有多个 Selected 属性，只需在`ContactMethods`元素中创建一个 Selected 属性：

```
<Contact ShowsInterest="true">
  <Name>John</Name>
  <Lastname>Doe</Lastname>
  <ContactMethods Selected="Phone">
    <ContactMethod>Phone</ContactMethod>
    <ContactMethod>Email</ContactMethod>
    <ContactMethod>Letter</ContactMethod>
    <ContactMethod>Mobile</ContactMethod>
  </ContactMethods>
</Contact> 
```

然后像这样绑定你的 ComboBox：

```
 <ComboBox Name="combobox1" Width="100" Height="25" ItemsSource="{Binding XPath=Contact/ContactMethods/ContactMethod}"
             IsSynchronizedWithCurrentItem="True" 
             SelectedValue="{Binding XPath=Contact/ContactMethods/@Selected}">
    </ComboBox> 
```

**另一个不更改源 XML 结构**的选项：想法是在持久性时更改 XML，将选定的属性标志设置为`ComboBox` `SelectedValue`：

将您的方法更改`OnSubmitClick`为：

```
 private void OnSubmitClick(object sender, RoutedEventArgs e)
    {
        XElement xe = XElement.Load(new XmlNodeReader(DataProvider.Document));
        var elements = xe.Elements("ContactMethods").Elements("ContactMethod").ToList();
        var sel = combobox1.SelectedValue;
        foreach(XElement element in elements)
        {
            element.SetAttributeValue("Selected", (string)sel == element.Value ? "True" : "False");
        }
        xe.Save("datacontext.xml");
        //DataProvider.Document.Save("datacontext.xml");
    } 
```

你的`ComboBox`定义是：

```
 <ComboBox Name="combobox1" Width="100" Height="25" ItemsSource="{Binding XPath=Contact/ContactMethods/ContactMethod}"
             IsSynchronizedWithCurrentItem="True" 
             SelectedValue="{Binding XPath=Contact/ContactMethods/ContactMethod[@Selected\=\'True\'],Mode=OneTime}">
        </ComboBox> 
```

# java - 根据出现次数打印

> ID：15765733
> 
> 赞同：1
> 
> 时间：2013-04-02T13:43:38.370
> 
> 标签：java, hashmap, comparator

我正在尝试根据哈希图中每个键的出现次数对程序的输出进行排序。我希望它以出现的递增顺序打印出来。它已经正确打印出来了，只是没有按顺序打印。我查看了此页面[Sort a Map<Key, Value> by values](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java/3420912#3420912)但对于哪些仍然有效，哪些无效，这确实令人困惑。

哈希图 -

```
Map<String, NumberHolder> uaCount = new HashMap<String, NumberHolder>(); 
```

印刷部分

```
for(String str : uaCount.keySet())
    {
        String [] arr = str.split(":");                     
        long average = uaCount.get(str).sumtime_in_milliseconds / uaCount.get(str).occurrences;         
        System.out.println(arr[0] + " ---> " + arr[1] + "---> " + arr[2] + "--->" + arr[3] +  "\nAverage = "  + average + " milliseconds \nOccurrences = " + uaCount.get(str).occurrences);
    } 
```

我的`NumberHolder`班级定义

```
public static class NumberHolder
{
    public int occurrences = 0;
    public int sumtime_in_milliseconds = 0;     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:46:18.850

编辑：误读要求。见下文。

您需要取出所有对象如果您想保持原样，请执行以下操作：

```
final ArrayList<Map.Entry<String,NumberHolder>> entries 
    = new ArrayList<Map.Entry<String,NumberHolder>>(uaCount.entrySet());

Comparator<Map.Entry<String,NumberHolder>> comp = new Comparator<Map.Entry<String,NumberHolder>>() {
    @Override
    public int compare(Map.Entry<String, Something> o1, Map.Entry<String, Something> o2) {
        return Integer.compare(o1.getValue().occurrences,o2.getValue().occurrences);
    }
};

Collections.sort(entries, comp);

for(Map.Entry<String,NumberHolder> entry : entries)
{
    ... // use entry.getKey(), entry.getValue()
} 
```

请注意，您引用的问题似乎确实有很多有用的答案和其他信息，尤其是在性能是一个问题的情况下。

# php - 使用输入上传大尺寸图片时出错

> ID：15765737
> 
> 赞同：0
> 
> 时间：2013-04-02T13:43:45.093
> 
> 标签：php, html, file-io

我正在尝试使用 html 输入标签上传更大尺寸的图像，例如 4608X3500 像素。但无法获取文件大小。

我正在使用此代码获取文件详细信息：

```
 $userfile_name = $_FILES['image']['name'];
$userfile_tmp = $_FILES['image']['tmp_name'];
$userfile_size = $_FILES['image']['size'];
$userfile_type = $_FILES['image']['type'];
$filename = basename($_FILES['image']['name']); 
```

在这种情况下，我没有得到类型值并且大小值显示为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:47:43.087

应该是文件太大了。做什么

```
var_dump($_FILES['image']['error']) 
```

节目？如果它不为零，则发生错误。代码在这里定义：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:52:52.877

C:\wamp\bin\php\php5.2.6

在此搜索 php.ini 文件和此文件中，您需要设置 upload_max_filesize...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T07:38:12.547

有时当我们上传小于 2 MB 的文件时。它正常上传，因为默认情况下`upload_max_filesize`php.ini 有 2M 这意味着 2 MB。另一方面，超过 2 MB 的文件大小需要 `upload_max_filesize`在 php.ini 中进行更改。你也可以检查你的错误

```
var_dump($_FILES['image']['error']) 
```

此处列出相关值

```
UPLOAD_ERR_OK

    Value: 0; There is no error, the file uploaded with success.
UPLOAD_ERR_INI_SIZE

    Value: 1; The uploaded file exceeds the upload_max_filesize directive in php.ini.
UPLOAD_ERR_FORM_SIZE

    Value: 2; The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form.
UPLOAD_ERR_PARTIAL

    Value: 3; The uploaded file was only partially uploaded.
UPLOAD_ERR_NO_FILE

    Value: 4; No file was uploaded.
UPLOAD_ERR_NO_TMP_DIR

    Value: 6; Missing a temporary folder. Introduced in PHP 4.3.10 and PHP 5.0.3.
UPLOAD_ERR_CANT_WRITE

    Value: 7; Failed to write file to disk. Introduced in PHP 5.1.0.
UPLOAD_ERR_EXTENSION

    Value: 8; A PHP extension stopped the file upload. PHP does not provide a way to ascertain which extension caused the file upload to stop; examining the list of loaded extensions with phpinfo() may help. Introduced in PHP 5.2.0.' 
```

参考这里：- [http://php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:48:27.220

更改`upload_max_filesize`您的 php.ini

# c# - 格式化程序反序列化给出：在解析完成之前遇到流结束

> ID：15765739
> 
> 赞同：6
> 
> 时间：2013-04-02T13:43:58.363
> 
> 标签：c#, exception, binary, formatter

我正在尝试反序列化保存到文件中的对象（使用二进制格式化程序）。无论我尝试什么，我都会遇到异常：在解析完成之前遇到流结束

我有以下代码行：

```
public static T DeserializeFromBinaryFile<T>(string fileName)
{
    T instance = default(T);
    FileStream fs = new FileStream(fileName, FileMode.Open);
    try
    {
        BinaryFormatter formatter = new BinaryFormatter();
        instance = (T)formatter.Deserialize(fs);
    }
    catch{}
    finally
    {
        fs.Close();
    }

    return instance;
} 
```

我也试过：

```
public static T DeserializeFromBinaryFile<T>(string fileName)
{
    T instance = default(T);
    FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.Read);
    MemoryStream ms = new MemoryStream();
    try
    {
        byte[] bytes = new byte[fs.Length];
        fs.Read(bytes, 0, (int)fs.Length);
        ms.Write(bytes, 0, (int)fs.Length);
        ms.Position = 0;
        ms.Seek(0, SeekOrigin.Begin); 
    }
    catch { }

    try
    {
        BinaryFormatter formatter = new BinaryFormatter();
        instance = (T)formatter.Deserialize(ms);
    }
    catch { }
    finally
    {
        ms.Close();
        fs.Close();
    }

    return instance;
} 
```

但无论我做什么，总是会遇到异常：

> 在解析完成之前遇到流结束

**补充**：我刚刚做了一些额外的测试。如果我有一个简单的对象，只有几个属性，它就可以正常工作。使用更（大）复杂的对象，封装其他对象、枚举等，这就是我得到异常的时候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:49:10.217

尝试在第二个 try/catch 块内为您的流设置`position`to ：`0`

```
BinaryFormatter b = new BinaryFormatter();
s.Position = 0;
return (YourObjectType)b.Deserialize(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T14:46:25.743

您是否尝试过反序列化文件流而不是内存流？这个对我有用。

```
FileStream fs = new FileStream(fileName, FileMode.Open);
fs.position=0;
instance = (T)formatter.Deserialize(fs); 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-22T17:21:30.783

Every member within the class to be serialized, must have the `[Serializable()]` attribute or be marked `[NonSerialized]`. Note, enums and all simple built in types are already serializable and do not require the `[Serializable()]` attribute.

The example below gives the same error. Uncomment the `[Serializable()]` above `public class B`, and deserialization will occur without errors.

**It is not possible to say with certainty whether this is the cause of your error, because you did not provide a sample of the class resulting in the error.*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary; 

//[Serializable()]
public class B
{
    public int y = 2;
}
[Serializable()]
public class A
{
    public int x = 2;
    /*[NonSerialized]*/ public B b;
    public static T DeserializeFromBinaryFile<T>(string fileName)
    {
        T instance = default(T);
        FileStream fs = new FileStream(fileName, FileMode.Open);
        try
        {
            BinaryFormatter formatter = new BinaryFormatter();
            instance = (T)formatter.Deserialize(fs);
        }
        catch (System.Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        finally
        {
            fs.Close();
        }

        return instance;
    }
    public static void SerializeBinaryFile<T>(string fileName,T t)
    {
        try
        {
            using (FileStream fs = File.Open(fileName, FileMode.Create))
            {
                BinaryFormatter bf = new BinaryFormatter();
                bf.Serialize(fs, t);
            }
        }
        catch (System.Exception ex)
        {

        }
    }
}

class Program
{
    static void Main(string[] args)
    {
        A testA = new A();
        A.SerializeBinaryFile("test.dat", testA);
        A testReadA = A.DeserializeFromBinaryFile<A>("test.dat");
    }
} 
```

[https://msdn.microsoft.com/en-us/library/ms973893.aspx](https://msdn.microsoft.com/en-us/library/ms973893.aspx)

# python - 使用 numpy 进行矩阵乘法

> ID：15765744
> 
> 赞同：2
> 
> 时间：2013-04-02T13:44:07.760
> 
> 标签：python, matrix, numpy

我有两个矩阵

```
a = matrix(((1.4) ,(2.5) ,(1.96),(6.25),(12.25)) 
```

和

```
b = matrix(((1 ,1,1,1,1),(2,2,2,2,2))) 
```

当我将这些矩阵相乘时

```
product = b*a 
```

我收到一个错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.6/dist-packages/numpy-1.7.0-py2.6-linux-i686.egg/numpy/matrixlib/defmatrix.py", line 330, in __mul__
    return N.dot(self, asmatrix(other))
ValueError: matrices are not aligned 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:47:44.827

你的矩阵是乘以它们的错误形状。我想你可能打算定义`a`为：

```
a = matrix(((1.4,),(2.5,),(1.96,),(6.25,),(12.25,))) 
```

这与以下内容相同：

```
a = matrix((1.4,2.5,1.96,6.25,12.25)).T 
```

或者

```
a = matrix(((1.4),(2.5),(1.96),(6.25),(12.25))).T 
```

请注意，**逗号**是构成元组的原因。括号只是为了避免语法上的歧义。在最后一个例子中，最里面的括号组什么都不做，并被python的解析器删除。

# asp.net - MySql 会话提供程序 - 锁定列的用途是什么？

> ID：15765745
> 
> 赞同：0
> 
> 时间：2013-04-02T13:44:08.103
> 
> 标签：asp.net, mysql, session-state

MySqlSessionProvider 类为我们做了很多工作，但我在查找有关数据库结构的文档时遇到了麻烦。我知道结构是什么：

```
CREATE TABLE sessions
     (
         SessionId       Text(80)  NOT NULL,
         ApplicationName Text(255) NOT NULL,
         Created         Datetime  NOT NULL,
         Expires         Datetime  NOT NULL,
         LockDate        Datetime  NOT NULL,
         LockId          Integer   NOT NULL,
         Timeout         Integer   NOT NULL,
         Locked          YesNo     NOT NULL,
         SessionItems    Memo,
         Flags           Integer   NOT NULL,
         CONSTRAINT PKSessions PRIMARY KEY (SessionId, ApplicationName)
     ) 
```

但我找不到任何关于该`Locked`列功能的细节。会话是否暂时关闭？只读？预订的？为什么是`Expires`约会前半小时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:00:02.513

我很难回答自己的问题，但我想我找到了。

在[MSDN](http://msdn.microsoft.com/en-us/library/aa478952.aspx)上：

> Locked、LockDate、LockDateLocal 和 LockCookie 字段用于锁定对会话的并发访问。

这都是关于并发的。

我假设这是一个 MySql 功能，结果它是一个带有 MySql 连接器的 Asp.Net 功能。

# performance - 按名称添加矢量元素的快速函数

> ID：15765748
> 
> 赞同：10
> 
> 时间：2013-04-02T13:44:17.803
> 
> 标签：performance, r, vector, rcpp

我写了这个`R`函数，给定任意数量的向量 ( `...`)，通过根据它们的名称对各自的元素值求和来组合它们。

```
add_vectors <- function(...) {
  a <- list(...)
  nms <- sort(unique(unlist(lapply(a, names))))
  out <- numeric(length(nms))
  names(out) <- nms
  for (v in a) out[names(v)] <- out[names(v)] + v

  out
} 
```

例子：

```
v1 <- c(a=2,b=3,e=4)
v2 <- c(b=1,c=6,d=0,a=4)
add_vectors(v1, v2)
#
a b c d e 
6 4 6 0 4 
```

我正在尝试编写一个**更快**的等效函数。

不幸的是，目前我不知道如何实现这一点，`R`所以我想`Rcpp`。但是，为了在`Rcpp`这个函数中进行转换，我错过了一些概念：

1.  如何管理`...`参数。`List`使用in 类型的参数`Rcpp`？
2.  如何迭代`...`参数中的向量。
3.  如何通过名称访问（然后求和）向量的元素（这在 中非常简单`R`，但我不知道如何在 中进行操作`Rcpp`）。

因此，我正在寻找可以帮助我提高此功能的性能的人（在`R`or中`Rcpp`，或两者兼而有之）。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T18:00:09.730

我会使用这样的东西：

```
#include <Rcpp.h>
using namespace Rcpp; 

// [[Rcpp::export]]
NumericVector add_all(List vectors){
    RCPP_UNORDERED_MAP<std::string,double> out ; 
    int n = vectors.size() ;
    for( int i=0; i<n; i++){
        NumericVector x = vectors[i] ;
        CharacterVector names = x.attr("names") ;
        int m = x.size() ;

        for( int j=0; j<m; j++){
            String name = names[j] ;
            out[ name ] += x[j] ;   
        }
    }
    return wrap(out) ;
} 
```

使用以下包装器：

```
add_vectors_cpp <- function(...){
    add_all( list(...) )
} 
```

`RCPP_UNORDERED_MAP`只是一个 typedef to `unordered_map`，`std::`取决于`std::tr1::`你的编译器，等等......

这里的技巧是`...`使用经典创建一个常规列表`list(...)`。

如果你真的想直接`...`在 C++ 中传递并在内部处理它，你将不得不使用[`.External`](http://help.r-enthusiasts.com/library/base/html/CallExternal.html)接口。这很少使用，因此 Rcpp 属性不支持该[`.External`](http://help.r-enthusiasts.com/library/base/html/CallExternal.html)接口。

使用[`.External`](http://help.r-enthusiasts.com/library/base/html/CallExternal.html)，它看起来像这样（未经测试）：

```
SEXP add_vectors(SEXP args){
    RCPP_UNORDERED_MAP<std::string,double> out ; 
    args = CDR(args) ;
    while( args != R_NilValue ){
        NumericVector x = CAR(args) ;

        CharacterVector names = x.attr("names") ;
        int m = x.size() ;

        for( int j=0; j<m; j++){
            String name = names[j] ;
            out[ name ] += x[j] ;   
        }        
        args = CDR(args) ;
    }   
    return wrap(out) ;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:30:57.727

**使用编译器**包编译成字节码会给你一些改进。此软件包随 R 一起提供。

```
library(compiler)
library(microbenchmark)

add_vectors_cmp <- cmpfun(add_vectors)

set.seed(1)
v <- rpois(length(letters), 10)
names(v) <- letters
vs <- replicate(150, v, simplify=FALSE)

not_compiled <- function(l) do.call(add_vectors, l)
compiled <- function(l) do.call(add_vectors_cmp, l)

plot(microbenchmark(not_compiled(vs), compiled(vs))) 
```

![在此处输入图像描述](https://i.stack.imgur.com/n5mhW.jpg)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T16:55:15.350

我刚刚在`Rcpp`.

我不知道如何使用`...`参数（以及如何对其进行迭代），`Rcpp`所以我将此函数封装在一个简单的`R`函数中。

## 解决方案

```
library(Rcpp)
cppFunction(
  code = '
  NumericVector add_vectors_cpp(NumericVector v1, NumericVector v2) {
    // merging names, sorting them and removing duplicates
    std::vector<std::string> nms1 = v1.names();
    std::vector<std::string> nms2 = v2.names();
    std::vector<std::string> nms;
    nms.resize(nms1.size() + nms2.size());
    std::merge(nms1.begin(), nms1.end(), nms2.begin(), nms2.end(), nms.begin());
    std::sort(nms.begin(), nms.end());
    nms.erase(std::unique(nms.begin(), nms.end()), nms.end());
    // summing vector elements by their names and storing them in an associative data structure
    int num_names = nms.size();
    std::tr1::unordered_map<std::string, double> map(num_names);
    for (std::vector<int>::size_type i1 = 0; i1 != nms1.size(); i1++) {
        map[nms1[i1]] += v1[i1];
    }
    for (std::vector<int>::size_type i2 = 0; i2 != nms2.size(); i2++) {
        map[nms2[i2]] += v2[i2];
    }
    // extracting map values (to use as result vector) and keys (to use as result vector names)
    NumericVector vals(map.size());
    for (unsigned r = 0; r < num_names; ++r) {
        vals[r] = map[nms[r]];
    }
    vals.names() = nms;
    return vals;
  }',
  includes = '
  #include <vector>
  #include <tr1/unordered_map>
  #include <algorithm>'
) 
```

然后封装在一个`R`函数中：

```
add_vectors_2 <- function(...) {
  Reduce(function(x, y) add_vectors_cpp(x, y), list(...))
} 
```

请注意，此解决方案使用`STL`库。我不知道这是否是一个*写得很好的 C++*解决方案，或者是否可以（可能）编写一个更有效的解决方案，但可以肯定它是一个好的（和工作的）起点。

## 使用示例

```
v1 <- c(b = 1, d = 2, c = 3, a = 4, e = 6, f = 5)
v2 <- c(d = 2, c = 3, a = 4, e = 6, f = 5)
add_vectors(v1, v2, v1, v2)
#  a  b  c  d  e  f 
# 16  2 12  8 24 20
add_vectors_2(v1, v2, v1, v2)
#  a  b  c  d  e  f 
# 16  2 12  8 24 20 
```

### 注意：此函数也适用于名称不是唯一的向量。

```
v1 <- c(b = 1, d = 2, c = 3, a = 4, e = 6, f = 5)
v2 <- c(d = 2, c = 3, a = 4, e = 6, f = 5, f = 10, a = 12)
add_vectors(v1, v2)
#  a  b  c  d  e  f 
# 16  1  6  4 12 15 
add_vectors_2(v1, v2)
#  a  b  c  d  e  f 
# 20  1  6  4 12 20 
```

如上一个示例所示，即使输入向量具有非唯一名称，该解决方案也有效，**将具有相同名称的相同向量的元素相加**。

## 基准

`R`在最简单的情况下（两个向量），我的解决方案比解决方案快大约 3 倍。这是一个很好的改进，但可能还有更好的`C++`解决方案进行进一步小的改进的空间。

```
Unit: microseconds
                 expr    min     lq median      uq     max neval
  add_vectors(v1, v2) 65.460 68.569 70.913 73.5205 614.274   100
add_vectors_2(v1, v2) 20.743 23.389 25.142 26.9920 337.544   100 
```

![在此处输入图像描述](https://i.stack.imgur.com/IUBr7.png)

当将此函数应用于更多向量时，性能会有所下降（仅快 2 倍）。

```
Unit: microseconds
                                 expr     min       lq  median       uq     max neval
  add_vectors(v1, v2, v1, v2, v1, v1) 105.994 195.7565 205.174 212.5745 993.756   100
add_vectors_2(v1, v2, v1, v2, v1, v1)  66.168 125.2110 135.060 139.7725 666.975   100 
```

所以现在的最后一个目标是删除`R` *直接*使用.`...``List``Rcpp`

我认为这是可能的，因为`Rcpp`糖具有与其相似的功能（例如功能的*移植*`sapply`），但希望得到一些反馈。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-02T20:47:09.507

data.table 包非常擅长执行聚合和其他操作。我不是真正的专家，但

```
library(data.table)
add_vectors5 <- function(...)
{
    vals <- do.call(c, list(...))
    dt <- data.table(nm=names(vals), v=vals, key="nm")
    dt <- dt[,sum(v), by=nm]
    setNames(dt[[2]], dt[[1]])
} 
```

似乎比其他纯 R 实现快约 2 倍。一个更神秘的实现是

```
add_vectors6 <- function(..., method="radix")
{
    vals <- do.call(c, list(...))
    ## order by name, but use integers for faster order algo
    idx <- match(names(vals), unique(names(vals)))
    o <- sort.list(idx, method=method, na.last=NA)

    ## cummulative sum of ordered values
    csum <- cumsum(vals[o])

    ## subset where ordering factor changes, and then diff
    idxo <- idx[o]
    diff(c(0, csum[idxo != c(idxo[-1], TRUE)]))
} 
```

容易出现数值溢出；如果名称少于 100,000 个，则使用 method="radix"，如 上所暗示的那样`?sort.list`，否则使用 method="quick"。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T15:24:44.743

我不认为你会得到太多的加速。我在 R 代码中采用了另一种方法，将所有输入组合成一个向量，然后按名称重新拆分，并使用`vapply`. 那里的所有函数或多或少都调用内部 C 代码，并且速度与大型向量的函数相当（在长度为 1e5 和 1e6 的向量上测试）。对于 3 或 4 个元素的玩具示例，它会慢一些。

```
add_vectors2 <- function(...) {
  y <- do.call(c, unname(list(...)))
  vapply(split(y, names(y)), sum, numeric(1))
}

#Longer sample vectors
m <- 1e3
n <- 1e6
v1 <- sample(m, n, replace = TRUE)
names(v1) <- sample(n)
v2 <- sample(m, n, replace = TRUE)
names(v2) <- sample(seq_len(n) + n / 2)  

#Timings
k <- 20
system.time(for(i in 1:k) add_vectors(v1, v2))   #5 or 6 seconds
system.time(for(i in 1:k) add_vectors2(v1, v2))  #same 
```

编辑：矢量名称固定为唯一，反映了 Roland 的评论。我的解决方案现在比 OP 慢一点。

# jquery-mobile - 页面加载何时触发？

> ID：15765750
> 
> 赞同：1
> 
> 时间：2013-04-02T13:44:19.020
> 
> 标签：jquery-mobile

如果我改变

```
$(document).on('pageshow',myFunction); 
```

到

```
$(document).on('pageload',myFunction); 
```

并刷新页面，页面加载功能永远不会触发。我在想什么错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:46:21.847

[pageload](http://api.jquerymobile.com/pageload/)事件仅针对从网络通过 AJAX 加载的页面触发。

如果您希望为已经嵌入 HTML 文档的页面调用处理程序，则可以绑定到[pageinit](http://api.jquerymobile.com/pageinit/)：

```
$(document).on("pageinit", myFunction); 
```

# macos - 无需 Xcode 导出签名证书

> ID：15765757
> 
> 赞同：0
> 
> 时间：2013-04-02T13:44:29.760
> 
> 标签：macos, terminal, codesign, code-signing-certificate

我建议通过双击`.cer`文件来请求并安装证书来签署我们的 OS X 应用程序。签名工作正常

```
codesign -s "Developer ID Application" MyApp.app 
```

现在我想导出证书和所属的私钥/公钥，以便在同一台机器的不同 OS X 版本上导入它。不幸的是，[developer.apple.com](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/CodeSigning/CodeSigning.html#//apple_ref/doc/uid/TP40011201-CH7-SW1/)上的文档似乎只描述了从 Xcode 导出/导入，而我没有也不想安装。还有哪些其他方法可以导出密钥和证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:54:43.077

尝试使用`Keychain Access`.

( `Finder`> `Utilities`> `Keychain Access`)

# iphone - 建议如何实施图像幻灯片/轮播？（iOS）

> ID：15765758
> 
> 赞同：14
> 
> 时间：2013-04-02T13:44:35.530
> 
> 标签：iphone, ios, objective-c, xcode, slideshow

我刚刚开始使用 iOS 开发，我正在构建一个应用程序来帮助自己更快地学习。

我已经到了一个阶段，我已经确定了应用程序的所有基础知识，但现在我只想在我的视图控制器顶部实现一个幻灯片，就像在国家公园应用程序和许多其他应用程序中找到的那样 - [http ://wpuploads.appadvice.com/wp-content/uploads/2012/04/Nati2.jpg](http://wpuploads.appadvice.com/wp-content/uploads/2012/04/Nati2.jpg)

任何建议或指向教程或解释的链接都会很棒。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T13:51:12.470

您必须从 github [https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)下载 iCarousel 代码。你可以从这里下载代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T13:57:13.500

我希望这个链接能帮助你

[http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)

其他简单的实现方式：步骤实现

1.  在一个滚动视图中添加所有图像。

2.  为该滚动视图启用分页。

3.  基于滚动视图的内容偏移，突出显示适当的点（底部的指示符）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-01T17:53:02.630

您也可以将 a`UICollectionView`与水平滚动一起使用。

# jquery - jQuery：替换元素后获取对父级的引用

> ID：15765759
> 
> 赞同：1
> 
> 时间：2013-04-02T13:44:40.613
> 
> 标签：jquery, onclick, parent

**案子：**

我正在开发一个新的 jQuery 照片库。目前我正在合并三个不同的库并编写一些自定义代码来扩展画廊的功能。但在过去的 2 个小时里，我一直停留在这段脚本上，想不出办法。

其中一个库中有一段脚本将一些标记附加到`body`. 这是添加的标记。

```
<div class='custom' data-oid=1>
    <div class='page-link' data-attr=1>Page Link</div>
    <div class='page-link' data-attr=2>Page Link</div>
</div>
<div class='custom' data-oid=2>
    <div class='page-link' data-attr=1>Page Link</div>
    <div class='page-link' data-attr=2>Page Link</div>
</div> 
```

我想听`click`类事件`page-link`以在其他库中执行一些更改。由于添加的标记是动态的，我使用以下脚本来捕获`click`事件。

```
$(document).on('click', '.page-link', function () {
    //Print value of parent data attribute
    alert($(this).parent().attr('data-oid'));
}); 
```

**问题：**

它应该可以正常工作。但问题是添加标记的库也在监听`click`事件。一旦我点击`page-link`库，就会用另一个元素替换点击的元素。因此，单击的元素及其范围会丢失，并且`.parent()`在我的代码中无法获取父元素。

`data-oid`所以我的问题是：即使在范围丢失后，有没有办法获得父属性的值？

**[jsFiddle](http://jsfiddle.net/MQLKL/)**

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:53:22.197

随着事件冒泡，您可以将点击处理程序附加到父级，并自行检查目标是否为`.page-link`：

```
$(document).on('click', '.custom', function (e) {
    if ($(e.target).hasClass('page-link')) {
        $(e.target).replaceWith('<h2>Link Modified</h2>');
        alert( $(this).attr('data-oid') );
    }
}); 
```

[**小提琴**](http://jsfiddle.net/MQLKL/2/)

# database - WebSQL 性能问题 - 更新大量数据

> ID：15765763
> 
> 赞同：0
> 
> 时间：2013-04-02T13:45:01.593
> 
> 标签：database, html, web-sql

我有一些代码可以更新一些 webSQL 表，但是它是另一个事务中的一个事务，另一个事务中的一个事务。更新表需要很长时间，但创建/插入值需要正常的时间。有什么方法可以查看 webSQL 事务的性能（需要多长时间？）

在对 webService 的 AJAX Sucess 回调中，我有以下代码：

```
function handleOrderNote(value, tx, ite) {
tx.executeSql('SELECT * FROM MobileOrder where MobileOrderID = ?', [value.mobileOrder.mobileOrderID],
    function (tx, result) {
        function updateCreateOrderNote(tx, result, nResultadosIn, ite) {
            if (nResultadosIn > 0) {
                function updateOrderNote(value2, tx, ite) {
                    tx.executeSql('UPDATE MobileOrder SET CompanyID =?, CustomerID =?, OrderDate = ?, TotalQtt = ?, TotalCost = ?, UserPHC=?, HeaderID=?, OrderState=?, Observations=?, Status = ? WHERE MobileOrderID = ?', [value2.mobileOrder.companyID, value2.mobileOrder.customerID, value2.mobileOrder.orderDate, value2.mobileOrder.totalQtt, value2.mobileOrder.totalCost, value2.mobileOrder.userPHC, value2.mobileOrder.headerID, value2.mobileOrder.orderState, value2.mobileOrder.observations, value2.mobileOrder.status, value2.mobileOrder.mobileOrderID],
                        function (tx, result) {
                            function searchEqualOrderNote(value3, tx, ite) {
                                tx.executeSql('SELECT * FROM MobileOrderDetail where MobileOrderDetailID = ?', [value3.mobileOrderDetailID],
                                    function (tx, result) {
                                        function updateCreateLineOrderNote(tx, result, nResultadosIn, ite, value3) {
                                            if (nResultadosIn > 0) {
                                                function updateLineOrderNote(value4, tx, ite) {
                                                    tx.executeSql('UPDATE MobileOrderDetail SET MobileOrderID =?, Ref =?, CompanyID = ?, Discount = ?, Qtt = ?, TotalDetail=?, DetailID=? WHERE MobileOrderDetailID = ?', [value4.mobileOrderID, value4.ref, value4.companyID, value4.discount, value4.qtt, value4.totalDetail, value4.detailID, value4.mobileOrderDetailID],
                                                        function (tx, result) {}
                                                    );
                                                }
                                                updateLineOrderNote(value3, tx, ite);
                                            } else {
                                                function createLineOrderNote(value4, tx, ite) {
                                                    tx.executeSql('INSERT INTO MobileOrderDetail (MobileOrderDetailID, MobileOrderID, Ref, CompanyID, Discount, Qtt, TotalDetail, DetailID) VALUES (?, ?, ?, ?, ?, ?, ?, ?)', [value4.mobileOrderDetailID, value4.mobileOrderID, value4.ref, value4.companyID, value4.discount, value4.qtt, value4.totalDetail, value4.detailID],
                                                        function (tx, result) {});
                                                }
                                                createLineOrderNote(value3, tx, ite);
                                            }
                                        }

                                        updateCreateLineOrderNote(tx, result, result.rows.length, ite, value3);
                                    });
                            }
                            for (var i = 0; i < value2.mobileOrderDetail.length; i++) {
                                var linhaNotaEncomenda = value2.mobileOrderDetail[i];
                                searchEqualOrderNote(linhaNotaEncomenda, tx, i);
                            }
                        }
                    );
                }
                updateOrderNote(value, tx, ite);
            } else {
                function createOrderNote(value2, tx, ite) {
                    tx.executeSql('INSERT INTO MobileOrder (IDLocal, MobileOrderID, CompanyID, CustomerID, OrderDate, TotalQtt, TotalCost, UserPHC, HeaderID, OrderState, Observations, Status) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', [idLocalDestaEncomenda, value2.mobileOrder.mobileOrderID, value2.mobileOrder.companyID, value2.mobileOrder.customerID, value2.mobileOrder.orderDate, value2.mobileOrder.totalQtt, value2.mobileOrder.totalCost, value2.mobileOrder.userPHC, value2.mobileOrder.headerID, value2.mobileOrder.orderState, value2.mobileOrder.observations, value2.mobileOrder.status],
                        function (tx, result) {
                            function searchEqualOrderNote(value3, tx, ite, idLocalInput) {
                                tx.executeSql('SELECT * FROM MobileOrderDetail where MobileOrderDetailID = ?', [value3.mobileOrderDetailID],
                                    function (tx, result) {
                                        function updateCreateLineOrderNote(tx, result, nResultadosIn, ite, value3) {
                                            if (nResultadosIn > 0) {
                                                function updateLineOrderNote(value4, tx, ite) {
                                                    tx.executeSql('UPDATE MobileOrderDetail SET MobileOrderID =?, Ref =?, CompanyID = ?, Discount = ?, Qtt = ?, TotalDetail=?, DetailID=? WHERE MobileOrderDetailID = ?', [value4.mobileOrderID, value4.ref, value4.companyID, value4.discount, value4.qtt, value4.totalDetail, value4.detailID, value4.mobileOrderDetailID],
                                                        function (tx, result) {}
                                                    );
                                                }
                                                updateOrderLine(value3, tx, ite);
                                            } else {
                                                function createLineOrderNote(value4, tx, ite) {
                                                    tx.executeSql('INSERT INTO MobileOrderDetail (MobileOrderDetailID, MobileOrderID, Ref, CompanyID, Discount, Qtt, TotalDetail, DetailID, IDLocal) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)', [value4.mobileOrderDetailID, value4.mobileOrderID, value4.ref, value4.companyID, value4.discount, value4.qtt, value4.totalDetail, value4.detailID, idLocalInput],
                                                        function (tx, result) {
                                                            //trata linhas de encomenda
                                                        });
                                                }
                                                createLineOrderNote(value3, tx, ite);
                                            }
                                        }
                                        updateCreateLineOrderNote(tx, result, result.rows.length, ite, value3, idLocalInput);
                                    });
                            }
                            for (var i = 0; i < value2.mobileOrderDetail.length; i++) {
                                orderLine = value2.mobileOrderDetail[i];
                                searchEqualOrderNote(orderLine, tx, i, idLocalDestaEncomenda);
                            }
                        });
                }
                createOrderNote(value, tx, ite);
            }
        }
        updateCreateOrderNote(tx, result, result.rows.length, ite);
    }); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:15:59.967

重用事务，您应该会看到性能的显着提升。

有两种方法可以重用事务。

通过使用来自 的多个 tx `db.transaction`，您可以获得并行请求。

通过重用来自 onsuccess 处理程序的 tx，您可以获得有序的串行请求。

# ios - iTunes 应用内购买项目的一些说明

> ID：15765765
> 
> 赞同：0
> 
> 时间：2013-04-02T13:45:23.147
> 
> 标签：ios, in-app-purchase, itunes

我正在尝试在 iOS 上测试应用内购买。我更多地使用Android，所以我有点困惑，因为这个过程与Android略有不同。

我创建了一些应用内购买项目，即 IAP，如图所示

![](https://i.stack.imgur.com/jqboC.png)

我现在该怎么办？说明说我必须将应用程序与第一个应用程序内一起提交。但是，如果应用程序尚未完成，我该如何提交呢？无论应用程序可能崩溃或某些其他功能尚未启动，我是否都提交当前版本？

另外，截图真的是强制性的吗？

感谢任何人的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:50:06.897

截图确实是强制性的。奇怪，但需要的却不少。

据我所知，当您提交应用程序时，应该有一个部分允许您指定要提交的应用程序内购买。

我确实记得我发现这非常令人困惑，因为您似乎处于第 22 条情况，没有 IAP 就无法提交应用程序，反之亦然。

您需要为 In App Purchases 提供所有必填字段，以便状态为“准备提交”或“等待审核”（我不记得哪个状态先出现），然后您才能在您之前的阶段选择它们提交您的二进制文件以供审核。

# asp.net - 仅在提交时显示 asp.net UpdateProgress 控件

> ID：15765769
> 
> 赞同：0
> 
> 时间：2013-04-02T13:45:28.253
> 
> 标签：asp.net, ajax, updatepanel, updateprogress

我有一个带有 2 个按钮的页面。

我只想在通过其中一个按钮而不是另一个取消按钮提交页面时显示更新进度。我一直在努力想出一个解决方案。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:29:56.780

添加参数`AssociatedUpdatePanelID`for `UpdateProgress`，并将`AsyncPostBackTrigger`UpdatePanel 设置为要进行回发的按钮。

如果上述说明没有帮助，您也可以尝试将您需要的控件包装到`asp:Panel`控件中并设置`DefaultButton`为您的提交按钮 ID。

# python - 试图计算和打印平均值及其返回值 而不是一个数字？PYTHON

> ID：15765773
> 
> 赞同：0
> 
> 时间：2013-04-02T13:45:36.083
> 
> 标签：python

我在python中有我的程序，我使用了一个带有数字的外部文件，我为要存储的数字创建了一个列表，然后我需要从中找到平均值、标准偏差和列表的长度，在那一刻我的程序看起来像这样：

```
data = open( "gauss.dat", "r" )
numbers=[]

for line in data: 
    numbers.append(line)

sorted(numbers)

def length(numbers):
    length = len(numbers)
    return length

def mean(numbers):
    sum = 0
    for element in numbers:
        sum += element

    mean = sum/length
    return (mean)

def main():
    global history

    print (length)
    print('The smallest number is ' + numbers[0])
    print ('The largest number is ' + numbers[-1])
    print(mean)    
    return True

if __name__ == "__main__":

    main() 
```

当我运行程序时

1.  它没有正确排序数字？我是python新手，所以我不知道是否有明显的错误
2.  它将平均值和长度打印为`< function length at 0x039475B0 >`, `< function mean at 0x03947630 >`。我不知道如何将其更改为数字？

希望你能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:52:19.233

您需要*调用*函数`length`和/或`mean`：

```
print(length(numbers))
print(mean(numbers)) 
```

在 python 中，函数本身就是对象。所以他们有一个可以打印的表示。您可以将它们分配给当前命名空间中的不同名称，将它们传递给其他函数等，例如

```
MeAn = mean  # This is a violation of PEP 8!
print(MeAn(numbers))  #same as `print(mean(numbers))` 
```

换句话说，当你告诉 python 时：

```
print(mean) 
```

它打印*有关函数对象的* `mean`信息。但是它不运行该函数，因此无法获取它的返回值（毕竟，它应该如何知道将什么用作输入参数？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:57:23.570

**关于 1)**

一个强大的工具：交互式 shell 与`help`-command 相结合：

```
>>> help(sorted)

Help on built-in function sorted in module __builtin__:

sorted(...)
    sorted(iterable, cmp=None, key=None, reverse=False) --> new sorted list 
```

所以我们需要

```
numbers = sorted(numbers) 
```

或者

```
numbers.sort() 
```

（详见`help(numbers.sort)`）

**关于 2)**

正如 mgilson 所说：您必须调用该函数：

```
print(mean(numbers)) 
```

**关于评论**

和

```
for line in data: 
    numbers.append(line) 
```

您将文件逐行读取为*字符串*。但是要进行一些计算，您需要一个数字类型。一种方法是：

```
for line in data: 
    numbers.append(float(line)) 
```

这会将文本`line`转换为浮动类型。前导或尾随空格被裁剪（至少在我的 python 解释器中），但您可能会遇到空行或错误行的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:55:46.443

`sorted`返回可迭代的排序版本，但不更改它，您需要其中之一：

```
numbers = sorted(numbers) 
```

或者：

```
numbers.sort() 
```

关于函数，您需要使用必要的参数调用它们 - 例如：

```
mean = sum/length(numbers) 
```

您的代码中的多个位置都有此错误。

# ios - 如何让两个 iOS 应用共享 plist？

> ID：15765776
> 
> 赞同：0
> 
> 时间：2013-04-02T13:45:46.583
> 
> 标签：ios, objective-c, plist, entitlements

我正在制作一个具有免费版本和付费版本的 iOS 应用程序。当用户获得付费版本时，他/她不得丢失任何免费应用程序的数据。数据存储为 plist。

如何配置权利文件以启用此功能？以及如何在我的代码中将 plist 移动（导入）到付费应用的 Documents 目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:50:08.953

> 如何配置权利文件以启用此功能？

这与权利无关。

> 以及如何在我的代码中将 plist 移动（导入）到付费应用的 Documents 目录中？

你不知道 - 一个应用程序不可能访问另一个应用程序的沙箱。（好吧，实际上，如果您正在为越狱设备开发，那么这不是问题，但您似乎针对的是 AppStore，对吧？）

你可以做两件事。

1.  制作应用程序的一个版本并使用应用内购买来让用户访问付费功能（这是首选），或者

2.  [将数据存储在 keychain](http://useyourloaf.com/blog/2010/04/03/keychain-group-access.html)中，并将两个应用的 keychain 访问组设置为同一个。这样他们就可以共享数据。（现在这是您在权利属性列表中实际设置的内容。）

# android - 如何安装不同版本的 Android？

> ID：15765781
> 
> 赞同：1
> 
> 时间：2013-04-02T13:46:10.880
> 
> 标签：android

我安装了 Android SDK。当我运行它时，我只能看到 Andriod 4.2.2 (API 17)。

为什么我看不到所有 API 选项？（例如 API 11、12、13、14）

我需要安装其他东西吗？

这是 SDK 管理器日志：

```
Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml
Fetched Add-ons List successfully
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Fetching URL: http://dl-ssl.google.com/android/eclipse/addon.xml
Done loading packages.
Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/addons_list-2.xml, reason: Unknown Host dl-ssl.google.com
Fetched Add-ons List successfully
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/repository-7.xml, reason: IO Unknown Host dl-ssl.google.com
Fetching URL: http://dl-ssl.google.com/android/eclipse/addon.xml
Failed to fetch URL http://dl-ssl.google.com/android/eclipse/addon.xml, reason: IO Unknown Host dl-ssl.google.com
Done loading packages.
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/repository-7.xml, reason: IO Unknown Host dl-ssl.google.com
Fetching URL: http://dl-ssl.google.com/android/eclipse/addon.xml
Failed to fetch URL http://dl-ssl.google.com/android/eclipse/addon.xml, reason: IO Unknown Host dl-ssl.google.com
Done loading packages.
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/repository-7.xml, reason: IO Unknown Host dl-ssl.google.com
Fetching URL: http://dl-ssl.google.com/android/eclipse/addon.xml
Failed to fetch URL http://dl-ssl.google.com/android/eclipse/addon.xml, reason: IO Unknown Host dl-ssl.google.com
Done loading packages. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:58:34.457

1.  打开你的 SDK 管理器。

2.  点击左上角的“**包”。**

3.  单击“**显示更新/新包**”

4.  您应该会看到 Android 版本列表。单击您想要的，然后单击右下角的“**安装 X 包**”。

x 是文件的计数器。

# android - 屏幕触摸事件和按钮点击

> ID：15765785
> 
> 赞同：0
> 
> 时间：2013-04-02T13:46:17.767
> 
> 标签：android, events, touch, move

我尝试为游戏开发某种虚拟操纵杆。为了控制相机，我通过 onTouchEvent 获取屏幕坐标，为了控制游戏的头像，我使用按钮。为了处理按钮，我设置了 setOnTouchListener。但是，我无法触摸移动相机的屏幕并同时按下按钮。看起来 onTouchEvent 会阻止其他事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:16:00.393

这取决于您构建的版本，因为已经实现了多点触控，请参见[http://www.badlogicgames.com/wordpress/?p=1007](http://www.badlogicgames.com/wordpress/?p=1007)它可以帮助您找到您的设备支持多点触控

# jquery - jQuery.form 提交 IE 问题（7-9，可能 10）

> ID：15765787
> 
> 赞同：1
> 
> 时间：2013-04-02T13:46:19.580
> 
> 标签：jquery, asp.net-mvc-3, internet-explorer, jquery-forms-plugin

我正在尝试在 IE 中进行表单提交工作。我在 Chrome、FF、Opera 和 Safari 中的工作。我相信它也适用于 IE10，但我这里没有设备可以再次测试它（我之前在 IE10 中测试过，它运行良好。我对页面做了一些更改，但我我很确定这些更改不会影响此表格）。

基本上，我有提交记录但使用 jquery.form 控件提交的表单：

```
<form action="@Url.Content("/ActivitySubmission/SubmitWork")" class="activityForm" id="formId-@(item)" method="post"> 
```

以及处理提交的 jQuery 代码：

```
$(".activityForm").submit(function (e) {
        e.preventDefault();

        var parts = $(this).prop("id").split("-");
        var activityTemplateId = parts[3];
        var resultsDivId = "#activityResults" + activityTemplateId;
        var msg = '<div style="height:40px; margin-right:20px; float:left;"><img src="/Content/Images/loadingSpinner.gif" /></div>' +
            'Saving your work...<div style="clear:both;"></div>';
        $(resultsDivId).html(msg).slideDown();

        var action = $(this).prop("action");

        $(this).ajaxSubmit({
            url: "/ActivitySubmission/SubmitWork",
            data: {activityTemplateId: activityTemplateId},
            iframe: true,
            target: resultsDivId,
            dataType: 'json',
            success: function (data, textStatus, jqXHR) {
                var parts = data.split("|");
                var status = parts[0];
                var message = parts[1];
                $(resultsDivId).html('<div class="activitySuccess">' + message.replace("\"", "") + '</div>');

                $("#reloadReminder").fadeIn("1200");

                return false;
            },
            error: function(jqXHR, textStatus, errorThrown){
                $(resultsDivId).html('<div class="activityError">Sorry, unable to act on your save or submit command.  Please let the monitor know.</div>');
                alert(errorThrown);
                return false;
            }
        });

        return false;
    }); 
```

在 IE 中，表单将发布，并在控制器中运行代码 (/ActivitySubmission/SubmitWork) 但是当它返回页面时，它没有运行它的“成功”方法，`.ajaxSubmit({...});`它只是给了我一个“保存/打开/运行”对话框：

![保存对话框](https://i.stack.imgur.com/fIVVj.png)

关于为什么会在 IE 中发生这种情况以及如何改变这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:18:07.287

如果您在 ajax 调用中意外得到“保存/打开/运行”对话框，这意味着服务器没有在 HTTP 标头中提供正确的 mime 类型信息，因此浏览器错误地将响应识别为需要下载的文件。

您需要添加一个 HTTP 标头来指定要发送的数据类型。例如，在这种情况下，看起来您正在发送一个 HTML 片段，所以发送一个指定`text/html`.

希望有帮助。

# ruby-on-rails - 如何将 Link_to 添加到上传的缩略图

> ID：15765788
> 
> 赞同：0
> 
> 时间：2013-04-02T13:46:19.940
> 
> 标签：ruby-on-rails, image, hyperlink, indexing, paperclip

我正在尝试找出通过 Paperclip 将 Ruby on Rails 中上传的项目缩略图转换为可点击链接的语法，该链接会导致项目详细信息：

项目\index.html.erb

```
<% @projects.each do |project| %>

<%= image_tag (project.thumbnail.url(:small)) %>
<%= project.project_name %>
<%= project.project_city %>
<%= project.project_country %>

<%= link_to 'Show', project %> 
```

基本上它将 <%= link_to 'Show', project %> 添加到 image_tag 中，但是在尝试了几次迭代路径之后，我有点卡住了......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:06:14.580

如果我理解正确，这就是你想要的：

```
<%= link_to project do %>
  <%= image_tag project.thumbnail.url(:small) %>
<% end %> 
```

# ios - 区分两个视图控制器

> ID：15765794
> 
> 赞同：0
> 
> 时间：2013-04-02T13:46:26.667
> 
> 标签：ios, objective-c, uiviewcontroller, crash, segue

我有3个VC。A 显示问题和答案。当问题被错误选择时会显示 B，一旦级别清晰，就会显示 C。我从 AB 和 AC 出发时遇到问题。这是我的代码

```
#import "AViewController.h"
#import "BViewController.h"
#import "CViewController.h"

@interface AViewController ()
@end 
```

现在这里是实现代码

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
BViewController *incorrect = [segue destinationViewController];
incorrect.currentQuestion = self.currentQuestion;} 
```

//这里A正在向B发送关于哪个问题被错误回答的信息，即当前问题

```
- (void)viewDidLoad
{
[super viewDidLoad];
rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Addition1" ofType:@"plist"]];
currentQuestion = -1;
[self showNextQuestion];

}

 -(void) showNextQuestion{
currentQuestion++;
if (currentQuestion <= 3) {

    int numItems = [rootArray count];
    NSMutableArray *question = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *A = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *B = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *C = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *addimage = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *Answer = [NSMutableArray arrayWithCapacity:numItems];

    for (NSDictionary *itemData in rootArray) {
        [question addObject:[itemData objectForKey:@"question"]];
        [A addObject:[itemData objectForKey:@"A"]];
        [B addObject:[itemData objectForKey:@"B"]];
        [C addObject:[itemData objectForKey:@"C"]];
        [addimage addObject:[itemData objectForKey:@"ImageUse"]];
        [Answer addObject:[itemData objectForKey:@"ANS"]];

    }
    self.questionasked.text = question[currentQuestion];
    self.answer1.text = A[currentQuestion];
    self.answer2.text = B[currentQuestion];
    self.answer3.text = C[currentQuestion];
    additionImage.image = [UIImage imageNamed:addimage[currentQuestion]];
    self.correctAns = Answer[currentQuestion];}
else{
    NSLog(@"End of Array ");
    [self performSegueWithIdentifier:@"levelpassed" sender:nil];

}
} 
```

这里上面的这个区域是我遇到问题的地方

当级别被清除时 C VC 显示此错误

```
[CViewController setCurrentQuestion:]: unrecognized selector sent to instance 0x71cae70
2013-03-30 21:17:31.264 thefyp[14311:c07] *** Terminating app due to uncaught exception         'NSInvalidArgumentException', reason: '-[CViewController setCurrentQuestion:]: unrecognized selector sent to instance 0x71cae70' 
```

我知道问题是 A 发现很难区分 segue 并试图发送有关当前问题的 C 数据，而我只想在 A 完成显示所有问题并且没有数据传输时显示 C A 与 B 接轨。B & C 也是 A 的子类。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:54:41.630

在`prepareForSegue`方法中检查 segue 标识符`UIStoryboardSegue.identifier`是否匹配到您的`B`-VC 的转换。

因为调用`performSegueWithIdentifier:@"levelPassed"`也会遇到此方法，并且您没有`B`-VC ，因此没有`currentQuestion`.

# java - 用于从特定文件夹下载文件的 Servlet？

> ID：15765799
> 
> 赞同：6
> 
> 时间：2013-04-02T13:46:42.260
> 
> 标签：java, servlets, upload, download

我是 JAVA 技术的新手，尤其是 Servlets。我需要制作一个 Web 应用程序项目，该项目有一个上传和下载文件到服务器（tomcat）的文件。我已经有一个上传 servlet，它工作正常。

我也有一个下载 servlet，在互联网上找到。但问题是这个 servlet 只允许下载一个特定的文件，并且这个特定文件的路径在 servlet 中给出。我需要让客户看到我上传文件夹的全部内容，并选择他想从这个文件夹下载哪个文件。

下载 servlet 的代码是这样的：

```
import java.io.DataInputStream; 
import java.io.File; 
import java.io.FileInputStream;
import java.io.IOException;
import javax.servlet.ServletContext; 
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

 public class DownloadServlet extends javax.servlet.http.HttpServlet implements
            javax.servlet.Servlet {
        static final long serialVersionUID = 1L;
        private static final int BUFSIZE = 4096;
        private String filePath;`

public void init() {
    // the file data.xls is under web application folder

    filePath = getServletContext().getRealPath("")  + File.separator;// + "data.xls";
}

protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    File file = new File(filePath);
    int length   = 0;
    ServletOutputStream outStream = response.getOutputStream();
    ServletContext context  = getServletConfig().getServletContext();
    String mimetype = context.getMimeType(filePath);

    // sets response content type
    if (mimetype == null) {
        mimetype = "application/octet-stream";
    }
    response.setContentType(mimetype);
    response.setContentLength((int)file.length());
    String fileName = (new File(filePath)).getName();

    // sets HTTP header
    response.setHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\"");

    byte[] byteBuffer = new byte[BUFSIZE];
    DataInputStream in = new DataInputStream(new FileInputStream(file));

    // reads the file's bytes and writes them to the response stream
    while ((in != null) && ((length = in.read(byteBuffer)) != -1))
    {
        outStream.write(byteBuffer,0,length);
    }

    in.close();
    outStream.close();
}
} 
```

JSP 页面是这样的：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Download Servlet Test</title>
</head>
<body>
Click on the link to download: <a href="DownloadServlet">Download Link</a>
</body>
</html> 
```

我搜索了很多 servlet，但它们都是这样的......他们只允许下载特定的文件。谁能帮我？非常感谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T13:54:02.727

由于您正在处理`doGet`方法上的数据，因此您可以将参数传递给 servlet，您可以在其中指明要下载的文件的名称。为此，您应该假设文件名存在于您的基本路径中。代码可以是这样的：

HTML

```
<body>
    Click on the link to download:
    <a href="DownloadServlet?fileName=data.xls">Download Link</a>
</body> 
```

Java Servlet 代码：

```
protected void doGet(HttpServletRequest request,
    HttpServletResponse response) throws ServletException, IOException {
    //retrieving the parameter by its name
    String fileName = request.getParameter("fileName"); //this will return `data.xls`
    //using the File(parent, child) constructor for File class
    File file = new File(filePath, fileName);
    //verify if the file exists
    if (file.exists()) {
        //move the code to download your file inside here...

    } else {
        //handle a response to do nothing
    }
} 
```

请注意，由于代码现在使用[`File(String parent, String child)`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.lang.String,%20java.lang.String%29)构造函数，因此您`filePath`不应再包含分隔符（这将由 Java 处理）：

```
public void init() {
    // the file data.xls is under web application folder
    filePath = getServletContext().getRealPath("");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-02T11:40:26.263

你可以那样做

```
 public void doGet(HttpServletRequest req, HttpServletResponse res){
     res.setContentType("text/html);
      PrintWriter out=response.getWriter();
      String fileName="home.txt";
      String filePath="d:\\";
    response.setContentType("APPLICATION/OCTET-STREAM");
    response.setHeader("Content-Disposition","attachment;fileName=\""+fileName+"\"");
    int i;
    FileInputStream file=new FileInputStream(filePath +fileName);
    while((i=file.read()) !=-1){
      out.write(i);
   }
    file.close();
   out.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-29T08:53:27.600

```
 // get MIME type of the file
    String mimeType = context.getMimeType(fullPath);
    if (mimeType == null) {
        // set to binary type if MIME mapping not found
        mimeType = "application/octet-stream";
    }
    System.out.println("MIME type: " + mimeType);

    // set content attributes for the response
    response.setContentType(mimeType);
    response.setContentLength((int) downloadFile.length()); 
```

这个更详细的问题和如何改进的问题：[https ://stackoverflow.com/questions/41914092/how-change-servlet-which-download-single-file-but-can-folderfew-files-in-fold](https://stackoverflow.com/questions/41914092/how-change-servlet-which-download-single-file-but-can-folderfew-files-in-fold)

# vb6 - 检查操作系统和处理器是 32 位还是 64 位？

> ID：15765804
> 
> 赞同：4
> 
> 时间：2013-04-02T13:46:55.240
> 
> 标签：vb6, wmi

我想要 vb6 代码来检查操作系统是 32 位还是 64 位，处理器是 32 位还是 64 位。所以请帮我获取这些代码。在 vb.net 中，我可以使用 Environment.Is64BitOperatingSystem 属性，它仅适用于 .net 4.0 及更高版本。但是如何在 vb6 中获取这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T08:29:43.680

回答这两个问题的最直接方法似乎是使用[Win32_Processor](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx) WMI 类。

* * *

### 操作系统是 32 位还是 64 位？

对于操作系统，可以检查`AddressWidth`属性：

> **地址宽度**
> 
> 在 32 位操作系统上，该值为 32，而在 64 位操作系统上，该值为 64。

相关的VB6代码是：

```
Public Function GetOsBitness() As String
    Dim ProcessorSet As Object
    Dim CPU As Object

    Set ProcessorSet = GetObject("Winmgmts:"). _
        ExecQuery("SELECT * FROM Win32_Processor")
    For Each CPU In ProcessorSet
        GetOsBitness = CStr(CPU.AddressWidth)
    Next
End Function 
```

* * *

### 处理器是 32 位还是 64 位？

对于处理器，可以检查`DataWidth`属性：

> **数据宽度**
> 
> 在 32 位处理器上，该值为 32，在 64 位处理器上为 64。

相关的VB6代码是：

```
Public Function GetCpuBitness() As String
    Dim ProcessorSet As Object
    Dim CPU As Object

    Set ProcessorSet = GetObject("Winmgmts:"). _
        ExecQuery("SELECT * FROM Win32_Processor")
    For Each CPU In ProcessorSet
        GetCpuBitness = CStr(CPU.DataWidth)
    Next
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:00:14.127

对于 CPU，您可以使用 WMI 并获取 AddressWidth。可以在[此处找到 VBScript 示例](http://www.activexperts.com/activmonitor/windowsmanagement/adminscripts/computermanagement/hardware/ "计算机硬件脚本")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:30:09.503

您可以尝试 WMI 类的`DataWidth`or`AddressWidth`属性[`Win32_Processor`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394373%28v=vs.85%29.aspx)，在 32 位处理器上，值为 32，在 64 位处理器上为 64。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T21:17:55.567

**操作系统架构**

获得它的一种方法是使用`GetNativeSystemInfo`WinAPI 函数。它包含在[链接的问题](https://stackoverflow.com/questions/15811006/checking-processor-is-32-bit-or-64-bit)中。

操作系统架构也可以通过 WMI 获得，以防您想以类似的方式实现这两个目标。在 Windows Vista 和更新的操作系统中，可以查询`Win32_OperatingSystem`类和分析`OSArchitecture`属性 ( [MSDN](http://msdn.microsoft.com/En-US/library/aa394239.aspx) )。遗憾的是，此属性在 Windows XP 和更早版本中不存在。在这些系统上，可以改为查询`Win32_ComputerSystem`类和分析属性 ( [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394102%28v=vs.85%29.aspx) )。`SystemType`

```
Public Function GetOsArchitecture()
    If IsAtLeastVista Then
        GetOsArchitecture = GetVistaOsArchitecture
    Else
        GetOsArchitecture = GetXpOsArchitecture
    End If
End Function

Private Function IsAtLeastVista() As Boolean
    IsAtLeastVista = GetOsVersion >= "6.0"
End Function

Private Function GetOsVersion() As String
    Dim OperatingSystemSet As Object
    Dim OS As Object

    Set OperatingSystemSet = GetObject("winmgmts:{impersonationLevel=impersonate}"). _
                                    InstancesOf("Win32_OperatingSystem")
    For Each OS In OperatingSystemSet
        GetOsVersion = Left$(Trim$(OS.Version), 3)
    Next
End Function

Private Function GetVistaOsArchitecture() As String
    Dim OperatingSystemSet As Object
    Dim OS As Object

    Set OperatingSystemSet = GetObject("Winmgmts:"). _
        ExecQuery("SELECT * FROM Win32_OperatingSystem")
    For Each OS In OperatingSystemSet
        GetVistaOsArchitecture = Left$(Trim$(OS.OSArchitecture), 2)
    Next
End Function

Private Function GetXpOsArchitecture() As String
    Dim ComputerSystemSet As Object
    Dim Computer As Object
    Dim SystemType As String

    Set ComputerSystemSet = GetObject("Winmgmts:"). _
        ExecQuery("SELECT * FROM Win32_ComputerSystem")
    For Each Computer In ComputerSystemSet
        SystemType = UCase$(Left$(Trim$(Computer.SystemType), 3))
    Next

    GetXpOsArchitecture = IIf(SystemType = "X86", "32", "64")
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-22T13:13:02.890

在 Windows Xp 32b 上，Win32_Processor.AddressWidth 返回 ALWAYS 32。请参阅帖子[MAP 工具如何发现它是 64 位机器？](http://social.technet.microsoft.com/Forums/fr-FR/105ced89-d858-4aa9-9491-ec2e0f7dfdb6/how-does-the-map-tool-find-out-its-a-64bit-machine)

# javascript - 更正 XHTML 1 Strict 的这个 javascript 语句

> ID：15765806
> 
> 赞同：1
> 
> 时间：2013-04-02T13:47:05.273
> 
> 标签：javascript, xhtml-1.0-strict

以下 JavaScript 是为 XHTML 1 Transitional 编写的，并且该站点已移至 Strict。我是一个完整的 JavaScript 新手，不知道如何纠正这个问题，JavaScript 人可以帮助我吗？

```
<script type="text/javascript" src="/javascript/jquery/jquery.js"></script>
<script type="text/javascript" src="/javascript/jquery/jquery.jcarousel.min.js"></script>
<script type="text/javascript"> 

jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel({
        wrap: 'circular'
    });
});
</script> 
```

# asp.net - 通过 Intranet 连接到邮件服务器

> ID：15765813
> 
> 赞同：0
> 
> 时间：2013-04-02T13:47:31.647
> 
> 标签：asp.net, asp.net-mvc-4, smtp, smtpclient

## 问题：

我正在尝试连接到远程邮件服务器以从 ASP.NET MVC 4 应用程序发送电子邮件。尽管使用我的客户给我的详细信息来设置 web.config，但我收到以下错误：

```
No connection could be made because the target machine actively refused it 127.0.0.1:25 
```

## 设置：

我有一个需要发送电子邮件的 ASP.NET MVC 4 网站。邮件服务器没有安装在与网络服务器相同的盒子上。

网络服务器上没有安装 smtp 客户端或服务器。需要这个吗？

客户几乎没有托管自己的网络服务器的经验。我一直使用托管公司的说明连接到邮件服务器。这家公司似乎没有任何人有专业知识。我是一名外部顾问，没有网络或邮件服务器方面的经验。

## 网络配置：

```
<system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="systems@medreport.co.uk">
        <network host="MYHOST1" userName="MyUser" password="PASSWORD" clientDomain="myhost1.mydomain.co.uk" />
      </smtp>
    </mailSettings>
</system.net> 
```

## 我的推理：

从错误中，似乎 ASP.NET MVC 应用程序正在 localhost 机器上寻找邮件服务器，即与 web 服务器相同的机器。它不存在，所以我得到了错误。

如果这是正确的，那么我的 web.config 中的标签属性一定有问题。这些属性没有指向有效的服务器，所以我假设系统默认为 localhost 上的邮件服务器。这个推理正确吗？

## 问题：

1.  可能没有为标签的属性`host`或标签的属性提供正确的名称。结果，mvc 应用程序尝试在 localhost 上查找邮件服务器。这个推理正确吗？`clientDomain``<network>`

2.  我已获得类型为 clientDomain="myhost1.mydomain.co.uk" 的客户端域名。但是，我尝试不是通过 Internet 连接，而是通过客户端的 Intranet 连接。我不应该有一个反映我通过 Intranet 连接的 clientDomain 属性吗？

3.  该网站使用 SSL。我尝试使用 enableSsl 属性无济于事。但是，我认为 enableSsl 属性与与邮件服务器的通信有关，而不是与网络服务器通信。这个对吗？由于邮件服务器在他们的内部网络上，我理解他们没有为邮件服务器使用 SSL。

4.  另一种理论是防火墙问题将我从邮件服务器中弹出。但如果是这样的话，我肯定会得到一个更具体的错误......？

## 编辑：

我是否需要在网络服务器上安装 SMTPclient 才能连接到不同盒子上的邮件服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:42:24.327

好的，我已经解决了这个问题：我的邮件发送例程中有以下代码：

```
SmtpClient client = new SmtpClient("localhost");
client.Send(message); 
```

注意硬编码的`"localhost"`.

唯一的问题是，现在它给了我以下错误：

```
Mailbox unavailable. The server response was: 5.7.1 Unable to relay for abc@xyz.efg 
```

但是，正如《丛林之书》所说，那是另一回事了。

# ruby-on-rails - 我已经安装了一个 gem - 但在 /lib 中找不到它

> ID：15765817
> 
> 赞同：1
> 
> 时间：2013-04-02T13:47:40.583
> 
> 标签：ruby-on-rails, ruby, rubygems, gem

我已经使用命令行安装了一个 ruby​​ gem。当我尝试`gem list --local`时，它清楚地表明 gem 清楚地安装在我的机器上。

但是我想根据文档进行更改。根据文档（使用`gem server`然后`http://localhost:8808/`），我应该在`/lib`.

但是我在我的机器上的任何地方都找不到它 - 我使用我的 mac 查找器查看，以便我可以使用 textmate 编辑它，但是 nada。

有任何想法吗？我应该在哪里寻找宝石以便我可以编辑/使用它？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:51:35.620

您需要使用`-d`标志来获取详细信息。

```
gem list --local -d 
```

对于`uglifier`，例如

```
uglifier (1.3.0)
Author: Ville Lautanala
Homepage: http://github.com/lautis/uglifier
Installed at: /Users/deefour/.rbenv/versions/1.9.3-p327/gemsets/myapp

Ruby wrapper for UglifyJS JavaScript compressor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:52:32.133

要查找宝石的位置：

`gem which <gemname>`

以`debugger`宝石为例

`gem which debugger`

`/opt/ruby/ruby-1.9.3-p392/lib/ruby/gems/1.9.1/gems/debugger-1.5.0/lib/debugger.rb`

# javascript - 与 HTMLElement 对象关联数据的最佳实践？

> ID：15765818
> 
> 赞同：7
> 
> 时间：2013-04-02T13:47:42.867
> 
> 标签：javascript, dom, custom-data-attribute

我遇到了 3 种使用 HTMLElement 对象存储任何数据的方法。

有人可以建议将任何数据与元素对象相关联的最佳实践吗？

我更喜欢数字 3，因为它不像 1 和 2 那样设置任何 HTML 属性。这就像设置和获取对象的任何属性一样。

1.  使用 setAttribute('nonStandardDataProperty')
2.  使用 HTMLElement 对象的 dataset 属性，例如 dataset.x 用于 data-xattribute
3.  HTMLElement 是对象，所以定义任何属性，它将作为该元素的数据存储

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:14:01.367

选项#2 在我看来是最“符合标准”的，如果那是你正在寻找的；另外，它允许您在 HTML 中设置这些属性，同时仍然保持有效的标记。这通常是我的偏好，但它确实是在你的情况下最适合你的方法：如果它有效，那就去吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:12:04.687

我会使用选项#1，因为它是最便携的。

但是，为了与 jQuery 的方法兼容，我会`data-`为这些自定义属性使用 HTML5 的前缀。`.data()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:59:03.150

第三种选择是将数据存储在 DOM 中，如果数据不是很大，这可能不是一个坏主意。如果是，那么存储和检索数据可能会影响应用程序的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:16:36.060

我想最好的方法是使用 HTML5 data-* 属性和 jQuery 的 .data() 函数。它可能是在内置 HTML 元素中存储数据并在未来更新到最新技术的最佳方式，因此您可以向后倾斜并提高工作效率

`<div id="myDiv" data-my-var="my-var-value"></div>`

可以像这样在 JavaScript 中使用：（需要 jQuery）

`console.log( $( '#myDiv' ).data( 'my-var' ) )`

编辑：并像这样设置

`$( '#myDiv' ).data( 'my-var', 'my-new-var-value' );`

在这种情况下，这也将更新 data-* 属性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T14:18:49.443

选项 4：在 DOMNode 上存储一个标识符，您可以使用它在分离的地图中查找内容（是的，这就是 jQuery 的做法——当然，除了在初始化期间导入所有 data-* 属性之外）。

如果您介意您的属性名称，则使用＃3 很好。#2 应该只允许 Integer 和 String 值，#1 可能有同样的问题。

我会选择#4，只是因为我不喜欢出现新规范并声称我用于我自己的数据的属性名称的可能性......</p>

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-02T14:07:50.903

Twitter Bootstrap 使用选项一。

看一下[Twitter Bootstrap](http://twitter.github.com/bootstrap/components.html)文档，您会看到在非标准属性 html 元素中存储数据的大量用途。

例子

```
<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dLabel">
  ...
</ul>

<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> 
```

# c# - 当下拉选择 mvc4 中的更改时调用 post 函数

> ID：15765823
> 
> 赞同：0
> 
> 时间：2013-04-02T13:47:54.613
> 
> 标签：c#, asp.net-mvc

我用一些值绑定了一个下拉列表，并在选择的下拉列表更改时调用我的发布操作。看起来像

```
@Html.DropDownListFor(m => m.DistrictId, Model.DistrictList, "Select", new
       {
           disableValidation = "true",
           onchange = @"
            var form = document.forms[0]; 
            form.action='Index';
            form.submit();"
       }) 
```

这可以很好地调用我的控制器发布操作。但我无法在我的模型 DistrictId 属性中获得下拉选择的值。

对于我的控制器功能如下所示

```
[HttpPost]
        public ActionResult Index(HomeModel homeModel)
        {
            AdminController adminController = new AdminController();
            Guid userId = new Guid();
            homeModel.ComplianceModelList = complianceRepository.LoadComplianceModel(userId, homeModel.DistrictId);
            LoadDistrict(homeModel);
            return View(homeModel);
        } 
```

我想在我的 homeModel.DistrictId 属性中选择 DistrictId 的下拉列表。

怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:59:36.797

像这样更改您的标记

```
@Html.DropDownListFor(m => m.DistrictId, Model.DistrictList, "Select") 
```

并有一些 javascript 来处理您的更改事件，以便它将序列化您的表单并使用 ajax 将其发送到您的操作方法。

```
$(function(){
  $("#DistrictId").change(function(e){
    var _this=$(this);

    $.post("@Url.Action("Index","Home")",_this.closest("form").serialize(),
                                                             function(response){
          // do something with response.
    });
  });
}); 
```

假设您已将 jQuery 库加载到您的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:12:50.363

现在我得到了解决方案

下面的代码运行良好。

```
 @using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <h2 class="gridTitle">
            Compliance</h2>
        if (User.Identity.IsAuthenticated && User.IsInRole("SuperAdmin"))
        {
        <div class="complianceSubDiv">
            <div class="complianceRightDiv">
                @Html.LabelFor(model => Model.DistrictId)
                @Html.DropDownListFor(m => m.DistrictId, Model.DistrictList, "Select", new
           {
               disableValidation = "true",
               onchange = @"                        
                form.submit();"
           })</div>
        </div>
        }
} 
```

# codeigniter - 使用 Codeigniter 和 Sendgrid 发送电子邮件的优雅/高效方法

> ID：15765824
> 
> 赞同：1
> 
> 时间：2013-04-02T13:47:55.617
> 
> 标签：codeigniter, sendgrid

我正在通过与 Sendgrid 集成在我们的 Codeigniter 应用程序中设置一些交易电子邮件的乐趣。

我已经做好了准备，准备继续创建所有特定的交易/电子邮件，但我想知道最有效和/或最优雅的方式。

在每个函数中包含适当的电子邮件代码似乎有点令人费解。要从干净且分离的`email`控制器中调用特定函数，我需要使用 AJAX（以免导致重定向）。

有没有我目前没有考虑的有助于平衡事物的方法，即清洁和分离以及连贯和轻松？

感谢您的任何想法-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:23:56.123

不确定您的应用程序结构的细节。但是您始终可以创建一个模型函数并从控制器中的函数中调用它。

CodeIgniter 还带有一些内置功能来帮助您发送电子邮件，特别是在配置文件中设置一些电子邮件设置，这样您就不必重写它。[http://ellislab.com/codeigniter/user-guide/libraries/email.html](http://ellislab.com/codeigniter/user-guide/libraries/email.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:19:52.000

实际上，不久前我写了一篇关于这个的博客文章。看看这个：

> [http://blog.sendgrid.com/using-sendgrid-with-php-codeigniter/](http://blog.sendgrid.com/using-sendgrid-with-php-codeigniter/)

从本质上讲，codeigniter 带有一个很棒的电子邮件库，可以很容易地通过 SMTP 发送东西，所以我只是向您展示如何使用它。

# c# - 在c#中的异步套接字通信中接收可变大小的数据

> ID：15765830
> 
> 赞同：0
> 
> 时间：2013-04-02T13:48:01.937
> 
> 标签：c#, visual-studio-2010, sockets, asynchronous, udp

我正在用 c# 制作一个应用程序。在那个应用程序中我使用异步套接字通信。我编写的代码为

```
byte[] byteData = new byte[1024];
clientSocket.BeginReceiveFrom(byteData, 0, byteData.Length, SocketFlags.None, ref m_EpReceive, new AsyncCallback(OnRceiveCallBack), objReceiverSocketState); 
```

在这里，我得到`byteData`的可变大小意味着有时是 700 字节，有时是 276 字节（不固定）。在这里，我宣布`byteData` 了 1024 大小。所以我的问题是，有什么方法可以声明`byteData` 接收到的确切数据量的大小？（意味着假设我得到 500 个字节，所以大小`byteData` 应该是 500。）我也有疑问，如果我已经声明大小`byteData`为 1024，那么它是否会等待获得总共 1024 个字节，或者如果它有一些字节，那么它会调用方法`OnRceiveCallBack`？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:53:56.730

`EndReceiveFrom`将告诉您已收到多少字节。

```
public int EndReceiveFrom(
      IAsyncResult asyncResult,
      ref EndPoint endPoint
  ) 
```

正如 MSDN 所说：

> 返回值
> 类型：System.Int32
> 如果成功，则接收到的字节数。如果不成功，则返回 0。

# crystal-reports - 将数据文件中的数据导出为ex cel格式

> ID：15765833
> 
> 赞同：0
> 
> 时间：2013-04-02T13:48:06.833
> 
> 标签：crystal-reports, ms-access-2010, sage-line-50

***背景：***

我们公司使用 Sage Line 50 作为我们的会计软件。我们通过该程序生成所有销售订单。我们还使用 MS Access 2010 来存储订单信息并生成我们的内部商店文件和装箱单。

***问题：***

数据输入冗余。我们将客户采购订单中的信息输入到我们的 Sage 软件中，然后将相同的信息输入到 Access 数据库中。

***我在找什么：***

一种解决方案，可让我在 Sage 中创建后将原始销售订单数据导出到 MS-Access

***我试过的：***

Sage 的导出过程只允许 CSV 导出，并且是一个根本无法自动化的手动过程。我能够生成此导出，然后运行一个附加查询，该查询将把该数据导入 Access 数据，但我希望自动化这个过程，也许是每天一次。我已经研究过使用 Crystal Reports（与 Sage 一起打包，我被告知可以运行自动报告并以 MS Excel 格式保存），但我不知道如何浏览数据文件以查找我正在寻找的特定销售数据.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:21:51.170

这些人是正确的 - 最简单的方法是使用 ODBC 驱动程序，但是，您必须运行正确的 SQL 查询并确保使用正确的字段将采购订单表连接到订单项目表，否则它不会返回正确的数据。

您将遇到的一个问题是您只想提取最近的交易，因此使用这样的查询来执行您的查询看起来像这样：-

SELECT *, PURCHASE_LEDGER.ACCOUNT_REF, PURCHASE_LEDGER.E_MAIL FROM PURCHASE_ORDER, PURCHASE_LEDGER INNER JOIN POP_ITEM ON PURCHASE_ORDER.ORDER_NUMBER = POP_ITEM.ORDER_NUMBER 其中 PURCHASE_LEDGER.ACCOUNT_REF = PURCHASE_ORDER.ACCOUNT_REF AND RECORD_MODIFY03-04_DATE >= '2003-04'-DATE

或者，有许多针对此问题的一键式商业解决方案 - 在 Google 上搜索“Sage Integration”，您会找到各种生产产品的供应商，这些产品将为您做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T16:05:09.820

您尝试做的事情可以自动化，就像我为我工作的最后一家公司所做的那样（将销售订单和发票导出到 CSV 和 Excel）。然而，令人沮丧的是它需要 Sage SDK，价格为 1500 英镑。

# mysql - SQL 子查询/左连接问题

> ID：15765835
> 
> 赞同：1
> 
> 时间：2013-04-02T13:48:10.120
> 
> 标签：mysql, sql

我正在开展一个学生参加考试的项目 - 其中一些限定条件是他们只能参加他们注册的考试（按班级），并且他们只能参加一次考试。我已经弄清楚了大部分......但我正在研究一个用于下拉菜单的 SELECT 语句。我有一个问题。

相关结构，只有列名：

## 用户表

*   用户身份

## 测验表

*   测验ID

## 完成表

*   用户身份
*   测验ID

所以基本上，在测验完成后 - 所有结果都会转到另一个名为 Results 的表中，但在 Complete 表中也会创建一个条目，记录用户 ID 和测验 ID。然后我制作以下 SQL 语句来填充下拉列表。

```
SELECT Quiz.QuizID, Quiz.QuizName
FROM Quiz
LEFT JOIN Complete ON Complete.QuizID = Quiz.QuizID
WHERE Complete.QuizID IS NULL
AND Quiz.Class = 'History' 
```

哪个有效 - 从技术上讲。但是你会看到这里的问题是什么……如果历史课上有人参加考试……那么历史课上没有其他人可以参加考试。所以我必须通过用户 ID 将其分开。我试过类似的东西：

```
SELECT Quiz.QuizID, Quiz.QuizName
FROM Quiz
LEFT JOIN Complete ON Complete.QuizID = Quiz.QuizID
WHERE Complete.QuizID IS NULL
AND Quiz.Class = 'History'
AND Complete.UserID = (SELECT UserID
FROM User
WHERE UserID = '2') 
```

其中“2”是 Session UserID 的占位符 - 但也是一个测试人员，因为我有两个历史测试，并且我有一个条目说这个学生已经参加了其中一个。但我无法让它正常工作。

对我在这里做错了什么有任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:52:05.443

将条件移至`UserID`子句`on`：

```
SELECT Quiz.QuizID, Quiz.QuizName
FROM   Quiz
LEFT JOIN 
       Complete 
ON     Complete.QuizID = Quiz.QuizID
       AND Complete.UserID = '2'
WHERE  Complete.QuizID IS NULL
       and Quiz.Class = 'History' 
```

现在，它将只查找`Complete`user 的记录`2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:52:29.060

这是你要找的吗？它将您的 userId 检查移动到您的`JOIN`标准：

```
SELECT Quiz.QuizID, Quiz.QuizName
FROM Quiz
   LEFT JOIN Complete ON Complete.QuizID = Quiz.QuizID
      AND Complete.UserID = 2
WHERE Complete.QuizID IS NULL
   AND Quiz.Class = 'History' 
```

通过检查您的`WHERE`标准中的 userId，它会否定`LEFT JOIN`. `NULL`如果 Complete.UserId = 2，Complete.QuizId 永远不会存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:40:26.293

建议的其他解决方案应该可以工作，但是如果您想保持 where 条件由 join 子句分隔，我认为一个简单的 OR 应该可以解决问题：

```
 SELECT Quiz.QuizID, 
          Quiz.QuizName
     FROM Quiz
LEFT JOIN Complete 
       ON Complete.QuizID = Quiz.QuizID
    WHERE (Complete.QuizID IS NULL -- let's show the quiz never completed
          OR
           Complete.UserID <> 2    -- or completed by someone who isn't 2 :)
          )
      AND Quiz.Class = 'History' 
```

# sql - 访问 - 匹配列范围/复杂连接

> ID：15765838
> 
> 赞同：1
> 
> 时间：2013-04-02T13:48:24.517
> 
> 标签：sql, ms-access, vba

我们如何根据接近值的条件匹配列。这需要复杂查询/范围比较/多连接条件。获取查询大小超过 2GB 错误。

表：

```
InvDetails1 / InvDetails2 / INVDL / ExpectedResult 
```

领域关系：

```
InvDetails1.F1 = InDetails2.F3

InvDetails2.F5 = INVDL.F1

INVDL.DLID = ExpectedResult.DLID

ExpectedResult.Total - 1 <  InvDetails1.F6 < ExpectedResult.Total + 1

left(InvDetails1.F21,10) = '2013-03-07' 
```

返回来自 ExpectedResult 的记录数仅为 1 的结果。

```
Group by InvDetails1.F1 , count(ExpectedResult.DLID) works. 
```

从这个结果。

最后结果 ：

```
InvDetails1.F1 , InvDetails1.F16 , ExpectedResult.DLID , ExpectedResult.NMR

ExpectedResult - has millions of rows.
InvDetails - few hundred thousands 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:27:47.950

如果我处于这种情况并且发现我的查询在 2GB 时“撞墙”，那么我会尝试创建一个单独保存的 Select Query 来隔离*特定日期*`InvDetails1`的记录。然后，在加入其他表时，我会使用该查询而不是整个表。*`InvDetails1`*

 *我的理由是查询优化器可能无法在执行计划的早期使用您的`left(InvDetails1.F21,10) = '2013-03-07'`条件来排除`InvDetails1`记录，这可能导致查询增长得比它真正需要的大得多（在内部，当它正在处理时）。通过将日期选择放在单独的（先决条件）查询中，将日期选择强制到流程的开头可以将“主要”查询的大小保持在更可行的大小。

此外，如果我发现自己的查询变得如此之大，我也会密切关注我的 .accdb（或 .mdb）文件的大小，以确保*它*不会太接近 2GB。我自己从来没有遇到过这种情况，但我听说达到 2GB 障碍的数据库文件可能会导致一些严重的错误，而且恢复起来相当“具有挑战性”。*

# paypal - PayPal 往返沙盒测试

> ID：15765840
> 
> 赞同：0
> 
> 时间：2013-04-02T13:48:29.490
> 
> 标签：paypal, paypal-sandbox

我正在为 PayPal 沙箱寻找一种方法来进行往返测试：

1.  创建付款并将用户重定向到 PayPal，以便他可以登录并批准
2.  用户按照重定向并登录并批准付款
3.  在店方验证付款

步骤 1\. 和 3\. 不是问题。但是我怎样才能在沙盒中自动批准付款。恕我直言，这是每个开发人员都需要进行自动回归测试的场景，但我找不到任何解决方案。

我使用 Java JUnit 进行回归测试。

我已经尝试过使用 WebClient，但 PayPal 对 cookie 和 JavaScript 不屑一顾。所以我没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:37:52.397

使用以下代码，我可以登录到 PayPal 开发者页面。也许对其他人来说这很有用。

`package paypaltest;`

 `import java.io.IOException;

public class htmlUnitTest extends TestCase {

```
@Test
public void test() {
    final WebClient wc = new WebClient(BrowserVersion.FIREFOX_10);
    wc.getCookieManager().setCookiesEnabled(true);
    wc.setJavaScriptEnabled(false);
    wc.setWebConnection(new TestHttpWebConnection(wc));
    try {
        final HtmlPage page = wc.getPage("https://developer.paypal.com/");
        System.out.println(page.asXml());
        final List<HtmlAnchor> anchors = page.getAnchors();
        HtmlAnchor loginAnchor = null;
        for (final HtmlAnchor htmlAnchor : anchors) {
            if (htmlAnchor.getHrefAttribute().startsWith("https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/authorize?client_id")) {
                loginAnchor = htmlAnchor;
                break;
            }
        }
        if (loginAnchor != null) {
            System.out.println("### login anchor");
            System.out.println(loginAnchor.asXml());
            System.out.println("### login to: " + loginAnchor.getHrefAttribute());
            final HtmlPage loginPage = wc.getPage(loginAnchor.getHrefAttribute());
            System.out.println("### login page");
            System.out.println(loginPage.asXml());
            final HtmlForm loginForm = loginPage.getForms().get(0);
            final HtmlInput email = loginForm.getInputByName("email");
            final HtmlInput password = loginForm.getInputByName("password");
            final HtmlInput login = loginForm.getInputByValue("Log In");
            email.setValueAttribute("my@email.com");
            password.setValueAttribute("password");
            final HtmlPage loggedInPage = login.click();
            System.out.println("### logged in page");
            System.out.println(loggedInPage.asXml());

        }
        final HtmlPage pageLoggedIn = wc.getPage("https://developer.paypal.com/");
        System.out.println("### page logged in ");
        System.out.println(pageLoggedIn.asXml());

    } catch (final FailingHttpStatusCodeException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (final MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (final IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public static final class EasySSLSocketFactory implements SchemeLayeredSocketFactory {

    // ** Log object for this class. *//*
    private static final Log LOG = LogFactory.getLog(EasySSLSocketFactory.class);

    private SSLContext sslcontext = null;

    public Socket createSocket(final HttpParams params) throws IOException {
        final SSLSocket sock = (SSLSocket) getSSLContext().getSocketFactory().createSocket();
        return sock;
    }

    public Socket createLayeredSocket(final Socket socket, final String target, final int port, final HttpParams params) throws IOException,
        UnknownHostException {
        final SSLSocket sslSocket = (SSLSocket) getSSLContext().getSocketFactory().createSocket(socket, target, port, true);
        // verifyHostName() didn't blowup - good!
        return sslSocket;
    }

    public Socket connectSocket(final Socket socket, final InetSocketAddress remoteAddress, final InetSocketAddress localAddress, final HttpParams params)
        throws IOException, UnknownHostException, ConnectTimeoutException {

        if (remoteAddress == null)
            throw new IllegalArgumentException("Remote address may not be null");
        if (params == null)
            throw new IllegalArgumentException("HTTP parameters may not be null");
        final Socket sock = socket != null ? socket : getSSLContext().getSocketFactory().createSocket();
        if (localAddress != null) {
            sock.setReuseAddress(HttpConnectionParams.getSoReuseaddr(params));
            sock.bind(localAddress);
        }

        final int connTimeout = HttpConnectionParams.getConnectionTimeout(params);
        final int soTimeout = HttpConnectionParams.getSoTimeout(params);

        try {
            sock.setSoTimeout(soTimeout);
            sock.connect(remoteAddress, connTimeout);
        } catch (final SocketTimeoutException ex) {
            throw new ConnectTimeoutException("Connect to " + remoteAddress + " timed out");
        }

        String hostname;
        if (remoteAddress instanceof HttpInetSocketAddress) {
            hostname = ((HttpInetSocketAddress) remoteAddress).getHttpHost().getHostName();
        } else {
            hostname = remoteAddress.getHostName();
        }

        SSLSocket sslsock;
        // Setup SSL layering if necessary
        if (sock instanceof SSLSocket) {
            sslsock = (SSLSocket) sock;
        } else {
            final int port = remoteAddress.getPort();
            sslsock = (SSLSocket) getSSLContext().getSocketFactory().createSocket(sock, hostname, port, true);
        }
        return sslsock;
    }

    public boolean isSecure(final Socket sock) throws IllegalArgumentException {
        if (sock == null)
            throw new IllegalArgumentException("Socket may not be null");
        // This instanceof check is in line with createSocket() above.
        if (!(sock instanceof SSLSocket))
            throw new IllegalArgumentException("Socket not created by this factory");
        // This check is performed last since it calls the argument object.
        if (sock.isClosed())
            throw new IllegalArgumentException("Socket is closed");
        return true;
    }

    private static SSLContext createEasySSLContext() {
        try {
            final SSLContext context = SSLContext.getInstance("SSL");
            context.init(null, new TrustManager[] { new EasyX509TrustManager(null) }, null);
            return context;
        } catch (final Exception e) {
            LOG.error(e.getMessage(), e);
            throw new HttpClientError(e.toString());
        }
    }

    private SSLContext getSSLContext() {
        if (this.sslcontext == null) {
            this.sslcontext = createEasySSLContext();
        }
        return this.sslcontext;
    }

}

public static final class TestHttpWebConnection extends HttpWebConnection {

    public TestHttpWebConnection(final WebClient webClient) {
        super(webClient);

        final SchemeRegistry schemeRegistry = getHttpClient().getConnectionManager().getSchemeRegistry();
        final SchemeSocketFactory socketFactory = new EasySSLSocketFactory();
        schemeRegistry.register(new Scheme("https", 443, socketFactory));
    }
} 
```` 

`}`

# c - 是否可以将共享 L2 缓存的一部分分配给不同的内核

> ID：15765845
> 
> 赞同：6
> 
> 时间：2013-04-02T13:48:42.630
> 
> 标签：c, linux, x86, multicore

假设，4 个线程在多核 x86 处理器的 4 个独立内核上运行，并且它们不共享任何数据，是否可以通过编程方式使 4 个内核使用共享 L2 缓存的单独和预定义部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:54:33.593

让我们使用两个术语，独占和共享缓存，而不是 L1、L2、L3、L4 缓存。不同的 CPU 系列开始共享不同级别的缓存。在提出的术语中，最初的问题是 - 是否可以将共享缓存分成多个部分，每个部分都将由一个 CPU/核心独占使用？没有明确的答案。此外，还有两个相反的答案。

1）第一个也是一般性的答案：不。缓存在设计上是在硬件中管理的。软件中只有很少的可访问缓存的控制杠杆，例如启用/禁用整个内存或定义的内存区域的缓存，应用指定的缓存刷新策略（直写/回写）。NO 基本上是因为它被设计为在硬件中进行管理。所以没有有用的界面可以允许在软件中优雅地管理它。

2）第二个答案：是的。实际上，高速缓存的设计方式是，高速缓存的每一行都可以保存指定内存行集中的数据。因此，如果内存管理器提供保证，即同一 CPU 一个 CPU/核心拥有并独占使用分配给同一高速缓存行的所有内存行，则内存管理器提供该高速缓存行将由该 CPU 独占使用的保证。这是一个非常棘手的解决方法。而且它的好处非常有限，并且有严重的缺点：内存布局非常碎片化，缓存使用不平衡，内存管理复杂，非常依赖硬件（详见“MetallicPriest”提供的论文）。

简历：理论上是可能的，在实践中几乎是不可能的。

# php - 带有 CURL 致命错误的 Windows 7 64 位：调用未定义的函数 curl_init()

> ID：15765848
> 
> 赞同：0
> 
> 时间：2013-04-02T13:48:55.780
> 
> 标签：php, windows, curl

我需要在 WAMP 中做 CURL

运行 cmd.exe，我可以使用 curl

```
 curl -L http://www.google.com 
```

但是当在本地使用我的网站时（使用 WAMP，PHP 版本 5.3.13），即使启用了`curl`.

我收到一个错误：

```
Fatal error: Call to undefined function curl_init() 
```

我的电脑是 Windows 7 64 位..关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:01:39.727

到[www.anindya.com](http://www.anindya.com)下载 *php_curl-5.4.3-VC9-x64.zip* 在“Fixed curl extensions:”下并替换 ext 文件夹中的 php_curl.dll。

通过。[http://forum.wampserver.com/read.php?2,85642](http://forum.wampserver.com/read.php?2,85642)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:18:28.377

我解决了在 WIN 7 64BIT 上安装 WAMP 32 位版本的问题，以这种方式 CURL 工作。

# asp.net-mvc - 使用来自不同控制器的 [HttpPost] 在回发所有控制器的操作时查看表单调用

> ID：15765857
> 
> 赞同：1
> 
> 时间：2013-04-02T13:49:30.227
> 
> 标签：asp.net-mvc, razor, partial-views, ajax.beginform

我知道也许标题听起来有点奇怪，但我相信我的问题确实很奇怪。我有一个带有 Razor 视图引擎的 ASP.NET MVC 4 应用程序（这是我的第一个 MVC 实际应用程序）。

我有一个布局视图，我在其中渲染两个部分视图，如下所示：

```
 <!-- Login -->
@Html.Action("RenderLoginPopup", "Login")

<!-- Registration -->
@Html.Action("RenderRegisterPopup", "Login") 
```

Login 控制器中的每个操作都只呈现一个局部视图：

```
 [ChildActionOnly]
    public ActionResult RenderLoginPopup()
    {
        return PartialView("Partial/_LoginPopupPartial");
    } 
```

只是为了举例说明（两者的构建方式相同），登录部分视图包含这样的 ajax 表单：

```
@using (Ajax.BeginForm("Login", "Login", new AjaxOptions()
    {
        HttpMethod = "POST",
        OnSuccess = "loginResponseReceived"
    }, new { @id = "loginForm" })) 
```

来自 Login 控制器（表单的目标）的 Login 操作使用以下属性进行签名（值得一提并注意 HttpPost 之一）：

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public JsonResult Login(LoginModel model)
    { } 
```

到目前为止，一切都很好......一切都很完美 - 登录和注册操作都没有任何问题。

当我在与主布局一起加载的视图中有 @Html.BeginForm() 时，我想谈论的问题。例如，如果我有这样一个纯粹而简单的形式：

```
 @using (Html.BeginForm())
    {
       <input type="hidden" name="name"/>
       <input type="submit" value="Send"/>
    } 
```

连同控制器 CaptionExtendedController：

```
 [HttpPost]
    public ActionResult Index(string nume)
    {
        return View();
    } 
```

所以，最后，在我最终生成的 html 文件中，我将有 3 个表单 - 2 个用于登录和注册 (ajax)，还有一个从最后一个视图生成的简单表单。请记住，所有三种形式都是独立的（意味着它们不是另一种形式）。

问题是每次我从最后一个表单中按下“发送”按钮时，所有使用我视图中的 [HttpPost] 属性签名的控制器（登录、来自 LoginController 的注册和来自 CaptionExtendedController 的索引）都会被调用。

为什么？？？为了进行临时修复，我从 Login 和 Register 操作中删除了 [HttpPost] 属性，现在它可以工作了，但我认为这不正确。

拜托，有人可以向我解释为什么会发生这种情况，并最终指出我解决此问题的正确方向吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:31:02.857

尝试使用您的 Html.BeginForm 指定控制器和操作，我们可以从那里开始。此外，您可以使用**@Html.RenderPartial**来渲染您的部分，这将摆脱一些您不需要的操作/控制器，使其更易于管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:43:03.857

这并不能解决根本问题，但可能是一种解决方法，无论如何这就是您所需要的。:)

您可以编写一些 jQuery 来捕获按钮单击，然后直接按名称提交表单。例如，如果您在下面添加 id：

```
@using (Html.BeginForm())
{
   <input type="hidden" name="name"/>
   <input type="submit" id="regularSubmitButton" value="Send"/>
} 
```

然后你可以写：

```
$(document).ready(function() {
   $("#regularSubmitButton").click(function(e) {
       e.preventDefault();

       $(this).parent("form").submit();

       return false;
   });
}); 
```

我不确定它是否会在没有看到所有内容的情况下起作用，但似乎值得一试。

干杯，迈克尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:07:30.527

这不再有意义了......从评论和答案开始，我已经将 3 个函数映射到那些棘手的表单上的提交：登录、注册和索引（我还把 HttpPost 属性放回了登录和注册操作）。在那些 jquery 函数中，我刚刚用一个字符串（表单的名称）发出警报；为了能够编写一个基于 jquery id 的选择器，我还声明了最后一个带有 id 的表单（它没有它；只有 login 和 register 有一个），就像这样（取自另一个表单的示例有同样的问题）：

```
@using (Html.BeginForm("Index", "PersonalizeCard", new {data = Model.EncryptedDataQueryStringValue}, FormMethod.Post, new {@id = "personalizeCardForm"})) { } 
```

（添加了什么 - 最后两个参数 - 表单方法和 html id）。

在此之后，我已经运行了应用程序并且不再有任何异常......我已经在登录和注册操作上设置了断点 - 没有......我什至从 BeginForm 中删除了这两个额外的参数 - 仍然没有......

为什么？？？？再说一遍，为什么？？？我的意思是，我并不难过它已修复，但我不明白为什么它会自行修复...

感谢您所有的时间和评论/答案。

# javascript - jQuery Mobile 导航 - 为什么状态为空？

> ID：15765858
> 
> 赞同：5
> 
> 时间：2013-04-02T13:49:31.817
> 
> 标签：javascript, jquery, ajax, jquery-mobile, browser-history

我正在使用`$.mobile.navigate("#test-page", {id:123})`导航到辅助页面。

从一页到另一页的导航工作正常....但是状态是空的！

文档清楚地表明状态应该包含执行导航时我需要的所有信息。

这是我正在使用的代码：

```
$(window).on('navigate', function(event, data) {
  console.log("navigated", data);
  console.log(data.state.info);
  console.log(data.state.direction);
  console.log(data.state.url);
  console.log(data.state.hash);
  if (data.state.hash === "test-page") {
    console.log("Test page", data.state.id);
  }
}); 
```

不幸的是，数据作为空传递：

```
{
    state:{}
} 
```

HTML如下：

```
<div id="test-home" data-role="page">

      <div data-role="header">
          <h1>Test Home</h1>
      </div>
      <div data-role="content">
          <div id="test-btn">
            Click DIV for TEST page
          </div>
      </div>
      <div data-role="footer">
      </div>

  </div>

  <div id="test-page" data-role="page">
     <div data-role="header">
          <h1>Test Page</h1>
     </div>

     <div data-role="content">
        Test page

     </div>
  </div> 
```

* * *

希望有人能提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:27:56.913

`$.mobile.navigate`和`navigate` *event*，用于跟踪 URL 历史记录并从 URL 传递/获取数据。它们与浏览器的导航（后退/前进）一起工作。

要使用内部导航在 webapp 内的页面之间动态传递数据，请使用`$.mobile.changePage`.

资源：

*   [$.mobile.navigate()](http://api.jquerymobile.com/jQuery.mobile.navigate/)
*   [导航](http://api.jquerymobile.com/navigate/)
*   [$.mobile.changePage()](http://api.jquerymobile.com/jQuery.mobile.changePage/)

使用下面的代码将*数据*从页面传递到另一个页面。

```
$.mobile.changePage('store.html', {
 dataUrl: "store.html?id=123",
 data: {
    'id': '123'
 },
 reloadPage: true // force page to reload
}); 
```

检索*数据*

```
$('.selector').on('pagebeforeshow', function () {
 var values = $(this).data("url").split("?")[1];
 id = values.replace("id=", "");
 console.log(id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-07T22:31:12.840

我知道这是一个老问题，但@Omar 的答案可以改进。

事实上，可以使用`pagecontainerbeforehide`, `pagecontainerbeforeshow`, `pagecontainerhide`, `pagecontainershow`, `pagecontainertransition`and `pagecontainerchange`（它们按此顺序触发）并且在处理程序中您可以读取属性`history.state`，此时会使用新状态进行更新。

因此，例如，您可以编写（初始化需要已格式化页面的内容，例如 Google 地图）：

```
$(document).on("pagecontainershow", function(e, data) {
    console.log("pagecontainershow: " + JSON.stringify(history.state));     
}); 
```

这适用于所有情况：如果您单击链接（带有哈希，例如`#user`），如果您使用后退和前进按钮导航，如果您使用`$.mobile.navigate`and 也 for `window.history.back()`。

而且，您可以传递复杂的数据，而不仅限于查询字符串约束。

资源：

*   [页面容器](https://api.jquerymobile.com/pagecontainer/)
*   [历史](https://developer.mozilla.org/en-US/docs/Web/API/History_API#Reading_the_current_state)

# java - ActivityCompat2 不显示动画 - Android

> ID：15765859
> 
> 赞同：0
> 
> 时间：2013-04-02T13:49:34.407
> 
> 标签：java, android

我正在测试 ActivityCompat2 库，看看是否可以让 ActivityOptions 动画在 api 16 之前工作。我可以让新活动从 ActivityCompat2 开始，但没有显示动画。有任何想法吗？我在 MainActivity 中的代码看起来像

```
listview1.setOnItemClickListener(new OnItemClickListener() {
    @SuppressLint("NewApi")
    @Override
    public void onItemClick(AdapterView<?> parent,View view,int position,long id){
        Intent intent = new Intent(getBaseContext(), DetailActivity.class);
        ActivityOptionsCompat2 opts = ActivityOptionsCompat2.makeScaleUpAnimation(
                                    view,0, 0,view.getWidth(), view.getHeight());
        ActivityCompat2.startActivity(MainActivity.this, intent, opts.toBundle()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:05:00.427

检查动画是否在设备上启用。设置 -> 显示 -> 动画 -> 所有动画

# visual-studio-2012 - 如何在 Visual Studio 2012 中格式化代码以进行框选择

> ID：15765862
> 
> 赞同：0
> 
> 时间：2013-04-02T13:49:45.827
> 
> 标签：visual-studio-2012, keyboard-shortcuts, code-formatting

我想知道在 Visual Studio（最好是 2012 年）中是否有一种方法来格式化代码，以便将[框选择和多行编辑](http://weblogs.asp.net/scottgu/archive/2010/04/26/box-selection-and-multi-line-editing-with-vs-2010.aspx)应用到您的代码变得非常容易。

例如：

转换这块代码的快捷键：

```
public class Example
{
    public bool IsDefault { get; set; }
    public string Description { get; set; }
    public string Link { get; set; }
    public short Order { get; set; }
    public byte Status { get; set; }
} 
```

变成这样：

```
public class Example {
    public bool     IsDefault       { get; set; }
    public string   Description     { get; set; }
    public string   Link            { get; set; }
    public short    Order           { get; set; }
    public byte     Status          { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:34:35.860

可能您可以使用Visual Studio 2012 的[代码对齐扩展](http://visualstudiogallery.msdn.microsoft.com/7179e851-a263-44b7-a177-1d31e33c84fd)。

我没有尝试过，但它似乎做你想做的事：[按空间特征对齐](https://github.com/cpmcgrath/codealignment/wiki/Align-by-space)

# javascript - 如何在Highcharts中的轴两侧复制Y轴的值

> ID：15765864
> 
> 赞同：15
> 
> 时间：2013-04-02T13:49:50.027
> 
> 标签：javascript, jquery, highcharts

我只需要在轴的两侧复制 Y 轴的值。请注意，我的图表没有多个轴。

看例子：`[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/bar-basic/]`

我知道这很简单，但我找不到解决方案。

请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T14:44:15.220

您仍然需要指定多个轴，然后您可以使用 'linkedTo' 和 'opposite' 属性：

```
 yAxis: [{
                min: 0,
                title: {
                    text: 'Population (millions)',
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },{
                linkedTo:0,
                opposite:true
            }], 
```

.

**根据以下评论进行编辑以进行澄清：**

在撰写本文时，Highstock 将该`opposite`属性设置为`true`默认`yAxis`值。

但是，Highstock 不是“Highcharts 版本”。Highstock 是它自己的产品，源自 Highcharts 并与之相关。

目前所有版本的 Highcharts 默认设置`opposite`为`false`两个轴 -`yAxis`将在左侧，并将`xAxis`在底部。

# css - 如何在css中使用混合变量和字符串

> ID：15765865
> 
> 赞同：0
> 
> 时间：2013-04-02T13:49:52.260
> 
> 标签：css, variables

我怎样才能将 css-variable 与 String-text 像这样的示例混合：

```
@define {   site_path: http://www.xy.de/;}

body{
background:url(@site_path xy.gif);
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:54:26.400

CSS 本身不支持变量。有 CSS“编译器”可以做到这一点，生成静态 CSS 文件。

看：

[http://lesscss.org/](http://lesscss.org/)

snd

[http://sass-lang.com/](http://sass-lang.com/)

# actionscript-3 - 未检测到 Mac 上的 Adob e AIR 命令键

> ID：15765866
> 
> 赞同：2
> 
> 时间：2013-04-02T13:49:53.090
> 
> 标签：actionscript-3, air, keyboard, adobe

我目前正在开发和 AIR 应用程序来检测组合键的命令键，目前我有这样的东西

```
this.addEventListener(KeyboardEvent.KEY_UP, onKeyUp);

protected function onKeyUp(event:KeyboardEvent):void
{
  if(event.ctrlKey){
    switch(event.keyCode){
      case Keyboard.C:
      trace("need to copy");
      break;
    }
  }
} 
```

根据文档 event.ctrlKey，应该检测 mac 上的命令和控制键，如果我按下组合控制 + C 作品，但如果我不使用命令 + c 什么，我也尝试过

```
event.commandKey 
```

我以为内置菜单可能给我带来了一些麻烦，然后我将其删除，但仍然没有，我错过了什么？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:27:49.177

我也遇到了同样的问题，并通过为剪贴板键添加本机菜单事件来解决此问题。正如您所说，“event.ctrlKey”不适用于 MAC，而“命令键”与 C(copy)、V(paste)、X(cut)、W(close)、M(minimize) 结合使用将始终收听AIR 应用程序的本机菜单事件（buildIn 菜单事件）。所以我添加了菜单选择事件。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       creationComplete="windowedapplication1_creationCompleteHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
            {
                this.addEventListener(KeyboardEvent.KEY_DOWN, onKey_PressHandler);
            }

            protected function onKey_PressHandler(event:KeyboardEvent):void
            {
                // for mac only statements
                if(isMAC())
                {
                    if(NativeApplication.supportsMenu){
                        if(event.keyCode == Keyboard.COMMAND)
                        {
                            if(event.type == KeyboardEvent.KEY_DOWN)
                            {
                                NativeApplication.nativeApplication.menu.addEventListener(Event.SELECT,onApplicationMenu_ClickHandler);
                            }
                            else
                            {
                                // remove event if it is no longer needed 
                                NativeApplication.nativeApplication.menu.removeEventListener(Event.SELECT,onApplicationMenu_ClickHandler);
                            }
                        }
                    }
                }
            }

            protected function onApplicationMenu_ClickHandler(event:Event):void
            {
                var menuItem:NativeMenuItem = event.target as NativeMenuItem; 

                switch(menuItem.label)
                {
                    case "cut":
                        // do cut operation
                        trace("COMMAND + X");
                        break;
                    case "copy":
                        // do copy operation
                        trace("COMMAND + C");
                        break;
                    case "paste":
                        // do paste operation
                        trace("COMMAND + V");
                        break;
                }
            }

            private function isMAC():Boolean
            {
                return (Capabilities.version.substr(0,3) == "mac");
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
</s:WindowedApplication> 
```

我希望这能解决你的问题...

# c# - 基于随机定时接收的位置坐标计算速度

> ID：15765870
> 
> 赞同：3
> 
> 时间：2013-04-02T13:49:59.963
> 
> 标签：c#, algorithm, gps

我正在编写一个需要知道您行驶速度的应用程序。我的应用程序与几台设备通信，它们都带有不同的内置 GPS 接收器。在我使用的硬件报告速度的地方，我使用该参数。但在某些情况下，我的硬件不报告速度，只报告纬度和经度。

在这种情况下，我一直在做的是标记我收到第一个坐标的时间，然后等待另一个坐标进入。然后我计算行进的距离并除以经过的时间。

我遇到的问题是一些硬件报告定位很快（每秒 5-10 次），而一些报告定位缓慢（每秒 0.5 次）。当我快速接收 GPS 位置时，由于 GPS 接收器固有的不准确性，我的算法无法准确计算速度。换句话说，由于 GPS 不准确，位置自然会移动，并且由于从上次接收到的位置经过的时间跨度非常小，我的算法认为我们在很短的时间内移动了很远——这意味着我们走得很快（当现实我们可能停滞不前）。

我怎样才能平均速度以避免这个问题？似乎该过程必须根据积分的进入速度进行自适应。例如，如果我只是平均收集的最后 5 个积分来计算速度，它可能对“快速”报告单位很有用，但它会伤害了我对“慢”报告单位的准确性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:03:17.423

我会平均最后 X 秒的速度。让我们选择 X=3。对于你的快速记者来说，这意味着用大约 20 个数据点来平均你的速度。对于你的慢速记者来说，这可能只会给你 6 个数据点。这应该保持准确度相当均匀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:07:39.647

您可能有一个现有的数据点结构可以从中提取 linq 查询？

鉴于我们需要考虑负向量的说明，并且这里考虑已知误差范围的建议是一个更复杂的示例：

```
class GPS
{
    List<GPSData> recentData;
    TimeSpan speedCalcZone = new TimeSpan(100000);
    decimal acceptableError = .5m;

    double CalcAverageSpeed(GPSData newestPoint)
    {
        var vectors = (from point in recentData
                       where point.timestamp > DateTime.Now - speedCalcZone
                       where newestPoint.VectorErrorMargin(point) < acceptableError
                       select new
                       {
                           xVector = newestPoint.XVector(point),
                           yVector = newestPoint.YVector(point)
                       });
        var averageXVector = (from vector in vectors
                              select vector.xVector).Average();
        var averageYVector = (from vector in vectors
                              select vector.yVector).Average();
        var averagedSpeed = Math.Sqrt(Math.Pow(averageXVector, 2) + Math.Pow(averageYVector, 2));

        return averagedSpeed;
    }
} 
```

但正如评论中指出的那样，没有一种神奇的算法，您必须根据您的情况和需要对其进行调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:11:54.837

我会尝试使用过去 X 秒内的平均 POSITION。

这应该“平均掉”与高频位置输入相关的随机噪声......这应该会产生更好的计算速度。

（显然你会使用“平均”位置来计算你的速度）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T18:35:43.503

使用一个简单的过滤器：

仅当距离上次采取的位置超过 10 米时才采取立场。

然后计算lastGood和thisGood的距离，除以timeDiff。

如果 GPS 噪音最大，您还想忽略 5 公里/小时以下的所有速度。

如果它保持稳定，您可以通过计算 last 和 this 之间的方向来进一步优化。这有助于过滤。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T14:29:28.593

您正在寻找一种可能不存在的理想算法，原因很简单：您无法在没有数据的地方发明数据，有时您甚至无法分辨数据的结束位置和错误的开始位置。

话虽这么说，正如您通过平均 5 次连续测量发现的那样，有一些方法可以减少“噪音”，我还要补充一点，您可以丢弃“异常值”并选择 5 个彼此最接近的 3 个.

这里的问题是什么最适合您的情况（或可接受的好）。如果您正在跟踪在大陆上移动几英里/小时的卡车，因为错误会自行抵消，但如果您正在跟踪在建筑物之间移动的飞行无人机，则差异可能非常显着。

这里有一些更多的想法，你可以选择你能走多远，我假设卡车场景，这个想法是在你没有准确读数时获得最可能的速度： - 丢弃“不可能”的速度 -高大的建筑物可以反射 GPS 信号，导致您走路时的速度超过 100 英里/小时，拥有“高速公路地图”（见下文）可以帮助管理临界值 - 使用误差范围而不是点值传输、存储和计算（一些 GPS 报告错误范围）。- 保持每个位置的平均错误 - 保持每个报告设备的平均错误 - 保持每个位置的平均速度，您最终将获得高速公路与其他道路的地图 - 您可以关联位置速度*和*方向

# ajax - ColdFusion的ajax搜索表单

> ID：15765880
> 
> 赞同：1
> 
> 时间：2013-04-02T13:50:22.007
> 
> 标签：ajax, coldfusion

我正在寻找一些技术，如搜索表单或表单过滤器。这是一个参考。这是一个寻找酒店的网站。

我的问题在这里，如何使用coldfusion创建这种带有ajax的搜索表单？请给我一些想法或提示，我会很感激你的帮助！

我刚刚对带有文本的 ajax 搜索表单有了一​​些想法。

```
<form>
 Search: <input type="text" name="search">
 <input type="button" value="Search">
 </form>

 <cfdiv bind="url:movieresults.cfm?search={search}">
 </cfdiv> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:29:50.123

一般而言，CF 中的搜索表单与任何其他格式的搜索表单具有相同的基本概念：您有一个表单，其中允许用户提供搜索条件，并且您有一些要搜索的数据集合。因此，您会看到实际的搜索表单本身只是搜索的一小部分。您需要构建您将搜索的数据对象，并且您需要构建要添加到该集合（如果需要）并维护它的片段。在 Ajax 界面中折腾只会使事情复杂化，所以我建议您坚持使用基本的搜索 HTML 表单，一旦您掌握了提交搜索，通过您的数据集合进行搜索并以形式将该集合返回给用户一个有用的结果页面...只有这样您才应该考虑修改它以使用 Ajax 引擎运行。

在这里可以找到一个很好的起点来了解如何使用 cfindex 和 cfsearch（创建数据集合并针对该集合进行搜索的 Coldfusion 的标签）。

跑前走，蚱蜢。如果您遇到任何具体问题，请随时回到这里，我们会看看我们能为您做些什么。同时，查看我们的 ColdFusion 资源线程。它有很多通用 CF 资源的链接，所有 CF 开发人员、初学者到专家都需要/使用这些资源来帮助完成工作。

# magento - Magento 相关产品未显示

> ID：15765882
> 
> 赞同：-1
> 
> 时间：2013-04-02T13:50:30.140
> 
> 标签：magento

这个问题已经困扰我一段时间了。

目前，我的 magento 配置中有这些简单的产品。我真的很喜欢为他们每个人制作一个相关的产品。我能够应用过滤器并在后端找到产品本身。

*   我的缓存被禁用所以这不是问题
*   我已经多次重新索引所有内容
*   我检查了是否没有任何物品被添加到购物车，但我的购物车是空的
*   所有产品都添加到类别中，数量 > 0 和“有货”属性。

我不知道为什么它不能正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T15:16:07.003

这对我有用：

1.  登录管理员
2.  转到系统 -> 索引管理
3.  选择所有复选框
4.  从操作选择列表中选择“重新索引数据”
5.  点击提交按钮

# batch-file - 无法在 Windows 批处理文件的 if 语句中获取变量值

> ID：15765884
> 
> 赞同：0
> 
> 时间：2013-04-02T13:50:35.923
> 
> 标签：batch-file

我正在尝试编写一个简单的批处理文件，它将控制对计算机的访问（使用关机），因此在计算机开启时每 30 分钟，计算机关闭时必须至少有 30 分钟。该文件将自动启动。该算法如下所示：

```
Get from the file time when the computer was last closed (LASTCLOSETIME)
calculate BREAKUNTIL as LASTCLOSETIME + 30 minutes
if CURRENTTIME < BREAKUNTIL {
    then shutdown now
} else {
    shutdown in 30 minutes
    save to the file CURRENTTIME + 30 minutes
} 
```

如果文件不存在，我没有处理第一次运行时发生的情况，但现在这不是问题 - 文件存在并包含有效数据。

我的代码：

```
::echo off

FOR /F "DELIMS=" %%G IN ('TIME /T') DO SET CURRENTTIME=%%G
echo %CURRENTTIME%

set /A CURRENTTIME = %CURRENTTIME:~0,2%*60 + %CURRENTTIME:~3,2%
echo %CURRENTTIME%

set /P LASTCLOSETIME=<lastclose.txt

set /A BREAKUNTIL = %LASTCLOSETIME% + 30
set /A BREAKUNTIL = %BREAKUNTIL% %% 1440

echo CURRENTTIME: %CURRENTTIME%
echo LASTCLOSETIME: %LASTCLOSETIME%
echo BREAKUNTIL: %BREAKUNTIL%

if "%CURRENTTIME%" LSS "%BREAKUNTIL%" (
    shutdown -s -t 30
) else (
    shutdown -s -t 1800

    set CLOSETIME = %CURRENTTIME%
    echo CLOSETIME: %CLOSETIME%
    set /A CLOSETIME = %CLOSETIME% + 30
    set /A CLOSETIME = %CLOSETIME% %% 1440

    echo %CLOSETIME%
    echo %CLOSETIME% > lastclose.txt
)

PAUSE 
```

问题是我设置的地方`CLOSETIME`。它成功地获得了的值，`CURRENTTIME`我可以`"set CLOSETIME = 886"`在控制台中看到例如，但是下一行这次根本不打印，就好像没有设置变量一样。它与if语句有关吗？我尝试过使用标签和 goto 语句，但结果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:16:05.580

标准 DELAYEDEXPANSION 问题。

这是一个复合语句：

```
if "%CURRENTTIME%" LSS "%BREAKUNTIL%" (
    shutdown -s -t 30
) else (
    shutdown -s -t 1800

    set CLOSETIME = %CURRENTTIME%
    echo CLOSETIME: %CLOSETIME%
    set /A CLOSETIME = %CLOSETIME% + 30
    set /A CLOSETIME = %CLOSETIME% %% 1440

    echo %CLOSETIME%
    echo %CLOSETIME% > lastclose.txt
) 
```

当语句被解析时，any 的当前值`%var%`被替换，***然后语句***被执行。在语句执行之前，该值不会被分配给`closetime`，因此该语句被解释为

```
if "%CURRENTTIME%" LSS "%BREAKUNTIL%" (
    shutdown -s -t 30
) else (
    shutdown -s -t 1800

    set CLOSETIME = %CURRENTTIME%
    echo CLOSETIME: 
    set /A CLOSETIME = + 30
    set /A CLOSETIME =  %% 1440

    echo 
    echo  > lastclose.txt
) 
```

最简单的解决方法是将这个序列更改为

```
if "%CURRENTTIME%" LSS "%BREAKUNTIL%" (
    shutdown -s -t 30
    GOTO :EOF
)
shutdown -s -t 1800

set CLOSETIME = %CURRENTTIME%
echo CLOSETIME: %CLOSETIME%
set /A CLOSETIME = %CLOSETIME% + 30
set /A CLOSETIME = %CLOSETIME% %% 1440

echo %CLOSETIME%
echo %CLOSETIME% > lastclose.txt 
```

请注意，`GOTO :EOF`冒号所在的位置`required`表示“转到文件的物理结尾。

第二个最简单的是执行

```
SETLOCAL ENABLEDELAYEDEXPANSION 
```

`IF`此语句之前的某处（通常直接在 之后`@echo off`）并将 更改`IF`为

```
if "%CURRENTTIME%" LSS "%BREAKUNTIL%" (
    shutdown -s -t 30
) else (
    shutdown -s -t 1800

    set CLOSETIME = %CURRENTTIME%
    echo CLOSETIME: !CLOSETIME!
    set /A CLOSETIME = !CLOSETIME! + 30
    set /A CLOSETIME = !CLOSETIME! %% 1440

    echo !CLOSETIME!
    echo !CLOSETIME! > lastclose.txt
) 
```

注意 when`DELAYEDEXPANSION`生效时，`!var!`返回 RUNTIME 值`var`（即当它改变时），而`%var%`返回 PARSE-TIME 值`var`（即在执行之前解析语句时的状态。）

# php - 处理sql查询结果

> ID：15765887
> 
> 赞同：0
> 
> 时间：2013-04-02T13:50:48.733
> 
> 标签：php, mysql

我有一个名为“ **Serials** ”的表，其中包含 5 个公共 **序列、代码、名称、兑换、兑换日期**

我正在使用此查询从该表中选择一些字段：

```
$query = "SELECT `Name`,`Redeemed`,`Redeem_date` FROM `Serials` WHERE `Serial` = '$serial' AND `Code` = '$code'";
$db->setQuery($query);
$db->query(); 
```

但我不知道如何在以下变量中传递这些值，以便稍后在 if 语句中使用它们

```
$name= //retured value from column Name
$redeemed= //retured value from column Redeemed
$redeem_date= //retured value from column Redeem_date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:53:21.267

像这样..

```
// Your query here..
$query = "SELECT `Name`,`Redeemed`,`Redeem_date` FROM `Serials` WHERE `Serial` = '$serial' AND `Code` = '$code'";
$db->setQuery($query);
$results = $db->query();

//fetch data and stored into variables
while($row = fetch_array($results)){
  $name = $row['Name'];
  $redeemed = $row['Redeemed'];
  $redeem_date = $row['Redeem_date'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:53:56.187

尝试这样的事情：

```
<?php
$result = $db->query("SELECT `Name`,`Redeemed`,`Redeem_date` FROM `Serials` WHERE `Serial` = '$serial' AND `Code` = '$code'");
while (list($name, $redeemed, $redeem_date) = $result->fetch(PDO::FETCH_NUM)) {
 // DO SOMETHING
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:56:41.273

```
while ($row = $db->fetch()) {

$name= $row['name'];
$redeemed= $row['redeemed'];
$redeem_date= $row['redeem_date'];

} 
```

这个可能会获取您的结果并分配给 vars

# security - 在 POST 请求中使用 XSS 窃取信息的场景是什么

> ID：15765891
> 
> 赞同：2
> 
> 时间：2013-04-02T13:51:06.690
> 
> 标签：security, post, xss

我了解在**GET**帖子上使用 XSS 窃取信息的情况，工作流程如下：

1.  黑客从 Web 应用程序中识别出具有通过查询字符串参数注入 XSS 漏洞的页面。
2.  黑客编写了一个附加了 XSS 注入查询字符串的 url。
3.  黑客将 URL 发送给受害者，例如通过电子邮件。
4.  受害者收到邮件并点击 url（假设受害者对安全的了解较少）。
5.  打开的网页已注入 XSS，对页面的任何进一步操作都可能导致安全问题。

这是可能的，因为单击 url 链接将以 GET 模式打开网页。所以，我想知道该页面对于**POST**请求是否存在 XSS 漏洞，这会是一个安全问题吗？我想不出一个“合理的”攻击工作流程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:08:22.100

> 所以，我想知道该页面对于 POST 请求是否存在 XSS 漏洞，这会是一个安全问题吗？

当然会。为什么嵌入外部代码的*方法*很重要？*它*确实发生是问题，而不是*如何*发生。

> 我想不出一个“合理的”攻击工作流程。

考虑一个简单的 HTML 表单，它在服务器端验证失败后预先填充了先前的用户输入。

如果这个预填充允许 XSS（基本上意味着，在 HTML 上下文中输出之前转义所有数据被忽略）——那么我可以很容易地在我自己的页面中设置一个表单，让它的`action`属性指向你的表单处理地址，然后传递我喜欢通过隐藏字段的任何数据——并且用户必须通过一个简单的提交按钮将该数据发送到您的服务器，该按钮的格式可能看起来就像一个正常的链接，并且只说“单击此处转到 example.com”。用户希望它像任何其他链接一样“正常”地打开一个页面——但实际上它发送的值会触发再次显示带有预填充字段的表单。

等等，XSS 攻击成功执行。

（所有这些都是在目标站点没有针对“外国”表单数据的额外安全性的前提下。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T17:13:14.250

攻击者还可以构建一个包含自动提交表单的“data:”URL：

data:text/html;base64,PGh0bWw+CiAgPGJvZHkgb25sb2FkPSJkb2N1bWVudC5mb3Jtc1swXS5zdWJtaXQoKSI+CiAgICA8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iaHR0cDovL2xvY2FsaG9zdCI+CiAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImVybnN0IiB2YWx1ZT0iPHNjcmlwdD5hbGVydCgnWFNTJyk8L3NjcmlwdD4iPgogICAgPC9mb3JtPgo8L2h0bWw+

这相当于导航到包含此标记的页面：

<html> <body onload="document.forms[0].submit()"> <form method="post" action="..."> <input type="hidden" name="ernst" value=" <script>alert('XSS')</script>"> </form> </html>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T16:48:32.253

刚刚在为客户执行渗透测试时遇到了这个确切的问题。在报告时，我们通常会尝试使用 GET 请求来展示概念证明漏洞利用，因为这更容易。还要记住，某些服务器可能允许您将 POST 更改为 GET 请求。一些服务器还将接受 URL 中的 POST 参数值。在我最近的经验中，服务器只接受作为 POST 的请求，并将输入输入到表单字段中。阻止 XSS 攻击的唯一因素是他们有跨站请求伪造预防（通过 ViewState）。所以，在这种情况下，它只是一个反射故障。仍然不是很好，但也没有那么糟糕。您应该始终使用入口和出口过滤，并且永远不要信任用户可控制的数据。

# c++ - “左值”和“右值”的命名背后的原因是什么？

> ID：15765893
> 
> 赞同：3
> 
> 时间：2013-04-02T13:51:06.837
> 
> 标签：c++, c, terminology, rvalue, lvalue

C/C++ 中“左值”和“右值”的命名背后的原因是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T13:52:48.577

该标准提到了这一点：

> 左值（历史上称为左值，因为左值可能出现在赋值表达式的左侧）[...]
> 
> 一个右值（历史上称为右值，因为右值可能出现在赋值表达式的右侧）[...]

也就是说，左值是您可以分配的东西，而右值是您可以分配的东西。

然而，这已经逐渐离真相越来越远了。一个无法分配的左值的简单示例是`const`变量。

```
const int x = 5;
x = 6; // Error 
```

当涉及运算符重载时，甚至可以在赋值的左侧出现右值。

我发现将左值视为引用存储在内存中的对象而将右值视为一个值（可能已从内存中读取）更有用。这些概念很好地反映了这个想法。一些例子：

*   左值到右值可以被认为是从内存中的对象读取值。
*   大多数运算符需要左值到右值的转换，因为它们使用对象的值来计算结果。
*   运算符 ( `&`) 的地址需要一个左值，因为您只能获取内存中某物的地址。它不需要获取对象的值来计算其地址。
*   执行`std::move`将左值表达式转换为右值表达式可以被认为是欺骗编译器认为存储在内存中的对象实际上只是一个临时值。

然而，这也不是在所有情况下都成立。这只是一个合理的类比。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T13:52:40.850

回到过去，“左值”意味着可以放在作业**左侧**的东西，而“右值”意味着可以放在作业**右侧**的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T13:52:43.833

如果您考虑它们可以出现在赋值运算符的哪一侧，那将非常直观：

```
left-value = right-value; 
```

简单地说，`lvalue`意味着你可以分配给它，`rvalue`意味着它只能出现在操作符的右侧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T13:53:28.027

在 C 中，`lvalue`并`rvalue`反映在赋值运算符中的用法。`rvalue`只能出现在 的右侧`=`，而`lvalue`可以出现在两侧。在 C++ 中，它类似，但更复杂。

有不可赋值`lvalues`的常量变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T13:53:26.687

这是简化（稍微复杂的）概念的结果。

`lvalue`s 是**左**值，即“可以在赋值左侧”的值。同样，这是一种简化，并非所有左值都可以按原样直接分配（例如，数组不能，只有非`const`数组的元素，因此需要下标）。

`rvalues`是**正确的**值，那些只能在赋值表达式的右侧。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-23T07:45:54.800

左值中的“l”源自“左”值（如赋值运算符的左侧）；但是，它现在代表位置值，指的是占据内存中某个可识别位置（即具有地址）的任何对象。右值现在是任何不是左值的东西。

# php - 根据字体大小改变背景颜色

> ID：15765894
> 
> 赞同：3
> 
> 时间：2013-04-02T13:51:08.937
> 
> 标签：php, colors, hex

在 PHP 文件中，我有一个变量`$number`，其中包含有关字体大小的信息，并且效果很好：

```
echo "<div style='font-size:".$number."'px>  .... " 
```

现在我想知道，这是否可以`div`根据字体的大小来改变背景？默认值为白色，因此它可能是`<div style='background-color:#FFFFFF;font-size:10px`字体大小 10px。当背景字体大小较大时，我希望颜色会略有变化，例如从白色到红色，再到深红色。我怎样才能做到这一点？

我知道可以通过这种方式完成，但我相信它应该比这更简单：

```
if ($number==10) $color="FFFFFF";
elseif ($number==11) $color="FCEFF3";
....
elseif ($number==50) $color="FF004E";
echo "<div style='background-color:#".$color.";font-size:".$number."'px>  .... " 
```

但在上面的例子中，问题是关于脚本的长尺寸，因为字体大小可以从 10 到 50 甚至 80，所以我想也许我可以添加十六进制颜色值来增加它们，不知何故？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:58:46.443

您可以创建所需颜色的关联数组，并将键设置为字体大小。然后，您可以简单地引用`$number`设置为的颜色：

```
$number = 11; // Or whatever the font-size is set to
$backgrounds = array(
    10 => "#FFFFFF",
    11 => "#FCEFF3",
    50 => "#FF004E"
);

echo "<div style='background-color: ".$backgrounds[$number]."; font-size: {$number}px;'></div>"; 
```

# emacs - Elisp 本身有 flymake 模式吗？

> ID：15765895
> 
> 赞同：2
> 
> 时间：2013-04-02T13:51:09.173
> 
> 标签：emacs, elisp

我在 Emacs 中使用 flymake 来检查用多种语言编写的代码。但是，我看不到在 elisp 本身上使用 flymake 的任何方法。

我知道`elint-current-buffer`, 和`byte-compile-file`，它们都对未定义的变量等给出有用的警告。奇怪的是，它们并不总是给出相同的错误：例如，elint 不会对`(require 'cl)`. 我也尝试过`auto-compile-mode`（在 MELPA 上可用），但这仍然会将警告写入单独的缓冲区。

当我输入错误时，我真的希望我的 elisp 代码有下划线。我该怎么做呢？我之前配置过flymake，但那是使用外部程序，而不是Emacs 本身。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:42:22.640

Emacs wiki 对 emacs lisp 的 flymake 有[这样](http://www.emacswiki.org/emacs/FlymakeElisp)的说法，尽管它看起来并不完整。

[不过， flycheck](https://github.com/lunaryorn/flycheck)支持 Emacs Lisp “开箱即用”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:24:59.067

Erefactor 相当不错，可从 wiki 和 melpa 获得： [http ://www.emacswiki.org/emacs/erefactor.el](http://www.emacswiki.org/emacs/erefactor.el)

我也喜欢在保存后运行 checkdoc：

```
 (defun emagician/run-checkdoc () 
   "run checkdoc on save if it is an elisp file"
   (if (and (eq major-mode 'emacs-lisp-mode)
            (> (length buffer-file-name)
               (length package-user-dir))
            (not (string= (concat package-user-dir "/")
                          (substring buffer-file-name 0 (+ 1 (length package-user-dir))))))
       (checkdoc)))

 (add-hook 'after-save-hook 'emagician/run-checkdoc) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-29T16:19:33.233

现在有`elisp-flymake-byte-compile`内置flymake的后端。
要启用将其添加到配置：

```
(add-hook 'emacs-lisp-mode-hook #'flymake-mode) 
```

# coldfusion - MySQL 如果没有结果

> ID：15765900
> 
> 赞同：0
> 
> 时间：2013-04-02T13:51:19.690
> 
> 标签：coldfusion

我正在尝试在 ColdFusion 中创建一个脚本，该脚本通过使用以下查询来检测指定用户是否存在查询：

```
 // User one is defined by the current session
            <cfquery name = "Friendship" datasource = "#DSN#">
            SELECT * 
            FROM  `conversations` 
            WHERE  `user_one` LIKE  '#user.id#'
            ORDER by id ASC
            </cfquery>

          <cfquery name = "FriendshipToUsername" datasource = "#DSN#">
            SELECT *
            FROM users
            WHERE id = '#user_two#'
            ORDER BY id DESC
          </cfquery> 
```

但是，当此查询没有结果时，我想使用以下查询：

```
 <cfquery name = "Friendship" datasource = "#DSN#">
            SELECT * 
            FROM  `conversations` 
            WHERE  `user_two` LIKE  '#user.id#'
            ORDER by id ASC
            </cfquery>

          <cfquery name = "FriendshipToUsername" datasource = "#DSN#">
            SELECT *
            FROM users
            WHERE id = '#user_one#'
            ORDER BY id DESC
          </cfquery> 
```

在 ColdFusion 中可以做到这一点吗？我想以这种方式保留查询的名称，否则我将需要更改我的整个站点。这是我页面的代码，如果您需要它：

```
 <cfif IsDefined("FriendshipToUsername.username")>

            <div class="person">
                <div class="avatar">
                    <div style="z-index:1;width: 64px; height: 73px; margin-bottom:-20px; margin-top:-30px; float: right; background: url(http://habbo.it/habbo-imaging/avatarimage?figure=#FriendshipToUsername.look#&amp;action=wav&amp;direction=3&amp;head_direction=3&amp;gesture=srp&amp;size=b&amp;img_format=gif);"></div>

                </div>
                <div class="info">
                  <a href="chat.cfm?chat=#Friendship.id#" style="text-decoration: none; color: ##4b4b4b;">  <h3>#FriendshipToUsername.username#</h3></a>
                    <a href="chat.cfm?chat=#Friendship.id#" style="text-decoration: none; color: ##4b4b4b;"><p>#FriendshipToUsername.motto#</p></a>
                    <p>Laatst gezien: gisteren</p></a>

                </div>
            </div>
            </cfif> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:12:34.283

您可以测试该`.recordcount`属性，如下所示。

```
<cfif friendship.recordcount eq 0>

     <cfquery name = "Friendship" datasource = "#DSN#">
      SELECT * 
      FROM  `conversations` 
      WHERE  `user_two` LIKE  <cfqueryparam cfsqltype="cf_sql_varchar" value="#user.id#">
      ORDER by id ASC
     </cfquery>

     <cfquery name = "FriendshipToUsername" datasource = "#DSN#">
     SELECT *
     FROM users
     WHERE id = <cfqueryparam cfsqltype="cf_sql_varchar" value="#user_one#">
     ORDER BY id DESC
     </cfquery>

</cfif> 
```

我还建议查找并使用 cfqueryparam 标记来防止您的代码受到 sql 注入的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:57:54.270

我建议稍微修改您的原始查询，以便它尝试同时检索两条记录。这样，如果第一个查询返回零行，您就不需要两次访问服务器：

```
<cfquery name = "Friendship" datasource = "#DSN#">
    SELECT * 
    FROM  `conversations` 
    WHERE  `user_one` LIKE  '#user.id#'
    OR [get other user here]
    ORDER by id ASC
</cfquery> 
```

执行查询后，只需拉出适当的用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:19:50.410

检查和查询的`recordcount`属性。您可以简单地使用与以前相同的查询名称重新查询数据库。`friendship``friendshipToUsername`

当然，您还应该使用[cfqueryparam](http://www.cfquickdocs.com/cf9/?getDoc=cfqueryparam)来保护您的数据库免受 sql 注入尝试的影响。

```
<!---(original friendship and friendshipToUsername queries)--->
<cfif NOT friendship.recordcount>   <!--- or "friendship.recordcount EQ 0" if you prefer --->
  <cfquery name = "Friendship" datasource = "#DSN#">
    SELECT * 
    FROM  `conversations` 
    WHERE  `user_two` LIKE  <cfqueryparam value="#user.id#" cfsqltype="cf_sql_integer">
    ORDER by id ASC
  </cfquery>

  <cfquery name = "FriendshipToUsername" datasource = "#DSN#">
    SELECT *
    FROM users
    WHERE id = <cfqueryparam value="#user_one#" cfsqltype="cf_sql_integer">
    ORDER BY id DESC
  </cfquery
</cfif> 
```

# multithreading - pyqt 线程 qRegisterMetaType 警告/崩溃

> ID：15765903
> 
> 赞同：1
> 
> 时间：2013-04-02T13:51:24.920
> 
> 标签：multithreading, pyqt

我正在使用 Qwizard 编写一个 pyqt 程序。在一个屏幕上，我正在运行一个线程并通过 Popen 启动一个命令行程序。但是我收到以下警告消息：

QObject::connect: 无法对“QTextCursor”类型的参数进行排队（确保使用 qRegisterMetaType() 注册了“QTextCursor”。）

该程序通常会继续运行，但在此之后会立即崩溃，这让我觉得它是相关的。

由于程序代码太多无法附加，以下是相关片段：

```
class Fee(QThread):
    def __init__(self, parent=None, options=None):
        QThread.__init__(self, parent)
        #set the given options
        if options:
            self.__options = options

    def copy(self, devicename, outputfilename): 
        self.__device = devicename
        self.__outputfile = outputfilename
        self.start()

    def run(self):
        cmd = self.__getCommandLine(self.options, self.__device, self.__outputfile)
        logging.info("Running Fee with command %s" % (cmd))
        #start the process
        output = ""
        process = Popen(shlex.split(cmd), stdout= PIPE, stderr= STDOUT)
        stderr = process.communicate()[1] 

class FeeManager(QtCore.QObject):
    def copyAndVerify(self):
        self.__fee = Fee(self, self.options)
        self.connect(self.__fee, QtCore.SIGNAL("finished()"), self._setCopyFinished)
        self.connect(self.__fee, QtCore.SIGNAL("progressUpdated(QString, int, QString)"), self._setCopyProgress)

        devicename = self.device.blockdevice
        self.__image_outputfilename = "output_file.img")
        self.__fee.copy(devicename, self.__image_outputfilename) 

class FeeWizardPage(QtGui.QWizardPage):
    def initializePage(self):
        #already earlier in another wizard page is the following: self.feemanager = FeeManager(self, info) 
        self.connect(self.wizard().feemanager, QtCore.SIGNAL("copyProgressUpdated(QString, int, QString)"), self.updateCopyProgress)
        self.connect(self.wizard().feemanager, QtCore.SIGNAL("verifyProgressUpdated(QString, int, QString)"), self.updateVerifyProgress)
        self.connect(self.wizard().feemanager, QtCore.SIGNAL("finished(PyQt_PyObject)"), self.setDone)
        self.wizard().feemanager.copyAndVerify() 
```

我究竟做错了什么？我怎样才能避免这个消息，并希望给程序带来一些稳定性。我已经搜索了互联网和这个论坛，虽然我已经为其他人尝试了一些建议，但没有一个可以解决这个问题。即使我注释掉所有信号并连接，我仍然会收到相同的警告消息。

有人可以帮忙吗？

非常感谢。

# android - BufferedReader 没有读取所有行

> ID：15765909
> 
> 赞同：0
> 
> 时间：2013-04-02T13:51:51.707
> 
> 标签：android, bufferedreader, outputstream, ioexception, java-io

我正在创建一个使用蓝牙连接与 PC 通信的 Android 应用程序。我正在尝试将 ArrayList 中的项目从 PC 发送到 Android。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:55:32.933

尝试刷新输出流并关闭输出流。这应该将缓冲区中的剩余数据刷新到 Android 设备。此外，您需要为每个输出添加一个新的换行符（如果 ArrayList 的值中不存在一个），即在您的 PC 代码上执行以下操作：

```
 PC Code:

            list = FilterFile.aList;
            for(int z = 0; z < list.size(); z++) {
                int a = list.size();
                System.out.println("in for\n"+list.size());
                String str = list.get(z);
                System.out.println(str);
                out.write((str+"\n").getBytes());
                out.flush();
            }  
            out.close();     

            Android (Client) side code:

            public class ConnectedThread extends Thread {
        private BluetoothSocket mmSocket;
        private InputStream mmInStream = null;
        public OutputStream mmOutStream = null;
        private static final String TAG = "ConnectedThread";
        private static final boolean D = true; 
        int i;
        char a;
        String line;
        String y = "";
        //DataInputStream din=null;

        public ConnectedThread(BluetoothSocket socket) {
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;
            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) { }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;
            //din = new DataInputStream(mmInStream);
            if (D) Log.e(TAG, "-- in connected() --");
        }

        public void run() {
            if (D) Log.e(TAG, "-- ConnectedThread --");                 
        }

        public void write(byte[] bytes) {
            try {
                mmOutStream.write(bytes);
            } catch (IOException e) { }
        }

        public String readList() {

                        String data = "";
            try {
                byte buff[] = new byte[1024];
                int count = -1;

                while((count = mmInStream.read(buff, 0, 1024)) != -1){
                    data += new String(buff,0,count);
                }
                String lines[] = data.split("\n");

                for(int i = 0; i < lines.length; i++){

                    //this will print your individual lines...
                    System.out.println(lines[i]);
                }

            } catch (Exception e) {
                ///print your error message here
            }   
            finally{
            if(in != null){
                try {
                mmInStream.close();
                } catch (Exception e) {
                e.printStackTrace();
                }
            }
           }
           return data;
            }

        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) { }
        } 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T13:55:50.547

尝试只调用`write`一次该方法（并在调用后刷新/关闭缓冲区）：

```
String str = "";
for(int z = 0; z < list.size(); z++) {
    str += list.get(z);
}

System.out.println(str);
out.write(str.getBytes());
out.flush();
out.close(); 
```

# java - 如何将 Ivy 的依赖项添加到 Eclipse PDE 目标平台？

> ID：15765911
> 
> 赞同：1
> 
> 时间：2013-04-02T13:51:53.620
> 
> 标签：java, eclipse, ivy, pde, ivyde

我可以将外部 OSGi 包添加到我的 PDE 项目中，并且可以让它们显示在目标平台中（尽管我需要在添加新包后执行重新加载），我使用“lib”目录来执行此操作每个项目。

随着我的项目变得越来越复杂，我需要一些 Spring 捆绑包，并且我希望 Ivy（Ivy DE 插件）为我管理依赖项。这很好地找到了所有需要添加到类路径中的包。

问题是我还需要将它们添加到目标平台，我找不到让目标平台查看 Ivy 依赖项的方法。

一种可能的解决方法是将 Ivy 依赖项复制到我的 lib 目录中。我对 Ivy 很陌生，看不到将依赖项复制到本地目录的方法（这样做似乎违背了 Ivy 的观点）。我还考虑将 Ivy 缓存添加到目标平台（一个疯狂的想法），但由于缓存的目录结构，Eclipse 无法找到所有包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:21:58.727

Ivy 主要设计为嵌入到 ANT 构建中。在这种情况下，您可以使用检索任务来决定在构建工作区中保存文件的位置：

```
<ivy:retrieve pattern="${dist.dir}/WEB-INF/lib/[artifact].[ext]" conf="runtime"/> 
```

我不是 ivy Eclipse 插件以及此功能是否可用于纯 Eclipse 构建的专家。

# java - 如何正确定位网格坐标

> ID：15765917
> 
> 赞同：0
> 
> 时间：2013-04-02T13:52:05.600
> 
> 标签：java, sorting

我正在摄取四个十进制度的网格坐标，类似于：33.829785，-84.3958，这样我就可以在地图上画一个正方形。但是，有时坐标没有按正确的顺序传递，这会导致三角形带有离群点。在研究这一点时，我在[这里](https://stackoverflow.com/q/126658/906048)和[这里](https://stackoverflow.com/q/745048/906048)都看过所以我也看过[Jgraph](http://www.jgraph.com/)，[Jung](http://jung.sourceforge.net/)和[Grappa](http://www2.research.att.com/~john/Grappa/)；但这些框架更适合创建操作图，而不是评估它们。由于 java.lang.comparable 接口施加的限制，我还找到了以下代码，它适用于对一组四个整数点进行排序，但不适用于十进制度。

```
int[][] array={{2,2},{1,1},{4,3},{2,1},{10,1}};
            Arrays.sort(array, new Comparator<int[]>(){
                    public int compare(int[] a, int[] b){
                            //assumes array length is 2
                            int x,y;
                            if (a[0]!=b[0]) {
                                    x=a[0];y=b[0];
                            }
                            else{
                                    x=a[1];y=b[1];
                            }
                            if (x<y) return -1;
                            else if (x==y) return 0;
                            else return +1;
                    }
            });
            for(int[] term: array){
                    System.out.println(Arrays.toString(term));
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:17:58.877

您发布的代码应该可以工作，一旦您将其转换为使用`double`. 我不知道你为什么认为它不会。

不要对`compare`需要保留的返回类型感到困惑`int`。所有其他引用`int`变为双重。这可能会有所帮助：[具有双重类型的比较器](https://stackoverflow.com/questions/4242023/comparator-with-double-type)

祝你好运！

# sed - 我的 sed 命令生成两个输出。如何将输出存储到两个变量而不是文件中？

> ID：15765925
> 
> 赞同：0
> 
> 时间：2013-04-02T13:52:25.270
> 
> 标签：sed

我的代码如下所示：

```
cat new21 | sed -n 's/.*<\/a><strong>\(.*\)<font color="red"> &nbsp;&nbsp;(\(.*\)).*/\1\2/p' | eval $var1 $var2 
```

但变量 var1 和 var2 不包含任何内容。我的输入：

```
</a><strong>CSKIU7 Advanced course <font color="red"> &nbsp;&nbsp;(2013 class 1)</font></strong> 
```

我想要的是 var1=CSKIU7 和 var2=Advanced course

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:03:13.760

您可能应该将 sed 表达式更改为如下所示：

```
s/.*<\/a><strong>\(.*\)<font color="red"> &nbsp;&nbsp;(\(.*\)).*/var1=\1 ; var2=\2/p 
```

然后你可以评估它的输出：

```
eval $( sed -n 's/.*<\/a><strong>\(.*\)<font color="red"> &nbsp;&nbsp;(\(.*\)).*/var1=\1 ; var2=\2/p' < new21) 
```

如果输出可能包含特殊字符，则必须非常小心。想象一下输出`var1=1 ; var2=2 ; rm -rf /`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:20:20.527

假设您使用的是 GNU sed 和 bash，您可以使用`read`并处理替换：

```
IFS=$'\t' read var1 var2 < <(sed -n 's/.*<\/a><strong>\(.*\)<font color="red"> &nbsp;&nbsp;(\(.*\)).*/\1\t\2/p' new21) 
```

现在：

```
echo $var1 .. $var2 
```

结果是：

```
CSKIU7 Advanced course .. 2013 class 1 
```

请注意，我更改了 sed 替换以在匹配的组之间添加制表符，这允许使用`IFS`将参数分隔到`read`. 另外，我将输入文件移到`sed`了末尾。

# git - 删除子模块后出错：您的 .gitignore 文件之一忽略了以下路径：

> ID：15765926
> 
> 赞同：12
> 
> 时间：2013-04-02T13:52:26.867
> 
> 标签：git, git-submodules

删除子模块后出现此错误。有问题的路径不在我的 .gitignore 文件中，我的 .git/info/exclude 文件中也没有任何相关内容。我没有 .gitignore_global 文件。为什么 git 试图忽略这条路径，我该如何解决这个问题？

```
The following path is ignored by one of your .gitignore files:
MyTest/MyTest/lib/submodules/ScreenRecorder
Use -f if you really want to add it. 
```

这是我要执行的命令：

```
git submodule add https://github.com/kishikawakatsumi/ScreenRecorder.git MyTest/MyTest/lib/submodules/ScreenRecorder 
```

这是从我的 git repos 根目录执行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T12:27:28.310

删除我的相关`[submodule]`节为我`.git/config`解决了这个问题。

我猜超级仓库会自动忽略子模块中的所有文件，因为它们没有被跟踪。因此，如果`[submodule]`您的配置中有一个杂散的节，git 会将路径添加为忽略模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-06T17:04:30.110

如“ [Git 忽略不在 gitignore 中的文件](https://stackoverflow.com/a/27615009/6309)”中所述

> 从 Git 收到此错误消息的另一个原因是在执行`git submodule add`命令时，前一个`git`命令已崩溃并离开锁定文件
> （例如，当您使用包含`git`命令且您没有注意到崩溃的自定义脚本时，可能会发生这种情况） .

在这种情况下，像“”这样的错误消息`The following path is ignored by one of your .gitignore files`不是很有表现力。

在 Git 2.26（2020 年第一季度）中，改进了“”的错误消息生成[`git submodule add`](https://git-scm.com/docs/git-submodule)。

请参阅[Kyle Meyer ( ) 的](https://github.com/kyleam)[提交 c816385](https://github.com/git/git/commit/c81638541cbbf5868e79037ca29b6e37e47461e5)（2020 年 1 月 8 日[）](https://github.com/kyleam)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 25794d6](https://github.com/git/git/commit/25794d6ce9f34ed5dedc569c5050afdb04518744))^(中，2020 年 2 月 5 日）)[`kyleam`](https://github.com/kyleam)
^([`gitster`](https://github.com/gitster))

> ## [`submodule add`](https://github.com/git/git/commit/c81638541cbbf5868e79037ca29b6e37e47461e5)`--dry-run`：中止时显示“添加”标准错误
> 
> ^(签字人：凯尔·迈耶)
> 
> 除非`--force`指定，否则 ' `submodule add`' 通过调用 ' ' 检查目标路径是否被忽略`git add --dry-run --ignore-missing`，如果调用失败，则使用自定义的 " `path is ignored`" 消息中止（' ' 显示的轻微变体`git add`）。
> 
> 提前中止而不是让下游 ' `git add`' 调用失败，以便命令在克隆到目标路径之前退出。
> 
> 但是，在极少数情况下，由于路径被忽略以外的原因，试运行调用失败（例如，由于预先存在的`index.lock`文件），**显示“ `ignored path`”错误消息会隐藏失败的真正根源**。
> 
> 让我们报告试运行的标准错误，而不是显示定制的“ `ignored path`”消息，以便为调用者提供有关不是由于忽略路径引起的故障的更准确信息。
> 
> 对于忽略路径的情况，这会导致错误消息发生以下变化：
> 
> ```
> The following [-path is-]{+paths are+} ignored by one of your .gitignore files:
> <destination path>
> Use -f if you really want to add [-it.-]{+them.+} 
> ```
> 
> 新的措辞有点尴尬，因为 ' `submodule add`' 只处理一个目标路径。
> 
> 或者，当退出代码为 1（由于忽略路径导致失败的预期状态）时，我们可以继续使用定制消息，并为所有其他非零退出传递标准错误。
> 
> 然而，这可能会隐藏共享退出代码 1 的不相关故障的消息，因此似乎不值得仅仅为了避免更笨重但仍然清晰的错误消息而做。

因此，您将收到更明确的`fatal:...`错误消息，其中提到`index.lock`, 而不是 " `ignored path`"

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-01T12:07:03.493

我发现如果您尝试添加本地文件夹并使用 Windows 样式的反斜杠而不是 Linux 样式的正斜杠作为路径，Windows 版 Git 也会抛出此错误。

例如，以下命令将抱怨路径在 .gitignore 中被忽略（即使您没有 .gitignore 文件）：

```
git submodule add C:\mysubmodule\ 
```

解决方案是更改为正斜杠：

```
git submodule add C:/mysubmodule/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-24T15:16:31.160

删除现有`.gitignore`文件并创建一个对我有用的新文件。

# android-intent - 代号应用程序可以接收共享意图吗？

> ID：15765932
> 
> 赞同：0
> 
> 时间：2013-04-02T13:52:40.817
> 
> 标签：android-intent, codenameone

我一直在工作和阅读文档和 API 文档，但到目前为止，我还没有找到与接收意图或向代号应用程序共享某些内容相关的任何内容。

这可能吗？或者这些应用程序是否完全独立运行，无论周围环境如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:27:50.717

可以通过`Display`允许它们返回值的类调用意图。

然而，响应意图和嵌入外部活动的能力是非常特定于 Android 的，并且在其他平台上没有等效的并行。您可以通过使用 Codename One 中内置的原生接口支持来创建此类案例（带有用于向清单添加条目的构建参数），这也允许其他 Android 特定概念，例如小部件。但是，所有这些代码显然是特定于 Android 的，并且只会在构建 Android 版本时出现。

# php - 使用 jquery 选项卡时显示两次标题

> ID：15765937
> 
> 赞同：0
> 
> 时间：2013-04-02T13:52:49.613
> 
> 标签：php, jquery, html, codeigniter, header

我遇到了一个奇怪的错误（我使用**codeigniter**），标题和 jquery 选项卡显示了两次：

![在此处输入图像描述](https://i.stack.imgur.com/UBLgq.png)

这是我`header_v`的，jquery 选项卡的地方：

```
<script>
  $(function() {
    $( "#datepicker" ).datepicker();
  });

  $(function() {
    $( "#tabs" ).tabs();
  });
</script>

<div id="header"><h1>HEADER</h1></div>
    <div id="tabs">
        <ul>
            <li><a href="umat">Daftar Umat</a></li>
            <li><a href="#">Daftar Pengurus</a></li>
            <li><a href="absensi">Absensi</a></li>
        </ul>
    </div> 
```

这`umat_v`是单击第一个选项卡时将加载的视图：

```
<body>
    <div id="form_search">
        <?php echo form_open('backend/index') ?>
            <p>
            Kelas :
            <?php echo form_dropdown('ddl_kelas1', $list_kelas, 'id="ddl_kelas1"');?> -
            <?php echo form_dropdown('ddl_kelas2', $list_kelas, 'id="ddl_kelas2"');?>
            </p>
            <p>
            Nama : <?php echo form_input('txt_nama');?>
            Alamat : <?php echo form_input('txt_alamat');?>
            Tanggal Lahir : <input type="text" id="datepicker" />
            </p>
            <?php echo form_submit('btn_search', 'Search');?>
        <?php echo form_close(); ?>
    </div>
    <div>
        <?php echo $table ?>
        <?php echo $pagination ?>
    </div>
</body> 
```

这是`controller`我用来加载这些视图的：

```
public function umat() {
    $this->load->view('template/header_v');
    //check authorization
    if(!isset($_SESSION['username']))
        redirect('backend');

    //pagination
    $config['base_url'] = site_url('/backend/umat/');
    $config['total_rows'] = $this->backend_m->count_umat();
    $config['per_page'] = 10; 
    $config['uri_segment'] = 3;
    $config['full_tag_open'] = '<div id="pagination">';
    $config['full_tag_close'] = '</div>';

    $this->pagination->initialize($config); 

    $data['pagination'] = $this->pagination->create_links();

    //table     
    $data_umat = $this->backend_m->get_umat();

    $this->table->set_heading(
        'No',
        'Nama',
        'Kelas',
        'Alamat',
        'Sekolah',
        'Nomor Telepon',
        'Keterangan'        
    );

    $no = 1;
    foreach($data_umat as $list_temp) 
    {
        $this->table->add_row(
            $no++,
            $list_temp->nama,
            $list_temp->kelas,
            $list_temp->alamat,
            $list_temp->sekolah,
            $list_temp->no_tlpn,
            $list_temp->keterangan
        );
    }

    $data_kelas = $this->backend_m->get_kelas();

    $data['list_kelas'][0] = 'Pilih Kelas';

    foreach($data_kelas as $row)
    {
        $data['list_kelas'][$row->kelas_id] = $row->kelas;
    }

    $data['table'] = $this->table->generate();

    $this->load->view('backend/umat_v', $data);
} 
```

为什么我的标题/`header_v`总是加载 2 次？感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:00:14.593

在您的控制器中，您的函数开头有这一行：

```
$this->load->view('template/header_v'); 
```

据我所知，您正在再次加载模板，包括标题和（如您可能在屏幕截图中看到的）列表项。

因此，我认为您需要指定另一个要使用的模板。

* * *

要在评论中为正在进行的讨论留出更多空间，请在此处进行编辑：

您需要两个不同的控制器，一个用于页面，一个用于每个选项卡。在主控制器中，您显示标题

```
$this->load->view('template/header_v'); 
```

但是在每个选项卡中，您不能再包含标题！由于您在列表项中包含了 href，因此 jQuery 选项卡将通过 AJAX 加载内容。

# java - 如何在 Java 中创建空包？

> ID：15765940
> 
> 赞同：0
> 
> 时间：2013-04-02T13:52:56.830
> 
> 标签：java, compilation, package

我有以下目录结构：

```
A.java
a
└── A.java 
```

A.java：

```
import a.*;

class A {
    public static void main(String[] args) {
        System.out.println("Hello Human");
    }
} 
```

a/A.java：

```
package a;
public class A {} 
```

它编译并运行：

```
$ javac A.java && java A
Hello Human 
```

但是当我删除`a/A.java`（但保留文件夹`a`）时，我无法再编译它：

```
$ rm a/A.java 
$ javac A.java && java A
A.java:1: package a does not exist
import a.*;
^
1 error 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:03:40.647

你可能会说这个包`a`是不可*观察*的：

> 一个包是可观察的当且仅当：
> 
> *   包含包声明的编译单元是可观察的（第 7.3 节）。
>     
>     
> *   包的子包是可观察的。

来源：[包的可观察性](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.4.3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T13:56:19.597

这是您的问题：

导入一个。*；

它正在寻找不存在的东西，因为该包不再存在。

从 A.java 中删除该行，它应该可以正常工作。

它找不到包的原因是因为文件夹中没有可编译的类，所以它不被识别为java包。

如果确实需要，创建空包的一种选择是指定一个 package-info.java 文件，该文件通常用作包的 javadoc。

# dropshadow - 如何使用easeljs创建图像的内阴影

> ID：15765942
> 
> 赞同：0
> 
> 时间：2013-04-02T13:53:07.003
> 
> 标签：dropshadow, easeljs

在 Actionscript 中制作内部阴影很容易。

只需使用

```
var myShadow:DropShadowFilter = new DropShadowFilter();
myShadow.inner = true; 
```

如何用easeljs做到这一点？没有实施吗？

# html - 多列文本

> ID：15765944
> 
> 赞同：1
> 
> 时间：2013-04-02T13:53:13.667
> 
> 标签：html, css

有没有办法指定文本必须在多列中并且列宽以百分比定义？

就像是 ：

```
<div style="width:20%; max-height:100px;" >Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante. Etiam bibendum iaculis libero, eget molestie nisl pharetra in. In semper consequat est, eu porta velit mollis nec Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales urna non odio egestas tempor. Nunc vel vehicula ante.
</div> 
```

如果文本溢出 div 绑定，则会显示一个新列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:56:53.427

目前不支持使用本机 HTML。目前必须使用 JavaScript 才能获得此功能。

请参阅：[http ://www.htmlgoodies.com/html5/tutorials/how-to-create-multi-columns-in-css3-and-javascript.html#fbid=uRKNCpHfmWY](http://www.htmlgoodies.com/html5/tutorials/how-to-create-multi-columns-in-css3-and-javascript.html#fbid=uRKNCpHfmWY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:18:45.133

这是一个 JavaScript 解决方案：

我在大学的最后一个学期做了一个 iPad WebApp，它应该是一个报纸应用程序。为了得到像行一样的报纸，我们使用了这个 jQuery 插件：

[http://archive.plugins.jquery.com/project/Columnizer](http://archive.plugins.jquery.com/project/Columnizer)

或：[http ://welcome.totheinter.net/columnizer-jquery-plugin/](http://welcome.totheinter.net/columnizer-jquery-plugin/)

您可以指定列的宽度、列的数量，并具有许多可能对您的目的有用的功能。（但我们实际上并不需要它们......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:30:27.980

如果您不必支持较旧的浏览器，我可能会建议您查看 CSS3 的多列功能：

[http://www.w3.org/TR/css3-multicol/](http://www.w3.org/TR/css3-multicol/)

# .htaccess - mod_rewrite 导致 500 服务器错误/失败/部分工作

> ID：15765955
> 
> 赞同：0
> 
> 时间：2013-04-02T13:53:31.413
> 
> 标签：.htaccess, mod-rewrite

我正在尝试将旧设计 ( [www.your-translations.com](http://www.your-translations.com) ) 永久重定向到 www.your-translations.com/_YT 上的新[设计](http://www.your-translations.com/_YT)。

在此过程中，网址必须从这种格式更改：

> www.your-translations.com/my_page.php **_**

到这种格式：

> www.your-translations.com/_YT/index.php?pge=my_page **_**

到目前为止，我已经做了很多尝试，最近的一次是：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST}    ^.*your\-translations.com.*$    [NC] 
RewriteRule ^(.*?)/([^/]*)\.php $1/_YT/index.php?pge=$2 [R=302]
RewriteCond %{HTTP_HOST} ^your-translations.com [NC] 
RewriteRule ^(.*)$ http://www.your-translations.com/$1 [R=302,L] 
```

这是我最好的尝试之一，因为它显然几乎什么都不做（以前的尝试导致 505 错误和无限循环）。将 URL 重写为“www”。工作正常。

我已经在不同的正则表达式测试器中测试了正则表达式，它似乎做了我期望它做的事情。

有人可以解释我做错了什么吗？

1.  该模式到底适用于什么？是 RewriteCond 匹配的吗？我输入的URI？相对路径？服务器上的实际路径？

在我尝试匹配之前有什么方法可以显示字符串？

1.  教程中的一些建议会导致我的服务器出现无限循环。所有版本的工作方式都相同吗？

不幸的是，虚拟主机技术支持似乎对 mod_rewrite 一无所知，所以我不能指望他们提供任何帮助。

根据我的 FTP 日志，我已经进行了大约 80 次尝试，在这里我真的可以用一只手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:18:39.737

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ^your-translations\.com$
RewriteCond %{REQUEST_URI} !^/_YT/([a-z0-9-_]+)\.php$
RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)\.php$
RewriteRule ^(.*) /_YT/index.php?pge=%1 [QSA]

RewriteCond %{HTTP_HOST} ^www\.your-translations\.com$
RewriteCond %{REQUEST_URI} !^/_YT/([a-z0-9-_]+)\.php$
RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)\.php$
RewriteRule ^(.*) /_YT/index.php?pge=%1 [QSA] 
```

在 RewriteCond 中，您必须在点之前而不是破折号之前键入反斜杠，因为 .htaccess 中的点表示任何字符，因此您需要 bslash 调用 is as dot。对不起，我在移动，所以我无法解释更多，但请随时询问您想了解的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:19:04.723

感谢[webmasterworld](http://www.webmasterworld.com/apache/4560719.htm)的一些解释，我能够修复我的 mod_rewrite 代码：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^your-translations.com [NC,OR]
RewriteCond %{HTTP_HOST} ^www.your-translations.com [NC]
RewriteCond %{REQUEST_URI} !="^.*?/.*" 
RewriteRule ^([^/]*)\.php$ http://www.your-translations.com/_YT/index.php?pge=$1 [R=302,L]
RewriteRule ^$ http://www.your-translations.com/_YT/ [R=302,L] 
```

到目前为止，这似乎工作正常（触摸木头）。感谢仆人的帮助。

# c - C语言中的DLL制作和链接

> ID：15765957
> 
> 赞同：0
> 
> 时间：2013-04-02T13:53:31.800
> 
> 标签：c, dll, header

我试图在 C 中创建一个 dll，所以我发现了这个：

[http://forum.codecall.net/topic/47543-how-to-create-and-use-dll-in-c/#gsc.tab=0](http://forum.codecall.net/topic/47543-how-to-create-and-use-dll-in-c/#gsc.tab=0)

我关注了上一篇文章，但每当我在客户端文件中使用函数“sum”时，我总是会遇到此错误：

[错误] C:\Users\Siegfred\Desktop\dll testing\test.c:7: undefined reference to ` *imp* _sum'

注意： A. 我在名为 C-free 的 IDE 中使用 MinGW 5。B. 在我为 dll 编译头文件和 c 文件后，IDE/编译器会查找未生成的 .exe。

我该如何解决？谢谢你。

# javascript - 在动态创建的文本框中求和值

> ID：15765960
> 
> 赞同：0
> 
> 时间：2013-04-02T13:53:35.363
> 
> 标签：javascript, jquery

我正在从用户输入（JSFiddle[链接](http://jsfiddle.net/XeuB8/11/)）动态创建一个表。我现在想总结表格中的文本框。为此，我为所有输入框添加了一个通用类，并为结果文本框添加了一个 id。但是，当我在文本框中输入值时，不会触发 onchange 事件。我在这里想念什么？

这是我的表格生成代码和文本框值总和的 JQuery：

```
$(document).ready(function () {
    $('#amortTable').click(function () {
        //User will input number of payments
        var i = $('#numOfRows').val();
        var s2 = "<table><th>Month No.</th><th>Cash Outflow</th>"
        for (var j = 0; j < i; j++) {
            s2 += "<tr><td>" + (j + 1) + "</td><td><input type='text' class='payment' id='payment" + (j + 1) + "' /></td></tr>";
        }
        s2 += "<tr><td></td><td><input type='text' id='paymentSum' readonly='readonly' style='background-color:#C0C0C0' /></td></tr></table>";
        $('#amortizationTable').html(s2);
    });

    $('.payment').on("change", function () {
        var sum = 0;
        $(".payment").each(function () {
            if (!isNaN(this.value) && this.value.length != 0) {
                sum += parseFloat(this.value);
            }
        });
        $('#paymentSum').val(sum);
    });    
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:56:09.110

你应该使用：

```
$("#amortizationTable").on("change", ".payment", function () {
    // your code from above
}); 
```

应用于您的 jsFiddle - [http://jsfiddle.net/XeuB8/17/](http://jsfiddle.net/XeuB8/17/)

请注意，我实际上只更改了 1 行（已注释），它似乎有效。

这样做的原因是因为您`change`在 DOM 准备好时绑定了事件。但是您正在动态添加行（和`input`元素）。因此，新元素不会将事件绑定到它们。

我提供的代码通过将一个事件处理程序附加到表元素来解决这个问题。当任何事情在表中的任何位置触发`change`事件时，它会检查元素是否具有`payment`类。如果是，它将在其上下文中执行处理程序。否则，不会为此执行处理程序`change`。

这是 jQuery 文档中关于它的部分：http `on`: [//api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:59:52.767

'.payment' 的“更改”事件未触发。我建议将求和逻辑放在点击处理程序中。

# c# - 如何将数据集中两个表中的数据分别显示到水晶报表？

> ID：15765961
> 
> 赞同：0
> 
> 时间：2013-04-02T13:53:42.510
> 
> 标签：c#, crystal-reports

```
 datasetForReceiptObj.genralTable.Clear();
        datasetForReceiptObj.subjectTable.Clear();
        datasetForReceiptObj.genralTable.AddgenralTableRow(receiptNo, studentName, category, studentBranch);
        for (int i = 0; i < subject.Count; i++)
        {
            datasetForReceiptObj.subjectTable.AddsubjectTableRow(subject[i], amountRec[i]);
        }
        crystalReportForReceiptObj.SetDataSource(datasetForReceiptObj);
        crystalReportViewer1.ReportSource = crystalReportForReceiptObj; 
```

注意：genralTable 包含一行

```
 i.e.    111 abc degree cse

subjectTable contains two rows 

    i.e.     Java 2000
             C#   2000 
```

报告显示如下：

```
 111 abc degree cse Java 2000
   111 abc degree cse   C# 2000 
```

即重复 genralTable 内容，我不想重复 genralTable 内容

喜欢

```
 111 abc degree cse Java 2000
                            C#   2000 
```

我怎样才能显示这样的输出？

# html - @media only screen and (max-width: 479px) 不适用于移动设备

> ID：15765962
> 
> 赞同：14
> 
> 时间：2013-04-02T13:53:42.967
> 
> 标签：html, css, responsive-design

我的移动版本（最大宽度：479px）没有显示 #111 作为背景颜色。相反，#000 显示为背景颜色。请帮我。

```
@media only screen and (max-width: 1024px) {
 body{
   background-color:#ff0000;
  }
}

@media only screen and (max-width: 767px)
{
 body{
   background-color:#000;
  }
}

@media only screen and (max-width: 479px)
{
 body{
   background-color:#111;
  }
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-02T15:40:56.220

在文档的开头，确保您有

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

如果您忽略它，那么许多设备将缩放页面以适应视口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T09:09:55.063

您是否指定了视口元标记？我建议也将 479 更改为 480。

这是一个视口元标记的示例 - 这是我在自己的响应式网站上使用的。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:00:37.770

也许你可以通过使用指定

```
@media only screen and (min-width:768px) and (max-width: 1024px) {} 
```

因为如果屏幕宽度为 200 像素，它将符合所有其他规则，它不会超过其宽度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:18:49.677

尝试使用设备宽度而不仅仅是屏幕尺寸。许多移动/平板设备将在概览中打开页面，因此屏幕大小将被忽略。

一些移动设备也会响应`@media handheld`选择器。

```
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px)
/*Ipad*/
@media only screen and (min-device-width : 320px) and (max-device-width : 480px)
/* Smartphones (portrait and landscape)*/
@media only screen and (-webkit-min-device-pixel-ratio : 1.5)
/*Iphone 4*/
@media only screen and (min-device-pixel-ratio : 1.5)
/*Iphone 4*/

@media handheld and (max-width: 960px)
/*handheld*/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-17T07:42:50.080

签到标签

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-04T21:15:56.963

我遇到了同样的问题，但是用@media (max-device-width: 400px) 更改@media (max-width: 400px) 对我有用，希望它对你有帮助

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-02T14:22:07.430

为什么不使用 Twitter Bootstrap？ [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# string - 我试图强制脚本接受用户输入，但它在第二个输入时中断

> ID：15765965
> 
> 赞同：0
> 
> 时间：2013-04-02T13:53:53.323
> 
> 标签：string, powershell, input, directory

我是 Power shell 的新手，我似乎无法理解这个。

当您取出输入并为每个 $number 和 $Name 放入实际值时，该代码起作用，如底部示例所示。我发现与指定值不同，第 7 行 char 13 不能是 -$Name，而是必须是 $Name。这样做之后，它告诉我 ln 15 char 13 “找不到接受参数“-”的位置字符。其中“-”= $Name。

我需要改变什么才能让它发挥作用？我已经厌倦了使用 [parameter(Mandatory=$true,name='What would you like your folder to be named: ')] 但我似乎也无法让它工作。

任何帮助将不胜感激。

```
$number = read-host "How Many Folders would you like to create: "
$Name = read-host "What would you like your folder to be named: "
$intFolders = $number 
$intPad
$i = 1

New-Variable -$Name strPrefix -Value "$Name" -Option constant

    do {

        if ($i -lt $number)
            {$intPad=0 
                new-item -path c:\mytest -$Name $strPrefix$intPad$i -type directory}
        else
            {new-item -path c:\mytest -$Name $strPrefix$i -type directory}
            $i++}
        until ($i -eq $intFolders+1) 
```

这是我能够开始工作的下面的代码，但我想确保当我离开时，这里的人们仍然可以使用它来满足他们的需求，因为他们不了解编码。

```
$intFolders = 500
$intPad
$i = 1

New-Variable -Name strPrefix -Value "0001_" -Option constant

    do {

        if ($i -lt 500)
            {$intPad=0 
                new-item -path c:\mytest -name $strPrefix$intPad$i -type directory}
        else
            {new-item -path c:\mytest -name $strPrefix$i -type directory}
            $i++}
        until ($i -eq $intFolders+1) 
```

多亏了布鲁斯，这里是工作的最终代码，它完全可以做到它应该有的:)

```
[int]$start = read-host "What number would you like your folder to start at"
[int]$number = read-host "How Many Folders would you like to create"
$Name = read-host "What would you like your folder to be named"
$intFolders = $number 
$intPad
$i = $start

New-Variable -Name strPrefix -Value "$Name" -Option constant

    do {

        if ($i -lt 10)
            {$intPad="" 
                new-item -path c:\mytest -Name $strPrefix$intPad$i -type directory}
        else
            {new-item -path c:\mytest -Name $strPrefix$i -type directory}
            $i++}
        until ($i -eq $intFolders+1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:22:30.373

改变

```
New-Variable -$Name strPrefix -Value "$Name" -Option constant
```

到

```
New-Variable -Name strPrefix -Value "$Name" -Option constant
```

与新项目行中的 -$name 相同。请参阅 Get-Help New-Variable 和 Get-Help New-Item。

# c - 在c中打印结构值

> ID：15765970
> 
> 赞同：0
> 
> 时间：2013-04-02T13:54:04.930
> 
> 标签：c

这是我在 c 中的代码

add_new_account 内部使用的是 scanf。

当我在 main 函数中打印它时，它会输出一个我键入的不同值。

有人可以帮我解决这个问题吗？

感谢您的帮助

```
struct account
{
char* F_name;
char* L_name;
int IC_No;
char* address;
char* e_address;
int c_number;
};

void add_new_account(struct account A[]){
int y=0;
char First_name[20],Last_name[20],addres[20],email[20];
int IC,number;
struct account add_account;
printf("First name    :");
scanf("%s",First_name);
add_account.F_name=First_name;
printf("Last name     :");
scanf("%s",Last_name);
add_account.L_name = Last_name;
printf("IC No.        :");
scanf("%d",&IC);
add_account.IC_No = IC;
printf("Address       :");
scanf("%s",addres);
add_account.address = addres;
printf("Email address :");
scanf("%s",email);
add_account.e_address = email;
printf("Contact number:");
scanf("%d",&number);
add_account.c_number = number;
A[y] = add_account;
}
int main(){
struct account A[20];
int y=0;
login();
add_new_account(&A);
printf("First name    :");
printf("%c\n",A[y].F_name);
printf("Last name     :");
printf("%s\n",A[y].L_name);
printf("IC No.        :");
printf("%d\n",A[y].IC_No);
printf("Address       :");
printf("%s\n",A[y].address);
printf("Email address :");
printf("%s\n",A[y].e_address);
printf("Contact number:");
printf("%d\n",A[y].c_number);
scanf("%d",&y);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:57:25.763

`add_new_account()`包含字符串的成员之外`struct`都是悬空指针，因为它们指向该函数本地变量的地址。这将地址分配`First_name`给`add_account.F_name`：

```
add_account.F_name=First_name; 
```

它确实执行复制。您需要复制局部变量的内容以使它们在函数之外可用。使用示例[`strcpy()`](http://en.cppreference.com/w/c/string/byte/strcpy)：

```
add_account.F_name = malloc(strlen(First_name) + 1);
if (add_account.F_name)
{
    strcpy(add_account.F_name);
} 
```

而不是使用[`malloc()`](http://en.cppreference.com/w/c/memory/malloc)替代方法是在 中使用固定大小的数组`struct`，因为代码已经使用固定大小的数组进行读取。如果您选择使用`malloc()`记住[`free()`](http://en.cppreference.com/w/c/memory/free)什么是`malloc()`d。

`scanf()`此外，为了防止缓冲区溢出，请在调用中指定要读取的最大字符数作为格式说明符的一部分：

```
scanf("%19s", First_name); 
```

其中最大字符数必须比要填充的数组中的最大元素数少一，另一个元素用于`scanf()`写入的空终止字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:58:12.910

例如，当您使用`scanf("%s",First_name);`例如读取字符串时，您正在将值读取到您在函数堆栈上分配的数组中。
之后，您正在分配

```
add_account.F_name=First_name; 
```

这样，您将堆栈中的数组地址分配给您的指针。当您的函数返回时，此地址和值将丢失。您需要使用分配内存`malloc`，然后使用`strncpy`将输入复制到指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:21:14.327

尝试这样的结构并省略函数中局部变量的使用。

```
typedef struct
{
   char F_name[20];
   char L_name[20];
   int IC_No;
   char address[20];
   char e_address[20];
   int c_number;
} account;

void add_new_account(account *A)
{
   printf("First name    :");
   scanf("%s", A->F_name);
   ... 
```

它看起来不是更好，更具可读性吗？

您还必须更改 main() 代码：

```
int main(){
    account A[20];
    int y=0;
    login();
    add_new_account(&A[y]);
    printf("First name    :");
    printf("%c\n",A[y].F_name);
    ... 
```

# excel - 值之间的条件格式？我需要重组我的电子表格吗？

> ID：15765971
> 
> 赞同：0
> 
> 时间：2013-04-02T13:54:06.367
> 
> 标签：excel, excel-formula

我想格式化每行中开始日期到结束日期范围内的所有单元格（基本上用颜色填充它们）。

例如，在下图中，您可以看到单元格`B8`并分别包含开始日期和`C8`结束日期。它格式正确，在单元格中着色。`1/1/2013``3/24/2013``D8:08`

![条件格式示例](https://i.stack.imgur.com/zDpfw.png)

标题单元格包含格式为文本的日期。例如，单元格`D3`（第一个 J）实际上是 2013 年 1 月 1 日的日期。同样，单元格`E3`（第二个 J）实际上是 2013 年 1 月 8 日的日期，单元格`F3`是 2013 年 1 月 15 日，单元格是 2013 年`G3`1 月 22 日。每个月重复，仅列出每个月的 1 日、8 日、15 日和 22 日。

**问题**：我相信我已经让它大部分工作了，但如果日期不在标题单元格中分配的日期之外，它似乎格式不正确。

例如，如果我指定 2013 年 5 月 31 日的开始和结束日期，则不会突出显示任何单元格。见下图。

![在此处输入图像描述](https://i.stack.imgur.com/yCTDn.png)

我认为这是因为我的标题单元格中只有 2013 年 5 月 22 日，但我希望每个月将其保持在 4 周。

下面是我用来格式化的公式，然后我将其应用于整个 range `D8:AY43`，这本质上是整个任务层次结构。

`=(D$3>=$B8)*(D$3<=$C8)`

无论如何要更改此公式以适应我的问题（如果单元格超出月份列标题中指定的值范围，则单元格不会突出显示？）或者我是否必须重组我的电子表格？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:35:25.547

每月保持“4 周”的另一种方法是更改​​标题列中的日期以反映“周”的结束，而不是开始。因此，不要使用 1 月 1 日、1 月 8 日、1 月 15 日等，而是使用 1 月 5 日、1 月 12 日、1 月 19 日和 1 月 31 日。你需要调整你的公式来解释这种变化，但它会保留结构你的工作簿。

不是 100% 确定你在做什么（看起来像甘特图？）但看起来你只是想评估 D 列中的日期是否在 B 和 C 列的开始日期和结束日期之间，在这种情况下：

`=AND($B8<=D$3,$C8>=D$3)*1`

这将测试 D3 中的日期是否介于列 B 和 C 中定义的开始/结束日期之间，如果为 true，则返回“1”，如果为 false，则返回“0”。

要将其置于条件格式中，请执行以下规则：

`=AND($B8<=D$3,$C8>=D$3)*1=1`

以下是条件格式对话框中规则的外观：

![条件格式规则](https://i.stack.imgur.com/vCuKp.jpg)

# magento - 注册后magento自定义重定向

> ID：15765977
> 
> 赞同：0
> 
> 时间：2013-04-02T13:54:31.180
> 
> 标签：magento, redirect, registration

当“客户”完成在我的magento网站上注册时，我几天以来一直在尝试更改重定向。实际上，注册完成后，您将重定向到您的帐户。我只想重定向到 index.php （我网站的主页）。我是新手，我只想更改几行代码。例如，我将无法创建事件。

有人能帮我吗 ？

我认为页面是 AccountController.php 和代码：

```
 protected function _welcomeCustomer(Mage_Customer_Model_Customer $customer,     $isJustConfirmed = false)
    {
        $this->_getSession()->addSuccess(
        $this->__('Thank you for registering with %s.', Mage::app()->getStore()->getFrontendName())
        );

        $customer->sendNewAccountEmail(
            $isJustConfirmed ? 'confirmed' : 'registered',
            '',
            Mage::app()->getStore()->getId()
        );

        $successUrl = Mage::getUrl('/*/*/index', array('_secure'=>true));
        if ($this->_getSession()->getBeforeAuthUrl()) {
            $successUrl = $this->_getSession()->getBeforeAuthUrl(false);
        }
        return $successUrl;
    } 
```

我试图改变这一行：

```
$successUrl = Mage::getUrl('/*/*/index', array('_secure'=>true)); 
```

至

```
$successUrl = Mage::getUrl('index.php', array('_secure'=>true)); 
```

但什么也没发生……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-29T12:32:22.353

登录、注销和注册后的重定向是 magento 中非常常见的问题。请找到下面的代码，它可以帮助你。

```
public function customerRegistration(Varien_Event_Observer $observer)    
{    
    $_session = Mage::getSingleton('customer/session');  
    $_session->setBeforeAuthUrl(CustomUrl);    
} 
```

Customurl 是您要在注册后重定向的 url。

如果您想要在登录、注销和注册后为您的电子商务网站自定义 URL 重定向的完整解决方案。自定义重定向扩展可以帮助您。单击链接以获取扩展名。[http://www.magentocommerce.com/magento-connect/custom-redirection.html](http://www.magentocommerce.com/magento-connect/custom-redirection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:00:16.263

该`Mage::getUrl()`方法是围绕`$module/$controller/$action`Magento 路由设计的。如果您只想重定向到主页，可以使用：

```
$successUrl = Mage::getBaseUrl(); 
```

# c# - WPF 设计时视图模型

> ID：15765986
> 
> 赞同：6
> 
> 时间：2013-04-02T13:54:56.220
> 
> 标签：c#, .net, wpf, silverlight, xaml

我有一个简单的视图模型，其中包含一个单元列表，这在运行时显示良好，但我希望该列表在设计时显示。根据周围的一些问题，我尝试了以下方法，但它不起作用，有人可以帮忙吗？

```
//In resources
<local:MainViewModel x:Key="DesignViewModel"/> 
```

主持人

```
<ItemsControl ItemsSource="{Binding Units}" d:DataContext="{Binding Source={StaticResource DesignViewModel}}" Background="Transparent"> 
```

视图模型

```
 public MainViewModel()
    {
        Units = new ObservableCollection<UnitViewModel>();
        Units.Add(new UnitViewModel
        {
            ID = "1",
            Degrees = "80",
            IsMaster = true
        });
        for (int i = 0; i < 10; i++)
            Units.Add(new UnitViewModel
            {
                ID = "2",
                Degrees = "40",
                IsMaster = false
            });
    }        
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T14:01:40.067

有一篇 stackoverflow 帖子展示了如何使用 d:designinstance 将设计时间管理添加到您的视图中。看看这个。

[关于 ViewModel 管理的问题（设计时与运行时）](https://stackoverflow.com/questions/6696174/question-about-viewmodel-management-designtime-vs-run-time)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T14:32:32.857

你能分享 UnitViewModel 的代码定义吗？请记住，绑定仅适用于属性，而不适用于打开的字段。我尝试了您的代码并为 Units 创建了一些基本的结构字段。那些没有用。所以，我猜你可能使用的是字段而不是属性：

```
public class MainViewModel
    {
        public MainViewModel()
        {
            Units = new ObservableCollection<UnitViewModel>();
            Units.Add(new UnitViewModel
            {
                ID = "1",
                Degrees = "80",
                IsMaster = true
            });
            for (int i = 0; i < 10; i++)
                Units.Add(new UnitViewModel
                {
                    ID = "2",
                    Degrees = "40",
                    IsMaster = false
                });
        }

        public ObservableCollection<UnitViewModel> Units {
            get;
            set;
        }
    }

    public struct UnitViewModel
    {
        public string ID { get; set;}
        public string Degrees { get; set;}
        public bool IsMaster { get; set;}

    }

} 
```

我最后尝试了这段代码，没有任何问题。

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" x:Class="WpfApplication1.MainWindow"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" d:DesignWidth="704">
    <Window.Resources>
        <local:MainViewModel x:Key="DesignViewModel" />
        <DataTemplate x:Key="DataTemplate2">
            <Grid >
                <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding ID}" VerticalAlignment="Top"/>
            </Grid>
        </DataTemplate>
    </Window.Resources>
    <Grid d:DataContext="{StaticResource DesignViewModel}">
        <ItemsControl HorizontalAlignment="Left" Height="450" VerticalAlignment="Top" Width="632" ItemsSource="{Binding Units}" 
            />
    </Grid>
</Window> 
```

添加 ItemTemplate 以正确设置数据表示的样式。

# wpf - WPF自定义列表框selectedItem与按钮

> ID：15765988
> 
> 赞同：1
> 
> 时间：2013-04-02T13:55:17.437
> 
> 标签：wpf, data-binding, listbox

我设法构建了一个自定义列表框，其中每个项目都是从数据库中加载的，在堆栈面板中显示名称和姓氏。在这两个文本框之后应该有一个按钮，它正确绑定到 ViewModel 的 ICommand。该按钮正确调用了正确的方法，但它不会删除 selectedPerson，因为该对象为空。

这是列表框的 WPF

```
<Style x:Key="CustomHorizontalListbox" TargetType="{x:Type ListBox}">
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
    <Setter Property="BorderThickness" Value="0" />
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <Border BorderBrush="Black" BorderThickness="2">
                <StackPanel Orientation="Horizontal" Width="200" Margin="0,0,0,0">
                    <TextBox Text="{Binding FirstName}" Width="60" BorderThickness="0" Margin="0" IsReadOnly="True"></TextBox>
                    <TextBox Text="{Binding LastName}" Width="100" BorderThickness="0" Margin="0" IsReadOnly="True"></TextBox>
                    <Button Width="20" Height="20" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBox}}, Path=DataContext.OnDeletePatient}" CommandParameter="{Binding}"></Button>
                </StackPanel>
                </Border>
            </DataTemplate>
        </Setter.Value>                
    </Setter>
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <WrapPanel></WrapPanel>
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是 ViewModel 上的相对方法

```
private void DeletePatient()
    {
        patientsManager.DeletePatient(SelectedPatient);
        ListOfPatients = new ObservableCollection<RealPatient>(patientsManager.GetAllRealPatients());
        SelectedPatient = null;
    } 
```

这就是自定义列表框包含在视图中的方式

```
<ListBox Grid.Row="2" Grid.Column="3" Style="{StaticResource CustomHorizontalListbox}" ItemsSource="{Binding ListOfPatients}" SelectedItem="{Binding SelectedPatient}">

    </ListBox> 
```

所以问题是 DeleteMethod 处的断点显示 SelectedPatient = null..

我想念什么？...即使我单击列表项而不是单个按钮，SelectedPatient 也不会改变

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:08:23.063

这是我的完整示例应用程序：

```
 <Window.Resources>
    <Style x:Key="CustomHorizontalListbox" TargetType="{x:Type ListBox}">
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Border BorderBrush="Black" BorderThickness="2">
                        <StackPanel Orientation="Horizontal" Width="200" Margin="0,0,0,0">
                            <TextBox Text="{Binding FirstName}" Width="60" BorderThickness="0" Margin="0" IsReadOnly="True"></TextBox>
                            <TextBox Text="{Binding LastName}" Width="100" BorderThickness="0" Margin="0" IsReadOnly="True"></TextBox>
                            <Button Width="20" Height="20" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBox}}, Path=DataContext.OnDeletePatient}" CommandParameter="{Binding}"></Button>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <WrapPanel></WrapPanel>
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="{x:Type ListBoxItem}">
        <Style.Resources>
            <Storyboard x:Key="OnGotKeyboardFocus1">
                <BooleanAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="{x:Null}" Storyboard.TargetProperty="(Selector.IsSelected)">
                    <DiscreteBooleanKeyFrame KeyTime="00:00:00" Value="True"/>
                </BooleanAnimationUsingKeyFrames>
            </Storyboard>
        </Style.Resources>
        <Style.Triggers>
            <EventTrigger RoutedEvent="Keyboard.GotKeyboardFocus">
                <BeginStoryboard Storyboard="{StaticResource OnGotKeyboardFocus1}"/>
            </EventTrigger>
        </Style.Triggers>
    </Style>
</Window.Resources>
<Window.DataContext>
    <Regions:ViewModel/>
</Window.DataContext>
<Grid>
    <ListBox Style="{StaticResource CustomHorizontalListbox}" ItemsSource="{Binding ListOfPatients}" SelectedItem="{Binding SelectedPatient}" >

    </ListBox>
</Grid> 
```

这里是我`SelectedPatient`在 ViewModel 中的属性的定义：

```
 private Patient _SelectedPatient;
    public Patient SelectedPatient
    {
        get { return _SelectedPatient; }
        set
        {
            _SelectedPatient = value;
            NotifyPropertyChanged(m => m.SelectedPatient);
        }
    } 
```

每当您单击 ListBox 项目行的任何位置时，都会设置您选择的项目。

我希望我能更深入地解释为什么会这样，但我在 MSDN 论坛中找到了它：http: [//social.msdn.microsoft.com/Forums/en-US/wpf/thread/1642c5f9-e731-4a3d-9eed -0f574d90d925](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/1642c5f9-e731-4a3d-9eed-0f574d90d925) 我为我正在使用的应用程序使用了该修复程序。

# c# - GDI+中两个形状之间的空白

> ID：15765992
> 
> 赞同：3
> 
> 时间：2013-04-02T13:55:38.113
> 
> 标签：c#, gdi+

我正在尝试在 GDI+ (C#) 中绘制自定义阴影。我一直有这种尴尬的表情： ![预习](https://puu.sh/2sv0o)

我想我可以通过在弧的宽度上添加一个像素来解决它，但是形状会重叠。 [预览 http://puu.sh/2sv2N](http://puu.sh/2sv2N)

我完全不知道是什么导致了这小块白色。

这是我的代码：

```
Rectangle drawRect = new Rectangle(10, 10, 400, 400);
radius = 10;
// TOP //
Rectangle topRect = new Rectangle(drawRect.X + radius, drawRect.Y, drawRect.Width - 2 * radius, radius);
LinearGradientBrush topBrush = new LinearGradientBrush(new Rectangle(topRect.X, topRect.Y - 1, topRect.Width,topRect.Height + 2), firstColor, secondColor, 270f);
g.FillRectangle(topBrush, topRect);
topBrush.Dispose();

// LEFT //
Rectangle leftRect = new Rectangle(drawRect.X, drawRect.Y + radius, radius, drawRect.Height - 2 * radius);
LinearGradientBrush leftBrush = new LinearGradientBrush(new Rectangle(leftRect.X - 1, leftRect.Y, leftRect.Width + 2, leftRect.Height), firstColor, secondColor, 180f);
g.FillRectangle(leftBrush, leftRect);
leftBrush.Dispose();

// TOP LEFT //
GraphicsPath topLeftPath = new GraphicsPath();
topLeftPath.StartFigure();
topLeftPath.AddArc(new Rectangle(drawRect.X, drawRect.Y, 2 * radius, 2 * radius), 180, 90);
topLeftPath.AddLine(new Point(drawRect.X + radius, drawRect.Y), new Point(drawRect.X + radius, drawRect.Y + radius));
topLeftPath.AddLine(new Point(drawRect.X + radius, drawRect.Y + radius), new Point(drawRect.X, drawRect.Y + radius + 1));
topLeftPath.CloseFigure();
PathGradientBrush topLeftBrush = new PathGradientBrush(topLeftPath);
topLeftBrush.CenterPoint = new PointF(drawRect.X + radius, drawRect.Y + radius);
topLeftBrush.CenterColor = firstColor;
topLeftBrush.SurroundColors = new Color[] { secondColor };
g.FillPath(topLeftBrush, topLeftPath);
topLeftBrush.Dispose();
topLeftPath.Dispose(); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:45:36.840

感谢 LarsTech，我得到了有效的解决方案。

```
e.Graphics.PixelOffsetMode = PixelOffsetMode.Half; 
```

那完成了工作。

谢谢 ！

# iphone - 当iphone处于飞行模式时，我们可以获得位置详细信息（纬度，经度）吗？

> ID：15765993
> 
> 赞同：1
> 
> 时间：2013-04-02T13:55:42.897
> 
> 标签：iphone, xcode, gps, cllocationmanager, airplane

我想使用我的应用程序获取纬度和经度值，当 iphone 处于飞行模式时。GPS 在飞行模式下工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:58:03.777

[http://support.apple.com/kb/ht1355](http://support.apple.com/kb/ht1355)

据Apple称，GPS在飞行模式下处于关闭状态。

# c# - 如何在我的 C# windows 表单中自动输入上传表单？

> ID：15765994
> 
> 赞同：0
> 
> 时间：2013-04-02T13:55:42.957
> 
> 标签：c#, winforms, file-upload

我有一个带有文件上传对话框的网页。我正在 Windows 窗体应用程序中的 WebBrowser 控件中查看此页面。我想自动输入并提交表格。

我意识到这个问题已经被问过（很多）。我见过这么多，我数不清了。但是没有一个解决方案对我有用。

我的网页看起来像

```
<form method="post" enctype="multipart/form-data">
   <input id="file" name="file" type="file"/>
   <input type="submit"/>
</form 
```

我的 C# 应用程序看起来像

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        webBrowser1.Document.GetElementById("file").Focus();
        SendKeys.Send("C:\\Users\\Merlin Sweden\\Desktop\\extraDirTest\\myImage.jpg{ENTER}");
    }
} 
```

从我尝试过的所有事情来看，至少感觉我已经接近了。无论如何，在执行对话框时会打开并输入部分路径（weden\Desktop\extraDirTest\myImage.jpg）。我认为这可能是某种最大输入长度，我在路径中添加了另一个目录（extraDirTest），发现这不是问题。

所以我认为它与空间有关，但我找不到任何替代进入空间的方法。此外，如果我发送的 PATH 不正确，则对话框根本不会打开。如果我在表单上放置一个文本框并尝试在其中输入它，那么一切正常。

我不明白发生了什么或我应该如何解决这个问题。

谁能帮我？

谢谢

**编辑** 也许值得一提的是，将文件移动到“C:\myImage.jpg”并更改路径不会做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:41:24.253

只输入一半的原因是因为“焦点”不会触发对话框。空间可以。所以对话框只在空格之后打开，并且在它进入之后发送任何内容。

由于某种原因，空格后面的字符也被遗漏了，可能与时间有关。

我已经完成了

```
SendKeys.Send("  C:\\extraDirTest\\sednasoftwaread.jpg{ENTER}"); 
```

之后您也不能立即提交表格，因为表格将在填写输入之前提交。睡觉也不是答案，因为对话框一直在睡觉。使用计时器可以在输入输入后提交表单。

大家感谢您的帮助！

# c# - 如何减少数字的位数？

> ID：15765999
> 
> 赞同：-3
> 
> 时间：2013-04-02T13:55:52.073
> 
> 标签：c#, serialization, numbers, figures, reducing

有没有办法减少数字的位数？

例子：

```
double d = 222222222222222224444444444444.0 
```

例如，我想“序列化”它`17[2]13[4]`。

这个想法是减少数字使用的“字符”的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:39:47.047

> 双 d = 222222222222222224444444444444.0

一开始你不可能有那么大的两倍。

> 例如，我想像 17[2]13[4] 那样“序列化”它。这个想法是减少数字使用的“字符”的数量。

无论其值如何，双精度都只占用 8 个字节。这似乎没有任何实际意义。