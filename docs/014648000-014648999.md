# StackOverflow 问答 14648000-14648999

# regex - 匹配字母数字，仅数字除外

> ID：14648004
> 
> 赞同：0
> 
> 时间：2013-02-01T14:02:47.107
> 
> 标签：regex, string-matching

给出这个特定正则表达式背后的想法的原始问题是[Regex to find content not in quotes](https://stackoverflow.com/q/14647560/1190388 "正则表达式查找不在引号中的内容")。

让我们稍微修改一下原始示例：

```
INSERT INTO Notifify (to_email, msg, date_log, from_email, ip_from)
VALUES
    (
        :to_email,
        'test teste nonono',
        :22,
        :3mail,
        :ip_from
    ) 
```

我知道在任何编程语言中都不允许以数字开头的变量，但这并不意味着我们不能有需要仅匹配`:to_email`or `:3mail`and `:ip_from`and not的场景`:22`。

我们如何进行？我和我的朋友以这种方式尝试过（理论上只是）->

*   将所有字符串存储在一个集合中
*   减去只包含数字的集合

对于在线测试，我正在使用[RegExr](http://gskinner.com/RegExr/ "正则表达式")。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T09:20:03.423

前瞻将在这里工作

```
\b(?=\d*[a-z])\w+\b 
```

一样

```
\b\d*[a-z]\w*\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:09:42.477

我不知道您使用哪种编程语言，但是您为什么不能检查行是否匹配：

```
^\s*:[0-9]+,?\s*$ 
```

并采取无与伦比的路线？

# bash - 是否可以避免执行某个命令？

> ID：14648006
> 
> 赞同：5
> 
> 时间：2013-02-01T14:02:37.483
> 
> 标签：bash

我必须避免在 bash 脚本中执行某个命令。
我想使用 preexec 陷阱来做到这一点。

假设我想避免命令'source'只是为了axample。我所做的基本上如下：

```
#!/bin/bash

function preexec ()
{
    if test $( echo "$BASH_COMMAND" | cut -d " " -f1 ) == "source"
        then
            echo ">>> do not execute this"
        else
            echo ">>> execute this"

    fi
}
trap 'preexec' DEBUG

echo "start"
source "source.sh"
echo "go on"

exit 0 
```

这个想法很好用，但此时我不知道如何避免执行所述命令。
知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:17:22.553

一种解决方法是为该命令定义一个不执行任何操作的别名，并在脚本完成后取消定义它。必须在脚本本身中声明别名才能使其工作：

```
alias source=:
## The actual script source here...
unalias source 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:04:59.497

`source`使用名为 的函数重新定义命令`source`。

函数可以导出。

```
source() { builtin source /dev/null; return 0; }
source() { read < /dev/null; return 0; }
source() { :; return 0; }
export -f source 
```

# web-services - 不提供帐号的Web服务登录..可以吗？

> ID：14648008
> 
> 赞同：0
> 
> 时间：2013-02-01T14:02:51.590
> 
> 标签：web-services, soap, netsuite

是否有可能在 Netsuite 网络服务中只询问用户名和密码，并在成功验证后提示与该凭据关联的可用帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:24:53.067

这篇文章包含指向与此相关的 Netsuite 文档的链接以及示例代码。 [https://dreamxtream.wordpress.com/2012/11/23/new-data-centers-for-netsuite-accounts/](https://dreamxtream.wordpress.com/2012/11/23/new-data-centers-for-netsuite-accounts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:08:40.917

问题已解决，无法使用 Web 服务，但可以通过 REST 完成。

使用以下网址：

[https://rest.netsuite.com/rest/roles](https://rest.netsuite.com/rest/roles)

..并在标题中传递授权：

NLAuth nlauth_email=my@email.com, nlauth_signature=mypassword

[http://goo.gl/qlEP2](http://goo.gl/qlEP2)

# symfony - 有没有办法在 SQLFilter 中访问 symfony2 容器？

> ID：14648009
> 
> 赞同：2
> 
> 时间：2013-02-01T14:02:52.840
> 
> 标签：symfony, service, dependency-injection, doctrine, doctrine-orm

是否有可能在 SQLFilter 中获取 symfony2 的服务容器，或者我可以直接将服务用作 SQLFilter？

我知道这不是一种“干净”的方式，但我必须在查询的最终提交被触发之前直接执行几次检查（因为我必须将条件附加到 WHERE 语句，我不能使用生命周期-此时发生的事件）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T16:11:18.143

它不干净，但你可以试试这个：

```
<?php

class MyBundle extends Bundle 
{
public function boot()
{
    $em = $this->container->get('doctrine.orm.default_entity_manager');
    $conf = $em->getConfiguration();
    $conf->addFilter(
        'test',
        'Doctrine\Filter\TestFilter'
    );

    $em->getFilters()->enable('test')->setContainer($this->container);
}
} 
```

# asp.net-mvc - ASP.NET MVC 中的绑定

> ID：14648012
> 
> 赞同：1
> 
> 时间：2013-02-01T14:03:07.680
> 
> 标签：asp.net-mvc, binding

我的问题是关于 MVC 中的绑定。你能帮我吗？

我的控制器：

```
public class TestController : Controller
 {
        //
        // GET: /Test/
        [HttpGet]
        public ActionResult Index()
        {
            return View(new TestModel());
        }
        public ActionResult Index(TestModel test)
        {
           return View(test);
        }
 } 
```

我的观点：

```
@model MvcApplication1.Models.TestModel

@using (Html.BeginForm())
{
@Html.TextBoxFor(x => x.test) // or x.Test
<input type="submit" value="Set"/>
} 
```

我的模型：

```
public class TestModel
{
public string test { get; set; } // or Test{get;set;}
} 
```

据我了解，问题与控制器中参数“test”的名称有关。我刚刚将其更改为“模型”并且绑定正在工作。但它在原始状态下不起作用（参数名称为'test'），'test'参数为空。

请让我理解为什么绑定在当前示例中不起作用。十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:06:00.497

您的第二种方法需要一个`[HttpPost]`属性。您也不能将`test`其用作变量名，因为它与您尝试绑定的类的属性名称相同；ModelBinder 无法确定使用哪个。您的代码如下所示：

```
public class TestController : Controller
 {
        //
        // GET: /Test/
        [HttpGet]
        public ActionResult Index()
        {
            return View(new TestModel());
        }

        //
        // POST: /Test/
        [HttpPost]
        public ActionResult Index(TestModel testModel)
        {
           return View(testModel);
        }
 } 
```

# c# - 从基类访问子类变量

> ID：14648017
> 
> 赞同：0
> 
> 时间：2013-02-01T14:03:19.730
> 
> 标签：c#, asp.net, .net, oop, inheritance

```
class a : System.UI.Page {
int ab= c;
}
class b : a
{
public int c= 0;
} 
```

我无法访问它。我可以通过asp.net 中的[Control.NamingContainer属性访问页面上的任何控件，但](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)**我必须从表单（即 b 类）中的类（即 a 类）访问公共变量，**这样我就没有写我的表格中的50个特殊方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:27:26.350

您可以将变量放在基类上，以便继承的类可以访问它。例如：

```
class a : System.UI.Page
{
    protected int c = 0;
}

class b : a
{
    protected void DoSomething()
    {
        c = 1; //Access c from derived class.
    }
} 
```

此外，如果此属性不是特定于实例的，您始终可以在 Global.asax 文件中使用静态属性，该文件可以从 ASP.NET 应用程序中的任何位置访问。如果它是特定于会话的，您可以简单地让属性访问会话并从那里存储/检索值，以便每个用户会话都有自己的值。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:58:43.413

我认为您以错误的方式使用继承。试试这个，它应该工作：

```
public class a : b {
    int ab = c;
}

public class b : System.UI.Page
{
    public int c = 0;
} 
```

# adb - adb install [app_name] - 失败 [INSTALL_FAILED_ALREADY_EXISTS]

> ID：14648022
> 
> 赞同：3
> 
> 时间：2013-02-01T14:03:51.097
> 
> 标签：adb

首先，我知道这已经被问过很多次了，但是我已经尝试了所有这些答案，但仍然没有运气。让我解释。

我有 2 个应用程序、1 个股票应用程序，以及一个在 (sysdream/fino) 中添加了 fino 工具的应用程序。这一切都正确重新包装并正确辞职但是当我尝试时：

```
adb install app_fino.apk 
Failure [INSTALL_FAILED_ALREADY_EXISTS] 
```

还有 adb install -r，这很明显，因为我在其中添加了 fino 并辞职了。

```
 adb install -r app_fino.apk
 Failure [INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES] 
```

其他答案说卸载然后重新安装新应用程序。所以前往应用程序>全部>卸载

...重启手机

```
 adb install app_fino.apk 
 Failure [INSTALL_FAILED_ALREADY_EXISTS] 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T23:46:06.577

试试这个命令卸载：

```
adb uninstall com.your.packagename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T17:19:35.183

如果您仍然收到`INSTALL_FAILED_ALREADY_EXISTS`消息，即使在

```
adb uninstall com.your.packagename 
```

该应用程序可能仍存在于系统分区上，因此无法使用`adb uninstall`. 要解决此问题，您还需要删除原始系统应用程序（只能在有根设备上完成）：

```
adb shell
$ su
# mount -o remount,rw /system
# cd /system/data
# rm OffendingPackage.apk 
```

请注意，系统文件夹中的包名称不一定遵循`com.your.packagename.apk`约定。因此，您可能需要四处寻找正确的 apk。

最后`adb reboot`尝试再次安装之前的设备。

# wordpress - 移除 Wordpress 核心响应式

> ID：14648023
> 
> 赞同：0
> 
> 时间：2013-02-01T14:04:06.083
> 
> 标签：wordpress

好的，所以我在这里只有一个基本页面[http://basic.louisvillemarketing.net/](http://basic.louisvillemarketing.net/)

```
<html>
<head>

</head>
<body>
<!-- menu -->
<div style="width:100%;height:25px;background-color:red;">
<div style="width:1000px;margin:0 auto;">
<div id="topmenu">
Headers Page     Links Page     Blockquote Page     UL and OL Page     Image Page
</div><!-- //.topmenu -->
</div><!-- //.row -->
</div><!-- //.container -->
<!-- //menu -->
<!-- footer credit -->
<div style="width:100%;height:25px;background-color:black;">
<div style="width:1000px;margin:0 auto;">
<span style="float:right;color:black;">foot credit here</span>
</div>
</div>
<!-- //footer credit -->
</body>
</html> 
```

问题是，当您将屏幕缩小到 700 像素以下时，带有颜色的 100% div 不会扩展，因此内容会保持同步，而不是背景。

如果我将此页面移到 wordpress 之外，那很好，但在 wordpress 中，它会做响应式的事情。主题是没有@medias 的基本主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:23:11.507

使用 % in width 或使用 @medias 并为不同的屏幕尺寸定义宽度

```
<html>
<head>

</head>
<body>
<!-- menu -->
<div style="width:100%;height:25px;background-color:red;">
<div style="width:80%;margin:0 auto;">
<div id="topmenu">
Headers Page     Links Page     Blockquote Page     UL and OL Page     Image Page
</div><!-- //.topmenu -->
</div><!-- //.row -->
</div><!-- //.container -->
<!-- //menu -->
<!-- footer credit -->
<div style="width:100%;height:25px;background-color:black;">
<div style="width:80%;margin:0 auto;">
<span style="float:right;color:black;">foot credit here</span>
</div>
</div>
<!-- //footer credit -->
</body>
</html> 
```

现在它应该可以工作了，我将宽度更改为百分比。

# c++ - 编译器和字节序

> ID：14648025
> 
> 赞同：1
> 
> 时间：2013-02-01T14:04:15.760
> 
> 标签：c++, compiler-construction, endianness

我有一个“有点”小端序的 ISA。基本内存单位是整数而不是字节。例如

```
00000000: BEFC03FF 00008000 
```

表示“低”整数是`BEFC03FF` ，“高”整数是`00008000`。我需要读取一些位表示的值。例如位 31 到 47。我在 VS10 (c++) 中所做的工作在使用相关掩码并检查`var & mask`. 这样做合法吗？我对 uint64_t 位的排列做了一些假设——合法吗？我可以假设对于非常编译器和每个操作系统（不依赖于硬件），uint64_t 中的位排列都是这样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:09:29.157

你的担心是对的，这很*重要*。

但是，在这种特殊情况下，由于 ISA 是小端，即如果它具有 AD[31:0]，则整数的最低有效位被打包到位 0。假设您的处理器也是小端，那么无需担心. 当数据写入内存时，它应该有正确的字节顺序

```
0000  FF
0001  03
0002  .. 
```

假设，如果您的外部总线协议是大端并且您的处理器是小端。那么你的处理器中的一个 16 位整数，比如 0x1234 将是`0001_0010_0011_0100`本机格式，但`0010_1100_0100_1000`在总线上（假设它是 16 位）。

在这种情况下，多字节数据跨越字节序边界，硬件*只会*交换*字节内的位*，因为它必须保持字节之间的内存连续性。硬件交换后，变为：

```
0000 0001_0010
0001 0011_0100 
```

然后由软件来交换字节顺序

# r - 在 R 中调用特定的列名

> ID：14648028
> 
> 赞同：4
> 
> 时间：2013-02-01T14:04:33.880
> 
> 标签：r

colnames 给了我整个数据框的列名。有什么方法可以获取指定列的名称。在 ggplot 中绘制数据时，我需要这个来命名标签。

所以说我的数据是这样的：

```
df1 <- data.frame(a=sample(1:50,10), b=sample(1:50,10), c=sample(1:50,10)) 
```

我需要类似`paste(colnames(df1[,1]))`的东西显然行不通。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T14:07:10.900

你这样称呼这个名字：

```
colnames(df1)[1] 
# i.e. call the first element of colnames not colnames of the first vector 
```

但是，通过删除逗号，例如：

```
colnames(df1[1]) 
```

您也可以调用名称，因为仅`[x]`不使用`[,x]`或`[[x]]`保持 data.frame 结构不减少为向量，不像`$x`和`[,x]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:07:59.473

```
names(df1)[1] 
```

会给你第一列的名称。也会如此

```
names(df1[1]) 
```

两者都不使用逗号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T14:10:15.947

colnames(df1)[1] 会解决问题吗？

# database - 非标准连接

> ID：14648029
> 
> 赞同：0
> 
> 时间：2013-02-01T14:04:34.187
> 
> 标签：database, join, relational-algebra

我遇到了一个问题，并试图找到一个通用的解决方案作为连接。

我有 2 张桌子：

[http://pastebin.com/q5yws5Ym](http://pastebin.com/q5yws5Ym)（不确定如何强制样式）

我想生成类似 [http://pastebin.com/GscBUrYS](http://pastebin.com/GscBUrYS)

（虽然有更多的参数我对我将如何做这样的事情感兴趣）

虽然我能够通过自连接和等连接达到类似的效果，但它会生成很多不需要的行，我不确定如何自动删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:14:28.620

尝试以下方式：

```
SELECT user.user_id, j1.user_param, j1.user_value, j2.user_param, j2.user_value
FROM user
JOIN Users_info j1 ON user.user_id = j1.user_id
JOIN users_info j2 on user.user_id = j2.user_id
where j1.user_param != j2.user_param
GROUP BY user.user_id 
```

您可能需要更多的“排除”子句来确保每行只选择一次，但总体思路应该有效（对于给定且数量有限的不同 user_param`s）。

# c# - 到达 XmlDocument 的“底部” - C#

> ID：14648032
> 
> 赞同：1
> 
> 时间：2013-02-01T14:04:42.713
> 
> 标签：c#, wpf, xml, iteration, xmlnode

我有两个版本的 XmlDocument

**版本 1**

```
<?xml version="1.0" encoding="UTF-8"?>
<topElement>

<childElement1>Value</childElement1>
<childElement2>Value</childElement2> 
...
</topElement> 
```

**版本 2**

```
<?xml version="1.0" encoding="UTF-8"?>
<topElement>

<group1>
<childElement1>Value</childElement1>
<childElement2>Value</childElement2> 
</group1>

<group2>
<childElement1>Value</childElement1>
<childElement2>Value</childElement2> 
</group2>
</topElement> 
```

在这两种情况下，我都需要获取所有 childElements 的所有值并将它们添加到 CustomObject 的集合中。据我了解，这只能通过迭代来完成。

所以我得到了顶部节点，然后像这样：

```
CustomObject getLow(XmlNode node, CustomObject customObject)
{
    foreach (XmlNode n in node.ChildNodes)
    {
        if (n.HasChildNodes == true)
        {
            getLow(n);
        }
        customObject.collection.Add(n.Name, n.InnerText);
    }
    return customObject;
} 
```

毫无疑问这是错误的，有人可以帮我在这两种情况下都得到正确的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:31:36.203

您可以将 Xpath 与您的 XmlDocument 一起使用：

```
XmlDocument xmlDoc = new XmlDocument("yourxml.xml");
foreach (XmlNode childElement in xmlDoc.SelectNodes("//childElement"))
{
    customObject.collection.Add(childElement.Name, childElement.InnerText);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:21:22.403

循环不是唯一的方法——另一种方法是生成具有 XML 属性的自定义类的对象图，并使用 XML 序列化器将 XML 转换为对象图。

有关详细信息，请参阅[http://msdn.microsoft.com/en-gb/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-gb/library/system.xml.serialization.xmlserializer.aspx)。

另一种方法是使用 XDocument 并使用 linq 直接从 XDocument 中查询您想要的值。

请参阅[使用 Linq 和 XDocument，我可以获取父标记下的所有子元素吗？](https://stackoverflow.com/questions/5780379/using-linq-and-xdocument-can-i-get-all-the-child-elements-under-parent-tag)

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:30:59.900

您应该能够使用一些 xPath 来获取您正在寻找的节点。

尝试类似的东西

```
node.SelectNodes("//*[count(child::*)=0]") 
```

# macos - mac os x终端中的奇怪行为

> ID：14648034
> 
> 赞同：4
> 
> 时间：2013-02-01T14:04:51.903
> 
> 标签：macos, bash, terminal, .bash-profile

我开始使用 Mark Dotto ( [http://markdotto.com/2013/01/13/improved-terminal-hotness/](http://markdotto.com/2013/01/13/improved-terminal-hotness/) ) 的这段代码来让我的终端更性感一些。我只是复制了代码而没有编辑它，所以在我的`.bash_profile`添加：

```
export PS1='\[\e[0:35m⌘\e[m \e[0:36m\w/\e[m \e[0:33m`git branch 2> /dev/null | grep -e ^* | sed -E  s/^\\\\\*\ \(.+\)$/\(\\\\\1\)\ /`\e[m\]' 
```

一切正常，但有一件奇怪的事情：当我输入 3 个或更少的字符然后按退格键时，它会删除所有内容，甚至是左侧的信息（路径和 git 分支）。这可能没问题，但问题是当我在那之后继续输入时，我开始输入的命令仍然在这里（但隐藏）。我猜你不明白，所以我会尝试显示一些代码：

```
# this is what my prompt looks like
~/my/path/ (branch) |

# I start typing a command
~/my/path/ (branch) ls|

# now I hit backspace once
|

# everything is removed
# but if I type something else then hit return
git st|

# it throws an error as the `l` from the previous command is still here
-bash: lgit: command not found 
```

我完全知道这个 bash_profile 是如何工作的，有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:38:14.677

您的 PS1 变量中似乎存在一些不正确的语法，导致一些意外错误。试试这个版本：

```
export PS1='\[\e[36m\]\w \[\e[33m\]`git branch 2> /dev/null | grep -e ^* | sed -E s/^\\\\\*\ \(.+\)$/\(\\\\\1\)\ /` \[\e[0m\]' 
```

（注意：我单独留下了`git ... grep ... sed`管道，只编辑了与提示本身相关的部分。）

编辑 - 取出`0:`零件和颜色实际工作。（即`\[\e[36m\]`代替`\[\e[0:36m\]`）

这是那里发生的事情的细分：

*   `\[\e[36m\]`- 此块设置前景文本颜色（浅蓝色/蓝绿色）
*   `\w`- 当前工作目录
*   `\[\e[33m\]`- 设置不同的文本颜色（黄色）
*   `git ... grep ... sed`- 检索你当前的 git 分支
*   `\[\e[0m\]`- 将文本颜色重置为白色，这样您就不会以黄色输入命令

如果您不关心颜色，提示是一件相当琐碎的事情。颜色块使它更复杂一些，并且（如您所见）容易出错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T15:01:09.220

首先：确保您使用的是 BASH shell。

我在 MacBook 上的 Mountain Lion 和 PS1 命令之类的工作。我的提示如下所示：

```
⌘ ~/SVN-Precommit-Kitchen-Sink-Hook.git/ (master) _ 
```

我想问题是你想让你的提示做什么。BASH 提示可以嵌入一大堆转义序列，这些转义序列可以做各种巧妙的事情，在 Kornshell 中需要一点点黑客攻击。

`man bash`在命令行上键入，然后找到 PROMPTING 标题。您应该看到如下内容：

```
 When executing interactively, bash displays the primary prompt PS1 when it is ready to  read  a  com-
   mand, and the secondary prompt PS2 when it needs more input to complete a command.  Bash allows these
   prompt strings to be customized by inserting a number of backslash-escaped  special  characters  that
   are decoded as follows:
          \a     an ASCII bell character (07)
          \d     the date in "Weekday Month Date" format (e.g., "Tue May 26")
          \D{format}
                 the  format is passed to strftime(3) and the result is inserted into the prompt string;
                 an empty format results in a  locale-specific  time  representation.   The  braces  are
                 required
          \e     an ASCII escape character (033)
          \h     the hostname up to the first `.'
          \H     the hostname
          \j     the number of jobs currently managed by the shell
          \l     the basename of the shell's terminal device name
          \n     newline
          \r     carriage return
          \s     the name of the shell, the basename of $0 (the portion following the final slash)
          \t     the current time in 24-hour HH:MM:SS format
          \T     the current time in 12-hour HH:MM:SS format
          \@     the current time in 12-hour am/pm format
          \A     the current time in 24-hour HH:MM format
          \u     the username of the current user
          \v     the version of bash (e.g., 2.00)
          \V     the release of bash, version + patch level (e.g., 2.00.0)
          \w     the current working directory, with $HOME abbreviated with a tilde
          \W     the basename of the current working directory, with $HOME abbreviated with a tilde
          \!     the history number of this command
          \#     the command number of this command
          \$     if the effective UID is 0, a #, otherwise a $
          \nnn   the character corresponding to the octal number nnn
          \\     a backslash
          \[     begin  a  sequence  of non-printing characters, which could be used to embed a terminal
                 control sequence into the prompt
          \]     end a sequence of non-printing characters 
```

让我们做一个简单的提示。我想显示我的用户名、我所在的系统和我的当前目录。我可以这样设置 PS1：

```
PS1="\u@\h:\w$ " 
```

这会给我：

```
 david@davebook:~$ _ 
```

是我的`\u`用户名 (david)，`\h`是我的机器名 (davebook)， 并`\w`显示与我的目录相关的当前`$HOME`目录。

您也可以在提示符中嵌入命令：

```
PS1="\$(date) \u@\h:\w$ " 
```

现在日期和时间将嵌入到我的提示中：

```
Fri Feb  1 09:45:53 EST 2013 david@DaveBook:~ 
```

有点傻（我应该格式化日期。此外，BASH 已经内置了日期序列），但你明白了。

我建议你建立自己的该死的提示。如果您是`git`用户，并且您正在舒适地使用命令行，那么您可能会自己做出一个很好的提示，以按照您想要的方式进行查看。您可以使用`\$(command)`语法来包含与每个新 PS 命令一起执行的交互式命令。您可以使用[ANSI 转义码](https://en.wikipedia.org/wiki/ANSI_escape_code)为提示的不同部分着色，或者让它们做一些很棒的事情。

慢慢地、一点点地构建你的提示。创建一个将设置的 shell 脚本`PS1`，并像这样输入它：

```
$ echo "PS='\u@\h:\w\$ " > prompt.sh
$ chmod a+x prompt.sh
$ . prompt.sh 
```

然后，将越来越多的功能添加到您的提示中，直到您让它以您想要的方式工作。

就个人而言，我避免过于花哨的提示仅仅是因为它们往往会在你最不期望的时候分崩离析。例如，我使用 VI 序列进行编辑，但每当我尝试编辑命令行时，该提示就会完全崩溃。

花哨的提示让我想起了像[Talking Moose](https://en.wikipedia.org/wiki/Talking_Moose)这样的程序，前几分钟真的很酷，然后开始变得非常非常烦人。

# list - MVC4 允许用户编辑列表项

> ID：14648035
> 
> 赞同：0
> 
> 时间：2013-02-01T14:04:58.417
> 
> 标签：list, asp.net-mvc-4

在视图模型中，我有以下列表：

```
public List<Foo> ListOfFoos { get; set; } 
```

该类`Foo`具有以下属性：

```
public int id {get; set;}
public string name {get; set;}
public int number {get; set;} 
```

我可以使用循环输出属性`Foo`中的每个对象。我希望能够在提交表单时提交编辑后的值。`ListOfFoos``foreach`

有没有办法做到这一点？新值是否会简单地存储在`ListOfFoos`列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T14:50:48.307

正如[42](https://stackoverflow.com/q/14648035/370671#comment20466336_14648035)所提到的，Phil Haack 有[一篇关于如何将列表绑定到模型的热门博客文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx/)。

# c - C 使用 getopt_long()

> ID：14648039
> 
> 赞同：2
> 
> 时间：2013-02-01T14:05:03.000
> 
> 标签：c, parsing, getopt

我一直在阅读如何使用`getopt_long()`，以及如何使用 optlong 来“阅读”多个字符选项。

我需要从终端解析以下条目：

```
./bomb –n String –cp Integer –i Integer –c Integer –fc String 
```

所以在我使用 getoptlong 之前，我定义了我的短选项和长选项：

```
 if(argc != 11){
    perror("Error en numero de argumentos \n");
    exit(EXIT_FAILURE);
 }

 const char* const short_options = "n:i:c:";
 static struct option long_options[] = {
    {"cp", 1, NULL, 'a'},
    {"fc", 1, NULL, 'b'},
    {0, 0 , 0, 0}
 }; 
```

我`short_options`接受`n`了一个论点（这就是 the`:`的用途），对于`c`and 也是如此`i`。因此，长选项也应如此（它们也都选择参数）。

```
 while(opt != -1){

        opt = getopt_long(argc, argv, short_options, long_options, NULL);

        switch (opt){   
           case 'n':
           //print it

           case 'a':
          //print it
         } 
    } 
```

现在的问题是，这段代码在解析时非常有效`-c -i`，`-n`它进入了它所属的案例并正确打印。我的问题，它不适用于`-cp`and `-fc`。而且我真的不知道如何解决这个问题，因为我以前没有使用`getopt()`过。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:25:42.210

报价[`man getopt_long`](http://www.kernel.org/doc/man-pages/online/pages/man3/getopt.3.html)：

> 该 `getopt_long()` 函数的工作原理类似`getopt()`，只是它也接受长选项，以两个破折号开头。

和

> `getopt_long_only()`is `like getopt_long()`，但`-`as well`--`可以表示一个长选项。

因此，您应该使用`--cp`and`--fc`或切换到`getopt_long_only`.

# php - 群组私信系统

> ID：14648040
> 
> 赞同：3
> 
> 时间：2013-02-01T14:05:04.070
> 
> 标签：php, mysql, sql, greatest-n-per-group

我正在编写一个私人消息系统，它运行良好。我需要为组消息编写一个 SQL 查询，并且该消息应该只出现一次。简而言之，我想要一个像 Facebook 一样的“对话视图”，只显示发送或接收的最新消息。后端脚本是私人消息系统中的 PHP。

我附上了一个屏幕截图：

![截屏](../Images/30a3d5d73a1ba2eecda3f385bb608a26.png)

这是我正在使用的附加查询。

测试demo上传到这个地址：http: [//developers89.byethost14.com/messages/](http://developers89.byethost14.com/messages)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T14:16:02.127

```
SELECT  *
FROM    conversation
WHERE   (LEAST(sender_ID, receiverID), GREATEST(sender_ID, receiverID), date)
        IN
        (
            SELECT  LEAST(sender_ID, receiverID) x, 
                    GREATEST(sende_ID, receiverID) y,
                    MAX(date) max_date
            FROM    conversation
            GROUP   BY x, y
        )
        AND '$uid' IN (sender_ID, receiverID)
//      AND other conditions if you have  ...
//      ORDER BY ...
//      LIMIT ... 
```

# c# - 如何将大数组发送到存储过程

> ID：14648043
> 
> 赞同：3
> 
> 时间：2013-02-01T14:05:12.677
> 
> 标签：c#, sql-server, sql-server-2008

我需要将几个列表（大约 20000 个 id）发送到存储过程，如下所示：

```
1391924, 6546510, 7419635, 6599910, 6546888, 1116510, 6546720, ... 
```

我有这个数据`List<int>`

如何将此列表发送到存储过程？

然后我需要在临时表上插入 id 的列表

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T14:14:41.947

您可以使用：[表值参数](http://msdn.microsoft.com/en-us/library/bb510489%28v=sql.100%29.aspx)

表值参数是 SQL Server 2008 中的一种新参数类型。表值参数是使用用户定义的表类型声明的。您可以使用表值参数将多行数据发送到 Transact-SQL 语句或例程（例如存储过程或函数），而无需创建临时表或许多参数。

表值参数类似于 OLE DB 和 ODBC 中的参数数组，但提供了更大的灵活性并与 Transact-SQL 更紧密地集成。表值参数还具有能够参与基于集合的操作的好处。

例如。：

**SQL 服务器：**

创建表值参数：

```
 CREATE TYPE IDsTableType AS TABLE
  (                     
        [Product] [varchar](10) NOT NULL
  ) 
```

将其传递给存储过程：

```
 CREATE PROCEDURE GetIDs
 (
       @TableVariable IDsTableType READONLY
 )
 AS
 BEGIN
  //Do Something

 END
 GO 
```

**将表值参数传递给存储过程的 C# 代码：**

```
DataTable dataTable = GetData();
// Configure the SqlCommand and SqlParameter.
SqlCommand cmd= new SqlCommand(
    "GetIDs", connection);
cmd.CommandType = CommandType.StoredProcedure;
SqlParameter tvpParam = cmd.Parameters.AddWithValue(
    "@TableVariable", dataTable);
tvpParam.SqlDbType = SqlDbType.Structured; 
```

参考：[将表值参数数据传递给存储过程](http://msdn.microsoft.com/en-us/library/bb675163%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:11:34.123

如果将数组写入 DataTable，则可以将 DataTable[批量插入](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)数据库。然后存储的过程可以从该表中读取。

# ios - iPad：需要准确的替代 NSTimer 来制作金刚风格的游戏

> ID：14648045
> 
> 赞同：0
> 
> 时间：2013-02-01T14:05:14.747
> 
> 标签：ios, multithreading, loops, nstimer

我正在制作一个游戏和观看风格的游戏（还记得大金刚吗？），其中所有敌人都以设定的间隔移动。

例如。大金刚中的桶可能恰好每 1 秒移动 1 步。准确性至关重要，因为玩家需要预测运动并计划他们的跳跃。

我正在使用 NSTimer 运行一个函数，该函数基本上处理将所有敌人向前移动一步。这很好用，但后来我注意到敌人会暂时冻结，这会破坏游戏。阅读 NSTimer 文档，似乎这正是使用 NSTimer 时的方式。

我尝试了什么：

我最初使用的是scheduledTimerWithTimeInterval，但阅读了另一个建议使用 timerWithTimeInterval 的线程

```
[[NSRunLoop currentRunLoop] addTimer:autoMoveTimer forMode:NSRunLoopCommonModes]; 
```

但我仍然注意到冻结。

我不是每秒运行一次计时器，而是尝试让它更频繁地运行，然后在函数内部检查经过的时间

```
NSTimeInterval elapsedTimeInterval;
elapsedTimeInterval = [gameTickerLastRan timeIntervalSinceNow];

if(elapsedTimeInterval<-gameSpeed){

        NSLog(@"%f since ticker last ran",elapsedTimeInterval);

        gameTickerLastRan=[NSDate date];

//do stuff in function

} 
```

但我仍然注意到冻结，即使输出的经过时间对我来说似乎非常准确。

```
 -1.006408 since ticker last ran

 -1.006985 since ticker last ran

 -1.007313 since ticker last ran

 -1.007193 since ticker last ran

 -1.006768 since ticker last ran

 -1.007468 since ticker last ran

 -1.007429 since ticker last ran

 -1.006759 since ticker last ran

 -1.007435 since ticker last ran 
```

在该功能结束时，在所有敌人都移动了一步之后，我尝试强制图形更新

```
[self performSelector:@selector(sweetNothings) withObject:nil afterDelay:0.0]; 
```

但这没有帮助。

我短暂地尝试为计时器创建一个专用线程，但我尝试的方法没有奏效，而且我觉得自己的深度太深了，无法对此进行大量实验。

故事板包含大约 100 个 UIImageView，它们像逐帧动画一样布局。然后我使用它们的隐藏属性打开和关闭它们来创建动画。

谁能建议我以精确的时间间隔运行此功能并绕过图形冻结的坚如磐石的方法？

编辑：我尝试了一个 CADisplayLink 但它看起来完全一样 - 即它仍然大约每 10 秒冻结一秒钟。这就是我所拥有的

```
displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(gameTicker:)];

[displayLink setFrameInterval:1];

[displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

然后在游戏自动收报机中我有

```
CFTimeInterval elapsedTime = displayLink.timestamp - lastDrawTime;
NSLog(@"elapsed %f", elapsedTime);
if(elapsedTime>=gameSpeed){
//do stuff
lastDrawTime = displayLink.timestamp;
} 
```

编辑2：嗯，我很尴尬地说我刚刚意识到它根本没有滞后。我在向前循环数组时删除了元素，这导致了滞后的错觉。无论如何，感谢您将我指向 CADisplayLink - 看起来非常有用。我应该删除我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:04:48.703

看看[CADisplayLink](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)（这是 Cocos2d 和其他游戏框架使用的）。

# php - 正则表达式在 PHP 函数中查找信息

> ID：14648052
> 
> 赞同：1
> 
> 时间：2013-02-01T14:05:32.060
> 
> 标签：php, regex

我正在研究一个正则表达式，但我无法修复它。

我正在使用 PHP 扫描文档 (.php)，我正在寻找：`$__this('[TEXT]')`或`$__this("[TEXT]")`

所以我的问题是：有人可以帮助我使用在字符串中搜索的正则表达式：`$__this('[TEXT]')`或`$__this("[TEXT]")`并给我`[TEXT]`

**更新（有答案，感谢@Explosion Pills）：**

```
$string = '$__this("Foo Bar<br>HelloHello")';
preg_match('/\$__this\(([\'"])(.*?)\1\)/xi', $string, $matches);
print_r($matches); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:17:14.467

```
preg_match('/
    \$__this # just $__this.  $ is meta character and must be escaped
    \(       # open paren also must be escaped
    ([\'"])  # open quote (capture for later use).  \' is needed in string
    (\[      # start capture.  open bracket must also be escaped
    .*?      # Ungreedily capture whatever is between the quotes
    \])      # close the open bracket and end capture
    \1       # close the quote (captured earlier)
    \)       # close the parentheses
/xi'         # ignore whitespace in pattern, allow comments, case insensitive
, $document, $matches); 
```

捕获的文本将在`$matches[2]`. 这假设每行可能捕获一次。如果您需要更多，请使用`preg_match_all`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:16:30.013

怎么样：

```
preg_match('/\$__this(?:(\'|")\((.+?)\)\1)/', $string); 
```

**解释：**

```
(?-imsx:\$__this(?:(\'|")\((.+?)\)\1))

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  \$                       '$'
----------------------------------------------------------------------
  __this                   '__this'
----------------------------------------------------------------------
  (?:                      group, but do not capture:
----------------------------------------------------------------------
    (                        group and capture to \1:
----------------------------------------------------------------------
      \'                       '''
----------------------------------------------------------------------
     |                        OR
----------------------------------------------------------------------
      "                        '"'
----------------------------------------------------------------------
    )                        end of \1
----------------------------------------------------------------------
    \(                       '('
----------------------------------------------------------------------
    (                        group and capture to \2:
----------------------------------------------------------------------
      .+?                      any character except \n (1 or more
                               times (matching the least amount
                               possible))
----------------------------------------------------------------------
    )                        end of \2
----------------------------------------------------------------------
    \)                       ')'
----------------------------------------------------------------------
    \1                       what was matched by capture \1
----------------------------------------------------------------------
  )                        end of grouping
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:37:22.257

这是一个解决方案，它也可以捕获带有引号和撇号的字符串。

```
$txt = "
blah blah blah
blah \$_this('abc') blah
blah \$_this('a\"b\"c') blah balah \$_this('a\"b\"c\'')
\$_this(\"123\");\$_this(\"1'23\") \$_this(\"1'23\\\"\")
";

  $matches = array();
  preg_match_all('/(?:\$_this\()(?:[\'"])(.*?[^\\\])(?:[\'"])(?:\))/im', $txt, $matches);
  print_r($matches[1]); 
```

# mongodb - MongoDB 返回 [object Object] 的结果

> ID：14648054
> 
> 赞同：1
> 
> 时间：2013-02-01T14:05:41.523
> 
> 标签：mongodb, mongoose

我有一个多层架构：

```
{
  a:String,
  aList: 
  [
     {
        b:String,
        bList:
        [
            {
                c:String,
                cList 
                [
                   d1:String
                   d2:String   
                ]
            }  
        ] 
     }
  ]
} 
```

问题是当我按照以下方式检索时

```
A.find( {a:aid, "aList.b":bid}, {_id:0, "aList.$.bList" : 1}) 
```

bList 始终作为字符串列表返回，我无法获取原始数据

```
{
  aList:
  [
     {
        bList: [ "[object Object]", "[object Object]", "[object Object]"] 
     }
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:29:12.273

如下定义模式解决了这个问题：

```
var cSchema = mongoose.Schema({c:String,
    cList[
       d1:String
       d2:String   
    ]
});

var bSchema = mongoose.Schema({c:String,
    b:String,
    bList:
    [cSchema]
});

var aSchema = mongoose.Schema({
    a:String,
    aList: [bSchema]
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T18:57:26.433

使用时将其用作 json 对象。如果您正在打印，请使用`printjson()`打印。

```
db.sample.find().foreach(function(e){ printjson(e)}) 
```

# css - 过渡在 css 中不起作用

> ID：14648055
> 
> 赞同：0
> 
> 时间：2013-02-01T14:05:45.183
> 
> 标签：css, drop-down-menu

我正在创建一个下拉菜单。到目前为止一切正常。不起作用的一件事是下拉菜单出现时不透明度的变化。我还想添加一个高度流。我的意思是整个高度应该会在 0.5 秒后自行增加。

现在我想我可以通过过渡来实现这些目标，但不知何故它根本不起作用。

```
#nav-primary ul ul{
    position:absolute; 
    left:0px;
    opacity: 0;
    transition:opacity .5s ease-in-out;
    -webkit-transition: opacity .5s ease-in-out;
    -moz-transition: opacity .5s ease-in-out;
    -o-transition: opacity .5s ease-in-out;
    z-index:497;
}

#nav-primary ul li:hover > ul { 
    opacity: 1; 
    position:absolute; 
    top:100%; 
    left:0; 
 } 
```

基本上我正在使用来自 wordpress 的 wp_nav_menu：

```
wp_nav_menu( array( 'theme_location' => 'menu', 
                    'link_before' => '<span>',
                    'link_after' => '</span>',) ); 
```

结构应如下所示：

```
ul ...                         // main-menu
    li ...
        ul ...                 // sub-menu
            li ...
                <a>
                <span>
                </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:47:42.483

在您的 CSS 代码中，您永远不会对最顶层的父 ul 元素应用任何定位。也许这是一个错字？

你的第一行是：

```
#nav-primary ul ul{ 
```

但也许你的意思是：

```
#nav-primary ul { 
```

您最好的第一步是设置您的父级 ul。如果没有在您的父母 ul 和 li 上定位属性，您的孩子 li 将不知道他们的定位是什么。

假设你有一些其他的默认样式，你只需要这样的东西：

```
#nav-primary ul {
    position:relative; 
} 
```

将它与您已经拥有的一些东西以及其他一些基本样式相结合，您就可以开始了：

```
ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

li {
    display: block;
    width: 300px;
    height: 30px;
    line-height: 30px;
    color: black;
    padding: 5px;
    background: #aaa;
}

ul li li {
    background: #ccc;
}

#nav-primary ul {
    position:relative;
}

#nav-primary ul > li > ul {
    display: block;
    position: absolute;
    top: 100%;
    left: 0;
    transition:opacity .5s ease-in-out;
    -webkit-transition: all .5s ease-in-out;
    -moz-transition: all .5s ease-in-out;
    -o-transition: all .5s ease-in-out;
    opacity: 0;
}

#nav-primary ul > li:hover > ul { 
    opacity: 1; 
} 
```

在这里查看它的实际效果：http: [//jsfiddle.net/jonthomas/27Ymw/1/](http://jsfiddle.net/jonthomas/27Ymw/1/)

希望有帮助！

# ios - 将我的项目限制为纵向，仅将照片视图保留为横向/纵向

> ID：14648059
> 
> 赞同：0
> 
> 时间：2013-02-01T14:06:01.157
> 
> 标签：ios, xcode, facebook, navigation, photo-gallery

我希望我的整个项目仅在纵向模式下运行，并且只有用于查看照片的视图才能像使用 facebook 一样打开横向（我们查看照片的它们也会变成横向，但其他视图仍然是纵向的）我想知道它是如何完成的，因为我有一个表格视图，其中包含我从服务器从数据库获取的图像，并且每个特定数据都包含不同数量的照片，所以现在我希望在用户选择照片后，它们应该完全打开并且可以查看在风景和肖像中，我也尝试过

我正在使用 ios6

```
- (BOOL)shouldAutorotate
{
    return NO;
} 
```

在所有视图中实现，以便它们可以保持纵向，但它们仍然是横向的，我应该如何限制它，请任何人告诉我，在我的一堂课中，我在表格视图中有图像（从数据库加载），我有另一个课程可以打开表格中选定的照片

我的 PhotoView.m 类

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  NSDictionary *dic = [photos objectAtIndex:indexPath.row];
    NSLog(@" *** url is %@",[dic objectForKey:@"url"]);
    [self.delegate showPhotoAtUrl:[dic objectForKey:@"url"]];
 } 
```

我的 PhotoViewController.h 类

```
 #import <UIKit/UIKit.h>

@interface PhotoViewController : UIViewController <UIScrollViewDelegate>
{
    NSString *url;
    UIButton *doneButton;
}

@property (nonatomic, retain) UIImageView *imageView;

- (id) initWithPhotoUrl:(NSString *)photoUrl;

@end 
```

和 PhotoViewController.m 类

```
#import "PhotoViewController.h"

@interface PhotoViewController ()

@end

@implementation PhotoViewController

@synthesize imageView;

- (id) initWithPhotoUrl:(NSString *)photoUrl
{
    self = [super init];
    if(self) {
        url = [photoUrl retain];
    }
    return self;
}

- (void)dealloc
{
    [url release];
    self.imageView = nil;
    [doneButton release];
    [super dealloc];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor blackColor];
    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    spinner.tag = 1;
    spinner.center = self.view.center;
    [spinner startAnimating];
    [self.view addSubview:spinner];
    [spinner release];
    [self performSelectorInBackground:@selector(loadPhotoData) withObject:nil];

    doneButton  = [[UIButton buttonWithType:UIButtonTypeRoundedRect] retain];
    [doneButton addTarget:self action:@selector(doneTouched) forControlEvents:UIControlEventTouchUpInside];
    [doneButton setTitle:@"done" forState:UIControlStateNormal];
    [doneButton setBackgroundColor:[UIColor clearColor]];    
    doneButton.frame = CGRectMake(2, 2, 60, 30);
    [self.view addSubview:doneButton];
}

- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.title = @"";
    self.navigationController.navigationBarHidden = YES;
}

- (void) doneTouched
{
    [self.navigationController popViewControllerAnimated:YES];
}

- (void) loadComplete:(NSData *)imageData
{
    if(!imageData) return;

    UIActivityIndicatorView *spinner = (UIActivityIndicatorView *)[self.view viewWithTag:1];
    if(spinner) {
        [spinner stopAnimating];
        [spinner removeFromSuperview];
    }

    UIImage *img = [UIImage imageWithData:imageData];

    float scale = MIN(self.view.frame.size.width/img.size.width, self.view.frame.size.height/img.size.height);
    self.imageView = [[[UIImageView alloc] initWithImage:img] autorelease];
    self.imageView.frame = CGRectMake(0, 0, self.imageView.image.size.width*scale, self.imageView.image.size.height*scale);

    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    self.imageView.center = scrollView.center;
    scrollView.delegate = self;
    scrollView.contentSize = self.imageView.frame.size;
    scrollView.minimumZoomScale = 1;
    scrollView.maximumZoomScale = 2;
    [scrollView addSubview:self.imageView];
    [self.view addSubview:scrollView];
    [scrollView release];

    [self.view bringSubviewToFront:doneButton];
}

- (UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return self.imageView;
}

- (void) loadPhotoData
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
    [self performSelectorOnMainThread:@selector(loadComplete:) withObject:imageData waitUntilDone:NO];
    [pool drain];
}

@end 
```

在主类中我有这个方法调用 PhotoViewController 来加载选定的照片

```
- (void) showPhotoAtUrl:(NSString *)url
{

    PhotoViewController *vc = [[PhotoViewController alloc] initWithPhotoUrl:url];
    [self.navigationController pushViewController:vc animated:YES];
    [vc release];
} 
```

现在我的问题是我应该如何在从表格中选择后获取图像以在 FB 应用程序中打开的相同类型的视图中打开（在纵向/横向兼容视图中打开所选照片）我只能在我的 PhotoViewController 类中获取一张照片谁能告诉我如何将所有照片添加到 PhotoViewController 类中，以便获得我想要的效果？...任何代码帮助都会非常有帮助..提前感谢您的贡献您的时间

简而言之，我有两件事要做：

1.  我必须将我的项目限制为仅纵向模式，只留下照片的视图以具有横向/纵向兼容性。

2.  我目前在我的表格视图中有照片，我希望在查看照片时以与 FB 或其他应用程序相同的样式（横向/纵向兼容）打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:29:42.240

```
These only work on iOS 6.0

-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationLandscapeRight | UIInterfaceOrientationLandscapeLeft);
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
}
    The method will return which orientation mode to use first.

    Below are supportedInterfaceOrientations:

    UIInterfaceOrientationMaskPortrait
    UIInterfaceOrientationMaskLandscapeLeft
    UIInterfaceOrientationMaskLandscapeRight
    UIInterfaceOrientationMaskPortraitUpsideDown 
    UIInterfaceOrientationMaskLandscape 
    UIInterfaceOrientationMaskAll
    UIInterfaceOrientationMaskAllButUpsideDown

    For iOS > 4.0
        - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
    }

Other ViewControllers will have 
-(BOOL)shouldAutorotate { return NO; } 
-(BOOL)shouldAutorotateToInterfaceOrientation:
(UIInterfaceOrientation)interfaceOrientation{     
return NO;
} 
```

# delphi - 如何将exe文件导入资源从资源中提取exe然后shell

> ID：14648061
> 
> 赞同：0
> 
> 时间：2013-02-01T14:06:10.370
> 
> 标签：delphi, file, resources, runtime, extract

我想将 exe 文件导入到我的 delphi 应用程序资源中。
然后解压并运行exe。

我的问题是：我
如何：将
exe 文件导入我的资源 将
exe 文件提取到“c:\”（带`SaveToFile`函数）
运行（`Shell exeFilePath`）exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:24:33.540

有关如何将文件作为资源包含到您的应用程序的示例，请参阅[此答案。](https://stackoverflow.com/a/8943364/723693)该示例用于文本文件，但用于 exe 文件的想法相同。它还向您展示了如何将该资源加载到一个`TResourceStream`，然后您只需使用它的[`SaveToFile`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TCustomMemoryStream.SaveToFile)方法将 exe 保存到光盘。将 exe 放在光盘上后，您可以使用 ie 运行它[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:46:12.223

有组件库允许您将文件存储在 DFM 内部

例如，如果安装了[JediVCL](http://jvcl.sf.net)，您可以将[`TJvDataEmbedded`](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvDataEmbedded)组件拖放到`TDataModule`or`TForm`并将文件加载到其中。然后在运行时中，您可以将该文件提取到磁盘或`TMemoryStream`.

* * *

关于运行 - 最简单的事情是调用[`ShellExecute`](https://www.google.ru/search?client=opera&q=delphi%20shellexecute&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)函数 - 阅读有关它的 Delphi 帮助。或者您可以使用 Jedi CodeLib 中的类，它允许您进行大量自定义。但你可能不需要它。

# ios - 了解 subview.center = view.center 如何工作以及为什么 getter 和 setter 做不同的事情

> ID：14648062
> 
> 赞同：4
> 
> 时间：2013-02-01T14:06:11.337
> 
> 标签：ios, objective-c, xamarin.ios

我看到很多代码解释了如何在视图中居中子视图。代码示例通常如下所示：

```
SubView.center = view.center; 
```

有人可以向我解释这是如何工作的吗？我只是不明白。

给出视图的`view.center`中心点。例如宽度为 100，高度为 100，它将返回 (50,50)。我得到它。

设置`subview.center`对我来说很奇怪。 `subview.center`将返回子视图的中心点。不知何故，将其设置为 (50,50) 会将其父视图中的子视图定位到 50/50 的坐标。但是如果子视图本身的宽度为 50，高度为 50，则访问此属性将返回（25,25）。

不懂我的意思？这里的概念对我来说很奇怪，因为 setter 和 getter 执行不同的功能。

如果有人可以解释这一点，请做。或者，如果我离基地很远，我也想知道。我是 iOS 开发新手。

如果我是正确的并且这确实是它的工作方式，你会不会认为这是一种反模式。当然，在 .NET 中，类似这样的东西将是一种反模式。也许不适合 Obj-C？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-24T08:48:37.503

在视图中居中子视图。我认为以下代码是正确的。

**斯威夫特 3.0：**

```
SubView.center = CGPoint(x: view.bounds.midX, y: view.bounds.midY ); 
```

**斯威夫特 2.2：**

```
SubView.center = CGPointMake( CGRectGetMidX( view.bounds ), CGRectGetMidY( view.bounds ) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:39:53.877

所以在设置它时，它是在它的超级视图中设置它。获取子视图中心时，它会为您提供实际的视图中心。

所以 50 的一半是 25，因此是 25,25。您想要子视图的中心而不是其父视图的中心，因此它没有理由返回其父视图的中心坐标，只是它自己的。

为了更具技术性，它必须与视图的 Frame 和 Bounds 相关（getter 使用视图的**bounds**获取中心，而 setter 使用视图的**frame**）。[这](https://stackoverflow.com/questions/1210047/cocoa-whats-the-difference-between-the-frame-and-the-bounds)是一个链接，描述了它们是什么以及它们有何不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:40:10.090

*view.center 给出了视图在视图的超级视图坐标空间中*的中心点。因此，它允许您在其超级视图中重新定位视图。

如果您有一个视图大小 {100,100} 并将其设置为中心 {200,200} - 它的中心点将从其超级视图的原点定位 {200,200}。实际上，它将从超级视图的原点插入 150 个点。

因此 view.center 和 view.bounds.width 彼此不相关。但是 view.center 和 view.frame.origin 之间存在*关系*（在示例中为 {150,150}）。

这允许您通过使用它的 frame 属性或通过设置它的 center 和 bounds 属性来固定视图对象的大小和位置。

您描述的中心不是视图的属性，但可以通过 {view.bounds.size.width/2,view.bounds.size.height/2} 获取和设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:44:17.037

来自 UIView 的类引用：“中心在其父视图的坐标系内指定”。因此，在您的示例中，如果您在超级视图中将中心设置为 (50,50)（通过 setter 方法），则子视图将在那里居中。如果你读回它（通过 getter），它也将是 (50,50)。

# javascript - javascript Blob 对象未定义

> ID：14648065
> 
> 赞同：0
> 
> 时间：2013-02-01T14:06:22.310
> 
> 标签：javascript, asp.net, jquery, blob, jscript

我正在尝试通过 XHR post 下载内容并将其保存在本地，因此我尝试将接收到的数据作为文件恢复到 blob 对象中，但是触发了 jscript 错误，提示 blob 未定义！

```
window.URL = window.URL || window.webkitURL;
$.ajax({
url: 'CreateFile.aspx',
type: 'POST',
data: { 'param1': "verylargedata1",
    'param2': "verylargedata2"
},
headers: {
    "accept": 'application/octet-stream',
    "content-type": 'application/x-www-form-urlencoded',
    "X-RequestDigest": $("#__REQUESTDIGEST").val()
},
error: function (xhr, ajaxOptions, thrownError) {
    alert(xhr.status);
    alert(thrownError);
},
success: function (data) {
    var blob = new Blob(data, { 'type': "application/octet-stream" }); //Jscript error undeined blob
    var url = window.URL.createObjectURL(blob);
    iframe.src = encodeURI(url);
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:09:09.430

许多浏览器不支持它。我猜您使用的是 IE9 或更低版本，因为它在错误消息中显示 JScript。IE10有一些支持。

有关当前浏览器支持，请查看：[http ://caniuse.com/#search=blob](http://caniuse.com/#search=blob)

# internationalization - Symfony i18n fromat_number_choice 无法正常工作

> ID：14648066
> 
> 赞同：1
> 
> 时间：2013-02-01T14:06:25.223
> 
> 标签：internationalization, symfony-1.4

`format_number_choice`我在 Symfony 1.4中使用了以下代码：

```
<?php echo format_number_choice(
        '[0]You do not have any remaining invites.|[1]You have one invite.|(1,+Inf]You have %1% invites.', array('%1%' => $users->getInvitatii()), $users->getInvitatii(), 'nrchoice') ?> 
```

翻译字符串如下所示：

```
<trans-unit id="2" approved="yes">
        <source>[0]You do not have any remaining invites.|[1]You have one invite.|(1,+Inf]You have %1% invites.</source>
        <target state="translated">[0]Nu mai aveți nicio invitație|[1]Mai aveți o invitație|{n: n % 100 < 20} Mai aveți %1% invitații.|{n: n % 100 > 20} Mai aveți %1% de invitații.</target>
</trans-unit> 
```

在罗马尼亚语中，有两种复数形式：`number%100 < 20`和`number%100 >= 20`。唯一的问题是我的字符串没有被翻译，我猜我的语法有错误，但我不知道问题出在哪里。我在 Symfony 1.4 文档中找到了这个语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:00:44.283

你可以试试：

php代码：

```
<?php echo format_number_choice(
  '[0]You do not have any remaining invites.|[1]You have one invite|{n: n % 100 < 20} You have %1% invites.|{n: n % 100 > 20} You have %1% invites.', 
  array('%1%' => $users->getInvitatii()), $users->getInvitatii(), 'nrchoice')
?> 
```

在您的翻译文件中：

```
<trans-unit id="2" approved="yes">
  <source>[0]You do not have any remaining invites.|[1]You have one invite|{n: n % 100 < 20} You have %1% invites.|{n: n % 100 > 20} You have %1% invites.</source>
  <target state="translated">[0]Nu mai aveți nicio invitație|[1]Mai aveți o invitație|{n: n % 100 < 20} Mai aveți %1% invitații.|{n: n % 100 > 20} Mai aveți %1% de invitații.</target>
</trans-unit> 
```

# c# - 是否可以从 C# 中的通用容器中计算一些东西？

> ID：14648073
> 
> 赞同：2
> 
> 时间：2013-02-01T14:06:41.993
> 
> 标签：c#, .net, .net-4.0

我有一个`object`.

这个对象正在铸造一个`Items Container`（我不知道什么项目，但我可以检查）。

但是有没有任何代码可以帮助我找到它包含多少项目？

我是说

```
 object[] arrObj = new object[2] {1, 2};
 object o = (object)arrObj; 
```

在这种情况下`arrObj`是一个数组，所以我可以检查：

`((Array)o).Length`//2

但是如果我有另外两个呢？

```
 ArrayList al = new ArrayList(2);
           al.Add(1);
           al.Add(2);
 object o = (object)al ; 
```

和

```
 List<object> lst= new List<object>(2);
 object o = (object)lst; 
```

是否有任何通用代码可以帮助我找到这个铸造对象中有多少项目（`o`在这个示例中）？

当然我可以检查`if (o is ...) { }`，但我正在寻找更通用的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:10:23.003

您可以强制转换为每个容器实现的接口：`IEnumerable`. 但是，为了提高性能，最好先尝试`IEnumerable<T>`：

```
var count = -1;
var enumerable = lst as IEnumerable<object>;
if(enumerable != null)
    count = enumerable.Count();
else
{
    var nonGenericEnumerable = lst as IEnumerable;
    count = nonGenericEnumerable.Cast<object>().Count();
} 
```

为了`Count()`可用，您需要添加`using System.Linq;`到您的 .cs 文件中。

请注意，此代码有一个很大的优势：如果集合实现`ICollection<T>`- 类似`List<T>`或强类型的引用类型数组 - 此代码在 O(1)中执行[[假设在 O(1) 中执行的具体实现`ICollection<T>.Count`]]。只有当它不喜欢`ArrayList`或强类型的值类型数组时，此代码才会在 O(n) 中执行，此外，它会在值类型数组的情况下将项目装箱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T14:08:26.933

你可以使用 linq。

```
var count = ((IEnumerable)o).Cast<object>().Count(); 
```

确保该类型`o`具有实现`IEnumerable`，并且您`using System.Linq`在文件的顶部具有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T14:10:29.867

那么它可以实现的最基本的接口是`IEnumerable`. 不幸的是，即使`Enumerable.Count`从 LINQ 实现`IEnumerable<T>`，但您可以轻松编写自己的：

```
public static int Count(IEnumerable sequence)
{
    // Shortcut for any ICollection implementation
    var collection = sequence as ICollection;
    if (collection != null)
    {
        return collection.Count;
    }

    var iterator = sequence.GetEnumerator();
    try
    {
        int count = 0;
        while (iterator.MoveNext())
        {
            count++;
        }
        return count;
    }
    finally
    {
        IDisposable disposable = iterator as IDisposable;
        if (disposable != null)
        {
            disposable.Dispose();
        }
    }
} 
```

请注意，这基本上等同于：

```
int count = 0;
foreach (object item in sequence)
{
    count++;
} 
```

...除了因为它从不使用，如果你的容器*实际上是*一个例子`Current`，它就不需要做任何装箱。*`int[]`*

 *调用它：

```
var sequence = container as IEnumerable;
if (sequence != null) 
{
    int count = Count(sequence);
    // Use the count
} 
```

值得注意的是，避免装箱实际上是一种微优化：它不太可能真的很重要。但是你可以用这种方法做*一次*，然后到处利用它。*

# apache - 基于查询字符串的 Apache 权限

> ID：14648078
> 
> 赞同：13
> 
> 时间：2013-02-01T14:06:55.233
> 
> 标签：apache, configuration, kerberos

我有一个需要身份验证的 apache 服务器，但是有些调用需要允许所有人使用。

关闭这些调用基于查询字符串，例如：

> /foo/api.php?Token=123&Task=DoStuff&Result=json

我用 LocationMatch 教过这会起作用，所以我制定了这个配置：

```
<LocationMatch ^/foo/api.php\?.*(Task=DoStuff).*>
    Order Allow,Deny
    Allow from All
</LocationMatch> 
```

但这并不能让我通过身份验证（这意味着我得到了 401）。如果我只是过滤`^/foo/api.php`，我会通过身份验证，但这还不够严格。

任何人都知道如何配置它以检查查询字符串中的 Task 参数？

对于身份验证，我们使用的是 kerberos，这是在整个站点上强制执行的 这是我们用于遏制的 conf

```
LoadModule auth_kerb_module modules/mod_auth_kerb.so

<Directory /var/www/html>
  Options FollowSymLinks
  AllowOverride All
  AuthType Kerberos
  Require valid-user
  AuthName "Kerberos Login"
  KrbMethodNegotiate on
  KrbMethodK5Passwd on
  KrbAuthRealms FOO.LOCAL
  KrbServiceName HTTP/server.foo.local@foo.LOCAL
  Krb5KeyTab /etc/httpd/conf/http.keytab
  Satisfy Any
  Order deny,allow
  Deny from all
  Allow from 192.168.72.90
  Allow from 192.168.72.91
  Allow from 192.168.72.94
  Allow from 192.168.72.95
  Allow from 127.0.0.1
</Directory> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T21:55:54.723

你可以[在这里](http://www.lucidiocy.com/2010/07/query-string-based-apache.html)阅读：

> <Location>、<LocationMatch>、<Directory> 和 <DirectoryMatch> Apache 指令允许我们将身份验证/授权应用到具有高度特异性的特定资源模式，**但不让我们控制查询字符串水平**。

因此，您必须使用[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)来实现您的目标。
例如：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} Task=DoStuff
RewriteRule ^/foo/api.php - [E=no_auth_required:1]

<LocationMatch ^/foo/api.php>
      Order allow,deny
      Allow from env=no_auth_required
      AuthType Basic
      AuthName "Login Required"
      AuthUserFile /var/www/foo/.htpasswd
      require valid-user
      Satisfy Any
</LocationMatch> 
```

**更新**

你已经说过：

> 如果我只是过滤 ^/foo/api.php 我通过了身份验证，但这还不够严格。

然后，尝试将以下行添加到您的配置中：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} Task=DoStuff
RewriteRule ^/foo/api.php - [E=no_auth_required:1]

<LocationMatch ^/foo/api.php>
      Order allow,deny
      Allow from env=no_auth_required
</LocationMatch> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-26T23:11:48.327

在 Apache **2.4**中，有一种更简单的方法可以做到这一点，而无需重写。

您可以使用`LocationMatch`来匹配`QUERY_STRING`，然后使用`If`块来匹配`QUERY_STRING`. 即，像这样：

```
<LocationMatch "^/foo/api.php">
  <If "%{QUERY_STRING} =~ /.*Task=DoStuff.*/" >
       Require all granted
  </If>
</LocationMatch> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-01-17T13:08:50.840

我们不能使用`<If %{QUERY_STRING} /a=b/>`，< apache 2.4 不支持

`RewriteEngine On`

`RewriteCond %{QUERY_STRING} test=ok`

`RewriteRule ^/ - [E=checkParamTest:1]`

`<LocationMatch "^/"> Order allow,deny Allow from env=checkParamTest Satisfy any </LocationMatch>`

`<Location /> AuthType openid-connect Require valid-user ... </Location>`

# javascript - 添加空格留下 HTML 标签

> ID：14648086
> 
> 赞同：1
> 
> 时间：2013-02-01T14:07:20.630
> 
> 标签：javascript, jquery, text

我有一个字符串，我想检查它是否包含大于或等于 15 个字符的单词。如果是这样，用空格将该单词拆分为 5 个字符，然后返回带有拆分单词的相同字符串。

我的代码有效，但问题是我的字符串也可能包含 HTML 标签，我不想碰它们。

```
function space_that(_e){

    var w = [];
    var t = $(_e).text();

    w = t.split(" ");

    for(var s in w)
        if(w[s].length >= 15)
            w[s] = w[s].substr(0,10) + " ";

    $(_e).text(w.join(" "));

    return true;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:15:13.450

只需检查该部分是否以 < 开头，那么它就是一个 HTML 标记。

```
function space_that(_e){

    var w = [];
    var t = $(_e).text();

    w = t.split(" ");

    for(var s in w) {
        if(w[s].length >= 15 
           && w[s].substring(0, 1) != "<" 
           && w[s].substring(w[s].length-1, 1) != ">")
            w[s] = w[s].substr(0,10) + " ";
    }

    $(_e).text(w.join(" "));

    return true;

} 
```

编辑：更正了错误（旧答案仅影响 html 标签）并添加了对开始和结束标签的检查。

以下版本应该适用于内部有空格的标签。

```
function space_that(_e){

    var w = [];
    var t = $(_e).text();

    w = t.split(" ");
    var inTag = false;

    for(var s in w) {
        if(w[s].substring(0, 1) == "<") inTag = true;
        if(w[s].substring(w[s].length-1, 1) == ">") inTag = false;
        if(inTag) continue;
        if(w[s].length >= 15 
           && w[s].substring(w[s].length-1, 1) != ">")
            w[s] = w[s].substr(0,10) + " ";
    }

    $(_e).text(w.join(" "));

    return true;

} 
```

# c++ - 创建只能由 Windows 服务打开的文件

> ID：14648087
> 
> 赞同：2
> 
> 时间：2013-02-01T14:07:22.227
> 
> 标签：c++, security, winapi, windows-services, dacl

是否可以使用 DACL 字符串选择这样的安全描述符，使得文件只能由 Windows 服务打开，**而不能由普通进程**打开，即使该进程由本地管理员帐户运行？

为了澄清，我只需要让非技术用户在记事本中打开它并篡改它**相当困难。**它不需要与愿意花费一个月时间进行逆向工程和破解它的程序员对抗。

我更喜欢使用 DACL 而不是锁定文件来实现这一点，因为这样我的 Windows 服务就不需要一直运行来保护文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:38:11.007

本地管理员帐户 = 上帝（至少在盒子上）。没有办法做到这一点。

您可以为您的服务定义一个特殊的特权帐户来运行，并使受保护文件上的 ACL 只允许该用户（以及所有机器管理员）访问。您可以禁止使用该服务帐户进行交互式登录。

如果您主要关心的是被交互式用户篡改，您可能需要一个策略，使本地用户默认不以本地管理员权限运行。不幸的是，您不能允许“部分”本地管理员权限 - 要么全有，要么全无。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:29:08.873

我对 DACL 的了解还不够，无法说明您是否或如何使用这些来完成您想要的。除了将其限制为本地管理员帐户之外，我还可以想到一些可以使某人更难篡改文件的方法：

1.  让您的服务自动启动，并立即打开文件，没有共享选项。只要您的服务打开它，另一个进程就无法打开它。
2.  计算文件内容的哈希值加上硬编码到您的服务中的盐，并将其存储在其他地方，例如，在另一个文件中、注册表中，甚至在线中。下次打开文件时，请验证哈希值，这将告诉您自上次打开文件以来是否有人篡改过该文件。

这些*都不*是万无一失的，但听起来你的目标只是让它变得更难。没有万无一失的方法可以阻止具有管理员权限的用户。

# javascript - javascript：函数的执行顺序 - 函数完成处理之前的嵌套函数返回值？

> ID：14648088
> 
> 赞同：0
> 
> 时间：2013-02-01T14:07:23.723
> 
> 标签：javascript, jquery, function, asynchronous

我只是在学习 JavaScript，对于像我这样的人来说，似乎有很多关于它异步处理函数的方式的信息。

虽然我仍在努力解决这个问题，但由于我正在尝试做的事情，我发现自己正在与一些共享点 csom 苦苦挣扎。也许我只是在做这完全错误的事情，但正如我所说，只是在学习。

尝试使用 SP CSOM 来获取这样的列表数据：

```
getGridData() {
    var gridURL = "https://mySite/ListData.svc/Projects";
    var request = new Sys.Net.WebRequest();
    request.set_httpVerb("GET");
    request.set_url(gridURL);
    request.get_headers()["Accept"] = "application/json";
    request.add_completed(onCompletedProjectCallback);
    request.invoke();
}

onCompletedProjectCallback(response, eventArgs) {
      var getProject = eval("(" + response.get_responseData() + ")");
      var buildMarkUp = '';
      for (var i = 0; i < getProject.d.results.length; i++)  {
         buildMarkUp += "<div>" + getProject.d.results[i].ProjectName + "</div>";
      }
} 
```

这很好用。

我确实知道其他方法，例如 spservices，但我喜欢这个，因为它对我来说似乎更快并且返回 JSON，这是更可取的。

当我想使用`ProjectID`上面的调用另一个函数并传递 id 以从列表中获取相关值时会发生什么。

但是，我想在将`buildMarkUp`字符串附加到 DOM 之前按顺序构建字符串（哦，是的，jQuery 顺便说一句）。像这样的事情可能是完全错误的，但这是我试图做的：

```
onCompletedProjectCallback(response, eventArgs) {
      var getProject = eval("(" + response.get_responseData() + ")");
      var buildMarkUp = '';
      for (var i = 0; i < getProject.d.results.length; i++)  {
         buildMarkUp += "<div>" + getProject.d.results[i].ProjectName + "</div>";

      //call nested function here so that I can go retrieve values for each ProjectID from another list
       var getOtherData = getRelatedData(getProject.d.results[i].ProjectID);
      }
}

getRelatedData(passedProjectID) {
     // have to use the same method as the original to get more sharepoint list data
      var relatedURL = "https://mySite/ListData.svc/Related$filter=ProjectID eq " + passedProjectID;
    var request = new Sys.Net.WebRequest();
    request.set_httpVerb("GET");
    request.set_url(relatedURL);
    request.get_headers()["Accept"] = "application/json";
    request.add_completed(onCompletedRelatedCallback);
    request.invoke();
} 
```

不过，这就是我真正为此苦苦挣扎的地方。

单独的回调意味着如果我返回正确，它不会返回到带有数据的原始函数？
原始函数是否继续处理并仅触发嵌套函数？
那么如何控制何时/如何/将哪些值返回给原始函数？我可以吗？

基本上，如果我试图构建一个表，其中每个引用的项目行包含来自其他共享点列表的数据，并且我需要控制要附加到 DOM 的字符串的构建顺序，该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:37:14.723

您是正确的，执行 Web 请求的函数会立即继续并且无法从该调用返回数据。您需要对回调进行编码，以将它们收集的数据添加到公共数据结构中——也许创建一个将数据累积为新属性的对象。当您收集了所有数据后，最后一个回调可以构建 HTML 元素。如果您同时执行多个 AJAX 请求，则每个回调都可以调用一个通用函数来查看是否所有请求都已完成。例如：

```
function checkLoadingComplete() {
    if (loadedData.project && loadedData.relatedData && loadedData.summaryData) {
         //now build the HTML elements
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:27:47.353

> 单独的回调意味着如果我返回正确，它不会返回到带有数据的原始函数？

是的。`return`从正在执行的函数返回，但不等待 ajax 加载事件及其处理程序获取数据。

> 原始函数是否继续处理并仅触发嵌套函数？

是的。它启动了一堆 ajax 请求，并`undefined`为每个请求返回。

> 那么如何控制何时/如何/将哪些值返回给原始函数？我可以吗？

您将需要使用回调，您永远不会使用“ `return`”值。

# php - Json 调用 JSON.parse：数据意外结束

> ID：14648089
> 
> 赞同：1
> 
> 时间：2013-02-01T14:07:33.537
> 
> 标签：php, ajax, json

我一直在寻找 stackoverflow 来寻找我的问题的答案，但我似乎无法找到发生这种情况的原因。

我创建了一个返回 JSON 对象的网络服务器：

```
http://213.125.101.19/api.php?function=test 
```

之后，我使用以下 javascript 创建了一个 HTML 文件，以使用 Ajax 调用 JSON

```
<script language="javascript" type="text/javascript">
    <!-- 
    //Browser Support Code
    function ajaxCall(){
        var ajaxRequest;  // The variable that makes Ajax possible!

        try{
            // Opera 8.0+, Firefox, Safari
            ajaxRequest = new XMLHttpRequest();
        } catch (e){
            // Internet Explorer Browsers
            try{
                ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try{
                    ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e){
                    // Something went wrong
                    alert("Your browser broke!");
                    return false;
                }
            }
        }

        // Create a function that will receive data sent from the server
        ajaxRequest.onreadystatechange = function(){
            if(ajaxRequest.readyState == 4){
                var response = ajaxRequest.responseText;
                obj = JSON.parse(response);
                console.log(obj);

                if(response.indexOf("Fatal error")>=0){
                    alert('Error, Try again.');
                }else{
                    document.getElementById("response").value = response;               
                }                 

            }   
        }

            ajaxRequest.open("GET", "http://213.125.101.19/api.php?function=test", true);
            ajaxRequest.send(null); 
    }
    </script> 
```

当我运行此代码时，我的 Firebug 返回

“SyntaxError: JSON.parse: 数据 obj = JSON.parse(response) 意外结束；”

如果我通过验证器运行我的 JSON，一切似乎都很好。

任何想法如何解决这一问题？

亲切的问候，卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:52:09.723

这个问题的问题是我的 HTML 请求是从另一台电脑发送到我的网络服务器的。

@Olaf Dietsche 说检查 ajaxrequest 状态是个好主意。这给出了一个 0 ，这不是一个成功的响应。

将html请求文件复制到网络服务器后，问题就解决了。

感谢大家帮助我解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:44:16.257

JSON 看起来很简单。我猜调用或返回值有问题。

检查`status`以及`responseType`_

```
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        console.log('status=' + ajaxRequest.status +
                    ', statusText=' + ajaxRequest.statusText +
                    ', responseType=' + ajaxRequest.responseType +
                    ', responseText=' + ajaxRequest.responseText);
...
} 
```

# xml - 删除并引用；和列表的元素（ erlang ）

> ID：14648091
> 
> 赞同：0
> 
> 时间：2013-02-01T14:07:44.733
> 
> 标签：xml, string, functional-programming, erlang, ejabberd

我有一个要显示为字符串的记录列表，然后传递给 XML 属性：

```
Li = (get the record), 
```

好像：

```
?INFO_MSG("LIST::::: ~p~n", [?SETS:to_list(Li)]),
[{"9993939","some.com",[]}, {"12341234","some.com",[]}] 
```

我删除了一些重复项：

```
Li = ?SETS:to_list(List)
Set = sets:from_list(Li)
O = sets:to_list(Set) 
```

在此之后，我使用 io_lib:format 来获取我的最终字符串：

```
OO = io_lib:format("~p", [O]) 
```

但是当我将它提供给 XML 时，它带有 & quote; 人物，

```
"[{& quote;9993939& quote;,& quote;some.com& quote;,[]},{&
quote;12341234&& quote;,& quote;some.com& quote;,[]}]" 
```

如何删除这些字符？

其实我的最终目标

由此：

```
"[{"9993939","some.com",[]}, {"12341234","some.com",[]}]" 
```

仅获取列表中的数字：

```
"[9993939,12341234]" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:01:52.920

你的问题很模糊......很难理解，但这是你想要的吗？

```
-module(vague).
-compile(export_all).

extract(Li)->
    [Element || {ok, [Element],[]} <- [io_lib:fread("~d", Projection) ||
                                          {Projection, _, _} <- Li]].

1> vague:extract([{"9993939","some.com",[]}, {"12341234","some.com",[]}]).
   [9993939, 12341234] 
```

# symfony - 获取其他用户的 ACL，而不是 Symfony2 中当前登录的用户？

> ID：14648093
> 
> 赞同：5
> 
> 时间：2013-02-01T14:07:54.577
> 
> 标签：symfony, acl, symfony-2.1

我正在使用 Symfony2 构建一个 Web 应用程序。我一直在实现 ACL 模块，它运行良好，但在尝试制作面板来管理权限时偶然发现了一个问题。

所以我作为用户可以创建一个项目并在他的项目中添加“参与者”。参与者可以具有三种不同的访问类型，它们是来自掩码生成器的`MASK_VIEW`掩码`MASK_EDIT`、、、`MASK_OPERATOR`。使用`ProblematicAclManagerBundle`我们可以通过这样做轻松地添加对这些的访问：

```
$this->aclManager->addObjectPermission($project, $mask, $user); 
```

问题是，当您想要编辑项目时，您必须能够列出具有当前访问权限的用户。该功能`isGranted`可以让您获得当前登录用户的用户权限，但不能获得其他用户的权限。与`addXXXX`有三个参数的函数相比，**`isGranted`**只有两个参数，安全对象和掩码。因此，您无法使用此功能找到其他用户的权限。

* * *

有没有办法获得其他用户的内置权限？还是我必须构建自己的 SQL 查询来从 acl 表中提取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:05:42.780

也许您可以尝试在安全上下文中放置另一个令牌，链接到另一个用户：

```
$securityContext->setToken(new Token($user2));
$securityContext->isGranted('test', $object); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:33:46.307

这就是我现在所拥有的......我使用嵌套选择进行了原始 sql 查询。

```
//...
$objectClass = get_class($object);
$objectId = $object->getId();
$userSecurityIdentity = get_class($user) . '-' . $user->getUsername();

$sql = "SELECT `mask` FROM `acl_entries`" .
        "WHERE `object_identity_id` in (" .
            "SELECT `id` FROM `acl_object_identities` " .
            "WHERE `object_identifier` = :objectId AND `class_id` in (" .
                "SELECT `id` FROM `acl_classes` WHERE `class_type` = :objectClass" .
            ")" .
        ")" .
        "AND `security_identity_id` in (" .
            "SELECT `id` FROM `acl_security_identities`" .
            "WHERE `identifier` = :userSecurityIdentity" .
        ");";

$query = $this->entityManager->getConnection()->executeQuery($sql, array(
    'objectId'             => $objectId,
    'objectClass'          => $objectClass,
    'userSecurityIdentity' => $userSecurityIdentity)
);

$data = $query->fetch();
$mask = $data['mask'];
// ... 
```

该解决方案有效，但对我来说不是最好的解决方案，因为您实际上是直接查询表而不是使用 ACL 模块，如果我发现其他内容，我会更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:08:22.227

那么`Symfony\Component\Security\Acl\Model\AclInterface`提供了这个方法：

```
/**
 * Determines whether access is granted
 *
 * @throws NoAceFoundException when no ACE was applicable for this request
 * @param array   $masks
 * @param array   $securityIdentities
 * @param Boolean $administrativeMode
 * @return Boolean
 */
public function isGranted(array $masks, array $securityIdentities, $administrativeMode = false); 
```

# python - 在 Python 中合并惰性流（使用生成器）

> ID：14648095
> 
> 赞同：2
> 
> 时间：2013-02-01T14:08:05.520
> 
> 标签：python, functional-programming, generator, primes, hamming-numbers

我正在使用 Python 3 的功能，并尝试实现计算汉明数的经典算法。那是只有 2、3 或 5 作为素因数的数字。第一个汉明数是 2、3、4、5、6、8、10、12、15、16、18、20 等等。

我的实现如下：

```
def scale(s, m):
    return (x*m for x in s)

def merge(s1, s2):
    it1, it2 = iter(s1), iter(s2)
    x1, x2 = next(it1), next(it2)
    if x1 < x2:
        x = x1
        it = iter(merge(it1, s2))
    elif x1 > x2:
        x = x2
        it = iter(merge(s1, it2))
    else:
        x = x1
        it = iter(merge(it1, it2))
    yield x
    while True: yield next(it)

def integers():
    n = 0
    while True:
        n += 1
        yield n

m2 = scale(integers(), 2)
m3 = scale(integers(), 3)
m5 = scale(integers(), 5)

m23 = merge(m2, m3)

hamming_numbers = merge(m23, m5) 
```

合并的问题似乎不起作用。在此之前，我以同样的方式实现了埃拉托色尼筛法，并且效果非常好：

```
def sieve(s):
    it = iter(s)
    x = next(it)
    yield x
    it = iter(sieve(filter(lambda y: x % y, it)))
    while True: yield next(it) 
```

这个使用与我的合并操作相同的技术。所以我看不出有什么区别。你有什么想法？

（我知道所有这些都可以通过其他方式实现，但我的目标完全是理解 Python 的生成器和纯函数功能，包括递归，而不使用类声明或特殊的预构建 Python 函数。）

UPD：对于 Will Ness，这是我在 LISP 中实现的算法（实际上是 Racket）：

```
(define (scale str m)
  (stream-map (lambda (x) (* x m)) str))

(define (integers-from n)
  (stream-cons n
               (integers-from (+ n 1))))

(define (merge s1 s2)
  (let ((x1 (stream-first s1))
        (x2 (stream-first s2)))
    (cond ((< x1 x2)
           (stream-cons x1 (merge (stream-rest s1) s2)))
          ((> x1 x2)
           (stream-cons x2 (merge s1 (stream-rest s2))))
          (else
           (stream-cons x1 (merge (stream-rest s1) (stream-rest s2)))))))

(define integers (integers-from 1))

(define hamming-numbers
  (stream-cons 1 (merge (scale hamming-numbers 2)
                        (merge (scale hamming-numbers 3)
                               (scale hamming-numbers 5))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:29:53.730

你的算法不正确。您`m2, m3, m5`应该缩放`hamming_numbers`，而不是`integers`。

主要问题是：你无条件地`merge()`调用它的两个参数，所以***两者都***前进了一步。因此，在生成第一个数字之后，例如对于生成器，在下一次调用时，它会看到它的第一个参数 as和第二个参数 as 。已经没了。所以它总是拉出它的两个参数，并总是返回第一个的头部（[http://ideone.com/doeX2Q](http://ideone.com/doeX2Q)的测试条目）。`next()`**`2``m23`*`4(,6,8,...)`****`6(,9,12,...)`***`3`**

 **调用`iter()`完全是多余的，它在这里没有添加任何内容。当我删除它（[http://ideone.com/7tk85h](http://ideone.com/7tk85h)）时，程序的工作原理完全相同并产生完全相同（错误）的输出。通常`iter()`用于创建惰性迭代器对象，但这里的参数已经是这样的生成器。

`iter()`您也无需致电`sieve()`（[http://ideone.com/kYh7Di](http://ideone.com/kYh7Di)）。`sieve()`已经定义了一个生成器，并且`filter()`在 Python 3 中从一个函数和一个可迭代对象创建了一个迭代器（生成器*是*可迭代的）。另请参见[Python 的生成器和迭代器之间的差异](https://stackoverflow.com/questions/2776829/difference-between-python-generators-vs-iterators)。

我们可以像这样进行合并，而不是：

```
def merge(s1, s2):
  x1, x2 = next(s1), next(s2)
  while True:
    if x1 < x2:
        yield x1
        x1 = next(s1)
    elif x1 > x2:
        yield x2
        x2 = next(s2)
    else:
        yield x1
        x1, x2 = next(s1), next(s2) 
```

* * *

递归本身在定义`sieve()`函数时也不是必需的。事实上，它只会掩盖该代码的巨大缺陷。它产生的任何素数都将由其值以下的所有素数进行测试——但只有低于其平方根的素数才是真正需要的。我们可以很容易地以非递归^((*))样式 ( [http://ideone.com/Qaycpe](http://ideone.com/Qaycpe) ) 修复它：

```
def sieve(s):    # call as: sieve( integers_from(2))
    x = next(s)  
    yield x
    ps = sieve( integers_from(2))           # independent primes supply
    p = next(ps) 
    q = p*p       ; print((p,q))
    while True:
        x = next(s)
        while x<q: 
            yield x
            x = next(s)
        # here x == q
        s = filter(lambda y,p=p: y % p, s)  # filter creation postponed 
        p = next(ps)                        #   until square of p seen in input
        q = p*p 
```

^((*))（嗯，实际上，这也是递归的，但与以前的方式非常不同）

这现在变得非常、非常、*非常*高效（另请参阅：[解释这段输出素数流的 haskell 代码](https://stackoverflow.com/questions/1764163/help-explain-this-chunk-of-haskell-code-that-outputs-a-stream-of-primes/8871918#8871918)）。

递归与否，只是*代码*的句法特征。实际的运行时结构是相同的——`filter()`适配器被提升到输入流的顶部——要么是在适当的时候，要么是太快了（所以我们最终会得到太多的适配器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-30T02:03:24.773

我将提出这种不同的方法 - 使用 Python `heapq`( `min-heapq`) 和生成器（*惰性评估）*（如果您不坚持保留该`merge()`函数）

```
from heapq import heappush, heappop

def hamming_numbers(n):
    ans = [1]

    last = 0
    count = 0

    while count < n:
        x = heappop(ans)

        if x > last:
            yield x

            last = x
            count += 1

            heappush(ans, 2* x)
            heappush(ans, 3* x)
            heappush(ans, 5* x) 
```

```
>>> n  = 20
>>> print(list(hamming_numbers(20)))
   [1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 25, 27, 30, 32, 36] 
```**

# d3.js - 如何用nvd3绘制对数折线图

> ID：14648096
> 
> 赞同：7
> 
> 时间：2013-02-01T14:08:07.383
> 
> 标签：d3.js, nvd3.js

有没有办法用 nvd3 绘制对数折线图

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T16:43:18.777

我不是 nvd3/d3 专家，但我做了一些看起来像这样的东西`nv.models.lineChart`：

```
chart.yScale(d3.scale.log());
chart.yAxis.tickValues([1,10,100,1000,10000,1000000]);
chart.forceY([1,1000000]); 
```

笔记：

1.  模型之间的`yScale`功能可能略有不同（例如`chart.lines.yScale`& `cart.lines2.yScale`on ）`nv.models.lineWithFocusChart`
2.  这似乎不适用于所有型号
3.  ~~[D3目前只支持base10](https://github.com/mbostock/d3/issues/928)~~ 从[3.1.0](https://github.com/mbostock/d3/releases/v3.1.0)版开始， D3.js 支持[任意对数底](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-log_base)，用法示例[http://bl.ocks.org/mbostock/7621155](http://bl.ocks.org/mbostock/7621155)

# openid - 使用 OAuth2.0 识别登录的 Google 帐户用户

> ID：14648098
> 
> 赞同：1
> 
> 时间：2013-02-01T14:08:17.123
> 
> 标签：openid, oauth-2.0, google-oauth, google-api-php-client

我正在开发一个使用 OAuth2 使用他们的 Google 帐户登录用户的网络应用程序。我也在访问一些谷歌数据 API，所以我也要求刷新令牌和离线访问（以防它有所作为）。

我的问题如下：在应用程序的用户第一次登录后，OAuth 和我将令牌/用户 ID 保存在数据库中，我需要有一个在后续访问中识别用户的系统。

为此，我将 Google 用户 ID（通过调用“userinfo”端点获得）保存在 Session 变量中。这工作正常，直到用户退出他们的 Google 帐户并可能使用另一个帐户（到 Google，而不是我的应用程序）登录。此时，我的应用程序不再具有正确的登录用户，并且可以显示不属于正确用户的数据。

有谁知道我如何有效地识别登录的 Google 帐户用户？

我想我总是可以调用 userinfo 端点，但是在我的应用程序的每个页面上执行此操作对我来说似乎有点过分，并且想要一种更有效的方法。

我正在使用 PHP 编程并使用“google-api-php-client”库进行开发。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:16:34.533

你是对的。目前最有效的方法是查询 userinfo 端点。

但是，根据您的 UI 外观，我们发现提供更改身份的选项是一个很好的折衷方案。一个小链接，比如“不是你？” 在登录按钮上是一个选项。有一个非常新的 api 没有完全记录，它可以让您强制用户选择另一个帐户。看到这个答案：[强制谷歌帐户选择器](https://stackoverflow.com/questions/14384354/force-google-account-chooser)

我们希望让网站更加无缝和高效，但目前没有什么要宣布的。

# java - Java 并发是如何为 Windows 实现的？

> ID：14648104
> 
> 赞同：-1
> 
> 时间：2013-02-01T14:08:33.157
> 
> 标签：java, concurrency

有谁知道如何为 Windows 实现 Java 并发？它是否调用本机 Windows API？我从 OpenJDK 下载了源代码。到目前为止，我还没有找到任何与并发相关的文件。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:21:01.510

您可能指的是整个 Java 运行时历史中使用的两种线程模型：**绿色线程**模型（用户级线程，由 JVM 管理）和非绿色线程模型（**本机线程**，由操作系统管理） .

[正如这里](https://stackoverflow.com/questions/5713142/green-threads-vs-non-green-threads)所回答的那样，在任何流行的平台（Windows、Linux、Solaris）上都不再使用（并且很长时间没有使用）绿色线程。因此，要回答您的问题，**Java 线程是**实现级别的真正线程。

关键字的`synchronized`功能基于每个对象都与“隐藏”监视器相关联的事实。因此，`synchronized`通过发出 和 的字节码来工作，这些字节码`monitorenter`是*JVM*分别锁定和解锁隐藏监视器`monitorexit`的指令。

# search - 适用于 SharePoint 的 FAST ESP 或 FAST Search 服务器

> ID：14648109
> 
> 赞同：0
> 
> 时间：2013-02-01T14:08:49.587
> 
> 标签：search, fastsearch

我正在学习 Microsoft FAST 搜索来解决我们的搜索问题。我正在为 Sharepoint (FS4SP) 而不是 FAST Enterprise 搜索平台 (FASTESP/FSIS/FSIA) 的 FAST Search 获取资源。我对 FAST ESP 更感兴趣，因为我不想要任何 sharepoint 依赖，但我观察到的所有文档似乎都与 Sharepoint 集成版本有关。FS4SP 是否提供与 FASTESP/FSIS/FSIA 相同的功能？

我想使用此搜索解决方案解决的主要问题是：

1.搜索公共和私人（需要用户认证）数据。对于私人数据搜索，用户应进行身份验证并仅查看授权内容。

2.搜索网络和非网络数据。我们有一些桌面（客户端-服务器）应用程序，我们想让应用程序/用户数据可搜索。

3.解决方案应集成所有网络、桌面和移动应用程序。因此，用户应该能够从 Web、桌面和移动应用程序执行搜索。

FS4SP能解决以上所有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:48:41.167

SharePoint 2010 的 FAST ESP 和 FAST Search 都可以满足您的要求。如果您要开始一个新项目，FAST Search for SharePoint 2010 是您可以购买的唯一选项。我建议使用默认情况下包含 FAST Search 组件的 SharePoint 2013。

FAST ESP 的大部分文档都是随产品一起提供的 PDF 文档。对于 SharePoint 版本，大部分内容都可以在网上找到。

# nhibernate - NHibernate QueryOver 与 JoinQueryOver 选择所有列

> ID：14648110
> 
> 赞同：2
> 
> 时间：2013-02-01T14:08:51.553
> 
> 标签：nhibernate, queryover

我有一些带有多个连接的 QueryOver，就返回的对象而言，我得到的结果是可以的。这是代码>

```
 var l = session.QueryOver<Discount>(() => discount)
                .JoinQueryOver<ConPrdGrp>(r => r.ConPrdGrps)
                .JoinQueryOver<PrdGroupTree>(k => k.PrdGroupTree)
                .JoinQueryOver<Product>(g => g.Products)
                .Where(p => p.ProductID == Product.ProductID)
                .And(() => discount.FomDato <= DateTime.Now && discount.TomDato >= DateTime.Now).List(); 
```

但是如果我查看 SQL 语句，我可以看到生成的查询从所有连接的表中选择了所有列，尽管结果只返回了 Discount 对象的列表。我可以使用投影获得折扣的一些属性，并且查询会小得多。但是我如何指示 NHibernate 从 Discount 表中获取列，而不是从所有连接表中获取列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:15:24.820

据我所知，没有像这样的简单方法：`.Select(Projections.Properties<Discount>())`. 检查这个有点过时的问题（[NHIbernate: Shortcut for projecting all properties?](https://stackoverflow.com/q/5762937/1679310)）

您可以做的是明确命名您想要查看的列：

```
 ... // the QueryOver you have
  .SelectList (l => l
    .Select(() => discount.ID).WithAlias(() => discount.ID)
    .Select(() => discount.Code).WithAlias(() => discount.Code)
    ...
  )
  .TransformUsing(Transformers.AliasToBean<Discount>())
  ... 
```

第二种方法可能是创建子查询，然后只创建`QueryOver<Discount>()` [16.8。子查询](http://nhforge.org/doc/nh/en/index.html#queryqueryover-subqueries)

```
QueryOver<Discount> subQuery =
    QueryOver.Of<Discount>(() => innerDiscount)
      .JoinQueryOver<ConPrdGrp>(r => r.ConPrdGrps)
      .JoinQueryOver<PrdGroupTree>(k => k.PrdGroupTree)
      .JoinQueryOver<Product>(g => g.Products)
      .Where(p => p.ProductID == Product.ProductID)
      .And(() => innerDiscount.FomDato <= DateTime.Now 
              && innerDiscount.TomDato >= DateTime.Now).List()
      .Select( Projections.Property(() => innerDiscount.ID))
 ;

var query = session.QueryOver<Discount>(() => discount)
  .Where(Subqueries.PropertyIn("ID", subQuery.DetachedCriteria))
  ; 
```

# git - git内部分支如何工作

> ID：14648111
> 
> 赞同：0
> 
> 时间：2013-02-01T14:08:53.647
> 
> 标签：git, branch, dvcs

我正在使用 github 并且有趣的是，git 分支如何在内部工作。创建新分支时是否复制一些数据。它如何以及在何处存储分支的差异，以及它如何允许在它们之间快速切换。当我更改早午餐时，磁盘上的文件发生了什么变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:00:09.360

分支是提交上的标签，在添加时移动新提交，而该标签是提交树的活动“分支”。当创建附加标签、使其处于活动状态并将提交添加到该“分支”时，会产生多个分支。

在内部，分支的存储就是这样，一个指向它所附加到的提交的标签。

git book 中的这一章是一个很好的入门参考：[3.2 Git Branching - Basic Branching and Merging](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:58:16.963

Pro Git 中的 Git 分支章节是一个好的开始： http: [//git-scm.com/book/en/Git-Branching](http://git-scm.com/book/en/Git-Branching)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:13:48.817

github是一个网站。我认为您的意思是 git，即软件。如果你想对它的设计有一个基本的了解，我建议你看看维基百科的文章：[http://en.wikipedia.org/wiki/Git_(software)](http://en.wikipedia.org/wiki/Git_(software))

# mysql - 创建一个更好的查询来汇总两个表

> ID：14648116
> 
> 赞同：1
> 
> 时间：2013-02-01T14:09:15.143
> 
> 标签：mysql

我创建了一个查询，它从两个表中收集数据，将它们汇总并显示案例数和总和：

```
SELECT
    count(ut.id) AS total
    , ( SUM(internal_account) - SUM(( SELECT
            SUM( ub.bill_summs )
        FROM
            u_billing ub
        WHERE
            ub.bill_types = 'correction'
            AND ub.contract_id = ut.contract_id
      )) ) AS summ
FROM  
    u_transactions ut
WHERE
    ut.nulled = 0
    AND ut.type = 'comission'
    AND ut._status = 'not_paid'
    AND DATE( ut.add_timestamp ) = DATE( '2012-05-11' ); 
```

但它真的很慢。在测试用例中，它给出了这样的结果：

```
+-------+-------+
| total | summ  |
+-------+-------+
|   182 | 15105 |
+-------+-------+
1 row in set (4.13 sec) 
```

182 个案例为 4.13 秒，仅 1 天，但我的实时服务器有超过 600k 个案例，所以这将**非常**慢。

任何想法，我如何重写查询以获得更好的性能？

* * *

重新制作查询的解决方案：

```
DELETE FROM tmpContractSums;
INSERT INTO tmpContractSums
SELECT
    ub.contract_id
    , SUM( ub.bill_summs ) AS bill_summs
FROM
    u_billing ub
WHERE
    ub.bill_types = 'correction'
GROUP BY ub.contract_id;

SELECT
    count(ut.id) AS total
    , ( SUM(internal_account) - SUM(bill_summs) )
FROM  
    u_transactions ut
LEFT JOIN tmpContractSums t ON ut.contract_id = t.contract_id
WHERE
    ut.nulled = 0
    AND ut.type = 'comission'
    AND ut._status = 'not_paid'
    AND ut.add_timestamp BETWEEN '2012-05-11 00:00:00' AND '2012-05-11 23:59:59'; 
```

执行时间：**500ms**

PS：由于我无法使用网络用户删除表格，因此我刚刚创建了表格：

```
CREATE TABLE tmpContractSums AS SELECT contract_id, bill_summs FROM u_billing WHERE 1 = 0; 
```

我正在删除记录。不如 drop 快，但仍然比原始快得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:20:10.007

简单地使用“临时”表怎么样？

```
DROP TABLE IF EXISTS tmpContractSums;
CREATE TABLE tmpContractSums AS SELECT contract_id, bill_summs FROM u_billing WHERE 1 = 0;
INSERT INTO tmpContractSums
SELECT
    ub.contract_id
    SUM( ub.bill_summs ) AS bill_summs
FROM
    u_billing ub
WHERE
    ub.bill_types = 'correction'
GROUP BY ub.contract_id;

SELECT
    count(ut.id) AS total
    , ( SUM(internal_account) - COALESCE(bill_summs, 0) )
FROM  
    u_transactions ut
LEFT JOIN tmpContractSums t ON ut.contract_id = t.contract_id
WHERE
    ut.nulled = 0
    AND ut.type = 'comission'
    AND ut._status = 'not_paid'
    AND ut.add_timestamp BETWEEN '2012-05-11' AND '2012-05-11 23:59:59'; 
```

这应该更快，如果您愿意，您可以将索引添加到“临时表”，或者如果您有足够的空间，则将其设为具有 engine=memory 的表。

或者：

```
DROP TABLE IF EXISTS tmpContractSums;
CREATE TABLE tmpContractSums AS SELECT contract_id, bill_summs FROM u_billing WHERE 1 = 0;
INSERT INTO tmpContractSums
SELECT
    ub.contract_id
    SUM( ub.bill_summs ) AS bill_summs
FROM
    u_billing ub
WHERE
    ub.bill_types = 'correction'
GROUP BY ub.contract_id;

SELECT
    count(ut.id) AS total
    , ( SUM(internal_account) - (SELECT bill_summs FROM tmpContractSums t WHERE ut.contract_id = t.contract_id ) )
FROM  
    u_transactions ut
WHERE
    ut.nulled = 0
    AND ut.type = 'comission'
    AND ut._status = 'not_paid'
    AND ut.add_timestamp BETWEEN '2012-05-11' AND '2012-05-11 23:59:59'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:16:18.777

希望这可以帮助

```
 SELECT 
        COUNT(A.id) AS total,
        (SUM(A.internal_account) - SUM(COALESCE(B.bill_sums, 0)) AS 'Sum'
    FROM
    u_transactions A
    LEFT JOIN u_billing B on A.contract_id = B.contract_id
    WHERE 
    A.nulled = 0 AND
    A.type = 'comission' AND
    A._status = 'not_paid' AND
    DATE(A.add_timestamp) = DATE('2012-05-11')
    AND B.bill_types = 'correction'; 
```

编辑：

我没有注意到您对子查询的结果求和。：

```
SELECT
    count(ut.id) AS total
    , ( SUM(internal_account) - **SUM**(( SELECT
            **SUM**( ub.bill_summs )
        FROM
            u_billing ub
        WHERE
            ub.bill_types = 'correction'
            AND ub.contract_id = ut.contract_id
      )) ) AS summ
FROM  
    u_transactions ut 
```

也许你可以用合并替换总和：

```
-COALESCE(( SELECT
        **SUM**( ub.bill_summs )
    FROM
        u_billing ub
    WHERE
        ub.bill_types = 'correction'
        AND ub.contract_id = ut.contract_id
  ),0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:20:53.917

不是吗？我的意思是它必须工作得更好。

```
SELECT
    count(ut.id) AS total
    , SUM(internal_account - COALESCE(ub.b_summs, 0)) summ
FROM u_transactions ut
    LEFT JOIN 
        (
            SELECT 
                contract_id,
                SUM(bill_summs) b_summs
            FROM u_billing
            WHERE bill_types = 'correction'
            GROUP BY contract_id
        ) AS ub
        ON ub.contract_id = ut.contract_id
WHERE
    ut.nulled = 0
    AND ut.type = 'comission'
    AND ut._status = 'not_paid'
    AND DATE( ut.add_timestamp ) = DATE( '2012-05-11' ); 
```

此外，您必须避免在应用于表列的 WHERE 子句上使用函数。如果你有索引，使用函数不允许使用索引。改用这个：

```
AND ut.add_timestamp >= DATE( '2012-05-11' ) AND ut.add_timestamp < DATE( '2012-05-12' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:33:32.923

这应该加快速度：

```
SELECT 
   COUNT(ua.id) as total,
   SUM(ua.internal_account - ua.corrections) as 'sum'
FROM (  
    SELECT 
       ut.id,
       ut.internal_account,
       SUM(COALESCE(ub.bill_sums, 0)) AS corrections
    FROM
       u_transactions ut
          LEFT JOIN u_billing ub on ut.contract_id = ub.contract_id
    WHERE 
       ut.nulled = 0 AND
       ut.type = 'comission' AND
       ut._status = 'not_paid' AND
       DATE(ub.add_timestamp) = DATE('2012-05-11') AND 
       ut.bill_types = 'correction'
    GROUP BY
       ut.id
    ) as ua 
```

编辑：更正`add_timestamp`表前缀并插入缺失`GROUP BY`

# dojo - dojox.mobile：自定义 ListItem 小部件：“...不是构造函数”

> ID：14648117
> 
> 赞同：0
> 
> 时间：2013-02-01T14:09:15.060
> 
> 标签：dojo, listitem, dojox.mobile

我想为我的 dojox.mobile 应用程序创建一个自定义 ListItem 小部件。如果我在我的 HTML 代码中使用它，它可以工作，但如果我尝试以编程方式使用它，它会抛出一个 TypeError。

这是我的自定义 ListItem 的 JS 代码：

```
define([
"dojo/_base/declare",
"dojo/dom-construct",
"dojox/mobile/ListItem"], function(declare, domConstruct, ListItem){

var LabeledInputListItem = declare("myapp.LabeledInputListItem", ListItem, {

    labelText: "",
    placeholder: "",
    value: "",

    _setItemLabelAttr: function(val) {
        this.labelText = val;
        this.qDescSpan.innerHTML = val;
    },

    _setPlaceholderAttr: function(val) {
        this.placeholder = val;
    },

    _setValueAttr: function(val) {
        this.value = val;
    },

    startup: function(){
        if(this._started){ return; }

    },

    constructor: function(params) {
        this.placeholder = params.placeholder;
        this.labelText = params.labelText;
        this.valu = params.value;
    },

    buildRendering: function(){
        this.inherited(arguments);

        this.qDescDiv = domConstruct.create("div", {className: "tableItemDescription", id: "asd"}, this.labelNode, "before");
        this.qDescSpan = domConstruct.create("span", null, this.qDescDiv, "first");

        this.qInputDiv = domConstruct.create("div", {className: "tableItemInput"}, this.qDescDiv, "after");
        this.qInputText = domConstruct.create("input", {className: "mblTextBox sessionTextbox", placeholder: this.placeholder, value: this.value}, this.qInputDiv, "first");
        console.log(this.labelText, this.placeholder, this.value);
    },

});

return LabeledInputListItem;  }); 
```

我可以在我的 html 代码中使用这个自定义 ListItem，如下所示：

```
<li data-dojo-type="myapp/LabeledInputListItem" data-dojo-props="itemLabel: 'asdasd', placeholder: 'placeholder', value: 'value'"></li> 
```

但是，如果我尝试以编程方式创建自定义 ListItem，则会导致以下错误：

```
TypeError: myapp.LabeledInputListItem is not a constructor

var childWidget = new myapp.LabeledInputListItem({placeholder: "placeholder"}); 
```

有人知道我错过了什么吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:25:58.173

我能想到的唯一（明显）原因是您不需要该模块？顺便说一句，Dojo 现在正朝着“无全局变量”的方向发展，因此最好不要为您的类提供显式 id，并使用 AMD 模块的值而不是全局 myapp.LabeledInputListItem。

# android - 动态更新表android中的值

> ID：14648126
> 
> 赞同：0
> 
> 时间：2013-02-01T14:09:52.210
> 
> 标签：android, dynamic-data, android-tablelayout

问题是，我有一组 4 个编辑文本字段（数字）和一个表格布局，其中结果显示在 2 列中。表格布局中的值由使用所有 edittext 值的公式计算得出。当我在edittext字段中输入值时，我想在表格中动态更新答案。可能吗？如果是这样，请使用示例代码对其进行说明。

并且该表在另一个活动中。

**编辑文本代码**

```
al_e.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            if((al<15)|(al>50)|al_e.getText().toString().length()==0){
                invalid=1;
                //al_e.setText(null);
                Toast.makeText(getApplicationContext(),"Please enter a valid input\nRange [15mm,50mm]", Toast.LENGTH_SHORT).show();
            }
        }
    }); 
```

* * *

**屏幕截图。**

![在此处输入图像描述](../Images/8606de9d4efca2f0883cb1e57dd87707.png)

表格布局设置为 tabhost 的 setcontent。

* * *

**tabhost 的自定义 addtab 方法**

```
private void addTab(String label, String tag, Drawable drawable, Intent intent) {
    TabHost.TabSpec spec = mTabHost.newTabSpec(tag);
    spec.setIndicator(createTabIndicator(label, drawable));
    spec.setContent(intent);
    intent.putExtra("AL", al);
    intent.putExtra("K1", k1);
    intent.putExtra("K2", k2);
    intent.putExtra("ALC", al_const);
    intent.putExtra("DR", dr);
    intent.putExtra("INVALID", invalid);
    mTabHost.addTab(spec);
} 
```

* * *

它在 tabhost 活动中的实现为

```
mTabHost=(TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup(getLocalActivityManager());
    addTab("SRK/T", TAG_1, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent(Second.this, Srkt_x.class));
    addTab("SRK II", TAG_2, createTabDrawable(R.drawable.ic_tab_eye_unselected),new Intent(Second.this, Srk2_x.class));
    addTab("BINKHORST", TAG_3, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent(Second.this, Binkhorst_x.class));
    addTab("HOLLADAY", TAG_4, createTabDrawable(R.drawable.ic_tab_eye_unselected), new Intent(Second.this, Holladay_x.class)); 
```

* * *

**表活动是 srkt_x,srkt_2,holladay_x,binkhorst_x 活动，我将其设置为 tabhost 的内容**

实际上，我已经在选项卡中实现了 edittext 字段，并将选项卡的内容设置为表格布局。因此，当我更新edittext字段时，我希望更新edittext正下方的表格布局字段。

**PS：请原谅糟糕的图像编辑**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:26:07.723

您可以`addTextChangedListener`在 editext 上使用该方法来获取用户更新的内容。[请参阅此处](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)的文档

使用 editText 输入更新 textView 的示例代码：

布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:ems="10" >

    <requestFocus />
</EditText> 
```

活动：

```
public class MainActivity extends Activity {

private TextView textView;
private EditText editText;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     editText= (EditText)findViewById(R.id.editText1);
     textView= (TextView) findViewById(R.id.textView);
    editText.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            textView.setText(s); //use the charsequence s which is the current user input

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

**编辑** 您的桌子在另一个活动中？并且您想更新一个在使用 editText 侦听器时甚至没有膨胀的表？我认为您应该在这里解释更多并发布您的所有代码。

**编辑**您在同一个屏幕上使用两个活动，坦率地说这是非常罕见的。您现在可以改为使用行为类似于活动的片段并让它们生活在同一个屏幕中。您可以使用 getActivity 方法以多种方式轻松地在它们之间进行通信。

# python - 安装行“pip install scipy”失败

> ID：14648130
> 
> 赞同：0
> 
> 时间：2013-02-01T14:10:15.953
> 
> 标签：python, scipy, pip

> **可能重复：** [使用 pip 安装 scipy](https://stackoverflow.com/questions/2213551/installing-scipy-with-pip)

我正在运行 Mac OS X v10.6 Snow Leopard 并使用[Homebrew](https://en.wikipedia.org/wiki/Homebrew_%28package_management_software%29)。我通过以下方式安装了 Python 2.7.3：

```
brew install python 
```

现在我想安装[NumPy](http://en.wikipedia.org/wiki/NumPy)、[SciPy](http://en.wikipedia.org/wiki/SciPy)和[Matplotlib](http://en.wikipedia.org/wiki/Matplotlib)。

```
$ pip install numpy 
```

工作正常，但是

```
$ pip install scipy 
```

失败并产生以下错误：

```
https://gist.github.com/4691465 
```

出了什么问题，为什么？

# c# - 如何从目录字符串中仅获取最后一个子目录名称和文件名？

> ID：14648132
> 
> 赞同：2
> 
> 时间：2013-02-01T14:10:16.133
> 
> 标签：c#

我有这一行，我怎样才能只得到最后一个子目录名和文件名？

```
 label13.Text = Path.GetFileName(file1); 
```

我只得到文件名：test.avi 如果我不使用 Path.GetFileName only file1 我会得到类似的东西：

```
http://users/test/test/program/test/test.avi 
```

我想要得到的是最后一个子目录名称，即：test 和文件名：test.avi 所以在 label13 中我会看到：test/test.avi

我该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:18:05.200

只需使用`Path`：

```
Path.Combine(Path.GetFileName(Path.GetDirectoryName(path)), Path.GetFileName(path)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:18:33.500

您还可以拆分字符串并获取结果数组的最后 2 个元素：

```
string path = "http://users/test/test/program/test/test.avi";
var elements = path.Split('/');
string result = elements[elements.Length-1] + "/" + elements[elements.Length];
System.Console.WriteLine(result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:42:26.707

您可以使用以下扩展方法将字符索引检索到路径分隔符的倒数第 n 个索引并返回正确的子字符串：

```
using System;
using System.Linq;

public static class StringExtensions
{
    public static int NthLastIndexOf(this string value, char c, int n = 1)
    {
        if (count < 1)
        {
            throw new ArgumentOutOfRangeException("count must be greater than 0.");
        }

        var index = 1;
        for (int i = value.Length - 1; i >= 0; i--)
        {
            if (value[i] == c)
            {
                if (index == n)
                {
                    return i;
                }
                index++;
            }
        }
        return -1;
    }
}

class Program
{
    public static string GetEndOfPath(string path)
    {
        var idx = path.NthLastIndexOf('/', 2);
        if (idx == -1)
        {
            throw new ArgumentException("path does not contain two separators.");
        }

        return path.Substring(idx + 1);
    }

    static void Main()
    {
        var result = GetEndOfPath("http://users/test/test/program/test/test.avi");
        Console.WriteLine(result);
    }
} 
```

扩展方法`NthLastIndexOf`返回指定 Unicode 字符的倒数第 n 个出现的从零开始的索引位置。如果在字符串中至少 n 次未找到该字符，则该方法返回 -1。

# css - CSS 预处理器：获取 CSS 属性的当前值并更改它

> ID：14648136
> 
> 赞同：2
> 
> 时间：2013-02-01T14:10:23.207
> 
> 标签：css, sass, less

假设我有以下声明

```
.foo {
 .grid(1);
}

.grid(@num) {
  width: ... // Some calculated percentage
} 
```

现在后来我意识到我需要`.foo`宽 5% 是否有可能以某种方式`.foo { width: +5%;}`做或类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:59:55.353

## 少

在 LESS 中，您无法直接获得该信息。您需要将`.grid`mixin 修改为：

```
.grid(@num, @adjust: 0) {
  width: (your regular calaculation) + @adjust; // Some calculated percentage
} 
```

通过给它一个默认值`0`，那么你仍然可以`.grid(1)`在你想要的时候通过，但是如果`.foo`需要调整，你可以这样做：

```
.foo {
 .grid(1, 5%);
} 
```

## 对于 SASS

我不是 100% 确定，但我相信 SASS 也不能直接访问该属性，并且基本上需要执行某种类型的类似解决方案，其中 mixin 计算本身会发生变化。

# tridion - Tridion ASCX DCP 不呈现子控件

> ID：14648140
> 
> 赞同：5
> 
> 时间：2013-02-01T14:10:31.723
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

使用 SDL Tridion 2011 SP1 发布动态组件演示文稿时，我主要使用 REL 作为输出格式，但是我现在想要发布包含 ASP.NET 控制标记的 DCP。因此，我将模板的输出格式更改为 ASCX，并将 ASCX 组件演示文稿的存储配置为转到我的 Web 应用程序中的文件系统。我可以看到磁盘上的 ascx 文件，正如预期的那样，我可以看到里面的控制标签。

如果我创建一个包含相同控制标记的 aspx 页面，则输出与我预期的一样，但是，当组件表示组装器执行 ASCX 组件表示时，它不是从控制标记呈现输出，而是显示为空白。DCP 中的纯文本会显示出来。

我需要的功能与 Tridion 动态组件链接控件非常相似，我已经尝试过使用这种架构的其中一个，并且成功了。我什至将我的标签和 tridion 一个接一个地放在模板中。在这种情况下，我看到了 tridion 标记的输出，但不是我自己的输出，即使引用连接在同一个 web.config 中。

所以我可以看到，可以让 Tridion 的组件表示汇编器执行一个 ASCX DCP 并成功呈现它的子控件。在创作这样的控件以确保它可以以这种方式呈现时，是否可能有要求？

更新：

DCP 被发布到我站点内的 ascx 文件中。出于测试目的，我现在在同一个 DCP 中发布 tridion 控件，因此磁盘上的输出如下所示：

```
<tridion:DynamicComponentLink PageURI="tcm:34-667-64" ComponentURI="tcm:34-876" 
           TemplateURI="tcm:34-864-32" LinkText="Some page" runat="server" />
<xxx:ComponentLinkQS runat="server" ComponentUri="tcm:34-945" 
                                   QueryString="item=876" Text="Some page" /> 
```

当 DCP 像这样发布并由 ComponentPresentationAssembler 执行时，第一个控件会产生预期的输出，而第二个控件不会。如果我`<xxx:ComponentLinkQS/>`直接在 ASPX 页面上放置一个标签，它会很好地呈现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T15:15:00.590

我想我以前见过这个（解决方案的全部功劳归于 Neil Gibbons 和 Hoang Chu）。

问题是由 Tridion.ContentDelivery DLL 中的 ComponentPresentation 服务器控件引起的，尤其是该控件在其 Render 方法期间加载到 DCP 用户控件中的方式：

```
protected override void Render(HtmlTextWriter writer)
{
    if (HttpContext.Current != null && HttpContext.Current.Application != null)
    {
        ComponentPresentationAssembler componentPresentationAssembler = new ComponentPresentationAssembler(this.pageUri, base.Page);
        writer.Write(componentPresentationAssembler.GetContent(this.componentUri, this.templateUri));
        base.RenderChildren(writer);
    }
} 
```

Render 方法在控件生命周期中为时已晚，任何其他控件都无法连接它们的事件 - 因此我的用户控件 Page_load 永远不会被触发。

在 Tridion 论坛上针对此问题提出了一个解决方案，该解决方案位于以下链接中，其中涉及覆盖标准 Content Delivery 用户控件以在生命周期的早期执行您的嵌入式控件： [https ://forum.tridion.com/topic.asp?TOPIC_ID =5709&whichpage=3&SearchTerms=Page_Load](https://forum.tridion.com/topic.asp?TOPIC_ID=5709&whichpage=3&SearchTerms=Page_Load) （我不确定从论坛复制代码并将其添加到此处的合法性。如果来自 Tridion 的人给我点头，那么我可以添加它。）

# javascript - 在 Google Chrome 扩展程序的精确选项卡上执行脚本

> ID：14648141
> 
> 赞同：0
> 
> 时间：2013-02-01T14:10:42.733
> 
> 标签：javascript, google-chrome-extension, dom-events

我想在浏览器的精确选项卡上执行脚本。该脚本将返回一个值。

我不知道我必须使用什么。文档说`contentScript`每次加载新页面时都会调用它。我只想在用户单击我的 popup.html 中的按钮后执行脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:51:08.210

在您的 contentScript 文件中添加如下监听器：

```
chrome.extension.onMessage.addListener(function(msg, sender, sendResponse) {
   //do job 
   sendResponse(...);
}); 
```

在您`popup.html`的点击事件中：

```
chrome.tabs.sendMessage(tabid, "message", function responseCallback(response) {
   //...
}); 
```

更多信息[http://developer.chrome.com/extensions/tabs.html#method-sendMessage](http://developer.chrome.com/extensions/tabs.html#method-sendMessage)

# c++ - 获取this->c1->c2->c3->myFunc()的函数指针；

> ID：14648146
> 
> 赞同：1
> 
> 时间：2013-02-01T14:10:55.093
> 
> 标签：c++, function-pointers

我无法获取通过指针访问的函数的指针：

```
double *d = &(this->c1->...->myFunc(); 
```

不起作用，`myFunc()`被声明为`double`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T14:14:36.070

如果你的意思是你想要一个指向返回值的指针`myFunc`，那么你不能：它是一个临时的，将在表达式的末尾被销毁。

如果您需要一个指针，那么您还需要一个非临时值来指向：

```
double value = this->c1->...->myFunc();
double * d = &value; 
```

或者你是说你想要一个指向函数的指针？这是一种不同的类型`double*`：

```
// get a member-function pointer like this
double (SomeClass::*d)() = &SomeClass::myFunc;

// call it like this
double value = (this->c1->...->*d)(); 
```

或者你是说你想要一些你可以调用的东西，比如一个简单的函数，但绑定到某个对象`this->c1->...`？该语言不直接支持这一点，但 C++11 具有 lambdas 和`bind`用于此类事情的函数：

```
// Bind a function to some arguments like this
auto d = std::bind(&SomeClass::myFunc, this->c1->...);

// Or use a lambda to capture the object to call the member function on
auto d = [](){return this->c1->...->myFunc();};

// call it like this
double value = d(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:20:29.753

假设在`this->c1->c2->c3->myFunc()`c3 中是类型`foo`：

```
class foo 
{
public:
  double myFunc();
}; 
```

然后你可以说：

```
typedef double (foo::*pmyfunc)(void); 
```

然后获取它的地址：

```
pmyfunc addr = &foo::myFunc; 
```

您应该阅读[指向成员](http://www.parashift.com/c++-faq/pointers-to-members.html)函数的常见问题解答。

# java - 事件总线订阅问题（Otto - Guava 事件总线）

> ID：14648151
> 
> 赞同：4
> 
> 时间：2013-02-01T14:11:19.630
> 
> 标签：java, android, guava, otto

为什么事件没有被订阅，也`onMyEvent`没有被调用。相关代码如下。Otto 在我的使用中正常工作，但以下场景涉及从回调处理程序发布事件（这是涉及 http 调用的代码的简化）。不确定这与它有什么关系。

我使用[Otto](http://square.github.com/otto/)（基于 Guava 事件总线）和[Dagger](http://square.github.com/dagger/)（Guice）。希望Java专家也能看到我如何注入和使用下面的总线的任何问题。

## 申请（模块注册）

```
package com.example.ottocb;

import android.app.Application;
import android.content.Context;
import com.squareup.otto.Bus;
import dagger.Module;
import dagger.ObjectGraph;
import dagger.Provides;

import javax.inject.Singleton;

public class MyApplication extends Application {
    private ObjectGraph objectGraph;

    @Override
    public void onCreate() {
        super.onCreate();
        objectGraph = ObjectGraph.create(new MyModule(this));
    }

    public ObjectGraph objectGraph() {
        return objectGraph;
    }

    public void inject(Object object) {
        objectGraph.inject(object);
    }

    @Module(entryPoints = {Bus.class, MyActivity.class,
            MyFragment.class
    })
    static class MyModule {
        private final Context appContext;

        MyModule(Context appContext) {
            this.appContext = appContext;
        }

        @Provides
        @Singleton
        Bus provideBus() {
            return new Bus();
        }
    }
} 
```

## 基本片段

```
package com.example.ottocb;

import android.app.Fragment;
import android.os.Bundle;

public class BaseFragment  extends Fragment {
    @Override
    public void onCreate(Bundle state) {
        super.onCreate(state);

        ((MyApplication) getActivity()
                .getApplication())
                .inject(this);
    }

} 
```

## 我的片段

```
package com.example.ottocb;

import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;
import com.squareup.otto.Bus;
import com.squareup.otto.Subscribe;

import javax.inject.Inject;

public class MyFragment extends BaseFragment  {
    private static final String TAG = MyFragment.class.getName();

    @Inject
    Bus bus;

    Button btn;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.myfragment, container,
                false);
        btn = (Button) view.findViewById(R.id.btn);
        btn.setOnClickListener(btnOnClick);

        return view;
    }

    Button.OnClickListener btnOnClick = new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.i(TAG, "onClick");
            MyCB cb = new MyCB();
            cb.success();
        }
    };

    private class MyCB  {
        public void success() {
            Log.i(TAG, "SUCCESS " );

                bus.post(new MyEvent());

        }

        public void failure() {
            Log.e(TAG, "Error");

        }
    }

    @Subscribe
    public void onMyEvent(MyEvent event) {
        Log.i(TAG, "***** onMyEvent ********");
        Toast.makeText(getActivity(), "***** RECEIVED EVENT *****", Toast.LENGTH_SHORT).show();
    }
} 
```

## 我的活动

```
package com.example.ottocb;

import android.app.Activity;
import android.os.Bundle;

public class MyActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

## 我的事件

```
package com.example.ottocb;

public class MyEvent {
} 
```

## 主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="match_parent" android:layout_height="match_parent">
    <fragment class="com.example.ottocb.MyFragment"
              android:id="@+id/myfragment"
              android:layout_width="match_parent" android:layout_height="match_parent" />
</FrameLayout> 
```

## 我的片段.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <Button
            android:id="@+id/btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Post" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T14:20:33.277

为了接收事件，类实例需要向总线注册。

```
 bus.register(this); 
```

# graph - 如何导入图结构并基于该图制作对象网络以在 OMNet++ 中进行仿真

> ID：14648152
> 
> 赞同：0
> 
> 时间：2013-02-01T14:11:19.707
> 
> 标签：graph, social-networking, simulation, omnet++

我有一个基于真实数据的图，我想使用它的结构在 OMNet 中基于该图制作一个网络。此外，我想将 OMNet 对象作为顶点。

我想知道这是否可能以及如何？

更多信息：因为我需要运行离散事件模拟，所以我发现它是最好的方法（如果可能的话），但是如果有人能提出更好的方法，我将不胜感激。（+我在 python 中使用 networkX 来操作和运行一些算法，但由于我需要模拟，我不确定使用python和simpy是否好）

我非常感谢您能提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:59:50.867

有一些拓扑导入示例。使用 IDE（请参阅 IDE 中的新建网络向导）。一般来说，您应该能够从您的拓扑描述文件中创建 OMNeT++ 所需的 NED 文件（NED 是一个文本文件，因此如果您知道您的拓扑，您可以创建您的转换器）。

# ios - 将 curl 命令翻译成 NSMutableUrlRequest

> ID：14648159
> 
> 赞同：0
> 
> 时间：2013-02-01T14:11:42.530
> 
> 标签：ios, web-services, nsmutableurlrequest

我正在尝试移植一个 curl 请求：

```
curl -X POST -H [header stuff]  -d '{"key":"value"}' [host] 
```

进入 NSMutableUrlRequest。到目前为止，我已经去掉了工作正常的部分，只保留了给我带来麻烦的部分，即 -d '{"key":"value"}'。另一个标题部分很好。

根据 curl 手册 -d 表示载荷是以 application/x-www-form-urlencoded 格式发送的，所以我做了以下操作：

```
 NSString* post =   @"{\"key\":\"value\"}";
    NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    [_request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [_request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [_request setHTTPMethod:@"POST"];
    [_request setHTTPBody:postData]; 
```

这将返回以下错误

失败并出现错误 Error Domain=AFNetworkingErrorDomain Code=-1011 “预期状态代码在 (200-299)，得到 400” UserInfo=0xa363550 {NSLocalizedRecoverySuggestion={"code":107,"error":"bad www-form-urlencoded 数据"}

有人能指出我调试这些东西的正确方向吗？-一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:45:09.417

`Content-Type`应该`application/json`或可能`text/plain`代替。如果一切都失败了，请尝试`application/octet-stream`（原始二进制数据）。

# emacs - 如何在 perl-mode 中指定字符串引用而不使 Emacs 头晕目眩？

> ID：14648162
> 
> 赞同：3
> 
> 时间：2013-02-01T14:11:47.723
> 
> 标签：emacs

我需要在 Perl 中使用对（常量）字符串的引用。如果我写：

```
my $a = \'test';
print $$a; 
```

Emacs (23.3.1) 的 perl-mode 认为字符串从*第二个*撇号开始，并弄乱了填充和字体化。使用双引号 ( `"`) 不会改变这一点。

如何在不使用额外变量或切换到我觉得相当“响亮”的 cperl 模式的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:15:13.857

在反斜杠后添加一个空格。Perl 不在乎，perl-mode 迎头赶上。

# jsp - 如何在 web.xml 中配置欢迎文件列表

> ID：14648167
> 
> 赞同：39
> 
> 时间：2013-02-01T14:11:57.803
> 
> 标签：jsp, servlets, web.xml, welcome-file

我的 web.xml 文档中有这个。我正在尝试创建一个欢迎列表，因此我不再需要键入主页的路径。但是每次点击我的tomcat页面中的应用程序时，它都会显示请求的资源不可用。

```
<listener>
    <listener-class>web.Init</listener-class>
</listener>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>index</servlet-name>
    <servlet-class>web.IndexServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>index</servlet-name>
    <url-pattern>/index</url-pattern>
</servlet-mapping> 
```

我的jsp页面的servlet

```
package web;

import java.io.IOException;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletConfig;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.log4j.Logger;

public class IndexServlet extends HttpServlet
{
    private Logger logger = Logger.getLogger(this.getClass());
    private RequestDispatcher jsp;

    public void init(ServletConfig config) throws ServletException
    {
        ServletContext context = config.getServletContext();
        jsp = context.getRequestDispatcher("/WEB-INF/jsp/index.jsp");
    }

    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
    {
        logger.debug("doGet()");
        jsp.forward(req, resp); 
    }
} 
```

为什么它仍然不起作用？我仍然需要在我的 url 中键入 /index ...如何正确执行此操作？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-01T14:15:20.923

您需要将 JSP 文件放入`/index.jsp`而不是放入`/WEB-INF/jsp/index.jsp`. 顺便说一下，这样整个 servlet 就显得多余了。

```
WebContent
 |-- META-INF
 |-- WEB-INF
 |    `-- web.xml
 `-- index.jsp 
```

如果您绝对肯定需要以这种奇怪的方式调用 servlet，那么您应该将其映射到 URL 模式`/index.jsp`而不是`/index`. 您只需要更改它以获取请求调度程序 from`request`而不是 from`config`并摆脱整个`init()`方法。

如果您实际上打算拥有一个“主页 servlet”（因此**不是**欢迎文件 - 它具有完全不同的目的；即在请求*文件夹*时应该提供的默认文件，因此不是特别是根文件夹），那么您应该将 servlet 映射到空字符串 URL 模式。

```
<servlet-mapping>
    <servlet-name>index</servlet-name>
    <url-pattern></url-pattern>
</servlet-mapping> 
```

另请参阅[servlet 映射 url 模式中 / 和 /* 之间的区别](https://stackoverflow.com/questions/4140448/difference-between-and-in-servlet-mapping-url-pattern/)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-01T14:22:02.433

我猜你想要的是你的索引 servlet 作为欢迎页面，所以更改为：

```
<welcome-file-list>
   <welcome-file>index</welcome-file>
</welcome-file-list> 
```

这样索引 servlet 就会被使用。请注意，您需要一个 servlet 规范 2.4 容器才能执行此操作。

另请注意，@BalusC 得到了我的投票，因为您的索引 servlet 本身是多余的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-11T08:46:38.493

[我在这个stackoverflow 链接](https://stackoverflow.com/questions/33248473/change-default-homepage-in-root-path-to-servlet-with-doget)中看到了一个很好的解决方案，它可以通过使用空字符串 URL 模式 "" 来帮助 defulat servlet 处理问题的读者：

```
@WebServlet("") 
```

或者

```
<servlet-mapping>
    <servlet-name>yourHomeServlet</servlet-name>
    <url-pattern></url-pattern> <!-- Yes, empty string! -->
</servlet-mapping> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-30T15:14:52.600

这是我将 Servlet 设置为欢迎页面的方法。

我为谁担忧。

web.xml

```
 <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>Demo</servlet-name>
        <servlet-class>servlet.Demo</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Demo</servlet-name>
        <url-pattern></url-pattern>
    </servlet-mapping> 
```

小服务程序类

```
@WebServlet(name = "/demo")
public class Demo extends HttpServlet {
   public void doGet(HttpServletRequest req, HttpServletResponse res)
     throws ServletException, IOException  {
       RequestDispatcher rd = req.getRequestDispatcher("index.jsp");
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-01T19:01:34.603

我只是在 web.xml 文件中声明如下，它对我有用：

```
 <welcome-file-list>
    <welcome-file>/WEB-INF/jsps/index.jsp</welcome-file>
</welcome-file-list> 
```

除静态资源（css、js、图像）外，公共目录中不存在任何 html/jsp 页面。现在我可以使用以下 URL 访问我的索引页面： [http://localhost:8080/app/](http://localhost:8080/app/) 它的调用 /WEB-INF/jsps/index.jsp 页面。在生产中实时托管时，最终 URL 看起来像[https://eisdigital.com/](https://eisdigital.com/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-10-06T09:30:02.710

它基于您尝试从哪个文件访问这些文件。

如果它位于您的工作项目文件所在的同一文件夹中，那么您可以只使用文件名。不需要路径。

如果它位于工作项目文件的同一父文件夹下的另一个文件夹中，则可以使用如下 /javascript/sample.js 中的位置

在您的示例中，如果您尝试从 html 文件访问 js 文件，则可以使用以下位置

../javascript/sample.js

前缀../ 将转到文件的父文件夹（文件夹向上旅程）

# datasource - 具有来自另一台服务器上的数据库中的视图的数据源的 XPage 失败

> ID：14648168
> 
> 赞同：1
> 
> 时间：2013-02-01T14:11:57.850
> 
> 标签：datasource, xpages

我有一个 XPage，其中包含驻留在另一台服务器上的数据库中的视图。当一些用户（管理访问 = 大量权限）登录时，他们会看到视图 - 没问题。当其他用户这样做时，他们会在浏览器中看到“无法打开数据库”。所有这些用户都可以访问这两个数据库，但不能通过 XPage。

我在哪里看？必须信任源服务器，因为它适用于某些用户。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:42:41.967

有几件事要检查：

1.  确保 XPage 服务器在 View 服务器的服务器文档中列为*Trusted Servers*字段（即使它适用于管理员，也最好检查一下）。

2.  XPage*服务器*必须位于 View 数据库的 ACL 中。我相信*读者*就足够了，但如果它不起作用，那么尝试使用更高的访问级别。

# php - 在主站点控制器的错误视图中卸载引导程序

> ID：14648170
> 
> 赞同：1
> 
> 时间：2013-02-01T14:12:00.093
> 
> 标签：php, twitter-bootstrap, yii, yii-modules

我的管理模块正在使用引导程序：

```
'admin'=>array(
        'preload'=>array('bootstrap'),
        'components'=>array(
            'bootstrap'=>array(
                'class'=>'ext.bootstrap.components.Bootstrap',
            ),
        )
    ), 
```

但它也使用主站点的错误处理程序：

```
public function init() {
    $this->setImport(array(
        'admin.models.*',
        'admin.components.*',
    ));

    Yii::app()->setComponents(array(
       'errorHandler'=>array('errorAction'=>'site/error'),
    ));

    $this->layout = 'admin';
} 
```

问题是，当产生错误时，引导 css 正在加载，将布局搞砸。如何仅在错误操作中卸载引导程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:24:30.677

通常要卸载组件，您可以使用[`setComponent`](http://www.yiiframework.com/doc/api/1.1/CModule#setComponent-detail "http://www.yiiframework.com/doc/api/1.1/CModule#setComponent-detail")，将第二个参数作为`null`. 一个例子：

```
Yii::app()->getModule('admin')->setComponent('bootstrap', null); 
```

但是，在您的情况下，您正在使用的 bootstrap-extension 版本在**加载组件后就已经注册了 css/js** ¹。因此，即使您卸载组件，仍会包含引导 css，并且仍会应用样式。

但是我们可以去掉bootstrap注册的css/js，从而去掉bootstrap组件的效果。最简单的方法是重置`clientScript`评论中已经讨论过的，最好的地方是[`reset`](http://www.yiiframework.com/doc/api/1.1/CClientScript#reset-detail "http://www.yiiframework.com/doc/api/1.1/CClientScript#reset-detail")这样：`clientScript``actionError()`

```
public function actionError() {
    if($error=Yii::app()->errorHandler->error) {
        Yii::app()->clientScript->reset();
        // ... more code ...
    }
} 
```

**之所以**会这样，是因为大部分`register*`注册 css/js 的函数都会在*views*和*layouts*中遇到，所以任何注册的 css/js 都会被加载，但 bootstrap 会被省略。此外，您可能正在使用的任何小部件，只有在遇到它们时才会注册它们的 css/js `render`。

* * *

¹见*extensions/bootstrap/components/Bootstrap.php*的`init()`：

```
if ($this->coreCss !== false)
    $this->registerCoreCss();

if ($this->responsiveCss !== false)
    $this->registerResponsiveCss();

if ($this->yiiCss !== false)
    $this->registerYiiCss();

if ($this->enableJS !== false)
    $this->registerCoreScripts(); 
```

* * *

对于较新版本的扩展（自 1.0.1 起），您必须显式注册 css/js。

# objective-c - UICollectionViewCell 中的按钮

> ID：14648172
> 
> 赞同：2
> 
> 时间：2013-02-01T14:12:04.013
> 
> 标签：objective-c, uibutton, uicollectionview, uicollectionviewcell, uicollectionviewlayout

我正在尝试将 a 添加到被调用`UIButton`的实例中。我在子类中为 the 创建了一个插座，并在 Interface Builder 中添加了操作，但我似乎无法让事情正常工作。`UICollectionViewCell``MyCollectionViewCell``UIButton`

```
@protocol loadbackgroundDelegate <NSObject>
-(void)loadthebackground:(id)sender;
@end
@interface MyCollectionViewCell : UICollectionViewCell
@property (weak, nonatomic) IBOutlet UIButton *BuyButton;
@property (weak, nonatomic) IBOutlet UIButton *LoadButton;
@property (strong, nonatomic) IBOutlet UIImageView *imageView;
@property (weak, nonatomic) id<loadbackgroundDelegate> delegate;

- (IBAction)Loadbackground:(id)sender;
- (IBAction)Buybackground:(id)sender;
@end 
```

以前有没有人实现`UIButton`过`UICollectionViewcell`，有没有示例代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-06T12:43:54.277

有可能，由于`UICollectionView`which is a的 contentTouches，您的触摸可能会延迟`UIScrollView`。延迟内容触摸是`UIScrollView`因为首先视图会尝试确定您是否要滚动。你也可以关闭`delayContentTouches`你的，`UICollectionView`但如果你必须滚动，之后滚动可能会有延迟。

你可以在里面关掉`UIStoryboard`

![在此处输入图像描述](../Images/96931236aaec511dee70b30f3ad1ee3f.png)

# php - php：通过子子串从字符串中提取子串

> ID：14648174
> 
> 赞同：1
> 
> 时间：2013-02-01T14:12:06.473
> 
> 标签：php, string, preg-match, substring, strpos

我们有一些字符串`$text="Here are some text. The word is inside of the second sentence.";`和`$word="word";`

如何获取`$sentence="The word is inside of the second sentence";`- 包含的第一句话`" ".$word." "`

当然应该做一些假设。其中之一是所有句子都以`".\r\n"`or`"!\r\n"`或 or`". "`结尾`"! "`。

PS我们确定`strpos($text," ".$word." ")!==false`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:26:45.303

你可以使用这样的东西：

```
<?php

$text="Here are some text. The word is inside of the second sentence. And the word is also in this sentence!";
$word = 'word';

function getSentenceByWord($text, $word) {

    $sentences = preg_split('/(\.|\?|\!)(\s)/',$text);
    $matches = array();
    foreach($sentences as $sentence) {

        if (strpos($sentence,$word) !== false) {
            $matches[] = $sentence;
        }

    }

    return $matches;
}

print_r(getSentenceByWord($text, $word));
?> 
```

返回：

```
Array
(
    [0] => The word is inside of the second sentence
    [1] => And the word is also in this sentence!
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:26:55.897

你的文字：

```
$txt = "word word word different. different word word word. word word word ending. word word word"; 
```

我的话是“不同”：

```
$word = "different"; 
```

让我们做一个预赛：

```
$c=preg_match("/(\.|^)([^\.]*?".$word."[^\.]*(\.|$))/",$txt,$match); 
```

如果成功，则显示包含以下句子的第二组：

```
if($c!==false and count($match) > 0 )
    echo( $match[2]) ; 
```

这将返回第一次出现。如果你想全部使用 preg_match_all。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:38:13.853

没有正则表达式，只有一个分隔符“.”：

```
<?php
$text="Sentence one. Sentence two. Sentence three. Sentence four.";

$word_pos = strpos($text, "Sentence");
$start = strrpos(substr($text, 0, $word_pos), ".");
$end = strpos(substr($text, $word_pos), ".");

$start = $start ? $start + 2 : 0;
$end = $end + $word_pos + 1 - $start;

$sentence = substr($text, $start, $end);

echo $sentence; 
```

# java - Java中自定义类的Hashcode实现

> ID：14648175
> 
> 赞同：7
> 
> 时间：2013-02-01T14:12:06.820
> 
> 标签：java, hashcode

> **可能重复：**
> [在 Java 中覆盖 equals 和 hashCode](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

我应该为自定义类 Person 实现 hashcode 和 equals。人由

> 名
> 
> 姓

我应该实现equals和hashcode，这样两个名字和姓氏的人**应该**为**equals**返回true，并且应该被Hashmap接受。我已经实现了这样的 Person 类：

```
public class Person {

    String firstname;
    String lastname;
    public Person(String firstname, String lastname) {
        this.firstname = firstname;
        this.lastname = lastname;
    }

    @Override
    public int hashCode() {
        // TODO Auto-generated method stub
        return firstname.hashCode()+lastname.hashCode();
    }

    @Override
    public boolean equals(Object obj) {
        // TODO Auto-generated method stub
    Person u=(Person) obj;

        return u.firstname.equals(firstname) && u.lastname.equals(lastname);
    }

} 
```

Hashcode的实现在这里正确吗？即使我得到了预期的结果，我想知道这个实现是否正确？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T14:19:15.730

您的 equals 方法有一个小问题，因为如果 obj 为 null 或不是 a ，它将引发异常`Person`，因此您应该在 equals 的顶部添加以下内容：

```
if(obj==null || !(obj instanceof Person))
   return false; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T14:16:25.927

[这里](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)有一个关于正确`equals`和`hashCode`实施的精彩讨论：

> 每当 a.equals(b) 时，a.hashCode() 必须与 b.hashCode() 相同

这是唯一重要的规则。除了这条规则之外，没有*正确*的实现。在性能和哈希冲突方面`hashCode`有*更好*和*更差的哈希码，但这完全是另一个话题。*

根据该规则，您的代码似乎是正确的，因为 if `a.equals(b)`, then`firstname.hashCode()+lastname.hashCode()`应该是相同的值`a`和`b`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:20:40.417

你的代码很好。String 有一个很好的哈希算法，添加哈希是在 Java 中对多个字符串进行哈希处理的最有效方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:20:24.460

`hashCode()`在它可以工作的意义上是正确的（假设字符串 firstname 和 lastname 不为空） - 即该方法将返回一个`int`. 这是否是一个好的解决方案是一个更长的故事，我相信您可以使用上面的搜索字段进行检查；）

这是我不久前就自定义实现提出的一个有趣的问题`hashCode()`：[Using a large prime as a multiplier when overriding hashCode()](https://stackoverflow.com/questions/12076846/using-a-larger-prime-as-a-multiplier-when-overriding-hashcode)

# c# - 带有超链接的 ASP.NET 页面标记

> ID：14648179
> 
> 赞同：0
> 
> 时间：2013-02-01T14:12:17.523
> 
> 标签：c#, asp.net

我对超链接的页面标记有疑问。我在 aspx 页面上有一个表单视图，它在后面的代码中绑定了一个数据表。我在 aspx 页面上有一些控件，它们在标记中获取绑定到它们的数据。我有一个超链接控件，它需要在文本属性中绑定一个字段（我想通了）和一个在超链接属性中绑定到它的字段（我需要帮助）。我让页面在某种程度上接受了标记，但是当它单击链接时，该链接不知何故被破坏了。

另外，我可以不使用导航 URL 属性导航到外部 URL 吗？比如说，WWW.ESPN.COM？我认为这就是问题所在...

```
<asp:HyperLink runat="server" ID="lnkCustom" NavigateUrl='<%#DataBinder.Eval(Container.DataItem, "WebCustomHyper")%>' Target="_blank" CssClass="weblinks">
                                <%# DataBinder.Eval(Container.DataItem, "WebCustomHyperDesc")%></asp:HyperLink> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:24:58.410

> 另外，我可以不使用导航 URL 属性导航到外部 URL 吗？比如说，WWW.ESPN.COM？我认为这就是问题所在...

事实上，这很可能是问题所在。这取决于呈现的客户端标记的外观。假设，为了论证，页面位于`http://www.example.com/page.aspx`. 然后，如果链接如下所示：

```
<a href="www.espn.com">click here</a> 
```

单击它将尝试将用户带到：

```
http://www.example.com/www.espn.com 
```

当然，这是行不通的。这是因为该值`www.espn.com`本身并没有告诉浏览器它应该去一个不同的位置。`www.espn.com`就浏览器而言，您完全有可能在服务器上有一个文件。

为了正确引导它，您需要完全限定 URL。这基本上意味着您需要预先添加协议前缀。更像这样的东西：

```
<a href="http://www.espn.com">click here</a> 
```

这将修复链接并将用户引导到正确的目的地。

# c# - 如何在绑定到图像控件的数据列表中显示默认/备用图像

> ID：14648186
> 
> 赞同：1
> 
> 时间：2013-02-01T14:12:46.520
> 
> 标签：c#, image, binding, datalist

Visual Studio 2008，框架 3.5，C#

我有一个 Datalist 控件。控件绑定到图像控件。我正在从数据库中获取 Imageurl。数据库具有像这样的图像路径 ~/images/Oneslow008.jpg 。但如果 oneslow008.jpg 在 Images 文件夹中不可用，则此时它显示占位符。相反，我想显示一些默认图像，以防图像丢失。

这是我的绑定代码 `asp:Image ID="Image1" runat="server" Height="80px" ImageUrl='<%# Eval("imageUrl1") %>' Width="80px"/>` 

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:25:17.197

您可以使用这样的背景图像创建样式：

```
.DefaultImage {
    background-position: center center;
    background-image: url('Images/COMPUTER1.png');
    background-repeat: no-repeat;
} 
```

让它足够小，以便在加载数据库图像时，它会覆盖背景图像。将类应用于显示图像的元素。

# jquery - jQuery 一次显示/隐藏 1 个

> ID：14648189
> 
> 赞同：0
> 
> 时间：2013-02-01T14:12:52.587
> 
> 标签：jquery

我创建了一些东西，在单击 div/按钮时，它会打开一个单独的 div 及其内容。我希望在单击其中一个按钮 div 时关闭或向上滑动所有非目标项目。

长话短说，我一次只希望打开 1 个“target-div”。我该如何做到这一点？（链接到下面的代码小提琴）

```
$('.target-div').hide();
$('.button').click(function () {
  var $target = $('#div' + $(this).data('target'));

  $(this).addClass('selected').siblings().removeClass('selected');
  $target.delay(300).slideDown();    

 if($target.is(':visible')){
  $(this).removeClass('selected');
  $target.slideUp('normal').removeClass('open');
  return false;
 }  
}); 
```

[http://jsfiddle.net/dNU92/8/](http://jsfiddle.net/dNU92/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:18:08.503

根据您的小提琴，添加一个 slideUp()

```
$('.target-div').hide();
$('.button').click(function () {
  var $target = $('#div' + $(this).data('target'));
  $('.target-div').slideUp();
  $(this).addClass('selected').siblings().removeClass('selected');
  $target.delay(300).slideToggle();    

  if($target.is(':visible')){
      $(this).removeClass('selected');
      $target.slideUp('normal').removeClass('open');
      return false;
  }  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:18:19.630

## 以下代码执行您想要的 - 隐藏在您单击另一个 div 时打开的其他 div。

```
$('.target-div').hide();
$('.button').click(function () {
    var $target = $('#div' + $(this).data('target'));

    $(this).addClass('selected').siblings().removeClass('selected');
    $target.delay(300).slideToggle();    

    if($target.is(':visible')){
        $(this).removeClass('selected');
        $target.slideUp('normal').removeClass('open');
        return false;
    }
    else
    {  
        $('.target-div:visible').not($(this)).removeClass('open').slideUp();
    }
}); 
```

这里唯一的补充是：

`$('.target-div:visible').not($(this)).removeClass('open').slideUp();`

这是您更新的[JSFiddle](http://jsfiddle.net/dNU92/13/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:18:54.937

如下更改您的jquery ...

更新小提琴：http: [//jsfiddle.net/dNU92/12/](http://jsfiddle.net/dNU92/12/)

添加一行，如：`$(".target-div:visible").hide()`

```
$('.target-div').hide();
$('.button').click(function () {
  var $target = $('#div' + $(this).data('target'));
  $(".target-div:visible").hide() /// this is the line i have added
  $(this).addClass('selected').siblings().removeClass('selected');
  $target.delay(300).slideToggle();    

  if($target.is(':visible')){
      $(this).removeClass('selected');
      $target.slideUp('normal').removeClass('open');
      return false;
  }  
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:26:20.740

您必须在单击中执行操作以隐藏可见元素。这个动画效果很好：

```
$('.target-div').hide();
$('.button').click(function () {
    $('.target-div:visible').slideUp('normal', function(){ $(this).hide(); });

    var $target = $('#div' + $(this).data('target'));

  $(this).addClass('selected').siblings().removeClass('selected');
  $target.delay(300).slideToggle();    

  if($target.is(':visible')){
      $(this).removeClass('selected');
      $target.slideUp('normal').removeClass('open');
      return false;
  }  
}); 
```

我用[了这个 Fiddle](http://jsfiddle.net/dNU92/8/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T14:35:42.340

```
$('.target-div').hide();
$('.button').click(function () {

    var $target

    for (var i=1; i<9; i++){
        $target = $('#div' + i);
        $target.slideUp('normal').removeClass('open');   
    }
   $target = $('#div' + $(this).data('target'));

  $(this).addClass('selected').siblings().removeClass('selected');
  $target.delay(300).slideToggle();    

  if($target.is(':visible')){
      $(this).removeClass('selected');
      $target.slideUp('normal').removeClass('open');
      return false;
  }  
}); 
```

像这样的东西？

# google-maps - 谷歌静态地图在电脑上显示，但在手机上不显示

> ID：14648200
> 
> 赞同：1
> 
> 时间：2013-02-01T14:13:27.750
> 
> 标签：google-maps

所以这个代码在大约一周前工作得很好，我今天在审查之前去检查它，确定它不能工作。我检查了在线网站以确保地图正在显示并且它在我的 PC 上在线正确显示。但是，当我在手机上查看相同的地址时，我会收到一个看起来像这样的错误图像。

![谷歌地图图像错误](../Images/20e036afdc56535095be0a07ad038024.png)

很确定我的代码没问题。不确定这与什么有关。我之前有 API 密钥，我认为我超出了请求的数量，直到我查看了 Google 允许的请求数量，即每天 25,000 个。这个页面甚至还没有使用，所以这是不可能的。

它不适用于 Android 手机或 iPhone。有人见过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:58:47.090

您看到的“超出限制”图像是因为 Google 已确定太多请求从单个位置到达其服务器。

移动电话公司代理他们的互联网请求，因此谷歌认为所有请求都来自一个 IP 地址。请求*应该*表现良好并使用`X-FORWARDED-FOR`标头来指示使用代理和真实来源，但有些不是。或者 Google 可能会误解这些标题的结果。

解决方案是更改您的移动提供商。

由于对相同地图的请求被缓存并且不计入统计数据，因此使您的每个请求都独一无二（例如，通过稍微改变地图的中心）甚至是不可行的。在对地图的请求中，您确实无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:35:18.347

好吧，在研究了更多之后，这是因为我超出了请求的数量。不知道这是怎么可能的，所以我将不得不检查 API 控制台来查看我的分析。

这是链接[https://developers.google.com/maps/documentation/staticmaps/#Limits](https://developers.google.com/maps/documentation/staticmaps/#Limits)

# hadoop - 使用 Hive 查询计算 Hadoop 中连续记录之间的差异

> ID：14648201
> 
> 赞同：8
> 
> 时间：2013-02-01T14:13:32.060
> 
> 标签：hadoop, hive

我有一个 Hive 表，其中包含客户呼叫的数据。为简单起见，考虑它有 2 列，第一列保存客户 ID，第二列保存调用的时间戳（unix 时间戳）。

我可以查询此表以查找每个客户的所有电话：

```
SELECT * FROM mytable SORT BY customer_id, call_time; 
```

结果是：

```
Customer1    timestamp11
Customer1    timestamp12
Customer1    timestamp13
Customer2    timestamp21
Customer3    timestamp31
Customer3    timestamp32
... 
```

是否可以创建一个 Hive 查询，从第二次调用开始，为每个客户返回两次连续调用之间的时间间隔？对于上面的示例，查询应该返回：

```
Customer1    timestamp12-timestamp11
Customer1    timestamp13-timestamp12
Customer3    timestamp32-timestamp31
... 
```

我试图从[sql 解决方案](https://stackoverflow.com/questions/634568/how-to-get-difference-between-two-rows-for-a-column-field)中调整解决方案，但我被 Hive 限制所困扰：[它只接受 FROM 中的子查询，](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+SubQueries)并且[连接必须只包含 equalities](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Joins)。

谢谢你。

**编辑1：**

我尝试使用 Hive UDF 函数：

```
public class DeltaComputerUDF extends UDF {
private String previousCustomerId;
private long previousCallTime;

public String evaluate(String customerId, LongWritable callTime) {
    long callTimeValue = callTime.get();
    String timeDifference = null;

    if (customerId.equals(previousCustomerId)) {
        timeDifference = new Long(callTimeValue - previousCallTime).toString();
    }

    previousCustomerId = customerId;
    previousCallTime = callTimeValue;

    return timeDifference;
}} 
```

并将其与名称“delta”一起使用。

但似乎（从日志和结果）它是在 MAP 时间使用的。由此产生2个问题：

***第一：***使用此功能前，表数据必须按客户ID和时间戳排序。查询：

```
 SELECT customer_id, call_time, delta(customer_id, call_time) FROM mytable DISTRIBUTE BY customer_id SORT BY customer_id, call_time; 
```

不起作用，因为排序部分是在 REDUCE 时间执行的，在我的功能被使用很久之后。

我可以在使用该函数之前对表数据进行排序，但我对此并不满意，因为这是我希望避免的开销。

***第二：***在分布式 Hadoop 配置的情况下，数据在可用的作业跟踪器之间进行拆分。所以我相信这个函数会有多个实例，每个映射器一个，因此可以在 2 个映射器之间拆分相同的客户数据。在这种情况下，我会失去客户的电话，这是不可接受的。

我不知道如何解决这个问题。我知道 DISTRIBUTE BY 确保所有具有特定值的数据都发送到同一个减速器（从而确保 SORT 按预期工作），有人知道映射器是否有类似的东西吗？

接下来我计划按照 libjack 的建议使用 reduce 脚本。在其他一些 hive 查询之间需要这种“计算”，所以我想尝试 Hive 提供的所有东西，然后再转移到另一个工具，正如 Balaswamy vaddeman 所建议的那样。

**编辑2：**

我开始研究自定义脚本解决方案。但是，在 Programming Hive 书的第 14 章的第一页（本章介绍了自定义脚本），我发现了以下段落：

> 流式传输的效率通常低于对可比较的 UDF 或 InputFormat 对象进行编码。序列化和反序列化数据以将其传入和传出管道是相对低效的。以统一的方式调试整个程序也更加困难。但是，它对于快速原型设计和利用不是用 Java 编写的现有代码很有用。对于不想编写 Java 代码的 Hive 用户来说，这可能是一种非常有效的方法。

因此很明显，就效率而言，自定义脚本并不是最佳解决方案。

但是我应该如何保留我的 UDF 函数，但要确保它在分布式 Hadoop 配置中按预期工作？我在语言手册 UDF wiki 页面的 UDF 内部部分找到了这个问题的答案。如果我写我的查询：

```
 SELECT customer_id, call_time, delta(customer_id, call_time) FROM (SELECT customer_id, call_time FROM mytable DISTRIBUTE BY customer_id SORT BY customer_id, call_time) t; 
```

它在 REDUCE 时间执行，并且 DISTRIBUTE BY 和 SORT BY 构造保证来自同一个客户的所有记录都由同一个 reducer 按调用顺序处理。

所以上面的UDF和这个查询构造解决了我的问题。

（很抱歉没有添加链接，但我不允许这样做，因为我没有足够的声望点）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-02T16:13:28.440

这是一个老问题，但为了将来的参考，我在这里写下另一个命题：

Hive [Windowing 函数](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+WindowingAndAnalytics)允许在查询中使用上一个/下一个值。

类似的代码查询可能是：

```
SELECT customer_id, call_time - LAG(call_time, 1, 0) OVER (PARTITION BY customer_id ORDER BY call_time) FROM mytable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T17:01:14.003

您可以将显式`MAP-REDUCE`与 Java 或 Python 等其他编程语言一起使用。`{cutomer_id,call_time}`在 map和 reducer 中你会得到哪里发出，`{customer_id,list{time_stamp}}`在 reducer 中你可以对这些时间戳进行排序并可以处理数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:43:41.473

也许有人遇到类似的要求，我找到的解决方案如下：

1）创建自定义函数：

```
package com.example;
// imports (they depend on the hive version)
@Description(name = "delta", value = "_FUNC_(customer id column, call time column) "
    + "- computes the time passed between two succesive records from the same customer. "
    + "It generates 3 columns: first contains the customer id, second contains call time "
    + "and third contains the time passed from the previous call. This function returns only "
    + "the records that have a previous call from the same customer (requirements are not applicable "
    + "to the first call)", extended = "Example:\n> SELECT _FUNC_(customer_id, call_time) AS"
    + "(customer_id, call_time, time_passed) FROM (SELECT customer_id, call_time FROM mytable "
    + "DISTRIBUTE BY customer_id SORT BY customer_id, call_time) t;")
public class DeltaComputerUDTF extends GenericUDTF {
private static final int NUM_COLS = 3;

private Text[] retCols; // array of returned column values
private ObjectInspector[] inputOIs; // input ObjectInspectors
private String prevCustomerId;
private Long prevCallTime;

@Override
public StructObjectInspector initialize(ObjectInspector[] ois) throws UDFArgumentException {
    if (ois.length != 2) {
        throw new UDFArgumentException(
                "There must be 2 arguments: customer Id column name and call time column name");
    }

    inputOIs = ois;

    // construct the output column data holders
    retCols = new Text[NUM_COLS];
    for (int i = 0; i < NUM_COLS; ++i) {
        retCols[i] = new Text();
    }

    // construct output object inspector
    List<String> fieldNames = new ArrayList<String>(NUM_COLS);
    List<ObjectInspector> fieldOIs = new ArrayList<ObjectInspector>(NUM_COLS);
    for (int i = 0; i < NUM_COLS; ++i) {
        // column name can be anything since it will be named by UDTF as clause
        fieldNames.add("c" + i);
        // all returned type will be Text
        fieldOIs.add(PrimitiveObjectInspectorFactory.writableStringObjectInspector);
    }

    return ObjectInspectorFactory.getStandardStructObjectInspector(fieldNames, fieldOIs);
}

@Override
public void process(Object[] args) throws HiveException {
    String customerId = ((StringObjectInspector) inputOIs[0]).getPrimitiveJavaObject(args[0]);
    Long callTime = ((LongObjectInspector) inputOIs[1]).get(args[1]);

    if (customerId.equals(prevCustomerId)) {
        retCols[0].set(customerId);
        retCols[1].set(callTime.toString());
        retCols[2].set(new Long(callTime - prevCallTime).toString());
        forward(retCols);
    }

    // Store the current customer data, for the next line
    prevCustomerId = customerId;
    prevCallTime = callTime;
}

@Override
public void close() throws HiveException {
    // TODO Auto-generated method stub

}

} 
```

2）创建一个包含这个函数的jar。假设 jarname 是 myjar.jar。

3) 使用 Hive 将 jar 复制到机器上。假设它放在 /tmp

4）在Hive内部定义自定义函数：

```
ADD JAR /tmp/myjar.jar;
CREATE TEMPORARY FUNCTION delta AS 'com.example.DeltaComputerUDTF'; 
```

5) 执行查询：

```
SELECT delta(customer_id, call_time) AS (customer_id, call_time, time_difference) FROM 
  (SELECT customer_id, call_time FROM mytable DISTRIBUTE BY customer_id SORT BY customer_id, call_time) t; 
```

***评论：***

一种。我假设 call_time 列将数据存储为 bigint。如果它是字符串，在 process 函数中我们将其检索为字符串（就像我们对 customerId 所做的那样），然后将其解析为 Long

湾。我决定使用 UDTF 而不是 UDF，因为这样它会生成它需要的所有数据。否则（使用 UDF）需要过滤生成的数据以跳过 NULL 值。因此，使用原始帖子第一次编辑中描述的 UDF 函数（DeltaComputerUDF），查询将是：

```
SELECT customer_id, call_time, time_difference 
FROM 
  (
    SELECT delta(customer_id, call_time) AS (customer_id, call_time, time_difference) 
    FROM 
      (
         SELECT customer_id, call_time FROM mytable
         DISTRIBUTE BY customer_id
         SORT BY customer_id, call_time
       ) t
   ) u 
WHERE time_difference IS NOT NULL; 
```

C。无论表中行的顺序如何，这两个函数（UDF 和 UDTF）都可以按需要工作（因此在使用 delta 函数之前，不需要按客户 ID 和调用时间对表数据进行排序）

# php - PHP foreach 多维数组

> ID：14648202
> 
> 赞同：1
> 
> 时间：2013-02-01T14:13:42.103
> 
> 标签：php, arrays, multidimensional-array, foreach

我有一个像这样的多维数组：

```
Array
(
    [Category1] => Array
        (
            [1] => Array
                (
                    [0] => Img 1
                    [1] => Title 1
                    [2] => Text 1
                )

            [5] => Array
                (
                    [0] => Img 17
                    [1] => Title 17
                    [2] => Text 5
                )

            [10] => Array
                (
                    [0] => Img 1
                    [1] => Title 6
                    [2] => Text 10
                )

            [16] => Array
                (
                    [0] => Img 16
                    [1] => Title 12
                    [2] => Text 16
                )

        )

    [Category2] => Array
        (
            [2] => Array
                (
                    [0] => Img 2
                    [1] => Title 2
                    [2] => Text 2
                )

            [6] => Array
                (
                    [0] => Img 18
                    [1] => Title 18
                    [2] => Text 6
                )

            [13] => Array
                (
                    [0] => Img 13
                    [1] => Title 9
                    [2] => Text 13
                )

        )

    [Category3] => Array
        (
            [3] => Array
                (
                    [0] => Img 3
                    [1] => Title 3
                    [2] => Text 3
                )

            [7] => Array
                (
                    [0] => Img 19
                    [1] => Title 19
                    [2] => Text 7
                )

            [11] => Array
                (
                    [0] => Img 11
                    [1] => Title 7
                    [2] => Text 11
                )

            [14] => Array
                (
                    [0] => Img 14
                    [1] => Title 10
                    [2] => Text 14
                )

        )

    [Category4] => Array
        (
            [4] => Array
                (
                    [0] => Img 4
                    [1] => Title 4
                    [2] => Text 4
                )

            [8] => Array
                (
                    [0] => Img 20
                    [1] => Title 20
                    [2] => Text 8
                )

            [15] => Array
                (
                    [0] => Img 15
                    [1] => Title 11
                    [2] => Text 15
                )

        )

    [Category5] => Array
        (
            [9] => Array
                (
                    [0] => Img 9
                    [1] => Title 5
                    [2] => Text 9
                )

        )

    [Category6] => Array
        (
            [12] => Array
                (
                    [0] => Img 12
                    [1] => Title 8
                    [2] => Text 12
                )

        )

) 
```

我需要帮助才能像这样查看，$myarray 就是最上面的例子。在第一个 foreach 中一切都可以，但在第二个和第三个 foreach 中，如果我在一个类别中有一个以上的数组，它会被复制并且显示不正确。

```
<div id="tab-container">
        <ul>
            <?php foreach ($myarray as $category => $detail) { ?>
                <li><a href="#tab-<?=$category?>"><?=$category?></a></li>
            <?php }; ?>
        </ul>

    <div>
        <?php foreach (??? ??? ???) { ?>
            <div id="tab-<?=$category?> for ex Category 1 contain Array (1, 5 10, 16)">
                <div class="tab-content_left">
                    <div><img src="<?=base_url();?>img/$value[0] for ex Img 1" /></div>
                    <div>$value[1] for ex Title 1</div>
                    <div>$value[2] for ex Text 1</div>
                </div>

                <div class="tab-content_right">
                    <?php foreach (??? ??? ???) { ?>
                        <div><img src="<?=base_url();?>img/"$value[0] for ex Img 17 /></div>
                        <div>$value[1] for ex. Title 17</div>
                        <div>$value[2] for ex Text 5</div>
                    <?php }; ?>
                </div>
            </div>
        <?php }; ?>
    </div>
</div> 
```

谢谢。请一些想法我怎样才能把foreach cicles放在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:17:34.547

第一个foreach：

```
<?php foreach ($mainArray as $categoryKey => $singleCategory) { ?> 
```

第二个foreach：

```
<?php foreach ($singleCategory as $categoryEntry) { ?> 
```

**笔记：**

要获取类别名称`$categoryKey`，请在第一个 foreach 中写入。获取数据写入：`$singleCategory['image']`在第二个 foreach 中。

**检查[foreach](http://php.net/manual/en/control-structures.foreach.php)文档。**

# javascript - 有没有办法将图像扭曲成波浪效果？

> ID：14648203
> 
> 赞同：7
> 
> 时间：2013-02-01T14:13:46.230
> 
> 标签：javascript, jquery, image, css

我有一杯咖啡，“波浪”蒸汽上升，我想知道是否有（首选）CSS 方式来扭曲，所以它看起来像一个带有一些模糊的波浪，有点像[Fata Morgana](http://en.wikipedia.org/wiki/Fata_Morgana_%28mirage%29)效果。

我上传了我的杯子的副本。这是我[的](https://photos-4.dropbox.com/t/0/AACc1_Z8Qg0Cxx9mEQ8zUb_BJhhgB6g9EDyrWg5yJMTYVg/10/112059847/png/32x32/6/_/1/2/steam.png/MU0JPl9NVbiL_3gXY7dc3XHItdM-NVi3HWa59tsVZUU?size=1280x960&size_mode=2)蒸汽。

![这里](../Images/b50e9bc8cee47951d79a5a353dfb29fc.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T15:01:10.727

现实生活中的蒸汽并不是这样工作的。有很多流动性和随机性（至少对我而言）是不可能摆脱静态图像的。

尽管如此，我认为可以通过一些倾斜和褪色来实现近似效果。您可以使用 CSS 动画来执行此操作：

```
@keyframes steam {
    0%, 100% {
        transform: skewX(0deg);
        opacity: 1;        
    }
    25% { transform: skewX(10deg); opacity: .8; }
    75% { transform: skewX(-10deg); opacity: .8; }
} 
```

[http://jsfiddle.net/ExplosionPIlls/wxfg5/1/](http://jsfiddle.net/ExplosionPIlls/wxfg5/1/)

这会来回动画倾斜和不透明度，所以它不是那么随机。您当然可以为动画添加更多帧，使其看起来随机或使模式更难遵循。

真正的蒸汽移动更随机。你不能只用 CSS 做这样的随机性（我知道），所以你必须使用完整的 JS：

```
var frameTime = 200;

var transition = 'all ' + (frameTime / 1000) + 's linear';
img.style.WebkitTransition = transition;
img.style.transition = transition;

setInterval(function () {
    var skew = Math.round(Math.random() * 10) * (Math.random() < 0.5 ? -1 : 1);
    skew = 'skewX(' + skew + 'deg)';
    img.style.transform = skew;
    img.style.WebkitTransform = skew;
}, frameTime); 
```

`skewY`对于上述框架，添加不透明度更改或其他倾斜（可能是有效的）应该是相当简单的。

[http://jsfiddle.net/ExplosionPIlls/wxfg5/2/](http://jsfiddle.net/ExplosionPIlls/wxfg5/2/)

# riak - 有没有办法为 riak 数据库提供身份验证？

> ID：14648204
> 
> 赞同：5
> 
> 时间：2013-02-01T14:13:46.370
> 
> 标签：riak

我想使用用户名和密码对**riak 节点**进行身份验证，就像我们通常对 SQL 数据库进行身份验证一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T17:11:37.270

Riak 没有内置的身份验证或授权机制，因为它被设计用于专用网络并且易于配置。如果您使用的是 REST API，我们建议在 Riak 和可以处理身份验证的客户端之间插入一个反向代理。社区成员为此目的使用了 nginx 和 Apache。

在未来，这可能会改变（这是我们的长期路线图），但可能至少要到一年后才会改变。

**2014 年 1 月 29 日更新：** Riak 2.0，目前处于技术预览阶段，计划于 2014 年第一季度末发布，具有身份验证和用户访问控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T11:05:04.443

您可以使用[身份验证模块](http://docs.basho.com/riakcs/latest/cookbooks/Authentication/)或[预提交挂钩](http://docs.basho.com/riak/latest/dev/using/commit-hooks/)

提交挂钩对于用户名：密码身份验证很简单。

# asp.net-mvc - 无法加载指定的元数据资源

> ID：14648212
> 
> 赞同：18
> 
> 时间：2013-02-01T14:14:24.600
> 
> 标签：asp.net-mvc, entity-framework

我在使用 Entity Framework 时遇到了一些严重的问题，我似乎无法弄清楚发生了什么。

我尝试了以下提供的许多选项：[MetadataException：无法加载指定的元数据资源](https://stackoverflow.com/questions/689355/metadataexception-unable-to-load-the-specified-metadata-resource)和著名的 Craig Stuntz 的博客文章位于：http: [//blogs.teamb.com/craigstuntz/2010/08/13/38628/](http://blogs.teamb.com/craigstuntz/2010/08/13/38628/)

为简洁起见，我有 3 个项目：

Funscribe.Data（EDMX 文件位于此处）

Funscribe.Console（控制台应用程序）

Funscribe.Web（MVC 3 应用程序）

最初它只是 MVC 应用程序，我最近添加了这个新的控制台项目。

我从 web.config 复制了连接字符串并将其应用于我的 app.config：

```
<add name="FundirectoryEntities" connectionString="metadata=res://*/Fundirectory.csdl|res://*/Fundirectory.ssdl|res://*/Fundirectory.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost\sqlexpress;initial catalog=Funscribe;user id=sys_Funscribe;password=blah;multipleactiveresultsets=True;application name=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我的 mvc 应用程序继续工作，但是当我运行控制台应用程序时，我得到了可怕的：

**“无法加载指定的元数据资源。”**

我尝试将连接字符串更改为通配符设置：

```
<add name="FundirectoryEntities" connectionString="metadata=res://*/;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost\sqlexpress;initial catalog=Funscribe;user id=sys_Funscribe;password=blah;multipleactiveresultsets=True;application name=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我得到： **在映射和元数​​据信息中找不到指定的默认 EntityContainer 名称“FundirectoryEntities”。**

我尝试更改它以指定程序集：

```
<add name="FundirectoryEntities" connectionString="metadata=res://Funscribe.Data.dll/Fundirectory.csdl|res://Funscribe.Data.dll/Fundirectory.ssdl|res://Funscribe.Data.dll/Fundirectory.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost\sqlexpress;initial catalog=Funscribe;user id=sys_Funscribe;password=blah;multipleactiveresultsets=True;application name=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我得到： **无法解析程序集“Funscribe.Data.dll”。**

我不知道我应该在这里做什么。我刚刚将此项目升级到 Visual Studio 2012（我在转换到 VS 2012 后引入了这个新的控制台应用程序）。

我还注意到 Funscribe.Data.dll 位于控制台项目的 bin 文件夹中，我手动删除了这些文件并观察它被重新创建。***令我困惑的是网络应用程序继续正常工作***！

所有项目都在 .NET 4.0 上。控制台应用程序使用 .NET 4.0 而不是客户端配置文件版本。

非常感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T17:32:39.773

`Model.edmx`具有在名为 Simple 的程序集中调用的实体框架模型的应用程序的元数据参数`Mvc.Data.dll`可能如下所示：

```
<connectionStrings>
    <add name="MyEntities" connectionString="metadata=
            res://Simple Mvc.Data.dll/Model.csdl|
            res://Simple Mvc.Data.dll/Model.ssdl|
            res://Simple Mvc.Data.dll/Model.msl;provider= <!-- ... --> 
```

因此，您可以看到我们在运行时需要的 EDMX 的三个部分中的每一个都有一个参考。它们都以相同的方式工作，所以让我们更仔细地检查第一个。CSDL 参考如下所示：

```
 res://Simple Mvc.Data.dll/Model.csdl 
```

**它指定了三件事：**

*   我们正在从资源加载 CSDL。那是`"res://" part.`

*   包含资源的程序集的名称，`"Simple Mvc.Data.dll"`. 如果你的程序集是强命名的，你可以在这里指定一个强名称，在它的所有冗长的荣耀中。

*   资源本身的名称，`"Model.csdl"`. 不要将此与 EDMX 或型号名称混淆。在这种情况下，它们碰巧是相同的，除了扩展名，但这并不总是正确的！

> 如果您的资源碰巧与模型的名称不同，或者没有碰巧加载程序集，它可能会失败。

有关更多信息，请查看[**实体框架连接字符串故障排除**](http://blogs.teamb.com/craigstuntz/2010/08/13/38628/)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-12T12:46:09.190

在 Visual Studio 中重建解决方案帮助了我。

它在构建 -> 重建

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-21T09:22:01.467

就我而言，connectionString 正在尝试查找资源文件但无法找到。我为解决我的问题所做的是：

右键单击 EDMX 图 -> 转到属性 -> 连接 -> 元数据工件处理 -> 然后更改为**复制到输出目录**并重建。

这会将您的元数据连接字符串路径指向他试图查找的资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-08T12:42:26.760

MetadataException：无法加载指定的元数据资源

这意味着应用程序无法加载 EDMX。

有几件事可能导致这种情况，但很可能是由于无效的连接字符串。

可能的解决方案：

1.检查连接字符串 2.刷新model.edmx 3.在model.edmx中选择“从数据库更新模型”选项

[http://mvc4asp.blogspot.in/](http://mvc4asp.blogspot.in/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-06T09:20:45.103

就我而言，我在项目中删除了我的 EDMX 文件并使用新名称再次创建它，例如。之前是 Home_Model，后来是 Home_Cost。当我尝试调用以下代码时，它显示“无法加载指定的元数据资源”。错误。/////

```
 using (var currentEntities = new masterEntities())
    {
        currentUser = currentEntities.Home_User.FirstOrDefault(
            x => x.UserLoginAccount == userLoginAccount && x.UserPwd == userPwd);

    } 
```

//// 所以在 Web.config 中，我将元数据配置从 Home_Model 修改为 Home_Cost。

然后它工作。显然，当我删除/创建 edmx 时，VS2015（我的版本）没有更新 web.config。

# vim - Vim 和环境模块：通过 :make 编译不知道 boost

> ID：14648217
> 
> 赞同：1
> 
> 时间：2013-02-01T14:14:41.073
> 
> 标签：vim, module, linker, cmake

我的 C++ 项目使用[CMake为来自](http://www.cmake.org)[boost](http://www.boost.org)的编译和外部库创建 makefile 。我选择的编辑器是[vim](http://www.vim.org)。`$ make`在命令行中运行有效，但`:make`在 vim 中在链接阶段出现问题并返回：

```
/usr/bin/ld: cannot find -lboost_system 
```

但是，我也习惯`:make install`将我的项目放在`$HOME/usr/stow/<prog>`我测试和使用程序的地方。因此，我正在寻找使链接阶段成功的解决方案。

更多详细信息：

它位于[out-of-src 构建](http://www.cmake.org/Wiki/CMake_FAQ#What_is_an_.22out-of-source.22_build.3F)目录中。因此我配置了[`makeprg`](http://vimdoc.sourceforge.net/htmldoc/options.html#'makeprg')

```
:set makeprg=make\ -C\ ../build/Release/ 
```

通过我在项目中依赖的[Environment Modules Project](http://modules.sourceforge.net/)安装了更新的 boost 版本并在系统上可用。可以通过以下方式加载较新的增强版本

```
$ module load boost 
```

我已将此行添加到 my`$HOME/.profile`中，这样我每次编译时都不必调用它。

我已经检查了问题[(G)VIM 使用的 $PATH 与我的系统](https://unix.stackexchange.com/questions/23637/gvim-uses-a-different-path-than-my-system)讨论 vim 中使用的环境变量不同。

**更新：**问题仅发生在从窗口管理器（gnome2）启动的 gvim 中，而不是从命令行/bash 启动的（g）vim。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T18:08:06.103

如果它在命令行中有效，但在 vim 中无效，请查看您的环境有什么不同

```
:!env | sort > env-vim 
```

然后

```
$ env | sort | diff env-vim - 
```

很可能有些东西正在设置 LD_LIBRARY_PATH 以包含您的 boost 库的非标准目录，并且该目录未显示在 vim 的 subshel​​l 环境中。也许您是从桌面图标而不是命令行启动 vim？（如果是这种情况，命令行中的 vim / :make 将是一个有趣的测试）。

要将变量放入 vim 子shell，请将其添加到 ~/.vimrc

```
let $LD_LIBRARY_PATH="*your library path*" 
```

*我会发表评论而不是回答，但我还没有获得这种能力。由于昨天被问到，我给了它一枪。*

# php - jquery 不会选择动态填充的下拉选择框值

> ID：14648221
> 
> 赞同：0
> 
> 时间：2013-02-01T14:14:59.067
> 
> 标签：php, jquery, loops, if-statement, echo

我对 jquery 和 php 有疑问，我的问题是：

我使用 jquery .post 方法将数据发送到外部 php 页面，然后从页面成功返回数据，但是我将这些值（带有选项标签的选项）加载到选择元素中，然后我想在另一个元素中使用这些值。发布请求，将它们发送到相同的外部 php 页面，该页面在 if 语句中以不同方式处理它，该语句确定它是否已设置，但我遇到的主要问题是

为什么它会跳转到else并显示来自php页面的回显消息

例如。在php页面中动态发送选项

```
 while($fetch = mysql_fetch_array($sel2))
  {                 
  $options = "<option value=".$fetch['amount'].">" . $fetch['amount'] . "</option>";
  echo $options;
  } 
```

我有 2 个由外部数据库填充的下拉菜单，其中包含值和选项，但是它不会在外部 php 页面上选择值

```
 if(isset($_POST['c']))
 {
$c = $_POST['c'];
discounts($c);
 }
 else
 {
$msg = "nothing entered!!";
$msg2 = 1;
$array = array($msg,$msg2);
$sent = implode(",",$array);
echo $sent; 
 } 
```

谁能告诉我为什么它没有升值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:29:19.127

我在 html 中这样做吗？

```
<select id="options" name="optionsselect">
  <?php foreach($fetch as $whatever) : ?>
     <option value="<?=$whatever['amount'];?>"<?=$selected?>><?=$whatever['amount'];?></option>
  <?php endforeach; ?></select> 
```

# r - 有没有更有效的嵌套三个 for 循环的方法？

> ID：14648222
> 
> 赞同：0
> 
> 时间：2013-02-01T14:15:00.670
> 
> 标签：r

我一直在努力将下面的代码转换为使用 *apply 系列函数，所以现在我向 StackOverflow 社区寻求一点帮助。一些背景知识，这是我正在开发的一种方法的一部分，用于分析三组的倾向评分方法。因此，我从代表每对组之间的距离（倾向得分差异）的三个矩阵开始。也就是说，矩阵 d1 是 A x B，d2 是 B x C，d3 是 C x A。我需要做的是找到最小化总距离并且小于某个卡尺的三元组。我已经尽可能地简化了这个例子，同时得到我想要的东西。

几点注意事项：

*   `row1 <- row1[row1 < caliper]`如果我要简单地创建所有可能组合的 data.frame（或矩阵），则可以在最后完成小于卡尺检查 ( ) 的距离。但是，即使我在这里设置的组数量很少，也会产生 3,000 行！

*   在进行下一步之前，我对向量进行了排序。同样，如果我要拥有所有可能组合的矩阵，则可以消除这种情况。在我当前的版本中，我有另一行只查看 n 个最小的元素以减少执行时间。

*   这个例子有相当小的组。我正在研究一个数据集，其中每个组有 5,000 到 8,000 个主题。

提前感谢您的帮助。我正在为此撰写一篇论文，并很乐意致谢。另外，我打算参加用户！在西班牙举行会议，将为任何有帮助的人买啤酒:-)

```
groups <- c('Control','Treat1','Treat2')
group.sizes <- c(15, 10, 20)
set.seed(2112)

d1 <- matrix(abs(rnorm(group.sizes[1] * group.sizes[2], mean=0, sd=1)), 
             nrow=group.sizes[1], ncol=group.sizes[2],
             dimnames=list(1:group.sizes[1], 
                          (group.sizes[1]+1):(group.sizes[1] + group.sizes[2])) )
d2 <- matrix(abs(rnorm(group.sizes[2] * group.sizes[3], mean=0, sd=1)), 
             nrow=group.sizes[2], ncol=group.sizes[3],
             dimnames=list((group.sizes[1]+1):(group.sizes[1] + group.sizes[2]), 
                          (group.sizes[2] + group.sizes[1] + 1):(sum(group.sizes)) ) )
d3 <- matrix(abs(rnorm(group.sizes[3] * group.sizes[1], mean=0, sd=1)), 
             nrow=group.sizes[3], ncol=group.sizes[1],
             dimnames=list((group.sizes[2] + group.sizes[1] + 1):(sum(group.sizes)), 
                          1:group.sizes[1]) )

caliper <- 1
results <- data.frame(v1=character(), v2=character(), v3=character(),
                      d1=numeric(), d2=numeric(), d3=numeric())
for(i1 in dimnames(d1)[[1]]) {
    row1 <- d1[i1,]
    row1 <- row1[row1 < caliper]
    row1 <- row1[order(row1)]
    for(i2 in names(row1)) {
        row2 <- d2[i2,]
        row2 <- row2[row2 < caliper]
        row2 <- row2[order(row2)]
        for(i3 in names(row2)) {
            val <- d3[i3,i1]
            if(val < caliper) {
                results <- rbind(results, 
                        data.frame(v1=i1, v2=i2, v3=i3,
                                d1=row1[i2], d2=row2[i3], d3=val))
            }
        }
    }
}
head(results) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:14:14.263

After some more work, I have figured out how to replace the three nested for loops with nested `lapply` function calls. To simplify testing the two approaches, I moved them to functions which are included below. This first chuck sets up the three matrices:

```
group.sizes <- c(15, 10, 20)
set.seed(2112)

d1 <- matrix(abs(rnorm(group.sizes[1] * group.sizes[2], mean=0, sd=1)), 
             nrow=group.sizes[1], ncol=group.sizes[2],
             dimnames=list(1:group.sizes[1], 
                          (group.sizes[1]+1):(group.sizes[1] + group.sizes[2])) )
d2 <- matrix(abs(rnorm(group.sizes[2] * group.sizes[3], mean=0, sd=1)), 
             nrow=group.sizes[2], ncol=group.sizes[3],
             dimnames=list((group.sizes[1]+1):(group.sizes[1] + group.sizes[2]), 
                          (group.sizes[2] + group.sizes[1] + 1):(sum(group.sizes)) ) )
d3 <- matrix(abs(rnorm(group.sizes[3] * group.sizes[1], mean=0, sd=1)), 
             nrow=group.sizes[3], ncol=group.sizes[1],
             dimnames=list((group.sizes[2] + group.sizes[1] + 1):(sum(group.sizes)), 
                          1:group.sizes[1]) ) 
```

**Now the results with times**

```
> system.time(results.forloops <- forloops(d1, d2, d3))
   user  system elapsed 
  2.129   0.370   2.530 
> system.time(results.apply <- nestedapply(d1, d2, d3))
   user  system elapsed 
  0.019   0.000   0.019 
```

Without much surprise, the `lapply` method is substantially faster, even with this small example. Warning, you can try this with larger matrices by changing the `group.sizes` factor above but the nested loops take a very long time to complete when making even small jumps in sizes.

**Here are the functions:**

```
forloops <- function(d1, d2, d3, caliper=1) {
    results <- data.frame(v1=character(), v2=character(), v3=character(),
                          d1=numeric(), d2=numeric(), d3=numeric())
    for(i1 in dimnames(d1)[[1]]) {
        row1 <- d1[i1,]
        row1 <- row1[row1 < caliper]
        #row1 <- row1[order(row1)]
        for(i2 in names(row1)) {
            row2 <- d2[i2,]
            row2 <- row2[row2 < caliper]
            #row2 <- row2[order(row2)]
            for(i3 in names(row2)) {
                val <- d3[i3,i1]
                if(val < caliper) {
                    results <- rbind(results, 
                                     data.frame(v1=i1, v2=i2, v3=i3,
                                               d1=row1[i2], d2=row2[i3], d3=val))
                }
            }
        }
    }
    results$total <- results$d1 + results$d2 + results$d3
    results <- results[order(results$total),]
    results <- results[!duplicated(results[,c('v1','v2')]), ]
    invisible(results)
}

nestedapply <- function(d1, d2, d3, caliper=1) {

    d1[d1 > caliper] <- NA
    d2[d2 > caliper] <- NA
    d3[d3 > caliper] <- NA

    results <- lapply(dimnames(d1)[[1]], FUN=function(i1) {
        row1 <- d1[i1,]
        row1 <- row1[!is.na(row1)]
        lapply(names(row1), FUN=function(i2) {
            row2 <- d2[i2,]
            row2 <- row2[!is.na(row2)]
            lapply(names(row2), FUN=function(i3) {
                val <- d3[i3,i1]
                if(is.na(val)) {
                    return(c())
                } else {
                    c(i1, i2, i3, row1[i2], row2[i3], val)
                }
            })
        })
    })
    results <- as.data.frame(matrix(unlist(results), ncol=6, byrow=TRUE), stringsAsFactors=FALSE)
    names(results) <- c('v1','v2','v3','d1','d2','d3')
    results$d1 <- as.numeric(results$d1)
    results$d2 <- as.numeric(results$d2)
    results$d3 <- as.numeric(results$d3)
    results$total <- results$d1 + results$d2 + results$d3
    invisible(results)
} 
```

# java - 如何在 ArrayList 中存储对象？

> ID：14648224
> 
> 赞同：6
> 
> 时间：2013-02-01T14:15:07.127
> 
> 标签：java

我正在尝试将对象人存储在 ArrayList 中。

我有一个`ArrayList<String> customer = new ArrayList<String>();`

对象“person”有两个变量：name（字符串）和 pNr（long）。我试图简单地添加它：`customer.add(person)`但这似乎不起作用。

澄清一下：我不想单独存储变量。我想将整个对象人存储在 ArrayList 中。

我根本不知道如何解决这个问题，或者即使它可以完成。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-01T14:16:05.000

更改您的`List`，使其接受**Person 对象**而不是`String`.

```
List<Person> customer = new ArrayList<Person>();
Person p = .....;
customer.add(person); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-01T14:26:23.560

人员类

```
public class Person {       
    String name;
    long pNr;    

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public long getPNR() {
        return pNr;
    }

    public void setPNR(long pNr) {
        this.pNr = pNr;
    }   
} 
```

创建人员对象

```
Person person = new Person();
person.setName("Name");
person.setPNR(pNr); 
```

添加到 ArrayList

```
ArrayList<Person> personList = new ArrayList<Person>();
personList.add(person); 
```

检索数据

```
String selectedName = personList.get(i).getName(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T14:17:28.553

您需要将 a`List`与不同的泛型类型一起使用。由于当前指定的泛型类型`List`是`String`它只允许您将类型的对象添加`String`到列表中。

```
List<Person> customer = new ArrayList<Person>(); 
```

我还建议使用该`List`接口，以防需要切换到不同的实现，例如`LinkedList`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T14:25:47.427

看这个

```
import java.util.ArrayList;
import java.util.List;

public class Tester4 {

    public static void main(String args[]) {

        List<Person> persons = new ArrayList<Person>();

        Person person = new Person();
        person.setName("Tester");
        person.setPersonNr(1245L);
        persons.add(person);

        person = new Person();
        person.setName("Tester 2");
        person.setPersonNr(1299L);
        persons.add(person);
    }
}

class Person {

    private String name;

    private Long personNr;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Long getPersonNr() {
        return personNr;
    }

    public void setPersonNr(Long personNr) {
        this.personNr = personNr;
    }

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-01T14:17:58.820

```
ArrayList<String> customer = new ArrayList<String>(); 
```

通过这种方式，您定义了 arrayList只`customer`接受类型`String`。

```
ArrayList<Person> customer = new ArrayList<Person>(); 
```

这将只接受具有`Person`类型（和 Person 的子类型）的对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-01T14:21:23.043

定义一个类 Person

```
public class Person(){
    private String name;
    private long pNr;
    public String getName(){
        return name;
    }
    public void setName(String name){
        this.name = name;
    }
    public long getPNR(){
        return pNr;
    }
    public void setPNR(long pNr){
        this.pNr = pNr;
    }
} 
```

然后你使用：

```
ArrayList<Person> customer = new ArrayList<Person>(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-01T14:18:10.187

或者，如果你坚持，那么在你的 Person 类中`ArrayList<String> customer`实现一个方法。`toString()`

```
@Override
public String toString() {
    return "Person[name=" + name + ",pNr=" + pNr +"]";
} 
```

然后你可以使用：

```
customer.add(person.toString()) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-01T14:16:15.380

在这种情况下，您需要使用`ArrayList<Person>`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-01T14:18:01.797

如果要将对象添加到数组列表中，则必须在列表类型中引用该对象。IE：`ArrayList<Person> customer = new ArrayList<Person>();`

# eclipse - GMF - 为可以包含自身组件的类建模

> ID：14648229
> 
> 赞同：0
> 
> 时间：2013-02-01T14:15:20.543
> 
> 标签：eclipse, eclipse-emf-ecore, eclipse-gmf

两天以来，我正在为 Eclipse IDE 使用 EMF 和 GMF 进行一些测试。

我的目标是用一个类对图表进行建模，该类可以包含自身的实例（在生成的编辑器中）。

在我用于测试的 *.ecore 文件中，我有一个类 DivisionDiagram，它被一个类 Division 引用——这个类应该有能力，它的实例可以包含这个类的实例——例如代表企业中的部门和细分。

我尝试创建从部门到部门的两个引用（父级和子级），但后来当编辑器生成并打开时，我无法将一个部门拖到一个部门中。（我不想用箭头或线表示分区之间的关系 - 效果很好）

怎么了？

谢谢，周末愉快：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:17:07.310

这些链接很有用并且帮助很大：

[http://wiki.eclipse.org/GMF_MapModel_Hints#Endless.2Frecursive_hierarchies](http://wiki.eclipse.org/GMF_MapModel_Hints#Endless.2Frecursive_hierarchies)

[http://gmfsamples.tuxfamily.org/wiki/doku.php?id=gmf_tutorial2](http://gmfsamples.tuxfamily.org/wiki/doku.php?id=gmf_tutorial2)

# android - 移植 Android 应用程序以在 BlackBerry 10 Android 运行时运行 - Google 地图

> ID：14648231
> 
> 赞同：1
> 
> 时间：2013-02-01T14:15:26.203
> 
> 标签：android, google-maps, blackberry-10, google-maps-android-api-2, blackberry-android

我有一个 Android 应用程序，我想通过移植 BB Android 运行时向 BlackBerry 10 用户提供该应用程序。唯一的绊脚石是我的 Android 应用程序使用运行时不支持的 Google Maps API (com.google.android.maps)。地图屏幕只是应用程序的一个小功能，我很高兴为黑莓用户禁用它，但这可能吗？我不想维护应用程序的两个副本，我可以以某种方式对一个应用程序进行编码，以便转换为 BAR 工作，但地图仍可在 Android 上使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:15:00.263

> 地图屏幕只是应用程序的一个小功能，我很高兴为黑莓用户禁用它，但这可能吗？

您可以添加`android:required="false"`到您的`<uses-library>`元素，并在运行时检测您是否有`MapActivity`该类，然后再尝试链接到您的地图。这是一个演示这[一点的示例应用程序。](https://github.com/commonsguy/cw-omnibus/tree/master/Maps/NooYawkMapless)

理论上，BB 的打包程序应该允许这样做。不管是不是，我不能说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:18:35.247

事实证明，我想做的事情是不可能的——任何对 Google Maps API 的引用都必须从应用程序中完全删除。查看 BlackBerry 论坛的回复：

“不，这行不通。节省您尝试找到修复程序的时间，只需将您的项目复制到一个新项目并为黑莓进行所需的更改。如果您正在使用源代码控制，那么您可以尝试为此进行分支目标。

顺便一提。如果你想在你的应用程序中使用 Google 地图，可以使用 webview 和 Google 的 javascript API 来完成。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T05:46:21.680

您必须删除对 Android 代码`MapView`或`MapActivity`Android 代码中的所有引用，才能移植到 BlackBerry。我建议更进一步：用 Javascript 替换`MapView`并`WebView`加载 Google Maps 移动站点。更多信息可以在这里找到：

[http://developer.blackberry.com/android/apisupport/apisupport_mapping_support.html](http://developer.blackberry.com/android/apisupport/apisupport_mapping_support.html)

是的，这将导致维护您的应用程序的两个版本，但它将为 BlackBerry 用户提供更好的体验。

希望这可以帮助。

# opengl-es - GLSLES 使用统一浮点数而不是例如 0.5 损失 5-6 毫秒

> ID：14648232
> 
> 赞同：0
> 
> 时间：2013-02-01T14:15:26.340
> 
> 标签：opengl-es, cocos2d-iphone, fragment-shader, vertex-shader, glsles

我有这个片段着色器。在一些“精灵”上，我想要纹理的不同“饱和度”。目前我只设置一次，但后来我会根据绘制的精灵蜜蜂设置每次绘制。如代码中所述，如果我只写 * 0.5，我不会看到性能下降，但如果我使用 * u_test，速度会降低约 5-7 毫秒。这可能吗？你能想到其他解决方案吗？我完全走错了吗？

```
varying vec4        v_fragmentColor; 
varying vec2        v_texCoord;
varying vec4        v_secondFragmentColor;

uniform sampler2D   CC_Texture0;

uniform vec3        u_topColor;
uniform vec3        u_centerColor;
uniform vec3        u_bottomColor;
uniform float       u_intensity;
uniform lowp float  u_test;

void main()
{
    //vec4 base = texture2D(CC_Texture0, v_texCoord) * v_fragmentColor * u_test;    // 1\. 5-7 ms slower that 2.
    vec4 base = texture2D(CC_Texture0, v_texCoord) * v_fragmentColor * 0.5;         // 2\. fast

    vec3 blend = v_secondFragmentColor.rgb;

    vec3 overlay = vec3( 2.0 * base.rgb * blend + base.rgb * base.rgb - 2.0 * base.rgb * base.rgb * blend);

    gl_FragColor = vec4(overlay, base.a);
} 
```

# git - 在 jenkins、bitbucket 中克隆一个私人 git 存储库

> ID：14648236
> 
> 赞同：0
> 
> 时间：2013-02-01T14:15:36.420
> 
> 标签：git, github, jenkins, bitbucket

我在使用 Jenkins 克隆私人 bitbucket 存储库时出错。我已经按照这里的调试步骤进行操作：

[https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin)

1.  创建 ssh 密钥 将 ssh 密钥添加到 bitbucket 作为部署密钥
2.  使用服务器上我的用户帐户中的 ssh 密钥成功克隆了该 repo
3.  将密钥和已知主机复制到 C:\Windows\SysWOW64\config\systemprofile.ssh
4.  检查 Jenkins 服务是否在本地系统帐户下运行
5.  开始构建然后 -> 错误

我究竟做错了什么？

```
ERROR: Error cloning remote repo 'origin' : Could not clone ssh:///git@bitbucket.org:myUsername/myRepo.git
    hudson.plugins.git.GitException: Could not clone ssh:///git@bitbucket.org:myUsername/myRepo.git
    Caused by: hudson.plugins.git.GitException: Command "git.exe clone --progress -o origin ssh:///git@bitbucket.org:myUsername/myRepo.git C:\Program Files (x86)\Jenkins\workspace\myProject" returned status code 128:
    stdout: Cloning into 'C:\Program Files (x86)\Jenkins\workspace\myProject'...

    stderr: ssh: connect to host  port 22: Bad file number
    fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:37:26.533

好的，愚蠢的修复。

在詹金斯我像他们的例子一样在项目配置中放入 reqpository url

ssh://git@bitbucket.org:me/project.git

哪个不正确，应该是

git@bitbucket.org:me/project.git

# jquery - 如何获取除一个之外的所有子元素

> ID：14648239
> 
> 赞同：2
> 
> 时间：2013-02-01T14:15:39.807
> 
> 标签：jquery

我有以下内容：

```
<input type='checkbox' id='inputCheckbox'/><strong>sdfsf</strong><p>dfsfsdsd</p> 
```

从上面的元素中，我只需要在选中复选框并省略输入元素时获取这些元素：

```
<strong>sdfsf</strong><p>dfsfsdsd</p> 
```

我的尝试：

```
$("#testPatternButton").on("click", function()
{
    $("input:checked").each(function()
    {
        alert($(this).parent().children().not("input").html()); // only the strong text shows up
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:23:14.617

使用`each()`并添加`html()`内容。

```
$("#testPatternButton").on("click", function() {
    $("input:checked").each(function() {
        var output = '';
        $(this).parent().children().not("input").each(function() {
            output = output + $(this).html();
        });
        alert(output);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:19:28.817

这将做到这一点——它使用[一个常见的技巧](https://stackoverflow.com/q/3614212/901048)来获取`.html()`输入的 ，然后用于`.replace`从父级中删除该字符串`.html()`。

```
$('input').on('click', function () {
    inputhtml = $(this).clone().wrap('<div>').parent().html();
    allhtml = $(this).parent().html();
    str = allhtml.replace(inputhtml, '');
    alert(str);
}); 
```

[http://jsfiddle.net/jnabj/](http://jsfiddle.net/jnabj/)

但是，如果您真的想要这些元素的 jQuery 对象而不是 HTML 字符串，那就更简单了：

```
$('input').on('click',function() {
    $var = $(this).siblings();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:31:50.370

尝试这个。

```
$("#inputCheckbox").click(function(){
    var el = this;
    if (el.checked) {
        console.log(
            $(el).nextAll()
        );
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:30:48.030

这有效

[演示](http://jsfiddle.net/mplungjan/avXAb/)

```
$("#testPatternButton").on("click", function() {
    $("input:checked").each(function() {
      $("#out").html($(this).parent().contents().not('input')); 
    });
}); 
```

# php - 我是否需要对我的盐进行 base64 编码（用于散列密码）？

> ID：14648244
> 
> 赞同：1
> 
> 时间：2013-02-01T14:15:48.653
> 
> 标签：php, passwords, base64, salt, crypt

对不起这个非常奇怪的问题。我了解 base64 编码用于传输数据的目的（即 MIME 的 Base64 编码），但我不知道是否需要对我的盐进行 base64 编码。

我写了一个实用程序类（确实是一个基本抽象类）：

```
use Symfony\Component\Security\Core\Encoder\BasePasswordEncoder;

abstract class AbstractCryptPasswordEncoder extends BasePasswordEncoder
{
    /**
     * @return string
     */
    protected abstract function getSaltPrefix();

    /**
     * @return string
     */
    protected abstract function getSalt();

    /**
     * {@inheritdoc}
     */
    public function encodePassword($raw, $salt = null)
    {
        return crypt($raw, $this->getSaltPrefix().$this->getSalt());
    }

    /**
     * {@inheritdoc}
     */
    public function isPasswordValid($encoded, $raw, $salt = null)
    {
        return $encoded === crypt($raw, $encoded);
    }
} 
```

一个真正的实现类是：

```
class Sha512CryptPasswordEncoder extends AbstractCryptPasswordEncoder
{
    /**
     * @var string
     */
    private $rounds;

    /**
     * @param null|int $rounds The number of hashing loops
     */
    public function __construct($rounds = null)
    {
        $this->rounds = $rounds;
    }

    /**
     * {@inheritdoc}
     */
    protected  function getSaltPrefix()
    {
        return sprintf('$6$%s', $this->rounds ? "rounds={$this->rounds}$" : '');
    }

    /**
     * {@inheritdoc}
     */
    protected function getSalt()
    {
        return base64_encode(openssl_random_pseudo_bytes(12));
    }
} 
```

关键部分是盐生成，它将嵌入密码中：`base64_encode`假设它永远不会通过网络发送，我是否需要任何原因（存储）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:13:12.910

每个哈希算法都需要给定字母表中的盐，这意味着使用`base64_encode()`可能是正确的，但通常它要么不使用完整的字母表，要么返回不在此字母表中的字符。

以 BCrypt 为例，这是一个很好的密码哈希算法（SHA-512 不适合，因为它太快了），它接受 base64 编码字符串的所有字符，除了 '+' 字符。另一方面，它接受'。不属于 base64 编码字符串的字符。

PHP 5.5 将具有功能`password_hash()`和`password_verify()`准备，使 BCrypt 的使用更容易，我真的可以推荐它们。还有一个[兼容包](https://github.com/ircmaxell/password_compat/blob/master/lib/password.php)可用于较旧的 PHP 版本，在第 121 行你可以看到`base64_encode()`确实使用了它，但之后所有无效的 '+' 字符都被替换为允许的 '.' 人物：

为 BCrypt 编码盐：

```
$salt = str_replace('+', '.', base64_encode($buffer)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:18:34.540

[BASE64](http://en.wikipedia.org/wiki/Base64)用于将二进制数据编码为文本表示。它允许使用文本通道传输二进制数据。如果您想在 DB 中存储散列密码，则不必对其进行编码 - 它已经是文本格式。

# jquery - 如何通过 jquery 暂停所有用户嵌入的 youtube 视频？

> ID：14648256
> 
> 赞同：0
> 
> 时间：2013-02-01T14:16:23.923
> 
> 标签：jquery, iframe, youtube, youtube-api

我有一个用户嵌入的 youtube 视频，他们已将 iframe youtube 播放器复制并粘贴到其中。

我已经查看了有关 stackoverfow 和 you tube api 的大量问题，但似乎无法弄清楚如何通过查询暂停页面上正在播放的所有视频。

我已经尝试了以下两种方法，但它们会导致错误导致找不到播放器：

```
$('iframe').each(function(){
    $(this).find('#video-player-flash').pauseVideo();
    $(this).pauseVideo();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:20:38.367

假设`pausePlayer`是 HTML5 Video 对象的一个​​方法；

```
// so you need native DOM object
$('iframe').each(function(){
    $(this).find('#video-player-flash').get(0).pause();
    $(this).get(0).pause();
}); 
```

# c# - 快速排序索引超出范围异常

> ID：14648261
> 
> 赞同：0
> 
> 时间：2013-02-01T14:16:54.750
> 
> 标签：c#

我正在尝试另一种**QuickSort**变体，在其中对两个`ListBoxes`.

这是我的代码：

```
class cS
{
    public static int[] mQS(int[] iar)
    {
        //divide and conquer
        if (iar.Length < 3)
        {
            if (iar.Length == 2)
            {
                if (iar[0] > iar[1])
                {
                    //wissel
                    int T = iar[1];
                    iar[1] = iar[0];
                    iar[0] = T;
                }
            }
        }
        else
        {
            int size = iar.Length;
            int sum = 0;
            int average = 0;
            for (int i = 0; i < size; i++)
            {
                sum += iar[i];
            }
            average = sum / size; 

            int lk = 1, lg = 1;
            for (int i = 0; i < size; i++)
            {
                if(iar[i]<=average)
                {
                    lk++;
                }
            else
            {
                lg++;
            }
        }

        int[] ak = new int[lk];
        int[] ag = new int[lg];
        lk--; lg--;

        for (int i = 0; i < average; i++)
        {
            if (iar[i] <= average)
            {
                ak[lk]=iar[i];
                lk--; 
            }
            else
            {
                ag[lg] = iar[i];
                lg--;
            }
        }

        if (!Allegelijk(ak)) {ak= mQS(ak);}
        if(!Allegelijk(ag)) {ag = mQS(ag);}
        // plak weer aan elkaar in iar
        for (int i = 0; i < ak.Length; i++)
        {
            iar[i] = ak[i];
        }
        for (int i = 0; i < ag.Length; i++)
        {
            iar[i + ak.Length] = ag[i];
        }
    }
    return iar;
}

private static  bool allEqual(int[] ar)
{
    bool bG = true;
    for (int i = 1; i < ar.Length; i++)
    {
        if (ar[i] != ar[0])
        {
            bG = false;
            break;
        }
     }
     return bG;
 }

} 
```

}

但是在运行时出现此错误：

```
index out of range exception at the line :

  if (iar[i] <= average> 
```

谁能解释发生了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:29:38.187

来自评论：

该行`for (int i = 0; i < average; i++)`应该`size`没有`average`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:29:03.950

在执行过程中的某个时刻， 的值`sum`变得足够大，以至于`average`等于的值`sum / size`变得大于`iar.Length`。因此，`i`for 循环中的值最终会达到大于或等于 的值`iar.Length`。

# ruby-on-rails - Rails 新命令 chmod 失败

> ID：14648262
> 
> 赞同：1
> 
> 时间：2013-02-01T14:16:55.510
> 
> 标签：ruby-on-rails, chmod, errno

Chmod 似乎导致了 rails new 错误，这是具体问题：

```
/home/gossfunkel/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/fileutils.rb:1231:in `chmod': Operation not permitted - /media/windows/Users/gossfunkel/code/rails/blog/script (Errno::EPERM) 
```

这是完整输出的pastebin：http: [//pastebin.com/SwqxA8bR](http://pastebin.com/SwqxA8bR)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:20:37.490

您正在运行它，`/media/windows`其中可能是 NTFS 分区挂载。`chmod`不允许在 NTFS 分区上使用，因为 NTFS 无法识别 unix 权限。在你的主目录或 linux 分区上的某个地方运行它。

# sql-server-2008 - 将 Symfony2 连接到 MS SQL Server

> ID：14648266
> 
> 赞同：2
> 
> 时间：2013-02-01T14:17:10.477
> 
> 标签：sql-server-2008, symfony, doctrine-orm

我使用 MySQL 使用 Symfony2，现在我被要求使用 MS SQL Server 使用它。我该如何进行？我应该在 parameters.ini 文件中添加什么？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T15:57:15.160

可能是我要写的内容重申了@walid 引用的帖子中的某些内容，但只是快速浏览了一下，我没有看到它......

首先，在使用 MSSQL 时，您需要[pdo_sqlsrv 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=20098)。只需将您需要的版本（PHP 5.3/5.4 nts/ts）复制到您的 PHP`ext/`文件夹中，将扩展名添加到您的 php.ini 中，然后重新启动 apache。存档同时包含`pdo_sqlsrv*.dll`and `sqlsrv*.dll`，因此请确保使用**pdo_***！您可以通过检查`phpinfo()`扩展是否成功加载。

您的 parameters.ini 将保持几乎相同，除了 database_driver，它显然应该设置为`pdo_sqlsrv`. 不必在 parameters.ini 中指定端口，但如果您愿意，MSSQL 的默认端口是 1433。

举个例子，你的 parameters.ini 应该是这样的：

```
database_driver =   pdo_sqlsrv
database_host =     127.0.0.1
database_port =     1433
database_name =     Northwind
database_user =     DatabaseUser
database_password = DatabaseUserPassword 
```

作为旁注，我只使用 yaml-config，所以这可能不是 100% 正确的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T08:04:41.507

这是我对 Linux (Debian) 所做的：
[https ://stackoverflow.com/a/11434909/305189](https://stackoverflow.com/a/11434909/305189)

我基本上安装`php5-sybase`并使用了[这个捆绑包](https://github.com/intellectsoft-uk/MssqlBundle)

# javascript - 为数据数组中的多个标记显示不同的图标

> ID：14648267
> 
> 赞同：0
> 
> 时间：2013-02-01T14:17:11.983
> 
> 标签：javascript, google-maps

我有一个如下的数据数组，可以通过点击按钮在谷歌地图上显示：

```
var locations = [
[50.6343356475971,-9.53181026267496,"small_red","AGH","AGH1","GAS25"],
[40.2185001907869,0.928586419184371,"meassle_grey","BES1","BES","GAS23"],
[52.1400374749101,-7.50501915638024,"small_blue","DUB1","DUB","GAS24"], 
```

为了定义每个类的图标，我尝试了以下操作但没有成功：

```
function selectIcon(locations) {
  for (var i = 0; i < locations.length; i++) {      //Loop trough List of Data
  if (locations[i][2] ==  "small_red") {
    iconIMG = new google.maps.MarkerImage("Link to the iconAAA.png");
  if (locations[i][2] ==  "small_blue") {
    iconIMG = new google.maps.MarkerImage("Link to the iconBBB.png");
  }; 
```

现在的问题是，对于所有 3 个位置，始终为所有标记显示“iconBBB.png”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:38:24.017

那么你的问题在哪里？代码看起来不错，只是在 if 之后省略分号（但这不应该是问题：

```
if (locations[i][2] ==  "small_red") {...};  // <-- remove the semicolon here 
```

您还需要在某处调用您的函数：

```
selectIcon(locations); 
```

# java - SPA - 尺寸重要吗？

> ID：14648268
> 
> 赞同：4
> 
> 时间：2013-02-01T14:17:13.237
> 
> 标签：java, asp.net-mvc, html, single-page-application

似乎我发现的所有 SPA 示例，例如 Code Camper 和 ToDo 基本上都是微不足道的应用程序。它们包含 3 或 4 个列表，以及 1 或 2 个编辑屏幕。这些示例应用程序还倾向于预加载所有内容 - 数据和 html。

我需要构建的应用程序可能是 30 到 40 个编辑屏幕和 30 到 40 个列表/网格屏幕。我可能只想预加载一些视图，也许还有仪表板/小部件，然后当用户导航到“页面”时，其余的可能会被加载。

我想要 SPA 的好处，例如无需重新加载页面并一次加载所有各种 java 库。

有谁知道在初始加载后加载页面的任何示例应用程序？我来自 Windows 窗体 C# 背景，所以甚至不确定这是否可能。

谢谢，雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:53:42.910

用作 SPA 的站点的最佳示例是使用 jQueryMobile 的站点。在这个框架中，它通过使用 AJAX 请求加载页面而不实际导航到页面来工作。

以下是使用 jQueryMobile 的网站列表：

[https://github.com/jquery/jquery-mobile/wiki/Sites-built-with-jQuery-Mobile](https://github.com/jquery/jquery-mobile/wiki/Sites-built-with-jQuery-Mobile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T04:37:42.280

这就是 SPA 为您提供的全部内容，最初 SPA 将在第一个页面加载时加载大部分依赖项，并且每当您导航到其他视图时，它都会加载相应的视图依赖项，这些依赖项是额外需要的，并且不存在于您的缓存中。如果它们已经存在于您的缓存中，它不会再次加载依赖项或功能。最好看看[johnpapa.net SPA 教程](http://www.johnpapa.net/spa/)，他在教程中解释得很好。
SPA 最适合 30 到 40 个编辑屏幕和 30 到 40 个列表/网格屏幕。

# excel - 从单元格中提取字符串

> ID：14648277
> 
> 赞同：0
> 
> 时间：2013-02-01T14:17:38.100
> 
> 标签：excel, excel-2007

我在excel 2007中有这样的情况：

.15X.04-1.25X.625-SD+str

.15X.04-1.25X1.25-SD

.15X.04-1.5X1.25-SD

.15X.04-1.75X1.75-SC

.15X.04-1X.625-SD+str

.15X.04-2.25X2.25-SC

.15X.04-2.5X2.5-SC

.15X.04-2.75X2.75-SC

.15X.04-2X1.75-SC

.15X.04-3X3-SC

.15X.06-1.25X.625-SD+str

. . . .

我需要提取“-”和“X”之间的数字，或者整个部分，像这样：-1X; -1.25X；-1.5X；-1.75X 等等。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:22:39.193

如果您尝试从中获取数据的单元格位于 cell 中`A1`，则此公式将执行此操作：

```
=MID(A1,FIND("-",A1),FIND("X",A1,FIND("-",A1))-FIND("-",A1)+1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:25:06.180

这应该有效：

```
Private Function GetValue(ByVal cellLocation As String) As String

    Dim txt As String
    txt = Application.Range(cellLocation).text

    Dim split As String
    split = split(txt, "-")(0)

    Dim result As String
    result = split(partOne, "X")(0)

    GetValue = result

End Function 
```

# c++ - 当有一个 const 成员时，为什么 =default on operator= 编译？

> ID：14648295
> 
> 赞同：6
> 
> 时间：2013-02-01T14:18:33.393
> 
> 标签：c++, c++11

```
class Foo {
public:
  Foo& operator=(const Foo&) = default;
private:
  const int i = 0;
}; 
```

为什么`=default`允许在那里？它编译没有错误。我认为这`=default`应该失败，因为它不可能分配给`const`变量？

究竟发生了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T14:21:10.083

当函数无法生成时（如情况），`= default`将其生成为`= delete`d 代替。如果您尝试使用该赋值运算符，您的编译器应该[会产生错误](http://stacked-crooked.com/view?id=273e22dfdbf1660d1aac1c5c67d45d02)。

# hibernate - 如何覆盖 Hibernate 映射中键的等于？

> ID：14648296
> 
> 赞同：0
> 
> 时间：2013-02-01T14:18:33.310
> 
> 标签：hibernate, orm, map, overriding, equals

我想覆盖等于基于业务密钥而不是对象身份，但我不能让它与休眠一起工作。

我知道有人问过类似的问题，阅读答案（像[这样](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)）有助于理解不破坏*等价关系*，使用 instanceof 代替 getClass，使用 getter 代替字段引用。等等，但我的 equals/hashCode 实现仍然会破坏地图的休眠人口。

我没有收到错误，休眠将所有 3 个实体正确保存在数据库中的地图中，但是当我再次使用地图读取实体时，它只读取 1 而不是全部 3。hibernate 记录的 sql 在 mysql 中执行时选择正确的所有 3 个实体。

该项目基于 Spring 3.2.1、Hibernate 4.1.5 和 JPA 注释

### 更新

在调试休眠时，它似乎为 3 个映射实体中的每一个调用 hashCode，但除了休眠生成的 id 之外，所有值都是空的。因此，由覆盖方法计算的 hashCode 始终相同。我想这就是为什么只有一个实体被添加到地图中的原因。但我不明白为什么hibernate在从数据库加载数据之前计算hashCode？

### 例子

在下面的示例中，我在具有 3 个简单实体的项目中重现了错误（所有实体都具有休眠生成的 id）：

*   物品
*   语言
*   语言详情

Item 有一个 LanguageDetails 的 Map，其中 Language 是关键：

```
@OneToMany(mappedBy="item", orphanRemoval=true, cascade=CascadeType.ALL, fetch=FetchType.EAGER)
@MapKey(name="language")
private Map<Language, LanguageDetails> languageDetails = new TreeMap<Language, LanguageDetails>(); 
```

Language 中的业务键是一个名为*code*的字符串。我对覆盖equals的最佳猜测是使用eclipse生成equals/hashCode（并用instanceof替换getClass，用getter替换字段引用）：

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((getCode() == null) ? 0 : getCode().hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (!(obj instanceof Language))
        return false;
    Language other = (Language) obj;
    if (getCode() == null) {
        if (other.getCode() != null)
            return false;
    } else if (!getCode().equals(other.getCode()))
        return false;
    return true;
} 
```

以下集成测试在上面的 equals/hashCode 下失败，在没有以下情况下成功：

```
Item item = new Item();
Language english = languageService.getByCode("en");
Language german = languageService.getByCode("de");
Language spanish = languageService.getByCode("es");

item.getLanguageDetails().put(english, new LanguageDetails(item, english, "ice cream"););
item.getLanguageDetails().put(spanish, new LanguageDetails(item, spanish, "helado"););
item.getLanguageDetails().put(german, new LanguageDetails(item, german, "eis"););

//save - stores all 3 languageDetails correct in mysql
int id = itemService.create(item); 

//read - loads only 1 languageDetails (de)
Item readItem = itemService.getById(id); 

//java.lang.AssertionError: expected:<3> but was:<1>
Assert.assertEquals(item.getLanguageDetails().size(), readItem.getLanguageDetails().size()); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:37:32.117

我花了将近一周的时间进行调试、编写解决方法并试图理解这个问题，在我越来越绝望的试错尝试中，我找到了解决方案：

我将休眠版本从 4.1.5 更改为 4.1.8，我所有的痛苦都消失了。这是休眠中的一个错误，已在版本[4.1.7](https://hibernate.onjira.com/secure/ReleaseNote.jspa?projectId=10031&version=12250)中修复...

下次我一定会更早检查错误报告...

# vba - Word 2007：如何在打开时设置“显示推荐样式”

> ID：14648299
> 
> 赞同：1
> 
> 时间：2013-02-01T14:18:36.760
> 
> 标签：vba

我试图强制 Word 仅显示一组人将使用的样式。下面的宏只显示了我想要的样式。但这仅在“样式窗格选项”对话框的“选择要显示的样式”下拉列表中选择了“推荐”时才有效。

有没有办法在 vba 中设置它，以便在打开文档时用户只能看到选择的样式？

谢谢，

D

* * *

> 公共子样式集（）
> 
> ```
> ' First, turn off all Style visibility: 
> ```
> 
> 对于 ActiveDocument.Styles 中的每个 mystyle mystyle.Visibility = True 下一个 mystyle
> 
> ```
> 'update the styles 
> ```
> 
> ActiveDocument.UpdateStyles
> 
> ```
> ' Then, turn on the ones you want to see: 
> ```
> 
> ActiveDocument.Styles("Click").Visibility = False ActiveDocument.Styles("Button").Visibility = False ActiveDocument.Styles("Caption").Visibility = False
> 
> ```
> 'update the styles again
> ActiveDocument.UpdateStyles 
> ```
> 
> 结束子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:53:49.047

你想要 ... ？

```
ActiveDocument.FormattingShowFilter = wdShowFilterFormattingRecommended
ActiveDocument.StyleSortMethod = wdStyleSortRecommended 
```

# c++ - 警告：不推荐将字符串常量转换为 'ACE_TCHAR*'

> ID：14648301
> 
> 赞同：0
> 
> 时间：2013-02-01T14:18:44.793
> 
> 标签：c++, linux, gcc, ace

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:36:42.570

A string constant is, as the name says, a constant. So to make the warning go away, the proper solution would indeed be to turn the pointer into a const pointer.

If that cannot be done, you can explicit typecasts

```
ACE_TCHAR* argv[] = {const_cast<ACE_TCHAR*>("Input1"),
                     const_cast<ACE_TCHAR*>("Input2")}; 
```

or assign the strings to non-constant char arrays first

```
char input1[] = "Input1";
char input2[] = "Input2";
ACE_TCHAR* argv[] = {input1, input2}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:38:24.150

The type of a string literal is "array of `const char`". By the implicit array-to-pointer conversion, you can use this to initialize or assign to a `const char *`.

But there is a special rule, that a string literal can also be implicitly converted to a `char *` (without const). This rule exists for compatibility with old C code, where `char * str = "string literal"` was a common idiom. Using this is dangerous, because modifying the pointed to character array through that pointer causes undefined behavior (i.e. your program may crash, or anything else can happen). For that reason the construct is deprecated and your compiler warns you about it.

To create valid data you can pass on as non-const character pointers, you can use

```
const int argc = 2;
ACE_TCHAR argv0[] = "Input1";
ACE_TCHAR argv1[] = "Input2";
ACE_TCHAR* argv[] = { argv0, argv1 };
MyClass *myClass = new MyClass(argc, argv); 
```

# erlang - 是否保证在超时 0 的初始化后立即执行 handle_info？

> ID：14648304
> 
> 赞同：3
> 
> 时间：2013-02-01T14:18:47.397
> 
> 标签：erlang, erlang-otp

我收到一个奇怪的错误报告，让我认为在 gen_server 初始化之前正在执行一些调用。

这是初始化代码：

```
init([ResourceId]) ->
    process_flag(trap_exit, true),
    {ok, {not_initialized, ResourceId}, 0}. 
```

这是应该初始化资源的handle_info。

```
handle_info(timeout, {not_initialized, ResourceId}) ->
    Resource = data_store:get_resource(ResourceId),
    {noreply, Resource, ?CACHE_TIMEOUT}; 
```

data_store:get_resource(ResourceId) 的返回值为#resouce{} 记录，用于匹配所有的handle_call 方法。

带有函数子句的崩溃报告，因为进程仍未初始化。

```
=CRASH REPORT==== 1-Feb-2013::14:20:03 ===
crasher:
  initial call: gbanga_resources:init/1
  pid: <0.11772.0>  
  registered_name: []
  exception exit: {function_clause,
                      [{gbanga_resources,terminate,
                           [{function_clause,
                                [{gbanga_resources,handle_call,
                                     [get_resource,
                                      {<0.11658.0>,#Ref<0.0.0.240914>},
                                      {not_initialized,12697711}],
                                     [{file,"src/gbanga_resources.erl"},
                                      {line,120}]},
                                 {gen_server,handle_msg,5,
                                     [{file,"gen_server.erl"},{line,588}]},
                                 {proc_lib,init_p_do_apply,3,
                                     [{file,"proc_lib.erl"},{line,227}]}]},
                            {not_initialized,12697711}],
                           [{file,"src/gbanga_resources.erl"},{line,176}]},
                       {gen_server,terminate,6,
                           [{file,"gen_server.erl"},{line,722}]},
                       {proc_lib,init_p_do_apply,3,
                           [{file,"proc_lib.erl"},{line,227}]}]}
    in function  gen_server:terminate/6 (gen_server.erl, line 725)
  ancestors: [gbanga_resources_sup,gbanga_workers_sup,<0.92.0>]
  messages: [{'$gen_call',{<0.11638.0>,#Ref<0.0.0.240915>},get_resource},
                {'$gen_call',{<0.11633.0>,#Ref<0.0.0.240916>},get_resource}]
  links: [<0.6609.0>]
  dictionary: [] 
```

如果在任何句柄调用之前始终调用句柄信息超时，则永远不会发生这种情况。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:05:17.087

保证？不，超时与其他消息一样。如果在 init 函数的中间您收到来自另一个进程的消息，您可能会首先处理该消息。

话虽如此，像 gen_server 这样***的 OTP 进程***的 init 函数与调用进程是同步的，这意味着该进程将在您收到 Pid 时完成其 init 函数，这使得另一个进程很难向它发送消息在它有机会执行超时之前。

当然，我不建议对这种行为使用超时。不太清楚会发生什么，因为进程在从 init 返回时或多或少会产生，并且 Erlang 中的计时器不能保证准确按时触发（timer:sleep(5000) 将*至少*休眠5 秒，不完全是五秒）。`self()`相反，向;发送消息 这让进程立即知道它有工作要做，因为消息在init 返回*之前就在您的邮箱中结束了。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:59:21.897

我假设您这样做是为了缩短服务器的初始化时间。否则没有真正的理由不`data_store:get_resource/1`直接在`init/1`.

这样做的“标准”方法是对自己`init/1`进行**演员**表。

```
init([ResourceId]) ->
    process_flag(trap_exit, true),
    gen_server:cast(self(), init_phase_2),                 %Must be a cast!
    {ok, {not_initialized, ResourceId}}.

handle_cast(init_phase_2, {not_initialized,ResourceId}) ->
    Resource = data_store:get_resource(ResourceId),
    {noreply, Resource}. 
```

您**知道**这将是处理的第一条消息，因为 Pid 尚未返回，因此没有其他人可以向服务器发送消息。

# jsp - 从bean访问值：写入逻辑的值属性：equal Struts

> ID：14648311
> 
> 赞同：0
> 
> 时间：2013-02-01T14:19:12.173
> 
> 标签：jsp, struts, logic, javabeans

我正在使用 Struts 1.3.10 开发应用程序

我需要迭代 2 个列表才能在 jsp 中打印结果。第一次列表迭代需要用于从列表 2 中选择元素。出于这个原因，我试图这样做：

```
 <logic:iterate name="bodyForm" property="domainList" id="domList">
     <div><h1><bean:write name="domList" property="domain"/><h1>
          <ul> <logic:iterate name="bodyForm" property="locationsList" id="locList" >
                   <logic:equal name="locList" property="domain" value="<bean:write name="domList" property="domain"/>" >
                       <li><div>....</div></li>
                   <logic:equal>
               </logic:iterate>
           </ul>
     </div>
</logic:iterate> 
```

但是，当我在“logic:equal”的值内调用“bean:write”时，我得到一个错误。你知道怎么解决吗？

正如您向我提出的那样，我已经使用 JSTL 标签来获取解决方案，但是在网页的源代码中我有这个结果：

```
 <h1>domList.domain</h1>
        <ul>
          <li class="grey">
             <div>locList.countries.name </div>
             <div>locList.name</div>
             <div>locList.hostname</div>
             <div>locList.ip</div>
          </li>
          <li class="">
             <div>locList.countries.name </div>
             <div>locList.name</div>
             <div>locList.hostname</div>
             <div>locList.ip</div>
          </li>
        </ul> 
```

我似乎没有阅读bean信息......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:51:47.893

学习 JSTL 和 JSP EL，并使用它来代替这些过时的 struts 标签：

```
<c:forEach var="domList" items="${bodyForm.domainList}">
    <div>
        <h1><c:out value="${domList.domain}"/><h1>
        <ul> 
            <c:forEach var="locList" items="${bodyForm.locationsList}">
                <c:if test="${locList.domain == domList.domain}">
                    <li><div>....</div></li>
                </c:if>
           </c:forEach>
       </ul>
    </div>
</c:forEach> 
```

AFAIR，JSTL 存在了大约 10 年。从那时起，[Struts 文档](http://struts.apache.org/1.x/struts-taglib/dev_logic.html)说：

> 注意： - 此标记库中的许多功能在 JavaServer Pages 标准标记库 (JSTL) 中也可用。Apache Struts 小组鼓励尽可能使用标准标签而不是 Struts 特定标签。

# c# - 用于电子邮件验证的正则表达式不起作用

> ID：14648317
> 
> 赞同：1
> 
> 时间：2013-02-01T14:19:35.570
> 
> 标签：c#, regex, email-validation

我有以下用于电子邮件验证的正则表达式

```
^([A-Za-z0-9])+([\-|_|\.]?)+([A-Za-z0-9])+@([A-Za-z0-9]*\.?[A-Za-z]*\.[A-Za-z]{2,4})$ 
```

它适用于所有预期的情况，除了 1：

之后`@`，它应该接受以下任何内容：

```
gmail.com  
yahoo.co.uk 
```

这工作正常。

在`@,`它应该接受以下任何内容之前：

```
name  
name.name   
name_name  
name-name 
```

它适用于所有上述情况，在负面测试场景中的任何地方都不会失败，但以下情况除外：

```
name..name 
```

或者

```
name_.-name 
```

也就是说，当连续书写时，它允许我多次书写这些字符。

我的要求是它应该只允许其中一个，`(-._)`并且它们只能出现一次。
表达：`[.|_|\-]`？

但我不工作。有什么办法解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:21:23.153

不要费心使用正则表达式；有效电子邮件地址的范围很大，即使是最好的正则表达式也会遗漏其中一些。如果您想验证电子邮件，请与域的邮件服务器交谈并询问地址是否有效。

为了给您一个想法，这是一个捕获大多数有效电子邮件地址的正则表达式：

```
(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\]
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>
@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\]
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)
?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>
@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(
?:\r\n)?[ \t])*))*)?;\s*) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:24:06.863

我想您应该在第二组之后删除 + 。

这：

```
^([A-Za-z0-9])+([\-|_|\.]?)+([A-Za-z0-9])+@([A-Za-z0-9]*\.?[A-Za-z]*\.[A-Za-z]{2,4})$ 
```

应该是这样的：

```
^([A-Za-z0-9])+([\-|_|\.]?)([A-Za-z0-9])+@([A-Za-z0-9]*\.?[A-Za-z]*\.[A-Za-z]{2,4})$ 
```

如果您想强制使用此分隔符，您还必须删除该字符组后的问号并执行以下操作：

```
^([A-Za-z0-9])+([\-|_|\.])([A-Za-z0-9])+@([A-Za-z0-9]*\.?[A-Za-z]*\.[A-Za-z]{2,4})$ 
```

# emacs - Emacs：键绑定：如何将点移动到字符串的末尾

> ID：14648318
> 
> 赞同：0
> 
> 时间：2013-02-01T14:19:37.287
> 
> 标签：emacs

是否有键绑定将点移动到下一个字符串的末尾？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:05:04.673

如果 point 在字符串的开头，您可以使用它`C-M-f`来移过结尾：

```
 "this is my string"
↑ from here         ↑ to here 
```

但是，如果点在字符串内，这将不起作用。`C-s "`可能是最简单的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T19:15:17.007

大多数编程模式将为字符串文字的分隔符定义一个语法类。您可以使用`skip-syntax-forward`移动到这些。我不确切知道您想要的行为，但这是找到字符串分隔符所在位置的关键。

```
(skip-syntax-forward "^\"") 
```

*   [http://www.gnu.org/software/emacs/manual/html_node/elisp/Motion-and-Syntax.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Motion-and-Syntax.html)
*   [http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-Class-Table.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Syntax-Class-Table.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:23:00.270

是的，至少有几个。`C-u 2 C-e`或`C-n C-e`想到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:22:16.930

`(move-end-of-line 2)`是函数。

如果你愿意，你可以将它绑定到一个键：

`(global-set-key [f8] '(lambda () (interactive)(move-end-of-line 2)))`

在这里，您将其绑定到 f8。但是，是的，最合乎逻辑的是，您会使用`C-n C-e`

# jakarta-ee - 返回列表时没有包装元素

> ID：14648333
> 
> 赞同：1
> 
> 时间：2013-02-01T14:20:25.573
> 
> 标签：jakarta-ee, jaxb, jackson, jax-rs

我正在使用 JAX-RS / JAXB 和 JPA 创建 REST Web 服务。

```
@GET
@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
public List<MyObject> getList() {
    List<MyObject> resultList = em.createNamedQuery(
            "MyObject.findAll").getResultList();
    return resultList;
} 
```

返回

```
{
    "MYObject": [
        {
            "attribute": "value"
        },
        {
            "attribute": "value"
        }
    ]
} 
```

对于 xml：

```
 <mYObject>
      <MObject>
        <attribute>value</attribute>
      </MyObject>
      <MyObject>
        <attribute>value</attribute>
      </MyObject>
    </mYObject> 
```

我怎样才能摆脱包装元素？好的，xml 需要一个根元素 (mYObject) 但我该如何重命名它？JSON 是否有可能有这样的输出：

```
 [
        {
            "attribute": "value"
        },
        {
            "attribute": "value"
        }
    ] 
```

==> 没有 Wrapper 对象，只有包含所有对象的普通数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:00:48.257

不知道如果我说对了。但我猜你想要：

1.  重命名我的对象
2.  摆脱 MyObject

对于问题 1，

-- 您可以使用 @XmlRootElement(name="NOTmYObject") 将其覆盖为 NOTmYObject。

对于问题 2，

-- 如果您希望 POJO 中的数据结构与 HTTP 中的 json 不同，JaxB 不会假设这种灵活性。JaxB 严格地将其视为数据结构，就像服务和客户端之间的合同一样。使用 xsd 文件来定义这个合同更加困难。或者，如果您真的需要这种*灵活性*，您可能想看看*jackson*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T08:59:03.900

我决定继续使用默认的 List-marshaling。

但是，如果要归档自定义编组和命名，则必须编写自己的[MessageBodyReader](http://docs.oracle.com/javaee/6/api/javax/ws/rs/ext/MessageBodyReader.html)和[MessageBodyWriter](http://docs.oracle.com/javaee/6/api/javax/ws/rs/ext/MessageBodyWriter.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T15:52:02.453

使用[`@XmlValue`](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlValue.html)in`MyObject`来注释`attribute`.

# javascript - 从文件流 .NET 加载嵌入的 pdf

> ID：14648336
> 
> 赞同：0
> 
> 时间：2013-02-01T14:20:33.447
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, html

我想从文件流而不是 pdf 文件创建对象 html5 元素。

我将它与来自文件系统的 pdf 文档一起使用并且工作正常：

```
<body>
     <object id="exPDF" type="application/pdf" data="doc.pdf" width="100%"  eight="500" />
</body> 
```

但我想通过将文件流中的“数据”属性设置为“临时数据”（MVC3）或javascript函数或一些替代方法来做到这一点：

```
<body>
     <object id="exPDF" type="application/pdf" data="STREAM" />
</body> 
```

或者

```
<body>
     <object id="exPDF" type="application/pdf" data="javascript:getPdf();" />
</body> 
```

那可能吗？否则...有没有其他方法可以从流中加载嵌入式 pdf 或 HttpResponse？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:23:44.820

你真的应该有一些`HttpHandler`或`Controller`使用 URL 流式传输内容。用这么多字节数据使 HTML 膨胀并不是一个好主意。

# c# - 实体框架 - 避免“查找”实体在最初加载到另一个上下文时获得添加状态

> ID：14648354
> 
> 赞同：3
> 
> 时间：2013-02-01T14:21:27.490
> 
> 标签：c#, entity-framework

这是一些演示我的问题的测试代码：

```
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;
using NUnit.Framework;

namespace EFGraphInsertLookup
{
    public class GraphLookup
    {
        public int ID { get; set; }
        public string Code { get; set; }
    }

    public class GraphChild
    {
        public int ID { get; set; }
        public virtual GraphRoot Root { get; set; }
        public virtual GraphLookup Lookup { get; set; }
    }

    public class GraphRoot
    {
        public int ID { get; set; }
        public virtual ICollection<GraphChild> Children { get; set; }
    }

    public class TestDbContext : DbContext
    {
        public DbSet<GraphRoot>   GraphRoots    { get; set; }
        public DbSet<GraphChild>  GraphChildren { get; set; }
        public DbSet<GraphLookup> GraphLookups  { get; set; }

        public TestDbContext()
        {
            GraphLookups.ToList();
        }
    }

    public class TestDbInit : DropCreateDatabaseAlways<TestDbContext>
    {
        protected override void Seed(TestDbContext context)
        {
            base.Seed(context);
            context.GraphLookups.Add(new GraphLookup { Code = "Lookup" });
            context.SaveChanges();
        }
    }

    [TestFixture]
    public class Tests
    {
        [Test]
        public void MainTest()
        {
            Database.SetInitializer<TestDbContext>(new TestDbInit());

            var lookupCtx = new TestDbContext();
            var firstLookup = lookupCtx.GraphLookups.Where(l => l.Code == "Lookup").Single();

            var graph = new GraphRoot
            {
                Children = new List<GraphChild> { new GraphChild { Lookup = firstLookup } }
            };
            var ctx = new TestDbContext();
            ctx.GraphRoots.Add(graph); // Creates a new lookup record, which is not desired
            //ctx.GraphRoots.Attach(graph); // Crashes due to dupe lookup IDs
            ctx.SaveChanges();

            ctx = new TestDbContext();
            graph = ctx.GraphRoots.Single();
            Assert.AreEqual(1, graph.Children.First().Lookup.ID, "New lookup ID was created...");
        }
    }
} 
```

我的愿望是让 GraphLookup 充当查找表，其中记录链接到其他记录，但从不通过应用程序创建记录。

我遇到的问题是查找实体在不同的上下文中加载时，例如在缓存时。因此，保存记录的上下文不会跟踪该实体，并且当调用 GraphRoot DbSet 上的 Add 时，查找以已添加的 EntityState 结束，但实际上它应该是未更改的。

如果我改为尝试使用附加，则会由于重复键而导致崩溃，因为两个查找实体最终出现在上下文中。

解决这个问题的最佳方法是什么？请注意，我已经相当简化了实际问题。在我的实际应用程序中，这是通过位于 EF DBContext 之上的几个不同的存储库层、工作单元和业务服务类来实现的。因此，我可以在 DBContext 中以某种方式应用的通用解决方案将是更可取的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:28:29.487

如果您将现有实体（例如从缓存中）带入另一个`DbContext`实体，则必须明确管理实体状态。这导致了两个简单的结论：除非您确实需要，否则**不要混合来自多个上下文的实体，并且当您这样做时，****明确设置**您附加的所有内容的实体状态。

您可以尝试的一种缓存方法是这样。创建一个简单的缓存管理器类，可能是静态的。对于您要缓存的每种实体类型，都有一个`GetMyEntity(int myEntityId, DbContext context)`如下所示的方法：

```
public MyEntity GetMyEntity(int entityId, MyContext context)
{
    MyEntity entity;

    // Get entity from context if it's already loaded.
    entity = context.Set<MyEntity>().Loaded.SingleOrDefault(q => q.EntityId == entityId);

    if (entity != null)
    {
        return entity;
    }
    else if (this.cache.TryGetValue("MYENTITY#" + entityId.ToString(), out entity)
    {
        // Get entity from cache if it's present.  Adapt this to whatever cache API you're using.
        context.Entry(entity).EntityState = EntityState.Unchanged;
        return entity;
    }
    else
    {
        // Load entity if it's not in the context already or in the cache.
        entity = context.Set<MyEntity>().Find(entityId);

        // Add loaded entity to the cache.  Adapt this to specify suitable rules for cache item expiry if appropriate.
        this.cache["MYENTITY#" + entityId.ToString()] = entity;
        return entity;
    }
} 
```

请原谅任何错别字，但希望你能明白。您可能会看到这可以概括，因此您也不必为每个实体类型使用一种方法。

**编辑：**

以下代码可能有助于展示如何分离*除*实际要添加的实体之外的所有内容。

```
// Add a single entity.
context.E1s.Add(new1);

var dontAddMeNow = (from e in context.ChangeTracker.Entries()
                    where !object.ReferenceEquals(e.Entity, new1)
                    select e).ToList();

foreach (var e in dontAddMeNow)
{
    e.State = System.Data.EntityState.Unchanged;  // Or Detached.
} 
```

**编辑2：**

这是显示预加载参考数据如何解决您的问题的代码。

```
E2 child = new E2 { Id = 1 };

context.Entry(child).State = System.Data.EntityState.Unchanged;

E1 new1 = new E1
{
    Child = child
};

// Add a single entity.
context.E1s.Add(new1);

Debug.Assert(context.Entry(new1.Child).State == System.Data.EntityState.Unchanged);
Debug.Assert(context.Entry(new1).State == System.Data.EntityState.Added); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:30:44.173

查找定义为外键吗？这段代码是第一个吗？如果是这样，请尝试将子项更改为具有 LookupID 而不仅仅是导航属性。
然后仅提供 GraphLookiD。（性能更好，因为不需要先加载查找实体。）

```
public class GraphChild
{
    public int ID { get; set; }
    public int GraphLookupId  { get; set; } //<<<<< add this an SET ONLY this
    public virtual GraphRoot Root { get; set; }
    public virtual GraphLookup Lookup { get; set; }
} 
```

实体 GraphCHILD 的 fluent api 片段

```
 .HasRequired(x => x.Lookup).WithMany().HasForeignKey(x => x.graphlookupID); 
```

或者

如果您想获得当前的工作方法，您可以尝试将查找项附加到上下文第一。确保它没有被标记为然后添加图表；）

# facebook - 在 Facebook 上是否可以强制应用显示为页面选项卡？

> ID：14648355
> 
> 赞同：0
> 
> 时间：2013-02-01T14:21:28.943
> 
> 标签：facebook

我有一个 Facebook 应用程序，目前由 3 个元素组成 - Facebook 上的应用程序、移动网络和页面选项卡。

目前，如果我使用应用程序 URL，它会检测我是否在移动设备上，并将我定向到 Facebook 上的应用程序或移动网站。

我想做的是始终在页面选项卡的上下文中显示应用程序。反正有没有强迫这个？

我尝试查看是否可以直接使用页面标签 URL 并将其重定向到移动设备，但取决于我如何链接它返回 404 或只是将您带到 Facebook 页面。我很感激我可以自己进行移动检测，但我想我会先检查一下我是否在 Facebook 上遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:53:09.647

我在这里写了一个关于如何做到这一点的解释：[https ://stackoverflow.com/questions/14434072/create-facebook-page-tab-and-publish-template-on-it/14455665#14455665](https://stackoverflow.com/questions/14434072/create-facebook-page-tab-and-publish-template-on-it/14455665#14455665)

希望这就是你所追求的！

# iphone - 使用 8 个图像在 UIImageView 周围创建边框

> ID：14648357
> 
> 赞同：3
> 
> 时间：2013-02-01T14:21:42.330
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiimageview

我制作了 8 个图像，每个角 4 个图像，每个边 4 个图像`UIImageView`。现在，我到底如何让它们“出现”，`view`这样它们就形成了一个漂亮的、可拉伸的边框，就像这样（白线是我尝试实现的边框）： ![在此处输入图像描述](../Images/ef0f6eaed79cfeb660d196a36fcc5e87.png)

关于如何实现`view`基于 8 个预设图像的边框的任何想法？

**编辑：**我不想*画*边框，我想用我的 8 张图片！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T14:30:35.080

这并不是你真正想要的，但这是最接近你想要做的解决方案。

您应该拍摄 8 张图像并将它们组合成一张图像，然后使用[`resizableImageWithCapInsets:resizingMode:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImage/stretchableImageWithLeftCapWidth:topCapHeight:).

第一个参数让您指定顶部、左侧、底部和右侧的插图（即图像的大小）。

![在此处输入图像描述](../Images/3300cb290dbe76b81a696e4dbb0cce29.png)

第二个参数确定区域是拉伸还是平铺。

拉伸
![拉伸边框](../Images/5fa4175f3a39c5221c3e20c2cf1c1ada.png)

平铺
![平铺边框](../Images/273ff7cb81c9978289cde54df7d407bf.png)

所以要使用它，你会做类似的事情

```
UIImage *myFullImage = [UIImage imageNamed:@"nameOfTheCombinedImage"];
UIImage *resizableImage = 
[myFullImage resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right)resizingMode:UIImageResizingModeTile]; 
```

[（从此处](http://www.css3.info/preview/border-image/)“借来”的拉伸与平铺图像）

# c# - 使用new-keyword加入两个接口的方法

> ID：14648359
> 
> 赞同：-1
> 
> 时间：2013-02-01T14:21:51.717
> 
> 标签：c#, .net, explicit-interface

我有两个接口 A、B（位于不同的组件中）。两者都声明了一个具有相同签名 ( `MyMethod`) 的方法。这两个接口由第三个接口 (C) 继承。

在前两个接口（A，B）中声明的方法旨在始终返回相同的值（对于 A 和 B），因此，我不想在从 C 派生时显式实现接口。
我实现了这一点在使用 new-keyword 时也在第三个接口中声明该方法。

```
public interface A {
   MyType MyMethod();
}
public interface B {
   MyType MyMethod();
}

public interface C : A,B{
   new MyType MyMethod();
}

public class ImplementingClass : C{
   public MyType MyMethod(){
       // do somethin
       // return something
   }
} 
```

有没有可以预料到的问题，或者这是一种糟糕的风格？

**更新**
对不起，我最初的问题没有显示完整的故事。当我尝试在 C 的接口引用上调用 MyMethod 时，就会出现问题。编译器不会编译它。

```
 C aReferenceToC=new CImplementingClass();
 aReferenceToC.MyMethod(); // <<< Here the compiler will throw an exception 
```

**完整示例**

```
C myCImplementationAsAnInterfaceReference = new MyCImplementation(); 
myCImplementationAsAnInterfaceReference.MyMethod(); // This does not compile without declaring MyMethod in C with the new-Keyword

MyCImplementation myCImplementationReference= new MyCImplementation(); 
myCImplementationReference.MyMethod(); // This however will always compile and run

public interface A {
        int MyMethod();
}
public interface B {
        int MyMethod();
}

public interface C : A, B {

}

public class MyCImplementation : C {

        public int MyMethod() {
            return 1;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:50:00.097

做你所做的，并不会以任何方式阻止人们给出不同的`A.MyMethod`,`B.MyMethod`和`C.MyMethod`.

```
 class TestABC : C
  {
    MyType C.MyMethod()
    {
      // 1
      return null;
    }

    MyType A.MyMethod()
    {
      // 2
      return null;
    }

    MyType B.MyMethod()
    {
      // 3
      return null;
    }
  } 
```

该`new`关键字无论如何都不会删除“隐藏”方法。它只是告诉编译器容忍这样一个事实，即该类型现在有两个具有相同签名的相同方法，一个从基类型继承，一个由当前类型声明。

**编辑：**好的，鉴于您的问题的发展，这就是我认为您的问题的真正原因（最初我并不清楚）：

你有这样的设计：

```
public interface A {
   MyType MyMethod();
}
public interface B {
   MyType MyMethod();
}

public interface C : A,B{
} 
```

你的问题是这段代码没有编译：

```
C myInstance = CreateAnInstanceOfSomeClassImplementingC();
myInstance.MyMethod();  //  does not compile, ambiguous 
```

您的问题是，摆脱编译器错误*错误 CS0121: The call is ambiguous between the following methods or properties: [...]*通过`new`在`C`.

在我看来，这很丑陋。`C`但是我无法想出另一个解决方案（当您在评论中告诉我时`class`）。接口没有办法规定继承的两个方法必须结合在一起。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T14:31:28.703

是否使用`new`关键字在这里并没有真正改变任何东西。行为是一样的。

```
Testing testing = new Testing();
testing.MyMethod(); // calls Testing.MyMethod

AA testingA = new Testing();
testingA.MyMethod(); // calls AA.MyMethod

 public interface A
{
    int MyMethod();
}

public class AA : A
{

    public int MyMethod()
    {
        return 11;
    }
}

public interface B
{
    int MyMethod();
}

public interface C : A, B
{
    int MyMethod();
}

public class Testing : AA,C
{
    public int MyMethod()
    {
        return 10;
    }
} 
```

# apache-camel - Camel - 捕获全局异常

> ID：14648361
> 
> 赞同：1
> 
> 时间：2013-02-01T14:22:03.210
> 
> 标签：apache-camel, apache-servicemix

我的路线有很多转换，有时由于某些格式错误的文件或其他原因，其中一些转换失败，所以当出现异常时，我必须发送电子邮件。因此，在上下文中，我声明了以下内容：

```
<camel:onException useOriginalMessage="true">
  <camel:exception>javax.xml.transform.TransformerException</camel:exception>
  <camel:redeliveryPolicy maximumRedeliveries="3"/>
  <camel:to uri="smtp://localhost:25?From=noreply-esb@me.com&amp;To=me@me.com" />
</camel:onException> 
```

但这就像什么都没有发生，因为我的骆驼正在不停地进行转换，而且电子邮件也没有发送。

这是日志：

```
2013-02-01 14:55:09,645 | WARN  | ox/products_list | GenericFileOnCompletion          | ?                                   ? | 92 - org.apache.camel.camel-core - 2.8.5 | Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@6fc72332 for file: GenericFile[/opt/servicemix/data/smx-data/outbox/products_list/product_export.xml]
2013-02-01 14:55:10,238 | ERROR | ox/products_list | DefaultErrorHandler              | ?                                   ? | 92 - org.apache.camel.camel-core - 2.8.5 | Failed delivery for exchangeId: ID-esb1-prod-prod-thesting-cyso-net-44582-1359563246542-5-1329\. Exhausted after delivery attempt: 1 caught: javax.xml.transform.TransformerException: XML document structures must start and end within the same entity.
javax.xml.transform.TransformerException: XML document structures must start and end within the same entity.
        at org.apache.xalan.transformer.TransformerImpl.fatalError(TransformerImpl.java:780)[:]
        at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:756)[:]
        at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:1273)[:]
        at org.apache.xalan.transformer.TransformerImpl.transform(TransformerImpl.java:1251)[:]
        at org.apache.camel.builder.xml.XsltBuilder.process(XsltBuilder.java:123)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:102)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:72)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.impl.converter.AsyncProcessorTypeConverter$ProcessorToAsyncProcessorBridge.process(AsyncProcessorTypeConverter.java:48)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:114)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:284)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:109)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:90)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:318)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:209)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DefaultChannel.process(DefaultChannel.java:306)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.Pipeline.process(Pipeline.java:116)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.Pipeline.process(Pipeline.java:79)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:111)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:61)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:114)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:284)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:109)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:90)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:318)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:209)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DefaultChannel.process(DefaultChannel.java:306)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:111)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:61)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:114)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:284)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:109)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:90)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DefaultChannel.process(DefaultChannel.java:306)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:318)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:209)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:139)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:106)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.MulticastProcessor.doProcessSequential(MulticastProcessor.java:573)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.MulticastProcessor.doProcessSequential(MulticastProcessor.java:506)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.MulticastProcessor.process(MulticastProcessor.java:219)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:90)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DefaultChannel.process(DefaultChannel.java:306)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:139)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:106)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:353)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:176)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:137)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:139)[92:org.apache.camel.camel-core:2.8.5]
        at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:91)[92:org.apache.camel.camel-core:2.8.5]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)[:1.6.0_26]
        at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)[:1.6.0_26]
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)[:1.6.0_26]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)[:1.6.0_26]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)[:1.6.0_26]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)[:1.6.0_26]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_26]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_26]
        at java.lang.Thread.run(Thread.java:662)[:1.6.0_26] 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:03:49.177

如果转换失败，下次它就不太可能完成——数据是错误的。因此，您的案件的重新交付政策要少一些。

但是，尝试将异常设置为已处理，然后设置为您的 smtp 端点。

```
<camel:handled>
      <camel:constant>true</camel:constant>
</camel:handled> 
```

# php - 检查是否选择了选择选项

> ID：14648363
> 
> 赞同：1
> 
> 时间：2013-02-01T14:22:08.497
> 
> 标签：php, forms, select

我有一个表单，我在其中向 mysql 查询发布了一些选项。当它返回时，它会绘制一个包含一些数据的表格。

如果我的表单返回，如何设置选择框的选项？

我试过这个，但不工作：

```
<form method="post" id="partnersearchform">
<input type="hidden" name="formaction" value="partnersearch">
Partner Típus<br>
<select onchange="document.getElementById('partnersearchform').submit();" size="" name="ceg">
<option value="">(mind)</option>
<option value="1" if($ceg==1){ print 'selected'; }>Magánszemélyek</option>
<option value="2" if($ceg==2){ print 'selected'; }>Cégek</option>
</select>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:24:52.133

试试这样：

```
<?php if($ceg==1){ echo 'selected="selected"'; } ?> 
```

还要确保你在 $ceg var 中得到了什么。

```
<option value="<?php echo $ceg;?>"
 <?php if($ceg==1){ echo 'selected="selected"'; }?>>Magánszemélyek</option> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:25:03.600

您忘记打开和关闭 php 标签：

```
<form method="post" id="partnersearchform">
<input type="hidden" name="formaction" value="partnersearch">
Partner Típus<br>
<select onchange="document.getElementById('partnersearchform').submit();" size="" name="ceg">
<option value="">(mind)</option>
<option value="1"<?php if($ceg==1){ print ' selected'; }?>>Magánszemélyek</option>
<option value="2"<?php if($ceg==2){ print ' selected'; }?>>Cégek</option>
</select>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:24:41.487

```
<option value="1" <?php if($ceg==1){ print 'selected'; }?> >Magánszemélyek</option> 
```

# javascript - js inside method in method中this关键字的逻辑是什么？

> ID：14648365
> 
> 赞同：5
> 
> 时间：2013-02-01T14:22:19.657
> 
> 标签：javascript, web, function-prototypes

谁能告诉js中的“this”关键字..我看了示例。有一点我无法理解。

```
 A.B=function()
    {
      this.x(5); // this refers to prototype of A.B
    }

   A.B.prototype= { 
    x:function(p)
    { this.a(p);  // this refers to prototype of A.B again  
                  // but I expect that this refers to protoype of x ???  

     }, 
        a:function(p){ return p;}
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:27:36.223

如果你调用一个方法：

```
a.b.c.d(); 
```

then在`this`方法`a.b.c`内部（除了最终函数名之外的所有内容）。

如果调用构造函数：

```
var x = new Something(); 
```

then`this`是Something() 中的一个新对象。

其他地方`this`都是全局对象（与浏览器中的相同`window`）。

`this`从来都不是原型。这可以**有**一个原型。

在您的示例中：

```
A.B = function() {
  this.x(5);
} 
```

`this`如果该方法被称为是`A`（它不必是 的原型`A.B`） - 如果该方法被称为`A.B()`是一个新对象`new A.B()`。

# php - 你能把这个 Ruby 正则表达式转换成 PHP 吗？

> ID：14648368
> 
> 赞同：-7
> 
> 时间：2013-02-01T14:22:28.730
> 
> 标签：php, ruby, regex

我试图找到以**((**并以**))**开头但不包含任何内容的所有内容**！**人物。这是我刚刚生成的正则表达式。( [http://rubular.com/r/7rQipcE9FK](http://rubular.com/r/7rQipcE9FK) ) 但我不知道如何将它转换为 PHP preg_match_all。

它还将**dolor sit amet**作为一个字符串返回，但我需要将 ((dolor)) 和 ((amet)) 分开。你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:28:28.897

你必须使`*`非贪婪，`?`在它之后使用。

```
/\(\([^!]*?\)\)/ 
```

代码：

```
$text = "((Lorem)) ((!ipsum)) ((dolor)) sit ((amet)), ((!consectetur)) ((!adipisicing)) ((elit))";  
$regex = "/\(\([^!]*?\)\)/";                                                                        

preg_match_all($regex, $text, $matches);                                                            

var_dump($matches); 
```

输出：

```
array(1) {
  [0] =>
  array(4) {
    [0] =>
    string(9) "((Lorem))"
    [1] =>
    string(9) "((dolor))"
    [2] =>
    string(8) "((amet))"
    [3] =>
    string(8) "((elit))"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:28:00.203

它几乎一样

```
preg_match_all('|\(\([^!]*\)\)|', '{{your data}}', $arr, PREG_PATTERN_ORDER); 
```

# python - Python Function calls are really slow

> ID：14648374
> 
> 赞同：10
> 
> 时间：2013-02-01T14:22:44.330
> 
> 标签：python, function, profiling, call

This is mostly to make sure my methodology is correct, but my basic question was is it worth it to check outside of a function if I need to access the function at all. I know, I know, premature optimization, but in many cases, its the difference between putting an if statement inside the function call to determine whether I need to run the rest of the code, or putting it before the function call. In other words, it takes no effort to do it one way or the other. Right now, all the checks are mixed between both, and I'd like the get it all nice and standardized.

The main reason I asked is because the other answers I saw mostly referenced timeit, but that gave me negative numbers, so I switched to this:

```
import timeit
import cProfile

def aaaa(idd):
    return idd

def main():
    #start = timeit.timeit()
    for i in range(9999999):
        a = 5
    #end = timeit.timeit()
    #print("1", end - start)

def main2():
    #start = timeit.timeit()
    for i in range(9999999):
        aaaa(5)
    #end = timeit.timeit()
    #print("2", end - start)

cProfile.run('main()', sort='cumulative')
cProfile.run('main2()', sort='cumulative') 
```

and got this for output

```
 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.310    0.310 {built-in method exec}
        1    0.000    0.000    0.310    0.310 <string>:1(<module>)
        1    0.310    0.310    0.310    0.310 test.py:7(main)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    2.044    2.044 {built-in method exec}
        1    0.000    0.000    2.044    2.044 <string>:1(<module>)
        1    1.522    1.522    2.044    2.044 test.py:14(main2)
  9999999    0.521    0.000    0.521    0.000 test.py:4(aaaa) 
```

To me that shows that not calling the function is .31 seconds, and calling it takes 1.52 seconds, which is almost 5 times slower. But like I said, I got negative numbers with timeit, so I want to make sure its actually *that* slow.

Also from what I gather, the reason function calls are so slow is because python needs to look up to make sure the function still exists before it can run it or something? Isn't there any way to just tell it to like...assume that everything is still there so that it doesn't have to do unnecessary work that (apparently) slows it down 5x?

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-01T14:33:43.410

You are comparing apples and pears here. One method does simple assignment, the other calls a function. Yes, function calls *will* add overhead.

You should strip this down to the bare minimum for `timeit`:

```
>>> import timeit
>>> timeit.timeit('a = 5')
0.03456282615661621
>>> timeit.timeit('foo()', 'def foo(): a = 5')
0.14389896392822266 
```

Now all we did was *add* a function call (`foo` does the same thing), so you can measure the extra time a function call takes. You cannot state that this is nearly 4 times slower, no, the function call *adds* a 0.11 second overhead for *1.000.000* iterations.

If instead of `a = 5` we do something that takes 0.5 seconds to execute one million iterations, moving them to a function won't make things take 2 seconds. It'll now take 0.61 seconds because the function overhead doesn't grow.

A function call needs to manipulate the stack, pushing the local frame onto it, creating a new frame, then clear it all up again when the function returns.

In other words, moving statements to a function adds a small overhead, and the more statements you move to that function, the smaller the overhead becomes as a percentage of the total work done. A function *never* makes those statements themselves slower.

A Python function is just an object stored in a variable; you can assign functions to a different variable, replace them with something completely different, or delete them at any time. When you invoke a function, you first reference the name by which they are stored (`foo`) and then invoke the function object (`(arguments)`); that lookup has to happen every single time in a dynamic language.

You can see this in the bytecode generated for a function:

```
>>> def foo():
...     pass
... 
>>> def bar():
...     return foo()
... 
>>> import dis
>>> dis.dis(bar)
  2           0 LOAD_GLOBAL              0 (foo)
              3 CALL_FUNCTION            0
              6 RETURN_VALUE 
```

The `LOAD_GLOBAL` opcode looks up the name (`foo`) in the global namespace (basically a hash table lookup), and pushes the result onto the stack. `CALL_FUNCTION` then invokes whatever is on the stack, replacing it with the return value. `RETURN_VALUE` returns from a function call, again taking whatever is topmost on the stack as the return value.

# javascript - Javascript正则表达式删除括号内的字符串

> ID：14648375
> 
> 赞同：5
> 
> 时间：2013-02-01T14:22:45.600
> 
> 标签：javascript, regex

我想删除 and 之间的`{`字符`}`。

例子 ：

```
 input_string = "i like apple {nobody knows}"; 
```

预期结果 ：

```
"i like aple" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T14:24:23.637

您可以使用

```
 var out = input_string.replace(/{[^}]*}/,'') 
```

如果要删除多个匹配项，请使用

```
 var out = input_string.replace(/{[^}]*}/g,'') 
```

* * *

要删除 and 之间的东西`/*`，`*/`这个应该可以工作：

```
 var out = input_string.replace(/(?!<\")\/\*[^\*]+\*\/(?!\")/g,'') 
```

# c# - 调用 IEnumerable

> ID：14648376
> 
> 赞同：0
> 
> 时间：2013-02-01T14:22:48.330
> 
> 标签：c#, c#-4.0

我有一个从表中检索记录的代码：

```
var query = (from c in DBContext.MyTable where c.FacilityID == ID select c); 
```

然后我想列出所有记录，我使用下面的代码：

```
public IEnumerable<IEnumerable<T>> GetPages<T>(IQueryable<T> query, int pageSize)
{
    int pageNumber = 10;
    var page = GetPage(query, pageSize, pageNumber).ToList();
    while (page.Any())
    {
        yield return page;
        page = GetPage(query, pageSize, pageNumber).ToList();
    }
}

public IQueryable<T> GetPage<T>(IQueryable<T> query, int pageSize, int pageNumer)
{
    return query.Skip(pageNumer * pageSize)
        .Take(pageSize);
} 
```

我不知道怎么打电话`GetPages`？

我的代码是错误的。

```
IEnumerable<object> list = GetPages(query, 1000);
foreach (var result in list)
{
    string filePath = result.FilePath;
    string fileName = result.FileName;
    // log to output
} 
```

**更新：** 当我悬停查询的 var 部分时。

> ```
>  System.Linq.IOrderedQueryable<Something.Web.SharedObjects.MyTable> 
> ```

我将 T 替换为 Something.Web.SharedObjects.MyTable。它似乎正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:25:37.563

好吧，假设您`query`是一个`IQueryable<FileResult>`，请查看该方法声明返回的内容。你想要这样的东西：

```
IEnumerable<IEnumerable<FileResult>> pages = GetPages(query, 1000);
foreach (IEnumerable<FileResult> page in pages)
{
    Console.WriteLine("Start of page!");
    foreach (var result in page)
    {
        Console.WriteLine("{0} - {1}", result.FilePath, result.FileName);
    }
    Console.WriteLine("End of page!");
} 
```

重要的是您要了解返回的是一个*页面*序列，其中每个页面都是一个*项目*序列。

# entity-framework - 条目从淘汰赛 ui 中删除，但不是从 db

> ID：14648377
> 
> 赞同：0
> 
> 时间：2013-02-01T14:22:51.840
> 
> 标签：entity-framework, asp.net-mvc-4, knockout.js, asp.net-web-api, ninject

我在带有 EF、Ninject 的 MVC 4 中使用 WebApi。在客户端我使用 knockout.js 结束它从 UI 中删除我的条目，但它仍在 DB 中。添加，更新操作工作正常。

客户端代码：

```
 self.removeUser = function (user) {
              var conj = ko.toJS(user);
              var json = JSON.stringify(conj);
              var Id = user.Id();
              $.ajax({
                  url: API_URL + Id,
                  cache: false,
                  type: 'DELETE',
                  contentType: 'application/json; charset=utf-8',
                  data: '',
                  success: function () {
                      self.Users.remove(user);
                  }
              });
          } 
```

网络API

```
 // DELETE api/user/5
public HttpResponseMessage Delete(int id)
{
    _userRepository.Delete(id);
    return Request.CreateResponse(HttpStatusCode.NoContent);
} 
```

存储库

```
 public void Delete(int userId)
    {
        var user = Get(userId);
        _db.Users.Remove(user);
    } 
```

从哪儿开始？走哪条路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:30:39.713

如果你想删除一个实体是不够的，从它的集合中删除它是不够的。您需要调用`DbContext.SaveChanges()`以提交事务并将更改保存到数据库中：

```
public void Delete(int userId)
{
    var user = Get(userId);
    _db.Users.Remove(user);
    _db.SaveChanges();
} 
```

# php - 管理员页面的页面保护不起作用

> ID：14648378
> 
> 赞同：0
> 
> 时间：2013-02-01T14:22:57.247
> 
> 标签：php, admin, webpage, protection

我一直在尝试为管理员页面进行页面保护，但无法使其正常工作。如果我不是 PHP 编码的新手，我相信这不会是一个问题，呵呵。

所以我想做的是，当类型为“0”的普通用户试图访问管理员页面**index_admin.php**时，用户将被重定向到普通用户页面**index.php**。如果用户的类型为“1”，则用户/管理员将留在页面上。

所以这是我一直试图开始工作的代码。（该文件在**index_admin.php**中是必需的，它被称为**index_admin_check.php**）：

```
<?php
  session_start();
?>

<?php
    $vert = "localhost";
    $brukarnamn = "root";
    $passord = "";
    $db_namn = "nettsidebunad";
    $tbl_namn = "kunde_register";

    // Connecting to the MySQL database.
    mysql_connect("$vert", "$brukarnamn", "$passord") or die ("Kan dessverre ikkje koble til databasen.");
    mysql_select_db("$db_namn") or die ("Kan ikkje finna den ynkjande databasen.");
?>

<?php
        // *** Page protection *** \\

        // Admin check. If `type` = 1, let the user (admin) stay on the site. If `type` = 0 kick the user (normal) off the site.
        $sql = "SELECT `type` FROM $tbl_namn";
        $res = mysql_query($sql);
        $tell = mysql_num_rows($res);

    if ($tell == 0) {
        header ("location: index.php");
        exit();
}
?> 
```

部分文本为挪威语。

*$vert* = $host（英文）

*$brukarnamn* = $usernamn（英文）

*$passord* = $password（英文）

*$db* _namn = $db_name（英文）

*$tbl* _namn = $tbl_name（英文）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-04T00:07:28.583

把这个放到登录页面：

```
<?php session_start();
if ($_POST['type'] = "1") {
    Header('location: http://example.com/admin.php/');
    $_SESSION['admin']; = "yes";
    exit;
} else { 
    Header('location: http://example.com/user.php/');
    $_SESSION['admin']; = "no";
    exit;
}
//modify as needed
?> 
```

这一个进入 admin.php 文件名可以是任何但扩展名需要是 .php：

```
<?php session_start():
if ($_SESSION['admin']; = "no") {
    Header('location: http://example.com/user.php/');
    exit;
}
//modify as needed
?> 
```

并记住将其放在文件的开头，否则会话将无法正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:31:33.633

```
$sql = "SELECT `type` FROM $tbl_namn"; 
```

此 SQL 查询将为数据库中的每个用户返回一行。使用您的简单检查查询是否返回结果的方法，您只需选择当前用户的行，然后仅当用户具有`type=1`.

您需要确保：

*   用户之前已经使用用户名和密码或类似的方式登录系统
*   您已将他们的详细信息保存到会话中。

如果您的用户表有一个 ID 列，并且您将登录用户的 ID 作为“用户 ID”保存到会话中，则可以使用以下查询：

```
$sql = "SELECT `type` FROM $tbl_namn WHERE id = {$_SESSION['userid']} AND type = 1"; 
```

但这当然没有实际意义，因为当您第一次登录时，您只需将用户的类型保存在会话中，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:36:11.930

好吧，就我所见，您实际上并没有检查用户。我将对您的代码做一些评论以明确情况：

```
 $sql = "SELECT `type` FROM $tbl_namn";   //Return all values of column "type" from table - instead you should search for specifyc user
    $res = mysql_query($sql);    
    $tell = mysql_num_rows($res);   //Count returned rows 
```

因此，您无需查找用户类型，而是获取注册用户的数量。您应该如何搜索用户名并获取该名称的用户类型。所以让我们想想这个表格的概念： `ID | name | type |`
现在我们可以开始我们的用户检查了。我们将向 mysql 询问用户“admin”的类型。

```
$name = $_POST["username"];   //username submited in POST HTML form
$name = mysql_real_escape_string($name);  //Replace dangerous characters from name. This is important to avoid your database being hacked
$data = mysql_query("SELECT type FROM $tbl_namn WHERE name='$name'") or die(mysql_error());  //On failure, you will is if there is some error
$data=mysql_fetch_row($data);  //Get actual data
if($data["type"]==0) {
   header("HTTP/1.1 403 Acces Forbidden");
   header("Location: forbidden.html");  //send user to page telling me he is not allowed to enter. As well you can use include here.
   exit; 
```

# sql - oracle函数错误

> ID：14648382
> 
> 赞同：0
> 
> 时间：2013-02-01T14:23:02.033
> 
> 标签：sql, oracle11g

我正在输入一个函数，我在这里遇到错误，我不知道它是什么。你能帮我一把吗？

```
CREATE or replace FUNCTION function1(pIdReg in number,pIdPeriod in number) RETURN 

number
IS
  ncv number DEFAULT 0;
BEGIN
     SELECT COUNT(IdPeriod)
         INTO ncv
         FROM(
             SELECT a.IdPeriod, SUM(case when a.nt=0 then -a.valor else a.valor end) AS total --IF(a.nt=0,-a.valor,a.valor))
             FROM dc a
             JOIN emp b ON a.idDoc = b.idDoc
             WHERE a.idReg = pIdReg AND a.IdPeriod < pIdPeriod AND
             b.cc != 305 AND
                  (
                    b.cc = 302 AND(b.tipomov != 4)
                    OR
                    b.cc != 302 AND(1=1)-- emular el TRUE
                  )
             AND a.type != 7
             GROUP BY 1 HAVING total != 0
             ) AS ncv;
      RETURN ncv;
END;
/ 
```

错误是 SQL 命令未正确结束。Sqldeveloper 显示“AS ncv”下划线。group by 或有子句有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:33:12.260

我看到三个错误（尽管可能还有更多）

*   Oracle 不使用`AS`关键字来分配表别名。所以`AS ncv`无效。如果要`ncv`用作子查询的别名，则需要删除`AS`（尽管选择一个恰好与局部变量名称冲突的别名似乎很奇怪）。
*   您不能在`GROUP BY`子句中使用位置符号。您需要指定要分组的列的名称，而不是它们的位置。
*   您不能在子句中使用`SELECT`列表中定义的别名。`HAVING`您必须在`HAVING`子句中指定聚合函数

把这三件事放在一起，我怀疑你想要这样的东西

```
CREATE or replace FUNCTION function1(pIdReg in number,pIdPeriod in number) 
  RETURN number
IS
  ncv number DEFAULT 0;
BEGIN
  SELECT COUNT(IdPeriod)
    INTO ncv
    FROM(
         SELECT a.IdPeriod, 
                SUM(case when a.nt=0 
                         then -a.valor 
                         else a.valor 
                     end) AS total --IF(a.nt=0,-a.valor,a.valor))
           FROM dc a
           JOIN emp b ON a.idDoc = b.idDoc
          WHERE a.idReg = pIdReg AND a.IdPeriod < pIdPeriod 
            AND b.cc != 305 
            AND (
                  b.cc = 302 AND(b.tipomov != 4)
                  OR
                  b.cc != 302 AND(1=1)-- emular el TRUE
                )
           AND a.type != 7
         GROUP BY a.IdPeriod
        HAVING SUM(case when a.nt=0 
                        then -a.valor 
                        else a.valor 
                    end) != 0
       ) ncv;
  RETURN ncv;
END;
/ 
```

如果您仍然遇到错误，那么如果您可以编辑您的问题并提供 DDL 来创建此代码中引用的表，那将非常有帮助。这将允许我们在我们的系统上测试函数是否编译，而不是试图猜测语法错误

# c++ - 代码块 Windows 和 makefile 生成 C++

> ID：14648386
> 
> 赞同：0
> 
> 时间：2013-02-01T14:23:18.160
> 
> 标签：c++, makefile, codeblocks

我们的老师要求我们用我们的作业提交一个makefile。makefile 的确切用途是什么？如何通过代码块生成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:26:50.267

[这些是 Makefiles](http://www.opussoftware.com/tutorial/TutMakefile.htm)。它们作为[实用程序](http://www.gnu.org/software/make/manual/make.html)构建项目[的指南。`make`](http://www.gnu.org/software/make/manual/make.html)您通常通过了解其语法并使用代码编辑器编写它来“生成”一个。

# .net - 使用 NUnIt 测试 DLL - 如何知道正在使用哪个配置文件

> ID：14648389
> 
> 赞同：1
> 
> 时间：2013-02-01T14:23:22.907
> 
> 标签：.net, nunit, app-config

我有一个项目有多个 .exe，也有多个 .config 文件。该项目位于 .Net Framework 中，它是 Windows 应用程序。我已经为 Nunit 测试构建了这个项目。我必须在配置文件中定义一些键。所以我想知道我怎么知道 Nunit 正在使用哪个配置文件？没有 app.config 文件。所有名称都不是 app.config 的配置文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:29:51.103

尝试获取当前`Configuration`对象：

```
Configuration config =
         ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
```

然后`config.FilePath`会告诉你加载了哪个 .config 文件。

**更新：**

从该`FilePath`属性返回的值是当前程序集的默认位置。由于当前程序集由 NUnit 加载，因此这不是您的应用程序通常使用的位置。

为了解决你的问题，你可以

*   始终从您提供的位置加载配置：

    `Configuration config = ConfigurationManager.OpenExeConfiguration(path);`

*   使用 NUnit 将测试配置文件复制到您在文件路径中找到的位置：

    `File.Copy(testConfigFile, config.FilePath);`

*   使用 NUnit 在测试本身中设置要测试的密钥：

    `ConfigurationManager.AppSettings.Add("key", "value");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:00:17.147

实际上，我使用 NUnit 2.6.2 在 .config 文件中使用这些行进行单元测试

```
<configuration>
  <configSections>
     <sectionGroup name="NUnit">
       <section name="TestRunner" type="System.Configuration.NameValueSectionHandler" /> 
     </sectionGroup> 
  </configSections> 
  <NUnit> 
    <TestRunner> 
      <!-- The ApartmentState value here is ignored. --> 
      <add key="ApartmentState" value="STA" /> 
    </TestRunner> 
  </NUnit> 
</configuration> 
```

但是 NUnit 2.6 不再从您的测试配置文件中读取设置。所以你需要在 Assemblyinfo.cs 文件中添加属性 [assembly: NUnit.Framework.RequiresSTA] 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:58:22.370

您要做的是创建方法来打开配置文件并更新值而不是再次保存。您可能必须将它保存在两个地方，因为 NUnit 不会读取您的实际配置文件。如果需要根据文件中更新的值断言预期值，您可以使用第二个用于测试目的。此外，您可能想考虑模拟某些外部依赖项。因为 NUnit 真的应该测试你正在使用的类。

# c++ - `*` 类型对 __vfptr 意味着什么？

> ID：14648393
> 
> 赞同：11
> 
> 时间：2013-02-01T14:23:38.357
> 
> 标签：c++, visual-studio, pointers, visual-studio-debugging

是的，我知道 * 是一个指针。这不是我要说的。在我的一个程序中，我设置了一个断点，我注意到在 autos 中有一个`__vfptr`带有 value的变量`0x000007feed210a00`。

但是在类型下，它只是说 * 就是这样。我的程序中的所有其他指针都有类似`unsigned char*`or `some::namespace::Frame*`、 or的类型`int*`。这些是有道理的，因为指针直接绑定到特定的类或数据类型。但我不知道 * 可能是，真的只有简单的指针类型吗？

**编辑**：我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T14:26:36.863

`__vfptr`包含[虚拟方法表](http://en.wikipedia.org/wiki/Virtual_method_table)，它包含允许在继承中进行动态绑定的信息。

其中的信息将包括解析的[函数指针](http://en.wikipedia.org/wiki/Function_pointer)`virtual functions`以及类及其父类的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T14:28:55.627

答案显然取决于实现，并且正式涉及您的调试器，而不是 C++。然而，在实践中，of 的某个变体`_vptr`或多或少是指向 的指针的标准名称（在通常的意义上，而不是在正式标准定义的意义上）`_vtable`，它又包含各种必要的信息虚函数和RTTI的分辨率。因此，它`_vptr`是一个指向指针、偏移量和许多其他不同事物的表的指针。调试器可能只是避免给这个目标命名或描述它的结构。

# delphi - 涉及枚举类型的对象继承

> ID：14648395
> 
> 赞同：7
> 
> 时间：2013-02-01T14:23:42.163
> 
> 标签：delphi, delphi-2007

Delphi 2007，明年转移到 Delphi XE。

我们的产品广泛使用第三方组件。我们不直接使用组件，而是使用它的自定义后代，我们添加了很多额外的行为（自定义后代组件是几年前由已经退休的开发人员开发的）。

在第三方Parent类的源单元中，声明了一些枚举类型，它们控制着组件的各种操作：

```
TSpecialKind = (skAlpha, skBeta, skGamma);
TSpecialKinds = set of TSpecialKind; 
```

在我们的后代类中，我们想要添加新的行为，这需要扩展枚举类型的选择。本质上，我们想要这个：

```
TSpecialKind = (skAlpha, skBeta, skGamma, skDelta, skEpsilon);
TSpecialKinds = set of TSpecialKind; 
```

显然，我们希望避免编辑第三方代码。*在我们自己的后代单元*中简单地重新声明枚举类型、重复原始值并添加我们的新值是否有效？它会对现有代码产生任何影响吗？

编辑：示例场景（希望）澄清。假设您有一个（父）组件用于订购车辆零件。父单元有一个枚举类型 Tvkind 用于车辆种类，定义了值 vkCar 和 vkCycle。除其他外，这些值用于指示车辆有多少个车轮，4 个或 2 个。

现在，在您的后代组件中，您也希望能够处理三轮车辆。扩展 Tvkind 枚举类型以包含新值 vkTrike 似乎是显而易见的方法。但是，如果您无权访问或不想修改父组件代码怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:06:44.337

枚举类型的继承与类的工作方式不同，因为代码对枚举做出了它永远不会对类做出的假设。例如，给定您的原始枚举 (the `TSpecialKind`)，第三方组件可能包含如下代码：

```
var Something: TSpecialKind;
[...]
case Something of
  skAlpha: ;
  skBeta: ;
  skGamma: ;
end; 
```

即使您可以将不属于该枚举的内容强制转换为`TSpecialKind`类型，上面代码的结果也将是*未定义*的（并且绝对不好！）

枚举可能以另一种方式使用，如果第三方组件仅以这种方式使用它，那么您也许可以做一些“巫术”，但我不推荐它。如果原始`TSpecialKind`只通过它的`TSpecialKinds`设置类型使用，那么它只能像这样使用：

```
if skBeta in VarOfTypeSpecialKinds then
begin
  ...
end; 
```

（续）然后您可以引入一种新类型，该类型以相同的顺序枚举所有原始值，具有相同的值。如果你这样做之后`SizeOf(TSpecialKind)`等于，那么你可以将新的*设置*`SizeOf(TNewType)`值硬转换为旧值，旧代码也可以正常工作。但坦率地说，这是 hacky，在许多条件下它才能正常工作，太脆弱了。更好的解决方案是使用仅在后代组件中使用的新枚举类型：

 *```
type TExtraSpecialKind = (skDelta, skEpsilon);
     TExtraSpecialKinds = set of TExtraSpecialKind; 
```

您可能会将此集发布在不同的属性中；该解决方案是干净的，将与后代代码很好地混合，并且也可以干净地使用。例子：

```
if (skAlpha in SpecialKind) or (skDelta in ExtraSpecialKind) then
begin
  // Do extra-sepcial mixed stuff here.
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T16:00:18.067

我不相信您可以合理地期望在不修改原始组件的情况下进行所需的更改。

让我们以您的车辆类型为例，深入研究一下。我希望原始组件将具有如下代码：

```
case Kind of
vkCar:
  CarMethod;
vkCycle:
  CycleMethod;
end; 
```

现在，假设您引入了一个带有额外枚举的枚举类型

```
TExtendedVehicleKind = (vkCar, vkCycle, vkTrike); 
```

如果上面的 case 语句运行，`ExtendedKind`等于`vkTrike`，则不会调用任何方法。

现在，也许您希望从原始控件获得的行为可以通过设置`Kind`to`vkCar`或`vkCycle`when `ExtendedKind`is来实现`vkTrike`。但这对我来说似乎不太可能。只有您可以确定，因为只有您拥有代码，并且知道您的实际问题是什么。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-01T18:30:28.387

一直在“需要扩展一个属性的枚举类型”。

快速的第一个建议。将您的枚举添加为现有属性的新属性包装器：

* * *

潜在的父类代码：

* * *

```
unit AcmeMachines;

interface

type
   FoodCanEnum =
   (
     None,
     Fish,
     Bird,
     Beef
   );

   AcmeCanAutoOpenMachineClass= class (object)
   protected
   { protected declarations }

      F_FoodCanEnum: FoodCanEnum;

      function getFoodEnumProperty: FoodCanEnum;
      procedure setFoodEnumProperty(const AValue: FoodCanEnum);
   public
   { public declarations }

      property FoodEnumProperty
        read getFoodEnumProperty write setFoodEnumProperty;
   end;

implementation

   function AcmeCanAutoOpenMachineClass.getMyFoodEnumProperty: FoodCanEnum;
   begin        
     Result := F_FoodCanEnum;
   end;

   procedure AcmeCanAutoOpenMachineClass.setMyFoodEnumProperty
     (const AValue: CatFoodCanEnum);
   begin    
     FoodEnumProperty:= AValue;

     // do some specific business logic
   end;

end; 
```

* * *

后代类代码：

* * *

```
unit UmbrellaMachines;

interface
uses AcmeMachines;

type
   CatFoodCanEnum =
   (
     None, <--- matches "AcmeMachines.None"
     Fish, <--- matches "AcmeMachines.Fish"
     Bird, <--- matches "AcmeMachines.Bird"
     Beef, <--- matches "AcmeMachines.Beef"
     Tuna,
     Chicken
   );

   UmbrellaCanAutoOpenMachineClass = class (AcmeCanAutoOpenMachineClass)
   protected
   { protected declarations }

      F_CatFoodCanEnum: CatFoodCanEnum;

      function getMyFoodEnumProperty: CatFoodCanEnum;
      procedure setMyFoodEnumProperty(const AValue: CatFoodCanEnum);
   public
   { public declarations }

      // new property, "wraps" existing property
      property MyFoodEnumProperty
        read getMyFoodEnumProperty write setMyFoodEnumProperty;
   end;

implementation

   function UmbrellaCanAutoOpenMachineClass.getMyFoodEnumProperty: CatFoodCanEnum;
   begin
     // wrap existing "FoodEnumProperty" property, using an existing value as dummy

     Result := F_CatFoodCanEnum;
   end;

   procedure UmbrellaCanAutoOpenMachineClass.setMyFoodEnumProperty
     (const AValue: CatFoodCanEnum);
   begin
     // wrap existing property, using an existing value as dummy
     // may be another value if necessary
     AcmeCanAutoOpenMachineClass.ExistingFoodEnumProperty := AcmeMachines.None;

     F_CatFoodCanEnum := AValue;
     // add extended business logic for this class instances
   end;

end; 
```

*   额外的。

如果可能，请始终将“null”或“dummy”值添加到您自己的枚举中，通常是第一个值：

```
 type
   CatFoodCanEnum =
   (
     None, // <--- these one
     Tuna,
     Chicken,
     Beef
   ); 
```

干杯。*

# sammy.js - Sammy.js 异常堆栈跟踪

> ID：14648400
> 
> 赞同：2
> 
> 时间：2013-02-01T14:24:05.607
> 
> 标签：sammy.js

似乎 Sammy.js 捕获了 .get 回调中发生的异常，并打印出类似

```
[2013 年 2 月 1 日星期五 14:12:46 GMT+0000 (GMT)] 正文 500 错误获取 *错误消息* 错误 {} 

```

那么有没有办法获得完整的堆栈跟踪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:21:58.253

OK，raise_errors 可以设置重新抛出错误，例如

```
app = Sammy(...);
app.raise_errors = true;
app.run(); 
```

# java - 试图编译 ehcache - 找不到 javax.transaction 包

> ID：14648402
> 
> 赞同：0
> 
> 时间：2013-02-01T14:24:09.833
> 
> 标签：java, hibernate, ehcache

我想在我的应用程序中使用 ehCache 作为二级缓存。我从 ehcache 网站下载了最新版本。不幸的是没有提供jar文件，因此我想自己编译代码。我将它放入一个新的 Eclipse 动态 Web 项目中，并将下载时附带的必要 jar 添加到构建路径中。但是现在，我的项目中仍然存在错误..

例如这失败了： import javax.transaction.TransactionManager;

有人知道为什么吗？通常我在 Eclipse Web 项目中有可用的 javax 包...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:39:59.553

我不知何故没有得到原始的 javax 包。

我回答了我自己的问题，因为添加 javaee 包后缺少其他参考。这是`sun. misc.Unsafe`. 它不必下载，但要能够使用它，必须在 Eclipse 中更改编译器设置，如下所述：[https ://stackoverflow.com/a/5549580/1737854](https://stackoverflow.com/a/5549580/1737854)

# sql - 连接来自同一个表的两个选择查询

> ID：14648405
> 
> 赞同：5
> 
> 时间：2013-02-01T14:24:12.947
> 
> 标签：sql, sql-server, select, join

该表包含一个 ID 列、一个 valueHeading 列和一个 value 列。我想根据值具有的 valueHeading 类型将 value 列分为两个新列 valueHeading1 和 valueHeading2。

所以我想加入这个选择： **编辑：完全加入**

```
SELECT ID
      ,valueHeading
      ,value as 'valueHeading1'
FROM table1
WHERE valueHeading = 'valueHeading1' 
```

使用此选择：

```
SELECT ID
      ,value as 'valueHeading2'
FROM table1
WHERE valueHeading = 'valueHeading2' 
```

在他们各自的身份证上。我该怎么做呢？

**编辑**以说明我想要做什么：

原表：

```
ID    valueHeading    value
0     valueHeading1    a
0     valueHeading2    a
1     valueHeading1    ab
1     valueHeading2    NULL
2     valueHeading1    abcd
2     valueHeading2    abc 
```

新表：

```
ID    valueHeading1    valueHeading2
0          a               a
1          ab              NULL
2         abcd             abc 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T14:28:09.847

如果你只需要加入使用这个。如果您不需要加入，则使用 case when 是一种优雅的方式。

```
SELECT * FROM 
    (SELECT ID
          ,valueHeading
          ,value as 'valueHeading1'
    FROM table1
    WHERE valueHeading = 'valueHeading1') AS TAB_1, 
    (SELECT ID
          ,value as 'valueHeading2'
    FROM table1
    WHERE valueHeading = 'valueHeading2') AS TAB_2
    WHERE TAB_1.ID = TAB_2.ID 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T14:26:54.070

尝试类似：

```
SELECT ID
      , CASE WHEN valueHeading = 'valueHeading1' THEN value ELSE NULL END AS valueHeading1
      , CASE WHEN valueHeading = 'valueHeading2' THEN value ELSE NULL END AS valueHeading2
FROM table1
WHERE valueHeading IN ('valueHeading1', 'valueHeading2') 
```

如果您想为每个 ID 重新组合一行中的所有值，您可以尝试：

```
SELECT ID
      , MAX(CASE WHEN valueHeading = 'valueHeading1' THEN value ELSE NULL END) AS valueHeading1
      , MAX(CASE WHEN valueHeading = 'valueHeading2' THEN value ELSE NULL END) AS valueHeading2
FROM table1
WHERE valueHeading IN ('valueHeading1', 'valueHeading2')
GROUP BY ID
HAVING MAX(CASE WHEN valueHeading = 'valueHeading1' THEN value ELSE NULL END) IS NOT NULL
OR MAX(CASE WHEN valueHeading = 'valueHeading2' THEN value ELSE NULL END) IS NOT NULL 
```

请参阅[SQLFiddle](http://sqlfiddle.com/#!2/6b2a4/1)。我还在 Oracle 11g 和 MSSQL 2012 上进行了尝试，并且每次都有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T15:30:41.840

在 SQLServer2005+ 中可能使用 PIVOT

```
SELECT ID, valueHeading1, valueHeading2
FROM
(
 SELECT *
 FROM dbo.test28
 WHERE valueHeading IN ('valueHeading1', 'valueHeading2')
 ) x
 PIVOT
 (
  MAX(value)
  FOR valueHeading IN ([valueHeading1], [valueHeading2])
  ) p 
```

[SQLFiddle](http://sqlfiddle.com/#!3/e9b89/1/0)上的演示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-02T06:52:51.053

自加入可能是一个简单的解决方案

```
SELECT DISTINCT t1.ID, t1.value as valueHeading1, t2.value as valueHeading2, 
FROM table1 t1
INNER JOIN table1 t2 ON t1.ID = t2.ID
WHERE t1.valueHeading <> t2.valueHeading 
```

# entity-framework - 复合键字段的最佳顺序是什么？

> ID：14648407
> 
> 赞同：2
> 
> 时间：2013-02-01T14:24:16.053
> 
> 标签：entity-framework, database-design, entity-framework-5, composite-key

假设我有一个包含以下字段的表：

*   联赛ID
*   比赛ID
*   一些数据

一个联赛将举办多场比赛。通常每个联赛都会使用自己的本地数据库，因此该本地数据库的所有记录中的 LeagueID 字段都是相同的。联盟每年一次将其数据上传到国家当局，然后需要使用 LeagueID 来区分具有相同 MatchID 的比赛。

实现复合主键的最佳方法是什么（使用 EF Fluent API）？

```
Entity<Match>.HasKey(match=>new {match.LeagueID,match.MatchID}) 
```

或者

```
Entity<Match>.HasKey(match=>new {match.MatchID,match.LeagueID}) 
```

对人眼来说，联赛 - 比赛的顺序是合乎逻辑的，因为它将特定联赛的比赛放在一起。但我明白，在编写复合键时，出于性能原因，首先使用最具辨别力的字段很重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:31:57.297

我想你也可以吃蛋糕。

**数据库**
在数据库中实现键时，*通常*具有更多选择性字段的更窄键将产生更好的性能。这适用于单键和复合键。我一般说，因为与您的查询模式不真正匹配的更具选择性的索引可能毫无用处。例如，在您的复合键中，如果`MatchID`是第一个（选择性更强），但您更频繁地查询`LeagueID`（选择性较低），则选择性将对您不利。

我认为，真正的问题不是索引 A 或 B 更具选择性，而是“您是否有适合查询方式的索引？” （并强制执行数据完整性，但这是一个不同的讨论）。所以你需要弄清楚你是*如何*查询这个表的。如果您通过以下方式查询：

*   `LeagueID`大多数时候——索引`LeagueID, MatchID`
*   `MatchID`大多数时候——索引`MatchID, LeagueID`
*   复合`LeagueID`&`MatchID`大部分时间 -- 索引 `MatchID, LeagueID`
*   好坏参半——您可能希望每个订单有两个索引，但您必须弄清楚维护两个索引的额外开销是否值得在插入/更新/删除时受到打击。

**EF 和查询在大多数情况下，****查询**
中列的顺序（或在 EF 中构建匹配的方式）不会产生影响。含义 将产生与. **`where a=@a and b=@b``where b=@b and a=@a`**

 **假设您使用的是 SQL Server，那么您编写 where 子句的顺序就无关紧要了。网上的书简明扼要地解释了这个问题，[并指出](http://msdn.microsoft.com/en-us/library/ms173545.aspx)：

> 逻辑运算符的求值顺序可能因查询优化器的选择而异。）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:31:41.090

您可以使用 HasColumnOrder 选择数据库中字段的顺序**

# android - 应用程序因唤醒锁和电源管理器而崩溃

> ID：14648414
> 
> 赞同：0
> 
> 时间：2013-02-01T14:24:31.167
> 
> 标签：android, wakelock

我创建了一个应用程序，使用 flash LED android 作为手电筒或闪光灯，并添加了唤醒锁和电源管理器以防止睡眠。但是当用户进入菜单设置时，我的 apk 崩溃了。没有唤醒锁可以正常工作！我如何修复它？

```
private PowerManager.WakeLock wl;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "Flash Strobe");

        // .......................
        case R.id.menu_setup:
            stopTask();//stop timer repeat blink
            if (camera != null) {
                camera.release();
            } 
            wl.release();
            finish();
            startActivity(new Intent(this, Setup.class));
            return true;
        default:
            return super.onOptionsItemSelected(item);
        } 
```

日志猫：

```
W/ServiceManager(148): Permission failure: com.sonyericsson.permission.CAMERA_EXTENDED from uid=10151 pid=24623
f_button_handler button callback not registered 
```

# javascript - 强制 jQuery mobile 使用自己的 CSS 类

> ID：14648421
> 
> 赞同：1
> 
> 时间：2013-02-01T14:24:48.967
> 
> 标签：javascript, jquery, css, jquery-mobile

我想强制 jQuery mobile 使用我自己的 CSS 类来覆盖默认值。更改 jQuery CSS 类（如 ui-controlgroup）不是一种选择，因为我只想在某些情况下更改样式。当我将我的 CSS 类的内容放在 div 的 style 属性中时，我的样式被应用了，但我不想使用这个属性。

当“mobileinit”事件被触发时，我尝试添加我的类，但它也不起作用。

这是一个例子，我的班级被称为“footer-column-left”：

```
 <div id="footerMainpage" data-role="footer" data-position="fixed" data-theme="a" class="ui-grid-b">
    <!-- column 1 -->
    <div class="ui-block-a" class="footer-column-left">
        <div data-role="controlgroup" data-type="horizontal">
            <button id="buttonLeft" data-icon="arrow-l" data-iconpos="notext">Move left</button>
        </div>
        <div data-role="controlgroup" data-type="horizontal">
            <button id="buttonChooseTool" data-icon="edit" data-iconpos="notext">Choose tool</button>
            <button id="buttonUndo" data-icon="back" data-iconpos="notext">Undo</button>
            <button id="buttonRedo" data-icon="forward" data-iconpos="notext">Redo</button>
            <button id="buttonSave" data-icon="check" data-iconpos="notext">Save</button>
        </div>
    </div>
    <!-- ... -->
</div> 
```

CSS 看起来像这样：

```
.footer-column-left { display: inline-block !important; text-align:left !important; padding-left: 10px !important; } 
```

在此先感谢您的帮助！

**编辑：**当“pageinit”事件被触发时添加类对我有用，所以不需要进一步的帮助;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:28:22.190

这两件事对我有用：

*   当“pageinit”事件被触发时添加css类：

    `$('#footerColumnLeft').addClass('footer-column-left');`

*   在 CSS 选择器中使用 id：

    `#footerColumnLeft { text-align:left; padding-left: 10px; }`

# asp.net - 在 asp.net webforms 应用程序中将审计数据异步保存到数据库

> ID：14648433
> 
> 赞同：0
> 
> 时间：2013-02-01T14:25:16.093
> 
> 标签：asp.net, multithreading, asynchronous

我有一个 asp.net 3.5 Web 应用程序，它会生成大量与审计相关的数据。由于该数据与用户没有立即相关，我希望能够将其异步保存到 MSSQL 数据库中，让用户无需等待即可进入下一页。我使用 Nhibernate 作为我的 ORM。

我研究了 PageAsyncTasks，据我所知，它们只允许您并行执行页面操作，但所有操作仍然必须在页面完成加载之前完成。是否有另一种相当轻量级的异步处理方法可以继续进行而不影响页面加载？简单地手动启动一个新线程是一个可接受的过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:36:04.467

您可以在您的解决方案中创建一个 Web 服务，当您的服务器端代码完成并准备好将用户移至下一页时，它可以调用您的 Web 服务来进行审计，就像火了之后忘记类型的事情。

不确定 NHibernate 会话是否是线程安全的，因此如果您创建一个新线程，请注意上下文。

理想情况下，您可以使用队列和服务总线来安全和异步地处理这类事情，但这涉及架构更改。

不确定这是否可行，但如果审核实际上显着减慢了 UI 的速度，那么您最好改进该过程并使其保持同步。不管怎样，祝你好运。

# c++ - VS2012 SP1（+十一月包）未知类型错误（类似 C::a(T &&...) ）

> ID：14648434
> 
> 赞同：1
> 
> 时间：2013-02-01T14:25:16.900
> 
> 标签：c++, visual-studio, c++11, visual-studio-2012

所以[ms 在线编译器无法编译这个](http://rise4fun.com/Vcpp/hBV)（就像我家 VS2012 和 SP1（+ 十一月包）一样），而[clang 和现代 gcc 可以](http://liveworkspace.org/code/KKkbu%241)。谁能告诉我VS中缺少什么C ++ 11功能，有什么办法吗？

```
#include <iostream>
#include <utility>
#include <type_traits>

struct A {
    int x;

    void a() {
        std::cout << "an a! " << x << "\n";
    }
};

struct B {
    double x;

    double b(double k) {
        std::cout << "b! " << x << ", " << k << "\n";
        return x - k;
    }

    void b() {
        std::cout << "b! " << x << ", ?\n";
    }
};

struct C {
    A *_first__;
    B *_second__;
     C(A * _first__, B * _second__):_first__(_first__), _second__(_second__) {
    } template < typename K, typename ... T > static auto _a_caller__(K * k, T && ... args)->decltype(k->a(std::forward < T > (args) ...)) {
    return k->a(std::forward < T > (args)...);
    }
    template < typename...T > auto a(T &&...args)->decltype(_a_caller__(_first__, std::forward < T > (args)...)) {
        return _a_caller__(_first__, std::forward < T > (args)...);
    }
    template < typename...T > auto a(T &&...args)->decltype(_a_caller__(_second__, std::forward < T > (args)...)) {
        return _a_caller__(_second__, std::forward < T > (args)...);
    }
    template < typename K, typename...T > static auto _b_caller__(K * k, T && ... args)->decltype(k->b(std::forward < T > (args) ...)) {
        return k->b(std::forward < T > (args)...);
    }
    template < typename...T > auto b(T &&...args)->decltype(_b_caller__(_first__, std::forward < T > (args)...)) {
        return _b_caller__(_first__, std::forward < T > (args)...);
    }
    template < typename...T > auto b(T &&...args)->decltype(_b_caller__(_second__, std::forward < T > (args)...)) {
        return _b_caller__(_second__, std::forward < T > (args)...);
    }
};

int main() {
    A a {12};
    B b {24};

    C c (&a, &b);

    c.a();
    c.b();
    std::cout << c.b(2445) << std::endl;
} 
```

错误：

```
testvc.cpp
--\testvc.cpp(38) : error C2535: 'unknown-type C::a(T &&...)' : member function already defined or declared
        --\testvc.cpp(33) : see declaration of 'C::a'
--\testvc.cpp(47) : error C2535: 'unknown-type C::b(T &&...)' : member function already defined or declared
        --\testvc.cpp(42) : see declaration of 'C::b'
--\testvc.cpp(56) : error C2893: Failed to specialize function template 'unknown-type C::a(T &&...)'
        With the following template arguments:
        ''
--\testvc.cpp(57) : error C2893: Failed to specialize function template 'unknown-type C::b(T &&...)'
        With the following template arguments:
        ''
--\testvc.cpp(58) : error C2893: Failed to specialize function template 'unknown-type C::b(T &&...)'
        With the following template arguments:
        'int' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:39:54.430

[此答案已更新。见文末**编辑]**

我把它归结为[SSCCE](http://sscce.org)：

```
#include <iostream>

struct A { A g(int) { return A(); } };
struct B { B g() { return B(); } };

struct C
{
    template<typename... Ts>
    auto f(Ts... ts) -> decltype(A().g(ts...)) 
    { std::cout << "f -> A" << std::endl; return A(); }

    template<typename... Ts>
    auto f(Ts... ts) -> decltype(B().g(ts...)) 
    { std::cout << "f -> B" << std::endl; return B(); }
};

int main()
{
    C c;
    c.f(1);
} 
```

GCC 4.7.2 和 Clang 3.2 编译这个，而 VC11 没有。事实上，当表达式内的替换失败时，VC11 似乎不应用 SFINAE `decltype`，这很可能是一个**错误**。

事实上，C++11 标准规定 (14.8.2/7)：

> 替换发生在函数类型和模板参数声明中使用的所有类型和表达式中。表达式不仅包括常量表达式，例如出现在数组边界或作为非类型模板参数的常量表达式，还包括在**、**和其他允许非常量表达式的上下文中**的通用表达式（即非常量表达式） 。`sizeof``decltype`**[...]

与 SFINAE 相关的还有 14.8.2/8，它增加了：

> 如果替换导致无效的类型或表达式，则类型推导失败。无效类型或表达式是如果使用替换参数编写的格式错误的类型或表达式。[...] 只有在函数类型及其模板参数类型**的直接上下文**中的无效类型和表达式才会导致推导失败。

那么这是“在直接上下文中”替换失败的情况吗？同一段阐明了“直接上下文”的含义：

> *注意：*替换类型和表达式的评估可能会导致副作用，例如**类模板特化和/或函数模板**特化的实例化，隐式定义函数的生成等。此类副作用**不在**“立即上下文”中” 并且可能导致程序格式错误。

在我的简化示例中，替换失败肯定发生在直接上下文中，因为它不涉及任何模板实例化或专门化。因此，VC11 肯定包含一个**错误**。

*但是，在您的*示例中，替换是否发生在“立即上下文”中不太明显，因为在表达式内部*尝试*`decltype`了函数模板（`_b_caller__`）实例化。

 *这里的关键观察是实例化已尝试但*从未执行*，因为**类型推导**`decltype`失败（再次，由于尝试实例化的模板函数的子句中的表达式替换失败）。因此，该错误不会发生在模板实例化的嵌套上下文中。

因此，这被称为**VC11 错误**。

PS：有关SFINAE 不适用的情况，请参阅[关于 SO 的此问答，因为替换失败发生在嵌套上下文中。](https://stackoverflow.com/questions/1606738/why-does-sfinae-not-apply-to-this)

**编辑：**

事实证明我的回答是**不正确**的，但我决定保留其原始文本，因为我相信推理并非微不足道，并且可能对某些人有所帮助。但是，我忽略了一个重要方面。

正如[Johannes Schaub](https://stackoverflow.com/users/34509/johannes-schaub-litb)在下面的评论中正确指出的那样，`f()`上面的第二个定义是错误的，不需要诊断。这是由 C++11 标准的第 14.6/8 段规定的：

> [...]如果可变参数模板的每个有效特化都需要一个空模板参数包，则模板定义格式错误，**不需要诊断**。[...]

因此，尽管程序格式错误，但编译器不需要（即使它们被允许）发出错误。这意味着无法编译这个程序**不是 VC11 的错误**，而是一个很好的特性，因为编译器检测到一个不需要检测的错误（尽管必须说错误消息非常具有误导性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:12:18.917

这很复杂。我猜，GCC 和 CLANG 正在使用 SFINAE 来消除这两个函数模板的歧义，乍一看是模棱两可的。让我们看一个例子：调用`c.b(2445)`我会弄乱类型和实际参数，但我希望我的意思可以理解。

1.  实例化第一个函数模板，含义

    `auto b<int>(int args)->decltype(_b_caller__(_first__, std::forward <int> (args)))`，它反过来实例化`_b_caller<A,int>`，它调用`_first__->b(int)`. 因为 A 没有方法 b，所以两个实例化都失败了。这将导致

2.  实例化第二个函数模板，含义

    `auto b<int>(int args)->decltype(_b_caller__(_second__, std::forward <int> (args)))`并且`_b_caller<B,int>`有效，因为 B 有一个方法 b(double)。

似乎 Visual Studio 在这个过程中的某个地方退出了。我的猜测是，SFINAE 不能与尾随返回类型正常工作，但也可能是两级深度实例化使得在这种情况下很难正确应用 SFINAE。

**编辑：**这可能是相关的： [为什么 SFINAE 不适用于这个？](https://stackoverflow.com/questions/1606738/why-does-sfinae-not-apply-to-this)*

# c# - 在 URL 中传递用户名和密码凭据的 curl 命令能否在 C# 程序/.net 环境中工作

> ID：14648436
> 
> 赞同：0
> 
> 时间：2013-02-01T14:25:18.117
> 
> 标签：c#, http, unix

在 URL 中传递用户名和密码凭据的 curl 命令可以在 C# 程序/.net 环境中工作吗？

示例： curl -T testfile.txt ' [http://user:password@domain.net/dir/](http://user:password@domain.net/dir/)

C# .net 环境中的 Curl 命令等效于什么？

我最初的问题是尝试将文件上传到 webdav 服务器。我尝试使用 C# webclient 和 httpwebrequest...... 并不断收到 401 autnetication 错误，即使凭据位于请求的实际标头中。

当我在 unix 环境中使用 Curl 时，上传文件没有问题。

我不确定问题是否与 HttpWebrequest 所做的重定向有关：

[webclient如何在重定向时保持基本授权](https://stackoverflow.com/questions/9846408/webclient-how-to-keep-basic-authorization-when-redirect)

那是：

401 - 身份验证错误 - 标头中没有用户名和密码

然后 - 301 重定向 - 这包括标题中的用户名和密码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:54:20.177

试试下面的代码......它会帮助你......

```
string fileToUpload = @"c:\testfile.txt";
FileStream rdr = new FileStream(fileToUpload, FileMode.Open);
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://localhost/Upload"); 
req.PreAuthenticate = true;
req.Credentials = new NetworkCredential ("username", "password");
req.Method = "POST"; 
req.ContentLength = rdr.Length;
req.AllowWriteStreamBuffering = true;
Stream reqStream = req.GetRequestStream();
Console.WriteLine(rdr.Length);                
byte[] inData = new byte[rdr.Length];

// Get data from upload file to inData 
int bytesRead = rdr.Read(inData, 0, (int)rdr.Length);

// put data into request stream
reqStream.Write(inData, 0, (int)rdr.Length);
rdr.Close();

req.GetResponse();
// after uploading close stream 
reqStream.Close(); 
```

# c# - 模拟、Active Directory 和“用户无权访问 xxxx”问题

> ID：14648437
> 
> 赞同：5
> 
> 时间：2013-02-01T14:25:22.000
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, impersonation

我有 2 个 ASP.NET MVC 3 应用程序。我通过 web.config 使用模拟来允许我查询 Active Directory 以获取有关用户的详细信息。该应用程序使用 Windows 身份验证并且不允许匿名用户。一个应用程序是用户执行任务的主要应用程序。另一个允许用户设置其他用户在应用程序一中看起来像他们。

测试用户收到以下错误：

```
SQL1092N  "<DOMAIN ID>" does not have the authority to perform the requested command. 
```

这发生在我从主要应用程序向辅助应用程序发送 Web 请求之后。为了让它工作，我必须让请求模拟实际用户，而不是应用程序用于模拟的身份。这实际上是我发布并回答的一个 SO 问题。就在这里：[如何通过 WebRequest 调用 MVC 操作并通过 Active Directory 验证请求？](https://stackoverflow.com/questions/13771992/how-do-i-call-an-mvc-action-via-a-webrequest-and-validate-the-request-through-ac)

在该代码的末尾，我调用：

```
impersonationContext.Undo(); 
```

正是在此 Web 请求发生之后，主应用程序才尝试访问数据库，现在看来上述调用已撤消了应用程序的模拟，因此用户尝试执行任何打开数据库连接的操作都失败了。至少，这是我在猛烈抨击一天后的工作理论。

我的问题是，如何让应用程序的模拟恢复到 web.config 中的用户？或者，在发出我的网络请求时，有没有办法确保模拟上下文仅适用于该请求？

所有这一切的重点是第二个应用程序有自己的 sql server 数据库。主要应用程序使用 DB2。我想编写一次数据库访问代码，但在两个应用程序中都使用它。目前这就是我所做的，但我依靠网络请求获取数据的方法可能不是最好的方法。

我愿意接受任何想法、评论、建议和/或批评。我应该如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:32:04.083

好的……我的理论是，当提出 Web 请求时 IPrincipal 上下文发生了变化，这证明是准确的，这使得这个修复变得非常容易。最好的部分是，我可以继续使用我构建的 api 来发出这个请求，而无需复制 Sql Server 实体框架部分。

我对我的 api 库有以下调用：

```
 proxyRequestResultDetails = ProxyApiWrapper.GetProxies(
                adUserInfo.AssociateId,
                context.User); 
```

此代码由授权过滤器属性调用。方法原型看起来像

```
public void OnAuthorization(AuthorizationContext filterContext) 
```

在内部，调用会在调用之后生成 GetProxies 方法：

```
 public static StreamReader GetWebRequestStream(
             string url,
             string contentType,
             bool useDefaultCredentials,
             IPrincipal user)
        {

            var impersonationContext = ((WindowsIdentity)user.Identity).Impersonate();            
            var request = WebRequest.Create(url);

            try
            {
                request.ContentType = contentType;
                //request.ImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
                //request.UseDefaultCredentials = useDefaultCredentials;            
                //IWebProxy p = new WebProxy();
                //request.Proxy = p.
                request.AuthenticationLevel = System.Net.Security.AuthenticationLevel.MutualAuthRequested;
                request.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;
                var response = (HttpWebResponse)request.GetResponse();
                return new StreamReader(response.GetResponseStream());
            }
            catch (Exception e)
            {
                impersonationContext.Undo();
                throw e;
            }
            finally
            {
                impersonationContext.Undo();
            }

        } 
```

当调用方法返回时，用户的身份不再是应用程序模拟的那一套。修复非常简单：

```
 //Track current identity before proxy call
            IPrincipal user = context.User;
            proxyRequestResultDetails = ProxyApiWrapper.GetProxies(
                adUserInfo.AssociateId,
                context.User);

            //Undo any impersonating done in the GetProxies call
            context.User = user; 
```

2 行代码解决了 12 小时的头痛问题。它本来会更糟。无论如何。感谢您成为一个共鸣板。我尝试与鸭子进行这种转换，但鸭子很困惑。

# string - 如何获取适合受限大小的字符串，例如 UILabel

> ID：14648438
> 
> 赞同：0
> 
> 时间：2013-02-01T14:25:32.213
> 
> 标签：string, text, size, uilabel, truncate

我有一个非常长的文本，所以我不想使用 UITextView，而是将文本截断为可以适合宽度和高度为 300、400 的标签的小块，并且根据块的数量，我想动态创建 UILabel并用这些块填充它们。

我写了一个方法，但它似乎没有返回可以适合的实际字符串。它返回较短的字符串。

我错过了什么吗？无论如何我可以做到这一点吗？

```
- (NSArray *)truncate:(NSString *)text
{
    NSMutableArray *textChunks = [[NSMutableArray alloc] init];

    NSString *chunk = [[NSString alloc] init];

    CTFramesetterRef frameSetter;
    UIFont *uiFont = [UIFont systemFontOfSize:17.0f];
    CTFontRef ctFont = CTFontCreateWithName((__bridge CFStringRef)uiFont.fontName, uiFont.pointSize, NULL);
    NSDictionary *attr = [NSDictionary dictionaryWithObject:(__bridge id)ctFont forKey:(id)kCTFontAttributeName];
    NSMutableAttributedString *attrString  = [[NSMutableAttributedString alloc] initWithString:text attributes:attr];

    CFRange fitRange;
    while (attrString.length>0) {

        frameSetter = CTFramesetterCreateWithAttributedString ((__bridge CFAttributedStringRef) attrString);
           CGSize framSize = CTFramesetterSuggestFrameSizeWithConstraints(frameSetter, CFRangeMake(0,0), NULL, CGSizeMake(myLabel.frame.size.width, myLabel.frame.size.height), &fitRange);
        NSLog(@"height: %f", framSize.height);
        CFRelease(frameSetter);

       chunk = [[attrString attributedSubstringFromRange:NSMakeRange(0, fitRange.length)] string];

        [textChunks addObject:chunk];

        [attrString setAttributedString: [attrString attributedSubstringFromRange:NSMakeRange(fitRange.length, attrString.string.length-fitRange.length)]];

    }

    return textChunks;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T03:01:58.483

是的，您需要添加段落样式才能使宽度/高度测量正常工作。请参阅[给定框架设置正确的行间距调整](https://stackoverflow.com/questions/10067389/giving-framesetter-the-correct-line-spacing-adjustment/17374434#17374434)。请注意如何使用 CTFontGetLeading() 获取字体前导，然后通过 CFAttributedStringSetAttributes() 设置此属性。

# javascript - 单击按钮时显示/隐藏 div

> ID：14648439
> 
> 赞同：3
> 
> 时间：2013-02-01T14:25:35.890
> 
> 标签：javascript, jquery, html, css, show-hide

我试图根据按下的按钮显示和隐藏内容。下一个按钮应该显示内容 2 并隐藏内容 1，上一个按钮应该相反。

```
<script type="text/javascript">
    $('a.button-next').click(function() {
        $("#tab-content2").addClass("show");
    });
</script> 
```

CSS：

```
#tab-content2 {
    display: none;
}
#tab-content2.show {
    display: none;
} 
```

HTML：

```
<div id="tab-content1">             
    <?php the_content(); ?>
</div>

<div id="tab-content2">     
    <?php the_field("experience");?>
</div>

<a href="javascript:;" class="button-back">Previous</a>
<a href="javascript:;" class="button-next">next</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:27:16.517

尝试[toggleClass](http://api.jquery.com/toggleClass/)并且不要忘记使用[document.ready()](http://api.jquery.com/ready/)：

```
$(document).ready(function() {
    $('a.button-next').click(function() {
        $("#tab-content2").toggleClass("show");
    });
});

#tab-content2.show {display:block;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T14:35:35.153

对所有内容使用通用类

```
<div class="content" id="tab-content1">             
    <?php the_content(); ?>
</div>
<div class="content" id="tab-content2">     
    <?php the_field("experience");?>
</div>

<a href="javascript:;" class="button-back">Previous</a>
<a href="javascript:;" class="button-next">next</a> 
```

所以CSS将是

```
.content {
    display: none;
} 
```

和 Javascript

```
$('a.button-next').click(function() {
    $('.content').hide(); // To hide all other contents
    $("#tab-content2").show(); // Show the one content you want to display
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:28:22.653

的显示属性`show`是`none`。

将其更改为`block`.

此外，您可以只使用`.show()`or`.hide()`函数而不是使用类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T14:28:32.497

试试这个...

```
$('a.button-next').on('click', function() {
    $("#tab-content2").toggle("show");
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T14:44:23.070

HTML

```
<div id="tab-content-holder">
    <div id="tab-content1 show">             
        <?php the_content(); ?>
    </div>

    <div id="tab-content2">     
        <?php the_field("experience");?>
    </div>
</div>

<a href="#" class="button-back">Previous</a>
<a href="#" class="button-next">Next</a> 
```

JS

```
$(document).ready(function() {
    $(".button-back").click(function() {
        MenuNavigationClick(-1);
    });
    $(".button-next").click(function() {
        MenuNavigationClick(1);
    });

    function MenuNavigationClick(direction) {
        // Get current element index and toggle
        var current = $("#tab-content-holder .show");
        var index = current.index();
        current.toggleClass("show");

        // Move to next element and check for overflow
        index += 1 * direction;
        index %= $("#tab-content-holder div").length;

        // Toggle next element
        $("#tab-content-holder div:eq("+index+")").toggleClass("show");
    }
}); 
```

CSS

```
#tab-content-holder div {
    display: none;
}
#tab-content-holder div.show {
    display: block;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T14:30:49.697

您是否尝试过将表演课程转移到另一条线路上？

```
.show
{
    display: block;
} 
```

# php - DOMDocument::loadHTML(): 警告 - htmlParseEntityRef: 实体中没有名称

> ID：14648442
> 
> 赞同：20
> 
> 时间：2013-02-01T14:25:38.637
> 
> 标签：php, warnings, domdocument

我发现了几个类似的问题，但到目前为止，没有一个能够帮助我。

我正在尝试在 HTML 块中输出所有图像的“src”，所以我正在使用`DOMDocument()`. 这种方法确实有效，但我在某些页面上收到警告，我不知道为什么。一些帖子建议隐藏警告，但我更愿意找出生成警告的原因。

> 警告：DOMDocument::loadHTML(): htmlParseEntityRef：实体中没有名称，行：10

产生错误的一个例子`post->post_content`是 -

```
On Wednesday 21st November specialist rights of way solicitor Jonathan Cheal of Dyne Drewett will be speaking at the Annual Briefing for Rural Practice Surveyors and Agricultural Valuers in Petersfield.
<br>
Jonathan is one of many speakers during the day and he is specifically addressing issues of public rights of way and village greens.
<br>
Other speakers include:-
<br>
<ul>
<li>James Atrrill, Chairman of the Agricultural Valuers Associates of Hants, Wilts and Dorset;</li>
<li>Martin Lowry, Chairman of the RICS Countryside Policies Panel;</li>
<li>Angus Burnett, Director at Martin & Company;</li>
<li>Esther Smith, Partner at Thomas Eggar;</li>
<li>Jeremy Barrell, Barrell Tree Consultancy;</li>
<li>Robin Satow, Chairman of the RICS Surrey Local Association;</li>
<li>James Cooper, Stnsted Oark Foundation;</li>
<li>Fenella Collins, Head of Planning at the CLA; and</li>
<li>Tom Bodley, Partner at Batcheller Monkhouse</li>
</ul> 
```

`post->post_content`如果有帮助，我可以发布更多包含内容的示例？

我已暂时允许访问开发站点，因此您可以查看一些示例 [注意 - 问题已得到解答，链接不再可访问] -

*   错误 - [http://test.dynedrewett.com/specialist-solicitor-speaks-at-petersfield-update/](http://test.dynedrewett.com/specialist-solicitor-speaks-at-petersfield-update/)
*   没有错误 - [http://test.dynedrewett.com/restrictive-covenants-in-employment-contracts/](http://test.dynedrewett.com/restrictive-covenants-in-employment-contracts/)

有关如何解决此问题的任何提示？谢谢。

```
$dom = new DOMDocument();
$dom->loadHTML(apply_filters('the_content', $post->post_content)); // Have tried stripping all tags but <img>, still generates warning
$nodes = $dom->getElementsByTagName('img');
foreach($nodes as $img) :
    $images[] = $img->getAttribute('src');
endforeach; 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-12T12:03:05.503

这个正确答案来自@lonesomeday 的评论。

那么我最好的猜测是在 HTML 中的某处有一个未转义的 & 符号。这将使解析器认为我们在实体引用中（例如 ©）。当它到达 ; 时，它认为实体已经结束。然后它意识到它所拥有的内容不符合实体，因此它发出警告并将内容作为纯文本返回。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-11-10T22:06:12.673

正如这里提到的

[警告：DOMDocument::loadHTML(): htmlParseEntityRef: 期待 ';' 在实体中，](https://stackoverflow.com/questions/1685277/warning-domdocumentloadhtml-htmlparseentityref-expecting-in-entity/10482622#10482622)

您可以使用 ：

```
libxml_use_internal_errors(true); 
```

见[http://php.net/manual/en/function.libxml-use-internal-errors.php](http://php.net/manual/en/function.libxml-use-internal-errors.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-02T09:49:27.477

在任何地方检查 HTML 代码中的“&”字符。由于这种情况，我遇到了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-01T17:02:47.657

我没有在上面发表评论所需的声誉，但`htmlspecialchars`在我的情况下使用解决了这个问题：

```
$inputHTML = htmlspecialchars($post->post_content);
$dom = new DOMDocument();
$dom->loadHTML(apply_filters('the_content', $inputHTML)); // Have tried stripping all tags but <img>, still generates warning
$nodes = $dom->getElementsByTagName('img');
foreach($nodes as $img) :
    $images[] = $img->getAttribute('src');
endforeach; 
```

出于我的目的，我也在使用`strip_tags($inputHTML, "<strong><em><br>")`，所以所有图像标签也被删除了 - 我不确定这是否会成为问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-01T20:33:56.137

我最终以正确的方式解决了这个问题，使用 tidy

```
// Configuration
$config = array(
    'indent'         => true,
    'output-xhtml'   => true,
    'wrap'           => 200);

// Tidy to avoid errors during load html
$tidy = new tidy;
$tidy->parseString($bill->bill_text, $config, 'utf8');
$tidy->cleanRepair();

$domDocument = new DOMDocument();
$domDocument->loadHTML(mb_convert_encoding($tidy, 'HTML-ENTITIES', 'UTF-8')); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-22T10:17:54.860

对于 laravel，

> 使用 {{ }} 而不是 {!! ！！}

我遇到了这个问题，我设法解决了它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-20T02:21:43.670

我发现我的表格标签中有错误。`</td>` 我删除了一个额外的内容并进行了宾果游戏。

* * *

## 回答 #8

> 赞同：-8
> 
> 时间：2014-02-06T08:46:42.587

只需将字符串中的“&”替换为“and”即可。对所有其他符号执行此操作

# .htaccess - 使用 .htaccess 和 apache mod_rewrite 实现灵活和动态的重定向规则？

> ID：14648444
> 
> 赞同：0
> 
> 时间：2013-02-01T14:25:41.027
> 
> 标签：.htaccess, mod-rewrite, redirect, dynamic, rewrite

我想使用 .htaccess 和 apache modul mod_rewrite 来提供灵活和动态的 url 处理。

例如：我有最多 4 个变量，我想通过 mod-rewrite 传递给 php 脚本。

```
http://www.myfantasticsite.com/Var1/Var2/Var3/Var4 
```

这个的实现不是很复杂：

```
RewriteRule ^([^/]*)/([^/]*)/([^/]*)/([^/]*)$ /index.php?var1=$1&var2=$2&var3=$3&var4=$4 [L] 
```

但问题是：我想要一个动态和灵活的 url 处理。这意味着变量 2(Var2)、变量 3(Var3) 和变量 4(Var4) 是可选的。重定向也应该适用于这种 url：

```
http://www.myfantasticsite.com/Var1/Var2/Var3
http://www.myfantasticsite.com/Var1/Var2
http://www.myfantasticsite.com/Var1 
```

但是我自己还没有找到一种方法来允许这种灵活的处理。我所有的尝试都以内部服务器错误告终。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:17:34.097

使用 .使其他 url 部分成为可选的`?`。

```
RewriteRule ^([^/]+)(/([^/]+))?(/([^/]+))?(/([^/]+))?$ /index.php?var1=$1&var2=$3&var3=$5&var4=$7 [L] 
```

# python - Python的字符串问题

> ID：14648448
> 
> 赞同：0
> 
> 时间：2013-02-01T14:25:58.363
> 
> 标签：python, string, wxpython

我是一个 Python 菜鸟，所以我可能在这里遗漏了一些东西，但是我在我的程序中如何处理字符串时遇到了问题。当我显示它时，只显示第一个字符。

```
# some code
MessageBox = ctypes.windll.user32.MessageBoxA
# some other code
testString = self.statusBar1.GetStatusText(0)
# displays "azertyu"
MessageBox(None, "azertyu", 'COUCOU', 0)
# displays 'M'
MessageBox(None, testString, 'COUCOU3', 0)
# displays 'a'
MessageBox(None, testString[1:], 'COUCOU3', 0) #
#displays 'c'
MessageBox(None, testString[2:], 'COUCOU3', 0) 
```

完整的字符串是 'Machine' （实际上比这更长）。Python 怎么会认为任何字符都是结尾字符并且一次只显示一个字符？我在这里缺少一些 Python 基础知识吗？

PS。GetStatusText 参考可在[http://www.wxpython.org/docs/api/wx.StatusBar-class.html#GetStatusText](http://www.wxpython.org/docs/api/wx.StatusBar-class.html#GetStatusText)获得。我用一个很长的字符串测试了 GetStatusText，它似乎没有剪切文本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T23:31:03.557

MessageBoxA 是 MessageBox win32 API 的 ascii 版本。您的 testString 可能是一个 Unicode 值，因此传递给 MessageBoxA 的值最终看起来像一个字节数组，每个其他索引都为零。换句话说，它看起来像一个字符串，只有一个以 NULL 字符结尾的字符。我敢打赌，如果您使用 str(testString) 或切换到 MessageBoxW，那么它将按预期工作，但是您确实应该使用 wx.MessageBox 或 wx.MessageDialog 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:44:42.560

如果您使用的是 wxPython，为什么要尝试显示带有 ctypes 的消息框？wxPython 包有它自己的消息对话框。请参阅以下链接：

*   [http://wiki.wxpython.org/MessageBoxes](http://wiki.wxpython.org/MessageBoxes)
*   [http://wxpython.org/docs/api/wx.MessageDialog-class.html](http://wxpython.org/docs/api/wx.MessageDialog-class.html)
*   [http://www.blog.pythonlibrary.org/2010/07/10/the-dialogs-of-wxpython-part-2-of-2/](http://www.blog.pythonlibrary.org/2010/07/10/the-dialogs-of-wxpython-part-2-of-2/)

wxPython 演示包（可从 wxPython 网站下载）包含 MessageDialog 和 GenericMessageDialog 的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-10T08:46:09.910

尝试`ctypes.windll.user32.MessageBoxW`代替`ctypes.windll.user32.MessageBoxA`：

```
import ctypes
ctypes.windll.user32.MessageBoxW(None, "Hello, world!", "Test", 0) 
```

![](../Images/7339b0954fede18fa90ddeec5a197d57.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:04:26.840

它将 testString 视为列表

```
In [214]: for x in "Machine":
   .....:     print x
   .....:
M
a
c
h
i
n
e 
```

你有没有尝试过 ？

```
MessageBox(None, [testString], 'COUCOU3', 0) 
```

就好像`MessageBox`期待一个txt列表，这可能是有道理的：

```
["DANGER", "Will Robinson"] 
```

然后会在您的消息上给出两行txt。

*纯猜测*

# apache - 我可以安全地杀死我的大量 /usr/sbin/apache2 -k start PID 吗？

> ID：14648449
> 
> 赞同：0
> 
> 时间：2013-02-01T14:25:59.223
> 
> 标签：apache, tcp, kill, munin

大规模杀死我的网站上的每个 PID 是否“安全”——服务 dedi（debian 挤压）匹配这个（我知道这是 Apache 的）？www-data /usr/sbin/apache2 -k 开始

我会省略你的细节，但这些 PID 是入侵的最终未删除的残余，仍然有超过需要的 maaaaany 正在运行，我的 dedi 有太多的“已建立”连接、本地 ipconntrack、TCP 开放连接并在 netstat 中看到每秒重置连接数，“已建立：通过防火墙的连接”，我在 Munin 中看到的几个指标仍然远离图表。

我很想将它们全部关闭，但我不知道 - 这是否会“破坏”一些不会自行重启的重要东西，或者如果 - 这只会意味着其他地方计算机上的浏览器互联网将突然停止接收数据，需要按 F5

谢谢你能告诉我！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T14:33:25.033

如果你愿意，你可以杀了他们。如果他们正忙于处理来自一个或多个 HTTP 客户端的连接，那么这些连接将会中断。如果它们空闲等待新连接，那么它们将优雅地死掉，但在这种情况下，Apache 的主进程可能会重新启动它们，因为它希望保留一定数量的备用服务器（配置参数`MinSpareServers`）。

如果您的备用服务器比您需要的多，那么一个更好的主意是调低 Apache 配置参数`MaxSpareServers`。如果你这样做并重新加载 Apache，Apache 将自行杀死多余的进程。

只是不要杀死 Apache 主进程。那是所有其他进程的父进程，其父进程 ID 为 1。如果您杀死该进程，则 Apache 将关闭。

# php - 模拟 SUT 本身

> ID：14648451
> 
> 赞同：6
> 
> 时间：2013-02-01T14:26:06.783
> 
> 标签：php, unit-testing, mocking, phpunit

我的问题是关于单元测试。假设我们有下面的类；

```
class X
{
    public function p1(){
       //logic
       $a = $this->p2();
       //more logic
    }

    public function p2(){
       //even more logic
    }
} 
```

为 p1 方法编写单元测试时，我应该模拟 p2 方法吗？

我在想的是，为 p1 方法编写的测试应该只执行和测试 p1 方法而不是 p2。但是为了实现我应该得到一个 X 类的模拟并在该模拟实例上调用 p1 方法，如下所示。

```
$xMock = $this->getMockBuilder('\X')
    ->setMethods(array('p2'))
    ->getMock();

$xMock->expects($this->any())
    ->method('p2')
    ->will($this->returnValue($value));

$resultTobeAsserted = $xMock->p1(); 
```

不幸的是，这样做对我来说有点不对劲。我和我的同事讨论了这个话题，它归结为你如何定义你的 SUT（被测系统）。如果测试人员将正在测试的特定方法视为 SUT，那么从 SUT 调用的其他方法似乎是依赖项，测试人员自然会想要模拟它们。另一方面，如果测试人员将整个类视为 SUT，那么这些方法调用将成为测试的一部分，因此没有任何理由模拟它们。

这个结论正确吗？哪种思维会产生更健壮的单元测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:55:40.017

> 为 p1 方法编写单元测试时，我应该模拟 p2 方法吗？

**不。**

您正在调用一个类的方法，并且您期望事情会发生。

通过模拟 p2，您可以对类的实现细节进行例外处理。

> 不幸的是，这样做对我来说有点不对劲。

我说砍伐它的地方。

> 哪种思维会产生更健壮的单元测试？

如果您测试一个类的可观察行为，您可以确保该类在您更改该类的实现时仍然执行它应该做的事情。那就是鲁棒性。

如果您测试一个方法并模拟该方法的部分实现（内部方法调用），那么您测试一个特定的实现，如果测试失败，您不知道外部行为是否发生了变化。

* * *

我在以下文章中更详细地描述了这一点：

## [**`The UNIT in unit testing.`**](http://edorian.github.io/2012-03-14-The-UNIT-in-unit-testing/)

其中详细说明了为什么我认为测试*行为*而不是*方法*很重要。

简而言之

> PHP 中的单元测试是关于测试类的可观察行为！

**行为：**

*   返回值
*   调用其他方法
*   修改全局状态（写入文件、数据库、$GLOBALS）

测试那些东西。忽略实施细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:38:01.693

> 如果测试人员将正在测试的特定方法视为 SUT，那么从 SUT 调用的其他方法似乎是依赖项，测试人员自然会想要模拟它们。

如果有支持这种分离的参数，可以使用相同的参数将类重构为两个类，这正是你应该做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:38:18.907

你的想法是正确的。如果您想要测试方法`p1`，您并不关心，`p2`因为您假设它已在另一个测试中进行了测试。所以，你可以模拟/存根`p2`。但是你必须记住你应该只模拟/存根`p2`。所以你的例子应该更像：

```
$xMock = $this->getMockBuilder('\X')
    ->setMethods(array('p2'))
    ->getMock();

$xMock->expects($this->any())
    ->method('p2')
    ->will($this->returnValue($value));

$resultTobeAsserted = $xMock->p1(); 
```

# android - ListView 快速滚动条错误

> ID：14648454
> 
> 赞同：3
> 
> 时间：2013-02-01T14:26:10.827
> 
> 标签：android, listview, adapter, fastscroll, sectionindexer

我正在研究字典应用程序。我有一个启用快速滚动的列表视图和实现 SectionIndexer 的适配器。当我使用中文字典时，我有更多的部分，然后使用西欧语言并有一个小问题：

> 如果我停止快速滚动并且当滚动条可见时开始使用默认滚动我的“快速滚动滚动器”立即移动到另一个位置（在顶部的某个位置）并且只有当我快到列表的末尾时它才会开始也以更快的速度移动到我的位置。

这种行为有原因吗？使用默认滚动时是否有任何方法可以隐藏快速滚动条（但不禁用快速滚动）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:02:36.360

以为我会在这里发帖，希望还为时不晚。

注意：这不是使用 AlphabetIndexer，我不认为使用三个集合来管理列表是一个好主意，虽然它很简单，并且解释了这个概念。

以下是如何使用回调的基本示例：

```
public LinkedHashMap<Integer,String> sectionList = new LinkedHashMap<Integer,String>();
public HashMap<Integer,Integer> sectionPositions = new HashMap<Integer, Integer>();
public HashMap<Integer,Integer> positionsForSection = new HashMap<Integer, Integer>(); 
```

当您拥有“位置”数组（预先订购）时，这将创建三个哈希图来跟踪事物，非常简单的实现，非常容易阅读：

```
 if( locations != null && locations.size() > 0 ) {
    //Iterate through the contacts, take the first letter, uppercase it, and use that as a key to reference the alphabetised list constructed above. 
    for( int i = 0; i < locations.size(); i++ ) {
        String startchar =locations.get(i).getStartCharacterForAlphabet();

        if( startchar != null ) {
            if( sectionList.containsValue(startchar) == false ) {
                sectionList.put(Integer.valueOf(i),startchar);
                positionsForSection.put(Integer.valueOf(sectionList.size() - 1), Integer.valueOf(i));
            }
        }

        sectionPositions.put(Integer.valueOf(i), sectionList.size() - 1);
    }  
} 
```

以下是三个回调：

```
@Override
public int getPositionForSection(int section) {
    return positionsForSection.get(Integer.valueOf(section)).intValue();
}

@Override
public MyLocation getItem(int position) {
    if( locations.size() > position ) {
        return locations.get(position);
    }

    return null;
}

@Override
public int getSectionForPosition(int position) {
    return sectionPositions.get(Integer.valueOf(position)).intValue();
} 
```

希望能帮助到你！

# php - Doctrine2：附加连接选项

> ID：14648456
> 
> 赞同：0
> 
> 时间：2013-02-01T14:26:21.497
> 
> 标签：php, pdo, doctrine-orm

有没有办法在 Doctrine2 的数据库连接中添加一些额外的参数？

例如我需要启用网络通信压缩。

```
$DoctrineConnectionOptions = array(
    'driver' => 'pdo_mysql',
    'dbname' => 'db',
    'user' => 'root',
    'password' => 'root',
    'host' => 'localhost',
    /* 
    additional_options => array(
       PDO::MYSQL_ATTR_COMPRESS => true
    )
    */
);
$em = \Doctrine\ORM\EntityManager::create($DoctrineConnectionOptions, $DoctrineConfig); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:29:50.590

检查 EntityManager::create() 源代码。您可以直接将定制的 PDO 对象作为连接选项（'pdo' 键）传递。

# python - 由于 Unicode 字符导致的 Django 数据库错误

> ID：14648457
> 
> 赞同：1
> 
> 时间：2013-02-01T14:26:22.227
> 
> 标签：python, django, unicode

我不知道为什么我仍然收到此错误：

```
DatabaseError: (1366, "Incorrect string value: '\\xF0\\xA0\\x83\\x8F\\xF0\\xA0...' for column 
```

大多数 unicode 字符中的文件名已经正确保存在 DB 表中，并且我已经使用 unicode 文字来保存它们，如下所示：

```
Submission(id=id, filename=u'<actual filename>').save() 
```

但如前所述，这种方法不适用于所有 unicode 字符。我将如何处理？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:39:37.483

尝试使用 smart_str

```
from django.utils.encoding import smart_str
...
Submission(id=id, filename=smart_str('<actual filename>')).save() 
```

# locale - symfony2 根据域名检测语言环境

> ID：14648458
> 
> 赞同：3
> 
> 时间：2013-02-01T14:26:22.680
> 
> 标签：locale, symfony-2.1

我想设置一个具有 2 个语言环境的新网站，并且应该通过使用的域名检测到该语言环境。知道怎么做吗？

```
for example locales: nl and fr
when www.somenldomainname.be is used then the nl locale should be detected
when www.somefrdomainname.be is used then the fr locale should be detected 
```

如果我在 nl 或 fr 中生成一个 url 并且选择了正确的域名，那就太好了。

亲切的问候，

大安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:42:20.073

You can create an event listener to detect your domain name:

```
class LocaleListener implements EventSubscriberInterface
{

    /**
     * Set default locale
     *
     * @param GetResponseEvent $event
     */
    public function onKernelRequest(GetResponseEvent $event)
    {
        $request = $event->getRequest();
        if (!$request->hasPreviousSession()) {
            return;
        }
        // get domain name
        $host = $request->getHttpHost();
        // or $host = $request->getHost();
        $locale = 'en';
        if ($host == 'domain1') {
            $locale = 'fr';
        } 
        $request->setLocale($locale);
    }

    /**
     * {@inheritdoc}
     */
    static public function getSubscribedEvents()
    {
        return array(
            // must be registered before the default Locale listener
            KernelEvents::REQUEST => array(array('onKernelRequest', 17)),
        );
    } 
```

}

And in your services.yml:

```
services:

    my_locale_listener:
        class: MyBundle\LocaleListener
        tags:
            -  { name: kernel.event_subscriber } 
```

You can put in listener constructor default locle from parameters.yml file and if locale is not detected by domain set default locale.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-11T21:46:13.347

有一个捆绑包：[https://github.com/schmittjoh/JMSI18nRoutingBundle](https://github.com/schmittjoh/JMSI18nRoutingBundle)。

这是你如何设置它`config.yml`：

```
jms_i18n_routing:
    default_locale: nl
    locales: [nl, fr]
    strategy: custom
    hosts:
        nl: www.somenldomainname.be
        fr: www.somefrdomainname.be
redirect_to_host: true 
```

有关更多详细信息，请参阅[有关使用场景](http://jmsyst.com/bundles/JMSI18nRoutingBundle/master/configuration)的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T10:21:05.107

捆绑包 JMSI18nRoutingBundle 仅支持 symfony <=2.1.x。好方法似乎是使用 Daniel Korsak 的解决方案。这是一个更完整的参数示例。

```
namespace Path\ToYourBundle\Listeners;

use \Symfony\Component\HttpKernel\Event\GetResponseEvent;
use \Symfony\Component\HttpKernel\KernelEvents;
use \Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\DependencyInjection\ContainerInterface as Container;

class LocaleListener implements EventSubscriberInterface
{
    protected $domainLocales;
    protected $defaultLocale;

    public function __construct($container,$defaultLocale)
    {
        $this->domainLocales = $container->getParameter('domain_locales');
        $this->defaultLocale = $defaultLocale;
    }
    /**
     * Set default locale
     *
     * @param GetResponseEvent $event
     */
    public function onKernelRequest(GetResponseEvent $event)
    {
        $request = $event->getRequest();
        if (!$request->hasPreviousSession()) {
            return;
        }
        // get domain name
        $host = $request->getHttpHost();
        // or $host = $request->getHost();

        $locale = $this->defaultLocale;

        if (array_key_exists($host, $this->domainLocales))
        {
            $locale = $this->domainLocales[$host];
        }
        $request->setLocale($locale);
    }

    /**
     * {@inheritdoc}
     */
    static public function getSubscribedEvents()
    {
        return array(
            // must be registered before the default Locale listener
            KernelEvents::REQUEST => array(array('onKernelRequest', 17)),
        );
    }
} 
```

在你的 services.yml 中：

```
services:

    my_locale_listener:
        class: Path\ToYourBundle\Listeners\LocaleListener
        tags:
            -  { name: kernel.event_subscriber }
        arguments: [@service_container,%locale%]
parameters:
    domain_locales:
        domain1: en
        domain2: fr 
```

# html - 尝试使用 z-index 隐藏部分 div

> ID：14648461
> 
> 赞同：0
> 
> 时间：2013-02-01T14:26:25.023
> 
> 标签：html, css, twitter-bootstrap

这是我的页面：[http ://www.replyonline.co.uk/Brayborne/www/index.html](http://www.replyonline.co.uk/Brayborne/www/index.html)

在主导航上，如果您单击服务，您会看到一个下拉菜单。导航类是`.nav nav-pills nav-stacked.`

我希望此下拉列表的顶部出现在下方，`navbar-wrapper`以便我设置的框阴影`navbar-wrapper`显示在下拉列表中，使其具有如下设计的分层效果：-

![在此处输入图像描述](../Images/b51a89fc88bae4769f2144135037d0bc.png)

任何人都可以提供我可以用来实现这一目标的任何建议或 CSS 吗？此外，如果有帮助，该站点是使用 Bootstrap 构建的。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:00:34.427

有点hacky，但应该让你去：

```
.dropdown-menu {
    z-index: -1;
}

#myCarousel {
    z-index: -2;
} 
```

工作演示：

[http://jsfiddle.net/EGmZ5/](http://jsfiddle.net/EGmZ5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:01:43.973

z-index 对您没有帮助，因为您的下拉列表在您的*内部*`navbar-wrapper`，因此将始终位于它之上。

**尝试这个：**

通过删除来删除 CSS 箭头`.navbar .nav > li > .dropdown-menu:before`。

在下拉菜单中，更改以下样式：

```
.dropdown-menu {
  border-radius: 0 0 6px 6px;
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2), 0 5px 5px rgba(0, 0, 0, 0.2) inset;
  margin: 0;
  top: 74px;
} 
```

**结果：**

![落下](../Images/f5c23a884827f0c372398576b6d11f8f.png)

更改 box-shadow 值以满足您的需要。

# c - 如何在 C 中声明由输入数量设置的动态二维数组

> ID：14648470
> 
> 赞同：0
> 
> 时间：2013-02-01T14:27:09.437
> 
> 标签：c

> **可能重复：**
> [二维字符数组的动态内存](https://stackoverflow.com/questions/2614249/dynamic-memory-for-2d-char-array)

嗨，我想知道如何声明一个动态二维数组，其中数组的大小由输入的输入数设置。例子：

```
user input:
1 2 3
4 5 6
7 8 9

array[0][0] == 1    array[0][1] == 2    array[0][2] == 3
array[1][0] == 4    array[1][1] == 5    array[1][2] == 6
array[2][0] == 7    array[2][1] == 8    array[2][2] == 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:29:27.967

使用[`malloc()`功能](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)。提示：如果要模拟二维数组，则需要指向指针的指针。

# r - 使用 r 手动解析 xml 文件

> ID：14648473
> 
> 赞同：-1
> 
> 时间：2013-02-01T14:27:17.417
> 
> 标签：r

出于某种原因，我无法在工作中下载 r xml 包。我有一个 xml 文件，其内容如下：

```
x<-read.table("info.xml") 
```

X

```
</name></content></item><item id="id-123"><content><name>
</name></content></item><item id="id-456"><content><name>
</name></content></item><item id="id-5559"><content><name> 
```

我需要选择以 id 和 - 开头的值以及类似的数字

id-123、id-456 id-5559 等

试过这个：

```
str_extract_all(x, "id-[0-9]") 
```

但只是打印 id-1，我真的非常需要帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:43:56.927

str_extract_all(x, "id-[0-9]+")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:47:10.990

正则表达式“id-[0-9]”末尾缺少一个“+”。可能还有更多问题，但那一个会跳出来。

# javascript - jQuery TinyScrollbar 不会在 chrome 中显示

> ID：14648477
> 
> 赞同：1
> 
> 时间：2013-02-01T14:27:27.027
> 
> 标签：javascript, jquery, tinyscrollbar

我正在使用 jQuery TinyScrollbar 插件向某些内容添加滚动条，在 Firefox 上，它可以工作，但是当我刷新时，有时它会消失，在 chrome 上，它根本不显示，我已经按照网站上的示例[http:// baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)，我不知道是什么问题。
您可以看到问题的网站位于[http://www.outstock.es/avances/index.php/products/show/1](http://www.outstock.es/avances/index.php/products/show/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:54:27.260

查看页面上的代码后，看起来这两行被打得太早了：

```
$('#scrollbar1').tinyscrollbar({ size: 600 });//lanzamos el scrollbar para la galeria
$('#scrollbar2').tinyscrollbar({ size: 600 });//lanzamos el scrollbar para la galeria simple 
```

确保这些在您的 general.js 文件中的 DOM 就绪事件中被击中

当我打开您的页面并从控制台运行这些代码行时，您的#scrollbar 1 就会出现。

**#Scrollbar2 在页面上不存在。**

您可以通过从 chrome 开发工具的命令行运行此选择器来确认这一点：

```
$('#scrollbar2').length; 
```

这返回 0 表示选择器没有找到匹配项。

祝你好运

# iphone - uipickerview 在 tableviewcell detailtextlabel 上的选择

> ID：14648478
> 
> 赞同：1
> 
> 时间：2013-02-01T14:27:31.933
> 
> 标签：iphone, ios, objective-c, uitableview, uipickerview

正如我在标题中所写，我试图将在pickerview（由数组填充）上选择的值写到`detailTextLabel`我单击以调出pickerview 的单元格中。（pickerview 显示在 actionSheet 中）。

我试图做的是设置两个可变数组：`pickerData`和`tableData`. 最初，该`pickerData`数组包含pickerview 中显示的值，并且该`tableData`数组只有一个值。

当调用以下方法时，我试图将选择记录到`tableData`数组中，然后用这个值替换原来的值`detailTextLabel`

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    [tableData replaceObjectAtIndex:row withObject:[pickerData objectAtIndex:row]];
} 
```

由数组`detailTextLabel`填充`tableData`，这发生在方法中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

使用代码行：

```
cell.detailTextLabel.text = [pickerData objectAtIndex:indexPath.row]; 
```

我究竟做错了什么？关于我应该如何以不同的方式执行此操作的任何建议？我只编程了一个月，我确信这有一个简单的解决方案。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:41:27.090

您说您正在使用 tableData 来更新 detailTextLabel 但是当您查看`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath` 您正在使用`cell.detailTextLabel.text = [pickerData objectAtIndex:indexPath.row];`导致问题的 pickerData 时。您应该使用`cell.detailTextLabel.text = [tableData objectAtIndex:indexPath.row];`并希望它能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:53:28.393

您可以在您的中访问您的 detailTextLabel `pickerView didSelectRow`，然后将您的选择器值设置为此`label`

```
UILabel *detailTextLabel=(UILabel*)[[tableView cellForRowAtIndexPath:indexPath] detailTextLabel ];

detailTextLabel.text=[pickerData objectAtIndex:row]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:14:38.873

您需要初始化 tableData NSMutableArray ： self.tableData = [[[NSMutableArray alloc] init] autorelease];

```
 id)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
UITableViewCell *cell =[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:index inSection:0];
cell.detailTextLabel.text = [pickerData objectAtIndex:row];
    [self.tableData insertObject:[pickerData objectAtIndex:row] atIndex:index]
} 
```

# haskell - 一个简单的 Haskell 运算符

> ID：14648480
> 
> 赞同：1
> 
> 时间：2013-02-01T14:27:37.800
> 
> 标签：haskell

对于我的任务，我们必须编写一个如下所示的原始函数：

我的问题是 Prim Eq、Prim Less、Prim Great 应该能够接受任何类型的参数，例如字符串、数字，尽管它的返回类型始终是布尔值......所以我不知道如何指定类型 a 和 b。

如果您知道如何处理此问题，请告诉我。我真的很感谢你的帮助。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:47:39.810

```
prim Less [Number a, Number b] = Bool (a < b)
prim Less [String a, String b] = Bool (a < b)
prim Great [Number a, Number b] = Bool (a > b)
prim Great [String a, String b] = Bool (a > b) 
```

`a`并且`b`不是类型；他们是价值观。我不确定你想在这里指定什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:53:42.410

您要查看的是[GADTs](http://en.wikibooks.org/wiki/Haskell/GADT#GADTs)。但是，您可能无法拥有您的`prim`功能，但如果您可以*向构造函数添加类型签名，*您可以获得更多的类型安全性，例如`Eq :: Value a -> Value a -> Value Bool`GADT。

# javascript - 如何使用函数更新 Javascript 对象

> ID：14648484
> 
> 赞同：1
> 
> 时间：2013-02-01T14:27:50.907
> 
> 标签：javascript, json, highcharts, getjson

基本上我有一个对象，它定义了[Highchart](http://www.highcharts.com)图表的一些属性：

```
var options = {
    chart: {
        renderTo: 'container',
        type: 'line',
        marginRight: 130,
        marginBottom: 25
    },
    title: {
        text: 'Monthly Average Temperature',
        x: -20 //center
    },
    subtitle: {
        text: 'Source: WorldClimate.com',
        x: -20
    },
    xAxis: {
        categories: []
    },
    yAxis: {
        title: {
            text: 'Temperature (°C)'
        },
        plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
        }]
    },
    tooltip: {
        formatter: function () {
            return '<b>' + this.series.name + '</b><br/>' + this.x + ': ' + this.y + '°C';
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -10,
        y: 100,
        borderWidth: 0
    },
    series: [{
        name: 'Tokyo',
        data: aCosts
    }]
}; 
```

我想从一个文件（ajax调用）更新这个对象，如下所示：

```
$.getJSON(
    "handler.php",
    function (oJSON) {
        var sName,
            sCost,
            aRow;
        for (sName in oJSON) {
            aRow = [];
            //categories = [];
            if (oJSON.hasOwnProperty(sName)) {
                aRow.push(sName);
                categories.push(sName);
            }
            // Create the chart
            var chart = new Highcharts.Chart(options);
        }
    }
); 
```

问题是，我不能将新值传递给选项，因为它声明类别未定义。我试过使用：

```
options.categories.push(sName)
options[categories].push(sName) 
```

没有工作。

如何更新选项对象中的类别值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:30:39.387

假设`options`从`$.JSON`通话中可以看到，这应该有效：

```
options.xAxis.categories.push( sName ); 
```

如果您查看`options`对象的结构，您会看到，它`categories`位于属性下方`xAxis`。因此你应该解决的是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:30:57.067

您只需要先定义类别，如下所示：

```
options.categories = []; 
```

然后你可以把东西推到这个数组中。

编辑：您也可以将`categories: []`其放入您的 json 中。

# asp.net - 单选按钮检查事件中 ASP.NET 4.0 中的 URL 重写

> ID：14648486
> 
> 赞同：0
> 
> 时间：2013-02-01T14:27:58.483
> 
> 标签：asp.net, .net

我正在尝试更改网站的 URL 并需要相同的帮助。场景是我有一个用于学生搜索的搜索引擎，并且有不同的细化搜索条件。默认情况下，我在主页上显示所有学生数据，当我们使用搜索时，结果显示在同一页面上，因此页面的 URL 不会改变。

我的搜索条件是按加入日期（1 个月、2 个月、6 个月、1 年）并说明它们所属的日期。我添加了用于优化搜索的单选按钮，因此在“OnCheckedChanged”事件中数据会填充到页面上。那么现在如何更改 URL 以显示类似的内容，比如我有网站 www.xyz.com 并且需要显示 www.xyz.com/bydate/1month 或 www.xyz.com/bystate/LA。谷歌搜索了许多链接，但无法理解如何开始。

下面是我的代码片段

```
 <asp:DataList ID="dlJoin" CssClass="slider" r RepeatColumns="1" RepeatDirection="Vertical" runat="server" OnItemDataBound="dlJoin_ItemDataBound">
<ItemTemplate>
<label style="text-align: left; margin-left:15px;">
<asp:RadioButton ID="rddlJoin" CssClass="radiobooking" Checked="false" AutoPostBack="true" OnCheckedChanged="rddlJoin_checkchanged" GroupName="rdGroupTag" runat="server" onKeyPress="return suppress(event);" /><%#Eval("Name")%>
</label>
<asp:Literal runat="server" Visible="false" ID="litdlJoin" Text='<%#Eval("Value")%>'></asp:Literal>
</ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:23:17.490

我会用 Javascript 做到这一点，而不用担心在服务器端重定向（假设你所有的客户端都应该有 javascript）。您可以使用类似的东西进行“纯”重定向

```
window.location.href = "http://xyz.com/bydate/1month"; 
```

如果您单击指向该 URL 的链接，这具有等效的行为。

如果您想使用 Ajax 并使事情看起来更好看（并且没有完整的页面加载），您可以使用`#`URL 更改的组合并使用 jQuery 等工具轻松地`div`从另一个 URL 加载一个或一些这样的

# asp.net - Chrome 中的页面方法在函数结束时执行

> ID：14648491
> 
> 赞同：0
> 
> 时间：2013-02-01T14:28:20.277
> 
> 标签：asp.net, google-chrome, pagemethods

我在我的 asp.net 页面中使用 pagemethods 从数据库中检索一个值以用于我的 javascript 函数。在客户端，我使用以下代码：

```
var email;
function OnSuccess(result, userContext, methodName) 
{ 
  email=result;
}
function OnError(error, userContext, methodName) 
{ 
  if (error != null) 
  { 
    alert(error.get_message()); 
  } 
}
function GetValue()
{
  PageMethods.GetCustomerEmail(id,OnSuccess,OnError);
  var val=prompt("Insert the value.",email); 
  if (!(val == null))
  { 
    ...some code..
  }
} 
```

我已经在 Internet Explorer 和 Firefox 中尝试过，一切正常。在 chrome 中，PageMethods 有效，但在函数末尾执行，在这种情况下，“电子邮件”字段的值始终为空。Chrome 和其他浏览器有什么区别？我该如何解决这种情况？

# iphone - 如何以用户位置为中心设置地图矩形？

> ID：14648494
> 
> 赞同：0
> 
> 时间：2013-02-01T14:28:28.927
> 
> 标签：iphone, ios, objective-c

我有一个带有一个 pin 和用户位置的 mapView。我已经做到了，所以`VisibleMapRect`设置了两个引脚都可以看到。

我遇到的问题是我`MKUserTrackingModeFollowWithHeading`用来向用户展示移动动作，当我像这样设置矩形时，动作非常生涩。我相信这是因为用户位置图钉不在地图的中心。

如何让两个图钉都可见但将用户位置保持在中心？

这是我的代码，它开始位置并设置矩形。[locationManager startUpdatingLocation];

```
 // Start heading updates.
    if ([CLLocationManager headingAvailable]) {
        locationManager.headingFilter = kCLHeadingFilterNone;
        [locationManager startUpdatingHeading];

        //set the view to fit both the pins 
        MKMapPoint annotationPoint = MKMapPointForCoordinate(MapView.userLocation.coordinate);
        MKMapRect zoomRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
        for (id <MKAnnotation> annotation in MapView.annotations)
        {
           if (![annotation isKindOfClass:[MKUserLocation class]] ) {
                MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
                MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
                zoomRect = MKMapRectUnion(zoomRect, pointRect);

           }
        }
        NSLog(@"%f",zoomRect.size.height);
        NSLog(@"%f",zoomRect.size.width);

        [MapView  setVisibleMapRect:zoomRect animated:NO];

    } 
```

我已经尝试注释掉设置矩形的部分并且用户的移动是平滑的，所以我可以告诉我的问题是这段代码。

我也尝试在使用矩形后设置中心点

```
[MapView setCenterCoordinate:MapView.userLocation.coordinate animated:YES]; 
```

这似乎不起作用。也可以在之后设置它，以便不再显示另一个引脚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:08:24.363

我使用这种方法：

```
- (void)setRegionFromCoordinates:(NSArray *)waypoints animated:(BOOL)animated {
    if (waypoints != nil) {
        CLLocationDegrees maxX = -DBL_MAX;                        
        CLLocationDegrees maxY = -DBL_MAX;
        CLLocationDegrees minX = DBL_MAX;                               
        CLLocationDegrees minY = DBL_MAX;

        for (NSUInteger i=0; i < waypoints.count; i++) {
            CLLocationCoordinate2D currentLocation = [waypoints objectAtIndex:i];

                MKMapPoint mapPoint = MKMapPointForCoordinate(currentLocation);

                if (mapPoint.x > maxX) {
                    maxX = mapPoint.x;
                }
                if (mapPoint.x < minX) {
                    minX = mapPoint.x;
                }
                if (mapPoint.y > maxY) {
                    maxY = mapPoint.y;
                }
                if (mapPoint.y < minY) {
                    minY = mapPoint.y;
                }

        }

        if (maxX != -DBL_MAX && minX != DBL_MAX) {
            MKMapRect mapRect = MKMapRectMake(minX,minY,maxX-minX,maxY-minY);
            [map setVisibleMapRect:mapRect edgePadding:UIEdgeInsetsMake(50.f, 50.f, 50.f, 50.f) animated:animated];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:30:27.110

**要使用您当前的位置显示所有注释，请使用以下方法**

```
- (void)zoomToFitMapAnnotations:(MKMapView *)mapView {
    if ([mapView.annotations count] == 0) return;

    CLLocationCoordinate2D topLeftCoord;
    topLeftCoord.latitude = -90;
    topLeftCoord.longitude = 180;

    CLLocationCoordinate2D bottomRightCoord;
    bottomRightCoord.latitude = 90;
    bottomRightCoord.longitude = -180;

    for(id<MKAnnotation> annotation in mapView.annotations) {
        topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
        topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);
        bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
        bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
    }

    MKCoordinateRegion region;
    region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
    region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
    region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1;

    // Add a little extra space on the sides
    region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1;

    region = [mapView regionThatFits:region];
    [mapView setRegion:region animated:YES];
} 
```

# php - 对 PHP（使用 PDO）进行安全检查以进行成员身份验证和注册

> ID：14648497
> 
> 赞同：0
> 
> 时间：2013-02-01T14:28:40.403
> 
> 标签：php, pdo, xss, security

我正在寻找可以在我的网站上执行的一些更高级的安全检查的示例。

我正在使用带有 PDO MySQL 数据库的 PHP 5.2。

我最感兴趣的是：

*   使用默认 PDO 插入/更新的 SQL 注入示例（是的，我正在使用准备），
*   任何可以让我查看我的脚本是否没有在代码中的任何位置显示表名的检查（包括 PHP 异常），
*   通过注册表单或身份验证表（也就是说-我已经在登录表单上进行了蛮力保护）来杀死或入侵数据库中的用户帐户的任何方式。

我也有兴趣对会话劫持或跨站点脚本的任何尝试进行实时检查（我有允许用户输入 HTML 代码（通过 TINY MCE）的文本区域，我想知道我的机制是否阻止任何众所周知的 XSS 攻击）。

任何样本都将不胜感激 :) 尤其是与 SQL 注入 PDO 相关的样本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:00:14.370

我向您推荐这个工具，它是一种扫描仪，可以检查您的站点是否存在漏洞，并将您的文件和行号标记为漏洞类型以及如何解决它。您下载文件并将它们放在您的网络服务器中，它只能在本地使用，请不要在真实的现场使用它：

[http://rips-scanner.sourceforge.net/](http://rips-scanner.sourceforge.net/)

这里有更多（我没有尝试过）：

[http://sourceforge.net/projects/phpsecaudit/](http://sourceforge.net/projects/phpsecaudit/)

[http://sourceforge.net/projects/yasca/](http://sourceforge.net/projects/yasca/)

希望这对您有所帮助。问候

# ms-access - 自动更改跨多个查询使用的字段的方法

> ID：14648501
> 
> 赞同：1
> 
> 时间：2013-02-01T14:28:57.443
> 
> 标签：ms-access, ms-access-2003

我使用的是 MS Access 2003，在其中我总共可能有 100 个查询；我的任务是更改其中一个表中的一些名称，但我不知道有多少查询使用该特定表。

我的问题是 - Access 中是否有自动更改多个查询中使用的表中的字段名称，而无需手动更新查询以反映更改？

例如说查询 A 这样做：

```
SELECT name
FROM tblA
WHERE ... 
```

如果我更改了表中的名称，是否有办法在所有查询中反映这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:32:39.330

这是跟踪名称自动更正和执行名称自动更正是一个好主意的唯一情况。

> 为什么我应该使用名称自动更正？当您在具有经常被用户更改的设计的数据库中工作时，如果其他数据库对象的设计发生更改，数据库对象可能会停止工作。发生这种情况的一种方式是当对象的名称发生更改时，但该更改并未伴随对依赖于原始对象的对象的相应更改。
> 
> 例如，如果您创建一个基于名为 Customers 的表的查询，并且该表的名称稍后更改为 Customer，则您创建的查询会因为此名称更改而停止工作。查询没有其他问题，如果您在查询设计中更正表名，查询将再次起作用。
> 
> 名称自动更正功能可以为您跟踪名称更改，并且可以自动更正表单、报表、表格、查询、字段或控件（例如文本框）的名称。

-- [http://office.microsoft.com/en-ie/access-help/set-name-autocorrect-options-HA010256413.aspx](http://office.microsoft.com/en-ie/access-help/set-name-autocorrect-options-HA010256413.aspx)

# plugins - 在 Sublime Text 中显示活动插件并禁用它们

> ID：14648504
> 
> 赞同：40
> 
> 时间：2013-02-01T14:29:06.207
> 
> 标签：plugins, sublimetext2, sublimetext

我刚刚安装了 sublime text 2，并被我安装了所有这些的 php 插件所淹没。现在自动完成很疯狂，有一百万个不必要的建议，我不记得哪个插件做了什么或安装了哪些插件。有没有办法查看特定文件的所有活动插件，以便我可以禁用一些？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-01T14:52:56.947

我不确定文件部分上的活动插件，但是如果您安装了 Package Control，您可以通过打开命令面板（Mac 上的 Cmd-Shift-P）并键入 remove 来快速进入并删除已安装的插件。

您将看到**包控制：删除包****

**一旦显示已安装插件的列表，您可以单击这些并删除它们，然后测试您的代码。**

如果您需要的东西丢失，您可以反过来并快速重新安装软件包。

您可能已经知道这一点，所以我不确定这是否有用。

*顺便说一句：Sublime Text 3 Beta 刚刚发布，许可用户可以使用。我还没有做太多，但它几乎立即加载。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-06T11:37:38.303

**无需删除包**，因为可以使用*命令面板*中的选项简单地*禁用*包。`Package Control: Disable Package`

 ** * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-23T21:19:11.620

单击`Preferences > Package Settings > Package Control > Settings - User`以查看已安装软件包的列表。它看起来像这样：

```
{
    "bootstrapped": true,
    "in_process_packages":
    [
    ],
    "installed_packages":
    [
        "Package Control",
        "PyCover",
        "Python 3",
        "SublimeLinter",
        "SublimeLinter-csslint",
        "SublimeLinter-html-tidy",
        "SublimeLinter-jshint",
        "SublimeLinter-json",
        "SublimeLinter-lua",
        "SublimeLinter-pyflakes",
        "SublimeLinter-pyyaml",
        "SublimeREPL"
    ]
} 
```

您不能禁用软件包，但可以删除它们。单击`Preferences > Package Control`并输入`Package Control: Remove Package`，然后选择包。*

# php - PHP - 从数据库获取数据到 JSON

> ID：14648511
> 
> 赞同：1
> 
> 时间：2013-02-01T14:29:35.440
> 
> 标签：php, mysql, json

我有两张表，一张由 ID 和 FNAME（例如 01 Google）组成，另一个 ID、FIRSTNAME、SURNAME（例如 01 JOHN DOE）。

最后一个数据库中的 ID 将用户与组织连接起来（f.ex Google，此处的 ID 为 01）。

我正在尝试通过 json_encode 将这些转换为 JSON，但我不知道如何将我得到的两个结果联系起来。

用户应该按组织排序。

前任：

```
{"Google":["John Doe","Paul"],"Microsoft":["Bill Gates"]} 
```

我真的没有任何代码示例，因为我无法远程工作。我试图将它放入while循环中的数组中，但格式完全错误 - 排序也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:57:06.683

就这样你可以开始，

```
<?php
    $outArr = array();
    $arr1 = array(0 => array('ID' => '01', 'FIRSTNAME' => 'Google'));
    $arr2 = array(0 => array('ID' => '01', 'FIRSTNAME' => 'JOHN', 'SURNAME' => 'DOE'),
        1 => array('ID' => '01', 'FIRSTNAME' => 'NewJOHN', 'SURNAME' => 'NewDOE'));

    foreach ($arr1 as $key => $compArr) {
        $companyId = $compArr['ID'];
        $outArr[$compArr['FIRSTNAME']] = '';
        foreach ($arr2 as $arr2key => $employeeArr) {
            if ($employeeArr['ID'] == $companyId) {
                $outArr[$compArr['FIRSTNAME']][] .= $employeeArr['FIRSTNAME'];
            }
        }
    }
    echo json_encode($outArr);
    exit;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:19:34.703

这可能会帮助你，

```
$res = mysql_query('SELECT * FROM employee em LEFT JOIN organization org ON em.id = org.empid');
$op = array();
while($row = mysql_fetch_assoc($res))
{
  print_r($row);
  if(!isset($op[$row[org]])){
    $op[$row[org]]  = array();
  }
  array_push( $op[$row[org]], $row['fname']." ".$row['lname']);
}

echo json_encode($op); 
```

以及基于我本地数据库中的条目的相应结果，

```
Array
(
    [id] => 1
    [fname] => john
    [lname] => doe
    [sno] => 1
    [empid] => 1
    [org] => Google
)
Array
(
    [id] => 2
    [fname] => will
    [lname] => smith
    [sno] => 2
    [empid] => 2
    [org] => Microsoft
)
Array
(
    [id] => 3
    [fname] => abdul
    [lname] => raseed
    [sno] => 3
    [empid] => 3
    [org] => Google
)
{"Google":["john doe","abdul raseed"],"Microsoft":["will smith"]} 
```

注意：DDL 如下，

```
/*DDL Information*/
-------------------

CREATE TABLE `employee` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `fname` VARCHAR(256) DEFAULT NULL,
  `lname` VARCHAR(256) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=INNODB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1

CREATE TABLE `organization` (
  `sno` INT(11) NOT NULL AUTO_INCREMENT,
  `empid` VARCHAR(10) NOT NULL,
  `org` VARCHAR(256) DEFAULT NULL,
  PRIMARY KEY (`sno`)
) ENGINE=INNODB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 
```

节点：尝试使用最新的 mysql 函数，而不是弃用。

# iphone - 通过 MAC 地址 iOS/objective-C 检查未配对的蓝牙设备是否在范围内

> ID：14648513
> 
> 赞同：1
> 
> 时间：2013-02-01T14:29:36.627
> 
> 标签：iphone, ios, objective-c, bluetooth

我希望能够在 iPhone 上编写一个可以检查蓝牙设备是否在范围内的应用程序。我只会知道我想检查的设备的 MAC 地址。设备将不会配对。有没有办法编写这样的应用程序并通过应用商店获得它？

问候， jarektb

# perl - 基于 Unix 域套接字的 Apache-to-PSGI 代理

> ID：14648515
> 
> 赞同：0
> 
> 时间：2013-02-01T14:29:43.133
> 
> 标签：perl, apache, proxy, psgi

我们有许多（隔离的）PSGI 应用程序安装在同一台机器上，因此需要它们的 PSGI 服务器在唯一的端口上运行。从资源/管理的角度来看，这不太理想，但是当 Unix 域套接字在同一台机器上运行时似乎更明显的选择时，它还需要 TCP/IP 的（尚未测量且可能微不足道的）“开销” .

幸运的是，该应用程序在 Plack 的 HTTP 接口下工作（通过 mod_proxy 的“ProxyPass”从 Apache 代理），但不幸的是，它在 FastCGI 接口下中断（参见：[https ://stackoverflow.com/questions/14643165/can-psgi-apps- fork-under-plackhandlerfcgi](https://stackoverflow.com/questions/14643165/can-psgi-apps-fork-under-plackhandlerfcgi)）。

除了 mod_fastcgi 的 FastCgiExternalServer（或使用此未经测试的用户贡献补丁修补 mod_proxy：http: [//mail-archives.apache.org/mod_mbox/httpd-dev/201207.mbox/%3C20120731200351.GB11038@gmail.com%3E](http://mail-archives.apache.org/mod_mbox/httpd-dev/201207.mbox/%3C20120731200351.GB11038@gmail.com%3E)） ，有没有办法*通过 Unix 域套接字*将Apache 连接代理到 PSGI 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-09T14:06:30.843

从 Apache 2.4.7 和[Starman](https://metacpan.org/pod/distribution/Starman/script/starman#l---listen)开始，代理到 Unix 域套接字应该可以与[mod_proxy](http://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypass)一起使用。

另一种方法是在单个进程中运行不同的 PSGI 应用程序。我使用类似于以下包装应用程序的东西来实现这一点：

```
use strict;
use warnings;

use lib qw(
    /path/to/app1
    /path/to/app2
    /path/to/app3
);

use Plack::Builder;
use Plack::Util;

sub load_psgi_in_dir {
    my ($dir, $psgi) = @_;
    my $app = Plack::Util::load_psgi("$dir/$psgi");
    return sub {
        chdir($dir);
        return $app->(@_);
    };
}

builder {
    mount 'http://app1.com/' => load_psgi_in_dir(
        '/path/to/app1',
        'app1.psgi',
    );
    mount 'http://app2.com/' => load_psgi_in_dir(
        '/path/to/app2',
        'app2.psgi',
    );
    mount 'http://app3.com/' => load_psgi_in_dir(
        '/path/to/app3',
        'app3.psgi',
    );
}; 
```

我遇到的唯一问题是某些应用程序使用了同名的不同版本的本地模块。修复后一切正常。

这种方法的一个相当大的好处是您可以在所有应用程序之间共享工作人员，从而减少内存使用（或使您能够添加更多工作人员）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T01:43:40.600

有[mod_proxy_fdpass](https://httpd.apache.org/docs/2.4/mod/mod_proxy_fdpass.html)允许 Apache 代理到域套接字，虽然我还没有尝试过。

我个人建议使用标准的 each-app-on-a-port 安排，除非您可以衡量开销是否值得做一些非常规的事情。

您还可以选择为每个应用程序使用一个服务器专用 IP 地址，并让它们都在其专用 IP 的端口 80 上运行。

# php - 使用 HTML Purifier 删除所有空元素但分类跨度

> ID：14648529
> 
> 赞同：0
> 
> 时间：2013-02-01T14:30:28.597
> 
> 标签：php, htmlpurifier

我正在尝试使用 HTML Purifier 删除输入中的每个空元素，但我想保留满足类列表的跨度。因此，例如：

```
<div>&nbsp;</div><span class="color-gray"></span><div></div> 
```

应该变成：

```
<span class="color-gray"></span> 
```

我正在使用的配置是：

```
'AutoFormat.RemoveEmpty.RemoveNbsp' => true,
'AutoFormat.RemoveEmpty' => true,
'CSS.AllowedProperties' => array(),
'Core.RemoveProcessingInstructions' => true,
'HTML.Allowed' => 'a[href|target],h1,h2,p,strong,em,b,i,ul,ol,li,span[class]' 
```

但是，正如您可能想象的那样，这不是我所期望的，因为它也删除`<span>`了 。您对如何解决有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:25:37.447

嗯，你不能直接这样做，但是，它应该是 RemoveEmpty 的简单补丁；只需在句柄元素的开头添加一个额外的属性检查。

# css - 移动设备上覆盖默认视频播放按钮的CSS

> ID：14648540
> 
> 赞同：0
> 
> 时间：2013-02-01T14:30:54.057
> 
> 标签：css, html, mobile, video, html5-video

在 html5 视频播放器中，我如何使用 css 在 iPhone 等移动设备上的默认视频播放按钮前面覆盖或浮动带有可点击链接的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:41:30.693

您将需要使用媒体查询来定位适合您希望看到新按钮的设备的屏幕宽度。`display: none;`在**默认**按钮的媒体查询中应用 css 。为新按钮制作完全独立的 HTML，并`display: block;`为新媒体查询下的新按钮制作它。

然后对于大于您的手机尺寸的屏幕的媒体查询与上述相反，制作默认按钮`display: block;`和新按钮`display: none;`

# css - 在 LI 中应用样式

> ID：14648546
> 
> 赞同：0
> 
> 时间：2013-02-01T14:31:04.960
> 
> 标签：css, css-selectors

一个程序生成以下 HTML

```
<blah blah blah> 
  <li class="compact class_x class_y">
  <label class=label/>
  <select>...</select>
  </li>
<blah blah blah> 
```

有没有办法将样式应用于 li 和标签并在其中选择，但没有其他方法？换句话说，每当我有一个紧凑的样式时，我想将更改应用于 li、标签和内部选择。标签已经有一个类，而选择没有类。我无法修改html。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:33:39.993

你应该可以使用

```
.compact {
/* li styles */
}

.compact label {
/* label styles in compact class */
}

.compact select{
/* select styles in compact class */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:35:17.447

**HTML：**

```
<blah class="something">
    <li></li>
    <label />
    <select></select>
</blah> 
```

**CSS：**

```
.something > li {}
.something > label {}
.something > select {} 
```

您可以将 .something 替换为任何`<blah>`内容。我假设您有多个，并且每个都需要不同？

# mysql - 优化250k记录更新到1.7m记录表中随机记录的存储过程？

> ID：14648552
> 
> 赞同：1
> 
> 时间：2013-02-01T14:31:30.887
> 
> 标签：mysql, stored-procedures

我目前正在运行以下存储过程。虽然它比我原来的程序效率高得多，但它仍然需要大量的时间。我实际上不确定减速是什么，因为前 10k-30k 记录发生得很快，但是随着它的深入，它变得越来越慢。我预计会更新大约 250k 行，大约 170 万行。完成后，我将执行类似的操作，将记录插入每个“太阳系”。

给你一个例子来说明这是花费的时间。它现在已经运行了 24 小时多一点，它只是在它必须做的 1716 的迭代 786 上。更改选择限制的原因是我的表中每个扇区可能有 1000 行。我个人没有看到任何减速，但是我不太了解 MySQL 的内部工作原理。

这项工作是在我的本地计算机上完成的，不，它并不慢，但总是有可能需要在服务器级别进行更改，以使这些查询更有效率。如果需要，我可以更改服务器设置，这样也有可能。仅供参考，我在 Windows 7 上使用 MySQL 的库存配置。

```
DECLARE CurrentOffset int; -- Current offset limit to only deal with one 
DECLARE CurrentOffsetMultiplier int;
DECLARE RandRow int; -- Random Row to make a Solar System with
DECLARE CheckSystemExists int; -- Used to insure RandRow is not already a Solar System Row
DECLARE TotalSystemLoops int; -- Total number of loops so each Galaxy gets it's systems.
DECLARE RandomSolarSystemCount int; -- This is the number of Solar Systems that will be in each Galaxy;
DECLARE UpdateSolarCount int;
DECLARE NumberOfOffsets int;

SET CurrentOffsetMultiplier = 0;
SET NumberOfOffsets = 1716;
SET CurrentOffset = 0;

OffsetLoop: LOOP
        SET UpdateSolarCount = 0;
        /*Sets the amount of Solary Systems going in a Galaxy*/
            CheckRandomSolarSystemCount: LOOP
                SET RandomSolarSystemCount = FLOOR(125 + RAND() * (175 - 125) + 1);  
                IF RandomSolarSystemCount >= 125 THEN
                    IF RandomSolarSystemCount <= 175 THEN
                        LEAVE CheckRandomSolarSystemCount;
                    END IF;
                END IF;
            END LOOP;
        UpdateGalaxyWithSolarSystems: LOOP
                SET UpdateSolarCount = UpdateSolarCount + 1;
                IF UpdateSolarCount > RandomSolarSystemCount THEN
                    LEAVE UpdateGalaxyWithSolarSystems;
                END IF;
                        /*Sets RandRow and CheckSystemExists*/
                        CheckExistsLoop: Loop
                            SET RandRow = FLOOR(0 + RAND() * (1000)+ 1);
                            SET CheckSystemExists = (SELECT COUNT(*)
                                FROM
                                    (SELECT * FROM
                                        (SELECT * FROM galaxies2 LIMIT CurrentOffset, 1000) AS LimitedTable
                                    LIMIT RandRow ,1) AS RandTable
                                WHERE SolarSystemName IS NULL);
                            IF CheckSystemExists THEN
                                LEAVE CheckExistsLoop;
                            END IF;
                        END LOOP;

                        /*Updates the tables SolarSystemName column with a default system name*/
                        UPDATE galaxies2 
                            SET SolarSystemName = CONCAT("Solar System ", RandRow)
                            WHERE galaxies2.idGalaxy = 
                                (SELECT LimitedTable.idGalaxy AS GalaxyID FROM
                                    (SELECT galaxies2.idGalaxy FROM galaxies2 LIMIT CurrentOffset, 1000) AS LimitedTable
                                LIMIT RandRow ,1)
                        ;
        END LOOP;
        SET CurrentOffsetMultiplier = CurrentOffsetMultiplier + 1;
        SET CurrentOffset = CurrentOffsetMultiplier * 1000;
        IF CurrentOffsetMultiplier = 1717 THEN
            LEAVE OffsetLoop;
        END IF;
END LOOP; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:50:23.553

它越来越慢，因为您正在“行走”通过 galaxies2 表。

```
SELECT * FROM galaxies2 LIMIT CurrentOffset, 1000 
```

随着 CurrentOffset 值的增加，MySQL 必须“遍历”越来越多的记录才能到达起点。您实际上可以通过在主键上指定 ORDER BY 来提高速度。无论如何，您都希望有一个 ORDER BY，因为如果没有指定顺序，MySQL 只会随机读取记录。它不会以任何特定顺序读取记录，因此您可以（尽管不太可能）以不同的偏移量获得相同的记录集。

最好在自动增量字段上指定一个范围。假设你有一个。然后第一个和最后一个查询应该执行相同的操作。这并不理想，因为删除的记录可能存在空白。

```
SELECT * FROM galaxies2 WHERE auto_incr_field BETWEEN CurrentOffset AND CurrentOffset+1000 
```

# maven - 与 Maven 父/子插件配置继承作斗争

> ID：14648556
> 
> 赞同：26
> 
> 时间：2013-02-01T14:31:42.057
> 
> 标签：maven, inheritance, plugins

我正在尝试编写一个父 pom，并且我定义了一个插件，但我需要更改所有继承实例的配置。所以，我可以在`<pluginManagement>`定义中放一些配置，我可以在 中覆盖它`<plugin>`，但是我如何让孩子们默认回到`<pluginManagement>`版本呢？

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.9.1</version>
                <executions...>
                <configuration>
                    <configLocation>
                        (used by all children)
                    </configLocation>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <configuration>
                <configLocation>
                    (unique to the parent)
                </configLocation>
            </configuration>
        </plugin>
    </plugins>
<build> 
```

所以，发生的事情是孩子继续显示父母的配置。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T18:50:53.967

好的，我想我有它。就我而言，答案与您指定的内容有关 - 我确实需要标签。但是解决方案在标签中；通过将其绑定到非阶段，它会执行。这是我知道的。我发现必须匹配才能覆盖它。因此，配置永远不会被解析并且无关紧要。

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <!-- Main declaration of the plugin -->
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>2.9.1</version>
                <executions>
                    <execution>
                        <!--This must be named-->
                        <id>checkstyle</id>
                        <phase>compile</phase>
                        <goals>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration...>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <!-- Uses the default config -->
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <inherited>false</inherited>
            <executions>
                <execution>
                    <!--This matches and thus overrides-->
                    <id>checkstyle</id>
                    <phase>none</phase>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-01T14:49:54.730

您可以在父 pom 中明确指定不应继承该插件：

```
<build>
  <pluginManagement>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <version>2.9.1</version>
            <executions...>
            <configuration>
                <configLocation>
                    (used by all children)
                </configLocation>
            </configuration>
        </plugin>
    </plugins>
</pluginManagement>
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <inherited>false</inherited>                      <!-- Add this line -->
        <configuration>
            <configLocation>
                (unique to the parent)
            </configLocation>
        </configuration>
    </plugin>
  </plugins>
<build> 
```

在您的子 pom 中，您需要指定插件（然后配置将来自`<pluginManagement>`父元素。

```
<build>
  <plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
    </plugin>
  </plugins>
<build> 
```

# asp.net - 批量插入时操作系统错误代码 5（拒绝访问。）

> ID：14648557
> 
> 赞同：1
> 
> 时间：2013-02-01T14:31:45.920
> 
> 标签：asp.net, sql-server, sql-server-2008-r2, asp.net-2.0

我在服务器 A 上有一个 ASP.NET 应用程序，在服务器 B 上有一个 SQL Server。运行该应用程序时，它会调用一个存储过程。此过程尝试从服务器 A 上的共享文件夹中的文件批量插入，但出现以下错误：

无法批量加载，因为无法打开文件“\serverA_address\sharedFolder\test.txt”。操作系统错误代码 5（拒绝访问。）。

奇怪的是，当我直接从 sql management studio 执行批量插入时，它运行时没有任何异常。

另一个观察：如果我将共享文件夹地址更改为 sql server 运行的本地文件夹（服务器 B）而不共享，则没有访问被拒绝错误...

我尝试为所有用户设置 bulkadmin 权限，包括技术用户：运行 sql 服务的 sql_serviceusr、另一个运行应用程序并调用 sql server 的技术用户以及登录到应用程序的用户。所有用户都是域帐户，所有服务器都使用 Kerberos 身份验证。

服务器 A：Windows Server 2008R2

服务器 B：Windows Server 2008R2、SQL Server 2008R2

感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:23:27.107

您可以创建一个连接帐户并使用 SQL 身份验证。

根据我的经验，让我们的网络人员正确设置 Kerberos 就像拔牙一样。我们曾经让它工作了一个光荣的一周，然后它突然停止工作。那之后的麻烦就不值得了。

这可能不是您正在寻找的确切答案，但可能是您的临时解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:26:40.183

您正在进行双跳，因此您需要启用 Kerberos 委派。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:55:13.537

根据您对错误的描述，我认为问题出在共享文件夹中。
共享文件夹时，您应该在文件夹属性的两个位置向将从远程计算机访问文件夹的用户授予访问权限：**共享**选项卡下和**安全**选项卡下。
你给他们两个访问权限了吗？

# php - 通过命令行与直接 URL 运行时的文件路径问题

> ID：14648564
> 
> 赞同：1
> 
> 时间：2013-02-01T14:32:20.560
> 
> 标签：php, filesystems

我们有一些通过命令行 (CRON) /usr/bin/php /path/to/site/root/index.php --uri=cli/fifteen/clear_apc 运行的进程

最近对索引文件进行了更改：require_once(../opt/local/config/setting.php)

PHP返回：没有这样的文件或目录

但是，直接从浏览器运行它（相同的文件，路径），它运行正确，包括该文件：www.site.com/cli/fifteen/clear_apc

我想知道是否有解决该路径问题的方法，而不必包含从根目录开始的整个路径（/path/to/site/opt/local/config/setting.php）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:38:12.847

在 cron 和 apache 下运行时工作目录不同。相对路径是相对于当前工作目录的，这就是您的代码无法按预期工作的原因。

你可以试试`require_once(dirname(__FILE__) . "../opt/local/config/setting.php")`。这应该会生成一个从文件位置开始的绝对路径。

在此处查看所有*魔术常量*：http : [//php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

# database - 选择例如 AS01 并在不使用 ">=" 运算符的情况下获取数据库条目 A*

> ID：14648565
> 
> 赞同：1
> 
> 时间：2013-02-01T14:32:24.150
> 
> 标签：database, tsql, select, wildcard

亲爱的社区，您好，

提前感谢您的时间和参与。
我偶然发现了一个重大问题：

简化了我运行查询的表，如下所示：

**T1**
**ID - 键 - 值**
1 - K1 - A*
2 - K2 - Q*
3 - K3 - AS*
4 - K4 - Z1*

此数据库中的“*”用作通配符，这意味着任何以**A**开头的 VALUE都将被**K1覆盖，任何以****Z1**开头的 VALUE都将被**K4**覆盖。
查询如下所示：

从 T1中选择键
，其中 VALUE='AS01'

现在问题是得到键**K1**和**K3**，因为我只有一列，所以没有使用“Between”功能。
我也不能使用 ">=" 运算符，因为该表有超过 50 万个条目。此外，“>=”运算符会为我提供**K2 和 K4**的结果......

我尝试使用通配符和 LIKE 函数，但似乎无法得到正确的结果。

如果你们中的任何人能帮助我解决这个问题，我将不胜感激。提前致谢

你的，珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:07:54.307

```
SELECT KEY
FROM T1
WHERE VALUE='A*'
   OR VALUE='AS*'
   OR VALUE='AS0*'
   OR VALUE='AS01*'

SELECT KEY
FROM T1
WHERE VALUE in ('A*','AS*','AS0*','AS01*') 
```

下面的问题是会发现 AB*
如果不列出它们，我看不到任何到达那里的方法。

```
SELECT KEY
FROM T1
WHERE VALUE >='A*'
  AND VALUE <='AS01*' 
```

# java - 使用 Ant 测试 - 无法测试子目录中的文件

> ID：14648566
> 
> 赞同：2
> 
> 时间：2013-02-01T14:32:28.033
> 
> 标签：java, android, unit-testing, ant

我在java中有一个android应用程序。我想使用带有 ant 的 xml 脚本对其进行测试。现在我们有几个包和一个用于源文件和测试文件的标准目录结构。有一个“测试”文件夹（所有测试代码的根目录），其中有 1 个文件，比如 A.java 和一些子文件夹，这些子文件夹又包含一些测试文件或子子文件夹。只有文件 A.java 得到测试，其余的没有测试。如果我将 xml 脚本中的目录路径从“tests”更改为“tests/ui”，则文件夹“ui”中的测试文件无法测试，并且出现一些错误 - 当我签出文件时出现类未找到错误我存储测试输出的“test-result”文件夹。

我在 id =“test.classpath”的路径中包含了编译代码的父目录和所需的外部 jar。我认为我应该每个 .class 类型的文件而不是父文件夹的路径。

代码是：

```
<target name="test-run" description="Run Test">
     <delete dir = "test_result" />
     <mkdir dir = "test_result" />
     <junit printsummary="yes" haltonfailure="yes" showoutput="yes" >
        <classpath refid="test.classpath"/>
        <batchtest fork="yes" todir="test_result">
            <formatter type="xml"/>
            <fileset dir="tests" includes="**/*" />
        </batchtest>
     </junit>
 </target> 
```

假设通用文件结构，您能否解释一下如何实现我的动机。

编辑 ：

以下是上述 xml 中使用的路径，其中文件夹 out 包含由 idea ide 生成的源文件和测试文件的 .class 文件：

```
 <path id="test.classpath">
    <pathelement path="testlibs/jmockit.jar"/>
    <pathelement path="testlibs/jmockit-coverage.jar"/>
    <pathelement path="testlibs/jmockit-coverage-htmlfull.jar"/>
    <pathelement path="/opt/idea-IU-117.418/lib/junit-4.10.jar"/>
    <pathelement path="out"/>
  </path> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:56:50.310

尝试将`fileset`元素更改为：

```
<fileset dir="tests" includes="**/*.java" /> 
```

# ios - NSManagedObject @dynamic 属性不再被识别

> ID：14648569
> 
> 赞同：2
> 
> 时间：2013-02-01T14:32:34.423
> 
> 标签：ios, xcode, core-data, object-model

我昨天扩展了我的“用户”类，它是 NSManagedObject 的子类。我添加了一个名为“photoPath”的新属性，通常的方式：

```
@property (nonatomic, retain) NSString * photopath;
@dynamic photoPath; 
```

我添加了新版本的数据模型并成功实现了数据迁移。一切都很完美！......从现在开始。今天，当我访问我的新属性时，应用程序崩溃并显示：

```
-[User photoPath]: unrecognized selector sent to instance xxx 
```

**从昨天开始没有动过任何代码**，我只是关闭并重新打开了 Xcode。

那么，让应用程序在一天工作并在第二天崩溃的神奇魔力是什么？我知道 CoreData 会生成一些文件，例如 .momd。我已经清理了所有东西。有什么建议吗？

似乎 coreData 停留在旧的对象模型上，我不知道为什么......

编辑 ：

当我检查 Project.sqlite 文件时，“photoPath”列甚至不存在。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:51:31.307

更改核心数据模型或子类后，我总是做两件事。从设备/模拟器中删除应用程序的实例。清理项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:28:11.923

好的

当然，在我的 .xdatamodeld（版本化核心数据模型）下，选择了好的版本，我在发布之前进行了三次检查。

但我还是尝试选择旧的，保存，重新选择新的，保存。

它有效...

非常感谢 Xcode，这让我花了 2 个小时

**编辑：每次我关闭并重新打开我的项目时，问题都会再次出现。在启动应用程序之前，我总是必须执行上述过程。这很烦人。如果有人知道如何更好的解决方案，我会接受他的回答。**

# svn - Symfony 2 控制台任务“assets:install”和 Subversion 的问题

> ID：14648572
> 
> 赞同：1
> 
> 时间：2013-02-01T14:32:51.757
> 
> 标签：svn, symfony, assets

我目前正在使用 Symfony 2 开发一个包。因为我使用的是 Windows，所以我必须使用命令： `php app/console assets:install web`将我的 JS 和 CSS 文件的硬拷贝放入 web 文件夹。

但每次我这样做时，我的 Suberversion 都会出现问题，导致 IOException

```
[Symfony\COmponent\Filesystem\Exception\IOException]
Failed to remove file web/bundles/framework\images\.svn\text-base\open_quote.gif.svn-base 
```

我在 SVN 和 Symfony 出现问题后进行了谷歌搜索，但[发现这](https://github.com/symfony/symfony/pull/2026)并没有真正帮助我。

我现在可以使用所述命令的唯一方法是删除旧文件夹，签入更改，运行命令，再次签入。这不是我想要的方式。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:13:03.970

第一个问题：您使用的是旧版本，它`.svn`在每个文件夹中创建文件夹。真的很烦人，但通过简单的升级很容易解决。我使用 tortoise svn，它只在项目的根目录中创建一个 .svn 文件夹，就像 git 一样。

由于我不知道 svn 的 shell 命令，您只需右键单击`web/bundles`文件夹（甚至在 上`web`），您将获得带有“Tortoise SVN->ignore on commit”选项的上下文菜单。之后，手动删除该文件夹中的所有文件，您的问题就解决了。

是的...我遇到了同样的问题并以这种方式解决了。

更新：

我刚看到你需要检查它们。为此，只需使用升级，您将不再有隐藏的 .svn 文件夹。

# forms - 如何在struts 1中指定动作url

> ID：14648579
> 
> 赞同：0
> 
> 时间：2013-02-01T14:33:15.967
> 
> 标签：forms, url, jakarta-ee, struts1, struts-action

未找到以下指定的操作

```
<form action="editEvaluation.do"  method="post"  >
 ****
</form> 
```

错误是：

```
message Invalid path /situationAdministrative/evaluation/editEvaluation was requested 
```

但是我将网址写为 /GRH/editEvaluation.do ，GRH 是我的项目的名称，它工作正常

这是我的 struts 配置中的动作映射：

```
 <action path="/editEvaluation" type="ma.struts.action.situationAdministrative.EditEvaluationAction" /> 
```

我的 jsp 的 url 是 //localhost:8080/GRH/situationAdministrative/evaluation/evaluations.jsp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:09:10.980

```
<html:form action="/editEvaluation">
    ...
</html:form> 
```

# c# - WPF 选择背景颜色

> ID：14648581
> 
> 赞同：-1
> 
> 时间：2013-02-01T14:33:17.247
> 
> 标签：c#, wpf, background

[好的，所以我刚刚从 msdn](https://i.stack.imgur.com/rXWXM.png)尝试了 WPF WPF 示例，我注意到它说你得到一个下拉菜单，但是如果我转到 xaml 代码本身，我只会得到一个下拉菜单。甚至在选择棕色时，它显示出一些黑色的红色，是什么？

## 问题：

如何获得默认的棕色。

## 代码：

抱歉忘记了 Xaml 代码..

```
<Window x:Class="WPF_Ink_Pane.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Ink Pane" Height="550" Width="370">
<Grid Background="Brown" Height="520" VerticalAlignment="Top">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition Width="0*"/>
    </Grid.ColumnDefinitions>
    <InkCanvas x:Name="inkCanvas" Margin="9,9,10,68" Background="LightYellow"/>
    <Button x:Name="btnClear" Content="Clear" HorizontalAlignment="Left" Margin="9,457,0,0" VerticalAlignment="Top" Width="149" Height="39" Click="btnClear_Click"/>
    <Button x:Name="btnClose" Content="Close" HorizontalAlignment="Left" Margin="202,457,9,0" VerticalAlignment="Top" Width="150" Height="39" Click="btnClose_Click"/>

</Grid> 
```

## 编辑：

![在此处输入图像描述](../Images/3f8ce546c1a2290e1b19e763a67dfd05.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:54:43.773

![属性窗口](../Images/082577566edfff06492f16526c36b688.png)

这是你的属性窗口的样子吗？

MSDN 一定是有意`SaddleBrown`的，因为是的，该标准`Brown`带有红色调。

# javascript - 在 cookie 重定向期间显示消息

> ID：14648584
> 
> 赞同：0
> 
> 时间：2013-02-01T14:33:20.280
> 
> 标签：javascript

我有一个将 cookie 保存到用户计算机的网站，当他们下次访问主页时，他们会通过 cookie 重定向到另一个页面。

我尝试使用 jquery loading() 和 document.write，在页面重定向但没有工作的 2 秒内显示一条消息，现在唯一触发的事件是 alert() 函数，但那些阻止页面加载. wWat是做这个弹出窗口的最好方法吗？

jQuery 在这里不起作用，它必须是纯 javascript 解决方案，因为消息必须在 jQuery 选择器绑定到 html 之前显示，例如使用 document.ready

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:29:21.813

没有 jQuery 没有准备好

```
<script>
  var cookie_name = 'cookie_name_to_check_for';
  if (document && document.cookie)
  {
      if (document.cookie.indexOf(cookie_name + '=') != -1)
      {
          document.write("<h1>loading...please wait</h1>");
          document.close();
          window.location.assign('http://google.com')
      }
  }
</script> 
```

# powershell - 我的 PowerShell 异常没有被捕获

> ID：14648590
> 
> 赞同：3
> 
> 时间：2013-02-01T14:33:26.067
> 
> 标签：powershell, exception-handling, powershell-2.0

电源外壳 v2：

```
try { Remove-Item C:\hiberfil.sys -ErrorAction Stop }
catch [System.IO.IOException]
{ "problem" }
catch [System.Exception]
{ "other" } 
```

当然，我以休眠文件为例。实际上，我希望有时我可能无权删除另一个文件，我想抓住这种特殊情况。

输出：

```
output 
```

然而`$error[0] | fl * -Force`输出`System.IO.IOException: Not Enough permission to perform operation.`

问题：我不明白为什么我没有用我的第一个 catch 块捕获这个异常，因为它与异常类型匹配。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T14:53:31.027

当您使用停止操作时，PowerShell 将异常类型更改为：

```
[System.Management.Automation.ActionPreferenceStopException] 
```

所以这是你应该抓住的。您也可以将其排除在外并捕获所有类型。如果您想对不同的例外情况进行操作，请尝试一下：

```
try 
{
    Remove-Item C:\pagefile.sys -ErrorAction Stop
}
catch
{
    $e = $_.Exception.GetType().Name

    if($e -eq 'ItemNotFoundException' {...}
    if($e -eq 'IOException' {...}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:27:15.263

我喜欢用于全局错误处理的 Trap 方法，因为如果发生未处理的异常，我想停止我的脚本以避免损坏我的数据。我将 ErrorActionPreference 设置为全面停止。然后，我在可能会看到错误的地方使用 Try/Catch，以阻止它们停止脚本。在此处查看我的问题[如果 PowerShell 脚本出现任何错误，请发送电子邮件并终止脚本](https://stackoverflow.com/questions/14246512/send-an-email-if-a-powershell-script-gets-any-errors-at-all-and-terminate-the-sc)

# php - PHP MySQL (PDO) CREATE TABLE 不创建表（实际上，什么也不做）

> ID：14648592
> 
> 赞同：1
> 
> 时间：2013-02-01T14:33:34.980
> 
> 标签：php, mysql, pdo

从今天早上开始，我一直在苦苦挣扎，试图编写一个 install.php 文件，它将三个空表（用户、会话、帖子）插入数据库。当我用 PHPMyAdmin 注入它时，我使用的 SQL 代码是有效的，但显然我在 PHP 中处理它的方式是错误的，因为当我运行我的 install.php 文件时，我的数据库仍然是空的。这是我的代码：

```
<?php
try {
 $con = new PDO('mysql:host=omitted;dbname=omitted','omitted','');
 $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
 $con->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
 $q="CREATE TABLE posts (
  title varchar(150) NOT NULL,
  body text NOT NULL,
  created varchar(100) NOT NULL,
  user varchar(40) NOT NULL,
  id int(20) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (id),
  UNIQUE KEY id (id)
  ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

  CREATE TABLE sessions (
  session_id varchar(40) NOT NULL,
  data text NOT NULL,
  last_activity int(11) NOT NULL,
  PRIMARY KEY (session_id)
  ) ENGINE=MyISAM DEFAULT CHARSET=latin1;

  CREATE TABLE users (
  id int(11) NOT NULL AUTO_INCREMENT,
  username varchar(40) NOT NULL,
  password varbinary(250) NOT NULL,
  email varchar(40) NOT NULL,
  salt varchar(20) NOT NULL,
  name varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (id),
  UNIQUE KEY email (email),
  UNIQUE KEY username (username),
  UNIQUE KEY id (id)
  ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ";

 $stmt = $con->prepare($q);
 $stmt->execute();
 echo "success";

} catch (PDOException $e) {
 $e->getMessage();
}

?> 
```

我假设这是我的一些愚蠢的错误（因为我最近的 3 次头痛也很愚蠢）但此刻我真的无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:38:04.337

`prepare`每次通话您只能准备一份声明。要执行多个语句，您必须使用[`PDO::exec`](http://php.net/manual/en/pdo.exec.php)方法。

例如：

```
$con = new PDO('mysql:host=localhost;dbname=db','user','pass');
 $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
 $con->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
 $q="CREATE TABLE posts (
  title varchar(150) NOT NULL,
  body text NOT NULL,
  created varchar(100) NOT NULL,
  user varchar(40) NOT NULL,
  id int(20) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (id),
  UNIQUE KEY id (id)
  ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

  CREATE TABLE sessions (
  session_id varchar(40) NOT NULL,
  data text NOT NULL,
  last_activity int(11) NOT NULL,
  PRIMARY KEY (session_id)
  ) ENGINE=MyISAM DEFAULT CHARSET=latin1;

  CREATE TABLE users (
  id int(11) NOT NULL AUTO_INCREMENT,
  username varchar(40) NOT NULL,
  password varbinary(250) NOT NULL,
  email varchar(40) NOT NULL,
  salt varchar(20) NOT NULL,
  name varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (id),
  UNIQUE KEY email (email),
  UNIQUE KEY username (username),
  UNIQUE KEY id (id)
  ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ";

try {
 $con->exec($q) or die(print_r($db->errorInfo(), true));;
 echo "Success";

} catch (PDOException $e) {
 $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:37:36.893

这不是一个查询，而是一组查询。
只需通过单独的调用一一运行它们。

# java - 大括号在转义的 SQL 语句中被删除

> ID：14648597
> 
> 赞同：1
> 
> 时间：2013-02-01T14:33:53.840
> 
> 标签：java, sql, postgresql, escaping

以下陈述有什么问题？

```
 String sql = "INSERT INTO tablename (colname) VALUES ($tag$$${a{e^i\\pi}a}$$$tag$);";
        Connection connection = DB.getConnection();
        Statement st = connection.createStatement();       
        st.executeQuery(sql); 
```

执行后，应该有一个新的行 int 表名，在 colname 中带有*$${a{e^i\pi}a}$$*（类型：文本）。但我得到的只是*$${ae^i\pia}$$*，这是没有大括号的预期。

我在 Windows 7 机器上的 Java 7.11、PostgreSQL 9.1 (x64) 中对其进行了测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:39:43.100

只需使用准备好的语句，这样就不会出现未转义字符串的错误，因为 SQL 会自动为您完成。

```
 st = conn.prepareStatement("INSERT INTO tablename (colname) VALUES (?)");
  st.setString(1, "$${a{e^i\\pi}a}$$");
  st.executeUpdate(); 
```

有关其他信息，您可以查看此问题的答案： [Java - escape string to prevent SQL injection](https://stackoverflow.com/questions/1812891/java-escape-string-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:46:05.967

这是由驱动程序的 JDBC 转义引起的，例如支持`{call ...}`or`{fn ...}`语法。

根据这个线程：

[http://postgresql.1045698.n5.nabble.com/plpgsql-function-comment-with-single-quote-braces-td5155934.html](http://postgresql.1045698.n5.nabble.com/plpgsql-function-comment-with-single-quote-braces-td5155934.html)

您需要调用`statement.setEscapeProcessing(false)`以防止驱动程序解析 JDBC 转义语法。

请注意，这只发生在使用美元报价时。“常规”单引号内的字符串文字不受 JDBC 转义的影响（就像`PreparedStatement`s 的值一样）

# javascript - 是否需要在为图像对象设置 src 之前设置 onload 功能？

> ID：14648598
> 
> 赞同：17
> 
> 时间：2013-02-01T14:33:54.550
> 
> 标签：javascript, html, image

有人告诉我有必要在设置图像对象`onload`之前设置功能`src`。我已经[在 SO 中搜索过](https://stackoverflow.com/search?q=image%20src%20onload)这个。

我找到了这段代码：

```
var img = new Image();
img.src = 'image.jpg';
img.onload = function () {
    document.body.appendChild(img);
}; 
```

但大多数人认为`onload`应该这样写`src`：

```
var img = new Image();
img.onload = function () {
    document.body.appendChild(img);
};
img.src = 'image.jpg'; 
```

**必须**按这个顺序写吗？是否存在上述代码会导致错误的情况（例如图像太大）？

如果有人能给我一些例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T14:36:27.683

它不是必须的，但是如果`src`在附加处理程序之前设置和图像加载，它不会触发。

JavaScript 以异步方式运行。设置`src`将导致 Web 浏览器在主执行流程之外加载图像。如果`onload`在操作完成时未设置 - 可能介于设置`src`和`onload`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T14:39:09.227

一旦您为 src 分配了一个值，图像就会加载。如果它在达到 onload 之前加载，您的 onload 将不会触发。

为了支持所有实现，我强烈建议在设置 src 之前分配 onload 处理程序。

It is my experience (21+ years of JS) that you MUST set onload first - especially in IE which did not even support the image object when I started with JS.

If you get issues about the cached image not firing, add `+"?"+new Date().getTime()` when you set the src next time to avoid cache.

Here is the example from MDN which also uses the order I have suggested

[Creating an image from scratch](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images#Creating_an_image_from_scratch)

Another SO link [image.onload not firing twice in IE7](https://stackoverflow.com/questions/1038327/image-onload-not-firing-twice-in-ie7)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T14:37:48.857

分配 src 后，浏览器将立即开始异步下载图像，因此下载可能会在您附加 onload 事件处理程序之前完成，并且永远不会触发代码以将图像添加到 DOM。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T14:39:25.407

Most browser fire the load event imediatly if the image if the image is cached. However, Internet explorer 7 won't fire it at all. That's why it's better to set the src first.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-10T12:04:33.830

Answers above always mentioned the same problem like:

> there is the possibility the download could complete before you attach the onload event handler

or

> but if setting the src and the image loads before your handler is attached, it won't fire.

or bug with IE7\.

First, let's ignore IE7.

Second, I don't think problem mentioned exist, for example:

```
function loadImg(url) {
  let img = new Image()
  img.src = url
  let date1 = Date.now()
  console.log(img.complete)
  while (Date.now() - date1 < 5000) {

  }
  img.onload = function() {
    console.log('success')
  }
  console.log('sync first')
}
loadImg('https://cdn.sstatic.net/Sites/stackoverflow/img/sprites.svg')
```

Normally, you will get:

```
false
sync first
success 
```

Well, if you executed on another site which will use cache more than one time. You will get the result like image below:

[![enter image description here](../Images/96481e3e28b018f8ce1fbb8671d4116f.png)](https://i.stack.imgur.com/gjwKs.png)

The answer is clear now.

**Well, as long as you set the `onload` synchronously. You will not miss the `onload` event.**

Why would I say `synchronously`. For another example,

```
function loadImg(url) {
  let img = new Image()
  img.src = url
  let date1 = Date.now()
  console.log(img.complete)
  while (Date.now() - date1 < 5000) {

   }
  setTimeout(function() {
    img.onload = function() {
      console.log('success')
    }
  })

  console.log('sync first')
}
loadImg('https://cdn.sstatic.net/Sites/stackoverflow/img/sprites.svg')
```

The result on another site:

[![enter image description here](../Images/6b52186ae81f968f72a1b45b7515724e.png)](https://i.stack.imgur.com/vKTVY.png)

The second time with cache, `load` event won't be triggered. And the reason is `setTimeout` is asynchronously.

# php - php在提交15天后更新帖子状态

> ID：14648599
> 
> 赞同：2
> 
> 时间：2013-02-01T14:34:07.733
> 
> 标签：php, mysql, sql, database, date

我在 mysql 表中有一个 postdate 和 status 列。当前帖子的状态为 = 1。我只想在帖子提交 15 天后更改状态 = 0。任何人都可以提供帮助。

```
$todays = date('d-m-Y');
echo $todays;

mysql_query("UPDATE property SET status=1 WHERE expiredate > '".$todays."'");
//echo "record updated!"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:36:01.080

你的日期倒退了。MySQL日期格式是`YYYY-MM-DD`

```
$todays = date('d-m-Y'); 
```

应该

```
$todays = date('Y-m-d'); 
```

另外一个更好的方法是使用纯 SQL：

```
UPDATE property SET status=0 WHERE expiredate < CURRENT_DATE - INTERVAL 15 DAY 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T14:52:32.487

这将是要运行的 cron 脚本和 MySQL 语句的组合。

首先，cron 条目可能每天运行一次（此示例是每天凌晨 1 点运行一次）

```
* * * 1 0 /path/to/script.php 
```

然后，您的 PHP 脚本将创建一个 MySQL 查询（不需要 PHP 变量） - 使用您的表的假定名称“属性”

```
$db = new mysqli('host', 'user', 'password', 'database');
$db->query('update property set status=0 where status=1
            and expiredate < date_sub(now(), interval 15 day'); 
```

这将自动采用当前的过期日期，减去 15 天并使用它进行计算。此外，它会检查以确保状态为 1 - 这样它就不会继续更新已更新表的该字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T14:38:29.233

您必须定期运行查询以相应地设置状态。您可以每天在某个时间运行一个脚本，该脚本将对数据库运行查询。如果您有 Linux 服务器，请查看 cron 作业，因为这就是您要寻找的。

# jquery - IOS Web 应用程序总是以启动画面启动

> ID：14648601
> 
> 赞同：2
> 
> 时间：2013-02-01T14:34:11.123
> 
> 标签：jquery, ios, ipad, jquery-mobile

我有一个作为 IOS Web 应用程序加载的网页，并且在首次加载时也会加载启动画面。但是现在，即使网络应用程序在 ios 设备的后台运行，它似乎也会显示启动画面。我需要启用多任务处理，这样我的网络应用程序只会在首次启动时显示启动画面。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:36:17.273

每次打开 Web 应用程序时，它都会重新启动。要启用多任务处理，您可以将应用程序的状态保存在 LocalStorage 中，并在重新启动时恢复状态。

有关更多信息，请参阅类似问题：
[在 iOS 上打开时停止本机 Web 应用程序自行重新](https://stackoverflow.com/a/4454083/1340601)
[加载 停止重新加载从 iPhone 主屏幕启动的 Web 应用程序](https://stackoverflow.com/a/6943685/1340601)

Safari 开发者库中还有一篇文章：
[Safari Client-Side Storage and Offline Applications Programming Guide](http://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007256-CH1-SW1)

# matlab - 有没有办法从 MATLAB 中的结构中删除除少数所需字段之外的所有字段？

> ID：14648602
> 
> 赞同：2
> 
> 时间：2013-02-01T14:34:30.497
> 
> 标签：matlab, matlab-struct

所以我有几个结构，其中包含使用的数据是十几个脚本。问题是对于每个脚本，我只需要少数变量，其余的我可以忽略。我正在使用大量数据（数据），而 MATLAB 经常给我内存不足的错误，所以我需要从结构中删除所有不必要的字段。

目前我有一个包含所有不需要的字段的单元格，然后我在结构上调用 rmfield 。但是结构中的字段经常发生变化，不断更新不需要的字段列表变得很痛苦。那么有没有办法告诉 MATLAB 只保留我想要的那些字段并删除其他所有内容，即使我不知道其他所有内容是什么？

这是一个例子，

*   结构 1 具有：A、B、C、D、E 字段
*   结构 2 具有：A、B、C、D、E、F 字段
*   结构 3 具有：A、B、C、D、E、F、G、H、I 字段

有时结构 3 可能只有 A 到 G。

我只想保留 A、B 和 C 字段，并从所有结构中删除所有其他数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T14:39:41.480

这是一种方法：

1.  使用获取所有字段名的列表`fieldnames`
2.  从列表中删除您要保留的那些
3.  删除列表中剩余的所有内容

* * *

例子

```
s.a=1
s.b=2
s.c=3
s.d='chitchat'

tokeep = {'a','b'}

f=fieldnames(s)

toRemove = f(~ismember(f,tokeep));

s = rmfield(s,[toRemove]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:42:24.223

您可以将结构所需的字段复制到函数中的新变量中。

```
function newVar = getABC(strct)
    newVar.A = strct.A;
    newVar.B = strct.B;
    newVar.C = strct.C;        
end 
```

`strct`不会被复制到内存中，因为[您不会对其进行操作](http://www.mathworks.com/matlabcentral/answers/152)。

> MATLAB 使用通常称为“写入时复制”的系统来避免在函数工作区中复制输入参数，除非您修改输入参数。如果您不修改输入参数，MATLAB 将避免制作副本。

你可以从内存`newVar`中获取。`clear strct`

* * *

弗雷德的广义版本：

```
function newVar = getFields(oldVar, desiredCell)
    for idx = 1:length(desiredCell)
    newVar.(desiredCell{idx}) = oldVar.(desiredCell{idx});
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T13:07:44.380

1）假设你有一个结构 S

2）您只想保留 S 的前三个字段并删除所有其他字段

```
fieldsS = fieldnames(S);
S = rmfield(S,fieldsS(4:end)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-09T10:58:13.330

MATLAB 中的 rmfield 方法相当慢，因此在处理大型结构时最好避免使用它。

这个 MATLAB 文件交换项：[kpfield](http://uk.mathworks.com/matlabcentral/fileexchange/56413-kpfield--s--fields--)基本上是 rmfield 的倒数，应该完全按照您的要求工作。

它通过根据字段是否存在于字段名中创建逻辑数组，将结构转换为元胞数组，然后仅保留所需的索引。然后将修改后的元胞数组转换回结构。

免责声明：当我遇到完全相同的问题时，我已经写了 kpfield。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-27T15:41:42.403

我成功加载了我想删除的结构体——物理删除字段，然后重新保存了结构体。

删除工作区中的字段不会从原始结构中删除它们 - 因此需要重新保存。

# c++ - 模板函数中的模板别名

> ID：14648611
> 
> 赞同：1
> 
> 时间：2013-02-01T14:35:27.913
> 
> 标签：c++, templates, c++11

**编辑：**让我们假设我有两个（或更多）模板函数`f`，并且`g`根据其模板参数使用（有时）类型：

```
template<typename T>
some_ugly_and_large_or_deep_template_struct_1<T>::type 
f(const some_ugly_and_large_or_deep_template_struct_1<T>::type&,
  const some_ugly_and_large_or_deeptemplate_struct_1<T>::type&)
{
   // body, that uses perhaps more times my
   // "some_ugly_and_large_or_deep_template_struct_1<T>"
}

template<typename T>
some_ugly_and_large_or_deep_template_struct_2<T>::type 
g(const some_ugly_and_large_or_deep_template_struct_2<T>::type&,
  const some_ugly_and_large_or_deeptemplate_struct_2<T>::type&)
{
   // body, that uses perhaps more times my
   // "some_ugly_and_large_or_deep_template_struct_2<T>"
} 
```

我怎样才能简化这个“类型”定义？例如使用任何新的 C++11 工具？我只认为是这样的：

```
template<typename T,
         typename aux = some_ugly_and_large_or_deep_template_struct_1<T>::type>
aux f(const aux&, const aux&)
{
  // body, that uses perhaps more times my
  // "aux" type
}

template<typename T,
         typename aux = some_ugly_and_large_or_deep_template_struct_2<T>::type>
aux g(const aux&, const aux&)
{
  // body, that uses perhaps more times my
  // "aux" type
} 
```

我用这种方法看到的问题是用户可以提供他自己的`aux`类型，而不是我想要的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T00:15:07.253

如果将其设为可变参数模板，则调用者无法定义以下列出的类型参数：

```
template<typename T,
         typename..., // firewall, absorbs all supplied arguments
         typename aux = some_ugly_and_large_or_deep_template_struct_1<T>::type>
aux f(const aux&, const aux&)
{
  // body, that uses perhaps more times my
  // "aux" type
} 
```

可选地，为了防止`f`使用太多模板参数意外调用，可以添加一个 static_assert：

```
template<typename T,
         typename... F,
         typename aux = some_ugly_and_large_or_deep_template_struct_1<T>::type>
aux f(const aux&, const aux&)
{
  static_assert(sizeof...(F)==0, "Too many template arguments");
  // body, that uses perhaps more times my
  // "aux" type
} 
```

通常，我可以忍受让用户定义类型`aux`，例如，作为返回类型，这可以为您节省演员。

或者您可以将 替换`static_assert`为`enable_if`：

```
template<typename T,
         typename... F, typename = typename std::enable_if<sizeof...(F)==0>::type,
         typename aux = some_ugly_and_large_or_deep_template_struct<T>::type,>
aux f(const aux&, const aux&)
{
  // body, that uses perhaps more times my                                               
  // "aux" type                                                                          
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T14:59:04.577

您可以在函数旁边声明模板别名：

```
template<typename T> using f_parameter
  = typename some_ugly_and_large_or_deep_template_struct<T>::type;

template<typename T>
f_parameter<T> f(const f_parameter<T>&, const f_parameter<T>&)
{
   f_parameter<T> param;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:52:30.390

一种可能的解决方案是将模板函数转换为`template struct`带有`operator()`. 例如：

```
#include <iostream>
#include <string>

template <typename T>
struct some_ugly_and_large_or_deep_template_struct
{
    typedef T type;
};

template <typename T>
struct f
{
    typedef typename some_ugly_and_large_or_deep_template_struct<T>::type aux;

    aux operator()(const aux& a1, const aux& a2)
    {
        return a1 + a2;
    }
};

int main()
{
    std::cout << f<int>()(4, 4) << "\n";
    std::cout << f<std::string>()("hello ", "world") << "\n";
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T15:02:56.593

你可以使用类似的东西

```
namespace f_aux {
   template <typename T> using type = 
            typename some_ugly_and_large_or_deep_template_struct<T>::type;
}

template <typename T>
f_aux::type<T> f(const f_aux::type<T>& , const f_aux::type<T>&); 
```

如果 f 的声明位于合适的命名空间或类中，则可能不需要额外的`f_aux`命名空间。

# objective-c - 如何在 NSSString 中指定爱情字符？

> ID：14648622
> 
> 赞同：1
> 
> 时间：2013-02-01T14:36:04.427
> 
> 标签：objective-c

如何在 NSSString 中指定[心脏字符？](http://keakaj.com/mac-heart.html)我正在实现一个网络协议，并希望将其作为心跳发送。

这是来自字符查看器的 Unicode 信息：

```
Unicode: U+1F493 (U+D83D U+DC93), UTF-8: F0 9F 92 93 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:39:05.887

最简单的方法是直接将它输入到 Xcode 中的字符串常量中：

```
NSString *heart = @""; 
```

如果您需要将其转换为特定编码的字节，请使用`NSData`，如下所示：

```
// Specify the encoding that you need
NSData* heartData = [heart dataUsingEncoding:NSUTF8StringEncoding]; 
```

有了一个`NSData`在手的实例，您可以访问它`bytes`并将`length`其复制到心跳消息中。

# java - Java同步：无阻塞锁定

> ID：14648627
> 
> 赞同：4
> 
> 时间：2013-02-01T14:36:30.640
> 
> 标签：java, concurrency, locking

我有一个同步练习，我需要同步一个读取方法，以便只要没有执行写入方法，任意数量的线程都可以执行它。这必须从头开始，所以我不能使用 java.util.concurrent.locks 等。

为此，我需要某种机制来保护，但不阻止读取方法，因此读取线程被写入阻塞，但不会被其他读取阻塞。我不能为此使用普通锁，因为在读取方法中调用锁方法会导致其他读取线程等待。

规则应该是这样的： 当一个线程在 write() 中时，其他线程不得进入 read() 或 write() 当线程在 read() 中时，其他线程不得进入 write()，但它们可以进入读（）

我已经尝试建造几个自制的锁来解决这个问题。WriteLock 是一个相当标准的可重入锁，除了如果正在执行读取它会阻塞（使用 readcounter）ReadLock 应该只导致线程等待，如果正在遍历 write()。否则，它应该简单地允许线程继续其业务并增加 WriteLocks 计数器。

代码：

```
package sync;

public class SyncTest {
    Long testlong = new Long(0L);
    int reads = 0;
    int writes = 0;
    WriteLock w = new WriteLock();
    ReadLock r = new ReadLock(w);

    public SyncTest() {
        // TODO Auto-generated constructor stub
    }

    public static void main(String args[]){

        final SyncTest s = new SyncTest();

        for(int i = 0 ; i<3 ; i++){ //Start a number of threads to attack SyncTest
            final int ifinal = i;
            new Thread(){
                int inc = ifinal;
                @Override
                public void run() {
                    System.out.println("Starting "+inc);
                    long starttime = System.currentTimeMillis();
                    try {
                    while(System.currentTimeMillis()-starttime < 10){

                        if (inc < 2){

                            s.readLong();

                        }else{
                            s.writeLong(inc+1);
                        }
                    }
                    System.out.println(inc + " done");
                    if(inc == 0){
                        Thread.sleep(1000);
                        System.out.println(s.reads+" "+s.writes);
                    }
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    // TODO Auto-generated method stub

                }
                @Override
                public String toString() {
                    // TODO Auto-generated method stub
                    return "Thread "+inc+" "+super.toString();
                }

            }.start();
        }
    }

    public Long readLong() throws InterruptedException{

        Long l;
        r.lock(); //Lock for reading
        //System.out.println("Read "+reads);
        l =  testlong;
        reads++;
        r.unlock(); //Unlock after reading
        return l;   
        }

    public void writeLong(int i) throws InterruptedException{

        w.lock(); //Lock for writing
        //System.out.println("Write "+writes);
        int curreads = reads;
        int curwrites = writes;
        testlong = testlong + i;
        writes++;

        Thread.sleep(100); //Simulate long write
        if(curreads != reads){
            System.out.println("Reads did not lock");
        }

        if(curwrites+1 != writes){
            System.out.println("Writes did not lock");
        }
        w.unlock(); //Unlock writing
    }

    protected class WriteLock{
        boolean isLocked = false;
        Thread lockedBy = null;
        int lockedCount = 0;
        int readers = 0; //The number of readers currently through the reading lock.

        public synchronized void lock() throws InterruptedException {
            System.out.println("Locking: "+Thread.currentThread());
            Thread callingThread = Thread.currentThread();
            while ((isLocked && lockedBy != callingThread) || readers > 0) { //Wait if locked or readers are in read()
                wait();
            }
            isLocked = true;
            lockedCount++;
            lockedBy = callingThread;
            System.out.println("Is locked: "+Thread.currentThread());
        }

        public synchronized void unlock() {
            //System.out.println("Unlocking: "+Thread.currentThread());
            if (Thread.currentThread() == this.lockedBy) {
                lockedCount--;

                if (lockedCount == 0) {
                    System.out.println("Is unlocked: "+Thread.currentThread());
                    isLocked = false;
                    notify();
                }
            }
        }

    }

    protected class ReadLock{
        WriteLock lock;

        public ReadLock(WriteLock lock) {
            super();
            this.lock = lock;
        }

        public synchronized void lock() throws InterruptedException { //If write() then wait
            System.out.println("Waiting to read: "+Thread.currentThread());
            Thread callingThread = Thread.currentThread();
            while (lock.isLocked && lock.lockedBy != callingThread) {
                wait();
            }
            lock.readers++; //Increment writelocks readers
            System.out.println("Reading: "+Thread.currentThread());

        }

        public synchronized void unlock() {
            lock.readers--; //Subtract from writelocks readers
            notify();
        }

    }

} 
```

但是，这不起作用，阅读锁的工作方式到目前为止它会在线程写入时锁定读者，但据我所知，当 WriteLock 解锁时它不会释放它们。

这只是在概念上不合理，还是我对显示器有什么不明白的地方？或者是其他东西？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T14:40:28.963

（在问题被编辑之前回答它是一个练习。）

听起来你想要一个[`ReadWriteLock`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html)实现。

> ReadWriteLock 维护一对关联的锁，一个用于只读操作，一个用于写入。只要没有写者，读锁可能被多个读线程同时持有。写锁是独占的。

一种实现是[`ReentrantReadWriteLock`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html).

特别是对于并发性，在您尝试实现自己的代码之前，总是值得查看现有的库（`java.util.concurrent`等）。如果您像我一样，即使您可以在并发方面使其*正确*，它也不会像专家编写的代码那样高效……当然，一切都是从工作开始的；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:03:25.353

您的 ReadLock 和 WriteLock 在不同的对象上同步，并在不同的对象上调用 wait 和 notify。

这允许 ReadLock 在 WriteLock 验证计数时修改 WriteLock 中的计数。它还会导致不同的锁不会从等待调用中唤醒。

如果您修改 ReadLock 以使用 WriteLock 作为监视器，您将获得更好的结果（我没有检查这是否是唯一的问题）

```
protected class ReadLock{
    WriteLock lock;

    public ReadLock(WriteLock lock) {
        super();
        this.lock = lock;
    }

    public void lock() throws InterruptedException { //If write() then wait
        synchronized (lock) {
           System.out.println("Waiting to read: "+Thread.currentThread());
           Thread callingThread = Thread.currentThread();
           while (lock.isLocked && lock.lockedBy != callingThread) {
               lock.wait();
           }
           lock.readers++; //Increment writelocks readers
           System.out.println("Reading: "+Thread.currentThread());
       }
    }

    public void unlock() {
        synchronized (lock) {
           lock.readers--; //Subtract from writelocks readers
           lock.notify();
        }
    }

} 
```

# xcode - Xcode的源代码控制“显示远程状态”菜单选项的目的和作用是什么？

> ID：14648629
> 
> 赞同：3
> 
> 时间：2013-02-01T14:36:40.933
> 
> 标签：xcode, git, menu, xcode4.5, git-remote

在 git 源代码控制下的项目中使用 Xcode 工作时，我注意到以下菜单项：

```
File > Source Control > Show Remote Status 
```

并且，当切换它时，它会变为：

```
File > Source Control > Hide Remote Status 
```

我确实为我正在处理的示例项目配置了一个 Bitbucket git 远程，但我无法弄清楚该菜单应该向我显示什么，或者在哪里！？当我切换它时，我的 Xcode 用户界面**没有可见的变化。**我**确实有一些更改***仅*提交到本地 git 存储库，尚未推送到远程，我期待在某处看到远程不是当前的，当“显示远程状态”打开时。

那么，Xcode 应该能够显示的“远程状态”信息是什么，*我*应该在*哪里寻找它？*这个特性是否等同于通常在 git 命令行上查询的东西——如果是，是什么？是否有我应该打开的窗口或面板才能查看此信息？我的导航器区域、调试区域和实用程序区域都可见。

我在 Xcode 文档、Stack Overflow 和 Google 中分别搜索了“显示远程状态”和“隐藏远程状态”，但没有一个结果特别有启发性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T06:51:56.147

我之前（还）没有使用过 Xcode，但由于 Git 是一个分布式版本控制系统，你的本地仓库可能与远程仓库不同步，即它们的状态可能会不同。这可能就是为什么您可以选择查看远程状态的原因，例如，它的任何分支是否已更新（即有新提交），是否有任何新分支，以及是否有分支已从中删除。

从命令行，您通常会通过运行`git fetch --prune <remote>`更新本地远程跟踪分支来获取此类信息，该分支跟踪远程分支的状态（当然！）。然后，您可以检查远程跟踪分支以查看远程 repo 的状态。

还有一个`git ls-remote <remote>`命令，它将执行网络操作以与远程通信并返回远程当前引用/分支的列表，但这更像是一个管道命令，并不真正适用于典型的 Git 用户，它更意味着供 Git 开发人员创建 Git 工具。

# html - html表格想了解更好的方法

> ID：14648634
> 
> 赞同：-4
> 
> 时间：2013-02-01T14:36:48.403
> 
> 标签：html, css

我有这个旧代码：

```
<html>
<head>
<body style="text-align:center;">
<style>
#wrapper{margin:0 auto; max-width:992px;}
</style>
<div id="wrapper">
<table border="1" width="100%" height="40px">
<tr>
<td>header</td>
</tr>
</table>
<table border="1" width="100%" height="50%">
<tr>
<td width="60%">Main Data Window</td>
<td width="40%">Right Side Buttons</td>
</tr>
</table>
<table border="1" width="100%" height="43%">
<tr>
<td>Bottom Buttons</td>
</tr>
</table>
</div>
</body>
</html> 
```

现在因为不推荐使用表高度（所以如果我将 DOCTYPE html 放在文件中，它会破坏它）什么将是获得相同结果的现代方法。

基本上我希望它在所有显示器和设备方向上都相同，因此它的大小相同。

非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T14:40:39.360

最好的办法是现在使用 CSS。您可以不使用以下内容内联它：

```
<table border="1" style="width:100%; height:40px; border:1px solid black;"> 
```

或者自己创建一个类并将其应用到表中。

```
.tbl1{
width:100%; 
height:40px; 
border:1px solid black;
}

<table class="tbl1"> 
```

注意：使用表格进行布局也是一种已弃用的处理方式。除非您显示实际的表格数据，否则我建议您使用 div、span 等。

# java - 将线程类中的字符串值附加到 jtextArea

> ID：14648635
> 
> 赞同：1
> 
> 时间：2013-02-01T14:36:54.360
> 
> 标签：java, multithreading, swing, jtextarea

我在 netbeans 中创建了一个服务器线程类，并使用 netbeans swing 自动生成的 Jframe 创建了一个调用该类的 GUI 应用程序。我想将线程类中的字符串值附加到我的 JtextArea，但我的 Jtextarea 上显示的值为 null 。未返回字符串请帮助我。代码示例如下

```
public class simpletestserver1 extends Thread {
String message,mess;
public void run(){
.
.//some coding here
.
.
DataOutputStream outToClient = new DataOutputStream(c.getOutputStream()); 
Scanner r = new Scanner(c.getInputStream());
outToClient.writeBytes(m+'\n');

mess=r.nextLine(); 
// THIS IS THE MESSAGE THAT NEEDS TO BE APPENDED TO 
// MY JTEXTAREA IN MY JFRAME CLASS 
```

现在我有另一个将数据发送到服务器的客户端线程。当程序在另一个动作事件上运行时，服务器线程已经开始监听。现在，一个按钮按下动作，我的客户端线程开始向我的服务器发送数据，文本应该附加到我的 JtextArea jframe 类如下：

```
package sdiappgui;
import java.util.*;
import javax.swing.JDialog;
import javax.swing.JOptionPane;
import java.awt.Window;
import java.security.NoSuchAlgorithmException;
import java.util.logging.Level; 
import java.util.logging.Logger;
public class SendEmail extends javax.swing.JFrame {
public SendEmail() {
initComponents();
}
. //some coding here for other generated components
.at this point my server thread has already started on a previously clicked button    action and it is already listening ,i start my client thread and the data sent to server should be appended to my jtextarea
.
private void jButton3ActionPerformed(java.awt.event.ActionEvent evt)     {                                         
// TODO add your handling code here: 
final simpletestserver1 th1=new simpletestserver1();  
final simpletestclient1 th2=new simpletestclient2();                    
javax.swing.SwingUtilities.invokeLater(new Runnable() {
              @Override
        public void run() {
            th2.start();
            jTextArea2.append("received: " +th1.mess +'\n');     
        }
    });
} 
```

但是我的 jtextarea 没有收到客户端返回的任何字符串。当我运行程序时，jtextArea 上会显示一个空值。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:45:14.167

没有代码可以检查客户端线程是否*已经*接收到字符串。当您在启动客户端线程时立即获取字段值，它更有可能尚未完成，而是采用初始值 null。

将`SwingUtilities.invokeLater`调用移到分配变量的行之后`run`的线程方法中。从那里移除。`th1``mess``th1.start()`

```
// Inside th2.run method:
mess=r.nextLine(); 
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        jTextArea2.append("received: " +th2.mess +'\n');     
    }
 });
}

public SendEmail() {
  initComponents();
  th2.start();
} 
```

# php - 后缀在 php 中可用

> ID：14648639
> 
> 赞同：-1
> 
> 时间：2013-02-01T14:37:13.493
> 
> 标签：php

大家好，我正在尝试查找**php 中可用的后缀**列表，例如 .php/.phtml，谢谢大家，祝您有愉快的一天。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:40:11.290

*   .php
*   .php3
*   .php4
*   .php5
*   .phtml
*   .html
*   .asp
*   。约翰
*   。任何。

这完全取决于您的服务器的配置方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:01:33.317

这通常在 Apache 配置文件 - httpd.conf 中完成（在我的情况下，在位于 /usr/local/apache/conf/httpd.conf 的 unix 系统上）

[请参阅http://www.php.net/manual/en/install.unix.apache2.php](http://www.php.net/manual/en/install.unix.apache2.php)的第 8 点

从我的配置：

```
<FilesMatch \.php$>
    SetHandler application/x-httpd-php
</FilesMatch>

AddType application/x-httpd-php .php .wphp 
```

您还可以使用 mod_rewrite 来说出由 PHP 解析的 html url/链接，而无需更改 apache 配置，只需编辑 .htaccess 文件，例如：

```
# normal job link http://example.com/design/design_manager.JOB406359.html
RewriteRule ^(.+)\.JOB([0-9]+)\.html$                  php/view_job.php?job_id=$2  [L] 
```

# git - 使用 git 了解 dev/prod 部署

> ID：14648645
> 
> 赞同：0
> 
> 时间：2013-02-01T14:37:36.423
> 
> 标签：git, deployment, branch

我已经阅读了很多关于 git 分支模型的内容，并且很确定我了解其背后的过程。因此，我一直在将我对网站（使用 PHP）的所有更改推送到集中式存储库（来源）。这只是一个裸存储库。但是，我想将此代码放入测试环境。推荐的处理方法是什么？我已经阅读了很多文章，这些文章只是将 git 工作树检出到 web 根目录，但我希望它更干净。这似乎不适用于从事该项目的多个开发人员。这对于生产方面也是如此。有一个我从原产地拉入的非裸机有意义吗？

非常感谢任何有助于我朝着正确方向前进的见解/评论/想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:16:47.887

听起来你在做 PHP，所以我会从这个角度回答。

我现在建立了一个项目，其中包含两个主要分支，`master`并且`develop`. 所有已完成的功能都`develop`与.`develop``master`

对于您的部署问题，我建议您不要只签出 Web 根目录，因为这也会将存储库详细信息放在该目录中，而该目录不应该存在，理论上可能会导致合并问题或意外覆盖生产数据的几率更高在存储库中，例如配置文件或保存的 PDF 或其他内容。如果处理不当，这也是一个可能的安全问题。

我建议使用[Phing 之](http://www.phing.info/)类的东西进行部署。使用 Phing，我可以从命令行运行`phing test-release`并拥有它：

1.  结帐`develop`并确保它是最新的
2.  将我要部署的文件移动到目录树，因为它将出现在服务器上
3.  SSH 文件到测试服务器
4.  将所有测试配置文件移动到适当的位置
5.  运行任何需要运行的数据库迁移
6.  将`develop`分支推到`origin`
7.  将`develop`分支推送到我的个人备份存储库

这样做的好处是，一旦设置它就非常容易运行，而且我已经知道它不会覆盖任何我不想要的东西。我还复制了相同的脚本，更改了一些目录路径和 git 分支名称，并有一个`phing www-release`. 如果将来需要，您还可以为集成服务器做好准备（即使您使用 PHP，这仍然是一个好主意）。

我想，关键是 git 不是一个部署工具，如果你尝试以这种方式将它用于任何非平凡的应用程序，以后可能会让人头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:45:45.583

对于多开发项目，IMO 最好/最简单的方法是为组的每个部分和/或成员创建一个分支，并让他们在那里提交更改。一旦完成了项目的给定部分，或者完成并测试了分支上的更改，您可以将它们合并回主节点（我假设您的意思是“orgin”）。所以，长话短说，我会为每个开发人员或项目创建分支，然后将您的更改提交到分支，一旦完成分支与 master 合并。但是，这只是我对应用程序开发和 Java 工作的看法/经验，根据您的项目，可能会有更好的方法。干杯和好运！

编辑：对于 Windows，我喜欢 TortoiseGit，我认为 GUI 对新用户有点帮助。

*   [https://tortoisegit.org/](https://tortoisegit.org/)

对于 OSX，我喜欢/每天使用 SourceTree：

*   [http://www.sourcetreeapp.com/](http://www.sourcetreeapp.com/)

# xslt - 数学结果是科学浮点数，不能再用它计算

> ID：14648647
> 
> 赞同：0
> 
> 时间：2013-02-01T14:37:39.170
> 
> 标签：xslt, mono, scientific-notation

我正在尝试制作一个可以通过四元数将位置（vector3）转换为新位置的xslt。我已经进行了以下设置，但我正在检索`NaN`接近 0 的非常小的值。如何使用从四元数到右向量计算的值进一步计算？

```
<xsl:template name="object_markingtape_position">
  <xsl:param name="sign"/> <!-- left or right (-1 or 1) -->
  <xsl:param name="quaternion"/> <!-- quaternion in x,y,z,w -->
  <xsl:variable name="rightvec">
    <xsl:call-template name="QuatToRight">
      <xsl:with-param name="x" select="$quaternion/ns:x"/>
      <xsl:with-param name="y" select="$quaternion/ns:y"/>
      <xsl:with-param name="z" select="$quaternion/ns:z"/>
      <xsl:with-param name="w" select="$quaternion/ns:w"/>
    </xsl:call-template>
  </xsl:variable>

  Right vector y: <xsl:value-of select="number($rightvec/y)"/> <!-- results in a value with 1.5435434E-04 -->
  <xsl:element name="position" namespace="{$ns}">
    <xsl:element name="x" namespace="{$ns}">
      <xsl:value-of select="$sign * 1.5 * $rightvec/x + ns:position/ns:x"/>
    </xsl:element>
    <xsl:element name="y" namespace="{$ns}"> <!-- results into NaN -->
      <xsl:value-of select="$sign * 1.5 * $rightvec/y + ns:position/ns:y"/>
    </xsl:element>
    <xsl:element name="z" namespace="{$ns}">
      <xsl:value-of select="$sign * 1.5 * $rightvec/z + ns:position/ns:z"/>
    </xsl:element>
  </xsl:element>
</xsl:template>

<!-- Functionality for calculating the vectors from a quaternion -->
<!-- From http://nic-gamedev.blogspot.nl/2011/11/quaternion-math-getting-local-axis.html -->
<xsl:template name="QuatToRight">
  <xsl:param name="x"/>
  <xsl:param name="y"/>
  <xsl:param name="z"/>
  <xsl:param name="w"/>
  <xsl:element name="vec3">
    <xsl:element name="x">
      <xsl:value-of select="1 - 2 * ($x * $y - $w * $z)"/>
    </xsl:element>
    <xsl:element name="y">
      <xsl:value-of select="2 * ($x * $y + $w * $z)"/> 
    </xsl:element>
    <xsl:element name="z">
      <xsl:value-of select="2 * ($x * $z - $w * $y)"/>
    </xsl:element>
  </xsl:element>
</xsl:template> 
```

可以输入的 xml 值的示例如下：

```
<Item>
  <position>
    <x>-106.6172</x>
    <y>0.780673563</y>
    <z>-13.0446815</z>
  </position>
  <rotation> <!-- this is where the quaternion param is filled with -->
    <x>0.0810996</x>
    <y>0.354339659</y>
    <z>-0.207844481</z>
    <w>-0.908111751</w>
  </rotation>
</Item> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:06:15.887

如果您找不到更好的解决方案，您可能不得不求助于使用扩展功能。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:quat="urn:myExtension" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="quat msxsl" version="1.0">
<xsl:param name="x"/>
<xsl:param name="y"/>
<xsl:param name="z"/>
<xsl:param name="w"/> 

<xsl:template match="*">
    <xsl:value-of select="quat:calcQuat($x, $y, $z, $w)"/>
</xsl:template>

<msxsl:script implements-prefix="quat" language="c#">
    <![CDATA[       
    public string calcQuat(double x, double y, double z, double w)
    {           
        double result = 1 - 2 * (x * y - w * z)
        return Double.ToString(result)
    }      

    ]]>
</msxsl:script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:14:19.090

我可以看到三个问题：

*   该变量`rightvec`包含一个 XML 片段，但随后用作节点集 - 这需要转换才能正常工作（但它取决于 XSLT 处理器）

*   命名模板`object_markingtape_position`引用当前上下文中的元素`ns:position`，因此其结果取决于调用它的位置 - 最好将位置作为参数传递；

*   命名的 tamplate`QuatToRight`生成一个`vec3`包含具有值的子元素的元素，但随后使用其结果，就好像没有`vec3`中间元素一样。

使用 .NET XSLT 处理器，此 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
  <xsl:output method="xml" indent="yes"/>

  <xsl:template name="object_markingtape_position">
    <xsl:param name="sign"/> <!-- left or right (-1 or 1) -->
    <xsl:param name="quaternion"/> <!-- quaternion in x,y,z,w -->
    <xsl:param name="position"/> <!-- position in x,y,z -->
    <xsl:variable name="rightvecFragment">
      <xsl:call-template name="QuatToRight">
        <xsl:with-param name="x" select="$quaternion/x"/>
        <xsl:with-param name="y" select="$quaternion/y"/>
        <xsl:with-param name="z" select="$quaternion/z"/>
        <xsl:with-param name="w" select="$quaternion/w"/>
      </xsl:call-template>
    </xsl:variable>
    <xsl:variable name="rightvec" select="msxsl:node-set($rightvecFragment)"/>

    <xsl:element name="position">
      <xsl:element name="x">
        <xsl:value-of select="$sign * 1.5 * $rightvec/x + $position/x"/>
      </xsl:element>
      <xsl:element name="y">
        <!-- results into NaN -->
        <xsl:value-of select="$sign * 1.5 * $rightvec/y + $position/y"/>
      </xsl:element>
      <xsl:element name="z">
        <xsl:value-of select="$sign * 1.5 * $rightvec/z + $position/z"/>
      </xsl:element>
    </xsl:element>
  </xsl:template>

  <!-- Functionality for calculating the vectors from a quaternion -->
  <!-- From http://nic-gamedev.blogspot.nl/2011/11/quaternion-math-getting-local-axis.html -->
  <xsl:template name="QuatToRight">
    <xsl:param name="x"/>
    <xsl:param name="y"/>
    <xsl:param name="z"/>
    <xsl:param name="w"/>
    <xsl:element name="x">
      <xsl:value-of select="1 - 2 * ($x * $y - $w * $z)"/>
    </xsl:element>
    <xsl:element name="y">
      <xsl:value-of select="2 * ($x * $y + $w * $z)"/>
    </xsl:element>
    <xsl:element name="z">
      <xsl:value-of select="2 * ($x * $z - $w * $y)"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="/*">
    <xsl:call-template name="object_markingtape_position">
      <xsl:with-param name="sign" select="1"/>
      <xsl:with-param name="position" select="position"/>
      <xsl:with-param name="quaternion" select="rotation"/>
    </xsl:call-template>
  </xsl:template>

</xsl:stylesheet> 
```

应用于示例输入会产生：

```
<position>
  <x>-104.63717236709732</x>
  <y>1.4331220235568977</y>
  <z>-12.129909788264223</z>
</position> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:25:53.063

我通过一些数据丢失解决了这个问题，但这是迄今为止最干净的解决方案。我用过`format-number()`。

```
<xsl:template name="QuatToRight">
  <xsl:param name="x"/>
  <xsl:param name="y"/>
  <xsl:param name="z"/>
  <xsl:param name="w"/>
  <xsl:element name="vec3">
    <xsl:element name="x">
      <xsl:value-of select="format-number(1 - 2 * ($x * $y - $w * $z),'0.000000')"/>
    </xsl:element>
    <xsl:element name="y">
      <xsl:value-of select="format-number(2 * ($x * $y + $w * $z),'0.000000')"/> 
    </xsl:element>
    <xsl:element name="z">
      <xsl:value-of select="format-number(2 * ($x * $z - $w * $y),'0.000000')"/>
    </xsl:element>
  </xsl:element>
</xsl:template> 
```

# javascript - iPhone 使用 JavaScript 协调和点击

> ID：14648650
> 
> 赞同：0
> 
> 时间：2013-02-01T14:37:41.010
> 
> 标签：javascript, iphone

我有几个 js 查询。

Onclick 不适用于 iPhone，尽管它在其他地方很好。

JavaScript：

```
document.onclick = function(){newTarg(speedS)}; 
```

关于这一点的任何想法，可能会考虑 onchange 但不确定如何最好地实施？

另外我正在尝试获取触摸坐标，请帮助，到目前为止代码如下。

JavaScript：

```
event = window.event;   
xTarg = event.clientX;
yTarg = event.clientY; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:38:36.987

点击事件在 iOS 上不起作用使用 touchstart、touchmove 和 touchend 事件来判断用户是否点击了屏幕。

下面的 JavaScript：

```
 var tap = true;
   document.addEventListener('touchstart',function(e) {
      tap = true;
   });
   document.addEventListener('touchmove',function(e) {
     tap = false;
   });
   document.addEventListener('touchend',function(e) {
      if(tap) {
         //users tapped the screen
      }
   }); 
```

对于用户坐标，使用 changedTouches 对象来查看用户在页面上点击的位置。

JavaScript：

```
 var tap = true;
   document.addEventListener('touchstart',function(e) {
      tap = true;
   });
   document.addEventListener('touchmove',function(e) {
     tap = false;
   });
   document.addEventListener('touchend',function(e) {
      if(tap) {
         var touch = e.changedTouches[0];
         var pageX = touch.pageX;
         var pageY = touch.pageY;
      }
   }); 
```

希望有帮助

# android - 创建自定义时间选择器

> ID：14648652
> 
> 赞同：1
> 
> 时间：2013-02-01T14:37:44.837
> 
> 标签：android, timepicker

我需要创建一个包含秒数的自定义时间选择器。Android 中是否有可用于每个输入控件（小时、分钟和秒）的通用控件？它的外观和功能类似于带有 +/- 按钮的 TimePicker。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:05:46.417

有一个[带有 second 的开源时间选择器](https://github.com/IvanKovac/TimePickerWithSeconds)。

[否则，您应该使用 Time-class 和三个NumberPickers](http://developer.android.com/reference/android/widget/NumberPicker.html)创建自己的日期选择器。

# vbscript - 使用代理的 SFTP 传输？

> ID：14648658
> 
> 赞同：0
> 
> 时间：2013-02-01T14:38:05.740
> 
> 标签：vbscript, winscp

可以修改以下 WinSCP VBScript 文件以允许代理连接吗？

```
'###########################################################################
'# Function: MISC_FTPUpload
'#
'# Description:
'#  Uses the FSO object to FTP a file to a remote server
'#
'# Parameters:
'#    (in) sSite             - The site to FTP to
'#    (in) sUsername        - The username to log in with
'#    (in) sPassword        - The password to log in with
'#    (in) sLocalFile        - The Locally stored file to FTP to the remote server
'#    (in) sRemotePath    - The path to store the file in, on the remote server
'#
'#    (out) - sError - The error output 
'#
'# Return:
'#  True  - File successfully sent
'#  False - File not successfully sent
'###########################################################################

Function MISC_FTPUpload(byVal sSite, byVal sUsername, byVal sPassword, byVal sLocalFile, byVal sRemotePath, byRef sError)
'This script is provided under the Creative Commons license located
'at http://creativecommons.org/licenses/by-nc/2.5/ . It may not
'be used for commercial purposes with out the expressed written consent
'of NateRice.com

    Const OpenAsDefault = -2
    Const FailIfNotExist = 0
    Const ForReading = 1
    Const ForWriting = 2
    Dim oFTPScriptFSO
    Dim oFTPScriptShell
    Dim sOriginalWorkingDirectory
    Dim sFTPScript
    Dim sFTPTemp
    Dim bRetCode
    Dim sFTPTempFile
    Dim oFTPScript
    Dim sResults
    Dim sOut
    Dim sCmd

    LOG_Write "MISC_FTPUpload called at: " & Now

    Set oFTPScriptFSO = CreateObject("Scripting.FileSystemObject")
    Set oFTPScriptShell = CreateObject("WScript.Shell")

    sRemotePath = Trim(sRemotePath)
    sLocalFile = Trim(sLocalFile)

    '----------Path Checks---------
    'Here we will check the path, if it contains
    'spaces then we need to add quotes to ensure
    'it parses correctly.
    If InStr(sRemotePath, " ") > 0 Then
        If Left(sRemotePath, 1) <> """" And Right(sRemotePath, 1) <> """" Then
              sRemotePath = """" & sRemotePath & """"
        End If
    End If

    If InStr(sLocalFile, " ") > 0 Then
        If Left(sLocalFile, 1) <> """" And Right(sLocalFile, 1) <> """" Then
              sLocalFile = """" & sLocalFile & """"
        End If
    End If

    'Check to ensure that a remote path was
    'passed. If it's blank then pass a "\"
    If Len(sRemotePath) = 0 Then
        'Please note that no premptive checking of the
        'remote path is done. If it does not exist for some
        'reason, Unexpected results may occur.
        sRemotePath = "\"
    End If

    'Check the local path and file to ensure
    'that either the a file that exists was
    'passed or a wildcard was passed.
    If InStr(sLocalFile, "*") Then
        If InStr(sLocalFile, " ") Then
            sError = "Error: Wildcard uploads do not work if the path contains a space." & vbNewLine & "This is a limitation of the Microsoft FTP client."
              LOG_Write sError
              MISC_FTPUpload = False
              Exit Function
        End If
    ElseIf Len(sLocalFile) = 0 Or Not oFTPScriptFSO.FileExists(sLocalFile) Then
        'nothing to upload
        sError = "Error: File Not Found."
        LOG_Write sError
        MISC_FTPUpload = False
        Exit Function
    End If
    '--------END Path Checks---------

    'build input file for ftp command
    sFTPScript = sFTPScript & "option batch on" & vbCRLF
    sFTPScript = sFTPScript & "option confirm off"& vbCrLf  
    sFTPScript = sFTPScript & "option transfer binary" & vbCrLf
    sFTPScript = sFTPScript & "open sftp://" & sUsername & ":" & sPassword & "@" & sSite & vbCrLf
    sFTPScript = sFTPScript & "cd " & sRemotePath & vbCrLf
    sFTPScript = sFTPScript & "put " & sLocalFile & vbCRLF
    sFTPScript = sFTPScript & "close" & vbCrLf
    sFTPScript = sFTPScript & "exit" & vbCrLf

    LOG_Write "Script for FTP File: " & vbNewLine & sFTPScript

    sFTPTemp = oFTPScriptShell.ExpandEnvironmentStrings("%TEMP%")
    sFTPTempFile = sFTPTemp & "\" & oFTPScriptFSO.GetTempName
    LOG_Write "FTP Input file stored at: " & sFTPTempFile

    'Write the input file for the ftp command
    'to a temporary file.
    Set oFTPScript = oFTPScriptFSO.CreateTextFile(sFTPTempFile, True)
    oFTPScript.WriteLine(sFTPScript)
    oFTPScript.Close
    Set oFTPScript = Nothing  

    sCmd = """C:\Program Files\WinSCP\WinSCP.com"" -script=" & sFTPTempFile 
    MISC_RunCmd sCmd, sOut, sError
    LOG_Write sOut

    Wscript.Sleep 1000

    ' Get rid of temp file used for input to sftp
    oFTPScriptFSO.DeleteFile(sFTPTempFile)

    'Check results of transfer.    
    If sError = ""  And InStr(sOut, "binary") >0  And InStr(sOut, "100%") >0 Then
        MISC_FTPUpload = True
    Else
        sError = "Error: " & sError
        LOG_Write sError
        MISC_FTPUpload = False 
    End If

    Set oFTPScriptFSO = Nothing
    Set oFTPScriptShell = Nothing
End Function

'###########################################################################
'# Function: MISC_FTPDownload
'#
'# Description:
'#  Uses the FSO object to FTP a file from a remote server
'#
'# Parameters:
'#    (in) sSite             - The site to FTP from
'#    (in) sUsername        - The username to log in with
'#    (in) sPassword        - The password to log in with
'#    (in) sLocalPath        - The path to store the file in, on the local drive
'#    (in) sLocalPath        - The path to get the file from, on the remote drive
'#    (in) sRemoteFile    - The remotely stored file to FTP to the local drive
'#
'#    (out) - sError - The error output 
'#
'# Return:
'#  True  - File successfully retrieved
'#  False - File not successfully retrieved
'###########################################################################

Function MISC_FTPDownload(byVal sSite, byVal sUsername, byVal sPassword, byVal sLocalPath, byVal sRemotePath, byVal sRemoteFile, byRef sError)
'This script is provided under the Creative Commons license located
'at http://creativecommons.org/licenses/by-nc/2.5/ . It may not
'be used for commercial purposes with out the expressed written consent
'of NateRice.com

    Const OpenAsDefault = -2
    Const FailIfNotExist = 0
    Const ForReading = 1
    Const ForWriting = 2
    Dim oFTPScriptFSO
    Dim oFTPScriptShell
    Dim sOriginalWorkingDirectory
    Dim sFTPScript
    Dim sFTPTemp
    Dim sFTPTempFile
    Dim bRetCode
    Dim oFTPScript
    Dim sResults
    Dim sCmd
    Dim sOut

    LOG_Write "MISC_FTPDownload called at: " & Now

    Set oFTPScriptFSO = CreateObject("Scripting.FileSystemObject")
    Set oFTPScriptShell = CreateObject("WScript.Shell")

    sRemotePath = Trim(sRemotePath)
    sLocalPath = Trim(sLocalPath)

    '----------Path Checks---------
    'Here we will check the remote path, if it contains
    'spaces then we need to add quotes to ensure
    'it parses correctly.
    If InStr(sRemotePath, " ") > 0 Then
        If Left(sRemotePath, 1) <> """" And Right(sRemotePath, 1) <> """" Then
            sRemotePath = """" & sRemotePath & """"
        End If
    End If

    'Check to ensure that a remote path was
    'passed. If it's blank then pass a "\"
    If Len(sRemotePath) = 0 Then
        'Please note that no premptive checking of the
        'remote path is done. If it does not exist for some
        'reason. Unexpected results may occur.
        sRemotePath = "\"
    End If

    'If the local path was blank. Pass the current
    'working direcory.
    If Len(sLocalPath) = 0 Then
        sLocalPath = oFTPScriptShell.CurrentDirectory
    End If

    If Not oFTPScriptFSO.FolderExists(sLocalPath) Then
        'destination not found
        sError = "Error: Local Folder Not Found."
        LOG_Write sError
        MISC_FTPDownload = False
        Exit Function
    End If

    sOriginalWorkingDirectory = oFTPScriptShell.CurrentDirectory
    oFTPScriptShell.CurrentDirectory = sLocalPath
    '--------END Path Checks---------

    'build input file for ftp command
    sFTPScript = sFTPScript & "option batch on" & vbCRLF
    sFTPScript = sFTPScript & "option confirm off"& vbCrLf
    sFTPScript = sFTPScript & "option transfer binary" & vbCrLf
    sFTPScript = sFTPScript & "open sftp://" & sUsername & ":" & sPassword & "@" & sSite & vbCrLf
    sFTPScript = sFTPScript & "cd " & sRemotePath & vbCrLf
    sFTPScript = sFTPScript & "get " & sRemoteFile & vbCRLF
    sFTPScript = sFTPScript & "close" & vbCrLf
    sFTPScript = sFTPScript & "exit" & vbCrLf

    LOG_Write "Script for FTP File: " & vbNewLine & sFTPScript

    sFTPTemp = oFTPScriptShell.ExpandEnvironmentStrings("%TEMP%")
    sFTPTempFile = sFTPTemp & "\" & oFTPScriptFSO.GetTempName
    LOG_Write "FTP Input file stored at: " & sFTPTempFile

    'Write the input file for the ftp command
    'to a temporary file.
    Set oFTPScript = oFTPScriptFSO.CreateTextFile(sFTPTempFile, True)
    oFTPScript.WriteLine(sFTPScript)
    oFTPScript.Close
    Set oFTPScript = Nothing  

    sCmd = """C:\Program Files\WinSCP\WinSCP.com"" -script=" & sFTPTempFile 
    MISC_RunCmd sCmd, sOut, sError
    LOG_Write sOut

    Wscript.Sleep 1000

    ' Get rid of temp file used for input to sftp
    oFTPScriptFSO.DeleteFile(sFTPTempFile)

    'Check results of transfer.    
    If sError = ""  And InStr(sOut, "binary") >0  And InStr(sOut, "100%") >0 Then
        MISC_FTPDownload = True
    Else
        sError = "Error: " & sError
        LOG_Write sError
        MISC_FTPDownload = False 
    End If

    Set oFTPScriptFSO = Nothing
    Set oFTPScriptShell = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:49:44.473

为此，代理人必须充当[中间人](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)。[SSH](http://en.wikipedia.org/wiki/Secure_Shell)（[SCP](http://en.wikipedia.org/wiki/Secure_copy)用于数据传输的协议）旨在防止这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:12:16.290

On the line, where you add the `open` command:

```
sFTPScript = sFTPScript & "open sftp://" & sUsername & ":" & sPassword & "@" & sSite & vbCrLf 
```

... add the `-rawsettings` switch followed by the options relevant for your kind of proxy:

For example:

```
sFTPScript = ... & " -rawsettings ProxyMethod=3 ProxyHost=proxy" & vbCrLf 
```

For details refer to:
[https://winscp.net/eng/docs/scriptcommand_open](https://winscp.net/eng/docs/scriptcommand_open)
[https://winscp.net/eng/docs/rawsettings](https://winscp.net/eng/docs/rawsettings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T13:00:15.370

要使用代理，首先使用 WINSCP GUI 连接指定代理详细信息。这将在配置文件（与 winscp.com 位于同一目录中）中添加代理的详细信息，然后它应该可以工作。然后，您可以将此配置文件的路径传递给您的执行过程任务并调用 WINSCP.com 可执行文件。

# android - Android - 在 NinePatchDrawable 中获取可拉伸区域的尺寸

> ID：14648669
> 
> 赞同：0
> 
> 时间：2013-02-01T14:38:34.940
> 
> 标签：android, resources, nine-patch

如何获得 9patch 图像可拉伸/内容区域的尺寸？我找不到合适的方法。我得到的最接近的值是 getPadding() 的结果。顶部/左侧坐标对应于内容区域，但底部/右侧具有相同的值。

```
NinePatchDrawable image = NinePatchDrawable.class.cast(getResources().getDrawable(R.drawable.my_frame));
Rect p = new Rect();
image.getPadding(p);
Log.d("9PATCH", p.toString(); 
```

我得到：“矩形（9, 9 - 9, 9）”

# python - 如何从带有 python 的文件中获取 clamav 数据库中的十六进制签名

> ID：14648680
> 
> 赞同：0
> 
> 时间：2013-02-01T14:39:27.967
> 
> 标签：python, database, hex, virus

如何从如下所示的文件中获取十六进制签名：

```
 Exploit.HTML.ObjectType:3:*:3c6f626a65637420747970653d222f2f2f2f2f2f2f2f2f2f2f2f
    HTML.Phishing.Bank-1:3:*:3c6d6170206e616d653d22{-36}223e3c6172656120636f6f7264733d22302c20302c20{4-12}222073686170653d22726563742220687265663d22{-160}3c2f6d61703e3c696d67207372633d226369643a
    Exploit.HTML.MHTRedir.1n:3:*:6d732d6974733a6d68746d6c3a66696c653a2f2f633a5c*21687474703a2f2f
    Exploit.HTML.MHTRedir.2n:3:*:646174613d226d732d6974733a6d68746d6c3a66696c653a2f2f(63|64)3a5c
    Exploit.HTML.MHTRedir.3n:3:*:7372633d226d732d6974733a6d68746d6c3a66696c653a2f2f633a5c
    Exploit.HTML.DragDrop:3:*:6265686176696f723a75726c282364656661756c7423616e63686f72636c69636b293b*666f6c6465723d227368656c6c3a
    HTML.Phishing.Bank-4:3:*:7468697320656d61696c20697320666f72206e6f74696669636174696f6e206f6e6c792e20746f20636f6e746163742075732c20706c65617365206c6f6720696e746f20796f7572206163636f756e7420616e642073656e6420612062616e6b206d61696c2e203c2f7072653e
    W32.MyLife.E:1:*:7a6172793230*40656d61696c2e636f6d 
```

我知道签名从第三个'：'开始，
我正在尝试使用 clamav 数据库在 python 中制作一个简单的病毒扫描程序，但我无法从数据库中获得签名......我已经尝试过 binascii.hexlify（ file.read()) 但它给出了一个长的十六进制字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:55:41.033

一种方法是这样做。它可以写得更短，但我认为这更清楚。

```
f=open('clamavfile','r')
signatures={}
for l in f.readlines():
    data=l.strip().split(':') #strip whitespace from the line, and split by :
    signatures[data[0]]=data[-1] # the filename is the first item, the signature is the last item 
```

如果仅按 : 拆分还不够，您也可以使用 re 模块。

# android - 当视图更改为自定义视图的横向时，活动重新启动

> ID：14648681
> 
> 赞同：0
> 
> 时间：2013-02-01T14:39:29.043
> 
> 标签：android, android-layout

我面临一个小问题。在我的应用程序中，我试图为音频流应用程序提供纵向和横向视图，其中我使用自定义视图在布局上显示可视化器。我创建了两个文件夹，一个是 layout，另一个是 layout-land，我将 xml 放入其中，名称相同，但代码的大小、宽度发生了变化。

我还添加了 `android:configChanges="orientation|keyboardHidden" 但是当我旋转手机时，方向更改为横向，但 xml 仅从默认布局显示.. 它不需要 layout-land xml 来显示横向模式.

因为我正在使用自定义视图在我的陆地和端口 xml 上显示可视化工具，所以我的媒体播放器对象连接到 XML，当我改变方向时，媒体播放器对象被重新创建并开始播放音乐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:48:10.490

请参考 developer.android.com 指定：

**android:configChanges** 列出活动将自行处理的配置更改。当运行时发生配置更改时，默认情况下会关闭并重新启动 Activity，但使用此属性声明配置会阻止 Activity 重新启动。相反，活动保持运行并调用其 onConfigurationChanged() 方法。

由于您已指定 android:configChanges="orientation"，这意味着您的活动本身将处理来自 onConfigurationChanged() 的方向更改。

从清单中删除 android:configChanges。你的问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:47:40.707

写的时候，

```
android:configChanges="orientation|keyboardHidden" 
```

您的活动没有重新创建，因此它没有从 layout-land 文件夹加载 xml。如果要从 layout-land 文件夹加载 xml，则必须手动更改覆盖`onConfigurationChanged()`并自己处理配置更改。看看我的回答[`here`](https://stackoverflow.com/a/7749727/726863)。

# c# - jqPlot，在 x 轴上绘制日期，在 y 轴上绘制时间

> ID：14648685
> 
> 赞同：0
> 
> 时间：2013-02-01T14:39:38.560
> 
> 标签：c#, coffeescript, jqplot

我正在尝试使用 jqPlot 绘制某人完成某事所需的时间。在 xaxis 上，我的日期显示正确。但是，在 yaxis 上，我想显示小时、分钟、秒。无论我尝试什么，它都无法正确显示。

下面的屏幕截图显示了 y 轴上的刻度映射。

![](../Images/6c3b49be99a68f57df1ed88021efc85c.png)

这是咖啡脚本...

```
 $.jqplot(
        "elemid"
        [["2013-02-01 01:30:28 AM", 97640000],["2013-02-01 01:31:38 AM", 166270000]]
        axes:
            xaxis:
                min: data.XAxisMin
                max: data.XAxisMax
                tickInterval: "1 month"
                tickOptions:
                    formatString: "%b %#d"
                renderer: $.jqplot.DateAxisRenderer
            yaxis:
                min: 0
                #tickOptions:
                     #formatString: "%#Mm"
                tickRenderer: $.jqplot.canvasAxisTickRenderer
                #renderer: $.jqplot.DateAxisRenderer
        highlighter:
            show: true
            sizeAdjust: 7.5
        series:
            lineWidth: 4
            label: series.Label
            markerOptions: 
                style: "square"
    ) 
```

这是转换为 JavaScript 的 CoffeeScript ......

```
$.jqplot("elemid", [["2013-02-01 01:30:28 AM", 97640000], ["2013-02-01 01:31:38 AM", 166270000]], {
  axes: {
    xaxis: {
      min: data.XAxisMin,
      max: data.XAxisMax,
      tickInterval: "1 month",
      tickOptions: {
        formatString: "%b %#d"
      },
      renderer: $.jqplot.DateAxisRenderer
    },
    yaxis: {
      min: 0,
      tickRenderer: $.jqplot.canvasAxisTickRenderer
    }
  },
  highlighter: {
    show: true,
    sizeAdjust: 7.5
  },
  series: {
    lineWidth: 4,
    label: series.Label,
    markerOptions: {
      style: "square"
    }
  }
}); 
```

我创建了一个 jsfiddle，但我似乎无法让它运行。我以前从未使用过 jsfiddle，所以我确定我做错了什么......

[http://jsfiddle.net/uM8yu/5/](http://jsfiddle.net/uM8yu/5/)

我已经在 yaxis 上尝试了 DateAxisRenderer，但是时间本身并不是真正的日期/时间，而只是需要某人完成的小时、分钟、秒。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:02:25.920

当您配置您的`yaxis`时，您还需要指定`tickOptions`：

```
tickOptions: {
    formatter: function(format, value){
        return MillisecondsToDuration(value);
    }
} 
```

这将在每次呈现刻度时执行该`MillisecondsToDuration`方法（改编自[JavaScript 中的计算时间跨度）。](https://stackoverflow.com/questions/141136/calculate-timespan-in-javascript)

```
function MillisecondsToDuration(n) {
    var dtm = new Date();
    dtm.setTime(n);

    var hours = Math.floor(n / 3600000);
    var minutes = dtm.getMinutes();
    var seconds = dtm.getSeconds();

    return $.jqplot.sprintf('%02d:%02d:%02d', hours, minutes, seconds);        
} 
```

上述方法假定您的时间值以毫秒为单位 - 如果不是，您将需要调整它。这`%02d`意味着每个值将被格式化为最多 2 个前导零。

# c# - C#中，接口类型不是继承自System.Object？

> ID：14648692
> 
> 赞同：0
> 
> 时间：2013-02-01T14:39:57.290
> 
> 标签：c#, .net, types

> **可能重复：**
> [接口是否派生自 System.Object？C# 规范说是，Eric 说不，现实说不](https://stackoverflow.com/questions/3236305/do-interfaces-derive-from-system-object-c-sharp-spec-says-yes-eric-says-no-re)

据说.net中的所有对象都继承自System.Object。真的吗？

我尝试在 MSDN 上查找 Ilist 接口继承自哪个对象，但没有提及它的继承。

谁能告诉我一些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:48:21.637

接口本身不是类层次结构中的对象。从它们代表一个对象的意义上说，它们是“类型”。但它们本身并不是具体的类。

例如，您不能实例化`IList<int>`. 这不会编译：

```
var list = new IList<int>(); 
```

但是，您可以创建一个`List<int>`，它确实继承自`System.Object`：

```
var list = new List<int>(); 
```

这个实例`list`可以看作是许多不同的接口。例如：

```
var listVariantA = list as IList<int>();
var listVariantB = list as IEnumerable<int>(); 
```

等等。这是因为它的具体类型`List<int>`实现了多个接口。它不会从它们*继承*，因为它们本身不是具体类型。

似乎您迷路的地方在于继承和接口之间的不同。有人可能会说接口是“.NET 对多重继承的回答”，这是一个公平的说法。但这两个概念之间存在根本区别。将继承视为对象的层次*结构*：

```
Vehicle
  Car
    Honda Accord
    Toyota Camry
  Truck
    Ford F150 
```

等等。接口不适合这种层次结构。相反，将接口视为对象满足的*契约。*例如，所有`Vehicle`对象都可能实现该`IDrivable`接口。其中一些可能会实现该`IFlyable`接口。有些仍然可能同时实现（飞行汽车）。

# java - SWT.CLOSE、SWT.MAX、SWT.MIN 没有 SWT.TITLE？

> ID：14648693
> 
> 赞同：4
> 
> 时间：2013-02-01T14:40:00.913
> 
> 标签：java, shell, window, swt

我本质上是在尝试在 Java SWT 中重现类似的东西，但到目前为止还没有成功：

![在此处输入图像描述](../Images/4dde235dd8fdc9278fe6db131fb1c15f.png)

我看到的问题是，据我所知`SWT.TITLE`，需要显示`SWT.CLOSE`，`SWT.MAX`并且`SWT.MIN`

任何人都可以告诉我是否有一种很好的方法来做到这一点，或者通过样式化单个 shell 或使用多个 shell 并访问 close、min、max 组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T15:03:40.337

在这个答案中，我假设以 Windows 为目标就足够了。如果您想要便携性，请立即停止阅读。

不幸的是，当您删除 WS_CAPTION GWL_STYLE 时，按钮也会丢失。我不能肯定地说，但我认为这不能仅仅靠弄乱窗口样式来完成。也许如果你使用 AERO，你可以，但这限制了可以运行代码的操作系统。

如果你坚持要这个，我只能为你提供下一个最好的东西：放置你自己的按钮，但让它们看起来尽可能接近原生字幕按钮。

这是它与主题的外观：

![在此处输入图像描述](../Images/7317044a61bbc9670d80620817694719.png)

这就是经典主题的样子：

![在此处输入图像描述](../Images/95a7d3a86cd9a18790abf3b303df8910.png)

仍然需要对齐按钮，在热/按下或最大化/恢复时更改状态，但这是一个起点。

我知道这不完全是你问的，但也许它有帮助。

这是创建窗口的代码：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.internal.win32.OS;
import org.eclipse.swt.internal.win32.RECT;
import org.eclipse.swt.widgets.*;

public class CaptionItemSnippet {

    private static final char[] WINDOW_CLASS = className("WINDOW");
    private static final int WP_MINBUTTON = 15;
    private static final int WP_MAXBUTTON = 17;
    private static final int WP_CLOSEBUTTON = 18;

    private static final int DFC_CAPTION = 1;

    private static final int DFCS_CAPTIONCLOSE = 0x0000;
    private static final int DFCS_CAPTIONMIN = 0x0001;
    private static final int DFCS_CAPTIONMAX = 0x0002;
    private static final int DFCS_CAPTIONRESTORE = 0x0003;
    private static final int DFCS_CAPTIONHELP = 0x0004;

    public static void main(String[] args) {
        final Display display = new Display();
        final Shell shell = new Shell(display);

        int gwlStyle = OS.GetWindowLong(shell.handle, OS.GWL_STYLE);
        //remove title bar
        gwlStyle &= ~OS.WS_CAPTION;
        // add maximize button: does not work
        gwlStyle |= OS.WS_SYSMENU | OS.WS_MAXIMIZEBOX;
        OS.SetWindowLong(shell.handle, OS.GWL_STYLE, gwlStyle & ~OS.WS_CAPTION);

        final Button minimizeButton = createButton(shell, WP_MINBUTTON, DFCS_CAPTIONMIN);
        minimizeButton.setBounds(125, 0, 20, 20);
        final Button maxButton = createButton(shell, WP_MAXBUTTON, DFCS_CAPTIONMAX);
        maxButton.setBounds(145, 0, 20, 20);
        final Button closeButton = createButton(shell, WP_CLOSEBUTTON, DFCS_CAPTIONCLOSE);
        closeButton.setBounds(165, 0, 20, 20);

        shell.setSize(200, 200);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }

    private static Button createButton(final Composite parent, final int partId, final int uState) {
        final Button button = new Button(parent, SWT.PUSH);
        button.addListener(SWT.Paint, new Listener() {
            @Override
            public void handleEvent(Event e) {
                final Point size = button.getSize();
                final RECT rect = new RECT();
                rect.left = 0;
                rect.right = size.x;
                rect.top = 0;
                rect.bottom = size.y;

                if (OS.IsAppThemed()) {
                    final int theme = OS.OpenThemeData(parent.handle, WINDOW_CLASS);
                    OS.DrawThemeBackground(theme, e.gc.handle, partId, OS.TS_NORMAL, rect, null);
                    OS.CloseThemeData(theme);
                } else {
                    OS.DrawFrameControl(e.gc.handle, rect, DFC_CAPTION, uState);
                }
            }
        });
        return button;
    }

    private static char[] className(String s) {
        final char[] chars = new char[s.length() + 1];
        System.arraycopy(s.toCharArray(), 0, chars, 0, s.length());
        chars[chars.length - 1] = 0;
        return chars;
    }
} 
```

# hadoop - map reduce框架中的map阶段实现

> ID：14648696
> 
> 赞同：0
> 
> 时间：2013-02-01T14:40:10.760
> 
> 标签：hadoop, mapreduce

我搜索了很多，我知道在每个map任务中，当缓冲区的内容达到阈值时，一个线程根据reduce的数量对数据进行分区。reduce数量在这里的作用是什么？为什么在 map 中会发生分区？它如何帮助 map 阶段？排序后，线程会将内容溢出到磁盘。它是如何发生的？我无法理解这里溢出的含义.....谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:02:16.220

Map 需要在 reducer 轮询时对数据进行分区，并从每个 mapper 中提取与 reducer 相关的所有数据。

如果你反过来想象——reducer 从每个 map 中提取所有输出，那么你会将每个 mapper 的所有数据输出发送到每个 reducer——效率非常低。

因此，通过在映射器中进行分区，reducer 能够从每个映射器中查询并拉回它需要减少的数据。

# java - InetSocketAddress 与 InetAddress

> ID：14648699
> 
> 赞同：15
> 
> 时间：2013-02-01T14:40:28.773
> 
> 标签：java, network-programming

谁能解释一下java中的`InetAddress`和`InetSocketAddress`类之间有什么区别，如果有区别，请解释一下。我用谷歌搜索了它，但我找不到任何解释。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-01T14:44:36.043

[网络地址](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html)

InetAddress 的实例由 IP 地址和可能的相应主机名组成

[InetSocket地址](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetSocketAddress.html)

这个类实现了一个IP Socket地址（IP地址+端口号）也可以是一对（主机名+端口号），在这种情况下会尝试解析主机名

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-11-13T12:29:57.960

它们代表不同的[OSI 层](https://en.wikipedia.org/wiki/OSI_model)：

*   An`InetAddress`对应于[网络层（第 3 层）](https://en.wikipedia.org/wiki/OSI_model#Layer_3:_Network_Layer)，基本上是一个 IP 地址。

*   A`InetSocketAddress`对应于[传输层（第 4 层）](https://en.wikipedia.org/wiki/OSI_model#Layer_4:_Transport_Layer)，由 IP 地址和端口号组成。

# php - MySQL Query 在文件检索期间未执行

> ID：14648701
> 
> 赞同：1
> 
> 时间：2013-02-01T14:40:36.687
> 
> 标签：php, mysql, sql, mysql-error-1054

我正在使用 PHP 创建一个服务来接受文件，然后将信息输入 MySQL 数据库。我没有产生任何错误（至少不在error_log目录中）。文件上传正常，但是信息没有输入数据库，正如我所说，我没有看到列出的错误，很可能有，我不确定在哪里看。

```
include("connect.php");
$type = "jpg";

foreach ($_GET as $key => $value) { eval("\$" . $key . " = \"" . $value . "\";");}  
$filename = isset($_REQUEST["filename"]) ? $_REQUEST["filename"] : "jjj";  
$append = $_REQUEST["append"];
if($code == "XXX")  
{  
    try  
        {       
            mysql_query("INSERT INTO `images-table` (`file-name`, `file-type`) VALUES (`". $filename . "`, `" . $type . "`)");

            if(!$append)  
                $file = fopen("uploads/" . $filename,"w");  
            else  
                $file = fopen("uploads/" . $filename,"a");  

            $input = file_get_contents ("php://input");  
            fwrite($file,$input);  
            fclose($file);  

    echo "OK";

        }  
    catch (Exception $e)   
        {  
            echo 'Caught exception: ',  $e->getMessage(), "\n";  
        }  
}
else
{
echo 'You do not have permission to do this.';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:43:41.870

因为您的`INSERT`语句的值是用反引号括起来的。它应该是单引号。反引号是标识符，单引号是字符串。

```
mysql_query("INSERT INTO `images-table` (`file-name`, `file-type`) 
             VALUES ('". $filename . "', '" . $type . "')"); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

其他

*   [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

# d3.js - 如何添加工具提示条形图 d3.js

> ID：14648705
> 
> 赞同：1
> 
> 时间：2013-02-01T14:40:45.300
> 
> 标签：d3.js, tooltip, bar-chart

我想在条形图顶部的条形图中打印数据的值......就像如果 2012 年的人口计数是 20000124，那么在 2012 年的条形图顶部应该打印 20000124。

我怎么做？这是我写的代码来打印条形图..

```
var margin = {top: 20, right: 20, bottom: 30, left: 40},
width = 220 - margin.left - margin.right,
height = 220 - margin.top - margin.bottom;

var formatPercent = d3.format(".0%");

var x = d3.scale.ordinal()
.rangeRoundBands([0, width], .1);

var y = d3.scale.linear()
.range([height, 0]);

var xAxis = d3.svg.axis()
.scale(x)
.orient("bottom");

var yAxis = d3.svg.axis()
.scale(y)
.orient("left");

var svg = d3.select("body").append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  d3.tsv("data/bar2.tsv", function(error, data) {

  data.forEach(function(d) {
d.frequency = +d.frequency;
});

x.domain(data.map(function(d) { return d.letter; }));
y.domain([0, 100]);

svg.append("g")
  .attr("class", "x axis")
  .attr("transform", "translate(0," + height + ")")
  .call(xAxis);

svg.append("g")
  .attr("class", "y axis")
  .call(yAxis)
.append("text")
  .attr("transform", "rotate(-90)")
  .attr("y", 6)
  .attr("dy", ".71em")
  .style("text-anchor", "end")
  .text("Frequency");

svg.selectAll(".bar")
  .data(data)
.enter().append("rect")
  .attr("class", "bar")
  .attr("x", function(d) { return x(d.letter); })
  .attr("width", x.rangeBand())
  .attr("y", function(d) { return y(d.frequency); })
  .attr("height", function(d) { return height - y(d.frequency); })
  .text(function(d) { return d.letter});

}); 
```

所以基本上我如何在每个栏的顶部添加标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:47:40.440

您可以通过在矩形后附加文本元素来将标签添加到条形图上。类似的东西

```
var sel = svg.selectAll(".bar")
    .data(data).enter();

sel.append("rect")
   .attr("class", "bar")
   .attr("x", function(d) { return x(d.letter); })
   .attr("width", x.rangeBand())
   .attr("y", function(d) { return y(d.frequency); })
   .attr("height", function(d) { return height - y(d.frequency); });

sel.append("text")
   .attr("x", function(d) { return x(d.letter); })
   .attr("y", function(d) { return y(d.frequency); })
   .text(function(d) { return d.letter}); 
```

您可能希望根据自己的喜好调整文本的位置。

# c# - 检查对象是否实例化

> ID：14648706
> 
> 赞同：12
> 
> 时间：2013-02-01T14:40:45.907
> 
> 标签：c#, .net, instantiation

我有一个由许多其他对象组成的对象！我正在尝试查找其中一个属性（枚举）的值，但找不到。

现在，通常如果我想检查一个对象是否为空，我可以做

```
if (object == null) 
```

但这会导致相同的错误。

我试过

```
if (object.Equals(null)) and the same error. 
```

我收到的错误消息是 objectName throw exception: System.NullReferenceException: Object reference not set to an instance of an object..

我正在尝试确定我的对象是否已实例化。现在，我可以将它放入 try catch，如果它出错，那么我知道它不是，但对我来说这感觉非常错误（尽管我可能别无选择）。

我遇到的另一个问题是这个项目不是我的，对每个人来说都是一个黑匣子，所以我不能对原始对象进行任何更改！这意味着，我所拥有的就是我所拥有的，一个可能会或可能不会被实例化的对象，我需要一种方式来表达。

除了try catch，我还有其他选择吗？

**编辑**

所以，对象是

```
public partial class SaveBundleResponse 
{
    SaveBundleResponseHeader header;
}

public partial class SaveBundleResponseHeader 
{      
        private SaveBundleResponseHeaderStatus status;
}

public enum SaveBundleResponseHeaderStatus 
{        
        Success, Fail, OK, OtherStates
} 
```

所以 SaveBundleResponse 最初是创建的，然后实例通过“工作流”风格的环境传递，每个属性都变成“填充/更新”等，因为它深入到工作流中。但是，在少数情况下，从未设置枚举。

问题是，我需要知道枚举的值（或者它是否为空）。

我尝试使用的代码是

```
 if (saveBundleResponse.Header.Status // what ever happens, it fails at this point as Status is not initiated. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T14:56:13.307

```
if (saveBundleResponse != null)
{
    var header = saveBundleResponse.Header;
    if (header != null)
    {
        var status = header.Status;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T14:51:50.793

你应该能够使用这样的东西：

```
SaveBundleResponse sbr = ...;
if (sbr.Header != null && !sbr.IsDisposed)
{
    //Do the work
} 
```

这应该有效（如果该类不是控件，则不能使用 IsDisposed 检查）。

# php - 如何更改从 PHP Simple HTML DOM Parser 解析的文本？

> ID：14648709
> 
> 赞同：1
> 
> 时间：2013-02-01T14:41:17.000
> 
> 标签：php, html, css

我设法使用 PHP Simple HTML DOM Parser 解析来自另一个网站的文本。我设法解析的文本都在 HTML 中`<p>...</p>`，看起来像这样

来源网址为： **电话号码：** 123456789

但在我的网站上查看：电话号码：123456789。

我希望“电话号码”和类似的词加粗（如源网站中的）或与我网站的 CSS 颜色不同的颜色。这可以做到吗？

我需要这个来复制我所在国家教区的教会网站的各种 HTML 页面上的详细信息。我已经获得使用这些信息的许可。

我试图谷歌它，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:51:18.130

如果您知道要替换的确切字符串，可以使用 str_replace

```
$string = '<p>This is my super dupa text and it has my phone number: 083 23212212 32</p>';
$string = str_replace("phone number:", "<b>phone number:</b>", $string); 
```

字符串现在以粗体显示“电话号码：”。如果你有很多东西要替换，你可以将 str_replace 与数组一起使用。在此处查看 php 网站上的示例：http: [//php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

# .net - 安装 Windows 服务以作为虚拟用户运行

> ID：14648710
> 
> 赞同：2
> 
> 时间：2013-02-01T14:41:19.390
> 
> 标签：.net, windows-services, installation

我有一个[`ServiceProcessInstaller`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceprocessinstaller.aspx)安装 .NET Windows 服务的。

如果我符合以下任一条件，安装过程将完美运行：

*   将服务设置为以 SYSTEM ( `serviceProcessInstaller1.Account = ServiceAccount.LocalSystem`) 身份运行。
*   `serviceProcessInstaller1.Account = ServiceAccount.User`通过指定`Username`and`Password`属性或让安装过程提示我，将服务设置为作为普通用户 ( ) 运行。

但是，我希望该服务以虚拟用户身份运行，*例如 la* `NT Service\ServiceName`。如果您查看一些 SQL Server 服务，您会看到它们默认以自己的虚拟用户帐户登录。[在http://technet.microsoft.com/en-us/library/dd548356.aspx](http://technet.microsoft.com/en-us/library/dd548356.aspx)上有更多信息，尽管有限。

* * *

我尝试过设置`serviceProcessInstaller1.Username = @"NT Service\ServiceName"`，但是无论我提供什么密码，安装程序都会引发以下错误（我尝试过`String.Empty`，与用户名相同，我自己的密码，`null`以调出交互式对话框，甚至是随机垃圾）：

> 未完成帐户名称和安全 ID 之间的映射

但是，如果我正常安装服务（例如以 SYSTEM 身份运行），然后我可以从`services.msc`管理单元进入服务的属性，在登录页面上将用户更改为`NT Service\ServiceName`，它工作得很好。

我也研究了这个[`ChangeServiceConfig2`功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681988%28v=vs.85%29.aspx)，但我似乎也无法让它改变任何东西。

* * *

如何`NT Service\ServiceName`从我的代码中将登录用户设置为虚拟用户`ServiceProcessInstaller`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T16:04:42.150

您不能直接对`ServiceProcessInstaller`对象执行此操作。但是，您可以在安装服务后设置用户名，`ServiceInstaller.Committed`如果使用[WMI 中的 Change 方法](http://msdn.microsoft.com/en-us/library/aa384901)。将用户名指定为`wmiParams[6]`并将*密码保留为 null*：

```
void serviceInstaller1_Committed(object sender, InstallEventArgs e)
{
    using (ManagementObject service = new ManagementObject(new ManagementPath("Win32_Service.Name='ServiceName'")))
    {
        object[] wmiParams = new object[11];
        wmiParams[6] = @"NT Service\ServiceName";
        service.InvokeMethod("Change", wmiParams);
    }
} 
```

最后，不要忘记授予用户对您的服务 exe 和配置文件的读取/执行权限，否则您将收到拒绝访问错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-05T14:57:30.123

上面建议的解决方案的替代方法（使用事件）在[connect.microsoft.com](https://connect.microsoft.com/VisualStudio/feedback/details/795196/service-process-installer-should-support-virtual-service-accounts)`ServiceInstaller.Committed`上被描述为解决方法。这个想法是通过反射调整私有字段以允许作为有效密码。`haveLoginInfo``null`

```
 const string s_ServiceName = "myservice1";
    const string s_DisplayName = "Tell admin what it is";
    const string s_Description = "Tell admin what it does";

        var procesServiceInstaller = new ServiceProcessInstaller
        {
            Account = ServiceAccount.User,
            Username = string.Format("NT Service\\{0}", s_ServiceName),
            Password = null,
        };

        //Here comes the hack.
        // ReSharper disable once PossibleNullReferenceException
        procesServiceInstaller
            .GetType()
            .GetField("haveLoginInfo", BindingFlags.Instance | BindingFlags.NonPublic)
            .SetValue(procesServiceInstaller, true);

        var serviceInstaller = new ServiceInstaller();
        var path = string.Format(
              "/assemblypath={0}",
              Assembly.GetExecutingAssembly().Location);
        string[] cmdline = { path };

        var context = new InstallContext("", cmdline);
        serviceInstaller.Context = context;
        serviceInstaller.DisplayName = s_DisplayName;
        serviceInstaller.ServiceName = s_ServiceName;
        serviceInstaller.Description = s_Description;
        serviceInstaller.StartType = ServiceStartMode.Manual;
        serviceInstaller.Parent = procesServiceInstaller;

        try
        {
            var state = new ListDictionary();
            serviceInstaller.Install(state);
        }
        catch (Win32Exception win32Exception)
        {
            //TODO: HandleException(win32Exception); 
        }
        catch (InvalidOperationException ex)
        {
            //TODO: HandleException(ex);
        } 
```

即使是这个解决方案也不是不那么老套，至少它在视觉上不那么难看。

[注意： connect.microsoft.com](https://connect.microsoft.com/VisualStudio/feedback/details/795196/service-process-installer-should-support-virtual-service-accounts)上的解决方法描述中有一个错误。那里提到的私有字段名称是`hasLoginInfo`但必须是`haveLoginInfo`。

# android - 如何解析 ReportedData

> ID：14648715
> 
> 赞同：0
> 
> 时间：2013-02-01T14:41:31.130
> 
> 标签：android, eclipse, parsing, xmpp, chat

我在 ReportedData 变量中接收数据。而且我不知道如何将数据导出为可解析的形式，请帮助。

[javadoc](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/ReportedData.html)不是很有帮助。

[这](https://stackoverflow.com/questions/13290445/xmpp-iq-result-parsing-issue)就是一切的开始。

我试过getCollumns、getRows，但无济于事。或者我只是做错了。有什么想法吗？

这是代码：

```
 ReportedData data = null;
                  UserSearchManager search = new UserSearchManager(ChatList.connection);
                  Form searchForm = null;
                try {
                    searchForm =   search.getSearchForm("search.webserv.xyz.com");
                } catch (XMPPException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                  Form answerForm = searchForm.createAnswerForm();
                    answerForm.setAnswer("Username", true);
                    answerForm.setAnswer("search", "android");
                  answerForm.setAnswer("last", "android");
                  try {
                     data = search.getSearchResults(answerForm, "search.webserv.xyz.com"); 
                } catch (XMPPException e) {
                    e.printStackTrace();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:42:47.653

下面是一个代码片段，展示了如何解析 ReportedData 变量：

```
if(data.getRows() != null)
    {
        Iterator<Row> it = data.getRows();
        while(it.hasNext())
        {
            Row row = it.next();
            Iterator iterator = row.getValues("jid");
            if(iterator.hasNext())
            {
                String value = iterator.next().toString();
                Log.i("Iteartor values......"," "+value);
            }
            //Log.i("Iteartor values......"," "+value);
        }
         Toast.makeText(_service,"Username Exists",Toast.LENGTH_SHORT).show();
         );
    } 
```

# c# - Getter 和 Setter 不工作

> ID：14648723
> 
> 赞同：4
> 
> 时间：2013-02-01T14:41:52.517
> 
> 标签：c#, .net

我目前有以下带有 getter 和 setter 的类

```
public class CustAccount
{
    public string Account { get; set; }        private string account;
    public string AccountType { get; set; }    private string accountType;

    public CustSTIOrder(Account ord)
    {
        account = ord.Account;
        accountType = ord.AccountType;
    }
} 
```

现在我意识到`public string Account { get; set; }`我不需要声明`private string account`。无论如何，现在我的私有变量`account`包含该值，但是当我`Account`用来获取该值时，我得到一个空值。关于为什么我得到 null 的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T14:44:01.077

由于您使用的是自动属性，因此您应该使用`Account`该属性的所有引用。

如果您希望使用支持字段，那么您需要在and中有支持字段 ( `account`) 。`get``set`

例子：

```
public string Account 
{ 
    get { return account; }
    set { account = value; }
}        
private string account; 
```

auto 属性的使用示例：

```
public CustSTIOrder(Account ord)
{
    Account = ord.Account;
    // the rest
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T14:43:36.143

需要在属性中使用私有字段，否则您将获得具有不同后备存储的[自动实现的属性。](http://msdn.microsoft.com/en-us/library/bb384054.aspx)

```
public class CustAccount
{
    private string account;
    public string Account { get {return account;} set{account = value;} }        
    private string accountType;
    public string AccountType { get{return accountType;} set{accountType = value;} }  

    public CustSTIOrder(Account ord)
    {
        account = ord.Account;
        accountType = ord.AccountType;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T14:43:33.883

您必须将属性`Account`与字段连接`account`：

```
private string account;
public string Account
{
   get {return this.account;}
   set {this.account = value;}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T14:44:16.673

只是不要使用`account`，直接使用属性：

```
public class CustAccount
{
    public string Account { get; set; }        
    public string AccountType { get; set; }

    public CustSTIOrder(Account ord)
    {
        Account = ord.Account;
        AccountType = ord.AccountType;
    }
} 
```

这些自动属性在内部由一个字段支持，因此您不必编写那些琐碎的代码。

# jquery - 在页面刷新时调用 $window.resize() 是否正常？

> ID：14648728
> 
> 赞同：1
> 
> 时间：2013-02-01T14:42:33.610
> 
> 标签：jquery, resize

我有以下代码：

```
 front_page_magic();

  $(window).resize(function() {
    front_page_magic();
  }); 
```

所有的魔法都发生在 内`front_page_magic()`，尽管每当我加载页面时，resize 函数也会被调用，这会产生一些古怪和缓慢的行为，因为该函数被快速连续调用两次。

这是否也与某些浏览器有关？

我虽然 $(window).resize() 仅与浏览器窗口的大小调整有关，与页面加载/刷新无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:00:13.460

回答你的问题。**没有。**它不应该触发，除非您有一个调整大小事件，您可以触发调整浏览器大小或手动触发它。

您肯定要查找的一件事是多次调用文件、多次初始化方法、将该方法绑定到其他位置或手动触发调整大小事件。

这个答案可能是相关的。

[jQuery 调整大小功能在页面加载时不起作用](https://stackoverflow.com/questions/2597152/jquery-window-resize-doesnt-work-on-load)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:44:37.470

每次页面加载时都会执行代码，因为您`front_page_magic();`在其中

# objective-c - nssplitview dividerColor 返回被忽略

> ID：14648731
> 
> 赞同：0
> 
> 时间：2013-02-01T14:42:47.993
> 
> 标签：objective-c, osx-lion, nssplitview

`dividerColor`方法返回颜色值似乎在`NSSplitView`. 我已经看到了有关此的各种讨论，但我从未见过解决方案。

有人知道这个问题的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:50:55.650

`NSSplitViewDividerStyleThin`在 IB 中使用“细分隔线”( )。然后我尝试返回`+[NSColor redColor]`然后`+[NSColor blueColor]`在我的`NSSplitView`子类中，它们都工作得很好。

什么也有效：如果您指定“厚分隔器”（`NSSplitViewDividerStyleThick`）或“窗格分隔器”（`NSSplitViewDividerStylePaneSplitter`），并且您在*纹理*窗口中使用您的子类。但是，如果窗口没有纹理并且您使用这两种样式中的任何一种，则使用 NSClearColor 代替，这就是您到目前为止所看到的。

# javascript - 如何随机化 JavaScript 数组并确保顺序项不相同

> ID：14648736
> 
> 赞同：0
> 
> 时间：2013-02-01T14:43:09.233
> 
> 标签：javascript, shuffle

我有一系列问题，其中一些问题可能是相同的。

```
 {"choice":"attributes","text":"Happy"},
 {"choice":"attributes","text":"Fun"}, 
 {"choice":"attributes","text":"Enjoyable"},   
 {"choice":"attributes","text":"Pleasurable"},  
 {"choice":"attributes","text":"Ecstatic"},
 {"choice":"attributes","text":"Sad"},   
 {"choice":"attributes","text":"Tedious"},
 {"choice":"attributes","text":"Annoying"},  
 {"choice":"attributes","text":"Depressing"},
 {"choice":"attributes","text":"Unhappy"},
 {"choice":"attributes","text":"Happy"},
 {"choice":"attributes","text":"Fun"},
 {"choice":"attributes","text":"Enjoyable"}, 
```

目前我正在使用 FisherYatesShuffle() 对数组进行随机化，但我真正需要做的是在随机播放列表后确保没有两个连续的项目是相同的，知道吗？

例如，我们永远不会得到

```
{"choice":"attributes","text":"Happy"},
{"choice":"attributes","text":"Happy"}, 
```

编辑以澄清一些问题。必须保留数组中的所有项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:50:02.297

继续打乱你的数组，直到没有两个相同的连续项目：

```
var shuffled = false,
    i = 0,
    length = myArray.length,
    previous;
while(!shuffled){                            // repeat this until we have a shuffled array.
    myArray = FisherYatesShuffle(myArray);   // (Assuming you have that function)
    shuffled = true;                         // first, assume the array is shuffled,
    for(i = 0; i < length && shuffled; i++){ // Then loop through the array to check if it is indeed shuffled.
        if(previous && previous.text == myArray[i].text){
            shuffled = false;                // If it isn't shuffled, set shuffled to false.
        }                                    // This breaks the for loop, and tries to shuffle the array again.
        previous = myArray[i];
    }
} 
```

优点是它只洗牌一次，如果第一次证明循环被充分洗牌，但如果有很多相同的项目，它可以经常迭代循环，因为它必须随机返回一个正确洗牌的数组从`FisherYatesShuffle`.

# regex - 这些 RegEx 有什么区别

> ID：14648743
> 
> 赞同：1
> 
> 时间：2013-02-01T14:43:29.417
> 
> 标签：regex

1.  `(\d+|)`对比`(\d+)?`
2.  `[\w\W]`对比`[\d\D]`对比`.`

这些常规正则表达式之间有什么区别吗？应该选择哪一个？

我正在使用 Javascript。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:46:47.577

`[\w\W]`并且`[\d\D]`在没有 dotall 选项的 JavaScript 等语言中使用。它匹配所有字符，**包括**换行符，`.`这与匹配*除*换行符之外的所有字符不同。

```
 \w\W or \d\D   -> matches everything including newline characters
              .   -> matches everything except newline characters unless 
                     's' (dotall modifier) is specified 
(\d+|) or (\d+)?  -> matches 1 or more digits OR any position (null)
                     It could simply be written as '(\d*)' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T14:48:02.173

第二个很有趣，我想说几句：

*   `[\w\W]`and`[\d\D]`是等价的，它们也等价于`[\s\S]`。`\W`是 的补码字符集`\w`，同样适用于`\D`-pair`\d`和`\S`-pair `\s`。因此，放在一起时，它们将毫无例外地匹配任何字符。

    当没有“匹配任何字符，*无一例外*”的构造时，通常使用它们。JavaScript 就是这种情况的一个例子。在 JavaScript 中还有一个鲜为人知且高度混乱的构造`[^]`，这在其他风格中通常是无效的。

*   点`.`通常匹配任何字符，**但**换行`\n`。根据语言，它可能会排除更多字符。

    对于[Java](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#lt)，它不包括`\n`, `\r`, `\u0085`,`\u2028`和`\u2029`. 所以 a`.`等价于`[^\n\r\u0085\u2028\u2029]`

    对于[JavaScript](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)，点将`.`排除`\r`,`\u2028`和`\u2029`除了`\n`. 所以`.`相当于`[^\n\r\u2028\u2029]`

    某些语言将具有`.`匹配任何字符的模式，*无一例外*。`DOTALL`在 Java 和 Python中称为模式，`SingleLine`在 C# 和 Perl 中称为模式。

的行为`.`因语言而异。一般来说，他们都同意`\n`应该在“正常”模式下排除，但他们在选择排除更多方面可能略有不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T14:48:59.947

你没有说你使用的是哪种语言，所以我假设 Perl。

1.  `(\d+|)`相当于`(\d*)`。它匹配 0 个或多个数字的序列并将结果捕获到`$1`. `(\d)?`匹配 0 或 1 位数字。如果它匹配一个数字，则将其放入`$1`；否则`$1`将是`undef`（你可以重写它，`(?:(\d)|)`好像你想消除`?`）。

2.  `[\w\W]`并且`[\d\D]`是等价的，匹配任何字符。`.`默认情况下等效于`[^\n]`（匹配除换行符以外的任何字符）。如果你真的想匹配任何字符，你应该使用`.`并指定`/s`标志，它可以`.`匹配任何字符。

# yii - Yii：在 CKEditor 文本区域内渲染视图

> ID：14648755
> 
> 赞同：0
> 
> 时间：2013-02-01T14:44:34.217
> 
> 标签：yii, ckeditor, yii-extensions

Yii 新手，我想知道是否有渲染我之前在 CKEditor TextArea 中制作的视图。

我尝试在 value 属性中渲染它，但不幸的是它不起作用。

有没有办法做到这一点？还是应该创建一个单独的函数并将页面输出到文本区域？

非常感谢任何提示、建议或指示！谢谢你

```
 <?php
    $this->widget('application.extension.CKEditor.TheCKEditorWidget', array(
        'model' => $model,
        'attribute' => 'body', 
         'value' => //rendered page,    
        'height' => '400px',
        'width' => '800px',
        'toolbarSet' => 'Full',
        'ckeditor' => Yii::app()->basePath . '/../ckeditor/ckeditor.php',
        'ckBasePath' => Yii::app()->baseUrl . '/ckeditor/',
        'css' => Yii::app()->baseUrl . '/css/index.css',
    )); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:30:46.127

如果您指定和属性`value`，则不使用该属性。因此，为了在 CKeditor 中显示某些内容，您必须在渲染小部件之前指定它。在您的情况下，您必须在 CKEditor 中呈现视图。所以使用第三个参数为true的函数。IE`model``attribute``$model->body="Your content goes here"``CController::render()`

```
<?php
    $model->body=$this->render("viewName",array(),true);

    $this->widget('application.extension.CKEditor.TheCKEditorWidget', array(
        'model' => $model,
        'attribute' => 'body',  
        'height' => '400px',
        'width' => '800px',
        'toolbarSet' => 'Full',
        'ckeditor' => Yii::app()->basePath . '/../ckeditor/ckeditor.php',
        'ckBasePath' => Yii::app()->baseUrl . '/ckeditor/',
        'css' => Yii::app()->baseUrl . '/css/index.css',
    )); ?> 
```

# c# - 无法嵌入互操作类型“mshtml.HTMLHeadElementClass”

> ID：14648760
> 
> 赞同：0
> 
> 时间：2013-02-01T14:44:57.443
> 
> 标签：c#, wpf, dom

任何线索如何解决此错误？

```
 void wb_LoadCompleted(object sender, NavigationEventArgs e)
        {
             var doc = (mshtml.HTMLDocument)wb.Document;

             HTMLHeadElementClass head = (HTMLHeadElementClass)((IHTMLElementCollection)doc.all.tags("head")).item(null, 0); // Error

             IHTMLScriptElement scriptObject = (IHTMLScriptElement)doc.createElement("script");
             scriptObject.type = @"text/javascript";
             scriptObject.text = @"function btn1_OnClick(str){alert('you clicked' + str);}";

             head.appendChild((IHTMLDOMNode)scriptObject); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:11:34.630

名称以“Class”结尾的合成 COM 互操作类不可嵌入。“嵌入互操作类型”功能（又名“nopia”）仅支持实际出现在类型库中的嵌入接口和 coclass 类型。

请改用接口类型 mshtml.IHTMLHeadElement。就像您为 IHTMLScriptElement 所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:00:52.200

我可以在这里找到解决方案

[WPF WebBrowser HTMLDocument](https://stackoverflow.com/questions/12834742/wpf-webbrowser-htmldocument)

不要忘记参考`Microsoft.mshtml`

# asp.net-mvc - 一比。一个项目中的多个 DbContext

> ID：14648762
> 
> 赞同：1
> 
> 时间：2013-02-01T14:45:02.420
> 
> 标签：asp.net-mvc, entity, dbcontext

我正在使用数据实体 Web 应用程序构建 MVC 4。该应用程序需要连接位于同一数据库服务器中的两个数据库。我需要使用数据库 1 中的数据来搜索数据库 2 上的数据。为了获得良好的实践和性能，我应该有两个 DbContext 还是一个？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:46:07.030

您将需要两个单独的连接字符串和连接，因此使用两个不同的上下文并根据另一个的结果查询一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:00:47.423

是的，除非数据库模式结构相同。尝试使用相同的上下文访问 2 个不同的数据库会导致您遇到的问题多于解决的问题。正如 Konstantin 指出的那样，需要 2 个连接字符串。
使用从 DB 过程中创建模型/上下文的正常两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:54:48.580

对于这种情况，我更喜欢这种方式：

您从需要写入的数据库中创建上下文（比如说 DB1）。然后我创建视图（在 DB1 中）引用另一个 DB（DB2）中的表。这增加了一个安全级别：我永远不会在 DB2 中插入任何东西（因为视图在实体框架中是只读的）。

# antlr - 为什么有多种选择？

> ID：14648763
> 
> 赞同：1
> 
> 时间：2013-02-01T14:45:06.707
> 
> 标签：antlr

我有一个简单的语法试图解析两种类型的文本，该行以“#include”和其他开头。这是我的语法：

```
cmds
    : cmd+
    ;

cmd
    : include_cmd |  other_cmd
    ;

include_cmd
    : INCLUDE  DOUBLE_QUOTE  FILE_NAME  DOUBLE_QUOTE
    ;

other_cmd
    : (~'#')+
    ;

INCLUDE
    : '#include'
    ;

DOUBLE_QUOTE
    : '"'
    ;

FILE_NAME
    : ('a'..'z' | 'A'..'Z' | '0'..'9' | '_')+
    ;

New_Line 
    : ('\r' | '\n')+   
    ;

WS 
    : ('\t' | ' ')+  {$channel = HIDDEN;}
    ; 
```

但我收到这样的警告：

```
Decision can match input such as "INCLUDE DOUBLE_QUOTE FILE_NAME DOUBLE_QUOTE" using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input 
```

我不知道如何解释这个警告。其中的示例“INCLUDE DOUBLE_QUOTE FILE_NAME DOUBLE_QUOTE”应该只匹配 include_cmd，因为“other_cmd”不以“#”开头。

你能帮忙看看这里发生了什么吗？

我正在使用antlr3.4。

更新 - 感谢 graydet 的建议，在将 other_cmd 规则更改为 (~INCLUDE)+ 后，该警告消失了。但实际上还有另一个警告，

```
Decision can match input such as "{DOUBLE_QUOTE..FILE_NAME, New_Line..WS}" using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input 
```

现在我猜这是因为双引号可以同时匹配 other_cmd 规则和 DOUBLE_QUOTE 规则，但我想在这里，一个是解析器规则，另一个是词法分析器规则，这个警告有意义吗？我根本不能使用 DOUBLE_QUOTE，而是直接在解析器规则 include_cmd 中使用“，但这并不容易阅读。

任何帮助清除此警告？

一个附带问题 - 警告消息只是说替代 1,2，但我并不清楚什么是 1，什么是 2，有没有办法让 antlr 提供更直接的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:44:54.603

该`other_cmd`规则将匹配每个不以标记开头的标记序列`#`。
该规则将匹配以标记`include_cmd`开头的序列。`#include`

由于`#`和`#include`是两个不同的标记，因此以标记开头的标记序列`#include`匹配两个规则。

尝试以下规则：

```
other_cmd
    : (~INCLUDE)+
    ; 
```

# android - 如何在Android中设置所有文本字段和按钮的文本

> ID：14648768
> 
> 赞同：0
> 
> 时间：2013-02-01T14:45:19.347
> 
> 标签：android, android-edittext

我正在尝试将我活动的所有编辑文本和按钮的文本设置为其原始文本。（活动开始时在他们身上的文字）。有很多字段和按钮，所以任何关于如何做到这一点的指针，而无需为每个编辑文本和按钮手动将文本设置回其原始文本？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:58:03.140

您可以使用将当前文本存储到私有成员变量中的方法从 EditText 扩展自定义类。然后在您的 Activity 的 onResume() 方法中调用此方法。每当您想将 EditText 的文本重置为其原始文本时，您将调用另一个简单的方法，将当前文本设置为之前存储的文本。

```
public class MyEditText extends EditText {

private String mStoredText;

public MyEditText(Context context) {
    super(context);
}

public MyEditText(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public void storeText() {
    mStoredText = getText().toString();
}

public void restoreText() {
    setText(mStoredText);
}
} 
```

# nhibernate - 如何通过具有活动事务的连接获取 NHibernate 会话

> ID：14648770
> 
> 赞同：1
> 
> 时间：2013-02-01T14:45:19.957
> 
> 标签：nhibernate, transactions

我们使用 NHibernate 作为域模型的 DAL。在批量处理结束时，我想使用 NHibernate DAL 执行一些操作

就像是：

```
public void BulkUpdate()
{
   var connection =  new sqlConnection(“connectonstring”);
   var transaction = connection.BeginTransaction();
   // Do Bulk Stuff
   var session = SessionFactory.OpenSession(connection);
   var result = session.Query<DomainClass>();
   // Do Stuff with Result
   transaction.Commit();
   connection.Close();     
} 
```

NHibernate 的读取尝试失败，因为它尝试使用没有事务集的命令对象。但我不知道将事务对象传递给它的方法。

那里有任何 Nhibernate 大师吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:07:19.247

我认为这种方法可能有效，但现在没有时间验证它：

*   *首先*，从您的连接字符串创建一个 NHibernate 会话，如[this SO answer所示](https://stackoverflow.com/questions/12745046/is-there-a-way-to-reuse-a-nhibernate-sessionfactory-for-multiple-databases?answertab=votes#tab-top)
*   像这样打开事务：`session.BeginTransaction()`
*   使用该`session.Connection`属性执行批量操作
*   `session`酌情使用并提交完成处理

# javascript - 为什么 JS 会跳过 parentNode 这样的“ "

> ID：14648771
> 
> 赞同：1
> 
> 时间：2013-02-01T14:45:24.180
> 
> 标签：javascript, dom

HTML：

> ```
> <div class="a">
>     <p><p class="y"><p class="z"></p></p></p>
> </div> 
> ```

代码：

```
 console.log(document.getElementsByClassName('z')[0].parentNode) 
```

返回 div.a

求助大佬，为什么会跳

?? 顺便说一句，如果将 py 更改为 div.y 那么它将返回 div.y

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T14:46:31.737

无效的 html 是它跳过的原因。段落中不能有段落。

[**HTML 4.01 规范：9.3.1 段落：P 元素**](http://www.w3.org/TR/html401/struct/text.html#h-9.3.1)

> P 元素代表一个段落。它不能包含块级元素（包括 P 本身）。

使用控制台检查 HTML，您将看到浏览器将重写您的 html 以关闭第一个段落标记。这是浏览器将呈现的内容：

```
<div class="a">
    <p></p>
    <p class="y"></p>
    <p class="z"></p>
    <p></p>
    <p></p>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T14:46:23.917

A`<p>`不能是另一个 的父级`<p>`。您的每个`<p>`标签都隐含地在下一个标签的开头结束；结束标签被忽略。

还有其他类似的标签：`<td>`请`<li>`记住。（不同的原因，但这些原因对标记外观有相似的影响。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T14:47:03.997

您的 HTML 无效。一个`p`元素不能是另一个`p`元素的子元素，并且元素的结束标记`p`是可选的。

因此，您的 HTML 被解释为：

```
<div class="a">
    <p></p>
    <p class="y"></p>
    <p class="z"></p>
    <!-- unexpected and therefore ignored </p> -->
    <!-- unexpected and therefore ignored </p> -->
</div> 
```

父节点不会被忽略。您正在编写的 HTML 并没有生成您假设的 DOM。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T14:47:16.887

段落标签`<p>`是 HTML 中的一种特殊情况。以下是完全有效的 html：

```
<p>this is a paragraph
<p>This is another paragraph, but notice I never closed the first one
<p>a third paragraph, also following another non-closed para
<p>a fourth one</p> 
```

在不关闭前一个段落的情况下开始一个新段落执行了对前一个段落的隐式关闭。这意味着您不能将段落相互嵌套。

# internet-explorer - 消息 - 您使用的是过时版本的 Internet Explorer

> ID：14648774
> 
> 赞同：1
> 
> 时间：2013-02-01T14:45:33.787
> 
> 标签：internet-explorer, version, compatibility

“您使用的是过时版本的 Internet Explorer。为了获得更快、更安全的浏览体验，立即升级”

如果 IE（IE7 或更早版本）并且 Microsoft 认为他们应该使用更高版本（IE8+），则此消息显然与用户使用旧版本的事实有关。如果用户通过 F12（IE 开发人员工具）模拟旧版浏览器，也会发生这种情况。

我有用户在几个不相关的网站上报告了这一点。但是我想知道的是为什么只有某些站点会触发此消息？（我不是 IE 大用户）是网站生成的还是浏览器的功能？是否与网站访问次数有关？

好奇的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:49:00.213

你是对的。有趣的是，他们正在链接到 Microsoft 赞助的图像站点。

```
 !--[if lt IE 8]>
 <div style=' clear: both; text-align:center; position: relative;'>
  <a href="http://windows.microsoft.com/en-US/internet-explorer/products      
     /ie/home?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/
     assets /100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" 
    alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade 
    for free today."   /></a>
  </div>
  <![endif]--> 
```

# android - OpenCV iOS 与 Android

> ID：14648776
> 
> 赞同：1
> 
> 时间：2013-02-01T14:45:43.103
> 
> 标签：android, ios, opencv

我正在移植一些我为 iOS 上的 openCV 编写的 opencv 代码。我对为什么语法完全不同感到困惑，考虑到它们都是用 c++ 编写的，在相同版本的 openCV（2.4.3）下。

我正在尝试使用一些数组处理方法，例如这个

```
//iOS Code
cv::Mat image;//this comes from each live frame from the camera
float m[] =    { 1.0, 2.0,  1.0, 1.0, 2.0, 1.0, 1.0, 2.0, 1.0};
cv::Mat kernel = cv::Mat(3, 3, CV_32F, m);
int ddepth = -1;
cv::filter2D(image, image, ddepth, kernel); 
```

这可以在 iOS 上编译并正常工作。当复制到 Android 环境时，它声称我需要使用输入数组和输出数组，而不是 cv::Mat。我试过像这样铸造它们

```
cv::filter2D((InputArray)image, (OutputArray)image, ddepth, kernel); 
```

并且可以编译，但由于转换不正确而在运行时失败。有人可以帮我理解这种差异，或者如何解决它吗？

# jquery - jQuery DataTable 没有显示数据

> ID：14648777
> 
> 赞同：1
> 
> 时间：2013-02-01T14:45:43.663
> 
> 标签：jquery, datatables

我的 jQuery DataTable 没有列出 JSON 数据。这是为什么？

HTML 代码：

```
<!doctype html>
<html lang="tr">
 <head>
    <meta charset="utf-8">
    <title>Binalar</title>
    <link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
        <style type="text/css" title="currentStyle">
            @import "http://127.0.0.1/HCAWebApp/DataTables-1.9.4/media/css/demo_page.css";
            @import "http://127.0.0.1/HCAWebApp/DataTables-1.9.4/media/css/demo_table.css";
        </style>
    <script src="http://127.0.0.1/HCAWebApp/DataTables-1.9.4/media/js/jquery.js"></script>
    <script type="text/javascript" language="javascript" src="http://127.0.0.1/HCAWebApp/DataTables-1.9.4/media/js/jquery.dataTables.js"></script>

    <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        $('#binalar').dataTable({
            "bProcessing" : true,
            "bServerSide" : true,
            "sAjaxSource" : "http://127.0.0.1/HCAWebApp/index.php/getbuildings"
        });
    }); 
</script>

    <style>
        body { padding: 15px 30px; }
        .alignleft { float: left; vertical-align:text-bottom; }
        .alignright { float: right; vertical-align:text-bottom; }
        td { width: 25% }
    </style>
 </head>
 <body>
                   <div class="navbar">
              <div class="navbar-inner">
                <div class="container">
                  <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </a>
                  <div class="nav-collapse collapse navbar-responsive-collapse">
                    <ul class="nav">
                    <li class='active'><a href="binalar">Binalar</a></li>
                    <li ><a href="cihazlar">Cihazlar</a></li>
                    <li ><a href="kullanicilar">Kullanıcılar</a></li>
                    <li ><a href="gruplar">Gruplar</a></li>

                    </ul>
                    <ul class="nav pull-right">
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">İlhan ŞUBAŞI <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Veritronik</a></li>
                          <li><a href="#">Seller</a></li>
                          <li class="divider"></li>
                          <li><a href="kullanicilar/logout">Çıkış</a></li>
                        </ul>
                      </li>
                    </ul>
                  </div><!-- /.nav-collapse -->
                </div>
              </div><!-- /navbar-inner -->
            </div><!-- /navbar --><div class='fdfg'>
    <div id="baslik">
        <h1 style="margin-bottom:-15px" class="alignleft">Binalar</h1>
        <h3 style="margin-bottom:-15px" class="alignright">+ Bina Ekleme</h3>   </div>
    <div style="clear: both;"></div>
    <hr>

    <table cellpadding="0" cellspacing="0" border="0" class="display" id="binalar">
        <thead>
            <tr>
                <th>Column 1</th>
                <th>Column 2</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="2" class="dataTables_empty">Veriler sunucudan yükleniyor.</td>
            </tr>
        </tbody>
    </table>

</div>

</body>
</html> 
```

JSON 数据，它具有`application/json`内容类型。

```
{ "aaData" : [ [ "Ersin SEewrZA",
        "eseeza@veritrwqonik.werew"
      ],
      [ "İlhan ŞUBewrAŞI",
        "isuqbasi@veritrewonik.ewrew"
      ]
    ],
  "iTotalDisplayRecords" : 2,
  "iTotalRecords" : 2,
  "sColumns" : "FullName,Email",
  "sEcho" : 0
} 
```

所有文件都正确加载。并且没有 JavaScript 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:26:57.073

您的问题是您没有使用 sEcho 查询参数进行请求，并且您正在告诉数据表验证参数是否匹配.. 测试它，如果参数不匹配，它只会处于“处理”中。

例如： `/HCAWebApp/index.php/getbuildings&sEcho=0`因为你传入`"sEcho":0`了 init。

```
 $('#binalar').dataTable({
    "bProcessing" : true,
    "bServerSide" : true,
    "sAjaxSource" : "/getbuildings.json?sEcho=0"  ,  
    "sEcho": 0
    }); 
```

JSFiddle：http: [//jsfiddle.net/ncapito/VbZhW/4/](http://jsfiddle.net/ncapito/VbZhW/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:34:45.653

我已将`sAjaxSource`源更改为相对路径并且它有效。`"sAjaxSource" : "../index.php/getbuildings"`.

# javascript - 自动折叠 html 内容

> ID：14648779
> 
> 赞同：-3
> 
> 时间：2013-02-01T14:45:50.940
> 
> 标签：javascript, jquery

也许你可以帮助我。我想用 javascript 内容自动创建**jquerymobile 折叠**（[http://jquerymobile.com/test/docs/content/content-collapsible.html ），如下所示：](http://jquerymobile.com/test/docs/content/content-collapsible.html)

```
<h3>title 1</h3>
some text

<h3>title 2</h3>
some text

<h3>title 3</h3>
some text 
```

此内容来自我以前无法操作的 JSON。
我必须包装每个：

```
<h3>title</h3>
some text 
```

有了这个 ：

```
<div data-role="collapsible" data-collapsed="true"></div> 
```

但它不起作用......救命！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:30:20.237

html

```
<h3 class="collapse" data-target="content1">Head 1</h3>
<div class="hidden" id="content1"></div>

<h3 class="collapse">Head 2</h3>
<div class="hidden" id="content2"></div>

<h3 class="collapse">Head 3</h3>
<div class="hidden" id="content3"></div> 
```

JavaScript

```
$(".collapse").each(function(){
    var el = $(this);
    el.click(function(){
        var id = el.attr("data-target");
        // files same names with id's
        $("#"+ id).load("ajax/"+ id +".html");
        // or
        $("#"+ id).load("ajax.php", function(responseText){
            $("#"+ id).html(responseText);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:58:51.463

看一下这个页面的源代码，我可以注意到 jQuery 基于点击事件动态地添加和删除类。将您的内容包装到一个 div 中，并使用 jQuery，动态地添加和删除类。就像是

```
<h3 id="collpase-bar" class="collapsed">Collapse Title</h3>
<div class="collapsible-content hidden">Content</div> 
```

使用 jQuery 函数来处理折叠标题上的单击事件并更改为此

```
<h3 id="collapse-bar" class="not-collapsed">Collapse Title</h3>
<div class="collapsible-content shown">Content</div> 
```

这是一个快速的解释，我将做一个小提琴来举例说明；）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T14:52:50.660

它可以为您提供帮助：http: [//jqueryui.com/accordion/#default](http://jqueryui.com/accordion/#default)。同时我明白，你想创建可折叠的部分。

# java - 在android java中更新json文件JSONObject

> ID：14648782
> 
> 赞同：0
> 
> 时间：2013-02-01T14:46:04.283
> 
> 标签：java

我只想知道如何在运行时更改/更新 json 文件中的值。我在如何更新 json 文件时遇到了问题。

```
public void parseJSON() throws JSONException, IOException
{
    InputStream is = this.getResources().openRawResource(R.raw.qdb);
    byte [] buffer = new byte[is.available()];
    while (is.read(buffer) != -1);

    String jsontext = new String(buffer);

    jsonObject = new JSONObject(jsontext);

    JSONObject object = jsonObject.getJSONObject("level1");

    String c = object.put("value2", "third value").toString();

    String attr1 = object.getString("value1");
    String attr2 = object.getString("value2");

    strParsedValue="Value 1 = "+attr1;
    strParsedValue+="\nValue 2 = "+attr2;
    strParsedValue+="\n\n\n" + c;

    txtViewParsedValue.setText(strParsedValue);
} 
```

**Json文件：** {“level1”：{“value1”：“一个值”，“value2”：“两个值”}}

**输出：**

```
Value 1= one value
Value 2 = third value

{"value1":"one value","value2":"third value"}

{
 "level":{
  "value1":"one value",
  "value2":"two value"
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:48:28.220

**应该是这种格式：while(condition to test){ code to execute here } 也可能是其他语法错误，所以我并不是说你的程序现在可以工作**

**例子：**

```
public void parseJSON() throws JSONException, IOException
    {
        InputStream is = this.getResources().openRawResource(R.raw.qdb);
        byte [] buffer = new byte[is.available()];
        while (is.read(buffer) != -1){

               example code to execute here;
        }

    } 
```

# java - 在 typica 库 1.7 中获取 simpledb 域的所有项目

> ID：14648785
> 
> 赞同：1
> 
> 时间：2013-02-01T14:46:07.270
> 
> 标签：java, amazon-simpledb

在 typica 1.7 中，Domain 类中没有 listItemsWithAttributes 函数，而这在早期版本中可用。如何使用 Typica 1.7 获取域中的项目列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:00:28.140

请参阅com.xerox.amazonws.simpledb.Domain 类的**selectItems**方法。您需要传递带有显式属性列表的查询。

您可以在 SELECT 查询中指定一个明确的属性列表（attribute1，...，attributeN） -

```
select attribute1,..., attributeN from <domain name> 
```

方法 -

```
public SDBListResult<Item> selectItems(String selectExpression,
                                   String nextToken,
                                   boolean consistent)
                            throws SDBException

Performs a query against this domain. A set of items is returned which may not be complete. If the nextToken in the result is set, this method can be called again with the same query and the supplied nextToken.

Parameters:
    selectExpression - the query to be run
    nextToken - an optional token to get more results
    consistent - if true, consistency is assured 
Throws:
    SDBException - wraps checked exceptions 
```

# android - 调试到 Android 源代码

> ID：14648788
> 
> 赞同：6
> 
> 时间：2013-02-01T14:46:24.873
> 
> 标签：android, eclipse, debugging

我是 Android 新手，我正在尝试调试 Android 应用程序问题（使用带有 Android SDK 的 Eclipse）。

我想进入 Android 平台代码（特别是 中的代码`Activity.class`，更具体地说`startActivityForResult()`是发生问题的方法中的代码），我似乎无法正确让 Eclipse 找到代码，`Activity.class`因此我可以介入并查看那个来源。它给了我“找不到源”，我尝试`android.jar`使用“更改附加源”按钮或通过项目属性从几个地方附加，但这些似乎都不起作用。（从文件夹中获取的 android.jar`adt-bundle/sdk/platforms/android-7`以及从`prebuilts/sdk/7`repo 文件夹中获取的版本。）

我正在使用 Google APIs 7 (Android 2.1) 构建/调试。该项目设置为以 Google API 7 为目标，Android 虚拟设备也设置为该目标。

我尝试将源附件指向包含`Activity.java`从最新存储库 ( `frameworks/base/core/java/android`) 下载的本地目录。

我是否需要尝试从存储库中获取用于 Android 2.1 的源目录的版本？还是我使用 Google API 7（而不是 Android 开源 2.1）构建的事实是问题所在？或者还有其他`android.jar`我应该指出的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T15:24:38.997

如果您使用的是 Eclipse，您可以转到帮助 > 安装新软件并粘贴此链接： [http ://adt-addons.googlecode.com/svn/trunk/source/com.android.ide.eclipse.source.update /](http://adt-addons.googlecode.com/svn/trunk/source/com.android.ide.eclipse.source.update/)

这是一个在 Eclipse 上附加 android 源代码的插件，其他方式有点复杂，我没有尝试过，但你可以按照下面的 URL 进行操作。

*   这是信用来源：[http ://www.mkyong.com/android/attach-android-source-code-to-eclipse-ide/](http://www.mkyong.com/android/attach-android-source-code-to-eclipse-ide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T12:26:53.150

还有另一种简单的方法（虽然这不能用于 API v7）

此方法可用于所有提供 Sources 的 API。

1.  为 API 下载 Android SDK 的源代码。

2.  转到 android SDK 中的源文件夹并复制下载的源。例如：如果您已下载 API 15 的源代码，则在您的 sdk 中将有一个名为 sources 的文件夹，并且在该文件夹中将列出所有下载的源代码。所以复制相应的源文件夹（在本例中将命名为 android-15）。

3.  现在转到platforms文件夹->进入相应的API（android-15）文件夹->然后创建一个名为sources的文件夹->进入sources并粘贴您之前复制的文件夹。

# qt - 使用 Visual Studio 2012（64 位）编译 Qt 5.0

> ID：14648791
> 
> 赞同：3
> 
> 时间：2013-02-01T14:46:46.973
> 
> 标签：qt, windows-7, visual-studio-2012, qt5

我尝试使用 Visual Studio 2012 Pro 和 Windows 7 编译 Qt 5.0.1。

我从源代码 Qt 5.0 制作 git clone

我进行配置，然后在命令行开发工具中进行 nmake。

但这是链接器错误：

```
 echo 1 /* CREATEPROCESS_MANIFEST_RESOURCE_ID */ 24 /* RT_MANIFEST */ "..
\\..\\..\\..\\plugins\\platforms\\qwindowsd.dll.embed.manifest">..\..\..\..\plug
ins\platforms\qwindowsd.dll_manifest.rc
        if not exist ..\..\..\..\plugins\platforms\qwindowsd.dll del ..\..\..\..
\plugins\platforms\qwindowsd.dll.embed.manifest>NUL 2>&1
        if exist ..\..\..\..\plugins\platforms\qwindowsd.dll.embed.manifest copy
 /Y ..\..\..\..\plugins\platforms\qwindowsd.dll.embed.manifest ..\..\..\..\plugi
ns\platforms\qwindowsd.dll_manifest.bak
        link /NOLOGO /DYNAMICBASE /NXCOMPAT /DEBUG /DLL /MANIFEST /MANIFESTFILE:
..\..\..\..\plugins\platforms\qwindowsd.dll.embed.manifest /OUT:..\..\..\..\plug
ins\platforms\qwindowsd.dll @C:\Users\tanya\AppData\Local\Temp\nmD410.tmp
   Creating library ..\..\..\..\plugins\platforms\qwindowsd.lib and object ..\
..\..\..\plugins\platforms\qwindowsd.exp

dlldata.obj : error LNK2001: unresolved external symbol "_Accessible2_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleAction_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleApplication_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleComponent_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleEditableText_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleHyperlink_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleHypertext_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleImage_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleRelation_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleTable_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleTable2_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleTableCell_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleText_ProxyFileInfo"
dlldata.obj : error LNK2001: unresolved external symbol "_AccessibleValue_ProxyFileInfo"
..\..\..\..\plugins\platforms\qwindowsd.dll : fatal error LNK1120: 14 unresolved externals
NMAKE : fatal error U1077: "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\link.EXE" : return code "0x460"
Stop.
NMAKE : fatal error U1077: "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\BIN\nmake.exe" : return code "0x2"
Stop.
NMAKE : fatal error U1077: cd : return code "0x2"
Stop.
NMAKE : fatal error U1077: cd : return code "0x2"
Stop.
NMAKE : fatal error U1077: cd : return code "0x2"
Stop.
NMAKE : fatal error U1077: cd : return code "0x2"
Stop.
NMAKE : fatal error U1077: cd : return code "0x2"
Stop. 
```

请帮我！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T21:21:57.117

确保你编译：

```
 -no-accessibility -nomake demos -nomake examples 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-04T07:07:24.950

下载 5.0.1 它编译没有任何错误。

# python - RegEx - 查找字符串中最后找到的符号的位置

> ID：14648793
> 
> 赞同：1
> 
> 时间：2013-02-01T14:46:49.740
> 
> 标签：python, regex, string

我正在努力使用 Python 中的正则表达式，我想找到字符串中最后一个标记的位置。

示例：“mydrive/projects/test/version01”

现在我想获得“test”和“version01”之间的符号位置

```
import re
txt = "mydrive/projects/test/version01"
p = re.compile("/^.*/(.*)$/")
m = re.search(p, txt)
m.group(0) 
#but m.group(0) delivers None 
```

但是有了这个我得到“无”我尝试了几件事，但无法找到模式。顺便说一句，我从 javascript 页面获得了这个正则表达式，但我认为模式是相同的。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:49:03.237

您`re`以错误的方式使用该模块。

您有 2 个错误：

1.  ~~您尝试使用已编译的正则表达式对象，就好像它是一种模式~~实际上这很好，请参阅[`search.sub`文​​档](http://docs.python.org/2/library/re.html#re.sub)。
2.  Python`re`不需要正则表达式周围的斜线。

要么使用：

```
p = re.compile("^.*/(.*)$")
m = p.search(txt)
m.group(0) 
```

或者：

```
m = re.search("^.*/(.*)$", txt)
m.group(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:55:35.960

你说：现在我想得到符号在“test”和“version01”之间的位置。

我看不出正则表达式对你有多大帮助。您可以尝试以下方法：

如果您知道符号是什么，则反向扫描符号（我假设您知道，因为它也在正则表达式中）：

```
>>> txt = "mydrive/projects/test/version01"
>>> txt.rfind('/')
21 
```

如果您不知道分隔符：

```
>>> import os.path
>>> len(os.path.dirname(txt))
21 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:56:59.647

我很好奇您是要使用`re`还是实际上正在尝试拆分该文件路径？

`os.path`如果是这种情况，您需要的一切，如果不原谅我回答未提出的问题。

```
In [212]: import os
In [213]: os.path.split("mydrive/projects/test/version01")
Out[213]: ('mydrive/projects/test', 'version01') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T14:54:59.727

如果您想在“test”和“version01”之间找到符号的位置，我只需使用[rfind](http://docs.python.org/2/library/string.html#string.rfind)：

```
txt = "mydrive/projects/test/version01"
print txt.rfind("/"); 
```

打印出来`21`。

# windows - 每个 Windows 操作系统的注册表中的 CurrentVersion 值

> ID：14648796
> 
> 赞同：10
> 
> 时间：2013-02-01T14:47:02.563
> 
> 标签：windows, registry, nsis

我想知道`CurrentVersion`每个操作系统的价值

```
HKLM "SOFTWARE\Microsoft\Windows NT\CurrentVersion" 
```

例如：我的机器上安装了 windows 7 专业版，`CurrentVersion`值为`6.1`.

任何人都可以列出自 Windows 98 以来的所有 Windows 操作系统吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T07:17:32.083

这些是所需的 Windows 操作系统版本：

```
Operating system              Version number
----------------------------  --------------
Windows 10                      10.0
Windows Server 2019             10.0
Windows Server 2016             10.0
Windows 8.1                     6.3
Windows Server 2012 R2          6.3
Windows 8                       6.2
Windows Server 2012             6.2
Windows 7                       6.1
Windows Server 2008 R2          6.1
Windows Server 2008             6.0
Windows Vista                   6.0
Windows Server 2003 R2          5.2
Windows Server 2003             5.2
Windows XP 64-Bit Edition       5.2
Windows XP                      5.1
Windows 2000                    5.0
Windows ME                      4.90
Windows 98                      4.10 
```

如果您想通过从注册表中读取它来了解它，您还需要检查新`CurrentMajor/MinorVersionNumber`密钥。Windows 10 下的新值`CurrentMajorVersionNumber`（即 10）和`CurrentMinorVersionNumber`（即 0）。这[两个键是 Windows 10 中的新键，用于从 Registry 检测 Windows 版本](https://github.com/project-jedi/jcl/pull/18/files#diff-ea48926a7d3868ba7cb1597fc48cff54R3868)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T17:09:00.360

您应该使用`WinVer.nsh`检查 Windows 版本...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-04T22:11:27.210

您还可以使用以下键获取有关操作系统的更具体的字符串详细信息

注册查询 "\hostname\HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion" /v ProductName

我发现存在于 Windows XP 及以上版本....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-26T16:10:50.773

位于 MSDN 的可更新列表： [https ://msdn.microsoft.com/en-us/library/windows/desktop/ms724832.aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms724832.aspx)

目前（2015 年 3 月）：

```
Operating system              Version number
----------------------------  --------------
Windows 10 Tech.Preview       10.0
Windows Server Techn.Preview  10.0
Windows 8.1                    6.3
Windows Server 2012 R2         6.3
Windows 8                      6.2
Windows Server 2012            6.2
Windows 7                      6.1
Windows Server 2008 R2         6.1
Windows Server 2008            6.0
Windows Vista                  6.0
Windows Server 2003 R2         5.2
Windows Server 2003            5.2
Windows XP 64-Bit Edition      5.2
Windows XP                     5.1
Windows 2000                   5.0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-02T15:14:39.563

刚刚检查了 Windows 10 Pro，它是 6.3 版

# perl - 如何检索已保存的 RDF::Redland 持久存储？

> ID：14648799
> 
> 赞同：0
> 
> 时间：2013-02-01T14:47:09.767
> 
> 标签：perl, rdf, persistent-storage, redland

在创建持久存储和模型并将 RDF/XML 文件解析到其中时，Perl 的 Redland 库和 RDF::Redland 绑定有很好的文档，例如[这里](http://kill.devc.at/internet/semantic-web/rdf/redland/tutorial)和[这里。](https://github.com/dajobe/redland-bindings/blob/master/perl/example.pl)

另一方面，我找不到任何关于如何从我的持久存储中检索模型的示例，并且明显的方法不起作用。

这就是我创建商店的方式：

```
my $storage =
  new RDF::Redland::Storage( "hashes", "test",
    "new='yes',hash-type='bdb',dir='data'" )
  or die "Failed to create RDF::Redland::Storage\n";

my $model = new RDF::Redland::Model( $storage, "" )
  or die "Failed to create RDF::Redland::Model for storage\n";

my $uri = new RDF::Redland::URI("file:test.rdf");

my $parser = new RDF::Redland::Parser( "rdfxml", "application/rdf+xml" )
  or die "Failed to find parser\n";

my $stream = $parser->parse_as_stream( $uri, $uri );
my $count = 0;
while ( !$stream->end ) {
    $model->add_statement( $stream->current );
    $count++;
    $stream->next;
}

$stream = undef;
$storage = undef;
$model   = undef;

print "Done. There were $count statements.\n"; 
```

这有效并告诉我我有 300k 的声明。

然后我尝试用另一个脚本检索这些数据：

```
my $storage =
  new RDF::Redland::Storage( "hashes", "test",
    "hash-type='bdb',dir='data'" )
  or die "Failed to create RDF::Redland::Storage\n";

my $model = new RDF::Redland::Model( $storage, "" )
  or die "Failed to create RDF::Redland::Model for storage\n";

$model->sync; # tried with and without this line

my $stream = $model->as_stream;
while ( !$stream->end ) {
    print "Statement: ", $stream->current->as_string, "\n";
    $stream->next;
} 
```

这绝对不会打印任何内容。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:33:27.460

我找到了解决自己问题的方法，为此浪费了这么多小时，我感到非常愚蠢。因此，如果这可以帮助其他人经历同样的地狱，那就是。

问题不在于检索商店，而在于保存它。这并不明显，因为三个 Berkeley DB 文件加起来有 366 MB。因此，在第一个脚本结束时，就在`undef`存储和模型之前，需要将它们与`$model->sync`.

就是这样。

（之后伯克利文件的大小仍然完全相同，只是它可以工作。不要问我为什么。）

# wpf - WriteableBitmap.Savejpeg 不渲染网格文本（图像正常）

> ID：14648800
> 
> 赞同：0
> 
> 时间：2013-02-01T14:47:12.060
> 
> 标签：wpf, silverlight, windows-phone-7, writeablebitmap

我在用户控件中有一个网格：

```
<Grid x:Name="LayoutRoot" Background="{StaticResource PhoneAccentBrush}">
    <Image 
        x:Name="imgBack"
        Opacity=".25" />
    <Grid VerticalAlignment="Top" HorizontalAlignment="Left">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <!-- Some textblocks -->
</Grid> 
```

图像的网格和源的大小在运行时动态设置：

```
public void ChangeSizeAndImage(int width, int height, string backImagePath)
{
    // Set the height and width
    LayoutRoot.Width = width;
    LayoutRoot.Height = height;

    // Set the background image
    imgBack.Source = new BitmapImage(new Uri(backImagePath, UriKind.RelativeOrAbsolute));

    this.UpdateLayout();
} 
```

然后我调用一个从 ui 元素生成 jpeg 并将其保存到 IsolatedStorage 的方法（稍后添加到 Windows Phone Live Tile）

```
public static Uri CreateImageFromUIElement(UIElement element, int width, int height)
{
    // Instance to store the image in
    IsolatedStorageFile userStore = IsolatedStorageFile.GetUserStoreForApplication();

    // Random ID to use for the file name
    string id = Guid.NewGuid().ToString("n");

    // create directory to read/write from
    const string shellContentDirectory = "Shared\\ShellContent";
    userStore.CreateDirectory(shellContentDirectory);

    // Render the UIElement into a writeable bitmap
    WriteableBitmap bitmap = new WriteableBitmap(element, new CompositeTransform());

    // Save the bitmap to a file. This stream must be closed in order to be read later
    string imagePath = shellContentDirectory + "\\" + id + ".jpg";
    using (IsolatedStorageFileStream stream = userStore.OpenFile(imagePath, System.IO.FileMode.Create))
    {
        bitmap.SaveJpeg(stream, width, height, 0, 100);
    }

    // Uri to get us to the image
    Uri imageUri = new Uri("isostore:/" + imagePath.Replace('\\', '/'));
    return imageUri;
} 
```

我能够成功地使用磁贴上的图像，除了我只看到黑色背景的图像，我看不到任何文字。我认为这与 jpeg 和透明 PNG 有关，但是，我在上面的网格上设置了一种颜色的背景，所以我不确定为什么它会被认为是透明的。

**编辑 1** 我正在以编程方式初始化此用户控件，设置一些属性，并将其传递给 create image 方法。我发现如果我将此用户控件添加到页面，然后使用调用创建图像方法，它工作得很好。一定有一些关于它在页面上呈现的东西，导致所有东西都正确排列。不幸的是，这种方法在我的情况下是不可能的。有什么步骤可以让这个工作吗？`UpdateLayout();`在控件上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:22:35.243

您遇到了以后台方式呈现 XAML 的巨大挑战。在最终意识到它是什么之前，我在同一个问题上跑来跑去。更糟糕的是，每隔一段时间它就可以正常工作！

问题是图像的加载方式。创建控件时，会创建 Image 元素，并将图像加载/解码启动到另一个线程。与此同时，您的线程继续运行。您将控件渲染到文件并保存它，片刻之后（这是您看不到的部分）图像完成加载，并进行实际渲染。太令人沮丧了！

你不能只是拖延在那里，因为你不知道需要多长时间（而且我不确定它是否会那样工作。你要做的就是将你的工作分成多个部分，并且订阅 Image 上的 ImageOpened 事件。当事件触发时，您可以相信一切正常并保存位图。

在后台代理中，这很棘手，因为您需要推迟调用 NotifyComplete() 直到那时，当然图像可能由于多种原因而无法加载。为了完整起见，您还需要订阅 ImageFailed 事件并处理它！

在 WP8 应用程序中，您应该使用 async/await 模式来简化整个流程。在 WP7 中，您需要自己同步事物。如果您需要，我可以发布一些代码。

我希望我有一个更简单的解决方案给你，但希望这会让你朝着正确的方向前进！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:10:04.923

这对我有用：

```
UserControl myControl = new UserControl();
myControl.Arrange(new Rect(0, 0, Width, Height));

WriteableBitmap writeable = new WriteableBitmap(Width, Height);
Writeable.Render(Control, null);
writeable.Invalidate();

IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile("/Shared/ShellContent/" + Filename);

System.Windows.Media.Imaging.Extensions.SaveJpeg(writeable, fileStream, Width, Height, 0, 100);
fileStream.Close(); 
```

希望这可以帮助。

# navigation - 基础Zurb导航

> ID：14648803
> 
> 赞同：0
> 
> 时间：2013-02-01T14:47:31.100
> 
> 标签：navigation, zurb-foundation

我正在使用foundation zurb 3， 如果浏览器全屏，则导航看起来不错，但是当我压缩它时，我只有黑条[。](http://foundation.zurb.com/docs/navigation.php#topbarCode)也许有些人有这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:48:22.547

很难在没有看到您的示例的情况下说出发生了什么（链接不起作用），但最好的起点往往是将某人的工作代码复制到您的文件中，看看它是否正常运行。以此为基准，您可以将其与您的代码进行比较，以查看差异所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:20:08.060

自从我修补 Foundation 以来已经有一段时间了，但我在尝试更改 css 文件中的屏幕宽度设置时遇到了类似的问题 - 我相信有多个设置必须相同才能使顶栏正常工作。

要使其正常工作，您必须：

*   从他们的网站下载 Foundation 库的新副本，使用他们的自定义工具设置屏幕宽度（此后不要更改），或者

*   使用 SASS 版本，并更改​​ SCSS 文件中的屏幕宽度变量（我实际上没有这样做，因此无法提供更多详细信息）。

编辑：刚刚查看了您的代码片段 - 您可能需要包含一个断点，使用`toggle-topbar`列表项类，例如

```
<li class="toggle-topbar"><a href="#"></a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T15:18:26.150

如果您将切换顶部栏的宽度从 50% 更改为 100%：

```
.top-bar ul > li.toggle-topbar {
    cursor: pointer;
    display: block;
    height: 45px;
    position: absolute;
    right: 0;
    top: 0;
    width: 50%;
} 
```

到

```
width: 100%; 
```

该网站演示了这种技术：

[http://catch-ps.com/](http://catch-ps.com/)

# c# - 为什么这段代码在我的生产环境中不起作用？

> ID：14648804
> 
> 赞同：0
> 
> 时间：2013-02-01T14:47:32.320
> 
> 标签：c#, asp.net

下面的代码在 Dev 和 Stage 环境中完美运行，但不适用于 Production。Stage 和 Prod 都在 IIS7 上。我已经确认 litTest 正在设置并显示在页面上，但该类从未出现在 prod 中的 html 控件上。我很困惑！

```
 protected void lvQuestionList_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {            

        ListViewDataItem dataItem = (ListViewDataItem)e.Item;
        TT.BusinessLogic.stQuestion question = (TT.BusinessLogic.stQuestion)dataItem.DataItem;

        HtmlControl tr = (HtmlControl)dataItem.FindControl("trRow");
        if (tr != null && question.stStatus.Status == "New")
            tr.Attributes.Add("class", "direct-row");

        if (SortedAnimation != null && question.QuestionId == new Guid(SortedAnimation))
        {

            if (tr != null && question.stStatus.Status == "New")

                tr.Attributes["class"] = "sortanim direct-row";
            else
            {

                tr.Attributes["class"] = "sortanim";
                litTest.Text = SortedAnimation + "test";
            }

            SortedAnimation = null;
        }
    }
} 
```

还应该提到这个列表视图在更新面板中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:07:13.140

弄清楚了。从 Prod a 提取的数据能够重新创建。这是双重绑定，第二次绑定正在消灭班级。我忘记了这是自动触发的，我不需要在排序后显式绑定。

```
protected void dpListView_PreRender(object sender, EventArgs e)
{

    bindFilteredQuestions();
} 
```

# string - XSLT 2.0 被视为字符串的值的总和

> ID：14648805
> 
> 赞同：2
> 
> 时间：2013-02-01T14:47:36.823
> 
> 标签：string, sum, xslt-2.0

我面临着我认为这是一个简单的问题，但我被困住了。这是一个xml数据

```
<?xml version="1.0" encoding="UTF-8"?>
<report endDate="2013/02/01 15:10:14" environment="Q000" startDate="2013/01/25 15:10:14">
<distrib appCode="LI" busLine="IL" context="" id="2013-01-25-15.10.11.785293" network="FBB" subNetwork="Z">
  <deliv id="2013-01-25-15.10.11.785295" mode="1" role="">
     <comm id="2013-01-25-15.10.11.785297" role="">
        <group id="001">
           <doc id="950955269" nbPages="1" templateId="LVMED1" />
        </group>
        <group id="002">
           <doc id="950955270" nbPages="6" templateId="BALVANW_FA" />
        </group>
        <group id="003">
           <doc id="950955271" nbPages="" templateId="LVMED23" />
        </group>
     </comm>
  </deliv>
</distrib>
<distrib appCode="LI" busLine="IL" context="" id="2013-01-25-15.18.29.871466" network="FBB" subNetwork="Z">
  <deliv id="2013-01-25-15.18.29.871468" mode="1" role="">
     <comm id="2013-01-25-15.18.29.871469" role="">
        <group id="001">
           <doc id="950955331" nbPages="2" templateId="LVMED10" />
        </group>
     </comm>
  </deliv>
</distrib>
</report> 
```

我想总结元素'doc'中属性nbPages的内容

这是我使用的 xslt：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
exclude-result-prefixes="xs"
version="2.0">
<xsl:output method="text" />

<xsl:template match="report">
  <xsl:value-of select="count(//doc)"/>
  <xsl:value-of select="sum(//doc[@nbPages])"/>
</xsl:template>

</xsl:stylesheet> 
```

计数效果很好，但总和却不行。

**[Saxon-PE 9.3.0.5] 无法将字符串 {} 转换为双精度**

我尝试使用以下替代方法但没有成功：

```
<xsl:value-of select="sum(number(//doc[@nbPages]))"/>
<xsl:value-of select="sum(//doc[number(@nbPages)])"/> 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T17:27:04.963

**使用**：

```
sum(//doc/@nbPages[number(.) = number(.)]) 
```

**这是一个完整的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:value-of select="sum(//doc/@nbPages[number(.) = number(.)])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**产生正确的结果**：

```
9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T15:05:42.943

您的 XPATH 对于 sum 函数是错误的。

自从

`//doc[@nbPages]`：此 XPath 返回节点，而不是`nbPages`属性的值。

这样做： -

`//doc[not(@nbPages) or @nbPages!='']/@nbPages`：此 XPath 检查`nbPages`属性是否存在且不为空。

```
sum(//doc[not(@nbPages) or @nbPages!='']/@nbPages)

<xsl:value-of select="sum(//doc[not(@nbPages) or @nbPages!='']/@nbPages)"/> 
```

## XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs" version="2.0">
    <xsl:output method="text"/>
    <xsl:template match="report">
        <xsl:value-of select="count(//doc)"/>
        <xsl:value-of select="sum(//doc[not(@nbPages) or @nbPages!='']/@nbPages)"/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:13:13.723

像这样使用 xpath 表达式：

```
<xsl:value-of select="sum(//doc/@nbPages)"/> 
```

同样的问题在这里： [xsl summation](https://stackoverflow.com/questions/1815348/xsl-to-produce-summation-value-for-each-attribute)

# java - 如何以编程方式停止 ServletRequestListener？

> ID：14648818
> 
> 赞同：1
> 
> 时间：2013-02-01T14:48:41.583
> 
> 标签：java, servlets

在接收来自 Web 服务 Java 应用程序的请求时，我正在使用 ServletRequestListener 执行某些逻辑。在某些时候，我想停止收听收到的每个请求。有没有办法以编程方式停止或禁用 ServletRequestListener 侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:53:16.870

虽然可以以[编程方式添加侦听器](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#addListener%28T%29)，但无法以编程方式停止或删除侦听器。您可以做的最好的事情是让它在继续之前检查一些应用程序范围的变量，然后切换该应用程序范围的变量。

例如

```
@Override
public void requestInitialized(ServletRequestEvent event) {
    if (event.getServletContext().getAttribute("disableListener") == Boolean.TRUE) {
        return;
    }

    // Do the original job here.
}

@Override
public void requestDestroyed(ServletRequestEvent event) {
    if (event.getServletContext().getAttribute("disableListener") == Boolean.TRUE) {
        return;
    }

    // Do the original job here.
} 
```

并禁用它，只需执行

```
servletContext.setAttribute("disableListener", true); 
```

并重新启用它，只需执行

```
servletContext.removeAttribute("disableListener"); 
```

# ruby-on-rails - 在设计注册中创建和分配一个有很多通过关系

> ID：14648819
> 
> 赞同：0
> 
> 时间：2013-02-01T14:48:43.827
> 
> 标签：ruby-on-rails, devise, nested-attributes

当用户通过设计注册时，我正在尝试创建一个新的合作伙伴对象，然后在创建用户时分配该关系。这是我目前拥有的：

**模型/用户.rb**

```
 devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :token_authenticatable, :omniauthable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :admin, :partner_ids, :provider, :uid

  #has_and_belongs_to_many :partners
  has_many :partners, :through => :partners_users
  has_many :partners_users
  accepts_nested_attributes_for :partners_users
  accepts_nested_attributes_for :partners

  def with_partner
    self.partners.build
    self
  end 
```

**模式/合作伙伴.rb**

```
 attr_accessible :name, :address, :verified, :verification_code

  has_many :users, :through => :partners_users
  has_many :partners_users
  has_many :places
  has_many :offers 
```

**报名表**

registration_path(resource_name) 做 |f| %> 账户信息 商业信息 5 %> “大花式按钮” %>

目前，当我提交表单时，出现以下错误：

```
Can't mass-assign protected attributes: partner 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:57:31.177

看看[这个](http://railscasts.com/episodes/26-hackers-love-mass-assignment)。

拥有模型使您能够将数据发送到`accepts_nested_attributes_for`模型。`User``Partner`

然后，在 User 模型中，您必须设置请求的`attr_accessible`.

```
attr_accessible : partner_attributes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:51:18.737

如果您将accepts_nested_attributes 与attr_accessible 一起使用，则需要将属性放在attr_accessible 中：

```
attr_accessible :partner_attributes 
```

# asp.net - 登录asp.net配置，无法登录更多

> ID：14648820
> 
> 赞同：0
> 
> 时间：2013-02-01T14:48:44.387
> 
> 标签：asp.net, login, configuration

我搜索了很多，但找不到如何解决我的问题。我有一个 asp:Login 控件来登录到 CMS 系统。它作为一个星期的魅力发挥了作用，而不是突然我无法登录更多。这发生在同一台机器，同一个数据库上。

我创建了新用户、新角色、新的一切，但总是写着“您的登录尝试不成功。请再试一次。”

然后我尝试处理 LoginError 事件，就像这里描述的[4guysFromRolla](http://www.4guysfromrolla.com/articles/050306-1.aspx)和 debugged 一样，但它不会在 IsLockedOut() 或 IsApproved() 上停止。即使在数据库表 Membership 中，所有 IsLockedOut 设置为 false 并且所有 IsApproved 设置为 true：

这是 web.config 部分

```
<compilation debug="true">
<authentication mode="Forms" />
<machineKey decryption="AES" validation="SHA1" decryptionKey="1513F567EE75F7FB5AC0AC4D79E1D9F25430E3E2F1BCDD3370BCFC4EFC97A541" validationKey="32CBA563F26041EE5B5FE9581076C40618DCC1218F5F447634EDE8624508A129"/>
<membership defaultProvider="SimpleCMSSqlMembershipProvider">
  <providers>
    <add name="SimpleCMSSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
      connectionStringName="SimpleCMS1ConnectionString"
      enablePasswordRetrieval="false"
      enablePasswordReset="true"
      requiresQuestionAndAnswer="true"
      applicationName="/"
      requiresUniqueEmail="false"
      passwordFormat="Hashed"
      maxInvalidPasswordAttempts="5"
      minRequiredPasswordLength="5"
      minRequiredNonalphanumericCharacters="0"
      passwordAttemptWindow="10"
      passwordStrengthRegularExpression=""/>
  </providers>
</membership>

 <connectionStrings>
     <add name="SimpleCMS1ConnectionString" connectionString="Data Source=CENE\SQLEXPRESS;Initial   Catalog=SimpleCMS1;Persist Security Info=True;User ID=SimpleCMSUser;Password="aaaaaa"
       providerName="System.Data.SqlClient" />
     <add name="SimpleCMS1ConnectionString1" connectionString="Data Source=CENE\SQLEXPRESS;Initial Catalog=SimpleCMS1;User ID=sa;Password=aaaaaaaa"
      providerName="System.Data.SqlClient" />
  </connectionStrings>

<roleManager enabled="true">
  <providers>
    <clear />
    <add connectionStringName="SimpleCMS1ConnectionString" applicationName="/"
      name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </providers>
</roleManager> 
```

有什么建议吗，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:15:34.683

如果您仅使用此行`<authentication mode="Forms" />`进行身份验证设置，那么这可能是您的问题。你必须有类似的东西：

```
<authentication mode="Forms">
  <forms name=".klidi" loginUrl="~/login.aspx" protection="All" 
         timeout="10" path="/" requireSSL="true" 
         cookieless="UseCookies" 
         domain="yourdomain.com" enableCrossAppRedirects="false" slidingExpiration="true" />
</authentication> 
```

不要让它随机工作，而是设置你的参数。

对于`requireSSL="true"`参数，请阅读此问题[某些黑客可以从用户那里窃取 cookie 并在网站上使用该名称登录吗？](https://stackoverflow.com/questions/2498599/can-some-hacker-steal-the-cookie-from-a-user-and-login-with-that-name-on-a-web-s) . 如果您保留它，请确保使用 ssl 页面，否则登录将始终失败。

# vba - 如何将运算符应用于 Excel VBA 中的范围副本

> ID：14648822
> 
> 赞同：0
> 
> 时间：2013-02-01T14:48:57.760
> 
> 标签：vba, excel, operators

**背景：**我有一个函数，它需要几个范围作为输入并进行一些计算。它被广泛使用，所以我很想尽可能避免改变它。

但是，我现在需要使用相同的函数，但是对于其中一个范围，我需要让它在该范围的负等效项上运行。

我的问题是：**有没有一种简单的方法来操作一个范围的副本？**（在不更改电子表格中的基础源数据的情况下 - 我不能在那里将所有值变为负值，它只是计算中需要的）。

我尝试编写一个简单的函数（如下）。我不知道我是否以错误的方式考虑 VBA 范围，但是每当我分配它时，影响都会反映在源上（即，它是以按引用方式而不是按值方式执行的，如果这在这个上下文）

```
Function NegateRangeContents(rRange As Range) As Range
  Dim r As Range
  Dim rOutput As Range

  Set rOutput = rRange

  For Each r In rOutput
    r.Value = -r.Value
  Next r

  Set NegateRangeContents = rOutput
  Set r = Nothing
  Set rOutput = Nothing

End Function 
```

我确实尝试用谷歌搜索来寻找答案，并在这里寻找类似的问题。

也许我错过了一些明显的东西，只是需要更多的咖啡？！任何建议都欣然接受！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:03:33.970

如果您当前的范围在`Sheet 1`,

*   首先将其复制到`Sheet2`（或任何新的空工作表以具有该范围数据的副本）。
*   将新的工作表范围输入到函数中
*   接下来做你需要的计算。相应地输出。

至于获取单元格值的负值，请尝试以下操作：

```
For Each r In rOutput
    r.Value = r.Value - (r.Value * 2)
Next r

'-- eg. cell value = 2, the new value would be 2 - (2*2) = - 2 
```

PS：真的不知道你的意思是***我需要让它在范围的负等效值上运行。***如果你能澄清它，我们也许能够提供一个具体的解决方案......

# objective-c - 在 Objective-C 中解码 Base64 字符串

> ID：14648825
> 
> 赞同：-5
> 
> 时间：2013-02-01T14:49:01.330
> 
> 标签：objective-c, base64

我是 objecive-C 的新手，我想解码一个用 Base64 编码的 NSString。

你有什么想法可以帮助我吗？

NSString 编码：

> eyJjbGUIOiJwOW5oOTk3eDRxdhpnZzciLCJ1cmwiOiJtbGtqcW1sa3FzbWxmbXFsanFkln0

NSString 我试图找到：

> {"cle":"p9nh997x4qvgg7","url":"mlkjqmlkqsmlfmqljqd}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T14:55:30.493

获取 base64 库：[https ://github.com/l4u/NSData-Base64](https://github.com/l4u/NSData-Base64)

从字符串创建 NSData：

```
NSData *data = [NSData dataFromBase64String:string]; 
```

将该数据转换为字符串

```
NSString *convertedString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

# extjs - Sencha 中 MULTI Select 列表的 getSelection 数组值

> ID：14648826
> 
> 赞同：0
> 
> 时间：2013-02-01T14:49:01.937
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-architect

我不知道如何获取 MULTI 选择列表的值。

我尝试使用该方法`getSelection`；但是，我收到一个未定义的错误。这是我的代码：

```
refs : {
    optionlist : 'Overlayitemlist',
},
var reco= Ext.getCmp('optionlist').getSelection() ; 
```

这是错误：

> 未捕获的类型错误：无法调用未定义的方法“getSelection”

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:36:53.813

您可以使用[`selectionchange`](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.List-event-selectionchange)事件来跟踪您的多选，并基于此，您可以将所有这些值推送到数组中。这是一个例子：

```
Ext.create('Ext.List', {
    fullscreen: true,
    mode: 'MULTI',
    store: {
        fields: ['name'],
            data: [{
            name: 'Red'
        }, {
            name: 'Orange'
        }, {
            name: 'Yellow'
        }, {
            name: 'Green'
        }, {
            name: 'Blue'
        }] // data
    }, // store
     itemTpl: '{name}',
     listeners: {
         selectionchange: function (list, records) {
            var names = [];
            Ext.Array.each(records, function (item) {
                names.push('<li>' + item.data.name + '</li>');
            });
            Ext.Msg.alert('You selected ' + records.length + ' item(s)', '<ul>' + names.join('') + '</ul>');
         } 
     } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T12:33:33.007

这是 Senhca 网站（[链接](http://try.sencha.com/touch/2.2.0/demos/Ext.List.mode/)）的更新示例。显然，即使他们的演示也无法正常工作。

```
/*global Ext:false */
Ext.application({
    launch: function () {
        Ext.create('Ext.List', {
            fullscreen: true,
            mode: 'MULTI',
            store: {
                fields: ['name'],
                data: [{
                    name: 'Red'
                }, {
                    name: 'Orange'
                }, {
                    name: 'Yellow'
                }, {
                    name: 'Green'
                }, {
                    name: 'Blue'
                }] // data
            }, // store
            itemTpl: '{name}',
            listeners: {
                selectionchange: function (list, records) {
                    var names = [];
                    Ext.Array.each(list.selected.items, function (item) {
                        names.push('<li>' + item.data.name + '</li>');
                    }); // each()

                    Ext.Msg.alert('You selected ' + list.selected.items.length + ' item(s)');
                } // selectionchange
            } // listeners
        }); // create()
    } // launch
}); // application() 
```

# c++ - 无向图中的 4 个循环

> ID：14648828
> 
> 赞同：-3
> 
> 时间：2013-02-01T14:49:11.963
> 
> 标签：c++, algorithm, graph, cycle

我有一个无向图，它作为邻域矩阵给出。我需要找到 4 个周期的计数：包含 4 个边的周期。如果您对算法有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:56:52.470

简单（非最佳）方法伪代码：

```
output = []
skip_nodes = []
for node in input_graph:
    if node in skip_nodes:
        continue
    for path in deep_search(start=node, max_depth=4):
        if len(path) == 4 and path[1] == path[4]:
            output.append(path)
            skip_nodes.append(path[2], path[3], path[4])
return output 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T14:58:48.483

将矩阵自身乘以 4 次，据我所知，非 0 对角线项将参与 4 边循环（此处可能有错误的标准，但您可以进一步挖掘）

[http://www.math.vt.edu/people/brown/doc/cycles_dm9875.pdf](http://www.math.vt.edu/people/brown/doc/cycles_dm9875.pdf)

# javascript - Three.js - 在 THREE.ParticleSystem 对象中更改粒子位置

> ID：14648832
> 
> 赞同：2
> 
> 时间：2013-02-01T14:49:22.020
> 
> 标签：javascript, three.js, particle-system

我有几个粒子系统，每个都有大约 20k 个顶点。我正在尝试将粒子系统中的每个单独的粒子移动到一个新的 Vector3 上，这是我绘制的一个形状。

期望的效果是，在点击事件中，粒子重新排列自己（使用 TWEEN.js）成我定义的形状。

这真的可能吗？我注意到这些顶点从不改变它们初始化的位置，当我在渲染循环中旋转整个粒子系统时，情况不应该如此。

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:46:35.337

更新单个粒子的顶点时，您需要在主渲染循环中标记更改，旋转整个粒子系统不需要这样做

particleSystem.geometry.__dirtyVertices = true;

# ios - 带有碰撞检测的多点触控精灵旋转

> ID：14648833
> 
> 赞同：0
> 
> 时间：2013-02-01T14:49:24.283
> 
> 标签：ios, objective-c, cocos2d-iphone, box2d

我正在尝试实现碰撞检测和一个精灵从多点触控旋转的另一个精灵的基于物理的反弹。在图像中，看到两个黄点是同时的触摸点，我已经根据`ccTouchesBegan`方法和方法中的这些触摸计算了云的正确位置和角度`ccTouchesMoved`。当用户移动和旋转这两个触摸时，云会跟随并相应地旋转。

![在此处输入图像描述](../Images/919fbc1cb069fbcf99606130fd539888.png)

当鸟与云碰撞时，我尝试将云的角度传递给另一种方法，`CGRectIntersectsRect`并使用数学滚动我自己的碰撞/反弹，但这并没有产生预期的结果，所以我转向了 Box2D。

在阅读了 Ray Wenderlich 的 4 或 5 篇教程之后，我无法将使用多点触控云创建的运动与 Box2D 的主体、固定装置、鼠标关节和世界进行网格化。

我读过这个：[Cocos2d - 旋转精灵的碰撞检测](https://stackoverflow.com/questions/11554568/cocos2d-collision-detection-of-rotated-sprite)

...并且已经经历过：[Ray Wenderlich 碰撞检测](http://www.raywenderlich.com/606/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone)

我的最新`ccTouchesMoved`方法如​​下所示：

```
 - (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    if (_mouseJoint != NULL) return;

    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];
    b2Vec2 locationWorld = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);

    if (_cloudFixture->TestPoint(locationWorld)) {
        b2MouseJointDef md;
        md.bodyA = _groundBody;
        md.bodyB = _cloudBody;
        md.target = locationWorld;
        md.collideConnected = true;
        md.maxForce = 1000.0f * _cloudBody->GetMass();

        _mouseJoint = (b2MouseJoint *)_world->CreateJoint(&md);
        _cloudBody->SetAwake(true);
    }

    NSSet *allTouches = [event allTouches];
    if([allTouches count] == 2){
        UITouch * touch1 = [[allTouches allObjects] objectAtIndex:0];
        CGPoint location1 = [touch1 locationInView: [touch1 view]];
        location1 = [[CCDirector sharedDirector] convertToGL:location1];

        UITouch * touch2 = [[allTouches allObjects] objectAtIndex:1];
        CGPoint location2 = [touch2 locationInView: [touch2 view]];
        location2 = [[CCDirector sharedDirector] convertToGL:location2];

        //EASIER TO WORK WITH INTS
        int touch1X = location1.x;
        int touch2X = location2.x;

        int touch1Y = location1.y;
        int touch2Y = location2.y;

        //FIND THE LEFT-MOST TOUCH
        int minX = (touch1X < touch2X) ? touch1X : touch2X;
        int maxX = (minX == touch1X) ? touch2X : touch1X;

        //FIND THE BOTTOM-MOST TOUCH
        int minY = (touch1Y < touch2Y) ? touch1Y : touch2Y;
        int maxY = (minY == touch1Y) ? touch2Y : touch1Y;

        int touchXDiff = maxX - minX;
        int touchYDiff = maxY - minY;

        [_cloud setPosition:ccp(touchXDiff/2 + minX, touchYDiff/2 + minY)];

        //ROTATE CLOUD AS IT MOVES

        int offDiffX = touch1X - touch2X;
        int offDiffY = touch1Y - touch2Y;

        float angleRadians = atanf((float)offDiffY / (float)offDiffX);
        float angleDegrees = CC_RADIANS_TO_DEGREES(angleRadians);
        float cloudAngle = -1 * angleDegrees;

        //[_cloud setRotation:cloudAngle];
        _cloudBody->SetTransform( _cloudBody->GetPosition(), cloudAngle );
    }

}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    if (_mouseJoint == NULL) return;

    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    NSSet *allTouches = [event allTouches];
    if([allTouches count] == 2){
        UITouch * touch1 = [[allTouches allObjects] objectAtIndex:0];
        CGPoint location1 = [touch1 locationInView: [touch1 view]];
        location1 = [[CCDirector sharedDirector] convertToGL:location1];

        UITouch * touch2 = [[allTouches allObjects] objectAtIndex:1];
        CGPoint location2 = [touch2 locationInView: [touch2 view]];
        location2 = [[CCDirector sharedDirector] convertToGL:location2];

        //EASIER TO WORK WITH INTS
        int touch1X = location1.x;
        int touch2X = location2.x;

        int touch1Y = location1.y;
        int touch2Y = location2.y;

        //FIND THE LEFT-MOST TOUCH
        int minX = (touch1X < touch2X) ? touch1X : touch2X;
        int maxX = (minX == touch1X) ? touch2X : touch1X;

        //FIND THE BOTTOM-MOST TOUCH
        int minY = (touch1Y < touch2Y) ? touch1Y : touch2Y;
        int maxY = (minY == touch1Y) ? touch2Y : touch1Y;

        int touchXDiff = maxX - minX;
        int touchYDiff = maxY - minY;

        //ROTATE CLOUD AS IT MOVES

        int offDiffX = touch1X - touch2X;
        int offDiffY = touch1Y - touch2Y;

        float angleRadians = atanf((float)offDiffY / (float)offDiffX);
        float angleDegrees = CC_RADIANS_TO_DEGREES(angleRadians);
        float cloudAngle = -1 * angleDegrees;

        //BEFORE BOX2D
        //[_cloud setRotation:cloudAngle];
        //[_cloud setPosition:ccp(touchXDiff/2 + minX, touchYDiff/2 + minY)];

        //WITH BOX2D
        _cloudBody->SetTransform( _cloudBody->GetPosition(), cloudAngle );
        b2Vec2 locationWorld = b2Vec2((touchXDiff/2 + minX)/PTM_RATIO, (touchYDiff/2 + minY)/PTM_RATIO);
        _mouseJoint->SetTarget(locationWorld);
    }

} 
```

**编辑**（为清楚起见）：发生的情况是，当实现 Box2D 代码时，云仅响应第一次触摸，不调整触摸之间创建的角度并且不跟随两次触摸。我怎样才能用 Box2D 做到这一点？

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:52:46.440

可爱的艺术品！

您需要为您的多点触控身体注入速度和位置信息，以便从与其交互的其他身体获得适当的碰撞响应。

运动体实际上非常适合此目的。您所做的是设置云的几何形状，并随着多点触控位置的更新，计算将云从其当前位置移动到由触摸定义的新目标位置所需的线速度和角速度。这就是您移动运动体的方式（使用速度）。你可以让它轻轻地漂移或严格地跟随运动 --- 使用运动体，它会刚性地碰撞并且不会因碰撞而对自身施加任何动量。

您还需要弄清楚如何处理运动体的实际长度会随着手指移动而变化的事实。

希望有帮助

# android - Android 项目在我使用物理世界时崩溃

> ID：14648836
> 
> 赞同：2
> 
> 时间：2013-02-01T14:49:28.020
> 
> 标签：android, box2d, andengine, physics

我正在尝试使用 Andengine + Box2D 开发游戏。一切都很完美，但是当我尝试使用 Physics World 时，它崩溃了。如果我不使用它，一切都是完美的。我正在谈论的行是：

`physicsWorld = new PhysicsWorld(new Vector2(SensorManager.GRAVITY_EARTH,0),false);`

方法中的那个`onLoadScene()`。（对不起，我无法突出显示它）另外，日志中没有错误。我也在代码下添加了我的日志。

这是我的代码：

```
package com.emredavarci.updatesistemi;

import org.anddev.andengine.engine.Engine;
import org.anddev.andengine.engine.camera.Camera;
import org.anddev.andengine.engine.handler.IUpdateHandler;
import org.anddev.andengine.engine.options.EngineOptions;
import org.anddev.andengine.engine.options.EngineOptions.ScreenOrientation;
import org.anddev.andengine.engine.options.resolutionpolicy.FillResolutionPolicy;
import org.anddev.andengine.entity.scene.Scene;
import org.anddev.andengine.entity.scene.Scene.IOnSceneTouchListener;
import org.anddev.andengine.entity.sprite.AnimatedSprite;
import org.anddev.andengine.entity.sprite.Sprite;
import org.anddev.andengine.entity.util.FPSLogger;
import org.anddev.andengine.extension.input.touch.controller.MultiTouch;
import org.anddev.andengine.extension.input.touch.controller.MultiTouchController;
import org.anddev.andengine.extension.input.touch.controller.MultiTouchException;
import org.anddev.andengine.extension.physics.box2d.PhysicsConnector;
import org.anddev.andengine.extension.physics.box2d.PhysicsFactory;
import org.anddev.andengine.extension.physics.box2d.PhysicsWorld;
import org.anddev.andengine.input.touch.TouchEvent;
import org.anddev.andengine.opengl.texture.Texture;
import org.anddev.andengine.opengl.texture.TextureOptions;
import org.anddev.andengine.opengl.texture.region.TextureRegion;
import org.anddev.andengine.opengl.texture.region.TextureRegionFactory;
import org.anddev.andengine.opengl.texture.region.TiledTextureRegion;
import org.anddev.andengine.ui.activity.BaseGameActivity;

import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.BodyDef.BodyType;
import com.badlogic.gdx.physics.box2d.FixtureDef;

import android.hardware.SensorManager;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends BaseGameActivity {

private Engine engine;
private Camera camera;
private Scene sahne;
private static final int CAMERA_HEIGHT = 480;
private static final int CAMERA_WIDTH = 800; 
private Texture texSaha,texOyuncu1,texOyuncu2;
private TextureRegion texRegSaha,texRegOyuncu1,texRegOyuncu2;
private Sprite spriteSaha,spriteOyuncu1,spriteOyuncu2;
private Texture texAnime;
private TiledTextureRegion tiledTexReg;
private AnimatedSprite animSprite;

private PhysicsWorld physicsWorld;
private final FixtureDef fixDef = PhysicsFactory.createFixtureDef(0.5f, 0.5f, 0.5f); 
private Body bodyOyuncu1;
private Body bodyOyuncu2;

public Engine onLoadEngine() {

    camera = new Camera(0,0,CAMERA_WIDTH,CAMERA_HEIGHT);
    final EngineOptions engineOptions = new EngineOptions(true,ScreenOrientation.LANDSCAPE, new FillResolutionPolicy(),camera);
    engineOptions.getTouchOptions().setRunOnUpdateThread(true); // dokunmatik ekranı ayrı bir thread ile kontrol ediyoruz
    engine = new Engine(engineOptions);

    return this.engine;

}

public void onLoadResources() {

    texSaha = new Texture(1024,512,TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    this.mEngine.getTextureManager().loadTexture(this.texSaha);
    texRegSaha = TextureRegionFactory.createFromAsset(this.texSaha, this, "gfx/arkaplan3.png",0,0);

    texOyuncu1 = new Texture(128,128,TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    texOyuncu2 = new Texture(128,128,TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    Texture textures[] = { texSaha,texOyuncu1,texOyuncu2 };

    this.mEngine.getTextureManager().loadTextures(textures);

    texRegOyuncu1 = TextureRegionFactory.createFromAsset(this.texOyuncu1, this , "gfx/blue.png",0,0);
    texRegOyuncu2 = TextureRegionFactory.createFromAsset(this.texOyuncu2, this , "gfx/yellow.png",0,0);

}

private float parmakKoordinatiX = 0;
private float parmakKoordinatiY = 0;
private boolean maviHareketEder = false;

public Scene onLoadScene() {
    this.sahne = new Scene();
    physicsWorld = new PhysicsWorld(new Vector2(SensorManager.GRAVITY_EARTH,0),false); 
    this.engine.registerUpdateHandler(new FPSLogger());

    spriteSaha= new Sprite(0,0,texRegSaha);

    spriteOyuncu1 = new Sprite(600,CAMERA_HEIGHT/2 - 64, texRegOyuncu1);

    spriteOyuncu2 = new Sprite(50,CAMERA_HEIGHT/2 - 64, texRegOyuncu2);

    bodyOyuncu1 = PhysicsFactory.createCircleBody(physicsWorld, spriteOyuncu1, BodyType.DynamicBody, fixDef); 
    this.physicsWorld.registerPhysicsConnector(new PhysicsConnector(spriteOyuncu1, bodyOyuncu1,true,true,true,true)); 

    bodyOyuncu2 = PhysicsFactory.createCircleBody(physicsWorld, spriteOyuncu2, BodyType.DynamicBody, fixDef);
    this.physicsWorld.registerPhysicsConnector(new PhysicsConnector(spriteOyuncu2, bodyOyuncu2,true,true,true,true));

    bodyOyuncu1.setLinearVelocity(new Vector2(-10,0));
    bodyOyuncu2.setLinearVelocity(new Vector2(10,0));

    this.sahne.attachChild(spriteSaha);
    this.sahne.attachChild(spriteOyuncu1);
    this.sahne.attachChild(spriteOyuncu2);

    this.sahne.registerTouchArea(spriteOyuncu1);
    this.sahne.registerTouchArea(spriteOyuncu2);

    this.sahne.registerUpdateHandler(physicsWorld); 

    return this.sahne;
}

public void onLoadComplete() {
    // TODO Auto-generated method stub

}

} 
```

这是我的日志：

```
02-02 08:28:37.527: I/dalvikvm(861): Could not find method     org.anddev.andengine.entity.shape.Shape.getVelocityX, referenced from method     org.anddev.andengine.extension.physics.box2d.PhysicsFactory.createBoxBody
02-02 08:28:37.567: W/dalvikvm(861): VFY: unable to resolve virtual method 5858:     Lorg/anddev/andengine/entity/shape/Shape;.getVelocityX ()F
02-02 08:28:37.567: D/dalvikvm(861): VFY: replacing opcode 0x6e at 0x001f
02-02 08:28:37.567: D/dalvikvm(861): VFY: dead code 0x0022-0061 in     Lorg/anddev/andengine/extension/physics/box2d/PhysicsFactory;.createBoxBody     (Lorg/anddev/andengine/extension/physics/box2d/PhysicsWorld;Lorg/anddev/andengine/entity/sh   ape/Shape;Lcom/badlogic/gdx/physics/box2d/BodyDef$BodyType;Lcom/badlogic/gdx/physics/box2d/    FixtureDef;F)Lcom/badlogic/gdx/physics/box2d/Body;
02-02 08:28:37.567: I/dalvikvm(861): Could not find method     org.anddev.andengine.entity.shape.Shape.getVelocityX, referenced from method     org.anddev.andengine.extension.physics.box2d.PhysicsFactory.createCircleBody
02-02 08:28:37.567: W/dalvikvm(861): VFY: unable to resolve virtual method 5858:     Lorg/anddev/andengine/entity/shape/Shape;.getVelocityX ()F
02-02 08:28:37.567: D/dalvikvm(861): VFY: replacing opcode 0x6e at 0x0027
02-02 08:28:37.567: D/dalvikvm(861): VFY: dead code 0x002a-0055 in     Lorg/anddev/andengine/extension/physics/box2d/PhysicsFactory;.createCircleBody     (Lorg/anddev/andengine/extension/physics/box2d/PhysicsWorld;Lorg/anddev/andengine/entity/sh    ape/Shape;Lcom/badlogic/gdx/physics/box2d/BodyDef$BodyType;Lcom/badlogic/gdx/physics/box2d/    FixtureDef;F)Lcom/badlogic/gdx/physics/box2d/Body;
02-02 08:28:37.587: I/dalvikvm(861): Could not find method     org.anddev.andengine.entity.shape.Shape.getVelocityX, referenced from method     org.anddev.andengine.extension.physics.box2d.PhysicsFactory.createPolygonBody
02-02 08:28:37.628: W/dalvikvm(861): VFY: unable to resolve virtual method 5858:     Lorg/anddev/andengine/entity/shape/Shape;.getVelocityX ()F
02-02 08:28:37.628: D/dalvikvm(861): VFY: replacing opcode 0x6e at 0x001d
02-02 08:28:37.628: D/dalvikvm(861): VFY: dead code 0x0020-0042 in     Lorg/anddev/andengine/extension/physics/box2d/PhysicsFactory;.createPolygonBody     (Lorg/anddev/andengine/extension/physics/box2d/PhysicsWorld;Lorg/anddev/andengine/entity/shape/Shape;    [Lcom/badlogic/gdx/math/Vector2;Lcom/badlogic/gdx/physics/box2d/BodyDef$BodyType;Lcom/badlogic/gdx/ph    ysics/box2d/FixtureDef;F)Lcom/badlogic/gdx/physics/box2d/Body;
02-02 08:28:37.937: D/AndEngine(861): UpdateThread interrupted. Don't worry - this Exception is     most likely expected!
02-02 08:28:37.937: D/AndEngine(861): java.lang.InterruptedException
02-02 08:28:37.937: D/AndEngine(861):   at java.lang.Object.wait(Native Method)
02-02 08:28:37.937: D/AndEngine(861):   at java.lang.Object.wait(Object.java:358)
02-02 08:28:37.937: D/AndEngine(861):   at     org.anddev.andengine.engine.Engine$State.waitUntilCanUpdate(Engine.java:712)
02-02 08:28:37.937: D/AndEngine(861):   at     org.anddev.andengine.engine.Engine.yieldDraw(Engine.java:462)
02-02 08:28:37.937: D/AndEngine(861):   at     org.anddev.andengine.engine.Engine.onTickUpdate(Engine.java:453)
02-02 08:28:37.937: D/AndEngine(861):   at     org.anddev.andengine.engine.Engine$UpdateThread.run(Engine.java:675)
02-02 08:28:38.187: D/dalvikvm(861): Trying to load lib     /data/data/com.emredavarci.updatesistemi/lib/libandenginephysicsbox2dextension.so 0x405130b0
02-02 08:28:38.187: D/dalvikvm(861): Added shared lib     /data/data/com.emredavarci.updatesistemi/lib/libandenginephysicsbox2dextension.so 0x405130b0
02-02 08:28:38.187: D/dalvikvm(861): No JNI_OnLoad found in     /data/data/com.emredavarci.updatesistemi/lib/libandenginephysicsbox2dextension.so 0x405130b0,     skipping init
02-02 08:28:38.187: D/dalvikvm(861): GetMethodID: method not found:     Lcom/badlogic/gdx/physics/box2d/World;.preSolve:(JJ)V
02-02 08:28:38.187: W/dalvikvm(861): JNI WARNING: JNI method called with exception raised
02-02 08:28:38.187: W/dalvikvm(861):              in     Lcom/badlogic/gdx/physics/box2d/World;.newWorld (FFZ)J (GetMethodID)
02-02 08:28:38.187: W/dalvikvm(861): Pending exception is:
02-02 08:28:38.187: I/dalvikvm(861): Ljava/lang/NoSuchMethodError;: preSolve
02-02 08:28:38.197: I/dalvikvm(861):    at     com.badlogic.gdx.physics.box2d.World.newWorld(Native Method)
02-02 08:28:38.197: I/dalvikvm(861):    at com.badlogic.gdx.physics.box2d.World.<init>    (World.java:78)
02-02 08:28:38.197: I/dalvikvm(861):    at     org.anddev.andengine.extension.physics.box2d.PhysicsWorld.<init>(PhysicsWorld.java:56)
02-02 08:28:38.197: I/dalvikvm(861):    at     org.anddev.andengine.extension.physics.box2d.PhysicsWorld.<init>(PhysicsWorld.java:52)
02-02 08:28:38.197: I/dalvikvm(861):    at     com.emredavarci.updatesistemi.MainActivity.onLoadScene(MainActivity.java:110)
02-02 08:28:38.197: I/dalvikvm(861):    at     org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:158)
02-02 08:28:38.197: I/dalvikvm(861):    at     org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:82)
02-02 08:28:38.197: I/dalvikvm(861):    at     com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2001)
02-02 08:28:38.197: I/dalvikvm(861):    at     android.view.View.dispatchWindowFocusChanged(View.java:3924)
02-02 08:28:38.197: I/dalvikvm(861):    at     android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:659)
02-02 08:28:38.197: I/dalvikvm(861):    at     android.view.ViewRoot.handleMessage(ViewRoot.java:1968)
02-02 08:28:38.197: I/dalvikvm(861):    at     android.os.Handler.dispatchMessage(Handler.java:99)
02-02 08:28:38.197: I/dalvikvm(861):    at android.os.Looper.loop(Looper.java:123)
02-02 08:28:38.197: I/dalvikvm(861):    at     android.app.ActivityThread.main(ActivityThread.java:3683)
02-02 08:28:38.197: I/dalvikvm(861):    at java.lang.reflect.Method.invokeNative(Native Method)
02-02 08:28:38.197: I/dalvikvm(861):    at java.lang.reflect.Method.invoke(Method.java:507)
02-02 08:28:38.197: I/dalvikvm(861):    at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-02 08:28:38.197: I/dalvikvm(861):    at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-02 08:28:38.197: I/dalvikvm(861):    at dalvik.system.NativeStart.main(Native Method)
02-02 08:28:38.197: I/dalvikvm(861): "main" prio=5 tid=1 NATIVE
02-02 08:28:38.197: I/dalvikvm(861):   | group="main" sCount=0 dsCount=0 obj=0x4001f1a8 self=0xce48
02-02 08:28:38.197: I/dalvikvm(861):   | sysTid=861 nice=0 sched=0/0 cgrp=default handle=-1345006528
02-02 08:28:38.197: I/dalvikvm(861):   | schedstat=( 186996176 565732645 123 )
02-02 08:28:38.197: I/dalvikvm(861):   at com.badlogic.gdx.physics.box2d.World.newWorld(Native Method)
02-02 08:28:38.197: I/dalvikvm(861):   at com.badlogic.gdx.physics.box2d.World.<init>(World.java:78)
02-02 08:28:38.207: I/dalvikvm(861):   at     org.anddev.andengine.extension.physics.box2d.PhysicsWorld.<init>(PhysicsWorld.java:56)
02-02 08:28:38.207: I/dalvikvm(861):   at     org.anddev.andengine.extension.physics.box2d.PhysicsWorld.<init>(PhysicsWorld.java:52)
02-02 08:28:38.207: I/dalvikvm(861):   at     com.emredavarci.updatesistemi.MainActivity.onLoadScene(MainActivity.java:110)
02-02 08:28:38.207: I/dalvikvm(861):   at     org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:158)
02-02 08:28:38.207: I/dalvikvm(861):   at     org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:82)
02-02 08:28:38.207: I/dalvikvm(861):   at     com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2001)
02-02 08:28:38.207: I/dalvikvm(861):   at     android.view.View.dispatchWindowFocusChanged(View.java:3924)
02-02 08:28:38.207: I/dalvikvm(861):   at     android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:659)
02-02 08:28:38.207: I/dalvikvm(861):   at android.view.ViewRoot.handleMessage(ViewRoot.java:1968)
02-02 08:28:38.207: I/dalvikvm(861):   at android.os.Handler.dispatchMessage(Handler.java:99)
02-02 08:28:38.207: I/dalvikvm(861):   at android.os.Looper.loop(Looper.java:123)
02-02 08:28:38.207: I/dalvikvm(861):   at android.app.ActivityThread.main(ActivityThread.java:3683)
02-02 08:28:38.207: I/dalvikvm(861):   at java.lang.reflect.Method.invokeNative(Native Method)
02-02 08:28:38.207: I/dalvikvm(861):   at java.lang.reflect.Method.invoke(Method.java:507)
02-02 08:28:38.207: I/dalvikvm(861):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-02 08:28:38.207: I/dalvikvm(861):   at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-02 08:28:38.207: I/dalvikvm(861):   at dalvik.system.NativeStart.main(Native Method)
02-02 08:28:38.207: E/dalvikvm(861): VM aborting 
```

这段代码有什么问题？

编辑：我尝试不使用 .jar 文件，而是安装了 Git 插件（GLES2），但这一次，每个方法的名称都变了。我的意思是我以前知道 onLoadResources()，但现在 Eclipse 想要我 onCreateResources() 方法. 那是什么？面向对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-24T22:37:34.523

您将不得不使用 Box2DExtension 库而不是直接使用 jar 文件，您可以从下面给出的链接下载它：

[https://github.com/nicolasgramlich/AndEnginePhysicsBox2DExtension](https://github.com/nicolasgramlich/AndEnginePhysicsBox2DExtension)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:55:16.973

获取 Eclipse 的 Github 插件，并下载相关的 AndEngine 项目，然后将它们添加到项目的构建路径而不是 jar 库中。

# java - JodaTime：两个日期之间的工作日数

> ID：14648837
> 
> 赞同：7
> 
> 时间：2013-02-01T14:49:35.090
> 
> 标签：java, jodatime

我正在寻找一种计算 Joda Time 工作日数的方法。我得到的总天数：

```
DateMidnight start = new DateMidnight(DateMidnight.now());
DateMidnight end =  new DateMidnight(2014,10,10);

int days = Days.daysBetween(start,end).getDays(); 
```

然后我会减去周末/节假日的数量。但我如何计算它们？

会很高兴得到帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-23T21:25:48.487

今天不得不弄清楚这一点，并且不喜欢我在网上看到的任何答案。因此，对于遇到此问题的其他人，这是我的解决方案。请注意，我假设如果开始或结束是在周末，我会在下一个工作日（周六或周日变为下周一）。之后，它就像获取之间的天数一样简单，然后计算出之间的周末数，最后每个周末减去 2 天：

```
public class DateUtil {

  public static final int DAYS_PER_WEEKEND = 2;
  public static final int WEEK_START = DateTimeConstants.MONDAY;
  public static final int WEEK_END = DateTimeConstants.FRIDAY;

  public static int workdayDiff(Date d1, Date d2) {
    LocalDate start = LocalDate.fromDateFields(d1);
    LocalDate end = LocalDate.fromDateFields(d2);

    start = toWorkday(start);
    end = toWorkday(end);

    int daysBetween = Days.daysBetween(start, end).getDays();
    int weekendsBetween = Weeks.weeksBetween(start.withDayOfWeek(WEEK_START), end.withDayOfWeek(WEEK_START)).getWeeks();

    return daysBetween - (weekendsBetween * DAYS_PER_WEEKEND);
  } 

  public static LocalDate toWorkday(LocalDate d) {
    if (d.getDayOfWeek() > WEEK_END) {
      return d.plusDays(DateTimeConstants.DAYS_PER_WEEK - d.getDayOfWeek() + 1);
    }
    return d;
  }
} 
```

我相信有人会过来评论说，不是每个人都有相同的周末等等等等。我将语言环境差异作为练习留给那些这样做的人:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-14T22:06:14.963

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T10:37:16.977

DeezCashews 的答案对我来说效果很好，有以下可选修改......

如果像我一样，您正在寻找日期之间的包含差异而不是日期之间的唯一差异（例如，从 11 月 21 日星期一到 11 月 25 日星期五的员工假期请求应该在 5 天而不是 4 天出现），那么正确的方法就是在调用“toWorkday()”方法*之前*，在“结束”日期上加一天。由于算法的实现方式，在此之后的任何时候增加差异都不起作用

# php - 更新查询未在 while 循环中执行

> ID：14648840
> 
> 赞同：1
> 
> 时间：2013-02-01T14:49:36.467
> 
> 标签：php, mysql, sql, loops, while-loop

你能帮我解决这个问题吗？我的 else 语句中的更新查询没有执行，但它在 if 语句中工作。这是代码。

```
 while($qtytoAdd > 0) {
    $remBalance = mysql_result(mysql_query('SELECT `est_qty` - `qty_rec` as balance FROM `estimates` WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `qty_rec` <> `est_qty` ORDER BY `item_id` ASC'), 0);
    $balid = mysql_result(mysql_query('SELECT `est_id` FROM `estimates` WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `qty_rec` <> `est_qty` ORDER BY `item_id` ASC'), 0);
    $currRec = mysql_result(mysql_query('SELECT `qty_rec` FROM `estimates` WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `qty_rec` <> `est_qty`'), 0);
    $currid = mysql_result(mysql_query('SELECT `req_id` FROM `requestdetails` JOIN `request` USING(`req_id`) WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `req_qty` <> `current_rec_qty` ORDER BY `req_id` ASC'), 0);

        if(($remBalance - $qtytoAdd) >= 0) {
            mysql_query('UPDATE `estimates` SET `qty_rec` = `qty_rec` + "'.$qtytoAdd.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"');
                $qtytoAdd = 0;
        mysql_query('UPDATE `estimates` SET `qty_onhand` = `qty_rec` - `qty_rel` WHERE `proj_id` = '.$proj_id.' AND `qty_rec` <> `est_qty` AND `mat_id` = '.mat_id_from_mat_desc($materials).' AND `est_id` = '.$balid.'');
            } else {
                mysql_query('UPDATE `estimates` SET `qty_rec` = "'.$remBalance.'" + "'.$currRec.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"');
                $qtytoAdd = $qtytoAdd - $remBalance;
        mysql_query('UPDATE `estimates` SET `qty_onhand` = `qty_rec` - `qty_rel` WHERE `proj_id` = '.$proj_id.' AND `qty_rec` <> `est_qty` AND `mat_id` = '.mat_id_from_mat_desc($materials).' AND `est_id` = '.$balid.'');
            }
        } 
```

我真的不知道问题是什么。我正在谈论的查询是这个：

```
mysql_query('UPDATE `estimates` SET `qty_onhand` = `qty_rec` - `qty_rel` WHERE `proj_id` = '.$proj_id.' AND `qty_rec` <> `est_qty` AND `mat_id` = '.mat_id_from_mat_desc($materials).' AND `est_id` = '.$balid.''); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:59:27.537

如果它在 else 语句中不起作用，为什么不尝试回显查询，然后复制该查询并将其粘贴到查询分析器或 phpmyadmin 中并检查它是否运行。像这样的东西：

```
 else {
      $query="enter your query here";
      echo $query;
      mysql_query($query);
  } 
```

在浏览器中打印查询后，您将知道正在运行什么查询并检查它是否正确。需要一些调试技巧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:07:47.330

尝试这个

```
 else {
            mysql_query('UPDATE `estimates` SET `qty_rec` = "'.$remBalance + $currRec.'" WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"');

    mysql_query('UPDATE `estimates` SET `qty_onhand` = `qty_rec` - `qty_rel` WHERE `proj_id` = '.$proj_id.' AND `qty_rec` <> `est_qty` AND `mat_id` = '.mat_id_from_mat_desc($materials).' AND `est_id` = '.$balid.'');
        }
        $qtytoAdd = $qtytoAdd - $remBalance;
    } 
```

编辑。

尝试用这个替换你的查询

```
 mysql_query('UPDATE `estimates` SET `qty_onhand` = `qty_rec` - `qty_rel` WHERE `proj_id` = "'.$proj_id.'" AND `qty_rec` <> `est_qty` AND `mat_id` = "'.mat_id_from_mat_desc($materials).'" AND `est_id` = "'.$balid.'"'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-05T21:43:07.300

我遇到了同样的问题。在你的 else 循环中使用函数会起作用

```
else
{
    $update_function=update_function($ud_id,$subject,$to_user,$from_user);
    [//pass your variables instead of $ud_id,$subject,$to_user,$from_user]
}

function update_function($ud_id,$subject,$to_user,$from_user)
{               
    //place your query over here    
    $query=mysql_query("UPDATE `email_configuration` SET `subject`='$subject',`to_user`='$to_user',`from_user`='$from_user' WHERE id='$ud_id'");    
    echo "Record Updated";                              
} 
```

# asp.net-mvc - 可以使用 ASP.NET MVC 制作“无控制器”网址吗？

> ID：14648841
> 
> 赞同：5
> 
> 时间：2013-02-01T14:49:39.877
> 
> 标签：asp.net-mvc, url, routing, controller, asp.net-mvc-routing

我正在使用 ASP.NET MVC 4、.NET 4.5。除了为每个“动作”创建单独的控制器之外，还有什么方法可以拥有“无控制器”的网址？

我的意思是，有一个充满动作的 Home 控制器。网址如：

*   site.com/Home/关于
*   site.com/Home/Contact

成为

*   site.com/关于
*   site.com/Contact

但仍使用 Home 控制器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T15:04:49.317

您可以像这样定义不包含控制器名称的路由：

```
routes.MapRoute(
    "About",                                       // Route name
    "About/",                                      // URL with parameters
    new { controller = "Home", action = "About" }  // Parameter defaults
);

routes.MapRoute(
    "Contact",                                       // Route name
    "Contact/",                                      // URL with parameters
    new { controller = "Home", action = "Contact" }  // Parameter defaults
); 
```

# d3.js - 在每个矩形元素下方附加 svg:text

> ID：14648842
> 
> 赞同：1
> 
> 时间：2013-02-01T14:49:43.950
> 
> 标签：d3.js

很难弄清楚这个问题。

即如果有一个svg

```
<svg>
<rect id='1'></rect>
<rect id='2'></rect>
<rect id='3'></rect>
<rect id='4'></rect>
</svg> 
```

如何使用 selectAll 和 enter 函数在每个矩形下方附加一个 svg:text？（实际使用的是json数据集）

我想在下面得到这样的结果......

```
<svg>
<rect id='1'></rect>
**<text>text here...</text>**
<rect id='2'></rect>
**<text>text here...</text>**
<rect id='3'></rect>
**<text>text here...</text>**
<rect id='4'></rect>
**<text>text here...</text>**
</svg> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:28:12.563

如果您使用 Javascript 数据来生成这些元素，则该模式看起来像这样。

```
var data = [1,2,3,4];
var sel = svg.selectAll("rect").data(data).enter();
sel.append("rect").attr("id", function(d) { return d; });
sel.append("text").text("..."); 
```

# javascript - 如何在输出到屏幕之前按时间顺序对多个 Twitter 时间线进行排序？

> ID：14648843
> 
> 赞同：0
> 
> 时间：2013-02-01T14:49:49.253
> 
> 标签：javascript, jquery, twitter

我有一个复选框表单，可让用户选择一个或多个 Twitter 时间线来显示。现在，时间线成批出现（即，来自第一个时间线的所有推文，然后是来自第二个时间线的所有推文，依此类推）。我想在输出之前将所有收集的推文分类为一个年表。

这是一个 JS 小提琴：http: [//jsfiddle.net/brianeoneill/z9cuP/2/](http://jsfiddle.net/brianeoneill/z9cuP/2/)

```
$('input[type=submit]').on('click', function(e){

    // prevent default behavior of the submit button
    e.preventDefault();

    // empty the div with ID of tweets
    $('#tweets').empty();

    // perform a function on all of the checked boxes
    $(':checkbox:checked').each( function(){

    var twitterID = $(this).attr('data');

    // use the "data" attribute to build the query string for getJSON
    $.getJSON( 'http://api.twitter.com/1/statuses/user_timeline/'+twitterID+'.json?callback=?', null, function(data){

    // create an empty ul
    var tweetList = $('<ul id="tweets-list">');

    // for each JSON object returned, parse it into an li
    $.each(data, function(i, tweet){
        var item  = $('<li class="'+i+'">');
        var name  = $('<h2>').text(tweet.user.name);
        var date  = $('<small>').text(tweet.created_at);
        var img   = $('<img>').attr('src', tweet.user.profile_image_url);
        var msg   = $('<p>').text(tweet.text);
        item.append(img,name,date,msg);

        // add the li to the empty tweetList ul
        tweetList.append(item);

    }); // end of JSON parse function

  // SORT BEFORE SENDING TO DOM

  $('#tweets').append(tweetList); 
```

我尝试创建一个 li 数组，然后按 Twitter 时间戳对它们进行排序，但我总是以一个空数组结束。很明显我错过了一些东西。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:51:34.373

提示：所有推文 ID 都是按时间升序生成的。不管一条推文来自谁的时间线，甚至可以是混合时间线，如果您按其 ID 对推文进行排序，您将获得正确的时间顺序。

# java - iterator.hasNext() 返回错误值

> ID：14648846
> 
> 赞同：0
> 
> 时间：2013-02-01T14:50:00.017
> 
> 标签：java, list, recursion

我正在尝试在递归方法中使用迭代器。如果列表中没有下一个元素，它应该退出该方法。但是如果光标位于最后一个位置，则`iterator.hasNext()`返回检查`true`，我除外`false`？

有什么想法和提示吗？

我不会张贴图片，所以我会写下来。这就是我在 Eclipse-Debugger-View 中看到的：

```
iterator             | AbstractList$Itr (id=448)

 - cursor            | 2
 - excpectedModCount | 2
 - lastRet           | 1
 - this$0            | ArrayList<E> (id=438)
 - elemtData         | Object[10] (id=462)

 ---modCount         | 2

 ---size             | 2 
```

这是代码

```
static void resolveWithIterator(List<SomethingContext> list, Iterator<ContextResolveHelper> iterator, List<ContextResolveHelper> resolverList)
{
    boolean end = resolverList.iterator().hasNext();
    if (list.size() == 1 || !end){
        resolvedList.add(list);
        return;
    }else{
        ContextResolveHelper acutalEntry = iterator.next();
    List<SomethingContext> tempQRes2 = new ArrayList<SomethingContext>();
        for (SomethingContext smtCtx : list){
            if (//check various things){
                tempQRes2.add(smtCtx);
            }
        }
        resolveWithIterator(tempQRes2, iterator, resolverList);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:09:47.230

我认为问题出在逻辑本身，正如您所写，您使用以下方法调用该函数：

```
Iterator<ContextResolveHelper> iterator = resolverList.iterator();    
resolveWithIterator(searchCtxResult, iterator, resolverList); 
```

但是，在方法本身中你做了两件事，你检查下一个新的迭代器，而不是提供的迭代器

```
boolean end = resolverList.iterator().hasNext(); 
```

当至少有一个元素时，它将始终返回 true。

调用 iterator() 总是返回新的迭代器，你应该使用参数中提供的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:59:57.187

我唯一`hasNext()`看到的是`resolverList.iterator().hasNext()`。由于您每次都会得到一个新的迭代器，当然它总会有一个“下一个”，除非列表本身是空的。

# scala - 检查表达式是否与Scala中的模式匹配的简洁方法

> ID：14648847
> 
> 赞同：1
> 
> 时间：2013-02-01T14:50:01.543
> 
> 标签：scala, pattern-matching

是否有一种简洁的方法来检查表达式是否与给定的模式匹配？例如，考虑以下代码：

```
val result = expr match {
    SomePattern(_, 1, _) => true
    _ => false
} 
```

虽然此代码有效，但它相当嘈杂且冗长。我想知道是否有更好的方法来实现同样的目标。如果 Scala 有一个构造，那就太好了`matches`，它允许人们编写

```
val result = expr matches SomePattern(_, 1, _) 
```

我什至会考虑编写一个辅助函数来使这些方面成为可能。但是，这似乎很难做到，因为据我所知，我无法将模式作为参数传递。对于 Scala 2.10 中可用的宏（作为实验性功能），也许这样的事情是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:37:40.657

```
scala> import PartialFunction.cond
import PartialFunction.cond

scala> cond(Option(2)) { case Some(2) => true }
res0: Boolean = true

scala> cond(Option(3)) { case Some(2) => true }
res1: Boolean = false 
```

也就是说，我过去支持“匹配”，尽管有很多方法称为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:06:18.460

您可以定义一个执行类似操作的函数“匹配”，例如：

```
scala> def matches[A](a: A)(f: PartialFunction[A, Unit]) = f isDefinedAt a
matches: [A](a: A)(f: PartialFunction[A,Unit])Boolean

scala> matches("abc") { case "abc" => () }
res0: Boolean = true

scala> matches("abc") { case "x" => () }
res1: Boolean = false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:04:56.580

构造允许的完全相同的语法`match`可用于将`PartialFunction`s 写为函数文字。但是编译器必须知道这是必需的。换句话说，它需要一些东西来驱动类型推断：

```
scala> val pf1 = { case i: Int if i % 2 == 0 => true; case i: Int => false }
<console>:42: error: missing parameter type for expanded function
The argument types of an anonymous function must be fully known. (SLS 8.5)
Expected type was: ?
       val pf1 = { case i: Int if i % 2 == 0 => true; case i: Int => false }
                 ^

scala> val pf2: Function[Int, Boolean] = { case i: Int if i % 2 == 0 => true; case _ => false }
<console>:42: error: $r.intp.global.Function does not take type parameters
       val pf2: Function[Int, Boolean] = { case i: Int if i % 2 == 0 => true; case _=> false }
                ^
<console>:42: error: missing parameter type for expanded function
The argument types of an anonymous function must be fully known. (SLS 8.5)
Expected type was: <error>
       val pf2: Function[Int, Boolean] = { case i: Int if i % 2 == 0 => true; case _=> false }
                                         ^

scala> val pf3: PartialFunction[Int, Boolean] = { case i: Int if i % 2 == 0 => true; case _ => false }
pf3: PartialFunction[Int,Boolean] = <function1> 
```

# c# - 数据绑定 HttpWebRequest - StreamReader

> ID：14648850
> 
> 赞同：0
> 
> 时间：2013-02-01T14:50:06.683
> 
> 标签：c#, asp.net

需要一些建议。我已经设置了以下 HttpWebRequest，它转到另一台服务器并以 htnl 格式从那里检索数据 - 但我可以将其更改为另一个结构。

我想做的是从那里对数据进行数据绑定，并在我的网站中使用转发器和列表控件很好地呈现它。

我在下面有大部分代码。我需要问的问题是，我可以按照我设置它的方式对我的 responseData 对象进行数据绑定。其次，我可以配置另一端的页面以生成大多数格式的输出。如果我有客户姓名、联系人、电话、电子邮件，我应该如何明智地呈现结构，以便可以将其用作数据绑定对象？

希望这个问题有意义。一如既往的感谢

```
 string url = "https://myaddress/customerlist.php";

    // creates the post data for the POST request
    string postData = "ID=" + username + "&Token=" + token;

    // create the POST request
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
    webRequest.Method = "POST";
    webRequest.ContentType = "application/x-www-form-urlencoded";
    webRequest.ContentLength = postData.Length;

    // POST the data
    using (StreamWriter requestWriter2 = new StreamWriter(webRequest.GetRequestStream()))
    {
        requestWriter2.Write(postData);
    }

    //  This actually does the request and gets the response back
    HttpWebResponse resp = (HttpWebResponse)webRequest.GetResponse();

    string responseData = string.Empty;

    using (StreamReader responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream()))
    {
        // dumps the HTML from the response into a string variable
        responseData = responseReader.ReadToEnd();
    }

    ReportRepeater.DataSource = responseData;
    ReportRepeater.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:56:36.737

您应该`responseData`在自定义对象列表中进行转换，以便将其绑定到中继器

```
IList<Contact> contacts = ParseResponse(responseData);

ReportRepeater.DataSource = contacts;
ReportRepeater.DataBind(); 
```

ParseResponse 是这样的自定义方法：

```
IList<Contact> ParseResponse(string response)
{
   var rtn = new List<Contact>();

   //some loop to create contacts
   //rtn.Add(newContact);

   return rtn;
} 
```

如何使用中继器的一个很好的解释：http: [//msdn.microsoft.com/en-us/magazine/cc163780.aspx](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)

# java - 访问类数组字段

> ID：14648852
> 
> 赞同：0
> 
> 时间：2013-02-01T14:50:17.643
> 
> 标签：java, arrays, get, field

我在 for 循环中从数组访问字段时遇到问题。我确定我只是弄乱了语法：

```
public class Person {

String  name;
Person  mother;
Person  father;
ArrayList<Person> children;

public boolean isMotherOf(Person pers1) {
    //First check if Persons mother equals pers1
    if (mother.name == pers1.name) {            
        //Second checks if pers1s children contains Person
        for (int i = 0; i < pers1.children.size(); i++) {
            if (pers1.children.name.get(i) == name) {
// ERROR ON THE LINE ABOVE: "name cannot be resolved or it not a field"
                return true;
            } 
        } // END second check
    } else { return false; }

    } // END method isMotherOf
} 
```

编辑：我的代码包含逻辑错误（比较错误的人）。这个安全检查会起作用吗，或者当它检查 pers1 的母亲是否有名字时，如果 pers1 不存在，它会产生错误吗？

```
public class Person {

String  name;
Person  mother;
Person  father;
ArrayList<Person> children;

// Checks if THIS person is the mother of pers1
public boolean isMotherOf(Person pers1) {
    // Safety check: Both persons exists and Person has children and pers1 has mother 
    if (name == null || children == null || pers1 == null
        || pers1.mother.name == null) {
        return false;
    } // END safety check
    // First check if Persons name equals pers1's mother
    else if (name.equals(pers1.mother.name)) {          
        // Second check if Persons children contains pers1
        for (int i = 0; i < children.size(); i++) {
            if (children.get(i).name.equals(pers1.name)) {
                return true;
            } 
        } // END second check
    } // END first check 
    return false;
} // END method isMotherOf
} // END class Person 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:52:08.753

你交换了两件事，`pers1.children.name.get(i)`应该是`pers1.children.get(i).name`。

由于我们在这里，您将字符串与 进行比较`==`，这比较对象的引用，请`equals(..)`改用。[在这里](http://www.java-samples.com/showtutorial.php?tutorialid=221)查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:53:35.983

看起来您正在使用`==`而不是`equals()`函数来比较字符串。

尝试更改此行，如下所示：

```
if (pers1.children.name.get(i).equals(name)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:56:20.223

不要使用“==”进行字符串比较；它没有按照你的想法做。你想把它写成：

```
if (mother.name.equals(pers1.name)) { ... 
```

当然，这是一种稍微危险的方法，因为如果其中一个为空，您将得到s `NullPointerException`。所以你会想做一些防御性编程。`mother``mother.name`

```
if (mother == null) return false;
if (pers1 == null) return false;
if (mother.name != null && mother.name.equals(pers1.name)) .... 
```

# javascript - 鼠标悬停问题和 jquery 问题

> ID：14648853
> 
> 赞同：1
> 
> 时间：2013-02-01T14:50:17.973
> 
> 标签：javascript, jquery, html, css

我对几个块的 jquery 效果有疑问。Mouseenter 和 mouseleave 仅在第一个 div 块上起作用，而在所有其他块上不起作用。

这是JS：

```
$(文档).ready(函数() {

     $('#mainbox').mouseenter(
         功能 （） {
           $('#infobox').fadeIn();
         });
     $('#mainbox').mouseleave(
         功能 （） {
           $('#infobox').fadeOut();
         });

   });

```

还有块：

```
<div id="mainbox"><div id="infobox" style="display: none;">first block - it works on      this one</div></div>

<div id="mainbox"><div id="infobox" style="display: none;">2nd block - it doesn't work/div></div>

<div id="mainbox"><div id="infobox" style="display: none;">3rd block - it doesn't work</div></div> 
```

你们有什么想法是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:54:40.473

问题是：该选择器仅针对文档中第一个主框中的第一个信息框。

在[API](http://api.jquery.com/id-selector/)中，您可以阅读：

> 每个 id 值只能在文档中使用一次。如果为多个元素分配了相同的 ID，则使用该 ID 的查询将仅选择 DOM 中第一个匹配的元素。但是，不应依赖此行为；具有多个使用相同 ID 的元素的文档无效。

这就是您的代码无法正常工作的原因。

提示：将 id 切换到类并绑定鼠标事件以在 div 内进行搜索，例如：

```
$('.mainbox').mouseenter(
  function () {
    $(this).find('.infobox').fadeIn();
  }); 

$('.mainbox').mouseleave(
  function () {
    $(this).find('.infobox').fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:53:11.733

将 id 更改为类：

```
<div class="mainbox"><div class="infobox" style="display: none;">first block - it works on      this one</div></div>

<div class="mainbox"><div class="infobox" style="display: none;">2nd block - it doesn't work/div></div>

<div class="mainbox"><div class="infobox" style="display: none;">3rd block - it doesn't work</div></div> 
```

然后在 JS 中：

```
$(document).ready(function() {

 $('.mainbox').mouseenter(
     function () {
       $(this).find('.infobox').fadeIn();
     }); 
 $('.mainbox').mouseleave(
     function () {
       $(this).find('.infobox').fadeOut();
     });
}); 
```

# android - Android 2.3 上奇怪的 z-index 行为

> ID：14648856
> 
> 赞同：1
> 
> 时间：2013-02-01T14:50:25.200
> 
> 标签：android, html, css, samsung-mobile

我想我可能在 Android 2.3 中遇到了另一个 z-index 错误。我们有这个小部件，它在所有主要的操作系统/浏览器组合上呈现如下：

![在此处输入图像描述](../Images/276cea8f8a8f0d8c2a195c005be17e4c.png)

这是我们正在使用的 HTML：

```
<ol>
    <li>
        <span class="ranking">1</span>
        <h3>
            <a href="...">TT Legends shows the exhilaration of motorbike racing</a>
        </h3>
        <span class="score-bar" style="width: 610px;"></span>
    </li>
    <li>
        <span class="ranking">2</span>
        <h3>
            <a href="...">101-year-old grandmother 'comes back from the dead'</a>
        </h3><span class="score-bar" style="width: 421px;"></span>
    </li>
</ol> 
```

这是CSS：

```
.trending ol {
    counter-reset: item;
    list-style-type: none;
    overflow: hidden;
}

.trending li {
    position: relative;
    min-height: 42px;
    margin-bottom: 10px;
    overflow: hidden;
}

.trending .ranking {
    display: table-cell;
    vertical-align: middle;
    min-width: 40px;
    text-align: center;
}

.trending h3 {
    display: table-cell;
    vertical-align: middle;
    position: relative;
    z-index: 2;
    width: 100%;
    margin-left: 40px;
    padding: 5px;
    line-height: 1.2;
}

.score-bar {
    display: inline-block;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 40px;
    width: 0;
    z-index: 0;
    background: #f3f5f9;
} 
```

我们使用 JS 根据相关项目的分数来设置蓝色 .score-bar 跨度的宽度。

在 HTC Desire 和三星 Galaxy S2 等 Android 2.3 设备上，结果如下：

![在此处输入图像描述](../Images/490678f9cdf2d6a208af9b79d88c2461.png)

任何人都可以提出解决方案吗？我已经尝试了所有我能想到的 CSS 调整，但似乎没有任何东西可以解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:01:22.510

您需要做的是将`.score-bar`背景样式移动到跨度以外的其他位置。

删除得分栏跨度，并改用以下内容。

这是 jsfiddle 示例... [http://jsfiddle.net/qaYbS/](http://jsfiddle.net/qaYbS/)

**注意：**在 jsfiddle 中我使用了背景颜色，对于您的实例，您将需要使用实际图像。只需制作一个您需要的高度和 1px 宽的图像并使用它。它根本不会增加加载时间。这是使背景宽度相应缩小的唯一方法。您可以限制背景颜色的大小。

```
.trending li:nth-child(1) {
    background: red;
    background-image: ;
    background-size: 610px 20px;
    background-position: 40px 0px;
}
.trending li:nth-child(2) {
    background: blue;
    background-image: ;
    background-size: 421px 20px;
    background-position: 40px 0px;
}
.trending li:nth-child(3) {
    background: green;
    background-image: ;
    background-size: 300px 20px;
    background-position: 40px 0px;
}
.trending li:nth-child(4) {
    background: orange;
    background-image: ;
    background-size: 200px 20px;
    background-position: 40px 0px;
}
.trending li:nth-child(5) {
    background: purple;
    background-image: ;
    background-size: 100px 20px;
    background-position: 40px 0px;
} 
```

# ruby-on-rails - 如何使用 rails 将设计登录信息传递到不同的应用程序

> ID：14648859
> 
> 赞同：2
> 
> 时间：2013-02-01T14:50:40.443
> 
> 标签：ruby-on-rails, ruby, api, devise, single-sign-on

我有 3 个应用程序需要使用 SSO、https 和设计进行身份验证的组合相互通信。我想弄清楚的是如何在一个 Rails 应用程序上执行登录并让相关的（cookie、会话等）沿着链传递，以便外部 Web 浏览器可以查看信息。

这是3个应用程序的流程。

*   第一个应用程序是WEB PORTAL。它将一堆 sso（单点登录）相关的字符串发送到 api。
*   第二个 API_APP 应用程序验证信息并将其传递给 rails 应用程序。
*   此 RAILS_APP 应用程序验证 api 的信息并使用 devise 的“sign_in_and_redirect”辅助方法登录用户

现在这是棘手的部分。如何将信息从 RAILS_APP 沿链传递回 WEB_PORTAL 以便它可以查看门户网站可以查看已登录的用户帐户？

* * *

更多信息：

我承认架构不太理想，但不幸的是目前无法更改。WEB_PORTAL 实现并不那么重要，但我认为 API_APP 需要一些工作。

API_APP 将信息格式化为网络 http 请求，如下所示

```
uri = URI.parse(MY_RAILS_APP_URI)
http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Post.new(uri.request_uri, initheader = {'Content-Type' =>'application/json'})
request.body = {"email" => email, "id" => id, "email" => email, "timestamp" => timestamp, "token" => token}.to_json
response = http.request(request)
location = response.header['location'] #if the RAILS_APP returns a 302 
```

关于如何让 WEB_PORTAL 登录的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:11:41.163

通过将我的 cookie 设置为包含所有子域，我解决了类似的问题。我不知道这对你来说是否可行。我让 foo.example.com 与 bar.example 和 www.example.com 共享 cookie 信息。我相信也可能适用于您的情况。

# jsf - 按回车键单击隐藏按钮而不在 jsf 页面上使用 JS？

> ID：14648860
> 
> 赞同：1
> 
> 时间：2013-02-01T14:50:46.917
> 
> 标签：jsf

我有一个 jsf 页面，其中有几个 's。当我按下回车键时，我想点击一个特定的按钮——这个按钮是隐藏的。有没有办法在不使用 JS 的情况下做到这一点？我知道如果我将按钮作为页面上的第一个按钮，默认情况下会单击它 - 但它似乎不起作用。

这是示例代码。我希望在 Enter 上单击“hiddenButton”。

```
<h:form>
    <h:commandButton id="button1" action="#{bean.action1}" /> 
    <h:commandButton id="button2" action="#{bean.action2}" /> 
    <h:commandButton id="button3" action="#{bean.action3}" />
    <h:commandButton id="hiddenButton" action="#{bean.hiddenAction}" style="display:none;"/> 
<h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:07:23.750

> *有没有办法在不使用 JS 的情况下做到这一点？*

如果您想支持所有浏览器，则不是。

* * *

> *我知道如果我将按钮作为页面上的第一个按钮，默认情况下会单击它 - 但它似乎不起作用。*

这仅适用于 Firefox，不适用于 Chrome (Webkit) 或 IE。如果你替换`display:none`为`visibility:hidden`，那么它也可以在 Chrome 中工作，但在 IE 中仍然不行。

所以，如果你想支持所有浏览器，JS 是你最好的选择。根据具体的功能要求，可能会有更好的解决方案，[您在问题中没有说明任何内容](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。

# c# - 我如何使用 Moq 或 NInject 模拟内核模拟接口

> ID：14648863
> 
> 赞同：4
> 
> 时间：2013-02-01T14:51:11.200
> 
> 标签：c#, unit-testing, nunit, ninject, moq

我刚刚浏览了关于模拟和依赖注入主题的问题和博客。得出一个结论，我只需要模拟客户端使用的接口。我期待在这里测试一个简单的用例而不知道。

**合同**

```
public Interface IApplicationService
{

     bool DeleteApplication(int id);

     ApplicationDto AddApplication(ApplicationDto application);

     IEnumerable<ApplicationDto> GetApplications();

} 
```

**实施（我要模拟）**

```
public Class ApplicationService:IApplicationService
{
    private EntityFrameworkRepo repo; 

    public ApplicationService()
    {
         repo = new EntityFrameworkRepo();
    }

    public ApplicationDto Add(ApplicationDto dto)
    {
         //add to dbcontext and commit
    }

} 
```

**模拟代码**

```
[Test(Description = "Test If can successfully add application")]
public void CanAddApplication()
{
    //create a mock application service
    var applicationService = new Mock<IApplicationService>();

    //create a mock Application Service to be used by business logic
    var applicationDto = new Mock<ApplicationDto>();

    //How do i set this up
    applicationService.Setup(x => x.GetApplications()).Returns(IEnumerable<applicationDto.Object>);
} 
```

而且我确信我需要测试业务逻辑而不是嘲笑它。那么我到底要做什么来测试我的`ApplicationService`，然后将实体框架排除在外。

顺便说一句`ApplicationService`，它使用带有 NInject 的构造函数注入。那么用它来模拟这个`NInject.MockingKernel`会设置依赖链吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T20:28:06.927

在单元测试中使用依赖注入 (IOC) 容器几乎没有好处。依赖注入可帮助您创建松散耦合的组件，而松散耦合的组件更易于测试，仅此而已。

因此，如果您想测试某些服务，只需创建其依赖项的模型并像往常一样将它们传递给该服务（这里不需要涉及 IOC 容器，我几乎无法想象，您将需要 IOC 容器的一些功能 - 例如上下文绑定，拦截等 - 内部单元测试）。

**如果你想让你`ApplicationService`的测试更容易，它应该看起来更像：**

```
public class ApplicationService: IApplicationService
{
    private readonly IEntityFrameworkRepo repo; 

    // dependency passed by constructor
    public ApplicationService(IEntityFrameworkRepo repo)
    {
         this.repo = repo;
    }

    // save to db when DTO is eligible
    public ApplicationDto Add(ApplicationDto dto)
    {
         // some business rule
         if(dto.Id > 0 && dto.Name.Contains(string.Empty)){
              //add to dbcontext and commit
         }else{
              throw new NotEligibleException();
         } 
    }   
} 
```

*这里依赖是由构造函数传递的。在您的应用程序代码中，您将使用它与 IOC 容器一起进行构造函数注入（IOC 容器将负责创建 的实例`IEntityFrameworkRepo`）。*

*`IEntityFrameworkRepo`但是在单元测试中，您可以只传递自己创建的某些实现的实例。*

**`ApplicationDto`**

*只要`ApplicationDto`是可以手动创建的对象，我可以直接在单元测试中使用它（手动创建实例）。否则我将不得不用类似的接口包装它`IApplicationDto`，以便能够用 Moq 模拟它。*

```
public class ApplicationDto{
     public int Id {get; set;}
     public string Name {get; set;}
} 
```

**以下是单元测试的样子：**

*在单元测试中，我将使用 的模拟实现`IApplicationRepo`，因为我不想配置例如数据库连接、Web 服务等，而我的主要目的是测试`ApplicationService`非底层存储库。另一个优点是无需针对各种机器进行特定配置即可运行测试。要模拟一些数据库存储库，我可以使用例如`List`.*

```
[Test(Description = "Test If can successfully add application")]
public void CanAddApplicationIfEligible()
{
    var repo = GetRepo();
    var appService = new ApplicationService(repo);       
    var testAppDto = new ApplicationDto() { Id = 155, Name = "My Name" };

    var currentItems = repo.ApplicationDtos.Count();

    appService.Add(testAppDto);

    Assert.AreEqual(currentItems + 1, repo.ApplicationDtos.Count());
    var justAdded = repo.ApplicationsDto.Where(x=> x.Id = 155).FirstOrDefault();
    Assert.IsNotNull(justAdded);
    ///....
}

private static IEntityFrameworkRepo GetRepo{
    // create a mock repository
    var listRepo = new List<ApplicationDto>{
                         new ApplicationDto {Id=1, Name="MyName"}               
                   };

    var repo = new Mock<IEntityFrameworkRepo>();

    // setup the methods you know you will need for testing

    // returns initialzed list instead of DB queryable like in real impl.
    repo.Setup(x => x.ApplicationDtos)
        .Returns<IQueryable<ApplicationDto>>(x=> listRepo);

    // adds an instance of ApplicationDto to list
    repo.Setup(x => x.Add(It.IsAny<ApplicationDto>())
        .Callback<ApplicationDto>(a=> listRepo.Add(a));
    return repo.Object;
} 
```

笔记：

*已经发布了一个[ninject.mockingkernel](https://github.com/ninject/ninject.mockingkernel/wiki/Examples)扩展。wiki 上的示例中描述的方法可以使您的单元测试代码更整洁，但是那里描述的方法绝对不是依赖注入（它是服务定位器）。*

# debugging - 我可以依靠 IE 的浏览器模式和文档类型来调试 IE 8 及以下版本 + Quirks 的问题吗？

> ID：14648864
> 
> 赞同：1
> 
> 时间：2013-02-01T14:51:12.123
> 
> 标签：debugging, testing, cross-browser, compatibility, qa

如果我使用 F12 开发者工具调试 IE，我可以依靠“浏览器模式”和“文档类型”来调试 IE8 及以下的问题吗？

通过调试，我主要是指整体页面行为... HTML/CSS，客户端说“下拉菜单在 IE8 中不起作用”，我有 IE9... 本能是按 F12 并更改文档类型或浏览器模式并进行测试.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:05:36.873

简短的回答，不。

我**不建议**使用兼容模式。我一直不太明白为什么`MS`似乎不做什么`Mozilla`和`Google`做什么，就是*不允许使用已弃用的标签*。例如，在我的工作中，我们有两个浏览器使用层，第 1 层和第 2 层。第 1 层包括：（ `Safari`奇怪的是，我们有很多客户通过他们的 iPad 购买）`Chrome`，`Firefox`和`IE9`。第二层是： `IE8`和剩下的那堆。最近，我们遇到了一个错误，其中一些`checkboxes`地方无法正确渲染`**only IE8**`；但在`IE7`和`IE9`. 这里的寓意是，使用兼容模式是在假设下进行测试，如果你想要彻底和正确的测试，你不能假设任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:37:07.720

You can try to use the Quirks mode, but that's not 100% the same. If you are lucky, you will hit the same bug also in quirks mode.

The only sure way is to use a IE8\. There are cross-browser testing tools that enable you to do so without any installs.

Just for bug reporduction purposes [http://www.modern.ie/virtualization-tools](http://www.modern.ie/virtualization-tools) offers some VM-s you can use.

# angularjs - 为什么AngularJS在模板之间切换时会冗余调用$scope中声明的getter函数？

> ID：14648867
> 
> 赞同：0
> 
> 时间：2013-02-01T14:51:19.243
> 
> 标签：angularjs

这是一个奇怪的行为，我希望你帮我检查一下：http: [//jsfiddle.net/m3Z8r/2/](http://jsfiddle.net/m3Z8r/2/)

我很好奇为什么 Angular 调用`symbolsLength()`函数的次数比我预期的要多：

1.  从第一次被调用*两次*（预计*只被调用一次*）
2.  当从`template1`to切换时`template2`它会再次触发（但没有明显的需要）

如果将 initial 设置`templateName`为`"template2"`，`symbolsLength()`则不会调用函数，这很好。

拜托，有人可以解释一下这里发生了什么吗？

PS我知道函数中没有必要，`symbolsLength()`因为我们可以写`{{ symbols.length }}`，但是让我们假设这个函数做了一些非常重要的事情，例如联系服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:26:33.467

*1.从第一次调用两次（预计只调用一次）*

我单步执行了代码，发现这是因为为任何绑定创建的每个监视函数都包含最后一个值属性，并且在第一阶段，最后一个值与将脏标志设置为 true 的表达式值不同，从而触发一个新的经过。

*2.当从模板1切换到模板2时，它会再次触发（但没有明显的需要）*

包含新模板后，范围值没有改变并不重要，因此创建了新手表，因此重复步骤 1.

# ios - 故事板不会在模拟器中更新

> ID：14648871
> 
> 赞同：17
> 
> 时间：2013-02-01T14:51:31.410
> 
> 标签：ios, xcode, storyboard, ios-simulator

我有一个工作应用程序`Xcode`，但是当我尝试构建和运行它时，模拟器会显示我正在处理的故事板的旧版本。我已经更改了情节提要上的一些设计，但这并没有反映在模拟器中，没有任何更新。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-01T14:54:50.630

1.  删除模拟器上的应用程序。

2.  干净的

3.  项目清单

4.  构建和运行

在您的控制器中使用`NSLog(@"")`以检查代码执行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-30T13:17:32.240

我只花了至少 6 个小时。我有一个解决方案，但我还向苹果提交了技术支持票，以尝试获取有关原因和正确解决方案的更多信息。

**只需删除对故事板文件的引用并将它们重新添加到同一文件组中。**

这似乎将情节提要文件包含回构建期间生成的应用程序包中（可以在

```
DerivedData/APPNAME/Build/Products/Debug-iphonesimultator/APPNAME.app 
```

从这里我可以看到我的更改按预期从情节提要中反映出来。

PS - 你在使用本地化吗？我曾是。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-06T09:36:00.200

我为此浪费了2个小时。

解决方案非常简单：删除应用程序，**关闭**iPhone 5S (iOS 7.1.1)，然后打开它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-05T12:49:49.177

当您打开本地化时，xcode 将故事板文件移动到本地化文件夹（例如**Base.lproj/name.storyboard**）中。当您在模拟器上构建和运行项目时，xcode 将 name.storyboard 复制到**"derivedData"/Base.lproj/name.storyboard**中，但之前在本地化之前创建的**"derivedData"/name.storyboard**仍然存在。在这种情况下，模拟器使用比较容易找到的文件，即模拟器使用旧文件**“derivedData”/name.storyboard**进行操作。

**解决方案：**只需在导航器和目标/常规中重命名故事板文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-04T13:37:56.733

当我的计算机上有一个项目的多个副本时，这个错误第一次发生在我身上。无论出于何种原因，有多个副本的事实使得故事板看起来好像没有在副本之间更新，并且在某些情况下代码没有更新。我以为我忘记在回家之前把正确的副本放在我的闪存驱动器上，但结果证明这是一个 XCode 错误。

删除使用相同名称的任何多个副本，重新启动 XCode 并打开您最近的副本。非常奇怪，但从现在开始我可能会使用 BitBucket 或 GitHub，而不是把它扔到闪存驱动器上。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-13T08:05:10.880

删除

> ~/库/开发者/Xcode/derivedData/

为我工作！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-07T08:20:54.753

本地化后我也遇到了同样的问题我的解决方案是单击产品，清理构建文件夹。然后就好了

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-07T12:41:17.530

我发现删除和添加故事板文件在我的情况下不起作用，它也有副作用，比如它会自动将一个主 nib 条目添加到应用程序的 plist 文件中（这随后使应用程序无法在 iPhone 模拟器中启动）。

我不想尝试从模拟器中删除应用程序，因为我在应用程序的 Document 目录下有很多文件。

最后我找到了另一种效果很好的方法：只需删除“/Users/$username/Library/Application Support/iPhone Simulator/7.1/Applications/$app/$yourapp.app”文件。Documents 目录下的文件保持不变。

（我也本地化了我的故事板。）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-06T23:14:42.050

I found this same thing happened with Xcode 6.1.1 if I happened to have copied a project; the new project run in the simulator was actually still reflecting the *old, original* project.

In my case the problem was with how the default area was set up for derived data (essentially the location where the binary files go for a build). Mine was set to legacy and the simulator was using the wrong project, even after a clean. The solution was to go to *Preferences*->*Locations*, press *Advanced*, and change the location from *Legacy* to *Unique*.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-15T00:08:55.363

模拟器上的情节提要本应如此。设备上的情节提要不会更新。我不得不从 iPhone 中删除应用程序，然后在设备上重新运行它，以便让 Storyboard 在设备上更新。对我来说幸运的是，这只是测试数据，但我在一个视图上使用了自动布局并返回手动。我认为这就是造成我问题的原因。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-17T17:33:48.147

使用本地化故事板时我也得到了这个 -在 Xcode 中**运行**只是拒绝安装最新版本的已编译故事板。我认为这与**Run**将更改的资源复制到设备的方式有关 - 它与其他形式的设备应用程序安装不同。

**在不删除应用程序和丢失任何数据**的情况下解决此问题的最快方法是：

*   在 Xcode 中生成**存档**构建
*   将其导出以进行**临时**部署
*   双击生成的**IPA**将其添加到 iTunes
*   从 iTunes 中的设备页面强制**更新**该应用程序

为了让 iTunes 看到您有一个新版本，您的应用程序内部**版本号**需要在生成存档之前增加（如果您还没有这样做）。

我发现这种方法意味着您不必从设备上删除应用程序，您只是强制它安装整个安装包，而不是我认为**Run**正在做的差异。

我不确定是什么原因造成的，如果是本地化资源错误或什么，但这对我来说仍然是 Xcode 7 中的一个问题。

# java - 消息驱动 Bean 不接收消息

> ID：14648872
> 
> 赞同：0
> 
> 时间：2013-02-01T14:51:31.910
> 
> 标签：java, glassfish, jms, java-ee-6, message-driven-bean

我正在尝试实现一个服务，它监听一个主题以接收发送到该主题的消息。代码很简单：

```
@MessageDriven(mappedName="jms/TEST", activationConfig={
    @ActivationConfigProperty(propertyName="destinationType",propertyValue="javax.jms.Topic"),
    @ActivationConfigProperty(propertyName="subscriptionName",propertyValue="TEST")
    })
    public class MessageListener implements MessageListener {

    private static final Logger logger = Logger.getLogger(MessageListener.class);

    @Override
    public void onMessage(Message arg0) {
        logger.info("Receiving " + arg0);
    }
} 
```

侦听器部署在 Glassfish 上。在 Glassfish 中，我还添加了一个管理对象资源：

```
JNDI Name: jms/TEST
Resource Adaptor: jmsra
Resource Type: javax.jms.Topic
Class Name: com.sun.messaging.Topic
Name: TEST
Physical Name: TEST 
```

我还有另一项服务，也在 Glassfish 中，向主题 TEST 发送消息。但是，我的听众根本没有收到任何消息。我在不使用消息驱动 Bean 的情况下创建了另一个侦听同一主题的服务，并且能够接收，即发送消息没有任何问题。我想知道我的豆子是否做错了什么。

大号

# php - curl自动登录不写cookie

> ID：14648874
> 
> 赞同：1
> 
> 时间：2013-02-01T14:51:38.930
> 
> 标签：php, curl, login, https, external

我尝试使用 cUrl 发布 json-data 登录，服务器响应登录成功，但它没有将会话写入 cookie，我的代码：

```
<?php
$json_url = 'https://www.site.com/Login';
$json_string = '{"username":"user","password":"12345"}';

$ch = curl_init( $json_url );

$options = array(
CURLOPT_HEADER => true,
CURLOPT_RETURNTRANSFER => true,
CURLOPT_HTTPHEADER => array('Content-type: application/json;  charset=utf-8') ,
CURLOPT_POSTFIELDS => $json_string
);

curl_setopt_array( $ch, $options );

$result =  curl_exec($ch); // Getting jSON result string
echo $result;
?> 
```

我看到需要在标题中写入的 cookie，但它们没有写入我的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:55:32.640

使用服务器端 curl 请求创建的 cookie 无法发送到浏览器。您不能为运行脚本的域以外的域设置 cookie。例如，您不能让您的 PHP 代码登录到 facebook，然后将 facebook 会话令牌传回给用户，并让它在实际的 facebook 站点上可用。如果您尝试，您会发现浏览器确实使用您设置的名称/值设置了一个 cookie，但它将仅限于**您**的站点，而不是 facebook.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:57:09.623

您需要添加 cookie 文件才能保存和读取它们：

```
curl_setopt($s,CURLOPT_COOKIEJAR,"ciasteczka.txt"); 
curl_setopt($s,CURLOPT_COOKIEFILE,"ciasteczka.txt"); 
```

（ciasteczka 在波兰语中是饼干）

# sql-server-2008 - 将用户定义的表类型传递给 SP 而不声明

> ID：14648876
> 
> 赞同：0
> 
> 时间：2013-02-01T14:51:44.223
> 
> 标签：sql-server-2008, user-defined-types

**代码**

```
create TYPE [dbo].[IntListType] as Table
(
[Number] [int] null
)

create procedure TestProc
(
    @l IntListType readonly
)
as
begin
    select * from products where ProductId in (select Number from @l)
end

create Table Products
(
    ProductId
    ProductName
)

insert into Products Values(1, 'One'),
                           (2, 'One'),
                           (3, 'Two'),
                           (4, 'Two'),
                           (5, 'Three'),
                           (6, 'Three') 
```

**问题**

注意：这只是一个示例，将查询放在存储过程中似乎很容易，但这只是为了说明我想要做什么。在实时情况下，它不像这个例子那么容易。

目前我希望通过 productId 收集几个产品我必须这样做：

```
declare @l IntListType
insert into @l values(1),(2) 
exec TestProc @l 
```

或声明@l IntListType insert into @l select ProductId from Products where Name = 'One' exec TestProc @l

我想知道是否可以跳过声明部分并将选择结果创建为 IntListType。我试图用“With”来做到这一点

```
exec TestProc (;with A as( select ProductId from Products where Name = 'One') select * from a) 
```

但我无法完成这项工作。

是否有可能我正在尝试做，或者，如果我使用用户定义的表类型，我是否总是需要在它起作用之前声明和填充它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:05:09.213

很抱歉让您失望，但尽管如此，目前 SQL Server 甚至不允许将简单的计算作为参数传递给过程。因此，它也不允许传入查询。

附带说明，`IN`不应该与子查询一起使用，因为这有时会导致性能问题。改为使用`EXISTS`或直接使用`JOIN`.

# yii - Yii CTabView 只有第一页显示一个视图

> ID：14648886
> 
> 赞同：0
> 
> 时间：2013-02-01T14:52:07.063
> 
> 标签：yii, highcharts

我使用 CTabView 显示一些 HighCharts 图形，但只有第一个选项卡被渲染。我看到其他每个选项卡都有一个空白选项卡，有时我从 HighCharts ( `tickPosition not defined`)收到 javascript 错误

HighCharts 的 javascript 是否正确发布到不同的视图？为什么第一个视图有效，而其他视图无效？

```
$this->widget('CTabView', array(
    'tabs'=>array(
        'tab1'=>array(
            'title'=>'Contract Extensions per Group',
            'view'=>'reportGroupExtensionsStack',
            'data'=>array('model'=>$model),
        ),
        'ta1'=>array(
            'title'=>'Gender of Assistants',
            'view'=>'reportGender',
           'data'=>array('model'=>$model),
       ),
   ),
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:06:38.097

Highcharts 在隐藏/未显示的容器中不起作用。看看：[http ://highslide.com/forum/viewtopic.php?f=10&t=10712](http://highslide.com/forum/viewtopic.php?f=10&t=10712)

因此可能的解决方案是渲染所有图表或容器外部，并在单击或单击选项卡时将它们移动到特定选项卡 - 然后呈现图表。

# c# - Windows 8 c# 将相机的图片保存在本地存储中

> ID：14648891
> 
> 赞同：1
> 
> 时间：2013-02-01T14:52:21.183
> 
> 标签：c#, windows-8, microsoft-metro, local-storage

我是 C# 新手，我想创建一个可以拍照并将自己保存在本地存储中的应用程序 Metro。我知道，我需要使用隔离存储，但我真的不明白如何将它用于图像。我看到了很多关于字符串的例子，但没有看到图片的例子。

如果有人知道该怎么做？实际上，我拍了一张照片，并要求用户将其记录在他想要的地方。但我想在用户拍照后自动记录。这是我目前的代码：

```
private async void Camera_Clicked(object sender, TappedRoutedEventArgs e)
    {       
        CameraCaptureUI camera = new CameraCaptureUI();
        camera.PhotoSettings.CroppedAspectRatio = new Size(16, 9);
        StorageFile photo = await camera.
                                  CaptureFileAsync(CameraCaptureUIMode.Photo);

        if (photo != null)
        {
            BitmapImage bmp = new BitmapImage();
            IRandomAccessStream stream = await photo.
                                               OpenAsync(FileAccessMode.Read);
            bmp.SetSource(stream);
            ImageSource.Source = bmp;
            ImageSource.Visibility = Visibility.Visible;

            appSettings[photoKey] = photo.Path;

            FileSavePicker savePicker = new FileSavePicker();
            savePicker.FileTypeChoices.Add
                                  ("jpeg image", new List<string>() { ".jpeg" });

            savePicker.SuggestedFileName = "New picture";

            StorageFile ff = await savePicker.PickSaveFileAsync();

            if (ff != null)
            {
                await photo.MoveAndReplaceAsync(ff);                 
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:18:47.030

您需要做的就是用检索本地文件夹中的 StorageFile 对象来替换文件选择器逻辑，例如：

```
private async void Camera_Clicked(object sender, TappedRoutedEventArgs e)
{       
   CameraCaptureUI camera = new CameraCaptureUI();
   camera.PhotoSettings.CroppedAspectRatio = new Size(16, 9);
   StorageFile photo = await camera.
                          CaptureFileAsync(CameraCaptureUIMode.Photo);

   if (photo != null)
   {
      var targetFile = await ApplicationData.Current.LocalFolder.CreateFileAsync("some_file_name.jpg");
      if (targetFile != null)
      {
         await photo.MoveAndReplaceAsync(targetFile);                 
      }
   }
} 
```

# php - 为什么我只收到数组每个元素的第一个值？

> ID：14648897
> 
> 赞同：0
> 
> 时间：2013-02-01T14:52:33.770
> 
> 标签：php, arrays, foreach, mysqli

我无法弄清楚为什么我的所有结果都是它返回的第一个值的重复。

此代码返回相同的 ID 和重复的格式化日期；但是，我希望它读取一个值，然后为数据库中的每个条目转换该值。这是我的代码：

```
<?php
include('../includes/conn.inc.php');
$stmt = $mysql->prepare("SELECT id, endDate FROM TABLE ORDER BY id");
$stmt->execute();
$stmt->bind_result($id, $endDate);

while($row = $stmt->fetch()) {
    $dataRow[] = array('id'=>$id,'endDate'=> $endDate);
};

foreach($dataRow as $i) {
    $newEndDate = date('Y-m-d',strtotime($endDate));
    $sql = 'UPDATE TABLE SET startDate = ? WHERE id= ? ';
    $stmt = $mysql->stmt_init();
    if ($stmt->prepare($sql)) { 
        $stmt->bind_param('si',$newEndDate, $id);
        $OK = $stmt->execute();}
        if ($OK) {
            echo $id . " " . $newEndDate .  "done <br/>";
        } else {
            echo $stmt->error;
        } 
        $stmt->close();
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:54:51.667

在你的`foreach`你总是使用从最后一个设置的**最后一个值** `$stmt->fetch()`

尝试：

```
foreach($dataRow as $i) {
    $newEndDate = date('Y-m-d',strtotime($i['endDate']));
    $id = $i['id'];
    $sql = 'UPDATE TABLE SET startDate = ? WHERE id= ? ';
    $stmt = $mysql->stmt_init();
    if ($stmt->prepare($sql)) { 
        $stmt->bind_param('si',$newEndDate, $id);
        $OK = $stmt->execute();
    }
    if ($OK) {
        echo $id . " " . $newEndDate .  "done <br/>";
    } else {
        echo $stmt->error;
    } 
    $stmt->close();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:59:27.707

利用`get_result();`

```
$dataRow = array()
$stmt = $mysql->prepare("SELECT id, endDate FROM TABLE ORDER BY id");
$stmt->execute();
$result = $stmt->get_result();
while($row = $result->fetch_array()) {
    $dataRow[$row['id']] = $row['endDate'];
} 
```

而且你没有在第二个循环中填充你的 $endDate

```
foreach($dataRow as $i => $endDate){
    $newEndDate = date('Y-m-d',strtotime($endDate));
    ... // rest of your code 
```

# sql - Sql根据列添加新行

> ID：14648899
> 
> 赞同：-1
> 
> 时间：2013-02-01T14:52:37.423
> 
> 标签：sql, sql-server-2008

```
Table A(ID, col2, col3, col4) 
```

鉴于 col4 = 'certain criteria' 和现有条目中的 Col2 值将用作新条目的 col2，我想为每个 ID 添加一个新条目到表 A 中。我将如何完成这项任务？

让我失望的部分是如何在不使用循环的情况下做到这一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:56:12.663

类似的东西应该工作

```
INSERT INTO TableA (col2, col3, col4)
SELECT col2, 'any constant value', col4 FROM TableA
WHERE col4='certain criteria'
--GROUP BY ID (not clear if you need to group by something) 
```

# jquery - 不调用动态加载的选项列表上的更改事件

> ID：14648906
> 
> 赞同：0
> 
> 时间：2013-02-01T14:52:56.200
> 
> 标签：jquery, html-select, velocity, jquery-events

我想动态加载（使用速度对象）一个选择下拉列表，然后将更改事件与之关联；为此，我写道：

```
$(function() {
        var tableList = $("#tableList");
#foreach( $i in $it.getTableNames() )
        tableList.append($("<option></option>")
            .text("$!esc.html($i)"));
#end
        tableList.change(function(){
            jQuery.ajax({
            type: "GET",
            url: "$it.uri" + "/tablesColumnNames",
            dataType: "json",
            success: loadTableResponse
            });
        });
} 
```

但是，尽管选项列表已正确加载，但永远不会触发更改事件。这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:59:58.017

做

```
$(function() {
  $(document.body).on("change","#tablelits",function() {
              //...
         });
  //append your select/options whenever you want
}) 
```

注意：`$(document.body)`显然缓存你的，前面的代码只是机制的说明

注意：不要一一附加您的选项，在您的选择框中创建一个包含所有选项的 var，然后使用一次附加选择`appendTo`（因为`append`ie 往往会出错）

# iphone - 停止重复 UIView 动画块？

> ID：14648913
> 
> 赞同：2
> 
> 时间：2013-02-01T14:53:05.750
> 
> 标签：iphone, objective-c, ipad, animation, uiview

我有一个 UIView 动画块，它使用该`UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoReverse`选项，所以它继续运行，但在某些时候我需要停止动画，但更重要的是停止它并使视图返回到其原始位置。

我已经尝试过`[dot1.layer removeAllAnimations];`，但它停止了它的轨道而不将它返回到它的原始位置，它停止了中间动画。

我尝试停止它，然后只运行第二个动画以将其返回到正确的帧，但这可能有点生涩，因为我不知道它需要多长时间才能持续多长时间等。

那么是否可以在动画完成最后一个周期而不是中途后简单地停止动画？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:10:26.243

你应该试试这个：

```
[UIView animateWithDuration:2 delay:0 options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction animations:^
{
    view.frame = CGRectMake(0, 100, 200, 200);
} completion:^(BOOL finished)
{
    if(! finished) return;
}]; 
```

并停止动画使用这个：

```
[view.layer removeAllAnimations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T04:46:29.753

我已经尝试了公认的解决方案，但它对我不起作用。动画在一次运行后就停止了。在网上挖掘让我相信这`[self.view.layer removeAllAnimations]`是停止动画的推荐方法（另一种方法可以在以下链接中看到，作为提问者对已接受解决方案的评论

[使用 BOOL / 完成块停止自动反转 / 无限重复 UIView 动画](https://stackoverflow.com/questions/13991465/stop-an-auto-reverse-infinite-repeat-uiview-animation-with-a-bool-completion])）。

对我有用的方法是 BooRanger 给出的方法（甚至 jrturton 也接受了它）。我在类中设置了一个名为 stopAnimations 的布尔属性，并将其值初始化为 NO。每当我想停止动画时，我将 stopAnimations 设置为 YES，然后调用`[self.view.layer removeAllAnimations]`下一行。然后在完成块中，我执行以下操作。

```
if(self.stopAnimations){
self.finishAnimations = NO;
return;
} 
```

希望这可以帮助某人。:)

# asp.net - 自定义 ILogicalThreadAffinitive 类对象在回发时为空

> ID：14648915
> 
> 赞同：4
> 
> 时间：2013-02-01T14:53:07.860
> 
> 标签：asp.net, iis, web-applications, nullreferenceexception

一位前雇员实现了一个自定义 VB.Net Context 类，该类继承 DictionaryBase 并实现 ILogicalThreadAffinitive。类对象在使用 .NET 4 Framework 的 ASP.NET Web 应用程序中的整个用户会话中维护用户 ID、语言、位置等值。

```
<Serializable()> _
Public NotInheritable Class Context
    Inherits DictionaryBase
    Implements ILogicalThreadAffinative

    ... Class Methods ...

End Class 
```

对象类似乎工作正常，在页面之间导航时按预期保存值，即使在加载弹出页面时也是如此。每当我有 PostBack 操作时，我的问题就会出现。发生这种情况时，对象变为空并导致空引用错误。

奇怪的是，它适用于除我之外的所有人。它安装在我们客户端的系统上，在我们的测试环境中运行，并为我们项目中的其他开发人员工作，但是有一些东西阻止它在我的开发环境中工作，该环境使用本地 IIS 7.0 Web 服务器托管应用程序。另一位开发人员和我已经交叉检查了我们可能会更改的所有本地 IIS 设置、VS2010 设置和互联网选项，但两台机器之间的一切似乎都是相同的（都是 Win7 x64，以 x86 模式构建应用程序） . 不用说，这个问题对于开发和故障排除问题已经变得非常困难。

是否有任何建议可以检查可能产生这种行为的其他内容？

**编辑**：经过一些更高级的挖掘后，似乎 PostBack 导致请求在第二个线程上触发。尽管文档似乎说了什么，第二个线程并没有继承 CallContext 中的值。在我同事的*工作*环境中，这个请求是在同一个线程上处理的。这似乎是问题的主要症状，但我们仍然无法查明根源。另外，也许值得注意的是：我的机器有一个 SSD，而其他开发人员没有。我不知道这是否会影响线程，但我认为它不会产生这些结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:59:08.227

我对解决方案不是特别满意，但是通过切换到 ASP.NET v4 经典应用程序池，我能够无错误地运行程序。如前所述，我同事的机器使用集成应用程序池运行程序很好。然而，在我的机器上，这会导致线程问题。

因此，本身并不是一个令人满意的“答案”；但我有一个解决方案，尽管如此。

# javascript - 用javascript挥动旗帜效果

> ID：14648923
> 
> 赞同：-1
> 
> 时间：2013-02-01T14:53:27.417
> 
> 标签：javascript, animation

其实我不知道从哪里开始。我尝试了一些图像重叠的东西，但这是个坏主意，因为需要预加载许多图像。

问题：有什么方便的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:59:37.963

您可以使用精灵图像（许多图像合二为一，以减少加载时间）和 div 容器，然后更改图像的背景位置以使整个事物具有动画效果。

# sql - 使用范围的高级 Rails ActiveRecord 查询

> ID：14648927
> 
> 赞同：0
> 
> 时间：2013-02-01T14:53:33.220
> 
> 标签：sql, ruby-on-rails, join, rails-activerecord

我已经尝试了一段时间来找到查询所需结果的最佳方法，但我总是在查询中的某些地方失败。

简化的数据库结构：

用户：

```
id (integer)  
first_name (string)  
last_name (string) 
```

课程类型：

```
title (string)
slug (string) 
```

课程：

```
belongs_to :user  
belongs_to :course_type  
week (integer)  
sold (float) 
```

我的控制器正在调用一个范围：

```
@users = User.sales_results(week) 
```

这是我模型中的范围：

```
scope :sales_results, lambda { |week|
  joins(:courses => [:course_type])
  .select("
    users.id, users.first_name, users.last_name,
    SUM(courses.sold) as total_sold,
    COUNT(courses) as num_classes
  ")
  .where("courses.week = ?", week)
  .group('users.id')
} 
```

这很好用，我可以在我的模板中使用它来显示销售总额。虽然我还想显示第二列，其中总结了某些特定类型课程的销售价值。像这样：

```
<% @users.each do |user| %>
  <%= user.total_sold %>
  <%= user.total_sold.where("course_types.slug IN ('H', 'S')") # not possible, but similar to what I desire %>
<% end %> 
```

**更新**

我最终添加了另一个范围

```
 scope :sales_results_for_types, lambda { |week, types|
     sales_results(week).except(:group).where("course_types.slug IN (?)", types)
    .group('users.id')
  } 
```

然后在我的控制器中调用两个范围

```
@users = User.sales_results(...)
@users_filtered = User.sales_results_for_types(...) 
```

最后同时迭代两个结果

```
<% @users.zip(@users_filtered).each do |user, filtered| %>
<%= filtered.total_sold %>
<%= user.total_sold %> 
```

直到我想出更好的东西。感谢大家带领我走上正轨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:03:23.280

如果您可以接受另一个查询，您可以使用它

`user.joins(courses: :course_type).sum(:sold, group: 'course_types.slug')`

这将为您提供一个散列，其中键是 slug，值是总和。

# android - 蓝牙 - 通过蓝牙从 PC 和 Android 设备向硬件设备发送消息是一回事吗？

> ID：14648929
> 
> 赞同：0
> 
> 时间：2013-02-01T14:53:36.807
> 
> 标签：android, bluetooth, serial-port

我正在进行的一个当前项目涉及将串行蓝牙数据从 PC 应用程序发送到硬件设备。

如果我要从 Android 设备发送相同的串行蓝牙数据，

从设备的角度来看，这看起来如何？它会收到由 PC 或 Android 媒体引起的任何不同，还是无论如何收到的消息都相同？

基本上是否涉及补偿数据的来源？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:59:12.950

似乎您正在使用 PC 中的蓝牙串行端口配置文件连接到您的硬件。如果您使用相同的配置文件，您可以从任何设备发送数据，并且硬件上的相同应用程序应该处理它。所以是的，您可以使用 android 蓝牙套接字接口来创建并连接到硬件，它也应该可以工作。

# c# - 获取设置类在 Windows 商店应用程序中不起作用

> ID：14648930
> 
> 赞同：0
> 
> 时间：2013-02-01T14:53:37.503
> 
> 标签：c#, xaml, windows-store-apps

我为 Windows 8 应用程序创建了一个新的空白页 xaml。我在主页中有一个文本框，因此用户可以在主页中输入他们的名字。它还有一个按钮，以便他们可以打开新框架，该框架是具有以下代码的空白页面：

```
this.Frame.Navigate(typeof(BlankPage1)); 
```

我为文本框制作了一个 get set 类，以便他们可以在空白页中看到文本框的值。

```
public string t1
    {
        get { return textbox1.Text; }
        set { textbox1.Text = value; }
    } 
```

这些是空白页的代码：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        MainPage p1 = new MainPage();
        textbox1.Text = p1.t1;
    } 
```

但它不会在空白页中显示文本框的值。它只在文本框中显示**“TextBox”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:55:07.503

问题是你正在创建一个新`MainPage`的`OnNavigatedTo`- 但你实际上并没有*展示*它。

您需要引用现有实例`MainPage`- 可见的实例 - 而不仅仅是一些任意的新实例。

（顺便说一句，您的`t1`成员是一个*属性*- 没有“get set class”之类的东西。）

# tsql - 在 ACCESS 中设置时间

> ID：14648934
> 
> 赞同：-1
> 
> 时间：2013-02-01T14:53:51.930
> 
> 标签：tsql, ms-access

我有一个关于 access 2000 或 2003 的问题，我可以为每天设置一个时间，让它自动单击表单中的按钮来执行查询吗？这可能吗，我想你必须为此编写一个 VGA 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:13:03.763

是的，你可以这样做。要扩展 Remou 的建议：

1.  在 Windows 任务计划程序中创建一个事件以在每天的同一时间运行。
2.  该事件将在您的 Access db 中[调用](http://office.microsoft.com/en-us/access-help/command-line-switches-for-access-HA010166605.aspx)一个宏。
3.  宏将调用按钮后面的过程。

# smtp - Swiftmailer SMTP Hotmail 不起作用

> ID：14648937
> 
> 赞同：2
> 
> 时间：2013-02-01T14:54:07.500
> 
> 标签：smtp, pear, swiftmailer, hotmail

我尝试使用 Swiftmailer 发送电子邮件。但它不起作用......这是我尝试过的：

```
$transport = Swift_SmtpTransport::newInstance('smtp.life.com', 25)
->setUsername('olivier-zwat@hotmail.be')
->setPassword('the correct pasword'); 
```

我找不到解决这个问题的方法... *顺便说一句，我是荷兰人！;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:28:54.847

> 530 5.7.0 必须先发出 STARTTLS 命令

您需要将 SwiftMailer 配置为通过 STARTTLS 使用 SSL 连接。从 4.1.3 版本开始支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:43:21.483

我认为你应该改变'smtp. **life.com** ' 到 'smtp. **直播**.com'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-24T17:05:11.117

您需要将加密设置为**tls**作为第三个参数：

```
$transport = Swift_SmtpTransport::newInstance('smtp.life.com', 25, 'tls') 
```

很可能端口也应该设置为**587**

# python - 如何知道MAC地址是否附加到无线网卡或以太网卡？

> ID：14648941
> 
> 赞同：0
> 
> 时间：2013-02-01T14:54:19.500
> 
> 标签：python, monitoring, wireless, ethernet, mac-address

我正在使用我公司开发的软件进行网络监控。对于每台机器，我都有用于连接网络的卡的 mac 地址。

我正在寻找一种方法来从 MAC 地址（例如）知道该卡是以太网卡还是无线卡。

我可以在分析中使用 nmap 和 openvas 传感器结果。

最终目标是获得提示以了解机器是工作站还是笔记本电脑。

我正在使用 python 编程，但欢迎使用任何其他解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:07:14.100

这是 NIC 供应商的规范列表：http: [//standards.ieee.org/develop/regauth/oui/oui.txt](http://standards.ieee.org/develop/regauth/oui/oui.txt)

您可以使用此列表从 MAC 地址获取供应商，然后进行一些有根据的猜测。例如，Atmel 主要生产无线 NIC。

# java - Google Analytics API 成本数据上传卡住

> ID：14648955
> 
> 赞同：3
> 
> 时间：2013-02-01T14:54:58.480
> 
> 标签：java, google-analytics, google-analytics-api, google-api-java-client

我遵循[Management API - Daily Upload Developer Guide](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtDailyUploadGuide)并创建了已安装的 Java 应用程序以*将成本数据上传*到 Google Analytics。但它不知何故不起作用。我已经`Analytics`创建了授权`https://www.googleapis.com/auth/analytics`范围的服务，现在我想上传一些成本数据。

我是按照上面提到的指南这样做的。

```
File file = new File("data.csv");
InputStreamContent mediaContent = new InputStreamContent('application/octet-stream', new FileInputStream(file));
mediaContent.setLength(file.length());

// You can ignore following three lines... those are there to make sure Analytics service works.
Accounts accounts = analytics.management().accounts().list().execute();
Account account = accounts.getItems().get(0);
System.out.println("Account ID is: " + account.getId());

Analytics.Management management = analytics.management();
Analytics.Management.DailyUploads dailyUploads = management.dailyUploads();

// Here it gets stuck!
Analytics.Management.DailyUploads.Upload upload = dailyUploads.upload("AccountID",
  "PropertyID", "CustomDataSourceID", "yyyy-MM-dd", 1, "cost", mediaContent);

upload.setReset(true);
DailyUploadAppend append = upload.execute(); 
```

我添加了一些行来检索`Accounts`和打印第一个的*AccountID*`Account` ......只是为了确保它`Analytics service`有效。它确实如此。我可以获得*AccountID*，但无法上传我的成本数据。我不知道出了什么问题......但是当它试图获取`Upload`对象时它会卡住。

它不会抛出异常。它只是保持在那里，什么也不做。有什么我想念的吗？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:02:43.683

原来我下载了java客户端库1.13.2。从[这里](http://code.google.com/p/google-api-java-client/)

Java 客户端库不包含管理 API`google-api-services-analytics-v3`所以我从[这里](https://code.google.com/p/google-api-java-client/source/browse/com/google/?repo=mavenrepo#google%2Fapis%2Fgoogle-api-services-analytics)下载了最新的*v3-rev20-1.8.0-beta*

我在开发人员指南[客户端库链接中都找到了](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtLibraries)

但是今天我在[这里找到](https://code.google.com/p/google-api-java-client/wiki/APIs#Google_Analytics_API)*了 rev26-1.13.2-beta* 并在我的解决方案中使用了它。现在一切正常，所以这只是开发人员指南中误导性链接引起的不兼容问题。

**编辑**

对于未来在这个问题上苦苦挣扎的人。确保您的库是兼容的。如您所见，我能够获取第一个帐户的 AccountID，所以我认为一切正常，但事实并非如此。谷歌指南中有许多误导性链接，我发现我通过谷歌群组报告的内容。对我来说有一个提示。我有*google-api-java-client- **1.13.2** -beta*和*google-api-services-analytics-v3-rev20- **1.8.0** -beta*。

但问题是没有更新版本的迹象......我从他们的 mercurial 存储库下载了我认为是最新的。仍然有一个更新的版本只能从开发人员指南深处的某个链接访问。我希望它在未来会更好。

# java - 使editText提示斜体？

> ID：14648959
> 
> 赞同：3
> 
> 时间：2013-02-01T14:55:07.707
> 
> 标签：java, android, android-edittext, hint

您如何在 xml 中执行此操作，可以吗？

我在 java 代码的相关问题中看到了这一点，检查长度为 0 并且：

```
EditText.setText(Html.fromHtml("<small><i>" + "Text Hint Here" + "</i></small>")); 
```

但是你可以从 xml 中做到这一点吗？

**编辑：**

```
<EditText
        android:id="@+id/term_entry"
        android:layout_width="500dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/scrllyout"
        android:imeOptions="actionNone|flagNoExtractUi"
        android:inputType="text|textImeMultiLine"
        android:singleLine="true"
        android:hint="Enter Command"
        android:textStyle="italic"
        android:textColorHint="#30AAAAAA"
        /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:06:08.030

最好使用 java code.use `Typeface`。将您的字体文件放在 assest 文件夹中。然后写下面的代码。

```
italic = Typeface.createFromAsset(getAssets(), "Your font file"); 
editText.setTypeface(italic); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:00:27.937

在 XML 中尝试这样

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"  
    android:hint="hint" 
    android:textStyle="italic" > 
</EditText> 
```

进行**提示**使用`android:hint="hint"`并像这样使用**斜体字**`android:textStyle="italic"`

**更新：**

这是 XML 试试这个，我在我的笔记本上测试过可以正常工作。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<EditText
    android:id="@+id/term_entry"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toRightOf="@+id/scrllyout"
    android:hint="Enter Command"
    android:imeOptions="actionNone|flagNoExtractUi"
    android:inputType="text|textImeMultiLine"
    android:singleLine="true"
    android:textColorHint="#ffffff"
    android:textStyle="italic" />

</LinearLayout> 
```

# java - 如何在 ireport 中打印地图的值？

> ID：14648963
> 
> 赞同：2
> 
> 时间：2013-02-01T14:55:15.610
> 
> 标签：java, jasper-reports, datasource, ireport

我将`Map<String, Set<Object>>`对象作为参数传递给我的 ireport。`"Set<Object>"`如果地图中的键等于字段，我想在自定义创建的组上打印值。

**任何想法如何做到这一点？** 提前致谢

```
HashMap<String,Object> parameters = new HashMap<String,Object>();
parameters.put("PA_CHING",retreivePaChingMapping());

public Map<String, Set<Object>> retreivePaChingMapping() {
        Map<String, Set<Object>> paChing = GenericsUtil.makeMap();
        //adds the object to paChing here 
        return paChing;
    } 
```

**在 IReport 中：**

**参数名称：** PA_CHING

**参数类类型：** java.util.HashMap

**默认值表达式：**我不知道在这里放什么。

**ireport 中文本字段的表达：**

```
$P{paChing}.containsKey( $F{id} ) ? getChing() : "null";

private void String getChing(){
    StringBuilder ching = new StringBuilder();
    $P{PA_CHInG}.get( $F{id} ).iterator().hasNext()?ching.append($P{PA_CHING}.get( $F{id} ).iterator().next):"";

    return ching;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:17:48.997

将子报表放在组详细信息中，然后在子报表的数据源表达式中，使用

```
new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource(new java.util.ArrayList($P{PA_CHING}.get($F{field_where_you_match_the_key}))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:48:36.940

声明一个新的：

```
 Map map=(Map) parameters.get("PA_CHING");
            Set<Object> set= (Set<Object>) map.get("your key name");
            YourClass class = (YourClass) set.iterator().next();
            System.out.println(class.yourMethodName());
     System.out.println(class.yourClassVariables); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:06:40.610

Set.toString() 会为你做的。

来自 Javadoc

> 返回此集合的字符串表示形式。字符串表示由集合元素的列表组成，按其迭代器返回的顺序排列，用方括号 ("[]") 括起来。相邻元素由字符“、”（逗号和空格）分隔。通过 String.valueOf(Object) 将元素转换为字符串。

[http://docs.oracle.com/javase/6/docs/api/java/util/AbstractCollection.html#toString()](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractCollection.html#toString%28%29)

# dns - IPTABLES 如何阻止 8.8.8.8

> ID：14648965
> 
> 赞同：1
> 
> 时间：2013-02-01T14:55:17.067
> 
> 标签：dns, ip, block, iptables

我正在创建一个脚本，允许您阻止 IP、端口、某些 IP 和端口以及 DNS 服务器。它基本上会获得一个名称并阻止该人的某些地址。问题是，我被困在阻止 8.8.8.8 。无论我尝试过什么，我似乎都无法阻止它！

这是我到目前为止所尝试的：

```
 iptables -A OUTPUT -p tcp -d 8.8.8.8 --destination-port 53 -j DROP
 iptables -A OUTPUT -p udp -d 8.8.8.8 --destination-port 53 -j DROP
 iptables -A OUTPUT -p -s 8.8.8.8 -j DROP 
```

乃至

```
 iptables -A OUTPUT -p udp -o eth0 --dport 53 -j DROP 
```

ping 任何其他站点都不起作用，而 ping 8.8.8.8 仍然有效...

我的策略都设置为允许。我应该改变它们吗？

我对此有点陌生，如果这一切看起来很奇怪，我深表歉意。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:57:21.143

您正试图阻止 OUTPUT 链中的 SOURCE 地址。8.8.8.8 将是输出链中的 DESTINATION。输出链中数据包的 SOURCE 通常是您在其上运行这些规则的机器......试试这些：

```
-A INPUT -s 8.8.8.8 -j DROP
-A OUTPUT -d 8.8.8.8 -j DROP 
```

规则 #1 将丢弃所有进入**您**系统的源自谷歌公共 DNS 的数据包。规则 #2 将丢弃任何离开您的系统的数据包。

至于 ping，请记住 ping 使用 ICMP 协议。您正在尝试仅阻止 UDP。还要记住，如果请求或响应需要超过 1 个 udp 数据包，则 DNS 请求可以使用 TCP **。**

# junit - 测量循环复杂度的函数/方法的单元代码覆盖率百分比？

> ID：14648966
> 
> 赞同：1
> 
> 时间：2013-02-01T14:55:20.853
> 
> 标签：junit, cobertura, emma, clover

是否有一种方法可以根据复杂性比率（例如方法/功能级别的循环复杂性）收集/报告单元测试覆盖率？

原因/意图是提供一个可衡量的指标，以显示任何基于复杂性而具有较高缺陷可能性的区域实际上具有适当的单元测试覆盖率（即通过更改例如，度量为 '100% 的 Cyclomatic Complexity >= 10）。

我的用例目前是 Java/junit，达到相同意图的不同方法也会有所帮助（不必完全是基于 Cyclomatic 的方法/函数，而是类似的测量类型）。

编辑：如果有适用于 java 和 .NET 的具有相似功能的代码覆盖工具，那将是惊人的。

谢谢你！-达伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T20:40:28.790

免责声明：我是 Atlassian 的 Clover 开发人员。我看到你已经用“三叶草”标记了你的问题，所以我正在回答:-)

在 Clover 中，您可以通过两种方式进行操作（也可以将它们组合起来）：

1）您可以定义上下文过滤器，并且不要检测具有圈复杂度 <= N 的方法。请参阅 <clover-setup maxComplexity="NN">

2）您可以定义您的自定义指标，例如将覆盖率值（或更好 - '未覆盖'值）乘以圈复杂度。这样的度量将显示复杂的、未发现的方法比简单的、未发现的方法更重要。见 <clover-report> / <columns>

哦。还有一件事。Clover 会自动为您完成 :-) 在 HTML 报告中，您可以看到 Top Project Risks 指标的“标签云”，它采用覆盖率+复杂性来显示应用程序中最潜在的关键部分。

参考：

*   [https://confluence.atlassian.com/display/CLOVER/clover-setup](https://confluence.atlassian.com/display/CLOVER/clover-setup)

*   [https://confluence.atlassian.com/display/CLOVER/clover-report](https://confluence.atlassian.com/display/CLOVER/clover-report)

*   [https://confluence.atlassian.com/pages/viewpage.action?pageId=71600304](https://confluence.atlassian.com/pages/viewpage.action?pageId=71600304)

*   [https://confluence.atlassian.com/display/CLOVER/Treemap+Charts](https://confluence.atlassian.com/display/CLOVER/Treemap+Charts)

# matlab - 是否应该关闭使用 mkfifo 打开的命名管道以及如何关闭？

> ID：14648974
> 
> 赞同：16
> 
> 时间：2013-02-01T14:55:49.007
> 
> 标签：matlab, shell, command, pipe, named-pipes

我正在使用命名管道在另一个程序（MATLAB）中捕获外部程序（wgrib2）的输出。MATLAB 代码如下，并`system()`访问命令行来制作管道：

```
system('mkfifo myfifo');     % Make a named pipe myfifo
% Call the external program wgrib2 and dump its output to the named pipe myfifo
system('wgrib2.exe multi_1.glo_30m.hs.201212.grb2 -ij 1 165 -ij 1 166 > myfifo &');
fid = fopen('myfifo', 'r');  % Open the named pipe
a = fscanf(fid, '%c');       % Read the output as character
fclose(fid);                 % Close the "file" (myfifo still exists afterward) 
```

以下是我的问题：

1.  `myfifo`使用命名管道后是否必须关闭它？代码运行后它似乎仍然存在。
2.  如果`myfifo`需要关闭，关闭它的命令是什么？
3.  我将多次运行上面的代码示例（> 1000），所以如果我重用命名管道并且直到结束才关闭它可以吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T15:04:15.230

1.  不，Unix 将所有内容都视为文件。命名管道没有什么不同。如果你用完了它，你可能想要关闭它，这样你就不会用命名管道弄乱你的机器，但你不需要关闭它。

**编辑以反映以下评论，这是正确的。删除！=关闭。**

2.  关闭命名管道的方式与关闭任何文件的方式相同：

```
 fclose(mFifo) 
```

正如接受的答案中提到的，关闭不会删除先进先出。您可能需要单独执行此操作。

3.  重用命名管道没有任何问题。但是，由您决定何时完成每次迭代的读/写操作。一旦从管道中读取了所有数据，您就可以随意多次使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-05-15T19:16:49.483

您可能将关闭与`mkfifo`命令的反义词混淆了。

一个公认的答案对于 MATLAB 用户来说绝对是最好的解决方案，但我想为那些来到这里寻找命名管道的人澄清一下。

* * *

在类 Unix 上，命名管道 (FIFO) 是一种特殊类型的文件，没有内容。该`mkfifo`命令在文件系统上*创建*管道（为其分配名称），但不*打开*它。您需要像任何其他文件一样单独打开和关闭它。

> 1.  `myfifo`使用命名管道后是否必须关闭它？代码运行后它似乎仍然存在。

一旦您不再需要它们，通常最好关闭/删除/释放它们。
当所有描述符都关闭时，管道本身（及其内容）会被破坏。你看到的只是一个名字。

> 2.  如果`myfifo`需要关闭，关闭它的命令是什么？

命名管道可以用[`fclose()`function](https://www.mathworks.com/help/matlab/ref/fclose.html)关闭。要使管道在给定名称下匿名且不可用（可以在管道仍然打开时完成），您可以使用 MATLAB 的[`delete`函数](https://www.mathworks.com/help/matlab/ref/delete.html)或`rm`控制台命令。

> 3.  我将多次运行上面的代码示例（> 1000），所以如果我重用命名管道并且直到结束才关闭它可以吗？

只要每次迭代都以空管道开始，就可以重用命名管道（根据 MA​​TLAB 文档，[`fscanf()`函数](https://www.mathworks.com/help/matlab/ref/fscanf.html)将为您执行此操作）。

命名管道可以通过两种方式重用：

*   通过重用管道本身（不关闭它）：

    ```
    system('mkfifo myfifo');
    tmp = fopen('myfifo', 'r+'); % Open the pipe in both ways (otherwise it will block)
    fid = fopen('myfifo', 'r');  % Open the pipe for reading (otherwise `fscanf` will block)
    fclose(tmp);                 % Close the auxiliary descriptor

    % Use the pipe multiple times...
    system('wgrib2.exe multi_1.glo_30m.hs.201212.grb2 -ij 1 165 -ij 1 166 > myfifo');
    a = fscanf(fid, '%c');
    ...

    % Close and delete the pipe
    fclose(fid);
    delete myfifo; 
    ```

*   通过重用名称来打开管道（您使用它的方式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-15T15:58:22.020

您可能不应该使用命名管道来捕获 MATLAB 中的系统输出。根据[MA​​TLAB 的`system()`文档](https://www.mathworks.com/help/matlab/ref/system.html)，您可以直接在`system()`调用中捕获输出：

```
[status, cmdout] = system('wgrib2.exe multi_1.glo_30m.hs.201212.grb2 -ij 1 165 -ij 1 166');
a = cmdout 
```

但是，如果您坚持使用命名管道，那么是的，您应该关闭它。您应该*始终*关闭您打开的资源。但是关闭命名管道*并* ***不会***删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-28T02:51:41.693

不能同意。您通过关闭它来关闭fifo。系统完成后关闭 fifo（上面的 system() 调用）。当fifo关闭时，另一方知道没有更多数据（EOF条件，示例代码中没有明确的EOF检查，但在真实代码中很可能）并完成。

# python - 来自装饰器的 Python3 边界方法

> ID：14648975
> 
> 赞同：1
> 
> 时间：2013-02-01T14:55:56.627
> 
> 标签：python, methods, python-3.x, decorator, bounding

在 Python 3 中没有绑定方法（从 Python 2 已知），但我们总是创建函数。

在类中声明一个函数后，创建自动 Pythons 描述符，该描述符将`self`作为第一个参数附加，此时该函数将作为实例方法调用。

所以基本上，下面的代码：

```
def funcdecorator(func):
    def f(*args, **kwargs):
        print('funcdecorator:', args, kwargs)
    return f

class X:
    @funcdecorator
    def f(self):
        pass

X().f() 
```

将输出：

```
funcdecorator: (<__main__.X object at ...>,) {} 
```

（第一个参数作为 传递`self`）

但使用以下代码：

```
def classdecorator(func):
    class C:
        def __call__(*args, **kwargs):
            print('classdecorator:', args, kwargs)
    return C()

class X:
    @classdecorator
    def f(self):
        pass

X().f() 
```

我们得到：

```
classdecorator: (<__main__.C object at 0x1bbea10>,) {} 
```

这是合乎逻辑的。

但是，是否可以从装饰器返回一个类实例并模仿它是一个函数，所以当“调用”它时，第一个传递的参数将是 的实例`X`，而不是 的实例`C`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:47:06.783

该类`C`需要是一个[描述符](http://docs.python.org/2/reference/datamodel.html#implementing-descriptors)，即实现`__get__`。然后，`X().f()`将首先调用描述符`__get__`，传递 X 实例和对 X 的引用。无论`__get__`返回什么都会`__call__`被调用。

# java - 在 Java 中过滤列表

> ID：14648984
> 
> 赞同：0
> 
> 时间：2013-02-01T14:56:17.383
> 
> 标签：java, list, filter, criteria, traversal

我有一份提供其他信息的人员名单——比如说出租书籍。因此，我列表中的每个 Rental-object 都将包含一个 Person-object 作为属性和一些租赁信息。对于每个人，列表中将有 1..n 个条目。

现在我需要根据一些标准过滤这个列表。如果其中一个条目符合某个条件，我想删除那个人的所有条目，即使其他条目不符合条件。

有没有一种很好的方法可以在一个过滤器中做到这一点？另一种方法是扫描列表，确定应删除其条目的人员，然后应用类似

```
Collections2.filter(myList, new MyPredicate(peopleIWantToRemove)) 
```

但我只想通过一次性列表遍历来完成。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:14:36.053

从算法运行时的角度来看，两次遍历列表（一次确定所有“坏”人，第二次删除他们）是完全无害的。无论您遍历列表一次还是两次，算法都在 O(n) 时间内运行。

但是，如果您真的很想只浏览一次列表，您可以构建一个临时数据结构来跟踪每个人出现在您想要摆脱的人列表旁边的所有位置。

```
Map<Person, List<Rental>> rentalsPerPerson;
List<People> badPeople; 
```

第一次解析列表时，会填充这两个结构。然后，您浏览 的列表`badPeople`，拉出他们的`Rental`对象列表，并从您的原始列表中一次清除那些对象。

但老实说，这让人感觉很麻烦，收获不多。

我建议这样做的方式？浏览列表两次。第一关：编一个`Set`坏人。第二遍：创建一个新的 output `List`，最初为空。浏览你原来的`List`. 对于每个元素，如果`Person`不在`Bad`集合中，请将条目添加到您的输出`List`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:01:09.903

使谓词有状态，以便它不仅在满足某些标准时匹配，而且在该人被称为“坏”人的情况下也匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:10:30.973

改为使用[`Iterables.filter()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Iterables.html#filter%28java.lang.Iterable,%20com.google.common.base.Predicate%29)。根据[类文档](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Iterables.html)：“除非另有说明，否则此类中生成的所有迭代都是惰性的，这意味着它们的迭代器仅在绝对必要时才推进支持迭代。” 这意味着您可以组合多个过滤器，但遍历只发生一次，当您自己执行时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:13:14.517

根据坏人标准排序列表（首先是坏条目），然后使用有状态谓词进行过滤，如 C-Otto 所说

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T15:21:21.317

> 现在我需要根据一些标准过滤这个列表。如果其中一个条目符合某个条件，我想删除那个人的所有条目，即使其他条目不符合条件。

我认为您没有进行过滤。因为过滤在某些条件下返回一个子集合（过滤）。您将始终获得相同的人员列表，但更改了某些元素。

你想要像 python 的`map(list, function)`. 遍历列表，为每个人做一些事情。

Guava 的 collections.transform 可以做到。

```
public static <F,T> Collection<T> transform(Collection<F> fromCollection,
                            Function<? super F,T> function) 
```

看看这个：

[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Collections2.html#transform(java.util.Collection](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Collections2.html#transform(java.util.Collection) , com.google.common.base.Function)

# debugging - 如何确定代码是作为函数执行还是使用单元模式执行

> ID：14648997
> 
> 赞同：5
> 
> 时间：2013-02-01T14:57:05.560
> 
> 标签：debugging, matlab

在编写/调试函数时，我喜欢使用[单元模式](http://blogs.mathworks.com/videos/2011/07/26/starting-in-matlab-cell-mode-scripts/)而不是断点。

您将如何在运行时确定当前执行的代码是作为函数执行还是使用单元模式执行？

**奖励积分**如果你能想出一个`function`知道它是从另一个函数或单元格中调用的。

当您想在函数执行期间以不同方式加载数据或您想创建绘图仪进行调试时，这可能有用的一个示例。在作为单元格或函数执行之间切换时注释掉特定行变得很痛苦。

```
function doSomethingAwesome(inputs)
%%

if executingAsCell == true
  clear
  importData
end

% process stuff

if executingAsCell == true
   plot(myAwesomeResults)
end 
```

*请注意，这不是我之前的问题的重复：* [如何确定代码是作为脚本还是函数执行？](https://stackoverflow.com/questions/14443685/how-to-determine-if-code-is-executing-as-a-script-or-function)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:30:30.673

最简单的方法是`dbstack()`按照@Junuxx 的建议使用：

```
if isempty(dbstack)
   %# true if you evaluated the cell while not in debug mode 
```

类似地，一个函数可以通过检查 dbstack 的长度来知道它是从另一个函数还是从 base/cell 调用的

```
 function doSomething
   if length(dbstack)==1
      %# the function has been invoked from a cell or the command line
      %# (unless you're in debug mode) 
```

函数实际上可以区分它是从命令行调用还是从单元格调用的，因为后者不会写入历史记录：

```
 function doSomething

   if length(dbstack)==1
      javaHistory=com.mathworks.mlservices.MLCommandHistoryServices.getSessionHistory;
      lastCommand = javaHistory(end).toCharArray'; % ' added for SO code highlighting
      if strfind(lastCommand,'doSomething')
         %#  Probably invoked via command line
      else
         %#  Probably invoked via executing a cell 
```

如果要确定是否处于调试模式，一种可能性是使用`line`dbstack 中的 -argument，并检查在明显调用函数的行上是否有对当前正在执行的函数的调用。

# c++ - QTableWidget 列调整大小事件

> ID：14648999
> 
> 赞同：5
> 
> 时间：2013-02-01T14:57:08.580
> 
> 标签：c++, qt, qtablewidget

我想知道 QTableWidget 的列是否正在被鼠标调整大小。每当调整任何列的大小时，如何发出信号？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T15:13:24.113

列调整大小由水平执行`QHeaderView`。通过调用访问它`QTableWidget::horizontalHeader() const`，您感兴趣的信号是`QHeaderView::sectionResized(int logicalIndex, int oldSize, int newSize)`。