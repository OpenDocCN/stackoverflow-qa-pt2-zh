# StackOverflow 问答 15361000-15361999

# android - 屏幕底部带有弹出菜单的操作栏

> ID：15361000
> 
> 赞同：2
> 
> 时间：2013-03-12T12:18:51.260
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock，我想知道是否可以在屏幕底部另外有一个弹出菜单？当用户单击默认菜单按钮（旧手机的硬件）时，我希望此菜单出现。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:28:00.170

如果您有硬件菜单按钮，则操作栏菜单溢出将自动替换为“菜单”弹出窗口中的项目。 [http://developer.android.com/design/patterns/compatibility.html](http://developer.android.com/design/patterns/compatibility.html)

为了让项目出现在那里，你应该设置

```
android:showAsAction="never" 
```

到您的菜单项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:42:47.790

您必须看看[如何创建 Android 菜单？](http://www.androidhive.info/2011/09/how-to-create-android-menus/)

我希望这能帮到您。

# asp.net-mvc - 实体框架不比较在不同时间返回的相同对象

> ID：15361001
> 
> 赞同：2
> 
> 时间：2013-03-12T12:18:57.140
> 
> 标签：asp.net-mvc, entity-framework

我希望能够返回在特定日期之间可以免费预订的 Vehicle 对象列表。

我有一个方法可以返回那些日子之间当前在数据库中的预订列表，并且每个预订都有一个相关的车辆对象，所以我知道所有不可用的车辆。

我有另一种方法可以返回数据库中所有车辆的列表，但我需要一种将 Booking.Vehicle 与从列表返回的 Vehicle 对象进行比较的方法。

我试过这个

```
foreach(var booking in bookings)
{
    allVehicles.Remove(booking.Vehicle)
} 
```

但是车辆不会移除，为什么没有正确比较对象？即使它的同一个车辆对象被移除。

```
//Testing to see if the objects compare as expected (they don't)
public static List<Vehicle> AvaliableVehiclesBetween(DateTime StartDate, DateTime EndDate)
{

    List<Booking> bookings = Booking.BookingsBetween(StartDate, EndDate);
    List<Vehicle> vehicles = AllVehicles();
    Vehicle v = vehicles[0];
    if(bookings[0].Vehicle.Equals(v)) {
        vehicles = null;
    }

    return vehicles;
} 
```

在我运行这个之后，车辆不等于空； ![在此处输入图像描述](../Images/26ead67c678798950ac02575f12534c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:32:27.630

您可以尝试仅使用主键 ~ID 进行匹配

```
var bookedIDs = bookings.Select(b => b.Vehicle.ID).ToList();
var freeVehicles = allVehicles.Where(v => !bookedIDs.Contains(v.ID)); 
```

至于您的实际问题，您可能没有为您的对象设置 Comparator ，因此它是通过内存位置/引用进行比较的。[比较两个实体框架实体的最佳方法是什么？](https://stackoverflow.com/questions/1092534/what-is-the-best-way-to-compare-two-entity-framework-entities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:44:59.703

你可以做两件事。1）如果您需要比较整个对象，那么您需要将两个对象序列化为任何格式（XML），然后进行比较。因为对象包含一些元数据，这些元数据可能不相等。

2）您可以比较两个对象的任何属性，例如“VehicleId”。

```
public static List<Vehicle> AvaliableVehiclesBetween(DateTime StartDate, DateTime EndDate) 
```

{

```
List<Booking> bookings = Booking.BookingsBetween(StartDate, EndDate);
List<Vehicle> vehicles = AllVehicles();
Vehicle v = vehicles[0];
if(bookings[0]!=null && v!=null)
{
  if(bookings[0].Vehicle.VehicleId.Equals(v.VehicleId)) 
  {
    vehicles = null;
  }
}
return vehicles; 
```

}

# soap - 如何从 Magento 连接到外部 API

> ID：15361002
> 
> 赞同：0
> 
> 时间：2013-03-12T12:18:57.890
> 
> 标签：soap, magento-1.7

我正在寻找一些帮助来创建基于 API 的模块，以将客户信息从 Magento 推送到第三方忠诚度计划中。

到目前为止，我已经创建了一个基本模块，但找不到任何关于在 Magento 中创建基于 API 的模块的好信息，并且真的可以提供一些建议......

我需要以某种方式连接到 Magneto 中的结帐成功页面，并添加一个表格，将客户信息（姓名、地址等）发布到第三方忠诚度计划。我还需要能够登录以完成帐单信息等...

有谁知道这种实现的任何方便的教程或文档？

到目前为止，我已经设置了一个具有适当角色的 API 用户。我还为测试目的创建了一个非常基本的模块，但浏览到文件时出现 404 错误

apitest.php

```
<?php 
$proxy = new SoapClient('http://mysite.com/api/?wsdl'); //edit the address and put the url to your magento here

$sessionId = $proxy->login('######', '#######'); // put in the info for your user here

echo "Login ID : $sessionId";
$result = $proxy->call($sessionId, 'Mymodule.testConnection', array('param1' => ' This string was sent from soap client'));
echo $result; 
```

对象模型/api.php

```
<?php
class MyModule_MyModule_Model_ObjectModel_Api extends Mage_Api_Model_Resource_Abstract
{
    public function testConnection($arg)
    {
        return "Hello World! My argument is : " . $arg;
    }
} 
```

如果有人可以帮助我进行正确的设置，我将按照[此处](http://bananacode.com.br/magento-custom-api-module-with-acl/)的示例启动并运行基本的“Hello world”模块，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:55:57.953

您可以像这样创建客户，而不是连接 magento API。

```
define('INCLUDE_PATH', '/var/www/QA/mojostage/app/');
define('INCLUDE_FILE', 'Mage.php');
Mage::app();
$customer = Mage::getModel('customer/customer');
        $customer->setWebsiteId($wesite_id);
        $customer->loadByEmail($customer_email);
        /*
         * Check if the email exist on the system.
         * If YES,  it will not create a user account.
         */

        if (!$customer->getId()) {

            //setting data such as email, firstname, lastname, and password

            $customer->setEmail($customer_email);
            $customer->setTaxvat($value['cus_vatnumber'])
                    ->setCreatedAt($date1)
                    ->setDob($value['date_of_birth'])
                    ->setGroupId($cus_group_id)
                    ->setConfirmation($is_active)
                    ->setCreatedIn('Admin')
                    ->setStoreId($store_id)
                    ->setWebsiteId($wesite_id)
                    ->setEntityId($value['cus_id']);
            $customer->setFirstname($customer_fname);
            $customer->setLastname($customer_lname);
            $customer->setPassword($value['password']);

            $subscriber = Mage::getModel('newsletter/subscriber');
            $subscriber->setStoreId($store_id)
                    ->setCustomerId($value['cus_id'])
                    ->setSubscriberEmail($customer_email)
                    ->setSubscriberStatus($value['cus_spam'])
                    ->setSubscriberConfirmCode($subscriber->randomSequence());
        }

        //the save the data and send the new account email.
        $customer->save();
        $subscriber->save(); 
```

# api - Google Now API - 可能的登机/活动通行证和 Gmail 集成

> ID：15361008
> 
> 赞同：2
> 
> 时间：2013-03-12T12:19:11.743
> 
> 标签：api, google-now

我们可以创建基于 Gmail 的活动/登机牌吗？这张卡的格式是什么？

我们有 API 来定制这个吗？我只需要更新数据元素。一旦用户在 Gmail 中获得此信息/它会扫描此数据并在 Google Now API 中自动加载。我正在使用具有 Google Search API 的 Android 4.1.2 操作系统，它具有 Google Now Widget API。这是可行的选项吗？我们有任何可用的 Google Now API 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T20:51:43.330

这是一个**猜测**

*   Google Now 似乎是 Glass 不可或缺的一部分。
*   由于命名法相似（卡片）
*   卡片的一般形状看起来像玻璃

我认为他们很可能正在使用 google-glass API。

然而，有人应该得到有关此案的wireshark。

# c++ - CSimpleString 中的旧版 MFC 跨线程异常

> ID：15361009
> 
> 赞同：0
> 
> 时间：2013-03-12T12:19:12.210
> 
> 标签：c++, multithreading, visual-studio-2008, mfc, atl

我有一个旧的 ATL/MFC 应用程序，它有两个线程，主窗口线程和渲染线程。我的问题是我有与 CSimpleString 相关的随机访问冲突错误；即访问冲突，0xdddddddd 等...

我推断问题是两个线程同时访问同一个字符串，一个尝试使用它来渲染（MFC 主窗口线程），一个尝试更新字符串（渲染线程）。

从 MFC 方面；班级是

```
class CDisplay : public CStatic
{
public:
    CString m_strDisplay;
    ...   
    void SetDisplay(CString str, int nMode = -1);
    ...
} 
```

没有绘画覆盖，文本基本上是通过 CStatic 呈现的。

现在，SetDisplay 方法是从 Render-Thread 调用的；它的主要代码是：

```
if (m_strDisplay != str)
{
    m_strDisplay = str;
    SetWindowText(str + " ");
} 
```

我的问题是我需要一个关键部分；但我不知道如何让 MFC 方面坚持下去。

任何人都有使 MFC 线程安全并避免这些问题的智慧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:28:05.787

`SetWindowText`仅在 MFC 主线程中进行GUI 更新 ( )。在渲染线程中，设置一个变量（受临界区保护）和/或发送一条消息，然后在 MFC 主线程中执行实际的 GUI 元素操作。

# html - 从 html 中提取空格折叠的文本，因为它将被呈现

> ID：15361012
> 
> 赞同：0
> 
> 时间：2013-03-12T12:19:18.350
> 
> 标签：html, html-parsing, whitespace, collapse, removing-whitespace

我使用 html 解析器 (Neko) 来提取 html 文档的自由文本。由于我对文本的语义感兴趣，因此我必须特别注意浏览器中出现的单词之间的距离。

例如：

```
<H1>My
title</H1>
<P>Hello
                World</P> 
```

呈现为：

```
My title
Hello world 
```

在`<pre>`标签内包含段落或带有样式时：

```
<style>
p { white-space:pre; }
</style> 
```

会导致：

```
My title
Hello
                    World 
```

我想区别对待，因为“你好”在语义上与“世界”这个词没有联系。正如其他帖子中所说 - 解析和渲染之间存在差异。我对渲染后出现的单词之间的联系很感兴趣，因为显然解析不会像浏览器上显示的那样折叠空格。

有没有办法在浏览器上读取时从 html 中提取空格折叠的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:17:53.717

我以前没有使用过 Neko，但您需要访问元素的样式并查看`white-space`属性是否设置为`pre`、`pre-wrap`或 preline。

1.  如果是`pre`or `pre-wrap`，则将文本中的任何空白组替换为单个空格。

2.  否则 if `pre-line`，仅用单个空格替换空格/制表符组。

3.  否则，请勿修改文本。

这是一个使用 JQuery 的示例：[JSFiddle](http://jsfiddle.net/ueVyd/1/)

**jQuery**

```
function getRenderedText(obj) {
    var text = obj.text();
    var renderedText;
    switch (obj.css('white-space')) {
        case 'pre':
        case 'pre-wrap':
            renderedText = text;
            break;
        case 'pre-line':
            renderedText = text.replace(/[ \t]+/,' ');
            break;
        default:
            renderedText = text.replace(/\s+/,' ');
    }
    return renderedText;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:08:54.683

看看这个关于 w3schools 的基本信息

[http://www.w3schools.com/cssref/pr_text_white-space.asp](http://www.w3schools.com/cssref/pr_text_white-space.asp)

并通过示例更好地解释：

[http://css-tricks.com/almanac/properties/w/whitespace/](http://css-tricks.com/almanac/properties/w/whitespace/)

我还认为您必须将 hello 放在 1 中`<p>`，将 world 放在另一个中，效果才能起作用。否则他们都向右走。

# ios - iPhone - 一旦应用程序在 iTunesConnect 上的有效期结束，我可以再次使用相同的名称吗？

> ID：15361014
> 
> 赞同：1
> 
> 时间：2013-03-12T12:19:23.473
> 
> 标签：ios, app-store, itunes, app-store-connect, mobile-application

我在 iTunesConnect 上创建了一个应用程序，但是在我在 AppStore 上提交我的应用程序之前，应用程序的有效性已经结束。

我可以使用相同的名称在 iTunes 上创建新的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:44:13.920

根据这个问题：[iTunes Connect 上的 App Name Expiry](https://stackoverflow.com/questions/6518141/app-name-expiry-on-itunes-connect)

您的应用名称将能够被其他开发者使用，并且您不能重复使用该应用名称。

# php - jQuery id 选择器在拥有 . 在身份证

> ID：15361015
> 
> 赞同：8
> 
> 时间：2013-03-12T12:19:27.277
> 
> 标签：php, jquery

我的html代码如下。

```
<div id="chatbox_dipesh.parmar" class="chatbox">
  //html markup which is validated
</div> 
```

在上面的代码中`dipesh.parmar`动态添加了div。

我正在使用以下代码访问它。

```
$("#chatbox_"+chatboxtitle).show(); 
```

在哪里`chatboxtitle`，`dipesh.parmar`但它没有选择 div。

`.`是不是一个有效的ID。？

我的 jQuery 已加载，它与其他库不冲突，并将其包装到`$(function(){ })`.

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T12:25:35.280

逃脱点。

看这个： [方向](https://stackoverflow.com/questions/605630/how-to-select-html-nodes-by-id-with-jquery-when-the-id-contains-a-dot)

# javascript - onclick 中的 JavaScript 引号

> ID：15361020
> 
> 赞同：1
> 
> 时间：2013-03-12T12:19:42.757
> 
> 标签：javascript, dom-events, shadowbox

我正在尝试`onclick`为一些影子盒添加一些 JavaScript 代码。

这是代码：

```
Shadowbox.open({
        content:    'my.php',
        player:     "iframe",
        title:      '<div><a href="#" rel="shadowbox" onclick="Shadowbox.open({ content: \'page2.php\', width: 460, height: 270, player:\'iframe\' }); return false;"></a></div>',
        height:     800,
        width:      1024,

    }); 
```

最新我尝试过：

```
$(document).ready(function() {

$("#mydiv").on("click", "#sb-title", function(){

     Shadowbox.open({
    content: 'somepage.php', 
    width: 460, 
    height: 270, 
    player:'iframe'     
    });

    });

}); 
```

...然后...

```
Shadowbox.open({
content:    'someotherpage.php',
player:     "iframe",
title:      '<div><a id="mydiv" href="#">Clickme</a></div>',
height:     800,
width:      1024,

}); 
```

以上是什么都不做。

由于某种原因，`onclick`没有发生......这是引号的语法问题吗？

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:49:38.003

尝试仅添加普通文本作为标题（不要添加`onclick`）。

然后你可以添加一些脚本来跟踪点击：

```
$("body").on("click", "#sb-title", function(){
    Shadowbox.open({
        content: 'page2.php', 
        width: 460, 
        height: 270, 
        player:'iframe' }
}) 
```

**编辑**
从您的代码：

```
$(document).ready(function() {

    //you may try '#sb-wrapper' instead of 'body'
    $("body").on("click", "#sb-title", function(){

         Shadowbox.open({
            content: 'somepage.php', 
            width: 460, 
            height: 270, 
            player:'iframe'     
         });

    });

}); 
```

...然后...

```
Shadowbox.open({
    content:    'someotherpage.php',
    player:     "iframe",
    title:      'Clickme',
    height:     800,
    width:      1024,

}); 
```

# java - 构造函数未定义

> ID：15361023
> 
> 赞同：0
> 
> 时间：2013-03-12T12:19:48.550
> 
> 标签：java, arrays, constructor, undefined

在我的主要课程中，我有以下代码：

```
Polynomial P = new Polynomial(polynomial); 
```

在另一个类中，我有以下代码：

```
public class Polynomial {

    private int[] polynomial;

    public Polynomial(int[] polynomial) {
        this.polynomial = polynomial;
    }
} 
```

为什么构造函数多项式（int []）未定义？

顺便说一句......主类中的多项式指向：

```
int [] polynomial = new int[count]; 
```

这是完整的主要课程：

```
import javax.swing.JOptionPane;
import java.util.Scanner;
import java.util.Arrays;
public class Main {

public static void main(String[] args) {
    String input = JOptionPane.showInputDialog(null, "This is the Polynomial Cal" +
            "culator Menu. Please ente" +
                "r your menu selection:\n (1) Enter c" +
                    "oefficients of polynomial P(x). \n (2) Enter co" +
                    "efficients of polynomial Q(x). \n (3) Sum polynomi" +
                        "als P(x) and Q(x). \n (4) Multiply polynomials P(x) and Q(" +
                            "x). \n (5) Quit.", "Polynomial Menu",JOptionPane.PLAIN_MESSAGE);
    Scanner inputScanner =new Scanner(input);           //Scanner for Menu
    int userChoice = inputScanner.nextInt();            //Menu Choice
    if(userChoice>=1 && userChoice<=5)                  //User Input Catch
    {
        switch(userChoice)
        {
        case 1: String coefficientInput= JOptionPane.showInputDialog(null, "Please enter th" +
                "e coefficients of the terms in the polynom" +
                    "ial.(Ax^n, Bx^(n-1)...Yx,Z) \n Only ent" +
                        "er the values of the coeffien" +
                            "ts i.e (A + B - C + D) ");
                Scanner countScanner = new Scanner(coefficientInput);       //Scanner for count
                int coefficient= countScanner.nextInt();
                int count=1;
                while(countScanner.hasNextInt())
                {
                    count++;
                    countScanner.nextInt();
                }
                int [] polynomial = new int[count];                         //Size of Array=Count
                Scanner coefficientScanner = new Scanner(coefficientInput);
                int term = 0;
                System.out.println(count);
                int i=0;
                while(coefficientScanner.hasNextInt())                                  //Initialisation of array
                {
                    term=coefficientScanner.nextInt();
                    polynomial[i]=term;
                    i++;
                }
                Polynomial P = new Polynomial(polynomial);

        }
    }
    else
    {
        JOptionPane.showMessageDialog(null, "No option selected. Please try again.","Input Error",JOptionPane.ERROR_MESSAGE);
    }

}

} 
```

错误发生在多项式 P =new Polynomial(polynomial)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:23:47.307

我猜想主类中命名的引用`polynomial`并不指向`int []`. 如果它是类型的引用，`Polynomial`您要么必须创建另一个接受 a 的构造函数`Polynomial`（又名“复制构造函数”），要么更改`polynomial`.

我不喜欢您编写构造函数的方式。那样不是私人的。您传入的引用是可变的。制作防御副本。这是我的做法：

```
public class Polynomial {

    private int[] coefficients;

    public Polynomial(int[] coefficients) {
        if (coefficients == null) throw new IllegalArgumentException("coefficients cannot be null");
        this.coefficients = new int[coefficients.length];
        System.arraycopy(0, coefficients, 0, this.coefficients, this.coefficients.length);
    }

    public Polynomial(Polynomial p) {
        this(p.coefficients);
    }
} 
```

这也是一种幼稚的设计。没有浮点系数？如果你想建模类似`y = x^1000 + 1`. 您将在一个非常大的数组中有两个非零系数。

更好的设计是创建一个`Monomial`并`Polynomial`维护一个`List`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:55:40.530

好的。我只是删除了一行代码并重新输入了它-然后它起作用了。刚刚发生了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:29:23.777

以下代码将愉快地编译，您的类定义和构造函数没有问题。

注意如何定义和初始化整数数组。

```
public static void main(String[] args){
    int[] polynomial = new int[]{2, 1, 2};
    Polynomial P = new Polynomial(polynomial);
} 
```

# .net - 在整个数据网格中搜索值

> ID：15361024
> 
> 赞同：0
> 
> 时间：2013-03-12T12:19:50.343
> 
> 标签：.net, vb.net, winforms, visual-studio-2010

如果国家/地区已出现在 Datagrid 中，我希望阻止用户将国家/地区添加到数据库中。

Datagrid 预加载了表单加载事件中的国家/地区。

我有以下代码（如下），但是我收到一条错误消息，指出下标超出范围并且不能为负数。

```
Dim appear As Integer
Dim colcount As Integer
Dim rowcount As Integer
colcount = all_countries.ColumnCount
rowcount = all_countries.RowCount
For i = 0 To rowcount
  For j = 0 To colcount
    If (new_country.Text = all_countries.Item(colcount, rowcount).Value) Then
      MsgBox("Country Exists", 0)
      appear = 1
    End If
  Next
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:31:07.363

您可以使用该[`CellValidating`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvalidating.aspx)事件，例如：

```
Private Sub all_countries_CellValidating(sender As Object, e As System.Windows.Forms.DataGridViewCellValidatingEventArgs) Handles all_countries.CellValidating
    Dim headerText = all_countries.Columns(e.ColumnIndex).HeaderText
    ' Abort validation if cell is not in the country column '
    If Not headerText.Equals("Country") Then Return

    ' Confirm that the cell is not empty '
    Dim thisCountry As String = e.FormattedValue.ToString()
    If String.IsNullOrEmpty(thisCountry) Then
        all_countries.Rows(e.RowIndex).ErrorText = "Country must not be empty"
        e.Cancel = True
    Else
        For Each row As DataGridViewRow In all_countries.Rows
            If row.Index <> e.RowIndex Then
                Dim countryCell = row.Cells(e.ColumnIndex)
                If thisCountry = countryCell.FormattedValue.ToString() Then
                    all_countries.Rows(e.RowIndex).ErrorText = "Country must be unique"
                    e.Cancel = True
                    Exit For
                End If
            End If
        Next
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:45:07.410

尝试以下操作：

```
Dim X as Integer
For X = 0 to DataGridView.Rows.Count - 1
   If DataGridView.Rows(X).Cells("ColumnName").Value = new_country.Text Then
      MsgBox("Country Exists", 0)
      appear = 1
   End If
Next 
```

注意：“计数 - 1”。我认为这可能是导致您的代码出现问题的原因。我希望这有帮助

# android - 真正的开源跨平台移动开发工具包

> ID：15361029
> 
> 赞同：2
> 
> 时间：2013-03-12T12:20:02.063
> 
> 标签：android, ios, qt, cordova, appcelerator

我正在寻找用于移动开发的开源真正跨平台工具包，它使构建和开发过程变得优雅（一次编写，随处编译），就像跨平台桌面工具包（[Qt](https://qt-project.org/)、GTK+ 或 wxWidget）一样。

我目前正在此列表中进行调查，但我需要您的实际经验或建议，因为他们都以某种方式使用 HTML5，而我在 HTML5/Javascript 方面没有太多经验。

*   [电话间隙](http://phonegap.com/)
*   [加速器钛](http://www.appcelerator.com/platform/titanium-platform/)
*   [黑五](http://kurogo.org/)

*附言*

[Qt 工具包](https://qt-project.org/)绝对符合我的需求（支持原生 UI 和真正的跨平台），但直到现在他们还没有发布他们计划在 6 个月后发布的 Android/iOS 支持，所以我需要一个快速的解决方案直到那个日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:29:02.903

查看 Codename One： http: [//www.codenameone.com](http://www.codenameone.com/)您编写应用程序并将其部署在不同的平台上，包括 iOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:29:50.347

LiveCode 似乎用途广泛。我自己没有用过，但考虑了一下。[他们在这里](http://www.runrev.com/products/Overview/)有一个跨平台功能的比较表。它包括安卓和iOS。但没有提及 Mozilla 即将推出的移动操作系统或任何其他操作系统

# android - 在画布上手动绘制视图不会保留透明度

> ID：15361031
> 
> 赞同：3
> 
> 时间：2013-03-12T12:20:09.073
> 
> 标签：android, android-canvas

当我绘制一个包含透明区域的视图时，由于其背景图像，当视图被绘制到画布时，这些透明区域变为黑色：

```
View v = getView();
v.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
v.layout(0, 0, infoWindow.getMeasuredWidth(), infoWindow.getMeasuredWidth());
Bitmap b = Bitmap.createBitmap(v.getMeasuredWidth(), v.getMeasuredHeight(), Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(b);
//c.drawColor(Color.YELLOW); // yellow color does not show up
v.draw(c); 
```

由于代码片段中的黄色背景没有出现在位图中，我得出的结论是`v.draw(c)`不使用透明度进行绘制。如果我将 Drawable 绘制到画布上，则它的透明区域会正确绘制。

由于视图是从布局文件中扩展而来的，我可以观察到在操作中使用相同的布局时，Android 会正确呈现相同的布局。那么如何在保持透明区域的同时将视图绘制到画布上呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:56:41.273

呼叫`v.setDrawingCacheEnabled(true)`和`v.getDrawingCache()`。第二个会给你一个`Bitmap`你可以画的。

# javascript - 地理定位自动计算道路距离

> ID：15361034
> 
> 赞同：0
> 
> 时间：2013-03-12T12:20:17.793
> 
> 标签：javascript, google-maps

我在我的网站上使用这个脚本：

```
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script>
    (function () {
        var directionsService = new google.maps.DirectionsService(),
            directionsDisplay = new google.maps.DirectionsRenderer(),
            createMap = function (start) {
    var travel = {
            origin : (start.coords)? new google.maps.LatLng(start.lat, start.lng) : start.address,
            destination : "Warszawa, al. jerozolimskie 123",
            travelMode : google.maps.DirectionsTravelMode.DRIVING
            // Exchanging DRIVING to WALKING above can prove quite amusing :-)
        },
        mapOptions = {
            zoom: 10,
            // Default view: downtown Stockholm
            center : new google.maps.LatLng(59.3325215, 18.0643818),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

    map = new google.maps.Map(document.getElementById("map"), mapOptions);
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById("map-directions"));
    directionsService.route(travel, function(result, status) {
        if (status === google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(result);
        }
    });
            };

            // Check for geolocation support    
            if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function (position) {
            // Success!
            createMap({
                coords : true,
                lat : position.coords.latitude,
                lng : position.coords.longitude
            });
        }, 
        function () {
            // Gelocation fallback: Defaults to Stockholm, Sweden
            createMap({
                coords : false,
                address : "Polska, Warszawa"
            });
        }
    );
            }
            else {
    // No geolocation fallback: Defaults to Lisbon, Portugal
    createMap({
        coords : false,
        address : "Polska, Warszawa"
    });
            }
    })();
</script> 
```

我在连接计算我的位置和设定位置之间的道路距离的 Haversine 公式时遇到问题......我不需要任何地图或道路线 - 只有公里数:)

有人帮我解决这个问题吗？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:47:55.270

我检查了 APi 并找到了你想要的。

前

> 方向服务.路线（

一定要设置：

> 单位系统：google.maps.UnitSystem.METRIC

在您的**旅行**变量中。

然后调用路由后，Result 是一个 DirectionsResult 对象。在那里，您将拥有一个 DirectionRoute 数组，其中包含一个带有 distance 属性的 DirectionsLeg 数组。

为你的问题获取这个应该如下工作：

> var 结果 = result.rows[0].elements;
> 
> var 距离 = 结果[0].distance.text;

distance.text 返回“100 km”，而 distance.value 只会返回“100”，无论您喜欢什么。

当然，最好遍历这些数组；）（一定要检查这些，因为距离并不总是被填充，在某些情况下距离可能是未知的）

可以在此处找到有关 API 的更多信息：[https ://developers.google.com/maps/documentation/javascript/directions?hl=en](https://developers.google.com/maps/documentation/javascript/directions?hl=en)

PS：请务必使用 API 的实际版本 V3，生成您自己的密钥并使用它。[https://developers.google.com/maps/documentation/javascript/tutorial?hl=en#api_key](https://developers.google.com/maps/documentation/javascript/tutorial?hl=en#api_key)

# cordova - 如何从 cordova/phonegap 项目中删除 www 文件夹？

> ID：15361035
> 
> 赞同：0
> 
> 时间：2013-03-12T12:20:19.533
> 
> 标签：cordova, plugins

我有一个 iOS cordova/phonegap 应用程序。我不想使用本地 html 和 javascript 文件，所以我在我的服务器上加载 www 文件夹，phonegap 应用程序连接到该文件夹​​。

在我这样做之后，所有的 javascript/html/css 都是从服务器加载的。

但是，如何从我的项目中删除“www”文件夹而不会出现错误？

我知道我应该通过 finder 来执行此操作，因为您无法从 xCode 中删除该项目，但即使我这样做了，当我运行该项目时，我也会收到有关文件夹丢失的错误消息。

有没有人尝试过这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:41:54.990

我对名字有点错误：

在您的 Appdelegate.m 中，在函数中

```
- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions 
```

一定是这样的

```
self.viewController = [[[MainViewController alloc] init] autorelease];
self.viewController.useSplashScreen = YES;
self.viewController.wwwFolderName = @"www";
self.viewController.startPage = @"index.html";
self.viewController.view.frame = viewBounds; 
```

正如你所看到的，这里它试图从“www”文件夹中加载一些东西。在`self.viewController`Appdelegate.h 中声明如下：

```
@property (nonatomic, retain) IBOutlet PGViewController* viewController; 
```

尝试删除 wwwFoldername 的 @"www" 名称，看看它是否有效

# mysql - 将 SSL 与 MySql 集成

> ID：15361044
> 
> 赞同：2
> 
> 时间：2013-03-12T12:20:42.657
> 
> 标签：mysql, ssl, access-denied

我正在尝试通过引用[this](http://www.chriscalender.com/?p=448)`ssl`来进行设置。 我能够完成前 3 个步骤，但第 4 个步骤有问题，如下所示：`mysql`

```
GRANT ALL PRIVILEGES ON *.* TO 'ssluser'@'localhost' IDENTIFIED BY 'ssluser' REQUIRE SSL; 
```

在我尝试运行时执行此语句后`mysql -ussluser -pssluser -P3430 --ssl-key=`，它显示以下错误：**Can't connect to MySql server on 'localhost' (10061)**

我尝试使用 连接到 mysql `mysql -ussluser -pssluser`，但它显示：**Access denied for user 'ssluser'@'localhost' (using password: YES)**

当我已经执行了*GRANT*语句时，它怎么能说*拒绝访问。*

 ***请注意，**我在使用*GRANT atetement*`mysql -ussluser -pssluser` **之前**执行了并且能够连接到. 我在这个时间点执行（应该启用 SSL ？？？）。*`mysql``mysql> CHANGE MASTER TO MASTER_SSL=1;`*

 *另外，如果我尝试，`SHOW GRANTS FOR 'ssluser'@'localhost';`
我会得到

```
GRANT ALL PRIVILEGES ON *.* TO \'ssluser\'@\'localhost\' IDENTIFIED BY PASSWORD \'*C56A6573BEE146CB8243543295FD80ADCE588EFF\' REQUIRE SSL WITH GRANT OPTION 
```

我从几天开始尝试，但一无所获。任何帮助表示赞赏。

## 编辑1

当我使用`show global variables like 'have_%ssl';`我得到

```
have_openssl    DISABLED
have_ssl        DISABLED 
```

当我使用它时，`SHOW STATUS LIKE 'Ssl_cipher';`我得到

```
Ssl_cipher  _________ 
```

另外，我已经创建了所有经过认证的服务器和客户端，并将它们放在根目录`certs`内的目录中。`mysql server`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:50:22.120

您没有提供有关服务器或客户端操作系统的任何信息，也没有提供可执行文件的来源，也没有提供 DBMS 的配置方式。

> mysql -ussluser -pssluser -P3430 --ssl-key=

IIRC，当您设置用户帐户以提供客户端证书进行身份验证时使用 ssl-key 选项（GRANT....REQUIRE X509;）。在这种情况下，您需要给它一个客户端证书文件作为参数。

但是您只是说它应该使用 SSL - 即客户端对于 SSL 目的是匿名的。但是客户端仍然需要验证服务器 - 因此 mysql 应该以[--ssl-ca=ca-cert.pem](http://dev.mysql.com/doc/refman/4.1/en/ssl-options.html#option_general_ssl-ca)或 --ssl-capath=directory_name 启动。

您还需要确保为服务器配置了 SSL 支持 - ini 文件或启动脚本应该包含对它将使用的证书的引用以及它处理 SSL 连接的端口。此外，必须将 SSL 支持编译到二进制文件中，并且任何相关的共享对象文件都可用。如果配置显示 SSL 但 DBMS 不能执行 SSL，那么您应该从服务器日志中获得一些指示。**

# javascript - Trigger.IO 顶栏添加 2 个彼此相邻的正确位置的按钮

> ID：15361049
> 
> 赞同：1
> 
> 时间：2013-03-12T12:20:51.590
> 
> 标签：javascript, trigger.io

我目前正在开发一个 trigger.io 应用程序，我试图在顶部栏右侧放置 2 个按钮。

这是我想要做的主要想法。其中“1”和“2”是我想要的按钮。

```
+-------------------------+---+---+
|             TITLE       | 1 | 2 |
+-------------------------+---+---+ 
```

我正在尝试添加 2 个按钮，但是它们不断地把它们放在一个左边和一个右边。有没有办法通过 JS 将它们放在一起，或者我必须通过 CSS 将它们放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:46:56.010

这目前是 Trigger.io 顶部栏模块中的一个限制 -`position`您可以传递的参数`addButton`会影响单个按钮的对齐方式，但我们还不支持多个按钮的对齐方式。

我已将它添加到我们的待办事项中 - 这绝对是我们希望在未来的平台版本中支持的东西！

# sql - SQL Server 2008 R2 - EXISTS vs TOP 1

> ID：15361051
> 
> 赞同：0
> 
> 时间：2013-03-12T12:21:00.127
> 
> 标签：sql, sql-server, sql-server-2008

过去我们有一个存储函数，它基本上看起来像这样：

```
IF EXISTS ( SELECT * FROM ... ) RETURN 1 
```

SELECT 需要很长时间才能执行，然而，在 EXISTS 周围我们很快就完成了。

但是，我们现在需要在应用程序中提供一个“证书”，“给我一个示例，为什么您返回 1”。我们将查询更改为：

```
DECLARE @cert BIGINT
SELECT TOP 1 @cert = id FROM ...
RETURN @cert 
```

但是，现在这需要更长的时间。我们的查询中没有`ORDER BY`子句。

SQL Server 是否仍在检索所有行，然后只选择第一行？我们监督了什么？我们不应该有同样的速度吗？为什么第二个查询比第一个查询花费更多时间？（时间的大小）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:27:48.753

您的 if exists 检查匹配条件的存在并在找到匹配条件后停止，但永远不必返回结果。我相信，一旦您从集合中进行选择，它就必须返回一些东西，并且取决于集合，可能需要一段时间才能获得最高评价？

如果需要很长时间，我会调查执行计划，看看是否有任何索引可供您添加。

# coldfusion - 计划的工作和时间变更

> ID：15361056
> 
> 赞同：0
> 
> 时间：2013-03-12T12:21:13.013
> 
> 标签：coldfusion, coldfusion-9, cfml

我们有一些预定的作业，每天在一天中的不同时间运行。这些工作包括记录他们的结果，如下所示：

```
<cflog file="#logname#"  text="START #logname#">
<cfoutput>#mid(now(),6,19)# Scheduled Jobs running on Production (#server.Name#) 
```

上周末，当时钟提前一小时时，所有这些工作都迟到了一小时。以下是每天 00:05 运行的作业的上述两行的一些示例输出。首先，就在时间变化之前。

```
"Information","jrpp-213","03/10/13","00:05:00",,"START scheduledjobs_0005"
"Information","jrpp-213","03/10/13","00:05:00",,"start sheduledjobs_0005" 
```

接下来，时间变化后的第一次。一小时后运行。

```
 "Information","jrpp-343","03/11/13","01:05:00",,"START scheduledjobs_0005"
 "Information","jrpp-343","03/11/13","01:05:00",,"start sheduledjobs_0005" 
```

然后第二天就恢复正常了。

```
"Information","jrpp-111","03/12/13","00:05:00",,"START scheduledjobs_0005"
"Information","jrpp-111","03/12/13","00:05:00",,"start sheduledjobs_0005" 
```

这些作业生成的文件的时间戳也比作业计划运行时间晚一小时。

有没有人见过类似的东西？有谁知道会导致这种情况或如何预防？我们正在运行版本 9,0,1,274733。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:38:25.127

我以前见过这个。调度程序通过将 24 小时添加到计划的开始时间来计算每日任务的下一次运行。在这种情况下，将 24 小时添加到周日 00:00 ST 会使下一个开始时间为周一 01:05 DST。调度程序会在第二天自行更正，因为它将计划的开始时间增加了 24 小时，现在是 DST 00:00。

以这种方式处理它很重要，因为如果有人安排任务在错过的时间运行，那么该任务在那天根本不会运行。此外，如果该任务计划在秋季的额外小时内运行，它实际上会运行两次。

# tfs - TFS Scrum 模板 - 如何查看前一个 sprint 的 Scrum 板

> ID：15361058
> 
> 赞同：2
> 
> 时间：2013-03-12T12:21:15.967
> 
> 标签：tfs, scrum

我在 Sprint #2 上使用 TFS scrum 模板。我想回去看看 Sprint #1 的 Scrum 板。有没有办法做到这一点？如果我从主页转到 Board 链接，我会进入当前 sprint 的板，并且看不到任何向后退的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:35:54.410

我也没有找到一种方法来做到这一点，但我一直在使用“积压”区域来查看来自任何迭代的故事，或者使用工作项查询来从特定迭代中提取元素。

我一直希望有一种方法可以查看未来/过去迭代的董事会，但目前似乎没有办法以这种方式导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T00:55:10.357

在今天的 Team Foundation **Service**更新中，您可以查看之前 sprint 中的看板：

![该图显示了上一个 sprint 的任务板](../Images/a8fb9861469ff60bebbe43ad6c291e89.png)

更新：

这是用户语音网站中的热门项目：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2901542-ability-to-view-task-board-for-past-sprints](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2901542-ability-to-view-task-board-for-past-sprints)

您可以在此处找到此更改的详细信息：http: [//tfs.visualstudio.com/en-us/home/news/2013/may-13/](http://tfs.visualstudio.com/en-us/home/news/2013/may-13/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T07:15:30.500

MS在这里也提到了这一点： http: [//www.visualstudio.com/en-us/news/2013-may-13-vso](http://www.visualstudio.com/en-us/news/2013-may-13-vso)：

“您现在可以查看过去和未来迭代的任务板，而不仅仅是当前迭代（我可以听到你们中的一些人在阅读本文时欢呼）。”

是仅支持“查看”还是您实际上也可以与董事会“合作”并进行更改？我们需要这样做来模拟我们的工作流程和发布管理（并行发布）吗？

我们这里仍然只使用 TFS 2012，不确定何时部署 2013。

您使用 TFS 2013 对此有何想法？

# c# - 计算时间差异并继续将差异添加到标签

> ID：15361065
> 
> 赞同：-2
> 
> 时间：2013-03-12T12:21:41.173
> 
> 标签：c#, visual-studio-2010, datetime, timespan

我正在开发一个计算两个给定时间之间差异的程序。两次之间的差异是使用 button1 事件处理程序计算的，并显示在标签中，如下所示的窗口表单布局中所示。

这是我的界面： ![在此处输入图像描述](../Images/9aadd5bc56f8524ce02cadd779db7f19.png)

我的代码：

我希望我的问题很清楚。我尽了最大的努力，但无法让它发挥作用。我只是不断得到错误的答案：

```
 public Form1()
        {
            InitializeComponent();
        }

        DateTime t1 = new DateTime(0, 11, 0);
        DateTime t2 = new DateTime(0, 16, 30);
        DateTime Dif = new DateTime(0, 0, 0);

        private void button1_Click(object sender, EventArgs e)
        {

            Dif = t1 - t2;
            Dif = Dif + DateTime.Parse(label1.Text);
            label1.Text = Dif.ToString();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:23:18.323

您需要在两个不同的时间获取时间才能看到显着的差异，您可以再添加两个按钮来开始时间和结束计时器。IMO[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx) *更准确地用于此目的*，在开始按钮单击时启动它并在结束按钮单击时结束它。

*启动秒表*

```
private void start_Click(object sender, EventArgs e)
{
    stopWatch.Start();
} 
```

*停止秒表*

```
private void end_Click(object sender, EventArgs e)
{
    stopWatch.Stop();
} 
```

*在这里你会得到时间间隔*

```
private void button1_Click(object sender, EventArgs e)
{
     TimeSpan ts = stopWatch.Elapsed;  //Here you will get the time interval         
     if(label1.Text != "")
     {
        TimeSpan tsOld =  TimeSpan.Parse(label1.Text);
        label1.Text = ts.Add(tsOld).ToString(); 
     }
     else
        label1.Text = ts.ToString(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:27:13.220

目前尚不清楚您要做什么，但您无法使用该值初始化 DateTime。

尝试使用 TimeSpan

```
 TimeSpan t1 = new TimeSpan(0, 11, 0);
    TimeSpan t2 = new TimeSpan(0, 16, 30);
    TimeSpan Dif = (label1.Tag == null ? new TimeSpan(0, 0, 0) : label1.Tag as TimeSpan);

    Dif = Dif + (t2 - t1);

    label1.Text = Dif.ToString();
    label1.Tag = Dif; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:28:39.903

我想这应该可行：

```
 public Form1()
        {
            InitializeComponent();
        }

        TimeSpan t1 = new TimeSpan(0, 11, 0);
        TimeSpan t2 = new TimeSpan(0, 16, 30);

        private void button1_Click(object sender, EventArgs e)
        {
            TimeSpan dif = t2 - t1;
            label1.Text = dif.ToString();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:33:23.150

你只需要使用timeSpan类型减去两个dateTime即可！这是一个我没有编译这段代码的小例子：

```
DateTime TimeDate1 = DateTime.now;
Thread.Sleep(10000);
DateTime TimeDate2 = DateTime.now;
TimeSpan dateTimeResult = TimeDate2 - TimeDate1; 
```

结果应该是 10 秒

# java - java 服务器无法处理请求值不能为空

> ID：15361068
> 
> 赞同：0
> 
> 时间：2013-03-12T12:21:47.997
> 
> 标签：java, web-services, apache, tomcat

我得到了这个例外：

> 服务器无法处理请求。---> 值不能为空。参数名称：输入

我怎样才能找到参数`:input`？而且，我该如何解决根本问题？我正在从 Java 客户端调用 ASP.net 中的 Web 方法。

这是代码：

```
public org.tempuri.UpdateInsuredDetails_Output recieveMDMDataInsuredDetails(
        org.tempuri.UpdateInsuredDetails_Input l_input)
        throws java.rmi.RemoteException {
    if (super.cachedEndpoint() == null) {
        throw new org.apache.axis.NoEndPointException();
    }
    org.apache.axis.client.Call _call = createCall();
    _call.setOperation(_operations[2]);
    _call.setUseSOAPAction(true);
    _call.setSOAPActionURI("http://tempuri.org/RecieveMDMDataInsuredDetails");
    _call.setEncodingStyle(null);
    _call.setProperty(org.apache.axis.client.Call.SEND_TYPE_ATTR,
            Boolean.FALSE);
    _call.setProperty(org.apache.axis.AxisEngine.PROP_DOMULTIREFS,
            Boolean.FALSE);
    _call.setSOAPVersion(org.apache.axis.soap.SOAPConstants.SOAP11_CONSTANTS);
    _call.setOperationName(new javax.xml.namespace.QName(
            "http://tempuri.org/", "RecieveMDMDataInsuredDetails"));
    setRequestHeaders(_call);

    setAttachments(_call);
    try {
        logger.info("this is where i get the error:");
        java.lang.Object _resp = _call
                .invoke(new java.lang.Object[] { l_input });
        if (_resp instanceof java.rmi.RemoteException) {
            throw (java.rmi.RemoteException) _resp;
        } else {
            extractAttachments(_call);
            try {
                return (org.tempuri.UpdateInsuredDetails_Output) _resp;
            } catch (java.lang.Exception _exception) {
                return (org.tempuri.UpdateInsuredDetails_Output) org.apache.axis.utils.JavaUtils
                        .convert(
                                _resp,
                                org.tempuri.UpdateInsuredDetails_Output.class);
            }
        }
    } catch (org.apache.axis.AxisFault axisFaultException) {
        throw axisFaultException;
    }
} 
```

这就是我调用recieveMDMDataInsuredDetails方法的方式：

```
InsuredDetailsLocator MDP_locator =new InsuredDetailsLocator(); 
            MDP_locator.setInsuredDetailsSoapEndpointAddress("http://mgnt184:8056/MDP_InsuredDetails_WS/InsuredDetails.asmx?wsdl");
            InsuredDetailsSoapStub service= (InsuredDetailsSoapStub)MDP_locator.getInsuredDetailsSoap(); 
            UpdateInsuredDetails_Input request_MDP =new UpdateInsuredDetails_Input();
            request_MDP.setSystemName(urlProps.getProperty("xxx"));
            request_MDP.setSystemPassword(urlProps.getProperty("xxxx"));

            request_MDP.setMS_ZIHUY(insuree.getMsZihuy());
            request_MDP.setKOD_CHEVRA(insuree.getKodChevra());
            request_MDP.setFAMILY_NAME(insuree.getFamilyName());
            request_MDP.setFIRST_NAME(insuree.getFirstName());
            request_MDP.setKOD_MIN(insuree.getKodMin());
//calling the method:   
UpdateInsuredDetails_Output response_MDP= service.recieveMDMDataInsuredDetails(request_MDP); 
```

也许它`input`提到的是 xml 文件中的那个：

```
<wsdl:portType name="InsuredDetailsSoap">
<wsdl:operation name="GetInsuredDetails">
<wsdl:input message="tns:GetInsuredDetailsSoapIn" />
<wsdl:output message="tns:GetInsuredDetailsSoapOut" />
</wsdl:operation>
<wsdl:operation name="UpdateInsuredDetails">
<wsdl:input message="tns:UpdateInsuredDetailsSoapIn" />
<wsdl:output message="tns:UpdateInsuredDetailsSoapOut" />
</wsdl:operation>
<wsdl:operation name="RecieveMDMDataInsuredDetails">
<wsdl:input message="tns:RecieveMDMDataInsuredDetailsSoapIn" />
<wsdl:output message="tns:RecieveMDMDataInsuredDetailsSoapOut" />
</wsdl:operation>
</wsdl:portType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:38:43.360

似乎是在说`l_input`……`null`而且不应该是。

但是`l_input`是`recieveMDMDataInsuredDetails`方法的参数。

因此，据此，我得出结论，*该*方法是使用无效参数调用的。看看（你的？）代码在哪里调用方法，等等。

* * *

如果这没有帮助，请将异常的完整堆栈跟踪以及调用`recieveMDMDataInsuredDetails`.

（请修复代码中的拼写错误。它让我的大脑受伤！“recieve”->“receive”！！！）

# c# - 通过同一个套接字但在不同的线程中发送和接收？

> ID：15361072
> 
> 赞同：0
> 
> 时间：2013-03-12T12:22:00.147
> 
> 标签：c#, network-programming

我想在一个线程上发送请求并在另一个线程上收集响应。那将如何工作，我无法将请求与响应相匹配，对吗？假设我无法自定义请求/响应。如果我在一个线程上发送请求，那将如何与接收线程/端一起工作？它收到的东西不会全部混淆，因为我在它仍在接收第一个请求的同时不断向同一个套接字发送东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:33:14.357

听起来您正在编写多路复用器。如果我们假设每个请求在某个时候都会得到一个响应（假设没有严重错误），那么您需要将已发送的请求保留在队列中，这样当您收到响应时，您可以将响应与请求中的请求相匹配正确的顺序。确保单个请求以原子方式编写且不间断，这一点至关重要；这可以通过锁定（围绕写入）或通过创建一个单独的待处理出站消息队列来完成。

我这样做的方法是使用`Task`API；每个待处理的响应*基本上*都映射到一个`TaskCompletionSource<T>`（对于某些`T`）；当您收到响应时，您可以`TrySetResult`（或错误），向调用者指示完成 - 我们可以使用谁`Wait`，`ContinueWith`或`await`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:42:35.957

主要的悬而未决的问题是请求/响应是否由对方异步处理。
如果服务器以相同的顺序响应，那么我将添加一个 BlockingCollection 作为 Fifo 队列作为数据存储。（BlockingCollection 的默认集合类型是 ConcurrentQueue）。
发送者添加到 BlockingCollection，接收者从集合中获取。

# python - 在python中使用子列表拆分字符串

> ID：15361073
> 
> 赞同：1
> 
> 时间：2013-03-12T12:22:01.000
> 
> 标签：python, string, split

我有这个字符串：

```
"{'osFreeMem': 286494720, 'osUpTime': 19230718, 'sysload': [0.24609375, 0.62109375, 0.734375], 'nodeUpTime': 1831, 'osTotMem': 536870912, 'nodeMemory': {'heapTotal': 8766304, 'heapUsed': 7789588, 'rss': 22773760}}" 
```

我想要一本包含这些值的字典：

```
'osFreeMem': 286494720
'osUpTime': 19230718
'sysload': [0.24609375, 0.62109375, 0.734375]    
'nodeUpTime': 1831
'osTotMem': 536870912    
'nodeMemory': {'heapTotal': 8766304, 'heapUsed': 7789588, 'rss': 22773760} 
```

我怎样才能得到这个清单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:25:10.753

```
In [37]: s = "{'osFreeMem': 286494720, 'osUpTime': 19230718, 'sysload': [0.24609375, 0.62109375, 0.734375], 'nodeUpTime': 1831, 'osTotMem': 536870912, 'nodeMemory': {'heapTotal': 8766304, 'heapUsed': 7789588, 'rss': 22773760}}"

In [38]: import ast

In [39]: d = ast.literal_eval(s)

In [40]: d
Out[40]: 
{'nodeMemory': {'heapTotal': 8766304, 'heapUsed': 7789588, 'rss': 22773760},
 'nodeUpTime': 1831,
 'osFreeMem': 286494720,
 'osTotMem': 536870912,
 'osUpTime': 19230718,
 'sysload': [0.24609375, 0.62109375, 0.734375]}

In [41]: d.items()
Out[41]: 
[('osFreeMem', 286494720),
 ('osUpTime', 19230718),
 ('sysload', [0.24609375, 0.62109375, 0.734375]),
 ('nodeUpTime', 1831),
 ('osTotMem', 536870912),
 ('nodeMemory', {'heapTotal': 8766304, 'heapUsed': 7789588, 'rss': 22773760})] 
```

或者

```
In [44]: import json

In [45]: json.loads(s.replace("'",'"')).items()
Out[45]: 
[(u'osFreeMem', 286494720),
 (u'osUpTime', 19230718),
 (u'sysload', [0.24609375, 0.62109375, 0.734375]),
 (u'nodeUpTime', 1831),
 (u'osTotMem', 536870912),
 (u'nodeMemory', {u'heapTotal': 8766304, u'heapUsed': 7789588, u'rss': 22773760})] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T12:51:40.707

您还可以使用内置函数**eval**

```
>>>d = eval("{'osFreeMem': 286494720, 'osUpTime': 19230718, 'sysload': [0.24609375, 0.62109375, 0.734375], 'nodeUpTime': 1831, 'osTotMem': 536870912, 'nodeMemory': {'heapTotal': 8766304, 'heapUsed': 7789588, 'rss': 22773760}}")
>>>d
{'osFreeMem': 286494720, 'osUpTime': 19230718, 'sysload': [0.24609375, 0.62109375, 0.734375], nodeUpTime': 1831, 'osTotMem': 536870912, 'nodeMemory': {'heapTotal': 8766304, 'heapUsed': 7789588, 'rss': 22773760}} 
```

# pdf - Courier Visualforce 页面中呈现为 pdf 的新字体样式

> ID：15361076
> 
> 赞同：0
> 
> 时间：2013-03-12T12:22:05.667
> 
> 标签：pdf, fonts, salesforce, visualforce

使用 Courier New 字体样式时，页面中不显示某些土耳其语字符。

```
<apex:page renderAs="pdf">
    <table style="font-family : Corier New ; font-size:80%">  
        <tr align="left"><td style="width:40px;"/>
            <td>
                öçşığüÖÇŞİĞÜ
            </td>                     
        </tr>
    </table>
    ... 
```

**输出：öçüÖÇÜ**

```
<apex:page renderAs="pdf">
    <table style="font-family : Arial Unicode MS ; font-size:80%">  
        <tr align="left"><td style="width:40px;"/>
            <td>
                öçşığüÖÇŞİĞÜ
            </td>                     
        </tr>
    </table>
    ... 
```

**输出：öçşığüÖÇŞİĞÜ**

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T00:47:27.100

Salesforce 会生成 PDF 服务器端 - 与您安装的字体无关。

PDF 生成器是 EXTREMELEY 有限的。你可以做 font-family:courier，但不能做 font-family:courier-new

[http://help.salesforce.com/apex/HTViewSolution?id=000113353&language=en_US](http://help.salesforce.com/apex/HTViewSolution?id=000113353&language=en_US)

而且这个列表具有误导性 - 对于 Arial，您必须使用 Arial Unicode MS，Tim​​es-Roman 和 Helvetic 不起作用，只需使用 Serif

# html - 媒体查询在移动版本上不正确

> ID：15361077
> 
> 赞同：0
> 
> 时间：2013-03-12T12:22:13.580
> 
> 标签：html, css, mobile, responsive-design, media-queries

目前正在重新设计我当前的网站并将其用作学习工具，因为它将是第一个使用媒体查询的项目。

我的标题在浏览器和我的手机上看起来很好，但目前水平滚动两边都有额外的白色填充，我尝试减少主要内容的宽度，但仍然有相同的结果，只是它只是添加了白色填充

[http://www.adamhuxtable.com/demos/ah/v1/index.html](http://www.adamhuxtable.com/demos/ah/v1/index.html)

只是想知道我是否做错了什么。

感谢您的任何提示/建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:29:45.197

首先，我不会给你`.container`一个宽度。顺其自然`auto`。很难说接下来会发生什么。你能提供一个小提琴吗？

哦，我忘了：我也删除了`position: absolute`你的`#circle`.

# c# - IIS URL 重写 IP 地址

> ID：15361079
> 
> 赞同：4
> 
> 时间：2013-03-12T12:22:23.467
> 
> 标签：c#, asp.net, url, iis

是否可以将 IP 地址重写为名称？例如，我有`http://159.163.21.22/Default.aspx`并且想要将其更改为`http://example/Default.aspx`.

谢谢你们！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T12:46:21.267

您可以使用 Micosoft URL 重写。你可以从[这个链接](http://www.microsoft.com/en-in/download/details.aspx?id=7435)得到。

首先安装 URL 重写，然后使用以下条目修改您的 web.config

```
<system.webServer>
   <rewrite>
        <rules>
            <rule name="IP Hit" stopProcessing="true">
                <match url="(.*)" />
                <conditions>
                    <add input="{HTTP_HOST}" pattern="159.163.21.22" />
                </conditions>
                <action type="Redirect" url="http://www.yoursite.com/{R:1}" redirectType="Permanent" />
            </rule>
    </rewrite>
</system.webServer> 
```

根据您的要求更改 www.yoursite.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:30:02.623

`example`除非您的本地表（主机文件）或本地 DNS 服务器上有 DNS 条目，否则不会解析，因为它不是完全限定的域名，因此您需要先设置它。设置好后，您可以使用上面的 URL 重写示例，但请注意，它会执行 301（临时）重定向，因此浏览器和搜索引擎不会更新其索引，这可能会从 SEO 的角度伤害您，并可能增加额外的负载到您的 DNS 服务器。

如果您正在寻找一种在没有 301/302 重定向的情况下进行 URL 重写的方法，那么您就不走运了。最好的选择是去购买一个域名并注册它并开始使用该名称而不是 IP。

# c# - MDI Parent Form :- setting Parent (也许只是标题是重复的)

> ID：15361080
> 
> 赞同：0
> 
> 时间：2013-03-12T12:22:24.750
> 
> 标签：c#, mdi

看看这个[问题](https://stackoverflow.com/questions/4418604/mdi-parent-form-problem-setting-parent)的答案。我已经尝试了接受答案的第二条评论。问题在于“Application.OpenForms[0]”。它给了我一个错误，说“被指定为此表单的 MdiParent 的表单不是 MdiContainer。参数名称：值”。然后我展开查看有多少表格是打开的。我现在发现了一个惊人的结果。有两种开放形式。其中之一是 LoginForm 我有 this.Hide(); 成功登录。当我将其更改为 this.Close(); 应用程序关闭。为什么它仍然打开以及如何在不关闭应用程序的情况下关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:41:16.700

首先，如果在您关闭表单时应用程序正在完全关闭，则很可能是因为您正在关闭主表单，即：

```
Application.Run(new MainForm()); 
```

您的 LoginForm 是否正在关闭该主表单？

其次，如果表单要成为 MdiParent，它必须将 IsMdiContainer 属性设置为 true。

第三，我不会依赖 Application.OpenForms[0]，而是遍历它们并按名称选择正确的，如下所示：

```
FormCollection fc = Application.OpenForms;

foreach (Form frm in fc)
{
if (frm.Name == "Main Form")
    do what you need to do...
} 
```

希望这可以帮助。

# url-rewriting - 使用 UrlRewriteFilter 重写 URL

> ID：15361090
> 
> 赞同：1
> 
> 时间：2013-03-12T12:23:09.647
> 
> 标签：url-rewriting, seo, tuckey-urlrewrite-filter

我有一个网站，其页面使用查询字符串提供动态内容。例如：www.example.com?param1=abc¶m2=xyz

我想重写这个 url，以便用户和搜索引擎应该看到带有 url 的页面：www.example.com/abc/xyz

我正在使用 Tomcat 服务器，所以我选择[UrlRewriteFilter](http://tuckey.org/urlrewrite/)来执行重写。我将 www.example.com/abc/xyz 重定向到 www.example.com?param1=abc¶m2=xyz

但是，我不确定我应该应用哪种重定向。在搜索中，我发现 301 是最适合 seo 的。我尝试使用 type="permament-redirect" 但地址栏中的 url 在重定向后更改为带有查询字符串的 url（我不想要）。仅当我应用 type="forward" 时，seo 友好的 url 才会保留在地址栏中，但我不知道这是否对 SEO 有好处。

我的主要目的是使我的页面对 SEO 友好。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T14:14:45.563

如果 google 已有 URL，例如：www.example.com?param1=abc¶m2=xyz

您需要为 www.example.com/abc/xyz 执行 301

并且使用 UrlRewriteFilter 您仍然可以使用 www.example.com/abc/xyz

从过滤器中，您可以将文件夹映射为带有直通的参数。

此外，如果您使用参数，您还应该考虑使用 rel canonical 来表示哪个是 URL，因为对于 google，例如读取为不同的 URL：

www.example.com?param1=abc www.example.com?param2=abc

或者例如 www.example.com/abc/page.html?param1=abc www.example.com/abc/page.html?param2=abc

但可能内容非常相似，您将因重复内容而受到处罚，因此在第二种情况下应该有

www.example.com/abc/page.html?param1=abc -> [canonical = www.example.com/abc/page.html] www.example.com/abc/page.html?param2=abc -> [规范 = www.example.com/abc/page.html]

# ios - 标签栏消失

> ID：15361093
> 
> 赞同：2
> 
> 时间：2013-03-12T12:23:17.790
> 
> 标签：ios, xcode, cocoa-touch, uistoryboard, tabbarcontroller

我是 iOS 开发的新手，但我遇到了控制器问题。我简化了我的问题，让每个人的生活更轻松。

所以这是设置：根视图是标签栏控制器，它有 2 个标签，视图 A 和视图 B

视图 A 在使用完相机后启动相机，关闭相机，然后转到另一个名为视图 C 的视图，现在视图 C**不在**选项卡栏中。

单击视图 C 中有一个按钮，它会关闭当前视图并转到视图 B。这是问题所在：当我尝试从视图 C 加载到视图 B 选项卡栏消失时。

有谁知道如何解决这个问题？

视图 C 仅在拍照后才有用，因此将其添加到标签栏不是解决方案。

谢谢

**编辑：** 这是我如何在选项卡之间传递数据的代码：

**我如何从视图 A 调用视图 C：**

```
[self dismissViewControllerAnimated:YES completion:
 ^{
     UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
     ViewControllerA *A = [storyboard instantiateViewControllerWithIdentifier:@"ViewControllerA"];
     A.data1 = data1; 
     A.data2 = data2; 
     A.image = image; 
     [self presentViewController:A animated:YES completion:nil];
 }]; 
```

**我如何从视图 C 调用视图 B：**

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

{

```
if([segue.identifier isEqualToString:@"toViewB"]) {

    SomeClass *obj = [[SomeClass alloc] init];
    [obj setData1: _data1];
    [obj setData2: _data2.text];
    [obj setImage: _image];

    ViewControllerB *B = (ViewControllerB *)segue.destinationViewController;
    B.newObj = obj;
    [B createCell];
} 
```

}

我还想提一下，我添加到 ViewB 的按钮也消失了，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:35:00.043

以下是如何使用的简单示例`UITabBarController`

首先创建文件中的所有对象`UIViewController`并使用以下方法`UINavigationController``AppDelegate.h``AppDelegate.m`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window=[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds ]];

    self.viewCon=[[ViewController alloc] init];
    self.navCon=[[UINavigationController alloc] initWithRootViewController:self.viewCon];
    self.navCon.navigationBar.tintColor=[UIColor blackColor];
    self.viewCon.title=@"First View";

    self.fView=[[FirstViewController alloc] init];
    self.FnavCon=[[UINavigationController alloc] initWithRootViewController:self.fView];
    self.FnavCon.navigationBar.tintColor=[UIColor blackColor];

    self.fView.title=@"Secound View";

    self.sView=[[SecoundViewController alloc] init];
    self.SnavCon=[[UINavigationController alloc] initWithRootViewController:self.sView];
    self.SnavCon.navigationBar.tintColor=[UIColor blackColor];
    self.sView.title=@"Third View";
    .
    .
    // create UIViewController and UINavigationController As you need 
    .
    .
    .
    UIImage *img1=[UIImage imageNamed:@"Australia.gif"];
    self.tbItem1=[[UITabBarItem alloc] initWithTitle:@"First Page" image:img1 tag:1];
    self.viewCon.tabBarItem=self.tbItem1;

    UIImage *img2=[UIImage imageNamed:@"Cameroon.gif"];
    self.tbItem2=[[UITabBarItem alloc] initWithTitle:@"Secound Page" image:img2 tag:2];
    self.fView.tabBarItem=self.tbItem2;

    UIImage *img3=[UIImage imageNamed:@"Canada.png"];
    self.tbItem3=[[UITabBarItem alloc] initWithTitle:@"Third Page" image:img3 tag:3];
    self.sView.tabBarItem=self.tbItem3;

    NSMutableArray *viewArr=[[NSMutableArray alloc] init];
    [viewArr addObject:self.navCon];
    [viewArr addObject:self.FnavCon];
    [viewArr addObject:self.SnavCon];

    self.tbCon=[[UITabBarController alloc] init];
    self.tbCon.viewControllers=viewArr;

    [self.window addSubview:tbCon.view];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

# recursion - 如何证明递归算法的正确性？

> ID：15361097
> 
> 赞同：1
> 
> 时间：2013-03-12T12:23:29.923
> 
> 标签：recursion, correctness, induction

```
private static void swap(char[] str, int i, int j){
  char tmp = str[i];
  str[i] = str[j];
  str[j] = tmp;
}

public static void permute(String str){
  permute(str.toCharArray(), 0, str.length());
}

private static void permute(char[] str, int low, int high){
  if(low == high){
    System.out.println(str);
  } else {
    for(int i = low; i < high; i++){
      swap(str, low, i);
      permute(str, low+1, high);
      swap(str, low, i);
    }
  }
} 
```

我实现了一种用于字符串排列的递归方法。但是我有一个问题：如何用归纳法证明这段代码的正确性？我真的不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T06:02:04.783

首先，您必须具体说明*正确性*的含义（即，您要检查代码的规范；另请参见[https://stackoverflow.com/a/16630693/476803](https://stackoverflow.com/a/16630693/476803)）。让我们假设这里的*正确性*意味着

> 的每个输出`permute`都是给定字符串的排列。

然后我们可以选择对哪个自然数进行归纳。对于递归函数`permute`，我们可以在`low`或`high`或它们的某种组合之间进行选择。

在阅读实现时，很明显输出字符串的某些前缀的元素不会改变。此外，该前缀的长度在递归期间增加，因此长度为 的剩余后缀`high - low`减少。因此，让我们对 进行归纳`high - low`（假设`low <= high`，这是明智的，因为最初我们使用`0`低 和一些字符串的长度`high`，并且递归一旦停止`low == high`）。也就是说，我们展示

> **事实：**的每个输出都是 . 的最后一个字符的`permute(str, low, high)`排列。`high - low``str`

*   **基本情况：**假设`high - low = 0`。那么这个陈述是空洞的，因为它必须为最后一个`0`字符（即，没有）保留。

*   **步骤案例：**假设`high - low = n + 1`. 此外，作为*归纳假设*(IH)，我们可以假设该陈述对于 是正确的`n`。从`high - low = n + 1`我们有那个`high - (low + 1) = n`（因为`high`必须严格大于`low`for`high - low = n + 1`才能持有）。因此，根据 IH， 的每个输出都是 的最后一个字符的`permute(str, low+1, high)`排列。`high - (low + 1)``str`

    现在到了我们实际上必须证明一些事情的地步。也就是说，通过在由 生成的输出中`permute(str, low+1, high)`，将 的`low`第一个字符与（直到）`str`之后的任何字符交换，我们生成 和 之间的字符排列。这一步（我在这里省略了，因为我只是想展示原则上如何使用归纳法）结束了证明。`low``high``low``high`

最后，通过用for和for实例化上述**Fact** ，我们得到非递归的每个输出都是 的排列。`0``low``str.length``high``permute``str`

**注意：**上面的证明只表明每个输出*都是*一个排列。然而，知道实际上*所有*排列都被打印出来可能也很有趣。

# algorithm - 矩形网格算法中转弯最少的路径

> ID：15361098
> 
> 赞同：4
> 
> 时间：2013-03-12T12:23:31.050
> 
> 标签：algorithm, tiles-game

我在算法中被困了 4 天。我正在开发麻将 Safari 类型的游戏（[http://www.pogo.com/games/mahjongsafari](http://www.pogo.com/games/mahjongsafari)），我想在两个瓷砖之间开发路径，并且瓷砖数量最少。

我已经在曼哈顿 Hueristic 中应用了 A* 算法，但它会生成有很多转弯的最短路径。不需要最短路径，我只需要最小转弯的路径（最好是2）。下面是来自 Mahjong Safari 游戏的图像，它在 2 个磁贴之间生成路径。您会注意到从 A 到 B 的路径和从 B 到 A 的路径是不同的。

![在此处输入图像描述](../Images/04a2883bab2f86e072b360d63ace9588.png)

请以任何代码或任何算法名称或任何您认为可行的逻辑帮助我。

编辑：我申请的解决方案：

我首先使用真正的 A* 算法来寻找最短路径，并使用曼哈顿距离作为启发式目标估计。为了使路径更直，并选择转弯次数最少的路径，我在每次迭代中使用了以下策略：

```
Tile first = currentNode.parent;
Tile curr  = currentNode;
Tile last  = successorOfCurrentNode;
if (first != null)
{
    if ((first.X == curr.X && first.Y != curr.Y) && (curr.Y == last.Y && curr.X != last.X))
    {
        // We got turn
    currentNode.Cost += 10;
    currentNode.calcuateTotalCost();

        successorOfCurrentNode.Cost += 5;
    successorOfCurrentNode.calcuateTotalCost();
    }
    else if ((first.X != curr.X && first.Y == curr.Y) && (curr.X == last.X && curr.Y != last.Y))
    {
        // We got turn
    currentNode.Cost += 10;
    currentNode.calcuateTotalCost();

        successorOfCurrentNode.Cost += 5;
    successorOfCurrentNode.calcuateTotalCost();
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:33:13.277

您可以使用[Dijkstra 的最短路径算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，但在每个节点中，您不仅应该存储最短路径，还应该存储该路径的方向，这样您就知道是否需要增加计数。

再想一想，我想您需要在每个节点中存储*所有*最短路径及其方向，以便选择最佳路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:20:17.903

您的问题比使用启发式方法更简单，因为您不需要期望，但是如果您的搜索不是“完整”的，它可以提高找到最优值的速度......而是您只想要最小转弯的路径，因此，您可以使用贪婪搜索，其中：

```
h(A) > h(B) ~ turns(A) < turns(B)

h* = MIN(turns(x))

h(x): heuristic of path X

turns(x): number of turns in path X

h*: highest possible heuristic, path with minimum number of turns 
```

下面是一个简单的 Java 代码，用于说明：

```
class TileGame
{
    // example of a game board
    int [][] matrix = new int [10][10];

    // return possible next-state
    public ArrayList<Path> next (Path p)
    {
        // based on your rules, you decide valid transitions
        ArrayList<Path> n = new ArrayList<Path>();
        ArrayList<Point> t = new ArrayList<Point>();

        // add up, down, right, and left
        t.add(new Point(p.current.x+1, p.current.y));
        t.add(new Point(p.current.x-1, p.current.y));
        t.add(new Point(p.current.x, p.current.y+1));
        t.add(new Point(p.current.x, p.current.y-1));

        // don't allow going back to previous tile, cause infinite loops
        t.remove(p.previous);

        for (Point i : t)
        {
            if (i.x == p.current.x == p.previous.x || i.y == p.current.y == p.previous.y)
                n.add(new Path(i, p.current, p.turns));
            else
                n.add(new Path(i, p.current, p.turns+1));
        }

        return n;
    }

    // ..

}

private class Path
{
    public Point current, previous;
    public int turns;

    public Path(Point curr, Point prev, int tur)
    {
        current = curr;
        previous = prev;
        turns = tur;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:04:12.330

我为此申请的解决方案：

我首先使用真正的 A* 算法来寻找最短路径，并使用曼哈顿距离作为启发式目标估计。为了使路径更直，并选择转弯次数最少的路径，我在每次迭代中使用了以下策略：

```
enter code here

Tile first = currentNode.parent;
Tile curr  = currentNode;
Tile last  = successorOfCurrentNode;
if (first != null)
{
    if ((first.X == curr.X && first.Y != curr.Y) && (curr.Y == last.Y && curr.X != last.X))
    {
        // We got turn
        currentNode.Cost += 10;
        currentNode.calcuateTotalCost();

        successorOfCurrentNode.Cost += 5;
        successorOfCurrentNode.calcuateTotalCost();
    }
    else if ((first.X != curr.X && first.Y == curr.Y) && (curr.X == last.X && curr.Y != last.Y))
    {
        // We got turn
        currentNode.Cost += 10;
        currentNode.calcuateTotalCost();

        successorOfCurrentNode.Cost += 5;
        successorOfCurrentNode.calcuateTotalCost();
    }

} 
```

# c# - 3层架构——将sql查询放在业务层是否可以

> ID：15361103
> 
> 赞同：3
> 
> 时间：2013-03-12T12:23:39.363
> 
> 标签：c#, asp.net, architecture

我的 asp.net 项目基于三层架构。

（数据访问层）DAL -（类库）

```
 private static string connString ="";

    private static OracleConnection conn;

    public static OracleConnection OpenConn()
    {
        if (conn==null)
        {
            conn = new OracleConnection(connString);
        }
        if (conn.State != ConnectionState.Open)
        {
            conn.Open();
        }

        return conn;
    }

    public static DataTable Select(string query)
    {
        DataTable dt = new DataTable();
        OracleDataAdapter da = new OracleDataAdapter(query, OpenConn());
        da.Fill(dt);
        return dt;
    }

    public static void Execute(string query)
    {
        OracleCommand cmd = new OracleCommand(query, OpenConn());
        cmd.ExecuteNonQuery();
    } 
```

我已将所有查询放在（业务逻辑层）BLL 类中（所有 BLL 类都在单独的类库项目中）

例如 EmployeeBLL

```
public static class EmployeeBLL
{
    public static DataTable Employees()
    {
       DataTable dt = new DataTable();
        string q = string.Format("select * from employees");
        dt = OraDAL.Select(q);
        return dt;
    }

    public static DataTable AddEmployee(string name)
    {
        DataTable dt = new DataTable();
        string q = string.Format("INSERT INTO employees (ename) VALUES('{0}')", name);
        dt = OraDAL.Select(q);
        return dt;
    }
} 
```

我看过一些关于三层架构的博客文章，其中 sql 查询是在 BLL 中构建的，这就是为什么我开发了将 sql 查询保留在 BLL 中的项目，但现在我觉得我应该将它们移至 DAL。

所以我的问题是

1.  是否可以将 sql 查询保留在 BLL 中，或者我应该将它们移至 DAL？
2.  可以使用数据表在层之间移动数据还是我应该使用 DTO？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:27:39.750

```
Is it okay to keep sql queries in BLL or I should move them to DAL? 
```

没关系，但我认为这不是正确的做法。将它们放在它们所属的 DAL 中。

```
Is it okay to use datatables for moving data between layers or I should use DTO's instead? 
```

我更喜欢使用 DTO，我认为这是要走的路，但使用 DataTables 是可以接受的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:28:02.183

将应用程序分层的好处在于，如果您需要更改数据存储库，您可以轻松地做到这一点；另外，您可以使用模拟等单独测试您的对象。

如果您开始将 sql 查询等硬连线到业务对象中 - 比如说，迁移到 SQL 而不是 oracle 可能意味着重构业务层和数据层内的对象。

我个人认为业务对象不应该看到数据表。更好的方法是拥有数据层和业务层都引用的共享对象（或接口）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T12:35:39.437

您应该检查像 NHibernate 或 Entity Framework 4+ 这样的 ORM，但是当您使用 Oracle NHibernate 时，IMO 更好。

ORM 将基本上代表您的 DAL，它将负责以您当前映射到的数据库的方言为您创建 SELECT、INSERT、UPDATE 和 DELETE 语句。

它将允许您对域模型而不是表进行查询。这就是你想要做的。它将抽象您的数据库，以便您将来可以进行新的映射并将您的域对象映射到 MySQL。或者在一些内存数据库上做额外的映射，让你运行快速的集成测试。

学习 NHibernate（或其他 ORM）是一项投资，但如果您将来使用 .NET 和 RDBMS，IMO 值得您花时间。

# javascript - 多个子协议 Websocket Javascript 客户端和 Libwebsockets 服务器不工作

> ID：15361105
> 
> 赞同：2
> 
> 时间：2013-03-12T12:23:44.560
> 
> 标签：javascript, html, websocket

我正在尝试为演示创建一个简单的两个协议客户端和服务器。但是，当我在 websocket 的客户端初始化中指定两个子协议时，我总是在服务器端收到此消息：

```
[1363089953:1535] ERR: Req protocol SIGN_IN_OUT_REQUEST_PROTOCOL, GET_REQUEST_PROTOCOL not supported 
```

客户端Javascript代码：

```
 var host = 'ws://10.0.96.32:9000';
var webSocket = {};
var websocketStatus = {};

$(function() {

        function webSocketSupported() {
            if(window.MozWebSocket) {
                window.WebSocket = window.MozWebSocket;
            }
            return (window.webSocket != null);
        }

        if(!webSocketSupported) { 
           $(document).simpledialog2({
               mode: 'blank',
               headerClose: true,
               blankContent :
                       "<p>Websockets not supported by this browser. How about <a href='http://www.google.com/chrome'>Google Chrome</a>?</p>"+
                       "<a rel='close' data-role='button' href='#'>Close</a>"         
           }); 
        } else {

            $("#login_form").validate({
               rules:{
                   username: {required: true, minlength: 2},
                   password: {required: true, minlength: 4}
               },
               messages:{
                   username: {required: "Username is required",
                              minlength: "Username must be atleast 2 characters"},
                   password: {required: "Password is required",
                              minlength: "Password must be atleast 4 characters"}
               } 
            });

            /** Setting up WebSocket **/
            webSocket = new WebSocket(host, 'SIGN_IN_OUT_REQUEST_PROTOCOL', 'GET_REQUEST_PROTOCOL');
            webSocket.binaryType = "arraybuffer";
            webSocket.onopen = onopen;
            webSocket.onmessage = onmessage;
            webSocket.onclose = onclose;
            webSocket.onerror = onerror;           
        }
});

function onopen() {
    $('#connectionStatus').text("Connected");
    $('#connectionStatus').buttonMarkup({theme: 'b'});
    $("#connectionStatus").data('icon', 'check'); 
    $("#connectionStatus .ui-icon").addClass("ui-icon-check").removeClass("ui-icon-alert");
    $('#login_info').append("Sub-protocol: "+webSocket.protocol+"\n");
}

function onmessage(event) {
    var data = new DataView(event.data);
    if(data.getUint8(data.byteLength - 1) == 1) {
        $('#login_info').append("Login Attempt Successful");
        $.mobile.loadPage("mobileApp.html");
        $.mobile.changePage("mobileApp.html")
    }
    else {
        $('#login_info').append("Login Attempt Unsuccessful");
        $('#username').val("");
        $('#password').val("");
    }
}

function onclose() {
    $('#connectionStatus').text("Connection Closed");
    $('#connectionStatus').buttonMarkup({theme: 'a'});
    $("#connectionStatus").data('icon', 'alert'); 
    $("#connectionStatus .ui-icon").addClass("ui-icon-alert").removeClass("ui-icon-alert");
}

function onerror() {
    $('#connectionStatus').text("Connection Error");
    $('#connectionStatus').buttonMarkup({theme: 'a'});
    $("#connectionStatus").data('icon', 'alert'); 
    $("#connectionStatus .ui-icon").addClass("ui-icon-alert").removeClass("ui-icon-alert");
}

function initialize() {
    $('#login_info').val("");
    $('#username').val("");
    $('#password').val("");
    $('#connectionStatus').text("Connection Closed");
    $('#connectionStatus').buttonMarkup({theme: 'a'});
    $("#connectionStatus").data('icon', 'alert'); 
    $("#connectionStatus .ui-icon").addClass("ui-icon-alert").removeClass("ui-icon-alert");
}

function sendLoginRequest(event) {
    var i = 0;
    event.preventDefault();
    if($("#login_form").valid()) {
        var username = $("#username").val();
        var password = $("#password").val();
        var loginRequest = new Uint8Array(calculateBufferLength());
        loginRequest[i++] = 0x13; //User Accounts IP
        loginRequest[i++] = 0x13; //Sign In/Sign Out Request
        loginRequest[i++] = 0x07; //Sign In
        loginRequest[i++] = username.length;
        loginRequest[i++] = password.length;

        //Pushing username
        for(var j=0; j < username.length; j++) {
            loginRequest[i++] = username.charCodeAt(j);
        }

        //Pushing password
        for(var j=0; j < password.length; j++) {
            loginRequest[i++] = password.charCodeAt(j);
        }

        webSocket.send(loginRequest.buffer);
        $("#login_info").append("Login request sent with\nUsername: "+username+"\nPassword: "+password+"\n");
    }
}

function calculateBufferLength() {
    var opIPLength = 1;
    var modeLength = 1;
    var subModeLength = 1;
    var UserNamePasswordlengths = 2;
    var userNameLength = $("#username").val().length;
    var passwordLength = $("#password").val().length;
    return (opIPLength + modeLength + subModeLength + UserNamePasswordlengths + userNameLength + passwordLength);
} 
```

服务器 C/C++ 代码 (Libwebsockets)

```
 #include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <string>
#include <vector>
#include <libwebsockets.h>

using namespace std;

typedef enum {
    USER_ACCOUNTS_IP_REQUEST,
    MODE,
    SUB_MODE,
    USER_NAME_LENGTH,
    PASSWORD_LENGTH
}user_accounts_ip_request_t;

typedef enum {
    USER_ACCOUNTS_IP_RESPONSE,
    RESPONSE_IP
}user_accounts_ip_response_t;

int Hex_to_Dec(unsigned char *array, int size);
void sendLoginResponse(struct libwebsocket *wsi, void *in_buffer, size_t bufferlen, struct per_session_data__binary *out_buffer);
void printSocketInfo(struct libwebsocket *wsi, struct libwebsocket_context *currentContext);

struct per_session_data__binary
{
    unsigned int len;
    unsigned char buf[sizeof(LWS_SEND_BUFFER_PRE_PADDING) + 1024 + sizeof(LWS_SEND_BUFFER_POST_PADDING)];
};

static int callback_http(struct libwebsocket_context *currentContext,
                         struct libwebsocket *wsi,
                         enum libwebsocket_callback_reasons reason, void *user,
                         void *in, size_t len)
{
    return 0;
}

static int callback_sign_in_out_request(struct libwebsocket_context *currentContext,
                                   struct libwebsocket *wsi,
                                   enum libwebsocket_callback_reasons reason,
                                   void *user, void *in, size_t len)
{
    struct per_session_data__binary *psb = (per_session_data__binary *)user;   ////////

    switch (reason) {
        case LWS_CALLBACK_ESTABLISHED: // just log message that someone is connecting
            printf("connection established\n");
            break;
        case LWS_CALLBACK_PROTOCOL_INIT:
            printf("LWS_CALLBACK_PROTOCOL_INIT\n");
            break;
        case LWS_CALLBACK_CLIENT_CONNECTION_ERROR:
            printf("LWS_CALLBACK_CLIENT_CONNECTION_ERROR\n");
            break;
        case LWS_CALLBACK_CLIENT_FILTER_PRE_ESTABLISH:
            printf("LWS_CALLBACK_CLIENT_FILTER_PRE_ESTABLISH\n");
            break;
        case LWS_CALLBACK_RECEIVE: {
            printf("Binary frame received decoding packet...\n");
            sendLoginResponse(wsi, in, len, psb);
        }
            break;
        default:
                    break;
    }
        return 0;
}

static int callback_get_request(struct libwebsocket_context *currentContext,
        struct libwebsocket *wsi,
        enum libwebsocket_callback_reasons reason,
        void *user, void *in, size_t len)
{
    return 0;
}

static struct libwebsocket_protocols protocols[] = {
    /* first protocol must always be HTTP handler */
    {
        "http-only",   // name
        callback_http, // callback
        0              // per_session_data_size
    },
    {
        "SIGN_IN_OUT_REQUEST_PROTOCOL", // protocol name - very important!
        callback_sign_in_out_request,   // callback
        sizeof(struct per_session_data__binary)              // we don't use any per session data
    },
    {
        "GET_REQUEST_PROTOCOL",
        callback_get_request,
        sizeof(struct per_session_data__binary)
    },
    {
        NULL, NULL, 0   /* End of list */
    }
};

int main(void) {
        // server url will be http://localhost:9000
        int port = 9000;
        const char *interface = NULL;
        struct libwebsocket_context *context;
        struct lws_context_creation_info info;
        // we're not using ssl
        const char *cert_path = NULL;
        const char *key_path = NULL;
        // no special options
        int opts = 0;

    info.port = port;
    info.iface = interface;
    info.protocols = protocols;
    info.extensions = libwebsocket_get_internal_extensions();
    info.ssl_cert_filepath = cert_path;
    info.ssl_private_key_filepath = key_path;
    info.ssl_ca_filepath = NULL;
    info.gid = -1;
    info.uid = -1;
    info.options = opts;
    info.user = NULL;
    //info.ka_time = 0;
    //info.ka_probes = 100;
    //info.ka_interval= 60;

    context = libwebsocket_create_context(&info);

        if (context == NULL) {
            fprintf(stderr, "libwebsocket init failed\n");
            return -1;
    }

        printf("starting server...\n");

    // infinite loop, to end this server send SIGTERM. (CTRL+C)
    while (1) {
            libwebsocket_service(context, 50);
        //printf("after service\n");
            // libwebsocket_service will process all waiting events with their
            // callback functions and then wait 50 ms.
            // (this is a single threaded webserver and this will keep our server
            // from generating load while there are not requests to process)
    }
        libwebsocket_context_destroy(context);

        return 0;
}

void sendLoginResponse(struct libwebsocket *wsi, void *in_buffer, size_t bufferlen, struct per_session_data__binary *out_buffer)
{
    vector<string> userNames, passwords;
    string userName, password;
    bool loginValid = false;
    int usernameLength, passwordLength;
    int usernamePos, passwordPos;

    userNames.push_back("Nautel");
    passwords.push_back("password");

    //Print Login Request Data
    char* loginRequest = (char*) in_buffer;
    usernameLength = loginRequest[USER_NAME_LENGTH];
    passwordLength = loginRequest[PASSWORD_LENGTH];
    usernamePos = PASSWORD_LENGTH + 1;
    passwordPos = usernamePos + usernameLength;

    //Get Username
    for(int i=usernamePos; i < (usernamePos+usernameLength); i++) {
        userName.push_back(loginRequest[i]);
    }

    //Get Password
    for(int i=passwordPos; i < (passwordPos + passwordLength); i++) {
        password.push_back(loginRequest[i]);
    }

    printf("Username: %s Password: %s\n", userName.c_str(), password.c_str());

    for(int i=0; i < userNames.size(); i++) {
        loginValid = (!userName.compare(userNames[i]) && !password.compare(passwords[i]));
        if(loginValid) break;
    }

    out_buffer->buf[USER_ACCOUNTS_IP_RESPONSE] = 0x13;
    out_buffer->buf[RESPONSE_IP] = (loginValid) ? 0x01 : 0x00;
    out_buffer->len = 2;
    libwebsocket_write(wsi, out_buffer->buf,  out_buffer->len, LWS_WRITE_BINARY);
}

void printSocketInfo(struct libwebsocket *wsi, struct libwebsocket_context *currentContext){
    char name[128];
    int name_len=sizeof(name);
    char rip[16];
    int rip_len= sizeof(rip);
    int fd;

    fd = libwebsocket_get_socket_fd(wsi);
    libwebsockets_get_peer_addresses (currentContext, wsi, fd, name, name_len, rip, rip_len);

    printf("Name: %s, IP: %s\n", name, rip);
} 
```

是否可以让客户端具有由单个服务器支持的多个子协议，反之亦然。或者我是否需要从客户端到服务器的多个 websocket 连接以用于不同的协议。

问候， Shreyas

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T17:18:39.160

WebSocket 客户端可以宣布支持多个 WebSocket 子协议，但服务器必须从客户端宣布的列表中选择一个子协议（它支持）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T12:51:50.693

在握手期间，服务器端支持的子协议列表被发送到客户端。客户端也发送它的列表。**它们必须至少有一个共同的子协议。**

您可以实现自己的子协议或使用现有[的](https://www.iana.org/assignments/websocket/websocket.xml#subprotocol-name)子协议。

例如，对于使用[libwebsockets](https://github.com/warmcat/libwebsockets)库（C/C++）和 javascript websocket 客户端的 websocket 服务器，如果您实现自己的子协议：

**服务器端 ：**

```
static struct libwebsocket_protocols protocols[] = {
    {
        "http-only",
        callback_http, 
        0              
    },
    {
        "MySubProtocol",
        dedicated_callback_function,
        sizeof(struct per_session_data__binary)              
    }
} 
```

**客户端 ：**

```
var exampleSocket = new WebSocket("ws://www.example.com/socketserver", "MySubProtocol"); 
```

更多信息[在这里](https://developer.mozilla.org/fr/docs/WebSockets/Writing_WebSocket_client_applications)和[这里](https://github.com/warmcat/libwebsockets/issues/834)

# iphone - 用于标识对象存在于集合中的谓词

> ID：15361110
> 
> 赞同：0
> 
> 时间：2013-03-12T12:23:53.407
> 
> 标签：iphone, core-data, nspredicate

我有一个多对多的关系。我在多个服务器中处理了测试，并且服务器包含多个测试。两者都有名称作为属性。我必须得到所有`testTypes`选择服务器作为服务器子集的服务器（关系属性）。服务器属性将是一个集合。我尝试使用`[NSPredicate predicateWithFormat:@"servers contains %@",server]]`or `[NSPredicate predicateWithFormat:@"servers.name contains %@",[server name]]]`。

因此，在我的 tableView 中，一旦我选择了一个特定的服务器，它应该显示所有将 tat 服务器作为子集的 testTypes。我在网络中找不到任何适合这样做的东西。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:12:52.740

要查找`testTypes`与 相关的所有对象`self.server`，请使用

```
[NSPredicate predicateWithFormat:@"ANY servers = %@", self.server]] 
```

# ruby-on-rails - minitest 路由测试

> ID：15361111
> 
> 赞同：2
> 
> 时间：2013-03-12T12:23:57.353
> 
> 标签：ruby-on-rails, ruby, minitest

我使用 minitest 来测试框架。我尝试测试路线。

```
routes.rb

match "/auth/:provider/callback", to: "sessions#create", :as => sessioncallback 
```

我想测试这条路线。我尝试如下代码：

```
assert_routing "/auth/:provider/callback", :controller => "sessions", :action => "create", "provider"=>"identity" 
```

但是我没有从这个路由测试中获得成功。它给：

```
ActionController::RoutingError: No route matches {:controller=>"sessions", :action=>"create"} 
```

我跑了`rake routes`命令。我的路线如下：

```
 sessions GET     /sessions(.:format)                sessions#index
            POST     /sessions(.:format)                sessions#create
 new_session GET     /sessions/new(.:format)            sessions#new
edit_session GET     /sessions/:id/edit(.:format)       sessions#edit
     session GET     /sessions/:id(.:format)            sessions#show
             PUT     /sessions/:id(.:format)            sessions#update
          DELETE     /sessions/:id(.:format)            sessions#destroy
 sessioncallback     /auth/:provider/callback(.:format) sessions#create 
```

我该如何解决这个问题？我等你的想法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:46:49.737

您忘记在您的路线中替换 :provider 参数。试试这个：

```
assert_routing "/auth/identity/callback", 
  :controller => "sessions",
  :action => "create",
  "provider"=>"identity" 
```

# php - PHP 会员重置密码表单未提交（又是我）

> ID：15361118
> 
> 赞同：0
> 
> 时间：2013-03-12T12:24:19.643
> 
> 标签：php

再次嗨，我几乎完成了网站的 gubbings，但我不知道为什么这个重置密码页面没有通过任何它的程序。我确定这又是一件小事，但我看不到它，似乎我的重置按钮根本不起作用，但当我调用它时它的拼写正确，而且据我所知，所有括号都是正确的。我敢肯定，我越习惯这些错误，我自己就越会发现它们。为愚蠢的问题道歉。

这是我的代码：

```
<?php
error_reporting (E_ALL ^ E_NOTICE);
session_start();
$userid = $_SESSION['userid'];
$username = $_SESSION['username'];
?>
<html>
<head>
<title> Member system : Forgot password</title>
</head>
<body>
<?php
if(!$username && !$userid) {

    if($_POST['resetbtn']) {
        //get form data
        $user = $_POST['user'];
        $email = $_POST['email'];

        //make sure info provided
        if($user) {
            if($email) {
                if((strlen($email) > 7) && (strstr($email, "@")) &&    (strstr($email, ".")) ) {
                    require("./connect.php");

                    $query = mysql_query("SELECT * FROM user WHERE   username='$user'");
                    $numrows = mysql_num_rows($query);
                    if($numrows == 1) {
                        // info about account
                        $row = mysql_fetch_assoc($query);
                        $dbemail = $row['email'];

                        //make sure email is correct
                        if($email == $dbemail) {
                            // generate a password
                            $pass = rand();
                            $pass = md5($pass);
                            $pass = substr($pass, 0, 15);
                            $password =   md5(md5("12345".$pass."54321"));

                            //update db with new pass
                            mysql_query("UPDATE user SET  password='$password' WHERE username='$user'");

                            //make sure password was changed
                            $query = mysql_query("SELECT * FROM  user WHERE username='$user' AND password='$password'");
                            $numrows = mysql_num_rows($query);
                            if($numrows == 1) {
                                //create our email variables
                                $webmaster =  "mwilkins877@gmail.com";
                                $headers = "From:  Mike<$webmaster>";
                                $subject = "Your new password";
                                $message = "Your password has been reset, your new password is below. \n";
                                $message .= "Password: $pass\n";

                                echo $pass."<br/>";
                                if(mail($email, $subject, $message, $headers)) {
                                    echo "Your password has been reset an email has been sent with your new password";
                                }
                                else
                                    echo "An error has occured and your email wasnt sent containing your new password";
                            }
                            else
                                echo "An error has occured and the password was not set";
                        }
                        else
                            echo "You have entered the wrong email address";

                    }
                    else 
                        echo "The user name was not found";

                    mysql_close();
                }
                else "Please enter a valid email address";
            }
            else
                echo "please enter your email";
        }
        else
            echo "Please enter your user name";
    }
    else
        echo"<from action='./forgotpass.php' method='post'>
        <table>
        <tr>
            <td>User name</td>
            <td><input type='text' name='user'/></td>
        </tr>
        <tr>
            <td>email</td>
            <td><input type='text' name='email'/></td>
        </tr>
        <tr>
            <td></td>
            <td><input type='submit' name='resetbtn' value='Reset password'/>  </td>
        </tr>
        </table>
        </form>";
}
else
    echo "Please log out to view this page";
?>
</body>
</html> 
```

我会很感激你在这方面的帮助，因为这只是我为了好玩而学习的。期待听到有人希望的回音。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:29:35.207

请更正表格的拼写

```
echo"<from action='./forgotpass.php' method='post'> 
```

至

```
echo"<form action='./forgotpass.php' method='post'> 
```

希望这能解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:49:51.647

试试这个。它为我工作。

```
<?php
error_reporting (E_ALL ^ E_NOTICE);
session_start();
$userid = $_SESSION['userid'];
$username = $_SESSION['username'];
?>
<body>
<?php
if(!$username && !$userid) {

    if($_POST['resetbtn']) {
        //get form data
        $user = $_POST['user'];
        $email = $_POST['email'];

        //make sure info provided
        if($user) {
            if($email) {
                if((strlen($email) > 7) && (strstr($email, "@")) &&    (strstr($email, ".")) ) {
                    require("./connect.php");

                    $query = mysql_query("SELECT * FROM user WHERE   username='$user'");
                    $numrows = mysql_num_rows($query);
                    if($numrows == 1) {
                        // info about account
                        $row = mysql_fetch_assoc($query);
                        $dbemail = $row['email'];

                        //make sure email is correct
                        if($email == $dbemail) {
                            // generate a password
                            $pass = rand();
                            $pass = md5($pass);
                            $pass = substr($pass, 0, 15);
                            $password =   md5(md5("12345".$pass."54321"));

                            //update db with new pass
                            mysql_query("UPDATE user SET  password='$password' WHERE username='$user'");

                            //make sure password was changed
                            $query = mysql_query("SELECT * FROM  user WHERE username='$user' AND password='$password'");
                            $numrows = mysql_num_rows($query);
                            if($numrows == 1) {
                                //create our email variables
                                $webmaster =  "mwilkins877@gmail.com";
                                $headers = "From:  Mike<$webmaster>";
                                $subject = "Your new password";
                                $message = "Your password has been reset, your new password is below. \n";
                                $message .= "Password: $pass\n";

                                echo $pass."<br/>";
                                if(mail($email, $subject, $message, $headers)) {
                                    echo "Your password has been reset an email has been sent with your new password";
                                }
                                else
                                    echo "An error has occured and your email wasnt sent containing your new password";
                            }
                            else
                                echo "An error has occured and the password was not set";
                        }
                        else
                            echo "You have entered the wrong email address";

                    }
                    else 
                        echo "The user name was not found";

                    mysql_close();
                }
                else "Please enter a valid email address";
            }
            else
                echo "please enter your email";
        }
        else
            echo "Please enter your user name";
    }
    else
        echo"<form action='./forgotpass.php' method='post'>
        <table>
        <tr>
            <td>User name</td>
            <td><input type='text' name='user'/></td>
        </tr>
        <tr>
            <td>email</td>
            <td><input type='text' name='email'/></td>
        </tr>
        <tr>
            <td></td>
            <td><input type='submit' name='resetbtn' value='Reset password'/>  </td>
        </tr>
        </table>
        </form>"; 
```

# java - PDF 中带有水平分页符的表格

> ID：15361120
> 
> 赞同：23
> 
> 时间：2013-03-12T12:24:29.990
> 
> 标签：java, pdf-generation, layout-engine

有人知道 Java 的（最好是开源的）PDF 布局引擎，能够呈现带有水平分页符的表格吗？“水平分页”至少是该功能在 BIRT 中的命名方式，但要澄清一下：如果表格有太多列无法适应可用页面宽度，我希望表格在多个页面上水平拆分，例如10 列的表，第一页输出第 1-4 列，第二页输出第 5-10 列。*如果表格的行*数过多而无法垂直放置在一页上，那么这当然也应该在后面的页面上重复。

到目前为止，搜索产品非常困难。我估计这样的功能在其他产品中可能会有不同的命名方式，让阿姨谷歌很难找到合适的解决方案。

到目前为止，我已经尝试过：

*   BIRT 声称支持这一点，但实际的实现有很多错误，以至于无法使用。我认为这样的功能是不言而喻的，行高在所有页面上保持一致，从而可以在将页面彼此相邻放置时对齐行。然而，BIRT 会为每个页面分别计算所需的行高。

*   贾斯珀没有支持。

*   我也考虑过 Apache FOP，但我在 XSL-FO 规范中没有找到任何合适的语法。

*   无论如何，iText 通常对于此任务来说有点太“低级”（使得布局预期 PDF 文档的其他部分变得困难），但似乎不提供支持。

由于似乎有几十个其他报告或布局引擎，可能适合也可能不适合，我发现很难准确猜测要查找的内容，我希望有人可能已经有类似的要求并且至少可以提供一个正确方向的建议。产品可以很容易地集成到 Java 服务器应用程序中是相对重要的，本地 Java 库将是理想的。

![预期布局](../Images/e49f36b5980a015943b38afd1a28f573.png)

现在，要保持所有页面的行对齐，必须按如下方式计算行高：

```
Row1.height = max(A1.height, B1.height, C1.height, D1.height)
Row2.height = max(A2.height, B2.height, C2.height, D2.height) 
```

虽然 BIRT 目前似乎在做类似的事情：

```
Page1.Row1.height = max(A1.height, B1.height)
Page2.Row1.height = max(C1.height, D1.height)
Page1.Row2.height = max(A2.height, B2.height)
Page2.Row2.height = max(C2.height, D2.height) 
```

![第二种布局](../Images/a3852ae9010e97065364c829987299bb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T20:51:05.980

可以使用`iText`. 您需要使用自定义表格定位和自定义行列写入。

我能够调整[这个 iText 示例](http://itextpdf.com/examples/iia.php?id=90)以水平和垂直地在多个页面上书写。这个想法是记住在页面上垂直进入的开始行和结束行。我已经把整个代码，所以你可以很容易地运行它。

```
public class Main {
    public static final String RESULT = "results/part1/chapter04/zhang.pdf";

    public static final float PAGE_HEIGHT = PageSize.A4.getHeight() - 100f;

    public void createPdf(String filename)
            throws IOException, DocumentException {

        // step 1
        Document document = new Document();
        // step 2
        PdfWriter writer
                = PdfWriter.getInstance(document, new FileOutputStream(filename));
        // step 3
        document.open();

        //setup of the table: first row is a really tall one
        PdfPTable table = new PdfPTable(new float[] {1, 5, 5, 1});

        StringBuilder sb = new StringBuilder();

        for(int i = 0; i < 50; i++) {
            sb.append("tall text").append(i + 1).append("\n");
        }

        for(int i = 0; i < 4; i++) {
            table.addCell(sb.toString());
        }

        for (int i = 0; i < 50; i++) {
            sb = new StringBuilder("some text");
            table.addCell(sb.append(i + 1).append(" col1").toString());

            sb = new StringBuilder("some text");
            table.addCell(sb.append(i + 1).append(" col2").toString());

            sb = new StringBuilder("some text");
            table.addCell(sb.append(i + 1).append(" col3").toString());

            sb = new StringBuilder("some text");
            table.addCell(sb.append(i + 1).append(" col4").toString());
        }

        // set the total width of the table
        table.setTotalWidth(600);
        PdfContentByte canvas = writer.getDirectContent();

        ArrayList<PdfPRow> rows = table.getRows();

        //check every row height and split it if is taller than the page height
        //can be enhanced to split if the row is 2,3, ... n times higher than the page  
        for (int i = 0; i < rows.size(); i++) {
            PdfPRow currentRow = rows.get(i);

            float rowHeight = currentRow.getMaxHeights();

            if(rowHeight > PAGE_HEIGHT) {
                PdfPRow newRow = currentRow.splitRow(table,i, PAGE_HEIGHT);
                if(newRow != null) {
                    rows.add(++i, newRow);
                }
            }
        }

        List<Integer[]> chunks = new ArrayList<Integer[]>();

        int startRow = 0;
        int endRow = 0;
        float chunkHeight = 0;

        //determine how many rows gets in one page vertically
        //and remember the first and last row that gets in one page
        for (int i = 0; i < rows.size(); i++) {
            PdfPRow currentRow = rows.get(i);

            chunkHeight += currentRow.getMaxHeights();

            endRow = i;   

            //verify against some desired height
            if (chunkHeight > PAGE_HEIGHT) {
                //remember start and end row
                chunks.add(new Integer[]{startRow, endRow});
                startRow = endRow;
                chunkHeight = 0;
                i--;
            }
        }

        //last pair
        chunks.add(new Integer[]{startRow, endRow + 1});

        //render each pair of startRow - endRow on 2 pages horizontally, get to the next page for the next pair
        for(Integer[] chunk : chunks) {
            table.writeSelectedRows(0, 2, chunk[0], chunk[1], 236, 806, canvas);
            document.newPage();
            table.writeSelectedRows(2, -1, chunk[0], chunk[1], 36, 806, canvas);

            document.newPage();
        }

        document.close();
    }

    public static void main(String[] args) throws IOException, DocumentException {
        new Main().createPdf(RESULT);
    }
} 
```

**我知道这`iText`对于报告来说可能太低了，但它可以与标准报告工具一起使用，以满足此类特殊需求。**

**更新：**现在首先拆分高于页面高度的行。如果行高 2、3、...、n 倍，则代码不会进行拆分，但也可以对此进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:28:32.670

这里的想法与 Dev Blanked 相同，但使用 wkhtmltopdf ( [https://code.google.com/p/wkhtmltopdf/](https://code.google.com/p/wkhtmltopdf/) ) 和一些 javascript，您可以实现您所需要的。[当针对这个小提琴](http://jsfiddle.net/RmdpJ/4/)运行 wkhtmltopdf 时，您会得到如下所示的结果（pdf 页面的屏幕截图）。您可以将“break-after”类放在标题行的任何位置。我们在 Java EE Web 应用程序中使用 wkhtmltopdf 服务器端来生成动态报告，性能实际上非常好。

HTML

```
<body>
        <table id="table">
            <thead>
                <tr><th >Header 1</th><th class="break-after">Header 2</th><th>Header 3</th><th>Header 4</th></tr>
            </thead>
            <tbody>
                <tr valign="top">
                    <td>A1<br/>text<br/>text</td>
                    <td>B1<br/>text</td>
                    <td>C1</td>
                    <td>D1</td>
                </tr>
                <tr valign="top">
                    <td>A2</td>
                    <td>B2<br/>text<br/>text<br/>text</td>
                    <td>C2</td>
                    <td>D2<br/>text</td>
                </tr>
            </tbody>
        </table>
    </body> 
```

脚本

```
$(document).ready(function() {
    var thisTable = $('#table'),
        otherTable= thisTable.clone(false, true),
        breakAfterIndex = $('tr th', thisTable).index($('tr th.break-after', thisTable)),
        wrapper = $('<div/>');

    wrapper.css({'page-break-before': 'always'});
    wrapper.append(otherTable);
    thisTable.after(wrapper);
    $('tr', thisTable).find('th:gt(' + breakAfterIndex + ')').remove(); 
    $('tr', thisTable).find('td:gt(' + breakAfterIndex + ')').remove(); 
    $('tr', otherTable).find('th:lt(' + (breakAfterIndex + 1) + ')').remove(); 
    $('tr', otherTable).find('td:lt(' + (breakAfterIndex + 1) + ')').remove();

    $('tr', table).each(function(index) {
        var $this =$(this),
            $otherTr = $($('tr', otherTable).get(index)),
            maxHeight = Math.max($this.height(), $otherTr.height());
        $this.height(maxHeight);
        $otherTr.height(maxHeight);      
    });
}); 
```

![生成的 PDF 的屏幕截图](../Images/554506df3c2c1dc96f84fedeeb2bef66.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:24:04.483

> *贾斯珀没有支持。*

根据 Jasper 文档，它确实有支持，通过：

*   分栏元素（即具有 type=column 属性的分栏元素）。这可以放置在报告中的任何位置。
*   组/标题上的 isStartNewColumn 属性

See [http://books.google.com.au/books?id=LWTbssKt6MUC&pg=PA165&lpg=PA165&dq=jasper+reports+%22column+break%22&source=bl&ots=aSKZfqgHR5&sig=KlH4_OiLP-cNsBPGJ7yzWPYgH_k&hl=en&sa=X&ei=h_1kUb6YO6uhiAeNk4GYCw&redir_esc=y#v =onepage&q=column%20break&f=false](http://books.google.com.au/books?id=LWTbssKt6MUC&pg=PA165&lpg=PA165&dq=jasper%20reports%20%22column%20break%22&source=bl&ots=aSKZfqgHR5&sig=KlH4_OiLP-cNsBPGJ7yzWPYgH_k&hl=en&sa=X&ei=h_1kUb6YO6uhiAeNk4GYCw&redir_esc=y#v=onepage&q=column%20break&f=false)

如果你真的卡住了，作为最后的手段，你可以使用 Excel / OpenOffice Calc：手动将数据复制到单元格中，根据需要手动格式化，另存为 xls 格式。然后使用 java 中的 apache POI 动态填充/替换所需数据并打印到文件/PDF。至少它对列和行格式/中断/边距等提供了非常细粒度的控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T10:45:54.487

我的建议是使用 FOP 变压器。

[在这里](http://xmlgraphics.apache.org/fop/0.95/embedding.html)您可以看到一些示例以及如何使用它。

[在这里](http://xmlgraphics.apache.org/fop/fo.html#fo-center-table-horizon)您可以找到一些带有 fop 和表格的示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T14:44:25.530

您是否尝试过[http://code.google.com/p/flying-saucer/](http://code.google.com/p/flying-saucer/)。它应该将 HTML 转换为 PDF。

# javascript - jquery：动态地将li项目附加到ul然后添加click，但是click贯穿每个li

> ID：15361123
> 
> 赞同：0
> 
> 时间：2013-03-12T12:24:39.520
> 
> 标签：javascript, jquery, html

所以我可能在学习时遇到了这个错误，但我似乎无法弄清楚我在这里做错了什么（可能是简单的错误，但我遇到了麻烦）。所以我试图在标记内有一个按钮单击，允许从对话框中进行选择，对话框上的提交按钮包括对执行一些逻辑然后将字符串附加到类似的自定义函数的调用：

```
buildListElementItem += "<li>something</li>";
$("#my-list").append(buildListElementItem); 
```

然后绑定单击，因为我需要这些列表项中的每一个来代表选择面板类型的事物

```
$("#my-list li").bind('click', function () {
   //processing stuff
}); 
```

一切正常，但是如果我在此列表中添加多个项目（一个接一个）并且您单击一个项目，它会遍历每个项目，这让我感到困惑，因为没有每个项目，我认为这只应该将它添加到单品……

所以这个功能/等等还有很多，但我认为我在这里的方法是错误的？

我尝试将选择器修改为喜欢我在 li 的字符串中添加的类，我尝试使用 .on、.live、.delegate 或任何我能找到的东西来代替绑定单击。

也许这是尝试执行此操作的简单方法类型错误，但我将非常感谢任何帮助、建议等。

编辑：只是添加更多澄清

对话框允许用户从选择/下拉列表中选择项目，并且按钮单击（jquery ui）具有调用下面的想法将项目添加到列表元素的功能，该列表元素用作选择面板。因此他们可以在面板上填充所需的项目，然后单击每个项目以填充数据并将数据与该项目相关联。

```
function addNewListItem(passedType)
{
    var buildListElementItem = "<li>" + passedType + "</li>";
    $("#my-list").append(buildListElementItem);
    $("#my-list li").bind('click', function () {
       otherStuff();
}); 
```

如果我执行上述操作，我猜这会导致每个元素一遍又一遍地绑定？不确定，但是除了当我单击该面板上的单个 li 项目时，它会处理面板上的所有 li 项目（otherStuff 函数）。所以我想从这些例子中我开始理解这个问题或者为什么这不起作用，但是我将如何处理我想要做的事情呢？一直很感激伙计们！}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:36:02.430

当你说“没有 each”时，你忽略`$("#my-list li")`了 jQuery 选择器，即它返回与表达式匹配的所有元素：在这种情况下，#my-list 的子树中的所有 li 项。因此，当您调用 bind 时，它将绑定到已添加到元素的每个 li 项目。

您正在寻找的是这样的东西：

```
buildListElementItem = $("<li>something</li>"); //constructs a jquery object you can bind to
buildListElementItem.bind('click', function () {
   //processing stuff
});
$("my-list").append(buildListElementItem); 
```

This way, you bind before the element has been added.

# python - 计算两条曲线之间的面积（即正态分布）

> ID：15361125
> 
> 赞同：2
> 
> 时间：2013-03-12T12:24:46.523
> 
> 标签：python, matplotlib, scipy, numeric

我需要计算两条曲线之间的面积。我有很多数据，所以我想以编程方式进行。

基本上，我总是有 2 个正态分布，由平均值和标准差计算得出。然后我想计算它们相交的程度。这是我的意思的一个[例子](https://stats.stackexchange.com/questions/12209/percentage-of-overlapping-regions-of-two-normal-distributions)，还有 R 中的一些代码（我不知道）。

`matplotlib`或`scipy`其他模块中是否已经有一个功能可以为我做这件事？如果我必须自己实现它，我认为我应该这样做：

*   找到交叉点（最多 2 个）
*   查看交叉点之前、[之间]和之后哪个函数较低
*   计算下函数的积分并将它们加在一起

是对的吗？我怎样才能完成单个步骤？是否有可以提供帮助的功能、模块等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:34:30.643

我也不知道 R，但答案似乎在您提供的链接中：只需集成您的最小分布。您不需要找到交叉点，只需`min(f(x), g(x))`输入`scipy.integrate.quad`.

# jquery - ASP CLassic JSON 标头问题

> ID：15361127
> 
> 赞同：0
> 
> 时间：2013-03-12T12:24:54.483
> 
> 标签：jquery, ajax, json, asp-classic

任何想法为什么这会为我的 jquery ajax 调用大惊小怪。

```
Sub SetJsonHeader()
    Response.AddHeader "Content-Type", "application/json"
End Sub

something = Request.Form( "formLabel" )
SetJsonHeader()
Response.Write( "{ something: """ & something & """ }" ) 
```

response.write 正在返回正确的字符串 { something: "blabla" } 但是当我用我的 javascript 调用它时它会报告一个错误：

```
 $.ajax({
        dataType: "json",
        url: "includes/Process.asp",
        method: "POST",
        data: {
            process: "notrelevant",
            formLabel: something
        },
        success: function (data) {
            alert(data);
            $(obj).replaceWith(data.casName);
        },
        error: function (a, b, c) {
            alert(a.responseText + "\n" + b + "\n" + c);

            // alerts                 
            //     { something: "blabla" }
            //     parse error
            //     syntax error invalid character
        }
    }); 
```

# android - 通过intent和PackageManager打开内置浏览器

> ID：15361131
> 
> 赞同：0
> 
> 时间：2013-03-12T12:25:07.837
> 
> 标签：android, browser, android-intent, android-package-managers

我想知道是否可以在浏览器而不是 Facebook 应用程序中打开共享页面。如果存在 Facebook 应用程序，则通过打开 Facebook 应用程序来分享某些内容。否则，如果未安装，请通过打开浏览器共享内容。我正在使用以下 Stack Overflow 问题作为指导：[Share Text on Facebook from Android App via ACTION_SEND](https://stackoverflow.com/questions/3515198/share-text-on-facebook-from-android-app-via-action-send)。

```
sharingIntent.setType("text/plain");
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT,
        "http://www.some-link-to-open.com");
PackageManager pm = getPackageManager();
List<ResolveInfo> activityList = pm.queryIntentActivities(sharingIntent, 0);
for (final ResolveInfo app : activityList) {
    if ((app.activityInfo.name).contains("facebook")) {
        /**
         * Open Facebook app 
         */

        final ActivityInfo activity = app.activityInfo;
        final ComponentName name = new ComponentName(
                activity.applicationInfo.packageName, activity.name);
        sharingIntent.addCategory(Intent.CATEGORY_LAUNCHER);
        sharingIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
        sharingIntent.setComponent(name);
        startActivity(sharingIntent);
        break;
    } else if ((app.activityInfo.name).contains("internet")) {
        /**
         * Open Facebook in the browser. 
         */

        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse("https://m.facebook.com/sharer.php?u="
                + "http://www.some-link-to-open.com"));
        startActivity(i);
    } 
```

为了确定 Facebook 应用程序，我们使用：

```
(app.activityInfo.name).contains("facebook") 
```

所以在上面的代码中我想知道

```
else if ((app.activityInfo.name).contains("internet")) 
```

您需要输入什么合适的代码来确定浏览器？

# android - 希望在用户连接到 wifi 时节省时间

> ID：15361138
> 
> 赞同：0
> 
> 时间：2013-03-12T12:25:30.850
> 
> 标签：android, logging, time, wifi

嗨，我想节省时间或更简单地记录用户的时间“当他使用 wifi 时？” 我们可以从操作系统日志中获取用户连接和断开 wifi 的时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:28:54.060

Android 广播网络状态，因此您可以使用`BroadcastReceiver`. 更多关于它[的信息](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html)。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:30:53.777

您可以将[BradcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)与[IntentService](http://developer.android.com/reference/android/app/IntentService.html)连接用于 CONNECTIVITY_CHANGED 广播（需要权限 ACCESS_NETWORK_STATE）并检查 IntentService 中的 WiFi 状态并记录它（请参阅：[确定和监控连接状态](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html)）。

# javascript - 关联文本和时间数组，打印和隐藏值

> ID：15361142
> 
> 赞同：0
> 
> 时间：2013-03-12T12:25:42.543
> 
> 标签：javascript

如何在几秒钟内`text`根据数组打印数组？ 例如，我希望“tag1”在 2 秒打印，“tag2”在 4 秒打印，依此类推......`time`

[http://jsfiddle.net/utG23/](http://jsfiddle.net/utG23/)

```
var time = [2,4,6,8];
var text = ['tag1', 'tag2', 'tag3', 'tag4'];

var e = document.getElementById("teste");

for (var i=0;i<time.length;i++) {

    e.innerHTML = text[i];
    setTimeout(function(){e.style.display = "none";}, 2000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:29:03.657

`time[i]`每隔几秒钟更改一次文本。为此，请使用闭包：

```
(function(i) {
    setTimeout(function() {
        e.innerHTML = text[i];
    }, 1000 * time[i]);
})(i); 
```

**演示：http:** [//jsfiddle.net/utG23/1/](http://jsfiddle.net/utG23/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:11:10.540

为了完美...

```
(function(i) {  
    setTimeout(function() {
        e.innerHTML = text[i];
        setTimeout(function(){e.style.display = "none";},3000);
        e.style.display = "block";
    }, 1000 * time[i]);
})(i); 
```

它会在 3 秒后隐藏标签，然后在出现新标签时再次显示...

# python - 如何将 matplotlib.pyplot.contourf 的结果拟合成圆形？

> ID：15361143
> 
> 赞同：9
> 
> 时间：2013-03-12T12:25:43.290
> 
> 标签：python, matplotlib, contour

这是我绘制一些数据的代码：

```
from scipy.interpolate import griddata
from numpy import linspace
import matplotlib.pyplot as plt
meanR = [9.95184937,   9.87947708,   9.87628496,   9.78414422,
         9.79365258,   9.96168969,   9.87537519,   9.74536093,
        10.16686878,  10.04425475,  10.10444126,  10.2917172 ,
        10.16745917,  10.0235203 ,   9.89914   ,  10.11263505,
         9.99756449,  10.17861254,  10.04704248]
koord = [[1,4],[3,4],[1,3],[3,3],[2,3],[1,2],[3,2],[2,2],[1,1],[3,1],[2,1],[1,0],[3,0],[0,3],[4,3],[0,2],[4,2],[0,1],[4,1]]
x,y=[],[]
for i in koord:
    x.append(i[0])
    y.append(i[1])
z = meanR
xi = linspace(-2,6,300);
yi = linspace(-2,6,300);
zi = griddata((x, y), z, (xi[None,:], yi[:,None]), method='cubic')
CS = plt.contourf(xi,yi,zi,15,cmap=plt.cm.jet)
plt.scatter(x,y,marker='o',c='b',s=15)
plt.xlim(min(x),max(x))
plt.ylim(min(y),max(y))
plt.show() 
```

结果我们有：

![在此处输入图像描述](../Images/b28b80bf9c86d57e0765077b9372c2f9.png)

我怎样才能把它刻在一个圆圈里？像这样的东西![在此处输入图像描述](../Images/1d5e9b0b5e89ad05108db40863d4954d.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T12:42:54.337

因为您似乎不需要任何轴，您也可以使用普通投影，删除轴并画一个圆。我玩得很开心，并添加了一些额外的耳朵、鼻子和彩条。我注释了代码，我希望它清楚。

![脑电图](../Images/c566d126e7f4657391832cfa973248b2.png)

```
from __future__ import print_function
from __future__ import division
from __future__ import absolute_import

import scipy.interpolate
import numpy
import matplotlib 
import matplotlib.pyplot as plt

# close old plots
plt.close("all")

# some parameters
N = 300             # number of points for interpolation
xy_center = [2,2]   # center of the plot
radius = 2          # radius

# mostly original code
meanR = [9.95184937,   9.87947708,   9.87628496,   9.78414422,
         9.79365258,   9.96168969,   9.87537519,   9.74536093,
        10.16686878,  10.04425475,  10.10444126,  10.2917172 ,
        10.16745917,  10.0235203 ,   9.89914   ,  10.11263505,
         9.99756449,  10.17861254,  10.04704248]

koord = [[1,4],[3,4],[1,3],[3,3],[2,3],[1,2],[3,2],[2,2],[1,1],[3,1],[2,1],[1,0],[3,0],[0,3],[4,3],[0,2],[4,2],[0,1],[4,1]]

x,y = [],[]
for i in koord:
    x.append(i[0])
    y.append(i[1])

z = meanR

xi = numpy.linspace(-2, 6, N)
yi = numpy.linspace(-2, 6, N)
zi = scipy.interpolate.griddata((x, y), z, (xi[None,:], yi[:,None]), method='cubic')

# set points > radius to not-a-number. They will not be plotted.
# the dr/2 makes the edges a bit smoother
dr = xi[1] - xi[0]
for i in range(N):
    for j in range(N):
        r = numpy.sqrt((xi[i] - xy_center[0])**2 + (yi[j] - xy_center[1])**2)
        if (r - dr/2) > radius:
            zi[j,i] = "nan"

# make figure
fig = plt.figure()

# set aspect = 1 to make it a circle
ax = fig.add_subplot(111, aspect = 1)

# use different number of levels for the fill and the lines
CS = ax.contourf(xi, yi, zi, 60, cmap = plt.cm.jet, zorder = 1)
ax.contour(xi, yi, zi, 15, colors = "grey", zorder = 2)

# make a color bar
cbar = fig.colorbar(CS, ax=ax)

# add the data points
# I guess there are no data points outside the head...
ax.scatter(x, y, marker = 'o', c = 'b', s = 15, zorder = 3)

# draw a circle
# change the linewidth to hide the 
circle = matplotlib.patches.Circle(xy = xy_center, radius = radius, edgecolor = "k", facecolor = "none")
ax.add_patch(circle)

# make the axis invisible 
for loc, spine in ax.spines.iteritems():
    # use ax.spines.items() in Python 3
    spine.set_linewidth(0)

# remove the ticks
ax.set_xticks([])
ax.set_yticks([])

# Add some body parts. Hide unwanted parts by setting the zorder low
# add two ears
circle = matplotlib.patches.Ellipse(xy = [0,2], width = 0.5, height = 1.0, angle = 0, edgecolor = "k", facecolor = "w", zorder = 0)
ax.add_patch(circle)
circle = matplotlib.patches.Ellipse(xy = [4,2], width = 0.5, height = 1.0, angle = 0, edgecolor = "k", facecolor = "w", zorder = 0)
ax.add_patch(circle)
# add a nose
xy = [[1.5,3], [2,4.5],[2.5,3]]
polygon = matplotlib.patches.Polygon(xy = xy, facecolor = "w", zorder = 0)
ax.add_patch(polygon) 

# set axes limits
ax.set_xlim(-0.5, 4.5)
ax.set_ylim(-0.5, 4.5)

plt.show() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:37:21.257

如果您将进行绘图的部分替换为：

```
fig = plt.figure()
ax = fig.add_subplot(111, polar=True)
CS = ax.contourf(xi,yi,zi,15,cmap=plt.cm.jet)
ax.scatter(x,y,marker='o',c='b',s=15)
ax.set_xlim(min(x),max(x))
ax.set_ylim(min(y),max(y)) 
```

你明白了![在此处输入图像描述](../Images/dc98f6a9145ead693fa2e57404c6ed5a.png)

为了得到你想要的，你必须重新调整`x`, `y`, `xi`,`yi`使图像以零为中心。您可能还需要转换为极坐标。现在我没有时间提供更多信息，但我希望这可以帮助您入门

# cordova - PhoneGap 1.3.0 iPad 内容旋转不正确

> ID：15361144
> 
> 赞同：1
> 
> 时间：2013-03-12T12:25:54.007
> 
> 标签：cordova

我有在 iPad 上运行的旧 PhoneGap 1.3.0 应用程序的代码，但屏幕旋转已关闭。应用 plist 设置为仅支持横向（应用开始时），但是一旦显示初始屏幕，内容就会逆时针旋转 90 度。

状态栏出现在屏幕顶部，因此旋转的是实际的 Web 视图内容，而不是视图控制器。

有没有人有任何想法从哪里开始寻找可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:47:46.417

进一步谷歌搜索返回：

[https://groups.google.com/forum/?fromgroups=#!topic/phonegap/KJmvRIajsm8](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/KJmvRIajsm8)

PhoneGapDelegate.m 中的以下行

```
[self.window addSubview:self.viewController.view]; 
```

应该改为

```
[self.window setRootViewController:self.viewController]; 
```

或者，我本可以使用更新版本的 PhoneGap，但我真的没有时间去更新项目。

# plone - 覆盖 transmogrifier:registerConfig 而不使用 overrides.zcml

> ID：15361146
> 
> 赞同：2
> 
> 时间：2013-03-12T12:25:57.267
> 
> 标签：plone, zope, transmogrifier, zcml

我正在使用 quintagroup.transmogrifier，我想提供我的 on 'import.cfg' 管道。通常，我会在 overrides.zcml 中添加这样的内容：

```
<include package="collective.transmogrifier" file="meta.zcml" />
<transmogrifier:registerConfig
    name="import"
    title="Import pipeline configuration"
    description="My custom import pipeline."
    configuration="import.cfg"
    /> 
```

有几个人指出不推荐使用 overrides.zcml。此外，我在测试中加载 overrides.zcml 时遇到了很大的麻烦——我得到了重复的配置错误等。所以我的问题是如何在不使用 overrides.zcml 的情况下完成我的任务（提供我自己的管道）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:04:13.090

我认为弃用`overrides.zcml`结果背后的原因是为了加载它们而完成了一些黑魔法（您必须在`p.a.testing`设置中复制），这可能是 zope 服务器在其启动例程中完成的。

可悲的是，我不知道有什么比直接访问 configuration_registry（位于`collective.transmogrifier.transmogrifier`，它是一个全局的）更好的方法。如果您`registerConfig`直接调用，您应该能够覆盖它，但它比使用`overrides.zcml`.

另一种方法可能是查看`zope.configuration`您是否可以通过代码进行覆盖...

# c# - 获取包含虚拟目录的 URL？

> ID：15361148
> 
> 赞同：7
> 
> 时间：2013-03-12T12:26:01.130
> 
> 标签：c#, asp.net, webforms

我正在维护一个 ASP.NET Web Forms 网站**（我的意思是网站，它不是 Web 应用程序）**，并且一些静态链接被破坏，因为它们使用虚拟目录托管它。

```
http://www.somewhere.com/MyApp 
```

因此，我开始沿着路径寻找一种方法来获取给定某个页面的虚拟路径的绝对 URL。我发现一篇文章提到你可以使用这样的链接：

```
<a href="/ContactUs.aspx">Contact Us</a> 
```

并做这样的事情：

```
<a href="<%= System.Web.VirtualPathUtility.ToAbsolute("/ContactUs.aspx") %>">Contact Us</a> 
```

但这甚至不能在本地工作**（即针对 ASP.NET 开发服务器）**，因为我的本地路径可能是这样的：

```
http://localhost:7766/MyApp 
```

但产生的路径`VirtualPathUtility`是这样的：

```
http://localhost:7766/ContactUs.aspx 
```

* * *

所以，我决定将它部署到我的本地 IIS 实例，看看它会如何运行。结果是一样的。本地 IIS 路径为：

```
http://localhost/MyApp 
```

但联系我们页面的路径是：

```
http://localhost/ContactUs.aspx 
```

* * *

相处中的最后一个障碍，应用程序中有一个链接，如下所示：

```
<asp:HyperLink id="ContactUsLink"
    runat="server"
    Enabled="true"
    NavigateUrl="/ContactUs.aspx"
    Text="Contact Us">
</asp:HyperLink> 
```

我之所以说这是相处中的一个障碍，是因为我知道内联代码**（如上面的示例）**不适用于服务器控件。它实际上会引发编译器错误：

> 服务器标签不能包含 <% ... %> 结构。

* * *

所以看来我显然走错了路，我需要一些帮助。我期待着你的回答。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T12:30:22.857

尝试：

```
Request.Url.GetLeftPart(UriPartial.Authority) + Request.ApplicationPath 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:33:42.623

你应该在你的地址前面加上一个~。所以“~/Contact.aspx”在任何 runat=server 控件上。这不适用于标准标签。您可以将 runat=server 添加到普通标签以使其成为服务器控件。

运行时将看到 ~ 并使其与您正在运行的内容相关。

```
<asp:HyperLink id="ContactUsLink"
    runat="server"
    Enabled="true"
    NavigateUrl="~/ContactUs.aspx"
    Text="Contact Us">
</asp:HyperLink> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T12:34:16.190

您可以使用 ~ 来正确解析您的 URL，因此，您的 HyperLink 控件变为：

```
<asp:HyperLink id="ContactUsLink"
    runat="server"
    Enabled="true"
    NavigateUrl="~/ContactUs.aspx"
    Text="Contact Us">
</asp:HyperLink> 
```

~ 符号将始终解析为您的应用程序的根目录，并且它会为您考虑虚拟路径。上述解决方案还将摆脱对服务器标签的需求，因此应该可以解决您的问题。

无论出于何种原因，如果您想直接在代码中获取虚拟目录路径（即 URL 的 MyApp 部分），您可以使用`HttpContext.Current.Request.ApplicationPath`它将为您返回虚拟路径。然后，您可以使用它来派生您的 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T06:13:22.340

```
window.location.protocol + "/" +(window.location.host + "/" + window.location.pathname); 
```

# sharepoint - SharePoint 2013 更新面板不起作用

> ID：15361150
> 
> 赞同：2
> 
> 时间：2013-03-12T12:26:11.707
> 
> 标签：sharepoint, visual-studio-2012, updatepanel, sharepoint-2013

我可以在 SharePoint 2010 和 Visual Studio 2010 中使用更新面板，但是当我尝试在 SharePoint 2013 和 Visual Studio 2012 中使用更新面板时，它不起作用。这个问题有什么解决办法吗？

# php - 使用 facebook php SDK 发送批量应用通知失败

> ID：15361151
> 
> 赞同：1
> 
> 时间：2013-03-12T12:26:13.937
> 
> 标签：php, facebook, api, notifications

运行以下代码后，我尝试从我的应用程序向多个应用程序用户发送批处理通知，但响应中出现错误：

```
"{"error":{"message":"(#100) Must specify a non-empty template `param","type":"OAuthException","code":100}}"` 
```

虽然设置了模板参数...

感谢任何关于我做错了什么的帮助..

这是我使用的代码：

```
$batched_request = array();

foreach ($users as $idx => $user) {

$request = array(
       'method'  => 'POST',
       'relative_url'  => '/' . $user['id'].'/notifications',
       'access_token' => $app_access_token,                                    
       'template' => $template,                                    
       'href' => $href        
      ); 

 $batched_request[] = json_encode($request); 

}

$params = array('batch' => '[' . implode(',',$batched_request) . ']' );
try {

    $response = $facebook->api('/','POST',$params);

} catch(FacebookApiException $e) {
         error_log($e);               
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:06:34.440

如果您通过批处理 api 发布，请记住，您应该将模板和 href 参数作为 http 查询字符串包含在“body”键中。

例如：

```
$apiCalls[] = array(
  "method" => "POST",
  "relative_url" => $user['id'] . "/notifications", 
  "body" => http_build_query(array("href" => $href, "template" => $template, "ref" => "ref_key")),
  "access_token" => $app_access_token
); 
```

# html - HTML5 中的视频会议：通过 Socket.io 的 WebRTC

> ID：15361167
> 
> 赞同：0
> 
> 时间：2013-03-12T12:27:15.053
> 
> 标签：html, webrtc

我正在尝试实现这个[视频会议](http://html5videoguide.net/presentations/LCA_2013_webrtc/socket-server/webrtc.html)HTML5 应用程序。我不确定到底发生了什么，但我按照说明进行操作，也许我错过了一些东西......

我复制了 HTML 文件 (index.html)，并将套接字 IP 更改为适用于我的服务器的正确 IP：

```
<!DOCTYPE html>
<html>
<head>
  <title>WebRTC Demo</title>  
</head>
<body>
  <h1>WebRTC Demo using Socket.IO</h1>
  <video id="webrtc-sourcevid" autoplay style="width: 320px; height: 240px; border: 1px solid black;"></video>
  <button type="button" onclick="startVideo();">Start video</button>
  <button type="button" onclick="stopVideo();">Stop video</button>
  <video id="webrtc-remotevid" autoplay style="width: 320px; height: 240px; border: 1px solid black;"></video>
  <button type="button" onclick="connect();">Connect</button>
  <button type="button" onclick="hangUp();">Hang Up</button>

  <p>Run a node.js server and adapt the address in the code.</p>
  <script src="http://cdn.socket.io/stable/socket.io.js"></script>
  <script>
  // create socket
  var socket = io.connect('localhost:1337/');

  var sourcevid = document.getElementById('webrtc-sourcevid');
  var remotevid = document.getElementById('webrtc-remotevid');
  var localStream = null;
  var peerConn = null;
  var started = false;
  var channelReady = false;
  var mediaConstraints = {'mandatory': {
                          'OfferToReceiveAudio':true, 
                          'OfferToReceiveVideo':true }};
  var isVideoMuted = false;

  // get the local video up
  function startVideo() {
      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || window.navigator.mozGetUserMedia || navigator.msGetUserMedia;
      window.URL = window.URL || window.webkitURL;

      navigator.getUserMedia({video: true, audio: true}, successCallback, errorCallback);
      function successCallback(stream) {
          localStream = stream;
          if (sourcevid.mozSrcObject) {
            sourcevid.mozSrcObject = stream;
            sourcevid.play();
          } else {
            try {
              sourcevid.src = window.URL.createObjectURL(stream);
              sourcevid.play();
            } catch(e) {
              console.log("Error setting video src: ", e);
            }
          }
      }
      function errorCallback(error) {
          console.error('An error occurred: [CODE ' + error.code + ']');
          return;
      }
  }

  // stop local video
  function stopVideo() {
    if (sourcevid.mozSrcObject) {
      sourcevid.mozSrcObject.stop();
      sourcevid.src = null;
    } else {
      sourcevid.src = "";
      localStream.stop();
    }
  }

  // send SDP via socket connection
  function setLocalAndSendMessage(sessionDescription) {
    peerConn.setLocalDescription(sessionDescription);
    console.log("Sending: SDP");
    console.log(sessionDescription);
    socket.json.send(sessionDescription);
  }

  function createOfferFailed() {
    console.log("Create Answer failed");
  }

  // start the connection upon user request
  function connect() {
    if (!started && localStream && channelReady) {
      createPeerConnection();
      started = true;
      peerConn.createOffer(setLocalAndSendMessage, createOfferFailed, mediaConstraints);
    } else {
      alert("Local stream not running yet - try again.");
    }
  }

  // stop the connection upon user request
  function hangUp() {
    console.log("Hang up.");    
    socket.json.send({type: "bye"});
    stop();
  }

  function stop() {
    peerConn.close();
    peerConn = null;
    started = false;    
  }

  // socket: channel connected
  socket.on('connect', onChannelOpened)
        .on('message', onMessage);

  function onChannelOpened(evt) {
    console.log('Channel opened.');
    channelReady = true;
  }

  function createAnswerFailed() {
    console.log("Create Answer failed");
  }
  // socket: accept connection request
  function onMessage(evt) {
    if (evt.type === 'offer') {
      console.log("Received offer...")
      if (!started) {
        createPeerConnection();
        started = true;
      }
      console.log('Creating remote session description...' );
      peerConn.setRemoteDescription(new RTCSessionDescription(evt));
      console.log('Sending answer...');
      peerConn.createAnswer(setLocalAndSendMessage, createAnswerFailed, mediaConstraints);

    } else if (evt.type === 'answer' && started) {
      console.log('Received answer...');
      console.log('Setting remote session description...' );
      peerConn.setRemoteDescription(new RTCSessionDescription(evt));

    } else if (evt.type === 'candidate' && started) {
      console.log('Received ICE candidate...');
      var candidate = new RTCIceCandidate({sdpMLineIndex:evt.sdpMLineIndex, sdpMid:evt.sdpMid, candidate:evt.candidate});
      console.log(candidate);
      peerConn.addIceCandidate(candidate);

    } else if (evt.type === 'bye' && started) {
      console.log("Received bye");
      stop();
    }
  }

  function createPeerConnection() {
    console.log("Creating peer connection");
    RTCPeerConnection = webkitRTCPeerConnection || mozRTCPeerConnection;
    var pc_config = {"iceServers":[]};
    try {
      peerConn = new RTCPeerConnection(pc_config);
    } catch (e) {
      console.log("Failed to create PeerConnection, exception: " + e.message);
    }
    // send any ice candidates to the other peer
    peerConn.onicecandidate = function (evt) {
      if (event.candidate) {
        console.log('Sending ICE candidate...');
        console.log(evt.candidate);
        socket.json.send({type: "candidate",
                          sdpMLineIndex: evt.candidate.sdpMLineIndex,
                          sdpMid: evt.candidate.sdpMid,
                          candidate: evt.candidate.candidate});
      } else {
        console.log("End of candidates.");
      }
    };
    console.log('Adding local stream...');
    peerConn.addStream(localStream);

    peerConn.addEventListener("addstream", onRemoteStreamAdded, false);
    peerConn.addEventListener("removestream", onRemoteStreamRemoved, false)

    // when remote adds a stream, hand it on to the local video element
    function onRemoteStreamAdded(event) {
      console.log("Added remote stream");
      remotevid.src = window.URL.createObjectURL(event.stream);
    }

    // when remote removes a stream, remove it from the local video element
    function onRemoteStreamRemoved(event) {
      console.log("Remove remote stream");
      remotevid.src = "";
    }
  }
  </script>
</body>
</html> 
```

以及服务器的 Javascript 文件（server.js）（与上面的端口号相同）：

```
// create the http server and listen on port
var server = require('http').createServer();
var app = server.listen(1337, function() {
  console.log((new Date()) + " Server is listening on port 1337");
});

// create the socket server on the port
var io = require('socket.io').listen(app);

// This callback function is called every time a socket
// tries to connect to the server
io.sockets.on('connection', function(socket) {

    console.log((new Date()) + ' Connection established.');

    // When a user send a SDP message
    // broadcast to all users in the room
    socket.on('message', function(message) {
        console.log((new Date()) + ' Received Message, broadcasting: ' + message);
        socket.broadcast.emit('message', message);
    });

    // When the user hangs up
    // broadcast bye signal to all users in the room
    socket.on('disconnect', function() {
        // close user connection
        console.log((new Date()) + " Peer disconnected.");
        socket.broadcast.emit('user disconnected');
    });

}); 
```

我已经安装了 node.js。接下来我安装了 express 和 socket.io：

```
npm install express
npm install socket.io 
```

然后我用节点运行这个文件来启动服务器。

```
node server.js 
```

从服务器访问 index.html 会给我这个错误

```
Uncaught TypeError: Object #<Object> has no method 'connect' 
```

这是由`io.connect('localhost:1337/');`server.js 中的 var socket = 行引起的

我已经搜索了这个错误并尝试将 socket.io 文件放在服务器上并将其链接为`<script src="/socket.io/socket.io.js"></script>`，并没有改变任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T12:46:40.767

在 index.html 中，它必须类似于：

```
<script src="http://192.168.100.74:8080/socket.io/socket.io.js"></script> 
```

和

```
var socket = io.connect('http://' + window.location.host + ':8080/'); 
```

我的 app.js：

```
var server = require('http').createServer();
var app = server.listen(8080);
var io = require('socket.io').listen(app);

io.sockets.on('connection', function(socket) {

    socket.on('message', function(message) {
        socket.broadcast.emit('message', message);
    });
}); 
```

项目- |-node_modules- |socket.io |app.js |index.html

希望这可以帮助。我也是这个 webRT 和套接字的新手。

# wpf - Blend 5（预览版）缺少 WPF 的平台/分辨率选项卡？

> ID：15361168
> 
> 赞同：2
> 
> 时间：2013-03-12T12:27:16.947
> 
> 标签：wpf, visual-studio, device, tablet, blend

在 Expression Blend for Visual Studio 中开发 WPF 应用程序，我读到 Blend 现在能够模拟不同的分辨率/dpi 和方向：http: [//blogs.msdn.com/b/b8/archive/2012/03/21 /缩放到不同的屏幕.aspx](http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different-screens.aspx)

但是，我似乎找不到他们提到的 PlatformTab：

![混合屏幕截图](../Images/cab0d1ef1a729f77aa1f4c91e330178f.png)

它不适用于WPF吗？我正在开发一个 10 英寸的 Windows 8 平板电脑，但还没有访问实际设备的权限。而且我不确定我的尺寸是否正确。WPF有替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:47:28.770

平台窗格仅适用于 HTML 和 XAML Windows 应用商店应用。

# ios - iOS TapGesture 在同一个 View 上隐藏 Touch

> ID：15361169
> 
> 赞同：1
> 
> 时间：2013-03-12T12:27:28.047
> 
> 标签：ios, uiimagepickercontroller, uigesturerecognizer, uitapgesturerecognizer

我想做点什么`UIImagePickerController`，我检测到视图（名为 A）包含库中的所有图像。当我选择一个图像时，我想在上面画一些东西。

我可以使用委托将图像放入我的控制器`didFinishPickMediaWithInfo`，`UiImagePickerControllerDelegate`但我无法检测到我在视图 A 上点击的哪个点（此时要绘制一些视图）。我试图添加`TapGestureRecognizer`到视图 A，这对我来说真的很重要，但不幸的是它无法进入委托 `didFinishPickMediaWithInfo`，所以我无法获得选择的图像。

我不知道同时实现两件事，在委托上获取所选图像`didFinishPickMediaWithInfo`并返回我点击的点。

有什么想法（也许只是想法）来指导我实现这一目标

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:52:24.417

谢谢大家，最后，我找到了解决这个问题的方法。这很简单，很像作弊。我在 UIWindow 上添加了点击手势，一切都通过了。

# jquery - 如何在 javascript 中比较字符串和 Hashtable 对象

> ID：15361171
> 
> 赞同：1
> 
> 时间：2013-03-12T12:27:36.867
> 
> 标签：jquery, cordova, jquery-mobile

我正在尝试将字符串与 Hashtable 值进行比较。使用哈希表我存储键和值。一切都很顺利，但是在将哈希表值与字符串进行比较时失败了。

```
var name= this.innerText;
var cityName=name.replace(/\s+/g,' ');
for(var k in cityHash ){
    if(cityHash.hasOwnProperty(k)){
        if(cityName.toLowerCase()==cityHash[k].toLowerCase()){
            alert("Match");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:02:17.570

终于找到了解决这个问题的办法。我忘了**修剪**两个字符串，一个是哈希表中的值，另一个是比较之前的 UL 内部文本。

# asp.net-mvc - 从 MVC 中的 razor html 视图执行控制器方法？

> ID：15361174
> 
> 赞同：0
> 
> 时间：2013-03-12T12:27:43.280
> 
> 标签：asp.net-mvc, html, html-select

好的，所以我有一个`Html.DropDownList`并且我希望能够执行一个控制器方法`ActionResult output(string test)`并向它发送一个参数。我已经有类似的东西了，但是我收到了 Uncaught TypeError: Cannot set property 'action' of null 消息：

```
@Html.DropDownList(
"revisions", ViewData["revisions"] as SelectList,
new
{
    onchange = "this.form.action = '/Shops/output('test')'; this.form.submit();"
}) 
```

我该如何修复我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:31:20.623

```
@Html.DropDownList(
"revisions", ViewData["revisions"] as SelectList,
new
{
    onchange = "submitForm();"
}) 
```

你的 Javacript 在这里

```
function submitForm()
{
        var form = document.forms[0];
        form = '/Shops/output?test=test'; 
        form.submit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:31:22.020

如果您的 Action 方法的参数名称是`id`,

```
public ActionResult output(string id)
{
  //do something
} 
```

那么您可以像这样使用您的表单操作网址。（默认路由将负责休息）

```
/Shops/output/somestringhere. 
```

如果您有不同的名称，请将其用作查询字符串

```
public ActionResult output(string name)
{
  //do something
} 
```

现在使用您的表单操作网址，例如

```
/Shops/output?name=somestringhere 
```

**关于您的代码的另一个建议**是避免使用 Viewdata 呈现下拉菜单。尝试使用强类型视图模型及其将数据传输到视图的属性。还可以尝试将您的 javascript 从您的视图中移开，并使其不显眼。这样您的视图就只能保持干净的标记。

假设您想在文档创建视图中显示修订下拉菜单，请将属性添加到您的视图模型以具有下拉项目。

```
public class DocumentCreateViewModel
{
  //Other properties also here

  public List<SelectListItem> Revisions{ set;get;}
  public int SelectedRevision { set;get;}

  public DocumentCreateViewModel()
  {
    Revisions=new List<SelectListItem>();
  } 
} 
```

并在您的 GET 操作中，将下拉内容填充到 Revisions 属性。

```
public ActionResult Create()
{
  var vm=new DocumentCreateViewModel();
  vm.Revisions=GetRevisionItemsFromSomeWhere(); 

  return View(vm);    
} 
```

在你的强类型视图中，

```
@model DocumentCreateViewModel

    @using(Html.Beginform())
    {

      @Html.DropDownListFor(x => x.SelectedRevision,
                     new SelectList(Model.Revisions,"Value","Text"), "Select..")

      <input type="submit" />
    } 
```

现在要处理下拉更改事件时的表单提交，请添加此脚本。

```
$(function(){

  $("#SelectedRevision").change(function(){
     var _this=$(this);
     var selectedRevision=_this.val();     
     $("form#YourFormIDHere")
                .attr("action","./Shops/output/"+selectedRevision).submit();
  });

}); 
```

您可以使用 razor helper method( `@Url.Action`) 来获取正确的路径，而不是将 URL 硬编码到商店/输出。

# jar - 将外部 jar 文件添加到 jBoss 7 的类路径中

> ID：15361175
> 
> 赞同：4
> 
> 时间：2013-03-12T12:27:46.163
> 
> 标签：jar, classpath, external, jboss7.x

我想将外部 jar 文件包含到 jBoss7 的所有配置的类路径中。有什么方法可以做到这一点，而无需将我的文件移动到 jboss lib 目录中的某处？或者更好 - 有没有办法将所有 jar 文件包含在某个外部目录中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-12T16:32:49.653

没有答案实际上概述了在这里做什么，所以这里是。

在您的`jboss-deployment-structure.xml`文件中，`webapp/WEB-INF`您需要添加模块引用：

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
    <deployment>
        <dependencies>
            <module name="javaee.api">
                <imports>
                    <exclude path="org/apache/xml/security/**" />
                </imports>
            </module>
            <module name="com.sun.xml.bind" slot="main" />
            <module name="com.mycompany.mypackage" slot="1_0" />
            <module name="com.oracle.ojdbc14" slot="main" />    
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

然后将jar文件复制到这个目录：

```
C:\[JBoss-Home]\modules\com\mycompany\mypackage\1_0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:51:50.140

有一个目录叫`modules`你可以放你的罐子。但是要知道如何做到这一点，您应该阅读[本](https://docs.jboss.org/author/display/AS71/Extending%20JBoss%20AS%207.html)指南。您还可以创建一个可供所有部署访问的全局模块。看看[这个](https://docs.jboss.org/author/display/AS71/Class%20Loading%20in%20AS7)文档。

# visual-studio-2010 - 带有解决方案文件夹的 VisualStudio InheritancePicker

> ID：15361180
> 
> 赞同：1
> 
> 时间：2013-03-12T12:27:56.660
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012, solution

你们有没有人遇到过这样的问题，当您尝试使用 Visual Studio 创建一个新的“用户控件”时，带有可供选择的类的网格只是空的？

我现在有这个问题。一切正常，直到我在我的 VS-Solution 中创建了一些“解决方案文件夹”。我制作了这个文件夹来构建我的解决方案，因为它随着时间的推移变得越来越大。我仍然可以编译解决方案，一切正常。我面临的唯一问题是我无法再创建任何“用户控件”。“继承选择器窗口”只是空的......我可以通过“浏览......”手动选择包含所需用户控件的程序集，但这不是一个好的解决方案，因为它必须静态引用 dll。我也可以自己进行继承，没有“向导”，但是我必须编辑设计器文件以匹配父类......这不是我想做的......

仅当我的解决方案中有这些“解决方案文件夹”时才会出现此问题。当我将所有项目都放在同一级别而没有文件夹时，“继承选择器”工作正常......

这是 VS 中的错误（发生在 10 和 12 中），还是我做错了什么？

# java - 使用子代覆盖的 Java 父代

> ID：15361183
> 
> 赞同：0
> 
> 时间：2013-03-12T12:28:02.047
> 
> 标签：java, overriding

运行时将`Parent.parentMethod2`或被`Child.parentMethod2`调用`Child.childMethod1`？

```
public class Parent
{
    public void parentMethod1()
    {
        parentMethod2();
    }

    public void parentMethod2()
    {
        //do something
    }
}

public class Child extends Parent
{
    public void childMehod1()
    {
        parentMethod1();
    }

    @Override
    public void parentMethod2()
    {
        //do something else
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:45:32.363

子方法将被调用（即被**覆盖的 parentMethod2）**。这是 java 中继承工作的“正常”方式——你的对象**是**一个孩子，所以当孩子的方法可用时它会运行它们。我们从 parentMethod1 调用 parentMethod2 并不重要，它不会被覆盖。运行该方法的实例仍然是一个孩子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:39:00.747

`Child.childMehod1()`会打电话`Child.parentMethod2()`。意思是，您的“//做其他事情”代码将被执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:39:12.287

记住一件事

```
 public class Parent
    {
        public void parentMethod1()
        {
            this.parentMethod2();  //I have added 'this' here, ('this'  is implicit)
        }
    } 
```

所以'this'当前正在执行的对象是子对象。因此将调用子方法。

# iphone - 如何通过网络链接在 Google Maps iPhone 应用程序上放置图钉？

> ID：15361186
> 
> 赞同：2
> 
> 时间：2013-03-12T12:28:05.960
> 
> 标签：iphone, ios, google-maps, url

我以前只能在谷歌地图上找到一个坐标的链接，比如[https://maps.google.com/maps?q=35.7491455078125,139.382995605469](https://maps.google.com/maps?q=35.7491455078125,139.382995605469)

但现在苹果推出了最初的地图应用程序，谷歌重新推出了另一个应用程序，这样的链接不再在 iOS 用户的地图上留下钉子。

有没有办法通过点击链接在访问者的谷歌地图应用程序上放置一个图钉？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-28T08:08:18.530

听起来官方地图 URL 对您有用。在您的示例中，这应该可以工作（并且也可以跨平台！）：

[https://www.google.com/maps/search/?api=1&query=35.7491455078125,139.382995605469](https://www.google.com/maps/search/?api=1&query=35.7491455078125,139.382995605469)

[您可以在https://developers.google.com/maps/documentation/urls/guide](https://developers.google.com/maps/documentation/urls/guide)阅读完整文档

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-12T13:09:01.127

将[http://maps.google.com](http://maps.google.com)替换为[http://maps.apple.com](http://maps.apple.com)，希望可以！

# javascript - 如何选择数组中除第 i 个元素之外的所有其他值？

> ID：15361189
> 
> 赞同：40
> 
> 时间：2013-03-12T12:28:16.603
> 
> 标签：javascript, arrays

我有一个使用表示为的数组值的函数

```
 markers[i] 
```

**如何选择数组中除此之外的所有其他值？**

这样做的目的是将所有其他 Google 地图图像重置为其原始状态，但通过更改图像突出显示新图像。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-12T12:30:40.260

用于[`Array​.prototype​.splice`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)获取除此之外的元素数组。

这会永久影响阵列，因此如果您不希望这样做，请先创建一个副本。

```
var origArray = [0,1,2,3,4,5];
var cloneArray = origArray.slice();
var i = 3;

cloneArray.splice(i,1);

console.log(cloneArray.join("---")); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-02-17T11:44:22.177

您可以使用 ECMAScript 5 **[`Array.prototype.filter`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)**：

```
var items = [1, 2, 3, 4, 5, 6];
var current = 2;

var itemsWithoutCurrent = items.filter(function(x) { return x !== current; }); 
```

可以有任何比较逻辑来代替`x !== current`. 例如，您可以比较对象属性。

如果您使用原语，您还可以创建一个自定义函数，例如`except`将引入此功能：

```
Array.prototype.except = function(val) {
    return this.filter(function(x) { return x !== val; });        
}; 

// Usage example:
console.log([1, 2, 3, 4, 5, 6].except(2)); // 1, 3, 4, 5, 6 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-07-04T10:09:52.673

您还可以使用[Filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)中的第二个回调参数：

```
const exceptIndex = 3;
const items = ['item1', 'item2', 'item3', 'item4', 'item5'];
const filteredItems = items.filter((value, index) => exceptIndex !== index); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-12T12:32:44.430

您可以使用 `slice()`方法

```
var fruits = ["Banana", "Orange", "Lemon", "Apple", "Mango"];
var citrus = fruits.slice(1,3); 
```

slice() 方法将数组中的选定元素作为新的数组对象返回。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-30T19:07:24.110

另一种方法是使用 filter 和 slice Array 方法。

```
let array = [ 1, 2, 3, 4, 5, 6 ];
let leave = 2;

// method 1
console.log(array.filter((e,i) => i !== leave));
// logs [1, 2, 4, 5, 6];

//method 2
console.log([...array.slice(0, leave), ...array.slice(leave+1, array.length)]);
// logs [1, 2, 4, 5, 6]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-21T21:51:43.967

此函数将返回一个新数组，其中包含除指定索引处的元素之外的所有元素：

```
 const everythingBut = (array, i) => { /*takes an array and an index as arguments*/
        let notIArray = []; /*creates new empty array*/
        let beforeI = array.slice(0, i); /*creates subarray of all elements before array[i]*/
        let afterI = array.slice(i+1,); /*creates subarray of all elements after array[i]*/
        notIArray = [...beforeI, ...afterI]; /*add elements before and after array[i] to empty array*/
        return notIArray; /*returns new array with array[i] element excluded*/
    }; 
```

例如：

```
 let array = [1, 2, 4, 7, 9, 11, 2, 6]
    everythingBut(array, 2); /*exclude array[2]*/
    // -> [1, 2, 7, 9, 11, 2, 6] 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-03-30T14:17:47.993

使用 ECMAScript 5

```
const array = ['a', 'b', 'c'];
const removeAt = 1;
const newArray = [...array].splice(removeAt, 1); 
```

# xslt - 使用 xslt 输出特定格式的多个值的 XML 到 csv 转换

> ID：15361192
> 
> 赞同：3
> 
> 时间：2013-03-12T12:28:19.860
> 
> 标签：xslt, xpath, csv, xslt-1.0

我正在尝试使用 xslt 将以下格式的 xml 数据转换为 csv 格式。我现在对尝试为特定自定义字段输出多值感到震惊。这是我的 xml 数据。

```
<input-xml>
 <add add-value="First Name">
    <value type="string">Newbee</value>
  </add>
   <add add-value="Surname">
    <value  type="string">user1</value>
  </add>
  <add add-value="Title">
    <value type="string">Software,engineer</value>
 </add>
 <add add-value="Title">
    <value type="string">Associate level</value>
  </add>
 <add add-value="Description">
    <value type="string">This user is new to xslt.</value>
  </add>
</input-xml> 
```

下面是我用来转换数据的 xslt 代码片段。

```
 <xsl:template match="input-xml">
  <!-- output the fields in order -->
    <xsl:call-template name="output-field">
        <xsl:with-param name="field-value" select="*[(@attr-name = 'First')]/value"/>
    </xsl:call-template>
    .............
    .............
    <xsl:call-template name="output-field">
        <xsl:with-param name="field-value" select="*[(@attr-name = 'Title')]/value"/>
    </xsl:call-template>
 </xsl:template>

 <xsl:template name="output-field">
    <xsl:param name="field-value"/>
    <xsl:choose>
        <xsl:when test="contains($field-value,$delimiter)">
            <!-- if the field value contains a delimiter, then enclose in quotes -->
                             <!--delimiter here is comma (,)-->
            <xsl:text>"</xsl:text>
            <xsl:value-of select="$field-value"/>
            <xsl:text>"</xsl:text>
        </xsl:when>
        <xsl:otherwise>
            <!-- otherwise output it raw -->
            <xsl:value-of select="$field-value"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template 
```

使用上面的代码，我可以将数据输出为：

```
Newbee,User1,Software engineer,This user is new to xslt. 
```

只要没有多个值，这绝对没问题。现在的问题是字段“标题”有两个值，必须用引号 ("") 括起来，如下所示。预期输出 csv 数据：

```
Newbee,User1,"|Software engineer|,|Associate level|",This user is new to xslt. 
```

我无法弄清楚我必须对上面的代码进行哪些更改以及如何进一步进行..谁能帮我..？？

**@LarsH**你之前对我发布的问题的回复工作正常。我发现对于下面的 xml 格式，xslt 并不能完全按照预期的方式工作。

```
<input-xml>
 <add add-value="First Name">
    <value type="string">Newbee</value>
  </add>
   <add add-value="Surname">
    <value  type="string">user1</value>

 <add add-value="Title">
    <value type="string">Associate level</value>
    <value type="string">Software,engineer</value>
 </add>

 <add add-value="Description">
    <value type="string">This user is new to xslt.</value>
  </add>
</input-xml> 
```

我得到的输出是

```
Newbee,User1,Software engineerAssociate level,This user is new to xslt. 
```

我是否需要编写另一个 xslt 才能处理这个 xml..？我可以修改现有的 xslt 本身来处理这两个 xml 变体..吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:23:38.047

我会更改您的输出字段模板，以便使用字段名称（属性）而不是输出值。例如传递一个`field-name`参数而不是`field-value`. 然后，您可以将有关多个值的逻辑放入该模板中。

[再想一想，你也可以通过传递字段 value* *s* * 来做到这一点，就像你已经做的那样......只是认识到你传递的是一个节点集，不一定只是一个值。]

在输出字段模板中，您可以这样说：

```
<xsl:template name="output-field">
 <xsl:param name="field-name"/>
 <xsl:variable name="field-values" select="*[@attr-name = $field-name]" />
 <xsl:choose>
  <xsl:when test="count($field-values) > 1">
    <xsl:text>"</xsl:text>
      <xsl:for-each select="$field-values">
        <xsl:value-of select="concat('|', ., '|')" />
        <xsl:if test="position() != last()">,</xsl:if>
       </xsl:for-each>
     <xsl:text>"</xsl:text>
   </xsl:when>
   <xsl:when test="contains($field-values[1], $delimiter)">
      ... the rest of your existing template
 </xsl:choose>
</xsl:template> 
```

如果您在其中一些细节方面需要更多帮助，请告诉我们哪些细节。

# mysql - 如何查询数据不重复，尽量减少时间？

> ID：15361200
> 
> 赞同：0
> 
> 时间：2013-03-12T12:28:30.957
> 
> 标签：mysql, sql, performance, query-optimization

有 3 个实体-`articles`和。对如何在数据库中存储数据没有任何限制。同一篇文章可以同时在多个期刊上发表。`journals``subscribers`

> 如何从订阅期刊中选择所有已发表的文章，按发表日期排序且不重复？

最简单的方法：

1.  创建一个包含文章的表格： **posts** `p_id` , `j1_id`, `j2_id`, `text`,`date`

2.  创建一个带有订阅的表： **follows** `f_id` , `u_id`, `j_id`(u_id — 是来自表**users**的用户 id )

3.  执行：

示例查询

```
select posts.* from posts inner join follows on (j_id = j1_id or j_id
= j2_id) where u_id = 1 order by date desc 
```

此查询返回具有重复项的数据。您可以使用机制`DISTINCT`或`GROUP BY`，但它会创建一个额外的排序操作来删除重复项。

另一种方法可以使用机制来完成`UNION`，但它也使用`DISTINCT`.

```
(select posts.* from posts inner join follows on j_id = j1_id where u_id = 1)
union
(select posts.* from posts inner join follows on j_id = j2_id where u_id = 1)
order by date desc 
```

也许我以自己的方式选择了不正确的存储结构。

实际上的问题是，是否有可能对这个问题做点什么，以尽量减少大数据所需的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:45:02.713

您可以使用以下表结构

帖子：pid、文本、日期日志：jid、jtext journals_posts：jid、pid 跟随：fid、uid、jid

```
select distinct posts.* from posts 
inner join journals_posts on journals_posts.pid = posts.pid 
inner join follows on follows.jid = journals_posts.jid 
where follows.uid = <userid> 
```

为了提高速度，您可以在 journals_posts(jid) follow(uid) 上创建索引

您可能需要在其他字段上创建索引使用“解释”检查哪些表在不使用连接的情况下被扫描

# ios - 将日期添加到 Xcode xcconfig 文件

> ID：15361202
> 
> 赞同：5
> 
> 时间：2013-03-12T12:28:35.117
> 
> 标签：ios, iphone, objective-c, xcode

我有一个 Xcode 配置文件，`Config.xcconfig`它只包含这一行：

```
BUILD_DATE=`date "+%B %Y"` 
```

我希望以正确的方式将此配置添加到项目中。

![在此处输入图像描述](../Images/bbcc185e05bff0568b2756476337dab5.png)

我想在文件中使用 BUILD_DATE 变量的内容`Application-info.plist`。如何？

我尝试使用获取值，`${BUILD_DATE}`但结果是字符串 ``date "+%B %Y"` 而不是值！

![在此处输入图像描述](../Images/da138eee6a03c899d47edd8c964d9c96.png)

从终端，结果是正确的：

```
alp$ BUILD_DATE=`date "+%B %Y"`
alp$ echo $BUILD_DATE
March 2013
alp$ 
```

但在 Xcode 中没有！

![在此处输入图像描述](../Images/3761d1813451652d3a88bf7667d114b2.png)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:37:37.063

您无法使用反引号命令获取构建日期，因为该`.xcconfig`文件不会被解释为 shell 脚本。

您最好的选择是在这个[SO 问题（我问过一段时间）中使用类似的方法](https://stackoverflow.com/questions/9258344/xcode-better-way-of-incrementing-build-number)*Bump Build Number*脚本，它提供了使用外部构建脚本更新文件的解决方案。`.plist`

例如：

```
#!/bin/sh

if [ $# -ne 1 ]; then
    echo usage: $0 plist-file
    exit 1
fi

plist="$1"
build_date=$(date "+%B %Y")

/usr/libexec/Plistbuddy -c "Set BUILD_DATE \"$build_date\"" "$plist" 
```

并从 Xcode Build Script 调用它，使用类似：

```
"${PROJECT_DIR}/tools/set_build_date.sh" "${PROJECT_DIR}/${INFOPLIST_FILE}" 
```

# css - 媒体查询被先前的规则覆盖

> ID：15361205
> 
> 赞同：0
> 
> 时间：2013-03-12T12:28:36.443
> 
> 标签：css, media-queries

我试图在小于 760 像素宽的屏幕中默认隐藏我的菜单。但由于某种原因，我的`display:none`规则没有生效。它被之前的规则覆盖，如下所示：

```
media="all"
#mainmenu {
           display:inline-block;
}

@media screen and (max-width: 760px)
.btncontent {
             display:none;
} 
```

还值得注意的是，我有一个按钮，jQuery 通过添加内联样式来显示菜单。上面的代码是在按下按钮之前，没有内联样式。

我确定我在这里遗漏了一些非常简单的东西，但不确定是什么。提前致谢。

编辑：我已经通过将 ID 选择器添加到媒体查询中解决了这个问题，但是我将把这个问题保持开放，因为我真的不明白它*为什么*会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:39:32.880

是`#mainmenu`和`.btncontent`相同的元素吗？如果是这样，那么原因很简单，因为 ID 选择器比类选择器更具体。

`@media`规则不会以任何方式影响规则优先级；它们[对 cascade 是透明的](https://stackoverflow.com/questions/13241531/what-are-the-rules-for-css-media-query-overlap/13611538#13611538)，所以样式解析就像封闭`@media`规则不存在一样发生。在您的示例中，当媒体查询完成时，浏览器会看到这一点，这清楚地表明带有 ID 的规则应该优先：

```
#mainmenu {
           display:inline-block;
}

.btncontent {
             display:none;
} 
```

根据您将 ID 选择器添加到第二条规则的方式，您可以平衡或提示特异性，允许它按预期覆盖：

```
/* More specific */
#mainmenu.btncontent {
             display:none;
}

/* Equally specific */
#mainmenu, .btncontent {
             display:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:31:40.187

因为身份证很重要。

正确的路：

```
media="all"
#mainmenu {
       display:inline-block;
}

@media screen and (max-width: 760px)
#mainmenu {
         display:none;
} 
```

# java - 一个更适合输入矩阵值的java组件

> ID：15361216
> 
> 赞同：0
> 
> 时间：2013-03-12T12:28:47.817
> 
> 标签：java, javafx

我的程序解决了 LU 分解。我需要制作一个界面，用户可以在其中输入维度和输入矩阵。我尝试使用可编辑的表格，但在我看来有点复杂，因为动态列......有没有更好的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:56:34.513

您可以使用排列在矩阵中的a `List`of s 和.`JTextField``GridLayout`

我不知道这是否会比动态`JTable`.

# html - 为什么html转义/？

> ID：15361218
> 
> 赞同：1
> 
> 时间：2013-03-12T12:28:50.937
> 
> 标签：html, escaping

我在看[这个答案](https://stackoverflow.com/a/12034334/1955298)（复制如下）

我不明白的是为什么 / 逃脱了？

* * *

还有来自 mustache.js 的解决方案

[https://github.com/janl/mustache.js/blob/master/mustache.js#L82](https://github.com/janl/mustache.js/blob/master/mustache.js#L82)

```
 var entityMap = {
    "&": "&amp;",
    "<": "&lt;",
    ">": "&gt;",
    '"': '&quot;',
    "'": '&#39;',
    "/": '&#x2F;'
  };

  function escapeHtml(string) {
    return String(string).replace(/[&<>"'\/]/g, function (s) {
      return entityMap[s];
    });
  } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T13:02:18.947

根本不需要转义 HTML 中的 /。

# javascript - 如何使用 jQuery 检查 .on 中的目标元素

> ID：15361228
> 
> 赞同：0
> 
> 时间：2013-03-12T12:29:23.183
> 
> 标签：javascript, jquery, jquery-selectors, jquery-on

我不确定我的目标是哪些元素`.on`

```
 $('.levelFour').on('mouseover','> li',function(m){ 
```

我想知道，有没有办法显示目标元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:30:26.520

在事件处理程序中，`this`将绑定到触发事件的元素。要从中创建 jQuery 对象，请使用`$(this)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:31:56.147

您可以在浏览器控制台中运行以下命令

```
$('.levelFour > li') 
```

它将列出事件处理程序在执行时针对的所有元素。它会不时变化，具体取决于您的 dom 结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:34:31.760

尝试这个

```
$('.levelFour').on('mouseover','> li',function(m){
//something
}).css("border","1px solid red"); 
```

将元素的边框更改为红色。希望能帮助到你。

# sql - JOIN 整个表与 JOIN 列较少的表（通过子查询获取）

> ID：15361238
> 
> 赞同：1
> 
> 时间：2013-03-12T12:29:37.257
> 
> 标签：sql, performance, join

如果我要在两个表之间进行连接，那么对于我将它们作为一个整体加入的事实会有什么不同，或者我在仅提取所需的列之后加入它们（假设每个表可能有很多列)?

例如，是

```
SELECT tableA.foreignKey, tableB.someValue
FROM tableA JOIN tableB ON tableA.foreignKey=tableB.key 
```

有什么不同

```
SELECT tableA.foreignKey, tableB.someValue 
FROM (SELECT foreignKey FROM tableA) tableA_filtered 
JOIN (SELECT key, someValue FROM tableB) tableB_filtered 
ON tableA_filtered.foreignKey=tableB_filtered.key 
```

性能方面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:32:12.823

使用第一个，因为第二个*使用为结果创建临时表的子查询*。实际上`(SELECT valueA FROM tableA)`根本没有任何意义，因为您没有聚合表上的某些列。

子查询有时是邪恶的，*并非总是如此*。Tt 取决于您使用的 RDBMS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:52:07.143

一般规则是子查询总是很慢。根据您正在处理的数据量，它可能会产生很大的影响。

Reciently 我从一个带有很多连接的大型选择中删除了一个子查询。SQL 正在处理大约 100,000 行，如果不是更多的话。删除非常简单的子选择将性能提高了 50 秒。总体而言，sql 需要两分钟。所以影响很大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:44:19.233

我认为在表有很多列的情况下，第二个查询可能会更快。但重要的是要注意这两个查询是不等价的。第一个显示来自 A 和 B 的所有值，第二个仅显示来自 A 的 valueA 和来自 B 的 valueB！无论如何，它更像是一个理论问题，一般很难回答。

实际上，我会将这个决定留给数据库优化器。但是如果你想真正知道是否有办法让它更快，唯一安全的方法是测量和比较两个查询的运行时间。

作为旁注，第二个查询很可能会被 DBMS 的重写引擎弄平，所以它和你写的时候一样：

从 A、B 中选择 valueA、valueB，其中 A.valueA = B.valueB；

# c# - 在运行后台线程时显示加载

> ID：15361239
> 
> 赞同：0
> 
> 时间：2013-03-12T12:29:38.797
> 
> 标签：c#, asp.net, ajax

继[这篇文章之后](https://stackoverflow.com/questions/15357480/can-i-improve-ad-query-time)，我有一个进程启动并读取大约 1500 名员工的数据，当第一个应用程序页面被点击时，这是线程化的。这大约需要 30 秒才能完成，因此建议我可以使用 ajax 来显示负载正在进行中，而不是让用户等待，因为用户不必每次点击页面时都需要使用列表，所以这样他们就可以继续工作，而不会因人口延迟而受阻。
我的问题是 - 有没有人做过类似的事情？使用 updateProgress 面板是管理此问题的最佳方式吗？目标是一个下拉控件，加载完成后数据存储到会话中。目前，我用来填充控件的代码如下：

```
 // line label to get the tool to retry...
        GetSessionList:

        // atempt to get the list from session...
        var listContents = (SortedList<string, string>)this.getSessionObject("ListLookup", null);

        // if the object hasn't been stored...
        if (listContents == null)
        {
            // return and try again...
            goto GetSessionList;
        }

        // add blank item to control...
        ddlAssistantsList.Items.Add(new ListItem(string.Empty, string.Empty));

        // add the users to the dropdown...
        foreach (var item in listContents)
        {
            // define new item for current associate...
            var listItem = new ListItem(item.Key, item.Value);

            // add associate to list...
            ddlAssistantsList.Items.Add(listItem);
        } 
```

所以我不想让用户停下来让他们等待页面加载，而是让页面显示，只显示线程的进度。

# django - 使用带有外键的 Q 对象定义 django 查询集

> ID：15361246
> 
> 赞同：3
> 
> 时间：2013-03-12T12:29:50.353
> 
> 标签：django, django-queryset, django-q

示例模型：

```
class Book(models.Model):
    title = models.TextField()

class Author(models.Model):
    book = models.ForeignKey(Book)
    name = models.CharField(max_length=50) 
```

和一些示例数据：

```
Book:
id  title
1   test111
2   test222
3   test333
4   test444

Author:
book_id  name
1        test111
1        test222
2        test222
2        test333
3        test111
3        test333
4        test111
4        test333 
```

我想获取所有作者姓名包含“111”和“333”的书籍（所以所有至少有 2 个作者的书籍：第一个名称为 111，第二个名称为 333）

我可以通过使用链查询来达到这个目标：

```
books = Book.objects.filter(author__name__icontains="111").filter(author__name__icontains="333") 
```

它返回两本书 id: 3 和 4

**有没有办法通过使用 Q 对象来达到上述目标？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:13:49.503

您可以结合 reduce 和 Q，请参阅[The power of django's Q objects](http://www.michelepasin.org/blog/2010/07/20/the-power-of-djangos-q-objects/) post。

```
from django.db.models import Q
import operator
auths = [ "111", "333" ]
query = reduce(operator.and_, [ Q(author__name__icontains=x) for x in auths ] )
books = Book.objects.filter( query ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T10:33:49.677

这一个用于动态身份验证列表：

```
pk_list = qs.values_list('pk', flat=True)  # i.e [] or [1, 2, 3]

if len(pk_list) == 0:
    Book.objects.none()

else:
    q = None
    for pk in pk_list:
        if q is None:
            q = Q(pk=pk)
        else:
            q = q | Q(pk=pk)

    Book.objects.filter(q) 
```

# c# - 如何对 ObservableCollection 进行排序 绑定到 ListBoxControl？

> ID：15361253
> 
> 赞同：2
> 
> 时间：2013-03-12T12:30:14.447
> 
> 标签：c#, devexpress, observablecollection

我有一个使用 2 个 DevExpress ListBoxControls 的 winform 应用程序，用户可以将项目从一个移动到另一个。左侧的框具有“所有可用”部分，而右侧的框具有当前分配给用户的内容。我是泛型的新手，但正在尝试在这个项目中实现它们。每个 ListBoxControl 通过它的 DataSource 绑定到一个 ObservableCollection：

```
ObservableCollection<Sections> allSections = new ObservableCollection<Sections>((dbContext.Sections
                    .OrderBy(s => s.SectionName).AsEnumerable<Sections>()));

listboxAllSections.DataSource = allSections;
listboxAllSections.DisplayMember = "SectionName";
listboxAllSections.ValueMember = "SectionID"; 
```

所以我在每个列表框之间有 4 个按钮，以允许用户来回移动项目：

MoveRight `>`
MoveAllRight `>>`
MoveLeft `<`
MoveAllLeft`<<`

我创建`MoveRight`了`MoveLeft`这个通用函数：

```
private void MoveItem<T>(ListBoxControl source, ListBoxControl target)
{
    ObservableCollection<T> sourceItems = (ObservableCollection<T>)source.DataSource;
    ObservableCollection<T> targetItems = (ObservableCollection<T>)target.DataSource;

    target.BeginUpdate();

    //Add items to target.
    foreach (T item in source.SelectedItems)
        targetItems.Add(item);

    //Remove items from source.
    for (int x = 0; x < source.SelectedItems.Count; x++)
        sourceItems.Remove((T)source.SelectedItems[x]);

    target.EndUpdate();
} 
```

一切都很好，但我想为其添加排序。向右移动项目时不需要排序，只有向左移动项目时才需要排序。我不知道如何根据某个属性对通用集合进行排序。例如，`Sections`有一个`SectionName`我想要排序的属性。如果我使用实际类型，我可以这样做：

```
ObservableCollection<Sections> sourceItems = (ObservableCollection<Sections>)listboxAllSections.DataSource;

var sortedItems = new ObservableCollection<Sections>();

foreach (var item in sourceItems.OrderBy(t => t.SectionName))
    sortedItems.Add(item);
listboxAllSections.DataSource = sortedItems; 
```

但是我不知道如何使这个泛型`sourceItems.OrderBy(t => t.SectionName)`成为传入的 Type 的字段。

任何帮助/指导表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:45:14.070

你可以这样做：

```
private void MoveItem<T>(ListBoxControl source, ListBoxControl target) 
                                                             where T : IComparable
{
  var sortedItems = new ObservableCollection<T>();
  var sordet = sourceItems.OrderBy(t => t);

} 
```

如果`T`知道如何将它自己与任何东西进行比较，您可以调用 `List<T>.OrderBy(c => c)`(<-- 伪代码)，您将始终拥有一个排序列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:58:57.590

我想您应该尝试使用 a`CollectionViewSource`对`ListBox`. 这样您就不必在`ObservableCollection`. 此外，它将您的代码隐藏/ ViewModel 与表示逻辑分开。[在 MSDN 上](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.aspx)有一个示例展示了如何使用CollectionViewSource 。

# tsql - 用户定义函数：禁止插入表语句

> ID：15361254
> 
> 赞同：0
> 
> 时间：2013-03-12T12:30:18.097
> 
> 标签：tsql, sql-server-2008-r2, user-defined-functions

我想在我的 SQL 数据库中编写一个 ud 函数，以便在 dbo 表中的特定表中编写过程日志记录。

我希望我的数据库中的任何存储过程都可以调用这个特定的函数。

我不知道我可以使用什么样的解决方案。我了解到只有 3 种 UDF 可用。

有什么建议么 ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:59:04.527

UDF 必须始终没有副作用。这意味着您不能从函数内更改表中的数据。

如果您希望从存储过程中调用您的记录器，为什么不将它也实现为存储过程呢？

# javascript - jquery 每个循环只循环一次，如果使用 else 代码停止

> ID：15361255
> 
> 赞同：1
> 
> 时间：2013-03-12T12:30:18.830
> 
> 标签：javascript, jquery

下面的 javascript 和 jquery 代码有两个问题。jquery 每个循环仅迭代一次，它获取具有正确 ID 的第一个元素执行它需要执行的操作并停止。

第二个问题是，当我在代码中使用每个函数中的 else 时，它​​甚至不会尝试下一个 if，它只是退出那里。我可能在做一些根本性的错误，但是从 jquery 中的每个函数以及我对 else 的期望中，我看不到它。

Javascript代码：

```
var $checkVal;
var $checkFailed;

$("#compliance").live("keypress", function (e) {

 if (e.which == 10 || e.which == 13) {
    var checkID = $(this).parents('td').next().attr('id');
    var checkVal = $(this).val();
    $('#' + checkID).each(function () {
        var cellVal = $(this).text();
        if (checkVal == cellVal) {
            $(this).removeClass("compFail").addClass("compOk");
        } else {
            $(this).removeClass("compOk").addClass("compFail");
            var checkFailed = True;
        }
    });
    if (checkFailed == 'True') {
        (this).addClass("compFail");
    } else {
        (this).addClass("compOk");
    }
 }
}); 
```

如何让每个循环遍历每个元素的所有实例，并将 ID 分配给变量 checkID，并让代码在 else 之后继续，这样它就可以执行最后一个 if？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:34:10.890

一个`id`页面上应该**只出现一次**。如果您想拥有多个具有相同 id 的元素，请使用 a `class`，而不是 a `id`。

您的`each`循环迭代器只有一次，因为您正在选择，`id`因此您只选择页面中的一个元素。如果您将元素更改为 a`class`它应该像您期望的那样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:34:24.503

> jquery 每个循环仅迭代一次，它获取具有正确 ID 的第一个元素执行它需要执行的操作并停止。

是的，这绝对适合您使用的代码：

```
$('#' + checkID).each(function(){};) 
```

ID 属性是唯一的。DOM 中必须只有一个具有给定 ID 的元素。您的选择器只能匹配一个元素。您正在迭代一个仅包含 1 个项目的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:36:08.230

这是为了说明我在评论中所说的内容，以免您删除错误的 var：

```
var checkVal;
var checkFailed;

$("#compliance").live("keypress", function (e) {

 if (e.which == 10 || e.which == 13) {
    var checkID = $(this).parents('td').next().attr('id');
    //HERE is the first edit
    checkVal = $(this).val();
    $('#' + checkID).each(function () {
        var cellVal = $(this).text();
        if (checkVal == cellVal) {
            $(this).removeClass("compFail").addClass("compOk");
        } else {
            $(this).removeClass("compOk").addClass("compFail");
            //HERE is the second
            checkFailed = True;
        }
    });
    if (checkFailed == 'True') {
        (this).addClass("compFail");
    } else {
        (this).addClass("compOk");
    }
 }
}); 
```

通常，您拥有它的方式会导致重新声明变量时出现编译时错误（在 C# 等类型化语言中）。在这里，我不清楚它是否将用作局部变量（忽略您的全局变量）或者 javascript 是否会将它们组合并认为它们相同。无论哪种方式，您都应该像我所展示的那样使用它，以便您的意图更加清晰。

EDIT: I have removed the $ from your variables (var $checkVal) as on jsFiddle it was causing issues. SO if you do not need those $'s, then remove them. Also, note that testing on jsFiddle indicates that you do not need to change your code (other than possibly removing the $ from your declaration) as javascript appears to consider them the same variable, despite the redeclaration, which I find a bit suprising tbh.

# java - 更改 JButton 的形状

> ID：15361259
> 
> 赞同：1
> 
> 时间：2013-03-12T12:30:28.020
> 
> 标签：java, swing, jbutton, shape

我正在制作游戏 Master Mind，我用 JButton 填充了我的矩阵，这样人们就可以点击它们来改变颜色。

现在我想将矩形按钮的形状更改为圆形，有没有一种方法可以一次更改它们，因为我使用循环来创建所有它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:41:55.340

Here are some methods that have to be overwritten to edit the shape of a component. (Including sample code)

```
protected void paintComponent(Graphics g) 
  {
    if (getModel().isArmed()) {
      g.setColor(Color.lightGray);
    } else {
      g.setColor(getBackground());
    }
    g.fillOval(0, 0, getSize().width-1,getSize().height-1);

    super.paintComponent(g);
  }

  protected void paintBorder(Graphics g) {
    g.setColor(getForeground());
    g.drawOval(0, 0, getSize().width-1,     getSize().height-1);
  }

  Shape shape;
  public boolean contains(int x, int y) {
    if (shape == null || 
      !shape.getBounds().equals(getBounds())) {
      shape = new Ellipse2D.Float(0, 0, getWidth(), getHeight());
    }
    return shape.contains(x, y);
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:36:10.153

您可以在 Google 上搜索有关此的教程。

这是一个简单的教程：[如何更改 JButton 的形状](http://www.dreamincode.net/forums/topic/207123-change-the-shape-of-jbutton/)

# clojure - 如何（优雅地）一次迭代两个列表？

> ID：15361268
> 
> 赞同：3
> 
> 时间：2013-03-12T12:31:06.770
> 
> 标签：clojure

我想找到更好看的替代此代码：

```
(def x (range 1 10))
(def y '(0 4 3 5 1 2 7 3 11))
(for [i (range 0 (count y))] [(nth x i) (nth y i)]) 
```

如果我已经有了以前的结果，我可以简单地

```
(def z (for [i (range 0 (count y))] [(nth x i) (nth y i)]))
(for [[x y] z] [x y]) 
```

你能找到更好看的替代品吗？

示例简短易读。如果你修改它来做一些更复杂的事情，第一个例子可能不再可读。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T12:37:14.097

您可以使用`map`：

```
(map vector x y) 
```

# javascript - 如何在 Jquery 中列出值

> ID：15361270
> 
> 赞同：0
> 
> 时间：2013-03-12T12:31:14.867
> 
> 标签：javascript, jquery, json, getjson

我有一个发送到 getJSON 方法的 JSON 数据。JSON数据是

```
[{"Name":"P1","Description":"D1","Attribute":"E,S","Value":"EV,SV"}] 
```

和 getJSON 方法

```
$(document).ready(function () {        
    $.getJSON(url, { Name: 'P1' }, function (data) {
        $.each(data, function (k, v) {
            alert(v.Attribute + ' : ' + v.Value);
        });
    });
}); 
```

我想收到警报

```
E : EV
S : SV 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:32:37.597

试试这个

```
 $.getJSON(url, { Name: 'P1' }, function (data) {

    var aSplit=data[0].Attribute.split(',');
    var vSplit=data[0].Value.split(',');
    alert(aSplit[0] + ' : ' + vSplit[0]);
    alert(aSplit[1] + ' : ' + vSplit[1]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:33:48.660

如果数据以字符串形式出现，那么您需要`eval(data)`获取一个 javascript 对象。

尝试 ：

```
$(document).ready(function () {        
    $.getJSON(url, { Name: 'P1' }, function (data) {
        data = eval('('+data+')');
        $.each(data, function (k, v) {
            alert(v.Attribute + ' : ' + v.Value);
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:36:40.577

此处的代码假设您按顺序排列了这对。想法是拆分属性和值，然后选择具有相同索引的值进行警报。

```
 $(document).ready(function () {        
        $.getJSON(url, { Name: 'P1' }, function (data) {
             $.each(data, function (k, v) {
                 var attrs = v.Attribute.split(",");
                 var values = v.Value.split(",");
                 for(var i = 0; i < attrs.length ; i++)
                 {
                    alert(attrs[i] + " : " + values[i]);
                 }
            });
        });
    }); 
```

# security - AuthorizationRuleProvider 规则和包含空格的域组名称

> ID：15361277
> 
> 赞同：0
> 
> 时间：2013-03-12T12:31:34.547
> 
> 标签：security, enterprise-library, enterprise-library-5

我有一个带有空间的域组，它不起作用。我在谷歌上找到的唯一相关的东西是这个未回答的问题

[http://webclientguidance.codeplex.com/discussions/9242](http://webclientguidance.codeplex.com/discussions/9242)

```
<rules>
    <add name="User" expression="R:MyDomain\MyApp Users" />
</rules> 
```

我得到了这个例外：

> 在位置 17 期待单词时发现标记“文件结尾”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:25:31.560

解决方案很简单

```
<add name="User" expression="R:&quot;MyDomain\MyApp Users&quot;" /> 
```

# regex - R 捕获从模式到模式的所有内容

> ID：15361283
> 
> 赞同：1
> 
> 时间：2013-03-12T12:31:55.520
> 
> 标签：regex, r, capture

我正在尝试在两个模式之间提取一个子字符串，`BB`并且`</p>`：

```
require("stringr")
str = "<notes>\n  <p>AA:</p>\n   <p>BB: word, otherword</p>\n    <p>Number:</p>\n    <p>Level: 1</p>\n"
str_extract(str, "BB.*?:</p>") 
```

提取的子字符串应该是“word, otherword”，但我捕获的太多了：

```
 [1] "BB: word, otherword</p>\n    <p>Number:</p>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:43:14.613

也许是这样的？

```
> gsub(".*BB: (.*?)</p>.*$", "\\1", str)
# [1] "word, otherword" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:47:30.327

这是 Perl 正则表达式的工作。即，lookahead 和lookbehind 引用。`stringr`您可以将正则表达式包装在一个函数`perl`中，如下所示：

```
str_extract(str, perl("(?<=BB: ).*?(?=</p>)"))
[1] "word, otherword" 
```

您也可以使用 base 执行此操作：

```
regmatches(str, regexpr(perl("(?<=BB: ).*?(?=</p>)"), str, perl=TRUE))
[1] "word, otherword" 
```

# javascript - 按钮没有文字

> ID：15361290
> 
> 赞同：0
> 
> 时间：2013-03-12T12:32:16.537
> 
> 标签：javascript, jquery

```
$(function() {
    $('#enable_disable_btn').unbind('click');
    if ('{{$userStatus()}}' == 'Active') {
        $('#enable_disable_btn').html("Disable User");
        $('#enable_disable_btn').click(DisableUser);
    } else {
        $('#enable_disable_btn').html("Enable User");
        $('#enable_disable_btn').click(EnableUser);
    }
}); 
```

HTML：

```
<a href="#" id="enable_disable_btn"></a> 
```

该按钮显示为空白，没有文字。我想知道这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:33:24.180

如果它是一个

```
<input type="submit"> 
```

或类似的，你必须使用

```
$(...).val("Enable User"); 
```

因为它`value`是按钮上显示的属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T12:36:27.343

如果是输入类型=“按钮”或“提交”，那么您必须使用`jQuery('#enable_disable_btn').val('Disable user')`

# javascript - 为什么赋值运算符返回非布尔值

> ID：15361291
> 
> 赞同：0
> 
> 时间：2013-03-12T12:32:21.290
> 
> 标签：javascript, assignment-operator, boolean-expression, boolean-operations

我在 chrome 浏览器控制台中测试了这个 javascript 表达式的结果（输出结果为粗体）：
a = false
***false***
b = false
***false***
a||b
***false***
a|=b
***0***
为什么在最后一个表达式中 (a|=b) 不返回 a布尔值？

更新：我可以这样做吗？a=!!(a|=b)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:35:20.060

按位运算符将其操作数视为一组 32 位（零和一）并返回标准 JavaScript 数值。

取自[mdn](https://developer.mozilla.org/en-US/docs/JavaScript/Reference)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:52:23.140

它不返回布尔值，但分配变量的值和最后一条语句将值`a`从布尔值更改为整数：

```
操作类型值输出
               ABAB       
a = false bool undefined false undefined false 1 
b = false bool bool false false false 1 
a || b bool bool false false false 2 
a |= b 整数 bool 0 false 0 3

```

¹分配的最后一个变量的值（在这种情况下`a`或`b`使用 value `false`）。
²逻辑运算符`||`（逻辑或）的值：`false OR false === false`。让我稍微简化一下（太多了？）但是因为`a`是假的，所以你有`b`. 只需看一下**§ 11.11**。
³按位运算符`|`（按位或，请参阅**第 11.10 节**），规范说必须将其操作数评估为其*值*（在您的情况下为布尔值），然后转换为有符号的 32 位整数，结果是另一个有符号的 32 位整数。从**§ 9.3**我们知道从布尔到数字的转换产生 0`false`和 1 `true`，然后根据**第 9.5 节**将它们转换为 32 位有符号整数（这里又是 0）。

**参考**
[JavaScript 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:54:28.573

因为`|`不是布尔值，而是作用于有符号 32 位整数的[位运算符- 数字。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)因此，`false`在应用运算符之前，布尔输入首先被强制转换为零。

此外，[逻辑 OR 运算符`||`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)也不是布尔值。它只是[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)为左（如果为真）或右表达式的值，在您的情况下为布尔类型。如果你用过`var a=0, b=0`它也会产生`0`。

# android - 清单仅限于平板电脑，但三星 Galaxy S2 仍可使用应用程序

> ID：15361292
> 
> 赞同：4
> 
> 时间：2013-03-12T12:32:23.320
> 
> 标签：android, android-manifest, android-screen-support

我只想在平板电脑上运行我的应用程序。所以我在清单文件中声明了以下代码：

```
<supports-screens 
    android:smallScreens="false"
    android:normalScreens="false"
    android:largeScreens="true"
    android:xlargeScreens="true"
    android:anyDensity="false"
    android:requiresSmallestWidthDp="600"/> 
```

但是当我连接我的三星 Galaxy S2 手机 ( `hdpi 480x800`) 时，它仍然显示在 Eclipse 的 Android 设备选择器中。

我只想支持 7" 和 10" 平板电脑。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T12:28:05.520

你可能想看看[这里](http://android-developers.blogspot.com/2011/09/preparing-for-handsets.html)。

您编写的清单限制对于此目的并不完全正确：

用这个：

```
<supports-screens android:smallScreens="false"
                  android:normalScreens="false"
                  android:largeScreens="false"
                  android:xlargeScreens="true"
                  android:requiresSmallestWidthDp="600" /> 
```

这以两种不同的方式描述了您的应用程序的屏幕尺寸支持：

它声明该应用程序不支持屏幕尺寸桶“小”、“正常”和“大”，传统上不支持平板电脑

它声明应用程序需要一个屏幕尺寸，其最小可用区域至少为 600dp 宽

第一种技术适用于运行 Android 3.1 或更早版本的设备，因为这些设备根据通用屏幕尺寸桶声明其尺寸。requiresSmallestWidthDp 属性适用于运行 Android 3.2 及更高版本的设备，它增加了应用程序根据与密度无关的像素的最小数量指定其尺寸要求的能力。在此示例中，应用程序声明了 600dp 的最小宽度要求，这通常意味着 7 英寸或更大的屏幕。

当然，您的尺寸选择可能会有所不同，这取决于您的设计在不同屏幕尺寸上的效果；例如，如果您的设计仅适用于 9 英寸或更大的屏幕，则您可能需要 720dp 的最小宽度。

问题是您必须针对 Android 3.2 或更高版本编译您的应用程序才能使用 requiresSmallestWidthDp 属性。旧版本不理解此属性，会引发编译时错误。最安全的做法是针对与您为 minSdkVersion 设置的 API 级别相匹配的平台开发您的应用程序。当您为构建候选版本做最后准备时，请将构建目标更改为 Android 3.2 并添加 requiresSmallestWidthDp 属性。早于 3.2 的 Android 版本会忽略该 XML 属性，因此不存在运行时失败的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T10:22:43.077

您无法过滤该应用程序是否安装在手机上（通过 Eclipse，或者如果它是从外部源下载的）。此设置将限制应用程序从 Google Play 市场下载到手机上。

# ruby-on-rails-3 - Rails 2 到 Rails 3 - ActiveRecord::StatementInvalid

> ID：15361294
> 
> 赞同：1
> 
> 时间：2013-03-12T12:32:29.380
> 
> 标签：ruby-on-rails-3, activerecord

以下 ActiveRecord 调用会导致 InvalidStatement 错误。当我什至提供硬编码的用户 ID 时，就会发生这种情况。会话转储显示会话变量“user_id”也具有有效值。有人可以帮忙吗？

```
def index
 @nav = []
 @user = B2bUser.find(request.session[:user_id])
 @privileges = B2bPrivilege.lookup_all request.session[:user_id]
end

## lookup_all method from b2b_privilege model
def B2bPrivilege.lookup_all current_user_id
  return B2bPrivilege.find_by_sql("SELECT b2b_privileges.*, vendors.name AS vendor_name FROM b2b_privileges LEFT JOIN vendors ON vendors.id = b2b_privileges.vendor_id WHERE b2b_user_id = ?", current_user_id)
end

Processing by HomeController#index as HTML
Could not log "sql.active_record" event. NoMethodError: undefined method `name' for nil:NilClass
PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: ..."b2b_users".* FROM "b2b_users"  WHERE "b2b_users"."" = $1 LI...
                                                         ^
: SELECT  "b2b_users".* FROM "b2b_users"  WHERE "b2b_users"."" = $1 LIMIT 1
Completed 500 Internal Server Error in 13ms

ActiveRecord::StatementInvalid (PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: ..."b2b_users".* FROM "b2b_users"  WHERE "b2b_users"."" = $1 LI...
                                                         ^
: SELECT  "b2b_users".* FROM "b2b_users"  WHERE "b2b_users"."" = $1 LIMIT 1):
app/controllers/home_controller.rb:7:in `index' 
```

# highslide - 使用单独的文本锚展开 Highslide 图像

> ID：15361298
> 
> 赞同：0
> 
> 时间：2013-03-12T12:32:32.587
> 
> 标签：highslide

单击缩略图时，我成功使用 Highslide 展开图像。`<p>`当点击下方标签中的锚点时，我无法让图像展开。

```
<div class="highslide-gallery">
    ...
    <div class="feature">
        <a href="/images/001.jpg" class="highslide" onclick="return hs.expand(this, config1)">
            <img src="/images/thumbs/001.jpg" />
        </a>
        <p>
            <a href="/images/001.jpg" onclick="hs.expand(null, {src: '/images/001.jpg'});">Anchor Text</a>
        </p>
    </div>
    ...
</div> 
```

当页面加载时，会显示两个展开图像的实例，一个在另一个之上。

单击每个图像会正常关闭图像。

单击图像缩略图会出现两个展开的图像。

单击锚文本可以正常工作，即展开一个图像并在单击时正常关闭。

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:30:08.467

图像在页面加载时扩展了两次，因为您使用的是锚文本`null`而不是在 onclick 中。`this`

正确的点击：

```
<a href="/images/001.jpg" onclick="return hs.expand(this)">Anchor Text</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:15:46.563

只需将链接放在一起：

```
div class="highslide-gallery">
    ...
    <div class="feature">
        <a href="/images/001.jpg" class="highslide" onclick="return hs.expand(this, config1)">
            <img src="/images/thumbs/001.jpg" /><p>Anchor Text</p>
        </a>
    </div>
    ...
</div> 
```

# android - 如何通过 SIM_IO 从 sim 卡中读取 MSISDN？

> ID：15361302
> 
> 赞同：1
> 
> 时间：2013-03-12T12:32:44.320
> 
> 标签：android, c, android-ndk

我需要在 android 中阅读 MSISDN，但我们必须使用 .c 来完成它。我打开一个套接字发送`RIL_REQUEST_SIM_IO`到 ril。这是日志。

```
D/RILC    (  106): [0004]> SIM_IO (cmd=0xB2,efid=0x6F40,path=3F007F10,1,4,30,(null),pin2=(null),aid=(null))
...
D/RILC    (  106): [0004]< SIM_IO {sw1=0x90,sw2=0x0,ffffffffffffffffffffffffffff0891684125205260f5ffffffffff} 
```

我是否使用了正确的参数（P1 = 1、P2 = 4、P3 = 30）？

以及如何通过响应获取手机号码？

谢谢！☺</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:59:48.177

你在这里有什么困惑？你想知道你对卡片说了什么吗？所有这些信息都在 ISO 7816-4 和其他一些规范中，但这里是您所做的详细信息：

您向 SIM (0xB2) 发送了读取记录命令您要求提供路径：

```
3F00 -> (MF)
7F10 -> (DF_TELECOMM)
6F40 -> (MSISDN) 
```

您设置参数：

```
P1 (record)                   = 1  (record 1)
P2 (reference control)        = 4  (this mean use record number set in P1)
P3 (Le meaning bytes to read) = 30 (bytes) 
```

你得到了成功（SW代表状态字，你得到SW1 / SW2 = 0x9000这意味着成功）和数据（0xffffffffffffffffffffffffff0891684125205260f5ffffffffff）

在解析您的 MSISDN 时查看[E.164 。](http://www.itu.int/itudoc/itu-t/ob-lists/icc/e164_763.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T02:33:13.967

数据 (0xffffffffffffffffffffffffffffff0891684125205260f5ffffffffff) 是的，它包含 MSISDN

----08 = 表示拨号号码的长度

----91 = 表示 MSISDN 国际拨号 否

其余的 (684125205260f5) 值 u nid 以将其并排交换每个 1 字节。例如 68 交换 86、41 交换 14 ......然后你会得到 MSISDN 号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T05:55:39.007

万一以后有帮助：编码可以在 TS 51.011 上找到。文件名为 EF_MSISDN。它的标识符是 6F40。

MSISDN 前面是它的长度，然后是 TON/NPI。它也是 BCD 反转格式

# android - 自定义列表视图中使用的带有单选按钮的列表视图复选框？

> ID：15361318
> 
> 赞同：0
> 
> 时间：2013-03-12T12:33:25.850
> 
> 标签：android

嗨，我正在创建一个带有动态复选框的自定义列表视图，添加了我想要的内容，但是当我尝试在第一行中选择一个复选框时，自动选择第 5、9、13 行中的第一个按钮，当我选择时第二行中的任何按钮然后第 6、8、12 行中的相同按钮被选中我在这里做错了什么和我的适配器类

```
class listViewEventscustomAdapter extends BaseAdapter {
    LayoutInflater mInflater;
    ViewHolder holder;

    public listViewEventscustomAdapter(Context context) {
        mInflater = LayoutInflater.from(context);

    }

    public int getCount() {
        if (arrListViewoption_title != null) {
            return arrListViewoption_title.size();
        } else {
            Toast.makeText(getApplicationContext(), "No item found",
                    Toast.LENGTH_LONG).show();
            return 0;
        }
    }

    public Object getItem(int arg0) {
        return arg0;
    }

    public long getItemId(int arg0) {
        return arg0;
    }

    @SuppressWarnings("unchecked")
    public View getView(final int position, View convertView,
            ViewGroup parent) {
        View v = convertView;
        final CheckBox checkitem;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.customlistviewdata, null);
        }
        if (v != null) {
            holder = new ViewHolder();
            holder.txtoptiontitle = (TextView) v
                    .findViewById(R.id.optiontitle);
            holder.txtsubtitle = (TextView) v.findViewById(R.id.subtitle);
            checkitem = (CheckBox) v.findViewById(R.id.checkBox1);
            holder.btn_radio = (RadioButton) v
                    .findViewById(R.id.radio0);

            holder.txtoptiontitle.setText(arrListViewoption_title
                    .get(position));
            holder.txtsubtitle.setText(arrlistViewsub_title.get(position));

            if (value.equals(arrListViewoption_type.get(position)
                    .toString().trim())) {
                checkitem.setVisibility(View.VISIBLE);
                holder.btn_radio.setVisibility(View.GONE);

            }

            else {
                holder.btn_radio.setVisibility(View.VISIBLE);
                checkitem.setVisibility(View.GONE);

            }

            checkitem
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(CompoundButton view,
                                boolean isChecked) {
                            // int getPosition = (Integer) view.getTag();
                            // list.get(getPosition).setSelected(view.isChecked());

                            if (view.isChecked()) {

                                checkboxvalue.add(arrlistViewsub_title
                                        .get(position).toString().trim());
                            } else {
                                System.out
                                        .println("*************unchecked");
                                checkboxvalue.remove(arrlistViewsub_title
                                        .get(position).toString().trim());
                                adapter_list.notifyDataSetChanged();

                            }

                            Log.i(this.toString(),
                                    "Item" + checkboxvalue.size());

                        }
                    });

            holder.btn_radio
                    .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(
                                CompoundButton buttonView, boolean isChecked) {
                            // TODO Auto-generated method stub
                            if (buttonView.isChecked()) {

                                // Action Doing here

                            }
                        }
                    });

            v.setTag(holder);

        }
        return v;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:42:28.023

使用转换视图对于性能和快速滚动很有用，但可能会导致此类问题。

您应该在重用之前从转换视图重置任何设置值。在你的情况下：

```
boolean wasItemChecked = checkboxvalue.contains(arrlistViewsub_title.get(position).toString().trim());
checkItem.setChecked(wasItemChecked ); 
```

如果 checkItem 状态发生变化，它会根据数据源状态将其重置为真实状态。

希望有帮助。

# mysql - mysql shell脚本中的错误，“数据库：找不到命令”

> ID：15361320
> 
> 赞同：0
> 
> 时间：2013-03-12T12:33:34.683
> 
> 标签：mysql, bash, shell

尝试执行此命令时出现以下错误：

命令：

```
$(mysql -u root -proot -e 'show databases;') > dbnames 
```

错误：

```
Database: command not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:15:06.877

`$( mysql -u ... )`计算命令的*结果*。`mysql`在此示例中，该字符串随后被视为要执行的命令，因此相当于尝试运行

```
$ Databases > dbnames
Databases: command not found 
```

您只需执行以下`mysql`命令：

```
mysql -u root -proot -e 'show databases;' > dbnames 
```

# javascript - 如何定义 JQGrid 管理行 ID 的方式？

> ID：15361321
> 
> 赞同：0
> 
> 时间：2013-03-12T12:33:35.537
> 
> 标签：javascript, jquery, jqgrid, client-side, data-visualization

我想要实现的是通过单元格上的事件我想加载与单元格中的值关联的 TimeSeries 数据并将其绘制在页面上的图表中。我使用 JQGrid 和 Flot。

在其[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)中，我看到了 event `onCellSelect`。它有两个参数 -`iCol`和`rowid`。阻碍我的是 JQGrid 如何将此 ID 分配给列和行的不确定性，因此当此事件触发时，我如何将其`rowid`与`iCol`时间序列中的正确列和行相关联。
将不胜感激对此的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:08:54.613

您可以只传入一个 ID 值并将其放在隐藏列中。您可以从 select 事件中访问该值，如下所示：

```
onSelectRow: function (rowid, iRow, iCol, e) {
        var hiddenIdValue = $(this).jqGrid('getCell', rowid, 'HiddenIdColumn')
        .... 
```

# android - NotificationCompact.Builder 和 ActionBarSherlock 的问题

> ID：15361324
> 
> 赞同：9
> 
> 时间：2013-03-12T12:33:40.920
> 
> 标签：android, compiler-errors, notifications, actionbarsherlock

在以下代码中，Eclipse 发现了一个错误：

```
The method build() is undefined for the type NotificationCompat.Builder 
```

在添加之前一切正常[`ActionBarSherlock`](http://actionbarsherlock.com/)（按照[本教程](http://www.grokkingandroid.com/adding-actionbarsherlock-to-your-project/)）。

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.TaskStackBuilder;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.support.v4.app.NotificationCompat;

public class NotificationActivity extends BroadcastReceiver {

    NotificationManager nm;

    @Override
    public void onReceive(Context context, Intent intent) {
        nm = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        int notifyID = 1;
        NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                context)
                .setSmallIcon(R.drawable.zcicon)
                .setAutoCancel(true)
                .setDefaults(
                        Notification.DEFAULT_SOUND
                                | Notification.DEFAULT_LIGHTS)
                .setTicker("mytitle").setContentTitle("mycontent")
                .setContentText("text, text");
        Intent resultIntent = new Intent(context, CalcareReader.class);
        TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
        // Adds the back stack for the Intent (but not the Intent itself)
        stackBuilder.addParentStack(MyActivity.class);
        // Adds the Intent that starts the Activity to the top of the stack
        stackBuilder.addNextIntent(resultIntent);
        PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,
                PendingIntent.FLAG_UPDATE_CURRENT);
        mBuilder.setContentIntent(resultPendingIntent);

        nm.notify(notifyID, mBuilder.build()); // error here
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T12:44:59.240

`build()`已添加到较新版本的 Android 支持包中。根据您获取和设置 ActionBarSherlock 的方式，您可能使用的是旧版本的 Android 支持包。确保在 SDK 管理器中下载了最新版本，然后`android-support-v4.jar`在 ActionBarSherlock 项目和主应用程序项目中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T19:52:51.963

build() 来自旧版本的 android-support-v4.jar

[ 如果使用 ActionBar Sherlock ]

1 从 SDK 更新 Android 支持库

2 将此复制粘贴到您的 lib/ 文件夹，或更新路径中的引用

3 对 sherlockactionbar 项目执行相同的操作。请注意，如果您有 android-support2-v4.jar，请将其删除并仅添加 android-support-v4.jar

4 清洁

# wordpress - WordPress 查询 - 按元字段值排序

> ID：15361327
> 
> 赞同：2
> 
> 时间：2013-03-12T12:33:43.057
> 
> 标签：wordpress, custom-fields

我有一个包含三个元字段的帖子。

```
add_post_meta($my_post, 'times', $times); 
```

我想查询这个类别并按其中一个的元字段值对帖子进行排序。我现在使用的参数是：

```
  $args=数组（
        'post_type' => '发布',
        'category_name' => '玩家',
        '订单' => 'DESC',
        'orderby' => 'meta_value_num',
        'meta_key' => '次',
        'meta_query' => 数组（
       大批（
           'key' => '次',
           '价值' => 0,
           '比较' => '>=',
       ),
        'posts_per_page'=> '8'
        )
        );

```

其中 times 是元字段的名称。上面的代码没有返回任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:49:57.413

你有`'posts_per_page'=> '8'`你的`meta_query`论点。

将您的代码更改为以下内容：

```
$args=array(
    'post_type' => 'post',
    'category_name' => 'players',
    'order' => 'DESC', 
    'orderby' => 'meta_value_num',
    'meta_key' => 'times',
    'meta_query' => array(
        array(
            'key' => 'times',
            'value' => 0,
            'compare' => '>=',
        )
    ),
    'posts_per_page'=> '8'
); 
```

# c - C中的文件操作

> ID：15361333
> 
> 赞同：-1
> 
> 时间：2013-03-12T12:33:49.660
> 
> 标签：c, file, mkdir

我正在使用一个简单的“C”代码来执行以下操作：

1) 从 .txt 文件中读取。

2) 根据 .txt 文件中的字符串，将创建一个目录。

我无法执行第 2 步，因为我不清楚类型转换。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <direct.h>

int main()
{
   char ch, file_name[25];
   FILE *fp;

   //printf("Enter the name of file you wish to see\n");
   //gets(file_name);

   fp = fopen("input.txt","r"); // read mode

   if( fp == NULL )
    {
      perror("Error while opening the file.\n");
      exit(EXIT_FAILURE);
    }

   printf("The contents of %s file are :\n", file_name);

   while( ( ch = fgetc(fp) ) != EOF )
      printf("%c",ch);

    if( _mkdir(ch ) == 0 )
   {
      printf( "Directory successfully created\n" );
      printf("\n");
   }
   fclose(fp);
   return 0;
} 
```

这是错误：

```
 *error #2140: Type error in argument 1 to '_mkdir'; expected 'const char *' but found 'char'.* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:37:00.790

是的，编译器是对的。

您将 char 传递`c`给`_mkdir`，而不是字符串。

您应该从文件中读取字符串并将其存储到`file_name`（我猜您忘记了）然后

```
_mkdir(file_name); 
```

见下文：

```
#include <stdio.h>
#include <stdlib.h>
#include <direct.h>

int main()
{
    char file_name[25];
    FILE *fp;

    fp = fopen("input.txt", "r"); // read mode

    if (fp == NULL)
    {
        perror("Error while opening the file.\n");
        exit(EXIT_FAILURE);
    }

    fgets(file_name, 25, fp);

    _mkdir(file_name);

    fclose(fp);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:36:39.170

这是因为您只有一个`char`（`c`in`fgetc`代表`char`）而`_mkdir`想要一个字符串（ie `char *`）。

您可能应该[`fgets`](http://en.cppreference.com/w/c/io/fgets)改用它来读取输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:05:52.447

如果您不想使用 fgets ，那么您可以使用它。

```
#include <stdio.h>
#include <stdlib.h>
#include <direct.h>
int main()
{
char file_name[25];
String str;
FILE *fp;
char ch;
int i=0;

fp = fopen("input.txt", "r"); // read mode

if (fp == NULL)
{
    perror("Error while opening the file.\n");
    exit(EXIT_FAILURE);
}
 while( ( ch = fgetc(fp) ) != EOF ){
  printf("%c",ch);
  file_name[i];
  i++
}
str=file_name;

_mkdir(str);

fclose(fp);
return 0;
} 
```

# css - 将 evenlistener 添加到 div 的标题

> ID：15361336
> 
> 赞同：0
> 
> 时间：2013-03-12T12:33:58.160
> 
> 标签：css, html, drag-and-drop

我的 div 有多个事件监听器：`dragstart`、`dragenter`、`dragover`、`dragleave`和.`drop``dragend`

要将它们附加到我的 div，我使用以下`body onload`功能：

```
function addListeners()
{
    var cols = document.querySelectorAll('#columns .column');
    [].forEach.call(cols, function(col) {
      col.addEventListener('dragstart', handleDragStart, false);
      col.addEventListener('dragenter', handleDragEnter, false);
      col.addEventListener('dragover', handleDragOver, false);
      col.addEventListener('dragleave', handleDragLeave, false);
      col.addEventListener('drop', handleDrop, false);
      col.addEventListener('dragend', handleDragEnd, false);
    });
} 
```

**但是**这段代码将事件监听器添加到整个 div 中。我只希望 div 的标题响应这些事件：

![拖放示例](../Images/add994390a22c67b59ab954a83af6e64.png)

现在我可以点击 div 的任何部分并拖动它，但我只想能够点击 div 的黑色部分（标题）来移动它。黑色部分是`header`CSS 中的一个简单部分。

### HTML

```
<body onload="addListeners()">

<div id="columns">
  <div class="column" draggable="true"><header>A</header>Textual information inside div A</div>
  <div class="column" draggable="true"><header>B</header>Textual information inside div B</div>
  <div class="column" draggable="true"><header>C</header>Textual information inside div C</div>
</div>

</body> 
```

我的完整页面的 JSFiddle 可以在[这里找到。](http://jsfiddle.net/Lxcpr/ "这里")

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:21:00.457

您需要将 EventListeners 添加到您的`header`元素中。

但`event listeners`只有当你的标题是`draggable=true`

因此，通过将 EventListeners 添加到标题并制作它，`draggable=true`您可以开始拖动它。

但是现在有一个问题，你不想只拖标题，而是拖它的全部内容，即它的父 div。并且您想将其与 `parentNode.innerHTML`另一个标题（您正在丢弃的标题）交换。

所以，你需要这样做：

*   将事件添加到标题元素，
*   执行所有其他操作，即在标题的父级上抓取然后交换 innerHTML，即`this.parentNode`
*   同样，当您执行 innerHTML 交换时，所有事件侦听器都会丢失，因为现在重新创建了非常可拖动的元素，因此您将不得不再次调用您的事件绑定函数`addListeners()`。

[工作小提琴](http://jsfiddle.net/manishmishra256/mFpWF/1/)

# asp.net-mvc - 函数使用 BEAN 时的 ActionLink 错误

> ID：15361337
> 
> 赞同：0
> 
> 时间：2013-03-12T12:33:59.550
> 
> 标签：asp.net-mvc, vb.net

我收到以下错误。

> “抱歉，处理您的请求时出现了一个错误。”

我正在尝试添加一个简单的 ActionLink 以返回到类别列表。

视图中的代码是：

```
<p>
    <%: Html.ActionLink("Return to List of DVDs", "DVDs", 
                         New With {.controller = "DVD"})%>
</p> 
```

我函数中的代码是：

```
 Function DVDs(ByVal category As Integer) As ActionResult    
        Dim DVDsList As IList(Of DVDBEAN) = _DVDSearchService.GetDVDs(category)
        If Not User.Identity.IsAuthenticated Then
            Return RedirectToAction("LogOn", "Account")
        Else
            If Not User.IsInRole("Admin") Then
                Return View("CustomerDVDs", DVDsList)
            End If
            Return View("DVDs", DVDsList)
        End If
       End Function 
```

我是 Web 开发和 ASP.NET 的新手，所以请放轻松。我很感激任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:36:37.203

尝试这个

```
<p><%: Html.ActionLink("Return to List of DVDs", "DVDs", "DVD")%></p> 
```

# javascript - 与嵌套属性中的键相关的主干关系

> ID：15361343
> 
> 赞同：3
> 
> 时间：2013-03-12T12:34:11.043
> 
> 标签：javascript, backbone.js, backbone-relational

我正在使用 Backbone-relational 来建立关系模型。但是我遇到了相关模型的问题，这些模型的键位于嵌套属性中。

我的模型如下所示：

```
Event.Model = Backbone.RelationalModel.extend({
    urlRoot: "/events",

    defaults: {
      "id": null,
      "title": {
        "en": "Event name"
      },
      "related": {
        "actions": {}
        "resources": {
           "production": production_id
        }
      }
    },

    relations: [
      {
        type: Backbone.HasOne,  
        key: "related.resources.production",
        relatedModel: Production.Model,
        relatedCollection: Production.Collection,
        autoFetch: true
      }
    ]
}); 
```

我想要实现的是：将 Event.Model.related.resources.production 变成 Production.Model。上面的代码不起作用。

当我通过实现一个 Event.Model#parse() 来修复它时，它将 Event.Model#related.resources.production 移动到 Event.Model#production，我将“关系”中的键设置为“生产”，它确实有效。但这似乎是一个非常老套的解决方案。

这是否意味着 Backbone-relational 不理解键中的 dotNotation？还是我做错了什么？

# javascript - Backbonejs - 在不更改 URL 的情况下触发路由事件

> ID：15361356
> 
> 赞同：2
> 
> 时间：2013-03-12T12:34:36.130
> 
> 标签：javascript, backbone.js, marionette

在 Backbone 中，有没有办法在**不**更改 URL 的情况下触发路由事件处理程序？

我的意思是我想触发一个路由处理程序，但我不想更改 URL。因此，我不想使用

```
router.navigate(route, {trigger: true}); 
```

因为这会导致 URL 发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:35:36.663

路由器本身连接到一个功能。简单的答案是直接调用该函数，只是绕过路由处理。

### 例子

```
(function( $, Backbone ) {
    var exports = window.app = window.app || {},
        Router = Backbone.Router.extend({
            // Here you declare what the routes are in your router
            // and what functionality they should trigger.
            routes: {
                "help"                : "help",
                "search/:query"       : "search",
                "search/:query/p:page": "search"
            },

            // Declare route functions.
            help  : function() {},
            search: function( query, page ) {}
        });

    // Export the router.
    exports.router = new Router();

    // Just a dummy object for calling the router.
    var cookieMonster = {
        init: function() {
            // Do something on init.

            // End with calling the route help function.
            exports.router.help();
        }
    };
}(jQuery, Backbone)); 
```

`cookieMonster.init()`在这种情况下，将以调用`help`路由器中的函数结束。

一个技巧是查看 Backbone Marionette，你有一个**控制器**，它的功能逻辑与路由分离，这是让 Marionette 很棒的许多事情之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T12:52:47.577

对于它的价值，木偶路由在这里得到了广泛的解释：http: [//samples.leanpub.com/marionette-gentle-introduction-sample.pdf](http://samples.leanpub.com/marionette-gentle-introduction-sample.pdf)

所讨论的策略是将 URL 管理与应用程序反应（例如切换子应用程序）分开。这意味着您可以在不修改 URl 片段的情况下让您的应用程序触发处理程序（使用 Marionette 事件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T16:21:32.343

你试过`Backbone.history.loadUrl(route);`吗？

# javascript - Box2dweb 禁止移动

> ID：15361364
> 
> 赞同：1
> 
> 时间：2013-03-12T12:35:00.387
> 
> 标签：javascript, box2d, box2dweb

我现在在 box2d 中创建了一个对象，并使用键盘输入移动它。接下来我想做的是停止这个身体可以进行的垂直运动。换句话说，它应该能够左右移动，但不能上下移动，即使与另一个物体发生碰撞也是如此。

我创建盒子的代码：

```
 var fixDef2 = new b2FixtureDef;
           fixDef2.density = 1.0;
           fixDef2.friction = 0.5;
           fixDef2.restitution = 0.2;
           var bodyDef2 = new b2BodyDef;
           bodyDef2.type = b2Body.b2_dynamicBody;

           fixDef2.shape = new b2PolygonShape;
           fixDef2.shape.SetAsBox(
                 50/30 + 0.1 //half width
              ,  6/30 + 0.1 //half height
           );
        bodyDef2.position.x = Math.random() * 10;
        bodyDef2.position.y = Math.random() * 10;
        bodyDef2.fixedRotation = true;
bodies["player"]=world.CreateBody(bodyDef2);
bodies["player"].CreateFixture(fixDef2);
var direction = new b2Vec2(-100,0); 
```

键盘输入：

```
 $("body").keydown(function (e) {
             switch(e.which){
                case 37:{ left = true; break;   }
                case 38:{ up=true; break; }
                case 39:{ right=true; break; }
                case 40:{ down = true; break; }                 
             }
        });
        $("body").keyup(function (e) {
             switch(e.which){
                case 37:{ left = false; break;  }
                case 38:{ up=false; break; }
                case 39:{ right=false; break; }
                case 40:{ down = false; break; }                    
             }
        }); 
```

和我的更新功能，其中身体数组中名为“玩家”的框被移动

```
 if(left){
            var direction = new b2Vec2(-100,0);
            bodies["player"].ApplyForce( direction , bodies["player"].GetPosition() );
        }
        if(right){
            var direction = new b2Vec2(100,0);
            bodies["player"].ApplyForce( direction , bodies["player"].GetPosition() );
        } 
```

所以我想禁止我的身体[“玩家”]身体上可能发生的所有垂直运动，我该怎么做。

我现在使用的是 Prismatic 关节，但是当我尝试将其中一个物体设为静态物体时出现错误：

```
var pj = new b2PrismaticJointDef();
pj.bodyA = bodies["left"];
pj.bodyB = bodies["player"];
pj.collideConnected = true;
prismaticJoint = world.CreateJoint(pj); 
```

身体的创建[“左”]：

```
 bodyDef.type = b2Body.b2_staticBody;
     fixDef.shape = new b2PolygonShape;
     fixDef.shape.SetAsBox(2, 14);
     bodyDef.position.Set(-1.8, 13);
     bodies["left"] = world.CreateBody(bodyDef).CreateFixture(fixDef); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T15:36:15.893

use `b2_kinematicBody` rather than `b2_dynamicBody`.

Something like:

```
var con_body_def = new b2BodyDef;
con_body_def.type = b2Body.b2_kinematicBody;
con_body_def.position.y = con_bmp.y / SCALE;
con_body_def.position.x = con_bmp.x / SCALE;
var con_fix = new b2FixtureDef;
con_fix.restitution = SETTINGS.CON_E;
con_fix.friction = SETTINGS.CON_FR;
con_fix.shape = new b2PolygonShape;
    con_fix.shape.SetAsArray(get_shape());
con_fix.userData = 0;
var con_body = world.CreateBody(con_body_def);
con_body.CreateFixture(con_fix); 
```

then to update it's position:

```
con_body.SetLinearVelocity(direction); 
```

(look at game.js [here](http://scolvin.com/ballgame/) for a working example)

# nullpointerexception - 使用 AssetCategoryLocalServiceUtil 创建 AssetCategory

> ID：15361365
> 
> 赞同：0
> 
> 时间：2013-03-12T12:35:01.497
> 
> 标签：nullpointerexception, liferay, liferay-6

我正在尝试使用[AssetCategoryLocalServiceUtil](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/asset/service/AssetCategoryLocalServiceUtil.html#addCategory%28long,%20long,%20java.util.Map,%20java.util.Map,%20long,%20java.lang.String%5B%5D,%20com.liferay.portal.service.ServiceContext%29)的[addCategory](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/asset/service/AssetCategoryLocalServiceUtil.html#addCategory%28long,%20long,%20java.util.Map,%20long,%20java.lang.String%5B%5D,%20com.liferay.portal.service.ServiceContext%29)方法创建[AssetCategory](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/asset/model/AssetCategory.html)。但是，我不知道应该指定什么作为 ServiceContext。与 LocalServiceUtil 类（Group、Organizations）的其他添加方法不同，我推断我不能将 ServiceContext 设置为 null。我已经尝试过，并且在调用该方法时收到了 NullPointerExeption。如果我尝试创建一个，只是为了在方法中传递它，我会收到一个 AssetCategoryNameException。我将其创建为：

```
ServiceContext serviceContext = new ServiceContext();
serviceContext.setScopeGroupId(180); 
```

我怎样才能解决上述问题（无一例外地创建 AssetCategory）？

**更新：**我还需要指定一个词汇表。我怎样才能获得一个词汇（或词汇列表）才能获得它的 id？我试过代码：

```
List<AssetVocabulary> vl = AssetVocabularyUtil.findAll();.
int VocabId = vl.get(0).getVocabularyId(); 
```

但它抛出异常：
org.hibernate.HibernateException: No Hibernate Session bound to thread，并且配置不允许在这里创建非事务性会话

我该怎么做才能获得 VocabularyId？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:12:11.990

看看这段代码，希望对你有帮助：

```
// you can particularise your serviceContext as @Jonas Fonseca says
ServiceContext serviceContext = new ServiceContext();
Map<Locale,String> titleMap = new HashMap<Locale, String>();
titleMap.put(Locale.getDefault(), "categoryName");
// vocabularyID needs to point to an existing vocabulary
AssetCategoryLocalServiceUtil.addCategory(userId, parentCategoryId, titleMap, new HashMap<Locale,String>(), vocabularyID, new String[]{}, serviceContext); 
```

当然是关于如何创建一个最简单的例子`AssetCategory`，但它工作正常。

**更新：**

如果你需要词汇，你可以这样：

```
// in case you have vocabulary id
AssetVocabularyLocalServiceUtil.getVocabulary(vocabularyId);
// in case you have the vocabulary name
AssetVocabularyLocalServiceUtil.getGroupVocabulary(groupId, vocabularyName);
// you can get all vocabularies in group
AssetVocabularyLocalServiceUtil.getGroupVocabularies(groupId);
// ...or all vocabularies in portal
int count = AssetVocabularyLocalServiceUtil.getAssetVocabulariesCount();
AssetVocabularyLocalServiceUtil.getAssetVocabularies(0, count); 
```

（记得调用 *LocalServiceUtil 方法而不是 *Util 这样你就可以避免 Hibernate 异常）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:38:21.663

如果你得到`AssetCategoryNameException`它意味着名称是[无效](https://github.com/liferay/liferay-portal/blob/6.1.x/portal-impl/src/com/liferay/portlet/asset/service/impl/AssetCategoryLocalServiceImpl.java#L537)的，例如 null。

您需要设置的信息`ServiceContext`取决于您调用的服务。作为最低要求，您应该设置 userId（将设置为所有者）、站点的 groupId 和 companyId。此外，还应设置权限属性，控制谁可以查看资产类别，特别是如果该类别将与资产发布者一起使用，则可以根据查看权限过滤内容。

```
ServiceContext createServiceContext(ThemeDisplay themeDisplay) {
    ServiceContext serviceContext = new ServiceContext();
    serviceContext.setCompanyId(themeDisplay.getCompanyId());
    serviceContext.setScopeGroupId(themeDisplay.getScopeGroupId());
    serviceContext.setUserId(themeDisplay.getUserId());
    serviceContext.setAddCommunityPermissions(true);
    serviceContext.setAddGuestPermissions(true);
    return serviceContext;
} 
```

# asynchronous - Glassfish 3.1.2 似乎不会在 EJB 中运行多个线程

> ID：15361366
> 
> 赞同：1
> 
> 时间：2013-03-12T12:35:01.760
> 
> 标签：asynchronous, glassfish, ejb

我有一个 EJB 来计算某事。只要计算运行，精度就会提高。所以一个 async 函数开始计算，一个 async 应该停止它。但是在 Glassfish 3.1.2 调用上运行`stopCalculating()`并不会创建一个新线程，而是等到`startCalculating()`完成，这显然永远不会发生。

```
import java.util.concurrent.Future;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.ejb.AsyncResult;
import javax.ejb.Asynchronous;
import javax.ejb.Singleton;

@Singleton
public class Calculator {

    private boolean calculating = false;
    private String result = "Empty";

    @Asynchronous
    public void startCalculating() {
        calculating = true;
        Logger.getGlobal().log(Level.INFO, "Starting!");
        calculate();
    }

    private void calculate() {
        result = "";
        while(calculating) {
        /*Calculate and update result*/
            Logger.getGlobal().log(Level.INFO, "Calculate...");
        }
    }

    @Asynchronous
    public Future<String> stopCalculating() {
        Logger.getGlobal().log(Level.INFO, "Stopping!");
        calculating = false;
        return new AsyncResult<String>(result);
    }
} 
```

如何让*Glassfish*`stopCalculating()`在其他线程中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:30:26.843

我认为这是因为默认情况下 Singleton EJB 具有`@Lock(WRITE)`访问权限。

您正在使用本地调用而不是通过 EJB 代理，因此`calculate()`从中调用`startCalculating(-)`是整个`startCalculating(-)`调用的一部分（也是如此`@Local(WRITE)`）。

我会尝试添加`@Lock(READ)`到您的`calculate()`方法并将本地呼叫更改为业务呼叫，或者只是`@Lock(READ)`为您的 EJB 设置并试一试。

# jquery - 单击/退出元素时隐藏表单

> ID：15361367
> 
> 赞同：0
> 
> 时间：2013-03-12T12:35:06.610
> 
> 标签：jquery, forms, hide, jquery-focusout

我在一页上有几个表格。当我点击外部时，每个都需要隐藏

```
div class="login">
  <p><a title="Entrar" href="static-login.html">Entrar</a></p>
  <form action="" class="disabled" method="post" id="login">
    <p class="close"><a title="Cerrar" href="static.html">Cerrar</a></p>
    <h2>¿Es usted ya cliente?</h2>
    <p class="email">
      <label for="email">Su correo electrónico</label>
      <input id="email" name="email" type="text" placeholder="Su correo electrónico" />
    </p>
    <p class="password">
      <label for="password">Su contraseña</label>
      <input id="password" name="password" type="text" placeholder="Su contraseña" />
    </p>
    <p class="button">
      <input type="submit" value="Entrar" />
    </p>
  </form>
</div> 
```

所以我为此得到的jquery是

```
$(document).ready(function() {
  $('.layer').hide();
  $('.login form').hide();
  $('.login a').click(function(){
    $('.login form').toggle();
    $('.layer').toggle();
    $(".login form input:text").first().focus();
  });
  $(".login form input").focusout(function() {
    $('.login form').hide();
    $('.layer').hide();
  });
}); 
```

但是一旦我从电子邮件转移到密码，它就会隐藏所有内容，因此 .focusout 不起作用

我试过 $('body').click(function() { 而不是 .focusout 但它破坏了其他 jquery :-/

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:55:49.683

在选择器中使用 :not

```
$(":not(.login form input)").click(function() {
    $('.login form').hide();
    $('.layer').hide();
}); 
```

# sql - 在 SQL Mgmt Studio 中，我可以从对象资源管理器运行查询，但不能从设计窗口运行

> ID：15361370
> 
> 赞同：0
> 
> 时间：2013-03-12T12:35:27.353
> 
> 标签：sql

在针对 2008 数据库的 SQL Mgmt explorer 2008 中，当我右键单击视图并单击选择前 1000 行时，一切正常。我什至可以通过删除“TOP 1000”并重新执行视图来更改它以查看所有行。但是，当我右键单击视图并单击设计然后执行视图时，它会出现执行错误，找不到一堆多部分标识符。这是一个相当复杂的查询，有很多连接。

它已经工作了很多年，并且仍在工作。但我需要编辑查询，它不会让我设计和测试它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:47:16.550

在管理工作室的左上角，您应该有一个包含所有数据库的下拉列表。是否选择了正确的数据库？

# ruby-on-rails - 为什么我的 resque 工作找不到对象？

> ID：15361372
> 
> 赞同：6
> 
> 时间：2013-03-12T12:35:31.403
> 
> 标签：ruby-on-rails, postgresql, redis, resque

在我们的 Rails 应用程序中。我们保存一个模型（视频）。我们对该对象有一个回调：

```
after_create :send_to_background_job, :if => :persisted? 
```

该方法如下所示：

```
def send_to_background_job
  Resque.enqueue(AddVideo, self.id)
end 
```

当工人被调用时。它执行以下操作：

```
class AddVideo
  @queue = :high

  def self.perform(video_id)
    video = Video.find(video_id)
    video.original_file_name
    .... 
```

Resque-web 报错：

```
AddVideo
Arguments
51061
Exception
NoMethodError
Error
undefined method `original_filename' for nil:NilClass 
```

这有点奇怪，因为如果我去 Rails 控制台寻找这个视频。它确实存在。此外，调用`Resque.enqueue(AddVideo, 51061)`第二次，运行没有任何错误。

就好像将记录保存在数据库中所需的时间比创建工人/作业所需的时间要长。但是即使这个语句也没有加起来，因为对象只有在对象被保存后才会调用 Resque 作业。在 Rails 中，这是通过模型 ( `after_create`) 中的回调方法完成的。

不知道这是否在问题中起作用。在初始化文件中，我有：

```
Resque.before_fork do
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.connection.disconnect!
end

Resque.after_fork do
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.establish_connection
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T12:59:38.687

这可能是因为保存对象的实际事务尚未提交，而后台作业已经开始处理它。

您应该将 after_create 切换为

```
after_commit :send_to_background_job, on: :create 
```

# c++ - 在不更改接口的情况下向对象添加功能

> ID：15361374
> 
> 赞同：6
> 
> 时间：2013-03-12T12:35:36.550
> 
> 标签：c++, design-patterns, c++11

我有一个对象作为接口的引用/指针。如果该方法存在，我想在具体对象上调用该方法，而无需更改接口、破坏封装或编写任何可怕的 hack。怎么做到呢？

这是一个例子。

我有一个界面：

```
class IChatty
{
public:
    virtual ~IChatty() {};
    virtual std::string Speak() const = 0;
}; 
```

以及这个接口的多个具体实现：

```
class SimpleChatty : public IChatty
{
public:
    ~SimpleChatty() {};

    virtual std::string Speak() const override
    {
        return "hello";
    }
};

class SuperChatty : public IChatty
{
public:
    void AddToDictionary(const std::string& word)
    {
        words_.insert(word);
    }
    virtual std::string Speak() const override
    {
        std::string ret;
        for(auto w = words_.begin(); w != words_.end(); ++w )
        {
            ret += *w;
            ret += " ";
        }
        return ret;
    }
private:
    std::set<std::string> words_;
}; 
```

该`SuperChatty::AddToDictionary`方法不存在于抽象`IChatty`接口中，尽管它可以包含在另一个新接口中。

在现实世界中，这些对象是通过工厂构造的，它们本身就是抽象接口的具体实例。然而，出于我们的目的，这与手头的问题是正交的：

```
int main()
{
    IChatty* chatty = new SuperChatty;
    chatty->AddToDictionary("foo");
    std::cout << chatty->Speak() << std::endl;
} 
```

由于`AddToDictionary`不是`IChatty`接口的一部分（*也不能*成为接口的一部分），所以我可以调用它。

如何`AddToDictionary`在`chatty`不破坏封装、编写一些可怕的 hack 或采用任何其他设计快捷方式的情况下调用指针？

注意：在现实世界中，字典是`SuperChatty`对象本身的一部分，不能与它分开。

NOTE2：我不想贬低具体类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T12:49:15.367

让字典成为一个可以被更新和引用的对象`SuperChatty`：

```
class Dictionary {
public:
    void add(const std::string& word);
    const std::set<std::string>>& words() const;
    //..
};

class SuperChatty : public IChatty
{
public:
    SuperChatty(Dictionary& dictionary) :
    dictionary(dictionary) {
    }

    virtual std::string Speak() const override
    {
        auto words = dictionary.words();
        ostringstream oss;
        copy(words.begin(), words.end(),
             ostream_iterator<string>(oss, " "));
        return oss.str();
    }
}; 
```

用法：

```
int main()
{   
    Dictionary dictionary;
    IChatty* chatty = new SuperChatty(dictionary);
    dictionary.add("foo");
    std::cout << chatty->Speak() << std::endl;
} 
```

*编辑*

好吧，问题变了。

如果您正确执行此操作，则需要将自己与不良的底层系统隔离开来：

```
struct Dictionary {
    virtual ~Dictionary () {}
    virtual void add(const std::string& word) = 0;
};

struct Instrumenter {
    virtual ~Instrumenter () {}
    virtual void addDictionary(Dictionary& dictionary) = 0;
};

struct Chatter {
    virtual ~Chatter() {}
    virtual string speak() const = 0;
    virtual void instrument(Instrumenter& instrumenter) = 0;
}; 
```

这些实现为：

```
class BasicChatter : public Chatter {
    virtual string speak() const {
        return chatty.Speak();
    }
    virtual void instrument(Instrumenter& instrumenter) {
        // do nothing
    }
private:
    SimpleChatty chatty;
};

class SuperChatter : public Chatter {
    SuperChatter () : dictionary(chatty);

    virtual void instrument(Instrumenter& instrumenter) {
        instrumenter.addDictionary(dictionary);
    }

    virtual string speak() const {
        return chatty.Speak();
    }
private:
    SuperChatty chatty;
    DictionaryImpl dictionary;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T12:37:41.833

让它从另一个接口派生并简单地检查你是否可以将对象转换为该接口。

```
class IDictionary
{
public:
    virtual ~IDictionary() {};
    virtual void AddToDictionary(const std::string& word) = 0;
};

class SuperChatty : public IChatty, public IDictionary
{
     ... as before ...
};

int main()
{
    IChatty* chatty = new SuperChatty;

    IDictionary *dict = dynamic_cast<IDictionary*>(chatty);
    if (dict) dict->AddToDictionary("foo");
    std::cout << chatty->Speak() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:47:09.790

主要问题是您正在丢弃您需要的信息。

所以主要的解决方案是不要丢弃信息，但是没有足够的代码来充实信息的细节。

其次，一个技术性的组合解决方案是只是沮丧，使用`dynamic_cast`：

```
IChatty* newThingy();

int main()
{
    IChatty* chatty = newThingy();
    if( SuperChatty* p_super_chatty = dynamic_cast<SuperChatty*>( chatty ) )
    {
        p_super_chatty->AddToDictionary("foo");
    }
    std::cout << chatty->Speak() << std::endl;
} 
```

您可以安全地向下转型，因为已知的静态类型`IChatty`是多态的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:48:25.720

对于这个特定的例子，没有理由不这样创建对象：

```
SuperChatty* chatty = new SuperChatty;

chatty->AddToDictionary("foo"); 
```

您仍然可以`chatty`将上述段作为`IChatty`指针或引用传递，例如

```
void Talk(IChatty *ch)
{
   ch->Speak();
} 
```

[同样用于存储`chatty`a`vector<IChatty*>`或类似的东西]。

我的意思是，如果您要使用“新”接口函数，那么您可能还想创建具有新接口的类。

将代码添加到“尝试强制转换”等会很快变得非常混乱，并且容易出错。

# sql-server - Sql Server 2008 上的数据库别名

> ID：15361378
> 
> 赞同：0
> 
> 时间：2013-03-12T12:35:42.217
> 
> 标签：sql-server, linked-server, synonym

我需要运行从我的 server1 到 server2 的迁移，两台服务器都具有相同的数据库架构

Server1：DB1.dbo...所有表 DB2.dbo...所有表

Server2：DB1.dbo...所有表 DB2.dbo...所有表

我需要从 server1 连接到 server2，并且在完成此脚本之前，我必须在本地环境中运行并且数据库名称不同（例如 DB1_Local 而不是 DB1）

我尝试为“Server1.DB1.dbo”创建同义词，因此当我必须将 Server1 的表与 Server2 上的其他表连接时，我将运行

MySynonymForServer1.MyTable 加入 MySynonymForServer2.MyTable ON ....

但这不起作用...

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:57:12.547

同义词用于对象。您不能为模式或数据库创建同义词。但是，您可以为不同数据库中的对象创建同义词。所以在你的情况下，你必须为数据库中的每个对象创建一个同义词。您可以通过循环遍历`sys.objects`. 只要确保过滤掉不需要的对象类型，如约束。

# kineticjs - KineticJS：没有形状的阴影？

> ID：15361379
> 
> 赞同：4
> 
> 时间：2013-03-12T12:35:43.277
> 
> 标签：kineticjs

在[KinectJS](http://kineticjs.com/)中，如何在不绘制“投射”它的形状的情况下创建阴影（即边缘模糊的半透明形状）？

起初我认为可以让形状投射阴影，但将形状本身的不透明度设置为零。像这样：

```
var rect = new Kinetic.Rect({
    width: 100,
    height: 100,
    opacity: 0,
    shadowEnabled: true,
    shadowBlur: 10,
    shadowOpacity: 0.6
}); 
```

但是，这不起作用，因为最终的 shadowOpacity 似乎乘以形状自身的不透明度值。所以如果形状不透明度==0，那么最终的shadowOpacity = 0.6 * 0 == 0。这意味着阴影最终也是不可见的。

您对如何达到预期效果有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:04:32.627

我不认为你可以有没有形状的阴影，除非你用模糊的触摸来构建你的自定义形状。您可以将主要形状隐藏在视图之外，如下所示。不过，我不建议将其用于许多形状。

```
 <div id="container"></div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.1-beta2.js"></script>
    <script>
      var stage = new Kinetic.Stage({
        container: 'container',
        width: 578,
        height: 200
      });

      var layer = new Kinetic.Layer();

      var rect = new Kinetic.Rect({
        x: -120,
        y: -90,
        width: 100,
        height: 50,
        fill: 'blue',
        stroke: 'black',
        strokeWidth: 1,
        shadowColor: 'black',
        shadowBlur: 10,
        shadowOffset: 150,
        shadowOpacity: 0.5
      });

      layer.add(rect);
      stage.add(layer);

    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:52:11.040

您需要的是模糊滤镜。这将在本月晚些时候（2013 年 3 月）随 v4.3.4 一起发布。由于 w3c 规范，阴影不是创建模糊边缘的好机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T13:22:30.557

我记得通过更改 kinteticjs 框架来创建带有阴影的透明按钮来做到这一点。我更改了特定的形状方法以允许填充相反的方向。每当您填充相反的方向时，它会从同一填充中的任何其他形状中删除该形状。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T13:51:05.633

我认为，这可以帮助你：[http](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shadows/) ://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-shadows/ 。

# wso2 - WSO2 或 Fusesource

> ID：15361380
> 
> 赞同：1
> 
> 时间：2013-03-12T12:35:46.093
> 
> 标签：wso2, fuseesb

我们向客户推荐 WSO2 作为 ESB、BPM、BAM 和治理解决方案。但是客户热衷于采用 FuseSource ESB。我们推荐的原因：

**WSO2::**

```
 **Pros**
        Complete Middleware stack offering including ESB,BPEL,BAM,Registry etc.
        Good Interfaces for Administration console  and Product Coverage
        WSO2 IDE provides support to create basic component cofiguration with extensive support for Mediator customization.
        Single setup instance installation is simple
        Creating proxy services and applying setting like security can be done from the console.
    **Cons:**
    Not a very large community to support
    No BPM support
    Based on Apache Synapse and ODE not as popular as camel and BPM.
    No graphical tool to see message flow through ESB
    Not based on standard ESB[Apache Synapse], BPEL[Apache ODE] finding help is difficult. FuseSource, Talend  and JBOSS ESB use Camel so wider community support.
    Though the GUI is available but considerable underlying xml,xpath configurations are required to make things work. 
```

**Fusesource ESB::**

```
 **Pros:**
        Support for multiple protocols and standards.
        Fabric supports good cloud and cluster support  
    **Cons:**
        With Red hat having three ESB offerings
        - Old JBoss ESB (going away)
        - New Red Hat SwitchYard ESB (beta)
        - FuseSource ESB (Apache ServiceMix and Camel based)
        They are still in the process of consolidating 
```

[http://rajdavies.blogspot.in/2013/02/whats-future-for-fuse-at-red-hat.html](http://rajdavies.blogspot.in/2013/02/whats-future-for-fuse-at-red-hat.html)

感谢您对此的任何建议。

谢谢，瓦吉德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:47:53.323

瓦吉德，

首先，您应该了解 Fuse 是一款集成产品，而 WSO2 是一款 SOA 产品。它们不相同，但执行相似的功能。但是，可以使用集成工具实施强大的 SOA 治理策略。如果您可以接受任何一种工具都符合您客户的意图，请继续阅读。但是，如果您的客户真的喜欢字母“S”、“O”和“A”，并且不能接受有任何其他好的企业集成策略，我建议您看看更多的开源 SOA 产品，而不是只是WSO2。

我有使用过 Fuse 和 WSO2 的经验，我更喜欢 Fuse。原因是 WSO2 周围缺乏活跃的用户社区，这让我强烈质疑 WSO2 高度采用率的说法的真实性。在过去 3 年的大部分时间里，我将开源应用程序集成到企业部署中，我的经验是开源产品的实用性与其用户社区的活动水平成正比。

如果您查看 Fuse 和 WSO2 的成本效益分析，您必须考虑为什么您正在寻找开源产品，而不是像 Oracle 的 SOA Suite 和 IBM 这样的闭源产品。原因是成本。您是在告诉您的客户，您可以以便宜的价格为他们提供一些东西，但仍然可以获得与从封闭源代码产品中获得的相同水平的支持。然而，现实情况是，您唯一没有支付的成本是前期许可成本。您的客户仍可能需要购买某种维护和支持。

如果您可以接受您的客户仍需要为某种支持付费，那么您需要能够评估您将能够获得的支持水平。Fuse 拥有多年提供高级培训、支持的经验，并且还受益于非常活跃的用户社区。许多 Fuse 采用者发现用户社区非常强大，以至于他们根本不需要购买支持。事实上，Fuse 提供免费的网络研讨会、大量的免费文档，并且比大多数闭源公司更好地支持他们的产品。

我已经研究 WSO2 大约一周了，发现 WSO2 堆栈的情况正好相反。事实上，我发现他们的响应能力比闭源供应商差。他们的文档还可以，但是他们缺乏有关其集成堆栈如何工作的信息。在我计划的部署中（由于 WSO2 缺乏响应以及用户社区的冷漠，我已经放弃了），我想使用他们的 ESB 和治理注册表。它们似乎都是非常好的产品。然而，用户社区要么不存在，要么冷漠，而且他们似乎没有积极监控他们唯一宣传的社区支持位置 StackOverflow。

由于这些原因，我强烈建议使用 Fuse 而不是 WSO2。

# awk - 如何从日志文件中获取 IP 地址？

> ID：15361381
> 
> 赞同：4
> 
> 时间：2013-03-12T12:35:50.813
> 
> 标签：awk, gawk

我正在尝试将 IP 地址分成几列，我是新手，不知道从哪里开始，希望你能给我一些见解。

我的日志文件

```
crawl-66-249-64-13.googlebot.com - - [17/Oct/2004:04:40:15 +0100] "GET /robots.txt HTTP/1.0" 200 25 "-" "Googlebot/2.1 (+http://www.google.com/bot.html)"
66-194-6-72.gen.twtelecom.net - - [17/Oct/2004:04:50:06 +0100] "GET / HTTP/1.1" 200 1727 "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; Q312460)"
dup-200-66-220-217.prodigy.net.mx - - [17/Oct/2004:05:36:43 +0100] "GET /midi/main_p.htm HTTP/1.1" 200 1061 "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)"
dup-200-66-220-217.prodigy.net.mx - - [17/Oct/2004:05:37:08 +0100] "GET /favicon.ico HTTP/1.1" 404 1154 "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)"
dup-200-66-220-217.prodigy.net.mx - - [17/Oct/2004:05:37:17 +0100] "GET /midi/mt_pcmid.htm HTTP/1.1" 200 1839 "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)"
dup-200-66-220-217.prodigy.net.mx - - [17/Oct/2004:05:37:24 +0100] "GET /midi/mt_midcp.htm HTTP/1.1" 200 884 "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)"
dup-200-66-220-217.prodigy.net.mx - - [17/Oct/2004:05:37:32 +0100] "GET /midi/mt_mpc.htm HTTP/1.1" 200 3321 "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)" 
```

如何只显示 IP 地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:40:01.383

试试这个（使用*替换*和*捕获组*）：

```
gawk '{
    print gensub(/[^0-9]*([0-9]{1,3})-([0-9]{1,3})-([0-9]{1,3})-([0-9]{1,3}).*/,
        "\\1.\\2.\\3.\\4",
        "g",
        $0)
}' file.txt 
```

另一种解决方法`DNS`：

```
cut -d' ' -f1 file.txt | xargs dig +short 
```

或与`awk`：

```
awk '{print $1}' file.txt | xargs dig +short 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:42:27.530

您还可以使用 grep 和 tr：

```
grep -Eo '([0-9]+-){3}[0-9]+' infile | tr - . 
```

输出：

```
66.249.64.13
66.194.6.72
200.66.220.217
200.66.220.217
200.66.220.217
200.66.220.217
200.66.220.217 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:47:25.790

```
perl -lne 'm/(\d+-\d+-\d+-\d+)\./;$a=$1;$a=~s/-/\./g;print $a' your_file 
```

测试：

```
> perl -lne 'm/(\d+-\d+-\d+-\d+)\./;$a=$1;$a=~s/-/\./g;print $a' temp
66.249.64.13
66.194.6.72
200.66.220.217
200.66.220.217
200.66.220.217
200.66.220.217
200.66.220.217 
```

# extjs - ExtJs - 通过 Gridpanel 的索引获取行

> ID：15361385
> 
> 赞同：4
> 
> 时间：2013-03-12T12:35:55.097
> 
> 标签：extjs

我使用带有网格面板的 Extjs 4.1。现在我想通过 id/index 获取一行来隐藏它（不是过滤器）。

我试过了（它说没有getRow方法）：

`gridpanel.getView().getRow( 0 );`

现在正确的方法是什么？

我知道`gridview`有`getRow`，为什么我不能使用它？

编辑：4中似乎没有这种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:49:17.813

由于 ExtJS 4.1.3 不再返回 a`GridView`你必须解决这个问题。

看看： [Sencha 论坛 --> 获取 gridview 行元素](http://www.sencha.com/forum/showthread.php?258071-How-to-get-an-Element-of-a-grid-row-in-Ext-JS-4&p=945574)

在我看来，这是一个丑陋的解决方案，但并没有引起太多关注。

# javascript - 如果已选中单选按钮，如何防止第二次单击以防止 javascript 事件

> ID：15361388
> 
> 赞同：2
> 
> 时间：2013-03-12T12:36:08.750
> 
> 标签：javascript

如果已选中单选按钮，如何防止第二次单击单选按钮，以防止 javascript 事件。

当我在单选按钮上做很多事情时

```
<input name="EnumEvent" type="radio" value="Open" onclick="show_event()"/> 
```

javascript

```
function show_event()
{
    document.getElementById("radio-btns-div1").style.display="block";
    document.getElementById('invited').style.display="none";
    document.getElementById('invited').value = '';
    document.getElementById('invite_1').value='';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:41:56.980

您可以使用更改事件而不是单击

```
<input name="EnumEvent" type="radio" value="Open" onchange="show_event()"/> 
```

**[演示](http://jsfiddle.net/LHkpH/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:42:04.830

添加禁用属性

```
function show_event()
{
  document.getElementByName("EnumEvent").setAttribute("disabled", "disabled");
  ...
} 
```

当/如果您希望允许用户选择另一个选项时，请不要忘记删除该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:38:59.617

```
var clicked = false;
$('input:radio.yourclass').click(function(event){
     if (clicked){
         event.preventDefault();
     }
     clicked = true;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:44:47.587

```
function Clicked() {
if (document.getElementById("radio-btns-div1").checked) {

document.getElementById("radio-btns-div1").disabled = true;
} 
```

请参阅[根据所选选项禁用单选按钮](https://stackoverflow.com/questions/9739514/disable-radio-button-according-to-selected-choice)

# ios - 从其视图触发 UIViewController 中的方法

> ID：15361391
> 
> 赞同：5
> 
> 时间：2013-03-12T12:36:16.480
> 
> 标签：ios, cocoa-touch, uiviewcontroller

我有一个`UIViewController`with 它`UIView`，其中包含一个`UIButton`. 我想`UIViewController`在按钮单击事件中触发一个方法。
保持参考`UIViewController`似乎不是一个好主意，如以下链接所述： [Get to UIViewController from UIView?](https://stackoverflow.com/questions/1340434/get-to-uiviewcontroller-from-uiview-on-iphone)

所以我想使用委托来实现这一点。关于如何实现这一目标的任何提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T14:14:05.577

你可以做这样的事情

**自定义视图.h**

```
#import <UIKit/UIKit.h>
@protocol CustomViewDelegate <NSObject>

 -(void)didButtonPressed;

@end

 @interface CustomView : UIView

  @property (assign) id<CustomViewDelegate> delegate;

@end 
```

**自定义视图.m**

```
#import "CustomView.h"
@implementation CustomView

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    self.backgroundColor = [UIColor whiteColor];

    //[self addSubview:titleLbl];
    UIButton *button= [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(100, 100, 100, 50);
    [button addTarget:self.delegate action:@selector(didButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [button setTitle:@"pressMe" forState:UIControlStateNormal];
    [self addSubview:button];

}
return self;
} 
```

在你的**ViewController.m**

```
-(void)loadView
 {
  [super loadView];
  CustomView *view = [[CustomView alloc]initWithFrame:self.view.bounds];
  view.delegate = self;
  [self.view addSubview:view];

 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-28T20:02:13.077

这就是构建响应者链的目的。当您向按钮添加目标时，只需`nil`为目标提供：

```
[mySpecialButton addTarget:nil 
                 action:@selector(mySpecialButtonTapped:)
                 forControlEvents:UIControlEventTouchUpInside]; 
```

`nil`目标基本上意味着“发送`mySpecialButtonTapped:`到响应者链中可以处理它的任何对象” 。

现在您可以在响应者链中的任何位置处理此选择器，包括按钮本身、其包含的视图、其包含的视图控制器、UIApplication，最后是您的 AppDelegate。只需将此方法放在最适合您需要的对象中：

```
- (void)mySpecialButtonTapped:(id)sender {
    NSLog("My special button was tapped!");
} 
```

如果您只想将消息冒泡，则不需要委托或回调块（如已接受的答案）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:36:59.343

我猜您期望一些更基本的东西，然后将一些按钮操作传递给控制器​​。在模型/视图/控制器协作的情况下，我总是遵循 MVC 模式。它解决了您的问题和许多其他问题。我想分享我的经验。

1.  将控制器与视图和模型分开：不要将所有“业务逻辑”放入与视图相关的类中；这使得代码非常不可用。制作控制器类来托管此代码，但要确保控制器类不会对表示做出太多假设。
2.  使用定义回调 API `@protocol`，`@optional`如果不是所有方法都需要，则使用。
3.  对于视图定义协议`<view class name>Protocol`（例如 NewsViewProtocol）。对于控制器定义委托`<view class name>Delegate`（例如 NewsViewDelegate）和数据`<view class name>DataSource`源（例如 NewsViewDataSource）。将所有这些@protocols 保存在一个名为的单独文件中`<view class name>Protocol.h`（例如 NewsViewProtocol.h）

## 简短的例子：

**NewsView.h 的内容**

```
//
// NewsView.h
@interface NewsView : UIView <NewsViewProtocol> {
@protected
     NSObject* delegate_;
     NSObject* dataSource_;
}
@end 
```

**NewsController.h 和 .m 的内容**

```
//
// NewsController.h
@interface NewsController : UIViewController <NewsViewDataSource, NewsViewDelegate> {
}
@property (nonatomic, weak) UIView<NewsViewProtocol>* customView;
@end

@implementation NewsController
- (void)viewDidLoad {
    [super viewDidLoad];
    self.customView = (UIView<NewsViewProtocol>*)self.view;
    [self.customView setDelegate:self];
    [self.customView setDataSource:self];
}
@end 
```

**NewsViewProtocol.h 的内容**

```
//
// NewsViewProtocol.h
@protocol NewsViewProtocol;

@protocol NewsViewDelegate<NSObject>
@optional
- (void)someAction;
- (void)newsView:(UIView<NewsViewProtocol>*)newsView didSelectItemAtIndexPath:(NSIndexPath *)indexPath;
@end

@protocol NewsViewDataSource<NSObject>
@required
- (id)newsView:(UIView<NewsViewProtocol>*)newsView itemAtIndexPath:(NSIndexPath *)indexPath;
- (NSInteger)numberOfItemsInNewsView:(UIView<NewsViewProtocol>*)newsView section:(NSInteger)section;
- (BOOL)newsView:(UIView<NewsViewProtocol>*)newsView shouldDisplaySection:(NSInteger)section;
@end

@protocol NewsViewProtocol<NSObject>
@required

//Never retain delegate instance into implementation of this method
- (void)setDelegate:(NSObject<NewsViewDelegate>*)delegate;
//Never retain delegate instance into implementation of this method
- (void)setDataSource:(NSObject<NewsViewDataSource>*)dataSource;
- (void)reload;
@end 
```

你可能认为它是多余的。在简单的视图控制器中，是的。但是，如果您开发具有大量数据的非常复杂的屏幕，那么它会给您带来一些优势，例如：

*   帮助您分离视图和控制器之间的责任。
*   保持你的代码清晰。
*   使您的代码更具可重用性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:44:57.597

在 xCode 中生活很轻松。

一开始请确保您的 xib 视图（其中带有按钮的视图）与正确的 ViewController 类相关联。它可以是新项目或您的自定义项目附带的默认 ViewController 类。

在这之后，魔术就来了！将您的视图分成 2 个面板。目标是查看您的 xib 和 viewController 代码（.m 文件）。现在按下键盘的控制键并将 UIButton 拖到代码中。选择 IBA 动作。它会生成一些你可以用其他语言称之为“听众”的东西。进入你的 View Controller 的核心代码，完成方法！

就这么简单！玩得开心 ：）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-12T12:42:24.093

您实际上并不需要委托 - 这就是 UIButton 的用途。只需按住 Control 单击并从按钮拖动到 UIViewController 的 .m 文件。这将创建一个新方法。从那里，您可以调用您编写的方法，也可以将您拥有的内容复制粘贴到新方法中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-12T13:04:20.843

以编程方式添加按钮，在 myViewController.m

```
UIView *yourView = [[UIView alloc] init];
UIButton *yourButton = [[UIButton alloc] initWithFrame:CGRectMake(0,0,100,21)];
[yourButton addTarget:self action:@selector(yourMethod) forControlEvents:UIControlEventTouchDown];
[yourView addSubview:yourButton]; 
```

更多信息[在这里](https://stackoverflow.com/questions/1378765/how-do-i-create-a-basic-uibutton-programmatically)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-12T13:06:30.243

你可以试试这个：

```
[yourButton addTarget:self action:@selector(yourButtonAction:) forControlEvents:UIControlEventTouchUpInside]; 
```

并在您的选择器中指定操作

```
- (IBAction)yourButtonAction:(id)sender {
     //Action to perform
} 
```

# php - 如何更正此非法字符串偏移？

> ID：15361392
> 
> 赞同：29
> 
> 时间：2013-03-12T12:36:19.547
> 
> 标签：php, wordpress

我收到此错误“警告：第 32 行 /home/mysite/public_html/wp-content/themes/evento/lib/php/extra.class.php 中的非法字符串偏移‘类型’”

我意识到文件中的这部分代码是错误的，但是我在 PHP 方面还不是很好，我想知道是否有人可以帮助我重新编写这部分以消除错误。谢谢！（错误从第 32 行开始，这是下面 if 语句的开头）

这是代码：

```
/* new version */
    function get_attachment_struct( $inputs ){
        $attach = array();

    if( $inputs['type'] == 'attach' ){ 
            $name = $inputs['name'];
            $attach = array(
                0 => array(
                    'name' => $name,
                    'type' => 'text',
                    'label' =>  'Attachment URL',
                    'lvisible' => false,
                    'upload' => true,
                ),
                1 => array(
                    'name' => $name .'_id',
                    'type' => 'hidden',
                    'upload' => true
                ),
            );

            if( isset( $inputs[ 'classes' ] ) ){
                $attach[0]['classes'] = $inputs[ 'classes' ];
                $attach[1]['classes'] = $inputs[ 'classes' ] . '_id';
            }
        }
        return $attach;
    }

    /* new version */ 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-12T13:26:06.450

```
if ($inputs['type'] == 'attach') { 
```

该代码是有效的，但它期望函数参数`$inputs`是一个数组。使用时的“非法字符串偏移”警告`$inputs['type']`意味着该函数被传递的是字符串而不是数组。（然后由于字符串偏移量是一个数字，`'type'`不适合。）

所以理论上问题出在其他地方，代码的调用者没有提供正确的参数。

但是，此警告消息对于 PHP 5.4 来说是新的。如果发生这种情况，旧版本没有警告。他们会默默地转换`'type'`为`0`，然后尝试获取字符串的字符 0（第一个字符）。所以如果这段代码应该可以工作，那是因为滥用这样的字符串不会引起对 PHP 5.3 及以下版本的任何投诉。（很多老的PHP代码在升级后都遇到过这个问题。）

您可能想通过检查调用代码来调试*为什么*函数被赋予一个字符串，并通过在函数中执行 a 来找出它具有什么值`var_dump($inputs);`。但是，如果您只想关闭警告以使其表现得像 PHP 5.3，请将行更改为：

```
if (is_array($inputs) && $inputs['type'] == 'attach') { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T00:57:57.073

```
if(isset($rule["type"]) && ($rule["type"] == "radio") || ($rule["type"] == "checkbox") )
{
    if(!isset($data[$field]))
        $data[$field]="";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-08T12:24:16.037

```
if (isset($inputs['type']) && $inputs['type'] == 'attach') { 
```

或者

```
if (is_array($inputs) && isset($inputs['type']) && $inputs['type'] == 'attach') { 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-06-30T20:54:06.037

当我使用 php ver 7.1.6 时，我在 WP 中遇到同样的错误 - 只需将您的 php 版本恢复到 7.0.20，错误就会消失。

# git - git jenkins scm 插件权限被拒绝

> ID：15361398
> 
> 赞同：4
> 
> 时间：2013-03-12T12:36:35.810
> 
> 标签：git, ssh, jenkins, ssh-agent

当我尝试设置作业以从 git 存储库构建项目时，出现错误：

```
Failed to connect to repository : Command "git ls-remote -h ssh://git@ssh://git@host.com/path/to/repos.git HEAD" returned status code 128:
stdout: 
stderr: Permission denied (publickey). 
fatal: The remote end hung up unexpectedly 
```

在 Jenkins 中，我安装了 SSH 代理插件和 Git 插件。

我可以使用以下内容添加构建步骤：

```
git ls-remote -h ssh://git@host.com/path/to/repos.git HEAD 
```

运行构建并且有效！

这告诉我一切都已正确设置：

*   钥匙和钥匙的位置。
*   Jenkins/Manage Jenkins/Manage Plugins -> SSH 代理插件和 Git 插件。
*   Jenkins/Manage Jenkins/Manage Credentials 条目是正确的。

似乎这不适用于源代码管理，但对于预构建/构建/构建后操作它可以。

在构建过程之前未激活 Ssh 代理是否存在问题？

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:36:24.970

“在构建过程之前没有激活 SSH 代理有问题吗？” - 是的，这很烦人。

我确实在我的狩猎中读到了“某处”，他们计划在未来使 SSH 代理正确地环绕 git 和其他插件。

如果您使用 SSH 代理设置运行一个简单的 shell 命令，您将清楚地看到它在构建的控制台输出中的 shell 命令之前和之后启动和停止，当输入 git 详细信息时不会发生这种情况。

只需继续使用现在描述的构建步骤...

# java - 如何将附加“\ n”添加到 StringBuilder 以获取下一行的值？

> ID：15361407
> 
> 赞同：1
> 
> 时间：2013-03-12T12:36:59.577
> 
> 标签：java

我有一个编辑弹出窗口。在我的代码中，我使用的是 String Builder 。我用 append 表示 '.' . 我的消息以“。”结尾。即点。如何使用“\n”让我的消息出现在下一行？我试过 historyMessage.append("\n"),historyMessage.append("\n") 和 historyMessage.append("\r\n"); 但这对我不起作用。任何人都可以请查看我的代码并在我错的地方提供帮助。

```
private String historyMessage(HdiGdvHistory hdiGdvHistory, String messageType) {
        StringBuilder historyMessage = new StringBuilder();
        HdiGdv gdv = hdiGdvDAO.getById(hdiGdvHistory.getHdiGdvId());
        hdiGdvHistoryList = hdiGdvHistoryDAO.getByIds(gdv.getId());
        if("approved".equals(messageType)  || "rejected".equals(messageType)){
            historyMessage.append("User "+hdiGdvHistory.getUser().getFirstName() +" has "+messageType);
        }

        if(hdiGdvHistoryList==null || hdiGdvHistoryList.isEmpty()){     
            if(!gdv.getHouseNumber().equals(hdiGdvHistory.getHouseNumber())){
                historyMessage.append(getHistoryMessage(hdiGdvHistory, "House Number" ,gdv.getHouseNumber(),hdiGdvHistory.getHouseNumber()));
                historyMessage.append(". ");
            }
        }else{
            hdiGdvHistoryList = hdiGdvHistoryDAO.getByFilteredIds(gdv.getId());
            System.out.println("list "+hdiGdvHistoryList.size());

            hdiGdvHistoryList = hdiGdvHistoryDAO.getByIds(gdv.getId());
            for (HdiGdvHistory history : hdiGdvHistoryList) {
                if(!hdiGdvHistory.getHouseNumber().equals(history.getHouseNumber())){
                    historyMessage.append(getHistoryMessage(hdiGdvHistory, "House Number" ,history.getHouseNumber(),hdiGdvHistory.getHouseNumber()));
                    historyMessage.append(". ");
                    break;
                }
            }
        }

    if(hdiGdvHistoryList==null || hdiGdvHistoryList.isEmpty()){
        if(!gdv.getCity().equals(hdiGdvHistory.getCity())){
            historyMessage.append(getHistoryMessage(hdiGdvHistory, "City" ,gdv.getCity(),hdiGdvHistory.getCity()));
            historyMessage.append(". ");
        }
    }else{
        for (HdiGdvHistory history : hdiGdvHistoryList) {
            if(!hdiGdvHistory.getCity().equals(history.getCity())){
                historyMessage.append(getHistoryMessage(hdiGdvHistory, "City" ,history.getCity(),hdiGdvHistory.getCity()));
                historyMessage.append(". ");
                break;
            }
        }
    }

       hdiGdvHistoryList.clear();
    gdv=new HdiGdv();
    hdiGdvHistory = new HdiGdvHistory();
    return historyMessage.toString();

}

private String getHistoryMessage(HdiGdvHistory hdiGdvHistory, String values , String preFieldValue ,String fieldValues ) {
        return "User "+hdiGdvHistory.getUser().getFirstName() +" has updated  " +values+ "  "+preFieldValue +" to "+fieldValues;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:46:23.027

这应该可以解决问题：

```
historyMessage.append('\n'); 
```

# java - 参考库未部署为模块

> ID：15361409
> 
> 赞同：0
> 
> 时间：2013-03-12T12:37:06.537
> 
> 标签：java, jboss, ejb-3.0, jboss7.x, ejb-3.1

如何从 jboss 7 中的 ear 部署中引用不在 modules 文件夹中的库部署？我有一个公用库（jar）部署正常，但ear 部署失败，因为它无法找到之前部署在公用 jar 中的类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:23:41.700

它应该进入`lib/`EAR 中的文件夹，并且`<library-directory/>`需要在`META-INF/applicaiton.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:28:08.330

如果您部署了公共 JAR，则需要在`MANIFEST.MF`EAR 中添加一个依赖项或创建一个`jboss-deployment-structure.xml`. 类[加载文档](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)有更多细节。

部署的模块名称应该类似于`deployment.name_of_deployment.jar`.

# forms - 使用jquery提交表单后调用函数

> ID：15361417
> 
> 赞同：3
> 
> 时间：2013-03-12T12:37:35.140
> 
> 标签：forms, jquery

我试图在提交任何具有下面显示的类的表单后调用一个函数。但是，这似乎对我不起作用（表单提交，但提交按钮保持活动状态并且未显示加载图像）。

```
$(document).ready(function() {
    $('.uniForm').submit(function() {
      $('#loadingImage').show();
      $(':submit',this).attr('disabled','disabled');
      return true;
    });
}); 
```

这是一些 HTML：

```
<form class="uniForm" id="formABC">
//...form.... here
</form>

<img src="loadimage.gif" style="display: none;" id="loadingImage"> 
```

有没有人认为这有什么本质上的错误会阻止事情正常工作？

我有一种感觉，它只是没有被正确调用。我可以通过这样的 HTML 自己调用它吗？

```
<button type="button" class="primaryAction" alt="Submit Form" onclick="$('#formABC').submit();">Submit Form</button> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:57:28.280

根据您的评论，似乎处理函数与`submit`事件的绑定可能在`form`元素加载到 DOM 之前发生。

理想情况下，您应该仅在 DOM 完成加载后绑定事件处理程序。

例如：

```
$(document).ready(function() {
    $('.uniForm').submit(function() {
        ...
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:43:09.680

在提交输入/按钮上放置一个 id 并尝试以下操作：

```
$('#mySubmitButton').click(function(e) {
    e.preventDefault();
    e.stopPropagation();
    $(this).attr('disabled','disabled');
    $('#loadingImage').show(function() {
        $(this.form).submit();
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-31T01:12:56.173

有一个名为**[jQuery Form Plugin](https://jquery-form.github.io/form/)**的 jQuery 插件，它可以帮助您从 ajax 提交您的表单而无需刷新，然后您可以在其成功后执行其余操作（这恰好在成功提交表单后发生）：

```
 jQuery(document).ready(function () {
        jQuery('#my_submit_button').click(function (e) {
            jQuery(this.form).ajaxSubmit({
                target: false,
                success: function ()
                {
                    your_other_stuff();
                },
            });
        });
    });
    function your_other_stuff(){
        // rest of things
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:40:41.037

试试别的：

```
$('.uniForm input[type=submit]').click(function(){
    $('.uniForm').submit();
    //doStuffafterSubmit
}); 
```

# opengl - 使用 glTranslate 时的断线

> ID：15361421
> 
> 赞同：2
> 
> 时间：2013-03-12T12:37:40.653
> 
> 标签：opengl

我正在尝试在 opengl 项目上画一条线。

如果我对变换矩阵使用 glTranslatef 函数，则绘制的洋红色线条如图所示：

![折线](../Images/7ab79d54d6dbe904914948c3a9d2f1c3.png)

并且移动视图，线带在不同的点被打断，或者绘制正确，或者根本没有绘制。

如果我手动翻译这些点，线条总是会正确显示。

其他行（红色的：GL_LINE_LOOP，青色的：GL_LINES）是手动翻译的并且可以正常工作。

这是带有 glTranslate 的代码：

```
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glTranslatef( offs_x, offs_y, 0);

glLineWidth(2.0f);
glColor3f(1.0f, 0.0f, 1.0f);

glVertexPointer( 3, GL_FLOAT, 0, trailPoints );
glDrawArrays(GL_LINE_STRIP,0,numTrailPoints);

glPopMatrix(); 
```

这里是手动翻译的工作代码：

```
for (i=0; i< numTrailPoints; i++)
{
  translatedTrailPoints[i].x = trailPoints[i].x + offs_x;
  translatedTrailPoints[i].y = trailPoints[i].y + offs_y;
  translatedTrailPoints[i].z = trailPoints[i].z;
}

glLineWidth(2.0f);
glColor3f(1.0f, 0.0f, 1.0f);

glVertexPointer( 3, GL_FLOAT, 0, translatedTrailPoints);
glDrawArrays(GL_LINE_STRIP,0,numTrailPoints); 
```

我在这里缺少什么？

**编辑 ：**

为了完成这个问题，这里是数据结构（为了更好的可读性，以相反的声明顺序排列）：

```
vec3 translatedTrailPoints[C_MAX_NUM_OF_TRAIL_POINTS];
vec3 trailPoints[C_MAX_NUM_OF_TRAIL_POINTS];

typedef union 
{ 
    float array[3];
    struct { float x,y,z; };
    struct { float r,g,b; };
    struct { float s,t,p; };
    struct { vec2 xy; float zz; };
    struct { vec2 rg; float bb; };
    struct { vec2 st; float pp; };
    struct { float xx; vec2 yz; };
    struct { float rr; vec2 gb; };
    struct { float ss; vec2 tp; };
    struct { float theta, phi, radius; };
    struct { float width, height, depth; };
    struct { float longitude, latitude, altitude; };
    struct { float pitch, yaw, roll; };
} vec3;

typedef union 
{ 
    float array[2];
    struct { float x,y; };
    struct { float s,t; };
} vec2; 
```

我想第二个 datenwolf 的建议，但没有成功：我在 vec2 和 vec3 声明之前尝试了 pragma pack(1 | 2 | 4)，我尝试使用 /Zp1 | 进行编译 /Zp2 | /Zp4（我在 VisualStudio 2008 下）但断线/点仍然存在。

**编辑2：**

纹理四边形的相同问题：

```
vec3 point;
point.x = lon;
point.y = lat;
point.z = 500;

glTranslatef( offs_x, offs_y, 0);

glBindTexture(GL_TEXTURE_2D, iconTextures[0]);
glBegin(GL_QUADS);
glTexCoord2f(0.0f, 0.0f); glVertex3f(point.x-C_ICON_WORLD_SIZE, point.y-C_ICON_WORLD_SIZE,  point.z);
glTexCoord2f(1.0f, 0.0f); glVertex3f(point.x+C_ICON_WORLD_SIZE, point.y-C_ICON_WORLD_SIZE,  point.z);
glTexCoord2f(1.0f, 1.0f); glVertex3f(point.x+C_ICON_WORLD_SIZE, point.y+C_ICON_WORLD_SIZE,  point.z);
glTexCoord2f(0.0f, 1.0f); glVertex3f(point.x-C_ICON_WORLD_SIZE, point.y+C_ICON_WORLD_SIZE,  point.z);
glEnd(); 
```

结果改变视图：

[正确绘制](http://imageshack.us/photo/my-images/268/10326080.png/)

[坏 1](http://imageshack.us/photo/my-images/692/56541279.png/)

[坏 2](http://imageshack.us/photo/my-images/221/71036476.png/)

**编辑3：**

我能够通过平移 (point.x + offs_x, point.y + offs_y, point.z) 并删除 glVertex 定义中的点坐标来纠正纹理四边形的情况。以前模式中的行为仍然让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:06:42.277

尝试在 glPushMatrix() 和 glPopMatrix() 调用之间使用 glLoadIdentity()，因为它会重置坐标系并将平移应用于新矩阵。

# c# - 使用 AForge 基因库决定塔防游戏中波的生成组成

> ID：15361423
> 
> 赞同：2
> 
> 时间：2013-03-12T12:37:56.127
> 
> 标签：c#, artificial-intelligence, genetic-algorithm, aforge

我正在尝试使用 GA 在类似于植物大战僵尸的塔防游戏中制造更强的敌人波。每个种群代表一个波，每个染色体代表一个敌人（1011 = 基本敌人，1111 = 敌人 2 等）我正在使用 AForge 库，但是我想知道是否可以设置初始种群而不是随机生成和我如何为群体中的每条染色体设置 x 和 y（距离和损伤）的值。我也不完全确定 Range 代表什么。抱歉，如果我遗漏了一些简单的东西或者我误解了它是如何工作的，这就是我到目前为止所拥有的，谢谢：

```
 public class UserFunction : OptimizationFunction2D
{
    private double distanceMax = 1;
    private double damageMax = 1;
    private double w1 = 1;
    private double w2 = 1;

    public UserFunction() :
        base(new Range(0, 100), new Range(0, 100)) { }

    public override double OptimizationFunction(double distance, double damage)
    {
        return (w1*distance/distanceMax) + (w2*damage/damageMax);
    }
}

class RunProgram
{
    private Population[] populationArray = new Population[5];
    private UserFunction userFunction = new UserFunction();
    private BinaryChromosome chromosome = new BinaryChromosome(4);
    private int popSize = 20;
    private double mutateRate = 0.3;
    private double damage;
    private double distance;
    private double limit = 100;

    public RunProgram()
    {
        Pop();
    }

    private void Pop()
    {
           // create genetic population
        for (int i = 0; i < 5; i++)
        {
            populationArray[i] = new Population(popSize,
                                chromosome,
                                userFunction,
                                new RouletteWheelSelection());
        }

        foreach (var pop in populationArray)
        {
            pop.MutationRate = mutateRate;
        }

        for (int i = 0; i < 50; i++)
        {
            foreach (var pop in populationArray)
            {
                pop.RunEpoch();                    
            }                                                           
        }

        Array.Sort(populationArray, delegate(Population population1, Population population2) {
            return population1.FitnessAvg.CompareTo(population2.FitnessAvg);
            });

        EnemyList(populationArray[4]);
        Console.ReadLine();
    }

    void EnemyList(Population population)
    {
        for (int i = 0; i < popSize; i++)
        {
            Console.WriteLine("enemy "+ i +" is: "+population[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T14:20:26.050

I think all populations are approaching to an optimal wave. So representing a wave with population is useless unless each wave has unique conditions.

# php - 如何在 MySQL 数据库中查找与其他行不正确关联的行

> ID：15361426
> 
> 赞同：1
> 
> 时间：2013-03-12T12:38:02.743
> 
> 标签：php, mysql

我的 MySQL 数据库中有一个表，部分看起来像这样：

```
+----+-------+-------+
| id | owner | onwed |
+----+-------+-------+
|  1 |   A   |   B   |
|  2 |   B   |   A   |
|  3 |   C   |   D   |
|  4 |   D   |   C   |
|  5 |   E   |   X   |
+----+-------+-------+ 
```

它们在这里的重要特征是所有条目都是配对的，因此每个“所有者”也由它们相关的记录“拥有”。A“拥有”B，B也“拥有”A。D“拥有”C，C也“拥有”D。

但是，在第 5 行，我们遇到了问题。E“拥有”X，但没有X“拥有”E的条目。

我需要能够浏览这个有数千条记录的表，并找到像第 5 行这样的所有实例，其中我们有一个孤立的记录。没有与具有匹配对立面的“所有者”和“拥有”字段相关联。此外，不能保证成对的行会像我的示例中那样相互跟随。

这个问题超出了我的 MySQL 能力*。*当我知道我正在寻找的价值是什么时，我就知道如何进行搜索。但我不知道如何逐行遍历，取出值，然后使用这些值进行另一次搜索。我希望有人可以帮助我，我很抱歉我对这件事一无所知，以至于我没有任何代码可以建议。

我不太担心效率，因为这是我只会在有理由怀疑问题时不时运行的检查。此外，如果有帮助，我会从 PHP 脚本管理我的 MySQL 数据库，因此如果有 PHP 代码可以用来使任务更易于管理，那么也可以使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:43:56.480

你需要的是一个`join`. 如果您将表本身与所有者所拥有的一起加入。

```
SELECT T1.Id, T1.Owner, T1.Owned, T2.Id, T2.Owner, T2.Owned 
FROM tablename T1 
LEFT JOIN tablename T2
ON T1.Owned = T2.Owner
WHERE T2.Owned != T1.Owner
OR T2.Id IS NULL 
```

尝试在没有 WHERE 子句的情况下运行查询以查看此连接的作用。您将所有者和所有者都放在一行中，然后您可以比较它们是否匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:44:47.067

您可以尝试类似的查询（不确定 MySQL 的反引号）

```
SELECT * FROM `table` 
  WHERE (`owner`,`owned`) 
  NOT IN (SELECT `owned`,`owner` FROM `table`); 
```

没有selfjoins可能有更清洁的解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:52:02.010

```
select 
    * 
from 
    mytable 

where id not in (
    select
        m1.id
    from
        mytable m1,
        mytable m2

    where 
        m1.owner=m2.owned    
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T12:43:28.527

有更好的方法，但这会起作用：

```
SELECT
    *
FROM
    table
WHERE
    id NOT IN (
        SELECT
            id
        FROM
            table s1
        WHERE
            s1.owner = (
                    SELECT
                        onwed
                    FROM
                        table s2
                    WHERE
                        s2.onwed = s1.owner
            )
    ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T12:50:02.307

这很简单：

```
select t1.id from tableName as t1 left join tableName as t2 
    on t1.owner = t2.owned and t1.owned = t2.owner 
    where t2.id is null 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T12:57:50.003

您可以尝试以下演示：

[http://sqlfiddle.com/#!2/0db47/7](http://sqlfiddle.com/#!2/0db47/7)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T12:47:47.970

```
SELECT  a.id, a.owner, a.onwed
FROM    TableName a
        LEFT JOIN TableName b
          ON  (a.Owner = b.Owner AND a.Onwed = b.OnWed) OR
              (a.Owner = b.OnWed AND a.Onwed = b.Owner)
GROUP   BY  a.id, a.owner, a.onwed
HAVING  COUNT(*) = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/9862d/8)

# ios - 在 tableView 中重新创建单元格时出现内存警告

> ID：15361427
> 
> 赞同：0
> 
> 时间：2013-03-12T12:38:04.707
> 
> 标签：ios

我正在显示 100 个远程图像`tableview`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

//static NSString *CellIdentifier = @"Cell";
NSString *CellIdentifier = [NSString stringWithFormat:@"%d",indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

}

cell.imageView.image = nil;
cell.textLabel.text = nil;
cell.detailTextLabel.text = nil;
cell.selectionStyle = UITableViewCellSelectionStyleNone;

// Configure the cell...

for (UIView *view in cell.contentView.subviews) {
    if ([view isKindOfClass:[UIButton class]] || [view isKindOfClass:[UILabel class]]||[view isKindOfClass:[UIImageView class]]) {
        [view removeFromSuperview];
    }
}

int imageNumber = 0;

if (isInSearchMode)
{
    PhotoVO *photoVO = (PhotoVO *)[searchResultArray objectAtIndex:indexPath.row];

    UIImageView *photo_View = [[UIImageView alloc]initWithFrame:CGRectMake(20, 5, width , height - 10)];
    photo_View.tag = 101;
    [[photo_View layer] setBorderWidth:3.0f];
    [[photo_View layer] setBorderColor:[UIColor whiteColor].CGColor];
    [photo_View setImageWithURL:[NSURL URLWithString:photoVO.thumb_URL1] placeholderImage:[UIImage imageNamed:@"loader"]];

    [cell.contentView addSubview:photo_View];

    UILabel *stringLable=[[UILabel alloc]initWithFrame:CGRectMake(130, 20, 150, 30)];
    stringLable.backgroundColor=[UIColor clearColor];
    stringLable.text=photoVO.photoName;
    stringLable.font=[UIFont systemFontOfSize:16.0];
    [cell.contentView addSubview:stringLable];

    UILabel *tagLable=[[UILabel alloc]initWithFrame:CGRectMake(130, 55, 150, 30)];
    tagLable.backgroundColor=[UIColor clearColor];
    tagLable.text=photoVO.tagString;
    tagLable.font=[UIFont systemFontOfSize:12.0];

    [cell.contentView addSubview:tagLable];

}
else
{

    for (int i = (indexPath.row * imagesCount); i < ((indexPath.row *imagesCount) + imagesCount); i++) {

        if (i < [cellImageVOArray count]) { // If resultsArray Count is odd then we no need to create cell image

            PhotoVO *photoVo = (PhotoVO *)[cellImageVOArray objectAtIndex:i];

            UIButton *appIconBtn = [UIButton buttonWithType:UIButtonTypeCustom];

            appIconBtn.frame = CGRectMake(((imageNumber * 5)+5)+(imageNumber * width), 2, width, height -4);

            appIconBtn.tag = i + 100;
            [[appIconBtn layer] setBorderWidth:3.0f];
            [[appIconBtn layer] setBorderColor:[UIColor whiteColor].CGColor];

            [appIconBtn addTarget:self action:@selector(imageTapped:) forControlEvents:UIControlEventTouchUpInside];

            [appIconBtn setBackgroundImageWithURL:[NSURL URLWithString:photoVo.thumb_URL1] placeholderImage:[UIImage imageNamed:@"loader.png"]];

            //[appIconBtn setBackgroundImageWithURL:[NSURL URLWithString:photoVo.thumb_URL1]];

            [cell.contentView addSubview:appIconBtn];
            imageNumber ++;

        }

    }

}

return cell;

} 
```

我正在使用上面的代码在 中显示图像`tableView`，但是在我检查它的所有方式中都会收到内存警告。我认为每次都会创建单元格，所以如果您在代码中发现任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:40:35.947

这是个问题：`NSString *CellIdentifier = [NSString stringWithFormat:@"%d",indexPath.row];`

您没有重用任何东西，因为您正在为每个单元格创建一个新标识符。可以重复使用几个不同的单元格样式很好，但您只是为每一行创建一个新单元格。

**其次**，你需要考虑你在这里做什么：

```
for (UIView *view in cell.contentView.subviews) {
    if ([view isKindOfClass:[UIButton class]] || [view isKindOfClass:[UILabel class]]||[view isKindOfClass:[UIImageView class]]) {
        [view removeFromSuperview];
    }
} 
```

每次需要一个单元时，您都要移除构成单元的部件，然后立即重新制作它们。您应该在`UITableView`. 您应该考虑创建一个`UITableViewCell`具有您需要的部分的自定义子类，然后使用它。话虽如此，看起来您只有一个图像和两个默认标签，`UITableViewCell`因此您可能根本不必创建它们，除非您的单元格非常自定义。

**最后**，你应该看看你在做什么`isInSearchMode`。现在你基本上有一个针对整个表的 if 语句。这不是一件可怕的事情，但如果你这样做，你应该有两个单元格标识符，一个用于每个可能的单元格。然后在`if`语句中只交换单元标识符并填写适当的数据。

***最重要的是，如果可能（在您的情况下似乎是这样），您根本不应该在此方法中创建新视图。你应该让`UITableViewCell`处理。***

**创建自定义单元格**

你从一个简单的`UITableViewCell`. 然后，您可以为您需要的每个自定义部件添加一个属性，例如`UILabel`或`UIImageView`。您可以通过覆盖来创建它们`init`，也可以将它们放入自定义属性获取器中，按需创建它们。

```
//  CustomCell.h
#import <UIKit/UIKit.h>

@interface Custom : UITableViewCell

@property (strong, nonatomic) UILabel *titleLabel;

@end

//  CustomCell.m
#import "CustomCell.h"

@implementation CustomCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(12.0, 10.0, self.contentView.frame.size.width - 24.0, 22.0)];
        [self.titleLabel setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
        [self.titleLabel setHighlightedTextColor:[UIColor whiteColor]];
        [self.titleLabel setFont:[UIFont boldSystemFontOfSize:17.0]];
        [self.titleLabel setBackgroundColor:[UIColor clearColor]];
        [self.titleLabel setTextColor:[UIColor blackColor]];
        [self.titleLabel setAdjustsFontSizeToFitWidth:YES];
        [self.titleLabel setMinimumFontSize:8.0];

        [self.contentView addSubview:self.titleLabel];
    }
    return self;
}

@end 
```

然后你只需要重写你`cellForRowAtIndexPath:`的使用你的自定义类。在您的情况下，您可以有两个自定义单元格并在它们之间切换。这将只按需创建足够的每个单元格，并在它们在屏幕上和屏幕外移动时重复使用它们。

```
static NSString *CellIdentifier = @"Cell";
static NSString *SearchCellIdentifier = @"SearchCell";

if (isInSearchMode) {
    SearchCell *cell = (SearchCell *)[tableView dequeueReusableCellWithIdentifier:SearchCellIdentifier];

    if (cell == nil) {
        cell = [[SearchCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.titleLabel = @"Custom Search Title";

} else {
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.titleLabel = @"Custom Title";

} 
```

根据您的应用程序的工作方式，这可以很容易地进一步重构，但这应该会让您走上正确的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:40:51.953

是的，每一行都有不同的单元格标识符，因此不会发生重用。

改变：

```
NSString *CellIdentifier = [NSString stringWithFormat:@"%d",indexPath.row]; 
```

至

```
NSString *CellIdentifier = @"CellId"; 
```

# jakarta-ee - 是否可以在不更改文件夹结构的情况下将动态 Web 项目转换为 Maven 项目？

> ID：15361430
> 
> 赞同：1
> 
> 时间：2013-03-12T12:38:14.707
> 
> 标签：jakarta-ee, maven

是否可以在不更改现有文件夹结构的情况下创建/转换动态 Web 项目到 Maven，期望`pom.xml`自动创建并能够将项目作为 Maven 项目运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T18:05:52.687

我对一个项目进行了此操作，在您使用默认选项将其配置为 maven 后，在您的 pom.xml 中配置您的存储库和依赖项。在此之后删除 EE 项目中使用的本地引用的 jar（因为您的 POM 从 maven Repo 中获取这些）。将文件夹结构更改为 Maven

```
src/main/java - contains your production Java code

src/main/resources - contains your production classpath resources (e.g. Spring contexts)

src/main/webapp - (contains WEB-INF/web.xml but no lib folder)

src/test/java - contains your test Java code

src/test/resources - contains your test resources (e.g. example XML feeds for web service testing etc) 
```

你现在可以设定目标来产生你的战争等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:42:46.643

不知道你所说的“动态”是什么意思，但我很确定你必须根据你的声音来改变你的目录结构。Maven 基于“约定优于配置”原则，这意味着您应该按照预期进行设置，这样您就不会很难处理配置标准的事情。除非您提供更多详细信息，否则我的回答不会有更多用处。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-12T23:20:34.623

从我最近刚刚观看的截屏视频来看，它应该是可行的。

看看自己 -[在 IBM Rational Application Developer 中使用 Maven 集成工具，第 2 部分](http://youtu.be/TpKrF1dHtvM)。

# javascript - 找不到要排序/更改的 Jquery 脚本 结构，有什么想法吗？

> ID：15361431
> 
> 赞同：0
> 
> 时间：2013-03-12T12:38:15.143
> 
> 标签：javascript, jquery, html, css, webshop

我有一个网店。有一家公司提供给我。所以他们留给主机和数据库。我有一个管理员可以管理网上商店。在那里我可以更改网站的 CSS、HTML 和 JavaScript，但有一些例外。

我想更改其中一个例外“结帐页面结构”，提供我的网上商店的公司的支持说我必须使用 JavaScript 更改结构。我是 Jquery 的用户友好型。

理论：（这就是它现在在终端客户端的样子）：

```
**Products list on the cart:**
------------------------------
I   Art1   10$   10units     I
I   Art2    5$    4units     I
I   Art3    1$    1units     I
------------------------------

**Payments method:**
--------------
I   Visa     I
I   Invoice  I
I   SMS      I
--------------

**Freight Alternative:**
-------------------
I   Ordinarie     I
I   DHL Saver     I
I   DHL Express   I
-------------------

**Adress Alternative:**
-----------------------
I   Actually adress   I
I   Customer Name     I
I   Customer Telefon  I
----------------------- 
```

（这就是我希望它在终端客户端上的样子）：

```
**Products list on the cart: Payments method: Freight Alternative: Adress Alternative:**
-----------------------------------------------------------------------------------
I   Art1   10$   10units     I   Visa     I   Ordinarie     I   Actually adress   I
I   Art2    5$    4units     I   Invoice  I   DHL Saver     I   Customer Name     I
I   Art3    1$    1units     I   SMS      I   DHL Express   I   Customer Telefon  I
----------------------------------------------------------------------------------- 
```

一般而言，这就是公司为我提供的默认 HTML 结帐页面的外观。

```
<html><!-- CHECKOUT PAGE DEFAULT STRUCTURE -->
<body>

<div>List products on the cart, Example: Art1, Art2, Art3, prices, quantities</div>
<div>
  <div>Payment method, Example: Visa, Invoice, SMS</div>
  <div>Freight method, Example: ordinary, UPS saver, UPS express</div>
  <div>Customer address, Example: Delivery adress, Phone number, Contact person</div>
</div>

</body>
</html> 
```

第 1 步：找到一些 JQuery 替代脚本，以更改结构。

```
 <html><!-- CHECKOUT PAGE DEFAULT STRUCTURE -->

<!-- MAGICAL JQUERY SCRIPT FROM STACKOVERFLOW ANSWER -->
<script>
script
script
</script>
<!-- END -->

    <body>

    <div>List products on the cart, Example: Art1, Art2, Art3, prices, quantities</div>
    <div>
      <div>Payment method, Example: Visa, Invoice, SMS</div>
      <div>Freight method, Example: ordinary, UPS saver, UPS express</div>
      <div>Customer address, Example: Delivery adress, Phone number, Contact person</div>
    </div>

    </body>
    </html> 
```

第 2 步：配置 Jquery 脚本以打破默认页面的结构。因此，当我在保存新脚本后刷新页面时，它看起来像这样。

```
 <html><!-- CHECKOUT PAGE DEFAULT STRUCTURE -->

    <!-- MAGICAL JQUERY SCRIPT FROM STACKOVERFLOW ANSWER -->
    <script>
    script
    script
    </script>
    <!-- END -->

        <body>
          <table>
           <tr>

<td>          <div>List products on the cart, Example: Art1, Art2, Art3, prices, quantities</div></td>
<td>          <div>Payment method, Example: Visa, Invoice, SMS</div></td>
<td>          <div>Freight method, Example: ordinary, UPS saver, UPS express</div></td>
<td>          <div>Customer address, Example: Delivery adress, Phone number, Contact person</div></td>

          </tr>
          </table>        
        </body>
        </html> 
```

有任何想法吗？我找到了一些 Jquery 排序结构。但看起来并不那么新鲜和简单。我错过了一些新的、简单的东西？还是我应该使用 uggly 变体？

来自瑞典的问候。如果这个问题不容易理解，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:42:43.750

尝试给`float:left`所有主要的div。

# c# - 在 C# 中继承一个类并自动应用一个参数

> ID：15361437
> 
> 赞同：-2
> 
> 时间：2013-03-12T12:38:38.390
> 
> 标签：c#, inheritance

我有大约 300 个函数，不想为每个函数制作一个包装器。

```
class B
{
    func(vartype somevar, int otherparam)
    {
        //code
    }
} 
```

然后我想这样做

```
class A:B(vartype somevar)
{
    Asfunc2()
    {
        this->func(1);  //basically somevar would already be filled in when called and it'd just need the 1 param.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:43:25.860

您可以按如下方式调用基本构造函数：

```
public class Manager : Employee
{
    public Manager(int annualSalary)
        : base(annualSalary)
    {
        //Add further instructions here.
    }
} 
```

参考在[这里](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx)。

您所描述的看起来像[JavaScript 中的绑定函数参数，](http://msdn.microsoft.com/en-us/library/ie/ff841995%28v=vs.94%29.aspx)但据我所知，这在 C# 中是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:13:34.700

如果您可以访问 B 类，那么我相信做您想做的事情的唯一方法是创建`somevar`一个全局变量，该变量将在构造函数中初始化。

您可能可以通过反射解决此问题，但您似乎更有可能有代码气味，真正的问题在于设计，而不是实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:06:15.803

我正在考虑您描述的情况，并使用以下 linqpad 脚本来了解这意味着什么：

```
void Main()
{
    B b = new B();
    b.CallA().Dump();
}

class A
{
    public string CallA(string someVar)
    {
       return string.Format("{0} says Hello", someVar);
    }
}

class B : A
{
    public string CallA(string someVar = null)
    {
       return base.CallA(someVar);
    }
} 
```

您实际上最终得到了一个重载的 CallA 方法。这~~罐头~~会变粘。在创建 B 的实例后，您将在 Main 方法中执行的以下代码怎么样：

```
((A)b).CallA();  //You actually want to call A.CallA 
```

这仍然调用`b.CallA()`.

小心点。这感觉不是一个好的设计。

# search-engine - 如何使用 C# 代码从谷歌搜索文档？

> ID：15361438
> 
> 赞同：1
> 
> 时间：2013-03-12T12:38:39.540
> 
> 标签：search-engine, google-search-api

我目前正在谷歌中进行文档搜索。我根本不想做 HTML 解析。但是正在寻找一些从互联网上搜索谷歌文档的 api。

基本上我确实有一个要求，即从谷歌搜索中搜索 .pdf、.doc 文件的任务。我做了一些谷歌搜索，发现这导致验证码是从谷歌引入的，并且每天有 100 个查询的限制。

是否有来自谷歌的免费 API，或者如果没有任何付费的 API，我可以通过一些搜索查询并获得结果。

请注意，我根本不想要 HTML 解析。

此外，有什么办法可以克服 Captch 的问题吗？

# c++ - 在启动时从内存中加载 QImages

> ID：15361439
> 
> 赞同：0
> 
> 时间：2013-03-12T12:38:41.723
> 
> 标签：c++, qt

我试图在启动时加载大约 450 帧，然后在我的应用程序的每个循环中，我想从内存中加载图像，而不是从 SDCard 加载图像，因为它非常流 ~ 40 毫秒。

我尝试了以下代码，但我得到了一个空图像。我要加载的图像是灰度图像，1280*960 像素。

我使用以下代码：

```
 QImage  images[450];

        for (int i=1; i<450;i++)
        {

            sprintf( imFName, "%s/img_%08i.png", imPath.c_str(), i );
            images[i].load(QString(imFName));
            images[i].setColorCount(1);

        }

     for ( int frameIdx = 1;  frameIdx <= 450;  frameIdx++ )
        {
            prevImg = curImg;
            imIndex++;
            printf(" FrameIdx : %d\n", imIndex); fflush(stdout);
            sprintf( imFName, "%s/img_%08i.png", imPath.c_str(), imIndex );

            double t10 = omp_get_wtime();
            QImage curImg;
            bool result = curImg.loadFromData((unsigned char*)images[frameIdx].constBits(),images[frameIdx].byteCount());
            fprintf(stderr, "result %", result);
             if ( curImg.isNull() )
               break;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:01:09.207

快速查看您的代码，我可以说：

*   最好`QImage images[450];`使用某种容器（STL's`vector`或 Qt's `QVector`）
*   `QImage images[450];`- 索引 from `0`to`449`和你的循环`for (int i=1; i<450;i++)`错过`images[0]`。
*   使用`sprintf`Qt 的字符串`QString`及其格式化方法。
*   在这里您尝试访问 450`for ( int frameIdx = 1; frameIdx <= 450; frameIdx++ )`
*   ...

如果您的代码充满错误。尝试重写它。

做出决定——用 Qt 编写它的类、容器等；或者用 C++ 编写，最少使用 Qt（用于处理一些特殊类型）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:16:48.053

顺便说一句，这不是[loadFromData](http://qt-project.org/doc/qt-4.8/qimage.html#loadFromData)的工作方式。从数据加载需要与磁盘上的文件（png 或 jpeg 等）相同的图像数据格式
要从现有数据（如果需要）进行这种复制，您应该使用以下内容：

```
QImage construct( unsigned char* data, int width, int height, Image::Format format )
{
  return QImage(data, width, height, format);
} 
```

在您的情况下，您应该使用复制作业

# vb.net - 按发件人访问兄弟姐妹

> ID：15361442
> 
> 赞同：1
> 
> 时间：2013-03-12T12:38:44.643
> 
> 标签：vb.net, siblings, sender

我在选项卡控件中有两个选项卡，它们基本上具有相同的控件。这是两个选项卡共有的示例：

组框

*   数据网格视图
*   按钮1
*   按钮2

在 Button2 的单击事件中，我想通过发送方访问它的同级（DataGridView）。

```
Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Tab1_Button2.Click, Tab2_Button2.Click
    Dim currSender As Button = sender 
```

我需要通过“currSender”父母吗？我不确定如何访问这些...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:42:40.397

尝试类似：

```
Dim dgv As DataGridView = currSender.Parent.Controls("DataGridView1") 
```

那是使用控件的名称。您可以在 GroupBox 上获取所有`Datagridview`'s 并获取（我想）第一个也是唯一一个：

```
Dim dgv As DataGridView = crrSender.Controls.OfType(Of DataGridView)(0) 
```

# java - 在哪里添加KeyListener 以“始终”监听

> ID：15361447
> 
> 赞同：3
> 
> 时间：2013-03-12T12:38:59.450
> 
> 标签：java, swing, jpanel, keylistener

我需要`keylistener`始终“听”按转义键，然后退出程序。

我尝试输入 `addKeyListener(this);`我的主要构造函数（正在绘制面板的构造函数）并使用

```
public void keyPressed( KeyEvent e)

{
      int code = e.getKeyCode();
      if(code == KeyEvent.VK_ESCAPE)
      {
           System.exit( 0 );
      }

} 
```

我没有收到任何错误，但是按转义键似乎没有任何作用，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:44:17.523

*   [`Top-Level Container`](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)默认情况下从不接收`KeyEvent`，[`KeyListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)默认情况下，但可能有几行代码，错误的想法，错误的侦听器

*   [`JPanel`](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)默认情况下对 做出反应，`KeyEvent`但仅在错误的想法、错误的听众（例如）因为您需要以编程方式从错误的想法转变为错误的想法的情况下`isFocusable``FocusOwner``Focus``JTextField``JPanel`

*   添加[`KeyBindings`](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)到`JFrame`// `JDialog`，`JWindow`默认情况下可以访问 for `Swing JComponent`，而不是 for`AWT Components`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:15:10.677

您可以使用 InputMap/ActionMap 机制：

```
 Object escapeActionKey = new Object();
    pnl.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("ESCAPE"), escapeActionKey);
    pnl.getActionMap().put(escapeActionKey, new AbstractAction() {
        public void actionPerformed(ActionEvent e) {
            System.err.println("escape 1");
        }
    }); 
```

`JComponent.WHEN_IN_FOCUSED_WINDOW`表示当`pnl`组件位于焦点窗口中时，此击键可用。

或者你也可以添加一个全局 AWTEventListener 监听器：

```
 Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {
        public void eventDispatched(AWTEvent event) {
            if(event.getID() == KeyEvent.KEY_PRESSED) {
                KeyEvent kEvent = (KeyEvent) event;
                boolean isEsc = (kEvent.getKeyCode() == KeyEvent.VK_ESCAPE);
                if(isEsc) {
                    System.err.println("escape 2");
                }
            }
        }
    }, AWTEvent.KEY_EVENT_MASK); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:45:43.713

在 Swing 中有一个顶层面板： GlassPane 允许在顶层处理事件（以避免其他小部件处理事件）

# paypal - 在 asp.net 中使用 nvp 以最少的步骤使用 paypal Express 结帐

> ID：15361454
> 
> 赞同：0
> 
> 时间：2013-03-12T12:39:23.410
> 
> 标签：paypal

我想在我的应用程序中使用 paypal express checkout 以最少的步骤，例如：单击 paypal 按钮-> 在 paypal 上验证帐户-> 将令牌返回到我的应用程序-> 确认付款-> 成功消息-> 记入我的帐户（用户不重定向到贝宝）只在应用程序上获得成功消息

目前贝宝在贝宝网站确认用户付款，但我希望它给我的应用程序和用户一次重定向到贝宝网站进行帐户验证其余所有过程都在我的asp.net应用程序的反手侧完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:53:57.963

我想这就是 Paypal 的工作方式。getExpressCheckoutDetails 的调用在哪里。如果您想在您的网页上显示贝宝送货详细信息，您需要调用此方法。它将返回您的运输详细信息，然后创建一个“支付”按钮并调用 PaypalAPI 的 doExpressCheckout 方法来完成您的交易：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:27:19.463

您可以尝试将此作为起点：[https](https://paypal-labs.com/integrationwizard/ecpaypal/main.php) ://paypal-labs.com/integrationwizard/ecpaypal/main.php （SSL 已过期或无效，因此您必须添加安全例外，但它有效）

# c++ - 错误 C2512：“std::basic_ostream<_Elem,_Traits>”：没有适当的默认构造函数仅适用于 Visual Studio

> ID：15361460
> 
> 赞同：2
> 
> 时间：2013-03-12T12:39:34.127
> 
> 标签：c++, visual-studio-2010, visual-c++, ostream

我问这个问题是因为我有点无助：这个错误只发生在 Visual Studio 中，GCC 编译它没有错误甚至警告。由于这是一些可移植的代码，我正在寻找一种适用于两种编译器的解决方案（最好的情况是不依赖于平台`ifdefs`）。

> 错误 C2512：“std::basic_ostream<_Elem,_Traits>”：没有合适的默认构造函数可用

在构造定义为 MyObject 类型的对象时发生

```
 class MyObject : public Socket, public std::ostream 
```

`ostream`VS在这里期望什么特殊参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:49:12.573

`std::ostream`是 的类型别名`std::basic_ostream<char>`。的构造函数`std::basic_ostream<char>`需要一个指向与输出流相关联的流缓冲区的指针。您必须提供一份。

构造函数的签名如下：

```
 explicit basic_ostream( std::basic_streambuf<CharT, Traits>* sb ); 
```

您的类构造函数应如下所示：

```
class MyObject : public Socket, public std::ostream
{
    MyObject(/* ... */) 
        : 
        std::ostream(/* provide a ptr to a stream buffer here /*) 
    //  ...
    {
        // ...
    }
}; 
```

另请参阅[此](http://en.cppreference.com/w/cpp/io/basic_ostream/basic_ostream)内容以供参考。

# android - 动作栏图标比动作栏大并且被裁剪

> ID：15361461
> 
> 赞同：0
> 
> 时间：2013-03-12T12:39:35.847
> 
> 标签：android, android-actionbar, actionbarsherlock, android-icons

我正在为我的应用程序使用夏洛克的操作栏。我面临一个奇怪的问题，在三星 Note2 中，操作栏上的图标显示得比操作栏大并且被裁剪。

在银河王牌上，一切正常。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:46:14.970

您在可绘制文件夹中只有一个版本吗？如果是这样，请尝试将不同尺寸的图像（18x18、24x24、36x36、48x48）放在 drawable-ldpi、drawable-mdpi、drawable-hdpi、drawable-xhdpi 文件夹中。Android 将根据密度自动选择要使用的正确尺寸图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T12:14:22.197

我建议您使用一些图标作为操作栏

[http://developer.android.com/design/style/iconography.html#action-bar](http://developer.android.com/design/style/iconography.html#action-bar)

它们将为您提供所有屏幕分辨率所需的图标的确切大小，您不会遇到任何问题。

如果您有自己的图标，您可以只保留图标包中的图标作为大小的指南。

# java - 处理和控制中没有带有Textarea的滚动条p5

> ID：15361462
> 
> 赞同：2
> 
> 时间：2013-03-12T12:39:44.320
> 
> 标签：java, user-interface, textarea, scrollbar, processing

在 controlp5 的文档中，它说当文本超过框的大小时会自动出现滚动条，这对我来说没有发生，我也尝试过`.setScrollActive()`但仍然没有滚动条，我的代码在下面，在此先感谢..

```
 myTextarea = cp5.addTextarea("listoftweets")
                  .setPosition(500,100)
                  .setSize(200,200)
//                  .setScrollActive(1)
                  .setFont(createFont("arial",12))
                  .setLineHeight(14)
                  .setColor(color(128))
                  .setColorBackground(color(255,100))
                  .setColorForeground(color(255,100));
                  ;

  myTextarea.setText("Lorem ipsum dolor sit amet, consectetur adipiscing elit."
                      +" Quisque sed velit nec eros scelerisque adipiscing vitae eu sem."
                      +" Quisque malesuada interdum lectus. Pellentesque pellentesque molestie"
                      +" vestibulum. Maecenas ultricies, neque at porttitor lacinia, tellus enim"
                      +" suscipit tortor, ut dapibus orci lorem non ipsum. Mauris ut velit velit."
                      +" Fusce at purus in augue semper tincidunt imperdiet sit amet eros."
                      +" Vestibulum nunc diam, fringilla vitae tristique ut, viverra ut felis."
                      +" Proin aliquet turpis ornare leo aliquam dapibus. Integer dui nisi, condimentum"
                      +" ut sagittis non, fringilla vestibulum sapien. Sed ullamcorper libero et massa"
                      +" congue in facilisis mauris lobortis. Fusce cursus risus sit amet leo imperdiet"
                      +" lacinia faucibus turpis tempus. Pellentesque pellentesque augue sed purus varius"
                      +" sed volutpat dui rhoncus. Lorem ipsum dolor sit amet, consectetur adipiscing elit"
                    ); 
```

我也收到此警告...

> 2013 年 3 月 12 日 12:42:16 controlP5.ControlP5 checkName 警告：名称为“/listoftweets”的控制器已存在。覆盖现有控制器的引用。

但是我没有任何其他同名的控制器。

# java - Java3D 中的线程“main”java.lang.NoClassDefFoundError 中的异常

> ID：15361464
> 
> 赞同：0
> 
> 时间：2013-03-12T12:39:58.030
> 
> 标签：java, eclipse, noclassdeffounderror, java-3d

我正在尝试开发一个 java3d 应用程序，我尝试了一切，我只是下载了 jogamp 平台，因为我可以在许多网站上阅读 java3d 已过时，而对于 mac os x 你需要这个，我把它们都放在 /System/ Frameworks/Java/Extensions 我的 .jar 文件在哪里，以便不添加到 Eclipse 中的类路径，但仍然出现相同的错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/media/opengl/AbstractGraphicsDevice
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:171)
    at javax.media.j3d.Pipeline$1.run(Pipeline.java:143)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.media.j3d.Pipeline.createPipeline(Pipeline.java:138)
    at javax.media.j3d.MasterControl.loadLibraries(MasterControl.java:926)
    at javax.media.j3d.VirtualUniverse.<clinit>(VirtualUniverse.java:280)
    at javax.media.j3d.Canvas3D.<clinit>(Canvas3D.java:3862)
    at Apartado_a.<init>(Apartado_a.java:17)
    at Apartado_a.main(Apartado_a.java:67)
Caused by: java.lang.ClassNotFoundException: javax.media.opengl.AbstractGraphicsDevice
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at sun.misc.Launcher$ExtClassLoader.findClass(Launcher.java:229)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 10 more 
```

这些是扩展文件夹中的文件：

```
 j3daudio.jar
 j3dcore.jar
 j3dutils.jar
 joal-natives-macosx-universal.jar
 jogl-all.jar
 gluegen-rt.jar
 gluegen-rt-natives-macosx-universal.jar 
```

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:42:08.907

不要为此使用 /System/Frameworks/Java/Extensions 文件夹。

相反，将相关库包含在应用程序的 lib/ 文件夹中。此外，请检查您使用的 JDK 版本。我认为在 Apple 提供的较新 JVM 上运行 Java3D 与在 Oracle/Sun 提供的较旧的 JVM 上运行存在一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:21:04.033

Mac OS X 预装了 Java 3D 1.3 版。您可以在 /System/Library/Java/Extensions 中找到这些文件。如果您需要安装 Java 3D 1.5 版（听起来像您这样做），那么您可以使用此安装程序：[http ://create.ife.no/vr/tools/j3d/java3d_1_5_2-macosx.pkg.zip](http://create.ife.no/vr/tools/j3d/java3d_1_5_2-macosx.pkg.zip)

# java - 从 JSP 更改 linux 的密码

> ID：15361470
> 
> 赞同：2
> 
> 时间：2013-03-12T12:40:18.030
> 
> 标签：java, linux, jsp, runtime.exec, absolute-path

我需要从 JSP 执行 linux 命令。它工作正常。但我需要通过 JSP 在 linux 的特定目录中启动一些 sh ​​文件。说/home/username/something/start.sh

```
try{
String command= "cd /home/username/something";

Runtime.getRuntime().exec(command);
Runtime.getRuntime().exec("./start.sh")

out.println("Child");
}
catch(Exception e)
{ out.println("Error");
} 
```

它说找不到文件或目录。

我试过`Runtime.getRuntime().exec("pwd")`了，它显示类似“java.lang.UNIXProcess@fc9d2b”的东西！:O

我需要更改密码并通过jsp执行一些命令。我怎样才能做到这一点？？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T12:59:17.407

您不应该（实际上，您似乎不能）设置这样的工作目录。给出的每个`Process`对象`Runtime.exec()`都有自己的工作目录。

正如[如何使用 java 运行时使用“cd”命令？](https://stackoverflow.com/q/4884681/851811)，您应该使用 的三个参数版本`Runtime.exec()`，您在其中提供一个`File`将作为工作目录的版本。从它的[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#exec(java.lang.String[],%20java.lang.String[],%20java.io.File))：

> **在具有指定环境和工作目录**的单独进程中执行指定的命令和参数。

或者更好的是，使用[`ProcessBuilder`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)with[`ProcessBuilder.directory()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#directory(java.io.File))代替：

```
ProcessBuilder pb = new ProcessBuilder("start.sh");
pb.directory(new File("/home/username/something"));
Process p = pb.start(); 
```

# c# - 我使用 Win32_Fan 来获取和显示我的 Cpu 风扇速度，但它不起作用，为什么？

> ID：15361471
> 
> 赞同：2
> 
> 时间：2013-03-12T12:40:20.757
> 
> 标签：c#, .net, wmi

这是我在 Form1 构造函数中调用该方法的代码：

```
private void cpuFanSpeed()
        {
            SelectQuery query =
           new SelectQuery("Win32_Fan");

            // Instantiate an object searcher
            // with this query
            ManagementObjectSearcher searcher =
                new ManagementObjectSearcher(query);

            // Call Get() to retrieve the collection
            // of objects and loop through it
            foreach (ManagementObject envVar in searcher.Get())
                MessageBox.Show(envVar["DesiredSpeed"].ToString());
        } 
```

但它永远不会到达 MessageBox。这里有什么问题？我尝试通过此处的文档阅读并执行此操作：http: [//msdn.microsoft.com/en-us/library/aa394146 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa394146(v=vs.85).aspx)

在这里：http: [//msdn.microsoft.com/en-us/library/ms257359.aspx](http://msdn.microsoft.com/en-us/library/ms257359.aspx)

但它不起作用。

我想在标签上每秒显示我的 cpu 风扇速度。

这是 OpenHardwareMonitor 显示我的 cpu 风扇速度的屏幕截图：

![在此处输入图像描述](../Images/60e6329693e5f005468274120dd411e0.png)

这是我在我的应用程序中使用的函数来获取 CPU 温度的代码：

在班上：

```
public static float? cpuView(bool pause , CpuTemperature cpuTemp , Form1 f1 , List<string> myData , float? myCpuTemp , Button b1)
        {
            if (pause == true)
            {
            }
            else
            {
                Computer myComputer = new Computer();
                myComputer = new Computer(cpuTemp)
                {
                    CPUEnabled =

                        true
                };

                myComputer.Open();
                Trace.WriteLine("");
                foreach (var hardwareItem in myComputer.Hardware)
                {
                    if (hardwareItem.HardwareType == HardwareType.CPU)
                    {
                        hardwareItem.Update();
                        foreach (IHardware subHardware in hardwareItem.SubHardware)
                            subHardware.Update();

                        foreach (var sensor in hardwareItem.Sensors)
                        {
                            cpuTemp.SetValue("sensor", sensor.Value.ToString());
                            if (sensor.SensorType == SensorType.Temperature)
                            {
                                sensor.Hardware.Update();
                                cpuTemp.GetValue("sensor", sensor.Value.ToString());                                
                                f1.Invoke(new Action(() => myData.Add("Cpu Temeprature --- " + sensor.Value.ToString())));
                                myCpuTemp = sensor.Value;
                                if (sensor.Value > 60)
                                {

                                    Logger.Write("The Current CPU Temperature Is ===> " + sensor.Value);
                                    b1.Enabled = true;
                                }

                                break;
                            }
                        }
                    }
                }
            }
            return myCpuTemp;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:45:46.143

并非每台机器都通过 WMI 提供此信息。如果您的计算机没有，您将无法访问它。仅仅因为 WMI 提供了访问特定信息的属性并不意味着该信息将始终可用。

据推测，您在循环中迭代的集合`foreach`是*空*的，这就是为什么没有`MessageBox`显示。

解决此问题的唯一可能方法是从主板制造商处获取更新的驱动程序，该驱动程序向 WMI 提供此信息（当然，假设您的硬件甚至首先包含测量此类事物所需的传感器）。

**编辑：** Open Hardware Monitor 显然已经编写了自己的驱动程序来直接与您的硬件交互，查询其传感器。通过仔细阅读他们的网页可以证实这种怀疑，该网页[记录了它支持的特定硬件](http://openhardwaremonitor.org/documentation/)。

它不是使用 WMI 来获取其信息的，因此这并不能证明您可以自己从 WMI 获取信息。

但是，上面链接页面的底部确实包含这个有趣的评论：

> Open Hardware Monitor 将所有传感器数据发布到 WMI（Windows Management Instrumentation）。这也允许其他应用程序读取和使用传感器信息。可以在[此处](http://openhardwaremonitor.org/wordpress/wp-content/uploads/2011/04/OpenHardwareMonitor-WMI.pdf)找到该接口的初步文档。

因此，您似乎可以在 Open Hardware Monitor 之上搭载，使用其驱动程序来检索信息，然后在您的应用程序内部从中检索该信息。这可能是最好的解决方案，因为我怀疑您的硬件制造商会通过更新的驱动程序来为 W​​MI 提供风扇速度。

# objective-c - 主视图不自动调整大小，奇怪的行为

> ID：15361474
> 
> 赞同：1
> 
> 时间：2013-03-12T12:40:30.883
> 
> 标签：objective-c

除非更改设备方向，否则一切似乎都正常。每次更改时，都会调用以下方法：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                         duration:(NSTimeInterval)duration 
```

问题是，无论我旋转设备多少次，主视图（self.view）的大小都不会改变为实际应该的大小。

```
2013-03-12 14:33:32.504 WBDEMO[888:907] {{0, 20}, {768, 1004}}
2013-03-12 14:33:33.929 WBDEMO[888:907] {{0, 0}, {748, 1024}}
2013-03-12 14:33:35.357 WBDEMO[888:907] {{0, 20}, {768, 1004}}
2013-03-12 14:33:36.009 WBDEMO[888:907] {{0, 0}, {748, 1024}} 
```

在纵向模式下，尺寸应为 {768, 1004}，而在横向模式下，尺寸应为 {1024, 748}

我尝试将其 autoresizingMask 设置为：

```
self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

但它仍然不起作用。有什么建议么？

记录代码：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                                         duration:(NSTimeInterval)duration
{
    NSLog(@"%@", NSStringFromCGRect(self.view.frame));
} 
```

# bash - 重定向到 /dev/null：没有这样的文件或目录

> ID：15361482
> 
> 赞同：0
> 
> 时间：2013-03-12T12:40:51.967
> 
> 标签：bash

我想知道是否有人可以帮助我解决此错误：

> wc: Files/Unused-CMA_host.txt: 没有这样的文件或目录

该文件不存在，然后我想将输出重定向到 /dev/null

我尝试使用`> /dev/null 2>&1`在其他情况下有效的这句话，但不是在这里：

`wc -l Files/Unused-CMA_host.txt | awk '{print $1}' > /dev/null 2>&1`

有人知道为什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:58:30.450

重定向适用于管道的各个组件，而不是整个管道。在您的示例中，您仅重定向`awk`的标准输出。要重定向整个管道的标准错误和标准输出，需要一个命令组，例如

```
{ wc -l Files/Unused-CMA_host.txt | awk '{print $1}' ; } > /dev/null 2>&1 
```

但是，如果文件不存在，则不会有任何标准输出。也许您想重定向标准错误以抑制错误消息？然后你可以简单地使用

```
wc -l Files/Unused-CMA_host.txt 2> /dev/null | awk '{print $1}' 
```

在文件不存在的情况下，`awk`将简单地从空流中读取并且什么都不做。

# java - 从java命令生成android apk文件

> ID：15361484
> 
> 赞同：0
> 
> 时间：2013-03-12T12:40:56.477
> 
> 标签：java, android, apk

我可以在 java 类中运行一些命令时生成 android apk 文件吗？

我发现了这样的东西 [http://geosoft.no/development/android.html](http://geosoft.no/development/android.html) 和这个 [http://www.apriorit.com/our-company/dev-blog/233-how-to-build-apk-file -从命令行](http://www.apriorit.com/our-company/dev-blog/233-how-to-build-apk-file-from-command-line)

但我只想从 file.java 类创建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:49:13.520

您不能只是将 Java 源代码转换为 APK，Android 项目必须满足某些标准。

[您可以在Android 项目文档](http://developer.android.com/tools/projects/index.html)中阅读有关此内容的信息。

# android - 自动更新前保存数据

> ID：15361494
> 
> 赞同：2
> 
> 时间：2013-03-12T12:41:25.093
> 
> 标签：android

当发生自动更新时，我的应用程序首选项中保存的旧日期将被删除。
**我怎样才能防止这种删除？**
我希望当我的应用程序自动更新时，它不会删除我保存的旧数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:58:00.247

我不确定这是否是一个好的解决方案，但只是一个您可以尝试的建议。

**第 1 步：**每当您更改（添加/编辑/删除）您的数据将其存储在永久存储中时，您可以尝试以下任何操作

> ```
>  a. save the data in file in sd card
>  b. store the data to your remote server or 
>  c. store in internal memory of the phone. 
> ```
> 
> （我不确定在案例c更新后它是否会持续存在，供参考可以[在这里查看](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

**第 2 步：** 创建一个`BroadcastReceiver`监听`ACTION_PACKAGE_REPLACED`Intent。这样您就知道您的应用程序包何时更新。现在再次从您保存数据的存储中读取数据（1a/1b/1c）

警告：在他不关心的情况下保存用户数据不是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:40:51.270

Android 将您的 SharedPreference 保存在 /data/data/your package name/shared_prefs 下

通常，更新应用程序不会删除您的 sharedPreference。

```
private void replaceNonSystemPackageLI(PackageParser.Package deletedPackage,
        PackageParser.Package pkg, int parseFlags, int scanMode, UserHandle user,
        String installerPackageName, PackageInstalledInfo res) {
    ...
    // First delete the existing package while retaining the data directory
    if (!deletePackageLI(pkgName, null, true, PackageManager.DELETE_KEEP_DATA,
            res.removedInfo, true)) {
        // If the existing package wasn't successfully deleted
        res.returnCode = PackageManager.INSTALL_FAILED_REPLACE_COULDNT_DELETE;
        deletedPkg = false;
    } else {
        ....
    }
    ....
} 
```

我认为您需要检查以下内容：

1.  您的设备是有根设备吗？有根设备上的应用程序可以删除他们想要的任何内容。

2.  您是否在更新的 apk 中使用了不同的包名称？

# c# - 如何使用 C# 在 Winforms 中输入一列数据

> ID：15361499
> 
> 赞同：0
> 
> 时间：2013-03-12T12:41:38.120
> 
> 标签：c#, winforms, datagridview

我有一个 Winform 应用程序，我希望用户能够针对产品列表输入一些库存更正，这反过来将为每个更正创建一个数据库记录。

使用组合框，我得到了它，因此必须依次选择每个项目。它工作得很好，但不是很用户友好。理想情况下，我想要一个带有空列的产品列表以输入更正，单击提交并完成。

我看着使用datagrdiview。我可以生成产品列表，但我不知道如何创建“条目列”。

关于走的路有什么建议吗？

干杯，麻木

**编辑**

这是我想在不显示代码的情况下尽可能清楚地做的模拟...

![我想要的样本](../Images/092e4a44e9477b71ba12827694decce6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:34:49.090

如果您想使用“提交”按钮来保存新的库存更正，那么方法将是：

- 使用产品名称和空单元格创建数据网格视图以进行库存校正

-点击“提交”按钮后读取“更正”列值，如果值存在更新数据库...</p>

在这里你可以怎么做：

在设计器中创建一个datagridview ，然后用设计器在这个datagridview中`dgvProductCorrections`创建两列 。将此（或您的）列名称放在 Column .Name 属性中`dgvProductCorrection_Product``dgvProductCorrection_Correction`

然后，我假设您有一个类 Product，其中存在属性 .Name，您需要将此属性的名称（在我的示例中为 Name）放在列的 .DataProperty

以上可以通过设计器或代码（构造器）完成

在 datagridview 中添加列表产品`List<Product> lstProducts;`将如下所示：

```
dgvProductCorrections.DataSource = lstProducts; //(this may be in Form_Load) 
```

在添加列表之前请记住将 datagridview 属性设置`AutoGenerateColumns`为`False`

```
dgvProductCorrections.AutoGenerateColumns = false; 
```

在`Button_Click`提交按钮的事件处理程序中放置一个代码，您可以在其中循环遍历所有行并读取校正值。在您可以使用这些值更新数据库之后

```
//Code in Button_Click
{   
    foreach(DataGridVewRow dgvr in dgvProductCorrections.Rows)
    {
        Decimal fCorrection;
        //Check if value exists and it can be used. Add own other checks
        if(dgvr.Cells(this. dgvProductCorrection_Correction.Name).Value != null &&  Decimal.TryParse(dgvr.Cells(this.dgvProductCorrection_Correction.Name).Value.ToString(), fCorrection) = True)
        {
         //Here you can put a update code, or save a correction in list and then update all by one update call
        }
    }
} 
```

# xml - Coldfusion - 检查 XmlNode 是否存在

> ID：15361500
> 
> 赞同：3
> 
> 时间：2013-03-12T12:41:39.460
> 
> 标签：xml, coldfusion, bluedragon

我真的一直在努力寻找解决方案。我的代码与我在 Google 搜索中看到的不同，而且我尝试过的任何方法都不起作用。基本上正如标题所示，我想检查是否存在 Xml 节点。这是因为从 YouTube 提要返回的 XML 不稳定。代码如下。

```
<cfset YouTubeXml = xmlParse(#YouTubeFavourites.FileContent#) />
<cfset group = XmlSearch(YouTubeXml, "//media:group") />    

<cfloop from="1" to="25" index="i">
    <cfoutput>
        #group[i]['media:thumbnail'][i]['url']#
    </cfoutput>
</cfloop> 
```

基本上错误说不`#group[i]['media:thumbnail'][i]['url']#`存在。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:52:17.477

下面的代码将在尝试显示变量之前检查以确保变量存在。嵌套方法是确保每个部分都存在的唯一方法。有一些功能可以让它看起来更漂亮，但这是另一个问题的主题。

```
<cfset YouTubeXml = xmlParse( YouTubeFavourites.FileContent ) />
<cfset group = XmlSearch( YouTubeXml, "//media:group" ) />

<cfoutput>
<cfloop from="1" to="25" index="i">
    <cfif StructKeyExists( Group, i )
        AND StructKeyExists( Group[ i ], 'media:thumbnail' )
        AND StructKeyExists( Group[ i ][ 'media:thumbnail' ], i )
        AND StructKeyExists( Group[ i ][ 'media:thumbnail' ][ i ], 'url' )>
        #group[i]['media:thumbnail'][i]['url']#
    </cfif>
</cfloop>
</cfoutput> 
```

我觉得你`i`在变量名中使用了两次很奇怪，但我不熟悉 Youtube API，所以也许这是正确的。

我已经更改了您代码中不需要的两件事。我删除了额外的`##`符号，`xmlParse()`因为它已经被视为变量。我也将其移出循环，因为多次`<cfoutput>`声明会出现轻微的性能损失。`<cfoutput>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:17:09.723

尝试使用`isDefined()`？

```
<cfset YouTubeXml = xmlParse(YouTubeFavourites.FileContent) />
<cfset group = XmlSearch(YouTubeXml, "//media:group") />

<cfloop from="1" to="25" index="i">
<cfif isDefined("#group[i]['media:thumbnail'][i]['url']#")>
    <cfoutput>
        #group[i]['media:thumbnail'][i]['url']#
    </cfoutput>
</cfif>
</cfloop> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T00:37:48.933

好吧，这里有些东西混在一起了。首先，`xmlSearch`函数总是返回一个数组，所以`structKeyExists`按照建议在上面使用函数自然会抛出异常。要考虑的第二件事是：源 XML 是否包含名称空间？如果是这样，您需要告诉您的 XPath 术语`"//:media:group"`（这是 ColdFusion 本身的一个奇怪的实现）。

```
<cfset group = xmlSearch(YouTubeXml, "//:media:group")>
<cfif not arrayIsEmpty(group)>

    <cfloop array="#group#" index="xmlNode">
        <cfif structKeyExists(xmlNode, "url")>
            <cfoutput>#xmlNode.url.xmlText#</cfoutput>
        </cfif>
    </cfloop>

<cfelse>
    <cfoutput>The XML does not contain the desired nodes.</cfoutput>
</cfif> 
```

但是，您的示例代码似乎假定您正在通过 XPath 搜索的节点中存在另一个数组。如果您需要访问结果节点的内部 XML 中的更多节点，您需要修改 XPath 术语以预先获取子节点，或者在循环中对结果节点执行另一个 XPath 搜索。ColdFusion 不会将子节点作为数组自动分配给其父节点。

如果这对您不起作用，请发布 XML 示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-19T14:56:19.093

一年过去了，我终于找到了答案。它将对其他人有用。我在下面得到了最终的工作代码。

```
<cfhttp url="https://gdata.youtube.com/feeds/api/users/Shuggy23/favorites" method="get" result="YouTube">   
            </cfhttp>
            <cfset xml = xmlParse(#YouTube.FileContent#) />

            <cfset media = XmlSearch(xml, "//media:group/") />
            <cfloop index="i" from="1" to="8">
                <cfoutput>
                    #media[i]['media:thumbnail'].XmlAttributes['url']# <br />
                </cfoutput>
            </cfloop> 
```

干杯，

道格拉斯

# wso2 - 如何在 WSO2 ESB 中设置线程池（Dsnd_t_max）

> ID：15361501
> 
> 赞同：2
> 
> 时间：2013-03-12T12:41:40.097
> 
> 标签：wso2, wso2esb

WSO2 ESB 未加载所有代理（超过 20 个）。然后我们在启动脚本中增加了以下两个值并且它起作用了：

```
-Dsnd_t_core=120
-Dsnd_t_max=600 
```

但后来我们遇到了 WSO2 ESB 的几个致命问题。多个 JMS 代理被阻止，不再使用消息。最糟糕的是：carbon.log 中没有错误！

此外，服务器上的 CPU 负载上升到 100%。

重新启动并没有解决问题，只有停用计划任务或代理才能解决问题。

我们现在发现，一个 VFS 代理正在创建正好 120 个线程 (JConsole)。对于每个 transport.PollInterval，它都会创建一个新线程。

**您对 -Dsnd_t_core 和 max 使用哪些值？**

**为什么 VFS 代理会在每个 PollInterval 处创建一个新线程（请参阅 jconsole）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:55:57.710

据我所知，WSO2 ESB 线程是基于 java.util.concurrent ThreadPool 的。

在此[链接](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)中，您可以了解一些 ThreadPool 特性，例如何时创建新线程、队列机制和拒绝任务策略。

**您对 -Dsnd_t_core 和 max 使用哪些值？**
-Dsnd_t_core 是 ThreadPool 中的最小线程数。因此 WSO2 ESB 将自动创建线程，就像您设置 -Dsnd_t_core 一样。默认值为 20。如果不指定 -Dsnd_t_core，WSO2 ESB 将创建 20 个 vfs-worker。
-Dsnd_t_max 是 ThreadPool 中的最大线程数。如果达到最大数量，WSO2 ESB 将停止创建新线程。

**为什么 VFS 代理会在每个 PollInterval 处创建一个新线程（请参阅 jconsole）？**
WSO2 ESB 将在这些条件下创建一个新线程：

> *   如果运行的线程少于 corePoolSize，则 Executor 总是更喜欢添加新线程而不是排队。
> *   如果 corePoolSize 或更多线程正在运行，Executor 总是更喜欢排队请求而不是添加新线程。
> *   如果请求无法排队，则会创建一个新线程，除非这将超过 maximumPoolSize，在这种情况下，该任务将被拒绝。

因此，只要您的队列已满且未达到最大线程数，WSO2 就会创建一个新线程来处理一个进程。PollInterval 设置为指定服务开始轮询源文件夹中的消息或文件之前的延迟。

您可以将 maxQueue 编号设置为未绑定 (-1)，这样队列永远不会满，也永远不会创建新线程。

我还从 JConsole 中找到了一些东西。1 个服务/1 个代理服务将仅由 1 个线程处理。我仍然试图弄清楚这一点，并使 1 个服务/1 个代理服务由 2 个或更多线程（多线程）处理。

希望这将有助于回答您的问题:)

# eclipse - 为什么 Eclipse 将所有包放在同一级别？

> ID：15361503
> 
> 赞同：1
> 
> 时间：2013-03-12T12:41:44.040
> 
> 标签：eclipse, package

我已经意识到 Eclipse IDE 将所有包放在同一级别的项目中（至少在 Java 中），例如：

[![同级包](../Images/d9a3e928a4a2bc4e519d8979a21b1b27.png)](https://i.stack.imgur.com/BWxOu.png)

但是，浏览文件系统，您会发现包以预期的多级方式处理。这有什么合乎逻辑的解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:43:34.640

这只是一个演示功能。您可以单击屏幕截图左侧看到的小向下箭头，然后选择`Package Presentation`->`Hierarchical`使其像您的文件系统一样。

您可以查看此[答案](https://stackoverflow.com/questions/11772969/package-presentation-in-java-ee-perspective-in-eclipse)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:10:11.423

我问了几次同样的问题，发现上面答案中的链接有助于更改演示文稿，因为它是一个很难找到的选项。

关于为什么部分，我认为这是因为 Eclipse 是用于 Android 开发的事实标准 IDE，并且以这种方式组织包更有用，它迫使您考虑根据 Android 项目指南组织类的方式。对我个人来说，它看起来也很像[http://developer.android.com/guide上的帮助文件。](http://developer.android.com/guide)对此的另一个论点可能是在旧版本的 Eclipse（Android 之前的时间）中，默认视图是不同的。

# php - PDO SQLSTATE[HY093]：参数号无效

> ID：15361505
> 
> 赞同：2
> 
> 时间：2013-03-12T12:41:51.220
> 
> 标签：php, pdo, bind, statements

我坚持这个，最近切换到 PDO 来学习自己。

```
/**
* update
* @param string $table A name of a table to update into
* @param string $data An associative array.
* @param string $where WHERE = ?.
*/
public function update($table, $dataArr, $where)
{
    $fieldDetails = NULL;

    foreach( $dataArr as $key => $value)
    {
        $fieldDetails .= "`$key` =:$value, ";
    }
    $fieldDetails = rtrim($fieldDetails,', ');

    echo "UPDATE $table SET ($fieldDetails) WHERE (`id`=:$where)";

    $stmt = $this->prepare("UPDATE $table SET ($fieldDetails) WHERE (`id`=:$where)");
    foreach($dataArr as $key => $value) 
    {
        //Binder key till värde.
        $stmt->bindValue(":$key", $value);
    }
    $stmt->bindValue(":$where", $where);
    $stmt->execute();

} 
```

我的插入功能就像一个魅力，但这个更新功能不起作用。我认为这与没有绑定的 id 有关。我在文档和线程中进行了搜索，但找不到解决方案。

我的函数调用。

```
public function update()
{
    $this->db->update(
    'testtable',
    array(
    'text' => 'exempel',
    'name' => 'exempel',
    ), 0);
} 
```

警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined in

如何正确绑定我传入函数的整数值，以便执行语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:49:38.033

```
$fieldDetails .= "`$key` =:$key, "; 
```

您需要将键名作为占位符，而不是值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:44:46.820

编辑：
好吧，我忽略了代码，我很抱歉。
无论如何，您的代码对 SQL 注入是开放的，最好使用[PDO 标签 wiki](https://stackoverflow.com/tags/pdo/info)中的解决方案。

顺便说一句，当使用的不是像 PDO 这样的石器时代库，而是[更有用](https://github.com/colshrapnel/safemysql)的东西时，您根本不需要 update() 函数，因为您可以简单地编写

```
$db->query("UPDATE ?n SET ?u WHERE id=?i",$table, $dataArr, $id); 
```

请注意，后一个代码比您的代码**更安全**，但更灵活：

*   它确实保护表名
*   它确实保护了字段名称
*   它不仅可以让您基于 id 的 WHERE，还可以让您在任何条件下。
*   它实际上允许您使用任何语法（甚至是 JOIN）

# jquery - 使用 $.when.apply & derferreds 访问多个返回对象

> ID：15361506
> 
> 赞同：0
> 
> 时间：2013-03-12T12:41:50.770
> 
> 标签：jquery

我有这样的代码，

```
var deffereds = $(someArray).map(function(index, ele) {
  return $.Deferred(function(def) {
      //Do Some custom thing with ele here
      def.resolve(someValue); //SomeValue will be differnt for each element
  });
});
$.when.apply(null, deffereds.get()).then(function (r1,r2,...) { // <-- Here is the problem
   //How Can I access responses from all the deffereds?
}); 
```

我的问题是如何访问所有延迟的响应？因为 someArray 中的项目数是动态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T08:51:54.527

您可以使用“特殊”参数参数

```
$.when.apply(this, deferredArray).then(function() { 
  for (var i = 0; i < arguments.length; i++) {
    console.log("Promise "+ i +" returned: " + arguments[i]);
  }
  alert("Finished"); 
}); 
```

# eclipse - Eclipse 部署程序集 - 在主项目 WEB-INF/lib 中创建依赖项目的 .war？

> ID：15361509
> 
> 赞同：3
> 
> 时间：2013-03-12T12:41:59.227
> 
> 标签：eclipse, tomcat, web-applications, deployment, web.xml

我有一个主要的 Web 项目，其中包含通过浏览器部署和访问页面所需的所有内容。然后我有几个“功能”，每个作为一个单独的项目，可以包含到主项目中。

举个例子，我有**MainApp**和**functions.reportsApp**。

在构建这些时`ant`会发生以下情况：

```
- MainApp.war
  - mainApp/jsf/Pages.faces等
  -reportsApp/jsf/Reports.faces 等
  - WEB-INF/web.xml、mainapp-faces-config.xml、reportsApp-faces.config.xml等
  - WEB-INF/库
     - MainApp.jar
       - META-INF/* (MainApp)
       - 我的/公司/MainApp/Code.class
     -functions.reportsApp.jar
       - META-INF/* (reportsApp's)
       - 我的/公司/reportsApp/Code.class

```

这工作正常，据我了解`.war`和`.jar`规范，是正确的。

不过，在 Eclipse 中，我想让这两个项目都打开并部署/开发到那里的 Tomcat 服务器设置。我有以下内容：

导入两个项目，设置**MainApp**以将**ReportsApp**作为项目依赖项（通过 MainApp-Properties、Java 构建路径、项目）。

注意：MainApp`web.xml`指定：

```
<param-name>javax.faces.CONFIG_FILES</param-name>
<param-value>
/WEB-INF/reportsApp-faces-config.xml,
/WEB-INF/mainApp-faces-config.xml
</param-value> 
```

reportApp`web.xml`指定：

```
<param-name>javax.faces.CONFIG_FILES</param-name>
<param-value>
/WEB-INF/reportsApp-faces-config.xml
</param-value> 
```

我在 Eclipse 创建的 MainApp-Properties-Deployment Assembly 中注意到：

`src:functions.reportsApp, deployPath: WEB-INF/lib`

这由 Eclipse 部署为`Tomcat/webapps/MainApp/WEB-INF/lib/functions.reportsApp.war`. **战争？**这对我来说没有意义，也不起作用。

为了使它工作，我必须：

*   添加到 MainApp 一个文件夹，我（通过高级部分）链接到 ReportApp 的 web 目录。
*   将链接文件夹添加到 MainApp 的部署程序集，并选择 MainApp 的 web 文件夹作为“部署描述符文件夹”

这让我将`web/*`（JSF 等）内容`Tomcat/webapps/MainApp`和 ReportsApp 的 WEB-INF 内容合并到 MainApp 的 WEB-INF 中。

我还必须确保 MainApp 的部署程序集包含`functions.reportsApp.jar`以确保它被部署到`MainApp/WEB-INF/lib`.

当然 Eclipse 可以自己解决这一切？一个依赖于另一个 Web 应用程序的 Web 应用程序必须意味着必须正确部署依赖项？

相关问题：

*   [设置引用另一个项目的 Eclipse 动态 Web 项目](https://stackoverflow.com/questions/4646684)
*   [在 Eclipse 部署程序集中将 Web 项目添加为 jar](https://stackoverflow.com/questions/4657304)

# php - php。如何将当前日期和时间分配给输入字段

> ID：15361510
> 
> 赞同：0
> 
> 时间：2013-03-12T12:42:01.373
> 
> 标签：php, codeigniter, codeigniter-2

如何将默认值当前时间戳分配给输入字段。

然后我想以隐藏的形式插入数据库。

如何分配默认值（当前 taimestamp）？

```
<input name="status" id="status" type="hidden" 
value="<?php echo CURRENT_TIMESTAMP ?>"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:59:41.740

```
Use value= <?php echo date('Y-m-d H:i:s'); ?> 
```

根据需要设置日期格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:46:48.400

```
<input type="hidden" name="tstamp" value="<?php echo time(); ?>" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:59:41.903

您可以在后端执行此操作，只需使用`default value`表列即可。

```
UPDATE <table_name> SET <column_name> = NOW(); 
```

# jsf-2 - 在没有长时间对话的情况下在 seam 2.3 中使用 jstl 标签是行不通的

> ID：15361513
> 
> 赞同：1
> 
> 时间：2013-03-12T12:42:07.680
> 
> 标签：jsf-2, migration, jstl, seam2, seam-conversation

我正在从 seam 2.2 (jsf 1.2, jboss6) 迁移到 seam 2.3 (jsf 2, jboss 7) 并发现奇怪的行为。我能够通过联系人列表示例重现它：

编辑 viewContact.xhtml 页面并替换这个片段：

```
<h3>
  <h:outputText id="Comments" value="Comments" rendered="#{not empty contact.comments}" />
  <h:outputText id="noComments" value="No Comments" rendered="#{empty contact.comments}" />
</h3> 
```

像这样：

```
<c:if test="#{not empty contact.comments}">
  <h3><h:outputText value="Comments" /></h3>
</c:if>
<c:if test="#{empty contact.comments}">
  <h3><h:outputText value="No Comments" /></h3>
</c:if> 
```

（不要忘记添加命名空间`xmlns:c="http://java.sun.com/jsp/jstl/core"`）

我知道改变是没有意义的——它只是说明了我的问题。

重建/重新部署后，当您转到 viewContact 页面并尝试添加任何新评论时，您将获得：

请求处理期间的异常：

`Caused by javax.servlet.ServletException with message: "java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: org.jboss.seam.example.contactlist.Comment.contact -> org.jboss.seam.example.contactlist.Contact"`

现在让我们做一些其他更改，以便在进入 viewContact 页面后开始长时间运行的对话（并在持续评论后结束它）

在 pages.xml 中插入这个片段：

```
<page view-id="/viewContact.xhtml">
    <begin-conversation />
    <param name="contactId" value="#{contactHome.id}" converterId="javax.faces.Long" />
    <navigation>
        <rule if-outcome="persisted">
            <end-conversation />
            <redirect />
        </rule>
        <rule if-outcome="removed">
            <redirect view-id="/search.xhtml" />
        </rule>
    </navigation>
</page> 
```

在 viewContact.xhtml 中更改提交按钮：

```
<h:commandLink id="submit" action="#{commentHome.persist}" value="Create Comment" >
  <s:conversationId/>
</h:commandLink> 
```

现在，在重新部署之后，可以添加新的注释——不会抛出异常。

有人可以向我解释为什么在没有长时间对话的情况下使用 jstl 标签不适用于 seam 2.3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T08:20:16.663

此问题的解决方案是关闭部分状态保存。只需将其添加到 web.xml：

```
<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param> 
```

# c# - 如果不存在，则在新安装的 c# 应用程序上创建 MySql 数据库

> ID：15361514
> 
> 赞同：0
> 
> 时间：2013-03-12T12:42:09.973
> 
> 标签：c#, mysql, deployment

我即将部署我的应用程序并遇到了一些麻烦。

我在 application.settings 中保存了数据库的连接字符串，需要一种方法来检查程序第一次启动时数据库是否存在，如果不存在，我需要程序在启动程序之前创建它。

我假设这将是一个 mysql 语句来检查 db 是否存在，如果不存在则创建。但是，我不知道在哪里或如何做到这一点，我可以创建一个空白数据库的 mysql 转储，其中已经创建了表等并使用它吗？

我已经在本地存储了 mysql dll 文件，所以没有问题，它只是在应用程序运行之前创建字符串想要连接的数据库，因此不会立即出现连接错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:27:29.097

您可以通过运行以下 SQL 语句来执行此操作：

```
SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME = "my_db" 
```

如果返回的结果集中不存在它，则可以创建它。

这确实提出了有关 MySQL 权限的问题，以及您的应用程序是否应该具有启用此类检查的用户权限。

**根据评论进行编辑。**

目前尚不清楚您是否创建了连接字符串 - 我会假设最坏的情况，它是设置的一部分，因此您的客户可以输入它（如果您知道它，下面的过程会简化。

我会将连接字符串传递给`MySqlConnectionStringBuilder`类的构造函数，这样就可以很容易地使用该类连接到数据库`MySqlConnection`。我将使用`MySqlConnectionStringBuilder`类的新实例（服务器、主机、用户等）中的属性来设置`MySqlConnection`类。

如果连接不起作用，我会将信息返回给用户，他们可以更新他们的连接字符串。

成功连接到数据库后，我将使用实例`Database`属性中的数据库名称`MySqlConnectionStringBuilder`来构建上面的查询。

如果命令返回 NULL 数据库不存在，然后需要创建，如果数据库确实存在，那么命令将返回数据库的名称。

现在有两条路：

1.  **它不存在**——它需要创建，我可能会有一个包含 create 语句的外部 SQL 文件（可以通过使用 --nodata 选项由 MySQL 转储生成）。我会解析这个文件并执行创建语句
2.  **它确实存在**——我现在将检查数据库的结构以确保它在继续安装之前兼容。

# azure - Azure 存储分析本地开发

> ID：15361516
> 
> 赞同：0
> 
> 时间：2013-03-12T12:42:18.477
> 
> 标签：azure, analytics, azure-storage

我想知道是否有一种方法可以为开发存储启用存储分析？所以我可以看到一些关于我运行的测试的统计数据？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:31:59.980

目前不提供用于开发存储的存储分析。您需要针对云存储运行测试并在那里收集数据。

# html - 尝试根据屏幕窗口调整我的标题类中的 Flash 横幅的大小

> ID：15361517
> 
> 赞同：0
> 
> 时间：2013-03-12T12:42:21.690
> 
> 标签：html, flash

标头类中的此代码用于调整横幅的大小。

我想根据查看器使用的浏览器调整它的大小。如何才能做到这一点？

```
<div class="header">
    <object type="application/x-shockwave-flash"
    id="ac25c2188119648f18d4e7df823b71eac"
    data="http://imstore.bet365affiliates.com/365_178348-618-214-2-149-1-57326.aspx"
    width="1000"
    height="200"
    style="padding:0px 0px 0px 173px"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:51:02.510

没有办法知道 PHP 中的浏览器大小，因为大小已确定`client side`并且 PHP 正在运行`server side`。

您可以在站点完全加载后使用 javascript 更改站点，或者您可以只输入宽度和高度以`100%`使其自动拉伸。

如果你想使用 javascript，你可以使用普通的旧 javascript，但是很多不同的浏览器使用不同的方法，并且在浏览器窗口大小上有不同的结果。

如果您使用的是 jQuery，它很简单：

```
<script>
$(function() {
  //this make sure it starts when its loaded

  $('div.header > object').width($('body').width());
  $('div.header > object').height($('body').height());
})
</script> 
```

Atlast 有用于 flash 的全屏选项，但这本身就是一个主题。检查[在 Flash Player 中探索全屏模式](http://www.adobe.com/devnet/flashplayer/articles/full_screen_mode.html)

# c# - 使用 ShouldBeEquivalentTo 时如何排除 IEnumerable 中所有项目的属性？

> ID：15361521
> 
> 赞同：6
> 
> 时间：2013-03-12T12:42:26.750
> 
> 标签：c#, unit-testing, fluent-assertions

在我的 NUnit/FluentAssertions 测试中，我使用以下代码将从系统返回的复杂对象与参考对象进行比较：

```
 response.ShouldBeEquivalentTo(reference, o => o.Excluding(x => x.OrderStatus)
                                               .Excluding(x => x.Id)
                                               .Excluding(x => x.Items[0].Name)
                                               .Excluding(x => x.Items[0].Article)
                                               .Excluding(x => x.ResponseStatus)); 
```

然而，这并不是我想要的。我想排除列表`Name`中`Article`的*每个*对象，`Items`而不仅仅是第 0 个对象。我如何实现这个场景？

我浏览了[文档](http://fluentassertions.codeplex.com/documentation)并没有找到解决方案。我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T18:54:47.970

有一个 Excluding() 的重载，它提供了一个 ISubjectInfo，您可以将其用于更高级的选择标准。有了这个重载，您可以执行以下操作：

```
subject.ShouldBeEquivalentTo(expected, config =>
                config.Excluding(ctx => ctx.PropertyPath == "Level.Level.Text")); 
```

# regex - Perl 用更简单的方法替换复杂的正则表达式

> ID：15361529
> 
> 赞同：-1
> 
> 时间：2013-03-12T12:42:37.567
> 
> 标签：regex, perl, url

**我有以下代码：**

```
#!/usr/bin/perl

use strict;
use warnings;
#use diagnostics;

use URI qw( );

my @insert_words = qw(HELLO GOODBYE);  

while (<DATA>) {
   chomp;
   my $url = URI->new($_);
   my $query = $url->query;

foreach (@insert_words) {
  # Use package vars to communicate with /(?{})/ blocks.
  local our $insert_word = $_;

  local our @queries;
  if (defined $query) {
      $query =~ m{
          ^(.*[/=])([^/=&]*)((?:[/=&].*)?)\z
          (?{
              if (length $2) {
            push @queries, "$1$insert_word$2$3";
                  push @queries, "$1$insert_word$3";
                  push @queries, "$1$2$insert_word$3";
              }
          })
          (?!)
     }x;
  }

      if (@queries) {
          for (@queries) {
              $url->query($_);
              print $url, "\n";
          }
      }
      else {
          print $url, "\n";
      }
  }
}

__DATA__
http://www.example.com/index.php?route=9&other=7 
```

**上面的代码可以正常工作并产生以下输出：**

```
http://www.example.com/index.php?route=9&other=HELLO7    <-- precedes the query parameter
http://www.example.com/index.php?route=9&other=HELLO     <-- replaces the query parameter
http://www.example.com/index.php?route=9&other=7HELLO    <-- succeeds the query parameter and so on for the rest of them....
http://www.example.com/index.php?route=HELLO9&other=7
http://www.example.com/index.php?route=HELLO&other=7
http://www.example.com/index.php?route=9HELLO&other=7
http://www.example.com/index.php?route=9&other=GOODBYE7
http://www.example.com/index.php?route=9&other=GOODBYE
http://www.example.com/index.php?route=9&other=7GOODBYE
http://www.example.com/index.php?route=GOODBYE9&other=7
http://www.example.com/index.php?route=GOODBYE&other=7
http://www.example.com/index.php?route=9GOODBYE&other=7 
```

**我想要做什么**

我试图获得与上面所示**完全相同的**`foreach @insert_words`输出（因此在 url 中的每个查询参数之前、替换和成功），但我想用更简单、更容易理解的方法替换复杂的正则表达式方法，但我不不知道最好的办法。

非常感谢您对此的帮助，非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:34:11.607

它在文档中描述了[`URI`](http://search.cpan.org/perldoc?URI)如何处理查询。该[`URI::QueryParam`](http://search.cpan.org/perldoc?URI%3a%3aQueryParam)模块提供`query_param`允许与查询交互的子程序。

```
use strict;
use warnings;
use URI;
use URI::QueryParam;

my @words = qw(HELLO GOODBYE);
my $URL = <DATA>;
my $uri = URI->new($URL);

for my $key ($uri->query_param) {                    # the keys of the query
    my $org = $uri->query_param($key);               # keep original value
    for my $word (@words) {
        for ("$org$word", $word, "$word$org") {   
            $uri->query_param($key, $_);             # set new value
            print $uri->as_string, $/;               # print new uri
        }
    }
    $uri->query_param($key, $org);                   # restore original value
}

__DATA__
http://www.example.com/index.php?route=9&other=7 
```

**输出：**

```
http://www.example.com/index.php?route=9HELLO&other=7
http://www.example.com/index.php?route=HELLO&other=7
http://www.example.com/index.php?route=HELLO9&other=7
http://www.example.com/index.php?route=9GOODBYE&other=7
http://www.example.com/index.php?route=GOODBYE&other=7
http://www.example.com/index.php?route=GOODBYE9&other=7
http://www.example.com/index.php?route=9&other=7HELLO
http://www.example.com/index.php?route=9&other=HELLO
http://www.example.com/index.php?route=9&other=HELLO7
http://www.example.com/index.php?route=9&other=7GOODBYE
http://www.example.com/index.php?route=9&other=GOODBYE
http://www.example.com/index.php?route=9&other=GOODBYE7 
```

# php - 变量名设置为键，其值设置为数组中的值

> ID：15361530
> 
> 赞同：0
> 
> 时间：2013-03-12T12:42:38.133
> 
> 标签：php, arrays

我想设置一组变量，然后循环将它们添加到一个数组中，并将键设置为变量名，如下所示。

我只是不确定你是如何创建循环的。

```
// create an array
$array = array();

// Set up Variable
$green  = "31d944";
$red    = "d92929";
$blue   = "1b43d9";
$pink   = "d96ad8";
$orange = "d98225";

// Loop though - not sure how this would work...
for($i=0; $i<5; $i++){
    $array[] = $varNmae => $green;
}

// Output something like below
$array['green']; // output '31d944'
$array['red'];  // output 'd92929'
$array['blue']; // output '1b43d9'
$array['pink']; // output 'd96ad8'
$array['orange']; // output 'd98225' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T12:45:30.583

[`compact()`](http://php.net/manual/en/function.compact.php)与[`extract()`](http://www.php.net/manual/en/function.extract.php)（将关联数组提取到本地符号表中）相反，并且是您要使用的。

```
$array = compact("green", "red", "blue", "pink", "orange"); 
```

[键盘](http://codepad.org/ASUFb2e8)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T12:45:21.733

该函数[`compact`](http://www.php.net/manual/en/function.compact.php)正是这样做的：

```
$array = compact('green', 'red', 'blue', 'pink', 'orange'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:46:39.343

定义变量然后将它们添加到数组中的想法是什么，而不是仅仅初始化数组？

```
// Can't you just use this?
$ary = array(
  'green' => '31d944',
  ...
  'orange' => 'd98225',
); 
```

可以循环使用

```
foreach ($ary as $color => $val) {
  echo "{$color} is equal to {$val}";
} 
```

或访问为

```
echo $ary['green']; 
```

# nullpointerexception - 尝试在 LIBGDX 中加载粒子效果文件时出现 NullPointerException

> ID：15361535
> 
> 赞同：1
> 
> 时间：2013-03-12T12:42:46.790
> 
> 标签：nullpointerexception, game-engine, libgdx, particles, particle-system

尝试为粒子效果加载文件时出现 NullPointerException。

```
particleEffect = new ParticleEffect();
particleEffect.load(Gdx.files.internal("hdpi/particles/progressbar"), Gdx.files.internal("hdpi/particles")); 
```

这是堆栈跟踪：

```
Exception in thread "Timer-0" java.lang.NullPointerException
at org.lwjgl.opengl.GL11.glGenTextures(GL11.java:1372)
at com.badlogic.gdx.backends.lwjgl.LwjglGL10.glGenTextures(LwjglGL10.java:240)
at com.badlogic.gdx.graphics.Texture.createGLHandle(Texture.java:166)
at com.badlogic.gdx.graphics.Texture.create(Texture.java:158)
at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:133)
at com.badlogic.gdx.graphics.Texture.<init>(Texture.java:126)
at com.badlogic.gdx.graphics.g2d.ParticleEffect.loadTexture(ParticleEffect.java:198)
at com.badlogic.gdx.graphics.g2d.ParticleEffect.loadEmitterImages(ParticleEffect.java:193)
at com.badlogic.gdx.graphics.g2d.ParticleEffect.load(ParticleEffect.java:141)
at com.yyy.xxx.Screens.GameScreen.<init>(GameScreen.java:38)
at com.yyy.xxx.MyScreen$3.getScreenInstance(MyScreen.java:27)
at com.yyy.xxx.ScreenManager.show(ScreenManager.java:33)
at com.yyy.xxx.ScreenChangeTask.run(ScreenChangeTask.java:15)
at java.util.TimerThread.mainLoop(Unknown Source)
at java.util.TimerThread.run(Unknown Source) 
```

任何建议为什么？

**更新：**

我尝试在 android 上运行并且它可以工作，但我得到了这样的东西：
![在此处输入图像描述](../Images/5fa6951f04b9371b262ebeaf861aa082.png)

但是如果我关闭手机屏幕并重新打开它，我会看到这个，它应该是这样的：
![在此处输入图像描述](../Images/c04ebb57226462a0593bbaee4823864c.png)

我认为此更新将回复第一条评论。

1) 桌面问题未解决 2) 应用启动时出现不良粒子图像的新问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:48:01.587

我有这个代码

```
particleEffect = new ParticleEffect();
particleEffect.load(Gdx.files.
                    internal("hdpi/particles/progressbar.p"), 
                    Gdx.files.internal("hdpi/particles/")); 
```

在公共类 GameScreen 的构造函数中实现了 Screen。我将此代码移到那个地方，所有资产都在我的应用程序中加载一次。这解决了这两个问题。现在它在桌面上运行，并且没有粒子渲染不好的问题。

# file - 在 COBOL 中打开扩展不起作用

> ID：15361539
> 
> 赞同：0
> 
> 时间：2013-03-12T12:42:58.320
> 
> 标签：file, io, cobol, logfile

我正在尝试在 COBOL 中编写一个子程序来创建一个从我的主程序调用的日志文件。我不希望每次调用子程序时都清除日志文件，所以我使用“打开扩展”。问题是由于未知原因它不起作用，程序什么也不做。当我将“打开扩展”更改为“打开输出”时，它可以工作，但我不希望每次都覆盖文件。

```
 IDENTIFICATION DIVISION.
   PROGRAM-ID. LOGGER.
   ENVIRONMENT DIVISION.
   INPUT-OUTPUT SECTION.
   FILE-CONTROL.
   SELECT LOGFILE ASSIGN TO "LOGFILE.txt"
   ORGANIZATION IS LINE SEQUENTIAL.
   DATA DIVISION.
   FILE SECTION.
   FD LOGFILE.
   copy "FDLOGGER.cpy".
   WORKING-STORAGE SECTION.

   LINKAGE SECTION.
   01 LOGFILEBOODSCHAP      PIC X(150) value spaces.

   Procedure division USING LOGFILEBOODSCHAP.
   pgm.
   open EXTEND LOGFILE
   Move Current-time to TIJD
   Move Current-date to DATUM
   Move LOGFILEBOODSCHAP to BOODSCHAP   
   write logrecord
   close LOGFILE
   exit program
   . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:00:10.373

好吧，这是一个猜测，因为您提供的内容不多，但如果“LOGFILE.txt”不存在，您的 SELECT 将需要 OPTIONAL。

建议您将文件状态检查放入您的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-26T22:24:58.350

我知道你的问题在这里很老了。但是我今天仍然遇到同样的问题，几个小时后，我发现我正在使用的带有 OpenCobolIDE 4.7.6 的 GnuCOBOL 2.0 在尝试使用 OPEN EXTEND 时会生成错误 35。我以一种不太优雅的方式解决了它，但效果很好。我正在分享我找到的解决方案。

```
 IDENTIFICATION DIVISION.
   PROGRAM-ID. CREATFIL.

   ENVIRONMENT DIVISION.
   CONFIGURATION SECTION.
   REPOSITORY.
       FUNCTION ALL INTRINSIC.
   INPUT-OUTPUT SECTION.
   FILE-CONTROL.
       SELECT FD-VIRTUAL ASSIGN TO "CADFILE.TXT"
       ORGANIZATION IS LINE SEQUENTIAL
       ACCESS MODE IS SEQUENTIAL
       FILE STATUS IS WS-GET-ERROR.

   DATA DIVISION.
   FILE SECTION.
   FD  FD-VIRTUAL.
   01  FS-BOOK.
       05 NOME PIC X(40).

   WORKING-STORAGE SECTION.
   77  WS-GET-ERROR      PIC XX.

   LOCAL-STORAGE SECTION.
   01  TB-VIRTUAL.
       05  TB-BOOK.
           10 LS-NOME    PIC X(40).
   77  LS-ENTER          PIC X.
   77  WS-RESP           PIC A VALUE "Y".

   PROCEDURE DIVISION.
       OPEN EXTEND FD-VIRTUAL.
       IF WS-GET-ERROR = "35" 
          OPEN OUTPUT FD-VIRTUAL
       END-IF
       IF WS-GET-ERROR = "00"
          PERFORM UNTIL UPPER-CASE(WS-RESP) NOT = "Y"
             DISPLAY X"0D"
             DISPLAY "Name: " WITH NO ADVANCING
             ACCEPT LS-NOME
             WRITE FS-BOOK FROM TB-BOOK
             DISPLAY "More record (Y) for YES " WITH NO ADVANCING
             DISPLAY "- any key for NOT: " 
                WITH NO ADVANCING
             ACCEPT WS-RESP
             IF UPPER-CASE(WS-RESP) NOT = "Y"
                EXIT PERFORM
             END-IF
          END-PERFORM
       END-IF.

       CLOSE FD-VIRTUAL.

       DISPLAY X"0D".
       DISPLAY "Press <ENTER> to finish... " WITH NO ADVANCING.
       ACCEPT LS-ENTER.
       STOP RUN.
   END PROGRAM CREATFIL. 
```

遵守指示

```
OPEN EXTEND FD-VIRTUAL.
IF WS-GET-ERROR = "35" 
   OPEN OUTPUT FD-VIRTUAL
END-IF 
```

# javascript - 如何在不调用任何 CSS 的情况下隐藏内容中的特定文本？

> ID：15361542
> 
> 赞同：1
> 
> 时间：2013-03-12T12:43:05.707
> 
> 标签：javascript, jquery, html, css

我只需要从下面的内容中隐藏单词“QUICK”，而不需要调用任何类或标记中​​的更改。这在纯 CSS 中是不可能的，也许我们可以这样做 JavaScript / jQuery 并调用 QUICK 作为变量并使用 CSS 隐藏。我不擅长 Java 编码，所以有人可以帮忙吗？

例子：

```
<html>
<p>The quick brown fox jump over the lazy dog.</p>
<p>The quick brown fox is too hungry.</p>
<p>The poor quick brown fox is tired and thirsty.</p>
</html> 
```

如果可能，请在 JSFiddle 中提供解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T12:46:12.223

查找所有出现的`quick`并将它们包装成一个特定元素（例如`<del>`）通过css隐藏

CSS

```
p del {
   display: none;
} 
```

jQuery

```
$('p').each(function() {
   var $this = $(this);
   $this.html($this.text().replace(/\bquick\b/g, '<del>quick</del>'));
}); 
```

示例 jsbin：http: [//jsbin.com/ogakit/1/](http://jsbin.com/ogakit/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:10:40.713

看看小提琴[jsfiddle](http://jsfiddle.net/jLu7h/2/)现在正在工作

```
$(document).ready(function(){
$('p').each(function () {
    var $this = $(this);
   $this.html($this.text().replace(/\bquick\b/g, '<span style="display:none">quick</span>'));
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:01:48.193

我想这就是你想要的..!!

```
<!DOCTYPE html>
<html>
<body id ="demo">

<p>The quick brown fox jump over the lazy dog.</p>
<p>The quick brown fox is too hungry.</p>
<p>The poor quick brown fox is tired and thirsty.</p>

<button onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
var str=document.getElementById("demo").innerHTML; 
var n=str.replace("quick","HIDDEN");
document.getElementById("demo").innerHTML=n;
}
</script>

</body>
</html> 
```

# c# - Json 对 C# 自定义对象的响应

> ID：15361545
> 
> 赞同：0
> 
> 时间：2013-03-12T12:43:15.840
> 
> 标签：c#, asp.net, json

我正在调用 Json 网络服务并关注 Json

```
{
    "Content": {
        "CallId": "345353-981b-41a8-a108-a5d6891a7987",
        "Detail": {
            "ConversationId": "345353-981b-41a8-a108-a5d6891a7987",
            "UserId": "d232ad07-3fb6-4ecd-85f7-1c41a8c43013",
            "Region": "beta.us",
            "GroupId": "CT-VIP",
            "WalletId": "d232ad07-3fb6-4ecd-85f7-1c41a8c43013",
            "TrunkId": "d232ad07-3fb6-4ecd-85f7-1c41a8c43013"
        },
        "CallService": {
            "Region": "beta.us",
            "Id": "764bac3af1d84c7db8fe49b2f76e64c0"
        }
    },
    "Status": "OK"
} 
```

我正在使用以下代码发出请求并获得响应：

```
public string MakeCallTrucnkCall(string url)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Headers.Add("X-Client:" + "dfsdfs; dsfsdfsf; 151.1.1; 1");
        request.Headers.Add("X-Authenticator-Session:" + "code here");

        try
        {
            WebResponse response = request.GetResponse();

            using (Stream responseStream = response.GetResponseStream())
            {
                StreamReader reader = new StreamReader(responseStream, Encoding.UTF8);
                return reader.ReadToEnd();                 
            }
        }
        catch (WebException ex)
        {
            WebResponse errorResponse = ex.Response;
            using (Stream responseStream = errorResponse.GetResponseStream())
            {
                StreamReader reader = new StreamReader(responseStream, Encoding.UTF8);
                String errorText = reader.ReadToEnd();

                // log errorText
            }
            throw;
        }
    } 
```

如果出现错误，我会收到以下回复：

```
{
    "Status": "ERR",
    "Errors": [
        {
            "Code": "Err_Auth_NoInfo"
        }
    ]
} 
```

这将返回我使用 reader.ReadToEnd 将其转换为字符串的响应。但我想将此响应转换为我的自定义对象。我在某处读到我可以使用 Javascript 序列化程序类，但是我的类应该由这个 json 填充哪些属性？

我需要像下面这样上课吗？

```
public class APIResponse{
public Content {get;set;}
public CallId {get;set;}
public ConversationId {get;set;}
public Detail {get;set;}
public UserId {get;set;}
public Region{get;set;}
} 
```

还是会有所不同？我不确定 json 如何映射到自定义对象以及我应该拥有哪些属性以及如何在我的自定义对象而不是字符串上以表单形式获得响应。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:51:12.303

您的 C# 类应该看起来像您的 JSON 数据：

```
public class APIResponse
{
    public APIContent Content { get; set; }
    public string Status { get; set; }
}

public class APIContent
{
    public string CallID { get; set; }
    public APIDetail Detail { get; set; }
    public APICallService CallService { get; set; }
} 
```

...

然后你可以反序列化：

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
APIResponse response = serializer.Deserialize<APIResponse>(request); 
```

# php - 脸书重定向

> ID：15361546
> 
> 赞同：1
> 
> 时间：2013-03-12T12:43:22.860
> 
> 标签：php, facebook-php-sdk

使用 facebook 身份验证时遇到问题。

```
 <?php
 $user = null;
 try{
     include_once "fb/facebook.php";
 }
 catch(Exception $o){
    error_log($o);
 }
 $facebook = new Facebook(array(
    'appId'  => $fbconfig['appid'],
    'secret' => $fbconfig['secret'],
    'cookie' => true
 ));

$loginUrl = $facebook->getLoginUrl(array(
    'scope' => 'publish_stream,email',  
    //'redirect_uri' => 'https://www.facebook.com/pages/MediaEngine/304221192963546?id=304221192963546&sk=app_143090482526977'
));
$user = $facebook->getUser();
if($user){  
    try{
        $user_profile = $facebook->api('/me');
        $permissions = $facebook->api('/me/permissions');                                  
        }catch(FacebookException $e){                   
        }
       }else{
         echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
}
?> 
```

当用户接受应用程序时，它会将用户重定向到标签页（[http://apps4you.hu](http://apps4you.hu)），用户不会留在 facebook，但如果用户关闭并返回 facebook 上的应用程序（已经经过身份验证）它在 iframe 中运行良好。如果我使用 redirect_uri => my_app ，它将重定向、重定向和重定向，但永远不会运行应用程序，浏览器只是加载和借出，但没有任何反应。我花了几天时间来解决这个问题，但我找不到任何解决方案。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:14:18.027

如下更改 $loginUrl 并尝试：

$_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF 保护 $loginUrl _url = " [https://www.facebook.com/dialog/oauth?client_id=](https://www.facebook.com/dialog/oauth?client_id=) " . APP_ID 。“&redirect_uri=”。urlencode($next) 。“&状态=”。$_SESSION['state'] 。"&scope=".$permissions;

# javascript - 如何使用 Meteor 创建异步 RESTful 接口

> ID：15361548
> 
> 赞同：3
> 
> 时间：2013-03-12T12:43:27.920
> 
> 标签：javascript, meteor

我正在使用 Meteor.router 为我的网络应用程序设置一个 RESTful 接口。在某些情况下，我想异步执行调用，然后告诉调用者没问题。

我已经这样做了：

首先定义一个 Meteor 方法

```
Meteor.methods( {
   async: function() {
      //do nothing
   }
}); 
```

这个方法什么都不做，因为它只需要启用回调

```
Meteor.Router.add( '/fieldData', 'POST', function ( id ) {
   var that = this;
   Meteor.call("async", function(err, res) {
      storeFieldData( that.request.body );
   });

   return [200, 'form data created'];
} ); 
```

这里所做的是，Meteor.call 用于创建异步回调的能力。

我确信有一种更优雅的方法是我的无知阻止我找到的。谢谢你指出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:00:44.323

我假设这是在您的服务器 js 上，您必须提供一个 REST 接口，而不必受异步 javascript 的约束。例如你可以这样做：

```
Meteor.Router.add( '/fieldData', 'POST', function ( id ) {
    var result = Meteor.call('foo', this.request.body)
    return result;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T21:13:00.763

有一种更好的方法，如果您想访问其他 Meteor 功能，它会有所帮助：使用 Fiber

代码如下所示：

```
Meteor.Router.add( '/fieldData', 'POST', function () {
   var body = this.request.body;
   Fiber( function() {
      storeFieldData( body );
   }).run();

   return [200, 'form data created'];
} ); 
```

我不知道的是如何从 Fiber 内部实际返回一些东西:-(

# jquery - 在 jQueryUI 选项卡中通过 AJAX 为核心图表加载 Google 可视化

> ID：15361553
> 
> 赞同：1
> 
> 时间：2013-03-12T12:43:55.647
> 
> 标签：jquery, html, ajax, jquery-ui, google-visualization

[在 jQueryUI 选项卡中通过 AJAX 加载 Google 可视化](https://stackoverflow.com/questions/3363875/loading-google-visualizations-via-ajax-in-jqueryui-tabs)

上面的链接是一个类似的疑问，我有一个类似的疑问，我需要首先使用带有 ajax 的 jqueryui 选项卡的谷歌可视化核心图表它不是所有的工作我有同样的问题，但是链接中提供的解决方案它部分工作它完美地工作对于该示例中提供的可视化图表，但不是柱形图或饼图的核心图表，我对这些图表有什么不同吗

索引页包含此脚本

```
<script src="js/jquery-1.9.1.js" type="text/javascript"></script>
<script src="js/jquery-ui.js"></script>
<script type='text/javascript' src='http://www.google.com/jsapi'></script> 
    $(function() {
    $("#switch").tabs({
        beforeLoad: function( event, ui ) {
            ui.jqXHR.error(function() {
                ui.panel.html(
                    "Couldn't load this tab. We'll try to fix this as soon as possible. " + "If this wouldn't be a demo."
                );
            });
        }
    });
}); //for swicthes  
google.load("visualization", "1", {packages:["corechart"]}); 
```

并且ajax页面包含

```
<script type='text/javascript'>
 google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]);

    var options = {
      title: 'Company Performance',
      hAxis: {title: 'Year', titleTextStyle: {color: 'red'}}
    };

    var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

```
 <div id='chart_div' style='width: 700px; height: 240px;'></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T11:39:26.600

我有完全相同的问题。将我的 ajax 页面中的 javascript 更改为此破解它：

```
<script type='text/javascript'>
var data = google.visualization.arrayToDataTable([
  ['Year', 'Sales', 'Expenses'],
  ['2004',  1000,      400],
  ['2005',  1170,      460],
  ['2006',  660,       1120],
  ['2007',  1030,      540]
]);

var options = {
  title: 'Company Performance',
  hAxis: {title: 'Year', titleTextStyle: {color: 'red'}}
};

var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
chart.draw(data, options);
</script> 
```

即移除回调并取出drawChart函数

# jquery - 单击时滚动到元素

> ID：15361556
> 
> 赞同：1
> 
> 时间：2013-03-12T12:44:00.800
> 
> 标签：jquery, scroll

我有以下问题：

我有一个按钮：

```
<div id="meerinfotoestel">
   <a id="scroll-to-meerinfo" href="#meerinfo">
      Meerinfo
   </a>
</div> 
```

我已经设置了一些具有以下名称的选项卡：

`.woocommerce-tabs`

现在我希望屏幕滚动到选项卡，点击。

我有以下脚本：

```
<script>
$(document).ready(function () {  
    $('#scroll-to-meerinfo').click(function(event){
    event.preventDefault();
    scrollToElement('.woocommerce-tabs');
});
</script> 
```

显然，这样做的唯一一件事就是在 url 之后放置一个锚点。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:51:08.207

看到这个： **[样本](http://jsfiddle.net/snd5w/2/)**

```
$(document).ready(function () {
  $('#scroll-to-meerinfo').click(function (event) {
    event.preventDefault();
    scrollToElement($('.woocommerce-tabs'));
  });

  function scrollToElement(elem) {
    $('body').animate({
        scrollTop: elem.offset().top
    }, 2000);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:49:41.387

试试这个：

```
$(document).ready(function () {  
    $('#scroll-to-meerinfo').click(function(event){
      event.preventDefault();
      $('#woocommerce-tabs').scrollIntoView(true);
      // let your tab id is woocommerce-tabs
    });
}); 
```

**scrollIntoView 的语法**

```
element.scrollIntoView(alignWithTop); 
```

阅读文档[https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)

# entity-framework-6 - EntityFramework, version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 与.net framework 4不兼容

> ID：15361557
> 
> 赞同：1
> 
> 时间：2013-03-12T12:44:03.467
> 
> 标签：entity-framework-6

我最近已将我项目中的所有解决方案升级到 EF6 alpha3，但我的一个项目缺少 EntityFramework.dll 和 EntityFramework.SQLServer.dll 引用。这自然会在我运行应用程序时导致错误，但是当我尝试手动添加对解决方案的引用时，我收到错误消息：“EntityFramework, version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 is incompatible with .网络框架 4"

我的其他解决方案的应用程序设置是 .net 4，他们没有这个问题。还有什么其他设置或问题可能导致这种情况？我不确定要在此处附加哪些代码或示例，因此请根据需要请求。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:10:14.703

EF6 对于它支持的每个 .NET Framework 版本（即 .NET Framework 4 和 .NET Framework 4.5）都有单独的 dll。当您手动添加引用时，您可能引用了适用于 .NET Framework 4.5 的 dll。将 EF6 添加到项目的最佳方法是使用 nuget。它将根据您在项目中定位的 .NET Framework 版本安装正确版本的 EF6 dll。

# android - 在安卓应用上录制后立即播放视频

> ID：15361558
> 
> 赞同：1
> 
> 时间：2013-03-12T12:44:04.043
> 
> 标签：android, video, mediarecorder

我正在开发一个应用程序，它应该录制一个最长限制为一分钟的视频，并将其保存在图库中，然后在保存后立即开始自动播放。以下是我的代码。

```
public class MainActivity extends Activity  {

private Camera myCamera;
  private MyCameraSurfaceView myCameraSurfaceView;
  private MediaRecorder mediaRecorder;

Button myButton;
SurfaceHolder surfaceHolder;
boolean recording;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      recording = false;

      setContentView(R.layout.main);

      //Get Camera for preview
      myCamera = getCameraInstance();
      if(myCamera == null){
       Toast.makeText(MainActivity.this,
         "Fail to get Camera",
         Toast.LENGTH_LONG).show();
      }

      myCameraSurfaceView = new MyCameraSurfaceView(this, myCamera);
      FrameLayout myCameraPreview = (FrameLayout)findViewById(R.id.videoview);
      myCameraPreview.addView(myCameraSurfaceView);

      myButton = (Button)findViewById(R.id.mybutton);
      myButton.setOnClickListener(myButtonOnClickListener);
      Log.i("Camera !Error", "Cameray ka koi masla ni Agay chcek karo");
  }

  Button.OnClickListener myButtonOnClickListener
  = new Button.OnClickListener(){

@Override
public void onClick(View v) {
 // TODO Auto-generated method stub
 if(recording){
              // stop recording and release camera
              mediaRecorder.stop();  // stop the recording
              releaseMediaRecorder(); // release the MediaRecorder object

              //Exit after saved
              finish();
 }else{

  //Release Camera before MediaRecorder start
  releaseCamera();

        if(!prepareMediaRecorder()){
         Toast.makeText(MainActivity.this,
           "Fail in prepareMediaRecorder()!\n - Ended -",
           Toast.LENGTH_LONG).show();
         finish();
        }

  mediaRecorder.start();
  recording = true;
  myButton.setText("STOP");
  Log.i("Camera !Error", "Record to stop");
 }
}};

  private Camera getCameraInstance(){
// TODO Auto-generated method stub
      Camera c = null;
      try {
          c = Camera.open(); // attempt to get a Camera instance
      }
      catch (Exception e){
          Log.i("Camera Error", "Camera Not Found");
      }
      Log.i("Camera Error", "Camera Found");
      return c; // returns null if camera is unavailable
}

private boolean prepareMediaRecorder(){
   myCamera = getCameraInstance();
   mediaRecorder = new MediaRecorder();

   myCamera.unlock();
   mediaRecorder.setCamera(myCamera);

   mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
   mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

   mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

   mediaRecorder.setOutputFile("/sdcard/myvideo2.3gp");
      mediaRecorder.setMaxDuration(10000); // Set max duration 10 sec.
      mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M

   mediaRecorder.setPreviewDisplay(myCameraSurfaceView.getHolder().getSurface());
   Log.i("Camera Error", "Media Recorder is ready");

   try {
       mediaRecorder.prepare();
   } catch (IllegalStateException e) {
       releaseMediaRecorder();
       return false;
   } catch (IOException e) {
       releaseMediaRecorder();
       return false;
   }
   return true;

}

  @Override
  protected void onPause() {
      super.onPause();
      releaseMediaRecorder();       // if you are using MediaRecorder, release it first
      releaseCamera();              // release the camera immediately on pause event
  }

  private void releaseMediaRecorder(){
      if (mediaRecorder != null) {
          mediaRecorder.reset();   // clear recorder configuration
          mediaRecorder.release(); // release the recorder object
          mediaRecorder = null;
          myCamera.lock();           // lock camera for later use
      }
      Log.i("Media Recorder", "Media Recorer Released");

  }

  private void releaseCamera(){
      if (myCamera != null){
          myCamera.release();        // release the camera for other applications
          myCamera = null;
      }
      Log.i("Camera Recorder", "Camera Released");
  }

public class MyCameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback{

private SurfaceHolder mHolder;
   private Camera mCamera;

public MyCameraSurfaceView(Context context, Camera camera) {
       super(context);
       mCamera = camera;

       // Install a SurfaceHolder.Callback so we get notified when the
       // underlying surface is created and destroyed.
       mHolder = getHolder();
       mHolder.addCallback(this);
       // deprecated setting, but required on Android versions prior to 3.0
       mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
   }

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int weight,
  int height) {
       // If your preview can change or rotate, take care of those events here.
       // Make sure to stop the preview before resizing or reformatting it.

       if (mHolder.getSurface() == null){
         // preview surface does not exist
         return;
       }

       // stop preview before making changes
       try {
           mCamera.stopPreview();
       } catch (Exception e){
         // ignore: tried to stop a non-existent preview
       }

       // make any resize, rotate or reformatting changes here

       // start preview with new settings
       try {
           mCamera.setPreviewDisplay(mHolder);
           mCamera.startPreview();

       } catch (Exception e){
       }
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
 // TODO Auto-generated method stub
 // The Surface has been created, now tell the camera where to draw the preview.
       try {
           mCamera.setPreviewDisplay(holder);
           mCamera.startPreview();
       } catch (IOException e) {
       }
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
 // TODO Auto-generated method stub

}
}
} 
```

我的 main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<FrameLayout
android:id="@+id/videoview"
android:layout_width="720px"
android:layout_height="480px"/>
<Button
android:id="@+id/mybutton"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="REC"
android:textSize="12sp"/>
</LinearLayout> 
```

在按钮单击记录开始并再次单击时，它会停止并为此使用 finish() 退出。在这里，我希望应该开始而不是退出录制的视频。希望我设法清楚地解释了我的问题。

# java - Java - 获取需要从网站登录的数据，然后登录并转到其他页面

> ID：15361560
> 
> 赞同：0
> 
> 时间：2013-03-12T12:44:05.257
> 
> 标签：java, http, login, web

我想登录特定的网站，但如果要这样做，我需要从网络上获取一些隐藏的数据。在接下来的所有会话中，它都不同，所以我认为我必须保持会话活着。要检查我是否登录我想去这个特定网站的另一个页面（你必须登录才能看到它）

好的，所以我得到了回复，我得到了我的信息作为 LOGIN，以及 HIDDEN_NAME 和 HIDDEN_VALUE 中的 2 个，然后我想用我的电子邮件通过邮件登录表单，并通过这些数据登录。

这就是我这样做的方式，但它不起作用：

```
import org.apache.http.*;
import org.apache.http.client.CookieStore;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.params.ClientPNames;
import org.apache.http.client.params.CookiePolicy;
import org.apache.http.client.protocol.ClientContext;
import org.apache.http.cookie.Cookie;
import org.apache.http.impl.client.BasicCookieStore;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.client.DefaultRedirectStrategy;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.apache.http.util.EntityUtils;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

/**
 * A example that demonstrates how HttpClient APIs can be used to perform
 * form-based logon.
 */
public class webparser
{
    static String EMAIL;
    static String PASS;
    static String LOGIN = null;
    static String HIDDEN_NAME[] = new String[2];
    static String HIDDEN_VALUE[] = new String[2];
    //static ClientConnectionManager connManager = new PoolingClientConnectionManager();
    //static DefaultHttpClient httpclient = new DefaultHttpClient(connManager);
    static DefaultHttpClient httpclient = new DefaultHttpClient();
    static HttpResponse response;
    static HttpEntity entity;
    static List<Cookie> cookies;
    static CookieStore cookieStore = new BasicCookieStore();
    static HttpContext httpContext = new BasicHttpContext();

    public static void main(String[] args) throws Exception {
        clientFormLogin();
    }

    public static void clientFormLogin() throws Exception {

        httpclient.setRedirectStrategy(new DefaultRedirectStrategy() {
            public boolean isRedirected(HttpRequest request, HttpResponse response, HttpContext context)  {
                boolean isRedirect=false;
                try {
                    isRedirect = super.isRedirected(request, response, context);
                } catch (ProtocolException e) {
                    e.printStackTrace();
                }
                if (!isRedirect) {
                    int responseCode = response.getStatusLine().getStatusCode();
                    if (responseCode == 301 || responseCode == 302) {
                        return true;
                    }
                }
                return false;
            }
        });
        httpclient.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.BROWSER_COMPATIBILITY);
        httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

        getLoginData(httpGet("https://bannersbroker.com/user/login"));
        setLoginData(null, null);
        displayResponse(httpPostLogin("https://bannersbroker.com/user/login?event=doLogin"));
        //displayResponse(httpGet("http://bannersbroker.com/adpubcombo_dashboard/dashboard"));
        displayResponse(httpGet("https://bannersbroker.com/adpubcombo_ewallet/ewallet"));

        httpclient.getConnectionManager().shutdown();
    }

    public static void setLoginData(String EMAIL, String PASS) {
        if (EMAIL != null)
            webparser.EMAIL = EMAIL;
        else
            webparser.EMAIL = "my@email.com";
        if (PASS != null)
            webparser.PASS = PASS;
        else
            webparser.PASS = "my_pass";
    }

    public static String httpPostLogin(String postHttp) {
        String responseBody = null;
        try {
            HttpPost httpost = new HttpPost(postHttp +
                    "&email=" + EMAIL +
                    "&pass=" + PASS + "&"+
                    LOGIN + "=Login&" +
                    HIDDEN_NAME[0] + "=" + HIDDEN_VALUE[0] + "&"+
                    HIDDEN_NAME[1] + "=" + HIDDEN_VALUE[1]);

            System.out.println("executing request " + httpost.getURI());
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            responseBody = httpclient.execute(httpost, responseHandler);

            List<NameValuePair> nvps = new ArrayList<NameValuePair>();
            nvps.add(new BasicNameValuePair("email", EMAIL));
            nvps.add(new BasicNameValuePair("pass", PASS));
            nvps.add(new BasicNameValuePair(LOGIN, "Login"));
            nvps.add(new BasicNameValuePair(HIDDEN_NAME[0], HIDDEN_VALUE[0]));
            nvps.add(new BasicNameValuePair(HIDDEN_NAME[1], HIDDEN_VALUE[1]));

            httpost.setEntity(new UrlEncodedFormEntity(nvps, Consts.UTF_8));

            response = httpclient.execute(httpost, httpContext);
            entity = response.getEntity();
            System.out.println("Login form get: " + response.getStatusLine());

            //DisplayPage(entity.getContent());
            EntityUtils.consume(entity);

            System.out.println("Post logon cookies:");
            cookies = httpclient.getCookieStore().getCookies();
            if (cookies.isEmpty()) {
                System.out.println("None");
            } else {
                for (int i = 0; i < cookies.size(); i++) {
                    System.out.println("- " + cookies.get(i).toString());
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        return responseBody;
    }

    public static String httpGet(String urlAddres) {
        String responseBody = null;
        try {
            HttpGet httpget = new HttpGet(urlAddres);

            System.out.println("executing request " + httpget.getURI());
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            responseBody = httpclient.execute(httpget, responseHandler);
            response = httpclient.execute(httpget, httpContext);
            entity = response.getEntity();
            System.out.println("Login form get: " + response.getStatusLine());

            //DisplayPage(entity.getContent());
            EntityUtils.consume(entity);

            System.out.println("Initial set of cookies:");
            cookies = httpclient.getCookieStore().getCookies();
            if (cookies.isEmpty()) {
                System.out.println("None");
            } else {
                for (int i = 0; i < cookies.size(); i++) {
                    System.out.println("- " + cookies.get(i).toString());
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        return responseBody;
    }

    public static void DisplayPage(InputStream is) {
        try {
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            String str = "";
            while ((str = br.readLine()) != null) {
                System.out.println("" + str);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void displayResponse(String responseBody) {
        System.out.println("----------------------------------------");
        System.out.println(responseBody);
        System.out.println("----------------------------------------");
    }

    public static void getLoginData(String responseBody) {
        int length, temp, counter = 0;
        length = responseBody.length();

        for (int i = 0; i < length; i++) {
            if (responseBody.startsWith("hidden", i)) {
                temp = i;
                HIDDEN_NAME[counter] = responseBody.substring(temp + 13, temp + 81);
                HIDDEN_VALUE[counter] = responseBody.substring(temp + 90, temp + 123);
                System.out.println("HIDDEN_NAME[" + counter + "] = " + HIDDEN_NAME[counter]);
                System.out.println("HIDDEN_VALUE[" + counter + "] = " + HIDDEN_VALUE[counter]);
                counter++;
            }
        }

        for (int i = 0; i < length; i++) {
            if (responseBody.startsWith("document.write", i)) {
                temp = i;
                LOGIN = responseBody.substring(temp + 41, temp + 144);
                System.out.println("LOGIN = " + LOGIN);
            }
        }
    }
} 
```

这是我的控制台的样子：

```
"C:\Program Files\Java\jdk1.6.0_39\bin\java" -Didea.launcher.port=7532 "-Didea.launcher.bin.path=E:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.4\bin" -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.6.0_39\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\jce.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\resources.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\rt.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.6.0_39\jre\lib\ext\sunmscapi.jar;E:\solsoft\BannersBrokerStatistic\target\classes;C:\Users\Rafał\.m2\repository\org\jibx\schema\net\java\org.jibx.schema.net.java.jnlp_6_0\1.0.8\org.jibx.schema.net.java.jnlp_6_0-1.0.8.jar;C:\Users\Rafał\.m2\repository\org\jibx\jibx-run\1.2.4.5\jibx-run-1.2.4.5.jar;C:\Users\Rafał\.m2\repository\joda-time\joda-time\2.1\joda-time-2.1.jar;C:\Users\Rafał\.m2\repository\xpp3\xpp3\1.1.3.4.O\xpp3-1.1.3.4.O.jar;C:\Users\Rafał\.m2\repository\org\jibx\jibx-extras\1.2.4.5\jibx-extras-1.2.4.5.jar;C:\Users\Rafał\.m2\repository\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;C:\Users\Rafał\.m2\repository\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;C:\Users\Rafał\.m2\repository\org\jdom\jdom\1.1.3\jdom-1.1.3.jar;C:\Users\Rafał\.m2\repository\org\apache\httpcomponents\httpclient\4.3-alpha1\httpclient-4.3-alpha1.jar;C:\Users\Rafał\.m2\repository\org\apache\httpcomponents\httpcore\4.3-alpha1\httpcore-4.3-alpha1.jar;C:\Users\Rafał\.m2\repository\commons-logging\commons-logging\1.1.1\commons-logging-1.1.1.jar;C:\Users\Rafał\.m2\repository\commons-codec\commons-codec\1.6\commons-codec-1.6.jar;E:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.4\lib\idea_rt.jar" com.intellij.rt.execution.application.AppMain webparser
executing request https://bannersbroker.com/user/login
Login form get: HTTP/1.1 200 OK
Initial set of cookies:
- [version: 0][name: PHPSESSID][value: kcbjr1br4fmqksb038663eenn3][domain: bannersbroker.com][path: /][expiry: null]
- [version: 0][name: __ct][value: 42d5a032bbbc0fc21d17da8f9ef0a6b7][domain: bannersbroker.com][path: /][expiry: Tue Mar 12 21:52:53 CET 2013]
HIDDEN_NAME[0] = _f6c043c1a1d767f2d447a43c32c878e9[_6911a65a36fbc4ec93ccccf911ead848]
HIDDEN_VALUE[0] = _fb664a024bce8eb09e9c63f41a60287c
HIDDEN_NAME[1] = _f6c043c1a1d767f2d447a43c32c878e9[_fda5de586c4828b18cb01983cc8e2961]
HIDDEN_VALUE[1] = _33b0402e97f2be1aca4e672dc3c23384
LOGIN = _f6c043c1a1d767f2d447a43c32c878e9[_0a1012405121479093b7fa787480e330][_03cede135af4bcc837cf48b43265795d]
Login form get: HTTP/1.1 200 OK
Post logon cookies:
- [version: 0][name: PHPSESSID][value: kcbjr1br4fmqksb038663eenn3][domain: bannersbroker.com][path: /][expiry: null]
- [version: 0][name: __ct][value: 79fa3d8c1e5d3d823c9740c0894d479f][domain: bannersbroker.com][path: /][expiry: Tue Mar 12 21:52:53 CET 2013]
----------------------------------------
<!DOCTYPE html>
it show source of https://bannersbroker.com/user/login
so wrong becous it should redictered to http://bannersbroker.com/adpubcombo_dashboard/dashboard 
    </html>
----------------------------------------
executing request https://bannersbroker.com/adpubcombo_ewallet/ewallet
----------------------------------------
null
----------------------------------------
org.apache.http.client.HttpResponseException: Moved Permanently
    at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:67)
    at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:53)
    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:134)
    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:116)
    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:109)
    at webparser.httpGet(webparser.java:145)
    at webparser.clientFormLogin(webparser.java:77)
    at webparser.main(webparser.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

怎么了 ？为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:23:22.983

我使用 Jsoup 而不是 HttpClient API

我创建了获取登录数据的方法

```
public Connection.Response getLoginData() {
        Connection.Response res = null;
        try {
            String html;
            int length, counter;

            res = Jsoup
                    .connect("https://bannersbroker.com//user/login?event=doLogin")
                    .execute();

            html = res.parse().toString();
            length = html.length();
            counter = 0;

            for (int i = 0; i < length; i++) {
                if (html.startsWith("document.write", i)) {
                    name[counter] = html.substring(i + 41, i + 144);
                    value[counter] = "Login";
                    counter++;
                }
                if (html.startsWith("hidden", i)) {
                    name[counter] = html.substring(i + 13, i + 81);
                    value[counter] = html.substring(i + 90, i + 123);
                    counter++;
                }
            }

        } catch (IOException ioe) {
        } catch (NullPointerException ioe) {
            JOptionPane.showMessageDialog(RunFrame.getInstance(),
                    "Could not open connection to Banners Broker!",
                    "Error",
                    JOptionPane.ERROR_MESSAGE);
        }
        return res;
    } 
```

然后我用另一种方法登录

```
public Connection.Response doLogin(Connection.Response res, String email, String pass) {
        Connection.Response res2 = null;
        try {
            res2 = Jsoup
                    .connect("https://bannersbroker.com//user/login?event=doLogin")
                    .cookies(res.cookies())
                    .data("email", email)
                    .data("pass", pass)
                    .data(name[0], value[0])
                    .data(name[1], value[1])
                    .data(name[2], value[2])
                    .method(Connection.Method.POST)
                    .execute();

        } catch (IOException ioe) {
        } catch (IllegalArgumentException ioe) {
            JOptionPane.showMessageDialog(RunFrame.getInstance(),
                    "Could not open connection to Banners Broker!",
                    "Error",
                    JOptionPane.ERROR_MESSAGE);
        } catch (NullPointerException ioe) {
            JOptionPane.showMessageDialog(RunFrame.getInstance(),
                    "Could not open connection to Banners Broker!",
                    "Error",
                    JOptionPane.ERROR_MESSAGE);
        }
        return res2;
    } 
```

我在我的班级的构造函数中调用方法并从一个发送到另一个响应。当我登录时，我从方法处理响应，`doLogin()` 这就是我解析数据的方式

```
doc = Jsoup
                    .connect(pageAddres)
                    .cookie("PHPSESSID", res.cookie("PHPSESSID"))
                    .get(); 
```

# .htaccess - 如何使用 htaccess 拆分 URL

> ID：15361561
> 
> 赞同：1
> 
> 时间：2013-03-12T12:44:06.650
> 
> 标签：.htaccess, url, split

例如：
google.com/en/game/game1.html
应该是
google.com/index.php?p1=en&p2=game&p3=game1.html

我如何拆分 URL 并发送 index.php 的“/”部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T12:55:14.213

只有当查询参数是固定长度时，您才能实现此目的。否则还有其他方法，但需要解析应用程序中的路径。

## 定长实现

以下规则匹配所有三个 URL 部分，然后将它们重写为**index.php**的命名查询参数。

```
RewriteRule ^([^/]+)/([^/]+)/(.+)$ index.php?p1=$1&p2=$2&p3=$3 
```

这重写：

```
/en/game/game1.html 
```

到：

```
/index.php?p1=en&p2=game&p3=game1.html 
```

## 未知长度实现

```
# Don't rewrite if file exist. This is to prevent rewriting resources like images, scripts etc
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php?path=$0 
```

这重写：

```
/en/game/game1.html 
```

到：

```
/index.php?path=en/game/game1.html 
```

然后您可以在应用程序中**解析**路径。

* * *

**编辑:)**使重写规则仅在 URL 的第一级由两个字符组成时才匹配：

```
RewriteRule ^([a-zA-Z]{2})/([^/]+)/(.+)$ index.php?p1=$1&p2=$2&p3=$3 
```

您也可以为*未知长度*实现这样做：

```
RewriteRule ^[a-zA-Z]{2}/ index.php?path=$0 
```

# c# - lambda linq 不加入 c#

> ID：15361569
> 
> 赞同：2
> 
> 时间：2013-03-12T12:44:30.940
> 
> 标签：c#, sql, linq, lambda

`userid`我有这个查询，它返回我在`access`表中的用户的名字，我想要的是把那些不在表中的用户`users`还给我：`userid``access`

```
 var query = db.Users
      .Join(db.Access, c => c.UserId, o => o.UserId,
       (c, o) => new { c.UserId, c.Name }); 
```

在sql中它会是这样的：

```
SELECT  Users.Name
FROM     Access INNER JOIN
               Users ON Access.UserId <> Users.UserId 
```

什么`lambda expression`相当于sql脚本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T12:50:55.330

采用`Except`

```
var res = db.Access.Except(query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:01:28.720

你也可以`! Contains()`像下面这样使用：

```
//Get Access user ids into an array
var AccessUserIds = db.Access.Select(a => new {a.UserId}).ToArray();

//Users who are not in Access user id array
var Results = db.Users.Where(u => !AccessUserIds.Contains(u.UserId)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:30:47.917

```
var exclude = db.Access.Select(p => p.UserId);

var us = db.Users.Where(q => !exclude.Contains(q.UserId)).ToList();

ViewBag.UsersId = new SelectList(us, "UserId", "Name"); 
```

最后这是正确的答案，唯一的区别在于第一行。

谢谢你们！

# c# - C# streamwriter 创建部分文件

> ID：15361572
> 
> 赞同：0
> 
> 时间：2013-03-12T12:44:38.397
> 
> 标签：c#, text-files, streamreader, streamwriter

我正在尝试创建一个哈希文本文件。代码有效，问题是一旦流编写器启动该过程，它在完成之前不会停止。我想将输出文件分成更小的部分。如何停止 streamwriter 并启动一个新文件而不重新启动该过程？

```
string infile = @"ntlmchar.txt";
        string hashfile = @"ntlmhash.txt"; //File that includes the hash and clear test
        string charfile = @"ntlmchar.txt"; //File that only has the clear text
        string oldCharFile = ""; //Temp file to apply to infile.
        int cint = 1;  //The number of characters in the file
        string str_cint = cint.ToString(); //convert cint to string
        int pint = 1; //The number of parts to the character file
        string str_pint = pint.ToString(); //convert pint to string
        int cm = 4; //Max number of characters
        int pm = 4000; //Man number of parts
        int line = 0; //line index number

        while (cint <= cm)
        {
            if (!File.Exists(infile))
            {
                for (int ci =1; ci <= cm; ci++)
                {
                    str_cint = cint.ToString();
                    for (int pi =1; pi <= pm; pi++)
                    {
                        str_pint = pint.ToString();
                       // System.Console.WriteLine("Inner for loop cint file does not exist" +cint +" pint " + pint);
                     //   System.Console.WriteLine("Inner for loop str_cint file does not exist " + str_cint + " cint " + cint);
                        charfile = "ntlmchar" + str_cint + "_" + str_pint + ".txt";
                        pint = pi;
                        oldCharFile = charfile;
                        infile = oldCharFile;
                        if (File.Exists(infile)) break;
                    //    System.Console.WriteLine("inner loop file " + infile);
                    }
              //      System.Console.WriteLine("outer for loop cint " + cint + " pint " + pint);             
                  //  System.Console.WriteLine("infile not found " + infile + " " + oldCharFile + " " + charfile + " " + hashfile);
                }
              //  System.Console.WriteLine("No work files found " + infile + " " + oldCharFile + " " + charfile + " " + hashfile);
            }

            else if (File.Exists(infile))
            {
                // Create a file to write to. 
            //    System.Console.WriteLine("cint at the start of else if " + cint + " str_cint " + str_cint);
                infile = oldCharFile;
                str_cint = cint.ToString();
         //       System.Console.WriteLine("cint after assign to str_cint " + cint + " str_cint " + str_cint);
                pint=1;
                str_pint = pint.ToString();
                hashfile = "ntlmhash" + str_cint + "_" + str_pint + ".txt";
                charfile = "ntlmchar" + str_cint + "_" + str_pint + ".txt";
                //System.Console.WriteLine(infile + " " + oldCharFile + " " + charfile + " " + hashfile);
       //         System.Console.WriteLine("Infile found " + cint + " " + pint);
                using (StreamWriter h = new StreamWriter(hashfile))
                using (StreamWriter c = new StreamWriter(charfile))
                using (StreamReader sr = new StreamReader(infile))
                {
                    string i = "";
                    while ((i = sr.ReadLine()) != null)
                    {
                        foreach (string s in alpha)
                        {

                            if (line <= 2000000)
                            {
                                string j = i + s;
                                string str = Program.Ntlm(j);
                                hashfile = "ntlmhash" + str_cint + "_" + str_pint + ".txt";
                                charfile = "ntlmchar" + str_cint + "_" + str_pint + ".txt";
                       //         System.Console.WriteLine("line before writing to file " + line + " in charfile " + charfile);
                                h.WriteLine("{0}, {1}", j, str);
                                c.WriteLine("{0}", j);
                                line++;

                         //       System.Console.WriteLine("h file" + h + " c file" + c);

                            }
                            else
                            {
                                h.Flush();
                                c.Flush();
                                pint++;
                                str_pint = pint.ToString();
                                hashfile = "ntlmhash" + str_cint + "_" + str_pint + ".txt";
                                charfile = "ntlmchar" + str_cint + "_" + str_pint + ".txt";
                                line = 1;
                                System.Console.WriteLine("line after writing to part of file " + line + " in charfile " + charfile);
                            }

                        }
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:32:00.993

我假设您要尝试为每个文件获取 2,000,000 个项目？你只需要稍微重组一下。

现在你有：

```
using (StreamWriter h = new StreamWriter(hashfile))
using (StreamWriter c = new StreamWriter(charfile))
using (StreamReader sr = new StreamReader(infile))
{
    string i = "";
    while ((i = sr.ReadLine()) != null)
    { 
```

您需要更改代码以便稍后打开输出文件：

```
using (StreamReader sr = new StreamReader(infile))
{
    StreamWriter h = null;
    StreamWriter c = null;
    try
    {
        h = new StreamWriter(...);
        c = new StreamWriter(...);
        string i = "";
        while ((i = sr.ReadLine()) != null)
        {
            // output line here
            // and increment line counter.
            ++line;
            if (line > 2000000)
            {
                // Close the output files and open new ones
                h.Close();
                c.Close();
                h = new StreamWriter(...);
                c = new StreamWriter(...);
                line = 1;
            }
        }
    }
    finally
    {
        if (h != null) h.Close();
        if (c != null) c.Close();
    }
} 
```

# wix - 为什么这种静默启动在 WIX 中不起作用？

> ID：15361573
> 
> 赞同：2
> 
> 时间：2013-03-12T12:44:42.353
> 
> 标签：wix

在我的应用程序包安装结束时，我运行了以下命令。

```
<Property Id="WixShellExecTarget" Value="[INSTALLDIR]RCR.VDS.exe" />
<CustomAction Id="LaunchApplication" BinaryKey="WixCA"
      DllEntry="WixShellExec" Impersonate="no" /> 
```

我不能使用 [#myApplication] 因为我在构建服务器上的输出文件夹上运行 heat 所以我不知道我的应用程序的自动生成的 id。关于如何在安装后静默运行我的应用程序的任何想法？

日志文件在命令行部分显示了这一点

```
******* CommandLine: ********** 
```

MSI (c) (30:74) [09:47:14:156]：注：1: 2203 2: VDSInstall.msi 3: -2147287038 MSI (c) (30:74) [09:47:14:156 ]: MainEngineThread 正在返回 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:27:04.013

请参阅：[如何：安装后运行已安装的应用程序](http://wix.sourceforge.net/manual-wix3/run_program_after_install.htm)

如果您希望在静默安装期间调用自定义操作，请添加：

```
<InstallExecuteSequence>
  <Custom Action="LaunchApplication" After="InstallFinalize">SOMECONDITION</Custom>
</InstallExecuteSequence> 
```

注意 SOMECONDITION 应该是一个表达式，用于检查 EXE 是否已安装并且用户希望启动该程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:24:20.443

这些是您可以考虑的副本：

1.  来自的标识符`heat.exe`将是稳定的。因此，您可以在`[#UglyFileId1234abcef45612345asdf]`自定义操作中使用丑陋的标识符。

    一个。您还可以应用 XSLT 将`heat`可执行文件的 Id 的输出转换为比丑陋的标识符更好的东西。取决于您希望启动自定义操作的可读性。

2.  如果您希望以静默方式启动可执行文件，那么您可能需要[Quite Execution 自定义操作](http://wix.sourceforge.net/manual-wix3/qtexec.htm)，而不是[Shell 执行](http://wix.sourceforge.net/manual-wix3/shellexec.htm)“LaunchApplication”使用的自定义操作。

# vba - VBA 字符串分隔符

> ID：15361574
> 
> 赞同：2
> 
> 时间：2013-03-12T12:44:43.493
> 
> 标签：vba, excel

在一定数量的相同分隔符之后，如何在 VBA 中拆分字符串？

例如：`{"Josh","Green"},{"Peter","John"}`。

在这里，我想`{"Josh","Green"}`作为数组中的第一条记录和`{"Peter","John"}`第二条记录。我想避免逐个字符地解析字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:13:38.103

有几种方法可以做到这一点，我的建议：

在拆分之前替换`},{`为其他内容，以创建新的分隔符。

例如：

```
Option Explicit

Sub Test()
    Const c As String = "{""Josh"",""Green""},{""Peter"",""John""}"
    Dim s As String
    Dim v As Variant

    s = Replace(c, "},{", "}#,#{", 1)

    v = Split(s, "#,#")

    Debug.Print v(0)    '{"Josh","Green"}
    Debug.Print v(1)    '{"Peter","John"}
End Sub 
```

这将拆分为具有两个字符串`s`的 Variant-array ，而不是四个字符串，如果您将原始字符串仅用作分隔符，您将得到它。`v``v(0)``v(1)``,`

# java - 如何解决此代码上的错误？

> ID：15361580
> 
> 赞同：-4
> 
> 时间：2013-03-12T12:44:48.183
> 
> 标签：java, arrays

为什么数组部分有错误？
如何解决数组排序的错误？有什么我需要进口的吗？

```
import javax.swing.*;

public class sorting {
  public static void main(String as[])
  {
    int[] num = { 7, 4, 5, 9 };
    int l = num.length;
    int i, j;

    for (i = 1; i < l; i++) {
      System.out.println(" " + num[i]);
    }

    System.out.println("\n");
    System.out.println("Ascending order");
    Arrays.sort(num);

    for (i = 0; i < l; i++) {
      System.out.println("" + num[i]);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:46:48.493

代替

> 导入 javax.swing.*

利用

```
import java.util.Arrays 
```

你的第一个 for 循环也应该`for (i = 0; i < l; i++)`是`i = 1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:41:14.433

you should import `Arrays` instead of `Swing.*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:48:55.087

您没有使用任何 swing 包类。您需要导入数组。

```
import java.util.Arrays; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:59:46.917

我认为您想在第一个 for 循环中按升序对数组进行排序，您正在打印原始数组，但您从索引号 1 开始，因此第一个数组元素被跳过

将第一个 for 循环更改为

```
for (i = 0; i < l; i++) 
```

整个程序看起来很棒

正确的在这里

```
import java.util.Arrays;

public class sorting {
  public static void main(String as[])
  {
    int[] num = { 7, 4, 5, 9 };
    int l = num.length;
    int i;

    for (i = 0; i < l; i++) {
      System.out.println(" " + num[i]);
    }

    System.out.println("\n");
    System.out.println("Ascending order");
    Arrays.sort(num);

    for (i = 0; i < l; i++) {
      System.out.println("" + num[i]);
    }
  }
} 
```

# jquery - 删除行时更新列计算

> ID：15361586
> 
> 赞同：0
> 
> 时间：2013-03-12T12:45:06.123
> 
> 标签：jquery, html

当我单击复选框以删除表格行时，我希望我的计算能够更新总计。我在类似的情况下通过简单地将计算和函数添加到删除行事件来完成此操作，但我似乎无法让它在这种情况下工作。编码：

```
//Remove Table Row
$(document).on('click', 'input.removeItem', function(){ 
$(this).closest('tr').remove();
calculateSum();
calculateTotal();
});

// Sum Amt Collected    
$(document).on('keyup', 'input.amtcollected', calculateSum);
function calculateSum() {
var sum = 0;
var currentTable = $(this).closest('table').attr('id');
$('#' + currentTable + ' input.amtcollected').each(function() {
//add only if the value is number
if(!isNaN(this.value) && this.value.length!=0) {
    sum += parseFloat(this.value);
}
});
//.toFixed() method will roundoff the final sum to 2 decimal places
$('#' + currentTable + ' input.sumamtcollected').val(sum.toFixed(2));
}

// Daily Collection Total
$(document).on('keyup', 'input.amtcollected', calculateTotal);
function calculateTotal() {
var sum = 0;
$('input.sumamtcollected').each(function() {
//add only if the value is number
if(!isNaN(this.value) && this.value.length!=0) {
    sum += parseFloat(this.value);
}
});
//.toFixed() method will roundoff the final sum to 2 decimal places
$('input.dailycollectionstotal').val(sum.toFixed(2));
} 
```

我在这里创建了一个小提琴：http: [//jsfiddle.net/tmac187/pQ8WD/](http://jsfiddle.net/tmac187/pQ8WD/)

我在calculateTotal（）之后发出警报；并弹出警报。不知道为什么它不起作用。jslint 没有显示我能看到的任何值得注意的东西。我试过萤火虫，但我对它还是很陌生，所以不能 100% 确定我在那里寻找什么......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:52:53.727

一个小错误

```
//Remove Invoice Line
$(document).on('click', 'input.removeItem', function () { 
    var currentTable = $(this).closest('table').attr('id');
    $(this).closest('tr').remove();
    calculateTableSum(currentTable);
    calculateTotal();
});

....

function calculateSum() {
    var currentTable = $(this).closest('table').attr('id');
    calculateTableSum(currentTable);
}

function calculateTableSum(currentTable) {
    var sum = 0;
    $('#' + currentTable + ' input.amtcollected').each(function() {
        //add only if the value is number
        if(!isNaN(this.value) && this.value.length!=0) {
            sum += parseFloat(this.value);
        }
    });
    //.toFixed() method will roundoff the final sum to 2 decimal places
    $('#' + currentTable + ' input.sumamtcollected').val(sum.toFixed(2));
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/pQ8WD/1/)

`var currentTable = $(this).closest('table').attr('id');``calculateSum`当您从处理程序调用时in是错误的，`remove`因为那时`this`指向`window`对象而不是已删除的项目。

# python - 计算方差图像python

> ID：15361595
> 
> 赞同：7
> 
> 时间：2013-03-12T12:45:30.653
> 
> 标签：python, image, numpy, filter, scipy

有没有一种简单的方法可以使用 Python/NumPy/Scipy 计算图像上的运行方差过滤器？通过运行方差图像，我的意思是为图像中的每个子窗口 I 计算 sum((I - mean(I))^2)/nPixels 的结果。

由于图像非常大（12000x12000 像素），我想避免在格式之间转换数组的开销，以便能够使用不同的库然后再转换回来。

我想我可以通过使用类似的方法找到平均值来手动执行此操作

```
kernel = np.ones((winSize, winSize))/winSize**2
image_mean = scipy.ndimage.convolve(image, kernel)
diff = (image - image_mean)**2
# Calculate sum over winSize*winSize sub-images
# Subsample result 
```

但是如果有像 Matlab 的 stdfilt 函数这样的东西会更好。

谁能指出具有此功能并支持 numpy 数组的库的方向，或者提示/提供一种在 NumPy/SciPy 中执行此操作的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-11-03T11:27:13.640

更简单的解决方案，也更快：使用 SciPy 的[`ndimage.uniform_filter`](https://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.ndimage.filters.uniform_filter.html)

```
import numpy as np
from scipy import ndimage 
rows, cols = 500, 500
win_rows, win_cols = 5, 5

img = np.random.rand(rows, cols)
win_mean = ndimage.uniform_filter(img, (win_rows, win_cols))
win_sqr_mean = ndimage.uniform_filter(img**2, (win_rows, win_cols))
win_var = win_sqr_mean - win_mean**2 
```

“跨步技巧”是漂亮的技巧，但速度慢了 4 并且不那么可读。比`generic_filter`步幅慢20倍……

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T13:36:06.793

您可以使用`numpy.lib.stride_tricks.as_strided`获取图像的窗口视图：

```
import numpy as np
from numpy.lib.stride_tricks import as_strided

rows, cols = 500, 500
win_rows, win_cols = 5, 5

img = np.random.rand(rows, cols)

win_img = as_strided(img, shape=(rows-win_rows+1, cols-win_cols+1,
                                 win_rows, win_cols),
                     strides=img.strides*2) 
```

现在`win_img[i, j]`是`(win_rows, win_cols)`左上角位置的数组`[i, j]`：

```
>>> img[100:105, 100:105]
array([[ 0.34150754,  0.17888323,  0.67222354,  0.9020784 ,  0.48826682],
       [ 0.68451774,  0.14887515,  0.44892615,  0.33352743,  0.22090103],
       [ 0.41114758,  0.82608407,  0.77190533,  0.42830363,  0.57300759],
       [ 0.68435626,  0.94874394,  0.55238567,  0.40367885,  0.42955156],
       [ 0.59359203,  0.62237553,  0.58428725,  0.58608119,  0.29157555]])
>>> win_img[100,100]
array([[ 0.34150754,  0.17888323,  0.67222354,  0.9020784 ,  0.48826682],
       [ 0.68451774,  0.14887515,  0.44892615,  0.33352743,  0.22090103],
       [ 0.41114758,  0.82608407,  0.77190533,  0.42830363,  0.57300759],
       [ 0.68435626,  0.94874394,  0.55238567,  0.40367885,  0.42955156],
       [ 0.59359203,  0.62237553,  0.58428725,  0.58608119,  0.29157555]]) 
```

但是，您必须小心，不要将图像的窗口**视图**转换为它的窗口**副本**：在我的示例中，这将需要 25 倍的存储空间。我相信 numpy 1.7 可以让您选择多个轴，因此您可以简单地执行以下操作：

```
>>> np.var(win_img, axis=(-1, -2)) 
```

我坚持使用 numpy 1.6.2，所以我无法测试它。如果我没记错我的数学，另一个选项可能会因窗口不太大而失败：

```
>>> win_mean = np.sum(np.sum(win_img, axis=-1), axis=-1)/win_rows/win_cols
>>> win_sqr_mean = np.sum(np.sum(win_img**2, axis=-1), axis=-1)/win_rows/win_cols
>>> win_var = win_sqr_mean - win_mean**2 
```

现在`win_var`是一个形状数组

```
>>> win_var.shape
(496, 496) 
```

并`win_var[i, j]`保持`(5, 5)`窗口左上角的方差为`[i, j]`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-20T07:54:18.080

经过一些优化后，我们为通用 3D 图像提出了这个函数：

```
def variance_filter( img, VAR_FILTER_SIZE ):
  from numpy.lib.stride_tricks import as_strided

  WIN_SIZE=(2*VAR_FILTER_SIZE)+1
  if ~ VAR_FILTER_SIZE%2==1:
      print 'Warning, VAR_FILTER_SIZE must be ODD Integer number  '
  # hack -- this could probably be an input to the function but Alessandro is lazy
  WIN_DIMS = [ WIN_SIZE, WIN_SIZE, WIN_SIZE ]

  # Check that there is a 3D image input.
  if len( img.shape ) != 3:
      print "\t variance_filter: Are you sure that you passed me a 3D image?"
      return -1
  else:
      DIMS = img.shape

  # Set up a windowed view on the data... this will have a border removed compared to the img_in
  img_strided = as_strided(img, shape=(DIMS[0]-WIN_DIMS[0]+1, DIMS[1]-WIN_DIMS[1]+1, DIMS[2]-WIN_DIMS[2]+1, WIN_DIMS[0], WIN_DIMS[1], WIN_DIMS[2] ), strides=img.strides*2)

  # Calculate variance, vectorially
  win_mean = numpy.sum(numpy.sum(numpy.sum(img_strided, axis=-1), axis=-1), axis=-1) / (WIN_DIMS[0]*WIN_DIMS[1]*WIN_DIMS[2])

  # As per http://en.wikipedia.org/wiki/Variance, we are removing the mean from every window,
  #   then squaring the result.
  # Casting to 64 bit float inside, because the numbers (at least for our images) get pretty big
  win_var = numpy.sum(numpy.sum(numpy.sum((( img_strided.T.astype('<f8') - win_mean.T.astype('<f8') )**2).T, axis=-1), axis=-1), axis=-1) / (WIN_DIMS[0]*WIN_DIMS[1]*WIN_DIMS[2])

  # Prepare an output image of the right size, in order to replace the border removed with the windowed view call
  out_img = numpy.zeros( DIMS, dtype='<f8' )
  # copy borders out...
  out_img[ WIN_DIMS[0]/2:DIMS[0]-WIN_DIMS[0]+1+WIN_DIMS[0]/2, WIN_DIMS[1]/2:DIMS[1]-WIN_DIMS[1]+1+WIN_DIMS[1]/2, WIN_DIMS[2]/2:DIMS[2]-WIN_DIMS[2]+1+WIN_DIMS[2]/2, ] = win_var

  # output
  return out_img.astype('>f4') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T13:54:06.173

您可以使用[`scipy.ndimage.generic_filter`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.generic_filter.html#scipy.ndimage.filters.generic_filter). 我无法使用 matlab 进行测试，但这也许可以为您提供所需的内容：

```
import numpy as np
import scipy.ndimage as ndimage     
subs = 10  # this is the size of the (square) sub-windows
img = np.random.rand(500, 500)
img_std = ndimage.filters.generic_filter(img, np.std, size=subs) 
```

`footprint`您可以使用关键字制作任意大小的子窗口。有关示例，请参[见此问题。](https://stackoverflow.com/questions/10683596/efficiently-calculating-boundary-adapted-neighbourhood-average)

# delphi - Delphi如何在错误时退出到顶级例程

> ID：15361597
> 
> 赞同：2
> 
> 时间：2013-03-12T12:45:37.543
> 
> 标签：delphi, exception, flow

在 Delphi 中，我有一个例程层次结构。例程'A'调用'B'，后者调用'C'，后者调用'D'。'D' 做了一些检查，它遇到了某种类型的错误，可能是一个异常，也可能只是一个逻辑错误。无论如何，当“D”遇到错误时，无论如何，控制权是否可以在不让“D”返回“失败”代码的情况下传递回“A”，“C”会检查该代码，它会返回失败代码，“B” ' 检查等...？

谢谢

GS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:55:05.917

有两种方法可以做你想做的事：

1.  返回错误/状态代码，并让调用堆栈上的每个函数检查该代码。
2.  引发异常并在高层处理它。

您不希望使用选项 1，因此保留选项 2。

# wpf - WPF TreeView DataBinding：数据未显示，BindingExpression 路径错误

> ID：15361602
> 
> 赞同：0
> 
> 时间：2013-03-12T12:45:49.970
> 
> 标签：wpf, data-binding, treeview

我正在为 Visual Studio 加载项开发新功能。最初该项目的目标框架是 3.5。但是我被要求使用 WPF 添加一个具有相当复杂 UI 的工具窗口并切换到 4.0 框架（也许这很重要） 我正在尝试将分层数据绑定到我的工具窗口中的树视图，它最初是一个 WPF 用户控件。

但我看到以下错误：“System.Windows.Data 错误：40：BindingExpression 路径错误：在 'object' ''OpjectPool' (Name='')' 上找不到 'PoolList' 属性。BindingExpression:Path=PoolList; DataItem ='OpjectPool' (Name=''); 目标元素是 'TreeView' (Name='treeView1'); 目标属性是 'ItemsSource' (类型 'IEnumerable')"

这是一个代表我需要绑定到树视图的数据的类。

```
class CodeItem
{
public TextPoint StartPoint { get; set; }
public TextPoint EndPoint { get; set; }
public string Name { get; set; }
public vsCMElement Kind { get; set; }
public CodeElements ChildClasses { get; set; }
public ProjectItem ProjectItem { get; set; }
public List<CodeItem> CodeItems { get; set; }
public string Label { get; set; }

public CodeItem(CodeElement el)
{
    StartPoint = el.StartPoint;
    EndPoint = el.EndPoint;
    Name = el.Name;
    Kind = el.Kind;
    ChildClasses = el.Children;
    ProjectItem = el.ProjectItem;
    Label = Kind.ToString();

    CodeItems = new List<CodeItem>();
    if (ChildClasses.Count != 0)
    {
        foreach (CodeElement elem in ChildClasses)
        {
            if (elem.Kind.ToString() == "vsCMElementClass")
            {
                CodeItems.Add(new CodeItem(elem));
            }
        }
    }
}
} 
```

这是我的用户控件代码：

```
public partial class OpjectPool : UserControl
{
    public ObservableCollection<CodeItem> PoolList = new ObservableCollection<CodeItem>();

    public OpjectPool()
    {

        Project pr = ... // getting VS Project we want to work with;

        foreach (ProjectItem item in pr.ProjectItems.Item("Objects").ProjectItems)
        {
            if (item.FileCodeModel != null)
            {
                CodeItem rootPoolItem = new CodeItem(item.Name);

                foreach (CodeElement el in item.FileCodeModel.CodeElements)
                {
                    if (el.Kind.ToString() == "vsCMElementClass" || el.Kind.ToString() == "vsCMElementNamespace")
                    {
                        CodeItem ci = new CodeItem(el);

                        rootPoolItem.CodeItems.Add(ci);

                    }
                }

                PoolList.Add(rootPoolItem);
            }
        }

        InitializeComponent();

        this.treeView1.DataContext = this;
   }
} 
```

这是一个 XAML 代码：

```
<UserControl x:Class="******.OpjectPool"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid Height="Auto" Name="maingrid">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="1*" />
        <ColumnDefinition Width="1*" />
        <ColumnDefinition Width="1*" />
    </Grid.ColumnDefinitions>
    <ScrollViewer Grid.Column="0" Height="Auto" HorizontalAlignment="Stretch" Name="scrollViewer1" VerticalAlignment="Stretch" Width="Auto" HorizontalScrollBarVisibility="Visible">
        <TreeView Height="Auto" Name="treeView1" Width="Auto" ItemsSource="{Binding PoolList}">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding CodeItems}" >
                    <TreeViewItem Header="{Binding Label}"/>
                </HierarchicalDataTemplate >
             </TreeView.ItemTemplate>
        </TreeView>
    </ScrollViewer>
    <ScrollViewer Grid.Column="1" Height="Auto" HorizontalAlignment="Stretch" Name="scrollViewer2" VerticalAlignment="Stretch" Width="Auto" HorizontalScrollBarVisibility="Visible" Grid.ColumnSpan="1">
        <DataGrid AutoGenerateColumns="False" Height="Auto" Name="dataGrid1" Width="Auto" FrozenColumnCount="3" />
    </ScrollViewer>
    <ScrollViewer Grid.Column="2" Height="Auto" HorizontalAlignment="Stretch" Name="scrollViewer3" VerticalAlignment="Stretch" Width="Auto" HorizontalScrollBarVisibility="Visible" Grid.ColumnSpan="1">
        <DataGrid AutoGenerateColumns="False" Height="Auto" Name="dataGrid2" Width="Auto" />
    </ScrollViewer>
    <GridSplitter Grid.Column="1" Name="gridSplitter1" ResizeDirection="Columns" BorderBrush="Black" Background="Black" Margin="0,0,0,0" Grid.ColumnSpan="1" HorizontalAlignment="Left" Width="2" />
    <GridSplitter Grid.Column="2" Name="gridSplitter2" ResizeDirection="Columns" BorderBrush="Black" Background="Black" Margin="0,0,0,0" Grid.ColumnSpan="1" HorizontalAlignment="Left" Width="2" />
</Grid> 
```

PoolList 不为空，并且包含我需要绑定的完整层次结构。有趣的是，错误消息说的是对象的真实而不是空属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:59:04.577

如错误所述：

BindingExpression path error: 'PoolList' **PROPERTY** not found on 'object' ''OpjectPool' (Name='')'. BindingExpression:Path=PoolList;

`PoolList` is not a property.

# c# - 如何在代码中访问 DataGridCell 的数据对象？

> ID：15361605
> 
> 赞同：7
> 
> 时间：2013-03-12T12:46:04.787
> 
> 标签：c#, wpf, c#-4.0, data-binding, datagrid

基本上，我已经绑定了数据网格，使其类似于科目时间表——每一行代表一个学期的科目，而该学期内的每个单元格代表一个科目。

我现在正在尝试添加拖放功能，以便您可以将其他主题拖到网格上，这将更新底层数据结构。

我可以使用一些可视化树方法来查找用户将新主题拖动到的 DataGridCell，但我不知道如何访问单元格绑定到它的值（主题）以替换空白/新主题的占位符值。有没有办法访问底层价值，或者我应该重新构建创建这个程序的整个方法？

![网格和要拖到其上的主题的示例](../Images/0fb49625f04942621e17083db2abd6a0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:50:06.267

要获取 DataGridCell 的数据，可以使用它的 DataContext 和`Column`属性。如何做到这一点完全取决于您的行数据是什么，即您在`ItemsSource`DataGrid 的集合中放置了哪些项目。假设您的项目是`object[]`数组：

```
// Assuming this is an array of objects, object[],this gets you the 
// row data as you have them in the DataGrid's ItemsSource collection
var rowData = (object[]) DataGrid.SelectedCells[0].Item;
//  This gets you the single cell object
var celldata = rowData[DataGrid.SelectedCells[0].Column.DisplayIndex]; 
```

如果您的行数据更复杂，您需要编写一个相应的方法，将`Column`属性和行数据项转换为行数据项上的特定值。

* * *

编辑：

如果您将数据放入的单元格不是选定的单元格，则一种选择是获取`DataGridRow`所属的单元格`DataGridCell`，使用`VisualTreeHelper`：

```
var parent = VisualTreeHelper.GetParent(gridCell);
while(parent != null && parent.GetType() != typeof(DataGridRow))
{
    parent = VisualTreeHelper.GetParent(parent);
}
var dataRow = parent; 
```

然后你就有了行，可以像上面那样继续。

* * *

此外，关于您是否应该重新考虑该方法的问题，我建议您使用自定义**WPF 行为**。

行为提供了一种非常直接的方式来从 C# 代码而不是 XAML 扩展控件的功能，同时保持您的代码隐藏清晰和简单（如果您遵循 MVVM，这不仅很好）。行为的设计方式是它们可重用且不受您特定控件的约束。

[这里有一个很好的介绍](http://wpftutorial.net/Behaviors.html)

对于您的特殊情况，我只能让您知道该怎么做：

`DropBehavior`为您的 TextBlock 控件（或您想要在 DataGridCells 中处理拖放的任何控件）编写一个。基本思想是在`OnAttached()`控件的方法中将相应的操作注册到单元格的 evnt。

```
public class DropBehavior : Behavior<TextBlock>
{
    protected override void OnAttached()
    {
        AssociatedObject.MouseUp += AssociatedObject_MouseUp;
    }

    private void AssociatedObject_MouseUp(object sender, MouseButtonEventArgs e)
    {
        // Handle what happens on mouse up

        // Check requirements, has data been dragged, etc.
        // Get underlying data, now simply as the DataContext of the AssociatedObject
        var cellData = AssociatedObject.DataContext;

    }
} 
```

请注意，从行数据中解析单个单元格的数据，并且该`Column`属性已过时。

然后，使用DataGrid`ContentTemplate`的将此行为附加到放入单元格中的 TextBlocks ：`CellStyle`

```
<DataGrid>
    <DataGrid.CellStyle>
        <Style TargetType="DataGridCell">
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <TextBlock Text="{Binding}">
                            <i:Interaction.Behaviors>
                                <yourns:DropBehavior/>
                            </i:Interaction.Behaviors>
                        </TextBlock>
                    </DataTemplate>
                </Setter.Value>

            </Setter>
        </Style>
    </DataGrid.CellStyle>
</DataGrid> 
```

您可以在中找到`Behavior<T>`基类

> System.Windows.Interactivity.dll

我还没有测试过它，但我希望它对你有用并且你明白了......

# apache-flex - 如何在 Flex 中屏蔽 Datefield？

> ID：15361612
> 
> 赞同：0
> 
> 时间：2013-03-12T12:46:16.203
> 
> 标签：apache-flex, flex3, datefield, maskedinput, formatdatetime

有谁知道如何在 flex 中屏蔽 DateField 中的输入？

我们的 DateField 使用 DD/MM/YYYY 格式。

我们的用户希望：

*   能够输入日期而无需输入斜线
*   仍然可以在日期选择器中使用日期选择（日期字段的下拉菜单）

我用谷歌搜索并找到了使用 3 个文本框的方法。我希望有一个 DateField 控件。这样，用户也可以使用日期选择器（下拉菜单）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:28:06.367

我建议在 , 中添加一个`KeyboardEvent`，`DateField`并处理在事件侦听器函数中添加或删除斜杠的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:06:56.603

我发现最好的方法是 onFocusOut 我在任何验证触发之前获取文本并添加斜线并重置格式化文本。

完整代码帖子如下：

# php - mcrypt_crypt 和解密结果不匹配

> ID：15361613
> 
> 赞同：1
> 
> 时间：2013-03-12T12:46:17.590
> 
> 标签：php, encryption, mcrypt, rijndael

我有这两种加密和解密方法，但是输入值与解密函数的输出值不匹配，你能帮我找出问题吗？

```
private function encryptMd($md)
{
    $md = serialize($md);
    //encryption should happen here
    $md = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $this->secret, $md, MCRYPT_MODE_ECB);
    $md = gzcompress($md);
    $md = base64_encode($md);
    return $md;
}

private function decryptMd($md)
{
    $md = base64_decode($md);
    $md = gzuncompress($md);
    // decryption happen here
    $md = trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $this->secret, $md, MCRYPT_MODE_ECB));
    $md = unserialize($md);
    return $md;
} 
```

结果如下：

第一个字符串：orderid=1111264&cardnumber=4012001037141112&cardname=Test&cardtype=VISA&amount=100&expdate=0214

the encrypted string: eJwBgAB//4LFthFrKDuzX7v+90h2j24xrEnKHHxefzvh5si5yKxEJxtOAo8XG923Ako0eYP7JVH03yN9LPdb/V8JghJVi8tPvloqlEOFwDHUbwBoFGHBNvTRq0vgMRN/Wlpfk8e+UYQWV4TRYYNWNWxVLiwMFWWOk6bsESDgRBkMDQcp//OOFkg5cg==

the recieved string: eJwBgAB//4LFthFrKDuzX7v+90h2j24xrEnKHHxefzvh5si5yKxEJxtOAo8XG923Ako0eYP7JVH03yN9LPdb/V8JghJVi8tPvloqlEOFwDHUbwBoFGHBNvTRq0vgMRN/Wlpfk8e+UYQWV4TRYYNWNWxVLiwMFWWOk6bsESDgRBkMDQcp//OOFkg5cg==

解密结果：FALSE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:42:56.000

问题在于 $this->secret 在解密时为空。不管怎么说，还是要谢谢你。

# windows - 在 Windows Vista 及更高版本上检索 BootMgr 的分区号

> ID：15361617
> 
> 赞同：2
> 
> 时间：2013-03-12T12:46:30.347
> 
> 标签：windows, hard-drive, bootloader

我需要将引导管理器映射到一个分区号：

```
 Manufacturer Recovery partition = Partition 0 
 Boot manager = Partition 1
 C:\ = Partition 2
 D:\ = Partition 3 
```

对于挂载的分区，例如 C:\ 或 D:\，我使用[IOCTL_STORAGE_GET_DEVICE_NUMBER](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968800%28v=vs.85%29.aspx)来检索分区号。

现在我想做一些类似的事情来获取 Windows 启动管理器的数量。我不能假设 BootMgr 是 100 MB 分区或系统分区的前一个分区。

我查看了[与磁盘几何相关的 IOCTL，](http://msdn.microsoft.com/en-us/library/aa363987%28v=vs.85%29.aspx)但没有发现任何有用的东西。我需要将引导管理器分区与 100 MB 制造商恢复分区区分开来。

BCDEDIT.exe 工具显示所需的信息；

```
Identificador           {bootmgr}
device                  partition=\Device\HarddiskVolume1
description             Windows Boot Manager
locale                  es-ES
inherit                 {globalsettings}
extendedinput           Yes
default                 {current}
resumeobject            {5586dd33-361b-11e0-8df8-0018716eb820}
displayorder            {current}
toolsdisplayorder       {memdiag}
timeout                 30
customactions           0x1000085000001
                        0x5400000f
custom:5400000f         {1f473c8f-0c00-11e1-898d-78acc0c157a7} 
```

我正在用 C 语言开发我的应用程序，因此[BCDEDIT 方法意味着将 COM/WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362677%28v=vs.85%29.aspx)依赖项包含到我相对简单的应用程序中。

请注意，我说的是使用通过 WMI 检索的“\Device\HarddiskVolume1”打开 BootMgr 分区的句柄，然后使用 IOCTL_STORAGE_GET_DEVICE_NUMBER：

```
hHandle = CreateFile ("\\\\?\\GLOBALROOT\\Device\\HarddiskVolume1", 
                        GENERIC_READ|GENERIC_WRITE,
                        FILE_SHARE_READ|FILE_SHARE_WRITE, 
                        NULL, 
                        OPEN_EXISTING, 
                        FILE_ATTRIBUTE_NORMAL,
                        NULL);

if ( hHandle != INVALID_HANDLE_VALUE )
{
    VOLUME_DISK_EXTENTS diskExtents;
    DWORD dwSize;
    BOOL iRes;

    iRes = DeviceIoControl(hHandle,
                            IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS,
                            NULL,
                            0,
                            (LPVOID) &diskExtents,
                            (DWORD) sizeof(diskExtents),
                            (LPDWORD) &dwSize,
                            NULL);

    if (iRes)
    {
        STORAGE_DEVICE_NUMBER deviceNumber;
        DWORD bytesReturned =  0;

        iRes = DeviceIoControl(hHandle, 
                        IOCTL_STORAGE_GET_DEVICE_NUMBER, 
                        NULL, 
                        0, 
                        &deviceNumber, 
                        sizeof(deviceNumber), 
                        &bytesReturned, NULL); 
```

关于更简单的解决方法的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:37:46.850

您可以通过查看注册表找到系统卷（Windows 启动的位置以及 bootmgr 所在的位置） `HKLM\SYSTEM\Setup\SystemPartition`：. 这将包含一个类似**\Device\HardDiskVolume1**的名称。

在通过 Windows 7 安装程序格式化的磁盘上，这对应于在包含驱动器 C: 的分区之前启动的 100MB 分区。在 Windows 7 上，包含驱动器 C: 的大分区是**\Device\HardDiskVolume2**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-22T17:14:13.653

也许为时已晚，但此信息可以帮助某人；

您可以尝试通过发送 IOCTL 代码来找到 BootIndicator 分区，例如`PARTITION_INFORMATION_EX`真正的解决方案。

# javascript - 在 IE9 中，如何检测弹出窗口已重定向回同一域

> ID：15361618
> 
> 赞同：0
> 
> 时间：2013-03-12T12:46:31.750
> 
> 标签：javascript, internet-explorer-9

*编辑：由于某种原因，间隔确实看到了一些东西，但是在没有进入 if 语句的情况下崩溃并停止循环*

这是我的流量。

*   窗口通过在同一域上打开弹出窗口`window.open()`
*   弹出重定向到推特
*   弹出窗口被重定向回同一个域（回调 url）
*   弹出窗口中的变量需要发送回窗口。

这在 Chrome 中运行良好，但在 IE9 上中断。

我尝试过的（都在 chrome 中工作）

**在弹出窗口中：**

```
window.opener.function(data);
window.close(); 
```

**在窗口中：**

```
var checkInterval = setInterval(function(){
    if (win.variable){ // win = popup window!
        clearInterval(checkInterval);
        win.close();
       // works!
    }
} 
```

但两者都不适用于 IE9。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:33:00.510

当弹出窗口转到 twitter 时域不再相同，因此在 IE9 中尝试读取页面上的变量时会崩溃。

要么检查 window.opener 是否可用（意味着你在同一个域上）并在访问变量之前确保它相同（首选）或将 if 语句封装在 try/catch 中

```
var checkInterval = setInterval(function(){
    try {
       if (win.variable){ // win = popup window!
           clearInterval(checkInterval);
           win.close();
          // works!
       }
    } catch (e) {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:02:42.783

一个非常简单的方法是使用锚点将变量传回

因此，您的回调 url 将如下所示：

```
http://example.com/index/#var1:value1,value2/var2:value3,value4 ... 
```

在 jQuery 中使用[hashchange 插件](http://benalman.com/projects/jquery-hashchange-plugin/)将使您的生活变得非常轻松，以便处理您的问题。

此外，您可以使用适用于 IE9 的核心 Javascript使用[hasher 微库](http://microjs.com/#)

# php - 在 DoctrineExtension 树实体中包含 OneToMany 对象

> ID：15361619
> 
> 赞同：0
> 
> 时间：2013-03-12T12:46:33.647
> 
> 标签：php, symfony, doctrine-orm

我正在使用 NestedSet Tree 方法来构建库树。每个底层库也有一组对象。

这是在我的库实体类中定义的：

```
/**
 * @ORM\OneToMany(targetEntity="Object", mappedBy="library")
 */
private $objects; 
```

在我的对象实体类中，我有：

```
/**
 * @ORM\ManyToOne(targetEntity="Library", inversedBy="objects")
 **/
private $library; 
```

最后，我用

```
$em = $this->getDoctrine()->getManager();
$repo = $em->getRepository('AcmeDemoBundle:Library');
$arrayTree = $repo->childrenHierarchy(); 
```

执行 childrenHierarchy() 时，我得到了我的树，但没有 Objects 变量。例子：

```
[0] => Array
    (
        [id] => 1
        [name] => Foo
        [left] => 1
        [level] => 0
        [right] => 6
        [root] => 1
        [__children] => Array
            (
                [0] => Array
                    (
                        [id] => 2
                        [name] => Bar
                        [left] => 2
                        [level] => 1
                        [right] => 3
                        [root] => 1
                        [__children] => Array
                            (
                            )

                    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:50:56.460

原来这不是那么容易解决的。

我最终编写了一个 DQL 查询，它获取所有库及其对象（使用连接，因此它只执行一个查询）。

然后我遍历层次结构并使用递归函数将所有内容连接在一起：

```
$em = $this->getDoctrine()->getManager();
$repo = $em->getRepository('AcmeDemoBundle:Library');
$allLibraries = $repo->findAllJoinedToObject();
$arrayTree = $repo->childrenHierarchy();

// merge the objects into the tree
$merge = function(&$tree) use (&$merge, $allLibraries) {
    foreach($tree as &$library) {
        $id = $library['id'];
        $library['objects'] = $allLibraries[$id]['objects'];

        if(count($library['__children'])) {
            $merge($library['__children']);
        }
    }
};

$merge($arrayTree); 
```

下面是我的`findAllJoinedToObject`方法：

```
public function findAllJoinedToObject()
{
    $query = $this->getEntityManager()
        ->createQuery('
            SELECT l, o FROM acmeDemoBundle:Library l INDEX BY l.id
            LEFT JOIN l.objects o INDEX BY o.id'
        );

    try {
        return $query->getArrayResult();
    } catch (\Doctrine\ORM\NoResultException $e) {
        return null;
    }
} 
```

# jquery - 如何在使用 JQuery 应用函数之前等待元素加载

> ID：15361624
> 
> 赞同：0
> 
> 时间：2013-03-12T12:46:50.763
> 
> 标签：jquery, jquery-ui

我想应用一个 jQuery `tabs`做一个动态加载的内容。问题是该`tabs`函数是在容器加载之前应用的，所以我看不到渲染的选项卡。调试我等不及了，它成功了。

我的背景是一个主/细节网格，将细节显示为可扩展的行。每次单击网格行时，我都会通过 ajax 向另一个名为的页面询问详细信息，`mypage.aspx`然后将接收到的数据放入一个实际上是动态生成的`div`命名的. 获得数据后，我想在 mypage.aspx 内容上应用该函数。`contentDetail``tr``tabs`

这是我的代码：

```
var html = '<tr id="newRow"><td colspan="4"><div id="contentDetail"></div></td></tr>';

$('#mygrid tr').each(function () {
    $(this).on('click', function () {
        // I create a row on the fly and append it next to the clicked row
        // ...
        // I load the contents
        $('#contentDetail').load('mypage.aspx #div1', { data: '123' }, function (response, status, xhr) {
            if (status == "error") {
               // ERROR
            }
        });
        // Here I want to apply the tabs
        $('#contentDetail').ready(function () {
            $('.tabs').tabs();
        });

    }); 
```

更新：

```
$.when($('#contentDetail').load('mypage.aspx #div1', { data: '123' }, function (response, status, xhr) {
            if (status == "error") {
               // ERROR
            }
        })).then($.getScript('Scripts/function.js')); 
```

**函数.js**： `$('#tabs').tabs();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:31:34.927

试试这个：

```
 var html = '<tr id="newRow"><td colspan="4"><div id="contentDetail"></div></td></tr>';

   $('#mygrid tr').each(function () {
    $(this).on('click', function () {
        // I create a row on the fly and append it next to the clicked row
        // ...
        // I load the contents
        $('#contentDetail').load('mypage.aspx #div1', { data: '123' }, function (response, status, xhr) {
            if (status == "error") {
               // ERROR
            }
             if(status == "success"){
              // Here I want to apply the tabs

            $('.tabs').tabs();

              }

        });

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:50:49.450

你可以使用[jQuery when / Deferred](http://api.jquery.com/jQuery.when/)来做到这一点：

```
$.when($('#contentDetail').load('mypage.aspx #div1')).then($('.tabs').tabs()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:31:58.583

我使用回调函数的`else`子句解决了它：`load`

```
if (status == "error") {
    // Error
}
else {
   // HERE THE CONTENT IS FULLY LOADED
   $('#tabs').tabs();
} 
```

# android - Android 应用程序中的网络和线程

> ID：15361625
> 
> 赞同：0
> 
> 时间：2013-03-12T12:46:50.927
> 
> 标签：android, networking

我知道我必须使用线程才能在 Android 应用程序中使用互联网，但我不知道如何编写它。我有一个类叫做“JabberSmackAPI”——在这个类上我有登录，通过 XMPP 发送和接收功能。

我的应用程序上有一个按钮，当我按下按钮时，它应该登录到 googleTalk 帐户。

这适用于 Java 项目（我可以登录和发送消息），但不适用于 Android 应用程序项目。我收到此错误：“android.os.NetworkOnMainThreadException”。

我的课是：

```
public class JabberSmackAPI 
{
    XMPPConnection connection;

    public void login(String userName, String password) throws XMPPException
    {
   ConnectionConfiguration config = new ConnectionConfiguration("talk.google.com",5222,"gmail.com");

        connection = new XMPPConnection(config);

    connection.connect();
    SASLAuthentication.supportSASLMechanism("PLAIN", 0);
    connection.login("email", "password");

    }

    public void sendMessage(String message, String to) throws XMPPException
    {
        Message msg = new Message(to, Message.Type.chat); 
        msg.setBody(message); 
        connection.sendPacket(msg);
        listeningForMessages();

    }

    public void disconnect()
    {
    connection.disconnect();
    }

    public void listeningForMessages() {
        PacketFilter filter = new AndFilter(new PacketTypeFilter(Message.class));
        PacketCollector collector = connection.createPacketCollector(filter);
        while (true) {
            Packet packet = collector.nextResult();
            if (packet instanceof Message) {
                Message message = (Message) packet;
                if (message != null && message.getBody() != null)
                    System.out.println("Received message from "
                            + packet.getFrom() + " : "
                            + (message != null ? message.getBody() : "NULL"));
            }
        }
    } 
```

我的应用程序代码是：

```
public class MainActivity extends Activity implements OnClickListener {
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    Button btn1=(Button)findViewById(R.id.button1);
    btn1.setOnClickListener(this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View v) {
    if(v.getId()==R.id.button1)
    {
        try{
            Toast.makeText(this, "T", Toast.LENGTH_LONG).show();

             JabberSmackAPI c = new JabberSmackAPI();
             c.login("username", "password");

        }
        catch(Exception e)
        {
            Log.e("Error","Error in code:"+e.toString());
            e.printStackTrace();
        }
}

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:50:49.040

主应用程序线程应该只用于与接口相关的工作。您需要使用[multithreading](http://developer.android.com/guide/faq/commontasks.html#threading)，因为在 Android 应用程序的主线程上根本不允许联网。由于您的应用程序需要持久数据连接，因此[AsyncTasks](https://developer.android.com/reference/android/os/AsyncTask.html)也不起作用，因为它们是单一服务的 - 触发、获取结果并关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:00:43.743

> android.os.NetworkOnMainThreadException

意思正是它所说的-不要在主/ ui线程上进行网络操作

# gherkin - 小黄瓜描述测试或功能？

> ID：15361626
> 
> 赞同：4
> 
> 时间：2013-03-12T12:46:52.557
> 
> 标签：gherkin

这是我遇到的一个有趣的话题，我和我的同事对这个问题有不同的看法。您的 Gherkin 是否应该准确描述测试在做什么，或者只显示您在测试中尝试实现的业务逻辑。

我在工作中经常遇到的最大的例子是，如果您可以访问项目 A，那么您应该可以访问 A。我们可以有 20 种不同类型的用户可以访问 A，所以我们只选择 1 (以防止我们的测试套件需要 40 小时才能运行）。那么哪个“更好”？

一种

```
Scenario: A user with access to item A can access A
Given I am a type 4 user with access to item A
When I try to access A
Then I am granted access to A 
```

或乙

```
Scenario: A user with access to item A can access A
Given I am a user with access to item A
When I try to access A
Then I am granted access to A 
```

注意给定语句的差异（类型 4 用户）

在步骤定义中，我们将使用 4 类用户进行测试，但该测试并不特定于 4 类用户。任何具有项目 A 的用户都可以用于此测试，我们只使用类型 4 用户，因为我们需要使用用户类型登录。

所以 A 描述了测试在做什么（使用可以访问项目 A 的类型 4 用户登录）

而 B 描述了访问项目 A 所需的功能（只是可以访问项目 A 的用户）

在您问之前，我们如何确定谁有权访问项目 A 是对数据库的 SQL 调用，以查找链接到用户的特定项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T02:02:21.397

对于黄瓜测试，您正在测试业务逻辑 - 作为验收测试 - 而不是特定的实现细节。所以你应该做第二个而不是第一个。如果您想针对 X 型、Y 型和边缘案例运行测试，您的请求规范或集成测试可能会更依赖于具体情况。

我认为人们可以想到这一点 - 这不是一个硬性规则 - 就像：

单元测试以隔离方法并一次测试一件事。模拟和存根所有其他内容以隔离正在测试的内容。

集成测试以测试事物如何交互以测试堆栈的大部分，包括多个对象的交互。有些人会争辩说你在这里测试了所有的东西，但我认为在一个大型复杂应用程序中有一个地方可以测试很多集成的部分，同时还没有测试完整的请求周期。

请求规范 - 有时在简单的应用程序中，这些与集成测试几乎相同，在其他情况下，我将对请求堆栈以外的所有内容进行集成测试，并专门分离出我的请求规范。意见会有所不同。

验收测试 - 这是您处理问题的地方 - 测试是用简单的业务语言编写的，并且避免了功能定义中的技术实现细节。

无论如何，即使您忽略了测试堆栈其余部分的想法，在您要求的特定问题中选择 B。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:27:11.487

我会说选项B更好。“类型 4 用户”听起来像是一个实现细节。

但是，如果要求所有用户类型都具有访问权限，那么这也应该成为规范的一部分。在这种情况下，测试应该指定并测试所有用户类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:45:44.033

我会说B更好。对于“类型 4 用户”，您可以使其成为背景的一部分：

```
Backgound : User is logged in
Given "Type 4 user" is logged in 
```

通过将类型 4 用户放置在 "" 中来使用占位符，这样您就可以为有权访问项目 A 的其他用户重复使用登录的步骤定义

# java - 堆栈的动态空间分配（JAVA）

> ID：15361628
> 
> 赞同：0
> 
> 时间：2013-03-12T12:47:01.233
> 
> 标签：java, oop, dynamic, stack

我有一个关于数据结构和算法的编程任务，其中一项任务是

> *“在运行时提示用户字符栈（M）的大小，并在系统栈中为用户栈动态分配空间。**你特别不能使用“new，malloc”或任何其他操作符，它在任何语言的堆。** ”*

我是数据结构的新手，想知道我编写的以下代码是否符合要求？

代码：

```
public class DynamicStack
{
    private char[]  array;
    private int     top = 0;    // Array counter
    private int     size;       // Array size

    private final double CAPACITY_CHANGE_RATE = 1.3; // Stack resize ratio

    ....
    All other methods: push(), pop(), peek(), and etc.
    ....

    private void ensureCapacity()
    {
        if (isFull()) {
            size = (int) Math.ceil(size * CAPACITY_CHANGE_RATE);
            char[] oldArray = array;
            array = new char[size];
            System.arraycopy(oldArray, 0, array, 0, oldArray.length);
        }
    }
} 
```

从技术上讲，我在非静态方法中使用的任何东西都必须分配到新的系统堆栈中，而不是进入堆中，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:01:49.883

> 从技术上讲，我在非静态方法中使用的任何东西都必须分配到新的系统堆栈中，而不是进入堆中，对吧？

如果您询问是否所有内容都*将*在堆栈上分配，那么答案（在 Java 中）是：不 - 这是不正确的。

例如`array = new char[size]`从堆中分配 char 数组。在 Java中`new` *总是*从堆中分配。

事实上，我认为你不能用 Java 编写这个程序……鉴于这些限制。尝试 C 或 C++。

# iphone - 在 iOS 中使用加速度计时如何平滑移动图像对象？

> ID：15361629
> 
> 赞同：0
> 
> 时间：2013-03-12T12:47:03.617
> 
> 标签：iphone, ios, ipad, object, accelerometer

在我的应用程序中，我正在根据加速度计移动球，但球移动不顺畅。我需要在视图上平稳移动球。我该怎么做？

我通过在 google 上搜索使用了以下语句。但我没有得到平滑的对象

```
delta.x = 0.01 * delta.x + (1.0 - 0.01) * acceleration.x;
delta.y = 0.01 * delta.y + (1.0 - 0.01) * acceleration.y; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:07:39.750

尝试 ：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
    point = CGPointMake(34*acceleration.x, -20*acceleration.y);
    image.center = CGPointMake(image.center.x+point.x,image.center.y);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:31:16.167

利用

> [UIView beginAniations:@"AnimaionName" context:nil];
> 
> [UIView setAnimationDuration: 2.0f];
> 
> imageView.frame = CGRectMake(,,,);
> 
> [UIView 提交动画];

这将提供平稳的运动

# c# - 使用正则表达式计算唯一用户？

> ID：15361630
> 
> 赞同：1
> 
> 时间：2013-03-12T12:47:03.980
> 
> 标签：c#, regex

我想定义一个正则表达式模式，它将在文件中提供唯一用户计数。我还想应用长度计数，使用户值不超过 15 个字符。这样我的代码将在下面提供的日志中返回 2，因为它应该丢弃超过长度 15 的用户值。日志文件格式：

```
 User:fd441f1f-22c0-45d2-b020-32e1e6a15a73 
 User:fd441f1f-22c0-45d2-b020-32e1e6a15f43
 User:fd441f1f-24g0-45d2-b050-32e1e6a15a73
 User: karansha
 User: gulanand 
```

我试过的代码：

```
Regex regex = new Regex(@"User:\s*(?<username>.*?)\s");
            MatchCollection matches = regex.Matches(x);
            foreach (Match match in matches)
            {
                var user = match.Groups["username"].Value;
                if (!users.Contains(user)) users.Add(user);
            }
            int numberOfUsers = users.Count; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:50:39.280

你可以用 LINQ 做到这一点：

```
int numberOfUsers = regex.Matches(x)
                         .Cast<Match>()
                         .Select(m => m.Groups["username"].Value)
                         .Distinct() // pick only unique names
                         .Count(name => name.Length < 15); // calculate count 
```

或者没有正则表达式：

```
int numberOfUsers = File("log.txt")
                      .ReadLines()
                      .Select(line => line.Replace("User:", "").Trim())
                      .Distinct()
                      .Count(name => name.Length < 15); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:53:23.817

我不会`Regex`为此使用 a 。
尝试使用`string.Split()`and`Distinct`代替。

```
int numberOfUsers = x.Split(new string[] { "User:" }, StringSplitOptions.RemoveEmptyEntries)
                     .Distinct()
                     .Count(name => name.Length < 15); 
```

# sed - 使用 awk 或 sed 删除列

> ID：15361632
> 
> 赞同：50
> 
> 时间：2013-03-12T12:47:09.263
> 
> 标签：sed, awk

我有一个包含三列的文件。我想删除第三列（就地编辑）。如何使用 awk 或 sed 执行此操作？

```
123   abc  22.3
453   abg  56.7
1236  hjg  2.3 
```

期望的输出

```
123  abc
453  abg
1236 hjg 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-12T13:00:10.407

试试这个简短的东西：

```
awk '!($3="")' file 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2016-07-01T12:24:32.390

使用 GNU awk 进行就地编辑、`\s/\S`和[`gensub()`](https://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)删除

1）第一个字段：

```
awk -i inplace '{sub(/^\S+\s*/,"")}1' file 
```

或者

```
awk -i inplace '{$0=gensub(/^\S+\s*/,"",1)}1' file 
```

2）最后一个字段：

```
awk -i inplace '{sub(/\s*\S+$/,"")}1' file 
```

或者

```
awk -i inplace '{$0=gensub(/\s*\S+$/,"",1)}1' file 
```

3) N=3的第N^个字段：

```
awk -i inplace '{$0=gensub(/\s*\S+/,"",3)}1' file 
```

如果没有 GNU awk，您需要一个`match()`+`substr()`组合或多个`sub()`s + var 来删除中间字段。另请参阅[打印除前三列之外的所有列](https://stackoverflow.com/a/18819899/1745001)。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-03-12T12:55:22.090

这可能对您有用（GNU sed）：

```
sed -i -r 's/\S+//3' file 
```

如果要删除第三个字段之前的空白：

```
sed -i -r 's/(\s+)?\S+//3' file 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-03-12T12:51:00.187

看来你可以简单地去

```
awk '{print $1 " " $2}' file 
```

这将打印输入文件中每行的前两个字段，用空格分隔。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-08-31T14:55:27.963

尝试使用 cut... 它又快又简单

首先你有重复的空格，如果你想要的话，你可以将它们压缩到列之间的单个空格`tr -s ' '`

如果每一列之间已经只有一个分隔符，您可以使用`cut -d ' ' -f-2`打印字段（列）<= 2。

例如，如果您的数据在文件 input.txt 中，您可以执行以下操作之一：

```
cat input.txt | tr -s ' ' | cut -d ' ' -f-2 
```

或者，如果您通过删除第三列来更好地解释这个问题，您可以编写以下内容

```
cat input.txt | tr -s ' ' | cut -d ' ' --complement -f3 
```

cut 非常强大，除了列之外，您还可以提取字节或字符范围

摘自有关如何指定列表范围的语法的手册页

```
Each LIST is made up of one range, or many ranges separated by commas.
Selected input is written in the same order that it is read, and is
written exactly once. Each range is one of:

  N     N'th byte, character or field, counted from 1
  N-    from N'th byte, character or field, to end of line
  N-M   from N'th to M'th (included) byte, character or field
  -M    from first to M'th (included) byte, character or field 
```

所以你也可以说你想要特定的第 1 列和第 2 列...

```
cat input.txt | tr -s ' ' | cut -d ' ' -f1,2 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-03-12T12:56:02.447

尝试这个 ：

```
awk '$3="";1' file.txt > new_file && mv new_file file.txt 
```

或者

```
awk '{$3="";print}' file.txt > new_file && mv new_file file.txt 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-11T19:48:31.747

如果您愿意接受 Perl 解决方案...

```
perl -ane 'print "$F[0] $F[1]\n"' file 
```

使用这些命令行选项：

*   `-n`循环输入文件的每一行，不要自动打印每一行

*   `-a`自动拆分模式 - 将输入行拆分为 @F 数组。默认为空格分割

*   `-e`执行以下 perl 代码

# java - Java 安全注释被忽略

> ID：15361634
> 
> 赞同：1
> 
> 时间：2013-03-12T12:47:13.100
> 
> 标签：java, jdbc, glassfish, realm

我正在构建一个 Maven Web 应用程序用户身份验证。我在 Glassfish 中创建了一个新的 JDBC 领域，并使用 JPA 设置了我的域类。我可以使用一些创建的用户登录，并可以检查他们是否具有特定角色。但是当我保护一个 bean 时，我总是可以访问它.... 安全注释被忽略，例如 @RolesAllowed、@DenyAll

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:22:20.440

找到了解决方案！确保您的类是 EJB，例如使用 @Stateless。然后授权注释将起作用！

[http://www.oracle.com/technetwork/articles/javaee/security-annotation-142276.html](http://www.oracle.com/technetwork/articles/javaee/security-annotation-142276.html)

# asp.net - listview/repeater/gridview 数据源应该添加到 aspx 页面还是后面的代码？

> ID：15361636
> 
> 赞同：3
> 
> 时间：2013-03-12T12:47:18.113
> 
> 标签：asp.net, listview, datasource

到目前为止，我一直在后面的代码上创建和绑定数据源，但现在我已经在 aspx 页面上看到（并使用过）对象日期源，并通过提及 listview DataSourceId 在那里绑定。如果我只想显示数据而不做任何更改，这有什么区别吗？在性能方面还是在良好实践方面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:03:08.990

我会说这取决于项目的规模和可扩展性。

如果你想要权力和控制，那就去代码隐藏。

如果您想要易用性和速度，请在页面上执行操作并让对象管理 CRUD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:50:30.017

如 SO 问题
[asp.net sqldatasource 与在后面的代码中执行的问题之一中所讨论的](https://stackoverflow.com/questions/6630291/asp-net-sqldatasource-vs-doing-it-in-code-behind)

在 asp.net 页面中嵌入 SQLDataSource 或任何数据源会使表示层与数据访问层耦合，从而降低可测试性和灵活性。我强烈建议将您的数据连接移至它们自己的类，并创建一个数据访问层，然后您的页面代码可以从中提取。

理想情况下，您会将其进一步分离为 N 层解决方案。[关联](http://en.wikipedia.org/wiki/N_tier)

一些有用的链接
[通过代码隐藏或标记数据源填充网格视图？](https://stackoverflow.com/questions/6526843/populate-gridview-via-code-behind-or-markup-datasource)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:52:45.173

我会说，如果您将控件绑定在后面的代码中，您可以对控件有更多的控制权，您可以通过许多创造性的方式来操纵您的结果。如果您在标记中进行数据绑定，例如使用 a`SelectMethod`或`OnInit`. 每次回发或重新加载都会将该数据恢复到您在该方法中拥有的数据。这对于填充您始终希望显示相同数据的下拉菜单非常有用。如果您希望您的数据具有响应性，我会说您必须`DataBind()`在后面的代码中使用。

我还认为这是学习使用数据做更高级事情的最佳实践。

# php - PHP if 不等于或另一个不等于

> ID：15361637
> 
> 赞同：1
> 
> 时间：2013-03-12T12:47:22.467
> 
> 标签：php, if-statement

我正在尝试执行条件 if 语句来检查变量**$cat_ID**的值是否不等于**19**或**26**，然后它应该回显我的**$priceToShow**变量。

**PHP**

```
if(($cat_id != '19') || ($cat_id !='26')){ 
    echo $priceToShow;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T12:49:20.487

如果它既不能是 19 也不能是 26，请使用 and 语句：

```
if(($cat_ID != '19') && ($cat_id !='26')){ 
    echo $priceToShow;
} 
```

如果您有很多值要检查，请使用`in_array`：

```
$bad_values = array(19, 26, 54);
if (!in_array($cat_ID, $bad_values)) {
    echo $priceToShow;
} 
```

（在这种情况下，严格比较是关闭的；您应该始终将数据转换为预期的类型，然后使用严格比较：

```
$bad_values = array(19, 26, 54);
if (!in_array(intval($cat_ID), $bad_values, true)) {
    echo $priceToShow;
} 
```

)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T12:50:28.923

这将始终返回 true

您需要使用 AND 连词

超过 2 个值使用 ! in_array()

编辑：绝对正确@Waygood

```
if ( ! ( $v == 19 || $v == 26 ) ) {
  // do your thing
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:50:12.517

使用可能会更好`!in_array()`。这将使在需要时/如果需要时添加和删除变得更快、更简单

```
if (!in_array($cat_id, array('19', '26')))
{
  echo $priceToShow;
} 
```

# angularjs - $location 服务和链接的 URL

> ID：15361639
> 
> 赞同：1
> 
> 时间：2013-03-12T12:47:26.890
> 
> 标签：angularjs

我有一个 Angular 指令，它显示搜索结果的分页链接。我当前对页面链接的实现是事件......

例如：

```
$scope.goToNextPage = function() {
  if ($scope.pageIndex < $scope.maxPage()) {
    $scope.pageIndex = $scope.pageIndex + 1;
  }
}; 
```

我想将其更改为使用 $location 服务，以便分页链接作为实际链接运行......即具有 href 属性和所有常见行为的锚点。

所以 HTML 看起来像这样：

```
<a href="?pageIndex=2">Page 2</a> 
```

我的问题是如何处理已经存在指令不关心且无法影响的 URL 搜索值的情况。

例如，如果 URL 是`/search?customerId=23&pageIndex=1`，则第 2 页的 URL 需要是`/search?customerId=23&pageIndex=2`。但是该指令不知道也不关心 customerId ...

在代码中执行此操作看起来像：

```
$location.search({pageIndex: 2}); 
```

但由于我使用的是锚点，我需要知道要放入 HREF 的 URL 是什么。

我缺少任何选项或解决方案吗？

本质上，我需要**查看**调用会产生的 URL `$location.search({pageIndex: 2})`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:54:36.763

您可能需要为此使用一个函数。就像是：

```
$scope.goToPage = function (pageNum) {
    $location.search({pageIndex: pageNum});
} 
```

如果您使用此方法，请在 ngClick 上使用它而不是作为 href。

另一种选择是对 url 参数进行字符串化。这将需要一个 jQuery 函数：

```
<a ng-href="?{{pagingQueryString(2)}}">Page 2</a> 
```

控制器功能：

```
$scope.pagingQueryString = function (pageNum) {
    var queryObject = angular.extend($location.search(), {pageIndex: pageNum});

    // jquery function to stringify the object to url
    return $.param(queryObject);
} 
```

您也可以将其全部包装在过滤器中：

```
app.filter('pagingQueryString', function ($location) {
    return function (pageNum) {
        var queryObject = angular.extend({}, $location.search(), {pageIndex: pageNum});

        // jquery function to stringify the object to url
        return '?' + $.param(queryObject);
    }
} 
```

HTML 可以是：

```
<a ng-href="{{2 | pagingQueryString}}">Page 2</a> 
```

# android - Nexus 4 相机预览纵横比总是需要 16x9 表面视图？为什么

> ID：15361643
> 
> 赞同：13
> 
> 时间：2013-03-12T12:47:35.703
> 
> 标签：android, camera, preview, aspect-ratio, nexus-4

设备 Nexus 4 Android 版本：4.2.2

希望其他人发现了这个并可以解释如何解决它....

Nexus 4 支持以下预览尺寸：-

```
W:1280 H:720 Ratio: 1.777777
W:800 H:480 Ratio: 1.6666666
W:768 H:432 Ratio: 1.7777778
W:720 H:480 Ratio: 1.5
W:640 H:480 Ratio: 1.3333334
W:576 H:432 Ratio: 1.3333334
W:480 H:320 Ratio: 1.5
W:384 H:288 Ratio: 1.3333334
W:352 H:288 Ratio: 1.2222222
W:320 H:240 Ratio: 1.3333334
W:240 H:160 Ratio: 1.5
W:176 H:144 Ratio: 1.2222222 
```

myCamera.setPreviewSize() 设置它们，当我调用 myCamera.getPreviewSize() 时，我得到了正确的设置，但是....如果我将表面视图设置为与相机预览相同的大小，那么我会得到一个拉伸图片。例如

```
setPreviewSize(640,480)
getPreviewSize -> I get 640,480
Surface view (640,480) -> Stretched image 
```

只有当我将 Surface 视图设置为 16x9 (1.77777) 时，我才能获得完美的图像。

```
Surface view (1280,720) -> Perfect image 
```

这是我遇到此问题的唯一设备。请有人建议我是否缺少全屏模式的相机设置或阻止它工作的东西。

在我漫长的搜索中，我发现了另外 1 篇也与此问题相关的帖子，但不是答案，只是我的问题 PictureCallback not called 的更多证据， [除非使用supportedsizes [0]](https://stackoverflow.com/questions/14583757/nexus-4-android-camera-takepicture-does-not-callback-to-onpicturetaken)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-25T18:57:25.200

在 Nexus 4 上，存在一个不幸的问题，即预览纵横比和静态图片纵横比捆绑在一起，即使您从不拍照。如果它们不匹配，则两者之一会失真（通常是预览，因为它是较低的分辨率）。

如果要使用 4:3 预览，请在开始预览之前将静态图片大小也配置为 4:3。例如，在 N4 上具有完整 8MP 图片尺寸 (3264 x 2448) 的 640x480 预览应该不会导致预览拉伸。

使用[Camera.Parameters.setPictureSize](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPictureSize%28int,%20int%29)选择图片大小；可用尺寸列表可以从[Camera.Parameters.getSupportedPictureSizes](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPictureSizes%28%29)中读取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-25T15:31:59.193

此方法计算每个设备的最佳（对我而言）屏幕尺寸。但是，当我在 Nexus 4 中尝试这段代码时，我遇到了和你一样的问题。所以，我的解决方案是在这个方法的末尾有一个特殊情况，它获取 nexus 4 的宽度并为此计算最佳高度设备。

最后一种情况可用于所有设备。您可以删除该方法的第一部分。

```
private void setAspectResolutionCamera(Parameters camParams, int screen_width, int screen_height) {
    boolean chosen_one_resolution = false;

    //Init screen sizes
    width_video = ConstantsCamera.VIDEO_ASPECT_WIDTH;
    height_video = ConstantsCamera.VIDEO_ASPECT_HEIGHT;

    float aspect_ratio = 1f;
    int aspect_width = 6000, aspect_height = 6000;
    List<Size> supported_sizes_list = camParams.getSupportedPreviewSizes();
    for (int i = 0; i < supported_sizes_list.size(); i++) {
        Size size = supported_sizes_list.get(i);

        float aspect = (float) size.height / size.width;
        if (ConstantsCamera.VIDEO_ASPECT_RATIO - aspect <= aspect_ratio && (aspect - ConstantsCamera.VIDEO_ASPECT_RATIO >= 0)) {

            if (screen_width - size.height <= aspect_width && size.height - screen_width >= 0) {

                if (screen_height - size.width < aspect_height) {
                    height_video = size.width;
                    width_video = size.height;
                    aspect_ratio = ConstantsCamera.VIDEO_ASPECT_RATIO - (float) size.height / size.width;
                    aspect_width = screen_width - size.height;
                    aspect_height = screen_height - size.width;

                    chosen_one_resolution = true;

                }
            }
        }
    }

    //Special case
    if (width_video != screen_width && !chosen_one_resolution) {
        height_video = screen_width * height_video / width_video;
        width_video = screen_width;

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:14:56.143

尝试根据您使用的相机参数的比例设置表面视图的大小。

# r - 如何处理 R 中的 NaN？

> ID：15361644
> 
> 赞同：0
> 
> 时间：2013-03-12T12:47:47.380
> 
> 标签：r

我有两个具有相同尺寸的二进制文件（corr 和 rmse）。我想这样做：当evr corr 为 NA 时，将 rmse 中的所有像素替换为 NA。

文件1：

```
conne <- file("D:\\omplete.bin","rb")
corr<- readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE) 
```

文件2：

```
rms <- file("D:\\hgmplete.bin","rb")
rmse<- readBin(rms, numeric(), size=4,  n=1440*720, signed=TRUE) 
```

我这样做了：

```
rmse[corr==NA]=NA 
```

没有做任何事情，所以我尝试了这个：

```
rmse[corr==NaN]=NA 
```

也没有做任何事情！任何人都可以帮我解决这个问题。

文件头更正：

```
> corr
[1] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:51:22.383

您需要使用逻辑测试`is.nan()`。在这种情况下：

```
rmse[is.nan(corr)]=NA 
```

应该做的伎俩

# ios - 在 iOS 中使用 Coreplot 每 10 秒绘制一次散点图

> ID：15361647
> 
> 赞同：3
> 
> 时间：2013-03-12T12:47:49.667
> 
> 标签：ios, objective-c, xcode

我想像苹果的[AccelerometerGraph](http://developer.apple.com/library/ios/#samplecode/AccelerometerGraph/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007410-Intro-DontLinkElementID_2)示例那样每秒绘制一次图形。但绘图中只有一个变化是我必须根据 x 和 y 轴绘制图形。我试过使用 Coreplot 。一旦我们将值静态存储在数组中，它就会显示图形。但我必须动态绘制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:52:29.467

在 didAccelerate 委托中，您可以更新您的数组并调用`[graph reloadData];`以更新您的 coreplot 图。或者，如果您希望它每 10 秒绘制一次，则在 10 秒延迟后调用 reloadData。

# database - 到 Postgres 的 TCP 连接安全吗？需要 SSL？

> ID：15361652
> 
> 赞同：5
> 
> 时间：2013-03-12T12:48:04.383
> 
> 标签：database, security, postgresql, ssl

早上好，

我正在浏览 Postgresql 配置文件，最近注意到有一个`ssl`选项。我想知道什么时候需要这个。

假设您有一个应用服务器和一个数据库服务器 - 不在专用网络中运行。如果用户尝试登录，如果 SSL 未启用，应用服务器是否会在查找用户名/密码时以明文形式将用户密码传输到数据库？

这里的标准做法是什么？我应该设置我的数据库以使用 SSL 吗？

如果是这种情况，`config/database.yml`我的 Rails 应用程序中的连接设置有什么不同吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T14:55:19.967

与其他协议一样，使用 PostgreSQL 的 SSL/TLS 可以保护客户端和服务器之间的连接。是否需要取决于您的网络环境。

如果没有 SSL/TLS，客户端和服务器之间的流量将被窃听者看到：所有查询和响应，可能还有密码，具体取决于您的配置方式`pg_hba.conf`（[客户端使用`md5`的是明文密码还是明文密码](http://www.postgresql.org/docs/9.2/static/auth-methods.html)）。

据我所知，[它是请求 MD5 或明文密码身份验证的服务器](http://www.postgresql.org/docs/9.2/static/protocol-flow.html#AEN95138)，因此在不使用 SSL/TLS 时，活跃的中间人攻击者当然可以降级并获取您的密码。

配置良好的 SSL/TLS 连接应该允许您防止针对密码和数据的窃听和 MITM 攻击。

您可以使用`sslhost`in要求在服务器端使用 SSL `pg_hba.conf`，但这只是问题的一部分。最终，[就像 Web 服务器一样](https://webmasters.stackexchange.com/a/28443/11628)，由客户端来验证是否使用了 SSL，以及它是否与正确的服务器一起使用。

[libpq 文档中的表 31-1](http://www.postgresql.org/docs/9.2/static/libpq-ssl.html)总结了您获得的保护级别。

本质上：

*   如果您认为自己有理由使用 SSL，`disable`和`allow`无用`prefer`（如果您想要安全，请不要选择“否”或“可能”）。
*   `require`几乎没有用，因为它根本不验证远程服务器的身份。
*   `verify-ca`不验证主机名，这使得它容易受到 MITM 攻击。

如果安全对您很重要，您会想要的是**`verify-full`**.

这些 SSL 模式名称由 libpq 设置。其他客户端可能不使用相同的（例如纯 Ruby 实现或 JDBC）。

据我所知，[ruby-pg](https://bitbucket.org/ged/ruby-pg/wiki/Home)依赖于 libpq。不幸的是，它只[为其`sslmode`](http://deveiate.org/code/pg/PG/Connection.html). `verify-full`如果直接通过，也许也可以。但是，还需要一种配置 CA 证书的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:50:46.313

考虑密码以外的数据。如果您使用或不使用，我几乎是一个安全状况问题。你需要你的系统有多安全？如果连接只是通过您的专用网络，那么该网络上的任何人都可以收听。如果可以接受，不使用 SSL，我不会启用它。如果连接超过互联网，则应启用 SSL。

正如@Wooble 所说。在遇到问题时，您永远不应该将密码作为明文发送。在这种情况下，标准解决方案是将哈希存储在数据库中，并且仅发送哈希以进行验证。

[这](https://stackoverflow.com/questions/2008773/does-rails-postgres-adapter-support-ssl)是关于导轨部分的 som 链接

# javascript - 为什么这两个 JS 函数不一样？

> ID：15361653
> 
> 赞同：4
> 
> 时间：2013-03-12T12:48:11.997
> 
> 标签：javascript

当`lsEstimator`是具有 2 个元素的数组时，此函数返回`true`：

```
function got_estimators() {
  var retval = 
   (typeof lsEstimator != 'undefined' &&
    lsEstimator != null &&
   lsEstimator.length > 0);
  return retval;
} 
```

但这个函数没有（它返回`undefined`，我认为，在 Chrome 和 FF 中）：

```
function got_estimators() {
   return 
      (typeof lsEstimator != 'undefined' &&
      lsEstimator != null &&
      lsEstimator.length > 0);
} 
```

为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T12:49:38.213

`return`因为第二个例子中的换行符。代码被评估为：

```
function got_estimators() {
   return; // <-- bare return statement always results in `undefined`.
   (typeof lsEstimator != 'undefined' &&
    lsEstimator != null &&
    lsEstimator.length > 0);
} 
```

JavaScript 甚至没有评估逻辑运算符。

为什么会这样？因为 JavaScript 具有*自动分号插入*功能，即它尝试在“有意义的地方”插入分号（[更多信息在这里](https://stackoverflow.com/questions/2846283/what-are-the-rules-for-javascripts-automatic-semicolon-insertion-asi)）。

将`return`关键字和返回值放在同一行：

```
return (typeof lsEstimator != 'undefined' &&
  lsEstimator != null &&
  lsEstimator.length > 0); 
```

# neo4j - Neo4j 中的类别设计，根节点关系与与索引节点的关系

> ID：15361654
> 
> 赞同：5
> 
> 时间：2013-03-12T12:48:17.480
> 
> 标签：neo4j, graph-databases

我想代表属于几十个类别中的一个或多个类别的数百万种产品。

我正在考虑几种方法：

1.  索引类别节点 - 为每个类别创建节点并在 category_name 上创建一个 auto_index。然后在我的每个产品节点和它们各自的类别节点之间创建“isCategoryOf”关系。

2.  单独的类别关系类型——在产品和根节点之间创建各自的“isCategoryGames”、“isCategoryFood”、“isCategoryLifestyle”等关系。

3.  将类别存储为一种关系类型的属性 - 在产品节点和根节点之间创建“isCategory”关系，并将它们各自的类别类型存储在关系的属性中，例如关系“isCategory”{ categoryName：“food”}

这些方法中的哪一种是最有效和/或可扩展的。让数据库中的几乎每个节点都连接到根节点是否存在限制或性能影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:36:27.403

如果将数百万个节点附加到根节点，则使根节点成为超级节点。[这可能是有问题](http://java.dzone.com/articles/solution-supernode-problem)的。

选项 1 的一般概念显示出前景。如果您正在对食物进行建模，您可能有具有名称属性的节点，例如“坚果”、“乳制品”、“甜点”、“农产品”，类型属性为“类别”。然后，您将拥有具有名称属性的其他节点，例如“Cherry Cheesecake”，其中“乳制品”和“甜点”节点具有传出的“类别”边缘。

这种结构是否足够高效取决于您的查询。如果您有像“食物”这样的广泛类别，您最终可能会得到一个超级节点，并且您将对连接的节点进行线性扫描以找到具有给定属性的节点。对数千个事物进行线性扫描可能足以满足您的目的，但对 1M 个事物的扫描可能不会。

为了找出答案，我建议创建一个快速原型，在其中生成一些随机产品和类别节点，然后将每个产品节点连接到随机数量的类别节点。按名称索引产品和类别节点将帮助您找到单个产品或类别，但如果您遇到超级节点，遍历会导致性能问题。尝试一些您认为可能最有问题的 Gremlin 遍历或 Cypher 查询。尝试使用成比例的边数将节点数量从 1K、10K、100K 和 1M 扩大。您的遍历/查询时间如何变化？

# java - Android 警报对话框使我的应用程序崩溃

> ID：15361656
> 
> 赞同：0
> 
> 时间：2013-03-12T12:48:23.473
> 
> 标签：java, android, eclipse

每当我调试应用程序时，当我单击弹出对话框的按钮时它就会崩溃。

我应该怎么做才能使该对话框起作用？

```
 public class Actionbar_BtnHandler extends Activity {
    Context context;

    public  Actionbar_BtnHandler (Context context)
    {

        this.context=context;
    }
    public void btn_handler (Button btn_mic,Button btn_post)
    {
        btn_mic.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(context,"MICROPHONE",Toast.LENGTH_LONG).show();
            }
        });

        btn_post.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                 AlertDialog.Builder builder = new AlertDialog.Builder(context);
                    // Get the layout inflater
                    LayoutInflater inflater = ((Activity) context).getLayoutInflater();

                    // Inflate and set the layout for the dialog
                    // Pass null as the parent view because its going in the dialog layout
                    builder.setView(inflater.inflate(R.layout.dialog_signin, null))
                    // Add action buttons
                           .setPositiveButton("Post", new DialogInterface.OnClickListener() {
                               @Override
                               public void onClick(DialogInterface dialog, int id) {
                                   // sign in the user ...
                               }
                           })
                           .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                               public void onClick(DialogInterface dialog, int id) {

                               }
                           });      
                     builder.create();

            }
        });
    }

} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:54:15.853

```
LayoutInflater inflater = ((Activity) context).getLayoutInflater(); 
```

不准确...演员阵容似乎失败了

尝试 ：

```
@Override
public void onClick(View v) {
    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    // Get the layout inflater
    LayoutInflater inflater = Actionbar_BtnHandler.this.getLayoutInflater(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:57:07.327

尝试使用 Handler 编写您的 AlertDialog 代码。

```
 btn_post.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
       Handler handler = new Handler();
   handler.post(MessagealertDisplay);
    }
});
}

Runnable MessagealertDisplay = new Runnable() { 

    @Override
    public void run() {

         AlertDialog.Builder builder = new AlertDialog.Builder(context);
            // Get the layout inflater
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();

            // Inflate and set the layout for the dialog
            // Pass null as the parent view because its going in the dialog layout
            builder.setView(inflater.inflate(R.layout.dialog_signin, null))
            // Add action buttons
                   .setPositiveButton("Post", new DialogInterface.OnClickListener() {
                       @Override
                       public void onClick(DialogInterface dialog, int id) {
                           // sign in the user ...
                       }
                   })
                   .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {

                       }
                   });      
             builder.create();

    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:57:55.300

我用 Actionbar_BtnHandler btns = new Actionbar_BtnHandle(Class.this); btns.btn_handler(btn_post, btn_mic); 而不是 Actionbar_BtnHandler btns = new Actionbar_BtnHandler(getApplicationContext); btns.btn_handler(btn_post, btn_mic); 它奏效了

# html - iFrame 上的溢出-y 不显示滚动条

> ID：15361662
> 
> 赞同：4
> 
> 时间：2013-03-12T12:48:38.140
> 
> 标签：html, css, google-chrome

我在以下网站上使用 iFrame 进行在线预订，如下所示：

[http://www.marandy.com/one2onev2](http://www.marandy.com/one2onev2)

在 Chrome 或 IE 中，y 轴上的滚动条按预期显示，但在 Chrome 中似乎没有显示。

这是代码：

HTML

```
 <div id="main-online-booking">

            <iframe id="main-online-frame" class="booking-dimensions" src="http://www.marandy.com/one2oneob/login-guest.php" scrolling="no" frameborder="0"></iframe>

            <div id="main-online-user">

                <a href="#" onclick="changesrc('main-online-frame','http://www.marandy.com/one2oneob/login.php')"><img alt="One 2 One Account" id="img-onlinebooking-acc" src="images/account.png" /></a>

                <a href="#" onclick="changesrc('main-online-frame','http://www.marandy.com/one2oneob/login-guest.php')"><img alt="One 2 One Guest" id="img-onlinebooking-guest" src="images/guest.png" /></a>

            </div>

        </div> 
```

CSS

```
#main-online-booking {

height: 488px;
border-bottom: 6px #939393 solid;
border-left: 6px #939393 solid;
border-right: 6px #939393 solid;
z-index: 4;
background-color: #fff;
}

#main-online-frame {
overflow-x: hidden;
overflow-y: scroll;
frameBorder: 0;
height: 488px;
} 
```

任何想法为什么这不起作用或者我如何让它像在 Firefox/IE 中一样工作？

任何帮助将非常感激！:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:00:33.370

```
<iframe id="main-online-frame" class="booking-dimensions" src="http://www.marandy.com/one2oneob/login-guest.php" scrolling="no" frameborder="0"></iframe> 
```

将滚动=“否”更改为滚动=“是”。

那应该做的工作。

请务必刷新页面，只有在任何功能放大内容时才会出现滚动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:54:47.147

尝试将溢出：滚动添加到#main-online-booking，并以相同的样式根据您的喜好调整高度。

CSS：

```
#main-online-booking {
overflow:scroll;
z-index: 4;
height: 488px; /*adjust this to your desire*/
border-bottom: 6px #939393 solid;
border-left: 6px #939393 solid;
border-right: 6px #939393 solid;
background-color: #fff;
}

#main-online-frame {
frameBorder: 0;
height: 488px; /*adjust this to your desire*/
width: 600px;
} 
```

[你可以在这里](http://jsfiddle.net/blackhawx/e6pPC/10/)查看我的 jsfiddle 演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:40:38.883

只需`width`向 iframe 添加一个属性。

前任。

```
<iframe id="main-online-frame" class="booking-dimensions" src="http://www.marandy.com/one2oneob/login-guest.php" scrolling="no" frameborder="0" width="600px"></iframe> 
```

# jquery - 当尝试在 Jquery-ui 对话框上设置 cookie 时。它没有出现，所以都不起作用

> ID：15361669
> 
> 赞同：0
> 
> 时间：2013-03-12T12:48:52.823
> 
> 标签：jquery, cookies, jquery-ui-dialog, show

我知道有更多与此问题相关的问题，但它们不活跃并且超过 1 岁。

我有一个工作正常的 jquery ui 对话框，但我想设置一个 cookie，以便它为用户显示一次。

使用 setcookie 函数不是一个想法吗？或者这不适用于jquery？我对 jquery 一点也不了解，所以我不知道我做错了什么。

具有相同问题的较旧问题：[Help With Setting Cookie for a JQuery UI Modal Dialog](https://stackoverflow.com/questions/5913218/help-with-setting-cookie-for-a-jquery-ui-modal-dialog)

这是我的代码：

```
$(function() {
        if ($.cookie('showDialog') == undefined || $.cookie('showDialog') == null || $.cookie('showDialog') != 'false') {

$( "#dialog" ).dialog(
{ 
show: "slow",
modal: "true",
width: 600,
show: "fold",
hide: "fade",
resizable: false,
draggable: false,
buttons: [ { id: "go", text: "Opslaan", click: function() { $( this ).dialog( "close" ); } } ],
open: function(event, ui) { $(".ui-dialog-titlebar-close").hide();  }});
$(".ui-widget-overlay").css({background: "#000", opacity: 0.8});
});

$.cookie('showDialog', 'false', { expires: 1 }); // set the cookie, with expiry after 1 day
    }
}); 
```

我试图设置一个cookie，但它没有显示出来。真的很奇怪。我认为我的对话代码和 cookie 代码互相搞乱了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:56:40.707

在这里试试：http: [//jsfiddle.net/SkHJw/](http://jsfiddle.net/SkHJw/)

### 第一的

包括 jquery cookie 插件：[https ://github.com/carhartl/jquery-cookie/](https://github.com/carhartl/jquery-cookie/)

### 第二

在你想要的地方创建 cookie

```
$.cookie('showDialog', true); 
```

### 第三

去掉代码中多余的大括号和圆括号（这应该可以解决您的对话框问题）。我在下面把它们取下来了：

```
$(function() {

    if ($.cookie('showDialog') == undefined || $.cookie('showDialog') == null || $.cookie('showDialog') != 'false') {

        $( "#dialog" ).dialog(
        { 
        show: "slow",
        modal: "true",
        width: 600,
        show: "fold",
        hide: "fade",
        resizable: false,
        draggable: false,
        buttons: [ { id: "go", text: "Opslaan", click: function() { $( this ).dialog( "close" ); } } ],
        open: function(event, ui) { $(".ui-dialog-titlebar-close").hide();  }});
        $(".ui-widget-overlay").css({background: "#000", opacity: 0.8});

        $.cookie('showDialog', 'false', { expires: 1 }); // set the cookie, with expiry after 1 day
    }

////$.cookie('showDialog', true);  //uncomment this line to set cookie to true - this should show dialog
//alert($.cookie('showDialog')); //Uncomment this line to show the value of your cookie. It should read false and dialog would not launch;

}); 
```

### 第四

检查你的 if 语句

不要忘记上面的 if 语句意味着如果 cookie 值为 false，对话框不应该显示。如果未设置 cookie，这应该是默认值。因此，如果您希望对话框显示或更改 if 语句，请设置 cookie，具体取决于您的偏好：

```
if ($.cookie('showDialog') == undefined || $.cookie('showDialog') == null || $.cookie('showDialog') != 'true') { 
```

### 您可能需要以下这些来了解如何实际使用 jquery.cookie 插件：

## 用法

创建会话 cookie：

```
$.cookie('the_cookie', 'the_value'); 
```

创建过期 cookie，从那时起 7 天：

```
$.cookie('the_cookie', 'the_value', { expires: 7 }); 
```

创建过期 cookie，在整个站点中有效：

```
$.cookie('the_cookie', 'the_value', { expires: 7, path: '/' }); 
```

读取 cookie：

```
$.cookie('the_cookie'); // => "the_value"
$.cookie('not_existing'); // => undefined 
```

阅读所有可用的 cookie：

```
$.cookie(); // => { "the_cookie": "the_value", "...remaining": "cookies" } 
```

删除 cookie：

```
// Returns true when cookie was found, false when no cookie was found...
$.removeCookie('the_cookie');

// Same path as when the cookie was written...
$.removeCookie('the_cookie', { path: '/' }); 
```

注意：删除 cookie 时，您必须传递与设置 cookie 完全相同的路径、域和安全选项，除非您依赖默认选项。

在此处了解更多信息：[https ://github.com/carhartl/jquery-cookie/](https://github.com/carhartl/jquery-cookie/)

# android - Cygwin中关于GCC的2个新手问题

> ID：15361671
> 
> 赞同：0
> 
> 时间：2013-03-12T12:48:59.027
> 
> 标签：android, c++, gcc

1) 为什么我会在一个明显存在的文件上得到“没有这样的文件或目录”，在同一个目录中，我包含在 -I 中？

示例：http: [//i.imgur.com/fL0NsjL.jpg](https://i.imgur.com/fL0NsjL.jpg)

2）我以前解决过这个问题，至少两次。过去的解决方案基本上是“摇晃它直到它起作用”，如果这有任何意义的话。一旦我解决了这个问题，我会立即被打脸

CreateProcess：没有这样的文件或目录

一个对我来说完全没有意义的错误。关于该错误可能意味着什么，我遇到了许多理论，其中最具体的是 Cygwin 没有分配足够的内存来完成它需要做的事情。我已经调整了我的环境变量以将其内存限制提高到一个演出，但我仍然遇到这个问题。至少可以说，它使调试容易出错。

我看过这个：[CreateProcess：没有这样的文件或目录](https://stackoverflow.com/questions/3848357/gcc-createprocess-no-such-file-or-directory)

但它充满了我不理解的矛盾解决方案。只是这是一个非常模棱两可的错误，我将不得不摇晃更多的东西直到它起作用？实际上有办法解决这个问题吗？

# php - 每个用户唯一的 mySQL 数据

> ID：15361672
> 
> 赞同：0
> 
> 时间：2013-03-12T12:49:05.763
> 
> 标签：php, mysql, cakephp

我正在使用 MySQL/cakePHP 构建一个应用程序，其中涉及以下要求。

*   管理员创建用户需要完成的步骤。例如是/否类型的问题。管理员创建这些步骤，新用户应该得到它们。

*   用户在登录时需要完成所有这些步骤。

我的问题是在数据库（mySQL）中执行此操作的最佳方法是什么

*   当用户注册时，它会查询步骤表并为该用户的每个步骤创建新行？它通过查看步骤表从服务器端代码创建行？

*   创建一个新的临时表来存储关系？

我在关系设计方面相当有经验，但同时对做到这一点的最佳方法和未来证明自己有点难过。

```
**Mock Structure**
Steps
id
name
order
desc

**Users**
id
username

**Step_Users**
step_id
user_id
result1
result2
result3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:09:33.460

基本上你的桌子很好。这是一种情况：有人注册。您从表中执行所有步骤`Steps`并使用此字段创建一个表单。用户填写表格并提交。然后你把这些答案写到一张`step_user`桌子上。并且以某种方式保留用户已完成答案的信息（可能是某个地方的另一个字段，或者只是检查 step_user 表中是否有他的行）。当然，根据您的确切需求，有不同的方法来处理这个问题。因为您没有提到更多细节，所以我可以在这里提到更多场景，但不确定它们是否会有所帮助。
如果您想确保每个用户的每个步骤都有唯一的数据，那么您应该从表 step_user 中对 step_id 和 user_id 列创建一个复合唯一索引[http://www.w3schools.com/sql/sql_unique.asp](http://www.w3schools.com/sql/sql_unique.asp)，但当然您还需要代码来检查这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:09:13.310

我也是这样设计的。只是，为了以后满足不同数量的步骤（问题），也许将 Steps 保存为每个问题的一条记录，并对 Step_users 表执行相同的操作：

```
**Step_Users**
step_id
user_id
result 
```

如果需要，您可以在用户完成所有步骤时设置的用户表中添加一个标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:09:48.203

我会这样分解：

`Steps`我假设您在表格中为流程中的每个步骤都有一行。`Users`对于系统中的每个用户，您在表中都有一行。因此，`Step_Users`表中的行数应该是 (rows in `Steps`) * (rows in `Users`)。

我建议将一个布尔值放入`Users`表中，即`steps_finished`. 这样，您只需从用户表中拉出，就可以立即知道他们是否已被标记为已完成。此外，除非您愿意，否则将来对步骤的更改不会影响用户。

注册或登录时请按照以下步骤操作：

1.  用户注册一个新帐户： `steps_finished`= false 或用户登录到一个帐户。
2.  如果`steps_finished`= true，则忽略其余部分。如果为假，请继续。
3.  系统做一个`select * from Step_Users where user_id=X order by step_id`
4.  系统做一个`select * from Steps order by id`
5.  数数第 3 步中的行并将它们与第 2 步中的行进行比较。当您在第 3 步中找到不在第 2 步中的行中的行时，给他们那个步骤。（如果您从第 3 步开始浏览整个表格，并且第 2 步中的行中没有遗漏任何内容，则执行 set `steps_finished`= true ）

下一页提交

1.  一旦他们给出了该步骤的结果，`select * from Step_Users where user_id=X and step_id=Y`
2.  如果该结果返回为 0 行，那么您知道他们之前没有提交此步骤。`插入 Step_Users (step_id, user_id, result1, result2, result3) 值 (X, Y, 'response1', 'response2', 'response3')
3.  再次执行上述步骤 3-5。

将表中的行相互检查有很多原因，但最大的原因是用户可能会在中间停止执行这些步骤，并且您需要一种方法可以直接跳回到它们开始的位置。

# visual-studio-2010 - 模板存储路径无效。请确保它存在或可以创建：Unexpected path [path]

> ID：15361673
> 
> 赞同：5
> 
> 时间：2013-03-12T12:49:05.717
> 
> 标签：visual-studio-2010

我在我的工作机器（Win7 64bit）上得到这个，每次打开VS2010都会发生这种情况，这就是我到目前为止所做的：1.从导入和导出设置文件夹属性（项目、项目模板和项目模板）设置。2\. 从 Options/Projects & Solutions 中设置项目、项目模板和项目模板路径。3.找到并手动设置指向上述属性的注册表值。

所以每次我关闭 VS 2010 时，似乎什么都没有保存，我再次收到上述错误，我发现所有我已经设置回原来的值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-19T18:02:51.097

我在安装 TFS Power Tools 后开始收到此错误，它看起来与此有关，而不是与 VS2010 本身有关。

我通过转到`Tools->Options`、展开`Team Foundation Server Power Tools`、单击`Work Item Template`并将默认模板存储路径设置为我选择的路径来修复它。

一旦我保存了该消息，我就可以不受干扰地启动我的 IDE。

# java - mysql-connector 阻塞不再存在的连接。Tomcat 冻结

> ID：15361675
> 
> 赞同：2
> 
> 时间：2013-03-12T12:49:12.533
> 
> 标签：java, mysql, jdbc, tomcat6

我们在 Tomcat 中使用 JDBCRealm 和 mysql 进行表单认证。这几乎总是可以正常工作。
当我们停止/重新启动 mysql 数据库（在测试中）时，我们注意到其中一个 Tomcat HTTP 线程将无休止地等待一些与身份验证相关的数据，而不是失败（例如 IOException 或超时等）。这会导致所有其他 HTTP 线程也阻塞，只要它们需要共享同步方法。结果是创建了越来越多的 HTTP 线程，全部阻塞，直到达到最大值。
冻结的线程永远不会唤醒或超时，即使我使用 netstat 来确认它阻塞的连接实际上已经消失了。
双方之间有防火墙，尽管我认为这与这里的问题无关。连接是“正常”建立和断开的。
快速解决方案当然是使用数据库停止/启动 tomcat，但调用不会简单地失败似乎很奇怪。此外，我担心这会在类似情况下的生产中发生。
除了重启tomcat或手动杀死阻塞线程之外，我们还能做些什么吗？
提前感谢您的想法。

设置：

*   tomcat6
*   用于表单认证的 JDBCRealm
*   mysql 5.5 数据库
*   mysql-connector-java-5.1.7-bin.jar

server.xml 的相关部分：

```
 <Realm className="org.apache.catalina.realm.LockOutRealm" lockOutTime="300">
       <Realm className="org.apache.catalina.realm.JDBCRealm"
            connectionName="xxx"
            connectionPassword="xxx"
            connectionURL="jdbc:mysql://xxx:6446/xxx?autoReconnect=true"
            digest="xxx"
            driverName="com.mysql.jdbc.Driver"
            roleNameCol="xxx"
            userCredCol="xxx"
            userNameCol="xxx"
            userRoleTable="xxx"
            userTable="xxx"
            maxActive="30"
            maxIdle="30"
            maxWait="10000"
            factory="org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory"/>
  </Realm> 
```

阻塞线程的示例（阻塞“同步”方法的入口）：

```
Name: http-8080-60
State: BLOCKED on org.apache.catalina.realm.JDBCRealm@edeb18b owned by: http-8080-61
Total blocked: 27  Total waited: 63

Stack trace: 
 org.apache.catalina.realm.JDBCRealm.authenticate(JDBCRealm.java:353)
org.apache.catalina.realm.CombinedRealm.authenticate(CombinedRealm.java:178)
org.apache.catalina.realm.LockOutRealm.authenticate(LockOutRealm.java:196)
org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:260)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:454)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:394)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Unknown Source) 
```

导致所有其他线程阻塞的单个线程（请注意，“available()”调用正在等待/阻塞不再存在的连接）：

```
Name: http-8080-61
State: RUNNABLE
Total blocked: 132  Total waited: 1,198

Stack trace: 
 java.net.PlainSocketImpl.socketAvailable(Native Method)
java.net.PlainSocketImpl.available(Unknown Source)
   - locked java.net.SocksSocketImpl@c679aa4
java.net.SocketInputStream.available(Unknown Source)
com.mysql.jdbc.util.ReadAheadInputStream.available(ReadAheadInputStream.java:231)
com.mysql.jdbc.MysqlIO.clearInputStream(MysqlIO.java:941)
com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1887)
com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2101)
com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2548)
   - locked java.lang.Object@65d98b58
com.mysql.jdbc.ConnectionImpl.commit(ConnectionImpl.java:1560)
   - locked java.lang.Object@65d98b58
org.apache.catalina.realm.JDBCRealm.getPassword(JDBCRealm.java:583)
   - locked org.apache.catalina.realm.JDBCRealm@edeb18b
org.apache.catalina.realm.JDBCRealm.authenticate(JDBCRealm.java:414)
   - locked org.apache.catalina.realm.JDBCRealm@edeb18b
org.apache.catalina.realm.JDBCRealm.authenticate(JDBCRealm.java:361)
   - locked org.apache.catalina.realm.JDBCRealm@edeb18b
org.apache.catalina.realm.CombinedRealm.authenticate(CombinedRealm.java:178)
org.apache.catalina.realm.LockOutRealm.authenticate(LockOutRealm.java:196)
org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:260)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:454)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:394)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:13:04.870

尝试在 JDBC 连接上设置读取超时`socketTimeout`。

```
jdbc:mysql://xxx:6446/xxx?autoReconnect=true&connectTimeout=60000&socketTimeout=60000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:25:57.397

您是否仅将数据库用于 auth° ？恕我直言，您最好使用与 a`DataSourceRealm`和您的`LockOutRealm`. 也许这最后一个与`JDBCRealm`.

这是一个`JDBCRealm`javadoc 摘录：

`For a Realm implementation that supports connection pooling and doesn't require synchronisation of authenticate(), getPassword(), roles() and getPrincipal() or the ugly connection logic use the DataSourceRealm.`

# java - 像网络摄像头一样使用安卓手机

> ID：15361679
> 
> 赞同：1
> 
> 时间：2013-03-12T12:49:16.857
> 
> 标签：java, android, sockets, video-streaming

我正在尝试开发和应用程序来保存视频，并且该视频可以在 pc 中查看。我在手机上使用android，在pc上使用java。pc 内容服务器端和传输是由套接字进行的。我的问题似乎是我可以录制视频，但 pc 端应用程序无法再现发送的视频。`我告诉你这是我设置 MediaRecorder 的代码：

```
public void prepareVideoRecorder(Camera mCamera, ParcelFileDescriptor pfd,
        SurfaceHolder mHolder) {
    if (mCamera == null) {
        mCamera = safeCameraOpen(mCamera);
    }
    if (mMediaRecorder == null) {
        mMediaRecorder = new MediaRecorder();

        mCamera.stopPreview();
        // Step 1: unlock and set camera to MediaRecorder;
        mCamera.unlock();
        mMediaRecorder.setCamera(mCamera);
    }

    // Step 2: Set sources:
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
    //mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);

    // Step 3:Set a CamcorderProfile (APi level 8 or higher)
    mMediaRecorder.setProfile(CamcorderProfile
            .get(CamcorderProfile.QUALITY_HIGH));

    // Step 4: Set output file
    mMediaRecorder.setOutputFile(pfd.getFileDescriptor());
    // Step 5: Set the preview output
    mMediaRecorder.setPreviewDisplay(mHolder.getSurface());
    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

这似乎是正确的。然后应该播放视频的 pc 端使用 xuggler 开发，应用程序停止：

```
if (container.open(inputstream, null) < 0) {
            throw new IllegalArgumentException("could not open inpustream");
        } 
```

这是下一个 java 类的一部分：

```
public class imagePnl extends JPanel {

URL medialocator = null;
BufferedImage image;
private Player player;
private DataSource ds = null;
private String mobileLocation = "socket://localhost:1234";
// private ByteArrayDataSource byteDs = null;
private InputStream inputStream = null;
IContainerFormat format;

public imagePnl() {
}

public void setVideo(InputStream inputstream) {
    // Let's make sure that we can actually convert video pixel formats.
    if (!IVideoResampler
            .isSupported(IVideoResampler.Feature.FEATURE_COLORSPACECONVERSION)) {
        throw new RuntimeException("you must install the GPL version"
                + " of Xuggler (with IVideoResampler support) for "
                + "this demo to work");
    }

    IContainer container = IContainer.make();

    if (container.open(inputstream, null) < 0) {
        throw new IllegalArgumentException("could not open inpustream");
    }
    // query how many streams the call to open found
    int numStreams = container.getNumStreams();
    // and iterate through the streams to find the first video stream
    int videoStreamId = -1;
    IStreamCoder videoCoder = null;
    for (int i = 0; i < numStreams; i++) {
        // Find the stream object
        IStream stream = container.getStream(i);
        // Get the pre-configured decoder that can decode this stream;
        IStreamCoder coder = stream.getStreamCoder();

        if (coder.getCodecType() == ICodec.Type.CODEC_TYPE_VIDEO) {
            videoStreamId = i;
            videoCoder = coder;
            break;
        }
    }
    if (videoStreamId == -1) {
        throw new RuntimeException("could not find video stream");
    }
    /*
     * Now we have found the video stream in this file. Let's open up our
     * decoder so it can do work.
     */
    if (videoCoder.open() < 0) {
        throw new RuntimeException(
                "could not open video decoder for container");
    }
    IVideoResampler resampler = null;
    if (videoCoder.getPixelType() != IPixelFormat.Type.BGR24) {
        // if this stream is not in BGR24, we're going to need to
        // convert it. The VideoResampler does that for us.
        resampler = IVideoResampler.make(videoCoder.getWidth(),
                videoCoder.getHeight(), IPixelFormat.Type.BGR24,
                videoCoder.getWidth(), videoCoder.getHeight(),
                videoCoder.getPixelType());
        if (resampler == null) {
            throw new RuntimeException(
                    "could not create color space resampler.");
        }
    }
    /*
     * Now, we start walking through the container looking at each packet.
     */
    IPacket packet = IPacket.make();
    long firstTimestampInStream = Global.NO_PTS;
    long systemClockStartTime = 0;
    while (container.readNextPacket(packet) >= 0) {
        /*
         * Now we have a packet, let's see if it belongs to our video stream
         */
        if (packet.getStreamIndex() == videoStreamId) {
            /*
             * We allocate a new picture to get the data out of Xuggler
             */
            IVideoPicture picture = IVideoPicture.make(
                    videoCoder.getPixelType(), videoCoder.getWidth(),
                    videoCoder.getHeight());

            try {
                int offset = 0;
                while (offset < packet.getSize()) {
                    System.out
                            .println("VideoManager.decode(): decode one image");
                    /*
                     * Now, we decode the video, checking for any errors.
                     */
                    int bytesDecoded = videoCoder.decodeVideo(picture,
                            packet, offset);
                    if (bytesDecoded < 0) {
                        throw new RuntimeException(
                                "got error decoding video");
                    }
                    offset += bytesDecoded;

                    /*
                     * Some decoders will consume data in a packet, but will
                     * not be able to construct a full video picture yet.
                     * Therefore you should always check if you got a
                     * complete picture from the decoder
                     */
                    if (picture.isComplete()) {
                        System.out
                                .println("VideoManager.decode(): image complete");
                        IVideoPicture newPic = picture;
                        /*
                         * If the resampler is not null, that means we
                         * didn't get the video in BGR24 format and need to
                         * convert it into BGR24 format.
                         */
                        if (resampler != null) {
                            // we must resample
                            newPic = IVideoPicture
                                    .make(resampler.getOutputPixelFormat(),
                                            picture.getWidth(),
                                            picture.getHeight());
                            if (resampler.resample(newPic, picture) < 0) {
                                throw new RuntimeException(
                                        "could not resample video");
                            }
                        }
                        if (newPic.getPixelType() != IPixelFormat.Type.BGR24) {
                            throw new RuntimeException(
                                    "could not decode video as BGR 24 bit data");
                        }

                        /**
                         * We could just display the images as quickly as we
                         * decode them, but it turns out we can decode a lot
                         * faster than you think.
                         * 
                         * So instead, the following code does a poor-man's
                         * version of trying to match up the frame-rate
                         * requested for each IVideoPicture with the system
                         * clock time on your computer.
                         * 
                         * Remember that all Xuggler IAudioSamples and
                         * IVideoPicture objects always give timestamps in
                         * Microseconds, relative to the first decoded item.
                         * If instead you used the packet timestamps, they
                         * can be in different units depending on your
                         * IContainer, and IStream and things can get hairy
                         * quickly.
                         */
                        if (firstTimestampInStream == Global.NO_PTS) {
                            // This is our first time through
                            firstTimestampInStream = picture.getTimeStamp();
                            // get the starting clock time so we can hold up
                            // frames until the right time.
                            systemClockStartTime = System
                                    .currentTimeMillis();
                        } else {
                            long systemClockCurrentTime = System
                                    .currentTimeMillis();
                            long millisecondsClockTimeSinceStartofVideo = systemClockCurrentTime
                                    - systemClockStartTime;

                            // compute how long for this frame since the
                            // first frame in the stream.
                            // remember that IVideoPicture and IAudioSamples
                            // timestamps are always in MICROSECONDS,
                            // so we divide by 1000 to get milliseconds.
                            long millisecondsStreamTimeSinceStartOfVideo = (picture
                                    .getTimeStamp() - firstTimestampInStream) / 1000;
                            final long millisecondsTolerance = 50; // and we
                                                                    // give
                                                                    // ourselfs
                                                                    // 50 ms
                                                                    // of
                                                                    // tolerance
                            final long millisecondsToSleep = (millisecondsStreamTimeSinceStartOfVideo - (millisecondsClockTimeSinceStartofVideo + millisecondsTolerance));
                            if (millisecondsToSleep > 0) {
                                try {
                                    Thread.sleep(millisecondsToSleep);
                                } catch (InterruptedException e) {
                                    // we might get this when the user
                                    // closes the dialog box, so just return
                                    // from the method.
                                    return;
                                }
                            }
                        }

                        // And finally, convert the BGR24 to an Java
                        // buffered image
                        BufferedImage javaImage = Utils
                                .videoPictureToImage(newPic);

                        // and display it on the Java Swing window
                        setImage(javaImage);
                        // if (listener != null) {
                        // listener.imageUpdated(javaImage);
                        // }
                    }
                } // end of while
            } catch (Exception exc) {
                exc.printStackTrace();
            }
        } else {
            /*
             * This packet isn't part of our video stream, so we just
             * silently drop it.
             */
            do {
            } while (false);
        }

    }
    /*
     * Technically since we're exiting anyway, these will be cleaned up by
     * the garbage collector... but because we're nice people and want to be
     * invited places for Christmas, we're going to show how to clean up.
     */
    if (videoCoder != null) {
        videoCoder.close();
        videoCoder = null;
    }
    if (container != null) {
        container.close();
        container = null;
    }

    // byteDs = new ByteArrayDataSource(bytes, "video/3gp");
    // ToolFactory.makere byteDs
    // .getOutputStream();
    // Manager.createPlayer(byteD);
    // Player mediaPlayer = Manager.createRealizedPlayer(new
    // MediaLocator(mobileLocation));
    // Component video = mediaPlayer.getVisualComponent();
    // Component control = mediaPlayer.getControlPanelComponent();
    // if (video != null) {
    // add(video, BorderLayout.CENTER);
    // }
    // add(control, BorderLayout.SOUTH);
    // mediaPlayer.start();
    // } catch (IOException | NoPlayerException | CannotRealizeException ex)
    // {
    // Logger.getLogger(imagePnl.class.getName()).log(Level.SEVERE, null,
    // ex);
    // }
    paint(getGraphics());
}

public void setImage(BufferedImage image) {
    this.image = (BufferedImage) image;

    paint(getGraphics());
}

@Override
public void paintComponent(Graphics g) {
    // super.paintComponent(g);
    // Graphics2D g2d = (Graphics2D) g;
    //
    // g2d.drawImage(image, 0, 0, null);
    // explicitly specify width (w) and height (h)
    g.drawImage(image, 10, 10, this.getWidth(), this.getHeight(), this);

} 
```

当应用程序在这一行停止时，不会显示错误，但应用程序也不会在 pc 端显示视频。

我希望你能帮助我。该项目用于学习目的。提前致谢， 弗兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:16:19.900

如果要从 android 流式传输视频，则应使用[RTSP](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)或[RTP](http://en.wikipedia.org/wiki/Real-time_Transport_Protocol)等流式传输协议。使用 TCP 套接字将不起作用，因为在通过套接字接收的所有数据包中都不会提供标头信息。请看一下[Spydroid](https://code.google.com/p/spydroid-ipcamera/source/checkout)。

# scala - 一种创建包含滞后元组的 Scala 序列的优雅方式

> ID：15361685
> 
> 赞同：4
> 
> 时间：2013-03-12T12:49:21.497
> 
> 标签：scala, tuples, seq

我想创建一个包含元组的 Scala 序列。输入是这样的文本文件：

```
A
B
C
D
E 
```

我正在寻找一种优雅的方式来构造这样的“滞后”元组：

```
(A, B), (B, C), (C, D), (D, E) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T13:01:27.060

最简单的方法是使用`tail`and `zip`：

```
val xs = Seq('A', 'B', 'C', 'D', 'E')
xs zip xs.tail 
```

如果效率是一个问题（即您不想通过调用创建额外的中间序列`tail`并且`Seq`您使用的不是`List`s，这意味着`tail`需要 O(n)），那么您可以使用视图：

```
xs zip xs.view.tail 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T13:01:19.040

我不太确定它有多优雅，但这至少适用于超过 1 个元素的所有列表：

```
val l = List('A,'B,'C,'D,'E,'F)
val tupled = l.sliding(2).map{case x :: y :: Nil => (x,y)}

tupled.toList
// res8: List[(Symbol, Symbol)] = List(('A,'B), ('B,'C), ('C,'D), ('D,'E), ('E,'F)) 
```

如果您想要比这更优雅的东西，我建议您查看[Shapeless](https://github.com/milessabin/shapeless)以获得在列表和元组之间转换的好方法。

# python - 加入列表中的特定元组

> ID：15361690
> 
> 赞同：3
> 
> 时间：2013-03-12T12:49:34.423
> 
> 标签：python, python-2.7, list-comprehension

我最近一直在问很多，并且不需要这么多帮助感觉不太舒服，但是这个算法看起来真的很难。

我有一个这样的元组列表：

```
[('12 Mar 2011',), ('152', 'Farko', 'Kier'), ('153', 'Park', 'Pub'), ('09 Mar 2011',), ('158', 'Diving', 'Jogging')] 
```

带有日期的元组将始终具有`len == 1`. 现在，我需要将每个前面的日期与以下所有非日期元组连接起来。非日期元组的数量将始终未定义。日期元组将加入序列中的每个非日期元组，直到它接近下一个日期元组，然后该元组必须加入所有以下非日期元组，依此类推。最后的结果应该是这样的：

```
 [('152', 'Farko', 'Kier', '12 Mar 2011'), ('153', 'Park', 'Pub', '12 Mar 2011'), ('158', 'Diving', 'Jogging', '09 Mar 2011',] 
```

如果您不能提供现成的代码，也许会提示在哪里查看，什么方法，因为我想不出我的工具包中可以在这里做得很好的任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T12:54:18.030

您可以使用 编写此`itertools.groupby`代码，但命令式生成器函数可能更具可读性：

```
def join_dates(l):
    date = None
    for t in l:
        if len(t) == 1:
            date = t
        else:
            yield t + date 
```

为了完整起见，这是`itertools`解决方案：

```
from itertools import groupby
[t + ds[0] for ds, ts in zip(*[(list(g) for _, g in groupby(l, len))] * 2) for t in ts] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T13:01:23.373

像这样的东西：

```
In [60]: ans=[]

In [61]: lis=[('12 Mar 2011',), ('152', 'Farko', 'Kier'), ('153', 'Park', 'Pub'), ('09 Mar 2011',), ('158', 'Diving', 'Jogging')]

In [62]: date=None

In [63]: for x in lis:
    if len(x)==1:
        date=list(x)
    else:
        if date:
            ans.append(list(x)+date)
   ....:         

In [64]: ans
Out[64]: 
[['152', 'Farko', 'Kier', '12 Mar 2011'],
 ['153', 'Park', 'Pub', '12 Mar 2011'],
 ['158', 'Diving', 'Jogging', '09 Mar 2011']] 
```

# wordpress - 在自定义帖子类型中显示父分类

> ID：15361695
> 
> 赞同：3
> 
> 时间：2013-03-12T12:49:45.057
> 
> 标签：wordpress, taxonomy, custom-post-type

我有一组自定义帖子类型的学校，位置排序如下：

```
London
- 1 Oxford Road
- 2 Cambridge Road

Paris
- 1 Napoleon Road
- 2 Tower Road 
```

如何更改以下内容，以便输出位置父级而不是位置子级：

```
// begin loop
$args = array('post_type' => 'school');
query_posts($args); if ( have_posts() ) : while ( have_posts() ) : the_post();

// variable for location
$location = get_the_term_list( $post->ID, 'location', '', ', ', '' );

// output   
echo get_the_title() . ' - ' . $location;

// end loop
endwhile; endif; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T15:20:32.707

我没有测试以下脚本，但我希望它能让您在解决方案方面更上一层楼。

```
// begin loop
$args = array('post_type' => 'school');
query_posts($args); if ( have_posts() ) : while ( have_posts() ) : the_post();

// variable for location
$term_list = '';
$terms     = get_the_terms( $post->ID, 'location' );
$prefix    = '';

foreach( $terms as $term ) {
    $parent_term = get_term( $term->parent, 'location' );
    $term_list  .= $prefix . $parent_term->name . ' - ' . $term->name;
    $prefix      = ', ';
}

// output
echo get_the_title() . ' - ' . $term_list;

// end loop
endwhile; endif; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-19T10:23:54.577

将“work_categories”更改为您的分类名称 - 下面的代码已经过测试，但不适用于较旧的 PHP 版本，例如 5.3。

```
// @codingStandardsIgnoreStart
$first_term_name = get_the_terms( $post->ID, 'work_categories' )[0]->name;
var_dump( $first_term_name );
// @codingStandardsIgnoreEnd 
```

# delphi - Delphi中的注释方法？

> ID：15361697
> 
> 赞同：29
> 
> 时间：2013-03-12T12:49:45.630
> 
> 标签：delphi, documentation, xml-documentation

我有一段代码需要一些认真的文档，并想询问 Embarcadero Delphi 是否可以使用类似于 C#/.NET 的 In-code XML-Documentation 的功能。我的目标是显示一些关于如何正确使用特定方法的信息，就像在 Delphi XE3 的自动完成中突出显示的那样。

像这样的东西（C#）：

```
/// <summary>
/// Some useful information helping other developers use this method correctly
/// </summary>
public static void ADocumentedMethod(); 
```

Delphi XE3 支持这样的东西吗？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-12T12:57:15.527

该功能被命名为*XML Documentation Comments*，并[在此处记录](http://docwiki.embarcadero.com/RADStudio/en/XML_Documentation_Comments)。它似乎是在等效的 .net 功能上紧密建模的，因此您应该对它很熟悉。

该文档包含此示例：

```
/// <summary> Removes the specified item from the collection
/// </summary>
/// <param name="Item">The item to remove
/// </param>
/// <param name="Collection">The group containing the item
/// </param>
/// <remarks>
/// If parameter "Item" is null, an exception is raised.
/// <see cref="EArgumentNilException"/>
/// </remarks>
/// <returns>True if the specified item is successfully removed;
/// otherwise False is returned.
/// </returns>
function RemoveItem(Item: Pointer; Collection: Pointer): Boolean;
begin
  // Non-XML DOC comment
  // ...
end; 
```

这导致了这个帮助洞察提示：

![在此处输入图像描述](../Images/0a2071804d8d0f90ec34ef60c22d3a87.png)

还有各种其他方式来处理和使用文档。

# npapi - 从 FireBreath 插件注入 JS 文件？

> ID：15361699
> 
> 赞同：0
> 
> 时间：2013-03-12T12:49:49.103
> 
> 标签：npapi, firebreath, browser-plugin

我有 FireBreath 插件，里面有一些 JS 文件。在某些时候，我正在尝试使用插件注入该 JS 文件。如何使用插件注入该 js 文件？如果你能提供例子，我是新手。

我需要像 NPN_Evaluate 一样的行为，有没有 FireBreath API 呢？

PS我知道扩展，但对于这种特殊情况，我需要从插件注入JS。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:48:00.677

BrowserHost::evaluateJavascript()

从您的主插件类中，您可以使用 m_host->evaluateJavascript(jsVar); 调用它。

如果您尝试注入文件，则必须从磁盘加载它。当然，另一种方法是注入一个从磁盘加载它的脚本标签，但这可能需要注入 javascript 来做到这一点，因为我不确定你是否真的可以完全通过插件注入脚本标签。

# facebook - 推特到脸书

> ID：15361703
> 
> 赞同：1
> 
> 时间：2013-03-12T12:49:56.550
> 
> 标签：facebook, twitter

我做了很多搜索，但无法找到解决方案。

尝试将我的 Twitter 设置为 Facebook 提要设置，但出现此错误：

“Facebook 报告了一个错误。该错误已报告给我们的工程团队。请重试，因为它可能是一个临时问题”

据我所知，这可能与已删除的旧帐户有关，但我不知道如何解决这个问题，很多其他人也不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T12:04:37.090

首先：这不是一个编程问题，因为它与 Twitter API 无关，而是与 Twitter 接口有关。因此，它实际上应该被视为*“题外话”*。

**尽管如此，还是要向您伸出援助之手：**

您所描述的是一个已知的错误 Twitter 错误。检查[https://www.facebook.com/help/community/question/?id=110412992466716](https://www.facebook.com/help/community/question/?id=110412992466716)和[https://dev.twitter.com/issues/998](https://dev.twitter.com/issues/998)

当您的 Twitter 帐户先前连接到您删除/停用的另一个 Facebook 帐户时，问题出现了，而没有先删除 Twitter 应用程序。现在您尝试连接到新的 Facebook 帐户，Twitter 仍然尝试使用该其他帐户的旧凭据进行授权。

目前，您唯一的希望是要求 Twitter 从您的 Twitter 个人资料的后端手动删除旧帐户凭据。从我一直在阅读的内容来看，Twitter 在这一点上经常无法合作……您只能询问并希望 Twitter 上的某个人能够并愿意手动纠正他们的错误。

# iphone - 模拟器与设备中的视图不一致

> ID：15361706
> 
> 赞同：0
> 
> 时间：2013-03-12T12:50:02.030
> 
> 标签：iphone, ios

我正在制作一个计算器应用程序，我在主视图上放了很多按钮。但是，当我在模拟器上对其进行测试时，某些按钮无法正确显示。谁能告诉我会发生什么？我很困惑，因为我只是从 XCode 右侧的工具箱中拖动按钮、标签等，并更改了它们的字体并将它们与角色和列对齐。我没有对按钮进行任何编程（除了添加`IBActions`and `Outlets`）。这是我的问题的快照。

![快照](../Images/cc66d3da7c1bd291e4f850e779d6d03f.png)

顺便说一句，彩色矩形只是用于存储表达式和答案的文本字段。它们最终将是透明的，并且为方便起见，目前已着色以在屏幕上显示位置。

我不能提供更多细节，因为我不知道任何可能的原因。毕竟，设计视图只是一个绘图和美学问题，但我现在被困住了。谁能给个解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T00:23:47.740

所以事实证明我需要禁用`autolayout`. 使用`autolayout`，我猜 XCode 将通过`autolayout`选项进行优化。关闭后，一切看起来都很好。

# sql-server-2008 - SQL Server 2008 无法更改表名

> ID：15361709
> 
> 赞同：-2
> 
> 时间：2013-03-12T12:50:05.360
> 
> 标签：sql-server-2008, ssms

我在 SQL Server 2008 中创建了一个表并保存了它。但是当我尝试通过 SSMS 修改表上的列定义时，它不会让我这样做。

如何通过 SSMS 修改表结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:54:21.697

> **保存**（不允许）对话框警告您不允许保存更改，因为您所做的更改需要删除并重新创建列出的表。
> 
> 以下操作可能需要重新创建表：
> 
> *   在表格中间添加一个新列
> *   删除一列
> *   更改列可空性
> *   更改列的顺序
> *   更改列的数据类型
> 
> 要更改此选项，请在“**工具**”菜单上单击“**选项**”，展开“**设计器**”，然后单击“T* *able 和数据库设计器**”。选中或清除**阻止保存需要重新创建表的更改复选框**。

[MSDN 源码文章](http://msdn.microsoft.com/en-us/library/bb895146.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:56:56.603

去`Tools->Options`

Form `Options`-> select `Designers`: Here 取消选中该选项：`Prevent saving changes that require table re-creation`

![在此处输入图像描述](../Images/322c9e3ef26d6f5249927d4202d2f2d2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:57:30.043

你不能通过管理工作室修改它，但你应该可以通过 sql ALTER TABLE 来修改它。

[http://www.w3schools.com/sql/sql_alter.asp](http://www.w3schools.com/sql/sql_alter.asp)

```
ALTER TABLE myTable
ADD NewColumn INT

ALTER TABLE myTable 
DROP COLUMN MyColumn 
```

# javascript - 如何置换表格的 2 个单元格

> ID：15361710
> 
> 赞同：2
> 
> 时间：2013-03-12T12:50:05.703
> 
> 标签：javascript, php, jquery, html-table, cell

我想做一个小函数，用 jQuery（或 PHP/Ajax）置换表格的 2 个单元格。假设我有下表：

```
<table class="table">
    <tr>
        <td class="btn" data-cellN="1">
            01
        </td>
        <td class="btn" data-cellN="2">
            02
        </td>          
    </tr>

    <tr>
        <td class="btn" data-cellN="3">
            05
        </td>
        <td class="btn" data-cellN="4">
            06
        </td>
    </tr>
</table> 
```

如何选择 2 个单元格并排列它们？

编辑：

不过，多亏了你的建议，我才完成了这个功能。这是第一次出现错误我从 c1 c2 c3 变量中得到一个奇怪的错误，我不知道为什么，有人可以帮我完成我的功能吗？

这是我的 Javascript：（它包含在准备好的文档中）

```
 var nbbuttonclicked=0; // to trigger the movecell function after the second button was clicked
        var count=0; //Number of tinme we moved a cell

        var table = {

            c1:null,
            c2:null,
            c3:null,

            check: function(){
                $('td').on('click', function(){ //When the user click on a button we verify if he already clicked on this button

                    if( $(this).hasClass('btn-info') ) {

                        //If yes, then remove the class and variable c1
                        $(this).removeClass('btn-info');
                        table.c1=0;
                        nbbuttonclicked--;

                    }else{
                        //if no, then add a class to show him it is clicked and remember the value of the cell
                        $(this).addClass('btn-info');
                        if( typeof table.c1 === 'undefined' || table.c1===null) {
                            table.c1 = $(this);
                          console.log('c1:'+table.c1.html());
                        }else{
                            table.c2 = $(this);
                          console.log('c2:'+table.c2.html());
                        }

                        nbbuttonclicked++;

                        if( nbbuttonclicked==2 ) {
                            table.movecell(table.c1,table.c2); // we trigger the function to permute the values
                        }
                    }
                });
            },

            movecell: function(c1, c2){
                //We reset that variable for the next move
                nbbuttonclicked=0;

              //we move the cells
              table.c3=c1.html();
              c1.html(c2.html());
              c2.html(table.c3)

              c1.removeClass('btn-info');
              c2.removeClass('btn-info');
              table.c1=table.c2=table.c3=c1=c2=null;

            },

            // movecell: function(c1, c2){
                // We check if the cells.html() are = to data-cellN. If yes, you won
                // foreach()
            // },

            // var row = $('table tr:nth-child(1)')[0];
            // moveCell(row, 0, 3);
        };
        table.check(); 
```

这是一个示例：http: [//jsbin.com/exesof/2/edit](http://jsbin.com/exesof/2/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:04:06.133

使用 jQuery，你可以这样做：

```
$(document).ready(function() {

    $("table.table tbody tr td:first-child").each(function(index, element) {
    // this and element is the same    
    $(this).insertAfter($(this).next());
    });

}); 
```

假设您没有省略 tbody 元素（由某些浏览器自动添加为默认行为）

[工作示例](http://jsfiddle.net/EhQy4/1/)

如果您想在单击第一个单元格时执行该过程，则只需使用`on`单击事件而不是每个。

```
$(document).ready(function() {

    $("table.table tbody tr td:first-child").on('click', function(clickEvent) {
        $(this).insertAfter($(this).next());
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:43:55.263

试试这个代码：

```
var cell0,
    cell1,
    next,
    row0,
    row1;

$('td').on('click', function() {
  if(!cell0) {
    cell0 = this;
    row0 = cell0.parentNode;
    return;
  } else if(!cell1) {
    cell1 = this;
    row1 = cell1.parentNode;

    // === Switch cells ===
    next = cell0.nextSibling;
    row1.insertBefore(cell0, cell1);
    row0.insertBefore(cell1, next);
    // ====================

    row0 = row1 = cell0 = cell1 = next = null;
  }
}); 
```

您可以在这里尝试的工作示例：http: [//jsbin.com/irapeb/3/edit](http://jsbin.com/irapeb/3/edit)

单击其中一个单元格，而不是另一个单元格，然后查看它们是否已切换:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:00:15.693

此代码会将第 4 个`td`（引用为`cell[3]`）移动到第一行中第一个单元格（`cell[0]`）的位置（第 1 个变为第 4 个）：

```
function moveCell(row, c1, c2) {
    var cell = row.cells;
        arr = [c1, c2].sort(),
        c1 = arr[1],
        c2 = arr[0];
    row.insertBefore(row.insertBefore(cell[c1], cell[c2]).nextSibling, cell[c1].nextSibling);
}

var row = $('table tr:nth-child(1)')[0];
moveCell(row, 0, 3); 
```

[http://jsfiddle.net/2N2rS/3/](http://jsfiddle.net/2N2rS/3/)

我写了这个函数来简化过程。它使用本机表方法。

修改表格单元格的行数 ( `:nth-child(1)`) 和索引，您可以根据需要对它们进行置换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:58:53.013

这可以在纯 javascript 中完成：

1.  获取点击卖出计数；
2.  获取两个单元格的数据，当它们被选中时；
3.  将单元格值替换为相反的值；
4.  通过 ajax 调用在 DB 中存储新值。

现在由您来编写脚本。

# c# - 调试调用 .Net(C#) dll 的 VB6 项目

> ID：15361711
> 
> 赞同：8
> 
> 时间：2013-03-12T12:50:07.417
> 
> 标签：c#, .net, visual-studio-2010, debugging, vb6

我已经被这个问题困扰了几个小时了。我希望有人遇到过类似的问题。

我们使用 VS2010 开发了一个原型 .Net(C#) dll，并且希望能够在 C# 应用程序和 VB6 应用程序中调用这个 dll。

我的问题是：

**是否可以调试调用 .Net dll 的 VB6 应用程序？我收到一条错误消息“*自动化错误系统找不到指定的文件*”**

错误消息表明我的 VB6 应用程序缺少某些东西来查找 .Net dll。

我知道如果 VB6 应用程序已经编译，并且 .exe 已经创建，VB6 将在使用 .exe 时成功调用 .Net dll 功能

然而，重要的是我们可以通过我们的 VB6 应用程序进行调试。不幸的是，调试不允许您跳过实例化 .Net DLL 的类对象的代码行。我似乎无法做到这一点。

注意：我查看了论坛和 MSDN 文档，主要是找到在 .NET 中调用 VB6 dll 的解决方案；不幸的是，这与我们需要做的相反。

注意：我已经注册了编译好的 .Net(C#) 程序集，并在 VB6 项目中引用了它。

然而，我找到了这两个页面，这似乎是我们需要的，但它是调用使用 VS2005 生成的 .NET(c#) dll 的解决方案。当使用 VS2010 生成 .NET(C#) dll 时，这似乎不起作用。

[站点](http://blogs.msdn.com/b/bethmassi/archive/2007/07/03/debugging-hybrid-vb6-net-applications.aspx) [1 站点 2](http://msdn.microsoft.com/en-us/library/aa730840%28v=vs.80%29.aspx#dbughybvb6_topic3)

如果有人可以提出任何建议或指导我到我能得到的地方，那就太好了。

谢谢

**解决方案** 感谢@HansPassant，我找到了解决方案。要调试包含 C# .NET 程序集的 VB6 项目，您需要通过“ *regasm* ”和“ *gacutil* ”注册 .NET dll，然后确保在开始调试之前关闭并重新打开 VB6 应用程序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T14:10:28.777

这不是问题，VB6 使用自己的调试器，不会妨碍任何其他调试器，包括用于 C# 代码的托管调试器。

你从你的 C# 类库项目开始，确保它被选为开始项目。项目 + 属性，调试选项卡。选择“启动外部程序”选项并输入 VB6 IDE 的路径。通常是 c:\program files\microsoft visual studio\vb98\vb6.exe。在要调试的方法上设置断点。

按 F5，VB6 IDE 将开始运行。加载或创建您的 vb6 项目。请注意如何在上一步中添加 .vbp 项目的路径，以便它自动加载您的项目。

像往常一样开始调试您的 vb6 项目。一旦它开始使用您的 [ComVisible] C# 类，您的 C# 程序集就会被加载。当您的 vb6 代码调用该方法时，将触发断点。根据需要来回切换。请注意，您不能单步执行从 vb6 到 C# 代码，您必须设置断点以使调试器停止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T14:14:45.353

啊，以可调试方式从 VB6 使用 .NET 的奇迹。

*   在 VB6 项目编译选项（使用 Make Project 对话框窗口上的 Options 按钮到达）中，选择 Compile to *Native Code*、*No Optimization*和*Create Symbolic Debug Info*选项。然后编译您的 VB6 项目。这些选项允许正确的 VB6 二进制到源映射。
*   转到解决方案的配置属性...调试属性页并更改*启动操作*以启动您的 VB6 可执行文件。
*   在 VS 解决方案资源管理器中，转到 File...Add Existing Item 并导航到包含要调试的 VB6 源代码的文件夹。双击要调试的 VB6 源代码文件，应在 VS 中打开一个源窗口，允许您在 VB6 源代码中设置断点。
*   确保您的 .NET 库具有公共默认构造函数。这是必不可少的。
*   现在还设置您需要的任何 C# 断点。不要进入 .NET 代码 - 这不起作用**。**
*   当您开始使用 VS 进行调试时，您的 VB6 和 C# 断点应该会正常命中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:34:31.723

一种方法是单独调试每个：

*   编译 C# DLL 并将其添加为对 VB6 项目的引用后，可以在 IDE 中调试 VB6 代码。

*   通过编译 VB6 项目并在项目属性中将其用作要运行的可执行文件，可以在 Visual Studio 中使用 VB6 主机调试 DLL。

在某些情况下，这比设置环境以同时调试两者更简单/更快。

这种方法至少需要事先准备好每个工作的框架。

# db2 - db2 错误 sqlcode：-1224

> ID：15361714
> 
> 赞同：0
> 
> 时间：2013-03-12T12:50:17.860
> 
> 标签：db2, sqlcode

有没有人见过这种类型的 pf 错误消息。我找不到关于 sql 代码 -1224 的文档？

DB21034E 该命令被作为 SQL 语句处理，因为它不是有效的命令行处理器命令。在 SQL 处理期间，它返回：

SQLCA 信息

sqlcaid：SQLCA sqlcabc：136 sqlcode：-1224 sqlerrml：0 sqlerrmc：sqlerrp：SQLJRERM sqlerrd：（1）-2143879059（2）0（3）0（4）0（5）0（6）0 sqlwarn：（1） (2) (3) (4) (5) (6) (7) (8) (9) (10) (11) sqlstate: 55032

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:01:26.200

始终尝试检查 IBM 信息中心是否存在此类错误：

[http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.messages.sql.doc/doc/msql01224n.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.messages.sql.doc/doc/msql01224n.html)

我这边的简短评论：

如果可以在您的环境中，重新启动可以解决您的问题。如果它是生产服务器，我建议使用 db2stop ，然后使用 db2start ，这也可能有所帮助

通常，-1224 是来自内存损坏的陷阱。

如果您运行不受防护的功能，请尝试切换到受防护的。另外，请查看您的陷阱文件。

此外，如果您的 JVM 级别无效，也会发生这种情况。确保使用受支持的 jdk 级别 => 移至最新版本

# c# - 排序的动态列表是只读的？

> ID：15361715
> 
> 赞同：4
> 
> 时间：2013-03-12T12:50:19.640
> 
> 标签：c#, asp.net, linq

我有一个动态列表，我尝试对其进行排序，然后根据新的排序顺序更改 id：

```
foreach (Case c in cases)
{
    bool edit = true;

    if (c.IsLocked.HasValue)
        edit = !c.IsLocked.Value;

    eventList.Add(new {
        id = row.ToString(),
        realid = "c" + c.CaseID.ToString(),
        title = c.CaseTitle + "-" + c.Customer.CustomerDescription,
        start = ResolveStartDate(StartDate(c.Schedule.DateFrom.Value.AddSeconds(row))),
        end = ResolveEndDate(StartDate(c.Schedule.DateFrom.Value), c.Schedule.Hours.Value),
        description = c.CaseDescription,
        allDay = false,
        resource = c.Schedule.EmployeID.ToString(),
        editable = edit,
        color = ColorConversion.HexConverter(System.Drawing.Color.FromArgb(c.Color.Value))
    });

    row++;

}

var sortedList = eventList.OrderBy(p => p.title);

for (int i = 0; i < sortedList.Count(); ++i)
{
    sortedList.ElementAt(i).id = i.ToString();
} 
```

但是它在 `sortedList.ElementAt(i).id = i.ToString();`声明它是只读的时候崩溃了？

> 不能将属性或索引器`<>f__AnonymousType4<string, string,string,string,string,string,bool,string,bool,string>.id`分配给——它是只读的

如何更改 ID？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T14:00:24.303

如前所述，您无法更新匿名类型，但是您可以修改您的流程以使用一个查询，该查询首先对项目进行排序，并将项目的索引作为参数包含在`Select`：

```
var query = cases.OrderBy(c => c.CaseTitle + "-" + c.Customer.CustomerDescription)
                 .Select( (c, i) =>
                    new {
                            id = i.ToString(),
                            realid = "c" + c.CaseID.ToString(),
                            title = c.CaseTitle + "-" + c.Customer.CustomerDescription,
                            start = ResolveStartDate(StartDate(c.Schedule.DateFrom.Value.AddSeconds(i))),
                            end = ResolveEndDate(StartDate(c.Schedule.DateFrom.Value), c.Schedule.Hours.Value),
                            description = c.CaseDescription,
                            allDay = false,
                            resource = c.Schedule.EmployeID.ToString(),
                            editable = c.IsLocked.HasValue ? !c.IsLocked.Value : true ,
                            color = ColorConversion.HexConverter(System.Drawing.Color.FromArgb(c.Color.Value))
                        }
                   ); 
```

# c# - 即使 Webclient 抛出异常，也从 Webclient 获取 html

> ID：15361721
> 
> 赞同：0
> 
> 时间：2013-03-12T12:50:35.567
> 
> 标签：c#, webclient, http-status-code-401

我正在使用 Web API，然后我向 webb API 验证自己并提供错误的用户名或密码，站点返回“远程服务器返回错误：（401）未经授权。” 这很好。但是该站点也以 JSON 格式返回详细信息，但我不知道如何访问此信息，然后我收到 401 异常。

有人有线索吗？这是我正在使用的代码：

```
private string Post(string data, string URI)
    {
        string response = string.Empty;
        using (var wc = new WebClient())
        {
            wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
            try
            {
                response = wc.UploadString(URI, data);
            }
            catch (Exception e)
            {
                Console.WriteLine(e);
            }

        }
        return response;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:57:46.183

您应该收到一个[WebException](http://msdn.microsoft.com/de-de/library/system.net.webexception_members%28v=vs.80%29.aspx)。
WebReception 有一个

> 回复

属性，其中应包含您要查找的内容。您也可以检查所有其他属性。

# javascript - 如何更改下面给出的 json 数组？

> ID：15361733
> 
> 赞同：2
> 
> 时间：2013-03-12T12:51:01.877
> 
> 标签：javascript, jquery, json

我有一个以下格式的 JSON 数组：

```
[{"country":"Algeria"},{"country":"Africa"},{"country":"America"},{"country":"Libiya"}] 
```

我需要将其更改如下：

```
{"Algeria","Africa","America","Libiya"} 
```

如何使用 Jquery 或 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:55:43.893

在 JavaScript 中：

```
var myArray = [{"country":"Algeria"},{"country":"Africa"},{"country":"America"},{"country":"Libiya"}];
var myNewArray = [];
for (var item in myArray) {
    var country = myArray[item].country;
    myNewArray.push(country);
}
alert(JSON.stringify(myNewArray)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:59:09.467

你的问题实际上有错误的符号。您想要的最终结果应该是方括号 ( `[]`)，而不是花括号 ( `{}`)。花括号表示对象而不是数组，但您没有使用键值结构，因此您上面的最终结果实际上是无效的。

相反，您似乎想要`["Algeria","Africa",America","Libiya"]`作为最终结果。

假设您的意思是从字面上更改您拥有的数组而不是创建一个新数组并假设您使用的是 JavaScript：

```
var arr = [{"country":"Algeria"},{"country":"Africa"},{"country":"America"},{"country":"Libiya"}], // declare your array upfront (but this could be a `JSON.parse()` call)
    i = 0, // counter
    l = arr.length; // limit/length of array

for (i; i < l; i += 1) {
    arr[i] = arr[i].country; // Replace object with value of country property.
}

// `arr` will now be `["Algeria","Africa",America","Libiya"]` 
```

当然，您可能想要引入一些检查以确保数组的每个元素都有一个调用的属性`country`，以及在重写的数组中处理该属性的某种方法。但我暂时把这个留给你，看看你过得怎么样。如果您的数组一开始就有效，这应该可以工作。

# c# - 检查哪些 .po 文件可用

> ID：15361737
> 
> 赞同：0
> 
> 时间：2013-03-12T12:51:10.133
> 
> 标签：c#, internationalization, monodevelop, translation, gettext

我正在编写一个应用程序，我想为用户提供即时更改语言的能力。我希望该应用程序能够仅提供将语言切换到系统上可用的选项。据我了解，我需要检查安装了哪些“.po”文件。

我正在使用 Monodevelop/Mono 和 Mono.Unix.Catalog.GetString("blah blah") 样式来处理所有可翻译的项目。在 Monodevelop 目录中，我可以找到我提供的“.po”文件，但这不一定与安装在 Windows、Unix 或 Mac 上的系统有关。

看来 Mono.Unix.Catalog 没有为此提供方法，所以我怀疑我可能需要使用 Environment.CurrentDirectory 或 Environment.SystemDirectory 来尝试找到 .po 所在的位置，但似乎在那里太多的变量会影响这一点：

*   是 Win、Mac 还是 Unix？
*   如果是 Unix，是 Ubuntu、SUSE、Vine 等吗？
*   如果不在系统上，是否在用户文件夹中？
*   如果它是一个用户文件夹，该位置在 Win、Mac 和各种 Unix 变体上会有所不同吗？

有没有一种简单的方法来确定系统上哪些“.po”可用？

# php - PHP上传文件大于2gb

> ID：15361747
> 
> 赞同：1
> 
> 时间：2013-03-12T12:51:44.723
> 
> 标签：php, apache, file-upload

我有一个网站，管理员必须上传高清质量的电影。电影大小几乎2GB+

PHP 或 apache 是否支持 2GB 或更大的文件上传？

做这个的最好方式是什么？我应该使用 ajax 上传、swf 上传（uploadify）还是普通表单提交上传？

我正在使用 PHP 5.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:57:37.120

两个 PHP 配置选项控制最大上传大小：`upload_max_filesize`和`post_max_size`. 对于 10 兆字节的文件大小，两者都可以设置为“10M”。

但是，您还需要考虑完成上传所需的时间。PHP 脚本通常会在 30 秒后超时，但在正常的宽带连接上上传一个 10MB 的文件至少需要 3 分钟（请记住，上传速度通常比下载速度慢五倍）。此外，操作或保存上传的图像也可能导致脚本超时。因此，我们需要将 PHP 的`max_input_time`和设置`max_execution_time`为 300（以秒为单位指定 5 分钟）。

这些选项可以在您的服务器的 php.ini 配置文件中设置，以便它们适用于您的所有应用程序。或者，如果您使用的是 Apache，您可以在应用程序的 .htaccess 文件中配置设置：

```
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value max_input_time 300
php_value max_execution_time 300 
```

最后，您可以在 PHP 应用程序中定义约束：

```
ini_set('upload_max_filesize', '10M');
ini_set('post_max_size', '10M');
ini_set('max_input_time', 300);
ini_set('max_execution_time', 300); 
```

PHP还提供了一个`set_time_limit()`函数，所以你不需要`max_execution_time`直接设置。

在您的 PHP 代码中设置选项可能更实用，因为当您的应用程序需要大量上传时，您可以延长执行时间并增加文件大小。其他形式将恢复为默认的 30 秒超时和 2MB 限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:55:27.903

您可能需要增加 Apache 的 conf 中的最大文件上传大小，以及 php.ini 文件中的 post_max_size 和 upload_max_size 指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:00:28.107

如果文件 >=2GB，您可能会达到某些浏览器限制。
此外，上传 2GB 可能需要一些时间（可能超过网络服务器的超时时间）。
如果您的连接中断，您必须重新上传整个文件。

# php - 如何序列化phpseclib？

> ID：15361748
> 
> 赞同：1
> 
> 时间：2013-03-12T12:51:46.330
> 
> 标签：php, serialization, phpseclib

我一直在尝试序列化 phpseclib 连接，因为我正在从 ajax 加载一些 php 页面并且我不想一次又一次地重新连接。

**第 1 页 - 首先定义 SSH2**

```
require("Net/SSH2.php");
session_start();
$ssh = new Net_SSH2 ("localhost");
if ($ssh->login($username, $pass)) {
$_SESSION['obj'] = serialize($ssh);

}else{
echo "Invalid Login !!!";
} 
```

**第 2 页 - 使用反序列化获取存储的会话**

```
session_start();
require("Net/SSH2.php");
$ssh = unserialize($_SESSION['obj']);
echo $ssh->exec('ls'); 
```

我也想输入登录信息，`$_SESSION['obj']`所以每当我在那个 php 页面上时，我只是`$ssh = unserialize($_SESSION['obj']);`然后`$ssh->exec('pwd')`..

是否有解决方法，或者每当我在那个 PHP 页面上时，我是否必须始终连接/登录到 Net/SSH2.php？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:56:10.550

~~根据您拥有的 PHP 版本，您可以尝试为 ssh 连接声明一个静态变量。~~

如果 phpseclib 使用 pfsockopen 它可能能够重用现有的连接 - 但这是一个长期的目标，并且可能需要修改库。

但一般来说，你不能在 PHP 中做你想做的事。脚本完成后，所有打开的套接字都将关闭，因为执行过程终止。您当然不能将它存储在会话变量中 - 一旦 Net_SSH2 对象超出范围，它就会被销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:00:18.867

拥有持久连接的唯一方法是让脚本不断运行，以保持连接打开。这意味着你有一个脚本，它有一个永无止境的`while (true) { ... }`循环，它会打开一个连接并保持它。然后，您需要找到一种与此脚本通信的方法，以使其执行命令。[AMQP](http://www.amqp.org)、[ØMQ](http://zero.mq)、[Gearman](http://gearman.org)、 sockets 和类似的技术可以用于此。

# java - 定义 shouldOverrideUrlLoading 以在所需的应用程序中加载 URL？

> ID：15361749
> 
> 赞同：0
> 
> 时间：2013-03-12T12:51:47.720
> 
> 标签：java, android, webview, android-webview

有没有办法定义 shouldOverrideUrlLoading 以便我可以在特定的外部应用程序中加载 URL。

我在 webview 中显示了一个网络应用程序，我需要在其他视频播放器而不是默认的 android 媒体播放器中从外部加载一些视频文件。

这是当前代码：

```
private class MainWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView webview, String url) {
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setDataAndType(Uri.parse(url), "video/mp4");
            startActivity(i);
            return true;
        }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:56:22.640

您必须改用[onShowCustomView](http://developer.android.com/reference/android/webkit/WebChromeClient.html#onShowCustomView%28android.view.View,%20android.webkit.WebChromeClient.CustomViewCallback%29)。在“HTML5 视频支持”下阅读更多[信息。](http://developer.android.com/reference/android/webkit/WebView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:06:28.977

```
 WebView mWebView;
    mWebView = (WebView) findViewById(R.id.webView1);      
    mWebView.setWebViewClient(new GeoWebViewClient());
    mWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.getSettings().setJavaScriptEnabled(true);       
    mWebView.setWebChromeClient(new GeoWebChromeClient()); 
    mWebView.loadUrl("http://.....");

     public class GeoWebViewClient extends WebViewClient {
   @Override    
    public boolean shouldOverrideUrlLoading(WebView view, String url) { 
   view.loadUrl(url);             
    return true;    
    }   
   } 
```

> 请检查以下代码一次

# c# - 截屏：Windows Server 窗体中带有 Web 浏览器控件的 WinForms 应用程序

> ID：15361760
> 
> 赞同：0
> 
> 时间：2013-03-12T12:52:12.353
> 
> 标签：c#, winforms, windows-server-2008

我正在使用以下代码来捕获`Form`屏幕截图：

```
 this.TopMost = true;
            this.FormBorderStyle = FormBorderStyle.None;
            this.WindowState = FormWindowState.Maximized;
            this.Activate();
            Application.DoEvents();

            Bitmap screenShotBMP = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height, PixelFormat.Format32bppArgb);
            Graphics screenShotGraphics = Graphics.FromImage(screenShotBMP);
            screenShotGraphics.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy);
            screenShotBMP.Save(imagePath, ImageFormat.Gif);
            screenShotGraphics.Dispose();
            screenShotBMP.Dispose();

            this.TopMost = false;
            this.FormBorderStyle = FormBorderStyle.Sizable;
            this.WindowState = FormWindowState.Minimized; 
```

当我登录到服务器时，它工作正常（我可以看到生成的屏幕截图）但是当它被锁定时，该行：

```
 screenShotGraphics.CopyFromScreen(Screen.PrimaryScreen.Bounds.X, Screen.PrimaryScreen.Bounds.Y, 0, 0, Screen.PrimaryScreen.Bounds.Size, CopyPixelOperation.SourceCopy); 
```

> 给出错误“句柄无效”。

我才知道这是因为没有人登录时没有桌面。所以任何人都可以让我知道任何替代方案吗？

我有一个 WinForms 应用程序，计划每 5 分钟运行一次，当它运行时，我必须截取`Form`.

请让我知道一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:10:21.133

这是不可能的。当工作站被锁定时，Winlogon 切换到安全桌面。在这种情况下，就像您说的那样，没有可以拍照的桌面。

甚至管理员都没有访问安全桌面的权限，因此即使您想拍照也无法*拍照*。解决您在此处运行的安全限制的唯一可能方法是将应用程序重写为服务，以便您获得对安全桌面的访问权限，但随后您将遇到另一组安全限制：即，该服务不允许以任何方式与用户交互，因此没有“桌面”。

目前还不清楚在这种情况下您甚至*期望*发生什么。如果没有桌面可以拍照，你*希望*它拍什么？

最重要的是，Windows 是一个多用户操作系统，并且已经使用了几十年。您必须放弃这种只有一个“桌面”并且每个人都拥有对所有内容的完全访问权限的 16 位概念模型。

除了定期截屏之外，还有其他更好的方法来监控工作站上发生的事情……甚至可以实际工作的方法。我无法提出一般性建议，因为这取决于您要监控的具体内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:58:35.083

我刚刚测试了 PrintWindow api，它在我的桌面锁定的情况下工作：[C# PrintWindow 返回一个黑色图像](https://stackoverflow.com/q/6827066/1429439)

# android - Android：有没有办法为 response = httpclient.execute(httppost); 设置超时

> ID：15361761
> 
> 赞同：0
> 
> 时间：2013-03-12T12:52:17.017
> 
> 标签：android

我正在尝试通过网络在线程上加载信息。当没有互联网时，它会冻结很长时间，然后才会引发异常或只是冻结。

有没有办法为 // FREEZES HERE 设置超时，或者在没有互联网时需要很长时间才能通过异常？他们是一种设置超时的方法`response = httpclient.execute(httppost);`吗？

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost  httppost = new HttpPost("http://besttechsolutions.biz/projects/bookclub/getevents.php");
// FREEZES HERE or takes a long time to through exception when there is no internet
response = httpclient.execute(httppost);
responseBody = EntityUtils.toString(response.getEntity()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:30:43.050

试试下面的。

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 30000);
HttpConnectionParams.setSoTimeout(httpParameters, 30000);

if(null == httpClient) 
httpClient = new DefaultHttpClient(httpParameters); 
```

上面的代码一般为httpClient设置了一个默认的超时时间。要检查互联网访问，请参阅 Nomand 发布的链接。

# xml - 读/写和创建本地xml文件

> ID：15361763
> 
> 赞同：0
> 
> 时间：2013-03-12T12:52:17.877
> 
> 标签：xml, blackberry, file-io, read-write

我有一个`1.xml`这样的xml 名称

```
<?xml version="1.0" encoding="utf-8"?>
<domains>
<domain url="www.google.com" id="123"/>
<domain url="www.yahoo.com" id="123"/></domains> 
```

现在我想阅读这个`xml`文件。我已将此 xml 放入`res>xml`文件夹中。我怎样才能读取这个 xml 文件？另外我想在这个xml中添加一些新的url？那么有可能以编程方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:20:21.207

要从 res 文件夹中的 XML 文件读取值，请使用以下代码 -

```
try {
    String jsPath = "1.xml"; 
    InputStream input = getClass().getResourceAsStream(jsPath);
    byte [] content = IOUtilities.streamToBytes(input); 
    String contentAsString = new String(content);
    //Dialog.alert(contentAsString);
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    XMLDOMUtil xml = new XMLDOMUtil();
    ByteArrayInputStream bis = new ByteArrayInputStream(contentAsString.getBytes("UTF-8"));
    Document document = builder.parse(bis);
    NodeList listOfPersons = document.getElementsByTagName("domains");
    NodeList listOfPersons1 = document.getElementsByTagName("domain");
    //int totalPersons = listOfPersons1.getLength();
   // Dialog.alert(totalPersons+"");
    for(int s=0; s<listOfPersons1.getLength() ; s++)
        {
        Node firstPersonNode = listOfPersons1.item(s);
        Element firstPersonElement = (Element)firstPersonNode;
        Dialog.alert(firstPersonElement.getAttribute( "url")+"---"+firstPersonElement.getAttribute( "id" ));
        }

} catch (IOException e) {
    e.printStackTrace();
} catch (SAXException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (ParserConfigurationException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

XMLDOMUtil.java 在下面给出 -

```
public class XMLDOMUtil {
        // go thru the list of childs and find the text associated by the tag
        public String getNodeTextByTag(Node parentNode, String name) {
                Node node = parentNode.getFirstChild();
                Text text = null;
                String retStr = null;
                try {
                        while (node != null) {
                                if (node.getNodeName().equals(name)) {
                                        text = (Text) node.getFirstChild();
                                        retStr = text.getData();
                                        break;
                                }
                                node = node.getNextSibling();
                        }
                } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }
                return retStr;
        }
        public Node getNodeByTag(Node parentNode, String name) {
                Node node = parentNode.getFirstChild();
                Node retNode = null;
                while (node != null) {
                        if (node.getNodeName().equals(name)) {
                                retNode = node;
                                break;
                        }
                        node = node.getNextSibling();
                }
                return retNode;
        }
        public Node getNextSiblingNodeByTag(Node siblingNode, String name) {
                Node retNode = null;
                siblingNode = siblingNode.getNextSibling();
                while (siblingNode != null) {
                        if (siblingNode.getNodeName().equals(name)) {
                                retNode = siblingNode;
                                break;
                        }
                        siblingNode = siblingNode.getNextSibling();
                }
                return retNode;
        }
} 
```

# android - Android：使用 fileinputstream 进入正确的状态

> ID：15361764
> 
> 赞同：0
> 
> 时间：2013-03-12T12:52:18.477
> 
> 标签：android, if-statement, fileinputstream, fileoutputstream

我面临一个不同的问题，见下文是我的应用程序的代码，它可以读取存储的文件并必须据此检查条件。

我的输入是“开”和“关”

```
String val="";
final ToggleButton start = (ToggleButton) findViewById(R.id.startup);
        FileInputStream fileos;
        try {
            fileos = openFileInput("startup");
            byte[] input = new byte[fileos.available()];
            while(fileos.read(input) != -1){
                val += new String(input);
            }
            if(val.toString() == "ON"){
                start.setChecked(true);
            }else if(val.toString() == "OFF"){
                start.setChecked(false);
            }else{
                start.setChecked(true);
            }
            fileos.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

上面的代码正确获取输出“ON”或“OFF”，但它总是进入 else 条件

```
else{ start.setChecked(true); } 
```

我被困在这里，请帮我一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:56:22.240

android是基于java的，在java中你不能使用“==”来比较两个字符串，你应该替换

```
val.toString() == "ON" 
```

到

```
"ON".equals(val.toString()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:59:51.120

这段代码实际上有两个大问题。一是您必须*始终*`equals()`使用该方法来比较`String`对象——运算符仅适用于非常有限的情况。*`==`*

 *第二个更微妙，不会一直中断。当您将数据读入`input`时，尽管您使用的是循环，但代码仅在一次读取所有数据时才有效。这是因为您正在`String`从整个数组中创建一个，即使整个数组不包含有效数据。正确的循环如下所示：

```
int count;
while((count = fileos.read(input)) != -1){
    val += new String(input, 0, count);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:55:08.597

用于`String.equals()`比较`String`s。没用==

```
val.toString().equals("ON") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:56:12.363

您必须使用 .equals() 比较字符串

```
if(val.equals("ON")){
      start.setChecked(true);
}else if(val.equals("OFF")){
     start.setChecked(false);
}else{
    start.setChecked(true);
} 
```*

# linux - 命令行在一个目录中合并多个文件？

> ID：15361765
> 
> 赞同：1
> 
> 时间：2013-03-12T12:52:18.727
> 
> 标签：linux, clearcase, cleartool

我一直在运行以下命令以从另一个分支合并到我的 clearcase：

`cleartool merge -to file.C -ver /main/otherBranch/LATEST`

但是当我在一个特定的目录中并且我想合并该目录中已更改的任何内容时，我该怎么做？一方面，什么 cleartool 命令会告诉我哪些文件需要合并，然后`cleartool merge -to * -ver /main/otherBranch/LATEST`在该目录中本质上会做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:55:56.630

递归合并的常用命令是[`cleartool findmerge`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_findmerge.htm).

另见“[准备合并](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_proj.doc/t_borg_prepngmrg.htm)”。

例如：

> 在 Windows 系统上，对于当前目录子树，将当前视图中可见的版本与另一个分支上的版本进行比较，并执行任何所需的合并。生成的日志文件用数字符号 (#) 注释所有成功的合并。

```
cleartool findmerge . -fversion \main\rel2_bugfix\LATEST -merge 
```

结果：

```
Needs Merge ".\util.c" [to \main\3 from \main\rel2_bugfix\2
base \main\rel2_bugfix\1]
Comment for all listed objects:
Merge from rel2_bugfix branch.
Checked out "util.c" from version "\main\3".
********************************
<<< file 1: M:\view1\george_fig_hw\src\util.c@@\main\rel2_bugfix\1
>> file 2: .\util.c@@\main\rel2_bugfix\2
>> file 3: .\util.c
********************************
-------[changed 7-8 file 1]--------|------[changed to 7-12 file 3]-----
    if (user_env)                  | if (user_env) {
      return user_env;             | if ( strcmp(user_env,"root") == + .
.
.
Moved contributor ".\util.c" to ".\util.c.contrib".
Output of merge is in ".\util.c".
Recorded merge of ".\util.c".
A 'findmerge' log has been written to "findmerge.log.24-Mar-99.13.23.05" 
```

# python - 配置文件中的语法错误 - 未定义未来功能 unicode_literals（Python、Django、Sphinx）

> ID：15361768
> 
> 赞同：1
> 
> 时间：2013-03-12T12:52:28.913
> 
> 标签：python, django, windows, python-sphinx, easy-install

我正在尝试 Django。我打算阅读它的文档。它不存在，我必须建造它。阅读`Readme`in`Django-1.5/doc`文件夹，下载 Sphinx 文档 Python 模块。使用 easy_install 安装它 - 安装到 Python2.5 没关系。只需要生成文档，可以使用Py2.5。我`make html`在`/doc`文件夹中这样做，我得到了这个：

```
Running Sphinx v1.1.3

Configuration error:
There is a syntax error in your configuration file: future feature unicode_literals is not defined (conf.py, line 14) 
```

conf.py 是 Django-1.5/doc 文件夹中的文件。第 14 行是这样的：

`from __future__ import unicode_literals`

我搜索了原因，在某个页面上我看到对 2.5 的支持在**未来**被放弃了，或者我不知道我真的无法理解什么。所以我`easy_install`把 Sphinx 编到 Python 2.7，希望能解决版本问题。

然后我再做`make html`一次，在 Django 的 /doc 文件夹中，我得到与上述相同的构建错误。如何使`make`命令从安装的 Python 2.7 Sphinx 版本中进行制作？

我只想生成该死的文档。我喜欢 Python 和一切，但所有这些软件包的安装在 Windows 上都很痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:06:50.983

Sphinx 生成文档，其中一部分由源代码制成，可以作为自省/部分执行的目标。

As`__future__`不是一个模块（除非它是第一条指令，否则不能“导入”它）。

所以我不认为它回答了你的问题，但它是合乎逻辑的，也是一件好事，因为它是一种支持 python 3k 并阻止使用未维护的 Python [1] 旧版本的方法。

你很幸运，一些好人已经为你编译了文档：

这里是最新的主干文档： http: [//media.readthedocs.org/pdf/django/latest/django.pdf](http://media.readthedocs.org/pdf/django/latest/django.pdf)

这里是 1.5 版本的 pdf： http: [//media.readthedocs.org/pdf/django/1.5.x/django.pdf](http://media.readthedocs.org/pdf/django/1.5.x/django.pdf)

如果您想要 html 版本，则必须使用离线阅读器： http: [//django.readthedocs.org/en/1.5.x/](http://django.readthedocs.org/en/1.5.x/)

希望它能解决你的问题，即使它没有回答你的问题。

我想你的生产环境不会是 windows。大多数 Windows 附加 django 的开发人员将使用 cygwin 或虚拟机来工作。Django 和 python 提供了很棒的 CLI 工具。如果您生活在 CLI 的地狱中，那些 CLI 工具就不会很棒。

注意：CLI -> 命令行界面。

1.  [http://www.python.org/getit/releases/2.5.6/](http://www.python.org/getit/releases/2.5.6/) : > **在当前的发布策略下，Python 2.5 中的安全问题将不再修复。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:23:59.557

Python 2.5 不接受`from __future__ import unicode_literals`. 在 Python 提示符下键入`help("__future__")`以查看文档。

> 如何使 make 命令从 Python 2.7 安装的 Sphinx 版本进行制作？

您可以尝试指定 PYTHON 选项，例如，在 bash 中：

```
$ PYTHON=python2.7 make html 
```

在 Windows 上可能是：

```
T:\> set PYTHON=C:\path\to\Python27\python.exe
T:\> make html 
```

您可以使用`setx`永久设置变量。

* * *

您无需构建文档即可试用 Django。它可以[在线获得，或者您可以使用](https://docs.djangoproject.com/en/1.5/)[@christophe31 提供的链接](https://stackoverflow.com/a/15364865/4279)下载它。

[Django 1.5 放弃了对 Python 2.5 的支持](https://docs.djangoproject.com/en/dev/releases/1.5/#python-compatibility)。

# vb.net - 为解决方案中的所有项目设置构建后操作

> ID：15361783
> 
> 赞同：4
> 
> 时间：2013-03-12T12:53:12.203
> 
> 标签：vb.net, visual-studio, visual-studio-2012, managed, post-build-event

有没有办法为整个解决方案中的所有项目设置和/或更改构建后事件/操作？我有一些解决方案，其中最多包含 50 个项目，除了 2 个项目外，它们都需要相同的后期构建操作。当我有一个新的解决方案或者我必须更改现有解决方案的所有项目的构建后操作时，我必须运行所有项目设置，转到编译选项卡页面并编辑构建后操作。

能够为整个解决方案设置后期构建操作的任何其他解决方案也将受到赞赏。也许是 MS Build，但我在那里没有经验......

使用 Visual Studio 2012 和 VB.Net 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:04:19.100

您可以创建一个简单的应用程序，它可以接收多个 .csproj 文件和一个简单的多行文本框，您可以在其中粘贴您的后期构建操作。

因此，在 1 个项目中编辑后期构建。在记事本中打开项目文件，查找`<PostBuildEvent>...</PostBuildEvent>`并将其粘贴到多行文本框中，然后遍历所有项目文件并将此 xml 元素添加到其中。

![在此处输入图像描述](../Images/27eccdf4f2f3b4d5a59de43cf46cd23c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:11:15.720

我使用 Visual Studio 宏执行此操作。

在宏编辑器 ( `Alt`+ `F11`) 中有 EvironmentEvents 文件。
这里我使用`BuildEvents_OnBuildProjConfigDone`事件。
我一直使用它来将程序集复制到我的工作文件夹中。

例子：

```
Private targetPath As String = "C:\..."  

Private Sub BuildEvents_OnBuildProjConfigDone(ByVal ProjectName As String, ByVal ProjectConfig As String, ByVal Platform As String, ByVal SolutionConfig As String, ByVal Success As Boolean) Handles BuildEvents.OnBuildProjConfigDone
    On Error GoTo ext
    If Not Success Then Exit Sub

    'Absolute path to assembly
    Dim tar = targetPath
    Dim project As Project = DTE.Solution.Projects.Item(ProjectName)
    Dim projectFolder As String = Path.GetDirectoryName(project.FileName)
    Dim config As EnvDTE.Configuration = project.ConfigurationManager.ActiveConfiguration
    Dim outputPath As String = CStr(config.Properties.Item("OutputPath").Value)
    Dim assemblyName As String = CStr(project.Properties.Item("AssemblyName").Value)
    Dim assemblyFileName As String = CStr(project.Properties.Item("OutputFileName").Value)
    Dim src As String = Path.Combine(Path.Combine(projectFolder, outputPath), assemblyFileName)

    'Copy files to working folder
    On Error GoTo err
    Dim dst As String

    dst = Path.Combine(tar, assemblyFileName)
    DTE.ToolWindows.OutputWindow.ActivePane.OutputString(outTag + assemblyName + " -> " + dst + vbCrLf)
    File.Copy(src, dst, True)

    src = src.Substring(0, src.Length - 3) + "pdb"
    dst = dst.Substring(0, dst.Length - 3) + "pdb"
    DTE.ToolWindows.OutputWindow.ActivePane.OutputString(outTag + assemblyName + " -> " + dst + vbCrLf)
    File.Copy(src, dst, True)

    Exit Sub

err:
    DTE.ToolWindows.OutputWindow.ActivePane.OutputString(outTag + Err.Description + vbCrLf)
ext:
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:54:11.627

Are you aware that you can select multiple projects in Solution Explorer (using Ctrl-pick or Shift-pick), then change all projects at once?

# database - 我可以有没有 SID 的 oracle 数据库服务名称吗？

> ID：15361785
> 
> 赞同：0
> 
> 时间：2013-03-12T12:53:12.740
> 
> 标签：database, oracle, sid

通常，Oracle 数据库 SID 包含在服务名称中。例如：SID：orcl & 服务名称：orcl.mycomp.com

因此，可以在不包括 SID 的情况下定义服务名称 例如：`mydb.mycomp.com`对于数据库 SID 是`orcl`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:33:57.303

如果您的 SID 为 orcl，则可以通过在 orcl 数据库中设置 Oracle 系统参数 SERVICE_NAMES 来将服务名称设置为 mydb.mycomp.com：

```
ALTER SYSTEM SET service_names = 'mydb.mycomp.com'; 
```

或者，如果您还想保留 orcl 作为服务名称：

```
ALTER SYSTEM SET service_names = 'orcl,mydb.mycomp.com'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:41:48.173

SID 是数据库的标识符，但 service_names 是它提供的服务的名称，可以是功能性的而不是技术性的。

因此，您可能有一个提供发票服务、销售服务、消息服务并适当设置 service_name 的数据库。这样做的好处是侦听器可以根据请求的服务选择要连接的适当数据库，并且可以从多个数据库（通过复制）获得单个服务。

您还可以将服务从一个数据库移动到另一个数据库，并通过 v$session 和 v$sql 监控服务活动。

也看看这个：[http ://www.ardentperf.com/pub/services-schneider07.pdf](http://www.ardentperf.com/pub/services-schneider07.pdf)

# mule - 是否存在发送 JMS 消息而不覆盖应返回的有效负载的 Mule 习惯用法？

> ID：15361786
> 
> 赞同：0
> 
> 时间：2013-03-12T12:53:16.260
> 
> 标签：mule

我想在处理 REST 请求的开始和结束时发送一条 JMS 消息。我可以做这样的事情：

```
<set-variable variableName="savedPayload" value="#[payload]" doc:name="Variable" />
<scripting:component doc:name="Groovy">
    <scripting:script engine="Groovy">
        <scripting:text><![CDATA[
            '{"event" : "TRY"}'
        ]]></scripting:text>
    </scripting:script>
</scripting:component>
<jms:outbound-endpoint queue="event.detail" connector-ref="jmsConnector" />
<expression-transformer evaluator="groovy" expression="savedPayload" /> 
```

本质上，JMS 将仅用于记录进入和退出（成功或失败），同时保留保存的消息，上面的代码使用变量来实现。在 Mule 流程中执行此操作的更短、更惯用的方法是什么？

编辑：

换句话说，有没有一种方法可以发送带有有效负载的出站消息，而无需挂起响应有效负载所需的保存/恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:12:49.923

您可以使用`Async`范围。它将在不同的分支中异步执行您的消息处理器，您不必担心保存/恢复有效负载。

```
<async>
    <scripting:component doc:name="Groovy">
      <scripting:script engine="Groovy">
        <scripting:text><![CDATA[
            '{"event" : "TRY"}'
        ]]></scripting:text>
      </scripting:script>
   </scripting:component>
  <jms:outbound-endpoint queue="event.detail" connector-ref="jmsConnector" />
</async> 
```

有关异步范围的更多详细信息：http: [//www.mulesoft.org/documentation/display/current/Async+Scope+Reference](http://www.mulesoft.org/documentation/display/current/Async+Scope+Reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:27:18.100

尝试使用 Wire Tap 路由器。通过这种方式，您可以将您的 paylaod 传递到另一个通道，您可以在其中修改或出站它，而不会干扰您的主通道。 [骡路由器指南](http://www.mulesoft.org/documentation-3.2/display/MULE2USER/Inbound+Routers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T06:31:44.133

最好的选择是**消息丰富**器：- [https://developer.mulesoft.com/docs/display/current/Message+Enricher](https://developer.mulesoft.com/docs/display/current/Message+Enricher)
消息丰富器组件不会干扰现有的有效负载，您可以在其中设置任何内容......它将不影响有效载荷

# android - 如何使用 facebook sdk 在 Android 手机上登录？（错误= applicationID 为空）

> ID：15361791
> 
> 赞同：0
> 
> 时间：2013-03-12T12:53:24.890
> 
> 标签：android, facebook, facebook-android-sdk

我无法弄清楚为什么我不断收到空指针异常（“applicationID 不能为空”）。我的代码看起来几乎与此相同。我唯一不使用的部分是“欢迎文字”

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

我在 Facebook 开发人员页面上设置了一个应用程序，然后按照 Facebook 教程中的说明将清单中的 ID 定义为元数据。更具体地说，我通过包含对我的字符串 (strings/appID) 的引用来定义应用程序，并且在 strings.xml 中，我实际上定义了字符串（非常长的数字）。我很确定这部分是正确的！

根据本教程的建议，我还在我自己的应用程序清单中添加了对“LoginActivity”类（位于 Facebook SD 中）的引用

我需要在任何地方将 applicationID 传递给 Session 吗？这是我能想到的最后一件事，但不幸的是我没有成功

任何帮助将不胜感激。我真的不知道还有什么要更改的，所以我的应用程序可以识别 applicationID！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:55:40.523

我有类似的问题。不要将**appId**直接放在 manifest 中，此处仅引用**@strings**，并将 id 放在**@strings**中。清单中的大整数存在问题，**appId**看起来像大整数。

# exception-handling - Coldfusion：如何处理 cfftp 异常

> ID：15361796
> 
> 赞同：0
> 
> 时间：2013-03-12T12:53:49.677
> 
> 标签：exception-handling, coldfusion, ftp

我正在使用 Coldfusion 版本：8。我需要处理 cfftp 异常，它处理无效凭据、连接超时、没有上传权限、没有删除权限。Coldfusion中cfftp标签的确切定义的运行时异常是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:13:53.193

尝试使用`cftry`标签：

```
<cftry>

FTP code here.

    <cfcatch type="exception type1">
        Add exception processing code here.
    </cfcatch>

    <cfcatch type="exception type2">
        Add exception processing code here.
    </cfcatch>

    <cfcatch type="Any">
        Add exception processing code appropriate for all other exceptions here.
    </cfcatch>

</cftry> 
```

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Errors_13.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Errors_13.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:14:34.307

如果您的请求由目标网络服务器提供服务，则异常处理不会帮助您。只有在尝试通过 ColdFusion 发送请求时发生意外情况时才会抛出异常，即传出防火墙阻止您的请求或任何其他类型的连接问题。

您唯一需要的是在调用标记后始终生成**的 CFHTTP 结构变量。**该结构包含与实际 HTTP 响应相关的所有数据。`<cftry>/<cfcatch>`（但仍然建议保留请求。）

这是一个请求 Tomcat/Railo 上不存在的网站（404 Not Found）的示例：

![CFHTTP 结果示例](../Images/b81a849fc1a750086330537713148bd4.png)

# java - 多键输入

> ID：15361797
> 
> 赞同：0
> 
> 时间：2013-03-12T12:53:55.680
> 
> 标签：java, input, key

我有一个 2 人游戏，一个玩家使用 WASD，一个使用箭头键。我不知道如何一次允许多个键。这是我的代码：

```
List keyArray = new ArrayList();

    // Red guy input.
    if (e.getKeyCode() == 37) { // left key

        new LoadRedCharacter("leftrightfootred.gif");

        int x = Frame.redCharacterLabel.getX();
        int y = Frame.redCharacterLabel.getY();
        if (x < 0) {
            Frame.redHealthLabel.setLocation(x - 13, y - 15);
            Frame.redCharacterLabel.setLocation(x + 1, y);
            ResetEntities.redCharacterObj.setLocation(x + 1, y);
        } else {
            Frame.redHealthLabel.setLocation(x - 13, y - 15);
            Frame.redCharacterLabel.setLocation(x - 2, y);
            ResetEntities.redCharacterObj.setLocation(x - 2, y);
        }
        keyArray.add(37);
        System.out.println("array" + keyArray);
        Frame.frame.repaint();
        checkHitBox();
    } 
```

我也有蓝色字符左移的代码。然后我有这个：

```
 // Multi key input
    if (keyArray.contains(37) && keyArray.contains(65)) {
        System.out.print("array contains 37 and 65");
    } 
```

为了测试它。然而它不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:07:15.630

您可以采用多线程方法。有一个只关心红色键的线程和另一个只关心蓝色键的线程。如果您对共享变量使用同步，它们各自独立运行并且不应相互干扰。

# android - android.os.NetworkOnMainThreadException 当我使用 AsyncTask 和 HTTPS

> ID：15361804
> 
> 赞同：1
> 
> 时间：2013-03-12T12:54:16.180
> 
> 标签：android, android-asynctask, websocket

我正在使用**AsyncTask**向服务器发送一些消息。此 AsynTask**定义在**与主活动类 不同的类 ( **CommTask.java ) 中。****使用的套接字**，来自 weberknecht 的 websocket，**是在 AsyncTask 的 doInBackground**方法中创建的，我在 CommTask.java 中有一个**公共方法 (SendDataToServer)，通过 CommTask.java**类的实例**在主要活动**中使用.

在使用 CommTask 的公共方法之前，我在主活动中初始化实例：

```
commTask = new CommTask(serverIpAddress, socket, textStatus);
commTask.execute(); 
```

当我有数据要发送时，我会打电话给：

```
commTask.SendDataToServer(...); 
```

当它用于主要活动时，来自 CommTask.java 的公共方法和套接字使用 http 协议

```
socket = new SocketIO("http://"+this.serverIpAddress+":3000/"); 
```

没有例外，但是当它使用 https

```
 socket = new SocketIO("https://"+this.serverIpAddress+":3000/"); 
```

**android.os.NetworkOnMainThreadException**出现。

任何的想法？为什么会发生这种情况？

如果您需要查看代码，请参阅以下内容：

[https://github.com/Javi44/LocAALTOn/tree/WebSockets-Gottox/src/com/android/localton](https://github.com/Javi44/LocAALTOn/tree/WebSockets-Gottox/src/com/android/locaalton)

编辑：

完整的错误堆栈在这里：

```
03-12 15:14:36.090: W/System.err(27088): android.os.NetworkOnMainThreadException
03-12 15:14:36.100: W/System.err(27088):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
03-12 15:14:36.100: W/System.err(27088):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLOutputStream.write(OpenSSLSocketImpl.java:686)
03-12 15:14:36.100: W/System.err(27088):    at java.io.BufferedOutputStream.flushInternal(BufferedOutputStream.java:185)
03-12 15:14:36.100: W/System.err(27088):    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:85)
03-12 15:14:36.100: W/System.err(27088):    at de.roderick.weberknecht.WebSocketConnection.send(WebSocketConnection.java:165)
03-12 15:14:36.100: W/System.err(27088):    at io.socket.WebsocketTransport.send(WebsocketTransport.java:137)
03-12 15:14:36.100: W/System.err(27088):    at io.socket.IOConnection.sendPlain(IOConnection.java:452)
03-12 15:14:36.100: W/System.err(27088):    at io.socket.IOConnection.emit(IOConnection.java:825)
03-12 15:14:36.100: W/System.err(27088):    at io.socket.SocketIO.emit(SocketIO.java:236)
03-12 15:14:36.100: W/System.err(27088):    at com.android.locaalton.CommTask.SendDataToServer(CommTask.java:137)
03-12 15:14:36.105: W/System.err(27088):    at com.android.locaalton.LocAALTOnActivity$2.onClick(LocAALTOnActivity.java:200)
03-12 15:14:36.105: W/System.err(27088):    at android.view.View.performClick(View.java:4211)
03-12 15:14:36.105: W/System.err(27088):    at android.view.View$PerformClick.run(View.java:17267)
03-12 15:14:36.105: W/System.err(27088):    at android.os.Handler.handleCallback(Handler.java:615)
03-12 15:14:36.105: W/System.err(27088):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 15:14:36.105: W/System.err(27088):    at android.os.Looper.loop(Looper.java:137)
03-12 15:14:36.105: W/System.err(27088):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-12 15:14:36.105: W/System.err(27088):    at java.lang.reflect.Method.invokeNative(Native Method)
03-12 15:14:36.105: W/System.err(27088):    at java.lang.reflect.Method.invoke(Method.java:511)
03-12 15:14:36.105: W/System.err(27088):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-12 15:14:36.105: W/System.err(27088):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-12 15:14:36.105: W/System.err(27088):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:29:56.540

放

```
if (Integer.valueOf(android.os.Build.VERSION.SDK_INT) >= 9) {
    try {
        // StrictMode.setThreadPolicy(StrictMode.ThreadPolicy.LAX);
           Class<?> strictModeClass = Class.forName("android.os.StrictMode", true, Thread.currentThread()
                        .getContextClassLoader());
           Class<?> threadPolicyClass = Class.forName("android.os.StrictMode$ThreadPolicy", true, Thread.currentThread()
                        .getContextClassLoader());
           Field laxField = threadPolicyClass.getField("LAX");
           Method setThreadPolicyMethod = strictModeClass.getMethod("setThreadPolicy", threadPolicyClass);
                setThreadPolicyMethod.invoke(strictModeClass, laxField.get(null));
    } 
    catch (Exception e) { }
} 
```

在您的**onStart()**方法中（或在您的**AsyncTask 执行**之前），它会解决！

[**编辑**]更多解释：

来自谷歌的文档：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:30:39.203

在这里试试我的答案，

[https://stackoverflow.com/a/9104893/557179](https://stackoverflow.com/a/9104893/557179)

您的问题是网络请求是在主线程上完成的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:17:36.717

> 任何的想法？为什么会发生这种情况？

堆栈跟踪表明您没有做您声称正在做的事情。您没有使用`AsyncTask`. 相反，从一个`onClick()`方法中，您正在调用一个类的静态`SendDataToServer()`方法`CommTask`，而该静态方法正在执行网络 I/O。由于`onClick()`将在主应用程序线程上调用，并且由于您没有使用`AsyncTask`任何其他后台线程来完成这项工作，`SendDataToServer()`并且它的网络 I/O 正在主应用程序线程上进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:59:20.757

```
"and I have a public method in the CommTask.java, that is used in 
the main activity through an instance from the class CommTask.java" 
```

向我建议您错误地使用了 AsyncTask。您是否使用正确的`.execute`方法启动它？

[这](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)是一篇关于这个主题的合理文章。如果您需要更多帮助，请告诉我，因为没有太多工作要做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T13:04:24.130

可能不是您的问题，但您是否通过了证书？

[http://developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html](http://developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html)

[在 Android 上接受 HTTPs 证书](https://stackoverflow.com/questions/2012497/accepting-a-certificate-for-https-on-android)

# java - 使用 Apache CXF 通过 Web 服务下载文件

> ID：15361807
> 
> 赞同：1
> 
> 时间：2013-03-12T12:54:19.807
> 
> 标签：java, web-services, soap, cxf, soapui

我尝试开发将文件从服务器发送到客户端的 Web 服务。我使用 Apache CXF 开发 Web 服务。应用程序是基于 Spring 的。首先我尝试编写简单的测试代码：

应用程序上下文.xml

```
<import resource="classpath:META-INF/cxf/cxf.xml"/>
<import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>

<bean class="com.llth.paymentgateway.webservice.PaymentGatewayReportingWebServiceImpl" id="paymentGatewayReportingWebService"/>

<jaxws:endpoint id="reportingWebService" implementor="#paymentGatewayReportingWebService" address="/ReportingWebService">
    <jaxws:properties>
        <entry key="mtom-enabled" value="true"/>
    </jaxws:properties>
</jaxws:endpoint> 
```

PaymentGatewayReportingWebService.java Web 服务接口

```
@WebService
@SOAPBinding(style = SOAPBinding.Style.RPC)
public interface PaymentGatewayReportingWebService {

    @WebMethod(operationName = "downloadFile")
    public DataHandler downloadFile(String fileName);

} 
```

PaymentGatewayReportingWebServiceImpl.java 实现 PaymentGatewayReportingWebService 接口

```
@WebService(endpointInterface = "com.llth.paymentgateway.webservice.PaymentGatewayReportingWebService")
public class PaymentGatewayReportingWebServiceImpl implements PaymentGatewayReportingWebService {

    @Override
    @XmlMimeType("application/octet-stream")
    public DataHandler downloadFile(String fileName) {
        FileDataSource dataSource = new FileDataSource(fileName);

        return new DataHandler(dataSource);
    }
} 
```

当我通过 soapUI 导入和执行 Web 服务方法时，我收到以下响应（从 RAW 选项卡复制）

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: multipart/related; type="application/xop+xml"; boundary="uuid:9f003136-a7e0-4634-8032-51c1ba701776"; start="<root.message@cxf.apache.org>"; start-info="text/xml";charset=UTF-8
Transfer-Encoding: chunked
Date: Tue, 12 Mar 2013 12:35:06 GMT

--uuid:9f003136-a7e0-4634-8032-51c1ba701776
Content-Type: application/xop+xml; charset=UTF-8; type="text/xml";
Content-Transfer-Encoding: binary
Content-ID: <root.message@cxf.apache.org>

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ns1:downloadFileResponse xmlns:ns1="http://webservice.paymentgateway.llth.com/"><return><xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:c0836641-6f5f-46ac-9e01-d89eaceafe49-1@cxf.apache.org"/></return></ns1:downloadFileResponse></soap:Body></soap:Envelope>
--uuid:9f003136-a7e0-4634-8032-51c1ba701776
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-ID: <c0836641-6f5f-46ac-9e01-d89eaceafe49-1@cxf.apache.org>

яШяб'«Exif
and some binary data here 
```

soapUI 不下载任何东西。我不知道一切是否正确。soapUI 应该开始下载文件吗？如果soapUI 应该下载该文件，那么是有问题的。如果是，有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:58:47.563

事实上，soapUI 正在给你正确的答案。“这里的一些二进制数据”是您要求的文件

# c# - 如何在 C# 中找出死锁并防止死锁

> ID：15361810
> 
> 赞同：20
> 
> 时间：2013-03-12T12:54:24.177
> 
> 标签：c#, asp.net, .net, c#-4.0, deadlock

5分钟前面试，3个问题没回答，谁能帮帮我。

问题：

如何在多线程应用程序功能中寻找死锁场景并防止它？

我给的答案：

我给出了死锁和锁、互斥体、监视器、信号量的定义。他告诉我，这些是工具，但是如何寻找死锁场景，因为当我们盲目使用这些工具时，会损失他说的性能:(

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T13:14:32.117

听起来您在解释死锁如何发生以及如何防止死锁时遇到了问题。

当每个线程（至少两个）尝试获取已被另一个锁定的资源的锁时，就会发生死锁。锁定在资源 1 上的线程 1 尝试获取资源 2 上的锁。同时，线程 2 拥有资源 2 上的锁并尝试获取资源 1 上的锁。两个线程从不放弃它们的锁，因此出现死锁发生。

避免死锁的最简单方法是使用超时值。Monitor 类 (system.Threading.Monitor) 可以在获取锁期间设置超时。

例子

```
try{
    if(Monitor.TryEnter(this, 500))
    {
        // critical section
    }
}
catch (Exception ex)
{

}
finally
{
    Monitor.Exit();
} 
```

[阅读更多](http://www.mindfiresolutions.com/A-single-step-solution-to-avoid-Deadlock-in-Multithreading-414.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T13:12:41.213

性能分析工具也有助于识别死锁等。这个问题将提供对该主题的一些见解：[C#/.NET analysis tool to find race conditions/deadlocks](https://stackoverflow.com/questions/2379610/c-net-analysis-tool-to-find-race-conditions-deadlocks)。

代码的可视化分析和锁的正确使用也很有用（您应该能够在检查代码时检测到代码中的潜在问题），但对于复杂的应用程序可能非常困难。有时，死锁仅在您运行代码时才可见，而不仅仅是通过检查代码。

我不太了解你的面试官。有些人可能想看看您对锁定标准/指南了解多少，有些人可能想看看您是否知道如何使用您的工具，有些人可能两者都想要。例如，在我工作的公司中，工具（尤其是我们已经拥有和使用的工具）的使用受到高度赞赏。但这并不意味着一个人不应该拥有一开始就防止编码死锁的技能。

仅仅为了锁定而锁定某些东西会影响性能，因为线程相互等待。您必须分析工作流程以确定真正需要锁定的内容、时间、锁定类型（简单`lock`或可能[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)）。防止死锁的典型方法有很多。

例如，在使用时，[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)您可以使用超时来防止死锁（如果您等待太多，则中止获取锁）

```
if (cacheLock.TryEnterWriteLock(timeout))
{
...
} 
```

你应该能够建议这样的超时。

在这样一个问题上，我希望至少会提到死锁的经典案例，比如嵌套锁的使用不当（你应该能够知道你能避免它们，它们为什么不好，等等）。

这个话题很大......你可以继续讨论这个问题。但没有定义。知道什么是锁和知道在大规模多线程应用程序中使用锁/信号量/互斥锁是两件不同的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T13:09:47.683

我认为面试是在问你一个棘手的问题。如果您可以使用静态分析来防止死锁...没有人会死锁！

就我个人而言，当我寻找死锁时，我首先会找到关键部分跨越函数调用的函数。例如

```
void func(){
    lock(_lock){
        func2();
     }
} 
```

目前还不清楚`func2`在做什么。也许它在同一个线程上分派一个事件，这意味着该事件仍然是关键部分的一部分。也许它然后锁定在*不同*的锁上。也许它分派到线程池中并且不再是可重入的，因为它现在在不同的线程上！这些地方是您可以开始看到死锁情况发生的地方：当您有多个不可重入锁位置时。

其他时候，在跟踪死锁场景时，我会回溯并尝试查找所有线程在哪里创建。我考虑了每个功能以及它可以实际运行的位置。如果您不确定，添加日志以记录函数调用的来源也可以提供帮助。

您还可以通过使用无锁数据结构来避免死锁（但这些数据结构需要同样多的使用）。您希望最大限度地减少对无锁结构的访问，因为每次访问它时它都会发生变化。

正如另一个答案中提到的，您可以使用带超时的互斥锁，但这不能保证始终有效（如果您的代码需要比超时工作更长的时间怎么办？）。在另一条评论中提到，这可能是面试官要求的。我发现在生产中这并不是一个好主意。超时一直在变化，也许某些东西运行的时间比预期的要长并超时。我认为最好让它死锁，进行进程转储，然后准确找到持有锁的内容并解决问题。当然，如果您的业务需求不允许这样做，那么您可以将其用作防御性编码策略的一部分以及智能锁放置选择。

我不同意你的采访，即锁*总是会*增加一个巨大的性能问题。无争用锁/互斥锁/等在移交给操作系统之前首先作为自旋锁进行测试，自旋锁很便宜。

一般来说，避免死锁的最好方法是了解你的程序流程。每次您引入一个新的锁对象时，请考虑它在哪里使用以及在链中使用它的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:03:31.190

这个问题最简单的解决方案是总是休眠/等待足够大的超时。如果发生超时，您就知道某事花费的时间比它应有的时间长，并且您很有可能出现死锁或其他错误。

```
Mutex m; // similar overloads exist for all locking primitives
if (!m.WaitOne(TimeSpan.FromSeconds(30)))
    throw new Exception("Potential deadlock detected."); 
```

`WaitOne`返回时`false`，它会等待 30 秒，而锁仍然不会被释放。如果您知道所有锁定的操作都应该在几毫秒内完成（如果没有，那么只需增加超时时间），那么这是一个非常好的迹象，表明事情很糟糕。

# php - Highchart LineChart MySQL 数据

> ID：15361814
> 
> 赞同：0
> 
> 时间：2013-03-12T12:54:32.037
> 
> 标签：php, mysql, highcharts

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head> 
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"     type="text/javascript"></script>    
<script src='http://code.highcharts.com/highcharts.js' type='text/javascript'> </script>       
<script src='http://code.highcharts.com/modules/exporting.js' type='text/javascript'> </script>    

</head>

<body>

<?php
$con = mysql_connect('localhost', 'root', '123456') or die('Error connecting to server');
mysql_select_db("aplikace", $con); 

$SQL1 =     "SELECT * FROM data";

$result1 = mysql_query($SQL1);
$data1 = array();
while ($row = mysql_fetch_array($result1)) {
   $data1[] = $row['cas'];
}

$result2 = mysql_query($SQL1);
$data2 = array();
while ($row = mysql_fetch_array($result2)) {
   $data2[] = hexdec($row['pars_data']);
}

?>

<script type="text/javascript">
$(document).ready(function() {
    var chart = new Highcharts.Chart({
          chart: {
             renderTo: 'container',
             type: 'line'
          },

        title:  {
                    text: 'Comming Data'
                },

        xAxis:  {
                    categories: ['<?php echo join($data1, "','") ?>'],
                },

        yAxis:  {
                    min:0,

                },

        legend: {
                    layout: 'vertical',
                    backgroundColor: '#FFFFFF',
                    align: 'left',
                    verticalAlign: 'top',
                    x: 50,
                    y: 35,
                    floating: true,
                    shadow: true
                },

        plotOptions: {
                        column: {
                                    pointPadding: 0.2,
                                    borderWidth: 0
                                }
                    },

        series: [   {
                        name: 'Data',
                        data: ['<?php echo join($data2, "','") ?>'],
                       // pointStart: 0
                        //pointInterval
                    },

                ]
    });
});
</script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div> 
```

大家好，我不知道我哪里有错误，请你帮我吗？在 X 轴上应该是来自 CAS 列的日期时间-> 它可以工作，但它不显示列 PARS_DATA。谢谢你的帮助，谢谢。

MySQL 表屏幕：

![](../Images/2283da1f67609b7c923198693235d017.png)

我看到的图表：

![](../Images/f9aef509bf0432faf85e79dac97cde44.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:12:39.133

您应该将您的日期时间字段转换为 unix 时间戳以便对其进行处理。所以 strtotime 函数是个好主意。

在您的代码中，请遵循以下内容：

```
 $result=mysql_query($sql)or die(mysql_error());
 if(mysql_num_rows($result)>0){
    while($row=mysql_fetch_array($result))
    {
        $uts=strtotime($row['time']); //convert to Unix Timestamp
        $date=date("l, F j, Y H:i:s",$uts); //standard template for draw chart

        echo $date . "\t" . $row['new_cost']. "\n";  //only this template work 
    } 
```

> $sql：你的 sql 查询文本。$结果：反馈。$row['new_cost']：我的成本字段。

有关更多详细信息，请点击[此](http://blueflame-software.com/blog/using-highcharts-with-php-and-mysql/)链接

祝你好运

# python - Python正则表达式替换文件中的行

> ID：15361816
> 
> 赞同：1
> 
> 时间：2013-03-12T12:54:42.747
> 
> 标签：python, regex, python-2.7

我有一个快速而肮脏的构建脚本，需要更新一个小的 xml 配置文件中的几行。由于文件太小，我使用一个公认的低效过程来更新文件，以保持简单：

```
def update_xml(property, value):
  for line in fileinput.input(os.path.join(app_dir, 'my.xml'), inplace=True):
    if property is 'version':
      line = re.sub(r'(<version>).*?(</version>)', '\1%s\2' % value, line, flags=re.IGNORECASE)
    elif property is 'brand':
      line = re.sub(r'(<property name="brand" type="string">).*?(</property>)', '\1%s\2' % value, line, flags=re.IGNORECASE)
    elif property is 'env':
      line = re.sub(r'(<property name="env" type="string">).*?(</property>)', '\1%s\2' % value, line, flags=re.IGNORECASE)

    print line 
```

我有两个问题：

*   后面的引用没有捕捉到我的期望。`<version>a.b.c</version>`例如，我没有得到 ，而是得到由控制字符包围的版本值。我试过加倍反斜杠，删除格式化的打印和其他一些东西，但不能完全正确。
*   当我将该行写回文件 ( `print line`) 时，我得到了几个额外的换行符。

我在这儿闹什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:20:02.080

换个试试`"\1%s\2" by "\g<1>%s\g<2>"`，可能有问题。。

关于换行符，打印可能会在现有行的顶部添加第二个新行。

你可以试试：`print line,`用逗号来抑制新行字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:54:24.877

使用原始字符串来避免`\1`并`\2`成为控制字符：`r'\1%s\2'`

# jpa - 删除 JOINED 策略中的子类重叠 JPA 实体

> ID：15361820
> 
> 赞同：0
> 
> 时间：2013-03-12T12:54:43.977
> 
> 标签：jpa, overlapping

我想建模如下

具有 JOINED 继承策略的超类 User。
User 有两个子类 HumanUser 和 BotUser。
HumanUser 有两个子类 NonAdminUser 和 AdminUser
NonAdminUser 有两个子类 Citizen 和 Operator
AdminUser 有两个子类 SiteAdministrator 和 UserAdministrator
BotUser 有一个子类 System

我想对重叠层次结构建模，其中具有给定 userId 的用户可以是 Citizen、Operator、SiteAdministrator 和 UserAdministrator 中的一个或多个。

如何在 JPA 中实现这一点？

在我的应用程序中，在创建一个叶级实体（例如 Citizen）后，当我想创建另一个重叠实体时，由于主键约束而引发错误，无法完成持久性。

此外，如果可以重叠，如何仅删除叶级的信息。例如，仅删除 Citizen 特定数据，但保留 SiteAdministrator 数据。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:01:17.657

不要将新类放在现有层次结构之上，从技术上讲，子类`User`不可能同时是 a`Citizen`和 a `System`，因为 Java 不支持多重继承。

我会实现一个`UserRoles`与（偏好组合而不是继承）`ManyToMany`相关的类。然后，您可以从数据库`User`中删除单个子类，而不会产生不必要的副作用。`User``UserRoles`

```
@ManyToMany
private List<User> roles = new ArrayList<User>(); 
```

# html - HTML 表单元素和 POST 数据中的层次结构

> ID：15361822
> 
> 赞同：4
> 
> 时间：2013-03-12T12:54:53.420
> 
> 标签：html, forms, post

从这样的元素命名是否有任何已知问题或缺点：

```
<form method="POST" ... >
    <input name="category[title]" ...>
    <input name="category[desc]" ...>
</form> 
```

结果`POST`将是这样的：

```
Array 
(
    [category] => Array
        (
            [title] => 0
            [desc] => 0
        )
) 
```

它适用于所有主要的网络浏览器吗？还有它的具体名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-03T03:20:47.300

核实：

```
/* send a object like it:
Person:
{
 name: 'Homer'
 age : 50
 kids :[
  { name: 'Liza', age: 9 }, 
  { name: 'Bart', age: 8 }, 
  {name: 'Maggie', age: 2 }
 ]}
 */
```

```
<form method="post" action='my_magic_form.xpto'>
    <input type="text" name="name" placeholder="Your Name" />
    <input type="text" name="age" placeholder="Your age" />
    <input type="text" name="kids[0].name" placeholder="First child name" /> 
    <input type="text" name="kids[0].age" placeholder="First child age" />
    <input type="text" name="kids[1].name" placeholder="Second child name" />
    <input type="text" name="kids[1].age" placeholder="Second child age" /> 
    <input type="text" name="kids[2].name" placeholder="Third child name" /> 
    <input type="text" name="kids[2].age" placeholder="Third child age" />
</form>
```

# android - 在 Android 中创建 TSV 文件：当我尝试在 Excel 中打开时，它检测到它为 ANSI，我需要 UTF-8

> ID：15361828
> 
> 赞同：0
> 
> 时间：2013-03-12T12:55:04.350
> 
> 标签：android, excel, tsv

在我的 Android 应用程序中，我创建了一个 TSV 文件并通过电子邮件发送它。当我尝试使用 Excel 打开它时，它会将其检测为 ANSI，因此我的某些字符没有按应有的方式显示。我有另一个不是我创建的应用程序，但 Excel 将其检测为 UTF-8。我检查了这两个文件的十六进制代码，发现他在一些空格（不是制表符）中使用 C2 A0，而我使用 20。

这是我用来创建文件的代码：

```
 FileOutputStream writeFileHandler = context.openFileOutput(LOG_FILENAME_CSV, Context.MODE_WORLD_READABLE);
        OutputStreamWriter oputStreamWriter = new OutputStreamWriter(writeFileHandler, "UTF-8");

        for(int i=log_rows.length-1; i>=0; i--){
            String[] entries = getDailyLogEntries(log_rows[i]); // array of your values
            for(int j=0; j<entries.length; j++){
                if(j==0)  oputStreamWriter.write(entries[j]);
                else{
                    if(entries[j] != null) oputStreamWriter.write("\t"+entries[j]);
                }
            }
            oputStreamWriter.write("\n");
        }
        oputStreamWriter.flush();
        oputStreamWriter.close();
        writeFileHandler.close(); 
```

我尝试使用 DDMS 提取文件以避免发送电子邮件，结果是一样的，它被检测为 ANSI。我该怎么做才能让 Excel 将其检测为 UTF-8？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:54:49.857

您是否尝试在 TSV 文件的开头添加 UTF-8 BOM？这可能会让 Excel 相信它是一个 UTF-8 文件。字节序列为 0xEF,0xBB,0xBF。

见[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

# objective-c - 应用内购买 - 交易失败

> ID：15361832
> 
> 赞同：1
> 
> 时间：2013-03-12T12:55:14.083
> 
> 标签：objective-c, xcode, ios4

我正在尝试在我的应用中实现应用内购买。类型为非消耗品。产品请求返回正常......带有正确的标题、描述和价格。但是当我点击购买时，当我点击确认时打开alertView说“确认......环境：沙盒”，应该出现要求用户测试密码的苹果框......但它没有出现并且交易失败没有消息错误...我的应用程序尚未在 AppStore 中，并且 Itunes Connect 中的 In App Purchase Product 的状态**为 Ready to Submit**正确吗？

这是我的代码：（对不起，代码较长，但我的意思是它对我的问题相关且重要）

```
 - (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
 {
NSArray *products = response.products;
proUpgradeProduct = [products count] == 1 ? [[products firstObject] retain] : nil;
if (proUpgradeProduct)
{
    NSLog(@"Product title: %@" , proUpgradeProduct.localizedTitle);
    NSLog(@"Product description: %@" , proUpgradeProduct.localizedDescription);
    NSLog(@"Product price: %@" , proUpgradeProduct.price);
    NSLog(@"Product id: %@" , proUpgradeProduct.productIdentifier);

    //        lblTitulo.text = proUpgradeProduct.productIdentifier;
    //        lblDescricao.text = proUpgradeProduct.localizedDescription;

}

for (NSString *invalidProductId in response.invalidProductIdentifiers)
{
    NSLog(@"Invalid product id: %@" , invalidProductId);
}

// finally release the reqest we alloc/init’ed in requestProUpgradeProductData
[productsRequest release];

[[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerProductsFetchedNotification object:self userInfo:nil];
}
- (void)requestProUpgradeProductData
{
NSSet *productIdentifiers = [NSSet setWithObject:@"versaopro" ];
productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
productsRequest.delegate = self;
[productsRequest start];

// we will release the request object in the delegate callback
 }
 - (void)loadStore
{
// restarts any purchases if they were interrupted last time the app was open
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];

// get the product description (defined in early sections)
[self requestProUpgradeProductData];
}

    - (void)purchaseProUpgrade
 {
SKPayment *payment = [SKPayment paymentWithProduct:proUpgradeProduct];
[[SKPaymentQueue defaultQueue] addPayment:payment];
   }

-(IBAction) buyClick: (id) sender {
[self purchaseProUpgrade];
  } 
```

# android - 带有 CustomAdapter 的 ListView 给出 NullPointer 异常

> ID：15361834
> 
> 赞同：1
> 
> 时间：2013-03-12T12:55:19.193
> 
> 标签：android, android-listview, custom-adapter

我正在使用一个`listview`来显示地点的详细信息。为此，我创建了一个`CustomAdapter`，但我不知道它为什么给我，`Null Pointer Exception`请帮我解决这个问题。

这是我的 xml 文件。

activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:scrollbars="vertical" />

</LinearLayout> 
```

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/img_hotel"
            android:layout_width="100dp"
            android:layout_height="match_parent" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/txt_hotelName"
                android:layout_width="fill_parent"
                android:layout_height="20dp" />

            <TextView
                android:id="@+id/txt_hotelAddress"
                android:layout_width="fill_parent"
                android:layout_height="20dp" />

            <RatingBar
                android:id="@+id/ratingBar"
                style="?android:attr/ratingBarStyleIndicator"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:numStars="5"
                android:rating="2.0"
                android:stepSize="0.5" />
        </LinearLayout>
    </LinearLayout>

</RelativeLayout> 
```

这是我更新的自定义适配器

```
public class CustomListViewAdapter extends BaseAdapter {

Context context;

public CustomListViewAdapter(Context context, int resource,
        List<Result> results) {

    // super(context, resource, results);
    this.context = context;
    Log.v("Result Data in Adapter", results.toString());
    // TODO Auto-generated constructor stub
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ViewHolder holder = null;
    Result result = (Result) getItem(position);
    LayoutInflater mInflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    // LayoutInflater mInflater = (LayoutInflater)
    // context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.list_item, null);

        holder = new ViewHolder();
        holder.imgView = (ImageView) convertView
                .findViewById(R.id.img_hotel);
        holder.txtName = (TextView) convertView
                .findViewById(R.id.txt_hotelName);
        holder.txtAddress = (TextView) convertView
                .findViewById(R.id.txt_hotelAddress);
        holder.rate = (RatingBar) convertView
                .findViewById(R.id.ratingBar);
        convertView.setTag(holder);
    } else {
        /*
         * holder = (ViewHolder) convertView.getTag();
         * 
         * String url = result.icon; Log.e("URL is ", url); if (url !=
         * null) { Bitmap bitmap = fetchBitmapFromCache(url); if (bitmap
         * == null) { new
         * BitmapDownloaderTask(holder.imgView).execute(url); } else {
         * holder.imgView.setImageBitmap(bitmap); } } else {
         * holder.imgView.setImageBitmap(null); }
         */
        holder.imgView.setImageDrawable(getResources().getDrawable(
                R.drawable.ic_launcher));
        holder.txtName.setText(result.name);
        holder.txtAddress.setText(result.formatted_address);
        holder.rate.setRating(result.rating);
    }
    return convertView; // super.getView(position, convertView, parent);
}

private class ViewHolder {
    ImageView imgView;
    TextView txtName;
    TextView txtAddress;
    RatingBar rate;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return results.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return results.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return results.indexOf(getItem(position));
} 
```

}

在这里我将适配器设置为 listView

```
list.setAdapter(new CustomListViewAdapter(MainActivity.this,
                R.layout.list_item, results)); 
```

这是我到目前为止更新的代码，但它仍然给我空指针异常。

这是我的堆栈跟踪。

```
03-13 11:13:20.355: E/AndroidRuntime(413): FATAL EXCEPTION: main
03-13 11:13:20.355: E/AndroidRuntime(413): java.lang.NullPointerException
03-13 11:13:20.355: E/AndroidRuntime(413):  at com.th.hotelreservationsystem.MainActivity$CustomListViewAdapter.getView(MainActivity.java:183)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.AbsListView.obtainView(AbsListView.java:1294)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.ListView.onMeasure(ListView.java:1109)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.View.measure(View.java:8171)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:696)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:306)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.View.measure(View.java:8171)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.View.measure(View.java:8171)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.View.measure(View.java:8171)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.View.measure(View.java:8171)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.os.Looper.loop(Looper.java:123)
03-13 11:13:20.355: E/AndroidRuntime(413):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-13 11:13:20.355: E/AndroidRuntime(413):  at java.lang.reflect.Method.invokeNative(Native Method)
03-13 11:13:20.355: E/AndroidRuntime(413):  at java.lang.reflect.Method.invoke(Method.java:521)
03-13 11:13:20.355: E/AndroidRuntime(413):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-13 11:13:20.355: E/AndroidRuntime(413):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-13 11:13:20.355: E/AndroidRuntime(413):  at dalvik.system.NativeStart.main(Native Method) 
```

请朋友们帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:39:02.767

您在 getView 开始时将 viewHolder 设置为 null。如果 convertView 为空，则初始化它。但是如果convertView不为null，你就直接使用了。如果 convertView 不为空，请不要忘记 viewHolder 为空。

```
在 else 块的开头添加以下代码：
```

`holder = (ViewHolder) convertView.getTag();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T06:53:39.273

谢谢你们的帮助。

我得到了解决方案，这是我更新的带有注释的代码。

3 我的代码错误。感谢帮助过我的人

```
public class CustomListViewAdapter extends BaseAdapter {

    Context context;

    public CustomListViewAdapter(Context context, int resource,
            List<Result> results) {

         super(); // 1) here i was trying to call parameterised Constructor which          
                      // was wrong.
        this.context = context;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder holder = null;
        Result result = (Result) getItem(position);
        LayoutInflater mInflater = (LayoutInflater) context
                .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.list_item, null);

            holder = new ViewHolder(); // 2) i had not instantiated View holder 
                                               //  here i did.
            holder.imgView = (ImageView) convertView
                    .findViewById(R.id.img_hotel);
            holder.txtName = (TextView) convertView
                    .findViewById(R.id.txt_hotelName);
            holder.txtAddress = (TextView) convertView
                    .findViewById(R.id.txt_hotelAddress);
            holder.rate = (RatingBar) convertView
                    .findViewById(R.id.ratingBar);
            convertView.setTag(holder);
        } else {

            holder = (ViewHolder) convertView.getTag();// 3) here by mistake i
   //had commited holde with other unwanted code. here removed it.
            holder.imgView.setImageDrawable(getResources().getDrawable(
                    R.drawable.ic_launcher));
            holder.txtName.setText(result.name);
            holder.txtAddress.setText(result.formatted_address);
            holder.rate.setRating(result.rating);
        }
        return convertView; // super.getView(position, convertView, parent);
    }

    private class ViewHolder {
        ImageView imgView;
        TextView txtName;
        TextView txtAddress;
        RatingBar rate;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return results.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return results.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return results.indexOf(getItem(position));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:58:28.643

你`context`是 null 因为你没有在构造函数中初始化它，

尝试像这样初始化它

```
 public CustomListViewAdapter(Context context, int resource,
                List<Result> results) {
            super(context, resource, results);
           this.context=context;

        } 
```

而且你的观众是空的

尝试初始化您的视图持有者

```
 holder = new viewHolder(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:03:51.157

您应该在 getView 方法中返回 convertView 而不是调用：

```
return super.getView(position, convertView, parent); // replace this line by return convertView; 
```

编辑：所以完整的答案是这样的：

```
public class CustomListViewAdapter extends ArrayAdapter<Result>{

        Context context;

        public CustomListViewAdapter(Context context, int resource,
                List<Result> results) {

            super(context, resource, results);
            this.context = context; // 1
            Log.v("Result Data in Adapter", results.toString());
            // TODO Auto-generated constructor stub
        }

        private class ViewHolder {
            ImageView imgView;
            TextView txtName;
            TextView txtAddress;
            RatingBar rate; 
        }
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            ViewHolder holder = null;
            Result result = getItem(position);
            LayoutInflater mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            if (convertView == null ){
                convertView = mInflater.inflate(R.layout.list_item, null);
                holder = new ViewHolder(); //2
            //  holder.imgView = (ImageView)convertView.findViewById(R.id.img_hotel);
                holder.txtName = (TextView) convertView.findViewById(R.id.txt_hotelName);
                holder.txtAddress = (TextView) convertView.findViewById(R.id.txt_hotelAddress);
                holder.rate = (RatingBar)convertView.findViewById(R.id.ratingBar);
                convertView.setTag(holder);
            }else {
                holder = (ViewHolder) convertView.getTag();

                //holder.imgView.setImageResource();
                holder.txtName.setText(result.name);
                holder.txtAddress.setText(result.formatted_address);
                holder.rate.setRating(result.rating);
            }
            return convertView; //3
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T17:49:17.560

@Mahaveer 你能做到吗

```
@Override
public int getCount() {
    return <Size of list items>;
} 
```

希望这能解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T12:59:25.513

您正在将您的设置`ViewHolder`为`null`，但从不初始化它。

所以让你`getView()`像这样：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder holder = null;
        Result result = getItem(position);
        LayoutInflater mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if (convertView == null ){
            holder = new viewHolder(); //initialize it
            convertView = mInflater.inflate(R.layout.list_item, null);
            ....
            convertView.setTag(holder);
        }... 
```

# vb.net - 在 VB.NET 中重命名文件扩展名

> ID：15361838
> 
> 赞同：0
> 
> 时间：2013-03-12T12:55:23.437
> 
> 标签：vb.net

我写了一个数据分类器，它为它正在写入的文件写出一个 .build 扩展名，所以当它向特定文件写入数据时，没有任何东西试图提升它。

最后，我想在程序关闭之前将任何带有 .build 扩展名的内容重命名为 .dat 。

```
 For Each f In outputFiles

        For Each r In TrailerRecords

            ' Set the bill count variable
            If r.VariableField Then
                r.Fields(1) = String.Format("{0:000000}", f.Value)
            End If

            ' Write the trailer record to the output file
            File.AppendAllText(f.Key, r.ToString() & vbLf)
        Next

        ' Rename all.build files to .dat

NEEDS TO GO HERE

        ' Copy each output file to the backup directory
        File.Copy(f.Key, Path.Combine(backupFolder, Path.GetFileName(f.Key)), True)
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:12:51.077

获取文件并重命名：

```
Dim auxFile as String
Dim files() As String = IO.Directory.GetFiles(myFolderPath, "*.build")

For Each sFile As String In files
    auxFile = IO.Path.GetFileNameWithoutExtension(sFile) & ".dat"
    My.Computer.FileSystem.RenameFile(sFile, auxFile)
Next 
```

您可以使用`File.Copy()`覆盖属性来`True`代替。

看看 MSDN 文档：

*   [获取文件](http://msdn.microsoft.com/en-us/library/system.io.directory.getfiles%28v=vs.71%29.aspx)
*   [重新命名文件](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.filesystem.renamefile%28v=vs.80%29.aspx)
*   [复制](http://msdn.microsoft.com/en-us/library/c6cfw35a%28v=vs.80%29.aspx)
*   [GetFilenameWithoutExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension%28v=vs.71%29.aspx)

# java - Java中的高级多态性

> ID：15361844
> 
> 赞同：20
> 
> 时间：2013-03-12T12:55:42.427
> 
> 标签：java, generics, polymorphism, parametric-polymorphism

我在我的大学里有高级编程课程，但我很难理解这段代码的工作原理。

```
public final class GenericClass<T> {
    private void overloadedMethod(Collection<?> o) {
        System.out.println("Collection<?>");
    }

    private void overloadedMethod(List<Number> o) {
        System.out.println("List<Number>");
    }

    private void overloadedMethod(ArrayList<Integer> o) {
        System.out.println("ArrayList<Integer>");
    }

    public void method(List<T> l) {
        overloadedMethod(l);
    }

    public static void main(String[] args) {
        GenericClass<Integer> test = new GenericClass<Integer>();
        test.method(new ArrayList<Integer>());
    }
} 
```

为什么这段代码会打印“Collection<?>”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T13:04:43.740

的声明`method(List<T> l)`没有指定类型 T 的任何界限。不能保证 T 是 Number 或 Number 的子类。因此，编译器只能决定该方法调用`overloadedMethod(Collection<?> o)`.

请记住：编译后，类文件中不再提供有关泛型的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T13:20:23.893

每当你定义一个泛型类型时，就会自动提供一个对应的原始类型这个方法

```
public void method(List<T> l) {

} 
```

替换为

```
public void method(List<Object> l) {

} 
```

如果您阅读了通配符类型，您将看到`List<Number>`and `List<Object>` or `ArrayList<Integer>`and`List<Object>`没有任何类型关系。`List<Object>`是 的子类型，`Collecion<?>`因此调用此方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T13:22:43.180

当您处理方法重载时，您必须牢记三个概念：

1.  加宽
2.  拳击
3.  变量参数

您的问题在于扩大的第一点，java编译器为这些概念中的每一个提供与上面列出的相同顺序的优先级，因此它更喜欢扩大，当您调用您的方法时，`test.method(new ArrayList<Integer>());` 编译器发现`ArrayList<Integer>()`可以扩大到`Collection<?>`和因为它具有最高优先级，所以它调用这些版本并忽略其他版本注意：如果您将其他两种方法的声明更改为`private void overloadedMethod(ArrayList<?> o)`，`private void overloadedMethod(List<?> o)`编译器也会调用该`Collection<?>`版本，因为它是首选版本

# c# - 如何将显示模板用于字段

> ID：15361850
> 
> 赞同：2
> 
> 时间：2013-03-12T12:55:53.890
> 
> 标签：c#, .net, asp.net-mvc

我有一个模型：

```
public class SomethingViewModel 
{
    [Required]
    [Display(Name = "Customer")]
    public string SomethingName { get; set; }

    [Required]
    [Display(Name = "Something id")]
    public string SomethingId { get; set; }

} 
```

我需要为其创建一个视图，`Html.EditorForModel`但我需要仅显示SomethingName 字段（标签）。这个怎么做？

**更新：我需要使用属性**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:00:18.253

您必须单独设置您`LabelFor`的 s 和`EditorFor`s。尝试类似：

```
@Html.LabelFor(m => m.SomethingName)
@Html.EditorFor(m => m.SomethingName)

@Html.LabelFor(m => m.SomethingId)
@Html.EditorFor(m => m.SomethingId) 
```

或仅显示：

```
@Html.LabelFor(m => m.SomethingName)
@Html.DisplayFor(m => m.SomethingName)

@Html.LabelFor(m => m.SomethingId)
@Html.DisplayFor(m => m.SomethingId) 
```

# c# - 具有属性和实现类的 C# 接口

> ID：15361857
> 
> 赞同：0
> 
> 时间：2013-03-12T12:56:06.827
> 
> 标签：c#, properties

我想把属性放在界面中。
如果我这样做，我的问题：

```
class ClassA: IClassA
{
    public string Id{ get; private set; } 
```

界面：

```
public interface IClassA
{
    string Id{ get; }
} 
```

这不会编译，一方面，我想强制实现类具有属性，所以我没有在接口中放置“set”，当我尝试编译时，我得到：

> ```
> .ClassA.set' is not public. 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:02:29.063

你的代码看起来不错。您的接口仅指定了一个属性 getter，因此实现者只需要指定 getter。他们是否指定了一个 setter，以及 setter 是公共的还是私有的都无关紧要。所有这 3 个都应该对指定的 IClassA 有效。

```
class ClassA : IClassA
{
    public string Id { get; }
}

class ClassA : IClassA
{
    public string Id { get; set; }
}

class ClassA : IClassA
{
    public string Id { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:08:31.177

您的代码有效：

```
namespace ConsoleApplication1
{
  using System;

  internal class ClassA : IClassA
  {
    public ClassA(string id)
    {
      this.Id = id;
    }

    public string Id { get; private set; }
  }

  public interface IClassA
  {
      string Id{ get; }
  }

  class Program
  {
    static void Main()
    {
      var a = new ClassA("Test");

      Console.WriteLine(a.Id);

      Console.ReadLine();
    }
  }
} 
```

如果您的编译器有问题，请检查代码的其他部分或发布完整的错误消息，包括代码行。

# php - 在php中编辑后如何保存图像

> ID：15361858
> 
> 赞同：2
> 
> 时间：2013-03-12T12:56:08.380
> 
> 标签：php, html, css, image

我有一张图片，我使用php“imagettftext”函数在这张图片上写了一些文字。现在我不知道它将如何自动保存。

```
header('Content-Type: image/png');
// Create the image
$im = imagecreatefromjpeg('image-1.jpg');

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
//imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
$text = 'www.blockprintsonline.com';

// Replace path by your own font path
$font = 'arial.ttf';

list($width, $height, $type, $attr) = getimagesize($get_image);
$width1=$width*20/100;
$height1=$height*50/100;
$font_size=$width*4/100;

// Add some shadow to the text
//imagettftext($im, 30, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, $font_size, 0, $width1, $height1, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:59:04.837

如果要将图像保存到文件，请在[此处](http://php.net/manual/en/function.imagepng.php)`imagepng()`查看函数的文档。

通过将文件名作为第二个参数传递，它将图像保存到文件中，例如：

```
imagepng($im, "path/to/save/image/in.png"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:01:40.170

```
<?php

// Save the image as 'simpletext.png'
imagepng($im, 'simpletext.png');

// Free up memory
imagedestroy($im);
?> 
```

这是有关如何保存图像的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:59:25.887

如果您查看[imagepng](http://php.net/manual/en/function.imagepng.php)的文档，您会看到您可以提供文件名。这会将图像保存到磁盘

# tridion - 内部链接解析问题

> ID：15361862
> 
> 赞同：1
> 
> 时间：2013-03-12T12:56:18.500
> 
> 标签：tridion, tridion-2011

我得到了如下所述的异常行为（环境是 SDL Tridion 2011 SP1，应用了 HotFix Rollup）：

我有一个页面 - 第 1 页 - 上面有以下组件通过不同的静态模板关联：1) 组件 1

2) 组件 2

3) 组件 3

我有另一个页面 - 第 2 页 - 上面有组件 4。组件 4 具有到组件 1 的内部链接。

这两个页面都发布了多次。

现在我的期望是第 2 页上的内部链接应该在运行时解决以链接到第 1 页。但这并没有发生 - 如果这是唯一的问题，这可能很容易破解 - 但现在真正的麻烦 - 如果组件第 2 页上的 4 被编辑为具有指向组件 2 的内部链接，然后一切正常，第 2 页上的内部链接正确指向第 1 页。

任何可以检查的建议或数据点？

我所做的一件事是，在取消发布页面然后发布之后，我将页面从一个结构组重新定位到另一个结构组。

请注意：1）所有页面和结构组层次结构多次发布

2）所有其他内部链接工作正常

3）如果我看到这些页面的预览模式，它们会生成预期的代码，包括用于内部链接的代码

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:13:38.987

您可能需要检查您的组件模板优先级。组件 1 和 2 是否使用第 1 页上的相同组件模板。确保它们未设置为“从不链接”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:53:42.400

呼...终于在检查一切正确后我能够解决这个问题。

逻辑上一切似乎都是正确的......所以我采取了不合逻辑的方式......从页面中删除了所有引用，重新创建特定组件并在页面中重新链接它们......发布它们......然后哇哦。 ..它开始工作..记得微软的方式..如果你的Windows出现问题......只需重新启动它:(......我很想探索原因:(

# jquery - 鼠标点击时获取当前Canvas的Id

> ID：15361866
> 
> 赞同：0
> 
> 时间：2013-03-12T12:56:28.927
> 
> 标签：jquery, html, canvas, getelementbyid

当我单击它时，如何获取画布的当前 ID。在我的 Html 页面中，我有两个画布：

```
<div>
<canvas id='canvas1' style="width: 740px; height: 420px"></canvas>
</div>
<div>
<canvas id='canvas2' style="width: 740px; height: 420px"></canvas>
</div> 
```

当我单击其中一个画布时，如何获取它的 ID。我试过这样：

```
$('#canvas1').click(function(){ 
    alert('Clicked on Canvas1');
});

$('#canvas2').click(function(){ 
    alert('Clicked on Canvas2');
}); 
```

但是，单击画布时没有显示任何警报.. 有什么想法吗？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:04:17.700

与 domready 一起使用

```
$(function(){
$('#canvas1').click(function(){ 
    alert('Clicked on Canvas1');
});

$('#canvas2').click(function(){ 
    alert('Clicked on Canvas2');
});
}); 
```

[演示](http://jsfiddle.net/wh3ax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:09:10.810

我认为您必须在文档准备好后分配点击绑定，例如：

```
$(document).ready(function() {
  $('#canvas1').click(function(){ 
    alert('Clicked on Canvas1');
  });
}); 
```

知道 id 的另一个选择是你给你的画布一个额外的类。然后在类上绑定 click 事件，然后从事件对象中读取 id，如下所示：

```
$(".canvasclass").click( function(eventObject) {
  alert(eventObject.target.id);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-12T07:51:48.797

我使用 event.currentTarget.id 来获取画布的 dom ID。我不知道它有多强大——我会请其他人参与进来。而且，我承认我是 JavaScript 的新手。

首先将 click 事件处理程序绑定到相关的每个画布。然后，查询事件对象以获取 currentTarget.id，即被点击的画布的 dom id。

```
$(window).load(function() {
    canvas1 = document.getElementById("canvas1");
    canvas1.addEventListener("mousedown", getPosition, false);
    canvas2 = document.getElementById("canvas1");
    canvas2.addEventListener("mousedown", getPosition, false);
}

function getPosition(event) {
    var x = event.clientX;
    var y = event.clientY;
    var canvas_id = event.currentTarget.id
    var canvas = document.getElementById(canvas_id);
    // you can now execute canvas methods on the canvas clicked on
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:39:09.567

或者你可以让你的事件绑定通用......

标记。

```
<div>
    <canvas id='canvas1' style="width: 740px; height: 420px; background: red;"></canvas>
</div>
<div>
    <canvas id='canvas2' style="width: 740px; height: 420px; background: blue;"></canvas>
</div> 
```

JS 代码。

```
$(function() {
    $("canvas").click(function(e) {
        alert($(this).attr("id"));
    });
}); 
```

# python - 用正则表达式置换矩阵的参数

> ID：15361867
> 
> 赞同：4
> 
> 时间：2013-03-12T12:56:31.700
> 
> 标签：python, regex, perl, sed

为了提高 FORTRAN 代码的性能，我想置换数组的索引，以便将第 4 个索引移到第二位，例如，我想更改以下行

```
ts(l,i,j,k) = ts(l,i,j,k1(i,j)) 
```

到

```
ts(l,k,i,j) = ts(l,k1(i,j),i,j) 
```

请注意，这只是一个示例行，索引并不总是称为 i,j,k,l... 我只知道数组的名称和等级。所以我不能只用逗号分隔 4 个参数，因为一个参数也可以是一个带有逗号的矩阵（在上述情况下为 k1(i,j)）。所以我的第一个想法

```
sed -r  's/ts\(([^,]+),([^,]+),([^)]+),([^,]+)\)/ts\(\1,\4,\2,\3\)/g' *.F 
```

在这种情况下失败（上面代码行中的 rhs），因为它给出了：

```
ts(l,k,i,j) = ts(l,j),i,j,k1(i) 
```

我需要的是一个正则表达式，它仅在打开最多 1 个括号时才拆分我的数组索引。有人可以给我一个提示如何使用 sed/python/perl 做到这一点吗？

最良好的祝愿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:07:23.543

如果括号没有比您的示例更深地嵌套，这应该可以工作：

```
sed -r  's/ts\(((\([^()]*\)|[^(),])*),((\([^()]*\)|[^(),])*),((\([^()]*\)|[^(),])*),((\([^()]*\)|[^(),])*)\)/ts(\1,\7,\3,\5)/g' *.F 
```

不是说它很漂亮...

**解释：**

```
(        # Match and capture...
 (       # either
  \(     #  an opening parenthesis
  [^()]* #  any number of non-parenthesis characters
  \)     #  a closing parenthesis
 |       # or  
  [^(),] #  a character besides parentheses or comma
 )*      # any number of times
)        # End of capturing group 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:53:47.933

也许直接的正则表达式有点困难。如果您有可用的脚本语言，请尝试以下操作。在您检测到包含数组访问的行之后。（在蟒蛇中）

```
import re
def getArguments(rhs):
    """
        Separates string on commas that are in the first level parentheses
    """
    lvl = 0
    argSplits = []
    for i, c in enumerate(rhs):
        if c == '(':
            lvl += 1
            if lvl == 1:
                argSplits.append(i)
        elif c == ')':
            lvl -= 1
            if lvl == 0:
                argSplits.append(i)
                break
        if lvl < 0:
            raise ValueError('Parentheses do not match')
        if lvl == 1:
            if c == ',':
                argSplits.append(i)
    args = []
    for i in range(len(argSplits)-1):
        args.append(rhs[argSplits[i]+1:argSplits[i+1]])
    return args

line = r'ts(l,i,j,k) = ts(l,i,j,k1(i,j))'
# get righthand side of equ
rhs = re.split('=', line)[1]   
# get arguments
args = getArguments(rhs)
# args = ['l', 'i', 'j', 'k1(i,j)']

# try: line = r'ts(l,i,j,k) = ts(l,i,j,k1(i(am(crazy(!))i),j))'
# you get: getArguments(rhs) --> ['l', 'i', 'j', 'k1(i(am(crazy(!))i),j)' 
```

获得参数列表后，您可以在将字符串重新组合在一起时对它们进行置换

# sql - SQL 在对多列进行测试后赋值

> ID：15361870
> 
> 赞同：1
> 
> 时间：2013-03-12T12:56:44.170
> 
> 标签：sql, oracle

我有两列：

输入

```
col1 col2
1    0
1    0
1    0
2    1
2    0
3    0
3    0
3    1
3    1 
```

让我们假设 col1 拥有一些重复的实体 ID 号。我正在测试这个实体 ID 是否在 col2 中包含值 1。因此，如果实体 ID 在相应的 col2 中有 1，那么我将创建另一个 col3，其值为“NO”/“YES”，或者只是“0”/“1”。

输出

```
col1 col3
1    NO
2    YES
3    YES 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:59:30.837

```
SELECT Col1, MAX(CASE WHEN col2 = 1 THEN 1 ELSE 0 END) Col3
FROM YourTable
GROUP BY Col1 
```

**更新** 好了，由于上面的查询对您不起作用，您可以尝试以下操作：

```
SELECT Col1, MAX(Col3) Col3
FROM (  SELECT  Col1, 
                CASE WHEN col2 = 1 THEN 1 ELSE 0 END AS Col3
        FROM YourTable) A
GROUP BY Col1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:00:27.630

```
UPDATE table 
SET 
    col3 = DECODE(col2, 1, 'YES', 'NO'); 
```

如果您只想为给定的实体 id 运行它：

```
UPDATE table 
SET 
    col3 = DECODE(col2, 1, 'YES', 'NO')
WHERE
    col1 = yourid; 
```

如果您的第 3 列不存在，则无论如何您都必须*事先创建它：*

```
ALTER TABLE table ADD (col3 NUMBER NOT NULL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:58:10.963

```
SELECT  Col1,
        CASE WHEN MAX(Col2) = 1 THEN 'YES' ELSE 'NO' END AS Col3
FROM    TableName
GROUP   BY Col1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/54bce/3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:01:20.217

```
SELECT DISTINCT col1, 
CASE WHEN EXISTS(SELECT * FROM MyTab WHERE col1 = M.col1 AND col2 = 1) 
THEN 'Yes' ELSE 'No' AS col3 FROM MyTab M 
```

# ruby-on-rails - 使用 Rapns 发送通知，我在 Ubuntu 和 Mac 上收到 SSL 错误

> ID：15361871
> 
> 赞同：2
> 
> 时间：2013-03-12T12:56:44.360
> 
> 标签：ruby-on-rails, ssl, openssl, apple-push-notifications

我正在使用[https://github.com/ileitch/rapns](https://github.com/ileitch/rapns)并且它与 Android 应用程序配合得很好，但是当我在其中创建 iOS 应用程序时出现 SSL 证书错误。我已经按照那里的 wiki 中的指南进行操作，但我当然不是 SSL 和/或 APN 服务器和证书方面的专家。错误是

```
[2013-03-12 12:48:13] [ERROR] [ios_app] Exception raised during startup. Notifications will not be delivered for this app.
[2013-03-12 12:48:13] [ERROR] OpenSSL::SSL::SSLError, SSL_connect returned=1 errno=0 state=SSLv3 read server session ticket A: sslv3 alert certificate unknown
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/apns/connection.rb:109:in `connect'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/apns/connection.rb:109:in `connect_socket'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/apns/connection.rb:26:in `connect'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/apns/delivery_handler.rb:8:in `initialize'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/apns/app_runner.rb:31:in `new'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/apns/app_runner.rb:31:in `new_delivery_handler'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/app_runner.rb:130:in `start_handler'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/app_runner.rb:70:in `block in start'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/app_runner.rb:70:in `times'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/app_runner.rb:70:in `start'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/app_runner.rb:31:in `sync_app'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/app_runner.rb:20:in `block in sync'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/app_runner.rb:20:in `each'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon/app_runner.rb:20:in `sync'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/lib/rapns/daemon.rb:51:in `start'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/gems/rapns-3.1.0/bin/rapns:36:in `<top (required)>'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/bin/rapns:23:in `load'
/var/deploy/platter_dev/web_head/shared/bundle/ruby/1.9.1/bin/rapns:23:in `<main>' 
```

我已经安装了“认证”gem，并且还添加了通常推荐用于这些问题的 fix_ssl 初始化程序，并且 OpenSSL 在我的本地 Mac 和 Ubuntu 登台服务器上都处于 < 版本 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:06:11.197

您必须创建一个 AppID：登录 iOS 开发者中心：http: [//developer.apple.com/iphone/](http://developer.apple.com/iphone/)。单击 iOS 配置门户并配置您的新应用程序以使用推送通知。

您可以按照此处列出的第一步：[http ://www.pushwoosh.com/programming-push-notification/iphone-configuration-guide/](http://www.pushwoosh.com/programming-push-notification/iphone-configuration-guide/)

# mysql - 通过 pentaho 模式工作台在 saiku 中显示多维数据集

> ID：15361874
> 
> 赞同：1
> 
> 时间：2013-03-12T12:56:53.700
> 
> 标签：mysql, xsd, pentaho, workbench, saiku

我正在尝试发布在 pentaho 模式工作台上创建的多维数据集并尝试将结果分析到 bi 服务器中，在此过程中，我成功发布了多维数据集，但面临在 saiku 服务器**的语句异常**中找不到表的异常，即使表是存在于 mysql 数据库中，那么我该怎么做才能解决此异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:42:40.150

检查您的数据源文件 - Saiku 可能没有为数据库使用正确的架构，因此正在寻找不同的地方。

# actionscript-3 - AS3 - 使用 playHeadTime 记录点击并使用时间

> ID：15361875
> 
> 赞同：3
> 
> 时间：2013-03-12T12:56:54.310
> 
> 标签：actionscript-3, actionscript, flash-cs6

我对 AS3 相当陌生，所以任何帮助都会得到帮助。

基本上我正在尝试做一些类似于危险感知测试的东西，你点击它，它会记录你是否在正确的时间点击的天气。

我到目前为止是这样的：

```
import flash.events.Event;

videoOverlay.addEventListener(MouseEvent.CLICK,doClick)
function doClick(e:Event):void
{
    trace(myVideo.playheadTime)
} 
```

我已经设法制作了一个可点击区域然后显示点击时间，我现在需要做的是能够判断点击是否在某个时间范围内然后添加 1 点，然后在视频剪辑的末尾我想要显示分数。

我不只是在追求代码，如果有人可以提出一种这样做的方法，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:07:57.613

您可以将“正确时刻”存储在数组、xml 等中。让我们这样说：

```
var moments:Array = [{start: "1:01", end: "1:16"}, {start: "1:25", end: "1:26"}, {start: "1:39", end: "1:51"}];
//time is in minutes, so you need to convert it to seconds
function doClick(e:Event):void
{
    for (var i:int = 0; i < moments.lenght; i++)
    {
        var moment:Object = moments[i];
        if (myVideo.playheadTime => toSeconds(moment.start) && myVideo.playheadTime <= toSeconds(moment.end))
        {
            trace("that's the right moment");
            break; //we do not need to check further
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:09:01.013

我能想到的最好的方法是计时器。设置一个计时器类并在点击事件显示上，而不是点击是否在一定的时间范围内 - 如果是，那么成功，如果不是，那么失败。

尝试这样的事情：

```
counter:Number = 0;
videoOverlay.addEventListener(MouseEvent.CLICK,doClick)
public function doClick(e:Event):void
{
if (counter < 10)
trace("Success, your quick!");
else
  {
   trace("Failure!");
  }
}
addEventListener(Event.ENTER_FRAME, timed_event);

public function timed_event(event:Event) : void
{
counter++;
} 
```

当然，时间速率也取决于应用程序的帧速率。

# css - 使用 CSS 和指针将子菜单居中

> ID：15361876
> 
> 赞同：0
> 
> 时间：2013-03-12T12:56:56.780
> 
> 标签：css, drop-down-menu, menu, center, submenu

我整天都在阅读和搜索。我什至阅读[了这篇文章](https://stackoverflow.com/questions/9577616/css-center-submenu-wordpress)并试图解决它，但没有成功。

所以，我想做的是一个带有子菜单的 CSS 菜单，并且子菜单以页面为中心。[这是我到目前为止所做的](http://art-ebox.com/robust_final/)。我想要的是子菜单完全以页面为中心显示。这可能吗？

这是HTML：

```
<div id="menu_panel">
  <div id="menu_2border">
    <div id="menu_section">
      <div id='menu1'>
        <ul>
          <li class='first sub'><a href='#'><span>Hem</span></a>
            <ul>
              <li><a href='#'><span>Privat</span></a></li>
              <li><a href='#'><span>Om Robust</span></a></li>
            </ul>
          </li>
          <li class='sub'><a href='#'><span>Koncept</span></a>
            <ul>
              <li><a href='#'><span>Insikt</span></a></li>
              <li><a href='#'><span>Koncept</span></a></li>
              <li><a href='#'><span>Aktivering</span></a></li>
            </ul>
          </li>
          <li class='sub'><a href='#'><span>Uppdrag</span></a>
            <ul>
              <li><a href='#'><span>Företag</span></a></li>
              <li><a href='#'><span>Privat</span></a></li>
            </ul>
          </li>
          <li class='sub'><a href='#'><span>Blogg</span></a>
            <ul>
              <li><a href='#'><span>Arkiv</span></a></li>
              <li><a href='#'><span>Kategori</span></a></li>
            </ul>
          </li>
          <li class='sub'><a href='#'><span>Om Robust</span></a>
            <ul>
              <li><a href='#'><span>Vad erbjuder vi?</span></a></li>
              <li><a href='#'><span>Vilka är vi?</span></a></li>
            </ul>
          </li>
          <li class='sub'><a href='#'><span>Kontakter</span></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

和CSS：

```
#menu_panel {
width:100%;
height: 49px;   
color:#4b4b4b;
display:block;
border-top:#efefef 1px solid;
}

#menu_2border {
width:100%;
border-top:#7a7a7a 1px solid;
}

#menu_section {
width: 960px;
height: 29px;   
margin:auto;
padding: 0 0 0 30px;
color:#4b4b4b;
background-color:#fff;
}

#menu1 ul,
#menu1 li,
#menu1 span,
#menu1 a {
margin: auto;
padding: 0;
position: relative;
}

#menu1 {
height: 29px;
background: #fff;
margin:auto;
}

#menu1:after,
#menu1 ul:after {
content: '';
display: block;
clear: both;
}

#menu1 a {
background: #fff;
color: #4b4b4b;
display: inline-block;
font-size: 15px;
line-height: 29px;
padding: 0px 40px;
text-decoration: none;
}

#menu1 ul {
list-style: none;
/* float: left; */
}

#menu1 > ul > li {
float: left;
}

#menu1 li .mainmenu {
border-right:#d8d8d8 1px dotted;
}

#menu1 > ul > li:hover:after { /* faz as setas debaixo dos items do menu */
content: '';
display: block;
width: 0;
height: 0;
position: absolute;
left: 50%;
bottom: 0;
border-left: 8px solid transparent;
border-right: 8px solid transparent;
border-bottom: 7px solid #fff;
margin-left: -10px;
}

#menu1 > ul > li.sub {
border-right:#d8d8d8 1px dotted;
}

#menu1 > ul > li.first {
border-left:#d8d8d8 1px dotted;
}

#menu1 > ul > li:hover > a {
background: #efefef;
}

#menu1 .sub {
z-index: 1;
}

#menu1 .sub:hover > ul {
display: block;
background-color:#
}

#menu1 .sub ul { /* faz o formato das caixas do sub-menu */
display: none;
position: absolute;
width: 803px;
height: 189px;
margin:auto;
border-bottom: #dddddd 1px solid;
border-left: #dddddd 1px solid;
border-right: #dddddd 1px solid;
background: #FFF;
}

#menu1 .sub ul li {
*margin-bottom: -1px;
}

#menu1 .sub ul li a {
background: #fff;
filter: none;
font-size: 13px;
display: block;
line-height: 120%;
padding: 10px 30px;
} 
```

请注意，菜单的每个项目中都有指向箭头，它们应该保持在原来的位置。应该居中的是大的子菜单矩形。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:34:44.187

您需要将定位应用于下拉菜单，并通过*仅*对其应用定位`absolute`使其与您的顶级菜单相关。这种直接关系意味着您可以将下拉菜单设置为and ，将其分别粘贴到顶级菜单的最左侧和最右侧，无论它出现在 HTML 中的哪个位置（即，它将匹配顶层的宽度）。`relative`*`left: 0``right: 0``ul`*

 *因为您已经设置`position:relative`了许多项目，并且您的某些代码可能依赖于这些项目，所以我无法轻易更改您的代码以使其工作。[但是，我在jsfiddle](http://jsfiddle.net/bMyVs/)上整理了这个快速演示来说明我的解释。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:35:13.133

我没有明确理解你的情况，你需要这样的东西吗？如果是这样，我会清楚地理解它。

```
#menu1 .sub ul { /* faz o formato das caixas do sub-menu */
 display: none;
 position: absolute;
 width: 803px;
 height: 189px;
 margin-left: -401.5px; /* width divided by 2 */
 left: 50%;
 border-bottom: #dddddd 1px solid;
 border-left: #dddddd 1px solid;
 border-right: #dddddd 1px solid;
 background: #FFF;
} 
```

[示例](http://jsfiddle.net/agriboz/hUF4u/1/)/[屏幕结果](http://jsfiddle.net/agriboz/hUF4u/2/embedded/result/)*

# java - 通过查询未分析的文本字段删除 Lucene 文档

> ID：15361880
> 
> 赞同：0
> 
> 时间：2013-03-12T12:57:07.170
> 
> 标签：java, lucene

我有 99% 的把握我过去有过这个工作，也许我错了。

无论如何，我想删除一个`Field`存储*但未*分析*且*包含文本的 Lucene 文档。

所以问题似乎是调用`luceneWriter.deleteDocuments(query)`不会删除文档，除非引用的字段`query`是`Field.Index.ANALYZED`或简单的数字。

一些代码：

```
Integer myId = 1234;
Document doc = new Document();
Field field = new Field("MyIdField", myId, Field.Store.YES, Field.Index.ANALYZED);
doc.add(field);
indexWriter.add(doc);
indexWriter.commit();

...

QueryParser parser = new QueryParser(VERSION, "MyIdField", ANALYZER);
Query query = parser.parse("MyIdField:1234");
indexWriter.deleteDocuments(query);
indexWriter.commit(); 
```

一切正常！
甜蜜..如果不分析该字段怎么办？

```
Field field = new Field("MyIdField", myId, Field.Store.YES, Field.Index.NOT_ANALYZED); 
```

仍然有效！
太棒了，如果它不只是一个数字怎么办？

```
Field field = new Field("MyIdField", "ID" + myId, Field.Store.YES, Field.Index.NOT_ANALYZED);
...
Query query = parser.parse("MyIdField:ID1234"); 
```

不工作！...该死的。
查询与文档不匹配，因此不会被删除。
如果我们做索引呢？

```
Field field = new Field("MyIdField", "ID" + myId, Field.Store.YES, Field.Index.ANALYZED);
...
Query query = parser.parse("MyIdField:ID1234"); 
```

它再次起作用！

好的，所以如果该字段*不被分析*，如果它只包含一个数字，它仍然可以被查询？我错过了什么吗？

感谢您抽出一些时间。

**注意：**
从技术上讲，有两个字段，使其成为`AND`查询。因此，我宁愿删除带有 a`Query`而不是 a的文档`Term`。我不确定这是否会有所不同，但我想强调我想坚持使用`Query`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:59:50.140

根据[这个问题](https://stackoverflow.com/questions/14745973/search-on-non-analyzed-field-using-lucene)，您必须使用 a`PhraseQuery`来搜索未分析的字段。你的代码

```
Query query = parser.parse("MyIdField:ID1234"); 
```

会产生 a `TermQuery`，因此不匹配。

I recommend you to try a `KeywordAnalyzer` instead (remember that, even if your field isn't analyzed, the query parser could still analyze your query string and therefore your match could fail anyway).

# python - 将文本特征名称链接到它们的 tfidf 值

> ID：15361885
> 
> 赞同：2
> 
> 时间：2013-03-12T12:57:19.867
> 
> 标签：python, machine-learning, text-processing, scikit-learn

我正在使用 scikit-learn 从“词袋”文本（在单个词上标记的文本）中提取文本特征。为此，我使用[TfidfVectorizer](http://scikit-learn.org/0.13/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html)来减少非常频繁的单词（即：“a”、“the”等）的权重。

```
text = 'Some text, with a lot of words...'
tfidf_vectorizer = TfidfVectorizer(
    min_df=1,  # min count for relevant vocabulary
    max_features=4000,  # maximum number of features
    strip_accents='unicode',  # replace all accented unicode char
    # by their corresponding  ASCII char
    analyzer='word',  # features made of words
    token_pattern=r'\w{4,}',  # tokenize only words of 4+ chars
    ngram_range=(1, 1),  # features made of a single tokens
    use_idf=True,  # enable inverse-document-frequency reweighting
    smooth_idf=True,  # prevents zero division for unseen words
    sublinear_tf=False)

# vectorize and re-weight
desc_vect = tfidf_vectorizer.fit_transform([text]) 
```

我现在希望能够将每个预测特征与其对应的`tfidf`浮点值链接起来，将其存储在一个字典中

```
{'feature1:' tfidf1, 'feature2': tfidf2, ...} 
```

我通过使用实现了它

```
d = dict(zip(tfidf_vectorizer.get_feature_names(), desc_vect.data)) 
```

我想知道是否有更好的 scikit-learn 本地方式来做这样的事情。

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:27:32.283

对于单个文档，这应该没问题。当文档集很小时，另一种方法是我的这个使用[Pandas](http://pandas.pydata.org/)[的食谱](https://gist.github.com/larsmans/3745866)。

如果您想对多个文档执行此操作，则可以调整以下代码[`DictVectorizer.inverse_transform`](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/feature_extraction/dict_vectorizer.py#L126)：

```
desc_vect = desc_vect.tocsr()

n_docs = desc_vect.shape[0]
tfidftables = [{} for _ in xrange(n_docs)]
terms = tfidf_vectorizer.get_feature_names()

for i, j in zip(*desc_vect.nonzero()):
    tfidftables[i][terms[j]] = X[i, j] 
```

# sql - 带有 linq 的子查询

> ID：15361890
> 
> 赞同：0
> 
> 时间：2013-03-12T12:57:37.080
> 
> 标签：sql, linq

我想用 linq 做一个子查询，但它不起作用。:-(我已经在谷歌搜索了答案，但我不知道如何解决这个问题。

这是我的 sql

```
string strSQL = @"SELECT a.ident, a.ben1 
                FROM pwdata a 
                WHERE a.iid = (SELECT max(b.iid) FROM pwdata b WHERE b.ident = a.ident)"; 
```

这就是我尝试使用 Linq 的方式，但这不是正确的方法

```
var query = from i in maxxContext.pwdata
            where i.IID = (SELECT max(b.iid) FROM pwdata b WHERE b.ident = a.ident) 
            orderby i.ident

            select new CompareParts
            {
                PartNumber = i.ident,
                PartName = i.ben1
            };
            return query.ToList().Distinct(); 
```

你们中的任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:01:01.537

目前尚不清楚您为什么开始将 LINQ 与常规 SQL 混合。它不是那样工作的。

这应该可以工作：

```
var query = from i in maxxContext.pwdata
            where i.IID == (pwdata.Where(b => b.ident == i.ident)
                                  .Max(b => b.iid))
            orderby i.ident
            select new CompareParts
            {
                PartNumber = i.ident,
                PartName = i.ben1
            }; 
```

或者，您可以加入：

```
var query = from i in maxxContext.pwdata
            join b in pwdata on i.ident equals b.ident into bs
            where i.IID == bs.Max(b => b.iid)
            orderby i.ident
            select new CompareParts
            {
                PartNumber = i.ident,
                PartName = i.ben1
            }; 
```

# javascript - Javascript 不隐藏内容

> ID：15361896
> 
> 赞同：0
> 
> 时间：2013-03-12T12:57:52.390
> 
> 标签：javascript, jquery

（我不确定要使用什么标题，所以我采用了我认为描述的内容，如果不合适请告诉我/更改它）

所以我制作这个英雄联盟网站已经有一段时间了，但遇到了麻烦。我一直在制作一个过滤器菜单来过滤“冠军”（英雄），只显示那些具有正确角色/能力的人。

所以我在复选框上有一个点击脚本，点击时应该显示正确的冠军。但它似乎不起作用。

当我取消选中文本框时，它正确地收回了所有的冠军，但是当我“检查”它时，所有的冠军都消失了（应该这样做），但它没有显示那些适用于过滤器的。（我在 DIV 上得到了所有正确的 id，我知道这一点，因为我有一个可以用于过滤的搜索栏，但我想要它的复选框，因为它更简单）

复选框：

```
 AD<input type="checkbox" name="adcarry" value="adcarry" id="check1" class="check1" onclick="boxchanged()">
    AP<input type="checkbox" name="apcarry" value="apcarry" id="check2" class="check2" onclick="boxchanged()"> 
    Carry<input type="checkbox" name="carry" value="carry" id="check3" class="check3" onclick="boxchanged()">
    Tank<input type="checkbox" name="tank" value="tank" id="check4" class="check4" onclick="boxchanged()">
    Support<input type="checkbox" name="support" value="support" id="check5" class="check5" onclick="boxchanged()">
    Jungler<input type="checkbox" name="jungler" value="jungler" id="check6" class="check6" onclick="boxchanged()">
    Burst<input type="checkbox" name="burst" value="burst" id="check7" class="check7" onclick="boxchanged()">
    <button type="button" onclick="boxchanged()">Reset</button> 
```

受影响的 div 设计如下：（职业会根据英雄的能力而变化）

```
 <div class="champion apcarry mid" id="ahri" onclick="OnClickChampion(this.id)"><img src="img/champions/ahri.jpg"> Ahri </div> 
```

脚本：

```
 function boxchanged ( )
    {   
        $("#num1").val("Search..");
        if ($("[type='checkbox']:checked").length == 0)
            {
                $(".champion").show(200);
            }
        else
            {
            $(".champion").hide(200);
            for (var i = 1;i < 7; i++)
                {
                    var name = "check"+i;
                    console.log(name)
                    var name2 = document.getElementById(name);
                    console.log(name2)
                    if (name2.checked == true)
                        {
                           var name3 = name2.name;
                            $("."+name3).show();
                        }   
                }
           }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:23:58.037

这是您的代码大大简化

[演示](http://jsfiddle.net/mplungjan/aLGpF/)

```
$(function() {
    $(".champion").on("click",function() {
      // put OnClickChampion here
    });    
    $(".check").on("click",function() {
      $("#num1").val("Search..");
      var checked = $("[type='checkbox']:checked");
        console.log(checked.length);
      if (checked.length == 0) {
        $(".champion").stop().show(200);
      }
      else {
        $(".champion").hide(200);
        checked.each(function() {
          var klass = $(this).val();
          $("."+klass).stop().show(200);
        });
      }    
    });
}); 
```

使用

```
<form>
  <label for="check1">AD</label>
    <input type="checkbox" value="adcarry" id="check1" class="check"/>
  <label for="check2">AP</label>
      <input type="checkbox" value="apcarry" id="check2" class="check"/> 
  <label for="check3">Carry</label>
      <input type="checkbox" value="carry" id="check3" class="check"/>
  <label for="check4">Tank</label>
      <input type="checkbox"value="tank" id="check4" class="check"/>
  <label for="check5">Support</label>
    <input type="checkbox" value="support" id="check5" class="check"/>
  <label for="check6">Jungler</label>
    <input type="checkbox"  value="jungler" id="check6" class="check"/>
  <label for="check7">Burst</label>
    <input type="checkbox" value="burst" id="check7" class="check"/>
  <button type="reset" class="check">Reset</button>
</form>
<div class="champion apcarry mid" id="ahri"><img src="img/champions/ahri.jpg"> Ahri </div> 
```

仅显示具有多个类的那些

```
 var klasses=[]
    checked.each(function() {
      klasses.push("."+$(this).val())
    });
    $(".champion").not(klasses.join(",")).stop().hide(200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:06:45.240

你应该停止任何动画

```
$("."+name3).stop().show(); 
```

# java - 用 Java 解析 HTML 页面

> ID：15361897
> 
> 赞同：1
> 
> 时间：2013-03-12T12:57:54.610
> 
> 标签：java, html, xml, xml-parsing, html-parsing

我正在解析这个页面段：

```
<tr valign="middle">
   <td class="inner"><span style=""><span class="" title=""></span> 2  <span class="icon ok" title="Verified"></span> </span><span class="icon cat_tv" title="Video » TV" style="bottom:-2;"></span> <a href="/VALUE.html" style="line-height:1.4em;">VALUE</a> </td>
   <td width="1%" align="center" nowrap="nowrap" class="small inner" >VALUE</td>
   <td width="1%" align="right" nowrap="nowrap" class="small inner" >VALUE</td>
   <td width="1%" align="center" nowrap="nowrap" class="small inner" >VALUE</td>
</tr> 
```

我在变量 tv 中有这个片段：`HtmlElement tv = tr.get(i);`

`<a href="/VALUE.html" style="line-height:1.4em;">VALUE</a>`我以这种方式阅读标签：

```
HtmlElement a = tv.getElementsByTagName("a").get(0);        
object.name.value(a.getTextContent());

url = a.getAttribute("href");
object.url_detail.value(myBase + url); 
```

我如何才能只读取其他`<td>....</td>`部分的 VALUE 字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:05:19.097

我建议使用[XPath](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/xpath/package-summary.html)，这是解析 XML/HTML 的推荐方式

参考：[如何在 Java 中使用 XPath 读取 XML](https://stackoverflow.com/questions/2811001/how-to-read-xml-using-xpath-in-java)

也看看这个问题：[RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

**更新**

如果我理解正确，您需要每个 td 的“价值”，对吧？如果是这样，您的 XPath 将是这样的：

```
//td[@class="small inner"]/text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T04:34:05.930

您可以尝试一个很棒的 java 包[**jsoup**](http://jsoup.org/)。

更新：使用包，你可以解决这样的问题：

```
 String html = "<tr valign=\"middle\">"
            + "   <td class=\"inner\">"
            + "   <span style=\"\"><span class=\"\" title=\"\"></span> 2  <span class=\"icon ok\" title=\"Verified\"></span> </span><span class=\"icon cat_tv\" title=\"Video » TV\" style=\"bottom:-2;\"></span>"
            + "   <a href=\"/VALUE.html\" style=\"line-height:1.4em;\">VALUE</a> "
            + "   </td>"
            + "   <td width=\"1%\" align=\"center\" nowrap=\"nowrap\" class=\"small inner\" >VALUE</td>"
            + "   <td width=\"1%\" align=\"right\" nowrap=\"nowrap\" class=\"small inner\" >VALUE</td>"
            + "   <td width=\"1%\" align=\"center\" nowrap=\"nowrap\" class=\"small inner\" >VALUE</td>"
            + "</tr>";
    Document doc = Jsoup.parse(html, "", Parser.xmlParser());
    Elements labelPLine = doc.select("a[href]");
    System.out.println("value 1:" + labelPLine.text());

    Elements labelPLine2 = doc.select("td[width=1%");
    Iterator<Element> it = labelPLine2.iterator();
    int n = 2;
    while (it.hasNext()) {
        System.out.println("value " + (n++) + ":" + it.next().text());
    } 
```

结果将是：

```
值 1：值
值 2：值
值 3：值
值 4：值

```

# wordpress - WordPress qtranslate 显示某些语言的帖子

> ID：15361900
> 
> 赞同：1
> 
> 时间：2013-03-12T12:57:57.497
> 
> 标签：wordpress, qtranslate

例如，我有 2 种语言：`EN`和 RU：如何在 index.php 帖子中仅以`RU`语言显示？也许是一些参数`wp_query`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T21:34:18.907

尝试使用 qtranslate 核心功能

```
function qtrans_use($lang, $text, $show_available=false) 
```

像这样的东西：

```
$mypost = get_post(get_the_ID()); 
$content = qtrans_use('ru', $mypost->post_content,false); 
echo "$content"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-18T16:01:09.737

在新版本的 qtranslate 和 qtranslate-x 中只能按以下方式工作：

```
$postId = get_the_ID();

wp_cache_delete($postId, 'posts');
$mypost = WP_Post::get_instance($postId);

$titleEn = qtrans_use('en', $mypost->post_title, false);
$titleRu = qtrans_use('ru', $mypost->post_title, false);
//or all object:
$mypost = qtrans_use('en', $mypost, false); 
```

查看更多信息（rus）：[https ://intsystem.org/coding/qtranslate-x-vyvod-stati-v-drugom-yazyke/](https://intsystem.org/coding/qtranslate-x-vyvod-stati-v-drugom-yazyke/)

# cakephp - 在 Cakephp 中使用 Acl 时 LoginAction 不起作用

> ID：15361901
> 
> 赞同：0
> 
> 时间：2013-03-12T12:57:59.963
> 
> 标签：cakephp

我在我的应用程序中使用 ACL。我在 AppController 的 beforeFilter 中定义了我的 loginAction，但它仍然没有重定向到正确的位置。我想做的是当用户像这样访问应用程序时 - localhost/intraweb 它必须重定向到 localhost/intraweb/users/login

这是我的 AppController 代码

```
class AppController extends Controller {

public $helpers = array('Html', 'Form', 'CustomFields.Field');

public $components = array(
'CustomFields.Field',
'Acl',
'Auth' => array(
'authorize' => array(
'Actions' => array('actionPath' => 'controllers')
)
),
'Session',
'Cookie',
);

public $uses = array('User');

public function beforeFilter() {       

//Configure AuthComponent
$this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
$this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
$this->Auth->loginRedirect = array('controller' => 'users', 'action' => 'login');
$this->Auth->allow('display');

//OTHER CODE

} 
```

这是我的 PagesController 代码

```
class PagesController extends AppController {

public function beforeFilter() {
parent::beforeFilter();
$this->Auth->allow();
}

//Other code 
```

有谁知道为什么它不重定向到用户/登录页面？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:17:58.670

loginRedirect 表示未找到 Auth Session 时调用的操作。简单来说就是一个登录页面。在不需要身份验证的情况下允许通过的操作将永远不会重定向到 loginRedirect。

当您访问 时`localhost/intraweb`，Cake 将呈现`Pages/display`并且因为您`$this->Auth->allow('display');`的代码中有。Auth 将让它呈现而不重定向到 loginRedirect。

**更新：**

在其他控制器中重新声明 beforeFilter() 会覆盖 AppController 中的所有声明。因此，如果要继承 AppController 中 beforeFilter() 的声明，

```
public function beforeFilter() {
    parent::beforeFilter(); // inherit beforeFilter() from AppController
    // your controller specific declarations
} 
```

# sql - 在 oracle 数据库中记录插入/更新/删除

> ID：15361903
> 
> 赞同：0
> 
> 时间：2013-03-12T12:58:01.330
> 
> 标签：sql, oracle, triggers

要了解一个应用程序，如果可以以某种方式记录每个数据库更改，那将是非常有帮助的。然后你可以在前端执行一个动作，看看数据库中发生了什么。（我只关心最后 5 分钟左右，但更多不会受到伤害。）这有什么可能性？

我知道可以[配置 JDBC 驱动程序](https://stackoverflow.com/questions/5738181/jdbc-logging-to-file)来记录执行的语句，但它记录的内容比我想看到的要多（例如，我不关心查询）并且被广泛地混合到您的日志文件中。：-/

我能想到的另一件事是为每个表创建触发器，将更改的数据写入日志表。有没有人设法做到这一点？特别是创建一个为给定的一组表创建这些触发器的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:15:42.640

您可以在 Oracle 文档中找到许多触发器示例。您需要在插入、更新、删除每一行触发器之后填充您的日志表。以下是 Oracle 文档中的一些示例：

[http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/triggers.htm#LNPLS020](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/triggers.htm#LNPLS020)

```
CREATE TABLE Emp_log (
  Emp_id     NUMBER,
  Log_date   DATE,
  New_salary NUMBER,
  Action     VARCHAR2(20));

 CREATE OR REPLACE TRIGGER Log_salary_increase_ARUID
  AFTER UPDATE OR INSERT OR DELETE ON emp
  FOR EACH ROW
BEGIN
  -- Can be separated for Inserting then Updating with addl if
  -- In this case it may be easier to control and/or add flags to your log tables
  -- such as Action = 'INS' or Action = 'UPD' --
  If (INSERTING OR UPDATING) 
  THEN
    -- Insert newly created/updated values to your log table --
    INSERT INTO Emp_log (Emp_id, Log_date, New_salary, Action)
     VALUES (:NEW.Empno, SYSDATE, :NEW.SAL, 'INS_UPD');
  ELSE  
    -- Deleting - insert old or deleted values to your logs --
   INSERT INTO Emp_log (Emp_id, Log_date, New_salary, Action)
     VALUES (:OLD.Empno, SYSDATE, :OLD.SAL, 'DEL');
END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:48:40.223

使用触发器，您可以只保留以前的数据（数据的历史记录）。为什么不简单地将日志插入日志表？

# google-maps - 嵌入谷歌地图街景

> ID：15361904
> 
> 赞同：1
> 
> 时间：2013-03-12T12:58:01.707
> 
> 标签：google-maps

我使用此代码在我的网站上嵌入谷歌地图，但我不确定 id 如何使用街景作为默认值。

ROADMAP 可以更改为 SATELLITE、HYBRID 或 TERRAIN，但没有街景选项

```
 <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

 <script type="text/javascript">
function initialize() {
    var latlng = new google.maps.LatLng(55.864237, -4.251806);
    var settings = {
        zoom: 15,
        center: latlng,
        mapTypeControl: true,
        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
        mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"), settings);
}
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T19:51:50.400

实际上谷歌不提供嵌入街景。所以你应该去一些第三方网络应用程序。您可以简单地将地图嵌入 iframe。例如，请参见下面的带有街景的埃菲尔铁塔地图的 iframe 代码。

```
<iframe width="600" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://my.ctrlq.org/maps/#street|1|-151.33967789165447|13.83601756954612|48.8586|2.29405799999995"></iframe> 
```

详细信息可以在[这里找到](http://www.joelsays.com/embed-google-maps-with-street-view/)

# php - 如何在php中数组的父项下显示子项

> ID：15361905
> 
> 赞同：3
> 
> 时间：2013-03-12T12:58:04.183
> 
> 标签：php, arrays, wordpress, for-loop

我有一个这样的数组：

```
Array
(
    [0] => stdClass Object
        (
            [ID] => 1
            [menu_item_parent] => 0
            [title] => Home
            [url] => http://www.example.com/
        )

    [1] => stdClass Object
        (
            [ID] => 2
            [menu_item_parent] => 0
            [title] => Menu 2
            [url] => http://www.example.com/menu-2/
        )

    [2] => stdClass Object
        (
            [ID] => 3
            [menu_item_parent] => 2
            [title] => Sub Menu 1
            [url] => http://www.example.com/menu-2/sub-menu-1
            [target] => 
        )

    [3] => stdClass Object
        (
            [ID] => 4
            [menu_item_parent] => 0
            [title] => Menu 4
            [url] => http://www.example.com/menu-4/
            [target] => 

        )
) 
```

现在您可以看到数组的第三项是第二个数组项的子项（请参见列`menu_item_parent`）。现在我的问题是如何使用此数组显示此父项及其子项。请帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T14:50:01.643

最后在给定链接的@Matt.C 的帮助下解决了我的问题。感谢@Matt.C。这是解决方案：

**首先将菜单项作为平面数组获取：**

```
<?php
$menu_name = 'main_nav';
$locations = get_nav_menu_locations();
$menu = wp_get_nav_menu_object( $locations[ $menu_name ] );
$menuitems = wp_get_nav_menu_items( $menu->term_id, array( 'order' => 'DESC' ) );
?> 
```

然后遍历菜单项数组：

```
<nav>
<ul class="main-nav">
    <?php
    $count = 0;
    $submenu = false;

    foreach( $menuitems as $item ):
        // get page id from using menu item object id
        $id = get_post_meta( $item->ID, '_menu_item_object_id', true );
        // set up a page object to retrieve page data
        $page = get_page( $id );
        $link = get_page_link( $id );

        // item does not have a parent so menu_item_parent equals 0 (false)
        if ( !$item->menu_item_parent ):

        // save this id for later comparison with sub-menu items
        $parent_id = $item->ID;
    ?> 
```

写第一个父项`<li>:`

```
 <li class="item">
        <a href="<?php echo $link; ?>" class="title">
            <?php echo $page->post_title; ?>
        </a>
        <a href="<?php echo $link; ?>" class="desc">
            <?php echo $page->post_excerpt; ?>
        </a>
    <?php endif; ?> 
```

检查此项目的父 ID 是否与存储的父 ID 匹配：

```
 <?php if ( $parent_id == $item->menu_item_parent ): ?>
Start sub-menu <ul> and set $submenu flag to true for later referance:

            <?php if ( !$submenu ): $submenu = true; ?>
            <ul class="sub-menu">
            <?php endif; ?>
Write the sub-menu item:

                <li class="item">
                    <a href="<?php echo $link; ?>" class="title"><?php echo $page->post_title; ?></a>
                    <a href="<?php echo $link; ?>" class="desc"><?php echo $page->post_excerpt; ?></a> 
```

如果下一项没有相同的父 id 并且我们声明了一个子菜单，则关闭子菜单`<ul>`

```
<?php if ( $menuitems[ $count + 1 ]->menu_item_parent != $parent_id && $submenu ): ?>
        </ul>
        <?php $submenu = false; endif; ?>

<?php endif; ?> 
```

同样，如果数组中的下一项没有相同的父 ID，则关闭`<li>`

```
 <?php if ( $menuitems[ $count + 1 ]->menu_item_parent != $parent_id ): ?>
    </li>                           
    <?php $submenu = false; endif; ?>

<?php $count++; endforeach; ?>
  </ul>
</nav> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T17:50:55.530

这是一个非常简单的类，用于解决您的 Wordpress 特定问题，其`get_submenu`函数返回所有子菜单项：

```
class NestedMenu
{
    private $flat_menu;
    public $items;

    function __construct($name)
    {
        $this->flat_menu = wp_get_nav_menu_items($name);
        $this->items = array();
        foreach ($this->flat_menu as $item) {
            if (!$item->menu_item_parent) {
                array_push($this->items, $item);
            }
        }
    }

    public function get_submenu($item)
    {
        $submenu = array();
        foreach ($this->flat_menu as $subitem) {
            if ($subitem->menu_item_parent == $item->ID) {
                array_push($submenu, $subitem);
            }
        }
        return $submenu;
    }
} 
```

**用法。**构造一个实例：

```
$menu = new NestedMenu('menu_name'); 
```

迭代：

```
foreach ($menu->items as $item) { ... 
```

并获取循环内的子菜单：

```
$submenu = $menu->get_submenu($item); 
```

在显示子菜单之前，您可以检查它是否存在：

```
if ($submenu): ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T13:10:50.137

试试这个：我将输入添加为数组，根据您的问题更改为对象。

```
$array  = Array( array("ID" => 1,"menu_item_parent" => 0,"title" => "Home","url" => "http://www.example.com/"),
                 array("ID" => 2,"menu_item_parent" => 0,"title" => "Menu 2","url" => "http://www.example.com/menu-2/"),
                 array("ID" => 3,"menu_item_parent" => 2,"title" => "Sub Menu 1","url" => "http://www.example.com/menu-2/sub-menu-1","target" =>"" ),
                 array("ID" => 4,"menu_item_parent" => 0,"title" => "Menu 4","url" => "http://www.example.com/menu-4/","target" => "")
          );

$res   = array();         
foreach($array as $val){
   if($val['menu_item_parent'] != 0){
       $res[$val['menu_item_parent']]['child'][] = $val;
   }
   else{
       $res[$val['ID']] = $val;
   }
}

echo "<pre>";
print_r($res); 
```

输出：

```
Array
(
    [1] => Array
        (
            [ID] => 1
            [menu_item_parent] => 0
            [title] => Home
            [url] => http://www.example.com/
        )

    [2] => Array
        (
            [ID] => 2
            [menu_item_parent] => 0
            [title] => Menu 2
            [url] => http://www.example.com/menu-2/
            [child] => Array
                (
                    [0] => Array
                        (
                            [ID] => 3
                            [menu_item_parent] => 2
                            [title] => Sub Menu 1
                            [url] => http://www.example.com/menu-2/sub-menu-1
                            [target] => 
                        )

                )

        )

    [4] => Array
        (
            [ID] => 4
            [menu_item_parent] => 0
            [title] => Menu 4
            [url] => http://www.example.com/menu-4/
            [target] => 
        )

) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:06:51.170

检查在 php.ini 中使用 foreach 函数。喜欢

```
$array = array("apple" => 1, "orange" => 2);
$sep = "";
foreach($array as $key => $value) {
  if($sep) {
    $sep .= "<br/>key:".$key." / value:".$value;
  } else {
    $sep = "key:".$key." / value:".$value;
  }
} 
```

**输出：**

> ```
> key:apple / value:1
> key:orange / value:2 
> ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T13:08:48.770

您可以遍历数组，如果对象有父对象，则将其添加到该父对象的`children`数组中。例如：

```
$array = array(

  1 => (object) array('menu_item_parent' => 0),
  2 => (object) array('menu_item_parent' => 1),
  3 => (object) array('menu_item_parent' => 0),

);

foreach ($array as $key => $object)
{

  if (0 != $object->menu_item_parent && isset($array[$object->menu_item_parent]))
  {

    if (!property_exists($array[$object->menu_item_parent], 'children'))
    {
        $array[$object->menu_item_parent]->children = array();
    }

    $array[$object->menu_item_parent]->children[] = $object;

    unset($array[$key]);    

  }

}

echo '<pre>' . print_r($array, TRUE) . '</pre>'; 
```

将转换：

```
Array
(
    [1] => stdClass Object
        (
            [menu_item_parent] => 0
        )

    [2] => stdClass Object
        (
            [menu_item_parent] => 1
        )

    [3] => stdClass Object
        (
            [menu_item_parent] => 0
        )

) 
```

至：

```
Array
(
    [1] => stdClass Object
        (
            [menu_item_parent] => 0
            [children] => Array
                (
                    [0] => stdClass Object
                        (
                            [menu_item_parent] => 1
                        )

                )

        )

    [3] => stdClass Object
        (
            [menu_item_parent] => 0
        )

) 
```

然后，您可以遍历每个对象并在需要时显示其子对象：

```
foreach ($array as $object)
{

  echo 'Parent: ' . $object->title . '<br>';

  if (property_exists($object, 'children') && !empty($object->children))
  {

    echo '&nbsp;&nbsp;&nbsp;Children: ';

    foreach ($object->children as $child)
    {
      echo $child->title . '<br>';
    }

  }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-13T10:37:13.597

这将是我的解决方案。将父对象下的子对象移入`children`并在父对象下创建一个布尔值，称为`has_child`which value will be `1`。最后，从主变量中取消设置并删除子变量。

```
$elements = wp_get_nav_menu_items("theme-location");

foreach($elements as $index => $item)
{
    if($item->menu_item_parent != 0)
    {
        foreach($elements as $index2 => $item2)
        {
            if($item2->ID == $item->menu_item_parent)
            {
                $elements[$index2]->has_child = true;

                if(!isset($elements[$index2]->children))
                {
                    $elements[$index2]->children = array();
                }
                $elements[$index2]->children[] = $item;
            }
        }
        unset($elements[$index]);           
    }
} 
```

# php - 与一张表不同，与另一张表不同

> ID：15361910
> 
> 赞同：0
> 
> 时间：2013-03-12T12:58:14.110
> 
> 标签：php, mysql, sql

我不确定问这个问题的正确方法：我想从一个表中选择一个不同的值并从另一个表中获取值....

```
$sql1 = mysql_query("SELECT DISTINCT County_ID FROM Customers ORDER BY County_ID ASC") or die(mysql_error());
while($row1 = mysql_fetch_array( $sql1 ))
{
    $sql2 = mysql_query("SELECT County_Value FROM Counties") or die(mysql_error());
    while($row2 = mysql_fetch_array( $sql2 ))
        {
            echo "Listed Counties : ".$row2['County_Value']." - id : ".$row1['County_ID']."<br>";
        }
} 
```

但是这样做我得到 ORDER BY County id，正确的方法是什么以及 ASC 中的值列表？谢谢。

```
$sql1 = mysql_query("SELECT DISTINCT County_ID, County_Value FROM Customers, Counties WHERE Counties.County_ID=Customer.County_ID ORDER BY County_Value ASC") or die(mysql_error()); 
```

PS：我应该说我想从客户表中获取列出的县列表，但它们从县表中存储为 id，所以我只想要不同的 countie_values ASC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:06:13.807

也许是这样的： -

```
SELECT CustomersSub.County_ID, County_Value 
FROM (SELECT DISTINCT County_ID FROM Customers) CustomersSub
INNER JOIN Counties 
ON Counties.County_ID = CustomersSub.County_ID 
ORDER BY County_Value ASC 
```

编辑 - 或使用聚合函数并计算每个县的客户：-

```
SELECT Counties.County_ID, County_Value, COUNT(Customers.County_ID) AS CustCountyCount
FROM Counties 
INNER JOIN Customers
ON Counties.County_ID = Customers.County_ID 
GROUP BY Counties.County_ID, County_Value
ORDER BY County_Value ASC 
```

# javascript - 在移动网络应用程序中加载多个选项卡和/或其视图时遇到问题

> ID：15361918
> 
> 赞同：3
> 
> 时间：2013-03-12T12:58:49.507
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我正在使用 sencha touch 制作移动应用程序。当用户登录然后他/她看到主页视图时，这个应用程序会做什么。在此`home view`有两个按钮。这两个按钮将用户带到各自的视图，即`Appointments`和`Messages`。这两个视图底部有三个选项卡按钮，即`Home, Appointments, Messages`. 主页按钮将用户带回`home view`由两个按钮组成的主页。而纽扣`Appointments`则把`Messages`他带到了他们自己的观点上。

这是我的`home view`

![在此处输入图像描述](../Images/b977c2d40aaec135d537a7ae45d713b7.png)

如您所见，此视图中没有选项卡。以下是此视图的代码

```
config: {
    layout: {
        type: 'vbox'
    },
    items: [
        {
            xtype: 'titlebar',
            title: 'Home',
            docked: 'top'
        },
        {
            xtype: 'button',
            cls: 'messagesBtn',
            itemId: 'msg'
        },
        {
            xtype: 'button',
            cls: 'appointmentsBtn',
            itemId: 'appoint'
        }
    ],

    listeners: [
        {
            delegate: '#appoint',
            event: 'tap',
            fn: 'launchAppointmentView'
        }
    ]
},
launchAppointmentView: function () {
    this.fireEvent('launchAppointments');
} 
```

一旦用户点击让我们说`Button 2`哪个带他去`Appointments View`。然后以下是向他显示的视图

![在此处输入图像描述](../Images/6ca5733099dcc5262dbc87fdb0c032e6.png)

和下面这个视图的代码

```
config: {
    tabBarPosition: 'bottom',

    items: [
        {
            title: 'Appointments',
            iconCls: 'home',

            styleHtmlContent: true,
            scrollable: true,

            items: {
                docked: 'top',
                xtype: 'titlebar',
                title: 'Appointments'
            },

            html: ["Appointments View"].join("")
        }
    ]
} 
```

加载此视图后，我只能看到一个约会选项卡。我想看到这三个视图的三个选项卡。**如何使其他选项卡可见？**

以下是我的消息视图

![在此处输入图像描述](../Images/4d538fedb9e44c06301acf4c3086e6ca.png)

这是它的代码

```
config: {
    tabBarPosition: 'bottom',

    items: [
        {
            title: 'Messages',
            iconCls: 'home',

            styleHtmlContent: true,
            scrollable: true,

            items: {
                docked: 'top',
                xtype: 'titlebar',
                title: 'Messages'
            },

            html: ["Messages View"].join("")
        }
    ]
} 
```

我看不到这个视图，也根本无法进入这个视图，因为我在选项卡上没有消息按钮。**同样，如何为这些视图添加所有选项卡按钮，以及当我单击每个选项卡时，它会将我带到它的视图？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:35:03.070

以下是选项卡面板的示例：

```
Ext.create('Ext.TabPanel', {
    fullscreen: true,
    tabBarPosition: 'bottom',

    defaults: {
        styleHtmlContent: true
    },

    items: [
        {
            title: 'Home',
            iconCls: 'home',
            html: 'Home Screen'
        },
        {
            title: 'Contact',
            iconCls: 'user',
            html: 'Contact Screen'
        }
    ]
}); 
```

问题是，您还没有在项目列表中添加附加项目 - 它们必须在选项卡、主页和联系人中。每个屏幕需要 3 个选项卡，因此每个文件有 3 个项目。

对于事件，我喜欢创建一个控制器，为每个需要监听事件的项目提供参考，并为每个项目设置控件。让我知道您是否需要帮助解决如何做到这一点。我将在下面包含一个简单的示例来帮助您入门：

```
Ext.define('Analytics.controller.events.InstType', {
    extend: 'Ext.app.Controller',   

    config: { 
        refs: {
            instType: {
            selector: '#instType'
        }
    }
},

init: function() {
    // Start listening for toggle events on the 3 segmented button panels   
    this.control({   
        'instType': { 'toggle': function(container, button, pressed) {
                this.onGraphType(container, button, pressed);
            }
        }
    }); 
},

// note: these functions are called on both the buttons selected and the one that became unselected
// the 'pressed' param inidicates whether this is the selected button or not.
onGraphType: function (container, button, pressed) {
    if (pressed) { ..do stuff.. }
}); 
```

# java - 来自 Blob 的 InputStream

> ID：15361933
> 
> 赞同：0
> 
> 时间：2013-03-12T12:59:19.487
> 
> 标签：java, performance, streaming, weblogic, mtom

我有一个场景，我需要将文件的内容从 DB 直接流式传输到客户端浏览器。

所以我使用普通的 jdbc `rs.getBlob()`，然后`blob.getBinaryStream();`写入一个 http 输出流。

我注意到（一件非常好的事情）是，一旦我通过 blob 获得输入流，数据库连接就会重新调整到数据源池。（网络逻辑）

现在我问你，我的观察是否正确？因为我担心对于需要很长时间的下载，数据库连接将停留在请求上以便能够流式传输文件。

显然，一旦开始流式传输，就不再使用数据库连接。

将在这里模拟一些代码以便更好地理解

```
@Trasactional
public void InputStream getIsFromBlob(....){

 ....
is = blob.getBinaryStream();
...

return is;

} 
```

后来这个方法被用在一个servlet中，比如说在http输出流中写下is的contect

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:22:00.730

如果不看代码，我认为您的想法是不正确的。您必须专门关闭连接才能关闭（通常在 finally 块中），或指定连接在数据库上可以活动多长时间。从 [这里开始](https://stackoverflow.com/a/10282631/1083581)：数据库服务器将超时并回收它。有关默认值以及如何更改它，请参阅 DB 服务器特定的管理手册。例如 MySQL，它的 wait_timeout 设置默认为 28800 秒（8 小时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:44:04.947

你说的是真的，连接可以被容器自动关闭。当对一个连接的所有引用都消失时，垃圾回收期间该连接将返回到连接池。但是，这通常被认为是不好的编程习惯，因为它通常是连接泄漏的主要原因。我建议您在不需要时通过 finally 块关闭连接。

对于您最初的问题，我会说您的观察是正确的。首先，您通过二进制输入流从 blob 中读取内容。此流式传输需要数据库连接。但是在从输入流读取完成后，您不再需要数据库连接。在您的情况下，该方法存在并且垃圾收集启动并将连接返回到池。稍后您通过 HttpOutputStream 将二进制内容流写入浏览器。此流式传输与 DB 无关。

**同样，我强烈建议不要依赖垃圾收集来将连接返回到连接池。**

# sharepoint-2013 - SharePoint 2013 搜索服务应用程序

> ID：15361934
> 
> 赞同：1
> 
> 时间：2013-03-12T12:59:20.493
> 
> 标签：sharepoint-2013

我已经构建了一个 SharePoint 2013 环境，并且一切都已成功设置。然后我不得不断开 SharePoint 2013 服务器与场的连接，然后我使用 SharePoint 2013 产品配置向导再次将其重新连接到场，然后我重新运行我最初用于安装 SharePoint 2013 的 AutoSPInstaller 脚本，这次是搜索服务应用程序未成功配置（在初始安装期间已通过 AutoSPInstaller 配置）。

在搜索服务应用程序搜索管理页面中，我在“搜索应用程序拓扑”下收到以下消息：

“无法检索拓扑组件健康状态。这可能是因为管理组件未启动和运行”

有没有人遇到过这个问题？它是如何解决的？

我已经安装了所需/附加的修补程序：KB2472264、KB2554876、KB2708075、KB2765317...

是否会通过中央管理员删除 Search Service 应用程序和与之关联的数据库（数据），然后再次运行 AutoSPInstaller 脚本来解决此问题？有人尝试过这种方法吗？

任何建议将不胜感激......我此刻正在撕扯我的头发......

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:22:13.483

在互联网上进行了大量研究后，解决此问题的一件事是通过中央管理员完全删除搜索服务应用程序，然后再次重新配置它。在我的情况下，这是通过“AutoSPInstaller”提供的，它成功了并解决了消息：

“无法检索拓扑组件健康状态。这可能是因为管理组件未启动和运行”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T08:44:18.763

1.删​​除损坏的搜索服务应用程序：

[http://pointsforsharing.com/Lists/Posts/Post.aspx?ID=5](http://pointsforsharing.com/Lists/Posts/Post.aspx?ID=5)

2.运行`powershell script:`

```
$hostA = Get-SPEnterpriseSearchServiceInstance -Identity "YourServerName"
Start-SPEnterpriseSearchServiceInstance -Identity $hostA
$UP = Get-SPServiceApplicationProxy | where {$_.TypeName -like "Usage*"}
$UP.Provision()
Get-SPEnterpriseSearchServiceInstance –Identity $hostA
$hostA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-11T05:58:38.367

我已经通过在安装 SHAREPOINT 之前安装这些更新来完成这项工作。如果我在安装 SharePoint 后安装这些更新，我对此不太走运..

# android - AlarmManager，重复警报和夏令时

> ID：15361936
> 
> 赞同：1
> 
> 时间：2013-03-12T12:59:22.283
> 
> 标签：android, alarmmanager, android-alarms

我安排了一个闹钟，每天在同一时间触发。我将其设置为重复警报（使用），它每毫秒（24 小时）[`AlarmManager.setRepeating()`](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)触发一次。`24 * 60 * 60 * 1000`我不知道我是否必须控制夏令时更改，或者它是自动的。

我对此进行了测试：

1.  我将移动设备时间更改为夏令时更改前的一分钟 ( `1:59`)（更改时间为凌晨 2 点至凌晨 3 点）。
2.  我安排了一个闹钟`3:01`。
3.  我等了 2 分钟，警报响起。

但是，如果我设置这个每天运行的警报，例如，在夏令时更改前 2 天......它会在夏令时更改后按预期运行吗？还是我需要控制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:04:42.373

您需要添加一个 TIMEZONE_CHANGED 接收器并重新安排您的闹钟（停止并重新启动）

```
<receiver android:name="RecevierTimeZoneChange">
  <intent-filter>
    <action android:name="android.intent.action.TIMEZONE_CHANGED"></action>
  </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T01:47:54.533

您还需要使用 TIME_TICK 意图。在 Android 上的每次时间更改时都会触发此意图。也由网络自动完成的未成年人更正。

# sip - PJsip 从 sip 方法中提取 header 的值

> ID：15361944
> 
> 赞同：2
> 
> 时间：2013-03-12T12:59:44.327
> 
> 标签：sip, pjsip

```
 NOTIFY sip:98901@xx.xx.xx.xx SIP/2.0
    To: sip:98901@xx.xx.xx.xx:1234
    From: sip:sipsak@xx.xx.xx.xx
    CSeq: 1 NOTIFY
    Call-ID:1234
    Event: check-sync;reboot=false 
```

我想用连接的字符串 check-sync;reboot=false 提取事件标头

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-05T23:08:36.830

```
pj_str_t event_hdr_name = pj_str("Event");
pjsip_generic_string_hdr *event_hdr = (pjsip_generic_string_hdr*)pjsip_msg_find_hdr_by_name(message, &event_hdr_name, NULL);
if (event_hdr == NULL)
    return NULL;
pj_str_t event_value = event_hdr->value;` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T12:13:26.090

我不得不处理一个自定义标题，有点类似于你的情况。它可能会帮助你。

你必须从*`init_parser`*. 此处解析 SIP 消息。在此处添加您自己的自定义函数。添加一个元素*`pjsip_rx_data`*并存储结果。此信息将传递到下游。最后在这里实现你的东西*`pres_process_rx_notify`*

# php - simple_html_dom -

> ID：15361950
> 
> 赞同：0
> 
> 时间：2013-03-12T13:00:02.350
> 
> 标签：php, curl, simple-html-dom

我已经使用 CURL 来获取这个 URL

```
$url = "http://www.juno.co.uk/all/today/?items_per_page=100&show_digital=0&show_tracks=0&show_covers=0";

$c = curl_init();
curl_setopt($c, CURLOPT_URL,"$url");
curl_setopt($c,CURLOPT_POST,true);
curl_setopt($c, CURLOPT_CONNECTTIMEOUT, 20); //give it adequate time
curl_setopt($c, CURLOPT_TIMEOUT, 50);
curl_setopt($c,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
curl_setopt($c, CURLOPT_RETURNTRANSFER,1);

if(!$complete = curl_exec($c))
    {
        echo "Failed to curl $url\n";
    } 
```

然后我尝试使用传递到简单的html dom

```
$home_page = str_get_html($complete); 
```

这会引发“PHP 致命错误：在非对象上调用成员函数 find()”错误

```
foreach($home_page->find('tr.row2') as $home_details)
{
      //do stuff
    } 
```

当我将“items_per_page”参数更改为 50 时，它就可以工作了。上面的链接是有效的，当我回显 $complete 时，它​​正在显示页面代码。

simple_html_dom 在脚本中较早加载并且可以正常工作。

我试过 file_get_html 而不是 CURL 和相同的结果

# maven - Maven原型什么是keepParent选项

> ID：15361964
> 
> 赞同：2
> 
> 时间：2013-03-12T13:00:19.897
> 
> 标签：maven, maven-3

我有一组原型项目，它们都继承自同一个父 pom。所有原型都会生成其 pom 继承自公司父 pom 的具体项目。

我没有设法得到目标的`keepParent`选项行为`archetype:create-from-project`。

有人可以以比 maven 文档更详细的方式向我解释什么是选项行为吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T15:57:19.293

keepParent 选项默认为 true，设置为 false 时似乎没有任何效果：快速查看代码（我检查了 v2.2）表明它没有实现。尽管如此，避免在生成的原型中生成父片段还是非常有用的。

仅供参考，文档可以在这里找到：[http](http://maven.apache.org/archetype/maven-archetype-plugin/create-from-project-mojo.html#keepParent) ://maven.apache.org/archetype/maven-archetype-plugin/create-from-project-mojo.html#keepParent 并且可以从以下位置访问代码：[http:// maven.apache.org/archetype/maven-archetype-plugin/source-repository.html](http://maven.apache.org/archetype/maven-archetype-plugin/source-repository.html)

# java - Android TimeoutException 连接到 maps.googleapis.com

> ID：15361965
> 
> 赞同：2
> 
> 时间：2013-03-12T13:00:20.060
> 
> 标签：java, android, networking, google-api

我正在开发一个使用 google apis 服务的 android 应用程序。

当我在家中使用 wifi 发出请求时，一切正常，但是当我在企业网络中时，请求失败。

**logcat 提取**

```
03-12 09:51:36.279: W/System.err(1213): java.net.SocketTimeoutException: failed          
to connect to maps.googleapis.com/74.125.132.95 (port 443) after 20000ms 03-12                           
09:51:36.299: W/System.err(1213): at libcore.io.IoBridge.connectErrno(IoBridge.java:159)
03-12 09:51:36.379: W/System.err(1213): at libcore.io.IoBridge.connect(IoBridge.java:112)
03-12 09:51:36.389: W/System.err(1213): at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
03-12 09:51:36.389: W/System.err(1213): at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
03-12 09:51:36.399: W/System.err(1213): at java.net.Socket.connect(Socket.java:842)
03-12 09:51:36.410: W/System.err(1213): at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
03-12 09:51:36.410: W/System.err(1213): at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
03-12 09:51:36.410: W/System.err(1213): at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
03-12 09:51:36.419: W/System.err(1213): at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
03-12 09:51:36.419: W/System.err(1213): at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
03-12 09:51:36.430: W/System.err(1213): at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)
03-12 09:51:36.430: W/System.err(1213): at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:461)
03-12 09:51:36.479: W/System.err(1213): at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:442 )
03-12 09:51:36.489: W/System.err(1213): at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
03-12 09:51:36.489: W/System.err(1213): at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
03-12 09:51:36.489: W/System.err(1213): at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:81)
03-12 09:51:36.509: W/System.err(1213): at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:165)
03-12 09:51:36.509: W/System.err(1213): at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:90)
03-12 09:51:36.520: W/System.err(1213): at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:895)
03-12 09:51:36.530: W/System.err(1213): at com.androidhive.googleplacesandmaps.GooglePlaces.search(GooglePlaces.java:63)
03-12 09:51:36.530: W/System.err(1213): at com.androidhive.googleplacesandmaps.MainActivity$LoadPlaces.doInBackground(MainActivity.java:183)
03-12 09:51:36.530: W/System.err(1213): at com.androidhive.googleplacesandmaps.MainActivity$LoadPlaces.doInBackground(MainActivity.java:1)
03-12 09:51:36.582: W/System.err(1213): at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-12 09:51:36.589: W/System.err(1213): at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-12 09:51:36.589: W/System.err(1213): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-12 09:51:36.599: W/System.err(1213): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-12 09:51:36.609: W/System.err(1213): at java.lang.Thread.run(Thread.java:856)
03-12 09:51:36.620: D/AndroidRuntime(1213): Shutting down VM
03-12 09:51:36.620: W/dalvikvm(1213): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-12 09:51:36.649: E/AndroidRuntime(1213): FATAL EXCEPTION: main
03-12 09:51:36.649: E/AndroidRuntime(1213): java.lang.NullPointerException
03-12 09:51:36.649: E/AndroidRuntime(1213): at com.androidhive.googleplacesandmaps.MainActivity$LoadPlaces$1.run(MainActivity.java:209)
03-12 09:51:36.649: E/AndroidRuntime(1213): at android.app.Activity.runOnUiThread(Activity.java:4644)
03-12 09:51:36.649: E/AndroidRuntime(1213): at com.androidhive.googleplacesandmaps.MainActivity$LoadPlaces.onPostExecute(MainActivity.java:203)
03-12 09:51:36.649: E/AndroidRuntime(1213): at com.androidhive.googleplacesandmaps.MainActivity$LoadPlaces.onPostExecute(MainActivity.java:1)
03-12 09:51:36.649: E/AndroidRuntime(1213): at android.os.AsyncTask.finish(AsyncTask.java:631)
03-12 09:51:36.649: E/AndroidRuntime(1213): at android.os.AsyncTask.access$600(AsyncTask.java:177)
03-12 09:51:36.649: E/AndroidRuntime(1213): at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
03-12 09:51:36.649: E/AndroidRuntime(1213): at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 09:51:36.649: E/AndroidRuntime(1213): at android.os.Looper.loop(Looper.java:137)
03-12 09:51:36.649: E/AndroidRuntime(1213): at android.app.ActivityThread.main(ActivityThread.java:5041)
03-12 09:51:36.649: E/AndroidRuntime(1213): at java.lang.reflect.Method.invokeNative(Native Method)
03-12 09:51:36.649: E/AndroidRuntime(1213): at java.lang.reflect.Method.invoke(Method.java:511)
03-12 09:51:36.649: E/AndroidRuntime(1213): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-12 09:51:36.649: E/AndroidRuntime(1213): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-12 09:51:36.649: E/AndroidRuntime(1213): at dalvik.system.NativeStart.main(Native Method)
03-12 09:56:36.880: I/Process(1213): Sending signal. PID: 1213 SIG: 9 
```

我已经用谷歌搜索了，但我没有任何有用的解决方案。我尝试增加连接超时但没有运气。

真的不知道是什么导致了问题，因为企业的 wifi 工作正常，但对于这个网站：`maps.googleapis.com`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:47:40.500

因为我在代理后面工作，所以我已经完成了这些步骤，之后我没有收到这个错误：

1.  要知道我支持的代理，我使用了这篇文章[https://superuser.com/questions/346372/how-do-i-know-what-proxy-server-im-using](https://superuser.com/questions/346372/how-do-i-know-what-proxy-server-im-using)

2.  在模拟器中，我转到“无线和网络设置”->“移动网络”->“接入点名称，并使用在 wpad.dat 文件中找到的端口设置代理名称

3.  在运行配置 > Android 应用程序 > 应用程序 > 目标 > 附加模拟器命令行选项：-http-proxy http://：

我希望它会帮助别人！

# android - 按下 EditText 时更改 EditText 中的文本

> ID：15361968
> 
> 赞同：0
> 
> 时间：2013-03-12T13:00:29.367
> 
> 标签：android, android-widget

可以单击并打开一些 EditText（例如在编写文本消息时），因此您可以更改 EditText 内的文本。它还为您提供键盘，以便您可以书写等。

我如何实现同样的目标？

目前我得到了这个：

```
public void onDescriptionBoxClick(View view) {
    EditText et = (EditText) this.findViewById(R.id.editText1);

} 
```

我不知道除此之外还能做什么。

我是否必须向前调用键盘以便用户可以编辑框中的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:04:33.340

您不能使用`TextView`. 要完成你想要的，你必须`TextView`用一个`EditText`小部件替换 。然后将其替换为`TextView`包含在`EditText`.

您可以通过以下几种方式完成此操作：

1.  使用 Fragment，更复杂。

2.  您可以使用简单`TextView`和`EditText`小部件并相应地设置它们`Visability`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:07:19.127

我会在你的 textView 旁边放置一个 EditText 元素，它的属性为 android:visibilty="gone"

然后在您的代码中：

```
public void onDescriptionBoxClick(View view) {
    TextView tv = (TextView) this.findViewById(R.id.textView2);
    tv.setVisibility(View.GONE);

    EditText et = (EditText) this.findViewById(R.id.editText2);
    et.setVisibilty(View.VISIBLE);
} 
```

# c# - 将 LinqPad 与 SMO 一起使用

> ID：15361970
> 
> 赞同：8
> 
> 时间：2013-03-12T13:00:33.313
> 
> 标签：c#, sql-server-2008-r2, smo, linqpad

我正在尝试将 SMO 用于 Sql Server 2008 R2 Standard，但每当我尝试`Dump`使用对象时都会遇到问题。

![错误](../Images/1c647a3461d78de287ff2165591d547f.png)

相关代码：

```
void Main()
{
    var connectionString = @"Server=(local);Trusted_Connection=True;";
    Server server = new Server(new ServerConnection(new SqlConnection(connectionString)));
    server.ConnectionContext.Connect();     

    server.Dump(); //Error      

    Database database = new Database(server, "master");
    database.Refresh();

    database.Dump(); // Error

    IEnumerable<Table> tables = database.Tables.Cast<Table>();

    tables.Dump(); //Error
} 
```

![组件](../Images/acd9290ebbf359185bac1283e2a08a23.png) ![包括](../Images/6808beb8e1c7edfec55cd87e3cc114db.png)

编辑：

我发现的一种`Dump`解决方法是使用具有固定递归深度的方法，例如`Dump(1)`，但每个对象的异常级别不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T04:11:30.327

正在发生的事情是，在 SMO 对象属性之一上调用 GetEnumerator 的行为会引发异常，并且 LINQPad 通过仅转储该异常而不是对象图的其余部分来响应。

我认为这是 LINQPad 中的一个错误，因此已在下一个 beta 版本中对其进行了修复。

然而，即使修复了这个问题，您也会发现在 SMO 对象上调用 Dump() 将花费很长时间，因为它有很多属性需要很长时间才能枚举。因此，您必须限制递归深度，或者调用 Dump(true)，这相当于单击“结果到 DataGrids”按钮。将结果转储到数据网格可以避免这个问题，因为网格会延迟渲染数据。

# sql - 为什么 UNION 比 OR 语句快

> ID：15361972
> 
> 赞同：11
> 
> 时间：2013-03-12T13:00:35.287
> 
> 标签：sql, sql-server, union

我有一个问题，我需要查找具有与值匹配的测量值**或**根本没有该测量值的记录。`JOIN`我使用s、using`NOT IN`和 using三种或四种不同的方法解决了这个问题`NOT EXISTS`。但是，查询最终每次都非常慢。然后我尝试将查询一分为二，它们都运行得非常快（三秒）。但是使用组合查询`OR`需要五分钟以上。

阅读 SO 我试过了`UNION`，这非常快，但对于我正在使用的脚本来说非常不方便。

所以两个问题：

1.  为什么`UNION`速度这么快？（或者为什么`OR`这么慢）？
2.  有什么办法可以强制对快速的语句`MSSQL`使用不同的方法 ？`OR`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T13:09:07.617

原因是`OR`在查询中使用通常会导致查询优化器放弃使用索引查找并恢复为扫描。如果您查看两个查询的执行计划，您很可能会看到`OR`正在使用`UNION`. 在没有看到您的查询的情况下，实际上不可能为您提供有关如何重组`OR`条件的任何想法。但是您可能会发现将行插入临时表并加入它可能会产生积极的结果。

此外，通常最好使用`UNION ALL`而不是`UNION`想要所有结果，因为您消除了行匹配的成本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T13:08:06.840

如果没有使用任何语句，SQL Server 目前无法强制`UNION`执行计划。`UNION`如果这两个部分之间的唯一区别是`WHERE`子句，请使用复杂查询创建一个视图。然后`UNION`查询变得非常简单：

```
SELECT * FROM dbo.MyView WHERE <cond1>
UNION ALL
SELECT * FROM dbo.MyView WHERE <cond2> 
```

`UNION ALL`尽可能在这种情况下使用是很重要的。如果您只使用`UNION`SQL Server，则必须过滤掉重复的行，这在大多数情况下需要昂贵的排序操作。

# c# - 如何在 C# 中处理这种异步编程场景

> ID：15361973
> 
> 赞同：1
> 
> 时间：2013-03-12T13:00:38.623
> 
> 标签：c#, asp.net, .net, c#-4.0, asynchronous

5分钟前我刚面试。我遇到了这种情况，他问我如何在 C# 1.0 或 2.0 中处理这个问题。他说有一个基本功能可以处理这个问题，我不确定。有人可以帮忙吗:(

问题：

Winform 应用程序中有 2 个文本框和一个按钮。一个文本框接受输入值，当单击按钮时，它会在服务器中处理输入，这会花费大量时间，最后会在另一个文本框中显示结果。由于服务器需要很长时间，UI不应该被打断，你如何处理他问我的这种情况:(

我给的答案：

我告诉了多线程并谈到了异步和等待。他期待在 C# 2.0 中有一种简单的方法来处理这个问题。我在猜测异步委托。他不相信。请有人用几乎可以理解的代码解释我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:07:20.863

您将在 UI 的单独线程中运行长时间运行的进程以防止它挂起，`BackgroundWorker`例如可能会使用 a：-

```
bgWorker.RunWorkerAsync([DATA TO PROCESS])//Passing in data to operate on

private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
{
      MyObject obj = (MyObject)sender;

      //
      // Do some work with the data on the server
      // 

      // Report on progess, is it done?
      bgWorker.ReportProgress();
} 
```

你也可以有一个工作完成方法

```
 private void bgWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
 {
       //Work is complete, notify user
 } 
```

您也可以使用[ThreadPool](http://msdn.microsoft.com/en-GB/library/system.threading.threadpool.aspx)，这需要更多设置，但我发现它更灵活。例如： -

```
ThreadPool.QueueUserWorkItem(new WaitCallback(DoWork), [DATA TO PROCESS]);
Interlocked.Increment(ref workItems); 
```

workItems 将是剩余要处理的项目数的计数，这可用于跟踪任务是否完成。然后我们定义一个`DoWork`方法来处理数据并减少我们的 workItems 计数器。处理完项目后，我们会通过代表报告进度，例如：-

```
 private delegate void ThreadDone(MyObject obj);
  private delegate void TaskDone();

  public void DoWork(object sender)
   {
        MyObject obj = (MyObject)sender;

        this.Invoke(new ThreadDone(ReportProgress), result);
        Interlocked.Decrement(ref workItems);

        if (workItems == 0)
        {
            this.Invoke(new TaskDone(WorkComplete));
        }
    } 
```

报告进度可能如下所示：-

```
private void ReportProgress(MyObject obj)
{
    if (workItems >= 0)
    {
        //Job isn't complete, report progress             
    }
}

private void WorkComplete()
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:06:47.617

在 .Net 2 winform 应用程序中，最简单的解决方案是使用[BackgroundWorker](http://msdn.microsoft.com/en-gb/library/system.componentmodel.backgroundworker.aspx)。它的事件在 UI 线程上引发，因此您不需要自己进行任何编组。

通常的模式如下所示：

```
BackgroundWorker bg = new BackgroundWorker();
bg.DoWork += delegate(object sender, DoWorkEventArgs e) {
    try {
        e.Result = server.LongRunningOperation();
    }
    catch(Exception ex) {
        e.Error = ex;
    }
};

bg.RunWorkerCompleted += delegate(object sender, RunWorkerCompletedEventArgs e) {
    //update UI
};

bg.RunWorkerAsync(); 
```

# java - Hibernate HQL 返回过时的数据？

> ID：15361975
> 
> 赞同：3
> 
> 时间：2013-03-12T13:00:42.960
> 
> 标签：java, hibernate, hql

我的 Hibernate HQL 查询似乎返回了陈旧的数据。

我有一个名为 Account 的简单 java 类，它的实例映射到具有两个 varchar 列、用户名和姓氏的单个数据库表。

如果我运行 HQL 查询，例如：

```
List<?> accountList = session.createQuery("from Account where surname is null").list(); 
```

正如预期的那样，我得到了一个 Account 对象列表（表中的某些行确实有 null surname 字段）。

然后，我将返回对象的姓氏设置为某个非空值：

```
Iterator<?> accountIter = accountList.iterator();
while (accountIter.hasNext()) {
  Account account = (Account) accountIter.next();
  log("Adding surname of Jones to : " + account.getUsername());
  account.setSurname("Jones");
} 
```

此时，如果我再次运行 HQL 查询，我希望返回一个空列表（因为所有姓氏都应该是非空的），但我会返回与第一次运行查询时相同的对象。这不是我所期望的。

引用 Hibernate 文档：

[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/)

“绝对不能保证 Session 何时执行 JDBC 调用，只能保证它们执行的顺序。但是，Hibernate 确实保证 Query.list(..) 永远不会返回陈旧或不正确的数据。”

这似乎与我的代码的行为相反。查看下面清单 4 中的程序输出，SQL Update 语句发生在所有 select 语句之后，因此最后一个 select 返回不正确的数据。任何人都可以阐明发生了什么，或者我做错了什么？

如果我用事务围绕姓氏的设置，并执行`session.saveOrUpdate(account)` 一切工作，但我认为这不是必需的。

我希望我的代码尽可能只处理域类，并尽可能地没有持久性代码。

我正在使用带有 Java 1.6 的 Hibernate 4.1.8.Final

我的完整代码清单如下：

清单 1：Main.java：

```
package uk.ac.york.cserv.hibernatetest;

import java.util.Iterator;
import java.util.List;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class Main {

    private static SessionFactory sf;
    Session session;

    public static void main(String[] args) {
        Main main = new Main();
        main.doExample();
    }

    public Main() {
        sf = new Configuration()
            .configure("hibernate-ora.cfg.xml")
            .buildSessionFactory();
        session = sf.openSession();
    }

    public void closeSession() {
        session.flush();
        session.close();
    }

    public List<?> getAccountList() {
        return session.createQuery("from Account where surname is null").list();
    }

    public void printAccountList(List<?> accountList) {
        Iterator<?> accountIter = accountList.iterator();
        while (accountIter.hasNext()) {
            System.out.println(accountIter.next());
        }
    }

    public void log(String msg) {
        System.out.println(msg);
    }

    public void doExample() {

        log("Print all accounts with null surnames...");
        printAccountList(getAccountList());

        log("Adding surnames to accounts that have null surnames...");
        //session.beginTransaction();
        Iterator<?> accountIter = getAccountList().iterator();
        while (accountIter.hasNext()) {
            Account account = (Account) accountIter.next();
            log("Adding surname of Jones to : " + account.getUsername());
            account.setSurname("Jones");
            //session.saveOrUpdate(account);
        }
        //session.getTransaction().commit();

        log("Again print all accounts that have null surnames (should be none)...");
        printAccountList(getAccountList());

        closeSession();
    }
} 
```

清单 2：Account.java：

```
package uk.ac.york.cserv.hibernatetest;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="ACCOUNTS")
public class Account {

    @Id
    @Column(name = "USERNAME", unique = true, nullable = false)
    private String username;

    @Column(name = "SURNAME")
    private String surname;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getSurname() {
        return surname;
    }

    public void setSurname(String surname) {
        this.surname = surname;
    }

    @Override
    public String toString() {
        return "Account [username=" + username + ", surname=" + surname + "]";
    }
} 
```

清单 3：Hibernate-ora.cfg.xml：

```
<hibernate-configuration>

    <session-factory>

        <!-- Database connection settings -->
        <property name="connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
        <property name="connection.url">jdbc:oracle:thin:@testhost:1521:test</property>
        <property name="connection.username">testschema</property>
        <property name="connection.password">testpassword</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.Oracle10gDialect</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Names of the annotated classes -->
        <mapping class="uk.ac.york.cserv.hibernatetest.Account"/>

    </session-factory>

</hibernate-configuration> 
```

清单 4：程序的输出：

```
Print all accounts with null surnames...
Hibernate: select account0_.USERNAME as USERNAME0_, account0_.SURNAME as SURNAME0_ from ACCOUNTS account0_ where account0_.SURNAME is null
Account [username=user2, surname=null]
Adding surnames to accounts that have null surnames...
Hibernate: select account0_.USERNAME as USERNAME0_, account0_.SURNAME as SURNAME0_ from ACCOUNTS account0_ where account0_.SURNAME is null
Adding surname of Jones to : user2
Again print all accounts that have null surnames (should be none)...
Hibernate: select account0_.USERNAME as USERNAME0_, account0_.SURNAME as SURNAME0_ from ACCOUNTS account0_ where account0_.SURNAME is null
Account [username=user2, surname=Jones]
Hibernate: update ACCOUNTS set SURNAME=? where USERNAME=? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:20:07.520

您描述的休眠行为没有什么奇怪的

*“此时，如果我再次运行 HQL 查询，我希望返回一个空列表（因为所有姓氏都应该是非空的），但我会返回与第一次运行查询时相同的对象. 这不是我所期望的。*

此时，当您再次运行 HQL 查询时，到目前为止您还没有对数据库进行任何操作。这就是您获得所谓的“陈旧”数据的原因，但它实际上是表中仍未修改的最新版本

如果您发出 saveOrUpdate 命令并关闭事务，您在 Java 类中所做的更改将持久保存到数据库，以便新的 HQL 查询执行显示更新的数据

我认为您误解了 Hibernate 在此用例中的工作方式。正是因为“Hibernate 确实保证 Query.list(..) 永远不会返回陈旧或不正确的数据。” 您会看到来自数据库的数据的更新版本，从数据库的角度来看，您在 Java 类中的更改是“陈旧”的，并被来自原始仍未修改的源的新“新鲜”真实数据所取代

# macos - 为什么 tempdir() 在 osx 的目录树末尾添加了额外的斜杠？

> ID：15361980
> 
> 赞同：5
> 
> 时间：2013-03-12T13:01:00.927
> 
> 标签：macos, r, file, path

一路上的某个地方`tempdir()`在树末尾的目录之前添加了一个额外的正斜杠。这有什么原因吗？是否有任何重要的情况？根据另一个站点的[这个答案](https://unix.stackexchange.com/a/11965)，目录树中的双斜杠无关紧要（但它们在路径的开头确实如此），那么为什么`R`在 osx 上要添加一个额外的斜杠呢？

这可以被认为是一个错误还是有必要的情况？在示例中，两条路径都正确解析：

```
tempdir()
  [1] "/var/folders/ck/1x5j5jvx5mq17clf5r32gg540000gn/T//Rtmpp6VKKK"
normalizePath( tempdir() )
  [1] "/private/var/folders/ck/1x5j5jvx5mq17clf5r32gg540000gn/T/Rtmpp6VKKK"

setwd( tempdir() )
write.table("" , file="This is a test.txt")

system( paste0( "cd " , tempdir() , "; ls -a" ) )
  .
  ..
  This is a test.txt

system( paste0( "cd " , normalizePath( tempdir() ) , "; ls -a" ) )
  .
  ..
  This is a test.txt 
```

顺便说一句，我意识到它与该站点不是很相关，但也许有更多`osx`经验的人可以阐明为什么`normalizePath()`更改`/var`为`/private/var`? 这与别名有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:06:30.810

# android - Android setError() 保持空白

> ID：15361983
> 
> 赞同：1
> 
> 时间：2013-03-12T13:01:06.230
> 
> 标签：android, validation

我有这几行代码来验证表单输入。但是，它不输出任何东西 - 只是一个空白框。请问我错过了什么？

```
 public void onClick(View view)
 {
    if( view.getId() == R.id.btnLogin )
    {
        TestClass.setUsername( txtUserName.getEditableText().toString() );
        TestClass.setPassword( txtPassword.getEditableText().toString() );

        if( TestClass.getUsername().toString().length() == 0 )
        {
            this.txtUserName.setError( "Incorrect input!" );
        }
        else if( TestClass.getPassword().toString().length() == 0 )
        {
         this.txtPassword.setError( "Incorrect input!" );
        }
        else
        {
               // do the login stuff here
        }
     } 
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:04:36.720

试试这个，

```
int ecolor = Color.RED; // whatever color you want
String estring = "Input is incorrect";  // your error message
ForegroundColorSpan fgcspan = new ForegroundColorSpan(ecolor);
SpannableStringBuilder ssbuilder = new SpannableStringBuilder(estring);
ssbuilder.setSpan(fgcspan, 0, estring.length(), 0);
myedittext.setError(ssbuilder); 
```

来源：[Android EditText.setError() 产生不可见的错误文本](https://stackoverflow.com/questions/7273932/android-edittext-seterror-yields-invisible-error-text)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T09:58:38.670

使用 Html 对象进行简单快速的格式化：

```
this.txtUserName.setError(Html.fromHtml("<font color='red'>Incorrect input!</font>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:09:41.963

试试这个代码：

```
 if (editTextName.getText().toString().length() == 0) {
                    int ecolor = getResources().getColor(R.color.blue); // whatever color you want
                    String estring = "Input is incorrect";
                    ForegroundColorSpan fgcspan = new ForegroundColorSpan(ecolor);
                    SpannableStringBuilder builder = new SpannableStringBuilder(estring);
                    ssbuilder.setSpan(fgcspan, 0, estring.length(), 0);
                    editTextName.setError( builder );

                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T08:40:40.000

我刚刚在我的项目中更改了应用程序主题“清单文件和错误文本现在出现了。

更改前：

```
android:theme="@android:style/Theme.Light.NoTitleBar" 
```

更改后：

```
android:theme="@android:style/Theme.Black.NoTitleBar" 
```

# c# - 分享列表 两个线程之间

> ID：15361985
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:01:10.260
> 
> 标签：c#, multithreading

```
private static Thread thread;
private static List<object> items = new List<object>();

static Program()
{
   thread = new Thread(() =>
      {
         foreach (var item in items)
         {
            item.Name = "ABC";
         }
         Thread.Sleep(3600);
      });
   thread.Start();
}

private static void Main(string[] args)
{
   var item = items.Where(i => i.Name == "ABC").FirstOrDefault();
   if(item != null)
      {
         items.Remove(item);
      }

} 
```

如您所见，在使用 List 启动的应用程序上启动了线程，对列表执行一些操作，并且主线程使用相同的 List。

当新线程的 foreach 循环内的代码正在执行并且同时 foreach 循环也被执行时，它会抛出您无法修改列表的错误。

知道如何克服这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:09:52.900

您正在谈论的主题是线程安全

为此，您必须使用同步方法

**编辑：**

抱歉，当然是 C#，请看这里：http: [//msdn.microsoft.com/en-us/library/ms173179.aspx](http://msdn.microsoft.com/en-us/library/ms173179.aspx)

它与 java 中的同步几乎相同，您只需在使用它的持续时间内锁定对象，这样您的线程就可以保持安全

请注意，当对象被锁定时，所有其他试图访问该对象的线程都必须等待，这可能会导致死锁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:38:43.780

在您的示例中，您**没有**修改枚举中的集合。但是，您在枚举之外修改集合，如果在枚举期间发生这种情况，您将收到异常`InvalidOperationException: Collection was modified`。

来自[MSDN](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)：

> 只要不修改集合，List(T) 可以同时支持多个读取器**。**通过集合进行枚举本质上不是线程安全的过程。在枚举与一个或多个写访问竞争的极少数情况下，**确保线程安全的唯一方法是在整个枚举期间锁定集合**。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。

```
private static Thread thread;
private static List<object> items = new List<object>();
private Object theLock = new Object();

static Program()
{
  thread = new Thread(() =>
    {
      lock(theLock)
      {
        foreach (var item in items)
        {
          item.Name = "ABC";
        }
      }
      Thread.Sleep(3600);
    });
  thread.Start();
}

private static void Main(string[] args)
{
  lock(theLock)
  {
    var item = items.Where(i => i.Name == "ABC").FirstOrDefault();
    if(item != null)
    {
      items.Remove(item);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T13:07:30.277

你确定这是一个多线程问题吗？List 是相对线程安全的，Add 和 remove 方法都足够快（据我所知）MS 不认为这是一个问题，这与 Queue 和 ConcurrentQueue 不同

请注意，您不能在使用 foreach 循环遍历集合时修改集合，因此

```
List<int> integers = new List<int>(new int[] { 1,2,3,4,5,} );
foreach(int i in integers)
    integers.Add(1); // Will throw an InvalidOperationException 
```

# assembly - 如何使字符串向右移动（汇编中的视频服务）

> ID：15361987
> 
> 赞同：0
> 
> 时间：2013-03-12T13:01:12.557
> 
> 标签：assembly, x86, dos, tasm

再会！我是汇编语言的新手（尤其是 TASM），我这里有一个简单的球（字符串，由字符组成），我想把它移到右边。

```
 .MODEL  SMALL
  .STACK  100
  .DATA

    ball DB 10," #######"
         DB 10,"#       #"
         DB 10,"#       #"
         DB 10,"#       #"
         DB 10," #######","$"
    ROW1 DB 5   
    ROW2 DB 10
    COL DB 25       
    MAX     DB ?
    RAND    DB ?
    ATT DB 5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5

 .CODE
    .STARTUP
        mov ax, @data       ;required
        mov ds, ax

        MOV AX, 3       ; 80x25 color
        INT 10H         ; video BIOS call   
        MOV AH, 2       ; set cursor position
        MOV BH, 0       ; display page number
        MOV DH, ROW1        ; row number
        MOV DL, COL     ; column number
        INT 10H         ; video BIOS call
        LEA BP, ATT ; point to first attribute array
        CALL FAR PTR MOVE  ; display first line of video text

        MOV MAX, AL ;max=10
            @TIMELOOPS1:
                ;get system time
                MOV AH, 2Ch
                INT 21h
                MOV RAND, DH
            @WAIT1SEC1:
                MOV AH, 2Ch
                INT 21h
                CMP RAND, DH
                JE @WAIT1SEC1

                MOV AH, 2
                MOV DL, '.'
                INT 21H
                MOV AH, 2       ; set cursor position
                MOV BH, 0       ; display page number
                MOV DH, ROW2        ; row number
                MOV DL, COL     ; column number
                INT 10H         ; video BIOS call
                LEA BP, ATT     ; point to first attribute array
                CALL FAR PTR MOVE   ; display first line of video text

                ;clear

                DEC MAX
                CMP MAX, 0
                JNE @TIMELOOPS1     
    .EXIT

    MOVE PROC FAR
        MOV SI, 0   ; set up array pointer
        NEXT:   
            MOV AL, ball[SI]; get name character
            ;xor al, al
            CMP AL, '$'   ; exit if character is 0
            JZ EXIT  
            CMP AL, 10
            JE LF
            MOV BH, 0   ; display page number
            MOV BL, [BP+SI] ; get attribute
            MOV CX, 1   ; do 1 character
            MOV AH, 9   ; write character/attribute on screen
            INT 10H     ; video BIOS call
            INC SI      ; point to next character/attribute
            ADD DL, 1   ; move one column to the right
            MOV AH, 2   ; set cursor position
            INT 10H     ; video BIOS call
            JMP NEXT    ; and continue

        EXIT:  ret

        LF:
            MOV BH, 0   ; display page number
            MOV BL, [BP+SI] ; get attribute
            MOV CX, 1   ; do 1 character
            MOV AH, 0Ah   ; write character/attribute on screen
            MOV AL, 10
            INT 12H     ; video BIOS call
            INC SI      ; point to next character/attribute
            ADD DH, 1   ; move one column to the right
            MOV DL,0
            MOV AH, 2   ; set cursor position
            INT 10H     ; video BIOS call
            JMP NEXT    ; and continue

    MOVE ENDP

END 
```

我想做的是`.`每隔一秒打印一个点，这样球就会向右移动。但它只是打印一个点，然后再次打印球串。

现在，我正在考虑清除初始球，然后将其移动到接下来的 3 列。但是，它会令人困惑，因为它已经操作了每个字符的列和行以打印整个字符串。

请帮我让球动起来。非常感谢！

**编辑**

继吉姆米歇尔爵士之后，我在致电后添加了`MOV AL, COL`, 。但是，它只显示一次球并且程序不会停止（我看不到）。`INC AL``MOV COL, AL``MOVE``J:/TASM/BIN`

```
 .MODEL  SMALL
  .STACK  100
  .DATA

    ball DB 10," #######"
         DB 10,"#       #"
         DB 10,"#       #"
         DB 10,"#       #"
         DB 10," #######","$"
    ROW1 DB 5   
    ROW2 DB 10
    COL DB 25       
    MAX     DB ?
    RAND    DB ?
    ATT DB 5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5

 .CODE
    .STARTUP
        mov ax, @data       ;required
        mov ds, ax

        MOV MAX, AL ;max=10
            @TIMELOOPS1:
                ;get system time
                MOV AH, 2Ch
                INT 21h
                MOV RAND, DH
            @WAIT1SEC1:
                MOV AH, 1
                INT 16h
                ;JNZ @ENDPROGRAM
                MOV AH, 2Ch
                INT 21h
                CMP RAND, DH
                JE @WAIT1SEC1

                MOV AX, 3       ; 80x25 color
                INT 10H         ; video BIOS call   
                MOV AH, 2       ; set cursor position
                MOV BH, 0       ; display page number
                MOV DH, ROW2        ; row number
                MOV DL, COL     ; column number
                INT 10H         ; video BIOS call
                LEA BP, ATT     ; point to first attribute array
                CALL FAR PTR MOVE   ; display first line of video text
                MOV AL, COL
INC AL
MOV COL, AL

                ;clear

                DEC MAX
                CMP MAX, 0
                JNE @TIMELOOPS1     
    .EXIT

    MOVE PROC FAR
        MOV SI, 0   ; set up array pointer
        NEXT:   
            MOV AL, ball[SI]; get name character
            ;xor al, al
            CMP AL, '$'   ; exit if character is 0
            JZ EXIT  
            CMP AL, 10
            JE LF
            MOV BH, 0   ; display page number
            MOV BL, [BP+SI] ; get attribute
            MOV CX, 1   ; do 1 character
            MOV AH, 9   ; write character/attribute on screen
            INT 10H     ; video BIOS call
            INC SI      ; point to next character/attribute
            ADD DL, 1   ; move one column to the right
            MOV AH, 2   ; set cursor position
            INT 10H     ; video BIOS call
            JMP NEXT    ; and continue

        EXIT:  ret

        LF:
            MOV BH, 0   ; display page number
            MOV BL, [BP+SI] ; get attribute
            MOV CX, 1   ; do 1 character
            MOV AH, 0Ah   ; write character/attribute on screen
            MOV AL, 10
            INT 12H     ; video BIOS call
            INC SI      ; point to next character/attribute
            ADD DH, 1   ; move one column to the right
            MOV DL,0
            MOV AH, 2   ; set cursor position
            INT 10H     ; video BIOS call
            JMP NEXT    ; and continue

    MOVE ENDP

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:19:22.433

在您的代码中，您在调用`MOVE`proc 之前具有以下内容：

```
MOV DL, COL     ; column number
INT 10H         ; video BIOS call
LEA BP, ATT     ; point to first attribute array
CALL FAR PTR MOVE   ; display first line of video text 
```

如果您想在每次循环中向右移动，则必须在`COL`每次循环中增加值。我建议在调用后添加以下内容`MOVE`：

```
MOV AL, COL
INC AL
MOV COL, AL 
```

所以第一次通过循环，`COL`是 25。下一次是 26，等等。. .

# matlab - MATLAB - bsxfun 用于负值

> ID：15361988
> 
> 赞同：0
> 
> 时间：2013-03-12T13:01:13.847
> 
> 标签：matlab, normalization, bsxfun

我正在使用命令规范化数据集

```
X=bsxfun(@times,bsxfun(@minus,X,min(X,[],1)),1./max(X,[],1)) 
```

我在两个不同的数据集上尝试了这个函数。一个也有负值。其他人没有。没有负值的数据集在 0 和 1 之间完美归一化。并且具有负值的那个没有正确规范化。这可以解决吗？还有另一种方法可以用负值规范化数据集吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:12:40.203

罪魁祸首在于你的正常化。您减去然后除以`min(X)`，而不是除以。`X``max(X)``max(X - min(X))`

您应该做的是将其分为两个步骤：

```
Y = bsxfun(@minus, X, min(X));
X_normalized = bsxfun(@rdivide, Y, max(Y)); 
```

请注意，这无论如何都不能正常工作，无论是正值还是负值。

还有一些注意事项：

1.  `min(X, [], 1)`可以缩短为`min(X)`。也是如此`max`。
2.  您可以使用 ，而不是使用`times`in`bsxfun`来乘以。`1 ./ max(Y)``rdivide`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:04:58.030

好吧，这个帖子真的让我很不安。

我从来没有听说过bsxfun。我正在使用arrayfun、cellfun、structfun。所以我徘徊为什么要使用它，我认为我会尽快找到答案。所以我做了一个愚蠢的测试：

```
X = magic(3);
tic
Y = bsxfun(@minus, X, min(X(:)));
X_normalized = bsxfun(@rdivide, Y, max(Y(:)));
toc

tic
arrayfun(@(x) x-min(X(:))./(max(X(:))-min(X(:))),X);
toc 
```

我得到了一个答案：

```
Elapsed time is 0.004130 seconds.
Elapsed time is 0.002468 seconds. 
```

，这让我觉得 arrayfun 是要走的路。但它可能会发生 arrayfun 更快，因为 X 是小数据，所以我尝试使用更大的 X ( `X = magic(100);`)。当然，bsxfun 更快，这意味着我需要重新编码一些东西。

```
Elapsed time is 0.003342 seconds.
Elapsed time is 0.395347 seconds. 
```

然而，我对结果不够满意，我决定多次运行测试，以确保它不是偶然的。这是它开始令人不安的时候。

```
test= repmat({zeros(2,10)},2,1);
Xsizes = [3 100];
for ii=1:2,for jj=1:10
X = magic(Xsizes(ii));
tic
Y = bsxfun(@minus, X, min(X(:)));
X_normalized = bsxfun(@rdivide, Y, max(Y(:)));
test{ii}(1,jj)=toc;

tic
arrayfun(@(x) x-min(X(:))./(max(X(:))-min(X(:))),X);
test{ii}(2,jj)=toc;

end;end

display('small Size data')
test{1}
display('Big Size data')
test{2} 
```

并且答案期望对于小数据总是更快的 arrayfun 和对于大数据的更快的 bsxfun。然而，在这两种情况下它都更快 bsxfun 并且需要更多时间来计算集合的第一次。

```
small Size data

ans =

   1.0e-03 *

    0.4900    0.0470    0.0430    0.0410    0.0410    0.0420    0.0420    0.0410    0.0420    0.0410
    0.6600    0.4200    0.4040    0.3890    0.3920    0.3900    0.3920    0.3890    0.3960    0.3900

Big Size data

ans =

    0.0003    0.0001    0.0001    0.0001    0.0001    0.0001    0.0002    0.0001    0.0001    0.0001
    0.3853    0.3871    0.3846    0.3855    0.3874    0.3844    0.3863    0.3840    0.3860    0.3853 
```

这让我很困惑。如果您`X=magic(3)`在 for 循环之外再次计算，则更多，并且 bsxfun 总是比 arrayfun 花费更多。

```
Elapsed time is 0.004891 seconds.
Elapsed time is 0.002008 seconds.

Elapsed time is 0.003181 seconds.
Elapsed time is 0.001994 seconds.

Elapsed time is 0.003109 seconds.
Elapsed time is 0.002008 seconds. 
```

有什么提示吗？

# android - 如何将 URL 更改为缩略图

> ID：15361998
> 
> 赞同：-1
> 
> 时间：2013-03-12T13:01:36.607
> 
> 标签：android

我想将指向 URL 的链接表示为缩略图。这是我目前正在尝试的代码：

```
public class MainActivity extends ListActivity {

ImageView imageView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    init();
}

private void init() {
    imageView = (ImageView)findViewById(R.id.imageView1);

    ArrayList<String> videoLinks = new ArrayList<String>();
    String links1 = "http://www.tools4movies.com/dvd_catalyst_profile_samples/Harold Kumar 3 Christmas bionic.mp4";

    String links2 = "http://www.tools4movies.com/dvd_catalyst_profile_samples/The Amazing Spiderman bionic.mp4";

    String links3 = "http://www.tools4movies.com/dvd_catalyst_profile_samples/Twilight 4 Breaking Dawn bionic.mp4";
    String links4 = "http://www.tools4movies.com/dvd_catalyst_profile_samples/Harold Kumar 3 Christmas bionic fast.mp4";

    String links5 = "http://www.tools4movies.com/dvd_catalyst_profile_samples/The Amazing Spiderman bionic fast.mp4";

    videoLinks.add(links1);
    videoLinks.add(links2);
    videoLinks.add(links3);
    videoLinks.add(links4);
    videoLinks.add(links5);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, videoLinks);
    setListAdapter(adapter);
    adapter.notifyDataSetChanged();

    Bitmap bm = ThumbnailUtils.createVideoThumbnail(links1, Thumbnails.MICRO_KIND);
    imageView.setImageBitmap(bm);
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:16:28.587

您将 URL 字符串作为 ThumbnailUtils.createVideoThumbnail() 的第一个参数值。

但是文档指出该字符串应该是文件路径，而不是 URL。

这个怎么样？

```
public static Bitmap getBitmapFromURL(String src) {
    try {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        return myBitmap;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

然后这样设置。

```
Bitmap bm = getBitmapFromURL(links1.replace(".mp4", ".jpg").toLowerCase());
imageView.setImageBitmap(bm); 
```

不要忘记将用户权限互联网放在清单中。

不过，您可能应该将其放在 AsyncTask 中。当您连接到 URL 时，您不希望 UI 冻结。

编辑：

没关系检查它。您可以获取 jpg 文件。