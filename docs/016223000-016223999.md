# StackOverflow 问答 16223000-16223999

# python - Python - 基于字符串导入模块然后传递参数

> ID：16223000
> 
> 赞同：7
> 
> 时间：2013-04-25T19:18:37.107
> 
> 标签：python

我搜索了网络和这个网站，但找不到这个问题的答案。我确定它就在我面前的某个地方，但找不到它。

我需要能够基于字符串导入模块。然后在传递参数的同时在该模块中执行一个函数。

我可以基于字符串导入，然后使用 eval() 执行，但我知道这不是处理这个问题的最佳方法。我似乎也不能那样传递论点。

我当前基于字符串设置的模块名为 TestAction.py，位于名为 Tasks 的文件夹中。这是 TestAction.py 的内容：

```
def doSomething(var):
    print var 
```

这是我正在执行以导入 TestAction 并执行的代码。

```
module = "Tasks.TestAction"
import Tasks
mymod = __import__(module)
eval(module + ".doSomething()") 
```

如何使此代码 #1 不使用`eval()`并且 #2 将 var 参数传递给`doSomething()`？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T20:24:21.637

感谢大家的帮助。看起来 importlib 结合 getattr 是我需要的。供将来参考这里是为我工作的确切代码。

```
module = "FarmTasks.TestAction"
mymod = importlib.import_module(module)

ds = getattr(mymod, "doSomething")
ds("stuff") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T19:22:09.750

函数名也是可变的吗？如果没有，只需使用您导入的模块：

```
mymod.doSomething('the var argument') 
```

如果是，请使用`getattr`：

```
fun = 'doSomething'
getattr(mymod, fun)('the var argument') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:36:05.370

根据文档

> 最好使用 importlib.import_module() 以编程方式导入模块。

使用它，您可以像这样检索您的模块：

```
import importlib
TestAction = importlib.import_module("TestAction", package="Tasks") 
```

之后，您可以简单地正常调用函数或按名称调用函数：

```
TestAction.some_known_function(arg1, arg2)
getattr(TestAction, "some_other_function_name")(arg1, arg2) 
```

我希望这回答了您的问题，如果您仍然缺少某些内容，请随时详细说明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T19:24:06.567

如果您使用 Python 2.7 或 3.1+，最简单的方法是将[`importlib`](http://docs.python.org/2/library/importlib.html)模块与`getattr`. 您的代码将如下所示：

```
import importlib

module = "Tasks.TestAction"
mymod = importlib.import_module(module)
myfunc = getattr(mymod, "doSomething")
myfunc() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T19:24:13.767

我最近写了一个导入给定函数的简单函数，它似乎对我有用：

```
def import_function(name):
    """Import a function by name: module.function or
    module.submodule.function, etc. Return the function object."""

    mod, f = name.rsplit('.', 1)
    return getattr(__import__(mod, fromlist=[f]), f) 
```

您可以将其用作：

```
f = import_function('Tasks.TestAction.doSometing')
f() 
```

要不就

```
import_function('Tasks.TestAction.doSometing')() 
```

# ios - 使用 restkit 序列化/非序列化对象的干净方法？

> ID：16223005
> 
> 赞同：0
> 
> 时间：2013-04-25T19:18:43.983
> 
> 标签：ios, objective-c, serialization, restkit

我正在寻找一种使用 restkit 手动序列化/反序列化对象的方法，我知道如何从 Object 序列化到 NSSTRING，但我不知道如何从 NSSTRING 反序列化到 Object。

这是我要序列化的代码（我认为它可能会更好......）：

```
 RKObjectSerializer* serializer = [RKObjectSerializer serializerWithObject:rr mapping:[[OMSRR apiMapping] inverseMapping]];

     NSError* error = nil;
     id<RKRequestSerializable> serialization = [serializer serializationForMIMEType:@"application/json" error:&error];

     NSString* sessionApiJsonified = [[NSString alloc] initWithData:[serialization HTTPBody] encoding:NSUTF8StringEncoding] ; 
```

我该怎么做相反的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:48:10.880

**休息套件 0.2**

要执行您要求的操作，请使用[`RKMIMETypeSerialization`](http://restkit.org/api/latest/Classes/RKMIMETypeSerialization.html)( [`RKNSJSONSerialization`](http://restkit.org/api/latest/Classes/RKNSJSONSerialization.html))。

这并不是 RestKit 的真正设计目的，您应该尝试在更高的抽象级别上使用它。您想使用 [`RKManagedObjectResponseMapperOperation`](http://restkit.org/api/latest/Classes/RKManagedObjectResponseMapperOperation.html). 如果你想获得 NSObject 而不是 NSManagedObject 你会使用[`RKObjectResponseMapperOperation`](http://restkit.org/api/latest/Classes/RKObjectResponseMapperOperation.html).

**休息套件 0.10.3**

在旧版本的 RestKit 中使用[`RKManagedObjectMappingOperation`](http://restkit.org/api/0.10.3/Classes/RKManagedObjectMappingOperation.html).

# python - 日期时间字段 OpenErp

> ID：16223006
> 
> 赞同：0
> 
> 时间：2013-04-25T19:18:44.700
> 
> 标签：python, module, field, openerp

我需要一个可以包含数字和文本的字段，例如“6个月”，我已经使用了该`datetime`字段，但它只需要一个格式化的日期，如果使用`integer`或者`float`它需要一个数字，并且`char`需要只有一个字符，那么我怎么能在同一个字段上有一个`integer`和一个？`char`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T05:05:16.860

你想要的目前在 openerp 中是不可能的。但是你可以使用一个技巧，你应该使用两个字段，一个是整数，用于给出间隔，另一个是 char 字段，用于给出月份、天数等。你可以在 Scheduler 上得到这个例子，打开器的 ir.cron 对象。

# java - 如何使 Jbutton 可点击并显示文本

> ID：16223007
> 
> 赞同：2
> 
> 时间：2013-04-25T19:18:49.870
> 
> 标签：java, swing, jbutton

我正在尝试创建一个可单击的图像 JButton 并在单击后显示文本，但我似乎无法弄清楚如何使其工作。我对java很陌生，所以很多基本的解释对我很有帮助。这是我目前正在使用的代码。

```
 import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class States extends JFrame {
  private JTabbedPane jtpFigures = new JTabbedPane();

  //State Labels

    private JButton VTPanel = new JButton();
     frame.add(VTPanel);
  VTPanel.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent);
    System.out.println("The State Capital of VT is Montpelier");
}

  private JButton NYPanel = new JButton();
  private JButton CAPanel = new JButton();
  private JButton MEPanel = new JButton();
  private JButton NHPanel = new JButton();
  private JButton CTPanel = new JButton();
  private JButton MAPanel = new JButton();
  private JButton FLPanel = new JButton();
  private JButton HIPanel = new JButton();
  private JButton NDPanel = new JButton();

  //Images for each of the states
  private ImageIcon[] stateImage = {
    new ImageIcon("image/VT.png"),
    new ImageIcon("image/NY.png"),
    new ImageIcon("image/CA.png"),
    new ImageIcon("image/ME.png"),
    new ImageIcon("image/NH.png"),
    new ImageIcon("image/CT.png"),
    new ImageIcon("image/MA.png"),
    new ImageIcon("image/FL.png"),
    new ImageIcon("image/HI.png"),
    new ImageIcon("image/ND.png")};

    public States() {

        //adds each of the images to the panel
        VTPanel.setIcon(stateImage[0]);
        NYPanel.setIcon(stateImage[1]);
        CAPanel.setIcon(stateImage[2]);
        MEPanel.setIcon(stateImage[3]);
        NHPanel.setIcon(stateImage[4]);
        CTPanel.setIcon(stateImage[5]);
        MAPanel.setIcon(stateImage[6]);
        FLPanel.setIcon(stateImage[7]);
        HIPanel.setIcon(stateImage[8]);
        NDPanel.setIcon(stateImage[9]);

    //Adds the panels and name
        add(jtpFigures, BorderLayout.CENTER);
        jtpFigures.add(VTPanel, "Vermont");
        jtpFigures.add(NYPanel, "New York");
        jtpFigures.add(CAPanel, "California");
        jtpFigures.add(MEPanel, "Maine");
        jtpFigures.add(NHPanel, "New Hampshire");
        jtpFigures.add(CTPanel, "Connecticut");
        jtpFigures.add(MAPanel, "Massachusetts");
        jtpFigures.add(FLPanel, "Florida");
        jtpFigures.add(HIPanel, "Hawaii");
        jtpFigures.add(NDPanel, "North Dakota");

        //Sets the default index
        jtpFigures.setSelectedIndex(3);
    }

    public static void main(String[] args) {
        States frame = new States();
        frame.pack();
        frame.setTitle("State License Plates");
        frame.setLocationRelativeTo(null); // Center the frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setSize(560,250);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T01:00:15.683

您需要向按钮添加一个动作监听器。这里有一个很好的参考：http: [//docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

# sql - Sql Server - 数据仓库设计 - 客户的唯一标识符

> ID：16223010
> 
> 赞同：-1
> 
> 时间：2013-04-25T19:19:11.460
> 
> 标签：sql, sql-server, database, data-warehouse

我有一个由其他人设计的数据仓库。该人表示，不可能为每个客户拥有一个不随时间变化的唯一标识符。不太了解数据架构，我想知道这是否属实。

如果可能，它会有多复杂？鉴于有关客户的任何其他信息可能会在某个时候发生变化。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:34:04.773

数据仓库信息通常来自其他一些系统。如果无法唯一识别人员，则该系统应该设计为具有代理键。人们很少有一个好的唯一标识符不是替代品。电子邮件是不合适的，因为它们会发生变化（人们可能有多个电子邮件）并且可以为其他人重复使用，SSN 并不像您预期​​的那样独特，甚至由于数据输入错误，医生的医疗执照号码等内容最终也不是唯一的在源系统中。即使与地址等其他信息相结合，名称也显然不是唯一的。在我有理由查询的数百个数据库中，我从未见过任何一个具有良好唯一标识符的人不是代理键。

如果原始系统的设计者不称职（任何数据库表都不应该缺少主键），那么数据仓库确实可能无法唯一标识个人，并且数据中出现重复的可能性是 100% . 如果代理键不是来自原始系统，那么向数据仓库添加代理键是没有意义的。在更新信息时，您如何知道此 John Smith 是 id 1234 还是 id 4567？

# sql - 这两个查询在 rails 3.2.12 中是否相同？

> ID：16223016
> 
> 赞同：0
> 
> 时间：2013-04-25T19:19:36.767
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, arel

我们需要在我们的 rails 应用程序中检索`logs`for 。`customer comm record`简单英语的条件是 customer_comm_record 的日志，基于：

```
#1\. the sales_id in customer comm record's customers is equal to current user id
#2\. the sales_id in customer comm record's customer's project is equal to the current user id. 
```

#1 的 SQL 代码可以是 ( `SQL#1`)：

```
Log.joins(:customer_comm_record =>:customer).where('customers.sales_id = ?', session[:user_id]) 
```

#2 的 SQL 代码可以是 ( `SQL#2`)：

```
Log.joins(:customer_comm_record =>{ :customer => :projects}).where('projects.sales_id = ?', session[:user_id]) 
```

这是我们`SQL#3`在一行中提出的 ( ) ：

```
Log.joins(:customer_comm_record =>{ :customer => :projects}).where('customers.sales_id = ? OR projects.sales_id = ?', session[:user_id], session[:user_id]) 
```

上面返回的 SQL 代码`rails console`是（将 session[:user_id] 替换为 1）：

```
 SELECT "logs".* FROM "logs" INNER JOIN "customer_comm_records" ON "customer_comm_records"."id" = "logs"."customer_comm_record_id" INNER JOIN "customers" ON "customers"."id" = "customer_comm_records"."customer_id" INNER JOIN "projects" ON "projects"."customer_id" = "customers"."id" WHERE (customers.sales_id = 1 OR projects.sales_id = 1) 
```

问题是天气`SQL#3 == SQL#1 UNION SQL#2`。有人可以回答这个问题吗？如果不是，什么是正确的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:35:07.703

唯一的区别是：

*   第一种方法将返回重复的条目，其中客户和项目的 sales_id 都与用户 ID 匹配。
*   第二种方法可能不会返回具有匹配 sales_id 的客户没有项目的记录（`projects.customer_id`该客户没有）。

只有当客户不一定有任何项目时，最后一个区别才重要。否则，第二种方法更好，因为它避免了处理重复项。

如果客户并不总是有项目，一个简单的解决方法是使用`includes`而不是`joins`：

```
Log.includes(:customer_comm_record =>{ :customer => :projects}).
    where('customers.sales_id = :id OR projects.sales_id = :id', id: session[:user_id]) 
```

这将强制 LEFT JOIN 并返回客户，无论他们是否与项目相关联。

# pandoc - Pandoc 在引用大型 biblatex 文件时执行非常缓慢

> ID：16223019
> 
> 赞同：2
> 
> 时间：2013-04-25T19:19:42.147
> 
> 标签：pandoc, bibtex, biblatex

每当我有一个要转换为 PDF 或 HTML 的 pandoc markdown 文件时，它包含对大型 biblatex 文件（> 100 KB）的引用以供引用，性能非常慢。我最终需要直接转换为`tex`first 然后运行常规的乳胶命令，*例如* `latex`, `bibtex`, `latex`, `pdflatex`.

例如，如果我有两个文件`refs.bib`和`test.md`，则以下命令需要永远运行；

`pandoc test.md -o test.pdf --bibliography refs.bib`

或者

`pandoc test.md -o test.html --bibliography refs.bib`

我当前的解决方法是改为导出到`latex`然后`latex`直接运行命令：

```
pandoc test.md -o test.tex --bibliography refs.bib
latex test.tex
bibtex test.aux
latex test.tex
pdflatex test 
```

使用 pandoc 的性能是怎么回事？我的理解是，基本上这些都是在后台进行的相同呼叫。

我创建了一个包含测试文件的[Gist 。](https://gist.github.com/stanley-gu/2017894222d42324bef1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T01:28:36.127

我认为放缓是由于 pandoc 必须调用 citeproc-hs，它必须调用 bibutils，它必须将整个 bibtex 文件转换为本机 citeproc 格式。

目前，加快速度的最简单方法是编写一个脚本，将相关的 bibtex 条目提取到一个临时文件中，然后针对它运行 pandoc。[pandoc-discuss 邮件列表上的](https://groups.google.com/forum/m/?fromgroups#!topic/pandoc-discuss/p156lTJFjuk)这个线程包括一些执行此操作的脚本的链接：

*   [https://gist.github.com/dsanson/1383132](https://gist.github.com/dsanson/1383132)
*   [https://github.com/reagle/pandoc-wrappers/blob/master/md2bib.py](https://github.com/reagle/pandoc-wrappers/blob/master/md2bib.py)

# sql - 如何设置浮动列的默认长度？

> ID：16223020
> 
> 赞同：0
> 
> 时间：2013-04-25T19:19:43.847
> 
> 标签：sql, sql-server-2008

我创建了一个表，其中的 1 列是浮点数（命名比率），

还有 2 个 INT 类型的 int 列（KILL 和 DEATH），由触发器自动更新的比率列（每次更新 KILL 或 DEATH 时，触发器都会更新比率），

浮动列的大小（比率）太大，我的意思是它的长度太长，我如何才能默认定义浮动列的大小？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:39:40.283

当您查询表时，您应该即时计算两列之间的比率。恕我直言，使用触发器是矫枉过正的。如果您担心一遍又一遍地重复您的逻辑（例如避免被零除），您可以使用视图或计算列。

列的格式（小数位数）是应用程序或报告问题，而不是数据库问题。如果在某个时候您决定在多个显示之一中确实需要更高的精度，则必须进行数据库更改而不仅仅是应用程序更改。如果您曾经有过 1 比 1000 或更小的比率，您也可能会遇到问题：如果您将自己限制为小数点后 3 位，您的比率将被计算为 0，这可能会导致您的逻辑出现问题。

# perl - Perl 中 -> 和 $ 的含义是什么

> ID：16223022
> 
> 赞同：0
> 
> 时间：2013-04-25T19:19:47.373
> 
> 标签：perl

Perl`->`和有什么区别`$`

中`->`缀取消引用运算符在哪里。

`$`也是解引用运算符。

这个运算符的确切含义是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T20:00:57.687

我不能强烈推荐核心文档参考教程[perldoc perlreftut](http://p3rl.org/reftut)，由备受尊敬的 perler Mark Jason Dominus 编写。它简明扼要，并教授了一些创建和使用引用的简单规则。

我不是说 RTFM，我是说，在这一点上有一个很棒的文档，寻找它，它会帮助你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T20:05:40.743

是的，两者`$`都是`->`取消引用运算符，尽管它们完全不同。

Perl 允许您使用对其他数据的*引用。*这些与某些语言中的指针大致相似。要获得原始数据结构，我们必须*取消引用*它们。这通常涉及花括号（在琐碎的情况下可以省略）和我们要取消引用的类型的印记。（大多数值只能取消引用到一种类型，否则会引发错误）。

```
${ $scalar_ref };
@{ $array_ref };
%{ $hash_ref };
*{ $glob_ref };
&{ $code_ref }(@args); 
```

如果 the`$type_ref`只是一个变量，则可以省略花括号，但当我们有更复杂的表达式时，它们是实用的。

现在的问题是访问散列或数组中的字段，而不分配给中间散列。这是`->`使用运算符的地方：

```
# instead of
my %hash = %{ $hashref };
my $field = $hash{field};
# we can do this and avoid unneccessary copying :)
my $field = ${$hashref}{field}; # curlies around $hashref optional
my $field = $hashref->{field}; 
```

数组、coderefs 和对象上的*方法调用*类似：

```
$array_ref->[$index];   $$array_ref[$index];
$code_ref->(@args);     &$coderef(@args);
$object->method(@args); 
```

实际上，`->`操作员在方法调用（或看起来像它们）的上下文中所做的事情有点复杂，但这似乎不是您问题的问题。

对于 arrayrefs 和 hashrefs，您可以想象 -like`$$ref[$i]`取消引用只是简单地替换`$ref`为数组的名称，它在符号意义上这样做：`$array[$i]`. 所以第一个`$`标记是数组元素的标记，第二个`$`标记是保存引用的标量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:53:09.310

它们可以是做同一件事的不同方式。

见[http://perlmonks.org/?node=References+quick+reference](http://perlmonks.org/?node=References+quick+reference)；规则 3 显示了如何`$`更改某些表达式以`->`代替使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T19:34:34.630

我的 perl 有点生疏，但`$` **总是**意味着*以下是 scalar 的名称*。箭头运算符 ( `->`) 是一个非常不同的野兽。这意味着*取消引用名称，**然后**应用以下操作符*。以下是[perlref(1)](http://perldoc.perl.org/perlref.html#Using-References)的示例：

> 由于能够为 的简单情况省略花括号`$$x`，人们经常错误地将解引用符号视为正确的运算符，并怀疑它们的优先级。但是，如果它们是，您可以使用括号而不是大括号。事实并非如此。考虑以下差异；案例 0 是案例 1 的简写版本，*而不是*案例 2：
> 
> ```
> $$hashref{"KEY"} = "VALUE";          # CASE 0
> ${$hashref}{"KEY"} = "VALUE";        # CASE 1
> ${$hashref{"KEY"}} = "VALUE";        # CASE 2
> ${$hashref->{"KEY"}} = "VALUE";      # CASE 3 
> ```
> 
> 案例 2 也具有欺骗性，因为您正在访问一个名为 的变量`%hashref`，而不是通过`$hashref`它可能引用的哈希来取消引用。那将是案例3。

# java - 在 Android WebView 中处理多个 URL

> ID：16223023
> 
> 赞同：0
> 
> 时间：2013-04-25T19:19:52.620
> 
> 标签：java, android, url, android-webview

我正在尝试监视以下 2 个 URL，如果它们不是以下 URL，则执行某些操作。这看起来很简单，但是我需要其他人来看看。

下面的代码不起作用 - 它只是“监控”第一个 URL

```
@Override
 public boolean shouldOverrideUrlLoading(final WebView view,
            String url) {
        if (url.startsWith("http://www.google.com") &&
            url.startsWith("http://www.bing.com"))
               view.loadUrl(url);
               progressBar.setVisibility(View.VISIBLE);
        } else {
            ..
        }
        return true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:45:08.057

我通过简单地将 && 更改为 || 解决了这个问题。

```
 @Override
public boolean shouldOverrideUrlLoading(final WebView view,
        String url) {
    if (url.startsWith("http://www.google.com") || url.startsWith("http://www.bing.com")) {
           view.loadUrl(url);
           progressBar.setVisibility(View.VISIBLE);
    } else {
        ..
    }
    return true; 
```

# windows-8 - 在公司旁加载 Windows 8 应用程序

> ID：16223024
> 
> 赞同：1
> 
> 时间：2013-04-25T19:19:55.347
> 
> 标签：windows-8, microsoft-metro, certificate, sideloading

我目前正在开发一个 Windows 8 Metro 应用程序。此应用程序在 Martketplace 中不可用，但将通过侧载分发。为此，有必要使用证书签署应用程序并在客户端计算机上导入相同的证书。

我从来没有做过这样的证书？我应该如何进行？我还阅读了应用程序的发布者名称应该与证书中的发布者名称相同......

谁知道如何制作这样的证书？例如 Verisign 的商业证书目前不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T16:29:59.667

如果不能选择商业（付费）证书，则可以通过其他三种方式获得证书：

1) 如果您的公司拥有自己的根证书（受 VeriSign 等公共证书颁发机构的信任），您（或管理员）可以从中派生软件签名证书。

2）贵公司可以设置自己的证书服务器来颁发自己的证书。如果证书仅在公司内部使用，并且根证书在所有机器上都是受信任的（导入到受信任的根权限的证书存储中），您可以使用从根证书派生的软件签名证书。请参阅[http://www.esecurityplanet.com/network-security/how-to-run-your-own-certificate-authority.html](http://www.esecurityplanet.com/network-security/how-to-run-your-own-certificate-authority.html)。

3) 您可以使用不是从根证书派生的自签名测试证书。使用 makecert 创建一个（请参阅[如何为 Windows 上的代码签名创建自签名证书？](https://stackoverflow.com/questions/84847/how-do-i-create-a-self-signed-certificate-for-code-signing-on-windows)）。安装应用程序时，将询问用户是否信任此没有已知发布者的证书。

# macos - 从命令行打开一个 html 页面到 Mac OS 上的锚点

> ID：16223026
> 
> 赞同：7
> 
> 时间：2013-04-25T19:20:09.397
> 
> 标签：macos, shell, command-line

我想打开一个指向特定锚点的网页。

例如：

> 打开 index.html#intro

当我尝试这个时，我会收到错误消息

> index.htm.l#intro 不存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:26:29.313

它不会打开，因为它认为您正在输入文件名`index.htm.l#intro`。据我所知，您无法从命令行打开页面到锚点。

作为一种解决方法，您可以包含 javascript 以使用 onLoad 函数或 Jquery document.ready 跳转到指定的锚点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-20T14:10:43.170

您还可以使用 AppleScript 命令行（在终端中）：

```
osascript -e 'tell application "Safari" to open location "file://{full_path}/index.html#intro"' 
```

其中 {full_path} 是文件的绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:36:52.503

据我所知，这是不可能的。命令：

```
open file:///path/to/file.html#test 
```

在系统默认浏览器中成功打开指定的 HTML 文件，但不将`#test`锚点传递给该文件。不过，用`http://`URL 做同样的事情是可行的。我怀疑用于处理`file://`请求的 Apple 事件仅指定文件名，而不是 URL，因此无法保留锚点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-17T18:08:08.523

此处提供的解决方案自动使用默认浏览器：[https ://apple.stackexchange.com/a/197284/202702](https://apple.stackexchange.com/a/197284/202702)

> 一种非特定的方法是：
> 
> `osascript -e 'open location "file:///Users/me/index.html#my-anchor"'`

# java - 选择按钮时，我的第二个 android 活动不会启动

> ID：16223027
> 
> 赞同：0
> 
> 时间：2013-04-25T19:20:12.583
> 
> 标签：java, android, xml

我的 MainActivity 打开所有小部件都在工作，但是当我选择按钮打开我的第二个活动时，它无法打开并且应用程序崩溃。Eclipse 没有显示错误

我的主要活动课程：

```
public class MainActivity extends FragmentActivity  {

private int dYear;
private int dMonth;
private int dDay;
private int rYear;
private int rMonth;
private int rDay;
static final int dDATE_DIALOG_ID = 0;
static final int rDATE_DIALOG_ID = 1;
private RadioButton buttonO = null;
private RadioButton buttonR = null;
private TableRow tr;
TextView txD, txR;
private Button btnDepart,btnReturn, btnSubmit,btnClose;
private Spinner noOfPassengersSpinner,departureSpinner,returnSpinner;
private CheckBox tandCCB;
final Context context = this;
private Bundle basket;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    buttonO = (RadioButton) findViewById(R.id.radioO);
    buttonR = (RadioButton) findViewById(R.id.radioR);
    txD=(TextView)findViewById(R.id.tvDepartureDate);
    txR=(TextView)findViewById(R.id.tvReturnDate);
    btnDepart = (Button)findViewById(R.id.btnDepart);
    btnReturn = (Button)findViewById(R.id.btnReturn);
    tr = (TableRow)findViewById(R.id.tableRow5);
    btnSubmit = (Button)findViewById(R.id.btnSubmit);
    btnClose = (Button)findViewById(R.id.btnClose);
    noOfPassengersSpinner = (Spinner)findViewById(R.id.noOfPassengersSpinner);
    departureSpinner = (Spinner)findViewById(R.id.departureSpinner);
    returnSpinner = (Spinner)findViewById(R.id.returnSpinner);
    tandCCB = (CheckBox)findViewById(R.id.tandCCB);

    final Calendar dC = Calendar.getInstance();
    final Calendar rC = Calendar.getInstance();

    dYear = dC.get(Calendar.YEAR);
    dMonth = dC.get(Calendar.MONTH);
    dDay = dC.get(Calendar.DAY_OF_MONTH);

    rYear = rC.get(Calendar.YEAR);
    rMonth = rC.get(Calendar.MONTH);
    rDay = rC.get(Calendar.DAY_OF_MONTH);

    updateDisplay();

    tandCCB.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if(isChecked){

                btnSubmit.setEnabled(true);

            }
            else{

                btnSubmit.setEnabled(false);
            }
        }

    }); 

    this.btnClose.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View v) 
        {
             finish();
             System.exit(0);
        }

    }); 

    this.btnSubmit.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View v) 
        {

            String depAir = departureSpinner.getSelectedItem().toString();
            String desAir = returnSpinner.getSelectedItem().toString();     
            int numOfPass = Integer.parseInt(noOfPassengersSpinner.getSelectedItem().toString());

            basket.putString("departureAir", depAir);
            basket.putString("destenationAir", desAir);
            basket.putInt("numOfPass", numOfPass);
            basket.putString("depDate", txD.getText().toString());

            String type = "";

            if(buttonR.isChecked()){

                String returnDate = txR.getText().toString();
                basket.putString("returnDate", returnDate);
                type = "Return";

            }
            else{
                type = "Oneway";
            }
            basket.putString("type", type);

            Intent intent = new Intent(context, Second.class);

            intent.putExtras(basket);
            startActivity(intent);

        }

    }); 

    this.buttonO.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View v) 
        {
            tr.setVisibility(View.GONE);
        }

    }); 

    this.buttonR.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View v) 
        {
            tr.setVisibility(View.VISIBLE);
        }

    }); 

    this.btnDepart.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View v) 
        {
            showDialog(dDATE_DIALOG_ID);
        }

    }); 

    this.btnReturn.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View v) 
        {
            showDialog(rDATE_DIALOG_ID);
        }

    }); 

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

        private void updateDisplay() {
            txD.setText(
                    new StringBuilder()
                    // Month is 0 based so add 1
                    .append(dYear).append("-")
                    .append(dMonth + 1).append("-")
                    .append(dDay).append(" ")
                    );

            txR.setText(
                    new StringBuilder()
                    .append(rYear).append("-")
                    .append(rMonth + 1).append("-")
                    .append(rDay).append(" ")
                    );      

        }

        private DatePickerDialog.OnDateSetListener dDateSetListener =
                new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year,
                    int monthOfYear, int dayOfMonth) {
                dYear = year;
                dMonth = monthOfYear;
                dDay = dayOfMonth;
                updateDisplay();
            }
        };

        private DatePickerDialog.OnDateSetListener rDateSetListener =
                new DatePickerDialog.OnDateSetListener() {

            public void onDateSet(DatePicker view, int year,
                    int monthOfYear, int dayOfMonth) {
                rYear = year;
                rMonth = monthOfYear;
                rDay = dayOfMonth;
                updateDisplay();
            }
        };

        @Override
        protected Dialog onCreateDialog(int id) {
            switch (id) {
            case dDATE_DIALOG_ID:
                return new DatePickerDialog(this,
                        dDateSetListener,
                        dYear, dMonth, dDay);
            case rDATE_DIALOG_ID:
                return new DatePickerDialog(this,
                        rDateSetListener,
                        rYear, dMonth, rDay);

            }
            return null;
        }

    } 
```

我的第二个活动是：

```
 public class Second extends Activity {

private TextView typeTv, departureTv,returnTv,departureDateTv,returnDateTv,noOfPassengersTv,tvReturnDateLbl;
private RadioButton buttonR = null;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);    

    typeTv = (TextView)findViewById(R.id.typeTv);
    departureTv = (TextView)findViewById(R.id.departureTv);
    returnTv = (TextView)findViewById(R.id.returnTv);
    departureDateTv= (TextView)findViewById(R.id.departureTv);
    returnDateTv= (TextView)findViewById(R.id.returneDateTv);
    noOfPassengersTv = (TextView)findViewById(R.id.noOfPassengersTv);
    buttonR = (RadioButton) findViewById(R.id.radioR);
    tvReturnDateLbl = (TextView)findViewById(R.id.tvReturnDateLbl);

    Intent i = getIntent();//MAking an intent called i
    Bundle basket = this.getIntent().getExtras();

    String tTv = basket.getString("type");
    String dTv = basket.getString("departureAir");
    String rTv = basket.getString("destinationAir");
    String dDTv = basket.getString("depDateTv");
    int nOPTv = basket.getInt("numOfPass");

    if(buttonR.isChecked()){
        String rDTv = basket.getString("returnDate");
    returnDateTv.setText(rDTv);

    }
    else{
        returnDateTv.setVisibility(View.GONE);
        tvReturnDateLbl.setVisibility(View.GONE);
    }

    typeTv.setText(tTv);
    departureTv.setText(dTv);
    returnTv.setText(rTv);
    departureDateTv.setText(dDTv);
    noOfPassengersTv.setText(""+nOPTv);

} 
```

}

最后我的清单文件是：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
        <activity
        android:name=".Second"
        android:label="@string/app_name">
        </activity>
</application> 
```

我的日志猫

```
04-25 19:04:11.912: E/AndroidRuntime(999): FATAL EXCEPTION: main
04-25 19:04:11.912: E/AndroidRuntime(999): java.lang.NullPointerException
04-25 19:04:11.912: E/AndroidRuntime(999):  at com.example.assignment2.MainActivity$5.onClick(MainActivity.java:121)
04-25 19:04:11.912: E/AndroidRuntime(999):  at android.view.View.performClick(View.java:4084)
04-25 19:04:11.912: E/AndroidRuntime(999):  at android.view.View$PerformClick.run(View.java:16966)
04-25 19:04:11.912: E/AndroidRuntime(999):  at android.os.Handler.handleCallback(Handler.java:615)
04-25 19:04:11.912: E/AndroidRuntime(999):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-25 19:04:11.912: E/AndroidRuntime(999):  at android.os.Looper.loop(Looper.java:137)
04-25 19:04:11.912: E/AndroidRuntime(999):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-25 19:04:11.912: E/AndroidRuntime(999):  at java.lang.reflect.Method.invokeNative(Native Method)
04-25 19:04:11.912: E/AndroidRuntime(999):  at java.lang.reflect.Method.invoke(Method.java:511)
04-25 19:04:11.912: E/AndroidRuntime(999):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-25 19:04:11.912: E/AndroidRuntime(999):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-25 19:04:11.912: E/AndroidRuntime(999):  at dalvik.system.NativeStart.main(Native Method) 
```

我的新日志猫

```
04-25 19:38:14.443: E/Trace(1155): error opening trace file: No such file or directory (2)
04-25 19:38:15.282: D/gralloc_goldfish(1155): Emulator without GPU emulation detected.
04-25 19:38:19.251: D/AndroidRuntime(1155): Shutting down VM
04-25 19:38:19.251: W/dalvikvm(1155): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
04-25 19:38:19.281: E/AndroidRuntime(1155): FATAL EXCEPTION: main
04-25 19:38:19.281: E/AndroidRuntime(1155): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.assignment2/com.example.assignment2.Second}: java.lang.NullPointerException
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.os.Looper.loop(Looper.java:137)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at java.lang.reflect.Method.invoke(Method.java:511)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at dalvik.system.NativeStart.main(Native Method)
04-25 19:38:19.281: E/AndroidRuntime(1155): Caused by: java.lang.NullPointerException
04-25 19:38:19.281: E/AndroidRuntime(1155):     at com.example.assignment2.Second.onCreate(Second.java:46)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.app.Activity.performCreate(Activity.java:5008)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-25 19:38:19.281: E/AndroidRuntime(1155):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
04-25 19:38:19.281: E/AndroidRuntime(1155):     ... 11 more
04-25 19:38:19.441: D/dalvikvm(1155): GC_CONCURRENT freed 163K, 3% free 8303K/8519K, paused 79ms+112ms, total 315ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:29:53.383

我相信`basket`是`null`。您需要在调用它之前对其进行`put()`初始化

```
Bundle basket = new Bundle(); 
```

了解如何阅读 logcat 对于调试您的工作至关重要。看上面的输出

```
04-25 19:04:11.912: E/AndroidRuntime(999): FATAL EXCEPTION: main
04-25 19:04:11.912: E/AndroidRuntime(999): java.lang.NullPointerException
04-25 19:04:11.912: E/AndroidRuntime(999):  at     
com.example.assignment2.MainActivity$5.onClick(MainActivity.java:121) 
```

从这里我们看到`NPE`在第 121 行有一个`MainAcitivty`

*编辑**

`Second`改变你获得额外服务的方式。改变

```
Intent i = getIntent();//MAking an intent called i
Bundle basket = this.getIntent().getExtras(); 
```

至

```
Intent i = getIntent();//MAking an intent called i
Bundle basket = i.getBundleExtra("basket"); 
```

由于您将其`Bundle`放入`Intent`而不是每个`extra`本身，因此您可以这样做。如果你把每个都`extra`放在那里，那么你会得到一个`Bundle`你目前拥有的方式。

[看到这个所以回答](https://stackoverflow.com/questions/9577024/what-is-the-difference-between-getextras-and-getbundleextras)（第二个）它可能会更清楚。

在你的第一次`Activity`改变

```
intent.putExtras(basket); 
```

至

```
intent.putExtra("basket", basket); 
```

# javascript - 防止与 HTML 内容交互

> ID：16223030
> 
> 赞同：1
> 
> 时间：2013-04-25T19:20:16.957
> 
> 标签：javascript, html, css, events, event-handling

我有一个站点菜单，它位于覆盖层下方，通过单击覆盖层上的按钮将其滑到一边来显示。

我想要做的是，当站点菜单打开时，防止与覆盖（理想情况下，除了菜单按钮之外的所有内容）进行交互。

我可以通过隐藏和显示一个位于所有覆盖内容之上的容器来做到这一点，但我想知道是否有办法使用 CSS（最佳选项）或 javascript 设置某种属性来禁用点击/触摸事件上覆。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:25:43.157

您可以使用 JQuery 模态覆盖来禁止用户使用除模态 div 中的任何内容之外的任何其他内容。

[http://jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:40:06.213

CSS 是关于外观，而不是行为。所以你[不能通过对](https://stackoverflow.com/questions/2091168/disable-a-link-using-css)元素应用 CSS 来启用或禁用元素。

您的覆盖解决方案非常有能力，我也会这样做。请注意，您的叠加层可以是透明或半透明的。

`onclick`可以通过使用 Javascript 覆盖 click 事件来解决，但是如果您已经有一个简短的问题，为什么还要创建一个复杂的解决方案（您必须重新定义每个元素上的事件，然后以某种方式将其恢复正常）清洁解决方案？

正如**mbsurfer**已经建议的那样，禁用除菜单之外的所有内容的快速方法是使用`.dialog`带有以下`modal`选项的 jQuery UI：

```
$(function() {
  $( "#menu" ).dialog({
    modal: true
  });
}); 
```

文档中的更多信息：http: [//api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:32:53.103

当菜单打开时，将此属性添加到您要禁用的任何控件

```
onclick="return false;" 
```

然后在菜单关闭时删除该属性。这将防止发生默认操作。

您可以使用以下代码在不添加属性的情况下执行此操作：

```
document.getElementById("myElement").onclick = function() { return false; } 
```

# ios - 可以移动 Core Plot 饼图标签吗？

> ID：16223034
> 
> 赞同：1
> 
> 时间：2013-04-25T19:20:37.317
> 
> 标签：ios, label, core-plot, pie-chart

我正在使用 Core Plots 1.2 版，我希望图表每个部分的标签更靠近它的中心。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T13:32:40.037

我想到了：

```
CPTPieChart *pieChart = [[CPTPieChart alloc] init];
pieChart.labelOffset = 0.0f; 
```

CPTPieChart 有一个“labelOffset”值，可以将饼图楔形标签移近或远离饼图的中心。labelOffset 的值越大，离中心越远。

# javascript - 如何检查一个div是否在jquery中具有多个类中的一个类

> ID：16223035
> 
> 赞同：5
> 
> 时间：2013-04-25T19:20:42.030
> 
> 标签：javascript, jquery

我有一个动态 div，它可以生成 1000 多个不同的类……它是一个 wordpress 主题。

现在我想检查一个 div 是否有 52 个类之一。

.bg1、.bg2、.bg3 等...

我知道你可以使用 hasClass();

但是我如何检查每一个然后得到值。例如，这里是 div 的样子

```
<div id="wordpresspost" class="bodyclass post-id-193 wordpresswrap bg1"></div> 
```

请记住我真的不知道jquery：D

我在想它会是这样的，但从逻辑上讲这对我来说没有意义:(

```
var divclass = $("#wordpresspost").hasClass('bg1, bg2, bg3, bg4, bg5, bg6');

if(divclass == true){
    var divsclass = $(this);
} 
```

我需要知道这个类，因为我想改变它，例如我想 .removeClass 然后添加一个新类而不改变其他类，因为它们是动态的

提前感谢您的建议:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T19:23:06.917

使用[`.is()`](http://api.jquery.com/is/)：

```
var divclass = $("#wordpresspost").is('.bg1, .bg2, .bg3, .bg4, .bg5, .bg6'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T19:22:12.873

您可以使用选择器[开始](http://api.jquery.com/attribute-starts-with-selector/)。

*需要注意的是，如果您有另一个以 bg[something] 开头的课程，则会受到影响*

```
if($("#wordpresspost[class^=bg]").length > 0)
{
....
} 
```

为了删除它，正则表达式可能会有所帮助。

```
$("#wordpresspost[class^=bg]").each(function(){
     this.className = this.className.replace(/\bbg.*?\b/g, 'newclass');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:46:50.803

```
var el = document.getElementById('wordpresspost');
var regxpr = /\b(bg(?:[1-9]|[1-4]\d|5[0-2]))\b/g, match;
while(match = regxpr.exec(el.className)){
    // match[1] contains the current matching class
    console.log(match[1]);
    // Then you can do:
        $(el).removeClass(match[1]).addClass(replacementForMatch);
} 
```

[**JSFiddle**](http://jsfiddle.net/dPyNx/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T19:25:19.670

如果您只在一个元素中搜索 bg*，您可以只使用简单的正则表达式。

```
 var hasBg = /bg[\d]+/.test(document.getElementById("mydiv").className); 
```

# javascript - 从字符串中获取第二个和第三个单词

> ID：16223043
> 
> 赞同：12
> 
> 时间：2013-04-25T19:21:19.037
> 
> 标签：javascript

我在 jQuery 中有字符串：

```
var string1 = 'Stack Exchange premium';
var string2 = 'Similar Questions'; //  only two
var string3 = 'Questions that may already have your answer'; 
```

我怎样才能从这第二个和第三个词中得到？

```
var second1 = ???;
var third1 = ???;
var second2 = ???;
var third2 = ???;
var second3 = ???;
var third3 = ???; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-25T19:22:32.953

使用 string[`split()`](http://www.w3schools.com/jsref/jsref_split.asp)以空格分隔字符串：

```
var words = string1.split(' '); 
```

然后使用以下命令访问单词：

```
var word0 = words[0];
var word1 = words[1];
// ... 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-25T19:29:57.900

首先，您没有“在 jQuery 中”的字符串和变量。jQuery 与此无关。

其次，改变你的数据结构，像这样：

```
var strings = [
    'Stack Exchange premium',
    'Similar Questions',
    'Questions that may already have your answer'
]; 
```

然后使用第二个和第三个单词创建一个新数组。

```
var result = strings.map(function(s) {
    return s.split(/\s+/).slice(1,3);
}); 
```

现在您可以像这样访问每个单词：

```
console.log(result[1][0]); 
```

这将为您提供第二个结果的第一个单词。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-25T19:31:20.363

只是为了增加可能的解决方案，`split()`如果字符串中有多个空格，则使用的技术将失败。

```
var arr = "   word1   word2    ".split(' ')

//arr is ["", "", "", "word1", "", "", "word2", "", "", "", ""] 
```

为避免此问题，请使用以下

```
var arr = "   word1   word2    ".match(/\S+/gi)

//arr is ["word1", "word2"] 
```

然后像往常一样，

```
var word1 = arr[0];
var word2 = arr[1]
//etc 
```

也不要忘记使用`.length`属性检查数组长度以避免进入`undefined`变量。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-25T19:24:50.400

```
var temp = string1.split(" ")//now you have 3 words in temp
temp[1]//is your second word
temp[2]// is your third word 
```

你可以通过 temp.length 检查你有多少单词

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-16T18:23:09.767

const string = "这个湖离这里很远。"

const [,second,third,] = string.split(" ");

# java - Java，Weka：如何预测数字属性？

> ID：16223044
> 
> 赞同：6
> 
> 时间：2013-04-25T19:21:23.573
> 
> 标签：java, weka, numeric, predict

我试图使用 Weka 的 NaiveBayesUpdateable 分类器。我的数据包含名义属性和数字属性：

```
 @relation cars
  @attribute country {FR, UK, ...}
  @attribute city {London, Paris, ...}
  @attribute car_make {Toyota, BMW, ...}
  @attribute price numeric   %% car price 
  @attribute sales numeric   %% number of cars sold 
```

我需要根据其他属性预测销售数量（数字！）。

我知道我不能在 Weka 中使用数字属性进行贝叶斯分类。一种技术是将数值属性的值拆分为长度为 k 的 N 个区间，并使用名义属性代替，其中 n 是类名，如下所示：@attribute class {1,2,3,...N}。

然而，我需要预测的数字属性范围从 0 到 1 000 000。创建 1 000 000 个类根本没有意义。如何使用 Weka 预测数字属性，或者在 Weka 没有用于此任务的工具的情况下寻找什么算法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-28T18:31:46.340

你想做的是*回归*，而不是*分类*。区别正是您所描述/想要的：

*   **分类**有离散的类/标签，任何名义属性都可以在这里用作类
*   **回归**有连续的标签，类在这里是一个错误的术语。

大多数基于回归的技术可以通过定义阈值转换为二元分类，并且根据预测值是高于还是低于该阈值来确定类别。

我不知道所有提供回归的 WEKA 分类器，但您可以从这两个开始：

*   **[MultilayerPerceptron](http://weka.sourceforge.net/doc.stable/weka/classifiers/functions/MultilayerPerceptron.html)**：基本上是一个神经网络。
*   **[LinearRegression](http://weka.sourceforge.net/doc.stable/weka/classifiers/functions/LinearRegression.html)**：顾名思义，线性回归。

您可能必须使用`NominalToBinary`过滤器将名义属性转换为数字（二进制​​）属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T08:42:47.573

您可以在 weka 分类器 > 函数 > 线性回归中找到使用回归。[这是在 weka https://developer.ibm.com/articles/os-weka1/](https://developer.ibm.com/articles/os-weka1/)中创建回归模型的示例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-11T03:09:41.467

这些天来，我相信在 Weka 3.7 中首次引入的 RandomForest 会按照您的意愿工作。特征可以是名义和数字的混合，预测也可以是数字的。

缺点（我想在你的情况下）是它不是一个 Updateable 类，因为 NaiveBayesUpdateable 可以很好地处理可能无法一次全部放入内存的大量数据。

# kineticjs - 加载 json Kinetics 4.3.3

> ID：16223046
> 
> 赞同：-1
> 
> 时间：2013-04-25T19:21:29.287
> 
> 标签：kineticjs

我正在尝试使用函数 () 4.3.3 kineticjs 加载 stage.load 阶段，但没有使用 Kinetic.Node.create 此类函数。我不知道如何使用这个功能，有人可以解释它是如何使用的。非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:49:00.720

从 JSON 创建阶段并不复杂：

1.  下载序列化的 json 阶段。
2.  用水润舞台`var stage = Kinetic.Node.create(myJSON, 'container');`

这是一些示例代码：

```
// Use jQuery to call to your server and retrieve 
// the JSON representation of your KineticJS stage
// jQuery make calling JSON easy, but...
// Alternatively, you can use straight javascript--google ;)
$.ajax({
    type: "GET",
    dataType: "json",
    url: 'http://www.yourSite.com/yourStageInJSON.json',
    success: successHandler,
    error: errorHandler
});

// this is called when your json-stage has been downloaded
function successHandler(myJSON){
    // use the downloaded json to create the stage
    // "container" is just the normal KineticJS container div
    var stage = Kinetic.Node.create(myJSON, 'container');
}

// this is called if there was a problem with the download
function errorHandler(){
    alert("Something has gone horribly wrong--call somebody!");
} 
```

如果您想查看序列化为 json 的阶段是什么样子，您可以像这样序列化现有阶段：

```
var json = stage.toJSON(); 
```

# c# - 将整数变量从 C# 传递到 Microsoft SQL 服务器，然后比较检索到的数据

> ID：16223052
> 
> 赞同：1
> 
> 时间：2013-04-25T19:21:53.850
> 
> 标签：c#, sql

我正在尝试开发一个 CBIR 应用程序，因此我正在获取输入图像，在三个不同的变量中计算其 RGB 值并修改这些值，然后将它们存储在三个变量中：`r1`, `g1`, `b1`.

然后我试图将这些值传递给数据库，以便我可以通过使用比较运算符比较它们来检索图像，但是我无法获取任何数据，尽管我认为我以正确的方式使用参数。

这是我的代码：

```
double r1, r2, g1, g2, b1, b2;
r1 = aveR -(.1 * aveR);
r2 = aveR +(.1 * aveR);
g1 = aveG -(.1 * aveG);
g2 = aveG +(.1 * aveG);
b1 = aveB -(.1 * aveB);
b2 = aveB +(.1 * aveB);

cn = new SqlConnection(@"Data Source=HOME;Initial Catalog=test_image;Integrated Security=True");
cmd = new SqlCommand("select path from image where red BETWEEN @r1 AND   @r2 AND green BETWEEN @g1 AND @g2 AND blue BETWEEN @b1 AND @b2" , cn);
cmd.Parameters.AddWithValue("@r1", r1);
cmd.Parameters.AddWithValue("@r2", r2);
cmd.Parameters.AddWithValue("@g1", g1);
cmd.Parameters.AddWithValue("@g2", g2);
cmd.Parameters.AddWithValue("@b1", b1);
cmd.Parameters.AddWithValue("@b2", b2);
cn.Open();

SqlDataReader dr;
try
{
    dr = cmd.ExecuteReader();
    while (dr.Read())
    {
        progressBar1.Value = progressBar1.Value + 9; 
        listBox1.Items.Add(dr["path"].ToString());
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
}
finally
{
    cn.Close();
}

/*after this i dont get any data in my list box, where i am expecting the paths of image("path" col in my DB) which should be returned after the comparison query.*/ 
```

这是填充的代码（希望我没有弄错，即此代码一张一张地获取图像，然后将它们插入数据库）。

```
int width = 256;
int height = 128;
int sumr = 0, sumg = 0, sumb = 0;
int rank = 0;
openFileDialog1.Filter = "All Images|*.jpg; *.bmp; *.png; *.gif";
DialogResult dr = openFileDialog1.ShowDialog();

listBox1.Items.Add("Pixel          RED            GREEN      BLUE ");
listBox2.Items.Add("avgR     avgG   avgB   ");

if (dr == System.Windows.Forms.DialogResult.OK)
{
    foreach(string file in openFileDialog1.FileNames)
    {
        try
        {
            Image img = Image.FromFile(file);
            Image img1 = Resizeimage(img, width, height);

            pictureBox1.Image = img1;
            textBox1.Text = file;

            Bitmap img2 = new Bitmap(img1);
            Color c;

            for (int i = 0; i < img2.Width; i++)
            {
                for (int j = 0; j < img2.Height; j++)
                {
                    c = img2.GetPixel(i, j);
                    int r = Convert.ToInt16(c.R);
                    int g = Convert.ToInt16(c.G);
                    int b = Convert.ToInt16(c.B);

                    sumr = sumr + r;
                    sumg = sumg + g;
                    sumb = sumb + b;

                    listBox1.Items.Add(i.ToString() + "," + j.ToString() + "   " + r.ToString() + "    " + g.ToString() + "   " + b.ToString());
                }
            }

            int total = img2.Height * img2.Width;
            int aveR = sumr / total;
            int aveG = sumg / total;
            int aveB = sumb / total;

            listBox2.Items.Add(aveR.ToString() + "   " + aveG.ToString() + "  " + aveB.ToString());

            Application.DoEvents();
            Thread.Sleep(5000);

            SqlConnection con = new SqlConnection(@"Data Source=HOME;Initial   Catalog=test_image;Integrated Security=True");
            MemoryStream ms = new MemoryStream();
            pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);

            byte[] pic_arr = new byte[ms.Length];
            ms.Position = 0;
            ms.Read(pic_arr, 0, pic_arr.Length);

            SqlCommand cmd = new SqlCommand("insert into image(path,image,red,green,blue,rank)values(@path,@image,@red, @green, @blue, @rank)", con);              

            cmd.Parameters.AddWithValue("@path", textBox1.Text);
            cmd.Parameters.AddWithValue("@image", pic_arr);
            cmd.Parameters.AddWithValue("@red", aveR);
            cmd.Parameters.AddWithValue("@green", aveG);
            cmd.Parameters.AddWithValue("@blue", aveB);
            cmd.Parameters.AddWithValue("@rank", rank);
            con.Open();
            try
            {
               int rs = cmd.ExecuteNonQuery();
               if (rs > 0)
               {
                     MessageBox.Show("image stored successfully");
               }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            finally
            {
                con.Close();
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("cannot display the image"+ ex.Message);
        }

        listBox1.Items.Clear();
        listBox2.Items.Clear();
    }
  }
}       

public static Image Resizeimage(Image img, int width, int height)
{
    Image newimg = new Bitmap(width, height);
    Graphics g = Graphics.FromImage(newimg);

    g.DrawImage(img, 0, 0, width, height);

    return newimg;
}

/** I am sorry if braces make you all little upset, I am new to this site, so editing might be poor**/ 
```

# regex - 如何在 Vim 中删除与模式匹配的所有行和后面的行？

> ID：16223054
> 
> 赞同：34
> 
> 时间：2013-04-25T19:21:58.140
> 
> 标签：regex, vim

有一段文字

```
Title of the text

This line contains a word that is matched by the pattern and it should be deleted.
Next line is supposed to be deleted as well.

Loren ipsum dolorem...

This line contains a word that is matched by the pattern and it should be deleted.
And this one should be deleted

The end of the article 
```

如何删除与第一行匹配的每一对行，例如“此行包含一个单词...”以及该行之后的行。结果将是：

```
Title of the text

Loren ipsum dolorem...

The end of the article 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-25T19:27:35.613

您可以使用

```
:g/word/normal 2dd 
```

这会找到 word 的所有实例，然后执行它之后的命令。在这种情况下，它`2dd`以正常模式执行

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-04-25T19:27:33.037

`:g[lobal]`与具有范围的`d[elete]`命令一起使用以`,+1`删除匹配的行和下一行：

```
:g/word/,+1d 
```

*   [`:global`](http://vimdoc.sourceforge.net/htmldoc/repeat.html#:global)
*   [`:delete`](http://vimdoc.sourceforge.net/htmldoc/change.html#:delete)
*   [命令范围](http://vimdoc.sourceforge.net/htmldoc/cmdline.html#[range])

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T19:27:58.280

您可以使用以下`:g[lobal]`命令：

```
:g/This line/norm 3dd 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-25T20:48:00.873

另一种方式：g

```
:g/word/norm dj 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-20T04:44:44.463

你可能想试试这个：

```
:g/your pattern go here/d 
```

# javascript - 通过 ajax 响应的 jQuery 搜索

> ID：16223060
> 
> 赞同：0
> 
> 时间：2013-04-25T19:22:21.937
> 
> 标签：javascript, jquery, html

所以我有一个ajax GET调用并返回一些html，返回数据是一个包装器和一些内容。有没有办法实现这样的事情？

```
$.ajax({
  url: appUrl+"/a/b/c/"+getId+"/"+getTime,
  success: function(data) {
   $(data).find('.shared').appendTo('.something');
  }
}); 
```

# javascript - Javascript 提交 Facebook 聊天

> ID：16223061
> 
> 赞同：-1
> 
> 时间：2013-04-25T19:22:22.233
> 
> 标签：javascript, facebook

我正在开发一个浏览器插件，我需要使用 JavaScript 发送 Facebook 聊天消息（插件会将 javascript 传递到 Facebook 页面）。但不幸的是，即使在查看了大量的 facebook 客户端源代码之后，我也找不到任何提交按钮（因为 Enter 键基本上用于发送聊天消息）或用于使用 Plugin Injected javascript 发送聊天消息的等效事件。

所以请帮忙！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:35:41.737

大多数聊天界面不是提交按钮，而是在`Enter`按下键时发送。检查这个问题， [通过 JavaScript 发送 Facebook 聊天消息](https://stackoverflow.com/questions/13902973/send-facebook-chat-messages-via-javascript)，如果有帮助，请告诉我 :)

# android - 裁剪图像而不加载到内存中

> ID：16223062
> 
> 赞同：4
> 
> 时间：2013-04-25T19:22:23.303
> 
> 标签：android

我想裁剪大尺寸的图像并尝试使用 Bitmap.createBitmap 但它给出了 OOM 错误。此外，围绕 createBitmap 尝试了多种技术，但都没有成功。

现在我考虑将图像保存到文件系统并裁剪它而不将图像加载到可能解决问题的内存中。但不知道该怎么做。

用户流程：每个快照用户可以手动裁剪后，用户将从应用内相机拍摄多张照片，或者应用程序将在某些预定义的登录时静默裁剪，然后将这些图像发送到服务器。

谁能指导我如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T22:16:10.733

有一个名为[BitmapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)的类可能会对您有所帮助，但它可从 API 10 及更高版本获得。

如果你不能使用它：

许多图像格式都经过压缩，因此需要某种形式的加载到内存中。

您需要阅读适合您需要的最佳图像格式，然后自己阅读，仅使用您需要的内存。

一个更简单的任务是在 JNI 中完成这一切，这样即使您将使用大量内存，至少您的应用程序不会这么快进入 OOM，因为它不会被限制为最大堆大小强加于普通应用程序。

当然，由于 android 是开源的，您可以尝试使用 BitmapRegionDecoder 并将其用于任何设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T22:10:54.377

我非常怀疑你可以用现有的 Android API 解决这个问题。

您需要做的是获取可用的图像访问库之一（libpng 可能是您最好的选择）并通过 jni 将其链接到您的应用程序（查看是否已有可用的 Java 绑定）。

使用低级 I/O 操作一次读取一条扫描线的图像。丢弃垂直裁剪区域之前或之后的任何扫描线。对于垂直裁剪区域内的那些扫描线，只取水平裁剪区域内的那些像素并将它们写入裁剪图像。

# asp.net - 从 ASP.Net 2.0 网站引用 3.5 和 4.0 程序集

> ID：16223067
> 
> 赞同：2
> 
> 时间：2013-04-25T19:22:31.570
> 
> 标签：asp.net, .net, forward-compatibility

我正在对旧的 ASP.Net 2.0 网站（不是 Web 应用程序——不确定这是否重要）进行小幅改进。我引用了一组针对 3.5 和 4.0 的程序集。

我惊讶地发现一切似乎都正常。我可以成功调用程序集中的方法，一切都很好。

我担心的是在未来或部署之后会出现一些运行时问题。只要目标 .net 框架版本部署在服务器上，我就可以了吗？我也很好奇，如果我调用了一个内部使用了 .Net 4.0 中在 2.0 中不存在的东西（例如 Linq）的方法会发生什么。

我无法将网站升级到 .net 4.0，因为这需要对整个应用程序进行回归测试（根据公司政策和常识）。也就是说，我确实可以选择在 .Net 2.0 项目中重新实现我需要的功能。

那么——引用使用较新的 .Net 版本构建的库是否存在高风险，或者如果它在我的本地机器上工作，我是否已经走出困境？

# mongodb - 无法通过自制软件连接到 OSX 上的 mongo db（“Javascript 执行失败”

> ID：16223071
> 
> 赞同：0
> 
> 时间：2013-04-25T19:22:42.750
> 
> 标签：mongodb, homebrew

我正在尝试通过 Homebrew 第一次在 OSX 10.8.3 上安装 mongo db。安装 Homebrew，然后安装 mongo，并被告知构建成功。但是，当我尝试使用该`mongo`命令启动 mongo 时，出现以下错误：

```
JavaScript execution failed: Error: couldn't connect to server 127.0.0.1:27017 at src/mongo/shell/mongo.js:L112 
```

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:24:55.493

运行`brew info mongodb`以获取有关如何启动 mongodb 服务器的说明。它会说：

```
launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist
launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mongodb.plist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-07T04:50:09.633

当我在 osx 10.8.4 上通过 homebrew 安装 mongo 时遇到了这个问题。问题是 mongod.conf 文件被写入

```
/usr/local/etc/ instead of /usr/local/etc/mongod.conf 
```

# vb.net - 如何在创建它的子外部引用控件数组？

> ID：16223073
> 
> 赞同：0
> 
> 时间：2013-04-25T19:22:45.437
> 
> 标签：vb.net

我正在编写一个使用此代码在运行时创建表单的程序，

```
Dim a As Integer = Screen.AllScreens.Length
Dim frm2(a) As Form
For b As Integer = 0 To a - 1
    frm2(b) = new form
    ' ...  set attributes to the form here
    frm2(b).Show()
Next 
```

我的问题是我以后如何从另一个子访问这些表格？例如，如果我想在这些表单上绘制图形，我将如何访问它们？它们在创建它们的子例程之外不可用，并且您不能在 vb.net 中创建公共控件数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:56:26.073

如果您将它们创建为表单变量，而不是在子本身中定义表单。然后，您可以从该表单中的任何子访问这些内容。

然后，您应该能够在表单上创建您需要的任何内容，或者最好在表单上创建一个可以从其他地方调用的 Public Sub。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:21:54.037

只需在类级别声明方法`frm2`之外的数组即可。`Sub`为了将来参考，在类级别声明的变量称为*字段*。字段的范围仅限于类，因此类中的任何方法都可以访问它们。例如：

```
Public Class MyClass
    Private frm2() As Form

    Public Sub CreateForms()
        Dim a As Integer = Screen.AllScreens.Length
        ReDim frm2(a)
        For b As Integer = 0 To a - 1
            frm2(b) = New Form()
            ' ...  set attributes to the form here
            frm2(b).Show()
        Next
    End Sub
End Class 
```

对于它的价值，我建议使用 a`List(Of Form)`而不是数组。这样您就不必担心重新调整它的大小，例如：

```
Public Class MyClass
    Private forms As New List(Of Form)()

    Public Sub CreateForms()
        For i As Integer = 0 To Screen.AllScreens.Length - 1
            Dim frm2 As New Form()
            ' ...  set attributes to the form here
            frm2.Show()
            forms.Add(frm2)
        Next
    End Sub
End Class 
```

# jquery - Restful Webservices 比较 WebAPI 与 MVC

> ID：16223075
> 
> 赞同：10
> 
> 时间：2013-04-25T19:22:48.267
> 
> 标签：jquery, asp.net-mvc, asp.net-web-api

我被告知要为客户端设计一个 API 来操作一些数据。现在，为了跟上 Jones 的步伐，我使用 WebAPI 设计了这个。我通过 $.Ajax 向我的 Restful Webservice 发布一个对象

为什么这与使用相同的 $.Ajax 发布到标准 MVC 4.0 控制器有什么不同？

有什么优势？

谢谢

====

关于潜在答案：

注意 如果您使用过 ASP.NET MVC，那么您已经熟悉控制器。它们在 Web API 中的工作方式类似，但 Web API 中的控制器派生自 ApiController 类而不是 Controller 类。您会注意到的第一个主要区别是 Web API 控制器上的操作不返回视图，而是返回数据。

====

这难道不是多余的吗，毕竟你总是可以

```
return JSON(x); 
```

从任何 MVC 控制器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T20:15:04.357

[http://encosia.com/asp-net-web-api-vs-asp-net-mvc-apis/](http://encosia.com/asp-net-web-api-vs-asp-net-mvc-apis/)

Dave Ward 的 ASP.NET Web API 与 ASP.NET MVC “API”——感谢 Ant P

美丽的剧情简介：

*   内容协商
*   灵活性
*   关注点分离

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T11:21:46.833

MVC 针对将 Web 浏览器作为客户端进行了优化。Web API 更有能力支持许多不同的客户端。如果您唯一的客户端是 Web 浏览器，那么 MVC 可能会是一个更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T21:20:28.763

您的 $.Ajax 方法没有区别。您的网页不应该关心 ajax 服务器如何实现自身，尽管它必须知道它是否支持诸如 oData 之类的东西以及不支持的东西。

在服务器端，它们之间有很多不同之处。当然，您可以在 MVC 中创建 Ajax 处理程序，但 WebAPI 为您提供了更多工具和更多功能。

# html - 当您向下滚动页面时，导航栏会展开以覆盖屏幕顶部

> ID：16223080
> 
> 赞同：1
> 
> 时间：2013-04-25T19:23:00.893
> 
> 标签：html, css, twitter-bootstrap

所以我正在查看新的 MemSQL 网站[http://www.memsql.com/product](http://www.memsql.com/product)。当您滚动经过页面中间加载的导航栏时，它会展开并停留在屏幕顶部。

初步看法：

![在此处输入图像描述](https://i.stack.imgur.com/0W5YW.png)

滚动过去导航栏后： ![在此处输入图像描述](https://i.stack.imgur.com/zmmvN.png)

你将如何实现这样的事情？有没有一种简单的方法可以通过 Bootstrap 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:38:16.103

查看 jQuery Waypoints 插件。具体这个。 [http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/](http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/)

不过，Waypoints 可以做很多事情。看看这个！

# sql - MyBatis 不会返回查询的所有结果

> ID：16223094
> 
> 赞同：4
> 
> 时间：2013-04-25T19:23:54.967
> 
> 标签：sql, associations, mybatis

# 问题

我有一个返回 17 条记录的查询。当我将 MyBatis 与具有`<association>`它的地图一起使用时，它会返回 6 条记录。*请注意，我的其他地图不会发生这种情况，我有许多其他地图的关联都可以正常工作。*

**询问：**

```
 with leave_counts as 
    (
        select leave_type_id, count(llm.leave_id) as count
        from lw_leave_master llm
        group by leave_type_id
    )
    select llt.leave_type_id, llt.leave_type_abbr_tx, 
            llt.leave_type_desc_tx, lc.count as count_nm
    from lw_leave_type llt
        join leave_counts lc on lc.leave_type_id=llt.leave_type_id
    order by llt.leave_type_abbr_tx 
```

**地图：**

```
<resultMap id="typeCountMap" type="mypackage.myclass">
    <result property="count" column="count_nm"/>
    <association property="type" resultMap="package.myMap"/>
</resultMap>

<resultMap id="myMap" type="mypackage.myclass2">
    <result property="id" column="leave_type_id"/>
    <result property="abbr" column="leave_type_abbr_tx"/>
    <result property="description" column="leave_type_desc_tx"/>
</resultMap> 
```

`<association>`in`typeCountMap`指的是地图`myMap`。

这每次返回 6 条记录。从记录器中获取实际运行的查询并手动运行它会返回 17 条记录。

# 解决方案？

**我可以做两件事来让 MyBatis 返回所有 17 条记录**

**#1**

如果我`lc.count as count_nm`从查询中删除，我会返回所有 17 条记录（只是没有与它们关联的值）

```
 with leave_counts as 
    (
        select leave_type_id, count(llm.leave_id) as count
        from lw_leave_master llm
        group by leave_type_id
    )
    select llt.leave_type_id, llt.leave_type_abbr_tx, 
            llt.leave_type_desc_tx
    from lw_leave_type llt
        join leave_counts lc on lc.leave_type_id=llt.leave_type_id
    order by llt.leave_type_abbr_tx 
```

这显然不是一个好的解决方案，但我想包括这个，以防它帮助你找出我做错了什么。

**#2**

如果我用另一张地图的内容替换关联，一切都会按预期工作。

```
<resultMap id="typeCountMap" type="mypackage.myclass1">
    <result property="count" column="count_nm"/>        
    <result property="type.id" column="leave_type_id"/>
    <result property="type.abbr" column="leave_type_abbr_tx"/>
    <result property="type.description" column="leave_type_desc_tx"/>
</resultMap> 
```

如果我找不到其他解决方案，这显然是我会做的，因为这确实有效。`<association>`使用我在其他地图中的方式会很好。

我应该注意我使用的是 MyBatis 3.1.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-27T17:17:03.920

我最近遇到了同样的问题。我相信这个问题与我的主要 resultMap 有关，其中的关联没有 id 列，而我的关联的 resultMap 确实有 id 列。我的结果按关联 id 列分组。

为了纠正这个问题，我在查询中选择了行号，并在我的主 resultMap 中添加了一个指向行号列的 id。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-06T17:22:46.053

如果您使用的是 3.1.1，您可以只定义 <id column="leave_type_id" /> 没有属性属性
如果您不使用 3.1.1，您可以添加 <result property="abbr" column="leave_type_id" />在列表顶部将字段包含在缓存键计算中以进行关联，稍后重新定义将分配正确的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T15:52:12.917

我不知道这是否是问题，但这是可以尝试的。我必须在这里发帖，因为我没有足够的代表发表评论。

尝试将列属性添加到您的关联并在第二个地图中标记 ID 列：

```
<resultMap id="typeCountMap" type="mypackage.myclass">
    <result property="count" column="count_nm"/>
    <association property="type" column="leave_type_id" resultMap="package.myMap"/>
</resultMap>

<resultMap id="myMap" type="mypackage.myclass2">
    <id property="id" column="leave_type_id"/>
    <result property="abbr" column="leave_type_abbr_tx"/>
    <result property="description" column="leave_type_desc_tx"/>
</resultMap> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-29T06:38:16.480

你应该换行 `<result property="id" column="leave_type_id"/>`

与`<id property="id" column="leave_type_id"/>`.

在 mybatis 中你不应该错过指定 id 列，它可能会弄乱你的结果集。

# containers - Sparql 查询集合和 rdf:containers？

> ID：16223095
> 
> 赞同：9
> 
> 时间：2013-04-25T19:23:56.977
> 
> 标签：containers, rdf, sparql

大家好 rdf/sparql 开发者。这是一个一直困扰我一段时间的问题，但自从 rdf 和 sparql 规范发布以来，似乎没有人准确地回答它。

为了说明这种情况，RDF 定义了几种处理资源多值属性的方法；从创建尽可能多的具有相同 subjet-predicate uris 的三元组到集合或容器。这一切都很好，因为每种模式都有自己的特点。

但从 SPARQL 的角度来看，在我看来，查询这些结构会导致过于复杂的查询（更糟糕的是）无法转录成合理的结果集：您不能使用变量来查询任意长度，而 propertyPath 确实不保持“自然”秩序。

*以一种天真的方式*，在许多 SELECT 或 ASK 查询中，如果我想查询或过滤容器或列表的值，我大部分时间都不会关心底层模式到底是什么（如果有的话）。例如：

```
<rdf:Description rdf:about="urn:1">
    <rdfs:label>
        <rdf:Alt>
            <rdf:li xml:lang="fr">Exemple n°1</rdf:li>
            <rdf:li xml:lang="en">Example #1</rdf:li>
        </rdf:Alt>
    </rdfs:label>
    <my:release>
        <rdf:Seq>
            <rdf:li>10.0</rdf:li>
            <rdf:li>2.4</rdf:li>
            <rdf:li>1.1.2</rdf:li>
            <rdf:li>0.9</rdf:li>
        </rdf:Seq>
    </my:release>
</rdf:Description>

<rdf:Description rdf:about="urn:2">
    <rdfs:label xml:lang="en">Example #2</rdfs:label>
</rdf:Description> 
```

显然，我希望这两个资源都能回答查询：

```
SELECT ?res WHERE { ?res rdfs:label ?label . FILTER ( contains(?label, 'Example'@en) } 
```

我也希望查询：

```
SELECT ?ver WHERE { <urn:1> my:release ?ver } 
```

以原始顺序返回 rdf:Seq 元素（或任何 rdf:Alt）（对于其他模式，是否保留原始顺序无关紧要，所以为什么不保留它呢？） - 除非明确指定通过 ORDER BY 子句。

当然，有必要保持与旧方法的兼容性，所以也许有可能用新的运算符扩展 propertyPath 语法？

我觉得它会大大简化日常 SPARQL 用例。

这对你有意义吗？此外，你有什么理由不尝试实施这个吗？

**编辑**更正了示例的 urn:2 rdfs:label 值不正确

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-05T23:17:19.637

我意识到这个问题已经有了答案，但是如果你使用 RDF 列表而不是其他类型的 RDF 容器，那么值得看看你可以在这里做什么。首先，您在 Turtle 中提供的数据（在提供命名空间声明之后）是：

```
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix my:    <https://stackoverflow.com/q/16223095/1281433/> .

<urn:2>  rdfs:label  "Example #2"@en .

<urn:1>  rdfs:label  [ a       rdf:Alt ;
                       rdf:_1  "Exemple n°1"@fr ;
                       rdf:_2  "Example #1"@en
                     ] ;
        my:release  [ a       rdf:Seq ;
                      rdf:_1  "10.0" ;
                      rdf:_2  "2.4" ;
                      rdf:_3  "1.1.2" ;
                      rdf:_4  "0.9"
                    ] . 
```

属性`rdf:_n`是这里的难点，因为它们是唯一为序列中的元素提供任何真实顺序的东西。（虽然它仍然使用属性，但 alt 并没有真正的重要序列`rdf:_n`。）如果您使用使`rdf:_n`属性成为可选的 SPARQL 属性路径，则可以获得所有三个标签：

```
prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#>
prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

select ?x ?label where {
  ?x rdfs:label/(rdf:_1|rdf:_2|rdf:_3)* ?label
  filter( isLiteral( ?label ))
} 
```

```
------------------------------
| x       | label            |
==============================
| <urn:1> | "Exemple n°1"@fr |
| <urn:1> | "Example #1"@en  |
| <urn:2> | "Example #2"@en  |
------------------------------ 
```

让我们看看您可以用 RDF 列表做什么。如果您使用列表，那么您的数据是这样的：

```
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix my:    <https://stackoverflow.com/q/16223095/1281433/> .

<urn:2>  rdfs:label  "Example #2"@en .

<urn:1>  rdfs:label  ( "Exemple n°1"@fr "Example #1"@en ) ;
        my:release  ( "10.0" "2.4" "1.1.2" "0.9" ) . 
```

现在您可以相对轻松地获取标签：

```
prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#>
prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

select ?x ?label where {
  ?x rdfs:label/(rdf:rest*/rdf:first)* ?label
  filter( isLiteral( ?label ))
} 
```

```
------------------------------
| x       | label            |
==============================
| <urn:1> | "Exemple n°1"@fr |
| <urn:1> | "Example #1"@en  |
| <urn:2> | "Example #2"@en  |
------------------------------ 
```

如果你想要标签列表中标签的位置，你甚至可以得到它，尽管它使查询更复杂一点：

```
prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#>
prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

select ?x ?label (count(?mid)-1 as ?position) where {
  ?x rdfs:label ?y .
  ?y rdf:rest* ?mid . ?mid rdf:rest*/rdf:first? ?label .
  filter(isLiteral(?label))
}
group by ?x ?label 
```

```
-----------------------------------------
| x       | label            | position |
=========================================
| <urn:1> | "Exemple n°1"@fr | 0        |
| <urn:1> | "Example #1"@en  | 1        |
| <urn:2> | "Example #2"@en  | 0        |
----------------------------------------- 
```

这使用了[Is it possible to get the position of an element in an RDF Collection in SPARQL 中的技术吗？](https://stackoverflow.com/q/17523804/1281433)计算列表中作为 的对象的每个值的位置`rdfs:label`，从 开始`0`并分配`0`给不在列表中的元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-26T04:36:28.727

RDF 为集合和容器定义了一个词汇表，但就包含它们的图应如何解释而言，它们没有特殊含义。它们不适用于表示多值属性，也并不真正适合表示多值属性。

一般来说，说：

```
:A :predicate [ a rdf:Alt ; rdf:_1 :B ; rdf:_2 :C ] . 
```

不等于

```
:A :predicate :B , :C . 
```

假设谓词是owl:sameAs：

```
:A owl:sameAs [ a rdf:Alt ; rdf:_1 :B ; rdf:_2 :C ] . 
```

上面说 :A 命名一个*包含*:B 和 :C 的个体，而：

```
:A owl:sameAs :B , :C . 
```

表示 :A、:B 和 :C 是*同一*个人。

SPARQL 与容器和集合无关（除了 rdf:List 的语法简写）。如果您想要一种更方便的方式来处理集合，包括[Jena](http://jena.apache.org/)和[rdflib](https://github.com/RDFLib/rdflib)在内的许多 RDF API都为它们提供了一流的表示。

**附录**

对多值属性建模的方法——也就是说，对“Example n°1”@fr 和“Example #1”@en 都是 urn:1 的标签进行建模——是简单地陈述两个事实：

```
<rdf:Description rdf:about="urn:1">
    <rdfs:label xml:lang="fr">Exemple n°1</rdfs:label>
    <rdfs:label xml:lang="en">Example #1</rdfs:label>
    ...
</rdf:Description> 
```

和查询：

```
SELECT ?res WHERE { ?res rdfs:label ?label . FILTER ( contains(?label, 'Example'@en) ) } 
```

将匹配 <urn:1> 和 <urn:2> 的英文标签。

对于 my:release 属性，您有一个多值属性并对其值进行排序，这有点棘手。您可以定义一个新属性（例如）my:releases，其值为 rdf:List 或 rdf:Seq。my:release 给出直接关系，而 my:releases 给出指定显式排序的间接关系。使用推理存储和适当的规则，您只需提供后者。不幸的是，这并没有使在 SPARQL 中使用排序变得更容易。

在 SPARQL 和非推理存储中更容易使用的方法是使版本本身成为具有定义排序属性的对象：

```
 <rdf:Description rdf:about="urn:1">
    <rdfs:label xml:lang="fr">Exemple n&#xB0;1</rdfs:label>
    <rdfs:label xml:lang="en">Example #1</rdfs:label>
    <my:release>
      <my:Release>
        <dc:issued rdf:datatype="&xsd;date">2008-10-10/dc:issued>
        <my:version>10.0</my:version>
      </my:Release>
    </my:release>
    <my:release>
      <my:Release>
        <my:version>2.4</my:version>
        <dc:issued rdf:datatype="&xsd;date">2007-05-01</dc:issued>
      </my:Release>
    </my:release>
    ...
  </rdf:Description> 
```

在上面，日期可用于对结果进行排序，因为不再有明确的顺序。查询稍微复杂一点：

```
SELECT ?ver 
WHERE { <urn:1> my:release [ my:version ?ver ; dc:issued ?date ] }
ORDER BY ?date 
```

# wcf - 在 Azure 上使用 WCF 设置 SSL

> ID：16223099
> 
> 赞同：2
> 
> 时间：2013-04-25T19:24:07.883
> 
> 标签：wcf, azure, x509certificate

我正在尝试在 Azure 上使用 SSL 设置 WCF 服务。

有人可以解释一下这些情况下使用证书的区别吗？

1.  IIS 中的 https 绑定证书
2.  Web.Config 中的 ServiceCertificate
3.  Web.Config 中的 ClientCertificate
4.  ServiceDefinition.csdef 中的证书
5.  ServiceConfiguration.Local.cscfg 中的证书
6.  ServiceConfiguration.Cloud.cscfg 中的证书
7.  我应该知道更多？

我想在同一个角色中发布几个服务端点，一些使用 SSL，一些没有。我需要绑定证书还是我应该使用的服务证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T04:00:58.137

首先阅读[带有证书身份验证的 WCF 传输安全性](http://msdn.microsoft.com/en-us/library/ms731074.aspx)和[为 Windows Azure 中的应用程序配置 SSL](http://www.windowsazure.com/en-us/develop/net/common-tasks/enable-ssl/)

1.  IIS 中 https 绑定的证书——正如它所说的，IIS 使用该证书在站点/服务上创建安全绑定，通常在端口 443 上
2.  Web.Config 中的 ServiceCertificate - WCF 服务端绑定证书，用于带有证书身份验证的 WCF 传输安全性 - 用于对使用相应公钥签名的客户端请求进行身份验证的私钥证书
3.  Web.Config 中的 ClientCertificate - WCF 客户端绑定证书，用于带有证书身份验证的 WCF 传输安全性 - 公钥证书用于使用传输安全性和相应的私钥签署对服务的身份验证请求
4.  ServiceDefinition.csdef 中的证书 - 用于在 Azure 工作人员和 Web 角色中创建安全终结点的默认证书。注意：这是 Azure 在 IIS 中安装以绑定到服务端点的证书（参见 #1）
5.  ServiceConfiguration.Local.cscfg 中的证书 - 与 4 相同，仅用于“本地”构建/部署配置
6.  ServiceConfiguration.Cloud.cscfg 中的证书 - 与 4 相同，仅用于“云”构建/部署配置

# android - isTextSelectable 时文本错误

> ID：16223100
> 
> 赞同：1
> 
> 时间：2013-04-25T19:24:08.903
> 
> 标签：android, xamarin.android

我有一个从 LinearLayout 派生的自定义视图，它在构造函数中扩展了以下 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Title" />
    <TextView
        android:id="@+id/value"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textIsSelectable="true"
        android:text="Value" />
</LinearLayout> 
```

此视图在我的活动中包含两次（或多次）。我还替换了视图构造函数中的字符串“Title”和“Value”，因此对于视图的两个实例，它们可能是“title1”/“value1”和“title2”/“value2”。

在我旋转手机之前，我认为这是按预期工作的（我还需要确保活动在此过程中被破坏）。重新创建Activity后，第一个值文本是“value2”而不是“value1”！

我追踪到它来自 textIsSelectable 的问题。当我删除该属性时，它工作正常。

我的目标是 API 级别 14，该属性只是我的 layout-v14 文件夹的一部分。如果我以编程方式设置属性也是一样的。

有没有其他人经历过这个？你知道解决这个问题的任何方法吗？

请注意，我正在使用 Mono for Android - 不确定这是否是一个错误？

# java - Android用孩子旋转视图组

> ID：16223106
> 
> 赞同：0
> 
> 时间：2013-04-25T19:24:26.713
> 
> 标签：java, android

我在理解 android 视图层次结构的一些基础知识时遇到了一些严重的问题。我有一个`ViewGroup`比屏幕更大的屏幕，并且在所有侧面都与屏幕重叠。这`ViewGroup`有一些`ChildViews/SubViews`，例如`Buttons`。现在，我想`ViewGroup`用它的子视图围绕中间点旋转整个。

在 iOS 中，我可以简单地`UIView`在其上放置一些子视图并对超级视图进行仿射变换。这样，超级视图及其所有子视图围绕中间点旋转。

Android中是否有类似的方法？

我画了一张小[图](http://s1.directupload.net/images/130425/xcfncook.png)来告诉你我的问题；-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:16:57.463

[在这个页面](http://www.41post.com/4806/programming/android-how-to-rotate-a-view-element)上找到了一个很好的例子。解释如何旋转一个整体`ViewGroup`及其内容。

# jquery - 使用 jquery 创建带有一些用户名和密码的登录页面

> ID：16223110
> 
> 赞同：0
> 
> 时间：2013-04-25T19:24:41.417
> 
> 标签：jquery, html, css, jquery-mobile, login

使用 jquery 创建登录页面，首先单击登录按钮会弹出一个带有“确定”按钮的术语的弹出窗口。当用户单击它时，必须转到下一页。

我正在尝试的演示应用程序流程：-用户打开应用程序-应用程序加载并显示带有登录按钮的用户名和密码字段的登录页面-用户输入演示用户名和密码让我们说用户名：演示和密码：测试并单击登录按钮 -弹出窗口带有带有“确定”按钮的条款和条件。-用户单击“确定”，然后转到 secondpage.html。

这可以使用 html5 和 css3 使用 jquery 或 javascript 来完成吗？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T01:31:39.827

我写了一个快速小提琴，希望能实现你想要的，你可以[在这里查看](http://jsfiddle.net/nBBUe/)。

该脚本依赖于一个隐藏的 div ( `#warning`)，其中包含您的条款和条件。当用户完成必填字段（我包括了一些基本的有效性检查）时，隐藏的 div 设置为可见，允许用户单击“是”或“否”。在我的应用程序中，当用户同意时，我会显示警报，但是在您的应用程序中，您可以将其调整为任何必要的下一步。

# ios - 除非用户按下 UIalertView 上的按钮，否则如何使用 UILocalNotification 而不仅仅是 Badge 显示 Alertview 并使其保持不变？

> ID：16223111
> 
> 赞同：-1
> 
> 时间：2013-04-25T19:24:42.613
> 
> 标签：ios, uilocalnotification

在我的应用程序中，我正在尝试创建警报，但唯一的问题是 ios6 UILocalnotification 被转换为徽章而不是 UIAlertView。这是我正在使用的代码：

```
UILocalNotification * notif = [[UILocalNotification alloc]init];
    notif.fireDate = date;
    notif.alertAction = @"Snooze";
    notif.repeatInterval = NSDayCalendarUnit;
    notif.alertBody = @"Time to wake up";
    notif.soundName = @"client_song.mp3";

    [[UIApplication sharedApplication]scheduleLocalNotification:notif]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:38:54.890

抱歉，您对此别无选择。允许用户指定（在设置应用程序中）来自您的应用程序的本地通知应显示为警报、横幅或根本不显示 - 您对此无能为力。如果您不喜欢这样，请不要使用本地通知...

# python - Twisted：如何知道哪个客户端关闭了连接

> ID：16223116
> 
> 赞同：0
> 
> 时间：2013-04-25T19:24:56.637
> 
> 标签：python, twisted, twisted.client

这是我之前的问题的后续。

我正在使用 Python 中的“twisted”包构建一个简单的客户端服务器程序。

我想记录哪个客户端加入并关闭了连接。

假设，如果客户端 B 关闭连接，我想在服务器上打印“客户端 B 已关闭连接”

这是我正在使用的代码：

```
factory = protocol.ServerFactory()
factory.protocol = Echo
PortNo = 8000
reactor.listenTCP(PortNo,factory)

reactor.run()

def connectionLost(self, reason): 

print "Connection lost" 
```

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:28:19.287

丢失的连接是与 to 的`self`参数引用的协议实例相关联的连接`connectionLost`。

对于普通工厂（如`ServerFactory`您正在使用的），连接和协议实例之间存在一对一的关系。

# java - 如何从多维数组中提取值？

> ID：16223117
> 
> 赞同：0
> 
> 时间：2013-04-25T19:25:02.870
> 
> 标签：java, arrays, loops

使用多维数组对我来说是第一次，所以我对这些数组附带的一些方面的理解有点……模糊。现在快速回顾一下这个程序在完成后将用于什么......

它将允许教师输入学生的姓名和四个相应的考试成绩。他们最多可以列出 15 名学生。

前任。约翰·史密斯：67 75 84 52 简·多伊：54 86 81 79

填写完 firstNameField、lastNameField 和 test1Field-test4Field 后，按 addButton 将其输出到另一个字段并输出您添加的每个学生，创建一个列表。

我的问题是找到班级平均水平。我想找出每个学生的四个考试成绩（而不是名字），在那里我会创建一个方程来找到平均值，这很容易。问题是，我不确定谁可以从数组中提取所有测试分数，所以我可以这样做......

```
public class StudentGradesView extends FrameView {

    int [][] aryStudent = new int [15][4]; // [15] being # of students, [4] for test scores
    String[] studentNames = new String[15]; //this isn't being used now...
    int numOfStudents = 0; //listing the students starts off from 0...

    int marks = 0; //might be needed for grabbing out test scores for finding average?

    int test1;
    int test2;
    int test3;
    int test4;

    public StudentGradesView(SingleFrameApplication app) {

//unimportant...for GUI...

}
    private void addButtonActionPerformed(java.awt.event.ActionEvent evt) {                                          

        aryStudent[numOfStudents][0] = Integer.parseInt(test1Field.getText());
        aryStudent[numOfStudents][1] = Integer.parseInt(test2Field.getText());
        aryStudent[numOfStudents][2] = Integer.parseInt(test3Field.getText());
        aryStudent[numOfStudents][3] = Integer.parseInt(test4Field.getText());

        StringBuilder sb = new StringBuilder();

//The following is the code that list the students and their grades...this code should be fine..

        for (int x=0; x <= numOfStudents && x<15; x++) {
            sb.append(firstNameField.getText() + " " + lastNameField.getText());
            for (int y=0; y < 4; y++) {
                sb.append(" " +aryStudent[x][y]);
           // studentListField.setText("" + firstNameField.getText() + " " + lastNameField.getText() + " " + aryStudent[numOfStudents][y] + "\n" + currentList);
            }
            sb.append("\n");
        }
        studentListField.setText(sb.toString());
        numOfStudents ++;
    }                                         

    private void classAverageButtonActionPerformed(java.awt.event.ActionEvent evt) { 
```

“int schoolAverage = (test1 + test2 + test3 + test4)/4;” //这是我希望的工作......但之后输出总是为零。所以我想我没有正确地将测试分数从数组中拉出来。所以我尝试了一个类似于我上面所做的循环......截至目前我迷失在黑暗中。

```
 for (int x=0; x <= numOfStudents && x<15; x++) {

            for (int y=0; y < marks && y <4; y++) {
                 averageField.setText("" + /** I'm unsure what to do here */ );
            }
        }

        numOfStudents ++;
        marks++;

       // studentListField.getText(averageField.setText(""));

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:42:43.083

您的代码几乎是正确的——不过，您只需要一个 for 循环。类似于以下内容：

```
for(int x = 0; x < numOfStudents && x<15; x++) {
  averageField.setText((aryStudent[x][0] + aryStudent[x][1] + aryStudent[x][2] + [aryStudent[x][3])/4);
} 
```

这将调用 averageField.setText() *numOfStudents*次。在 aryStudent[ *x* ][ *y* ] 中，您可以区分使用*x*的学生和使用*y*的成绩。

由于年级数是固定的（每个学生四个），您可以直接引用每个年级（aryStudent[ *x* ][0] 表示第x 个学生的第一个年级，aryStudent[ *x* *]* [1] 表示第二个年级，依此类推.. .)

另外，请记住数组是零索引的（一个五元素数组，将是 0,1,2,3,4 而不是 1,2,3,4,5）所以如果你从 x=0 开始并测试对于 x <= numOfStudents，您的循环将迭代 numOfStudents+1 次，可能导致 ArrayIndexOutofBoundsException。

# asp.net-mvc - Ajax 与 JQuery MVC 表单发布

> ID：16223124
> 
> 赞同：2
> 
> 时间：2013-04-25T19:25:26.933
> 
> 标签：asp.net-mvc, jquery

我是一个完整的 Ajax 菜鸟，我发现自己对如何最好地处理事情有点迷失，我一直在查看 SO 并找到了一篇关于 Ajax 的帖子，其中包括这个 JavaScript：

```
$(function () {
    $('form').submit(function () {
        if ($(this).valid()) {
            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (result) {
                    $('#result').html(result);
                }
            });
        }
        return false;
    });
}); 
```

我将它合并到我的脚本文件中，用于我网站的一个页面上的表单，并很快意识到这实际上附加到所有表单，包括登录表单在内的站点范围内。

我想将登录表单视为一种特殊情况并实际执行重定向，而不是简单地将返回的 HTML 片段插入到页面上的元素中。

我假设用登录表单的 ID 替换“表单”会将登录表单与“通用”表单处理过程区分开来，并且想知道对此可接受的最佳实践是什么。

您是否有像上面那样的“通用”Ajax 处理程序，或者根据需要对响应执行的操作为每个表单提供特定的 JavaScript 函数是否更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:27:55.283

我倾向于将我的分开，尽管其他人可能会做不同的事情。他们发布到不同的 URL 并对数据做不同的事情。

我通过 id 引用表格：

```
$('#myformid") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:33:37.917

在我看来，您在本应本地化的情况下包含了一些通用的内容。在我看来，像这样的一揽子方法并不是真正可取的，尤其是对于会影响应用程序中每个表单的东西。

真正要带走的是`$.ajax`代码。需要时使用 ajax，否则使用正式发布（这是默认设置）。

使用精确的引用当然会区分应用程序中的某些形式，但这是应该在视图脚本中完成的事情，而不是在应用程序范围内包含的一个总括脚本中。

我倾向于做的是在我想提供预览时使用 ajax，或者如果我想在用户*不*离开页面的情况下发布。

有时在极少数情况下，我会通过 ajax 将一个页面替换为几个滑动窗口，然后在系列结束时我会想要重定向。在这种情况下，我将让我的控制器返回一个字符串，该字符串允许视图在 ajax 调用的成功函数中重定向到该字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:35:19.520

如果您只想将函数应用于除登录表单之外的所有表单，您可能希望使用不相等选择器。

```
$('form[id!="loginform"]')... 
```

# windows - HHOOK 进程在 Windows 中是特定的吗？

> ID：16223149
> 
> 赞同：0
> 
> 时间：2013-04-25T19:27:09.580
> 
> 标签：windows, winapi, hook, win32-process

我们正在使用 SetWindowsHookEx 从我们的进程 A 挂钩到另一个进程 B。此函数返回 HHOOK，UnhookWindowsHookEx 可以使用它来删除挂钩。如果我们安装钩子的进程 A 崩溃了，我可以使用来自另一个进程的相同 HHOOK 值从进程 B 中删除钩子吗？

# android - Android Fragment - SlidingMenu - ListActivity

> ID：16223153
> 
> 赞同：0
> 
> 时间：2013-04-25T19:27:22.497
> 
> 标签：android, android-fragments, listactivity, slidingmenu

所以我将slidingmenu(jfeinstein10) 库添加到我的项目中并且菜单工作。我遇到的问题是基于我的应用扩展 ListActivity。

我已经看到了一些关于此的问题，并且大多数建议扩展到 Fragment 以使 Fragments 为菜单工作。我想知道是否有办法不使用 Fragments 来使菜单列表正常工作。

每次我移动到 SlidingFragmentActivity 或任何其他 Fragment Activity 时，onListItemClick 和其他方法都会开始中断。

下面是我的代码：

```
public class MainListActivity extends ListActivity {

public static final int NUMBER_OF_POSTS = 20;
public static final String TAG = MainListActivity.class.getSimpleName();
protected JSONObject mBlogData;
protected ProgressBar mProgressBar;
private SlidingMenu menu;

static final String KEY_TITLE = "title";
static final String KEY_AUTHOR = "author";
static final String KEY_IMAGE = "image";

ListView list;
LazyAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //setBehindContentView(R.layout.menu_frame);
    mProgressBar = (ProgressBar) findViewById(R.id.progressBar1);

    menu = new SlidingMenu(this);
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setShadowWidth(5);
    menu.setFadeDegree(0.35f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setBehindWidth(R.dimen.shadow_width);
    menu.setShadowDrawable(R.drawable.shadow);
    menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    menu.setMenu(R.layout.menu_frame);
    //getFragmentManager().beginTransaction().replace(R.id.menu_frame, new MenuFragment()).commit();

    if(isNetworkAvailable()){
        GetBlogPostsTask getBlogPostsTask = new GetBlogPostsTask();
        mProgressBar.setVisibility(View.VISIBLE);
        getBlogPostsTask.execute();
    }else{
        Toast.makeText(this, "Network is unavailable", Toast.LENGTH_LONG).show();
    }
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id){
    super.onListItemClick(l, v, position, id);
    try{
        JSONArray jsonPosts = mBlogData.getJSONArray("items");
        JSONObject jsonPost = jsonPosts.getJSONObject(position);
        String blogSummary = jsonPost.getString("summary");
        String blogUrl = jsonPost.getString("bitly");
        Intent intent = new Intent(this, BlogWebViewActivity.class);
        intent.setData(Uri.parse(blogSummary));
        intent.putExtra("mUrl",blogUrl);
        startActivity(intent);
    }catch(JSONException e){
        logException(e);
    }
}

private void logException(Exception e) {
    Log.e(TAG, "Exception caught!", e);
}

private boolean isNetworkAvailable() {
    ConnectivityManager manager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = manager.getActiveNetworkInfo();

    boolean isAvailable = false;
    if(networkInfo != null && networkInfo.isConnected()){
        isAvailable = true;
    }
    return isAvailable;

}

public void handleBlogResponse() {
    mProgressBar.setVisibility(View.INVISIBLE);

    if(mBlogData == null){
        updateDisplayForError();
    }else{
        try {
            JSONArray jsonPosts = mBlogData.getJSONArray("items");
            ArrayList<HashMap<String,String>> blogPosts = new ArrayList<HashMap<String,String>>();
            for (int i=0;i<jsonPosts.length();i++){
                JSONObject post = jsonPosts.getJSONObject(i);
                String title = post.getString(KEY_TITLE);
                title = Html.fromHtml(title).toString();
                String tag = post.getString(KEY_AUTHOR);
                tag = Html.fromHtml(tag).toString();
                String image = post.getString(KEY_IMAGE);
                image = Html.fromHtml(image).toString();

                HashMap<String, String> blogPost = new HashMap<String,String>();
                blogPost.put(KEY_TITLE, title);
                blogPost.put(KEY_AUTHOR, tag);;
                blogPost.put(KEY_IMAGE, image);

                blogPosts.add(blogPost);
            }

            list=getListView();
            LazyAdapter adapter = new LazyAdapter(this, blogPosts);
            list.setAdapter(adapter);

        } catch (JSONException e) {
            logException(e);
        }
    }
}

private void updateDisplayForError() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(getString(R.string.error_title));
    builder.setMessage(getString(R.string.error_message));
    builder.setPositiveButton(android.R.string.ok,null);
    AlertDialog dialog = builder.create();
    dialog.show();

    TextView emptyTextView = (TextView) getListView().getEmptyView();
    emptyTextView.setText(getString(R.string.no_items));
}

private class GetBlogPostsTask extends AsyncTask<Object, Void, JSONObject>{

    @Override
    protected JSONObject doInBackground(Object... params) {
        int responseCode = -1; 
        JSONObject jsonResponse = null;
        StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpget = new HttpGet("http://www.domain.com/app_json.js");

        try {   
            HttpResponse response = client.execute(httpget);
            StatusLine statusLine = response.getStatusLine();
            responseCode = statusLine.getStatusCode();
            if(responseCode == HttpURLConnection.HTTP_OK){
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while((line = reader.readLine()) != null){
                    builder.append(line);
                }
                jsonResponse = new JSONObject(builder.toString());
            }else{
                Log.i(TAG, "HTTP Failed: "+responseCode);
            }

        } catch (MalformedURLException e) {
            logException(e);
        } catch (IOException e) {
            logException(e);
        }
        catch(Exception e){
            logException(e);
        }
        return jsonResponse;

    }

    @Override
    protected void onPostExecute(JSONObject result){
        mBlogData = result;
        handleBlogResponse();
    }

}

@Override
public void onBackPressed() {
    if (menu.isMenuShowing()) {
        menu.showContent();
    } else {
        super.onBackPressed();
    }
}

} 
```

我将菜单项作为字符串数组存储在 /values/array.xml 中。

我也设置了一个片段，但不知道如何在不从 ListActivity 扩展到片段的情况下访问它。

下面是我基于来自 github 的示例片段的片段：

```
public class MenuFragment extends ListFragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.menu_list, null);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    String[] colors = getResources().getStringArray(R.array.menu_items);
    ArrayAdapter<String> colorAdapter = new ArrayAdapter<String>(getActivity(), 
            android.R.layout.simple_list_item_1, android.R.id.text1, colors);
    setListAdapter(colorAdapter);
}

@Override
public void onListItemClick(ListView lv, View v, int position, long id) {
    Fragment newContent = null;
    switch (position) {
    case 0:
        //newContent = new ColorFragment(R.color.red);
        break;
    case 1:
        //newContent = new ColorFragment(R.color.green);
        break;
    case 2:
        //newContent = new ColorFragment(R.color.blue);
        break;
    case 3:
        //newContent = new ColorFragment(android.R.color.white);
        break;
    case 4:
        //newContent = new ColorFragment(android.R.color.black);
        break;
    }
    if (newContent != null)
        switchFragment(newContent);
}

// the meat of switching the above fragment
private void switchFragment(Fragment fragment) {
    if (getActivity() == null)
        return;
}
} 
```

谢谢

# c# - 下载的pdf文件打不开

> ID：16223154
> 
> 赞同：2
> 
> 时间：2013-04-25T19:27:28.760
> 
> 标签：c#, asp.net, c#-4.0

我通过以下代码将pdf文件保存在数据库中

```
 string filename = Path.GetFileName(FileUpload1.PostedFile.FileName);
        string filetype = Path.GetExtension(FileUpload1.PostedFile.FileName);

        int filesize = FileUpload1.PostedFile.ContentLength;

        Stream fs = FileUpload1.PostedFile.InputStream;
        BinaryReader br = new BinaryReader(fs);
        byte[] content = br.ReadBytes((Int32)fs.Length);

        Objects.Insert_FilesToDatabase(filename, filetype, content,filesize); 
```

然后，我试图通过单击以下代码的链接从数据库中保存文件。

```
 void lnkDownload_Click(object sender, EventArgs e)
    {

        string filetype = Objects.GetFileType(Convert.ToInt32(txtslno.Text.Trim()));
        string filename=Objects.GetFileName(Convert.ToInt32(txtslno.Text.Trim()));
        int filesize = Objects.GetFileLength(Convert.ToInt32(txtslno.Text.Trim()));
        byte[] bytfile = new byte[filesize+1000];

        Response.Clear();
        Response.Buffer = true;

        Response.ContentType = "application/pdf";
        Response.AddHeader("content-disposition",attachment;filename="+filename+".pdf");
        Response.BufferOutput = true;
        Response.Charset = "";

        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.BinaryWrite(bytfile);

        Response.End();

    } 
```

通过此代码，我可以下载 pdf 文件，但无法打开 pdf 文件。错误是文件未正确解码。你能帮我看看我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T15:24:11.710

我通过以下代码解决了这个问题..

```
 byte[] bytfile = Objects.GetFile(Convert.ToInt32(txtslno.Text.Trim()));
        Response.Clear();
        Response.ClearContent();
        Response.ClearHeaders();
        Response.ContentType = "application/pdf";
        Response.AddHeader("Content-Disposition", "attachment;filename="+filename);
        Response.AddHeader("Content-Length", bytfile.Length.ToString());
        Response.OutputStream.Write(bytfile, 0, bytfile.Length);
        Response.Flush();
        Response.End(); 
```

我只是没有在我之前的代码中将二进制内容写入输出 pdf 流。谢谢您的支持

# c# - 鼠标事件被后面的元素搞砸了？

> ID：16223159
> 
> 赞同：2
> 
> 时间：2013-04-25T19:27:54.813
> 
> 标签：c#, wpf

我正在覆盖这样的 GroupBox 标头的模板：

```
 <Style x:Key="styleScoreComp" TargetType="{x:Type GroupBox}">
                <Setter Property="HeaderTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <Grid >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{Binding}" Foreground="Black" FontWeight="Bold" FontSize="20" VerticalAlignment="Center"/>
                                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" >
                                    <Composer:AddElementButton Type="Composite"/>
                                    <Composer:AddElementButton Type="Calculation"/>
                                    <Composer:AddElementButton Type="SimulationValue"/>
                                </StackPanel>
                            </Grid>    
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Style> 
```

添加元素按钮

```
<Border x:Name="borderButton" BorderThickness="1" BorderBrush="Silver" CornerRadius="4" Cursor="Hand" Margin="5"  Background="White" Width="50" Height="45"  MouseEnter="Border_MouseEnter" MouseLeave="Border_MouseLeave"  MouseLeftButtonUp="borderButton_MouseLeftButtonUp">
        <Canvas HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <Image x:Name="imgType" Source="{Binding TypeImage, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" 
                   Cursor="Hand" Stretch="Uniform"  Width="24" Height="24" Canvas.Top="3" Canvas.Left="13"    />                
            <Image Canvas.Top="30" Canvas.Left="7" Source="add.png" Cursor="Hand" Stretch="Uniform"  Width="36" Height="9" VerticalAlignment="Bottom"   />                
        </Canvas>       
    </Border> 
```

基本上，它可以工作，但是当您将鼠标悬停在按钮的中间时，它认为鼠标已经离开了 Border 控件。当鼠标悬停在 GroupBox 边框所在的位置时，似乎会发生这种情况。看这张图片：

![在此处输入图像描述](https://i.stack.imgur.com/8FySW.png)

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T18:43:26.633

所以事实证明问题是绘制组框边框的顺序。我找到了一个描述该问题的网站： [http ://wpf-mettyz.blogspot.com/2011/02/sample-posting.html](http://wpf-mettyz.blogspot.com/2011/02/sample-posting.html)

我通过将 GroupBox 样式设置为以下内容来修复它：

```
>  <Style TargetType="{x:Type GroupBox}" x:Key="styleTest">
>                 <Setter Property="BorderBrush" Value="#D5DFE5"/>
>                 <Setter Property="BorderThickness" Value="1"/>
>                 <Setter Property="Template">
>                     <Setter.Value>
>                         <ControlTemplate TargetType="{x:Type GroupBox}">
>                             <Grid SnapsToDevicePixels="true">
>                                 <Grid.ColumnDefinitions>
>                                     <ColumnDefinition Width="6"/>
>                                     <ColumnDefinition Width="Auto"/>
>                                     <ColumnDefinition Width="*"/>
>                                     <ColumnDefinition Width="6"/>
>                                 </Grid.ColumnDefinitions>
>                                 <Grid.RowDefinitions>
>                                     <RowDefinition Height="Auto"/>
>                                     <RowDefinition Height="Auto"/>
>                                     <RowDefinition Height="*"/>
>                                     <RowDefinition Height="6"/>
>                                 </Grid.RowDefinitions>
>                                 <Border Background="{TemplateBinding Background}" BorderBrush="Silver"
>                                         BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="4"
> Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="1" Grid.RowSpan="3"/>   
> 
>                                 <ContentPresenter Margin="{TemplateBinding Padding}"
> SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
> Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="2"/>                    
> 
>                                 <Border x:Name="Header" Padding="3,1,3,0" Grid.Column="1" Grid.Row="0" Grid.RowSpan="2">
>                                     <ContentPresenter DataContext="{Binding}" SnapsToDevicePixels="{TemplateBinding
> SnapsToDevicePixels}" ContentSource="Header"
> RecognizesAccessKey="True"/>
>                                 </Border>
>                             </Grid>
>                         </ControlTemplate>
>                     </Setter.Value>
>                 </Setter>
>             </Style> 
```

然后将标题设置为包含按钮。

# ruby - Shikashi：无法访问常量哈希异常

> ID：16223160
> 
> 赞同：2
> 
> 时间：2013-04-25T19:27:54.873
> 
> 标签：ruby

为什么在这种情况下使用 Shikashi Gem会出现安全错误**“无法访问常量哈希” ？**

```
include Shikashi

privileges = Privileges.new
privileges.instances_of(Hash).allow_all
Sandbox.new.run(privileges, "arguments=Hash.new;") 
```

有什么见解吗？我需要在沙盒中运行一些 ruby​​ 代码，看看它是否表现良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:47:46.473

您需要允许脚本[读取`Hash`常量](http://tario.github.io/shikashi/doc/classes/Shikashi/Privileges.html#M000021)。您还需要允许在[对象上](http://tario.github.io/shikashi/doc/classes/Shikashi/Privileges.html#M000007)[调用该`new`方法`Hash`](http://tario.github.io/shikashi/doc/classes/Shikashi/Privileges.html#M000007)：

```
include Shikashi

privileges = Privileges.new
privileges.allow_const_read "Hash"
privileges.object(Hash).allow :new
privileges.instances_of(Hash).allow_all
Sandbox.new.run(privileges, "arguments=Hash.new;") 
```

# jquery - 在jquery中修复一个方向的菜单

> ID：16223165
> 
> 赞同：2
> 
> 时间：2013-04-25T19:28:21.113
> 
> 标签：jquery, css, css-position

我在网站左侧有一个“固定”菜单栏，我想在用户滚动时跟随滚动条向下滚动。到目前为止，我已经尝试了两种方法，一种是 css，一种是 jquery：

1）我的第一次尝试是使用 css 样式修复：

```
#leftframe {
 position:fixed;
 width: 200;
} 
```

通常，这在垂直滚动时效果很好。这个解决方案的问题是，当窗口不是很宽，并且用户试图滚动时，它会直接覆盖页面内容。

2）经过一些研究，我发现有一种 jquery 方法可以让您在一个方向上固定一个元素，如此处堆栈溢出所述：[CSS：fixed position on x-axis but not y?](https://stackoverflow.com/questions/2049845/css-fixed-position-on-x-axis-but-not-y)

使用那里概述的方法，我编写了这个不错的小函数来为我做这件事：

```
function float_vertical_scroll(id) {
    $(window).scroll(function(){
        $(id).css({
            'top': $(this).scrollTop() //Use it later
        });
    });
} 
```

只是，现在的问题是，我已经在 Chrome 和 Safari 中尝试过，并且在垂直滚动期间都显示菜单栏明显闪烁。菜单以非常“断断续续”的方式移动，css 解决方案将其平滑地滑下页面。

有谁知道为什么 jquery 解决方案如此不稳定，如果有什么可以做的吗？有没有第三种解决方案可以让我“两全其美”？

感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T04:09:55.123

我想我刚刚为这个问题想出了一个很好的解决方案，所以我会把它贴在这里，以防其他人也在寻找一些东西。

回顾一下，我的问题是我想要一个左侧菜单垂直固定，所以它跟随垂直滚动，而不是水平固定。css 只允许双向固定。所以用css方案，当窗口很小的时候，会出现一个水平滚动条，使用的时候会导致菜单浮在页面内容上。

我在最初的问题中作为另一种解决方案提出的 float_vertical_scroll 函数存在一个缺陷，即当您垂直滚动时，javascript 刷新速度太慢，导致菜单栏以跳跃、不连贯的方式移动。该解决方案将位置设置为绝对位置，并依靠 jquery 在每个滚动事件上向下移动菜单。

大多数页面上的侧边栏菜单的问题是 99% 的滚动是垂直的。很少是水平的。所以我想，如果我们能让水平滚动不连贯，垂直滚动平滑呢？

这导致了下面的解决方案。我没有将框架设置为绝对并在javascript中垂直滚动，而是将其设置为固定，并反转了水平滚动的偏移量。这取消了水平滚动。水平滚动可能有点跳跃，但没有人真正关心它，因为它很少使用：

```
function float_horizontal_scroll(id) {
    jQuery(window).scroll(function(){
        jQuery(id).css({
            'left': 0 - jQuery(this).scrollLeft()
        });
    });
}

#leftframe {
 position:fixed;
 width: 200;
} 
```

# mysql - 当满足至少 x 列中的条件时，MYSQL 选择行？

> ID：16223166
> 
> 赞同：2
> 
> 时间：2013-04-25T19:28:24.063
> 
> 标签：mysql

另一个我找不到答案的MYSQL问题：

我有这张表，我想获取所有 SN>7 和 reps > 4 的 ID，并且在第 1-6 列中，至少满足某个条件 x 次。

例如，列 col1-col6 中至少有 3 个单元格的值 > 1。

第一部分很容易（`SELECT * FROM table WHERE SN > 7 AND reps > 4....`），但我不知道第二部分。

谢谢！

```
ID SN    reps  col1   col2  col3  col4  col5  col6
A  12    3     0.6    1     3     -2    1     3
B  6     5     3.2    1.1   -3.3  3     0     0
C  300   6     1.3    -0.4  0     0.6   -0.5  -3.3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:46:02.667

尝试：

```
SELECT * FROM table 
WHERE SN > 7 AND reps > 4 and
      (case when `1` > 1 then 1 else 0 end +
       case when `2` > 1 then 1 else 0 end +
       case when `3` > 1 then 1 else 0 end +
       case when `4` > 1 then 1 else 0 end +
       case when `5` > 1 then 1 else 0 end +
       case when `6` > 1 then 1 else 0 end) >= 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:48:45.740

```
select * from table where sn> 7 and reps > 4 and 
(((`1` > 1) + (`2` > 1 ) + (`3` > 1) + (`4` > 1) + (`5` >1 ) + (`6` > 1)) >= 3) 
```

# python - Python中的递归函数在列表中添加奇数

> ID：16223168
> 
> 赞同：0
> 
> 时间：2013-04-25T19:28:32.703
> 
> 标签：python

我的任务是在 Python 中创建一个递归函数，该函数将一个列表和一个值 0 作为其输入，然后将列表中的所有奇数相加并返回该值。下面是我拥有的代码，它不断返回列表索引超出范围。无论我做什么，我都无法让它工作。

```
def addodds2(x,y):
    total=0
    a=x[y]
    while y<len(x):
        if a%2!=0:
            total+=a
            return(addodds2(x,y+1))
        else:
            return(addodds2(x,y+1))
    return(total)
print(addodds2([3,2,4,7,2,4,1,3,2],0)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:38:13.780

由于您正在尝试以递归方式解决此问题，因此我认为您不需要该`while`循环。

当你试图递归地解决一个问题时，你需要两个部分：你需要一个完成一些工作的部分，你需要一个处理到达工作结束的部分。这是“基本情况”。

通常在解决此类问题时，如果您有一个零长度列表，您会立即找到基本情况。零长度列表的结果应该是什么？我会说0。

因此，这是一个将列表中的所有数字相加的函数的基本概要：

检查长度，如果您已经在末尾或末尾之后，则返回 0。否则，将当前项添加到递归调用中（索引值递增）。

让它工作，然后修改它，使它只添加奇数值。

PS这似乎是家庭作业，所以我不想只给你代码。如果你真的自己弄清楚，记住这些东西会更容易。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:10:51.420

这段代码可以非常简短和优雅：

```
def add_odds(lst, i=0):
    try:
        return (lst[i] if lst[i] % 2 == 0 else 0) + add_odds(lst, i+1)
    except IndexError:
        return 0 
```

请注意，在真正实用的样式中，您也不会跟踪索引。但是，在 Python 中，它的效率会相当低，但无论如何都不建议在 Python 中使用递归。

```
def add_odds2(lst):
    try:
        return (lst[-1] if lst[-1] % 2 == 0 else 0) + add_odds2(lst[:-1])
    except IndexError:
        return 0 
```

要使其适用于任何类型的序列，您可以执行以下操作：

```
def add_odds3(it):
    it = iter(it)
    try:
        value = next(it)
        return (value if value % 2 == 0 else 0) + add_odds3(it)
    except StopIteration:
        return 0 
```

它效率更高，尽管递归使用迭代器没有多大意义......

我意识到这与您的（教育）目的几乎没有关系，但我只是想向（所有人）展示一些不错的 Python。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:41:13.360

您的代码应该是（评论解释了我的更正）：

```
def addodds2(x,y):
    total=0
    if y<len(x):    #you don't need a while there
        a=x[y]      #you have to do this operation if y<len(x), otherwise you would get the index error you are getting
        if a%2!=0:
            total+=a
        return total+addodds2(x,y+1)    #you have to sum the current total to the result returned by the addodds2() function (otherwise you would got 0 as the final result)
    return total

print(addodds2([3,2,4,7,2,4,1,3,2],0)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T19:32:00.487

```
while y<len(x) 
```

所以最后一个`y`小于`len(x)`is `y = len(x) - 1`，所以它是列表的最后一项。

```
addodds2(x,y+1) 
```

然后您尝试访问该项目*之后*的元素，该元素不存在，因此您得到 IndexError。

# hibernate - Hibernate 与 maven 的核心依赖关系（使用 intellij）

> ID：16223172
> 
> 赞同：0
> 
> 时间：2013-04-25T19:28:53.940
> 
> 标签：hibernate, maven, intellij-idea, dependencies, pom.xml

当我在 pom.xml 中添加休眠依赖项时，IntelliJ 检查器出现错误：

```
<dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-core</artifactId>
<version>4.3.0.Beta1</version>
</dependency> 
```

错误：

> 无法获取依赖信息：无法读取工件“org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:jar”的元数据文件：找不到父项目：org.jboss:jboss-parent 项目： org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:jar:1.0.0.Alpha1 用于项目 org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:jar:1.0.0 .Alpha1 org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:jar:1.0.0.Alpha1 来自指定的远程存储库：中央（[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)），java。 net.m2 ( [http://download.java.net/maven/2/](http://download.java.net/maven/2/) ) 依赖路径：1) com.n0where:beat:war:1.0-SNAPSHOT 2) org.hibernate:hibernate-core:jar:4.3。 0.Beta1（在第 1 行）

# joomla - 如果用户编辑他的个人资料，如何从表单的基本设置中删除下拉列表框“编辑器”？

> ID：16223173
> 
> 赞同：1
> 
> 时间：2013-04-25T19:28:55.760
> 
> 标签：joomla, joomla2.5

如果用户编辑他的个人资料，如何从表单的基本设置中删除下拉列表框“编辑器（可选）”？我不需要它。

![在此处输入图像描述](https://i.stack.imgur.com/taS6b.png)

这是 com_users/views/profile/tmpl/edit.php 视图文件的代码。

```
<?php
/**
 * @package     Joomla.Site
 * @subpackage  com_users
 * @copyright   Copyright (C) 2005 - 2012 Open Source Matters, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 * @since       1.6
 */

defined('_JEXEC') or die;

JHtml::_('behavior.keepalive');
JHtml::_('behavior.tooltip');
JHtml::_('behavior.formvalidation');
JHtml::_('behavior.noframes');
//load user_profile plugin language
$lang = JFactory::getLanguage();
$lang->load( 'plg_user_profile', JPATH_ADMINISTRATOR );
?>
<div class="profile-edit<?php echo $this->pageclass_sfx?>">
<?php if ($this->params->get('show_page_heading')) : ?>
    <h1><?php echo $this->escape($this->params->get('page_heading')); ?></h1>
<?php endif; ?>

<form id="member-profile" action="<?php echo JRoute::_('index.php?option=com_users&task=profile.save'); ?>" method="post" class="form-validate" enctype="multipart/form-data">
<?php foreach ($this->form->getFieldsets() as $group => $fieldset):// Iterate through the form fieldsets and display each one.?>
    <?php $fields = $this->form->getFieldset($group);?>

    <?php if (count($fields)):?>
    <fieldset>
        <?php if (isset($fieldset->label)):// If the fieldset has a label set, display it as the legend.?>
        <legend><?php echo JText::_($fieldset->label); ?></legend>
        <?php endif;?>
        <dl>
        <?php foreach ($fields as $field):// Iterate through the fields in the set and display them.?>
            <?php if ($field->hidden):// If the field is hidden, just display the input.?>
                <?php echo $field->input;?>
            <?php else:?>
                <dt>
                    <?php echo $field->label; ?>
                    <?php if (!$field->required && $field->type!='Spacer' && $field->name!='jform[username]'): ?>
                        <span class="optional"><?php echo JText::_('COM_USERS_OPTIONAL'); ?></span>
                    <?php endif; ?>
                </dt>
                <dd><?php echo $field->input; ?></dd>
            <?php endif;?>
        <?php endforeach;?>
        </dl>
    </fieldset>
    <?php endif;?>
<?php endforeach;?>

        <div>
            <button type="submit" class="validate"><span><?php echo JText::_('JSUBMIT'); ?></span></button>
            <?php echo JText::_('COM_USERS_OR'); ?>
            <a href="<?php echo JRoute::_('component/users/profile.html'); ?>" title="<?php echo JText::_('JCANCEL'); ?>"><?php echo JText::_('JCANCEL'); ?></a>

            <input type="hidden" name="option" value="com_users" />
            <input type="hidden" name="task" value="profile.save" />
            <?php echo JHtml::_('form.token'); ?>
        </div>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:11:12.917

我认为不可能只禁用**Editor**参数。但是，您可以按照以下步骤删除整个**Basic Settings ：**

1.  在 Joomla 后端，转到**用户管理器**
2.  转到**选项**
3.  将**前端用户参数**设置为**隐藏**

只去掉**Editor**参数，我能想到的唯一不用hack核心代码的方法就是用CSS来隐藏它。

# python - 如何比较两个集合，其中每个元素都是列表？

> ID：16223176
> 
> 赞同：1
> 
> 时间：2013-04-25T19:29:03.210
> 
> 标签：python, list, set

这是我的代码。

```
a = [
        ['StarList', 'StarId38', 'ShipList']
    ]
b = [
        ['StarList', 'StarId3', 'ShipList'],
        ['StarList', 'StarId4', 'ShipList']
    ]
assert set(a) == set(b) # False

a = [
        ['StarList', 'StarId4', 'ShipList'],
        ['StarList', 'StarId3', 'ShipList']
    ]
assert set(a) == set(b) # True 
```

它不起作用：

```
Traceback (most recent call last):
    File "compare.py", line 8, in <module>
        assert set(a) == set(b) # False
TypeError: unhashable type: 'list' 
```

那么，怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T19:31:53.527

在比较之前将内部列表转换为元组或其他一些可散列类型。

```
In [52]: a = [                               
        ['StarList', 'StarId38', 'ShipList']
    ]

In [53]: b = [                               
        ['StarList', 'StarId3', 'ShipList'],
        ['StarList', 'StarId4', 'ShipList']
    ]

In [54]: set(map(tuple, a)) == set(map(tuple, b))
Out[54]: False

In [55]: a = [
   ....:         ['StarList', 'StarId4', 'ShipList'],
   ....:         ['StarList', 'StarId3', 'ShipList']
   ....:     ]

In [56]: set(map(tuple,a))==set(map(tuple,b))
Out[56]: True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T19:30:54.103

`set()`当列表的元素是不可散列的（例如是一个列表）时不起作用。所以首先你应该考虑如果你真的必须使用`set`. 在这种情况下删除重复项的另一种方法是`itertools.groupby`：

```
import itertools
unique_a = [k for k,_ in itertools.groupby(a)]
unique_b = [k for k,_ in itertools.groupby(b)]
unique_a.sort()
unique_b.sort() 
```

并尝试（对于您的第二种情况）：

```
>>> unique_a == unique_b
True 
```

# java - 铸造和包装：一些奇怪的案例

> ID：16223177
> 
> 赞同：2
> 
> 时间：2013-04-25T19:29:08.033
> 
> 标签：java, casting, wrapper

看看这个……今天晚上，当我发现：

```
Integer i = (Integer)4;
Integer i = (Integer)4f; // Doesn't compile! 
```

但是如果我重写第二行：

```
Integer i2 = (int)4f; // Then it compiles 
```

有什么不同？为什么我应该能够在第一种情况下使用包装类进行转换，而在第二种情况下却不行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T19:30:53.593

这里

```
Integer i = (Integer)4f; 
```

您正在将浮点原语转换为整数包装器 - 它们不适合。这也与自动装箱无关。即使使用显式装箱，这仍然无法编译：

```
Integer i = (Integer)(Double.valueOf(4f)); 
```

在这里：

```
Integer i2 = (int)4f; 
```

您将 float 原语转换为 int 原语（在此过程中截断），然后 java 自动将其装入 Integer 为您

# javascript - 使用绝对图像位置

> ID：16223179
> 
> 赞同：3
> 
> 时间：2013-04-25T19:29:16.573
> 
> 标签：javascript, jquery, html, css

我有一个剪辑图像列表，每个都有绝对位置：

```
<img style='position:absolute;clip(xpx xpx xpx xpx);'/>
<img style='position:absolute;clip(xpx xpx xpx xpx);'/>
<img style='position:absolute;clip(xpx xpx xpx xpx);'/>
<img style='position:absolute;clip(xpx xpx xpx xpx);'/>
<img style='position:absolute;clip(xpx xpx xpx xpx);'/> 
```

这里的问题是所有图像都在同一个地方，我想在其他人旁边。

由于裁剪图像，我做绝对位置；

我能做些什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:33:00.427

为什么你然后绝对定位它们？

要动态地将它们一个接一个地放置，您需要将它们包装到非绝对定位的东西中。就像一个相对定位的列表元素

```
<ul>
   <li style="position:relative">
        <img src="" style="position:absolute" />
   </li>
</ul> 
```

如果你不能包装它们，你将不得不用 javascript 来做，就像这样。

```
var memo = 0;
$("img").each(function() {
   $(this).css("left", memo+"px");
   memo += $(this).outerWidth(true);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:35:20.773

position absolute 将您的元素从元素流中取出。因此，您的元素不会相互推动。

如果你真的必须使用绝对位置，你需要为每个img设置不同的css[属性](http://www.w3schools.com/cssref/pr_pos_left.asp)。top 和 left 的标准值为 0。因此它们在同一个位置，或者在彼此之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T22:47:35.730

如果元素必须绝对定位，您可以使用`:nth-child()`or`:nth-of-type()`选择器并相应地进行调整`left: Xpx`。

*   [:nth-child() 的 MDN](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)
*   [MDN for :nth-of-type()](https://developer.mozilla.org/en-US/docs/CSS/%3anth-of-type)

另一种选择是，因为您使用的是内联样式，所以只需将一个`left:`和/或`top:`值粘贴到您想要的位置即可。

也就是说，似乎使用`clip`造成的问题比它的价值还多！一定有办法解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T19:32:36.207

要么使用 float:left，要么将每个图像的 left 属性设置为所有先前图像的宽度之和。

# json - 创建一个数组并发送到ajax

> ID：16223181
> 
> 赞同：0
> 
> 时间：2013-04-25T19:29:18.247
> 
> 标签：json, jquery

我正在尝试从页面上的所有文本区域收集信息，然后将该信息放入一个数组中，以便我可以通过 ajax/json 发送到服务器。

虽然我不太确定如何去做。

我不确定如何从

这是我到目前为止所拥有的：

我的 HTML 示例

```
 "<textarea id='tbObjective_" + counter + "' name='txtObjective' class='objectives' sequence='" + counter + "'></textarea>" 
```

jQuery：

```
 var objectiveList = [];
    $('.objectives').each(function (objective) {
        objectiveList.push({
            id: objective.id,
            sequence: objective.sequence,
            text: objective.val()
        });
    });

    $.ajax({
        type: "POST",
        url: url,
        dataType: "json",
        data: objectiveList 
    }); 
```

任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T06:05:54.967

您可以继续执行以下步骤。我为此目的使用了 python django 和 html5

```
1\. make a text box which is hidden and after generating  your json document set it in this text box (suppose id of textbox is "submit_json") than  use
$("#submit_json").val(JSON.stringify(formData, null, '\t')),  // (formData, null, '\t') this is js function that i have written for the ourpose

data = JSON.stringify({"jsonDoc":Generated JSON})

console.log(data);
$.ajax({

url: 'http://127.0.0.1:8000/catchjson/',
type: 'POST',
async: false,
contentType: 'application/json',
data: data,
dataType: 'json',
processData: false,
success: function(data){
alert('Done')
//Goto Next Page

},

error: function(jqXHR, textStatus, errorThrown){
alert("Some Error!")
}
}) 
```

现在在服务器上，如果您从文本框中创建 json 时遇到问题，您可以捕获此 json，让我知道

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:31:26.327

你可以参数化它`$.param(objectiveList)`

见[jQuery.param()](http://api.jquery.com/jQuery.param/ "jQuery.param()")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T06:43:12.417

我经常使用：

```
var formData = $("form").serialize(); 
```

通过 ajax 发布数据，所以也许你可以尝试：

```
var textareaData = $(".objectives").serialize();

$.ajax({
    type: "POST",
    url: url,
    dataType: "json",
    data: textareaData
}); 
```

或者确保所有字段都在表单元素中并使用第一个示例。

# sass - Compass 在文件路径上编译前面的斜线

> ID：16223183
> 
> 赞同：0
> 
> 时间：2013-04-25T19:29:22.867
> 
> 标签：sass, font-face, compass-sass

我的 font-face mixin 调用正在我的 css 中编译前面的斜杠。我有一个使用类似路径的精灵图像：

```
Compass.configuration do |c|
c.images_path='app/static'
c.fonts_path='app/static'
c.generated_images_dir = 'assets'
c.relative_assets = true
end 
```

作品〜图像/图像名称

```
$sprites: sprite-map("images/sprite/*.png"); 
```

不起作用〜/fonts/q2.ttf

```
@include font-face("q2overlay", font-files("fonts/q2.ttf","fonts/q2.dev.svg","fonts/q2.eot","fonts/q2.svg","fonts/q2.woff")); 
```

任何有关如何调整配置以删除 /fonts 中前面的斜线的信息都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:11:49.567

您是否正确设置了文件中的`fonts_dir`变量`config.rb`？

来自官方指南针文档：

**fonts_dir** *String* 保存字体文件的目录。独立项目将默认为 /fonts。Rails 项目将默认为“public/fonts”。

**fonts_path** *String* 保存字体文件的完整路径。默认为 /。

**http_fonts_path** *字符串* Web 服务器上字体文件的完整 http 路径。

**http_fonts_dir** *字符串* Web 服务器上字体文件的相对 http 路径。

正如您[在官方指南针文档](http://compass-style.org/help/tutorials/configuration-reference/)中看到的，精灵和图像的设置与字体的设置不同。

让我知道它是否有帮助，如果您仍然卡住，请发布您的 config.rb。

干杯!

# android - 在 BaseAdapter Android 中委托事件

> ID：16223184
> 
> 赞同：0
> 
> 时间：2013-04-25T19:29:25.000
> 
> 标签：android, baseadapter

当我们使用 BaseAdapter 时，有必要创建另一个类（ClassA）来调用这个类（MyBaseAdapter）。如果在 BaseAdapter 中膨胀的视图包含按钮和另一个调度事件的控件，如何将这些事件委托给 ClassA？

我正在使用按钮，但将来我将添加 EditText 和另一个控件，但我不想在 BaseAdapter 类中管理这些事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:14:25.670

只是使 Activity 实现了您的侦听器并在适配器中注册为您的类的侦听器。

```
ActivityA implements OnClickListener {

}

YourAdapter extends BaseAdapter {

 YourAdapter(Context ctx,....)

 // Context is your activity 
```

}

```
 button.setOnClickListener((ActivityA) ctx); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:39:46.727

很难理解你的问题，但我会尽量回答我认为你在问的问题。

不，您不必处理类中扩展 BaseAdapter 的事件。您始终可以对包含适配器的 Fragment 或 Activity 进行回调。

所以在适配器中：

```
private OnButtonSelectedListener mListener;

    public interface OnButtonSelectedListener {
    void onButtonSelected();

}

public void setListener (OnButtonSelectedListener listener) {
mListener = listener;

} 
```

// 然后当按钮被点击时调用：

```
mListener.onButtonSelected(); 
```

// 在你的 Activity 或 Fragment 中，

// 确保类实现了 OnButtonSelectedListener // 然后添加未实现的方法

// 无论你在哪里实例化你的适配器，设置监听器

```
coolAdapter = new CoolAdapter(mContext, listOfCoolStuff);
coolAdapter.setListener(this); 
```

// 然后填写你的方法 onButtonSelectedListener 来处理你想做的任何事情

```
private void onButtonSelected() {

//handle your event here!

} 
```

如果您有任何问题，或者我只是没有正确理解您的问题，请告诉我。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:43:38.830

使用适配器作为监听器：

```
public class MyAdapter extends BaseAdapter implements OnClickListener{

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // if you are in fragment
            View v = getActivity().getLayoutInflater().inflate(R.layout.layout_settings_cell, null);
            Button btn = v.findViewById(R.id.button1);
            btn.setOnClickListener(this);
            btn.setTag(Integer.valueOf(position));
            return v;
        }

        @Override
        public void onClick(View v) {
            int pos = (Integer) v.getTag();
            // your code

        }

    } 
```

只需扩展您的自定义列表项布局。

所有按钮都将具有相同的 id，但您可以将位置参数放在标签中以了解按下的确切按钮。

使这个适配器成为您的 A 类的内部类，它具有一些可以从适配器激活的方法。

# javascript - javascript 如果 Else 块跳转到 Else，即使条件标记为 true

> ID：16223190
> 
> 赞同：0
> 
> 时间：2013-04-25T19:29:42.653
> 
> 标签：javascript

我正在尝试根据复选框中的真值或假值执行操作。使用 If:Else 语句，我测试复选框值是否为“true”，即使复选框值标记为“true”，它也会进入我语句的 Else 部分。

谁能给我解释一下这个原因？

```
 var CheckedBoxs = $(stepTitle + " input:checkbox");
        for (var val in CheckedBoxs) {
            if (val.toString() === "length") {
                break;
            } //End IF
            if (CheckedBoxs[val].value === "true") {
                OneUp = parseInt(val) + 1;
                var PriceTag = "  -$";
                PriceTag += HiddenInput[OneUp].name.substring(HiddenInput[OneUp].name.indexOf(":") + 1, HiddenInput[OneUp].name.length);
                Lbls[val].innerHTML = Lbls[val].innerHTML + '<span class="PriceChange">' + PriceTag + "</span>";
            } else {
                OneUp = parseInt(val) + 1;
                var PriceTag = "  +$";
                PriceTag += HiddenInput[OneUp].name.substring(HiddenInput[OneUp].name.indexOf(":") + 1, HiddenInput[OneUp].name.length);
                Lbls[val].innerHTML = Lbls[val].innerHTML + '<span class="PriceChange">' + PriceTag + "</span>";
            }//End If
        }//End For 
```

我已经看到了许多与 If:Else 语句相关的问题，但无法找到一个涉及复选框的问题，如果这是重复的话，我们深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:32:36.220

两件事情

第一的

`for (var val in CheckedBoxs) {`

那不是如何循环数组；仅在对象文字的属性上使用该循环。

第二

`if (CheckedBoxs[val].value === "true") {`

应该

`if (CheckedBoxs[val].checked) {`

[编辑，小提琴](http://jsfiddle.net/W9Zmu/1/)

# css - JQuery Mobile：除了自定义主题外，还使用默认主题

> ID：16223198
> 
> 赞同：0
> 
> 时间：2013-04-25T19:30:14.073
> 
> 标签：css, jquery-mobile

我为我的 JQuery 移动应用程序创建了[自定义主题。](http://jquerymobile.com/themeroller/)虽然我在我的应用程序的大多数区域中使用自定义主题，但我想在页脚中使用导航栏的默认主题。我只是找不到这是怎么可能的，无论我是否提供数据主题属性，它总是使用我的自定义主题来设置它的样式。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:49:47.463

确保您下载了正确的 JQM 文件，有一个带有主题的 css 版本和一个没有主题的 css 版本。

# python - 抑制“程序无法启动，因为 X.dll 丢失”错误弹出窗口

> ID：16223199
> 
> 赞同：7
> 
> 时间：2013-04-25T19:30:14.127
> 
> 标签：python, windows, cmd

我有一个 Python 程序，用于`os.system`执行各种命令。（它不能使用`subprocess`，因为它必须一直向后兼容到 Python 2.0。）

在 Windows 上，有时该命令会引用异常目录中的 DLL，因此我会弹出臭名昭著的“程序无法启动，因为 X.dll 丢失”错误弹出窗口。

![带有标题的 Windows 错误弹出窗口](https://i.stack.imgur.com/Kbl1j.png)

我的问题**不是**关于如何让命令找到它的所有 DLL。我已经知道该怎么做。我想知道的是，当缺少 DLL 时，如何告诉 Windows*不显示此对话框？*相反，子进程应该将错误消息打印到 stderr（已被重定向到`os.system`调用中的文件）并不成功退出（导致`os.system`返回错误代码）。这样我的程序就可以捕获错误并以自己的方式报告它，而不是挂起直到有人来点击确定。

MSDN 通常是我的朋友，但这次我只得到关于如何处理特定缺失 DLL 的建议，这很好，但不是我这次需要的。

重申一下，这是一种极度向后兼容的情况：我需要一个可以与 Python 2.7 或任何旧版本一起使用的解决方案，一直到 2.0。它还需要在所有仍然流行的 Windows 版本（XP、Vista、7、8）上工作。使用*更旧的*Windows 是非常可取的，但不是 100% 需要。此外，不能选择以任何其他语言编写的第三方模块和帮助程序。（如果这是唯一的方法，我想一个`.BAT`文件就可以了。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-30T16:25:25.770

可以使用 为调用进程禁用该对话框[`SetErrorMode`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621%28v=vs.85%29.aspx)。但是，您必须阅读[`LoadLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)文档才能发现“加载时缺少 DLL”属于`SEM_FAILCRITICALERRORS`.

错误模式会继承到子进程，只要它们不是用 创建的[`CREATE_DEFAULT_ERROR_MODE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx)，并且 CMD.EXE 在创建子进程时似乎没有设置该标志。因此，在我的 Python 脚本中设置启动时的错误模式实际上会在我关心的情况下抑制对话框...

```
if sys.platform == 'win32':
    try:
        import ctypes
        # SEM_FAILCRITICALERRORS|SEM_NOGPFAULTERRORBOX|SEM_NOOPENFILEERRORBOX
        ctypes.windll.kernel32.SetErrorMode(0x0001|0x0002|0x8000)
    except:
        pass 
```

这不是一个最佳解决方案：子进程以特定的错误代码终止（0xC0000135 - 实际上并未记录为“缺少 DLL”，但从搜索该数字时出现的内容显然如此）但细节 - 例如缺少哪个 DLL ——掉在地上。我仍然希望在某个地方找到一个设置，使加载程序将详细信息报告给 stderr。

# asp.net-mvc - 在 mvc4 中使用 filecontentresult 时如何显示加载消息和错误消息？

> ID：16223202
> 
> 赞同：0
> 
> 时间：2013-04-25T19:30:20.883
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我在服务器上生成一个大的 csv 文件并在 mvc4 中返回它，这大约需要 30 秒。我想向用户显示加载消息，但由于我无法使用 ajax 下载文件，我不知道我应该做什么。另外，如果无法生成文件，即没有相关数据可用于生成文件，我希望能够返回出现在同一页面中的消息，我不想刷新页面或返回错误代码。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:35:05.913

我不会直接使用`FileContentResult`最终浏览器，而是返回一个标准视图，告诉用户正在生成文件。然后向服务器触发 AJAX POST 以触发文件生成，并将结果保存到服务器。服务器生成文件后，通知用户它可以下载，或者让浏览器导航到文件下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:37:49.580

当操作尝试返回响应时，您无法生成加载消息，因为此时浏览器没有活动视图。处理此问题的最佳方法是使用 AJAX 创建作业（即调用将在单独的线程或进程中开始创建 CSV 文件并返回某种标识符的 URL。）然后，您可以每隔一段时间轮询一次获取当前状态或使用 SignalR 和 HTML5 Web Sockets 之类的东西来通知用户状态。文件创建完成后，为用户提供完成文件的链接。

# ruby-on-rails - Rails 应用程序无法连接到 postgresql，但 rake、rails c 和 rails db 可以

> ID：16223204
> 
> 赞同：3
> 
> 时间：2013-04-25T19:30:36.633
> 
> 标签：ruby-on-rails, ruby, postgresql, ubuntu

## 问题

在生产环境中使用我的 rails 应用程序会导致 500 错误。检查生产日志的结果是：[gist](https://gist.github.com/jonlunsford/5462023)。检查详细的 postgresql 日志会导致：[gist](https://gist.github.com/jonlunsford/5462096)（实际的数据库凭据已被替换）。无论 database.yml 文件中指定了什么，postgres 日志都会显示每次连接尝试时端口号的增量。

## 环境

**服务器**：Ubuntu 12.10 (GNU/Linux 3.5.0-17-generic i686)

**机架服务器：**独角兽

**导轨 v：** 3.2.13

**Ruby v：** 1.9.3p0（真的很老，也许这里有问题？）

## 我试过的

**仔细检查 database.yml：**
尝试使用和不使用主机和端口，检查缩进并验证 yaml 格式。

```
production:
  adapter: postgresql
  database: <db_production>
  username: <db_user>
  password: <db_password>
  host: localhost
  port: 5432 
```

**运行 rake、rails c 和 rails db：**
我可以登录并成功运行所有这些命令。我必须在这里指定环境，也许这是问题所在？环境没有以某种方式设置吗？

```
bundle exec rails db production 
```

跑步：

```
Rails.env? 
```

导致生产，但这是在明确登录到 rails c 生产之后。

**更改 pg_hba.conf**：
我尝试了在其他 SO 问题中找到的几个设置。本地的原始设置是：

```
local    all    all    peer 
```

然后尝试：

```
local    all    all    md5 
```

然后尝试：

```
local    all    all    trust 
```

在所有这些更改之后，我确保重新启动 pg 或 pg_ctl reload 以获取更改。

**登录到 pg outside 或 rails：**
即使在每次更改 pg_hba.conf 之后，我仍然可以使用 database.yml 中的相同凭据登录到我的生产数据库并查看我的所有数据，并确认所有迁移和数据库创建都已运行。

跑步：

```
sudo -u <db_user> psql <db_production> 
```

按预期工作。

## 结论

对我来说很明显，问题不在于 postgres，而在于 rails 配置，也许环境没有切换到生产环境，因此它正在尝试使用 dev db creds？这在我的生产 yml 文件中不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:32:40.647

安装 postgres 后是否重新启动系统？

您可以从 pg 控制台访问 postgres 吗？

按照以下链接正确安装postgers。

[http://railskey.wordpress.com/2012/05/19/postgresql-installation-in-ubuntu-12-04/](http://railskey.wordpress.com/2012/05/19/postgresql-installation-in-ubuntu-12-04/)

# comparison - 比较两个不同值时的实例化错误

> ID：16223206
> 
> 赞同：1
> 
> 时间：2013-04-25T19:30:44.243
> 
> 标签：comparison, prolog, instantiation

我有一个如下所示的谓词：

```
 condition_met([(X + 1) < 5 | Rest]) :- condition_met(Rest),
                                           at(X,_),
                                           write('X = '),
                                           write(X),
                                           Temp is (X + 1),
                                           Temp < 5, !. 
```

`at(X,Y)`是我在运行查询之前断言的。当我将这两个值断言为可以使查询为真的数字时，它运行良好。但是一旦我断言 X 大于 4，我就会在 (<) 上得到一个实例化错误。我不明白为什么它不会只返回不。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:57:03.207

我发现了我的问题，有点。我仍然不确定为什么会发生这种情况，但我对标签的工作原理有一个不好的理解。我找到了一种从谓词中得到我想要的答案的方法。

# java - 在java中多次搜索文本文档

> ID：16223209
> 
> 赞同：1
> 
> 时间：2013-04-25T19:31:12.907
> 
> 标签：java, text, file-io, for-loop, while-loop

我已经到处寻找上述问题的答案。我一直在构建一个计算器，它将接受用户在文本文件中输入产品名称，程序将在文档中搜索产品名称，一旦找到它，它将记录名称旁边的整数和用它来计算价格。虽然我已经完成了所有这些工作，但我的主要问题是如果程序第一次没有找到名称，那么它会多次运行文档。就像现在一样，它将贯穿整个文档，并在到达文件末尾时结束。

这是文本文件

> 羊毛 15 1
> 
> 种子 3 1
> 
> 羽毛 3 1
> 
> 字符串 2 1
> 
> 牛肉 2 1
> 
> 鱼 2 1
> 
> 骨头 1 1
> 
> 铁 1 1
> 
> 火药 1 1
> 
> 萤石 1 7
> 
> 墨水袋 1 2
> 
> 肉体 2 1
> 
> 鸡蛋 2 1

这是我的代码

公共静态 void main(String[]args) 抛出 FileNotFoundException{

```
//Declare Variables
String productName, productComp;
int productAmount, productPrice,itemNum, sum = 0;
boolean check = false;

Scanner console = new Scanner(System.in);
Scanner inFile = new Scanner(new FileReader("SelllingPrices.txt"));

System.out.println("Enter the number of items");

for(itemNum = console.nextInt(); itemNum > 0; itemNum--){
  System.out.println("Enter the name of the item");
  productComp = console.next();

  while(check != true){

    productName = inFile.next();
    System.out.println(productName);
    if(productName.compareTo(productComp) == 0){
      productAmount = inFile.nextInt();
      productPrice = inFile.nextInt();
      sum += calculateSum(productAmount, productPrice, productComp);
      check = true;

    }
    else{ 
      check = false;
    }
  }
check = false;
}
calculateTotalPayout(sum); 
```

}

public static int calculateSum(int productAmount, int productPrice, String productName){

```
int totalAmount, divisor, sum = 0;
Scanner console = new Scanner(System.in);
System.out.println("Enter the amount of " + productName + " recieved");
totalAmount = console.nextInt();

if(totalAmount > productAmount){
  divisor = totalAmount / productAmount;
  sum = productPrice * divisor;
  return sum;
}
else{
  sum = productPrice;
  return sum;
} 
```

}

public static void calculateTotalPayout(int sum){ int temp = 0, counter = 0;

```
if(sum > 64){
  temp = sum;
  while(temp >= 64){
    temp -= 64;
    counter++;
  }
}
System.out.println("The total comes to " + sum + " emeralds or " + counter + " stacks of emeralds and " + temp + " emeralds left over"); 
```

} }

我只需要知道要修复什么以便使它到达文件末尾，如果它没有找到返回文件开头并再次查看的名称。

谢谢你尽你所能的帮助。我希望我的问题很清楚。

一些澄清。是的，我希望用户能够输入不同的名称并重新搜索文件，并且我添加了整个代码以让人们知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:51:16.080

不确定您的许多课程的类型 - 它们是输入流等吗？但建议看看这个SO问题：

[具有 rewind()/reset() 功能的 java 文件输入](https://stackoverflow.com/questions/1094703/java-file-input-with-rewind-reset-capability)

filechannel.position(0) 可能是您要查找的内容，也可能是 RandomAccessFile rewind 方法或 inputstreamreader.mark

哪个更好取决于您是否要使用流，或者不介意任何一种方式，您是否介意文件在内存中缓冲等。

顺便说一句，如果您的文件大小“小”（无论这些天意味着什么），您可以考虑将整个文件加载到内存中。还是每次都重新读取文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:15:14.137

如果您使用的是 Scanner，请尝试使用*findWithinHorizo​​n()*方法而不是*next()*。它查找指定的模式并且在失败时不推进指针。如果您不使用扫描仪 - 使用它；）请参阅 javadocs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T20:18:07.770

为什么要搜索多次？为什么不将所有信息存储在地图中并进行查找呢？这是一些关键部分（不是完整的工作代码）：

```
HashMap<String,Integer[]> things = new HashMap<String,Integer[]>();

// Read each line and add to HashMap using:
Name = productName;
nums[0] = inFile.nextInt();
nums[1] = inFile.nextInt();
things.put(Name,nums);

// When you're done, ask the user what they're looking for and look it up.
productComp = console.next();
Integer[] nums = things.get(productComp);
if(nums == null){ // or try/catch for NullPointerException
   // Doesn't exist! Try again!
}else{
      productAmount = nums[0];
      productPrice = nums[1];
      sum += calculateSum(productAmount, productPrice, productComp);
      check = true;
} 
```

# unit-testing - Erlang - Eunit 设置功能不运行

> ID：16223210
> 
> 赞同：1
> 
> 时间：2013-04-25T19:31:13.500
> 
> 标签：unit-testing, testing, erlang, assertions, eunit

我想编写测试，其中设置和清理功能不会为每个测试执行一次，而是一次 - 在测试开始和测试结束时。

所以我尝试了这种方式：

```
generator_test_() ->
{setup, fun setup/0, fun cleanup/1,
    {inorder,
        [
            some_test1()
            %...
        ]
    }
}. 
```

`some_test1/0`在哪里

```
some_test1() ->
    begin
        Value1 = something1(),
        Value2 = something2(),
        [?_assertEqual(Value1, Value2)]
    end. 
```

安装程序不会以这种方式执行。

但是这样：

```
some_test1() ->
    ?_test(begin
        Value1 = something1(),
        Value2 = something2(),
        [?_assertEqual(Value1, Value2)]
    end). 
```

或者

```
some_test1() ->
    [?_assertEqual(something1(), something2())]. 
```

都很好。

我不明白它为什么起作用，我的问题是我不能在 ?_test(....) 中编写多个断言。

```
some_test1() ->
    ?_test(begin
        Value1 = something1(),
        Value2 = something2(),
        [?_assertEqual(Value1, Value2),
        ?_assertEqual(Value1, Value2)]
    end). 
```

通过运行，`eunit:test(my_module, [verbose]).`我看到只有 1 个测试通过了。

更新

**示例 1**

一个小例子：

```
-module(example).

-include_lib("eunit/include/eunit.hrl").

generator_test_() ->
    {setup, fun setup/0, fun cleanup/1,
        {inorder,
            fun() -> some_test1() end
        }
    }.

some_test1() ->
    begin
        X = 3,
        Y = 4,
        %%% This is a test set/deep list as it
        %%% contains two tests.
        [?_assertEqual(X, Y),
        ?_assertEqual(ok, ok)]
    end.

setup() ->
    erlang:display("---SETUP CALLED---"),
    "setup".

cleanup(_) ->
    ok. 
```

运行 eunit：

```
eunit:test(example, [verbose]).
======================== EUnit ========================
"---SETUP CALLED---"
module 'example'
  example: generator_test_...ok
  [done in 0.004 s]
=======================================================
  Test passed.
ok 
```

一个小修改：

```
some_test1() ->
    begin
        X = 3,
        Y = 4,
        %%% This is a test set/deep list as it
        %%% containst two tests.
        [?_assertEqual(X, Y),
        ?_assertEqual(it_doesnt_work, ok)]
    end. 
```

并且测试仍然通过。

**示例 2**

然而

```
some_test1() ->
    begin
        X = 3,
        Y = 4,
        %%% These are just two simple tests
        ?assertEqual(X, Y),
        ?assertEqual(it_doesnt_work, ok)
    end. 
```

失败

```
eunit:test(example, [verbose]).
======================== EUnit ========================
"---SETUP CALLED---"
module 'example'
  example: generator_test_...*failed*
in function example:'-some_test1/0-fun-0-'/1 (example.erl, line 17)
in call from example:some_test1/0 (example.erl, line 17)
**error:{assertEqual_failed,[{module,example},
                     {line,17},
                     {expression,"Y"},
                     {expected,3},
                     {value,4}]}

  [done in 0.003 s]
=======================================================
  Failed: 1\.  Skipped: 0\.  Passed: 0.
error 
```

但

**示例 3**

```
generator_test_() ->
    {setup, fun setup/0, fun cleanup/1,
        {inorder,
            some_test1()
        }
    }.

some_test1() ->
    [?_assertEqual(3, 3),
    ?_assertEqual(ok, ok)].

eunit:test(example, [verbose]).
======================== EUnit ========================
"---SETUP CALLED---"
module 'example'
  example:13: some_test1...ok
  example:14: some_test1...ok
  [done in 0.005 s]
=======================================================
  All 2 tests passed.
ok 
```

现在我看到有 2(!) 个测试。

我可以忘记块语句并编写没有变量的测试，但我认为这可能很难阅读，它应该与块一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T06:14:05.877

[文档](http://www.erlang.org/doc/apps/eunit/chapter.html)说：

> 一个简单的测试对象是以下之一：
> 
> 一个空函数值（即，一个接受零参数的乐趣）。例子：
> 
> ```
>  fun () -> ... end
>    fun some_function/0
>    fun some_module:some_function/0
> 
> A tuple {test, ModuleName, FunctionName}, where ModuleName and FunctionName are atoms, referring to the function 
> ```
> 
> 模块名称：功能名称/0
> 
> ```
> A pair {LineNumber, SimpleTest}, where LineNumber is a nonnegative integer and SimpleTest is another simple test object. LineNumber 
> ```
> 
> 应该指出测试的源代码行。像这样的对通常只能通过 ?_test(...) 宏创建；请参阅基本宏。

因此，您可以指定您的测试，例如：

```
generator_test_() ->
{setup, fun setup/0, fun cleanup/1,
    {inorder,
        [
            fun() -> some_test1() end
            %% OR
            fun some_test1/0
        ]
    }
}. 
```

除了：

> （请注意，这些宏也有相应的以“_”（下划线）字符开头的形式，如 ?_assert(BoolExpr)，它创建一个“测试对象”而不是立即执行测试。这相当于编写 ?_test （断言（BoolExpr））等）

这就是您的 ?_* 测试生成器工作的原因。

**编辑**

示例 2 和示例 3 是做事的好方法。示例 2 将一个简单的测试乐趣放入测试列表。示例 3 生成 2 个测试的列表，因为

```
[?_assertEqual(a, b), ?_assertEqual(a == a)] 
```

实际上扩展为

```
[fun() -> ?assertEqual(a, b) end, fun() -> ?assertEqual(a, a) end] 
```

如果需要变量，请使用示例 2，否则使用示例 3。示例 1 没有给出预期的结果，因为“fun() -> some_test1() end”本身就是一个测试，它应该执行真正的断言 (?assert*) 而不是产生另一个测试 (?_assert*)。我希望现在很清楚。

# parsing - 解析计算器的控制台输入

> ID：16223211
> 
> 赞同：0
> 
> 时间：2013-04-25T19:31:13.817
> 
> 标签：parsing, input, console

我对 Java 非常陌生（我有使用 JavaScript/HTML/CSS/SQL/PHP 和 C# 的经验）。

所以我想制作一个计算器，用户可以在其中输入命令，例如：

> 计算> 15 + 9

程序必须处理用户输入并提供结果，在上面的示例中为 24。

我知道如何构建`switch`语句或`if`级联来决定处理哪个操作（是否必须计数/除/...），我也知道如何显示结果。

但我遇到的问题是解析用户的输入。我想**将输入解析**为**number1 = 15**、**operation = "+"**和**number2 = 9**。我该如何解决这个问题？

扩展问题：我该如何解决：
示例：

> 计算> 15+8+4+6+8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:47:32.080

您可以尝试以下方法：

代码：

```
public class Calculator{
    public static void main(String[] args){
        String s = null;
        for(System.out.print("calc>");!(s = System.console().readLine()).equalsIgnoreCase("exit");System.out.print("calc>"))
        {
            //parse the string s and do the calculation. Output the calculated value in new line.
            //System.out.println(s);
        }
    }

} 
```

样本输出：

```
$ javac Calculator.java 
$ java Calculator
calc>12+13
12+13
calc>1+3
1+3
calc>exit
$ 
```

（注：value的计算没有做）

# javascript - 如何在div中捕获一行文本

> ID：16223213
> 
> 赞同：7
> 
> 时间：2013-04-25T19:31:17.460
> 
> 标签：javascript, jquery, html, css

我已经查看了与此相关的类似 SO 帖子，但没有一个与我正在寻找的内容完全相关。假设我有一些文本，我将其放入一个 div 中，并为该 div 添加一些任意（甚至可能是动态的）宽度。有没有什么方法可以让我以编程方式捕获和操作 div 中的单行文本（例如，捕获每一行文本，然后将其包装在其自己的 span 标签中，或者类似的东西使我能够操作单行)?

我已经能够使用等宽字体完成此操作，并且基本上首先每行创建一个跨度并为每个跨度分配相同数量的字符（使用一些额外的代码，所以单词当然不会被截断），但我会喜欢能够使用非等宽字体执行此操作，这当然会导致问题，因为非等宽字体的字符水平间距会有所不同。

```
var str = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
    container = $('<div>');
    container.width('100px').html(str).appendTo('body'); 
```

这个输出几乎是你所期望的。它[住在这里](http://coroproservices.pairserver.com/disintegrate/)。我想弄清楚的是：

1.  换行时是否会自动插入我可以访问的换行符？

2.  DOM 中是否有任何其他机制或属性我可以破解来操纵 div 中的一行？

3.  是否有另一种方法可以保留非等宽文本自然流动的外观，同时能够逐行访问文本？正如我上面所说，我已经用等宽文本实现了这一点，但我的方法依赖于等宽文本的统一水平间距。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T20:26:46.763

其他答案的建议让我很好奇，所以我对它们进行了测试，这就是我想出的：

```
function wrapLines($container) {
    // get the text from the conatiner
    var text = $container.text();

    // split the text into words
    var words = text.split(' ');

   // wrap each word in a span and add it to a tmp
   var tmp = '';
   tmp += '<span>' + words.join('</span><span>') + '</span> ';

   // remove the text from the container, and replace it with the wrapped words
   $container.html($(tmp));

    // prepare the offset variable and tmp
    var tmp = '';
    var top = null;
    $container.find('span').each(function(index, word) {
        $word = $(word);
        // if this is the first iteration
        if (top == null) {
            // set the top
            top = $word.position().top;
            // open the first line
            tmp = '<span class="line">';
        }

        // if this is a new line (top is bigger then the previous word)
        if (top < $word.position().top) {
            // close the previous line and start a new one
            tmp += '</span><span class="line">';
            // change the top
            top = $word.position().top;            
        }

        // add the content of the word node + a space
        tmp += $word.text() + ' ';
    });
    // close the last line
    tmp += '</span>';

    // remove the content of the conatiner, and replace it with the wrapped lines
    $container.html($(tmp));    
} 
```

我添加了很多评论，但如果有不清楚的地方，请随时询问。

要查看实际代码（包括一些花哨的颜色；-)），请查看我的小提琴：http: [//jsfiddle.net/yZnp8/1/](http://jsfiddle.net/yZnp8/1/)

**编辑**：
我将@orb 中的代码放在我的解决方案旁边：http: [//jsfiddle.net/yZnp8/5/](http://jsfiddle.net/yZnp8/5/)。

与 Chrome Inspector 的快速比较表明存在很大的性能差异。@orbs 解决方案需要 754 毫秒和 17 MB，而我的解决方案需要 136 毫秒和 14 MB。

一点建议，尽量限制你的 DOM 操作（我在小提琴中标记了它们）。它们会减慢您的代码速度，因为浏览器需要重新渲染您的页面。我只做`2`，而你做`3 + 2x number of words + 1x number of lines`。这可能是解释速度差异的原因。而且文本越长，差异就会越大。

*不试图打破@orb 解决方案，只是试图提供帮助并解释差异......*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T00:31:39.353

我认为发布我为自己的问题提出的解决方案是一个好主意，因为它看起来很优雅。我不必将每个单词都包含在一个跨度中——我只是使用了一个可见性：隐藏测试跨度来查看该行中的下一个单词是否会导致该行在实际添加下一个之前超出容器的宽度字行。当我把每一行放在一起时，我将它们添加到一个数组中。然后我只是通过遍历数组将每一行附加到容器中。它住[在这里](http://coroproservices.pairserver.com/disintegrate/)（至少有一段时间）。

```
/*global console, $, OO*/
/*jslint browser: true*/
(function (undefined) {
    "use strict";

    $(window).on('load', function (event) {
        var str = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
            $container = $('<div>').width('200px').text(str).appendTo('body');

        wrapLines($container);
    });

    function wrapLines($container) {
        var text = $container.text(),
            words = text.split(' '),
            lines = [],
            line = $('<span>'),
            tmp = $('<span>').css('visibility', 'hidden').appendTo('body');

        $container.text("");

        $.each(words, function (index, word) {
            if (tmp.text(line.text() + " " + word).width() < $container.width()) {
                line.text(line.text() + " " + word);
            } else {
                lines.push(line);
                line.remove();
                line = $('<span>');
                tmp.text("");
            }
        });

        tmp.remove();

        for (var kittens = 0 ; kittens < lines.length; kittens++) {
            lines[kittens].appendTo($container);
            console.log(lines[kittens].width());
        }
    }

}()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:39:01.927

不确定我是否完全理解您的问题，但是...您将能够获得 div 的高度吗？将其除以（CSS 定义的）行高，您应该有文本行数。

*然后，您可以通过制作一个包含原始文本的一部分*的不可见 div 并执行上述技巧来找到它的行来检查任何给定字符/单词的位置。这有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T19:41:38.910

Bob Monteverde 提供了一段非常好的代码来计算字符串的[宽度](https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript)。您可以使用它并开始将字符串宽度与 div 的实际宽度进行比较以查找单行。

# sql - 如何将此基本 SQL 语句更改为 PL/SQL？

> ID：16223216
> 
> 赞同：0
> 
> 时间：2013-04-25T19:31:24.543
> 
> 标签：sql, oracle, plsql

我正在寻找我的 DBMS 窗口来读取平均工资：$2,843.76 我有一个简单的 SQL 语句，我想知道如何让它显示在 dbms 输出中。我在想一些事情。

```
dbms_output.put_line('Average Salary = ' (salary))

SELECT avg(salary) avg_salary 
FROM    employee; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T19:38:20.123

如果您从 PL/SQL 运行，您将需要一个匿名块：

```
DECLARE
  avgSalary NUMBER;
BEGIN
  SELECT avg(salary) into avgSalary FROM employee;
  DBMS_Output.Put_Line('Average Salary = ' || avgSalary);
END;
/ 
```

并且不要忘记使用 DBMS_Output 您需要`SET SERVEROUTPUT ON`. 我知道我通常这样做:)

# java - 如何按单词（带括号）在java中拆分句子？

> ID：16223222
> 
> 赞同：0
> 
> 时间：2013-04-25T19:31:49.743
> 
> 标签：java, parsing, split

例如，这有效：

```
String test = "I am a good boy";
String splitbyWord = "a good";
System.out.println(test.split(splitbyWord)[1]); => boy 
```

但这不会：

```
String test = "I am a (good) boy";
String splitbyWord = "a (good)";
System.out.println(test.split(splitbyWord)[1]);

=>index out of bound 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:33:00.060

[String#split](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)使用正则表达式。圆括号是用于表示 [捕获组](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)边界的特殊字符。他们应该被逃脱：

```
String splitbyWord = "a \\(good\\)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T19:34:34.513

问题在于它`split()`采用正则表达式，而括号在正则表达式中具有特殊含义。对此的一般解决方案是使用[`Pattern.quote()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)：

```
 System.out.println(test.split(Pattern.quote(splitbyWord))[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:36:24.460

检查 javadoc 中的 split 方法。它使用正则表达式来拆分字符串。我认为括号在正则表达式中标记了一个组，因此您应该转义它们：

```
String splitbyWord = "a \\(good\\)"; 
```

# r - 按日期切割数据以获取 break="min" 的倍数

> ID：16223229
> 
> 赞同：1
> 
> 时间：2013-04-25T19:32:00.097
> 
> 标签：r, aggregate, xts

我正在使用 R 来聚合刻度数据，并且我有以下函数可以很好地将数据聚合到分钟，但现在我想对此进行阐述并聚合到 5、10、15 分钟。我怎样才能做到这一点？

```
SPY <- aggregate(as.numeric(SPY$PRICE), list(min = cut(index(SPY), breaks="min")), mean) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:35:38.893

既然你已经用标签标记了你的问题`xts`......

你可以用`period.apply`这个。以下将为您提供每 5 分钟的平均值：

```
period.apply(SPY$PRICE, endpoints(SPY, "minutes", 5), mean) 
```

# php - PHP/Joomla - 从 Joomla MVC 控制器将 html 输出发送到 jQuery AJAX

> ID：16223231
> 
> 赞同：0
> 
> 时间：2013-04-25T19:32:04.510
> 
> 标签：php, model-view-controller, joomla

我正在尝试在 Joomla 组件中构建我的第一个 JSON 表单提交。

从 Joomla 控制器发送 HTML 响应是否有任何特殊编码或条件？

我正在使用 2.5 Joomla MVC。以下是一些测试/观察 -

1) 表单提交和响应已分别单独测试并按预期工作。我有一个单独的 PHP 文件，该文件提交到服务器端 PHP 文件，该文件接受 JSON 数据并发送 HTML 响应，客户端从响应中正确更新。

2) 我的 Joomla 组件中有一个工作表单提交。这是一个标准的客户端表单提交，提交到服务器端控制器，屏幕会从 controller.php 文件中的脚本相应地刷新。

3）当我添加 jQuery/AJAX 表单提交（$.post）时，数据被添加到后端的数据库中，客户端 javascript 控制台显示 jQuery 脚本正在运行完成但是 -

我没有收到来自控制器的回显输出（来自 php 的简单回显脚本 -> 回显“这是一个测试”；）

当我用硬编码字符串（而不是 AJAX 数据结果输出）替换输出的字符串时，客户端会按预期更新。当我用 [data] 替换硬编码字符串时，它不起作用。作为一个额外的测试，我只是简单地回显一个简单的字符串来测试控制器并且简单的字符串没有返回值。

结论 - jQuery/AJAX 可以工作，但 PHP 控制器不能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:42:17.923

将 &format=raw 添加到 url 就足够了，这将指示 Joomla！通过组件输出而不是在其周围添加整个模板/页面/模块。

然而，虽然 die() 并不好，但只需在控制器中调用 exit 就可以达到同样的效果。有时，当您启用 SEF 和基于参数数量的 router.php 解析器时，这可能是最佳选择。

# desire2learn - 有没有办法将工具添加到 Desire2Learn WYSIWYG 编辑器？

> ID：16223232
> 
> 赞同：3
> 
> 时间：2013-04-25T19:32:08.173
> 
> 标签：desire2learn

在 Desire2Learn 中，当您单击 WYSIWYG 编辑器中的 Insert Stuff 按钮时，您可以将 YouTube 视频和 Flickr 等内容添加到页面内容中。那里似乎列出了几个第三方工具。我们有自己的视频工具以及其他项目，我们希望将其添加到列表中。有没有 api 可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T15:37:46.413

使用 Desire2Learn Suite 10.4 版，您可以使用远程插件服务将项目添加到 Insert Stuff Framework。您的工具需要配置为使用学习工具互操作性 (LTI) 连接到 Desire2Learn 学习套件，并且可以使用 Valence 学习框架 API 来扩展 LTI 的功能。远程插件服务的详细信息可在以下文档主题中找到：http: [//docs.valence.desire2learn.com/ui-ext/rplugins.html](http://docs.valence.desire2learn.com/ui-ext/rplugins.html)

# database - Codeigniter - 循环通过帖子信息传递值以模型查询并输出结果

> ID：16223233
> 
> 赞同：1
> 
> 时间：2013-04-25T19:32:13.667
> 
> 标签：database, codeigniter, loops, post

我将表单数据传递给新的控制器/视图。

我想遍历 $_POST 数组，将值传递给控制器​​/模型，查询数据库并将结果返回给要显示的视图。

所以我的视图中有以下代码：

```
foreach($_POST as $key => $value) //$key is productcode eg '4560'
    {
       $this->sales_model->get_productdetails($this->input->post('$key'))
       echo "Price: ".$price."<br>";
       echo "Pieces: ".$pieces."<br>";
       echo "Cubic Meters: ".$cubicmeters."<hr>";

    } 
```

这是我的模型：

```
function get_productdetails($productcode)
{
    $this->db->select('price,pieces,cubicmeters');
    $this->db->from('ProductList');
    $this->db->where('productcode',$productcode);
    $q = $this->db->get();
    if($q->num_rows() > 0) 
    {
        return $q->row_array(); 
    }
} 
```

控制器：function new_auto_spread_details() { $this->load->view('sales/new_autospread_order_lines'); }

这不能正常工作。如何在视图上输出/显示查询结果？可以做到这一点，如果不能做到这一点，如何通过最佳实践来实现？

一如既往地感谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T23:20:42.063

您应该使用 CodeIgniter 的输入类来获取所有帖子值。

```
$formValues = $this->input->post(NULL, TRUE); 
```

然后在您的控制器中设置一个中间值来保存您的数据。

```
$products = array();

foreach($formValues as $key => $value) 
{
    $products[] = $this->sales_model->get_productdetails($key)
}

$data = array();
$data["products"] = $products; 
```

将中介传递给视图。

```
$this->load->view('sales/new_autospread_order_lines', $data); 
```

在您的评论中，将 $data 数组中的每个散列项引用为变量。

```
<?php foreach($products as $product) { ?>
<p>
    <?php echo $product["price"]; ?>
</p>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:36:19.667

`$this->input->post('$key')`应该`$this->input->post($key)`

任何以 开头的东西`$this->`都应该由控制器调用，而不是视图。

您的控制器应如下所示：

```
function new_auto_spread_details()
{
    $products = array();
    foreach($_POST as $key => $value) //$key is productcode eg '4560'
    {
        /* your model method is returning an array,
           so you need to assign it to a variable */
        $products[] = $this->sales_model->get_productdetails($key)
    }

    $this->load->view('sales/new_autospread_order_lines', array(
        'products' => $products
    ));
} 
```

然后在视图中：

```
<?php foreach($products as $product): ?>
    Price: <?php echo $product['price'] ?><br>
    Pieces: <?php echo $product['pieces'] ?><br>
    Cubic Meters: <?php echo $product['cubicmeters'] ?><br>
<?php endforeach; ?> 
```

# r - 数据框合并中的双时间戳

> ID：16223241
> 
> 赞同：3
> 
> 时间：2013-04-25T19:32:42.757
> 
> 标签：r, utc, zoo

我确实有一个看起来像这样的df：

```
time,v1,v1,v3,v4
1352639505, , ,94,101
1352639565, , ,94,101
1352639505,10,222, ,
1352639565,11,221, , 
```

第一个是 1970-01-01 的 UTC Timestamp - 所以我会使用 `as.POSIXct(df$time,origin="1970-01-01",tz="UTC")`. 但正如你所看到的，日期是双倍的。NA 和值被跳过。如何在数据框中合并相同的日期？首先设置为.POSIXct 还是合并？

结果应如下所示：

```
time,v1,v1,v3,v4
1352639505,10,222,94,101
1352639565,11,221,94,101 
```

当然也可以是动物园之后的真实约会！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T21:29:34.280

我会单独处理 data.frame 的每一列。对于每一列，从列和时间索引中删除缺失的观测值，然后构造您的`zoo`对象。然后您可以使用`do.call`来调用`merge`您的`zoo`对象列表。

```
# helper function to build zoo objects with no missing values
f <- function(v, i) {
  na <- is.na(v)
  iposix <- as.POSIXct(i, origin="1970-01-01", tz="UTC")
  zoo(v[!na], iposix[!na])
}
df <- structure(list(time = c(1352639505L, 1352639565L, 1352639505L, 
1352639565L), v1 = c(NA, NA, 10L, 11L), v1 = c(NA, NA, 222L, 
221L), v3 = c(94L, 94L, NA, NA), v4 = c(101L, 101L, NA, NA)), .Names = c("time", 
"v1", "v1", "v3", "v4"), class = "data.frame", row.names = c(NA, -4L))
library(zoo)
Data <- do.call(merge, lapply(df[-1], f, i=df$time))
Data
#                     v1 v1.1 v3  v4
# 2012-11-11 07:11:45 10  222 94 101
# 2012-11-11 07:12:45 11  221 94 101 
```

# javascript - 获取值最接近数字 X 的 JSON 数据

> ID：16223242
> 
> 赞同：2
> 
> 时间：2013-04-25T19:32:43.787
> 
> 标签：javascript, jquery, json

我有一个用户输入的数字 X。以及 JSON 格式的数据列表。

```
**114**  80  145     175     240     320
**123**  85  155     190     260     345
**132**  90  170     205     280     370 
```

我想将 X 与第一列中最接近的数字匹配，然后在该行中返回以下值。

不确定我是否以最佳方式格式化了 JSON。但这是我到目前为止所拥有的：http: [//jsfiddle.net/wuSux/](http://jsfiddle.net/wuSux/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:39:19.110

尝试这样的事情：

```
var data = [{"Body Weight":114," Untrained": 80," Novice": 145," Intermediate": 175," Advanced": 240," Elite": 320},
            {"Body Weight":123," Untrained": 85," Novice": 155," Intermediate": 190," Advanced": 260," Elite": 345},
            {"Body Weight":132," Untrained": 90," Novice": 170," Intermediate": 205," Advanced": 280," Elite": 370}];

var x = 140,
    difference = 0,
    bestIndex = 0,
    bestDifference = Infinity,
    i, cur, bodyWeight;

for (i = 0; i < data.length; i++) {
    cur = data[i];
    bodyWeight = cur["Body Weight"];
    difference = Math.abs(x - bodyWeight);
    if (difference < bestDifference) {
        bestDifference = difference;
        bestIndex = i;
    }
}

console.log(data[bestIndex]); 
```

**演示：http:** [//jsfiddle.net/wuSux/2/](http://jsfiddle.net/wuSux/2/)

更改 的值`x`以找到最接近该数字的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T19:49:08.323

更改您的数据，以便最后一个`Body Weight`代替`320`，`"320+"`然后：

```
function getClosest(x) {
    for (var i = data.length - 1; i > -1; i--) {
        if (x > data[i]["Body Weight"]) break
    }
    if (i === data.length - 1) return data[i];
    if (i === -1) return data[0];

    return data[i + +(x > ((data[i]["Body Weight"] + data[i + 1]["Body Weight"]) / 2))];
} 
```

***演示：http:*** [//jsfiddle.net/s8Xge/](http://jsfiddle.net/s8Xge/)

* * *

或者，如果您愿意：

```
function getClosest(x) {
    for (var i = data.length - 1; i > -1; i--) {
        if (x > data[i]["Body Weight"]) break
    }
    return i === data.length - 1                                     ? data[i] :
           i === -1                                                  ? data[0] :
           (data[i]["Body Weight"] + data[i + 1]["Body Weight"]) / 2 ? data[i + 1] :
                                                                       data[i];
} 
```

# asp.net-mvc-3 - Nhibernate 关联实体已保存在数据库中，并带有已加入子类中的新项目

> ID：16223248
> 
> 赞同：0
> 
> 时间：2013-04-25T19:33:00.303
> 
> 标签：asp.net-mvc-3, nhibernate, nhibernate-mapping, joined-subclass

情况如下：我在数据库中拥有一张名为“Entidade”的表，以及一张名为“Medico”的表。表“Medico”是下表中的连接子类实体，如下所示：

```
<joined-subclass name="Medico" table="Medico">
  <key column="SEQ_ENTIDADE"/>
  <property name="DSC_CRM"/>
  <property name="DSC_ESPECIALIDADE"/>
  <property name="FLG_SEXO"/>
</joined-subclass> 
```

用户应该能够使用已经注册的“Entidade”在“Medico”上“打开它”。当我尝试保存扩展具有相同 ID 的类“Entidade”的对象“Medico”时，“Entidade”已保存，出现以下错误：

```
violation of PRIMARY or UNIQUE KEY constraint "PK_ENTIDADE" on table "ENTIDADE" 
```

我的班级“Medico”：

```
public class Medico : Entidade
{
    public virtual string DSC_CRM { get; set; }

    public virtual string DSC_ESPECIALIDADE { get; set; }

    public virtual Sexo FLG_SEXO { get; set; }
} 
```

有没有可能进行这种“改造”？

如果您需要其他任何东西来了解情况，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:06:17.590

我认为在您的情况下不应该使用子类。这不是 nHibernate 的问题，而是类和继承的问题。

如果您的实例有其他属性可以随着时间的推移添加或删除，我不会对您的模型使用继承，而是使用聚合。然后你加入的子类问题将成为一个参考问题（或 HasMany），你很好。

问候，迈克尔

# c# - 在 VB 中运行批处理线

> ID：16223250
> 
> 赞同：2
> 
> 时间：2013-04-25T19:33:06.790
> 
> 标签：c#, vbscript, batch-file

我正在自动化一些以前每晚运行的批处理文件。我有当前的设置，但由于它们最初是作为运行批处理文件的批处理文件编写的，所以我很难记录某些作业何时以及为什么失败。我决定将这些作业重写为 C# 控制台应用程序或 vbscript。我在这样做时遇到了一个大问题。

批处理文件有这一行：

```
ctrbld warp7.p < y 
```

ctrlbd.exe 将文件作为参数，warp7.p 是文件，但需要按下 y 键才能启动。文件夹中是包含字符 y 的 y 文件。我是批处理文件的新手，无法弄清楚如何在 vbscript 或 C# 控制台应用程序中模拟此操作。它总是仍然需要按键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:51:41.160

使用批处理**管道**，或使用**Sendkeys**方法将“ **Y** ”键发送到活动窗口（进程）。

批量：

```
Echo Y|ctrbld.exe warp7.p 
```

**在使用批处理管道的 VBS 中：**

```
Set Shell = CreateObject("WScript.Shell")
Shell.RUN "CMD /k ""Echo Y|CMD.exe /k Process.exe""" 
```

**在使用 SendKeys 的 VBS 中：**

```
Set Shell = CreateObject("WScript.Shell")
Shell.RUN "CMD.exe /K"
wscript.sleep(500) ' Wait 500 ms for CMD to fully load, change it if you need more time.
Shell.AppActivate "CMD"
Shell.SendKeys "Y" 
```

**在 C# 中使用批处理管道**（可能语法错误，因为我在 VB.Net 上开发）

```
Process.start("CMD.exe", "/K ""Echo Y|CMD /K Process.exe""") 
```

**在 C# 中使用 SendKeys**（可能语法错误，因为我在 VB.Net 上开发）

```
Process.start("Process.exe")
Threading.thread.sleep(500) // Wait for process to load
AppActivate(Handle) // Activate the process window passing a Window Handle
SendKeys.Send("Y") 
```

另外像一个额外的我会给你这个我之前写的函数，你可以使用在线/离线代码翻译器将它翻译成 C#，我的代码不需要激活窗口来发送密钥（但只有密钥，不是特殊的键）。

*   **在 VB.NET 中使用 Windows 消息：**

    ```
     #Region " SendKeys To App "

    ' [ SendKeys To App Function ]
    '
    ' // By Elektro H@cker
    '
    ' Examples :
    ' SendKeys_To_App("notepad.exe", "By Elektro H@cker" & vbCrLf & "... :D")

    Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As Long
    Private Declare Function FindWindowEx Lib "user32" Alias "FindWindowExA" (ByVal hWnd1 As Long, ByVal hWnd2 As Long, ByVal lpsz1 As String, ByVal lpsz2 As String) As Long
    Private Declare Function SendMessage Lib "user32" Alias "SendMessageA" (ByVal hwnd As Long, ByVal wMsg As Long, ByVal wParam As Long, ByVal lParam As String) As Long
    Private Const EM_REPLACESEL = &HC2

    Private Function SendKeys_To_App(ByVal App_Name As String, ByVal str As String) As Boolean
        Dim nPadHwnd As Long, ret As Long, EditHwnd As Long
        Dim APP_WindowTitle As String

        If App_Name.ToLower.EndsWith(".exe") Then App_Name = App_Name.Substring(0, App_Name.Length - 4) ' Rename APP Name

        Dim ProcessArray = Process.GetProcessesByName(App_Name)
        If ProcessArray.Length = 0 Then
            Return False ' App not found
        Else
            APP_WindowTitle = ProcessArray(0).MainWindowTitle ' Set window title of the APP
        End If

        nPadHwnd = FindWindow(App_Name, APP_WindowTitle)

        If nPadHwnd > 0 Then
            EditHwnd = FindWindowEx(nPadHwnd, 0&, "Edit", vbNullString) ' Find edit window
            If EditHwnd > 0 Then ret = SendMessage(EditHwnd, EM_REPLACESEL, 0&, str) ' Send text to edit window
            Return True  ' Text sended
        Else
            Return False ' Name/Title not found
        End If

    End Function

    #End Region 
    ```

# c# - Windows Phone - ScheduledTaskAgent 更新动态磁贴计数

> ID：16223256
> 
> 赞同：0
> 
> 时间：2013-04-25T19:33:37.183
> 
> 标签：c#, windows-phone-7, windows-phone-8, scheduled-tasks, live-tile

我有 ScheduledTaskAgent 并且在这个代理中，当某些条件为真时，我想更新 Live Tile 中的计数。像这样的代码：

```
ShellTile tile = ShellTile.ActiveTiles.First();
if ( tile != null)
{
    StandardTileData data = new StandardTileData();
    data.Title = "Title text here";
    data.Count = 1;
    tile.Update(data);
} 
```

但在第一行，我有这个例外：

> “System.Collections.Generic.IEnumerable”不包含“First”的定义，也没有接受“System.Collections.Generic.IEnumerable”类型的第一个参数的扩展方法“First”

我应该做什么来解决这个异常？我必须导入一些库或以某种方式将 ScheduledTaskAgent 与应用程序连接起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:49:41.327

问题解决：缺少命名空间

> 系统.Linq;

# .net - 多维 SAFEARRAY 自定义编组

> ID：16223258
> 
> 赞同：0
> 
> 时间：2013-04-25T19:33:39.047
> 
> 标签：.net, com

我有一个返回多维 SAFEARRAY 的 COM 接口。例如：

```
[
    object,
    dual,
    uuid(XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX)
]
interface ISomeInterface : IDispatch
{
    [id(1)] HRESULT GetSafeArray([out, retval] SAFEARRAY(VARIANT)* multidimensionalSafeArray);
} 
```

我在尝试使用 .NET 中返回的 SAFEARRAY 时遇到了一个问题，因为它们的尺寸是倒置的。我不明白为什么默认封送拆收器不翻转它们的尺寸。据我所知，解决这个问题的唯一方法是编写我自己的自定义封送器。但由于也有返回 SAFEARRAY 的 COM 接口有其他维度计数（一维、二维、三维）和其他类型（DATE、CY、long、double 等），我需要找到一个通用的解决方案. 我是否正确理解我必须编写所有编组操作来编组我的各种 SAFEARRAY 元素类型（blittable 类型、DATE、CY、IDispatch、IUnknown 等）？

# c# - 如何动态创建元素并在 WPF 中绑定它？

> ID：16223259
> 
> 赞同：0
> 
> 时间：2013-04-25T19:33:42.603
> 
> 标签：c#, wpf, binding

我想动态创建元素，所以我使用 C# 代码隐藏来创建控件。

单选按钮已创建，我想用它绑定一些元素（在这种情况下，我使用按钮）。

这是我的源代码

/*创建单选按钮*/

```
RadioButton secondaryRadio = new RadioButton()
    { 
        Name = "secondaryRadio_" + orderOfTransport + "_" + orderOfSubTransport,
        GroupName = "Transport_" + orderOfTransport + "_" + orderOfSubTransport,
        IsChecked = false,
     }; 
```

/*创建绑定对象*/

```
 Binding userChoice2 = new Binding("IsChecked")
        {
            ElementName = "secondaryRadio_" + orderOfTransport + "_" + orderOfSubTransport,
        }; 
```

/*创建按钮并绑定*/

```
 Button outBoundButton = new Button()
        {

            Content = "Select",
            Name = "inb_button_" + orderOfTransport + "_" + orderOfSubTransport,
        };

        outBoundButton.SetBinding(Button.IsEnabledProperty, userChoice2); 
```

这就是从输出窗口得到的

> 找不到引用“ElementName=secondaryRadio_1_0”的绑定源。绑定表达式：路径=IsChecked；数据项=空；目标元素是“按钮”（名称=“inb_button_1_0”）；目标属性是“IsEnabled”（类型“布尔”）

我为这个绑定做错了什么？我可以使用绑定对象超过 1 次吗？

非常感谢您的帮助：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:59:27.250

`ElementName`您应该直接指定绑定，而不是指定`Source`：

```
Binding userChoice2 = new Binding("IsChecked")
{
    Source = secondaryRadio
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:03:26.423

关于*ElementName*：我看不到这两个 UIElement 最终出现在一些常见的 Visual Tree 中 - 你不能指望这可以与两个不同的对象一起使用。

作为一个忠告，几乎总是没有必要“动态”生成 UIElements。通常，使用 ItemsControl 和 Items 的 DataTemplate 并将 ItemsSource 绑定到某些对象更容易实现您想要做的事情。

如果你*真的*想像做 Windows 窗体一样做 WPF，那么你应该听从 Jon 的建议。

# c++ - 由父级绘制 QWidget

> ID：16223263
> 
> 赞同：2
> 
> 时间：2013-04-25T19:33:48.823
> 
> 标签：c++, qt

我有一个相当不寻常的情况 - 我有一个带有子小部件的小部件，我需要由父级完成子级的绘画，绕过 Qt 5 绘画系统。详细说明：有一个具有 OpenGL 上下文的 QWidget，它在正常的paintEvent() 中进行绘制：

```
 mRenderer->activate();
    mRenderer->preRender();
    mRenderer->setClearColor(Color(0.75f));
    mRenderer->clear(Renderer::CLEAR_Color);

    QList<RendererWidgetWrapper *> wrappers = findChildren<RendererWidgetWrapper *>();
    foreach (RendererWidgetWrapper *wrapper, wrappers)
        wrapper->paint();

    mRenderer->postRender(); 
```

其中 mRenderer 是 OpenGL（或任何其他可能的 3D 渲染器）的包装器。请注意，它在其子代上显式调用paint()。这个paint() 函数只是使用mRenderer 渲染一些东西，因此绕过了正常的Qt 绘制管道。父小部件设置了一些属性：

```
 setAttribute(Qt::WA_PaintOnScreen);
    setAttribute(Qt::WA_NoSystemBackground);
    setAttribute(Qt::WA_OpaquePaintEvent);
    setAttribute(Qt::WA_PaintUnclipped); 
```

并返回 nullptr 作为其 QPaintEngine。孩子也返回 nullptr 作为 QPaintEngine，但不设置除 Qt::WA_NoSystemBackground 和 Qt::WA_OpaquePaintEvent 之外的任何属性。简而言之 - 整个事情是一种将数百个小部件渲染到其父级拥有的一个 OpenGL 上下文的方法，以避免在许多上下文中杀死系统。这种方法的问题是孩子都是黑人。有东西正在清除它们的可见区域，我不知道如何使这种黑色消失。有谁知道如何处理它？

编辑：

使用 setUpdatesEnabled(false); 删除了黑色背景，但现在子小部件的区域没有更新。相反，它包含以前在屏幕上可见的内容。

编辑2：

我发现如果父级具有 Qt::WA_PaintOnScreen 属性，Qt 会创建本机子窗口，这会导致问题。那么现在的问题是如何避免它，同时强制父窗口成为原生窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:28:11.107

如果你想为你的孩子绕过绘画事件，你可以重新实现

```
virtual void    paintEvent ( QPaintEvent * event ); 
```

为他们。像那样：

。H

```
class QWidgetNoPaintEvent : public QWidget
{
   //reimplement all ctors here
   virtual void paintEvent ( QPaintEvent * event );
} 
```

.cpp

```
void QWidgetNoPaintEvent::paintEvent ( QPaintEvent * event )
{
 //do nothing, or reject event, or do something custom ???
} 
```

我不是 100% 确定它是否会解决其他问题，因为它只会通过 Qt 阻止从 QWidgetNoPaintEvent 继承的小部件的绘制事件。

# javascript - 是否可以查看如何 被操纵？

> ID：16223270
> 
> 赞同：5
> 
> 时间：2013-04-25T19:34:26.837
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

我很好奇这个地球的 WebGL 动画是如何渲染的：

[http://ats-vs-world.cadillac.com/#!/home](http://ats-vs-world.cadillac.com/#!/home)

![在此处输入图像描述](https://i.stack.imgur.com/7o3Hx.jpg)

与其他 HTML 元素不同，我还没有找到一种方法来查看 canvas 元素是如何被操作的。

在 Chrome 和其他浏览器中，您可以“中断...子树修改”、“中断...属性修改”等。使用画布，当它被操纵时，元素是空白的。

有没有办法做到这一点？

**编辑：**我非常感谢@Joe 的回答。但是，一般情况下（不是特定于本网站），还有什么办法，所以看看是如何被操纵的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:39:30.543

我绝对推荐[WebGL Inspector](http://benvanik.github.io/WebGL-Inspector/)。

除此之外，您是否尝试过查看源代码？您可以从 Chrome 的检查器中查看一些项目（着色器、纹理）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T04:13:51.397

Chrome 在实验阶段有一个画布检查器（在我写这篇文章的时候）。要启用它，请转到 about:flags 并启用“开发者工具实验”。然后在开发人员工具设置（cog 图标）中，转到实验选项卡，您应该会看到“画布检查”选项 - [http://www.html5rocks.com/en/tutorials/canvas/inspection/](http://www.html5rocks.com/en/tutorials/canvas/inspection/)

# php - 在 PHP 中查找字符串中的文本

> ID：16223277
> 
> 赞同：-1
> 
> 时间：2013-04-25T19:34:52.733
> 
> 标签：php, string

我有一个从 MySQL 数据库中获取的不同长度的字符串，在该字符串中是一个值（下面以粗体显示）：

s:1:"4"、s:2:"53"、**s:3:"7"**、s:4:"5"

**我需要一种方法来查找s:3:**之后的引号中的任何内容。所以在这个例子中，它将是**7**。我环顾四周，我认为我需要使用explode 功能，但我无法实现它。该字符串可能包含 this 的多个值，在这种情况下，我想将它们全部放入一个数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:37:16.613

用于[`preg_match_all()`](http://www.php.net/manual/en/function.preg-match-all.php)：

```
$str = 's:1:"4", s:2:"53", s:3:"7", s:4:"5"';

if(preg_match_all('/s:3:"(.*?)"/', $str, $matches)) {
    var_dump($matches[1]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:41:22.500

非贪婪方法，包括多行。

```
<?php 
  $str = 's:1:"4", s:2:"53", s:3:"7", s:4:"5"';

  if(preg_match_all('!s:3:"([^"]+)"!s', $str, $matches)) {
    print_r($matches);
  }

?> 
```

# android - 我正在尝试在手机中加载联系人..代码在模拟器中运行良好，但在手机中崩溃

> ID：16223279
> 
> 赞同：0
> 
> 时间：2013-04-25T19:34:59.017
> 
> 标签：android, exception-handling, contacts

```
package in.wptrafficanalzer.listviewcontacts;

 import java.io.File;
import java.io.FileOutputStream;

import android.app.Activity;
import android.database.Cursor;
import android.database.MatrixCursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
 import android.net.Uri;
 import android.os.AsyncTask;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.Menu;
import android.widget.ListView;

public class MainActivity extends Activity {

SimpleCursorAdapter mAdapter;
MatrixCursor mMatrixCursor; 
Cursor contactsCursor;
Cursor dataCursor;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // The contacts from the contacts content provider is stored in this cursor
    mMatrixCursor = new MatrixCursor(new String[] { "_id","name","photo","details"} );

    // Adapter to set data in the listview
    mAdapter = new SimpleCursorAdapter(getBaseContext(),
            R.layout.lv_layout,
            null,
            new String[] { "name","photo","details"},
            new int[] { R.id.tv_name,R.id.iv_photo,R.id.tv_details}, 0);

    // Getting reference to listview
    ListView lstContacts = (ListView) findViewById(R.id.lst_contacts);

    // Setting the adapter to listview
    lstContacts.setAdapter(mAdapter);        

    // Creating an AsyncTask object to retrieve and load listview with contacts
    ListViewContactsLoader listViewContactsLoader = new ListViewContactsLoader();

    // Starting the AsyncTask process to retrieve and load listview with contacts
    listViewContactsLoader.execute();        

}    

/** An AsyncTask class to retrieve and load listview with contacts */
private class ListViewContactsLoader extends AsyncTask<Void, Void, Cursor>{     

    @Override
    protected Cursor doInBackground(Void... params) {
        Uri contactsUri = ContactsContract.Contacts.CONTENT_URI;

        // Querying the table ContactsContract.Contacts to retrieve all the contacts
         contactsCursor = getContentResolver().query(contactsUri, null, null, null, 
                                ContactsContract.Contacts.DISPLAY_NAME + " ASC ");

        if(contactsCursor.moveToFirst()){
            do{
                long contactId = contactsCursor.getLong(contactsCursor.getColumnIndex("_ID"));

                Uri dataUri = ContactsContract.Data.CONTENT_URI;

                // Querying the table ContactsContract.Data to retrieve individual items like
                // home phone, mobile phone, work email etc corresponding to each contact 
                 dataCursor = getContentResolver().query(dataUri, null, 
                                        ContactsContract.Data.CONTACT_ID + "=" + contactId, 
                                        null, null);

                String displayName="";
                String nickName="";
                String homePhone="";
                String mobilePhone="";
                String workPhone="";
                String photoPath="" + R.drawable.blank;
                byte[] photoByte=null;
                String homeEmail="";
                String workEmail="";
                String companyName="";
                String title="";

                if(dataCursor.moveToFirst()){
                    // Getting Display Name
                    displayName = dataCursor.getString(dataCursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME ));
                    do{

                        // Getting NickName
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Nickname.CONTENT_ITEM_TYPE))
                            nickName = dataCursor.getString(dataCursor.getColumnIndex("data1"));

                        // Getting Phone numbers
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)){
                            switch(dataCursor.getInt(dataCursor.getColumnIndex("data2"))){
                                case ContactsContract.CommonDataKinds.Phone.TYPE_HOME : 
                                    homePhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                                case ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE : 
                                    mobilePhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                                case ContactsContract.CommonDataKinds.Phone.TYPE_WORK : 
                                    workPhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;  
                            }
                        }

                        // Getting EMails
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE ) ) {                                    
                            switch(dataCursor.getInt(dataCursor.getColumnIndex("data2"))){
                                case ContactsContract.CommonDataKinds.Email.TYPE_HOME : 
                                    homeEmail = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                                case ContactsContract.CommonDataKinds.Email.TYPE_WORK : 
                                    workEmail = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;                                      
                            }
                        }

                        // Getting Organization details
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE)){
                            companyName = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                            title = dataCursor.getString(dataCursor.getColumnIndex("data4"));
                        }

                        // Getting Photo    
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)){                               
                            photoByte = dataCursor.getBlob(dataCursor.getColumnIndex("data15"));

                            if(photoByte != null) {                         
                                Bitmap bitmap = BitmapFactory.decodeByteArray(photoByte, 0, photoByte.length);

                                // Getting Caching directory 
                                File cacheDirectory = getBaseContext().getCacheDir();

                                // Temporary file to store the contact image 
                                File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+contactId+".png");

                                // The FileOutputStream to the temporary file
                                try {
                                    FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                                    // Writing the bitmap to the temporary file as png file
                                    bitmap.compress(Bitmap.CompressFormat.PNG,100, fOutStream);

                                    // Flush the FileOutputStream
                                    fOutStream.flush();

                                    //Close the FileOutputStream
                                    fOutStream.close();

                                } catch (Exception e) {
                                    e.printStackTrace();
                                }

                                photoPath = tmpFile.getPath();
                            }

                        }

                    }while(dataCursor.moveToNext());                    

                    String details = "";

                    // Concatenating various information to single string
                    if(homePhone != null && !homePhone.equals("") )
                        details = "HomePhone : " + homePhone + "\n";
                    if(mobilePhone != null && !mobilePhone.equals("") )
                        details += "MobilePhone : " + mobilePhone + "\n";
                    if(workPhone != null && !workPhone.equals("") )
                        details += "WorkPhone : " + workPhone + "\n";
                    if(nickName != null && !nickName.equals("") )
                        details += "NickName : " + nickName + "\n";
                    if(homeEmail != null && !homeEmail.equals("") )
                        details += "HomeEmail : " + homeEmail + "\n";
                    if(workEmail != null && !workEmail.equals("") )
                        details += "WorkEmail : " + workEmail + "\n";
                    if(companyName != null && !companyName.equals("") )
                        details += "CompanyName : " + companyName + "\n";
                    if(title != null && !title.equals("") )
                        details += "Title : " + title + "\n";

                    // Adding id, display name, path to photo and other details to cursor
                    mMatrixCursor.addRow(new Object[]{ Long.toString(contactId),displayName,photoPath,details});
                }

            }while(contactsCursor.moveToNext());
        }
        return mMatrixCursor;
    }

    @Override
    protected void onPostExecute(Cursor result) {           
        // Setting the cursor containing contacts to listview
        mAdapter.swapCursor(result);
    }       
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
 } 
```

我尝试将其加载到我的单元格中..它挂起几分钟并强制关闭..我收到的错误如下...为什么使用 android 联系人这么难。

```
FATAL EXCEPTION: AsyncTask #1
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:200)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
at java.lang.Thread.run(Thread.java:1096)
Caused by: java.lang.NullPointerException
at in.wptrafficanalzer.listviewcontacts.MainActivity$ListViewContactsLoader.doInBackground(MainActivity.java:92)
at in.wptrafficanalzer.listviewcontacts.MainActivity$ListViewContactsLoader.doInBackground(MainActivity.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:185)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    … 4 more 
```

看起来在 doinbackgroung 方法中有一些事情要做..虽然不确定..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-09T09:57:42.993

您必须在 doInBackground 方法的末尾关闭 dataCursor 和 contactsCursor。所以你的代码看起来像这样：

```
@Override
    protected Cursor doInBackground(Void... params) {
        Uri contactsUri = ContactsContract.Contacts.CONTENT_URI;

        // Querying the table ContactsContract.Contacts to retrieve all the contacts
         contactsCursor = getContentResolver().query(contactsUri, null, null, null, 
                                ContactsContract.Contacts.DISPLAY_NAME + " ASC ");

        if(contactsCursor.moveToFirst()){
            do{
                long contactId = contactsCursor.getLong(contactsCursor.getColumnIndex("_ID"));

                Uri dataUri = ContactsContract.Data.CONTENT_URI;

                // Querying the table ContactsContract.Data to retrieve individual items like
                // home phone, mobile phone, work email etc corresponding to each contact 
                 dataCursor = getContentResolver().query(dataUri, null, 
                                        ContactsContract.Data.CONTACT_ID + "=" + contactId, 
                                        null, null);

                String displayName="";
                String nickName="";
                String homePhone="";
                String mobilePhone="";
                String workPhone="";
                String photoPath="" + R.drawable.blank;
                byte[] photoByte=null;
                String homeEmail="";
                String workEmail="";
                String companyName="";
                String title="";

                if(dataCursor.moveToFirst()){
                    // Getting Display Name
                    displayName = dataCursor.getString(dataCursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME ));
                    do{

                        // Getting NickName
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Nickname.CONTENT_ITEM_TYPE))
                            nickName = dataCursor.getString(dataCursor.getColumnIndex("data1"));

                        // Getting Phone numbers
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)){
                            switch(dataCursor.getInt(dataCursor.getColumnIndex("data2"))){
                                case ContactsContract.CommonDataKinds.Phone.TYPE_HOME : 
                                    homePhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                                case ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE : 
                                    mobilePhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                                case ContactsContract.CommonDataKinds.Phone.TYPE_WORK : 
                                    workPhone = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;  
                            }
                        }

                        // Getting EMails
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE ) ) {                                    
                            switch(dataCursor.getInt(dataCursor.getColumnIndex("data2"))){
                                case ContactsContract.CommonDataKinds.Email.TYPE_HOME : 
                                    homeEmail = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;
                                case ContactsContract.CommonDataKinds.Email.TYPE_WORK : 
                                    workEmail = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                                    break;                                      
                            }
                        }

                        // Getting Organization details
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE)){
                            companyName = dataCursor.getString(dataCursor.getColumnIndex("data1"));
                            title = dataCursor.getString(dataCursor.getColumnIndex("data4"));
                        }

                        // Getting Photo    
                        if(dataCursor.getString(dataCursor.getColumnIndex("mimetype")).equals(ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)){                               
                            photoByte = dataCursor.getBlob(dataCursor.getColumnIndex("data15"));

                            if(photoByte != null) {                         
                                Bitmap bitmap = BitmapFactory.decodeByteArray(photoByte, 0, photoByte.length);

                                // Getting Caching directory 
                                File cacheDirectory = getBaseContext().getCacheDir();

                                // Temporary file to store the contact image 
                                File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+contactId+".png");

                                // The FileOutputStream to the temporary file
                                try {
                                    FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                                    // Writing the bitmap to the temporary file as png file
                                    bitmap.compress(Bitmap.CompressFormat.PNG,100, fOutStream);

                                    // Flush the FileOutputStream
                                    fOutStream.flush();

                                    //Close the FileOutputStream
                                    fOutStream.close();

                                } catch (Exception e) {
                                    e.printStackTrace();
                                }

                                photoPath = tmpFile.getPath();
                            }

                        }

                    }while(dataCursor.moveToNext());                    

                    String details = "";

                    // Concatenating various information to single string
                    if(homePhone != null && !homePhone.equals("") )
                        details = "HomePhone : " + homePhone + "\n";
                    if(mobilePhone != null && !mobilePhone.equals("") )
                        details += "MobilePhone : " + mobilePhone + "\n";
                    if(workPhone != null && !workPhone.equals("") )
                        details += "WorkPhone : " + workPhone + "\n";
                    if(nickName != null && !nickName.equals("") )
                        details += "NickName : " + nickName + "\n";
                    if(homeEmail != null && !homeEmail.equals("") )
                        details += "HomeEmail : " + homeEmail + "\n";
                    if(workEmail != null && !workEmail.equals("") )
                        details += "WorkEmail : " + workEmail + "\n";
                    if(companyName != null && !companyName.equals("") )
                        details += "CompanyName : " + companyName + "\n";
                    if(title != null && !title.equals("") )
                        details += "Title : " + title + "\n";

                    // Adding id, display name, path to photo and other details to cursor
                    mMatrixCursor.addRow(new Object[]{ Long.toString(contactId),displayName,photoPath,details});
                }

                    dataCursor.close();        // Closing dataCursor

            }while(contactsCursor.moveToNext());

            contactsCursor.close();           // Closing contactsCursor

        }
        return mMatrixCursor;
    } 
```

# python - 在 Python 中优化微分方程中的常数

> ID：16223283
> 
> 赞同：2
> 
> 时间：2013-04-25T19:35:08.257
> 
> 标签：python, scipy, curve-fitting, ode, odeint

好的，那么我将如何编写代码来优化微分方程中的常数 a 和 b，例如 dy/dt = a*y^2 + b，使用curve_fit？我将使用 odeint 来求解 ODE，然后使用 curve_fit 来优化 a 和 b。如果您能就这种情况提供意见，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T19:37:47.157

[使用 Sympy 查看 ODE](http://docs.sympy.org/dev/modules/solvers/ode.html)可能会为您提供更好的服务。Scipy/Numpy 基本上是数值包，并没有真正设置为进行代数/符号运算。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T17:22:54.750

你绝对可以这样做：

```
import numpy as np
from scipy.integrate import odeint
from scipy.optimize import curve_fit

def f(y, t, a, b):
    return a*y**2 + b

def y(t, a, b, y0):
    """
    Solution to the ODE y'(t) = f(t,y,a,b) with initial condition y(0) = y0
    """
    y = odeint(f, y0, t, args=(a, b))
    return y.ravel()

# Some random data to fit
data_t = np.sort(np.random.rand(200) * 10)
data_y = data_t**2 + np.random.rand(200)*10

popt, cov = curve_fit(y, data_t, data_y, [-1.2, 0.1, 0])
a_opt, b_opt, y0_opt = popt

print("a = %g" % a_opt)
print("b = %g" % b_opt)
print("y0 = %g" % y0_opt)

import matplotlib.pyplot as plt
t = np.linspace(0, 10, 2000)
plt.plot(data_t, data_y, '.',
         t, y(t, a_opt, b_opt, y0_opt), '-')
plt.gcf().set_size_inches(6, 4)
plt.savefig('out.png', dpi=96)
plt.show() 
```

![](https://dl.dropboxusercontent.com/u/5453551/3a123740795f6e8c94a6f658ecc72508a9134413/out.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-23T17:23:49.170

为了专门解决这类问题，我决定编写一个包装包，它统一了`sympy`和`scipy`. 它被称为[`symfit`](http://symfit.readthedocs.io/)。适合您的 ODE 将如下所示：

```
tdata = np.array([10, 26, 44, 70, 120])
ydata = 10e-4 * np.array([44, 34, 27, 20, 14])
y, t = variables('y, t')
a, b = parameters('a, b')

model_dict = {
    D(y, t): a*y^2 + b
}

ode_model = ODEModel(model_dict, initial={t: 0.0, y: 0.0})

fit = Fit(ode_model, t=tdata, y=ydata)
fit_result = fit.execute() 
```

从它被定义为 dict 的方式可以看出，适合（一阶）ODE 系统是没有问题的。查看[文档](http://symfit.readthedocs.io/en/latest/fitting_types.html#ode-fitting)了解更多信息！

# android - 使用 loopj AsyncHttpClient 获取 SocketTimeoutExceptions ...我可以设置超时值吗？

> ID：16223286
> 
> 赞同：18
> 
> 时间：2013-04-25T19:35:27.843
> 
> 标签：android, httpclient, loopj

使用 loopj [AsyncHttpClient](http://loopj.com/android-async-http/)库时，我在发出请求时不断收到 java.net.SocketTimeoutExceptions（见下文）。

我可以设置一些超时值吗？

***注意****：我发布这个希望为其他人提供一些帮助。我（愚蠢地）努力寻找解决方案一段时间。*

堆栈跟踪：

```
java.net.SocketTimeoutException
at java.net.PlainSocketImpl.read(PlainSocketImpl.java:491)
at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:191)
at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:82)
at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:180)
at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
at com.loopj.android.http.AsyncHttpRequest.makeRequest(AsyncHttpRequest.java:76)
at com.loopj.android.http.AsyncHttpRequest.makeRequestWithRetries(AsyncHttpRequest.java:95)
at com.loopj.android.http.AsyncHttpRequest.run(AsyncHttpRequest.java:57)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)
at java.util.concurrent.FutureTask.run(FutureTask.java:234)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-25T19:35:27.843

我发现`AsyncHttpClient`实际上默认为 10 秒超时。如果您的请求需要更长的时间，您将看到抛出的 SocketTimeoutException。

调整这个真的很简单。只需执行以下操作：

```
final int DEFAULT_TIMEOUT = 20 * 1000;
AsyncHttpClient aClient = new AsyncHttpClient();
aClient.setTimeout(DEFAULT_TIMEOUT);
//... continue as normal 
```

* * *

**编辑**：（谢谢，Horkavlna！）

您可以在 javadoc 中查看该方法的详细信息 - [http://loopj.com/android-async-http/doc/com/loopj/android/http/AsyncHttpClient.html#setTimeout(int)](http://loopj.com/android-async-http/doc/com/loopj/android/http/AsyncHttpClient.html#setTimeout(int))

# android - 从 SlidingMenu 切换 Activity 时的转换 (J.Feinstein)

> ID：16223298
> 
> 赞同：0
> 
> 时间：2013-04-25T19:36:11.867
> 
> 标签：android, slidingmenu

我是一个安卓新手，我正在尝试创建一个包含三个活动的安卓应用程序：一个主屏幕、一个列表视图和一个详细视图。

我在我的主屏幕中集成了 J. Feinstein 的滑动菜单，并用 ListView 填充它以显示我的不同类别（餐厅、酒吧、文化等）。当我单击其中一个列表项时，会创建新的 Activity 并弹出。但是，我希望 Activity 替换旧的，而 SlidingMenu 保持在顶部，然后轻轻滑开。我在示例应用程序中看到了这种行为，但我无法完全找到包含我问题答案的代码。希望任何人都可以提供帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:17:19.153

示例应用程序使用片段事务而不是启动新活动来更改内容。据我所知，这是同时执行这两个操作的唯一方法——关闭滑动菜单和更改内容。

# iphone - 如何从 Xcode 中的表格视图从数组中的项目加载 excel 文件？

> ID：16223301
> 
> 赞同：0
> 
> 时间：2013-04-25T19:36:23.053
> 
> 标签：iphone, xcode, excel

我是一名医疗保健金融分析师，我没有 xcode 知识……但我刚刚在 iPhone 的 Xcode 中构建了我的第一个应用程序。我的表格视图显示以下三个项目。我希望下面数组中的每个项目加载一个不同的 excel 文件。

1.  人口普查
2.  急诊室班次
3.  联系人

Census 中数组中的第一项。我的问题是，如何加载与人口普查、ER 班次等相关的 excel 文件。我有单独的 3 个 excel 文件，它们与 xode 中我的支持文件文件夹中的数组中的每个项目相关。

如果这个问题太基本，请原谅我。我上周刚开始学习 XCode，并且开始了新的冒险。

谢谢。米娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T00:58:48.573

正如 H2CO3 所说，您无法在 Xcode 中加载 excel 文件（这就是您的意思吗？）但如果是 CSV 文件，您可以使用类似（[https://github.com/davedelong/CHCSVParser](https://github.com/davedelong/CHCSVParser)）并解析 CSV 文件并将其加载到某个视图（UITableview、UICollectionView 等）和类似的东西中。如果您希望重新创建完整的 excel，并在视图和 CSV 之间来回切换是可能的，但这听起来需要做很多工作

# algorithm - 将hangman难度级别的单词分类为“简单”、“中”或“难”的算法

> ID：16223305
> 
> 赞同：114
> 
> 时间：2013-04-25T19:36:57.773
> 
> 标签：algorithm

有什么好的算法来确定刽子手游戏中单词的“难度”，以便游戏可以选择匹配指定难度级别的单词？

难度似乎与所需猜测的数量、字母使用的相对频率（例如，具有许多不常见字母的单词可能更难猜测）以及单词的长度有关。

还有一些主观因素需要（尝试）补偿，例如一个单词在玩家词汇表中的可能性，并且可以被识别，允许从仅基于字母频率的猜测策略转变为基于列表的猜测已知的匹配词。

我现在的尝试低于红宝石。关于如何改进分类的任何建议？

```
def classify_word(w)
  n = w.chars.to_a.uniq.length # Num. unique chars in w
  if n < 5 and w.length > 4
    return WordDifficulty::Easy
  end
  if n > w.length / 2
    return WordDifficulty::Hard
  else
    return WordDifficulty::Medium
  end
end 
```

我正在写一个我想让我的孩子们玩的刽子手游戏；我太老了，不能尝试“家庭作业”，这可能就是为什么这个问题会收到如此多的反对票......单词是从大型单词数据库中随机抽取的，其中包括许多晦涩的单词，并被难度级别过滤为词而定。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-25T22:04:19.763

### 一、简介

这里有一个系统地解决这个问题的方法：如果你有一个能很好地扮演刽子手的算法，那么你可以把每个单词的难度作为你的程序在猜测那个单词时猜错的次数。

### 2\. 除了刽子手策略

在其他一些答案和评论中隐含了一个想法，即求解器的最佳策略是根据英语中字母的频率或某些语料库中单词的频率做出决定。这是一个诱人的想法，但它并不完全正确。如果求解器*准确地模拟了 setter 选择的单词的分布，*则求解器会做得最好，并且人类 setter 很可能会根据它们的稀有性或避免常用字母来选择单词。例如，虽然`E`是英语中最常用的字母，但如果 setter 总是从单词`JUGFUL`、`RHYTHM`、`SYZYGY`和中进行选择`ZYTHUM`，那么完美的求解器不会从猜测开始`E`！

对 setter 进行建模的最佳方法取决于上下文，但我想某种贝叶斯归纳推理在求解器与同一个 setter 或一组类似 setter 进行许多游戏的环境中会很好地工作。

### 3\. 一个刽子手算法

在这里，我将概述一个非常好的求解器（但远非完美）。它将 setter 建模为从固定字典中统一选择单词。这是一种[贪心算法](http://en.wikipedia.org/wiki/Greedy_algorithm)：在每个阶段，它都会猜测使未命中次数最少的字母，即不包含猜测的单词。例如，如果到目前为止还没有做出任何猜测，并且可能的词是`DEED`,`DEAD`和`DARE`, 那么：

*   如果您猜`D`或`E`，则没有遗漏；
*   如果你猜`A`的话，有一个错过（`DEED`）；
*   如果你猜`R`，有两个未命中（`DEED`和`DEAD`）；
*   如果您猜到任何其他字母，则有三个未命中。

因此，在这种情况下，要么 要么`D`是`E`一个很好的猜测。

（感谢[Panic 上校在评论](https://stackoverflow.com/questions/16223305/algorithm-for-classifying-words-for-hangman-difficulty-levels-as-easy-medium/16225534#comment23208206_16225534)中指出，刽子手中的正确猜测是免费的——我在第一次尝试时完全忘记了这一点！）

### 4\. 实施

这是该算法在 Python 中的实现：

```
from collections import defaultdict
from string import ascii_lowercase

def partition(guess, words):
    """Apply the single letter 'guess' to the sequence 'words' and return
    a dictionary mapping the pattern of occurrences of 'guess' in a
    word to the list of words with that pattern.

    >>> words = 'deed even eyes mews peep star'.split()
    >>> sorted(list(partition('e', words).items()))
    [(0, ['star']), (2, ['mews']), (5, ['even', 'eyes']), (6, ['deed', 'peep'])]

    """
    result = defaultdict(list)
    for word in words:
        key = sum(1 << i for i, letter in enumerate(word) if letter == guess)
        result[key].append(word)
    return result

def guess_cost(guess, words):
    """Return the cost of a guess, namely the number of words that don't
    contain the guess.

    >>> words = 'deed even eyes mews peep star'.split()
    >>> guess_cost('e', words)
    1
    >>> guess_cost('s', words)
    3

    """
    return sum(guess not in word for word in words)

def word_guesses(words, wrong = 0, letters = ''):
    """Given the collection 'words' that match all letters guessed so far,
    generate tuples (wrong, nguesses, word, guesses) where
    'word' is the word that was guessed;
    'guesses' is the sequence of letters guessed;
    'wrong' is the number of these guesses that were wrong;
    'nguesses' is len(guesses).

    >>> words = 'deed even eyes heel mere peep star'.split()
    >>> from pprint import pprint
    >>> pprint(sorted(word_guesses(words)))
    [(0, 1, 'mere', 'e'),
     (0, 2, 'deed', 'ed'),
     (0, 2, 'even', 'en'),
     (1, 1, 'star', 'e'),
     (1, 2, 'eyes', 'en'),
     (1, 3, 'heel', 'edh'),
     (2, 3, 'peep', 'edh')]

    """
    if len(words) == 1:
        yield wrong, len(letters), words[0], letters
        return
    best_guess = min((g for g in ascii_lowercase if g not in letters),
                     key = lambda g:guess_cost(g, words))
    best_partition = partition(best_guess, words)
    letters += best_guess
    for pattern, words in best_partition.items():
        for guess in word_guesses(words, wrong + (pattern == 0), letters):
            yield guess 
```

### 5\. 示例结果

使用这种策略，可以评估猜测集合中每个单词的难度。在这里，我考虑了我的系统词典中的六个字母的单词：

```
>>> words = [w.strip() for w in open('/usr/share/dict/words') if w.lower() == w]
>>> six_letter_words = set(w for w in words if len(w) == 6)
>>> len(six_letter_words)
15066
>>> results = sorted(word_guesses(six_letter_words)) 
```

这本词典中最容易猜测的单词（连同求解器猜测它们所需的猜测序列）如下：

```
>>> from pprint import pprint
>>> pprint(results[:10])
[(0, 1, 'eelery', 'e'),
 (0, 2, 'coneen', 'en'),
 (0, 2, 'earlet', 'er'),
 (0, 2, 'earner', 'er'),
 (0, 2, 'edgrew', 'er'),
 (0, 2, 'eerily', 'el'),
 (0, 2, 'egence', 'eg'),
 (0, 2, 'eleven', 'el'),
 (0, 2, 'enaena', 'en'),
 (0, 2, 'ennead', 'en')] 
```

最难的词是这些：

```
>>> pprint(results[-10:])
[(12, 16, 'buzzer', 'eraoiutlnsmdbcfg'),
 (12, 16, 'cuffer', 'eraoiutlnsmdbpgc'),
 (12, 16, 'jugger', 'eraoiutlnsmdbpgh'),
 (12, 16, 'pugger', 'eraoiutlnsmdbpcf'),
 (12, 16, 'suddle', 'eaioulbrdcfghmnp'),
 (12, 16, 'yucker', 'eraoiutlnsmdbpgc'),
 (12, 16, 'zipper', 'eraoinltsdgcbpjk'),
 (12, 17, 'tuzzle', 'eaioulbrdcgszmnpt'),
 (13, 16, 'wuzzer', 'eraoiutlnsmdbpgc'),
 (13, 17, 'wuzzle', 'eaioulbrdcgszmnpt')] 
```

之所以难，是因为你猜到之后`-UZZLE`，还有七种可能：

```
>>> ' '.join(sorted(w for w in six_letter_words if w.endswith('uzzle')))
'buzzle guzzle muzzle nuzzle puzzle tuzzle wuzzle' 
```

### 6\. 词表的选择

当然，在为您的孩子准备单词表时，您不会从计算机的系统词典开始，而是从您认为他们可能知道的单词列表开始。例如，您可能会查看维基词典的各种英语语料库中[最常用单词的列表。](http://en.wiktionary.org/wiki/Wiktionary:Frequency_lists#English)

例如，在[2006 年古腾堡计划中最常见的 10,000 个](http://en.wiktionary.org/wiki/Wiktionary:Frequency_lists/PG/2006/04/1-10000)单词中的 1,700 个六字母单词中，最难的十个是：

```
[(6, 10, 'losing', 'eaoignvwch'),
 (6, 10, 'monkey', 'erdstaoync'),
 (6, 10, 'pulled', 'erdaioupfh'),
 (6, 10, 'slaves', 'erdsacthkl'),
 (6, 10, 'supper', 'eriaoubsfm'),
 (6, 11, 'hunter', 'eriaoubshng'),
 (6, 11, 'nought', 'eaoiustghbf'),
 (6, 11, 'wounds', 'eaoiusdnhpr'),
 (6, 11, 'wright', 'eaoithglrbf'),
 (7, 10, 'soames', 'erdsacthkl')] 
```

（Soames Forsyte 是[John Galsworthy 的 Forsyte Saga](http://www.gutenberg.org/ebooks/4397)中的一个角色；单词表已转换为小写字母，因此我无法快速删除专有名称。）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-25T19:56:04.237

一个非常简单的方法是根据单词中元音的缺失、唯一字母的数量以及每个字母的共性来计算分数：

```
letters = 'etaoinshrdlcumwfgypbvkjxqz'
vowels = set('aeiou')

def difficulty(word):
    unique = set(word)
    positions = sum(letters.index(c) for c in word)

    return len(word) * len(unique) * (7 - len(unique & vowels)) * positions

words = ['the', 'potato', 'school', 'egypt', 'floccinaucinihilipilification']

for word in words:
    print difficulty(word), word 
```

和输出：

```
432 the
3360 potato
7200 school
7800 egypt
194271 floccinaucinihilipilification 
```

然后，您可以使用以下方法对单词进行评分：

```
 score < 2000   # Easy
 2000 < score < 10000  # Medium
10000 < score          # Hard 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-25T20:09:28.410

您可以使用[*蒙特卡罗方法*](http://en.wikipedia.org/wiki/Monte_Carlo_method)来估计单词的难度：

*   通过每次猜测一个随机字母来模拟游戏，由目标语言中字母的频率加权，并计算随机玩家需要多少次猜测才能得出一个解决方案。请注意，由于每次猜测都会消除一个字母，因此此过程是有限的，它返回一个从 1 到 26 的数字，包括 1 到 26。
*   重复此过程`2*N`次数，您的单词中*唯一*字母`N`的数量在哪里，
**   `2*N`通过平均运行结果来计算分数，*   判断复杂程度：分数低于十表示易词，分数高于十六表示难词；其他一切都是中等的。*

 ** * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-25T20:21:13.110

之前围绕同一主题的类似讨论： [确定英语单词的难度](https://stackoverflow.com/questions/5141092/determine-the-difficulty-of-an-english-word)

我喜欢链接末尾的答案^。对于儿童刽子手游戏，只需采用像拼字游戏一样的方法。

为每个字母分配一个点值，然后将这些字母相加。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-25T19:58:50.070

去做就对了！玩刽子手反对这个词。计算要击败多少次没收（即错误的猜测）。

你需要一个策略来玩。这是一个人类（ish）策略。从字典中，删除迄今为止不符合揭示的所有单词。猜猜剩下的单词中出现频率最高的字母。

如果您的策略是随机的，您可以将您的度量定义为预期的没收数量，并根据经验进行估计。

* * *

另一种确定性策略，来自我几年前写的一个[刽子手机器人。](https://github.com/matt-hickford/hangman)在猜测不正确的情况下，猜测使剩余单词数最小的字母（即优化最坏的情况）。今天我不喜欢这种过于机械化的策略，我更喜欢上面的那个。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-25T22:46:20.480

不久前，我使用显而易见的算法编写了一个刽子手求解器：给定一个包含所有可能单词的初始字典，在每一轮我们选择出现在字典中剩余最多单词中的字母，然后删除不匹配的单词（取决于响应）来自字典。

该算法并不像这样简单，因为通常有几个字母出现在字典中相同数量的单词中。在这种情况下，字母的选择会对一个单词需要多少次猜测产生重大影响。我们选择最大值，其中关于该字母位置的结果信息（如果确实在单词中）给出了关于系统的最大信息（具有最大[信息熵](http://en.wikipedia.org/wiki/Entropy_%28information_theory%29)的字母）。例如，如果剩下的两个可能的词是“百科全书”和“百科全书”，则字母“c”出现的概率与 e,n,y,l,o,p,e,d,i 相同（即保证在单词中），但我们应该首先询问“c”，因为它具有非零信息熵。

源代码（C++，GPL）在[这里](http://www.chris-j.co.uk/files/hangman.cpp)

所有这一切的结果是一个单词列表，每个单词需要猜测的次数：[难度](http://www.chris-j.co.uk/files/difficulty.txt).txt (630KB)。这个算法最难找到的词是“will”（有 14 次失败的猜测）；i 和 double l 被猜得很快，但接下来的选项包括 bill、dill、fill、gill、hill、kill、mill、pill、rill、till、will，从那时起，唯一的选择就是猜中的每个字母转动。有点违反直觉，更长的单词被猜得更快（只是没有那么多可供选择）。

当然，在人类的刽子手游戏中，心理学（和词汇的广度）所起的作用比这个算法所扮演的要大得多……

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-25T19:52:07.613

首先，当然，您会生成一个唯一字母列表。然后按频率排序（用英语或任何语言 -[有这个列表](http://en.wikipedia.org/wiki/Letter_frequency)），频率较低的字母难度较高。

然后，您需要决定是通过加法、乘法还是使用其他方案来组合分数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-25T19:45:47.420

您之所以被否决，是因为您要求我们为您构建一个非常复杂的算法。

为什么不直接创建三个数组（简单、中等和困难）并用一百左右的单词填充每个数组？大约需要20分钟。

我保证你的孩子在玩完几百场比赛之前早就厌倦了刽子手……：D

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-25T20:10:38.837

好吧，可能涉及很多事情：

1.  正如大家所说，个别字母的频率；
2.  一个词的长度肯定应该计算在内，但不是以线性方式计算的——一个长的词可以随机猜测到字母，而一个短的词则很难得到；
3.  此外，应该考虑这些词本身 - “二分”可能是 SO 上的人的词，但可能不适用于非技术人群。

实际上，您可以[尝试共同进化几种策略](http://www.sci.brooklyn.cuny.edu/~sklar/teaching/f05/alife/papers/koza-91evolution.pdf)，其中一半用于决定单词的价值，而另一半用于赢得比赛。后一组将尝试最大化分数，而第一组将尝试最小化分数。一段时间后可能会有一个模式，然后决定一个词的价值的一半可能会给你一些基准。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-26T00:24:00.560

从单词列表开始，然后为每个单词启动谷歌搜索。让点击数作为术语难度的（粗略）代理。

在一个精炼的版本中，您可以通过基于同义词库的同义词关系对单词进行分组，并通过计算谷歌搜索的结果来确定一个类别中最难的单词。

进一步了解 n-Gram 的概念，一个单词的难度可以通过其在散文中的音节频率来评估。当然，这取决于音节统计的质量。您可能必须区分词素和虚词（限定词、连词等）并通过单词中的音节数进行规范化（感觉就像我写的矫枉​​过正......）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-26T01:07:01.670

我喜欢构建一个根据用户学习和改变的算法的想法。一开始，你可以执行任何建议的算法来得出这个列表，然后随着更多的人玩这个游戏，你根据猜测的数量为每个单词分配一个权重（这也是不断跟踪和计算的） ）。这可以防止复杂但流行的单词被赋予困难的评级但为人们所熟知的问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-09T18:17:33.807

计算拼字游戏点中单词的每个字母的值：E=1、D=2、V=4、X=8 等等。将它们相加并除以字母的数量以获得平均字母值，并使用它对单词进行评分。计算大型词典中每个单词的平均值，并确定四分位数之间的断点。将最低四分位数中的单词称为“容易”，将两个中间四分位数中的单词称为“中等”，将最高四分位数中的单词称为“困难”。*

# ruby - 从模块内部调用 sinatra 停止？

> ID：16223308
> 
> 赞同：2
> 
> 时间：2013-04-25T19:37:01.473
> 
> 标签：ruby, sinatra

我有一个 Sinatra 应用程序，想在自定义模块中使用停止方法。当我尝试从自定义模块内部调用暂停时，我收到一条错误消息，提示“Standup:Module 的未定义方法‘暂停’”。如何使 Sinatra 方法在另一个模块中可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T15:03:56.267

旧帖子，但我想我会为了他人的利益而发帖：

所以，我刚刚在 Sinatra 的贡献中看到了一个很酷的模块，叫做 Sinatra::Extension。如果没有您提供的任何代码，我们将在黑暗中拍摄，但这至少听起来对您的用例很有希望。[http://www.sinatrarb.com/contrib/extension.html](http://www.sinatrarb.com/contrib/extension.html)

# testing - DNF 规范化的测试用例：用你的测试用例破坏我的代码

> ID：16223311
> 
> 赞同：2
> 
> 时间：2013-04-25T19:37:16.060
> 
> 标签：testing, boolean-logic

一旦我可以悬赏，我将放弃 100 分，给第一个发明测试用例的海报，打破了我将命题逻辑语句规范化为析取范式的常规。我将省略代码，因为它很长，无论如何您都可以将例程视为黑匣子。

**形式是析取范式**，当它是文字（`p`, `NOT p`）的析取时：实际上，这与 CNF 是对偶的。例子：

```
(NOT p AND q AND r) OR s OR (NOT t)
p OR q
p OR q OR r OR s OR t
p AND q
p AND q AND r
p
NOT p 
```

尽管

```
p AND (q OR r)
p OR (q AND (r OR s))
NOT (p AND q) 
```

不在DNF中。

**至于我自己提出的测试用例**，我可以将它们分为

*   使用 DNF 中已有的简单公式进行冒烟测试，例如：`p`, `NOT p`, `(p AND q) or r`;
*   的情况下`.. AND (..OR..)`，与和或“交换”；例如，`p AND (q OR r)`的 dnf 可以是`(p AND q) OR (p AND r)`;
*   在树中的路径上有两次相同的运算符，即。`.. OR ( .. AND ( .. OR .. ))`;
*   特别是，中间没有其他运算符`.. OR ( .. OR .. )`；
*   在公式的不同位置有多个否定，`... NOT NOT p`, `NOT NOT (.. AND ..)`;
*   看起来更像一棵树的公式，`(.. OR ..) AND (.. AND ..)`而不仅仅是一个列表`p AND (q AND (r AND ...))`；
*   其中运算符有两个以上的操作数`(...) AND (p OR q OR r OR s)`。

**完成这些测试**后，我对代码进行了一些简单的更改。显然我破坏了代码，因为套件失败了。虽然这意味着我的测试对我有帮助，但让我担心的是只有我的一项测试发现了问题。这只是一个测试用例，如果我没有，我会错过一个错误。那么有多少错误我什至没有一次测试呢？

那么，什么是一些好的测试用例呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T14:52:19.987

考虑使用[模糊测试](http://en.wikipedia.org/wiki/Fuzz_testing)。

1）生成随机语句“（（A AND B）OR B）”并将它们通过您的DNF规范化器。2）遍历输入的所有可能值（AB = 00、01、11、10），在评估原始表达式和简化答案时测试答案。3) 如果发现任何不良结果，请大声抱怨。

唯一棘手的一点是生成随机语句。我会用递归来做。一个简单的第一遍看起来像这样：

```
gen_one: return one of "A", "B", "NOT A", "NOT B"
gen_op: return one of "AND", "OR", "NOR", "NAND"
genstatement:
  if rand < 10%
    return gen_one()
  else
    return "(" + genstatement() + gen_op + genstatement() + ")" 
```

# sql - SQL 中的树视图

> ID：16223313
> 
> 赞同：0
> 
> 时间：2013-04-25T19:37:21.480
> 
> 标签：sql, treeview

是否有一种简单的方法可以使用 SQL Server Management Studio 中的输出到文本在 SQL Select 语句中进行扩展树视图？

输入表

```
GRP NAME ITEM1 ITEM2
--- ---- ----- -----
 1   AB   100   200
 1   AC   150   200
 1   AD   175   200
 2   BC   200   220
 2   BD   NULL  NULL 
```

期望的输出

```
GRP 1
+-- AB
+    +-- ITEM1: 100
+    +-- ITEM2: 200
+-- AC
+    +-- ITEM1: 150
+    +-- ITEM2: 200
+-- AD
+    +-- ITEM1: 175
+    +-- ITEM2: 200

GRP 2
+-- BC
+    +-- ITEM1: 200
+    +-- ITEM2: 220
+-- BD 
```

感谢 jlimited

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T01:04:18.680

这样就可以了（您需要忽略输出中的第 2、3、4 列，它们用于排序）：

```
select DISTINCT 'GRP ' + convert(varchar(10), GRP), convert(int, GRP), ' ', 0 from table1
UNION ALL
select '+-- ' + [NAME], convert(int, GRP), [name], 1 from table1
UNION ALL
select '+    +-- ITEM 1: ' + [ITEM1], convert(int, GRP), [name], 2 from table1 where ITEM1 IS NOT NULL
UNION ALL
select '+    +-- ITEM 2: ' + [ITEM2], convert(int, GRP), [name], 3 from table1 where ITEM2 IS NOT NULL
ORDER BY 2,3,4 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/89de7/2)

# cuda - Cuda ffmpeg 上的视频解码器

> ID：16223315
> 
> 赞同：1
> 
> 时间：2013-04-25T19:37:25.377
> 
> 标签：cuda, ffmpeg, nvidia, decoder, libav

我开始实现 custum 视频解码器，该解码器利用 cuda HW 解码器生成 YUV 帧以供下一步对其进行编码。

如何填写“CUVIDPICPARAMS”结构？可能吗？

我的算法是：

对于获取视频流数据包，我使用 ffmpeg-dev libs avcodec、avformat ...

我的步骤：

1）打开输入文件：

```
avformat_open_input(&ff_formatContext,in_filename,nullptr,nullptr); 
```

2）获取视频流属性：

```
avformat_find_stream_info(ff_formatContext,nullptr); 
```

3）获取视频流：

```
ff_video_stream=ff_formatContext->streams[i]; 
```

4）获取CUDA设备并初始化它：

```
cuDeviceGet(&cu_device,0);
CUcontext cu_vid_ctx; 
```

5）初始化视频CUDA解码器并设置创建参数：

```
CUVIDDECODECREATEINFO *cu_decoder_info=new CUVIDDECODECREATEINFO;
memset(cu_decoder_info,0,sizeof(CUVIDDECODECREATEINFO));
...
cuvidCreateDecoder(cu_video_decoder,cu_decoder_info); 
```

6)将帧数据读入AVpacket

```
av_read_frame(ff_formatContext,ff_packet); 
```

现在我需要在 CUDA 视频解码器上解码帧包，理论上是：

```
cuvidDecodePicture(pDecoder,&picParams); 
```

但在我需要填写 CUVIDPICPARAMS 之前

CUVIDPICPARAMS picParams;//=新的 CUVIDPICPARAMS; memset(&picParams, 0, sizeof(CUVIDPICPARAMS));

```
HOW CAN I FILL "CUVIDPICPARAMS" struc ???

typedef struct _CUVIDPICPARAMS
{
    int PicWidthInMbs;      // Coded Frame Size
    int FrameHeightInMbs;   // Coded Frame Height
    int CurrPicIdx;         // Output index of the current picture
    int field_pic_flag;     // 0=frame picture, 1=field picture
    int bottom_field_flag;  // 0=top field, 1=bottom field (ignored if field_pic_flag=0)
    int second_field;       // Second field of a complementary field pair
    // Bitstream data
    unsigned int nBitstreamDataLen;        // Number of bytes in bitstream data buffer
    const unsigned char *pBitstreamData;   // Ptr to bitstream data for this picture (slice-layer)
    unsigned int nNumSlices;               // Number of slices in this picture
    const unsigned int *pSliceDataOffsets; // nNumSlices entries, contains offset of each slice within the bitstream data buffer
    int ref_pic_flag;       // This picture is a reference picture
    int intra_pic_flag;     // This picture is entirely intra coded
    unsigned int Reserved[30];             // Reserved for future use
    // Codec-specific data
    union {
        CUVIDMPEG2PICPARAMS mpeg2;          // Also used for MPEG-1
        CUVIDH264PICPARAMS h264;
        CUVIDVC1PICPARAMS vc1;
        CUVIDMPEG4PICPARAMS mpeg4;
        CUVIDJPEGPICPARAMS jpeg;
        unsigned int CodecReserved[1024];
    } CodecSpecific;
} CUVIDPICPARAMS;

typedef struct _CUVIDH264PICPARAMS
{
    // SPS
    int log2_max_frame_num_minus4;
    int pic_order_cnt_type;
    int log2_max_pic_order_cnt_lsb_minus4;
    int delta_pic_order_always_zero_flag;
    int frame_mbs_only_flag;
    int direct_8x8_inference_flag;
    int num_ref_frames;             // NOTE: shall meet level 4.1 restrictions
    unsigned char residual_colour_transform_flag;
    unsigned char bit_depth_luma_minus8;    // Must be 0 (only 8-bit supported)
    unsigned char bit_depth_chroma_minus8;  // Must be 0 (only 8-bit supported)
    unsigned char qpprime_y_zero_transform_bypass_flag;
    // PPS
    int entropy_coding_mode_flag;
    int pic_order_present_flag;
    int num_ref_idx_l0_active_minus1;
    int num_ref_idx_l1_active_minus1;
    int weighted_pred_flag;
    int weighted_bipred_idc;
    int pic_init_qp_minus26;
    int deblocking_filter_control_present_flag;
    int redundant_pic_cnt_present_flag;
    int transform_8x8_mode_flag;
    int MbaffFrameFlag;
    int constrained_intra_pred_flag;
    int chroma_qp_index_offset;
    int second_chroma_qp_index_offset;
    int ref_pic_flag;
    int frame_num;
    int CurrFieldOrderCnt[2];
    // DPB
    CUVIDH264DPBENTRY dpb[16];          // List of reference frames within the DPB
    // Quantization Matrices (raster-order)
    unsigned char WeightScale4x4[6][16];
    unsigned char WeightScale8x8[2][64];
    // FMO/ASO
    unsigned char fmo_aso_enable;
    unsigned char num_slice_groups_minus1;
    unsigned char slice_group_map_type;
    signed char pic_init_qs_minus26;
    unsigned int slice_group_change_rate_minus1;
    union
    {
        unsigned long long slice_group_map_addr;
        const unsigned char *pMb2SliceGroupMap;
    } fmo;
    unsigned int  Reserved[12];
    // SVC/MVC
    union
    {
        CUVIDH264MVCEXT mvcext;
        CUVIDH264SVCEXT svcext;
    };
} CUVIDH264PICPARAMS; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T21:13:35.360

这就是对象的`CUvideoparser`目的。您通过 逐帧向它提供数据流，当它检测到它已准备好完整帧时，它会`cuvidParseVideoData`回叫您并`CUVIDPICPARAMS`准备好传递给解码器。

所有这些以及更多内容都在 D3D9 解码示例中得到了很好的说明，可[在此处](http://docs.nvidia.com/cuda/cuda-samples/index.html#cuda-video-decoder-d3d9-api)获得。我建议详细研究它，因为在它之外没有太多关于这个 API 的文档。

# android - 未注册内部类的广播接收器

> ID：16223317
> 
> 赞同：2
> 
> 时间：2013-04-25T19:37:29.883
> 
> 标签：android, android-intent

我已经搜索和搜索，并尝试了我能想到的一切 5 次。我无法让我的广播接收器注册。

目前，在清单中，在应用程序元素中，我有：

```
<receiver android:name=".MainActivity$browserReceiver"
    android:enabled="true" >
    <intent-filter>
        <action android:name="com.mycompany.snapbench.browsertest" />
    </intent-filter>
</receiver> 
```

在我的 MainActivity 类中：

```
public static BrowserReceiver browserReceiver; 
```

MainActivity->onCreate:

```
browserReceiver = new BrowserReceiver(); 
```

最后，在 MainActivity 类的末尾：

```
public class BrowserReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.e("Receiver", "I'm pretty sick of this.");
    }
} 
```

当我按下应用程序中的按钮时，我会运行它作为测试：

```
if (isIntentAvailable(this, "com.mycompany.snapbench.browsertest")) {
    Log.e("Intent", "It is there.");
} else {
    Log.e("Intent", "FAIL");
} 
```

当然，我在 LogCat 中总是得到“FAIL”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T20:11:43.297

刚刚测试了两种方法，都运行良好。对于这两者，我`SmsReceiver`在一个名为的活动中实现了一个类`ContactManager`：

```
public static class SmsReceiver extends BroadcastReceiver {

    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

    @Override
    public void onReceive(final Context context, final Intent intent) {     
        if (intent != null && SMS_RECEIVED.equals(intent.getAction())) {
            Log.d("TAG", "SMS received in inner class");
        }
    }
} 
```

1.  首先我在`onCreate()`方法中注册了接收器：

    ```
    IntentFilter filter = new IntentFilter(SmsReceiver.SMS_RECEIVED);
    BroadcastReceiver receiver = new SmsReceiver();
    registerReceiver(receiver, filter); 
    ```

    实际上，最好将其注册`onResume()`并取消注册`onPause()`。

2.  其次，我删除了我的注册码并将接收器添加到清单中：

两种解决方案都运行良好，并打印了*在内部类中收到的文本 SMS*。据我所知，您没有声明您的内部类`static`。那可能是错误。所以只需将其更改为：

```
public static class BrowserReceiver extends BroadcastReceiver {
    ...
} 
```

希望这会有所帮助......干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:44:26.210

打电话`registerReceiver`给`onCreate`你`MainActivity`

```
registerReceiver(browserReceiver, new IntentFilter("com.mycompany.snapbench.browsertest")); 
```

记得`unregisterReceiver(browserReceiver)`在`onDestroy`.

# java - 用 Java 编写 CGI 脚本

> ID：16223318
> 
> 赞同：3
> 
> 时间：2013-04-25T19:37:31.657
> 
> 标签：java, html, cgi

我试图弄清楚如何用 Java 编写 CGI 脚本。

我遵循了这个例子-> [http://www.javaworld.com/jw-01-1997/jw-01-cgiscripts.html?page=1](http://www.javaworld.com/jw-01-1997/jw-01-cgiscripts.html?page=1)

它提供 cgi_lib.java、hello.html 和 hello.java

一切似乎都很好，但在 html 部分。动作指向 cgi_lib/hello.cgi

没有提供cgi。所以我尝试使用 cgi_lib/hello.java，它在 hello.java 中打印了整个源代码。

然后我尝试将 hello.java 扩展编辑为 hello.cgi，并再次尝试。浏览器返回错误 500。

问题是什么？是这样吗，有一些特定的方法可以将 hello.java 编译成 hello.cgi 吗？hello.cgi 中的脚本与 hello.java 不同？

请帮忙。

谢谢你。

更新我添加了 hello.cgi

```
#!/bin/sh
java     -Dcgi.content_type=$CONTENT_TYPE     -Dcgi.content_length=$CONTENT_LENGTH     -   Dcgi.request_method=$REQUEST_METHOD     -Dcgi.query_string=$QUERY_STRING     -Dcgi.server_name=$SERVER_NAME     -Dcgi.server_port=$SERVER_PORT     -Dcgi.script_name=$SCRIPT_NAME     -Dcgi.path_info=$PATH_INFO   hello 
```

那么 $CONTENT_TYPE、$CONTENT_LENGTH、... 是否保持不变？还是我应该输入一些东西？

只是为了让事情更清楚。我把 cgi_lib、hello.java 和 hello.cgi 放在 C:\xampp\cgi-lib

以及 C:\xampp\htdocs\test 中的 hello.html

当我尝试连接时，它返回给我这个

```
Server error!

The server encountered an internal error and was unable to complete your request.

Error message: 
couldn't create child process: 720002: hello.cgi

If you think this is a server error, please contact the webmaster.

Error 500

localhost
Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7 
```

我检查了 c:\xampp\apache\conf 中的 httpd.conf 并根据[此配置](http://httpd.apache.org/docs/2.2/howto/cgi.html)

LoadModule cgi_module modules/mod_cgi.so ScriptAlias /cgi-bin/ "C:/Program Files/Apache Group/Apache/cgi-bin/" 好像已经启用了。

那么现在的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:56:09.600

hello.cgi 的内容显示在文章第 2 页的顶部。

```
#!/bin/sh
java     -Dcgi.content_type=$CONTENT_TYPE     -Dcgi.content_length=$CONTENT_LENGTH     -Dcgi.request_method=$REQUEST_METHOD     -Dcgi.query_string=$QUERY_STRING     -Dcgi.server_name=$SERVER_NAME     -Dcgi.server_port=$SERVER_PORT     -Dcgi.script_name=$SCRIPT_NAME     -Dcgi.path_info=$PATH_INFO   hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:13:41.307

文章说您将**在 cgi 脚本**中执行 java jar 。您需要通过使用 hello.jar 文件作为参数正确调用 java 可执行文件来确保此脚本设置为执行您的 jar 文件。还要确保您的 Web 服务器配置正确以允许执行 cgi 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T16:53:26.770

您还必须对您的 cgi 和 java 文件进行 chmod，以便其他人可以执行它们。

# wordpress - 为什么我的 wordpress 查询不起作用？自定义帖子类型

> ID：16223321
> 
> 赞同：0
> 
> 时间：2013-04-25T19:37:47.483
> 
> 标签：wordpress, custom-post-type

我无法让它显示来自名为“资源”的自定义帖子类型的帖子。有什么帮助吗？

```
<?php 
    add_action( 'pre_get_posts', 'add_custom_post_type_to_query' );
    function add_custom_post_type_to_query( $query ) {
        if ( is_home() && $query->is_main_query() )
            $query->set( 'post_type', array( 'post', 'page', 'resources' ) );
        return $query;
    }
?>

<?php if ( have_posts() ) : ?>
    <?php /* Start the Loop */ ?>
    <?php while ( have_posts() ) : the_post(); ?>
        <?php the_title(); ?>
        <?php the_content(); ?>
        <?php get_template_part( 'content', get_post_format() ); ?>
    <?php endwhile; ?>
    <?php twentytwelve_content_nav( 'nav-below' ); ?>
<?php else : ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:13:38.010

这部分应该进入 functions.php ：

```
<?php 
    add_action( 'pre_get_posts', 'add_custom_post_type_to_query' );
    function add_custom_post_type_to_query( $query ) {
        if ( is_home() && $query->is_main_query() )
            $query->set( 'post_type', array( 'post', 'page', 'resources' ) );
        return $query;
    }
?> 
```

虽然这部分在模板文件中：

```
<?php if ( have_posts() ) : ?>
    <?php /* Start the Loop */ ?>
    <?php while ( have_posts() ) : the_post(); ?>
        <?php the_title(); ?>
        <?php the_content(); ?>
        <?php get_template_part( 'content', get_post_format() ); ?>
    <?php endwhile; ?>
    <?php twentytwelve_content_nav( 'nav-below' ); ?>
<?php else : ?> 
```

解释 ：

第一部分是激活过滤器/操作`pre_get_posts()`。但是当你把它放在主题文件或模板文件中时，过滤器会触发太晚或根本不触发。

您`functions.php`在主题中的文件是第一个被解析的文件，因此它应该包含与页面的呈现或可视化不直接相关的所有功能。

然而`loop`，这是一种渲染机制，应该在适当的主题文件中。

# java - JAVA_HOME、M2 和 M2_HOME 变量的用途

> ID：16223325
> 
> 赞同：25
> 
> 时间：2013-04-25T19:38:12.097
> 
> 标签：java, maven, path

如果应该去那里的路径已经附加到我的 PATH 变量中，我需要什么`JAVA_HOME`、`M2`和`M2_HOME`环境变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T19:41:35.910

`JAVA_HOME`应参考您要使用的 Java 的安装目录。这个变量经常被各种脚本使用，所以建议定义它。`JAVA_HOME`本身不应添加到`PATH`. 您应该添加`JAVA_HOME/bin`能够在不指定具体路径的情况下从此目录运行命令。

`M2_HOME`是Maven的家。它由脚本`mvn`（或`mvn.bat`在 Windows 上）使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T19:46:28.057

主路径 ( `JAVA_HOME`, `M2_HOME`) 不是强制性的，但很好。优点之一是：

它可以帮助您在一个地方进行更改，而不是在`PATH`安装下一版本的 Java 或 Maven 时在变量中搜索。例如`JAVA_HOME`，当我将其升级到 Java Development Kit 1.8 时，下面的环境变量是我需要更改的一个地方。

![Windows环境变量窗口](https://i.stack.imgur.com/226RR.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-25T19:50:11.933

我认为您不了解环境变量的概念。首先，请阅读此处-> [http://en.wikipedia.org/wiki/Environment_variable](http://en.wikipedia.org/wiki/Environment_variable)

`PATH`是许多操作系统（或 shell）中众所周知的一个环境变量。它的意思是如果你输入一个没有完整路径的程序名，操作系统（或shell）将尝试搜索`PATH`变量中指定的所有目录。

其他程序对环境有不同的依赖关系。其中一些指定了它们需要哪些环境变量才能正常运行。

`JAVA_HOME`许多基于 Java 的应用程序使用它来定义 Java 运行时环境 (JRE) 的安装位置。

`M2_HOME`由 Maven 使用，它再次告诉程序在哪里找到 Maven 安装。

`PATH`不适合那个目的，因为它可能包含许多与 Java 或 Maven 无关的目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T22:00:36.210

PATH 变量用于在 Windows 上查找应用程序（可执行文件和脚本）和 DLL。如果您键入“mvn”，则 PATH 用于查找具有该名称的可执行文件或脚本。然而，仅仅因为脚本是在某个位置找到的，并不意味着应用程序安装在该目录中。最容易描述的示例是存在于 UNIX 上的示例。您可能有一个从 /usr/local/bin/mvn 到实际安装 maven 的位置的符号链接。可以给出其他示例/原因。

应用程序使用环境变量来了解在哪里寻找应用程序可能需要的其他资源。

例如，JAVA_HOME 指向可以找到 JDK 的目录。当 JAVA 运行时，该应用程序知道可以找到相对于 JAVA_HOME 目录的其他资源。

这允许应用程序（例如 C:\Windows\System32\java）存在于一个目录中，但 JDK 安装位于其他位置。

这同样适用于 M2_HOME 目录，它指向“安装”（或解压缩）MAVEN 的顶级目录。

M2 目录向 maven 应用程序 (mvn) 指定在哪里可以找到所需的 maven 存储库。默认（在 UNIX 上）是 $HOME/.m2，但您可能不希望您的存储库在那里，因此您可以使用 M2 环境变量指定另一个位置，maven 将使用该位置而不是默认位置。

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        