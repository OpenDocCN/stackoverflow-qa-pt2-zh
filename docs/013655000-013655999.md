# StackOverflow 问答 13655000-13655999

# html - HTML CSS 的最佳测试浏览器？

> ID：13655003
> 
> 赞同：0
> 
> 时间：2012-12-01T00:10:17.460
> 
> 标签：html, css, testing, browser

我正在做一个项目，这是一个网站，我的计划是*在 notepad++ 中编写每个 html、css、javascript，一直检查 google chrome 中的所有内容，当我完成后，我将从*IE 开始测试（这是最困难）和其他已知浏览器，我将纠正任何问题（使用已知方法）。

我的问题是：您认为哪个浏览器最适合这项工作？哪个与其他最兼容，**所以在完成我的网站并为其他人更正之后我不需要做太多工作**？简而言之，哪个浏览器最适合**跨浏览器测试**？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T00:13:55.747

I would sudgest using Mozilla Firefox for playing with HTML / CSS. One great thing it has is the FIREBUG add-on, which can be more tnah usefull while building your website. Check it out on [https://addons.mozilla.org/en-US/firefox/addon/firebug/](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:15:33.133

You're doing it wrong - it's far easier to fix cross-browser issues as they occur, rather than have to tear through a complex project for a minor issue.

IE6 and IE7 can be safely discounted - as no-one uses them anymore. IE8 is the latest first-party browser for Windows XP and should be tested - it doesn't have any layout bugs, but doesn't support many CSS3 features like rounded-corners - so you might want a fallback stylesheet.

Firefox and Chrome are both very bug-free and have excellent CSS3 support, but have different styling defaults, so I strongly suggest using reset.css: [http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/) as this irons out any potential issues.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T00:18:07.347

I suggest Chrome.

1) It's the most popular browser.

2) It's got excellent developer tools.

3) It's webkit so you've also pretty much got Safari covered as well and webkit is also the foundation of most mobile browsers out there (Android/iOS).

IE 10 and Firefox are very similar to what Chrome will show as they're modern browsers. Then you're left with IE8, which I argue these days it's best not to worry about making it look perfect, just make it look good enough. Consider asking yourself what "support" means. I argue supporting an old browser means the site works, not that the experience is the same as Chrome.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-01T00:31:08.880

就我个人而言，我会推荐 Firefox——我发现 firebug 非常宝贵（我一直无法与 Chrome 的开发工具相处融洽）并且它占据了相当高的市场份额。

也就是说，如果你觉得 Chrome 的开发工具不错，使用 Chrome 可能会更好（正如已经说过的，这涵盖了 Chrome + Safari，大约 35-40% 的浏览器份额）

真的，这取决于个人喜好，两个都试一下，看看你喜欢哪个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-01T03:11:18.187

作为 Web 开发人员，您必须能够查看您的网站/页面并轻松调试它。因此，使用[Chrome](https://www.google.com/intl/en/chrome/browser/)是您最好的选择。
1\. 内置开发工具。
2\. 网络套件。Safari 也大多支持此功能。
3\. 一个很棒的浏览器。您可以制作所有花哨的 css3 东西并进行测试。如果你喜欢它，你最终可以使用 javascript/jQuery 将它们添加到其他浏览器。

4\. 许多许多扩展。尽管 Firefox 上的有用的数量几乎相同，但 Chrome 是 IMO 最好和最受支持的。
我的插件列表：
- Chrome Sniffer - 显示网站正在使用的框架......非常适合浏览网络时的好奇心。
- 云保存 - 让您将文件从网站保存到您选择的云服务中......也非常适合网络创意/资源浏览。
- Code Cola - 直接在您的网页上编辑一个部分以进行测试...类似于 Chrome 开发工具，但更直接。
- 滴管 - 必须...让您从网页中挑选颜色并找到它们的各种颜色代码。
- IE 标签 - 如果您有 Windows，这是一个很棒的工具，因此您可以在 Chrome 中查看 IE 视图。
- IPCV（图像属性上下文查看器） - 查看图像值等。
- Measureit - 查找对象/类/等的尺寸。
- 调色板 - 单击图像并从中生成调色板。
- 分辨率测试 - 必须...检查您的网站在各种浏览器尺寸上的显示方式。
- 会话管理器 - 保存您的所有标签以用于另一个 Chrome 会话。
- Web 开发人员 - 它几乎可以完成 Web 开发人员需要知道/测试的任何事情。
- WhatFont - 找出网站使用的字体。

Chrome 有我的特点……希望对您有所帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T02:57:37.060

IE 最适合测试。与任何其他浏览器相比，您可以在这里轻松解决您的设计问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-01T00:31:55.687

为什么要选一个？如果您包含[live.js](http://livejs.com/)并使用本地运行的[Web 服务器](http://httpd.apache.org/)进行开发，然后在您正在测试的所有浏览器上打开您的页面，那么 live.js 代码将在您每次保存 CSS、HTML 或 JavaScript 时自动刷新页面文件。您只需将这行 JavaScript 添加到页面顶部：

```
<script type="text/javascript" src="http://livejs.com/live.js"></script> 
```

还可以查看[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)，它可以让您在单台 PC 上运行多个 IE 渲染引擎（测试 IE5、6、7、8 和 9（都在同一台计算机上）的好方法）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-01T00:15:14.780

I recommend downloading Visual Web Developer 2010 Express (which is free), coding it there and checking you work with Chrome developer tools or Firefox firebug. In my opinion they are the best dev tools out there. Coding with Visual Web Developer express will be much easier as it has Intellisense built in and will save you lots of time. If you want to check your code for validation, use the W3C markup validator.

# php - PHP内连接，当一个表有多个输出时使用foreach循环

> ID：13655013
> 
> 赞同：3
> 
> 时间：2012-12-01T00:12:20.367
> 
> 标签：php, mysql, pdo

我有一种情况，我有几个表，我通过 INNER JOIN 从中提取。存在一对多的关系，主表中每个公园都有一条线，但照片表可能有一些公园的多条线。我的代码的工作原理是为每个公园显示一张照片，但我只能显示一张。我怀疑问题出在 foreach 循环中，但我有点难过。这是代码：

```
try
{
    $sql = 'SELECT parks.id, parks.state, parks.name, parks.description, parks.site, parks.sname, parks.street, parks.city, parks.zip, parks.phone, comments.comment, comments.commentname, events.event, events.date, events.description2, photos.parkid, photos.type, photos.filename, photos.big FROM parks
            INNER JOIN comments INNER JOIN photos INNER JOIN events ON parks.parkid = comments.parkid and parks.parkid = photos.parkid and parks.parkid = events.parkid
            GROUP BY parks.id
            ORDER BY parks.name asc';
    $result = $pdo->query($sql);
}

catch (PDOException $e)
{
    $error = 'Error fetching data: ' . $e->getMessage();
    include 'output.html.php';
    exit();
}

//This is pulling the information from the database for display. On the foreach it will display each
//line until there are no more lines to display.    
foreach ($result as $row)
{
    $datas[] = array ('id' =>$row['id'],
                'parkid' =>$row['parkid'],
                'state' =>$row['state'], 
                'name' =>$row['name'], 
                'description' =>$row['description'], 
                'site' =>$row['site'], 
                'sname' =>$row['sname'],
                'street' =>$row['street'], 
                'city' =>$row['city'], 
                'phone' =>$row['phone'],
                'zip' =>$row['zip'],
                'commentname' =>$row['commentname'],
                'comment' =>$row['comment'],
                'event' =>$row['event'],
                'date' =>$row['date'],
                'description2' =>$row['description2'],
                'type' =>$row['type'],
                'filename' =>$row['filename'],
                'big' =>$row['big']);
}    
include 'writing.html.php'; 
```

和

```
<?php    
foreach ($datas as $name)
{
    if ($name['state'] === 'PA') 
    {
?>  
        <a href="#header" title="return to the top of the page">Back to top</a>
        <input type="hidden" name="id" value="' . $name['id'] . '" />
        <h1 id="name"> <?php echo ($name['name']) ?> </h1>
        <p id="descriptionlist">
            <?php echo ($name['description']) ?>
            <br />
            <ul id="link">
                <li class="l1">
                    <a href=<?php echo $name['site'] ?> target="_blank"> <?php echo $name['sname'] ?> </a>
                </li>
            </ul>
        </p>

        <h2>Location</h2>
        <div class = "loc"> 
            <p class="loct">
                <a class = "fancyImg" href="maps/<?php echo $name['id'] ?>state.gif"> <img src= "maps/<?php echo $name['id'] ?>state.gif"> </a>
                <br />
                <php echo ($name['street']) . ?>
                <br />
                <?php echo ($name['city']) .  
                    ($name['state']) .
                    ($name['zip']) ?>
                <br>
                <?php echo ($name['phone']) ?> 
                <br> <br>
            </p>
        </div>

        <h2>Trail Map</h2>
        <div class = "map">
            <p class = "mapt"> 
                Click to Enlarge
                <a class ="fancyImg" href= "/maps/<?php echo $name['id'] ?>maplink.gif">
                    <img src= "/maps/<?php echo $name['id'] ?>.gif"></a> <br> <br> 
            </p>
        </div>

        <h2>Photos</h2>
        <div class = "pho">
            <p class = "phot">
                <a class = "fancyImg" href= "/assets/indiv/<?php echo $name['big'] ?>.gif"> 
                    <img src= "<?php echo $name['filename'] ?>.gif"></a>**
                Submit <i>your</i> photos of <?php echo ($name['name']) ?> through our <ul id = "link"><li><a href="https://www.facebook.com/Ride4Wheel">Facebook Page!</li></ul></a></h3><p> Or go to our Contact Us page for information on how to e-mail us your favorite pictures! 
            </p>
        </div> 
```

手头的问题在此处末尾的 pho div 中。我希望 $name['big'] 能给我这个循环的所有项目，但它只给了我第一个。我在这里缺少一些基本的东西。

链接是[http://www.ride4wheel.com/new_ma.php](http://www.ride4wheel.com/new_ma.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:28:06.900

除了您的查询具有一对多关系这一事实之外，关系数据库结果将始终作为行返回，我认为在您的情况下，您将不得不使用您的唯一 ID 再次循环并为“大”字段寻找不同的值。

我也不认为你需要`foreach`循环来使你的结果像关联数组，你可能需要使用它来代替：[PDOStatement::fetchAll](http://www.php.net/manual/en/pdostatement.fetchall.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:33:40.767

问题出在您的查询中。您`INNER JOIN`的照片将为所有照片创建一行，并且为每个分配的照片重复公园。再次区分公园，`GROUP BY`但强制 MySQL 选择分配的照片之一。

如果公园没有图片，它根本不会在列表中（`INNNER JOIN`= 给我所有在两个表中都有关系的东西）

您可以删除`GROUP BY`并替换`INNER JOINs`by `LEFT JOINs`（给我所有公园并附上图像和评论，如果有的话），这需要在输出循环中检查（我当前的公园是什么，我是否已经显示了这个公园，显示当前图片，显示当前评论）

~~更干净~~但更慢的解决方案是删除用于获取图像和评论的连接和字段，这样你就只能得到公园；然后在 parks 循环中获取评论并在两个额外的查询中获取当前公园的图像。

**编辑1：**

就像评论中所说的那样，这不是一个很好的选择，因为您将触发两个额外的查询并为您添加的每个公园再运行两个循环。我希望您了解多对多关系的基本问题 - 数据库结果只能是二维表

**编辑2：**

我已将您的代码修复为我建议的内容，请注意

```
<?php
try
{
    $sql = 'SELECT 
                parks.id, 
                parks.state, 
                parks.name, 
                parks.description, 
                parks.site, 
                parks.sname, 
                parks.street, 
                parks.city, 
                parks.zip, 
                parks.phone, 
                comments.comment, 
                comments.commentname, 
                events.event, 
                events.date, 
                events.description2,                
                photos.type, 
                photos.filename, 
                photos.big 
            FROM 
                parks
                    LEFT JOIN comments ON comments.parkid = parks.id
                    LEFT JOIN photos ON photos.parkid = parks.id
                    LEFT JOIN events ON events.parkid = parks.id
            ORDER BY 
                parks.name ASC';
    $result = $pdo->query($sql);
}
catch (PDOException $e)
{
    $error = 'Error fetching data: ' . $e->getMessage();
    include 'output.html.php';
    exit();
}

//This is pulling the information from the database for display. On the foreach it will display each
//line until there are no more lines to display.    
$datas = array();

foreach ( $result as $row )
{
        // we didn't add this park yet
        if ( !array_key_exists( $row['id'], $datas )
        {
            $datas[$row['id']] = array (
                'id' => $row['id'],                
                'state' => $row['state'], 
                'name' => $row['name'], 
                'description' => $row['description'], 
                'site' => $row['site'], 
                'sname' => $row['sname'],
                'street' => $row['street'], 
                'city' => $row['city'], 
                'phone' => $row['phone'],
                'zip' => $row['zip'],
                'comments' => array(),
                'photos' => array(),
                'events' => array()
            );
        }

        // if there is no comment for this park, this will be null
        if ( $row['comment'] )
        {
            $datas[$row['id']]['comments'][] = array (
                'comment' => $row['comment'],
                'commentname' => $row['commentname']
            );
        }

        // same for photos
        if ( $row['filename'] )
        {
            $datas[$row['id']]['photos'][] = array (                
                'type' => $row['type']
                'filename' => $row['filename']
                'big' => $row['big']
            );
        }

        // same for events
        if ( $row['event'] )
        {
            $datas[$row['id']]['events'][] = array (
                'event' => $row['event'],
                'date' => $row['date'],
                'description2' => $row['description2']
            );
        }
}

include 'writing.html.php'; 
```

和写作.html.php

```
<?php    
foreach ($datas as $park)
{
    // do you only want to display PA? 
    // then add " WHERE state = 'PA' " to your query
    if ($park['state'] === 'PA') 
    {
?>  
        <a href="#header" title="return to the top of the page">Back to top</a>
        <input type="hidden" name="id" value="' . $park['id'] . '" />
        <h1 id="name"> <?php echo ($park['name']) ?> </h1>
        <p id="descriptionlist">
            <?php echo ($park['description']) ?>
            <br />
            <ul id="link">
                <li class="l1">
                    <a href=<?php echo $park['site'] ?> target="_blank"> <?php echo $park['sname'] ?> </a>
                </li>
            </ul>
        </p>

        <h2>Location</h2>
        <div class = "loc"> 
            <p class="loct">
                <a class = "fancyImg" href="maps/<?php echo $park['id'] ?>state.gif"> <img src= "maps/<?php echo $park['id'] ?>state.gif"> </a>
                <br />
                <php echo ($park['street']) . ?>
                <br />
                <?php echo ($park['city']) .  
                    ($park['state']) .
                    ($park['zip']) ?>
                <br>
                <?php echo ($park['phone']) ?> 
                <br> <br>
            </p>
        </div>

        <h2>Trail Map</h2>
        <div class = "map">
            <p class = "mapt"> 
                Click to Enlarge
                <a class ="fancyImg" href= "/maps/<?php echo $park['id'] ?>maplink.gif">
                    <img src= "/maps/<?php echo $park['id'] ?>.gif"></a> <br> <br> 
            </p>
        </div>
        <?php if ( !empty( $park['photos'] ) ): ?>
        <h2>Photos</h2>
            <?php foreach( $park['photos'] as $photo ): ?>
                <div class = "pho">
                    <p class = "phot">
                        <a class = "fancyImg" href= "/assets/indiv/<?php echo $photo['big'] ?>.gif"> 
                            <img src= "<?php echo $photo['filename'] ?>.gif"></a>**
                        Submit <i>your</i> photos of <?php echo ($photo['name']) ?> through our <ul id = "link"><li><a href="https://www.facebook.com/Ride4Wheel">Facebook Page!</li></ul></a></h3><p> Or go to our Contact Us page for information on how to e-mail us your favorite pictures! 
                    </p>
                </div>
            <?php endforeach; ?>
        <?php endif; ?>

        <?php if ( !empty( $park['comments'] ) ): ?>
            <h2>Comments</h2>
            <?php foreach( $park['comments'] as $comment ): ?>
                <?php echo $comment['comment']; ?>
            <?php endforeach; ?>
        <?php endif; ?>

        <?php if ( !empty( $park['events'] ) ): ?>
            <h2>Events</h2>
            <?php foreach( $park['events'] as $event ): ?>
                <?php echo $event['event']; ?>
            <?php endforeach; ?>
        <?php endif; ?>
<?php 
    }
} 
```

**编辑 3：**

您需要了解的是，您只能从数据库中返回一个二维结果表。那么，如果您的公园不重复，您将如何为一个公园返回 10 张照片？是的，这（完全）不可能。这就是为什么您必须过滤重复的行，并且只有在您获得公园后才拍摄照片、评论和活动。

在上面的代码中，我使用唯一的公园 ID 作为数组索引，这样我就可以确定这个公园是否已经在数据数组中，然后添加照片、事件和评论。

如果您这样做`print_r( $results )`并将其与此进行比较，`print_r( $datas )`您将了解整个事情

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T00:36:07.620

除非每个公园都至少有一条评论和一张照片，否则您的查询不会返回所有公园的行。这就是`INNER JOIN`工作原理，它只取所有根据您指定的连接条件匹配的行的交集。

如果您想显示所有公园，无论它们是否有评论和/或照片，我建议您[`LEFT JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)改用：

```
SELECT
    parks.id,
    parks.state,
    parks.name,
    parks.description,
    parks.site,
    parks.sname,
    parks.street,
    parks.city,
    parks.zip,
    parks.phone,
    comments.comment,
    comments.commentname,
    events.event,
    events.date,
    events.description2,
    photos.parkid,
    photos.type,
    photos.filename,
    photos.big
FROM
    parks
    LEFT JOIN comments ON (parks.parkid = comments.parkid)
    LEFT JOIN photos ON (parks.parkid = photos.parkid)
    LEFT JOIN events ON (parks.parkid = events.parkid)
ORDER BY
    parks.name asc 
```

**编辑**：

我删除了该`GROUP BY`子句，因为我很确定这不是您想要的；您可能希望查看与公园相关的每张照片或评论，而不是将它们都任意缩减为每个公园的一行。

**编辑**：

使用此查询应该可以解决您在原始查询未返回您期望的评论和照片行时可能遇到的任何问题。您曾说过，这种关系是 1 公园与许多评论和许多照片。此查询应返回与每个公园关联的每条评论和照片，但每个公园将返回多行。您需要调整代码来弥补这一点，可能通过创建一个公园数据数组，其中数组中的每个元素对应于一个公园。每个元素还应包含一组评论和照片，每个公园可能有多个评论和照片。

结果集的每次迭代都应准备好在公园数据数组中创建一个新元素，或者识别当前结果集行对应于您已经开始构建其数据的公园。此外，如果当前迭代中有任何评论或照片，则应将它们添加到当前（新的或现有的）公园的评论和/或照片数组中。`foreach`这是如何执行此操作 的示例循环：

```
$parks = array();

foreach ($result as $row) {
    // Create a new element in $parks because it's not in the $parks array yet
    if (! array_key_exists($row['id'], $parks)) {
        $park = array();
        $park['id'] = $row['id'];
        $park['state'] = $row['state'];
        $park['name'] = $row['name'];
        $park['description'] = $row['description'];
        $park['site'] = $row['site'];
        $park['sname'] = $row['sname'];
        $park['street'] = $row['street'];
        $park['city'] = $row['city'];
        $park['zip'] = $row['zip'];
        $park['phone'] = $row['phone'];

        $park['comments'] = array();
        $park['photos'] = array();

        $parks[$row['id']] = $park;
    } else {
        // Otherwise, this is a park we've already seen
        $park = $parks[$row['id']];
    }

    // If there are comments in this result set row, add them
    if ($row['comment'] || $row['commentname']) {
        $park['comments'][] = array(
            'comment' => $row['comment'],
            'commentname' => $row['commentname']
        );
    }

    // If there are photos in this result set row, add them
    if ($row['type'] || $row['filename'] || $row['big']) {
        $park['photos'][] = array(
            'type' => $row['type'], 
            'filename' => $row['filename'], 
            'big' => $row['big']
        );
    }
} 
```

这段代码不是很漂亮，也不是很好，它当然可以改进。我只是匆匆把它放在一起，给你一个如何建造这样一个结构的例子。

关系数据并不总是清晰地映射到分层对象图，这是[对象关系阻抗不匹配](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T00:33:47.793

要获取一个数组中的所有行而不是第一个 foreach 循环，请尝试使用`<?$datas = $pdo->fetchAll();?>`

# ruby - 在红宝石中，“&block”是做什么的？

> ID：13655014
> 
> 赞同：3
> 
> 时间：2012-12-01T00:12:21.933
> 
> 标签：ruby

> **可能重复：**
> [Ruby 中的 &block 是什么？它是如何在这里通过一个方法的？](https://stackoverflow.com/questions/814739/whats-this-block-in-ruby-and-how-does-it-get-passes-in-a-method-here)

我不明白这`&block`部分，它有什么作用？

这是一个例子：

```
def method_missing(method_name, *args, &block)
  @messages << method_name
  @object.send method_name, *args, &block
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T00:14:02.690

`Blocks`让您有机会声明回调以传递给方法。

这里`&`的关键 - 就像提到的@pst 一样，它将块“提升”到 Proc 并将 Proc 绑定到具有给定名称的变量。

**和** `&`

```
def time(&block)
  puts block
end

time
# => nil
time { foo }
# => #<Proc:0x00029bbc> 
```

**没有** `&`

```
def time(block)
  puts block
end

time { foo }
# => ArgumentError: wrong number of arguments (0 for 1)
# Because & isn't included, the method instead expected an arguement,
# but as a block isn't a arguement an error is returned. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T01:10:28.070

回答“我如何将它传递给另一种方法？” 布赖恩评论：

像这样：

```
def compose init_value, n=2, &b
  if n==0 then init_value else
    b.call( compose init_value, n - 1, &b )
  end
end

compose 2 do |n| n * n end
#=> 16
compose 2, 4 do |n| n * n end
#=> 65536
compose 2, 4 do |n| n * 0.5 end
#=> 0.125 
```

这是一种递归方法，可以多次递归地将同一块应用于一个数字。在这里，打包到`b`参数中的块被调用，但同时它被递归地传递给`compose`方法，而`n`参数减 1。同样，`b`可以传递给任何方法，如`map`, `reduce`, 任何东西。

然而，如果您不需要将块传递给另一个方法，您可以简单地使用`yield`：

```
def apply_block_to_1_2_3
  return yield( 1 ), yield( 2 ), yield( 3 )
end

apply_block_to_1_2_3 { |n| n * n }
#=> [1, 4, 9] 
```

愿原力与你同在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T00:14:19.247

它将块转换为可以传递给另一个方法的 proc 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T00:21:36.250

当您使用块调用方法时，有两种使用该块的方法：

*   调用`yield`内部方法
*   通过添加到它来将其转换为`Proc`对象`&`

使用第二种方法，您可以将其传递给另一种方法。

所以在你的情况下，它将给定的块转换为 a`Proc`并用它调用`method_name`。

把它想象成你可以像任何参数一样传递一个块。

# c++ - 具体的 QPushButton 样式

> ID：13655018
> 
> 赞同：2
> 
> 时间：2012-12-01T00:13:12.247
> 
> 标签：c++, qt, user-interface, qtstylesheets, qpushbutton

如何自定义 QPushButton 或 QToolButton 的外观，使其看起来像elementaryos 的网页“按钮”？

![按钮图像](../Images/c71ec8093af1f2b86a113a92a8f07913.png)

我真正想要的只是特征图像位置和它侧面的文字，也许如果我幸运的话，我也可以得到这样的边框，但我真的不需要标题下面的小描述:) 我能做到吗仅使用 StyleSheets，还是我必须继承 QPushButton/QAbstractButton/类似的东西？我已经到处搜索了，但没有找到那种水平的定制，没有像在*固定*的地方画东西这样的东西，这正是我**不**想要的。

编辑：我真的很想要一个解决方案，它会给我一个可定制的按钮，而不是一个固定的图像，一些在轨道上的东西

```
MainWindowButton(QString(title), /*opt*/QString(description), QImage(icon)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:48:46.983

您可以使用右上角的图标将背景设置为白色，并创造性地使用border-image 样式表属性，其中底部边框与图标一样高，顶部、左侧和右侧边框的宽度为0 像素。您需要制作一个自定义图像，该图像基本上看起来像图标，左侧和顶部有几个像素宽度，是白色的

[http://doc.qt.digia.com/qq/qq20-qss.html#theboxmodel](http://doc.qt.digia.com/qq/qq20-qss.html#theboxmodel)

您可能需要覆盖paintEvent 的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:03:05.073

有许多方法可能有效。

您可能首先考虑尝试使用带有 a 的法线来组合解决`QPushButton`方案`QVBoxLayout`。您可以添加三个`QLabels`; 一个用于标题文本，一个用于标题文本，一个用于图像。一些 CSS 可能用于渲染按钮的背景图像向上和向下，更多 CSS 用于设置两个标签中的文本样式并将图像定位在第三个标签上，但您会发现标签不会向下移动按钮被点击。

我认为最好的解决方案是直接绘画。您可以通过子类 a`QWidget`并覆盖`paintEvent()`. 为 up 状态渲染所有内容，为 down 状态渲染所有内容。

您可以通过将 up 和 down 状态渲染为 a`QImage`并使用 CSS 为 QPushbutton 设置样式来实现这一点，而无需子类化。

这些方法也有许多组合。

# android - OverLay animation in google map

> ID：13655019
> 
> 赞同：1
> 
> 时间：2012-12-01T00:13:42.993
> 
> 标签：android, google-maps, overlay

I'm doing my own `MyLocationOverlay` implementation to bypass extremely slow current position display.

The problem that I've is that I want to make a little `animation` changing the color of the position `marker` and the only way I know to redraw is to call `invalidate` o `MapView`. But that way I also invalidate all the other overlays. Is there an efficient way if only I want to change color and other overlays don't need redraw?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:04:25.770

AFAIK there isn't.

All overlays are drawing to the same object, so to redraw one, it requires clearing everything, and redraw all of them again.

Even if you add another view to the same layout where is `MapView`, changing that view will result in `MapView.invalidate()` being called.

Regards.

# backbone.js - backbone.js doesn't fire click event on DOM element

> ID：13655021
> 
> 赞同：1
> 
> 时间：2012-12-01T00:13:59.793
> 
> 标签：backbone.js

I can't fire the click event on DOM element.

This is my js file: app.js. I'm pretty sure I'm missing something or doing wrong here but I can't figured out where.

```
var App = Backbone.View.extend({

    el: $('body'),

    initialize: function() {
        _.bindAll(this, 'sayHello');
    },

    events: {
        'click .link': 'sayHello'
    },

    sayHello: function(e) {
        alert('Hello!');
    }

});

var app = new App(); 
```

and this is my HTML file: index.htm.

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>

    <script type="text/javascript" src="assets/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="assets/js/underscore-min.js"></script>
    <script type="text/javascript" src="assets/js/backbone-min.js"></script>

    <script type="text/javascript" src="assets/js/app.js"></script>

</head>
<body>

<a href="#" class="link">Click here!</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:40:07.993

诚然，这很棘手。逻辑地思考代码。你的 JS 脚本在你的`head`.

jQuery 选择器`el: $('body')`还不存在。（JavaScript 立即执行）。尝试做`el: 'body'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:58:51.977

您必须在 dom 加载事件上初始化您的视图。

```
var App = Backbone.View.extend({

    initialize: function() {
        _.bindAll(this, 'sayHello'); // you don't need this for your code to work
    },

    events: {
        'click .link': 'sayHello'
    },

    sayHello: function(e) {
        alert('Hello!');
    }

});

$(function(){
  var app = new App({el: $("body")});
}); 
```

# sql - 连接表导致干扰

> ID：13655024
> 
> 赞同：0
> 
> 时间：2012-12-01T00:14:28.580
> 
> 标签：sql, join

我有一个大但有些简单的 SQL 查询。基本上，我网站上的用户会为不同类型的活动建立声誉，例如撰写评论、发表评论以及向我们的数据库添加条目。在大多数情况下，这些点存储在 reputable_actions 表中，我通过重复左连接 reputable_actions 表来检索它们。这感觉很草率，但它主要是有效的。

我遇到的问题是两个声誉，“审稿人”和“社区”。与其他人不同，它们不存储在 reputable_actions 表中。相反，它们的值来自投票表，我首先通过左连接评论表来访问该表。出于某种原因，加入评论表会导致我所有其他的声誉成倍增加。在一次试验中，“档案管理员”的声誉应该是 25，但当我加入评论时，它飙升至 10050。

我是 SQL 的新手，我已经尝试了我所知道的（即，将 GROUP BY 子句应用于 users.id），但我还没有运气。一些指导将不胜感激。

```
SELECT users.*,
  SUM(COALESCE(reviewers.value, 0)) as reviewer,
  SUM(COALESCE(communities.value,0)) as community,
  SUM(COALESCE(developers.value,0)) as developer,
  SUM(COALESCE(moderators.value,0)) as moderator,
  SUM(COALESCE(marketers.value,0)) as marketer,
  SUM(COALESCE(archivists.value,0)) as archivist,
  SUM(COALESCE(karmas.value,0)) as karma
FROM `users`
LEFT JOIN comments AS impressions
  ON impressions.user_id = users.id
  AND impressions.type = 'impression'
LEFT JOIN comments AS replies
  ON replies.user_id = users.id
  AND replies.type = 'reply'
LEFT JOIN votes AS reviewers
  ON reviewers.voteable_type = 'impression'
  AND reviewers.voteable_id = impressions.id
LEFT JOIN votes AS communities
  ON communities.voteable_type = 'reply'
  AND communities.voteable_id = replies.id
LEFT JOIN reputable_actions AS developers
  ON developers.reputation_type = 'developer'
  AND developers.user_id = users.id
LEFT JOIN reputable_actions AS moderators
  ON moderators.reputation_type = 'moderator'
  AND moderators.user_id = users.id
LEFT JOIN reputable_actions AS marketers
  ON marketers.reputation_type = 'marketer'
  AND marketers.user_id = users.id
LEFT JOIN reputable_actions AS archivists
  ON archivists.reputation_type = 'archivist'
  AND archivists.user_id = users.id
LEFT JOIN reputable_actions AS karmas
  ON karmas.reputation_type = 'karma'
  AND karmas.user_id = users.id
GROUP BY users.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:42:29.823

基本上你需要做两个单独的分组，并结合结果。有一个技巧可以避免多次加入，如果您有许多其他可投票类型或声誉类型，它可能不会更快。

```
Select
  u.*,
  Coalesce(r.developer, 0) as developer,
  Coalesce(r.moderator, 0) as moderator,
  Coalesce(r.marketer, 0) as marketer,
  Coalesce(r.archivist, 0) as archivist,
  Coalesce(r.karma, 0) as karma,
  Coalesce(v.impressions, 0) as impressions,
  Coalesce(v.replies, 0) as replies
From
  users u
    Left Outer Join (
    Select
      user_id,
      Sum(Case When reputation_type = 'developer' Then value Else 0 End) as developer,
      Sum(Case When reputation_type = 'moderator' Then value Else 0 End) as moderator,
      Sum(Case When reputation_type = 'marketer' Then value Else 0 End) as marketer,
      Sum(Case When reputation_type = 'archivist' Then value Else 0 End) as archivist,
      Sum(Case When reputation_type = 'karma' Then value Else 0 End) as karma
    From
      reputable_actions
    Group By
      user_id
  ) r On u.id = r.user_id
    Left Outer Join (
    Select
      c.user_id,
      Sum(Case When c.type = 'impression' Then v.value Else 0 End) as impressions,
      Sum(Case When c.type = 'reply' Then v.value Else 0 End) as replies
    From
      comments c
        inner join -- maybe left outer?
      votes v
        on v.voteable_type = c.type And v.voteable_id = c.id
    Group By
      user_id
  ) v On u.id = v.user_id 
```

[示例（没有数据）](http://sqlfiddle.com/#!3/1d8b7/1)。如果您的表格结构与此不同，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T00:45:50.233

有多*行*`comments`和/或与连接的“其余”中的*一行*匹配`votes`。这将结果行“相乘”并将*其他*聚合函数的结果与它相乘（正如您已经指出的那样）。

 **最简单的解决方案是在单独的查询中获取`SUM(reviewers.value)`and 。`SUM(communities.value)`

顺便说一句，如果有不止`reputable_actions`一行（相同的`reputation_type`）匹配同一`users`行，您将遇到同样的问题。**

# php - Setting display_error PHP configuration in .htaccess

> ID：13655027
> 
> 赞同：0
> 
> 时间：2012-12-01T00:15:05.893
> 
> 标签：php, .htaccess

I'm trying to disable display_errors from `.htaccess`, but if I just paste this into the `.htaccess` file, the entire site crashes:

```
php_flag display_errors off
php_flag log_errors on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:20:43.097

这仅在 php 被编译为 apache 模块并且您有权更改它们时才有效。

如果您使用的是 php >= 5.3，则有更好的解决方案：`.user.ini`在文档根目录中创建文件并使用普通的 ini 语法来自定义您的配置。

# php - PHP - Run Two Mysql Queries That Use "SELECT" Through a Drop-down Menu

> ID：13655029
> 
> 赞同：-2
> 
> 时间：2012-12-01T00:15:20.717
> 
> 标签：php, mysql, select, drop-down-menu

Basically, I have a drop-down menu that has two options - 'All' & 'Top Rated'.

```
<select class="dropdown">
<option value="all">All</option>
<option> value="toprated">Top Rated</option>
</select> 
```

I want to run this query through the 'All' option...

```
$myQuery  = "SELECT Attraction.*, Type.TypeName, Rating.RatingUrl ";
$myQuery .= "FROM Attraction ";
$myQuery .= "INNER JOIN Type ON Attraction.Type = Type.TypeID ";
$myQuery .= "INNER JOIN Rating ON Attraction.AttractionID = Rating.AttractionID ";
$myQuery .= "WHERE Attraction.Type = 4 ";
$myQuery .= "ORDER BY Name ";

$result = mysql_query($myQuery);
if (!$result) {
    die('Query error: ' . mysql_error());
} 
```

And the this query through the 'Top Rated' option...

```
$myQuery  = "SELECT Attraction.*, Type.TypeName, Rating.RatingUrl ";
$myQuery .= "FROM Attraction ";
$myQuery .= "INNER JOIN Type ON Attraction.Type = Type.TypeID ";
$myQuery .= "INNER JOIN Rating ON Attraction.AttractionID = Rating.AttractionID ";
$myQuery .= "ORDER BY Rating DESC, Name ";

$result = mysql_query($myQuery);
if (!$result) {
    die('Query error: ' . mysql_error());
} 
```

Can anyone generate the php structure I would need for this to work...

If anyone can help that would be great!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:33:38.187

我推荐这个[PHP 教程](http://www.w3schools.com/php/default.asp)和这个[mysqli](http://www.php.net/manual/en/class.mysqli.php)阅读

另外，请查看 WebChemist 所说的：

不好：

```
<option> value="toprated">Top Rated</option> 
```

好的：

```
<option value="toprated">Top Rated</option> 
```

# php - sqlsrv_fetch_array function very slow on single row

> ID：13655030
> 
> 赞同：1
> 
> 时间：2012-12-01T00:15:21.470
> 
> 标签：php, sql-server, performance

For some reason, any call I make to sqlsrv_fetch_array is super slow. Usually right around 18 seconds.

I can do something as simple as:

```
$query = "SELECT * FROM Books WHERE ID = 121";
$rows = sqlsrv_query($connection,$query);
$row = sqlsrv_fetch_array($rows); 
```

The query is quick, but the sqlsrv_fetch_array() takes about 18 seconds. The row has probably 50 columns, but doesn't seem like that should effect it too much.

I also tried sqlsrv_fetch_object() but that too took 18 seconds or so.

Any idea what could be causing this?

# objective-c - Multidimensional array object for table view cell selected

> ID：13655031
> 
> 赞同：0
> 
> 时间：2012-12-01T00:15:25.310
> 
> 标签：objective-c, arrays, dictionary, multidimensional-array

I have a dictionary of arrays, and each of these arrays has a number of arrays itself. Its a multidimensional array in a dictionary.

When I click on a UItable row, I push the view to another class, however I want to push along with the view, the array whose object key is the same as the row name that was clicked.

My code is as follows (The class that does the pushing)

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
// Navigation logic -- create and push a new view controller

if(dvController == nil) 
dvController = [self.storyboard instantiateViewControllerWithIdentifier:@"FoodCategoryView"];

//NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
//NSMutableDictionary *keysAndObjects = [defaults objectForKey:@"keysAndObjects"];

Food *foodObj;

/*for (id key in [keysAndObjects allKeys]) {
    NSArray *foodArray = [keysAndObjects objectForKey:key];        
     foodObj = [foodArray objectAtIndex:indexPath.row];    
}*/

/*for (id key in [keysAndObjects allKeys]) {
    NSArray *foodArray = [keysAndObjects objectForKey:key];  
    for (Food *food in foodArray) {
        // do stuff with Food object
        //NSLog(@"%@", food.foodName);
    }
}*/

NSMutableArray *objects2   = [[NSMutableArray alloc] init];
NSMutableArray *objects1   = [[NSMutableArray alloc] init];
objects1 = [objects objectAtIndex:indexPath.row];  
objects2 = [objects1 objectAtIndex:indexPath.row];   
foodObj = objects2;

//NSLog(@"Object %@", [objects objectAtIndex:indexPath.row]);
NSLog(@"foodObj %@", foodObj);

//Get the detail view data if it does not exists.
//We only load the data we initially want and keep on loading as we need.
//[foodObj hydrateDetailViewData];

dvController.foodObj = foodObj;

[self.navigationController pushViewController:dvController animated:YES];

} 
```

(the class that the view is pushed to)

```
- (UITableViewCell *)tableView:(UITableView *)tblView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];
}

/*for (Food *food in foodObj) {
    // do stuff with Food object
    NSLog(@"%@", food.foodName);
    cell.text = food.foodName;
}*/

//Food *food = [foodObj objectAtIndex:indexPath.row];
//cell.text = [foodObj objectAtIndex:indexPath.row];
cell.text = foodObj.foodName;
NSLog(@"%@", foodObj.foodName);

return cell;
} 
```

As you can see there are lots of comments as I have tried lots of different ways to do it myself.

# api - 在给定类别中获取亚马逊最畅销产品的最佳方式

> ID：13655036
> 
> 赞同：6
> 
> 时间：2012-12-01T00:15:54.537
> 
> 标签：api, amazon-web-services, amazon

我正在寻找给定类别中亚马逊的前 1000 种（或尽可能多的）畅销产品。在扫描了[亚马逊产品广告 API 文档](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/Welcome.html)并阅读了几个关于类似主题的问题（即[亚马逊 ECS API 以获取 1000 本畅销书](https://stackoverflow.com/questions/6931144/amazon-ecs-api-to-fetch-1000-top-selling-books)和[https://forums.aws.amazon.com/thread.jspa?threadID=98920](https://forums.aws.amazon.com/thread.jspa?threadID=98920)） ，我仍然不确定是否应该使用产品广告 API、从 RSS 提要读取或构建自己的抓取工具来获取此信息。重申一下，如果可能的话，我希望获取的不仅仅是前 10 名产品（即使它需要多个请求）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T18:28:27.387

我的问题在[这个线程](https://forums.aws.amazon.com/thread.jspa?threadID=111109)中得到了回答。

# scripting - copy C:\Dire\*.bak /d:%date% C:\Dire\D2\*.bak - Not working, has before somehow

> ID：13655040
> 
> 赞同：0
> 
> 时间：2012-12-01T00:16:42.493
> 
> 标签：scripting, batch-file

I tried

copy C:\Dirname*.txt /d:%date% C:\Dirname\Dirtwo*.txt

to move a file from a directory to it's sub-directory, but only a file that was created TODAY.

and I got it to work once, I don't remember the way I worded it and i've fooled with this for a little bit. any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:43:41.520

对 /d 等选项使用“xcopy”

# uipopovercontroller - Popover between view controllers and cancel button

> ID：13655047
> 
> 赞同：0
> 
> 时间：2012-12-01T00:17:54.040
> 
> 标签：uipopovercontroller, modalviewcontroller, presentmodalviewcontroller

I have two tableviews, let´s say one and two, and one presents two when a textfield is tapped, and for this i have:

```
-(void) setProducts:(UITextField *) box
{
UIViewController *selectInBox = [self.storyboard instantiateViewControllerWithIdentifier:@"selectingProducts"];
popover = [[UIPopoverController alloc] initWithContentViewController:selectInBox];
[popover presentPopoverFromRect:box.bounds inView:box permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
}

-(BOOL)textFieldShouldBeginEditing:(UITextField *) textField
{
if (textField.tag == 2)
{
    [self setProducts:textField];

} 
```

Everything works great until know, table "two" appears inside the popover and underneath the textfield, but table "two" has a cancel button that it is supposed to dismiss tableview "two"(inside tableview "one"). So i went to my cancel method in tableview "two" and i did this but it isn´t working and i don't think it can be simple has this:

```
- (IBAction)cancel:(id)sender
{
[self removeFromParentViewController];
} 
```

I also tried:

```
- (IBAction)cancel:(id)sender
{
 one *aux = [[one alloc]init];
 [aux.popover dismissPopoverAnimated:YES] //popover is a property of tableview one.  
} 
```

also tried: "if self isBeingPresented"...and nothing is working!.

Any ideas? help!

thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:04:42.280

我已经非常成功地使用了以表单形式（模态）呈现的“弹出框”。

```
- (IBAction)cancelButtonTapped:(id)sender
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

dismissPopoverAnimated:YES... 应该从呈现视图控制器调用。

# gnuplot - 在 gnuplot 标题中显示下划线而不是下标

> ID：13655048
> 
> 赞同：31
> 
> 时间：2012-12-01T00:17:55.040
> 
> 标签：gnuplot

**简短的问题**：如何`_`在 gnuplot 的标题中显示（下划线）字符，该字符是从 gnuplot 中的变量名分配的？

**详细信息**：我有类似以下代码：

```
items = "foo_abc foo_bcd bar_def"
do for [item in items] {
  set title item
  set output item.eps
  plot item."-input.txt" using 1:2 title item with linespoints
} 
```

这适用于 gnuplot，只是标题从 foo_abc 更改为 foo [a] bc。我不知道是否要使用转义字符，因为我不希望它出现在文件名中。我用单引号和双引号尝试了几个不同的选项，但我还没有找到我需要的。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2017-04-26T09:19:08.177

而不是`foo_abc`，写`foo\\\_abc`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-01T02:44:01.423

大多数生成标签的 gnuplot 命令都接受一个`noenhanced`关键字，该关键字将阻止 gnuplot 仅对该字符串使用增强文本。在这种情况下，只需执行以下操作就足够了：

```
set title item noenhanced 
```

另一种方法是创建一个函数，该函数将在将字符串传递给时从字符串中删除不需要的文本`set output`：

```
remove(x,s)=(i0=strstrt(s,x),i0 ? remove(x,s[:i0-1].s[i0+strlen(x):]):s)
# Makes me wish gnuplot syntax was more pythonic :-p
#TODO:  Write a `replace` function :-).  These just might go into my ".gnuplot" file... 
```

我使用内联函数来查找`x`字符串中第一次出现的索引`s`。然后，我通过字符串连接和切片删除该事件，并再次递归调用该函数以删除下一个事件。如果找不到索引（`strstrt`返回 0），那么我们只返回放入的字符串。现在你可以这样做：

```
set output remove('\',item)
set title item 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-04-27T02:05:19.833

下划线来自将标题视为“增强文本”。使用关闭它

设置键 noenhanced

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-12-01T01:08:47.340

如果您使用的是增强的 eps 终端，这就是您首先需要转义下划线的原因。今天还有[另一个相关的问题](https://stackoverflow.com/questions/13631006/how-is-produced-in-gnuplot/13633472#13633472)，稍微解释了这个问题。设置终端时，请尝试：

```
set terminal postscript noenhanced <whatever else here...> 
```

这对我有用（Arch linux，gnuplot 4.7.0）。如果增强终端是必不可少的，下面是我找到的部分解决方案。假设是下划线总是出现在字符串中的相同位置。

```
set terminal postscript enhanced
items = 'foo\_abc foo\_bcd bar\_def'
do for [item in items] {
  set output item[1:3].item[5:*].'.eps'
  set title item
  plot sin(x)
} 
```

这样，您可以转义下划线，并且文件名中不会出现 \。注意 'items' 字符串使用单引号；有关详细信息，请参阅先前链接的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-30T08:01:46.257

我对标题中的下划线也有同样的问题：比如我需要写4_3子帧，我需要增强的后记。最简单的方法原来来自相邻的帖子：``如果您使用的是增强的 eps 终端，这就是您首先需要转义下划线的原因。今天还有另一个相关的问题，稍微解释了这个问题。” - [gnuplot 中的@是如何产生的？](https://stackoverflow.com/questions/13631006/how-is-produced-in-gnuplot/13633472#13633472) 所以，我听从了他们的建议，这很有效：

> plot 'LC.stats' u 3:4 ti "{/=15 1350 stars in C18 4\_3 subframe}" - 下划线前的双转义字符。

# wso2 - WSO2 Governance Registry - 创建注册表扩展文件 (RXT) 时出错

> ID：13655050
> 
> 赞同：0
> 
> 时间：2012-12-01T00:18:03.757
> 
> 标签：wso2

```
When I am trying to upload the registry extension file (RXT) as Add resource - Create text content, I am getting the following error 
```

无法将具有基于文本的内容的资源添加到路径 /_system/governance/repository/components/org.w so2.carbon.governance/types/myuri.rxt。执行处理程序链时发生异常。java.lang.String 不能转换为 [B

```
I even tried to copy the same contents from an exisitng RXT for API or URI and tried to upload it and got the same error

I also referred to the Issue Tracker sample around creating extensions, still got the same error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:14:45.543

尝试通过管理控制台上传 RXT 文件时是否收到此错误？如果是这样，请尝试将 RXT 文件添加到以下位置：G-Reg_home/repository/resources/rxts

# facebook - 如何在游戏前显示facebook请求对话框

> ID：13655055
> 
> 赞同：1
> 
> 时间：2012-12-01T00:18:36.630
> 
> 标签：facebook, dialog, request, unity3d

我在 Facebook 上有一个 Unity 游戏，当我在游戏中单击发送请求按钮时，请求对话框卡在游戏后面。

![在此处输入图像描述](../Images/65b1fa55140aba2ec6d4de0e2005307a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:38:23.627

我对 Facebook 游戏或 Unity 没有任何经验，但在我看来，Unity 框架总是呈现在其他一切之上，至少在 Google Chrome 中是这样。如果可能的话，也许一个适当的解决方案是隐藏 Unity 框架？两年前 Unity3D 的[这个线程](http://forum.unity3d.com/threads/30374-Unity3D-rendering-compatibility-with-Facebook)也解决了同样的问题。希望能帮助到你。

# android - Android: Custom font for XML in AppWidgetProvider

> ID：13655057
> 
> 赞同：0
> 
> 时间：2012-12-01T00:18:42.450
> 
> 标签：android, xml, layout, fonts, android-appwidget

I am trying to use a custom font for my app, and have the XML layout use this custom font. I followed the instructions listed [here](https://stackoverflow.com/questions/2376250/custom-fonts-and-xml-layouts-android), but the problem is that I get the following crash:

```
W/AppWidgetHostView(  519): updateAppWidget couldn't find any view, using error view
W/AppWidgetHostView(  519): android.view.InflateException: Binary XML file line #63: Error inflating class com.example.RobotoTextView 
```

Because this is running inside an AppWidgetProvider, I wonder if it is going to work. Maybe there is a work around (except going through each widget ID and changing the typeface in Java) please. Any clue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:17:37.797

App Widget 布局基于`RemoteViews`，不支持所有类型的布局或视图小部件。它们确实支持一些 Android 小部件，包括`TextView`. 但是，不支持这些类的后代。（参考：http: [//developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)）

相反，您可能想试试这个：[Problemshowing time using custom font](https://stackoverflow.com/questions/4377668/problem-showing-time-using-custom-font)

# ruby-on-rails - 从视图向模型提交表单信息，然后调用模型运行

> ID：13655059
> 
> 赞同：0
> 
> 时间：2012-12-01T00:19:06.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试从我视图中的表单提交信息，该表单将提交的信息 :hashtag 传递到模型中，然后使用该信息运行模型。但似乎这就是我的模型只是使用“hashtag”而不是表单信息来运行。我相信它很接近。我只是不知道下一步该去哪里。

**主页.html.erb**

```
 <div class="row">
      <div class="span6 offset2">

                <%= form_for :hashtag do |f| %>
                <div class="input-prepend input-append">
                <span class="add-on swag">#</span>

                <%= f.text_field :hashtag , class: "span3 inverse", id:"appendedPrependedInput" %>

                <%= f.submit "Swag!", class: "btn btn-inverse" %>
                <% end %>

        </div>
      </div>
      <div class="span4">
        <div id="hashtags">
            <% @random_hashtags.each do |hashtag| %>
            <blockquote><%= hashtag.content %></blockquote>
            <div class="from">&mdash; @<%= hashtag.screen_name %></div>
        <% end %>
        </div>
    </div>
</div> 
```

**标签.rb**

```
class Hashtag < ActiveRecord::Base
  attr_accessible :content, :profile_image, :screen_name, :tweet_date, :tweet_id

  def self.pull_hashtag
  Twitter.search("%#{hashtag}").results.map do |tweet|
    unless exists?(tweet_id: tweet.id)
        create!(
            tweet_id: tweet.id,
            content: tweet.text,
            profile_image: tweet.profile_image_url,
            screen_name: tweet.from_user,
            tweet_date: tweet.created_at
            )   
        end     
    end
  end
end 
```

**hashtags_controller**

```
 class HashtagsController < ApplicationController

    def home 
        @random_hashtags = Hashtag.order("RANDOM()").limit(4)
    end

    def create
        @hashtag = Hashtag.pull_hashtag(params[:search])
    end         
end 
```

**更新了我现在正在使用的代码，因为我没有向模型发布任何内容**

**虽然它正在提交，但从那里似乎什么都没有。**

更新 2，

我正在尝试通过从表单中获取信息、在其上运行 Twitter.search 并在我的数据库中创建结果来将信息发布到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:02:26.367

你能试着用这个代替吗？

```
form_for @hashtag, :url => :action => 'home' 
```

我的猜测是需要指定操作。

# java - Javamail API - 您如何将 setFrom 更改为您想要的任何内容？

> ID：13655063
> 
> 赞同：8
> 
> 时间：2012-12-01T00:20:05.583
> 
> 标签：java, jakarta-mail

如何将 setFrom() 方法更改为我想要的任何方法？我可以通过我的 gmail 帐户发送电子邮件并更改 setFrom 文本，但它会显示我`username`的电子邮件。我也尝试过使用我的雅虎帐户，但出现身份验证错误。

我想更改发件人地址。代码如下：

```
import java.util.Properties;

import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SendMailTLS {

    public static void main(String[] args) {

        final String username = "username@gmail.com";
        final String password = "password";

        Properties props = new Properties();
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.port", "587");

        Session session = Session.getInstance(props,
            new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(username, password);
                }
            }
        );

        try {

            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("from-email@gmail.com"));
            message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse("to-email@gmail.com"));
            message.setSubject("Testing Subject");
            message.setText("Dear Mail Crawler,"
                + "\n\n No spam to my email, please!");

            Transport.send(message);

            System.out.println("Done");

        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T05:08:45.137

使用“smtp.gmail.com”时遇到同样的问题。使用 Mandrill，它会工作。设置 Mandrill 帐户后，在端口 587 上使用“smtp.mandrillapp.com”。对于身份验证，设置用户名=您的 mandrill 用户名和密码=您帐户中生成的 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:46:18.123

许多信誉良好的 SMTP 中继将不允许您伪造您的身份（这将使垃圾邮件发送者更容易滥用该服务）。也就是说，如果您的目标是避免收件箱中出现更多邮件，[Google 允许您修改您的电子邮件地址](http://gmailblog.blogspot.com/2008/03/2-hidden-ways-to-get-more-from-your.html)，以便您可以过滤对电子邮件的任何回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T14:50:42.117

（假设我了解您的目标并且不是发送垃圾邮件）我们使用的 Apache Commons 库通过调用`setPersonal`. [http://docs.oracle.com/javaee/7/api/javax/mail/internet/InternetAddress.html#setPersonal-java.lang.String-java.lang.String-](http://docs.oracle.com/javaee/7/api/javax/mail/internet/InternetAddress.html#setPersonal-java.lang.String-java.lang.String-)`InternetAddress`

```
 Message message = new MimeMessage(session);
        InternetAddress me = new InternetAddress("from-email@gmail.com");
        me.setPersonal("My name");
        message.setFrom(me); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-07-30T07:07:52.280

这是完整的代码您可以使用以下代码。这对我来说很好

```
class SendMail {
public static void main(String[] args) {
    System.out.println("In side main()---------------------");

    Properties props = new Properties();

    props.put("mail.smtp.host", "hostname");
    props.put("mail.smtp.port", "port");//

    props.put("mail.smtp.socketFactory.port", "port");
    props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory");

    props.put("mail.smtp.auth", "true");

    Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() {

                protected PasswordAuthentication getPasswordAuthentication() {
                    System.out
                            .println("In side getPasswordAuthentication------------------And Before returning PasswordAuthentication");
                    return new PasswordAuthentication("from@gmail.com",
                            "password");

                }

            });
    System.out
            .println("mail and password has been sent********************");
    try {
        System.out
                .println("we are  in try{} block.................................");
        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress("from@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,
                InternetAddress.parse("to@gmail.com"));
        message.setSubject("Testing Subject");
        message.setText("Dear User," + "\n\n This is testing only!");

        Transport.send(message);

        System.out
                .println("Mail has been sent successfully..........................");

    } catch (MessagingException e) {
        System.out.println("we are in catch block...................");
        e.printStackTrace();

    }
} 
```

}

# internet-explorer - 在虚拟窗口机器上运行的本地版本的网站

> ID：13655064
> 
> 赞同：-1
> 
> 时间：2012-12-01T00:20:25.057
> 
> 标签：internet-explorer, networking, virtual-machine, virtualbox

我是网络方面的新手。

我有我的网站的本地副本在运行，`localhost:8000`但我想使用虚拟机在 IE 7、8、9 上进行测试。

我在我家的另一台 mac mini 上设置了虚拟机和虚拟机（与我的本地副本所在的计算机不同..台式计算机）。

我需要采取哪些步骤才能让我的 macmini 上的浏览​​器在 VM 上显示我在台式计算机上 localhost:8000 运行的网站的副本？

**使用 mac 版本 10.7.4**编辑****

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:00:10.043

*这仅在两台计算机都连接到同一个 LAN 时才有效*

获取主机的私有 IP 地址（参见[说明](http://www.ehow.com/how_2068589_check-macs-ip-addresscheck-macs-ip-address.html)）

在虚拟机上，键入相同的 URL，但将*localhost*替换为主机的专用 IP 地址。

示例：如果主机的私有 IP 地址 = 10.0.1.1，那么在 VM 上使用的 URL 将是*http://10.0.1.1:8000***

# git - git回滚用例

> ID：13655070
> 
> 赞同：1
> 
> 时间：2012-12-01T00:21:45.820
> 
> 标签：git, rollback

我是 git 新手。

我在`A way`.
我想尝试在`B way`.

然后我可能需要一些时间来评估这是否`B way`是一个好主意。
在评估它时，我将修改`other parts`程序。

假设，我决定`B was bad and A was better`，并想回到`A way`。
但我想保留对`other parts`程序的修改。

这可以在git中完成吗？

-编辑-
我正在添加图片以更好地解释我要完成的工作

目前，我在a_way（完成实现A）的末尾，除了我不知道X在哪里​​..

```
 [a_way]
 o---X---a---a---a 
```

我想试试b_way。
从我所在的地方开始，去掉（或注释掉）a_way相关的代码，实现b_way

```
 o---X---a---a---a
                    \
                     remove a_way--implement b_way 
```

我需要一些时间来评估 b_way 的有效性，并将继续开发其他功能。

```
 o---X---a---a---a
                    \
                     remove a_way--implement b_way--develop new features 
```

现在我认为 a_way 比 b_way 更好，并决定回到 a_way。

```
 o---X---a---a---a--------------------------------new features(I wanna end up here)
                    \
                     remove a_way--implement b_way--new features 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:38:23.133

听起来很像你在变基之后。

在 git 中执行此操作的一种方法是有两个分支`a_way`和`b_way`.

当你完成了两种方式的构建后，你将拥有一棵看起来像这样的树

```
 [a_way]
 o---X---a---a---a
      \
        -b---b---b
                 [b_way] 
```

`a`实现 A 方式的提交在哪里`b`，实现 B 的提交在哪里。

现在假设您将分支名称更改为`develop`一旦 a_way 完成并破解一段时间。您的树将如下所示：

```
 [a_way]
 o---X---a---a---a---d1---d2---d3---d4 [develop]
      \
        -b---b---b
                 [b_way] 
```

现在您决定要摆脱`a_way`并改用`b_way`。

```
git rebase --onto b_way a_way develop 
```

会给我：

```
 [a_way]
 o---X---a---a---a
      \
        -b---b---b---d1'---d2'---d3'---d4' [develop]
                 [b_way] 
```

注意：如果开发中有合并，这将使合并变平，我怀疑有一种方法可以保留合并，但我还不需要它。它还会导致提交 ID 发生变化，如果有其他人以此为基础工作，这可能会导致问题。

*附录*

听起来您的存储库如下所示：

```
 [a_way]
 o---X             a---a---a
      \           /
        -b---b---b---d1---d2---d3---d4 [develop]
               [b_way] 
```

如果您希望它以这样的方式结束：

```
 [a_way]
 o---X             a---a---a
      \           /         \
        b---b---b           d1'---d2'---d3'---d4' [develop]
               [b_way] 
```

然后你发出的命令是

```
 git rebase --onto a_way b_way develop 
```

或者在这种情况下，它可以简化为

```
git checkout develop
git rebase a_way 
```

*附录*

所以你的存储库实际上是这样的：

```
 o---X---a---a---a [a_way]
                  \
                    da---da---da---b---b---b---f---f---f [develop]
                            [remove_a]   [b_way] 
```

你想去

```
 o---X---a---a---a---f---f---f [develop]
                    \
                     da---da---da---b---b---b 
```

执行此操作的命令是

```
git rebase --onto a_way b_way develop 
```

如果您在所需位置没有分支，则可以使用提交 SHA。

```
git rebase --onto  a_way 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:40:24.007

你将拥有`A`and`B`在单独的分支中，让我们说`A`and `B`。一旦您决定要保留`A`，您将把它合并回开发分支（通常是`master`, 或`develop`）。

```
git checkout master
git merge A 
```

你摆脱了两个分支`A`和`B`

```
git branch -d `A`
git branch -D `B` 
```

因为`B`没有合并到您的开发分支中并且更改将丢失，您必须使用大写强制删除`D`。

和`other parts`？它们可能已经在我们的开发分支中（如前所述`master`，或`develop`，或其他东西）并且即使在您合并后仍保留在那里`A`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T01:57:18.487

你曾经犯过吗？如果没有，`git stash`可以揭示你在上​​次提交后做了什么，然后你可以尝试另一种方式。当你想要改变时，只需使用`git stash apply`

这是与上面不同的另一种方式，但我确实认为使用分支要好得多，因为您是 git 新手，了解这一点对您来说非常重要:-)

# jquery - 尾声滑块冲突

> ID：13655073
> 
> 赞同：0
> 
> 时间：2012-12-01T00:22:16.720
> 
> 标签：jquery, jquery-ui

我在网站上的所有页面上都使用 jquery coda slider 2.0，它可以正常工作，例如[http://www.virtualmob.co.uk/solutions.html](http://www.virtualmob.co.uk/solutions.html)

但是当我在画廊页面上添加画廊时[http://www.virtualmob.co.uk/gallery.html](http://www.virtualmob.co.uk/gallery.html)

它与 web.js 冲突并在浏览器上给我一个下面提到的错误：

> 未捕获的类型错误：无法调用 null 的方法“removeClass”
> 
> 在行号 jquery.coda-slider-2.0.js:9

我试过**$.noConflict();** 就像我在下面提到的那样，

```
$.noConflict();
$(function(){
// Remove the coda-slider-no-js class from the body
$("body").removeClass("coda-slider-no-js");
// Preloader
$(".coda-slider").children('.panel').hide().end().prepend('<p class="loading">Loading...<br /><img src="images/ajax-loader.gif" alt="loading..." /></p>');
});` 
```

但它仍然不起作用并显示以下错误

```
 Uncaught TypeError: Property '$' of object [object Window] is not a function 
```

我也尝试在 web.js 上添加它，但这也对我没有帮助

**请指导如何消除冲突可以消除？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:28:33.747

您正在使用`$`in `$.noConflict`，如果要避免冲突，请使用`jQuery`关键字而不是 the`$`并将返回值保存在变量中：

```
var $ref = jQuery.noConflict();
$ref(function(){
  // ... 
}) 
```

您还可以将代码放入闭包中：

```
(function($){
    $(function(){
       $('body').foo()
    })
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:42:35.830

对于其他用户，下面提到它解决了：

我使用下面提到的行，就像上面帖子中的指导一样

```
(function($){
    $(function(){
       $('body').foo()
    });
})(jQuery); 
```

然后我移动`$.document.ready`我的html页面上的脚本以将脚本启动到js文件并且它可以工作。:)

# python - Facebook 支付报告——凭证问题

> ID：13655074
> 
> 赞同：1
> 
> 时间：2012-12-01T00:22:39.227
> 
> 标签：python, facebook, urllib2

我在通过 Facebook API 下载报告时遇到了一些问题。

来自文档[https://developers.facebook.com/docs/payments/developer_reports_api/](https://developers.facebook.com/docs/payments/developer_reports_api/)

```
#Example company access_token request

#Sample developer request for a daily detail report:
wget "https://paymentreports.facebook.com/234599349987627/report?
                                      date=2012-05-15&
                                      type=detail&
                                      access_token=234599349987627|aBc_dEFaEUZbqpatkrp8pbtwXyZ"

#The request above would return a file named 234599349987627_detail_2012-05-15.csv.zip. 
```

但是，当我在编写 python 脚本时，使用 urllib2 来获取描述的文件：

```
url = "https://paymentreports.facebook.com/%s/report?date=%s&type=%s&access_token=%s" % (COMPANY_ID, DATE, reporttype, ACCESS_TOKEN)
reportszipped = ZipFile(StringIO(urllib2.urlopen(url).read())) 
```

我收到一个 HTTP 错误： `{"error":{"message":"Access denied.: Access denied due to invalid credentials."}}`

我知道我的`company_id`和`access_token`是正确的，按照文档中描述的说明生成它（没有错误）。wget 相同的 URL 返回相同的 HTTP 错误。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:36:51.817

您是否启用了支付应用程序，因为 facebook 在开发人员页面上声明：

> 在继续之前，您需要确保已启用应用程序进行付款，包括设置公司以接收付款。完成此操作后，您将在公司设置页面上找到您的公司 ID 和密码。

[在此处](http://blog.pythonanywhere.com/35/)查看此页面。

# php - PHP换行符没有正确写入

> ID：13655077
> 
> 赞同：2
> 
> 时间：2012-12-01T00:23:25.627
> 
> 标签：php, file-io, newline

我有一个文件，我必须在 PHP 中读入和修改，所以我读入它，用新行分解它，修改我需要的内容，然后将它重新粘贴在一起，通过`\n`.

但是，它似乎`\r\\n`出于某种原因正在输出它们。任何修改之前的文件都有新的行 \r\n 这似乎工作正常。只有当我通过添加新行时，`\n`它才会进入`\r\\n`.

同样经过阅读，我尝试了换行符`\r\n`而不是 just `\n`，但输出为`\r\\r\\n`. 有什么想法吗？非常感谢！如果您需要查看其他任何内容或需要更多信息，请询问。

添加新行的代码在这里：

```
for($i = 0 ; $i<count($tmp);$i++){
        $tmpstr .= $tmp[$i];
        if(count($tmp)-1 != $i){
            $tmpstr .= '\r\n';
        }
    } 
```

它在除最后一行之外的所有末尾添加换行符，除了错误的字符外，这似乎工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T00:25:53.977

更改`$tmpstr .= '\r\n';`
为：`$tmpstr .= "\r\n" # Use double quotes`;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:27:49.460

你必须使用双引号`"\r\n"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T00:41:18.733

您还可以使用[预定义的常量 PHP_EOL](http://www.php.net/manual/en/reserved.constants.php#constant.php-eol)（行尾）：

```
$tmpstr .= PHP_EOL; 
```

# python - 自动从 Minecraft 读取聊天文本

> ID：13655083
> 
> 赞同：7
> 
> 时间：2012-12-01T00:24:03.197
> 
> 标签：python, text, screen-scraping, minecraft

在我的世界中，我希望找到一种自动阅读聊天的方法，如下图所示

![我的世界聊天截图](../Images/9781e1345d3b066a67723a4dc4314fb8.png)

为了将虚拟商店中的交易记录到 PostgreSQL 数据库中。最好使用 Python。我不拥有 Minecraft 服务器。

我的计划是找到一种方法来直接读取从 Minecraft 服务器发送的数据包（优先考虑可靠性，但难度未知），或者作为备用计划，可能会弄清楚如何筛选文本。我找到了一些资源，可以让我将字体更改为等宽字体，这将提供一种更可靠的字体阅读方式，并且我相信在屏幕上为每个字符创建完全一致的位置。我可以面对一个接近黑色但不完全的方向，但宁愿不必这样做。如上图所示，您也可以看到许多不同颜色的字体需要处理。

即使在如上所述减少它之后，我仍然不确定如何使用 python 将其转换为文本。

关于我的方法的任何提示？关于如何读取来自服务器的数据包的任何提示？从我的屏幕上抓取文本的任何提示？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-03-03T16:04:22.460

事实上，有一种更好的方式可以从 Minecraft 中读取聊天内容，并且它不需要屏幕抓取或数据包解码。

Minecraft 会自动将聊天消息（和许多其他内容）写入日志文件，无论是单人游戏还是多人游戏。在 Windows 上，它们位于`%appdata%/.minecraft/logs`. 以前的日志使用 gzip 压缩，但最新会话的日志实时写入文本文件 latest.log。聊天消息包含文本`[Client thread/INFO]: [CHAT]`。您可以像使用普通文件一样打开它，使用：

```
import os
with open(os.getenv("APPDATA")+"/.minecraft/logs/latest.log", "r") as logfile:
    for line in logfile:
        if "[Client thread/INFO]: [CHAT]" in line:
            print line, 
```

或者，如果您想实时阅读聊天内容，可以使用下面的代码，对来自此[答案](https://stackoverflow.com/a/5420116)的代码稍作修改：

```
import time, os

def follow(thefile):
    thefile.seek(0,2)
    while True:
        line = thefile.readline()
        if not line:
            time.sleep(0.1)
            continue
        yield line

if __name__ == "__main__":
    logfile = open(os.getenv("APPDATA")+"/.minecraft/logs/latest.log", "r")
    loglines = follow(logfile)
    for line in loglines:
        if "[Client thread/INFO]: [CHAT]" in line:
            print line, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:41:33.017

首先，正如 kuyan 建议的那样，请参阅[http://wiki.vg/Main_Page](http://wiki.vg/Main_Page)，其中包含指向各种可能有用的程序的链接，可以直接使用，也可以供源代码查看。

例如，在实用程序下，首先出现的是日志代理。

还有一点，`mc3p`Joran Beasley 建议的程序是一个 Python 代理，支持插件。它仅适用于 1.2.5，但`sadimusi/mc3p`声称是兼容 1.4.2 的分支。正如 JF Sebastian 所说，`mc3p`有一个用于日志插件的接口，因此您只需编写一个将日志记录到 postgres 的接口。

如果您想自己读取数据包，那并不难。您可以在几十行 Python 中编写一个通用 TCP 代理，或者在 netcat 周围编写两行中的一行 shellscript，将数据发送到您的 Python 脚本。

困难的部分不是拦截数据。它正在解析协议。Minecraft 可能不会发送“Nightbane: 1 tnt for 100.000 Dollars each”，而是类似“offer:Nightbane:1:tnt:100”或“\x13\x09Nightbane\x00\x01\x72\x00\x64”之类的东西。根据 wiki 的说法，该协议已记录在案，但很差，有时甚至不准确，而且 wiki 有时也不正确，官方代码非常丑陋且难以阅读。这意味着找出协议的最佳方法可能是阅读 sadimusi/mc3p 或其他项目之一，如 McPacketSniffer 或 ProtoProxy，此时您必须询问仅使用该项目而不是重新实现它是否更容易.

无论如何，刮屏应该是你最后的手段。

# asp.net-mvc - Html.RenderAction 不适用于已翻译的路线

> ID：13655084
> 
> 赞同：1
> 
> 时间：2012-12-01T00:24:22.630
> 
> 标签：asp.net-mvc

我正在使用 ASP.NET MVC 4。

我在[这里](http://blog.maartenballiauw.be/post/2010/01/26/Translating-routes-%28ASPNET-MVC-and-Webforms%29.aspx)实现了解决方案，它对 Html.ActionLink 非常有效。但是，当我使用 Html.Action 或 Html.RenderAction 时，它不起作用。我得到错误：

***找不到路径“/Demarrer”的控制器或未实现 IController。***

重现步骤：

1.  从上面的网站下载示例代码。[LocalizedRouteExample.zip](http://blog.maartenballiauw.be/file.axd?file=2009/12/LocalizedRouteExample.zip) (23.23 kb)
2.  添加一个新的控制器**SetupController**和相应的 View。
3.  在首页添加：

> `<%= Html.ActionLink("Setup", "Index", "Setup") %>`
> 
> `<% Html.RenderAction("Index", "Setup"); %>`

. 4\. 在 Global.asax 第 30 行添加：

> `new RouteValueTranslation(cultureFR, "Setup", "Installation")`

.

> ```
> public class SetupController : Controller
> {
>     public ActionResult Index()
>     {
>         return PartialView();
>     }
> } 
> ```

视图/设置/Index.ascx：

> ```
> <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl" %>
> <strong>This is SETUP</strong> 
> ```

5) 现在切换到法语并跳回主页。

我知道它，因为它找不到控制器。我应该将什么传递给此 RenderAction 方法以使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:55:50.030

对于 RenderAction，此处介绍了使用“ViewContext.RequestContext.RouteData.DataTokens”的解决方案：

[ASP.NET (MVC) 路由国际化](https://stackoverflow.com/questions/6221561/asp-net-mvc-routes-internationalization)

# php - 如何创建一个包含单个文件的目录？

> ID：13655087
> 
> 赞同：1
> 
> 时间：2012-12-01T00:24:45.993
> 
> 标签：php, url, url-rewriting

我将注册企业在我的网站上做广告，我希望他们有一个直接的 URL 供他们的客户访问。

像，而不是`www.website.com/page.php?id=324234234`，

我希望有`www.website.com/businessname`

有没有一种简单的方法可以做到这一点？我搜索并看到了人们试图做的一大堆不同的事情，但我没有看到任何与我想做的事情相同的事情。

我正在使用 VPS，并且我想确保我不会打开权限，以便任何人都可以进入那里并搞砸事情。

此外，这些用户不会自己注册。我会这样做的。

获得最终结果的最简单方法就是我正在寻找的东西。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T00:29:12.453

基本的 URL 重写可以工作。

添加到您的 .htaccess 文件

```
 RewriteEngine on
 RewriteRule ^(.*)$ page.php?businessname=$1 [L] 
```

然后用PHP将businessname改写为公司ID/查找数据。

当然，如果您需要更复杂的重写，.htaccess 重写规则是一门完整的科学......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:42:38.790

用更多的解释重申 jtheman 所说的话：

使用以下内容创建一个名为 .htaccess 的文件：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ page.php?businessname=$1 [L] 
```

当然，您需要启用目录级别 .htaccess 的能力 - 您使用的是 VPS，因此如果尚未启用，您应该能够执行此操作。

所以让我解释一下每一行的作用。

```
RewriteEngine on 
```

打开 URL 重写功能

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

告诉 Apache 不要重定向目录中已经存在的文件

```
RewriteRule ^(.*)$ page.php?businessname=$1 [L] 
```

这就是魔法发生的地方。

`^(.*)$`这部分就像一个正则表达式匹配。它将告诉 Apache 收集其中包含任何字符的任何 URL，并将它们重定向到 page.php?businessname=(.*)

因此，如果您发布： `www.website.com/stackover`

它真的会发送：`www.website.com/page.php?businessname=stackover`

然后你可以只使用`$_GET[businessname]`动态更新页面。

希望这可以帮助！

# git - 推送前从本地存储库中删除的文件，在我推送上游后在远程源中显示

> ID：13655089
> 
> 赞同：1
> 
> 时间：2012-12-01T00:25:04.150
> 
> 标签：git, bitbucket

我在我的项目中添加了一个图像，然后我将其删除。Git状态证明：

```
deleted:    My Project Repository/My Project Name/back-button.png 
```

但是，当我向上游推送时，我惊讶地看到了`back-button.png`源中的图像。为什么我在遥控器里找到它？以及如何删除它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:39:43.610

`git add -u`每当您删除了一些文件并想要提交它们时，请执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:38:53.573

如果要从远程存储库中删除文件，可以使用：

```
git rm --cached MyProjectRepository/MyProjectName/back-button.png 
```

就我而言，在开始一个新项目之前，我总是忘记在 .gitignore 中添加一些目录，我最终会修复存储库 :) 我在自己的博客中写了它，所以希望我不会忘记： [http:// www.cerioli.com/2012/10/06/remove_folders_and_files_from_git/](http://www.cerioli.com/2012/10/06/remove_folders_and_files_from_git/)

# json - 使用three.js JSONLoader

> ID：13655092
> 
> 赞同：22
> 
> 时间：2012-12-01T00:25:53.640
> 
> 标签：json, import, three.js, loader

只是看不到导入到 three.js 场景中的模型。几何图形看起来不错，但无论我应用什么材料，模型都不会显示。

我是 WebGL 的新手，所以我很难诊断，但我的猜测是 JSONLoader 回调期间出了点问题。

感谢所有帮助。

```
var camera, scene, renderer, mesh, loader;

init();
animate();

function init() {

    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
    camera.position.z = 1000;

    scene = new THREE.Scene();

    loader = new THREE.JSONLoader();

    loader.load( "scripts/model.js", function( geometry ) {
        mesh = new THREE.Mesh( geometry, new THREE.MeshNormalMaterial() );
        mesh.scale.set( 10, 10, 10 );
        mesh.position.y = 150;
        mesh.position.x = 0;
    } );

    scene.add( mesh );

    var ambientLight = new THREE.AmbientLight(0x555555);
    scene.add(ambientLight);

    var directionalLight = new THREE.DirectionalLight(0xffffff);
    directionalLight.position.set(1, 1, 1).normalize();
    scene.add(directionalLight);

    renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );

    document.body.appendChild( renderer.domElement );

}

function animate() {

    requestAnimationFrame( animate );

    mesh.rotation.x += 0.05;

    renderer.render( scene, camera );
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-01T02:11:49.080

您在模型完成加载之前将网格添加到场景中。

移动线

```
scene.add( mesh ); 
```

进入加载器回调函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-16T22:01:58.603

认为这可能会帮助任何寻找更准确答案的人：

```
loader.onLoadComplete=function(){scene.add( mesh )} 
```

还有完整的加载器参考，请参考这里：

[https://threejs.org/docs/index.html#api/loaders/Loader](https://threejs.org/docs/index.html#api/loaders/Loader)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-14T23:30:02.587

`animate()`还应该在回调函数中，以消除控制台错误。

# windows-8 - VS调试到Windows Phone设备？

> ID：13655095
> 
> 赞同：3
> 
> 时间：2012-12-01T00:26:40.720
> 
> 标签：windows-8, windows-phone, windows-phone-8

我的理解是在 Visual Studio 中，如果我将调试更改为“远程机器”，我应该能够构建并部署到我的手机，并且仍然可以在 Visual Studio 中调试它。

但是，我似乎找不到有关如何执行此操作的指南。谁能指出我正确的方向？

如果重要的话，我特别有一个 Windows 8 lumia 920。

我在安装了 WP 8.0 SDK 的 Windows 8 Pro 上安装了 VS 2012。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T01:48:16.410

您使用的是什么项目类型？听起来您可能一直在使用 Windows 8（Windows 应用商店应用程序）的模板之一，其中包含运行下拉选项模拟器、本地计算机和远程计算机。

如果您使用 WP8 模板之一为 Windows Phone 进行开发，您应该在“运行”下拉列表中看到的选项是 Device、Emulator WVGA 512MB、Emulator WVGA、Emulator WXGA 和 Emulator 720P。要在 Visual Studio 中调试您的手机，您需要从该下拉列表中选择“设备”。这是[一篇带有屏幕截图](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff928362(v=vs.105).aspx#BKMK_DeployingtoaPhysicalWindowsPhoneDevice)的文章。

如果您的解决方案中同时包含 Windows 应用商店和 Windows Phone 项目，请确保右键单击 Windows Phone 项目并选择“设置为启动项目”。

# android - Android 应用程序无法与 AdMob 一起运行

> ID：13655096
> 
> 赞同：3
> 
> 时间：2012-12-01T00:26:45.953
> 
> 标签：android, android-layout

我的 Android 应用程序中的 AdMob 存在问题。我已经完成了[这里](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals#android)描述的所有事情，但是当我启动程序时，它没有运行（有很多错误）。我将向您展示一段程序：

```
public class MenuMainActivity extends Activity{

private AdView adView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_menu_main);  

    adView = new AdView(this, AdSize.BANNER, "(code-15 signs)");
    RelativeLayout layout = (RelativeLayout)findViewById(R.layout.activity_menu_main);
    layout.addView(adView);
    adView.loadAd(new AdRequest()); 
```

还有xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/titleOfGame"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="3dp"
    android:layout_centerHorizontal="true"
    android:textSize="25sp"
    android:text="@string/title_of_game_text" /> 
```

...

当我评论两行时：

```
//layout.addView(adView);
//adView.loadAd(new AdRequest()); 
```

一切都好。问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:21:07.090

正如之前的海报所提到的，您需要在布局中创建一个您希望广告出现的特定位置，例如，使用您提供的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/titleOfGame"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="3dp"
    android:layout_centerHorizontal="true"
    android:textSize="25sp"
    android:text="@string/title_of_game_text"/>
<RelativeLayout
    android:id="@+id/adLayer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    etc.   etc./> 
```

然后，您需要将活动中的代码更改为：

```
RelativeLayout layout = (RelativeLayout)findViewById(R.id.adLayer); 
```

正如 BrainCrash 建议的那样。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:36:20.680

如果你使用 findViewById() 你必须传递一个 id，你传递一个“布局”。

应该是这样的：

```
RelativeLayout layout = (RelativeLayout)findViewById(R.id.adLayer); 
```

创建一个以“adLayer”为“id”的布局，并将其放置在您希望广告显示的布局中。

# ios - NSInternalInconsistencyException 递归弄脏混乱

> ID：13655099
> 
> 赞同：1
> 
> 时间：2012-12-01T00:27:18.550
> 
> 标签：ios, cocoa-touch, core-data

我正在努力找出我在核心数据方面遇到的问题。我理解错误的含义，并且我之前遇到过（并已修复），但我不知道为什么我现在得到它。

我的应用程序具有以下结构：

MPModel -> MPPlace 和 MPModel -> MPProject

其中 MPModel 是 NSManagedObject 的子类，MPPlace 和 MPProject 是 MPModel 的子类。

数据模型在MPPlace 和MPProject 之间有关系，其中MPPlace 有-许多MPProjects，而MPProject 属于-MPPlace。

当应用程序加载时，它会获取许多运行良好的 MPPlace 对象。当用户选择一个地点然后选择项目选项时，应用程序会尝试检索项目列表。这是应用程序失败的地方，但出现以下错误

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason:
'Failed to process pending changes before save.  The context is still dirty after 100 
attempts.  Typically this recursive dirtying is caused by a bad validation method, 
willSave, or notification handler.' 
```

每个 MPModel 都包含许多自定义方法，包括 saveAllLocally ，如果对象数组不存在，它只是将对象数组保存到持久存储中，以及 loadNestedResources 从服务器获取与当前对象相关的新对象。我发现 loadNestedResources 方法发生了故障，但我不知道为什么。

loadNestedResources 方法如下所示：

```
- (void) loadNestedResourcesOfType:(Class)type atURL:(NSString *)resURL withBlock:(MPFindObjectsBlock)block
{
    if (![type isSubclassOfClass:[MPModel class]]) {
        block(nil, nil);
    } else {
             NSString *url = [NSString stringWithFormat:@"%@%@/%@%@", kMP_BASE_API_URL, [self.class baseURL], self.objID, [type baseURL]];
        MPRequest *request = [[MPRequest alloc] initWithURL:url];

        // Attempt to see if we already have this relation
           NSString *relation = [[MPUtils stripClassName:type].lowercaseString stringByAppendingString:@"s"];
        NSSet *relatedObjects = [self valueForKey:relation];

        if (relatedObjects && relatedObjects.count > 0) {
            // We have some objects so lets exclude these from our request
            NSMutableArray *uuids = [NSMutableArray arrayWithCapacity:0];
            for (MPModel *obj in relatedObjects) {
                [uuids addObject:obj.uuid];
            }

            [request setParam:[uuids componentsJoinedByString:@";"] forKey:@"exclude_uuids"];
        }

        [MPUser signRequest:request];
        [request setRequestMethod:@"POST"];
        [request submit:^(MPResponse *resp, NSError *error) {
            if (error) {
                if (relatedObjects.count > 0) {
                    block([relatedObjects allObjects], nil);
                } else {
                    block(nil, error);
                }
            } else {
                // Combine all of our objects
                NSMutableArray *allObjects = [[type createListWithResponse:resp] mutableCopy];
                if (allObjects.count > 0) {
                    [allObjects addObjectsFromArray:[relatedObjects allObjects]];

                    // Make sure they're now all saved in the persistence store
                    NSArray *savedObjects = [MPModel saveAllLocally:allObjects forEntityName:NSStringFromClass(type)];
                    for (NSObject *obj in savedObjects) {
                        [obj setValue:self forKey:[MPUtils stripClassName:self.class].lowercaseString];
                    }

                    // Set them as our related objects for this relationship
                    [self setValue:[NSSet setWithArray:savedObjects] forKey:relation];

                    [MPModel saveAllLocally:savedObjects forEntityName:NSStringFromClass(type)];
                    block(allObjects, nil);
                } else {
                    block([relatedObjects allObjects], nil);
                }
            }

        }];
    }
} 
```

在第二次调用 saveAllLocally 之前，这些方法运行得非常完美，这是我得到错误的地方。MPModel 类还使用 willSave 方法，该方法具有以下内容：

```
- (void) willSave
{
    NSDate *now = [NSDate date];

    if (!self.updated_at) {
        self.updated_at = now;
    }

    if (!self.created_at) {
        self.created_at = now;
    }

    if (!self.uuid) {
        self.uuid = [self createUUID];
    }

    if (!self.last_sync) {
        self.last_sync = now;
    }

    if ([self isUpdated] && self.changedValues.count > 0) {

        if (!self.attribute_updated_at) {
            NSDictionary *attributes = [self.entity attributesByName];
            NSMutableDictionary *dates = [NSMutableDictionary dictionaryWithCapacity:0];
            for (NSString *attr in attributes.allKeys) {
                [dates setObject:now forKey:attr];
            }

            [self setAttributeUpdatedDates:dates];
        }

        if (_updatedAtSet) {
            _updatedAtSet = NO;
        } else {
            if ([self.changedValues.allKeys containsObject:@"last_sync"]) {
                self.updated_at = [self.changedValues objectForKey:@"last_sync"];
            } else {
                self.updated_at = [NSDate date];
            }

                         _updatedAtSet = YES;
                 NSDictionary *changed = [self changedValues];
            NSMutableDictionary *dates = [[self attributeUpdatedDates] mutableCopy];

            for (NSString *key in changed.allKeys) {
                [dates setObject:now forKey:key];
            }

            [self setAttributeUpdatedDates:dates];
        }

    }
} 
```

据我所知，这应该没问题，因为如果 _updatedAtSet 变量设置为 true，它不应该再设置任何值，但是它仍然在中断，我不知道为什么！

请有人可以帮助我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:31:01.400

已经解决了。

我只是将其`_updatedAtSet = NO;`移入 didSave 方法而不是它所在的位置，现在它工作正常。不管怎么说，还是要谢谢你

# javascript - 如何从 XHTML 中的 Document.Write 中删除 Div 和 Img 标签

> ID：13655105
> 
> 赞同：0
> 
> 时间：2012-12-01T00:28:15.043
> 
> 标签：javascript, jquery, html, jquery-plugins

我想要做的是在足够大的屏幕上显示全屏背景图像，它适用于大多数浏览器，但它会导致其他浏览器出现问题。我通过 W3 Validator 运行它，它说 XHTML 不支持 document.write 中的 Div 和 Img 标签。在没有 document.write 的情况下，我该如何编写代码以便它通过验证器并且不会在某些浏览器上导致错误？

```
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="jquery.fullscreenBackground.js"></script>
<script type="text/javascript">
$(document).ready(function () {
        $("#background-image").fullscreenBackground();
    });
</script>

            <script type="text/javascript">
var viewPortWidth = $(window).width();
var viewPortHeight = $(window).height();
if (viewPortHeight >= 300 && viewPortWidth >= 400) {
document.write("<div id='background-image'><img src='BGLarge.gif' alt='background' width='1920' height='1080' ></div>");
}
else {
document.write("");
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:30:42.457

使用 jquery 预先添加您的元素：[http](http://api.jquery.com/prepend/) ://api.jquery.com/prepend/ 。

这应该有效。或者你可以改变你的文档类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:37:09.433

```
if (viewPortHeight >= 300 && viewPortWidth >= 400) {
  $('body').prepend('<div id="background-image"><img src="http://thetylerpress.com/new/BGLarge.gif" alt="background" width="1920" height="1080" ></div>');
} 
```

您将不需要 else 语句

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T00:37:49.127

了解哪个浏览器引发错误会很有用。无论如何，为什么不使用 jQuery 来实现你想要的呢？

```
$('body').prepend(
    $('<div></div>')
        .attr('id', 'background-image')
        .html("<img src='http://thetylerpress.com/new/BGLarge.gif' alt='background' width='1920' height='1080' >")
);​ 
```

现场示例：http: [//jsfiddle.net/Wyd43/](http://jsfiddle.net/Wyd43/)

# python - 如何执行多查询 fql 语句？

> ID：13655106
> 
> 赞同：1
> 
> 时间：2012-12-01T00:28:22.783
> 
> 标签：python, sql, facebook, json, facebook-fql

从下面的 FQL 查询中，我可以获取我的新闻源上包含“www.youtube.com”的帖子的 actor_id 和附件数据。但是，我还希望能够获得该用户的图片和姓名。我如何将其合并到以下查询中？

```
SELECT created_time, post_id, actor_id, type, updated_time, attachment
FROM stream 
WHERE post_id IN 
   (SELECT post_id
    FROM stream
    WHERE ('video') IN attachment 
    AND source_id IN
       (SELECT uid2
        FROM friend
        WHERE uid1=me())
    LIMIT 100) 
```

编辑：

```
 #right fql query, but prints only part of it
    posts_query = "SELECT created_time, post_id, actor_id, type, updated_time, attachment FROM stream WHERE post_id in (select post_id from stream where ('video') in attachment AND source_id IN ( SELECT uid2 FROM friend WHERE uid1=me()) limit 100)"
    fql_var = "https://api.facebook.com/method/fql.query?access_token=" + token['access_token'] + "&query=" + posts_query + "&format=json"
    data = urllib.urlopen(fql_var)
    fb_stream = json.loads(data.read())
    #print ast.literal_eval(json.dumps(fb_stream))

    users_query = "SELECT uid, first_name FROM user WHERE uid IN (SELECT actor_id FROM (" + posts_query+"))"
    fqlquery_user = "https://api.facebook.com/method/fql.query?access_token=" + token['access_token'] + "&query=" + users_query + "&format=json"
    user_data2 = urllib.urlopen(fqlquery_user)
    user_stream2 = json.loads(user_data2.read())
    print ast.literal_eval(json.dumps(user_stream2)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:52:23.600

似乎你不能只用一个查询来做到这一点，因为：

1.  `SELECT`在 FQL 中一次只能从一个表中。
2.  FQL 中没有 JOIN。（见[这个问题](https://stackoverflow.com/questions/5322822/fql-profile-pic-square-and-thread-subject)和[那个](https://stackoverflow.com/questions/1045842/facebook-best-way-to-do-fql-join-with-event-and-event-member)问题）

如果可以的话，它会是这样的：

```
SELECT created_time, post_id, actor_id, type, updated_time, attachment, user.first_name
FROM stream
WHERE ('video') in attachment AND 
        source_id IN (SELECT uid2 FROM friend WHERE uid1=me())
LEFT JOIN user ON user.uid=actor_id
LIMIT 100 
```

但是没有连接，所以你需要使用 Facebook 所谓的[multiquery](https://developers.facebook.com/docs/reference/fql/#multi)，你会有两个查询：

```
posts_query =
SELECT created_time, post_id, actor_id, type, updated_time, attachment
FROM stream
WHERE ('video') in attachment AND 
        source_id IN (SELECT uid2 FROM friend WHERE uid1=me())
LIMIT 100

users_query =
SELECT uid, first_name
FROM user
WHERE uid IN (SELECT actor_id FROM #posts_query) 
```

这是[资源管理器](https://developers.facebook.com/tools/explorer?method=GET&path=fql?q=%7B%22posts_query%22:%20%22SELECT%20created_time,%20post_id,%20actor_id,%20type,%20updated_time,%20attachment%20FROM%20stream%20WHERE%20%28%27video%27%29%20in%20attachment%20AND%20source_id%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1=me%28%29%29%20LIMIT%20100%22,%22users_query%22:%22SELECT%20uid,%20first_name%20FROM%20user%20WHERE%20uid%20IN%20%28SELECT%20actor_id%20FROM%20#posts_query%29%22%7D)的链接，供您对其进行测试。

**注意**：您在原始查询中做了一些无用的事情，即从表中选择，并在同一个表的 where 子句中添加子查询。所以这是多余的。

**更新**：

```
#right fql query, but prints only part of it
posts_query = "SELECT created_time, post_id, actor_id, type, updated_time, attachment FROM stream WHERE post_id in (select post_id from stream where ('video') in attachment AND source_id IN ( SELECT uid2 FROM friend WHERE uid1=me()) limit 100)"
users_query = "SELECT uid, first_name FROM user WHERE uid IN (SELECT actor_id FROM (#posts_query))"

queries = {'posts_query': posts_query, 'users_query': users_query}
fql_var = "https://api.facebook.com/method/fql.query?access_token=" + token['access_token'] + "&q=" + json.dumps(queries_json) + "&format=json"
data = urllib.urlopen(fql_var)
fb_stream = json.loads(data.read())
print ast.literal_eval(json.dumps(fb_stream)) 
```

这个想法是发送两个查询，并将它们的名称作为键，以 JSON 编码，以便 Facebook 理解这`#posts_query`是您在同一个 API 请求中发送的那个。您可以完全按照在 JSON 编码对象中发送的名称发送名称，而不是用查询本身替换它。查看有关 multiquery 的文档以获取详细信息和示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:48:52.530

您需要使用[FQL Multiquery](https://developers.facebook.com/docs/reference/fql/)以便您有两个查询 - 您自己的来获取“帖子”，另一个来获取“演员”。查询是一起执行的，您必须调整代码以将使用 actor_id 的值返回的两个数组配对。

```
"posts":"your_query_here"
"actors":"SELECT name,pic_square FROM user WHERE uid IN (SELECT actor_id FROM #posts)" 
```

[您可以在此处查看此查询的结果](https://developers.facebook.com/tools/explorer/?method=GET&path=fql%3Fq%3D%7B%22posts%22%3A%22SELECT%20created_time%2C%20post_id%2C%20actor_id%2C%20type%2C%20updated_time%2C%20attachment%20FROM%20stream%20WHERE%20post_id%20in%20%28select%20post_id%20from%20stream%20where%20%28%27video%27%29%20in%20attachment%20AND%20source_id%20IN%20%28%20SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%3Dme%28%29%29%20limit%20100%29%22%2C%22actors%22%3A%22SELECT%20name%2Cpic_square%20FROM%20user%20WHERE%20uid%20IN%20%28SELECT%20actor_id%20FROM%20%23posts%29%22%7D)

# jquery - 使用属性名称播放对应的音频文件？

> ID：13655109
> 
> 赞同：1
> 
> 时间：2012-12-01T00:28:34.387
> 
> 标签：jquery, html, html5-audio

朋友们，

我基本上是在尝试构建一个简单的音频播放器，它可以获取单击的图像的 id 并播放相应的音频文件。这就是我所在的地方......没有运气。

几个小时以来，我一直在努力寻找一种优雅的方式来做到这一点，并且非常感谢您的帮助！

谢谢！

```
<script type="text/javascript"> 
$(function() {
    $(".playback").click(function(){
        var selectedAudio = $(this).attr("id");
        var myAudio = document.getElementById(selectedAudio);
        myAudio.play();
});
</script>

<body>
    <audio id="boardroom" preload="auto"><source src="boardroom.mp3" type="audio/mpeg" /></audio>
    <audio id="bathroom" preload="auto"><source src="bathroom.mp3" type="audio/mpeg" /></audio>
    <audio id="livingroom" preload="auto"><source src="livingroom.mp3" type="audio/mpeg" /></audio>

    <img class="playback" id="boardroom" src="images/audio.png">

</body 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:32:23.813

您正在寻找对“播放”类的点击，但您的图像具有“播放”类

可能是这样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:56:36.030

2 件事。

1.  永远不要`id`在文档中的多个元素上使用相同的元素。它们应该是唯一的，当它们不是唯一的时候可能会发生坏事。在您的情况下，您的图像和音频元素共享相同的 id，**这很糟糕。**`document.getElementById`如果多个元素共享一个 ID，如何知道要查找哪个元素？您需要使它们不同，尽管您仍然可以使用其中一个来找到另一个。 `<img id="somename">`和`<audio id="somename-audio">`，例如。

2.  您小提琴中的音频源没有指向音频文件。它指向一个关于音频文件的网页。我修复了指向实际音频文件的链接。

工作版本：http: [//jsfiddle.net/Pzsax/2/](http://jsfiddle.net/Pzsax/2/)

html:

```
<audio id="cello-audio" preload="auto">
    <source src="http://upload.wikimedia.org/wikipedia/commons/4/43/JOHN_MICHEL_CELLO-J_S_BACH_CELLO_SUITE_1_in_G_Prelude.ogg" type="audio/mpeg" />
</audio>

<img class="playback" id="cello" src="http://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Sound-icon.svg/50px-Sound-icon.svg.png">​ 
```

JS：

```
$(".playback").click(function() {
    var selectedAudio = $(this).attr("id");
    var myAudio = document.getElementById(selectedAudio + "-audio");
    myAudio.play();
});​ 
```

或者，由于您似乎在使用 jQuery，那可能只是：

```
$(".playback").click(function() {
    var selectedAudio = $(this).attr("id");
    var myAudio = $('#' + selectedAudio + "-audio");
    myAudio.play();
});​ 
```

* * *

最后，与其依靠 id 来传递有意义的数据，也许[数据属性](http://www.broken-links.com/2010/11/18/data-attributes-in-html-and-jquery/)可能是一种更简洁的方法，它允许您在播放它们的按钮中编码数据位，例如声音的名称。

# c - 如何杀死pid不断变化的进程？

> ID：13655110
> 
> 赞同：6
> 
> 时间：2012-12-01T00:28:49.607
> 
> 标签：c, linux, unix, process

我知道我可以使用这个技巧`if (fork()) exit(0);`来更改当前进程的 pid。因此，以下程序的 pid 变化非常快。如何杀死这样的进程？有没有比执行很多更好的方法，`killall procname`直到一个能够`kill()`在它分叉之前运行？我知道这不是一个“进程”，而是许多进程每个运行几微秒。

```
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

int main()
{
    pid_t self = getpid();
    while (1)
    {
        if (fork()) exit(0);
        if (self + 10000 < getpid()) break; // Just to kill it after some time
        usleep(1000);
    }
    return 0;
} 
```

此外，我发现列出该过程的唯一方法是执行`ps -A | grep procname`几次，直到显示一些输出。为什么不总是列出进程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T01:18:53.720

这样的过程被系统管理员称为“彗星”。

进程组 ID (PGID) 在 fork 上不会更改，因此您可以`SIGSTOP`通过向进程组发送信号来终止它（或它）（您将否定的 PGID 而不是 PID 传递给`kill`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:55:33.723

我能明白为什么你看不到它的唯一原因是尚未创建分叉的孩子，但父母在它的死亡中已经取得了足够的进展，它不再被列出。

不幸的是，我认为没有猜测就可以杀死这种过程。这样做需要提前知道下一个 pid。您可以猜测下一个 pid，但不能确定没有其他 pid 被分配。

# python - 以 3 个为一组打印 python 列表

> ID：13655116
> 
> 赞同：2
> 
> 时间：2012-12-01T00:29:21.980
> 
> 标签：python, list, printing, tabs, iteration

我有一个包含 107 个名称的列表，我想以 3 个左右为一组打印出来，每个名称用制表符分隔，每行后有一个换行符，直到最后。我怎样才能做到这一点？

当然，`for item in list print item`我每行只有 1 个名字，我想这很好，但我想一次在控制台中容纳更多，所以当我浏览列表时，我想在每行打印 3 个左右的名字，所以而不是：

```
name1
name2
name3
name4
name5
name6 
```

我会得到：

```
name1     name2     name3
name4     name5     name6 
```

寻找这个问题的答案有点困难，我无法想出我需要或我能理解的东西，我发现的大多数事情都只是处理`len()`或`range()`让我感到困惑。有一些简单的方法可以做到这一点吗？谢谢！

**[编辑：更新] 使用@inspectorG4dget 的示例：**

```
for i in range(0, len(listnames), 5):
    print '\t\t'.join(listnames[i:i+5]) 
```

我得到以下信息： http: [//www.pasteall.org/pic/show.php?id=41159](http://www.pasteall.org/pic/show.php?id=41159)

我怎样才能清理干净，以便每列中的所有内容都很好地对齐？我想要的可以轻松做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T02:36:48.660

# 1)

```
li = ['sea','mountain','desert',
      'Emma','Cathy','Kate',
      'ii','uuuuuuuuuuuuuuuuuuu','aaa',
      'round','flat','sharp',
      'blueberry','banana','apple',
      'red','purple','white',
      'hen','tiger']

a,b = divmod(len(li),3)
itn = iter(li).next
print ''.join('%s\t%s\t%s\n' % (itn(),itn(),itn())
              for i in xrange(a))\
      + ('%s\t%s\t\n' % (itn(),itn()) if b==2
         else '%s\t\n' % itn() if b==1
         else '') 
```

结果

```
sea mountain    desert
Emma    Cathy   Kate
ii  uuuuuuuuuuuuuuuuuuu aaa
round   flat    sharp
blueberry   banana  apple
red purple  white
hen tiger 
```

.

# 2)

并在宽度取决于列表中最长元素的列中对齐：

```
li = ['sea','mountain','desert',
      'Emma','Cathy','Kate',
      'HH','VVVVVVV','AAA',
      'round','flat','sharp',
      'blueberry','banana','apple',
      'red','purple','white',
      'hen','tiger']

maxel = max(len(el) for el in li)
a,b = divmod(len(li),3)
itn = iter(li).next
form = '%%-%ds\t%%-%ds\t%%-%ds\n' % (maxel,maxel,maxel)
print ''.join(form % (itn(),itn(),itn())
              for i in xrange(a))\
      + ('%%-%ds\t%%-%ds\t\n' %(maxel,maxel) % (itn(),itn()) if b==2
         else '%%-%ds\t\n' % ma% itn() if b==1
         else '') 
```

结果

```
sea         mountain    desert   
Emma        Cathy       Kate     
HH          VVVVVVV     AAA      
round       flat        sharp    
blueberry   banana      apple    
red         purple      white    
hen         tiger 
```

.

# 3)

要在列中对齐，每列的宽度取决于其中最长的元素：

```
li = ['sea','mountain','desert',
      'Emma','Cathy','Kate',
      'HH','VVVVVVV','AAA',
      'round','flat','sharp',
      'nut','banana','apple',
      'red','purple','white',
      'hen','tiger']

maxel0 = max(len(li[i]) for i in xrange(0,len(li),3)) 
maxel1 = max(len(li[i]) for i in xrange(1,len(li),3))
maxel2 = max(len(li[i]) for i in xrange(2,len(li),3))
a,b = divmod(len(li),3)
itn = iter(li).next
form = '%%-%ds\t%%-%ds\t%%-%ds\n' % (maxel0,maxel1,maxel2)
print ''.join(form % (itn(),itn(),itn())
              for i in xrange(a))\
      + ('%%-%ds\t%%-%ds\t\n' %(maxel0,maxel1) % (itn(),itn()) if b==2
         else '%%-%ds\t\n' % maxel0 % itn() if b==1
         else '') 
```

结果

```
sea     mountain    desert
Emma    Cathy       Kate  
HH      VVVVVVV     AAA   
round   flat        sharp 
nut     banana      apple 
red     purple      white 
hen     tiger 
```

# 4)

我已经修改了算法，以便推广到想要的任意数量的列。
所需的列数必须作为参数传递给 parameter `nc`：

```
from itertools import imap,islice

li = ['sea','mountain','desert',
      'Emma','Cathy','Kate',
      'HH','VVVVVVV','AAA',
      'round','flat','sharp',
      'nut','banana','apple',
      'heeeeeeeeeeen','tiger','snake'
      'red','purple','white',
      'atlantic','pacific','antarctic',
      'Bellini']

print 'len of li == %d\n' % len(li)

def cols_print(li,nc):
    maxel = tuple(max(imap(len,islice(li,st,None,nc)))
                  for st in xrange(nc))

    nblines,tail = divmod(len(li),nc)
    stakes = (nc-1)*['%%-%ds\t'] + ['%%-%ds']
    form = ''.join(stakes) % maxel

    itn = iter(li).next

    print '\n'.join(form % tuple(itn() for g in xrange(nc))
                  for i in xrange(nblines)) 
    if tail:
        print ''.join(stakes[nc-tail:]) % maxel[0:tail] % tuple(li[-tail:]) + '\n'
    else:
        print

for nc in xrange(3,8):
    cols_print(li,nc)
    print '-----------------------------------------------------------' 
```

结果

```
len of li == 24

sea             mountain    desert  
Emma            Cathy       Kate    
HH              VVVVVVV     AAA     
round           flat        sharp   
nut             banana      apple   
heeeeeeeeeeen   tiger       snakered
purple          white       atlantic
pacific         antarctic   Bellini 

-----------------------------------------------------------
sea         mountain    desert      Emma         
Cathy       Kate        HH          VVVVVVV      
AAA         round       flat        sharp        
nut         banana      apple       heeeeeeeeeeen
tiger       snakered    purple      white        
atlantic    pacific     antarctic   Bellini      

-----------------------------------------------------------
sea             mountain    desert      Emma    Cathy
Kate            HH          VVVVVVV     AAA     round
flat            sharp       nut         banana  apple
heeeeeeeeeeen   tiger       snakered    purple  white
atlantic        pacific     antarctic   Bellini

-----------------------------------------------------------
sea     mountain    desert      Emma            Cathy       Kate    
HH      VVVVVVV     AAA         round           flat        sharp   
nut     banana      apple       heeeeeeeeeeen   tiger       snakered
purple  white       atlantic    pacific         antarctic   Bellini 

-----------------------------------------------------------
sea     mountain        desert  Emma        Cathy   Kate    HH      
VVVVVVV AAA             round   flat        sharp   nut     banana  
apple   heeeeeeeeeeen   tiger   snakered    purple  white   atlantic
pacific antarctic       Bellini

----------------------------------------------------------- 
```

.

但我更喜欢列之间没有制表符的显示，但只有给定数量的字符。
在下面的代码中，我选择用 2 个字符分隔列：它是行中的 2

```
maxel = tuple(max(imap(len,islice(li,st,None,nc)))+2 
```

编码

```
from itertools import imap,islice

li = ['sea','mountain','desert',
      'Emma','Cathy','Kate',
      'HH','VVVVVVV','AAA',
      'round','flat','sharp',
      'nut','banana','apple',
      'heeeeeeeeeeen','tiger','snake'
      'red','purple','white',
      'atlantic','pacific','antarctic',
      'Bellini']

print 'len of li == %d\n' % len(li)
def cols_print(li,nc):
    maxel = tuple(max(imap(len,islice(li,st,None,nc)))+2
                  for st in xrange(nc))

    nblines,tail = divmod(len(li),nc)
    stakes = nc*['%%-%ds']
    form = ''.join(stakes) % maxel

    itn = iter(li).next

    print '\n'.join(form % tuple(itn() for g in xrange(nc))
                  for i in xrange(nblines)) 
    if tail:
        print ''.join(stakes[nc-tail:]) % maxel[0:tail] % tuple(li[-tail:]) + '\n'
    else:
        print

for nc in xrange(3,8):
    cols_print(li,nc)
    print 'mwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwm' 
```

结果

```
len of li == 24

sea            mountain   desert    
Emma           Cathy      Kate      
HH             VVVVVVV    AAA       
round          flat       sharp     
nut            banana     apple     
heeeeeeeeeeen  tiger      snakered  
purple         white      atlantic  
pacific        antarctic  Bellini   

mwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwm
sea       mountain  desert     Emma           
Cathy     Kate      HH         VVVVVVV        
AAA       round     flat       sharp          
nut       banana    apple      heeeeeeeeeeen  
tiger     snakered  purple     white          
atlantic  pacific   antarctic  Bellini        

mwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwm
sea            mountain  desert     Emma     Cathy  
Kate           HH        VVVVVVV    AAA      round  
flat           sharp     nut        banana   apple  
heeeeeeeeeeen  tiger     snakered   purple   white  
atlantic       pacific   antarctic  Bellini  

mwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwm
sea     mountain  desert    Emma           Cathy      Kate      
HH      VVVVVVV   AAA       round          flat       sharp     
nut     banana    apple     heeeeeeeeeeen  tiger      snakered  
purple  white     atlantic  pacific        antarctic  Bellini   

mwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwm
sea      mountain       desert   Emma      Cathy   Kate   HH        
VVVVVVV  AAA            round    flat      sharp   nut    banana    
apple    heeeeeeeeeeen  tiger    snakered  purple  white  atlantic  
pacific  antarctic      Bellini  

mwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwmwm 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:32:26.043

这应该这样做：

```
In [12]: L
Out[12]: ['name1', 'name2', 'name3', 'name4', 'name5', 'name6']

In [13]: for i in range(0,len(L),3): print ' '.join(L[i:i+3])
name1 name2 name3
name4 name5 name6 
```

**编辑**：将所有内容都设置为固定宽度（我写了一段时间将列式数据转换为表格的一些代码。您所要做的就是对数据进行列化并调用此旧代码）：

```
def tabularize(infilepath, outfilepath, delim='\t', largeFile=False):
        """ Return nothing
                Write into the file in outfilepath, the contents of infilepath, expressed in tabular form.
                The tabular form is similar to the way in which SQL tables are displayed.
                If largeFile is set to True, then no caching of lines occurs. However, two passes of the infile are required"""

        if largeFile:
                widths = getWidths(infilepath, delim)
        else:
                with open(infilepath) as infile:
                        lines = [line.strip().split(delim) for line in infile.readlines() if line.strip()]
                widths = [max([len(row) for row in rows])+2 for rows in izip_longest(*lines, fillvalue="")]

                with open(outfilepath, 'w') as outfile:
                        outfile.write("+")
                        for width in widths:
                                outfile.write('-'*width + "+")
                        outfile.write('\n')
                        for line in lines:
                                outfile.write("|")
                                for col,width in izip_longest(line,widths, fillvalue=""):
                                        outfile.write("%s%s%s|" %(' '*((width-len(col))/2), col, ' '*((width+1-len(col))/2)))
                                outfile.write('\n+')
                                for width in widths:
                                        outfile.write('-'*width + "+")
                                outfile.write('\n')

def getWidths(infilepath, delim):
        answer = defaultdict(int)
        with open(infilepath) as infile:
                for line in infile:
                        cols = line.strip().split(delim)
                        lens = map(len, cols)
                        for i,l in enumerate(lens):
                                if answer[i] < l:
                                        answer[i] = l

        return [answer[k] for k in sorted(answer)]

def main(L, n, infilepath, outfilepath):
    iterator = iter(L)
    with open(infilepath, 'w') as infile:
        for row in itertools.izip_longest([iterator]*n, fillavalue=''):
            infile.write('\t'.join(row)+'\n')
    if len(L) > 10**6:
        largeFile = True
    tabularize(infilepath, outfilepath, delim='\t', largeFile) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T00:37:21.680

你也可以试试这个：

```
from itertools import izip

l = ['name1', 'name2', 'name3', 'name4', 'name5', 'name6']

for t in izip(*[iter(l)]*3):
    print '\t'.join(t) 
```

```
名称1 名称2 名称3
名字4 名字5 名字6

```

* * *

如果您不确定列表长度是否为 3 的倍数，您可以使用`izip_longest`，应用相同的想法：

```
from itertools import izip_longest as izipl

l = ['name1', 'name2', 'name3', 'name4', 'name5', 'name6', 'name7']

for t in izipl(fillvalue='', *[iter(l)]*3):
    print '\t'.join(t) 
```

```
名称1 名称2 名称3
名字4 名字5 名字6
名称7   

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T00:35:36.003

尝试使用`itertools`我认为它更简单的解决方案。

```
from itertools import izip_longest

def grouper(n, iterable, fillvalue=None):
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args)

names = ['name1', 'name2', 'name3', 'name4', 'name5', 'name6']
for item1 in grouper(3, names, ''):
    print '\t'.join(item1) 
```

结果：

```
name1   name2   name3
name4   name5   name6 
```

# php - 在 MySQL [+php?] 中合并的另一行

> ID：13655118
> 
> 赞同：1
> 
> 时间：2012-12-01T00:29:47.313
> 
> 标签：php, mysql, sql

如果现有行中有空字段，如何将一行与现有行合并而不是插入它？

这里举个例子。现有行：

```
id    f1    f2    f3    f4    ...
0     a           b     
1     c 
```

要插入的行：

```
id    f1    f2    f3    f4    ...
NULL        d 
```

需要的结果：

```
id    f1    f2    f3    f4    ...
0     a     d     b     
1     c 
```

我为此制作了一个 PHP 函数，它`SELECTS`为每个字段清空行并更新此行中的数据，但这太慢了。有什么方法可以改进和加速这段代码吗？

```
foreach($cond as $cond_name = > $cond_value) {
    if ($cond_value != '') {
        $cond_count++;
        $q = 'SELECT `id` FROM `g_ul_cond_orders` WHERE `ul_id`='.$ul_id.' AND `'.$cond_name.'`="" LIMIT 1;';
        $r = mysql_query($q);
        if ($r) {
            if ($row = mysql_fetch_assoc($r)) {
                $q = 'UPDATE `g_ul_cond_orders` SET `'.$cond_name.'`="'.$cond_value.'" WHERE `id`='.$row['id'].';';
                $r = mysql_query($q);
                if ($r) {
                    $cond[$cond_name] = '';
                    $cond_count--;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T00:55:41.303

至少您可以使用一个查询进行更新

```
UPDATE `g_ul_cond_orders` SET `'.$cond_name.'`="'.$cond_value.'" WHERE `id`= (SELECT `id` FROM `g_ul_cond_orders` WHERE `ul_id`='.$ul_id.' AND `'.$cond_name.'`="" LIMIT 1); 
```

使用此查询，将不需要第二个查询和代码中的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:40:54.013

您可以使用通常称为“upsert”的方法来实现这一点 - 在 mySQL 中，您可以使用[“INSERT..ON DUPLICATE KEY UPDATE”](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)语法来实现

# jquery - jquery.validate.js - 验证文件名

> ID：13655121
> 
> 赞同：4
> 
> 时间：2012-12-01T00:30:04.310
> 
> 标签：jquery, jquery-plugins, jquery-validate

根据此处 jquery.validate 插件的文档：http: [//docs.jquery.com/Plugins/Validation/Methods/accept#extension](http://docs.jquery.com/Plugins/Validation/Methods/accept#extension)

我可以检查文件的文件扩展名以验证文件扩展名，如下所示：

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      accept: "xls|csv"
    }
  }
}); 
```

但是，这似乎对该字段没有影响，我仍然可以将任何文件添加到我喜欢的字段中。“必需”验证确实适用于该字段，并且我在验证代码有效的页面上有其他字段 - 但是“接受”规则没有被应用。

JSFiddle 显示问题：http: [//jsfiddle.net/SCgRr](http://jsfiddle.net/SCgRr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:43:53.180

好的，因此文档已过时，您需要包含`additional-methods.js`lib 以及`jquery.validate`.

添加了缺少的库，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:31:17.943

我有同样的问题 - 特别是`"xls|csv"`- 即使在包括`additional-methods.js`

注意这个新段落[http://docs.jquery.com/Plugins/Validation/Methods/accept#extension](http://docs.jquery.com/Plugins/Validation/Methods/accept#extension)

> 注意：此方法过去只查看文件名，特别是文件扩展名。该行为现在可作为附加方法中的“扩展”方法使用，与此“接受”方法本身相同。

`accept`现在指定 mimetype 并且`extension`特定于文件扩展名。像“pdf”这样的扩展可以工作——因为扩展和 mimetype 是一样的。但是 xls 和 csv 是文本，需要根据文件扩展名进行评估。

因此，按照新文档更改对我有用`accept`。`extension`

完整代码：

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      extension: "xls|csv"
    }
  }
}); 
```

# eclipse - 如何在 Eclipse 中正确使用 EGit

> ID：13655126
> 
> 赞同：1
> 
> 时间：2012-12-01T00:31:05.250
> 
> 标签：eclipse, git

我似乎能够在 Eclipse 中使用 git 的唯一方法是创建一个非 git 项目，然后将其转换为存储库。这最终将项目移出文件系统上的 eclipse 工作区。然后我必须删除项目（它仍然在 git 存储库中），然后在创建分支后导入一个 git 存储库并克隆它以将其放回 eclipse 工作区。

有没有更简单的方法？

我只是想创建一个真正从本地存储库克隆的项目。本质上，我的 HD 上有两个副本，但我可以将 eclipse 项目提交到 git 存储库。不幸的是，必须有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-03T04:53:11.500

回答这个问题涉及三个步骤。

1.  创建外部（远程）存储库
2.  以保留在工作区中的方式共享项目
3.  将项目存储库连接到远程存储库

## 在本地计算机上创建远程存储库

切换到 Git 透视图。单击**创建一个新的 Git 存储库**。

出现对话框时，选择您希望远程存储库所在的目录。这是您的项目将被`push`编入的内容。您还需要选择**Create as a bare repository**选项。

[![创建裸仓库](../Images/5378a2ff283bb39a6504db97733888cd.png)](https://i.stack.imgur.com/IAeWB.png)

这就是这一步。您现在应该在您的 EGit 存储库列表中拥有此存储库。

## 在工作区中共享项目

有两种方法可以共享项目以使其保留在您的工作区中。1\. 将项目目录设为存储库 2\. 将整个工作区目录设为存储库

### 作为存储库的项目

Eclipse 团队不推荐使用第一个选项。为什么[不建议将 Eclipse 项目文件夹作为 Git 存储库？](https://stackoverflow.com/questions/14107367/why-is-not-recommended-to-have-an-eclipse-project-folder-as-a-git-repository).

这个问题的基础是双重的：

1.  每个存储库不能有多个项目
2.  如果您的工作区发生某些事情，您也会丢失您的存储库

问题1在这里没有解决。问题 2 可以通过连接到远程存储库来解决，如下所示。

要将项目共享为存储库：

1.  右键单击项目
2.  从弹出菜单中选择**团队**->**共享项目...**
3.  单击**在项目的父文件夹中使用或创建存储库** [![父文件夹存储库](../Images/35df8ae9bdc7e98a55a541a7fe68111a.png)](https://i.stack.imgur.com/IKBSr.png)
4.  从列表中选择项目
5.  单击**创建存储库**按钮
6.  单击**完成**按钮

接下来，您需要将新创建的存储库连接到远程存储库。这将在下面介绍。

### 工作区作为存储库

第二个选项允许将多个项目添加到您的存储库中。事实上，您创建的任何新项目都会自动添加到存储库中。

自动添加项目可能会导致一些问题。

一个问题是，如果在多个项目中发生了变化，那么对这些变化进行分期可能需要一些时间。在登台时使用**树**表示可以简化事情。

将项目的 git clone 导入工作区时，会出现另一个更严重的问题。此导入将创建嵌套存储库。[根据这篇文章，](https://stackoverflow.com/questions/10205438/can-i-have-a-nested-git-repo-inside-a-git-ignored-folder)嵌套存储库可能会导致问题 。默认情况下，Eclipse 不会将项目的 git clone 导入工作区。

要将工作区共享为存储库：

1.  右键单击项目
2.  从弹出菜单中选择**团队**->**共享项目...**
3.  点击**创建**按钮
4.  选择您的工作区作为您的**存储库目录**
5.  单击**完成**按钮

创建存储库后，您可能需要做一些小事。我建议将`RemoteSystemsTempFiles`项目添加到`.gitignore`文件中。注意：该 `.metadata`文件由 Eclipse 自动添加。

您可以忽略`RemoteSystemsTempFiles`by：

1.  切换到 EGit 视角
2.  从存储库列表中选择工作区存储库
3.  选择**Git 暂存**选项卡
4.  单击选项卡工具栏右侧的**查看菜单按钮**
5.  选择**Presentation** -> **Tree**菜单（文件夹更容易从树视图中忽略） [![树展示](../Images/4134f5eb23cf3869e1222a63e672c3e3.png)](https://i.stack.imgur.com/OqxUv.png)
6.  右键单击`RemoteSystemsTempFiles`项目
7.  选择**忽略文件夹**菜单
8.  以同样的方式忽略其他项目

## 连接到远程存储库

最后一个阶段是将工作空间存储库连接到我们之前创建的远程存储库。切换到 EGit 透视图后：

1.  扩展您的工作区存储库
2.  右键单击树中的**远程**节点
3.  选择**创建远程...**菜单
4.  将远程名称保留为**原点**
5.  选择**配置提取**
6.  按**确定**
7.  单击**更改...**按钮
8.  单击**本地文件**按钮
9.  选择您在第一部分中创建的裸存储库
10.  点击**完成**
11.  单击**保存并获取**，然后单击**确定** [![在此处输入图像描述](../Images/9bf6070f8df26d4ce577a1fe51716a42.png)](https://i.stack.imgur.com/ieary.png)

然后，您可以在项目和工作区中暂存、提交和推送更改。

当您第一次提交和推送时，EGit 会将默认分支**master**推 送到远程并`pull`从远程存储库配置此分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T07:14:44.840

按照[用户指南](http://wiki.eclipse.org/EGit/User_Guide/Sharing#Adding_a_project_to_version_control)，您需要在当前项目路径中创建 .git 存储库：

![选择项目](../Images/f1b02897b5e556d0e2c41c1b8b194649.png)

![git 路径](../Images/bf073c84bd6798892e360d65a2ff40e5.png)

如果`.git`路径在当前项目路径中，EGit 没有理由将您的文件移动到其他任何地方。

# c++ - 信息隐藏 C++

> ID：13655129
> 
> 赞同：-4
> 
> 时间：2012-12-01T00:31:21.987
> 
> 标签：c++, information-hiding

信息隐藏的原理是什么，C++是如何支持的。C++ 还允许我违反信息隐藏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:36:01.063

它通过在类声明中允许`private:`和部分来支持信息隐藏。`protected:`

违反它的“支持”方法是通过`friend`关键字，它允许外部函数或类访问类的`private`and`protected`成员（尽管如果这实际上是“违反”是有争议的）。

此外，在 C++ 程序中，没有运行时强制执行可见性规则，因此，如果您设法获得指向内部字段的指针或指向内部方法的函数指针，则没有什么能阻止您使用它（同样，这可能是故意的 -类本身给了你那个指针 - 或“滥用” - 你有一个指向对象本身的指针并添加一些偏移量以获取内部成员）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:27:07.680

是隐藏显示编程程序如何发挥作用的细节的过程，以避免公共用户访问这些功能细节，因此它是私人和受保护的行为。

# android - 在同一活动中打开活动

> ID：13655130
> 
> 赞同：0
> 
> 时间：2012-12-01T00:31:39.303
> 
> 标签：android, android-intent, android-activity

按下按钮时，我尝试使用不同的参数打开与当前所在的类相同的类。我这样做：

```
Intent j = new Intent("com.test.com.ANSWER");
            id = calculateId(0);
            j.putExtra("id", Long.toString(id));
            startActivityForResult(j, 0); 
```

但是我得到了一个空指针异常。是否有一些规则不能在其内部打开相同的活动？

**错误：**

```
12-01 01:29:10.314: E/AndroidRuntime(2194): FATAL EXCEPTION: main
12-01 01:29:10.314: E/AndroidRuntime(2194): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.test/com.test.Answer}: java.lang.NullPointerException
12-01 01:29:10.314: E/AndroidRuntime(2194):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at android.os.Looper.loop(Looper.java:130)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at android.app.ActivityThread.main(ActivityThread.java:3683)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at java.lang.reflect.Method.invokeNative(Native Method)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at java.lang.reflect.Method.invoke(Method.java:507)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:861)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:619)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at dalvik.system.NativeStart.main(Native Method)
12-01 01:29:10.314: E/AndroidRuntime(2194): Caused by: java.lang.NullPointerException
12-01 01:29:10.314: E/AndroidRuntime(2194):     at com.test.Answer.onCreate(Answer.java:86)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-01 01:29:10.314: E/AndroidRuntime(2194):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:08:31.493

我认为你的 id 没有被初始化。您正在尝试使用使用 id 的函数对其进行初始化，因此它永远不会有值。如果不是这样，那么您在不同的地方使用相同的变量名，这通常不是很好的做法

# python - 使用 Python 在 return 语句中嵌入字符串

> ID：13655131
> 
> 赞同：-1
> 
> 时间：2012-12-01T00:31:48.757
> 
> 标签：python, string, return

我有一些 Python 代码有一个我称为 getFormatted() 的函数，它将`month,date,year`（逗号分隔）形式的日期转换为`MM/DD/YYYY`. 我想`getFormatted()`使用 return 语句，所以当你用`print(self.bdate.getFormatted())`它调用它时返回`MM/DD/YYYY`，但我不知道如何嵌入`/`s. 我能做的最好的事情是`getFormatted()`生成一个打印语句并通过 just 调用它`self.bdate.getFormatted()`。

那么，有没有办法在返回语句中嵌入字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:36:40.243

```
def getFormatted(month, day, year):
    # Your missing code here
    return "{0}/{1}/{2}".format(month, day, year)

print getFormatted(2, 2, 2012) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:34:20.547

我在这里错过了什么吗？你可以退货。

```
def getDate():
    return "02/02/1993" 
```

您应该可以在函数中简单地替换`print`为`return`

# asp.net-mvc - Kendo：MVC4 ComboBox 限制编辑内容

> ID：13655135
> 
> 赞同：2
> 
> 时间：2012-12-01T00:32:00.473
> 
> 标签：asp.net-mvc, kendo-ui

使用以下内容，我有一个绑定到模型的 ComboxBox。

```
 @(Html.Kendo().ComboBoxFor(model => model.AppUserStatus)
              .DataTextField("Text")
              .DataValueField("Value")
              .BindTo(@ViewBag.StatusList)
       ) 
```

如何防止文本被编辑，但允许正常选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:33:38.193

你无法阻止这一点。这是组合框的功能之一 - 允许自定义值。按照评论中的建议使用下拉列表。

# database - 具有数据库生成的版本列的单元测试数据库

> ID：13655136
> 
> 赞同：0
> 
> 时间：2012-12-01T00:32:11.023
> 
> 标签：database, hibernate, junit, hsqldb

我正在尝试使用熟悉的 Spring + Hibernate 设置针对超音速内存数据库 (HSQLDB) 编写一些 JUnit 测试。我被困在我们的一个具有 <version generated="always" /> 标签的实体上。据我所知，Hypersonic 不支持自动填充此类列。是否有另一种可以处理此类版本控制的内存解决方案？或者，是否有一些最佳实践或技术来处理这个问题？

谢谢！

# twisted - Twisted IRC Bot 与本地主机的连接反复丢失

> ID：13655139
> 
> 赞同：1
> 
> 时间：2012-12-01T00:32:31.263
> 
> 标签：twisted, irc, reactor

我正在尝试在本地服务器上实现 IRC Bot。我使用的机器人与[Eric Florenzano 的博客](http://eflorenzano.com/blog/2008/11/16/writing-markov-chain-irc-bot-twisted-and-python/)中的机器人相同。这是简化的代码（应该运行）

```
import sys
import re
from twisted.internet import reactor
from twisted.words.protocols import irc
from twisted.internet import protocol

class MomBot(irc.IRCClient):
    def _get_nickname(self):
        return self.factory.nickname
    nickname = property(_get_nickname)

    def signedOn(self):
        print "attempting to sign on"
        self.join(self.factory.channel)
        print "Signed on as %s." % (self.nickname,)

    def joined(self, channel):
        print "attempting to join"
        print "Joined %s." % (channel,)

    def privmsg(self, user, channel, msg):
        if not user:
            return
        if self.nickname in msg:
            msg = re.compile(self.nickname + "[:,]* ?", re.I).sub('', msg)
            prefix = "%s: " % (user.split('!', 1)[0], )
        else:
            prefix = ''
        self.msg(self.factory.channel, prefix + "hello there")

class MomBotFactory(protocol.ClientFactory):
    protocol = MomBot

    def __init__(self, channel, nickname='YourMomDotCom', chain_length=3,
        chattiness=1.0, max_words=10000):
        self.channel = channel
        self.nickname = nickname
        self.chain_length = chain_length
        self.chattiness = chattiness
        self.max_words = max_words

    def startedConnecting(self, connector):
        print "started connecting on {0}:{1}" 
            .format(str(connector.host),str(connector.port))

    def clientConnectionLost(self, connector, reason):
        print "Lost connection (%s), reconnecting." % (reason,)
        connector.connect()

    def clientConnectionFailed(self, connector, reason):
        print "Could not connect: %s" % (reason,)

if __name__ == "__main__":
    chan = sys.argv[1]
    reactor.connectTCP("localhost", 6667, MomBotFactory('#' + chan,
        'YourMomDotCom', 2, chattiness=0.05))
    reactor.run() 
```

我在客户端工厂中添加了 startedConnection 方法，它正在到达并打印出正确的地址：主机。然后它断开连接并进入 clientConnectionLost 并打印错误：

```
Lost connection ([Failure instance: Traceback (failure with no frames):
    <class 'twisted.internet.error.ConnectionDone'>: Connection was closed cleanly.
    ]), reconnecting. 
```

如果工作正常，它应该登录到适当的频道，指定为命令中的第一个参数（例如，python module2.py botwar。将是频道#botwar。）。如果频道中的任何人发送任何内容，它应该以“hello there”响应。

我在服务器上运行[NGIRC ，如果我从 mIRC 或任何其他 IRC 客户端连接，它就可以工作。](http://ngircd.barton.de/)

我无法找到解决它为什么会不断断开连接的解决方案。任何有关为什么的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:31:53.020

您可能想要做的一件事是确保当您的机器人连接到服务器时您会看到服务器产生的任何错误输出。我的预感是问题与身份验证有关，或者可能是 ngirc 处理`IRCClient`.

几乎总是适用的一种方法是捕获流量日志。使用 tcpdump 或 wireshark 之类的工具。

您可以尝试的另一种方法是在 Twisted 应用程序本身内启用日志记录。用于`twisted.protocols.policies.TrafficLoggingFactory`此：

```
from twisted.protocols.policies import TrafficLoggingFactory
appFactory = MomBotFactory(...)
logFactory = TrafficLoggingFactory(appFactory, "irc-")
reactor.connectTCP(..., logFactory) 
```

这会将输出记录到以“irc-”开头的文件（每个连接的不同文件）。

您还可以在多个级别中的任何一个级别直接挂钩到您的协议实现。例如，要显示接收到的任何字节：

```
class MomBot(irc.IRCClient):
    def dataReceived(self, bytes):
        print "Got", repr(bytes)
        # Make sure to up-call - otherwise all of the IRC logic is disabled!
        return irc.IRCClient.dataReceived(self, bytes) 
```

使用其中一种方法，希望您会看到如下内容：

```
:irc.example.net 451 * :Connection not registered 
```

我认为这意味着...您需要进行身份验证？即使您看到其他内容，也希望这能帮助您更深入地了解关闭连接的确切原因。

此外，您可以使用`tcpdump`或`wireshark`捕获 ngirc 和其中一个正在工作的 IRC 客户端（例如 mIRC）之间的流量日志，然后比较这两个日志。无论 mIRC 发送什么不同的命令，都应该清楚地说明您需要对您的机器人进行哪些更改。

# angularjs - 如何在angularjs中渲染之前编译过滤器的结果

> ID：13655141
> 
> 赞同：4
> 
> 时间：2012-12-01T00:32:51.940
> 
> 标签：angularjs

我有一个网络应用程序，用户可以在其中输入“富文本”内容（tinymce）并可能输入超链接。在我的 Angular 应用程序中，我使用 ng-bind-html-unsafe 在 div 中呈现它以保留所有格式。我想将“ng-click”附加到该内容中的所有 a href 上。我创建了一个过滤器来解析内容并将“ng-click”文本添加到生成的 html 中。我询问了 DOM 并看到了 ng-click="alert('test')" 但是我缺少一些东西，过滤器的输出没有被“连接”（编译）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T23:35:36.997

真正的答案是我需要在指令中执行此操作，而不是过滤器。Roy 的链接[https://stackoverflow.com/a/13405548/295797](https://stackoverflow.com/a/13405548/295797)提供了必要的指导。[回答自己的问题以从“未回答”队列中清除]

# android - 在 videoView 中播放 youtube 视频

> ID：13655143
> 
> 赞同：0
> 
> 时间：2012-12-01T00:33:46.120
> 
> 标签：android, youtube, android-videoview

我正在尝试在 videoView 中播放 youtube 视频。

我在这里找到了一个可以完成这项工作的示例： [http ://code.google.com/p/android-youtube-player/](http://code.google.com/p/android-youtube-player/)

对于某些视频 ID，它可以正常工作，对于其他一些视频，我会收到一个对话框：

通信错误：在检索视频期间发生错误。这可能是由于网络问题或 Youtube 协议造成的。请稍后再试。

我一次又一次地尝试那些视频ID，它不起作用。

这是我在 logcat 中遇到的异常：

```
12-01 01:24:20.871: E/QueryYouTubeTask(21326): Error occurred while retrieving information from YouTube.
12-01 01:24:20.871: E/QueryYouTubeTask(21326): java.lang.NullPointerException
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at libcore.net.UriCodec.decode(UriCodec.java:153)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at java.net.URLDecoder.decode(URLDecoder.java:45)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at com.keyes.youtube.YouTubeUtility.calculateYouTubeUrl(YouTubeUtility.java:137)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at com.keyes.youtube.OpenYouTubePlayerActivity$QueryYouTubeTask.doInBackground(OpenYouTubePlayerActivity.java:385)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at com.keyes.youtube.OpenYouTubePlayerActivity$QueryYouTubeTask.doInBackground(OpenYouTubePlayerActivity.java:1)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-01 01:24:20.871: E/QueryYouTubeTask(21326):  at java.lang.Thread.run(Thread.java:856)
12-01 01:24:20.902: E/QueryYouTubeTask(21326): Error playing video!
12-01 01:24:20.902: E/QueryYouTubeTask(21326): java.lang.RuntimeException: Invalid NULL Url.
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at com.keyes.youtube.OpenYouTubePlayerActivity$QueryYouTubeTask.onPostExecute(OpenYouTubePlayerActivity.java:418)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at com.keyes.youtube.OpenYouTubePlayerActivity$QueryYouTubeTask.onPostExecute(OpenYouTubePlayerActivity.java:1)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at android.os.AsyncTask.finish(AsyncTask.java:631)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at android.os.AsyncTask.access$600(AsyncTask.java:177)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at android.os.Looper.loop(Looper.java:137)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at java.lang.reflect.Method.invokeNative(Native Method)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at java.lang.reflect.Method.invoke(Method.java:511)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-01 01:24:20.902: E/QueryYouTubeTask(21326):  at dalvik.system.NativeStart.main(Native Method) 
```

任何人都有一个想法，这里有什么问题？你有解释吗，为什么有些视频可以正常工作而其他视频不行？可能有视频私有和视频公开吗？

最后我得到了解决方案：一些视频无法播放，因为视频所有者没有将视频放到手机上:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:27:32.743

最后我得到了解决方案：一些视频无法播放，因为视频所有者没有将视频放到手机上:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:04:32.280

这不是 YouTube 官方支持的功能，因此可能存在此库无法正确处理的情况，在 Google I/O 2012 期间，Google 表示他们将“很快”发布官方 YouTube 库，这将使 Android 开发人员能够播放视频从他们的应用程序内部。

# eclipse - eclipse IDE运行错误读取/.metadata/.log

> ID：13655147
> 
> 赞同：0
> 
> 时间：2012-12-01T00:34:18.820
> 
> 标签：eclipse, exception, ide, workspace

上一篇：Ubuntu，这样安装Eclipse：

```
tar -zxvf eclipse.XX.YY.tar.gz
mv eclipse.XX.YY ~/opt
sudo nano /usr/share/applications/eclipse.desktop

[Desktop Entry]
Name=Eclipse
Type=Application
Exec=/home/user/opt/eclipse/eclipse  #watch the directory!
Terminal=false
Icon=/home/usr/opt/eclipse/icon.xpm
Comment=Integrated Development Environment
NoDisplay=false
Categories=Development;IDE
Name[en]=eclipse.desktop

cd /usr/local/bin
ln -s /opt/eclipse/eclipse 
```

之后（我之前有一个工作区）运行 eclipse 会抛出一个错误来读取工作区/.metadata/.log 有人建议删除：/YOUR PATH TO WORKSPACE/.metadata/.plugins/org.eclipse.core.resources like here [http://bugsanddebugs.blogspot.com/2010/06/when-eclipse-says-error-has-occurred.html](http://bugsanddebugs.blogspot.com/2010/06/when-eclipse-says-error-has-occurred.html) 但运行 eclipse -clean 给出了同样的错误。这篇几乎详尽无遗的文章有点帮助...... [http://www.eclipsezone.com/eclipse/forums/t99010.html](http://www.eclipsezone.com/eclipse/forums/t99010.html) 但仍然无法理解错误：

```
~/workspace$ egrep -A 2 "Caused by" ~/workspace/.metadata/.log 
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.equinox.console.command.adapter.Activator.start() of bundle org.eclipse.equinox.console.
   at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
   at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
--
Caused by: org.osgi.framework.BundleException: Exception in org.apache.felix.gogo.command.Activator.start() of bundle org.apache.felix.gogo.command.
   at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
   at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
--
Caused by: java.lang.NoClassDefFoundError: org.apache.felix.gogo.command.OBR
   at java.lang.Class.initializeClass(libgcj.so.12)
   at org.apache.felix.gogo.command.Activator.start(Activator.java:54)
--
Caused by: java.lang.ClassNotFoundException: org.apache.felix.bundlerepository.Repository
   at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
   at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
--
Caused by: java.lang.ClassNotFoundException: org.apache.felix.bundlerepository.Repository
   at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
   at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421) 
```

如何阅读这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:01:20.753

尝试将 JRE 文件夹复制到 Eclipse 文件夹。它可能会解决问题。无论如何它对我有用。Eclipse 无法启动的原因是它是从旧版本的 JVM 启动的。有关更多详细信息，请参阅此参考：**[eclipse won't start](http://www.eclipse.org/forums/index.php/t/405887/)**。

# python - 如何在 wxPython 中管理动态的、不断变化的主菜单？

> ID：13655152
> 
> 赞同：1
> 
> 时间：2012-12-01T00:34:49.430
> 
> 标签：python, wxpython

我正在用 wxPython 编写一个基于文档的应用程序，我的意思是用户可以在多个窗口或选项卡中一次打​​开多个文档。有多种文档，并且文档都可以处于不同的“状态”，这意味着主菜单中应该有不同的菜单选项可用。

我知道如何使用该`wx.EVT_UPDATE_UI`事件禁用和启用菜单项，但我无法弄清楚如何根据当前具有焦点的文档来彻底改变结构和内容的主菜单。我的主要问题之一是主菜单是在顶层窗口中创建的，它必须调用尚未创建的孙子和曾孙中的方法。

* * *

人为的例子；打开“JPEG”类型的文档时，主菜单应如下所示：

```
文件编辑压缩帮助
```

当用户将焦点（CTRL+Tab）切换到“PDF”类型的文档时，主菜单应更改为：

```
文件编辑 PDF 发布帮助
```

并且“编辑”菜单应该包含一些与“JPEG”文档成为焦点时不同的选项。

* * *

当前我只是`create_main_menu`在顶层窗口中调用的函数中创建菜单，文档面板无法控制它。要实现我上面描述的那种主菜单方案，特别是在 wxPython 中，需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:36:19.340

我想出了一个非常干净的方法来做到这一点。首先，我创建了我的“基本”主菜单栏，其中包含*文件*和*帮助*菜单项。然后我定义了一个类`EditorPanel`而不是它的子类，`wx.Panel`并定义了方法`bind_main_menu_bar`和`release_main_menu_bar`。这些方法中的第一个在面板获得焦点时接收主菜单栏，并向其中添加一些项目。这是我的实现之一：

```
def bind_main_menu_bar(self, main_menu_bar):
    main_frame = wx.GetApp().GetTopWindow()

    self.main_menu_bar = main_menu_bar

    # Create the edit menu.
    self.edit_menu = edit_menu = shared.create_menu([
        (const.ID_UNDO, self.LABEL_UNDO_EMPTY),
        (const.ID_REDO, self.LABEL_REDO_EMPTY)
    ])

    # Create the tools menu.
    self.tools_menu = tools_menu = shared.create_menu([
        (const.ID_SELECT_ADDRESS_COLUMNS, 'Select address columns...'),
        (),
        (const.ID_VALIDATE_ADDRESSES, 'Validate selected addresses'),
        (const.ID_VALIDATE_ALL_ADDRESSES, 'Validate all addresses')
    ])

    # Bind some menu event handlers to the main frame.
    main_frame.Bind(wx.EVT_MENU, self.on_menu)
    main_frame.Bind(wx.EVT_UPDATE_UI, self.on_menu_update)

    # Insert the new menus into the main menu bar.
    main_menu_bar.Insert(1, edit_menu, 'Edit')
    main_menu_bar.Insert(2, tools_menu, 'Tools') 
```

现在，当打开该编辑器面板时，主菜单会收到一个 Edit 菜单和一个绑定到事件处理程序的 Tools 菜单`EditorPanel`，这非常方便。当编辑器失去焦点时，将`release_main_menu_bar`调用该方法，该方法应将主菜单栏恢复到其原始状态。这是上面代码的对应部分：

```
def release_main_menu_bar(self):
    main_frame = wx.GetApp().GetTopWindow()

    # Unbind the menu event handlers from the main frame.
    main_frame.Unbind(wx.EVT_MENU, handler=self.on_menu)
    main_frame.Unbind(wx.EVT_UPDATE_UI, handler=self.on_menu_update)

    # Remove the edit and tools menu from the main menu bar.
    self.main_menu_bar.Remove(1)
    self.main_menu_bar.Remove(1)

    # Reset the fields used for the menu.
    self.edit_menu = None
    self.tools_menu = None
    self.main_menu_bar = None 
```

所以每个想要编辑主菜单的编辑器只需要继承这两个方法，他们就可以完全控制。主框架将监视用户何时在编辑器之间切换并相应地调用方法。最大的问题是要弄清楚编辑器面板何时接收和失去焦点，这是我的另一个问题的主题：[如何监控 wx.Panel 何时接收和失去焦点？](https://stackoverflow.com/q/13675457/388916)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:46:58.270

可能使用标准 wx.Menu 的唯一方法是销毁并重新创建整个菜单栏。你也许可以隐藏它。无论哪种方式，我认为将一组方法组合在一起来按需创建每个菜单栏是最简单的。然后你可以摧毁一个并创造另一个。

你也可以看看 FlatMenu，因为它是纯 Python 并且更容易破解。

# php - 在 php 中调用 jQuery 函数（或修改 javascript 以便 php 运行剩余代码）

> ID：13655165
> 
> 赞同：0
> 
> 时间：2012-12-01T00:36:38.917
> 
> 标签：php, javascript, jquery

我在 php 中调用必要的 jQuery 函数时遇到了困难，所以我将它们添加到 javascript，但是我熟悉的方法（成功函数）阻止 php 执行除 INSERT INTO 和 SELECT 查询之外的任何操作。我将如何更改此脚本以完成 php，和/或如何组合代码以完成以下操作？

验证表格（男性和女性有单独的规则）

如果验证成功：Both Genders: parent.close_field('notice'); （目前仅适用于 javascript）

如果性别是女性：

*   在 customer_info 表中插入信息
*   标识分配给此帐户的 user_id
*   将用户重定向到下一页（目前在 php 和 javascript 中）

如果性别是男性：

*   生成电子邮件通知我请求
*   将信息插入到邀请请求表中
*   给男士的回声信息（目前在两者中；首选方法是在 php 中）
*   关闭 Fancybox iframe（目前仅适用于 javascript）

我正在使用 fancybox2 和这个 jQuery 验证插件[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

Javascript

```
var $custInfo = $("#customer_info");
$(document).ready(function () {
  var validator = $custInfo.validate({
    rules: {...},
    messages: {...},
    errorLabelContainer: "#messageBox",
    submitHandler: function () {
        $custInfo.ajaxSubmit({
            success: function () {
                if ($('input[name=gender][value=female]').is(':checked')) {
                    parent.close_field('notice');
                    window.location.href = "page1.html";
                } else if ($('input[name=gender][value=male]').is(':checked')) {
                    parent.close_field('notice');
                    parent.$.fancybox.close();
                    alert("This isn’t available yet for men, but we’ll send you an invitation as soon as it is");
                }
            }
        });
    }
  });
  $custInfo.find("input[name=gender]").change(function () {
    if ($(this).val() == "male") {
        $custInfo.submit();
    }
  });
}); 
```

PHP

```
<?php
//Start session and connection to database goes here
//Function to sanitize values received from the form goes here     
$gender = $_POST['gender'];
if ($gender==="female" ) {
    // INSERT information into customer_info table    
   $qry = "INSERT INTO customer_info(fname, lname, gender, zip, email, phone, terms, security_question, security_answer, participating_retailers, notify_new_items, notify_promotions, priority1, priority2, priority3, priority4, priority5, gift_privacy, user_name, password, Quickfill)      VALUES('$_POST[fname]','$_POST[lname]','$_POST[gender]','$_POST[zip]','$_POST[email]','$_POST[phone]','$_POST[terms]','$_POST[security_question]','$_POST[security_answer]','$_POST[participating_retailers]','$_POST[notify_new_items]','$_POST[notify_promotions]','$_POST[priority1]','$_POST[priority2]','$_POST[priority3]','$_POST[priority4]','$_POST[priority5]','$_POST[gift_privacy]','$user_name','".md5($_POST['password'])."','$_POST[Quickfill]')";
       $result = @mysql_query($qry);     
    if($result) {   

// Identifies user_id assigned to this account
          $qry="SELECT * FROM customer_info WHERE user_name='$user_name' AND password='".md5($_POST['password'])."'";
          $result=mysql_query($qry);            
    if($result) {
        if(mysql_num_rows($result) == 1) {
            session_regenerate_id();
            $member = mysql_fetch_assoc($result);
            $_SESSION['SESS_USER_ID'] = $member['user_id'];
            $_SESSION['SESS_USER_NAME'] = $member['user_name'];
            session_write_close();
// Redirects user to the next page
            header("location: page1.html");
            exit();
        }else {  //user_name failed
            header("location: login_failed.html");
            exit();  }   
    }else { die("Unable to access your account (Error Message 1)");   }    
    }else { die("Unable to access your account (Error Message 2)");   } 
  }   
// If Gender is Male    
  else { 
// Notify us of request via email    
$sendto  = "info@click2fit.com";$userfname = $_POST['fname'];$userlname = $_POST['lname'];$usermail = $_POST['email'];$gender = $_POST['gender'];$subject  = "Invite Request - " . ($gender) . " ";
// INSERT information into invite_requests table
   $qry = "INSERT INTO invite_requests(fname, lname, gender, zip, email, phone, terms, participating_retailers, notify_new_items, notify_promotions, priority1, priority2, priority3, priority4, priority5, gift_privacy, user_name, password, Quickfill)         VALUES('$_POST[fname]','$_POST[lname]','$_POST[gender]','$_POST[zip]','$_POST[email]','$_POST[phone]','$_POST[terms]','$_POST[participating_retailers]','$_POST[notify_new_items]','$_POST[notify_promotions]','$_POST[priority1]','$_POST[priority2]','$_POST[priority3]','$_POST[priority4]','$_POST[priority5]','$_POST[gift_privacy]','$user_name','".md5($_POST['password'])."','$_POST[Quickfill]')";
    $result = @mysql_query($qry);
 // Echo message to Men
  echo "<p><strong>Click2Fit is not yet available for men, but we'll be sure to send an invitation as soon as it is</strong></p>"; 
// Redirects user - This should be replaced with the function which closes the fancybox iframe
  header("location: home.html");
exit();     
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:35:51.780

重要的是要了解 javascript 是一种客户端语言（意味着它在用户的浏览器中运行），而 php 是一种服务器端语言（意味着它在您的服务器上运行）。为了让 javascript 和 php 相互交互，您将需要使用 AJAX。

由于您已经在使用 jQuery，我建议您查看他们的[AJAX api](http://api.jquery.com/jQuery.ajax/)。本质上，每次你想从你的 javascript 代码中调用一个 php 函数时，你都会有这样的东西：

```
$.ajax({
  type: "POST", /*usually POST, but it can also be GET and some other HTTP requests in certain browsers*/
  url: "some.php", /*the url of the php which processes your data*/
  data: { name: "John", location: "Boston" } /*the data you want to pass to the server.  It will be contained in the $_POST array because of the 'type: "POST"' line above*/
}).done(function( msg ) {
  alert( "Data Saved: " + msg ); /*'msg' is what server send back to you while the contents of the function are what you do once the server finishes.  You can change the variable name, msg, as well as the function contents to suit your needs */
}); 
```

# python - 有没有办法让 collections.Counter (Python2.7) 知道它的输入列表是排序的？

> ID：13655169
> 
> 赞同：9
> 
> 时间：2012-12-01T00:37:21.493
> 
> 标签：python, performance, python-2.7, counter

# 问题

我一直在尝试不同的方法（在 Python 2.7 中）从语料库或字符串列表中提取（单词、频率）元组列表，并比较它们的效率。据我所知，在未排序列表的正常情况下，模块中的`Counter`方法`collections`优于我在其他地方提出或发现的任何方法，但它似乎并没有充分利用 a 的好处预先排序的列表，我想出了在这种特殊情况下轻松击败它的方法。因此，简而言之，是否有任何内置方法可以通知`Counter`列表已经排序以进一步加快速度？

（下一部分是关于 Counter 发挥神奇作用的未排序列表；您可能想跳到最后，在处理排序列表时它会失去魅力。）

# 未排序的输入列表

## 一种行不通的方法

天真的方法是使用`sorted([(word, corpus.count(word)) for word in set(corpus)])`，但是一旦您的语料库有几千个项目长，这种方法就会可靠地让您陷入运行时问题 - 这并不奇怪，因为您多次遍历 n 个单词 m 的整个列表，其中 m 是唯一词的数量。

## 排序列表+本地搜索

所以我在发现之前尝试做`Counter`的是通过首先对输入列表进行排序来确保所有搜索都是严格本地的（我还必须删除数字和标点符号并将所有条目转换为小写以避免像'foo'这样的重复， 'Foo' 和 'foo:'）。

```
#Natural Language Toolkit, for access to corpus; any other source for a long text will do, though.
import nltk 

# nltk corpora come as a class of their own, as I udnerstand it presenting to the
# outside as a unique list but underlyingly represented as several lists, with no more
# than one ever loaded into memory at any one time, which is good for memory issues 
# but rather not so for speed so let's disable this special feature by converting it
# back into a conventional list:
corpus = list(nltk.corpus.gutenberg.words()) 

import string
drop = string.punctuation+string.digits  

def wordcount5(corpus, Case=False, lower=False, StrippedSorted=False):
    '''function for extracting word frequencies out of a corpus. Returns an alphabetic list
    of tuples consisting of words contained in the corpus with their frequencies.  
    Default is case-insensitive, but if you need separate entries for upper and lower case 
    spellings of the same words, set option Case=True. If your input list is already sorted
    and stripped of punctuation marks/digits and/or all lower case, you can accelerate the 
    operation by a factor of 5 or so by declaring so through the options "Sorted" and "lower".'''
    # you can ignore the following 6 lines for now, they're only relevant with a pre-processed input list
    if lower or Case:
        if StrippedSorted:
            sortedc = corpus 
        else:    
            sortedc = sorted([word.replace('--',' ').strip(drop)
                   for word in sorted(corpus)])
    # here we sort and purge the input list in the default case:
    else:
            sortedc = sorted([word.lower().replace('--',' ').strip(drop)
                   for word in sorted(corpus)])
    # start iterating over the (sorted) input list:
    scindex = 0
    # create a list:
    freqs = []
    # identify the first token:
    currentword = sortedc[0]
    length = len(sortedc)
    while scindex < length:
        wordcount = 0
        # increment a local counter while the tokens == currentword
        while scindex < length and sortedc[scindex] == currentword:
            scindex += 1
            wordcount += 1
        # store the current word and final score when a) a new word appears or
        # b) the end of the list is reached
        freqs.append((currentword, wordcount))
        # if a): update currentword with the current token
        if scindex < length:
            currentword = sortedc[scindex]
    return freqs 
```

## 发现`collections.Counter`

这要好得多，但仍然不如使用集合模块中的 Counter 类快，后者会创建一个 {word: frequency of word} 条目的字典（我们仍然必须进行相同的剥离和降低，但不进行排序） ：

```
from collections import Counter
cnt = Counter()
for word in [token.lower().strip(drop) for token in corpus]:
    cnt[word] += 1
# optionally, if we want to have the same output format as before,
# we can do the following which negligibly adds in runtime:
wordfreqs = sorted([(word, cnt[word]) for word in cnt]) 
```

在古腾堡语料库与 appr。200 万个条目，Counter 方法在我的机器上大约快 30%（5 秒而不是 7.2 秒），这主要是通过大约 2.1 秒的排序例程来解释的（如果你没有也不想安装提供对该语料库的访问的 nltk 包（自然语言工具包），任何其他足够长的文本在单词级别适当地拆分为字符串列表都会向您显示相同的内容。）

## 比较性能

使用我使用重言式作为延迟执行条件的特殊计时方法，这为我们提供了计数器方法：

```
import time
>>> if 1:
...     start = time.time()
...     cnt = Counter()
...     for word in [token.lower().strip(drop) for token in corpus if token not in [" ", ""]]:
...         cnt[word] += 1
...     time.time()-start
...     cntgbfreqs = sorted([(word, cnt[word]) for word in cnt])
...     time.time()-start
... 
4.999882936477661
5.191655874252319 
```

（我们看到最后一步，将结果格式化为元组列表，占用的时间不到总时间的 5%。）

与我的功能相比：

```
>>> if 1:
...     start = time.time()
...     gbfreqs = wordcount5(corpus)
...     time.time()-start
... 
7.261770963668823 
```

# 排序的输入列表 - 当`Counter`“失败”时

但是，您可能已经注意到，我的函数允许指定输入已经排序，去除了标点垃圾，并转换为小写。如果我们已经为其他一些操作创建了这样一个列表的转换版本，使用它（并声明）可以大大加快 my 的操作`wordcount5`：

```
>>> sorted_corpus = sorted([token.lower().strip(drop) for token in corpus if token not in [" ", ""]])
>>> if 1:
...     start = time.time()
...     strippedgbfreqs2 = wordcount5(sorted_corpus, lower=True, StrippedSorted=True)
...     time.time()-start
... 
0.9050078392028809 
```

在这里，我们将运行时间减少了大约 1 倍。8 不必对语料库进行排序和转换项目。当然，后者在`Counter`使用这个新列表时也是如此，因此可以预期它也会更快一些，但它似乎没有利用它已排序的事实，现在它需要的时间是我的函数的两倍之前快 30%：

```
>>> if 1:
...     start = time.time()
...     cnt = Counter()
...     for word in sorted_corpus:
...         cnt[word] += 1
...     time.time()-start
...     strippedgbfreqs = [(word, cnt[word])for word in cnt]
...     time.time()-start
... 
1.9455058574676514
2.0096349716186523 
```

当然，我们可以使用我使用的相同逻辑`wordcount5`- 递增本地计数器直到遇到一个新单词，然后才将最后一个单词与计数器的当前状态一起存储，并将下一个单词的计数器重置为 0 -仅用`Counter`作存储，但该`Counter`方法的固有效率似乎丢失了，并且性能在我创建字典的函数范围内，转换为元组列表的额外负担现在看起来比以前更麻烦正在处理原始语料库：

```
>>> def countertest():
...     start = time.time()
...     sortedcnt = Counter()
...     c = 0
...     length = len(sorted_corpus)
...     while c < length:
...         wcount = 0
...         word = sorted_corpus[c]
...         while c < length and sorted_corpus[c] == word:
...             wcount+=1
...             c+=1
...         sortedcnt[word] = wcount
...         if c < length:
...             word = sorted_corpus[c]
...     print time.time()-start
...     return sorted([(word, sortedcnt[word]) for word in sortedcnt])
...     print time.time()-start
... 
>>> strippedbgcnt = countertest()
0.920727014542
1.08029007912 
```

（结果的相似性并不令人惊讶，因为我们实际上禁用了`Counter`自己的方法并滥用它作为使用与以前相同的方法获得的值的存储。）

因此，我的问题：是否有一种更惯用的方式来通知`Counter`其输入列表已经排序并使其将当前键保留在内存中，而不是每次它 - 可以预见地 - 遇到相同的下一个标记时重新查找它单词？换句话说，是否可以通过将**/****类的固有效率与排序列表的明显好处****相结合来进一步提高预排序列表的性能`Counter``dictionary`**，或者我是否已经在 0.9 秒的硬性限制上进行计数？ 2M 条目的列表？

可能没有很大的改进空间 - 当我做我能想到的最简单的事情时，我得到大约 0.55 秒的时间，这仍然需要遍历同一个列表并检查每个单独的值，并且 0.25 表示`set(corpus)`没有计数，但也许那里有一些 itertools 魔法可以帮助接近这些数字？

（注意：我是 Python 和一般编程的相对新手，如果我错过了一些明显的东西，请原谅。）

## 12月1日编辑：

另一件事，除了排序本身，这使我上面的所有方法都变慢了，将 2M 字符串中的每一个都转换为小写，并去除它们可能包含的任何标点符号或数字。我之前尝试过通过计算未处理的字符串来简化它，然后才转换结果并在添加它们的计数时删除重复项，但我一定做错了什么，因为它让事情变得如此缓慢。因此，我恢复到以前的版本，转换原始语料库中的所有内容，现在无法完全重建我在那里所做的事情。

如果我现在尝试，我确实从最后转换字符串中得到了改进。我仍然通过遍历（结果）列表来做到这一点。我所做的是编写了几个函数，它们将在它们之间转换 JF Sebastian 获胜的 default_dict 方法（格式为`[("word", int), ("Word", int)], ("word2", int),...]`) 转换为小写并去掉标点符号，并折叠在该操作之后保持相同的所有键的计数（下面的代码）。优点是我们现在正在处理一个大约 50k 条目的列表，而不是语料库中 > 2M 的条目。这样，我现在从语料库（作为列表）到不区分大小写的字数计数（忽略我机器上的标点符号）的时间为 1.25 秒，低于使用 Counter 方法和字符串转换作为第一步的大约 4.5 秒。但也许有一种基于字典的方法可以用于我正在做的事情`sum_sorted()`？

**代码：**

```
def striplast(resultlist, lower_or_Case=False):
    """function for string conversion of the output of any of the `count_words*` methods"""
    if lower_or_Case:
        strippedresult = sorted([(entry[0].strip(drop), entry[1]) for entry in resultlist])
    else:
        strippedresult = sorted([(entry[0].lower().strip(drop), entry[1]) for entry in resultlist])
    strippedresult = sum_sorted(strippedresult)
    return strippedresult

def sum_sorted(inputlist):
    """function for collapsing the counts of entries left identical by striplast()"""
    ilindex = 0
    freqs = []
    currentword = inputlist[0][0]
    length = len(inputlist)
    while ilindex < length:
        wordcount = 0
        while ilindex < length and inputlist[ilindex][0] == currentword:
            wordcount += inputlist[ilindex][1]
            ilindex += 1
        if currentword not in ["", " "]:
            freqs.append((currentword, wordcount))
        if ilindex < length and inputlist[ilindex][0] > currentword:
            currentword = inputlist[ilindex][0]
    return freqs

def count_words_defaultdict2(words, loc=False): 
    """modified version of J.F. Sebastian's winning method, added a final step collapsing
    the counts for words identical except for punctuation and digits and case (for the 
    latter, unless you specify that you're interested in a case-sensitive count by setting
    l(ower_)o(r_)c(ase) to True) by means of striplast()."""
    d = defaultdict(int)
    for w in words:
        d[w] += 1
    if col=True:
        return striplast(sorted(d.items()), lower_or_case=True)
    else:
        return striplast(sorted(d.items())) 
```

我第一次尝试使用 groupy 来完成当前由`sum_sorted()`, 和/或完成的工作`striplast()`，但我无法完全弄清楚如何欺骗它对' 排序的结果`[entry[1]]`中的条目列表求和。我得到的最接近的是：`count_words``entry[0]`

```
# "i(n)p(ut)list", toylist for testing purposes:

list(groupby(sorted([(entry[0].lower().strip(drop), entry[1]) for entry in  iplist])))

# returns:

[(('a', 1), <itertools._grouper object at 0x1031bb290>), (('a', 2), <itertools._grouper object at 0x1031bb250>), (('a', 3), <itertools._grouper object at 0x1031bb210>), (('a', 5), <itertools._grouper object at 0x1031bb2d0>), (('a', 8), <itertools._grouper object at 0x1031bb310>), (('b', 3), <itertools._grouper object at 0x1031bb350>), (('b', 7), <itertools._grouper object at 0x1031bb390>)]

# So what I used instead for striplast() is based on list comprehension:

list(sorted([(entry[0].lower().strip(drop), entry[1]) for entry in  iplist]))

# returns:

[('a', 1), ('a', 2), ('a', 3), ('a', 5), ('a', 8), ('b', 3), ('b', 7)] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T00:44:55.533

给定您提到的单词排序列表，您是否尝试过传统的 Pythonic 方法`itertools.groupby`？

```
from itertools import groupby
some_data = ['a', 'a', 'b', 'c', 'c', 'c']
count = dict( (k, sum(1 for i in v)) for k, v in groupby(some_data) ) # or
count = {k:sum(1 for i in v) for k, v in groupby(some_data)}
# {'a': 2, 'c': 3, 'b': 1} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-01T03:23:15.133

回答标题中的问题：Counter、dict、defaultdict、OrderedDict 是基于散列的类型：为了查找一个项目，他们计算一个键的散列并使用它来获取项目。它们甚至支持没有定义顺序的键，只要它们是可散列的，即 Counter 不能利用预排序的输入。

测量结果表明，输入单词的排序比使用基于字典的方法计算单词和对结果进行排序要花费更长的时间：

```
sorted                  3.19
count_words_Counter     2.88
count_words_defaultdict 2.45
count_words_dict        2.58
count_words_groupby     3.44
count_words_groupby_sum 3.52 
```

此外，已经排序的输入中的单词计数`groupby()`只需要首先对输入进行排序所需的时间的一小部分，并且比基于 dict 的方法更快。

```
def count_words_Counter(words):
    return sorted(Counter(words).items())

def count_words_groupby(words):
    return [(w, len(list(gr))) for w, gr in groupby(sorted(words))]

def count_words_groupby_sum(words):
    return [(w, sum(1 for _ in gr)) for w, gr in groupby(sorted(words))]

def count_words_defaultdict(words):
    d = defaultdict(int)
    for w in words:
        d[w] += 1
    return sorted(d.items())

def count_words_dict(words):
    d = {}
    for w in words:
        try:
            d[w] += 1
        except KeyError:
            d[w] = 1
    return sorted(d.items())

def _count_words_freqdist(words):
    # note: .items() returns words sorted by word frequency (descreasing order)
    #       (same as `Counter.most_common()`)
    #       so the code sorts twice (the second time in lexicographical order)
    return sorted(nltk.FreqDist(words).items()) 
```

要重现结果，请[运行此代码](https://gist.github.com/4180407/54b8a2b406051bdb419d3f6df124fa79e3aed06d)。

注意：如果将nltk的惰性词序列转换为列表，速度会快3倍（`WORDS = list(nltk.corpus.gutenberg.words())`但相对性能是一样的：

```
sorted                  1.22
count_words_Counter     0.86
count_words_defaultdict 0.48
count_words_dict        0.54
count_words_groupby     1.49
count_words_groupby_sum 1.55 
```

结果类似于[Python - 字典查找每个字符的频率是否很慢？](https://stackoverflow.com/questions/2522152/python-is-a-dictionary-slow-to-find-frequency-of-each-character).

如果您想规范化单词（删除标点符号，将它们设为小写等）；[请参阅Python 中将字符串转换为全小写去除所有非 ascii 字母字符的最有效方法是什么的](https://stackoverflow.com/questions/638893/what-is-the-most-efficient-way-in-python-to-convert-a-string-to-all-lowercase-st)答案？. 一些例子：

```
def toascii_letter_lower_genexpr(s, _letter_set=ascii_lowercase):
    """
    >>> toascii_letter_lower_genexpr("ABC,-.!def")
    'abcdef'
    """
    return ''.join(c for c in s.lower() if c in _letter_set)

def toascii_letter_lower_genexpr_set(s, _letter_set=set(ascii_lowercase)):
    return ''.join(c for c in s.lower() if c in _letter_set)

def toascii_letter_lower_translate(s,
    table=maketrans(ascii_letters, ascii_lowercase * 2),
    deletechars=''.join(set(maketrans('', '')) - set(ascii_letters))):
    return s.translate(table, deletechars)

def toascii_letter_lower_filter(s, _letter_set=set(ascii_letters)):
    return filter(_letter_set.__contains__, s).lower() 
```

同时计算和规范化单词：

```
def combine_counts(items):
    d = defaultdict(int)
    for word, count in items:
        d[word] += count
    return d.iteritems()

def clean_words_in_items(clean_word, items):
    return ((clean_word(word), count) for word, count in items)

def normalize_count_words(words):
    """Normalize then count words."""
    return count_words_defaultdict(imap(toascii_letter_lower_translate, words))

def count_normalize_words(words):
    """Count then normalize words."""
    freqs = count_words_defaultdict(words)
    freqs = clean_words_in_items(toascii_letter_lower_translate, freqs)
    return sorted(combine_counts(freqs)) 
```

[结果](https://gist.github.com/4180407/f1667f7d2304d5d1d3e749c4aef330b5ecc3522c)

我已经更新了基准来测量`count_words*()`和`toascii*()`函数的各种组合（未显示 5x4 对）：

```
toascii_letter_lower_filter      0.954 usec small
toascii_letter_lower_genexpr     2.44 usec small
toascii_letter_lower_genexpr_set 2.19 usec small
toascii_letter_lower_translate   0.633 usec small

toascii_letter_lower_filter      124 usec random 2000
toascii_letter_lower_genexpr     197 usec random 2000
toascii_letter_lower_genexpr_set 121 usec random 2000
toascii_letter_lower_translate   7.73 usec random 2000

sorted                  1.28 sec 
count_words_Counter     941 msec 
count_words_defaultdict 501 msec 
count_words_dict        571 msec 
count_words_groupby     1.56 sec 
count_words_groupby_sum 1.64 sec 

count_normalize_words 622 msec 
normalize_count_words 2.18 sec 
```

最快的方法：

*   规范化单词 -`toascii_letter_lower_translate()`

*   count words (presorted input) -`groupby()`基于方法

*   数词——`count_words_defaultdict()`

*   首先计算单词然后标准化它们会更快 -`count_normalize_words()`

最新版本的代码：[count-words-performance.py](https://gist.github.com/4180407/#file_count_words_performance.py)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T12:33:58.690

OP 代码效率低下的一个原因（几个答案在没有评论的情况下得到了修复）是过度依赖中间列表。当生成器会做的时候，没有理由创建一个包含数百万个单词的临时列表来迭代它们。

所以而不是

```
cnt = Counter()
for word in [token.lower().strip(drop) for token in corpus]:
    cnt[word] += 1 
```

它应该只是

```
cnt = Counter(token.lower().strip(drop) for token in corpus) 
```

如果你真的想按字母顺序对字数进行排序（到底是为了什么？），替换这个

```
wordfreqs = sorted([(word, cnt[word]) for word in cnt]) 
```

有了这个：

```
wordfreqs = sorted(cnt.items())   # In Python 2: cnt.iteritems() 
```

`Counter`这应该消除使用（或以类似方式使用的任何字典类）的大部分低效率。

# less - less.js 和 styles.less 的目的是什么

> ID：13655171
> 
> 赞同：0
> 
> 时间：2012-12-01T00:37:37.190
> 
> 标签：less

有人可以解释为什么我要使用 less.js 脚本及其样式表吗？我不明白其目的及其优点。谢谢你。埃里克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T01:10:05.863

**Less.js**是一个 CSS 预处理器，这意味着您将能够在`*.less`文件中使用 Less 预处理器语言编写您的风格，然后 Less.js 会将其编译成纯 CSS。

CSS 预处理器带有许多强大的功能，例如：[变量](http://lesscss.org/)*、*混合*、*嵌套*规则*、*操作*、*导入*等等。

使用 Less.js，您有两种选择：

1.  **在客户端**运行 Less ：在 Less 中编写您的样式，然后包含 JavaScript 预处理器：`Less.js`.
2.  **在服务器端**运行 Less ：在 Less 中编写样式，然后使用 Node.js 或 Rhino 运行预处理器，在其他情况下，您可以使用[DotLess](http://www.dotlesscss.org/)等端口。

如果您有潜在的大型 Web 界面设计（复杂的布局、精灵、多个导航、多个表单等），那么您*应该*考虑使用流行的 CSS 预处理器之一，例如[Less.js](http://lesscss.org/)或[Sass](http://sass-lang.com)。*他们会帮助你很多*。

**请记住...**有一些大型项目构建在 CSS 预处理器之上，[Twitter Bootsrap](http://twitter.github.com/bootstrap/)使用 Less 和[Compass](http://compass-style.org/)是一个很棒的框架，它可以消除你与跨浏览器问题相关的痛苦，包括*inline-blocks*、*clearfix*、*box-shadow*， ETC...

# ruby-on-rails - 如何将可评论传递到邮件中？

> ID：13655172
> 
> 赞同：0
> 
> 时间：2012-12-01T00:37:39.703
> 
> 标签：ruby-on-rails, mailer

我在模型中有这个：

```
 after_create do |comment|
   CommentMailer.comment_email(self).deliver
  end 
```

这在 CommentMailer 中：

```
 class CommentMailer < ActionMailer::Base
  helper ActionView::Helpers::UrlHelper
  include CommentHelper
  helper :comment
 def comment_email(user, comment, commentable)
   mail(to: user.email,
        subject: "You have left a comment",
        from: "comments@lumeo.com",
        bcc: "brian@lumeo.com")
 end
end 
```

这在 CommentHelper 中：

```
module CommentHelper
  def find_commentable
    @comment = Comment.find(params[:comment])
    params.each do |name, value|
      if name =~ /(.+)_id$/
        return $1.classify.constantize.find(value)
      end
    end
    nil
  end
end 
```

我收到此错误：

```
Started POST "/requests/6/comments" for 127.0.0.1 at 2012-11-30 17:28:55 -0800
Processing by CommentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"R62NH5/EE34FPapEqy7mfpa0wKz18GtSdhH8MGYq2Ec=", "comment"=>{"content"=>"post", "show"=>"true"}, "commit"=>"Create Comment", "request_id"=>"6"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 ORDER BY users.created_at DESC LIMIT 1
  Request Load (0.3ms)  SELECT "requests".* FROM "requests" WHERE "requests"."id" = $1 LIMIT 1  [["id", "6"]]
  CACHE (0.0ms)  SELECT "requests".* FROM "requests" WHERE "requests"."id" = $1 LIMIT 1  [["id", "6"]]
   (0.1ms)  BEGIN
  SQL (0.4ms)  INSERT INTO "comments" ("commentable_id", "commentable_type", "content", "created_at", "show", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["commentable_id", 6], ["commentable_type", "Request"], ["content", "post"], ["created_at", Sat, 01 Dec 2012 01:28:55 UTC +00:00], ["show", true], ["updated_at", Sat, 01 Dec 2012 01:28:55 UTC +00:00], ["user_id", 2]]
   (0.2ms)  ROLLBACK
Completed 500 Internal Server Error in 136ms

ArgumentError (wrong number of arguments (1 for 3)):
  app/mailers/comment_mailer.rb:5:in `comment_email'
  app/models/comment.rb:27:in `block in <class:Comment>'
  app/controllers/comments_controller.rb:22:in `create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:56:47.687

看起来很简单的错别字。

第 7 行，如异常中所述：

```
commentable = @comment.commentable 
```

所以，问题：

*   你在打电话`@comment.commentabe`，但是`@comment`是`nil`
*   因此错误：`undefined method 'commentable' for nil:NilClass`
*   `@comment`在`nil`您的 mailer 方法中，因为您将其作为`comment`NOT传递`@comment`，但您试图将其引用为`@comment`.

另外，为什么您要`commentable`作为参数传入，但在第 7 行您要`commentable`再次设置 - 这是多余的？`commentable`只需使用您作为参数传入的已经可用的变量。实际上，您似乎使用多个变量来执行此操作，但我无法判断（因为您没有显示邮件模板）您是否实际使用它们。

可能是您可以使用更简单的东西，例如：

所以，这应该（可能）工作：

```
def comment_email(user, comment, commentable)
  mail(to: user.email,
       subject: "You have left a comment",
       from: "comments@lumeo.com",
       bcc: "brian@lumeo.com")
end 
```

如果您发布您的邮件模板（这样我可以看到电子邮件的正文是什么样的），我可以帮助您将变量放入模板中。

# java - 抽象概念分配

> ID：13655176
> 
> 赞同：-3
> 
> 时间：2012-12-01T00:38:13.263
> 
> 标签：java, implementation, abstract

所以我的问题直接针对我的家庭作业。在您问之前，是的，我已经查看了其他问题，并且查看了 java 文档以尝试帮助我，但我只了解这么多..

你已经成为餐厅大亨了。您拥有几家快餐连锁店。但是，您现在需要设置所有快餐连锁店都必须遵循的标准，以使您的软件全面统一。有一些规则对所有餐厅都是一样的。

创建一个名为 Restaurant 的抽象类

创建一个函数/方法，在调用时打印餐厅的名称。

创建一个名为总价的抽象函数/方法

创建一个名为菜单项的抽象函数/方法

创建抽象函数/方法名称位置

创建一个名为 McDonalds 的类来扩展 Restaurant

实现所有抽象方法

添加逻辑，以便总价方法/函数将给出包含 6% 税的餐食总价

添加一个返回名为 hasPlayPlace 的布尔值的方法。当此位置有游乐场时返回 true

创建一个构造函数，用于设置麦当劳的名称、位置和 hasPlayPlace

```
public class McDonalds extends Restaurant {
    private String name;
    private String location;
    private boolean hasPlayPlace;
    Scanner input = new Scanner(System.in);

    public McDonalds (String name, String location, boolean hasPlayPlace) {
        setName(name);
        setLocation(location);
        setHasPlayPlace(hasPlayPlace);
    }

    McDonalds location1 = new McDonalds("McDonalds", "Kirkman", false);
    McDonalds location2 = new McDonalds("McDonalds 2", "International Dr.", true);

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getLocation() {
        return location;
    }
    public void setLocation(String location){
        this.location = location;
    }
    public boolean isHasPlayPlace() {
        return hasPlayPlace;
    }
    public void setHasPlayPlace(boolean hasPlayPlace) {
        this.hasPlayPlace = hasPlayPlace;
    }

    public void totalPrice() {
        double totalPrice = 0;
        double tax = 0.06;
        totalPrice += (totalPrice * tax);       
    }

    public void menuItems() {
            //some syntax is wrong in this method
        double mcChicken = 1;
        double fries = 1.25;
        System.out.println("1\. Mc Chicken $1");
        System.out.println("2\. Fries $1.25");
        int choice = input.nextInt();
        switch (choice){
        case 1: mcChicken *= tax;
        case 2: fries *= tax;
        }

    }

    public void location() {
        //Don't know what's supposed to go in here.
        //But I've implemented the method as I was supposed to.
    }

} 
```

这一切是否有意义基本上就是我要问的。定位方法应该怎么做？这个类中的getter和setter有什么用，我做对了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:45:12.607

1）您的构造函数结构良好，但您应该使用`String`s 而不是`char`s 作为名称和位置。A`char`只能容纳一个字符。

2）您可以创建一个类的多个实例：

```
McDonalds location1 = new McDonalds("McDonald", "Kirkman", true);
McDonalds location2 = new McDonalds("McDonald2", "Kirkman", false); 
```

3) 您应该以百分比而不是总和的形式将税款添加到价格中：`price * 1.06`. 打印总价时，请注意不要更改不含税的价格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T00:44:00.447

`String`名称和位置不应该`char`。

我喜欢从构造函数中调用 setter 的风格，因为它是一种代码重用形式，特别是如果对这些值进行特殊检查，例如不为 null - 调用他的 setter 意味着您只在一个地方检查它。

你的代码不会编译，但你很接近：

```
McDonalds location1 = new McDonalds("Some name", "Kirkman", true); 
```

你的计算也有点偏差：

```
double tax = 0.06;
totalPrice *= (tax + 1); 
```

但是，这是危险的，因为如果调用两次，它将增加两次税收。最好有一个方法返回每次计算的含税价格。具有副作用的吸气剂是设计错误。即有：

```
public double getTaxIncPrice() {
    double tax = 0.06;
    return totalPrice * (1 + tax);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T00:48:24.667

除了Bohemian指出的问题（名称和位置应该是String，而不是char）：

您的构造函数调用需要在 String 参数上加上引号：

```
McDonalds location1 = new McDonalds("McDonald", "Kirkman", true); 
```

并且您的税收计算不正确 - 您需要将总额乘以税收百分比，并且您必须等到您实际有总额才能进行计算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T01:15:43.990

刚刚编辑了我的代码并提供了问题。到目前为止，你们的意见有所帮助。

```
public String TacoBellSauce(String fire, String hot, String mild) {
    System.out.println("What sauce would you like to have?");
    System.out.println("1\. Fire");
    System.out.println("2\. Hot");
    System.out.println("3\. Mild");
    int choice = input.nextInt();
    switch(choice) {
    case 1:
        return fire;
    case 2:
        return hot;
    case 3:
        return mild;
    }
    return null;
} 
```

这也是我的 TacoBell 类的方法。我将如何在测试类中返回它？它说要在 TacoBell 中创建一个方法，该方法返回一串我想要的辣酱。但是它在测试类中说调用 hotsauce 并返回 hot。我还没有创建那个类，因为我专注于用麦当劳和 TacoBell 来纠正一切。

# html - 框架集框架中的 IE9 文档模式

> ID：13655180
> 
> 赞同：1
> 
> 时间：2012-12-01T00:38:41.823
> 
> 标签：html, internet-explorer-9, frames, frameset, quirks-mode

我支持一个旧的、非常大的应用程序，它带有过时的选项卡、树视图、上下文菜单和框架集。它在左侧框架中布置有导航选项卡和树视图，在右侧布置数据输入框架。它完全依赖于 IE Quirks Mode。

这个应用程序太大了，一次完全重写是不可行的，所以我一直在研究增量更新的选项。我认为最明显的是在正确的数据输入框架中加载现代 MVC/HTML5 等屏幕。我在这方面取得了相当大的成功，只是我无法让屏幕在 IE9 文档模式下运行。如果我加载独立于旧框架集的现代屏幕，它们在 IE9 文档模式下运行没有问题，但是当在框架集中加载时，它们会退回到 IE8 文档模式。我尝试了各种元标记和 http 标头指令，但没有成功。这不一定是阻碍，但有什么办法可以解决这个问题？我认为这可能与 HTML5 中过时的框架有关？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T00:39:53.853

> 您的最后一句话回答了您的问题，框架集和框架在 HTML5 中确实已过时，因此它们无法在 IE9 标准模式下显示。

# class - Scala：从子类引用伴随对象

> ID：13655188
> 
> 赞同：2
> 
> 时间：2012-12-01T00:39:32.670
> 
> 标签：class, scala, case-class, companion-object

我正在考虑以下 Scala 类布局。我有一个代表 Item 的基本特征 - 一个应该是不可变对象的接口，我们可以通过调用以下方法查询名称、重量并执行一些特定于对象的事情`equip`：

```
trait Item {
  def name: String
  def weight: Int
  def equip // ... more abstract methods
} 
```

我可以创建`Item`实现，手动创建案例类，但我想要某种基于“字典”的项目 - 即静态映射保存从类型 ID 到值的映射，`name`并且`weight`方法只是使用存储类型查询字典ID：

```
object Weapon {
  final val NameDict = Map(1 -> "short sword", 2 -> "long sword")
  final val WeightDict = Map(1 -> 15, 2 -> 30)
}
case class Weapon(typ: Int) extends Item {
  import Weapon._
  def name = NameDict(typ)
  def weight = WeightDict(typ)
  def equip = ... // implementation for weapon
} 
```

到现在为止还挺好。我可以`Weapon(1)`用来引用“短剑”的项目对象。但是，相同的基本原理适用于任何其他项类型，例如`Armor`，它使用完全相同的`name`和`weight`实现，但完全不同`equip`的其他抽象方法实现，例如：

```
object Armor {
  final val NameDict = Map(3 -> "bronze armor", 4 -> "iron armor")
  final val WeightDict = Map(3 -> 100, 4 -> 200)
}
case class Armor(typ: Int) extends Item {
  import Armor._
  def name = NameDict(typ)
  def weight = WeightDict(typ)
  def equip = ... // implementation for armor
} 
```

看起来很像`Weapon`，不是吗？我想将通用模式（即在伴随对象字典和通用`typ`值中查找的实现）分解为：

```
abstract class DictionaryItem(typ: Int) extends Item {
  def name = ???.NameDict(typ)
  def weight = ???.WeightDict(typ)
}

object Weapon {
  final val NameDict = Map(1 -> "sword", 2 -> "bow")
  final val WeightDict = Map(1 -> 15, 2 -> 30)
}
case class Weapon(typ: Int) extends DictionaryItem(typ) {
  def equip = ... // implementation for weapon
} 
```

但是我如何`Weapon.NameDict`从父类中引用子类的伴随对象（如 ）——即我应该使用什么来代替`???.NameDict(typ)`以及如何向编译器解释子类的伴随对象必须包含这些字典？对于这样的问题，是否有更好、更 Scala 风格的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T07:02:48.357

您可以使用案例类的实例，而不是在地图中查找项目的名称和权重。事实上，您可能希望采用这种方法有一些很好的理由：

> 1.  **避免复杂性**：这很简单，您可能不需要发布这个关于继承如何与伴生类一起工作的问题。
> 2.  **避免重复**：使用案例类，您只需定义您的项目一次。
> 3.  **避免错误**：使用合成键，将要求您在名称和重量字典中使用正确的键。见第 2 项。
> 4.  **编写惯用代码**：Scala 既是面向对象的又是函数式的。在这种情况下，围绕项目定位自己。
> 5.  **避免开销**：通过一次查找获取所有项目的属性。

这是 Item 扮演主角的另一种看法：

```
package object items {
  val weapons = Weapon("halbred", 25) :: Weapon("pike", 35) :: Nil
  val armor = Armor("plate", 65) :: Armor("chainmail", 40) :: Nil
  val dictionary = (weapons ::: armor) map(item => item.name -> item) toMap
} 
```

请注意，名称和权重打包在实例中，而不是打包为映射中的值。并且没有要管理的索引。但是，如果您出于某种原因需要索引，您可以轻松地使用该项目在设备列表中的位置或将属性添加到 Item trait。

而且，您可以像这样使用它：

```
> items dictionary("halbred")        // Weapon(halbred, 25)
> items dictionary("plate") weight   // 65 
```

最后一点，Scala 单词中的 final 关键字有点不合时宜。当你在 Scala 中定义一个 val 时，它已经[是不可变的：为什么 `private val` 和 `private final val` 不同？](https://stackoverflow.com/questions/13412386/why-are-private-val-and-private-final-val-different)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T04:06:06.697

som-snytt 是对的——只要让`Armor`and`Weapon`对象扩展一个特征，比如说，`Dictionary`它有`NameDict`和`WeightDict`成员，然后有`DictionaryItem(typ: Dictionary)`。

不过，这似乎是一种非常复杂的做事方式，如果您按数字查找所有属性，则很容易出错且难以重构。更自然的方法是将实际对象放在地图中，例如：

```
case class Weapon(name: String, weight: Int, equip: ...) extends Item
case class Armor(name: String, weight: Int, equip: ...) extends Item

val ShortSword = Weapon(name = "short sword",
                        weight = 15,
                        equip = ...)

val LongSword = Weapon("long sword", 20, ...)

val Weapons = Map(
  1 -> ShortSword,
  2 -> LongSword
) 
```

所以你会写 example`Weapons(1).name`而不是`Weapon.NameDict(1)`. 或者，你可以只写`ShortSword.name`. 或者，如果您只需要通过它们的索引来引用它们，您可以直接在 Map 中定义这些项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T01:37:49.727

我想你想要`object Weapon extends Dictionary`。我曾经称它为军械库，意思是武器工厂。但是任何 -ory 或 -ary 都可以。我还将积分类型更改为枚举。然后定义 Weapon.apply(kind: Kind) 在你使用 Wea​​pon(Kinds.Sword) 时返回一把剑。

这种由伴随对象实现的特征工厂方法模式被集合框架使用，这是教育性的。

# angularjs - 尝试使用 ng-repeat，我哪里出错了？

> ID：13655189
> 
> 赞同：0
> 
> 时间：2012-12-01T00:39:36.057
> 
> 标签：angularjs

我已经从[angular-seed](https://github.com/angular/angular-seed)的代码开始，并且正在慢慢改变它。我的目标是制作一个简单的电子表格应用程序。在`angular-seed/app/index.html`我添加以下代码开始：

`<input type="text" ng-model="KID" placeholder="ID goes here">`

`<input type="text" ng-model="DESC" placeholder="Description goes here">`

`<input type="text" ng-model="DDD" placeholder="Drop Dead Date goes here">`

那是我想要的，但我想我会尝试从 John Lindquist 教程中学到的东西并应用它。所以我改变了上面的：

`<span ng-repeat="entryField in entryFields">`

`<input type="text" ng-model="entryField.ngmodel" placeholder="entryField.pHolder">`

`</span>`

我将以下控制器添加到`angular-seed/app/js/controllers.js`

```
function DataEntryCtrl($scope) {
   $scope.entryFields = [
       {pHolder:'ID goes here',ngmodel:'KID'},
       {pHolder:'Description goes here',ngmodel:'DESC'},
       {pHolder:'Drop Dead Date goes here',ngmodel:'DDD'}
   ]; 
```

}

现在我只得到一个带有文字字符串的文本字段`entryField.pHolder`。我首先怀疑我没有为`ng-model`元素使用正确的语法。我正在遵循教程中的模式，所以我相信这是正确的。然后，我确保我关闭了`<span>`正确的，并且我相信检查出来了。我不仅是新手`angular-js`，而且`javascript`也是新手（加上只是稍微熟悉`html`），所以我怀疑这就是问题所在。我不确定如何确定问题所在。是不是很刺眼？有人能指出我做错了什么吗？以下为全文`index.html`供参考。

```
<!doctype html5>
<html lang="en" ng-app="myApp">
<head> 
  <meta charset="utf-8">
  <title>SpreedSheet Demo</title>
  <link rel="stylesheet" href="css/app.css"/>
</head>
<body>
<div ng-controller="DataEntryCtrl">

   <span ng-repeat="entryField in entryFields">
      <input type="text" ng-model="entryField.ngmodel" placeholder="entryField.pHolder">
   </span>
   <div ng-view></div>
</div>

  <script src="lib/angular/angular.js"></script>
  <script src="js/app.js"></script>
  <script src="js/services.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/directives.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T00:50:44.660

你应该替换这个：

```
placeholder="entryField.pHolder" 
```

和：

```
placeholder="{{entryField.pHolder}}" 
```

我不确定在这种情况下您使用标签“ng-model”做什么。但它应该工作。

# c++ - 什么是默认方法以及如何正确使用它们？

> ID：13655198
> 
> 赞同：10
> 
> 时间：2012-12-01T00:41:04.720
> 
> 标签：c++, c++11

> **可能重复：**
> [在 C++11 中默认函数有什么意义？](https://stackoverflow.com/questions/823935/whats-the-point-in-defaulting-functions-in-c11)

C++11 引入了默认方法（例如`void myMethod() = default;`）。

它对方法有什么作用（方法在被`default`ed 后如何表现）。我如何正确使用它们（它的用途是什么）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T02:38:11.677

有许多类成员被 C++ 标准视为“特殊成员函数”。这些都是：

*   默认构造函数（可以不带参数调用的构造函数）。
*   复制构造函数（可以使用一个参数调用的构造函数，该参数是对象类型作为左值引用）。
*   复制赋值运算符（一个 operator= 重载，可以使用一个参数调用，该参数是对象类型作为左值引用或值）。
*   移动构造函数（可以使用一个参数调用的构造函数，该参数是对象类型作为右值引用）。
*   移动赋值运算符（一个 operator= 重载，可以使用一个参数调用，该参数是对象类型作为右值引用或值）。
*   析构函数。

这些成员函数的特殊之处在于语言在类型上对它们做了特殊的事情。使它们与众不同的另一件事是，如果您不这样做，编译器可以为它们提供定义。这些是您可以使用`= default;`语法的唯一功能。

问题是编译器只会*在特定条件下*提供定义。也就是说，存在不提供定义的条件。

我不会遍历整个列表，但是其他人提到的一个例子。如果为不是特殊构造函数的类型提供构造函数（即：不是上面提到的构造函数之一），则*不会*自动生成默认构造函数。因此，这种类型：

```
struct NoDefault
{
  NoDefault(float f);
}; 
```

`NoDefault`不能默认构造。因此，它不能在需要默认构造的任何上下文中使用。你不能做`NoDefault()`一个临时的。您不能[创建数组`NoDefault`](http://ideone.com/WiVL8Z)（因为它们是默认构造的）。[如果不提供要从中复制的值](http://ideone.com/gn4M0c)或任何其他要求类型为 的操作，则无法创建`std::vector<NoDefault>`并调用大小调整构造函数。`DefaultConstructible`

但是，您可以这样做：

```
struct UserDefault
{
  UserDefault() {}
  UserDefault(float f);
}; 
```

那会解决一切，对吧？

***错误的！***

这与以下内容不同：

```
struct StdDefault
{
  StdDefault() = default;
  StdDefault(float f);
}; 
```

为什么？因为`StdDefault`是*平凡*的类型。这意味着什么？我不会解释整个事情，但[请到这里了解详细信息。](https://stackoverflow.com/a/7189821/734069)当您可以做到时，使类型变得微不足道通常是一个有用的功能。

普通类型的要求之一是它没有用户提供的默认构造函数。`UserDefault`有一个提供的，即使它与编译器生成的完全相同。因此，`UserDefault`并非小事。`StdDefault`是一个普通类型，因为`= default`语法意味着编译器会生成它。所以它不是用户提供的。

语法告诉编译器， “`= default`无论如何都要生成这个函数，即使你通常不会。” 这对于确保类是普通类型很重要，因为您实际上无法像编译器那样实现特殊成员。它允许您强制编译器生成函数，即使它不会。

这在许多情况下都非常有用。例如：

```
class UniqueThing
{
public:
  UniqueThing() : m_ptr(new SomeType()) {}
  UniqueThing(const UniqueThing &ptr) : m_ptr(new SomeType(*ptr)) {}
  UniqueThing &operator =(const UniqueThing &ptr)
  {
    m_ptr.reset(new SomeType(*ptr)); return *this;
  }

private:
  std::unique_ptr<SomeType> m_ptr;
}; 
```

我们必须编写这些函数中的每一个，以使类复制 unique_ptr 的内容；没有办法避免这种情况。但我们也希望它是可移动的，并且移动构造函数/赋值运算符不会自动为我们生成。重新实现它们是很愚蠢的（如果我们添加更多的成员则容易出错），所以我们可以使用以下`= default`语法：

```
class UniqueThing
{
public:
  UniqueThing() : m_ptr(new SomeType()) {}
  UniqueThing(const UniqueThing &ptr) : m_ptr(new SomeType(*ptr)) {}
  UniqueThing(UniqueThing &&ptr) = default;
  UniqueThing &operator =(const UniqueThing &ptr)
  {
    m_ptr.reset(new SomeType(*ptr)); return *this;
  }

  UniqueThing &operator =(UniqueThing &&ptr) = default;

private:
  std::unique_ptr<SomeType> m_ptr;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T00:49:11.473

实际上，`default`只能适用于特殊方法——即构造函数、析构函数、赋值运算符：

### 8.4.2 显式默认函数 [dcl.fct.def.default]

> 1 形式为：的函数定义 `attribute-specifier-seqopt decl-specifier-seqopt declarator = default ;` 称为显式默认定义。一个显式默认的函数应该
> ——是一个特殊的成员函数
> ——具有相同的声明函数类型（除了可能不同的引用限定符以及在复制构造函数或复制赋值运算符的情况下，参数类型可以是“引用非常量 T”，其中 T 是成员函数的类的名称），就好像它已被隐式声明，并且
> - 没有默认参数。

它们的行为与编译器生成它们的行为相同，并且对于以下情况很有用：

```
class Foo{
     Foo(int) {}
}; 
```

在这里，默认构造函数不存在，因此`Foo f;`无效。但是，您可以告诉编译器您需要一个默认构造函数，而无需自己实现它：

```
class Foo{
     Foo() = default;
     Foo(int) {}
}; 
```

编辑：@Nicol Bolas 在评论中指出，这确实不能解释为什么你更喜欢这个`Foo() {}`。我的猜测是：如果您在实现文件中分离了一个带有实现的类，那么您的类定义（如果您不使用`=default`）将如下所示：

```
class Foo{
     Foo();
     Foo(int);
}; 
```

我*假设*的是，`=default`它旨在提供一种惯用的方式来告诉您“我们没有在构造函数中做任何特别的事情”。使用上面的类定义，默认构造函数很可能不对类成员进行值初始化。有了 ，`=default`您只需查看标题即可获得保证。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-01T01:09:15.817

在构造函数或复制构造函数上使用`= default`意味着编译器将在编译时为您生成该函数。当您从`class`/中排除相应的功能时，通常会发生这种情况`struct`。在您定义自己的构造函数的情况下，这种新语法允许您显式地告诉编译器默认构造通常不会的构造函数。举个例子：

```
struct S {

};

int main() {

    S s1; // 1
    S s2(s1); // 2

} 
```

编译器将生成一个复制构造函数和一个默认构造函数，从而允许我们`S`像 (1) 那样实例化一个对象并复制`s2`到`s1`(2) 中。但是如果我们定义自己的构造函数，我们会发现我们无法以同样的方式*实例化：*

```
struct S {
    S(int);
};

int main() {

    S s;    // illegal
    S s(5); // legal

} 
```

这失败了，因为`S`已经给定了一个自定义的构造函数，并且编译器不会生成默认构造函数。但是，如果我们仍然希望编译器给我们一个，我们可以使用以下方式*明确*传达这一点`default`：

```
struct S {
    S(int);
    S() = default;
    S(const S &) = default;
};

int main() {

    S s;     // legal
    S s(5);  // legal

    S s2(s); // legal

} 
```

但是请注意，只有具有特定函数签名的特定函数才能被重载。因此这将失败，因为它既不是复制构造函数，也不是默认构造函数，也不是移动或赋值运算符：

```
struct S {
    S(int) = default; // error
}; 
```

我们还可以显式定义赋值运算符（就像默认/复制构造函数一样，当我们不写出自己的构造函数时，会为我们生成一个默认值）。所以举个例子：

```
struct S {
    int operator=(int) {
        // do our own stuff
    }
};

int main() {

    S s;

    s = 4;

} 
```

这可以编译，但在我们想要将另一个`S`对象分配到`s`. 这是因为我们自己编写的，编译器没有为我们提供一个。这就是`default`发挥作用的地方：

```
struct S {
    int operator=(int) {
        // do our own stuff
    }

    S & operator=(const S &) = default;
};

int main() {

    S s1, s2;

    s1 = s2; // legal

} 
```

但是从技术上讲，当没有其他函数“覆盖”它时，将赋值运算符、复制或移动构造函数定义为默认值是多余的，因为无论如何编译器都会为您提供一个。它*不会*为您提供的唯一情况是您定义自己的（或其变体）。但作为一个偏好问题，如果有意为编译器省略，要求编译器使用上述新语法提供默认函数会更明确、更容易查看和理解。

# mysql - 存储过程问题

> ID：13655203
> 
> 赞同：0
> 
> 时间：2012-12-01T00:42:19.927
> 
> 标签：mysql

我是 sql 新手，我的大部分培训都是在 MSSQL 中进行的，但是我正在学习 MYSQL 课程。我有一个给我一个问题的存储过程。我将分隔符设置为//。

```
CREATE PROCEDURE AddComment
(
    name varchar(50),
    emailAddress varchar(50),
    Comments text
)
BEGIN
DECLARE ComName varchar(50);
DECLARE ComID int;

SELECT name into ComName;

SELECT ID into ComID from Commenters WHERE names = ComName;

if ComID = NULL
    BEGIN
        INSERT INTO COMMENTERS ('names', 'emailAddresses') values (name,   emailAddress);
        SELECT ID into ComID from Commenters WHERE names = ComName;
    END

    INSERT INTO COMMENTS ('commentersID', 'Comments') values (ComID, Comments);

END;
// 
```

# 编辑

这就是我现在所拥有的：

```
CREATE PROCEDURE AddComment
(
    Username varchar(50),
    UseremailAddress varchar(50),
    UserComment text
)
BEGIN
DECLARE ComName varchar(50);
DECLARE ComID int;

SELECT Username into ComName;

SELECT ID into ComID from Commenters WHERE names = ComName;

if ComID = NULL
    BEGIN
        INSERT INTO COMMENTERS(names,emailAddresses) values (Username, UseremailAddress);
        SELECT ID into ComID from Commenters WHERE names = ComName;
    END

    INSERT INTO COMMENTS(commentersID, Comments) values (ComID, UserComment);

END;
// 
```

我得到的错误是：

ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'BEGIN INSERT INT O COMMENTERS(names, emailAddresses) 值（用户名，Useremail' 附近使用正确的语法

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:06:05.457

您正在对插入语句中反转的列名称和值进行编码。

它应该是

```
 INSERT INTO COMMENTERS (name, emailAddress) values ('names', 'emailAddresses') ; 
```

# php - 使用 PHP 获取 Linux 屏幕会话

> ID：13655212
> 
> 赞同：1
> 
> 时间：2012-12-01T00:43:20.573
> 
> 标签：php, linux, ssh

我的服务器始终运行一个屏幕会话，我想在网页上显示连接到屏幕会话的用户可见的所有内容。

我知道如何运行 SSH 命令并在 PHP 中获取它们的输出，但我似乎无法找到如何锁定屏幕会话并获取可见屏幕，然后将其发送回 PHP。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:06:24.110

例如，如果该屏幕会话是 Linux 终端，我看到它的唯一方法是将终端登录到文件中，然后使用 PHP 访问该文件并将其打印到您的网页上。

看看这是否有助于您入门：[https ://ayaz.wordpress.com/2006/11/19/script1-logging-terminal-sessions-to-files/](https://ayaz.wordpress.com/2006/11/19/script1-logging-terminal-sessions-to-files/)

（在Windows中，如果你使用putty，相信你也可以将内容保存到文件中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:06:46.450

只要 php 没有在安全模式下运行，你就可以使用 phpshell 来运行 screen。

[http://phpshell.sourceforge.net/](http://phpshell.sourceforge.net/)

Linux.com 关于它的文章。

[http://archive09.linux.com/feature/127056](http://archive09.linux.com/feature/127056)

如何共享屏幕会话。请注意，主持人必须允许并添加查看者。

[http://eric.lubow.org/2010/system-administration/sharing-a-screen-session/](http://eric.lubow.org/2010/system-administration/sharing-a-screen-session/)

如果您不使用屏幕，则可以使用它来监视会话。

[http://www.cyberciti.biz/faq/linux-make-typescript-of-terminal-session/](http://www.cyberciti.biz/faq/linux-make-typescript-of-terminal-session/)

这是有关如何监视终端会话的另一个 stackoverflow 答案。

[Linux 终端：如何捕获或观看其他终端会话](https://stackoverflow.com/questions/1353253/linux-terminal-how-to-capture-or-watch-other-terminal-session)

# qt - 带有 Qt::CustomizeWindowHint 标志的 QMainWindow 不起作用 aero snap

> ID：13655219
> 
> 赞同：0
> 
> 时间：2012-12-01T00:44:16.390
> 
> 标签：qt, aero, qmainwindow

我使用带有 Qt::CustomizeWindowHint 标志的 QMainWindow 创建了一个窗口以删除标题栏。我使用自定义的小部件制作了一个新的标题栏并实现了窗口移动功能。所以我的窗口小部件不适用于移动窗口上的 aero-snap。（并且我的窗口在调整窗口大小时不能与 aero-snap 一起使用）如何将 aero-snap 与我的自定义小部件一起使用？或者你知道aero snap的api吗？我找到了一些与 aero snap apis 相关的网页，但他们只说 c# [什么是用于在窗口后面预览屏幕状态的 Aero 功能？](https://stackoverflow.com/questions/12719137/what-is-the-aero-function-for-previewing-the-screen-state-behind-a-window) 如何在 C++ 上使用这些函数？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:35:08.480

使用 CustomizeWindowHint 移除标题栏时无法实现 Aero Snap。

标题栏带有由窗口管理器控制的隐式功能，此功能包括您可能已经注意到缺少的一些内容：最小化、最大化、调整大小、移动、系统菜单等。

删除标题栏本质上是删除任何原生窗口管理器支持，您需要自己实现这些功能。

# java - JAVA快速排序，分区方法有什么错误？

> ID：13655220
> 
> 赞同：-5
> 
> 时间：2012-12-01T00:44:29.370
> 
> 标签：java, quicksort

```
/**
     * Sort an array in ascending order
     * @param arr array to sort
     */
    public static void quickSort(int[] arr){
        qs(arr, 0, arr.length);
    }

/**
     * Sort a region of an array in ascending order.
     * Elements outside the given region are unchanged.
     * requires: 0 <= start <= end <= arr.length
     * @param arr   array to sort
     * @param start start of region (inclusive)
     * @param end   end of region (exclusive)
     */
    private static void qs(int[] arr, int start, int end){
        if (end <= start+1){    //region of length 0 or 1
            return;
        }
        int x = arr[start];
        int p = partition(arr, start+1, end, x);
            //now swap arr[start] with arr[p-1]
        arr[start] = arr[p-1];
        arr[p-1] = x;
        qs(arr, start, p-1);
        qs(arr, p, end);

    }

    /**
     * Partition a region of an array.
     * Rearranges elements in region so that small ones
     *   all have smaller indexes than the big ones.
     * Elements outside the region are unchanged.
     * requires: 0 <= start <= end <= arr.length
     * @param arr   array to partition
     * @param start start of region (inclusive)
     * @param end   end of region (exclusive)
     * @param x     pivot - "small" and "big" are <x, >=x.
     * @return      start index (inclusive) of big elements
     *              in region after partition.
     */
    private static int partition(
        int[] arr, int start, int end, int x)
    {

        int l = start -1, r = end+1;
        while (true) {
            while (l < end && arr[++l] < x) ;

            while(r> l && arr[--r] >x);// find smaller item

                if(l >= r) // if pointers cross,
                    break; // partition done
                    else  {
                        int temp;
                temp = arr[l];
                arr[l] = arr[r];
                arr[r] = temp;
            }
        }
        return l;
        }

    public static void main(String[] args) {
        int[] a = {15,8,9,6,2,8,8,5,8,4,2};
        quickSort(a);
        for (int i = 0; i < a.length; i++){
            System.out.print(" "+a[i]);
        }
    }
} 
```

方法有什么错误`partition`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:34:13.973

让我强调几个重要的事实：

```
 * @param end   end of region (exclusive)
                               ^^^^^^^^^

 * @param x     pivot - "small" and "big" are <x, >=x.
 * @return      start index (inclusive) of big elements
 *              in region after partition.
 */
private static int partition(
    int[] arr, int start, int end, int x)
{

    int l = start -1, r = end+1;
                      ^^^^^^^^^^

    while (true) {
        while (l < end && arr[++l] < x) ;
               ^^^^^^^^^^^^^^^^^^^^^^^

        while(r> l && arr[--r] >x);// find smaller item
                      ^^^^^^^^ 
```

当整个数组被分区时，`end`是`arr.length`。然后，您设置`end = arr.length + 1`并在将较低的索引递增到`l`循环所需的范围后，如果没有引发`ArrayIndexOutOfBoundsException`（尝试访问`arr[end]`，如果枢轴是例如数组中的最大元素），您尝试访问的第一个数组元素下一个循环是`arr[arr.length]`. 这引发了`ArrayIndexOutOfBoundsException`.

因此，您可以保证在`partition`.

您可以将`r = end`循环控件设置和更改为

```
while(++l < r && arr[l] < x) 
```

和

```
while(r-- > l && arr[r] > x) 
```

或者您也可以将更高的索引包含在内并`qs(arr, 0, arr.length -1)`从`main`.

# node.js - 在 node.js 中随机访问大文件（需要支持 64 位文件偏移）？

> ID：13655221
> 
> 赞同：1
> 
> 时间：2012-12-01T00:44:29.437
> 
> 标签：node.js, 64-bit, large-files, random-access, large-file-support

我正在考虑将我的一些跨平台脚本移植到 node.js，部分原因是为了学习 node.js，部分原因是我现在对 JavaScript 更加熟悉，部分原因是其他脚本语言对大文件的支持存在问题。

一些脚本语言似乎对大文件偏移有不完整的支持，这取决于它们是否在 32 位/64 位操作系统或处理器上运行，或者是否需要使用某些标志进行专门编译。

因此，无论如何我都想尝试使用 node.js，但是在谷歌搜索中，我在它对 64 位偏移量的大文件的支持（或者它的库/框架支持等）方面都没有找到太多的方法。

我意识到这在某种程度上至少取决于 JavaScript 的底层整数支持。如果我正确阅读了***[什么是 JavaScript 的 Max Int？Number 可以达到的最高 Integer 值是多少而不会丢失精度？](https://stackoverflow.com/questions/307179)***似乎 JavaScript 在内部甚至对整数也使用浮点数，因此

> 最大精确整数值为 2 ^(53)

再一次，node.js 是为服务器设计的，服务器应该期望支持大文件。

**node.js 是否支持 64 位文件偏移？**

* * *

**更新**

尽管有`_LARGEFILE_SOURCE`and `_FILE_OFFSET_BITS`build 标志，现在我已经开始移植需要这个的项目，我发现它`fs.read(files.d.fd, chunk, 0, 1023, 0x7fffffff, function (err, bytesRead, data)`成功但`0x80000000`失败了`EINVAL`. 这是`v0.6.11`在 32 位 Windows 7 上运行的版本。

到目前为止，我不确定这是否仅是 .js 中的限制`fs`、node.js 中的错误，还是仅 Windows 版本中的问题。

**是否打算在所有平台上的所有核心模块中的 node.js 中使用大于 31 位的文件偏移量？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:42:56.453

Node.js 在所有平台上都使用 _LARGEFILE_SOURCE 和 _FILE_OFFSET_BITS 进行编译，因此在内部它对于大文件访问应该是安全的。（请参阅[`common.gypi`](https://github.com/joyent/node/blob/master/common.gypi)源目录的根目录中的 。）

就库而言，它在创建读写流时使用 Number for `start`(and ) 选项（参见 fs.createReadStream）。`end`这意味着您可以通过节点寻址到位置 2^53（如此处所示：也相关：[JavaScript 的最高整数值是多少，一个数字可以达到而不会丢失精度？](https://stackoverflow.com/questions/307179/what-is-javascripts-max-int-whats-the-highest-integer-value-a-number-can-go-t)`lib/fs.js` ）这在代码中是可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T02:56:08.383

追踪起来有点困难，但从[0.7.9 版](http://nodejs.org/changelog.html#v0.7.9)（不稳定）开始，node.js 只支持 64 位文件偏移，从 2012 年 5 月底开始。在[0.8.0 版](http://nodejs.org/changelog.html#v0.8.0)的稳定版本中，从 6 月底开始2012 年。

> fs：fs 调用的 64 位偏移量（Igor Zinkovsky）

在使用较大偏移量时的早期版本故障模式中，故障模式从静默搜索到文件开头到使用`EINVAL`.

请参阅（现已关闭）错误报告：

> [不支持超过 31 位的文件偏移量](https://github.com/joyent/node/issues/3053)

从 node.js 代码以编程方式检查大文件支持

```
if (process.version.substring(1).split('.') >= [0,7,9]) {
  // use 64-bit file offsets...
} 
```

# c# - 正则表达式帮助。我究竟做错了什么

> ID：13655223
> 
> 赞同：0
> 
> 时间：2012-12-01T00:44:50.607
> 
> 标签：c#, regex, string, string-comparison

有人可以帮助我，让我知道我做错了什么吗？我正在用 C# 编写代码。我正在尝试查找我的多行文本框值是否包含 HREF 或 href或`<a href`or 。`</a>``<A HREF`

这就是我尝试使用正则表达式的方法。但它给了我解析错误说太多......请帮助。谢谢

```
Regex strMatch = new Regex(@"^(HREF|href|<a href|</a>))", RegexOptions.Compiled | RegexOptions.IgnoreCase | RegexOptions.Multiline); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:49:55.203

您的正则表达式锚定在字符串的开头，因此只有当您的字符串以四个选项之一开头时它才会匹配。

此外，您还有一个额外`)`的导致无效的正则表达式语法。

试试这个：

```
Regex strMatch = new Regex(@"(?:<a )?href|</a>"
    ,RegexOptions.Compiled|RegexOptions.IgnoreCase); 
```

这将匹配您的四个案例，因为前两个是相同的（感谢`IgnoreCase`），第一个是第三个的子字符串。

# ruby - 为什么我看不到 SNMP 陷阱进入？

> ID：13655226
> 
> 赞同：1
> 
> 时间：2012-12-01T00:44:55.380
> 
> 标签：ruby, snmp

我正在尝试使用[Ruby SNMP](http://snmplib.rubyforge.org/)从各种设备捕获 SNMP 陷阱。为了测试它们，我尝试使用“snmptrap”命令从我的笔记本电脑发送它们。我可以看到，在数据包捕获中以及在“snmptrapd”实用程序中，当我运行它时，陷阱正在发送并到达我的服务器（服务器是管理器）。在文档中的演示中，我完全按照原样使用以下示例代码来设置 TrapListener。

```
require 'snmp'
require 'logger'

log = Logger.new(STDOUT)
m = SNMP::TrapListener.new do |manager|
    manager.on_trap_default do |trap|
      log.info trap.inspect
    end
end
m.join 
```

我正在发送一个 SNMPv2c 陷阱，但屏幕上什么也没有出现...

这是我用来发送测试 SMTP 陷阱的命令，即使它很有用：

```
snmptrap -v 2c -c public hostname_goes_here  SNMP-NOTIFICATION-MIB::snmpNotifyType SNMPv2-MIB::sysLocation 
```

任何建议表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T10:30:00.320

我也被困在这个问题上很长一段时间。事实证明，默认情况下，Traplistener 只打开 127.0.0.1 上的端口。要使其侦听您指定的端口（或默认端口 162）上的所有接口，请指定 :Host 选项。'0' 使它在所有接口上侦听，或者您可以提供一个 IP 地址。

```
log = Logger.new(STDOUT)
m = SNMP::TrapListener.new(:Host => 0) do |manager|
  manager.on_trap_default do |trap|
    log.info trap.inspect
  end
end
m.join 
```

# r - 如何在 ggplot2 中将地图与复杂的点显示结合起来？

> ID：13655230
> 
> 赞同：7
> 
> 时间：2012-12-01T00:45:37.247
> 
> 标签：r, ggplot2, shapefile

我正在尝试使用非洲背景地图从研究地点绘制点。我可以独立创建这两个，但我很难将它们叠加在一起。

我使用的非洲地图是来自 maplibrary.org 的 Esri shapefile。它可以从我的保管箱[https://www.dropbox.com/s/etqdw3nky52czv4/Africa%20map.zip](https://www.dropbox.com/s/etqdw3nky52czv4/Africa%20map.zip)获得。我有一个文本文件中的点，也可以从我的投递箱中获得。 [https://www.dropbox.com/s/scvymytjsr5pvaf/SPM-437-22Nov12.txt](https://www.dropbox.com/s/scvymytjsr5pvaf/SPM-437-22Nov12.txt)。他们指的是关于疟疾寄生虫分子耐药性的研究。我想绘制它们，以便颜色是具有抗药性遗传标记的寄生虫的比例，大小是测试的寄生虫数量。

独立绘制点：

```
qplot(Longitude, Latitude, data = d.spm.437, colour = Frc437, size = Tot437) 
```

绘制非洲地图：

```
library(maptools)
africa = readShapePoly("Africa.shp")
africa.map = fortify(africa, region="COUNTRY")
qplot(long, lat, data = africa.map, geom="path", group=group) 
```

在保留点显示的同时将这两者放在一起的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T02:12:54.867

尝试这样的事情。似乎对我有用。我认为你的一些经纬度坐标是错误的。当前的`fill`颜色`geom_point`设置为，`Tot437`因此您可能需要更改它。

![地图](../Images/e7721177148444f8b8e17589270b0076.png)

```
library(ggplot2)
library(rgdal)

africa <- readOGR("c:/test", layer = "Africa")
africa.map = fortify(africa, region="COUNTRY")

africa.points = read.table("c:/test/SPM-437-22Nov12.txt", header = TRUE, sep = ",")
names(africa.points)[which(names(africa.points) == 'Longitude')] <- 'long' # rename lat and long for consistency with shp file
names(africa.points)[which(names(africa.points) == 'Latitude')] <- 'lat'

ggplot(africa.map, aes(x = long, y = lat, group = group)) +
    geom_polygon(colour = "black", size = 1, fill = "white", aes(group = group)) +
    geom_point(data = africa.points, aes(x = long, y = lat, fill = Tot437, group = NULL), size = 4, shape = 21, colour = "black", size = 3) 
```

顺便说一句，查看您的地图可能难以获得各个区域的详细视图，因此解决此问题的一种方法是通过子集，在这种情况下使用数据框。你可以这样做：

```
africa.map <- africa.map[africa.map$id == 'Madagascar', ]
africa.points <- africa.points[africa.points$Country == 'Madagascar', ]
ggplot(africa.map, aes(x = long, y = lat, group = group)) +
    geom_polygon(colour = "black", size = 1, fill = "white", aes(group = group)) +
    geom_point(data = africa.points, aes(x = long, y = lat, fill = Tot437, group = NULL), size = 2, shape = 21, colour = "black", size = 2) 
```

...这应该会给你类似的东西：

![马达加斯加](../Images/691c89b39ddddd93dca1958efdffe03e.png)

# python - NameError：名称“标签”未定义

> ID：13655234
> 
> 赞同：0
> 
> 时间：2012-12-01T00:46:00.127
> 
> 标签：python, django, nameerror

我正在为我的 django 站点创建模型（python，如果不明显的话）。

```
from django.db import models

class Picture(models.Model):
        name = models.CharField(max_length=100)
        pub_date = models.DateTimeField('date published')
        tags = models.ManyToManyField(Tag)
        owner = models.ForeignKey(User)

class Tag(models.Model):
        pics = models.ManyToManyField(Picture)
        name = models.CharField(max_length=30)

class User(models.Model):
        name = models.CharField(max_length=20)
        date_joined = models.DateTimeField('date joined')

class Comment(models.Model):
        content = models.CharField(max_length=500)
        date = models.DateTimeField('date commented')
        commenter = models.ForeignKey(User)
        pic = models.ForeignKey(Picture) 
```

这是整个当前模型，但我在行上遇到错误`tags = models.ManyToManyField(Tag)`，说“NameError：名称'Tag'未定义”

这有什么关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:48:14.353

你在声明图片之后声明了Tag，但是Picture使用了Tag，所以在你尝试使用它的时候并没有定义它。只需更改课程的顺序，它就可以解决问题。

换句话说，将您的代码更改为：

```
class Tag(models.Model):
    pics = models.ManyToManyField(Picture)
    name = models.CharField(max_length=30)

# Hurray, Tag exists now

class Picture(models.Model):
    name = models.CharField(max_length=100)
    pub_date = models.DateTimeField('date published')

    # Therefore, this next line will work

    tags = models.ManyToManyField(Tag)
    owner = models.ForeignKey(User) 
```

（减去我的评论）

# html - 带有自定义 html5 控件的 Airplay

> ID：13655237
> 
> 赞同：7
> 
> 时间：2012-12-01T00:46:34.523
> 
> 标签：html, safari, html5-video, airplay

有谁知道是否有办法让 Airplay 处理使用 CUSTOM CONTROLS 的 html5 视频？这是重要的部分，我意识到如果您使用内置的 html5 控件，您只需将 x-webkit-airplay="allow" 属性添加到元素即可。但我的视频播放器使用自定义内置控件。

看起来 Safari 会将 Airplay 按钮放在内置的 html5 控件上，但是如果我不使用内置控件，有没有办法做到这一点？这是我编写的 html5 播放器的链接。请注意，底部的控件是我自己的：

[http://pluralsight.com/training/Player?author=keith-brown&name=aspdotnet-security&mode=live&clip=0&course=aspdotnet-security](http://pluralsight.com/training/Player?author=keith-brown&name=aspdotnet-security&mode=live&clip=0&course=aspdotnet-security)

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-22T17:39:02.360

好消息来了！该功能已在 Safari 9 中实现。

> Safari 9.0 允许您使用 JavaScript AirPlay 支持为 HTML5 媒体创建自定义控件。使用 Safari`WebKitPlaybackTargetAvailabilityEvent`来检测 Airplay 的可用性，然后添加您自己的控件以将音频和视频流式传输到 AirPlay 设备。

通过。[Safari 9 的新功能](https://developer.apple.com/library/iad/releasenotes/General/WhatsNewInSafari/Articles/Safari_9.html#//apple_ref/doc/uid/TP40014305-CH9-SW16)

[这是来自HTML5 视频 и кнопка для AirPlay](https://www.mobila.name/post/558136319cb8c/)的示例

```
// Detect if AirPlay is available
// Mac OS Safari 9+ only
if (window.WebKitPlaybackTargetAvailabilityEvent) {
    video.addEventListener('webkitplaybacktargetavailabilitychanged', function(event) {
        switch (event.availability) {
            case "available":
                AirPlayButton.show();
                break;
            default:
                AirPlayButton.hide();
        }
        AirPlayButton.on('click', function() {
            video.webkitShowPlaybackTargetPicker();
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:34:26.277

遗憾的是，Apple 尚未实现 Airplay JavaScript 事件调用，这主要是因为当您在本机 quicktime 控件中使用 AirPlay 时，AirPlay 会提示用户靠近 AirPlay 设备。目前没有特定于 Safari 的 JS 实现来在您的内容中提取这些数据并根据可用的内容创建按钮。

截至 2013 年 2 月，您可以在 HTML5 中为 AirPlay 指定的唯一内容是您是否希望显示或不显示 AirPlay 控件。

[https://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/AirPlayGuide/OptingInorOutofAirPlay/OptingInorOutofAirPlay.html](https://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/AirPlayGuide/OptingInorOutofAirPlay/OptingInorOutofAirPlay.html)

如果这是您希望在未来版本中使用的功能，您可以向 Apple 提交错误： [https ://bugreport.apple.com/](https://bugreport.apple.com/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T10:56:54.163

我们可以检查 webkitcurrentplaybacktargetiswirelesschanged 事件来捕捉关闭播放设备：

```
 this.on(videoEl, 'webkitcurrentplaybacktargetiswirelesschanged', this.checkWireles); 
```

# windows - 为什么我的应用程序的窗口边框在 Windows 8 中是灰色的，而不是像其他窗口一样基于桌面？

> ID：13655241
> 
> 赞同：8
> 
> 时间：2012-12-01T00:47:18.013
> 
> 标签：windows, mfc, windows-8

我有一个大型遗留应用程序，它在我们运行它的每台 Windows 8 机器上显示为永久灰色边框，而其他应用程序的其他窗口准确地使用从桌面背景派生的颜色。对于我的生活，我无法找出原因。

我已经尝试了我最好的 google-fu 来抓取 MSDN 以获取 API 来控制它，但结果是空的。该应用程序看起来与 Windows XP、Vista 和 7 中的所有其他应用程序一样......只是 Windows 8 是灰色的。我们绝对没有添加 Win8 特定代码来处理这个问题。

它在外面只是一个 MFC 窗口，但在里面嵌入了一个 .NET/WPF 组件和一个支持 Direct3D 9 的可视区域。

我最好的猜测是它可能与在窗口中有一个 Direct3D 表面有关，但我无法在任何地方验证这一点。

任何帮助将不胜感激！

谢谢

编辑：灰色与没有焦点的效果相匹配，我们肯定会玩带有窗口焦点的游戏......所以可能就是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:25:43.477

问题是开发人员重载了 OnNcActivate() 并在最后返回 TRUE。他们需要调用基类的 (CWnd) OnNcActivate。

如果您看起来足够近，这在 Windows 7 上也是可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:23:54.087

Windows 8 中的桌面不像 Windows 7 和 Vista 使用 Aero 主题那样在窗口边框中使用透明度。如果您将焦点移动到应用程序中的另一个顶部窗口，这可以解释为什么您会看到灰色边框。尝试将没有焦点的窗口的颜色更改为从灰色中可辨别的颜色，以验证您所看到的内容。

# geocoding - 如何拆分反向地理编码组件？

> ID：13655243
> 
> 赞同：0
> 
> 时间：2012-12-01T00:48:08.597
> 
> 标签：geocoding, cllocation, reverse-geocoding

有人知道如何从这段代码中分离出城市、州和地址吗？它返回整个地址，但我只想要城市和州。

```
//Geocoding Block
[_geoCoder2 reverseGeocodeLocation: _currentLocation2.location completionHandler:
 ^(NSArray *placemarks, NSError *error) {

     //Get nearby address
     CLPlacemark *placemark = [placemarks objectAtIndex:0];

     //String to hold address
     NSString *locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];

     //Print the location to console
     NSLog(@"I am currently at %@",locatedAt);

     //Set the label text to current location
     [_cityLabel setText:locatedAt];

 }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:53:09.007

CLPlacemark 具有 和 等`locality`属性`administrativeArea`。请参阅文档以了解它们是什么，但您需要进行实验以了解它们如何将地址解析为其组件。此外，它`addressDictionary`是地址簿格式，所以里面有城市和州的键；你的错误是把它变成一个字符串而不是检查字典的结构。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T05:40:13.823

```
// Reverse Geocoding
NSLog(@"Resolving the Address");
[_geoCoder2 reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
    NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
    if (error == nil && [placemarks count] > 0) {
        placemark = [placemarks lastObject];
        _cityLabel.text = [NSString stringWithFormat:@"%@\n%@\n",

                           placemark.locality,
                           placemark.administrativeArea];

    } else {
        NSLog(@"%@", error.debugDescription);
    }
} ]; 
```

# asp.net - 使用 MonoDevelop 创建 ASP.NET 页面的语法错误

> ID：13655245
> 
> 赞同：1
> 
> 时间：2012-12-01T00:48:11.490
> 
> 标签：asp.net, monodevelop

我在 Ubuntu 上使用 MonoDevelop 创建 ASP.NET 页面。我的代码产生语法错误。

```
<%@ Page Language="C#" %>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML
    1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html>
        <head runat="server">
            <title>index</title>
            <script runat="server"></script>
        </head>
        <body>
            <form id="form1" runat="server">
                <p>Hello Word!</p>
            </form>
        </body>
    </html> 
```

> 1：/home/ublinuxyu/program/c#/index.aspx(0,0): Error CS1525: Unexpected symbol `<' (CS1525) (index)
> 2:/home/ublinuxyu/program/c#/index.aspx(4 ,4): 错误 CS1646: 在逐字说明符之后需要关键字、标识符或字符串: @ (CS1646) (index)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:30:15.117

看起来您将 aspx 文件的构建操作设置为“编译”而不是“内容”。

您可以使用解决方案板中文件的上下文菜单或在选择该文件时使用属性板来修复它。

# c# - 网格视图不会更新数据库（没有错误）

> ID：13655249
> 
> 赞同：0
> 
> 时间：2012-12-01T00:48:29.363
> 
> 标签：c#, asp.net, gridview

我有一个带有详细信息视图和网格视图的页面（每个都有自己的数据源。我不知道为什么更新说它成功但不更新表格。详细信息视图工作正常。网格视图是只假设显示与详细信息视图中的内容相关的数据。如果我对源代码中的值进行硬编码，它可以工作，但是当我将它改回来时，它会爆炸。这是我的代码

```
 <asp:SqlDataSource OnUpdated="dsCar_Updated" ID="dsCar" runat="server" 
            ConnectionString="<%$ ConnectionStrings:VehicalList %>" 
            ProviderName="<%$ ConnectionStrings:VehicalList.ProviderName %>" 
            SelectCommand="SELECT Car.* FROM Car WHERE (VIN = ?)" 
            UpdateCommand="UPDATE Car SET [Branch ID] = ?, [State Registration] = ?, [License Plate] = ?, Color = ?, Model = ?, [Car Year] = ?, [Plate Expiration] = ? WHERE (VIN = ?)">
            <SelectParameters>
                <asp:QueryStringParameter Name="?" QueryStringField="VIN" />
            </SelectParameters>
        </asp:SqlDataSource>

<asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" 
            DataSourceID="dsCar" Height="50px" Width="265px" CellPadding="4" 
            ForeColor="#333333" GridLines="None" DataKeyNames="VIN" DefaultMode="Edit">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            <CommandRowStyle BackColor="#E2DED6" Font-Bold="True" />
            <EditRowStyle BackColor="#999999" />
            <FieldHeaderStyle BackColor="#E9ECF1" Font-Bold="True" />
            <Fields>
                <asp:BoundField DataField="VIN" HeaderText="VIN" ReadOnly="True" 
                    SortExpression="VIN" />
                <asp:TemplateField HeaderText="Branch Name" SortExpression="Branch ID">
                    <EditItemTemplate>
                        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:VehicalList %>" 
                            ProviderName="<%$ ConnectionStrings:VehicalList.ProviderName %>" 
                            SelectCommand="SELECT * FROM [Branch]"></asp:SqlDataSource>
                        <asp:DropDownList ID="DropDownList1" runat="server" 
                            DataSourceID="SqlDataSource2" DataTextField="Branch Name" 
                            DataValueField="Branch ID" SelectedValue='<%# Bind("[Branch ID]") %>'>
                        </asp:DropDownList>
                    </EditItemTemplate>
                    <InsertItemTemplate>
                        <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:VehicalList %>" 
                            ProviderName="<%$ ConnectionStrings:VehicalList.ProviderName %>" 
                            SelectCommand="SELECT * FROM [Branch]"></asp:SqlDataSource>
                        <asp:DropDownList ID="DropDownList1" runat="server" 
                            DataSourceID="SqlDataSource3" DataTextField="Branch Name" 
                            DataValueField="Branch ID" SelectedValue='<%# Bind("[Branch ID]") %>'>
                        </asp:DropDownList>
                    </InsertItemTemplate>
                    <ItemTemplate>
                        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:VehicalList %>" 
                            ProviderName="<%$ ConnectionStrings:VehicalList.ProviderName %>" 
                            SelectCommand="SELECT * FROM [Branch]"></asp:SqlDataSource>
                        <asp:DropDownList ID="DropDownList1" runat="server" 
                            DataSourceID="SqlDataSource1" DataTextField="Branch Name" 
                            DataValueField="Branch ID" Enabled="False" SelectedValue='<%# Bind("[Branch ID]") %>'>
                        </asp:DropDownList>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="State Registration" HeaderText="State Registration" 
                    SortExpression="State Registration" />
                <asp:BoundField DataField="License Plate" HeaderText="License Plate" 
                    SortExpression="License Plate" />
                <asp:BoundField DataField="Color" HeaderText="Color" SortExpression="Color" />
                <asp:TemplateField HeaderText="Model" SortExpression="Model">
                    <EditItemTemplate>
                        <asp:SqlDataSource ID="SqlDataSource4" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:VehicalList %>" 
                            ProviderName="<%$ ConnectionStrings:VehicalList.ProviderName %>" 
                            SelectCommand="SELECT * FROM [Model]"></asp:SqlDataSource>
                        <asp:DropDownList ID="DropDownList2" runat="server" 
                            DataSourceID="SqlDataSource4" DataTextField="Model Name" 
                            DataValueField="ModelID" SelectedValue='<%# Bind("Model") %>'>
                        </asp:DropDownList>
                    </EditItemTemplate>
                    <InsertItemTemplate>
                        <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Model") %>'></asp:TextBox>
                    </InsertItemTemplate>
                    <ItemTemplate>
                        <asp:SqlDataSource ID="SqlDataSource4" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:VehicalList %>" 
                            ProviderName="<%$ ConnectionStrings:VehicalList.ProviderName %>" 
                            SelectCommand="SELECT * FROM [Model]"></asp:SqlDataSource>
                        <asp:DropDownList ID="DropDownList2" runat="server" 
                            DataSourceID="SqlDataSource4" DataTextField="Model Name" 
                            DataValueField="ModelID" SelectedValue='<%# Bind("Model") %>' 
                            Enabled="False">
                        </asp:DropDownList>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="Car Year" HeaderText="Car Year" 
                    SortExpression="Car Year" />
                <asp:TemplateField HeaderText="Plate Expiration" 
                    SortExpression="Plate Expiration">
                    <EditItemTemplate>
                        <asp:SqlDataSource ID="SqlDataSource5" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:VehicalList %>" 
                            ProviderName="<%$ ConnectionStrings:VehicalList.ProviderName %>" 
                            SelectCommand="SELECT * FROM [Car]"></asp:SqlDataSource>
                        <asp:Calendar ID="Calendar1" runat="server" 
                            onselectionchanged="Calendar1_SelectionChanged" 
                            VisibleDate='<%# Eval("[Plate Expiration]") %>' 
                            SelectedDate='<%# Bind("[Plate Expiration]") %>'></asp:Calendar>
                        <asp:TextBox ID="txtDateEdit" runat="server" 
                            Text='<%# Bind("[Plate Expiration]") %>'></asp:TextBox>
                        <br />
                    </EditItemTemplate>
                    <InsertItemTemplate>
                        <asp:Calendar ID="Calendar1" runat="server" 
                            onselectionchanged="Calendar1_SelectionChanged" 
                            VisibleDate='<%# Eval("[Plate Expiration]") %>'></asp:Calendar>
                        <asp:TextBox ID="TextBox1" runat="server" 
                            Text='<%# Bind("[Plate Expiration]") %>' Visible="false"></asp:TextBox>
                    </InsertItemTemplate>
                    <ItemTemplate>
                        <br />
                        <asp:Label ID="Label1" runat="server" Text='<%# Eval("[Plate Expiration]") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:CommandField ShowEditButton="True" />
            </Fields>
</asp:DetailsView>

<asp:SqlDataSource OnUpdated="dsMaintance_Updated" ID="dsMaintance" runat="server" 
            ConnectionString="<%$ ConnectionStrings:VehicalList %>" 
            DeleteCommand="DELETE FROM [Maintenance] WHERE [MainteanceID] = ?" 
            InsertCommand="INSERT INTO [Maintenance] ([MainteanceID], [VIN], [Procedure ID], [Date]) VALUES (?, ?, ?, ?)" 
            ProviderName="<%$ ConnectionStrings:VehicalList.ProviderName %>" 
            SelectCommand="SELECT MainteanceID, VIN, [Procedure ID], [Date] FROM Maintenance WHERE (VIN = ?)" 

            UpdateCommand="UPDATE Maintenance SET [Procedure ID] = ?, [Date] = ? WHERE (MainteanceID = ?)">
            <DeleteParameters>
                <asp:Parameter Name="MainteanceID" Type="Int32" />
            </DeleteParameters>
            <InsertParameters>
                <asp:Parameter Name="MainteanceID" Type="Int32" />
                <asp:Parameter Name="VIN" Type="String" />
                <asp:Parameter Name="Procedure_ID" Type="Int32" />
                <asp:Parameter Name="Date" Type="DateTime" />
            </InsertParameters>
            <SelectParameters>
                <asp:QueryStringParameter Name="VIN" QueryStringField="VIN" Type="String" />
            </SelectParameters>
            <UpdateParameters>
                <asp:Parameter Name="MainteanceID" Type="Int32" />
                <asp:Parameter Name="VIN" Type="String" />
                <asp:Parameter Name="Procedure_ID" Type="Int32" />
                <asp:Parameter Name="Date" Type="DateTime" />

            </UpdateParameters>
        </asp:SqlDataSource>

<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="MainteanceID" DataSourceID="dsMaintance" BackColor="White" 
            BorderColor="White" BorderStyle="Ridge" BorderWidth="2px" CellPadding="3" 
            CellSpacing="1" GridLines="None">
            <Columns>
                <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
                <asp:BoundField DataField="MainteanceID" HeaderText="MainteanceID" 
                    InsertVisible="False" ReadOnly="True" SortExpression="MainteanceID" />
                <asp:BoundField DataField="VIN" HeaderText="VIN" SortExpression="VIN" />
                <asp:BoundField DataField="Procedure ID" HeaderText="Procedure ID" 
                    SortExpression="Procedure ID" />
                <asp:BoundField DataField="Date" HeaderText="Date" SortExpression="Date" />
            </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:55:57.780

您应该将正确的参数传递给该`UpdateParameters`部分。看起来您遇到了*复制粘贴*问题（也许您从该部分复制了该`InsertParameters`部分）。您的`UPDATE`语句只需要 3 个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:45:31.067

```
<asp:SqlDataSource OnUpdated="dsMaintance_Updated" ID="dsMaintance" runat="server" 
        ConnectionString="<%$ ConnectionStrings:VehicalList %>" 
        DeleteCommand="DELETE FROM [Maintenance] WHERE [MainteanceID] = ?" 
        InsertCommand="INSERT INTO [Maintenance] ([MainteanceID], [VIN], [Procedure ID], [Date]) VALUES (?, ?, ?, ?)" 
        ProviderName="<%$ ConnectionStrings:VehicalList.ProviderName %>" 
        SelectCommand="SELECT MainteanceID, VIN, [Procedure ID], [Date] FROM Maintenance WHERE (VIN = ?)"  
        UpdateCommand="UPDATE Maintenance SET [Procedure ID] = ?, [Date] = ? WHERE (MainteanceID = ?)">
        <DeleteParameters>
            <asp:Parameter Name="MainteanceID" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="MainteanceID" Type="Int32" />
            <asp:Parameter Name="VIN" Type="String" />
            <asp:Parameter Name="Procedure_ID" Type="Int32" />
            <asp:Parameter Name="Date" Type="DateTime" />
        </InsertParameters>
        <SelectParameters>
            <asp:QueryStringParameter Name="VIN" QueryStringField="VIN" Type="String" />
        </SelectParameters>
        <UpdateParameters>
            <%--<asp:Parameter Name="MainteanceID" Type="Int32" />--%>
            <%--<asp:Parameter Name="VIN" Type="String" />--%>
            <asp:Parameter Name="Procedure_ID" Type="Int32" />
            <asp:Parameter Name="Date" Type="DateTime" />   
        </UpdateParameters>
    </asp:SqlDataSource> 
```

# visual-studio-2010 - 如何让 Visual Studio 制作 1252 编码的程序？

> ID：13655250
> 
> 赞同：2
> 
> 时间：2012-12-01T00:48:45.743
> 
> 标签：visual-studio-2010, encoding, utf-8, character-encoding, ascii

我的 Visual Studio 有一个解决方案，我的程序语言是巴西葡萄牙语。每次我编译并执行它时，它根本不显示我写的字符。

例子：
`int main (void) {
printf("áéíóúàèìòù");
return 0;
}`

它只是显示了一些非常奇怪的东西。

虽然，我已经测试了另一次将输出保存到文件中，它显示了正确的输出，所以我认为问题可能出在`cmd`.

然后，我搜索了可能导致问题的原因，结果基本上挂在使用的代码页 cmd 上。

我终于使用`chcp 1252`了，但它似乎对我不起作用，所以我在这里。有谁知道我应该使用什么代码页或者我可以对源文件做些什么来显示正确的输出？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T15:21:39.310

我假设 C++。

原因是文件以 UTF-8 编码保存，字符串文字被视为字节序列。

因此，如果您`"é"`的源代码中有，它会被视为`"\c9\a9"`并以 CP-437（Windows 命令提示符的默认西方编码）显示为`├⌐`

解决方案：要么：

*   将源文件保存为某种 8 位编码（例如 CP-1252），更改 VS 中的默认编码，并将终端设置为使用相同的编码，

*   或者将您的终端更改为支持 UTF-8 的东西，例如 Cygwin。

# mysql - 如何对附近的时间戳进行 JOIN？

> ID：13655253
> 
> 赞同：1
> 
> 时间：2012-12-01T00:49:24.033
> 
> 标签：mysql

我有两张表，其中包含在不同时间间隔进行的测量。该`left`表的测量频率较低，而该`right`表的测量频率较高。我想将它们组合起来，以便生成的表将包含表中的每一行，与表中具有最接近时间戳的`left`任何行匹配。`right`

到目前为止，我的蹩脚解决方案利用了`right`表格中一分钟的行间距。它非常慢并且每行返回多行，`left`因为表中有多个时间戳匹配`right`。我该如何改进呢？

```
SELECT `left`.*, `right`.*
FROM `left`
LEFT JOIN `right`
ON ROUND(UNIX_TIMESTAMP(`left`.`timestamp`)/60) = ROUND(UNIX_TIMESTAMP(`right`.`timestamp`)/60); 
```

# jquery - jquery无序列表到有序列表

> ID：13655254
> 
> 赞同：2
> 
> 时间：2012-12-01T00:49:27.603
> 
> 标签：jquery, drag-and-drop, jquery-ui-sortable

我有一个填充的无序列表，用户可以将一个 li 拖到一个未填充的列表中。

```
<ul id="sortable1" class="connectedSortable">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
</ul>

<ul id="sortable2" class="connectedSortable">
    <li></li>
</ul> 
```

我想要做的是让未填充的列表成为一个有序列表，如果用户对有序列表中的元素进行排序，它会显示添加元素的位置并更新位置。我正在考虑使用这样的东西：

```
<ul id="sortable1" class="connectedSortable">
    <li><span> </span>Item 1</li>
    <li><span> </span>Item 2</li>
    <li><span> </span>Item 3</li>
    <li><span> </span>Item 4</li>
    <li><span> </span>Item 5</li>
</ul> 
```

然后在用户将元素移动到新列表时用元素的数字位置填充空的 span 标签，但我不知道这是否是最有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T00:55:45.773

对于这种情况，您可以使用**HTML-5** `data attributes` ..

```
<ul id="sortable1" class="connectedSortable">
    <li data-position="3">Item 1</li>
    <li data-position="5">Item 2</li>
    <li data-position="1">Item 3</li>
    <li data-position="4">Item 4</li>
    <li data-position="2">Item 5</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T00:57:23.913

您可以使用以下`text`方法：

```
$('#sortable1 span').text(function(i){
   return ++i
}) 
```

或者创建一个 jQuery 方法并在更新事件中调用它：

```
$.fn.populate = function(){
    this.each(function(i){
       this.innerHTML = ++i;
    })
}

$("#sortable1").sortable({
    update: function( event, ui ) {
       $('#sortable1 span').populate();
    }
}); 
```

[http://jsfiddle.net/6ZGqM/](http://jsfiddle.net/6ZGqM/)

# jquery - jquery ajax 从我域中的另一个 url 追加

> ID：13655257
> 
> 赞同：0
> 
> 时间：2012-12-01T00:49:38.960
> 
> 标签：jquery, ajax, load

嘿伙计们，我正在尝试弄清楚如何从不同的 url 附加 div。问题是我需要多个改变的 url，从某种意义上说让我解释一下。

我有 5 个网址；

/u1stats

/u1

/u1朋友

/u1联系人

/u1墙

现在 1 将更改每个人的链接，例如 u2 u3 u4 u5 等等。我试着做 /u 但事情是我需要统计朋友联系等的细节。我将如何做到这一点，以便代码基本上会调用相应的 u(number)stats？或者这根本不可能。

这是我从 ui 页面尝试的 Ajax

```
$('#result').load('ajax/test.html #container'); 
```

#result 也是我想要加载到#container 内的/test.html 的div 还是

```
#container from /test.html to #result? 
```

对不起，如果你不能理解我，我会回答任何和所有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:08:05.067

```
$('#result').load('ajax/test.html #container'); 
```

将加载 page `ajax/test.html`，获取具有 id 的元素`container`，并将该内容加载到`result`当前页面上具有 id 的元素中。

假设 javascript 在页面上运行`http://www.example.com/u1`，您可以使用以下命令自动从其他四个 url（即`http://www.example.com/u1contact`，`http://www.example.com/u1friends`等）加载内容

```
$(document).ready(function() {
    var i = parseInt(window.location.pathname);
    $('#result').load('u' + i + 'contact #container');
    $('#result').load('u' + i + 'friends #container');
    $('#result').load('u' + i + 'stats #container');
    $('#result').load('u' + i + 'wall #container');
}); 
```

然后调用 loadUserInfo('1')、loadUserInfo('2') 等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:01:30.367

jQuery[`load()`](http://api.jquery.com/load/)从指定的 url 和可选的选择器中获取内容，并将`loads`其放入前面的选择器中。因此，`#container`元素 in`ajax/text.html`将被加载到`#result`您运行脚本的页面上。

我不确定`u*`url 如何与您的`ajax/test.html` `load`源相关，但您可以将 load 函数传递给与您要加载的 url 相对应的变量，因此为了加载`#container`from`/u1stats`您可以执行以下操作：

```
function loadUserInfo($url) {
    $('#result').load($url + ' #container');
}

loadUserInfo('/u1stats'); 
```

然后你也可以使用`loadUserInfo('/u1friends');`或`loadUserInfo('/u2contact');`

如果我误解了你的问题或你想要做什么，请告诉我。

# php - php session.upload_progress 与多个文件使用数组作为输入名称

> ID：13655261
> 
> 赞同：1
> 
> 时间：2012-12-01T00:50:02.863
> 
> 标签：php, html

我在使用 session.upload_progress 方法为每次上传创建单独的上传进度条时遇到问题。对于我的多个文件上传，我使用一个数组作为名称，并让用户能够在一个输入或多个文件输入中拥有多个文件输入。

例子：

```
<input type='file' name='files[]' multiple='true'/>
<input type='file' name='files[]' multiple='true'/> 
```

上传工作正常，但是当我向另一个文件发送 AJAX 请求以获取上传进度时，它只会发回整体进度和正在上传的第一个文件的进度。整体进度显示有更多文件正在上传，但上传进度数组中只显示一个。

发回上传进度的文件看起来像

```
header('Content-type: application/json');
session_start();

$key = ini_get("session.upload_progress.prefix") . "imageform";

if (!empty($_SESSION[$key])) {
    echo json_encode($_SESSION[$key]);
    exit;
}
exit; 
```

所以当我得到这个回来时，我只会得到整体进度和上传队列中的第一个文件。我确实注意到，该文件的数组中给出的输入字段的名称是“files []”。我想知道它是否必须具有唯一的输入名称字段才能区分单独的文件。

我已经在网上搜索了解决方案，但我发现的 session.upload_progress 的唯一实现对于每个文件输入都有不同的名称，所以我无法找到任何解释如何以这种方式执行此操作的方法，或者如果它是甚至可以通过这种方式获取所有单个文件。

提前感谢您的任何帮助或指导。

# php - PHP：弄清楚 php 表达式是否完整？

> ID：13655262
> 
> 赞同：1
> 
> 时间：2012-12-01T00:50:12.283
> 
> 标签：php, parsing, static-analysis, php-parser

我正在尝试将 Slim 模板语言 (http://www.slim-lang.com) 移植到 PHP。我也想为 PHP 提供一些细节，但我无法确定表达式是否完整。

例如这段代码：

```
- 1.upto(10)
    = i 
```

实际上会被解释为

```
1.upto(10) {
    print i
} 
```

Slim 会自行添加 {}。为此，需要对表达式进行解析。我需要确定的是我应该放大括号，如果是，那么在哪里？

我的 Slim 实现版本会将 slim 文件转换为 PHP 模板，因此代码如下：

```
- for($i = 0; $i < 10; ++$i) /// a comment
    = $i 
```

应该

```
<? for($i = 0; $i < 10; ++$i) { /// a comment ?>
    <?= $i ?>
<? } ?> 
```

注意 { 在哪里。

我知道有`token_get_all`函数，但它是一个词法分析器，我必须自己做整个解析器，我想避免重新实现解析器（对于这么小的东西来说太多了）。

那么这可以解决吗？非 PHP 解决方案也可以。

# iphone - 访问动画的presentationLayer以检测碰撞

> ID：13655264
> 
> 赞同：3
> 
> 时间：2012-12-01T00:50:42.237
> 
> 标签：iphone, objective-c, xcode

我有两个对象：一个通过动画移动，另一个在我用手指拖动时移动。我希望能够使用 CGIntersectsRect 检测两者何时“碰撞”。但是，我听说为了使用动画执行此操作，我需要访问表示层以从那里获取值。但是，我不知道该怎么做。这是我的动画代码：

```
UIImage *flakeImage = [UIImage imageNamed:@"apple.png"];
UIImageView *flakeView = [[UIImageView alloc] initWithImage:flakeImage];
flakeView.frame = CGRectMake(200, -25.0, 25.0, 25.0);
[self.view addSubview:flakeView];

[UIView beginAnimations:nil context:(flakeView)];
[UIView setAnimationDuration:2];

flakeView.frame = CGRectMake(200, 800.0, 25.0, 25.0); ] 
```

这是我用手指移动的对象的代码：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    // get current touch location
    UITouch *touch = [[event touchesForView:self.view] anyObject];
    CGPoint point = [touch locationInView:self.view];
    // update location of the image
    basketView.center = CGPointMake(point.x, basketView.center.y);

} 
```

如何访问 flakeView 动画的presentationLayer，以便检测两个对象何时相交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:54:30.953

您只需要保留对您的两个视图的引用。那么你所要做的就是：

```
if(CGRectIntersectsRect(((CALayer*)basketView.layer.presentationLayer).frame, 
    ((CALayer*)flakeView.layer.presentationLayer).frame)) {
    //handle the collision
} 
```

# c# - 从 .Net 客户端调用基于 https 的 Java 服务但有奇怪的异常

> ID：13655266
> 
> 赞同：1
> 
> 时间：2012-12-01T00:50:46.903
> 
> 标签：c#, java, .net, wcf

我有一个 https 服务，我在我的本地机器和我的 WSDL 所在的服务器上安装了证书。它在受信任的根存储中。

我正在尝试从我的 .Net 单元测试中调用基于 java 的服务。但是我遇到了一个奇怪的异常，我不确定如何解决......任何人都见过这种类型的异常。

* * *

```
 System.ServiceModel.FaultException was unhandled by user code
  HResult=-2146233087
  Message=WSWS3227E:  Error: Exception:
  Source=mscorlib
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 
```

# cocoa - 恢复时自动调整窗口位置

> ID：13655267
> 
> 赞同：2
> 
> 时间：2012-12-01T00:50:47.710
> 
> 标签：cocoa, nswindow

我有一个应用程序可以使用以下方法调整自身大小以适应不同的视图：

```
NSSize currentSize = [[box contentView] frame].size;
NSSize newSize = [v frame].size;
float deltaWidth = newSize.width - currentSize.width;
float deltaHeight = newSize.height - currentSize.height;
NSRect windowFrame = [w frame];
windowFrame.size.height += deltaHeight;
windowFrame.origin.y -= deltaHeight;
windowFrame.size.width += deltaWidth;

[box setContentView: nil];
[w setFrame: windowFrame
    display: YES
    animate: YES];

[box setContentView: v]; 
```

当您更改视图时，窗口会根据应用程序的左上角增大/缩小。应用程序总是从第一个视图开始，无论用户退出时处于哪个视图，因为这是一个摘要视图。我还希望它可以恢复，以便上次使用的文档在启动时打开。

**问题**：由于大多数视图都比摘要视图高，因此更改为一个会将窗口的左下角推到屏幕下方。现在退出应用程序并重新启动，应用程序将窗口定位到之前的左下角位置。我知道这是因为那是 Cocoa 放置原点的地方，但是对于用户来说，让窗口以相同的左上角重新启动更有意义*，*否则应用程序每次打开时都会向下移动屏幕。

我尝试观察 NSWindowWillCloseNotification 并再次调用上述方法以在关闭之前将应用程序重置为摘要视图，但即使代码有效，窗口仍然在错误的位置开始 - 我猜 Cocoa 在通知已发送。

**以前做过**：系统偏好设置 - 它会自动调整视图大小，指示您的起始视图是什么，但您可以移动窗口，下次打开它时，它将位于基于左上角的新位置角落。有人知道如何模仿吗？

**编辑：** Document.xib 有一个带有弹出按钮和一个框的小窗口。以下方法更改视图并调整窗口大小以适应这些视图。应用程序打开时一切正常，只有当应用程序关闭并使用活动文档重新打开时（即使用 Lion 的恢复），窗口移动才是问题。

```
     ==============================
    | 跳转到：___ | “===”是窗口的顶部和底部边缘
    | | “___”是选择视图的弹出菜单
    | -------------------------- | 里面的虚线框是“框”，它包含视图
    || ||
    || ||
    || ||
    || ||
    || ||
    || ||
    | -------------------------- |
     ==============================

```

```
- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
    [super windowControllerDidLoadNib:aController];

    //Note that init creates the array viewControllers
    NSMenu *menu = [viewMenu menu];
    NSUInteger i, itemCount;
    itemCount = [viewControllers count];

    for (i = 0; i < itemCount; i++) {
        NSViewController *vc = [viewControllers objectAtIndex:i];
        NSMenuItem *mi = [[NSMenuItem alloc] initWithTitle: [vc title] action: @selector(changeViewController:) keyEquivalent:@""];
        [mi setTag: i];
        [menu addItem: mi];
    }

    [self displayViewController: [viewControllers objectAtIndex: 0]];
    [viewMenu selectItemAtIndex: 0];
}

- (void) displayViewController: (ManagingViewController *) vc {
    //End editing
    NSWindow *w = [box window];
    BOOL ended = [w makeFirstResponder:w];
    if (!ended) {
        NSBeep();
        return;
    }

    //Put view in box
    NSView *v = [vc view];

    NSSize currentSize = [[box contentView] frame].size;
    NSSize newSize = [v frame].size;
    float deltaWidth = newSize.width - currentSize.width;
    float deltaHeight = newSize.height - currentSize.height;
    NSRect windowFrame = [w frame];
    windowFrame.size.height += deltaHeight;
    windowFrame.origin.y -= deltaHeight;
    windowFrame.size.width += deltaWidth;

    [box setContentView: nil];
    [w setFrame: windowFrame display: YES animate: YES];

    [box setContentView: v];

}

- (IBAction)changeViewController:(id)sender {
    NSUInteger i = [sender tag];
    ManagingViewController *vc = [viewControllers objectAtIndex: i];
    [self displayViewController: vc];
} 
```

我尝试将来自@trudyscousin 的第一个建议代码块放在 for 循环的下方，`-windowControllerDidLoadNib:`并且正确地锚定了窗口，但是当代码到达它时，`-displayViewController:`它设置 currentSize = (6,6)。我不确定这是否是因为 IB 中的框是空的。然后它将 (6,6) 和 SummaryView 大小之间的差异添加到应用程序上次退出时的窗口大小，使其变得很大。

然后我尝试通过添加两行来使用 NSUserDefaults`-changeViewController:`

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setInteger: i forKey: @"lastViewController"]; 
```

并且在`-windowControllerDidLoadNib:`

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    if ([userDefaults integerForKey: @"lastViewController"]) {
        NSInteger i = [userDefaults integerForKey: @"lastViewController"];
        ManagingViewController *vc = [viewControllers objectAtIndex: i];
        NSView *v = [vc view];
        NSSize currentSize = [v frame].size;
        [box setFrameSize: currentSize];
        [self displayViewController: vc];
        [viewMenu selectItemAtIndex: i];
    } else {
        [self displayViewController: [viewControllers objectAtIndex: 0]];
        [viewMenu selectItemAtIndex: 0];
    } 
```

这可行，但会强制应用程序以最后使用的视图启动，这不会那么糟糕，除非它甚至会在打开/创建新文档时这样做。如果我摆脱了 else （即，总是运行最后两行），我会回到我开始的地方 - 应用程序启动会在屏幕上垂直向下移动。看起来您无法在启动时设置窗口的原点，或者它可能会在稍后重新加载自己的默认值。

我做的最后一件事是回到我的起始代码（不使用@trudyscousin 提供的掩码代码），但在底部`-windowControllerDidLoadNib:`我添加了：

```
[self performSelector: @selector(adjustOrigin) withObject: nil afterDelay:0.0f]; 
```

调用：

```
- (void) adjustOrigin {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    if ([userDefaults integerForKey: @"lastViewController"]) {
        NSInteger i = [userDefaults integerForKey: @"lastViewController"];
        ManagingViewController *vc = [viewControllers objectAtIndex: i];
        NSView *v = [vc view];
        NSSize previousSize = [v frame].size;
        NSSize currentSize = [[[viewControllers objectAtIndex: 0] view] frame].size;
        CGFloat delta = previousSize.height - currentSize.height;
        NSRect windowFrame = [[box window] frame];
        windowFrame.origin.y += delta;
        [[box window] setFrame: windowFrame display:YES];
    }
} 
```

这实际上确实有效，但如果有多个东西正在运行，那么滞后就足以让您看到窗口“跳转”到它的新起点，这有点不雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T02:37:35.180

您的代码看起来不错，但真正的问题可能是您的文档 xib。

如果您的文档 xib 设置为自动布局，请将其关闭。您可以通过在 Xcode 中选择文件来做到这一点。在文件检查器中，关闭“使用自动布局”复选框。

完成后，选择弹出按钮。在大小检查器中，将按钮锚定在顶部和左侧。选择你的盒子。在尺寸检查器中，将盒子固定在所有四个边上，并确保它水平和垂直扩展。

回顾一下我之前的回答，这是您的 -windowControllerDidLoadNib: 方法，其中包含我之前建议的更改：

```
- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
    [super windowControllerDidLoadNib:aController];

    //Note that init creates the array viewControllers
    NSMenu *menu = [viewMenu menu];
    NSUInteger i, itemCount;
    itemCount = [viewControllers count];

    for (i = 0; i < itemCount; i++) {
        NSViewController *vc = [viewControllers objectAtIndex:i];
        NSMenuItem *mi = [[NSMenuItem alloc] initWithTitle: [vc title] action: @selector(changeViewController:) keyEquivalent:@""];
        [mi setTag: i];
        [menu addItem: mi];
    }

    // ---

    NSWindow *myWindow = [[[self windowControllers] objectAtIndex:0] window];

    NSUInteger styleMask = [myWindow styleMask];

    styleMask ^= NSResizableWindowMask;
    [myWindow setStyleMask:styleMask];

    if ([myWindow setFrameUsingName:@"windowFrameAutosaveName"] == NO)
    {
        [myWindow center];
    }

    (void) [myWindow setFrameAutosaveName:@"windowFrameAutosaveName"];

    styleMask &= ~NSResizableWindowMask;
    [myWindow setStyleMask:styleMask];

    // ---

    [self displayViewController:[viewControllers objectAtIndex:0]];
    [viewMenu selectItemAtIndex:0];
} 
```

我删除了较旧的注释，但现在指出附加代码在哪里。有了这个，您不必费心维护自己的文档默认值，也不必费心调整原点。

把这两件事放在一起，你（很大程度上）就有了解决办法。

是的，我需要在某种程度上限定它。您的应用程序是基于文档的应用程序，因此您将不得不想出一个唯一的名称，在该名称下将文档的窗口位置保存在您的用户默认值中，或者以某种方式将该信息与文档一起存储本身。

一如既往，祝您工作顺利。

# android - OAuth2 令牌与 Android 上的 google play 服务

> ID：13655274
> 
> 赞同：2
> 
> 时间：2012-12-01T00:51:27.290
> 
> 标签：android, oauth-2.0, google-cloud-storage, google-play-services

我正在尝试使用 Google Play 服务在 Android 上为 Google Cloud Storage 获取 Oauth2 令牌。我正在使用以下代码

```
try {
        gsToken=GoogleAuthUtil.getToken(this, email,
            "https://www.googleapis.com/auth/devstorage.read_only");
    } catch (IOException e) {
        e.printStackTrace();
    } catch (UserRecoverableAuthException userAuthEx) {
            startActivityForResult(userAuthEx.getIntent(),1);;
    } catch (GoogleAuthException e) {

    } 
```

这会引发 GoogleAuthException。Google PLAY 服务目前不支持此范围吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:10:09.727

在向 GoogleAuthUtil 询问 OAuth2 令牌时，您需要在范围前加上字符串“oauth2:”。如果您想要多个范围，可以使用空格分隔符列出它们。

因此，在您的情况下，范围字符串将是“oauth2:https://www.googleapis.com/auth/devstorage.read_only”。

有关更多详细信息，请参阅[http://android-developers.blogspot.com/2012/09/google-play-services-and-oauth-identity.html](http://android-developers.blogspot.com/2012/09/google-play-services-and-oauth-identity.html)。

# android - mgwt - 以编程方式改变方向

> ID：13655279
> 
> 赞同：2
> 
> 时间：2012-12-01T00:52:49.457
> 
> 标签：android, ios, gwt, mobile, mgwt

是否可以在 gwt+mgwt 应用程序中更改强制屏幕的特定方向？假设我希望用户始终以横向模式使用该应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:41:30.080

这取决于：是作为 phonegap 应用程序，而不是在浏览器内。

如果您作为 Web 应用程序运行，您不会`t get any control on the orientation. The browser handles that for you. But if you`作为具有 phonegap 的应用程序重新运行，您可以在应用程序内设置支持的方向（与每个本机应用程序相同）。对于 iOS，这将在您的应用程序的正常配置中。在 Android 上，这是在您的 android 清单文件中。

# java - 在java中的框架内移动相机

> ID：13655283
> 
> 赞同：-3
> 
> 时间：2012-12-01T00:53:22.653
> 
> 标签：java, camera, frame

我想知道如何在java中的Frame内移动相机。前任：

```
frame.moveInsideFrame(pointX,pointY). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:02:38.817

您将不得不移动框架中的所有内容。例如：

```
private void moveInsideFrame(int moveX, int moveY) {
    for (int i = 0; i < listOfObjects.size(); i ++) {
        JComponent current = listOfObjects.get(i);
        current.x -= moveX;
        current.y -= moveY;
    }
} 
```

（这只是示例代码，它不会真正起作用。`ArrayList`在屏幕上显示所有组件并单独移动每个组件。）

或者，如果您只是将它们全部放在框架中（而不是`paintComponent`在自定义 JPanel 中覆盖），则使用`frame.getComponents()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:07:30.213

您可以将外部框架视为“相机”框架，您可以在其中创建一个“世界”框架。然后，您可以使用相反的坐标移动您的世界窗口，以模拟相机的移动。

要实现它，请对内框使用绝对定位（即无布局）。有关绝对定位的更多详细信息，请参阅[http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)。

# jquery - 使用变量中定义的 bPopup 和 url 创建的模态窗口

> ID：13655284
> 
> 赞同：2
> 
> 时间：2012-12-01T00:53:32.630
> 
> 标签：jquery, modal-dialog, bpopup

我正在尝试使用 bPopup 插件创建模型窗口。我想我不明白的是如何使 loadUrl 成为变量。我无法更改标记。问题是因为它是一个相对 url 而不是完全限定的吗？我确实尝试 `loadUrl:'http://site.name.org' + $(this).attr('href')`过，我很茫然，任何建议都值得赞赏。

```
$("<div id='element_to_pop_up'/>").appendTo("body");

$('.cit-thumbnail-link').bind('click', function(e) {
    e.preventDefault();

    $('#element_to_pop_up').bPopup({
        content:'iframe',
        contentContainer:'.content',
        loadUrl:$(this).attr('href')  
    });               
}); 
```

标记

```
<a 
  href="/content/early/2012/11/12/jscr.rjs013.featured-figure.html"
  class="cit-thumbnail-link"
>
    <img 
      alt="Thumbnail"
      src="/content/early/2012/11/12/jscr.rjs013/embed/icon-1.gif"
      class="cit-thumbnail"
    >
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:25:02.663

如果您的问题是相对 href，您应该使用以下方式发送它的原始内容：

```
this.href 
```

而不是`$(this).attr('href')`.

这样，您将向 loadUrl 发送完整链接。

# webforms - ASPxGridView 页面适用于某些用户，而不适用于其他用户。使用 C#、ASP、SQL Express 的 WebForm 模型

> ID：13655286
> 
> 赞同：1
> 
> 时间：2012-12-01T00:53:40.630
> 
> 标签：webforms, devexpress, aspxgridview

我正在调试一个基于 WebForms 模型构建的网站，使用 ASP、C# 作为代码隐藏和 SQL Express 2008 R2。我正在尝试调试一个使用 ASPxGridView 的页面，该页面是从 .aspx 文件中填充的，并且使用的数据集也是在那里创建的。使用数据选择

```
 SelectCommand="SELECT MachineID, ProgramNo, (CONVERT (VARCHAR(19), Start, 120)) as Start,(CONVERT (VARCHAR(12), Stop,114)) as StopTime, WorkCount, PartCount as TotalWorkCount,(CONVERT (VARCHAR(12), Stop-start,114)) as PartCycle  FROM Program WHERE (MachineID = @MachineID) AND (WorkCount &gt; 0) AND (CONVERT (VARCHAR(19), Start, 120) &gt;= @StartDate) AND (CONVERT (VARCHAR(10), Start, 120) &lt;= @EndDate) order by Start Desc"> 
```

问题是大多数用户都可以登录并且页面运行良好，但少数用户在 Web 浏览器中看到以下错误：

> 在所选数据源中找不到名为“PartCycle”的字段或属性。此错误的可能原因可能如下： 网格列名称拼写错误或不区分大小写；将错误或未正确初始化的数据源分配给网格。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.HttpException：在所选数据源中找不到名为“PartCycle”的字段或属性。此错误的可能原因可能如下： 网格列名称拼写错误或不区分大小写；将错误或未正确初始化的数据源分配给网格。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [HttpException (0x80004005)：在所选数据源中找不到名为“PartCycle”的字段或属性。此错误的可能原因可能如下： 网格列名称拼写错误或不区分大小写；将错误或未正确初始化的数据源分配给网格。] DevExpress.Web.Data.WebDataControllerProvider.GetRowValueByControllerRow(Int32 controllerRow, String fieldName, Boolean isDesignTime) +300 DevExpress.Web.Data.WebDataControllerProvider.GetRowValue(Int32 visibleIndex, String fieldName , Boolean isDesignTime) +203 DevExpress.Web.Data.WebDataProxy.GetRowValue(Int32 visibleIndex, String fieldName) +77

如您所见，PartCycle 不是表中的列，而是用作 (CONVERT (VARCHAR(12), Stop-start,114)) 的别名。为了改变情节，当我以管理员身份登录网站时，我可以很好地查看问题数据。看到此错误的用户具有各种 ASPNET 角色，但每个用户都可以访问所选表中的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:28:57.807

这是因为 ASPxGridView 缓存列。

在您的情况下，您的数据源是动态的，即不同用户的数据源不同。

确保在绑定 ASPxGridView 之前清除列。

要清除列：

```
agvObject.Columns.Clear(); 
```

# sql - 子子选择和分组：从包含组最大值的行中获取名称列

> ID：13655293
> 
> 赞同：0
> 
> 时间：2012-12-01T00:55:06.787
> 
> 标签：sql, sql-server, group-by, subquery

我有两个表：States 和 Items。

`States`：

```
+----+------+-------+----------+
| id | name | state | priority |
+----+------+-------+----------+
|  1 |   AA |    10 |        1 |
|  2 |   AB |    10 |        2 |
|  3 |   AC |    10 |        3 |
|  4 |   BA |    20 |        1 |
|  5 |   BB |    20 |        5 |
|  6 |   BC |    20 |       10 |
|  7 |   BD |    20 |       50 |
+----+------+-------+----------+ 
```

`Items`：

```
+----+--------+-------+
| id | item   | state |
+----+--------+-------+
|  1 |   Blue |    10 |
|  2 |    Red |    20 |
|  3 |  Green |    20 |
|  4 | Yellow |    10 |
|  5 |  Brown |    10 |
+----+--------+-------+ 
```

该`priority`列未在`Items`表中使用，但使获取我需要的数据变得复杂，如下所示。

我想要的是表中行的列表，将每行中的值`Items`替换为*最高优先级*的值。`state.id``name` *`state`*

 *结果如下所示：

```
+----+--------+-------+
| id | item   | state |
+----+--------+-------+
|  1 |   Blue |    AC |
|  2 |    Red |    BD |
|  3 |  Green |    BD |
|  4 | Yellow |    AC |
|  5 |  Brown |    AC |
+----+--------+-------+ 
```

这是我想出的小怪物。这是最好的方法，还是我可以更高效/不那么冗长？（子子选择让我的手掌发痒。:-P）

```
SELECT *
FROM
  Items AS itm
  INNER JOIN (SELECT sta.name, sta.state
              FROM (SELECT state, MAX(priority) [highest]
                    FROM States
                    GROUP BY state) AS pri
                INNER JOIN States AS sta
                  ON sta.state = pri.state
                     AND sta.priority = pri.highest) AS nam
    ON item.state = name.state 
```

**更新**：我正在使用 MS-SQL 2005 和 MS-SQL 2008R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:48:30.053

您没有发布您的 SQL-Server 版本。假设您使用的是 2005 年或更高版本，您可以将 ROW_NUMBER() 函数与交叉应用一起使用，如下所示：

```
 CREATE TABLE dbo.States(id INT, name NVARCHAR(25), state INT, priority INT);
 INSERT INTO dbo.States
 VALUES
(  1 ,'AA',    10 ,        1 ),
(  2 ,'AB',    10 ,        2 ),
(  3 ,'AC',    10 ,        3 ),
(  4 ,'BA',    20 ,        1 ),
(  5 ,'BB',    20 ,        5 ),
(  6 ,'BC',    20 ,       10 ),
(  7 ,'BD',    20 ,       50 );

CREATE TABLE dbo.Items( id INT ,item NVARCHAR(25), state INT );
INSERT INTO dbo.Items
VALUES
(  1 ,'Blue',    10 ),
(  2 ,'Red',    20 ),
(  3 ,'Green',    20 ),
(  4 ,'Yellow',    10 ),
(  5 ,'Brown',    10 );

SELECT  i.id,
        i.item,
        s.name,
        s.priority
FROM dbo.Items i
CROSS APPLY (
SELECT *,ROW_NUMBER()OVER(ORDER BY priority DESC) rn FROM dbo.States si WHERE si.state = i.state 
)s
WHERE s.rn = 1; 
```

交叉应用类似于连接，但允许在右侧引用左侧的列，正如您在 where 子句中看到的那样。ROW_NUMBER() 函数对状态表中与当前状态值匹配的所有行以相反的优先级顺序编号，以便具有最高优先级的行始终获得数字 1。最后的 where 子句仅过滤掉这些行。

编辑：

我刚刚开始了一个关于联接的博客系列：[每天加入](http://sqlity.net/en/1146/a-join-a-day-introduction/)
交叉应用将成为第 8 天（2012 年 12 月 8 日）的主题。*

# c# - C# - 遍历多个数组/列表的最有效方法

> ID：13655299
> 
> 赞同：2
> 
> 时间：2012-12-01T00:56:06.103
> 
> 标签：c#

我有五个不同长度的数组，我需要遍历所有数组以生成所有可能的内容组合。我目前正在使用 5 个嵌套的 for 循环，如下所示：

```
for (int a = 1; a < Array1.Length - 1; a++)
  {
    for (int b = 1; b < Array2.Length - 1; b++)
      {
        for (int c = 1; c < Array3.Length - 1; c++)
          {
            for (int d = 1; d < Array4.Length - 1; d++)
              {
                for (int e = 1; e < Array5.Length - 1; e++)
                  {
                    //do something
                  }
              }
          }
      }
  } 
```

由于数组的大小，我最终得到了超过 4.56 亿次迭代。我对编程很陌生，特别是 C#。我只是好奇是否有更有效的方法来实现这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T01:00:33.570

你经历了那么多迭代，因为有那么多组合：这称为[*组合爆炸*](http://en.wikipedia.org/wiki/Combinatorial_explosion)。如果你必须通过所有可能的组合，你就不能更有效地做到这一点。

您可以使用更少的代码行对其进行编码，也可以使用*recursion*对数组的数量（在您的情况下为五个）进行硬编码。但是，迭代次数不会改变，只会改变代码行数。

```
void processCombination(int[] combination) {
    // combination[i] has the index of array #i
    ...
}
void combine(int p, int[] indexes, int[] sizes) {
    if (p == indexes.Length) {
        processCombination(indexes);
    } else {
        for (indexes[p] = 0 ; indexes[p] != sizes[p] ; indexes[p]++) {
            combine(p+1, indexes, sizes);
        }
    }
} 
```

# javascript - Flask 和 gevent 的 CORS 错误

> ID：13655301
> 
> 赞同：6
> 
> 时间：2012-12-01T00:56:37.730
> 
> 标签：javascript, python, flask, cors, gevent

我有一个正在运行的 API，使用 Flask、Flask-SQLAlchemy 和 Flask-Restless，并且正在尝试从 javascript（确切地说是 backbone.js）发出 POST/PUT/DELETE 请求。但是，我一直遇到 CORS 错误——除了 GET 之外的所有内容都会在浏览器中返回 HTTP OPTIONS 501 Not Implemented Error。

最初，我尝试向所有响应中添加限制最少的 CORS 标头：

```
@app.after_request
def after(response):
    response.headers.add('Access-Control-Allow-Origin', '*')
    response.headers.add('Access-Control-Allow-Methods',
                         'POST, GET, PUT, PATCH, DELETE, OPTIONS')
    response.headers.add('Access-Control-Allow-Headers',
                         'Content-Type, X-Requested-With')
    response.headers.add('Access-Control-Max-Age', '1728000')

    return response 
```

当请求的 Content-Type 标头设置为 application/json （根据 API 的要求）时，CORS 似乎失败了，因此进行了快速破解以使事情正常进行：

```
@app.before_request
def before():
    request.environ['CONTENT_TYPE'] = 'application/json' 
```

但是，除了 POST 之外的所有内容仍然失败。此外，gevent 的日志记录已打开，但没有记录任何 OPTIONS 请求（我相信这是 CORS 预检内容），即使浏览器显示它们以 501 失败也是如此。

我是否需要更改 gevent 或 Flask 中的某些内容才能使 CORS 正常工作？

**编辑：** 使用内置的 Flask 服务器运行 API 是可行的，所以 gevent 是这里的问题，但我似乎找不到太多的文档方式......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T04:20:14.553

[HTTP 访问控制](http://flask.pocoo.org/snippets/56/)有一个烧瓶片段装饰器，您可以使用 @crossdomain(origin='*') 装饰器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-27T05:44:57.380

最简单的方法是使用**flask-cors**插件

使用 pip 安装

> pip install -U flask-cors

示例代码

```
app = Flask(__name__)
cors = CORS(app, resources={r"/api/*": {"origins": "*"}})

@app.route("/api/v1/users")
def list_users():
  return "user example" 
```

有关文档，请点击此处[flask-cors 文档](http://flask-cors.corydolphin.com/en/latest/index.html)。

# c# - 如何在 C# 中将 javascript 对象反序列化为 XML（不是 JSON）？

> ID：13655306
> 
> 赞同：0
> 
> 时间：2012-12-01T00:57:35.027
> 
> 标签：c#, .net, xml, json, wcf

我正在使用以下代码将 JSON 字符串转换为 XML 以便在 C# 中进行处理：

```
XmlDictionaryReader xdr = JsonReaderWriterFactory.CreateJsonReader(System.Text.Encoding.Unicode.GetBytes(jsonStr), new XmlDictionaryReaderQuotas()); // @@@ QUOTA MAX WILL FIX THE MISSING CLOSING TAGS? 
XElement root = XElement.Load(xdr); // Here I get the exception: The token '"' was expected but found ' 
```

在我尝试用不被双引号括起来的字符串解析 JSON 之前，我一直使用它没有问题（顺便说一下，我认为 JSON 格式非常好）

例如：

```
{string:"value"} 
```

任何人都可以告诉我如何在 C# 中序列化 JSON，以便这种简单的格式不会破坏代码或产生异常？

**编辑：** 我认为我正在阅读的不是 JSON 对象，而是 javascript 对象，如下所示： [What's the difference between Javascript Object and JSON object](https://stackoverflow.com/questions/6489783/whats-the-difference-between-javascript-object-and-json-object)

所以问题是：如何在 C# 中将 javascript 对象反序列化为 XML（不是 JSON）？

# javascript - Chrome 扩展本地存储不起作用

> ID：13655308
> 
> 赞同：4
> 
> 时间：2012-12-01T00:57:58.100
> 
> 标签：javascript, html, google-chrome-extension, local-storage

我写了一个简单的 html 页面，它有一个输入和三个链接。

"OK" --> 将文件中的任何内容存储到本地存储

"WhoamI" --> 带有保存到本地存储的值的警报

"Check" --> 如果该值为 "asd"，则回复 "asd" 或不回复 "Asd"

非常简单，我已经将它作为一个普通的 html 页面进行了测试，它可以工作。所有功能都按应有的方式运行。

这是 index.html

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title> System Information </title>
<script src="main.js"></script>
</head>
<body>
<input type="text" name="text" id="text">
<a href="#" onclick="saveChanges(); return false">OK</a>
<a href="#" onclick="who(); return false">WhoAmI</a>
<a href="#" onclick="check(); return false">check</a>

</body>
</html> 
```

这是javascript main.js

```
function saveChanges() {
  var theValue = text.value;

localStorage["ChromeLogin"] = theValue;
}
function who() {
    alert(localStorage["ChromeLogin"]);
}
function check(){
    var test = localStorage["ChromeLogin"];
    if (test == "asd"){
        alert("it is asd");
    }else{
        alert("It is NOT asd");
    }
} 
```

![在此处输入图像描述](../Images/a4c7e1b82e15b74289e22f2cb6e23f28.png)

但是，当我导入与 google chrome 扩展相同的代码时，一切都停止工作了。

这是我的 manifest.json 代码。

```
{
  "name": "testLocalStorage",
  "version": "0.0.1",
  "description": "Capture a tab",
  "options_page": "index.html",

  "manifest_version": 2,

  "browser_action": {
  "default_title": "Capture tab"
  },
  "permissions" : ["tabs", "<all_urls>", "storage"]
} 
```

我假设这是问题所在： ![问题截图](../Images/31638269468328687885aa895b4ee12c.png)

我通读了[这篇](http://developer.chrome.com/extensions/contentSecurityPolicy.html)文章，但我无法弄清楚。

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T05:16:19.523

看来你没有完全理解你提到的[链接:)，在引用的链接中有一个](http://developer.chrome.com/extensions/contentSecurityPolicy.html)[内联脚本部分](http://developer.chrome.com/extensions/contentSecurityPolicy.html#relaxing-inline-script)，它说[内联脚本不会被执行。](http://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution)

***对 index.html 所做的更改***

1）删除了所有的**INLINE JS**

`<a href="#" onclick="saveChanges(); return false">OK</a>`

`<a href="#" onclick="who(); return false">WhoAmI</a>`

`<a href="#" onclick="check(); return false">check</a>`

至

`<a href="#" id="ok">OK</a>`

`<a href="#" id="who">WhoAmI</a>`

`<a href="#" id="check">check</a>`

通过分配 id

**最终 index.html**

```
<html>
<head>
<title> System Information </title>
<script src="main.js"></script>
</head>
<body>
<input type="text" name="text" id="text">
<a href="#" id="ok">OK</a>
<a href="#" id="who">WhoAmI</a>
<a href="#" id="check">check</a>

</body>
</html> 
```

***对 main.js 所做的更改***

1) 向所有 3 个函数添加事件处理程序，点击`<a/>`标签，如下所示

> window.onload = 函数（）{
> 
> ```
> document.getElementById('ok').onclick = saveChanges;
> document.getElementById('check').onclick = check;
> document.getElementById('who').onclick = who; 
> ```
> 
> }

**最终 main.js**

```
function saveChanges() {
  var theValue = text.value;

  localStorage["ChromeLogin"] = theValue;
}
function who() {
    alert(localStorage["ChromeLogin"]);
}
function check(){
    var test = localStorage["ChromeLogin"];
    if (test == "asd"){
        alert("it is asd");
    }else{
        alert("It is NOT asd");
    }
}
window.onload=function (){
    document.getElementById('ok').onclick=saveChanges;
    document.getElementById('check').onclick=check;
    document.getElementById('who').onclick=who;
} 
```

***对 manifest.json 所做的更改***

1）消除了不必要的权限部分`manifest.json`

**最终清单.json**

```
{
  "name": "testLocalStorage",
  "version": "0.0.1",
  "description": "Capture a tab",
  "options_page": "index.html",

  "manifest_version": 2,

  "browser_action": {
  "default_title": "Capture tab"
  }
} 
```

**最终输出**

![在此处输入图像描述](../Images/908a86d1e3454ec2c9b6ee91c17481ed.png)

# javascript - 转换为可用的数组 jquery

> ID：13655309
> 
> 赞同：-2
> 
> 时间：2012-12-01T00:58:07.910
> 
> 标签：javascript, jquery, arrays, push

我正在尝试将此加载​​的 DOM 转换为我可以使用的数组格式。

```
<div>
    <div>[a image]</div>
    <div>
        <p class="ab">text 1</p>
        <p class="bc">text 2</p>
    </div>
</div>
<div>
    <div>[a image]</div>
    <div>
        <p class="ab">text 1</p>
        <p class="bc">text 2</p>
    </div>
</div> 
```

我想读取这些 div 节点并将其转换为数组结构，如下所示：

> var arrayObj = [{
> “img”：“source”，“ab”：“text”，“bc”：“text”}，{“img”：“source”，
> “ab”：“text”，“bc” ： “文本” }

有人可以告诉我如何实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:03:02.483

循环遍历容器的`children[]`数组。对于每一个，找到图像和`p`标签。分配给一个新对象。将对象推入数组。

例子：

```
var out = [], container = document.getElementById('container'),
    c = container.children, l = c.length, i, obj, p, m, j;
for( i=0; i<l; i++) {
    obj = {};
    obj.img = c[i].getElementsByTagName('img')[0].src;
    p = c[i].getElementsByTagName('p');
    m = p.length;
    for( j=0; j<m; j++) obj[p[j].className] = p[j].firstChild.nodeValue;
    out[i] = obj;
}
// out 
```

# python - 如果没有像 Beautiful Soup 这样的解析器，我如何在 Selenium 中找到特定但晦涩的元素？

> ID：13655312
> 
> 赞同：0
> 
> 时间：2012-12-01T00:58:48.717
> 
> 标签：python, selenium

我正在使用 Selenium 尝试在网页中查找一组特定元素，如下所示：

```
<br>Time remaining: <span style='color:red;font-weight:bold' > 4 mins, 40 secs</span>
<br>Time remaining: <span style='color:red;font-weight:bold' > 12 mins</span>
<br>Time remaining: <span  > 5 hrs, 39 mins</span> 
```

通常有大约 10 到 20 个，在我意识到有些不是红色之前，我只是使用了这个：

```
timeleft = browser.find_elements_by_css_selector("span[style='color:red;font-weight:bold']") 
```

元素的文本可以在 "mins, secs" , "mins" , "secs" , "hrs, mins" 等之间变化。我正在尝试找到一种方法来获取没有 "style" 的这些元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:10:18.833

这应该对您有用，除非时间词出现在您不想包含的页面上的其他跨度中......

```
browser.find_elements_by_xpath(
    "//span[contains(text(), 'secs') or contains(text(), 'mins') or contains(text(), 'hrs')]") 
```

# php - 使用 codeigniter 进行分页，除索引功能外

> ID：13655318
> 
> 赞同：1
> 
> 时间：2012-12-01T01:00:33.067
> 
> 标签：php, codeigniter, pagination

我已将溃败设置为

```
$route['dog/(:any)']        = "dog/index/$1";  /// for single dog info
$route['dog/list']              = "dog/listing";   /// for dog list, display all dogs.
$route['dog/list/(:num)']       = "dog/listing/$1"; /// for pagination 
```

单身狗网址就像 dog/dogName-4.html

我的控制器是

```
public function index()
{
    $dogInfo = $this->uri->segment(2);

    if ($dogInfo != "")
    {
        $dogDetails = explode('-', $dogInfo);

        $this->load->view('common/header',$header);
        $this->load->view('dog/dog_info', $content);
        $this->load->view('common/footer', $footer);
    }
    else
        redirect('welcome', 'location', 301);
}
public function listing()
{
    $this->load->library("pagination");
    $breed  = $this->input->get('breed');
    $gender = $this->input->get('gender');
    $state  = $this->input->get('state');
    $seller = $this->input->get('seller');

    $config = array();
    $config["base_url"] = base_url() . "dog/list/";
    $config["total_rows"] = $this->dogs->get_dog_list_count($breed, $gender, $state, $seller);
    $config["per_page"] = 5;
    $config["uri_segment"] = 2;
    $config['use_page_numbers'] = TRUE;
    $this->pagination->initialize($config);
    $page = ($this->uri->segment(2)) ? $this->uri->segment(2) : 0;
    $content['details'] = $this->dogs->get_dog_list($config["per_page"], $page,$breed, $gender, $state, $seller);

    $content['paginatonLinks'] = $this->pagination->create_links();
    $content['total_dogs'] = $config['total_rows'];
    $content['cur_page'] = $page + 1;
    $content['total_pages'] = ceil($config["total_rows"] / $config["per_page"]);

    $this->load->view('common/header');
    $this->load->view('dog/dog_list', $content);
    $this->load->view('common/footer', $footer);
} 
```

控制器的索引功能是显示一条狗的信息，列表功能是针对所有的狗，

我必须为列表功能设置分页我确实为分页设置了所有必需的变量，分页也显示了结果

找到 [134] 广告 :: 第 1 页，共 27 页 1 2 3 > 最后 ›</p>

但是当我单击页面上的分页 1 2 3 else 时，它​​会将我带到索引页面。

我需要在控制器的列表功能上。请任何人帮助我。

* * *

这是更新的代码

溃败代码是

```
$route['dog/list']      = "dog/listing";
$route['dog/list/(:num)']       = "dog/listing/$1";
$route['dog/(:any)']        = "dog/index/$1"; 
```

这是更新的控制器代码

```
 $config = array();
    $config["base_url"] = base_url() . "dog/list/";
    $config['suffix'] = '?'.http_build_query($_GET, '', "&");
    $config["total_rows"] = $this->dogs->get_dog_list_count($breed, $gender, $state, $seller);
    $config["uri_segment"] = 3;

    $config["per_page"] = 5;
    $config['use_page_numbers'] = TRUE;
    $config['full_tag_open'] = '<div class="pagination">';
    $config['full_tag_close'] = '</div>';
    $config['cur_tag_open'] = '<a href="#" class="page_selected">';
    $config['cur_tag_close'] = '</a>';
    $this->pagination->initialize($config);
    $page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0;
    $this->load->model('DogsListing_model', 'dogs');
    $this->load->model('Breed_model', 'breeds');
    $content['breeds']  = $this->breeds->get_all_id_title();
    $content['details'] = $this->dogs->get_dog_list($config["per_page"], $page,$breed, $gender, $state, $seller);
    $content['search']  = array('breed' => $breed, 'gender' => $gender, 'state' => $state, 'seller' => $seller);
    $content['paginatonLinks'] = $this->pagination->create_links();
    $content['total_dogs'] = $config['total_rows'];
    $content['cur_page'] = $page + 1;
    $content['total_pages'] = ceil($config["total_rows"] / $config["per_page"]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:26:22.510

我找到了我的问题的解决方案

首先，我`$this->uri->segment(3) and $config["uri_segment"] = 3;`使用了错误的 uri->segment 进行分页。这解决了我与分页相关的问题。

我的下一部分是我必须使用分页为卖家或搜索结果设置变量。例如，我有`doglist.html/?seller=29`我需要用这个分页嵌入分页的 url。所以结果就像`dog/list/3?breed=&gender=female&state=&submit2=Fetch`我已经用这行代码解决了这个问题`$config['suffix'] = '?'.http_build_query($_GET, '', "&");`现在我的变量分页工作正常。

感谢@jtheman 和@Venkat，但主要是@jtheman 的贡献。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:52:25.510

如果您对[分页](https://stackoverflow.com/questions/13519130/show-limited-no-of-page-links-in-codeigniter-pagination/13523440#13523440)有任何疑问，请查看我写的这个通用函数作为另一个问题的答案。

# cocos2d-iphone - 启用/禁用 CCMenu 对象的更好方法

> ID：13655320
> 
> 赞同：4
> 
> 时间：2012-12-01T01:01:12.620
> 
> 标签：cocos2d-iphone

> ***** -[CCTouchDispatcher forceAddHandler:array:], /libs/cocos2d/Platforms/iOS/CCTouchDispatcher.m:108 中的断言失败****
> 
>  ******* 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“已将委托添加到触摸调度程序。”******

 ****导致它的行是

```
skillsMenu.isTouchEnabled = YES; 
```

`skillsMenu`只是一个`CCMenu`。我喜欢经常使用上面的行启用/禁用它。

问题是，我不知道如何正确解释这个错误——我不知道为什么设置这个属性会导致这样的错误。

也许一开始就使用那条线是错误的。没有更好的方法来启用/禁用 a`CCMenu`吗？

cocos2d-iphone 1.0.1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T02:28:16.373

`isTouchEnabled`注册/注销对象的触摸处理程序。

在同一步骤中注册和注销触摸处理程序在过去曾引起过问题，尽管在最近的版本中，我相信这已得到解决。

在任何情况下，如果您只是想暂时启用/禁用菜单，启用/禁用单个菜单项的问题会更小：

```
-(void) modifyMenu:(CCMenu*) menu withEnabledValue:(BOOL) enabled
{
    CCMenuItem *menuItem;
    CCARRAY_FOREACH(menu.children, menuItem)
    {
        [menuItem setIsEnabled: enabled ];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T04:14:41.177

CCMenu 有一个 .enabled 属性（可设置），请改用它。与 isTouchEnabled 的不同之处在于菜单未从触摸调度程序注册/注销。相反，当 myMenu.enabled 为 false 时，触摸在 CCMenu 的 ccTouchBegan 委托方法中从一开始就被忽略。这更干净，并且避免了使用 isTouchEnabled 的陷阱（这是 CCLayer 类的属性，CCMenu 扩展了它）。****

# jquery - 如何使用 javascript 将哈希标签替换为来自 jquery 数据属性的链接

> ID：13655333
> 
> 赞同：7
> 
> 时间：2012-12-01T01:03:04.730
> 
> 标签：jquery, regex, hashtag

我正在有效地尝试在这个问题中做同样的事情 [Change #hash tag to link on page load](https://stackoverflow.com/questions/7575041/change-hash-tag-to-link-on-page-load) 但我认为因为我从 jquery 对象数据标题属性中获取字符串，所以某些东西无法正常工作。我有一个这样的 DOM 元素

```
<a class="thumbnail" rel="gallery" data-caption="#drink from somewhere #fun" data-pid="36" href="http://domain.com/something"><img src="http://domain.com/somephoto.png" alt="acee7bd0d8339b9ddcf4a259ec7ddeec"></a> 
```

它基本上是一个加载到模式中的缩略图然后我试图抓住属性标题并从任何哈希标签创建链接

```
 var caption = anchor.attr('data-caption') ? anchor.attr('data-caption') : null;
 console.log(caption); 
```

其中变量anchor是代表链接的jquery对象

如果我检查它打印的日志，我可以看到有一个标题“#drink from某个地方#fun”

所以现在把它扔进正则表达式替换 fn

```
caption.replace(/#(\S*)/g,'<a href="http://twitter.com/#!/search/$1">$1</a>'); 
```

然后将标题附加到 DOM 并激活链接。

但是标题字符串没有任何反应，我只是得到了我输入的同样的东西。

**编辑答案愚蠢的错误忘记将返回值分配给变量

```
var captionLinks = caption.replace(/#(\S*)/g,'<a href="http://twitter.com/#!/search/$1">$1</a>'); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T01:09:39.683

如果您问题中的代码完全按照您使用的方式发布，您需要分配`caption.replace()`. 只是打电话`.replace()`不会改变`caption`。

假设您所做的一切是这样的：

```
caption.replace(/#(\S*)/g,'<a href="http://twitter.com/#!/search/$1">$1</a>'); 
```

尝试像这样使用它：

```
caption = caption.replace(/#(\S*)/g,'<a href="http://twitter.com/#!/search/$1">$1</a>'); 
```

根据以下[**文档**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)`Replace`：

> 返回一个新字符串，其中模式的部分或全部匹配被替换替换。模式可以是字符串或正则表达式，替换可以是字符串或每次匹配调用的函数。

当然，如果您已经这样做了，而您只是没有发布，那么问题就是其他问题。

让我知道是否是这种情况，我将删除我的答案，因为它显然不适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T20:57:24.263

我会`/#(\S+)/g`尽量避免单#

# javascript - 带有正则表达式的 Javascript .replace() 导致浏览器挂起/崩溃

> ID：13655334
> 
> 赞同：0
> 
> 时间：2012-12-01T01:03:14.790
> 
> 标签：javascript, html, regex, performance, freeze

我的目标是遍历一组给定的元素，并用链接正则表达式替换内部 HTML，这样我就可以将 HTML 文本转换`http://*.*/*`为`<a href="http://*.*/*" target="_blank">http://*.*/*</a>`

所以我正在运行一些香草javascript：

```
for (var i = 0; i < document.getElementsByClassName('title').length; i++) {
    var title = document.getElementsByClassName('title')[i]
    title.innerHTML = title.innerHTML.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a target='_blank' href='$1'>$1</a>")
} 
```

这只是我正在使用的正则表达式：

`/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig`

那么，到底为什么这个循环会导致浏览器挂起呢？循环的文本不超过 256 个字符，通常有 5 到 30 个`.title`元素，绝对不是会导致浏览器崩溃/挂起的数据级别。我只在 Chrome/Safari 中体验过，不确定它是否发生在 Firefox/Opera 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:06:24.283

尝试存储结果。

```
var titles = document.querySelectorAll(".title");
// querySelectorAll is supported in slightly more browsers than getElementsByClassName
var l = titles.length, i, title;
for( i=0; i<l; i++) {
    title = titles[i];
    title.innerHTML = title.innerHTML.replace(/..../,'....');
} 
```

如果挂起继续，可能是因为正则表达式匹配您已经替换的内容。尝试添加一个否定的前瞻，以确保在您匹配的 URL 之后没有单引号。`(?=!')`

# sql-server - 从一个表中删除具有另一表条件的行

> ID：13655335
> 
> 赞同：1
> 
> 时间：2012-12-01T01:03:20.393
> 
> 标签：sql-server

这是我的 MS SQL 代码：

```
ALTER PROCEDURE dbo.RemoveFromCart
  @SellerID int
AS
DELETE FROM ShoppingCart
  WHERE Quantity > (SELECT Products.Quantity FROM Products, ShoppingCart
    WHERE ShoppingCart.ProductID = Products.ProductID )
  AND ShoppingCart.SellerID = @SellerID 
```

我需要删除表中产品数量较大的行`shoppingCart`，`ShoppingCart.Quantity`但`Products`没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:13:52.693

尝试这个：

```
ALTER PROCEDURE dbo.RemoveFromCart
    @SellerID int
AS

    DELETE 
        cart

    FROM 
        ShoppingCart cart
    INNER JOIN Products prod
        ON cart.ProductID = prod.ProductID

    WHERE 
            cart.Quantity > prod.Quantity
        AND cart.SellerID = @SellerID; 
```

你可以像这样测试它：

```
SELECT 
    ProductID, Quantity, SellerID
INTO ShoppingCart
FROM
(
    SELECT 1 AS ProductID, 10 AS Quantity, 1 AS SellerId UNION ALL
    SELECT 2 AS ProductID,  6 AS Quantity, 1 AS SellerId UNION ALL
    SELECT 3 AS ProductID,  8 AS Quantity, 2 AS SellerId UNION ALL
    SELECT 4 AS ProductID,  6 AS Quantity, 2 AS SellerId 
) X;

SELECT 
    ProductID, Quantity, SellerID
INTO Products
FROM
(
    SELECT 1 AS ProductID,  9 AS Quantity, 1 AS SellerId UNION ALL
    SELECT 2 AS ProductID,  8 AS Quantity, 1 AS SellerId UNION ALL
    SELECT 3 AS ProductID,  7 AS Quantity, 2 AS SellerId UNION ALL
    SELECT 4 AS ProductID,  6 AS Quantity, 2 AS SellerId 
) X;

Begin tran

select * from ShoppingCart;
select * from Products;

execute dbo.RemoveFromCart 1

select * from ShoppingCart;
select * from Products;
rollback tran 
```

结果如下：

![在此处输入图像描述](../Images/94a8aa429682d96e2a368d35d5314d22.png)

请注意，对于 SellerID 1，已删除 ProductID = 1，因为它在购物车中有 10 个，而在产品表中限制为 8 个。但是对于 SellerId 2 仍然存在超限，因为 proc 一次仅适用于一个 SellerId。

# xaml - 我不知道如何在 XAML Grid 中调整行宽和高度（win 8 商店应用程序）

> ID：13655336
> 
> 赞同：0
> 
> 时间：2012-12-01T01:03:32.857
> 
> 标签：xaml, windows-8

我正在使用 Windows 8 商店构建一个简单的 Xaml 应用程序。使用默认的（文件/新建/项目）网格模板，我得到了一个屏幕，显示了大约 8 个完全对齐的图块。我想让瓷砖更短更宽。当我这样做时，似乎网格本身会记住前面的一面。

那个套装在哪里？如何设置它，以便在更改单个图块大小后，我的网格流动良好。我附上一张图片来澄清问题。也就是说，瓷砖之间的微小间隙似乎以某种方式硬编码为我目前的尺寸，我无法弄清楚在哪里更改该尺寸。

谢谢，![在此处输入图像描述](../Images/497b1b88caf5a321ce934b380d978a56.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:30:25.170

没关系。我找到了。（width="500" 是正在寻找的东西）

```
 <DataTemplate x:Key="DefaultGridItemTemplate">
          <Grid HorizontalAlignment="Left" Width="500" Height="250"> 
```

# php - Symfony2 - PdfBundle 不工作

> ID：13655338
> 
> 赞同：3
> 
> 时间：2012-12-01T01:03:40.847
> 
> 标签：php, symfony, pdf-generation, twig

使用 Symfony2 和[PdfBundle](https://github.com/psliwa/PdfBundle)动态生成 PDF 文件，我确实无法生成文件。

按照文档说明，我已经设置了所有捆绑内容：

自动加载.php：

```
'Ps' => __DIR__.'/../vendor/bundles',
'PHPPdf' => __DIR__.'/../vendor/PHPPdf/lib',
'Imagine' => array(__DIR__.'/../vendor/PHPPdf/lib', __DIR__.'/../vendor/PHPPdf/lib/vendor/Imagine/lib'),
'Zend' => __DIR__.'/../vendor/PHPPdf/lib/vendor/Zend/library',
'ZendPdf' => __DIR__.'/../vendor/PHPPdf/lib/vendor/ZendPdf/library', 
```

应用内核.php：

> ... 新的 Ps\PdfBundle\PsPdfBundle(), ...

我想所有设置都已正确配置，因为我没有得到任何“找不到库”，也没有任何东西......

所以，毕竟，我在控制器中这样做：

```
...
use Ps\PdfBundle\Annotation\Pdf;
...

/**
 * @Pdf()
 * @Route ("/pdf", name="_pdf")
 * @Template()
 */
public function generateInvoicePDFAction($name = 'Pedro')
{
    return $this->render('AcmeStoreBundle:Shop:generateInvoice.pdf.twig', array(
        'name' => $name,
    ));
} 
```

并拥有这个树枝文件：

```
<pdf>
    <dynamic-page>
        Hello {{ name }}!
    </dynamic-page>
</pdf> 
```

好。不知何故，我刚刚在我的页面中得到的只是生成的普通 html，就好像它是普通的响应渲染一样。

`Pdf()`注释应该给出创建 PDF 文件而不是呈现普通 HTML 的“特殊”行为。

因此，有了上面的代码，当我请求路由时`http://www.mysite.com/*...*/pdf`，我得到的只是呈现的以下 HTML：

```
<pdf>
    <dynamic-page>
        Hello Pedro!
    </dynamic-page>
</pdf> 
```

（所以是一个只有文字的空白 HTML 页面`Hello Pedro!`。

有什么线索吗？我做错什么了吗？除了 *.pdf.twig 版本之外，是否必须有替代 *.html.twig ？我不这么认为... :(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T11:01:27.030

好，我知道了。

出于某种原因，捆绑文档中的示例对我不起作用。尽管如此，de bundle 中有这个类：http: [//github.com/psliwa/PdfBundle/blob/master/Controller/ExampleController.php](http://github.com/psliwa/PdfBundle/blob/master/Controller/ExampleController.php)，我可以在其中找到一个对我有用的示例。这是我最终使用的代码：

```
/**
 * @Route ("/generateInvoice", name="_generate_invoice")
 */
public function generateInvoiceAction($name = 'Pedro')
{
    $facade = $this->get('ps_pdf.facade');
    $response = new Response();
    $this->render('AcmeStoreBundle:Shop:generateInvoiceAction.pdf.twig', array("name" => $name), $response);

    $xml = $response->getContent();

    $content = $facade->render($xml);

    return new Response($content, 200, array('content-type' => 'application/pdf'));
} 
```

下一个挑战：将该 PDF 存储到磁盘中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-11T13:33:32.403

这是因为您错过了 URL 中的“_format”选项。

`$this->render()`不应与`@Template`注释一起使用。将`@Template`根据参数提供正确的模板格式`_format`。

```
...
use Ps\PdfBundle\Annotation\Pdf;
...

/**
 * @Pdf()
 * @Route ("/pdf.{_format}", name="_pdf")
 * @Template()
 */
public function generateInvoicePDFAction($name = 'Pedro')
{
    return array('name' => $name);
} 
```

应该可以正常工作。

# groovy - 如何在groovy中制作def（序列）

> ID：13655339
> 
> 赞同：0
> 
> 时间：2012-12-01T01:03:44.747
> 
> 标签：groovy

我是初学者。我有个问题。有一个列表 [3, 2, 8, 5, 44, 9]。我该怎么做`def SortMe(sequence)`？

我希望结果是 [2, 3, 5, 8, 9, 44]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T01:45:50.663

您将需要groovy中[Collection上的排序方法。](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html)它有很多有趣的选择。

```
def list = [2, 5, 7, 1, 4, 3].sort()
println list 
```

欢迎来到 groovy。希望你喜欢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:06:14.663

另一种解决方案是使用 TreeSet 而不是使用列表

def list = [10,10,1] 作为 TreeSet

这是输出：1,10

你得到一个有序且没有重复的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:04:57.267

kingObergers 在如何对集合进行排序方面是正确的......

但是，如果你想将它包装在一个函数中，你可以这样做：

```
Collection sortMe( Collection a ) {
  a.sort( false )
}

def listA =  [3, 2, 8, 5, 44, 9]
def listB = sortMe( listA )

assert listA == [3, 2, 8, 5, 44, 9] // Original is unchanged
assert listB == [2, 3, 5, 8, 9, 44] // Sorted list is returned from sortMe 
```

传递`false`给 sort 方法意味着将返回一个新的排序集合，而原来的 Collection 将保持不变

# uml - 聚合和组合 - 错误的教程示例

> ID：13655342
> 
> 赞同：1
> 
> 时间：2012-12-01T01:04:53.000
> 
> 标签：uml, diagram, composition, aggregation

我发现这两个例子在概念上是相同的——但一个是组合，另一个是聚合。

在第[一个示例](http://javapapers.com/oops/association-aggregation-composition-abstraction-generalization-realization-dependency/)中，关系“class (has-a) students”是一个组合。

> 一个班级包含学生。没有班级，学生就无法存在。班级和学生之间存在着组合。

在[第二个示例](http://en.wikipedia.org/wiki/Object_composition#Aggregation)中，关系“部门（有）教授”是一个聚合。

> 如果大学关闭，这些部门将不复存在，但这些部门的教授将继续存在

在我看来，第一个是完全错误的。[请注意，在这个](https://stackoverflow.com/questions/1644273/what-is-the-difference-between-aggregation-composition-and-dependency)SO 问题的评论部分，@TallPaul 也在质疑第一个示例。我认为在实践中，它会从系统中删除每学期后参加课程的所有学生。此外，学生可能必须由类在初始化时创建，因为 C++ 中的组合通常是作为私有属性（而不是指针）实现的。我对吗？第一个例子有什么意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:30:36.327

没有绝对的真理，这完全取决于您正在建模的系统。您可以创建一个系统，其中学生是仅存在于特定班级中的实例，并且当班级被删除时，学生也是如此。例如，当您不想在班级之间存储学生信息时，这可能很有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:54:05.240

是的，这些都是弱例子，一个类必须有一个主题将是组合的一个更好的例子。班级和学生之间的关系是聚合，因为两者的生命周期不同。

有关更详细的示例，请参阅 [Java 中的 UML 关联] [1](http://www.spamer.me.uk/wiki/doku.php/oo_java_uml_association)

# bash - Sublime Text 2 - OS X 命令行

> ID：13655343
> 
> 赞同：9
> 
> 时间：2012-12-01T01:04:56.380
> 
> 标签：bash, terminal, sublimetext2

使编辑器能够从命令行启动的原始 Sublime 2[指令：](http://www.sublimetext.com/docs/2/osx_command_line.html)

```
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl 
```

不要在山狮工作。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-01T01:07:59.403

`~/bin`如果该目录尚不存在，则创建该目录：

```
mkdir ~/bin 
```

然后`ln`再次运行。通过将其添加到 ~/.bashrc 文件中，确保将目录添加到您`$PATH`的目录中，如果它不存在则创建它：

```
export PATH="$PATH:~/bin" 
```

如果您不使用 bash，请使用您的手册​​来了解如何将目录添加到您的`$PATH`变量中。

这实际上是说明所说的：

> 第一个任务是创建一个到 subl 的符号链接。假设您已将 Sublime Text 2 放在 Applications 文件夹中，**并且您的路径中有一个 ~/bin 目录**，您可以运行：[snip]

这意味着如果目录不存在，则需要创建`~/bin`目录，如果不存在，则将其添加到您的目录`$PATH`中。上面的说明正是这样做的。

如果您不喜欢`bin`漂亮主文件夹中那个丑陋的文件夹，可以使用`chflags`它使其从 Finder 中消失：

```
chflags hidden ~/bin 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-01T01:04:56.380

将目标目录更改为系统文件夹 /usr/bin 并使用 sudo 获得管理员权限。

```
sudo ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" /bin/subl 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-21T10:18:15.943

我最近在 OSX Mountain Lion 上遇到了这个问题，然后又在 Mavericks 上遇到了这个问题。这个解决方案对我有用：

如果 bin 目录不存在，则在 /usr/local/bin 中创建它：

```
sudo mkdir /usr/local/bin 
```

您必须使用 sudo 并输入密码来创建目录，因为它位于系统文件夹中。

在 /usr/local/bin 中设置`subl`为命令行命令：

```
sudo ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" /usr/local/bin/subl 
```

默认情况下，目录 /usr/local/bin 已经在您的目录中`$PATH`，即使它尚不存在，因此无需将其添加到您的`$PATH`. 文件夹 /usr/local 也是用于 git 和 homebrew 安装的文件夹，因此将所有本地命令行命令保存在此位置是有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T23:12:50.110

也许它已经在这里了，但这对我来说就像一个魅力：

```
ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl 
```

# javascript - 在匿名函数中声明函数

> ID：13655353
> 
> 赞同：6
> 
> 时间：2012-12-01T01:06:46.747
> 
> 标签：javascript, function, anonymous

我正在查看似乎声明需要调用才能运行的函数的代码。这个函数是在一个匿名函数中声明的。这是否意味着该块之外的任何东西都无法访问该功能？

```
(function () {
    var _d = vjo.dsf.EventDispatcher;
    var _r = vjo.Registry;

    function $1(p0) {
        return function (event) {
            return this.onSubmit(p0, event);
        };
    };
})(); 
```

为什么有人会这样做？我不确定`$`此代码的目的/相关性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T01:08:46.313

> *“这不是说这个区块之外的任何东西都无法访问这个功能吗？”*

是的，它确实。

> *“为什么会有人这样做？”*

通常是因为它包含仅供内部使用的代码，但在您的示例中，该函数从未被调用。

> *“我不是此代码中“$”的目的/相关性。”*

没有相关性。只是另一个有效的变量字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T01:10:59.700

您发布的示例显示了在 javascript 中编写“模块”的常见模式，尽管其中存在错误。$1 永远不会被调用并且是私有的，这意味着它可能不存在。然而，在一个有效的例子中，会有额外的代码调用 $1 和可能的其他函数。然后，当包含此代码时，整个事情都会评估，但全局命名空间不会被声明污染。

# sql-server - 在 SQL 中按月显示年度摘要

> ID：13655362
> 
> 赞同：0
> 
> 时间：2012-12-01T01:07:43.940
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个有一个`date/time`字段的表，我试图弄清楚如何运行报告，以便我可以分别查看 2012 年每个月之间的金额总和。

该表有 2 个字段`Amount`和`TimeStamp`，我正在尝试返回这样的报告：

*   2012 年 1 月：221.20 美元
*   2012 年 2 月：150.20 美元

等等等等

任何人都知道如何在 SQL Server 中轻松完成此任务？我想避免为每个月编写单独的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:11:30.980

这可以通过在 SQL 上使用 MONTH 和 YEAR 函数来解决。

```
SELECT
    SUM(Amount) as [Amount]
    ,MONTH(TimeStamp) as [Month]
    ,YEAR(TimeStamp) as [Year]
FROM
    [MyTable]
GROUP BY
     MONTH(TimeStamp)
     ,YEAR(TimeStamp) 
```

# c++ - 具有 C++ 设置错误的用户对象

> ID：13655365
> 
> 赞同：1
> 
> 时间：2012-12-01T01:08:12.070
> 
> 标签：c++, object, set

我似乎在比较一组对象时遇到问题。
将项目添加到集合中一切正常，但是当我尝试使用时，`set::find`我收到以下错误。我尝试研究但无法解决此问题

剧院.cpp

```
#ifndef _THEATER_CPP
#define _THEATER_CPP

#include <iostream>
#include <string>
#include <set>

#include "theater.h"

//struct comparebyname {
//bool operator ()(customer const& a, customer const& b) const
//{
 // return a.getname() < b.getname();
//}
//};

//class comp
//{
//public:
//bool operator()(const customer a1,const  customer a2) const
//{
//return a1.getname()<a2.getname();
//}
//};

//using namespace std;
//initializes a default theater to be changed
theater::theater()
{

string moviename ="theater";
int rows = 0;
int seats = 0;
double price = 0.00;
set<int> emptyseats;

set<customer> patrons;

};

//accessors

string theater::getname()
{
return moviename;
}

int theater::getrows()
{
return rows;
}

int theater::getseats()
{
return seats;
}

double theater::getprice()
{
return price;
}

int theater::getbestemptyseat()
{
set<int>::iterator it;
int i;
it = emptyseats.begin();
i = *it;
emptyseats.erase(it);
return i;
}

int theater::numberseatsavailable()
{
return emptyseats.size();
}

//mutators

void theater::setname(string s)
{
moviename=s;
}

void theater::setrows(int i)
{
    rows = i;
}

void theater::setseats(int i)
{
seats = i;
}

void theater::setprice(double d)
{
price=d;
}

void theater::makeseatempty(int i)
{
emptyseats.insert(i);
}

void theater::addpatron(customer  c)
{
patrons.insert(c);
}
void theater::removepatron(customer c)
{
patrons.erase(c);
}

set<customer> theater::getpatrons()
{
customer hellyeah;
set<customer>::iterator it;
int i;

//for ( it=patrons.begin();it!=patrons.end();it++)
//{
  //  hellyeah=*it;
//    cout<<"\n\n\n aaa"<<hellyeah.getname()<<" \n\n";
    //set<customer>::iterator it;

//
// }
it=patrons.find("help");
}

//bool operator ==(customer const& a, customer const& b)
//{
//  return a.getname() == b.getname();/
//
//}

bool operator ()(customer const& a, customer const& b) const
{
return a.name < b.name;
}

bool operator <(customer const& a, customer const& b)
{
return a.getname() < b.getname();
}

bool operator >(customer const& a, customer const& b)
{
    return a.getname() > b.getname();
}
bool operator ==(customer const& a, customer const& b)
{
    return a.getname() == b.getname();
}

#endif 
```

剧院.h

```
#ifndef _THEATERT_H
#define _THEATER_H
#include "customer.h"
//#include <string>

using namespace std;

class theater
{
public:

    // constructors
    theater();  // default constructor

    // destructor
    //~myObject();

    //accessors
    string getname();
    int getrows();
    int getseats();
    double getprice();
    set<customer> getpatrons();

    //technically a mutator?
    int getbestemptyseat();
    int numberseatsavailable();

    //mutators
    void setname(string);
    void setrows(int);
    void setseats(int);
    void setprice(double);
    void makeseatempty(int);
    void addpatron(customer);
    void removepatron(customer);

private:

    string moviename;
    int rows;
    int seats;
    double price;
    set<int> emptyseats;
    //comp com1;
    set<customer> patrons;

};

#endif 
```

客户.cpp

```
#ifndef _CUSTOMER_CPP
#define _CUSTOMER_CPP

#include <iostream>
#include <string>
//#include<set>

#include "customer.h"

//using namespace std;
//initializes a default customer to be changed
customer::customer()
{

    string name ="theater";
    bool under12 = false;
    int partysize=0;
    };

//accessors

string customer::getname() const
{
return name;
}

bool customer::getunder12()
{
    return under12;
}

int customer::getpartysize()
{
    return partysize;
}

//mutators

void customer::setname(string s)
{
    name=s;
}

void customer::setunder12(bool b)
{
    under12 = b;
}

void customer::setpartysize(int i)
{
    partysize = i;
}

//Operators
/*
bool operator <(customer const& a, customer const& b) const
{
    return a.getname() < b.getname();
}
bool operator ==(customer const& a, customer const& b) const
{
    return a.getname() == b.getname();
}

*/

//bool operator==(const Point& rhs) const
//{
//    return ((int)x_coordinate == (int)rhs.get_x()) && ((int)y_coordinate == (int)rhs.get_y());
//}

//bool operator<(const Point& rhs) const
//{
//    return (int)x_coordinate < (int)rhs.get_x();
//}

#endif

#ifndef _CUSTOMERT_H
#define _CUSTOMER_H
//#include <string>

using namespace std;

class customer
{
public:

    // constructors
    customer();  // default constructor

    // destructor
    //~myObject();

    //accessors
    string getname() const;
    bool getunder12();
    int getpartysize();
    //void getseatlocation

    //mutators
    void setname(string);
    void setunder12(bool);
    void setpartysize(int);
    //void addseatlocation(int);

//operators

    //bool operator <(customer) const;
    bool operator ==(customer) const;

private:

    string name;
    bool under12;
    int partysize;
    //vector<int> seatlocation;

};

#endif 
```

我收到的错误：

```
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp||In constructor 'theater::theater()':|
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp|35|warning: unused variable 'rows'|
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp|36|warning: unused variable 'seats'|
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp|37|warning: unused variable 'price'|
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp||In member function 'std::set<customer, std::less<customer>, std::allocator<customer> > theater::getpatrons()':|
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp|142|error: no matching function for call to 'std::set<customer, std::less<customer>, std::allocator<customer> >::find(const char [5])'|
c:\program files (x86)\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\include\c++\bits\stl_set.h|547|note: candidates are: typename std::_Rb_tree<_Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator std::set<_Key, _Compare, _Alloc>::find(const _Key&) [with _Key = customer, _Compare = std::less<customer>, _Alloc = std::allocator<customer>]|
c:\program files (x86)\codeblocks\mingw\bin\..\lib\gcc\mingw32\4.4.1\include\c++\bits\stl_set.h|551|note:                 typename std::_Rb_tree<_Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator std::set<_Key, _Compare, _Alloc>::find(const _Key&) const [with _Key = customer, _Compare = std::less<customer>, _Alloc = std::allocator<customer>]|
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp|132|warning: unused variable 'i'|
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp|143|warning: no return statement in function returning non-void|
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp|155|error: non-member function 'bool operator()(const customer&, const customer&)' cannot have cv-qualifier|
C:\Users\Matt\Dropbox\school\data_structures\data_structures_final_project\msdtest\theater.cpp|155|error: 'bool operator()(const customer&, const customer&)' must be a nonstatic member function|
||=== Build finished: 3 errors, 5 warnings ===| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:46:17.237

要搜索集合，您必须传入 Customer 的实例而不是字符串。如果你只想传入一个字符串，你需要使用 std::map

要使用您所拥有的，请执行此操作

```
customer help_customer;
help_customer.set_name("help");
it = patrons.find(help_customer); 
```

# java - Java：通过关联覆盖行为

> ID：13655366
> 
> 赞同：1
> 
> 时间：2012-12-01T01:08:18.030
> 
> 标签：java, dry, code-structure

我有几个`Field`实体，并`Controller`以这种方式与它们关联：`(Field,Generic_Controller <--> Specific_Controller)`. 我想在Java中实现每个`Specific_Controller`与相应`Field`的关联。`Generic_Controller`我怎样才能做到这一点？在编译时更好。

编辑：这是一个任务的伪代码（也许会更清楚）：

```
given X:Class and C:ServiceFor[X]
  where C:ServiceFor[X] means:
    C has method M with args(x:X) returning Any

goal:
get C:ServiceFor[X]
  where C and X are given. // X is Field class or instance
that:
  if there exits explicitly defined (C1 as ServiceFor[X]) and (C1 is child of C)
    return C1 // ==Specific_Controller
  otherwise:
    return C  // ==Generic_Controller 
```

~~目前，我有实现但它不是 DRY：我应该保持控制器类与`getController`body 同步。~~ [这是一种可能的方法，可能会导致问题消失（如果好奇，请参阅问题的第一个版本）。]

```
import javax.swing.*;

interface Field 
{
  Object getValue();
  /** Obtain name of field for internal usage
   */
  String getName(); 
  void setValue<T>(T value) throws InvalidValueException;
  boolean isValid<T>(T value);
  Controller getController(Class<?> genericController);
}

interface Controller {}

interface UIController extends Controller {
  /** Return GUI widget responsible to manipulating value inside FormField 
   *  instance
   * (Control logic uses setValue() ) */
  JComponent getInputControl();
}

interface UrlEncoder extends Controller {
  /** Obtain value encoded for transmition through Web.
   *
   * some fields used privately in code are cut out inside this method
   */
  String getURLEncodedValue(); 
}

class CommonUIController implements UIController { ... }

//-- MyField with specific implementations of controllers
class MyField 
    implements Field, UIController, UrlEncoder 
{
  // here methods overriden
}

//-- usage (i do it every time)
MyField mf;
UIController uiController;
if(mf instanceof UIController)
  uiController = (UIController)mf;
} else { // use default impl.
  uiController = new CommonUIController(mf);
} 
```

我希望保持`Field`,`Controller`并声明它们之间的关系彼此分开。就像 C++ 可以做的那样：

```
//-- common.hpp
template<class _Controller, class _Field>
struct overriden_controller:
    public _Controller
{
  typedef _Controller controller_type;
  typedef _Controller type;
  typedef _Field      field_type;
};

struct UrlEncoder{};
struct UIController {};

//-- MyField.hpp
// Field knows nothing about controllers
struct MyField {};

// !! Here comes association
template<>
struct overriden_controller<UIController, MyField>
{
   // Overriden behavior 
};

template<>
struct overriden_controller<UrlEncoder, MyField>
{
   // Overriden behavior 
};

//-- And then use associated value
auto controller = new field_controller<UIController, MyField>::type(); 
```

你可以在这里提出什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:37:00.313

在我看来，通过将接口作为参数传递来获取类的实例有点做作，除非你用一些比特代码编织来填充方法，但是......

使用一些约定而不是配置，您可以实现如下内容：

```
public class AbstractField {

    public Controller getController(Class clazz){
        String name = clazz.getSimpleName();

        String pack = clazz.getPackage().getName();
        String controllerName = pack+"."+getClass().getSimpleName()+name;

        Class<?> ctrl = null;
        try {
            ctrl = Class.forName(controllerName);
            return (Controller) ctrl.newInstance();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        return null;
    }

} 
```

# java - 树的分区压缩以及如何将节点压缩到根

> ID：13655368
> 
> 赞同：4
> 
> 时间：2012-12-01T01:08:33.570
> 
> 标签：java, algorithm, data-structures, graph, map

![在此处输入图像描述](../Images/3fcd052436730a773fbb64feb9237754.png)

我试图通过让它们指向传递给的参数节点的根来压缩给定节点的所有祖先

```
 private E compressToRoot (E e) throws IllegalArgumentException; 
```

例如，在上图中，如果我执行 compressToRoot(D)，则 D 将直接指向 A，C 将直接指向 A。如果参数和根之间还有其他节点，那么它们都将指向 A。

所有标签和箭头都存储在两个单独的地图中：

```
private Map<E,E>       parentMap   = new HashMap<E,E>(); //labels + arrows 
```

我可以通过 (1) 将 D 和根之间的所有节点保存在一个集合中来完成此方法。(2) 让设置的所有元素指向（使父）根 (3) 返回根。

但是，我被困在如何遍历这张地图以到达根部。所以，对于这种方法，我会按照以下方式做一些事情

```
private E compressToRoot (E e) throws IllegalArgumentException {
    Set<E> collectLables = new HashSet<E>();
E root = null;

//get root.
for (E cycle : parentMap.keys()) {
    while (parentMap.get(e) != e) 
        e = parentMap.get(e);
        if (parentMap.get(e) == e)
            root = cycle;
 }

//collect all labels from parameter to root.
for (E element : parentMap.keys()) {
    while (parentMap.get(e) != root) {
        collectLables.add(element);
    }   
}

} 
```

但是我不确定如何循环通过给定节点的父节点一直到根节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T20:53:38.790

根据地图的效率，对[上述 rambo 编码器的答案](https://stackoverflow.com/a/13656629/337475)有轻微的潜在改进。`ArrayList`只需遍历路径两次，您就可以在不使用额外内存和开销的情况下做到这一点：

```
private E compressToRoot(E cursor) {
    E cursor2 = cursor;
    E node = parentMap.get(cursor);
    while (node != cursor)  {
        cursor = node;
        node = parentMap.get(node);
    }
    // Now cursor (and node) are the root.    

    node = parentMap.get(cursor2);
    while (node != cursor2) {
        parentMap.set(cursor2, cursor);
        cursor2 = node;
        node = parentMap.get(node);
    }

    return cursor;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T01:17:29.187

> 我被困在如何遍历这张地图以到达根部。

看来您对“根”的定义是唯一指向自身的节点。它不是特别有效，但您可以只寻找这样的元素：

```
E findRoot(Map<E, E> parentMap) {
    for (Map.Entry<E, E> entry: parentMap.entrySet() {
        if (entry.key().equals(entry.value()) {
            return entry;
        }
    }

    // parentMap is empty, or the graph is corrupted
    // handle this edge case however you want
    return null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T05:18:23.540

递归很漂亮，但如果到根的最长路径的长度可能会变大，则支持迭代方法。你不想用完堆栈。

```
private E compressToRoot(E node) {
    if (parentMap.get(node) != node)
        parentMap.set(node, compressToRoot(node));
    return parentMap.get(node);
}

private E compressToRoot(E cursor) {
    E node;
    ArrayList<E> nodes = new ArrayList<E>();
    while ((node = parentMap.get(cursor)) != cursor)  {
        nodes.add(cursor);
        cursor = node;
    }

    for (node : nodes)
        parentMap.set(node, cursor);

    return cursor;
} 
```

# lisp - lisp 简化多项式

> ID：13655370
> 
> 赞同：1
> 
> 时间：2012-12-01T01:08:44.503
> 
> 标签：lisp, polynomial-math

我正在编写一个简化多项式的程序，现在只有加法和乘法。

我已经把头撞在键盘上几个小时了，我想是时候寻求帮助了。

```
(defun simplify (lis)
    (if (eq (car lis) '+)
        (cons '+ (simplify-addition (cdr lis)))
        (if (eq (car lis) '*)
            (cons '* (simplify-multiplication (cdr lis))) 
        )
    )
)
(defun simplify-addition (lis)
    (if (not (null lis))
        (if (listp (car lis))
            (list (simplify (car lis)) (simplify-addition (cdr lis)))
            (if (numberp (car lis))
                (if (eq (car lis) 0)
                    (simplify-addition (cdr lis))
                    (if (null (cdr lis))
                        lis
                        (cons (car lis) (simplify-addition (cdr lis)))
                    )
                )
                (if (eq (car lis) '+)
                    (list (car lis) (simplify-addition (cdr lis)))
                    (if (eq (car lis) '*)
                        (list (car lis) (simplify-addition (cdr lis)))
                        lis
                    )
                )
            )
        )
    )
)

(defun simplify-multiplication (lis)
    (if (not (null lis))
        (if (listp (car lis))
            (if (find 0 (car lis))
                0
                (list (simplify (car lis)) (simplify-multiplication (cdr lis)))
            )
            (if (numberp (car lis))
                (if (null (cdr lis))
                    lis
                    (cons (car lis) (simplify-multiplication (cdr lis)))
                )
                (if (eq (car lis) '+)
                    (list (car lis) (simplify-multiplication (cdr lis)))
                    (if (eq (car lis) '*)
                        (list (car lis) (simplify-multiplication (cdr lis)))
                        lis
                    )
                )
            )
        )
    )
) 
```

这是应该发生的：

```
(simplify ‘(+  x  ( + 0 3 )  ( * 1 5 )  ( * ( * x  y  z ) 0 )  ))  -->  ( + x 3 5 )
(simplify ‘(* (+ 6  0)  (* 1 6 2)))  -------------------------------->  (* 6 (* 6 2)) 
```

但相反，我要么得到与我发送的相同的多项式，要么得到完全关闭的东西

编辑：我需要的简化是从添加中删除 0 ，以便：

```
(+ 3 0)   --> 3
(+ 4 0 6) --> (+ 4 6) 
```

并且与零的乘法被删除

```
(* 6 0 7) --> 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:08:39.700

首先，您可能想稍微改进一下您的编码风格以使其具有可读性。

*   不要将括号放在自己的行上。这只是浪费空间，根本没有帮助。

*   不要在特定领域的代码中使用 CAR 和 CDR。领域是数学。你使用表达式`(operator arg1 arg2)`。而是使用`CAR`和`CDR`定义函数`OPERATOR`并`ARGUMENTS`使用它们。

*   使用`CASE`,`COND`和其他多路条件表达式，而不是嵌套`IF`- 有用的地方。

*   尝试从域代码中提取数据结构的遍历。使用高阶函数而不是递归 ( `MAP`, `REDUCE`, ...)。

例子：

一些基本的领域功能：

```
(defun operator (expression)
  (first expression))

(defun arguments (expression)
  (rest expression))

(defun make-expression (operator arguments)
  (if (= (length arguments) 1)
      (first arguments)
    (cons operator arguments)))

(defun is-zero? (expression)
  (and (numberp expression)
       (= expression 0))) 
```

现在简化：

```
(defun simplify (expression)
  (if (atom expression)
      expression
    (case (operator expression)
      (+ (make-expression '+ (simplify-addition       (arguments expression))))
      (* (make-expression '* (simplify-multiplication (arguments expression)))))))

(defun simplify-addition (expressions)
  (remove-if #'is-zero?
             (mapcar #'simplify
                     (remove-if #'is-zero? expressions))))

(defun simplify-multiplication (expressions)
  (if (member-if #'is-zero? expressions)
      (list 0)
    (let ((expressions1 (mapcar #'simplify expressions)))
      (if (member-if #'is-zero? expressions1)
          (list 0)
        expressions1)))) 
```

看，代码的可读性提高了多少？没有了`CAR`，，，`LIS`。`CDR`递归调用的意图也更容易理解。

它仍然不是最佳的，但它应该让你继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T01:38:27.337

I've only looked at `simplify-multiplication` but there are a number of issues here.

On a general note, you want to recursively simplify first, then check for specific constants afterwards. (A post-order traversal, I guess.)

Second, I don't see you checking for `1` anywhere so I don't see how `(* 1 5) ==> 5` is supposed to work.

Third, let's step through `(simplify '(* (+ 2 0) 3))` for a bit:

```
(defun simplify-multiplication (lis)
; lis = '((+ 2 0) 3)
    (if (not (null lis))
    ; ==> t
        (if (listp (car lis))
        ; (car lis) = '(+ 2 0), so (listp '(+ 2 0)) ==> t
            (if (find 0 (car lis))
            ; succeeds because '(+ 2 0) contains 0
            ; this is completely wrong! you're not supposed to check sublists of lis
                0
                ; ... yeah, you just returned 0 just because there was a 0 *somewhere*
                (list (simplify (car lis)) (simplify-multiplication (cdr lis)))
            )
            ... 
```

Or `(simplify '(* 0 2))`:

```
(defun simplify-multiplication (lis)
; lis = '(0 2)
    (if (not (null lis))
    ; ==> t
        (if (listp (car lis))
        ; (car lis) = 0, so (listp 0) ==> nil
            (if (find 0 (car lis))
                0
                (list (simplify (car lis)) (simplify-multiplication (cdr lis)))
            )
            (if (numberp (car lis))
            ; (numberp 0) ==> t
                (if (null (cdr lis))
                ; (cdr lis) = '(2), so (null '(2)) ==> nil
                    lis
                    (cons (car lis) (simplify-multiplication (cdr lis)))
                    ; ... wait, what?
                    ; you're just recursively walking through the list without
                    ; checking what numbers you actually got. this won't simplify
                    ; anything.
                )
                (if (eq (car lis) '+)
                ; what is this branch for? it can only succeed if you have code of the form
                ;   (* 1 + 2)
                ; which is a syntax error
                    (list (car lis) (simplify-multiplication (cdr lis)))
                    (if (eq (car lis) '*)
                    ; this branch is for code like (* * *). huh???
                        (list (car lis) (simplify-multiplication (cdr lis)))
                        lis
                    )
                )
            )
        )
    )
) 
```

# asp.net-mvc - FilterAttributes 在 ASP.NET MVC 中是否被缓存？

> ID：13655375
> 
> 赞同：2
> 
> 时间：2012-12-01T01:09:23.910
> 
> 标签：asp.net-mvc, ssl

我对 HTTPS 和 HTTP 有疑问。似乎我的过滤器属性正在被缓存。当我登录时，它应该不会自动向 https 发送任何 http 页面，它确实如此。然后，当我注销时，它会停留在 https 上，这很好，但是如果我尝试手动转到非 http 页面，即使我已登录，它也会再次重定向到 https 页面。RequireSecure 始终为真，因为我的日志信息说明了它是。FilterAttributes 是否被缓存，如果是，我该如何解决？

```
public class RequireHttpsAttribute : System.Web.Mvc.RequireHttpsAttribute
    {
        protected static readonly NLogLogger Logger = new NLogLogger();

        public bool Ignore = false;
        public bool RequireSecure = false;

        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            if (filterContext.RequestContext.HttpContext.User.Identity.IsAuthenticated)
            {
                Logger.Info("Require HTTPS User Authenticated");

                RequireSecure = true;
            }

            if (filterContext.RequestContext.HttpContext.Request.IsLocal)
                RequireSecure = false;

            if (RequireSecure)
            {
                Logger.Info("Require HTTPS");

                base.OnAuthorization(filterContext);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:38:52.520

你所经历的是正确的行为。详细信息可以在这里找到：

*   [动作过滤器中的 UnitOfWork 似乎正在缓存](https://stackoverflow.com/questions/5335350/#5335953)。
*   [http://www.asp.net/learn/whitepapers/mvc3-release-notes#RTM-BC](http://www.asp.net/learn/whitepapers/mvc3-release-notes#RTM-BC)

一个简短的摘录：

> *...在 ASP.NET MVC 3 中，过滤器被更积极地缓存。因此，任何不正确地存储实例状态的自定义操作过滤器都可能被破坏。*

我建议存储对以下重要的数据`filter attribute`：请求范围

> filterContext.HttpContext.Items

并作为会话范围（如您的情况）：

> filterContext.HttpContext.Session
> 
> filterContext.HttpContext.Profile

# linq - 起订量和回调设置类的值

> ID：13655376
> 
> 赞同：3
> 
> 时间：2012-12-01T01:09:29.777
> 
> 标签：linq, moq, expression-trees

我有一个模拟的 DTO 类，其中包含我通过回调函数设置的属性。这对我有用，但是有没有更清洁的方法呢？

```
 Mock<MyDto> _MyDto = new Mock<MyDto>();

            _MyDto.Setup(dto => dto).Callback<MyDto>(dto => 
            {   
                dto.FirstName = "John";
                dto.LastName = "Doe";
            }); 
```

如果可能的话，我想*在*调用中设置这些属性`Setup`，但它接受一个表达式，我不能在那里做一个多行语句。但是我的 Linq 知识并不是百科全书式的，我想知道是否有更好的方法来处理我正在做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:04:02.680

根据[属性的 Moq 快速入门指南](http://code.google.com/p/moq/wiki/QuickStart#Properties)，您可以将代码更改为如下所示：

```
_MyDto.SetupProperty(dto => dto.FirstName, "John");
_MyDto.SetupProperty(dto => dto.LastName, "Doe"); 
```

我自己还没有机会使用 Moq，但这似乎是在 Moq 中模拟属性的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T12:38:19.247

我认为您误解了该`Setup()`方法的用途。您不应该使用所有初始化代码只调用一次。相反，您为要设置的每个单独项目调用一次。

# graphics - Java Graphics 同步问题绘制动态数据

> ID：13655389
> 
> 赞同：0
> 
> 时间：2012-12-01T01:11:15.463
> 
> 标签：graphics, dynamic-data, synchronisation

我有一个程序，我想在其中绘制不断更新的数据（顺便说一下，它是 microhpone-line-data）。数据是一个 8000 长度的双精度数组，我并不真正关心在绘制方法之间被覆盖的“丢失”数据。

在我幼稚的实现中，很明显存在同步问题，即在绘画例程正在进行时更新音频数据。

我也知道我在 Java 和它的并发包上有点过时了，但我的第一反应是在共享数据代码周围放置同步块。不出所料，这有时会阻塞图形线程，所以我认为可能有更好的方法来做到这一点。

本质上，我只是没有太多同步方面的经验，并且在某处搞砸了一些事情。我想知道对这些问题有更好理解的人是否能够提出一个更优雅的解决方案，不会阻塞图形线程？

我天真的代码：

```
Object lock = new Object();
double[] audio = new double[8000]

// array size is always exactly 8000
public update( double[] audio ) {
    synchronized( lock ) {
       this.audio=audio; // and some brief processing
    }
    repaint();
}

public void paint( Graphics g ) {
    synchronized( lock ) {
        // draw the contents of this.audio
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:38:53.150

自我回答，除非一些更聪明的人可以提供更好的东西，我只是在例程开始时保存对音频数组的引用并从中提取，然后对音频缓冲区的任何更新在一个单独的数组中进行计算，然后只需一步即可将 this.audio 分配给新数组。

它似乎可以工作，尽管绘制程序确实偶尔会出现闪烁，但它并不像以前那样，由于同步阻塞，它在大约 10% 的时间里非常明显地闪烁。音频数据也不会在绘图例程的中途更新。所以...问题解决了。大概。

```
double[] audio = new double[8000]

// array size is always exactly 8000
public update( double[] audio ) {
   // do any brief processing
   this.audio=audio; // the reference is re-assigned in one step

repaint();
}

public void paint( Graphics g ) {
    audioNow = this.audio; // save the reference
    // draw the contents of audioNow (not this.audio)
} 
```

# javascript - 在本地存储来自 HTML 输入文件表单的图像

> ID：13655391
> 
> 赞同：5
> 
> 时间：2012-12-01T01:11:31.777
> 
> 标签：javascript, html, image, local

我想知道是否可以从

```
<input type="file" id="image"> 
```

本地。我是否必须存储图像，或者我可以简单地存储图像位置？

对于上下文，它来自一个表单，该表单从输入表单中获取名称、地址等，创建一个对象，将其存储在一个数组中并显示该数组。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T02:10:12.620

与此处的其他答案相反，如果您使用的是现代浏览器，则可以[`<input>`](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)使用`elm.files`,[`FileReader`](https://developer.mozilla.org/en-US/docs/DOM/FileReader)和[`window.localStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage). 您甚至可以告诉[浏览器再次保存它（默认下载行为）](https://stackoverflow.com/a/12718755/1615483)。

需要注意的是，这样做**并不**意味着可以`.value`在`<input>`节点上设置。

这是您可以执行的操作的示例，假设**已选择**一个文件。

```
// From <input> node
var elm = document.getElementById('image'),
    img = elm.files[0],
    fileName = img.name, // not path
    fileSize = img.size; // bytes

// By Parsing File
var reader = new FileReader(),
    binary, base64;
reader.addEventListener('loadend', function () {
    binary = reader.result; // binary data (stored as string), unsafe for most actions
    base64 = btoa(binary); // base64 data, safer but takes up more memory
}, false);
reader.readAsBinaryString(img); 
```

从这里您可以保存`localStorage`，创建[dataURIs](https://developer.mozilla.org/en-US/docs/data_URIs)等。例如，假设`fileName`我们知道图像是*.jpg*`<img>` ，然后您可以通过将*src*设置为 .jpg来显示它`"data:image/jpeg;base64," + base64`。

请注意，对此数据的任何修改都不会对所选的原始文件产生任何影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T01:25:25.893

没门。但是，如果可以，那将引发严重的安全问题。

如果您尝试获取文件输入的值，例如：

```
document.getElementById('image').value 
```

该值将是“C:\fakepath\somefile.txt”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T01:23:26.120

不会。因为在本地操作系统上存储文件或访问文件会违反浏览器的权限。因此，除非已将内容上传到服务器，否则您的脚本无法访问内容。不同的浏览器也处理以不同方式选择的文件的路径。所以你会遇到很多问题。

也就是说，有一些方法可以解决这个问题，我不会讨论。简单地说，应该以某种方式将图像上传到服务器，然后您的脚本可以从上传到的路径中引用路径或图像本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T02:09:43.243

如果您想获取文件名，甚至显示图像，您可以使用[File API](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)（在[支持它的浏览器上](http://caniuse.com/#search=File%20api)）来实现。出于安全原因，该路径不可用。

# python - Python-将字符插入字符串

> ID：13655392
> 
> 赞同：11
> 
> 时间：2012-12-01T01:11:44.570
> 
> 标签：python, string

我想这应该是比较简单的，但我想不通。我有一个代表坐标的字符串，`+27.5916+086.5640`我需要在经度和纬度之间加一个逗号，所以我得到`+27.5916,+086.5640`.

我正在浏览 API，但我似乎找不到任何东西。

哦，我必须使用 Python 2.7.3，因为我编写的程序不支持 Python 3.X。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T01:14:36.657

如果您的坐标是`c`，那么这将起作用。但是请注意，这不适用于负值。你也必须处理负面因素吗？

```
",+".join(c.rsplit("+", 1)) 
```

也用于处理负面因素。

```
import re
parts = re.split("([\+\-])", c)
parts.insert(3, ',')
print "".join(parts[1:]) 
```

**输出**

```
+27.5916,+086.5640' 
```

对于底片：

```
>>> c = "+27.5916-086.5640"
>>> parts = re.split("([\+\-])", c)
>>> parts.insert(3, ',')
>>> "".join(parts[1:])
'+27.5916,-086.5640' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T01:23:25.433

如果逗号已经存在，此方法将处理逗号。

```
str = '-27.5916-086.5640'
import re
",".join(re.findall('([\+-]\d+\.\d+)',str))
'-27.5916,-086.5640' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-02T07:59:51.787

由于第二个组件似乎是用前导零和固定的小数位数格式化的，这样怎么样：

```
>>> s='+27.5916+086.5640'
>>> s[0:-9]+','+s[-9:]
'+27.5916,+086.5640' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T01:21:16.743

听起来像是正则表达式的工作：

```
Python 2.7.3 (default, Aug 27 2012, 21:19:01) 
[GCC 4.2.1 Compatible Apple Clang 4.0 ((tags/Apple/clang-421.0.57))] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import re
>>> coords = '+27.5916+086.5640'
>>> lat, long = re.findall('[+-]\d+\.\d+', coords)
>>> ','.join((lat, long))
'+27.5916,+086.5640' 
```

## 进一步阅读：

*   [**`re.findall()`**](http://docs.python.org/2/library/re.html#re.findall)
*   [**`str.join()`**](http://docs.python.org/2/library/stdtypes.html#str.join)
*   关于正[则**表达式**](https://stackoverflow.com/tags/regex/info)

# ruby-on-rails - 默认的 index.html.erb 文件在哪里？

> ID：13655395
> 
> 赞同：1
> 
> 时间：2012-12-01T01:13:01.607
> 
> 标签：ruby-on-rails, installation, config

我正在按照此处的设置说明进行操作[http://railsinstaller.org/mac](http://railsinstaller.org/mac)，当我进入第 8 步时，我被要求编辑欢迎 index.html，该 index.html 可以在 app/views/welcome/index.html 下找到.erb 我去 app/views 并没有欢迎文件夹。

我唯一能想到的是在第 6 步中，我被要求访问命令行提示符并为索引操作创建一个欢迎控制器，但是当我输入

```
$ rails g controller welcome index 
```

进入一个新的终端窗口，我得到了一大堆可以使用的命令，但找不到在哪里创建欢迎文件夹和 index.html.erb。

也许我应该只创建一个文件夹并创建一个 index.html.erb 文件放入其中，但我在哪里可以找到这样的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T02:00:58.220

你可以简单地把它添加到`app/view`文件夹下，没关系...

好吧，别忘了rm`public`文件夹下的索引页

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:27:31.540

我打开一个新的终端窗口并使用 cd 进入我桌面上 railsinstaller_osx_demo 文件夹的根目录，然后输入`rails g controller welcome index`

这创建了欢迎文件夹和 index.html.erb 文件。

感谢[Douglas](https://stackoverflow.com/users/119271/douglas)建议“当您打开终端窗口时，您是否 cd 进入了正确的目录？”。

还要感谢其他所有人，所有答案都非常有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T22:42:08.183

主页位于：

> app/views/static_pages/home.html.erb

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-01T06:05:26.227

默认情况下，rails 将创建标准的 html 文件，即位于 public 文件夹中的**index.html文件。**它会为 root_url 考虑它。请检查 'config/routes.rb'。 **根 :to => 'welcome#index'**

如果你想改变默认的root_url，你需要删除public文件夹中的**index.html**文件，并根据你的意愿改变root_url。

# sql - 分层查询需要拉取子、父、兄弟

> ID：13655400
> 
> 赞同：5
> 
> 时间：2012-12-01T01:15:26.717
> 
> 标签：sql, oracle, hierarchy, connect-by

现在可以拉数据，但想知道是否有更好的方法来优化大型数据集的查询。

[http://sqlfiddle.com/#!4/0ef0c/5](http://sqlfiddle.com/#!4/0ef0c/5)

所以基本上我希望能够为查询提供给定的 org id 并让它递归地拉出它的父母、孩子、兄弟姐妹和叔叔阿姨。然后拉取与该组织层次结构关联的任何活动。

Org1 是顶级组织，但它可能有也可能没有 null 父级。

基本上我正在做一个上下查询来拉孩子和父母，但似乎只能通过添加另一个查询来获得兄弟姐妹。终于在朋友的帮助下进行了另一个查询，但它在大型数据集（4-5k 的活动）上非常低。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T00:32:59.810

这样做的关键在于“递归”这个词。为此，请创建一个调用自身的过程。这是父母的一个例子，但因为它使用光标滚动条目，所以应该很简单地知道如何使用它来查找涉及递归的子关系和其他关系。

```
CREATE OR REPLACE PROCEDURE find_parents( 
  org_id NUMBER, 
  lvl NUMBER DEFAULT 1) AS 

  c_parent table1.id%TYPE;
  c_name table1.name%TYPE;
  CURSOR c_parents (c_id table1.id%TYPE) IS
    SELECT parent, name FROM table1 WHERE (id = c_id);

  BEGIN
    dbms_output.put('-');
    OPEN c_parents(org_id);
    LOOP
      FETCH c_parents INTO c_parent, c_name;
      EXIT WHEN c_parents%notfound;
      dbms_output.put_line('Level ' || lvl || ' parent: [ID: ' || c_parent || ', NAME: ' || c_name || ']');
      find_parents(c_parent, lvl + 1);
    END LOOP;
    CLOSE c_parents;
  END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:03:01.237

如果你的组织。结构是严格分层的，那么您可以使用这种方法： [http ://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html](http://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html)

缺点是您必须在每次更新组织结构时更新索引。然而，组织结构的阅读频率通常要高得多，然后再进行修改。所以恕我直言，这应该可以解决问题。

# c# - 动态方法预链接

> ID：13655402
> 
> 赞同：5
> 
> 时间：2012-12-01T01:16:08.923
> 
> 标签：c#, performance, abstract-syntax-tree, il

我是用 C# 制作的 psp 模拟器的作者。

我正在使用 ILGenerator 生成很多“DynamicMethod”。我正在将汇编代码转换为 AST，然后生成 IL 代码并构建该 DynamicMethod。我正在另一个线程中执行此操作，因此我可以在程序执行其他方法时生成新方法，以便它可以顺利运行。

我的问题是本机代码生成是惰性的，所以机器码是在调用函数时生成的，而不是在生成IL时生成的。所以它在程序执行线程中生成，本机代码生成非常慢，因为它是 asm->ast->il 步骤。

我已经尝试了 Marshal.Prelink 方法，它应该在执行函数之前生成机器代码。它适用于 Mono，但不适用于 MS .NET。

```
Marshal.Prelink(MethodInfo); 
```

有没有办法在 MS .NET 上预链接 DynamicMethod？

我想为函数添加一个布尔参数，如果设置了该参数，则会立即退出函数，因此实际上不会执行任何代码。我可以通过这种方式“预链接”，但我认为这是我想避免的讨厌的解决方案。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:52:53.270

阅读有关其为何无法正常工作的信息，MSDN 文档说明如下：

> 在平台调用之外的方法上调用 Prelink 无效。

我很确信，如果你使用`restrictedskipverification`or `skipverification`，它会跳过这个方法。

尽管如果我错了，您的短路想法也不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:59:05.980

[我发现有人说为动态方法创建委托会强制 JIT：](http://social.msdn.microsoft.com/Forums/en/clr/thread/b5a8b374-33da-4f90-b977-eba27eba6309)

> 创建一个以方法为目标的委托。这有什么意义？

[这听起来也很有希望：](http://www.codeproject.com/Articles/31316/Pre-compile-pre-JIT-your-assembly-on-the-fly-or-tr)

```
Thread jitter = new Thread(() =>
{
  foreach (var type in Assembly.Load("MyHavyAssembly, Version=1.8.2008.8," + 
           " Culture=neutral, PublicKeyToken=8744b20f8da049e3").GetTypes())
  {
    foreach (var method in type.GetMethods(BindingFlags.DeclaredOnly | 
                        BindingFlags.NonPublic | 
                        BindingFlags.Public | BindingFlags.Instance | 
                        BindingFlags.Static))
    {
      System.Runtime.CompilerServices.RuntimeHelpers.PrepareMethod(method.MethodHandle);
    }
  }
});
jitter.Priority = ThreadPriority.Lowest;
jitter.Start(); 
```

# c# - Ajax 控件工具包清单错误中缺少文件？`

> ID：13655403
> 
> 赞同：0
> 
> 时间：2012-12-01T01:16:50.353
> 
> 标签：c#, asp.net, ajax, calendar, compiler-errors

您好，这是我第一次使用 Ajax。我在我的 Visual Studio 2010 工具箱中添加了 ajax，并在我的文本框上拉了一个日历。当我运行我的网站时，我收到了这个错误。

```
MissingManisfestResourceException 
```

`Could not find any resources appropriate for the specified culture or the neutral culture. Make sure "AjaxControlToolkit.Properties.Resources.NET4.resources" was correctly embedded or linked into assembly "AjaxControlToolkit" at compile time, or that all the satellite assemblies required are loadable and fully signed.`

现在它说我失踪了`ExtenderControlBase`，我在哪里可以得到？

我的日历代码：

```
 <asp:TextBox ID="txtBday" runat="server" 
            style="z-index: 1; left: 327px; top: 436px" Height="22px"></asp:TextBox><asp:CalendarExtender
                ID="Birthday" runat="server"
            onclientdateselectionchanged="CheckDateEalier" TargetControlID="txtBday" 
            PopupButtonID="btnBirth" PopupPosition="TopRight" >
            </asp:CalendarExtender>
        <asp:ImageButton ID="btnBirth" runat="server" 
            ImageUrl="~/images/calendaricon.jpg" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:21:05.427

您似乎忘记在内容文件的顶部引用程序集，需要一个脚本管理器，这是一个工作示例，希望对您有所帮助。

```
 <%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>   
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
 <body>
<form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" />
    <asp:TextBox ID="TB" runat="server" />
<asp:CalendarExtender ID="C" runat="server" TargetControlID="TB">
</asp:CalendarExtender>

</form>
</body>
</html> 
```

# c# - ToString 的错误在 C# 中没有采用一个参数的方法

> ID：13655410
> 
> 赞同：5
> 
> 时间：2012-12-01T01:17:44.180
> 
> 标签：c#, asp.net-mvc

> **可能重复：**
> [如何使用 ToString() 格式化可为空的 DateTime？](https://stackoverflow.com/questions/1833054/how-can-i-format-a-nullable-datetime-with-tostring)
> [将日期时间字段格式化为“dd-MM-yyyy”格式的字符串时出现“方法'ToString'没有重载需要'1'参数”错误](https://stackoverflow.com/questions/5216486/no-overload-for-method-tostring-takes-1-arguments-error-occur-while-format)

我正在使用以下内容：

```
@Model.Modified.ToString("dd/MM/yyyy htt") 
```

但它给了我一条消息说

> ToString 的重载方法没有一个参数

有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-01T01:20:16.683

模型上的修改属性可能不是 DateTime 类型。在调用 ToString 之前尝试将其转换为 DateTime 。

**根据评论更新**

那么你所要做的就是

```
 @Model.Modified.Value.ToString("dd/MM/yyyy htt") 
```

因为该属性可以为空

# android - 更新联系人 display_name

> ID：13655414
> 
> 赞同：1
> 
> 时间：2012-12-01T01:18:06.803
> 
> 标签：android, contacts, updates

如何更新联系人的显示名称？下面代码中的操作在没有抛出任何东西的情况下完成，并且似乎可以正常工作 - 也就是说，当我重新查询 ContactsContract.Contact 表时，返回一行并更改了名称。但是，当我尝试在平板电脑上运行股票“人”应用程序时，它崩溃了。显然我做错了什么。

这是代码。早期，它从聚合联系人中获取一个 id，如下所示，其中*key*是 lookup_key：

```
 String[] projection = new String[] {
    Contacts._ID, // 0
    Contacts.DISPLAY_NAME, // 1
  };

  Uri uri = Uri.parse (Contacts.CONTENT_LOOKUP_URI + "/" + key);
  ContentResolver cr = getContentResolver();
  Cursor cursor = cr.query (uri, projection, null, null, null);
  if (!cursor.moveToNext()) // move to first (and only) row.
    throw new IllegalStateException ("contact no longer exists for key");
  origId = cursor.getLong(0);
  cursor.close(); 
```

然后，在用户完成编辑后，我调用这段代码来更新 display_name：

```
 ArrayList<ContentProviderOperation> opers = new ArrayList<ContentProviderOperation>();
  ContentProviderOperation.Builder builder = null;

  String[] args = { Long.toString (origId) };
  builder = ContentProviderOperation.newUpdate (Data.CONTENT_URI);
  builder.withSelection (RawContacts.CONTACT_ID + "=?", args);
  builder.withValue(CommonDataKinds.StructuredName.DISPLAY_NAME, name);
  opers.add(builder.build());

  ContentProviderResult[] results = null;
  try {
    results = getContentResolver().applyBatch(ContactsContract.AUTHORITY, opers);
  } catch ... 
```

我意识到我不需要 ContentProviderOperation 这个例子；那是为了以后我有更多东西要更新的时候。

老实说，我对自己实际使用的 ID 感到很困惑。这些名称对我来说不是很清楚，我可能为此操作使用了错误的 ID。

对于它的价值，在更新后查看*结果*我看到结果代码为 5。我找不到任何文档，所以不知道这是否重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T01:57:53.910

ID（以及一般的更改联系人）可能会非常令人困惑……我也有一些戏剧性的事情让我印象深刻。

这是我用于更新的一些工作代码。我可以看到的主要区别是您如何声明原始 ID；它需要作为内容值包含在内。

```
Cursor cursor = _context.getContentResolver().query(contactUri,
            new String[] { Contacts._ID }, null, null, null);
    try {
        if (cursor.moveToFirst()) {
            String rawContactId = cursor.getString(0);
            ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
            ContentValues contentValues = new ContentValues();
            contentValues.put(Data.RAW_CONTACT_ID, rawContactId);

            contentValues
                    .put(ContactsContract.Data.MIMETYPE,
                            ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
            contentValues.put(
                    ContactsContract.CommonDataKinds.Phone.NUMBER,
                    phoneNumber);
            contentValues.put(ContactsContract.CommonDataKinds.Phone.TYPE,
                    ContactsContract.CommonDataKinds.Phone.TYPE_WORK);

            ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
                    .withValues(contentValues).build());
            String contactId = contactUri.getLastPathSegment();
            ops.add(ContentProviderOperation
                        .newUpdate(ContactsContract.Data.CONTENT_URI)
                        .withSelection(
                                ContactsContract.Data.CONTACT_ID
                                        + "=? AND "
                                        + ContactsContract.Data.MIMETYPE
                                        + "=?",
                                new String[] {
                                        contactId,
                                        ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE })
                        .withValue(
                                ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME,
                                newName).build());

            result = _context.getContentResolver().applyBatch(
                    ContactsContract.AUTHORITY, ops);
        }
    } finally {
        cursor.close();
    } 
```

希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T18:29:38.603

上面的答案通常是正确的。但是，当我插入

`ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME` 然后尝试做 newUpdate

`ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME`

使用上面的代码 - 它使联系人显示在联系人应用程序中，名称混合了新旧数据。我发现插入和更新`ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME`例如按我的预期工作。在我的 Android 4x 上的联系人应用程序中编辑联系人时，我看不到家人并单独给出，请看我 DISPLAY_NAME 是由 Android 组成的。

# java - 创建一个 android ffmpeg 可执行文件

> ID：13655415
> 
> 赞同：3
> 
> 时间：2012-12-01T01:18:46.450
> 
> 标签：java, android, ffmpeg

我该怎么做呢？我不想使用 ndk / jni 包装器以编程方式在应用程序中使用 ffmpeg，我只想编译一个二进制/可执行文件，我可以将其放入设备上的 system/bin 并从终端运行。

嗨，尝试过 William Seemann 的建议，但它不会构建可执行文件，当我尝试默认的 configure_everything.sh 时，正如它在文档中所说的那样，我得到很多“文件修补错误”控制台输出[http://pastebin.com/m0uz5fx2](http://pastebin.com/m0uz5fx2)

如果我尝试 make_ffmpeg.sh 脚本作为 william sggests 那么我得到

```
brx@router ~/Documents/android-ffmpeg-master $ NDK_BASE=/home/brx/Documents/android-ndk-r6b ./make_ffmpeg.sh 
~/Documents/android-ffmpeg-master ~/Documents/android-ffmpeg-master
~/Documents/android-ffmpeg-master/ffmpeg ~/Documents/android-ffmpeg-master ~/Documents/android-ffmpeg-master
make: *** No targets specified and no makefile found. Stop.
make: *** No rule to make target `install'. Stop.
~/Documents/android-ffmpeg-master ~/Documents/android-ffmpeg-master
~/Documents/android-ffmpeg-master 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T01:24:59.647

我相信[这个](https://github.com/guardianproject/android-ffmpeg)项目中的脚本（make_ffmpeg.sh）会满足你的需求。

# r - xts 中的后缀在 R 中合并

> ID：13655427
> 
> 赞同：6
> 
> 时间：2012-12-01T01:20:28.850
> 
> 标签：r, time-series, xts, zoo

尝试对象时`merge`， arg`xts`似乎无法`suffixes`正常工作：

```
require(xts)
x <- xts(1:10, seq.Date(from=as.Date("2012-01-01"), len=10, by=1))
y <- xts(11:20, seq.Date(from=as.Date("2012-01-01"), len=10, by=1))

names(x) <- "x"
names(y) <- "x"

merge(x,y,suffixes=c("truex", "truey"))

            x x.1
2012-01-01  1  11
2012-01-02  2  12
2012-01-03  3  13
2012-01-04  4  14
2012-01-05  5  15
2012-01-06  6  16
2012-01-07  7  17
2012-01-08  8  18
2012-01-09  9  19
2012-01-10 10  20 
```

我在滥用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T01:47:17.563

虽然`merge.xts`似乎坏了，`merge.zoo`但确实有效：

```
> merge.zoo(x,y,suffixes=c("truex", "truey"))
           x.truex x.truey
2012-01-01       1      11
2012-01-02       2      12
2012-01-03       3      13
2012-01-04       4      14
2012-01-05       5      15
2012-01-06       6      16
2012-01-07       7      17
2012-01-08       8      18
2012-01-09       9      19
2012-01-10      10      20 
```

# php - 根据传递的一定数量的 php 响应/信息写入新的 mysql 行

> ID：13655428
> 
> 赞同：0
> 
> 时间：2012-12-01T01:21:06.777
> 
> 标签：php, android, mysql, database

在我的 android 应用程序中，我在 mysql 数据库中查询特定的食物 ID。

例子：

```
Food A - (food_id 5) 
```

食物 A 是三个食物组的一部分，每个组都有自己的唯一 ID。

例子：

```
Meal A - (meal_id = 3), 
Meal B - (meal_id = 8),
Meal C - (meal_id = 20) 
```

我目前正在通过 php 连接到 mysql 数据库，并且可以成功查询有问题的 food_id 并将 JSON 响应接收到我的 android 应用程序中。

我被困住了如何通过 php/JSON 将其传回以创建三个 mysql 行（每餐返回一个），其中将包括在一些新字段中添加的一些额外信息。最好通过将数组从 android 传递到我的 php 服务来为我服务吗？这看起来如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:33:13.260

[您可以使用HTTPClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)将数据发送到您的 PHP 文件

这是一个简单的例子：

```
 url = "http://10.0.218.211/post.php"; 

HttpClient httpclient = new DefaultHttpClient();  
HttpPost post = new HttpPost(url);  

try {  

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);  
        nameValuePairs.add(new BasicNameValuePair("meal1", "important message 1"));  
        nameValuePairs.add(new BasicNameValuePair("meal2", "important message 2"));
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));  

        // Execute HTTP Post Request  
        HttpResponse response = httpclient.execute(post);  

        } catch (ClientProtocolException e) {  
        // TODO Auto-generated catch block  
        } catch (IOException e) {  
        // TODO Auto-generated catch block  
        }
  } 
```

AndroidManifest.xml

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

post.php

```
<?php

$meal1 = $_POST['meal1'];
$meal2 = $_POST['meal2'];

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:34:36.473

听起来您需要设计某种 API。典型的选项是 SOAP 或 REST 的实现。由于 SOAP 有很多开销，您可以选择为您的系统创建一个 REST 接口。我只是猜测，但这样的 API 调用可能有意义：

```
POST /user/meal 
```

使用包含以下表单字段的表单： userId - 为膳食创建膳食计划的用户 ID - 以逗号分隔的膳食列表，或者数组元素

您的 PHP 脚本只需要从 $_POST 获取 POST 参数、插入适当的行并返回有效的 HTTP 状态代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T01:36:53.997

只需使用 an`HttpClient`向您要处理传入数据的 PHP 应用程序端点发出请求，在服务器上发布您要使用的数据。您可以以任何适合您的格式发布 - 查询字符串、JSON 等。

# memory - 使用哪些 MBean（以及如何）以编程方式确定 Weblogic 中部署的应用程序（CQ5）的内存不足

> ID：13655435
> 
> 赞同：0
> 
> 时间：2012-12-01T01:23:31.067
> 
> 标签：memory, weblogic, jmx, mbeans

我必须编写一个独立的 Java 应用程序来监控 CQ5，部署在 Weblogic 中（尤其是内存使用情况）。

我能够使用下面的类（在文档中找到）连接到 weblogic 中的域运行时服务器。

现在，我想知道我需要哪些 MBean 来监视内存不足，这样我就可以在达到某个阈值时触发一个事件。

你们中的任何人都可以给我一些见解吗？这是一个纯粹的 JMX / Java 问题，与 CQ 无关。

我正在尝试以编程方式重新创建 Jconsole 已经做的事情。但我需要以编程方式使用它，因为我需要与外部 API 对话，以防达到某些阈值。

```
public class PrintServerState {
    private static MBeanServerConnection connection;
    private static JMXConnector connector;
    private static final ObjectName service;

    private static final ObjectName bundleWrite;
    static {
        try {
            service = new ObjectName("com.bea:Name=DomainRuntimeService,Type=weblogic.management.mbeanservers.domainruntime.DomainRuntimeServiceMBean");
        } catch (MalformedObjectNameException e) {
            throw new AssertionError(e.getMessage());
        }
    }
/*
* Initialize connection to the Domain Runtime MBean Server
*/
public static void initConnection(String hostname, String portString,
                                  String username, String password) throws IOException,
        MalformedURLException {
    String protocol = "t3";
    Integer portInteger = Integer.valueOf(portString);
    int port = portInteger.intValue();
    String jndiroot = "/jndi/";
    String mserver = "weblogic.management.mbeanservers.domainruntime";
    JMXServiceURL serviceURL = new JMXServiceURL(protocol, hostname,
            port, jndiroot + mserver);
    Hashtable h = new Hashtable();
    h.put(Context.SECURITY_PRINCIPAL, username);
    h.put(Context.SECURITY_CREDENTIALS, password);
    h.put(JMXConnectorFactory.PROTOCOL_PROVIDER_PACKAGES,
            "weblogic.management.remote");
    connector = JMXConnectorFactory.connect(serviceURL, h);

    connection = connector.getMBeanServerConnection();
    System.out.println("***************** get mbean count ************************* " + connection.getMBeanCount());
    Set<ObjectName> mbeans = connection.queryNames(null, null);

    for (ObjectName mbeanName : mbeans) {
        System.out.println(mbeanName);
    }

    System.out.println("********************** ---- ***********************");
}
/*
* Print an array of ServerRuntimeMBeans.
* This MBean is the root of the runtime MBean hierarchy, and
* each server in the domain hosts its own instance.
*/
public static ObjectName[] getServerRuntimes() throws Exception {
    return (ObjectName[])connection.getAttribute(service,
            "ServerRuntimes");
}

/*
* Iterate through ServerRuntimeMBeans and get the name and state
*/
public void printNameAndState() throws Exception {
    ObjectName[] serverRT = getServerRuntimes();
    System.out.println("got server runtimes");
    int length = (int) serverRT.length;
    for (int i = 0; i < length; i++) {
        String name = (String) connection.getAttribute(serverRT[i],
                "Name");
        String state = (String) connection.getAttribute(serverRT[i],
                "Type");

        System.out.println("Server name: " + name + ".   Server state: "
                + state);

    }
}
public static void main(String[] args) throws Exception {
    String hostname = args[0];
    String portString = args[1];
    String username = args[2];
    String password = args[3];
    PrintServerState s = new PrintServerState();
    System.out.println("hostname " + hostname);
    System.out.println("portString " + portString);
    System.out.println("username " + username);
    System.out.println("password " + password);
    initConnection(hostname, portString, username, password);
    System.out.println("**************************************************");
    s.printNameAndState();
    connector.close();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:47:54.563

这有帮助吗 -

> domainRuntime() cd('/ServerRuntimes/' + eval('managedServerName') + '/JVMRuntime/' + eval('managedServerName')) heapFreeCurrentPerOld = str(cmo.getHeapFreePercent()) heapFreeCurrentValOld = str(cmo.getHeapFreeCurrent() )

# asp.net-mvc - DbContext 错误？检索新保存的记录后导航属性为空

> ID：13655445
> 
> 赞同：3
> 
> 时间：2012-12-01T01:25:53.300
> 
> 标签：asp.net-mvc, entity-framework, ninject, lazy-loading, repository-pattern

我的 ASP.NET MVC 4 应用程序使用 Entity Framework v5、Ninject 和 Ninject.MVC3 nuget 包，并且数据存储在 SQL Server Express 中。模型是使用“EF 5.x DbContext Generator for C#”模板生成的。在我的 edmx 中，延迟加载启用设置为 True。

我正在使用存储库模式，我的存储库和上下文位于我的解决方案中的一个单独项目中，该项目由 ASP.NET MVC 4 项目引用。

所以，问题是——在保存了一个视图模型属性的新对象（“Trade”）之后，我查询该对象的存储库。那时，我希望填充的导航属性为空。请参阅下面 Create() 方法中的注释。

如果我从数据库中检索现有交易（我不只是保存的交易），所有导航属性似乎都已填充。

[我在此页面](http://www.codeproject.com/Articles/396822/Basic-Handling-and-Tips-of-Database-Relationships)上发现了类似/相同问题的报告。文章作者表示，“我认为这是 DbContext 中的一个小故障。即，外键导航属性的延迟加载不适用于新添加的项目，但许多端导航属性的延迟加载有效很好，例如 Teacher.Classes。此故障仅发生在新添加的项目上。如果您没有为新添加的项目在上面显式加载 Class.Teacher，则如果它尚未在实体框架中的某处加载，它将为 null . 但是，如果它已经在某个地方加载，那么 C.Teacher 可以由实体框架自动解析。而对于 ObjectContext，延迟加载适用于所有类型的导航属性。

我的控制器的 Create 方法如下所示：

```
[HttpPost]
public ActionResult Create(TradeViewModel tradeViewModel)
{
    if (ModelState.IsValid)
    {
        _employeesRepository.SaveTrade(tradeViewModel.Trade);
        var trade =
            _employeesRepository.Trades.First(
                x =>
                x.RequesterId == tradeViewModel.Trade.RequesterId &&
                x.RequesterWorkDate == tradeViewModel.Trade.RequesterWorkDate);

        // Null reference encountered below, as trade.TradeType and trade.Employee are both null
        String userMessage = "New " + trade.TradeType.TradeTypeDescription + " requested with '" + ControllerHelpers.GetDisplayName(trade.Employee) + "'";
        TempData["UserMessage"] = userMessage;

        return RedirectToAction("Index");
    }
    return View();
} 
```

员工存储库中的 SaveTrade() 方法如下所示：

```
public void SaveTrade(Trade trade)
{
    var data = (from t in _context.Trades
                where t.RequesterId == trade.RequesterId
                      && t.RequesterWorkDate == trade.RequesterWorkDate
                select t);
    if (!data.Any())
    {
        _context.Trades.Add(trade);
    }
    _context.SaveChanges();
} 
```

最后， _employeesRepository 中的交易看起来像：

```
public IQueryable<Trade> Trades
{
    get { return _context.Trades; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T02:33:38.240

EF 的延迟加载可能会导致此问题。尝试像下面这样急切地加载员工

```
 var trade =
        _employeesRepository.Trades.Include("TradeType").Include("Employee").First(
     x =>
            x.RequesterId == tradeViewModel.Trade.RequesterId &&
            x.RequesterWorkDate == tradeViewModel.Trade.RequesterWorkDate); 
```

如果您尝试查看由 EF 生成的查询，您可以获得更清晰的图片。我会使用 EfProfiler [http://www.hibernatingrhinos.com/products/EFProf](http://www.hibernatingrhinos.com/products/EFProf)进行此类分析。你当然可以使用你最喜欢的工具。

希望这可以帮助。

**更新**

这是 Julie Lerman 文章的链接，它可能有助于理解延迟加载的概念[http://msdn.microsoft.com/en-us/magazine/hh205756.aspx](http://msdn.microsoft.com/en-us/magazine/hh205756.aspx)

在包含中添加了贸易类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T19:47:32.740

您可能正在使用`New()`. 您应该改用 DBContext 的`Trades.Create()`方法。

# c - 客户端终止执行（pthread）

> ID：13655446
> 
> 赞同：0
> 
> 时间：2012-12-01T01:26:02.727
> 
> 标签：c, sockets, pthreads

我有一个套接字编程问题。我正在运行服务器，然后它等待客户端。但是，一旦我运行客户端，什么都没有发生，它只是终止并返回提示。基本上它编译得很好，但它根本不运行。我一运行它就会终止。这只发生在我在客户端代码中使用线程时。

这是我正在使用的代码：

```
if(pthread_create(&threadID[i++], NULL, (void *)dostuff, (void *)(intptr_t)sock) != 0)  
        {
        perror("Thread create error");
        } 
```

另一方面，如果我简单地输入

```
dostuff(sock); 
```

客户端程序确实执行。我需要线程，因为我需要实现 I/O 多路复用。你能告诉我如何在我使用线程时阻止客户端终止吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:31:42.273

您需要在退出程序之前等待线程完成，例如使用[pthread_join](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_join.html)

```
// do this before returning from main
pthread_join(threadID[i], NULL); 
```

# actionscript-3 - AS3 FLVPlayback 偶尔会在启动时卡在缓冲中

> ID：13655447
> 
> 赞同：1
> 
> 时间：2012-12-01T01:26:18.287
> 
> 标签：actionscript-3, buffering, flvplayback

我有一个 Flash CS6 FLA，其中包含 FLVPlayback 组件 (2.5.0.26) 的实例和舞台上的进度条组件的实例，用于加载外部 FLV。

我正在尝试在播放之前预加载特定百分比的视频。

当托管在服务器上时，视频在 80% 的时间内按预期启动和播放，但有 20% 的时间视频在启动时卡在缓冲状态（视频应该在的空白区域），我无法获得它可以通过 AS3 播放或单击皮肤控件上的播放按钮。奇怪的是，如果我在浏览器卡住时刷新浏览器，我会在页面重新加载之前看到视频的一瞥，然后按预期播放视频。

我在 Mac (Lion) 上的 Chrome、Firefox 和 Safari 上进行了测试，得到了相同的结果。如果我使用 SpeedLimit 限制我的带宽，视频问题会变得更糟。

任何建议将不胜感激。

代码：

```
public class SimpleVideoLoad extends MovieClip {

    var isLoaded:Boolean = false;

    public function SimpleVideoLoad() {
        // constructor code
        loadVideo();
    }
    function loadVideo():void
    { 
        my_FLVPlybk.x = 0;
        my_FLVPlybk.y = 0;
        my_FLVPlybk.width = 743;
        my_FLVPlybk.height = 300;
        my_FLVPlybk.source = "CARSdotCOM_OLD.flv";
        //preloader component
        pb.source = my_FLVPlybk;
        pb.addEventListener(ProgressEvent.PROGRESS, progressHandlerPB); 
    }
    //progress bar component
    function progressHandlerPB(event:ProgressEvent):void { 
        var percentOfVideoLoaded = pb.percentComplete;
        if (percentOfVideoLoaded>10 && isLoaded == false){      
            isLoaded = true;
            my_FLVPlybk.play();
        }
    } 
} 
```

# python - 来自 django 管理页面的“没有这样的列：instaton_picture.content”

> ID：13655449
> 
> 赞同：1
> 
> 时间：2012-12-01T01:26:19.320
> 
> 标签：python, django, sqlite

我在我的模型中添加了一个名为“content”的 ImageField（对于我的应用程序“instaton”中的图片），python 验证，它应该调用的 sql 查询包括

```
CREATE TABLE "instaton_picture" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(100) NOT NULL,
    "pub_date" datetime NOT NULL,
    "owner_id" integer NOT NULL REFERENCES "instaton_user" ("id"),
    "content" varchar(100) NOT NULL
); 
```

其中内容显然是一个列，至少。

但是，当我尝试从我的管理页面访问“图片”元素时，它会给出“没有这样的列：instaton_picture.content”

我认为数据库不包含名为 content 的列是正确的，但我对检查列并不十分熟悉，因此我可能做错了。

我也不熟悉 django，尤其不熟悉 ImageFields，所以任何我可能做错的事情，我都可能做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:34:21.607

我通过重置解决了这个问题

`python manage.py reset instaton`

`python manage.py syncdb`

我没有任何数据，但需要明确的是，如果您这样做，您将销毁已为您的应用程序放置在数据库中的所有数据。对我来说不是问题。对你来说可能是个问题。总的来说，这可能很糟糕。

# codeigniter - 在测试 php 以在 xampp 中发送电子邮件验证时遇到问题

> ID：13655451
> 
> 赞同：-1
> 
> 时间：2012-12-01T01:26:53.050
> 
> 标签：codeigniter, email, xampp

我必须为网站编写登录、注册和受限成员功能，我一切正常，但我无法测试发送验证电子邮件，但也需要。查看它是否发送并测试电子邮件中的验证链接。

我正在运行 Acer Aspire 5920，

Ubuntu 12.04，

Xampp 1.8.1,

代码点火器 2.1.3

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-01T02:05:24.193

为了回答我自己的问题，我需要传递信息来配置 xampp 以发送电子邮件：

```
$config = Array(
'protocol' => 'smtp',
'smtp_host' => 'ssl://smtp.googlemail.com',
'smtp_port' => 465,
'smtp_user' => 'gmail.login@googlemail.com',
'smtp_pass' => 'your_password',
);
$this->load->library('email', $config);
$this->email->set_newline("\r\n");

$this->email->from('gmail.login@googlemail.com', 'Your Name');
$this->email->to('recipient@destination.tld');

$this->email->subject(' CodeIgniter Rocks Socks ');
$this->email->message('Hello World');

if (!$this->email->send()){
    show_error($this->email->print_debugger());
}else{
    echo 'Your e-mail has been sent!'; 
} 
```

# android - 结合两个简单的 android:id 或 (R.id)

> ID：13655452
> 
> 赞同：-1
> 
> 时间：2012-12-01T01:27:57.277
> 
> 标签：android, android-layout

首先，我对 android 很陌生，我有两个 android:id 。

例如：[ R.id.custom_font ] 和 [ R.id.product_name ]

在 .java 文件中

```
 TextView tv = (TextView)findViewById(R.id.custom_font);
Typeface cFont = Typeface.createFromAsset(getAssets(), "fonts/jcc.ttf");
tv.setTypeface(cFont);

adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name,  R.id.custom_font, products);
lv.setAdapter(adapter); 
```

当我将它们放在一个文本视图中时，它会显示一条错误消息 [属性“android:id”已为元素“TextView”指定]

在 .xml 文件中

```
 <TextView

    android:textColor="?android:textColorPrimary"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/custom_font"
    android:id="@+id/product_name" //Attribute "android:id" was already specified for element "TextView"
    android:textSize="15sp" /> 
```

如何在单个文本视图中传递两个 android:id？

或者任何人如果请帮助我[下载这个](https://dl.dropbox.com/u/15065300/To-Use-Custom-Font.zip)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:32:57.097

您只能将一个 Id 设置为 UI 小部件。删除其中一个 ID。您可以为 ArrayAdapter 使用相同的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T14:45:55.473

与 Ahmad 的答案几乎相同，但根据评论，您似乎没有得到它，所以像这样更改您的 XML（删除给出错误的行）：

```
<TextView
android:textColor="?android:textColorPrimary"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:id="@+id/custom_font"
android:textSize="15sp" /> 
```

然后像这样更改Java代码：

```
TextView tv = (TextView)findViewById(R.id.custom_font);
Typeface cFont = Typeface.createFromAsset(getAssets(), "fonts/jcc.ttf");
tv.setTypeface(cFont);

adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.custom_font,  R.id.custom_font, products);
lv.setAdapter(adapter); 
```

如果您的问题与 ArrayAdapter 的构造函数的两个参数相同而困扰您，请尝试这样...

像这样更改 XML：

```
<FrameLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:id="@+id/product_name">

<TextView
android:textColor="?android:textColorPrimary"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:id="@+id/custom_font"
android:textSize="15sp" />

</FrameLayout> 
```

然后，您可以保留与您所拥有的相同的 Java 代码......

如果这仍然不能解决它，我真的很困惑你的问题到底是什么。

# asp.net-mvc - 来自已发布 MVC 项目的错误 99

> ID：13655453
> 
> 赞同：0
> 
> 时间：2012-12-01T01:28:11.483
> 
> 标签：asp.net-mvc, iis

我有一个用 ASP.NET MVC 编写的 Web 应用程序，它通常可以正常工作，但是在提交第一个登录页面时，我偶尔会看到下面的错误页面。ELMAH 中没有记录任何内容，Google 搜索也没有返回任何内容。我在 Chrome 和 Firefox 上都得到了类似的结果。任何人都有任何想法可能导致这种情况？

![截屏](../Images/29038ef678ef4aeab2b02eced638d869.png)

如果我单击“网站管理员”mailto 链接，电子邮件正文将填写以下内容：

CacheHost：tx22rrpep37a ErrPage：ERR_CONNECT_FAIL Err：（99）无法分配请求的地址时间戳：星期六，2012 年 12 月 1 日 01:52:08 GMT

客户端IP：10.5.0.99 服务器IP：benjineering.com

HTTP 请求：POST /cloud-chm/Account/Login?ReturnUrl=%2Fcloud-chm HTTP/1.1 主机：benjineering.com 连接：keep-alive 内容长度：488 缓存控制：max-age=0 来源：[http： //benjineering.com](http://benjineering.com) User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11 Content-Type: application/x-www-form-urlencoded 接受: text/html,application/xhtml xml,application/xml;q=0.9, */* ;q=0.8 引用者: [http://benjineering.com/cloud-chm/Account/Login?ReturnUrl=%2fcloud-chm](http://benjineering.com/cloud-chm/Account/Login?ReturnUrl=%2fcloud-chm) Accept-Encoding: gzip,deflate,sdch Accept-Language: en-US,en;q=0.8 Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 Cookie: _jsuid=782392611 ; ASP.NET_SessionId=i1u4twd1usymcgtppcejhsxt；__RequestVerificationToken_L2Nsb3VkLWNobQ2=F97jJ8pEE3oalgEJFpNCLMU68UE8nG2AdHeI_KDQSfiN2yOj0fV4-psVMtt59sDddJc4XdHM8DLppmdR-fen1xWHp4wkE22KwLaoCKYplWyrlBC3OmeClTcTTKXPdCTC_A-YEEh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:54:06.410

这看起来像是 Web 服务器或基础架构级别（即不是应用程序）错误的自定义错误页面。从表面上看，似乎找不到您的登录 url，可能是因为资源不可用。应用程序使用什么类型的身份验证？它是否依赖于另一台服务器？

您是否可以控制托管，或者您是否有第三方提供商？如果是后者，您可能会询问他们对错误消息的解释。

我很感激这里没有答案，但我希望这些观察和问题可以帮助你找到答案。

# ios - 本机视图中的webview？

> ID：13655454
> 
> 赞同：0
> 
> 时间：2012-12-01T01:28:35.080
> 
> 标签：ios, webview, native

我想知道是否有人为 iOS 创建了一个阅读器应用程序，允许用户在本机环境而不是 web 视图中查看网页？我正在尝试使用屏幕抓取方法，但在输入 url 以显示页面时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:58:20.613

当您说在本机环境中查看网页时，我不确定您的意思是什么，我猜您想剥离网页上的所有内容，除了选择要显示的内容？您可以通过下载网页本身来做到这一点，在简化版本中，从网络服务器下载 index.html。然后，您必须创建某种类型的解析器，该解析器将遍历 html 文件并抓取您想要显示的内容，例如`<p></p>`标签之间的内容，例如正文段落等。解析器将返回一个对象数组，对于这个简化的示例，我们将说一个字符串数组，每个字符串包含不同文本之间的正文`<p>`标签。然后，您将动态创建文本字段或文本字段，并根据需要格式化内容并根据需要显示。

以下是一些帮助您入门的代码：

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"]
NSString *webPageString = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:NULL]; 
```

请原谅该代码中的任何拼写错误，我是在电脑上徒手写的，因此如果您将其复制进去，方法名称可能会稍有错误或大写错误。然后您可以通过剥离您想要的部分并显示在您最喜欢的网站上进行试验如您所愿，将它们放在应用程序中。

# c++ - 光线追踪 - 光线/三角形相交

> ID：13655457
> 
> 赞同：1
> 
> 时间：2012-12-01T01:29:33.613
> 
> 标签：c++, raytracing

我的算法检查我的光线是否与 3D 三角形相交时遇到问题。它似乎仍在它后面的圆圈中绘制（左上角）。我似乎无法找出我的代码在哪里导致了这个小错误。

```
 bool Mesh::intersectTriangle(Ray const &ray,
                         Triangle const &tri,
                         Intersection &hit) const{
// Extract vertex positions from the mesh data.
Vector const &p0 = positions[tri[0].pi];
Vector const &p1 = positions[tri[1].pi];
Vector const &p2 = positions[tri[2].pi];

Vector e1 = p1 - p0;
Vector e2 = p2 - p0;
Vector e1e2 = e1.cross(e2);
Vector p = ray.direction.cross(e2);
e1e2.normalized();
float a = e1.dot(p);
if(a < 0.000001)
    return false;

float f =  1 / a;
Vector s = ray.origin - p0;
float u = f*(s.dot(p));
if(u < 0.0 || u > 1.0)
    return false;

Vector q = s.cross(e1);
float v = f * (ray.direction.dot(q));
if(v < 0.0 || u + v > 1.0)
    return false;

float t = f * (e2.dot(q));

hit.depth = t;
hit.normal = e1e2;
hit.position = hit.position *t;
return true; 
```

![样本图像](../Images/e017269e2ac853225ab3b8b1e53a096f.png)

# html - 修改 GWT 应用的 CSS

> ID：13655459
> 
> 赞同：0
> 
> 时间：2012-12-01T01:29:44.127
> 
> 标签：html, css, gwt

Firebug 使用 GWT Web 应用程序说以下 HTML

```
<table class="drop-zone drop-zone-column-66 multi-zone">
...
</table> 
```

正在使用这个 CSS。

```
.maximized-gadget .drop-zone.multi-zone, .configure-tab a {
    display: block;
} 
```

我需要编写什么 CSS 才能使其`<table>`具有样式`display: none`？

我做了 2 次尝试：**[编辑 - 更新 .multi-zone 和显示：无]**

```
.drop-zone .drop-zone-column-66 .multi-zone {
    display: none;
} 
```

和

```
.maximized-gadget .drop-zone.multi-zone, .configure-tab a {
    display: none;
} 
```

但 Firebug 仍然给了我顶部显示的 CSS。

请给我提意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:01:10.953

严格来说，您只需要：

```
.maximized-gadget .drop-zone.multi-zone {
    display: none;
} 
```

前提是该规则在您上面给出的原始规则之后：

```
.maximized-gadget .drop-zone.multi-zone, .configure-tab a {
    display: block;
} 
```

根据文档其余部分的结构以及您要执行的操作，您可能需要为该规则添加一些特殊性。

您第一次尝试的问题是您的规则将应用于一个元素，该`multi-zone`元素的 class 是 class 元素的后代，而 class`drop-zone-column-66`又是 class 元素的后代`drop-zone`。您想要的是定位一个设置了所有这三个类的元素，您可以通过链接这些选择器来做到这一点：

```
.drop-zone.drop-zone-column-66.multi-zone {
    display: none;
} 
```

这应该会让你正确（尽管如果我没记错的话，这在旧版本的 IE 中不起作用）。

# c - 并行乘法矩阵的问题

> ID：13655461
> 
> 赞同：2
> 
> 时间：2012-12-01T01:30:20.450
> 
> 标签：c, parallel-processing, segmentation-fault, mpi, openmpi

我在使用[MPI](http://en.wikipedia.org/wiki/Message_Passing_Interface)进行矩阵乘法时遇到了麻烦。

我让程序从两个文件中读取两个 nxn 矩阵，并且应该使用 MPI。但是我在其中一个过程中遇到了**分段错误**。这是我运行代码时得到的输出：

```
read matrix A from matrixA
read matrix B from matrixB 
```

> mpirun 注意到节点 VirtualBox 上 PID 为 15599 的进程等级 1 在信号 11 上退出（分段错误）。

这是我的代码：

```
int main (int argc, char * argv[])
{
    /* Check the number of arguments */
    int n; /* Dimension of the matrix */
    float *sa, *sb, *sc; /* Storage for matrix A, B, and C */
    float **a, **b, **c; /* 2D array to access matrix A, B, and C */
    int i, j, k;

    MPI_Init(&argc, &argv); //Initialize MPI operations
    MPI_Comm_rank(MPI_COMM_WORLD, &rank); //Get the rank
    MPI_Comm_size(MPI_COMM_WORLD, &size); //Get number of processes

    if(argc != 4) {
        printf("Usage: %s fileA fileB fileC\n", argv[0]);
        return 1;
    }

    if(rank == 0)
    {
        /* Read matrix A */
        printf("read matrix A from %s\n", argv[1]);
        read_matrix(argv[1], &a, &sa, &i, &j);
        if(i != j) {
            printf("ERROR: matrix A not square\n"); return 2;
        }
        n = i;

        //printf("%d", n);

        /* Read matrix B */
        printf("Read matrix B from %s\n", argv[2]);
        read_matrix(argv[2], &b, &sb, &i, &j);
        if(i != j) {
            printf("ERROR: matrix B not square\n");
            return 2;
        }
        if(n != i) {
            printf("ERROR: matrix A and B incompatible\n");
            return 2;
         }
    }

    printf("test");

    if(rank == 0)
    {
        /* Initialize matrix C */
        sc = (float*)malloc(n*n*sizeof(float));
        memset(sc, 0, n*n*sizeof(float));
        c = (float**)malloc(n*sizeof(float*));
        for(i=0; i<n; i++) c[i] = &sc[i*n];
    }

    ////////////////////////////////////////////////////////////////////////////////////////////
    float matrA[n][n];
    float matrB[n][n];
    float matrC[n][n];

    for(i = 0; i < n; i++)
    {
        for(j = 0; j < n; j++)
        {
            matrA[i][j] = sa[(i*n) + j];
            matrB[i][j] = sb[(i*n) + j];
        }
    }
    /* Master initializes work*/
    if (rank == 0)
    {
        start_time = MPI_Wtime();
        for (i = 1; i < size; i++)
        {
            //For each slave other than the master
            portion = (n / (size - 1)); // Calculate portion without master
            low_bound = (i - 1) * portion;
            if (((i + 1) == size) && ((n % (size - 1)) != 0))
            {
                //If rows of [A] cannot be equally divided among slaves,
                upper_bound = n; //the last slave gets all the remaining rows.
            }
            else
            {
                upper_bound = low_bound + portion; //Rows of [A] are equally divisable among slaves
            }
            //Send the low bound first without blocking, to the intended slave.
            MPI_Isend(&low_bound, 1, MPI_INT, i, MASTER_TO_SLAVE_TAG, MPI_COMM_WORLD, &request);

            //Next send the upper bound without blocking, to the intended slave
            MPI_Isend(&upper_bound, 1, MPI_INT, i, MASTER_TO_SLAVE_TAG + 1, MPI_COMM_WORLD, &request);

            //Finally send the allocated row portion of [A] without blocking, to the intended slave
            MPI_Isend(&matrA[low_bound][0], (upper_bound - low_bound) * n, MPI_FLOAT, i,     MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &request);
        }
    }

    //broadcast [B] to all the slaves
    MPI_Bcast(&matrB, n*n, MPI_FLOAT, 0, MPI_COMM_WORLD);
    /* work done by slaves*/
    if (rank > 0)
    {
        //receive low bound from the master
        MPI_Recv(&low_bound, 1, MPI_INT, 0, MASTER_TO_SLAVE_TAG, MPI_COMM_WORLD, &status);
        //next receive upper bound from the master
        MPI_Recv(&upper_bound, 1, MPI_INT, 0, MASTER_TO_SLAVE_TAG + 1, MPI_COMM_WORLD, &status);
        //finally receive row portion of [A] to be processed from the master
        MPI_Recv(&matrA[low_bound][0], (upper_bound - low_bound) * n, MPI_FLOAT, 0,   MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &status);
        for (i = low_bound; i < upper_bound; i++)
        {
        //iterate through a given set of rows of [A]
        for (j = 0; j < n; j++)
        {
            //iterate through columns of [B]
                for (k = 0; k < n; k++)
            {
                //iterate through rows of [B]
                matrC[i][j] += (matrA[i][k] * matrB[k][j]);
            }
        }
        }

        //send back the low bound first without blocking, to the master
        MPI_Isend(&low_bound, 1, MPI_INT, 0, SLAVE_TO_MASTER_TAG, MPI_COMM_WORLD, &request);
        //send the upper bound next without blocking, to the master
        MPI_Isend(&upper_bound, 1, MPI_INT, 0, SLAVE_TO_MASTER_TAG + 1, MPI_COMM_WORLD, &request);
        //finally send the processed portion of data without blocking, to the master
        MPI_Isend(&matrC[low_bound][0],
                  (upper_bound - low_bound) * n,
                  MPI_FLOAT,
                  0,
                  SLAVE_TO_MASTER_TAG + 2,
                  MPI_COMM_WORLD,
                  &request);
    }

    /* Master gathers processed work*/
    if (rank == 0)
    {
        for (i = 1; i < size; i++)
        {
            // Until all slaves have handed back the processed data,
            // receive low bound from a slave.
            MPI_Recv(&low_bound, 1, MPI_INT, i, SLAVE_TO_MASTER_TAG, MPI_COMM_WORLD, &status);

            //Receive upper bound from a slave
            MPI_Recv(&upper_bound, 1, MPI_INT, i, SLAVE_TO_MASTER_TAG + 1, MPI_COMM_WORLD, &status);

            //Receive processed data from a slave
            MPI_Recv(&matrC[low_bound][0],
                     (upper_bound - low_bound) * n,
                     MPI_FLOAT,
                     i,
                     SLAVE_TO_MASTER_TAG + 2,
                     MPI_COMM_WORLD,
                     &status);
        }
        end_time = MPI_Wtime();
        printf("\nRunning Time = %f\n\n", end_time - start_time);
    }
    MPI_Finalize(); //Finalize MPI operations

    /* Do the multiplication */
    ////////////////////////////////////////////////////  matmul(a, b, c, n);
    for(i = 0; i < n; i++)
    {
        for (j = 0; j < n; j++)
        {
            sc[(i*n) + j] = matrC[i][j];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T04:21:17.300

每个进程都声明了指向矩阵的指针，即：

```
float *sa, *sb, *sc; /* storage for matrix A, B, and C */ 
```

但只有进程`0`（分配和）填充数组`sa`和`sb`：

```
if(rank == 0)
  {
      ...
      read_matrix(argv[1], &a, &sa, &i, &j);
      ...
      read_matrix(argv[2], &b, &sb, &i, &j);
      ...
  } 
```

但是，之后每个进程都会尝试访问`sa`and`sb`数组的位置：

```
for(i = 0; i < n; i++)
{
   for(j = 0; j < n; j++)
   {
       matrA[i][j] = sa[(i*n) + j];
       matrB[i][j] = sb[(i*n) + j];
   }
} 
```

由于只有进程`0`（已分配和）填满了数组`sa`and `sb`，其余进程正在尝试访问它们尚未分配的内存（ `sa[(i*n) + j]`and ）。`sb[(i*n) + j]`因此，您获得`segmentation fault`.

附带说明一下，您的程序中还有另一个问题 - 您启动非阻塞发送，`MPI_Isend`但从不等待返回的请求句柄完成。甚至不需要 MPI 实现来启动发送操作，直到它正确地完成，主要是通过调用等待或测试操作之一（`MPI_Wait`、`MPI_Waitsome`、`MPI_Waitall`等）。更糟糕的是，您重复使用相同的句柄变量`request`，实际上丢失了所有先前发起的请求的句柄，这使得它们无法等待/不可测试。`MPI_Waitall`改为使用请求数组，并在发送循环后等待所有请求完成。

还要考虑一下—— *你真的需要非阻塞操作来从工作人员那里发回数据吗？*

# jquery - 替代 JQuery 中的 fadeToggle()

> ID：13655463
> 
> 赞同：3
> 
> 时间：2012-12-01T01:30:34.460
> 
> 标签：jquery, html, toggle

我有一个`div`我想在单击按钮时显示/隐藏的内容。的排列`div`是

```
<div id="someStats">
</div>
<div id="mainContent">
</div>
<div id="someOtherStats">
</div> 
```

，意思是从`mainContent`我控制是否显示或隐藏两个信息`div`的左右。这给了我以下问题：不仅`fadeToggle()`使`div`' 之一透明，其`display`属性设置为，这会导致淡出时`none`的位移。是否有不指定两个函数的替代方法（或拆分一个函数，如`mainContent``someStats``fadeToggle()`

```
if(div.isShown()){
   hide() 
}else{ 
   show()
} 
```

? 或者我可以`fadeToggle()`以某种方式操纵吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T01:52:16.133

您可以为不透明度设置动画

```
var target = $('#someStats'),
    opacity = target.css('opacity');

target.animate({opacity: (opacity==1?0:1)}); 
```

**演示在** [http://jsfiddle.net/gaby/MNhcU/](http://jsfiddle.net/gaby/MNhcU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:55:50.020

**[jsBin 演示](http://jsbin.com/uvupim/2/edit)**

```
statC = 0; // just a counter :)

$('#mainContent').click(function(){ 
  $('#someStats').fadeTo(300, statC++%2 ); // 1,0,1,0,1,0,.....
}); 
```

滑动切换和 FadeToggle 将从 DOM 中“分离”元素位置，因此您可以尝试使用`.fadeTo([time],[opacity]);`The element will just fade the opacity, 而不是`display:none;`在动画完成后设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T02:04:23.087

您始终可以使用切换 ( [http://api.jquery.com/toggle/](http://api.jquery.com/toggle/) )，然后您可以控制每个实例。

小提琴从上面分叉 - [http://jsfiddle.net/hpaMV/](http://jsfiddle.net/hpaMV/)

```
$('#some').toggle(function(){
    $('#someStats').animate({opacity: 1});
    ..anything else..
}, function(){
    $('#someStats').animate({opacity: 0});
    .. the opposite of the previous anything else..
}); 
```

# c++ - 模板参数推导和 const 限定

> ID：13655465
> 
> 赞同：3
> 
> 时间：2012-12-01T01:31:11.833
> 
> 标签：c++, templates

谁能解释为什么代码无法编译。

```
template<class T, class DER>
struct Base {
  T a;
  Base(const T argB) : a(argB){}
};

template<class T>
struct Derived : Base<T, Derived<T> > {
  Derived(const T argD) : Base<T, Derived<T> >(argD){}
};

int main() {
  int val = 10;
  const int *p = &val;
  /* this was in the original question
  Derived<int*> d(p); // breaks, but compiles with Derived<const int*> d(p);
  */
  Derived d(p); // fails, but Derived<const int*> d(p); compiles
} 
```

错误消息是关于没有从`int*`到 的转换`const int*`。正如我所看到的，它`T`可以被替换`int*`，在这种情况下，构造函数将`Derived`其参数作为 a 接收`const int*`并使用`const int*`. 那么为什么不断的资格会丢失。

我显然不明白模板参数推导是如何工作的。我无法找到任何清晰但严谨和详尽的描述它在何时以及在游戏中是如何`const`工作的`*`。`&`也就是说，`a` 在这些不同的情况下会得到什么类型的推断。

```
 Foo(T& a)
 Foo(T  a)
 Foo(T* a)
 Foo(const T a)
 Foo(const T*a)
 Foo(const t&a) 
```

`a`什么时候

*   一个东西，
*   一个指针和
*   数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T01:42:29.607

Because the constructor of `Derived` is `Derived(const T argD)`, so in your case it is `Derived(int * const)`. This does not accept an `const int*`.

A *"const (pointer to int)"* is not a *"(pointer to const int)"*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:11:53.417

您的示例中没有模板扣除。`Derived<int*> d(p);`专门将模板参数设置`T`为`int*`（*指向 int*的指针）。在这种情况下，您的派生构造函数采用一个`const T`参数，该参数是一个*指向 int 的 const 指针*。我认为你的困惑是因为`const int* p;`没有声明一个*指向 int 的 const 指针*，而是声明了一个*指向 const int*的指针，它不是，也不能转换为一个*指向 int 的 const 指针*（前者允许你修改指向的值，而后者没有）。

请记住，C 和 C++ 声明通常是从变量名向外读取的，因此对于`const int* p`您从 开始`p`，向左看`*`，然后再向左看`const int`，`p`指向 const int 的指针也是如此。[这](http://www.antlr.org/wiki/display/CS652/How+To+Read+C+Declarations)是解密 C 声明的一个很好的指南，[cdecl](http://cdecl.org/)也是一个非常有用的工具。

你的例子的问题`p`是一个*指向 const int*的指针，但构造函数`Derived<int*>`需要一个*指向 int 的 const 指针，*因为`T`is `int*`。这可能看起来令人困惑，但您可以认为`const`它具有比`*`类型声明更高的优先级。因此，`const int *`在`const`应用于`int`然后`*`应用于整个事物中，创建*指向 const int*`p`的指针，而 for中，const 适用于，这实际上是指向int的*const 指针*。*`const T``T``int*``const T argD``argD`*

 **使用相同的想法，您的所有`Foo`示例都可以轻松破译。

```
Foo(T& a)       // a is a reference to a value of type T
Foo(T  a)       // a is a value of type T
Foo(T* a)       // a is a pointer to a value of type T
Foo(const T a)  // a is a constant value of type T
Foo(const T* a) // a is a pointer to a constant value of type T
Foo(const T& a) // a is a reference to a constant value of type T 
```

一般来说`Foo(T a)`，`Foo(const T a)`不能重载，因为调用者是否将参数复制到常量变量中并不重要。

更具体地说，如果`T`是`char *`（指向 char 的指针）

```
Foo(char *&a)       // a is a reference to a pointer to a char
Foo(char *a)        // a is a pointer to a char (*)
Foo(char **a)       // a is a pointer to a pointer to a char
Foo(char *const a)  // a is a constant pointer to a char (cannot overload with (*))
Foo(char *const *a) // a is a pointer to a constant pointer to a char
Foo(char *const &a) // a is a reference to a constant pointer to a char 
```

If `T`is `const char*`(pointer to a const char) 事情是一样的

```
Foo(const char *&a)       // a is a reference to a pointer to a const char
Foo(const char *a)       // a is a pointer to a const char (*)
Foo(const char **a)       // a is a pointer to a pointer to a const char
Foo(const char *const a)  // a is a constant pointer to a const char (cannot overload with (*))
Foo(const char *const *a) // a is a pointer to a constant pointer to a const char
Foo(char *const &a) // a is a reference to a constant pointer to a const char 
```

如果`T`is `char* const`(const pointer to a char) 那么所有的`const T`重载都是多余的，因为`const T`等价于`T`when`T`已经是 const。

```
Foo(char *const &a) // a is a reference to a const pointer to a char (+)
Foo(char *const a)  // a is a const pointer to a char (*)
Foo(char *const *a) // a is a pointer to a const pointer to a char (^)
Foo(char *const a)  // a is a const pointer to a char (same as (*))
Foo(char *const *a) // a is a pointer to a const pointer to a char (same as (^))
Foo(char *const &a) // a is a reference to a const pointer to a char (same as (+)) 
```**

# php - $dbh 在设置时不是一个可识别的变量？

> ID：13655467
> 
> 赞同：1
> 
> 时间：2012-12-01T01:31:29.800
> 
> 标签：php, pdo

我收到以下消息：

> 注意：未定义变量：第 12 行 /var/www/PDO/Functions/PDOFunctions.php 中的 dbh 致命错误：在 /var/www/PDO/Functions/PDOFunctions 中的非对象上调用成员函数 prepare()。第 12 行的 php

```
$dbh = new PDO('mysql:host=localhost;dbname=pdo', 'root', 'xxxxxxxxxxx');
global  $dbh;

function PDOFetch($Var)
{
    $sth = $dbh->prepare("$Var"); //Error Line
    $sth->execute();
    $result = $sth->fetchAll();
    return $result; 
}

function PDONumb ($Var)
{
    $Query = $dbh->prepare("{$Var}");
    $Execute->execute();
    $count = $Execute->rowCount();
    return $count;
} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T01:45:54.800

使用全局变量是不好的做法。对于这样简单的事情，您可以将代码重写为一个简单的类。这样做，您还可以获得轻松创建和使用多个数据库句柄的额外好处。

```
class Db 
{
    private $dbh = null;

    public function __construct()
    {
        $this->dbh = new PDO('mysql:host=localhost;dbname=pdo', 'root', 'xxxxxxxxxxx');
    }

    public function PDOFetch($Var)
    {
        $sth = $this->dbh->prepare("$Var"); //Error Line
        $sth->execute();
        $result = $sth->fetchAll();
        return $result; 
    }

    public function PDONumb ($Var)
    {
        $sth = $this->dbh->prepare("{$Var}");
        $sth->execute();
        $count = $sth->rowCount();
        return $count;
    }
    // Other methods here
} 
```

然后是：

```
$dbc1 = new Db();
$dbc2 = new Db();  // Hey I have 2 connections now, cool
$result1 = $dbc1->PDOFetch(..);
$result2 = $dbc2->PDOFetch(..); 
```

请注意，您的 PDOnumb 已损坏且无法正常工作，因此我也对此进行了修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T01:34:02.963

您不会一次声明一个全局变量，然后它就可以在所有函数中使用。

您在需要访问它的每个函数中声明全局变量。

[请参阅http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)`global`中的使用示例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T01:34:05.087

在 PHP 中，要访问函数中的全局变量，您必须使用 global 关键字声明它属于全局范围。

```
function PDOFetch($Var)
{
    global $dbh;
    $sth = $dbh->prepare("$Var"); //Error Line
    $sth->execute();
    $result = $sth->fetchAll();
    return $result; 
} 
```

函数中使用的所有变量都是该函数的本地变量，除非声明为从全局范围导入。

NOTICE 错误是一个有用的警告，表明您可能正在做一些您没有预料到的事情。

# ruby - Ruby - Datamapper - Collecting records by joining two models

> ID：13655468
> 
> 赞同：0
> 
> 时间：2012-12-01T01:31:39.680
> 
> 标签：ruby, datamapper, ruby-datamapper

I have two tables

```
users
-------
id
name
organization_id

organizations
----------
id
org_name
org_unique_num
abc
xyz 
```

`organization_id` in users table is foreign key to organizations table's id

```
class Organization
  include DataMapper::Resource
  property :id, Serial
  property :org_name, String
  property :org_unique_num, Integer
  property :abc String
  property :xyz String
  has n,    :users 
end

class User
  include DataMapper::Resource
  property :id, Serial
  property :name, String
  property :organization_id, Integer
  property :age, Integer
  belongs_to :organization 
end 
```

I want to grab the user's record with joining Organization table where user's age > 25\. So the result should look like

```
user_id    name    organization_id    org_name   org_unique_num    age
12         John       356              ATT           76763          38
35         Lisa       981              IBM            2376          28 
```

So how can I achieve this? Please note I dont want column abc and xyz in the result.

```
User.all(:age.gt => 25) 
```

This will just give me users with age >25, but I want to grab user's org info as well. Is it possible to do it one statement? or will have to do it in multiple steps. Like collecting all user_id then pass to Organization model to with id in().. that would be ugly.

Any help will be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:44:35.020

DataMapper will do all join job for you.

you do not need to extract organizations for each user, this is done automatically.

So, you simply fetch your users with this: `User.all(:age.gt => 25)`

And each user will have its organization attached to it:

```
User.all(:age.gt => 25).each do |user|
  p user.name
  # organization not yet fetched, only referenced
  p user.organization
  # now organization are fetched
  p user.organization.id       # display org ID
  p user.organization.org_name # display org name
  # etc
end 
```

Regard "i do not need `abc` and `xyz`", if they are `Text` columns, DataMapper will load them lazily, meant the data will be fetched only when requested via `user.abc` and `user.xyz`

# php - 如何使用php解析xml文件并以不同的顺序打印项目

> ID：13655471
> 
> 赞同：1
> 
> 时间：2012-12-01T01:31:50.933
> 
> 标签：php, xml

我正在尝试解析一个 xml 文件并以不同的顺序打印这些项目，并在它们之间添加一些其他文本。xml文件是这样的

```
<list>
    <item>
    <price>200</price>
    <title>Title1</title>
    <description>something here</description>   
    </item>

    <item>
    <price>350</price>
    <title>Title2</title>
    <description>something there</description>  
    </item>
</list> 
```

我希望输出完全像这样，两条不同的行：

```
"Title1","something here","","200","1",""
"Title2","something there","","350","1","" 
```

查看引号和逗号很重要。

我正在使用它，但这还不够。我不知道接下来该怎么办...

```
<?php
//Initialize the XML parser
$parser=xml_parser_create();

//Function to use at the start of an element
function start($parser,$element_name,$element_attrs)
  {
  switch($element_name)
    {
    case "PRICE":
    echo "&#34;";
    break;
    case "TITLE":
    echo "&#34;";
    break;
    case "DESCRIPTION":
    echo "&#34;";
    }
  }

//Function to use at the end of an element
function stop($parser,$element_name)
  {
  echo "&#34;,";
  }

//Function to use when finding character data
function char($parser,$data)
  {
  echo $data;
  }

//Specify element handler
xml_set_element_handler($parser,"start","stop");

//Specify data handler
xml_set_character_data_handler($parser,"char");

//Open XML file
$fp=fopen("shopmania_ro.xml","r");

//Read data
while ($data=fread($fp,4096))
  {
  xml_parse($parser,$data,feof($fp)) or
  die (sprintf("XML Error: %s at line %d",
  xml_error_string(xml_get_error_code($parser)),
  xml_get_current_line_number($parser)));
  }

//Free the XML parser
xml_parser_free($parser);
?> 
```

先感谢您。

我有另一个代码

```
 <?php
$xfile = "file.xml";
$xparser=xml_parser_create();
xml_set_character_data_handler($xparser, "cdataHandler");

if(!($fp=fopen($xfile,"r")))
{
die ("File does not exist");
}

while($data=fread($fp, 4096))
{
if(!xml_parse($xparser,$data,feof($fp)))
{
die("XML parse error: xml_error_string(xml_get_error_code($xparser))");
}
}

xml_parser_free($xml_parser);

function cdataHandler($xparser, $cdata)
{
echo "$cdata";
}
 ?> 
```

输出是

```
200 Title1 something here 350 Title2 something there 
```

我不知道如何提取数据并以我想要的方式打印它。有什么帮助吗？对不起，我是新手...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:38:47.463

That's exactely what the **[XSLT](http://en.wikipedia.org/wiki/XSLT)** stylesheet language was made for. Transforming XML documents to different formats. PHP comes with the **[XSL](http://php.net/manual/en/book.xsl.php)** extension that's pretty easy to use. Examples are there, too.

**EDIT**
If that's an overkill for your purpose you should take a look at PHP's [SimpleXML](http://php.net/manual/en/book.simplexml.php) extension that allows you to use a node like you would use an object.

**EDIT 2**

```
$xmlstr = <<<XML
<?xml version='1.0' standalone='yes'?>
<list>
    <item>
        <price>200</price>
        <title>Title1</title>
        <description>something here</description>   
    </item>
    ...
</list>
XML;

$xml  = simplexml_load_string($xmlstr);
$list = $xml->list;

foreach ( $list->item as $item ) {
    // Not sure if this works, but if it doesn't, substitute the sprintf
    // with plain string concatenation
    echo sprintf(
        '"%s","%s","","%d","1",""',
        $item->title,
        $item->description,
        $item->price
    );
} 
```

# android - Android 手机在蓝牙设备 ID 配置文件和/或 EIR 中报告无效的供应商/型号

> ID：13655472
> 
> 赞同：0
> 
> 时间：2012-12-01T01:32:04.990
> 
> 标签：android, bluetooth, sony

在处理涉及通过蓝牙发现智能手机的应用程序时，我发现许多基于 Android 的设备报告返回的设备 ID 无效。

一些背景知识：有一个蓝牙配置文件/服务，称为设备 ID (UUID 0x1200)，它可以识别特定设备的供应商、型号和版本。供应商 ID 可以由 USB 或蓝牙机构分配。设备发现后可以通过服务发现协议（SDP）查询该服务。相同的 ID 信息也可以包含在扩展查询响应 (EIR) 中，该响应在设备发现期间发送。

运行 2.3.7 的最新测试对象 Sony Xperia Go 报告了以下 SDP 记录：

```
ID=0x0000,type=0x01,value=0x00010000
ID=0x0001,type=0x06[type=0x03,value={**0x1200**};]
ID=0x0005,type=0x06[type=0x03,value={0x1002};]
ID=0x0009,type=0x06[type=0x06;]
ID=0x0200,type=0x01,value=0x0102 (Device ID Profile Specification 1.2)
ID=0x0201,type=0x01,value=**0x000a (Vendor ID)**
ID=0x0202,type=0x01,value=**0x0000 (Product ID)**
ID=0x0203,type=0x01,value=**0x0000 (Version)**
ID=0x0204,type=0x05,value=1 (Primary? = Yes)
ID=0x0205,type=0x01,value=**0x0002 (VendorIDSource = USB Implementer's Forum)** 
```

正如您在上面看到的，Go 报告了无效的 USB 供应商 ID (0x000a) 以及无效的产品和版本。我在 Acer Cloud Mobile 上也得到了相同的结果。这让我认为无效的 ID 可能源于手机 Android OEM 未修改的默认值。

果然，在我最近查看的 Android 资源中，bluez 蓝牙堆栈在 main.conf 中有以下参数：

```
# Use vendor, product and version information for DID profile support.
# The values are separated by ":" and VID, PID and version.
DeviceID = android:generic:1.5 
```

如果 OEM 未修改此参数，它将由 start_sdp_server 函数解析：

```
 vid = (uint16_t) strtol(ptr, NULL, 16);
    ptr = strchr(ptr, ':');
    if (ptr) {
        pid = (uint16_t) strtol(ptr + 1, NULL, 16);
        ptr = strchr(ptr + 1, ':');
        if (ptr)
            ver = (uint16_t) strtol(ptr + 1, NULL, 16);
        register_device_id(vid, pid, ver);
    } 
```

这就是 0x000a 供应商 ID 的来源。来自 Android 的“a”。多么天才...

我正在尝试与 Sony 和 Android 开发人员联系，以了解如何为未来的版本解决此问题。所以，如果你是其中之一，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T09:32:17.447

我只是在这里确认索尼 Xperia Go 的新 4.1.2 JB 固件已修复此错误。电话正确报告设备 ID 配置文件。

# google-apps-script - 不允许从此上下文调用 Browser.inputBox()

> ID：13655478
> 
> 赞同：0
> 
> 时间：2012-12-01T01:33:49.157
> 
> 标签：google-apps-script

在我第一次使用 Google 脚本时，我试图定义一个调用 Browser.input 方法来获取用户名的函数。但我总是收到以下错误消息：

不允许从此上下文调用 Browser.inputBox()。

（我必须说我已经从葡萄牙语环境中翻译了它，因为这种情况在英语中有不同的表达方式）。

如果有人可以建议我，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:03:06.713

`Browser.inputBox()` can only be used from a script running from a spreadsheet. Once you use a Ui (with UiApp or GUI builder or HTML service) you can't use these `Browser` methods. The only situation in wich they can be combined is when you `show(app)` from a spreadsheet script but then the `Browser` call will close the UI immediately.

This seems quite logical since they are in a way Ui themselves...

By the way, you say in your comment that you are updating your question with some code but I see nothing ? Is it normal ?

* * *

***EDIT :*** to answer your comment, there are many ways to interact with users... something that is quite similar to `Browser.message` is the [popup example proposed by Waqar Ahmad](https://stackoverflow.com/questions/13641306/how-to-make-the-google-ui-services-popuppanel-works) recently. As for your second point : where to find such information... well I guess I've read about everything that can be read on the subject for quite a moment now.... I'm not sure where that particular aspect is described, sorry about that. If you read Google documentation about Ui I'm pretty sure you'll find something about that. *(maybe someone from the team could help me on that point ? ;-)*

# python - 在 Python 中将输入转换为字符串

> ID：13655482
> 
> 赞同：2
> 
> 时间：2012-12-01T01:34:20.527
> 
> 标签：python

我想在 python 中将颜色输入用引号括起来：

```
def main():
    colour = input("please enter a colour") 
```

因此，如果我在输入框中输入红色，它会自动使其变为“红色”

我不知道该怎么做，会不会是这样的：

```
def main():
    colour = """ + input("please enter a colour") + """ 
```

亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T01:36:59.640

问题是这在语法上没有通过，因为 Python 认为第二个`"`是字符串的结尾（您帖子中突出显示的语法显示了它是如何被解释的）。最好阅读的解决方案是对字符串使用单引号：`'"'`。

或者，您可以使用反斜杠转义字符（例如，如果您希望在字符串中使用两种类型的引号）：`"\""`

进行这种插入值而不是许多字符串连接的好方法是使用[`str.format`](http://docs.python.org/3/library/stdtypes.html#str.format)：

```
colour = '"{}"'.format(input("please enter a colour")) 
```

这可以做很多事情，但在这里，我们只是用它来插入我们传入的值`{}`。（请注意，在 2.7 之前，您需要提供要插入的参数的编号，例如：`{0}`在这种情况下。超过该版本，如果您不提供，Python 将只使用下一个值）。

请注意，在 Python 2.x 中，您需要`raw_input()`而不是`input()`在 2.x 中，后者将输入评估为 Python，这可能会导致坏事。在 3.x 中，该行为已修复，因此其`input()`行为与`raw_input()`2.x 中相同。

# java - 哪个更有效/更传统？

> ID：13655485
> 
> 赞同：0
> 
> 时间：2012-12-01T01:34:41.057
> 
> 标签：java, performance, user-interface, components, add

以下哪项是将[组件](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html)添加到[JPanel](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)的更好方法？

```
panel.add(jlist);
panel.add(jcombobox);
panel.add(jmenu); 
```

或者

```
addComponents(new Component[] { jlist, jcombobox, jmenu }, panel);

    private static void addComponents(Component[] component, JPanel panel) {
         for (Component loop : component) {
              panel.add(loop);
         }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:12:43.273

首先。为什么？

如果在某个时候您想将另一个参数传递给每个组件的 panel.add(...) 语句怎么办？如果你有一个循环，你不能轻易做到这一点。

例如，使用 MigLayout（但它也适用于其他情况）：

```
panel.add(jlist, new CC().width("40%").span());

panel.add(jcombobox, new CC().width("60%"));

panel.add(jmenu, new CC().width("20%").span()); 
```

只有第一种方式允许这样做。

# python - 如何使用 selenium 在 Firefox 中禁用 javascript？

> ID：13655486
> 
> 赞同：3
> 
> 时间：2012-12-01T01:35:01.043
> 
> 标签：python

如何向浏览器添加首选项，使其在没有 javascript 的情况下启动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T01:44:37.437

Try setting firefox's profile to disable the javascript:

```
from selenium import webdriver

fp = webdriver.FirefoxProfile()

fp.set_preference("browser.download.folderList",2)
fp.set_preference("javascript.enabled", False)

browser = webdriver.Firefox(firefox_profile=fp) 
```

To check in the `webdriver` browser if javascript is enabled do the following:

On the menubar navigate to `Firefox > Preferences > Content` and the check button for `enable javascript` should be unchecked. Like the picture shown below.

![enter image description here](../Images/d9fea4091dd58c73e863b0c89ca013e7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T22:20:39.457

您可以直接从浏览器禁用 javascript。脚步：

*   在 url 中输入 About:config
*   点击我会小心的，我保证
*   搜索 javascript.enabled
*   右键单击->切换
*   值 = 假

# sql - 为什么这不提取任何数据？

> ID：13655488
> 
> 赞同：0
> 
> 时间：2012-12-01T01:35:21.680
> 
> 标签：sql, db2

以下代码片段是多个表的连接。我需要显示从澳大利亚任何人订购的所有订单号、客户名称、产品名称、价格和数量。我得到表格标题但没有行。这有什么问题吗？

```
SELECT 
      "order".orderno AS ord, 
      customer.cname, 
      product.prodname, 
      customer.country_code, 
      orderdetl.price, 
      orderdetl.qty, 
      country.country_code
    FROM 
      prema01.country, 
      prema01.customer, 
      prema01."order", 
      prema01.orderdetl, 
      prema01.product
    WHERE 
      customer.country_code = 'AUS' 
```

我已经更改了代码，验证了表格中有数据，但它仍然是空白的。我完全被难住了。

```
SELECT O.ORDERNO, C.CNAME, PN.PRODNAME, ODT.PRICE, ODT.QTY, ODT.QTY * PN.PRODSELL AS TOTAL
FROM prema01.ORDER O, prema01.CUSTOMER C, prema01.ORDERDETL ODT, prema01.PRODUCT PN, prema01.COUNTRY CT
WHERE CT.COUNTRY_NAME = 'Australia' 
AND C.COUNTRY_CODE = CT.COUNTRY_CODE 
AND C.CUSTNO = O.CUSTNO 
AND O.ORDERNO = ODT.ORDERNO 
AND PN.PRODNO = ODT.PRODNO AND O.ORDERNO <= 60
ORDER BY TOTAL DESC; 
```

忘记添加更改。这些表中有数据，我已经物理验证了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:40:26.663

For starters, you need some join conditions e.g.

```
Select
  r.country_code,
  c.cname
From
  prema01.country r
    inner join
  prema01.customer c
    on r.country_code = c.country_code 
```

You need to build up the relationships with the other tables in a similar way.

Also, are you sure your tables have any data in them. Does

```
Select
  Count(*)
From
  prema01.country 
```

return anything? How about

```
Select
  Count(*)
From
  prema01.customer
Where
  country_code = 'AUS' 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:29:38.103

已修复，当我的国家/地区表中有“AUSTRALIA”时，我正在寻找“Australia”。谢谢您的帮助

# magento-1.7 - 在 Magento 中跳过结帐仅限免费可下载产品

> ID：13655491
> 
> 赞同：2
> 
> 时间：2012-12-01T01:35:54.680
> 
> 标签：magento-1.7

我正在使用 Magento CE 1.7.0.2 构建一个摄影网站。对于该版本，我们计划提供大量可下载的产品（图像）——有些是收费的，有些是免费的。我们希望可以使用正常的 Magento '目录' 功能来添加所有（收费/免费）产品的类别。因为一些可下载的产品是免费的，所以当用户尝试下载免费的可下载产品时，让他们通过结帐是没有意义的，这让我想到了我的问题：

有谁知道如何将“添加到购物车”选项修改为“下载”选项，仅限免费下载产品？我们仍然需要使用“添加到购物车”选项通过正常结帐流程发送 FEE 产品吗？

如果无法使用直接下载链接绕过免费可下载产品的结帐流程，我们希望用户以访客身份结帐。如果用户以访客身份签出，我们需要修改 Magento 的当前行为。目前，当客人完成结帐过程时，会向用户电子邮件发送一个链接，其中包含一个下载链接。该链接将访客重定向回要求访客登录以下载其产品的站点。不幸的是，客人没有帐户可以登录，因为他们以客人身份签出。

作为替代选项，我们希望更改 Magento 的行为以允许客人正常结帐。但是当客人完成结帐过程时，我们需要 Magento 将用户重定向到网站上的一个页面，客人可以在该页面上立即下载链接。对于购买免费可下载产品的客人，我们需要完全绕过电子邮件流程。

我注意到可下载产品有一个“免费样品”选项，但如果可以的话，我不希望使用它，因为我计划在添加图像以外的产品时将此字段用于其预期目的。

提前致谢，

迈克尔

# javascript - 在 Chrome 浏览器中管理 JavaScript 热键

> ID：13655493
> 
> 赞同：2
> 
> 时间：2012-12-01T01:36:16.297
> 
> 标签：javascript, jquery, google-chrome, cross-browser

我在我建立的网站上有以下 jQuery 代码：

```
$(document).ready(function() {
  // Other Bindings/Initializations Removed

  // Hotkey Event Handler to 'doSomething'
  //-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
  $(document).keypress("a",function(e) {
    if(e.altKey) { // Doesn't work
      doSomething();
    }
  });

  // Hotkey Event Handler to 'doSomething'
  //-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
  $(document).keypress("a",function(e) {
    if(e.shiftKey) { //Works as Expected?
      doSomething();
    }
  });

}); 
```

代码捕获按键组合事件，在本例中为“Alt-A”，然后继续调用执行适当操作的函数。我在 FireFox 中测试了此功能，并按预期调用了该功能。当我在 Chrome 中测试该功能时，该功能没有被调用，而是发出了令人讨厌的错误音。我认为也许“Alt-A”与一个重要的浏览器热键组合发生冲突，因此将“A”更改为“N”、“G”，然后是“K”；每次未调用该函数并发出错误提示音时。但是，当我创建 Shift-A/N/G/K 热键组合时，Chrome 会按预期调用该功能。

1.  为什么 Chrome 处理“Alt”键的方式不同？

2.  如何为我的网站定义一个热键，以便它可以使用“Alt”键在 Chrome 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T02:08:31.977

这适用于 Chrome 和 Firefox，但在 IE 中 Alt+a 打开收藏夹菜单。我不确定你会如何覆盖它。

[小提琴](http://jsfiddle.net/tVxnD/1/)

HTML：

```
<a accesskey="a">​ 
```

Javascript：

```
$(document).ready(function() {
    // Other Bindings/Initializations Removed
    // Hotkey Event Handler to 'doSomething'
    //-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
    $(document).keypress("a", function(e) {

        if (e.shiftKey) { //Works as Expected?
            alert("shift a");
        }

        if (e.altKey) {
            alt_a_function();
        }

    });

    $(document).on("click", "[accesskey=a]", function() {
        alt_a_function();
    });

});

function alt_a_function() {
    alert("alt a");
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:43:07.420

The jQuery docs say that the first argument to [.keypress()](http://api.jquery.com/keypress/) is "A map of data that will be passed to the event handler." Perhaps jQuery is confused when that object is a string, which causes an error in Chrome.

To check for a particular key in the event handler, use `e.which` to get the character code instead.

# ruby - 这条 Ruby 行说了什么？

> ID：13655502
> 
> 赞同：0
> 
> 时间：2012-12-01T01:37:40.427
> 
> 标签：ruby, syntax, operator-keyword

我正在使用自定义渲染器，并且使用了来自另一个站点的一些复制粘贴。我似乎无法弄清楚这件作品在这里做什么。

```
"#{options[:callback]}(#{data})" 
```

这是完整上下文中的一段代码。

```
 ActionController.add_renderer :as3 do |data, options|
    data = ActiveSupport::JSON.encode(data) unless data.respond_to?(:to_str)
    data = "#{options[:callback]}(#{data})" unless options[:callback].blank?
    self.content_type ||= Mime::JSON
    self.response_body = data
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T01:39:34.167

这是简单的字符串插值。它将产生一个像这样的字符串，其中`callback`的值是`options[:callback]`，并且`value`是变量中的任何内容`data`。

```
"callback(value)" 
```

在 Ruby 中，双引号字符串支持通过`#{}`语法进行插值。也就是说，如果您有一个`x`包含 value的变量`3`，则该字符串`"The value of x is #{x}"`将被评估为`"The value of x is 3"`。在 a`#{}`中，您可以拥有任意复杂的 Ruby 表达式，包括数组/哈希索引。因此，字符串的第一部分`"#{options[:callback]}"`只是将值替换`options[:callback]`到字符串中。

下一部分`()`是简单的原始字符串数据，而不是可执行代码。在 中`()`，您有第二个`#{}`替换`data`。如果将两个变量替换为`x`and可能会更清楚`y`：

```
 x = 3
 y = 4
 "#{ x }(#{ y })" 
```

以上将评估为字符串`"3(4)"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T01:40:11.333

这是将 JSON 响应转换为 JSONP；想象`data`是：

```
'{"some": "thing", "goes": "here"}' 
```

JSONP 声明数据应该包装在 JavaScript 函数调用中。因此 of`options[:callback]`是字符串`test`（要调用的函数的名称），生成的 JSONP 将是：

```
'test({"some": "thing", "goes": "here"})' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T01:40:20.643

它是一个模板，将第一个字段替换为由 interned string 指向的选项的值，`:callback`第二个字段在括号内替换为`data`.

我敢打赌，生成的字符串将在其他地方进行评估，在那里它将成为对过程的调用。这将像这样工作：

```
options[:callback] = "foo"
data="arg,arg,arg" 
```

（请注意，数据被编码为 JSON，因此作为数据传递的*字符串是 json 字符串。*

然后字符串变成“foo（arg.arg.arg）”，当它被评估时，它变成了对`foo`带有这些参数的例程的调用。

[http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-eval](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-eval)

**更新：**

实际上，我收回了关于 Ruby eval 的看法——虽然这可行，但它更有可能变成 Javascript 函数调用。然后，这将允许您将 javascript 函数的名称作为字符串传递，并且代码将返回适当的回调函数以供 javascript 稍后执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T01:53:38.317

你可以重写

```
"#{options[:callback]}(#{data})" 
```

作为

```
options[:callback].to_s + "(" + data.to_s + ")" 
```

# java - 将位图旋转 90 度并保存

> ID：13655503
> 
> 赞同：0
> 
> 时间：2012-12-01T01:37:41.620
> 
> 标签：java, android, matrix, bitmap, rotation

全部！我对这个问题完全不知所措。它可能已被回答，但我找不到任何人确切地要求我需要什么。

我有一个 jpeg 文件保存到 SDCARD，并希望以编程方式将其顺时针旋转 90 度，然后将其保存回卡中（覆盖原件或在编辑后删除原件）。JPEG被加载到

```
File myFile; 
```

谁能告诉我如何去做？我想它与 BitmapFactory 和矩阵有关，但就像我说的：我有点过头了！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:34:14.260

尝试这个。

```
public Bitmap rotate(String file)
{
         Bitmap source = BitmapFactory.decodeFile("/sdcard/ChuckNorris.png");
         Bitmap b = Bitmap.createBitmap(source.getWidth(), source.getHeight(), Config.ARGB_8888);

         Paint p = new Paint();
         p.setColor(Color.BLACK);

         Canvas f = new Canvas(b);
         f.drawBitmap(source, 0, 0, p);

         f.rotate(90);

         return b;
} 
```

注意：不要自己尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:14:33.737

I found the answer!

For JPG files, apparently you can just niftily edit the exif data using the following method:

```
ExifInterface exif = new ExifInterface(myFile.getAbsolutePath());
exif.setAttribute(ExifInterface.TAG_ORIENTATION, "6");
exif.saveAttributes(); 
```

Are there any downsides to using this approach? It seems to work pretty well as far as I can determine..

# ruby-on-rails-3 - Fog error: nodename nor servname provided

> ID：13655507
> 
> 赞同：3
> 
> 时间：2012-12-01T01:38:28.297
> 
> 标签：ruby-on-rails-3, fog

I have the following set up for FOG basically [right out of the FOG website](http://fog.io/1.7.0/storage/):

```
 def fog_save_file_for(filename, file) 
# create a connection
connection = Fog::Storage.new({
  :provider                 => 'AWS',
  :aws_access_key_id        => '##',
  :aws_secret_access_key    => '##'
})

directory = connection.directories.get('upload_dir')

# list directories
#p connection.directories

# upload that resume
file = directory.files.create(
  :key    => filename,
  :body   => File.open("cv_uploads/provider_cvs/"+filename),
  :public => true
)
end 
```

at run time I get the following error:

```
getaddrinfo: nodename nor servname provided, or not known (SocketError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T19:44:04.053

此问题可能是由于使用了不正确的区域造成的。Carrierwave/Fog 默认为“us-east-1”，这不一定是您的正确区域。要解决此问题，请在 AWS 上查找您的区域（这将不是像“Ireland”这样的国家名称，而是像“eu-west-1”这样的区域），然后修改您的配置文件以包含以下内容：

```
 :region => 'eu-west-1', #or whatever your region is 
```

# php - ZF2: where do I store partialLoop template files?

> ID：13655510
> 
> 赞同：1
> 
> 时间：2012-12-01T01:39:36.567
> 
> 标签：php, view, zend-framework2

Does anyone know where to store a ZF2 partial loop template file?

I have template stored in the relevant view folder under a standard Zend file structure. This worked under ZF1\. But on trying to re-factor code to work with ZF2 I get this error?

```
Fatal error: Uncaught exception 'Zend\View\Exception\RuntimeException' with message
'Zend\View\Renderer\PhpRenderer::render: Unable to render template
 "listingsPartial.phtml"; resolver could not resolve to a file' in C:\zendProject\zf2\vendor\zendframework\zendframework\library\Zend\View\Renderer\PhpRenderer.php:454 Stack trace: #0 C:\zendProject\zf2\vendor\zendframework\zendframework\library\Zend\View\Helper\Partial.php(73): 
Zend\View\Renderer\PhpRenderer->render('listingsPartial...') #1 C:\zendProject\zf2\vendor\zendframework\zendframework\library\Zend\View\Helper\PartialLoop.php(70): Zend\View\Helper\Partial->__invoke('listingsPartial...', Array) #2 [internal function]: Zend\View\Helper\PartialLoop->__invoke('listingsPartial...', Array) #3 C:\zendProject\zf2\vendor\zendframework\zendframework\library\Zend\View\Renderer\PhpRenderer.php(355): 
 call_user_func_array(Object(Zend\View\Helper\PartialLoop), Array) #4 C:\zendProject\zf2\module\Landlord\view\landlord\home\index.phtml(42): 
 Zend\View\Renderer\PhpRenderer->__call
('p in C:\zendProject\zf2\vendor\zendframework\zendframework\library\Zend\View\Renderer\PhpRenderer.php on line 454 
```

My call to the partial loop looks like this:

```
 echo $this->partialLoop('listingsPartial.phtml',$model); 
```

The template and view page on which it is called are stored in the same file. I wondered if I need to list the listingsPartial template somewhere i.e. in the module or config files?

My directory structure looks like this:

```
> zf2  
   -module   
         -moduleName    
            -view
>              -moduleName
>                 -controllerName
>                     - *the view file and partial template file are stored here-* 
```

Any suggestions appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T07:25:04.083

作为提供完整限定路径的替代方法（这可能很麻烦），您可以执行以下两项操作之一：

1）从您的`module.config.php`文件中提供模板文件的路径，如下所示

> ```
> 'view_manager' => array(
>     'template_path_stack' => array(
>         'module' => __DIR__ . '/../view',
>         'partial' => __DIR__ . '/../view/moduleName\controllerName'
>     ),
> ) 
> ```

2）在目录下创建一个目录，`partial`直接调用`view`。将所有模板文件放在此目录中。

```
zf2  
  -module   
     -moduleName    
        -view
          -partial
             - partial template files
          -moduleName
             -controllerName
                 - view files 
```

然后从您的视图脚本中调用您的部分循环，如下所示：

```
echo $this->partialLoop('partial/listingsPartial.phtml',$model); 
```

我喜欢选项 2，因为它将所有部分文件组织到一个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T13:12:33.683

正如我的评论所猜测的那样，错误消息表明模板文件根本无法找到的问题。

为了能够将模板文件加载到`partialLoop()`始终使用基于视图文件夹的完全限定路径。所以正确的用法看起来像

```
$this->partialLoop('Modulename\Controllername\Templatefile.phtml', $model); 
```

# string - Ada：让用户输入字符串（1..10）并用空格填充其余部分

> ID：13655511
> 
> 赞同：8
> 
> 时间：2012-12-01T01:39:38.837
> 
> 标签：string, input, ada

我已经定义

```
subtype String10 is String(1..10); 
```

并且我正在尝试对其进行键盘输入，而无需在按 Enter 之前手动输入空格。我尝试了 get_line() 但由于某种原因，它实际上不会在输出 get put() 命令之前等待输入，而且我还认为它只会将字符串中的任何内容留在那里，而不是用空格填充它。

我知道并使用过 Bounded_String 和 Unbounded_String，但我想知道是否有办法使这项工作。

我试过为它制作一个函数：

```
--getString10--
procedure getString10(s : string10) is
   c : character;
   k : integer;
begin
   for i in integer range 1..10 loop
      get(c);
      if Ada.Text_IO.End_Of_Line = false then
         s(i) := c;
      else
         k := i;
         exit;
      end if;
   end loop;

   for i in integer range k..10 loop
      s(i) := ' ';
   end loop;
end getString10; 
```

但是，在这里，我知道这`s(i)`不起作用，我不认为

```
"if Ada.Text_IO.End_Of_Line = false then" 
```

做我希望它会做的事情。当我寻找实际的方法时，它只是一个占位符。

我已经搜索了几个小时，但 Ada 文档不像其他语言那样可用或清晰。我发现了很多关于获取字符串的信息，但不是我想要的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T03:07:11.167

只需在调用`Get_Line`.

这是我刚刚整理的一个小程序：

```
with Ada.Text_IO; use Ada.Text_IO;
procedure Foo is
    S: String(1 .. 10) := (others => ' ');
    Last: Integer;
begin
    Put("Enter S: ");
    Get_Line(S, Last);
    Put_Line("S = """ & S & """");
    Put_Line("Last = " & Integer'Image(Last));
end Foo; 
```

以及我运行它时得到的输出：

```
Enter S: hello
S = "hello     "
Last =  5 
```

另一种可能性，而不是预先初始化字符串，是在调用*之后*将余数设置为空格`Get_Line`：

```
with Ada.Text_IO; use Ada.Text_IO;
procedure Foo is
    S: String(1 .. 10);
    Last: Integer;
begin
    Put("Enter S: ");
    Get_Line(S, Last);
    S(Last+1 .. S'Last) := (others => ' ');
    Put_Line("S = """ & S & """");
    Put_Line("Last = " & Integer'Image(Last));
end Foo; 
```

对于非常大的数组，后一种方法可能更有效，因为它不会两次分配字符串的初始部分，但实际上差异不大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T02:18:31.163

作为替代方案，使用 any [`function Get_Line`](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-10-7.html)，它返回一个`String`“下限为 1，上限为读取的字符数”的固定长度。该示例[`Line_By_Line`](http://rosettacode.org/wiki/Read_a_file_line_by_line#Ada)使用从文件中读取的变体。如果需要，您可以使用将字符串[`procedure Move`](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-4-3.html)复制`Source`到`Target`字符串；默认情况下，该过程会自动填充空格。

附录：例如，这个`Line_Test`填充`*`并默默地截断右边的长线。

```
with Ada.Integer_Text_IO;
with Ada.Strings.Fixed;
with Ada.Text_IO;

procedure Line_Test is
   Line_Count : Natural := 0;
   Buffer: String(1 .. 10);
begin
   while not Ada.Text_IO.End_Of_File loop
      declare
         Line : String := Ada.Text_IO.Get_Line;
      begin
         Line_Count := Line_Count + 1;
         Ada.Integer_Text_IO.Put(Line_Count, 0);
         Ada.Text_IO.Put_Line(": " & Line);
         Ada.Strings.Fixed.Move(
            Source  => Line,
            Target  => Buffer,
            Drop    => Ada.Strings.Right,
            Justify => Ada.Strings.Left,
            Pad     => '*');
         Ada.Integer_Text_IO.Put(Line_Count, 0);
         Ada.Text_IO.Put_Line(": " & Buffer);
      end;
   end loop;
end Line_Test; 
```

# titanium - Titanium Infinite Scroll : Not working

> ID：13655519
> 
> 赞同：1
> 
> 时间：2012-12-01T01:40:40.783
> 
> 标签：titanium, titanium-mobile, titanium-modules

I am trying to add views to my scroll view when it reaches 40% scroll. This is the way I am doing it :

```
scrollView.add(//add first 10 initial containerView's);
var triggerScroll = true; 
var scrollPercentage = 0; 
scrollView.addEventListener('scroll', function(e) { 
var devHeight = Ti.Platform.displayCaps.platformHeight; 
    var currPos = scrollView.contentOffset.y;
    if(currPos > devHeight){
        currPos = currPos - devHeight;
    }

    scrollPercentage = (currPos)/devHeight * 100;

    if(scrollPercentage > 40 && triggerScroll){
        triggerScroll = false;
        var containerView = myapp.createMyView();
        scrollView.add(containerView);
    }

    //reset scroll to true after the offset reaches end of the screen, so that the 
    //'scroll' event listener only gets called ONCE every time it crosses 40%
    if(scrollPercentage > 101){
        triggerScroll = true;
    }

}); 
```

But its just not working. I am trying to support infinite scroll in my vertical scroll view. Any idea whats going wrong ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T10:08:07.953

我在使用无限滚动时使用下面的模块。它使用 a `TableView`，但我认为您也可以将其应用于 ScrollView 。您需要传入一个`function`将在`TableView`应该加载更多内容的寄存器时调用的参数。

完成加载后，您必须调用`loadingDone`-function 才能`TableView`启动另一个加载序列。

`m_bNoDataFound`当没有更多数据填充到列表中时，该值确保不启动加载序列。

如果希望在滚动期间迟早启动加载序列，您可以更改偏移量（当前`0.75`适用于 Android 和iOS）。`0.90`

```
function TableView( onLoad ) {
    var isAndroid = Ti.Platform.osname === 'android' ? true : false;

    var m_bNoDataFound = false;
    var m_nLastDistance = 0;
    var m_bPulling = false;
    var m_bLoading = false;

    var table = Ti.UI.createTableView( {
        height : Ti.UI.FILL
    } );

    table.addEventListener( 'scroll', function( evt ) {
        //Scroll to load more data
        if( !m_bNoDataFound ) {
            if( isAndroid ) {
                if( !m_bLoading && ( evt.firstVisibleItem + evt.visibleItemCount ) >= ( evt.totalItemCount * 0.75 ) ) {
                    onLoad( true );
                    m_bLoading = true;
                }
            }
            else {
                var nTotal = evt.contentOffset.y + evt.size.height;
                var nEnd = evt.contentSize.height;
                var nDistance = nEnd - nTotal;

                if( nDistance < m_nLastDistance ) {
                    var nNearEnd = nEnd * 0.90;

                    if( !m_bLoading && ( nTotal >= nNearEnd ) ) {
                        onLoad( true );
                        m_bLoading = true;
                    }
                }

                m_nLastDistance = nDistance;
            }
        }
    } );

    function m_fLoadingDone( a_bNoDataFound ) {
        m_bNoDataFound = a_bNoDataFound;

        if( m_bLoading )
            setTimeout( function( ) {
                m_bLoading = false;
            }, 250 );
    }

    return {
        table : table,
        loadingDone : m_fLoadingDone
    };
};

module.exports = TableView; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-18T08:35:54.923

在滚动视图中集成无限滚动时，您必须考虑一些重要的事情：

**1\. 滚动事件被触发很多：**尝试使用 underscoreJS 限制滚动事件回调。

> Throttle 创建并返回一个新的、受限制的传递函数版本，当重复调用时，每等待毫秒最多只会实际调用一次原始函数。对于发生得比您跟得上快的限速事件很有用。有关更多信息，请参阅 underscorejs 文档。

**2\. Android 与 iOS 上的默认和系统单位：Android**上的视图大小使用与视图坐标不同的显示单位。这种单位不匹配会导致无限滚动触发器的错误计算。要解决这个问题，您必须自己获取和设置默认单位。可以在此小部件中找到解决方案（请参阅 getDefaultUnit()）：[https ://github.com/FokkeZB/nl.fokkezb.color/blob/master/controllers/widget.js](https://github.com/FokkeZB/nl.fokkezb.color/blob/master/controllers/widget.js)

**3\. ti-infini-scroll 可以帮助你：**这个库在默认的 Titanium ScrollView 周围创建一个包装器。此包装器包含滚动结束的计算（更新/获取新数据的触发器）。使用这个库时，别忘了实现第 2 条。 [https://github.com/goodybag/ti-infini-scroll](https://github.com/goodybag/ti-infini-scroll)

# syntax-highlighting - Textmate 中丢失的语法突出显示

> ID：13655522
> 
> 赞同：6
> 
> 时间：2012-12-01T01:41:04.020
> 
> 标签：syntax-highlighting, textmate

使用 Textmate，我设法关闭了 php 文件的语法突出显示。经过多次试验和错误，我发现这是在我不小心按下 SHIFT-CTRL-OPTION-D 时发生的（我在 Mac 上，顺便说一句）。我到处寻找并尝试了许多组合键，但我无法弄清楚如何重新启用漂亮的语法突出显示。请帮助我，Textmate 大师，你是我唯一的希望！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T05:36:45.530

按键序列 SHIFT-CTRL-OPTION-D 对应于 Textmate 窗口左下方的语言菜单中的一个选项。语言菜单告诉 Textmate 考虑文件的语言，以便它可以确定正确的语法突出显示。我击中的键序列导致 Textmate 突出显示我的文本，就好像它是一个差异窗口一样。将其切换回PHP，现在效果很好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-29T08:20:04.903

我没有足够的代表来添加评论，因此我将在此处扩展已接受的答案。

`SHIFT+CONTROL+OPTION+<LETTER>`将显示一个菜单，显示所有以 . 开头的语法`<LETTER>`。因此，如果您想要返回 PHP，只需点击`SHIFT+CONTRL+OPTION+P`，然后会弹出以“P”开头的语言列表。您可以通过按相应的数字从列表中选择一个（在我的电脑上，它是`2`）。

# mysql - MySQL - The most occuring for the specific day?

> ID：13655523
> 
> 赞同：2
> 
> 时间：2012-12-01T01:41:15.393
> 
> 标签：mysql, date, count, max

I'm stuck on this problem.

Basically I need to find out for each department how to figure out which days had the most sales made in them. The results display the department number and the date of the day and a department number can appear several times in the results if there were several days that have equally made the most sales.

This is what I have so far:

```
SELECT departmentNo, sDate FROM Department
HAVING MAX(sDate)
ORDER BY departmentNo, sDate; 
```

I tried using the max function to find which dates occurred most. But it only returns one row of values. To clarify more, the dates that has the most sales should appear with the corresponding column called departmentNo. Also, if two dates for department A has equal amount of most sales then department A would appear twice with both dates showing too.

NOTE: only dates with the most sales should appear and the departmentNo.

I've started mySQL for few weeks now but still struggling to grasp the likes of subqueries and store functions. But i'll learn from experiences. Thank you in advance.

UPDATED:

Results I should get:

```
DepartmentNo Column 1: 1 | Date Column 2: 15/08/2000 
DepartmentNo Column 1: 2 | Date Column 2: 01/10/2012 
DepartmentNo Column 1: 3 | Date Column 2: 01/06/1999 
DepartmentNo Column 1: 4 | Date Column 2: 08/03/2002 
DepartmentNo Column 1: nth | Date Column 2: nth date 
```

These are the data:

```
INSERT INTO Department VALUES ('1','tv','2012-05-20','13:20:01','19:40:23','2');
INSERT INTO Department VALUES ('2','radio','2012-07-22','09:32:23','14:18:51','4');
INSERT INTO Department VALUES ('3','tv','2012-09-14','15:15:43','23:45:38','3');
INSERT INTO Department VALUES ('2','tv','2012-06-18','06:20:29','09:57:37','1');
INSERT INTO Department VALUES ('1','radio','2012-06-18','11:34:07','15:41:09','2');
INSERT INTO Department VALUES ('2','batteries','2012-06-18','16:20:01','23:40:23','3');
INSERT INTO Department VALUES ('2','remote','2012-06-18','13:20:41','19:40:23','4');
INSERT INTO Department VALUES ('1','computer','2012-06-18','13:20:54','19:40:23','4');
INSERT INTO Department VALUES ('2','dishwasher','2011-06-18','13:20:23','19:40:23','4');
INSERT INTO Department VALUES ('3','lawnmower','2011-06-18','13:20:57','20:40:23','4');
INSERT INTO Department VALUES ('3','lawnmower','2011-06-18','11:20:57','20:40:23','4');
INSERT INTO Department VALUES ('1','mobile','2012-05-18','13:20:31','19:40:23','4');
INSERT INTO Department VALUES ('1','mouse','2012-05-18','13:20:34','19:40:23','4');
INSERT INTO Department VALUES ('1','radio','2012-05-18','13:20:12','19:40:23','4');
INSERT INTO Department VALUES ('2','lawnmowerphones','2012-05-18','13:20:54','19:40:23','4');
INSERT INTO Department VALUES ('2','tv','2012-05-12','06:20:29','09:57:37','1');
INSERT INTO Department VALUES ('2','radio','2011-05-23','11:34:07','15:41:09','2');
INSERT INTO Department VALUES ('1','batteries','2011-05-21','16:20:01','23:40:23','3');
INSERT INTO Department VALUES ('2','remote','2011-05-01','13:20:41','19:40:23','4');
INSERT INTO Department VALUES ('3','mobile','2011-05-09','13:20:31','19:40:23','4'); 
```

For department1 the date 2012-05-18 would appear because that date occurred the most. And for every department, it should only show the one with the most sales, and if same amount of sales appears on the same date then both will appear, e.g. Department 1 will appear twice with both the dates of max sales.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:33:30.253

我已经根据您提供的表格和两列以及示例数据测试了以下查询。所以，让我为你描述一下。最里面的“PREQUERY”正在按部门和日期进行计数。其结果将首先由部门预订，然后是 DESCENDING ORDER 中的最高计数（因此最高销售计数首先列出），计数发生的日期无关紧要。

接下来，通过利用 MySQL @variables，我预先声明了两个要在查询中使用。@variables 类似于 MySQL 的内联编程。它们可以声明一次，然后更改为应用于正在处理的每个记录。所以，我默认使用虚假的部门价值和零销售计数。

现在，我正在获取 PreQuery 的结果（Dept、#Sales 和 Date），但现在，添加了一个测试。如果它是给定部门的第一个条目，请使用该记录的“NumberOfSales”并放入@maxSales 变量并存储为最终列名“MaxSaleCnt”。下一个列名使用@lastDept 并设置为当前记录的部门编号。因此可以与下一条记录进行比较。

如果下一个记录是同一个部门，那么它只保留前一个记录的 @maxSales 值，从而为每个相应部门的所有条目保持相同的第一个 count(*) 结果。

现在，关闭。我添加了一个 HAVING 子句（不是 WHERE，因为它限制了测试的记录，但是在记录是 PROCESSED 集的一部分之后的 HAVING 进程。所以现在，它将包含所有 5 列。我说只保留那些记录记录的最终 NumberOfSales 与部门的 MaxSaleCnt 匹配。如果有一个、两个或多个日期，没问题，它会根据各个部门返回所有日期。

因此，一个部门可以有 5 个日期，每个日期有 10 个销售额，另一个部门有 2 个日期，每个日期只有 3 个销售额，另一个部门只有 1 个日期，每个日期有 6 个销售额。

```
select
      Final.DepartmentNo,
      Final.NumberOfSales,
      Final.sDate
   from
      (select
          PreQuery.DepartmentNo,
          PreQuery.NumberOfSales,
          PreQuery.sDate,
          @maxSales := if( PreQuery.DepartmentNo = @lastDept, @maxSales, PreQuery.NumberOfSales ) MaxSaleCnt,
          @lastDept := PreQuery.DepartmentNo
       from
          ( select
                  D.DepartmentNo,
                  D.sDate,
                  count(*) as NumberOfSales
               from
                  Department D
               group by
                  D.DepartmentNo,
                  D.sDate
               order by
                  D.DepartmentNo,
                  NumberOfSales DESC ) PreQuery,
          ( select @lastDept := '~',
                   @maxSales := 0 ) sqlvars
       having
          NumberOfSales = MaxSaleCnt ) Final 
```

根据您的最终评论澄清“@”和“~”。“@”表示可以在查询中使用的程序的局部变量（或者在这种情况下是内联 sql 变量）。'~' 只不过是一个简单的字符串，概率永远不会存在于你的任何部门，所以当它与第一个合格的记录进行比较时，做一个 IF('~' = YourFirstDepartmentNumber，然后使用这个答案，否则使用这个答案）。

现在，上面的工作是如何工作的。假设以下是最内层查询返回的数据的结果，按顶部最多的销售额进行分组和排序...稍微改变了您的数据，让我们假设以下内容来模拟 Dept 上的多个日期2个销量相同的...

```
Row#   DeptNo  Sales Date     # Sales
1      1       2012-05-18        3
2      1       2012-06-18        2
3      1       2012-05-20        1

4      2       2012-06-18        4
5      2       2011-05-23        4
6      2       2012-05-18        2
7      2       2012-05-12        1

8      3       2011-06-18        2
9      3       2012-09-14        1 
```

跟踪实际行。以别名“PreQuery”结束的最内层查询按您在此处看到的顺序返回所有行。然后，它与 @ sqlvariables 的声明（对于 MySQL 是特殊的，其他 sql 引擎不这样做）加入（隐含）并以 lastDept = '~' 和 maxSales = 0 开始它们的值（通过 @someVariable 赋值： = 这边的结果）。现在，将上述内容视为

```
DO WHILE WE HAVE RECORDS LEFT
   Get the department #, Number of Sales and sDate from the record.

   IF the PreQuery Record's Department # = whatever is in the @lastDept
      set MaxSales = whatever is ALREADY established as max sales for this dept
      This basically keeps the MaxSales the same value for ALL in the same Dept #
   ELSE
      set MaxSales = the # of sales since this is a new department number and is the highest count
   END IF

   NOW, set @lastDept = the department you just processed to it 
   can be compared when you get to the next record.

   Skip to the next record to be processed and go back to the start of this loop
END DO WHILE LOOP 
```

现在，您需要将@MaxSales 和THEN 的@LastDept 作为返回列的原因是必须为每条记录计算它们以用于与NEXT 记录进行比较。这种技术可以用于许多应用目的。如果你点击我的名字，查看我的标签，然后点击 MySQL 标签，它会显示我已经回复的许多 MySQL 答案。其中许多确实使用@sqlvariables。此外，还有很多其他人非常擅长处理查询，所以不要只看一个地方。对于任何问题，如果您找到一个对您有帮助的好答案，即使您没有发布问题，单击答案旁边的向上箭头也可以帮助其他人指出真正帮助他们理解和解决问题的内容 - - 再次，即使它不是你的问题。祝你的 MySQL 成长好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:08:17.043

我认为这可以通过单个查询来实现，但我对类似功能的经验涉及使用 Oracle 或 MSSQL 的 WITH（如 SQL'99 中定义）。

解决此类问题的最佳（唯一？）方法是分解成更小的组件。（我认为您提供的声明并未提供所有列，因此我将不得不做出一些假设。）

首先，每个组每天的销售额是多少：

```
SELECT department, COUNT(1) AS dept_count, sale_date
FROM orders
GROUP BY department, sale_date 
```

接下来，每个部门的销售额最高是多少

```
SELECT tmp.department, MAX(tmp.dept_count)
FROM (
    SELECT department, COUNT(1) AS dept_count
    FROM orders
    GROUP BY department
) AS tmp
GROUP BY tmp.department 
```

最后，将两者放在一起：

```
 SELECT a.department, a.dept_count, b.sale_date
 FROM (
    SELECT tmp.department, MAX(tmp.dept_count) AS max_dept_count
    FROM (
       SELECT department, COUNT(1) AS dept_count
       FROM orders
       GROUP BY department
    ) AS tmp
    GROUP BY tmp.department
 ) AS a
 JOIN (
    SELECT department, COUNT(1) AS dept_count, sale_date
    FROM orders
    GROUP BY department, sale_date
 ) AS b
    ON a.department = b.department
       AND a.max_dept_count = b.dept_count 
```

# drupal-7 - Drupal 7 - change index.php as a default main page

> ID：13655524
> 
> 赞同：0
> 
> 时间：2012-12-01T01:41:24.560
> 
> 标签：drupal-7

I'm trying to work on my new website Drupal7 while I'm keeping in the hosting my old static website. So I have: index.html (static website. I want to keep for my users) index.php (drupal new installation)

Is there a way to set in drupal this kind of situation? The problem, as you problably can see at this point, is that every time I'm going to a different section I'm being redirected to the .html homepage. I mean for example the admin section is: www.mydomain.com/?q=admin instead of www.mydomain.com/index.php?q=admin What's the easiest way to keep the html static web for my current users while I'm developing my drupal7 website in the "background"?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:01:11.060

我终于找到了解决方案：

DirectoryIndex index.html index.htm index.php
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} q
RewriteRule ^(.*) index.php [L]

# ruby - Nokogiri, how to elegantly grab the value of child elements and attributes

> ID：13655526
> 
> 赞同：1
> 
> 时间：2012-12-01T01:41:45.280
> 
> 标签：ruby, nokogiri

I'm using nokogiri and my object graph when looping looks like:

```
 #<Nokogiri::XML::Element:0x3fe7b34a49c8 name="dt" children=[#
<Nokogiri::XML::Element:0x3fe7b34a4720 name="a" attributes=[#
<Nokogiri::XML::Attr:0x3fe7b34a46bc name="href" value="http://www.example.com">, #
<Nokogiri::XML::Attr:0x3fe7b34a4694 name="add_date" value="1246334352997870">] children=[#
<Nokogiri::XML::Text:0x3fe7b34a39c4 "Example.com Website ">]>, #
<Nokogiri::XML::Text:0x3fe7b34a35f0 "\n">, 
```

I want to load this information into this class:

```
class LinkInfo
  attr_accessor :href, :add_date, :text
end

href = http://www.example.com
add_date = 1246334352997870
text = "example.com website" 
```

Is there an elegant way to do this, I'm currently looping through the children, and doing things with if statements to see if I am at the right tag name etc.

I know in ruby you can see if a value is in a collection using contains?, but I also want to then get the value of that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:17:28.467

假设您的 HTML 与上一个问题相同：

```
<dl><p>
  <dt><h3 ADD_DATE="120ssssss">label 1</H#>
</dl>
<dl><p>
  <dt><a href="http://www.example.com" ADD_DATE="12312323">Text 1</A>
  <dt><a href="http://www.example.com" ADD_DATE="12312323">Text 2</A>
  <dt><a href="http://www.example.com" ADD_DATE="12312323">Text 3</A>
</dl>

<dl><p>
  <dt><h3 ADD_DATE="120ssssss">label 2</H#>
</dl>
<dl><p>
  <dt><a href="http://www.example.com" ADD_DATE="12312323">Text 1</A>
  <dt><a href="http://www.example.com" ADD_DATE="12312323">Text 2</A>
  <dt><a href="http://www.example.com" ADD_DATE="12312323">Text 3</A>
</dl> 
```

然后你可以这样做：

```
doc = Nokogiri.HTML(html)

links = doc.css('dl dt a').map do |link|
  li = LinkInfo.new
  li.href = link['href']
  li.add_date = link['ADD_DATE']
  li.text = link.text
  li
end 
```

# python - 为什么使用 pickle.HIGHEST_PROTOCOL 转储和加载需要更长的时间？

> ID：13655531
> 
> 赞同：1
> 
> 时间：2012-12-01T01:42:16.937
> 
> 标签：python, pickle

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:48:09.697

当文档谈到“新型类”时，它（可能）指的是用户定义的新型类。如果你用它们做一个简单的基准测试，你会发现协议 2 在转储它们时比协议 0 快两倍：

```
>>> import cPickle
>>> import timeit
>>> class MyObject(object):
...     def __init__(self, val):
...             self.val = val
...     def method(self):
...             print self.val
... 
>>> timeit.timeit('cPickle.dumps(MyObject(100), 0)', 'from __main__ import cPickle, MyObject')
17.654622077941895
>>> timeit.timeit('cPickle.dumps(MyObject(100), 1)', 'from __main__ import cPickle, MyObject')
14.536609172821045
>>> timeit.timeit('cPickle.dumps(MyObject(100), 2)', 'from __main__ import cPickle, MyObject')
8.885567903518677 
```

加载也会导致 2 倍的加速：

```
>>> dumped = cPickle.dumps(MyObject(100), 0)
>>> timeit.timeit('cPickle.loads(dumped)', 'from __main__ import cPickle, dumped')
4.6161839962005615
>>> dumped = cPickle.dumps(MyObject(100), 1)
>>> timeit.timeit('cPickle.loads(dumped)', 'from __main__ import cPickle, dumped')
4.351701021194458
>>> dumped = cPickle.dumps(MyObject(100), 2)
>>> timeit.timeit('cPickle.loads(dumped)', 'from __main__ import cPickle, dumped')
2.3936450481414795 
```

在您的特殊情况下，情况可能相反，但如果没有定义`fetch_sku2spu_dict`等的代码，我们就不能说什么。我唯一可以假设的是返回值是 a `dict`，但在这种情况下，协议 2 的速度大约快 6 倍：

```
>>> mydict = dict(zip(range(100), range(100)))
>>> timeit.timeit('cPickle.dumps(mydict, 0)', 'from __main__ import cPickle, mydict')
46.335021018981934
>>> timeit.timeit('cPickle.dumps(mydict, 1)', 'from __main__ import cPickle, mydict')
7.913743019104004
>>> timeit.timeit('cPickle.dumps(mydict, 2)', 'from __main__ import cPickle, mydict')
7.798863172531128 
```

加载速度大约快 2.5 倍：

```
>>> dumped = cPickle.dumps(mydict, 0)
>>> timeit.timeit('cPickle.loads(dumped)', 'from __main__ import cPickle, dumped')
32.81050395965576
>>> dumped = cPickle.dumps(mydict, 1)
>>> timeit.timeit('cPickle.loads(dumped)', 'from __main__ import cPickle, dumped')
13.997781038284302
>>> dumped = cPickle.dumps(mydict, 2)
>>> timeit.timeit('cPickle.loads(dumped)', 'from __main__ import cPickle, dumped')
14.006750106811523 
```

* * *

另一方面，当使用模块的python版本时，我发现：

```
>>> mydict = dict(zip(range(100), range(100)))
>>> timeit.timeit('pickle.dumps(mydict,0)', 'from __main__ import pickle, mydict', number=10000)
2.9552500247955322
>>> timeit.timeit('pickle.dumps(mydict,1)', 'from __main__ import pickle, mydict', number=10000)
3.831756830215454
>>> timeit.timeit('pickle.dumps(mydict,2)', 'from __main__ import pickle, mydict', number=10000)
3.842888116836548 
```

因此，使用协议 1 和 2 转储内置对象似乎比在 python 版本中使用协议 0 慢。但是在加载对象时，协议 0 再次是三个中最慢的：

```
>>> dumped = pickle.dumps(mydict, 0)
>>> timeit.timeit('pickle.loads(dumped)', 'from __main__ import pickle, dumped', number=10000)
2.988792896270752
>>> dumped = pickle.dumps(mydict, 1)
>>> timeit.timeit('pickle.loads(dumped)', 'from __main__ import pickle, dumped', number=10000)
1.2793281078338623
>>> dumped = pickle.dumps(mydict, 2)
>>> timeit.timeit('pickle.loads(dumped)', 'from __main__ import pickle, dumped', number=10000)
1.5425071716308594 
```

正如您在上面的迷你基准中看到的那样，腌制所需的时间取决于许多因素，从您正在腌制的对象类型到您使用的腌制模块的版本。如果没有进一步的信息，我们将无法解释为什么在您的情况下协议 2 慢得多。

# html - My CSS styles are not appearing the same in Firefox as they do in Chrome?

> ID：13655536
> 
> 赞同：0
> 
> 时间：2012-12-01T01:43:23.927
> 
> 标签：html, css

My button is Chrome is appearing [like this](http://puu.sh/1waEt).

This is what I want.

In Firefox, however, it appears [like this](http://puu.sh/1waIv).

```
.mainButton_grey { 
  border: 1px solid BFBFBF; 
  background: -webkit-linear-gradient(top,#DBDBDB,#D1D1D1);
  padding-top:7px;
  text-align:center;
  cursor:pointer;
  width:200px;
  height:22px;
  border-radius:3 3;
  background-color:#0972BD; 
  font-size:11px; 
  font-weight:bold; 
  font-family:Arial;
  color:#404040;
 } 
```

[Jsfiddle](http://jsfiddle.net/rsxth/1/) here.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:50:35.413

只是对渐变的一点建议 - 如果您想要尽可能多的浏览器兼容性，请添加以下内容（只需更改值）。

```
background: -moz-linear-gradient(black, white); /* FF 3.6+ */  
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #000000), color-stop(100%, #ffffff)); /* Safari 4+, Chrome 2+ */  
background: -webkit-linear-gradient(black, white); /* Safari 5.1+, Chrome 10+ */  
background: -o-linear-gradient(black, white); /* Opera 11.10 */  
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#000000', endColorstr='#ffffff'); /* IE6 & IE7 */  
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#000000', endColorstr='#ffffff')"; /* IE8+ */  
background: linear-gradient(black, white); /* the standard fallback for old browsers */ 
```

这里的语法解释：[http ://www.impressivewebs.com/css3-linear-gradient-syntax/](http://www.impressivewebs.com/css3-linear-gradient-syntax/)

这里有一个很棒的渐变生成器：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T01:52:16.957

原因是你没有定义线性渐变：

```
-moz-linear-gradient(top, #DBDBDB, #D1D1D1); 
```

语法可能有点不同；但是每个浏览器都有不同的方式来解释渐变。

以下是每个浏览器的渐变示例：

```
background: rgb(245,246,246); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(245,246,246,1) 0%, rgba(219,220,226,1) 21%, rgba(184,186,198,1) 49%, rgba(221,223,227,1) 80%, rgba(245,246,246,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(245,246,246,1)), color-stop(21%,rgba(219,220,226,1)), color-stop(49%,rgba(184,186,198,1)), color-stop(80%,rgba(221,223,227,1)), color-stop(100%,rgba(245,246,246,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(245,246,246,1) 0%,rgba(219,220,226,1) 21%,rgba(184,186,198,1) 49%,rgba(221,223,227,1) 80%,rgba(245,246,246,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f5f6f6', endColorstr='#f5f6f6',GradientType=0 ); /* IE6-9 */ 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T01:48:10.670

三件事：

1.  从这个网站获取你的渐变 CSS：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)
2.  更新您的边界半径以指定单位`border-radius: 3px 3px`：
3.  添加`#`到您的边框颜色声明：`border: 1px solid #BFBFBF;`

# jsf - 读取托管 bean 中的资源包属性

> ID：13655540
> 
> 赞同：13
> 
> 时间：2012-12-01T01:43:39.793
> 
> 标签：jsf, internationalization, managed-bean

使用`<resource-bundle>`文件，我可以在我的 JSF 页面中包含 i18n 文本。

但是是否可以在我的托管 bean 中访问这些相同的属性，以便我可以使用 i18n 值设置面部消息？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-01T03:55:52.887

假设您已将其配置如下：

```
<resource-bundle>
    <base-name>com.example.i18n.text</base-name>
    <var>text</var>
</resource-bundle> 
```

如果您的 bean 是请求范围的，您可以通过它的注入`<resource-bundle>`as ：`@ManagedProperty``<var>`

```
@ManagedProperty("#{text}")
private ResourceBundle text;

public void someAction() {
    String someKey = text.getString("some.key");
    // ... 
} 
```

或者，如果您只需要一些特定的密钥：

```
@ManagedProperty("#{text['some.key']}")
private String someKey;

public void someAction() {
    // ... 
} 
```

* * *

但是，如果您的 bean 在更广泛的范围内，则`#{text}`在方法本地范围内以编程方式进行评估：

```
public void someAction() {
    FacesContext context = FacesContext.getCurrentInstance();
    ResourceBundle text = context.getApplication().evaluateExpressionGet(context, "#{text}", ResourceBundle.class);
    String someKey = text.getString("some.key");
    // ... 
} 
```

或者，如果您只需要一些特定的密钥：

```
public void someAction() {
    FacesContext context = FacesContext.getCurrentInstance();
    String someKey = context.getApplication().evaluateExpressionGet(context, "#{text['some.key']}", String.class);
    // ... 
} 
```

* * *

您甚至可以通过标准`ResourceBundle`API 来获取它，就像 JSF 本身已经在幕后所做的那样，您只需要在代码中重复基本名称：

```
public void someAction() {
    FacesContext context = FacesContext.getCurrentInstance();
    ResourceBundle text = ResourceBundle.getBundle("com.example.i18n.text", context.getViewRoot().getLocale());
    String someKey = text.getString("some.key");
    // ... 
} 
```

* * *

或者，如果您通过 CDI 而不是 JSF 管理 bean，那么您可以`@Producer`为此创建一个：

```
public class BundleProducer {

    @Produces
    public PropertyResourceBundle getBundle() {
        FacesContext context = FacesContext.getCurrentInstance();
        return context.getApplication().evaluateExpressionGet(context, "#{text}", PropertyResourceBundle.class);
    }

} 
```

并注入如下：

```
@Inject
private PropertyResourceBundle text; 
```

* * *

或者，如果您使用`Messages`JSF 实用程序库[OmniFaces](http://omnifaces.org)的类，那么您只需设置其解析器一次，让所有`Message`方法都使用该包。

```
Messages.setResolver(new Messages.Resolver() {
    public String getMessage(String message, Object... params) {
        ResourceBundle bundle = ResourceBundle.getBundle("com.example.i18n.text", Faces.getLocale());
        if (bundle.containsKey(message)) {
            message = bundle.getString(message);
        }
        return MessageFormat.format(message, params);
    }
}); 
```

另请参阅[javadoc](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Messages.html)和[展示页面](http://showcase.omnifaces.org/utils/Messages)中的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-12T11:15:36.887

另一种可能：

**面孔-config.xml**

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config ...>
  <application>
    <locale-config>
      <default-locale>de</default-locale>
    </locale-config>
    <resource-bundle>
      <base-name>de.fhb.resources.text.backend</base-name>
      <var>backendText</var>
    </resource-bundle>
  </application>
</faces-config> 
```

**你的Bean.java**

```
FacesContext context = FacesContext.getCurrentInstance();
Application app = context.getApplication();
ResourceBundle backendText = app.getResourceBundle(context, "backendText");
backendText.getString("your.property.key"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T02:11:22.900

这是我正在使用的解决方案，不是那么简单，但至少可以工作：

头等舱：

```
package com.spectotechnologies.website.util;

import java.util.Locale;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import org.hibernate.validator.messageinterpolation.ResourceBundleMessageInterpolator;

/**
 *
 * @author Alexandre Lavoie
 */
public class MessageInterpolator extends ResourceBundleMessageInterpolator
{
    public static final String LANGUAGE_TAG_PATTERN = "\\{[^}]*\\}";

    @Override
    public String interpolate(String p_sMessage, Context p_oContext)
    {
        return super.interpolate(replaceMessages(p_sMessage),p_oContext);
    }

    @Override
    public String interpolate(String p_sMessage, Context p_oContext, Locale p_oLocale)
    {
        StringManager.setLocale(p_oLocale);

        return super.interpolate(replaceMessages(p_sMessage),p_oContext,p_oLocale);
    }

    private String replaceMessages(String p_sMessage)
    {
        Matcher oMatcher;
        String sKey;
        String sReplacement;
        StringBuffer sbTemp = new StringBuffer();

        oMatcher = Pattern.compile(LANGUAGE_TAG_PATTERN).matcher(p_sMessage);
        while(oMatcher.find())
        {
            sKey = oMatcher.group().substring(1,oMatcher.group().length() - 1);

            sReplacement = StringManager.getString(sKey);

            if(!sReplacement.startsWith("???"))
            {
                oMatcher.appendReplacement(sbTemp,sReplacement);
            }
        }

        oMatcher.appendTail(sbTemp);

        return sbTemp.toString();
    }
} 
```

二等：

```
package com.spectotechnologies.website.util;

import com.spectotechnologies.util.BundleManager;
import com.spectotechnologies.util.FacesSessionManager;
import java.util.Locale;

/**
 * set-up and interface a BundleManager
 * save the bundleManager into the session
 * @author Charles Montigny
 */
public final class StringManager
{
    /** the session name of this class bundle manager */
    public static final String BUNDLE_MANAGER_SESSION_NAME = "StringManager_BundleManager";

    /**  List of ResourceBundle names to load.
     * Will be load in order.
     * The last ones values may overrite the first ones values. */
    private final static String[] BUNDLE_LIST = {
        "com.spectotechnologies.hibernate.validation.resources.ValidationMessages",
        "com.spectotechnologies.website.general.resources.ValidationMessages",
        "com.spectotechnologies.website.general.resources.General"};

    /** bundle manager */
    private static BundleManager m_oBundleManager = null;

    private static BundleManager getBundleManager()
    {
        if(m_oBundleManager == null)
        {
            // get the bundle into the session
            m_oBundleManager = (BundleManager)FacesSessionManager.getObject(BUNDLE_MANAGER_SESSION_NAME);
            if(m_oBundleManager == null)
            {
                // session was empty, load a new one
                m_oBundleManager = new BundleManager();
                for(int iIndex = 0; iIndex < BUNDLE_LIST.length; iIndex++)
                {
                    m_oBundleManager.addBundle(BUNDLE_LIST[iIndex]);
                }
                // add the bundle to the session
                FacesSessionManager.setObject(BUNDLE_MANAGER_SESSION_NAME, m_oBundleManager);
            }
        }
        return m_oBundleManager;
    }

    /**
     * get a string value in the bundle manager by a string key
     * @param p_sKey the string key
     * @return the value of the string key
     */
    public static String getString(String p_sKey)
    {
        return getBundleManager().getStringValue(p_sKey);
    }

    /**
     * set the locale
     * @param p_oLocale the locale to set
     */
    public static void setLocale(Locale p_oLocale)
    {
        getBundleManager().setLocale(p_oLocale);

        // update the session
        FacesSessionManager.setObject(BUNDLE_MANAGER_SESSION_NAME,
                getBundleManager());
    }
} 
```

在您需要使用属性文件覆盖 BUNDLE_LIST 之后。完成后，像这样使用它：

```
sMessage = StringManager.getString("website.validation.modifySystem.modified"); 
```

如果您有任何疑问，请不要犹豫！

**编辑 ：**

您还需要声明 MessageInterpolator

META-INF/validation.xml

```
<validation-config
    xmlns="http://jboss.org/xml/ns/javax/validation/configuration"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://jboss.org/xml/ns/javax/validation/configuration">
    <message-interpolator>com.spectotechnologies.website.util.MessageInterpolator</message-interpolator>
</validation-config> 
```

# c# - 用于记录方法调用和异常的 WCF 服务属性

> ID：13655541
> 
> 赞同：17
> 
> 时间：2012-12-01T01:44:09.343
> 
> 标签：c#, wcf, logging, custom-attributes, aop

我需要记录 WCF 服务中的每个方法调用以及引发的任何异常。这导致了很多冗余代码，因为每个方法都需要包含类似这样的样板：

```
[OperationContract]
public ResultBase<int> Add(int x, int y)
{
    var parameters = new object[] { x, y }
    MyInfrastructure.LogStart("Add", parameters);
    try
    {
        // actual method body goes here
    }
    catch (Exception ex)
    {
        MyInfrastructure.LogError("Add", parameters, ex);
        return new ResultBase<int>("Oops, the request failed", ex);
    }
    MyInfrastructure.LogEnd("Add", parameters);
} 
```

有没有办法可以将所有这些逻辑封装到一个属性`MyServiceLoggingBehaviorAttribute`中，我可以将其应用于服务类（或方法），如下所示：

```
[ServiceContract]
[MyServiceLoggingBehavior]
public class MyService
{
} 
```

* * *

**注意#1**

我意识到这可以使用[面向方面的编程](https://stackoverflow.com/questions/4133569/how-to-log-method-calls-on-targets-marked-with-an-attribute)来完成，但在 C# 中，唯一的方法是修改字节码，这需要使用像 PostSharp 这样的第三方产品。我想避免使用商业图书馆。

**笔记2**

请注意，Silverlight 应用程序是该服务的主要使用者。

**注意#3**

[在某些情况下， WCF 跟踪日志记录](https://stackoverflow.com/questions/1178256/log-wcf-service-calls-with-parameter-information)是一个不错的选择，但它在这里不起作用，因为如上所述，我需要检查返回值，如果发生异常更改，则需要检查返回值。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-01T01:44:09.343

[是的，可以使用WCF 中内置](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx)的扩展点来封装这种日志记录。实际上有多种可能的方法。我在这里描述的添加了一个`IServiceBehavior`，它使用了一个 custom [`IOperationInvoker`](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ioperationinvoker.aspx)，并且不需要任何 web.config 修改。

这包括三个部分。

1.  创建 的实现`IOperationInvoker`，它将方法调用包装在所需的日志记录和错误处理中。
2.  创建一个`IOperationBehavior`应用从步骤 1 开始的调用程序的实现。
3.  创建一个`IServiceBehavior`，它继承自`Attribute`，并应用第 2 步中的行为。

### 第 1 步 - IOperationInvoker

[IOperationInvoker](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ioperationinvoker.aspx)的关键是`Invoke`方法。我的类将基本调用程序包装在一个 try-catch 块中：

```
public class LoggingOperationInvoker : IOperationInvoker
{
    IOperationInvoker _baseInvoker;
    string _operationName;

    public LoggingOperationInvoker(IOperationInvoker baseInvoker, DispatchOperation operation)
    {
        _baseInvoker = baseInvoker;
        _operationName = operation.Name;
    }

    // (TODO stub implementations)

    public object Invoke(object instance, object[] inputs, out object[] outputs)
    {
        MyInfrastructure.LogStart(_operationName, inputs);
        try
        {
            return _baseInvoker.Invoke(instance, inputs, out outputs);
        }
        catch (Exception ex)
        {
            MyInfrastructure.LogError(_operationName, inputs, ex);
            return null;
        }
        MyInfrastructure.LogEnd("Add", parameters);
    }
} 
```

### 第 2 步 - IOperationBehavior

[IOperationBehavior](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.ioperationbehavior.aspx)的实现只是将自定义调度程序应用于操作。

```
public class LoggingOperationBehavior : IOperationBehavior
{
    public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)
    {
        dispatchOperation.Invoker = new LoggingOperationInvoker(dispatchOperation.Invoker, dispatchOperation);
    }

    // (TODO stub implementations)
} 
```

### 第 3 步 - IServiceBehavior

此实现`IServiceBehavior`将操作行为应用于服务；它应该继承自，`Attribute`以便它可以作为 WCF 服务类的属性应用。对此的实现是标准的。

```
public class ServiceLoggingBehavior : Attribute, IServiceBehavior
{
    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ServiceEndpoint endpoint in serviceDescription.Endpoints)
        {
            foreach (OperationDescription operation in endpoint.Contract.Operations)
            {
                IOperationBehavior behavior = new LoggingOperationBehavior();
                operation.Behaviors.Add(behavior);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-15T06:36:34.627

您可以尝试[Audit.NET](https://github.com/thepirat000/Audit.NET)库及其[Audit.WCF](https://github.com/thepirat000/Audit.NET/blob/master/src/Audit.WCF/README.md)扩展。它可以记录 WCF 服务交互并兼容异步调用。

您需要做的就是使用`AuditBehavior`属性装饰您的 WCF 服务类或方法：

```
[AuditBehavior()]
public class OrderService : IOrderService
{ ... } 
```

WCF 扩展使用`IOperationInvoker`实现`Invoke`和`InvokeBegin`/ `InvokeEnd`。你可以在[这里](https://github.com/thepirat000/Audit.NET/blob/master/src/Audit.WCF/AuditOperationInvoker.cs)查看代码。

# php - Why is the `NAME` attribute considered unsafe?

> ID：13655544
> 
> 赞同：1
> 
> 时间：2012-12-01T01:44:31.557
> 
> 标签：php, attributes, html-parsing, pear, html-sanitizing

I'm passing user-generated HTML into a database and I'm trying to make sure that no malicious code is passed through. One of the steps I'm taking is to run passed code through pear's [HTML_Safe](http://pear.php.net/package/HTML_Safe) class to remove vulnerable markup. However, one thing I've noticed is that the `name` attribute of submitted elements gets removed. Sure enough, when you look at the source code, `name` is one of the few attributes that's blacklisted by default:

[http://pear.php.net/package/HTML_Safe/docs/latest/HTML_Safe/HTML_Safe.html#var$attributes](http://pear.php.net/package/HTML_Safe/docs/latest/HTML_Safe/HTML_Safe.html#var%24attributes)

What's the danger in allowing users to pass values for `name`? How can values for `name` be used to nefarious ends? Any thoughts? If not, I'm tempted to modify the blacklist.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:51:33.450

在 HTML 表单元素中，`name`属性用作标识符。因此，如果您允许，`name`那么某人可能能够用他们自己的一个来覆盖*您的*HTML属性（您可能已经使用过）。`name`找到的第一个匹配`name`通常是 Javascript 或服务器端处理使用的匹配。

然后，这将允许某人利用您可能正在使用的任何可能的 Javascript 或服务器端表单处理来引用`name`找到的第一个匹配属性。

不仅可以使用表单元素`name`，而且它们是最不安全的元素。

另一个覆盖问题是，如果您`getElementsByName`在任何函数中使用 Javascript（如下所述），您最终可能会得到一个不符合您期望的函数。

编辑：一些更正和关于`getElementsByName`问题的说明（如下所述）。

# c++ - c++ XOR字符串键十六进制

> ID：13655548
> 
> 赞同：0
> 
> 时间：2012-12-01T01:44:55.720
> 
> 标签：c++, cryptography, xor

我正在尝试对一些已经加密的文件进行异或。
我知道 XOR 键是 0x14 或 dec(20)。

我的代码除了一件事外有效。所有的“4”都消失了。

这是我的 XOR 函数：

```
void xor(string &nString)    // Time to undo what we did from above :D
{
   const int KEY = 0x14;
   int strLen = (nString.length());
   char *cString = (char*)(nString.c_str());

   for (int i = 0; i < strLen; i++)
   {
    *(cString+i) = (*(cString+i) ^ KEY);
   }
} 
```

这是我的主要部分：

```
ifstream inFile;
inFile.open("ExpTable.bin");
if (!inFile) {
    cout << "Unable to open file";
}

string data;                                 

while (inFile >> data) {
    xor(data);
    cout << data << endl;
}

inFile.close(); 
```

这是加密文件的一部分：

```
$y{bq      //0 move
%c|{       //1 who
&c|qfq     //2 where 
'saufp     //3 guard
 x{wu`}{z  //4 location 
```

但是`x{wu`}{z` 正在返回 //location。它没有显示 4。
注意 X 前面的空间。那应该被解码为 4。

我错过了什么？为什么不显示所有4？`<space> = 4 // 4 = <space>`

* * *

**更新**

这是所有特定转换的列表：

```
HEX(enc) ASCII(dec)
20       4                  
21       5                  
22       6                  
23       7                  
24       0                  
25       1                  
26       2                  
27       3                  
28       <                  
29       =                  
2a       >                  
2b       ?                  
2c       8                  
2d       9                  
2e       :                  
2f       ;                  
30       $
31       %
32       &
33       '
34       
35       !
36       "
37       #
38       ,
39       -
3a       .
3b       /
3c       (
3d       )
3e       *
3f       +
40       T
41       U
42       V
43       W
44       P
45       Q
46       R
47       S
48       \
49       ]
4a       ^
4b       _
4c       X
4d       Y
4e       Z
4f       [
50       D
51       E
52       F
53       G
54       @
55       A
56       B
57       C
58       L
59       M
5a       N
5b       O
5c       H
5d       I
5e       J
5f       K
60       t
61       u
62       v
63       w
64       p
65       q
66       r
67       s
68       |
69       }
6a       
6b       
6c       x
6d       y
6e       z
6f       {
70       d
71       e
72       f
73       g

75       a
76       b
77       c
78       l
79       m
7a       n
7b       o
7c       h
7d       i
7e       j
7f       k
1d       /tab
1e       /newline 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:49:41.087

1.  摆脱所有演员表。
2.  不要`>>`用于输入。

那应该可以解决您的问题。

*编辑：*

```
// got bored, wrote some (untested) code
ifstream inFile;
inFile.open("ExpTable.bin", in | binary);
if (!inFile) {
    cerr << "Unable to open ExpTable.bin: " << strerror(errno) << "\n";
    exit(EXIT_FAILURE);
}

char c;
while (inFile.get(c)) {
    cout.put(c ^ '\x14');
}

inFile.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:51:37.073

您确定它正在打印“//位置”吗？我认为它会打印 '// location' - 注意双斜杠后的空格。您将 0x34 与 0x14 进行异或运算。结果是 0x20，它是一个空格字符。无论如何，您为什么要使用 0x14 异或所有内容？

** 编辑 ** 忽略以上内容；我错过了你的部分问题。真正的答案：

您完全确定 x 之前的字符是 0x20 吗？也许是一些看起来像空格的不可打印字符？我会检查十六进制值。

# ios - 动态UIButton定位？

> ID：13655550
> 
> 赞同：0
> 
> 时间：2012-12-01T01:45:25.910
> 
> 标签：ios, dynamic, uibutton, positioning

我有用户可以在我的游戏中获得的奖励。现在他们只显示他们是否解锁。他们可以获得4种不同的奖励。现在他们可能解锁了 1 个奖励或 2 个或 3 个或 4 个奖励。但是我希望动态定位图像，使其看起来像下面的图像。在下图中，每一行都应与解锁奖励数量相同。 ![在此处输入图像描述](../Images/d7e004b165bcf666099a6b4067414c86.png)

现在，我将如何继续这样做？（注意：图像在 Y 轴上没有变化，它们只是在 X 轴上动态定位，所以不要被图像所迷惑）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:41:06.420

我将创建一个自定义`UIView`子类来执行此操作，以便您可以在可以使用视图的任何地方使用它。

**用法**：

```
MyFlexibleSpacedButtons *myButtons = [[MyFlexibleSpacedButtons alloc] initWithFrame:CGRectMake(50, 50, 250, 60)];
[myButtons setButtonAtIndex:2 hidden:NO];
[myButtons setButtonAtIndex:0 hidden:NO];
[self.view addSubview:myButtons]; 
```

这是示例类：

**MyFlexibleSpacedButtons.h**：

```
#import <UIKit/UIKit.h>

@interface MyFlexibleSpacedButtons : UIView

@property (nonatomic, readonly) NSArray *allButtons;

- (void)setButtonAtIndex:(NSUInteger)index hidden:(BOOL)hidden;

@end 
```

**MyFlexibleSpacedButtons.m**：

```
#import "MyFlexibleSpacedButtons.h"

const NSUInteger    maxButtons          = 9;
const NSUInteger    buttonsPerRow       = 3; // This can not be 0.
const CGFloat       buttonHeight        = 50;
const CGFloat       buttonWidth         = 50;
const CGFloat       spaceBetweenButtons = 10.0;

@interface MyFlexibleSpacedButtons ()
@property (nonatomic, readwrite) NSArray        *allButtons;
@end

@implementation MyFlexibleSpacedButtons

@synthesize allButtons;

- (id)initWithFrame:(CGRect)frame
{
    NSUInteger numberOfRows = ceil((double)maxButtons / (double)buttonsPerRow);
    CGFloat    minHeight    = buttonHeight * numberOfRows + spaceBetweenButtons * (numberOfRows - 1);
    if (frame.size.height < minHeight)
    {
        frame.size.height = minHeight;
    }

    CGFloat minWidth = buttonWidth * maxButtons + spaceBetweenButtons * (maxButtons-1);
    if (frame.size.width < minWidth)
    {
        frame.size.width = minWidth;
    }

    self = [super initWithFrame:frame];
    if (self) {
        // Defaults
        // Uncomment the following line if needed for debugging:
        // self.backgroundColor = [UIColor grayColor];

        // Create the buttons and add them to the array.  Default to hidden buttons
        self.allButtons = [NSArray new];
        for (int i = 0; i < maxButtons; i++)
        {
            UIButton *button   = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            button.hidden      = YES;
            [button setTitle:[NSString stringWithFormat:@"%d", i] forState:UIControlStateNormal];
            [self addSubview:button];
            self.allButtons = [self.allButtons arrayByAddingObject:button];
        }

        [self setButtonFrames];
    }
    return self;
}

- (void)dealloc
{
    allButtons = nil;
}

- (void)setButtonFrames
{
    CGFloat viewHeight                  = self.bounds.size.height;
    CGFloat viewWidth                   = self.bounds.size.width;

    NSUInteger  buttonCount             = [self visibleButtonsCount];
    NSUInteger  numberOfRows            = ceil((double)maxButtons / (double)buttonsPerRow);
    CGFloat     buttonY                 = (viewHeight - buttonHeight * numberOfRows - spaceBetweenButtons * (numberOfRows - 1)) / 2;
    CGFloat     buttonGroupTotalWidth   = buttonCount * buttonWidth + (buttonCount - 1) * spaceBetweenButtons;
    CGFloat     buttonGroupStartingX    = (viewWidth - buttonGroupTotalWidth) / 2;

    // Set frames of buttons
    NSUInteger  visibleButtonIndex      = 0;
    for (int i = 0; i < maxButtons; i++)
    {
        UIButton *button    = [self.allButtons objectAtIndex:i];

        if (!button.hidden)
        {
            CGFloat buttonX     = buttonGroupStartingX + visibleButtonIndex % buttonsPerRow * (buttonWidth + spaceBetweenButtons);
            button.frame        = CGRectMake(buttonX, buttonY, buttonWidth, buttonHeight);
            visibleButtonIndex++;

            if (visibleButtonIndex % buttonsPerRow == 0)
            {
                buttonY = buttonY + buttonHeight + spaceBetweenButtons;
            }
        }
    }
}

- (void)setButtonAtIndex:(NSUInteger)index hidden:(BOOL)hidden
{
    if (index > maxButtons - 1)
    {
        return;
    }

    UIButton *button    = [self.allButtons objectAtIndex:index];
    button.hidden       = hidden;

    [self setButtonFrames];
}

- (NSUInteger)visibleButtonsCount
{
    NSUInteger buttonCount = 0;

    for (UIButton *button in self.allButtons)
    {
        if (!button.hidden)
        {
            buttonCount++;
        }
    }
    return buttonCount;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:11:24.183

我认为最简单和更灵活的方法是使用 UITableView 和带有方法的自定义单元格：`- (void)NumberOfButtonsInCell:(NSUInteger)buttons;`

所以在tableView数据源中调用的时候

您只需将按钮的数量相应地设置为

```
- (void)numberOfButtonsInCell:(NSUInteger)buttons {
  int i;
  for (i = 0; i<buttons;i++) {
    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake((cell.frame.size.widht/buttons)*i, 0, buttonWidth, buttonHeight)];

  button.tag = i;

  [self addSubview:button];

    [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];

  }
}

- (void)buttonPressed:(id)sender {
   UIButton *button = (UIButton*)sender;

   [self.delegate userDidSelectButtonAtIndex:(button.tag)];
   //so your table view resolves the row with [self.tableView indexPathForCell:cell];

} 
```

这样你就可以设置一个方法，对于 `[cell configureButtonAtIndex:index];`

您可以通过几行代码轻松更改所有行为、外观甚至设计。

# c# - 在测试方法时设置接口的值

> ID：13655557
> 
> 赞同：0
> 
> 时间：2012-12-01T01:46:03.817
> 
> 标签：c#, unit-testing, interface

所以我目前正在为我几周前实现的一个类创建一个单元测试。我将首先向您展示我正在学习的课程的特定部分。

```
public void PostEvent(eVtCompId inSenderComponentId, eVtEvtId inEventId, long inEventReference, IF_SerializableData inEventData)
        {
            if(mEventMap.ContainsKey(inEventId))
            {
                mEventMap[inEventId](inSenderComponentId, inEventReference, inEventData);
            }
        } 
```

对于这种方法，我有 4 个参数。第一，一个枚举；2、另一个枚举；第三，长；4、界面。

假设我已经声明/编码了该方法工作所需的所有正确枚举和接口。下一位是单元测试代码的一部分。

```
target.PostEvent(eVtCompId.MainWindowsCommDevice, eVtEvtId.OnLanguageChange, 3, ); 
```

如您所见，对于最后一个参数，我还没有任何东西，因为我不知道应该为接口设置什么值。有任何想法吗？如果您认为需要更多信息，请随时提出问题，我很乐意尽我所能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T02:21:11.883

使用模拟框架（RhinoMock、[Moq](https://stackoverflow.com/tags/moq/info)、...）并模拟界面。起订量样品如下：

```
var serializable = new Mock<IF_SerializableData>();
target.PostEvent(..., serializable.Object); 
```

或者您可以在测试中手动实现接口，即在本地类上。

```
class MySerializable : IF_SerializableData {...}

target.PostEvent(..., new MySerializable()); 
```

# json - 主干处理 json 数组 vs json 对象

> ID：13655559
> 
> 赞同：1
> 
> 时间：2012-12-01T01:46:14.143
> 
> 标签：json, backbone.js

我应该如何处理在 Backbone.Collection 的覆盖解析中作为数组返回的 json？

我将以下内容用于作为对象返回的 json：

```
解析：函数（响应）{
  返回响应。结果；
}

```

当 json 作为数组返回时呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T01:57:20.990

默认情况下，Backbone 需要一个数组。如果数组嵌套在一个对象中，您需要`parse()`像上面所做的那样覆盖。但是，如果响应返回一个数组，您不需要做任何事情（因为这是主干所期望的）。最后，如果您期望两者混合使用（也就是说，有时可能是一个数组，有时可能是一个对象，请参阅 dbaseman 的回答）。

# facebook - 检索 facebookuserID

> ID：13655562
> 
> 赞同：0
> 
> 时间：2012-12-01T01:46:47.763
> 
> 标签：facebook, facebook-graph-api

对于我的 facebook 测验应用程序，我需要收集每个参与用户的 facebookID。我的应用位于另一个应用的 iframe 中。

我放在第三方文件夹中的“facebook-files”。

在我的控制器中，我像这样调用它：

```
 $this->ci->load->file(APPPATH.'/third_party/facebook.php');
  // Connect to Facebook API
  $this->facebook = new Facebook(array('appId' => $this->config->item('appkey'), 'secret' => $this->config->item('appsecret'))); 
```

似乎无法从参与者那里获取 facebookID。

如果尝试这个：

```
try {
    $user_id = $this->facebook->api('/me');
    //$signed_request = $_REQUEST["signed_request"];
    //$user_id = $signed_request['user_id'];
    //print_r( $user_id) ;
} catch ( FacebookApiException $e ) {
    error_log( $e );
    $user_id = 100;
} 
```

$user_id 是 100。你能让我开始如何检索正确的 facebookid 吗？什么是正确的方法？认证过程？

提前致谢！

安斯加尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:15:09.823

要使用 PHP 获取 Facebook ID，您需要使用以下方法`$fb->getUser()`：[https ://developers.facebook.com/docs/reference/php/facebook-getUser/](https://developers.facebook.com/docs/reference/php/facebook-getUser/)

虽然，要使其正常工作，用户需要连接到您的应用程序。这可以通过多种方式实现，但如果您只使用 PHP 来实现，您可以使用该`getLoginUrl`方法获取要求用户接受以使用您的应用程序登录的 URL（https://developers.facebook.com/docs /reference/php/facebook-getLoginUrl/)。这也可以通过 JS SDK 实现（这是我个人的首选方式）

登录对话框的所有文档都可以在这里找到：[https ://developers.facebook.com/docs/opengraph/authentication/](https://developers.facebook.com/docs/opengraph/authentication/)

这里的关键概念是用户是匿名的，直到您要求他们在您的应用程序中连接。

# apache - 如何为 400 错误启用 ErrorDocument？

> ID：13655563
> 
> 赞同：1
> 
> 时间：2012-12-01T01:47:07.360
> 
> 标签：apache, .htaccess, httpd.conf

我已经在我的 ubuntu 机器上安装了 apache2。由于我需要使用子域，我在可用的站点中创建了一个正确的条目，如下所示：

```
<VirtualHost *:80>
ServerName xxx.localhost
DocumentRoot /var/www/
</VirtualHost> 
```

我还启用了 mod_rewrite（并在我的站点可用/默认文件中更改了“AllowOverride All”），但除此之外没有其他任何更改。

我的 .htaccess 文件确实有效，我想处理一些错误代码。使用 404 这样做效果很好，但由于某种原因，其他错误似乎不起作用。我最感兴趣的是处理错误 400：

```
ErrorDocument   400 /400.php
ErrorDocument   404 /404.php 
```

还有什么我应该看的吗？我似乎找不到任何允许 404 而其他错误代码不允许的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T21:21:32.333

如果 php 返回 400 错误，则 php 应该生成错误文档。

使用类似的东西：

```
if( $someError )
{
  http_response_code(400);
  include("{$_SERVER['DOCUMENT_ROOT']}/400.php");
  exit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T01:55:50.410

从[Apache 文档](http://httpd.apache.org/docs/2.0/mod/core.html#errordocument)：

> 尽管可以覆盖大多数错误消息，但在某些情况下，无论 ErrorDocument 的设置如何，都会使用内部消息。特别是，如果检测到格式错误的请求，将立即停止正常的请求处理并返回内部错误消息。这对于防止由错误请求引起的安全问题是必要的。

尝试直接将其添加到`httpd.conf`并重新启动 Apache。

# c++ - 摆脱不必要的输入文件

> ID：13655567
> 
> 赞同：1
> 
> 时间：2012-12-01T01:47:46.107
> 
> 标签：c++

我有以下[文件](https://dl.dropbox.com/u/12189012/init.txt)。我编写了一个 C++ 程序，将其复制并粘贴到另一个程序上（连同其他内容）。但是，我想摆脱它。也就是说，我不想同时分发**可执行**文件和这个文件。我尝试对其内容进行硬编码，但这很乏味，因为存在特殊字符（如`"`、`\n`等），并且字符串变量可能并不总是具有保存所有数据所需的内存。

我还可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:56:29.193

我要建议的第一件事是对文件的内容进行编码。当然是自动的。我可以想象输入它是一场噩梦。话虽如此，那里有各种各样的工具。例如，[bin2h](http://code.google.com/p/bin2h/)。或者，例如，有一个[Qt Resources](http://doc.qt.digia.com/qt/resources.html)框架确实不错，但除非您已经使用 Qt，否则可能不值得引入依赖项。

但是，如果您要处理的任何内容的内容都足够大以至于无法放入内存中，那么您别无他法，只能坚持将该文件与程序一起分发到外部。事实上，这是一种非常常见的做事方式。例如，大多数用于 OS X（和 iOS）的重量级（不仅是）应用程序都是作为“捆绑包”分发的，它只不过是一个包含资源文件和可执行文件的 zip 压缩文件。如果您的目标是促进此类分发实践的平台之一，这也可能是一个解决方案。

希望能帮助到你 ：）

# oracle - 为 RPAS 安装补丁时出现以下错误

> ID：13655568
> 
> 赞同：2
> 
> 时间：2012-12-01T01:47:52.953
> 
> 标签：oracle

我正在 Oracle RPAS 中运行补丁安装并收到以下错误消息：

> java.lang.UnsupportedClassVersionError：com/retek/ride/RideClassLoader（不支持的major.minor 49.0版）

有没有人见过类似的东西？

谢谢！

# c# - 检查listView中第一行列的值？

> ID：13655570
> 
> 赞同：0
> 
> 时间：2012-12-01T01:48:12.713
> 
> 标签：c#, listview

我有这个 if 语句，我在其中检查列是否包含某个项目。我记得有人告诉我，它只会检查特定列中的最后一项。

第 5 列包含数字。

如何使 if 语句适用于第 5 列中的第一项？

```
 foreach (ListViewItem i in listView1.Items)
 {
     if (Convert.ToInt32(i.SubItems[4].Text) <= Convert.ToInt32(tenthousand.ToString()))
     {
         labelVideoViews2.Text = "GREAT";
         labelVideoViews2.ForeColor = System.Drawing.Color.Green;
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:27:08.833

你的意思是这样的吗？

```
getFirstItemInXColumn(4); 
```

数字代表子项的索引。

```
private void getFirstItemInXColumn(int subItemIndex)
    {
        for (int i = 0; i < listView1.Items.Count; i++)
        {
            if (listView1.Items[i].SubItems[subItemID].ToString() != "")
            {
                MessageBox.Show("First Item found at: X:"+subItemID.ToString()+"Y:"+i.ToString()+"is "+ listView1.Items[i].SubItems[subItemID].ToString());
            }
        }
    } 
```

就我而言，我正在检查第 4 个子项列（第 5 列）中的第一项，这不是什么都没有。

# java - 在 Java 中模拟随机事件

> ID：13655574
> 
> 赞同：3
> 
> 时间：2012-12-01T01:48:50.523
> 
> 标签：java

我正在 Absolute Java，第 5 章，练习 3 中做一个练习。面对一个让我感到困惑的问题。
先介绍一下背景吧。

**问题是**：

在 Puzzlevania 的土地上，Aron、Bob 和 Charlie 争论了他们中的哪一个是有史以来最伟大的谜题者。

为了一劳永逸地结束这场争论，他们同意进行一场生死决斗。Aaron 的射手很差，只有 1>3 的概率击中他的目标。Bob 稍微好一点，以 1>2 的概率击中了他的目标。查理是一个专业的射手，从来没有错过。

击中意味着杀死，被击中的人退出决斗。为了弥补枪法上的不公平，三人决定轮流开火，从亚伦开始，然后是鲍勃，然后是查理。这个循环会重复，直到有一个人站着，那个人将成为有史以来最伟大的谜题人。一个明显且合理的策略是让每个人向还活着的最准确的射手射击，理由是这个射手是最致命的，并且有最好的反击机会。

编写一个程序来模拟使用这种策略的决斗。**您的程序应该使用随机数和问题中给出的概率来确定射手是否击中目标。**创建一个名为 Duelist 的类，其中包含决斗者的姓名和射击精度，一个指示决斗者是否还活着的布尔值，以及一个方法 ShootAtTarget ( Duelist target )，如果决斗者击中他的目标（使用随机数和射击精度），否则什么也不做。

一旦您可以模拟单次决斗，请在您的程序中添加一个循环来模拟 10,000 次决斗。计算每个参赛者获胜的次数并打印每个参赛者获胜的概率（例如，对于 Aaron，您的程序可能会输出“Aaron 赢得 3,595>10,000 次决斗或 35.95%”）。另一种策略是让亚伦故意错过他的第一杆。修改程序以适应这种新策略并输出每位参赛者获胜的概率。哪种策略对 Aaron 来说更好：故意错过第一枪还是尝试击中最好的射手？谁最有可能获胜，最好的射手还是最差的射手？

**我的问题是：**

**如何使用随机数和问题中给出的概率来确定射手是否击中目标？**

我不明白为什么要使用随机数和概率，它们之间有什么关系吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T01:51:23.853

用 生成一个随机数（在 范围内`[0,1)`）[`Math.random`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#random%28%29)，然后简单地检查它是否小于给定的概率。所以如果有人有 20% 的准确率，我们会有

```
Math.random() < 0.20 
```

这在 20% 的情况下是正确的。

* * *

> 我不明白为什么要使用随机数和概率，它们之间有什么关系吗？

我认为理解这一点的最好方法是看一个简单的案例：考虑掷硬币。我们将如何模拟这样的事件？嗯，它有 50% 的机会落在尾巴上，有 50% 的机会落在头上。因此，如果我们有一个随机变量，它有 50% 的机会`true`和 50% 的机会`false`，我们可以使用这个变量来运行模拟，因为它类似于实际的硬币翻转本身，有正面`false`和`true`有尾巴（或相反，这真的没关系）。在这种情况下，我们会有类似的东西

```
boolean isHeads = Math.random() < 0.5; 
```

上面写的内容以相同的方式工作，但概率不是 50%。

现在，如果您想知道为什么`Math.random() < 0.5`有 50% 的机会存在`true`，您应该从几何角度考虑它。从to`Math.random()`返回一个*随机*数- 并将此间隔减半。因此，随机数有 50% 的机会落在 的右侧，有 50% 的机会落在左侧。`0``1``0.5``0.5`

由于`Math.random() < 0.5`本质上是在问“是左边的随机数`.5`”，因此它有 50% 的机会`true`和 50% 的机会`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:51:58.423

它们并不意味着完全随机数。要模拟射手“射击”，您应该使用给定的加权概率生成“命中”或“未命中”。

# asp.net - PageIndexChanging 没有绑定

> ID：13655575
> 
> 赞同：0
> 
> 时间：2012-12-01T01:49:30.043
> 
> 标签：asp.net, vb.net

我已`datagridview`链接`dataSource`，此数据源从表中获取数据有 900 万条记录，我正在按名称在此表中搜索，在需要更改绑定数据后，需要`PageIndex`通过此代码研究 900 万条记录：

有什么方法可以更改`PageIndex`而无需再次绑定？

```
Protected Sub GVCenteralSearch_PageIndexChanging(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewPageEventArgs) Handles GVCenteralSearch.PageIndexChanging
    GVCenteralSearch.PageIndex = e.NewPageIndex
    GVCenteralSearch.DataSource = CentralSearch_DS
    GVCenteralSearch.DataBind()
End Sub 
```

注意：这是基于 WebApp (ASP.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:20:09.127

从来没听说过。不过，您确实有一些选择，您可以缓存数据，这样您就不必再次从数据库中获取它。您还可以查看 javascript 替代分页数据（jQuery DataTable 插件）。或者，您可以重新编写查询以仅获取您需要的记录。这仍然需要往返才能显示数据，但不会那么重要。

# android - Android列出首选的左填充值并在数组适配器中隐藏文本视图

> ID：13655577
> 
> 赞同：0
> 
> 时间：2012-12-01T01:49:52.560
> 
> 标签：android

Hi 确实知道以下属性的值：

```
android:minHeight="?android:attr/listPreferredItemHeightSmall" 
```

`android:layout_marginLeft="?android:attr/listPreferredItemPaddingLeft"`

我试过看[http://developer.android.com/reference/android/R.attr.html#listPreferredItemPaddingLeft](http://developer.android.com/reference/android/R.attr.html#listPreferredItemPaddingLeft)

但没有发现任何有用的东西。

我还查看了 attrs.xml 文件，但它只是将其定义如下：

```
<!-- The preferred padding along the left edge of list items. -->
<attr name="listPreferredItemPaddingLeft" format="dimension" />

<!-- The preferred padding along the right edge of list items. -->
<attr name="listPreferredItemPaddingRight" format="dimension" /> 
```

最后一件事，如果我有一个用于双项列表的数组适配器，如果第二行是空白的，如何让第二行消失？我尝试将 textview 的可见性更改为`View.Gone`，但第二行仍然占用空间。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T06:52:23.967

> Hi 确实知道以下属性的值：

`ICS`这些属性从（API 级别 14）开始出现，您可以在平台的`themes.xml`文件中找到它们`ICS`。这些属性定义如下：

```
 <item name="listPreferredItemPaddingLeft">6dip</item>
    <item name="listPreferredItemPaddingRight">6dip</item> 
```

> 最后一件事，如果我有一个用于双项列表的数组适配器，如果第二行是空白的，如何让第二行消失？我尝试将 textview 的可见性更改为 View.Gone，但第二行仍然占用空间。

要回答这个问题，您需要发布列表行的布局文件以及用于自定义适配器的代码（？！）。

# javascript - 了解基本的 onChange 示例

> ID：13655582
> 
> 赞同：0
> 
> 时间：2012-12-01T01:51:16.240
> 
> 标签：javascript, dom

我刚刚浏览了这个关于 DOM 的[MDN 教程。](https://developer.mozilla.org/en-US/docs/Gecko_DOM_Reference/Introduction)在最后一节“测试 DOM API”下，提供了以下代码：

```
<html>
  <head>
    <title>DOM Tests</title>
    <script type="application/javascript">
    function setBodyAttr(attr,value){
    if (document.body) eval('document.body.'+attr+'="'+value+'"');
    else notSupported();
    }
    </script>
  </head>
  <body>
    <div style="margin: .5in; height: 400;">
      <p><b><tt>text</tt>color</b></p>
      <form>
        <select onChange="setBodyAttr('text',
        this.options[this.selectedIndex].value);">
          <option value="black">black
          <option value="darkblue">darkblue
        </select>
        <p><b><tt>bgColor</tt></b></p>
        <select onChange="setBodyAttr('bgColor',
        this.options[this.selectedIndex].value);">
          <option value="white">white
          <option value="lightgrey">gray
        </select>
        <p><b><tt>link</tt></b></p>
        <select onChange="setBodyAttr('link',
        this.options[this.selectedIndex].value);">
          <option value="blue">blue
          <option value="green">green
        </select>  <small>
        <a href="http://www.brownhen.com/dom_api_top.html" id="sample">
        (sample link)</a></small><br>
      </form>
      <form>
        <input type="button" value="version" onclick="ver()" />
      </form>
    </div>
  </body>
</html> 
```

一切都按预期工作，除了链接颜色：在 Chrome 下，只有在您更改文本颜色（即第一个属性）后才会应用链接颜色的更改。所有的改变不应该是立竿见影的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:12:41.470

这不是更改页面上链接颜色的正确方法（应该使用 CSS 完成），并且 body.link 属性在 HTML 版本 4 中已被弃用（http://www.w3schools.com/tags/ att_body_link.asp）。我不能 100% 肯定，但我想说它不起作用的原因是因为 Chrome 是采用网络标准的现代浏览器 - body.link 属性不是标准。

# php - 加拿大邮政编码半径

> ID：13655586
> 
> 赞同：1
> 
> 时间：2012-12-01T01:51:29.450
> 
> 标签：php, mysql, postal-code

我正在使用我在网上找到的以下脚本来获取给定集合坐标之间的所有邮政编码。

使用它时，我担心的是，当某些被抓取的邮政编码大于输入的距离时；不是很多 - 大约 20 公里。

```
function GetPostalCodes($latitude, $longitude, $range) {
    $radius = 3959;
    $north = rad2deg(asin(sin(deg2rad($latitude)) * cos($range / $radius) + cos(deg2rad($latitude)) * sin($range / $radius) * cos(deg2rad(0))));
    $south = rad2deg(asin(sin(deg2rad($latitude)) * cos($range / $radius) + cos(deg2rad($latitude)) * sin($range / $radius) * cos(deg2rad(180))));
    $east = rad2deg(deg2rad($longitude) + atan2(sin(deg2rad(90)) * sin($range / $radius) * cos(deg2rad($latitude)), cos($range / $radius) - sin(deg2rad($latitude)) * sin(deg2rad($north))));
    $west = rad2deg(deg2rad($longitude) + atan2(sin(deg2rad(270)) * sin($range / $radius) * cos(deg2rad($latitude)), cos($range / $radius) - sin(deg2rad($latitude)) * sin(deg2rad($north))));
    $return = DBSelectAllArrays("SELECT postal FROM postalcodes WHERE (latitude <= $north AND latitude >= $south AND longitude <= $east AND longitude >= $west)");
    krsort($return);
    if (empty($return)) return false;
    return $return;
} 
```

为了获得更准确的结果，我是否缺少某些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:29:31.263

蒂姆，您从使用边界框（矩形）开始，然后使用 Haversine 公式，您将得到一个半径（圆），如果您只希望人们在一定距离内，这通常会更好。您没有说明您的目的，但如果您正在寻找可能与您有一定距离的人，您可能需要考虑形状各异的大都市地区。如果是这样，请查看：[加拿大都会区数据](http://greatdata.com/canada-metro-areas)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:10:24.463

鉴于您的评论：

```
$radius = 6371.0; // mean radius of Earth in km 
```

这取自维基百科，但我从其他来源看到它在 +/- 3 公里的公差范围内。我开始质疑您是否使用[了大圆距离](http://www.movable-type.co.uk/scripts/latlong.html)计算，但由于地球表面的曲率，这对于更长距离的精度更为重要。

# java - 使用键值对实现 MaxHeap

> ID：13655588
> 
> 赞同：1
> 
> 时间：2012-12-01T01:51:34.890
> 
> 标签：java, data-structures, noclassdeffounderror, max-heap

我在 Java 中实现了一个 MaxHeap，它根据它的键进行排序。每个键还与一个值相关联。当我尝试运行我的程序时，我得到一个异常：`Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [LMaxHeap$Obj;`

**编辑**此行引发异常：`o = (Obj[])new Object[n+1];`

我该如何解决我的问题？

这是我的代码：

```
public class MaxHeap<Key,Value> {

    Obj [] o;
    int N;
    int size;
    private Comparator<Key> comparator;

    public MaxHeap(int n){
        o = (Obj[])new Object[n+1];
        size =0;
        N = n;
    }

    public class Obj{
        Key k;
        Value v;

        public Obj(Key k, Value v){
            this.k = k;
            this.v = v;
        }
    }

void push(Key k, Value v) {
        Obj temp = new Obj(k,v);
        o[++size] = temp;
        swim(size);
    }

Obj pop() {
    Obj del = o[1];

    Obj temp = o[1];
    o[1] = o[size];
    o[size--] = temp;

    sink(1);
    return del;
}

boolean isLess(int i, int j){
    return ((Comparable<Key>) o[i].k).compareTo(o[j].k) < 0;
    }

void swim(int index){
    Obj temp;
    while(index > 1 && isLess(index/2,index)){
            temp = o[index];
            o[index] = o[index/2];
            o[index/2] = temp;

            index = index/2;
        }
    }

void sink(int index){
    int i;
    Obj temp;
    while(2*index <= size){
        i = 2*index;
        if(i < size && isLess(i, i+1))
            i++;
        if(!isLess(index,i))
            break;  
        temp = o[index];
        o[index] = o[i];
        o[i] = temp;

        index = i;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:04:20.993

查看异常它会给出一个行号。看看你正在投向/从什么。您可以在强制转换之前使用 instanceof 运算符进行测试。

# python - 如何在python中垂直对齐数据？

> ID：13655590
> 
> 赞同：1
> 
> 时间：2012-12-01T01:51:37.177
> 
> 标签：python, file, text-files

```
def createFile(n):
filename = "myFile.txt"
outputFile = open(filename, "w")
outputFile.write("WWWW 2 77777 54 M 888 90 6.7 100 No yyy kk 888 zz F too yy 8.8 123 xxx yyy pp")
outputFile.close() 
```

我会在 python 上获取我在这里的数据，并在我编写它时将它垂直对齐到一个文件。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:07:09.823

我相信最有效的方法是遍历字符串然后写入文件：

```
filename = "myFile.txt"
outputFile = open(filename, "w")
string = "WWWW 2 77777 54 M 888 90 6.7 100 No yyy kk 888 zz F too yy 8.8 123 xxx yyy pp"
outputFile.write("\n".join(item for item in string.split(" ")))
outputFile.close() 
```

输出`myFile.txt`：

```
WWWW
2
77777
54
M
888
90
6.7
100
No
yyy
kk
888
zz
F
too
yy
8.8
123
xxx
yyy
pp 
```

# java - Java Runtime.exec() -- 是否可以将流输出与 wait()/notify() 同步？

> ID：13655595
> 
> 赞同：3
> 
> 时间：2012-12-01T01:52:49.207
> 
> 标签：java, multithreading, process, stream, runtime

我使用 Runtime.exec() 在 Java 中实现了一个简单的外部进程执行器。我已经实现了一个“stream gobbler”类，它消耗来自进程的输出流和错误流的进程输出。我的代码使用 Process.waitFor() 等待外部进程完成，然后我打印进程返回码。

我遇到的问题是进程在“stream gobblers”完成打印之前结束，因此在我的 Java 输出 (System.out) 中，返回的退出代码出现在进程输出/错误行的中间。

我的问题是，是否可以使用 wait()/notify() 来同步 System.out 上的输出，而不是在 while 循环中轮询每个 StreamGobbler 的活动状态？

这是代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

public class RuntimeExecExample
{
    private enum StreamType
    {
        OUTPUT,
        ERROR
    }

    public class MyStreamGobbler extends Thread
    {
        private InputStream is;
        StreamType type;

        public MyStreamGobbler(InputStream is, StreamType type)
        {
            this.is = is;
            this.type = type;
        }

        public void run()
        {
            try
            {
                BufferedReader br = new BufferedReader(new InputStreamReader(is));
                String line=null;
                while ( (line = br.readLine()) != null)
                {
                    System.out.println(type.toString() + ">" + line);
                }
            } 
            catch (IOException ioe)
            {
                ioe.printStackTrace();
            }
        }
    }

    public void executeCommand(String args[])
    {
        try
        {
            Runtime rt = Runtime.getRuntime();

            String commandLine = "";
            for(String cmdItem : args)
            {
                commandLine += " " + cmdItem;
            }
            System.out.println("Exec-ing " + commandLine);

            Process proc = rt.exec(args);
            // any error message?
            MyStreamGobbler errorGobbler = new MyStreamGobbler(proc.getErrorStream(), StreamType.ERROR);
            // any output?
            MyStreamGobbler outputGobbler = new MyStreamGobbler(proc.getInputStream(), StreamType.OUTPUT);
            // kick them off
            errorGobbler.start();
            outputGobbler.start();
            // any error???
            int exitVal = proc.waitFor();

            /*
             * Wait for both to finish before printing exit value
             * IS THERE A WAY TO DO THIS WITH wait()/notify() ??
             */
            while(errorGobbler.isAlive())
                ;
            while(outputGobbler.isAlive())
                ;

            System.out.println("ExitValue: " + exitVal);
        }
        catch (Throwable t)
        {
            t.printStackTrace();
        }

    }

    public static void main(String args[])
    {

        if(args.length < 1)
        {
            System.out.println("USAGE: java RuntimeExecExample <cmd> [<arg1> <arg2> ..]");
            System.exit(1);
        }
        else
        {
            RuntimeExecExample runtimeExecExample = new RuntimeExecExample();
            runtimeExecExample.executeCommand(args);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:12:34.250

在您的主线程中，除了执行 waitFor() 来完成子进程，还执行 errorGobbler.join() 和 outputGobbler.join()，然后您将不需要 while(xGobbler.isAlive())。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:15:42.523

首先，您应该调用`join()`您启动的任何线程。

其次，`System.out`是缓冲的，所以这可以解释它。`System.out.flush()`在阅读内容之前尝试调用。

了解这是否是缓冲问题的一种方法是暂时将调用的进程更改为写入`System.err`而不是`System.out`. `System.err`没有缓冲。

# wordpress - 站点从 http:// 重定向到 http://http//（无冒号）

> ID：13655597
> 
> 赞同：0
> 
> 时间：2012-12-01T01:53:14.913
> 
> 标签：wordpress, .htaccess, http, redirect, cpanel

我们今晚要转移服务器，我们开始了这个过程。新的 DNS 已经解决了一切，但如果您输入站点名称[localreviewengine.com](http://localreviewengine.com)。它踢到`http//localreviewengine.com`（真的，`http://http//localreviewengine.com`）。

什么会导致这种情况？这是一个 wordpress 安装，并且数据库中的 Sitename 和 Home 设置正确，CPanel 中没有重定向，htaccess 看起来不错？

**编辑**：它看起来像[localreviewengine.com/readme.html](http://localreviewengine.com/readme.html)工作虽然..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:01:09.067

观察这个站点的响应头会给黑暗带来一点光明：

```
~ # curl -I "http://localreviewengine.com/"
HTTP/1.1 301 Moved Permanently
Date: Sat, 01 Dec 2012 01:57:11 GMT
Server: Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.0-fips DAV/2 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635
X-Powered-By: PHP/5.2.17
Location: http://http://localreviewengine.com
Content-Type: text/html 
```

如您所见，网络服务器正在重定向到`http://http://localreviewengine.com` 您的配置中的错字/不正确的协议前缀。

检查您的 apache 配置或（很可能）您的文档根目录`.htaccess`

您是否为移动过程添加了任何重定向/重写？例如`we're moving our site, come back when the 5.000 machines are finally up and running again? (hopefully)`

# php - php - 如何在每 5 秒后更改 iframe 不同的 src

> ID：13655598
> 
> 赞同：0
> 
> 时间：2012-12-01T01:53:17.767
> 
> 标签：php, javascript, iframe, dhtml

我已经尝试过以下代码，但它可能会在点击时更改，我想在每 5 秒间隔后更改 iframe 内部。

```
<html>
 <body>
  <iframe id="foo"></iframe>
  <a href="http://www.mydomain.com" target="foo">This page</a>
 </body>
</html> 
```

基本上我的想法是我的页面将显示在 iframe 中，这 5 个网页将在每 5 秒间隔后一个接一个地更改。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:57:01.923

这将做到：

```
var urls = ["http://www.google.com", "http://www.example.com"];
var i = 0;

function changeSrc() {
   if (urls.length > i) {
      document.getElementById("foo").src = urls[i];
      i++;
      setTimeout(function() {
         changeSrc();
      }, 5000);
   }
}
changeSrc(); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:14:52.457

基于@Matthew Dean 的回答：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Fouad Ali</title>
<script>
var links = ["http://www.example.com/page","http://www.example.com/anotherpage"];
var i = 0;
var renew = setInterval(function(){
    document.getElementById("foo").src = links[i];        
    if(links.length == i){
        i = 0;
    }
    else i++;
},5000);
</script>
</head>

<body>
<iframe id="foo" src="http://example.com"></iframe>
</body>
</html> 
```

重要提示：并非所有网站都可以在 iframe 中使用。确保您放入`links`数组中的网站允许在 iframe 中使用。

# javascript - 当两个元素到窗口顶部的距离相同时运行命令

> ID：13655606
> 
> 赞同：0
> 
> 时间：2012-12-01T01:53:58.653
> 
> 标签：javascript, jquery, html, css, offset

当两个元素与浏览器顶部的距离相同时，我想做一些事情。

我试过这个：

```
var scrollTop      =   $(window).scrollTop(),
     _menuOffset    =   $('#2').offset().top,
     _aboutOffset   =   $('#1').offset().top;

distance1      = (_menuOffset - scrollTop);
distance2      = (_aboutOffset - scrollTop);

if (distance1 == distance2 ) {
    alert('test');
}​ 
```

小提琴：http: [//jsfiddle.net/Rxs2m/135/](http://jsfiddle.net/Rxs2m/135/)

希望有人可以提供帮助。

**谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:04:10.450

[http://jsfiddle.net/Rxs2m/135/](http://jsfiddle.net/Rxs2m/135/)

ID 不正确，因此不`.offset()`返回任何内容（并`.offset().top`导致错误）。

更改为`$("#en")`和`$("#to")`。

最后，将所有内容包装在回调中，`$(window).scroll()`并在每次窗口滚动时检查它。

# javascript - 匿名函数中的“this”关键字

> ID：13655607
> 
> 赞同：2
> 
> 时间：2012-12-01T01:54:01.203
> 
> 标签：javascript, this, anonymous-function

有人可以告诉我`this.onSubmit`以下代码中指的是什么对象吗？

```
(function () {
    var _d = vjo.dsf.EventDispatcher;
    var _r = vjo.Registry;

    function $1(p0) {
        return function (event) {
            return this.onSubmit(p0, event);
        };
    };
})(); 
```

如果此示例没有足够的上下文，我深表歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T01:57:13.937

在 JavaScript 中， 的值`this`是动态设置的。所以要知道它的价值，你需要知道函数是如何被调用/使用的。

所以一般的答案`this`是指任何被设置为`this`执行上下文的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T02:00:04.897

函数运行时绑定的任何对象。

例子：

```
(function() {
    ....
    function $1(p0) {
         return function (event) {
            return this.onSubmit(p0, event);
        };
    };

    var testObj = {
        foo: 'bar',
        onSubmit: function(x,y) { console.log(x,y); }
    };

    var func = $1('moep');

    func.call(testObj, 'hrhr'); // logs >> moep, hrhr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T02:00:27.097

这里将是窗口对象。`console.log(this)`您可以通过添加之前的行来确认这一点。

# google-maps-api-3 - 界限谷歌地图

> ID：13655608
> 
> 赞同：1
> 
> 时间：2012-12-01T01:54:08.803
> 
> 标签：google-maps-api-3, viewport, bounds, fitbounds

我的谷歌地图 API 地图缩放显示谷歌地点搜索后添加的所有标记。在移动地图上，这可能需要一些时间来加载，并且作为骑自行车者的这个应用程序，我更喜欢只在视口中显示结果。我读过的大多数研究表明，不可能只在视口内返回结果。我是否可以在添加标记后保持地图边界不变？如果它只向我显示添加到当前边界的标记，那将是很棒的，除非只有一个标记返回，然后它应该缩放到该标记。因此，搜索诸如比萨饼之类的一般事物将在当前视口中显示许多比萨饼店，而无需平移或缩放。搜索特定地址将缩放到该标记，即使它位于视口之外。

```
 var input = document.getElementById('target');
 var searchBox = new google.maps.places.SearchBox(input);
 var bounds = map.getBounds();
 searchBox.setBounds(bounds);
 var markers = [];
 service = new google.maps.places.PlacesService(map);

 google.maps.event.addListener(searchBox, 'places_changed', function() {
     var places = searchBox.getPlaces();
     // alert("getPlaces returns "+places.length+" places");

     for (var i = 0; i < gmarkers.length; i++) {
       gmarkers[i].setMap(null);
     }

     gmarkers = [];
     var bounds = new google.maps.LatLngBounds();

     for (var i = 0, place; place = places[i]; i++) {
       var place = places[i];
       createMarker(place);
       bounds.extend(place.geometry.location);
     }
     map.fitBounds(bounds);
     // if (markers.length == 1) map.setZoom(17);
   });

   google.maps.event.addListener(map, 'bounds_changed', function() {
     var bounds = map.getBounds();
     searchBox.setBounds(bounds);
   });

   ib = new InfoBox({}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:32:49.663

你的问题的答案：

*   我可以在添加标记后保持地图边界不变吗？

是是的。正如你所说，涉及删除 map.fitBounds。

要使地图居中并放大单个地址，请为此使用地理编码器（单独实施）或检查结果数，如果是一个，则将地图居中于结果上，如果有建议的视口在结果，使用它来居中和缩放地图[我认为是 map.fitBounds(place.geometry.viewport)]。

# java - 有没有办法将标签代码放入 servlet 代码中？

> ID：13655611
> 
> 赞同：1
> 
> 时间：2012-12-01T01:54:32.840
> 
> 标签：java, servlets, taglib

我有这个由我的老板创建的自定义标签。

```
<lib:Menu user_id=\"<%=  user.getId()%>\" />\n 
```

我目前正在尝试将存在于 jsp 文件中的 HTML 代码移动到 servlet 文件中。问题是我不知道如何调用自定义库标签来获取他创建的 HTML。

有没有办法调用标签来获取 HTML？有没有办法从标签中获取 HTML？

# jquery - :last 不仅删除最后一个元素

> ID：13655612
> 
> 赞同：1
> 
> 时间：2012-12-01T01:54:33.140
> 
> 标签：jquery

我正在尝试创建自己的搜索名称，类似 facebook 的搜索（自动完成），就像在 facebook 的撰写消息中一样。我的整个脚本位于[http://jsfiddle.net/6YbrP/4/](http://jsfiddle.net/6YbrP/4/)。

问题是我被困在这段代码中：

```
.keyup(function(e){
            if(e.keyCode == 8 && $(this).val() == ''){
                $('#itemcontainer div.detailwrapper:last').remove();
            }
        }); 
```

它确实删除了最后一个元素，如果我只是单击该框，然后按退格按钮。但不是当我在框内单击，然后在框外单击，再次在框内单击，然后重新按退格键时。它删除/删除了最后一个元素，而不仅仅是最后一个元素。这怎么可能发生？我怎么能修好它？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:21:27.010

正如Felix Kling所说 - 这是因为您绑定了多个keyup，固定代码：

```
if ($('#itemcontainer').html().trim()) {
    $('#searchnama').removeAttr('placeholder');
} else {
    $('#searchnama').attr('placeholder', 'Item');
}

$('.listcontainer').bind('click', function() {
    $('#searchnama').focus();
});
$('#searchnama').keyup(function(e) {
    if (e.keyCode == 8 && $(this).val() == '') {
        $('#itemcontainer div.detailwrapper:last').remove();
    }

    if ($('#itemcontainer').html().trim()) {
        $('#searchnama').removeAttr('placeholder');
    } else {
        $('#searchnama').attr('placeholder', 'Item');
    }
});
$('.remove').bind('click', function() {
    $(this).closest('div.detailwrapper').remove();
});​ 
```

你也有常见的设计错误， - 你总是使用绝对选择器，它可能会在代码上造成很多混乱，只是比这个大一点。

# c# - Unicode 到 Mazovia 编码冗余字符

> ID：13655614
> 
> 赞同：3
> 
> 时间：2012-12-01T01:54:57.437
> 
> 标签：c#, unicode, encoding, character-encoding, char

我已经处理了几个小时。我正在将一个包含波兰变音符号`ąśółńźć`等的字符串保存到一个文件中，但是我必须用来读取该文件的软件只能读取[Mazovia 编码](http://en.wikipedia.org/wiki/Mazovia_encoding)，这是一种非常古老的编码，并且不受[Microsoft Encoding 类](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)的支持。

.Net 字符串由 UTF-16 字符组成，因此我一直在使用此代码从 Unicode 转换为 Mazovia。

```
string rekord = (linia.Substring(0, linia.Length - 1)) + Environment.NewLine;
string rekordMazovia = Kodowanie.UnicodeNaMazovia(rekord);
File.AppendAllText(sciezka, rekordMazovia);
public static class Kodowanie {
  public static string UnicodeNaMazovia(string tekst) {
    return tekst
    .Replace((char)0x104, (char)0x8F) //Ą
    .Replace((char)0x106, (char)0x95) //Ć
    .Replace((char)0x118, (char)0x90) //Ę
    .Replace((char)0x141, (char)0x9C) //Ł
    .Replace((char)0x143, (char)0xA5) //Ń
    .Replace((char)0xD3, (char)0xA3) //Ó
    .Replace((char)0x15A, (char)0x98) //Ś
    .Replace((char)0x179, (char)0xA0) //Ź
    .Replace((char)0x17B, (char)0xA1) //Ż
    .Replace((char)0x105, (char)0x86) //ą
    .Replace((char)0x107, (char)0x8D) //ć
    .Replace((char)0x119, (char)0x91) //ę
    .Replace((char)0x142, (char)0x92) //ł
    .Replace((char)0x144, (char)0xA4) //ń
    .Replace((char)0xF3, (char)0xA2) //ó
    .Replace((char)0x15B, (char)0x9E) //ś
    .Replace((char)0x17A, (char)0xA6) //ź
    .Replace((char)0x17C, (char)0xA7); //ż            
  }
} 
```

一切都会好起来的，除非在应用程序中读取生成的文件后，我`>`在每个变音符号之前都会得到一个冗余字符。看起来像这样![http://imgur.com/q7DZo](../Images/25c22b3bcbcc9be2746cb24e03115c4d.png)

如何摆脱它？如何做得更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T09:51:22.997

Mazovia 编码类似于代码页 437，但它在某些位置有不同的字母，因此您不能使用 437。

如果您实现 MazoviaEncoding，您可以轻松使用

```
Encoding encoding = new MazoviaEncoding();
String output = "ąśółńźć";
File.WriteAllText(@"test.txt", output, encoding);
//File.AppendAllText(@"test.txt", output, encoding);
// will work just as well, just pass the encoding as 3rd parameter 
```

该文件将包含：

```
0x86 0x9E 0xA2 0x92 0xA4 0xA6 0x8D 
```

根据[http://en.wikipedia.org/wiki/Mazovia_encoding哪个是正确的](http://en.wikipedia.org/wiki/Mazovia_encoding)

然后可以像`Encoding`C# 中的其他实现一样使用该实现。例如，读回文件也可以：

```
Encoding encoding = new MazoviaEncoding();
String result = File.ReadAllText(@"test.txt", encoding); 
```

这是我的实现：

```
using System.Collections.Generic;
using System.Text;

namespace System.Text {
    class MazoviaEncoding : Encoding
    {
        private static int[] codePoints =  {
            0x0000,0x0001,0x0002,0x0003,0x0004,0x0005,0x0006,0x0007,0x0008,0x0009,0x000A,0x000B,0x000C,0x000D,0x000E,0x000F
            ,0x0010,0x0011,0x0012,0x0013,0x0014,0x0015,0x0016,0x0017,0x0018,0x0019,0x001A,0x001B,0x001C,0x001D,0x001E,0x001F
            ,0x0020,0x0021,0x0022,0x0023,0x0024,0x0025,0x0026,0x0027,0x0028,0x0029,0x002A,0x002B,0x002C,0x002D,0x002E,0x002F
            ,0x0030,0x0031,0x0032,0x0033,0x0034,0x0035,0x0036,0x0037,0x0038,0x0039,0x003A,0x003B,0x003C,0x003D,0x003E,0x003F
            ,0x0040,0x0041,0x0042,0x0043,0x0044,0x0045,0x0046,0x0047,0x0048,0x0049,0x004A,0x004B,0x004C,0x004D,0x004E,0x004F
            ,0x0050,0x0051,0x0052,0x0053,0x0054,0x0055,0x0056,0x0057,0x0058,0x0059,0x005A,0x005B,0x005C,0x005D,0x005E,0x005F
            ,0x0060,0x0061,0x0062,0x0063,0x0064,0x0065,0x0066,0x0067,0x0068,0x0069,0x006A,0x006B,0x006C,0x006D,0x006E,0x006F
            ,0x0070,0x0071,0x0072,0x0073,0x0074,0x0075,0x0076,0x0077,0x0078,0x0079,0x007A,0x007B,0x007C,0x007D,0x007E,0x007F
            ,0x00C7,0x00FC,0x00E9,0x00E2,0x00E4,0x00E0,0x0105,0x00E7,0x00EA,0x00EB,0x00E8,0x00EF,0x00EE,0x0107,0x00C4,0x0104
            ,0x0118,0x0119,0x0142,0x00F4,0x00F6,0x0106,0x00FB,0x00F9,0x015A,0x00D6,0x00DC,0x00A2,0x0141,0x00A5,0x015B,0x0192
            ,0x0179,0x017B,0x00F3,0x00D3,0x0144,0x0143,0x017A,0x017C,0x00BF,0x2310,0x00AC,0x00BD,0x00BC,0x00A1,0x00AB,0x00BB
            ,0x2591,0x2592,0x2593,0x2502,0x2524,0x2561,0x2562,0x2556,0x2555,0x2563,0x2551,0x2557,0x255D,0x255C,0x255B,0x2510
            ,0x2514,0x2534,0x252C,0x251C,0x2500,0x253C,0x255E,0x255F,0x255A,0x2554,0x2569,0x2566,0x2560,0x2550,0x256C,0x2567
            ,0x2568,0x2564,0x2565,0x2559,0x2558,0x2552,0x2553,0x256B,0x256A,0x2518,0x250C,0x2588,0x2584,0x258C,0x2590,0x2580
            ,0x03B1,0x00DF,0x0393,0x03C0,0x03A3,0x03C3,0x00B5,0x03C4,0x03A6,0x0398,0x03A9,0x03B4,0x221E,0x03C6,0x03B5,0x2229
            ,0x2261,0x00B1,0x2265,0x2264,0x2320,0x2321,0x00F7,0x2248,0x00B0,0x2219,0x00B7,0x221A,0x207F,0x00B2,0x25A0,0x00A0
        };

        private static Dictionary<char, byte> unicodeToByte;

        static MazoviaEncoding()
        {
            unicodeToByte = new Dictionary<char, byte>();

            for (int i = 0; i < codePoints.Length; ++i)
            {
                unicodeToByte.Add((char)codePoints[i], (byte)i);
            }

        }

        public override int GetMaxByteCount(int charCount)
        {
            if (charCount < 0)
            {
                throw new ArgumentOutOfRangeException();
            }
            return charCount;
        }

        public override int GetMaxCharCount(int byteCount)
        {
            if (byteCount < 0)
            {
                throw new ArgumentOutOfRangeException();
            }
            return byteCount;
        }

        public override int GetBytes(char[] chars, int charIndex, int charCount, byte[] bytes, int byteIndex)
        {
            if( chars == null || bytes == null ) {
                throw new ArgumentNullException();
            }
            if( charIndex + charCount > chars.Length ||
                charIndex < 0 ||
                byteIndex < 0 ||
                byteIndex + charCount > bytes.Length
                ) {
                throw new ArgumentOutOfRangeException();
            }

            int total = 0;
            int j = 0;
            for (int i = charIndex; i < charIndex + charCount; ++i)
            {
                char cur = chars[i];
                byte asMazovia;
                if (!unicodeToByte.TryGetValue(cur, out asMazovia))
                {

                    asMazovia = (byte)0x003F; // "?"
                }
                total++;
                bytes[j+byteIndex] = asMazovia;
                j++;
            }
            return total;
        }

        public override int GetChars( byte[] bytes, int byteIndex, int byteCount, char[] chars, int charIndex )
        {
            if (chars == null || bytes == null)
            {
                throw new ArgumentNullException();
            }
            if ( byteIndex + byteCount > bytes.Length ||
                charIndex < 0 ||
                byteIndex < 0 ||
                charIndex + byteCount > chars.Length
                )
            {
                throw new ArgumentOutOfRangeException();
            }

            int total = 0;
            int j = 0;
            for (int i = byteIndex; i < byteIndex + byteCount; ++i)
            {
                byte cur = bytes[i];
                char decoded = (char)codePoints[cur];
                total++;
                chars[charIndex + j] = decoded;
                j++;

            }
            return total;
        }

        public override int GetByteCount(char[] charArray, int index, int count)
        {
            if (charArray == null)
            {
                throw new ArgumentNullException();
            }

            if (index + count <= charArray.Length && index >= 0 && count >= 0)
            {
                return count;
            }
            else
            {

                throw new ArgumentOutOfRangeException();
            }
        }

        public override int GetCharCount( byte[] bytes, int index, int count )
        {
            if (bytes == null)
            {
                throw new ArgumentNullException();
            }

            if (index < 0 || count < 0 || index + count > bytes.Length)
            {
                throw new ArgumentOutOfRangeException();
            }

            return count;
        }

    }
} 
```

# opencart - 根据货币选择更改页面数据

> ID：13655617
> 
> 赞同：1
> 
> 时间：2012-12-01T01:55:29.177
> 
> 标签：opencart

我一直在尝试创建基于活动货币代码交换表数据的简单脚本。这是一个尺码表（在 product.tpl 上）。

**前提：** 如果“USD”处于活动状态，则显示表格“A”（英寸），否则显示表格“B”（厘米）。

我是 php/js 的老手，但足以让我陷入困境。:) 我按照这个线程将货币代码变量带入“product.tpl”：[如何让货币显示在 opencart 的产品页面上？](https://stackoverflow.com/questions/12919496/how-to-get-currency-to-show-on-product-page-in-opencart)

现在我只是在敲我的头，我找不到合适的变量来创建交换......我尝试了一个简单的 If/Else 脚本的多种变体，基本上是这样的：

```
<?php if ($currency['code'] == $currency_code) { ?>
    <td>15.5"</td>
    <td>25"</td>
<?php } else { ?>
    <td >40cm</td>
    <td >64cm</td>
<?php } ?> 
```

任何人都知道脚本可能是什么样子的吗？还是我在这里完全对错误的猫吠叫？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:26:16.107

只需使用货币代码的会话值...

```
<?php if($this->session->data['currency'] == 'USD') : ?>
<td>15.5"</td>
<td>25"</td>
<?php else: ?>
<td>40cm</td>
<td>60cm</td>
<?php endif; ?> 
```

# php - .htaccess ：将所有 http 请求重定向到一个没有 404 的文件。代码

> ID：13655618
> 
> 赞同：0
> 
> 时间：2012-12-01T01:55:36.713
> 
> 标签：php, apache, .htaccess, url-rewriting

我想将所有 http 请求重定向到一个文件`controller.php`

```
# My .htaccess
RewriteCond %{REQUEST_URI}  !\.(.+)$
RewriteRule ^(.*)([^/])$ http://%{HTTP_HOST}/$1$2/ [L,R=301]
RewriteRule ^([a-zA-Z0-9_-]+)$      controller.php 
```

考虑这个请求`http://mysite.com/en-US/messages/new/`
，我有 php 脚本来获取所有 url 参数并处理它们
`controller.php`，但 Apache 也发送了 404 响应代码。

**如何制定一个好的重写规则来防止 404 响应？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:29:47.403

您的正则表达式不包含`/`字符。

```
RewriteRule ^([a-zA-Z0-9_-/]+)$      controller.php 
```

# javascript - 加载 AJAX 调用返回的文档

> ID：13655625
> 
> 赞同：1
> 
> 时间：2012-12-01T01:56:51.253
> 
> 标签：javascript, jquery, python, django, document

我正在开发一个 Django 应用程序，但我遇到了 ajax 和 jQuery 的问题。

在我的页面上，我有一个在单击按钮时调用的 javascript 函数。此函数的目的是对 django 视图方法进行 ajax 调用。在这种方法中，一些逻辑是使用通过 AJAX 调用发送的一些 POST 数据完成的，如果操作成功，我想返回另一个页面，否则，我只是希望用户留在同一页面上，并且通知将使用 javascript 呈现给用户。

下面是一段代码：

(Javascript)

```
function makeCall() {

    $.post(url, data, function(data) {

          if(data=="ERROR") {

             alert("THERE WAS AN ERROR");

          } else {

             //send user to a new page. 
          }
    });
} 
```

(Django-Python)

```
def viewMethod(request):

   //LOGIC...  Renders page using POST data.

    if success:

        //... preparing the response.

        return HttpResponse(t.render(c))
    else:

        return HttpResponse("ERROR", content_type="text/plain") 
```

在操作成功的情况下，如何使用 javascript/jQuery 向用户呈现响应页面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:59:18.187

在 viewMethod 中，您可以使用 POST 数据渲染页面，但不能渲染整个页面，也就是说，您将响应的页面只有 body 标签而不是 head。

```
if success:
    return HttpResponse('<body><p>SUCCESS</p></body>') 
```

并且在前端

```
$.post(url, data, function(data) {

      if(data=="ERROR") {

         alert("THERE WAS AN ERROR");

      } else {

         $('tip').append(data)
      }
}); 
```

如果你仍然使用整个页面，它的形式是这样的： ，你可以使用 window.open 或 iframe 标签来处理它。但我建议只回复一些 html 片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:17:38.467

除非 Django 有一些特殊性，否则应该没有什么可以阻止 POST 请求与 GET 请求的行为不同。两者都应该能够返回 URL 字符串。

如果您希望接收 URL 并替换当前文档，请尝试以下操作：

```
function makeCall(url, data) {
    function newPageError(jqXHR, textStatus, errorThrown) {
        alert(textStatus + ' : ' + errorThrown);
    }
    $.post(url, data).success(function(data, textStatus, jqXHR) {
        if(!data.match(/^http/)) {
            newPageError(jqXHR, data, textStatus + ' - but error indicated');
        } else {
            location.href = data;
            //location.replace(data);//alternative; gives different Back button behaviour
        }
    }).fail(newPageError);
} 
```

或者，如果您希望接收 HTML 片段并在当前文档中工作，请尝试以下操作：

```
function makeCall(url, data) {
    function newPageError(jqXHR, textStatus, errorThrown) {
        alert(textStatus + ' : ' + errorThrown);
    }
    $.post(url, data).success(function(data, textStatus, jqXHR) {
        if(data.toUpperCase() == 'ERROR') {
            newPageError(jqXHR, 'ERROR', textStatus + ' - but error indicated');
        } else {
            $("#myDiv").html(data); //change jQuery selector to suit
        }
    }).fail(newPageError);
} 
```

笔记：

*   在这两种情况下，都会处理两种类型的错误；成功响应中指示的错误，以及总的 HTTP 错误（例如内部服务器错误）。
*   在这两种情况下，都假定将 url`url`和查询参数`data`传递给函数。
*   在第一种情况下，需要修改服务器端脚本以返回 URL。

# wpf - 在 VB 中清除 ComboBox - WPF

> ID：13655631
> 
> 赞同：2
> 
> 时间：2012-12-01T01:57:18.457
> 
> 标签：wpf, visual-studio-2010, combobox

当用户在我的 ListView 中选择一个新项目时，我有一个需要刷新的组合框。我遇到的问题是

```
comboboxProblems.Items.Clear() 
```

它抛出一个错误：

```
"Specified argument was out of the range of valid values. Parameter name: index" 
```

只要用户在选择新的 ListView 项之前不更改 comboboxProblems 中的选择，刷新就可以正常工作。但是，如果 comboboxProblems 选择发生变化，然后选择了一个新的 ListView 项目，那么它将引发错误。

我尝试了一些不同的东西，但没有一个奏效。我尝试过的一个例子是：

```
If comboboxProblems.SelectedIndex <> -1 Then
            comboboxProblems.Items.RemoveAt(comboboxProblems.SelectedIndex)
            comboboxProblems.SelectedIndex = -1
            comboboxProblems.Items.Clear() 
```

我已经尝试了所有我能想到的任何想法？

如果这很重要，这也是组合框的填充方式。

```
 Try
        problems = problem.GetAll()
        comboboxProblems.Items.Clear()
        For Each problem In problems
            Dim i As ComboBoxItem = New ComboBoxItem
            i.Content = problem.Description
            i.Tag = problem.ProblemID
            comboboxProblems.Items.Add(i)
        Next
    Catch ex As Exception
        ErrorRoutine(ex, "LoadProblems")
    End Try 
```

# linux - IPTables发送的TCP_RST段的源地址

> ID：13655632
> 
> 赞同：1
> 
> 时间：2012-12-01T01:57:19.063
> 
> 标签：linux, tcp, linux-kernel, ip, iptables

可以将 iptables 配置为通过将 TCP_RST 或 ICMP_HOST_UNREACHABLE 数据包发送回源等操作来拒绝数据包。像这样：

```
iptables -A INPUT -p TCP --dport 22 -j REJECT --reject-with tcp-reset 
```

IPTables 使用什么地址作为它发送回主机的 TCP_RST 段的“srcIp”？它是它收到的数据包的“destIp”吗？或者，它是在接收数据包的接口上配置的 IP 地址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:23:54.837

该`INPUT`表仅影响其 destIp 由主机“拥有”的那些数据包。由于发送者期待来自 destIp 的响应，因此`TCP_RST`将返回原始 destIp 作为其 srcIp。如果`TCP_RST`从任何其他地址返回，则原始发送者不会将其识别为对其传输的数据包的回复。

# java - 在eclipse中安装环境描述

> ID：13655635
> 
> 赞同：9
> 
> 时间：2012-12-01T01:58:06.733
> 
> 标签：java, eclipse, build, environment

我有`Execution environment references were not checked for '...' because no environment descriptions are installed.`错误。

![在此处输入图像描述](../Images/78f7f86ba8f7fc0bc14c745a0ebdd03e.png)

我想我需要安装环境描述（[http://wiki.eclipse.org/Execution_Environment_Descriptions](http://wiki.eclipse.org/Execution_Environment_Descriptions)）用于导致此错误的 org.eclipse.jdt.core 项目。

如何在eclipse中安装环境描述？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T20:30:12.020

我从这个网站得到了答案 - [http://wiki.eclipse.org/Execution_Environments#Installing_Execution_Environment_Descriptions](http://wiki.eclipse.org/Execution_Environments#Installing_Execution_Environment_Descriptions)

简而言之，您可以为执行环境描述符安装软件。

![在此处输入图像描述](../Images/551672f11dddb6c5ff5117ba6a6c862a.png) ![在此处输入图像描述](../Images/fddbe775425f994dea10711453c1e1bc.png)

删除错误。

![在此处输入图像描述](../Images/c0ec67259105850e8475ddd729ecc9ee.png)

# objective-c - 调用 addObject 后 NSArrayController selectedIndex 变为 0

> ID：13655639
> 
> 赞同：4
> 
> 时间：2012-12-01T01:58:28.713
> 
> 标签：objective-c, macos, nstableview, cocoa-bindings, nsarraycontroller

## 我的设置：

我正在使用 NSTableView 制作一个基于选项卡的应用程序来显示选项卡并允许用户选择选项卡。

我有一个 NSTableView 绑定到 NSArrayController（tableView.content 绑定到 arrayController.arrangedObjects，tableView.selectionIndexes 绑定到 arrayController.selectionIndexes）。

![表视图绑定](../Images/6227f8fa2fab9fa118ad60d5aff83db7.png)

我的 arrayController 内容绑定到我的 ViewController 中的 NSMutableArray。

![数组控制器绑定](../Images/e742cb5246a2dc777d1178b3815b2857.png)

我的 arrayController 未**设置**为选择插入的对象（见截图）

![数组控制器属性](../Images/63910682084815752f81a97b7da56134.png)

## 我的问题：

每当我调用 [myArrayController addObject:] 时，selectedIndex 会变回 0（即使我选中了“保留选择”）。我不想要这种行为。添加或删除对象后，我希望选择保留在同一选项卡上。

有没有人遇到过这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T07:04:07.217

取消选择“避免空选择”为我修复了一个类似的问题（我的第一个插入的对象被自动选择）。[苹果表示](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSArrayController_Class/Reference/Reference.html#//apple_ref/occ/instm/NSArrayController/setAvoidsEmptySelection%3a)，除非数组中没有对象，否则 NSArrayController 将保持选择，这似乎不会影响现有选择，但值得一试。

# c++ - （排列？）通过逐个字符删除字符串

> ID：13655643
> 
> 赞同：1
> 
> 时间：2012-12-01T01:59:13.323
> 
> 标签：c++, algorithm, vector, char, permutation

（C++！我不知道该不该提）（尽量保持顺序！）

假设我有，我有，字符串 ABaC。

我将该字符串中的每个字符都放在一个名为 temp 的向量中。

所以我有 temp[0] = A，temp[1] = B，temp[3] = a，temp[4] = C。

我想做的是正确的一个程序，它输出该字符串的每个排列，其结果是删除 0 个大写字母，然后是 1 个大写字母，然后是两个大写字母，然后是全部 3。

我删除大写字母的原因是......你不应该专注于大写字母。碰巧我需要删除这里的所有大写字母，但是，比如说 ADbd，我不需要删除 D。所以说真的，这是一种从字符串中删除一组已知字符的算法。

所以它会输出：

ABaC|BaC|AaC|ABa|aC|Aa|Ba|a

不是在这里寻找效率或算法太出色。简单而长或短而愚蠢的东西我也很满意。

这是我正在处理的一个正在进行的项目的一部分，该项目删除了 lambda 产品（你们已经帮我解决了）所以这是我需要通过从规则中删除可为空的变量来构建新的生产规则的步骤，一个一个，依此类推并输出每个排列。

但是，你们都可以忽略这一点。把它想象成字符串。因此，非常感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T02:12:56.643

我不确定您使用的是哪种语言，因此我提供了以下高级步骤。

1.  遍历您的字符串并创建一组`capitalIndexes`存在大写字母的所有索引。
2.  对于`s`的[powerset](http://en.wikipedia.org/wiki/Power_set)中的每个集合`capitalIndexes`，打印出字符串的每个字符，除了位于 in 索引处的字符`s`，然后打印`\n`。

这里唯一复杂的一点是生成 powerset。[这](https://stackoverflow.com/questions/9252680/generating-the-power-set-of-a-list)是另一个答案，它提供了一种在 C++ 中执行此操作的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T02:16:43.070

这里有三个大写字母和 8 个解决方案。那应该给您一个想法（2 ^ 3 = 8）。

如果您有 n 个大写字母，请遍历数字 0 -> 2^n - 1。对于每个数字，您使用其二进制表示来确定是否包含大写字母。

000 -> 一个

001 -> 交流

010 -> 巴

011 -> 巴碳

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T02:16:01.413

您没有指定任何语言，所以我用伪语言编写它：

```
Function(string temp, int startindex):

output temp
for i = startindex to temp.length-1 {
  if temp[i] is capital {
    temp.remove(i)
    Function(temp.clone(), i)
  }
} 
```

你从`Function(temp, 0)`.

请注意，它可能以您想要的其他顺序给出结果。（从您的问题中不确定订单对您有多重要。）

# android - android在webview中加载url时显示图像

> ID：13655655
> 
> 赞同：0
> 
> 时间：2012-12-01T02:02:01.370
> 
> 标签：android

我有一个 Android apk，它启动 webview 并加载一个 url。由于加载 url 通常需要时间，所以在加载 apk 时如何显示图像？例如，图像可以是徽标。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:56:49.510

使用这样的布局

```
 <RelativeLayout>
    <ImageView> //with log
    <WebView>
    <RelativeLayout> 
```

当页面加载时，Webview 出现在 ImageView 的前面。或者您也可以在页面加载后隐藏它。

# php - 用于对类别和子类别进行分组的多维数组

> ID：13655657
> 
> 赞同：0
> 
> 时间：2012-12-01T02:02:24.033
> 
> 标签：php, mysql

我想在类别中对子类别进行分组。子类别可以包含任意数量的元素，例如：

输出：

```
category #1
    item 1 
    item 2
    item 3

category #2
   item 1 
   item 2
   item 3
   item 4
   item 5 
```

我最初的计划是使用这样的多维数组：

```
$categories = array(
'cateogy_name_1' => array(
    1 => 'item_1',
    2 => 'item_2',
    ...
),
'cateogy_name_2' => array(
    1 => 'item_1',
    2 => 'item_2',
    3 => 'item_3',
    4 => 'item_4',
    5 => 'item_5',

    ...
),
....
); 
```

到目前为止我的代码...

```
$categories = array();
$result= mysql_query("SELECT category_id, product_name  FROM `table` GROUP BY     
`catagory_id` ORDER BY `catagory_id`");  //retreive all categories and sub-categories

while($row = mysql_fetch_array($result))
 {
    //Get Categories and create arrays inside a single array
    //I'm stuck here, not sure how to initialize the multi-dimensional array
 }

foreach // Put all subcategories within the correct categories

        // I'm stuck here. How would I get the subcategories and put 
        // them into the correct category? 
```

好的，所以我的问题是：

1.  如何选择类别并将它们放入多维数组中自己的数组中？

2.  然后如何将子类别放入适当的类别数组中？

3.  最后，如何打印出可以包含任意数量子类别的整个多维数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:41:26.437

您应该首先获取一个查询的所有子类别和类别：

SQL：

```
SELECT     sub_category_id, 
           category_id,
           sub_category_name,
           category_name           
FROM       sub_categories a
INNER JOIN categories b
    ON     a.category_id=b.category_id 
```

PHP：

```
$categories = array();
while ($row = mysql_fetch_assoc($result)) {
    $cat_name = $row['category_name'];
    $sub_cat_id = $row['sub_category_id'];
    $sub_cat_name = $row['sub_category_name'];
    $categories[$cat_name][$sub_cat_id] = $sub_cat_name;
}

var_dump($categories); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:07:03.550

**注意：您不应该使用已弃用的`mysql_*`功能。改用[PDO](http://www.php.net/manual/en/book.pdo.php)或类似的东西。**

```
$categories = array();
while($row = mysql_fetch_assoc($result))
{
    $cat = $row['category_id'];
    $categories[$cat][] = $row['product_name'];
} 
```

像那样？

# ruby - 我可以使用 Treetop 解析 IO 吗？

> ID：13655658
> 
> 赞同：3
> 
> 时间：2012-12-01T02:02:36.960
> 
> 标签：ruby, treetop

我有一个想用 Treetop 解析的文件。如果我想解析整个事情，我会使用

```
rule document
  category_listing*
end 
```

我真的不想一次将整个文件读入内存。我知道我可以将解析器设置为`category_listing`一次解析一个（使用`#consume_all_input = false`and `#root = :category_listing`），这是问题的一半。但是，它看起来像`#parse`期望通过 a `String`（当我尝试通过它时它肯定会失败 a `File`），这使得读取和解析的想法`category_listing`听起来`category_listing`像 PITA。

Treetop只能用来解析`String`s吗？我一直在浏览树顶文档，但没有找到任何确定的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:01:07.837

据我从源代码中可以看出，你确实只能传入一个字符串。所以你的选择基本上是要么遵循 Josh Voigts 在他的评论中的想法，要么实现一些反向 IOString：具有字符串的东西接口，但“懒惰”从文件中获取请求的内容。

我不完全确定这是否可能在不诉诸 C 的情况下实现，即便如此，也可能存在语义使得它们根本无法一致实现的方法，但也许 Treetop 使用的 String 方法的子集是可管理的. 但是，我想说 Josh Voigts 的回答是最务实的。

# web-services - 从 asp.net webapi 中调用远程 web 服务

> ID：13655659
> 
> 赞同：1
> 
> 时间：2012-12-01T02:03:00.110
> 
> 标签：web-services, asp.net-mvc-4, asp.net-web-api

我有一个新的 asp.net MVC4 Web API (webapi) 应用程序，我正在开发它，并且大多数情况下都可以正常工作。最后一项任务是获取银行帐户信息并向用户收取给定金额。我已经想出了如何使用典型的 POST 方法和一些 JSON 来获取用户信息。然而，我们使用来自信用卡处理器的网络服务来实际向客户收费。在我们当前的 asp.net 网络表单应用程序中，我只是使用 vs2012 中的网络参考工具添加了网络服务，一切正常。我的问题是如何在 mvc4 webapi 中执行此操作。没有网络参考选项，只有一个似乎不起作用的服务参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:05:14.570

这与 Web API 无关。“添加 Web 引用”是访问 SOAP Web 服务的旧方法。请改用“添加服务参考”。

# ios - ios - 尝试从 didViewAppear 执行 NSLog 时出现意外行为

> ID：13655663
> 
> 赞同：2
> 
> 时间：2012-12-01T02:03:54.543
> 
> 标签：ios, nslog

我在课堂上有这个设置：

```
- (void)viewDidAppear:(BOOL)animated
{
    NSLog(@"test");
    NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"get_business_ideas" ofType:@"html"];
    NSURL *url = [NSURL fileURLWithPath:htmlFile];
    NSURLRequest *rq = [NSURLRequest requestWithURL:url];
    [theWebView loadRequest:rq];
} 
```

NSLog 语句从未出现在我的日志记录屏幕中，但其余代码似乎工作，因为 uiWebView 确实呈现。这怎么可能？这是一个新项目，所以也许我必须设置一些东西以确保可以看到日志记录？

谢谢！

更新：这是整个文件：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        //load iphone image
        UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"building"]];
        imgView.frame = self.view.bounds; // to set the frame to your view's size
        [self.view addSubview:imgView];
        [self.view sendSubviewToBack:imgView];
    }
    else
    {
        //load ipad image
        UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"building@2x"]];
        imgView.frame = self.view.bounds; // to set the frame to your view's size
        [self.view addSubview:imgView];
        [self.view sendSubviewToBack:imgView];
    }

    NSLog(@"2");
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T02:06:44.970

添加超级呼叫是否会为您解决此问题？

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSLog(@"test");
    NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"get_business_ideas" ofType:@"html"];
    NSURL *url = [NSURL fileURLWithPath:htmlFile];
    NSURLRequest *rq = [NSURLRequest requestWithURL:url];
    [theWebView loadRequest:rq];
} 
```

（无论最终在这里解决您的问题...确保在此方法中保留 [super] 调用...根据 API 文档，这是必需的）。

您提到您显示了底部窗格，但没有显示调试消息。通过单击底部面板上的中间显示图标（不是 Xcode 右上角的类似外观按钮），仔细检查控制台部分是否显示在变量之外：

![安慰](../Images/620657e19844d36bd103dfaa51a15b91.png)

# visual-studio-2010 - 执行搜索或使用剪贴板管理器后，Visual Studio 编辑器中缺少光标。在安全模式下工作

> ID：13655668
> 
> 赞同：0
> 
> 时间：2012-12-01T02:04:32.387
> 
> 标签：visual-studio-2010, visual-studio

我对 Visual Studio 2010 编辑器有一个奇怪的行为。每当我使用 ClipX 或 Ditto 等剪贴板管理器进行搜索 (ctrl-F) 或粘贴时，光标都会丢失。我必须在编辑器内用鼠标单击才能获得光标。

当我使用在安全模式下运行的 Visual Studio 执行这些操作时，它们工作正常。所以我认为这可能是导致这种情况的扩展或附加组件。我禁用了所有附加组件和扩展并使用 /resetsettings 和 /setup 运行 VS，但我仍然遇到问题。

关于可能发生的事情有什么想法吗？

**更新：**

切换到没有这个问题的VS2012。VS2012具有相同的扩展名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:18:47.297

您的问题可以通过不同的方式解决（取决于原因）。尝试以下操作：

*   （Windows设置问题）转到控制面板，轻松访问中心，使计算机更易于查看，然后在使屏幕上的内容更易于查看下将闪烁光标的粗细设置为1
*   （Visual Studio 问题）通过 Tools->Import and Export Settings->Reset All Settings 重置 VS 中的所有设置。重新启动VS并检查。如果问题仍然存在，则在 VS2010 命令提示符下启动 devenv /safemode 以避免加载扩展并检查行为。这应该会有所帮助。

BTW 这个问题在 VS 的 RC 期间经常发生。

UPD 尝试删除 C:\Users\%UserName%\AppData\Local\Microsoft\VisualStudio\10.0\Extensions 这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:55:06.380

在遵循@arttronics 的建议后，我有一些基于谷歌研究的建议可能会有所帮助（或者当然，可能不会！）。

我会按以下顺序尝试这些：

1.  降低视频驱动程序设置中的硬件加速。
2.  [禁用 WPF 硬件加速](http://msdn.microsoft.com/en-us/library/aa970912.aspx)（这是为了调试基于 WPF 的应用程序，但已经看到讨论线程建议禁用此功能将纠正与您所描述的问题类似的问题）
3.  根据 Fernando Figueiredo 的回答[启用单击 URL 导航。](https://superuser.com/a/484119)

希望这里有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-24T04:47:41.807

修复：Visual Studio 编辑器的文本光标在将焦点更改到另一个应用程序后消失，并且不再出现。

对于消失的文本光标，（许多网络上的）发布的解决方案都没有奏效。我找到了一个适合我的解决方案...转到：

工具/选项/环境/常规/窗口布局

...有 2 个单选按钮：

*   选项卡式文档
*   多个文件

...您必须选择其中一个。我切换到“多个文档”，这解决了问题。

旁注：当通过 Alt+Tab 将焦点更改为任何其他打开的窗口/应用程序时，就会出现此问题。返回时，Vis Studio 没有可见的文本光标。Ctrl+Tab 是一个抱歉的解决方法，但有效。但是这个修复完全适合我。

# android - 在线性布局中添加视图

> ID：13655669
> 
> 赞同：0
> 
> 时间：2012-12-01T02:04:40.870
> 
> 标签：android, android-layout, android-widget

![在此处输入图像描述](../Images/1547d5a95b168fd4870d3fd6c7cca701.png)

大家好，我有一个问题，我有一个线性布局，我想在水平方向添加按钮，但如果按钮接触到线性布局边缘，我还需要它自动换行。我编写了我的按钮（不是 XML）并将其设置为“wrapcontent”（内部文本）。我的英语不是很好，所以我在这里画了一张图片。

感谢您的阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T02:17:13.893

如果您之前知道按钮的大小，那么您可以将 Layouts 放入 Layouts 中。请参阅代表您的图像的示例：

```
<LinearLayout
    android:id="@+id/outerLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    >
    <LinearLayout 
        android:id="@+id/innerLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        >
        <Button 
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_weight="5"
            android:layout_height="wrap_content"
            /> 
        <Button 
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_weight="5"
            android:layout_height="wrap_content"
            /> 
    </LinearLayout>
    <LinearLayout 
        android:id="@+id/innerLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        >
        <Button 
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_weight="5"
            android:layout_height="wrap_content"
            /> 
        <Button 
            android:id="@+id/button4"
            android:layout_width="0dp"
            android:layout_weight="5"
            android:layout_height="wrap_content"
            /> 
    </LinearLayout>
    <Button
       android:id="@+id/button5"
       android:layout_width="match_parent"
       android:layout_weight="5"
       android:layout_height="wrap_content"
       /> 
</LinearLayout> 
```

如您所见，使用该`layout_weight`属性可以操作按钮的宽度。这也可以通过在`layout_width`except中设置具体大小来实现`match_parent`。

如果您`View`从代码中添加 s，同样的事情。不过，我更喜欢用 XML 来解释 Android 布局，因为您有更好的概览。

# c# - 将 SQL 语句的结果转换为列表

> ID：13655670
> 
> 赞同：3
> 
> 时间：2012-12-01T02:05:00.947
> 
> 标签：c#, sql

我正在尝试将 SQL 语句的结果放入表单上的组合框中。我已经在网上搜寻了答案，但我无法比这更进一步：

```
using (SqlCeConnection c = new SqlCeConnection(
 Properties.Settings.Default.CW2_DBConnectionString))
{
    c.Open();

    List<Visit> rows = new List<Visit>();

    SqlCeCommand cmd = c.CreateCommand();
    cmd.CommandText = "SELECT PICKUP_ID FROM PICKUP";

    c.Open();
    cmd.ExecuteNonQuery();

    SqlCeDataReader reader = cmd.ExecuteReader();

    while (reader.Read())
    {

    }

    cmbPickupID.Items.Add(rows);
} 
```

我不确定在 while 循环中放什么。我确实有类似的东西：

```
rows.Add(reader["PICKUP_ID"].ToString()); 
```

但显然它没有奏效。Visit 类已设置并获取 VisitID。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T02:20:56.383

首先：你不需要`cmd.ExecuteNonQuery();`

其次：如果您的`Visit`类有一个属性 PICKUP_ID，并且您使用的是`Visit`项目列表，那么您需要将实际添加`Visits`到您的列表中，而不仅仅是字符串，如下所示：

```
rows.Add(new Visit () {pickupid = reader["PICKUP_ID"].ToString()}); 
```

如果您只需要 id，那么您不妨只制作一个`List<string>`. 您发布的代码将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T02:08:25.663

`cmd.ExecuteNonQuery();`不需要摆脱它是吗？

试试这个：

```
 while (reader.Read())
        {
            cmbPickupID.Items.Add(reader["PICKUP_ID"].ToString());
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-07T23:21:29.977

我觉得你可以使用`Reflection`和其他一些东西。

我建议你使用`Dapper`.

您可以使用 Dapper 将一个查询的结果转换为一个类。

使用 dapper 这样做：

1：在你的项目上右击`Visual studio`并选择`Manage Nuget Packages`。

2：在`search Online`文本框中输入 Dapper。

3：在网上搜索这个DLL后，你可以安装它。（你最有连接到互联网）。

4：创建你的`Domain Class`

```
 private class DomainClass
   {
        public int Id { get; set; }
        public string Name { get; set; }
        //public int Sex { get; set; }
        public SexEnum sex { get; set; }
   } 
```

5：如果您有一些最能转换为具有不同类型（枚举类型）的字段的字段，请喜欢`Sex`字段。

6：创建连接字符串和`sqlConnection`对象：

```
 var connectionStr = "Server=ArdalanShahgholiPC;Database=Dapper;User Id=sa;Password=sa;";
 SqlConnection sqlConn = new SqlConnection(connectionStr); 
```

7：并最终用于`Dapper.SqlMapper`执行查询并将其转换为您的域类。

```
 IList<DomainClass> TestList = Dapper.SqlMapper.Query<DomainClass>(
                                sqlConn, "Select * From ATest").ToList(); 
```

最后你可以使用`TestList`.

# matlab - 如何将输入值与矩阵形式数据匹配？

> ID：13655677
> 
> 赞同：1
> 
> 时间：2012-12-01T02:06:08.483
> 
> 标签：matlab, matrix

我得到一个安全系数及其对应力的数据，我想让它像提示和询问''安全系数是多少？然后用户将输入安全系数的值，然后输出在数据表中显示相应的力

谢谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:26:38.533

我认为您只是想索引该值。Matlab 索引从 1 开始，因此您需要使用它作为参考，或者添加一个。正确的是将所需的索引放在括号中，如下所示

```
output_value=A(y+1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:13:40.467

由于您想在第一列中搜索一个值并从第二列打印相应的值，您可以执行以下操作：

```
ri = find(A(:,1) == y);
z = A(ri,2); 
```

这假设您总是会`y`在 的第一列中找到 的相应值`A`。如果不是这种情况，则需要修改代码：

```
ri = find(A(:,1) == y);
if isempty(ri)            % value not found
    % code to print error message 
    % or
    % code interpolate between given values 
else
    z = A(ri,2);
end 
```

您也可以使用`try-catch`块代替`if-else`语句。

插值可能有点技巧，因为您需要对其进行正确建模。内插比外推要容易得多。假设您在第一列中的值按升序或降序排列，您可以使用`interp1`如下方式进行一阶插值，

z = interp1( A(:,1), A(:,2) , y);

# struts2 - 在 500 之前提交，java.lang.IllegalStateException: Committed

> ID：13655678
> 
> 赞同：4
> 
> 时间：2012-12-01T02:06:38.310
> 
> 标签：struts2, apache-poi

我正在使用 struts2 导出一个 excel 文件。较小的文件可以正常工作。文件较大时出现以下错误。为什么我会收到此错误？文件的大小是否太大？

```
2012-12-01 09:51:29.689::WARN:  Committed before 500 Unable to show problem report: java.lang.IllegalStateException: STREAM
2012-12-01 09:51:29.690::WARN:  /strutsDemo/process/excel: 
java.lang.IllegalStateException: Committed
    at org.mortbay.jetty.Response.resetBuffer(Response.java:853)
    at org.mortbay.jetty.Response.reset(Response.java:832)
    at org.mortbay.jetty.Response.sendError(Response.java:220)
    at org.apache.struts2.dispatcher.Dispatcher.sendError(Dispatcher.java:801)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:519)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1041)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:354)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:226)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:627)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:149)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:123)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:141)
    at org.mortbay.jetty.Server.handle(Server.java:269)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:430)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:687)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:492)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:199)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    at org.mortbay.jetty.nio.HttpChannelEndPoint.run(HttpChannelEndPoint.java:270)
    at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
2012-12-01 09:51:29.691::WARN:  /strutsDemo/file/export
java.lang.IllegalStateException: Committed
    at org.mortbay.jetty.Response.resetBuffer(Response.java:853)
    at org.mortbay.jetty.Response.reset(Response.java:832)
    at org.mortbay.jetty.Response.sendError(Response.java:220)
    at org.apache.struts2.dispatcher.Dispatcher.sendError(Dispatcher.java:801)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:519)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1041)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:354)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:226)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:627)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:149)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:123)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:141)
    at org.mortbay.jetty.Server.handle(Server.java:269)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:430)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:687)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:492)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:199)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:339)
    at org.mortbay.jetty.nio.HttpChannelEndPoint.run(HttpChannelEndPoint.java:270)
    at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475) 
```

这是我的动作配置：

```
 <result name="success" type="stream">
    <param name="contentType">application/vnd.ms-excel</param>
    <param name="inputName">excelStream</param>
    <param name="contentDisposition">attachment;fileName="${fileName}"</param>
    <param name="bufferSize">2048</param>
  </result>
  <result name="invalid.token">/error.jsp</result>
</action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-13T21:37:31.800

看起来您的代码开始编写 Excel 文件（返回给客户端），中途完成并遇到了某种错误。到那时，返回并给出 500 HTTP 错误响应代码已经太晚了。您的问题中不包含错误的详细信息。（可能是客户端挂了，响应提交了两次，应用程序代码抛出异常等）如果你调试你的应用程序并在抛出任何异常时中断，你有什么发现吗？

您还可以尝试更大的缓冲区大小，看看会发生什么。（4k，16k，更多？）这告诉系统在开始将流渲染回客户端之前保持更长时间。因此，您的实际问题可能会浮出水面。

# java - 第一次设置日期时出现 JDatePicker 错误

> ID：13655682
> 
> 赞同：0
> 
> 时间：2012-12-01T02:07:34.987
> 
> 标签：java, swing

JDatePicker 是一个用于选择日期的开源 Java GUI 组件

[http://sourceforge.net/projects/jdatepicker/](http://sourceforge.net/projects/jdatepicker/)

当我将二月设置为创建组件后的月份时，似乎有一个错误。所有其他月份都正常工作。

```
package jat.examples.DatePicker;

import jat.jdatepicker.JDateComponentFactory;
import jat.jdatepicker.JDatePicker;

import javax.swing.JApplet;
import javax.swing.JComponent;

public class DatePickerExample extends JApplet{

private static final long serialVersionUID = 1920676464239324135L;
JDatePicker depart_date_picker;

public void init() {
    depart_date_picker = JDateComponentFactory.createJDatePicker();
    depart_date_picker.setTextEditable(true);
    depart_date_picker.setShowYearButtons(true);

    add((JComponent) depart_date_picker);

}

public void start() {

    depart_date_picker.getModel().setYear(2010);
    depart_date_picker.getModel().setMonth(1);
    //depart_date_picker.getModel().setMonth(1);
    depart_date_picker.getModel().setDay(15);
    depart_date_picker.getModel().setSelected(true);    
}

} 
```

它不是显示二月，而是显示三月。

在调试器中，我注意到 oldValue 为空。

```
public void setMonth(int month) {
    int oldMonthValue = this.calendarValue.get(Calendar.MONTH);
    T oldValue = getValue();
    calendarValue.set(Calendar.MONTH, month);
    fireChangeEvent();
    firePropertyChange("month", oldMonthValue, this.calendarValue.get(Calendar.MONTH));
    firePropertyChange("value", oldValue, getValue());
} 
```

果然，当我调用该方法两次时，它正确显示了二月。

```
 depart_date_picker.getModel().setMonth(1);
    depart_date_picker.getModel().setMonth(1); 
```

可能是变量初始化问题。我是正确的，有人可以解决这个问题，还是我错误地使用了库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-07T19:12:00.590

我注意到您的包导入是 jat.jdatepicker.JDatePicker，它似乎直接包含在[https://sourceforge.net/p/jat的源代码库中](https://sourceforge.net/p/jat)

您正在使用的这个版本的 JDatePicker 是原始 JDatePicker 项目的一个分支。虽然开源项目不允许分叉，但如果有需要解决的问题，建议尝试并提交回原始项目。

我建议您宁愿在[https://github.com/JDatePicker/JDatePicker使用该项目的最新版本](https://github.com/JDatePicker/JDatePicker)

我针对可以从中央存储库下载的 jdatepicker-1.3.4 测试了您的案例（[https://search.maven.org/#artifactdetails%7Corg.jdatepicker%7Cjdatepicker%7C1.3.4%7Cjar](https://search.maven.org/#artifactdetails%7Corg.jdatepicker%7Cjdatepicker%7C1.3.4%7Cjar)）

将其包含在 Maven 中：

```
<dependency>
    <groupId>org.jdatepicker</groupId>
    <artifactId>jdatepicker</artifactId>
    <version>1.3.4</version>
</dependency> 
```

在接下来的测试中，最初选择了二月。

```
public static void main(String[] args) {
    JFrame testFrame = new JFrame();
    testFrame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    testFrame.setSize(500, 500);
    JPanel jPanel = new JPanel();

    JDatePicker picker = new JDateComponentFactory().createJDatePicker();
    picker.setTextEditable(true);
    picker.setShowYearButtons(true);
    jPanel.add((JComponent) picker);

    picker.getModel().setYear(2010);
    picker.getModel().setMonth(1);
    //picker.getModel().setMonth(1);
    picker.getModel().setDay(15);
    picker.getModel().setSelected(true);

    JPanel datePanel = new JPanel();
    datePanel.setLayout(new BorderLayout());
    datePanel.add(jPanel, BorderLayout.WEST);
    BorderLayout fb = new BorderLayout();
    testFrame.setLayout(fb);
    testFrame.getContentPane().add(datePanel, BorderLayout.WEST);
    testFrame.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T22:00:07.327

This may be dependent on when the test is run. I noticed you asked this near the end of a month. And February only has 28 days.

I suspect what happened is that you ran your code on the 29th, 30th, or 31st of the month, so the initial selection was something like 2012-11-30\. When you set the month value to 01 (Feb), the day value stays 30, producing a "denormalized" date that rolls over in to the next month when the `Calendar` tries to determine the actual date from the field values. Like "carrying" the overflow when you're doing decimal addition. This will give you a date like March 1\. Then if you set the month field again to February, this time the day field is within the valid range for February, and you don't get overflow.

There is [a pending Pull Request](https://github.com/JDatePicker/JDatePicker/pull/42) on the JDatePicker project to deal with this. In the mean time, you could use one of the methods that sets the entire date in a single call instead of setting the year, month, and day fields separately. Or set the day field before setting the month field to avoid the rollover condition.

# c# - Winrt WebView Http 标头

> ID：13655691
> 
> 赞同：1
> 
> 时间：2012-12-01T02:08:57.387
> 
> 标签：c#, webview, microsoft-metro, windows-runtime

我需要在 WebView（metro 应用程序/windows 商店应用程序/winrt 应用程序）中的 http 标头中传递 cookie。我知道，这里已经回答[了](https://stackoverflow.com/questions/13418383/set-cookies-headers-for-webview-via-code-for-win-store-app?lq=1)。问题是，当我得到带有标题的 webrequest 响应并将 WebView 导航到响应的内容作为字符串时，我没有得到样式（css）、脚本（js）工作。访问单个 facebook 页面告诉我，我有旧的浏览器。有没有办法实现 WebView.Navigate(Uri) 行为但使用 http 标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:47:29.743

这是 Windows 商店应用程序安全概念的一部分。

我最好的猜测是您正在尝试实现 OAuth 以支持通过 facebook 登录。如果我是对的，您可以尝试[客户端登录流程](https://developers.facebook.com/docs/howtos/login/client-side-without-js-sdk/)。这个将访问令牌作为重定向 Uri 的片段发送。由于片段是 Uri 的一部分，您可以使用该[`WebView.Source`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.source)属性读取它。

有关 WebView 的更多信息，请参阅msdn 上[的此博客文章。](http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx)

# servlets - 如何使用 servlet3.0 为一个特定的 servlet 应用过滤器？

> ID：13655696
> 
> 赞同：0
> 
> 时间：2012-12-01T02:10:02.353
> 
> 标签：servlets, annotations, servlet-filters, servlet-3.0

我正在使用 servlet 3.0，但我不能使用注释只为一个 servlet 指定过滤器？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T07:07:58.747

最后，我找到了这个，它正在和我一起工作

```
 @WebFilter(filterName = "BasicFilter" , urlPatterns = {"/BasicFilter"},servletNames ={"/FilteredServlet"}) 
```

# javascript - 从选择菜单控制多个 div（在一个页面上多次）

> ID：13655698
> 
> 赞同：0
> 
> 时间：2012-12-01T02:10:37.790
> 
> 标签：javascript, jquery

试图从选择菜单中显示隐藏多个 div。我让它工作正常，除了它只在它第一次出现在页面上时工作。之后它只显示所有的div。

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#part_update').change(function() {
            $("#update_form div:not('.alwaysShow')").hide();
            $("#update_form .show" + $('#part_update').val()).show();
        });

        $('#part_update').change(); // simulate a change event to trigger the above
    });
</script> 
```

html:

```
//WRITE THE ROW WITH THE ADDITIONAL OPTIONS FOR EDITING
echo '<tr id="row'.$list[part_no].'" style="display:none" class="options_row">
    <td colspan="7">
        <form name="fm'.$list[part_no].'" id="update_form" class="updateContainer" method="post" action="process_pm.php">
            <input type="hidden" name="cur_cat" value="'.$_GET[cat].'">
            <input type="hidden" name="show" value="'.$_GET[show].'">
            <input type="hidden" name="pagenum" value="'.$_GET[pagenum].'">
            <input type="hidden" name="findtype" value="'.$_GET[findtype].'">
            <input type="hidden" name="action" value="update"/>
            <input type="hidden" name="part_no" value="'.$list[part_no].'" />
            <div class="alwaysShow">
                <select id="part_update" >
                    <option value="Add" >Add New Inventory</option>
                    <option value="Update">Update Existing Inventory</option>
                </select>
            </div>
            <div class="showAdd" >
                <label for="part_cost">&nbsp;$</label><input type="text" name="part_cost" id="part_cost" class="help" title="Enter Total Invoice Cost" >
            </div>
            <div class="showAdd showUpdate" ><input type="text" name="part_qty" id="part_qty" class="help" title="Enter Qty" ></div>
            <div class="showUpdate" >
                <input name="update_type" type="radio" value="add_qty" checked> Add
                <input name="update_type" type="radio" value="set_qty" > Set
            </div>
            <div class="alwaysShow"><input type="submit" name="submit" class="alwaysShow" value="Submit"></div>
            &nbsp;&nbsp;<a href="javascript:hideDiv(\'row'.$list[part_no].'\');" /><img src="support/btn-update-close.png" />Close</a>
        </form>
    </td>
</tr>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:20:10.133

`id`s 是唯一的，即它们应该只在页面上出现一次。你想在那里使用的是`class`：

```
$('.part_update').change(function() {
    /* so on and so forth... */
} 
```

显然，没有什么可以阻止您`id`在页面上的各个位置使用相同的，但正如您所看到的，它不会起作用。

# javascript - 从数组更改类名？

> ID：13655699
> 
> 赞同：2
> 
> 时间：2012-12-01T02:11:04.663
> 
> 标签：javascript, jquery, jquery-selectors

好的，假设我有一段文本，我想通过更改其类名来更改其格式。类名都组织在一个数组中。（我不确定这是否是最好的方法，所以我很乐意接受相反的建议）

所以说类名是class1，我有数组

```
[class1, class2, class3, ..., class10] 
```

使用jQuery在鼠标悬停时将类名循环到数组中的下一项的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:24:56.873

存储一个全局计数器，并在数组的`counter % classes.length`位置使用它。`classes`它只是不断增加，但`%`在与数组的长度一起使用时返回正确的索引`classes.length`。

```
​var classes = ['class1','class2','class3','class4'];
// Will hold the current iteration's index
// initialized to 0 on page load...
var counter = 0;

function advance() {
  // Remove the current iteration's class based on the counter's current value
  $('#thediv').removeClass(classes[counter] % classes.length);

  // Increment the counter to the next value
  counter++;

  // Add the new iteration's class based on the counter's *new* incremented value
  $('#thediv').addClass(classes[counter % classes.length]);
}​​​​​​​​​​​​​​​
​ 
```

将该函数绑定`advance()`到您节点的`onmouseover`.

```
$(document).ready(function() {
  $('#yourElement').mouseover(advance);
});​ 
```

### [这是 jsfiddle.net 上的演示](http://jsfiddle.net/V228Z/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:26:16.620

## *[jsBin 演示](http://jsbin.com/osorad/6/edit)*

假设你的班级被称为`.font`+ 和一个 N 号：

**CSS：**

```
h1{
  color:purple;
}

.font0{
 color:gray !important;
}

.font1{
 color:red !important;
}

.font2{
 color:blue !important;
}

.font3{
 color:gold !important;
} 
```

**jQuery：**

```
var c = 0;
$('h1').on('mouseenter',function(){  
  $(this).removeClass().addClass( 'font'+ (c++%4) ); 
  // console.log( c%4 ); // TEST counter
}); 
```

`!important`如果您打算添加/覆盖某些元素现有样式，则可以很好地使用。

您需要在使用 CLASS 添加新元素之前从元素中删除 CLASS `.removeClass()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T02:36:06.507

这是不使用计数器的替代方法。

[http://jsfiddle.net/mqchen/9LHE5/](http://jsfiddle.net/mqchen/9LHE5/)

```
var classes = ["red", "blue", "green", "papayawhip"];

$("#something").mouseenter(function(e) {
    classes.push(classes.shift());
    $(this).removeClass(classes[classes.length - 1]).addClass(classes[0]);
});​ 
```

基本上，它使用 删除数组中的第一个元素`shift`，将其附加到数组的末尾，然后从元素中删除该类（现在位于数组的末尾），然后从数组中添加第一个元素（它曾经是第二个元素），使用`push`.

编辑：这是从数组中的第一个类而不是第二个类开始的修订。[http://jsfiddle.net/mqchen/9LHE5/2/](http://jsfiddle.net/mqchen/9LHE5/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T02:21:17.717

像这样的东西应该工作：

```
$('#theelement').mouseover(function(e) {
    var classes = ['class1', 'class2', 'class3', 'class10'],
        $this = $(this),
        current = $this.attr('class').split(' ');
    for (var i = 0; i < current.length; i++) {
        lindx = $.inArray(current[i], classes);
        if (lindx != -1) {
            classname = current[i];
            next = lindx + 1 >= classes.length ? classes[0] : classes[lindx + 1];
            $this.toggleClass(classname + ' ' + next);
            break;
        }
    }
}); 
```

[http://jsfiddle.net/szh7K/](http://jsfiddle.net/szh7K/)

我已经这样做了，而不是使用计数器，因此不需要外部变量。可能更好的实现是使用计数器而不是每次都搜索数组，而是使用`$.data`将计数器索引存储在元素本身上。

```
$('#theelement').mouseover(function(e) {
    var classes = ['class1', 'class2', 'class3', 'class10'],
        $this = $(this),
        cur = $this.data('currentIndex')||0, // if there is no value then we start from scratch
        next = cur+1 >= classes.length ? 0 : cur+1; // if we are at the end we start over

        $this.toggleClass(classes[cur] + ' ' + classes[next]); // toggle the classes
        $this.data('currentIndex', next); // assign the incremented index as current
}); 
```

[http://jsfiddle.net/jkPps/1/](http://jsfiddle.net/jkPps/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T02:27:36.300

```
var classArr = ['class-1', 'class-2', 'class-3', ...],
    classArrLengthNum = classArr.length,
    arrIdxNum = 0;

$(el).mouseover(function () {
    arrIdxNum += 1;
    if (arrIdxNum === classArrLengthNum) {
        arrIdxNum = 0;
    }

     el.attr('class', classArr[arrIdxNum]);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T02:39:17.277

首先声明你的类，以及一个跟踪当前索引的变量：

```
var classes = ["red", "blu", "grn"], index = -1; 
```

接下来设置`mouseenter`功能：

```
$("body").on("mouseenter", function(){
    this.className = classes[++index % classes.length];
});​​​ 
```

这将从数组中获取下一个可用值，当它位于数组的末尾时，它将回绕并获取索引 0 处的项目。

演示：http: [//jsfiddle.net/R48FC/](http://jsfiddle.net/R48FC/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-01T02:58:23.833

此版本保留了可能已在您循环类的元素上设置的任何其他类。它还通过[了 jsLint](http://www.jslint.com/) ;-)

```
$.ready(function () {
    'use strict';
    var cycles = ['class1', 'class2', 'class3', 'class4'],
        cycleLength = cycles.length,
        cycleCount = 0; // assumes the first class was already set in the HTML

    $('#element').mouseover(function (ev) {
        var $this = $(this);
        // remove the previous class
        $this.removeClass(cycles[cycleCount]);

        // get the next class
        cycleCount += 1;
        cycleCount %= cycleLength;

        // add new class
        $this.addClass(cycles[cycleCount]);
    });
}); 
```

您会注意到，在这个[工作示例](http://jsfiddle.net/tESHm/)中，文本保持粗体，因为在`.b`循环遍历数组中的类时该类没有被删除。如果要放置此事件的元素具有子节点，您可能还想使用[`jQuery.mouseenter()`](http://api.jquery.com/mouseenter/)而不是。`mouseover`

# asp.net-mvc - MVC4 无法连接到 SQL Server 2008 远程数据库

> ID：13655700
> 
> 赞同：0
> 
> 时间：2012-12-01T02:11:14.413
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我已经查看了过去的问题，但我无法解决我的问题

我在将简单数据库连接到 MVC 项目时遇到问题。这很难做到，我使用的是 VS2010、SQL Server 2008（远程数据库）。我已经创建了一个数据库，并且我想首先将代码与实体框架一起使用。听起来很简单，因为我只是按照教程进行操作，但我使用的教程都没有奏效过。这些教程使用较旧的 MVC 和较旧的实体框架。我有 MVC4 和 EF 5

这是我正在使用的步骤

1.  创建新的 MVC 项目并在引用中我看到实体框架

2.  创建将对应于尚未在数据库中创建的表的类

3.  将连接字符串添加到`web.config`

4.  添加额外的行以`global.asax`避免错误实体 5 抛出（从其他人的问题中发现了这一点）

5.  添加带有 db 和 dbcontext 的控制器

6.  运行项目，您可能会猜到名为 video 的控制器出现问题

错误：

> *异常详细信息：System.Data.SqlClient.SqlException：对象名称“dbo.videos”无效。*

我不知道，这个 MVC 似乎比 Web 表单更不稳定，因为我可以毫无问题地连接到 Web 表单中的同一个数据库。

```
 <add  name="videoDBContext"
       connectionString="Data Source=xxxxxxx;Initial Catalog=xx;Persist Security Info=True;User ID=xx;    Password=xxx"
       providerName="System.Data.SqlClient" /> 
```

班级：

```
public class video
{
    public int ID { get; set; }
    public string Title { get; set; }
    public DateTime ReleaseDate { get; set; }
    public string Genre { get; set; }
    public decimal Price { get; set; }
} 
```

数据库上下文：

```
public class videoDBContext : DbContext
{
    public DbSet<video> videos{ get; set; }
} 
```

控制器动作

```
public ActionResult Index()
    {
        return View(db.videos.ToList()); //
  Exception Details: System.Data.SqlClient.SqlException: Invalid object name 'dbo.videos'.
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:01:19.023

你连接到数据库很好。实际的 DB 模型和 codefirst 模型不同步，因此出现错误。

您正在将 DbSet 添加到视频的 DBContext 中，但当前数据库中不存在这样的表。除非您的数据库初始化程序声明在模型不存在时创建模型，否则这正是我希望您得到的错误。

此外，我没有看到定义或提到将模型类映射回数据库表的映射类。

看看[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net- mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)。这最终会进入数据库初始化程序。另一种选择是简单地手动创建表。

所以，问题一，没有数据库初始化器（或预定义表）。问题二，表和 OnModelCreating 没有映射类，至少从您所展示的内容来看。您完全有可能没有使用流利的 api 来定义映射，而只是使用视频模型中的属性，但同样，您没有展示这一点，所以我将向您展示流利的方式。

编辑：

我已使用您的命名约定在本地创建的测试项目中更新了此代码。这 100% 有效。这些是我创建或反向工程的确切类。

```
public class videoDBContext : DbContext
{
    static videoDBContext()
    {
        Database.SetInitializer<videoDBContext>(null);
    }

    public videoDBContext()
        : base("Name=videoDBContext")
    {
    }

    public DbSet<Video> Videos { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new VideoMap());
    }
} 
```

领域类

```
public class Video
{
    public int Id { get; set; }
    public string Description { get; set; }
} 
```

和映射类

```
public class VideoMap : EntityTypeConfiguration<Video>
{
    public VideoMap()
    {
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        this.Property(t => t.Description)
            .IsRequired()
            .HasMaxLength(50);

        // Table & Column Mappings
        this.ToTable("Video");
        this.Property(t => t.Id).HasColumnName("Id");
        this.Property(t => t.Description).HasColumnName("Description");
    }
} 
```

然后我的控制器动作

```
 public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        using (videoDBContext context = new videoDBContext())
        {
            var list = context.Videos.ToList();
        }

        return View();
    } 
```

这将返回我添加到表格中的任何“视频”。

至于去哪里，如果你在一个项目中做所有事情并不重要。选择一个地点。这就是我的事情是如何发生的。

![在此处输入图像描述](../Images/6fb60335d8ba962d68b95a0a71613d73.png)

您必须记住，在首先使用代码来启动和运行时，需要付出额外的前期努力。但是，一旦您掌握了窍门，它就会成为处理数据库的一种非常好的方式。

# java - TextField 中的值引发 java.lang.NumberFormatException 错误

> ID：13655701
> 
> 赞同：1
> 
> 时间：2012-12-01T02:11:22.043
> 
> 标签：java, if-statement, parseint, java.lang.class

所以这就是我的代码（当然，还没有完成，因为我不想做任何其他工作，直到我弄清楚为什么会出现错误）。它编译没有问题，但是当我尝试运行它时*`java.lang.NumberFormatException`*，我的第一行得到了一个，不确定为什么？

```
 if (Integer.parseInt(subtotalTextField.getText()) <= 200)
 {
    discountTextField.setText("2");
 }
    else
 {
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T02:12:44.773

因为`subtotalTextField.getText()`返回无法解析的东西，所以`int`在异常消息中它应该显示传递给的值是什么`parseInt()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:58:12.067

我可以考虑的 subtotalTextField.getText() 的可能值

```
 subtotalTextField.getText() = null; // or

 subtotalTextField.getText() = "";  // or

 subtotalTextField.getText() = "Any non passable String"; // a ,b c .. 1a ,2a ... etc 
```

如果您可以通过任何验证确保用户输入的值是有效数字。从你的逻辑开始没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T02:13:22.763

返回的可能不是字符串？不要链接它，检查 null 并执行

```
Object val = subtotalTextField.getText();
if (val != null)
    String txt = val.toString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T02:17:47.763

如前所述，在文本字段中输入的文本无法解析为整数。这意味着您的文本字段包含字符，即 "2s" 。

如果您想在每次用户输入无效整数时避免此错误，请在其周围加上 try-catch 子句。

```
try{
// Try to parse to Integer

}catch(NumberFormatException e) {
// Thing to do when a user enters non-valid Integer
} 
```

# c - char* 指向指针的数组

> ID：13655707
> 
> 赞同：1
> 
> 时间：2012-12-01T02:11:56.583
> 
> 标签：c, pointers

我将如何指向：

```
char * values [x]; 
```

我试图`char *`从代码块外部将一个数组传递给一个指针，其中 x 可以通过任何方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T02:29:49.657

指向指针的指针可以做你想做的事。

```
char ** val ; 
```

在函数定义中：

```
return_type func(char ** val) {...} 
```

在函数调用中：

```
func(&values) 
```

您需要将指针的地址传递给函数。

# windows-phone-8 - Windows phone 8.0 中的 Xaml 设计器（无法创建我的自定义控件的实例）

> ID：13655709
> 
> 赞同：1
> 
> 时间：2012-12-01T02:12:10.813
> 
> 标签：windows-phone-8

我正在为 windows phone 8 创建一个自定义控件，在这个控件中我使用了一个来自 Windows 运行时组件 (.winmd) 的类。

问题是在 xaml 设计器中我的自定义控件没有出现，但该控件在 rut 模式下工作正常。

（正如我上面提到的，这是在设计时（Xaml 设计器））：

“无法创建 MyControl 的实例”，内部异常是：

TypeLoadException：请求的 Windows 运行时类型“WindowsPhoneRuntimeComponent1.WindowsPhoneRuntimeComponent”未注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:32:49.217

设计器无法初始化 WinRT (COM) 对象。您必须使用[DesignerProperties.IsInDesignTool](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.isindesigntool%28v=vs.95%29.aspx)来防止 WinRT 对象在设计模式下被实例化。

# node.js - 写入生成的进程stdin nodejs？

> ID：13655713
> 
> 赞同：16
> 
> 时间：2012-12-01T02:12:46.397
> 
> 标签：node.js, stream, stdin, child-process

我有一个脚本，我想从另一个脚本运行。问题是子脚本（进程）在继续之前需要用户输入。

```
var child = spawn('script');
child.stdin.setEncoding('utf8');
child.stdout.on('data', function (data) {
    console.log(data.toString().trim()); // tells me to input my data
    child.stdin.write('my data\n');
}); 
```

在我输入我的数据后，子脚本应该继续，但它会挂在那里。

# 解决方案

实际上上面的代码对我有用。我在子脚本中使用了[commander.js](https://github.com/visionmedia/commander.js)来提示用户采取行动。以下是我如何回应孩子的脚本提示：

```
child.stdout.on('data', function (data) {
    switch (data.toString().trim()) {
        case 'Username:':
            child.stdin.write('user');
            break;
        case 'Password:':
            child.stdin.write('pass');
            break;
    }
}); 
```

同样的事情适用于[假设](https://github.com/jprichardson/node-suppose)：

```
var suppose = require('suppose');

suppose('script')
    .on('Username: ').respond('user')
    .on('Password: ').respond('pass')
.error(function (err) {
    console.log(err.message);
})
.end(function (code) {
    console.log(code);
    done();
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T08:07:23.863

你可以使用包`suppose`。这就像[Unix Expect](http://en.wikipedia.org/wiki/Expect)。完全公开，我是作者。

从 Github 页面上的示例中，您可以看到它编写 NPM 脚本的示例：[https ://github.com/jprichardson/node-suppose](https://github.com/jprichardson/node-suppose)

例子：

```
var suppose = require('suppose')
suppose('script')
.on(/\w*/).respond('my data\n')
.end(function(code){
  console.log('Done: ' + code); 
}) 
```

# php - PHP - 减去工作日和工作时间的日期

> ID：13655722
> 
> 赞同：0
> 
> 时间：2012-12-01T02:14:22.577
> 
> 标签：php, datetime

我想计算两个日期之间的工作时间。所以我需要忽略周六/周日，我的工作时间是上午 9 点到下午 6 点（9:00 到 18:00）。

我在网上搜索并尝试了一些变化，但似乎没有任何效果。任何人都可以帮忙吗？

我一直在看这个链接： [计算两个日期之间的](https://stackoverflow.com/questions/8914360/calculating-working-hours-between-two-dates) [工作时间从 php 中的两个给定时间减去非工作时间和天数](https://stackoverflow.com/questions/12374275/subtract-non-working-hours-and-days-from-two-given-times-in-php) [计算 PHP 中两个日期之间的工作时间](https://stackoverflow.com/questions/11396562/calc-the-working-hours-between-2-dates-in-php)

但是，或者他们没有得到答案，或者答案提供了它不起作用。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:00:14.350

我根据自己的需要在 web 和 stackoverflow 上调整了一些功能。他们来了。

调用脚本：

```
date_default_timezone_set("Europe/Lisbon");
$startDate=strtotime('2012-11-30 00:15:33');
$endDate = strtotime('2012-12-05 10:15:00');

echo "Working hours from create date until due date -> ".seconds2human(work_hours_diff($startDate,$endDate)); 
```

人类可读的秒数（改编自[http://snippetsofcode.wordpress.com/2012/08/25/php-function-to-convert-seconds-into-human-readable-format-months-days-hours-minutes/](http://snippetsofcode.wordpress.com/2012/08/25/php-function-to-convert-seconds-into-human-readable-format-months-days-hours-minutes/) ):

```
function seconds2human($ss) {
    $s = $ss%60;
    $m = floor(($ss%3600)/60);
    $h = floor(($ss)/3600);

    return "$h hours, $m minutes, $s seconds";
} 
```

使用工作日和工作时间的子跟踪日期（改编自[计算两个日期之间的工作时间](https://stackoverflow.com/questions/8914360/calculating-working-hours-between-two-dates/)）：

```
function work_hours_diff($date1,$date2) {
    if ($date1>$date2) { 
        $tmp=$date1; 
        $date1=$date2; 
        $date2=$tmp; 
        unset($tmp); 
        $sign=-1; 
    } else $sign = 1;
    if ($date1==$date2) return 0;

    $days = 0;
    $working_days = array(1,2,3,4,5); // Monday-->Friday
    $working_hours = array(9, 17.5); // from 9:00 to 17:30 (8.5 hours)
    $current_date = $date1;

    $beg_h = floor($working_hours[0]); 
    $beg_m = ($working_hours[0]*60)%60;
    $end_h = floor($working_hours[1]); 
    $end_m = ($working_hours[1]*60)%60;

    //In case date1 is on same day of date2
    if (mktime(0,0,0,date('n', $date1), date('j', $date1), date('Y', $date1))==mktime(0,0,0,date('n', $date2), date('j', $date2), date('Y', $date2))) {
        //If its not working day, then return 0
        if (!in_array(date('w', $date1), $working_days)) return 0;

        $date0 = mktime($beg_h, $beg_m, 0, date('n', $date1), date('j', $date1), date('Y', $date1));
        $date3 = mktime($end_h, $end_m, 0, date('n', $date1), date('j', $date1), date('Y', $date1));

        if ($date1<$date0) {
            if ($date2<$date0) return 0;
            $date1 = $date0;
            if ($date2>$date3) $date2=$date3;
            return $date2-$date1;
        }
        if ($date1>$date3) return 0;
        if ($date2>$date3) $date2=$date3;
        return $date2-$date1;
    }

    //setup the very next first working time stamp
    if (!in_array(date('w',$current_date) , $working_days)) {
        // the current day is not a working day

        // the current time stamp is set at the beginning of the working day
        $current_date = mktime( $beg_h, $beg_m, 0, date('n',$current_date), date('j',$current_date), date('Y',$current_date) );

        // search for the next working day
        while ( !in_array(date('w',$current_date) , $working_days) ) {
            $current_date += 24*3600; // next day
        }
    } else {
        // check if the current timestamp is inside working hours
        $date0 = mktime( $beg_h, $beg_m, 0, date('n',$current_date), date('j',$current_date), date('Y',$current_date) );
        // it's before working hours, let's update it
        if ($current_date<$date0) $current_date = $date0;

        $date3 = mktime( $end_h, $end_m, 0, date('n',$current_date), date('j',$current_date), date('Y',$current_date) );

        if ($date3<$current_date) {
            // outch ! it's after working hours, let's find the next working day
            $current_date += 24*3600; // the day after
            // and set timestamp as the beginning of the working day
            $current_date = mktime( $beg_h, $beg_m, 0, date('n',$current_date), date('j',$current_date), date('Y',$current_date) );
            while ( !in_array(date('w',$current_date) , $working_days) ) {
                $current_date += 24*3600; // next day
            }
        }
    }

    // so, $current_date is now the first working timestamp available...

    // calculate the number of seconds from current timestamp to the end of the working day
    $date0 = mktime( $end_h, $end_m, 0, date('n',$current_date), date('j',$current_date), date('Y',$current_date) );
    $seconds = $date0-$current_date;

    // calculate the number of days from the current day to the end day

    $date3 = mktime( $beg_h, $beg_m, 0, date('n',$date2), date('j',$date2), date('Y',$date2) );
    while ( $current_date < $date3 ) {
        if (in_array(date('w',$current_date) , $working_days) ) $days++; // it's a working day
        $current_date += 24*3600; // next day
    }
    $days--; //because we've already count the first day (in $seconds)

    // check if end's timestamp is inside working hours
    $date0 = mktime( $beg_h, $beg_m, 0, date('n',$date2), date('j',$date2), date('Y',$date2) );
    if ((!in_array(date('w', $date2), $working_days)) || ($date2 < $date0)) {
        // it's before, so nothing more !
    } else {
        // is it after ?
        $date3 = mktime( $end_h, $end_m, 0, date('n',$date2), date('j',$date2), date('Y',$date2) );
        if ($date2>$date3) $date2=$date3;
        // calculate the number of seconds from current timestamp to the final timestamp
        $tmp = $date2-$date0;
        $seconds += $tmp;
     }

    // calculate the working days in seconds
    $seconds += 3600*($working_hours[1]-$working_hours[0])*$days;

    return $sign * $seconds;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-07T15:39:25.160

我知道为时已晚，但我想这个问题还没有解决，我编写了一个代码，可以帮助其他人解决同样的问题。这段代码只是增加工作日，所以，它会跳过午餐时间，周六和周日。

```
<?php 
function recursivoHorarioComercial($data)
{
$hora =  date("H", strtotime($data));
if($hora >= 18){
    $arrHorarios = array('18'=>'15','19'=>'14','20'=>'13','21'=>'12','22'=>'11','23'=>'10','00'=>'9','01'=>'8','02'=>'7',);
    $minutes = (60 * $arrHorarios[$hora]);
    $data = date("Y-m-d H:i:s", strtotime("+".$minutes." minutes", strtotime($data)));
}
$diaSemana = date("l", strtotime($data));
if($diaSemana == "Saturday"){
    $extraMinutes = (2 * 24 * 60);
    $data = date("Y-m-d H:i:s", strtotime("+".$extraMinutes." minutes", strtotime($data)));
} elseif($diaSemana == "Saturday"){
    $extraMinutes = (1 * 24 * 60);
    $data = date("Y-m-d H:i:s", strtotime("+".$extraMinutes." minutes", strtotime($data)));
}
$horaFim = date("H", strtotime($data));
return $data;
}
function incrementMinutes($data,$minutes)
{
$hours = floor($minutes / 60);
$minutes = ($minutes % 60);
$hid = 8;
$days = floor($hours/$hid);
$horaINi =  date("H", strtotime($data));
$hours = $hours - ($days * $hid);
$data = date("Y-m-d H:i:s", strtotime("+".$minutes." minutes", strtotime($data)));
$data = recursivoHorarioComercial($data);
$data = date("Y-m-d H:i:s", strtotime("+".$hours." hours", strtotime($data)));
$data = recursivoHorarioComercial($data);
for ($i = 1; $i <= $days; $i++){
    $data = date("Y-m-d H:i:s", strtotime("+1 day", strtotime($data)));
    $data = recursivoHorarioComercial($data);
}
$horaFim = date("H", strtotime($data));
if($horaINi <= 12 && $horaFim >= 12 ){
    $data = date("Y-m-d H:i:s", strtotime("+60 minutes", strtotime($data)));
}
return $data;
}

$date = "2016-04-06 09:00:00";
$minutos =  24 * 60; //increase 24 hours
echo "Now: ".$data."<br />";
echo "<h2>Modified</h2>";
echo incrementMinutes($date,$minutos)."<br />";

?> 
```

我刚刚测试了这段代码，它工作正常。我希望这可以帮助任何人。

再见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-15T08:58:16.890

我知道我参加聚会迟到了，但我试图找到答案并花了几个小时创建自己的答案，我并不是说它完美，如果有人想修改我的代码以使其更清晰，请随意。仍然有一些事情要改变，但它的工作原理。我用碳来协助约会。

```
 function getWorkingHoursDifference($start,$end){

// Declare Business Hours Start
$BusinessHoursStart = '08:30:00';

// Declare Business Hours Start
$BusinessHoursEnd = '17:00:00';

// Set Full Day Span // *Need to Calc from above
$fullDayMinutes = 8.5*60;

// Declare Exclusions
$exclusions = ['Saturday', 'Sunday'];

// Declare Start Time
$TimeStart  = Carbon::parse($start);

// Declare End Time
$TimeEnd    = Carbon::parse($end);

// Create Start Date
$DateStart  = Carbon::parse(date_format($TimeStart, 'Y-m-d'));

// Create End Date
$DateEnd    = Carbon::parse(date_format($TimeEnd, 'Y-m-d'));

// Create Period Span
$period = CarbonPeriod::create($DateStart, $DateEnd);

// Create Period Array
$period  = $period->toArray();

// Set Day Counter
$dayCount = 0;

// Set Loop Counter
$loopCount = 0;

// Total Minutes
$totalMinutes = 0;

foreach ($period as $date) {$dayCount++;}

    // Debugging
        //echo '<table class="table"><thead><th>LoopCount</th><th>Period Date</th><th>Day</th><th>Day Start</th><th>Day End</th><th>Minutes</th></thead>';

        foreach ($period as $date) {

        $dayOnly        = date_format($date, 'Y-m-d');
        $dayOnlyName    = date_format($date, 'l');
        $dayStart       = Carbon::parse($dayOnly.$BusinessHoursStart);
        $dayEnd         = Carbon::parse($dayOnly.$BusinessHoursEnd);

                // Clean Minutes
                $minutes = 0;
                // Loop Counter
                $loopCount++;

                // Check Excluded Days
                if(in_array($dayOnlyName, $exclusions)){$minutes = 0;}

                // Check if its a single day
                elseif($loopCount == 1 && $dayCount == 1){
                    if($TimeStart < $dayStart && $TimeEnd > $dayStart && $TimeEnd < $dayEnd){$minutes = $dayStart->diffInMinutes($TimeEnd);}
                    // If the time start is after business hours then 0
                    elseif($TimeStart > $dayEnd){$minutes = 0;}
                    // If the time start is after start of the day, but before closing hours
                    elseif($TimeStart > $dayStart){$minutes = $TimeStart->diffInMinutes($TimeEnd);}

                }

                // First Day
                elseif($loopCount == 1){
                    // If the Time Start is before business hours, count as a full day.
                    if($TimeStart < $dayStart){$minutes = $fullDayMinutes;}
                    // If the time start is after business hours then 0
                    elseif($TimeStart > $dayEnd){$minutes = 0;}
                    // If the time start is after start of the day, but before closing hours
                    elseif($TimeStart > $dayStart){$minutes = $TimeStart->diffInMinutes($dayEnd);}
                }

                // Last Day (loopCounter Matches Total Day Counter)
                elseif($loopCount == $dayCount){
                    // If the Time is before the start of the business day
                    if($TimeEnd< $dayStart){$minutes = 0;}
                    // If the End Time is after the day end then full day is counted
                    elseif($TimeEnd > $dayEnd){$minutes = $fullDayMinutes;}
                    // If the End time is after the start but before the end of business hours, work out the difference
                    elseif($TimeEnd > $dayStart){$minutes = $dayStart->diffInMinutes($TimeEnd);}
                }

                // All other days in the middle
                else{$minutes = $fullDayMinutes;}

                // Debugging
                //echo '<tr><td>'.$loopCount.'</td><td>'.$date.'</td><td>'.$dayOnlyName.'</td><td>'.$dayStart.'</td><td>'.$dayEnd.'</td><td>'.$minutes.'</td></tr>';

                $totalMinutes = $totalMinutes + $minutes;

            }

        //echo '</table>';

        return $totalMinutes;
} 
```

# spring - 无需提交的春季安全检查

> ID：13655725
> 
> 赞同：0
> 
> 时间：2012-12-01T02:14:56.307
> 
> 标签：spring, spring-mvc, spring-security

我计划创建一个授权位置列表供用户登录（如果他们有多个位置），但是目前在用户登录之前我无法执行此操作。当他们成功通过身份验证时会获取该列表。

我想知道是否有人知道如何检查角色列表并计算用户拥有的数量。如果列表中有多个匹配项，我想以数组形式返回列表。

我正在考虑使用本文中找到的 hasRole，[但是](https://stackoverflow.com/questions/3021200/how-to-check-hasrole-in-java-code-with-spring-security)我不确定如何将它与存储为 xml 的另一个列表进行比较。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:54:55.613

我不确定您到底想要什么，但是要获得用户的权限，请先致电

```
Authentication a  = SecurityContextHolder.getContext().getAuthentication(); 
```

然后你可以打电话

```
Set<String> roles = AuthorityUtils.authorityListToSet(a.getAuthorities()); 
```

这将为您提供作为一组字符串的角色，您可以随意检查或计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T20:59:12.550

当您想要获取未经身份验证的用户的角色时，您需要访问存储用户对角色的分配的存储。

如果您将用户和角色存储在 LDAP 中，那么您需要查询该 LDAP。

# magento - 哪些 Magento 网站目录和文件不能使用 Codeguard 等云备份解决方案进行备份？

> ID：13655733
> 
> 赞同：2
> 
> 时间：2012-12-01T02:17:03.143
> 
> 标签：magento, version-control, backup, codeguard

我在网站上安装了 Magento 1.7.0.2，并希望通过 FTP 使用 Codeguard (codeguard.com) 在云中备份。我被问到要选择哪些目录进行备份，并建议删除 /var/cache 和 /var/temp 目录，因为 codeguard 会比较不同版本的备份并相应地更新后续备份。显然，不应备份缓存和临时文件夹。

我的问题是我不应该备份哪些其他目录和文件？我的 /var 目录包含以下子目录和文件：cache、export、locks、package、session、tmp 和 .htaccess 文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T02:40:25.540

您不需要备份：

*   `/media/catalog/product/cache`
*   `/var/cache`
*   `/var/session`
*   `/var/tmp`

您可以备份：

*   `/var/export`, 如果您使用预定的导入/导出并需要保存导入导出的结果。然而，这些都不是很重要。
*   `/var/locks`，如果您将数据库快照与源一起备份，因为保留了一些正在进行的进程的锁
*   `/var/log`, 如果您对保留日志、异常感兴趣
*   `/var/package`, 如果你使用 Magento Connect 安装扩展（但不要备份`/var/package/tmp`）

您需要备份：

*   `/var/.htaccess`

我还建议您在一天内为您的 Magento 商店制作快照，并与一周后制作的快照进行比较。那是因为您的自定义或第 3 方扩展可能会添加更多文件夹/文件，应将其排除在外。因此，添加/更改的文件列表将帮助您查看，还有什么不应该存储在备份中。

# java - Java 更新语句问题

> ID：13655741
> 
> 赞同：0
> 
> 时间：2012-12-01T02:18:16.297
> 
> 标签：java, jdbc

我正在尝试通过根据旧 SSN 搜索客户然后更新它来更新客户的 SSN。我错过了什么？即使我知道我在数据库中有 ssNum 的匹配项，这也不会返回结果。谢谢。

```
String query = "UPDATE Customers SET ss_num = ('" + updateSsn
                + "') WHERE ss_num = ('" + ssNum + "')"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T02:30:50.593

这种类型的查询是不安全的（容易受到[SQL 注入](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)的影响）。如下编写您的查询并使用[`PreparedStatement`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)：

```
String query = "UPDATE Customers SET ss_num = ? WHERE ss_num = ?";
PreparedStatement ps = con.prepareStatement(query);
ps.setString(1, updateSsn);
ps.setString(2, ssnNum); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:20:19.333

你需要使用`executeUpdate()`方法，它不会返回`ResultSet`，但它会返回`numberOfRowsUpdated`

`PreparedStatement`改为使用

# c# - 在 windows 窗体中显示透明 gif 文件

> ID：13655743
> 
> 赞同：2
> 
> 时间：2012-12-01T02:18:21.943
> 
> 标签：c#, winforms, gif

如何在 Windows 窗体上显示 gif 图像，同时使其透明，例如 70%？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:06:40.637

您所要求的称为 Alpha 通道。不幸的是，GIF 不支持它。从[这篇文章](http://www.icongalore.com/xp-icon-articles/alpha-channel-explained.htm)：

> TIFF、TGA、PNG、PSD 和 GIF 都支持 alpha，但实际上只有 PNG 和 GIF 用于应用程序和 Web。然而，Gif 使用了一种特殊类型的 alpha。而不是 GIF 图像中包含透明度的 alpha 通道，它只有一个开/关透明度。这意味着**GIF 图像中的像素可以是完全不透明的，也可以是完全透明**的。两者之间没有。

可以以编程方式绘制具有自定义不透明度的图像。见这些：

*   [使用 Graphics.DrawImage() 绘制具有透明度/Alpha 通道的图像](https://stackoverflow.com/questions/10658994/using-graphics-drawimage-to-draw-image-with-transparency-alpha-channel)
*   [.DrawImage 不透明度？](https://stackoverflow.com/questions/5519956/drawimage-with-opacity)
*   [如何实现 Alpha 混合](http://www.codeproject.com/Articles/5034/How-to-implement-Alpha-blending)
*   [使用 GDI+ 进行 Alpha 混合](http://www.codeproject.com/Articles/9778/Alpha-Blending-using-GDI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:28:13.993

您可以为 GIF 选择 0% 或 100% 透明，但不能在它们之间选择任何值。

# iphone - 哪些云数据库公司允许您使用 JSON 直接从移动客户端存储数据？

> ID：13655746
> 
> 赞同：0
> 
> 时间：2012-12-01T02:19:44.957
> 
> 标签：iphone, database, json, mobile

目标是将数据存储在托管数据库中，而无需接触我们的服务器。

如果有多家公司提供此服务，那么每个公司的优缺点是什么？您对这些服务有何体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:58:59.163

Parse 是一家了不起的公司，可以通过一个非常好用且易于使用的 api 来满足您的需求。查看[parse.com](http://www.parse.com)

他们在那里有大量信息可以帮助您入门，如果您在我上次检查时每月使用少于 100 万个 api 调用，它们是免费的。我曾多次将它们用于个人项目，从存储数据到发送推送通知。我相信他们的服务得到了相当可靠的亚马逊云服务器的支持。

# c++ - 将节点插入 B-Tree

> ID：13655753
> 
> 赞同：2
> 
> 时间：2012-12-01T02:20:46.960
> 
> 标签：c++, b-tree

我正在尝试为 BTree 实现插入方法。我的 BTree 类拥有一个指向根 BNode 的指针。插入方法有内部方法和外部方法。内部的还没有递归，但我无法让传入的根保持其第二次插入的值。我认为这可能是一个范围界定问题，但我不确定它到底是什么。在 main 中，我尝试插入 2 个值来测试该方法，但似乎在第二次插入中它仍然认为 root == null 并覆盖了第一个键值。有谁知道为什么会发生这种情况？

这是我的功能：

```
 template<typename T, int M>
    class BTree{
    private:

        returnStatus _insert( BNode<T, M>* r, const T& val, BNode<T, M>*& dptr, T& dkv );
        returnStatus shuffle_insert( BNode<T, M>* r, const T& val );
        returnStatus split_insert( BNode<T, M>* r, const T& val, BNode<T, M>*& dptr, T& dkv );
        bool isNodeLeaf( BNode<T, M>* node );
        int _getNodeIndex( BNode<T, M>* r, const T& val );

        returnStatus _find( BNode<T, M>* r, const T& val );
        returnStatus _remove( BNode<T, M>* r, const T& val, BNode<T, M>* & dptr, T& dkv );
        void _traverse( BNode<T, M>* r );

    public:
        BNode<T, M>* root;
        int size;

        BTree();
        void insert( const T& val );
        returnStatus find( const T& val );
        void remove( const T& val );
        void traverse();
        ~BTree();

    };
    template<typename T, int M>
    BTree<T, M>::BTree()
    {
    root = NULL;
    size = 0;
        }
        template<typename T, int M>
    returnStatus BTree<T, M>::_insert( BNode<T, M>* r, const T& val, BNode<T, M>*& dptr, T& dkv )
    {
    if( r == NULL ){
        dptr = NULL;
        dkv = val;
        r = new BNode<T, M>;
        r->keys[0] = val;
        size++; 
        r->keyCount++;

        return unsuccessful;
    }else{
        returnStatus contains = find(val);

        if( contains == duplicate ){
            return duplicate;
        }else{

            if( r->keyCount < M-1 ){
                returnStatus hold = shuffle_insert(r, val);
                return hold;
            }else{
                cout<<"need to split"<<endl;
                //split_insert
            }
        }
    }
}
template<typename T, int M>
returnStatus BTree<T, M>::shuffle_insert( BNode<T, M>* r, const T& val )
{
    if(r->keyCount == M-1 ) return unsuccessful;

    int index = _getNodeIndex(r, val);

    for(int i = r->keyCount; i>index; i--){
        r->keys[i+1] = r->keys[i];
    }
    r->keys[index] = val;
    r->keyCount++;
}
template<typename T, int M>
returnStatus BTree<T, M>::split_insert( BNode<T, M>* r, const T& val, BNode<T, M>*& dptr, T& dkv )
{

}
template<typename T, int M>
bool BTree<T, M>::isNodeLeaf( BNode<T, M>* node )
{
    for( int i = 0; i< M-1; i++ ){
        if( node->ptr[i] != NULL ){
            return false;
        }
    }
    return true;
}
template<typename T, int M>
returnStatus BTree<T, M>::_find( BNode<T, M>* r, const T& val )
{
    for( int i = 0; i<M; i++ ){
        if( r->ptr[i] != NULL ){
            _find( r->ptr[i], val);
        }
    }
    for( int i =0; i<r->keyCount; i++ ){
        if( r->keys[i] == val ) return duplicate;
    }
    return unsuccessful;
}
template<typename T, int M>
int BTree<T, M>::_getNodeIndex( BNode<T, M>* r, const T& val )
{
    for( int i = 0; i < r->keyCount; i++){
        if( val < r->keys[i] ){
            return i;
        }
    }
    return -1;
}

    template<typename T, int M>
void BTree<T, M>::insert( const T& val )
{
    int set = 0;
    BNode<T, M>* myNode = new BNode<T, M>();                        //May not be correct way to instantiate Reference to pointer
    returnStatus status = _insert( root, val, myNode, set);

    if( status == successful ){
        return;
    }else if( status == unsuccessful ){

    }else if( status == duplicate ){
        cout<<val<<" has already been inserted."<<endl;
    }

}
template<typename T, int M>
returnStatus BTree<T, M>::find( const T& val )
{
    returnStatus stat = _find(root, val);
    return stat;
}
template<typename T, int M>
void BTree<T, M>::remove( const T& val )
{

}
template<typename T, int M>
void BTree<T, M>::traverse()
{
    _traverse(root);
}
template<typename T, int M>
BTree<T, M>::~BTree()
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:58:44.680

我认为以下插入 B-Tree 的方法将帮助您澄清与插入 B-Tree 有关的疑问。

```
public void insert (Comparable object)
{
if(isEmpty ())
{
    if(parent==NULL)
    {
        attachSubtree (0, new BTree(getM ()));
        key[1]=object;
        attachSubtree (1, new BTree(getM ()));
        count=1;
    }
    else
        parent.insertPair(object, new BTree (getM ()));
}

else
{
    int index = findIndex (object);
    if(index !=0 && object.isEQ (key [index])) throw new IllegalArgumentException ("duplicate key");
        subtree [index].insert(object);
}
} 
```

这摘自 [《Java 中具有面向对象设计模式的数据结构和算法》](http://www.brpreiss.com/books/opus5/html/page344.html#SECTION0011721000000000000000)一书。

# android - Android 的 TextView 颜色

> ID：13655755
> 
> 赞同：0
> 
> 时间：2012-12-01T02:21:07.227
> 
> 标签：android, colors, textview

> **可能重复：**
> [如何通过编码设置 TextView 的文本颜色？](https://stackoverflow.com/questions/4602902/how-to-set-text-color-of-textview-by-coding)

这是我的代码：

```
TextView mapTextView = new TextView(contextOverlay);
mapTextView.Text = overlayDetailsForThisOverlay.stringName; 
```

能否请我帮忙更改此文本的文本颜色。

[该文档](http://developer.android.com/reference/android/widget/TextView.html)似乎显示有一个“setTextColor”方法。

我是 Android 编程新手。我是否需要设置一个 XML 文件（我不确定如何/为什么要这样做）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:31:44.943

# iphone - 自动旋转问题

> ID：13655756
> 
> 赞同：0
> 
> 时间：2012-12-01T02:21:09.263
> 
> 标签：iphone, ios, ipad, autorotate

我有：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
return YES; 
```

}

在我所有的视图控制器中，在应用程序摘要中，所有旋转都被选中，在 info.plist 中，所有旋转都被添加到支持的键中。我什至有：

```
autoresizesSubviews = YES; 
```

添加到所有视图控制器以防万一，因为我没有使用笔尖。

现在这就是奇怪的地方。在 iPad 上，如果在我打开应用程序之前设备处于横向状态，则打开应用程序并加载它旋转到横向的子视图，直到我强制关闭应用程序并重新启动它。我试过删除应用程序并重建，我已经在几个物理设备上尝试过，但仍然没有改变。我什至在 shouldAutoRotate 方法中添加了一个 NSLog 调用，但它永远不会被调用。我什至尝试使用虚拟导航控制器对 UINavigationController 进行子类化，并将 shouldAutoRotate 方法添加到虚拟类中。

最后，如果我将其设置为横向，则只有状态栏处于横向位置，但视图的其余部分将处于标准纵向。

关于从哪里开始诊断的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:27:59.353

你有没有设置`self.window.rootViewController`在你`AppDelegate`的`didFinishLaunchingWithOptions`？我注意到在 iOS 5 及更低版本中，即使您没有设置 ，应用程序也可以正确旋转`rootViewController`，但您必须在 iOS 6 中设置它。

还可能值得注意的是，iOS 6 中的自动旋转发生了变化（略微？）。`shouldAutorotateToInterfaceOrientation`现在有两种方法（`shouldAutorotate`和`supportedInterfaceOrientations`）用于自动旋转行为，而不是只有一种方法（ ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:38:38.603

自动旋转在新版本的 iOS 中非常烦人，如果你想做与苹果的基本 ViewControllers 有点不同的事情，那会很痛苦，所以我建议你使用：

```
- (void)viewDidAppear:(BOOL)animated {

UIDevice *device = [UIDevice currentDevice];                    //Get the device object
[device beginGeneratingDeviceOrientationNotifications];         //Tell it to start monitoring the accelerometer for orientation
NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];    //Get the notification centre for the app
[nc addObserver:self                                            //Add yourself as an observer
       selector:@selector(orientationChanged:)
           name:UIDeviceOrientationDidChangeNotification
         object:device];

}

- (void)viewWillDisappear:(BOOL)animated {

[[NSNotificationCenter defaultCenter] removeObserver:self];

} 
```

并自己制作动画，相信我，与尝试使用苹果默认方法设置标志和一切正确相比，您将节省大量时间

```
- (void)orientationChanged:(UINotifiacion*)notification {

UIDevice *device = (UIDevice *)[notification object];
if (UIInterfaceOrientationIsLandscape([device orientation])) {
  [UIView animateWithDuration:0.4 animations:^{
    self.view.transform = CATransform3DMakeRotation(M_2_PI, 0, 0, 1);
      }];

   }

} 
```

# linux - 八度保存未定义

> ID：13655759
> 
> 赞同：0
> 
> 时间：2012-12-01T02:22:25.533
> 
> 标签：linux, matlab, plot, gnuplot, octave

我有一个八度代码

```
M = csvread('result.csv');
h=hist(M);
saveas(h,'hist.jpg'); 
```

我收到错误消息 error: `saveas' undefined near line 11 column 1

我记得我以前确实使用过 saveas。怎么是“未定义”，我目前的八度版本是

$ octave -version
GNU Octave，版本 3.2.4 版权所有 (C) 2009 John W. Eaton 和其他人。

我只想将绘图保存到图像文件中。除了“保存”，我还有其他选择吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:59:00.920

您可以将命令`print`视为

```
print(h,'name',['format']); 
```

[这](http://www.gnu.org/software/octave/doc/interpreter/Printing-and-Saving-Plots.html)是完整的参考。

# regex - 我在带有验证表达式的多行文本框上的正则表达式验证器中做错了什么？

> ID：13655760
> 
> 赞同：0
> 
> 时间：2012-12-01T02:22:40.123
> 
> 标签：regex, multilinestring

```
<asp:RegularExpressionValidator id="EmailLinkValidator" runat="server"
     controltovalidate="TextBox1" display="Dynamic" 
     ValidationExpression="?m:(^(?:(?:<a )?href|</a>\r?\n?)+)" 
     cssclass="clsError" errormessage="<%=this.ERR_MSG%>">*
</asp:RegularExpressionValidator> 
```

我正在尝试验证多行文本框以检查输入的值是否有任何匹配的字符串为`HREF`or `href`or `<A HREF`or `<a href`or `</A>`or `</a>`。如果是这样，我需要给出错误消息。我究竟做错了什么？

这就是我更新的内容

```
ValidationExpression="(?m:(^(?:(?:<a )?href|</a>\r?\n?)+))" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:15:04.260

看来您有一个内联`m` *多行*模式`(?m: modifier grouping)`，它的外括号被切断了。尝试：

```
ValidationExpression="(?m:(^(?:(?:<a )?href|</a>\r?\n?)+))" 
```

# xna - 如何创建 Button/Switch-Like Tile，您可以在其中踩到它并更改其值？

> ID：13655761
> 
> 赞同：0
> 
> 时间：2012-12-01T02:22:45.330
> 
> 标签：xna, xna-4.0

如果玩家在它为真时踩到一个Button-Tile，它就会变为假。如果玩家踩到一个 Button-Tile 时它是假的，它就会变成真的。

问题是，当玩家站在（相交）Button-Tile 时，它​​会不断更新条件。所以，从真，变成假。因为它是假的，玩家与之相交，它又变成了真的。真假真假等等。

我使用 ElapsedGameTime 使更新过程变慢，玩家可以有机会将 Button 更改为 true 或 false。

但是，这不是我正在寻找的解决方案。当玩家站在按钮图块上时，是否有任何其他方法可以使其保持 False/True 状态？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T02:50:49.863

使按钮具有`bool isPressed`默认为 false 的 a。

然后当玩家进入瓷砖时，检查进入事件是什么`&& !isPressed`

您所要做的就是在您的条件下结合两件事，玩家踩到按钮并且按钮尚未触发 - 您不必在时间上放慢任何速度来完成此操作。然后当玩家离开瓷砖或不再在瓷砖上时，这取决于您的检查是什么，只需再次将 isPressed 设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:54:56.960

我有你的解决方案。首先，你创建参数：

```
MouseState nowMouseState, lastMouseState; 
```

在加载内容（）中：

```
lastMouseState = Mouse.GetState(); 
```

创建一个函数：

```
public void ChangeState()//I check button have position:Vector2(0,0) and hight= width=100

{

 nowMouseState= Mouse.GetState();//click

 if (Mouse.GetState().X>0&&Mouse.GetState().X<100
&&Mouse.GetState().Y>0&&Mouse.GetState().Y<100
&&nowMouseState.LeftButton==ButtonState.Pressed
&&lastMouseState.LeftButton==ButtonState.Released)

{

                if (Button_Tile)
                    Button_Tile=false;
                else
                    Button_Tile= true;

                lastMouseState = nowMouseState;//click
            }
            if (Mouse.GetState().LeftButton==ButtonState.Released)
            {
                lastMouseState = Mouse.GetState();
            }
} 
```

然后您可以将 ChangeState() 放入 Update() 中。

# javascript - 我需要向父 div 添加一个像素

> ID：13655762
> 
> 赞同：7
> 
> 时间：2012-12-01T02:23:21.263
> 
> 标签：javascript, jquery, html, css

我有一个“教室”的 div，其中包含每个“学生”的 div。每个“学生” div 都包含一个图像。这是HTML：

```
<div class="classroom">
    <div class="student">
        <img class="student-image" src="http://dnqgz544uhbo8.cloudfront.net/_/fp/img/home/f.AmzRdUdc4pEtCuGvU03WXQ.jpg">
    </div>

    <div class="student">
        <img class="student-image" src="http://dnqgz544uhbo8.cloudfront.net/_/fp/img/home/k.jXX55KhHUWZGTAb-GpPkdg.jpg">
    </div>

    <div class="student">
        <img class="student-image" src="http://dnqgz544uhbo8.cloudfront.net/_/fp/img/home/c.ZKQXc2Kc8-po-OK6AhDbtw.jpg">
    </div>
</div> 
```

我想在一行中显示所有“学生” div，所以我使用以下 css：

```
body {
  padding: 0;
  margin: 0;
  overflow: hidden;
}

html, body {
    height: 100%;
}

.classroom {
    position: relative;
    height: 100%;
}

.classroom .student {
    position: relative;
    height: 100%;
    float: left;
}

.classroom .student .student-image {
    height: 100%;
} 
```

为了学生在“教室” div 中有足够的位置，我使用 jQuery 来计算“教室”的宽度：

```
$(document).ready(function() {
    var w = 0;
    $(".student").each(function() {
        w += $(this).width();
    });
    $(".classroom").width(w);
}); 
```

不幸的是，结果不是我所期望的。最后一个“学生” div 将向下一行（好像没有`float: left;`分配）。更奇怪的是，当“教室”div 的宽度增加 1 个像素时，div 会返回到第一行末尾的位置。
我做了那些 jsfiddles：在这里[http://jsfiddle.net/U3gBG](http://jsfiddle.net/U3gBG)你可以看到问题。单击结果面板并使用箭头键向下和向右滚动。
这里[http://jsfiddle.net/U3gBG/1/](http://jsfiddle.net/U3gBG/1/)可以看到计算后“教室”div的宽度加1的结果（“教室”的宽度等于“学生”宽度的和加1像素）。这个结果是我需要的。
我不明白为什么我需要将父 div 的宽度增加 1？为什么总和所有子 div 的宽度还不够？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:53:06.527

当我在调试屏幕下的 IE9 中查看此内容时，我检查了您的 div 元素和图像元素，似乎第一个图像的宽度是 999.95 而不是整数，其他两个图像也都是非整数宽度值。

似乎有些浏览器会将这个数字四舍五入，而有些浏览器会将其向下舍入，因此您可以使用其他答案中建议的 css，也可以像您正在做的那样简单地添加 +1 像素，或者您可以使用 parseint( ) 函数或某种汇总函数，以确保您的图像在父 div 中有足够的空间。

编辑：

我认为问题源于的 css 值`height: 100%`，这意味着宽度是计算出来的，而不是固定到实际图像大小，因此宽度的非整数值（以像素为单位），所以为了继续使用这种放置图像的方法，你会在将父 div 的总宽度相加时必须使用`math.ceil()`或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:21:38.743

将它们分成 3 个类，而不是让它们像你拥有它们那样通过链条。而不是拥有

```
.classroom {
    white-space: nowrap;
    height: 100%;
}

.classroom .student {
    height: 100%;
    display: inline-block;
    float: left;
}

.classroom .student .student-image {
    height: 100%;
}​ 
```

让他们

```
.classroom {
    white-space: nowrap;
    height: 100%;
}

.student {
    height: 100%;
    display: inline-block;
    float: left;
}

.student-image {
    height: 100%;
}​ 
```

所以你已经定义了每一个......现在就你遇到的问题而言，那是因为你在 CSS 中没有足够具体地说明你想要的东西，你现在已经设置了宽度或高度，你只有浮点数设置为 te student 元素，所以它很容易做奇怪的事情。尝试类似..

```
.classroom {
    width:308px;
    height:100px;
    float:left;
    margin-left:0px;
}

.student {
    height:100px;
    width:100px;
    margin-left:2px;
    float: left;
}

.student-image {
    height: 100px;
    width:100px;
    float:left;
}​ 
```

如果我给出的确切规格对你的照片来说足够大，我想知道，但只是为了向你展示你应该如何尝试对它们进行一些控制......并注意我给出的宽度规格。教室是 308 像素宽，然后学生是 100 像素宽，左边距为 2 像素，所以 3 个学生框架每个 100 像素宽，每个框架有 2 像素边距，总宽度为 306 像素，剩下 2 个像素给在最后一个学生框架的右边，所以这一切都加起来了.. 计算出你需要的宽度并考虑边距。希望这可以帮助... ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T02:40:44.717

因此，根据 Eyal 的评论，我对这个问题的根源产生了好奇。在我的系统上，我注意到 Chrome 已包装，但 IE 和 FF 没有。经过更多挖掘后，我发现包装是由于渲染的屏幕区域造成的。

您正在使用 jQuery 调整父级的大小，但是当除以三时，您将得到四舍五入。在某些情况下，向下取整会导致容器对于图像和第三次环绕太窄。如果它四舍五入，那么你有足够的空间并且不会发生包装。

我在下面发布的解决方案是一个更强大的答案，因为它会在浏览器调整大小时自动重新计算。您必须不断地运行您的 js 并监视调整大小事件以使用 JS 处理此问题。希望有帮助。

* * *

除了使用 javascript，您可以使用 CSS 代替吗？

设置`student`为`display:inline`。然后设置`parent`为`white-space:nowrap`。他们不会包裹。接下来，您必须处理图像之间的空白。因为我们现在将它们设置为`inline`html 中的任何空白都会导致间隙。因此，如果您在图像容器上设置 `font-size: 0px'，它会折叠间隙。如果容器需要包含文本，请记住将字体设置回正数。不需要弄乱js。

[http://jsfiddle.net/U3gBG/8/](http://jsfiddle.net/U3gBG/8/)

```
body {
  padding: 0;
  margin: 0;
  overflow: hidden;
}

html, body {
    height: 100%;
}

.classroom {
    white-space: nowrap;
    height: 100%;
    font-size: 0px;
}

.classroom .student {
    height: 100%;
    display: inline;
}

.classroom .student .student-image {
    height: 100%;
}​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-01T03:17:52.593

你可以用 ul li

```
 <ul style="float:left; List-style:none;">
<li><img  src="http://dnqgz544uhbo8.cloudfront.net/_/fp/img/home/f.AmzRdUdc4pEtCuGvU03WXQ.jpg"></li>
<li> <img src="http://dnqgz544uhbo8.cloudfront.net/_/fp/img/home/k.jXX55KhHUWZGTAb-GpPkdg.jpg"></li>
 <li>   <img  src="http://dnqgz544uhbo8.cloudfront.net/_/fp/img/home/c.ZKQXc2Kc8-po-OK6AhDbtw.jpg"></li>
    </ul> 
```

并修复您的图像大小

# c# - 在大型 ASP.NET MVC 项目中同时使用 C# 和 VB.NET 代码会有什么负面影响？

> ID：13655765
> 
> 赞同：-1
> 
> 时间：2012-12-01T02:24:59.477
> 
> 标签：c#, asp.net-mvc, vb.net

我们有一家与我们合作的开发公司想要使用 VB.NET，因为这是他们最熟悉的，我们更喜欢 C#。这是一个相当大的 ASP.NET MVC 软件项目，所有前端都将在 JavaScript 中完成，因此 .NET 只是服务器端。我们应该担心他们留在 VB 中而我们留在 C# 中吗？像这样前进会有什么负面影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T02:36:06.820

项目中的行是否如此清晰，以至于您不会出现在 VB.NET 代码中并且它们不会出现在您的 C# 中？它很少那么干净，因此当您在文件之间跳转时会有很多上下文切换。您还询问了很多将要维护您的项目的人。无论谁要维护它，都应该首先获得该语言的投票。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T02:35:39.577

如果您想要跨语言互操作性，您应该考虑编写符合 cls 的程序集（通用语言规范）。

我可以提到的负面因素之一是：您不能通过大小写来区分 2 个（或更多）成员。

为什么？因为 VB 不区分大小写，而 C# 区分大小写。（即使 clr 不区分大小写）

在此处阅读有关[跨语言互操作性的](http://msdn.microsoft.com/en-us/library/a2c7tshk.aspx)
更多信息， 并在此处阅读有关[CLS 合规性的更多信息](http://msdn.microsoft.com/en-us/library/bhc3fa7f.aspx)

# matlab - 用块状或聚合方法随机替换矩阵中的元素

> ID：13655769
> 
> 赞同：3
> 
> 时间：2012-12-01T02:25:38.400
> 
> 标签：matlab, random, matrix, replace

在下面的 MATLAB 代码中，矩阵*B*是通过将矩阵*A*的一部分元素 ( `empty_x`)随机替换为*6*来创建的。不是在`empty_x`整个矩阵中随机替换元素的值，而是如何使它们保持聚集（但仍然随机放置簇）？

那就是我希望所有*6*值元素都是相邻的。如果用更小的、子集化的方阵 (size ) 替换`empty_x`方阵*A*`empty_x`中的元素来创建矩阵*B*是最简单的，那么就可以了。拥有并不总是方阵（即异质性）的团块会很酷，但不是必须的。

我将不胜感激有关如何完成此任务的一些想法。

干杯。

```
A = [1 2 3 4 5; 5 4 3 2 1; 1 4 3 2 5; 4 3 2 1 5; 2 1 3 5 4];
B = A;
nA = numel(A);
empty_x = randi(10);
B(randperm(nA,(empty_x))) = 6; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:54:06.447

我的方法如下：

```
1) Generate a single random number (uniform distribution)  
     on the interval `[1 numel(A)]`. Use this as the linear index  
     of a seed for your clump.  

while clump_size < desired_clump_size     
    2) Generate a list of all positions in the matrix adjacent to  
         (but not already included in) the existing clump.  
    3) Randomly select one of these indices  
    4) Grow the clump by placing an element in this position.  
end 
```

我不打算写代码；实现起来应该不难，特别是如果这段代码不是整个项目的性能瓶颈。

编辑：既然你自己试了一下，这里有一些代码：

```
desired_clump = 5;
matrix_size = 5;
A = zeros(matrix_size);
[C,R]=meshgrid(1:size(A,1), (1:size(A,2))'); %'# row and column numbers for each element

seed = ceil(rand(1)*numel(A));
#% I would have used randi(1) but octave online utility doesn't have it
A(seed) = 1; #% initialize a clump
clump_size = 1;

while clump_size < desired_clump
    CI = A==1; #% logical index of current clump
    CR = reshape(R(CI),1,1,[]); #% 1x1xN index of row values of current clump
    CC = reshape(C(CI),1,1,[]); #% 1x1xN index of col values of current clump
    ADJ = sum(bsxfun(@(x,y)abs(x-y),R,CR)<=1 & bsxfun(@(x,y)abs(x-y),C,CC)<=1, 3)>0 & ~A;
    #% ADJ is the indices of the elements adjacent to the current clump
    B=A; #% for display purposes only
    B(ADJ)=2;
    disp(B)
    disp(' ')
    POS = find(ADJ); #% linear indices of the adjacent elements
    IND = ceil(rand(1)*numel(POS)); #% random index into POS vector
    A(POS(IND))=1; #% grow the clump
    clump_size = clump_size+1;
end
disp(A); 
```

输出： `1`表示丛中的元素；`2`意味着有资格进行丛集扩展

```
iteration 1:
   0   0   2   1   2
   0   0   2   2   2
   0   0   0   0   0
   0   0   0   0   0
   0   0   0   0   0
iteration 2: 
   0   0   2   1   2
   0   0   2   1   2
   0   0   2   2   2
   0   0   0   0   0
   0   0   0   0   0
iteration 3: 
   0   0   2   1   2
   0   0   2   1   2
   0   0   2   1   2
   0   0   2   2   2
   0   0   0   0   0
iteration 4: 
   0   0   2   1   1
   0   0   2   1   2
   0   0   2   1   2
   0   0   2   2   2
   0   0   0   0   0

Final clump:
   0   0   0   1   1
   0   0   1   1   0
   0   0   0   1   0
   0   0   0   0   0
   0   0   0   0   0 
```

每次生成一个随机数不应该那么慢。如果它确实是一个瓶颈，毫无疑问还有一些方法可以加速它。希望这个例子能让你更进一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:51:25.560

使用上面的一些技巧，我构建了下面的代码。它适用于较小尺寸的*A*，但当*A*很大时它非常慢。感谢您的指导。

```
clear all
A = zeros(40,40);
[M N] = size(A);
B = A;
nA = numel(A);
per_clump = 10;
dClump = nA*(per_clump/100);
seed = randi(nA);
clumpers = zeros(8,1);
new_seed = seed;
counter = 0;
while counter < dClump; % size of clump
    seed = new_seed;

    for iSize = seed; % find adjacent elements

        west = iSize - M;
        if west < 1
            west = iSize; % the boundary is not periodic
        end;

        east = iSize + M;
        if east > nA
            east = iSize;
        end; %

        north = iSize - 1;
        if north < 1
            north = iSize;
        end; %

        south = iSize + 1;
        if south > nA
            south = iSize;
        end; %

        nwest = iSize - M - 1;
        if nwest < 1
            nwest = iSize;
        end; %

        neast = iSize + M - 1;
        if neast > nA
            neast = iSize;
        end; %

        swest = iSize - M + 1;
        if swest < 1
            swest = iSize;
        end; %

        seast = iSize + M + 1;
        if seast > nA
            seast = iSize;
        end; %

        clumpers = [(west) (east) (north) (south) (nwest) (neast) (seast) (swest)]; % index of adjacent elements
        %new_seed = randsample(clumpers,1); % pick one, really slow

        z = randperm(size(clumpers,2)); % this also really slow
        new_clumpers = clumpers(z);
        new_seed = new_clumpers(randi(8));

        if B(new_seed) == 6;
            %B(new_seed) = B(seed);
            new_seed = seed;
            counter = counter;
        else
            B(new_seed) = 6;
            counter = counter+1;
        end;
    end; %end adj element
end; % end clump size 
```

# html - 垂直对齐：基线受 Chrome 中的行跨度影响

> ID：13655772
> 
> 赞同：1
> 
> 时间：2012-12-01T02:26:33.743
> 
> 标签：html, css, alignment, vertical-alignment

在我的网站上，我必须为几种类型定义“vertical-align:baseline”。

这种风格在 IE 中工作得非常好，但在 Chrome 中有一个问题，我无法在最简单的示例中复制。下面的代码工作得很好，但我的网站呈现的相同代码的“姓氏”、“LLLLLL”单元格的内容与“大单元格”的基线对齐，但与自己的基线不对齐细胞。事实上，它与所有“跨越”行的基线对齐......

```
<html>
<head><title>Test table vertical alignment</title><body>
<style type="text/css">
    table.t_data
    {
        border-collapse:collapse;
        margin: 0 auto 0 auto;
    }

    table.t_data tbody th, table.t_data tbody td
    {
        border: #333 1px solid;
        vertical-align: baseline;
    }
</style>
<table class="t_data">
    <tbody>
        <tr>
            <th>Last Name</th>
            <td>LLLLLLLL</td>
            <td rowspan="3">Big cell</td>
        </tr>
        <tr>
            <th>First Name</th>
            <td>FFFFFF</td>
        </tr>
        <tr>
            <th>Team</th>
            <td>My Cool Team</td>
        </tr>

    </tbody>
</table>

</body>
</html> 
```

我认为这是一个“流行的”（众所周知的）错误，但找不到任何关于相同问题的信息。

看起来我的代码中还有其他东西会影响垂直对齐，但我不知道出了什么问题。我试图禁用不同的样式选项，但没有发现任何影响垂直对齐的选项。

**问题 1：**这种对齐方式和按行跨度分组的表格单元格是否存在已知问题？

**问题2：**如果没有通用解决方案，请查看页面上的代码：http: [//vfm-elita.com/player/4990](http://vfm-elita.com/player/4990)。您会看到第一行中的单元格是空的，它们的内容移动到底部以与更大的单元格基线对齐...

我会欢迎任何帮助或想法。非常感谢你！

PS我发现了类似的问题（http://stackoverflow.com/questions/10272553/vertical-align-baseline-doesnt-work-in-chrome），但建议的解决方案对我的情况没有帮助。

PPS 我接受我的问题可能会通过引用外部站点而导致负面反馈，但我会在几天内为这个问题而苦苦挣扎，并且会承受这种痛苦。还承诺在问题解决后删除链接。

**编辑：PPP**

具有“vertical-align:baseline”的想法是由于在同一行同时具有“纯文本”和“”元素（如按钮或输入文本字段）的情况下，必须垂直对齐表格行的内容。

但是，最近我发现“垂直对齐”样式不对齐元素内容。它对齐元素本身，所以在我的情况下，我应该将它应用于单元格内容，而不是对单元格（td，th）应用“vertical-align:baseline”。但这也解决不了问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:52:44.057

在你的 CSS 中使用“line-height”。我在尝试让按钮中的文本垂直排列在按钮中间时遇到了同样的问题。线高将允许您根据需要将其轻推至所需位置...希望这会有所帮助:)

# debugging - 阅读器宏调试

> ID：13655774
> 
> 赞同：0
> 
> 时间：2012-12-01T02:26:47.720
> 
> 标签：debugging, lisp, reader-macro

情况如下：

```
CL-USER> [bookid]
#<CLSQL-SYS:SQL-IDENT-ATTRIBUTE BOOKID>
CL-USER> (sql-expression :attribute 'bookid)
#<CLSQL-SYS:SQL-IDENT-ATTRIBUTE BOOKID>
CL-USER> [books.bookid]
#<CLSQL-SYS:SQL-IDENT-ATTRIBUTE BOOKS.BOOKID>
CL-USER> (sql-expression :attribute 'books.bookid)
#<CLSQL-SYS:SQL-IDENT-ATTRIBUTE "books.bookid"> 
```

Clsql 的 [] reader 宏的行为与 sql-expression 不同。我宁愿在宏中使用 sql-expression，因为 reader 宏可能会在那里表现得很奇怪。我尝试了macroexpand-1，但我猜它没有足够早地捕捉到扩展。如何探索阅读器宏的工作原理？

编辑：为我的 clsql 问题找到了解决方案：

```
(sql-expression :table 'books :attribute 'bookid) 
```

我仍然想知道读取宏的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T08:50:45.317

要查看阅读器宏的扩展，您需要执行以下操作`read`：

```
? (read-from-string "[books.bookid]") 
```

由于 REPL 中的*R**代表*，因此普通的REPL（读取评估打印循环）已经读取了输入，因此确实运行了读取器宏。为了防止评估，您需要引用它：*`READ`*

 *```
? '[books.bookid] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T04:45:23.113

阅读器宏是在读取时处理的，而不是在宏扩展时处理的，所以是的：对于你想要做的事情来说为时已晚。但是你可以只引用表达式。例如，使用简单的中缀阅读器宏，因为我没有安装 clsql：

```
FOO> [1 + 2]
3
FOO> '[1 + 2]
(+ 1 2) 
```

我想这会`sql-expression`在你的情况下产生调用（或类似的东西）。

另请参阅：[引用阅读器宏调用](https://stackoverflow.com/questions/13188272/quote-a-reader-macro-invocation)。*

# django - django 数据库

> ID：13655777
> 
> 赞同：0
> 
> 时间：2012-12-01T02:27:55.747
> 
> 标签：django, django-models

我正在使用 django 设计一个网站。网站的想法是拥有摄影师，每个摄影师都有一个或多个相册，每个相册都有一张或多张照片。目前我有：

```
class Photo(models.Model):
    name=models.ForeignKey('Album')
    p=models.ImageField()
    def __unicode__(self):
        return self.name
class Album(models.Model):
    name=models.ForeignKey('Photographer')
    def __unicode__(self):
        return self.name
class Photographer(models.Model):
    name=models.ForeignKey('User')
    def __unicode__(self):
        return self.name 
```

问题是如果您有相同的设计，您是否会为每个摄影师创建一个目录，并为每个相册在父目录中创建另一个目录，然后将照片存储在该相册的目录中或将它们存储在数据库中。我知道这是一个新手问题，但我真的需要帮助。如果您有其他设计可以让我更轻松，请告诉我。

提前致谢， 阿卜杜勒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T06:20:40.567

使用图像域将所有照片存储在一个地方，甚至更好地将它们存储在云存储服务中。而关于相册和摄影师的Photo模型中的ForeignKeys的关系。比使用反向关系找出每个相册或摄影师的照片。

您的代码可能如下所示

```
class Photo(models.Model):
image = ImageField(upload_to="whereever you want to")
album = ForeignKey(Album)
photographer=ForeignKey(Photographer) 
```

获得特定相册后，您可以使用 Album.set_all 和 Photographer.set_all 获取特定相册或摄影师的所有照片

`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:33:16.910

是的，将照片直接存储在文件系统中，而不是数据库中。这是一种常见的做法，有很多原因，主要与性能有关。

如果您希望拥有成千上万张照片，则不要将它们保存在一个目录中，因为这可能会导致流行系统出现性能问题。相反，设计一个适合您的应用程序的简单层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T02:34:02.483

无需为摄影师或相册创建目录。这就是数据库的用途。您可以拥有一个巨大的文件夹（在 中指定`upload_to`），其中将包含所有上传的所有摄影师和相册的图像，然后使用数据库来跟踪哪些照片属于哪个摄影师/相册。

顺便说一句，您应该`upload_to`为 指定参数`ImageField`：

```
models.ImageField(upload_to='images/') 
```

如果您真的想为每个专辑创建文件夹，您可以将一个函数传递给`upload_to`参数并在其中添加您想要的任何逻辑...更多信息请参见[此处](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)的文档。

# c++ - c++ simpleini 从目录中获取ini文件的示例？

> ID：13655779
> 
> 赞同：2
> 
> 时间：2012-12-01T02:28:14.237
> 
> 标签：c++, file, ini

嗨，有人可以帮助我，我正在尝试让 c++ 的 liberty simpleini 从不同的目录读取/写入文件，但到目前为止没有任何效果。

使用 Windows 7

```
#include "SimpleIni.h"
#include <stdio.h>

int main( int argc, char** argv)
{
CSimpleIniA ini;

ini.SetValue("test", "default", "1");
ini.SaveFile("c:\\test\\test.ini");
//tried ini.SaveFile("c:\test\test.ini");

ini.LoadFile("c:\\test\\test.ini");
//tried ini.LoadFile("c:\test\test.ini");
const char * set = ini.GetValue("test", "default", "");

printf( "value = %s", set ); // should load from c:\test\test.ini

return 0;
} 
```

来源[http://code.jellycan.com/simpleini-doc/html/index.html](http://code.jellycan.com/simpleini-doc/html/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:46:35.690

问题在于它不创建目录。您应该先自己创建“c:\test”目录，然后再启动应用程序。我从你的代码开始，但它没有用，然后我在驱动器 C 上创建了“测试”文件夹，它开始了。

# emacs - 根据 PWD 更新多项缓冲区名称

> ID：13655782
> 
> 赞同：2
> 
> 时间：2012-12-01T02:28:54.183
> 
> 标签：emacs, elisp, term

如果我使用 konsole 或其他终端，终端标签名称可以根据 PWD 更改。但在多术语中，缓冲区名称是`*terminal<number>*`. 这不是很好。因为当我在它们之间切换时，名称不是很丰富。所以我想根据 PWD 重命名它。

我发现`Enter key`绑定到 term-send-raw，所以我写了一个函数

```
(defadvice term-send-raw (around rename-term-name activate)
  (progn
    (rename-buffer 
     (concat "⇒ " 
             (shell-command-to-string "pwd | xargs basename |  tr -d '\n'") 
             (format-time-string " [%M ∞ %S]")))
    ad-do-it)) 
```

但问题是`pwd`命令返回`PWD`终端缓冲区的，而不是该`PWD`终端中的`SHELL`。

`PWD`终端缓冲区的 由设置`defcustom multi-term-default-dir`。并且它不会`PWD`在`SHELL`.

```
(defcustom multi-term-default-dir "~/"
  "The default directory for terms if current directory doesn't exist."
  :type 'string
  :group 'multi-term) 
```

如何在终端中获取 SHELL 的 PWD？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:00:01.033

AFAIK 没有简单的方法可以从正在运行的进程中检索信息。

但是，如果您想获取当前目录，您可以：

1.  要求外壳打印它
2.  解析和跟踪 cd、pushd、popd 等函数的命令行......</li>
3.  轮询 /proc/PID/cwd

第一种方法在`term.el`( `M-x``find-library``RET``term``RET`) 的标题中描述。

现在，谢谢你的问题，你给了我这个机会：

```
(defadvice term-send-input (after update-current-directory)
  (let* ((pid (process-id (get-buffer-process (current-buffer))))
         (cwd (file-truename (format "/proc/%d/cwd" pid))))
    (cd cwd)))

(ad-activate 'term-send-input) 
```

`su`这是第三种方法的幼稚实现，如果用户使用or ，它就不起作用`ssh`。但是，我不知道是否可以不使用第一种或第二种方法。

在您的情况下，您可以将`cd`命令替换为您想要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T17:08:05.597

基于 Daimrod 对轮询 /proc/PID/cwd 的回答，我找到了一种解决问题的方法，即 Reed 指出建议不会立即获取更新的 CWD 并且您必须按两次 Enter 键。

如果您将 CWD 更新代码移动到它自己的函数中，并在以后使用 run-at-time 从通知中调用它，它将正确获取更新的 CWD。不幸的是，我对 Emacs 的调度了解不足，无法解释为什么会这样（任何启发都将不胜感激）。

这是我基于 Daimrod 的代码。注意我建议 line-mode 使用 term-send-input，char-mode 使用 term-send-return。我在 Emacs 24.3.1 上使用 multi-term 对此进行了测试：

```
(defadvice term-send-input (after update-current-directory)
  (run-at-time "0.1 sec" nil 'term-update-dir)
  )

(ad-activate 'term-send-input)

(defadvice term-send-return (after update-current-directory)
  (run-at-time "0.1 sec" nil 'term-update-dir)
  )

(ad-activate 'term-send-return)

(defun term-update-dir ()
  (let* ((pid (process-id (get-buffer-process (current-buffer))))
         (cwd (file-truename (format "/proc/%d/cwd" pid))))
    (unless (equal (file-name-as-directory cwd) default-directory)
      (message (concat "Switching dir to " cwd))
      (cd cwd)))
  ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-02T23:14:04.743

大多数终端从命令中获取它们的窗口名称`echo -en`。你`zsh`可以把它放在你的`~/.zshenv`

```
precmd() { echo -en "\e]0;`basename ${PWD}`\a" } 
```

这将获得您的`PWD`环境变量的基本名称。理想情况下`multi-term`会做类似的事情并将其放入`multi-term-buffer-name`，这是保存其缓冲区名称的变量。

是的，这不是一个完整的解决方案。我也希望有一个！

# objective-c - 由于未找到“非原子”，使用 OpenCV 的 iPhone 5.1 应用程序崩溃

> ID：13655784
> 
> 赞同：1
> 
> 时间：2012-12-01T02:29:07.100
> 
> 标签：objective-c, ios, xcode, opencv, ios6

我正在开发一个针对 iOS 5.1+ 的 iOS 应用程序。我在 Mac OS X 10.8 上使用 XCode 4.5，并且我确实拥有一台装有 iOS 5.1.1 的 iPhone 4。该应用程序需要 OpenCV，我已根据[OpenCV-Documentation 中的教程](http://docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html)从源代码中成功构建了它。

这是发生的事情：

当我启动应用程序时，出现异常：

```
dyld: Symbol not found: _objc_setProperty_nonatomic 
```

iOS 6 不会出现此错误，但模拟器和真实设备上的 iOS 5.1 都会出现此错误。

那是什么？它与OpenCV有关吗？它是否与iOS / iPhone / XCode之间的不兼容有关？

***编辑：***我的开发目标设置为 5.1。基础 SDK 为 6.0。我从另一台 Mac 复制了一个 SDK für 4.3（这是 XCode 4.5 将支持的最低版本），并将开发目标和基础 SDK 设置为 4.3。也没有工作（当时它甚至没有建立）。

我没有更新，该项目最初是使用 XCode 4.5 从头开始​​的。

同时我还发现了一个使用 gnulibc++ 而不是 libc++ 的技巧，但这也导致项目根本没有构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:50:42.060

我建立了一个测试项目，发现了同样的问题。OpenCV 正在使用 ios6 的部署目标构建，这是一个已知问题，修复正在等待审查，请参阅[https://github.com/Itseez/opencv/pull/70](https://github.com/Itseez/opencv/pull/70)

# apache - SVN+Apache：存储库的存储位置

> ID：13655789
> 
> 赞同：3
> 
> 时间：2012-12-01T02:30:29.867
> 
> 标签：apache, svn

一段时间以来，我一直将所有 Subversion 存储库都保存在本地计算机上，但现在我决定将它们移动到我的网络托管服务器上。这是一个apache服务器，托管公司已经设置了svn。我的问题是，我应该在哪里存储我的 svn 存储库。我最初将它们存储在`public_html/`目录中，但是（我当然不是安全专家）我认为只有公开可用的 Web 内容应该存储在那里。另一方面，如果我尝试将存储库存储在其中，`~/var/svn/`那么我的 subversion 客户端（Eclipse）会说“找不到元素”。其他人如何存储与 Apache 相关的存储库？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:15:41.313

您可以为存储库集合选择**任何** *物理*位置，因为稍后会在 Apache 内部定义*逻辑*路径（位置容器 + SVNPath|SVNParentPath）。你只有

*   选择大分区（存储库可能需要大量空间）
*   不要忘记 chown|chmod repo dirs，以便让 Apache 进程能够处理存储库的文件

/var (/var/repos/) 是 repo-root 的良好候选者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:12:29.217

如果您使用共享虚拟主机，这将很困难，因为您需要访问根目录，才能创建 svn-group 并创建存储库的结构。您还需要在 Apache 上安装一些模块，例如 dav_svn。您将需要创建一个 VirtualHost（站点可用），以便通过特定的 DNS 为您的存储库提供服务。

互联网上有很多教程 - > [http://www.debuntu.org/how-to-subversion-svn-with-apache2-and-dav/](http://www.debuntu.org/how-to-subversion-svn-with-apache2-and-dav/)（适用于 ubuntu）

我，我租了一个虚拟专用服务器来托管我的 SVN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T03:19:20.027

我们还没有将 SVN 用于我们的 Web 源代码，但一直在使用 CVS。我们的解决方案是简单地阻止 Apache 使用`IndexIgnore`

```
IndexIgnore .??* *~ *# HEADER* README* RCS CVS *,v *,t 
```

您可以使用基于`.svn`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T02:34:09.920

`/var`通常，您会将数据存储在(not )的适当子目录中`~/var`，也就是说，如果您有权访问它。例如`/var/svn`

# ruby-on-rails - 如何停止（并重新启动）Rails 服务器？

> ID：13655792
> 
> 赞同：31
> 
> 时间：2012-12-01T02:31:15.070
> 
> 标签：ruby-on-rails, command-line, terminal, restart

我正在按照此处的说明[http://railsinstaller.org/mac](http://railsinstaller.org/mac)在运行 OS X 10.8.2 的 Mac 上启动和运行 Rails

在第 8 步，我被要求重新启动 Rails 服务器，但如何？

我假设通过命令行，但在已经打开的 ruby​​ 终端窗口或新终端窗口中？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-01T02:32:48.957

按`Ctrl+C`

当您启动服务器时，它会在启动文本中提到这一点。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2016-11-27T19:08:10.657

现在在 rails 5 你可以这样做：

```
rails restart 
```

的输出`rails --tasks`：

> 触摸 tmp/restart.txt 重启应用

我认为如果您将 Rails 作为恶魔运行，这很有用

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-11-13T05:48:16.857

在 OSX 上，您可以利用类似 UNIX 的命令行 - 这是我在 .bashrc 中方便使用的内容，使我能够更轻松地重新启动在后台 (-d) 模式下运行的服务器（请注意，您必须在运行时的 Rails 根目录）：

```
alias restart_rails='kill -9 `cat tmp/pids/server.pid`; rails server -d' 
```

我对@zane 关于如何不删除 PID 文件的评论的最初回应是，它可能是取决于 Rails 版本或操作系统类型的行为。但是，shell 也有可能运行第二个命令 ( `rails server -d`) 比`kill`实际导致前一个正在运行的实例停止的时间早。

因此，或者，`kill -9 cat tmp/pids/server.pid && rails server -d`可能更健壮；或者您可以专门运行`kill`，等待`tmp/pids`文件夹清空，然后重新启动新服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T17:23:33.263

如果这不起作用，还有另一种在 Windows 中特别有效的[方法：从 Windows 命令行中杀死 localhost:3000 进程](https://stackoverflow.com/questions/13684915/kill-localhost3000-process-from-windows-command-line)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-07T15:36:59.363

我不得不重新启动生产中的 rails 应用程序，所以我寻找另一个答案。我在下面找到了它：

[http://wiki.ocssolutions.com/Restarting_a_Rails_Application_Using_Passenger](http://wiki.ocssolutions.com/Restarting_a_Rails_Application_Using_Passenger)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-08T14:38:21.987

如果您无法找到要杀死的 rails 进程，它实际上可能没有运行。从运行 rails 服务器的位置删除 tmp 文件夹及其子文件夹，然后重试。

# c++ - 从 Windows 切换到 Linux 导致错误：预期的 '='、','、';'、'asm' 或 '__attribute__' 之前

ID：13655794

赞同：0

时间：2012-12-01T02:31:28.913

标签：c++

# apache - 如何使用 Windows 机器在网络上访问 OS X 上的 localhost:3000？

> ID：13655796
> 
> 赞同：0
> 
> 时间：2012-12-01T02:31:47.570
> 
> 标签：apache, osx-mountain-lion

我曾经通过 [computername].local:3000 访问 localhost:3000 提供应用程序 最近 Mountain Lion 的更新删除了 Web 共享

我已经安装了在这里找到的 Web 共享首选项窗格[h​​ttp://clickontyler.com/blog/2012/02/web-sharing-mountain-lion/](http://clickontyler.com/blog/2012/02/web-sharing-mountain-lion/)

但唉，我仍然无法从 ie7 上的 Windows XP 访问它

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:35:13.310

为了让其他计算机能够访问它，他们需要知道它在哪里。

这是“主机”文件的来源。

在您的 Windows XP 机器上，以管理员身份打开记事本。在记事本中，单击顶部菜单中的“文件”>“打开”。

现在打开 C:\Windows\System32\drivers\etc\hosts

该文件应该类似于我在下面粘贴的内容：

```
# Copyright (c) 1993-2009 Microsoft Corp.
#
# This is a sample HOSTS file used by Microsoft TCP/IP for Windows.
#
# This file contains the mappings of IP addresses to host names. Each
# entry should be kept on an individual line. The IP address should
# be placed in the first column followed by the corresponding host name.
# The IP address and the host name should be separated by at least one
# space.
#
# Additionally, comments (such as these) may be inserted on individual
# lines or following the machine name denoted by a '#' symbol.
#
# For example:
#
#      102.54.94.97     rhino.acme.com          # source server
#       38.25.63.10     x.acme.com              # x client host

# localhost name resolution is handled within DNS itself.
#   127.0.0.1       localhost
#   ::1             localhost 
```

现在，将 OSX 机器的本地 IP 地址与您要在浏览器中访问它的主机名一起添加。您可以在“网络”偏好设置面板中找到您 Mac 的本地 IP 地址（说明可以在此处找到：http: [//osxdaily.com/2010/11/21/find-ip-address-mac/](http://osxdaily.com/2010/11/21/find-ip-address-mac/)）

示例（假设您的 Mac 在本地网络上的 IP 是 192.168.0.100）：

```
192.168.0.100    [computername].local 
```

保存文件。现在您的 Windows XP 机器将知道，为了访问 [computername].local，它需要联系位于 192.168.0.100 的计算机

假设您的 Web 服务器在线，并且配置为接受端口 3000 上的连接，您可以在 Windows XP 上打开 Web 浏览器并输入 http://[computername].local:3000

如果您仍然无法访问它，还请尝试以下操作并使用结果更新您的问题：

1.  暂时禁用 OSX 上的防火墙。这是否允许 Windows XP 访问它？
2.  您从 Windows XP 收到什么错误消息？

# css - 如何使用灵活的布局在 Windows 8 [HTML5/JS/CSS3] 上居中元素

> ID：13655797
> 
> 赞同：0
> 
> 时间：2012-12-01T02:31:48.493
> 
> 标签：css, windows-8, winjs

我正在用 HTML5 构建一个 Windows 8 应用程序，我试图将我的应用程序菜单放在屏幕中间。我知道有新的 CSS3 可以通过使用灵活的框来应用此功能，但是我无法重新创建它。这是我的 HTML

```
<body>
<div id="playControl">
    <button>Back</button>
    <button>Play</button>
    <button>Forward</button>
</div>
</body> 
```

这里有一些信息，但看起来工作不正常（我猜他们更改了属性名称）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T07:35:58.833

这就是我的做法。我完全使用网格而不是弹性框。假设您的 div 在一个名为“parent”的 div 中。我会用...

```
#parent {
    display:-ms-grid;
    -ms-grid-columns:1fr;
    -ms-grid-rows:1fr;
    height:100%;
} 
```

然后在你的 div 上我会使用...

```
#yourDiv {
    -ms-grid-column-align: center;
    -ms-grid-row-align: center;
} 
```

请注意，您需要为父 div 提供单行和单列以及 100% 的高度。然后你需要设置子div的对齐方式（初始值为'stretch'）。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T05:23:35.163

蛮力示例...在实际实现中使用 css 样式...

您可以使用像这样的 flexbox 填充页面......（注意我使用默认的**ms-flexbox** css 样式来开始工作，并使用内联样式覆盖以获得我想要的内容）

```
<div class="ms-flexbox" style="width: 100%; height: 100%; -ms-flex-direction: column; -ms-flex-align: center; -ms-flex-pack: center;">
    <button>Back</button>
    <button>Play</button>
    <button>Forward</button>
</div> 
```

或者您可以创建一个 3x3 网格并在中间单元格内放置一个较小的 flexbox。

# javascript - JSON.parse：预期的双引号属性名称

> ID：13655798
> 
> 赞同：2
> 
> 时间：2012-12-01T02:32:01.887
> 
> 标签：javascript, json

我收到 SyntaxError: JSON.parse: expected double-quoted property name。

我对 PHP 关联进行编码并转义了这样的非法字符：

```
var TweetsAnalized = '<?php echo addslashes($Row_Words_Repeated_Relation_to_json) ?>'; 
```

然后，当我使用 JSON 时，我会这样解析它：`var tweets = JSON.parse(TweetsAnalized);`

我得到了错误。

这是数组的样子：

```
'{\"\":[[\"trial\",\"Cairo\",\"#RamletBoulaq\",\"march\",\"heading\",\"prosecutor\",\"office\",\"#nilecity\",\"#niletowers\",\"Muslim\",\"Brotherhood\",\"chants\",\"chanting\",\"building\",\"9\",\"#AdminCourt\",\"#ConstituentAssembly\",\"dissolution\",\"will\",\"draft\",\"hold\",\"dissolve\",\"today\",\"#Maspero\",\"March\",\"6\",\"#Dokki\",\"#Tahrir\",\"held\",\"protesters\",\"Chants\",\"Bread\",\"freedom\",\"issues\",\"#Morsy\",\"Anti\",\"Mohamed\",\"Mahmoud\",\"people\",\"regime\",\"Al\",\"President\",\"Supreme\",\"Constitutional\",\"Court\",\"postponed\",\"#Egypt\",\"civil\",\"revolution\",\"#Oct19\",\"tomorrow\",\"\\n\",\"writes\",\"greater\",\"good\",\"downfall\",\"constitutional\",\"declaration\",\"Morsy\",null,\"game\",\"wins\",\"Egypt\",\"worst\",\"option\",\"Syrian\",\"refugees\",\"vote\",\"funeral\",\"press\",\"conference\",\"Tahrir\",\"support\",\"decree\",\"crisis\",\"seized\",\"2012\",\"law\",\"clashes\",\"#FJP\",\"offices\",\"injuries\",\"#DNE\",\"latest\",\"bid\",\"#BREAKING\",\"presidential\",\"#Jika\",\"journalist\",\"detained\",\"forces\",\"rebels\",\"#Abdeen\",\"creating\",\"Monday\",\"protests\",\"urges\",\"chief\",\"ahead\",\"attempting\",\"#MB\",\"sit\",\"meeting\",\"Tuesday\",\"injured\",\"temporary\",\"Clashes\",\"Qasr\",\"Shia\",\"#Muslims\",\"claim\",\"entering\",\"#Ashura\",\"#Palestinian\",\"November\",\"#Sinai\",\"#Alexandria\",\"team\",\"Gadalla\",\"decisions\"],[2,2,4,6,4,2,2,4,4,5,6,3,2,2,2,2,4,3,3,2,2,2,4,2,2,2,3,20,3,3,3,2,3,2,16,2,4,4,4,3,6,5,2,2,2,3,34,2,2,2,2,2,5,2,2,2,4,5,7,3,2,2,3,2,2,2,2,2,2,2,3,3,3,3,3,2,2,2,2,2,2,2,33,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,2,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]],\"#Tahrir\":[[\"#Morsy\",\"supporters\",\"Mohamed\",\"Mahmoud\",\"anti\",\"Morsy\",\"protesters\",\"square\",\"Kasr\",\"Nil\",\"empty\",\"pro\",\"throwing\",\"Pro\",\"charge\",\"rock\",\"St\",\"injuries\",\"drove\",\"injured\",\"man\",\"carried\",\"face\",\"march\",\"#Dokki\",\"\",\"held\",\"Chants\",\"Bread\",\"freedom\",\"dissolution\",\"#ConstituentAssembly\",\"heading\",\"demanding\",\"ensued\",\"#FJP\",\"leader\",\"Muslim\",\"Brotherhood\",\"calls\",\"head\",\"building\",\"Clashes\",\"clashes\",\"High\",\"Court\",\"authority\",\"chants\",\"fights\",\"continue\",\"Anti\",\"people\",\"demand\",\"fall\",\"president\",\"groups\",\"parties\",\"holding\",\"#Egypt\",\"civil\",\"Protesters\",\"#Oct19\",\"March\",\"Al\",\"Sayeda\",\"Zeinab\",\"moving\",\"revolution\",\"Badie\",\"today\'s\",\"protests\",\"will\",\"growing\",\"number\",\"street\",\"Cairo\",\"\\n\",\"constitutional\",\"declaration\",\"#DNE\",\"Qasr\",\"National\",\"Rescue\",\"Front\",\"sit\",\"low\",\"Follow\",\"updates\",\"Police\",\"front\",\"gas\",\"Ainy\",\"call\",\"Tuesday\",\"Pictures\",\"infront\",\"demonstration\",\"CSF\",\"#Nov23\",\"Tahrir\",\"thousands\",\"#nov23\",\"path\",\"motorcycles\"],[18,4,8,7,7,6,11,4,2,2,2,5,2,2,3,2,2,2,2,3,2,2,2,10,5,20,4,4,2,2,3,2,4,2,2,2,2,5,6,2,3,2,4,5,3,3,2,4,2,5,2,3,2,2,2,2,2,2,16,2,6,13,3,10,4,4,2,2,2,3,3,3,2,2,2,2,2,2,3,3,6,2,2,2,2,2,2,2,2,3,3,5,2,3,2,2,2,2,2,2,2,10,2,2]],\"#Egypt\":[[\"today\",\"Egyptian\",\"protest\",\"current\",\"conditions\",\"return\",\"Rafah\",\"amid\",\"security\",\"#Copts\",\"arrested\",\"#Syria\",\"International\",\"Mohamed\",\"will\",\"year\",\"charges\",\"years\",\"lawsuit\",\"religion\",\"protesters\",\"Al\",\"presidential\",\"demanding\",\"building\",\"office\",\"#Morsy\",\"gas\",\"pile\",\"National\",\"Front\",\"Supreme\",\"Constitutional\",\"court\",\"constitutional\",\"continue\",\"strike\",\"demands\",\"#Sinai\",\"Friday\",\"#Oct19\",\"#Tahrir\",\"groups\",\"\",\"representative\",\"#FJP\",\"head\",\"party\",\"#BREAKING\",\"#DNE\",\"clashes\",\"front\",\"offices\",\"injuries\",\"regime\",\"held\",\"#Damanhour\",\"President\",\"Council\",\"Judges\",\"declaration\",\"attempting\",\"#MB\",\"changes\",\"location\",\"Tuesday\",\"#Abdeen\",\"Brotherhood\",\"High\",\"Court\",\"Clashes\",\"Rescue\",\"sit\",\"Muslim\",\"march\",\"crisis\",\"BREAKING\",\"call\",\"Morsy\",\"demonstration\",\"#Alexandria\",\"#Nov23\"],[4,2,3,3,2,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,4,2,2,2,2,16,2,2,4,4,2,2,2,4,2,2,2,2,2,3,16,2,34,2,3,2,2,4,27,4,2,2,2,2,3,2,4,2,2,4,2,6,2,2,5,2,3,2,2,2,3,2,2,3,2,2,2,2,2,2,2]],\"#Morsy\":[[\"judges\",\"supporters\",\"prosecutor\",\"general\",\"#Tahrir\",\"Mohamed\",\"Mahmoud\",\"anti\",\"Morsy\",\"protesters\",\"square\",\"Kasr\",\"Nil\",\"pro\",\"throwing\",\"Pro\",\"charge\",\"rock\",\"injuries\",\"Brotherhood\",\"High\",\"Court\",\"#FJP\",\"Muslim\",\"authority\",\"chants\",\"issues\",\"\",\"Anti\",\"people\",\"demand\",\"fall\",\"president\",\"office\",\"#Egypt\",\"President\",\"hours\",\"finished\",\"clashes\",\"#DNE\",\"#BREAKING\",\"decree\",\"constitutional\",\"declaration\",\"temporary\",\"will\",\"held\",\"Tuesday\",\"#MB\"],[3,4,2,2,18,7,5,6,5,6,3,2,2,5,2,2,2,2,3,4,2,2,2,3,2,2,2,16,2,3,2,2,2,2,16,5,2,2,2,7,2,2,2,3,2,2,2,2,2]],\"#DNE\":[[\"#BREAKING\",\"#Egypt\",\"#Tahrir\",\"clashes\",\"#FJP\",\"offices\",...al\",\"hold\",\"meeting\",\"discuss\",\"move\",\"#nov23\",\"#tahrir\",\"#egypt\"],[2,2,2,2,2,2,2,2,2]],\"team\":[[\"meeting\",\"#nov23\",\"#tahrir\",\"#egypt\",\"decides\",\"resign\",\"presidential\",\"\"],[2,2,2,2,2,2,2,2]],\"support\":[[\"\"],[3]],\"revolution\":[[\"will\",\"\",\"#Tahrir\"],[2,2,2]],\"protest\":[[\"governorates\",\"#Egypt\",\"#Oct19\"],[2,3,2]],\"prosecutor\":[[\"#RamletBoulaq\",\"office\",\"#nilecity\",\"#niletowers\",\"general\",\"#Morsy\"],[2,2,2,2,3,2]],\"president\":[[\"#Morsy\",\"people\",\"#Tahrir\"],[2,2,2]],\"postponed\":[[\"\"],[3]],\"office\":[[\"#RamletBoulaq\",\"march\",\"General\",\"prosecutor\",\"#nilecity\",\"#niletowers\",\"general\",\"#Egypt\",\"#Morsy\"],[2,2,2,2,2,2,2,2,2]],\"leader\":[[\"#FJP\",\"Brotherhood\",\"calls\",\"#Tahrir\",\"head\",\"building\"],[2,2,2,2,2,2]],\"held\":[[\"march\",\"#Tahrir\",\"\",\"#Egypt\",\"Tuesday\",\"#Morsy\"],[2,4,3,3,2,2]],\"front\":[[\"#Egypt\",\"gas\",\"#Tahrir\"],[2,2,3]],\"draft\":[[\"\",\"Supreme\",\"Constitutional\",\"rejects\"],[2,2,2,2]],\"current\":[[\"Egyptian\",\"#Egypt\"],[2,3]],\"crisis\":[[\"\",\"#Egypt\"],[3,2]],\"court\":[[\"high\",\"#Egypt\"],[2,2]],\"conference\":[[\"\"],[3]],\"calls\":[[\"#FJP\",\"leader\",\"Brotherhood\",\"#Tahrir\",\"head\",\"building\"],[2,2,2,2,2,2]],\"Zeinab\":[[\"Sayeda\",\"march\",\"#Tahrir\",\"#Oct19\",\"moving\"],[3,3,4,4,2]],\"US\":[],\"Sayeda\":[[\"Zeinab\",\"march\",\"#Tahrir\",\"#Oct19\",\"moving\"],[3,3,4,4,2]],\"Presidential\":[[\"#nov23\",\"team\",\"hold\",\"meeting\",\"tomorrow\",\"discuss\",\"move\",\"#tahrir\",\"#egypt\"],[3,2,2,2,2,2,2,2,2]],\"National\":[[\"Front\",\"#Egypt\",\"Rescue\",\"#Tahrir\"],[3,4,3,2]],null:[[\"declaration\",\"\"],[2,3]],\"Front\":[[\"National\",\"#Egypt\",\"Rescue\",\"#Tahrir\"],[3,4,3,2]],\"Egypt\":[[\"worst\",\"option\",\"Syrian\",\"refugees\",\"\"],[2,2,2,2,3]],\"Constitutional\":[[\"#Egypt\",\"Supreme\",\"rejects\",\"draft\",\"\",\"declaration\"],[2,2,2,2,2,2]],\"Chants\":[[\"\",\"Bread\",\"freedom\",\"dissolution\",\"#ConstituentAssembly\",\"#Dokki\",\"march\",\"heading\",\"#Tahrir\"],[2,2,2,2,2,2,2,2,4]],\"Cairo\":[[\"\",\"#Tahrir\"],[2,2]],\"#tahrir\":[[\"#nov23\",\"Presidential\",\"team\",\"hold\",\"meeting\",\"tomorrow\",\"discuss\",\"move\",\"#egypt\"],[4,2,2,2,2,2,2,2,3]],\"#BREAKING\":[[\"#DNE\",\"#Egypt\",\"#Morsy\",\"\"],[4,4,2,2]],\"urges\":[[\"\"],[2]],\"trial\":[[\"contempt\",\"religion\",\"\"],[2,2,2]],\"today\'s\":[[\"protests\",\"#Oct19\",\"#Tahrir\"],[2,2,3]],\"thousands\":[[\"#Tahrir\",\"#nov23\"],[2,2]],\"strike\":[[\"#Egypt\"],[2]],\"street\":[[\"#Tahrir\"],[2]],\"sit\":[[\"#DNE\",\"\",\"#Tahrir\",\"#Egypt\"],[2,2,2,2]],\"security\":[[\"#Egypt\"],[2]],\"rights\":[[\"human\"],[2]],\"residents\":[[\"#RamletBoulaq\",\"#niletowers\",\"#nilecity\"],[2,2,2]],\"religion\":[[\"trial\",\"contempt\",\"#Copts\",\"#Egypt\"],[2,2,2,2]],\"regime\":[[\"\",\"people\",\"#DNE\",\"#Egypt\"],[3,2,2,2]],\"moving\":[[\"march\",\"Sayeda\",\"Zeinab\",\"#Oct19\",\"#Tahrir\"],[2,2,2,2,2]],\"minister\":[],\"man\":[[\"#Tahrir\"],[2]],\"leave\":[[\"#RamletBoulaq\",\"#nilecity\",\"#niletowers\"],[2,2,2]],\"law\":[[\"\"],[2]],\"justice\":[],\"judges\":[[\"#Morsy\",\"President\"],[3,2]],\"injuries\":[[\"#Morsy\",\"#Tahrir\",\"#Egypt\",\"\"],[3,2,2,2]],\"high\":[[\"court\",\"building\"],[2,2]],\"groups\":[[\"#Tahrir\",\"#Egypt\"],[2,2]],\"freedom\":[[\"\",\"Bread\",\"dissolution\",\"#Tahrir\"],[3,2,2,2]],\"face\":[[\"#Tahrir\"],[2]],\"expected\":[[\"will\"],[2]],\"entering\":[[\"\"],[2]],\"demands\":[[\"#Egypt\"],[2]],\"demanding\":[[\"#Tahrir\",\"#Egypt\"],[2,2]],\"decree\":[[\"\",\"#Morsy\"],[3,2]],\"constitution\":[[\"#ConstituentAssembly\"],[2]],\"chief\":[[\"\"],[2]],\"charge\":[[\"#Morsy\",\"rock\",\"#Tahrir\",\"protesters\",\"drove\"],[2,2,3,2,2]],\"car\":[[\"bomb\"],[2]],\"Thousands\":[],\"Supreme\":[[\"Constitutional\",\"rejects\",\"draft\",\"\"],[2,2,2,2]],\"Rescue\":[[\"National\",\"Front\",\"#Tahrir\",\"#Egypt\"],[2,3,2,3]],\"Pictures\":[[\"#Tahrir\"],[2]],\"October\":[[\"#AdminCourt\",\"postpones\",\"#ConstituentAssembly\",\"case\",\"16\",\"#EgyCourts\"],[2,2,2,2,2,2]],\"General\":[[\"office\",\"Egyptian\"],[2,2]],\"Erian\":[[\"#FJP\",\"head\",\"party\",\"Al\"],[2,3,3,2]],\"Egyptian\":[[\"current\",\"#Egypt\",\"General\"],[2,2,2]],\"Council\":[[\"#Egypt\"],[2]],\"CSF\":[[\"High\",\"Court\",\"protesters\",\"#Tahrir\"],[2,2,2,2]],\"BREAKING\":[[\"#Egypt\"],[2]],\"April\":[[\"will\"],[2]],\"#egypt\":[[\"Presidential\",\"team\",\"hold\",\"meeting\",\"tomorrow\",\"discuss\",\"move\",\"#nov23\",\"#tahrir\"],[2,2,2,2,2,2,2,3,3]],\"#Sinai\":[[\"#Egypt\",\"\"],[2,2]],\"#Nov23\":[[\"#Tahrir\",\"#Egypt\"],[2,2]],\"#FreeAlber\":[[\"lawyer\",\"prosecution\",\"#PT\",\"moved\"],[2,2,2,2]],\"#EgyCourts\":[[\"#AdminCourt\",\"postpones\",\"#ConstituentAssembly\",\"case\",\"October\",\"16\"],[2,2,3,3,2,2]],\"#Copts\":[[\"#Egypt\",\"religion\"],[3,2]],\"#Abdeen\":[[\"Palace\",\"\",\"#MB\",\"changes\",\"location\",\"Tuesday\",\"#DNE\",\"#Egypt\"],[2,2,2,2,2,2,2,2]]}'; 
```

请需要有关该问题的帮助。

编辑：这里是关于我如何获得 $Row_Words_Repeated_Relation 的整个过程。

```
while($Repeatitive_max > 4)
     { 
         $Row_Words_Repeated_TweetsList= array();     
             $Row_Words_Repeated_counter=0;
             $IRow=0;
             $counter2=0;
             $Icolo=0;
             $Row_Words_Repeated_Count=array();
             $Row_Words_Repeated_Count[0][0]=" ";

             for($RRow=0 ;$RRow < sizeof($Array_TweetExplode); $RRow++)
             {
                 if(in_array($BigMatrix_Filtered[0][$Repeatition_position], $Array_TweetExplode[$RRow]))
                 {      
                     for($ICol=0;$ICol<sizeof($Array_TweetExplode[$RRow]);$ICol++)
                     {
                           if(!in_array($Array_TweetExplode[$RRow][$ICol],$Row_Words_Repeated_Count[0])
                           && $BigMatrix_Filtered[0][$Repeatition_position] != $Array_TweetExplode[$RRow][$ICol])
                           {  
                             $Row_Words_Repeated_Count[0][$counter2]= $Array_TweetExplode[$RRow][$ICol];                             
                             $counter2++;
                           }
                     }
                 }
             }
             for($RRow=0 ;$RRow < sizeof($Array_TweetExplode); $RRow++)
             {
                 if(in_array($BigMatrix_Filtered[0][$Repeatition_position], $Array_TweetExplode[$RRow]))
                 {      
                     for($ICol=0;$ICol<sizeof($Array_TweetExplode[$RRow]);$ICol++)
                     {
                        $Row_Words_Repeated_TweetsList[$IRow][$ICol]= $Array_TweetExplode[$RRow][$ICol];
                     }
                     $IRow++;
                 }
             }
             $RowCounter=1;
             for($Row=0;$Row<sizeof($Array_TweetExplode);$Row++)
             {
                 if(in_array($BigMatrix_Filtered[0][$Repeatition_position], $Array_TweetExplode[$Row]))
                 {
                      for($ColCounter=0;$ColCounter<sizeof($Row_Words_Repeated_Count[0]);$ColCounter++)
                      {
                          $Row_Words_Repeated_Count[$RowCounter][$ColCounter]=0;
                      }
                      $RowCounter++;
                 }
             }
             $RowCounter=1;
             for($RRow=0;$RRow<sizeof($Row_Words_Repeated_TweetsList);$RRow++)
             {
                 for($CCol=0;$CCol<sizeof($Row_Words_Repeated_TweetsList[$RRow]);$CCol++)
                 {

                    $Position = array_search($Row_Words_Repeated_TweetsList[$RRow][$CCol],$Row_Words_Repeated_Count[0]);
                    if($Position !== false)
                    {
                        if($Position != NULL || $Position >= 0 )
                        {            
                             $Row_Words_Repeated_Count[$RRow+1][$Position] = 1;
                             $var=0;
                        }                    
                    }             
                 }
                 $var =0;                                           
             }
             $Repeatiton_count=0;
             $finalRow2=sizeof($Row_Words_Repeated_Count);
             for($CCol=0;$CCol<sizeof($Row_Words_Repeated_Count[0]);$CCol++)
             {   
                for($RRow=1;$RRow<sizeof($Row_Words_Repeated_Count)-1;$RRow++)
                {
                    if($Row_Words_Repeated_Count[$RRow][$CCol] == 1)
                    {
                        $Repeatiton_count++;
                    }                
                }

                $Row_Words_Repeated_Count[$finalRow2][$CCol] = $Repeatiton_count;
                $Repeatiton_count=0;  

             }
             $Row_Words_Repeated_Relation[$BigMatrix_Filtered[0][$Repeatition_position]]= array();
             $counter2=0;    
             for($CCol=0;$CCol<sizeof($Row_Words_Repeated_Count[$finalRow2]);$CCol++)
             {
                if($Row_Words_Repeated_Count[$finalRow2][$CCol] > 1)
                {
                    $Row_Words_Repeated_Relation[$BigMatrix_Filtered[0][$Repeatition_position]][0][$counter2]= $Row_Words_Repeated_Count[0][$CCol];
                    $Row_Words_Repeated_Relation[$BigMatrix_Filtered[0][$Repeatition_position]][1][$counter2]= $Row_Words_Repeated_Count[$finalRow2][$CCol];
                    $counter2++;

                } 
             }
             if($Maximum_Counter >= sizeof($Array_OfCounters))
             {
                 break;
             }
             $Repeatitive_max = $Array_OfCounters[$Maximum_Counter];
             $FLAG=0;
             $InterCounter=0;
             for($CCol=0;$CCol<sizeof($BigMatrix_Filtered[$finalRow]);$CCol++)
             {
                if($Repeatitive_max == $BigMatrix_Filtered[$finalRow][$CCol])
                {

                     foreach ($Row_Words_Repeated_Relation as $key_name => $key_value) 
                     {
                        if($BigMatrix_Filtered[0][$CCol] != $key_name)
                        {
                            $InterCounter++;   
                        }
                      }
                      $Zaha2 = sizeof($Row_Words_Repeated_Relation);
                      if($InterCounter==sizeof($Row_Words_Repeated_Relation))
                      {
                          $Repeatition_position = $CCol;
                          $FLAG=1;
                          $InterCounter=0;
                          break;
                      }
                      else
                      {

                          $InterCounter=0;;
                      }

                }
                if($FLAG==1)
                {
                    $FLAG=0;
                    break;                     
                } 
             }

             $WholeRepeatedWordsCounter++;
             $Maximum_Counter++;

     }
     return $Row_Words_Repeated_Relation; 
```

我从数据库 BTW 中检索，当 While 循环设置为 > 4（如列出的代码中）时，该过程工作正常，但是当它设置为大于 2 时，它会给我错误。此外，当我尝试向数据库添加更多数据时，它给了我同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:33:34.310

问题是你混淆了不同的世界。`addslashes`曾经是用于 SQL 查询的东西（尽管有些不好，因为它不是特定于数据库引擎的）。绝对没有理由将它与 JSON 混合。

你想要的是这样的*：*

```
var TweetsAnalyzed = <?php echo json_encode($Row_Words_Repeated_Relation); ?>; 
```

这会将 PHP 数组/对象转换为正确的 JavaScript 对象（因为 JSON 正是这样：具有更严格语法的 JavaScript 对象字面量）。您不必转义任何东西等 -`json_encode`将*始终*输出有效的 JavaScript。

如果`$Row_Words_Repeated_Relation_to_json`实际包含返回值，`json_encode`只需像这样使用它：

```
var TweetsAnalyzed = <?php echo $Row_Words_Repeated_Relation_to_json; ?>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T02:34:42.683

你试过不带引号吗？

```
var TweetsAnalized = <?php echo $Row_Words_Repeated_Relation_to_json; ?>; 
```

# java - 如何使用android在facebook feed对话框中传递预定义的消息和链接参数

> ID：13655799
> 
> 赞同：1
> 
> 时间：2012-12-01T02:32:43.700
> 
> 标签：java, android, facebook

我想在没有用户干预的情况下在 facebook 墙上发布带有链接的预定义消息。我的意思是用户只需登录 facebook，我的预定义消息应该在用户的 facebook 墙上发布带有链接的链接。

下面是我的代码。

```
public class PostOnFacebookWall {
    public static void postOnWall(Facebook facebook , final Context context, final String placeName) {
        Bundle params = new Bundle();
        params.putString("message", placeName);
        facebook.dialog(context, "feed", params ,new DialogListener() {

            public void onFacebookError(FacebookError e) {
            }

            public void onError(DialogError e) {
            }

            public void onComplete(Bundle values) {
                Toast.makeText(context, placeName+" for today's hangout has been posted on your facebook wall. ", Toast.LENGTH_LONG).show();
            }

            public void onCancel() {
            }
        });
    }
} 
```

我看过很多关于我的问题的链接，如下所示

```
http://stackoverflow.com/questions/11316683/adding-content-to-facebook-feed-dialog-with-new-facebook-sdk-for-android 
```

它传递了所有参数，如“链接”、“描述”、“图像”等等。有人说你必须传递所有参数。我只想预先定义消息并链接。

我的信息应该是“Let's hangout at”，这里的 placeName 应该是一个链接。我想从我的代码中传递这个完整的消息。我不希望我的代码打开用户输入消息的对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:23:47.567

如果您需要将预定义的消息发布到用户的 Facebook 墙上，则不应使用该 `facebook.dialog`方法。

有关为什么不应该使用它的更多信息，请阅读我在此处发布的答案：[https ://stackoverflow.com/a/13507030/450534](https://stackoverflow.com/a/13507030/450534)

话虽如此，要获得您想要的结果，请尝试以下代码：

```
Bundle postStatusMessage = new Bundle();

// ADD THE STATUS MESSAGE TO THE BUNDLE
postStatusMessage.putString("message", "Let's hangout at " + placeName);
postStatusMessage.putString("link", "www.the_example_web_address.com");

Utility.mAsyncRunner.request("me/feed", postStatusMessage, "POST", new StatusUpdateListener(), null); 
```

在这里，您可以通过解析来检查来自 Facebook API 的响应`String response`：

```
private class StatusUpdateListener extends BaseRequestListener  {

    @Override
    public void onComplete(String response, Object state) {

} 
```

这里要注意的一点是，您**不能**传递`message`带有链接的 a。详细说明（因为前面的声明可能听起来令人困惑），您不能在`message`标签中传递一个链接，该链接将由 Facebook 解析并像 FB 上的链接一样显示在帖子中。

要清楚地看到差异，请使用上面的代码发布状态更新，并查看它在 Facebook 上的外观。然后，完成此操作后，`postStatusMessage.putString("link", "www.the_example_web_address.com");`从上面的代码中删除它并将链接包含在`message`标签中，发布它并查看它在 Facebook 上的外观。

# javascript - 将 fancybox-skin 设置为固定大小并将所有图像居中

> ID：13655810
> 
> 赞同：2
> 
> 时间：2012-12-01T02:34:33.543
> 
> 标签：javascript, jquery, fancybox-2

我使用fancybox `version: 2.1.3`，我想做的是：

1.  **将宽度和高度设置为 600px x 400px 固定。**
2.  **如果图像小于弹出框，使其居中并且不调整大小。**

现在这是我当前的设置：

索引.html

```
$('.fancybox-buttons').fancybox({
    minWidth: 600,
    maxWidth: 600,
    minHeight: 400,
    maxHeight: 400,
    width: 600,
    height: 400,
    autoScale : false,
    fitToView : false, 
```

jquery.fancybox.js

```
$.extend(F, {
// The current version of fancyBox
version: '2.1.3',

defaults: {
padding : 15,
margin  : 20,

width     : 600,
height    : 400,

minWidth  : 600,
minHeight : 400,

maxWidth  : 600,
maxHeight : 400,

autoSize   : false,
autoHeight : false,
autoWidth  : false,

autoResize  : false,
autoCenter  : !isTouch,
fitToView   : false,
aspectRatio : false, 
```

结果是这样的： [http://i.imgur.com/WX2ak.jpg](https://i.imgur.com/WX2ak.jpg)但是当我点击下一个[http://i.imgur.com/1HXhe.jpg](https://i.imgur.com/1HXhe.jpg) .. 你可以看到大小不是固定的是主要问题..

如果图像较小，我想要什么弹出窗口和图像大小应该是这样的![在此处输入图像描述](../Images/d08385bbf1e81862f62c95fceb414ead.png)

*P/s：这是我第一次尝试修改fancybox，可能对我来说有点困惑。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T10:03:15.897

我有“丑陋的方式”，但我没有更多时间寻找合适的选项组合。因此，添加 jquery 选项：

```
 fitToView : false,
    wrapCSS: 'myclass' 
```

并添加样式：

```
 .myclass, 
    .myclass .fancybox-skin 
    {
        width: 600px !important;
        height: 400px !important;
        text-align: center;
    }
    .myclass .fancybox-skin 
    {
        line-height: 400px;
    }
    .myclass .fancybox-outer {
        height: inherit;
        width: inherit;
    }
    .myclass .fancybox-inner {
        display: inline-block;
        vertical-align: middle;
    } 
```

# ios5 - 带有 iOS 5 SDK 的游戏中心 - leaderboardDelegate = self not working

> ID：13655812
> 
> 赞同：0
> 
> 时间：2012-12-01T02:34:42.340
> 
> 标签：ios5, sdk, automatic-ref-counting, game-center

我仍在使用 iOS 5 SDK 和 Xcode 4.2 (Snow Leopard)。我正在将 Game Center 添加到我的游戏中，当它通过身份验证时，每当我尝试使用此代码（来自 Apple）显示排行榜时，我都会收到 ARC 错误：

```
- (void) showLeaderboard: (NSString*) leaderboardID
{
    GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];
    if (leaderboardController != nil)
    {
        **leaderboardController.leaderboardDelegate = self;**
        leaderboardController.timeScope = GKLeaderboardTimeScopeToday;
        leaderboardController.category = leaderboardID;
        [self presentViewController: leaderboardController animated: YES completion:nil];
    }
} 
```

我收到此错误：

```
Passing "ViewController *const__strong' to parameter of incompatible type 'id <GKLeaderboardViewControllerDelegate>" 
```

除了在 Lion 上使用 iOS 6 SDK 之外，还有其他解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:59:44.617

啊，

发现类似问题，使用 id(self) 修复；

[处理应用程序委托和在视图之间切换](https://stackoverflow.com/questions/6364911/handling-app-delegates-and-switching-between-views)

我应该删除这个问题>

# ruby - 如何在 octopress 中只生成新帖子？

> ID：13655813
> 
> 赞同：2
> 
> 时间：2012-12-01T02:35:27.867
> 
> 标签：ruby, rake, octopress

我正在使用 octopress 来生成我的网站和博客。如果我写一篇新文章，我总是要做

```
rake generate 
```

或者

```
rake gen_deploy 
```

但我不想一直生成*所有内容*。在我的机器上最多需要 2.5 分钟，这可能太长了，也是因为如果我修复错字左右，我必须这样做。

如何仅生成新帖子和相关页面（例如，如果我有新帖子，当然也必须重新生成博客索引页面）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T09:15:25.333

您在编写时只能生成一篇文章

```
rake isolate[your-post] 
```

接着

```
rake integrate 
```

恢复正常。

要完全回答您的问题，您**不能只生成一篇文章**。你可以看到 Octopress 的[第 395 期](https://github.com/imathis/octopress/issues/395)关于该主题的内容，这说明这是由于 Jekyll 方面的限制。

# ruby-on-rails - 从多态关联重定向

> ID：13655818
> 
> 赞同：1
> 
> 时间：2012-12-01T02:36:33.200
> 
> 标签：ruby-on-rails, redirect

我有一个评论模型，它属于两个模型：提交和帖子

```
class Comment < ActiveRecord::Base
  attr_accessible :content, :show
  belongs_to :commentable, :polymorphic => true
end

class Submission < ActiveRecord::Base
    has_many :comments, :as => :commentable, :dependent => :destroy
end 
```

Submissions 是一个嵌套路由，而 post 不是。

在我的评论控制器中：

```
 def create
    @commentable = find_commentable
    @comment = @commentable.comments.build(params[:comment])
    @comment.user = current_user
    if @comment.save
      #CommentMailer.comment_email(@user, @comment, @commentable).deliver
      flash[:notice] = "Successfully created comment."
      if @commentable == @submission
        redirect_to [@contest, @commentable]
      else
      redirect_to [@commentable]
      end
    else
     render :action => 'new'
    end
  end 
```

find_contest

```
def find_contest
    @contest = Contest.find(params[:contest_id])
end 
```

find_commentable：

```
def find_commentable
  params.each do |name, value|
    if name =~ /(.+)_id$/
      return $1.classify.constantize.find(value)
    end
  end
  nil
end 
```

通过@commentable 重定向到发布工作正常，但重定向到提交并没有找到比赛。

```
Started POST "/submissions/36/comments" for 127.0.0.1 at 2012-11-30 18:34:41 -0800
Processing by CommentsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"R62NH5/EE34FPapEqy7mfpa0wKz18GtSdhH8MGYq2Ec=", "comment"=>{"content"=>"test", "show"=>"true"}, "commit"=>"Create Comment", "submission_id"=>"36"}
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 ORDER BY users.created_at DESC LIMIT 1
  Submission Load (0.3ms)  SELECT "submissions".* FROM "submissions" WHERE "submissions"."id" = $1 ORDER BY submissions.created_at DESC LIMIT 1  [["id", "36"]]
Completed 500 Internal Server Error in 116ms

ActiveRecord::RecordNotFound (Couldn't find Contest without an ID):
  app/controllers/comments_controller.rb:19:in `create' 
```

提交路线变更：

```
 submissions GET    /submissions(.:format)           submissions#index
             POST   /submissions(.:format)           submissions#create
new_submission GET    /submissions/new(.:format)       submissions#new
edit_submission GET    /submissions/:id/edit(.:format)  submissions#edit
  submission GET    /submissions/:id(.:format)       submissions#show
             PUT    /submissions/:id(.:format)       submissions#update 
             DELETE /submissions/:id(.:format)    submissions#destroy 
```

提交表格：

```
<%= simple_form_for @submission, :html => { :multipart => true } do |f| %>
<div class="span7 offset2 submission">
    <fieldset class="well pleft80 edit">
      <%= f.hidden_field :contest_id , :value => params[:contest_id] %>
      <%= f.input :title %>
      <%= f.input :description %>
      <%= f.input :comment_show, :as => :hidden, :input_html => { :value => true }  %>
    </fieldset>
    <fieldset class="well pleft80 noborder">
      <%= f.fields_for :image do |img_field| %>
        <h3>Upload Photo<%= img_field.file_field :source %></h3>
      <% end %>
    </fieldset>
    <div class ="form-actions pleft80">
      <%= f.submit nil, :class => 'btn btn-primary btn-large' %>
    </div>
</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:53:45.370

你不需要实例化或分类任何东西。

```
redirect_to @comment.commentable 
```

如果您不能这样做，那么您将需要为其构建一个全局帮助模块并将其包含到控制器中。

```
module RouteHelpers

  def comment_association_redirect_to(comment)
    item = comment.commentable
    case item.class.to_s
      when 'Submission'
        redirect_to submission_path(item)
      end
  end

end 
```

并将其包含在`ApplicationController`：

```
include RouteHelpers 
```

然后你可以`comment_association_redirect_to`在你的应用程序中的任何地方调用（控制器等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:01:12.370

我从应用程序中剥离了嵌套路由，现在它工作正常并且更简单。当视图必须关联依赖项时，我不确定我是否能找到使用嵌套路由的充分理由。

# android - 如何停止在游戏中心/领导板上发布虚假分数

> ID：13655819
> 
> 赞同：1
> 
> 时间：2012-12-01T02:36:47.193
> 
> 标签：android, ios, leaderboard

我正在开发一款手机游戏，需要检查该游戏的最高分。我正在为此实施游戏中心。1>但是如何避免在游戏中心输入假分数？2>有什么办法只允许输入真实的分数吗？3>有没有办法确定应用程序是否被黑客入侵，以便我们据此做出决定？

由于该应用程序将同时为Android和IOS开发，我可以跟随单服务器更新分数吗？还是需要自己创建？

谢谢和问候， 阿尼尔

# iphone - iOS 将 2 个视图控制器使用的弹出模式视图展开到其呈现视图

> ID：13655823
> 
> 赞同：1
> 
> 时间：2012-12-01T02:37:25.283
> 
> 标签：iphone, ios, uistoryboardsegue

我确信有一个简单的答案，但我似乎无法找到它（搜索错误的术语，也许）。无论如何，我确信有更好的方法来做到这一点：

我正在从我的 homeViewController（应用程序加载时的第一个屏幕）调用模式视图，允许用户添加新项目）。很直接。在编辑项目时，我还会从 detailViewController 调用 SAME 模式视图。

现在，我有一个取消操作（在添加模式视图上），看起来像这样（在 homeViewController 中）：

```
- (IBAction)cancel:(UIStoryboardSegue *)segue;
{
    if ([[segue identifier] isEqualToString:@"CancelInput"]) {
        [self dismissViewControllerAnimated:YES completion:NULL];
    }
} 
```

这工作得很好，但是，如果我从细节控制器调用相同的模态视图并单击此 SAME 按钮，它不会将模态展开到细节页面，而是展开到 homeViewController。理想情况下，在这种情况下，我希望应用程序放松到详细信息屏幕。我设法通过将上面的代码也放在 detailViewController 中来解决它，并且它可以工作。但我觉得必须有更好的解决方案。这是一小段代码，但保存的代码会长很多，而且代码的重复似乎没有必要。有什么更好的方法来做到这一点？我应该将取消方法添加到应用程序委托吗？这似乎很快就会变得混乱，并打破（在我看来）MVC 模式。

此外，我正在为这个应用程序使用情节提要......这是值得的。

谢谢

# javascript - 使用 Python 和 MongoDB 进行实时分析

> ID：13655824
> 
> 赞同：0
> 
> 时间：2012-12-01T02:37:31.530
> 
> 标签：javascript, python, mongodb, analytics, pymongo

我是一名 Python 初学者，正在使用 Python 和 MongoDB 开发一个非常基本的实时分析工具。我有一个函数可以更新存储在 MongoDB 中的 URL 和综合浏览量集合：

```
def track(url):
   hour = datetime.utcnow().replace(minute = 0, second = 0, microsecond = 0)
   db.hourly.update({"hour": hour, "url":url}, {"$inc": {"views": 1}}, upsert = True)
   db.hourly_totals.update({"hour": hour}, {"$inc": {"views": 1}}, upsert = True) 
```

每当对给定 URL 执行跟踪时，文档集合就会相应地更新，每个 URL 的页面浏览量为集合“每小时”递增，所有 url 的总页面浏览量为集合“hourly_totals”递增。

自动化此过程的最佳方法是什么，以便每次有人访问我网站上的页面时执行跟踪？我可以在 Python 中执行此操作，还是必须将其嵌入到 Javascript 标记中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:25:12.340

您可以放置​​ javascript (JQuery) 代码（在 document.ready() 方法中），该代码调用 Web 服务，该 Web 服务又执行此跟踪方法。如果您只想为您的网络服务提供一个简单的网络服务器，请使用[bottle](http://bottlepy.org/docs/dev/)。

# objective-c - 在 iOS6 中处理通讯簿联系人时的内存泄漏

> ID：13655826
> 
> 赞同：1
> 
> 时间：2012-12-01T02:37:38.800
> 
> 标签：objective-c, ios, memory-management, ios6

我正在使用 ARC，我的应用程序可以编译和工作而不会崩溃。但是，当我运行分析构建时，我看到了这些警告。我来自 PHP 和 JavaScript，所以我自然不知道如何修复这些东西。谁能帮我吗？

![在此处输入图像描述](../Images/b3c6ff49195d3cbf6b610cf039ae9806.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T02:45:35.130

ARC 在与 Core Foundation 打交道时需要一些帮助。试试这个：

```
NSArray *linkedPeople = (__bridge_transfer NSArray *)ABPersonCopyArrayOfAllLinkedPeople(person); 
```

和

```
NSDictionary *personDictionary = (__bridge_transfer NSDictionary *)(ABMultiValueCopyValueAtIndex(addressFromPerson, 0)); 
```

`__bridge_transfer`告诉 ARC 一个非 Objective-C（即 Core Foundation）指针正在移动到一个 Objective-C 指针，并且它允许 ARC 获取对象的所有权以进行内存管理。包含“复制”一词的 CF 函数会产生一个引用计数为 +1 的对象引用。如果您稍后没有显式调用`CFRelease()`该对象，那么它将泄漏。`__bridge_transfer`但是，使用ARC 可以为您执行此操作。

（注意：我没有对此进行测试，但我相信这些是静态分析器抱怨的问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T04:47:39.830

是的，您可以使用：

```
NSArray *linkedPeople = (__bridge_transfer NSArray *)ABPersonCopyArrayOfAllLinkedPeople(person); 
```

但苹果现在建议使用：

```
NSArray *linkedPeople = CFBridgingRelease(ABPersonCopyArrayOfAllLinkedPeople(person)); 
```

它做同样的事情，但 Apple 建议您使用后者。

请参阅[WWDC 2012 session 405](https://developer.apple.com/videos/wwdc/2012/?id=405) , 37:33 进入演示文稿。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T02:46:19.423

所以！即使您使用的是自动引用计数 (ARC)，阅读 Objective-C 内存管理仍然是一个好主意：

[http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)

但是，对于您的具体问题：

通常，当您在 Apple 框架中看到包含该词的 C 方法时`Copy`，您将拥有该 Core Foundation 类型的所有权，您需要将其释放。当您想释放该类型时，只需使用：

```
CFRelease(addressFromPerson) 
```

这是第一个问题。您的屏幕截图**切断了第二个错误**，所以我只是推测，但我认为您还需要发布您的`NSDictionary *personDictionary`. 相似地：

```
CFRelease(personDictionary) 
```

*请注意，您还需要管理内存`linkedPeople`*

通常 ARC 会为您处理内存管理，但是在使用 Core Foundation 类型时，您仍然需要自己清理。

我**强烈**建议您查看这些有关使用 ARC 进行内存管理的重要资源，尤其是在处理 CF 类型和免费桥接时：

[http://www.joergjacobsen.com/blog/2011/10/05/managing-toll-free-bridging-in-an-arced-environment/](http://www.joergjacobsen.com/blog/2011/10/05/managing-toll-free-bridging-in-an-arced-environment/)

[http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# c++ - 返回组件时的链表段错误

> ID：13655828
> 
> 赞同：1
> 
> 时间：2012-12-01T02:38:14.733
> 
> 标签：c++, linked-list, segmentation-fault

我正在为我的 c++ 类开发一个程序，该程序基本上是一个小型书店应用程序。书店要有Member链表（ListMemberType）和Books链表（ListBookType）。链表的每个节点都由指向下一个组件的链接和一个组件组成。该组件的类型为 BookType。

这是 ListBookType 的头文件

```
#include "bookType.h"

typedef BookType ItemType;    // Type of each component
struct NodeType;              // Forward declaration

class ListBookType {
public:
    const ListBookType& operator=(const ListBookType& rightObject);
    //overload assignment operator
    //will set the left side equal to right side
    void Replace(ItemType theNewItem, ItemType theOldItem);
    //Pre:These are the same book(ISBN is the same)
    //Post: old component will be replaced with the new component
    ListBookType();
    // Constructor
    // Post: Empty list has been created
    ~ListBookType();
    // Destructor
    // Post: All nodes are returned to the heap
    ListBookType(const ListBookType& otherList);
    // Copy constructor
    // Post:  A deep copy of otherList is created and dataPtr is the
    //        external pointer to this copy

    // Action respnsibilities
    void Insert(ItemType item);
    // Pre:  List is not full and item is not in the list
    // Post: item is in the list and length has been incremented
    void Delete(ItemType item);
    // Post: item is not in the list
    void ResetList();
    // The current position is reset to access the first item in the list
    ItemType GetNextItem();
    // Assumptions:  No transformers are called during the iteration.
    // There is an item to be returned; that is, HasNext is true when
    // this method is invoked
    // Pre:  ResetList has been called if this is not the first iteration
    // Post: Returns item at the current position.

    // Knowledge responsibility
    int GetLength() const;
    // Post: Returns the length of the list
    bool IsEmpty() const;
    // Post: Returns true if list is empty; false otherwise
    bool IsFull() const;
    // Post: Returns true if list if full; false otherwise
    bool IsThere  (ItemType item ) const;
    // Post: Returns true if item is in the list and false otherwise
    bool HasNext() const;
    // Returns true if there is another item to be returned; false
    // otherwise
    ItemType GetBook(ItemType bookToGet)const;
    //Pre: Book is in list
    //Post: the book is returned
    //Pre: Book is in the list
    //Post: Book with matching ISBn will be returned
    private:
    NodeType* dataPtr;     // Pointer to the first node in the list
    int length;
    NodeType* currentPos;   // Pointer to the current position in a traversal
    NodeType* lastPtr;
}; 
```

这是我知道的包含我的错误的规范文件部分，以及我认为可能导致错误的部分。

```
#include "listBookType.h"
#include "bookType.h"
#include <iostream>
#include <cstddef>           // For NULL

using namespace std;

typedef NodeType* NodePtr;
struct NodeType {
   ItemType component;
   NodePtr link;
};

const ListBookType& ListBookType::operator=(const ListBookType& rightObject) {
   cout<<"Assignment operator bookList"<<endl;

   NodePtr fromPtr;    // Pointer into list being copied from
   NodePtr toPtr;      // Pointer into new list being built
   if(this != &rightObject) {
      if (rightObject.dataPtr == NULL) {
         dataPtr = NULL;
         return *this;
      }
      // Copy first node
      fromPtr = rightObject.dataPtr;
      dataPtr = new NodeType;
      dataPtr->component = fromPtr->component;
      // Copy remaining nodes
      toPtr = dataPtr;
      fromPtr = fromPtr->link;
      while (fromPtr != NULL)
      // Copying nodes from original to duplicate
      {
         toPtr->link = new NodeType;        // Store new node in link of last
                                                // node added to new list
         toPtr = toPtr->link;           // toPtr points to new node
         toPtr->component = fromPtr->component; // Copy component to new node
         fromPtr = fromPtr->link;       // fromPtr points to next node
                        // of original list
      }
      toPtr->link = NULL;
      lastPtr = toPtr;      // Set last pointer
   }
   return *this;
}

ItemType ListBookType::GetBook(ItemType bookToGet)const {
   NodePtr currPtr = dataPtr;      // Loop control pointer
   NodePtr tempPtr = NULL;

   while (currPtr != NULL && currPtr->component != bookToGet
       && currPtr->component < bookToGet) {
     tempPtr = currPtr;
     currPtr = currPtr->link;
   }

   cout<<"right before return of getBook"<< endl;

   return tempPtr->component;
}

ListBookType::ListBookType(const ListBookType& otherList) {
   cout<<"copy construct book list"<< endl;
   NodePtr fromPtr;    // Pointer into list being copied from
   NodePtr toPtr;      // Pointer into new list being built

   if (otherList.dataPtr == NULL) {
      dataPtr = NULL;
      return;
   }
   // Copy first node
   fromPtr = otherList.dataPtr;
   dataPtr = new NodeType;
   dataPtr->component = fromPtr->component;
   // Copy remaining nodes
   toPtr = dataPtr;
   fromPtr = fromPtr->link;
   while (fromPtr != NULL) { // Copying nodes from original to duplicate
      toPtr->link = new NodeType;       // Store new node in link of last
                        // node added to new list
      toPtr = toPtr->link;          // toPtr points to new node
      toPtr->component = fromPtr->component; // Copy component to new node
      fromPtr = fromPtr->link;      // fromPtr points to next node
                        // of original list
   }
   toPtr->link = NULL;
   lastPtr = toPtr;     // Set last pointer
}

ListBookType::~ListBookType() {
   cout<< "destructor book list"<< endl;
   NodePtr tempPtr;
   NodePtr currPtr = dataPtr;
   while (currPtr != NULL) {
      tempPtr = currPtr;
      currPtr = currPtr->link;
      delete tempPtr;
   }
} 
```

我遇到的问题在`GetBook(ItemType bookToGet)`. 我追查了问题，当我返回时我出现了段错误`tempPtr->component`。我在代码的其他几个地方也遇到了同样的问题，我不知道为什么我在这里出现段错误或潜在的问题可能是什么。（注意：BookType 类不包含任何需要重载赋值运算符或复制构造函数的动态数据）

我真的很感激任何帮助。我觉得我只是错过了一些我不知道的重要事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:03:32.897

在您的`GetBook`例程中考虑`dataPtr`已经为 NULL 的情况。

您将访问`return tempPtr->component;`// 导致段错误。

`dataPtr`您应该单独处理为 NULL的情况。

```
while (currPtr != NULL && currPtr->component != bookToGet // dataPtr = currPtr is NULL 
       && currPtr->component < bookToGet){
  tempPtr = currPtr;
  currPtr = currPtr->link;
}
cout<<"right before return of getBook"<< endl;
return tempPtr->component; // SEGFAULT! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:03:02.157

如果`while`语句中的条件在第一次评估时为 false，则`tempPtr`永远不会设置为 以外的任何值`NULL`，并且`tempPtr->component`return 语句中的 尝试取消引用空指针并崩溃。

想想如果`while`第一次条件为 false 时函数返回的合理默认值是什么，然后如果`tempPtr`就`NULL`在 return 语句之前，则返回该默认值。

# python - gtk+ python 入口颜色

> ID：13655829
> 
> 赞同：0
> 
> 时间：2012-12-01T02:38:24.917
> 
> 标签：python, python-2.7, gtk, gtk3

我正在尝试更改条目 gtk3 文本的颜色。已经到处找了，找不到路。我认为这是一个 entry_buffer 但我不知道该怎么做。对于 gtk2 很容易找到，但我的项目都在 gtk 3 中。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:07:21.957

所以有这个问题[How to make button different colour in Python GTK3 (using gi)?](https://stackoverflow.com/q/11927785/1699750) 你可能会觉得有用。其中一个答案指向一篇文章[GTK+ 3 theme: style your applications](http://erikos.sweettimez.de/2011/11/23/gtk-3-theme-style-your-applications/)，它解释了如何在 python 中设置 gtk+ 3 applications。看起来这正是您所需要的。下面的代码适用于 Ubuntu 12.04，我无法让它在 Ubuntu 11.04 上运行，所以我假设您需要这些库的相对较新版本来执行此操作。

**代码**

```
from gi.repository import Gtk, Gdk

window = Gtk.Window()
window.connect("destroy", Gtk.main_quit)
screen = Gdk.Screen.get_default()
css_provider = Gtk.CssProvider()
css_provider.load_from_path('style.css')
priority = Gtk.STYLE_PROVIDER_PRIORITY_USER
context = Gtk.StyleContext()
context.add_provider_for_screen(screen, css_provider, priority)
entry = Gtk.Entry(text='Testing..')
window.add(entry)
window.show_all()
Gtk.main() 
```

**样式.css**

```
GtkEntry {
    color: red;
    background: blue;
} 
```

**截屏**

![在此处输入图像描述](../Images/73f9e097b2131730883fd5b0e15ffaa6.png)

# android - android asynctask 下载文件

> ID：13655837
> 
> 赞同：0
> 
> 时间：2012-12-01T02:40:02.363
> 
> 标签：android, android-asynctask, download

我有一个项目列表，当用户单击一个项目时，我的应用程序开始从互联网下载文件。我使用 AsyncTask 下载文件。现在我想下载多个文件（使用队列，额外的文件将被添加到队列中，稍后将被下载）。如何管理多个 AsyncTasks？

注意：我使用 API 8。我不想在 API 9 中使用下载管理器类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:02:25.330

如果您担心过多的 AsyncTask 会导致问题，则无需这样做。Android 从 v1.6 自动处理这个问题。阅读[此答案](https://stackoverflow.com/a/9654445/1627802) 以获取更多信息。

此外，如果您确实想更好地控制任务的执行和调度，请使用[Executor](http://developer.android.com/reference/java/util/concurrent/Executor.html)类

# c++ - CRichEditCtrl 附加彩色文本？

> ID：13655838
> 
> 赞同：2
> 
> 时间：2012-12-01T02:40:06.633
> 
> 标签：c++, text, mfc, colors, cricheditctrl

我在 MFC 项目中有一个 CRichEditCtrl，我将其用作报告日志。根据给定的情况，我需要将不同颜色的文本附加到控件（即标准通知的蓝线，错误的红线等）。我已经非常接近让它工作了，但它仍然表现得很奇怪：

```
void CMyDlg::InsertText(CString text, COLORREF color, bool bold, bool italic)
{
    CHARFORMAT cf = {0};
    CString txt;
    int txtLen = m_txtLog.GetTextLength();
    m_txtLog.GetTextRange(0, txtLen, txt);

    cf.cbSize = sizeof(cf);
    cf.dwMask = (bold ? CFM_BOLD : 0) | (italic ? CFM_ITALIC : 0) | CFM_COLOR;
    cf.dwEffects = (bold ? CFE_BOLD : 0) | (italic ? CFE_ITALIC : 0) |~CFE_AUTOCOLOR;
    cf.crTextColor = color;

    m_txtLog.SetWindowText(txt + (txt.GetLength() > 0 ? "\n" : "") + text);
    m_txtLog.SetSel(txtLen, m_txtLog.GetTextLength());
    m_txtLog.SetSelectionCharFormat(cf);
} 
```

充其量，最终结果是新附加的行被适当地着色，但所有先前的文本都变成黑色。最重要的是，对于每个附加的文本行，起始选择似乎增加了 1。例如：

```
Call #1:
- [RED]This is the first line[/RED]

Call #2:
- [BLACK]This is the first line[/BLACK]
- [GREEN]This is the second line[/GREEN]

Call #3:
- [BLACK]This is the first line[/BLACK]
- [BLACK]This is the second line[/BLACK]
- [BLUE]This is the third line[/BLUE]

Call #4:
- [BLACK]This is the first line[/BLACK]
- [BLACK]This is the second line[/BLACK]
- [BLACK]This is the third line[/BLACK]
- [BLACK]T[/BLACK][YELLOW]his is the fourth line[/YELLOW]

Call #5:
- [BLACK]This is the first line[/BLACK]
- [BLACK]This is the second line[/BLACK]
- [BLACK]This is the third line[/BLACK]
- [BLACK]This is the fourth line[/BLACK]
- [BLACK]Th[/BLACK][ORANGE]is is the fifth line[/ORANGE]

etc... 
```

那么我该如何解决这个问题，让所有以前的文本和格式保持原样，同时附加一行新的彩色文本呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T03:39:09.440

您的示例代码通过调用从对话框中读取旧文本`GetTextRange()`。这不包括任何丰富的格式，因此，当文本放回原位时，它不会被格式化。您可以通过将光标设置到末尾而无需任何选择并调用[`ReplaceSel()`](https://docs.microsoft.com/en-us/cpp/mfc/reference/cricheditctrl-class?view=vs-2019#replacesel).

我认为你的方法应该是这样的：

```
void CMFCApplication2Dlg::InsertText(CString text, COLORREF color, bool bold, bool italic)
{
    CHARFORMAT cf = {0};
    int txtLen = m_txtLog.GetTextLength();

    cf.cbSize = sizeof(cf);
    cf.dwMask = CFM_BOLD | CFM_ITALIC | CFM_COLOR;
    cf.dwEffects = (bold ? CFE_BOLD : 0) | (italic ? CFE_ITALIC : 0);
    cf.crTextColor = color;

    m_txtLog.SetSel(txtLen, -1); // Set the cursor to the end of the text area and deselect everything.
    m_txtLog.ReplaceSel(text); // Inserts when nothing is selected.

    // Apply formating to the just inserted text.
    m_txtLog.SetSel(txtLen, m_txtLog.GetTextLength());
    m_txtLog.SetSelectionCharFormat(cf);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-18T23:58:28.857

在插入新文本之前指定格式。如果您在插入后应用格式，您最终会得到格式不正确的文本。

```
CHARFORMAT cf = { 0 };
int txtLen =  GetTextLength();

cf.cbSize = sizeof(cf);
cf.dwMask = CFM_COLOR;
cf.dwEffects = ~CFE_AUTOCOLOR;//No auto color
cf.crTextColor = RGB(0, 0, 255);//color of the text

SetSel(txtLen, -1);//Deselect all
SetSelectionCharFormat(cf);//Assign the format to the cursor pos
ReplaceSel(newText); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-20T13:47:58.673

我从试图让它工作中学到的东西是，你不能像上面的例子那样设置标志。这样做：

```
 cf.dwMask = (bold ? CFM_BOLD : 0) | (italic ? CFM_ITALIC : 0) | CFM_COLOR; 
```

一半有效，但是如果您使用 CRichEditCtrl （作为示例）并获取当前格式（尽管我认为这对我来说无论如何都会发生......）问题是上面的标志是设置要切换的值。所以，这实际上更有效：

```
CHARFORMAT cf;
cf.cbSize = sizeof(CHARFORMAT);
GetSelectionCharFormat(cf);

cf.dwMask = CFM_BOLD | CFM_ITALIC | CFM_COLOR; //set these to specify the flags you are changing

if (bold)
{
    cf.dwEffects |= CFE_BOLD; //toggle on
}
else
{
    cf.dwEffects &= ~CFE_BOLD; //toggle off
}

if (italic)
{
    cf.dwEffects |= CFE_ITALIC; //toggle on
}
else
{
    cf.dwEffects &= ~CFE_ITALIC; //toggle off
}

cf.dwEffects &= ~CFE_AUTOCOLOR; //this only seemed to work if I set it this way 
```

如果您不这样做，格式将保留 - 即使您已清除它。这让我挠了挠头，我做了很多谷歌搜索来修复它。

# php - 如何从 Twitter 状态提要中跳过第一项，用 PHP 显示接下来的 4 项？

> ID：13655841
> 
> 赞同：0
> 
> 时间：2012-12-01T02:40:40.733
> 
> 标签：php, api, twitter

我正在一个页面上设置一系列 Twitter 提要显示。一个以特定方式显示最近的状态。另一个（我希望）将显示接下来的 4 个状态，但不包括最近的状态。以下是我认为需要注意的部分代码，以便实现这个想法：

```
$rss = file_get_contents('https://api.twitter.com/1/statuses/user_timeline.rss?
    screen_name='.$twitter_user_id);

        if($rss) {

            // Parse the RSS feed to an XML object.
            $xml = simplexml_load_string($rss);

            if($xml !== false) {

                // Error check: Make sure there is at least one item.
                if (count($xml->channel->item)) {

                    $tweet_count = 0;

                    // Start output buffering.
                    ob_start();

                    // Open the twitter wrapping element.
                    $twitter_html = $twitter_wrap_open;

                    // Iterate over tweets.

                    foreach($xml->channel->item as $tweet) { 
```

这是为我提供此任务代码的网站：

< [Pixel Acres - 使用 PHP 显示最近的 Twitter 推文](http://f6design.com/journal/2010/10/07/display-recent-twitter-tweets-using-php/)>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T02:54:37.903

您的 foreach 循环遍历提要中的每个项目。您想根据提要中的位置跳过某些元素，因此您可以在 foreach 和`if`foreach 之后添加一个索引变量：

```
 foreach($xml->channel->item as $i => $tweet) {
     if ($i == 0 || $i > 4)
           continue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:41:07.330

我使用了另一种方法来解决我遇到的问题。它包括在最新推文的 URL 上使用字符串替换来获取推文 ID，然后我可以使用 (Tweet ID - 1) 作为 max_id 术语来查询推文。

# php - 如何触发 php 函数？

> ID：13655843
> 
> 赞同：0
> 
> 时间：2012-12-01T02:41:51.580
> 
> 标签：php, function, triggers

我想触发这样的php函数-

***“如果我点击这里”***（可以是按钮或链接）

// 那么这个函数就可以工作了：

```
<?php
function a(){
$b=10;
echo $b;
}
?> 
```

没有 ajax 怎么办？（我不想重新加载页面。如果需要，您也可以向我展示将该 php 函数放入 javascript 中的方法）

-谢谢。

***“编辑”：*** php cURL 可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T02:46:11.433

如果不重新加载页面或使用 Ajax，则无法在 PHP 中完成。唯一的选择是将那段 PHP 代码转换为 Javascript：

```
<script type="text/javascript">
function a()
{
  var b = 10;
  document.write(b);
}
</script>

<input type="button" value="Click Me!" onclick="a();"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:46:06.457

PHP代码示例.php：

```
<?php

function a()
{
    $b=10;
    echo $b;
}

if (isset($_GET['run_func']))
{
    a();
}

?> 
```

HTML 代码：

```
<a href='example.php?run_func=a'>Click Me</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T02:50:58.480

javascript 是客户端语言（在浏览器中执行），而 PHP 是服务器端（在服务器上执行）。要执行 PHP ，必须在服务器上发出[请求](http://djce.org.uk/dumprequest)

这可以通过访问 url 或调用 ajax 调用（执行请求）来完成

如果你想执行一个函数或一个调用，你必须向那个 php 文件发出请求。

因此，您将代码放在 my_php_fle.php 中，然后通过链接发出请求

```
 <a href="my_fle.php"> If I click Here </a> 
```

但是，您将没有结果，因为您仍然必须调用 php 函数。因此，您的 my_file.php 需要看起来像这样

```
<?php
function a(){
    $b=10;
    echo $b;
}
 a(); //executes your function
?> 
```

# django - 在 django 模板中显示 ImageField 中保存的图像

> ID：13655846
> 
> 赞同：0
> 
> 时间：2012-12-01T02:43:55.067
> 
> 标签：django, django-templates, django-media

我正在尝试在我的 django 模板中显示 ImageField 图像。

我这样做是这样的：

`<img src="{{ pic.content.url }}" />`

但是，这显示了 mysite.com/appname/appname/picturename.ext 的图像。（我想 90% 肯定是错的；不过我不知道什么是对的。图像保存在较大的 django-site 文件夹中，我不知道 apache 是否可以通过 url 直接为它们提供服务）

我的站点 settings.py 文件的媒体目录正确（它使用管理页面和所有爵士乐上传），但这只是行不通。

如何显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:07:22.240

我假设您已完成所需的媒体设置。确保您从视图中传递 RequestContext 并尝试将您的 src 更改为

```
<img src="{{MEDIA_URL}}{{pic.content.url}}" /> 
```

更新：

我认为您需要更改媒体设置：

MEDIA_ROOT = '/var/www/mysite/media/' #这里需要指向媒体文件夹 MEDIA_URL = '/media/'

# javascript - 帆布分层

> ID：13655848
> 
> 赞同：4
> 
> 时间：2012-12-01T02:43:58.760
> 
> 标签：javascript, css, html5-canvas

我目前正在使用 Javascript、HTML5 和 CSS3 进行类似于[http://www.beoplay.com/Products/BeoplayA9#under-the-hood的项目。](http://www.beoplay.com/Products/BeoplayA9#under-the-hood)我设法创建滑块效果并将加号按钮添加到画布的多层（4 层：底部图像、顶部图像、文本显示和箭头滑块）。我的问题是鼠标悬停在加号按钮上并显示文本层。我需要访问底层才能访问加号。我怎样才能做到这一点？我对 Javascript 和 HTML5 完全陌生。

HTML 代码：

```
<div id="container">
    <div id="arrow_container" ondrop="drop(event)" ondragover="allowDrop(event)">
        <div id="arrow_button" draggable="true" ondragstart="drag(event)"></div>
    </div>
    <span class="text_box"></span>
    <canvas id="top_canvas" onmouseover="displayInfo(event)"><img id="img_top" src="images/Technical_ONE_front.jpg" alt="device" /></canvas>
    <canvas id="plus_canvas"><img id="img_plus" src="images/Plus.png" alt="plus" /></canvas>
    <img id="img_bottom" src="images/Technical_ONE_back.jpg" alt="skeleton" />
</div> 
```

Javascript 初始化代码：

```
$("#arrow_button").css({"position":"relative", "top":"730px", "left":"497px"});
$("#top_canvas").css({"top":"5px"});

var canvas = document.getElementById( "top_canvas" );
var plus_canvas = document.getElementById( "plus_canvas" );
var ctx = canvas.getContext( "2d" );
var plus_ctx = plus_canvas.getContext( "2d" );
var top_img = document.getElementById( "img_top" );
var bottom_img = document.getElementById( "img_bottom" );
var plus_img = document.getElementById( "img_plus" );

canvas.width = plus_canvas.width = top_img.width;
canvas.height = plus_canvas.height = top_img.height;

ctx.fillStyle = "#FFFFFF";
plus_ctx.fillStyle = "#FFFFFF";
ctx.fillRect( canvas.width / 2, 0, canvas.width, canvas.height );
plus_ctx.fillRect( 0, 0, plus_canvas.width, plus_canvas.height );

ctx.beginPath();
ctx.moveTo(canvas.width / 2, 0);
ctx.lineTo(canvas.width / 2, canvas.height);
ctx.lineTo(canvas.width, canvas.height);
ctx.lineTo(canvas.width, 0);

plus_ctx.beginPath();
plus_ctx.moveTo(0, 0);
plus_ctx.lineTo(0, plus_canvas.height);
plus_ctx.lineTo(plus_canvas.width, plus_canvas.height);
plus_ctx.lineTo(plus_canvas.width, 0);

ctx.clip();
ctx.drawImage( top_img, 0, 0 );
plus_ctx.drawImage( bottom_img, 0, 0 );

for( var i = 0; i < 3; i++ ){
  if( i == 0 ){
      plus_ctx.drawImage( plus_img, 511, 344 );
  } else if( i == 1 ){
      plus_ctx.drawImage( plus_img, 360, 348 );
  } else if( i == 2 ){
      plus_ctx.drawImage( plus_img, 501, 621 );
  }
} 
```

Javascript displayInfo 代码：

```
var highlight_one = new Image();
var highlight_two = new Image();
var highlight_sound = new Image();

highlight_one.src = "../images/Highlight_one_over.png";
highlight_two.src = "../images/Highlight_two_over.png";
highlight_sound.src = "../images/Highlight_sound_over.png";

init();
    if( e.clientX >= 511 && e.clientX <= 526 && e.clientY >= 344 && e.clientY <= 359 ){
        plus_ctx.drawImage( highlight_one, 0, 0 );
        html = "<p>Blah Blah Blah</p>";
    } else if( e.clientX >= 360 && e.clientX <= 375 && e.clientY >= 348 && e.clientY <= 363 ) {
        plus_ctx.drawImage( highlight_sound, 0, 0 );
        html = "<p>La Di Da</p>";
    } else if( e.clientX >= 501 && e.clientX <= 516 && e.clientY >= 621 && e.clientY <= 336 ) {
        plus_ctx.drawImage( highlight_two, 0, 0 );
        html = "<p>Lorem Ipsum</p>";
    }

    $('.text_box').html(html); 
```

CSS 代码：

```
* {margin:0}
#container{width:1024px; height:768px; position:relative}
#img_top, #top_canvas{position:absolute; z-index:3}
#img_plus, #plus_canvas{position:absolute; z-index:1}
#img_bottom, #img_top{width:1024px; height:768px}
.text_box{top:0; left:0; width:1024px; height:768px; padding:20px; position:absolute; z-index:2}
#arrow_container{position:absolute; width:1024px; height:768px; top:0; z-index:4}
#arrow_button{width:30px; height:30px; background-image:url("../images/arrows.png")} 
```

图像尺寸固定为 1024 像素 x 768 像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:02:11.460

您可以通过跟踪鼠标相对于整个页面的位置来实现：

```
var mouseX = 0;
var mouseY = 0;

$('body').mousemove(function(e) {
  mouseX = e.pageX;
  mouseY = e.pageY;
} 
```

并将其与按钮的位置进行比较，首先确定箭头的位置：

```
var whereIsMyArrow = $('#arrow').offset(); 
```

然后在鼠标位于箭头顶部时调节行为：

```
if ((mouseX>=whereIsMyArrow.left)&&<br>(mouseX<=(whereIsMyArrow.left+$('#arrow').width())&&
   (mouseY>=whereIsMyArrow.top)&&<br>(mouseY<=(whereIsMyArrow.top+$('#arrow').height())){
   //do something
} 
```

确保条件在 .mousemove(e) 事件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T23:43:41.963

在顶部添加一个透明层并为其添加事件处理程序。

# javascript - 通过javascript提交表单时IE中的访问被拒绝错误

> ID：13655850
> 
> 赞同：7
> 
> 时间：2012-12-01T02:44:03.177
> 
> 标签：javascript, jquery, asp.net-mvc, file-upload

```
@using (Html.BeginForm("Upload", "MyProfile", FormMethod.Post, new
{
    @encType = "multipart/form-data",
    id = "ImgForm",
    name = "ImgForm",
    target = "UploadTarget"
}))
{   
    <input type="file" name="FileUpload" class="filestyle-notext fileupload">                
}

<iframe id="UploadTarget" name="UploadTarget" style="position: absolute; left: -999em; top: -999em;"></iframe> 
```

通过 javascript/jquery，我在更改文件输入时提交表单。

```
$('.myprofile .fileupload').change(function () {       
    $('#ImgForm').submit();
}); 
```

它抛出一个错误：访问被拒绝并且它只发生在 IE 中（我使用的是 ie8）并且在 Firefox、chrome 中工作正常。

在论坛中阅读后，由于安全原因，我发现通过 IE 中的 javasript 提交表单存在问题，但有什么解决方法吗？而且我不明白为什么只有 IE 在所有浏览器都支持它的情况下才会这样做。IE 比所有浏览器都安全吗？;) 请采纳您的建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T06:29:20.140

IE8 不支持在此文件输入事件`.submit()`中调用包含文件输入的表单`.change()`事件。这是出于安全原因。您正在尝试在没有用户明确允许的情况下向服务器提交文件。`.submit()`一种可能的解决方法是从您放置的某个按钮的 .click() 事件中调用表单上的 ：

```
$('.uploadButton').click(function () {       
    $('#ImgForm').submit();
}); 
```

现在，当用户单击某个上传按钮时，表单将提交。

值得一提的是，这只对IE8有问题。更高版本和其他浏览器没有这个限制。

您也可以考虑使用基于 Flash 的上传控件，例如[Uploadify](http://www.uploadify.com/)或[BlueImp File upload](https://github.com/blueimp/jQuery-File-Upload)，以跨浏览器的方式将文件上传到服务器。

# javascript - 使用新密钥重新排序 JSON

> ID：13655853
> 
> 赞同：1
> 
> 时间：2012-12-01T02:45:11.557
> 
> 标签：javascript, json

我有一个从休息服务返回的大型 JSON，我需要先对其进行排序，然后才能使用它。

示例行：

```
[{"Time":"1354233600000","Name":"NAN","TagValue":"0","TagValue2":"0"},
{"Time":"1354234500000","Name":"NAN","TagValue":"0","TagValue2":"0.0020288255172466159"},
{"Time":"1354235400000","Name":"NAN","TagValue":"0","TagValue2":"0.0022446943714048121"},
{"Time":"1354236300000","Name":"NAN","TagValue":"0","TagValue2":"0.00014998416164500384"},
{"Time":"1354237200000","Name":"NAN","TagValue":"0","TagValue2":"0"},
{"Time":"1354238100000","Name":"NAN","TagValue":"0","TagValue2":"0.00015631034628383933"},
{"Time":"1354239000000","Name":"NAN","TagValue":"0","TagValue2":"1.1165024734559951E-05"} 
```

这样的行大约有2000行。我想按时间对它们进行排序并得到这样的东西：

```
var restData = { "1354234500000":[
                                  {"Name":"NaN",
                                   "TagValue":"0",
                                   "TagValue2":"someFloat"}
                                   {"Name:"NAN,
                                    "TagValue":"0",
                                     "TagVale":"0"}
                                   ],
                   "aNewUnixTimeStamp":[
                                     {..........}
]}; 
```

是否有一些神奇的 javascript 函数可以用来完成此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:49:37.963

假设您的对象都整齐地组织在一个数组中，您可以调用

```
bigArray.sort(function(a,b) {return a.Time < b.Time ? -1 : 1}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:14:58.127

```
var myarray = [{"Time":"1354233600000","Name":"NAN","TagValue":"0","TagValue2":"0"},
{"Time":"1354234500000","Name":"NAN","TagValue":"0","TagValue2":"0.0020288255172466159"},
{"Time":"1354235400000","Name":"NAN","TagValue":"0","TagValue2":"0.0022446943714048121"},
{"Time":"1354236300000","Name":"NAN","TagValue":"0","TagValue2":"0.00014998416164500384"},
{"Time":"1354237200000","Name":"NAN","TagValue":"0","TagValue2":"0"},
{"Time":"1354238100000","Name":"NAN","TagValue":"0","TagValue2":"0.00015631034628383933"},
{"Time":"1354239000000","Name":"NAN","TagValue":"0","TagValue2":"1.1165024734559951E-05"} 
```

* * *

```
var result = myarray.reduce(function(res, obj) {
    if (res.hasOwnProperty(obj.Time) === false) {
        res[obj.Time] = [];
    }
    res[obj.Time].push(obj);
    delete obj.Time;
    return res;
}, {}); 
```

您应该知道，由于结果使用时间戳作为对象的键，因此您将无法对它们进行排序，因为对象没有定义的顺序。

对于旧版浏览器，还`.reduce()`需要一个 shim。你可以使用[MDN 提供的](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/reduce#Compatibility)那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T02:52:56.757

你也可以使用来自 jquery 的这个插件

[http://archive.plugins.jquery.com/project/sort](http://archive.plugins.jquery.com/project/sort)

```
$(dataSet).sort("Time", "asc"); 
```

# python - Python列表递归类型错误

> ID：13655859
> 
> 赞同：1
> 
> 时间：2012-12-01T02:46:13.040
> 
> 标签：python, recursion, binary-tree

已解决：似乎该问题仅出现在 PythonWin 中。我通过 IDLE 的 python shell 运行了所有东西，它工作得很好。必须是 PythonWin 的错误，而不是代码本身。

我似乎无法弄清楚为什么下面的代码给了我一个`TypeError: 'type' object is not iterable`

粘贴箱：http : [//pastebin.com/VFZYY4v0](http://pastebin.com/VFZYY4v0)

```
def genList(self):
    #recursively generates a sorted list of child node values
    numList = []
    if self.leftChild != 'none':
        numList.extend(self.leftChild.genList())  #error
    numList.extend(list((self.Value,)))
    if self.rightChild != 'none':
        numList.extend(self.rightChild.genList()) #error
    return numList 
```

添加子节点的代码（正常工作）

```
def addChild(self, child):
    #add a child node. working
    if child.Value < self.Value:
        if self.leftChild == 'none':
            self.leftChild = child
            child.parent = self
        else:
            self.leftChild.addChild(child)
    elif child.Value > self.Value:
        if self.rightChild == 'none':
            self.rightChild = child
            child.parent = self
        else:
            self.rightChild.addChild(child) 
```

任何帮助，将不胜感激。

完整的解释器会话： >>> import BinTreeNode as BTN
>>> node1 = BTN.BinaryTreeNode(5)
>>> node2 = BTN.BinaryTreeNode(2)
>>> node3 = BTN.BinaryTreeNode(12)
>>> node3 = BTN .BinaryTreeNode(16)
>>> node4 = BTN.BinaryTreeNode(4)
>>> node5 = BTN.BinaryTreeNode(13)
>>> node1.addChild(node2)
>>> node1.addChild(node3)
>>> node1\. addChild(node4)
>>> node1.addChild(node5)
>>> node4.genList()
<class 'list'>
>>> node1.genList()
Traceback（最近一次调用最后）：
文件“<交互式输入>” ，第 1 行，在 <模块>
文件“C:...\python\BinTreeNode.py”，第 47 行，在 genList
numList.extend(self.leftChild.genList()) #error
文件“C:...\python\BinTreeNode.py”，第 52 行，在 genList
TypeError: 'type' object is not iterable

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:00:23.063

我会添加一些打印来查看它给出错误时的实际类型，例如：

```
def genList(self):
    #recursively generates a sorted list of child node values
    numList = []
    if self.leftChild != 'none':
        print self.leftChild.genList(), type(self.leftChild.genList())
        numList.extend(self.leftChild.genList())  #error
    numList.extend(list((self.Value,)))
    if self.rightChild != 'none':
        print self.rightChild.genList(), type(self.rightChild.genList())
        numList.extend(self.rightChild.genList()) #error
    return numList 
```

一个不那么疯狂的猜测...尝试使用 [self.Value] 代替 list((self.Value,))。我觉得它会起作用...... :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:59:36.520

您的示例中没有任何内容表明问题出在哪里，但这意味着您以某种方式返回对象类型而不是对象实例。在这一点上，我所能提供的只是建议另一种方法来重做该`genList()`方法，看看它是否能神奇地解决您的问题。

您可以尝试通过递归传递相同的结果列表，而不是返回许多临时的：

```
def genList(self, numList=None):
    if numList is None:
        numList = []

    if self.leftChild != 'none':
        self.leftChild.genList(numList)

    numList.append(self.Value)

    if self.rightChild != 'none':
        self.rightChild.genList(numList)

    return numList

results = rootNode.genList() 
```

另外，您使用`'none'`而不是有原因`None`吗？我只会使用 a`None`而不是字符串。

我对您的版本的建议编辑在这里： http: [//pastebin.com/FGf8Lcdu](http://pastebin.com/FGf8Lcdu)

这是您在 python3.3 下的相同解释器代码的输出：

```
In [1]: %cpaste
Pasting code; enter '--' alone on the line to stop or use Ctrl-D.
:>>> import BinTreeNode as BTN
:>>> node1 = BTN.BinaryTreeNode(5)
:>>> node2 = BTN.BinaryTreeNode(2)
:>>> node3 = BTN.BinaryTreeNode(12)
:>>> node3 = BTN.BinaryTreeNode(16)
:>>> node4 = BTN.BinaryTreeNode(4)
:>>> node5 = BTN.BinaryTreeNode(13)
:>>> node1.addChild(node2)
:>>> node1.addChild(node3)
:>>> node1.addChild(node4)
:>>> node1.addChild(node5)
:<EOF>

In [2]: node4.genList()
Out[2]: [4]

In [3]: node1.genList()
Out[3]: [2, 4, 5, 13, 16] 
```

# android - 从接收器启动 android 活动（在运行服务内部）

> ID：13655862
> 
> 赞同：2
> 
> 时间：2012-12-01T02:46:36.550
> 
> 标签：android, android-intent

我想在收到短信时显示警报，所以我的想法是启动一个启动警报对话框的新活动。

我的服务启动没有问题，并且也启动接收器..

我可以很好地接收短信并显示 toast 警报.. 但我想显示一个自定义警报对话框。

这是启动我的服务的活动（ServiceExampleActivity）：

```
public class ServiceExampleActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btnStartService = (Button) findViewById(R.id.btnStart);
        Button btnStopService = (Button) findViewById(R.id.btnStop);

        btnStartService.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                StartMyService();
            }
        });

        btnStopService.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                StopMyService();
            }
        });          

    }

    private void StartMyService() {
        Intent myServiceIntent = new Intent(this, ServiceTest.class);
        startService(myServiceIntent);
    }

    private void StopMyService() {
        Intent myServiceIntent = new Intent(this, ServiceTest.class);
        stopService(myServiceIntent);
    }        
} 
```

这是我的服务（ServiceTest）：

```
public class ServiceTest extends Service {

    private static final String ACTION = "android.provider.Telephony.SMS_RECEIVED";
    private BroadcastReceiver myBroadcastReceiver = null;

    @Override
    public void onCreate() {
        super.onCreate();

        final IntentFilter theFilter = new IntentFilter();
        theFilter.addAction(ACTION);

        this.myBroadcastReceiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {

                StartDialogActivity(context, intent);

            }
        };

        this.registerReceiver(myBroadcastReceiver, theFilter);
    }

    @Override
    public IBinder onBind(Intent arg) {
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);

        Log.d("ServiceTest", "Started");
        Toast.makeText(this, "Service started...", 3000).show();

    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        unregisterReceiver(myBroadcastReceiver);
        Toast.makeText(this, "Service destroyed...", 3000).show();
    }

    private void StartDialogActivity(Context context, Intent intent) {
        Intent dlgIntent = new Intent(context, DialogActivity.class);               
        dlgIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);      
        context.startActivity(dlgIntent);   
    }
} 
```

这是我要启动以正常显示警报对话框的活动..

```
public class DialogActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dialog);       

    }
} 
```

当它尝试启动活动时，应用程序崩溃..你能告诉我是错误..吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T03:15:07.537

像这样，你想从服务开始活动

```
Intent dlgIntent = new Intent(context, DialogActivity.class);
dlgIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
getApplication().startActivity(dlgIntent ); 
```

# android - 强制关闭 TCP/IP (Telnet) 连接

> ID：13655863
> 
> 赞同：1
> 
> 时间：2012-12-01T02:46:43.463
> 
> 标签：android, sockets, tcp, telnet

基本上......

我正在尝试通过 TCP/IP 连接连接到设备。

我有一个 TextEdit 字段来输入设备的 IP 地址，然后单击按钮通过意图将 IP 地址发送到另一个类。然后使用 IP 地址和固定端口 32 连接到设备。

连接本身不需要任何身份验证，但一旦连接，设备就会要求输入用户名和密码（在这种情况下，它们都是 root）。

所以一旦连接我需要自动发送“root”等待响应，再次发送“root”，当“SNX_COM>”的响应（这是我登录时得到的）等待进一步的命令。

进一步的命令将来自按钮点击。

我遇到的问题是，当我输入我的 IP 地址并按连接时，应用程序只是强制关闭。

请帮忙........

我的 IP 条目页面 (XML)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".IPEntry" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="79dp"
    android:ems="10"
    android:ellipsize="start"
    android:gravity="center_horizontal"
    android:hint="@string/enterip" />

<Button
    android:id="@+id/connect"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/editText1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="14dp"
    android:text="@string/ipconbut" />

<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleLarge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/connect"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="21dp" />

</RelativeLayout> 
```

我的 IP 条目页面（Java 类）

```
package com.smarte.smartipcontrol;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class IPEntry extends Activity {
public final static String ACTUALSMARTIP = "com.smarte.smartipcontrol.ACTU_IP";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.act_ipentry);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.act_ipentry, menu);
    return true;
}

/** Called when the user clicks the SendIP button */
public void sendip (View view) {
    Intent intent = new Intent(this, IPControl.class);
    EditText editText = (EditText) findViewById(R.id.smartipaddress);
    String actu_ip = editText.getText().toString();
    intent.putExtra(ACTUALSMARTIP, actu_ip);
    startActivity(intent);
}
} 
```

我的 IP 连接和命令发送页面 (XML)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".IPControl" >

<TextView
    android:id="@+id/textStatus"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/getModel"
    android:text="@string/status"
    android:textSize="24sp" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:ems="10"
    android:hint="@string/command" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/getModel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/editText1"
    android:text="@string/Modelbutton" />

</RelativeLayout> 
```

我的 IP 连接和命令发送页面（Java 类）

```
package com.smarte.smartipcontrol;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class IPControl extends Activity {

private Socket socket;
private String serverIpAddress;
private static final int REDIRECTED_SERVERPORT = 32;
public PrintWriter out;
public BufferedReader in;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    serverIpAddress = intent.getStringExtra(IPEntry.ACTUALSMARTIP);
    createConnection();

}

public void getModel(View view) {
    try {
        out.println("[c,l#,o13,i13crlf\r\n");
        //System.out.print("root\r\n");
        while(!in.ready());
        readBuffer();

    } catch(IOException e) {}
}

public void createConnection() {
    try {
         InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
         socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
      } catch (UnknownHostException e1) {
         e1.printStackTrace();
      } catch (IOException e1) {
         e1.printStackTrace();
      }
    try {
        out = new PrintWriter(new BufferedWriter(new         OutputStreamWriter(socket.getOutputStream())),true);
        in = new BufferedReader(new         InputStreamReader(socket.getInputStream()));
        while(!in.ready());
        readBuffer();
        out.println("root\r\n");
        //System.out.print("root\r\n");
        while(!in.ready());
        readBuffer();
        out.println("root\r\n");
        //System.out.print("root\r\n");
        while(!in.ready());
        readBuffer();
    } catch(IOException e) {}
}

private String readBuffer() throws IOException {
    String msg = "";

    while(in.ready()) {
        msg = msg + (char)in.read();
    }
    //System.out.print(msg);
    if(msg.indexOf("SCX_COM> ") != -1) return msg.substring(0,            msg.indexOf("SCX_COM> "));
    else return msg;
}
} 
```

安卓清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.smarte.smartipcontrol"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET"> </uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"> </uses-permission>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.smarte.smartipcontrol.IPEntry"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<activity android:name="com.smarte.smartipcontrol.IPControl" />

</application>

</manifest> 
```

......最后是字符串（以防万一）

```
<string name="app_name">SmartiP Control</string>
<string name="enterip">Enter IP Address</string>
<string name="menu_settings">Settings</string>
<string name="ipconbut">Connect</string>
<string name="hello_world">Hello world!</string>
<string name="title_activity_ipcontrol">IPControl</string>
<string name="Modelbutton">Model</string>
<string name="command">Enter Command</string>
<string name="status">Status</string> 
```

日志猫..

```
12-01 03:19:50.977: E/AndroidRuntime(1537): FATAL EXCEPTION: main
12-01 03:19:50.977: E/AndroidRuntime(1537): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.smarte.smartipcontrol/com.smarte.smartipcontrol.IPControl}: android.os.NetworkOnMainThreadException
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.os.Looper.loop(Looper.java:137)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at java.lang.reflect.Method.invokeNative(Native Method)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at java.lang.reflect.Method.invoke(Method.java:511)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at dalvik.system.NativeStart.main(Native Method)
12-01 03:19:50.977: E/AndroidRuntime(1537): Caused by: android.os.NetworkOnMainThreadException
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at libcore.io.IoBridge.connect(IoBridge.java:112)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at java.net.Socket.startupSocket(Socket.java:566)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at java.net.Socket.<init>(Socket.java:225)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at com.smarte.smartipcontrol.IPControl.createConnection(IPControl.java:50)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at com.smarte.smartipcontrol.IPControl.onCreate(IPControl.java:33)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.app.Activity.performCreate(Activity.java:5104)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-01 03:19:50.977: E/AndroidRuntime(1537):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-01 03:19:50.977: E/AndroidRuntime(1537):     ... 11 more 
```

请帮我..........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:28:15.713

克里斯·斯特拉顿在上面的评论中。

谢谢克里斯....

“引起：android.os.NetworkOnMainThreadException”是你的问题。在线上有大量关于该问题的文档，因此请进行一些研究，然后重新构建您的程序以与 Android 的 UI 响应目标兼容。

# php - 如何为上传到我网站的图像添加随机名称？

> ID：13655864
> 
> 赞同：1
> 
> 时间：2012-12-01T02:46:53.380
> 
> 标签：php, image, random, upload, rename

所以我正在制作一个.gif 上传网站，这是我的“upload_file.php”代码。

```
 <?php
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif"))
    && ($_FILES["file"]["size"] < 5242880)
    && in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("i/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "i/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "i/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

如何添加随机图像名称？最好只有 #0-9 的 6-8 位数字。这样图像名称就很简单，而不是特定于大写字母等。请尽可能具体地说明方向，因为我还在学习 PHP，这是我制作这个网站的主要原因之一。

PS 如果您能告诉我如何在没有显示文件信息的页面的情况下直接重定向到图像，则可以加分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:50:45.013

**调用这个函数来生成你的文件名

```
function  makeFileName($size=6, $path="/", $extension=".gif"){
    //if you give a path, don't forget the slash at end

    $root = $_SERVER["DOCUMENT_ROOT"];        
    $name = rand(0, str_repeat(9, $size));
    $name = $root.$path.str_pad($name, 8,  0, STR_PAD_LEFT).$extension;
    while(is_file($name)){
        makeFileName();
    }
    return $path.$name; 
}
echo makeFileName();

//makeFileName(6, ".png") Will create a png file name with 6 digits 
```

编辑 ：

```
move_uploaded_file($_FILES["file"]["tmp_name"], makeFileName(6, "/your/dir/", ".png")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T02:49:15.727

根据上传时间随机命名如何？

```
20121130184908.jpeg 
```

那就是我在 2012-11-30 18:49:08 写下 (utc-0800) 的那一刻

如果上传量很大，那么也许毫秒也应该包括在内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T03:49:31.077

你可以使用[uniqid()](http://www.php.net/manual/en/function.uniqid.php)我认为它会给你你所需要的

# gcc - --with-arch-32 =?

> ID：13655865
> 
> 赞同：3
> 
> 时间：2012-12-01T02:47:10.043
> 
> 标签：gcc, configuration, cpu-architecture

我尝试在 ubuntu 12.04（64 位）上构建 gcc 4.8 主干。

当我使用配置时

```
../gcc-trunk/configure -v --with-pkgversion='ubuntu12.04-64' --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.8 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.8 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu 
```

我收到以下错误：

```
In file included from /usr/include/fenv.h:58:0,
                 from ../../../../gcc-trunk/libquadmath/math/ccoshq.c:23:
../../../../gcc-trunk/libquadmath/math/ccoshq.c: In function ‘ccoshq’:
/usr/include/bits/fenv.h:116:4: error: impossible constraint in ‘asm’
    __asm__ __volatile__ ("divss %0, %0 " : : "x" (__f));
    ^
/usr/include/bits/fenv.h:116:4: error: impossible constraint in ‘asm’
    __asm__ __volatile__ ("divss %0, %0 " : : "x" (__f)); 
```

但是在我删除“--with-arch-32=i686”之后，一切都好了。我的 CPU 是 Intel(R) Core(TM)2 Quad CPU Q9400。那么，我应该在“--with-arch-32”选项中使用什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T12:09:02.060

约束`x`意味着一个 SSE 寄存器。该架构`i686`不实现 SSE insns。您可以使用的最旧的是`pentium3`.

这取决于您打算在哪里运行从该编译器生成的二进制文件。如果只供您自己使用，您可以简单地使用`core2`.

# ios - NSTimer Thrashing - 我需要处理它吗？

> ID：13655870
> 
> 赞同：1
> 
> 时间：2012-12-01T02:48:47.313
> 
> 标签：ios, nstimer

这个问题可能已经存在，但我找不到。我的问题本质上是这样的。如果我有一个重复的 NSTimer 执行的时间比计时器间隔长，是否会有一些颠簸导致应用程序崩溃？或者，在执行的任务完成之前，新的时间事件是否开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:52:37.760

由于 NSTimer 在创建它的运行循环上运行，我认为它永远无法重新输入它调用的方法。这个[关于运行循环的文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html)证实了这一点（参见“定时器源”部分：

> “类似地，如果在运行循环正在执行处理程序例程中间时触发计时器，则计时器将等待直到下一次通过运行循环调用其处理程序例程”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:55:24.177

您总是可以只安排一个只发生一次的 nstimer，然后在函数完成时重新安排它。

```
- (void)myFunction {
    ......stuff that your method does
    [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(myFunction) userInfo:nil repeats:NO];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T03:52:23.800

重复计时器总是根据计划的触发时间而不是实际的触发时间来调度自己。例如，如果定时器计划在特定时间触发，并且此后每 5 秒触发一次，则计划的触发时间将始终落在原始的 5 秒时间间隔上，即使实际触发时间延迟也是如此。如果触发时间被延迟到超过一个或多个预定触发时间，则计时器在该时间段内仅触发一次；然后在触发后重新安排计时器，以用于未来的下一个预定触发时间。

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T04:19:44.693

只要您避免启动一些异步作业，就可以了。如果异步调度任务的时间通常比定时器调用之间的间隔时间长，那么该队列可以得到备份。如果做动画，即使动画可能没有完成，计时器也会触发。

* * *

让我举两个例子。对于这两个示例，假设我们创建了一个每秒触发一次的计时器：

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                              target:self
                                            selector:@selector(handleTimer:)
                                            userInfo:@"tick"
                                             repeats:YES]; 
```

**第一个例子：**假设我们有一些串行队列：

```
self.queue = [[NSOperationQueue alloc] init];
self.queue.maxConcurrentOperationCount = 1; 
```

此外，假设我们有一个`NSTimer`处理程序，它执行以下操作：

```
- (void)handleTimer:(NSTimer *)timer
{
    NSLog(@"%s %@", __FUNCTION__, timer.userInfo);

    [self.queue addOperationWithBlock:^{

        NSLog(@"%s starting some slow process; has %d operations queued", __FUNCTION__, self.queue.operationCount);

        // to simulate a slow process, let's just sleep for 10 seconds

        sleep(10);

        NSLog(@"%s done", __FUNCTION__);
    }];
} 
```

因为计时器每秒触发一次，并且因为计时器处理程序几乎立即返回（因为它所做的只是排队后台操作），所以当第一个排队操作（需要 10 秒）完成并且第二个操作开始时，有该后台队列上已经有 10 个操作。而当第二个后台操作完成时，当第三个操作开始时，有 19 个操作排队。它只会变得更糟，因为`NSTimer`处理程序将继续被调用，比较慢的后台操作从队列中清除的速度更快。显然，如果处理程序在当前队列中同步执行所有操作，那么一切都很好，并且没有积压，没有`NSTimer`.

**第二个例子：**这个问题的另一个例子是动画。让我们假设计时器处理程序方法正在执行类似以下的操作，它启动了一个 10 秒的动画来移动 a `UIImageView`：

```
- (void)handleTimer:(NSTimer *)timer
{
    NSLog(@"%s %@", __FUNCTION__, timer.userInfo);

    [UIView animateWithDuration:10.0
                     animations:^{
                         self.imageView.frame = [self determineNewFrame];
                     }
                     completion:nil];
} 
```

这不起作用（或者更准确地说，`handleTimer`即使之前的动画没有完成，您也会看到计时器调用的后续调用）。如果你要这样做，你必须跟踪动画是否完成。您必须执行以下操作：

```
- (void)handleTimer:(NSTimer *)timer
{
    NSLog(@"%s %@", __FUNCTION__, timer.userInfo);

    if (!self.animating)
    {
        NSLog(@"%s initiating another animation", __FUNCTION__);

        [UIView animateWithDuration:10.0
                         animations:^{
                             self.animating = YES;
                             self.imageView.frame = [self determineNewFrame];
                         }
                         completion:^(BOOL finished){
                             self.animating = NO;
                         }];
    }
} 
```

您要么必须做一些状态标志（比如我的布尔`animation`标志）以防止在第一个动画完成之前出现额外的动画，要么只是不使用循环计时器，而只是在动画类方法的`completion`块中启动另一个计时器。`UIView`

# redirect - 移动重定向脚本不重定向 Safari

> ID：13655874
> 
> 赞同：0
> 
> 时间：2012-12-01T02:49:54.743
> 
> 标签：redirect, mobile, safari

这是我使用的移动重定向脚本。出于某种原因，它不会为 iPhone 重定向 Safari。我在 |safari| 中添加了 正如你所看到的|黑莓| 但它会重定向谷歌浏览器，即使在计算机上也是如此。有没有人有任何建议让 Safari 处理此代码或我可以添加的在 Safari 上独立工作的单独代码？

```
<script type="text/javascript">// <![CDATA[  
        var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));  
if (mobile) {document.location = "http://www.grossmag.com/mobi";}  
// ]]></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:20:05.487

重定向有效。是我正在处理的网站导致了这个问题。它是在 Joomla 2.5 中构建的，并且有一个针对 iPhone 的内置重定向，并且从未进入我的重定向。我卸载了 Joomla 移动插件，它允许用户被重定向到我建立的移动网站。

# sql-server - 删除顶部项目的 SQL 查询

> ID：13655880
> 
> 赞同：0
> 
> 时间：2012-12-01T02:51:32.007
> 
> 标签：sql-server

我试图运行此查询的情况，我想删除我保存在表中的最新数据。

```
DELETE from JOBORDER2 Where ddates in (SELECT TOP 1 * FROM JOBORDER2 Where cjobno = '45' ORDER BY ddates DESC); 
```

但我得到了这个错误。**当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T02:53:57.323

尝试

```
DELETE from JOBORDER2
Where ddates in (
    SELECT TOP 1 ddates
    FROM JOBORDER2
    Where cjobno = '45'
    ORDER BY ddates DESC); 
```

这个想法是你试图返回一组（1）“ddates”。

* * *

## 解释

假设顶部的“日期”是“2012 年 11 月 30 日”。那么您的查询将相当于：

```
DELETE from JOBORDER2
Where ddates in ('11/30/2012'); 
```

这是有道理的。使用“*”，您试图做一些荒谬的事情。括号中有一个行集，即使只有一行，您处理的也不止一列。您想与哪一列进行比较？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T02:54:14.790

它不喜欢星星。尝试：

```
DELETE from JOBORDER2 Where ddates in
      (SELECT TOP 1 ddates 
       FROM JOBORDER2 
       Where cjobno = '45' 
       ORDER BY ddates DESC); 
```

# multithreading - MonoTouch 6.x 中的线程模型更改？

> ID：13655882
> 
> 赞同：3
> 
> 时间：2012-12-01T02:52:03.233
> 
> 标签：multithreading, xamarin.ios

几个星期后，但我终于回来用新的 6.0 版本更新我的 MonoTouch iOS 应用程序。对于长时间运行的活动（我的应用程序对后台进行服务调用并进行图像上传），我使用与示例非常相似的线程。在我升级之前，这一切都很好。控制器中的典型模式如下所示：

```
protected void LogInButtonClicked(object sender, EventArgs e)
{
      NetworkActivity.Start();

      // start the request.
      ThreadPool.QueueUserWorkItem ((cb) => {

          var service = new ClientUserService();
          var result = service.Login(this.UserName.Text, this.Password.Text);

          // when done, switch back to UI.
          this.InvokeOnMainThread (() => {

              NetworkActivity.Stop();

              // do the various other things to init the app on the UI thread.
          }
      });
} 
```

在 5.x 上运行良好并且从未崩溃。它遵循已发布的代码指南。但是现在我立即得到了 UUIKit 一致性错误的异常：您正在调用只能从 UI 线程调用的 UIKit 方法。我在我的服务热线 (service.Login(...)) 上得到了它。

所以......我不确定我在这里做错了什么。我确实回去查看了一些较新的样本。其中一些正在使用任务库（例如[https://github.com/xamarin/mobile-samples/blob/master/MultiThreading/iOSMultiThreading/Screens/MainScreen_iPhone.cs](https://github.com/xamarin/mobile-samples/blob/master/MultiThreading/iOSMultiThreading/Screens/MainScreen_iPhone.cs)），但这不应排除此 QueueUserWorkItem 方法。

**问题**：Monotouch 中的线程模型是否发生了重大变化，从而不再支持上述编码模式？

谢谢。JB

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T03:39:15.353

将 this.UserName.Text 和 this.Password.Text 包装在 InvokeOnMainThread 委托中。Monotouch 期望 UI 元素的所有工作都在 UI 线程中执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T15:12:40.137

此功能是不久前在[MonoTouch 5.4](http://docs.xamarin.com/ios/releases/MonoTouch_5/MonoTouch_5.4)中引入的（请参阅新库功能，跨线程 UI 检查）。

现在这不是*线程*更改（代码像以前一样执行），而只是额外的检查，以确保人们被警告一个常见的陷阱——这通常很难调试。

**如果您想**恢复旧的行为，有说明。但是请注意，您当前的代码已损坏，虽然它可能在 99% 的时间内都可以正常工作，但对某些人来说可能会严重损坏（例如，此类问题通常与时间相关，更改代码或使用不同的设备可能会触发该问题）。

因此，我强烈建议您在发现问题时解决这些问题（您的用户会因此而爱上您 ;-)，就像 Ben 所描述的那样。

# hibernate - 休眠验证@Pattern

> ID：13655884
> 
> 赞同：1
> 
> 时间：2012-12-01T02:52:07.157
> 
> 标签：hibernate, validation, jsf, richfaces

我在托管 bean 中使用`org.hibernate.validator.Pattern`注释来验证组件。`jsf``<h:inputText>`

```
@Pattern(regex="\\W+")
public String getText() {
  return text;
} 
```

我的问题是，有没有一种方法可以从方法或 EL 中获取正则表达式而无需对其进行硬编码。
举个例子

```
@Pattern(regex = getRexEx()) 
```

或者

```
@Pattern(regex = "#{bean.regEx}") 
```

我用谷歌搜索，发现`regEx`应该是一个常数。然而，可以有另一种方法来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T03:07:21.023

注释的参数需要是编译时常量，所以不，不可能将运行时表达式指定为@Pattern 的参数。也不可能将 EL 表达式作为参数传递并让它做任何事情，因为这根本不是模式验证器的编写方式。

但是，您*可以*做的是定义您自己的验证器类，该类采用 EL 表达式的形式并针对它验证 bean 属性。不过，祝你好运！不是一个简单的任务。

# actionscript-3 - 在 Flex / Spark WindowedApplication Flex 4.6 的状态栏中更改字体颜色

> ID：13655885
> 
> 赞同：0
> 
> 时间：2012-12-01T02:52:14.260
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder

我试图找出是否可以更改 WindowedApplication 状态栏中的字体颜色而无需制作自定义皮肤。问题是我使用的是非常暗的石墨主题，当我向状态栏添加文本时，它是非常深的灰色，难以阅读。我应该注意到我使用的是 flash builder 4.6 和 Flex 4.6。我尝试在设计编辑器中更改主题的颜色，但这些都没有改变字体颜色。

文本将使用 actionscript 生成。我注意到还有一个 statusBar 变量，它是一个 IVisualElement，但我似乎找不到任何关于此的文档。这就是我当前写入状态栏的方式。

```
this.status = "Testing"; 
```

感谢您提供任何可以发送给我的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:53:52.040

试试这个

```
this.statusText.text = "Testing";
this.statusText.setStyle("color",0xFF0000); 
```

# ios - ios - 如何确保当我提交应用程序时，只有 iPhone 部分被提交？

> ID：13655890
> 
> 赞同：0
> 
> 时间：2012-12-01T02:53:49.607
> 
> 标签：ios, ios5

我正在开发一个新应用程序。我已经完成了其中的 iPad 部分，并且我不希望它的 iPad 部分进入应用程序的当前版本。这将是第一个版本。

我在哪里向 Apple 指定我只希望 iPhone 版本上线？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:16:41.033

在 Xcode 中的项目信息中，执行以下操作：

![在此处输入图像描述](../Images/a146378b77345774dd40580a5a63adaa.png)

# java - 获取字符串数组中字符串的索引

> ID：13655898
> 
> 赞同：1
> 
> 时间：2012-12-01T02:54:36.747
> 
> 标签：java, arrays, string

我的数组看起来像这样

```
String[] dayNames = new String[DAYS_IN_WEEK];
    dayNames[0] = "Sunday";
    dayNames[1] = "Monday";
    dayNames[2] = "Tuesday";
    dayNames[3] = "Wednesday";
    dayNames[4] = "Thursday";
    dayNames[5] = "Friday";
    dayNames[6] = "Saturday"; 
```

我需要使用 findDay 方法打印数组的索引。

所以如果选择了“星期六”，我需要返回 6 个。

谢谢你的时间=D Ps 请没有答案？只是建议=）

更新* ***

我的数组不会编译。这正是我所拥有的：

```
private static final int DAYS_IN_WEEK = 7;
    String[] dayNames;
    dayNames = new String[DAYS_IN_WEEK]
    // Declare an array of Strings named dayNames
    dayNames[0] = "Sunday";
    dayNames[1] = "Monday";
    dayNames[2] = "Tuesday";
    dayNames[3] = "Wednesday";
    dayNames[4] = "Thursday";
    dayNames[5] = "Friday";
    dayNames[6] = "Saturday"; 
```

我得到多个错误，开始于：

```
Weekdays.java:12: error: <identifier> expected
    dayNames = new String[DAYS_IN_WEEK] 
```

我不明白为什么。[我从http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)从字面上复制了 EXACT 格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:20:04.960

你可以这样做...

```
int index = Arrays.asList(dayNames).indexOf("Saturday"); 
```

我将把打印索引值作为练习留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:08:16.040

使用地图，您的键是天，值是索引。

```
Key => Sunday , Monday , Tuesday .....

Value = > 0,1,2 .. 
```

将值映射到所需的键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T03:14:53.820

好吧，一种方法是这样的：

```
public int findDay(String dayString) {
    if (dayString.equals("Sunday") {
        return 0;
    }
    else if (dayString.equals("Monday") {
    ... 
```

你明白了它的要点——但这是一个相当糟糕的解决方案。

另一种方法是使用 Java 的枚举值：

```
public enum Day {
    SUNDAY(0), MONDAY(1), TUESDAY(2), WEDNESDAY(3) ...

    private final int i;
    private Day(int value) {
        i = value;
    }

    public int getNumericRepresentation() {
        return i;
    }
} 
```

然后你实际上可以有一个枚举数组，比如：

```
Day[] days = new Day[Day.values().size()];
int i = 0;
for (Day day : Day.values()) {
    days[i] = day;
    i++;
} 
```

并打印出一天的数字表示，您只需使用：

```
day.getNumericRepresentation(); 
```

# ruby - 为什么这个任务在 Ruby 中失败了？

> ID：13655902
> 
> 赞同：1
> 
> 时间：2012-12-01T02:55:45.017
> 
> 标签：ruby

我正在尝试制作 DSL，但遇到了一些让我感到困惑的事情。在我的调用方法中，我想在评估块之前为 @mymethod 设置一个初始值。如果我直接分配给变量，它会起作用：

```
class Test

  class << self
    attr_accessor :mymethod
  end

  def self.call(&block)
    @mymethod="foo"
    class_eval &block
  end

end

Test.call do
  puts "mymethod returned: #{mymethod}"
  mymethod = "bar"
  puts "mymethod is now: #{mymethod}"
end 
```

返回：

```
[1] pry(main)> load 'test.rb'
mymethod returned: foo
mymethod is now: bar
=> true 
```

但我觉得这应该有效，但没有。唯一改变的是 @ 已从分配给 mymethod 中删除，所以我认为它应该使用由 attr_accessor 创建的 mymethod= 方法：

```
class Test

  class << self
    attr_accessor :mymethod
  end

  def self.call(&block)
    mymethod="foo"
    class_eval &block
  end

end

Test.call do
  puts "mymethod returned: #{mymethod}"
  mymethod = "bar"
  puts "mymethod is now: #{mymethod}"
end 
```

但是，调用内部对 mymethod 的分配失败，而块内的相同分配成功：

```
[1] pry(main)> load 'test.rb'
mymethod returned: 
mymethod is now: bar
=> true 
```

这里发生了什么？有人可以向我解释为什么在调用方法中分配会失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:16:34.350

在您的情况下，`mymethod="foo"`将定义`mymethod`局部变量
而不是调用`mymethod=`方法。

`self.mymethod="foo"`改为使用

# javascript - 在 D3.js 中迭代 geojson 并在满足条件时返回值

> ID：13655903
> 
> 赞同：3
> 
> 时间：2012-12-01T02:55:52.490
> 
> 标签：javascript, d3.js, geojson

在 D3.js 中，我试图遍历一个 geojson 文件来查找特定属性的值。例如，我想遍历整个 geojson 文件，如果键的值`state`等于`KS`，则返回该数据。

我对 D3 还很陌生，我还没有找到任何可以让我这样做的东西。我的方法可能存在缺陷，因此非常感谢任何建议。

```
{
   "type": "FeatureCollection",
   "features": [{
       "type": "Feature",
       "id": "KDDC",
       "state": "KS",
       "properties": {
          "name": "Dodge City Regional Airport",
          "address": "100 Airport Road, Dodge City, KS, United States"
       },
       "geometry": {
          "type": "Point",
          "coordinates": [
             -99.965556000000007,
             37.763333000000003
          ]
       }
   }, 
```

-- 开始代码 --

```
d3.json("airports.json", function(collection) {

   var bounds = d3.geo.bounds(collection),
       path   = d3.geo.path().projection(project);

   path.pointRadius(5);

   var locations = g.selectAll("path")
      .data(collection.features, function(d) {
         if(d.state == "KS"){
            console.log(d.state);
            return d.state;
         }
      })
      .enter()
      .append("path")
      .attr("opacity", 100); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:20:48.300

您要做的是[array.filter](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)，然后将其传递给 data() 方法。

例如（您的代码非常接近！）

```
var locations = g.selectAll("path")
  .data(collection.features.filter(function(d) {
     return d.state == "KS";
  })
  .enter()
  ... 
```

[查看关于Arrays](https://github.com/mbostock/d3/wiki/Arrays)的 d3 API 文档——它很好地突出了 d3.js 数组功能和常用的内置 javascript 数组功能。

# c# - 在 C# windows 窗体中更改动态创建的工具提示字体的简单方法？

> ID：13655905
> 
> 赞同：3
> 
> 时间：2012-12-01T02:56:38.027
> 
> 标签：c#, winforms, tooltip

有人对如何更改动态创建的字体有任何想法`ToolTip`吗？我通常做的`Label`是

```
string arialUnicodeFontFace = "Arial Unicode MS";
            Font unicodeFont = new Font(arialUnicodeFontFace, 8);
            if (unicodeFont.Name != arialUnicodeFontFace)
                unicodeFont = new Font("NSimSun", 8);

Label lbl = new Label();
lbl.Font = unicodeFont;
    for (int x = 0; x < dt.Rows.Count; x++)
            {
TextBox txt = new TextBox();
                txt.Name = dt.Rows[x]["field_name"].ToString();
                txt.Width = 200;
                txt.Height = 10;
                ToolTip tooltip = new ToolTip();
foreach (DataRow row in dtchnge.Rows)
            {

                if (dt.Rows[x]["definition"].ToString() == row["term"].ToString())
                {
                    tooltip.SetToolTip(txt, row["language_based_term"].ToString());
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:41:22.613

基本`ToolTip`由操作系统绘制，如果要自定义它，则需要将[OwnerDraw 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.ownerdraw%28v=vs.100%29.aspx)设置为 true 并像 MSDN 示例所示那样处理[Draw Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.draw%28v=vs.100%29.aspx)中的自定义字体。

从第一个链接：

> 通常，ToolTip 由操作系统绘制，但要自定义 ToolTip 的外观，您可以将 OwnerDraw 属性设置为 true 并处理 Draw 事件。
> 
> IsBalloon 属性优先于 OwnerDraw 属性。如果两者都设置为 true，则工具提示将使用气球窗口而不是所有者绘制的窗口显示。

# android - 使用私有样式（未找到与给定名称匹配的资源）

> ID：13655909
> 
> 赞同：4
> 
> 时间：2012-12-01T02:57:40.903
> 
> 标签：android, android-layout, android-resources, android-theme, android-styles

我想应用像`Graphical Layout`节目这样的风格`Theme.DeviceDefault.Dialog.Alert`。我知道现在是私人风格，我不能把它当父母。

我该怎么做才能让我的风格保持这种风格`DialogFragment`？

（我的目标是 API 15，也许我想要 minSdk API 12）。

这向我报告了一个错误（父母，就像我读到的，它现在是私人的）：

```
<style name="MyDialogStyle" parent="@android:style/Theme.DeviceDefault.Dialog.Alert"> 
```

> 未找到与给定名称匹配的资源。

我刚刚读到我必须“复制”样式项目，但我找不到它在哪里？

有人可以帮我吗？我需要将该样式“克隆”到我的自定义样式中。

提前致谢。

## **我尝试过的事情：**

**DialogFragment 的硬编码背景**

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(0));

    return super.onCreateView(inflater, container, savedInstanceState);
} 
```

**我的自定义风格**

```
<style name="MyDialogStyle">    
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:background">@android:color/transparent</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowContentOverlay">@null</item>
</style> 
```

**我访问了这些链接：**

[http://developer.android.com/reference/android/app/AlertDialog.html](http://developer.android.com/reference/android/app/AlertDialog.html) [http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

[http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=18659](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=18659)

[在最新的 android 3.2 sdk 更新后，找不到与给定名称匹配的资源 '@android:style/AlertDialog' 错误](https://stackoverflow.com/questions/6738502/no-resource-found-that-matches-the-given-name-androidstyle-alertdialog-error)

[http://daniel-codes.blogspot.com/2011/08/new-to-android-more-style-restrictions.html](http://daniel-codes.blogspot.com/2011/08/new-to-android-more-style-restrictions.html)

[https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/styles.xml](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/styles.xml)

[https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/res/res/values/themes.xml)

[https://android.googlesource.com/platform/frameworks/base/+/d11e6151fe88314505fa7adca6278de2e772b11c/core/res/res/values/themes_device_defaults.xml](https://android.googlesource.com/platform/frameworks/base/+/d11e6151fe88314505fa7adca6278de2e772b11c/core/res/res/values/themes_device_defaults.xml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:17:30.883

`Dialog`最后我用a解决了这个问题，`DialogFragment`因为最后一个不支持透明布局。很容易设置透明背景制作新的`activity`并设置样式`Manifest`。否则，我不得不使用活动而不是片段来更改对话框的结构。

我希望这可以节省一些人的研究时间。

再见！

# c++ - stl::list 对象的最大数量

> ID：13655910
> 
> 赞同：2
> 
> 时间：2012-12-01T02:57:53.700
> 
> 标签：c++, stl

问题是在数据集中找到周期性图形模式。所以我有 1000 个时间步，每个时间步都有一个图形（编码为整数）。因此，有 999 个可能的时期可以出现该图。我还定义了一个相位偏移，定义为（timestep mod period）。对于在第 5 个时间步中首次看到的第 2 个周期的图形，相位偏移为 1。

我正在尝试在 C++ 中创建一个二维列表数组。每个单元格包含一个列表，其中包含具有指定周期和相位偏移的图形。我一直在相应的列表中插入图表。

```
list<ListNode> A[timesteps][phase offsets] 
```

`ListNode`是一个有 4 个整数变量的类。

这给了我分段错误。使用 500 作为大小运行良好。这是因为内存不足还是其他问题？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T03:04:05.957

可能是由于堆栈大小有限。

您正在创建一个由 1000x1000 = 1000000 个对象组成的数组，几乎可以肯定每个对象至少有 4 个字节，因此至少大约 4 MB。假设它在函数内部，它将是`auto`存储类，通常转换为在堆栈上分配。典型的堆栈大小约为 1 到 4 兆字节。

尝试类似：（`std::vector<ListNode> A(1000*1000);`并且，如有必要，创建一个包装器以使其看起来是二维的）。

编辑：包装器会重载一个运算符，为您提供 2D 寻址：

```
template <class T>
class array_2D { 
    std::vector<T> data;
    size_t cols;
public:
    array_2D(size_t x, size_t y) : cols(x), data(x*y) {}

    T &operator()(size_t x, size_t y) { return data[y*cols+x]; }
}; 
```

您可能想要修饰它（例如，使用边界检查），但这是一般的想法。解决它将使用`()`，如：

```
array_2d<int> x(1000, 1000);

x(100, 3) = 2;

y = x(20, 20); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:06:08.267

在 32 位系统上的 libstdc++ 中，std::list 对象的[权重为 8 个字节](http://ideone.com/mSSkNP)（仅对象本身，不计算它可能进行的分配），即使在其他实现中，我认为它不会有太大不同；因此，您分配了大约 8 MB 的数据，这在普通计算机上*本身*并不多，但是，如果您将该声明放在一个函数中，它将是一个局部变量，因此分配在*堆栈*上，这是相当大小有限（最多几 MB）。

您应该在堆上分配那个东西，例如使用`new`，或者，甚至更好地使用`std::vector`.

顺便说一句，您需要一个 1000x1000 的数组似乎不正确，您`std::list`能具体说明您要实现的目标吗？可能有更适合您需求的数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T03:18:27.617

听起来你的堆栈空间用完了。尝试在堆上分配它，例如 through `std::vector`，然后换`try ... catch`行以查看内存不足错误而不是崩溃。

（编辑：不要使用`std::array`，因为它也在堆栈上分配。）

```
try {
   std::vector<std::list<ListNode> > a(1000000);   // create 1000*1000 lists
   // index a by e.g. [index1 * 1000 + index2]
   a[42 * 1000 + 18].size(); // size of that list

   // or if you really want double subscripting without a wrapper function:
   std::vector<std::vector<std::list<ListNode> > > a(1000);
   for (size_t i = 0; i < 1000; ++i) {   // do 1000 times:
       a[i].resize(1000);                // default-create and create 1000 in each
   }
   a[42][18].size(); // size of that list

} catch (std::exception const& e) {
    std::cerr << "Caught " << typeid(e).name() << ": " << e.what() << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T03:04:14.013

您正在声明一个二维数组`[1000]`x `[1000]`。`list<ListNode>`我不认为那是你的本意。

分段错误可能是由于尝试使用无效的列表元素造成的。

# c# - 使用 javascript 和 C# 发送邮件时出错

> ID：13655914
> 
> 赞同：3
> 
> 时间：2012-12-01T02:59:09.320
> 
> 标签：c#, .net, email

我正在使用以下代码发送邮件。我需要将输出作为“test123here”，但我只得到 test123。谁能帮我找出我犯错的地方？

```
MailMessage mail = new MailMessage();
string mailserver = "….";
if (mailserver != "")

System.Web.Mail.SmtpMail.SmtpServer = mailserver;
mail.From = "x@test.com";
mail.To = "y@test.com";
mail.Subject = "MailSubject";
mail.UrlContentBase = "http://localhost:1900";
mail.BodyFormat = MailFormat.Html;  
string mailcontent = "<html><body>  <div>  test123<script> document.write('here');</script> </div> </body></html>";

mail.Body = mailcontent; 
SmtpMail.Send(mail); 
```

# json - RestyGWT - JsonEncoderDecoder 是否与列表一起使用？

> ID：13655916
> 
> 赞同：2
> 
> 时间：2012-12-01T03:00:02.193
> 
> 标签：json, gwt, resty-gwt

我正在尝试使用 RestyGWT 的 JsonEncoderDecoder 来编码/解码 JSON 对象。从他们的文档中，我能够做到：

```
public interface PersonCodec extends JsonEncoderDecoder<PersonCodec>> {} 
```

并使用编码/解码功能。但是，当我这样做时：

```
public interface PersonListCodec extends JsonEncoderDecoder<List<PersonCodec>> {} 
```

它给了我编译错误：

```
java.lang.NullPointerException
at org.fusesource.restygwt.rebind.BaseSourceCreator.<init>(BaseSourceCreator.java:76)
at org.fusesource.restygwt.rebind.JsonEncoderDecoderClassCreator.<init>(JsonEncoderDecoderClassCreator.java:79)
at org.fusesource.restygwt.rebind.ExtendedJsonEncoderDecoderClassCreator.createComposerFactory(ExtendedJsonEncoderDecoderClassCreator.java:46)
at org.fusesource.restygwt.rebind.BaseSourceCreator.create(BaseSourceCreator.java:210)
at org.fusesource.restygwt.rebind.JsonEncoderDecoderGenerator.generate(JsonEncoderDecoderGenerator.java:38)
at com.google.gwt.core.ext.IncrementalGenerator.generateNonIncrementally(IncrementalGenerator.java:40)
at com.google.gwt.dev.javac.StandardGeneratorContext.runGeneratorIncrementally(StandardGeneratorContext.java:657)
at com.google.gwt.dev.cfg.RuleGenerateWith.realize(RuleGenerateWith.java:41)
at com.google.gwt.dev.shell.StandardRebindOracle$Rebinder.rebind(StandardRebindOracle.java:79)
at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:276)
at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:265)
at com.google.gwt.dev.DistillerRebindPermutationOracle.getAllPossibleRebindAnswers(DistillerRebindPermutationOracle.java:91)
at com.google.gwt.dev.jjs.impl.UnifyAst$UnifyVisitor.handleGwtCreate(UnifyAst.java:355)
at com.google.gwt.dev.jjs.impl.UnifyAst$UnifyVisitor.handleMagicMethodCall(UnifyAst.java:433)
at com.google.gwt.dev.jjs.impl.UnifyAst$UnifyVisitor.endVisit(UnifyAst.java:237)
at com.google.gwt.dev.jjs.ast.JMethodCall.traverse(JMethodCall.java:243)
at com.google.gwt.dev.jjs.ast.JModVisitor.traverse(JModVisitor.java:361)
... 
```

关于如何使这项工作的任何想法？或其他将 json 编码/解码为 java 对象的建议？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:12:47.777

我能够使用以下代码对我的列表进行编码：

```
JSONArray batch = new JSONArray();
int idx=0;
for (Pojo i : buffer) {
    batch.set(idx++, CODEC.encode(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T07:34:31.947

我将我的列表包装在一个对象中，因为我可以控制输出。

```
@XmlRootElement
public class WrapperResult {
    protected List<Person> result;
} 
```

然后我可以毫无问题地对列表进行编码和解码。

# android - 如何为这个 PictureDrawable 着色？

> ID：13655917
> 
> 赞同：6
> 
> 时间：2012-12-01T03:00:10.677
> 
> 标签：android, svg, svg-android

我用来从 SVG 原始资源`svgandroid`生成s 。`PictureDrawable`但是，我似乎无法在以这种方式创建的可绘制对象上应用颜色过滤器。

使用 PNG 的旧代码

```
icon = getResources().getDrawable(R.drawable.ic_braille);
icon.setColorFilter(0x88880000, Mode.MULTIPLY);
((ImageView)v.findViewById(R.id.icon)).setImageDrawable(icon); 
```

有效，但是

```
icon = SVGParser.getSVGFromResource(getResources(), R.raw.ic_braille).createPictureDrawable();
icon.setColorFilter(0x88880000, Mode.MULTIPLY);
((ImageView)v.findViewById(R.id.icon)).setImageDrawable(icon); 
```

才不是。我已经尝试在Drawable上应用颜色过滤器，在ImageView上（在将drawable设置为它之后），通过XML，甚至在将它设置为ImageView的drawable之后在Drawable上应用颜色过滤器，对于PNG来说都可以，但都不适用于图片绘图。正如某些人所建议的那样，替换`setImageDrawable`为`setBackgroundDrawable`根本不会呈现可绘制对象。我在 Android 1.6、2.3、4.0 上运行代码，没有区别。我已经检查了 SVG 库的来源，它在任何时候都不会触及颜色过滤器。我究竟做错了什么？某些类型的drawables不能着色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T07:53:30.933

使用这个 svg-android 的分支： [https ://github.com/japgolly/svg-android](https://github.com/japgolly/svg-android)

它支持颜色过滤器。

# javascript - 如何绑定 Mousedown 和 Touchstart，但不响应两者？安卓、jQuery

> ID：13655919
> 
> 赞同：52
> 
> 时间：2012-12-01T03:00:20.260
> 
> 标签：javascript, android, jquery

在一个也可以在移动设备上查看的网站上工作，并且需要在 touchstart 和 mousedown 上绑定一个操作。

看起来像这样

```
 $("#roll").bind("mousedown touchstart", function(event){

 someAction(); 
```

它在 Iphone 上运行良好，但在 Android 上它响应两次。

```
event.stopPropagation();
event.preventDefault(); 
```

添加此代码修复了 Android Chrome 的问题，但不适用于 Android 默认浏览器。还有其他可以解决所有android问题的技巧吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-07-03T16:02:05.610

```
element.on('touchstart mousedown', function(e) {
    e.preventDefault();
    someAction();
}); 
```

`preventDefault`[根据规范](https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault)取消事件

你得到*touchstart*，但一旦你取消它，你就不再得到*mousedown*。与接受的答案相反，`stopPropagation`除非您需要，否则您无需致电。即使取消，该事件也会正常传播。浏览器会忽略它，但你的钩子仍然可以工作。

Mozilla在这一点上[同意我](https://developer.mozilla.org/en-US/docs/Web/API/Touch_events#Additional_tips)的看法：

> 在 touchstart 或系列的第一个 touchmove 事件上调用 preventDefault() 可防止触发相应的鼠标事件

**编辑**：我刚刚再次阅读了这个问题，你说你已经这样做了，它没有修复 Android 默认浏览器。不确定接受的答案有何帮助，因为它基本上做同样的事情，只是以更复杂的方式和一个事件传播错误（touchstart 不传播，但 click 传播）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-07T19:17:04.370

我一直在使用这个功能：

```
//touch click helper
(function ($) {
    $.fn.tclick = function (onclick) {

        this.bind("touchstart", function (e) { 
            onclick.call(this, e); 
            e.stopPropagation(); 
            e.preventDefault(); 
        });

        this.bind("click", function (e) { 
           onclick.call(this, e);  //substitute mousedown event for exact same result as touchstart         
        });   

        return this;
    };
})(jQuery); 
```

更新：修改答案以同时支持鼠标和触摸事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T15:53:22.953

考虑到 gregers 对 win8 和 chrome/firefox 的评论，skyisred 的评论毕竟看起来并不那么愚蠢（：P @ 所有的仇恨者）虽然我宁愿使用黑名单而不是他建议的白名单，只排除 Android触摸绑定：

```
var ua = navigator.userAgent.toLowerCase(),
isAndroid = ua.indexOf("android") != -1,
supportsPointer = !!window.navigator.msPointerEnabled,
ev_pointer = function(e) { ... }, // function to handle IE10's pointer events
ev_touch = function(e) { ... }, // function to handle touch events
ev_mouse = function(e) { ... }; // function to handle mouse events

if (supportsPointer) { // IE10 / Pointer Events
    // reset binds
    $("yourSelectorHere").on('MSPointerDown MSPointerMove MSPointerUp', ev_pointer);
} else {
    $("yourSelectorHere").on('touchstart touchmove touchend', ev_touch); // touch events
    if(!isAndroid) { 
        // in androids native browser mouse events are sometimes triggered directly w/o a preceding touchevent (most likely a bug)
        // bug confirmed in android 4.0.3 and 4.1.2
        $("yourSelectorHere").on('mousedown mousemove mouseup mouseleave', ev_mouse); // mouse events
    }
} 
```

顺便说一句：我发现鼠标事件并不总是被触发（如果使用了 stopPropagation 和 preventDefault），特别是我只注意到在 touchend 事件之前有一个额外的 mousemove ......真的很奇怪的错误，但上面的代码为我修复了所有（测试了 OSX、Win、iOS 5+6、Android 2+4，每个都带有本机浏览器、Chrome、Firefox、IE、Safari 和 Opera，如果可用）平台。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-14T15:10:05.683

哇，这个问题和相关问题有这么多答案，但没有一个对我有用（Chrome、mobil responsive、mousedown + touchstart）。但是这个：

```
(e) => {
  if(typeof(window.ontouchstart) != 'undefined' && e.type == 'mousedown') return;

  // do anything...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-05T20:20:23.940

I recommend you try [jquery-fast-click](https://github.com/dave1010/jquery-fast-click). I tried the other approach on this question and [others](https://stackoverflow.com/questions/7018919/how-to-bind-touchstart-and-click-events-but-not-respond-to-both). Each fixed one issue, and introduced another. fast-click worked the first time on Android, ios, desktop, and desktop touch browsers (groan).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T21:46:39.873

修复了使用此代码

```
var mobile   = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent); 
var start = mobile ? "touchstart" : "mousedown";
$("#roll").bind(start, function(event){ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-06T09:23:02.873

编写此代码并添加 j 查询打孔触摸 js。它将使用触摸事件模拟鼠标事件

```
function touchHandler(event)
{
    var touches = event.changedTouches,
        first = touches[0],
        type = "";
         switch(event.type)
    {
        case "touchstart": type = "mousedown"; break;
        case "touchmove":  type="mousemove"; break;        
        case "touchend":   type="mouseup"; break;
        default: return;
    }

    var simulatedEvent = document.createEvent("MouseEvent");
    simulatedEvent.initMouseEvent(type, true, true, window, 1, 
                              first.screenX, first.screenY, 
                              first.clientX, first.clientY, false, 
                              false, false, false, 0/*left*/, null);
    first.target.dispatchEvent(simulatedEvent);
    event.preventDefault();
}

function init() 
{
    document.addEventListener("touchstart", touchHandler, true);
    document.addEventListener("touchmove", touchHandler, true);
    document.addEventListener("touchend", touchHandler, true);
    document.addEventListener("touchcancel", touchHandler, true);    
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-16T01:21:05.453

这是一个非常古老的问题，但我遇到了同样的问题并找到了另一个解决方案，它没有`stopPropagation()`，`preventDefault()`或者嗅探设备的类型。我在这个解决方案上工作，假设设备支持触摸和鼠标输入。

解释：当触摸开始时，事件的顺序是 1) `touchstart`2) `touchmove`3) `touchend`4) `mousemove`5) `mousedown`6) `mouseup`7) `click`。基于此，我们将标记从`touchstart`（链中第一个）到`click`（链中最后一个）的触摸交互。如果 a`mousedown`在此触摸交互之外注册，则可以安全地拾取它。

下面是 Dart 中的逻辑，在 js 中应该是非常可复制的。

```
var touchStarted = false;
document.onMouseDown.listen((evt) {
  if (!touchStarted) processInput(evt);
});
document.onClick.listen((evt) {
  touchStarted = false;
});
document.onTouchStart.listen((evt) {
  touchStarted = true;
  processInput(evt);
}); 
```

如您所见，我的听众被放置在`document`. 因此，重要的是我不要`stopPropagation()`或`preventDefault()`这些事件，这样它们才能冒泡到其他元素。这个解决方案帮助我挑选出一个交互来采取行动，希望它也能帮助你！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-14T20:49:51.413

这个原生解决方案最适合我：

1.  将事件添加`touchstart`到文档设置一个全局`touch = true`.
2.  在 mousedown/touchstart 处理程序中，当检测到触摸屏时阻止所有 mousedown 事件：`if (touch && e.type === 'mousedown') return;`

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-01-21T07:25:24.637

我认为最好的方法是：

```
var hasTouchStartEvent = 'ontouchstart' in document.createElement( 'div' );

document.addEventListener( hasTouchStartEvent ? 'touchstart' : 'mousedown', function( e ) {
    console.log( e.touches ? 'TouchEvent' : 'MouseEvent' );
}, false ); 
```

# javascript - 幻灯片内容/页面过渡

> ID：13655923
> 
> 赞同：9
> 
> 时间：2012-12-01T03:00:48.307
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试重新创建[他们在 gimmebar.com 上已经完成的东西](https://gimmebar.com/collection/4ecd439c2f0aaad734000022/front-end-styleguides)。

单击图像时，内容当前页面向左滑出并淡出。目标页面从右侧淡入并滑入。

我已经尝试了几件事，比如在一个宽度为 200% 的容器中创建两个 div，然后滚动内容以查看和使用 JqueryUI 并滑动 div。滚动失败，div 根本不移动，无论如何 srollLeft 始终为 0。幻灯片效果更好一些，但对我来说，它们似乎不是同时运行的。第二个 div 只是突然出现，而不是很好地滑入第一个后面。

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>slide demo</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
    <style>
    .container {
        width: 100%;
        float: left;
        height: 800px;
    }
    #one {
        background-color: red;
    }
    #two {
        background-color: #333;
        display: none;
    }
    </style>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</head>
<body>
    <div class="container" id="one"></div>
    <div class="container" id="two"></div>
<script>
$( document ).click(function() {
          $("#one").hide("slide", { direction: "left" }, 1000);
          $("#two").show("slide", { direction: "left" }, 1000);
});
</script>
</body>
</html> 
```

似乎它应该很容易实现，但我被卡住了。

小心。

编辑：我有点让它工作，正如你在[这个小提琴](http://jsfiddle.net/SdxnQ/)中看到的那样。幻灯片在那里，但我看不到褪色。也可能有更好的方法来实现这一点，但我很满意不必加载第三个库/插件只是为了滑动一个 div。

[http://webadvent.org/2012/css-sliding-panels-by-bedrich-rios](http://webadvent.org/2012/css-sliding-panels-by-bedrich-rios) 找到了他们的开发者写的教程。认为这将算作解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T17:09:28.483

纯 JavaScript 解决方案：在 CSS 中：

```
div.wrap {visibility: hidden; position: absolute; overflow: hidden; 
    top: 0; left: 0; width: 100%; height: 100%}
div.wrap div.newContent {visibility: visible; position: relative; left: 100%;} 
```

在 HTML 中：

```
<div class="initContent">
    This is the content that is initially displayed
</div>
<div class="wrap">
    <div class="newContent">
        Put the content you want to be revealed here
    </div>
</div> 
```

newContent div 最初是隐藏的，因为它的左边缘位于其父（包装）div 的右边缘，并且 CSS 告诉浏览器隐藏任何溢出父 div 的内容。

然后为了显示隐藏的内容，设置一个计时器，逐渐`style.left`将内部 div 从 100% 减少到 0%，并将不透明度从 0 增加到 1。我创建了一个[用于打开/关闭滑动菜单的类](http://pastebin.com/teFi3tXz)，可以稍微调整以执行此操作. （编辑：[较新的版本](http://jsfiddle.net/ts2tT/2/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T03:17:00.187

我建议你使用我不久前在一个网站上使用的这个 jQuery 脚本，它的工作原理就像一个魅力，它叫做[CODA SLIDER](http://kevinbatdorf.github.com/codaslider/)，它是由[Kevin Batdorf](https://twitter.com/#!/kevinbatdorf)制作的，安装它只有 5 行代码。

祝你好运

# java - OpenGL 中的立方体渲染怪癖

> ID：13655924
> 
> 赞同：0
> 
> 时间：2012-12-01T03:00:54.157
> 
> 标签：java, opengl, lwjgl

我正在尝试使立方体正确渲染，但立方体的顶部和底部拒绝正常工作。

代码在这里：

```
package com.blazingkin.threeDee.thisguy;

import static org.lwjgl.opengl.GL11.glBegin;
import static org.lwjgl.opengl.GL11.glClear;
import static org.lwjgl.opengl.GL11.glEnd;
import static org.lwjgl.util.glu.GLU.gluPerspective;

import java.util.Random;

import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;
import org.lwjgl.input.Mouse;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;

public class threeDMain {
    public static void main(String args[]){
        new threeDMain().start();
    }

    public void walkForward(float distance)
    {
        x -= distance * (float)Math.sin(Math.toRadians(pitch));
        z += distance * (float)Math.cos(Math.toRadians(pitch));
    }
    public void walkBackwards(float distance)
    {
        x += distance * (float)Math.sin(Math.toRadians(pitch));
        z -= distance * (float)Math.cos(Math.toRadians(pitch));
    }

    public void strafeLeft(float distance)
    {
        x -= distance * (float)Math.sin(Math.toRadians(pitch-90));
        z += distance * (float)Math.cos(Math.toRadians(pitch-90));
    }

    //strafes the camera right relitive to its current rotation (yaw)
    public void strafeRight(float distance)
    {
        x -= distance * (float)Math.sin(Math.toRadians(pitch+90));
        z += distance * (float)Math.cos(Math.toRadians(pitch+90));
    }

    public void lookThrough()
    {
        //roatate the pitch around the X axis
        GL11.glRotatef(yaw, 1.0f, 0.0f, 0.0f);
        //roatate the yaw around the Y axis
        GL11.glRotatef(pitch, 0.0f, 1.0f, 0.0f);
        //translate to the position vector's location
        GL11.glTranslatef(x, -y, z);
    }

    int screenX = 800;
    int screenY = 600;
    int displayType = 0;
    long timePassed = 0L;
    long lastTime;
    float x, y, z = 0;
    float pitch, yaw= 0;
    boolean mouseLocked = true;

    public void start(){
        try {
            DisplayMode d = new DisplayMode(screenX, screenY);
            Display.setDisplayMode(d);
            Display.setVSyncEnabled(true);
            if (displayType == 1){
                System.setProperty("org.lwjgl.opengl.Window.undecorated","true");
                Display.setFullscreen(true);
            }else{
                System.setProperty("org.lwjgl.opengl.Window.undecorated","false");
            }
            if (displayType == 2){
                Display.setFullscreen(true);
            }
            Display.create();
        } catch (LWJGLException e) {
            e.printStackTrace();
            System.exit(0);
        }
        lastTime = System.currentTimeMillis();

        // init OpenGL here
        GL11.glMatrixMode(GL11.GL_PROJECTION);
        GL11.glLoadIdentity();
        gluPerspective((float)90,(float)screenX/(float)screenY,0.001f,100);
        GL11.glMatrixMode(GL11.GL_MODELVIEW);
        Point[] points = new Point[100];
        Random r = new Random();
        for (int i = 0; i < points.length; i++){
            points[i] = new Point((r.nextFloat() - 0.5F) * 100,(r.nextFloat() - 0.5F) * 100, r.nextInt(200) - 200);
        }
        float speed = 0.2f;
        while (!Display.isCloseRequested()) {

            glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);   
            if (Keyboard.isKeyDown(Keyboard.KEY_D)){
                strafeRight(speed);
            }
            if (Keyboard.isKeyDown(Keyboard.KEY_A)){
                strafeLeft(speed);
            }
            if (Keyboard.isKeyDown(Keyboard.KEY_W)){
                walkForward(speed);
            }
            if (Keyboard.isKeyDown(Keyboard.KEY_S)){
                walkBackwards(speed);
            }
            if (Keyboard.isKeyDown(Keyboard.KEY_SPACE)){
                y+=speed;
            }
            if (Keyboard.isKeyDown(Keyboard.KEY_LSHIFT)){
                y-=speed;
            }
            while (Keyboard.next()){

                if (Keyboard.isKeyDown(Keyboard.KEY_ESCAPE)){
                    mouseLocked =! mouseLocked;
                }
            }
            if (Display.isActive()){
                if (mouseLocked){
                    Mouse.setCursorPosition(screenX/2, screenY/2);
                    yaw -= Mouse.getDY();
                    pitch += Mouse.getDX();
                }
            }
            yaw = yaw<-80?-80:yaw;
            yaw = yaw>80?80:yaw;
            pitch = pitch>360?pitch%360:pitch;
            pitch = pitch<-360?(pitch%360)*-1:pitch;

            GL11.glLoadIdentity();
            lookThrough();

            System.out.println(x+", "+y+", "+z);
                for (Point p: points){
                            GL11.glColor3f(1, 0, 1);
                            glBegin(GL11.GL_POLYGON);
                            //top face
                            GL11.glVertex3f(p.x, p.y+2, p.z);
                            GL11.glVertex3f(p.x, p.y+2, p.z+2);
                            GL11.glVertex3f(p.x+2, p.y+2, p.z+2);
                            GL11.glVertex3f(p.x+2, p.y+2, p.z);
                        glEnd();    
                            GL11.glColor3f(1,1,1);
                            glBegin(GL11.GL_POLYGON);
                            //bottom face

                                GL11.glVertex3f(p.x, p.y, p.z);
                                GL11.glVertex3f(p.x, p.y, p.z+2);
                                GL11.glVertex3f(p.x+2, p.y, p.z+2);
                                GL11.glVertex3f(p.x+2, p.y, p.z);
                            glEnd();

                    GL11.glColor3f(1, 0, 0);
                    glBegin(GL11.GL_POLYGON);
                        //back
                        GL11.glVertex3f(p.x, p.y, p.z);
                        GL11.glVertex3f(p.x+2, p.y, p.z);
                        GL11.glVertex3f(p.x+2, p.y+2, p.z);
                        GL11.glVertex3f(p.x, p.y+2, p.z);
                    glEnd();

                    GL11.glColor3f(0, 0, 1);
                    glBegin(GL11.GL_POLYGON);
                    //side 1 face (left)
                        GL11.glVertex3f(p.x, p.y, p.z);
                        GL11.glVertex3f(p.x, p.y, p.z+2);
                        GL11.glVertex3f(p.x, p.y+2, p.z+2);
                        GL11.glVertex3f(p.x, p.y+2, p.z);
                    glEnd();
                    GL11.glColor3f(1, 1, 0);
                    glBegin(GL11.GL_POLYGON);
                    //side 2 face (right)
                        GL11.glVertex3f(p.x+2, p.y, p.z);
                        GL11.glVertex3f(p.x+2, p.y, p.z+2);
                        GL11.glVertex3f(p.x+2, p.y+2, p.z+2);
                        GL11.glVertex3f(p.x+2, p.y+2, p.z);
                    glEnd();
                    GL11.glColor3f(0, 1, 1);
                    glBegin(GL11.GL_POLYGON);
                    //front
                        GL11.glVertex3f(p.x, p.y, p.z+2);
                        GL11.glVertex3f(p.x+2, p.y, p.z+2);
                        GL11.glVertex3f(p.x+2, p.y+2, p.z+2);
                        GL11.glVertex3f(p.x, p.y+2, p.z+2);
                    glEnd();

                }

            Display.update();
        }

        Display.destroy();
    }

    class Point{
        float x,y,z;
        public Point(float x, float y, float z){
            this.x = x;
            this.y = y;
            this.z = z;
        }

    }

} 
```

基本上，它正在渲染立方体的底部，顶部应该是，但只有当你在它下面并且当你在它里面时，它才会正确渲染

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T21:23:38.230

这可能是深度测试的问题。您不能在任何地方启用深度复查！试试这个：

```
GL11.glEnable(GL11.GL_DEPTH_TEST); 
```

这对我有用。没有那个，事情看起来真的很奇怪，如果这有帮助，请告诉我！

# php - How to write a query to find records which do not belong the field selected?

> ID：13655929
> 
> 赞同：0
> 
> 时间：2012-12-01T03:01:55.677
> 
> 标签：php, mysql, sql, mysqli

I have two database tables below:

Course_Module Table:

```
CourseId  ModuleId
1         1
1         2
1         3 
```

Module Table:

```
ModuleId ModuleNo   ModuleName                            Credits
1        CHI2513    Systems Strategy                      20
2        CHI2550    Modern Database Applications          20
3        CHI2565    Ecommerce - Business and Technology   20
4        CHT2220    Interactive Systems                   20
5        CHT2520    Advanced Web Programming              20
6        CHI2554    Patent Law                            40 
```

Now I do not know how to do this but what I want to do is create query where it will outputs a set of records which shows a list of modules which is not in the course selected.

So for example if the `CourseId = 1`, then the modules it should output from the query are these below:

```
4        CHT2220    Interactive Systems                   20
5        CHT2520    Advanced Web Programming              20
6        CHI2554    Patent Law                            40 
```

This is because as you can see in the Course_Module table, these modules do not belong to the select CourseId `1`.

But how can a query like this be written? Below is just a simple query I have created:

```
SELECT cm.CourseId, m.ModuleId, m.ModuleNo, m.ModuleName, m.Credits
FROM Course_Module cm
INNER JOIN Module m ON cm.ModuleId = m.ModuleId
WHERE
(CourseId = 1)
ORDER BY ModuleNo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:09:18.870

How about the following ?

```
SELECT
    m.*
FROM
    Module m
WHERE
    m.ModuleId NOT IN (
                       SELECT cm.ModuleId
                           FROM Course_Module cm
                       WHERE cm.CourseId = 1
                      ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:12:23.913

I think this may work:

```
SELECT
   Module.*
FROM
   Module
WHERE
   ModuleId NOT IN ( SELECT ModuleId FROM CourseId WHERE CourseId = 1) 
```

# javascript - 在函数中分配全局变量

> ID：13655930
> 
> 赞同：3
> 
> 时间：2012-12-01T03:01:58.577
> 
> 标签：javascript, jquery, javascript-events

我想在一个函数中分配全局变量值并在另一个函数中使用该变量。但是由于某种原因，第二个函数中的变量是空白的。

**我的想法**

函数 2 在函数 1 之前首先执行（如果是这种情况，我如何命令 jquery 开始执行特定的语句/函数？）

或者

未设置函数 1 中的 myvar 全局变量（如果是这种情况，有什么替代方法可以实现？）

```
var my_var;
//function 1
$(".div1").onhover(function(){
my_var="hello"
});

//function 2
$(".div1").onhover(function(){
 //i want to make use of my_var here, but it is blank
});

 //I want to use my_var it somewhere here too, but it doesnt work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:17:29.383

正确的功能是`.hover`（[更多here](http://api.jquery.com/hover/)）；`.onhover`是不正确的。下面的代码按照您要求的方式工作（[现场示例](http://jsfiddle.net/EKdtj/2/)）。

HTML

```
<div id="TestID" class="div1">This is a test.</div>​ 
```

JavaScript

```
var my_var;
//function 1
$(".div1").hover(function(){
    my_var=$(this).attr('id'); 
});

//function 2
$(".div1").hover(function(){
    alert(my_var);
});​ 
```

以下是有关 JavaScript 中全局变量的一些额外有用链接：

*   [如何在 JavaScript 中声明一个全局变量？](https://stackoverflow.com/questions/3352020/jquery-the-best-way-to-set-a-global-variable)
*   [如何在 jQuery 中存储全局值（不一定是全局变量）？](https://stackoverflow.com/questions/2866866/jquery-global-variable-best-practice-options)
*   [Javascript 中的全局变量](http://www.svennerberg.com/2009/02/global-variables-in-javascript/)

# knockout.js - 用淘汰赛创建jsfiddle的麻烦

> ID：13655931
> 
> 赞同：0
> 
> 时间：2012-12-01T03:02:17.907
> 
> 标签：knockout.js, jsfiddle

我正在尝试使用淘汰赛创建一个 jsfiddle，但我不断收到错误消息，说 ko 未定义。我包含了一个链接到淘汰赛，有点不知何故 jsfiddle 没有正确捡起它。我究竟做错了什么？

[坏了的小提琴](http://jsfiddle.net/russellgove/k7LHu/2/)

```
var viewModel = {
self: this,
BudgetLine: ko.observableArray([
    {
    Id: 1,
    Title: "Budget #1",
    Account: ko.observableArray([
        {
        Id: 1,
        Value: ko.computed(function(item) {
            return self.Accounts[this.Id];

        })},
    {
        Id: 2,
        Value: ko.computed(function(item) {
            return self.Accounts[this.Id];

        })}

    ])},
{
    Id: 2,
    Title: "Budget #2",
    Account: ko.observableArray([
        {
        Id: 1},
    {
        Id: 2}

              ])}]),

Accounts: ko.observableArray([
    {
    Id: 1,
    Title: "Account #1"},
{
    Id: 2,
    Title: "Account #2"},
{
    Id: 3,
    Title: "Account #3"},
{
    Id: 2,
    Title: "Account #1"}

     ]) 
```

};

ko.applyBindings(viewModel);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:51:58.110

您正确调用了 ko 库，但您的视图模型错误

我将您的示例分叉并对其进行了精简，以向您展示正确调用 KO 库的简化示例[http://jsfiddle.net/rYJGB/](http://jsfiddle.net/rYJGB/)

```
<table>
  <tbody data-bind="template: {name: 'budgets', foreach: BudgetLine}"></tbody>
</table>
<script id='budgets' type="text/html">
     <tr>
         <td><input type="text" data-bind="value:Title"></td>
     </tr>
</script>

var viewModel = {
    self: this,
    BudgetLine: ko.observableArray([
        { Id: 1,Title: "Budget #1"        },
         Id: 2,Title: "Budget #2"        }
        ])
};
ko.applyBindings(viewModel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T04:56:26.553

代码中存在许多 javascript 错误。

我已经分叉了 jsFiddle。由于视图中存在其他元素，而视图模型中不存在这些元素，因此会出现相同的错误。我故意这样离开它，这样你就可以从你停止的地方继续。关于如何实现它的基本思想是存在的。

jsFiddle 存在[http://jsfiddle.net/rupesh_kokal/k7LHu/3/](http://jsfiddle.net/rupesh_kokal/k7LHu/3/)

下面是视图（或 html）：

```
 <table>

                <tbody data-bind="template: {name: 'budgets', foreach: BudgetLine}">
                </tbody>
            </table>
            <script id='budgets' type="text/html">
                <tr>
                    <td>
                        <input type="text" data-bind="value:Title"></input>
                    </td>
                    <td>
                        <input type="text" data-bind="value:Amount"></input>
                    </td>

                    <td>
                        <span data-bind="text:Modified" />
                    </td>
                    <td>
                       <select data-bind="options:$root.Account,optionsCaption:'select Account', optionsText:'Title', OptionsValue:'Id', selectedOptions:Account().Id",size="5", multiple="true"></select>                        

                    </td>
                    <td>
                        <span data-bind="text:CostCenterId"></span>
                    </td>
                    <td>
                        <select data-bind="options:$root.Costcenter,optionsCaption:'cost center', optionsText:'Title', optionsValue:'Id', value:CostCenterId "></select>                         
                      </td>
                    <td>
                        <span data-bind="text:CostCenter().Company().Title"></span>
                    </td>

                    <td>
                        <input type="button" data-bind="click: $root.deleteItem" value="Delete" />
                        <input type="button" data-bind="click: $root.saveItem" value="save" />
                    </td>

                </tr>
            </script> 
```

​ 下面是视图模型：

```
function ModViewModel() {
    var self = this;
    self.Accounts = ko.observableArray([
        {
        Id: 1,
        Title: "Account #1"},
    {
        Id: 2,
        Title: "Account #2"},
    {
        Id: 3,
        Title: "Account #3"},
    {
        Id: 2,
        Title: "Account #1"}

         ]);
    self.BudgetLine = ko.observableArray([]);

    self.BudgetLine.push(new BudgetLineItem(1, "Budget #1", [1, 2], self));
    self.BudgetLine.push(new BudgetLineItem(2, "Budget #2", [1, 2], self));

}

function BudgetLineItem(id, title, accountIds, parentModel) {
    var self = this;
    self.Id = id;
    self.Title = title;
    self.Account = ko.observableArray([]);

    if (accountIds.length > 0) {
        for (var i = 0, len = accountIds.length; i < len; i++) {
            self.Account.push(new AccountLineItem(accountIds[i], parentModel));
        }
    }
    else {
        self.Account.push(new AccountLineItem(accountIds, parentModel));
    }
}

function AccountLineItem(id, rootModel) {
    var self = this;
    self.Id = id;
    self.Value = ko.computed(function() {
        return rootModel.Accounts()[self.Id];
    });

}

ko.applyBindings(new ModViewModel());​ 
```

# java - 仅允许特定 FB 用户访问应用程序

> ID：13655932
> 
> 赞同：-1
> 
> 时间：2012-12-01T03:02:22.157
> 
> 标签：java, android, facebook, facebook-graph-api, sdk

最终，我想要一个可以访问我的应用程序管理部分的用户 ID 白名单。我希望使用 Facebook 身份验证和相关的用户配置文件 ID 来处理这个问题。

目前，我有：

```
if (session == Session.getActiveSession()) {
   if (user != null) {
       // Set the id for the ProfilePictureView
       // view that in turn displays the profile picture
       profilePictureView. setProfileId(user.getId());

       // Set the Textview's text to the user's name
       userNameView.setText(user.getName());

       // Set the Textview's text from user's id
       userId.setText(user.getId());

       String approved = "553660552";

       if(user.getId() != approved){
          //553660552
          userId.setText(user.getId());
        } else {
          userId.setText("Goodie");
        }

   }   
} 
```

Where`user.getId()`返回 553660552，但比较失败。（当批准是不同的值时，它也会失败）。

总而言之，`user.getId()`返回 553660552（在这种情况下）。我需要能够对白名单进行匹配比较。是的，任何`String`等于“553660552”的集合都不匹配

感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:07:41.770

使用字符串的 .equals() 方法进行比较，即

```
if (approved.equals(user.getId())) 
```

# java - JRuby 到 jar 可执行文件

> ID：13655933
> 
> 赞同：1
> 
> 时间：2012-12-01T03:02:41.610
> 
> 标签：java, ruby, jruby

我一直在学习 Ruby，如果我理解正确，我可以获取我的 Ruby 脚本，并使用 JRuby 创建 Java 类文件，本质上允许我的 Ruby 脚本在 JVM 中运行。我已经成功地从我的 Ruby 脚本创建了一个 .class 文件。

我想知道，是否可以将这个类文件变成可执行文件？我应该使用 Warble 或 Rawr 来执行此操作吗？我安装了 Warble GEM，但我不知道如何使用它，我不确定它是否是我需要的……最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T03:06:05.757

在命令行中输入：

```
cd C:/Users/Someone/Path/To/Class/
jar cvfm executable.jar manifest.mf Foo.class 
```

`manifest.mf`类似的东西在哪里

> 主类：Foo

将 C:/Users/Someone/Path/To/Class/ 更改为您的文件的路径并更改`Foo`为您的类的名称。这将创建一个名为“executable.jar”的 jar 文件。

# javascript - 我的 Rails 应用程序崩溃了，因为它正在加载每个 JavaScript 文件，包括与正在加载的页面无关的文件

> ID：13655934
> 
> 赞同：1
> 
> 时间：2012-12-01T03:02:52.243
> 
> 标签：javascript, ruby-on-rails, asset-pipeline

我正在深入研究 Ruby on Rails，并且正在构建一个使用 Rails 3.2.8 的应用程序。我仍在学习使用资产管道，但我已经遇到了问题。我的 Javascript 文件由网站中的不同页面组织和命名（即 home.html -> home.js、parts.html -> parts.js），但我的 Rails 应用程序正在加载我的所有 Javascript 文件和我的一个Javascript文件正在崩溃，因为它引用了加载的页面（home.html）上不存在的元素......

```
"uncaught exception: jsobj.edit can't find div #parts_list" 
```

根据在线文档，我在清单中包含了我的应用程序所需的所有 JS 文件......

```
//= require modernizr-latest
//= require jquery
//= require jquery_ujs
//= require home
//= require parts
//= require_tree . 
```

...所以当我加载主页时，parts.js 文件被加载并执行并崩溃，因为主页上不存在parts_list div。

我的问题是...

1.  我应该尝试在 Javascript 级别解决这个问题吗？如果是这样，怎么做？
2.  或者我应该尝试在 Rails 级别修复它，并且只包含应该在任何给定时间运行的 Javascript 文件。同样，如果是这样，我该如何处理？
3.  这似乎是一个相当普遍的问题。我没有正确使用 Rails 吗？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:52:04.750

要将特定 javascript 文件仅包含到特定视图页面中，您需要执行以下过程。

i）在资产文件夹中创建一个单独的文件夹，**例如。'separate_view'**，里面放你的特定 js 和 css 文件。

ii) 在应用程序布局中为“separate_view”编写如下内容。
  **<%= 产量 :separate_view %>**

iii) 在您的目标模板中为“separate_view”写下以下内容。
**  <% content_for (:separate_view) do %>
    <%= javascript_include_tag "xxx.js" %>
    <%= stylesheet_link_tag "xxx.css" %>
  <%end%>**

以上内容适用于您的特定视图文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:16:07.733

要回答您的问题：

1.  您可以这样做，但这不是绝对必要的，您可以按视图加载资产，以便仅在需要时加载它们。关键是了解您已经获得的清单文件，以及何时加载。
2.  是的，这样做。[RailsCasts 第 279 集](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)解释了资产的加载。它还涉及如何将您的资产分离出来，以便仅在您需要它们时加载。简短的版本是清单文件加载到您`layout`的 .
3.  您正确地使用了 Rails，但是学习 AssetPipeline 对很多人来说是一个常见的，有时是陡峭的学习曲线。Railscast 的那一集，以及大量的练习，是我最好的推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T03:17:21.090

1.  是的。您应该通过在脚本加载时不依赖 DOM 元素来解决这个问题。通常，脚本在页面顶部声明，因此它们在浏览器呈现任何 DOM 元素之前加载。如果您在脚本执行时依赖 DOM 存在，那么您肯定会遇到问题。相反，您应该通过将相关功能包装到方法/函数中并在[$(document).ready](http://api.jquery.com/ready/)上执行此函数或绑定[live()](http://encosia.com/dont-let-jquerys-document-ready-slow-you-down/)事件来解决此问题

2.  是的。您可以通过构建多个[清单文件](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)来解决这个问题（而不是默认包含一个巨大的 application.js）

3.  这个问题通常通过（1）和（2）的组合来解决

# javascript - 如何检测回访者并重定向到特定 URL？

> ID：13655941
> 
> 赞同：-4
> 
> 时间：2012-12-01T03:03:56.990
> 
> 标签：javascript, cookies, session-cookies, detection

我正在开发一个新网站，该网站需要能够检测用户之前是否访问过该网站，然后将他们定向到特定的 URL（即 example.com/welcomeback.html）（如果有的话）。

我认为这需要使用 cookie 和 javascript 来完成，但我在任何地方都找不到任何教程。

非常感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T03:17:11.807

```
function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
} 
```

获取 cookie

```
function getCookie(c_name)
{
   var i,x,y,ARRcookies=document.cookie.split(";");
   for (i=0;i<ARRcookies.length;i++)
    {
       x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
          y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
          x=x.replace(/^\s+|\s+$/g,"");
          if (x==c_name)
          {
              return unescape(y);
          }
    }
 }

if(getCookie('visited'))
{
 location.href="redirecturl";
}else
{
setCookie('visited',1,365);
} 
```

[饼干教程](http://www.w3schools.com/js/js_cookies.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T03:10:43.930

检查cookie是否存在并做任何你想做的事情（即重定向），如果没有找到-设置cookie过期，所以它不是会话cookie并继续。

旁注：以用户友好的方式获得“返回用户的魔术重定向”很难，请考虑内联欢迎消息。

另一种方法：如果您可以通过其他方式（即某种形式的 OAuth 或 Windows 身份验证）对用户进行身份验证，那么您可以通过将信息保存到服务器端数据库而不依赖于 cookie 来检查用户是否已知。

# jquery - Coffeescript 和 jQuery 没有通过点击事件返回正确的 this

> ID：13655943
> 
> 赞同：2
> 
> 时间：2012-12-01T03:04:06.787
> 
> 标签：jquery, coffeescript

我正在尝试编写一些咖啡脚本，以将我点击的链接返回给我，但我遇到了麻烦。

问题是我要返回的元素是启动这个链的选择器，但这不是我要找的。

```
$(document).ready ->
  $("#js-exercises-links").bind "cocoon:after-insert", (e, inserted_item) ->
    $("#js-exercise-links a.add_fields").data("association-insertion-node", '#js-outline-fields')
    $("select").chosen()

    $(".js-show-set-duration").click (e)=>
      e.preventDefault()
      console.info this 
```

在此示例中，当我查看控制台时，`<div id='js-exercises-links'>`我真正想要的是我单击的当前元素，这将是`<div class='js-show-set-duration'>`

我究竟做错了什么？如何让 $(this) 引用单击的元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T03:20:12.337

我相信你想要的是瘦箭头而不是胖箭头，但我很难在没有 html 的情况下测试它。

```
$(document).ready ->
  $("#js-exercises-links").bind "cocoon:after-insert", (e, inserted_item) ->
    $("#js-exercise-links a.add_fields").data("association-insertion-node", '#js-outline-fields')
    $("select").chosen()

    $(".js-show-set-duration").click (e)->
      e.preventDefault()
      console.info this 
```

# android - 方向改变后的回调变为空

> ID：13655944
> 
> 赞同：6
> 
> 时间：2012-12-01T03:04:11.580
> 
> 标签：android, android-fragments, android-orientation

我有`FragmentActivity`两个标签，它们是`ListFragment`s。每个`ListFragment`都有一个回调。

回调示例

*回调在onAttach(...)*方法内部关联

```
OnStatusUpdateListener mStatusUpdateCallback;

public interface OnStatusUpdateListener {
    public void onStatusUpdate();
}

@Override
public void onAttach(Activity activity) {
    Log.d(TAG, "onAttach");
    super.onAttach(activity);

    try {
        mStatusUpdateCallback = (OnStatusUpdateListener)activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString() + " must implement OnStatusUpdateListener");
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    Log.d(TAG, "onCreate");
    super.onCreate(savedInstanceState);

    setRetainInstance(true);
} 
```

后来，我`FragmentActivity`通过这个正常工作的回调与通信。

在 中`ListFragment`，我有一个`ImageButton`将调用 a 的`DialogFragment`，它也有一个回调。此回调在 my 中实现，`ListFragment`并且触发了*null的回调*

```
public void onStatusOption() {
    Log.d(TAG, "onStatusOption");

    // Update stuff

    // Here is where mStatusUpdateCallback is null after rotate
    mStatusUpdateCallback.onStatusUpdate();
} 
```

问题是，如果我在应用程序运行时旋转手机，**mStatusUpdateCallback**会变​​为*null*。这当然意味着我无法执行回调。有谁知道如何解决这一问题？

**我试过的**

根据[https://stackoverflow.com/a/6029070/935779](https://stackoverflow.com/a/6029070/935779)看来，`OnStatusUpdateListener`可能已经创建了一个新的引用，所以我不能引用旧的，但没有提供解决方案。

我也尝试过按照[https://stackoverflow.com/a/6787393/935779](https://stackoverflow.com/a/6787393/935779)保留状态，但据我所知，我无法保存对回调的引用。

我也真的宁愿不这样做，`android:configChanges="orientation|keyboardHidden"`因为这看起来像是一种黑客行为，而且我的布局在横向上发生了变化。

**堆栈跟踪**

```
FATAL EXCEPTION: main
java.lang.NullPointerException
    at com.blug.blah.Fragment.StatusFragment.onStatusOption(StatusFragment.java:197)
    at com.blug.blah.MyActivity.onStatusOption(MyActivity.java:243)
    at com.blug.blah.Dialog.StatusOptionDialog$1$1.onClick(StatusOptionDialog.java:108)
    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:59:29.920

当存在的配置`Activity`被破坏并重新创建时。

当`Configuration`电话被改变时`onConfigurationChange`调用的方法。

所以你可以初始化你`Callbacks`的`onConfigurationChange`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-25T10:19:33.967

首先，您可以将此代码放入清单标记并强制活动以保存您的回调`android:configChanges="orientation|screenSize"` ，其次您可以使用 onConfigurationChange 方法来初始化您的回调

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T03:35:15.747

默认情况下，当您的应用程序更改方向时，整个活动将被销毁和创建。因此（并且没有发布更多代码），可以假设您的引用在活动被破坏时变为空，并且需要在重新创建活动时重置。

或者，您可以在清单中指定您的活动处理方向更改，然后在方向更改时不会销毁活动。

# android - 启动时立即崩溃 - Android

> ID：13655946
> 
> 赞同：0
> 
> 时间：2012-12-01T03:04:21.113
> 
> 标签：android, crash, runtimeexception

我的应用程序在启动后立即崩溃。我不知道为什么。我在另一个线程中解决了这个应用程序的其他问题，但是，我现在遇到的问题完全不同。我知道我的代码/结构不是最优雅的，但在 Android 和 XML 方面我仍然是新手。

这是日志错误堆栈跟踪：

```
11-30 15:42:46.970: W/dalvikvm(10028): threadid=1: thread exiting with uncaught exception (group=0x40d04210)
11-30 15:42:46.970: E/AndroidRuntime(10028): FATAL EXCEPTION: main
11-30 15:42:46.970: E/AndroidRuntime(10028): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.defsoftsol.db.check/com.defsoftsol.db.check.MainActivity}: java.lang.NullPointerException
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.os.Looper.loop(Looper.java:137)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.main(ActivityThread.java:4428)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at java.lang.reflect.Method.invokeNative(Native Method)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at java.lang.reflect.Method.invoke(Method.java:511)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at dalvik.system.NativeStart.main(Native Method)
11-30 15:42:46.970: E/AndroidRuntime(10028): Caused by: java.lang.NullPointerException
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.Activity.findViewById(Activity.java:1794)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at com.defsoftsol.db.check.MainActivity.<init>(MainActivity.java:43)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at java.lang.Class.newInstanceImpl(Native Method)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at java.lang.Class.newInstance(Class.java:1319)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
11-30 15:42:46.970: E/AndroidRuntime(10028):    ... 11 more 
```

这是我的完整代码：

```
public class MainActivity extends Activity {

String deviceID="",dateStamp="",buff="",db_id="",db_device_id="",db_install_date="";       
byte[] data;    
HttpPost httppost;    
StringBuffer buffer;    
HttpResponse response;    
HttpClient httpclient;    
InputStream inputStream;    
List<NameValuePair> nameValuePairs;
int ID,activeinstalls;
long diff;
TableLayout tl=(TableLayout)findViewById(R.id.db_data);

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button refresh = (Button)findViewById(R.id.btnrefresh);
    refresh.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            new MyAsyncTask(MainActivity.this).execute();

        }
    });
}

@SuppressWarnings("unused") 
public class MyAsyncTask extends AsyncTask<Void, Void, Void> 
{ 

    ProgressDialog mProgressDialog;
    private Context context;

    public MyAsyncTask(Context context) { 
        this.context = context;
    }

    @Override
    protected void onPostExecute(Void result) {
        mProgressDialog.dismiss();
    } 

    @Override 
    protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(MainActivity.this, "Loading...", "Data is Loading..."); 
    } 

    @Override
    protected Void doInBackground(Void... params) {
        update(); 
        return null; 
    }
}

private final SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd"); 
private final long ONE_DAY = 24 * 60 * 60 * 1000;

@SuppressWarnings("unused")
public void update()
{
    int activeinstalls = 0;
    Date now = new Date();
    dateStamp = formatter.format(now);

    runOnUiThread(new Runnable(){ 
        @Override 
        public void run(){ 
            UISetup();
        }
    });

    ID = 1;
    try
    {
        do
        {
            try 
            {                    
                httpclient = new DefaultHttpClient();                    
                httppost = new HttpPost("http://#.#.#.#/***.php"); //Address hidden for server security.                    

                nameValuePairs = new ArrayList<NameValuePair>(1);                   
                nameValuePairs.add(new BasicNameValuePair("_id", String.valueOf(ID)));                    
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                response = httpclient.execute(httppost);                    
                inputStream = response.getEntity().getContent();                     
                data = new byte[256];                     
                buffer = new StringBuffer();                    
                int len = 0;                    
                while (-1 != (len = inputStream.read(data)) )                    
                {                        
                    buffer.append(new String(data, 0, len));                    
                }
                inputStream.close();
            } catch (Exception e) {                    
                Toast.makeText(MainActivity.this, "error"+e.toString(), Toast.LENGTH_LONG).show();                
                e.printStackTrace();
            }

            if(buffer.charAt(0)=='Y')
            {
                ID++;
                buff = buffer.toString();
                db_id = buff.substring(1, buff.indexOf("."));
                db_device_id = buff.substring(buff.indexOf(".")+1, buff.indexOf(","));
                db_install_date = buff.substring(buff.indexOf(",")+1, buff.length());

                Date before = null;
                try {
                    before = (Date)formatter.parse(db_install_date);
                } catch (ParseException e) {
                    e.printStackTrace();
                }
                diff = now.getTime() - before.getTime(); 

                runOnUiThread(new Runnable(){ 
                    @Override 
                    public void run(){ 
                        UIAdd(diff,db_id,db_device_id,db_install_date);
                    }
                });

            } else { //IF buffer returns N
                //  TODO: Fill in
            }
        } while(buffer.charAt(0)=='Y');

        UIFinish();

    } catch(Exception err) {
        err.printStackTrace();
    }
}
@SuppressWarnings("deprecation")
public void UISetup()
{
    tl.removeAllViews();
    dbline();
    TableRow titr = new TableRow(this); 
    titr.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
    TextView dbid0 = new TextView(this); 
    TextView dbdevid0 = new TextView(this);
    TextView dbindate0 = new TextView(this);
    dbid0.setText("|   " + "_id");
    dbdevid0.setText("|   " + "device_id");
    dbindate0.setText("|   "+ "install_date"+"    |");

    titr.addView(dbid0); 
    titr.addView(dbdevid0);
    titr.addView(dbindate0);
    tl.addView(titr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    dbline();
}
@SuppressWarnings("deprecation")
public void UIAdd(long diffr, String dbidn,String did,String idate)
{
    long days;
    days = diffr / ONE_DAY;
    TableRow tr = new TableRow(this); 
    tr.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
    TextView dbid = new TextView(this); 
    TextView dbdevid = new TextView(this);
    TextView dbindate = new TextView(this);
    dbid.setText("|   " + dbidn);
    dbdevid.setText("|   " + did);
    dbindate.setText("|   " + idate+"   |");

    if(days <= 7)
    {
        activeinstalls++;
        if(days <= 3) 
        {
            dbid.setTextColor(Color.GREEN); 
            dbdevid.setTextColor(Color.GREEN);
            dbindate.setTextColor(Color.GREEN);
        } else {
            dbid.setTextColor(Color.MAGENTA);
            dbdevid.setTextColor(Color.MAGENTA);
            dbindate.setTextColor(Color.MAGENTA);
        }

    } else {
        dbid.setTextColor(Color.RED); 
        dbdevid.setTextColor(Color.RED);
        dbindate.setTextColor(Color.RED);
    }

    tr.addView(dbid); 
    tr.addView(dbdevid);
    tr.addView(dbindate);
    tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
}
public void UIFinish()
{
    dbline();

    TextView te = (TextView)findViewById(R.id.totalentries);
    te.setText(String.valueOf(ID-1));
    TextView au = (TextView)findViewById(R.id.activeusers);
    au.setText(String.valueOf(activeinstalls));
}
@SuppressWarnings("deprecation")
public void dbline()
{
    TableLayout tl=(TableLayout)findViewById(R.id.db_data);
    TableRow tr = new TableRow(this); 
    tr.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
    TextView dbid = new TextView(this); 
    TextView dbdevid = new TextView(this);
    TextView dbindate = new TextView(this);
    dbid.setText("+---------");
    dbdevid.setText("+-------------------------------");
    dbindate.setText("+--------------------+");

    tr.addView(dbid); 
    tr.addView(dbdevid);
    tr.addView(dbindate);
    tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:07:25.983

移动这个

```
TableLayout tl=(TableLayout)findViewById(R.id.db_data); 
```

给你的`onCreate()`，因为你必须`setContentView()`在你打电话之前`findViewById`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T03:10:42.447

这是我自己的错误。我在错误的位置初始化了一个表格布局。

`TableLayout tl=(TableLayout)findViewById(R.id.db_data);`应该是简单`TableLayout tl;`的然后在 onCreate() 中初始化它

# javascript - 不能在文件中包含外部 Javascript

> ID：13655949
> 
> 赞同：3
> 
> 时间：2012-12-01T03:05:55.653
> 
> 标签：javascript, html, xampp

我是 PHP 新手，对任何类型的服务器管理都非常非常陌生。我从 XAMPP 3.1.0 for Windows 运行并使用 PHP 5.4 版。

我的 PHP 脚本执行得很好，但无论出于何种原因，我似乎都无法像这样包含外部 js 文件：

```
<script type="text/javascript" src="core.js"></script> 
```

但是，我可以毫无问题地做到这一点。

```
<script type="text/javascript">
    alert("some alert");
</script> 
```

有谁知道发生了什么事？

[**编辑**：这是我的文件夹结构。我的文件的路径是：C:\xampp\htdocs\AllocatedSpendingPlan\ - 它们都位于根目录。]

![文件夹结构](../Images/b6da5c6ea0872149a949de83f6b3a152.png)

这是我的文件：

[**编辑**：我使用 src 属性从脚本标记的主体中删除了代码，但它仍然无法正常工作。]

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
        <script type="text/javascript" src="core.js"></script>
        <script type="text/javascript">
            alert("working");
        </script>
    </head>
    <body>
        There is stuff here.
    </body>
</html> 
```

当我查看 Firefox 中的“网络”选项卡时，我显示该文件已下载，但没有任何脚本正在执行，并且在我进行调试时未加载该文件本身。

这是脚本调试器，显示没有加载文件：

![Firefox 的脚本调试器，不显示加载的脚本](../Images/a0454aea3d23999af6d580f02f75ece3.png)

最后，这是我的 Net 选项卡，显示文件已下载：

![Firefox 的网络选项卡，显示文件已找到并已下载](../Images/0b3d653a4aef3358b96d6d4871501b25.png)

[**编辑**：固定。这是我的命名空间声明中的一个错误。当我的 var 应该是一个对象文字时，我将它声明为一个函数。]

这是正确的代码。其他一切都很好。

```
var Core = {
    namespace: function(ns){
        var parts = ns.split("."),
        object = this,
        i, len;
        for (i=0, len=parts.length; i < len; i++) {
            if (!object[parts[i]]) {
                object[parts[i]] = {};
            }
            object = object[parts[i]];
        }
        return object;
    }
};

Core.namespace("Budgeting.Tools.AllocatedSpending");

Core.Budgeting.Tools.AllocatedSpending = function(){
    return {
        greet: function(){
            alert("hello");
        }
    };
};

var d = new Core.Budgeting.Tools.AllocatedSpending();
d.greet(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:29:53.753

### 看到你的截图后，

1.  当你使用一个`src=""`属性时，你应该将`<script>`标签的主体留空。所以`alert("I am here, aren't you!")`从那里删除它。
2.  `core.js`在路径中找不到您的。让我们知道文件夹路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:11:41.777

*   检查您的控制台是否有错误（对于 Chrome/Windows，CTRL+SHIFT+I）。
*   这可能是 404 错误或您的`core.js`文件中的错误。确保路径正确：`<script type="text/javascript" src="/path/to/core.js"></script>`

*   该脚本可能被包含得太早/太晚。要对此进行测试，请确保该`<script>`块位于`<head>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T03:59:21.697

这是一个简单的编码错误。我将命名空间声明为函数而不是对象文字。代码应该是：

```
var Core = {
    namespace: function(ns){
        var parts = ns.split("."),
        object = this,
        i, len;
        for (i=0, len=parts.length; i < len; i++) {
            if (!object[parts[i]]) {
                object[parts[i]] = {};
            }
            object = object[parts[i]];
        }
        return object;
    }
}; 
```

代替：

```
var Core = function () {
    namespace: function(ns){
        var parts = ns.split("."),
        object = this,
        i, len;
        for (i=0, len=parts.length; i < len; i++) {
            if (!object[parts[i]]) {
                object[parts[i]] = {};
            }
            object = object[parts[i]];
        }
        return object;
    }
}; 
```

只见树木不见森林……

# python - mysql (python) AWS 查询堆积导致速度变慢

> ID：13655953
> 
> 赞同：3
> 
> 时间：2012-12-01T03:06:34.093
> 
> 标签：python, mysql, amazon-web-services, mysql-python

在调用 commit 之前，我执行了以下代码 25 次（非常简略）。

```
def query_and_insert(conn):
    c = conn.cursor()
    result = c.execute("SELECT ...")
    result = modify_result(result)
    c.execute("INSERT ...".format(result))
    result.close()

if __name__ == "__main__":
    conn = MySQLDB.connect(...)
    loop 25 times:
        query_and_insert(conn)
    conn.commit()
    conn.close() 
```

在前 15 个左右的查询之后，速度显着降低（从每个查询/插入组合 < 1 秒到 > 20 秒）。问题绝对不是我正在执行的查询的复杂性。将最后 10 个查询移到开头使它们运行得同样快，然后最后一个查询再次显着减慢。

在 AWS 上耗时过长的进程是否存在某种限制或优先级降低？有没有办法解决？

编辑：我们在 Amazon EC2 上使用 MicroInstance。构建表大小没有问题，因为我们在空表上进行插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:50:50.073

您所描述的是微实例的正常行为。[在Micro Instances 文档](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html)中查看更多信息。简而言之，微型实例可以访问相当数量的 CPU——但是一旦你使用它超过很短的一段时间，你就会受到*严重*的限制。如果这对您的应用程序产生不利影响，那么它根本不适合微型实例，这些实例旨在用于低 CPU 应用程序和/或用户不会注意到增加延迟的应用程序。

微型实例是唯一受此类限制的实例，因此升级到 a`m1.small`将是一种出路。由于每个实例都由 EBS 支持，因此可以通过停止实例（**不**终止）、使用“更改实例类型”选择更大的实例并重新启动来`t1.micro`从 EC2 控制台升级。这将产生一个新的内部 IP/主机名，以及一个新的公共 IP/主机名，除非您使用弹性 IP，但您将获得一致数量的 CPU。

# c# - AutoCompleteBox 问题，其数据源大小超过 10k 条记录

> ID：13655956
> 
> 赞同：0
> 
> 时间：2012-12-01T03:06:49.123
> 
> 标签：c#, wpf, .net-4.0, wpf-controls, autocompletebox

尝试通过 AutoCompleteBox 使用经典的 Wpf 结构（不使用 ViewModel）

因为我是新手`WPF`，但还没有获得`MVVM`..的知识

**我的代码现在：**

附言

对于此示例代码的用法，源文件应以制表符分隔，每一行如下：

a line No'（仅供参考），制表符分隔，AutoComplete的值。

1.  每一行
2.  有价值
3.  由
4.  制表符 = "\t"

**XAML：**

主要声明 - 窗口

```
// this happens to be a borderless - window with custom buttons
<Window x:Class="AllDayWpf.MainWindow" Icon="/AllDayWpf;component/bin/Debug/ScheduledTICON.png"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:acb="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Input.Toolkit"
    xmlns:System="clr-namespace:System;assembly=mscorlib" 
    Title="Daily Tasks Srv-2" Height="555" Width="731" 
    ResizeMode="NoResize" 
    WindowStyle="None"
    AllowsTransparency="True" Background="{x:Null}"> 

<Window.Effect>
    <DropShadowEffect Opacity="0.5" BlurRadius="5" ShadowDepth="5" />
</Window.Effect> 
```

TabItem 中的网格（我猜其余无关紧要）：

```
<Grid>
      <ListBox Name="LBX_AddTaskOptions" SelectionChanged="LBX_AddTaskOptions_SelectionChanged"  HorizontalAlignment="Left" Margin="19,29,0,0"  VerticalAlignment="Top" Width="125" FontWeight="Bold" Background="Beige">
          <ListBoxItem Background="#9B6ADBCD" FontWeight="Bold" BorderBrush="#FF27AA27">
              <StackPanel Orientation="Horizontal">
                     <TextBlock Text="internet" Width="74"></TextBlock>
                     <Image Source="Images\IE_BlackRed.png" Height="30"></Image>
               </StackPanel>
          </ListBoxItem>
          <ListBoxItem Background="#9B6ADBCD" FontWeight="Bold" BorderBrush="#FF27AA27">
               <StackPanel Orientation="Horizontal">
                     <TextBlock Text="Local Folder" Width="74"></TextBlock>
                     <Image Source="Images\Folder_Black.png" Height="30" Width="32"></Image>
             </StackPanel>
      </ListBoxItem>
  </ListBox>
      <acb:AutoCompleteBox Name="UrlACBXml" ValueMemberPath="url" HorizontalAlignment="Left" Grid.Column="1" Width="296" Margin="150,23,0,156" Background="#FFEDF4AB">
           <acb:AutoCompleteBox.ItemTemplate>
                 <DataTemplate>

                      <StackPanel Orientation="Horizontal">

                            <TextBlock Text="{Binding url}" FontWeight="Bold" Foreground="Black" Width="30"/>
                       </StackPanel>
                  </DataTemplate>
              </acb:AutoCompleteBox.ItemTemplate>    
       </acb:AutoCompleteBox>
</Grid> 
```

这就是我需要放置 autoCompletebox 的地方。 `ACB`初始可见性 = 隐藏。
然后，如果用户选择 item-internet，这`ACB`将变为可见。

（只是想法，现阶段未实现）

**C#**自动完成代码。

```
public MainWindow()
{
    InitializeComponent();

    MyUrlObsrvblCollcntFactory UrlObsrCollcntFctry= new MyUrlObsrvblCollcntFactory();
    UrlACBXml.ItemsSource = UrlObsrCollcntFctry.AutComplObsrvblCllctn;
}

public class MyUrlObsrvblCollcntFactory
{
    public class URLsSrcClss
    {
        public string url { get; set; }
    }
    String path = System.IO.Path.Combine(Environment.CurrentDirectory,"tst.txt");
    string[] testit;
    public ObservableCollection<URLsSrcClss> AutComplObsrvblCllctn { get; set; }
    public MyUrlObsrvblCollcntFactory()
    {
        if (File.Exists(path))
        {
            testit = File.ReadLines(path).ToArray();
            foreach (var item in testit)
            {
                var TabSeparatedItemArr = item.Split('\t');
                this.AutComplObsrvblCllctn.Add( new URLsSrcClss { url = TabSeparatedItemArr[1] }
                );
            }
        }
    }
} 
```

问题是当我测试自动完成时，我使用过

```
ObservableCollection<URLsSrcClss> AutComplObsrvblCllctn = new ObservableCollection<URLsSrcClss> 
{
    new URLsSrcClss {url = "say yhoo..."},
    new URLsSrcClss {url = "...google..."},
}; 
```

它确实有效

尽管更改要从大型数据源生成的代码是我猜是什么破坏了功能。至少我现在是这么想的。

任何想法我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:06:12.890

它现在正在工作我只是犯了一个错误，没有正确初始化它上面的代码将不起作用，我决定把它作为一个问题......我的回答也是......为了未来的人。

所以任何有 WPF AutoCompleteBox 实现问题的新开发人员都可以有这个很好的解决方案来解决这个问题。

```
 public ObservableCollection<URLsSrcClss> AutComplObsrvblCllctn = new ObservableCollection<URLsSrcClss>(); 
```

话虽如此，欢迎您分享您的想法、想法、批评或提示...

所以如果你有任何，请在这里评论。

谢谢。

# fortran77 - 在线读取指定的实数

> ID：13655957
> 
> 赞同：0
> 
> 时间：2012-12-01T03:07:02.347
> 
> 标签：fortran77

我正在用 Fortran 77 编写一个程序，我需要在一行上读取指定数量的 REAL 数字。例如，输入可能如下所示：

1.0 2.0 3.0 4.0

将指定一行上的值的数量。这将保持在某个值中，称为 M。

如何在一行上读取 M REAL 值。我试过用循环来做这件事，但我相信 READ 语句在执行后会跳到下一行。另外，我使用 VARIABLE INFILE 来引用文件单元。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:46:09.447

您可以使用`READ`读取指定长度的整个数组。这是一个例子：

```
 PROGRAM READRL
         PARAMETER (SIZELM=100)
         DIMENSION RLIST(SIZELM)
  C      Define your M here. 
         M = 3
  C      Read the M values into the first M positions of RLIST.
         CALL RDNMRS(M,RLIST)
         END PROGRAM READ

         SUBROUTINE RDNMRS(M, RLIST)
         DIMENSION RLIST(M)
         READ(*,*) RLIST
         END SUBROUTINE RDNMRS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T09:54:55.927

将您的变量定义为适合您的问题的实际大小数组。数组名称为`VAR1`，其大小为`100`。你可以把它做成任何大小。

```
REAL VAR1(100)
....................
READ(INFILE,*)(VAR1(I),I=1,M)
................... 
```

希望对你有效。

# eclipse - Eclipse/Maven/Junit ：即使编译的类在 test-classes 文件夹中，junit 也会抛出 classnotfound

> ID：13655960
> 
> 赞同：1
> 
> 时间：2012-12-01T03:07:15.967
> 
> 标签：eclipse, maven-2, junit4, m2eclipse, m2e

我最近将我的环境从 Eclipse Ganymede 升级到了 Eclipse Juno。我的应用程序使用的是旧的 maven-eclipse-plugin，所以我必须在 .classpath 和 .project 和 .settings 文件中进行更改，以便 eclipse juno 中的 m2e 插件正确获取所有信息。我通过以下链接做到了这一点 - [http://blog.frankel.ch/migrating-from-m2eclipse-to-m2e](http://blog.frankel.ch/migrating-from-m2eclipse-to-m2e)

我的应用程序使用 tomcat7 运行得非常好，maven 也可以正常工作。当我尝试在 Eclipse 中将测试作为 junit 测试运行时，我的问题就开始了。这给了我一个 ClassNotFoundException。附带说明一下，即使我在 Eclipse 中将我的 test-classes 文件夹添加为类路径变量，它仍然存在问题，因为它说它找不到资源文件夹。这个相同的环境与早期的 eclipse、maven 插件和类路径配置完美配合。所以我不知道发生了什么变化。

我正在与您分享我的项目结构和类路径详细信息。请耐心等待，因为问题有点长。

*   XXX
    *   DBUnit（类似于 Web）
    *   其他（类似于Web）
    *   网络
        *   源/主/java
        *   源/主/资源
        *   源/测试/java
        *   源/测试/资源
        *   目标/类
        *   目标/测试类
        *   .settings
        *   .classpath
        *   。项目
    *   目标/类
    *   .settings
    *   .classpath
    *   。项目

Web下的classpath入口如下：

```
<classpathentry kind="src" output="target/classes" path="src/main/java"/>
<classpathentry kind="src" output="target/test-classes" path="src/test/java"/>
<classpathentry excluding="**" kind="src" output="target/classes" path="src/main/resources"/>
<classpathentry excluding="**" kind="src" output="target/test-classes" path="src/test/resources"/>
<classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"/>
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
<classpathentry kind="output" path="target/classes"/> 
```

XXX下的classpath入口如下：

```
<classpathentry kind="src" output="Others/target/classes" path="Others/src/main/java"/>
<classpathentry kind="src" path="DBUnit/src/main/java"/>
<classpathentry kind="src" path="Web/src/main/java"/>
<classpathentry excluding="mock/" kind="src" output="Web/target/test-classes" path="Web/src/test/java"/>
<classpathentry excluding="**" kind="src" output="Web/target/classes" path="Web/src/main/resources"/>
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
<classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"/>
<classpathentry kind="var" path="TOMCAT_HOME/lib/annotations-api.jar"/>
<classpathentry kind="var" path="TOMCAT_HOME/lib/el-api.jar"/>
<classpathentry kind="var" path="TOMCAT_HOME/lib/jasper.jar"/>
<classpathentry kind="var" path="TOMCAT_HOME/lib/jsp-api.jar"/>
<classpathentry kind="var" path="TOMCAT_HOME/lib/servlet-api.jar"/>
<classpathentry kind="output" path="target/classes"/> 
```

因此，当我清理项目时，eclipse 不会将主要的 java 类放在 module1/target/classes 文件夹下，它也不会复制类下的资源文件夹。

关于这个问题，我已经搜索了很多。

一种解决方案还建议将项目作为 Maven 项目导入 eclipse 并更新配置。这会将我的项目分成多个模块，并且 maven/eclipse 会抛出异常 - “路径必须包括项目和资源名称”。我也不明白这个错误。

另一个建议删除 exclude="**"。我删除了它，但这也无济于事。

项目结构有问题吗？module1 是否需要类路径和项目文件？

请帮忙，我将不胜感激。谢谢。

**2012 年 12 月 3 日更新**

这是例外 -

```
Class not found com.iei.gas.service.QuartzTestService
java.lang.ClassNotFoundException: com.iei.gas.service.QuartzTestService 
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClasses(RemoteTestRunner.java:429)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

# ruby-on-rails - 设计 Rspec 测试未通过。不知道为什么

> ID：13655968
> 
> 赞同：0
> 
> 时间：2012-12-01T03:08:08.343
> 
> 标签：ruby-on-rails, rspec, devise

我有一个应用程序，我正在扩展 Devise 的 RegistrationsController 以添加一些我自己的功能，但由于某种原因，我无法通过我的帐户创建测试。在开发中一切正常，所以我几乎可以肯定这与我编写测试的方式有关，但老实说，我现在愿意尝试任何事情。太令人沮丧了。

这是我的测试的摘录。您会看到它正在检查新用户，但没有找到。

```
describe RegistrationsController do
  before :each do
    @request.env['devise.mapping'] = Devise.mappings[:user]
    @new_user = { 'fname' => 'Stizzle',
                  'lname' => 'Mcgizzle',
                  'email' => 'qwerty@example.com',
                  'password' => 'foobar'
                }
  end
  describe "During a regular registration, " do
    it "filling out the fields correctly should create a new user" do
      RegistrationsController.stub(:verify_recaptcha).and_return(true)
        expect do
          post  :create,
          :user => @new_user,
          :recaptcha_response_field => 'foobar',
          'tos-agree' => 'true'
          end.to change(User.all, :count).by(1)
        end 
```

我的控制器动作：

```
def create
  build_resource
  if verify_recaptcha(:model => resource, :message => "The text you entered did not match.  Please try again.") && resource.save
    if resource.active_for_authentication?
      set_flash_message :notice, :signed_up if is_navigational_format?
      sign_in(resource_name, resource)
      respond_with resource, :location => after_sign_up_path_for(resource)
    else
      set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
      expire_session_data_after_sign_in!
      respond_with resource, :location => after_inactive_sign_up_path_for(resource)
    end
  else
    clean_up_passwords resource
    render :action => 'new'
  end
end 
```

我尝试从控制器中删除 CAPTCHA 只是为了看看这是否会造成一些麻烦，但它没有任何效果。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:15:17.767

```
RegistrationsController.stub(:verify_recaptcha).and_return(true) 
```

`verify_recaptcha`这会在 RegistrationsController*类*上存根消息。那是行不通的，因为在RegistrationsController的*实例*`create`上调用。

 *rspec-rails`controller`为此目的提供了恰当命名的辅助方法：

```
controller.stub(:verify_recaptcha) { true } 
```*

# php - 字符串来自 URL 的多个字符串之一

> ID：13655970
> 
> 赞同：1
> 
> 时间：2012-12-01T03:08:27.017
> 
> 标签：php

两种情况：

1.  [http://www.example.com/index.php](http://www.example.com/index.php)
2.  [http://www.example.com/index.php?string1=foo&string2=foo2](http://www.example.com/index.php?string1=foo&string2=foo2)

用例：

1.  如果场景 1 为真，我需要添加字符串`?string1=foo`
2.  如果场景 2 为真，我需要删除 string2=foo2 并放入 string3=foo3

我遇到问题的情况：

1.  如果已经有一个字符串，我将需要添加“&”，否则它将只是“？”。
2.  我不知道如何获取最后一个字符串并能够替换它。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:32:40.257

URL 参数始终在`$_GET`数组中。您可以使用它来构建您的参数列表，然后使用它`http_build_query`来创建您的 URL 查询字符串。

```
$new_url_params = $_GET;
if ( count($new_url_params)==0 ) {
    $new_url_params['string1']='foo';
} else if ( isset($new_url_params['string2']) ) {
    unset($new_url_params['string2']);
    $new_url_params['string3'] = 'foo3';
}
$new_url = 'http://www.example.com/index.php?'.http_build_query($new_url_params); 
```

我想你可能想要做一些更复杂的事情。因此，您可能想要查看`parse_url`获取 URL 的各个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:48:47.050

我能够at the`strpos`然后确定是否需要保留或 add后跟字符串。当我需要切换最后一个字符串时，我做了一个. 我不知道这是否是最好的解决方案，但我很高兴让它发挥作用....到目前为止。`$_SERVER['REQUEST_URI']``?``?``&``str_replace`

# hadoop - oozie 中的蜂巢操作失败（在 cloudera CDH 4.1.1 上）

> ID：13655971
> 
> 赞同：5
> 
> 时间：2012-12-01T03:08:49.480
> 
> 标签：hadoop, hive, cloudera, oozie

当我使用 from oozie od CDH 4.1.1 运行配置单元脚本时

运行失败：

```
Error Code  JA018
Error Message   org/apache/hadoop/hive/cli/CliDriver

Details
Property    Value
External Id job_201211281608_0112
External Status FAILED/KILLED
Data    None
Start time   Sat, 01 Dec 2012 03:02:37
End time     Sat, 01 Dec 2012 03:03:07
Id  0000007-121128160850795-oozie-oozi-W@ExchangeRateTest
Retries 0
TrackerUri  overlord-datanode1:8021
Transition  kill 
```

[谷歌搜索 JA018](http://archive.cloudera.com/cdh4/cdh/4/oozie/oozie-default.xml)仅显示一个神秘提示：JA018 is output directory exists error in workflow map-reduce action。

我将我的 hiv-site.xml 复制到 HDFS 并在 workflow.xml 中设置：oozie.hive.defaults /user/hue/oozie/workspaces/ *overlord* -oozie-1/hive-site.xml

这是完整的workflow.xml：

```
<workflow-app name="HiveTest" xmlns="uri:oozie:workflow:0.4">
    <start to="ExchangeRateTest"/>
    <action name="ExchangeRateTest">
        <hive xmlns="uri:oozie:hive-action:0.2">
            <job-tracker>${jobTracker}</job-tracker>
            <name-node>${nameNode}</name-node>
            <prepare>
                <delete path="${nameNode}${jobOutput}"/>
            </prepare>
            <configuration>
                <property>
                    <name>oozie.use.system.libpath</name>
                    <value>true</value>
                </property>
                <property>
                    <name>oozie.hive.defaults</name>
                    <value>/user/hue/oozie/workspaces/_overlord_-oozie-1/hive-site.xml</value>
                </property>
            </configuration>
            <script>/user/hue/oozie/workspaces/_overlord_-oozie-1/03_update_exchange_rates_final.hive</script>
              <param>OUTPUT=${jobOutput}</param>
        </hive>
        <ok to="end"/>
        <error to="kill"/>
    </action>
    <kill name="kill">
        <message>Action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
    </kill>
    <end name="end"/>
</workflow-app> 
```

怎样才能让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T18:45:06.950

`org/apache/hadoop/hive/cli/CliDriver`执行 Hive 操作需要该类。从错误消息中可以明显看出这一点。这个类在这个 jar 文件中：`hive-cli-0.7.1-cdh3u5.jar`. （在我的 cloudera 版本中，我的情况是 cdh3u5）。

`ShareLib`Oozie 在目录中检查这个 jar 。该目录的位置通常配置在 中`hive-site.xml`，属性名称为`oozie.service.WorkflowAppService.system.libpath`，因此 Oozie 应该很容易找到该 jar。

但在我的情况下，`hive-site.xml`不包括这个属性，所以 Oozie 不知道在哪里可以找到这个 jar，因此`java.lang.NoClassDefFoundError`.

为了解决这个问题，我必须在我的 job.properties 文件中包含一个参数，以将 oozie 指向`ShareLib`目录的位置，如下所示 `oozie.libpath=${nameNode}/user/oozie/share/lib`：（取决于在`SharedLib`集群上配置目录的位置）。

# windows-8 - MonoGame Windows 8 的屏幕截图问题

> ID：13655979
> 
> 赞同：1
> 
> 时间：2012-12-01T03:10:54.500
> 
> 标签：windows-8, xna, windows-runtime, monogame, winrt-async

我很难在 MonoGame 中保存屏幕截图。每次我保存屏幕截图时，它都会变得一团糟，就像您不订阅付费频道时的样子。就像搞乱 VHS 磁带上的跟踪一样。我现在知道发生了什么。我创建了一个全新的项目，只是为了看看它是我的项目还是 MonoGame。它与新项目完美配合。我知道没有人能知道我到底做错了什么，但谁能告诉我为什么会发生这样的事情？我应该看看我的相机课吗？或者，关于文件保存的某些事情可能会变得一团糟？我很茫然，今天我有一个游戏归功于微软，我显然已经错过了那个截止日期。以下是我的保存截图方法：

```
 async void ScreenShot()
       {
           RenderTarget2D renderTarget = new RenderTarget2D(
              _graphics.GraphicsDevice,
              _graphics.GraphicsDevice.PresentationParameters.BackBufferWidth,
              _graphics.GraphicsDevice.PresentationParameters.BackBufferHeight);

           _graphics.GraphicsDevice.SetRenderTarget(renderTarget);

           Draw(new GameTime());

           _graphics.GraphicsDevice.SetRenderTarget(null);

           StorageFolder storageFolder = ApplicationData.Current.LocalFolder;
           Stream stream = null;
           if (storageFolder != null) stream = await storageFolder.OpenStreamForWriteAsync("testing.jpg", CreationCollisionOption.ReplaceExisting);
           if (stream != null)
           {
              renderTarget.SaveAsJpeg(stream, renderTarget.Width, renderTarget.Height);
           }
           stream.Dispose();
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:44:59.877

好吧，好吧，我缩小了一点。我只是取出了将其写入文件的函数部分，然后将 renderTarget 转换为 Texture2D 然后渲染它，它看起来很完美。很明显，问题在于保存文件。这并不能完全解决我的问题，但它至少给了我一些可以使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:58:31.607

我想通了，这是模拟器的问题。出于某种原因，当通过模拟器写入文件时，它会出现乱码，但在实际设备上运行游戏时，它运行良好。

# python - 精灵表中不同大小的精灵

> ID：13655980
> 
> 赞同：0
> 
> 时间：2012-12-01T03:11:00.543
> 
> 标签：python, pygame

我在 Python 和 Pygame 中加载了一个包含不同大小的精灵的精灵表。我可以显示它们，但即使它是空闲动画，角色也不会静止不动，因为有些动画更大，因此会迫使角色更靠右。

我的代码是：

```
class Hero(pygame.sprite.Sprite):
    """Hero class"""
    def __init__(self, position):
        pygame.sprite.Sprite.__init__(self)
        self.load_frames()
        self.image = self.img_list[0]
        self.rect = self.image.get_rect()
        self.rect.topleft = position
        self.pause = 1
        self.delay = 1
        self.index = 0
    def load_frames(self):
        spritesheet = pygame.image.load("spritesheet.png").convert()
        self.img_list = []
        self.size_list = [(26,32),(27,31),(29,30), (31,30), (33,31), (34,31), (36,32), (38,33), (34,33), (34,33), (32,32), (27,31), (25,30), (24,30), (23,31), (21,31), (20,32), (20,33), (22,33), (24,33)]
        self.offset = ((14,6), (42,7), (72,8), (104,8), (138,7), (174,7), (211,6), (250,5), (291,5), (328,5), (365,5), (400,6), (430,8), (458,8), (485,7), (511,7), (535,5), (558,4), (581,4), (606,4))
        for i in range(20):
            tmp_img = pygame.Surface(self.size_list[i])
            tmp_img.blit(spritesheet, (0,0), (self.offset[i], self.size_list[i]))
            self.img_list.append(tmp_img)
    def update(self):
        if self.delay == self.pause:
            if self.index == len(self.img_list):
                self.index = 0
            oldcenter = self.rect.center
            self.image = self.img_list[self.index]
            self.rect = self.image.get_rect()
            self.rect.center = oldcenter
            self.delay = 0
            self.index += 1
        self.delay += 0.5 
```

即使精灵大小不同，我如何使角色居中？我的第一个想法是以某种方式制作一个我手动定位的参考点，但这似乎有点慢，有没有更好的方法，或者如果这是一个好方法，我将如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:30:10.990

定位精灵时，请执行以下操作：

```
sprite.rect.center = player.center_pos 
```

如果您必须计算玩家的 center_pos，请执行以下操作：

```
player.center_pos[0] = player.pos[0] + player.sprite.get_size()[0] / 2
player.center_pos[1] = player.pos[1] + player.sprite.get_size()[1] / 2 
```

# jquery - JQuery 将悬停效果应用于整个班级

> ID：13655986
> 
> 赞同：1
> 
> 时间：2012-12-01T03:11:53.227
> 
> 标签：jquery, class, hover, effect

我有一个问题，我在任何地方都找不到具体的答案。

我已经下载了一个 JQuery 插件，因为这是我第一次尝试 java 脚本，我正在尝试将此缩放悬停效果应用于每个图像。Insted 它将效果应用于整个类并将单个效果应用于所有缩略图。

HTML

```
<div class="gallery">
   <a href="" class="thumb"><span><img src="images/1.png" alt="" /></span></a>
   <a href="" class="thumb"><span><img src="images/2.png" alt="" /></span></a>
   <a href="" class="thumb"><span><img src="images/3.png" alt="" /></span></a>
   <a href="" class="thumb"><span><img src="images/4.png" alt="" /></span></a>
</div> 
```

CSS

```
.gallery {
   height: auto;
   padding-left: 0px;
   padding-right: 0px;
   margin-top: 200px;
}

.gallery li {
   padding-left: 10px;
   padding-right: 5px;
   padding-bottom: 5px;
   display:inline-block;
}

.gallery li a.thumb {
   width: 314px; 
   height: 177px;
   padding: 0px;
   cursor: auto;
} 
```

jQuery

```
$(document).ready(function() {
   $('.gallery').hoverpulse().each(function() {
      var $img = $(this);
      var link = $img.attr('data-link');
      $img.attr('title','Goto: ' + link);
      $img.click(function() {
         window.open(link);
         return false;
      });
   });
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-01T04:46:37.360

```
$(function() {
    $('.gallery img').hoverpulse().each(function() {
        var $img = $(this);
        var link = $img.attr('data-link');
        $img.attr('title','Goto: ' + link);
        $img.click(function() {
            window.open(link);
            return false;
        });
    });
}); 
```

# animation - 如何将 bvh 动画应用于 Cal3D 模型？

> ID：13655987
> 
> 赞同：2
> 
> 时间：2012-12-01T03:12:02.517
> 
> 标签：animation, 3d, skeletal-mesh

我想在[Cal3D](https://mp3butcher.github.io/Cal3D/)模型上使用[bvh](http://research.cs.wisc.edu/graphics/Courses/cs-838-1999/Jeff/BVH.html) ̉ 动画。乍一看似乎应该很简单：bvh 文件指定了每个关节层次结构的旋转，而 Ca3D 模型包含关节层次结构的旋转。问题是我想使用由其他程序创建的 bvh 文件，而不仅仅是我创建的那些，并且在 bvh 文件的 HIERARCHY 部分中使用的中性姿势没有标准。有时它或多或少是一个标准的 T 姿势，但有时它完全不像一个真正的人类可以采取的姿势。

我可以计算 bvh 数据所暗示的关节位置，并找到将模型的关节移动到相对于彼此的位置的最简单的旋转。但是似乎我会丢弃数据，因为没有唯一的旋转可以将矢量移动到给定方向。

# python - 将python列表列表打印成字符串

> ID：13655990
> 
> 赞同：1
> 
> 时间：2012-12-01T03:12:28.143
> 
> 标签：python, list, dictionary, tuples

我有列表列表：

```
[['lorem', ['a', 'b', 'c', 'd']], ['ipsum', ['e']], ['dolor', ['f','g']], ['sit', ['h', 'i']]] 
```

如何实现这一目标？

```
lorem (a + b + c + d); ipsum (e); dolor (e + g); sit (h + i) 
```

到目前为止，我已经尝试过：

```
print '\n'.join('%s %s' % x for x in list) 
```

没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:15:01.670

```
In [14]: L = [['lorem', ['a', 'b', 'c', 'd']], ['ipsum', ['e']], ['dolor', ['f', 'g']], ['sit', ['h', 'i']]]

In [15]: '; '.join("%s (%s)" %(elem[0], " + ".join(elem[1])) for elem in L)
Out[15]: 'lorem (a + b + c + d); ipsum (e); dolor (f + g); sit (h + i)' 
```

或者

```
In [18]: L = [(e[0], " + ".join(e[1])) for e in L]

In [19]: L
Out[19]: 
[('lorem', 'a + b + c + d'),
 ('ipsum', 'e'),
 ('dolor', 'f + g'),
 ('sit', 'h + i')]

In [20]: '; '.join("%s (%s)" %(e[0], e[1]) for e in L)
Out[20]: 'lorem (a + b + c + d); ipsum (e); dolor (f + g); sit (h + i)' 
```

# java - Java 中的 Try-Catch 语句

> ID：13655993
> 
> 赞同：5
> 
> 时间：2012-12-01T03:13:16.557
> 
> 标签：java, error-handling, try-catch

更新：感谢有关保留代码 SSCCE 的建议。就像我说的，这是我第一次在这里发帖。下次我一定会花时间确保代码被充分精简，然后再在这里发布。

* * *

所以我正在为我的计算机科学课编写一个程序，并且遇到了一个我无法弄清楚的奇怪问题。我试图通过使用 try/catch 语句来阻止无效的数据类型输入，从而使我的程序变得健壮，以免它破坏并结束整个程序，但它似乎不起作用。当输入了无效的数据类型时，程序结束时不会在窗口中显示任何 Java 的标准错误消息。我不知道为什么会这样，但我认为我错误地使用了 try/catch 语句。这是我的程序的两个类：

```
/* The core class for the finance calculations to be done in the FinanceApp class. */

public class FinanceCore{
  // Instance variables
  int numYears;
  double principal;
  double interestRate;
  double balance;

  public FinanceCore(){
    numYears = 0;
    principal = 0;
    interestRate = 0;
    balance = 0;
  }

  // Mutator methods that return boolean values depending on whether the input was valid or not
  public boolean setYears(int y){
    if(y >= 0){
      numYears = y;
      return true;
    }
    else return false;
  }

  public boolean setPrincipal(double p){
    if(p >= 0){
      principal = p;
      balance = principal;
      return true;
    }
    else return false;
  }

  public boolean setInterestRate(double ir){
    if(ir >= 0 && ir <= 1){
      interestRate = ir;
      return true;
    }
    else return false;
  }

  // Two accessors
  public int getYears(){
    return numYears;
  }

  public double getPrincipal(){
    return principal;
  }

  // This method calculates and returns the balance at the end of each year
  public double plusYear(){
    balance = balance*(1+interestRate);
    return balance;
  }
} 
```

* * *

```
/* This program recieves three pieces of data (interest rate, principal amount, number of years) and generates an output
* table that shows how much money will be in a fund with the given parameters at the end of every year. */

import java.util.Scanner;

public class FinanceApp{

  public static void main(String[]args){
    // First, we will declare our global variables, and set them to default values
    Scanner reader = new Scanner(System.in);
    FinanceCore account = new FinanceCore();
    int menuItem = 0;

    // Now, we'll greet the user (because we're friendly like that)
    System.out.println("Welcome! Please select a menu option below.");

    while(true){
      /* Now, our first user interface: a menu system that displays four options to the user arranged in
       * columns for aesthetic effect. This is accomplished using the printf method.
       */

      System.out.printf("%n%-20s%-20s%n%-20s%-20s%n%-20s%n",
        "Set Principal[1]","Set Interest Rate[2]","Set Timespan[3]","Calculate[4]","Quit[5]");

      System.out.print(": ");

      // Now we get the user input until it is valid, and catch and errors in input type
      try {
        menuItem = reader.nextInt(); 
      }
      catch(Exception e){
        reader.nextLine(); // Clear the input stream to avoid an infinite loop
        System.out.println("Please a valid number 1-5.");
      }

      // The code for setting the principal amount
      if(menuItem == 1){
      while(true){
        System.out.print("Please enter the principal investment amount: ");

        try{
          if(account.setPrincipal(reader.nextDouble()));
          break;
        }
        catch(Exception e){
          reader.nextLine(); // Clear the input stream to avoid an infinite loop
          System.out.println("Please enter a valid dollar amount.");
        }
      }
    }
    // The code for setting the interest rate
    else if(menuItem == 2){
      while(true){
        System.out.print("Please enter the quarterly interest rate: ");
        try{
          if(account.setInterestRate(reader.nextDouble()));
          break;
         }
         catch(Exception e){
           reader.nextLine(); // Clear the input stream to avoid an infinite loop
           System.out.println("Please enter a valid decimal number between 0 and 1 (inclusive).");
         }
       }
     }

     // The code for setting the number of years
     else if(menuItem == 3){
       while(true){
         System.out.print("Please enter the number of years the account will exist: ");
         try{
           if(account.setYears(reader.nextInt()));
           break;
         }
         catch(Exception e){
           reader.nextLine(); // Clear the input stream to avoid an infinite loop
           System.out.println("Please enter a valid integer value.");
         }
       }
     }

     // This part actually executes the calculation
     else if(menuItem == 4){
       System.out.printf("%-10s%-10s%n%-10d%-10.2f%n","YEAR","BALANCE",0,account.getPrincipal());
       int count = 1;
       for(int c = account.getYears(); c > 0; c--){
         System.out.printf("%-10d%-10.2f%n",count,account.plusYear());
         count++;
       }
     }

     // If the user enters any other number, the program quits
     else
       break;
     }
   }
 } 
```

请注意，该程序存在一个我似乎无法修复的持久性问题。出于某种原因，每次用户在菜单选择提示符处输入无效的数据类型时，程序就会结束（尽管没有抛出任何错误）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T03:49:36.703

当您使用 try-catch 块时，您实际上是在告诉编译器**您**将负责显示错误消息——不会显示任何内置消息。相反，您在 catch 语句中包含的任何错误提示都会显示出来。

当我运行您的程序时，我看到了您的错误消息，但没有内置 Java 错误消息；这是应该的。确实，错误正在被抛出——但您正在捕获它们，因此 Java 不会在控制台上显示默认消息。

关于您在节目结束时的评论：

看看如果用户在菜单提示符处输入了错误的数据类型会发生什么；`menuItem`仍然为零。因此，所有 if 语句的计算结果都为 false。因此，else 语句运行，终止程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T05:10:52.607

其他答案解释了为什么你没有得到你期望的输出。我还想指出您正在犯的几个重要的编程错误：

## 1）不要那样抓`Exception`！

当您捕获时，您会捕获代码可能抛出的`Exception`每一个可能的子类型。`Exception`在您的情况下，您显然*期望*an`InputMismatchException`被抛出，但这些`nextXxx`方法也可以抛出其他异常，例如`NoSuchElementException`or `IllegalStateException`。然后还有其他`NullPointerException`可能表明存在错误的可能性。

您应该明确地捕获并处理您所期望的异常，并将其他异常留给更通用的*意外*异常处理。

## 2）打印出`Exception`错误信息

它将为您提供实际错误的详细信息；例如

```
 try {
    menuItem = reader.nextInt(); 
  }
  catch(InputMismatchException e){
    reader.nextLine(); // Clear the input stream to avoid an infinite loop
    System.out.println(e.getMessage());
    System.out.println("Please a valid number 1-5.");
  } 
```

事实上，异常是意料之外的，打印或记录异常的堆栈跟踪是一个好主意，以便您（或必须处理用户错误报告的人）可以弄清楚*实际*发生了什么。

## 3）当一个setter的验证失败时，抛出一个异常：

你的二传手做这种事情：

```
public boolean setInterestRate(double ir){
    if(ir >= 0 && ir <= 1){
        interestRate = ir;
        return true;
    }
    else return false;
} 
```

问题是三方面的：

*   Setter 通常不会返回任何东西。这不是正常的成语。
*   如果方法的调用者没有检查你的 setter 是否返回 false，它不会注意到 set 操作没有发生。
*   没有任何东西*说明*设置操作失败的原因。

像这样写：

```
public boolean setInterestRate(double ir){
    if(ir >= 0 && ir <= 1){
        interestRate = ir;
    }
    else {
        throw new IllegalArgumentException(
            "Interest rate not between 0 and 1 (" + ir + ")");
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T03:46:37.610

如果输入了无效的菜单项，您将得到 menuItem = 0，它会落在您的 if 阶梯底部并达到最后的中断。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-01T03:47:00.697

在你的 catch 块的最后一个语句之后有一个 continue ，如下所示；

```
catch(Exception e){
reader.nextLine(); // Clear the input stream to avoid an infinite loop
System.out.println("Please a valid number 1-5.");
continue;
} 
```

因为您允许程序在捕获异常后继续运行，该异常会停止您的程序，因为它是前进的。

希望这可以帮助。

# java - 查找最长公共子字符串的有效循环过程 java

> ID：13655994
> 
> 赞同：1
> 
> 时间：2012-12-01T03:13:21.907
> 
> 标签：java, algorithm, twitter, jersey, substring

`jersey`我使用API检索了 200 条推文。我想找到两条带有`longest common substring`. 这就是我所拥有的。`tweetList`是一个`ArrayList`对象`Tweet`。`comapreTweets`方法比较推文对象的最长子字符串。

```
Tweet t1=new Tweet();Tweet t2=new Tweet();
    int longestString=0;

    for(int i=0;i<tweetList.size();i++)
    {int store=0;Tweet comparer=null;
        for(int j=i+1;j<tweetList.size();j++)
        {
            if(j!=i){
            int result=tweetList.get(i).compareTweets(tweetList.get(j));
            if(result>store){
                store=result;
                comparer=tweetList.get(j);
            }}
        }
        if(longestString<store)
        {
            longestString=store;
            t1=tweetList.get(i); t2=comparer;
        }
} 
```

如果我检索 200 条推文，那么这将循环大约。40000 次。我需要一种更有效的方法。

**编辑** 这个循环还以倒序比较相同的推文假设我的`tweetList`包含`{a,b,c,d}`; 什么时候`i=1`和`j=3`比较是在 之间`b & d`；当`i=3`和`j=1`比较是`d & b`。如何避免这种情况。

**SOLUTION**而不是`j=0`它应该是`j=i+1`. 它循环了很多`19701`次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:04:34.210

```
199 + 198 + ... + 1 = 19900 
```

我相信这`19900 times`是一个明智的答案。循环中近一半的比较是多余的。您只需将第一个与剩余的 199 条推文进行比较，将第二个与剩余的 198 条推文进行比较，依此类推。比 19900 倍更好的进一步优化是可能的，但我想不出一个。

# javascript - getComputedStyle 和转换

> ID：13655996
> 
> 赞同：7
> 
> 时间：2012-12-01T03:14:00.060
> 
> 标签：javascript, dom-events, css-transitions

在考虑向 Chromium 提交错误时寻找解决方法 -

如果一个元素有一个过渡，`getComputedStyle`在过渡结束之前不会返回您期望它返回的内容。

长而短 - 如果我有一个高度为 24 像素的元素，并且添加一个类使其高度为 80 像素（带有往返过渡），并且两个高度都在样式表中定义 - 如果我设置该类并检查`getComputedStyle`，它仍然给我非班级高度，直到过渡结束。

我在这里谈论的一个示例：

```
<html>
    <head>
        <style>
            #foo {
                display: inline-block;
                background-color: red;
                height: 24px;
                padding: 4px 0;
                width: 200px;
                -webkit-transition-property: height;
                -webkit-transition-timing-function: linear;
                -webkit-transition-duration: 300ms;
            }
            #foo.changed {
                height: 80px;
            }
        </style>
    </head>
    <body>
        <div id="foo"></div>
        <p>before: <span id="before"></span></p>
        <p>after: <span id="after"></span></p>
        <script type="text/javascript">   
            var foo 
            function checkFoo(e) {
                foo.classList.toggle('changed');
                document.getElementById('before').innerText = window.getComputedStyle(foo, null).getPropertyValue("height");
            };

            window.addEventListener('load', function() {
                foo = document.getElementById('foo');

                foo.addEventListener('webkitTransitionEnd', function(e){
                document.getElementById('after').innerText = window.getComputedStyle(foo, null).getPropertyValue("height");
                });

                foo.addEventListener('click', checkFoo, false);
            });
        </script>
    </body>
</html> 
```

此示例的小提琴在这里：http: [//jsfiddle.net/bobbudd/REeBN/](http://jsfiddle.net/bobbudd/REeBN/)

（注意：这个小提琴只能在 webkit 中工作，它是我们所针对的一个浏览器，信不信由你——但我也在 Firefox 中测试并遇到了同样的问题）

问题是，我有多种情况需要在`transitionEnd`发生之前知道最终样式（有些人可能会说“计算”样式）。

或者我想这是一个更大问题的一部分 - 有很多不同的方法可以知道元素在特定时刻的高度，不应该`getComputedStyle`得到样式表（或样式属性）所说的属性应该是什么?

在你问我是否可以将最终数字放入 JS 之前，答案是（不幸的是）不能。

谁能想到在过渡结束之前获得这个最终值的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:59:40.620

这根本不是一个错误。`getComputedStyle`旨在在您调用它时返回属性的客户端呈现值。如果您在转换期间调用它，您将在转换期间获得值，如下所示：http: [//jsfiddle.net/REeBN/1/](http://jsfiddle.net/REeBN/1/)

获得规则设置的最终值的方法是检查规则本身，可能通过使用`cssRules`.

这是一个使用`window.getMatchedCSSRules`：

```
cssRules = window.getMatchedCSSRules(this);
var finalCssRule = "";
for(var i = 0; i < cssRules.length; i++){
    if(cssRules[i].selectorText == "#foo.changed"){
        finalCssRule = cssRules[i];
    }
}
document.getElementById('final').innerText = finalCssRule.cssText; 
```

这是一个演示：http: [//jsfiddle.net/REeBN/2/](http://jsfiddle.net/REeBN/2/)

# android - Eclipse-新建项目向导-找不到默认组件---如何配置？

> ID：13655997
> 
> 赞同：0
> 
> 时间：2012-12-01T03:14:39.673
> 
> 标签：android, eclipse, configuration

我正在使用 Eclipse Platform-3.7.2,ubuntu 12.04,java-"1.6.0_24" OpenJDK Runtime Environment (IcedTea6 1.11.5)

我使用 Android SDK Manager 安装了 Android 平台和软件包。我在 Eclipse 中从 android 站点安装了 ADT 插件，但在它重新启动后，没有给出任何消息，如“欢迎使用 Android 开发”来选择现有的 SDK 路径。

我去了新建-->项目-->新建项目向导，但窗口只显示“常规”和“CVS”选项。在常规-->项目中。

我想知道我的其他项目组件（例如 Java、Latex 等 Eclipse 的默认组件）到哪里去了。我使用 android-sdk 进行[处理](http://processing.org/)，它有 Android SDk 和 AVD 管理器选项。

我现在应该怎么做才能在 Eclipse 中运行 Android/java 项目。

我还在我的机器上安装了 sun java，但我希望 OpenJdk 默认运行其他软件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T03:00:28.063

在我执行 Help-->Check For Updates 并安装更新后，我遇到了类似的问题。要恢复并恢复向导中的正常选项，我必须执行以下操作。

帮助 --> 安装新软件 单击窗口中的“已安装”链接。Eclipse 平台安装详细信息窗口打开。切换到安装历史选项卡。您将看到当前安装和另一个带有日期时间戳的行项目。选择当前安装下的直接项，然后单击还原。

上面的这些步骤让我回到了环境。

eclipse 中的 Check for Updates 选项出现问题。我吸取了教训，至少现在要远离它。