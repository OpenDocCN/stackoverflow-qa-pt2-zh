# StackOverflow 问答 12899000-12899999

# silverlight - 转换 UIElement 的 Clip

> ID：12899006
> 
> 赞同：0
> 
> 时间：2012-10-15T15:33:26.937
> 
> 标签：silverlight, geometry, transform, clip, uielement

我正在为 Windows Phone 7 使用 C#、Silverlight、Visual Studio。

我想获得一个剪辑，`UIElement`其中包括在`UIElement`.

这个例子给了我剪辑，但不包括来自 UIElement 的任何转换：

```
// uie is a UIElement taken from a PhoneApplicationPage
Geometry myClip = uie.Clip; 
```

我尝试了以下方法，但最终移动了`UIElement`：

```
var frame = Application.Current.RootVisual as PhoneApplicationFrame;
var page = frame.Content as PhoneApplicationPage;
GeneralTransform gt = uie.TransformToVisual(page);
uie.RenderTransform = gt as Transform;
Geometry myClip = uie.Clip; 
```

我还尝试在最后添加一个逆变换来撤消任何运动，但这似乎使情况变得更糟：

```
uie.RenderTransform = gt.Inverse as Transform; 
```

请帮助我获得具有原始变换的剪辑，而`UIElement`不会弄乱它`UIElement`本身。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:16:23.037

我想出了如何在不弄乱原始文件的情况下解决这个问题`UIElement`。我需要创建一个`Geometry`具有相同数据的新对象，而不是使用原来的`Geometry`. 这不仅将新数据与旧数据分开，还可以防止一个对象作为子对象分配给多个对象。

这是我使用的结果代码：

```
var frame = Application.Current.RootVisual as PhoneApplicationFrame;
var page = frame.Content as PhoneApplicationPage;
GeneralTransform gt = uie.TransformToVisual(page);
var place = gt.Transform(new Point());
// declaring new variables to hold these values
Geometry geom;
Path path = new Path();
// here I checked for other restrictions on my UIElements before assigning the variables
geom = new RectangleGeometry();
(geom as RectangleGeometry).Rect = new Rect(place.X, place.Y, uie.RenderSize.Width, uie.RenderSize.Height);
path.Data = geom; 
```

我提到我在分配变量之前检查了对我的 UIElements 的一些限制。这与我发布的关于剪辑的另一个问题有关（[此处](https://stackoverflow.com/questions/12896493/multiple-geometry-clips-on-a-uielement)）。

# wcf - WCF Silverlight 启用服务“未找到”错误

> ID：12899007
> 
> 赞同：1
> 
> 时间：2012-10-15T15:33:31.443
> 
> 标签：wcf, silverlight, service, web

我在以下情况下苦苦挣扎（这是大图）：

我的 Web 项目中有一个支持 WCF Silverlight 的服务（基于 DomainService 类）。该服务旨在由 Silverlight 5 客户端以及非 Silverlight 消费者调用。

该服务在地址“http://localhost/mywebapproot/Services/MailService.svc”处显示 WSDL 信息，因此它可以被 Web 项目中的任何客户端发现和实现（这很好）。

以下是症状：

1.  任何 Silverlight 客户端都无法调用该服务（这就是问题所在！）返回的错误是“远程服务器返回异常：未找到”。如果我在 Web.Config 中更改服务的名称（假设我将 MyCompany.Web.Services.MailService 更改为 MailService），现在任何 Silverlight 客户端都可以调用该服务，但此时该服务不再可发现。

我将 includeExceptionDetailInFaults 设置为 True 并尝试使用 Fiddler/HTTPDebuggerPro 检查服务，但他们没有给我任何有关异常的详细信息。在我看来，在这种配置中，由于某种原因，Silverlight 客户端无法即时创建 .SVC 文件。

这是实现：

**MailService.svc**实现 <%@ ServiceHost Language="C#" Debug="true" Service="MyCompany.Web.Services.MailService" CodeBehind="MailService.svc.cs" %>

**MailService.svc.cs**实现

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public sealed partial class MailService : DomainService, IMailService
{
} 
```

**邮件服务接口**

```
[ServiceContract(ConfigurationName = "MyCompany.Web.Services.IMailService")]
public interface IMailService
{
   //Some public methods flagged as [OperationContract] go here
} 
```

**Web.Config**实现

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="Secure_Behavior_Configuration">
                <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <basicHttpBinding>
            <binding name="Public_MailService_BasicHttpBinding" transferMode="Streamed"
                        maxBufferSize="2147483647"
                        maxReceivedMessageSize="2147483647"
                        maxBufferPoolSize="2147483647">

                <readerQuotas maxArrayLength="21400000" maxStringContentLength="21400000" maxBytesPerRead="21400000"/>
                <security mode="None"/>
            </binding>
        </basicHttpBinding>
      <services>
        <service name="MyCompany.Web.Services.MailService" behaviorConfiguration="Secure_Behavior_Configuration">
            <endpoint
                address="" 
                binding="basicHttpBinding" 
                bindingConfiguration="Public_MailService_BasicHttpBinding"
                contract="MyCompany.Web.Services.IMailService" />
            <endpoint
                address=""
                binding="basicHttpBinding"
                bindingConfiguration="Secure_MailService_BasicHttpBinding"
                contract="MyCompany.Web.Services.IMailService" />
            <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
        </service>
    </services>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

非常感谢您的帮助！克里斯。

# ios - 使 UIImageView 及其 UIImage 按比例缩放而无需额外的填充

> ID：12899011
> 
> 赞同：4
> 
> 时间：2012-10-15T15:33:40.180
> 
> 标签：ios, uiimageview, rotation, uiimage

我有一个包含 UIImageView 的 UIView。UIImageViews 的工作方式类似于应用程序的品牌标志。当我旋转设备时，包含的 UIView 会根据屏幕的横向或纵向比例调整自身大小。

我想要实现的是让 UIImageView 相应地缩放，同时在左边距上保持比例。

这是顶部白色“横幅”的实际代码：

```
UIView *topBanner = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, height_topBanner)];
[topBanner setAutoresizingMask:(UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleBottomMargin)];
[topBanner setBackgroundColor:[UIColor whiteColor]];
topBanner.autoresizesSubviews = YES;

    // the logo
    UIImage *topBanner_logo = [UIImage imageNamed:@"logo.png"];
    float logoAspectRatio = topBanner_logo.size.width/topBanner_logo.size.height;
    topBanner_logoView = [[UIImageView alloc] initWithFrame:CGRectMake(topBanner.frame.size.width/100*3, topBanner.frame.size.height/100*7, (topBanner.frame.size.height/100*86)*logoAspectRatio, topBanner.frame.size.height/100*86)];
    [topBanner_logoView setImage:topBanner_logo];
    topBanner_logoView.backgroundColor = [UIColor blueColor];
    topBanner_logoView.contentMode = UIViewContentModeScaleAspectFit;
    [topBanner_logoView setAutoresizingMask:(UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleBottomMargin|UIViewAutoresizingFlexibleRightMargin)];
    [topBanner addSubview:topBanner_logoView];

[self.view addSubview:topBanner]; 
```

这是我的起点：启动时的 iPad 肖像：

![纵向模式启动](../Images/ca2642bba05cb5382587715d7c8f7295.png)

这就是我在横向旋转它时发生的情况： ![启动后的横向模式](../Images/68e393ab93582cddbcd3c79ea0027d30.png)

如您所见，UIImage 的比例还可以，但是我得到了额外的边框（我设置了 UIImageView 的背景颜色以突出显示它），因为 UIImageView 会随着容器大小的变化而伸展自己，并且UIImage 适合 UIImageView 并放在其中心。

当我直接以横向模式启动应用程序时，也会发生相同的情况 - 反过来： ![以横向模式启动](../Images/45e0c8617285c65e847e2ed029101fb8.png)

然后我旋转它：

![启动后的纵向模式](../Images/043f978335aa910c21ddb798c18dc4a6.png)

...我得到了顶部和底部带有额外边框的徽标。

我确实看到我可以编写一个函数来重新计算每次旋转更改时的每个大小，但我问自己是否有办法设置 UIImageView 和 UIImage 以使其工作而无需破解 iOS 的自动旋转/调整大小程序. 听起来很简单！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T03:12:01.687

您可以通过不使用`UIViewContentModeScaleAspectFit`, 而是计算图像的纵横比并使用它来明确地基于另一个（宽度或高度）来解决此问题。

例如，我旋转到横向，所以我希望高度为视图的 80%。

```
 CGFloat w = logo.image.size.width;
    CGFloat h = logo.image.size.height;
    CGFloat a = w / h;

    CGFloat h_use = self.view.height *0.8;
    CGFloat w_use = h_use*a; 
```

此外，`UIViewContentModeScaleAspectFill`既然您已经明确设置了纵横比，请将内容模式设置为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:11:01.180

您已将自动调整大小的蒙版设置为灵活的高度和宽度：

```
[topBanner_logoView setAutoresizingMask:(UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleBottomMargin|UIViewAutoresizingFlexibleRightMargin)]; 
```

如果您不这样做，则默认情况下视图不会改变大小，因此图像也不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T20:53:30.533

我认为是因为`topBanner_logoView.contentMode = UIViewContentModeScaleAspectFit;`

尝试`topBanner_logoView.contentMode = UIViewContentModeCenter`或`topBanner_logoView.contentMode = UIViewContentModeLeft`阻止 UIImageView 的图像调整大小（并获得填充）。

如果 UIImageView 正在调整大小，请移除自动调整大小掩码。

# android - Android 使用 if 语句打开 Intent

> ID：12899012
> 
> 赞同：0
> 
> 时间：2012-10-15T15:33:44.487
> 
> 标签：android, android-intent, android-activity

我有一个我正在制作的游戏。我有它，一旦玩家失去所有健康，他们需要看到最终的游戏活动。我已经完成了所有设置，并且没有收到任何错误。但即使 if 语句为真，我的活动也永远不会打开。我在下面有一个我的代码示例。

```
case R.id.button:                                                                      
Intent go = new Intent(this, mainactivity.class)   
if(health == 0 ){  
    Intent i = new  Intent(this, GameOver.class);  
    startActivity(i); 
}   
break; 
```

在此之上我已经扣除了健康，我已经为健康的价值干杯了。当值达到 0 时，主活动正在打开。基本上主要活动总是开放的。我不知道为什么它没有打开 GameOver 活动。我是编码新手，所以我可能做错了或遗漏了一些东西，请放轻松。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:42:03.003

可以是因为您`startActivity(go)`在完成后不久`startActivity(i)`（例如在 之后`switch`）。因此，您`mainactivity`会弹出并隐藏您的`gameover`活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:42:09.233

如果这是确切的代码，则后面没有分号：

```
Intent go = new Intent(this, mainactivity.class) 
```

它甚至不应该运行。为什么你甚至有它，你显然没有在这个范围内使用它？

你确定你的健康不能低于0吗？

# .net - 在水晶报表公式编辑器中减去 wo db 字段

> ID：12899015
> 
> 赞同：1
> 
> 时间：2012-10-15T15:33:49.120
> 
> 标签：.net, winforms, crystal-reports, crystal-reports-2010

我将两个相同类型的业务对象`List<DenominationDataEntity>`添加到水晶报表中。1\. 收到面额 2\. 支付面额。

我必须显示两个列表的值，然后我必须减去两个列表字段的值。
例如。`ReceivedDenomination`和都有`PaidDenomination`字段`Thousand`现在我必须减去和的`ReceivedDenomination.Thousand`值 `PaidDenomination.Thousand`。我使用以下代码创建了公式字段。

```
Global numberVar TotalThousand :=0;

(if IsNull({ReceivedDenomination.Thousand}) then
     TotalThousand
else
     TotalThousand := ToNumber({ReceivedDenomination.Thousand})
);

(if IsNull({PaidDenomination.Thousand}) then
    TotalThousand
else
     TotalThousand := TotalThousand + ToNumber({PaidDenomination.Thousand});
);
TotalThousand 
```

我遇到的问题是该`TotalThousand`字段返回错误的答案。即如果

`ReceivedDenomination.Thousand`是 85 并且`PaidDenomination.Thousand`是 2 然后我得到 2 而不是 83。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:37:00.420

你试过这样做吗？

```
Global numberVar TotalThousand :=0;
Global numberVar RcvdThou := 0;
Global numberVar PdThou := 0;

(if IsNull({ReceivedDenomination.Thousand}) then
     TotalThousand
else
     RcvdThou := ToNumber({ReceivedDenomination.Thousand})
);

(if IsNull({PaidDenomination.Thousand}) then
    TotalThousand
else
     PdThou := ToNumber({PaidDenomination.Thousand});
);
TotalThousand := RcvdThou + PdThou;
TotalThousand; 
```

如果这仍然给您带来问题，请尝试将公式分成多个公式并查看每个字段给您的内容。所以你会得到一个 TotalThousand、RcvdThou、PdThou 和一个 Total forma。TotalThousand 将实例化全局，而 RcvdThou 和 PdThou 将显示 2 个数字，而 Total 将提供数学。

# iphone - UIWebview：动态添加html内容

> ID：12899022
> 
> 赞同：3
> 
> 时间：2012-10-15T15:34:17.780
> 
> 标签：iphone, uiwebview, webview

我正在制作一个应用程序，在其中我从服务器获取文本并将其显示在 UIWebview 中。一段时间后，添加更多文本并通知客户端（iphone）有关附加文本。现在我想将此文本注入我的 UIWebview。

一种方法是更新一些文本文件并重新加载内容。`But I dont want to reload the page.`

另一种方法是使用 javascript 检查本地文件中的更新（这似乎更好）。

有没有已知的更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:51:19.533

如果您想保留所有用户编辑的数据（如果有的话），我相信 javascript 会更好。而且应该比重新加载所有页面更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:54:02.727

如果您从服务器获取数据，为什么不直接使用`JavaScript`并[`AJAX`](http://api.jquery.com/jQuery.ajax/)执行更新页面的请求呢？

这使您可以跳过更新“模板”文件的中间人。只需加载所有数据，[`AJAX`](http://api.jquery.com/jQuery.ajax/)以便始终在页面上拥有最新的数据。

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

# ios - 如何始终显示地图视图注释标注？

> ID：12899028
> 
> 赞同：1
> 
> 时间：2012-10-15T15:34:49.527
> 
> 标签：ios, mkmapview, mapkit

您如何始终显示注释标注，即当您选择地图视图时不隐藏它们？

![注释标注](../Images/29cd3f8efe36485440434fb399d580b2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-31T05:17:02.880

重置注释也将使标注视图状态为真。

```
 [mapView removeAnnotation: currentMarker];
    [mapView addAnnotation:currentMarker]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:54:39.533

`MKAnnotationView`选中AN并将视图的`canShowCallout`属性设置为时，显示标注`YES`。

然后在`MKAnnotationView`取消选择时将其隐藏。这通过点击另一个注释视图或通过在当前选定的注释视图之外点击来实现。

作为`MKMapView`(conforming to `MKMapViewDelegate`) 的代表，您会在选择和取消选择注释视图时被告知，但为时已晚。

如果您不想取消选择注释视图，则应子类`MKAnnotationView`化并覆盖该`setSelected:animated:`方法并停止取消选择注释视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-08T11:47:14.923

谢谢@Zumry Mohammed 这个想法。这个快速解决方案对我有用：

```
func mapView(_ mapView: MKMapView, didDeselect view: MKAnnotationView) {
    guard let ann = view.annotation else {return}
    mapView.removeAnnotation(ann)
    mapView.addAnnotation(ann)
    mapView.selectAnnotation(ann, animated: false)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-25T04:17:40.313

我只是在 viewFor 注释方法上将 isSelected 属性设置为 true ，仅此而已。

```
func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -> MKAnnotationView? {
    if annotation is MKUserLocation {
        return nil
    }

    let annotationV = MKAnnotationView(annotation: annotation, reuseIdentifier: nil)
    annotationV.image = UIImage(named: "ZeusSurveyMarkerTaskIcon", in: Bundle(for: ZsurveysGeofenceLocationMapView.self), compatibleWith: nil)
    annotationV.canShowCallout = true
    annotationV.isSelected = true

    return annotationV
} 
```

# html - css 方块 - 调整大小

> ID：12899031
> 
> 赞同：-5
> 
> 时间：2012-10-15T15:34:59.133
> 
> 标签：html, css

我想建立一个有 6 个正方形的网站。第一行有 3 个，第二行有 3 个方格 2。如果我调整窗口大小，这个方格必须更大，并且始终适应 100%。

正方形必须[像这样](http://www.bildupload.com/index.php?image=21f940ea9e7d88dcf7d3779c307524c3)显示。

我试过这个：

```
.sq {
    float:left;
    display:block;
    height:96px;
    width:33%;
    background-color:#007CC1;
    margin:0 2px 2px 0;
}

<a class="sq" href="#"></a>
<a class="sq" href="#"></a>
<a class="sq" href="#"></a>
<div class="clear"></div>
<a class="sq" href="#"></a>
<a class="sq" href="#"></a>
<a class="sq" href="#"></a>
<div class="clear"></div> 
```

但我不知道如何计算高度。

我该怎么做？你有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:45:41.260

像这样可能是
您可能遇到的唯一问题是将它们设置为方形，因为宽度是一个变量，您无法在 CSS 中将其设置为相同。可能需要一些 jQuery 来强制执行。像这样的东西......未经测试：

```
$('.box').each(function(){
$(this).height($(this).width());
});
```

```
#container {width: 90%;}
.box {float: left; display: block; background: #c00; color: #fff; text-align: center; width: 30%; margin: 0 5% 5% 0;}
.box.last {margin: 0 0 5% 0;}
.clear {clear: both;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="container">
<!-- row 1 -->
<div class="box">box 1</div>
<div class="box">box 2</div>
<div class="box last">box 3</div>

<div class="clear"></div>
<!-- row 2 -->
<div class="box">box 4</div>
<div class="box">box 5</div>
<div class="box last">box 6</div>
</div>
```

# android - Android：线程睡眠后尝试编辑按钮文本时出错

> ID：12899034
> 
> 赞同：-1
> 
> 时间：2012-10-15T15:35:04.363
> 
> 标签：android, textview, android-ui

（在 Eclipse 中编程 Android） 我正在尝试设置延迟更改按钮中的文本。只有在延迟并且需要更改文本后，我才会收到错误。这是没有while循环的简化代码：

```
final Button button_target = (Button) findViewById(R.id.button_target);        
    Thread textChange = new Thread(new Runnable() { 
        public void run(){
            button_target.setText("fog");
            try{
                Thread.sleep(3000);
            }catch(InterruptedException e){}                
        }
    });
    textChange.start(); 
```

现在这里是在睡眠*后*需要更改按钮上的文本的代码，这会导致错误并退出（强制）：

```
 final Button button_target = (Button) findViewById(R.id.button_target);        
    Thread textChange = new Thread(new Runnable() { 
        public void run(){
            button_target.setText("cat");
            try{
                Thread.sleep(3000);
            }catch(InterruptedException e){}                
            button_target.setText("dog");
        }
    });
    textChange.start(); 
```

我在做什么导致错误？我应该采取另一种方法来调用线程的睡眠或延迟，以便可以执行文本更改操作？

（实际代码有一个while循环，但我相信这种形式会突出显示错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:37:54.583

您不能在 setText() 之类的线程上更改 UI 内容，必须在 UIThread 上完成。有关更多信息，请参见 AsyncTask：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

> 添加更多信息

您可以将 THREAD_POOL_EXECUTOR 与 AsyncTask 一起使用，以了解您使用的 Android 版本，如下所示：

```
AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>() {

    @Override
    protected Void doInBackground(Void... voids) {

        try{
            Thread.sleep(3000);
            }catch(InterruptedException e){} 
        }
    }

    @Override
    protected void onPostExecute(Void result) {
        button_target.setText("dog");
    }

};

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    task.execute();
} 
```

# c++ - OpenCV 未初始化 USB 摄像头

> ID：12899039
> 
> 赞同：5
> 
> 时间：2012-10-15T15:35:30.933
> 
> 标签：c++, video, opencv

我正在尝试使用 OpenCV 从 USB 摄像头捕获视频。

```
#include <highgui.h>
#include <iostream>

using namespace std;
using namespace cv;

int main()
{
    VideoCapture cap (-1);
    if (!cap.isOpened())
         cout << "Cam initialize failed";
    else cout << "Cam initialized";

    return 0;
} 
```

无法初始化相机。cap.isOpened() 返回零。

相同的程序，具有相同版本的 OpenCV 和相同的 USB 摄像头，在我朋友的机器上正确运行。我正在运行[Fedora](http://en.wikipedia.org/wiki/Fedora_%28operating_system%29) 16。相机在另一个应用程序中正常工作（例如[Cheese](http://blekko.com/ws/?q=site%3Aen.wikipedia.org%20Cheese%20software)）。

我在 Google 和 Stack Overflow 中进行了一些搜索。但没有有用的帮助。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T19:41:49.653

尝试以 root 身份运行您的程序。您可能没有权限，opencv 不会告诉您这是否是 cap.isOpened() 失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:18:01.703

这里的[手册](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-videocapture)说`VideoCapture::VideoCapture(int device)`接受

> 设备：打开的视频捕获设备的ID（即相机索引）。如果连接了单个摄像头，则只需传递 0。

如果您的系统中有 1 个摄像头，我认为您应该将其更改为`-1`。`0`

# css - 在已经制作的内容之间索引图像

> ID：12899040
> 
> 赞同：0
> 
> 时间：2012-10-15T15:35:32.847
> 
> 标签：css, html, z-index

我有一个编码如下的预代码页：

```
 <div id="linearBg">
            <div id="wrapper">
                    <div class="logo"></div>
                    <div class="navigation"></div>
                    <div class="video"></div> 
                    <div class="content"></div>
            </div>
    </div> 
```

其中linearBg是渐变背景，网站的背板。Wrapper 是内部 div 的容器，其余的都是面向内容的。

所以我已经用样式和各种方式实现了这个，但我想添加：

```
<div class="watermark"></div> 
```

在内容和视频 div 的下方/后面，有点像反向水印，

我试过 z-indexing 但我不是专家。你能指导我做这件事吗？

* * *

[http://jsfiddle.net/nEWCP](http://jsfiddle.net/nEWCP)

我所需要的只是获取视频和内容 div 背后的水印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:59:19.423

像这样的东西？ [http://jsfiddle.net/yXTYM/3/](http://jsfiddle.net/yXTYM/3/)

诀窍是：

*   `position: relative`在视频和内容 div
*   `position: absolute`在水印 div 上并且没有定位，因此它从前一个元素（导航）结束的地方开始
*   `height: 100%`在水印上，使其跨越到包装纸的底部
*   `overflow: hidden`在包含的 div 上，以便水印不会延伸到其下方

让我知道这是否是您的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:58:43.910

[http://jsfiddle.net/82saE/](http://jsfiddle.net/82saE/)

我想我有你所追求的——一个反映尺寸的包装元素`linearBg`——给你一个带有重复图像的渐变背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T19:59:32.933

根据您的描述，我认为您甚至不需要新的 HTML 元素。如果您想要如您所描述的“反向水印”，听起来您想要内容和视频元素背后的不同背景。与渐变不同的东西。

实际上，您需要做的就是在 CSS 中定义一个类，在需要时添加水印。

这是[一个基本的例子](http://jsfiddle.net/charlieholder/MpuzY/)。橙色仅在视频和内容后面模拟您的水印。

```
.watermark { background: url('/path/to/watermark.png'); }

<div id="linearBg">
    <div id="wrapper">
        <div class="logo"></div>
        <div class="navigation"></div>
        <div class="video watermark"></div> 
        <div class="content watermark"></div>
    </div>
</div> 
```

# php - PHP; 编码和解码函数产生相同的输出

> ID：12899042
> 
> 赞同：0
> 
> 时间：2012-10-15T15:35:38.610
> 
> 标签：php, input-sanitization

清理一些用户输入；

```
function html_mysql_sanitise($data) {
  if(get_magic_quotes_gpc()) {
    $data = stripslashes($data);
  }
  $data = htmlentities($data, ENT_QUOTES);
  $data = htmlspecialchars($data, ENT_QUOTES);
  return mysql_real_escape_string($data);
}

$_POST['data'] = html_mysql_sanitise($_POST['data']);

echo $_POST['data'];
echo html_entity_decode(htmlspecialchars_decode($_POST['data']));
echo html_entity_decode($_POST['data'], ENT_NOQUOTES);
echo htmlspecialchars_decode($_POST['data'], ENT_NOQUOTES); 
```

$_POST['data'] 设置为；

```
test<d#'!;ta> 
```

这个的输出是；

```
test&lt;d#&#039;!;ta&gt;
test
test<d#'!;ta>
test<d#'!;ta> 
```

为什么最后两个产生相同的结果，而第二个是发布数据的一部分？由于最后两个似乎产生了预期的结果，我应该使用哪个？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:43:01.270

为什么要重新发明轮子......使用这个：

[http://htmlpurifier.org/docs](http://htmlpurifier.org/docs)

或这个：

[http://www.bioinformatics.org/phplabware/internal_utilities/htmLawed/index.php](http://www.bioinformatics.org/phplabware/internal_utilities/htmLawed/index.php)

两者都擅长你想做的事情。

# javascript - 在窗口调整大小时滚动到最左边的元素 - 如何？

> ID：12899043
> 
> 赞同：2
> 
> 时间：2012-10-15T15:35:39.577
> 
> 标签：javascript, jquery, html, math, window

我是一个 jQuery 新手，最近才开始。

我正在使用[http://flesler.blogspot.com.au/2007/10/jqueryscrollto.html（Ariel](http://flesler.blogspot.com.au/2007/10/jqueryscrollto.html) Flesler 的 scrollTo 插件）

这是一个水平滚动的网站。

当窗口调整大小时，我试图滚动到最靠近窗口左侧的元素。

我似乎只能让它滚动到数组中的第一个元素，所以当我调整窗口大小时，无论窗口在哪里，窗口都会滚动到流中的第一个“.example”。

**更新：**我取得了一些进展，我添加了一个新变量来计算滚动的距离。现在我似乎需要一种方法来找出循环的最低值是在我的“if”语句中使用的，因为它似乎想从一个元素跳到下一个元素或根本没有。

这`"Uncaught TypeError: Cannot read property 'slice' of undefined`是由于 scrollTo 的值为负数（您不能滚动到 0 以下，因为 0 是文档的开头）所以为了解决这个问题，我添加了到目前为止已滚动多少的值，然后添加了任何值element_position 必须正确计算。

**更新 2：**我的数学有问题，问题已更新以反映解决方案。现在唯一的问题是它是一个流畅的布局，所以在我的 if 语句中使用像“70”这样的固定值往往会在某个点之后破坏它。

jQuery

```
$(document).ready(function(){
   $(window).resize(function() {
      $('.example').each(function(index) {
          var example = $(this);
          var scroll_position = $('#container').scrollLeft();
      var element_position = example.offset().left;

          if (element_position < 70 && position > -70) {
              $('#container').scrollTo(scroll_position + element_position);
          }
      });
   });
}); 
```

HTML

```
<div id="container">
   <div class="example"></div>
   <div class="example"></div>
   <div class="example"></div>
   <div class="example"></div>
   <div class="example"></div>
   <div class="example"></div>
</div> 
```

我还收到以下错误

```
"Uncaught TypeError: Cannot read property 'slice' of undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:04:46.263

试试这个：

```
$(document).ready(function(){
   $(window).resize(function() {
      var scroll_position = $('#container').scrollLeft();
      $('.example').each(function() {
          var example = $(this);
          var left = example.offset().left;
          var right = left + example.width();

          if (right > 0) {
              $('#container').scrollTo(scroll_position + left);
              return false;
          }
      });
   });
});​ 
```

检查选定元素中第一个在视口中有右边框的元素。

# perl - XML::Simple：解析嵌套散列/数组

> ID：12899044
> 
> 赞同：0
> 
> 时间：2012-10-15T15:35:39.807
> 
> 标签：perl

我正在尝试解析 XML 文件。Xml 文件可以在@http://pastebin.com/fvuwbrh9[找到](http://pastebin.com/fvuwbrh9)。我已将此 xml 文件保存为`packages.xml`.

**目标**：列出所有在 XML 中被`<packagereq>`标记包围的名称（我指的是在转储器输出中`packagereq`属于的名称）。`group`

我写了下面的脚本称为`rpm.pl`：

```
#!/usr/bin/perl -w

use strict;
use XML::Simple;
use Data::Dumper;

my $ref = XMLin ('packages.xml');
#print Dumper ($ref);

foreach my $a ( keys %{ $ref->{group} } )
{
    if ( exists $ref->{group}->{$a}->{packagelist} )
    {
        foreach my $b ( @{ $ref->{group}->{$a}->{packagelist}->{packagereq} } )
        {
            print $b->{content}."\n";  ### <<< referring the Dumper out put
        }   
    }
} 
```

现在我的脚本进行了一半并打印了包名称，但随后它因以下错误而终止：

```
Not an ARRAY reference at rpm.pl line 29. 
```

出现上述错误后，脚本不会处理 XML 文件的其余部分并终止。

上面的错误让我相信某处的值`$ref->{group}->{$a}->{packagelist}->{packagereq}`不是一个数组引用。

我已经尽可能小心地通过 XML 文件（或 Dumper 输出），但发现它`packagereq`总是指向一个 ARRAY 引用，除非我当然忽略了某些东西，但我对此表示怀疑。

你能否提供一些关于它为什么抱怨的意见`Not an ARRAY ref`。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:00:55.350

XML::Simple，最复杂的 XML 解析器。添加以下内容：

```
my $ref = XMLin ('packages.xml',
   KeyAttr    => [qw( id )],
   ForceArray => [qw( group packagereq ignoredep )],
); 
```

# tfs - TFS 工作项表

> ID：12899045
> 
> 赞同：0
> 
> 时间：2012-10-15T15:35:42.947
> 
> 标签：tfs

有谁知道这个字段 [Not a Field] 在 TFS WorkItemsAre 表中是什么意思？我试图理解架构，这对我来说没有任何意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:08:02.253

不支持访问操作数据存储，因为在每个版本中我们都会进行重大更改。您宁愿转移到 TFS API 或 TFS Warehouse 数据库来获取您感兴趣的数据。

你追求的是什么？

# javascript - 如何使用 Javascript 访问另一个页面的元素？

> ID：12899047
> 
> 赞同：19
> 
> 时间：2012-10-15T15:35:46.627
> 
> 标签：javascript, html, css

假设我有一个页面`a.html`，并且想要使用`<p id="name">NAME</p>`另一个页面的 id 元素来检索文本元素的文本`b.html`。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-15T15:38:55.927

使用 jQuery 的[`get`方法](http://api.jquery.com/jQuery.get/)，很简单：

```
$.get('a.html', null, function(text){
    alert($(text).find('#name'));
}); 
```

原始 XHR 请求（*按大众需求*）：

```
var request = new XMLHttpRequest();

request.addEventListener("load", function(evt){
    console.log(evt);
}, false);

request.open('GET', 'a.html', true),
request.send(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:46:28.773

你需要：

1.  获取页面的内容（您暗示[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)不会成为问题，所以我不会讨论如何解决这个问题）。
2.  将其解析为 HTML DOM
3.  提取您关心的 DOM 部分
4.  用那个 DOM 做点什么

这是相当多的工作。[jQuery](http://jquery.com/)将为您完成大部分工作：

```
jQuery('#element_to_load_content_into').load('a.html#name'); // Note use of fragment identifier 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T15:40:30.723

如果页面在同一个域中，您可以使用 jQuery.ajax() 或 jQuery.load()

```
$.ajax({
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

# c - 使用 C99 和 C11 时的效率问题。

> ID：12899048
> 
> 赞同：0
> 
> 时间：2012-10-15T15:35:47.667
> 
> 标签：c, performance, visual-c++, c99

前几天，我正在将一个用 C99 标准编写的程序转换为 C11。基本上，动机是将代码与 MSVC 一起使用，但它是用 Linux 编写的，主要是使用默认的 GCC 行为编译的。在代码转换过程中，我发现不能在任何语句之后对函数的变量进行 decalre，即必须在函数顶部声明它们。

但是我的问题是，应该在使用附近声明变量以最大化缓存命中率，这是否违反了有效的编程规则？例如，在 200 LOC 的大型函数中，我想在函数末尾使用一些大型静态查找数组。不会在使用导致更多缓存命中之前声明和初始化它吗？还是我简单地错过了 C11 C 语言标准的一些基本点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:46:07.260

您似乎对正在编译程序的标准版本有些困惑。AFAIK，MSVC 不支持任何最新的 C 标准。

但是要谈到您问题的核心，不，这不是效率问题。只要程序的可观察行为没有改变，编译器就可以根据自己的喜好对语句重新排序。因此，现代编译器总是会在首次使用之前尽可能晚地触及新变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:46:07.900

变量声明出现的位置对缓存行为没有影响。只是有一个声明不会触及记忆。

但是，您可能需要将初始化分离到一个单独的分配中，以确保您没有初始化程序导致在函数开始处（附近）进行内存访问。

# hadoop - 使用 Hadoop 可视化大型数据集

> ID：12899049
> 
> 赞同：5
> 
> 时间：2012-10-15T15:35:55.627
> 
> 标签：hadoop, plot, data-visualization, bigdata

我正在寻找一个框架、框架组合、最佳实践或有关使用 Hadoop 可视化大型数据集的教程。

我**不是**在寻找一个框架来可视化在 Hadoop 上运行 Hadoop 作业或管理磁盘空间的机制。我正在寻找一种方法或指南，以使用图形和图表等可视化 HDFS 中包含的数据。

例如，假设我有一组数据点存储在 HDFS 的多个文件中，我想显示数据的[直方图](http://en.wikipedia.org/wiki/Histogram)。我唯一的选择是编写自定义映射/减少作业，该作业将尝试找出哪些点属于哪个存储桶，将总数写入文件，然后使用绘图库将其可视化？

我是否需要推出自定义解决方案，或者还有其他人在做这种事情吗？我正在尝试在网上查找，但我无法找到与此直接相关的内容。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:06:52.277

[我们在Datameer](http://www.datameer.com/product/data-visualization.html)做类似的事情。这些文件需要更多的处理步骤才能实现我们的可视化，但我们在 Hadoop 上本地运行，因此这些文件不会离我们很远。

# jsf - 如何在其中添加滚动选项

> ID：12899050
> 
> 赞同：0
> 
> 时间：2012-10-15T15:35:57.530
> 
> 标签：jsf, jsf-2, primefaces

我有一个对话框，其中包含

```
<p:dialog id="sqlDialog" 
          widgetVar="sqlWidgetVar"
          header="SQL" 
          width="800"
          position="center"
          minimizable="true"
          maximizable="true"
          appendToBody="true"
          dynamic="true">
    <h:outputText id="sql" 
                  escape="false" 
                  value="#{bean.sql}" 
                  style="color: green"/>
</p:dialog> 
```

由于文本很长，我需要添加一个滚动选项

我该怎么做 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:41:08.733

使用 CSS 使其成为具有固定尺寸和溢出的块元素。

```
<h:outputText ... styleClass="sqlDialogText" /> 
```

和

```
.sqlDialogText {
    display: block;
    width: 600px; /* Optional, depends otherwise on parent. */
    height: 300px;
    overflow: auto;
    color: green;
} 
```

或者，只需给对话框一个固定的高度。

```
<p:dialog ... height="300"> 
```

请注意，这与 JSF 无关。它只是一个 HTML/CSS/JS 代码生成器。`<h:outputText>`生成一个 HTML`<span>`元素。您只需要相应地更改 CSS 即可获得外观。

# codeigniter - 使用 CodeIgniter 从 WYSIWYG 编辑器存储和发送数据库中的 HTML

> ID：12899051
> 
> 赞同：0
> 
> 时间：2012-10-15T15:36:08.453
> 
> 标签：codeigniter, encoding, xss, content-type

我正在处理一个问题。我有一个所见即所得的编辑器将其数据保存到我的数据库中的列中。不幸的是，数据正在从标签中删除，因此看起来与此类似：

```
 'Hello&lt;br&gt;&lt;br&gt;' 
```

尽管再次将这些数据初始化到所见即所得编辑器中没有问题，但是当我通过电子邮件发送数据时，它会将标签识别为文本而不是 HTML。

这就是我发送的方式：

```
$this->load->library('email');
$this->email->initialize($config);
...
$this->email->send(); 
```

收到电子邮件时，就好像客户端忽略了 HTML 标记。

收到的电子邮件中的内容类型

```
Content-Type:   multipart/alternative; boundary=B_ALT_507c2c67f1aa7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:06:39.230

[在发送之前，通过html_entity_decode()](http://php.net/manual/en/function.html-entity-decode.php)运行电子邮件的正文部分

```
$body = html_entity_decode($body); 
```

它将`&lt` `&gt`用它们的适用字符（如`<` `>`.

# javascript - 使用canvg将svg绘制到画布上

> ID：12899053
> 
> 赞同：4
> 
> 时间：2012-10-15T15:36:26.577
> 
> 标签：javascript, canvas, svg, canvg

我使用 canvg 在画布中设置 svg 文件。当我设置 svg url 时一切正常：

```
var canvas = doc.getCanvas(num);
var context = canvas.getContext('2d');

context.drawSvg("http://localhost:8084/manual.svg", 0, 0, width, height); 
```

但是当我尝试写作时（它不起作用）：

```
context.drawSvg("data:image/svg+xml,"+svg, 0, 0, width, height); 
```

其中变量 svg 获取 manual.svg 内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:17:54.857

```
img.src = "data:image/svg+xml;base64,"+btoa(svgContent);
context.drawImage(img, 0, 0, width, height); 
```

这是解决问题的一种变体。

# shopping-cart - 用于 B2B 网站的 Oepncart 购物车

> ID：12899054
> 
> 赞同：1
> 
> 时间：2012-10-15T15:36:26.717
> 
> 标签：shopping-cart, opencart

我对shopingcart 很陌生，对Opencart 印象深刻。深入了解后，有没有办法让注册的用户添加自己的产品进行销售？实际上，它变成了像 alibaba.com 或 ebay 这样的 B2B 网站。

如果我没有以正确的方式处理这个问题，请随时纠正我。我也愿意接受关于我应该使用哪个购物车的其他建议......只要它不是 Magento。呵呵

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:12:34.500

这需要大量的改装，你肯定不会免费找到这个解决方案。我个人认为这个平台不太适合这个，但当然可以，它是一个简单的 MVC 平台。

# linux - 内核如何通知用户空间程序发生中断

> ID：12899055
> 
> 赞同：8
> 
> 时间：2012-10-15T15:36:35.753
> 
> 标签：linux, interrupt

我正在编写一个用户空间程序和一个内核空间设备驱动程序。

目标：一旦发生中断，用户空间程序需要快速做一些事情。

我的幼稚方法：用户空间程序使用ioctl调用wait_event_interruptible()，内核ISR调用wake_up_interruptible()唤醒用户空间程序。事实证明，从中断到用户空间需要太多时间。

有没有更好的办法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-09T15:27:41.783

这里有一个类似的问题：

[从内核模块通知 gpio 中断到用户空间](https://stackoverflow.com/questions/19820177/notify-gpio-interrupt-to-user-space-from-a-kernel-module/19825441#19825441)

请检查上述问题。但是，我可以提供我在那里建议的方法。

您可以从内核 API 向用户空间线程发送信号，这可以帮助您运行非阻塞：

```
send_sig(int sig, struct task_struct *p, int priv); 
```

您需要了解内核中用户线程的 pid。您可以通过 /proc 写入用户进程的 pid 然后内核读取 pid 来解决这个问题。通过这种安排，当有中断时，内核可以向用户线程发送信号。如果您的进程重新启动或被杀死，您将不得不通过 proc 更新 pid。仅用于状态通知，您可以使用此方法；但是，如果您希望将数据与状态一起传输，则 Netlink 或 char 驱动机制是个好方法。

# linux - 为性能标准编写 bash 代码

> ID：12899056
> 
> 赞同：0
> 
> 时间：2012-10-15T15:36:41.287
> 
> 标签：linux, bash, shell, iptables, netstat

是否有更好的方法来重写此代码以增强性能？

如果您要获得一堆 IP，系统似乎会挂起。

```
TMP_PREFIX='/tmp/synd'
TMP_FILE="mktemp $TMP_PREFIX.XXXXXXXX"
BANNED_IP_MAIL=`$TMP_FILE`
BANNED_IP_LIST=`$TMP_FILE`
echo "Banned the following ip addresses on `date`" > $BANNED_IP_MAIL
echo >> $BANNED_IP_MAIL
BAD_IP_LIST=`$TMP_FILE`
netstat -ntu | grep SYN_RECV | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -nr > $BAD_IP_LIST
cat $BAD_IP_LIST
if [ $KILL -eq 1 ]; then
    IP_BAN_NOW=0
    while read line; do
        CURR_LINE_CONN=$(echo $line | cut -d" " -f1)
        CURR_LINE_IP=$(echo $line | cut -d" " -f2)
        if [ $CURR_LINE_CONN -lt $NO_OF_CONNECTIONS ]; then
            break
        fi
        IGNORE_BAN=`grep -c $CURR_LINE_IP $IGNORE_IP_LIST`
        if [ $IGNORE_BAN -ge 1 ]; then
            continue
        fi
        IP_BAN_NOW=1
        echo "$CURR_LINE_IP with $CURR_LINE_CONN SYN_RECV connections" >> $BANNED_IP_MAIL
        echo $CURR_LINE_IP >> $BANNED_IP_LIST
        echo $CURR_LINE_IP >> $IGNORE_IP_LIST
        if [ $CSF_BAN -eq 1 ]; then
            $CSF -d $CURR_LINE_IP
        else
            $IPT -I INPUT -s $CURR_LINE_IP -j DROP
        fi
    done < $BAD_IP_LIST
    if [ $IP_BAN_NOW -eq 1 ]; then
        dt=`date`
                hn=`hostname`
        if [ $EMAIL_TO != "" ]; then
            cat $BANNED_IP_MAIL | mail -s "IP addresses banned on $dt $hn" $EMAIL_TO
        fi
    fi
fi
rm -f $TMP_PREFIX.* 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T16:50:57.200

当然，有很多方法可以改进，但你应该尝试找出真正的瓶颈在哪里。（很可能是 iptables，在这种情况下，您可能想尝试在一次调用中完成所有表更新，而不是一次一次。但我只是在猜测。）

这里有一些建议；我没有通读一遍：

```
netstat -ntu | grep SYN_RECV | awk '{print $5}' | cut -d: -f1 |
sort | uniq -c | sort -nr > $BAD_IP_LIST 
```

如果您只对 SYN_RECV 状态的连接感兴趣，为什么要列出 udp？无论如何，您正在使用三个实用程序（`grep`和`awk`）`cut`来执行一项简单的面向行的操作。你不妨一气呵成，例如 awk：

```
awk '$6 == "SYN_RECV" {print substr($5, 1, index($5, ":") - 1)}' 
```

事实上，你也可以在 awk 中进行唯一化和计数：

```
awk '$6 == "SYN_RECV" {++ip[substr($5, 1, index($5, ":") - 1)]} END{for (i in ip) print ip[i], i}' 
```

编辑：您还可以在此处按所需计数进行过滤：

```
awk '$6 == "SYN_RECV" {++ip[substr($5, 1, index($5, ":") - 1)]}
     END              {for (i in ip) if (ip[i] >= '$NO_OF_CONNECTIONS') print ip[i], i}' 
```

现在您只需要输出 ip 地址，因为您不再需要在 bash 脚本中进行过滤。我不知道这是否比通过排序和 uniq 再排序更快，但很可能是这样。

```
while read line; do
    CURR_LINE_CONN=$(echo $line | cut -d" " -f1)
    CURR_LINE_IP=$(echo $line | cut -d" " -f2)
    if [ $CURR_LINE_CONN -lt $NO_OF_CONNECTIONS ]; then
        break
    fi 
```

您想从标准输入读取两个字段。你为什么不这样做：

```
while read CURR_LINE_CONN CURR_LINE_IP IGNORED &&
      ((CURR_LINE_CONN >= NO_OF_CONNECTIONS)); do 
```

这节省了两个子外壳和两个剪切调用。（read 内置的 IGNORED 只是妄想症，因为 awk 只会输出两个字段。不过，这不是好的妄想症，因为它会默默地忽略错误。）

编辑：如上所述，您也可以在这里摆脱测试。所以它只是：

```
netstat -nt |
awk '$6 == "SYN_RECV" {++ip[substr($5, 1, index($5, ":") - 1)]}
     END { for (i in ip)
             if (ip[i] >= '$NO_OF_CONNECTIONS')
               print ip[i], i}' | tee $BAD_IP_LIST
if ((KILL)); then
  IP_BAN_NOW=0
  while read IP IGNORED; do 
```

下一个：

```
IGNORE_BAN=`grep -c $CURR_LINE_IP $IGNORE_IP_LIST`
    if [ $IGNORE_BAN -ge 1 ]; then
        continue
    fi 
```

`grep -c`让 grep 读取整个输入文件以获取计数；你只想知道ip是否存在。你想要`grep -q`：

```
if $(grep -q -F -x $CURR_LINE_IP $IGNORE_IP_LIST); then continue; fi 
```

(`-F`告诉 grep 将模式解释为字符串而不是正则表达式，这是您想要的，因为否则`.`是通配符。`-x`告诉 grep 匹配整行。一个 ip 可能是前缀或后缀甚至是中缀另一个，这会导致错误匹配。-F 和 -x 的组合也可能会快一点，因为 grep 然后可以对匹配进行相当多的优化。）

可能还有更多。这就是我所得到的。

# c - GDB 中优化的值：gdb 可以自动处理解码吗？

> ID：12899059
> 
> 赞同：0
> 
> 时间：2012-10-15T15:36:51.393
> 
> 标签：c, debugging, compiler-construction, gdb, compiler-optimization

1）首先我想知道，如何解码这些变量？

我知道这个问题的解决方案，删除优化标志，让它不稳定，我不想做所有这些。是否有任何解决方案可以在不重新编译源代码的情况下完成？问题是每当我进行任何更改时，编译都需要很长时间，所以我不想使用不同的优化标志来编译它，我也尝试过一次更改优化标志，但它只是因为编译标志的变化而崩溃，原因我想不通。

当我执行“info reg”时，我也无法找到有关理解各种寄存器的文档。我期待一些变量（我知道它的值，它会是什么）但是 info reg 向我展示了所有不同的值。我在这里遗漏了一些东西。我正在研究的架构是 x86_64

2）我想知道gdb在解码这些寄存器变量时面临哪些限制？或者这个问题已经有人解决了。我在很多地方读过汇编代码，您可以找出该寄存器中的变量。如果那是真的，为什么它不能被构建到 gdb 中。如果有解决此问题的方法，请指向相关页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:58:57.223

如果您没有源代码并使用调试/无优化（即第 3 方代码）进行编译。您能做的最好的事情就是反汇编代码并尝试确定变量的存储方式。

在 gdb 中，该`disassemble`指令将转储给定函数的程序集：

```
disassemble <function name> 
```

或者如果符号已被剥离

```
disassemble <address> 
```

`<address>`函数的入口点在哪里。

您可能还必须检查调用函数的位置以确定使用的调用约定。

一旦你弄清楚了函数的结构和变量布局（堆栈变量或寄存器），在调试时，你可以通过转储寄存器或内存位置的内容来单步执行每条指令`nexti`并`stepi`观察变量中的值如何变化.

我自己不知道任何好的入门或教程，但[这个问题及其答案](https://stackoverflow.com/q/254963/416627)可能对你有用。就我个人而言，我发现自己最常参考英特尔手册。可以从英特尔网站以 pdf 格式下载它们。我暂时没有方便的链接。如果其他人这样做，也许他们可以更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:50:01.743

您是否看过编译未优化的代码？

`gcc`在您的选择中尝试其中一种：

```
-Og
    Optimize debugging experience. -Og enables optimizations that do not interfere with debugging. It should be the optimization level of choice for the standard edit-compile-debug cycle, offering a reasonable level of optimization while maintaining fast compilation and a good debugging experience. 

-O0
    Reduce compilation time and make debugging produce the expected results. This is the default. 
```

# node.js - 仅当 Node.js 中不存在文件时才创建文件

> ID：12899061
> 
> 赞同：96
> 
> 时间：2012-10-15T15:36:57.357
> 
> 标签：node.js

我们有一个要写入文件的缓冲区。如果文件已经存在，我们需要增加一个索引，然后再试一次。有没有办法只在文件不存在的情况下创建文件，或者我应该只统计文件，直到出现错误以找到一个不存在的文件？

例如，我有文件`a_1.jpg`和`a_2.jpg`. 我希望我的方法尝试创建`a_1.jpg`and `a_2.jpg`，然后失败，最后成功创建`a_3.jpg`.

理想的方法如下所示：

```
fs.writeFile(path, data, { overwrite: false }, function (err) {
  if (err) throw err;
  console.log('It\'s saved!');
}); 
```

或像这样：

```
fs.createWriteStream(path, { overwrite: false }); 
```

节点`fs`库中是否存在类似的东西？

*编辑*：我的问题不是是否有一个单独的函数来检查是否存在。就是这样：如果文件不存在，有没有办法在单个文件系统调用中创建文件？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2015-08-02T22:36:24.093

正如您的直觉正确猜测的那样，使用一对`exists / writeFile`调用的幼稚解决方案是错误的。异步代码以不可预知的方式运行。在特定情况下，它是

*   有文件`a.txt`吗？- 不。
*   （文件`a.txt`由另一个程序创建）
*   `a.txt`如果可能，请写信。- 好的。

但是，是的，我们可以在一个电话中做到这一点。我们正在使用文件系统，因此最好阅读开发人员手册`fs`。嘿，[这是](https://nodejs.org/api/fs.html#fs_fs_open_path_flags_mode_callback)一个有趣的部分。

> 'w' - 打开文件进行写入。该文件被创建（如果它不存在）或被截断（如果它存在）。
> 
> 'wx' - 类似于 'w' 但如果路径存在则失败。

所以我们所要做的就是添加`wx`到`fs.open`调用中。但是，嘿，我们不喜欢`fopen`-like IO。让我们再读`fs.writeFile`一点。

> fs.readFile(filename[, options], callback)#
> 
> 文件名字符串
> 
> 选项对象
> 
> > 编码字符串 | 空默认 = 空
> > 
> > 标志字符串默认 = 'r'
> 
> 回调函数

这`options.flag`看起来很有希望。所以我们尝试

```
fs.writeFile(path, data, { flag: 'wx' }, function (err) {
    if (err) throw err;
    console.log("It's saved!");
}); 
```

它非常适合单次写入。我想如果你尝试用它来解决你的任务，这段代码会以一些更奇怪的方式失败。您有一个原子“检查是否`a_#.jpg`存在，如果它是空的就写在那里”操作，但是所有其他`fs`状态都没有锁定，并且`a_1.jpg`文件可能会在您已经检查时自发消失`a_5.jpg`。大多数[*](https://en.wikipedia.org/wiki/Transactional_NTFS)文件系统都不是[ACID](https://en.wikipedia.org/wiki/ACID)数据库，而且您至少能够执行一些原子操作这一事实非常神奇。代码很可能`wx`无法在某些平台上运行。所以为了你的理智，*最后使用数据库*。

### 更多关于苦难的信息

想象一下，我们正在编写类似的东西[`memoize-fs`](https://www.npmjs.com/package/memoize-fs)来缓存对文件系统的函数调用结果，以节省我们一些网络/cpu 时间。如果文件存在，我们可以打开文件进行读取，如果不存在，我们可以在一次调用中打开文件吗？让我们来看看这些旗帜。经过一段时间的心理练习，我们可以看到它`a+`做了我们想要的：如果文件不存在，它会创建一个并打开它以进行读取和写入，如果文件存在，它会在不清除文件的情况下这样做（`w+`就像）。但是现在我们既不能在 中使用它`(smth)File`，也不能在`create(Smth)Stream`函数中使用它。这似乎是一个缺失的功能。

因此，请随意将其作为功能请求（甚至是错误）提交给 Node.js github，因为缺少原子异步文件系统 API 是 Node.js 的一个缺点。虽然[不要指望](https://github.com/joyent/node/issues/7593)很快就会发生变化。

编辑。我想链接到[Linus](https://lwn.net/Articles/326505/)和[Dan Luu](https://danluu.com/file-consistency/)的文章，内容是关于为什么你不想对你的`fs`电话做任何聪明的事情，因为这种说法大多不是基于任何东西。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2017-06-28T14:31:23.507

使用该`a`选项怎么样？

根据[文档](https://nodejs.org/api/fs.html#fs_fs_open_path_flags_mode_callback)：

> 'a+' - 打开文件进行读取和附加。如果文件不存在，则创建该文件。

它似乎与`createWriteStream`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-12T17:19:22.840

***不再推荐这种方法。fs.exists 已弃用。看评论。***

以下是一些选项：

1）有**2个“fs”电话**。第一个是“ **fs.exists** ”调用，第二个是“ **fs.write** / read 等”

```
//checks if the file exists. 
//If it does, it just calls back.
//If it doesn't, then the file is created.
function checkForFile(fileName,callback)
{
    fs.exists(fileName, function (exists) {
        if(exists)
        {
            callback();
        }else
        {
            fs.writeFile(fileName, {flag: 'wx'}, function (err, data) 
            { 
                callback();
            })
        }
    });
}

function writeToFile()
{
    checkForFile("file.dat",function()
    {
       //It is now safe to write/read to file.dat
       fs.readFile("file.dat", function (err,data) 
       {
          //do stuff
       });
    });
} 
```

2）或者先**创建一个空文件**：

- - 同步：

```
//If you want to force the file to be empty then you want to use the 'w' flag:

var fd = fs.openSync(filepath, 'w');

//That will truncate the file if it exists and create it if it doesn't.

//Wrap it in an fs.closeSync call if you don't need the file descriptor it returns.

fs.closeSync(fs.openSync(filepath, 'w')); 
```

--- 异步：

```
var fs = require("fs");
fs.open(path, "wx", function (err, fd) {
    // handle error
    fs.close(fd, function (err) {
        // handle error
    });
}); 
```

3）或使用“**触摸**”：[https ://github.com/isaacs/node-touch](https://github.com/isaacs/node-touch)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-03-28T01:19:04.473

要在单个系统调用中执行此操作，您可以使用`fs-extra`npm 模块。在此之后，将创建文件以及要放置的目录。

```
const fs = require('fs-extra');
const file = '/tmp/this/path/does/not/exist/file.txt'
fs.ensureFile(file, err => {
    console.log(err) // => null
}); 
```

另一种方法是使用[ensureFileSync](https://github.com/jprichardson/node-fs-extra/blob/master/docs/ensureFile-sync.md)，它会做同样的事情但同步。

```
const fs = require('fs-extra');
const file = '/tmp/this/path/does/not/exist/file.txt'
fs.ensureFileSync(file) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-01-14T13:12:24.413

使用`async`/`await`和 Typescript 我会这样做：

```
import * as fs from 'fs'

async function upsertFile(name: string) {
  try {
    // try to read file
    await fs.promises.readFile(name)
  } catch (error) {
    // create empty file, because it wasn't found
    await fs.promises.writeFile(name, '')
  }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-15T18:36:41.030

你可以这样做：

```
function writeFile(i){
    var i = i || 0;
    var fileName = 'a_' + i + '.jpg';
    fs.exists(fileName, function (exists) {
        if(exists){
            writeFile(++i);
        } else {
            fs.writeFile(fileName);
        }
    });
} 
```

# c# - Windows 8 C# - 来自 iPhone 的缩略图

> ID：12899062
> 
> 赞同：1
> 
> 时间：2012-10-15T15:37:06.673
> 
> 标签：c#, iphone, windows-8, microsoft-metro, thumbnails

我正在开发一个用于在 C# 上为 Windows 8 Metro 处理照片的应用程序。现在我面临一个奇怪的问题。

首先，我通过 PickSingleFileAsync 选择文件，然后尝试通过 GetThumbnailAsync 获取缩略图：

```
FileOpenPicker openPicker = new FileOpenPicker ();
openPicker.ViewMode = PickerViewMode.Thumbnail;
openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
openPicker.FileTypeFilter.Add (". jpg");
openPicker.FileTypeFilter.Add (". jpeg");
openPicker.FileTypeFilter.Add (". png");
StorageFile file = await openPicker.PickSingleFileAsync ();
if (file! = null)
{
    BitmapImage bitmapImage = new BitmapImage ();
    var thumb = await file.GetThumbnailAsync (ThumbnailMode.PicturesView, 150, ThumbnailOptions.UseCurrentScale);
    if (thumb! = null) bitmapImage.SetSource (thumb);
} 
```

此代码适用于我的 HDD 上的文件或任何 MTP 设备（经过测试的相机和 Android 平板电脑），但不适用于 iPhone。这部分

```
var thumb = await file.GetThumbnailAsync (ThumbnailMode.PicturesView, 150, ThumbnailOptions.UseCurrentScale); 
```

执行大约 30 秒，并返回 null。

这段代码

```
BitmapImage bitmapImage = new BitmapImage ();
var stream = await file.OpenAsync (FileAccessMode.Read);
if (stream! = null) bitmapImage.SetSource (stream); 
```

但是，这是一张完整的图片，我需要一个缩略图。我试图通过更改图像大小来获得它。

```
public static async Task <InMemoryRandomAccessStream> Resize (StorageFile file, uint height, uint width)
{
    var fileStream = await file.OpenAsync (FileAccessMode.Read);
    BitmapDecoder decoder = await BitmapDecoder.CreateAsync (fileStream);
    InMemoryRandomAccessStream ras = new InMemoryRandomAccessStream ();
    BitmapEncoder enc = await BitmapEncoder.CreateForTranscodingAsync (ras, decoder);
    enc.BitmapTransform.ScaledHeight = height;
    enc.BitmapTransform.ScaledWidth = width;
    await enc.FlushAsync ();
    ras.Seek (0);
    return ras;
} 
```

那里

```
BitmapDecoder decoder = await BitmapDecoder.CreateAsync (fileStream); 
```

代码 0x88982F61 出现异常“无法解码图像”。

FileOpenPicker 也不在 iPhone 上显示缩略图。但是 Metro 的标准照片应用程序可以毫无问题地显示 iPhone 上的所有照片。

这让我想到了两个问题：

1.  有没有人有任何建议来解决这个问题？
2.  也许，有没有从设备中检索所有缩略图的功能？

# php - 通过数据ID在jQuery中点击匹配

> ID：12899063
> 
> 赞同：0
> 
> 时间：2012-10-15T15:37:09.257
> 
> 标签：php, jquery, wordpress

```
 <div class="share-tooltip-wrapper" data-id="<?php echo $post_ID; ?>">
    <div class="share-tooltip">
        <div class="arrow"></div>
        <ul class="share-list">
            <li>
                <a href="http://www.facebook.com/sharer/sharer.php?u=<?php echo urlencode(CURRENT_URL); ?>" target="_blank" class="share-facebook">
                    <span class="icon">Facebook</span>
                </a>
            </li> 
```

你好 - 我正在制作一个 wordpress 网站，该网站的一部分有“分享按钮”，所有这些按钮都有唯一的 id，对应于可分享的帖子。问题出在我的 jquery 代码下面，我正在尝试编写代码，当您单击带有数据 ID 的共享按钮时，该代码基本上会说，然后更改具有相同数据 ID 的节点的 html。所以我可以在按钮上从共享状态转到共享状态。如果我没有一些唯一的 id，那么页面上的所有元素都会更改。

```
var current = jQuery(this).filter("id");
 jQuery("ul").find("[data-id='" + current + "']").on("click", function(event){
        console.log("clicked");

        // jQuery('span.share-text').html('<span class="share-text">Shared</span>');
    }); 
```

非常感谢任何和所有帮助。非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:39:44.770

jquery 方法 find 搜索元素的子元素，但您必须找到具有属性 data-id 的 ul 的父元素，因此请尝试使用最接近的方法在父元素中搜索树。

```
 jQuery("ul").closest("[data-id='" + current + "']").on("click", function(event){
    console.log("clicked");

    // jQuery('span.share-text').html('<span class="share-text">Shared</span>');
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:40:41.170

根据您的 html，data-id 属性适用于 div。

而且您似乎在 ul 中找到了它。

尝试找到最接近的或 ul 的父级，然后尝试。

```
jQuery("ul").closest("[data-id='" + current + "']").on("click", function(event){
    console.log("clicked");

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:56:45.383

你可以简单地做到这一点

```
$(".share-facebook").click(function(){
  // $(this).parent("li").append($("<span>").html("shared").addClass("share-text"));
 // $(this).remove();
});​ 
```

编辑：http: [//jsfiddle.net/NvWVh/24/](http://jsfiddle.net/NvWVh/24/)

# cuda - CUDA SDK 带宽测试的奇怪结果

> ID：12899068
> 
> 赞同：2
> 
> 时间：2012-10-15T15:37:19.273
> 
> 标签：cuda, bandwidth

我有一个受数据移动限制的 CUDA 应用程序（即从主机到设备的大型内存副本，在内核中完成的计算相对较少）。在较旧的 GPU 上，我受计算限制（例如 QUADRO FX 5800），但对于 Fermi 和 Kepler 架构，情况不再如此（对于我的优化代码）。

我刚刚将我的代码移到了 GTX 680，并且对计算性能的提高印象深刻，但对主机和 GPU 之间的带宽似乎已经下降（相对于我的 Fermi M20270）感到困惑。

简而言之，当我运行罐装 SDK 带宽测试时，我在 GTX 680 上获得约 5000 MB/秒，而在 M2070 上获得约 5700 MB/秒。我承认 GTX 只是“一张游戏卡”，但 GTX 680 的规格似乎比 M2070 更令人印象深刻，但总线宽度除外。

来自维基百科：M2070：102.4 GB/秒，GDDR3，512 位总线宽度 GTX 680：192 GB/秒，GDDR5，256 位总线宽度

我正在使用“--wc --memory=pinned”运行预设测试以使用写入组合内存。

我通过此测试获得的改进结果反映在我使用优化的 CUDA 代码获得的结果中。

不幸的是，我不能在同一台机器上运行测试（只能切换显卡），但我已经在旧机器和新机器上尝试了 GTX 680，并得到了相同的“降级”结果（相对于我在 M2070 上得到的结果） ）。

谁能确认他们能够使用 M2070 Quadro 实现比 GTX 680 更高的内存副本吞吐量？带宽规格没有考虑总线宽度吗？另一种可能性是我没有在 GTX 680 上正确/最佳地进行内存复制，但在这种情况下，是否有用于带宽测试的补丁，这样它也会显示我向 680 传输数据的速度比到M2070？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:10:01.377

正如 Robert Crovella 已经评论的那样，您的瓶颈是 PCIe 带宽，而不是 GPU 内存带宽。

您的 GTX 680 可能比 M2070 的性能高出两倍，因为它支持 PCIe 3.0，这使 M2070 的 PCIe 2.0 接口的带宽增加了一倍。但是，您需要一个支持 PCIe 3.0 的主板。

GPU 内存的总线宽度本身并不是一个问题，即使对于受 GPU 内存带宽限制的程序也是如此。Nvidia 设法大幅提高了 GTX 680 内存总线上使用的频率，这足以弥补相对于 M2070 减少的总线宽度。

# tfs - 如何使 TFS 分支只读

> ID：12899075
> 
> 赞同：1
> 
> 时间：2012-10-15T15:37:43.053
> 
> 标签：tfs

> **可能重复：**
> [将 TFS 分支设为只读](https://stackoverflow.com/questions/1038595/making-a-tfs-branch-read-only)

我想在 TFS 2010 中将一个分支设为只读，因为该分支已发布并且不会有任何进一步的更改。

目前我看到两个选项，我都不喜欢：

1）更改每个分支的安全性，使人们没有写权限。这将是非常乏味的。

2) 独家签出整个分店。但是，这将在每个分支的待更改窗口中留下数百个文件。

是否有其他方法可以只读没有上述两个选项的负面影响的分支？我只查看了 UI，还没有查看任何命令行选项。

谢谢您的帮助！

# php - 根据另一个mysql表的值从一个mysql表中获取一个值

> ID：12899077
> 
> 赞同：1
> 
> 时间：2012-10-15T15:37:51.080
> 
> 标签：php, arrays

我有 2 张桌子。类别和商店。表店有列，即类别。类别有不同的商店ID。表类别有列，即 ids 和 parent。id 有商店 id，父母有每个商店的 parentid。

现在我的任务是打印商店表中类别列的不同 ID 的父 ID。请帮我

类别列在一个字段中包含诸如“24,36,32”之类的值，而在另一个字段中包含诸如“22,33,44”之类的值。

```
<?php
$con = mysql_connect("localhost", "abc", "1234");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$db_selected = mysql_select_db("db",$con);
$sql = "SELECT categories from shops";
$array = mysql_query($sql,$con);
while($row=mysql_fetch_array($array)){
foreach($row as $value){
    $query="SELECT parent FROM categories where categories.id=$value.'<br/>'.";
    echo $query;
    }
    }
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:51:30.213

你应该使用`join`

```
SELECT A.ForeignId, B.Id
FROM tablea A
LEFT JOIN tableb B ON B.Id=A.ForeignId 
```

[教程](http://phpweby.com/tutorials/mysql/32)

# sql - 根据任意时间过滤 SQL 查询结果集

> ID：12899078
> 
> 赞同：2
> 
> 时间：2012-10-15T15:37:51.600
> 
> 标签：sql, database, oracle

我目前正在运行以下 SQL[小提琴](http://sqlfiddle.com/#!4/de6bb/1)

并试图使以下内容成为现实：

我只希望这组`cats`具有`last_checked`任意时间的值并且是`sick`. 为了讨论，让我们现在减 12 小时。( `sysdate - Interval '12' hour`)。我得到的`cat`是`last_checked`11 小时前`cat`的情况，但现在他不再生病了。如何以忽略旧`sick`条目而只关注新`healthy`状态的方式构建查询？我的意思是忽略这个结果，因为猫不再生病。

**问题**

> 那么......你想要最近的状态，不管是那些在给定时间范围内生病的猫的最近状态，还是只有健康的猫？

如果它是最新的（最大）并且状态也是 ，我只希望将状态返回给我`sick`。在小提琴中，它将显示一个我不希望发生的示例，它将返回带有时间戳的生病状态，`11 hours ago`但有一个更新的时间戳。

**更新**

以下功能：

```
select cat_id, last_checked, sick
from
(
    select cat_id, last_checked, sick,
             ROW_NUMBER() over (partition by cat_id order by last_checked desc) rn
    from cats
    where last_checked >= sysdate- INTERVAL '12' hour
) v
where rn = 1
and sick = 1; 
```

@podiluska 提供的仅检索第一个结果。我需要它在`cat`基础`cat`上。

**第二次更新**

Podiluska提供的解决方案：

```
select cat_id, last_checked, sick
from
(
    select cat_id, last_checked, sick,
             ROW_NUMBER() over (partition by cat_id order by last_checked desc) rn
    from cats
    where last_checked >= sysdate- INTERVAL '12' hour
) v
where rn = 1; 
```

将适用于小型数据集。接受的答案（我使用的那个）将最有效地处理大型数据集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:42:21.737

您可以使用`Row_Number()`窗口功能获取最新更新...

```
select cat_id, last_checked, sick
from
(
    select cat_id, last_checked, sick,
             ROW_NUMBER() over (partition by cat_id order by last_checked desc) rn
    from cats
    where last_checked >= sysdate- INTERVAL '12' hour
) v
where rn = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:36:07.313

好的，如果其他人遇到与我相同的情况，您不想使用分析函数，尤其是当您的数据像我的那样超过 5 亿条记录时。您要做的是将分析查询展开为具有以下形式的 sql 语句：

```
select colA,colB,...  
from  
(  
     select col1,col2,...
     from tables  
     where ...
)  results  
where ...
group by colA,colB 
```

# python - 部分匹配 GAE 搜索 API

> ID：12899083
> 
> 赞同：13
> 
> 时间：2012-10-15T15:38:08.357
> 
> 标签：python, google-app-engine, search, autocomplete, webapp2

使用[GAE 搜索 API](https://developers.google.com/appengine/docs/python/search/)是否可以搜索部分匹配？

我正在尝试创建自动完成功能，其中该术语将是部分单词。例如。

> > b
> > bui
> > 构建

都会返回“建筑”。

GAE 怎么可能？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-01T04:57:18.797

虽然全文搜索不支持 LIKE 语句（部分匹配），但您可以绕过它。

首先，为所有可能的子字符串（hello = h、he、hel、lo 等）标记数据字符串

```
def tokenize_autocomplete(phrase):
    a = []
    for word in phrase.split():
        j = 1
        while True:
            for i in range(len(word) - j + 1):
                a.append(word[i:i + j])
            if j == len(word):
                break
            j += 1
    return a 
```

使用标记化字符串构建索引 + 文档（搜索 API）

```
index = search.Index(name='item_autocomplete')
for item in items:  # item = ndb.model
    name = ','.join(tokenize_autocomplete(item.name))
    document = search.Document(
        doc_id=item.key.urlsafe(),
        fields=[search.TextField(name='name', value=name)])
    index.put(document) 
```

执行搜索，哇！

```
results = search.Index(name="item_autocomplete").search("name:elo") 
```

[https://code.luasoftware.com/tutorials/google-app-engine/partial-search-on-gae-with-search-api/](https://code.luasoftware.com/tutorials/google-app-engine/partial-search-on-gae-with-search-api/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-19T07:35:00.120

就像@Desmond Lua 的答案一样，但具有不同的标记化功能：

```
def 标记化（单词）：
  令牌=[]
  单词 = word.split(' ')
  言归正传：
    对于我在范围内（len（word））：
      如果 i==0：继续
      w = 单词[i]
      如果我==1：
        记号+=[字[0]+w]
        继续

      令牌+=[令牌[-1:][0]+w]

  返回 ",".join(token)

```

它将解析`hello world`为`he,hel,hell,hello,wo,wor,worl,world`.

它适用于轻型自动完成目的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T22:27:15.137

如[全文搜索和 LIKE 语句中](https://stackoverflow.com/questions/10790093/full-text-search-and-like-statement)所述，不，这是不可能的，因为搜索 API 实现了全文索引。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-18T09:45:27.377

我对 typeahead 控制有同样的问题，我的解决方案是将字符串解析为小部分：

```
name='hello world'
name_search = ' '.join([name[:i] for i in xrange(2, len(name)+1)])
print name_search;
# -> he hel hell hello hello  hello w hello wo hello wor hello worl hello world 
```

希望这有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-19T02:45:22.517

我的版本优化：不重复标记

```
def tokenization(text):
    a = []
    min = 3
    words = text.split()
    for word in words:
        if len(word) > min:
            for i in range(min, len(word)):
                token = word[0:i]
                if token not in a:
                    a.append(token)
    return a 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-10T02:58:50.003

在这里跳得很晚。

但这是我有据可查的标记化功能。文档字符串应该可以帮助您很好地理解并使用它。祝你好运！！！

```
def tokenize(string_to_tokenize, token_min_length=2):
  """Tokenizes a given string.

  Note: If a word in the string to tokenize is less then
  the minimum length of the token, then the word is added to the list
  of tokens and skipped from further processing.
  Avoids duplicate tokens by using a set to save the tokens.
  Example usage:
    tokens = tokenize('pack my box', 3)

  Args:
    string_to_tokenize: str, the string we need to tokenize.
    Example: 'pack my box'.
    min_length: int, the minimum length we want for a token.
    Example: 3.

  Returns:
    set, containng the tokenized strings. Example: set(['box', 'pac', 'my',
    'pack'])
  """
  tokens = set()
  token_min_length = token_min_length or 1
  for word in string_to_tokenize.split(' '):
    if len(word) <= token_min_length:
      tokens.add(word)
    else:
      for i in range(token_min_length, len(word) + 1):
        tokens.add(word[:i])
  return tokens 
```

# jquery - 使用 nextUntil 函数来切换特定的表格行

> ID：12899084
> 
> 赞同：0
> 
> 时间：2012-10-15T15:38:13.403
> 
> 标签：jquery

我有这个包含事件的表，单击它的图标（箭头）我创建新行（称为子事件），然后将其添加到当前行下。我想点击同一个图标来隐藏它的子事件，但只有他的。现在，如果我点击一个新事件（不同的行），它将切换每个隐藏的行，即使它们与当前行无关......

只是我试图强制获得某种UntilNext，但我无法使该功能正常工作，并且通过我正在执行的简单循环 atm 它跳过 oneEvent 但触发每个子行而不是我想要的那个。

```
$('.JSONArrow').on("click", function () {

    var image = $(this);
    var Row = image.closest("tr");

    Row.toggleClass("Opened");

    if (Row.hasClass("Opened")) {

        image.attr("src", "/Images/downArrow.png")

        if (!(Row.hasClass("alreadyOpen"))) {
            var id = image.attr("id");

            $.get("/Home/Child/" + id, function (data) {
                Row.after(data);
                Row.addClass("alreadyOpen");
            });
        }
    } else {
        image.attr("src", "/Images/rightArrow.png");
    }

    var tr = Row.nextAll('tr');

    for (i = 0; i < tr.length; i++) {
        var eventClass = $(tr[i]).attr('class');
        if (eventClass == 'ChildEvent')
            $(tr[i]).slideToggle()
        else {
            if (eventClass == 'oneEvent')
                return;
        }
    }
}); 
```

必须很简单，才能使 nextUntil 仅在子行上工作，但到目前为止我还没有管理它，根据 jquery doc，它应该很简单，例如：

```
 var tr = Row.nextUntil('tr',$(".oneEvent"));

    for (i = 0; i < tr.length; i++) {
        var eventClass = $(tr[i]).attr('class');
        if (eventClass == 'ChildEvent'){
            $(tr[i]).slideToggle()
        }
    } 
```

但我不能让它工作。任何人都可以指出如何做到这一点，或者使用另一个我不知道的 jquery 函数将选择链接（childEvent）到我的 Row 变量而不是其他变量的所有（'tr'）。

如果您不了解 asp 或 mvc4，我不确定人们是否会更了解 hthml，但这里是：编辑::

```
<div class="TableHolder">
    <table id="mainTable">
        <thead> 
            <tr class="header">

                <th class="iconColumn">Child</th>

                <th>Date </th>
                .... other <th>
                </th>
        </tr>
    </thead>

            @Html.EditorFor(x => x.logs)

 </table> 
```

这就是每个说的表格行：

```
 string dynamicClass = "";
if (Model.Parent == null )
{
    dynamicClass = "oneEvent";
}
else 
{  
    dynamicClass = "ChildEvent";
} 
```

}

```
 <tr class="@dynamicClass">

      <td class="iconColumn">
        @if (Model.Parent == null )
        {
            <img class="JSONArrow" id="@Model.EventID" src="~/Images/rightArrow.png"/>
        }
    </td>

    <td>@Model.TimeUTC.ToString("dddd, dd MMMM yyyy")<br />@Model.TimeUTC.ToString("HH:mm:ss") </td>
    .... other column

</tr> 
```

我会尽量简化我所说的：

您有行。（事件）当您单击行（事件）时，新的动态行会出现在其下方（称为 ChildEvent）。

如果您在行（事件）上再次单击，如果行存在于他之下，则隐藏行，但前提是它们是 ChildEvent 类。

我当前的代码隐藏了桌子上的所有 ChildEvent，我只想隐藏（事件）点击下的那些。

如果用户单击行（事件），它将显示（ChildEvent）（如果存在），但仅显示与单击的行（事件）相关的（childEvent），而不是整个表的ChildEvent。

childEvent 只能添加到其相关 Event 下。

重新编辑：

```
 row.nextUntil(".oneEvent", ".ChildEvent").slidetoggle(); 
```

这就是我想要的，文本：切换我点击的下方的 tr，如果他们有 ChildEvent 类。测试直到你到达一个拥有“oneEvent”类的tr。

我只是无法理解参数去了哪里。

重新编辑：

```
<table>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
</table> 
```

点击：

```
 <table>
  <tr class="oneEvent, Opened, alreadyOpened"></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
</table> 
```

点击同一个事件

```
 <table>
  <tr class="oneEvent, alreadyOpened"></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
</table> 
```

点击一个新的事件：

```
<table>
  <tr class="oneEvent, alreadyOpened"></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
  <tr class="oneEvent, Opened, alreadyOpened"></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr>
</table> 
```

点击另一个新的事件

```
<table>
  <tr class="oneEvent, alreadyOpened"></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
  <tr class=oneEvent></tr>
  <tr class="oneEvent, Opened, alreadyOpened"></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
  <tr class="oneEvent, Opened, alreadyOpened"></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr> 
```

点击前一个事件：

```
<table>
  <tr class="oneEvent, alreadyOpened"></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
  <tr class=oneEvent></tr>
  <tr class="oneEvent, Opened, alreadyOpened"></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
  <tr class="oneEvent, alreadyOpened"></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr> 
```

单击第一个 OneEvent ：

```
<table>
  <tr class="oneEvent, Opened, alreadyOpened"></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
  <tr class=oneEvent></tr>
  <tr class="oneEvent, Opened, alreadyOpened"></tr>
   <tr class=ChildEvent display = true></tr>
   <tr class=ChildEvent display = true></tr>
  <tr class="oneEvent, alreadyOpened"></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
   <tr class=ChildEvent display = false></tr>
  <tr class=oneEvent></tr>
  <tr class=oneEvent></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:45:15.093

是的。我们有足够的 HTML 来查看您现在的要求！这是我的建议：

```
$('.JSONArrow').on("click", function () {
    var row = $(this).closest("tr");
    if (row.hasClass("Opened")) {
        // click on an already opened row
        this.src = "/Images/rightArrow.png";
        row.removeClass("Opened");
        // close all following .ChildEvent rows until you get to the next .oneEvent
        row.nextUntil(".oneEvent", ".ChildEvent").slideUp();
    } else {
        // click on a closed row
        this.src = "/Images/downArrow.png";
        row.addClass("Opened");
        // if not previously opened, then add the child HTML
        if (!row.hasClass("alreadyOpened")) {
            $.get("/Home/Child/" + this.id, function(data) {
                row.after(data);
                row.addClass("alreadyOpened");
            });
        } else {
            // show all following .ChildEvent rows until you get to the next .oneEvent
            row.nextUntil(".oneEvent", ".ChildEvent").slideDown();
        }
    }
}); 
```

您还必须修复您的 HTML。在 HTML 中放置多个类名时，使用空格而不是逗号分隔类名。请参阅此处以获取工作演示：

[http://jsfiddle.net/jfriend00/ZkvgN/](http://jsfiddle.net/jfriend00/ZkvgN/)

* * *

由于您似乎遇到了性能问题，这里有一个特殊用途的 nextUntil 版本，在这个 jsperf 中测得它快 3 倍：http: [//jsperf.com/nextuntilfast](http://jsperf.com/nextuntilfast)

```
jQuery.fn.nextUntilFast = function(untilClass) {
    // for speed reasons, this operates only on the 
    // first DOM object in the jQuery object
    var result = [], cur;
    if (this.length) {
        cur = this[0];
        while (cur = cur.nextSibling) {
            // check elements only
            if (cur.nodeType === 1) {
                if ($(cur).hasClass(untilClass)) {
                    break;
                } else {
                    result.push(cur);
                }
            }
        }
    }
    return this.pushStack(result, "nextUntilFast", untilClass);
}; 
```

您可以通过替换它来使用它：

```
 row.nextUntil(".oneEvent", ".ChildEvent").slideDown(); 
```

有了这个：

```
 row.nextUntilFast("oneEvent").slideDown(); 
```

* * *

好的，这是我想隐藏`.ChildEvent`当前行中所有对象的第三个猜测。由于您包含的 HTML 中没有`.ChildEvent`对象，这又是一个猜测：

```
Row.find(".ChildEvent").slideToggle(); 
```

* * *

由于您没有包含 HTML，因此很难确切知道如何解决此问题。

在阅读了您的问题大约 20 次之后（因为您不在身边回答澄清问题），这是我对您所问问题的最佳猜测。如果您想要对函数中的最后一段代码执行的操作是将单击后的任何行向上滑动，并且不包括带有 的行`.oneEvent`，那么您可以使用以下代码执行此操作：

```
 Row.nextUntil(".oneEvent", ".ChildEvent").slideUp(); 
```

`.oneEvent`指示停止匹配兄弟元素的位置。这`.ChildEvent`是一个过滤器，用于从结果中删除与该选择器不匹配的项目。这将为您提供所有后续行，直到（但不包括）也是该行的行，`.oneEvent`然后`.ChildEvent`它将它们向上滑动。如果它们已经关闭，它将使它们保持关闭状态。如果您真的想要切换，那么您可以`.slideToggle()`像原始代码一样使用，但我猜您真正想要的是折叠其他行。

这将是您的代码的修订版本：

```
$('.JSONArrow').on("click", function () {
    var row = $(this).closest("tr");
    if (row.hasClass("Opened")) {
        this.src = "/Images/rightArrow.png";
        row.removeClass("Opened");
    } else {
        this.src = "/Images/downArrow.png";
        row.addClass("Opened");
        // if not previously opened, then add the child HTML
        if (!row.hasClass("alreadyOpen")) {
            $.get("/Home/Child/" + this.id, function(date) {
                row.after(data);
                row.addClass("alreadyOpen");
            });
        }
    }

    // now close all the following rows up to .oneEvent
    row.nextUntil(".oneEvent", ".ChildEvent").slideUp();
}); 
```

* * *

这是我对您需要帮助的最初猜测...

将单击操作应用于发生单击的同一区域而不是文档中的所有区域的典型方法是使用以下算法：

```
$(this).closest("parent container selector").find("target selector").action() 
```

您用于`.closest()`查找正确的父容器。您用于`.find()`查找与此容器中的选择器匹配的对象。

如果你想对容器中的所有项目应用一些东西，那么你选择一个更高的容器选择器（比如整个表）。如果您只想对这个区域应用一些东西，那么您选择一个容器选择器来`.closest()`调用仅上升到您的直接区域的调用。然后`.find()`识别您选择的任何区域中的目标。通过这种方式，您可以只针对您想要的任何范围的子对象。

例如，要将操作应用于与单击发生的同一行中的选择器匹配的所有项目，您可以这样做：

```
$(this).closest("tr").find("target selector").action() 
```

有关更具体的代码，请将您的 HTML 添加到您的问题中。如您所知，您要求我们通过查看您的代码来尝试找出您的 HTML 必须是什么。这并不容易，有时也不可能，而且肯定永远不会导致最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:11:35.410

我想继续从这个开始工作会更容易，而不是我的主要问题是谁变得非常聚集......

```
$('.JSONArrow').on("click", function () {

    var image = $(this);
    var Row = image.closest("tr");

    Row.toggleClass("Opened");

    if (Row.hasClass("Opened")) {

        image.attr("src", "/Images/downArrow.png")

        if (!(Row.hasClass("alreadyOpen"))) {
            var id = image.attr("id");

            $.get("/Home/Child/" + id, function (data) {
                Row.after(data);
                Row.addClass("alreadyOpen");
            });
        }
    } else {
        image.attr("src", "/Images/rightArrow.png");
    }

    Row.nextUntil($(".oneEvent"), $(".ChildEvent")).slideToggle();
}); 
```

我让它像那样工作。但是我收到一个脚本错误，当我打开一个有很多 childEvent 的 oneEvent tr 时，我的浏览器会崩溃。chilldEvent 将出现，但之后如果我尝试单击其他任何内容，我会收到一个错误框，提示脚本已崩溃。

# r - 在 R 中更改绘图标签大小，cex 不起作用

> ID：12899086
> 
> 赞同：3
> 
> 时间：2012-10-15T15:38:17.060
> 
> 标签：r

我在 R 中制作了一个非常简单的图，并希望更改 y 轴（年份）上的字体大小。我用过所有的cex。命令，可以改变一切，除了这些年。

这是我的矩阵（输入）：

```
 2010  2011
CC 0.5550 0.480
P  3.6700 3.865
PF 1.4625 1.685 
```

我的代码：

```
barplot(inputm,beside=T, horiz=TRUE, xlim=c(-7,7), 
col=c("black","blue","red"), xlab="Mg C/ha", cex.axis=2) 
```

我可以更改 x 轴标签，但不能更改 y。我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:42:52.867

使用`cex.names`如

```
barplot(VADeaths, horiz=TRUE, cex.names=0.85) 
```

哪个生产

![在此处输入图像描述](../Images/499a991b6759aeac66a4069715a73cce.png)

# c# - ASP.Net 网格导出到 Excel

> ID：12899088
> 
> 赞同：1
> 
> 时间：2012-10-15T15:38:25.317
> 
> 标签：c#, asp.net, gridview, export-to-excel

我正在使用以下代码将我的导出`GridView`到`Excel`：

```
string attachment = "attachment; filename=Contacts.xls";
Response.ClearContent();
Response.AddHeader("content-disposition", attachment);
Response.ContentType = "application/ms-excel";
StringWriter sw = new StringWriter();
HtmlTextWriter htw = new HtmlTextWriter(sw);
gvReports.RenderControl(htw);
Response.Write(sw.ToString());
Response.End(); 
```

[此代码是从该](http://www.c-sharpcorner.com/UploadFile/DipalChoksi/exportxl_asp2_dc11032006003657AM/exportxl_asp2_dc.aspx)站点复制的。我已按照所有说明进行操作，但执行后什么也没发生。没有例外（除了`Thread.Abort`我认为是因为`Response.End()`）。

我也使用过，`Response.Flush()`但没有发生任何异常或文件等。

谢谢。

**现在编辑代码如下：**

我的 GridView 处于控制状态。该控件位于 asp.net 页面上，该页面具有以下方法。

```
public override void VerifyRenderingInServerForm(Control control)
{

} 
```

ascx控件中按钮的点击事件：

```
protected void btnExportToExcel_Click(object sender, EventArgs e)
{
  ExportToExcel();
}

private void ExportToExcel()
{
    Response.Clear();
    Response.Buffer = true;
    Response.AddHeader("content-disposition",
      "attachment;filename=GridViewExport.xls");
    Response.Charset = "";
    Response.ContentType = "application/vnd.ms-excel ";
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    gvReports.AllowPaging = false;
    gvReports.DataBind();
    gvReports.RenderControl(hw);
    Response.Output.Write(sw.ToString());
    Response.Flush();
    Response.End();
} 
```

gvReports 没有链接、复选框等。5 个绑定列和 1 个按钮。

什么都没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:06:04.290

我将 MVC3 用于我的解决方案，但我用来将数据推送到 excel 文件的代码是：

```
 var grid = new GridView
        {
            DataSource = from lineItem in rows
                         select new
                         {
                             lineItem.ProjectName,
                             lineItem.Sat,
                             lineItem.Sun,
                             lineItem.Mon,
                             lineItem.Tue,
                             lineItem.Wed,
                             lineItem.Thu,
                             lineItem.Fri
                         }
        };
        var fileName = string.Format("{0}:{1}", userName, timesheetDate);
        grid.DataBind();

        Response.ClearContent();
        Response.AddHeader("content-disposition", "attachment; filename=" + fileName + ".xls");
        Response.ContentType = "application/msexcel";
        var sw = new StringWriter();
        var htw = new HtmlTextWriter(sw);
        grid.RenderControl(htw);
        Response.Write(sw.ToString());
        Response.End(); 
```

我看到的直接差异是：

```
I take my data and create a new GridView
Response.ClearContent() instead of a Response.Clear()
Response.Write instead of Response.Output.Write 
```

其他一切看起来都一样，我们都使用点击事件来调用 void 函数。所以我猜，如果你做了这些改动，你的代码应该开始为你工作了。

自从我实施这个解决方案已经有一段时间了，我找不到我得到这个解决方案的网站，所以我无法向你展示我的原始来源。对于那个很抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:48:31.147

**用户控制代码：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;

public partial class WebUserControl : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
            this.gridView.DataSource = this.SqlDataSource1;
            this.gridView.DataBind();

    }
    private void excel_Export()
    {
        Response.Clear();
        Response.Buffer = true;
        Response.AddHeader("content-disposition",
          "attachment;filename=GridViewExport.xls");
        Response.Charset = "";
        Response.ContentType = "application/vnd.ms-excel ";
        StringWriter sw = new StringWriter();
        HtmlTextWriter hw = new HtmlTextWriter(sw);
        this.gridView.AllowPaging=false;
        this.gridView.DataBind();
        this.gridView.RenderControl(hw);
        Response.Output.Write(sw.ToString());
        Response.Flush();
        Response.End();
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        excel_Export();
    }
} 
```

**用户控制主机页面：**

```
 <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
        <uc1:WebUserControl ID="WebUserControl1" runat="server" />
    </asp:Content> 
```

您真的不需要在用户控件托管页面后面的代码中跟踪事件，因为 excel 导出是通过包含网格视图和按钮的用户控件完成的。

```
 public override void VerifyRenderingInServerForm(Control control)
 {
        /* Verifies that the control is rendered */
 } 
```

希望这将帮助您解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:09:03.690

itextsharp dll，你会得到最好的方法来做到这一点

[点击这里](http://www.aspdotnet-suresh.com/2011/04/how-to-export-gridview-data-to-pdf.html)

# android - Android：onItemClickListener 中的 IllegalArgumentExcpetion

> ID：12899091
> 
> 赞同：0
> 
> 时间：2012-10-15T15:38:42.093
> 
> 标签：android, illegalargumentexception

我的问题在我的 onItemClickListener 方法中。当它获得分配“selectedEmail”的行时。logcat 声称没有名为 Email 的列，所以我不确定实际问题出在哪里。

ContactsMenu 类的代码

```
package com.emailandcontactmanager;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class ContactsMenu extends Activity {

    ListView listView;
    public static final String fields[] = { DatabaseSetup.colName};
    Cursor cursor;

    public static String name;
    public static String email;
    public static String phone1;
    public static String phone2;
    public static String address;
    public static String notes;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.managecontacts);
        listView = (ListView) findViewById(R.id.lstContacts); 
        DatabaseSetup.init(this); 

        Button btnAddItem = (Button) findViewById(R.id.btnAddContact);
        btnAddItem.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent addItem = new Intent(v.getContext(), AddContact.class);
            startActivity(addItem);
        }
        });

        listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> listView, View view, 
                int position, long id) {
        // Get the cursor, positioned to the corresponding row in the result set
            //cursor = DatabaseSetup.getContactData();
        Cursor cursor = (Cursor) listView.getItemAtPosition(position);
                //change cursor
                String selectedName = cursor.getString(cursor.getColumnIndexOrThrow("Name"));
                String selectedEmail = cursor.getString(cursor.getColumnIndexOrThrow("Email"));
                String selectedPhone1 = cursor.getString(cursor.getColumnIndexOrThrow("Phone1"));
                String selectedPhone2 = cursor.getString(cursor.getColumnIndexOrThrow("Phone2"));
                String selectedAddress = cursor.getString(cursor.getColumnIndexOrThrow("Address"));
                String selectedNotes = cursor.getString(cursor.getColumnIndexOrThrow("Notes"));

                setName(selectedName);
                setName(selectedEmail);
                setName(selectedPhone1);
                setName(selectedPhone2);
                setName(selectedAddress);
                setName(selectedNotes);

                Intent viewItem = new Intent(view.getContext(), ViewContact.class);
                startActivity(viewItem);

        }
        }); 

    }
        @Override
        protected void onPause() {
            listView.setAdapter(null);
            cursor.close();
            DatabaseSetup.deactivate();
            super.onPause();
        }

        @Override
        protected void onResume() {
            super.onResume();
            DatabaseSetup.init(this);
            //Updated
            cursor = DatabaseSetup.getContactData(); 
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.row, cursor, fields, new int[] {R.id.item_text});
            listView.setAdapter(adapter); 
        }

        public void setName(String selectedName) {
            name = selectedName;
        }

        public void setEmail(String selectedEmail) {
            email = selectedEmail;
        }

        public void setPhone1(String selectedPhone1) {
            phone1 = selectedPhone1;
        }

        public void setPhone2(String selectedPhone2) {
            phone2 = selectedPhone2;
        }

        public void setAddress(String selectedAddress) {
            address = selectedAddress;
        }

        public void setNotes(String selectedNotes) {
            notes = selectedNotes;
        }

        public static String getName() {
            String itemName = name;
            return itemName;        
        }

        public static String getEmail() {
            String itemEmail = email;
            return itemEmail;       
        }

        public static String getPhone1() {
            String itemPhone1 = phone1;
            return itemPhone1;      
        }

        public static String getPhone2() {
            String itemPhone2 = phone2;
            return itemPhone2;      
        }

        public static String getAddress() {
            String itemAddress = address;
            return itemAddress;     
        }

        public static String getNotes() {
            String itemNotes = notes;
            return itemNotes;       
        }

////////////////MENU////////////////////////////////////////////////////////////////////////////////
    DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() { 
        public void onClick(DialogInterface dialog, int which) { 
            switch (which){ 
            case DialogInterface.BUTTON_POSITIVE: 
                finish();
                break; 

            case DialogInterface.BUTTON_NEGATIVE: 
                //Nothing happens on No button click, and the menu closes
                break; 
            } 
        } 
    }; 

    @Override
    public boolean onCreateOptionsMenu(Menu mainmenu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.mainmenu, mainmenu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        final CharSequence[] items = {"Contacts list", "Add Contact"};

        switch (item.getItemId()) {
            case R.id.help:     AlertDialog.Builder builder = new AlertDialog.Builder(this);
                                builder.setTitle("Select a function to revice information about it.");
                                builder.setItems(items, new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int selected) {
                                        switch(selected){
                                        case 0:
                                            Toast.makeText(getApplicationContext(),
                                                    "Allows you to view the selected item and make editations to it or delete it.",
                                                    Toast.LENGTH_LONG).show();
                                            break;
                                        case 1:
                                            Toast.makeText(getApplicationContext(),
                                                    "Allows you to add a new contact by bringing up a screen where the nececary information can be entered.",
                                                    Toast.LENGTH_LONG).show();
                                        }
                                    }
                                });
                                builder.show();
                                break;

                                case R.id.back:     AlertDialog.Builder builderBack = new AlertDialog.Builder(this); 
                                                    builderBack.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener) 
                                                    .setNegativeButton("No", dialogClickListener).show(); 
                                break;
        }
        return true;

    }
} 
```

DatabaseSetup 类的代码

```
 package com.emailandcontactmanager;

import android.content.ContentValues; 
import android.content.Context; 
import android.database.Cursor; 
import android.database.sqlite.SQLiteDatabase; 
import android.database.sqlite.SQLiteOpenHelper; 

/* 
 * usage:  
 * DatabaseSetup.init(egActivityOrContext); 
 * DatabaseSetup.createEntry() or DatabaseSetup.getContactNames() or DatabaseSetup.getDb() 
 * DatabaseSetup.deactivate() then job done 
 */ 

class DatabaseSetup extends SQLiteOpenHelper { 
static DatabaseSetup instance = null; 
static SQLiteDatabase db = null; 

public static void init(Context context) { 
    if (null == instance) { 
        instance = new DatabaseSetup(context); 
        } 
    } 

public static SQLiteDatabase getDb() { 
    if (null == db) { 
        db = instance.getWritableDatabase(); 
        } 
    return db; 
    } 

public static void deactivate() { 
    if (null != db && db.isOpen()) { 
        db.close(); 
        } 
    db = null; 
    instance = null; 
    } 

public static long createEntry(String name, String mail, String phone1, 
        String phone2, String address, String notes) { 
    ContentValues cv = new ContentValues(); 
    cv.put(colName, name); 
    cv.put(colMail, mail); 
    cv.put(colPhone1, phone1); 
    cv.put(colPhone2, phone2); 
    cv.put(colAddress, address); 
    cv.put(colNotes, notes); 
    return getDb().insert(contactsTable, null, cv); 

    } 
/*  Old 
public static Cursor getContactNames() { 
    // TODO Auto-generated method stub 
    String[] columns = new String[] {"_id", colName }; 
    return getDb().query(contactsTable, columns, null, null, null, null, 
            null); 
    } 
*/
public static Cursor getContactData(){
    String[] columns = new String[] {"_id", colName, colMail, colPhone1, colPhone2, colAddress, colNotes }; 
    return getDb().query(contactsTable, columns, null, null, null, null, 
            null); 
    }

DatabaseSetup(Context context) { 
    super(context, dbName, null, dbVersion); 
    } 

@Override 
public void onCreate(SQLiteDatabase db) { 
    // TODO Auto-generated method stub 
    db.execSQL("CREATE TABLE IF NOT EXISTS " + contactsTable 
            + " (_id integer primary key autoincrement, " + colName 
            + " TEXT NOT NULL, " + colMail + " TEXT NOT NULL, " + colPhone1 
            + " TEXT NOT NULL, " + colPhone2 + " TEXT NOT NULL, " 
            + colAddress + " TEXT NOT NULL, " + colNotes 
            + " TEXT NOT NULL)"); 

    db.execSQL("CREATE TABLE IF NOT EXISTS " + templatesTable 
            + " (_id integer primary key autoincrement, " + colSubject 
            + " TEXT NOT NULL, " + colBody + " TEXT NOT NULL)"); 

    db.execSQL("CREATE TABLE IF NOT EXISTS " + tagsTable 
            + " (_id integer primary key autoincrement, " + colTagName 
            + " TEXT NOT NULL, " + colContact + " TEXT NOT NULL)"); 

    } 

@Override 
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
    db.execSQL("DROP TABLE IF EXISTS " + contactsTable); 
    db.execSQL("DROP TABLE IF EXISTS " + templatesTable); 
    db.execSQL("DROP TABLE IF EXISTS " + tagsTable); 
    onCreate(db); 
    } 

static final String dbName = "DB"; 
static final int dbVersion = 1; 
static final String contactsTable = "Contacts"; 
static final String colName = "Name"; 
static final String colMail = "Email"; 
static final String colPhone1 = "Phone1"; 
static final String colPhone2 = "Phone2"; 
static final String colAddress = "Address"; 
static final String colNotes = "Notes"; 

static final String templatesTable = "Templates"; 
static final String colSubject = "Subject"; 
static final String colBody = "Body"; 

static final String tagsTable = "Tags"; 
static final String colTagName = "Name"; 
static final String colContact = "Contact"; 

} 
```

ViewContact 类的代码

```
 package com.emailandcontactmanager;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class ViewContact extends Activity {

    EditText nameField, mailield, phoneField1, phoneField2, addressField, notesField;

    String name, mail, phone1, phone2, address, notes;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewcontact);

        nameField = (EditText) findViewById(R.id.txtName);
        mailield = (EditText) findViewById(R.id.txtMail);
        phoneField1 = (EditText) findViewById(R.id.txtPhone1);
        phoneField2 = (EditText) findViewById(R.id.txtPhone2);
        addressField = (EditText) findViewById(R.id.txtAddress);
        notesField = (EditText) findViewById(R.id.txtNotes);

        name = ContactsMenu.getName();
        mail = ContactsMenu.getEmail();
        phone1 =ContactsMenu.getPhone1();
        phone2 =ContactsMenu.getPhone2();
        address =ContactsMenu.getAddress();
        notes =ContactsMenu.getNotes();

        nameField.setText(name);
        mailield.setText(mail);
        phoneField1.setText(phone1);
        phoneField2.setText(phone2);
        addressField.setText(address);
        notesField.setText(notes);

        Button btnEditContact = (Button) findViewById(R.id.btnEditContact);
        btnEditContact.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            editContact();
        }
        });

        Button btnDeleteContact = (Button) findViewById(R.id.btnEditContact);
        btnDeleteContact.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            deleteContact();
        }
        });

        Button btnEditTags = (Button) findViewById(R.id.btnEditContact);
        btnEditTags.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent editTags = new Intent(v.getContext(), EditContactTags.class);
            startActivity(editTags);
        }
        });

    }

    public void editContact(){

    }

    public void deleteContact(){

    }

    public void setValues(){

    }

} 
```

日志输出

```
10-16 13:37:12.824: D/gralloc_goldfish(869): Emulator without GPU emulation detected.
10-16 13:37:20.553: D/AndroidRuntime(869): Shutting down VM
10-16 13:37:20.553: W/dalvikvm(869): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
10-16 13:37:20.603: E/AndroidRuntime(869): FATAL EXCEPTION: main
10-16 13:37:20.603: E/AndroidRuntime(869): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.emailandcontactmanager/com.emailandcontactmanager.ViewContact}: java.lang.NullPointerException
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1879)
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.os.Looper.loop(Looper.java:137)
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.app.ActivityThread.main(ActivityThread.java:4340)
10-16 13:37:20.603: E/AndroidRuntime(869):  at java.lang.reflect.Method.invokeNative(Native Method)
10-16 13:37:20.603: E/AndroidRuntime(869):  at java.lang.reflect.Method.invoke(Method.java:511)
10-16 13:37:20.603: E/AndroidRuntime(869):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-16 13:37:20.603: E/AndroidRuntime(869):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-16 13:37:20.603: E/AndroidRuntime(869):  at dalvik.system.NativeStart.main(Native Method)
10-16 13:37:20.603: E/AndroidRuntime(869): Caused by: java.lang.NullPointerException
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.app.Activity.findViewById(Activity.java:1794)
10-16 13:37:20.603: E/AndroidRuntime(869):  at com.emailandcontactmanager.ViewContact.<init>(ViewContact.java:12)
10-16 13:37:20.603: E/AndroidRuntime(869):  at java.lang.Class.newInstanceImpl(Native Method)
10-16 13:37:20.603: E/AndroidRuntime(869):  at java.lang.Class.newInstance(Class.java:1319)
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
10-16 13:37:20.603: E/AndroidRuntime(869):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
10-16 13:37:20.603: E/AndroidRuntime(869):  ... 11 more 
```

请告诉我是否需要澄清这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:42:53.877

你的游标只包含 _id 和 colName, (Name)。它不包含电子邮件。您必须将其添加到投影中才能检索它。

您还需要Phone1、Phone2、Address 和Notes。

# database - arachnode.net 网页表很大

> ID：12899093
> 
> 赞同：0
> 
> 时间：2012-10-15T15:38:43.097
> 
> 标签：database

我使用 arachnode.net 爬虫来爬取网站。生成的爬网数据生成了一个大小为 +100 GB 的数据库！！！

我查看了 arachnode.net 数据库，发现表“网页”是罪魁祸首。当我抓取一个我不下载的网站、图像、媒体或任何类似的东西时，我只下载 html 代码。但是在这种情况下，我可以看到 html 网页包含大量隐藏的 viewdata 和 javascript。

所以我需要再次进行爬网，这次在保存到网页表之前去掉隐藏的视图数据和 javascript 代码。

任何人都对如何实现它有一些想法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:48:37.657

是的，您可以编写一个插件，在将数据插入数据库之前修改 CrawlRequest.Data 和 CrawlRequest.DecodedHtml。

创建一个 PostRequest CrawlAction，如下所示：http: [//arachnode.net/Content/CreatingPlugins.aspx](http://arachnode.net/Content/CreatingPlugins.aspx)

# xcode - Xcode addSubview：（视图控制器）- iPad

> ID：12899094
> 
> 赞同：0
> 
> 时间：2012-10-15T15:38:51.370
> 
> 标签：xcode, ipad, uiview, uiviewcontroller

嗨，所以我有一个关于添加子视图的问题。我刚刚创建了一个 iPad 应用程序，它有一个主屏幕，我应该在某个时候添加一个子视图。但是当我使用：

```
NotesMainViewController *openNotes = [[NotesMainViewController alloc]initWithNibName:@"NotesMainViewController" bundle:nil];
[self.view addSubview:openNotes.view]; 
```

主视图导入另一个视图，但它上面的控件如 UITextField 或其他任何东西都不起作用。那么，谁能告诉我如何将 ViewController 中的视图添加到另一个视图（在这种情况下为 homeViewController）。我一直在尝试使用 addsubview 方法，但它不起作用。

# c# - 将图像发布到 Facebook 时指定图像尺寸

> ID：12899098
> 
> 赞同：2
> 
> 时间：2012-10-15T15:39:03.710
> 
> 标签：c#, facebook-graph-api, facebook-c#-sdk

我正在使用 C# FaceBook API 将状态更新和图像发布到墙上。我正在使用以下代码：

```
 public string PostToFaceBookPage(string appKey, string appSecret, string wallId, string postMessage, string imageUrl)
    {
        string id = "";
        if (string.IsNullOrEmpty(imageUrl))
            imageUrl = "";
        var client = new Facebook.FacebookClient();

        dynamic result = client.Post("oauth/access_token",
                                      new
                                      {
                                          client_id = appKey,
                                          client_secret = appSecret,
                                          grant_type = "client_credentials",
                                          redirect_uri = "anywhere",
                                          scope = "publish_stream"
                                      });
        client.AccessToken = (result)["access_token"];

        if (!IsId(wallId))
        {
            result = client.Get(wallId);
            id = result["id"];
        } else
        {
            id = wallId;
        }

        if (imageUrl == "")
        {
            result = client.Post("/" + id + "/feed", new
                {
                    message = postMessage,
                    scope = "publish_stream",
                    privacy = "{\"value\": \"EVERYONE\"}"
                });
        } else
        {
            var uri = new Uri(imageUrl);
            string imageName = Path.GetFileName(uri.LocalPath);
            string mimeType = GetMimeType(Path.GetExtension(uri.LocalPath));
            var media = new Facebook.FacebookMediaObject
                {
                    FileName = imageName,
                    ContentType = mimeType
                };

            media.SetValue(GetImage(imageUrl));
            result = client.Post("/" + id + "/feed", new
            {
                message = postMessage,
                source = media,
                picture = imageUrl,
                scope = "publish_stream",
                privacy = "{\"value\": \"EVERYONE\"}"
            });
        }

        return "";
    } 
```

一切正常。我唯一的问题是，无论实际图像的大小如何，我的图像都发布了相同的确切尺寸。有没有办法告诉 FaceBook 图像的大小，这样它就不会只发布图像的小缩略图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:53:24.633

我不确定 Facebook API 是否可以拥有这些参数，因为我使用该 API 已经有几年了。

但是，作为临时修复，您可以尝试在将照片上传到 Facebook 之前调整其大小。

[您可以使用来自http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-saving-cropping-and-resizing](http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-saving-cropping-and-resizing)的以下代码

```
private static Image resizeImage(Image imgToResize, Size size)
{
   int sourceWidth = imgToResize.Width;
   int sourceHeight = imgToResize.Height;

   float nPercent = 0;
   float nPercentW = 0;
   float nPercentH = 0;

   nPercentW = ((float)size.Width / (float)sourceWidth);
   nPercentH = ((float)size.Height / (float)sourceHeight);

   if (nPercentH < nPercentW)
      nPercent = nPercentH;
   else
      nPercent = nPercentW;

   int destWidth = (int)(sourceWidth * nPercent);
   int destHeight = (int)(sourceHeight * nPercent);

   Bitmap b = new Bitmap(destWidth, destHeight);
   Graphics g = Graphics.FromImage((Image)b);
   g.InterpolationMode = InterpolationMode.HighQualityBicubic;

   g.DrawImage(imgToResize, 0, 0, destWidth, destHeight);
   g.Dispose();

   return (Image)b;
 } 
```

# hadoop - 如何在 Hive 中按列分组使用聚合函数

> ID：12899100
> 
> 赞同：0
> 
> 时间：2012-10-15T15:39:09.937
> 
> 标签：hadoop, hive, hiveql

当我尝试在配置单元中的 GroupBy 列上使用内置 UDF 函数或我自己的 UDF 函数时，如下所示，我似乎遇到了错误

```
select col1, col2 from xyz group by my_func(col1), col2 
```

它一直在抱怨`column –col1 not found in group by expression`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:34:01.967

当您将函数应用于列时，它不再被称为相同的东西。您应该使用`as`关键字显式命名它。

```
select group1, group2 from xyz group by my_func(col1) as group1, col2 as group2; 
```

此外，如果您只选择分组依据的列，而不是实际分组的数据，`distinct`那么可能比`group by`?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:12:32.233

对聚合函数的调用位于错误的位置。应按如下方式进行：

从 xyz 组中选择 my_func(col1),col2 by col1,col2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-09T12:28:29.683

```
select col1, col2 from xyz group by my_func(col1) as col1, col2 
```

基本是您的 GROUP BY 需要具有您在 SELECT 子句中提到的所有列。

# css - 有没有工具可以让我的 CSS3 跨浏览器兼容？

> ID：12899101
> 
> 赞同：2
> 
> 时间：2012-10-15T15:39:12.607
> 
> 标签：css, cross-browser

> **可能重复：**
> [无痛 css3 写作](https://stackoverflow.com/questions/9646097/painless-css3-writing)

我一直懒得开发网站，我手工制作的 CSS 包含很多行，例如

```
border-radius: 10px; 
```

没有所有变体：

```
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px; 
```

有没有一种工具可以让我的 css 文件通过它来充实这些行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:29:26.003

对于边界半径，您可以使用

[http://code.google.com/p/curved-corner/downloads/detail?name=border-radius.htc](http://code.google.com/p/curved-corner/downloads/detail?name=border-radius.htc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:42:20.137

您可以尝试类似： http: [//lesscss.org/](http://lesscss.org/)

它似乎一遍又一遍地修复了冗余定义。

# java - 如何测试休眠通用 dao 模式

> ID：12899103
> 
> 赞同：3
> 
> 时间：2012-10-15T15:39:16.483
> 
> 标签：java, hibernate, unit-testing, tdd

我正在使用 Google Guice 和 Hibernate 开始一个项目，在配置数据库访问层的方式上，我在这个过程中遇到了几个疑问。

我在 POJO 中使用 JPA 注释，而我的 Generic DAO 实现使用 EntityManager 对象与数据库进行通信。我做了几个“手动”测试，我发现它运行良好，但我更喜欢遵循 ​​TDD 方法来强化我在这种方法中的知识。我不确定在 java 中测试泛型的最佳方法是什么，更不用说测试 Hibernate Generic DAO 模式的最佳解决方案。

我已经阅读了几种解决方案，但我对它们都不太满意：

*   其中之一是创建一个抽象类来测试通用 DAO 并使用抽象方法来获取特定的 DAO 并让实例持久化等。
*   另一个解决方案包括使用抽象类（如之前的解决方案）并使用工厂而不是抽象方法：使用这两个解决方案，我不知道是否值得拥有一个方法来让实体来测试我项目中的每个案例.
*   另一种解决方案可能是比通用 dao 更好地测试特定 DAO 中的每个功能：我认为这是最糟糕的解决方案，因为在大多数情况下，我将不得不重复大量代码来测试相同的东西。

除此之外，我读到最好删除 DAO 层并直接从服务中使用实体管理器：我认为这不是最好的方法，因为您将数据库层与服务层混合在一起。

有谁能帮帮我吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:24:12.213

DAO 和 entityManager 的区别在哪里？它们都是数据库层，只是不同的抽象层。

为了测试查询等，内存数据库比模拟完整的数据访问层更好。

# html - jqGrid - saveRow 不适用于自定义表单 - 没有 HTTP POST

> ID：12899107
> 
> 赞同：0
> 
> 时间：2012-10-15T15:39:33.463
> 
> 标签：html, ajax, json, jsp, jqgrid

我使用自定义表单关注 jqGrid：

```
jQuery("#list_klanten").jqGrid({
    url:'data/relations_select.jsp',
    datatype: "json",
    colNames:['ID','Klantcode','EAN','Naam','Street','Postal','City','Country','Phone','Status','Cust','Supp','VAT','Language','Currency','','Relationtype','Legal','MotherC','Repr.','Region','Email','Websiote','Faxnr'],
    colModel:[
        {name:'id',index:'id', width:50,editable:false,editoptions:{size:25}},
        {name:'relation_code',index:'relation_code', width:150,editable:true,editoptions:{size:25}},
        {name:'ean_code',index:'ean_code', width:150,editable:true,hidden:true,editoptions:{size:25}}, 
        {name:'name',index:'name', width:250,editable:true,editoptions:{size:25}},
        {name:'streetname',index:'streetname', width:300,editable:true,sortable:true,editoptions:{size:25}},
        {name:'postal_code',index:'postal_code', width:75,editable:true,sortable:true,editoptions:{size:25}},
        {name:'city',index:'city', width:200,editable:true,sortable:true,editoptions:{size:25}},
        {name:'country',index:'country', width:150,editable:true,sortable:true,editoptions:{size:25}},
        {name:'telephone_nr',index:'telephone_nr', width:150,editable:true,hidden:true,editoptions:{size:25}},
        {name:'relation_status',index:'relation_status', width:150,editable:true,hidden:true,editoptions:{size:25}},
        {name:'customer_flag',index:'customer_flag', width:100,editable:false,search:false,hidden:false,formatter:'checkbox',align:'center',editoptions:{size:25}},
        {name:'supplier_flag',index:'supplier_flag', width:100,editable:false,search:false,hidden:false,formatter:'checkbox',align:'center',editoptions:{size:25}},
        {name:'vat_nr',index:'vat_nr', width:150,editable:true,hidden:false,editoptions:{size:25}},
        {name:'language',index:'language', width:150,editable:true,hidden:false,editoptions:{size:25}},
        {name:'currency_code',index:'currency_code', width:150,editable:true,hidden:false,editoptions:{size:25}},
        {name:'arrow',index:'arrow', width:50,editable:false,search:false,formatter:linkFormatter},
    ],
    width:1100,
    height:600,
    rowNum:20,
    editurl:'data/relations_edit.jsp',
    pager: '#pager_klanten',
    viewrecords: true,
    caption:"Klanten",
    grouping: true,
    groupingView : {
        groupField : ['currency_code'],
        groupColumnShow : [true],
        groupText : ['<b>{0}</b>'],
        groupCollapse : false,
        groupOrder: ['asc'],
        groupSummary : [true],
        groupDataSorted : false
    },
    onSelectRow: function(){
        var gsr = jQuery("#list_klanten").jqGrid('getGridParam','selrow');
        if(gsr){
            jQuery("#list_klanten").jqGrid('GridToForm',gsr,"#relation_detail");
        } else {
            alert("Please select Row")
        }
    },
});
jQuery("#list_klanten").jqGrid('navGrid','#pager_klanten',{edit:true,add:true,del:true,search:false},{height:400,reloadAfterSubmit:true,closeAfterEdit:true,url:'data/relations_edit.jsp'},{height:400,reloadAfterSubmit:true,closeAfterAdd:true,url:'data/relations_edit.jsp'}); 
```

选择一行时，表单填充了选定的值，以便用户可以在此表单中编辑记录。单击保存时，将执行以下代码：

```
jQuery("#savedata").click(function(){
        var rowid = jQuery("#row_id").val();
        jQuery("#list_klanten").jqGrid('FormToGrid',rowid,'#relation_detail');
        jQuery("#list_klanten").saveRow(rowid,null,'data/relations_edit.jsp');
}); 
```

我在网格本身中看到（临时）编辑的值，但实际的“保存”不起作用。当我查看 FireBug 时，我没有看到 data/relations_edit.jsp 被调用...？也没有错误或警告，所以什么都没有发生。我在这里想念什么？

标准编辑选项 - 使用模式弹出窗口进行编辑 - 工作得很好......

非常感谢 ！

罗布雷希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:18:08.053

我发现未完成 HTTP POST 的解决方案：jqGrid 要求网格处于编辑模式。

我不得不添加

```
jQuery("#list_klanten").editRow(rowid); 
```

到我的代码

但...

当我在自定义表单中编辑某些字段时，这些字段会在网格中更新，但不会发布。我的自定义表单中的项目似乎没有发布到编辑网址......

经过一些研究，我发现您必须进行自定义 ajax 调用才能发布所有已编辑的值：

```
var data = $('#relation_detail').serialize();
$.post('data/relations_edit.jsp', data); 
```

如果有人有更好的解决方案，我很乐意知道，但目前这对我来说很好。

罗布雷希特

# oop - 使用 Visual Studio 2012 RTM 向 UML 类图添加抽象属性

> ID：12899110
> 
> 赞同：3
> 
> 时间：2012-10-15T15:39:44.777
> 
> 标签：oop, visual-studio-2012, uml, class-diagram

如何使用 Visual Studio 2012 RTM 在 UML 类图中添加抽象属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:35:15.090

您必须跟踪以下步骤：

1.  定义一个配置文件来扩展 UML ：

    [http://msdn.microsoft.com/en-us/library/dd465145.aspx](http://msdn.microsoft.com/en-us/library/dd465145.aspx)

2.  向模型元素添加构造型：

    [http://msdn.microsoft.com/en-us/library/dd465145.aspx](http://msdn.microsoft.com/en-us/library/dd465145.aspx)

3.  使用配置文件和刻板印象自定义您的模型：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:20:46.947

我认为不可能在 VS 2012 RTM 的 UML 类图中定义抽象属性。取而代之的是，您必须添加一个包含该属性的接口，并且所有喜欢的类都实现它。

# ruby-on-rails - 错误“超时（Capybara::TimeoutError）”

> ID：12899114
> 
> 赞同：4
> 
> 时间：2012-10-15T15:39:53.493
> 
> 标签：ruby-on-rails, cucumber, capybara

当我使用 tag 运行我的功能时`@firebug`，我的测试运行并顺利通过，但是当我删除标签`@firebug`并运行 test headless 时，我得到 error `timed out (Capybara::TimeoutError)`。不幸的是，我无法提供更多信息。我并不真正期待答案，但任何帮助我指出正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:52:59.157

尝试放置@javascript，然后无头运行...希望它有效...

您可以尝试另一种解决方案。我已经通过使用谷歌浏览器而不是 Firefox 并使用了遏制协议来消除此错误。首先，您必须获得 chrome 驱动程序。**如果不删除 fakeweb** ，我不会收到此错误（*我认为是罪魁祸首*）

```
 yum install curl
 yum install curl-devel
 gem install curb
 cd /usr/bin/chromedriver
 chmod +x /usr/bin/chromedriver 
```

将此包含在您的`env.rb`

```
require 'selenium/webdriver/remote/http/curb'

Capybara.register_driver :selenium do |app|
  #http_client = Selenium::WebDriver::Remote::Http::Default.new
  #http_client.timeout = 100
  #Capybara::Selenium::Driver.new(app, :browser => :firefox, :http_client => http_client)

  http_client = Selenium::WebDriver::Remote::Http::Curb.new
  Capybara::Selenium::Driver.new(app, :browser => :chrome, :http_client => http_client)

end 
```

希望能帮助到你...

# iphone - 获取一条线和任何东西的交点的坐标iphone

> ID：12899115
> 
> 赞同：0
> 
> 时间：2012-10-15T15:40:01.013
> 
> 标签：iphone, ios, coordinates

我想自己创建一个动态图。但我最大的问题是我怎样才能得到一条线和我的图形相交的坐标（假设只是一条线）？

类似于 iPhone 中的 Stock App，在这个应用程序中，如果您查看图表，当您在屏幕上移动手指时，您会看到线和图表相交的坐标。

感谢您的帮助，对不起我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:24:04.637

猜猜你可以使用线性代数技能获得线到线的交点坐标，例如维基百科对此的了解：[http ://en.wikipedia.org/wiki/Line-line_intersection](http://en.wikipedia.org/wiki/Line-line_intersection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:52:20.113

要使用与您的问题相同的示例，在此问题上执行类似于 iPhone 上的 Stocks App 的操作，这很容易：

*   当用户触摸视图时，您将获得视图上触摸的坐标 ( `CGPoint pt = [[touches anyObject] locationInView:yourView]`)
*   然后将这个点在视图坐标中转换为图形上的一个点：您可能知道代表图形的横坐标 X=0 的点的绘制位置，以及代表横坐标 X=XMax 的点的绘制位置，所以通过简单的数学运算，您可以确定您触摸的 X 位置对应于哪个横坐标
*   然后，如果您有与触摸点相对应的横坐标 X，那么您就拥有了一切（曲线上与此 X 相对应的 Y 由图表的数据源给出）

* * *

所以想象你`y=sin(x)`在你的图表上绘制了一些函数，并且因为你的 Y 轴是 20 点宽以便你绘制 Y 轴标签，所以表示 X=0 的点被绘制在`x=20pt`你的 UIView 上。并想象您的 X 轴从 0 变为 10，并且您表示 X=10 的点被绘制在`x=300pt`您的视图上。

然后，当用户点击视图上 x 坐标为 的点时`x=140pt`，很容易计算出它对应于图形上的坐标 X=5（`(x-20)/(300-20)*Xmax = 120/240*10 = 5`，简单的三规则）。因此，用户点击了对应于 X=5 的点，并且在曲线上，该点为 ，`X=5`因为`Y=sin(5)`您的曲线为`y=sin(x)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:52:32.150

就在我的脑海中，天真地无知图形显示程序通常如何做到这一点（即某种图形“最佳实践”）：

假设您的图表由许多（线性）线组成，由法线方程 y = kx+m 描述，我想您必须求解当您的参考线（我们称之为 refline）具有相同时的方程x 和 y 坐标作为组成图形的线。

即，如果您的图表是一条线，由 y = 2*x+100 描述（这是 1999 年的超级 IT 股票！），并且您的参考线目前在 y = 120，我想您将不得不求解方程系统120 = 2*x + 100 以获得 refline 和图形相交处的 x。

# .net - 无法访问文件，因为它正被另一个进程使用

> ID：12899116
> 
> 赞同：0
> 
> 时间：2012-10-15T15:40:05.653
> 
> 标签：.net, vb.net, xslt

该进程无法访问文件“C:\Users\xx\Desktop\Original Application\XMLshredapp\xmldocs\xmltempfile0001.xml”，因为它正被另一个进程使用。

这是代码：

```
Dim transformer As New System.Xml.Xsl.XslCompiledTransform()
transformer.Load(workingdirectory & "\xslttempfile" & CStr(c) & ".xslt")
transformer.Transform(fname, fname) 
```

进行转换时，我想转换文件并输出相同的名称。我认为这可能是这里的问题。有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:46:00.320

> 进行转换时，我想转换文件并输出相同的名称。我认为这可能是这里的问题。有小费吗？

是的，鉴于转换可能适用于大文件，我希望它尝试流式传输输入。

> 有小费吗？

转换为新文件，然后删除旧文件，然后重命名新文件以代替旧文件。

# jquery - jQuery 遍历 HTML 并动态创建选项卡？

> ID：12899118
> 
> 赞同：1
> 
> 时间：2012-10-15T15:40:10.953
> 
> 标签：jquery, html, tabs

我在创建选项卡式界面时遇到了一个小问题。我们使用的系统在添加到目录时仅在一个文本字段中包含产品内容。所以 HTML 标记看起来像这样，并且可以将 p 和 ul（甚至 table）元素作为内容（不幸的是，不能添加任何类或 id）：

```
<div class="productDesc">
   <h1>Content 1</h1>
   <p>Content 1 content</p>

   <h1>Content 2</h1>
   <ul>
     <li>Content 2 content #1</li>
     <li>Content 2 content #2</li>
     <li>Content 2 content #3</li>
   </ul>

   <h1>Content 3</h1>
   <p>Content 3 content #1</p>
   <p>Content 3 content #2</p>
   <p>Content 3 content #3</p>
</div> 
```

我想做的是创建一个选项卡式界面，让每个H1元素都是一个选项卡，它的内容当然是单击选项卡时应该显示的内容。

有没有办法遍历 HTML 以获得如下所示的最终结果：

```
<div id="tabs">
   <ul class="productTabs">
      <li><a href="#Content1">Content 1</a></li>
      <li><a href="#Content2">Content 2</a></li>
      <li><a href="#Content3">Content 3</a></li>
   </ul>
</div>

<div id="productDesc">
   <div id="Content1">
      <p>Content 1 content</p>
   </div>
   <div id="Content2">
      <ul>
         <li>Content 2 content #1</li>
         <li>Content 2 content #2</li>
         <li>Content 2 content #3</li>
      </ul>
   </div>
   <div id="Content3">
      <p>Content 3 content #1</p>
      <p>Content 3 content #2</p>
      <p>Content 3 content #3</p>
   </div>
</div> 
```

一旦我修复了 HTML 标记，我应该能够使选项卡工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:13:57.040

如果您绝对无法更改生成的标记：

```
var productDesc = $('div.productDesc');
var newProductDesc = $('<div/>').attr('id', 'productDesc');
var tabs = $('<div/>').attr('id', 'tabs').insertBefore(productDesc);
var productTabs = $('<ul/>').addClass('productTabs').appendTo(tabs);

var i = 0;
var lastTabContent;
productDesc.children().each(function() {
    if($(this).is('h1')) {
        i++;
        $('<li/>').appendTo(productTabs).append($('<a/>').attr('href', '#Content' + i).html($(this).html()));
        lastTabContent = $('<div/>').attr('id', 'Content' + i).appendTo(newProductDesc);
    } else {
        $(this).appendTo(lastTabContent);
    }
});
productDesc.replaceWith(newProductDesc); 
```

[jsfiddle](http://jsfiddle.net/6PCdy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:45:55.153

如果您希望转换 HTML 标记，我建议您使用[XSLT](http://en.wikipedia.org/wiki/XSLT)。更改 HTML 标记并可能使用[jQuery 选项卡](http://jqueryui.com/tabs/)插件作为选项卡

# c++ - 使用递归获取某个目录中的所有文件

> ID：12899120
> 
> 赞同：-3
> 
> 时间：2012-10-15T15:40:12.447
> 
> 标签：c++, winapi

我尝试编写在当前目录及其子目录中查找所有文件的应用程序。我有下一个问题我无法完全理解

1.  在我的情况下我需要如何使用递归`GetFiles()`函数，以及
2.  我需要在`PathCreator()`函数中动态分配的空闲内存。当我仅针对某些目录（没有子目录）测试该程序时，它可以工作（查看 中的注释代码`_tmain()`）。但是当我尝试获取所有文件时，就会崩溃。

这是我的代码：

```
// ConsoleApplication1.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <windows.h>
#include <iostream>
#define SIZE 300

int is_directory(wchar_t *p)
{
    wchar_t temp[300];
    int i;
    i = 0;
    while(*p != '\0')
    {
        temp[i] = *p;
        p++;
        i++;
    }
    temp[i] = '\\';
    i++;
    temp[i] = '\0';
    WIN32_FIND_DATA file;
    HANDLE search_hendle = FindFirstFile(temp, &file);
    long error = GetLastError();
    if(error == 267)
    {
        return 0;
    }
    else
    {
        return 1;
    }
}

wchar_t *PathCreator(wchar_t *dir, wchar_t *fileName)
{
    wchar_t* path = new wchar_t[SIZE];
    int j = 0;
    while(j < SIZE)
    {
        path[j] = '\0';
        j++;
    }
    int i;
    i = 0;
    while(*dir != '*' && *dir != '\0')
    {
        path[i] = *dir;
        i++;
        dir++;
    }
    wchar_t *t = fileName;  
    while(*t != '\0')
    {
        path[i] = *t;
        i++;
        t++;
    }
    path[i] = '\0';
    return path;
} 

wchar_t* allFlsArr[SIZE];
int i = 0;
wchar_t **GetAllFiles(wchar_t* dir)
{
    WIN32_FIND_DATA file;
    HANDLE search_hendle = FindFirstFile(dir, &file);
    if(search_hendle)
    {
        do
        {
            wchar_t *p = PathCreator(dir,file.cFileName);
            allFlsArr[i++] = p;
        }
        while(FindNextFile(search_hendle, &file));
        allFlsArr[i] = '\0';
    }
    CloseHandle(search_hendle);
    return allFlsArr;
}

void GetFiles(wchar_t *dir)
{
    wchar_t **filePaths = 0;
    filePaths = GetAllFiles(dir);
    int  i = 0;
    while(filePaths[i] != '\0'){
        if(!is_directory(filePaths[i]))
        {
            std::wcout << filePaths[i] << std::endl;
        }
        else
        {
            GetAllFiles(filePaths[i]);
        }
    }
    delete [] filePaths;
}
int _tmain(int argc, _TCHAR* argv[])
{
    /*wchar_t **wch = GetAllFiles(L"C:\\*");
    int i = 0;
    while( *wch != '\0')
    {
        std::wcout << *wch << std::endl;
        wch++;
    }*/
    GetFiles(L"C:\\*");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:53:49.207

首先，我想知道为什么您从不使用`wcscpy`,`wcscat`或 ... 之类的函数，而总是手动进行所有字符串和缓冲区操作！？但除此之外，您的代码中还有一些问题：

*   您使用单个宽字符串指针数组（`allFlsArr`）将结果返回`GetAllFiles`给调用者，当您迭代该结果时，您将`GetAllFiles`再次调用将覆盖的结果`allFlsArr`。

*   您正在释放`GetAllFiles`使用的结果，`delete[] filePaths`但这实际上`allFlsArr`是一个全局变量，无法删除。试试`std::vector<std::wstring>`不需要`delete/new`的。

*   您的文件名数组太小，无法接受包含超过 300 个文件或文件夹的文件夹中的文件，再次尝试`std::vector<std::wstring>`可以增大大小并接受任意数量的项目！

*   当您使用 搜索文件夹时`*`，Windows 会返回到您永远不应该搜索它们的额外目录 ( `.`, `..`)。你应该跳过它们 ( `if(!wcscmp(file.cFileName, L".") || !wcscmp(file.cFileName, L"..")) continue`)

*   当您应该使用时，您可以`CloseHandle`关闭返回的句柄。`FindFirstFile``FindClose`

所以你可能有这样的事情：

```
std::vector<std::wstring> list_files( wchar_t const* folder )
{
    std::wstring root = folder;
    if( folder.back() == '*' ) folder.erase( folder.end() - 1 );
    if( folder.back() != '\\' ) folder.push_back( '\\' );

    std::vector<std::wstring> res;
    WIN32_FIND_DATA file;
    HANDLE hSearch = FindFirstFileW( folder, &file );
    if( hSearch != INVALID_HANDLE_VALUE ) {
        do {
            if( !wcscmp(file.cFileName, L".") ||
                !wcscmp(file.cFileName, L"..") )
                continue;
            res.push_back( root + file.cFileName );
            if( file.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY ) {
                // search for sub folders of this folder
                std::vector<std::wstring> tmp =
                    list_files( (root + file.cFileName) + L"\\*" );
                // all all items to end of our result!
                res.insert( res.end(), tmp.begin(), tmp.end() );
            }
        } while( FindNextFileW(hSearch, &file) );
        FindClose( hSearch );
    }
    return res;
} 
```

# c# - 在 Windows 商店应用程序中获取窗口宽度/高度

> ID：12899121
> 
> 赞同：6
> 
> 时间：2012-10-15T15:40:15.393
> 
> 标签：c#, xaml, windows-8, windows-store-apps

我目前有一个加载的基本页面，我需要一些方法来获取窗口的宽度和高度，最好是在构造函数中。问题是，在构造函数中，或者在页面完全加载之前，我似乎无法掌握宽度和高度。加载后我可以使用：

```
this.ActualWidth;
this.ActualHeight; 
```

我可以使用任何窗口加载完成事件或在加载期间获取宽度和高度的任何方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T18:33:30.487

您可以随时使用属性[Window.Current.Bounds](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.window.bounds)找出 Window 的大小。有关详细信息，请阅读：[如何获取屏幕分辨率？对于 WinRT 应用程序？](https://stackoverflow.com/questions/10828179/how-to-get-the-resolution-of-screen-for-a-winrt-app)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T17:53:30.547

[这](http://blogs.msdn.com/b/windowsappdev/archive/2012/04/19/getting-the-most-out-of-your-pixels-adapting-to-view-state-changes.aspx)是一篇关于如何处理`SizeChanged`事件的博客文章。如果不执行此类操作，您将无法获得 ActualWidth/ActualHeight，因为它们是在呈现控件时计算的。

```
private void OnWindowSizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
{
    var CurrentViewState = Windows.UI.ViewManagement.ApplicationView.Value;
    double AppWidth = e.Size.Width;
    double AppHeight = e.Size.Height;

    // DownloadImage requires accurate view state and app size!
    DownloadImage(CurrentViewState, AppHeight, AppWidth);
}

Window.Current.SizeChanged += OnWindowSizeChanged; 
```

# sql-server - 这是 RS 表达标准还是 hack

> ID：12899122
> 
> 赞同：0
> 
> 时间：2012-10-15T15:40:17.080
> 
> 标签：sql-server, reporting-services, ssrs-2008

我正在使用`Switch`并且表达式似乎没有明显的`ELSE`部分，所以我最终得到了以下内容，但感觉有点像黑客 - 是吗？

它的工作原理 - 如果它是`foo`或者`bar`但任何其他产品字符串被单独留下，它会修改字符串：

```
=Switch(Fields!Product.Value = "foo" , "foo (incl sad)", 
       Fields!Product.Value = "bar", "bar (incl sick)",
       Cdbl(1)=Cdbl(1), Fields!Product.Value) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:07:08.707

如果它有效，它就有效。您也可以使用 IIF(Fields!Product.Value = "foo", "foo2", IIF(Fields!Product.Value = "bar", "bar2", Fields!Product.Value)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:16:48.930

由于有人要求：

```
=Switch(Fields!Product.Value = "foo" , "foo (incl sad)",  
        Fields!Product.Value = "bar", "bar (incl sick)", 
        Cdbl(1)=Cdbl(1), Fields!Product.Value) 
```

会成为

```
=Switch(Fields!Product.Value = "foo" , "foo (incl sad)",  
        Fields!Product.Value = "bar", "bar (incl sick)", 
        true, Fields!Product.Value) 
```

我认为哪个更具可读性 - 我可以理解`1 = 1`，但任何人都可以告诉我在原始代码中转换为双精度数的目的是什么？

据我所知，这是从 switch 语句返回“else”的唯一方法。否则返回 null/Nothing（分别针对 c#/VB 大师）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:45:55.933

您可以使用交换机，您可以做的另一件事是使用`=IIF(...)`MSDN：

> Iif 函数根据表达式是否为真返回两个值之一。如果 LineTotal 的值超过 100，则以下表达式使用 Iif 函数返回布尔值 True。否则返回 False：

另一个表达式可以包含另一个`IIF`，因此您不限于单个`IIF`. 所有 RS 表达式都可以在这里找到：

[http://msdn.microsoft.com/en-us/library/ms157328.aspx](http://msdn.microsoft.com/en-us/library/ms157328.aspx)

# android - 加载 android 时，EditTextPreference 总是显示默认摘要

> ID：12899128
> 
> 赞同：3
> 
> 时间：2012-10-15T15:40:35.847
> 
> 标签：android, sharedpreferences, android-preferences, edittextpreference

我有一个偏好片段，上面有一些 EditTextPreference 项目。每次我加载首选项片段时，显示的值都是默认值，其中一个是存储在 sharedPreferences 中的值。当菜单加载时，如何让这些编辑文本始终显示来自 sharedPreferences 的文本？我尝试使用以下方法从片段中访问 sharedPreferences：

```
SharedPreferences def = getActivity().getPreferences(0);
Log.v("Something", def.getString("relay1_name", "no")); 
```

但是如果我尝试访问任何键，我只会得到默认文本。文本输入被保存在 sharedPreferences 中，因为如果我点击一个 editText，我之前设置的文本就在那里，它只是摘要显示默认文本。提前感谢您的帮助，我很可能错过了一些非常简单的东西。

首选项屏幕的 xml

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<PreferenceCategory

    android:title="@string/prefs_relay_title">
    <EditTextPreference
        android:dialogTitle="Relay1"
        android:key="relay1_name"
        android:summary="Relay 1"
        android:title="Relay 1"
        android:defaultValue="Relay 1" />

</PreferenceCategory>
</PreferenceScreen> 
```

创建片段的操作 public class PrefsActivity extends Activity {

```
public static final String PREFS_NAME = "prefs";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getFragmentManager().beginTransaction().replace(android.R.id.content, new PrefsFragment()).commit();    // Load the prefs screen up 
 }
} 
```

首选项片段本身

```
public class PrefsFragment extends PreferenceFragment implements OnSharedPreferenceChangeListener {

//public static final String PREFS_NAME = "prefs";

@Override
public void onCreate(Bundle savedInstanceState) {

    Log.v("PrefsFragment", "Creating prefs fragment");

    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.prefs_xml);

    getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);

}

void loadDefaults() {

    SharedPreferences def = getActivity().getPreferences(0);
    Log.v("Something", def.getString("relay1_name", "no"));

}

@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {

    if (key.equals("relay1_name")){
        Preference connectionPref = findPreference(key);
        connectionPref.setSummary(sharedPreferences.getString(key, ""));

}

@Override
public void onResume() {
    super.onResume();
    getPreferenceScreen().getSharedPreferences()
            .registerOnSharedPreferenceChangeListener(this);
}

@Override
public void onPause() {
    super.onPause();
    getPreferenceScreen().getSharedPreferences()
            .unregisterOnSharedPreferenceChangeListener(this);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:33:07.410

我认为`PreferenceScreen`使用应用程序默认共享首选项，而您的片段正在使用`getActivity().getPreferences()`

查看`getPreferences()`Activity 文档，它不会检索应用程序共享首选项，而是检索特定活动私有的首选项。我认为这与 a 存储的不一样`PreferenceScreen`。

我可能会建议你更换

```
SharedPreferences def = getActivity().getPreferences(0); 
```

和

```
SharedPreferences def = PreferenceManager.getDefaultSharedPreferences(); 
```

看看是否有帮助。

# ruby-on-rails - 将 JSON 存储在 Rails 数组的 URL 中？

> ID：12899129
> 
> 赞同：0
> 
> 时间：2012-10-15T15:40:37.843
> 
> 标签：ruby-on-rails, ruby, json

我正在 Rails 中构建一个 Facebook 画布应用程序，我希望显示给定相册中的所有照片。我可以生成 URL，将我带到一个页面，其中包含`JSON`与这些照片相关的数据提要，但我不清楚如何捕获该信息并将其存储在 Rails 中的数组中。如果有人可以帮助我，我将不胜感激！

我提出的要求是：

```
https://graph.facebook.com/'+album["id"].to_s+'/photos/?fields=source&access_token='+@token["oauth_token"] 
```

用户特定的位置`album['id']`和位置。`@token[oauth_token]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:30:22.763

如果您有一个 JSON 字符串`var_json_string`，您可以通过执行以下操作将其转换为 Hash：

```
JSON.parse(var_json_string) 
```

# asp.net-mvc - MVC 路由问题，我很难过

> ID：12899133
> 
> 赞同：1
> 
> 时间：2012-10-15T15:40:52.450
> 
> 标签：asp.net-mvc

我正在开发一个应用程序，当我去调试应用程序时，该应用程序从以下位置开始：localhost:54591/Views/Home/Index.aspx 并给我一个资源未找到 404 错误。

当我输入网址时，我遇到了同样的问题：localhost:54591/Views/Home/Index.aspx

但是由于某种原因，当我输入网址时：localhost:54591/Views/Home/

它可以工作，但现在我的标题菜单格式不正确。

那么给了什么？对于我的生活，我无法弄清楚什么是错的。如果我能弄清楚如何在启动时重新路由到 localhost:54591/Views/Home/ 我可以弄清楚为什么菜单不起作用，但我确实有预感这些问题是相关的。

```
public static void RegisterRoutes(RouteCollection routes)
    {
       // routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:44:07.790

它不是由路由引起的（不存在页面上的 404 除外）。默认情况下，VS 将在您当前正在处理的页面上启动网站。因此，如果您在单击 F5 时处理 Index.aspx，它将尝试打开该视图。

要更改行为 - 在项目设置中更改起始页：项目属性 -> Web -> 更改为“特定页面”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:43:46.440

localhost:54591/Views/Home/Index.aspx 不应该工作，因为您应该使用控制器来加载视图。/首页/例如

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:43:25.363

这是预期的行为。在 MVC 应用程序上，您不应该直接访问您的视图，而是您的控制器。

关于格式问题，您必须提供更多详细信息，但您的应用程序运行良好

# forms - 如何在命令对象中填充对象？

> ID：12899136
> 
> 赞同：0
> 
> 时间：2012-10-15T15:40:59.777
> 
> 标签：forms, spring, controller

我正在使用 Spring 3.1.1.RELEASE。我有这个命令对象……</p>

```
@Entity
public class Contract {

    @Id
        @Column(name = "ID")
        @GeneratedValue(strategy=GenerationType.AUTO)
        private Integer id;

        @OneToOne(fetch = FetchType.EAGER, targetEntity = Product.class)
        @JoinColumn(name = "PRODUCT_ID")
        @NotNull
        private Product product;

        @Column(name = "ORDER_ID")
        @NotNull
        private String orderId;     
    … 
```

我想要在我的 JSP 表单上拥有一个代表产品字段的产品下拉列表。一旦用户选择一个并提交表单，它将通过命令对象的 setProduct 方法填充对象的“产品”成员字段。我知道如何设置字符串字段，

```
<form:input path="orderId" /> 
```

但是我需要在我的控制器和 JSP 中放入什么，以便当我的请求提交给控制器时……</p>

```
@RequestMapping(value = "/add", method = RequestMethod.POST)
public ModelAndView addContract(final Contract contract,
                                final BindingResult result) {
… 
```

产品字段将正确填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:56:36.860

尝试使用标签`<form:select/>`

```
<form:select path="name_attribute" items="${myobjs}" itemLabel="name" itemValue"number"/> 
```

items 属性采用对象的集合。所以对于这个例子，假设 myObjs 是以下类的集合：

```
public class MyObj{
   private String name;
   private String number;
} 
```

参考：[http ://static.springsource.org/spring/docs/2.0.x/reference/spring-form.tld.html#spring-form.tld.select](http://static.springsource.org/spring/docs/2.0.x/reference/spring-form.tld.html#spring-form.tld.select)

参考2：[http](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/view.html) : //static.springsource.org/spring/docs/current/spring-framework-reference/html/view.html（见17.2.4.9节选择标签）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T01:08:22.593

答案涉及的不仅仅是 JSP 选择标记。它还需要粘合剂。如果我有这门课

```
@Component
public class ProductEditor extends PropertyEditorSupport
{

    @Autowired
    private ProductService m_productSvc;

    @Override
    public String getAsText()
    {
        final Product product = (Product) getValue();
        final String text = (product != null ? product.getProductId() : "");
        return text;
    }

    @Override
    public void setAsText(final String id)
    {
        final Product product = m_productSvc.findById(id);
        setValue(product);
    }
} 
```

我可以在我的控制器中注册活页夹……</p>

```
 @InitBinder
    public void initBinder(WebDataBinder binder) {
        …
        binder.registerCustomEditor(Product.class, this.m_productEditor);
    } 
```

然后在我的 JSP 中，我可以拥有

```
 <form:select path="product">
                    <form:option value="" label="Select" />
                    <form:options items="${productList}" itemValue="id" itemLabel="name" />
                </form:select> 
```

我的选择将绑定到我的命令对象的“产品”字段。

# c# - 在自定义操作中监控进程退出

> ID：12899138
> 
> 赞同：0
> 
> 时间：2012-10-15T15:41:04.927
> 
> 标签：c#, windows-installer, custom-action, system.diagnostics

全部——</p>

我需要通过自定义操作静默执行多项任务。从本质上讲，我需要安装和许可第 3 方应用程序后，我已经放下了自己的位：

1.  我将我的位安装到应用程序文件夹中
2.  我启动了一个自定义操作以通过 FooSetup.exe 安装第 3 方应用程序
3.  我启动了另一个自定义操作，以通过步骤 2 中安装的 FooLicense.exe 许可第三方应用程序。

在安装程序的提交阶段，我触发此代码以启动 3rd 方应用程序的静默设置：

```
[System.Security.Permissions.SecurityPermission(System.Security.Permissions.SecurityAction.Demand)]
public override void Commit(IDictionary savedState)
{
  base.Commit(savedState);

  ProcessStartInfo startInfo = new ProcessStartInfo();
  startInfo.Arguments = "/verysilent";
  startInfo.FileName = Context.Parameters["TARGETDIR"].ToString() + "fooSetup.exe";
  Process myProcess = System.Diagnostics.Process.Start(startInfo);
} 
```

它工作正常——但是，直到 fooSetup.exe 实际完成，我才能开始“第 3 阶段”（许可第三方应用程序）。

处理这种情况的最佳做法是什么？我猜我将不得不在 myProcess 上设置一个事件处理程序来监视 fooSetup.exe 的退出？（我已经验证 FooSetup.exe 在静默模式下确实退出了完成后）

有什么例子吗？我是一名商业智能人员，而不是一名 C# 骑师，因此您将我推向任何示例/指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:47:33.330

我想`Process.WaitForExit()`这就是你想要的。[http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)

# ios - 没有 Facebook 设置的 UIActivity

> ID：12899142
> 
> 赞同：11
> 
> 时间：2012-10-15T15:41:26.303
> 
> 标签：ios, facebook, ios6, uiactivity, uiactivityviewcontroller

如果默认 iOS 设置中没有 Facebook 帐户设置，`UIActivity`是否可以显示 Facebook ？`UIActivityViewController`现在，如果我输入一些 fb 帐户 - 我看到 fb in `UIActivityViewController`，如果没有 - 看不到。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T15:43:10.987

不，这不可能...如果 Facebook 未在 中设置`Settings > Facebook`，则不`UIActivityViewController`会将 Facebook 显示为共享选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T07:33:32.537

可以使用另一个名为 OWActivityViewController [https://github.com/brantyoung/OWActivityViewController的视图控制器](https://github.com/brantyoung/OWActivityViewController)

这个对我有用！

# windows-phone-7 - 适用于 Windows Phone 的 SOAP 标头

> ID：12899147
> 
> 赞同：3
> 
> 时间：2012-10-15T15:41:44.787
> 
> 标签：windows-phone-7, soap

我在将标头信息添加到 SOAP 消息时遇到问题。任何人都知道如何以正确的方式做到这一点？

我成功地添加了 Authenticator 部分，但仍然无法在 Authenticator 中添加用户名和密码，如下所示。您还可以看到下面的 C# 代码！

```
<?xml version="1.0" encoding="utf-8"?> 
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"> 
  <soap:Header> 
    <Authenticator xmlns="http://www.namespacename.com/services/"> 
      <UserName>string</UserName> 
      <Password>string</Password> 
    </Authenticator> 
  </soap:Header> 
  <soap:Body> 
    <ListItems xmlns="http://www.namespacename.com/services/"> 
      <strCode>string</strCode> 
    </ListItems> 
  </soap:Body> 
</soap:Envelope> 
```

C# 代码

```
var client = new MySoapClient();
client.GetListCompleted += (a, b) =>
{
    var list = b.Result;
};

using (OperationContextScope scope = new OperationContextScope(client.InnerChannel))
{
    MessageHeader header = MessageHeader.CreateHeader("Authenticator", "http://......./", credentials);
    OperationContext.Current.OutgoingMessageHeaders.Add(header);
    client.GetListAsync(App.CouponCampaignCode);
}

public class _ServiceCredential
{
    [XmlAttribute(Form = System.Xml.Schema.XmlSchemaForm.None)]
    [DataMember(Order = 2)]
    public string Password;
    [DataMember(Order = 1)]
    [XmlAttribute(Form = System.Xml.Schema.XmlSchemaForm.None)]
    public string UserName;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T20:47:09.717

```
private void callWebservice()
{
    NetworkCredential credentials = new NetworkCredential(userName, Password, domain);
    HttpWebRequest request = CreateWebRequest(url, credentials);
    XDocument soapEnvelope = CreateSoapEnvelope(soapEnvelope );
    InsertSoapEnvelopeIntoWebRequest(soapEnvelope, request);
}

private static HttpWebRequest CreateWebRequest(string url, NetworkCredential credentials)
   {
        string action = link;// my action link
        HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(url);
        req.Credentials = credentials;
        req.Headers["SOAPAction"] = action;
        req.ContentType = "text/xml;charset=\"utf-8\"";
        req.Accept = "text/xml";
        req.Method = "POST";
        return req;
    }

private static XDocument CreateSoapEnvelope(string content)
{
    XDocument soapEnvelopeXml = XDocument.Parse(content);
    return soapEnvelopeXml;
}

private static void InsertSoapEnvelopeIntoWebRequest(XDocument soapEnvelopeXml,                          HttpWebRequest webRequest)
{
    webRequest.BeginGetRequestStream((IAsyncResult asynchronousResult) =>
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        Stream postStream = request.EndGetRequestStream(asynchronousResult);
        soapEnvelopeXml.Save(postStream);
        postStream.Close();

        request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
    }, webRequest);
} 
```

# c# - How to change the color of a point on a grid

> ID：12899149
> 
> 赞同：0
> 
> 时间：2012-10-15T15:41:49.047
> 
> 标签：c#, wpf

I have a grid with a bunch of 'Path's on it called 'GraphPanel' and i'm trying to figure out which one the mouse is over when you click on the grid and then change it's 'fill' to GreenYellow, I'm using a static variable '_HitBox' the value is 2 (not that it matters)

```
System.Windows.Point P = e.GetPosition(GraphPanel);

 var PointsToColor = from children in GraphPanel.Children.OfType<Path>()
                               where children.Data is EllipseGeometry &&
                               P.X > (((EllipseGeometry)children.Data).Center.X - _HitBoxSize) && 
                               P.X < (((EllipseGeometry)children.Data).Center.X + _HitBoxSize) && 
                               P.Y > (((EllipseGeometry)children.Data).Center.Y - _HitBoxSize) && 
                               P.Y < (((EllipseGeometry)children.Data).Center.Y + _HitBoxSize)
                               select children;

           foreach (var p in PointsToColor)
           {
               p.Fill = Brushes.GreenYellow;
               break;
           } 
```

Please Note:

1- It hits the `p.Fill = Brushes.GreenYellow` while debugging, but the point it hits for doesn't change color.

2- I was originally using `IsMouseOver()` which is a method built into each member of a grid, it was incredibly slow and (since there is other items on the grid overtop of the points like labels and stuff) if something was over top of the point clicked it wouldn't return true

3- I have also tried this (Thinking that a select statement doesn't return a reference) :

```
Path test = ((Path)GraphPanel.Children[GraphPanel.Children.IndexOf(p)]);
test.Fill = Brushes.GreenYellow;
GraphPanel.Children[GraphPanel.Children.IndexOf(p)] = test; 
```

Which ran successfully, but again the color of the point's fill didn't change.

Also i've tried adding `GraphPanel.UpdateLayout()` After the change which didn't do anything either

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:32:15.847

After eternity of research and determination and scouring the internet for any clues or ideas of what the actual f$!% is wrong with my code

`.Fill` is just a trick made by angry Microsoft developers who hate their life and want others to suffer an eternity of anguish

`.Stroke` is how you edit the fill.....

# mysql - MySql - IN 运算符（具有精确值）

> ID：12899150
> 
> 赞同：0
> 
> 时间：2012-10-15T15:41:50.933
> 
> 标签：mysql, count, exact-match

表“argument_user”

```
+-------------+----------+
| argument    | user_id  |
+-------------+----------+
| bike        | 1        |
| flower      | 2        |
| web         | 1        |
| web         | 2        |
| nature      | 1        |
| nature      | 2        |
| nature      | 3        |
+-------------+----------+ 
```

我只想获得与用户 1 和 2 相同的参数>>“web”（没有“nature”）

```
+-------------+
| web         |
+-------------+ 
```

现在我正在使用这个查询，但它是错误的，因为它返回了“web”和“house”。

```
select argument from argument_user 
where user_id in ('1','2') 
group by argument having count(distinct(user_id)) = 2

+-------------+
| web         |
| nature      |
+-------------+ 
```

我想用同一张桌子做一个连接，但我认为当用户更多时它太重了！不是吗？因此，可以使用大量“user_id”来轻松使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:59:41.110

使用几个 JOIN

```
SELECT *
FROM argument_user a
INNER JOIN argument_user b
ON a.argument = b.argument
LEFT OUTER JOIN argument_user c
ON a.argument = c.argument
AND c.user_id NOT IN (1,2)
WHERE a.user_id = 1
AND b.user_id = 2
AND c.user_id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T08:21:34.257

这个 sql 查询会很好地为你工作

```
select * 
from (
(
    select argument
        ,GROUP_CONCAT(user_id order by user_id) as user_id
    from argument_user
    group by argument
    ) as TEMP
)
group by argument
having user_id = '1,2'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:29:29.223

尝试这个：

```
select argument,count(*) from table1
where user_id in ('1','2') 
and argument not in(select argument from table1 group by argument having count(*) <> 2)
group by argument
having count(*)=2 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/4d18d/16)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T15:46:44.920

假设 user_id 已编入索引，无论您向表中添加多少用户，WHERE 子句中的 IN 都会使此查询快速进行。

我会使用表的连接本身而不是具有 disticnt。WHERE 中的 IN 子句再次使连接处理的实际评估集非常小（假设您的 in 语句中没有数百个用户！）

此外，如果 user_id 是整数，请不要在 IN 子句中引用它们——这是不必要的类型转换。

# emacs - 在 emacs markdown-mode 中导航标题

> ID：12899152
> 
> 赞同：2
> 
> 时间：2012-10-15T15:42:08.767
> 
> 标签：emacs, markdown, aquamacs

我正在使用带有降价模式的 Aquamacs。两个问题。

1.  [Markdown Mode](http://jblevins.org/projects/markdown-mode/)表示您可以使用键绑定 SHIFT-TAB 来循环标题的全局可见性。但是当我按 SHIFT-TAB 时，我得到“kill ring is empty”，我看到它正在调用“yank”命令。

这里有什么干扰 Markdown 模式？我试过这个：

```
(global-unset-key (kbd "<S-tab>") ) 
```

但这并没有什么不同。我仍然得到“杀戮戒指是空的”

如何取消设置“yank”并重新分配 SHIFT-TAB 以循环全局可见性？

1.  在 Markdown 模式下，有没有办法在间接缓冲区中打开子树？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T04:57:17.870

来自开发者 Jason Blevins：

> 在新版本中（很快就会出现在 Git 存储库中），我已经包含了一个补丁，用于更全面的标题循环键绑定。问题是“shift-tab”的行为在不同平台上是完全不同的。（有关更多详细信息，请参见此处：http: [//lists.gnu.org/archive/html/emacs-devel/2010-08/msg00061.html](http://lists.gnu.org/archive/html/emacs-devel/2010-08/msg00061.html)）。
> 
> 您正在寻找的功能是“markdown-shifttab”。我现在已经为这个函数添加了绑定。希望这应该对您的系统有用。
> 
> 该补丁只涉及添加两行：

```
diff --git a/markdown-mode.el b/markdown-mode.el
index 9fb5123..ca04704 100644
--- a/markdown-mode.el
+++ b/markdown-mode.el
@@ -1804,6 +1804,8 @@ it in the usual way."
     ;; Visibility cycling
     (define-key map (kbd "<tab>") 'markdown-cycle)
     (define-key map (kbd "<S-iso-lefttab>") 'markdown-shifttab)
+    (define-key map (kbd "<S-tab>")  'markdown-shifttab)
+    (define-key map (kbd "<backtab>") 'markdown-shifttab)
     ;; Header navigation
     (define-key map (kbd "C-M-n") 'outline-next-visible-heading)
     (define-key map (kbd "C-M-p") 'outline-previous-visible-heading) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:30:00.143

SHIFT-TAB 不是默认的全局键绑定之一。我怀疑你要么自己在 .emacs 中的某个地方设置了这个，要么你有一个使用这个绑定的次要模式。从您的降价缓冲区中，输入`C-h b`. 这将打开一个新缓冲区，列出当前有效的所有键绑定。在该列表中搜索“选项卡”，看看是否可以找到有问题的次要模式。如果它确实出现在全局地图中，则意味着您的 .emacs 中有一些东西导致了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-30T04:01:07.763

如果你使用邪恶，你可以`za`在标题处输入。

# java - 将本机 java 对象映射到自己的实现类

> ID：12899160
> 
> 赞同：0
> 
> 时间：2012-10-15T15:42:23.163
> 
> 标签：java, hibernate, object, mapping

我使用休眠调用数据库

```
List<Object> result = session.openSession().createSQLQuery(myNativeSQLQuery).list(); 
```

不，我可以遍历该列表

```
Iterator iter = result.iterator();
while(iter.hasNext()){
    Object[] item = (Object[]) iter.next();
} 
```

但是那个对象对我自己没有用，所以我想让那个对象映射到我实现的类上。

```
public class MyClass {

    private Long id;

    private String name

    private Set<MySecondClass> myList

    public void myFunc(){
        // do sth with that id or any other attribute mapped
    }   
} 
```

我不想使用休眠注释和东西，因为定义的类将由定义本机 sql 查询的 xml 文件填充数据。这样，我想将生成的文档具体化到 mongodb 中以进行快速数据访问。

您在下面看到的此类 xml 文件的示例

```
<?xml version="1.0" encoding="UTF-8"?>
<mapping>
<resource>myResource</resource> <!-- the resource table in mysql where the base query is executed -->
<destination>myDestination</destination> <!-- the destination collection in mongodb -->

<document mapped="MyClass"> <!-- that docuemnt and the base query will be mapped on the class "MyClass"

    <base sql="select id, name from table1" />
    <reference id="_ID_" column="id" /> <!-- use the result from the base query and replace the placeholder _ID_ of all following sql querys with the value of id in that current iteration -->

    <lists>
        <myList mapped="MySecondClass" sql="select col1, col2 from table2 where referenceId=_ID_" /> <!-- each element of that listed will be mapped on MySecondClass and fills the property "myList"
    </lists>

</document> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:38:45.363

结果是我不需要复制/映射对象。我只是可以使用注释*org.springframework.data.mongodb.core.mapping.Document*和来自 spring 数据的抽象类*com.mongodb.BasicDBObject 。*

```
@org.springframework.data.mongodb.core.mapping.Document
public class BasicDocument extends BasicDBObject {

} 
```

之后我可以创建只是做

```
BasicDocument doc = new BasicDocument();
doc.put("key", "value"); 
```

并将该文档存储到 mongodb 中。这样我什至可以创建列表。

# c# - Ruby 中的 .NET 并行 LINQ 等效项

> ID：12899162
> 
> 赞同：0
> 
> 时间：2012-10-15T15:42:26.097
> 
> 标签：c#, ruby, plinq

我希望能够在 Ruby 中做这样的事情：

```
(new[]{"http://google.com", "http://facebook.com", "http://microsoft.com", "http://twitter.com", "http://stackoverflow.com"})
.AsParallel()
.Select(q => WebRequest.Create(q).GetResponse()) 
```

这也应该保留元素的顺序并使用延迟执行。有没有可用的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:00:21.987

Ruby[遏制](https://github.com/taf2/curb)gem 是`curl`库的包装器，具有“多”模式，可以并行获取多个 URL。

从例子：

```
# Make multiple GET requests
easy_options = { :follow_location => true }
multi_options = { :pipeline => true }

Curl::Multi.get('url1','url2','url3','url4','url5', easy_options, multi_options) do |easy|
  # do something interesting with the easy response
  puts easy.last_effective_url
end 
```

# git - SourceTree 中的 git 子模块更新在哪里？

> ID：12899163
> 
> 赞同：38
> 
> 时间：2012-10-15T15:42:30.747
> 
> 标签：git, git-gui, atlassian-sourcetree

如何更新 SourceTree 中的 git 子模块？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-03T19:18:04.687

我自己找不到答案，所以我创建了一个自定义操作。转到首选项、自定义操作，然后输入以下信息：（这是在 Mac 上。您的 git 可执行文件的路径可能会有所不同。） ![git 子模块更新自定义操作](../Images/f07f98ebd2e4358f4af0fc723234e4b1.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-09T17:25:37.160

只需双击子模块或左键单击并打开模块 ![在此处输入图像描述](../Images/c5d96d65563b6349b52921b8d8dd3f58.png)

一旦进入子模块，UI 就像任何 git repo 一样，按下 pull/fetch 以更新到标题。瞧。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-25T19:57:13.207

这是[Windows](/questions/tagged/windows "显示标记为“windows”的问题")版本：

![在此处输入图像描述](../Images/1673d18dfc1a8e64772fb129a81ac205.png)

此命令假定您的位置`sh.exe`- 取决于您设置 SourceTree 的方式，它可能位于其他位置。

```
/c %LOCALAPPDATA%\Atlassian\SourceTree\git_local\bin\sh.exe --login -i -c "git submodule update""" 
```

不确定这是否是一个错误 - 但在我使用的 Sourcetree 版本（v1.6.14.0）中，我发现`""`最后需要额外的一对引号 - 否则存在额外的引号，然后不平衡的语句会导致`sh`大叫：

```
cmd "/c %LOCALAPPDATA%\Atlassian\SourceTree\git_local\bin\sh.exe --login -i -c "git submodule update""
sh: unexpected EOF while looking for matching `"'
sh: syntax error: unexpected end of file

Completed with errors, see above. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-10-14T02:53:28.613

我正在使用源代码树 v3.4.6，您可以通过菜单**Tools\Options启用它** [![在此处输入图像描述](../Images/809e0b4cd619a9d50e91445085267fdc.png)](https://i.stack.imgur.com/IZpPG.png)

克隆时，您应该启用**递归子模块** [![在此处输入图像描述](../Images/528c416ef1bcb2a25b634a692fd42a13.png)](https://i.stack.imgur.com/UhDSf.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-23T11:00:03.113

Isuru 提供的[链接](https://blog.sourcetreeapp.com/2012/02/01/using-submodules-and-subrepositories/)确实包括如何执行更新（查找“更改您的存储库正在跟踪的子模块提交”）

简而言之，在主存储库中，

*   选择子模块下拉菜单
*   双击要更新的子模块 - 您将焦点切换到子模块
*   拉（最新）或签出（特定提交）所需的更新
*   返回主存储库的选项卡
*   主存储库中将有一个未提交的更改（使用哪个子模块提交）
*   提交并推送更改

# c# - 如何禁用 Windows 服务 C# 的超时？

> ID：12899166
> 
> 赞同：3
> 
> 时间：2012-10-15T15:42:34.327
> 
> 标签：c#, windows-services, timeout

我有一个运行和启动良好的 Windows 服务，但是，它运行一个后台线程（其中多个），它执行一些严肃的计算。

经过一番挖掘，我发现这是由于所有 Windows 服务都有超时。目前，它从数据库中的表中读取，将其加载到对象中，然后对所述对象进行一些分析。这一切都在 OnStart 方法中完成，然后调用其他方法。是否有一些技巧可以让服务保持运行，或者有什么方法可以在不进入注册表的情况下停止超时？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:10:58.403

OnStart 函数不是需要长时间执行的逻辑的地方。基本上，您需要在 OnStart 函数之外为您的逻辑创建一个类。您需要公开声明一个入口函数——即获取数据并开始处理它的函数。

例如

```
class ProcessingClass()
{
    public void ThreadStartProc()
    {
         GetData();
         StartProcessing();
    }
 } 
```

在您的 onStart 方法中，创建一个新 Thread 并将 ThreadStart 设置为您的 ThreadStartProc 函数。例如

```
Thread ProcessingThread;
ProcessingClass procClass = new ProcessingClass();

protected override void OnStart(string[] args)
{
    ProcessingThread = new Thread(new ThreadStart(procClass.ThreadStartProc));
    ProcessingThread.Start();
}

protected override void OnStop()
{
     if (ProcessingThread != null)
     {
          ProcessingThread.Abort();
          ProcessingThread.Join();
          ProcessingThread = null;
     }
} 
```

在您的处理类中，您需要处理服务停止时将抛出的 ThreadAbortException。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T15:45:35.347

1.  将您的逻辑移出 OnStart 方法。

2.  使用 Service.RequestAdditionalTime() 方法。

看到这个答案：[windows service startup timeout](https://stackoverflow.com/questions/216401/windows-service-startup-timeout)

# java - 设置 NetBeans 提示以在通过具有 int 签名的方法返回 Integer 时发出警告

> ID：12899169
> 
> 赞同：1
> 
> 时间：2012-10-15T15:42:43.890
> 
> 标签：java, netbeans, methods, integer, int

我的代码中有一个严重的错误，幸运的是我发现了:)，因为我忘记更改方法的返回类型签名（从 int 到 Integer）并且我的应用程序在没有任何警告的情况下崩溃。

我有以下方法：

```
public static int getDataSourceIdForName(String name) {
    Integer i = dsNameToIdMap.get(name);
    return i;
} 
```

它使我的应用程序崩溃。我观察到它只有在发生特殊情况并且`name`实际上不在地图（`Map<String, Integer> dsNameToIdMap = new HashMap<>()`）中时才会崩溃，因此它返回 null。我希望一个正在运行的应用程序会抛出一个`NullPointerException`错误，但事实并非如此，该应用程序简直快死了，我有一个充满兴奋的旅程来找到这个错误 :)

因为我希望我的 IDE 支持在未来避免这些情况，所以我问你们**如何设置`NetBeans`以警告这些情况，即当我在返回签名是原始类型的函数中返回对象时，**因为我我自己无法弄清楚。

**更新：** 我发现了真正的问题。正如 Jon 正确论证的那样，代码实际上是在抛出`NullPointerException`:) 只有我的客户“生存机制”才隐藏它，正如您在下面的示例中看到的那样：

```
public class WhyNoNullPointerException {
    private static int test() {
        Integer i = null;
        return i;
    }

    public static void main(String[] args) throws InterruptedException {
        Thread t = new Thread(new Runnable() {
            @Override
            public void run() {

                for (int i = 0; i < 100; i++) {
                    System.out.println("i = " + i);
                    if (i == 10) {
                        try{
                           test();
                        }finally{
                            run();
                        }
                    }
                }
            }
        });
        t.setDaemon(true);
        t.start();
        Thread.sleep(1111);
    }
} 
```

由于程序最终试图通过重新启动其主操作循环来保持活力，因此它“隐藏”了`NullPointerException`.

为了避免将来出现这种情况，我现在总是在这个自我重启的代码中，在 finally 块之前添加一个 catch 作为一个好习惯，这样异常就不会“丢失”（我首先在我的代码在那里读取了一个字节，可以抛出`IOException`）。

至于提示的开发，我发现了一个非常好的教程，我今天将学习它，希望会有一个工作提示（下面的链接）。感谢您的链接家伙（@JonSkeet 和@Nambari），他们在寻找更多关于提示开发的信息方面非常有用。

[NetBeans Java 提示模块教程。](http://platform.netbeans.org/tutorials/nbm-java-hint.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:49:34.107

它*确实*抛出`NullPointerException`：

```
import java.util.*;

public class Test {
    private static final Map<String, Integer> map
        = new HashMap<String, Integer>();

    public static void main(String[] args) {
        getInt("Foo");
    }

    public static int getInt(String name) {
        Integer i = map.get(name);
        return i;
    }
} 
```

结果：

```
c:\Users\Jon\Test>java Test
Exception in thread "main" java.lang.NullPointerException
        at Test.getInt(Test.java:13)
        at Test.main(Test.java:8) 
```

现在您可能希望*也*可能不希望 NetBeans 在自动拆箱时发出警告……但至少值得先检查一下发生了什么 :)

我找到了一个突出显示自动装箱/拆箱和可变参数的[插件](http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=4130)，但它非常旧，您使用的版本可能不支持。

我*希望*这可以作为编译器选项进行配置（它在 Eclipse 中），但我没有足够的 NetBeans 经验来多说。

# php - 使用预定义字符替换 URL 编码字符

> ID：12899171
> 
> 赞同：1
> 
> 时间：2012-10-15T15:42:45.923
> 
> 标签：php, url, url-rewriting, urlencode, url-encoding

我正在尝试对动态生成或 url 进行万无一失，以便没有丑陋的 url 编码字符。我使用 MySQL 数据库中的数据生成 url。

例如，我通过用破折号 (-) 替换空格来生成 url 的标题字段。

```
domain.com/movie/the-terminator/ 
```

问题是我无法预料标题中可能出现的所有角色。这意味着生成的 url 不会与浏览器栏中的实际 url 匹配，因为它会被编码。

是否有任何可用的 php 代码可以进行此替换？我不想手动进行，因为要编码的字符很多。我还想替换一些其他字符，例如括号“（”和“）”。这可能是一种特殊的 php 方法，可以用定义的值替换 url 编码的字符，如果是这样，请告诉我，因为这可以很容易地解决我的问题，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:45:40.523

看看这个链接。[http://cubiq.org/the-perfect-php-clean-url-generator](http://cubiq.org/the-perfect-php-clean-url-generator) - “完美的 PHP 清洁 URL 生成器”

例子：

```
setlocale(LC_ALL, 'en_US.UTF8');
function toAscii($str, $replace=array(), $delimiter='-') {
    if( !empty($replace) ) {
        $str = str_replace((array)$replace, ' ', $str);
    }

    $clean = iconv('UTF-8', 'ASCII//TRANSLIT', $str);
    $clean = preg_replace("/[^a-zA-Z0-9/_|+ -]/", '', $clean);
    $clean = strtolower(trim($clean, '-'));
    $clean = preg_replace("/[/_|+ -]+/", $delimiter, $clean);

    return $clean;
} 
```

# struts2 - 如何在 Struts2 中实现自定义 404 页面

> ID：12899183
> 
> 赞同：0
> 
> 时间：2012-10-15T15:43:40.430
> 
> 标签：struts2, http-status-code-404, action-mapping

我正在学习 struts2 应用程序开发，感谢一些帮助实现自定义 404 页面。在我的应用程序中，

**web.xml 有以下内容：**

```
<error-page>
    <error-code>404</error-code>
    <location>/jsp/pub/error404.jsp</location>
</error-page> 
```

**struts.xml 有：**

```
 <package name="actions-default" extends="struts-default">

    <global-results>
        <result name="exception">/jsp/pub/exception.jsp</result>
    </global-results>

    <global-exception-mappings>
        <exception-mapping exception="java.lang.Exception"
            result="exception" />
        <exception-mapping exception="java.lang.RuntimeException"
            result="exception" />
    </global-exception-mappings>

</package> 
```

**另外，在 struts.xml 中将 devMode 设置为 false**

```
<constant name="struts.devMode" value="false" /> 
```

**error404.jsp :** [请点击这里查看jsfiddle的jsp源码](http://jsfiddle.net/Jk5Je/)

**问题：**

当我使用无效的 url 或未映射的操作点击应用程序时，我看到的是以下消息，而不是我的自定义 404 页面

```
"HTTP Status 404 - There is no Action mapped for namespace [/] and action name [invalidurl] associated with context path" 
```

在应用程序控制台中，我看到以下内容：

> 严重：异常处理 ErrorPage[errorCode=404, location=/jsp/pub/error404.jsp] org.apache.jasper.JasperException：在第 6 行处理 JSP 页面 /jsp/pub/error404.jsp 时发生异常

```
6: <s:url value='/' var="contextPrefix" /> 
```

如果我删除所有“s”标签并将 error404.jsp 设置为纯 jsp 页面，那么我可以看到自定义 404 页面。我在哪里做错了？任何解决此问题的帮助都会有很大帮助。

提前致谢

小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:03:23.710

大多数 S2 JSP 标记都希望在 S2 请求的上下文中运行。直接引用 JSP 绕过了 S2 请求过程，所以没有 valuestack，所以大多数标签都坏了。

# java - 在 gradle 的构建任务中重新排序编译任务

> ID：12899185
> 
> 赞同：1
> 
> 时间：2012-10-15T15:43:42.727
> 
> 标签：java, groovy, clojure, build-process, gradle

我正在尝试在如下目录结构中构建具有一些 java 源代码和 clojure 源代码的项目：

```
src
`-- main
    |-- clojure
    |   `-- appc
    |       `-- core.clj
    `-- java
        `-- appj
            `-- AppStarter.java 
```

我已经在我的 gradle 构建文件中加载了`java`,`clojure`和`application`插件。Clojure 插件来自[https://bitbucket.org/kotarak/clojuresque/overview](https://bitbucket.org/kotarak/clojuresque/overview)，版本*1.5.2*。

在这里，clojure 代码`core.clj`中包含使用 java 编写的类的代码。但是 java 源代码中没有任何内容依赖于 clojure 代码。

现在，当我这样做时`gradle tasks --all`，我看到了

```
...
classes - Assembles the main classes.
    compileClojure - Compile the main Clojure source.
    compileJava - Compiles the main Java source.
    processResources - Processes the main resources.
... 
```

因此，该`build`任务将首先编译我的 clojure 源代码，然后再编译 java 源代码。这显然是行不通的，因为 clojure 代码依赖于 java 部分。所以我需要`compileJava`发生之前`compileClojure`。

更改应用`clojure`和`java`插件的顺序没有任何效果。

由于clojure插件是新的，我尝试了`groovy`and`scala`插件。在每种情况下，我都得到了以下信息。

```
...
classes - Assembles the main classes.
    compileGroovy - Compile the main Groovy source.
    compileJava - Compiles the main Java source.
    processResources - Processes the main resources.
... 
```

和

```
...
classes - Assembles the main classes.
    compileJava - Compiles the main Java source.
    compileScala - Compile the main Scala source.
    processResources - Processes the main resources.
... 
```

我想应该有办法重新排序这些对吗？我在文档中找不到（尽管它们*非常*好！）。有什么方法可以告诉 gradle 先编译我的 java 源代码构建，然后再编译 clojure 源代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:11:08.123

获得正确的订单就像`compileClojure.dependsOn(compileJava)`. 另一个问题是 Java 类是否正确放置在 Clojure 编译器的类路径中。

PS：`gradle tasks`输出中的任务顺序没有说明任务执行的顺序。任务执行的顺序完全由任务依赖决定。

# javascript - 为什么此脚本无法运行？

> ID：12899188
> 
> 赞同：-3
> 
> 时间：2012-10-15T15:43:51.750
> 
> 标签：javascript, jquery

无论出于何种原因，从控制台运行时都会起作用：

```
var wh=window.innerHeight;
var h= wh-345;
$('.hidehome').attr('style', 'display:block;height:'+h+'px;width:100%'); 
```

但这不是：

```
$(document).ready(function() {
var wh=window.innerHeight;
var h= wh-345;
$('.hidehome').attr('style', 'display:block;height:'+h+'px;width:100%'); )}; 
```

我不知道为什么。控制台告诉我

```
Syntax error at line 4: expected expression, got ')'
h+'px;width:100%'); )};
--------------------^ 
```

这显然意味着我的代码有问题，但我仍然无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T15:45:26.687

你的括号和花括号需要互换：

```
$('.hidehome').attr('style', 'display:block;height:'+h+'px;width:100%'); )};
                                                                         ^^
                                                                     Right here 
```

另外，考虑使用以下`css`方法：

```
$('.hidehome').css({
    'display': 'block',
    'height': h + 'px',
    'width': '100%'
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:45:37.373

代替

```
)}; 
```

这样 ：

```
}); 
```

您必须先关闭函数定义，然后再调用`document.ready(...)`.

当你遇到这样的问题找不到时，试着用缩进扩展你的代码，问题就会很明显：

```
$(document).ready(
    function() {
        $('.hidehome').attr(
            'style',
            'display:block;height:'+h+'px;width:100%'
        );
    ) // <= doesn't match
}; // <= doesn't match 
```

事实上，我通常更喜欢这种扩展和对称的形式。非对称支撑的代码让我很痛苦，因为乍一看结构不可读。

# ruby-on-rails-3 - Rails 3：包括特定的关联

> ID：12899191
> 
> 赞同：1
> 
> 时间：2012-10-15T15:44:01.367
> 
> 标签：ruby-on-rails-3, activerecord, polymorphic-associations

我对急切加载功能有一些问题：

具有以下（简化的）关联

```
class Reservation < ActiveRecord::Base
  has_and_belongs_to_many :alleys
end 
```

和

```
class Alley < ActiveRecord::Base
  has_and_belongs_to_many :reservations
end 
```

我想包括对具有特定属性的小巷的预订（在这种情况下，我想为每个小巷加载给定日期的所有预订）。

就像是

```
Alley.includes(:reservations).where("reservations.date = ?", Date.today) 
```

但这会过滤掉所有没有有效预订的小巷。

有没有办法将过滤器应用于包含机制，以便为每个小巷“填充”关联 an_alley.reservations（即使对于那些没有有效保留的人）。

我很遗憾地删除了我以前主要在这里找到的实现这一目标的所有尝试，但我确实尝试将我的小巷表与保留表进行左外连接，这显然导致每个小巷都有多个条目。

任何建议或参考都会对我有所帮助。

提前致谢。

# php - 从外部 php 文件调用 PHP

> ID：12899192
> 
> 赞同：0
> 
> 时间：2012-10-15T15:44:04.237
> 
> 标签：php, html

我想要做的是将我所有的变量放在一个外部 php 文件中，然后在不同的页面上调用它们。我正在为多个项目创建工作流程，所有这些项目都遵循相同的流程，但有一些不同的信息，例如电话号码和费用。所以我想要完成的是将所有变量放在一个外部文件中，这样如果项目发生变化，我可以编辑一个文件，而不是打开我创建的 23 个不同的工作流程。

这只是所有外部文件的一个示例，但针对 31 个不同的项目和每个项目 14 个不同的变量。

```
<?php
$project_id = $_GET["project_id"];

switch ($project_id) {
case "fl":
    $title = "Florida EPC";
    $replacement_fee = "$4";
    break;
case "tx":
    $title = "Texas EPC";
    $replacement_fee = "$6";
    break;
}
?> 
```

然后只是每个工作流程的基本概要

```
<div id='a1' style="display:block;">
<div align="center" style="border-bottom: 1px solid black;">
<b>Check the CARDS tab for the PAN.</b><br /><br />

</div>
&nbsp;
 <div align="center">
<p><i>"I'm sorry to hear you have lost your card. I can cancel the Lost card for your protection."</i></p><br><br>
 <font color="red">Was the PAN issued?</font><br /><br />
<a class="button" href="javascript:switchid('a2');"><span>Yes</span></a>&nbsp;&nbsp;
<a class="button" href="javascript:switchid('a3');">No</a>
</div>
</div>

<div id='a2' style="display:none;">
<div align="center">
<p><b>Advise the client the card was previously cancelled.</b></p>
<p><i>"Your card has already been deactivated as of (date of deactivation)."</i></p>    <br><br>
<font color="red">Is the address up to date?</font><br /><br />
<a href="javascript:switchid('a4');">Yes</a>&nbsp; &nbsp;
<a href="javascript:switchid('a5');">No</a>
</div>
</div> 
```

在一些 div 中，我将放置的只是`<?php echo $avariable; ?>`何时使用不同的信息。我只需要能够在每个工作流程上调用外部文件，并且无法弄清楚那部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:45:38.823

您需要的是 require_once 语句。

更多信息请访问[http://php.net/manual/en/function.require-once.php](http://php.net/manual/en/function.require-once.php)

require_once 可以在所有页面的顶部使用，即使包含嵌套，也只会包含一次文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:47:18.420

[PHP手册：包括](http://php.net/manual/en/function.include.php)

例子： `include 'vars.php';`

其他可能性：

*   [包含一次](http://php.net/manual/en/function.include-once.php)
*   [要求](http://php.net/manual/en/function.require.php)
*   [要求一次](http://php.net/manual/en/function.require-once.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:49:52.237

就我个人而言，我会推荐[REQUIRE_ONCE](http://php.net/manual/en/function.require-once.php)而不是 Include，因为它最终更安全。您可能还想检查[DEFINE](http://php.net/manual/en/function.define.php)，以便可以使用常量而不是变量。

# asp.net - “由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例”

> ID：12899197
> 
> 赞同：0
> 
> 时间：2012-10-15T15:44:17.243
> 
> 标签：asp.net, sql-server, visual-studio

> **可能重复：**
> [由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例。连接将关闭](https://stackoverflow.com/questions/7375857/failed-to-generate-a-user-instance-of-sql-server-due-to-a-failure-in-starting-th)

我正在使用 sql server 2005 完整版，这是我的连接字符串：

```
 <add name="xx" connectionString="Data Source=xx\SQL2005;Initial Catalog=xx;Connect Timeout=180;uid=xx;pwd=xx;"/> 
```

我在 Sql 服务器上使用附加的 db 未连接到 mdf 文件。部署后出现此问题，并且在 VS 上运行时运行良好

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:02:29.450

之前有人问过这个问题：

[由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例。连接将关闭](https://stackoverflow.com/questions/7375857/failed-to-generate-a-user-instance-of-sql-server-due-to-a-failure-in-starting-th)

也许那里有什么有用的东西？

# javascript - SVG/D3 组闪烁一次然后过渡

> ID：12899198
> 
> 赞同：1
> 
> 时间：2012-10-15T15:44:17.803
> 
> 标签：javascript, svg, d3.js, transition

我创建了一个组，如下所示：

```
 d3.select("#" + chartId).selectAll("g.barChart")
    .append("g")
        .attr("class", "bar")
        .attr("id", chartId)
        .attr("style", "opacity:0"); 
```

再往下看代码，我有这个，所以组会淡入：

```
graph = d3.select(".bar#"+chartId);
graph.transition().delay(300).duration(2000).attr("style", "opacity:1.0"); 
```

我不知道为什么这些组在淡入之前会闪烁一次或多次。当我注释掉上面的过渡线时，这些组保持不可见。这应该意味着没有其他原因导致闪光。我被难住了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:26:57.693

当在 D3 上应用转换时，`style`尝试从字符串中插入值，可能会出现问题。尝试将不透明度转换为属性，而不是将其包含在`style`：

```
 d3.select("#" + chartId).selectAll("g.barChart")
    .append("g")
        .attr("class", "bar")
        .attr("id", chartId)
        .attr("opacity", "0");

graph = d3.select(".bar#"+chartId);
graph.transition().delay(300).duration(2000).attr("opacity", "1"); 
```

# .net - 为什么 NUnit 需要旧版本的框架？

> ID：12899202
> 
> 赞同：2
> 
> 时间：2012-10-15T15:44:38.623
> 
> 标签：.net, visual-studio-2010, unit-testing, nunit

这是我第一次尝试使用 NUnit。我已经使用 NuGet 将 NUnit 安装到了我的 Visual Studio 项目中。如下图所示，它引用了 nunit.framework，版本 2.6.1.12217...

![视觉工作室项目](../Images/52f344022e0e56187d3a55db1443626a.png)

...然后我安装了最新的 Windows 应用程序 (NUnit-2.6.1.msi)....

![视窗应用](../Images/403ed3eca9999d8a86b2bf0458d0fc80.png)

...并试图加载我的测试程序集...

![加载失败](../Images/1255a835c7de6d850fcbe66c85e6df42.png)

...但由于某种原因，它需要 nunit.framework 的 2.5.10.11092 版本。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T16:27:44.843

另一种可能性是您正在引用第三方程序集，该程序集在特定版本的 nunit.framework 上具有引用。

例如，我遇到了同样的问题，因为我有一个参考`TeamAgile.UnitTestExtensions.dll`

要检查特定程序集是否有对 nunit.framework.dll 的引用，请使用 ILDASM 并`extern`检查`MANIFEST`.

![ILDASM 截图](../Images/69abeaad1735cad89be360a3d9562ba8.png)

从截图可以看出，这个程序集引用了 nunit.framework 的 2.4.6 版本。

要解决此问题，请将绑定重定向条目添加到应用程序配置文件以将旧版本映射到新版本。

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="nunit.framework" publicKeyToken="96d09a1eb7f44a77" culture="Neutral" />
        <bindingRedirect oldVersion="2.5.10.11092" newVersion="2.6.1.12217" />
      </dependentAssembly>
      ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:07:23.313

您的一个测试项目（或他们引用的第三方/项目）引用了该特定版本。检查所有引用 NUnit 的 csproj 文件并查找该版本。

一种简单的确保方法是在 *.csproj 中“在文件中搜索”“ *2.5.10.11092* ”（我为此使用记事本++）。

如果任何地方都没有对旧版本的具体引用，那么旧版本可能仍在 GAC 中 - 尝试具体引用新版本，这应该会“战胜”它。

编辑 - 参考示例：

```
<Reference Include="nunit.framework">
  <HintPath>..\..\..\ExternalLibrary\NUnit\nunit.framework.dll</HintPath>
</Reference> 
```

# ios - 自定义 UITableViewCell IOS

> ID：12899203
> 
> 赞同：0
> 
> 时间：2012-10-15T15:44:39.373
> 
> 标签：ios, uitableview, background-color

这是目前我的单元格的样子：[http ://tinypic.com/view.php?pic=344uz2a&s=6](http://tinypic.com/view.php?pic=344uz2a&s=6)

可以看出，由于某种原因，它拒绝用 backgroundColor 白色填充单元格的右侧部分。而且我不知道为什么或可能是什么问题？

这就是我实现 TableView / Cells 的方式。在 viewDidLoad 我将整个 tableView 设置为 clearColor 以隐藏“emptyCells”。

```
- (void)viewDidLoad{

 self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero];
 tableView.backgroundColor = [UIColor clearColor];
} 
```

在下面的方法中，我尝试设置单元格背景颜色。不幸的是，如上所述，它拒绝在单元格中将 whiteColor 设置为右侧。

```
- (UITableViewCell *)tableView:(UITableView *)pTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"SearchCell";
UITableViewCell *cell = [pTableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:CellIdentifier];
}
Task *task = [self.searchResults objectAtIndex:indexPath.row];

UILabel *nameLabel = (UILabel *)[cell viewWithTag:1];
UILabel *bookLabel = (UILabel *)[cell viewWithTag:2];
UILabel *chapterLabel = (UILabel *)[cell viewWithTag:3];

[nameLabel setText:task.name];
[bookLabel setText:task.book.name];
[chapterLabel setText:task.chapter.name];

cell.backgroundColor =  [UIColor whiteColor];
cell.contentView.backgroundColor =  [UIColor whiteColor];
cell.backgroundView.backgroundColor = [UIColor whiteColor];

return cell;
} 
```

有任何想法吗？我错过了什么或者我能做些什么来解决这个“颜色”问题？致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:23:59.770

看起来您需要设置附件视图的背景颜色，如下所示：

```
self.accessoryView.backgroundColor = [UIColor whiteColor]; 
```

如果您查看背景视图的边界，它可能不会跨越整个表格单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:19:22.813

尝试

```
cell.backgroundView.backgroundColor = [UIColor whiteColor]; 
```

或者

```
cell.backgroundView.layer.backgroundColor = [UIColor whiteColor].CGColor; 
```

# c# - 在 C# 中监视命名管道

> ID：12899207
> 
> 赞同：5
> 
> 时间：2012-10-15T15:44:49.770
> 
> 标签：c#

如何监控命名管道？`FileSystemWatcher`无法监控`\\\\.\pipes`。有没有类似于 FSW 的东西可以用于命名管道？目前我轮询任何新的命名管道创建，但这似乎有点无效。

我想监视我感兴趣的管道的创建。当管道已经创建时，命名管道的列表很好。我将弹出几个程序实例，每次弹出时，我都希望能够使用命名管道自动连接它而无需轮询。似乎没有这样的机制可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T01:16:26.210

您不能观察命名管道*本身*，但您可以等待其他事情。我对此的解决方案是创建一个事件，然后等待。当服务器程序创建它的管道时，它也会发出事件信号。当客户端收到信号时，关闭事件并打开管道。

当您收到管道已关闭的指示并且您需要再次注意它时，重新打开事件并等待。

如果您有多个管道，您可能希望为每个管道 ( `EventForPipe-*pipename*`) 设置一个单独的事件，或者您可能希望拥有一个用于所有管道的事件，并在事件发出信号时简单地检查每个管道。

这将适用于本地管道，但不适用于远程管道，因为无法发出信号或等待远程事件。如果您必须监视另一台计算机上的管道，则拥有该管道的计算机也可以有一个共享目录，可用于发送信号。由于可以监视共享目录的文件更改，因此您可以在创建管道时创建文件。请注意，您仍然需要定期轮询（可能每分钟一次）才能使此策略起作用，因为远程服务器可能无法满足所有远程文件通知请求。

# matlab - Matlab设置containers.Map的所有值

> ID：12899208
> 
> 赞同：2
> 
> 时间：2012-10-15T15:44:57.957
> 
> 标签：matlab, map

我在 Matlab 中有一个名为 myMap 的地图，带有`string,int`对。
我想对所有值执行一个操作（比如给所有值加 2）。我该怎么做 ？
我试过

```
 myMap(keys(myMap)) = myMap(keys(myMap)) + 2 
```

但它给出了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:53:05.613

```
myMap=containers.Map(myMap.keys,cell2mat(myMap.values)+2) 
```

# jquery - 如何配置 Tomcat7 以使用 Jquery？

> ID：12899212
> 
> 赞同：0
> 
> 时间：2012-10-15T15:45:13.770
> 
> 标签：jquery, eclipse, tomcat, primefaces

我正在开发一个带有组件的 Web`Tomcat 7`应用`JSF`程序`Primefaces`。我有一些麻烦，因为本地服务器不执行任何 ajax 事件，也不是最简单的。

我想知道是否有一些配置要使用`JQuery`，这是`Primefaces`, on所需要的`Tomcat`。我是否还必须`JQuery`在我的 Eclipse 项目中包含库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:52:54.267

`Tomcat`与 无关`JQuery`。如果您已经在使用`PrimeFaces`它`JQuery`，您只需将其正确导入`XHTML`页面的 head 部分。例如，我正在使用`JQuery`from`PrimeFaces`并且我构建了以下`XHTML`头部：

```
<h:head xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core">
    <meta http-equiv="X-UA-Compatible" content="EmulateIE8"/>
    <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
    <title>
        <h:outputText value="#{msg['application.name']}"/>
    </title>
    <f:view locale="en"/>
    <link type="text/css" rel="stylesheet" href="#{facesContext.externalContext.requestContextPath}/css/style.css"/>
    <h:outputScript library="primefaces" name="jquery/jquery.js"/>
</h:head> 
```

这：

```
<h:outputScript library="primefaces" name="jquery/jquery.js"/> 
```

行将导入`JQuery`from`PrimeFaces`并且您将能够在您的项目中使用它。不要忘记`JQuery`从您的项目中删除所有其他库并仅使用来自`PrimeFaces`.

# sql-server-2008 - Server 2008 XML 数据扩展错误上的 SSRS 2008 R2

> ID：12899215
> 
> 赞同：0
> 
> 时间：2012-10-15T15:45:17.623
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我有一个通过 SSRS 显示 soem 报告的 MVC 3 项目。我在 Windows 7 计算机上设置了一切，它工作正常。我们刚刚在一台新计算机上安装了 Server 2008，我正在尝试让一切都通过 IIS 运行。除了我用于报告的数据源之外，一切都很好。我让它从 Web 服务中获取 XML 数据以显示在报告中。当我将所有报告信息部署到 Server 2008 SQL 实例时，查看数据源时出现以下错误。

用于此报告的数据处理扩展插件不可用。它要么已被卸载，要么配置不正确。

如果我查看数据源类型下拉列表，则唯一的选项是 SQL Server。XML 未列出。我需要做什么。从我读到的内容来看，应该无需任何设置即可自动支持 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:17:03.633

SQL Server express 不支持 XML。（另见评论部分的注释）

# php - 父子关系中的 PHP 模块化与快速脚本执行

> ID：12899216
> 
> 赞同：5
> 
> 时间：2012-10-15T15:45:18.073
> 
> 标签：php, oop, design-patterns

我正在编写的应用程序有一组用户，我们称他们为社区。每个社区都有会议，会议也有一些与之相关的对象（与会者、目标、任务、成就等）。

对于在创建父对象时实现初始化子对象的最佳方法，我有点困惑。这是一个简化的类设置。

**首次实施**

```
<?php
class community
{
     public $id;
     public $name;
     //Store an array of meeting objects
     public $meetings = array();
     //Store an array of member objects
     public $members  = array();
     //etc

     public function getProperties()
     {
         //hit database for community properties including ids of meetings 
         //and members associated with this community
         //Set community properties

         //Use returned ids to populate community properties
         foreach($returnedMeetingIds as $meetingId)
         {
              //The meeting class is responsible for its own init.
              $newMeeting = new Meeting();
              $newMeeting->id = $meetingId;
              $newMeeting->getProperties();
              $this->meetings[$meetingId] = $newMeeting;
         } 
     }
}
?> 
```

这种方法将初始化的责任放在每个对象上，我认为这对可维护性和模块化更好，但我可以看到这是一个巨大的级联瓶颈，因为添加了更多会议，因为每个会议的子对象也将负责初始化自己。

我能想到的另一种方法是使用单个数据库调用填充 $meetings 数组。所有会议都存储在具有社区 ID 字段的单个表中。

**二次实施**

```
<?php
class community
{
     public $id;
     public $name;
     //Store an array of meeting objects
     public $meetings = array();
     //Store an array of member objects
     public $members  = array();
     //etc

     public function getProperties()
     {
         $sql = 'SELECT * 
                 FROM meetings
                 WHERE community_id = :community'
         //etc
         $stmt->execute();
         while($meeting = $stmt->fetch())
         {
              $newMeeting = new Meeting();
              $newMeeting->id = $meeting['id'];
              //etc
              $this->meetings[$newMeeting->id] = $newMeeting;
         }

     }
}
?> 
```

我相信第二堂课会执行得更快，但我现在将会议班与社区班结合起来，感觉这不是最好的解决方案。

我的问题是在将这些类组（社区、会议、目标、成就、任务等）解耦时应该放置多少库存？我个人的感觉是，我应该使用第**一个实现**，直到证明它不适合我的流量负载，然后再转向**第二个实现**。我想知道有更多经验的人发现什么是最佳实践。我觉得这是一个兔子洞，一旦我下去，以后可能很难重构。此外，我不相信**任何**一种方法都是解决这个问题的正确方法。非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:16:39.100

您必须问自己是否真的需要社区中的所有这些会议。让我们看一下以下用例。

1.  您想输出社区的所有信息，包括会议列表。这似乎是您想要构建社区及其所有会议的有效案例。但是有一种更有效的方法。

    ```
    class Controller {

        public function showCommunity($id) {
            $community = $this->communityGateway->findCommunity($id);
            $meetings = $this->meetingGateway->findMeetings($community->getCommunityId());

            // output your community information and meeting information
        }
    } 
    ```

2.  您有一个用例，您需要操纵社区的所有会议。在您的方法中，您会这样做：

    ```
    $community = new Community();
    $community->doSomethingToAllMeetings(); 
    ```

    但是您也可以使用示例 #1 中的方法。而不是输出您执行操作所需的操作。

* * *

但是，如果您确实需要会议，那么您应该在社区之外创建它们并将它们作为依赖项传递给社区对象（如果在创建期间需要，则在控制器中，或者如果稍后可能添加它们，则作为设置器）。

```
class Community {

    public function __construct($meetings) {
    ...
    }
} 
```

您从上述方法中获得了什么？

*   您并不总是加载每个社区的所有会议信息。
*   你解耦类。一个现在可以在没有另一个的情况下存在，并且可以被替换以进行测试。
*   您不会因创建对象而使业务逻辑负担过重。这应该发生在控制器级别而不是您的业务对象中。
*   如果需要，您甚至可以替换这些网关并从其他地方加载数据。

# java - 如何读取和操作从 Microsoft Word 导出的 HTML 文档？

> ID：12899219
> 
> 赞同：0
> 
> 时间：2012-10-15T15:45:25.687
> 
> 标签：java, ms-word, html-parsing

我有一个保存为 .htm 网页的 Microsoft Word Doc。下面是我的代码。我的问题是如何从文档中获取文本，并将其附加到字符串中。我注意到该段落设置为标签`<p class=MsoNormal>`，因此有任何建议。我要附加的字符串是 documentText

```
 String documentText = "";
    FileInputStream fileInput = null;
    BufferedInputStream myBuffer = null;
    DataInputStream dataInput = null;
    fileInput = new FileInputStream(selectedFile);
    myBuffer = new BufferedInputStream(fileInput);
    dataInput = new DataInputStream(myBuffer);
    while (dataInput.available() != 0){
        System.out.println(dataInput.readLine());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:57:52.697

使用 HTML Parser 库，例如[HTML Parser](http://htmlparser.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:58:40.537

看看诸如[HTML Parser](http://htmlparser.sourceforge.net/)和[Jericho HTML Parser](http://jericho.htmlparser.net/docs/index.html)之类的库，或者使用[这个答案中建议的原生](https://stackoverflow.com/a/1498008/664577)[HTMLEditorKit.Parser](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/HTMLEditorKit.Parser.html) + [HTMLEditorKit.ParserCallback](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/HTMLEditorKit.ParserCallback.html)方法。

# java - Red5 - SharedObject 中的 ArrayList 已损坏

> ID：12899224
> 
> 赞同：3
> 
> 时间：2012-10-15T15:45:38.790
> 
> 标签：java, actionscript-3, arraylist, red5, shared-objects

好吧，也许没有像这样被破坏。

所以，有点背景。我最近将我的 Red5 驱动游戏从 red5 的 windows 版本转移到了在 Debian Squeeze 上运行的游戏。我有一个游戏大厅，它使用共享对象来维护各种可用游戏的列表。

单个游戏被存储为 HashMap[String, Object] 与它在所述 SharedObject 中的 game_id 相对应。HashMap 的几个属性是 ArrayLists，特别是*玩家*（连接玩家 id 的 ArrayList[Integer]）和*投票*（提交投票的玩家的另一个 ArrayList[Integer]）

每当我对这些 ArrayList 中的任何一个进行更改时，某处出现问题，我无法再将 HashMap 写入 SharedObject（setAttribute 返回 false）

创建一个新游戏（服务器端）：

```
HashMap<String, Object> game = new HashMap<String, Object>();
game.put("id", PendingGameManager.GAME_IDX);
game.put("difficulty", difficulty);
game.put("type", type);
game.put("description", this.getDescription(type, difficulty));
game.put("players", new ArrayList<Integer>());
game.put("coords", coords);
game.put("created", Calendar.getInstance().getTimeInMillis());
game.put("votes", new ArrayList<Integer>());
boolean success = this.gamesSO.setAttribute(Integer.toString(PendingGameManager.GAME_IDX), game); 
```

这可以毫无问题地执行，并且*成功*返回 true。

后来我检索播放器数组并进行修改：

```
HashMap<String, Object> game = (HashMap<String, Object>)this.gamesSO.getMapAttribute(Integer.toString(game_id));
ArrayList<Integer> players = (ArrayList<Integer>) game.get("players");
players.add(new Integer(Integer.parseInt((user_id))));
boolean success = this.gamesSO.setAttribute(Integer.toString(game_id), game); 
```

这里成功*总是*返回假。如果为游戏创建一个新的 HashMap 并从旧的属性中复制每个属性，但忽略*玩家*和*投票*，这很好，但无论尝试什么，我都无法让它维护一个数组。我也用 List 和 Vector 尝试过，结果相同。这是我第一次接触 Java，我一直很小心地只添加 Integer 的类实例而不是原始的 int，但我所有的努力都已经没有想法了。

在 Windows 上运行*完美*时，我的原始实现使用 ArrayList[String] 而不是 ArrayList[Integer]

环境：Debian Squeeze 6.0.6 jre 1.7 Red5 1.0RC2

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:24:40.807

根据您的 red5 版本信息，这是方法“setAttribute”的实现：

```
@Override
public boolean setAttribute(String name, Object value) {
    log.debug("setAttribute - name: {} value: {}", name, value);
    boolean result = true;
    ownerMessage.addEvent(Type.CLIENT_UPDATE_ATTRIBUTE, name, null);
    if (value == null && super.removeAttribute(name)) {
        // Setting a null value removes the attribute
        modified = true;
        syncEvents.add(new SharedObjectEvent(Type.CLIENT_DELETE_DATA, name, null));
        deleteStats.incrementAndGet();
    } else if (value != null && super.setAttribute(name, value)) {
        // only sync if the attribute changed
        modified = true;
        syncEvents.add(new SharedObjectEvent(Type.CLIENT_UPDATE_DATA, name, value));
        changeStats.incrementAndGet();
    } else {
        result = false;
    }
    notifyModified();
    return result;
} 
```

我猜 value 是 != null （但我可能是错的）。但在我看来，它会通过“super.setAttribute”调用将该调用转发给它的父类，这是父/超类的实现：

```
/**
 * Set an attribute on this object.
 *
 * @param name  the name of the attribute to change
 * @param value the new value of the attribute
 * @return true if the attribute value was added or changed, otherwise false
 */
public boolean setAttribute(String name, Object value) {
    if (name != null) {
        if (value != null) {
            // update with new value
            Object previous = attributes.put(name, value);
            // previous will be null if the attribute didn't exist
            return (previous == null || !value.equals(previous));
        }
    }
    return false;
} 
```

这里的重要行（恕我直言）：

```
return (previous == null || !value.equals(previous)); 
```

=> "previous" 找不到，然后返回 false。

问题是我认为：你正在做的这个演员：

```
HashMap<String, Object> game = (HashMap<String, Object>)this.gamesSO.getMapAttribute(Integer.toString(game_id)); 
```

我不认为“this.gamesSO.getMapAttribute(Integer.toString(game_id));” 会返回HashMap，我想我记得Red5有自己的Map类型。

如果您只是调试并添加：

```
System.out.println(this.gamesSO.getMapAttribute(Integer.toString(game_id))); 
```

和/或添加一些调试断点并验证这到底是什么类型。然后真的投到这个。

我认为您还应该更详细地指定地图。就像是：

```
 HashMap<String, MyPlayerBean> 
```

并创建一个 MyPlayerBean 类，其中包含您真正需要的属性。制作这些 Map/List 对象可能很方便快速入门，但如果您的应用程序开始增长，它可能会变得非常难看。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:39:04.110

因此，为了澄清起见，我可能应该将我的发现作为答案。

由于我正在获取存储在 SharedObject 中的 HashMap（与原始数据类型相对的复杂数据类型）的引用，因此我所做的任何更改也会反映在该插槽的当前值中，因此当它再次设置时， Red5 未能发现差异。

```
new_val.equals(old_val); // returns true since they both reference the same instance of HashMap 
```

如果我在对包含在 HashMap 中的 ArrayList 进行更改之前克隆 HashMap，则上述语句仍然评估为 true，因为 ArrayList 与当前插槽中存储的实例相同，并且 java 在评估 .equals() 时也会考虑每个对象的哈希码（实际上，比较两个 HashMap 的内容）

*因此，我必须在进行更改之前*克隆 HashMap 和 ArrayList ，以便检测到更改并与客户端同步。或者（正如我最终实现的那样）克隆 HashMap，进行更改并另外更新原始属性，在我的情况下为*int changeCount*

如果 Red5 有一种机制可以针对这种情况强制同步（例如在客户端 Actionscript 中使用*setDirty*而不是*setProperty ），那就太好了*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:24:32.240

更新共享对象属性时，我遇到了类似的问题，它是一个 ArrayList。我最终删除了该属性，然后再次设置它。

```
ArrayList<String> userlist = (ArrayList<String>) so.getAttribute("userlist");
userlist.remove(username);
so.beginUpdate();
so.removeAttribute("userlist");
so.setAttribute("userlist", userlist);
so.endUpdate(); 
```

# logging - 崩溃期间环形缓冲区是否会转储到磁盘

> ID：12899227
> 
> 赞同：1
> 
> 时间：2012-10-15T15:45:41.427
> 
> 标签：logging, linux-kernel

我想知道，如果发生崩溃，Linux 是否会尝试将其环形缓冲区（由 dmesg 使用）的内容转储到磁盘以方便调试？

如果是这样，Linux是如何做到的？如果有人可以向我指出一些代码，那将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:24:05.483

当崩溃/恐慌发生时，系统日志没有机会运行，因此它将缓冲区写入磁盘或 /var/log/messages 的机会非常小。恐慌之后，您必须使用 kdump 为您执行此操作。

你可以阅读更多关于 kdump/kexec

[http://www.linux-mag.com/id/2998/](http://www.linux-mag.com/id/2998/)

[https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/ch-kdump.html](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/ch-kdump.html)

[https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/s2-kdump-crash-log.html](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/s2-kdump-crash-log.html)

# iphone - 如何在 IOS 开发中刷新“socket mobile”扫描仪缓冲区？

> ID：12899232
> 
> 赞同：3
> 
> 时间：2012-10-15T15:45:49.017
> 
> 标签：iphone, ios, mobile, barcode-scanner

我使用 Socket Mobile SDK 制作了一个 iOS 应用程序。当我打开我的视图时，扫描器委托接收在 viewdidload 函数之前扫描的数据。如何向扫描仪发送缓冲区重置或刷新？我没有在 ScanApiHelper 库中找到函数或命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:41:38.667

您的应用程序应该能够对传入的数据执行任何操作。如果应用程序还没有准备好接收扫描，它不能忽略数据并可能要求用户再次扫描吗？

# batch-file - 根据列表批量重命名文件

> ID：12899242
> 
> 赞同：1
> 
> 时间：2012-10-15T15:46:20.620
> 
> 标签：batch-file, filenames

这是我的问题。我有 7 个模板表格。我的每个客户都需要为他们的文件创建一个表单。例如，我的客户 Jon 需要：Jon_Marks、Jon_Evaluation、Jon_Comments。Tina 将需要完全相同的文件，但要使用她的名字。

有没有办法创建一个可以为我自动重命名的 bat 文件，它从 txt 文件中获取名称并在文件名的开头插入值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:03:31.427

以下可能会完成您正在寻找的内容。它使用 for 循环遍历文本文件，并对批处理文件的另一位进行“调用”以对变量进行重命名和递增。

```
@echo off
set i=1
for %%f in (*.txt) do call :renameit "%%f"
goto done

:renameit
ren %1 %i%.txt
set /A i+=1

:done 
```

# apache - Apache RewriteRule 重定向，除了 1 个路径和 2 个 IP

> ID：12899253
> 
> 赞同：0
> 
> 时间：2012-10-15T15:47:21.753
> 
> 标签：apache, mod-rewrite

希望我能很好地解释这一点！

我有一些用于 Apache 下的站点的 RewriteRules，用于将用户重定向到不同服务器上的相同页面。有两个例外 - 我需要通过 2 个 IP 地址来访问原始服务器，并且我不希望规则适用于特定路径。这是我目前的规则集：

```
RewriteCond %{REMOTE_HOST} !^10\.10\.10\.1(0|1)$
RewriteRule ^page/old/url/1$ http://www.site.com/new/url/1 [R=301,L]

# If the user is trying to get to /admin, let it past by skipping the next rewriterule
RewriteCond %{REQUEST_URI} ^/admin(|.*)$
RewriteRule ^.*$ - [S=1]

# Catch-all to send any "un-mapped" pages to the homepage
RewriteCond %{REMOTE_HOST} !^10\.10\.10\.1(0|1)$
RewriteRule ^ http://www.site.com/homepage [R=301,L]

# Other rules follow, but no redirections 
```

因此，我希望 htaccess 将除 2 个 IP 地址之外的所有用户重定向到新站点位置。不过，我想确保*任何人都*可以访问**/admin**。然后有一个包罗万象的规则来挑选任何没有被特别重定向的页面。

似乎 REQUEST_URI 行不匹配，或者跳过规则不起作用。我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:34:07.747

首先捕获您不想重写的条件似乎更简单，这样您就不必在其他规则中担心它们。

像这样的东西：

```
#Don't rewrite known IPs or path /admin
RewriteCond %{REMOTE_HOST} ^10\.10\.10\.1(0|1)$ [OR]
RewriteCond %{REQUEST_URI} ^/admin($|\/|\/.*)
RewriteRule ^.*$ - [NC,L]

# Redirection rules
RewriteRule ^page/old/url/1/?$ http://www.site.com/new/url/1 [R=301,NC,L]
RewriteRule ^page/old/url/2/?$ http://www.site.com/new/url/2 [R=301,NC,L]
# Catch all
RewriteRule ^(.*)$ http://www.site.com/$1 [R=301,L] 
```

# playframework-1.x - 我的电脑上播放框架实例的问题

> ID：12899256
> 
> 赞同：0
> 
> 时间：2012-10-15T15:47:35.823
> 
> 标签：playframework-1.x

我尝试使用 play 1.2.3 和 1.2.5 以及在之前安装 ubuntu（使用 JDK7）时使用 play 1.2.3 的相同代码。现在，我的代码中出现了类转换异常（包括我编写的类和第三方库）。我应该切换到 JDK6 还是尝试其他方法？我已经运行 play clean（并且删除了 tmp 目录），但问题仍然存在。我正在使用 Sun JDK 7。

更新：我恢复到 JDK 6，但类转换异常仍然存在（我也使用了 play clean - 不确定我是否遗漏了任何进一步的步骤）。我已经尝试了有和没有 1.6 JDK 参考的 application.conf。

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:58:32.860

这是一个类加载器/多个 JDK 问题 - 当我在操作系统上切换到 JDK6（没有删除 JDK 7）时，Eclipse 正在引用 JDK7。确保 eclipse (IDE) 引用默认的 JDK (v6) 解决了这个问题。希望这对其他人有帮助。

# android - Monodorid 上的 GridView 适配器

> ID：12899257
> 
> 赞同：2
> 
> 时间：2012-10-15T15:47:43.097
> 
> 标签：android, xamarin.android, android-gridview, baseadapter, xamarin

我使用自定义适配器从列表中填充的 gridView 遇到了一个奇怪的问题。

一切看起来都很正常，直到 gridView 的第一页已满，然后一些后续项目丢失或不同步。

我做了两个屏幕截图，第一个是单列，第二个是两个。如您所见，第一页都正确呈现，如下图所示：

单栏：[http ://screencast.com/t/mSoEsDf1cY](http://screencast.com/t/mSoEsDf1cY)

和

两栏：[http ://screencast.com/t/i6zfPLYf](http://screencast.com/t/i6zfPLYf)

我简化了代码来演示这个问题：

```
public class Activity1 : Activity
{
    List<Item> _items = null;

    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // Set our view from the "main" layout resource
        SetContentView (Resource.Layout.Main);

        _items = new List<Item>();

        for ( int i =0; i < 30; i++)
        {
            Item newItem = new Item();
            newItem.Text = "Item " + i;
            newItem.Bitmap = Android.Graphics.BitmapFactory.DecodeResource( this.Resources, Resource.Drawable.Icon );

            _items.Add( newItem );
        }

        GridView grid = FindViewById<GridView> (Resource.Id.gridView1);
        grid.SetNumColumns(2);

        ItemGridViewAdapter adapter = new ItemGridViewAdapter( this, _items);
        grid.Adapter = adapter;
    }

}

public class Item
{
    public Android.Graphics.Bitmap Bitmap { get; set; }
    public string Text { get; set; }
}

public class ItemGridViewAdapter : BaseAdapter<Item>
{
    private List<Item> _items = null;
    private Context _context = null;

    public override int Count {
        get {
            return _items.Count;
        }
    }

    public override long GetItemId (int position)
    {
        return position;
    }

    public override Item this[int position] {
        get {
            return _items[position];
        }
    }

    public ItemGridViewAdapter (Context context, List<Item> items)
    {
        _items = items;
        _context = context;
    }

    public override View GetView (int position, View convertView, ViewGroup parent)
    {
        //based on http://developer.android.com/guide/topics/ui/layout/gridview.html

        RelativeLayout layout = null;

        if (convertView == null) {
            layout = new RelativeLayout( _context );

            RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams (RelativeLayout.LayoutParams.WrapContent, RelativeLayout.LayoutParams.WrapContent);

            ImageView image = new ImageView (_context);
            image.LayoutParameters = new Gallery.LayoutParams (150, 150);
            image.SetImageBitmap ( this[position].Bitmap );
            image.Id = 1;
            layout.AddView (image);

            RelativeLayout.LayoutParams title_lp = new RelativeLayout.LayoutParams (RelativeLayout.LayoutParams.WrapContent, RelativeLayout.LayoutParams.WrapContent);
            TextView title = new TextView (_context);
            title.Text = this[position].Text; 
            title.Id = 2;
            title.SetTextColor (Android.Graphics.Color.White);
            title_lp.AddRule (LayoutRules.RightOf, 1);
            title_lp.AddRule (LayoutRules.CenterVertical);
            layout.AddView (title, title_lp);

        } else {

            layout = (RelativeLayout)convertView;
        }

        return layout;
    }

} 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:59:23.263

您的代码重用了一些随机的旧项目视图，而无需在此处进行任何修改：

```
 layout = (RelativeLayout)convertView; 
```

您的 getView() 应该被修改以提供新的值，这些值是位置的函数，对于任何视图，无论是回收的还是刚刚创建的。

考虑这里的示例：http: [//developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)。

它们的作用与您在“其他”部分中所做的几乎相同。但在那之后，它们为视图提供了一个新的价值——在他们的例子中，一个新的图像：

```
} else {
    imageView = (ImageView) convertView;
}

// Analogous update is missing from your code.
// Set your view's image, text, etc. here:
imageView.setImageResource(mThumbIds[position]);

return imageView; 
```

# android - Android，如何在某些项目上禁用 GridView 的 onItemSelected？

> ID：12899258
> 
> 赞同：0
> 
> 时间：2012-10-15T15:47:52.083
> 
> 标签：android, gridview, adapter, baseadapter

看来gridview的onitemselected的行为是由Android控制的，如何禁用某些项目来回调onItemSelected（）？

我的代码：

```
@Override
    public void onItemSelected(AdapterView<?> parent, View view, int position,
            long id) {

        if (view == null) return;

        Utils.log(TAG, "view = " + view.toString() + ",pos = " + position + " , id =" + id);

        //I want to disable onItemSelected after positon 3: (But I failed.)
        if (position > 3) {
            if (mLSV != null) {
                onItemSelected(mGridView,mLSV, mLastPosition, mLastSelectedId);
                return;
            }
        }

        if (!mGridView.isFocused()) return;

        if (mLSV != null) {
            mLSV.setBackgroundColor(CMainUI_Model.BG_COLOR); 
        }
        Utils.log(TAG, "onItemSelected, pos = " + position);

        mLSV = view;
        mLastPosition = position;
        mLastSelectedId = mGridView.getSelectedItemId();
    } 
```

当我通过 D-pad 导航时，我使用 onItemSelected() 像焦点一样更改项目的背景。而且我不想在位置 3 之后调用 onItemSelected() 并且“焦点”停在位置 3。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-22T11:37:44.077

这是很久以前的事了，但是在您的适配器中覆盖这些方法可能会有所帮助：

```
@Override
public boolean isEnabled(int position) {
    // Check if position is enabled or not
    return true;
}

@Override
public boolean areAllItemsEnabled() {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:51:10.503

那这个呢？

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int position,
        long id) {

    if (view == null) return;

    Utils.log(TAG, "view = " + view.toString() + ",pos = " + position + " , id =" + id);

    //I want to disable onItemSelected after positon 3: 
    if (position > 3) return;

    if (!mGridView.isFocused()) return;

    if (mLSV != null) {
        mLSV.setBackgroundColor(CMainUI_Model.BG_COLOR); 
    }
    Utils.log(TAG, "onItemSelected, pos = " + position);

    mLSV = view;
    mLastPosition = position;
    mLastSelectedId = mGridView.getSelectedItemId();
} 
```

试试这个 onItemSelected 方法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T03:48:14.593

如果焦点达到限制，我会覆盖 onKey() 回调以禁用某些方向键事件。我认为这是最好的解决方案。不要在适配器的项目上设置 onFocusChangedListener，因为它们会被 Android 缓存系统丢失或格式错误：convertView。

# f# - F# 中的引用和模式匹配

> ID：12899266
> 
> 赞同：4
> 
> 时间：2012-10-15T15:48:13.960
> 
> 标签：f#, pattern-matching, quotations, ms-solver-foundation

在新的控制台应用程序中，仅粘贴以下代码会导致异常“参数不是可识别的方法名称”。

*   以下代码是否适用于您的安装？
*   小丑：你知道为什么它对我不起作用吗？

* * *

```
// Learn more about F# at http://fsharp.net
// See the 'F# Tutorial' project for more help.
let somefunction1 arg  = ()
let somefunction2 ()   = ()

open Quotations.DerivedPatterns

let test() =
   let d =  <@ somefunction1() @>
   let e =  <@ somefunction2() @>

   match d with
   | SpecificCall <@ somefunction1() @> (a,b ,c) -> printfn "somefunction"
   | _                                           -> printfn "something else"
   match d with
   | SpecificCall <@ somefunction1   @> (a,b ,c) -> printfn "somefunction"
   | _                                           -> printfn "something else"

   match e with
   | SpecificCall <@ somefunction2() @> (a,b ,c) -> printfn "somefunction"
   | _                                           -> printfn "something else"

   //THIS FAILS HERE saying "The parameter is not a recognized method name"
   match e with
   | SpecificCall <@ somefunction2   @> (a,b ,c) -> printfn "somefunction"
   | _                                           -> printfn "something else"

[<EntryPoint>]
let main argv = 
    test()
    printfn "%A" argv
    0 // return an integer exit code 
```

查看编译器中定义的活动模式 SpecificCall 的定义，我发现：

```
 [<CompiledName("SpecificCallPattern")>]
    let (|SpecificCall|_|) templateParameter = 
        // Note: precomputation
        match templateParameter with
        | (Lambdas(_,Call(_,minfo1,_)) | Call(_,minfo1,_)) ->
            let isg1 = minfo1.IsGenericMethod 
            let gmd = if isg1 then minfo1.GetGenericMethodDefinition() else null

            // end-of-precomputation

            (fun tm -> 
               match tm with
               | Call(obj,minfo2,args) 
#if FX_NO_REFLECTION_METADATA_TOKENS
                  when (minfo1.MethodHandle = minfo2.MethodHandle &&
#else               
                  when (minfo1.MetadataToken = minfo2.MetadataToken &&
#endif                  
                        if isg1 then 
                          minfo2.IsGenericMethod && gmd = minfo2.GetGenericMethodDefinition()
                        else
                          minfo1 = minfo2) -> 
                   Some(obj,(minfo2.GetGenericArguments() |> Array.toList),args)
               | _ -> None)
        | _ -> 
            invalidArg "templateParameter" (SR.GetString(SR.QunrecognizedMethodCall)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:24:50.427

副手，这对我来说看起来不错......你是否有可能掩盖了`var`某种方式的原始定义？例如，以下独立示例对我来说很好：

```
let var<'a>() = Unchecked.defaultof<'a>

match <@ var<int>() @> with
| Quotations.DerivedPatterns.SpecificCall <@ var @> (obj,_,[]) ->
    printfn "var"
| _ -> printfn "something else" 
```

# fpdf - fpdi 是缩小模板和/或添加空格吗？

> ID：12899268
> 
> 赞同：0
> 
> 时间：2012-10-15T15:48:16.713
> 
> 标签：fpdf, fpdi

使用 FPDI，我首先使用模板来创建目录。然后我导入由目录链接到的其他页面。我遇到的是 FPDI 正在缩小模板并可能添加空白。我相信我已经通过 passthru() 命令将相同的文档合并为一个，从而消除了任何浏览器添加的空白/收缩。

我在这里粘贴了代码：http: [//pastebin.com/VeLEN8nz](http://pastebin.com/VeLEN8nz)。第 45 - 57 行是目录作为模板文件包含的位置。

原始文件在这里：[http](http://truckingshow.com/TOC.pdf) ://truckingshow.com/TOC.pdf FPDI 后文件在这里：[http ://truckingshow.com/TOC-afterFPDI.pdf](http://truckingshow.com/TOC-afterFPDI.pdf)

最明显的区别在于右边距和下边距。

感谢您查看，如果我可以提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:06:51.843

给我的文件是“Letter”，而不是“A4”（FPDF() 的默认值）

而不是`$pdf = new FPDI('P', 'pt')`简单地使用`$pdf = new FPDI('P', 'pt', 'Letter')`解决了这个问题。

谢谢！

# c - 任意长度的二维数组

> ID：12899269
> 
> 赞同：0
> 
> 时间：2012-10-15T15:48:22.580
> 
> 标签：c, arrays, reference, multidimensional-array

```
int func(int arr[100][150], int rows, int columns);
int func(int arr[100][150], int rows, int columns)
{
   //stuff here
} 
```

此功能有效。如果我想将 arr 大小分配给 arr[rows][columns]，但不是一直为 100 和 150，我该怎么办？如果我将它分配给 100 和 150，它可能会使用比行和列更小的内存更多的内存？

```
int func(int arr[rows][columns], int rows, int columns);
int func(int arr[rows][columns], int rows, int columns)
{
   //stuff here
} 
```

或者

```
int func(int arr[][], int rows, int columns);
int func(int arr[][], int rows, int columns)
{
   //stuff here
} 
```

不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:58:38.540

首先传递尺寸：

```
int func(int rows, int columns, int arr[rows][columns])
{
    …
} 
```

（其实第一个维度可以省略，需要第一个维度之后的维度来计算地址。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:03:33.270

Eric 的代码有效，另一种方法（我更喜欢）是用指针替换显式数组参数，如下所示：

```
int func(int* x, int rows, int columns)
{
        //...
} 
```

这样，该函数可用于一维和二维数组。这只是埃里克给出的答案的替代方案；根据个人喜好和具体应用，可以使用其中任何一种。

# php - iPhone 5 uiwebvew 问题

> ID：12899271
> 
> 赞同：0
> 
> 时间：2012-10-15T15:48:27.257
> 
> 标签：php, javascript, jquery, ios, uiwebview

我创建了一个应用程序，它只从我们的网站加载网页的某些部分，我们的应用程序将 wordpress url 发送到 php 文件，然后使用 php 代理将网页内容加载到 uiwebview。然而，当应用程序在 iPhone 5 上运行时，uiwebview 不会加载内容，但实际上适用于其他所有设备，iPad 2 (iOS 6)、iphone 3g (iOS 4.1)、iOS 模拟器和 ipod touch。有谁知道为什么会这样？

如果您需要更多信息或有不清楚的地方，请告诉我。

感谢您的时间和帮助。

代码：

- 加载 uiwebview 的应用程序代码

```
 NSString *jobURL = [NSString stringWithFormat:@"http://www.redstarjobs.com/?job=%@",[jobDetails objectForKey:@"PostName"]];    
    NSString *urlString = [NSString stringWithFormat:@"http://bigbluemagic.com/redstarjobs/testing_1/script.php?url=%@",[jobURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
   [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]]; 
```

- 加载网页内容 php 文件

[http://pastebin.com/pVsgSF4Q](http://pastebin.com/pVsgSF4Q)

-代理php文件

```
<?php echo file_get_contents(urldecode($_GET['url']));?> 
```

**编辑**

jobURL 和 urlString 的 NSLog，该应用程序是一个工作列表应用程序，因此 url 取决于工作。

```
jobURL:http://www.redstarjobs.com/?job=sap-payroll-administrator
urlString:http://bigbluemagic.com/redstarjobs/testing_1/script.php?url=http://www.redstarjobs.com/?job=sap-payroll-administrator

jobURL:http://www.redstarjobs.com/?job=sap-manufacturing-lead-tiffinsolutions
urlString:http://bigbluemagic.com/redstarjobs/testing_1/script.php?url=http://www.redstarjobs.com/?job=sap-manufacturing-lead-tiffinsolutions 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:32:36.773

尝试一次编码整个 URL，而不仅仅是结束位。

```
NSString *jobURL = [NSString stringWithFormat:@"http://www.redstarjobs.com/?job=%@",[jobDetails objectForKey:@"PostName"]];
NSString *urlString = [NSString stringWithFormat:@"http://bigbluemagic.com/redstarjobs/testing_1/script.php?url=%@",jobURL];
NSURL *stringUrl = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[self.webView loadRequest:[NSURLRequest requestWithURL:stringUrl]]; 
```

如果这不起作用，请调用 UIWebView`didFailLoadWithError`方法并查看它作为错误返回的内容。

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error 
```

# eclipse - ClassNotFoundException DelegatingFilterProxy

> ID：12899273
> 
> 赞同：0
> 
> 时间：2012-10-15T15:48:35.297
> 
> 标签：eclipse, tomcat, spring-security, classnotfoundexception

我正在尝试使用 Spring 安全性执行一些自定义身份验证。

我读过一些关于它的东西：

*   [https://stackoverflow.com/a/4074532/759452](https://stackoverflow.com/a/4074532/759452)
*   [https://stackoverflow.com/a/2701722/759452](https://stackoverflow.com/a/2701722/759452)
*   [http://static.springsource.org/spring-security/site/](http://static.springsource.org/spring-security/site/)

我还发现了一个关于这个 ClassNotFoundException DelegatingFilterProxy 的有趣对话：http: [//forum.springsource.org/showthread.php? 53972-Problem-when-finding-springSecurityFilterChain-bean](http://forum.springsource.org/showthread.php?53972-Problem-when-finding-springSecurityFilterChain-bean)

所以，在我的 web.xml 我有

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
  <display-name>Secured Account</display-name>

  <servlet>
    <servlet-name>mysecuredapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>mysecuredapp</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/mysecuredapp-security.xml</param-value>
  </context-param>

  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

</web-app> 
```

在 mysecuredapp-servlet.xml 我有

```
<?xml version="1.0" encoding="UTF-8"?>

<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.0.xsd" >

    <http auto-config="true">
        <intercept-url pattern="/account/*" access="ROLE_USER, ROLE_ADMIN, ROLE_MASTER" />
        <intercept-url pattern="/admin/*" access="ROLE_ADMIN, ROLE_MASTER" />
        <intercept-url pattern="/master/*" access="ROLE_MASTER" />
    </http>

    <authentication-manager>
        <authentication-provider ref="daoAuthenticationProvider" />
    </authentication-manager>

    <beans:bean id="daoAuthenticationProvider" class="org.springframework.security.authentication.dao.DaoAuthenticationProvider" >
        <beans:property name="userDetailsService" ref="userDetailsService" />
    </beans:bean>

</beans:beans> 
```

这是我的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>

  <groupId>MySecuredApp</groupId>
  <artifactId>securedApp</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>war</packaging>

  <name>My Secured App - Spring Hibernate Maven</name>
  <properties>
        <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
        <javax.servlet.jstl.version>1.2</javax.servlet.jstl.version>
        <org.hibernate>3.6.10.Final</org.hibernate>
        <org.springsecurity.version>3.1.2.RELEASE</org.springsecurity.version>
    </properties>

  <dependencies>
        <!-- Hibernate deps -->
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
        </dependency>
        <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-entitymanager</artifactId>
          <version>${org.hibernate}</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${org.hibernate}</version>
        </dependency>

        <!-- Spring security deps -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${org.springsecurity.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${org.springsecurity.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springsecurity.version}</version>
        </dependency>
        <!-- Spring deps -->
        <dependency>
             <groupId>org.springframework</groupId>
             <artifactId>spring-context</artifactId>
             <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework.version}</version>
            <scope>test</scope>
        </dependency>

        <!-- Misc deps -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>${javax.servlet.jstl.version}</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.10</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>commons-pool</groupId>
            <artifactId>commons-pool</artifactId>
            <version>20030825.183949</version>
        </dependency>
        <dependency>
            <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
        </dependency>

       <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>

       <dependency>
         <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
       </dependency>

  </dependencies>

  <build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.7</source>
                <target>1.7</target>
                <encoding>UTF8</encoding>
            </configuration>
            <inherited>true</inherited>
        </plugin>
    </plugins>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>src/test/resources</directory>
            <filtering>true</filtering>
        </testResource>
        <testResource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </testResource>
    </testResources>
  </build>
</project> 
```

当我启动 tomcat（在 Eclipse 中）时，我得到了这个 ClassNotFoundException DelegatingFilterProxy。知道为什么会这样吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:40:30.347

这是我自己犯的一个愚蠢的错误……因为我遇到问题的原因完全相同：不包括部署程序集的 Spring 依赖项。

有关更多详细信息，请参阅我之前发布的这个答案：[Maven + Spring + Dynamic Web Module (Eclipse) = java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener](https://stackoverflow.com/questions/10046654/maven-spring-dynamic-web-module-eclipse-java-lang-classnotfoundexcepti/12600686#12600686)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:18:22.733

过滤器链是否有可能没有选择您的用户详细信息服务 bean？您的 mysecuredapp-servlet.xml 文件中似乎没有组件扫描指令，并且委派过滤器的 contextConfigLocation 仅指向该文件。

我可能是错的，但我相当确定过滤器的 Spring 上下文与调度程序 servlet 的上下文是分开的。您需要在安全 XML 文件中包含组件扫描，或者将主 Spring beans 文件添加到 contextConfigLocation。

# asp.net-mvc - 我的 Asp.Net MVC 4 应用程序中的模型应该是愚蠢的吗？

> ID：12899274
> 
> 赞同：0
> 
> 时间：2012-10-15T15:48:42.597
> 
> 标签：asp.net-mvc

我读过我的模型应该只是数据的愚蠢容器，这对我很有吸引力。如果是这种情况，那么我的理解是控制器会调用存储库，它只会填充模型并将它们像这样传回。

```
 using (var userRepo = new UserRepository())
        {
            var users = userRepo.GetAll();
            return View(users);
        } 
```

如果我想添加一个像 AlertUserOrderHasBeenRecd() 这样的方法，我应该把它放在哪里？

如果我将它放入存储库，那么存储库所做的不仅仅是数据持久性。

如果我把它放到模型中，那么模型就不再是一个愚蠢的数据容器。

我还可以添加一个在订单模型和用户模型中传递的附加类，并在不了解 EF 的情况下执行操作。

或者是其他东西。

是否有普遍接受的最佳处理方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:51:11.787

该方法可以在服务层中定义。服务层依赖于存储库，因为它包含可能由来自存储库的多个 CRUD 操作组成的业务操作。然后，您的控制器将采用服务层而不是存储库并在其上调用业务方法。

作为向您的应用程序引入另一个抽象层的替代方法，您可以使用[`favor query objects over repositories`](http://lostechies.com/jimmybogard/2012/10/08/favor-query-objects-over-repositories/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:57:46.190

分离模型和视图模型的结果非常好。ViewModel 只是数据的哑容器（DTO）。模型是业务层（UI 的业务）。所以，结果是：

*   控制器：处理通过站点的导航。
*   Models：填充和处理Controller请求的ViewModel。
*   ViewModel：带有将被表示的数据的 DTO。
*   视图：ViewModel 中数据的可视化表示。

在此架构中，您的方法将位于模型中。

# file - 找出更新文件的进程或脚本 Solaris

> ID：12899275
> 
> 赞同：1
> 
> 时间：2012-10-15T15:48:43.967
> 
> 标签：file, unix, solaris

我有一个日志文件，它从我的服务器捕获文件传输详细信息，例如 rsh、sftp、ssh 会话详细信息。我只想回溯并找出更新日志文件的所有进程/脚本。我不太确定如何捕获这些信息。

日志文件如下所示：

```
Oct 15 11:43:35 myclient inetd[15032]: [ID 927837 daemon.info] connect from client22.mydomain.com
Oct 15 11:43:35 myclient inetd[15033]: [ID 927837 daemon.info] connect from Client101.mydomain.com
Oct 15 11:43:35 myclient inetd[15034]: [ID 927837 daemon.info] connect from client05dev.mydomain.com
Oct 15 11:43:36 myclient inetd[15038]: [ID 927837 daemon.info] connect from searay.mydomain.com
Oct 15 11:43:36 myclient in.rshd[15038]: [ID 724835 daemon.info] connect from epsadmin@searay.mydomain.com (ls -l /home/generic/fpcdetail/fpcdetail.bod.mm)
Oct 15 11:43:36 myclient inetd[15041]: [ID 927837 daemon.info] connect from pgdbsu01dev.mydomain.com
Oct 15 11:43:36 myclient in.rshd[15041]: [ID 724835 daemon.info] connect from qrtdev@pgdbsu01dev.mydomain.com (ls -l /ifeeds/filemgr/filemgr.rimes.ftspeuro_industry_prn)
Oct 15 11:43:36 myclient inetd[15040]: [ID 927837 daemon.info] connect from client22.mydomain.com
Oct 15 11:43:38 myclient inetd[15044]: [ID 927837 daemon.info] connect from client22.mydomain.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:05:49.207

这看起来像 syslog 输出。如果是这种情况，那么您会发现唯一接触日志文件的进程是`syslogd`. 程序用于[`syslog(3)`](http://linux.die.net/man/3/syslog)执行日志记录。通常，名称 eg`inetd[12345]`是执行日志记录的程序的名称和进程 ID。

当您使用 solaris 时，您可以使用 dtrace 查看谁在调用 syslog - 请参阅[此 dtrace one-liner](https://blogs.oracle.com/chrisg/entry/on_this_interweb_thingy)了解与您正在寻找的内容相似的内容；但它仅限于被跟踪的曾经的 pid。

# jquery - 克隆 div 并使其出现在屏幕上不起作用

> ID：12899278
> 
> 赞同：0
> 
> 时间：2012-10-15T15:48:56.183
> 
> 标签：jquery

下面是我的代码（不要担心“关闭”，它是基于用户点击位置的偏移量）。在第二行中，我试图克隆一个现有的 div，然后显示克隆的副本？但它不起作用。但是，如果我删除 clone() 那么代码确实可以工作，但当然它只是显示了现有的 div 这不是我需要的。

```
var off = $(this).offset();
var div = $('#testtt').clone();
div.css({ position: "absolute", top: off.top, left: off.left });
div.show(); 
```

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:52:41.263

您正在克隆 div **，但没有将**其插入 DOM 中的任何位置。

所以在你这样做之前它是不存在的

```
var off = $(this).offset();
var div = $('#testtt').clone();
div.css({ position: "absolute", top: off.top, left: off.left });

$('body').append(div);   <-- Appending to body here.. You can append anywhere you want 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:55:01.993

您需要将 div 附加到您的页面。目前，您刚刚创建了对克隆的引用，但没有显示它。

$("body").append(div);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:55:53.333

您必须在 html 中的某处附加克隆的 div。例如：

```
var off = $(this).offset();
var div = $('#testtt').clone();
div.css({ position: "absolute", top: off.top, left: off.left });

// append to parent of "this"
var parent = $(this).parent();
div.appendTo(parent);

// should be unnecessary, except if the style is display:none
//div.show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T15:53:34.997

`append()`您需要使用or将其附加到另一个元素`appendTo()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T15:53:35.533

可能是重复ID的问题

从[API 页面](http://api.jquery.com/clone/)：

> 注意：使用 .clone() 具有产生具有重复 id 属性的元素的副作用，这些属性应该是唯一的。在可能的情况下，建议避免使用此属性克隆元素或使用类属性作为标识符。

克隆后，尝试更改克隆元素的 id：

```
div.attr('id').val('#testtt') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T15:53:38.933

根据@andrewWhitaker 的评论，您需要将新元素添加到 DOM。例如

```
div.attr('id').val( div.attr('id')+"_cloned" );
$("#my_container_element_id").append(div); 
```

您还可以删除

```
div.show(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T15:56:37.660

在jQuery中

```
$('.addRow').click(function(){
var off = $(this).offset();
var div = $('#testtt').clone();
div.css({ position: "absolute", top: off.top, left: off.left });
div.show();
div.appendTo($("#testtt"); 
```

})

# install4j - 我在做什么来导致 install4j 中的“IllegalArgumentException：负时间”异常？

> ID：12899282
> 
> 赞同：0
> 
> 时间：2012-10-15T15:49:11.037
> 
> 标签：install4j

我最近开始在 64 位 Windows 版本的 Install4j 上构建 Linux 安装程序，当生成的安装程序开始进行提取时，我收到以下错误。

这是我做错了什么还是不受支持？或 install4j 5.1 中的错误。我最近也升级到它。

```
Extracting files ...
  yx￯N                                                                 
An error occurred:
java.lang.IllegalArgumentException: Negative time
Error log: /tmp/install4jError8217531393990762392.log
java.lang.IllegalArgumentException: Negative time
    at java.io.File.setLastModified(Unknown Source)
    at com.install4j.runtime.installer.helper.fileinst.FileInstaller.install(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:18:50.190

事实证明，这只是安装程序中包含的损坏的自定义 JRE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T12:40:20.653

有同样的问题。由于独立原因，源目录中包含的文件之一的文件日期为 1961 年。

由于大多数日历从 198ß 开始，因此对其进行检查会导致时间戳为负。设置当前日期后，构建过程运行良好。所以它不依赖于任何版本的 jdk，也与任何损坏的 jre 安装或类似的东西无关。

提示：在 windows 资源管理器中没有显示文件日期。这可能对任何拥有类似源文件的人有所帮助，因为只要您没有看到它，您就不会注意到错误的日期。搜索日期在 1980 年之前的文件或使用指挥官应该可以帮助您找到那些文件。

# c# - 通过 API 导入大数据

> ID：12899283
> 
> 赞同：0
> 
> 时间：2012-10-15T15:49:13.077
> 
> 标签：c#, api, scheduled-tasks

我正在尝试开发一个系统，在该系统中，我将通过提供的 API 将我的数据库与 3-Party 数据库同步。API 有格式，我们可以提供 From-Date 和 To-Date

**问题**

1.  没有 API 只能给我修改过的记录。
2.  数据太大（平均每天 1000 条记录）
3.  需要一个调度程序，以便自动更新所有记录
4.  我还需要跟踪修改的记录（这是最大的问题，因为我无法在修改日期之前获得它们）

**注意：**根据之前的要求，我已经开发了系统，我可以在其中指定更新记录的开始日期和结束日期（它通过 GUI 完成，没有使用 ajax）。即使我请求 1 天的记录，系统也会出现超时错误。

**注意2：**我真的不应该说，但是客户太严格了（愚蠢）；（他只需要解决方案，其他什么都做不了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:01:01.363

假设数据不需要是“新鲜的”，您是否可以不编写一个每小时/每晚运行的进程来获取该天的数据并将其处理到您的数据库中？

显然，这只有在您确定以前的记录没有更新时才有效？

API是否提供批次？

您为什么选择使用 Ajax 的 Web 客户端来处理这些数据？Windows / 控制台应用程序会更适合吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:32:16.190

如果数据太大而无法通过任何给定查询检索，您只需要通过 ID 进行检索。找出一个合适的大小（100 条记录？250 条？），然后按该大小的组旋转系统中的每条记录。

你没有说你是拉下数据，推高数据，还是两者兼而有之。如果你只是把它拉下来，那是你能做的最好的事情，随着更多记录的添加，它会变得越来越慢。如果您只是推送它，那么您可以跟踪“推送日期”。如果两者都是，你如何解决冲突？

# ajax - 如何使用 Node.js 和 Express 异步加载和显示网页内容？

> ID：12899288
> 
> 赞同：0
> 
> 时间：2012-10-15T15:49:25.687
> 
> 标签：ajax, node.js, asynchronous, xmlhttprequest, express

作为 JavaScript 和相关框架的初学者，如果我的问题看起来很愚蠢，我很抱歉。

无论如何......是否有一些本地技术可以使用 Node.js 和 Express 异步加载和显示网页内容？是否应该为此目的使用 XMLHttpRequest 对象或存在更好的替代方案？

最好的问候，六。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T17:13:50.673

我可以帮助您解决问题的第一部分，就像@JohnnyHK 所说，这是一个广泛的问题。我将在这里解释的是如何使用 node.js 加载网页的原始数据并在 json 对象中将其表达并发送回客户端。

**让我们从我们的请求开始**

我们的目标是在浏览器中输入如下网址，获取页面的原始数据（html源）：`http://localhost:8080/www.yahoo.com`

*   `http://localhost:8080`- 我们的 node.js/express 服务器在哪里运行
*   `www.yahoo.com`- 我们要从中获取源的站点的 DOMAIN - http:// 不需要

**现在，到服务器代码**

请注意，这是一个非常简单/基本的服务器，所以你最好在你身边改进它

```
var http    = require('http');        // the http `native` module of node
var express = require('express');     // the express :)
var app = express();              // creating the server...

app.enable("jsonp callback");         // enable jsonp callbacks
app.listen(8080);                     // listening to port 8080.

app.get('/:domain', function(req, res){  // each request to the pattern `http://localhost:8080/URL_HERE

    // building the http `options` param
var options = {
    host: req.params.domain,     // the host will be the `domain` we sent
    port: 80,                 // the port the website is running on (basically post 80)

    path: '/',                // the path, now, this is important to pages inside
                              // the website, if you want the source of 
                              // `http://www.website.com/path/to/page.html` you better
                              // transfer `/path/to/page.html` as another param to the
                              // request and put it here
    method: 'GET'             // well, you know...
}

var buffer = '';                            // i'm creating a buffer to hold the data
http.get(options, function(httpres){        // creating the request with a callback function
    httpres.setEncoding('utf8');            // setting the encoding for the data...
    httpres.on('data', function(chunk){     // listening to the `data` event, each chunk will get into this function
        buffer += chunk;                    // saving the data...
    });
    httpres.on('end', function(){       // listening to the `end` event will be raised when we got all the raw data
        res.json({                      // this is it, now we are sending a response to the client as a json
            success: true,
            data: buffer
            });
        });
    });
}); 
```

就是这样，你可以将这个解决方案与 a 结合起来`jsonp`，你很高兴......

**客户端**

让我们使用 jQuery jsonp 请求来获取数据：

```
function loadData (domain) {
    $.ajax({
        url: 'http://localhost:8080/' + domain
        cache: false,
        dataType: 'jsonp',
        jsonp: 'callback',
        data: { },
        success: function (response) {
            if(response.success) {
                console.log(response.data); // `response.data` holds the html
                                            // data from the server, do what you want :)
            }
        }
    });
} 
```

你问题的第二部分是关于如何在客户端显示数据，我的建议是创建一个 iframe 并将原始数据注入其中，你会遇到一些问题（比如相对 css 和 javascript 文件路径）但是我希望你现在有一个起点...

干杯:)

**更新**

还有一件事..此示例仅适用于`http`协议网站...如果您想从`https`网站获取数据，则需要使用`https`模块而不是`http`( `var https = require('https');`)，并且在 中`options`，使用端口 443...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:46:40.470

我不是 100% 确定你的问题是什么，但我猜你正在寻找一种在服务器端获取数据以在客户端异步请求的方法。

在[express](http://expressjs.com/api.html#res.status)中，在您的路由器中，在您检索到一些数据后，使用以下内容发送回您的 javascript 可以在客户端使用的 JSON 对象：

```
res.send(JSON.stringfy(data)); 
```

了解这一点的最佳方法可能是在 Google 上搜索使用您想要使用的技术的示例。例如，我刚刚在 Google 上搜索 Express Mongoose JSON（其中 Mongoose 是 MongoDB 数据库的数据模型），我发现了这个：[一个使用 Mongoose、Express 和 MongoDB 并返回 JSON 的简单 Node.js Web 应用程序](http://css.dzone.com/articles/simple-nodejs-web-application)

Node 有替代框架（Express 除外），还有其他数据库，因此有很多方法可以完成您的要求。此外，客户端也具有使事情变得更容易的框架，例如 JQuery。

# c# - 错误：无法加载 DLL '.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E） - 这是什么错误？

> ID：12899293
> 
> 赞同：2
> 
> 时间：2012-10-15T15:49:47.007
> 
> 标签：c#, .net, reference, error-handling

**情况：**

我正在尝试运行[CharLS JPEG-LS 压缩算法实现](http://charls.codeplex.com/)

该站点中有关于您可以在何处下载 C# VS 2010 解决方案的源代码。在解决方案中有 2 个 C# 类库项目、1 个非托管 VC++ 项目和 1 个 C# 控制台应用程序。控制台应用程序调用类库之一，“使用 CharLS;”，并且该特定库引用非托管 VC++ 项目。控制台应用程序在调试模式下完美运行。

**问题：**

但是当我为“Release”编译控制台应用程序并运行.exe（可执行文件）时，当在此过程中调用特定函数时，它给了我这个错误：

> 错误：无法加载 DLL 'CharLS.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

我也尝试创建另一个项目并从那里引用类库，但我得到了同样的错误。

我已经尝试通过网络阅读其他解决方案，但它们并没有帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T10:38:48.413

此错误的一些原因可能是：

1.  您为“DllImport”属性的“EntryPoint”属性提供的名称与您从本机组件导出的函数不匹配。

2.  另一个原因可能是缺少 dll 本身/或其任何依赖项（使用依赖项步行器并检查）

3.  第三个原因可能是调试/发布版本不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:00:51.643

在以发布模式运行之前，您是否（重新）构建了项目？看起来你没有，并且发布输出不包含这样的库。无论如何检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:03:14.543

确保它肯定已在服务器上注册。您是否也将应用程序池（假设为 IIS7+）设置为允许 32 位进程？

# java - Apache POI 写入时间大于 24

> ID：12899294
> 
> 赞同：1
> 
> 时间：2012-10-15T15:49:48.677
> 
> 标签：java, excel, apache-poi

我想写一个excel文件。在这个文件中有一些列，我把时间值放在“11:21”之类的地方。在此列的最后一行，我想添加这些时间值并显示总计，例如“123:23”。为此，我使用以下代码：

```
HSSFCellStyle cellStyle = wb.createCellStyle();
                    cellStyle.setDataFormat(HSSFDataFormat.getBuiltinFormat("h:mm"));
                    c.setCellValue(DateUtil.convertTime("49:12"));
                    c.setCellStyle(cellStyle); 
```

但它给了我以下错误：java.lang.IllegalArgumentException: Bad time format '49:12' expected 'HH:MM' or 'HH:MM:SS' - hour value (49) is outside the allowed range(0 ..23)

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T05:30:31.407

这种方法对我有用：
1\. 设置自定义数据格式 [h]:mm
2\. 使用 SimpleDateFormat 为您的时间获取 java.util.Date 对象
3\. Excel 的纪元是 1900，因此将 Date 对象中的年份设置为1900 使用日历
4。在减去 1 天后将单元格值设置为您的 Date 对象

```
CreationHelper createHelper = wb.getCreationHelper();

CellStyle hhmmStyle = wb.createCellStyle();
hhmmStyle.setDataFormat(createHelper.createDataFormat().getFormat("[h]:mm"));

SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");

xlsCell.setCellStyle(hhmmStyle);

Date time = sdf.parse("49:00");
Calendar cal = Calendar.getInstance();
cal.setTime(time);
cal.set(Calendar.YEAR, 1900);

xlsCell.setCellValue(DateUtil.getExcelDate(cal.getTime())-1.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:02:56.650

尝试使用`SimpleDateFormat`，

```
 SimpleDateFormat _24HourFormat = new SimpleDateFormat("HH:mm");
    SimpleDateFormat _12HourFormat = new SimpleDateFormat("hh:mm"); 
```

例如

```
SimpleDateFormat _24HourFormat = new SimpleDateFormat("HH:mm");
Date date = _24HourFormat.parse("49:12");
cell.setCellValue(date); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T15:56:26.990

您可以在数据的第一个位置添加撇号，以便将值设置为`String`，无需将值设置为`Date`。

```
c.setCellValue("'49:12"); 
```

# javascript - 我可以使用 javascript sdk 将我的网络应用程序数据保存到 facebook 吗？

> ID：12899295
> 
> 赞同：1
> 
> 时间：2012-10-15T15:49:48.770
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我开始将 facebook graph api 用于一个简单的 Web 项目。我的网络项目是这样的： - 人们使用 facebook 登录 - 我将使用他们的 facebook 数据将他们的个人资料详细信息放在我的网站上（使用 javascript） - 现在，我的网站有一个简单的游戏，当它结束时，会给用户一个相应的分数。我需要能够将分数保存到 facebook，这样每次用户再次访问我的网站时，他们都会看到他们的分数历史记录。

我知道我可以使用 PHP/MySQL 来做到这一点，但我只需要使用 javscript、html 和 css 来做到这一点。谢谢！:)

# android - 由数据库填充的 ListView；项目选择导致运行时异常

> ID：12899300
> 
> 赞同：0
> 
> 时间：2012-10-15T15:50:03.127
> 
> 标签：android, database, listview, illegalstateexception

我再次遇到关于由数据库填充的 ListView 的问题。我正在尝试为数据库创建一个 OnClickListener，这对我来说似乎是正确的，但是代码会产生非法状态异常。

代码：

```
private void getData() {
    db.open();
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
            android.R.layout.simple_list_item_1, 
            db.getAllSubjects(), 
            new String[] { "subject" }, 
            new int[] { android.R.id.text1 });

    ListView listView = (ListView) findViewById(android.R.id.list);
    listView.setAdapter(adapter);
    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long id)
        {
        Cursor cursor = db.getSubject(id);
        String subject = null;
        try {
            subject = cursor.getString(cursor.getColumnIndex("subject"));
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Intent intent = new Intent(Main.this, Marks.class);
        intent.putExtra("selected", subject);
        startActivity(intent);
        db.close();
        }
    });
} 
```

日志猫：

```
10-15 15:41:10.674: E/AndroidRuntime(23675): FATAL EXCEPTION: main
10-15 15:41:10.674: E/AndroidRuntime(23675): java.lang.IllegalStateException: database /data/data/maturaarbeit.nicola_pfister.marks/databases/database (conn# 0) already closed
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2082)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1445)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1405)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at maturaarbeit.nicola_pfister.marks.database.DBAdapter.getSubject(DBAdapter.java:137)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at maturaarbeit.nicola_pfister.marks.Main$1.onItemClick(Main.java:59)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.widget.AbsListView$1.run(AbsListView.java:3168)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.os.Handler.handleCallback(Handler.java:605)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.os.Looper.loop(Looper.java:137)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at android.app.ActivityThread.main(ActivityThread.java:4424)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at java.lang.reflect.Method.invokeNative(Native Method)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at java.lang.reflect.Method.invoke(Method.java:511)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-15 15:41:10.674: E/AndroidRuntime(23675):    at dalvik.system.NativeStart.main(Native Method) 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:55:09.250

那是因为您确实在`onItemClick`. 因此，当您第二次单击时`onItemClick`会再次调用但数据库已经关闭。

# windows - Windows 应用商店应用程序、VPN、RAS API

> ID：12899302
> 
> 赞同：1
> 
> 时间：2012-10-15T15:50:11.667
> 
> 标签：windows, windows-store-apps, vpn, ras

我们的 Windows 商店应用程序允许用户管理（创建或拨号）VPN 配置文件。

对于此功能，我们使用 RAS Api（创建和拨号 VPN 配置文件） [RAS Api](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446741%28v=vs.85%29.aspx)

Wlan Api (listen to wifi networks) - 将在 windows8 [Wlan Api中更改为带有 Windows.Networking.Connectivity 的类](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706275%28v=vs.85%29.aspx)

Windows Store 应用程序面临以下问题：

1.  RAS API 函数在 Windows 商店应用程序模板下无法正常工作（例如 RasEnumDevices 返回错误代码 5 - 拒绝访问）。然而，它在 Windows 8 上启动的桌面应用程序中运行良好。问题：我们如何让 RAS API 在窗口存储应用程序下工作？如果这绝对不可能 - 还有其他方法可以在为 Windows 应用商店开发的应用程序中创建 VPN 连接吗？

2.  Windows 操作系统存储在“..\Microsoft\Network\Connections\Pbk\rasphone.pbk”中的所有用户的 VPN 配置文件，可以在文件系统上手动找到该文件，但我们无法通过 API 访问此文件，或者我们不能直接访问。当前的解决方法使用自己创建的位于用户配置文件文件夹中的 PBK 文件。问题：我们如何访问存储在操作系统中的系统 VPN 连接。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-26T11:20:20.477

适用于 Windows 的 Hotspot Shield VPN 提供隐私浏览，以确保您的网络会话的隐私。在这里查看：[http ://www.anchorfree.com/hotspot-shield-VPN-download-windows.php](http://www.anchorfree.com/hotspot-shield-VPN-download-windows.php)

# c# - 将 Access 数据库中的数据读入列表框

> ID：12899303
> 
> 赞同：0
> 
> 时间：2012-10-15T15:50:13.703
> 
> 标签：c#, .net, ado.net, datareader

有人能告诉我如何解决这个错误吗？

```
 SqlCommand cmd = new SqlCommand(sqlCmd, conn)
 --> conn: Aurgument type 'System.Data.OleDb.OleDbConnection' is not assignable to parameter type 'System.Data.SqlClient.SqlConnection'.

  private void Form1_Load(object sender, EventArgs e)
    {
        string connString = "Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source=C:\\Users\\KevinDW\\Desktop\\dotNET\\Week 5\\Prak1\\demo1.accdb";

        OleDbConnection conn = new OleDbConnection(connString);

        conn.Open();

        string sqlCmd = "SELECT CursusNaam FROM tblCursus";

        SqlCommand cmd = new SqlCommand(sqlCmd, conn);

        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            listBox1.Items.Add(reader);
        }

        conn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:52:26.063

您正在使用 SqlCommand/etc，它需要使用 SqlConnection 对象而不是 OleDbConnection。

它是您要连接的 SQL 数据库吗？如果是这样，请`SqlConnection`改用

编辑：显然不是，读取连接字符串...：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:51:37.303

您正在混淆 Sql 和 OleDb

使用`OleDbCommand`代替`SqlCommand` 和使用`OleDBDataReader`代替`SqlDataReader`

**例如：**

```
 private void Form1_Load(object sender, EventArgs e)
    {
        string connString = "Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source=C:\\Users\\KevinDW\\Desktop\\dotNET\\Week 5\\Prak1\\demo1.accdb";

        OleDbConnection conn = new OleDbConnection(connString);

        conn.Open();

        string sqlCmd = "SELECT CursusNaam FROM tblCursus";

        OleDbCommand cmd = new OleDbCommand(sqlCmd, conn);

        using (OleDBDataReader reader = cmd.ExecuteReader())
        {
            listBox1.Items.Add(reader);
        }

        conn.Close();
    }
} 
```

# objective-c - “财产由 ivar 支持”？这在技术上意味着什么？

> ID：12899305
> 
> 赞同：4
> 
> 时间：2012-10-15T15:50:29.317
> 
> 标签：objective-c, properties, ivar

所以......我对Objective C还是很陌生......拿一些iTunes U corses......做一些练习......

但是当你使用 @synthesize myProperty = _myIvarPropertyNameToUse; ... iOS 5 将创建一个“支持”该属性的 ivar。

就事情在记忆中的位置而言，这里到底发生了什么......

(1) ivar 是一个真正的变量吗？...或者它是指向对象中属性位置的指针？

(2) 属性在堆上，（作为对象的一部分），对吧？ivar 也在堆上吗？

我想我可能会失去大局......拥有由 ivar 支持的财产有什么意义？

谢谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T16:19:40.083

Objective-C 对象只是在堆上分配的 C 结构（嗯，或多或少）。当您声明一个实例变量 (ivar) 时，它被定义为该结构的偏移量。因此，如果您手动声明了一些这样的 ivars（不要再这样做了，但它说明了这一点）：

```
@interface Foo : NSObject {
   NSString *ivar1;
   NSString *ivar2;
} 
```

然后，当您`+alloc`创建一个新实例（调用它`foo`）时，该结构将是一些标头，后跟 NSObject 的 ivars，然后是 memory for，`ivar1`然后是 memory for `ivar2`。`ivar1`将`foo`点加上一些偏移量。（这不再完全正确，但请继续关注我；理解旧的实现更简单。）

由于`foo`是指向结构的指针，因此您实际上可以直接将此偏移指针引用为`foo->ivar1`. 它确实是一个结构。永远不要这样做，但这是合法的语法。

在`@implementation`块内部，`ivar1`自动翻译为`self->ivar1`. 不要太担心如何`self`实现，但相信它是指向你的结构的指针。同样，永远不要使用这种`->`语法。这是一个底层的实现细节（并且不再总是可能的；见下文）。

好的，这就是 ivar。在过去（ObjC 1.0），这实际上就是我们所拥有的。您声明了您的 ivars，然后您手动创建了可以设置和返回其值的访问器方法。

然后 ObjC2 出现了，它在某些情况下也给了我们一种叫做非脆弱 ABI 的东西。这在一定程度上改变了 ivars 的底层实现，所以你不能总是再实际使用`->`了。但无论如何你都不应该使用它。即便如此，假装事情是旧的方式更简单。更重要的是，ObjC2 添加了这个称为“属性”的新东西。属性只是实现某些方法的承诺。所以当你说：

```
@property (nonatomic, readwrite, strong) NSString *property; 
```

这几乎等同于说以下内容：

```
- (NSString *)property;
- (void)setProperty:(NSString *)aProperty; 
```

（差异很少很重要。）请注意，这不提供实现。它不会创建 ivars。它只是声明了一些方法。

现在在 ObjC1 中，我们一遍又一遍地编写相同的访问器代码。你有 20 个可写的 ivars，你写了 40 个访问器方法。它们几乎完全相同。搞砸的机会很多。而且很乏味。谢天谢地[Accessorizer](http://www.kevincallahan.org/software/accessorizer.html)。

使用 ObjC2，如果您添加了`@synthesize`. 它会自动创建一个与属性同名的 ivar，并编写一个 getter 和（如果需要）setter 来读取和写入该 ivar。传递`=_property`只是更改使用的 ivar 的名称。我们称之为“支持 ivar”。

现在，在最新版本的编译器中，您甚至不需要`@synthesize`. 这种模式非常普遍，并且已经存在了几十年，现在它是默认的，除非你告诉编译器不要这样做。它会自动合成带有前导下划线的 ivar（这是最佳实践）。

您应该知道的另一条信息是，您应该始终使用访问器来访问 ivar，即使在对象内部也是如此。唯一的例外是`init`and`dealloc`方法。在那里您应该直接访问 ivar（使用前导下划线）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:56:18.140

需要明确的是，当您这样做时`@synthesize myProperty = _myIvarPropertyNameToUse;`，您唯一的更改是支持 ivar 的名称。该行`@synthesize myProperty;`还将创建一个支持 ivar，但它会被称为 myProperty，而不是 _myIvarPropertyNameToUse...

支持 ivar 是对象的一部分，所以是的，它在堆上。它可以用作真正的变量，这意味着您可以在目标代码中获取和设置它。

# css - 将鼠标悬停在 DIV 上时如何防止下面的 DIV 向上滑动

> ID：12899306
> 
> 赞同：0
> 
> 时间：2012-10-15T15:50:36.450
> 
> 标签：css, html, hover

当我将鼠标悬停在一个 DIV 上时，我遇到了一些麻烦，下面的 DIV 在我悬停的 DIV 下方向上滑动。怎么能顶他们呢？

这是一个[jsfiddle](http://jsfiddle.net/gcTHf/)来说明问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:54:30.557

在您的 CSS 中：

```
.calendar-event:hover {
    overflow: visible;
    background: none repeat scroll 0 0 #FAFAFA;
    border: solid 1px #999999;
    width: auto;
    line-height: 1.5em;
    height: auto;
    position: absolute;
} 
```

问题是最后一个属性。删除“位置：绝对；”；这导致 div 脱离浏览器的正常定位流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:59:13.183

我在尝试修复另一个问题时无意中解决了这个问题：

我改变了这个：

`.calendar-event:hover { overflow: visible; background: none repeat scroll 0 0 #FAFAFA; border: solid 1px #999999; width: auto; line-height: 1.5em; height: auto; position: absolute; }`

对此：

`.calendar-event:hover .event-title { overflow: visible; background: none repeat scroll 0 0 #FAFAFA; border: solid 1px #999999; width: auto; line-height: 1.5em; height: auto; position: absolute; }`

它解决了我的问题。

# php - 将参数传递给不同包中的视图 - symfony2

> ID：12899307
> 
> 赞同：1
> 
> 时间：2012-10-15T15:50:40.693
> 
> 标签：php, symfony

我正在创建一个控制面板应用程序，它有一个包含一些基本功能的基本包和用于高级和特定功能的特定包。

例如，基本包处理用户身份验证并保存所有模板资产，其他包添加功能以配置操作系统的不同部分。

我需要能够将基本包布局中的菜单链接添加到其他每个包。而且我更喜欢在每个捆绑配置中都这样做，这样我就可以为不同的客户端混合和匹配功能。

我阅读了所有关于编译器通道、扩展和依赖注入的信息，但没有运气。这样做是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:07:29.100

如果您使用的是 Twig，这应该可以解决问题...

```
{% render "DifferentBundle:ControllerName:functionalityName" with {'argument_name': 3} %} 
```

你应该`functionalityNameAction`在你的 DifferentBundle 控制器中有一个方法来让它工作。

查看文档中的[创建和使用模板 - 嵌入控制器](http://symfony.com/doc/current/book/templating.html#embedding-controllers)部分。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:14:40.003

以防万一有人遇到类似问题，以下是我实现此目的的方法：

我在我的 BaseBundle 中创建了一个服务，它实现了 __get 、 __set 、 __isset 和 __unset 魔术方法，并有一个额外的 append 方法。它将变量存储在类内的静态变量中。然后我将 Listeners 添加到我的所有捆绑包中：

```
namespace Mbs\OtherBundle\Listener;

use Mbs\BaseBundle\Services\GlobalVars;
use Symfony\Component\HttpKernel\Event\FilterControllerEvent;

class ControllerListener
{
    protected $_global_vars;

    public function __construct(GlobalVars $global_vars)
    {
        $this->_global_vars = $global_vars;
    }

    public function onKernelController(FilterControllerEvent $event)
    {
        $this->_global_vars->append('bundles', 'mbs.other');
    }
} 
```

这是其中一个捆绑包的 services.yml。GlobalVars 是我前面提到的类。

```
services:
    mbs.base_controller_listener:
        class: Mbs\OtherBundle\Listener\ControllerListener
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }
        arguments:  [ @mbs.global_vars ] 
```

# javascript - 在 Handlebars JS 模板中返回/显示整数？

> ID：12899312
> 
> 赞同：0
> 
> 时间：2012-10-15T15:50:59.137
> 
> 标签：javascript, templates, handlebars.js

我需要使用 Handlebars JS 模板在我正在创建的应用程序中显示一些数据。因此，例如，我的方法返回打开的票的数量......现在显示这个整数我将如何在模板中执行它？

在我的 JS 文件中，我尝试了这样的事情：

```
 this.switchTo('list', {
        count: this.count
    }); 
```

'list' 是我的模板，count 是我的整数变量。如果它是 JSON 格式，我能够在模板中显示内容，但如果它只是一个整数，我真的不知道该怎么做......

无论如何，这就是我用来显示 JSON 格式的字符串：

```
<ul class="ticket_list">
    {{#each tickets}}
        <li>
            {{this.subject}}
        </li>
    {{/each}}   
</ul 
```

是否创建像 JSON 格式的字符串然后将其发送到模板的解决方案？

任何建议都会很棒，因为我很坚持这个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:21:49.517

您发送到 Handlebars 模板的数据结构必须与模板的结构相匹配。所以，如果你有这个模板：

```
<ul class="ticket_list">
    {{#each tickets}}
        <li>
            {{this.subject}}
        </li>
    {{/each}}   
</ul> 
```

那么您的数据需要如下所示：

```
// #each implies an array
tickets: [
    { subject: ... }, // this.subject implies that you have an object with a subject key
    { subject: ... },
    ...
] 
```

因此，如果您想使用该模板显示单个值，那么：

```
this.switchTo('list', {
    tickets: [ { subject: this.count } ]
}); 
```

或者您可以使用不同的模板：

```
<!-- whatever HTML wrapping you need... -->
{{count}} 
```

和

```
this.switchTo('count_template', {
    count: this.count
}); 
```

# eclipse - @XmlTransient 在生成 WSDL 时被忽略 - Axis2 WS

> ID：12899314
> 
> 赞同：3
> 
> 时间：2012-10-15T15:51:00.470
> 
> 标签：eclipse, web-services, wsdl, axis2, xmltransient

我有一堂课

```
public class Calculator {
    public Test getTest(){
        return new Test();
    }
} 
```

我想公开为 Web 服务。测试定义为：

```
public class Test {
    private Test2[] tests;
    @XmlTransient
    public Test2[] getTests() {
        return tests;
    }
    public void setTests(Test2[] tests) {
        this.tests = tests;
    }
} 
```

现在，在 Test2[] 测试中添加 @XmlTransient 注释，我希望它不会在生成的 WSDL 中列出（我使用的是 Eclipse，所以右键单击计算器 > Web 服务 > 生成 Web 服务），但我m 不对：

```
...
<wsdl:types>
<xs:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="...">
<xs:complexType name="Test">
<xs:sequence>
<xs:element maxOccurs="unbounded" minOccurs="0" name="tests" nillable="true" type="ax21:Test2"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="Test2">
<xs:sequence/>
</xs:complexType>
</xs:schema>
...
</wsdl:types>
... 
```

如您所见，**测试**仍然存在于 WSDL（第 5 行）中。如果有用，我正在使用 Axis2，Eclipse Indigo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:55:41.940

这仍然是一个问题，但我找到了解决方法。我添加到我的 services.xml 中：

```
 <parameter name="beanPropertyRules">
        <bean class="package.Test" excludeProperties="tests" />
    </parameter> 
```

那是：

```
 <bean class="package.Object" excludeProperties="propertyToExcludeFromWSDL" /> 
```

这行得通。

# java - Hibernate Criteria 集合的最近日期字段

> ID：12899315
> 
> 赞同：1
> 
> 时间：2012-10-15T15:51:03.687
> 
> 标签：java, spring, hibernate, hibernate-criteria

我有一系列状态的实验室，这是我的简化课程：

```
 LabState {
        private Integer id;
        private State state;
        private Date date;
        private String comments;
    }

    State{
        private Integer id;
        private String name;

    }

    Lab{
        private Integer id;
        private List<LabState> states = new ArrayList<LabState>();
        private Date date;
        private String name
    } 
```

我想通过特定实验室的 Hibernate Criteria the Last State 获取。在 mySql 中这项工作正常：

```
SELECT ls.* FROM labs_states les INNER JOIN
    ( SELECT idLab, idLabState, MAX(date) AS lastDate FROM labs_states GROUP BY idLab)
        groupedLabs ON les.idLab = groupedLabs.idLab  AND les.date = groupedLabs.lastDate 
```

**编辑：搜索方法：**

```
 public List<Labs> search(LabSearch labSearch) {

            SessionFactory sessionFactory = hibernateTemplate.getSessionFactory();
            Session session = sessionFactory.openSession();

            Criteria criteria = session.createCriteria(Lab.class);

            criteria.add(Restrictions.like("name", "%" + labSearch.getName() + "%"));

            if(labSearch.getState() != null){
                criteria.createCriteria("states").add(Restrictions.eq("state", labSearch.getState())).addOrder(Order.asc("date")).list().get(0);

            return (List<Lab>) criteria.list();
} 
```

我不知道如何使用 Criteria 执行此操作，或者是否还有其他方法可以执行

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:18:11.547

获取给定实验室的最后状态

```
Criteria criteria = session.createCriteria(Lab.class)
    .add(Restrictions.like("name", "%" + labSearch.getName() + "%"));
    .createAlias("states", "labstate")
    .createAlias("labstate", "state")
    .addOrder(Order.desc("date"))
    .setProjection(Projections.list()
        .add(Projections.property("labstate.id"), "id")
        .add(Projections.property("labstate.date"), "date")
        .add(Projections.property("labstate.comments"), "comments")
        .add(Projections.property("state.name"), "state"))
    .setResultTransformer(Transformers.aliasToBean<LabstateDto>())
    .setMaxResults(1);

return (List<LabstateDto>)criteria.list(); 
```

如果您想要返回一个以上状态的多个实验室，您将需要另一个查询，这并不容易，因为您在 db 中而不是在课堂上有从 Labstate 到 Lab 的反向引用。

更新：针对您的评论，一个替代查询

```
Criteria criteria = session.createCriteria(Lab.class, "lab")
    .add(Restrictions.like("name", "%" + labSearch.getName() + "%"));
    .createAlias("states", "labstate")
    .add(Subqueries.proptertyEq("labstate.Id", DetachedCriteria.for(Lab.class)
        .add(Restrictions.propertyEq("id", "lab.id"));
        .createAlias("states", "lstate")
        .createAlias("labstate.state", "state")
        .add(Restrictions.eq("name", state));
        .addOrder(Order.desc("labstate.date"))
        .setProjection(Projection.property("labstate.Id"))
        .setMaxResults(1)
     );

return (List<Lab>)criteria.list(); 
```

# php - Laravel：未定义的索引 - 数组键不存在

> ID：12899316
> 
> 赞同：1
> 
> 时间：2012-10-15T15:51:05.637
> 
> 标签：php, arrays, foreach, laravel

几天来我一直在研究这个问题，但我似乎无法弄清楚。

我想，我正在尝试做一些简单的事情，只是循环遍历一个数组。这是数组的屏幕截图： http: [//cl.ly/image/3j2J3x1C3B0j](http://cl.ly/image/3j2J3x1C3B0j) 我正在尝试遍历所有的“**技能**”数组，那里有“**技能**”数组和里面的“**图标**”。为此我做了2个循环：

```
 foreach ($hero_data['skills'] as $skills)
            {
                foreach ($skills as $skill)
            {
                //print_r($skill['skill']);
            }
    } 
```

不幸的是，这在 laravel 中不起作用。我收到“未定义的索引：技能”错误。当我在外面尝试它时，它确实有效，作为一个独立的脚本。

在两个循环之外，我可以选择图标：

```
 print_r($hero_data['skills']['active'][0]['skill']['icon']); 
```

我确定我忽略了一些愚蠢的事情......

非常感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:16:30.357

查看您从此处发布的其他解决方案中所说的内容，很明显您正在循环遍历子数组，并且并非所有这些子数组都包含您的进一步循环正在寻找的键。

尝试这个：

```
foreach ($hero_data['skills']['active'] as $skills) {
    if (isset($skills['skill']['icon'])) {
        print_r($skills['skill']['icon']);
    }
} 
```

因为，例如，如果`$hero_data['skills']['active'][8]` 实际上没有`skill`数组或`['skill']['icon']`数组更下方，那么循环将抛出您一直报告的错误。

您要查找的嵌套数组键必须在循环的每次迭代中找到，否则必须插入一个子句以跳过这些数组元素（如果找不到）。而且您的数组似乎`$hero_data`有没有`['skill']`or的部分`['icon']`，因此请尝试`isset()`在循环中插入一个或多个检查。否则，您需要找到一种方法来保证`$hero_data`阵列的完整性。

顺便说一句，你的游戏看起来很有趣！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:54:31.450

在技​​能内部，您有一个“活动”属性，它包含您需要的数组，因此您需要将代码更改为：

```
 foreach ($hero_data['skills'] as $skills)
            {
                foreach ($skills['active'] as $skill)
            {
                //print_r($skill['skill']);
            }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:07:56.937

您只需要迭代数组的**活动**索引。这应该工作：

```
foreach ($hero_data['skills']['active'] as $skills) {
    print_r($skills['skill']['icon']);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T15:55:00.160

尝试：

```
foreach ($hero_data['skills'] as $skills)
{
  foreach ($skills as $skillState)
  {
    foreach ($skillState as $skill)
    {
      print_r($skill['skill']);
    }
  }
} 
```

# html - 圆角png图像边框发光效果

> ID：12899317
> 
> 赞同：2
> 
> 时间：2012-10-15T15:51:08.207
> 
> 标签：html, css, png, border

请看看这个小提琴：http: [//jsfiddle.net/SkjHs/4/](http://jsfiddle.net/SkjHs/4/)

```
<html>
<ul class="langBar">
  <li><a href="?lang=az&amp;page=main"> <img src="http://goo.gl/aIxpv"> </a></li>
  <li><a href="?lang=en&amp;page=main"> <img src="http://goo.gl/wIQob"> </a></li>
  <li><a href="?lang=ru&amp;page=main"> <img class="activeLang" src="http://goo.gl/If4lA"> </a></li>
</ul>
</html> 
```

```
html {
background-color:#000;}
.langBar{
    display: block;
    overflow: hidden;
    float: left;
    width: 125px;
}

.langBar li{
    display: block;
    width: 32px;
    height: 40px;
    float: left;
    margin-left: 7px;
    padding: 0px;
}

.activeLang{
    -moz-border-radius: 20px;
    width: 32px;
    height: 32px;
    border-radius: 20px;
    border: 2px solid #482663;
}

.langBar li a{
    display: block;
    height: 100%;
    width: 100%;
} 
```

我正在尝试围绕`activeLang`类图像实现一些漂亮的发光效果。第一个问题是，我正在边框和图像本身之间进行填充。二是不能得到发光效果。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:02:31.993

首先，图像的填充是因为图像画布[**My Fiddle**](http://jsfiddle.net/SkjHs/9/)

裁剪画布的图像

![在此处输入图像描述](../Images/dbbec1a28c22e10dc808a4c750bed475.png)

添加下面的 CSS 来`.activeLang`为您的图像添加类似发光的效果...（当然您可以根据自己的选择更改颜色）

```
box-shadow: 0 0 3px 3px #888; 
```

并从中删除`.activeLang`

```
 width: 32px;
 height: 32px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:02:00.477

这种发光效果可以通过以下方式实现`box-shadow`：

```
/* pink glow effect */
box-shadow: 0 0 5px 5px #f3a; 
```

有关发光效果的示例，请参见[http://jsfiddle.net/SkjHs/8/ 。](http://jsfiddle.net/SkjHs/8/)

或者（正如我设置的那样）不使用`img`-tags 的解决方案：

```
<ul class="langBar">
    <li><a href="?lang=az&amp;page=main" class="icon icon-az">[AZ]</a></li>
    <li><a href="?lang=en&amp;page=main" class="icon icon-en">[EN]</a></li>
    <li><a href="?lang=ru&amp;page=main" class="icon icon-ru active">[RU]</a></li>
</ul>

.langBar {
    overflow: hidden;
}

.langBar li{
    display: block;
    float: left;
    margin-left: 7px;
    padding: 0px;
}

.icon {
    display: inline-block;
    width: 32px;
    height: 32px;
    margin: 5px 0;
    overflow: hidden;
    text-indent: 110%;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;

}

.icon:focus, .icon:active, .icon:hover,
.icon.active {
    -webkit-box-shadow: 0 0 5px 5px #f3a;
    -moz-box-shadow: 0 0 5px 5px #f3a;
    box-shadow: 0 0 5px 5px #f3a;
}

/* one may use a sprite and only set the background position here */
.icon-az {
    background-image: url(http://goo.gl/aIxpv);
}
.icon-en {
    background-image: url(http://goo.gl/wIQob);
}
.icon-ru {
    background-image: url(http://goo.gl/If4lA);
} 
```

[http://jsfiddle.net/SkjHs/10/](http://jsfiddle.net/SkjHs/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:24:14.607

作为精灵使问题的工作更短的一个例子：

```
<ul class="langBar">
    <li><a id="az" href="?lang=az&amp;page=main"></a></li>
    <li><a id="en" href="?lang=en&amp;page=main"></a></li>
    <li><a id="ru" href="?lang=ru&amp;page=main" class="activeLang"></a></li>
</ul>

html {
background-color:#000;}
.langBar{
    display: block;
    overflow: hidden;
    float: left;
    width: 125px;
}

.langBar li {
    display: block;
    width: 32px;
    height: 32px;
    float: left;
    margin-left: 7px;
    padding: 0px;
}

.langBar li a {
    background: url(https://lh5.googleusercontent.com/orZ4dkDz2lBVJMB7D0Pb2fBHB8JPLcD8r2xqSYw-e3K7K2G427Ws_iqNbcYF1U2X36ju1y3eVy0) no-repeat 0 0;
    display:block;
    width:32px;
    height:32px;
}

.langBar li a#az {
    background-position:0 0;
}

.langBar li a#en {
    background-position:0 -32px;
}

.langBar li a#ru {
    background-position:0 -64px;
}

.langBar li a.activeLang, 
.langBar li a#az.activeLang, 
.langBar li a#en.activeLang, 
.langBar li a#ru.activeLang {
    background-position-x: -46px;
} 
```

​ 觉得这有点冗长，这就是为什么我把它放在一个 jsFiddle 中：http: [//jsfiddle.net/mori57/n3Q74/](http://jsfiddle.net/mori57/n3Q74/)

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T16:03:12.727

即使使用border-radius，边框也不会进入元素内部。每个图像文件边缘的少数像素会强制将边框置于图像内容之外。

![图片](../Images/e17dc7bb91c548a098d49cb07227e59d.png)

我建议编辑您的图像以删除间距，甚至添加您想要的所有效果。

# select - 查询给出了两个相同的结果

> ID：12899318
> 
> 赞同：0
> 
> 时间：2012-10-15T15:51:09.800
> 
> 标签：select, join, mysqli

我有以下 SQL 查询，但遇到了一个问题：当我执行它时，我从“产品”表的“sn”列中获得了两个相同的序列号。

```
SELECT specifications.productname, 
products.sn, specifications.year,
lendings.lending_date
FROM products
INNER JOIN lendings ON products.id = lendings.product_id
INNER JOIN specifications ON products.sn LIKE CONCAT(\'%\', specifications.sn, \'%\') OR products.type LIKE CONCAT(\'%\', specifications.type, \'%\')
WHERE lendings.user_id = ? 
```

编辑：

借贷表：

```
user_id       product_id
1             1
1             2
2             3 
```

规格表：

```
productname   year        type     sn
name1         2012        1        1234
name2         2011        2        4321
name3         2010        3        3241 
```

产品表：

```
id            sn
1             AAAAAAAA1234
2             BBBBBBBB4321
3             CCCCCCCC3241 
```

编辑2：

```
SELECT products.id, 
       specifications.productname, 
       products.sn, 
       specifications.year, 
       lendings.lending_date
FROM products
INNER JOIN lendings ON products.id = lendings.product_id
INNER JOIN specifications ON products2.sn LIKE CONCAT(specifications.sn, \'%\') OR    products.type = specifications.type
WHERE lendings.user_id = ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:55:00.193

通常，这意味着您的一个联接中没有所有必要的联接列，并且您得到的是[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)。在数据库术语中，这意味着您要连接到一个表并希望连接到单行，但多行符合条件，因此您实际上要连接多行。发生这种情况时，您将在结果中多次获得同一行（在您的示例中为产品行）。

如果您发布一些测试数据以便可以确认这种情况会更好，但由于您没有，我建议您检查每个联接以确保您没有为给定的产品行返回多行。

我特别怀疑您的查询的一部分是这个连接：

```
INNER JOIN specifications ON products.sn LIKE CONCAT(\'%\', specifications.sn, \'%\') OR products.type LIKE CONCAT(\'%\', specifications.type, \'%\') 
```

您正在使用`LIKE`运算符加入，这似乎很有可能获得多行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:04:18.567

那么你的加入条件之一太松了

例如，两个指向同一产品的借贷记录。

# sqlite - 将 SQLite 与 Rubymotion 一起使用

> ID：12899323
> 
> 赞同：2
> 
> 时间：2012-10-15T15:51:18.853
> 
> 标签：sqlite, rubymotion

我想将 C 级 SQLite API 与 Rubymotion 一起使用，但如果可能的话，我不确定如何包含 SQLite dylib 和头文件。

据我了解，dylib 应以下列方式包含：

```
app.libs += ['/usr/lib/libsqlite3.dylib'] 
```

但这还不够，`sqlite3_open`仍然没有找到该功能。我猜应该以某种方式指定头文件。

PS 我知道我可以使用 FMDB 来获得相同的功能，但我想知道直接使用 C 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:43:47.853

我的没有任何问题。这是我的库条目：

```
app.libs += ['/usr/lib/libz.dylib', '/usr/lib/libsqlite3.dylib'] 
```

也许你需要 libz.dylib 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:21:44.263

您可以查看[https://github.com/sxross/MotionModel/tree/sql](https://github.com/sxross/MotionModel/tree/sql)。我已经使用 FMDB 为 SQLite 构建了一个类似 ActiveRecord 的适配器。示例应用程序可能是您的一个很好的参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T05:30:57.723

fmdb [cocoapod github 存储库](https://github.com/ccgus/fmdb)目前（截至 2014 年 2 月 26 日）在 github 上有 3970 个收藏夹、918 个分叉和 336 个观察者。

我想这就是你要找的。fmdb 是基于 sqlite 的 Objective C 包装器。

要开始使用 cocoapods，请运行：

```
gem install cocoapods 
```

用于处理 cocoapods 的 ruby​​ motion gem 是`motion-cocoapods`

不过，我仍在寻找类似 activerecord 的 ORM。有`motion-sqlite3`宝石，但到目前为止我还不能让它工作。（5 分钟后）虽然`motion-model`这颗宝石看起来很有希望......并且有大量记录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-10T19:11:20.383

顺便说一句，现在是 2020 年，您可以使用[`motion-sqlite3`](https://github.com/mattgreen/motion-sqlite3)gem 在 RubyMotion iOS 应用程序中轻松使用 SQLite。它已经有一段时间没有更新了，但那是因为它可以正常工作。

# c# - 如何使用 .NET ZipArchive 和 ZipArchiveEntry 类提取带有密码的文件

> ID：12899325
> 
> 赞同：0
> 
> 时间：2012-10-15T15:51:18.993
> 
> 标签：c#, .net, passwords, ziparchive

我正在使用以下代码提取 zip 文件的内容：

```
using(ZipArchive zipArchive = new ZipArchive(memoryStream))
{
    foreach (ZipArchiveEntry entry in zipArchive.Entries)
    {
        entry.ExtractToFile("extract.txt");
    }
} 
```

这对于那些没有密码保护的 zip 文件非常有效，但是，我需要它也适用于那些受密码保护的密码。

我已经看到其他示例可以使用其他类或其他代码实现我想要的，但我发现这种方式非常干净，我希望有一个可以设置密码的属性（它应该不再需要比这更难）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:05:32.587

正如 Oded 所说，内置类不支持密码。[您应该尝试像DotNetZip](http://dotnetzip.codeplex.com/)这样的外部库。它是免费的、功能强大的，并且几乎支持您需要的一切。

在这种情况下，您的示例是：

```
 using (ZipFile zip = ZipFile.Read(ExistingZipFile))
  {
    ZipEntry e = zip["TaxInformation-2008.xls"];
    e.ExtractWithPassword(BaseDirectory, Password);
  } 
```

# objective-c - 使用 UIScrollView 和 UIImageView 有效地滚动和缩放照片

> ID：12899326
> 
> 赞同：0
> 
> 时间：2012-10-15T15:51:20.657
> 
> 标签：objective-c, uiscrollview, uiimageview, scroll, zooming

我需要一种简单的方法来滚动浏览照片并根据需要缩放每张照片。就像原始 Apple 的照片应用程序一样。我理解这个概念： UIScrollView 有许多 UIScrollView 子视图作为页面，每个子视图都有一个 UIImageView 可以放大。

但是，我还看到了一个示例，但我再也找不到了，它使用更有效的方法来执行此操作 - 仅使用 3 页（UIScrollView）来保存尽可能多的照片以节省内存使用量。所以基本上，如果有 10 张照片，则只显示 3 个页面（居中可见、左隐藏、右隐藏），并且当您向左或向右滚动时，新图像被放置到这些页面中以模拟连续滚动的效果。

我的问题是这是如何完成的，或者是否有一个现有的例子，所以我不重新发明轮子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:59:11.380

您可能想看看 MWPhotoBrowser，它与 Photo 应用程序非常相似。

[https://github.com/mwaterfall/MWPhotoBrowser](https://github.com/mwaterfall/MWPhotoBrowser)

# javascript - 触发选项更改事件时如何自动关闭移动选择框？

> ID：12899330
> 
> 赞同：1
> 
> 时间：2012-10-15T15:51:42.277
> 
> 标签：javascript, android, jquery, mobile

如果我打开一个选择菜单并选择一个选项，则在 Android 4.0.2 上进行测试，更改事件可以触发，但我必须单击菜单的完成按钮才能关闭它。选择选项后是否可以触发此操作？到目前为止，我已经尝试向身体添加`.focus()`和`.blur()`转移焦点，但没有成功。

这是我一直在测试的代码片段：

```
$('select').on('change', function(e){ 
    console.log( $(this).find("option:selected").data('id') ); 

    $('body').blur();
    e.preventDefault(); 
}); 
```

还有jsfiddle：http: [//jsfiddle.net/dnRZc/5/](http://jsfiddle.net/dnRZc/5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:39:50.077

试试这个它对我有用。

```
$('select').on('change', function(e){ 
   $(this).blur();
   e.preventDefault(); 
}); 
```

# java - 关于 SWT 应用程序中 html 页面的对话框

> ID：12899333
> 
> 赞同：1
> 
> 时间：2012-10-15T15:51:54.937
> 
> 标签：java, eclipse, swt, eclipse-rcp, jface

我有一个关于对话框，`Swing`它使用 a`JEditorPane`来显示`html`文档 ( `setContentType("text/html");`)。
我想在 Eclipse SWT 应用程序中创建一个 about 对话框并显示这个相同的`html`文档，该文档将以与`Swing`.
我怎么能这样做？什么是合适的小部件？`StyledText`?
我从 a `Browser`in a开始`Handler`：

```
@Execute
    public void execute(final Shell currentShell){  
      //load html file in textReader
        Browser browser = new Browser(currentShell, SWT.NONE);  
        browser.setText(textReader.toString());  
    } 
```

但什么都没有显示。解决此问题的正确方法是什么？

**更新：**测试@Baz 更改：

```
@Execute
    public void execute(final Shell currentShell){  
        currentShell.setLayout(new FillLayout());  
        //load html file in textReader  
        Browser browser = new Browser(currentShell, SWT.NONE);
        browser.setText(textReader.toString());
        currentShell.pack();
} 
```

它完全破坏了应用程序！加载的 html 覆盖了现有元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:17:01.873

您始终可以使用`Dialog`带有嵌入式`Browser`小部件的旧 JFace：

```
public class BrowserDialog extends Dialog {

    private String browserString;

    protected BrowserDialog(Shell parentShell, String browserString) {
        super(parentShell);
        this.browserString = browserString;
    }

    @Override
    protected Control createDialogArea(Composite parent) {
        Composite composite = (Composite) super.createDialogArea(parent);

        GridLayout layout = new GridLayout(1, false);
        composite.setLayout(layout);

        GridData data = new GridData(SWT.FILL, SWT.FILL, true, true);
        data.widthHint = 400;
        data.heightHint = 400;
        composite.setLayoutData(data);

        Browser browser = new Browser(composite, SWT.NONE);
        browser.setText(browserString);
        browser.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        return composite;
    }

    @Override
    protected void createButtonsForButtonBar(Composite parent) {
    }

    @Override
    protected void configureShell(Shell newShell) {
        super.configureShell(newShell);
        newShell.setText("About");
    }

    @Override
    public void okPressed() {
        close();
    }

    public static void main(String[] args)
    {
        final Display display = new Display();
        Shell shell = new Shell(display);

        Color gray = display.getSystemColor(SWT.COLOR_WIDGET_BACKGROUND);

        String hex = String.format("#%02x%02x%02x", gray.getRed(), gray.getGreen(), gray.getBlue());

        new BrowserDialog(shell, "<body bgcolor='" + hex + "'><h2>TEXT</h2></body>").open();
    }

} 
```

看起来像这样：

![在此处输入图像描述](../Images/a164756b3ac481a150ad51182d0cdecd.png)

如果您想要对话框按钮，只需将`createButtonsForButtonBar(Composite parent)`方法替换为：

```
@Override
protected void createButtonsForButtonBar(Composite parent) {
    createButton(parent, Dialog.OK, "OK", true);
    createButton(parent, Dialog.CANCEL, "Cancel", false);
} 
```

然后它看起来像这样：

![在此处输入图像描述](../Images/dff08c117ea7b6ab989097ede3d9b342.png)

# unicode - 多语言数据的正文编码

> ID：12899334
> 
> 赞同：1
> 
> 时间：2012-10-15T15:51:56.217
> 
> 标签：unicode, encoding, utf-8, character-encoding

我目前正在开发一个支持多种语言的应用程序：英语、西班牙语、俄语、波兰语等。

我已将我的 SQL 服务器数据库设置为具有 Unicode 字段类型（nvarchar 等）。

我现在关心的是在 HTML、文本、XML 文件等上设置正确的编码。我知道它需要是 UTF，但不确定它是 UTF-8、UTF-16 还是 UTF-32。有人可以解释其中的区别以及最好使用哪种编码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:33:20.493

如果这是关于应该使用 Web 浏览器的东西，看起来，那么 UTF-8 是唯一合理的选择，因为它是唯一在浏览器中被广泛支持的编码。关于设置编码的方法，请查看 W3C 页面[Character encodings](http://www.w3.org/International/O-charset.en.php)。

# java - 通过java中的代理服务器URL连接到网站

> ID：12899338
> 
> 赞同：0
> 
> 时间：2012-10-15T15:52:18.510
> 
> 标签：java, proxy, urlconnection

我在通过代理在浏览器上显示网站时遇到问题。我将代理从 Internet 选项手动设置为 127.0.0.1:80。在我连接到网站的代码中，我可以获取 html 代码并在我的 java 控制台上打印它。但是，当我将 html 代码发送到我的浏览器时，我可以看到它连接到网站并显示类似“欢迎来到 Facebook”的标题。但我看不到内容。有时我只看到文字而不是图像或其他东西。显示网页内容时出现问题。我想不通。也许你可以帮助我。另外我认为我无法获取 UTF-8 格式的内容。谢谢你。

```
 try {
                        URL url = new URL("" + req.url);
                        URLConnection urlConnection = url.openConnection();
                        DataInputStream dis = new DataInputStream(urlConnection.getInputStream());
                        String inputLine;

                        while ((inputLine =  dis.readLine()) != null) {
                         //   System.out.println(inputLine);
                            out.writeUTF(inputLine);

                        }
                        dis.close();
                    } catch (MalformedURLException me) {
                        System.out.println("MalformedURLException: " + me);
                    } catch (IOException ioe) {
                        System.out.println("IOException: " + ioe);
                    } 
```

这就是我向浏览器发送线路的方式。

```
private DataOutputStream out = new DataOutputStream(clientSocket.getOutputStream()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:56:46.243

`System.setProperty()`您可以在 URL 连接之前在 java 中设置代理。

对于 http 连接 -

```
System.setProperty("http.proxyHost", " 127.0.0.1");
System.setPropery("http.proxyPort", "80"); 
```

对于 https 连接 -

```
System.setProperty("https.proxyHost", " 127.0.0.1");
System.setPropery("https.proxyPort", "80"); 
```

# php - 验证 HTML5 数字输入，步长为 0.1

> ID：12899340
> 
> 赞同：4
> 
> 时间：2012-10-15T15:52:23.563
> 
> 标签：php, html, floating-point, validation

尝试进行服务器端验证（PHP），其中有 HTM5 数字输入：

```
<input ... min="1" max="20" step="0.1" /> 
```

浏览器将允许您输入诸如“10.5”之类的值，但是如何在 PHP 中进行双重检查呢？对于那些不会进行验证的浏览器（以及您不应该信任来自浏览器的数据的事实）。

```
if (fmod(floatval($value), 0.1) == 0) {
    // valid
} 
```

这不起作用，因为 fmod() 在这种情况下返回“0.099999 ...”，根据：

[为什么 0.5 mod 0.1 在不同编程语言中的结果不同？](https://stackoverflow.com/questions/5618240/)

您可以将 $value 乘以 10，并使用 1（而不是 0.1）的模数检查，因此您可以进行整数数学运算……但是如果步长为 0.01 或 0.003，会发生什么情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:37:38.527

如果数字将存储为引擎盖下的浮点数，它将始终四舍五入到最接近的可表示数字。

您可以接受该值作为浮点数，然后简单地进行如下检查：

```
// get the nearest multiple of $step that is representable in float
$normalized = round($number, $allowed_digits); // for steps like '0.1', '0.01' only
$normalized = round($number / $step) * $step;  // works for any arbitrary step, like 0.2 or 0.3

// verify if they are not too different, where EPSILON is a very small constant
// we cannot directly == as the calculations can introduce minuscule errors
if (abs($normalized - $number) > EPSILON)
   die("Did not validate."); 
```

*或者，您可以简单地将来自客户端的值视为字符串，并验证字符串*中使用的位数（稍后转换为浮点数）。如果您想 100% 确定用户输入的是 0.01，而不是 0.099999999999（四舍五入到与 0.01 相同的值），您应该这样做。

# image - 内存中的图像作为 div 背景图像

> ID：12899343
> 
> 赞同：0
> 
> 时间：2012-10-15T15:52:25.627
> 
> 标签：image, html, background-image, dotnetnuke, binary-data

我在 DotNetNuke 模块中完成所有这些工作。

我有一些从数据库加载为字节数据的图像。最初，我将字节数据转换为 a `Drawing.Image`，调整大小，然后在执行 a 之前将其转换回字节`Response.BinaryWrite`。这一切都发生在 .aspx 中。

同时，在 View.ascx 中，我`div`在代码中创建了一个作为 jquery 的一部分，并`background-image`指向前面提到的 .aspx 的 url。我在 url 字符串中传入了一个参数来获取不同的图像，这一切都很好。

但是，这就是问题所在；我了解到，在 DNN 模块中使用 .aspx 会产生安全问题以及其他问题。因此，我现在正在寻找将图像显示为`div`标签内背景的替代方法。

有没有办法将图像加载到内存中并将 div 的背景设置为该内存图像，并且可以在最新版本的 IE7、IE8、IE9、Firefox 和 Chrome 上工作？我愿意接受其他选择和建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:04:32.893

只要您正在验证用户对资源的访问权限，这样做就没有安全风险。

# security - 谷歌图表数据安全

> ID：12899348
> 
> 赞同：2
> 
> 时间：2012-10-15T15:52:40.353
> 
> 标签：security, google-visualization

我们正在考虑在我们的项目中使用谷歌图表，但我们有高度机密的数据。您可以在不将数据发送给 Google 的情况下使用 Google Charts 吗？

另外，我们也可以将它作为服务器图表工具运行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T15:58:20.150

您可能需要阅读 Google Chart 的安全部分：[https ://google-developers.appspot.com/chart/interactive/docs/security_privacy](https://google-developers.appspot.com/chart/interactive/docs/security_privacy)

具体来说：

> Google 也不会将私有数据存储在图表中：将数据上传到 Google 服务器的图表只是为了为您呈现图表。上传到 Google 服务器的图表数据会保留一小段时间以进行调试，然后被丢弃。

和

> 所有 Google 创作的图表在开发时都考虑到了隐私和安全方面的考虑。所有 Google 图表文档页面都包含一个数据政策部分，该部分描述图表是否从页面发送任何图表数据。

**编辑：**就像上面的报价所说，每个图表的数据策略都包含在该单独图表的文档中。例如：[https ://google-developers.appspot.com/chart/interactive/docs/gallery/areachart#Data_Policy](https://google-developers.appspot.com/chart/interactive/docs/gallery/areachart#Data_Policy)

# java - 应用范围的数字格式？

> ID：12899354
> 
> 赞同：2
> 
> 时间：2012-10-15T15:53:12.847
> 
> 标签：java, swing, user-interface, number-formatting

我有一个包含大量（和种类）摆动组件的应用程序。任何人都知道是否有办法在所有这些组件中设置一致的 NumberFormat（可能通过 UIManager？），或者我是否必须将每个组件扩展为引用静态 NumberFormat 对象的自定义组件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-21T01:42:28.947

```
Try this
code
call=> formatNumber(yourNumber);
code
private String formatNumber(String value) {
        Pattern p = Pattern.compile("\\d+");
  Matcher m = p.matcher(value);
  NumberFormat nf = NumberFormat.getInstance();        
  StringBuffer sb = new StringBuffer();
  while(m.find()) {
    String g = m.group();
    m.appendReplacement(sb, nf.format(Double.parseDouble(g)));            
  }
  return m.appendTail(sb).toString();
    } 
```

# xml - XML prolog 可以包含自定义信息吗？

> ID：12899357
> 
> 赞同：1
> 
> 时间：2012-10-15T15:53:22.930
> 
> 标签：xml

在 XML 序言中的某处添加额外的自定义信息是否合法？例如，在我的例子中，我想添加一个用于创建 XML 的序列化器版本的指示符，以便接收 XML 的客户端可以自动选择正确的相应反序列化器。

我可以将信息添加为根标记的属性，但我认为在序言中添加信息会更简洁，如标准 XML 版本：

```
<?xml version="1.0"?> 
```

就像是：

```
<?serialiser version="1.0"?> 
```

还是纯粹为 W3C 指定的那些东西保留序言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:34:34.903

您可以添加处理指令，例如

`<?serialiser version="1.0"?>`

在 XML 声明之后，在 DOCTYPE 声明之前或之后，或者在文档的末尾。事实上，处理指令几乎可以出现在任何地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:59:59.123

从[规格](http://www.w3.org/TR/2008/REC-xml-20081126/#NT-XMLDecl)：

```
prolog     ::=       XMLDecl? Misc* (doctypedecl Misc*)?
XMLDecl    ::=      '<?xml' VersionInfo EncodingDecl? SDDecl? S? '?>'
Misc       ::=       Comment | PI | S
PI         ::=      '<?' PITarget (S (Char* - (Char* '?>' Char*)))? '?>'
PITarget   ::=       Name - (('X' | 'x') ('M' | 'm') ('L' | 'l')) 
```

因此，`XMLDecl`（可选）部分无法更改，但 的`Misc`部分 `prolog`，特别是`PI`（处理指令）可以是您想要的任何内容，包括`<?serialiser version="1.0"?>`.

# c# - 让 POST 端点在自托管 (WebServiceHost) C# web 服务中工作？

> ID：12899360
> 
> 赞同：1
> 
> 时间：2012-10-15T15:53:31.317
> 
> 标签：c#, wcf, web-services, http-post, webservicehost

所以，我一直在搞乱网络服务一段时间，而且我一直在回归一些基础知识，我似乎永远不会正确。

# 问题一：

在 .NET/C# 中使用 WebServiceHost 时，您可以将方法/端点定义为使用 GET/POST/等。设置一个 GET 方法很简单，它几乎可以直接工作，而且很容易理解它是如何工作的。例如：

```
[OperationContract]
[WebInvoke(Method = "GET", UriTemplate = "/PutMessage/{jsonString}", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
string PutMessage(string jsonString); 
```

如果我调用 http:///MyWebService/PutMessage/{MyJsonString} 我会通过该方法，并且一切都很好（或多或少）。

但是，当我将其定义为**POST**时，这意味着什么？

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/PutMessage/{jsonString}", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
string PutMessage(string jsonString); 
```

**UriTemplate 在这里做什么？**如果我进行 POST，我希望数据不包含在 URI 中，而是包含在帖子的“数据部分”中。但是我是否在数据部分定义变量名？WebServiceHost/.NET如何知道post的“数据部分”中包含的内容是要放入变量jsonString中的？如何从客户端（不是 C#，让我们说 JQuery）发布数据，以便在服务器端正确解释它？

（WebMessageFormat 是如何影响事物的？我到处都读过这方面的内容（MSDN、Stackoverflow 等），但还没有找到一个清晰而好的答案。）

# 问题2：

在我试图理解这一点时，我想我会做一个非常简单的 POST 方法，如下所示：

```
[OperationContract]
[WebInvoke]
string PutJSONRequest(string pc); 
```

然后我*尝试*使用 Fiddler 调用此方法，但这根本不起作用。我只是收到一个 400 错误，说“HTTP/1.1 400 Bad Request”。我在方法代码的第一行有一个断点，方法本身不包含任何内容：

```
public string PutJSONRequest(string pc)
{
    return null;
} 
```

**同样，.NET 怎么知道我使用 Fiddler 发布的内容应该包含在“字符串 pc”中？**它如何将其解释为字符串，以及什么类型的字符串（UT8、ASCII 等）？

这是从 Fiddler 发送的 RAW HTTP 请求：

```
POST http://<myip>:8093/AlfaCustomerApp/PutJSONRequest HTTP/1.1
User-Agent: Fiddler
Host: <myip>:8093
Content-Length: 3
Content-type: application/x-www-form-urlencoded; charset=UTF-8

asd 
```

据我所知，我使用什么类型的 Content-type 并不重要。

响应是标准的，我无法控制自己：

```
HTTP/1.1 400 Bad Request
Content-Length: 1165
Content-Type: text/html
Server: Microsoft-HTTPAPI/2.0
Date: Mon, 15 Oct 2012 15:45:02 GMT

[then HTML code] 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T18:34:08.530

我认为一个简单的代码可以回答你所有的问题

```
Task.Factory.StartNew(()=>StartServer());
Thread.Yield();
StartClient(); 
```

* * *

```
void StartServer()
{
    Uri uri = new Uri("http://localhost:8080/test");
    WebServiceHost host = new WebServiceHost(typeof(WCFTestServer), uri);
    host.Open();
}

void StartClient()
{
    try
    {
        WebClient wc = new WebClient();

        //GET
        string response1 = wc.DownloadString("http://localhost:8080/test/PutMessageGET/abcdef");
        //returns: "fedcba"

        //POST with UriTemplate
        string response2 = wc.UploadString("http://localhost:8080/test/PutMessagePOSTUriTemplate/abcdef",
                                            JsonConvert.SerializeObject(new { str = "12345" }));
        //returns: fedcba NOT 54321

        //POST with BodyStyle=WebMessageBodyStyle.WrappedRequest
        //Request: {"str":"12345"}
        wc.Headers["Content-Type"] = "application/json";
        string response3 = wc.UploadString("http://localhost:8080/test/PutMessagePOSTWrappedRequest",
                                            JsonConvert.SerializeObject(new { str="12345" }));

        //POST with BodyStyle=WebMessageBodyStyle.Bare
        wc.Headers["Content-Type"] = "application/json";
        string response4 = wc.UploadString("http://localhost:8080/test/PutMessagePOSTBare", "12345" );

    }
    catch (WebException wex)
    {
        Console.WriteLine(wex.Message);
    }
} 
```

* * *

```
[ServiceContract]
public class WCFTestServer
{
    [OperationContract]
    [WebInvoke(Method = "GET", UriTemplate = "/PutMessageGET/{str}", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    public string PutMessageGET(string str)
    {
        return String.Join("", str.Reverse());
    }

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "/PutMessagePOSTUriTemplate/{str}", BodyStyle = WebMessageBodyStyle.WrappedRequest, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    public string PutMessagePOSTUriTemplate(string str)
    {
        return String.Join("", str.Reverse());
    }

    [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle=WebMessageBodyStyle.WrappedRequest, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    public string PutMessagePOSTWrappedRequest(string str)
    {
        return String.Join("", str.Reverse());
    }

    [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    public string PutMessagePOSTBare(string str)
    {
        return String.Join("", str.Reverse());
    }
} 
```

* * *

**[PS：你可以在这里](http://json.codeplex.com/)找到 JsonConvert**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T21:10:28.393

我找到了答案。这是如何定义一个方法，该方法可以获取在 HTTP POST 中发送的原始数据：

```
[OperationContract]
[WebInvoke(BodyStyle=WebMessageBodyStyle.Bare)]
Stream PutMessage(Stream data); 
```

实现是这样的：

```
public Stream PutMessage(Stream data)
{
    byte[] buffer = new byte[65535];

    int bytesRead, totalBytes = 0;
    do
    {
        bytesRead = data.Read(buffer, 0, 65535);
        totalBytes += bytesRead;
    }
    while (bytesRead > 0);

    // Then you could interpret it as a String for example:
    string jsonString = Encoding.UTF8.GetString(buffer, 0, totalBytes);
    // yada yada
} 
```

# asp.net - 访问 Windows Server 2008 上 ASP.net 中托管的 WCF Rest 服务时出现 404 错误

> ID：12899371
> 
> 赞同：0
> 
> 时间：2012-10-15T15:53:54.333
> 
> 标签：asp.net, wcf, iis, windows-server-2008

我有一个托管在 ASP.net 应用程序中的 WCF Rest 服务器。它是使用 global.asax 中的简单 RouteTable 设置进行设置的。在我的带有 IIS 7 的开发机器上，它运行良好，但是当我部署到具有类似 IIS 设置的 Windows Server 2008 机器时，它不起作用，当我的 ajax 方法尝试访问该服务时出现 404 错误。我想知道 WCF 是否能够像我在实际生产服务器上的开发机器上一样托管？如果是这样，我必须做什么才能让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:44:33.263

经过仔细的谷歌搜索，结果发现它是 system.webserver 模块部分缺少的属性：runAllManagedModulesForAllRequests="true"

资料来源： [http ://www.west-wind.com/weblog/posts/2011/Mar/27/ASPNET-Routing-not-working-on-IIS-70](http://www.west-wind.com/weblog/posts/2011/Mar/27/ASPNET-Routing-not-working-on-IIS-70)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T14:28:31.977

就我而言，它更简单！

症状是所有 POST 请求都返回 404。

我只是在已经完全安装了 Visual Studio 的新开发机器上启用了 IIS（通过程序和功能 -> 打开和关闭 Windows 功能）。

我必须为 IIS 启用 .NET 4.5（通过`C:\\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i`），然后一切都很好。

这很令人困惑，因为我已经将 IIS 应用程序池设置为在 .NET Framework v4.0.30319 下运行。没有警告我必须单独运行 regiis。

# java - Spring：为什么我们自动装配接口而不是实现的类？

> ID：12899372
> 
> 赞同：171
> 
> 时间：2012-10-15T15:53:59.873
> 
> 标签：java, spring, dependency-injection

**例子**

```
interface IA
{
  public void someFunction();
}

@Resource(name="b")
class B implements IA
{
  public void someFunction()
  {
    //busy code block
  }
  public void someBfunc()
  {
     //doing b things
  }
}

@Resource(name="c")
class C implements IA
{
  public void someFunction()
  {
    //busy code block
  }
  public void someCfunc()
  {
     //doing C things
  }
}

class MyRunner
{

  @Autowire
  @Qualifier("b") 
  IA worker;

  worker.someFunction();
} 
```

谁可以给我解释一下这个。

*   spring 如何知道使用哪种多态类型。
*   我需要`@Qualifier`还是`@Resource`？
*   为什么我们自动装配接口而不是实现的类？

* * *

## 回答 #1

> 赞同：254
> 
> 时间：2012-10-15T15:57:35.983

> spring 如何知道使用哪种多态类型。

只要接口只有一个实现，并且该实现被注释为`@Component`启用了 Spring 的组件扫描，Spring 框架就可以找到 (interface, implementation) 对。如果未启用组件扫描，则必须在 application-config.xml（或等效的 spring 配置文件）中显式定义 bean。

> 我需要@Qualifier 还是@Resource？

一旦您拥有多个实现，那么您需要对它们中的每一个进行限定，并且在自动装配期间，您将需要使用`@Qualifier`注解来注入正确的实现以及`@Autowired`注解。如果您使用@Resource（J2EE 语义），那么您应该使用`name`此注释的属性指定 bean 名称。

> 为什么我们自动装配接口而不是实现的类？

首先，一般来说，对接口进行编码始终是一种好习惯。其次，在 Spring 的情况下，您可以在运行时注入任何实现。一个典型的用例是在测试阶段注入模拟实现。

```
interface IA
{
  public void someFunction();
}

class B implements IA
{
  public void someFunction()
  {
    //busy code block
  }
  public void someBfunc()
  {
     //doing b things
  }
}

class C implements IA
{
  public void someFunction()
  {
    //busy code block
  }
  public void someCfunc()
  {
     //doing C things
  }
}

class MyRunner
{
     @Autowire
     @Qualifier("b") 
     IA worker;

     ....
     worker.someFunction();
} 
```

您的 bean 配置应如下所示：

```
<bean id="b" class="B" />
<bean id="c" class="C" />
<bean id="runner" class="MyRunner" /> 
```

或者，如果您在存在这些组件的包上启用了组件扫描，那么您应该使用以下方式限定每个类`@Component`：

```
interface IA
{
  public void someFunction();
}

@Component(value="b")
class B implements IA
{
  public void someFunction()
  {
    //busy code block
  }
  public void someBfunc()
  {
     //doing b things
  }
}

@Component(value="c")
class C implements IA
{
  public void someFunction()
  {
    //busy code block
  }
  public void someCfunc()
  {
     //doing C things
  }
}

@Component    
class MyRunner
{
     @Autowire
     @Qualifier("b") 
     IA worker;

     ....
     worker.someFunction();
} 
```

然后`worker`in`MyRunner`将被注入一个 type 的实例`B`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-22T11:29:38.893

此外，它可能会导致日志中出现一些警告，例如[Cglib2AopProxy Unable to proxy method](https://stackoverflow.com/questions/12690349/spring-application-has-cglib2aopproxy-warnings)。这里描述了许多其他原因[为什么在服务层和 dao 层中总是有单个实现接口？](https://stackoverflow.com/questions/8922135/why-always-have-single-implementaion-interfaces-in-service-and-dao-layers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-05T22:06:00.423

仅当我在 .XML 配置文件中声明以下 bean 时它才对我有用，因为**@Autowired**是一个**后期处理**

```
<bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"></bean> 
```

# javascript - 应用转换后如何获得结果 pathString？

> ID：12899374
> 
> 赞同：3
> 
> 时间：2012-10-15T15:54:02.950
> 
> 标签：javascript, html, canvas, svg, raphael

考虑我有以下 HTML5 路径：

```
var myPath = paper.path([
  'M', 0, 0
  'L', 100, 100,
  'L', 150, 50,
  'Z']
]);

myPath.transform(['s', 0.5, 0.5, 0, 0]); 
```

转换（缩放）后，我的路径相应地调整了一半，但检查元素是相同的路径字符串，但应用了转换矩阵。有什么方法可以检索结果的 pathString（比如说 M,0,0,L,50,50,L,75,24,z）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-22T09:42:26.377

我认为您需要 transformPath 方法：[http ://raphaeljs.com/reference.html#Raphael.transformPath](http://raphaeljs.com/reference.html#Raphael.transformPath)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:24:18.100

唯一的解决方案是使用 Raphael 1.x，它用于修改路径而不是应用转换。否则，您需要编写自己的例程来将应用矩阵转换转换为路径（真的很难）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T18:00:01.500

[请在此处](http://jsbin.com/oqojan/73)查看我的答案和[此处](https://stackoverflow.com/a/13102801/1691517)的测试平台。

有一个函数 flatten_transformations() 可以烘焙（或应用）变换到路径，以便可以删除变换属性。它可以处理所有路径段（也包括弧）。

* * *

**旧答案**（不是那么完整的实现）：

当然，有一种方法（**[例如 JSBIN 中](http://jsbin.com/atidoh/8)**的示例）可以在应用转换后获取结果路径数据。甚至是非常简单的方法。

假设我们有一个 SVG 路径`pathDOM`，它是根元素`svgDOM`。我们可以使用 native 函数得到路径坐标空间到根元素坐标空间的变换矩阵`getTransformToElement()`。它是这样使用的：

```
var matrix = pathDOM.getTransformToElement(svgDOM); 
```

当我们将此矩阵应用于路径中的所有点时，我们会得到一个新的路径数据，其中所有坐标都相对于根元素。可以这样做：

```
var pt = svgDOM.createSVGPoint();
pt.x = some_x_coordinate_of_path_data;
pt.y = some_y_coordinate_of_path_data;
var new_point = pt.matrixTransform(matrix); // <- matrix object, which we created earlier
var new_x = new_point.x;
var new_y = new_point.y; 
```

就是这样！转换后可以清空变换属性。

当然，路径中的所有坐标都必须转换为绝对坐标，例如。弧段必须转换为线段或三次段，这两者都可以通过 Raphaël 的`path2curve()`函数来实现。

**[我做了一个在JSBIN](http://jsbin.com/atidoh/8)**中使用这种“扁平化转换”功能的完整功能示例。有一个现成的函数 flatten_transformations()，它是唯一需要的（其余的用于 UI 目的）。该示例有一个嵌套在两个 g 元素内的路径。Path 应用了自己的转换，以及两个 g 元素。目的是测试嵌套转换是否也被展平。

该代码适用于最新的主要浏览器，甚至在 IE9 中。我修改转换的代码是 jQuery、Raphael 和本机代码的相当有趣的组合，这可能是在 IE9 中单击按钮时出现一些问题的原因，但幸运的是，这些基本的本机功能`getTransformToElement()`，`createSVGPoint()`并且`matrixTransform()`在 IE 中也可以按预期工作。我想同时测试这些不同的编码基础是如何一起发挥作用的。因为事实上 Raphael 本身还不够完美，无法处理所有可能的编码需求（缺少样式和组以及无法将 svg 元素附加为文本 xml 数据的可能性只是需要注意的）。

# r - 以多种颜色绘制列表列表中的元素

> ID：12899376
> 
> 赞同：4
> 
> 时间：2012-10-15T15:54:10.277
> 
> 标签：r, graphics

我正在尝试从列表列表中绘制元素，特别是根据其所属的类为每个点着色，使用外部列表索引作为 ax 值，将内部列表的每个元素的值作为 ay 值。一个示例列表，包含 2 个子列表：

```
sample.list <- list(list("A"=0,"B"=0.14285, "C"=0.75), list("A"=0.138,"B"=0,"C"=0.1))
[[1]]
[[1]]$A
[1] 0

[[1]]$B
[1] 0.14285

[[1]]$C
[1] 0.75

[[2]]
[[2]]$A
[1] 0.138

[[2]]$B
[1] 0

[[2]]$C
[1] 0.1 
```

我想要的输出将在点处绘制第一个子列表

`(1, 0), (1, 0.14285), (1, 0.5)`

（即子列表元素沿 形成一条垂直线`x=1`）并且第二个子列表将被类似地绘制。此外，每个子列表元素都会有不同的颜色——`A`可能是红色、`B`绿色等。为了澄清，我试图在一个图表上完成所有这些。此外，列表元素的数量可能会因数据集而异。非常感谢有关如何解决此问题的任何指示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:01:38.217

```
library(plyr)
library(ggplot2)
library(reshape2)
df <- melt(ldply(sample.list, data.frame))
df2 <- ddply(df, .(variable), function(x) { x$index <- 1:nrow(x); x})
ggplot(df2, aes(index, value, color = variable)) + 
geom_point(size=3) + scale_x_continuous(breaks = seq(1:max(df2$index))) 
```

![在此处输入图像描述](../Images/dbbd4bad29e78cda548f988bcca4b3ad.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T23:47:31.560

这是那些非ggplot-ers的基本解决方案：

```
plot(1:length(sample.list),ylim=c(0,max(unlist(sample.list))),xaxt="n",ann=FALSE)
axis(1,at=1:length(sample.list),labels=1:length(sample.list))

invisible(
  sapply(
      1:length(sample.list),
      function(x) {
        tmp2plot <- sample.list[[x]]
        points(rep(x,length(tmp2plot)),unlist(tmp2plot),col=1:length(tmp2plot),pch=19)
      }
  )
)

title(xlab="Index",ylab="Value") 
```

结果：

![在此处输入图像描述](../Images/8e841abbb09bc54dc8eb47694c28aac5.png)

# java - 遍历 ArrayList 并返回满足 instanceof 检查的对象的 ArrayList

> ID：12899382
> 
> 赞同：1
> 
> 时间：2012-10-15T15:54:30.187
> 
> 标签：java, interface, arraylist, superclass, instanceof

我遇到了类类型的问题。我有一个超类“Edible”和一个界面“Colorful”。并非所有可食用物品都是彩色的，因此仅在某些可食用物品上实现了彩色。我正在尝试获取可食用物品的 ArrayList，循环遍历它，然后返回一个仅包含彩色物品的新 ArrayList。我现在收到的错误是

“ArrayList 类型中的方法 add(Colorful) 不适用于参数 (Edible)”

我怎样才能绕过这个限制？

```
private ArrayList<Edible> elist;
private ArrayList<Colorful> clist;

public List<Colorful> getColorfulItems(){
    for(Edible x : elist)
        if(x instanceof Colorful){
            clist.add(x);
        }
    return clist;

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T15:55:55.530

您需要将您的类型转换`Edible`为`Colorful`：-

```
if(x instanceof Colorful){
        clist.add((Colorful)x);
} 
```

或者，如果您想避免类型大小写，请使用以下方式声明您的 ArrayList `WildCard`：-

```
private ArrayList<? extends Colorful> clist; 
```

通过`ArrayList`这样声明，您可以添加任何没有`subtype`的`Colorful``typecasting`

此外，您不需要每次都返回修改后的列表，因为您的列表被声明为`instance variable`. 因此更改将反映在列表中，而不返回列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:56:20.387

更改您的列表以接受任何类型的对象`Colorful`。[阅读泛型、继承和子类型](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html)以了解更多信息。

例子：

```
private ArrayList<? extends Colorful> clist; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:01:15.767

我会拒绝使用字段作为返回值。在这种情况下，每次调用可能不受欢迎的方法时，列表都会增长。

您可以使该方法更通用

```
@SuppressWarnings("unchecked")
public <T> List<T> selectItems(Class<T> clazz) {
    List<T> ret = new ArrayList<T>();
    for (Edible x : elist)
        if (clazz.isInstance(x))
            ret.add((T) x);
    return ret;
} 
```

可用于选择不同的类型。

```
List<Serializable> serializableList = x.selectItems(Serializable.class);
List<Colorful> colorfulList = x.selectItems(Colorful.class); 
```

# sql - 具有日期范围的 SQL JOIN 表

> ID：12899386
> 
> 赞同：6
> 
> 时间：2012-10-15T15:54:44.623
> 
> 标签：sql, postgresql, date

比如说，我有一个包含**C**列和**N**行的表。我想生成一个选择语句，表示该表的“连接”，数据范围包括**M**天。生成的结果集应该有**C+1**列（最后一个是日期）和**NXM**行。

澄清事情的简单例子：给定下表**A**：

```
select * from A;
avalue  |
--------+
"a"     | 
```

日期范围为 2012 年 10 月 10 日至 12 日，我想要以下结果集：

```
avalue  |  date
--------+-------
"a"     | 2012-10-10
"a"     | 2012-10-11
"a"     | 2012-10-12 
```

（这是我最终计算任何一天的库存水平所需的垫脚石，给定起始值和增量）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T16:49:11.903

**Postgres**的方法很简单：[`CROSS JOIN`](https://www.postgresql.org/docs/current/sql-select.html#SQL-FROM)函数[**`generate_series()`**](https://www.postgresql.org/docs/current/functions-srf.html#FUNCTIONS-SRF-SERIES)：

```
SELECT t.*, g.day::date
FROM   tbl t
CROSS  JOIN generate_series(timestamp '2012-10-10'
                          , timestamp '2012-10-12'
                          , interval  '1 day') AS g(day); 
```

准确地产生所要求的输出。

`generate_series()`是一个产生派生表的集合返回函数（又名“表函数”）。有几个重载的变体，这就是我选择`timestamp`输入的原因：

*   [在 PostgreSQL 中生成两个日期之间的时间序列](https://stackoverflow.com/questions/14113469/generating-time-series-between-two-dates-in-postgresql/46499873#46499873)

对于**任意日期**，`generate_series()`用[**`VALUES`**](https://www.postgresql.org/docs/current/sql-values.html)表达式替换。无需持久化表：

```
SELECT *
FROM   tbl t
CROSS  JOIN (
   VALUES
     (date '2012-08-13')  -- explicit type in 1st row
   , ('2012-09-05')
   , ('2012-10-10')
   ) g(day); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T16:00:13.890

如果日期表中的日期多于您感兴趣的日期，则执行

```
select a.avalue, b.date from a, b where b.date between '2012-10-10' and '2012-10-12' 
```

否则，如果日期表仅包含您感兴趣的日期，笛卡尔连接将完成此操作：

```
select * from a,b; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T16:09:08.667

对于 MySQL

架构/数据：

```
CREATE TABLE someTable
(
    someCol varchar(8) not null
);

INSERT INTO someTable VALUES ('a');

CREATE TABLE calendar
(
    calDate datetime not null,
    isBus bit
);

ALTER TABLE calendar
ADD CONSTRAINT PK_calendar
PRIMARY KEY (calDate);

INSERT INTO calendar VALUES ('2012-10-10', 1);
INSERT INTO calendar VALUES ('2012-10-11', 1);
INSERT INTO calendar VALUES ('2012-10-12', 1); 
```

询问：

```
select s.someCol, c.calDate from someTable s, calendar c; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T16:07:38.037

```
declare
    @Date1 datetime = '20121010',
    @Date2 datetime = '20121012';

with Dates
as
(
    select @Date1 as [Date]
    union all
    select dateadd(dd, 1, D.[Date]) as [Date]
    from Dates as D
    where D.[Date] <= DATEADD(dd, -1, @Date2)
)
select 
    A.value, D.[Date]
from Dates as D
    cross join A 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T16:16:49.663

对于您要尝试做的事情，您确实有两种选择。

1.  如果您的 RDBMS 支持它（我知道 SQL Server 支持，但我不知道其他），您可以创建一个[表值函数](http://www.postgresql.org/docs/9.0/static/sql-createfunction.html)，它接受一个日期范围并返回该范围内所有离散日期的结果集。您将在表和函数之间进行笛卡尔连接。

2.  您可以创建日期值的静态表，然后在两个表之间进行笛卡尔连接。

第二个选项的效果会更好，尤其是在处理较大的日期范围时，但是，该解决方案将无法处理任意日期范围。但是，您应该知道您的最短日期，并且随着时间的推移，您总是可以在表格中添加更多日期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T16:07:43.677

我对你的 M 表不是很清楚。假设您有这样一个带日期的表（M），则交叉连接将带来结果。

```
SELECT C.*, M.date FROM C CROSS JOIN M 
```

# ios - NSPredicate 在包含数字和字母的字符串中包含搜索

> ID：12899388
> 
> 赞同：4
> 
> 时间：2012-10-15T15:54:53.497
> 
> 标签：ios, core-data, nsstring, nspredicate

我必须`NSPredicate`用于搜索一些核心数据对象。但是`name`自定义对象的键可以同时包含数字和字母。字符串可能如下所示：`John 1234 Lennon`或`Ringo Starr`. 我通常会使用谓词`NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Any name CONTAINS[cd] %@",searchString];`

但是，如果我搜索`John Lennon`谓词不返回任何内容，因为它无法比较它是否包含字符`John Lennon`，因为缺少`1234`. 任何提示我可以使用什么样的谓词？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T16:09:43.683

您可以标记您的查询，也许就像

```
NSArray *tokens = [querystring componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]; 
```

然后构造一个复合谓词。

```
NSMutableArray *predarray = [NSMutableArray array];

for(NSString *token in tokens)
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Any name CONTAINS[cd] %@",token];
    [predarray addObject:predicate];
}

NSPredicate *final = [NSCompoundPredicate andPredicateWithSubpredicates:predarray]; 
```

并将其提供给您的查询

在现实生活中，我会对每个令牌进行一些验证，以检查它是否会做出有效的谓词并且不会崩溃或产生安全风险。例如剥离特殊字符，如“* []”

**编辑**：更正谓词类型以处理问题情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:48:06.010

您可以将搜索字符串拆分为字符串数组，然后切换谓词以查找名称中的任何字符串：

```
NSArray *strings = [searchString componentsSeparatedByString:@" "];

NSPredicate *pred = [NSPredicate predicateWithFormat:@"ANY %@ IN name",strings]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:25:59.480

尝试使用 LIKE 而不是 contains，然后您可以使用通配符，例如 John*Lennon 应该匹配以 John 开头并以 Lennon 结尾且其间包含任意数量的其他字符的字符串。您可以使用 ？相反，如果您想更好地控制匹配的内容，每个问号只会匹配一个字符。

# visual-studio-2010 - 将 VC++ 6 升级到 Visual Studio 2010 - DoModal 失败

> ID：12899392
> 
> 赞同：2
> 
> 时间：2012-10-15T15:55:03.070
> 
> 标签：visual-studio-2010, visual-c++

我升级了一个 VC++ 6 项目并且只有一个对话框的工作。所有其他人最终在 occccont.cpp 第 925 行出现断言错误 - ASSERT(IsWindow(pTemp->m_hWnd));

这不会发生在它试图为此对话框创建的所有控件中，只有 56 个控件中的 3 个。

我不知道是什么原因造成的。我在 Win 7 64 位上运行，但该应用程序是为 32 位构建的。

我尝试在 XP SP2 兼容模式下运行 .exe，但没有成功。

我是否需要为此更改设置？

另外，我可以查看表单设计器吗？我似乎找不到任何选项。我想如果我能提出设计师，它可能会提供一些更好的见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:26:19.893

看起来您正在使用某种 AciveX 控件并且创建失败。确保控件已正确注册。另一种可能性是控制仍然以某种方式依赖于系统中不存在的旧 MFC 库。

# nsmutablearray - 按降序排列 NSMutable 数组

> ID：12899394
> 
> 赞同：3
> 
> 时间：2012-10-15T15:55:17.843
> 
> 标签：nsmutablearray

我一直在阅读一些关于订购 NSMutable 数组的帖子，但无法使其正常工作，基本上我在 tableview 中有许多条目，可以添加无限量但我需要通过包含的 NSMutable 数组订购它们数值，这将远高于 10。我非常感谢任何人可以给我的任何帮助，我一直在使用 compare 参数，但我似乎无法让它反转顺序，其次我阅读了上面的数字10 会以一种奇怪的方式开始订购。我很快就会发布你的代码，但任何让我思考的东西都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T19:05:11.860

答案取决于数组中的对象是*数字*还是*字符串*。还有各种对数组进行排序的方法（`sortUsingDescriptors`, `sortUsingComparator`, ...）。

如果您有一个*numbers*数组，则可以按降序对它们进行排序，例如：

```
NSMutableArray *a = [NSMutableArray arrayWithObjects:@1, @55, @9, @17, nil];
[a sortUsingComparator:^NSComparisonResult(NSNumber *obj1, NSNumber *obj2) {
    return -[obj1 compare:obj2];
}];
// Result: 55, 17, 9, 1. 
```

请注意比较器块中的减号，它具有将顺序从增加反转到减少的效果。

如果您有一个*字符串*数组，并且您以相同的方式进行操作，那么您将得到您所说的“10 以上的数字将以一种奇怪的方式开始排序”：

```
NSMutableArray *a = [NSMutableArray arrayWithObjects:@"1", @"55", @"9", @"17", nil];
[a sortUsingComparator:^NSComparisonResult(NSString *obj1, NSString *obj2) {
    return -[obj1 compare:obj2];
}];
// Result: 9, 55, 17, 1. 
```

对象被排序为字符串，而不是数字。

解决方案是使用以下`NSNumericSearch`选项：

```
NSMutableArray *a = [NSMutableArray arrayWithObjects:@"1", @"55", @"9", @"17", nil];
[a sortUsingComparator:^NSComparisonResult(NSString *obj1, NSString *obj2) {
    return -[obj1 compare:obj2 options:NSNumericSearch];
}];
// Result: 55, 17, 9, 1. 
```

# django - 模型形式。为什么我的表格没有填写模型中的数据？

> ID：12899407
> 
> 赞同：2
> 
> 时间：2012-10-15T15:56:07.033
> 
> 标签：django

为什么我的表格没有填写模型中的数据？

这是我的模型.py

```
class People(models.Model):
    user = models.OneToOneField(User)
    name = models.CharField(max_length=100)
    address = models.CharField(max_length=255) 
```

这是我的forms.py

```
from django.forms import ModelForm 

class EditForm(ModelForm):
    class Meta:
        model = People
        exclude=('user',) 
```

视图.py

```
def edit_data(request):
    user = request.user
    people = People.objects.get(user=user)
    form = EditForm(request.POST, instance = people)
    if request.method == 'POST':
        if form.is_valid():
            form.save()
        else:
            print 'Error'
    else:
        form = EditForm()

    return render_to_response('profile.html',{'form':form}, context_instance=RequestContext(request)) 
```

profile.html

```
<form action="/profile/" method="post">{% csrf_token %}
{{ form.as_p }}
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:57:07.387

问题是你`form`在你的`else`子句中重新定义（到你的一个新实例`EditForm`，它没有`instance`变量集）。删除`else`（和它下面的线），你应该很高兴。

# wordpress - 离开网站并返回时会话被破坏

> ID：12899414
> 
> 赞同：1
> 
> 时间：2012-10-15T15:56:32.947
> 
> 标签：wordpress, session, cakephp

我有一个带有自己的登录系统的 CakePHP 网站。在同一台服务器（但不同的文件夹）中，我有一个 Wordpress 博客。已经登录 CakePHP 网站的用户可以单击一个链接，将他带到 WP 博客并同时将他登录到博客。这一切都完美无缺。

当回到原来的 CakePHP 网站时，问题就来了。如果我在博客中放置一个指向该网站的链接并且用户单击它，他会被带到该网站，**但他的会话丢失了**，这意味着他必须重新登录。

有什么办法可以防止这种情况发生吗？即使用户离开网站，会话不应该仍然有效吗？不是说过期，我把它设置为30分钟。

即使用户没有通过网站中的链接访问博客，也会发生这种情况。如果我登录网站，然后打开一个新标签并进入博客（甚至没有登录），然后单击该网站的链接，则该网站中的会话丢失。好吧，实际上有一个新会话（我一直在打印**会话 id**并且它发生了变化）。

关于如何保持会话开放的任何想法都会很有用。

另外，以防万一，这是我用来将用户从网站登录到博客的脚本：

```
$sid = $_GET['sid'];
session_id($sid);
session_start();

if (isset($_SESSION['Auth']['User']['username'])) {

    require('../blog/wp-blog-header.php'); //includes wordpress functions

    $username = $_SESSION['Auth']['User']['username'];

    $user = get_userdatabylogin($username);
    wp_set_current_user($user->ID);
    wp_set_auth_cookie( $user->ID );
}

header("Location: http://myblog.com/"); //Redirect user to the blog 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:09:27.733

检查您的安全级别。在某些情况下，它会检查“推荐人”网站。如果您来自 WP 博客，那么它可能适合您。这就是我假设正在发生的事情，因为它正在生成一个新的会话 ID。

# c# - C# 中的 XPATH 问题

> ID：12899415
> 
> 赞同：3
> 
> 时间：2012-10-15T15:56:34.130
> 
> 标签：c#, xpath

好的，所以我整天都在为 XPATH 和 C# 中的这个问题而烦恼。

我有以下 XML 文档：

```
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0"     xmlns:c="http://base.google.com/cns/1.0">
  <item id="362">
    <title>Family Holiday</title>
    <description>a long, wordy description goes here</description>
    <g:id xmlns:g="g">FPS</g:id>
    <g:latitude xmlns:g="g">42.502260</g:latitude>
    <g:longitude xmlns:g="g">1.532850</g:longitude>
  </item>
 </entry> 
```

然后我执行以下操作：

```
XmlDocument _xmlDocument = new XmlDocument();
_xmlDocument.Load(xmlfile);

XmlNamespaceManager _nameSpaceManager = new XmlNamespaceManager(_xmlDocument.NameTable);
_nameSpaceManager.AddNamespace("RN", "http://www.w3.org/2005/Atom");
_nameSpaceManager.AddNamespace("g", "http://base.google.com/ns/1.0");
_nameSpaceManager.AddNamespace("c", "http://base.google.com/cns/1.0");

XPathNavigator navigator = _xmlDocument.CreateNavigator(); 
```

我的问题在于：

```
XmlNode nde = _xmlDocument.SelectSingleNode("/RN:entry/RN:item/g:id", _nameSpaceManager); 
```

返回 null - 不是 Id 节点。然而，

```
XmlNode nde = _xmlDocument.SelectSingleNode("/RN:entry/RN:item/RN:title", _nameSpaceManager); 
```

确实返回标题节点。

任何关于我做错了什么的想法都将不胜感激！

干杯西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:19:01.407

我希望`"/RN:entry/RN:item/g:id"`XPath 表达式返回 null - 在您的 XPath 中，`g:`命名空间别名是指命名空间“http://base.google.com/ns/1.0”，但是在您的 XML 文档中，`g:`命名空间别名已被修改为引用*id*、*latitude*和*longitude*元素上的命名空间“g” 。

删除`xmlns:g="g"`每个元素上的命名空间别名定义，它应该按预期工作 - 命名空间别名定义是从父 XML 元素继承的，因此不需要这些别名（以及不正确）

```
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:g="http://base.google.com/ns/1.0">
  <item id="362">
    <title>Family Holiday</title>
    <description>a long, wordy description goes here</description>
    <g:id>FPS</g:id>
    <g:latitude>42.502260</g:latitude>
    <g:longitude>1.532850</g:longitude>
  </item>
</entry> 
```

如果您想修改代码以使用未修改的 XML，则改为更改`g:`代码中命名空间声明的定义以匹配 XML 中的定义

```
_nameSpaceManager.AddNamespace("g", "g"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T16:20:52.853

您的本地命名空间声明覆盖了根命名空间定义；

```
<g:id xmlns:g="g">FPS</g:id> 
```

实际上是说这里的 g:id 属性来自命名空间 'g' 与 g 定义为来自文档元素中的命名空间不同。

例如，如果我将您的 XML 更改为：

```
 string xml = @"<entry xmlns=""http://www.w3.org/2005/Atom"" xmlns:g=""http://base.google.com/ns/1.0""     xmlns:c=""http://base.google.com/cns/1.0"">
                  <item id=""362"">
                    <title>Family Holiday</title>
                    <description>a long, wordy description goes here</description>
                    <g:id xmlns:g=""http://base.google.com/ns/1.0"">FPS</g:id>
                    <g:latitude xmlns:g=""http://base.google.com/ns/1.0"">42.502260</g:latitude>
                    <g:longitude xmlns:g=""http://base.google.com/ns/1.0"">1.532850</g:longitude>
                  </item>
                 </entry>"; 
```

或者简单地说：

```
string xml = @"<entry xmlns=""http://www.w3.org/2005/Atom"" xmlns:g=""http://base.google.com/ns/1.0""     xmlns:c=""http://base.google.com/cns/1.0"">
                      <item id=""362"">
                        <title>Family Holiday</title>
                        <description>a long, wordy description goes here</description>
                        <g:id>FPS</g:id>
                        <g:latitude>42.502260</g:latitude>
                        <g:longitude>1.532850</g:longitude>
                      </item>
                     </entry>"; 
```

您的 XPath 表达式现在作为本地命名空间`g`与文档元素命名空间声明匹配`g`

如果你被 XML 卡住了，那么你唯一能做的就是：

```
XmlNamespaceManager _nameSpaceManager = new XmlNamespaceManager(_xmlDocument.NameTable);
_nameSpaceManager.AddNamespace("RN", "http://www.w3.org/2005/Atom");
_nameSpaceManager.AddNamespace("g", "g");
_nameSpaceManager.AddNamespace("c", "http://base.google.com/cns/1.0"); 
```

您的 XPath 现在可以工作了。

使用 XmlDocument、.Net Framework 版本 4 进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:44:27.487

只需更换您的线路：

```
_nameSpaceManager.AddNamespace("g", "http://base.google.com/ns/1.0"); 
```

和

```
_nameSpaceManager.AddNamespace("g", "g"); 
```

# objective-c - 详细表视图（线程 1：EXC_BAD_ACCESS）

> ID：12899424
> 
> 赞同：1
> 
> 时间：2012-10-15T15:56:58.670
> 
> 标签：objective-c, uitableview

嘿嘿，

我有一个简单的表视图，其中包含来自 XML 文件的数据。现在我想显示更多信息。因此我使用方法“didSelectRowAtIndexPath”。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSLog(@"test");
} 
```

但是如果我选择了 tableView 的一个项目，我得到了一个错误：

踏板 1：EXC_BAD_ACCESS（代码=2，地址=0x15）

在

```
 return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

也没有显示 NSLog 消息。

希望有人可以提供帮助。:)

# android - 如何设置paint.setColor(R.color.white)

> ID：12899428
> 
> 赞同：27
> 
> 时间：2012-10-15T15:57:19.323
> 
> 标签：android, canvas, paint

我有一个使用 Paint 和 Canvas 绘制对象的自定义视图。我的问题是如何设置：

```
int color = R.color.white;
paint.setColor(color); 
```

来自我的 /res/valuse/color.xml ，其中包括类似的资源

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="white">#FFFFFF</color>
    <color name="black">#000000</color>
    ...
</resources> 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-15T15:59:18.657

```
int color = ContextCompat.getColor(context, R.color.white);
paint.setColor(color); 
```

该`setColor()`方法将颜色编号作为`int`值，但不是资源 id，它也是一个`int`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-03-21T21:55:26.337

首先从 xml 文件中获取您的颜色

```
int color = context.getResources().getColor(R.color.colorPrimary); // old 
```

现在已弃用，请改用它

```
int color = ContextCompat.getColor(context, R.color.colorPrimary); // new 
```

设置颜色

```
paint.setColor(color); 
```

xml文件预览：res/values/color.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="colorPrimary">#3F51B5</color>
    <color name="colorPrimaryDark">#303F9F</color>
    <color name="colorAccent">#FF4081</color>
</resources> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-23T09:19:09.120

尝试使用`color.white`：

```
paint.setColor(Color.white) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-09T12:21:09.327

```
paint.setColor(Color.parseColor("#FFFFFF")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-15T11:45:16.003

设置任何颜色

```
paint.setColor( Color.rgb(R, G, B) ) 
```

# python - 测试 Google App Engine 网站是否有损坏的链接和其他请求错误

> ID：12899431
> 
> 赞同：1
> 
> 时间：2012-10-15T15:57:35.063
> 
> 标签：python, google-app-engine, testing

我正在与前端设计师一起开发一个网络应用程序，有时我们会犯一个错误，破坏我们的 href 链接，要么是拼写错误，要么是对模板产生不利影响的小改动，或者我犯了愚蠢的拼写错误，破坏了请求处理程序（我是还不是软件开发专家）

[我的问题接近尾声，但情况是这样的..]

但我想构建一个工具，我可以提供我的 url 处理程序和站点根目录，并让它扫描每个页面的 href 链接并测试它们。这样，当我们的网站在页面中变得更大时，我们不会惊讶地发现断开的链接和功能。

我刚在想..

*   浏览每一页
*   查找 href 链接（和 css/js 文件）或任何可以遵循的 url
*   请求 url/文件并捕获错误
*   打印与给定页面中的链接相关的每个错误

然后我会检查我的代码和模板，找出链接断开的原因......

我已经到了我的代码在我脑海中工作的地步，但是当它启动并运行时我注意到错误，但我也不想点击所有链接......

我的问题是，是否有专门用于此类测试的工具，或者每个人都只是构建自己的工具？（特别是GAE）或者没有坏链接的最佳实践是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:03:19.283

您需要编写集成测试用例。每个 url 编写一个集成测试。如果您有 30 个 url，而不是编写 30 个测试函数，并且在测试函数中点击 url 并检查 1\. 响应类型 200 和 2\. 数据类型 + 预期值，即是否预期返回模板或某个 json 值。

您还需要检查与给定单个 url 关联的所有可能的参数值。如果您的应用程序是基于 django 的应用程序，那么这可能有助于您编写测试用例：[https ://docs.djangoproject.com/en/dev/topics/testing/#testing-tools](https://docs.djangoproject.com/en/dev/topics/testing/#testing-tools)

我希望这有帮助！

# vb6 - 如何在外部 COM 调用期间抑制“此操作无法完成”消息？

> ID：12899433
> 
> 赞同：3
> 
> 时间：2012-10-15T15:57:36.437
> 
> 标签：vb6, com-interop

# 背景

我正在使用 Visual Basic 开发一个调用进程外 COM 服务器（用 C# 编写的包装 .NET 组件）的应用程序。该组件执行冗长的计算（超过 10 秒）并在计算进行时尝试与 GUI（VB6 端的一部分）进行交互，导致程序发出类似于以下内容的消息（并使用确切的措辞） ：

[http://www.symantec.com/business/support/library/BUSINESS/ATLAS/images_v1/324876/dlo.jpg](http://www.symantec.com/business/support/library/BUSINESS/ATLAS/images_v1/324876/dlo.jpg)

抱歉，图片质量很差，我无法在工作的任何地方上传屏幕截图。

# 问题

有没有办法以编程方式或通过项目或构建配置来抑制此消息？

# 附录 1

尝试设置 App.OleServerBusyTimeout 会产生运行时错误 369（操作在 ActiveX DLL 中无效）。这是 ActiveX dll 的一部分，我无法改变它。除了在主应用程序中设置该属性或将调用减少到小于现有超时之外，是否没有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:38:27.533

如果您想阻止任何消息出现（例如，如果您已将光标更改为沙漏），那么您想使用[`App.OleRequestPendingTimeout`](http://msdn.microsoft.com/en-us/library/aa245850%28v=vs.60%29)而不是[`App.OleServerBusyTimeout`](http://msdn.microsoft.com/en-us/library/aa245854%28v=vs.60%29.aspx).

或者，您还可以使用设置备用消息[`App.OLERequestPendingMsgText`](http://msdn.microsoft.com/en-us/library/aa245848%28v=vs.60%29.aspx)。这样做只会通过一个 OK 按钮向用户显示您的自定义消息 - 这不会令人困惑。

这是一些示例代码：

```
' set up special message if user interacts with application while waiting on the
' long-running operation to complete
' see http://support.microsoft.com/kb/138066

Dim originalOLEPendingMessage As String
originalOLEPendingMessage = App.OleRequestPendingMsgText
App.OleRequestPendingMsgText = "Please be patient while your request is processed."

Dim originalOLEPendingTimeout as Long
originalOLEPendingTimeout = App.OleRequestPendingTimeout
App.OleRequestPendingTimeout = 10000

On Error GoTo Finally
' Call long-running process here

Finally:
' If an actual error occurred we want to capture all the properties of Err
' so we can re-raise it after we clean up
Dim errNumber As Long
Dim ERRSOURCE As String
Dim errDesc As String
Dim errHelpFile As String
Dim errHelpContext As Long

errNumber = Err.Number
ERRSOURCE = Err.Source
errDesc = Err.Description
errHelpFile = Err.HelpFile
errHelpContext = Err.HelpContext

App.OleRequestPendingMsgText = originalOLEPendingMessage
App.OleRequestPendingTimeout = originalOLEPendingTimeout 

If errNumber <> 0 Then
    Err.Raise errNumber, ERRSOURCE, errDesc, errHelpFile, errHelpContext
End If 
```

有关详细讨论，请参阅 Microsoft 知识库文章[如何处理 OLE 自动化服务器超时和同步](http://support.microsoft.com/kb/138066)。

# android - 在配置更改期间强制操作栏重新布局

> ID：12899435
> 
> 赞同：2
> 
> 时间：2012-10-15T15:57:46.047
> 
> 标签：android, layout, android-actionbar

我有在配置更改期间未重新创建的活动。在我的操作栏中，我有许多“ifroom”按钮。当活动以纵向模式创建时，其中一些会显示在操作栏中。在`onConfigurationChanged()`I call`getActivity().invalidateOptionsMenu()`中，但在重新创建后，图标集与之前的屏幕方向相同。那么在这种情况下如何强制操作栏重新布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T13:22:44.883

On your res folder create inside values folder a new xml called bools like this:

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <bool name="nomal_layout">true</bool>
   <bool name="nomal_layout_land">false</bool>
   <bool name="large_layout">false</bool>
   <bool name="large_layout_land">false</bool>
</resources> 
```

the example above is for a normal portrait layout (true), create more values folders with bools.xml according with the layouts you want to customize, like values-large-land (or use the new buckets [http://android-developers.blogspot.com.br/2011/07/new-tools-for-managing-screen-sizes.html](http://android-developers.blogspot.com.br/2011/07/new-tools-for-managing-screen-sizes.html)). Then on the onCreateOptionsMenu you check the layout and force (SHOW_AS_ACTION_ALWAYS) the itens you want to show:

```
// Inflate the menu; this adds items to the action bar if it is present.
getMenuInflater().inflate(R.menu.????, menu);//the menu to inflate
MenuItem myMenuItem = menu.findItem(R.id.????);//the item you want to show in the specified layout
if (getResources().getBoolean(R.bool.large_layout_land)){
    myMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS)
}else{

} 
```

This only works on Android >=11

# google-maps - 如何处理实现 google.maps.OverlayView 的 Backbone 事件？

> ID：12899445
> 
> 赞同：0
> 
> 时间：2012-10-15T15:58:27.603
> 
> 标签：google-maps, google-maps-api-3, backbone.js, backbone-events

我的 Backbone 视图实现了一个`google.maps.OverlayView()`.

此视图包含一些 div 的内容，我需要处理容器 div 上的鼠标悬停/移出和单击两个包含 div 的事件。

我能够获得所需事件的唯一方法是`google.maps.event.addDomListener`在我的视图中使用。像这样的东西（复制和粘贴代码）：

```
var MarkerView = MasterView.extend({
    events:{
        //These events will never be fired
        'click .icon-context':function () {},
        'mouseout':function (event) {}
    },
    render:function(){
      //this renders the google.maps.OverlayView by implementing onAdd, draw, onRemove 
      var that = this;

      this.overlay.onAdd = function(){
        //Code for adding the OverLayView omitted here

        that.listeners_ = [
          google.maps.event.addDomListener(that.overlay.el, 'mouseout', function () {
            //This event should not be handled here
          }),
          google.maps.event.addDomListener($(that.overlay.el).find('.icon-context').first()[0], 'click', function () {
            //This event should not be handled here
          }),            
        ];

      };

    }
}); 
```

视图逻辑的核心部分应该是可重用的，因为我想在地图和显示/处理几乎相同内容的列表中使用它。通过将我的视图绑定到 Google Maps 事件侦听器，我将不得不为事件处理复制大量代码。感觉这样做并不完全正确。

如果视图托管在`google.maps.OverlayView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:52:30.033

***创建叠加层并将其添加到 HTML 后，***您必须`this.setElement($(that.overlay.el))`在视图上使用，以便更新 EL，以便您可以使用事件哈希。

 *如果您实例化一个新的覆盖，您必须再次执行以使 EL 指向正确的对象。

不要忘记将它包装在 Jquery obj 中，这在尝试将事件处理程序添加到 infoBoxes 时帮助了我很多*

# assembly - 尝试在 DCPU-16 中做一个简单的“hello world”程序

> ID：12899446
> 
> 赞同：1
> 
> 时间：2012-10-15T15:58:29.650
> 
> 标签：assembly, dcpu-16

我正在研究 DCPU-16 的 asm，我从一个简单的 hello world 程序开始。这里是：

```
hwn i
set j, 0

jsr get_display

:init_display
set a, 0
set b, 0x8000
hwi [display_adress]
set i, 0

:write_string
 set a, [message + j]
 ife a, 0
    set pc, end
 jsr write_char
 set pc, write_string

:write_char
 bor a, 0xA000
 set [0x8000 + j], a
 add j, 1
 set pc, pop

:get_display
hwq [display_adress]
add [display_adress], 1
ifn a, 0xf615
    set pc, get_display
set pc, pop

:get_keyboard
hwq [keyboard_adress]
add [keyboard_adress], 1
ifn a, 0x7406
    set pc, get_keyboard 
set pc, pop

:get_clock
hwq [clock_adress]
add [clock_adress], 1
ifn a, 0xb402
    set pc, get_clock
set pc, pop

:get_sped
hwq [sped_adress]
add [sped_adress], 1
ifn a, 0xbf3c
    set pc, get_sped
set pc, pop

:display_adress dat 0x0000
:keyboard_adress dat 0x0000
:clock_adress dat 0x0000
:sped_adress dat 0x0000

:message dat "Hello World!", 0

:end 
```

程序找到显示器，注册视频 RAM 并将字符复制到视频 RAM 内存，但屏幕没有任何反应！有人可以帮助我吗？

# ios - 与 UIButton 一起动态发送字符串？

> ID：12899448
> 
> 赞同：0
> 
> 时间：2012-10-15T15:58:38.260
> 
> 标签：ios, xcode, uibutton

我基本上想从我所在的方法发送一个已知字符串：

```
 NSString *websiteString;
    if(a==0)
          websiteString = [[[NSString alloc] initWithString:@"www.google.com"] autorelease];

    else
          websiteString = [[[NSString alloc] initWithString:@"www.yahoo.com"] autorelease];

    UIButton *aButton = [UIButton buttonWithType:UIButtonTypeCustom];
    aButton.frame = rct;

    // I get thrown in this next line: how do I initialize the Value for key?
    [aButton setValue:websiteString forKey:@"website"];
    [aButton addTarget:self action:@selector(clickedInsidePage:) forControlEvents:UIControlEventTouchUpInside]; 
```

到回调函数，我可以在 UIWebview 中加载发送的字符串...

-（无效）clickedInsidePage：（id）发件人{

```
 NSString *websiteString = [[[NSString alloc] initWithString:[((UIControl *) sender) valueForKey:@"website"]] autorelease];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:[NSURL URLWithString:websiteString]];
    NSLog(@"visiting: %@",websiteString);
    .
    .
    .

    } 
```

但是我收到一个错误，因为键/值实际上没有设置或初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:09:45.390

您不能使用 setValue 为不存在的键设置值。UIButton 没有名为“网站”的属性，这就是您的代码崩溃的原因。@Javy 提供了一种可能的、很好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:06:41.513

您可以有一个字符串数组，然后为按钮标签属性提供索引。然后您可以提取标签以获取字符串：

```
NSArray * someArray = // website strings added here 
```

在您的 if 语句中，设置按钮以匹配索引：

```
aButton.tag = 0; 
```

然后使用索引获取字符串：

```
string = [someArray objectAtIndex: ((UIButton*)sender).tag]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T16:10:51.320

您正在尝试在 UIControl 上使用字典方法。

还有其他更好的方法来获取对象，在你的情况下，一个字符串，在@Javy's answer中提到的方法中。但是，如果您必须向现有控件添加额外的属性，则必须对其进行子类化并在子类中添加一个属性，您可以在操作中获取/设置该属性。

# iis-8 - IIS8 默认文档产生 404 not found 错误

> ID：12899450
> 
> 赞同：4
> 
> 时间：2012-10-15T15:58:43.977
> 
> 标签：iis-8, default-document

我有一台带有 IIS 8 的新 Windows Server 2012 机器。我安装了一个使用 Windows 身份验证登录页面的应用程序。该应用程序使用 .NET 2.0（配置起来有点麻烦，但这是另一回事）如果您在 URL 中指定登录页面，该应用程序将完美运行。此登录页面是应用程序的默认文档，用于验证用户并在用户注册后自动登录。如果他们没有注册，那么它会将他们重定向到 Forms 身份验证登录页面，他们可以在其中输入本地应用程序凭据。

我遇到的问题是登录页面仅在您直接浏览到它时才有效，即在 URL 中键入名称。如果您使用 IIs 中的 Default 文档，则会返回 404 错误。

我在这里看到其他针​​对 IIS 7 或 IIS 7.5 的文章，表面上看起来与 IIS 8 相同，但这些问题的解决方案并不能解决我的问题。

应用程序池当前配置为经典（也尝试过集成）并使用 NetworkService 作为应用程序帐户并启用了 32 位。它是为 .NET Framework v2.0 配置的。站点和应用程序虚拟目录都启用了默认文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T18:19:34.153

这让我找到了我的情况的答案。实际上，在我将 index.html 移到列表顶部后，更改默认文档的顺序使我的 index.html 正常工作。我不需要进一步截断列表。

但是，我收到错误的原因是我以前在顶部有 index.aspx，而我确实在网站中有一个 index.aspx 文件。但事实证明，ASP.Net 尚未安装在服务器上。因此，服务器在 index.aspx （实际上存在）上返回了一个非常误导性的 404 错误，而它应该忽略它并进入我的测试 index.html 文件，或者给我一些它无法读取 .aspx 文件的消息.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:49:27.590

我想我已经解决了这个问题。IIS 8 似乎不尊重默认文档列表中的文档顺序，并且总是选择 default.aspx，它显示为列表中的最后一个文档。
我的主应用程序没有 default.aspx 页面。当我删除默认文档列表中的所有条目时，只显示了我需要的主应用程序唯一的一个文档，它可以正常工作。这有点痛苦，因为我的应用程序有很多使用不同登录页面的子应用程序。其中之一使用 default.aspx。我们通常在顶层指定它们并在子应用程序上使用继承，但现在似乎每个子应用程序都需要单独配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T21:24:54.890

我们可以在 web.config 中指定默认文档。在 web.config 中指定您的默认文档，它应该可以工作。

# iphone - iPhone/iPod Touch：应用程序可执行文件包含不受支持的架构：armv7s (-19031)

> ID：12899451
> 
> 赞同：2
> 
> 时间：2012-10-15T15:58:50.780
> 
> 标签：iphone, ios, xcode, error-handling

> **可能重复：**
> [iOS 6 Xcode 4.5 不支持架构 armv7s](https://stackoverflow.com/questions/12832232/ios-6-xcode-4-5-unsupported-architecture-armv7s)

我计划为 iPhone 5 提交此更新。

当我尝试创建存档时，我收到以下警告：

```
iPhone/iPod Touch: application executable contains unsupported architecture(s): armv7s (-19031) 
```

我该如何解决这个问题？我应该怎么做才能支持 iPhone 5？

笔记：

我正在使用以下框架：

1.  核心数据
2.  石英芯
3.  AV基金会
4.  UIKit
5.  基础
6.  核心图形
7.  SenTestingKit

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T16:17:06.183

`SenTestingKit`不支持从架构中`armv7s`删除`armv7s`或删除 SenTestingKit 的使用，直到它们更新为`armv7s`.

**编辑**：删除`armv7s`仍将允许您的应用程序在 iPhone 5 上运行，但是您不会获得`armv7s`处理器的全部性能。

# delphi - 如何将备忘录或 RichEdit 保存为 UTF 8 文本文件？

> ID：12899452
> 
> 赞同：3
> 
> 时间：2012-10-15T15:58:50.757
> 
> 标签：delphi, delphi-7

我正在使用 Delphi 7，我编写了一个程序，该程序从用户那里获取一些信息，将来自多个编辑框和备忘录的信息以及备忘录中的其他输入组件组合在一起。如何将此备忘录保存为 UTF 8 文本文件？我从上一个程序的用户那里收到了一些文件，但没有解决 utf 问题，现在，当我打开输出文件时，我看到了???? （如您所知！）而不是不同的语言字符，这些是不可恢复的，是吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T20:53:24.440

像这样：

```
const
  UTF8BOM: array[0..2] of Byte = ($EF, $BB, $BF);
var
  UTF8Str: UTF8String;
  FS: TFileStream;
begin
  UTF8Str := UTF8Encode(Memo1.Text);

  FS := TFileStream.Create('C:\path to\file.txt', fmCreate);
  try
    FS.WriteBuffer(UTF8BOM[0], SizeOf(UTF8BOM));
    FS.WriteBuffer(PAnsiChar(UTF8Str)^, Length(UTF8Str));
  finally
    FS.Free;
  end;
end; 
```

# php - 使用 PHP 获取 Youtube API 的上传状态

> ID：12899454
> 
> 赞同：0
> 
> 时间：2012-10-15T15:58:57.407
> 
> 标签：php, api, youtube

我正在使用**php**，我在我的 chanel 上上传视频。我怎样才能获得我的视频的加载百分比？

我在 kohana 框架上使用**curl上传文件。**

请帮帮我，我需要例如**“45%”**

```
Curl::post(Yt::$url_GetUploadToken, $data, $aHeader, 0, $aOpt ); 
```

我怎样才能得到百分比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:29:41.627

你试图做的事情是行不通的。

PHP 是一种服务器端语言。当你告诉它做某事（例如上传文件）时，它会继续工作直到完成。您希望脚本同时上传并在上传期间报告文件的上传百分比。

这是人们使用 Flash 上传文件的主要原因之一。Flash 可以上传文件，同时在操作过程中收集信息并显示给用户。

唯一可行的方法是使用 Ajax 提交表单并使用 Ajax 定期检查上传状态。我不确定这是否可行，因为它需要 PHP 以某种方式保存当前进度，而且我不知道当整个上传是通过 cURL 完成时你是如何做到的。

# javascript - Dojo 请求不会调用回调

> ID：12899455
> 
> 赞同：0
> 
> 时间：2012-10-15T15:59:09.073
> 
> 标签：javascript, dojo

我正在为一个项目使用dojo。在那里我有一个对服务器的ajax请求。我提供的 URL 有效，我正在从 URL 获取数据。此外，我已经在浏览器中检查了请求是否已发送，以及它是如何响应的。但是回调根本没有执行...... 这是代码：

```
require([
            "dojox/grid/EnhancedGrid",
            "dojo/store/Memory",
            "dojo/store/JsonRest",
            "dojo/store/Cache",
            "dojo/data/ObjectStore",
            "dojo/request",
            // a few other things i require
            "dojo/domReady!"
        ], function(EnhancedGrid, Memory, JsonRest, Cache, ObjectStore, request, query, on, dom, parser, registry, cookie, json, array, button, attr, lang) {
        request.get("<?=  base_url(); ?>c_fremdkosten/get_list",
            {
                handleAs: "json"
            }
        ).then(function(data){
            console.log(data); //is NOT executed...
        });
}); 
```

有人有想法吗？

# google-chrome - Google Chrome 浏览器的 SVG 图像模糊/闪烁问题

> ID：12899459
> 
> 赞同：1
> 
> 时间：2012-10-15T15:59:22.327
> 
> 标签：google-chrome, jquery-svg

在 Google Chrome 浏览器中的每个 Ajax 调用中，我都遇到了主 SVG 响应中的辅助 SVG 图像模糊问题。

仅有的：

*   在 ajax 调用中，我将 SVG 内容作为 Ajax 响应。
*   在该响应中，我有包含 SVG 图像标签的主要 SVG 图像：

    ```
    xlink:href(source) presenting secondary svg image file. 
    ```

*   我正在尝试将该 SVG 响应附加到 HTML 分割标记，但此辅助 SVG 图像仅在 Google Chrome 浏览器中显示模糊。

我参考了这个链接：[http](http://code.google.com/p/chromium/issues/detail?id=119693) ://code.google.com/p/chromium/issues/detail?id=119693和谷歌搜索了这个主题，但搜索结果最终只显示 SVG 内容的 Google Chrome 缓存问题。

我尝试通过在辅助 SVG 图像源路径/位置后面附加一个随机字符串作为参数来消除此缓存问题。现在它给出了一个新的响应，而不会模糊辅助 SVG 图像，但它会在每次 Ajax 调用时引入辅助 SVG 图像闪烁/闪烁的问题。

请建议在 Chrome 浏览器中摆脱此闪烁问题的可能方法。

问候，
维沙尔

# android - 如何在 android 中调试 wpa_supplicant？

> ID：12899460
> 
> 赞同：3
> 
> 时间：2012-10-15T15:59:23.783
> 
> 标签：android, adb

我的具体问题是：

*   1.  如何在Android中将调试级别更改为wpa_supplicant的MSG_DEBUG？
    2.  我需要编译 wpa_supplicant 来实现这个目标吗？
    3.  如何查看日志？

我曾尝试使用这些命令：

> 1.  `adb shell wpa_supplicant -c/etc/wpa_supplicant.conf -iwlan0 -d`
> 2.  `adb logcat | grep -i "wpa_supplicant"`

但是这些命令并没有显示`MSG_DEBUG`级别日志。

我尝试使用 /system/etc/wifi 目录中的 conf 文件。IE

> `adb shell wpa_supplicant -c/system/etc/wifi/wpa_supplicant.conf -iwlan0 -d`

但这给了我一个错误：

> mkdir[ctrl_interface]：只读文件系统

我没有找到解决方法。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-17T02:25:18.037

为了

1.  尝试 wpa_cli loglevel 命令更改日志级别
2.  系统分区是只读分区，`-c /data/misc/wifi/`因为该文件夹是为 wpa_supplicant 创建的
3.  可以通过 logcat 查看日志：`adb logcat wpa_supplicant:V *:S`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T08:38:17.013

在 wpa_common.c 文件中，你可以找到 wpa_printf 函数输出调试日志，你不能​​使用 MSG_DEBUG 作为参数，那是你的问题 1 和 2

# java - 应用程序在 weblogic 中不起作用

> ID：12899464
> 
> 赞同：0
> 
> 时间：2012-10-15T15:59:38.387
> 
> 标签：java, jsp, tomcat, servlets, weblogic

在通过将项目部署到 Tomcat 中生成项目后，我在 WebLogic 中部署了一个应用程序。该项目在 Tomcat 中运行良好，但在 Weblogic 中运行良好。

很多错误，例如：

<--日期-->

```
<Error> <HTTP> <BEA-101020> <[weblogic.servlet.int
ernal.WebAppServletContext@1f9a403 - appName: 'app-name', name: 'app-name', contex
t-path: '/app-name', spec-version: '2.5'] Servlet failed with Exception
java.lang.NullPointerException 
```

现在我的疑问是，这是因为使用了 getServletContext/pageContext 吗？如果是，那么我应该使用什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:22:15.500

在搜索 return-NULL-of-getServletContext().getRealPath() 行为时，我发现了这个，

[http://ananthkannan.blogspot.in/2009/12/servletcontextgetrealpath-returns-null.html](http://ananthkannan.blogspot.in/2009/12/servletcontextgetrealpath-returns-null.html)

这成功了。正是 getRealPath 的使用阻止了应用程序成功运行。启用存档的 getRealPath 后，它不返回 null。

# c# - 正则表达式验证包含“$”作为结束字符的字符串

> ID：12899467
> 
> 赞同：1
> 
> 时间：2012-10-15T15:59:47.970
> 
> 标签：c#, regex

在 c# 中，我必须使用 RegEx 验证最后包含“$”的字符串。

例如：etc$、abcd$ 等。

目前，我正在使用`^[A-Za-z0-9_-]+$` 验证包含字母数字和 _ 和 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:00:47.903

您需要添加`\$`以匹配文字`$`字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:59:34.493

`$`有特殊含义。它指定字符串的结尾（或多行模式下的行）

所以，你需要`$`像这样逃跑`\$`

这是你想要的正则表达式

```
^[\w-]+\$$

//\w is [a-zA-Z0-9_] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T16:01:22.520

在正则表达式中，`$`实际代表行尾。您应该将其转义`\$`以匹配它：

```
^[A-Za-z0-9_-]+\$ 
```

要使其完全匹配，从字符串的开头 ( `^`) 到结尾 ( `$`)，您应该使用：

```
^[A-Za-z0-9_-]+\$$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T16:02:12.880

尝试使用

```
\$$ 
```

或者

```
^[A-Za-z0-9_-]+\$$ 
```

在哪里

```
\$ means the '$' symbol
$ means the end of string 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T16:08:45.523

一种选择是：

```
^[A-Za-z0-9_-]+[$]$ 
                  ↑
                  this is end of line/string 
```

# php - 从表值显示图像

> ID：12899470
> 
> 赞同：0
> 
> 时间：2012-10-15T15:59:55.930
> 
> 标签：php, mysql

我无法根据 mysql 中的表值显示两个不同的图像。基本上，如果social_activities 表中的值= 1，那么我希望显示'tick.png'，如果值='0'，我希望显示'cross.png'。

目前，如果值为 1，我将获得 cross.png，如果值为 0，我将根本没有图像。显然有问题，但我不知道是什么？

请让我知道我哪里出错了。

谢谢。

```
<?php
            $get_social_set = get_social();

            while ($social = mysql_fetch_array($get_social_set)) 

    // get results from database
    // process results
    if ( $results === 1) {
        $image = 'assets/img/icons/tick.png';
    } else {
        $image = 'assets/img/icons/cross.png';
    }

        ?>

    <table width="100%" border="0">
      <tr>
        <td width="10">&nbsp;</td>
        <td width="30"><img src="<?php echo $image ?>" /></td> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-15T16:01:12.510

你忘记了`;`变量之后

```
 <table width="100%" border="0">
      <tr>
        <td width="10">&nbsp;</td>
        <td width="30"><img src="<?php echo $image; ?>" /></td> 
```

另外我会使用[PDO](http://php.net/manual/en/book.pdo.php)而不是那个 MySQL 命令。

您还想尝试`var_dump($image);`测试您正在检索正确的结果

# drupal - 访问注册用户的 UID 以在 Drupal 中分配第二个唯一标识符

> ID：12899473
> 
> 赞同：0
> 
> 时间：2012-10-15T16:00:11.870
> 
> 标签：drupal, registration

我正在尝试为转移到 Drupal 的站点添加遗留要求。该要求是存在另一个非核心唯一标识符。我正在使用以下...

```
function hook_user_insert(&$edit, $account, $category) {

} 
```

然后尝试使用以下方法获取 UID...

```
$userIdentifier = $uid[user][entity_keys][id]; 
```

但这只会导致错误

因为之前我在 Field UI 中创建了一个表。

我尝试了规则 UI 的表单部分，但匿名用户修复不起作用，关于什么可能起作用的任何想法？

注意：我应该指出我之前在 drupal.stackexchange.com 上问过这个问题，并且仍在努力（这里是原始帖子：[https ://drupal.stackexchange.com/questions/46451/hook-user- presave-at-user-registration-how-to-get-field-data-field-set-to-auto](https://drupal.stackexchange.com/questions/46451/hook-user-presave-at-user-registration-how-to-get-field-data-field-set-to-auto)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:26:07.503

到`hook_user_insert()`触发时，帐户已保存，因此您可以直接从对象中获取用户 ID：

```
$uid = $account->uid; 
```

# jquery - 计数 jQuery 计时器

> ID：12899475
> 
> 赞同：0
> 
> 时间：2012-10-15T16:00:17.930
> 
> 标签：jquery, jquery-plugins, stopwatch

我正在尝试使用这个 jQuery 计数脚本[https://github.com/robcowie/jquery-stopwatch](https://github.com/robcowie/jquery-stopwatch)但我想添加一个事件，如果计时器超过 2 分钟，#demo1 div 的 BG 颜色会改变变红

我已经添加了 jsfiddle 上的所有代码

[http://jsfiddle.net/FeWrD/](http://jsfiddle.net/FeWrD/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:05:47.737

您需要将其绑定到**tick.stopwatch 事件。**.

```
$(document).ready(function() {

    $('#demo1').stopwatch().bind('tick.stopwatch', function(e, elapsed) {
        if (elapsed <= 5000) {
            $("#demo1").css("background", "green");
        }
        else {
            $("#demo1").css("background", "orange");
        }
    }).stopwatch('start') ;
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/FeWrD/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:04:33.637

> ```
> $(document).ready(function() {
>   $('#demo1').stopwatch().bind('tick.stopwatch', function(e, elapsed){
>   if (elapsed >= 120000) {
>      $("#demo1").css("background", "red");
>   } }).stopwatch('start')
> }) 
> ```

从文档

# c# - 如何更新 MVC3 中显示视图的一部分

> ID：12899478
> 
> 赞同：2
> 
> 时间：2012-10-15T16:00:21.757
> 
> 标签：c#, asp.net-mvc-3, razor, internet-explorer-6

我有一个视图，它使用以下方法调用部分视图：

```
Html.RenderPartial 
```

我想使用控制器方法单独调用它以停止必须刷新整个页面，但返回 void 的控制器方法似乎破坏了现有视图（我得到一个空白屏幕）。

我有更新 HTML 文档部分的 javascript 代码，但我看不到如何在控制器中保留视图/获取对它的引用以调用 javascript 方法。

我应该补充一点，我对这个 MVC3 东西还很陌生。

NB 长话短说，使用 JQuery 不是一种选择，所以很遗憾我们仅限于 Javascript。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:21:47.383

基本模式是在 Controller 中创建 PartialView 结果并使用该结果更新页面上某些容器的 innerHTML：

**HTML**

```
<input type="button" onclick="UpdateMyContainer();" value="Update" />

<div id="MyContainer">
    @Html.Partial( "_MyPartialView", Model )
</div> 
```

**JavaScript**

遵循[Ajax without jQuery for 初学者](http://blog.mgechev.com/2011/07/21/ajax-jquery-beginners/)来创建不需要 JQuery 的 Ajax 方法。本质上：

```
function UpdateMyContainer() {
  var xmlHttp = createXMLHttp();
  // set your controller URL here:
  xmlHttp.open('get', 'Url/To/SomeMethodInController', true);
  xmlHttp.send(null);
  xmlHttp.onreadystatechange = function() {
    if (xmlHttp.readyState === 4) {
      if (xmlHttp.status === 200) {
        // Set the Id of the container to update here:
        document.getElementById('MyContainer').innerHTML = xmlHttp.responseText;
      } else {
        alert('Error: ' + xmlHttp.responseText);
      }
    } else {
      //still loading
    }
  };
} 
```

上面的 JS 可以进一步重构以获取要更新的元素的 URL 和 ID。

**控制器**

```
[HttpPost]
public PartialViewResult SomeMethodInController()
{
    var model = MethodToRetreiveModel();

    return PartialView( "_MyPartialView", model );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:58:59.223

就像附言一样，我终于在 IE6 上尝试了这个（不要问！）。必须做一些细微的调整，否则它会很漂亮！

```
var xmlHttp = new ActiveXObject('MSXML2.XMLHttp'); 
```

和

```
xmlHttp.open('post', 'Url/To/SomeMethodInController', true); 
```

# java - 在父对象内部调用属性对象的方法

> ID：12899479
> 
> 赞同：1
> 
> 时间：2012-10-15T16:00:27.997
> 
> 标签：java, reflection, cobol

我正在尝试对 Cobol 系统进行建模的 Java 框架中工作。我有一个具有许多属性的类 StudentRecord。

```
class StudentRecord extend BaseRecord {
...
 public CobolString firstName;
 public CobolString lastName;
...
}

class CobolString {
...
 private String content;
 public setValue(String str){
 content = str;
}

} 
```

假设我有一个 StudentRecord 类型的实例 studentA，String 中的 firstName 值为“Max”。我想使用 Java 反射将属性 firstName 更新为“John”。通常，我这样做如下：

```
Class  aClass = studentA.class;
Field field = aClass.getField("firstName");
field.set(studentA, new CobolString("John")); 
```

因为这个框架是为 Cobol 建模的，所以它有一些奇怪的行为和要求。其中之一是我需要使用 CobolString 的 setValue() 方法为 firstName 设置新值，以确保系统正常工作。

例如：没有反射，它需要我做：

```
studentA.firstName.setValue("John"); 
```

通过反射，如果我这样编码，studentA 仍然有新的 firstName，但它对其他对象/方法变得陌生，不能与其他人一起工作！！！

那么如何使用 Java 反射为 firstName 设置新值来做同样的事情。我的意思是我如何从父对象 studentA 获取子对象 firstName，然后使用新值“John”对其调用方法“setValue”。

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T16:15:36.573

您可以使用反射访问实例的字段：

```
StudentRecord obj;
Field field = obj.getClass().getField("firstName"); // or StudentRecord.class.getField()
CobolString cs = (CobolString)field.get(obj);
cs.setValue("John"); 
```

如果字段是`private`，请在调用之前执行此操作`Field.get()`：

```
field.setAccessible(true); 
```

# java - 将 Apache 配置与 JSF 一起使用时遇到问题 标签

> ID：12899480
> 
> 赞同：0
> 
> 时间：2012-10-15T16:00:31.643
> 
> 标签：java, jsf, properties

我正在做一个项目，我对 JSF 不太熟悉，所以请纠正这个问题中的任何空白。

我有一个包含域值的属性文件......例如

```
domain=.com
domain=.net 
```

在我的 Bean 我有这个

```
private String domain;
private String[] domainSelection;

public void initProp(){

   try {
      Configuration config = new PropertiesConfiguration("prop.properties");
      domainSelection = config.getStringArray("domain");

   } catch (ConfigurationException e) {
      Log.error("Error");
   }

} 
```

在`.jsp`我有 JSF 的页面中

```
<rich:select id="domain" value="#{Bean.domain}"                                               
      required="true">
     <f:selectItems itemValue="#{Bean.domainSelection}" />
</rich:select> 
```

当我调试它时，我在 domainSelection 中得到了两个值，但我需要将它们传递给 JSF，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:09:03.440

很抱歉最初的答案我完全错过了这个问题。

```
private List<SelectItem> domains = new ArrayList<SelectItem>();
//for each domain
domains.add("com",firstFromDomainSelection);
domains.add("net",secondFromDomainSelection);

<f:selectItems value="#{Bean.domains}" /> 
```

所以这需要`getDomains`检索它们。

**编辑：**

我相信只要您再次阅读属性文件，这是可行的。要记住的一件事是该文件可能`.war`已经存在，因此您将不得不想办法重新添加或将其添加到已部署的文件夹中。

每次视图想要获取它会调用的列表时`getDomains()`，这意味着我们应该有逻辑在那里每次调用它时提取属性。由于文件 IO，可能会对性能造成轻微影响。

```
private List<SelectItem> domains;
private Configuration config = new PropertiesConfiguration("prop.properties"); // with accessors

public List<SelectItem> getDomains(){
  domains = new ArrayList<SelectItem>();
  String[]  domainSelection = getConfig().getStringArray("domain");
  for(String domain : domainSelection ){
     //Define desired logic for the value if its the same (.com) pass the same as value
     domains.add( new SelectItem(domain ,domain)); // SelectItem(value, label);
  }
  return domains;
} 
```

*我会做什么*

我不会使用属性文件，而是使用域表，只需将这些记录动态添加到表中，它们就会被相应地检索。当对该视图有很多请求时，它可能会减慢速度——至少稍微慢一点。要记住的另一个问题是 apache 是否缓存了这些文件。要时刻铭记在心。使用 db 表更安全 IMO。

# c# - Windows 8 应用程序中的反射

> ID：12899481
> 
> 赞同：5
> 
> 时间：2012-10-15T16:00:32.143
> 
> 标签：c#, reflection, windows-8, windows-runtime, windows-store-apps

我正在对一个内部有 2 个私有成员变量的类进行单元测试。我创建了一个继承自我正在测试的类的类。

起初我只是制作了我想访问的变量，`protected`但我认为如果我可以将它们保持私有并使用反射来访问它们会很酷。我用谷歌搜索并找到了各种文章（& 在这里提出的问题（http://stackoverflow.com/questions/4097682/c-sharp-use-reflection-to-get-a-private-member-variable-from-a-derived -class)) 并且接受的答案不起作用。

链接的 SO 问题说：

```
// _commandCollection is an instance, private member
BindingFlags flags = BindingFlags.Instance | BindingFlags.NonPublic;

// Retrieve a FieldInfo instance corresponding to the field
FieldInfo field = GetType().GetField("_commandCollection", flags);

// Retrieve the value of the field, and cast as necessary
IDbCommand[] cc =(IDbCommand[])field.GetValue(this); 
```

但是，没有`GetField()`方法。我尝试了一种看起来相似的方法，`GetRuntimeField()`但没有奏效。

我的代码（在继承类中）是：

```
public List<BaseData> RealAllData
{
    get
    {
        // Use reflection to access the private variable
        FieldInfo field = GetType().GetRuntimeField("mAllData");
        return (List<BaseData>)field.GetValue(this);
    }
} 
```

如果有人知道为什么这不起作用，那么我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:30:10.650

您还可以将反射代码放入面向 .NET 4 和 Windows 应用商店应用的可移植类库中。然后，您将可以访问“旧”反射 API，包括 BindingFlags 等。

# css - 更少的条件执行

> ID：12899482
> 
> 赞同：3
> 
> 时间：2012-10-15T16:00:32.487
> 
> 标签：css, less

通过使用[LESS](http://lesscss.org/)，我试图在混合中执行条件

这是我的代码

```
.my-mixing (@isInverse) {
    .navbar {
        when(@isInverse) {
            .navbar-inverse;
        }
    }
}

.my-mixing(true); 
```

这没用。
有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:38:26.170

您不能`when`以您尝试的方式使用，它总是必须出现在 mixin-declaration 之后。如果变量与警卫不匹配，您必须提供后备混合。

```
.my-mixing (@isInverse) {
    .navbar {
       .navbar-inverse(@isInverse);         
    }
}

.navbar-inverse(@a) when(@a){
   /* do something if it matches */
}
.navbar-inverse(@a) when not(@a){
  /* do something else (or nothing at all) */
}

.my-mixing(true); 
```

我`when not(@a)`在第二个 mixin 中添加了，所以它本身不会被包含在内。你也可以把它放在受保护的 mixin 之前，以防止样式被覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T16:36:11.657

鉴于以下 html...

```
<div class="navbar">
    I am navbar!
</div> 
```

这是一个可行的解决方案：

```
.navbar-inverse(@isInverse){
    // do nothing or whatever
}
.navbar-inverse(@isInverse) when(@isInverse){
    // apply styles for inverse navbar
}

.my-mixin(@isInverse){
    .navbar{
        .navbar-inverse(@isInverse);
    }
}
.my-mixin(true); 
```

但是，如果您已经显示了您的 html 并更准确地指定了您的问题，那么可能会有更合适的解决方案。

# c# - 对不同类型使用相同的 DataTemplate

> ID：12899489
> 
> 赞同：4
> 
> 时间：2012-10-15T16:01:08.073
> 
> 标签：c#, wpf, datatemplate

是否可以将相同的 DataTemplate 用于定义的类型选择，即如何更改以下示例代码以便将相同的 DataTemplate 用于所有列出的类型？

```
<DataTemplate DataType="{x:Type local:ClassA, ClassB, ...}">
   <StackPanel Orientation="Horizontal">
      <Label Content="{Binding Path=Title}"/>
      ...
   </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T16:41:34.040

默认情况下不支持，但通常我将 的内容`DataTemplate`放在一个`UserControl`或另一个中`DataTemplate`（取决于模板的复杂程度），然后为每个类项编写一个 3 行数据模板

```
<UserControl x:Class="MyUserControl">
   <StackPanel Orientation="Horizontal">
      <Label Content="{Binding Path=Title}"/>
      ...
   </StackPanel>
</UserControl >

<DataTemplate DataType="{x:Type local:ClassA}">
    <local:MyUserControl />
</DataTemplate>
<DataTemplate DataType="{x:Type local:ClassB}">
    <local:MyUserControl />
</DataTemplate>
<DataTemplate DataType="{x:Type local:ClassC}">
    <local:MyUserControl />
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:16:13.020

它不支持开箱即用，但可以通过定义自定义 MarkupExtension 来做类似的事情。类似于 x:Type 扩展。

如果在这里，ClassA、ClassB 是从同一个类派生的，您应该能够将基类名称放在这里以引用它们。

# c++ - 如何删除 ATL COM C++ 中的方法

> ID：12899490
> 
> 赞同：2
> 
> 时间：2012-10-15T16:01:10.617
> 
> 标签：c++, visual-c++, com, atl

我正在开发 Visual Studio c++ 6，开发 COM/dll。我创建了一个STDMethod并通过界面将其删除（右键单击并删除）。现在，每次我构建代码时，它都会弹出一个窗口并显示一条消息“此文件已在源编辑器之外进行了修改。您要重新加载它吗？” 请建议我一种避免此问题的方法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:01:32.030

您应该从 IDL 文件中删除该方法。

每次重新编译 IDL 时，都会重新编译项目 .h 文件。如果它在您的编辑器中打开，您将收到此通知。如果在重新编译 IDL 之前打开 .h 文件编辑器窗口，请关闭它。

顺便说一句，对于代理/存根代码文件的 dlldata.c、prjname_i.c 和 prjname_p.c 也是如此。

# linux - 如何在 Linux 中设置路径

> ID：12899503
> 
> 赞同：0
> 
> 时间：2012-10-15T16:02:05.597
> 
> 标签：linux, command-line

当我做'ffmpeg'时提供帮助，我得到了

`ffmpeg: error while loading shared libraries: libavdevice.so.52: cannot open shared object file: No such file or directory`.

但是，当我这样做时`LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib ffmpeg`，我得到

```
FFmpeg version SVN-r26402, Copyright (c) 2000-2011 the FFmpeg developers
  built on Oct 11 2012 18:52:29 with gcc 4.4.6 20120305 (Red Hat 4.4.6-4)
  configuration: --enable-libmp3lame --enable-libvorbis --enable-shared --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-nonfree --enable-libtheora --enable-version3
  libavutil     50.36\. 0 / 50.36\. 0
  libavcore      0.16\. 1 /  0.16\. 1
  libavcodec    52.108\. 0 / 52.108\. 0
  libavformat   52.93\. 0 / 52.93\. 0
  libavdevice   52\. 2\. 3 / 52\. 2\. 3
  libavfilter    1.74\. 0 /  1.74\. 0
  libswscale     0.12\. 0 /  0.12\. 0
Hyper fast Audio and Video encoder
usage: ffmpeg [options] [[infile options] -i infile]... {[outfile options] outfile}...

Use -h to get full help or, even better, run 'man ffmpeg' 
```

有人可以告诉我如何永久设置它。我是 linux 命令窗口的新手。我看到了一些关于编辑 /etc/ld.so.conf 文件的内容，但我不知道该怎么做。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:08:50.263

编辑以下文件之一：

1.  /etc/profile
2.  ~/.bash_profile
3.  ~/.bash_login
4.  ~/.profile

并添加： LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib ffmpeg

然后重启

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:06:14.307

你可以设置

```
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib 
```

在您的`.profile`or`.bashrc`文件中（取决于您使用的外壳）。这样，它将为您打开的每个 shell 进程设置。

这种修改对您来说是特别的。编辑`/etc/ld.so.conf`文件是系统范围的修改。

# c# - 表单反序列化不起作用

> ID：12899506
> 
> 赞同：2
> 
> 时间：2012-10-15T16:02:13.453
> 
> 标签：c#, asp.net, asp.net-mvc, json, http-post

我有一个异步 httpPost 序列化我的表单数据并将其提交给我的控制器。在那里，我尝试将我的表单数据序列化到我的视图模型类中，但所有值都为空或分配了默认值。

```
public ActionResult GetSalesData(string vmString)
{
    -serialization...
    -use the data to select some other data
    return new JsonResult { Data = d, JsonRequestBehavior = JsonRequestBehavior.AllowGet };
} 
```

对于序列化，我到目前为止尝试了这两种方法：

1.)

```
 { vmString: $('form').serialize() } 
```

结果：

```
Dataset.Ids=3,7,12&Type=Sales&DataSources=BeverageType&DisplayModes=Volume&SeriesTypes=Lines&SalesVm.DisplayOptions.ShowAverage=false&SalesVm.DisplayOptions.ShowTargetLine=false&ActionName=Sales_SelectBeverageTypes&Mode=LightboxInWizard&SelectedDatasetIdsWorkingCopy=3&SearchTerm= 
```

2.)

```
 { vmString: JSON.stringify($('form')) } 
```

结果：

```
{"length":2,"prevObject":{"0":{"jQuery1710039964356962994385":1,"location":{}},"context":{"jQuery1710039964356962994385":1,"location":{}},"length":1},"context":{"jQuery1710039964356962994385":1,"location":{}},"selector":"form","0":{"Dataset.Ids":{},"Type":{},"DataSources":{"jQuery1710039964356962994385":15},"3":{"jQuery1710039964356962994385":16},"DisplayModes":{"0":{"jQuery1710039964356962994385":42},"1":{"jQuery1710039964356962994385":43},"2":{"jQuery1710039964356962994385":44},"3":{"jQuery1710039964356962994385":45}},"SeriesTypes":{"0":{"jQuery1710039964356962994385":46},"1":{"jQuery1710039964356962994385":47}},"SalesVm.DisplayOptions.ShowAverage":{"0":{"jQuery1710039964356962994385":48},"1":{"jQuery1710039964356962994385":49}},"SalesVm.DisplayOptions.ShowTargetLine":{"0":{"jQuery1710039964356962994385":50},"1":{"jQuery1710039964356962994385":51}}},"1":{"ActionName":{},"Mode":{},"SelectedDatasetIdsWorkingCopy":{},"SearchTerm":{"jQuery1710039964356962994385":35}}} 
```

为了反序列化，我尝试了：

```
m = (StatisticsViewerViewModel)new JsonSerializer().Deserialize(new System.IO.StringReader(vmString), typeof(StatisticsViewerViewModel));
m = (StatisticsViewerViewModel)new JsonSerializer().Deserialize(new System.IO.StringReader(vmString), vmString.GetType());
m = JsonConvert.DeserializeObject<StatisticsViewerViewModel>(vmString);

DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(StatisticsViewerViewModel)); 
m = (StatisticsViewerViewModel) ser.ReadObject(stream); 
```

我检查了我的所有字段都在表单内：

```
 @using (Html.BeginForm())
{
   some partial views containing some fields, all using the same model..
} 
```

我还检查了使用的视图模型以及所有嵌套模型确实有一个空的构造函数。

是否有不同的方法来反序列化表单数据？我还能检查什么以确保一切正常？

*   编辑 -

ViewModel-根：

```
public class StatisticsViewerViewModel
{
    public String BreadcrumbName { get; set; }
    public String ActionName { get; set; }
    public StatisticsType Type { get; set; }
    public DropDownListModel DataSourceList { get; set; }
    public MultiSelectionModel Dataset { get; set; }
    public SalesViewModel SalesVm { get; set; }
    //public EventsViewModel EventsVm { get; set; }
    public ChartExportOptions ExportOptions { get; set; }

    public StatisticsViewerViewModel()
    {
        DataSourceList = new DropDownListModel();
        Dataset = new MultiSelectionModel();
        SalesVm = new SalesViewModel();
        ExportOptions = new ChartExportOptions();
    }

    public enum StatisticsType
    {
        Sales,
        Events
    }
} 
```

嵌套视图模型

```
public class SalesViewModel
{
    public SalesDisplayOptions DisplayOptions { get; set; }
    public RadioButtonModel DisplayModes { get; set; }      // Volume, Value, ..
    public RadioButtonModel SeriesTypes { get; set; }       // Line, Bar, ..

    public SalesViewModel(bool initialize = false)
    {
        if (initialize) { Initialize(); }
    }
}

public class SalesDisplayOptions
{
    public DisplayMode Mode { get; set; }
    public SeriesType Type { get; set; }
    public bool ShowAverage { get; set; }
    public bool ShowTargetLine { get; set; }

    public enum SeriesType
    {
        Lines, ...
    }

    public enum DisplayMode
    {
        Value, ...
    }

} 
```

相关的一点可能是该帖子是由 kendoChart 解雇的。这是视图中有趣的块：

```
....
<div id="chart"></div>
....
@this.ScriptBlock(
@<script type="text/javascript">
$("#chart").kendoChart({
             dataSource: new kendo.data.DataSource({
                 transport: {
                     read: {
                         url: actionUrl,
                         data: { vmString: $('form').serialize() },
                         dataType: "json",
                         contentType: "application/json; charset=utf-8"
                     }
                 },
                 sort: ...
 .... 
```

为了检查问题是否与 kendoChart-Object 相关，我测试性地实现了手动 POST：

```
....
<div class="round-corner-bottom-right">
        <button id="send-form" type="button">
            <span class="button-label">Send Form Data</span>
        </button>
</div>
....

@this.ScriptBlock(
@<script type="text/javascript">

     $('document').ready(function () {

        $('#send-form').on('click', function () {

             var data = $('form').serialize();

             $.ajax({
                 type: "POST",
                 url: actionUrl,
                 data: data,
                 cache: false,
                 success: function (returnData) {
                 }
             });

     }); // document ready 
```

在这种情况下问题不会持续存在，所有值都按预期设置。所以 kendoChart 方法似乎有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:06:06.867

您是否厌倦了使用允许默认模型绑定器来处理它而不是尝试自己反序列化和管理它？

所以

```
public ActionResult GetSalesData(string vmString) 
```

变成这个

```
public ActionResult GetSalesData(MyModel vmString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:26:09.903

根据我的经验，将复杂的 JS 对象传递给 Asp.net 控制器动作并将数据序列化为视图模型的唯一简单方法是首先在 JS 端预先格式化对象。

本页说明方法：[http ://erraticdev.blogspot.com/2010/12/sending-complex-json-objects-to-aspnet.html](http://erraticdev.blogspot.com/2010/12/sending-complex-json-objects-to-aspnet.html)

要预先格式化数据，您可以执行以下操作：

```
$.post(URL, $.toDictionary({ ... }), function(response) { ... }); 
```

这是 jQuery.toDictionary 插件的缩小源代码：

```
/*!
* jQuery toDictionary() plugin
*
* Version 1.2 (11 Apr 2011)
*
* Copyright (c) 2011 Robert Koritnik
* Licensed under the terms of the MIT license
* http://www.opensource.org/licenses/mit-license.php
*/
(function (a) { if (a.isFunction(String.prototype.format) === false) { String.prototype.format = function () { var a = this; var b = arguments.length; while (b--) { a = a.replace(new RegExp("\\{" + b + "\\}", "gim"), arguments[b]) } return a } } if (a.isFunction(Date.prototype.toISOString) === false) { Date.prototype.toISOString = function () { var a = function (a, b) { a = a.toString(); for (var c = a.length; c < b; c++) { a = "0" + a } return a }; var b = this; return "{0}-{1}-{2}T{3}:{4}:{5}.{6}Z".format(b.getUTCFullYear(), a(b.getUTCMonth() + 1, 2), a(b.getUTCDate(), 2), a(b.getUTCHours(), 2), a(b.getUTCMinutes(), 2), a(b.getUTCSeconds(), 2), a(b.getUTCMilliseconds(), 3)) } } var b = function (c, d, e, f) { if (a.isPlainObject(c)) { for (var g in c) { if (f === true || typeof c[g] !== "undefined" && c[g] !== null) { b(c[g], d, e.length > 0 ? e + "." + g : g, f) } } } else { if (a.isArray(c)) { a.each(c, function (a, c) { b(c, d, "{0}[{1}]".format(e, a)) }); return } if (!a.isFunction(c)) { if (c instanceof Date) { d.push({ name: e, value: c.toISOString() }) } else { var h = typeof c; switch (h) { case "boolean": case "number": h = c; break; case "object": if (f !== true) { return }; default: h = c || "" } d.push({ name: e, value: h }) } } } }; a.extend({ toDictionary: function (c, d, e) { c = a.isFunction(c) ? c.call() : c; if (arguments.length === 2 && typeof d === "boolean") { e = d; d = "" } e = typeof e === "boolean" ? e : false; var f = []; b(c, f, d || "", e); return f } }) })(jQuery) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T14:29:35.513

问题不在于反序列化过程本身，而在于数据在 kendoChart 数据源中的绑定方式。该问题的解决方案是使用 ajax post 指定一个函数作为数据源，如下所示：

```
var data = $('form').serialize();

$("#chart").kendoChart({
             title: {
                 text: "Solution"
             },
             dataSource: new kendo.data.DataSource({
                 transport: {
                     read: function (options){
                         $.ajax({
                             url: actionUrl,
                             data: data,
                             type: "POST",
                             cache: false,
                             success: function (result) {
                                 options.success(result);
                             }
                         });
                     }
                 },
                 .... 
```

很抱歉用错误的问题打扰您！

# arrays - 从查询字符串中读取数组？

> ID：12899507
> 
> 赞同：0
> 
> 时间：2012-10-15T16:02:22.837
> 
> 标签：arrays, vb.net, query-string

似乎无法在任何地方找到答案。

我正在使用[Alex K. 的解决方案](https://stackoverflow.com/questions/6243051/how-to-pass-an-array-within-a-query-string)在查询字符串中发送数组，但我不知道如何在 VB.NET 中分解数组。

这个没有变化

```
 Dim qryArray As String() = context.Request.QueryString("qryArray") 
```

正在工作中。当我尝试使用它时，它一直说 qryArray 没有声明。

提前致谢！

**编辑**

我使用这种格式发送查询字符串中的值：

```
qryArray =[value1,...,valueN] 
```

再次感谢您抽出宝贵时间提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:58:16.497

就像下面我使用的示例一样尝试..它是使用arraylist创建的。结果将是一个形式为 ("value10,value11,value12,value13") 的字符串，可以在查询中传递。在第一个数组即 array1 中，删除重复项

```
 Dim Array1 As New ArrayList
    Dim Array_Com As New ArrayList
    Dim Word_1 As String = "Value1"
    Dim word_2 As String = "("""
    Dim i As Int32
    Dim j As Int32
    Dim k As Int32 = Array1.Count

    For i = 0 To 3
        Array1.Add(Word_1 & i)
    Next
    For j = 0 To Array1.Count - 1
        If k < Array1.Count - 1 Then
            Array_Com.Add(Array1.Item(j) & ",")
            'MsgBox(Array_Com.Item(j))
            k += 1
        Else
            Array_Com.Add(Array1.Item(j) & """" & ")")
        End If

    Next 
```

# android - 禁用强制关闭弹出android

> ID：12899508
> 
> 赞同：-1
> 
> 时间：2012-10-15T16:02:26.823
> 
> 标签：android, dialog, popup, dismiss

`HttpHostConnectException`当用户尝试在没有互联网连接的情况下发送一些数据时，我想处理。我在连接到服务器的 RestClient 类中这样做：

```
catch (HttpHostConnectException e)  {

                client.getConnectionManager().shutdown();
                try {
                    throw new  NoInternetException();
                } catch (NoInternetException e1) {
                    inetError = true;
                    e1.printStackTrace();
                }

                e.printStackTrace();
            } 
```

当我发现异常时，在我的活动中：

```
catch(NoInternetException  e) {
            this.cancel(true);
            editor.clear();
            editor.commit();
            finish();
            startActivity(getIntent());
             Toast.makeText(LoginActivity.this, "You've lost internet connection. You should try later.",Toast.LENGTH_LONG)
               .show();
            e.printStackTrace();
            } 
```

我想处理这个异常，重新启动用户上次使用的当前活动并显示 Toast，例如“你没有任何连接”。但是我得到了带有强制关闭按钮的异常弹出窗口。我不希望它显示，但想重新加载 Activity 并用我的消息显示 Toast。我该如何实施？

异常的堆栈跟踪：

```
 com.library.NoInternetException
    at com.library.RestClient$AsyncExecute.doInBackground(RestClient.java:447)
    at com.library.RestClient$AsyncExecute.doInBackground(RestClient.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019)
org.apache.http.conn.HttpHostConnectException: Connection to https://192.168.0.250 refused
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:178)
    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
    at com.library.RestClient$AsyncExecute.doInBackground(RestClient.java:401)
    at com.library.RestClient$AsyncExecute.doInBackground(RestClient.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019)
 Caused by: java.net.ConnectException: /192.168.0.250:443 - Network is unreachable
    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:207)
    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
    at java.net.Socket.connect(Socket.java:1002)
    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
... 14 more
 Error converting result java.lang.NullPointerException
 End of input at character 0 of 
 java.lang.InterruptedException
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1272)
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:220)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at android.os.AsyncTask$3.done(AsyncTask.java:196)
    at java.util.concurrent.FutureTask$Sync.innerCancel(FutureTask.java:294)
    at java.util.concurrent.FutureTask.cancel(FutureTask.java:76)
    at android.os.AsyncTask.cancel(AsyncTask.java:325)
    at com.assignmentexpert.LoginActivity$LoginTask.doInBackground(LoginActivity.java:422)
    at com.assignmentexpert.LoginActivity$LoginTask.doInBackground(LoginActivity.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019)
 cscCountry is not German : SEK
 dashboard
    10-15 18:48:02.469: I/download page count dashboard(5061): 1
    10-15 18:48:02.559: D/myLogs(5061): onCreate
    10-15 18:48:02.559: D/myLogs(5061): onStartCommand
    10-15 18:48:02.839: I/getOrders start(5061): 1
    10-15 18:48:03.039: I/getOrders end(5061): 6
    10-15 18:48:03.039: I/params(5061): page1
    10-15 18:48:03.039: I/params(5061): perpage6
    10-15 18:48:03.039: W/dalvikvm(5061): threadid=13: thread exiting with uncaught exception (group=0x40018578)
    10-15 18:48:03.089: E/AndroidRuntime(5061): FATAL EXCEPTION: AsyncTask #4
java.lang.RuntimeException: An error occured while executing doInBackground()

    at android.os.AsyncTask$3.done(AsyncTask.java:200)
    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
    10-15 18:48:03.089: E/AndroidRuntime(5061):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019)
 Caused by: java.lang.NullPointerException
    at com.library.ServiceMessages.md5(ServiceMessages.java:387)
    at com.library.ServiceMessages$DklabExecute.doInBackground(ServiceMessages.java:114)
    at com.library.ServiceMessages$DklabExecute.doInBackground(ServiceMessages.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    ... 4 more
    10-15 18:48:03.169: I/database closing(5061): All DAO's might be destroyed
 destroy
com.library.NoInternetException
    at com.library.RestClient$AsyncExecute.doInBackground(RestClient.java:447)
    at com.library.RestClient$AsyncExecute.doInBackground(RestClient.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019)
org.apache.http.conn.HttpHostConnectException: Connection to https://192.168.0.250 refused
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:178)
    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
    at com.library.RestClient$AsyncExecute.doInBackground(RestClient.java:401)
    at com.library.RestClient$AsyncExecute.doInBackground(RestClient.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
    at java.lang.Thread.run(Thread.java:1019)
Caused by: java.net.ConnectException: /192.168.0.250:443 - Network is unreachable
    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:207)
    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
    at java.net.Socket.connect(Socket.java:1002)
    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
    ... 14 more
 Error converting result java.lang.NullPointerException
Error parsing data org.json.JSONException: End of input at character 0 of 
 java.lang.NullPointerException
    at com.library.UserFunctions.getOrders(UserFunctions.java:71)
    at com.assignmentexpert.DashboardActivityAlt.getOrderList(DashboardActivityAlt.java:318)
    at com.assignmentexpert.DashboardActivityAlt.access$6(DashboardActivityAlt.java:309)
    at com.assignmentexpert.DashboardActivityAlt$DownloadTask.doInBackground(DashboardActivityAlt.java:500)
    at com.assignmentexpert.DashboardActivityAlt$DownloadTask.doInBackground(DashboardActivityAlt.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
        at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:06:38.527

你得到强制关闭是因为你可能在你的 UI 线程中运行这个 HttpConnection。这是有问题的，因为它会导致 UI 挂起和卡顿……因此，强制关闭。改用一个`AsyncTask`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:18:43.393

那里只有 3 行重要的错误：

```
Error parsing data org.json.JSONException: End of input at character 0 of 
10-15 18:48:03.759: W/System.err(5061): java.lang.NullPointerException
10-15 18:48:03.759: W/System.err(5061):     at com.library.UserFunctions.getOrders(UserFunctions.java:71) 
```

您似乎得到了一个空响应，或者至少是一个无法作为 JSON 线程化的响应。检查`UserFunctions`第 71 行并检查您的 AsyncTask 是否可以处理非 JSON 结果而不会崩溃。

# asp.net - 根据邮政编码查找美国最近的城市

> ID：12899512
> 
> 赞同：-1
> 
> 时间：2012-10-15T16:02:39.090
> 
> 标签：asp.net

> **可能重复：**
> [使用 asp.net 搜索最近的邮政编码](https://stackoverflow.com/questions/6922195/nearest-zip-code-search-using-asp-net)

我需要根据美国的邮政编码和半径找到最近的城市。任何人都可以给我想法或数据库，与此相关的API吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:06:09.810

试试谷歌地图 API？您绝对可以使用它确定离邮政编码最近的城市。

# python - Python：无法在 windows xp 上加载 OpenCV

> ID：12899513
> 
> 赞同：1
> 
> 时间：2012-10-15T16:02:48.083
> 
> 标签：python, opencv, windows-xp, py2exe

我有一个用 Python、OpenCv 和 py2exe 构建的 Python 应用程序。

当我分发这个应用程序并尝试在 Windows XP 机器上运行它时，由于加载 cv2.pyd（opencv python 包装器）时出错，我在启动时出错

我用dependency walker查看了cv2.pyd，发现缺少一些dll：ieshims.dll和wer.dll。不幸的是，复制这些库并不能解决其他一些 dll 丢失或不是最新的问题。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:33:07.190

问题来自 py2exe: 和复制的 4`msvfw32.dll` `msacm32.dll`个`avicap32.dll`dll`avifil32.dll`

当我在 Vista 上构建时，我认为它会强制在 Windows XP 上使用 Vista dll，导致尝试加载它时出现一些不匹配。

我删除了这 4 个 dll，一切似乎都正常（在这种情况下，它使用常规的系统 dll。）

# java - 无法将数据导入 JTable

> ID：12899514
> 
> 赞同：1
> 
> 时间：2012-10-15T16:02:50.690
> 
> 标签：java, swing, jtable, actionlistener, defaulttablemodel

当按钮添加时， 我正在尝试将数据从 a 获取`JTextField`到 a`JTable`

`ActionListener`：

```
public void actionPerformed(ActionEvent evt) {
    Object src = evt.getSource();
    if (src == AddBtn) {
        System.out.println("HELLOO");
        String nextRowId = Integer.toString(model.getRowCount());
        model.addRow(new Object[] { nextRowId, LatText.getText(),
                LongText.getText(), EvlText.getText() });

    } else if (src == NextBtn) {

    } else if (src == perviousBtn) {

    }
} 
```

表：

```
String columns[] = { "ID", "Name", "Age", "Gender" };
Object data[][] = { { "0", "Tom", new Integer(20), "Male" },
        { "1", "Tina", new Integer(18), "Female" },
        { "2", "Raj", new Integer(19), "Male" },
        { "3", "Tina", new Integer(18), "Female" },
        { "4", "Raj", new Integer(19), "Male" },
        { "5", "Tina", new Integer(18), "Female" }

};
DefaultTableModel model = new DefaultTableModel(data, columns); 
```

完整代码： http: [//pastebin.com/9R9QyXdw](http://pastebin.com/9R9QyXdw)？

单击添加时没有任何反应。

编辑

我已将其更正为：

```
 JTable dataTable = new JTable(model); 
```

但仍然没有添加数据。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:18:59.720

没有发生任何事情的原因是您更新了`TableModel`未在 any 上设置的a `JTable`。

你用

```
JTable table = new JTable(data, columns); 
```

构造表，而不是

```
JTable table = new JTable( model ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:18:26.683

我没有测试你的代码，但是当你创建你的`JTable`（从你的 pastebin 链接读取）时，你使用以下行：

`JTable table = new JTable(data, columns);`

您应该指定您的模型而不是原始数据，对模型所做的修改将显示在您的表格中：

`JTable table = new JTable (model);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T19:50:58.893

代码有两个问题。

第一个已经被指出`JTable table = new JTable(data, columns)`基本上是构建它自己的模型，所以当你尝试在动作监听器中添加一些你的模型时，它与表使用的模型不同。

另一种是你两次声明模型。

您将模型声明为类全局字段`DefaultTableModel model = new DefaultTableModel(data, columns)`，然后在您的方法中再次重新声明它`addComponents`......

```
 public void addComponentsToPane(final Container pane) {
            DefaultTableModel model = new DefaultTableModel(data, columns); 
```

所以，即使你声明你的表，`JTable table = new JTable(model)`它仍然会使用错误的模型..

按照描述更改表的声明并删除方法中的`DefaultTableModel`模型声明，`addComponentsToPane`它应该可以正常工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T16:34:06.200

当我查看您的代码时，您还没有使用要更新到表中的 TableModel。

如果您想通知您的 JTable 您的数据更改，请使用 tableModel.fireTableDataChanged()

请参考[http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html#fireTableDataChanged%28%29](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html#fireTableDataChanged%28%29)

在这里更新，现在检查 [http://pastebin.com/bb00PzjD](http://pastebin.com/bb00PzjD)

# php - 在生产服务器上部署 ZF 应用程序的问题

> ID：12899515
> 
> 赞同：0
> 
> 时间：2012-10-15T16:02:54.307
> 
> 标签：php, zend-framework, deployment

我正在尝试在远程生产服务器 (JustHost) 上设置我的第一个 ZF (zf 1.11) 应用程序。该应用程序在我的 WAMP 平台上的开发服务器上运行良好。我的问题是我不知道如何将应用程序部署到我的生产服务器。我不得不说，无论是在文档中还是在社区中，关于项目生命周期中如此重要的部分，关于该主题的信息很少，我感到很震惊。我只想将我的项目文件夹复制到我的服务器并让它工作，仅此而已！但是我应该把我的`zf`文件夹放在哪里，如何将我的应用程序指向 zf 文件夹，我还需要进行哪些其他配置更改？有人能帮帮我吗？

到目前为止，我已将该`zf`文件夹和我的项目文件夹复制到服务器的公共目录中。

我已将`.htaccess`应用程序环境设置为生产，并将服务器的数据库信息添加到`application.ini`文件的生产部分。

当我在浏览器中导航到我的项目文件夹时，我得到了文件夹内容的目录索引。当我导航到该`/public/index.php`文件时，我收到内部服务器错误 500。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:44:07.343

确保虚拟主机配置正确？

```
<VirtualHost *:80>
   DocumentRoot "path_name/public"
   ServerName domain.com

   # This should be omitted in the production environment
   SetEnv APPLICATION_ENV production

   <Directory "path_name/public">
       Options Indexes MultiViews FollowSymLinks
       AllowOverride All
       Order allow,deny
       Allow from all
   </Directory>

</VirtualHost> 
```

# python - 了解 z3 模型

> ID：12899521
> 
> 赞同：2
> 
> 时间：2012-10-15T16:03:06.340
> 
> 标签：python, z3

**Z3Py 片段**：

```
x = Int('x')
fun = Function('fun', IntSort(), IntSort(), IntSort())
phi = ForAll(x, (fun(x, x) != x)) 
print phi
solve(phi) 
```

**永久链接**：[http ://rise4fun.com/Z3Py/KZbR](http://rise4fun.com/Z3Py/KZbR)

**输出**：

```
∀x : fun(x, x) ≠ x
[elem!0 = 0,
 fun!6 = [(1, 1) → 2, else → 1],
 fun = [else → fun!6(ζ5(ν0), ζ5(ν1))],
 ζ5 = [1 → 1, else → 0]] 
```

**问题**：我试图了解 Z3 生成的模型。我有以下疑问。

1.  在z3生成的模型中，`fun`只有`else`部分。因此，乍一看，无论参数如何，似乎都有一个值。但仔细观察，它看起来像`v0`并且`v1`是 的形式参数`fun`。有什么约定吗？
2.  `elem!0`指的是哪个变量？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:34:18.947

Z3 生成的模型应该被视为纯函数程序。当我们要求 Z3 以 SMT 2.0 格式显示模型时，这一点变得很清楚。我们可以通过使用方法来实现`sexpr()`。这是您使用此方法的示例（[http://rise4fun.com/Z3Py/4Pw](http://rise4fun.com/Z3Py/4Pw)）：

```
x = Int('x')
fun = Function('fun', IntSort(), IntSort(), IntSort())
phi = ForAll(x, (fun(x, x) != x)) 
print phi
s = Solver()
s.add(phi)
print s.check()
print s.model().sexpr() 
```

的解释`fun`包含自由变量。你应该把它读成： `fun(v0, v1) = fun!6(k5(v0), k5(v1))`. 当模型以 SMT 2.0 格式显示时，这是明确的。当我编写 Python 漂亮的打印机时，我试图专注于无量词问题。“模型作为功能程序”的想法与无量词问题无关。将来我会尝试改进 Python 模型漂亮的打印机。该常数`elem!0`是 Z3 在求解过程中创建的辅助常数。最终并不真正需要（模型简化后）。我将改进模型“死代码”消除程序以消除这些不必要的信息。但是，模型是正确的。它确实满足量词。[您可以在http://rise4fun](http://rise4fun.com/Z3/tutorial/guide)找到有关 Z3 使用的编码的更多详细信息。，而辅助功能`k!5`是[本文](http://research.microsoft.com/en-us/um/people/leonardo/files/ci.pdf)介绍的“投影”功能。

# objective-c - 在不同的视图控制器中从纵向到横向，反之亦然

> ID：12899522
> 
> 赞同：0
> 
> 时间：2012-10-15T16:03:08.553
> 
> 标签：objective-c

如何在具有标签栏控制器和导航控制器的应用程序的不同视图控制器中进行纵向到横向，反之亦然......

我做了

```
- (void)viewWillAppear:(BOOL)animated
{
  [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];

 } 
```

当我想要 OrientationLandscapeRight 在视图中时

```
- (void)viewWillAppear:(BOOL)animated
{
   [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait];

} 
```

当我想要肖像时..

它的工作，但导航栏没有根据方向调整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:20:13.547

尝试使用..

```
 [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:20:53.343

您不应调用此方法，因为它是私有的，Apple 将拒绝您的应用程序，您将无法发布它：

> `orientation`
> 
> 返回设备的物理方向。（只读）
> 
> `@property(nonatomic, readonly) UIDeviceOrientation orientation`

如果你想为你的控制器设置特定的支持方向，你需要在其中实现几个方法：

来自 Apple Docs：[UIViewController 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

> 处理视图旋转 在 iOS 6 中，您的应用程序支持在应用程序的 Info.plist 文件中定义的界面方向。视图控制器可以覆盖supportedInterfaceOrientations 方法来限制支持的方向列表。一般情况下，系统只会在窗口的根视图控制器或呈现为填满整个屏幕的视图控制器上调用该方法；子视图控制器使用其父视图控制器为它们提供的窗口部分，并且不再直接参与有关支持哪些旋转的决策。应用程序的方向掩码和视图控制器的方向掩码的交集用于确定视图控制器可以旋转到哪些方向。
> 
> 你可以覆盖一个视图控制器的 preferredInterfaceOrientationForPresentation，该视图控制器旨在以特定方向全屏显示。
> 
> 在 iOS 5 和更早版本中，UIViewController 类仅以纵向模式显示视图。要支持其他方向，您必须重写 shouldAutorotateToInterfaceOrientation: 方法并为您的子类支持的任何方向返回 YES。如果您的视图的自动调整大小属性配置正确，那么您可能只需要这样做。但是，UIViewController 类为您提供了额外的钩子来根据需要实现额外的行为。通常，如果您的视图控制器打算用作子视图控制器，它应该支持所有界面方向。
> 
> 当可见视图控制器发生旋转时，将在旋转期间调用 willRotateToInterfaceOrientation:duration:、willAnimateRotationToInterfaceOrientation:duration: 和 didRotateFromInterfaceOrientation: 方法。viewWillLayoutSubviews 方法也会在视图被其父级调整大小和定位后调用。如果在方向更改发生时视图控制器不可见，则永远不会调用旋转方法。但是，viewWillLayoutSubviews 方法在视图变得可见时被调用。您对此方法的实现可以调用 statusBarOrientation 方法来确定设备方向。

# python - 如何使用 matplotlib 和 python 更改多线绘图的颜色？

> ID：12899525
> 
> 赞同：0
> 
> 时间：2012-10-15T16:03:14.643
> 
> 标签：python, dictionary, matplotlib

我正在使用字典用 python 和 matplotlib 绘制线条我无法弄清楚为什么我的线条的颜色没有改变

```
from datetime import datetime
import matplotlib.pyplot as plt

dico =  {'A01': [(u'11/10/12-08:00:01', 2.0), (u'11/10/12-08:10:00', 10.0), \
                 (u'11/10/12-08:20:01', 5.0), (u'11/10/12-08:30:01', 15.0), \
                 (u'11/10/12-08:40:00', 7.0), (u'11/10/12-08:50:01', 45.0)],
         'A02': [(u'11/10/12-08:00:01', 10.0), (u'11/10/12-08:10:00', 12.0), \
                 (u'11/10/12-08:20:01', 15.0), (u'11/10/12-08:30:01', 10.0), \
                 (u'11/10/12-08:40:00', 17.0), (u'11/10/12-08:50:01', 14.0)]}

x = []
y = []
lstPlot = []
plt.gca().set_color_cycle(["b", "g", "r", "c", "m", "y", "k"])
for key, values in dico.iteritems():
    for i in  sorted(values):
        # date sting to date obj
        dateObj = datetime.strptime(i[0], "%d/%m/%y-%H:%M:%S")
        line = dateObj, i[1]
        lstPlot.append(line)
    for i in sorted(lstPlot):
        x.append(i[0])
        y.append(i[1])
    plt.plot(x, y, label=key)

# plotting

plt.legend(loc='upper right')
plt.xlabel('Dates')
plt.ylabel("titre")
plt.title("Modbus")
plt.show() 
```

请注意，我在图例中有不同的颜色，但在情节中没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:15:37.417

它们*正在*发生变化，但您正在将一个与另一个重叠。这些线

```
x = []
y = []
lstPlot = [] 
```

需要*在*循环内。否则`lstPlot`只会增长。例如，`print lstPlot`在循环内添加会给出：

```
[(datetime.datetime(2012, 10, 11, 8, 0, 1), 10.0), (datetime.datetime(2012, 10, 11, 8, 10), 12.0), (datetime.datetime(2012, 10, 11, 8, 20, 1), 15.0), (datetime.datetime(2012, 10, 11, 8, 30, 1), 10.0), (datetime.datetime(2012, 10, 11, 8, 40), 17.0), (datetime.datetime(2012, 10, 11, 8, 50, 1), 14.0)]
[(datetime.datetime(2012, 10, 11, 8, 0, 1), 10.0), (datetime.datetime(2012, 10, 11, 8, 10), 12.0), (datetime.datetime(2012, 10, 11, 8, 20, 1), 15.0), (datetime.datetime(2012, 10, 11, 8, 30, 1), 10.0), (datetime.datetime(2012, 10, 11, 8, 40), 17.0), (datetime.datetime(2012, 10, 11, 8, 50, 1), 14.0), (datetime.datetime(2012, 10, 11, 8, 0, 1), 2.0), (datetime.datetime(2012, 10, 11, 8, 10), 10.0), (datetime.datetime(2012, 10, 11, 8, 20, 1), 5.0), (datetime.datetime(2012, 10, 11, 8, 30, 1), 15.0), (datetime.datetime(2012, 10, 11, 8, 40), 7.0), (datetime.datetime(2012, 10, 11, 8, 50, 1), 45.0)] 
```

（您可能需要滚动查看第二个列表比第一个列表长很多，但您应该注意到第一个值在两者中是相同的。）

所以你可以清除里面的列表，或者你可以稍微简化一下：

```
for key, values in dico.iteritems():
    points = [(datetime.strptime(i[0], "%d/%m/%y-%H:%M:%S"), i[1]) for i in values]
    points.sort()
    x, y = zip(*points)
    plt.plot(x, y, label=key) 
```

该代码，加上@bmu 的建议

```
plt.gcf().autofmt_xdate() 
```

自动使 x 轴看起来不错，产生

![固定图像](../Images/a7bbbef277adbd910e90b5c063ae097f.png)

[或者，您可能希望使用`get_xticklabels()`和 等方法`set_rotation`进行更精细的控制。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:16:12.497

尝试 ：

```
colors = ["b", "g", "r", "c", "m", "y", "k"]
for (key, values), c in zip(dico.iteritems(), colors):
    ...
    plt.plot(x, y, c, label=key) 
```

# python - 使用 Python 从语料库中提取句子

> ID：12899527
> 
> 赞同：1
> 
> 时间：2012-10-15T16:03:22.817
> 
> 标签：python, python-2.7

我正在尝试使用 Python 从文本中提取句子。文本中的每个单词都写在一行中，并带有与该单词相关的附加信息：

```
Mary Noun Name
loves Verb No-Name
John Noun Name
. Punct No-Name 
```

句子边界用空行标记。我想提取包含具有某些特定特征的单词的整个句子（例如带有名称的句子）。

到目前为止，我只成功地提取了感兴趣的单词，而不是整个句子。我`.readlines()`习惯逐行阅读文本。然后我遍历这些行并使用 re 和`.split('\t')`拆分行，以便每一行都由 3 个元素的列表表示。然后我将列表中的元素与所需的值匹配，并可以提取相关的单词，但我不知道如何提取整个句子..

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:40:25.107

您可以用空行分隔，将类型分成一组，然后使用它 - 一个未经测试的示例......

```
text="""Mary Noun Name
loves Verb No-Name
John Noun Name
. Punct No-Name

John Noun Name
loves Verb No-Name
Mary Noun Name
. Punct No-Name"""

from itertools import takewhile

sentences = []
split = iter(text.splitlines())
while True:
    sentence = list(takewhile(bool, split))
    if not sentence:
        break
    types = set(el.split()[1] for el in sentence)
    words = [el.split(' ', 1)[0] for el in sentence]
    sentences.append(
        {
        'sentence': sentence,
        'types': types,
        'words': words
        }
    )

print sum(1 for el in sentences if 'Noun' in el['types']), 'sentences contain Noun'
print sentences[0]['words'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:09:06.553

您可能希望将 Blender 或 Jon Clements 解决方案与存储“已解析”句子的腌制结果相结合，以便下次您可以加载该信息并更快地开始搜索。

如果您的句子列表不适合内存，则将单个句子信息按顺序存储在文件中，如果您使用二进制泡菜，则在每个泡菜句子之前存储一个长度指示符。

仅当您必须经常搜索并且解析需要大量时间（包含大量文本）时，这种额外的努力才值得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:14:34.607

我会将各个行解析为字典，您可以将其分组为由标点符号（或句点）分隔的列表。

```
sentences = []
columns = ('word', 'pos', 'type')

with open('file.txt', 'r') as handle:
    sentence = []

    for row in handle:
        chunks = row.split('\t')
        structure = dict(zip(columns, chunks))

        sentence.append(structure)

        if structure['pos'] == 'Punct':
            sentences.append(sentence)
            sentence = [] 
```

现在，`sentences`包含包含句子所有部分的列表（如果此代码有效）。

我会把它留给你来弄清楚如何做剩下的。`for`只需几个循环，就可以轻松找到目标句子。

要打印给定列表的句子，这样的事情应该让你开始：

```
print ' '.join((chunk['word'] for chunk in sentence)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T17:07:49.393

现有的答案假设语料库足够小，可以一次性读入内存，并构建句子的数据结构，然后进行过滤。如果不是这种情况（即使现在是，将来也可能不是），您需要做某种生成器解决方案。我会看一下类似的问题：[Python: How to loop through blocks of lines](https://stackoverflow.com/questions/3914454/python-how-to-loop-through-blocks-of-lines) and see if you can make it for you.

就个人而言，我认为人们通过强制使用单一工具来为自己做更多的工作。对于一个简单的 awk 过滤器，这个特殊的问题是现成的：

```
awk -v RS='\n\n' -v FS='\n' -v ORS='\n\n' -v OFS='\n' '/ Name/' 
```

当然，如果你要在 python 中做进一步的处理，这两点都不成立。

# javascript - 3D CSS3 风景的自动大小 - 计算 3D DIV 的像素大小？

> ID：12899528
> 
> 赞同：0
> 
> 时间：2012-10-15T16:03:27.733
> 
> 标签：javascript, html, css, 3d

我使用 CSS3、HTML5 和 Javascript 创建了一个 3d 风景（迷宫）。我想根据屏幕尺寸自动调整风景，所以它适合不同尺寸的屏幕。最好的方法是什么？有没有办法自动调整风景/屏幕的大小？

如果没有自动方法，那么我有这个问题：“在相机前”有一个大小为 WxH 的 DIV，我使用 translate3d(X,Y,Z) 定位，透视图为 P。我如何计算实际这个 DIV 在屏幕上的像素大小？

顺便说一句 - 我正在使用 Chrome

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:12:39.020

#1 - 如果你想缩放它，使用`scale3d`向上或向下缩放整个事物。测量屏幕尺寸并按您需要的任何比例缩放您的 div（例如，如果您有一个 800x800 的 div 并且屏幕为 1600x1200，则按 2 倍缩放）

#2 - getBoundingClientRect()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:53:39.077

以下代码可以解决问题。考虑到最初设计场景的窗口大小（1920*965），此代码获取父容器的当前大小，并将包含场景的 Div 相对于原始 1920*965 进行缩放。注意 - 它不会尝试对场景内的元素执行 3D 缩放，而是缩放包含整个场景的 div，而里面的内容会自动调整大小。

另请注意，随着缩放父容器将场景从屏幕中心移开，代码如何使用负坐标将场景位置移动到左侧和顶部，以便将 Div 放置在正确的位置。

```
function resizeWin() {
        wW = ourDiv.parentNode.offsetWidth;
        wH = ourDiv.parentNode.offsetHeight;
        var scaler=Math.min(wW/1920, wH/965); // original screen was designed in full HD Chrome
        var w=wW/scaler;
        var h=wH/scaler;
        var left=(w-scaler*w)/2;
        var top=(h-scaler*h)/2;

        var style = "width:"+w+"px; height:"+h+"px;"+allStyles("-webkit-transform:  translate(-"+left+"px,-"+top+"px) scale("+scaler+");");

        ourDiv.setAttribute("style", style);
        redrawScene();
    } 
```

# c# - 将 C# Unitest 结果导出到文本文件

> ID：12899531
> 
> 赞同：1
> 
> 时间：2012-10-15T16:03:34.833
> 
> 标签：c#, web-services, unit-testing, soap, automated-tests

我是 C# 测试的新手。我正在为 Web 服务测试编写单元测试。我添加了对 C# 单元测试解决方案的服务引用，并开始使用 Web 服务中的类进行测试。我还添加了一个 Excel 文件来提供单元测试值。

下面是一个关于我之前在做什么的例子

```
[DataSource("System.Data.Odbc"
 ,"Dsn=Excel Files;dbq=|DataDirectory|\\TestData.xlsx;defaultdir=C:\\TestData;driverid=1046;maxbuffersize=2048;pagetimeout=5"
 ,"Sheet1$"
 ,DataAccessMethod.Sequential)
 ,DeploymentItem("TestProject1\\TestData.xlsx")
 ,Owner("")
 ,Description("")
 ,TestMethod()]
public void test1()
{
    try
    {
        var Service = new Service.ServiceClient();
        var Cid = testContextInstance.DataRow["CId"].ToString();
        var MNumber = testContextInstance.DataRow["MNumber"].ToString();
        var VID = testContextInstance.DataRow["VID"].ToString();
        var isVisit = new Service.ISVisit()
        {
            CID = Cid,
            MNum = MNumber,
            VCode = VID
        };

    var first = Service.Medis(isVisit).Cast<Service.ISMedi>().FirstOrDefault();
    // Assert
    Assert.AreEqual("12345678", first.Proc.ProcID);
    }
    catch (Exception ex1)
    {
        if (ex1.InnerException != null)
            Debug.WriteLine(ex1.InnerException.Message);
        Assert.Fail(ex1.Message);
    }
} 
```

.Medis() `,`IsVisit` 是服务中的类。我正在使用 excel 表为 untitest 提供值。

![在此处输入图像描述](../Images/ebe3b442f6c5af043940e9cfe196dc13.png)

并且单位通过

![在此处输入图像描述](../Images/9429845ef5996cb510b8e8f6700fe16e.png)

现在的要求是将此测试结果按此顺序导出到 Txt 文件或 CSV 或 Excel 文件

测试 1：测试结果 + 持续时间 + 输出肥皂消息。

测试 2：测试结果 + 持续时间 + 输出肥皂消息。

测试 3：测试结果 + 持续时间 + 输出肥皂消息。

请帮我解决一下这个。我正在使用 Visual Studio 团队系统编写 unittests 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:34:12.970

有几个选项可用。

Visual Studio 为每个测试运行生成一个 XML 结果集（所有测试在一次执行中运行）。结果放置在解决方案根目录的 TestResults 文件夹中，文件扩展名为 TRX。测试运行将包含测试的持续时间和状态，但不包含 SOAP 响应。如果这足够，您可以使用简单的 XSLT 转换将 XML 转换为 CSV。或者，您可以直接从 Visual Studio 中将测试结果导出为 CSV——测试结果窗口有一个小图标，用于导入/导出测试结果。

如果您需要 SOAP 响应，Visual Studio 在测试运行程序中没有任何本机内容。最好的办法是在测试运行时附加到日志文件，尽管您记录的内容（包括测试持续时间）取决于您。

# java - JLabels 到 JFrame

> ID：12899535
> 
> 赞同：0
> 
> 时间：2012-10-15T16:03:42.187
> 
> 标签：java, swing

我是 JAVA 新手，需要有关以下代码的帮助。我写了两节课。在一个中，我声明了 JFrame，在另一个中声明了 JLabel。我想通过这种方法将标签添加到框架中，但出现错误。我应该做些什么改变才能让它发挥作用：

```
import java.awt.*;
import javax.swing.*;

public class test {

    public static void main (String[] args) {

        JLabel l1 = new JLabel("Label into Frame");
        Frame f1 = new Frame();
        f1.displayFrame.add(l1);
        f1.displayFrame();      
    }   
}

class Frame {

    void displayFrame() {

        JFrame frame = new JFrame("Test");
        frame.setVisible(true);
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:16:25.343

你不能像这样创建它。如果你想构建一个自定义框架类，你必须像这样定义它

```
public class MyFrame extends JFrame 
```

获取所有 JFrame 方法等。在你上面的代码`displayFrame`中，你调用了一个方法，然后你试图调用一个方法`add`，这是行不通的。为了使它工作（以最简单的形式）试试这个：

```
public static void main(String[] args) {

    JLabel l1 = new JLabel("Label into Frame");
    JFrame f1 = new JFrame();
    f1.setSize(100, 100);
    f1.add(l1);
    f1.setVisible(true);
} 
```

我建议您尝试阅读一些好的 Java 教程来了解基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:01:03.667

**-**`UI`将工作保持在`UI`线程上总是好的，并且`Non-UI`在线程上工作`Non-UI`。

**-**现在在 Java GUI 应用程序中，该`main()`方法**寿命不长**，在 中调度 GUI 的构建后`Event Dispatcher Thread`，它退出，现在它的 EDT 负责处理 GUI。

**- 不要直接将**放在`JLable`上`JFrame`，尝试在 上使用a `JPanel`，`JFrame`然后`JLable`在其上放置a。

**-**但为了**简单**起见，我**不会在这里使用**JPanel。

**例如：**

```
class MyFrame extends JFrame {

    JLabel l1;

    public MyFrame() {

        this.setSize(400,400);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setComponent();
        setHandling();

    }   

    public void setComponent(){

    l1 = new JLabel("Label into Frame");
    this.add(l1);

    }

    public void setHandling(){

      // Use this to handle the Events on the EventSources.
    }

    public static void main(String[] args){

       EventQueue.invokeLater(new Runnable(){

         MyFrame frame = new MyFrame("Test");
        frame.setVisible(true);

       });

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T19:16:00.637

方法 displayFrame 不返回任何内容

```
void displayFrame() {...} 
```

方法减速遵循*{accessibility} [type] [name({parameter {, parameter ...}})]的模式*

*可*访问性定义了谁可以访问该方法，包括`public`、、`protected`和`private`或`package-private`

*类型*是指此方法将返回的值的类型。一种特殊类型的`void`状态，该方法不会返回值

*Name*是方法的名称，这是您识别方法和访问它的方式

*Parameter(s)*是要传递给方法的任意数量的可选值。

有了这些信息，让我们仔细看看这个方法。

```
void displayFrame() {...} 
```

这就是说该方法是*包私有的*（这意味着该方法只能从同一个包中的 with 访问，但不能被子类扩展）并且不会返回任何内容。

```
f1.displayFrame.add(l1); 
```

所以当你调用这个方法时，Java 无法弄清楚如何应用`ad(...)`到任何东西，这是没有意义的。

更好的解决方案是提供*getter*方法来获取框架或从*displayFrame*方法返回框架。两者都有很好的论据，但我个人更喜欢*吸气剂*

```
public class test {

    public static void main (String[] args) {

        JLabel l1 = new JLabel("Label into Frame");
        Frame f1 = new Frame();
        JFRame myFrame = f1.getFrame();
        myFrame.add(l1);
        f1.displayFrame(); // there's actually no need for this 
    }   
}

class Frame {
    private JFrame frame = new JFrame("Test");

    public JFrame getFrame() {
        return frame;
    }

    void displayFrame() {
        frame.setVisible(true);
    }   
} 
```

我会花时间阅读[学习 Java 语言](http://docs.oracle.com/javase/tutorial/java/index.html)

# c# - linq .Any 与列表

> ID：12899537
> 
> 赞同：-3
> 
> 时间：2012-10-15T16:03:51.820
> 
> 标签：c#, linq

我有一个看起来像这样的表：

```
UserID | FruitID
  4    |    34
  4    |   4355
  4    |   652
  5    |   5677
  5    |    562
  4    |    562 
```

现在，我正在传递一个 UserID 和一个 FruitID，如下所示：

```
var IsAuthorized = MyDC.FruitTable
                       .Any(f => f.UserID == TheUserID && 
                                 f.FruitID == TheFruitID); 
```

这将返回一个布尔值。现在我想为 FruitID 列表写同样的东西：我传入一个 UserID 和几个 FruitID，我想要一个表示 . 的布尔值`"ALL the FruitIDs have a UserID == to the TheUserID"`。

> *请注意，如果列表仅包含一个与 FruitID == f.FruitID && f.UserID == UserID 不匹配的元素，则整个列表的返回值应为 false。*

如何重写查询以获取 FruitID 列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:07:12.663

留下您的示例代码无法编译的事实，我怀疑您想要类似的东西：

```
// Here fruitIDs is a List<int> for the "target" fruit IDs
var isAuthorized = MyDC.FruitTable
                       .Where(u => fruitIDs.Contains(u.FruitID))
                       .All(u => u.UserID == TheUserID); 
```

这将检查水果 ID 在给定列表中的每个条目是否*也*与指定的用户 ID 匹配。当然，还有其他的写法。

它*不会*检查原始集合中的每个条目是否具有有效的水果 ID。从这个问题中不清楚这是否是目标......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:07:09.220

使用 listVariable.Contains(...)

```
 MyDC.FruitTable
                   .Where(x => x.UserID == TheUserID)
                   .All(x => listOfFruitIds.Contains(x.FruitID)); 
```

# java - 如何删除neo4j图中的所有关系？

> ID：12899538
> 
> 赞同：22
> 
> 时间：2012-10-15T16:03:54.753
> 
> 标签：java, ruby-on-rails, ruby, neo4j, neography

我需要删除所有节点之间的所有关系。有没有办法删除neo4j图中的所有关系？请注意，我使用的是 ruby​​ 绑定 - `neography`gem。gem 的 wiki 中没有关于此的信息。我还尝试在 neo4j 文档中找到一种方法，但没有任何结果。

Neo4j 版本是 1.7.2。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-16T07:35:03.160

在密码中：

删除所有关系：

```
start r=relationship(*) delete r; 
```

在所有节点之间创建所有关系，我假设：

```
start n=node(*),m=node(*) create unique n-[r:RELTYPE]-m; 
```

但你宁愿不想有太多的顶点，因为它在低内存时崩溃（至少在我的情况下，我有 100 万个顶点和 1GB 内存）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-10-08T06:54:36.513

在 cypher3.5 中，`start`是`deprecated`.

您可以使用此密码删除所有关系

```
match ()-[r]->() delete r; 
```

# django - Django模板：在同一基础中使用多个块标签

> ID：12899541
> 
> 赞同：7
> 
> 时间：2012-10-15T16:04:15.313
> 
> 标签：django, django-templates

在更改所有模板之前，我想确保我已经正确理解了这一点。我的整体布局有一个 base.html。这有一个 {% 块内容 %}。我的每个内容页面都扩展了“base.html”并被块标签包围。这很好用。我的视图返回呈现的内容页面，它很好地放置在布局中。

现在我还在 menubar.html 中创建了一个菜单栏，除了所选页面/内容的颜色不同之外，每个页面的菜单都应该相同。所以它需要知道加载了什么内容。

我的 base.html 现在也有一个 {% block menubar %}

我即将打开我所有的内容模板并向其中添加以下内容：

```
{% include "menubar.html" %} 
```

然后，在 menubar.html 中，我将用块标签包围菜单。那是对的吗？我认为块系统的重点是可以通过 base.html 更多地控制事情，而无需更改我所有的模板。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T16:13:37.820

我建议只放入`{% include "menubar.html" %}`base.html。

要在菜单中突出显示当前页面，请使用以下内容：[https ://stackoverflow.com/a/477719/473285](https://stackoverflow.com/a/477719/473285)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T16:17:52.003

如果您的内容模板是从 base.html 扩展而来的，并且在`{% block menubar %}`外部，`{% block content %}`您不需要修改所有内容模板，只需修改 base.html

# php - php mvc 传递用户数据

> ID：12899543
> 
> 赞同：1
> 
> 时间：2012-10-15T16:04:29.937
> 
> 标签：php, model-view-controller

我正在使用个人 MVC 系统来创建博客。有用。现在我想提交用户评论。问题是，我不想在 AJAX 中提交用户 ID 和帖子 ID。这将启用错误的评论。我如何“记住”用户的会话并将其传递给服务器？

我的帖子是这样的：`var text = encodeURI($('#folderComment').val());`

```
var text = encodeURI($('#folderComment').val());
$.post(
        "<?= URL_MVC ?>/FolderComment/add/"+text, {},
        function(data){
            var content = data.split("##");
            var html = '<tr>';
            html += '<td>' + content[0] + '<br>' + content[2] + '</td>';
            html += '<td>' + content[1] + '</td>';
            html += '</tr>';
            $('#commentsTable').prepend(html);
        }); 
```

我必须发送用户的ID吗？因为在我使用的接收控制器中

```
$userid = isset($_SESSION['user']['fkuser']) ? $_SESSION['user']['fkuser'] : $defaultid; 
```

此参数在视图和模型上工作正常，但是，当我向控制器发送 AJAX 请求时，它不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:23:16.460

您可以简单地将经过身份验证的用户信息保存在 $_SESSION 中，并且可以在任何请求中访问它（包括 AJAX，考虑到您的会话 cookie 可用）。但是关于帖子 ID，故事有点不同，您可以在查看页面时将帖子 ID 保存在会话中，但如果用户同时打开多个帖子，评论会混淆，因为帖子 ID 值为每次“查看帖子”请求时都会更改。

我的建议是将表单中的帖子 ID 作为隐藏字段插入（如果需要，您可以对其进行加密，但我认为没有理由），将其与会话中的用户 ID 和 CSRF 令牌结合使用以确保请求不是伪造的。

# php - 为什么 isset() 总是在自定义对象上返回 FALSE

> ID：12899547
> 
> 赞同：3
> 
> 时间：2012-10-15T16:04:45.317
> 
> 标签：php

我无法理解这种行为：我的`isset()`支票总是在肯定有值的情况下返回**false ！**`property`

```
<?php

  class User {
    protected $userId; // always filled
    protected $userName; // always filled

    /**
     * Magic method for the getters.
     * 
     * @param type $property
     * @return \self|property
     */
    public function __get($property) {
        if (property_exists($this, $property)) {
            return $this->$property;
        } else {
            throw new Exception('property '.$property.' does not exist in '.__CLASS__.' class');
        }
    }

  }

?> 
```

当我使用以下内容从另一个类中检查此变量时：

```
isset($loggedUser->userName); // loggedUser is my instantiation of the User.php 
```

它回来`FALSE`了？？但是当我重载`__isset()`User.php 中的函数时，我会`TRUE`按预期返回：

```
public function __isset($name)
{
    return isset($this->$name);
} 
```

只是要清楚：

```
echo $loggedUser->name;   // result "Adis"
isset($loggedUser->name); // results in FALSE, but why? 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T16:06:53.790

`protected`属性仅在对象的方法中可见。它们隐藏在外部访问的视野之外。

* * *

```
class prot_text {
    protected $cannot_see_me;
    function see_me() {
       echo $this->cannot_see_me;
    }
}

$x = new prot_text();
echo $x->cannot_see_me; // does not work - accessing from "outside"
$x->see_me(); // works, accessing the attribute from "inside". 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T16:07:57.887

`$userName`是受保护的，这意味着你不能在类之外访问它，在这个例子中从你的`$loggedUser`初始化。您需要以下其中一项：
1）制作`public`
2）编写自定义方法
3）制作魔法（__isset）函数

编辑：在不可访问的对象属性上使用 isset() 时，如果声明，将调用 __isset() 重载方法。[isset() php 文档](http://php.net/manual/en/function.isset.php)

我希望这能解释它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T16:07:07.410

$userName 是受保护的，因此只能从定义它的类或任何扩展它的类内部访问它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T16:07:32.287

这是因为财产受到保护。不能在对象（或子对象）之外访问受保护的属性。重载函数是在类中定义的，因此可以正常工作。

这是 OOP 的一个特性：（[http://php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)）如果您想让它在任何地方都可以访问，请将属性定义为公共，否则将该特定功能包装在公共中功能。

# html - HTML 中的下斜引号（« 和 »）

> ID：12899548
> 
> 赞同：30
> 
> 时间：2012-10-15T16:05:00.840
> 
> 标签：html, encoding, quotations, quotation-marks

> **可能重复：**
> [unicode 或 HTML 是否有垂直双 guillemet（人字形）？](https://stackoverflow.com/questions/8125263/does-unicode-or-html-have-a-vertical-double-guillemet-chevron)

`&laquo`和`&raquo`（`«`和`»`分别）是否有向下的替代方案？

我试图在其他地方找到答案，但无济于事。我假设 css 旋转文本是唯一真正的答案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-15T16:26:06.617

对您的问题的简短回答是“不，没有”。

`&laquo`并且`&raquo`实际上并不打算用作方向箭头，尽管它们经常这样使用。

它们的实际用途是由它们的实体名称暗示的——它们应该是“斜引号”。

某些欧洲国家（尤其是法国）倾向于使用这些字符作为语音标记，而不是英语世界更常用的倒逗号样式引号，这就是这些字符的实际含义——请参阅[http： //en.wikipedia.org/wiki/Guillemet](http://en.wikipedia.org/wiki/Guillemet)了解更多信息。

鉴于此，它们没有任何向上和向下箭头变体也就不足为奇了。

随意将它们用作方向箭头（其他人都这样做，即使语义有问题），但不要期望它们具有您可能想要的所有变体，因为它们不是图形；它们是印刷字符。

我想如果你*真的*想要，你可以使用 CSS 将现有的左右箭头旋转 90 度。不过，我不建议将其作为一个好主意。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T16:07:22.653

不，这些引号没有垂直版本。一个好的选择可能是这些？⇐ ⇑ ⇒ ⇓

`&lArr; &uArr; &rArr; &dArr;`

否则，旋转确实是一个不错的选择。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T16:41:27.303

使用图标字体可能是另一个不错的选择。

这是一个流行的：http: [//fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)

您可能感兴趣的图标：http: [//fortawesome.github.com/Font-Awesome/#icon/icon-chevron-down](http://fortawesome.github.com/Font-Awesome/#icon/icon-chevron-down)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T16:09:51.620

我不认为Unicode中有这样的字符（HTML在这里无关）。

你打算用它们做什么？如果预期用途是用于箭头，您可以查看[此处](http://www.alanwood.net/unicode/arrows.html)（用于线头箭头）和[此处](http://www.alanwood.net/unicode/geometric_shapes.html)（用于可用作箭头的三角形等）。这些是可能对您有用的 Unicode 字符列表。

# c++ - 模板问题

> ID：12899551
> 
> 赞同：0
> 
> 时间：2012-10-15T16:05:27.517
> 
> 标签：c++

我非常需要一个列表类型来保存命名结构，而命名结构又具有任意数量的同一类型的成员，由指针表示。完整的项目代码使用 Qt（如果这很重要）。

所以我写了这个：

```
/* 
 * This should be used with T as a pointer type.
 * Code gets really incomprehensible if T* value is used as member.
 */
template <typename T>
struct parameter_t {
    QString name;
    int count;
    T value;
};

template <typename T>
class Parameters {
private:
    typedef struct parameter_t< T > content_t; // beautification

public:
    void addParam(const QString &name, T value, int count);
private:
    std::list< content_t >* params;
};

typedef Parameters<float*> floatParameters; // beautification 
```

对我来说似乎不仅仅是合法的，因为实际的实现确实可以编译无错误的东西。

现在，从另一个位置，我正在调用以下命令：

```
floatParameters* params = new floatParameters();
params->addParam("Ente", (float*) x, 1); 
```

这会导致编译器错误，包括：

```
In function `...': HelperClasses.cc:(.text+0x225): undefined reference to Parameters<float*>::addParam(QString const&, float*, int)' 
```

如您所见，我正在创建floatParameters，所以它是Parameters。换句话说， addParam 成员应该转换为

```
void addParam(const QString &name, float* value, int count); 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:13:21.237

模板函数应该在头文件中定义，而不是在源文件中。模板的实际代码在使用该函数之前不会构建，因此该定义必须在该点可用 - 否则编译器假定链接器稍后将能够找到它。

# javascript - JavaScript 中的函数“.test”。测试变量

> ID：12899555
> 
> 赞同：2
> 
> 时间：2012-10-15T16:05:35.847
> 
> 标签：javascript, regex, testing

我在变量中搜索变量时遇到问题。我拥有的代码是：

```
var str = "13, 12, 12, 12";

//Look for string = 13 in str.
var string = 13;

var patt = "/" + string + "/g";
var result = patt.test(str); 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:06:55.693

采用

```
var patt = new RegExp(string, 'g'); 
```

建立你的模式。该`/something/g`构造不能用于动态模式。

请参阅[MDN 关于正则表达式的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T16:09:27.520

我建议使用`indexOf`如下功能：

```
var str="13, 12, 12, 12";
var string= "13";
var result = str.indexOf(string)>=0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:40:03.060

如果您试图获得`indexOf`13 in 的第一个值`str`，我会执行以下操作：

```
var str = "13, 12, 12, 12";
var string = "13";
var result = str.match(/\d{1,}/g).indexOf(string); //returns 0 
```

仅当`str`值为 13 时才会匹配。例如，131 不会像您当前的代码那样匹配。如果您尝试测试 13 中是否存在值`str`，我会执行以下操作：

```
var str = "13, 12, 12, 12";
var string = "13";
var result = (str.match(/\d{1,}/g).indexOf(string) !== -1); //Returns true 
```

# c++ - 为什么顺序很重要？

> ID：12899559
> 
> 赞同：1
> 
> 时间：2012-10-15T16:05:54.277
> 
> 标签：c++

为什么当我放入时`cin.clear()`程序`cin.ignore()`完美运行，例如：我放入`chars`并且程序没有错误。

但是当我把它`cin.ignore()`放在第一位时`cin.clear()`，程序不会停止发送错误信号。

这是如何运作的？

不应该删除输入并`fail flag`取消设置吗？

```
#include <iostream>

using namespace std;

class time
{
private:
int hours;

public:
void getime()
{
do
   {
   cout << "Enter hours: ";
   cin >> hours;
   if ( hours < 0 || hours > 23 || cin.fail()  )
   {
       cin.clear();
       cin.ignore(10,'\n');
       cerr << "invalid time, minutes must be between 0 and 59 " << endl;

   }
   }while(hours<0 || hours>23);
}
   };

int main()
{
    time asd;
    asd.getime();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T16:15:23.657

`cin.clear(); cin.ignore(10,'\n');`清除流的错误标志以使其再次可读，然后尝试跳过最多 10 个字符到行尾。

`cin.ignore(10,'\n'); cin.clear();`首先尝试跳过最多 10 个字符到行尾（如果流处于错误状态，这将失败并且不执行任何操作），然后清除流的错误标志以使其再次可读。然后你绕过循环并再次尝试读取导致它上次失败的格式错误的数据。

如果问题是，“为什么我不能用它`ignore`来丢弃处于错误状态的流中的数据”，那么，呃，你就是不能。流的设计使用方式是它们进入错误状态并坐在那里什么都不做，直到您知道如何修复它（并且`clear()`他们说您忽略了错误）或者放弃并退出。

# php - 无法将“动画按钮”链接到 php 文件以上传文件

> ID：12899560
> 
> 赞同：0
> 
> 时间：2012-10-15T16:05:55.590
> 
> 标签：php, html

好的。所以基本上我正在尝试通过表单中的上传按钮上传文件。我的代码运行良好，直到我决定让我的上传按钮有点“时尚”。傻我。

我的 php 文件中的 $_POST 查询无法识别该动画按钮。我试图在 POST 查询中链接该动画按钮的类名，但似乎没有任何效果。

这是我的 html 表单代码，其中包含我的动画按钮：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data" >
<label for="file" style=" font-weight:normal;  font-family: Tahoma;   font-size:20px; "></br></br></br>Upload the list of Teaching Assistants here:</label>
<input  type="file" name="file" id="file" /> 
    <!--<input type ="submit"  name="submit" value="Upload" />  This button is working perfectly-->

<br />

    <div  class="button-wrapper" method="post" enctype="multipart/form-data" >
     <a href="upload_file.php"  class="a-btn">
    <span class="a-btn-text">Upload </span> 
        <span class="a-btn-slide-text">FILE!</span>
    <span class="a-btn-icon-right"><span></span></span>
                </a>

            </div>
    </form> 
```

这是我的php代码：

```
<?php
session_start();

include "connect1.php";

if ($_POST["submit"])
{
if ($_SESSION["name"])
{
    $name = $_FILES["file"]["name"];
    $type = $_FILES["file"]["type"];
    $size = $_FILES["file"]["size"];
    $tmp_name = $_FILES["file"]["tmp_name"];
    $error = $_FILES["file"]["error"];

    if($error > 0)
    {
        echo "Error!".$error;
    }
    else
    {
        if (file_exists("upload/".$name))
        {
            echo $name." already exists";
        }
        else
        {
            $location = "upload/".$name;
            move_uploaded_file($tmp_name,$location);
            $user = $_SESSION["name"];
            $sqlcode = mysql_query("INSERT INTO upload (id,user,location) VALUES ('','$user','$location')");
            echo "<a href='$location'>Click here to view the file </a>";
        }
    }
}
else
{
    echo "Please Sign In";
}
}
else
{
echo "<a href='index.php'>";
} 
```

收到此错误：

注意：未定义的索引：在第 7 行的 C:\xampp\htdocs\smartalloc\upload_file.php 中提交基本上 - 他要求我为我的 $_POST 查询提供一个类型，但没有任何效果。

任何帮助将非常感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:35:05.563

我认为问题在于您现在使用的是链接而不是按钮，因此没有发生 POST 事件。

尝试将动画按钮更改回实际按钮并使用 CSS 设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:49:43.983

为了让表单提交和发送来自您输入的所有信息，您需要将提交按钮作为能够提交表单的适当表单元素。

您不能只是制作一个花哨的链接或`<span>`或`<div>`或其他任何东西，而只是期望表单知道您希望该元素为您提交表单。您需要做的是保留提交按钮：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
    <label for="file">Upload the list of Teaching Assistants here:</label>
    <input type="file" name="file" id="file" />
    <input type="submit" value="Submit" />
</form> 
```

相反，使用 CSS 设置样式。有很多选择，您可以制作一个非常漂亮的按钮。请参阅这些教程中的任何一个作为示例（或者只是谷歌*“提交按钮 CSS”*以获取更多信息）。

[http://speckyboy.com/2009/05/27/22-css-button-styling-tutorials-and-techniques/](http://speckyboy.com/2009/05/27/22-css-button-styling-tutorials-and-techniques/)

其次，我看到你已经尝试过这个：

```
<div  class="button-wrapper" method="post" enctype="multipart/form-data" > 
```

那不是有效的 HTML。您不能将任何元素（在本例中为 div）制作成表单。和属性只能在标签`method`上。`enctype``<form>`

# mysql - Symfony2，FOSUserBundle - 获取用户数据不会关闭连接

> ID：12899561
> 
> 赞同：1
> 
> 时间：2012-10-15T16:06:05.757
> 
> 标签：mysql, symfony, doctrine, fosuserbundle

FOSUserBundle 在每个请求上获取用户数据。

问题是每次获取数据后它都会打开 mysql 连接。教义不会关闭连接。所以过了一会儿，我得到了 1000 多个打开的 mysql 连接。

# javascript - 黑莓网络导航问题

> ID：12899564
> 
> 赞同：0
> 
> 时间：2012-10-15T16:06:12.997
> 
> 标签：javascript, html, cordova, blackberry, blackberry-webworks

我有一个 index.html 文件，其中包含几个以这种方式重定向到其他页面的 onclick 事件处理程序：

```
onclick="window.location='page2.html';" 
```

我正在处理后退按钮

```
blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK, function() { 
        window.history.go(-1);
        return false;
    }); 
```

因为否则应用程序会在 OS 6.0 上退出（在 5.0 中不需要它）

当我从 page2.html 返回 index.html 时，index.html 中的所有 onclick 处理程序都可以工作，除了重定向到我刚刚来自的页面（在本例中为 page2.html）的处理程序。我尝试为 onclick 处理程序使用单独的函数，发现它确实被触发了，但它里面的 window.location 函数没有被执行。

奇怪的是，window.location 函数在用触摸屏点击时被执行，而不是用触控板，而且仅在 6.0 中。在 5.0 中它工作正常。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:21:06.287

您能否尝试将您的 onclick 更改为类似的内容（出于调试目的）

onclick=" 尝试 { window.location='page2.html'; } catch(e) { alert('error: ' + e); } "

如果发生运行时错误，那么它应该提醒您。

在旁注中，我有点担心更改应用程序中的页面/内容的技术。如果您没有正确实现这一点，您可能会遇到内存问题。您是否考虑过使用任何处理加载/卸载页面片段的框架？

查看[bbUI.js](https://github.com/blackberry/bbUI.js)是如何做到这一点的。

“bbUI 工具包以针对目标操作系统最优化的方式构建应用程序的 UI。它遵循将屏幕作为 HTML 片段加载到其中的单个网页的方法。每个屏幕都是其自己的 HTML 片段文件。然后，该工具包使用 AJAX 从堆栈中推送和弹出屏幕。工具包管理屏幕堆栈和加载内容。这确保了设备内存的最佳使用。

# c# - 如何使用记事本打开嵌入的字符串资源？

> ID：12899567
> 
> 赞同：3
> 
> 时间：2012-10-15T16:06:16.770
> 
> 标签：c#, .net, embedded-resource, shellexecute

我在 Resources 中添加了 help.txt 文件作为文本文件，并且这样做了：

```
private void helpButton_Click(object sender, MouseEventArgs e)
{
    System.Diagnostics.Process.Start(myProject.Properties.Resources.help);
} 
```

它没有用，然后我尝试了这种方式：

```
private void helpButton_Click(object sender, MouseEventArgs e)
{
    System.Diagnostics.Process.Start(@"help.txt");
} 
```

它也不起作用，但是这样起作用：

```
private void helpButton_Click(object sender, MouseEventArgs e)
    {
        System.Diagnostics.Process.Start(@"C:\Projects\CourceWork\Resources\help.txt");
    } 
```

问题是我不想处理这个硬核定义的路径，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:14:38.680

您似乎想使用与`.txt`文件关联的默认程序（通常是记事本）打开嵌入式资源。不幸的是，记事本无法读取嵌入式资源。因此，您需要提取资源并将其保存为磁盘上的文件，然后使用该文件打开记事本。

```
var helpFile = Path.Combine(Path.GetTempPath(), "help.txt");
File.WriteAllText(helpFile, myProject.Properties.Resources.help);
Process.Start(helpFile); 
```

或者，您可以创建自己的`Form`显示文本，在我看来这将是一个更好的解决方案（除非您的帮助文件不是很容易显示，例如 PDF 文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:28:45.543

如果您想在默认文本编辑器中从代码中打开 .txt 文件，那么您应该首先重新考虑将其放在资源中，但将其放在项目的同一目录或易于检索的目录中，例如我的文件。

# websphere - WebSphere Commerce OpenLaszlo API 扩展类

> ID：12899570
> 
> 赞同：0
> 
> 时间：2012-10-15T16:06:29.763
> 
> 标签：websphere, openlaszlo, commerce

我是 Open Laszlo API for WebSphere Commerce 的新手。所以我需要一条建议。我有一个名为 wcfBusinessObjectEditor 的受限文件。在这堂课中，我想改变一些小部件（比如说一种颜色）。我知道这里禁止更改某些内容，因此我将此文件复制为 wcfBusinessObjectEditorCustom 从受限文件夹上一级。我在这里进行更改。但现在我不知道如何让事情发生。有人可以帮我弄这个吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:31:48.290

我会与 WCS 专家交谈。作为 IBM 软件支持协议的一部分，您可以打开 PMR 并询问执行上述操作的最佳方法是什么。另外，我假设您已经看过并完成了 Open Laszlo WCS 教程，对吧？ [http://publib.boulder.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.management-center_customization.doc/tutorial/ttfmcmain.htm](http://publib.boulder.ibm.com/infocenter/wchelp/v7r0m0/topic/com.ibm.commerce.management-center_customization.doc/tutorial/ttfmcmain.htm)

# java - jparsec中的混乱

> ID：12899575
> 
> 赞同：6
> 
> 时间：2012-10-15T16:06:40.277
> 
> 标签：java, jparsec

我正在尝试使用 jparsec 来定义和利用我相当简单的语法，但我完全不知道如何去做。在这一点上我不知道是我对问题空间的理解不足，还是 jparsec 的稀疏和无信息文档。或两者。

我有一个语法是这样的：

```
foo='abc' AND bar<>'def' OR (biz IN ['a', 'b', 'c'] AND NOT baz = 'foo') 
```

所以你可以看到它支持诸如`AND`, `OR`, `NOT`, `IN`, `=`,之类的运算符`<>`。它还支持任意嵌套的括号来指示优先级。

我认为我在标记化方面已经取得了相当大的进展。这是我所拥有的：

```
public final class NewParser {
    // lexing
    private static final Terminals OPERATORS = Terminals.operators("=", "OR", "AND", "NOT", "(", ")", "IN", "[", "]", ",", "<>");
    private static final Parser<?> WHITESPACE = Scanners.WHITESPACES;
    private static final Parser<?> FIELD_NAME_TOKENIZER = Terminals.Identifier.TOKENIZER;
    private static final Parser<?> QUOTED_STRING_TOKENIZER = Terminals.StringLiteral.SINGLE_QUOTE_TOKENIZER.or(Terminals.StringLiteral.DOUBLE_QUOTE_TOKENIZER);
    private static final Parser<?> IGNORED = Parsers.or(Scanners.WHITESPACES).skipMany();
    private static final Parser<?> TOKENIZER = Parsers.or(OPERATORS.tokenizer(), WHITESPACE, FIELD_NAME_TOKENIZER, QUOTED_STRING_TOKENIZER).many();

    @Test
    public void test_tokenizer() {
        Object result = TOKENIZER.parse("foo='abc' AND bar<>'def' OR (biz IN ['a', 'b', 'c'] AND NOT baz = 'foo')");
        Assert.assertEquals("[foo, =, abc, null, AND, null, bar, <>, def, null, OR, null, (, biz, null, IN, null, [, a, ,, null, b, ,, null, c, ], null, AND, null, NOT, null, baz, null, =, null, foo, )]", result.toString());
    }
} 
```

`test_tokenizer`通过，所以我*认为*它工作正常。

现在，我已经有了一个表示语法的类型层次结构。例如，我有名为`Node`, `BinaryNode`, `FieldNode`,`LogicalAndNode`等的类`ConstantNode`。而我想要做的是创建一个`Parser`接受我的令牌并吐出一个`Node`. 这就是我一直卡住的地方。

我以为我会从像这样非常简单的事情开始：

```
private static Parser<FieldNode> fieldNodeParser =
    Parsers.sequence(FIELD_NAME_TOKENIZER)
    .map(new Map<Object, FieldNode>() {
        @Override
        public FieldNode map(Object from) {
            Fragment fragment = (Fragment)from;
            return new FieldNode(fragment.text());
        }
    }); 
```

我以为我可以做到这一点：

```
public static Parser<Node> parser = fieldNodeParser.from(TOKENIZER); 
```

但这给了我一个编译错误：

```
The method from(Parser<? extends Collection<Token>>) in the type Parser<FieldNode> is not applicable for the arguments (Parser<capture#6-of ?>) 
```

所以看起来我的泛型在某个地方被scewed，但我不知道在哪里或如何解决这个问题。我什至不确定我是否会以正确的方式处理这件事。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:30:31.057

您正在混合两个不同级别的“解析器”：字符串级别的解析器。扫描仪或词法分析器，以及令牌级解析器。这就是 JParsec 如何实现词法分析和句法分析的传统分离。

为了使您的代码编译干净，您可以`.cast()`在解析器定义的末尾添加对方法的调用，但这不会解决您的问题，因为您将遇到的下一个错误将类似于`cannot run a character-level parser at token level`. 这个问题来自于`.from()`定义你的顶级解析器，它隐式地设置了两个世界之间的边界。

这是您的解析器的工作实现（和单元测试）：

```
public class SampleTest {

private static Parser<FieldNode> fieldNodeParser = Parsers.sequence(Terminals.fragment(Tokens.Tag.IDENTIFIER).map(new Map<String, FieldNode>() {
            @Override
            public FieldNode map(String from) {
                String fragment = from;
                return new FieldNode(fragment);
            }
        })).cast();

public static Parser<FieldNode> parser = fieldNodeParser.from(NewParser.TOKENIZER, Scanners.WHITESPACES);

@Test
public void test_tokenizer() {
    Object result = Parsers.or(NewParser.TOKENIZER, Scanners.WHITESPACES.cast()).many().parse("foo='abc' AND bar<>'def' OR (biz IN ['a', 'b', 'c'] AND NOT baz = 'foo')");
    Assert.assertEquals("[foo, =, abc, null, AND, null, bar, <>, def, null, OR, null, (, biz, null, IN, null, [, a, ,, null, b, ,, null, c, ], null, AND, null, NOT, null, baz, null, =, null, foo, )]", result.toString());
}

@Test
public void test_parser() throws Exception {
    FieldNode foo = parser.parse("foo");
    assertEquals(foo.text, "foo");
}

public static final class NewParser {
    // lexing
    static final Terminals OPERATORS = Terminals.operators("=", "OR", "AND", "NOT", "(", ")", "IN", "[", "]", ",", "<>");
    static final Parser<String> FIELD_NAME_TOKENIZER = Terminals.Identifier.TOKENIZER.source();
    static final Parser<?> QUOTED_STRING_TOKENIZER = Terminals.StringLiteral.SINGLE_QUOTE_TOKENIZER.or(Terminals.StringLiteral.DOUBLE_QUOTE_TOKENIZER);
    static final Terminals TERMINALS = Terminals.caseSensitive(new String[] { "=", "(", ")", "[", "]", ",", "<>" }, new String[] { "OR", "AND", "NOT", "IN" });
    static final Parser<?> TOKENIZER = Parsers.or(TERMINALS.tokenizer(), QUOTED_STRING_TOKENIZER);
}

private static class FieldNode {
    final String text;

    public FieldNode(String text) {

        this.text = text;
    }
} 
```

}

我改变的是：

*   我使用该`Terminals.caseSensitive`方法仅为终端（关键字、运算符和标识符）创建词法分析器。使用的标识符词法分析器隐含地由 jParsec 本地提供（例如`Terminals.IDENTIFIER`），
*   我使用`.from()`带有 TOKENIZER 和`WHITESPACES`分隔符的方法，
*   `fieldNodeParser`用于`Terminals.fragment(...)`解析*标记*而不是字符。

希望有帮助，阿诺

# iphone - [[NSMutableArray alloc]init] 导致崩溃

> ID：12899579
> 
> 赞同：0
> 
> 时间：2012-10-15T16:06:52.130
> 
> 标签：iphone, objective-c

我有以下课程：

```
#import "SharedData.h"
static int selectedCountryIndex;
static NSMutableArray *imageDataObjectsArray;
@implementation SharedData
+(void)insertIntoImageDataObjectsArray:(ImageData *)imageData:(int)index{
    if (!imageDataObjectsArray)
        **imageDataObjectsArray = [[NSMutableArray alloc]init ];**

    [imageDataObjectsArray insertObject:imageData atIndex:index];
}
+(ImageData *)getFromImageDataObjectsArray:(int)index{
    return [imageDataObjectsArray objectAtIndex:index];
}
+(void)setSelectedCountryIndex:(int)selectedCountryIndexArg{
    selectedCountryIndex = selectedCountryIndexArg;
}
+(int)getSelectedCountryIndex{
    return selectedCountryIndex;
}
@end 
```

此类仅用于接受来自一个视图的数据，然后允许另一个视图获取该数据。但是，无论何时调用 insertIntoImageDataObjectsArray 方法，标有星号的行都会导致“EXC_BAD_ACCESS”崩溃。这是对该方法的调用：

```
[SharedData insertIntoImageDataObjectsArray:imageDataObject :[result doubleValue]-1]; 
```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:15:50.643

我希望这条线崩溃了：

```
[imageDataObjectsArray insertObject:imageData atIndex:index]; 
```

而且我预计它会崩溃，因为您试图在大于数组的索引处插入。

```
0 => "value1",
1 => "value2" 
```

`[imageDataObjectsArray insertObject:@"value3" atIndex:1];`会成功并产生

```
0 => "value1",
1 => "value3",
2 => "value2" 
```

随后调用`[imageDataObjectsArray insertObject:@"value4" atIndex:5];`将失败，因为索引 5 > 最大索引 (2)

或者正如评论者指出的那样，**负数作为索引也是无效的**

# compilation - CMake：如何在不重新编译源代码的情况下构建共享库和静态库

> ID：12899582
> 
> 赞同：12
> 
> 时间：2012-10-15T16:06:59.623
> 
> 标签：compilation, cmake

我想构建同一个库的静态和共享版本，如所述[是否可以让 CMake 构建同一个库的静态和共享版本？](https://stackoverflow.com/questions/2152077/is-it-possible-to-get-cmake-to-build-both-a-static-and-shared-version-of-the-sam)

但是，源代码编译两次，每个版本编译一次，这不是必需的。有没有办法避免这种情况？

目前我有：

```
add_library(${LIB} SHARED ${${LIB}_srcs})

add_library(${LIB}_static STATIC ${${LIB}_srcs}) 
```

为了只需要编译一次，我需要更改什么？供参考。我有相同的编译器标志和定义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-08T13:15:29.490

从同一组目标文件创建共享/静态库版本是[不可行的，也不推荐](https://stackoverflow.com/q/813980/427158)- 至少在许多平台上。

链接到共享库的目标文件必须编译为与[位置无关的代码](http://en.wikipedia.org/wiki/Position-independent_code)（`-fpic`/`-FPIC`在 Linux/Solaris 等上） - 而您的可执行和静态库（通常）不包含与位置无关的代码。另一方面，共享库由于间接而在共享代码页和运行时开销之间进行权衡。由于静态库和二进制文件不需要这些间接，因此与位置无关的代码只提供了这些间接的缺点。因此，如果要创建共享库版本和静态库版本，则需要创建两组不同的目标文件（一组与位置无关，另一组相反）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T01:31:07.713

从 CMake 2.8.8 开始，您可以使用 Object Library：[CMake：reuse object files built for a lib into another lib target](https://stackoverflow.com/questions/5091583/cmake-reuse-object-files-built-for-a-lib-into-another-lib-target)。

另请参阅[http://www.cmake.org/Wiki/CMake/Tutorials/Object_Library](http://www.cmake.org/Wiki/CMake/Tutorials/Object_Library)

# android - 在应用程序启动时下载许多应用程序资源

> ID：12899588
> 
> 赞同：0
> 
> 时间：2012-10-15T16:07:25.173
> 
> 标签：android, ios

我的任务是准备在 iOs 和 Android 上运行的应用程序。应用程序将显示由文本和图像组成的数据。所有这些数据都必须在首次应用程序启动时下载。我的第一个想法是将所有图像作为 CDATA 放在 XML 文件中并以 base64 编码，但这可能会占用大量空间，所以我的问题是：

我是否应该将所有图像连接到一个文件中（如果是，那么如何），下载此文件并在我的应用程序中“提取”（如何？）这些图像？或者也许我应该下载许多小图像，因为这不是问题并且这样做的正确方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:10:15.110

您可以使用许多选项：

1.  将图像与您的应用程序捆绑在一起

    看起来你不想那样。

2.  下载所有图像

    使用 AsyncTask 避免不响应主 UI 线程并避免在主线程上使用网络。

3.  将所有图像下载为 zip 文件

    和以前一样，但只有一个 zip 文件（你可以显示一个进度条）。

    然后用平台的工具解压。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:53:42.193

我创建了一个目录层次结构并将我的图像放在那里，每个图像和 xml 都是一个单独的文件。我的应用程序在启动时下载图像和 xml 文件，这很有效。

# javascript - 如何使用经典 ASP 保存画布图像？

> ID：12899590
> 
> 赞同：4
> 
> 时间：2012-10-15T16:07:28.730
> 
> 标签：javascript, asp-classic, base64, html5-canvas

我有点卡在这里。我知道我可以使用 canvas.toDataURL 生成一个 base64 编码的字符串，以传递给我服务器上的经典 ASP 页面。但是我似乎找不到答案的问题是如何处理这些数据，以便我可以将它保存在我的服务器上的某个地方。

因此，使用我的 HTML 页面上的这段代码，我提取了画布数据（我从 StackOverflow 的另一篇文章中提取了这个数据）：

```
var dataURL = renderedCanvas.toDataURL("image/png");    
dataURL = dataURL.replace('data:image/png;base64,', '');

var areturn = $.ajax({
  url: "http://127.0.0.1/mySite/saveImage.asp",
  type: "POST",
  data: '{ "imageData" : "' + dataURL + '" }',
  dataType: "json",
  beforeSend: function(x) {
      x.overrideMimeType("application/j-son;charset=UTF-8");
  }
}).done(function(result) {
    console.log("Success Done!\n" + result);
}).always(function(data) {
    console.log("Always:\n" + data.responseText);
}); 
```

但是我现在不清楚一旦我在服务器端如何处理数据......我可以拉 Request.Form 元素，但我似乎找不到一个好的方法来解码它，或者甚至将其输出为二进制文件...我想我听说经典的 ASP 不擅长进行 base64 解码，在另一个测试中我确实找到了一个可以进行 base64 解码的函数，但我不知道如果它真的有效，但它确实需要很长时间才能运行。我还在这里找到了这个链接：[base64 image decoder for ASP classic](https://stackoverflow.com/questions/4920416/base64-image-decoder-for-asp-classic)，但我想这是微软不推荐使用的 32 位组件......我想我正在向社区寻求关于保存 html5 画布的建议图像到服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T23:31:46.557

您可以使用 XML 元素指定`bin.base64`通过`DomDocument`实例创建的数据类型来编码/解码 Base64 数据。
然后您可以使用`Stream`对象将获得的二进制文件保存到磁盘。
这两个库都支持 64 位。假设您发送的内容将在服务器端的 Request 集合（没有 json 的经典 post 方法等）中可用，下面的代码可以解决问题，或者在最坏的情况下，我相信这会给您带来洞察力。

**保存图像.asp**

```
Function Base64Data2Stream(sData)
    Set Base64Data2Stream = Server.CreateObject("Adodb.Stream")
        Base64Data2Stream.Type = 1 'adTypeBinary
        Base64Data2Stream.Open
    With Server.CreateObject("MSXML2.DomDocument.6.0").createElement("b64")
        .dataType = "bin.base64"
        .text = sData
        Base64Data2Stream.Write .nodeTypedValue 'write bytes of decoded base64 to stream
        Base64Data2Stream.Position = 0
    End With
End Function

Dim CanvasStream
Set CanvasStream = Base64Data2Stream(Request.Form("imageData"))

'Write binary to Response Stream
'Response.BinaryWrite CanvasStream.Read

'Write binary to File
CanvasStream.SaveToFile Server.Mappath("imgFileFromCanvas.png"), 2 'adSaveCreateOverWrite 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T02:02:57.910

只是想我会分享一个解决方案。

```
$(document).ready(function(){
    getBase64FromImageUrl('test5px.png');

            function getBase64FromImageUrl(URL) {
                var img = new Image();
                img.src = URL;
                img.onload = function () {          
                var canvas = document.createElement("canvas");
                canvas.width =this.width;
                canvas.height =this.height;         
                var ctx = canvas.getContext("2d");
                ctx.drawImage(this, 0, 0);          
                var dataURL = canvas.toDataURL("image/png");            
                //alert(  dataURL.replace(/^data:image\/(png|jpg);base64,/, ""));
                saveImageData(dataURL.replace(/^data:image\/(png|jpg);base64,/, ""));
                }
            }

            function saveImageData (image_data) {
                $.post("saveImage.asp",
                {imageData:image_data,submit:true})
                .done(function(data, textStatus, jqXHR) 
                    {
                    alert(data);             
                    }).fail(function(jqXHR, textStatus, errorThrown) 
                {
                    alert(textStatus);
                });
 }); 
```

在 HTML 中

```
<img id="test" src="http://someDomain.com/img/test5px.png"> 
```

我实际上是从网络摄像头 canvas.toDataURL 获取图像数据作为快照，但它也适用于页面上的 img 标签

在 saveImage.asp 中

```
<%@ Language=VBScript %>
<% Option Explicit %>
<%

response.write(request("imageData"))

Function Base64Data2Stream(sData)
    Set Base64Data2Stream = Server.CreateObject("Adodb.Stream")
        Base64Data2Stream.Type = 1 'adTypeBinary
        Base64Data2Stream.Open
    With Server.CreateObject("MSXML2.DomDocument.6.0").createElement("b64")
        .dataType = "bin.base64"
        .text = sData
        Base64Data2Stream.Write .nodeTypedValue 'write bytes of decoded base64 to stream
        Base64Data2Stream.Position = 0
    End With
End Function

Dim CanvasStream
Set CanvasStream = Base64Data2Stream(Request.Form("imageData"))

'Write binary to Response Stream
'Response.BinaryWrite CanvasStream.Read

'Write binary to File
CanvasStream.SaveToFile Server.Mappath("userImages/" & request("imageName")), 2                    'adSaveCreateOverWrite
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T20:02:28.247

我的答案基于第一个答案，并进行了一些修改使其真正起作用：首先，在客户端，我们使用以下功能：

```
 function onSave(){
        $.ajax({
          type: "POST",
          url: "saveSignature.asp",
          data: { 
             imgBase64: document.getElementById("eSignatureBoard").toDataURL(),
          }
        })
        .fail(function(oErr,sErr1,sErr2) {
            alert ("err - "+sErr1+"  "+sErr2);
        })    
        .done(function(){
            alert ("done");
        });   
    } 
```

在asp服务器端，我们使用以下代码：

```
dim sImg
sImg=request.form("imgBase64")
sImg = replace(sImg,"data:image/png;base64,", "")
sImg = replace(sImg," ", "+")

Set oStream = Server.CreateObject("Adodb.Stream")
oStream.Type = 1 
oStream.Open
With Server.CreateObject("MSXML2.DomDocument.6.0").createElement("b64")
    .dataType = "bin.base64"
    .text = sImg
    oStream.Write .nodeTypedValue 'write bytes of decoded base64 to stream
End With
oStream.SaveToFile Server.Mappath ("./tmp_08221_1.png"), 2
oStream.close()
set oStream = nothing 
```

# c# - MvvmCross vnext：类似于wp7的monodroid绑定Dictionary Key

> ID：12899593
> 
> 赞同：1
> 
> 时间：2012-10-15T16:07:36.393
> 
> 标签：c#, windows-phone-7, xamarin.ios, xamarin.android, mvvmcross

当我在 Tutorial.Core 中更改 MainMenuViewModel 以使用这样的字典时：

`公共字典项目{得到; 放; } public ICommand ShowItemCommand { get { return new MvxRelayCommand>((type) => DoShowItem(type.Value)); } }

```
public void DoShowItem(Type itemType)
{
    this.RequestNavigate(itemType);
}

public MainMenuViewModel()
{
    Items = new Dictionary<string, Type>()
                {
                    {"SimpleTextProperty",  typeof(Lessons.SimpleTextPropertyViewModel)},
                    {"PullToRefresh",  typeof(Lessons.PullToRefreshViewModel)},
                    {"Tip",  typeof(Lessons.TipViewModel)},
                    {"Composite",typeof(Lessons.CompositeViewModel)},
                    {"Location",typeof(Lessons.LocationViewModel)}
                };
}` 
```

该示例在 wp7 中按预期工作，但是对于 monodroid 我收到一个错误::"MvxBind:Error: 2,71 Problem seen during binding execution for from Items to ItemsSource - 问题 ArgumentException: failed to convert parameters" 因为我认为 KeyValuePair Key属性导致问题：

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:local="http://schemas.android.com/apk/res/Tutorial.UI.Droid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
          android:layout_margin="12dp"
        android:orientation="vertical">
<TextView
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:text="View Model:"
        />
  <TextView
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:textAppearance="?android:attr/textAppearanceLarge"
          local:MvxBind="{'Text':{'Path':'Key'}}"
        />
</LinearLayout> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:02:06.687

问题是 mvxbindablelistview 需要一个支持 IList 接口的对象 - 因此它当前无法绑定到字典。

这就是 'ArgumentException: failed to convert parameters' 告诉我们的。

* * *

如果要使用字典，则可以应用将字典映射到 List() 的转换器

* * *

如果您认为这是 mvx 中缺少的功能 - 如果您认为列表应该绑定到任何 ienumerable（或者可能绑定到任何 icollection），那么请在 github 上记录这是一个问题。

* * *

**更新**- 这已在[https://github.com/slodge/MvvmCross/issues/38](https://github.com/slodge/MvvmCross/issues/38)上进行- 现在行为已更改。

# ms-access - 连接文本框中的 2 个字段

> ID：12899595
> 
> 赞同：3
> 
> 时间：2012-10-15T16:07:37.437
> 
> 标签：ms-access, ms-access-2010

我试图将我的数据库中的 2 个字段连接到 1 个文本框中，就像我在设置这样的记录源之前做了很多次一样`=[parent] & " - " & [parentCity]`。

它不起作用。相反，它写#type！在文本框中。

如果我在记录源中选择`parent`或`parentCity`单独选择它可以工作。

此外，没有控件被命名`parent`，或者`parentCity`两个字段都被命名`varchar`

然后我以为是因为`null`所以我做了这样丑陋的事情

```
=IIf(IsNull([parent]),"",IIf(IsNull([parentCity]),[parent],[parent] & [parentCity])) 
```

我得到了同样的错误，我试过了

`=IIf(IsNull([parent]),"",IIf(IsNull([parentCity]),[parent],"LOL"))`

它有效，所以问题是明确的`[parent] & " - " & [parentCity]`

有谁知道这里出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:27:52.797

`[Parent]`正在尝试访问父表单/报告时丢弃您的文本框（通过实验确认。）这可能很有用，`Parent`但当您使用 = 符号时，您无法显示该字段的值，因为 Access 假定您指的是表单的父级。

作为参考，这里列出了[可能会导致 Access 出现问题的单词。](http://allenbrowne.com/AppIssueBadWord.html)请注意，父母确实出现在此列表中。

一种解决方法是在您的表单/报告中包含任何显示父值（您可以隐藏）的字段，让我们假设您将其称为 HIddenParent。

如果你这样做，你将能够通过使用它作为源来实现你想要的结果：`=[HiddenParent] & " - " & [parentcity]`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T16:27:17.133

创建一个绑定到“父”字段的名为“txtParent”的文本框。创建另一个绑定到“parentCity”字段的名为“txtParentCity”。

如果您不想在表单视图中看到这 2 个文本框，请将其 Visible 属性设置为 No。

无论它们是否可见，您都可以在目标文本框的控件源属性中引用它们的值。

```
=[txtParent] & " - " & [txtParentCity] 
```

txtParent 和 txtParentCity 中的一个或两个的 Null 不会触发错误，因为将 Null 与任何字符串值（例如“ - ”）连接仍将返回该字符串值。

# php - 从 PHP 向多个 SQL 表同时输入数据

> ID：12899597
> 
> 赞同：-1
> 
> 时间：2012-10-15T16:07:42.140
> 
> 标签：php

是否可以同时编辑以下编码的数据并将其保存到两个不同的表中？只需查看将数据输入数据表的代码即可。

```
 if($opt>=$rec['gwstart'] && $opt<=$rec['gwend'])
        {

        $con=mysql_connect('localhost','root') or die ("Server connection failure!"); 
        $db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the  database"); 
        $SQL22="UPDATE newchk SET totgw=$AAA where gwstart=$BBB"; 
        $run22=mysql_query($SQL22,$con) or die ("SQL Error"); 

        $SQL33="INSERT INTO invoentry (user_inv,dist_inv,chkNum,InvoNum,InvoVal,InvoDate,DueDate,type,condition) VALUES ('$naMex','$distUsr','$listVal','$InNo','$InValu','$date1','$date2','$typ','$cnd')"; 
        $run33 = mysql_query($SQL33,$con) or die ("SQL Error!..");
        $MSG ="Successfully saved your entry! ".$AAA." cheques are remaining.";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:14:19.727

是的，您可以，如果您的查询在某种程度上相关并且您需要确保它们都成功，您可以使用 SQL TRANSACTIONS。否则，就像您已经做过的那样，您可以运行多个查询。

# asp.net - 用于内联复选框编辑和插入的 asp.net 语法 vb.net

> ID：12899603
> 
> 赞同：0
> 
> 时间：2012-10-15T16:08:03.757
> 
> 标签：asp.net, vb.net, checkbox

我可以对 datalist 控件的语法使用一些帮助，我在其中的 2 个字段中添加了两个复选框。每个字段都可以在插入或编辑模式下设置。

如何让插入和更新向导读取这些值，而无需在后面的代码中对进程进行自定义编码？

这是ASP..

```
<asp:DetailsView ID="DetailsView1" runat="server" AllowPaging="True" 
     AutoGenerateRows="False" CellPadding="4" DataKeyNames="keyID" 
     DataSourceID="SqlDataSource1" Font-Names="Verdana" ForeColor="#333333" 
     GridLines="Horizontal" Height="50px" Width="340px">
     <PagerSettings Mode="NumericFirstLast" Position="TopAndBottom" 
      PageButtonCount="5" />
     <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
     <CommandRowStyle BackColor="#D1DDF1" Font-Bold="True" />
     <RowStyle BackColor="#EFF3FB" />
     <FieldHeaderStyle BackColor="#DEE8F5" Font-Bold="True" Width="160px" />
     <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
     <Fields>
          <asp:BoundField DataField="keyID" HeaderText="keyID" InsertVisible="False" 
               ReadOnly="True" SortExpression="keyID" />
          <asp:BoundField DataField="typeOfDriver" HeaderText="Type Of Driver:" 
               SortExpression="typeOfDriver" />
          <asp:TemplateField HeaderText="Active Type:" SortExpression="activeType">
               <EditItemTemplate>
                    <asp:CheckBox ID="Checkbox1" runat="server"  Text='<%# Eval("activeType") %>'></asp:CheckBox>
               </EditItemTemplate>
               <InsertItemTemplate>
                   <asp:CheckBox ID="Checkbox2" runat="server"  Text='<%# Eval("activeType") %>' Checked="True"></asp:CheckBox>&nbsp;True
               </InsertItemTemplate>
               <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("activeType") %>'></asp:Label>
               </ItemTemplate>
           </asp:TemplateField>
           <asp:TemplateField HeaderText="Visible in GUI:" SortExpression="visible">
               <EditItemTemplate>
                   <asp:CheckBox ID="Checkbox3" runat="server"  Text='<%# Bind("visible") %>'></asp:CheckBox>
               </EditItemTemplate>
               <InsertItemTemplate>
                   <asp:CheckBox ID="Checkbox4" runat="server"  Text='<%# Bind("visible") %>' Checked="True"></asp:CheckBox>&nbsp;True      
               </InsertItemTemplate>
               <ItemTemplate>
                   <asp:Label ID="Label1" runat="server" Text='<%# Bind("visible") %>'></asp:Label>
           </ItemTemplate>
       </asp:TemplateField>
       <asp:CommandField ShowEditButton="True" ShowInsertButton="True" />
    </Fields>
    <HeaderStyle BackColor="#99CCFF" Font-Bold="True" ForeColor="White" />
    <EditRowStyle BackColor="#FFFF99" Width="260px" />
    <AlternatingRowStyle BackColor="White" />
</asp:DetailsView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:09:37.390

你见过这个吗？[使用 DataList 控件](http://www.codeproject.com/Articles/23559/Working-with-the-DataList-Control)。

这也是一个很好的例子：[如何使用 Datalist 编辑/删除记录](http://www.dotnetspider.com/resources/43058-How-Edit-Delete-records-using-Data-List.aspx)。

# c# - 为什么我收到“修饰符 'virtual' 对此项目无效”错误？

> ID：12899606
> 
> 赞同：13
> 
> 时间：2012-10-15T16:08:33.503
> 
> 标签：c#, asp.net-mvc, model-binding

我正在尝试使用以下模型创建 mvc 应用程序：（代码很大。我认为您会更容易理解）

```
public class Job
{
    public int JobId { get; set; }
    public string Name { get; set; }

    public List<Job> GetJobs()
    {
        List<Job> jobsList = new List<Job>();
        jobsList.Add(new Job { JobId = 1, Name = "Operator" });
        jobsList.Add(new Job { JobId = 2, Name = "Performer" });
        jobsList.Add(new Job { JobId = 3, Name = "Head" });
        return jobsList;
    }
}

public class Person
{
    public virtual int PersonId { get; set; }
    public string FullName { get; set; }
    public int JobId { get; set; }
    public virtual Job Job;
    public string Phone { get; set; }
    public string Address { get; set; }
    public string Passport { get; set; }
    [DataType(DataType.MultilineText)]
    public string Comments { get; set; }
}

public class PersonPaidTo : Person
{
    [Key]
    public override int PersonId { get; set; }
    public virtual List<Order> Orders { get; set; }
}

public class Head : Person
{
    [Key]
    public override int PersonId { get; set; }
    public Job Job { get; set; }
    public Head()
    {
        Job.Id = 3;
    }
} 
```

`Person`我在该领域的课堂上有错误`Job`：

> 修饰符“虚拟”对此项目无效

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-15T16:09:52.833

是的，此代码无效：

```
public virtual Job Job; 
```

那是声明一个*field*，并且 fields 不能是虚拟的。您要么希望它成为一个属性：

```
public virtual Job Job { get; set; } 
```

或者只是一个字段：

```
// Ick, public field!
public Job Job; 
```

（我的猜测是你想要前者，但两者都是有效的 C#。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-02T11:11:30.127

使字段私有并使用公共属性公开它的正确方法。

```
//Field
private Job job;

//Property
public virtual Job Job
    {
        get { return job; }
        set { job= value; }
    } 
```

# mysql - 同一张表上的多个索引

> ID：12899607
> 
> 赞同：1
> 
> 时间：2012-10-15T16:08:34.270
> 
> 标签：mysql, indexing, schema

我有一个具有以下架构的表：

```
CREATE TABLE IF NOT EXISTS `feeds` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `external_id` varchar(255) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `name` varchar(255) DEFAULT NULL,
  `notes` text,
  `image_id` int(11) DEFAULT NULL,
  `location_id` int(11) DEFAULT NULL,
   PRIMARY KEY (`id`),
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9046 ; 
```

我正在创建索引`external_id`，`location_id`它们旨在分别用于影响表的不同查询。我知道每次添加、更新或删除记录时，MySQL 都必须重建索引。我无法弄清楚是否更新`name`此表中记录的字段会导致重建一个或两个索引。另外，我想知道，这两个单独的索引是否可以存在于该表上而不会对彼此的性能产生负面影响？感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:11:10.330

索引不是“重建”的，而是更新的。更改未编制索引的列中的数据不应导致任何重新编制索引活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:42:54.027

您正在使用的 MySQL 存储引擎 MyISAM 将在每次更新行时更新索引。这意味着一个表的索引越多，从该表中插入、更新或删除行所花费的时间就越多。但是查询应该运行得更快。您可能希望对查询计划使用 EXPLAIN。

# javascript - 如何使用父 id 将对象添加到嵌套的 javascript 对象

> ID：12899609
> 
> 赞同：6
> 
> 时间：2012-10-15T16:08:38.060
> 
> 标签：javascript, json, rest

在我的应用程序中，我基于来自服务器的 JSON 响应创建了一个 JavaScript 对象，类似于：

```
{
  name: "root",
  id: 1,
  children: [
    {
      name: "child one",
      id: 11,
      children: [
       {name: "grand child 1", id: 111, children: []},
       {name: "grand child 2", id: 112, children: []}
      ]
   },
   {
     name: "child two",
     id: 12,
     children: []
   }
  ]
} 
```

我创建一个新节点，例如：

```
 {name: "grandchild three", id: 113, children:[]} 
```

考虑到这一点，我怎样才能将这个新的孙子添加到其 id 为 11 的父级中？请注意，我不知道节点的静态路径，`id == 11`所以我想知道如何在知道它的情况下获取该节点`id`。

**编辑：**请注意，真实情况下的 id 不编码对象的路径。我创建了这个简单的示例来演示我正在处理的数据结构。但是我无法在我的真实应用程序中使用它的 id 检索到对象的路径。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T16:41:33.793

看到这个小提琴：http: [//jsfiddle.net/2Dvws/](http://jsfiddle.net/2Dvws/)

它将通过 ID 查找对象。并推新子。由于 Javascript 中的每个对象都是引用，因此您可以将其作为 var 返回。

```
var ob = {
    name: "root",
    id: 1,
    children: [
        {
        name: "child one",
        id: 11,
        children: [
            {
            name: "grand child 1",
            id: 111,
            children: []},
        {
            name: "grand child 2",
            id: 112,
            children: []}
        ]},
    {
        name: "child two",
        id: 12,
        children: []}
    ]
}; 
```

将返回找到的元素的函数。将查看所有子元素。

```
function findObjectById(root, id) {
    if (root.children) {
        for (var k in root.children) {
            if (root.children[k].id == id) {
                return root.children[k];
            }
            else if (root.children.length) {
                return findObjectById(root.children[k], id);
            }
        }
    }
};

var bla = findObjectById(ob, 111);

console.log(bla);
bla.children.push({
        name: "child x",
        id: 1111,
        children: []
});
console.log(ob); 
```

输出是 id 为 111 的孩子将有 1 个 id 为 1111 的孩子 ​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T16:22:13.340

我假设 id 由 parent-id 加上子数组中的索引（1 到 9）组成？然后你可以这样：

```
var rootobj = {…};
var newnode = {name: "grandchild three", id: 113, children:[]};

var id = ""+newnode.id;
var cur = [rootobj];
for (var i=0; i<id.length-i; i++)
    cur = cur[id.charAt(i)-1].children;
cur[id.charAt(i)-1] = newnode; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-17T19:11:35.543

Niels 的回答是一个好的开始，但没有完全遍历树（例如，如果您要查找的节点是根的第二个子节点的子节点，它将中断）。如果根是您要查找的 id，它也会中断。以下是我的改进：

```
 function findObjectByID(root, id) {
    if (root.name == id){
      return root;
    }
    if (root.children) {
      for (var k in root.children) {
        if (root.children[k].name == id) {
          return root.children[k];
        }
        else if (root.children[k].children) {
          result = findObjectByID(root.children[k], id);
          if (result) {
            return result;
          }
        }
      }
    }
  }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T16:13:13.690

这个怎么样。

```
for(var a = 0; a < object.length; a++) {
    for(var b = 0; b < obj.children.length; b++) {
        if(object[a].children[b].id == 11) {
           object[a].children[b].children.push({
                name: "grandchild three", 
                id: 113, 
                children: []
            });
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-18T06:13:24.487

这是使用[object-scan](https://github.com/blackflux/object-scan)的解决方案。使用库应该使其更具可读性和可维护性。

```
// const objectScan = require('object-scan');

const insert = (haystack, parentId, node) => objectScan(['**.id'], {
  abort: true,
  rtn: 'bool',
  filterFn: ({ value, parent }) => {
    if (value === parentId) {
      parent.children.push(node);
      return true;
    }
    return false;
  }
})(haystack);

const obj = { name: 'root', id: 1, children: [ { name: 'child one', id: 11, children: [ { name: 'grand child 1', id: 111, children: [] }, { name: 'grand child 2', id: 112, children: [] } ] }, { name: 'child two', id: 12, children: [] } ] };

console.log(insert(obj, 11, { name: "grandchild three", id: 113, children: [] })); // true iff inserted
// => true

console.log(obj);
// => { name: 'root', id: 1, children: [ { name: 'child one', id: 11, children: [ { name: 'grand child 1', id: 111, children: [] }, { name: 'grand child 2', id: 112, children: [] }, { name: 'grandchild three', id: 113, children: [] } ] }, { name: 'child two', id: 12, children: [] } ] }
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.8.0"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

# html - Smarty 模板包含文件系统中不存在的文件，但仍会生成内容？

> ID：12899611
> 
> 赞同：0
> 
> 时间：2012-10-15T16:08:44.650
> 
> 标签：html, templates, smarty

我有一个 .tpl ，其中包含另一个负责生成我要编辑的代码块的 .tpl 。我通过注释掉产生内容的 {include...} 找到了它的位置。但是，当我在文件系统上寻找 .tpl 文件时，它并不存在。那么它真正存储在哪里呢？

即 {include file="user/content.tpl"} （不在文件系统中）

在其他文件中是否有一些硬编码的地址？是否有条件 if：如果文件不存在，请改用这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:43:24.343

如果文件存在很容易：

```
{if file_exists("../path_to_file.xxx")}
   /* DO STUFF */
{/if} 
```

包含中的文件路径可以使用绝对路径或相对路径，请在此处查看更多示例-> [http://www.smarty.net/docsv2/en/language.function.include.tpl](http://www.smarty.net/docsv2/en/language.function.include.tpl)

# sql-server-2008 - 用于标签的 GUID 与身份

> ID：12899619
> 
> 赞同：8
> 
> 时间：2012-10-15T16:09:03.723
> 
> 标签：sql-server-2008, tsql, tags

我知道这个主题已经被详细讨论过（我在这里和整个网络上阅读了很多帖子）并且我不喜欢鞭打死马，但我有一个关于整数 ID 与 GUID 更具体方面的问题：

我正在编写一个模式，该模式将具有与 stackoverflow 标记相似的标记能力，但它将具有用于 5 个以上不同表的相同标记。

我将链接的基本表如下：

**标记表**

```
Tag ID    Tag Name      Tag Description
-------------------------------------------------------------
     1    Hats          Tag for hats
     2    Coats         Tag for coats
     3    Gloves        Gloves tag
     4    Ladies        Ladies item 
```

**项目表1**

```
Item ID    Item Name    Cost
------------------------------------------------------------
      1    Deerstalker  £20.00
      2    Fedora       £50.00
      3    Scarf        £15.00 
```

我遇到的问题是`tag_item`桌子。

我将有 5 个结构完全不同的表，我希望用户能够对其应用标签，所以我认为我需要执行以下操作之一：

*   存储`table name`/`table number`以及标签相关行的整数键
*   存储`GUID`行的一个，这将独立于表工作，并且更容易获取某一行的所有标签。

我不确定这将如何影响以下性能：

*   使用特定标签/标签搜索超过 5 个表的所有项目
*   编辑项目的标签
*   加入

在这种情况下，或者我可以在任何地方了解这种特定情况下的优势，是否有任何明显更好的选择？

* * *

**编辑：**

对于任何感兴趣的人，以下是我决定的架构：

标签表

```
CREATE TABLE [dbo].[Sys_TagList](

    [Sys_Tag_Primary] [int] IDENTITY(1,1) NOT NULL,
    [Sys_Tag_Name] [varchar](50) NOT NULL,
    [Sys_Tag_Description] [varchar](1000) NULL

) 
```

Tag_Items 表

```
CREATE TABLE [dbo].[Meta_Tags](

    [Met_Tag_Primary] [int] IDENTITY(1,1) NOT NULL,
    [Met_Tag_Link_FK] [int] NOT NULL, -- Link to [Sys_Tag_Primary] field
    [Met_Tag_Name] [varchar](25) NOT NULL, -- To enable tag searches to use a single table
    [Met_Tag_Table] [varchar](25) NOT NULL, -- Table name, used with [Met_Tag_RowID] to create link to that item
    [Met_Tag_RowID] [int] NOT NULL -- Primary key of item[n] table

) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-29T11:29:08.297

我将（也许无济于事）建议 GUID 与 ID 是要关注的错误问题。您需要一个将标签链接到项目的表的假设可能值得首先检查。

如果您的五个项目类别差异到足以需要不同的表，那么您可能应该考虑五个 tag_item 链接表 - 每个项目表一个。尽管一次查询它们的代码（`UNION ALL`用于连接结果）可能比单个链接表的代码更冗长和重复，但查询可能要简单得多——无论是维护还是查询都很好-计划视角。

另一种选择是将五个项目类别共享的公共属性重构到一个中央表（标签链接到该表）中，并将附加的非公共属性存储在五个子表中。如果没有更多关于当前如何使用现有数据的信息，很难知道这是否合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T02:44:50.297

强制性可能的[标记设计重复](https://stackoverflow.com/questions/48475/database-design-for-tagging)

根据您打算如何使用标签以及哪些性能特征很重要，映射/链接表的一种可能替代方法是散列组合表。

计算给定请求的标签组合的哈希值，并将其直接存储在现有表和组合表中。

查询属于标签子集的任何内容可能会开始变得有点麻烦，因为您最终会在所有这些哈希的内存中进行大量转换。也许有一种更简洁的方式来查询散列参考值，因为我不记得这样做了，并且没有立即在搜索中找到任何东西。

# javascript - 从 node.js 中的变量解析 CSV 表

> ID：12899620
> 
> 赞同：1
> 
> 时间：2012-10-15T16:09:03.590
> 
> 标签：javascript, json, node.js, csv, npm

我有一个节点应用程序，它最终可以在变量中使用 CSV 格式的表。

我想将其解析为 JSON 样式格式。

我看过的所有模块似乎都只从文件中获取输入（除非我误解了）

是否有任何模块可以满足我的需求，或者我最好推出自己的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:53:04.217

作为替代方案，您可以使用[string.js](http://stringjs.com/)。它适用于浏览器中的 Node.js 和客户端。免责声明：我是作者。

例子：

```
var S = require('string');
S(myCsvData).lines().forEach(function(line){
  var fields = S(line).parseCSV();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T16:12:50.520

这个来自 NodeCSV 的例子似乎是从一个变量中解析的：

[https://github.com/wdavidw/node-csv-parser](https://github.com/wdavidw/node-csv-parser)

```
var csv = require('csv');
csv()
   .from( '"1","2","3","4"\n"a","b","c","d"' )
   .to( console.log ) 
```

一般来说，Node.js 允许您将文件和字符串都视为流。从一个到另一个通常很简单。

# c# - 如何使用 directInput 发送释放键？

> ID：12899622
> 
> 赞同：3
> 
> 时间：2012-10-15T16:09:04.333
> 
> 标签：c#, keyboard, directinput

我想使用直接输入发送键。我能够发送按键。但是我不知道如何发送按键释放以避免保持按键被按下。

这是我的代码：

```
struct INPUT
{
  public UInt32 type;
  public ushort wVk;
  public ushort wScan;
  public UInt32 dwFlags;
  public UInt32 time;
  public UIntPtr dwExtraInfo;
  public UInt32 uMsg;
  public ushort wParamL;
  public ushort wParamH;

}

enum SendInputFlags
{
  KEYEVENTF_EXTENDEDKEY = 0x0001,
  KEYEVENTF_KEYUP = 0x0002,
  KEYEVENTF_UNICODE = 0x0004,
  KEYEVENTF_SCANCODE = 0x0008,
}

[DllImport("user32.dll")]
static extern UInt32 SendInput(UInt32 nInputs, 
  [MarshalAs(UnmanagedType.LPArray, SizeConst = 1)] INPUT[] pInputs, 
  Int32 cbSize);

public static void StrokeW()
{
  INPUT[] InputData = new INPUT[1];
  ushort ScanCode = 0x11;
  InputData[0].type = 1;
  InputData[0].wScan = (ushort)ScanCode;
  InputData[0].dwFlags = (uint)SendInputFlags.KEYEVENTF_SCANCODE;
  SendInput(1, InputData, Marshal.SizeOf(InputData[0]));
} 
```

注意：我[在 DirectInput 应用程序中尝试使用 SendInput API 模拟键盘，](https://stackoverflow.com/questions/3644881/simulating-keyboard-with-sendinput-api-in-directinput-applications)但无法使其工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:20:02.007

您演示的代码似乎没有遵循您发布的链接上的建议，这实际上显示了您没有执行的*keyup ：*

```
INPUT[] InputData = new INPUT[2];

InputData[0].type = 1; //INPUT_KEYBOARD
InputData[0].wScan = (ushort)ScanCode;
InputData[0].dwFlags = (uint)SendInputFlags.KEYEVENTF_SCANCODE;

InputData[1].type = 1; //INPUT_KEYBOARD
InputData[1].wScan = (ushort)ScanCode;
InputData[1].dwFlags = (uint)(SendInputFlags.KEYEVENTF_KEYUP 
                              | SendInputFlags.KEYEVENTF_UNICODE);

SendInput(2, InputData, Marshal.SizeOf(InputData[0])); 
```

我会从那里开始。最好显示您编写的代码，但使用另一篇似乎有效的方法中的方法不起作用。

# android - Android模拟器在启动时断开连接

> ID：12899625
> 
> 赞同：1
> 
> 时间：2012-10-15T16:09:12.797
> 
> 标签：android, connection, emulation

我遇到了模拟器在启动时断开连接的问题。显示 Android 启动屏幕时会发生断开连接。然后我杀死模拟器并重新启动它。这项工作大部分时间都有效，但偶尔需要另一个终止/启动周期。

安卓启动画面：

![在此处输入图像描述](../Images/7435ee10c1e5e889f93295f4e838dba4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:11:25.903

使用 adb kill-server 似乎可以解决问题。

# html - 读取 xml 文件以在 html 中加载图像缩略图

> ID：12899630
> 
> 赞同：0
> 
> 时间：2012-10-15T16:09:31.603
> 
> 标签：html, xml, image

我正在我的网站上工作，并且在多个页面中有图片库。我正在尝试创建一个列出所有图像的 XML。我想使用这个 xml 文件根据类别在各种 HTML 页面中加载图像。我已经创建了如下所示的 XML 文件，但不确定如何在 HTML 中读取它。我知道 HTML 的基础知识，这是我第一次尝试将 XML 与 HTML 结合起来。

这是我拥有的 XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<image_gallery>
<music>
 <image href="path to image" alt="description"/>
</music>
<landscapes>
...
</landscapes> 
```

我希望输出在 HTML 文件中如下所示：

```
<img src="path to image" alt="description" />
<img src="path to image" alt="description" />
<img src="path to image" alt="description" />
<img src="path to image" alt="description" />
<img src="path to image" alt="description" /> 
```

我该怎么做呢？我浏览了一些谷歌搜索结果，但并不太了解，因为答案不是很具体，而且列出了多种方法。

我尝试了以下但没有用

```
<xsl:for-each select="image_gallery/music">
<xsl:value-of select="image"/>  
</xsl:for-each> 
```

提前谢谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:37:24.527

我会使用 jquery 调用必须在同一个域上的 xml，然后简单地解析 xml 并找到图像，然后用 $.each 遍历它们并显示图像。检查以下内容：

[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

# sql-server-2008 - SQL Server 2008 连接

> ID：12899635
> 
> 赞同：2
> 
> 时间：2012-10-15T16:09:38.230
> 
> 标签：sql-server-2008

我在 SQL Server 2008 R2 的 SELECT 语句中连接地址字段以将街道地址放在一起。如果公寓字段不为空，如何使用 IIF/CASE 语句添加“Apt#”？

```
SELECT ISNULL(RTRIM(StreetNo),'') + ' ' 
    +  ISNULL(RTRIM(StPfx),'')+ ' ' 
    + ISNULL(RTRIM(Street),'')   + ' ' 
    + ISNULL(Stfx, ' ') + ' ' 
    + ISNULL(RTRIM(Apt),'') HOME_ADDRESS 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:14:26.307

```
(CASE WHEN Apt IS NOT NULL THEN 'Apt# ' + Apt ELSE '' END) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:15:35.517

```
SELECT ISNULL(RTRIM(StreetNo),'') 
    + ' ' + ISNULL(RTRIM(StPfx),'')
    + ' ' + ISNULL(RTRIM(Street),'') 
    + ' ' + ISNULL(Stfx, ' ') 
    + CASE WHEN Apt IS NULL THEN '' ELSE ' ' + RTRIM(Apt) END AS HOME_ADDRESS 
```

如果`Apt`不是空的，而是空的，我会这样写：

```
 + CASE WHEN RTRIM(isnull(Apt, '')) = '' THEN '' ELSE ' ' + RTRIM(Apt) END AS HOME_ADDRESS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:19:45.033

您可以依靠将任何内容连接到 NULL 是 NULL 的事实；

```
... + ISNULL('Apt# ' + @apt, '') 
```

# facebook - 应用程序图像未加载到 Facebook 画布内

> ID：12899636
> 
> 赞同：1
> 
> 时间：2012-10-15T16:09:41.663
> 
> 标签：facebook, image, redirect, facebook-canvas

我正在 Facebook 画布页面内开发一个应用程序

这是一个示例链接 [http://test.ctag.it/?ctag_events=concerto-queen](http://test.ctag.it/?ctag_events=concerto-queen)

当我使用 facebook 调试器时，facebook 可以识别所有图像，但是当我尝试在画布内发布操作或共享事件时，它找不到附件图像，只有默认的应用缩略图。问题似乎是不完整的 URL 重定向 facebook 初始化。

有没有办法在地址栏中显示 apps.facebook.com/xxxxx/?ctag_events=concerto-queen ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:07:44.230

当我将您的示例链接输入到[Debugger](https://developers.facebook.com/tools/debug)时，它找不到图像 (og:image) 和其他`og:`标签。

这是一个工作页面的样子： [https ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fplooza.com%2Fog%2Fshop1.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fplooza.com%2Fog%2Fshop1.html)

（注意对象属性部分）

调试器（以及 FB 刮板）找不到您的`og:`标签。将它们靠近`<head>`标签，它将能够找到它们。

```
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta property="fb:app_id" content="115821641901976">
<meta property="og:url" content="http://test.ctag.it/?ctag_events=concerto-queen">
<meta property="og:title" content="Concerto Queen">
... and other og and fb tags ... 
```

# linux - ltrace 不适用于某些二进制文件

> ID：12899644
> 
> 赞同：5
> 
> 时间：2012-10-15T16:09:56.633
> 
> 标签：linux, debugging, ltrace

根据手册页，ltrace 应该拦截并记录任何已执行进程的动态库调用，但它似乎无法在某些二进制文件上正常工作。

这是在尝试跟踪 strcpy 时重现问题的方法。

我首先看到 ltrace 能够处理一些二进制文件（wget here）：

```
# ltrace -e strcpy wget --help >/dev/null
strcpy(0x63cc23, "auth-no-challenge")            = 0x63cc23
strcpy(0x63cc38, "background")                   = 0x63cc38
[...]
strcpy(0x63cf26, "verbose")                      = 0x63cf26
strcpy(0x63cf31, "verbose")                      = 0x63cf31
+++ exited (status 0) +++ 
```

现在相同的代码在 httpd 上不起作用：

```
# ltrace -e strcpy /usr/sbin/httpd -t >/dev/null
Syntax OK
+++ exited (status 0) +++ 
```

没有跟踪库调用，尽管我们可以确认 strcpy 是使用 gdb 调用的：

```
# gdb --quiet --args /usr/sbin/httpd -t 
Reading symbols from /usr/sbin/httpd...(no debugging symbols found)...done.
(gdb) b strcpy
Breakpoint 1 at 0x15d08
(gdb) r
Starting program: /usr/sbin/httpd -t
warning: no loadable sections found in added symbol-file system-supplied DSO at 0x2aaaaad1b000
[Thread debugging using libthread_db enabled]

Breakpoint 1, 0x00002aaaaca4d610 in strcpy () from /lib64/libc.so.6 
```

我在 Fedora 17 上执行此操作。这是 ltrace 错误还是预期行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:07:40.143

为了获得预期的权限（`setuid`和朋友）和适当的守护进程配置，`httpd`它在启动后不久就分叉了自己，然后原始进程退出（之前`strcpy()`似乎曾经被调用过）。`gdb`自动跟随新流程，并且`ltrace`可以跟随它，但你必须通过给它一些额外的选项来告诉它，例如`ltrace -f`.

# wordpress - URL 重写不适用于一个 URL

> ID：12899645
> 
> 赞同：2
> 
> 时间：2012-10-15T16:10:12.957
> 
> 标签：wordpress, apache, .htaccess, mod-rewrite, url-rewriting

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteRule ^foo$ /bar [L,R=301]

</IfModule>

# END WordPress 
```

这些行适用于 wordpress，但`RewriteRule ^foo$ /bar [L,R=301]`在我打开时没有重定向`www.example.com/foo`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:15:20.580

**RewriteRule 的顺序**在 .htaccess 中很重要。将您的 .htaccess 代码更改为：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^foo/?$ /bar [L,R=301]

RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule>
# END WordPress 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:13:20.113

您是否尝试过将特定规则放在规则下方`RewriteBase /`？我认为其他规则已经在做一些事情，导致您的最后一个规则被忽略。

# visual-studio-2010 - 为什么 MSBuild 会忽略我的 BeforePublish 目标？

> ID：12899650
> 
> 赞同：10
> 
> 时间：2012-10-15T16:10:41.523
> 
> 标签：visual-studio-2010, msbuild

我必须在这里遗漏一些明显的东西，但我在 ASP.NET MVC Web 项目`.csproj`文件的末尾有这个：

```
 [...]
    <Target Name="BeforePublish">
        <Error Condition="'foo'=='foo'" Text="test publish error" />
    </Target>
</Project> 
```

据我所知，这总是会导致发布失败并出现错误。但是，如果我加载项目，右键单击它，然后单击“发布”，则该项目会顺利发布。我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T13:40:55.880

我最终想出的答案适用于 Visual Studio 2010 和 Visual Studio 2012；将其放在 Web 应用程序`.csproj`文件的末尾之前：

```
<Project...
    [...]
    <!-- The following makes sure we can't accidentally publish a non-Release configuration from within Visual Studio -->
    <Target Name="PreventNonReleasePublish2010" BeforeTargets="PipelinePreDeployCopyAllFilesToOneFolder" Condition="'$(BuildingInsideVisualStudio)'=='true' AND '$(VisualStudioVersion)'=='10.0'">
        <Error Condition="'$(Configuration)'!='Release'" Text="When publishing from Visual Studio 2010, you must publish the Release configuration!" />
    </Target>
    <Target Name="PreventNonReleasePublish2012" BeforeTargets="MSDeployPublish" Condition="'$(BuildingInsideVisualStudio)'=='true' AND '$(VisualStudioVersion)'=='11.0'">
        <Error Condition="'$(Configuration)'!='Release'" Text="When publishing from Visual Studio 2012, you must publish the Release configuration!" />
    </Target>
</Project> 
```

请继续阅读以了解我在这个答案背后的想法，但基本上它围绕着这样一个事实：Visual Studio 2010 定义了`PipelinePreDeployCopyAllFilesToOneFolder`要连接的目标，而 Visual Studio 2012 定义了更“标准”的`MSDeployPublish`目标来连接。

上面的代码仅允许`Release`在 Visual Studio 中的配置中进行部署发布，但可以轻松修改它以阻止*所有*从 Visual Studio 中进行部署发布。

AFAIR，Visual Studio 2010 上下文菜单中的“发布”调用 webdeploy\msdeploy 工具。我玩了一点，但我一点也不喜欢。如果您仍想使用此功能并将目标插入某处 - 您需要知道确切的目标及其依赖属性。

查看 `c:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets`

您会发现两个任务 - MSDeploy 和 VSMSDeploy。后一个听起来很适合我。这个文件中根本没有使用第一个。但是 VSMSDeploy 用于三个不同的目标，PackageUsingManifest、TestDeployPackageToLocal 和 MSDeployPublish。后一个听起来不错；）

```
<Target Name="MSDeployPublish" DependsOnTargets="$(MSDeployPublishDependsOn)"> 
```

所以你只需要覆盖一个属性。将它放在您的目标之前，“YourTargetName”将在 MSDeployPublish 之前被调用。

```
<PropertyGroup>
    <MSDeployPublishDependsOn Condition="'$(MSDeployPublishDependsOn)'!=''">
        $(MSDeployPublishDependsOn);
        YourTargetName;
    </MSDeployPublishDependsOn>
  </PropertyGroup> 
```

如果您已经切换到 MSBuild 4.0，则有一种更简单的方法来挂钩您的目标。您只需要指定`BeforeTarget`属性。在我们的例子中，它将是这样的：

```
 <Target Name="MyTarget" BeforeTargets="MSDeployPublish">
        <Error Condition="'foo'=='foo'" Text="test publish error" />
  </Target> 
```

我希望这有帮助。询问您是否有更多问题。

PS：我没有检查所有这些，因为我没有任何 MSDeploy-ready 环境；）

[注意：我记得我不鼓励将 MSDeploy 用于我们自己的产品，因为为持续集成](http://en.wikipedia.org/wiki/Continuous_integration)(CI) 系统正确配置它是非常违反直觉的。也许我不是很擅长，你的解决方案会正常工作。但请谨慎使用 MSDeploy。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-26T16:36:56.840

不确定它是否可以在 VS 2010 中工作，因为我只在 VS 2012 中对此进行了测试，但我发现将目标放在 (ProjectDir)/Properties/PublishProfiles/(ProfileName).pubxml 文件中作为“AfterBuild”目标作品。例如，它不会在您构建项目时触发，但会在您发布项目时触发。

所以，而不是把

```
<Target Name="BeforePublish">
    <Error Condition="'foo'=='foo'" Text="test publish error" />
</Target> 
```

在您的 .csproj 文件中，尝试将

```
<Target Name="AfterBuild">
    <Error Condition="'foo'=='foo'" Text="test publish error" />
</Target> 
```

相反，在您的 .pubxml 文件中，它应该在发布之前触发。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T09:28:21.023

在我的项目文件中，默认情况下被注释掉，我不小心在注释中添加了一个新的，因此它没有被调用。愚蠢的错误。

之后，我让 BeforePublish 目标在 Visual Studio 2010 中工作。

```
<Target Name="BeforePublish">
 //insert awesome here
 </Target> 
```

注意：您必须提供自己的真棒:)

# delphi - 获取有关音频设备连接/断开的自动通知？

> ID：12899658
> 
> 赞同：3
> 
> 时间：2012-10-15T16:11:06.250
> 
> 标签：delphi, audio, notifications, delphi-xe2, device

是否可以在用户连接或断开音频设备时自动获得通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T19:04:20.943

在 Vista+ 中，您可以使用 Core Audio [IMMNotificationClient 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371417%28v=vs.85%29.aspx)来获得通知。

> IMMNotificationClient 接口在添加或删除音频端点设备、端点设备的状态或属性发生更改或分配给端点设备的默认角色发生更改时提供通知。

处理`WM_DEVICECHANGE`和/或轮询是 odler OS 版本中的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T07:38:37.763

要接收音频设备插拔通知，请按照以下步骤操作：

1.  使用此 msdn 链接从 IMMNotificationClient 接口派生类：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd370810%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370810%28v=vs.85%29.aspx)

2.  使用此 msdn 链接创建设备枚举对象：http: [//social.msdn.microsoft.com/Forums/windowsdesktop/en-US/610aacff-062e-4453-8437-01f0de038b07/jack-detection-for-headset](http://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/610aacff-062e-4453-8437-01f0de038b07/jack-detection-for-headset)

在第二步替换行 IMMNotificationClient *pNotify = NULL;

与 IMMNotificationClient *pNotify = new CMMNotificationClient;

通过这个实现，您将在 CMMNotificationClient 的重载函数中收到所有插入、拔出通知。

请确保在最后删除 CMMNotificationClient :)

# c - 从c中的文件中读取所有字节

> ID：12899661
> 
> 赞同：2
> 
> 时间：2012-10-15T16:11:18.340
> 
> 标签：c, windows, file, stat

我正在尝试从文件中读取字节，但大小已损坏。调试时可以看到 的值`st.st_size`，但看不到 的值`size`。

```
int main(void)
{
    FILE* oud;
    struct stat st;
    _off_t size;
    unsigned* bytes;
    char const path[] = "C:\\Users\\Ruben\\Documents\\test.txt";
    errno_t error;

    if ((error  = fopen_s(&oud, path, "rb" )) != NULL)
        return -1;

    stat(path, &st);
    size = st.st_size;
    bytes = (unsigned*)malloc(size);
    fread(bytes, 1, size, oud);
    fclose(oud);

    getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:16:06.407

我建议使用循环并逐字节迭代文件字节，检查 EOF 字符。一旦找到它，您现在就知道文件的实际大小，并且可以从一开始就适当地读取它，将其放入缓冲区或以其他方式。

# php - 重复的 ID 被发送到支付处理器

> ID：12899666
> 
> 赞同：0
> 
> 时间：2012-10-15T16:12:12.413
> 
> 标签：php, mysql, transactions, oscommerce

这是场景。此表 Orders 有一个名为 orders_id 的 auto_increment 列。该表使用 InnoDB 存储引擎。（这不是关于在 Orders 表中插入新记录，而是关于如何避免向处理器发送重复的 ID）

```
orders_id       cust_id       name       address 
100              55           abc        123 street    
101              12           def        456 street 
```

对于下一个订单，我像这样计算下一个可用的 Orders_id

```
$new_order_id_query = "SHOW TABLE STATUS LIKE ORDERS";
$result = tep_db_query($new_order_id_query);
$row = tep_db_fetch_array($result);
$new_order_id = $row['Auto_increment']; 
```

然后我收集其他信息，如姓名、地址、items_ordered ......并像这样将其发送给支付处理器

```
102              44           xyz         44 Street 
```

问题**只是**有时在完全相同的时间有两个或多个订单时，我最终会向支付处理器发送**两个具有相同 orders_id 的订单。**

问题是如何确保我没有向支付处理器发送重复的 Orders_id？

有人建议我使用 last_insert_id() 可能对或错，但我不知道如何实现它。

我阅读了关于锁定表的信息——这对于事务环境和 InnoDB 来说是个好主意吗？如果是这样，我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:27:50.923

正如[我对您上一个问题的回答中](https://stackoverflow.com/questions/12895692/how-to-guarantee-concurrent-threads-dont-get-the-same-value-in-mysql/12895738#comment17469234_12895738)所解释的：

1.  收集姓名、地址、items_ordered 等。

2.  在表中插入相关细节`orders`，省略提供`id`（MySQL会自动为你生成一个，通过使用锁保证其唯一性）。

3.  `id`通过询问从 MySQL获取生成的内容`last_insert_id`（实际的函数调用将取决于您的驱动程序）。

4.  发送到您的付款处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:19:56.743

auto_increment 列通常不需要在您的代码中进行操作。当您插入用 auto_increment 定义的新记录列时，它会自动递增。

last_insert_id 用于获取分配给连接上下文中自动递增字段的值。

在您的情况下，我不建议锁定表，因为您在问题陈述中没有提供任何理由这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:35:10.667

您无需计算下一个订单 ID 将是什么。当您在该表中插入一行时，自动增量会自动为您生成下一个 ID。这就是它的全部意义所在。

您需要做的就是运行插入，将所有*其他*信息放入表中，而无需为 auto_increment 字段指定值。

```
"INSERT INTO Orders (cust_id, name, address) VALUES (55, 'me', 'My House')" 
```

如果您想找出您刚刚插入的行的订单 ID，只需在查询结果中调用 last_insert_id()。我不知道是什么`tep_db`，因为它不是我用过的东西，但我认为你想要这个功能`tep_db_insert_id()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T16:58:53.963

> 我正在计算 ID，因为我需要在实际插入之前将其发送到支付处理器。

您提到的所有技术都要求您打开数据库连接并在不同的 HTTP 请求之间保持打开状态（同时阻止其他脚本实例使用它），以便从单个数据库会话中受益。没有可靠的方法可以做到这一点。

我已经很久没有与 osCommerce 合作了（我很惊讶它仍然存在 :) 但你基本上有两种可能性：

*   以通常的方式插入真实订单，但将其标记为待处理。
*   在另一个表中插入预订单（可能由您设计）。

老实说，我认为您需要在重定向到支付网关之前保存订单。如果您信任会话数据，您迟早会丢失订单；你会失去已*付款*的订单，这更糟。

# java - 对象在绘制时不会出现在 java 小程序中。我应该如何正确使用 AWT 中的绘制/重绘方法？

> ID：12899668
> 
> 赞同：3
> 
> 时间：2012-10-15T16:12:22.050
> 
> 标签：java, applet, awt, paint

我有一个小程序界面，它应该在屏幕上绘制一个球，并在按下运行按钮时让它从边缘反弹。还有其他功能，但它们需要第一个功能才能工作。当前按下运行时，没有任何反应。我认为我没有正确地绘制对象。我已经在`System.err.println()`周围添加了语句，并检查了控制台，当单击按钮时程序确实会转到正确的方法。我只是不知道应该绘制对象的方法有什么问题。

代码将近 500 行，但如果需要，我会将其粘贴到此正文中。这是：http: [//ideone.com/JL0B2](http://ideone.com/JL0B2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:35:20.883

首先，您必须覆盖paint of `drawingpanel`：这是您绘制圆圈的地方。目前该圆圈仅在您按下“运行”按钮时出现，因为它已绘制在组件上。
在正常绘制过程中，小程序区域被绘制（这是您当前`paint`工作的地方），并且您添加的所有组件都被绘制在已经绘制的点上。

在程序的开头`dot`是`null`，因此paint 无法正确绘制它 - 它会抛出 NullPointerException。

您不必“缓存” Graphics 实例：始终使用在绘画中提供给您的 Graphics。

如果您希望圆圈移动，您必须创建另一个线程，以便它更新值，然后安排重绘`drawingpanel`.
而且您不必重新绘制整个小程序，只需重新绘制`drawingpanel`.

如果您仍然需要帮助，请在评论中询问他们。

**编辑：**

这是你`drawingpanel`画点的地方：

```
 Panel drawingpanel = new Panel() {
        public void paint(Graphics g) {
            if (dot == null) {
                return;
            }
            g.drawOval(dot.leftOf(), dot.topOf(), dot.widthOf(), dot.heightOf());
            g.fillOval(dot.leftOf(), dot.topOf(), dot.widthOf(), dot.heightOf());
        };
    }; 
```

而且您的`Bounce`小程序不会覆盖`paint()`方法。

要实现动画，请将[`Runnable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html)接口添加到该`implements`部分。
添加另一个字段：

```
 volatile boolean running = false;
    private Thread animationThread; 
```

现在让我们实现简单的动画：

```
 public void run() {
        while (running) {
            if (!showtails) {
                dot.setColor(drawingpanel.getBackground());
            }
            update();// check if speed, size, or shape changed
            draw();// draw next dot based on move(), or initial condition
            pause();
            move();// calculate and prepare the coordinates for the next
                   // iteration to be drawn
        }
    }

    public void draw() {
        drawingpanel.repaint();
    }

    public void pause() {
        try {
            Thread.sleep(500);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public void move() {
        dot.left--;
        dot.top--;
    } 
```

最后一个细节是动作处理程序：

```
 public void actionPerformed(ActionEvent e) {
        Object source = e.getSource();

        if (source == this.runbutton) {
            running = !running;
            if (animationThread == null) {
                animationThread = new Thread(this); 
            }

            if (running) {
                dot = new CircDot(100, 100, sizebar.getValue(), Color.RED);
                animationThread.start();
            }
        } else
            ...
    } 
```

这是它的工作原理。您的实现`run()`在操作处理程序中开始并且没有将控制返回给 EDT，因此您的应用程序似乎挂起：它停止处理消息。

现在，当单击“运行”按钮时，状态字段`running`会反转，如果尚未创建新线程并启动它，则会创建一个新线程。线程执行`run()`方法。所以`while`body 中的动作会一直执行到`running`become `false`。

*   draw 方法调用`repaint()`哪个`drawingpanel`调度绘制操作。当消息队列为空时，系统会调用其`paint`方法重新绘制面板。
*   pause 方法调用`Thread.sleep(500)`以停止执行 500 毫秒。数字越少，点移动的越快。这里的值将取决于速度。*永远不要使用循环来实现暂停*：您只是浪费处理器时间而没有收获，而且您无法预测它将花费多少时间。
*   move 只是减少点`top`的`left`坐标，使其移动到窗口的左上角。

值得注意的是，`running`声明`volatile`该字段是因为该字段是从多个线程访问的，无需其他同步方式。如果它不存在，则正在运行的动画可能不会从动作处理程序中的 EDT 中看到它的修改。

# nsarray - NSArray 对象

> ID：12899671
> 
> 赞同：1
> 
> 时间：2012-10-15T16:12:36.560
> 
> 标签：nsarray

我知道这是一个简单的问题，但我没有找到最好的方法。

因此，这将是定义 NSSArray 的最佳方式，其中每个项目都是 NSObject。

我的对象有 3 个值（int *size、NSstring *path、*url），我想要一个数组，其中每个位置都有 3 个值。

NSSArray *myarray;

举个例子 ：

myarray（位置 0）-> 大小 = 12，路径 C:\tt.text，url = \temp\ios

myarray (位置 1) --> size = 232, path C:\ty.text, url = \ios

. . .

拜托，任何人都可以告诉我应该如何定义数组、对象以及如何将对象插入到数组中？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:26:43.123

你不能使用字典有什么原因吗？如果我为一个对象存储多个值，那将是我的偏好。

```
NSNumber *size;
NSString *path;
NSString *url;
NSMutableDictionary *dictionary = [NSMutableDictionary size,@"size",path,@"thePath",url,@"theUrl",nil];//the string values are the keys you use to access the values.

You can replace objects as         
[dictionary setObject:urlforKey:@"theUrl"]; 
```

但是对于您的特殊情况，我会制作一本字典。因此，只需分配一个字典并添加您在上面定义的各个字典对象。

如果您真的想使用数组，请尝试：

```
 NSObject *object;

 NSMutableArray *array = [[NSMutableArray alloc]initWithObjects:object, nil]; 
```

然后，您将能够使用以下方法抓取您的对象及其组成的部分：

```
NSObject *myObject = [array objectAtIndex:0]; 
```

希望能帮助到你！

# c# - C# HTMLAgilityPack 网站阻止了我的 IP 地址

> ID：12899675
> 
> 赞同：0
> 
> 时间：2012-10-15T16:12:53.190
> 
> 标签：c#, proxy, ip, html-agility-pack

我正在使用 HTMLAgilityPack 从以下网站获取 HTML：http: [//tennis.wettpoint.com/en/](http://tennis.wettpoint.com/en/)

它工作正常，但现在.. 一个小时后它不再工作了！

首先，我尝试更改我的代码 - 关于我如何检索 HTML：

```
string url = "http://tennis.wettpoint.com/en/";
HtmlWeb hw = new HtmlWeb();
HtmlAgilityPack.HtmlDocument doc = hw.Load(url);
foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//a[@href]"))
{
   //Code..
} 
```

就像我说的那样，这一直很好......直到网站对我来说似乎“关闭”......所以我将代码更改为：

```
using (WebClient wc = new WebClient())
{
    wc.Headers.Add("user-agent", "Mozilla/5.0 (Windows; Windows NT 5.1; rv:1.9.2.4) Gecko/20100611 Firefox/3.6.4");
    string html = wc.DownloadString("http://en.wikipedia.org/wiki/United_States");
    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(html);
} 
```

（这不适用于我的网站，但适用于其他网站）

至少我现在有这个，它也有效，但不适用于我的网站：

```
HtmlAgilityPack.HtmlDocument doc = GetHTMLDocumentByURL(url);

public HtmlAgilityPack.HtmlDocument GetHTMLDocumentByURL(string url)
{
    var htmlDoc = new HtmlAgilityPack.HtmlDocument();
    htmlDoc.OptionReadEncoding = false;
    var request = (HttpWebRequest)WebRequest.Create(url);
    request.UserAgent = @"Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5";
    request.Method = "GET";
    using (var response = (HttpWebResponse)request.GetResponse())
    {
        using (var stream = response.GetResponseStream())
        {
            htmlDoc.Load(stream, Encoding.UTF8);
        }
    }
    return htmlDoc;
} 
```

起初我认为该站点已关闭，因为我也无法使用任何浏览器访问该站点..所以我问了朋友，他们能够访问该站点..这意味着我的IP已被阻止..无论如何。 。 我能做些什么？我需要更改我的IP（如何）或使用代理（如何）..我不知道，因为我没有提到会发生这种情况:(希望有人能帮助我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:45:28.773

## 爬行的第一条规则：礼貌！

每次抓取网站时，您都必须确保您的抓取工具遵守 robots.txt 文件中的规则：http: [//tennis.wettpoint.com/robots.txt](http://tennis.wettpoint.com/robots.txt)

```
User-agent: msnbot 
Crawl-delay: 1

User-agent: MJ12bot
Disallow: /

User-agent: sistrix
Disallow: /

User-agent: TurnitinBot
Disallow: /

User-agent: Raven
Disallow: /

User-agent: dotbot
Disallow: / 
```

这意味着明确允许 msnbot 以 1 秒的延迟抓取网站。明确不允许 MJ12bot、sistrix、TurnitinBot、Raven 和 dotbot 抓取任何网站。现在，这是您将从网站看到的第一道防线。这是他们保护网站免受意外滥用的最礼貌的方式。有关 robots.txt 的更多信息，请参见此处：[http ://www.robotstxt.org/meta.html](http://www.robotstxt.org/meta.html)

您应该实施一些合理的抓取延迟（1-10 秒），看看它们是否允许您再次抓取。

## 规则二：小心机器人陷阱！

目前这不适用于您，但您应该总体上了解它。捕获不礼貌的机器人的一种方法是在 robots.txt 中放置一个明确的规则，禁止所有机器人进入特定目录，例如：

用户代理：* 禁止：/the/epic/robot/trap/path

然后在 HTML 的某个地方有一个链接，人类看不到，但机器人可以看到：

```
<a href="www.mydomain.com/the/epic/robot/trap/path/gotcha.html"></a> 
```

显然，如果使用浏览器，任何人都不会看到或单击此链接，并且遵循 robots.txt 规则的任何机器人都不会访问`/the/epic/robot/trap/path`. 然而，不遵守 robots.txt 规则并收集内部链接用于爬取目的的机器人最终将落​​入该目录，等待它们的是必死无疑！该网站的运营商很可能会收集并阻止访问该链接的用户的所有 IP。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T16:20:50.930

维基百科监控它从 IP 地址获得的请求数量，并将禁止 IP 积极抓取其内容。抓取 Google 搜索结果将具有相同的效果。

最初维基百科只会禁止你 24 小时，但如果你继续“冒犯”，你的 IP 将被永久禁止。

您可以 - 在您的 HttpRequest 中使用代理来更改您的 IP 地址或减慢您的请求。

# asp.net-mvc - 我的淘汰赛代码没有更新我的视图

> ID：12899676
> 
> 赞同：0
> 
> 时间：2012-10-15T16:12:56.983
> 
> 标签：asp.net-mvc, knockout.js

我正在使用自动完成将名称添加到表行的动态列表中。当我添加一个新名称时，会创建一个新行，但不会更新 searchText 和 searchId。删除链接似乎有效。所以我的观点看起来像；

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<SHP.Models.TrainingListEmployeesViewModel>" %>
<%@ Import Namespace="System.Web.Script.Serialization" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Bulk Training
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<form class="employeeListEditor">
    <h3>Allocate or cancel training for the selected employees</h3>
    <table>
        <tr>
            <td style="text-align: right;">Course Name</td>
            <td><%: Html.EditorFor(model => model.TrainingName) %></td>
        </tr>
        <tr>
            <td style="text-align: right;">Description (optional)</td>
            <td><%: Html.TextAreaFor(
               model => model.TrainingDescription, new { maxlength = "255", style = "width:400px;height:100px;" }) %></td>
        </tr>
    </table>
    <%: Html.EditorFor(model => model.ClientEmployeeSelector) %>
    <button data-bind="click: addEmployee">Add</button>
    <%--<input type="hidden" name="numberOfEmployees" id="numberOfEmployees" value="<%:Model.EmployeeList.Count %>" />--%>
    <div id="displayEmployees" style="margin-top:10px;display: block">
        <table id="employeeDataTable" class="groupBorder">
            <thead>
                <tr>
                    <th></th>
                    <th>Employee</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: employees">
                <tr>
                    <td>
                        <a href="#" data-bind="click: $parent.removeEmployee">Remove</a>
                        <input type="hidden" data-bind="value: searchId"/>
                    </td>
                    <td><span data-bind="text: searchText"></span></td>
                </tr>               
            </tbody>
        </table>
    </div>
</form>

    <script type="text/javascript">
        function Employee(id, text) {
            var self = this;
            self.searchId = id;
            self.searchText = text;
        }

        var initialData = <%= new JavaScriptSerializer().Serialize(Model) %>;
        function ViewModel() {
            var self = this;
            self.employees = ko.observableArray(initialData.EmployeeList);
            self.searchText = ko.observable(initialData.SearchText);
            self.searchId = ko.observable(initialData.SearchTextId);
            self.removeEmployee = function(employee) {
                self.employees.remove(employee);
            };
            self.addEmployee = function() {
                self.employees.push(new Employee(self.searchId, self.searchText));
                $('#SearchText').val('');
            };
            self.save = function() {
                ko.utils.postJson(location.href, { employees: self.employees });
            };
        }
        ko.applyBindings(new ViewModel());
    </script>
</asp:Content> 
```

当我单击添加按钮时（我希望在它工作时将其删除，以便由返回键触发添加事件）以下行被添加到表中；

```
<tbody data-bind="foreach: employees">
                <tr>
                    <td>
                        <a href="#" data-bind="click: $parent.removeEmployee">Remove</a>
                        <input type="hidden" data-bind="value: searchId" value=""/>
                    </td>
                    <td><span data-bind="text: searchText"/></td>
                </tr>               
            </tbody> 
```

因此出现正确的删除链接并且它也可以正常工作。但是 searchId 和 searchText 都没有设置。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:41:38.007

当您的代码调用`new Employee(self.searchId, self.searchText)`时，您将 2 个 observables 作为参数传递。也就是说，您传递的是 observables 本身，**而不是**它们的值。因此，新员工的属性将只是对主要 2 个可观察对象的引用。这可能不是你想要的。

您应该传递可观察对象的**值**（而不是可观察对象本身），如下所示`new Employee(self.searchId(), self.searchText())`：这样，每个新员工都将获得 2 个主要可观察值的当前值的副本。

此外，在许多情况下，让 Employee 的属性本身是可观察的（例如，如果它们可以更改）是很有用的。

这是一个小提琴证明：http: [//jsfiddle.net/antishok/KXhem/73/](http://jsfiddle.net/antishok/KXhem/73/)

编辑：根据海报的评论更新小提琴并提供更多信息：http: [//jsfiddle.net/antishok/KXhem/74/](http://jsfiddle.net/antishok/KXhem/74/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:09:43.130

我不知道这是否是最好的答案，但感谢 antishok 在此过程中对我的帮助。实际的 JSON 数据存储如下；

```
{"EmployeeList":[],"ClientEmployeeSelector":{"SearchText":null,"SearchTextId":0},"Cvm":null,"TrainingName":null,"TrainingDescription":null}; 
```

因此 SearchText 和 SearchTextId 嵌套在 ClientEmployeeSelector 中。另一个问题是这些字段上的 observable 被正确设置为零和空，但是当它们从自动完成更改时没有更新。所以我修复它的方式如下；函数员工（id，文本）{ var self = this; self.searchId = id.val(); self.searchText = text.val(); }

```
 var initialData = <%= new JavaScriptSerializer().Serialize(Model) %>;
    function ViewModel() {
        var self = this;
        self.employees = ko.observableArray(initialData.EmployeeList);
        self.searchText = ko.observable($('#SearchText'));
        self.searchId = ko.observable($('#SearchTextId'));
        self.removeEmployee = function(employee) {
            self.employees.remove(employee);
        };
        self.addEmployee = function() {
            self.employees.push(new Employee(self.searchId(), self.searchText()));
            $('#SearchText').val('');
        };
        self.save = function() {
            ko.utils.postJson(location.href, { employees: self.employees });
        };
    }
    ko.applyBindings(new ViewModel());
</script> 
```

现在我不知道这是否是最好的答案，但据我所知它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:22:15.227

好的，这是我的第二个答案，考虑到 antishok 对我的第一个答案的有效批评。我遇到的问题是我将变量 initialData 设置为模型。但是，自动完成字段不在模型中。所以这是我在脚本中的解决方案；

```
<script type="text/javascript">
    function Employee(id, text) {
        var self = this;
        self.searchTextId = ko.observable(id);
        self.searchText = ko.observable(text);
    }
    $(document).ready(function () {
        $('#SearchText').attr("data-bind", "value: autocompleteSearchText");
        $('#SearchTextId').attr("data-bind", "value: autocompleteSearchTextId");

        var initialData = <%= new JavaScriptSerializer().Serialize(Model) %>;
        var autocompleteData = { "autocompleteSearchTextId": 0, "autocompleteSearchText": null };
        function ViewModel() {
            var self = this;
            self.employees = ko.observableArray(initialData.EmployeeList);
            self.autocompleteSearchText = ko.observable(autocompleteData.autocompleteSearchText);
            self.autocompleteSearchTextId = ko.observable(autocompleteData.autocompleteSearchTextId);
            self.removeEmployee = function(employee) {
                self.employees.remove(employee);
            };
            self.addEmployee = function() {
                self.employees.push(new Employee(self.autocompleteSearchTextId(), self.autocompleteSearchText()));
                self.autocompleteSearchText('');
            };
            self.save = function() {
                var trainingName = $("#TrainingName").val();
                var trainingDescription = $("#TrainingDescription").val();
                ko.utils.postJson(location.href, { employees: self.employees, trainingName: trainingName, trainingDescription: trainingDescription });
            };
        }   
        ko.applyBindings(new ViewModel());
    });
</script> 
```

我使用 JQuery 将数据绑定放入自动完成字段，然后可观察对象按应有的方式工作。我从中学到了很多——也许这仍然不是最好的解决方案？但非常感谢antishok。

# c++ - 从没有键的哈希中查找 unordered_map 中的存储桶

> ID：12899683
> 
> 赞同：12
> 
> 时间：2012-10-15T16:13:27.307
> 
> 标签：c++, stl, c++11

我正在使用 std::unordered_map。我有一个哈希值和一种方法来确定给定的候选键是否是我正在寻找的键，但我没有实际的键。我想查找与哈希值对应的存储桶，并遍历该存储桶中的每个元素以查看它是否是我要查找的元素。不幸的是，函数 std::unordered_map::bucket(x) 需要 x 作为键。如果不先构造一个键，真的没有办法从哈希值中获取一个桶吗？

**您不需要回答问题的详细信息：**我可以构造密钥，但在没有冲突的常见情况下，这将比仅检查我在存储桶中找到的单个候选者是否正确需要更长的时间。我的负载因子很低，因此碰撞很少，即使对于碰撞，完整的哈希值也不太可能匹配，因此不匹配很快就会被确定为不匹配。我之所以关心这一点，是因为我已经通过分析器确定密钥构建需要大量时间 - 有很多查找，每次查找都需要构建一个密钥。

**你真的不需要回答这个问题**的更多细节：键是整数向量，我的查询是两个向量的总和。检查给定向量 V 是否是两个向量 A 和 B 的和比将两个向量求和为第三个向量 C=A+B 然后将 C 与 V 进行比较更快。我能够确定A+B 没有计算实际的向量 A+B，因为我存储了这些向量的哈希值，并且我的哈希函数 f 具有 f(A+B)=f(A)+f(B) 的属性。所以我只是将两个存储的哈希值相加得到总和的哈希值。我已经确保保留一个备用向量，以便构建密钥不需要内存分配，但添加向量的代码仍然需要大量时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T16:34:27.060

您无法避免构建*一个键*，但您可以避免构建*整个键*。

例如，假设您有一个`VectorKey`封装了的键类`std::vector`，并缓存了计算的哈希码。进一步假设您提供了 和 的实现，`Hash`可以`KeyEqual`访问您的 , 中的缓存哈希码`VectorKey`，并比较封装的向量是否相等。您可以定义一个`VectorKey`始终构造一个空的构造函数`std::vector`，并将缓存的哈希码设置为传递给构造函数的值：

```
class VectorKey{
    int cached_hash;
    std::vector<int> key;
public:
    VectorKey(const std::vector<int>& _key)
    :    key(_key)
    ,    cached_hash(calc_hash(_key)) {
    }
    // *** This is the centerpiece of the solution: *** 
    // *** this constructor effectively lets you access *** 
    // *** a bucket with nothing more than a hash code. *** 
    VectorKey(int hash)
    :    cached_hash(hash) {
    }
    // More code goes here for getting cached_hash
    // and also for checking equality
private:
    int calc_hash(const std::vector<int>& _key) {
         // calculate the hash code based on the vector
    }
}; 
```

使用这样的密钥类，您可以通过构造假密钥来快速找到存储桶：

```
size_type bucketIndex = myHashMap.bucket(VectorKey(precalculated_hash)); 
```

# javascript - 关闭次数？（语义澄清）

> ID：12899685
> 
> 赞同：2
> 
> 时间：2012-10-15T16:13:45.823
> 
> 标签：javascript, closures

考虑以下一段 JavaScript：

```
<script>
function Ninja() {
   var feints = 0;
    this.getFeints = function() {
        return feints;
    }

    this.feint = function() {
        feints++;
    }

    this.increaseByTwo = function() {
        feints = feints + 2;
    } 
}

var ninja = new Ninja();
ninja.feint();

console.log(ninja.getFeints());  //outputs one
ninja.increaseByTwo();
console.log(ninja.getFeints());  // outputs three
</script> 
```

我说上面的代码创建了四个闭包是对的吗

*   一个忍者 - 这有点无关紧要。
*   Ninja 内部的每个内部功能都有一个。这三个闭包中的每一个都指向同一件事。

还是 JavaScript 创建了两个闭包

*   忍者的一个 - 这有点无关紧要
*   一为三内功。三个内部函数共享同一个闭包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:16:13.670

所有三个内部函数都有一个指向相同环境的闭包，因此内部的变量也是如此。这通常[是关闭的重点](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)：

> 在计算机科学中，闭包（也称为词法闭包或函数闭包）是函数或对函数的引用以及引用环境——存储对该函数的每个非局部变量（也称为自由变量）的引用的表. [1](http://en.wikipedia.org/wiki/Closure_%28computer_science%29) 闭包——与普通函数指针不同——允许函数访问那些非局部变量，即使在其直接词法范围之外调用也是如此。

请注意，这是内存泄漏的常见来源，因为您并不总是知道您保留了这些引用。

查看[Google 的 Javascript 样式指南中关于闭包的内容](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Closures)。

> 但是，要记住的一件事是，闭包会保留指向其封闭范围的指针。因此，将闭包附加到 DOM 元素会创建循环引用，从而导致内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:15:53.333

只是，

> Ninja 内部的每个内部函数都有一个

如果您要创建大量`Ninja`s ，那么使用`Ninja`'s进行扩展是明智的`prototype`。

所以，做：

```
var Ninja = (function () {
    function Ninja(){
        this.feints = 0;
    };

    Ninja.prototype.getFeints = function() {
        return this.feints;
    }

    Ninja.prototype.feint = function() {
        this.feints++;
    }

    Ninja.prototype.increaseByTwo = function() {
        this.feints = this.feints + 2;
    }

    return Ninja;
})(); 
```

[http://jsfiddle.net/ZM3tH/](http://jsfiddle.net/ZM3tH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:44:19.547

当您执行该代码时会发生什么？让我们逐步完成它：

1.  您声明`Ninja`构造函数。在全局变量范围内。
2.  你调用`Ninja`构造函数
    1.  这会创建一个新的变量环境（包含`feints`），它位于声明的全局范围内`Ninja`。
    2.  创建了三个匿名函数，指向该变量环境。
    3.  一些分配完成并返回对象。
3.  垃圾收集器检查它是否可以收集 Ninja 的变量环境： 不能，因为仍然有三个可用且可访问的函数使用它。
4.  您在`ninja`. 对于每一个，
    1.  创建了一个新的空变量环境，该环境位于声明函数的范围内
    2.  该函数做了一些事情，之后本地环境被垃圾收集。

那么什么是闭包？在我的理解中，私有变量环境比`Ninja()`函数调用的寿命更长。因此，您的代码只创建*一个*闭包。

另请参阅@dystroy 的回答，它提供了有用的信息。如果我在某处使用了技术上不正确的术语，我很抱歉。Afaik，EcmaScript 规范将我所说的*执行上下文*和范围称为*词法环境*的“变量环境” ——参见[第 10 节](http://ecma-international.org/ecma-262/5.1/#sec-10)。

# image - 用于 里面 HTML5 中的元素？

> ID：12899691
> 
> 赞同：50
> 
> 时间：2012-10-15T16:14:20.740
> 
> 标签：image, html, responsive-design, w3c

在 HTML5 中，我们目前有一个`<figure>`元素，定义如下（[W3C 参考](http://dev.w3.org/html5/markup/figure.html)）

> figure 元素表示一个内容单元，可以选择带有标题，它是自包含的，通常作为单个单元从文档的主要流程中引用，并且可以从文档的主要流程中移开而无需影响文档的意义。

最近，[响应式图像社区小组](http://www.w3.org/community/respimg/)`<picture>`提出了一个新元素，它[在参考文献](http://dvcs.w3.org/hg/html-proposals/raw-file/tip/responsive-images/responsive-images.html#the-picture-element)中定义如下

> 用于显示可以来自多种来源的图像的图片元素（请参阅 srcset 属性）。用户代理显示哪个图像取决于获取源图像的​​算法。

由于这两个描述似乎并不矛盾（并且图片上的文档还处于*草稿*状态），所以我的问题是：是否可以（从技术上和语义上）以这种方式嵌套`picture`在`figure`元素中？

```
<figure>
   <picture>
      <source ...>
      <source ...>
      <source ...>
      <img..>
   </picture>

   <figcaption>...</figcaption>
</figure> 
```

我在规格中没有找到关于它的参考资料。:\

注意：我知道目前没有浏览器实现这个元素，我只是用[jQuery图片做一些实验](http://jquerypicture.com/)

谢谢你。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2014-05-29T19:26:49.230

Mat Marquis 在这里——我是`picture`规范 ( [http://picture.responsiveimages.org](http://picture.responsiveimages.org) ) 的编辑之一。

简短的回答是“是的”，长的回答是“肯定的”。语义正确（`figure`可以包含图像、图表、表格、代码片段等），并且 100% 有效。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-15T16:37:26.750

你不会找到它，因为它实际上还不是官方的，但我会假设答案是**肯定**的，那很好。

目前，您执行以下操作：

```
<figure>
  <img src="image.jpg" alt="The Image">
  <figcaption>A Caption</figcaption>
</figure> 
```

并且`<picture>`只是为了成为一种`<img>`为响应式站点提供多个 src'd 的方法，因此从技术上讲，如果它被批准，那么您的示例是有效的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-03-14T19:09:51.710

是的，您`<picture>`在`<figure>`标签中包含是正确的。我将在其中一门课程中通过谷歌的认可来证实这一点。

[![在此处输入图像描述](../Images/1239e70eeb8c1731d954110979094b64.png)](https://i.stack.imgur.com/DzrqK.jpg)

这显示在此视频中

[https://youtu.be/StKZMBURZpk?t=29](https://youtu.be/StKZMBURZpk?t=29)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-06-28T15:16:41.033

**是的，我们可以**。现在它是官方的，我们也可以将它们用作响应式图像。

该`<figure>`标签指定自包含内容 Ex-Images。元素的内容`<figure>`独立于主流。如果我们删除它，它应该不会影响文档的流动。

该`<figcaption>`元素用于为`<figure>`元素添加标题。

```
<figure>
   <figcaption>Caption</figcaption>
</figure> 
```

标签在指定图像资源方面提供了更大的`<picture>`灵活性。我们可以使用多张图像来填充最适合浏览器视口的图像 A/Q，而不是只有一张图像。

```
<picture>
   <source srcset="image-big.png" type="image/png" media="(min-width:1920px)"> 
   <source srcset="image-med.png" type="image/png" media="(min-width:1200px)"> 
   <source srcset="image-small.png" type="image/png" media="(min-width:700px)"> 
   <img src="backup.png" alt="Test" class="abc">
</picture> 
```

`<picture>`也可以与`<video>`和`<audio>`元素一起使用。它将以类似的方式工作。

**所以，这是完全有效的。**

```
<figure>
   <picture>
      <source srcset="image-big.png" type="image/png" media="(min-width:1920px)"> 
      <source srcset="image-med.png" type="image/png" media="(min-width:1200px)"> 
      <source srcset="image-small.png" type="image/png" media="(min-width:700px)"> 
      <img src="backup.png" alt="Test" class="abc">
   </picture>
   <figcaption>Caption</figcaption>
</figure> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-02-14T21:52:45.173

图是[块级元素](https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements#elements)。
图片是一个[内联元素](https://developer.mozilla.org/en-US/docs/Web/HTML/Inline_elements#elements)。

块级元素可以包含内联级元素。
根据这个和以前的答案，放置`picture`在`figure`标签内是正确的。

# orchardcms - 为什么 INavigationFilter.Filter(...) 调用了两次？

> ID：12899697
> 
> 赞同：0
> 
> 时间：2012-10-15T16:14:48.963
> 
> 标签：orchardcms

有一个 INavigationFilter 的实现，用于填充内容类型的菜单项。问题是其中的方法 Filter() 从两个线程中调用了两次，最终创建了两倍的菜单项。

这是一个日志：

> 2012-10-15 18:35:50,650 [14] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 过滤主页 2012-10-15 18:35:50,651 [14] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 过滤 2012-10-15 18:35:50,665 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 过滤主页 2012-10-15 18:35:50,666 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 过滤 2012-10-15 18:35:50,693 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目岩石植物，位置 5。 2012-10-15 18:35:50,698 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目水生植物，位置 7。 2012- 10-15 18:35:50,700 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目湿地植物，位置 6。2012-10-15 18:35:50,702 [14] Zulatm.WebPlants.Handlers。TaxonomyNavigationFilter - 产量项目岩石植物，位置 5。 2012-10-15 18:35:50,704 [14] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目水生植物，位置 7。 2012-10-15 18:35:50,706 [ 14] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目湿地植物，位置 6。 2012-10-15 18:35:50,708 [14] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目草本植物，位置 4。 2012-10 -15 18:35:50,710 [14] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目木本植物，位置 3。 2012-10-15 18:35:50,711 [14] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目地衣& Mosses，第 1 位。2012-10-15 18:35:50,712 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目草本植物，第 4 位。2012-10-15 18：35:50,714 [14] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目蕨类植物和盟友，位置 2。 2012-10-15 18:35:50,722 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产量项目木本植物，位置3\. 2012-10-15 18:35:50,724 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产出项目地衣和苔藓，位置 1\. 2012-10-15 18:35:50,726 [37] Zulatm.WebPlants.Handlers .TaxonomyNavigationFilter - 产出项目蕨类植物和盟友，位置 2。TaxonomyNavigationFilter - 产出项目 Lichens & Mosses，位置 1。 2012-10-15 18:35:50,726 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产出项目蕨类植物和盟友，位置 2。TaxonomyNavigationFilter - 产出项目 Lichens & Mosses，位置 1。 2012-10-15 18:35:50,726 [37] Zulatm.WebPlants.Handlers.TaxonomyNavigationFilter - 产出项目蕨类植物和盟友，位置 2。

以下代码：

```
public IEnumerable<MenuItem> Filter(IEnumerable<MenuItem> menuItems) {

             foreach (var item in menuItems) {
                 Logger.Debug(string.Format("Filtering {0}", item.Text));
                 if (item.Content != null && item.Content.ContentItem.ContentType == "TaxonomyNavigationMenuItem") {
                     var taxonomyCatalogId = _contentManager
                         .Query("Taxonomy")
                         .Where<TitlePartRecord>(t => t.Title == Migrations.STR_catalogTaxonomyName)
                         .List().Single().Id;

                     IEnumerable<TermPart> termParts = _contentManager
                         .Query<TermPart, TermPartRecord>()
                         .Where(record => record.TaxonomyId == taxonomyCatalogId)
                         .List();

                     var termsOnZeroLevel = termParts.Where(part => part.GetLevels() == 0);

                     foreach (var termPart in termsOnZeroLevel) {
                         var termMenuItem = new MenuItem();

                         InitializeTermMenuItem(termMenuItem, termPart, termParts);

                         Logger.Debug(string.Format("Yielding item {0}, position {1}.", termMenuItem.Text, termMenuItem.Position) );
                         yield return termMenuItem;
                     }
                 }
                 yield return item;
             }
        } 
```

更新。

```
private void InitializeTermMenuItem(MenuItem termMenuItem, TermPart currentTerm, IEnumerable<TermPart> allTerms, string parentPosition = "") {

var currentPosition =
                string.IsNullOrWhiteSpace(parentPosition)
                    ? currentTerm.Weight.ToString()
                    : string.Join(".", parentPosition, currentTerm.Weight);

        termMenuItem.RouteValues = new RouteValueDictionary(
            new {
                action = "Item",
                controller = "Home",
                area = "Contrib.Taxonomies",
                termPath = currentTerm.Slug
            });
        termMenuItem.Text = T(currentTerm.As<TitlePart>().Title);
        termMenuItem.Classes.Add("MyTaxonomyClass" + currentTerm.As<TitlePart>().Title);
        termMenuItem.Position = currentPosition;
        termMenuItem.Items = new List<MenuItem>();

        var childMenuItems = new List<MenuItem>();
        termMenuItem.Items = childMenuItems;
        foreach (var childTerm in allTerms.Where(p => p.Path.StartsWith(currentTerm.FullPath))) {
            var newChildMenuItem = new MenuItem();
            InitializeTermMenuItem(newChildMenuItem, childTerm, allTerms, currentPosition);
                childMenuItems.Add(newChildMenuItem);
            }
 } 
```

更新 2。

```
public int UpdateFrom11() {
    ContentDefinitionManager.AlterTypeDefinition(
        "TaxonomyNavigationMenuItem",
        cfg => cfg
                   .WithPart("MenuPart")
                   .WithPart("CommonPart")
                   .DisplayedAs("Taxonomy catalog menu item")
                   .WithSetting("Description", "Injects taxonomy categories as menu items")
                   .WithSetting("Stereotype", "MenuItem")
        );
    return 12;
}

public int UpdateFrom12() {
    ContentDefinitionManager.AlterTypeDefinition(
        "TaxonomyNavigationMenuItem",
        cfg => cfg.WithPart("IdentityPart"));
    return 13;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:44:45.893

好的，解决了。初始化 MenuItem.Content 并且第二个副本消失了。这很有帮助，因为以下代码生成了当前菜单项的副本。我花了一些时间才找到它。

在 MenuWidgetPartDriver.Display(..) 中：

```
var localized = new List<MenuItem>();
foreach(var menuItem in menuItems) {
    // if there is no associated content, it as culture neutral
    if(menuItem.Content == null) {
        localized.Add(menuItem);
    }

    // if the menu item is culture neutral or of the current culture
    if (String.IsNullOrEmpty(menuItem.Culture) || String.Equals(menuItem.Culture, currentCulture, StringComparison.OrdinalIgnoreCase)) {
        localized.Add(menuItem);
    }
}

menuItems = localized; 
```

# performance - Magento - 慢速 url 重写 reindex

> ID：12899701
> 
> 赞同：0
> 
> 时间：2012-10-15T16:15:19.443
> 
> 标签：performance, magento, indexing

我正在考虑改进 magento 中 url 重写的重新索引，我们有 130k 简单且可配置的产品。并且重新索引会消耗大量内存，基本上由于内存限制，我无法在命令行中完成这项工作。

所以我开始寻找一些可以加快整个过程的解决方案。整个重新索引正在发生，`Mage_Catalog_Model_Url::_refreshProductRewrite`因为系统迭代了所有产品、类别和商店。对于每次迭代，它可能会执行 1 或 2 个`insertOnDuplicate`操作。

我正在考虑将此类查询存储在某处并将它们合并到一个或多个更大的查询中，这会更快（我猜）。

一个组合（产品，类别，商店）的慢位看起来像

```
 $this->getResource()->saveRewrite($rewriteData, $this->_rewrite);

    if ($this->getShouldSaveRewritesHistory($category->getStoreId())) {
        $this->_saveRewriteHistory($rewriteData, $this->_rewrite);
    } 
```

有没有人更好地知道如何改善这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:38:26.230

我不能说我曾经使用过该产品（而且我绝不隶​​属于该产品），但可能值得一看[~~EcomDev 的这个模块~~](http://shop.ecomdev.org/view-all/url-rewrite-indexer.html)。[~~从他们发布的测试~~](http://www.ecomdev.org/2011/10/08/ecomdev-breaks-magento-speed-limits.html)来看，这似乎很简单，并且可能会为您节省大量工作。

# android - 在 Android 上打开 Adob e Reader 并指定注释的作者姓名

> ID：12899702
> 
> 赞同：1
> 
> 时间：2012-10-15T16:15:19.803
> 
> 标签：android, pdf, annotations, adobe-reader

这是在 Android 上打开 Adob​​e Reader 的一种方法：

```
try {
  Intent intent = new Intent();

  intent.setClassName("com.adobe.reader", "com.adobe.reader.AdobeReader");
  intent.setAction(Intent.ACTION_VIEW);
  intent.setDataAndType(Uri.fromFile(doc), "application/pdf");

  startActivity(intent);
} 
catch (ActivityNotFoundException activityNotFoundException) {
  activityNotFoundException.printStackTrace();
} 
```

有没有办法打开它并指定注释的作者姓名（我们可以在 pdf 文档上使用 adobe reader 10.4.0 的注释）？

提前致谢 ！

扎布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:06:44.767

我找到的唯一解决方案是使用超级用户（在根设备上）。

以下是如何做到这一点：

```
 Process suProcess = Runtime.getRuntime().exec("su");

    DataOutputStream os = new DataOutputStream(suProcess.getOutputStream());

    os.writeBytes("echo \"<?xml version='1.0' encoding='utf-8' standalone='yes' ?><map><string name='commentAuthorName'>toto</string></map>\" > /data/data/com.adobe.reader/shared_prefs/com.adobe.reader.preferences.xml \n");

    os.writeBytes("exit\n");
    os.flush();
    os.close();

    suProcess.waitFor(); 
```

# c# - 从 gui 异步执行方法的最佳方法

> ID：12899712
> 
> 赞同：2
> 
> 时间：2012-10-15T16:15:50.970
> 
> 标签：c#, multithreading

我正在构建一个桌面应用程序，它每隔 x 秒间隔从数据库中检索数据以将该数据显示到 winform，我不想阻止我的 gui，我不在乎检索数据的方法是否需要时间，而该时间小于检查间隔，我希望该方法与 gui 异步，什么是最好的方法，为什么？感谢我是线程新手！

后台工作者？线程.sleep？手动重置事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:53:51.910

所以你开始说你想每 X 秒执行一次任务。这告诉我们需要一个计时器。不过有很多选择。 `System.Timer`对于我们的目的应该可以正常工作，但如果你想使用`System.Windows.Forms.Timer`你可以。您需要在打开表单时启动计时器，将间隔配置为您想要的，并分配一个处理程序以在计时器触发时运行。

接下来，当计时器触发时，您需要执行数据库调用并更新 UI。执行长时间运行的操作，然后使用结果更新 UI 是`BackgroundWorker`该类的目的。设置`DoWork`执行数据库调用的方法，并让`WorkerCompleted`事件根据结果更新 UI。（完成的事件将自动在 UI 线程中运行；您无需手动编组到该线程。）

如果你有足够新的 C# 版本，你也可以使用任务来做同样的事情。您可以使用`Task.Factory.StartNew`数据库调用使其在后台线程中运行，然后您可以调用`ContinueWith`它`Task`返回并使用允许您指定同步上下文的重载。这是一个简单的例子：

```
private void handler(object sender, EventArgs e)
{
    Task.Factory.StartNew(() => getInfoFromDB())
        .ContinueWith(task => label1.Text = task.Result,
        CancellationToken.None, TaskContinuationOptions.None,
        TaskScheduler.FromCurrentSynchronizationContext());
}

private string getInfoFromDB()
{
    Thread.Sleep(2000);//simulate long IO operation
    return "Hello world!";
} 
```

请注意，要使此`Task`基于示例的工作正常，您需要使用`System.Windows.Forms.Timer`计时器，以便在 UI 线程中运行滴答事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:03:52.770

正如 Kamil 所指出的，`Tasks`在 .NET 4.0 之前的版本中不可用。

如果你被困在黑暗时代，BackgroundWorker 在这方面做得很好。事实上，这可能就是它的创建目的！

**未经测试的伪代码：**

```
public partial class Form1 : Form {

  private bool ok;
  private BackgroundWorker worker;

  public Form1() {
    InitializeComponent();
    worker = new BackgroundWorker();
    worker.WorkerReportsProgress = true;
    worker.WorkerSupportsCancellation = true;
    worker.DoWork += new DoWorkEventHandler(worker_DoWork);
    worker.ProgressChanged += new ProgressChangedEventHandler(worker_ProgressChanged);
    worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
    ok = true;
  }

  private void timerTick(object sender, EventArgs e) {
    if (!worker.IsBusy) {
      worker.RunWorkerAsync();
    }
  }

  private void worker_DoWork(object sender, DoWorkEventArgs e) {
    var w = (BackgroundWorker)sender;
    MyData inputData = (MyData)e.Argument;
    for (int i = 0; (i < NUM_TASKS) && !worker.CancellationPending; i++) {
      w.ReportProgress(i);
      // do tasks
    }
    e.Result = SomethingYouWantReturned();
  }

  private void worker_ProgressChanged(object sender, ProgressChangedEventArgs e) {
    if (!ok) {
      worker.CancelAsync();
    }
  }

  private void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e) {
    if (e.Error != null) {
      ok = false;
      MessageBox.Show(this, e.Error.Message, "Error!");
    } else {
      var item = (TypeYouWantedReturned)e.Result;
      Console.WriteLine("Do something with `item`.");
    }
  }

} 
```

# java - 在 Java 应用程序中引用 JAXB 生成的类

> ID：12899719
> 
> 赞同：0
> 
> 时间：2012-10-15T16:16:13.580
> 
> 标签：java, jaxb, dry

我有一个应用程序，我正在考虑使用使用 JAXB 从 XSD 生成的 Java 类。由于 DRY 原则，我觉得我应该将类生成作为构建过程的一部分，而不是将它们包含在源代码控制中。

但是，如果这样做，如何编写引用要生成的 Java 类的客户端代码？如果我在类生成之后编译代码，我想构建会正常工作，但是写入一个不存在的 API（仅在构建时生成）似乎很奇怪。

关于这个问题，在客户端代码中引用 JAXB 生成的类的通常做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:22:10.190

这是绝对正常的。在我之前的工作中，我们使用 JAXB 生成的类已经三年了。因此，将“.xsd”文件和 ant/maven 任务（wsimport、xjc 等）置于版本控制之下，并将此 xsd 文件视为主要文档。在您的情况下生成的 java 代码是辅助文档（如普通 java 文件生成的 javadocs）。所以这些文档不应该被置于版本控制之下（除非你想做一些集成的 vcs diff）。

# objective-c - 以前工作的代码仅在 iOS5 中作为具有 EXC_BAD_ACCESS 代码 = 1 的静态库崩溃

> ID：12899720
> 
> 赞同：-1
> 
> 时间：2012-10-15T16:16:15.477
> 
> 标签：objective-c, ios, background, location, static-libraries

因此，我使用 Kyle 在此处发布的通用框架项目将许多类捆绑在一起作为静态框架：[https ://github.com/kstenerud/iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework)

事情在 iOS 5.0 到 6.0 上编译和运行都很好，现在已经有几个月了——我通常只是将生成的框架复制到我的项目中，链接起来，然后使用它。它对大多数类使用 ARC。

最近，我在 xcode 4.5 中从头开始创建了一个静态库项目，并将框架中的所有类复制到其中。它直接编译，就像我将它添加到的项目（以前与框架一起使用）一样，但是当我在带有 iOS 5.1.1 的 iPhone 4 上运行它时，它在运行时崩溃并显示 EXC_BAD_ACCESS 消息并且不突出显示与崩溃相关的任何特定代码。一切都在 iOS 6.0 模拟器上运行良好，我拥有运行 iOS 6 的 iPhone 4S。

我发现的最多的是错误发生在一个（相当大的）块中，该块注册为后台进程并使用位置管理器。我目前正在重新安装 5.1 模拟器，看看它是否也崩溃了。

处理静态库和静态框架的方式是否存在我可能不知道的重大差异？iOS 5 和 6 在这方面有什么显着差异吗？我已经使用了一些链接器标志，包括 -ObjC 和 -all_load。是否有任何有助于我发布的代码或错误字符串？我还没有包括任何东西，因为我不完全确定问题出在哪里......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:23:13.840

在 Apple 开发板上进行了一些讨论后，我们发现我在项目构建设置中使用 iOS 6.0 的 iOS 部署目标来编译静态库。将其切换到 iOS 5.0，瞧，它无处不在。

为了让以后遇到这种情况的人清楚（使用 Xcode 4.5：在文件树中单击您的根 Xcode 项目，然后单击您的项目名称（而不是您的目标），然后在“信息”选项卡下查看拉动-向下显示“iOS 部署目标”并将其切换到您想要支持的最低操作系统版本。

# javascript - 使用 perl 执行所有 JavaScript 页面

> ID：12899721
> 
> 赞同：0
> 
> 时间：2012-10-15T16:16:17.433
> 
> 标签：javascript, perl, web-scraping

> **可能重复：**
> [如何使用 Perl 获取动态 Web 内容？](https://stackoverflow.com/questions/1392005/how-can-i-get-dynamically-web-content-using-perl)

我一直在审查让 javascript 在网页上执行的方法，但不完全理解一些解决方案。

我将以 TechCrunch 为例。如果您查看 TechCrunch 上的一篇文章，您会在每个页面的顶部看到，它们有一个视觉效果来显示该页面已经完成了多少推文、点赞、评论。如果我想抓取此页面并收集该信息，perl 中是否有解决方案？

我查看了 WWW::Scripter 和 WWW::Mechanize::Plugin::JavaScript。可能是因为我不完全了解他们提供了什么。但是有没有办法让我传入一个 URL 并让它在页面上运行 javascript，就像浏览器一样，而不必传递变量或任何其他特殊的东西来让它执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:19:39.577

这是很难做到的。您实际上会让您的 Perl 运行一个完整的浏览器引擎，该引擎加载并运行所需的页面，然后检测页面何时加载，您将不得不以某种方式进入该浏览器引擎以访问 DOM（可能通过注入javascript) 从该页面读出值。之所以如此复杂，是因为您想要的数据不在页面 HTML 中，而是通过 javascript 插入页面中。

更实用的解决方案将涉及逆向工程，页面本身从中获取数据，然后从服务器上的 perl 构建您自己的 Web 调用，从页面获取数据的同一位置获取数据。

在任何一种情况下，如果您不使用公共的、记录在案的 API，如果主机更改了他们获取数据的方式，您的方法随时可能中断。

# c# - ObjectQuery 上的通用包含实际上不包含任何内容

> ID：12899723
> 
> 赞同：0
> 
> 时间：2012-10-15T16:16:21.800
> 
> 标签：c#, generics, entity-framework-4, eager-loading

今天我尝试修改我现有的通用 GetAll 方法以使用急切的包含。我启用了延迟加载，但我想为一些特定的缓存优化做预先加载。

```
 public IQueryable<T> GetAll<T>(List<string> eagerIncludeList) where T : EntityObject, new()
    {
        var entitySet = String.Format("[{0}]", FetchEntitySetName<T>());
        ObjectQuery<T> q = this.db.CreateQuery<T>(entitySet);

        foreach (string x in eagerIncludeList) {
            q.Include(x);
        }
        return q;
    } 
```

上面的代码不起作用（至少不急于加载），用例如调用它

```
DB.GetAll<PageConfig>(new List<string>() {"Containers"}) 
```

不为我的 PageConfigs 加载相关的容器， **但是** 当硬编码包含时，它确实有效，所以我确定名称“容器”是正确的

```
var example = db.PageConfigSet.Include("Containers").ToList(); 
```

这给出了 example.First().Containers.IsLoaded = true;

关于为什么使用 CreateQuery 的通用代码不起作用，但使用硬编码的 ObjectSet 的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:18:19.337

`q.Include(x)`返回一个`ObjectQuery<T>`包含该表的新表。

您没有对返回值做任何事情。

# sql - SQL - 检查一个表中的所有列是否也存在于另一个表中

> ID：12899727
> 
> 赞同：2
> 
> 时间：2012-10-15T16:16:38.040
> 
> 标签：sql, sql-server-2008

我在代表客户交易的 MS SQL DB 中有 2 个表（比如 A 和 B）。两者共享一列（例如列 X）。

理想情况下，表 B 中的信息是表 A 中信息的子集。

如果表 B 中的所有值都存在于表 A 中，我可以运行 SQL 查询来检查基于 X 列的值吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:18:22.970

```
select X
from A
LEFT OUTER JOIN B on A.x = B.X
WHERE B.X IS NULL 
```

从表`A`中获取不在表中的所有记录`B`。或者

```
select X
from B
LEFT OUTER JOIN A on A.x = B.X
WHERE A.X IS NULL 
```

从表`B`中获取不在表中的所有记录`A`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T16:19:09.883

这是检查表 A 中是否缺少表 B 行的检查。

```
SELECT b.*
    FROM Table_B b
    WHERE NOT EXISTS(SELECT 1
                         FROM Table_A a
                         WHERE a.x = b.x); 
```

# vba - 从列表或数组中找出不包括某些元素的最小值

> ID：12899729
> 
> 赞同：3
> 
> 时间：2012-10-15T16:16:44.670
> 
> 标签：vba, vba, excel

*   我有一个变量列表，我需要找到它的最小值并评估为候选值，以将不同的相关值增加 1。
*   但是，不应考虑已经等于 100（如百分比）的变量，因为它们不能增加到超过 100。

（确定变量是 a，增量值是 b）

```
a1 = 0.5,
a2 = 0.6,
a3 = 0.2,
myArray(0) = a1
myArray(1) = a2
myArray(2) = a3
b1 = 0,
b2 = 10,
b3 = 100 
```

**我当前的代码**

```
If b1 = 100 Then
myArray(0) = null (empty, something to remove it from consideration in min function)
End IF
If b2 = 100 Then
myArray(1) = null
End IF
If b3 = 100 Then
myArray(2) = null
End IF
minvalue = Application.WorksheetFunction.Min(myArray(0), myArray(1), myArray(2))
'also tried: minvalue = Application.WorksheetFunction.Min(myArray)
If minvalue = a1 Then
b1 = b1 +1
Else If minvalue = a2 Then
b2 = b2 +1
Else If minvalue = a3 Then
b3 = b3 +1
End IF 
```

我想让代码注意，即使 a3 是最小值，b3 也不能再增加，所以下一个最小值是 a1，因此 b1 增加 1。

此功能在常规 excel 电子表格中确实有效。我可以制作一个值列表，然后在它们下面的单元格中键入：`=Min(A1,B1,C1)`where A1 = a1 in my example, and B2 = a2 in my above example, etc. 如果我在 C1 中键入 Null，则 min 函数等于 a1 而没有问题。

但是，当我尝试在[vba](/questions/tagged/vba "显示标记为“vba”的问题")中做同样的事情时，只要 myArray 中的元素为 Null，minvalue 就会一直等于 0。

我还研究过尝试使用循环手动确定最小值，但它非常难看，我希望尽可能保持代码干净。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:22:20.503

这使用循环，但我会认为这是相当干净的代码。

```
Sub test()

    Dim a(1 To 3) As Double
    Dim b(1 To 3) As Double
    Dim check(1 To 3) As Boolean
    Dim lowestIndex As Integer
    Dim lowestValue As Double

    Dim i As Integer
    Dim j As Integer

    a(1) = 0.5
    a(2) = 0.6
    a(3) = 0.2

    b(1) = 0
    b(2) = 10
    b(3) = 100

    'initialize to  everything initially
    For i = 1 To UBound(a)
        If (b(i) >= 100) Then
            check(i) = False
        Else
            check(i) = True
        End If
    Next i

    Dim numbTimesToDoStuff As Integer
    numbTimesToDoStuff = 100

    'go through this process however many times you need
    For i = 1 To numbTimesToDoStuff
        'reset each iteration
        lowestValue = 99999

        'find minimum value and index each time
        For j = 1 To UBound(a)
            If (check(j) = True) Then
                If (a(i) < lowestValue) Then
                    lowestValue = a(i)
                    lowestIndex = i
                End If
            End If

        Next j

        'check if no values were found to be lowest and valid
        If (lowestValue = 99999) Then
            MsgBox ("Error: not checking any values!")
        End If

        'update appropriate "b"
        b(lowestIndex) = b(lowestIndex) + 1
        'check if you've reached 100 and stop future checks
        If (b(lowestIndex >= 100)) Then
            check(lowestIndex) = False
        End If

    Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T05:34:19.283

您可以使用`Filter`从数组中删除值。

在这种情况下`Filter`，用于从数组中删除`100`值，然后`EVALUATE`用于取剩余数组的最小值

```
Sub Test2()
Dim MyArray()
MyArray = Array(900, 112, 100, 122, 196)
MsgBox Evaluate("Min(" & Join(Filter(MyArray, 100, False), ",") & ")")
End Sub 
```

# html - CSS Flex 项之间的静态填充

> ID：12899731
> 
> 赞同：7
> 
> 时间：2012-10-15T16:16:56.593
> 
> 标签：html, css, webkit, flexbox

我正在尝试在 CSS 中创建一个灵活的布局，该布局将根据客户的分辨率进行包装。

例如，在横向（1024px 宽）的 ipad 上，我想显示以下内容：

![在此处输入图像描述](../Images/897a4eedb3837910134a918f0a4e34fb.png)

但是在纵向（600px 宽）的剧本上，我想显示以下内容：

![在此处输入图像描述](../Images/0d0c4fcb9fb018754407b8e7e4aaf8e6.png)

除了 20px 的边距外，我*几乎所有的东西都在工作。*我似乎无法弄清楚如何指定包装元素的边距。

这是我的代码：

HTML：

```
<div class="box-row-fluid">
     <div class="col">Box 1</div>
     <div class="col">Box 2</div>
</div> 
```

CSS：

```
.box-row-fluid {
    display: -webkit-flex;
    -webkit-flex-flow: row wrap;
}

.box-row-fluid > .col {
    -webkit-flex: 1 400px;
    background: #fff;
} 
```

代码假定浏览器是一个有效的 webkit 浏览器。

我会很感激一些帮助。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:20:32.280

您当然可以这样做[**My Fiddle**](http://jsfiddle.net/GrTfs/)（已编辑`background color`以提高边距可见性）

CSS

```
.col:nth-child(1) {
   margin-bottom: 20px;
} 
```

要在 2 之间水平添加边距，`div`您可以使用[**@media 查询**](http://www.css3.info/preview/media-queries/)特定分辨率并添加`margin-right: 20px;`另一个

解释：使用`:nth-child(1)`因为你同时`class="col"`使用`<div>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T16:20:36.170

为什么不包括 twitter 引导程序？

它将与此一起工作。

```
<div class="row-fluid">
    <div class="span6">
        Content box 1
    </div>
    <div class="span6">
        Content box 1
    </div>
</div> 
```

您唯一需要包括的是“网格系统”非常小而且效果很好！

# android - 位置有时有时不

> ID：12899732
> 
> 赞同：0
> 
> 时间：2012-10-15T16:16:59.520
> 
> 标签：android, geolocation

// 在此我有时会获取位置，有时位置未检索到我已打开 gps 和 gprs 并添加了所需的权限。我得到了真正的问题是什么

包 com.example.addr;

```
import java.util.List;
import java.util.Locale;

 import android.location.Address;
 import android.location.Criteria;
 import android.location.Geocoder;
 import android.location.Location;
 import android.location.LocationListener;
 import android.location.LocationManager;
 import android.os.Bundle;
 import android.app.Activity;
 import android.content.Context;
 import android.view.Menu;
  import android.widget.TextView;

  public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    LocationManager locationManager; 
    String context = Context.LOCATION_SERVICE; 
    locationManager = (LocationManager)getSystemService(context); 

    Criteria crta = new Criteria(); 
    crta.setAccuracy(Criteria.ACCURACY_FINE); 
    crta.setAltitudeRequired(false); 
    crta.setBearingRequired(false); 
    crta.setCostAllowed(true); 
    crta.setPowerRequirement(Criteria.POWER_LOW); 
    String provider = locationManager.getBestProvider(crta, true); 

 // String provider = LocationManager.GPS_PROVIDER; 
    Location location = locationManager.getLastKnownLocation(provider); 
    updateWithNewLocation(location); 

    locationManager.requestLocationUpdates(provider, 2000, 10, locationListener); 
    } 
private final LocationListener locationListener = new LocationListener() 
{ 

@Override 
public void onLocationChanged(Location location) { 
updateWithNewLocation(location); 
} 

@Override 
public void onProviderDisabled(String provider) { 
updateWithNewLocation(null); 
} 

@Override 
public void onProviderEnabled(String provider) { 
} 

@Override 
public void onStatusChanged(String provider, int status, Bundle extras) { 
} 

}; 

private void updateWithNewLocation(Location location) { 
    String latLong;
    TextView myLocation; 
    myLocation = (TextView) findViewById(R.id.myLocation); 

    String addressString = "Sorry  No Address Found"; 

    if(location!=null) { 
        double lat = location.getLatitude(); 
    double lon = location.getLongitude(); 
    latLong = "Lat:" + lat + "\nLong:" + lon; 

    double lattitude = location.getLatitude(); 
    double longitude = location.getLongitude(); 
    Geocoder gc = new Geocoder(this,Locale.getDefault()); 
    try { 
    List<Address> addresses= gc.getFromLocation(lattitude, longitude, 1); 
    StringBuilder sb = new StringBuilder(); 
    if(addresses.size()>0) { 
    Address address=addresses.get(0);
    for(int i=0;i<address.getMaxAddressLineIndex();i++)
        sb.append(address.getAddressLine(i)).append("\n");
    sb.append(address.getLocality()).append("\n"); 
    sb.append(address.getPostalCode()).append("\n"); 
sb.append(address.getCountryName()); 
} 
    addressString = sb.toString(); 
    } 
    catch (Exception e) { 
    } 
    } else { 
    latLong = " NO Location Found "; 
    } 

    myLocation.setText("Current Position is :\n"+ latLong + "\n"+  addressString ); 
       }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:58:14.617

我建议明确告诉 Android 你想要哪个位置提供程序。使用标准可以产生粗略的结果。Criteria.POWER_LOW 的设置可能会不考虑 GPS，因为 GPS 被认为是高功率消耗。

例如，对于 GPS 提供商：

```
String provider = LocationManager.GPS_PROVIDER; 
...
locationManager.requestLocationUpdates(provider, 2000, 10, locationListener); 
```

和网络提供商：

```
String provider = LocationManager.NETWORK_PROVIDER; 
...
locationManager.requestLocationUpdates(provider, 2000, 10, locationListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:33:39.317

GPS 将无法在屋檐下工作，也无法让您更好地尝试使用网络提供商。[看到这个帖子](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)很有帮助

# facebook - 如何阻止其他人对我的帖子发表评论和“喜欢”我的帖子？

> ID：12899736
> 
> 赞同：-7
> 
> 时间：2012-10-15T16:17:26.727
> 
> 标签：facebook, comments

如何阻止其他人在我的帖子上发表评论和喜欢我的帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:24:07.570

您可以使用 facebook graph API 定期轮询您的帖子、列举评论并删除它们。你不能阻止人们喜欢你的帖子。

不知何故，我认为这不是您正在寻找的答案。

# c++ - 为最终的未来自定义内存分配器做准备

> ID：12899737
> 
> 赞同：5
> 
> 时间：2012-10-15T16:17:28.910
> 
> 标签：c++, memory-management, c++11

我的项目在 c++11 中，使用 vs2012。现在我觉得不需要使用自定义内存管理，但是，我应该采取什么安排来促进最终的未来修改？

我想为“new”/“new[]”/“delete”/“delete[]”使用宏，为容器和智能指针使用 typedef。

最好的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:34:31.880

从我的角度来看，您所要做的基本上就是决定您将在整个实现过程中使用的某个约定。让您的架构分配器意识到这一点的一个很好的模板是查看 STL 容器是如何实现这一点的，并尝试为您设计类似它们的数据结构。例如，如果您在[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)接口上查看此容器的第二个参数，则始终是分配器类型。**分配器**必须遵循特定的[接口](http://en.cppreference.com/w/cpp/memory/allocator)，该接口允许用自定义的分配器轻松替换默认分配器实现。

但是回到您编写的代码：在我从事的一个项目中，我们将其定义如下。对于一个应该消耗大量内存的对象，我们定义了一个模板化的超类，它允许指定一个自定义分配器。

```
template<class AllocatedClass, typename Allocator=std::allocator<AllocatedClass>
class AbstractMyClass {
public:
 static void *operator new(size_t sz){ /*...*/ }
 static void operator delete(void *p){ /*...*/ }
}; 
```

Now, if you define a subclass of this you would:

```
class MyClass : public AbstractMyClass<MyClass> {
}; 
```

Thus the new object `MyClass` will use the specified allocator of the parent class. If you now implement you own allocator you can simply replace either the default template parameter in the super class or you can specify it explicitly in your sub-class.

Using this approach you are more or less safe in using a custom allocator at a later point in time.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:23:31.313

在现代 C++ 代码中，`new/new[]/delete/delete[]`应该*很少*使用. 事实上，它们容易泄漏并且异常不安全；此外，一般来说，*拥有*原始指针应该限制在 RAII 类中，并使用适当的析构函数进行清理。

您应该改用**STL 容器**`std::vector`（而不是`new[]/delete[]`）和**智能指针**（如`shared_ptr`,等`unique_ptr`）。

对于 STL 容器，它们确实支持**自定义内存分配**。有关骨架自定义分配器的示例，请参阅[Mallocator](http://blogs.msdn.com/b/vcblog/archive/2008/08/28/the-mallocator.aspx)（您可以使用特殊的分配技术（如池内存分配）对其进行自定义）。

# perl - Perl 冻结，直到所有 system() 命令完成

> ID：12899740
> 
> 赞同：0
> 
> 时间：2012-10-15T16:17:44.717
> 
> 标签：perl, command, system, freeze, tk

下面是一个带有 TK 的 Perl 代码示例：

```
my $btn_start = $mw->Button(-image => $img_start, -command => \&start)->pack;
MainLoop;

sub start{
my $topWin = $mw -> Toplevel;
my $entry = $topWin->Label(-textvariable=>\my $process)->pack();
$process="start 1st";
system("long_command.exe");
$process.="\nstart 2nd";
system("another_command.exe");
.
.
.
$process.="\nstart nth";
system("ncommand.exe");
} 
```

问题是当我按下按钮时，只有在 system() 命令完成运行后才会打开顶层窗口（为什么它们会先于其他任何东西启动？？），而且 $btn_start 在整个过程中仍然是“活动的”。我试图在每个 system() 命令之后实现状态更新。

你能给些建议么？

提前谢谢你，马克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T16:29:55.600

在运行 system() 命令之前，添加一个

```
$mw->update() 
```

陈述。发生的情况是主循环不时更新窗口；在您的情况下，在下一次计划更新发生之前（仅当 start() 返回主循环时才会发生）， system() 被调用并且在它返回之前，不会执行任何其他操作 - 因为一切都在同一个进程中运行.

但是，如果你想正确地做这些事情，你应该分叉你的过程。否则，您的应用程序在命令执行期间将不会反应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:30:29.280

在您的情况下，用户界面（按钮、标签等）和它们运行的​​任务（`system`）都由同一个进程和同一个线程运行。这是编写 GUI 程序的幼稚方法。

为了获得您正在寻找的效果——一个活动的用户界面，而其他事情在后台发生——你需要研究如何同时运行它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T16:53:11.357

[注意：我无权访问正在运行的 Tk，因此以下是基于第一原则和文档的推测。你被警告了。]

Tk 没有重新获得控制权以更新 UI。正在发生的事情是您已经创建了新的`TopLevel`，但没有将控制权交还给以`MainLoop`允许绘制它。最终，`start`返回，将控制权交还给`MainLoop`，它一次执行所有挂起的更新。

如果您希望在您处于潜艇中间时更新 UI，您必须定期调用`update`最外面的有趣`Widget`以便将控制权交还给`MainLoop`一个咒语。在你的情况下，这看起来是

```
$mw->update(); 
```

另请参阅`update`perldoc [Tk::Widget](http://search.cpan.org/~srezic/Tk-804.030/pod/Widget.pod)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T10:34:13.433

问题是在等待子进程完成时`system`停止*一切（在同一个线程中）。*这包括停止 GUI 事件队列的服务，该队列用于驱动各种事情（包括重绘）。考虑使用[Proc::Background](http://search.cpan.org/~bzajac/Proc-Background-1.10/lib/Proc/Background.pm)模块异步运行子进程（使用常规计时器来确定一个任务是否已完成以及下一个任务是否应该开始，假设一次只执行一项对您的代码很重要）。

# python - Python 3：尝试根据 i 的函数迭代字母表行

> ID：12899747
> 
> 赞同：1
> 
> 时间：2012-10-15T16:18:19.207
> 
> 标签：python, python-3.x, repeat, alphabet

我正在尝试编写一个执行以下操作的程序：

在这个程序中，我们在线打印出`i**q % p`字母表中的字母`i` ，例如，如果`q=2`我们`p=12`想要打印：

```
1**2 % 12 = 1
2**2 % 12 = 4
3**2 % 12 = 9
4**2 % 12 = 4
5**2 % 12 = 1 
```

...所以输出的前五行将是：

```
a                                                                             
bcde                                                                       
fghijklmn                                                                  
opqr                                                                       
s 
```

就我而言，确定字符数的函数是`(i**2)%9`，但它是相同的想法。具体任务如下：

*“按顺序使用字母 az 打印`1834`行，这样行号 i 将使用`(i**2 ) % 9`字母。用于打印行的第一个字母`1834`是：`_________`”*

我已经开始编码，我有两个主要问题。首先，一旦我到达“z”（或更可能是“第 25 位”），如何让字母重新开始？
另外，我应该为程序做什么？到目前为止，我有：

```
letters="abcdefghijklmnopqrstuvwxyz"
for i in range[1,1834]:
    x=((i**2)%9)
    print(letters[]) 
```

...但我不知道如何进行。我打算尝试切片方法，但我不知道。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:58:36.877

这是您可以使用的东西`itertools`：

```
from string import ascii_lowercase
from itertools import cycle, islice

letters = cycle(ascii_lowercase)
for num in (1, 4, 9, 4, 1, 13, 12, 9, 5):
    print (''.join(islice(letters, num)))

#a
#bcde
#fghijklmn
#opqr
#s
#tuvwxyzabcdef
#ghijklmnopqr
#stuvwxyza
#bcdef 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:34:34.713

看来这应该是作业，所以我会这样回答：

*   要从索引切片`a`到索引`b`，您可以使用`my_list[a:b]`
*   要在达到 26 时从 0 重新开始计数，您需要迭代器的**余数**`i`除以字母数 26。`a%b`是`a`除以的余数`b`。
*   `range(n)``0`是一个从to返回数字的函数`n-1`，因此您总共会得到 n 个元素。它是一个函数，所以你应该使用括号，即`range(1834)`不`range[1834]`（即切片）。
*   另请注意，总共`range(1,1834)`会有`1834-1=1833`元素，这不是你需要的......
*   有一个名为的包`string`，其中包含字母字符列表（小写、大写、数字……）。参见例如[string.lowercase](http://docs.python.org/library/string.html#string.lowercase)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T16:45:50.190

这两个问题是相互关联的：您可以使用[itertools](http://docs.python.org/release/3.1.5/library/itertools.html)中的循环来获取一个迭代器，该迭代器将无限循环遍历字母表（或任何其他字符串，就此而言），并获取给定行的 n 个字母，您可以调用 next() on迭代器 n 次。

你的问题看起来像家庭作业，所以我不会让你的教育短路，而是举一个在第 n 行打印 n 个字母的类似问题的例子：

```
import itertools
str = "abcdefghijklmnopqrstuvwxyzicopiedthisfromstackoverflow"
it = itertools.cycle( str )
for i in range( 1 , 10 ):
    line=""
    for j in range( i ):
        line+=it.next()
    print i,line 
```

酌情编辑:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T16:26:22.577

尝试以下解决方案。您正在字母上移动一个框架，因此每次新的循环迭代开始时，变量`start_position`应该记住上一次迭代在哪个字母处停止。框架的大小由您的`x`计算确定。

如果你想回到字母表的开头，它应该以字母表的长度为模。`end_position = end_position % 26`

```
letters="abcdefghijklmnopqrstuvwxyz"
alphabet_length = len(letters)
start_position = 0
for i in range(1,1834):
    x=((i**2)%9)
    end_position = start_position + x
    end_position = end_position % alphabet_length
    if end_position < start_position:
         print letters[start_position:alphabet_length-1] + letters[0:end_position]
    else:
         print letters[start_position:end_position] 
    start_position = end_position 
```

# jquery - 将 div 克隆到 DOM 一次

> ID：12899751
> 
> 赞同：1
> 
> 时间：2012-10-15T16:18:34.383
> 
> 标签：jquery

我有以下代码；

```
$('[class*="time-span"]').on('click', function () {
    var modelPanel = $('.model-detail-panel');
    modelPanel.clone().insertAfter('.timeline', this).slideToggle('fast', function () {
        console.log(this);
        $('html,body').animate({
            scrollTop: $(this).offset().top
        }, 500);
    });
}); 
```

克隆部分运行良好，但是我只希望“modelPanel”在 DOM 中出现一次（每次单击 [class*="time-span"] 时）。目前它在每个“时间线”类之后被多次插入，导致插入了相当多的 div 实例。

我怎样才能让它每次点击只插入一次？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:23:24.620

使用`:first` [选择器](http://api.jquery.com/first-selector/)：

```
$('[class*="time-span"]').on('click', function () {
    var modelPanel = $('.model-detail-panel');
    modelPanel.clone().insertAfter('.timeline:first', this).slideToggle('fast', function () {
        console.log(this);
        $('html,body').animate({
            scrollTop: $(this).offset().top
        }, 500);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:19:57.080

可能是因为您是基于`.class`.

您可以在 class 中有多个元素`.model-detail-panel`，因此您要克隆所有元素，而不仅仅是一个。

尝试基于其他属性进行克隆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:22:19.347

您可能需要比在之后插入更具体，`.timeline`因为 jQuery 将在每个元素上执行它在您的页面上找到的`insertAfter`一个类。`.timeline`

尝试使用只在一个地方找到的选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T16:24:50.937

您可以通过删除类来做到这一点。如果类将被删除而不是单击事件将不起作用，或者这将只插入一次

```
$('[class*="time-span"]').on('click', function () {
    var modelPanel = $('.model-detail-panel');
    modelPanel.clone().insertAfter('.timeline', this).slideToggle('fast', function () {
        console.log(this);
        $('html,body').animate({
            scrollTop: $(this).offset().top
        }, 500);

 $(this).removeClass("time-span");
    });
}); 
```

# perl - 使用 Perl 子例程得到错误的结果

> ID：12899757
> 
> 赞同：1
> 
> 时间：2012-10-15T16:19:02.217
> 
> 标签：perl

我有一个看起来像这样的测试文件：

```
my $int = new Services::Plugins::FTP::ftp;
$int->AddUser("durr"); 
```

该模块具有以下代码：

```
sub AddUser {

my( @username ) = @_;
print "@_\n";  

} 
```

但我的结果看起来像： Services::Plugins::FTP::ftp=HASH(0x2490160)durr

我只想要'durr'。

为什么我会得到额外的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T16:22:32.577

您正在处理面向对象的 Perl。如果您在对象实例上调用函数，例如在您的情况下使用`$instance->function()`，那么第一个参数是对实例本身的引用。它最常被称为`$self`。

一个常用的习惯用法是这样编写实例方法：

```
sub some_method {
  my ($self, @args) = @_;
} 
```

[我建议您在perlootut 手册页](http://perldoc.perl.org/perlootut.html)中阅读 Perl 的面向对象系统（一个很好的教程）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T16:22:55.963

第一个论点`$foo->bar()`是`$foo`

```
sub AddUser {
    my($self, @username ) = @_;
    print "@_\n";  
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T16:23:36.607

您正在使用面向对象的方法（`$int->AddUser("durr")`是一种*方法*调用）。调用方法时，第一个参数始终是应用该方法的对象或类。

# python - 将内容保持在一种模式到另一种模式之间

> ID：12899758
> 
> 赞同：0
> 
> 时间：2012-10-15T16:19:07.037
> 
> 标签：python, regex

我想解析 html 内容并将内容从 A 保留到 B 例如：

```
some content1...
<!-- begin_here -->
some content2
<!-- end_here -->
some content3 
```

会变成

```
<!-- begin_here -->
some content2
<!-- end_here --> 
```

现在，我用 sed 来做：

```
sed '/begin_here/,/end_here/!d' file.html > file2.html 
```

但是，我想使用 python 重写它以实现跨平台目的。我对python中的正则表达式不是很熟悉。能给我一些提示吗？非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:27:21.453

您可以在没有正则表达式的情况下执行此操作，如下所示：

```
add_next = False # Do not add lines
# Until you encounter the first "start_here", which sets it to True
with open("file1.html", "r") as in_file:
    with open("file2.html", "w") as out_file:
        for line in in_file:
            if "end_here" in line: # or line.startswith("end_here") for example
                add_next = False
            if add_next:
                out_file.write(line)
            if "begin_here" in line:
                add_next = True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T16:37:40.673

使用多行正则表达式

```
import re
pat = re.compile('''^<!-- begin_here -->.*?<!-- end_here -->$''', 
                 re.DOTALL + re.MULTILINE)

with open("file.txt") as f:
    print pat.findall(f.read()) 
```

# java - 在 android EditText 中使解析更容易

> ID：12899764
> 
> 赞同：0
> 
> 时间：2012-10-15T16:19:34.093
> 
> 标签：java, android, parsing, android-edittext

我有一个带有几个 EditTexts 的应用程序。用户留空，程序计算空变量。这是启动它的按钮的 onClickListener。我希望在切换之前完成所有解析，这样我只需要解析所有条目一次，然后为空条目输入 0，因为这会产生错误。

如何简化此代码？

```
public void buttonCalc() {
    calc.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            pv = (EditText) getActivity().findViewById(R.id.pv_pv);
            fv = (EditText) getActivity().findViewById(R.id.pv_fv);
            r = (EditText) getActivity().findViewById(R.id.pv_r);
            n = (EditText) getActivity().findViewById(R.id.pv_n);
            t = (EditText) getActivity().findViewById(R.id.pv_t);
            answer = (TextView) getActivity().findViewById(R.id.pv_answer);
            //check for fields and choice
            if (pv.getText().toString().equals("")) {emptyfields++;choice = 1;}
            if (fv.getText().toString().equals("")) {emptyfields++;choice = 2;}
            if (r.getText().toString().equals("")) {emptyfields++;choice = 3;}
            if (n.getText().toString().equals("")) {emptyfields++;choice = 4;}
            if (t.getText().toString().equals("")) {emptyfields++;choice = 5;}
            if (emptyfields > 1) {MiscMethods.ErrorToast(1);}
            else{
                emptyfields--;
                try {

                } catch (Exception e) {
                }
                switch (choice) {
                case 1:// pv
                    double fv1 = Double.parseDouble(fv.getText().toString());
                    double r1 = Double.parseDouble(r.getText().toString());
                    double n1 = Double.parseDouble(n.getText().toString());
                    double t1 = Double.parseDouble(t.getText().toString());
                    double result1 = fv1/(Math.pow(1+(r1/n1),n1*t1));
                    result1 = MiscMethods.rounder(result1, 2);
                    answer.setText(answer_pv + result1);
                    break;
                case 2:// fv
                    double pv2 = Double.parseDouble(pv.getText().toString());
                    double r2 = Double.parseDouble(r.getText().toString());
                    double n2 = Double.parseDouble(n.getText().toString());
                    double t2 = Double.parseDouble(t.getText().toString());
                    double result2 = pv2*(Math.pow(1 + (r2 / n2), n2 * t2));
                    result2 = MiscMethods.rounder(result2, 2);
                    answer.setText(answer_fv + result2);
                    break;
                case 3:// r
                    double pv3 = Double.parseDouble(pv.getText().toString());
                    double fv3 = Double.parseDouble(fv.getText().toString());
                    double n3 = Double.parseDouble(n.getText().toString());
                    double t3 = Double.parseDouble(t.getText().toString());
                    double result3 = ((Math.pow(fv3 / pv3, (1 / (n3 * t3)))) - 1)* n3;
                    result3 = MiscMethods.rounder(result3, 4);
                    answer.setText(answer_r +" "+ result3 + " / " + (result3*100)+"%");
                    break;
                case 4:// n
                    MiscMethods.ErrorToast(2);
                    break;
                case 5:// t
                    double pv5 = Double.parseDouble(pv.getText().toString());
                    double fv5 = Double.parseDouble(fv.getText().toString());
                    double n5 = Double.parseDouble(n.getText().toString());
                    double r5 = Double.parseDouble(r.getText().toString());
                    double result5 = (Math.log((fv5 / pv5))) / ((Math.log((1 + (r5 / n5)))) * n5);
                    result5 = MiscMethods.rounder(result5, 2);
                    answer.setText(answer_t +" "+ result5);
                    break;
                default:
                    MiscMethods.ErrorToast(3);
                    break;
                }// switch ends
            }// else ends

        }

    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:27:59.723

你可以做的是这样的：

```
//initialise doubles with default 0 value when string is empty
double pvDbl = getDouble(pv);
double fvDbl = getDouble(fv);
//etc 
```

该`getDouble`方法可能类似于：

```
private static double getDouble(EditText et) {
    if(et.getText().length() == 0) {
        return 0;
    }
    try {
        return Double.parseDouble(et.getText().toString());
    } catch (NumberFormatException e) {
        return 0; //default value for invalid entries?
                  //Or maybe show an error message?
    }
} 
```

然后，您可以替换您的`switch`with`if`语句：

```
if (pvDbl == 0 ) {
    //formula for pv null
} else if (fvDbl == 0) {
    //formula for fv null
} //etc. 
```

请注意，您还需要处理`0`条目（在我建议的代码中，您无法区分空条目`""`和`"0"`.

# wpf - 在 XAML 中触发依赖属性的 MVVM 方法

> ID：12899766
> 
> 赞同：1
> 
> 时间：2012-10-15T16:19:38.353
> 
> 标签：wpf, xaml, triggers

我创建了一个帮助类来托管自定义依赖属性。我创建了一个有点复杂的自定义 UserControl 对象，并且经常更新它的布局。我想在附加属性之一更改其值时触发动画。

这是托管 DP 的帮助程序类的示例。

```
namespace testProject
{
  public class MenuHelper : DependencyObject
  {
    public static readonly DependencyProperty IsMenuReversedProperty = DependencyProperty.RegisterAttached(
      "IsMenuReversed",
      typeof(Boolean),
      typeof(MenuHelper),
      new PropertyMetadata(false));
  }
} 
```

这是我希望如何引用 DP 的示例：

```
<UserControl.Triggers>
    <Trigger Property="testProject:MenuHelper.IsMenuReversed" Value="True">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimation Storyboard.TargetName="Bouncy_Bar" Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" To="-1" Duration="0:0:.002"/>
            </Storyboard>
        </BeginStoryboard>
    </Trigger>
    <Trigger Property="testProject:MenuHelper.IsMenuReversed" Value="False">
        <BeginStoryboard>
              <Storyboard>
                  <DoubleAnimation Storyboard.TargetName="Bouncy_Bar" Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" To="1" Duration="0:0:.002"/>
              </Storyboard>
          </BeginStoryboard>
    </Trigger>
</UserControl.Triggers> 
```

我意识到我不能执行上述代码，因为触发器集合只能容纳事件触发器。这让我想到了我的问题：

这个问题的适当解决方案是什么？

我试图制作一个 RoutedEvent 来通知我 IsMenuReversed 的更改，但后来意识到我无法检查 xaml 中 DP 的当前值（据我所知）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:12:29.957

到目前为止，我想出的是只有两个单独的 RoutedEvents。每个州一个。我不是这个解决方案的忠实拥护者，所以我欢迎有人提出任何其他反馈。

这是带有触发两个不同路由事件之一的 DP 的 Helper 类：

```
 namespace TestProject
    {
      public class MenuHelper : DependencyObject
      {
        public static void SetIsMenuReversed(UIElement element, Boolean value)
        {
          if (GetIsMenuReversed(element) != value)
          {
            if (value == true)
              element.RaiseEvent(new RoutedEventArgs(MenuHelper.MenuIsReversedEvent));
            else
              element.RaiseEvent(new RoutedEventArgs(MenuHelper.MenuIsNotReversedEvent));
            element.SetValue(IsMenuReversedProperty, value);
          }
        }
        public static bool GetIsMenuReversed(DependencyObject obj)
        {
          return (bool)obj.GetValue(IsMenuReversedProperty);
        }

        public static readonly RoutedEvent MenuIsReversedEvent = EventManager.RegisterRoutedEvent(
          "MenuIsReversed",
          RoutingStrategy.Direct,
          typeof(RoutedEventHandler),
          typeof(MenuHelper));

        public static readonly RoutedEvent MenuIsNotReversedEvent = EventManager.RegisterRoutedEvent(
          "MenuIsNotReversed",
          RoutingStrategy.Direct,
          typeof(RoutedEventHandler),
          typeof(MenuHelper)); 
      }
    } 
```

这是监听路由事件并为每个事件触发相关情节提要的 Xaml：

```
<UserControl.Triggers>
    <EventTrigger RoutedEvent="testProject:MenuHelper.MenuIsReversed">
          <BeginStoryboard>
              <Storyboard>
                  <DoubleAnimation Storyboard.TargetName="Bouncy_Bar" Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" To="-1" Duration="0:0:.002"/>
              </Storyboard>
          </BeginStoryboard>
   </EventTrigger>
    <EventTrigger RoutedEvent="testProject:MenuHelper.MenuIsNotReversed">
          <BeginStoryboard>
              <Storyboard>
                  <DoubleAnimation Storyboard.TargetName="Bouncy_Bar" Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" To="1" Duration="0:0:.002"/>
              </Storyboard>
          </BeginStoryboard>
   </EventTrigger>
</UserControl.Triggers> 
```

如果您有替代解决方案，请发布它们:)

# ruby-on-rails - 使用 2 个选择复制 Rails Admin HABTM

> ID：12899777
> 
> 赞同：1
> 
> 时间：2012-10-15T16:20:18.993
> 
> 标签：ruby-on-rails, view, has-and-belongs-to-many

我想在我的 Rails 应用程序中复制这个表单元素，我有一个模型，我用多个类别进行分类，我想通过 2 个选择框来处理，但我不知道如何完成它我已经尝试过了有不同的东西，但似乎无法得到它。任何人都知道如何完成此功能或教程？

这是我正在谈论的表格。特别是针对球队/球迷的。请记住，我的联想是正确的，这只是让我不知所措的观点。

[http://rails-admin-tb.herokuapp.com/admin/team/new](http://rails-admin-tb.herokuapp.com/admin/team/new)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:41:09.327

试试这个，例如

```
f.collection_select 'tax_ids', @taxes, :id, :name, {:name => 'line_item[tax_ids][]'} 
```

或者

```
<%= collection_select :user, :role_ids, Role.find(:all, :order => 'name ASC'), :id, :name, { :selected => @user.role_ids }, { :multiple => true, :name => 'user[role_ids][]' } -%> 
```

The :selected option should be in the last option hash, at least in recent versions of Rails. Also, if working with a form_for or fields_for object (f) you can skip the :name option, it seems to be set appropriately. There's no need for accepts_nested_attributes_for - this should work out of the box with a has_and_belongs_to_many relation. Example view code: = `f.collection_select :delivery_method_ids, DeliveryMethod.inactive, :id, :to_s_with_price, {}, { :selected => @user.delivery_method_ids, :multiple => true }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:40:41.230

不就是一种select_multiple吗？如果您想要的是能够对相关对象进行选择，请使用标准 collection_select ( [http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select) )

```
collection_select(:post, :fan_ids, Fan.all, :id, :name, {}, :multiple => true) 
```

您将获得一个标准列表，您可以在其中选择 Ctrl 并单击任意数量的粉丝（或任何相关项目）

如果你想要的是 rails_admin 的实际用户界面，那么看看他们的代码就知道要写什么了。

# android - 自动旋转应在 Android 中以特定角度工作

> ID：12899781
> 
> 赞同：0
> 
> 时间：2012-10-15T16:20:35.890
> 
> 标签：android

自动旋转太快，无法关闭我的活动。

当我旋转应用程序然后在创建时它调用 Web 服务，该服务使用异步任务从服务器加载数据。但是当我旋转太快时，它会关闭我的活动。

我认为如果增加旋转角度，那么问题就解决了......我只想在风景和肖像中旋转一些特定的角度。因为小角度的旋转会导致一次又一次的创建调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:25:54.857

这真的不是这样做的方法。您必须使用一些更精确的传感器，例如陀螺仪。首先，您必须以编程方式检查正在运行的设备是否具有它，因为并非所有设备都支持它。或者，使用磁性或加速度传感器。已经在这里讨论过：

[如何使用 Android 传感器计算旋转角度？](https://stackoverflow.com/questions/8488911/how-to-calculate-rotation-angle-using-android-sensors)

# mysql - 使用我的 SQL 进行数据库设计

> ID：12899782
> 
> 赞同：0
> 
> 时间：2012-10-15T16:20:38.297
> 
> 标签：mysql, database-design, mysql-workbench

第一篇文章，希望我做对了:-)

我遇到了 mySQL 的困难。我正在尝试创建一个数据库，并在 mySQL 工作台中设计了表格和 EER 模型。我刚刚意识到 mySQL 工作台是一种数据库设计工具，用于作为 GUI 来设计数据库，并且我需要 mySQL 来实际创建数据库。我的理解对吗？这可能看起来很傻，但我是 MySQL 的新手，数据库不是我更强的科目之一。

所以我的问题是我是否需要 mySQL 服务器来创建数据库实例，我的理解是正确的还是完全错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:22:33.520

是的，您需要一个运行的服务器来托管您使用[MySQL Workbench](https://www.mysql.com/products/workbench/)生成/修改的数据库。

# php - 防止复选框单击激活下拉菜单

> ID：12899787
> 
> 赞同：0
> 
> 时间：2012-10-15T16:20:57.773
> 
> 标签：php, jquery, html, checkbox, html-table

我正在处理一个动态表，其中第一列/左列中有 2 个复选框，下一个 td 是程序名称和日期，php 循环遍历所有可用程序。

当用户点击一行时，更多信息会通过 jQuery 插件下拉。

就像现在一样，当您单击复选框时，下拉菜单被激活，这不是我需要它做的。

单击复选框时如何停止下拉行？

这全部来自 jExpand 插件：[jExpand](http://www.jankoatwarpspeed.com/examples/expandable-rows/)

头部脚本：

```
<script type="text/javascript">
  $(document).ready(function(){
     $("#report tr:odd").addClass("odd");
     $("#report tr:not(.odd)").hide();
     $("#report tr:first-child").show();

     $("#report tr.odd").click(function(){
         $(this).next("tr").toggle();
         $(this).find(".arrow").toggleClass("up");
     });
     //$("#report").jExpand();
 });
 </script> 
```

文件中的脚本：

```
(function($){
$.fn.jExpand = function(){
    var element = this;

    $(element).find("tr:odd").addClass("odd");
    $(element).find("tr:not(.odd)").hide();
    $(element).find("tr:first-child").show();

    $(element).find("tr.odd").click(function() {
        $(this).next("tr").toggle();
    });

}    
}); 
```

HTML：

```
<table id="report">
    <tr>
        <th>Master/Registration</th>
        <th></th>
        <th>Program Name</th>
        <th></th>
        <th>Date</th>
        <th></th>
    </tr>
    <?php do { ?>
    <tr>
        <td><input name="pid[]" type="checkbox" class="eventCodeCheck" value="<?php echo $row_programs['{table-column}']; ?>" />
            <input name="pid[]" type="checkbox" class="eventCodeCheck" value="<?php echo $row_programs['{table-column}']; ?>" />
        </td>
        <td></td>
        <td><?php echo $row_programs['{table-column}']; ?></td>
        <td></td>
        <td><?php echo $row_programs['format_date']; ?></td>
        <td><div class="arrow"></div></td>
    </tr>
    <tr>
        <td colspan="5">
            <h4>Additional information</h4>
            <ul>
                <li>Info</li>
                <li>Info</li>
                <li>Info</li>
             </ul>   
        </td>
    </tr>

    <?php } while ($query = mysql_fetch_assoc($xxxxxxx)); ?>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:32:38.797

单击复选框时，您需要[停止事件的传播：](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)

```
$('input.eventCodeCheck').click(function(e) {
    e.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:29:00.157

```
$("#report tr.odd").click(function(e){
     if( e.target.type.toLowerCase() == 'checkbox') { 
     }
     else{  
       $(this).next("tr").toggle();
       $(this).find(".arrow").toggleClass("up");
     }
}); 
```

# java - JavaFX 隐藏 ScrollPane 灰色边框

> ID：12899788
> 
> 赞同：27
> 
> 时间：2012-10-15T16:21:13.077
> 
> 标签：java, javafx-2, javafx

有没有办法在 JavaFX 中隐藏 ScrollPane 控件的灰色边框？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-15T17:23:36.863

JavaFX 中的所有控件都可以使用 CSS 样式进行修改。您可能想看一下[参考资料](http://docs.oracle.com/cd/E17802_01/javafx/javafx/1.3/docs/api/javafx.scene/doc-files/cssref.html#region)或[教程](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)。

Gray ScrollPane 的边框实际上是背景中唯一在内容后面可见的部分。所以你可以通过修改背景来改变它：

```
 ScrollPane sp = new ScrollPane();
    sp.setStyle("-fx-background-color:transparent;"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-15T18:14:06.377

或者在 CSS 中

```
.scroll-pane {
    -fx-background-color:transparent;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-06T11:29:22.673

在纯 Java 中，没有 CSS，你需要像这样设置背景，这比 CSS 方法要冗长得多。

```
ScrollPane scrollPane = new ScrollPane();
scrollPane.setBackground(
  new Background(new BackgroundFill(Color.TRANSPARENT, null, null))
); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-21T18:52:48.917

使边框透明将在边缘周围留下 1 个像素的间隙。恕我直言，正确答案是 Jens Piegsa 所链接的那个。 [https://stackoverflow.com/a/17540428/1725096](https://stackoverflow.com/a/17540428/1725096)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-03T01:35:18.840

如果您真的想摆脱应用的任何预定义样式，您可以使用：

```
ScrollPane scrollPane = new ScrollPane();    
scrollPane.getStyleClass().clear(); 
```

这也适用于节点的任何子类型

# php - 重置选择下拉列表的所有数据库连接

> ID：12899791
> 
> 赞同：0
> 
> 时间：2012-10-15T16:21:19.833
> 
> 标签：php, jquery

我正在寻找一种方法来重置所有选择下拉菜单，这些下拉菜单根据过滤器从 MySQL 数据库中提取信息，比如“状态 = 1”。

在一个页面上，我可以选择将状态更改为其他内容，这将使该记录在更改后不会出现在其他选择框中。

我在一个选项卡式 PHP 页面上操作，所以理论上，所有 Select 都在同一个页面上，只是在不同的 Div 中。

我不认为 '.selectedIndex = 0' 选项会起作用，因为我需要重新轮询所有数据。

我想要一些利用 jquery 或 PHP 的东西。

希望有人可以帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:46:39.757

经过一段时间环顾四周并没有收到有关此问题的任何解决方案，我决定使用“window.location.reload(true)”方法。

...万一有人想知道...

# sql - SQL 字符串操作 [获取 '(' 左侧的所有文本]

> ID：12899793
> 
> 赞同：12
> 
> 时间：2012-10-15T16:21:34.737
> 
> 标签：sql, sql-server, tsql

我有一些看起来像这样的数据：

```
SourceOfBooking
----------------
Company1 (Foo)
Company2 (Bar)
Company3 (Foo1)
Company4 (Foo2) 
```

我正在寻找转换它，所以我的数据只显示：

```
SourceOfBooking
----------------
Company1
Company2
Company3
Company4 
```

我试过了：

```
LEFT(SourceOfBooking, CHARINDEX(';', SourceOfBooking) ) 
```

没有运气。

我敢肯定我错过了一些非常简单的东西......有人愿意开导吗？

KR，詹姆斯。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-15T16:23:21.970

我认为您只是输入了错误的字符

```
case
    when CHARINDEX('(', SourceOfBooking) > 0 then
        rtrim(left(SourceOfBooking, CHARINDEX('(', SourceOfBooking) - 1))
    else
        SourceOfBooking
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-15T16:25:33.080

你可以;

```
LEFT(SourceOfBooking, CHARINDEX(' (', SourceOfBooking + ' (') - 1) 
```

（如果需要，删除`+ ' ('`；它允许没有` (`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T16:29:22.097

无论是否有括号，这将返回公司名称，并且还将处理括号前没有空格的情况：

```
select case 
    when CHARINDEX('(', SourceOfBooking) > 0
    then RTRIM(LEFT(SourceOfBooking, CHARINDEX('(', SourceOfBooking) - 1))
    else SourceOfBooking
end
from Table1 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/b1c10/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-22T11:27:20.330

你可以试试这个。

创建一个新表并按照以下脚本插入数据。然后执行选择查询。您将获得所需的输出。

```
create table teststring
(name varchar(20))

insert  into teststring values ('ashish (123)')
insert  into teststring values ('ashish jain (123)')

select substring(name,1,charindex('(',name)-1)abc ,name from teststring 
```

# r - R中的异常值检测包

> ID：12899794
> 
> 赞同：-1
> 
> 时间：2012-10-15T16:21:43.313
> 
> 标签：r, statistics

我正在寻找 R 包，它提供了在某些观察样本中检测异常值的可能性？

非常感谢。

沙赫扎德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:25:43.463

谷歌搜索`r outlier detection`给出了许多有趣的结果，例如`outliers`or`extremevalues`包。

# iis - 404 错误 - Google 试图索引 ColdFusion CFC

> ID：12899796
> 
> 赞同：3
> 
> 时间：2012-10-15T16:21:48.740
> 
> 标签：iis, coldfusion, http-status-code-404, cfc, googlebot

几个月来，我们的 IIS/ColdFusion 服务器在 Google 爬虫扫描期间一直抛出 404 错误。通常很容易找到这些文件，但在这种情况下，Google 正在尝试扫描我们的 CFC 文件。这些文件确实存在，但它们不暴露给 Internet - 只暴露给 ColdFusion 服务器。尽管如此，谷歌还是在我们网站的某个地方看到了指向 CFC 的链接，并正在努力追踪它们。

下面是我们在 404 中的一个 CGI 结构的转储。 `baseCFC`是一个 CF 映射到`D:\Domains\[domain]\cfc`. 我们源代码中的所有引用`baseCFC`要么在`<cfajaxproxy>`标签中，要么`CreateObject()`在 Application.CFC 中的调用中（示例如下）。

或许这是一个重要的线索：`baseCFC`指的是`D:\Domains\[domain]\cfc`，但 Google 正试图到达`D:\Domains\[domain]\www\baseCFC`，这是我们网站的主目录。显然，Google 将`baseCFC`其视为服务器上的普通（未映射）目录并希望对其进行扫描。

![在此处输入图像描述](../Images/cc6267153ef3ade2b7ecea6c49d98172.png)

`baseCFC`以下是我们代码中两种引用类型的示例：

<cfajaxproxy>:

```
<cfajaxproxy cfc="baseCFC.Misc" jsclassname="ajxMisc"> 
```

创建对象（）：

```
<cfscript>
  request.Misc = CreateObject( "component", "baseCFC.Misc" );
</cfscript> 
```

我们如何解决这些与 CFC 相关的 404 错误？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T16:35:43.013

创建的 javascript`cfajaxproxy`包括 cfc 的位置。查看页面的源代码，您应该能够找到该字符串`'/baseCFC/Statement.cfc'`。这就是谷歌找到它们的方式。

让 Google 忽略它们的一种快速方法是修改您的`robots.txt`文件以排除`baseCFC`“目录”。

```
User-Agent: *
Disallow: /baseCFC/ 
```

# windows - 在 Windows 应用商店应用程序中将自定义引脚添加到 bing 地图

> ID：12899804
> 
> 赞同：0
> 
> 时间：2012-10-15T16:22:23.327
> 
> 标签：windows, windows-8, bing-maps, bing, windows-store-apps

我是 C# 新手，正在开发一个 Windows 应用商店应用程序，该应用程序允许用户点击地图上的位置来放置标记、保存该位置的标题和描述。我发现 Android 的 overlayItem 类与我的应用程序需要的类相似，因为它包含一个 Geopoint 和每个 overlayItem 的 2 个字符串。我已经搜索了要在我的应用程序中使用的 C# 示例，但最终陷入了困境，所以我只是想知道那里是否已经有一个可能合适的类，或者自己制作是否会更好？
我在想一些类似的事情，并制作我自己的 get 和 set 方法：

```
class windowsOverlayItem{
Location loc;
String title;
String description;
Pushpin pin;
} 
```

我找到了一些地图示例，但没有一个真正深入。任何帮助都会很棒！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:27:30.840

[Bing Maps C# Pushpin Sample](http://code.msdn.microsoft.com/windowsapps/Bing-Maps-Pushpin-Sample-a10f582b)正是实现了这一点。查看其代码以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:34:01.740

我终于想通了，该标签和名称可用于我需要为每个图钉以及位置保存的信息。这是一个简短的示例，说明何时我想将新的图钉添加到我的地图并保存一些详细信息。

```
MyMap.Children.Add(newpin);
MapLayer.SetPosition(newpin, loc);
newpin.Name = title;
newpin.Tag = newpin.Tag as String;
newpin.Tag = description; 
```

# regex - 为什么我会收到意外的令牌？

> ID：12899810
> 
> 赞同：3
> 
> 时间：2012-10-15T16:22:49.480
> 
> 标签：regex, linux, shell, grep

我正在尝试搜索`.c`,`.cpp`或`.h`文本文件中的文件包含文件列表。但是，当我运行时遇到问题时：

```
$ grep -sr ^.*\.(c|cpp|h)$ .
bash: syntax error near unexpected token `(' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:25:21.003

我没有要测试的 Unix 机器，但是：

```
grep -sr '^.*\.(c|cpp|h)$' . 
```

...至少不应该触发语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:56:50.127

你应该擅长

```
grep -sr '\.(c|cpp|h)$' . 
```

1.  正则表达式模式应该用引号引起来
2.  无需`^.*`在模式中包含部分

# asp.net - ASP.NET、SQL Server 2008 R2、System.OverflowException

> ID：12899811
> 
> 赞同：0
> 
> 时间：2012-10-15T16:22:53.350
> 
> 标签：asp.net, sql-server-2008-r2

我正在尝试使用存储过程在 SQL Server 2008 R2 表中插入一条记录。我正在“尝试”编写一个用于数据库访问的通用类。

这是 .VB 文件中的代码：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    If PreviousPage IsNot Nothing AndAlso PreviousPage.IsCrossPagePostBack Then
        Dim params(5) As SqlParameter
        params(0) = New SqlParameter("@Name", PreviousPage.Name.Text)
        params(1) = New SqlParameter("@Qualification", PreviousPage.Qualification.Text)
        params(2) = New SqlParameter("@ContactNo", PreviousPage.ContactNo.Text)
        params(3) = New SqlParameter("@Expertise", PreviousPage.Expertise.Text)
        params(4) = New SqlParameter("@Comments", PreviousPage.Comments.Text)
        params(5) = New SqlParameter("@Affiliation", PreviousPage.Affiliation.Text)
        DAL.DoInsertSP(params)
    End If
End Sub 
```

这是 DAL.DoInsertSP() 的代码：

```
Public Shared Function DoInsertSP(ByRef params As Array) As Byte
    Dim result As Byte = 0
    CreateConnection()
    cmd = New SqlCommand("sp_InsertExpert", conn)
    cmd.CommandType = CommandType.StoredProcedure
    cmd.Parameters.AddRange(params)
    Try
        result = CByte(cmd.ExecuteNonQuery())
    Catch ex As Exception
        conn.Dispose()
    End Try
    Return result
End Function 
```

代码抛出**System.OverflowException：算术运算导致溢出。**

这是 proc **sp_InsertExpert的脚本**

```
USE [dbherpes] 
```

GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[sp_InsertExpert]
@Name nvarchar(30) = null,
@Qualification nvarchar(40) = null,
@ContactNo nvarchar(13) = null,
@Expertise nvarchar(30 ) = null,
@Comments nvarchar(100) = null,
@Affiliation nvarchar(50) = null AS
BEGIN
SET NOCOUNT ON;
插入专家（姓名、资格、联系人编号、专业知识、评论、附属机构）值（@Name、@Qualification、@ContactNo、@Expertise、@Comments、@Affiliation）
结束

这是表的结构：

![在此处输入图像描述](../Images/35e653ddcc5e1ceef7b49b2857b9bfff.png)

请问我该如何纠正？

**更新**

我已设置 ID 列的身份规范 = '是'，身份增量 = 1，身份种子 = 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:54:57.477

您没有发生异常的行号吗？

通过查看您的代码：

> 执行非查询

根据[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx返回一个 INT](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

我建议不要将输出转换为字节，而是将 cmd.ExecuteNonQuery() 与一个值进行比较，例如`> 0`

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

# c - fwprintf 不输出宽字符

> ID：12899816
> 
> 赞同：2
> 
> 时间：2012-10-15T16:23:13.810
> 
> 标签：c, printf, standard-library, widestring

我想将宽字符输出到文件中，`fwprintf`但不这样做，即使它被描述为这样做。示例代码：

```
const char *testFileName = "/Users/jdmuys/wideTestFile.txt";
FILE *wideTestFile;
wideTestFile = fopen(testFileName, "w");
fwide(wideTestFile, 1);
fwprintf(wideTestFile, L"12345");
fclose(wideTestFile); 
```

之后我的文件“wideTestFile.txt”正好包含 5 个字节：`31 32 33 34 35`根据我的十六进制转储实用程序。

我怀疑当前语言环境存在一些问题，可能会`fwprintf`调用 on `fwprintf_l`，它将语言环境作为附加参数。

我一直在阅读如何使用最后一次调用，但我无法理解我需要作为语言环境传递的内容。文档对此相当模糊（或者我可能无法理解）。

任何解释为什么`fwprintf`不像记录的那样表现？以及使用的任何示例`fwprintf_l`？

非常感谢，

京东

这适用于 Mac OS X 10.8.2 下的 Xcode 4.5.1，目标是来自 Objective-C 代码的 iOS 6.0。但这些都不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:00:01.073

您的语言环境可能是 UTF-8 的一些变体，这意味着只有在打印宽字符（即 ascii 代码 0 - 127 之外的字符）时输出才会是*宽的。*

如果您想强制进行宽幅打印（例如 UTF-16LE），那么您需要使用[`libiconv`](http://www.gnu.org/software/libiconv/). [这个答案](https://stackoverflow.com/questions/516862/how-do-i-read-unicode-16-strings-from-a-file-using-posix-methods-in-linux)有点说明为什么它不倾向于做你认为它做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:52:47.370

我在这里猜测一下。

它以 UTF-8 格式保存。现在，对于大多数 ASCII 字符，ASCII 中的表示和 UTF-8 中的表示完全相同。现在，在 UTF-8 中，第一个字节的高位编码“字符”的长度。例如，直到 0x7F 的所有内容都适合一个字节（即标准 ASCII），0x7FF 适合两个字节，等等。有关详细信息，请参阅[http://en.wikipedia.org/wiki/UTF-8#Description 。](http://en.wikipedia.org/wiki/UTF-8#Description)

要“解决”您的问题，只需使用 UTF-8 表中较高的字符即可。

从上述维基百科页面中提取一些示例：

*   $ 应该适合单个字节
*   ¢ 两个字节
*   三欧元
*   在四个

# c++ - 模板出队方法有一个未声明的标识符

> ID：12899817
> 
> 赞同：1
> 
> 时间：2012-10-15T16:23:14.230
> 
> 标签：c++, templates, queue

所以我目前正在将队列实现为单链表。一切都很好，但是编译器在我的 dequeue 方法中标记了我。

这就是 Visual Studio 对我的咆哮：

> 错误 C2065：“已删除”：未声明的标识符

这是我的 dequeue 方法，它应该返回刚刚从队列中删除的值：

```
template <typename Type>
Type QueueLinked<Type>::deque() {
if (queueFront == 0) {
    cout << "Queue is empty! There's nothing to remove!" << endl;
} else {
    nodeType<Type> *temp;
    temp = queueFront;
    queueFront = queueFront->next;
    Type Removed = temp->dataItem;
    delete temp;

    if (queueFront == 0) {
        queueRear = 0;
    }
}
return Removed;
} 
```

这是我的节点结构：

```
template <typename Type>
struct nodeType {
    Type dataItem;
    nodeType<Type> *next;
}; 
```

这似乎是一个非常简单的错误，但我没有看到是什么原因造成的。希望我不会太愚蠢，但这不会是第一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:26:32.097

你在`else`块中声明它，当然它在它之外是未声明的。在`if`.

试试这个方法：

```
template <typename Type>
Type QueueLinked<Type>::deque() {
  Type Removed;
  if (queueFront == 0) {
    cout << "Queue is empty! There's nothing to remove!" << endl;
  } else {
    nodeType<Type> *temp;
    temp = queueFront;
    queueFront = queueFront->next;
    Removed = temp->dataItem;
    delete temp;

    if (queueFront == 0) {
        queueRear = 0;
    }
  }
return Removed;
} 
```

# sql-server-2008 - 在 T-SQL 存储过程中用空格缩进记录

> ID：12899827
> 
> 赞同：1
> 
> 时间：2012-10-15T16:23:36.343
> 
> 标签：sql-server-2008, tsql, stored-procedures

我有一个存储过程，它基于以下内容返回记录`Department ID`：

```
Employee Name                ManagerID         SupervisorID                ID  
    John Smith                  1                     1                      1  
    Tom Jones                   1                     2                      2  
    Robert Thompson             1                     2                      3
    Jennifer Stevens            1                     4                      4 
```

我想缩进返回的记录如下：

*   如果 ManagerID = ID（无缩进）
*   如果 SupervisorID = ID（缩进 2 个空格）
*   其他（缩进 4 个空格）*

就像是：

```
John Smith  
   Tom Jones  
       Robert Thompson  
   Jennifer Stevens 
```

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:36:33.007

怎么样：

```
SPACE (
CASE
  WHEN ManagerID = ID THEN 0
  WHEN SupervisorID = ID THEN 2
  ELSE 4
  END
) + [Employee Name] AS [Employee Name] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:27:22.683

使用 CASE 语句？

```
EmployeeName = 
    CASE ManagerID
        WHEN 1 THEN [Employee Name]
        WHEN 2 THEN '  ' + [Employee Name]
        ELSE '    ' + [Employee Name]
    END 
```

（注：伪代码，未经测试）

编辑：`CASE`从`END CASE`.

```
CREATE TABLE Employee
 (EmployeeID int,
  EmployeeName nvarchar(25),
  ManagerID int)
;

INSERT INTO Employee
VALUES (1, 'John Smith', 1)
;

INSERT INTO Employee
VALUES (2, 'Bill Gates', 2)
;

INSERT INTO Employee
VALUES (3, 'Adam Smith', 2)
;

INSERT INTO Employee
VALUES (4, 'John Gates', 3)
;

INSERT INTO Employee
VALUES (5, 'Jake Smith', 4)
;

SELECT 
  EmployeeName = 
    CASE ManagerID
      WHEN 1 THEN EmployeeName
      WHEN 2 THEN '  ' + EmployeeName
      ELSE '    ' + EmployeeName
    END 
FROM Employee 
```

输出：

```
EmployeeName
-----------------------------
John Smith
  Bill Gates
  Adam Smith
    John Gates
    Jake Smith 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T17:08:47.847

如果您想允许任意数量的级别（例如，每个人都只是一个老板，那么这可以是任何深度），您必须使用递归 CTE。此外，可能需要编写查询，以便它根据关系正确地重新排序（这样，在您的示例数据中，Robert 的行总是出现在 Tom 之后，而不是第一个或任何其他人之后）。

这是一个展示它是如何工作[的小提琴；](http://www.sqlfiddle.com/#!3/2bb8c/1/0)我添加了更多人以使其更有趣。

```
WITH EmployeeHierarchy AS (
  SELECT
    0 [Level],
    CAST(1 AS float) [Step],
    CAST(ROW_NUMBER() OVER (ORDER BY e.ID) AS float) [Sort],
    e.*
    FROM Employee e
    WHERE e.BossID IS NULL
  UNION ALL
  SELECT
    h.[Level]+1,
    h.[Step]/(SUM(1) OVER ()+1),
    h.[Sort]+(ROW_NUMBER() OVER (ORDER BY e.ID))*(h.[Step]/(SUM(1) OVER ()+1)),
    e.*
    FROM Employee e
    JOIN EmployeeHierarchy h ON (h.ID = e.BossID)
)
SELECT SPACE(h.Level*2)+h.Name [Employee Name], h.BossID, h.ID
  FROM EmployeeHierarchy h
  ORDER BY h.Sort 
```

# triggers - UserMap，在 Apex 中获取用户名而不是 ID

> ID：12899828
> 
> 赞同：1
> 
> 时间：2012-10-15T16:23:42.253
> 
> 标签：triggers, apex-code

如果您尝试从包含用户 ID 的 VARIABLE 填充所有者名称怎么办？这一行将如何变化？

```
c.MerchantOwner__c = userMap.get(accountMap.get(c.AccountId).OwnerId).name; 
```

我尝试了一些变化，但无法让它发挥作用。我设想它类似于：

```
accObj.put('xx',  userMap.tmpClosedWonOwner.name ); 
```

谢谢。 *（这是我正在使用的代码的精简版本，因此左侧的差异 - 我在第一个代码集上使用了对先前答案的引用）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:51:00.287

尝试从 Account 中选择 Owner.Name 字段并将其填充到 MerchantOwner__c 字段中

for(Account acc: [Select Id,Owner.Name , MerchantOwner_c *From Account where Id in:trigger.newMap.keySet() ]){ trigger.newMap.get(acc.Id).MerchantOwner* _c = trigger.newMap.get (acc.Id).Owner.Name；}

# c++ - C++11 是否允许（不需要）释放/获取 volatile 关键字的语义

> ID：12899830
> 
> 赞同：14
> 
> 时间：2012-10-15T16:24:00.767
> 
> 标签：c++, visual-c++, c++11, language-lawyer

自 Visual C++ 2005 以来，Microsoft 为访问`volatile`C++ 标准不要求的类型提供了额外的排序保证。

C++ 标准中的任何内容实际上禁止这些保证吗？ [Microsoft 文档](http://msdn.microsoft.com/en-us/library/12a04hfd.aspx)似乎是这样认为的。

请让我知道标准是否允许 Microsoft 实施的排序，并对这个错误报告进行投票：

*   [`/volatile:ms`文档破坏了“符合 ISO”的含义](https://connect.microsoft.com/VisualStudio/feedback/details/767448/volatile-ms-documentation-mangles-what-iso-compliant-means)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T16:34:01.730

只要满足标准规定的要求，实现当然可以做超出要求的事情。向对象添加释放/获取语义`volatile`肯定在范围内。我认为 C++ 委员会没有兴趣改变语义（我们刚刚开始新的一周在波特兰与 Herb 讨论 C++ 讨论如何组织会议）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:10:09.283

该标准要求*对 volatile 对象的访问严格按照抽象机的规则进行评估*，大致意思是“不优化”，但仅此而已。例如，不允许编译器在寄存器中缓存值或执行公共子表达式消除。它必须完全按照你说的去做。

因此，对于所有标准的关心，`volatile`都有`memory_order_relaxed`语义（它没有指定任何不同的东西）。当然，这并不意味着你不能实现更严格的东西。

Microsoft 编译器一直（*自 2005 年以来*，正如 Ben Voigt 指出的那样）被`volatile`视为获取/释放，这导致许多人假设“volatile == threadsafe”，这反过来导致许多文章将其转为“volatile 没用！” 和“易变是邪恶的”。

MS 建议使用 ISO 实现的可能原因是，这使得他们的编译器的行为与其他所有编译器一样，没有更多令人讨厌的惊喜。

# delphi - 在 delphi 中使用 Neo4j

> ID：12899832
> 
> 赞同：4
> 
> 时间：2012-10-15T16:24:03.300
> 
> 标签：delphi, api, neo4j

知道如何与 delphi 2010 中的 Neo4J 交互吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T16:46:50.500

Neo4J 提供了一个[REST API](http://docs.neo4j.org/chunked/milestone/rest-api.html)。所以你可以使用任何用于 Delphi 的 HTTP 客户端库（Indy、Synapse...）并使用 HTTP GET / POST / DELETE 来读取 / 插入 / 删除记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:55:28.090

通过 Synopse 库实现的 REST API 是这个问题的直接答案。
Peter 的视频是我最喜欢的 GraphDB 介绍。
谢谢你们， **爱SO**

# sql-server-2008 - sql查询查找两个字段的差异

> ID：12899838
> 
> 赞同：0
> 
> 时间：2012-10-15T16:24:19.823
> 
> 标签：sql-server-2008

我有一个 sql server 2008 数据库，并专注于超过 3 亿条记录的表中的两个特定列。我想找到该表具有但从该结果集中区分的重复记录有多少以及是否有任何重复具有不同的字段 2。例如。

字段 1：idUrl 字段 2：assignedId

所以当然是重复的：

```
SELECT [idUrl]
       ,[assignedId]
FROM [Feeds].[dbo].[LogFeed]
group by idUrl, assignedId
having COUNT(entryId) > 1
order by entryid desc 
```

因此，我想查找 idUrl 的任何重复项的记录，其中任何重复的 idUrls 的assignedId 不同的记录。

例如

```
 idUrl            assignedID
 www.google.com       10
 www.google.com       10
 www.google.com       10
 www.google.com        7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:17:06.277

我们可以用很多方式写我给样本试试这个

DECLARE @table table (idUrl varchar(100),assignedID int) INSERT INTO @table values('www.google.com', 10), ('www.google.com', 10), ('www.google.com ' , 10), ('www.google.com' , 7)

```
SELECT idUrl, COUNT ( Distinct AssignedID )   FROM @table 
Group By idUrl Having COUNT( Distinct AssignedID ) > 1 
```

# bash - 为什么管道使折叠功能无法保持其新定义？

> ID：12899841
> 
> 赞同：2
> 
> 时间：2012-10-15T16:24:29.130
> 
> 标签：bash, unix, scripting

在 Bash-Hackers.org 上有一个关于折叠函数的[不错的小 wiki 条目。](http://wiki.bash-hackers.org/howto/collapsing_functions)基本上，折叠函数是根据某些条件重新定义自身的函数。基本示例如下所示：

```
chatter() {
  if [[ $verbose ]]; then
    chatter() {
      echo "$@"
    }
    chatter "$@"
  else
    chatter() {
      :
    }
  fi
} 
```

我认为这是一个不错的小技巧，可能对创建如下函数很有用：

```
# a portable extended regular expression sed for Linux and Mac
# simply checks if using an option fails for one version
# @see http://wiki.bash-hackers.org/howto/collapsing_functions
my_sed() {
    if ( echo abc | sed -r /abd/p > /dev/null 2>/dev/null ) ; then 
        #we are running a GNU version. redefine function
        echo gnu
        my_sed() {
            sed -r "$@"
        }
    else 
        #we are running another version. defaulting to BSD
        #redefining function
        echo osx
        my_sed() {
            sed -E "$@"
        }
    fi
    my_sed "$@"
} 
```

（回声语句仅用于调试顺便说一句）。这在运行时按预期工作`my_sed "s/foo/bar" /tmp/somefile.txt`，第一次输出“gnu”（在 Linux 上，在 Mac 上 osx），然后在后续运行中保持沉默。但是，如果我只是在管道中使用该函数，则该函数不会被重新定义，而是不断输出“gnu”。示例：`echo 123 | my_sed 's/foo/bar'`每次在 shell 中运行时都会输出“gnu”。

为什么是这样？管道对当前上下文/shell 做了什么使函数无法保持其新定义？管道是否每次都分叉一个新进程，以便新定义从原始外壳中丢失？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:28:44.760

管道在子 shell 中运行，当子 shell 退出时，重新定义会丢失。

# ruby-on-rails - 对虾表中的欧元符号未显示

> ID：12899842
> 
> 赞同：3
> 
> 时间：2012-10-15T16:24:31.440
> 
> 标签：ruby-on-rails, utf-8

我在对虾表中显示欧元符号时遇到问题。我使用 prawn 为我的用户提供下载 pdf 发票的可能性。

```
pdf = Prawn::Document.new
[...]

invoice_data = [["Description", "Price", "Qty", "Total"]]

invoice_items.map do |item|
  pdf.font "#{Prawn::BASEDIR}/data/fonts/verdanab.ttf"
  pdf.font "#{Prawn::BASEDIR}/data/fonts/Verdana.ttf"
  invoice_data << ["","€ 10",1,"€ 10"]
end

pdf.table(invoice_data, :width => pdf.bounds.width,:cell_style => { :inline_format => true },:row_colors => ["FFFFFF", "DDDDDD"]) 
```

问题是在我尝试运行此代码后出现此错误，否则我无法使其正常工作...

```
invoices_pdf.rb:64: invalid multibyte char (US-ASCII)
invoices_pdf.rb:64: invalid multibyte char (US-ASCII)
invoices_pdf.rb:64: syntax error, unexpected $end, expecting ']'
  invoice_data << ["","€ 10",1,"€ 10"]
                         ^ 
```

我在大虾谷歌小组上看到了提示，但这些提示是针对 pdf.text 元素的，这是一张表格，我无法弄清楚....

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T10:18:26.873

去帮助别人。

我从虾谷歌组的“James Healy”那里得到了答案：

> 要在 ruby​​ 1.9 文件中包含非 ascii 字符，您必须将以下内容添加到文件的第一行：
> 
> ```
> # coding: utf-8 
> ```
> 
> 干杯
> 
> 詹姆士

不知道那个。

谢谢。

# jfreechart - 如何更改部分的颜色并避免 setSectionPaint 错误/警告消息

> ID：12899844
> 
> 赞同：1
> 
> 时间：2012-10-15T16:24:38.383
> 
> 标签：jfreechart

```
 final PiePlot plot = (PiePlot) chart.getPlot();
  for (int i = 0; i < 2; i++) {
    plot.setSectionPaint(i, color[i]);
    plot.setSectionPaint(plot.getSectionKey(i), color[i]);
  } 
```

我尝试为饼图的部分设置一些其他颜色。

`setSectionPaint(int, Color)`方法已弃用

`setSectionPaint(Comparable, Color)`方法：我无法获得 Comparable 对象，因为[`plot.getSectionKey(int index )`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/PiePlot.html#getSectionKey%28int%29)它受到保护。

有没有解决方案，所以我可以在没有错误/警告消息的情况下更改部分的颜色？或者如何检索可比较的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:34:46.107

您需要`Comparable key`从数据集中提供正确的来调用所需的[`setSectionPaint()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/PiePlot.html#setSectionPaint%28java.lang.Comparable,%20java.awt.Paint%29). 例如，在 中[`org.jfree.chart.demo.PieChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/PieChartDemo1.html)，以下将部分设置`One`为`Color.black`。

```
plot.setSectionPaint("One", Color.black); 
```

# wpf - 在将控件的属性移动到 UserControl 之后绑定到控件的属性

> ID：12899845
> 
> 赞同：0
> 
> 时间：2012-10-15T16:24:40.203
> 
> 标签：wpf, xaml, binding

我有一个带有许多控件的窗口，它们必须相互引用彼此的视图模型。我想将一组相关控件移动到自定义 UserControl 中，当我这样做时，我在从窗口中的其他控件绑定到现在嵌入的控件时遇到问题。

例如，在我的窗口中，我有一个网格。在网格的一个单元格中，我有 StackPanel 包含两个自定义用户控件：

```
<StackPanel>
    <KtWpf:TicketGridControl x:Name="ticketGrid" />
    <KtWpf:TicketViewControl x:Name="ticketView" />
</StackPanel> 
```

在 Grid 的另一个单元格中，我有另一个自定义 UserControl 绑定到网格中的当前项：

```
<local:AddressView x:Name="addressView"
    currentItem="{Binding ElementName=ticketGrid,Path=viewModel.tickets.CurrentItem}" /> 
```

并且该绑定工作正常。

但我想要的是将ticketGrid 和ticketView 移动到一个新的自定义UserControl 中。这很容易做到：

```
<UserControl
        x:Class="KorEnterprise.EnterpriseMobile.MyTickets"
        ...
        >
    <StackPanel>
        <KtWpf:TicketGridControl x:Name="ticketGrid" />
        <KtWpf:TicketViewControl x:Name="ticketViewControl" />
    </StackPanel>
</UserControl> 
```

然后在网格中，我将 StackPanel 替换为：

```
<local:MyTickets x:Name="myTickets" /> 
```

然后我希望 addressView 的绑定更改为：

```
<local:AddressView x:Name="addressView"
    currentItem="{Binding ElementName=myTickets,Path=ticketGrid.viewModel.tickets.CurrentItem}" /> 
```

但这不起作用。我在运行时收到 BindingExpression 错误：

```
System.Windows.Data Error: 40 : 
BindingExpression path error: 'ticketGrid' property not found on 'object' ''MyTickets' (Name='myTickets')'. 
BindingExpression:Path=ticketGrid.viewModel.tickets.CurrentItem; 
DataItem='MyTickets' (Name='myTickets'); 
target element is 'AddressView' (Name='addressView'); 
target property is 'currentItem' (type 'TicketVM') 
```

我不明白为什么。我在编译时没有错误 - 我在代码中没有错误。

例如，这不会引发异常：

```
public MainWindow()
{
    ...
    this.applicationExiting += new ApplicationExitingEventHandler(this.myTickets.ticketGrid.applicationExitingEventHandler);
    ...
} 
```

当我在调试器中遍历时，this.myTickets 存在，this.myTickets.ticketGrid 存在，并且事件处理程序连接得很好。

但是，当 XAML 开始做它的无声魔法，连接绑定时，由于某种原因 this.myTickets.ticketGrid 不存在。

我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:26:16.767

我完全不确定这是最好的方法，但它确实有效。它只是涉及比我想要的更多的管道。

*   创建一个视图模型类，并将它的一个实例设置为控件的 DataContext。
*   在视图模型上创建工单集合属性
*   在构造用户控件时，将视图模型的票据集合设置为ticketGrid的票据集合
*   将 AddressView 控件的 currentItem 属性绑定到视图模型的票证集合
*   最重要的是 - 在视图模型的票证集合更改时引发 PropertyChanged。

这行得通，但我想找到更简单的东西：

```
public partial class MyTickets : KorUserControl
{
    public MyTickets()
    {
        InitializeComponent();

        this.DataContext = new MyTicketsVM();
        this.viewModel.tickets = this.ticketGrid.viewModel.tickets;
    }

    public MyTicketsVM viewModel
    {
        get { return this.DataContext as MyTicketsVM; }
    }
}

public class MyTicketsVM : MyViewModelBase
{
    private QueryableCollectionView _tickets;
    public QueryableCollectionView tickets
    {
        get { return this._tickets; }
        internal set
        {
            this._tickets = value;
            notifyPropertyChanged("tickets");
        }
    }
}

<local:AddressView
    x:Name="addressView"
    currentItem="{Binding ElementName=myTickets,Path=viewModel.tickets.CurrentItem}"
    /> 
```

（注：MyViewModelBase 实现 INotifyPropertyChanged）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:09:25.073

尝试 ：

```
 <local:MyTickets x:Name="myTickets" 
        Tag="{Binding ElementName=ticketGrid,Path=YourProperty}" /> 
```

和：

```
 <local:AddressView currentItem="{Binding ElementName=myTickets,Path=Tag}" /> 
```

好的，所以这不起作用..

请执行下列操作 ：

在您的 UserControl 上创建一个 DependencyProperty ：

```
 public Class MyTickets: UserControl 
  {
       public object MyProperty
       {
           get { return (object)GetValue(MyPropertyProperty); }
           set { SetValue(MyPropertyroperty, value); }
       }

       public static readonly DependencyProperty MyPropertyProperty=
        DependencyProperty.Register("MyProperty", typeof(object), typeof(MyTickets), new UIPropertyMetadata(null));

  } 
```

XAML：

```
 <UserControl
    x:Class="KorEnterprise.EnterpriseMobile.MyTickets"
    ...
    >
          <StackPanel>
              <KtWpf:TicketGridControl x:Name="ticketGrid" 
                                YourProperty={Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl} , 
                                Path=MyProperty />
              <KtWpf:TicketViewControl x:Name="ticketViewControl" />
          </StackPanel> 
```

和 ：

```
 <local:AddressView currentItem="{Binding ElementName=myTickets,Path=MyProperty }" /> 
```

# java - 如何将一个月添加到日期并获得同一天

> ID：12899848
> 
> 赞同：6
> 
> 时间：2012-10-15T16:24:56.170
> 
> 标签：java

我尝试根据工作日将日期添加一个月。例如，日期是 9 月的第 3 个星期一。添加后我想要 3\. 十月的星期一。我试图将一个月添加到下一个日期

```
Mon Sep 17 17:30:00 MESZ 2012 
```

使用此代码：

```
Calendar date = Calendar.getInstance();
date.setTimeInMillis(date_in_mil);
date.add(Calendar.DAY_OF_WEEK_IN_MONTH, 3); 
```

但我得到了

```
Mon Oct 08 17:30:00 MESZ 2012 
```

这是十月的第二个星期一，而不是第三个星期一。有人知道这是如何工作的吗？

**编辑** 这是我在下面的答案中使用的解决方案：

```
int prevDayOfWeek = date.get(Calendar.DAY_OF_WEEK);
date.add(Calendar.MONTH, 1);
date.set(Calendar.DAY_OF_WEEK, prevDayOfWeek);
date.set(Calendar.DAY_OF_WEEK_IN_MONTH, week); 
```

wereby week 是一个月中的周数。例如，1 表示第一个，2 表示第二个，依此类推。但是周也可以倒数，例如 -1 表示一个月的最后一周。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T16:27:20.380

如果您想获得每月的第三个星期一，请使用 `set`而不是`add`
`date.set(Calendar.DAY_OF_WEEK_IN_MONTH, 3);`

如果您想在当前日期添加一个月，请使用
`date.add(Calendar.MONTH, 1);`

**编辑**

```
final Calendar date = Calendar.getInstance();
date.set(2012, Calendar.SEPTEMBER, 17);

int prevDayOfWeekInMonth = date.get(Calendar.DAY_OF_WEEK_IN_MONTH);
int prevDayOfWeek = date.get(Calendar.DAY_OF_WEEK);

date.add(Calendar.MONTH, 1);
date.set(Calendar.DAY_OF_WEEK, prevDayOfWeek);
date.set(Calendar.DAY_OF_WEEK_IN_MONTH, prevDayOfWeekInMonth); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:31:53.607

如果要添加一个月，请执行以下操作：

```
Calendar date = Calendar.getInstance();
date.setTimeInMillis(date_in_mil);
date.add(Calendar.MONTH, 1); 
```

如果你想增加 4 周，

```
Calendar date = Calendar.getInstance();
date.setTimeInMillis(date_in_mil);
date.add(Calendar.DAY_OF_WEEK_IN_MONTH, 4); 
```

将一周始终保持为第三周：

```
if(date.get(Calendar.WEEK_OF_MONTH)<3){
   date.add(Calendar.DAY_OF_WEEK_IN_MONTH, 1);
 } 
```

或者最好喜欢

```
date.add(Calendar.DAY_OF_WEEK_IN_MONTH, 3-date.get(Calendar.WEEK_OF_MONTH); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T16:39:11.953

使用`Calendar`类的`roll()`方法，**与** `add()`Calendar 类的方法不同，它**只会修改提到的日期部分。**

**例如：**

```
public class Cal {

    public static void main(String[] args){

        Calendar c = Calendar.getInstance();

        c.roll(Calendar.MONTH, 1);

        System.out.println(c.getTime());
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T16:31:39.393

```
Calendar c= Calendar.getInstance();
System.out.println(c.get(Calendar.DATE));//if this is 2nd monday of September
System.out.println(c.WEEK_OF_MONTH);
c.add(c.WEEK_OF_MONTH, 4);
System.out.println(c.get(Calendar.DATE));//prints the 2 monday of october 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T16:32:11.267

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html)

不一致的信息。如果字段冲突，日历将优先选择最近设置的字段。例如，在确定日期时，日历将查找以下字段组合之一。将使用由最近设置的单个字段确定的最近组合。

```
 MONTH + DAY_OF_MONTH
 MONTH + WEEK_OF_MONTH + DAY_OF_WEEK
 MONTH + DAY_OF_WEEK_IN_MONTH + DAY_OF_WEEK
 DAY_OF_YEAR
 DAY_OF_WEEK + WEEK_OF_YEAR 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-03-24T10:34:09.627

带有字符串日期 dd/mm/yyyy 的解决方案：

```
String mes = null;
String yourfecha = null;
if(yourfecha.substring(5,6).equals("/")){
mes = yourfecha.substring(3,5)
}else{
mes = yourfecha.substring(4,6)
}
Integer newmes = Integer.valueOf(mes)+{How many months want to add};
String anyo = yourfecha.substring(6,10);
String newFecha=null;
if(newmes >12){            
newmes=newmes-12;
Integer newanyo=Integer.valueOf(anyo)+1;
newFecha=yourfecha.substring(0,2)+"/0"+newmes + "/"+newanyo;       
}else{
newFecha=yourfecha.substring(0,4)+newmes+"/"+anyo;  
}   
return newFecha; 
```

# sql - DB2 sql 最大记录函数

> ID：12899851
> 
> 赞同：0
> 
> 时间：2012-10-15T16:25:25.133
> 
> 标签：sql, db2

我在 DB2 中有以下查询，但不工作，问题是 max 函数，但我不知道如何修复它。

```
SELECT CAR.VI max(CAR.ID),
TU.SOLD 
FROM P.CAR CAR, A.TU TU WHERE CAR.VI = TU.VI

'Table1'                                                              ' VI:     USER:  DATE:      DATE2:     STATUS:   ID'
' 2T1BU4  DEALER 2012-10-15 2012-10-15 CER       1 '
' 2T1BU4  DEALER 2012-10-15 2012-10-15 CER       2 '
' 2T1BU3  DEALER 2012-10-15 2012-10-15 DRA       1 '

' VI:     SOLD:'
' 2T1BU4  Y' 
' 2T1BU3  N' 
```

我想从我的查询中收到的是这样的：

```
 ' VI:     USER:  DATE:      DATE2:     STATUS:   ID  SOLD'
' 2T1BU4  DEALER 2012-10-15 2012-10-15 CER       2   Y   '
' 2T1BU3  DEALER 2012-10-15 2012-10-15 DRA       1   N   ' 
```

我想获得具有最大 ID 的 VI

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:34:04.043

你没有提供很多细节，但我猜你想要这个：

```
SELECT CAR.VI, max(CAR.ID), TU.SOLD 
FROM P.CAR CAR
INNER JOIN A.TU TU 
    ON CAR.VI = TU.VI
GROUP BY CAR.VI, TU.SOLD 
```

或者您可以使用子查询：

```
select c1.vi, c1.id, tu.sold
from 
(
    select max(id) id, vi
    from P.CAR
    group by vi
) c1
inner join A.TU TU 
    on c1.VI = TU.VI 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:51:04.323

使用公用表表达式的变体：

```
with cte (vi, id) as 
(SELECT vi, max(ID)
 FROM P.CAR
 group by vi)
select cte.vi, cte.id, tu.sold
from cte INNER JOIN A.TU TU 
ON cte.VI = TU.VI 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:49:54.540

我不是 100% 确定你想要什么，但听起来你想要每个 VI 都有 MAX(ID) 的记录。你需要做这样的事情：

```
SELECT C1.VI, C1.ID, TU.SOLD FROM P.CAR CAR C1, A.TU TU WHERE C1.VI = TU.VI
WHERE C1.ID = (SELECT MAX(C2.VI) FROM P.CAR C2 WHERE C1.VI = C2.VI) 
```

# php - 获取数组中返回的最后一个 URL

> ID：12899854
> 
> 赞同：0
> 
> 时间：2012-10-15T16:25:37.650
> 
> 标签：php, forms, wordpress

我正在使用表单字段让用户编辑帖子并上传个人资料图片。

一旦他们上传了个人资料图片，就会将一个 URL 传递给一个名为“logo_header”的隐藏自定义文本字段。我在 PHP 模板中读取了这个 URL，并使用它来显示图像，如下所示。

```
<?php $logo = get_post_meta($post->ID, 'logo_header', true); ?>

<div class="profileLogo"><img src="<?php echo $logo; ?>" /></div> 
```

我的问题是当用户决定更新他们的照片（基本上是更改照片）时，新 URL 只是添加到当前 URL 的末尾，我猜这会创建一个数组。所以它会像

[http://example.com/myprofile.jpg](http://example.com/myprofile.jpg) , [http://example.com/myprofile2.jpg](http://example.com/myprofile2.jpg)

显然图像 src 不能使用数组，它需要 1 个 URL。

我使用重力表单上传文件按钮来编辑帖子并上传图像。没有删除已经存在的当前图像的选项（这是另一个问题：（），所以用户只有一个上传按钮。

**我的问题是**

如何始终选择添加到“logo_header”字段的最后一个 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:30:52.487

尝试`$logo = array_pop(get_post_meta($post->ID, 'logo_header', false));`

使用 false 参数，您将获得所有元字段的数组。我们只能假设它们会以正确的顺序插入和返回，因此**array_pop()**将拉出列表中的最后一个。

**编辑**- 对于您并不总是有多个徽标的情况，您应该使用这个：

```
$logo = get_post_meta($post->ID, 'logo_header', false);
$logo = is_array($logo) ? array_pop($logo) : $logo; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:58:50.140

```
$logo = get_post_meta($post->ID, 'logo_header', true);

$logoImgSrc = is_array($logo) ? end($logo) : $logo;

<div class="profileLogo">
    <img src="<?php echo $logoImgSrc ; ?>" />
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:31:47.907

我认为你不应该使用隐藏的文本字段，而不是隐藏的输入字段，当用户选择新图像时（文件 change() 函数，在 jQuery 中）将隐藏字段值设置为新的 url，替换旧的，然后发布隐藏字段名称。

编辑可能有帮助：

```
$("#browse_box").change(function() {
    $("#hidden_field").val($(this).val());
}); 
```

从记忆中打字，但这是基本的想法。

# facebook-like - 在 iOS 6 中，究竟如何添加“Facebook Like”按钮？

> ID：12899863
> 
> 赞同：1
> 
> 时间：2012-10-15T16:25:55.163
> 
> 标签：facebook-like, ios6

我正在寻找最简单的实现，希望避免使用网页界面。

如果可能的话，有人可以为此发布代码或示例代码的链接吗？

干杯安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T23:33:45.927

类似帖子：[iOS 6 - Facebook 的“赞”按钮](https://stackoverflow.com/questions/14269466/ios-6-facebook-like-button)

Ray Wenderlich 的帖子是一种非常直接的方式，但它并不是最漂亮的，因为它只是使用 web 视图来加载一个 hacky 网页。 [Ray Wenderlich 方法](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app)

使用 open graph api 更专业，但也更复杂。 [开放图方法](https://developers.facebook.com/docs/opengraph/guides/og.likes/)

# android - Android GestureLibrary 保存和gestureLibrary 是只读的

> ID：12899869
> 
> 赞同：2
> 
> 时间：2012-10-15T16:26:15.623
> 
> 标签：android

经过大量谷歌搜索并查看了我用来创建和保存手势的手势生成器源代码后，我发布了这个问题。问题是我从原始文件加载的手势库被正确加载，但是当我尝试将新手势保存到它时，它失败并且保存方法返回`false`。当我检查`gestureLibrary.isReadOnly()`它也返回`true`时，这是否意味着我无法保存到它，因为它是只读的？我正在使用所有权限在外部存储和内部存储上进行写入。有什么帮助吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-26T14:28:39.037

当尝试保存 res 文件夹（即 res/raw）中存在的 Gesture 文件时，您不能，因为不允许在运行时编辑应用程序资源。

因此，您可以将手势文件放在资产中，然后将其保存在要安装应用程序的手机中，然后尝试使用 GestureLibrary 类的保存方法来保存，这解决了我的问题。

将资产文件存储到内部存储器的代码：

```
File gestureFile=new File(directory.getPath(),"gesture");
try {
            InputStream is = getAssets().open("gestures");

            OutputStream os = new FileOutputStream(gestureFile);

            byte[] buffer = new byte[1024];
            int bytesRead;
            //read from is to buffer
            while((bytesRead = is.read(buffer)) !=-1){
                os.write(buffer, 0, bytesRead);
            }
            is.close();
            //flush OutputStream to write any buffered data to file
            os.flush();
            os.close();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

要保存的代码：

```
mLibrary1=GestureLibraries.fromFile(new File(directory.getPath(),"gesture"));
mLibrary1.addGesture(strTemp,gesture);
            boolean temp= mLibrary1.save();
            if(temp){
                Toast.makeText(getApplicationContext(), "Saved",Toast.LENGTH_SHORT).show();
            }else{
                Toast.makeText(getApplicationContext(), " Not Saved",Toast.LENGTH_SHORT).show();
            } 
```

抱歉，回复晚了。

# c# - 在多项目解决方案中传递变量

> ID：12899870
> 
> 赞同：1
> 
> 时间：2012-10-15T16:26:17.270
> 
> 标签：c#, asp.net

我正在使用一个名为 aspdotnetstorefront 的程序。这是一个购物车程序 该解决方案中有 7 个项目

Web 项目中有一个名为 checkout1.cs 的文件，其中包含 checkout1.aspx 文件

checkout1.aspx 文件有一个状态字段。在解决方案中，有一个名为 aspdnsfcommons 的项目，其中有一个名为 Shoppingcart.cs 的文件。

我已经尝试了一切从 web/check1.aspx 获取状态文本框的值并将其传递给 aspdnsfcommons/shoppingcart.cs

请告诉我我应该采取的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:30:39.033

在项目中添加对 aspdnsfcommons 的引用。Shoppingcart.cs 中应该有一个具有写访问权限（设置属性）的 state 属性，您可以使用它来实现此目的。

# android - Android onLongClickListener 用于查看和冒泡子事件

> ID：12899871
> 
> 赞同：1
> 
> 时间：2012-10-15T16:26:19.127
> 
> 标签：android

我定义了一个视图，上面有 3-4 个项目（按钮、ImageView 等）。View 定义了一个 onLongClickListener：

```
view.setOnLongClickListener(new OnLongClickListener() { ... } 
```

只要我长按视图的空白部分，效果就很好——但如果我长按我的图像，例如，长按不会被触发。

Android 中是否有让子元素“传递”它们的事件而不需要为每个元素定义 onLongClick 侦听器的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:55:14.807

我认为如果不在自定义类中覆盖它或创建一个侦听器来传递它，你就无法做到这一点。您可以定义 OnLongClickListener 的单个实例，将其传递给执行类似操作的所有实例

```
((View.OnLongClickListener)view.getParent()).onLongClick(view) 
```

或者

```
((View.OnLongClickListener)view.getParent()).onLongClick(root.getParent()) 
```

# email - 如何在 CruiseControl.NET 的电子邮件通知中省略某些构建类型？

> ID：12899873
> 
> 赞同：2
> 
> 时间：2012-10-15T16:26:24.720
> 
> 标签：email, cruisecontrol.net, ccnet-config

为了确定项目是否“从头开始”编译，我们有夜间构建。通常这些构建是成功的，因此，关于它们的邮件不是很有用。

还有通常的构建，在有人将代码提交到版本控制之后运行。由于这些电子邮件包含提交消息和更改的文件列表，因此即使对于成功的构建它们也很有用。

如何过滤成功的夜间电子邮件，同时仍然照常发送？最好通过 CruiseControl.Net 的方式。

这是 CruiseControl.Net`ccnet.config`配置文件的一部分：

```
<intervalTrigger name="FrequentPoll" buildCondition="IfModificationExists"  seconds="60"/>
<scheduleTrigger name="Daily" buildCondition="ForceBuild" time="$(DailyBuildStartTime)"/> 
```

可能执行的线索`<exec>`节点程序可以通过检查环境变量来确定哪个触发器开始构建`CCNetRequestSource`。

但是，即使`CCNetRequestSource`在节点中可用`<email>`，但我发现`<email>`节点无法使用它。

有人能帮我吗？

更新：找到相关问题 - [CruiseControl.net 电子邮件](https://stackoverflow.com/q/1143425/198852)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:21:25.780

[您可以使用条件任务](http://cruisecontrolnet.org/projects/ccnet/wiki/Conditional_Task)（从**版本 1.6**开始提供）包装您的电子邮件发布者，如下所示：

```
 <conditional>
      <conditions>
        <compareCondition>
          <value1>$[$CCNetRequestSource]</value1>
          <value2>FrequentPoll</value2>
          <evaluation>Equal</evaluation>
        </compareCondition>
      </conditions>

      <tasks>
        <email ... />
      </tasks>

    </conditional> 
```

引用内置变量时请注意**$[$CC]语法。**

# c# - 检查字符串是否有足够强的密码

> ID：12899876
> 
> 赞同：24
> 
> 时间：2012-10-15T16:26:27.697
> 
> 标签：c#, string, razor, passwords, webmatrix

> **可能重复：**
> [强密码正则表达式](https://stackoverflow.com/questions/3131025/strong-password-regex)
> [需要正则表达式以获得密码强度？](https://stackoverflow.com/questions/5142103/need-regex-for-password-strength)

我只是想知道搜索字符串以符合某些条件（具体来说是密码强度）的最佳方法是什么。

到目前为止，我有一个简单的：

```
if(password.Length <= 7)
    {
        errorMessage = "Your password must be at least 8 characters.";
    } 
```

我希望能够检查大写字母，但我不确定方法或程序是什么。我试过谷歌搜索，搜索网站：http: [//msdn.microsoft.com](http://msdn.microsoft.com)，并搜索我的 C# 书（C# Programming 3E，Barbara Doyle）的索引，但我似乎找不到任何东西。

我知道我可以试试这个……：

```
foreach(char c in password)
    {
        if(c!='A' || c!='B' || c!='C' || c!='D' ..... || c!='Z')
        {
            errorMessage = "Your password must contain at least one capital letter";
        }
    } 
```

...但这将是非常草率的，并且必须加倍以检查至少一个小写字母。我确信有更好的方法来做到这一点，或者至少是我上面展示的方法的简写。

另外，我可能会决定检查特殊字符的密码（在上面的示例中似乎比使用大小写字母更容易，所以如果我决定使它们成为必要，我可能只将其用于特殊字符）。如果有一种简单（或适当）的方法可以做到这一点，我也很想拥有这些知识。

无论如何，非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-15T16:30:18.470

我不能把功劳，因为我从[这里偷了这个](http://social.msdn.microsoft.com/Forums/is/csharpgeneral/thread/5e3f27d2-49af-410a-85a2-3c47e3f77fb1)

```
using System.Text;
using System.Text.RegularExpressions;

  public enum PasswordScore
  {
    Blank = 0,
    VeryWeak = 1,
    Weak = 2,
    Medium = 3,
    Strong = 4,
    VeryStrong = 5
  }

  public class PasswordAdvisor
  {
    public static PasswordScore CheckStrength(string password)
    {
      int score = 0;

      if (password.Length < 1)
        return PasswordScore.Blank;
      if (password.Length < 4)
        return PasswordScore.VeryWeak;

      if (password.Length >= 8)
        score++;
      if (password.Length >= 12)
        score++;
      if (Regex.Match(password, @"/\d+/", RegexOptions.ECMAScript).Success)
        score++;
      if (Regex.Match(password, @"/[a-z]/", RegexOptions.ECMAScript).Success &&
        Regex.Match(password, @"/[A-Z]/", RegexOptions.ECMAScript).Success)
        score++;
      if (Regex.Match(password, @"/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/", RegexOptions.ECMAScript).Success)
        score++;

      return (PasswordScore)score;
    }
  } 
```

请注意使用正则表达式检查大写字符。这似乎是一种不错的方法，因为它检查长度、大小写字符的使用、数字和特殊字符。

** 更新 **

我知道问题现在已经结束，但我可以为 VoidKing 添加更多解释以理解一些概念。

从 CheckStrength 方法返回 PasswordScore，它可以用作代码中下一步操作的条件。

这是如何使用上述代码的未经测试的演示：

```
String password = "MyDummy_Password"; // Substitute with the user input string
PasswordScore passwordStrengthScore = PasswordAdvisor.CheckStrength(password);

switch (passwordStrengthScore) {
    case PasswordScore.Blank:
    case PasswordScore.VeryWeak:
    case PasswordScore.Weak:
            // Show an error message to the user
            break;
    case PasswordScore.Medium:
    case PasswordScore.Strong:
    case PasswordScore.VeryStrong:
           // Password deemed strong enough, allow user to be added to database etc
           break;
} 
```

在这种情况下，枚举被用作将密码强度分类为人类可读组的一种手段。保持代码干净，并让代码中发生的事情一目了然。

关于 Regex 的使用，如果您不熟悉它们的概念以及如何以及何时使用它们，我建议您进行一些研究，因为这些对于检查字符串中的模式在许多不同的场景中可能很有用。或许从[这里](http://www.regular-expressions.info/)开始。

# java - 指定 JAXB 生成的类的超类

> ID：12899877
> 
> 赞同：0
> 
> 时间：2012-10-15T16:26:29.807
> 
> 标签：java, jaxb

对于 JAXB 生成的类，是否可以指定它们扩展特定的类或者它们只能扩展 Object？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:38:49.943

当然可以使用 JAXB 外部绑定。

您可以在此处阅读更多信息[http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/jaxb/vendorCustomizations.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/jaxb/vendorCustomizations.html)

您需要的特殊标签是`<xjc:superClass>`

# c - BlueZ 4.99 中的蓝牙健康设备配置文件 (HDP) 接收器实现？

> ID：12899880
> 
> 赞同：1
> 
> 时间：2012-10-15T16:26:37.117
> 
> 标签：c, linux, bluetooth, profile, bluez

我是蓝牙编程的新手，我正在尝试创建一个通过蓝牙与心率监视器 (HRM) 交互的 Linux 应用程序。理想情况下，这将通过 BlueZ 工具（sdptool、hcitool、hciconfig 等）或 C 编程语言来完成。

我假设该程序将类似于以下内容：

1.  扫描附近的设备。
2.  浏览每个设备的 SDP，搜索 HDP HRM 源。
3.  执行某种连接命令。
4.  从连接命令传递的流/文件中读取。

当然，作为新手，我对程序流程的假设本身可能是不正确的。

但是，我无法在 BlueZ 工具中找到有关 Health Device Profile 的任何功能。在尝试制作 C 应用程序时，我可以在 BlueZ 头文件中找到与 HDP 实现相关的数字的预处理器宏，但除此之外没有其他功能。

我发现了一些有用的链接：

*   [HDP V10 规格](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CCAQFjAA&url=http%3A%2F%2Fwww.bluetooth.org%2FDocMan%2Fhandlers%2FDownloadDoc.ashx%3Fdoc_id%3D119999&ei=MzV8UMbaOeGe2QWuwYHwBg&usg=AFQjCNFQfqxV7ZP6WTNcZLWVFHNht6GNHw&sig2=dIc1lJL3VHL-9XUkE4tG6Q&cad=rja)(PDF)
*   [BlueZ HDP Python 示例](http://epx.com.br/artigos/bluetooth_hdpbluez.php)

系统信息：

*   Linux 内核：2.6.37
*   BlueZ 版本：4.99
*   D-Bus 版本：1.0

更具体地说，我的问题是否可以使用 BlueZ 工具创建 HDP 接收器？如果没有，是否可以在 C 中这样做。如果没有，最好的方法是什么？我在哪里可以找到 HDP 连接的文档和可能的示例。到目前为止，搜索引擎已被证明无济于事，所以我希望 SO 可以提供一些方向。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T05:31:50.190

试试 Antidote，它为 Linux 编译，并有一个内置的接收器示例 (healthd)。

[http://oss.signove.com/index.php/Antidote:_IEEE_11073-20601_stack](http://oss.signove.com/index.php/Antidote:_IEEE_11073-20601_stack)

# c# - 多重采样在独占模式下不起作用

> ID：12899885
> 
> 赞同：5
> 
> 时间：2012-10-15T16:26:43.237
> 
> 标签：c#, directx, slimdx, multisampling

我想在绘制三角形时启用多重采样，如下图所示： ![在此处输入图像描述](../Images/ce3233e61df0387bc85f1f405dcece7c.png)

我在[另一个问题中找到了一种使用](https://stackoverflow.com/questions/12351424/enabling-antialising-in-slimdx-d3d9)*SlimDX*的方法，但它在独占模式下不起作用。

这是我的代码：

```
void Form1_Load(object sender, EventArgs e)
{
    Direct3D d3d = new Direct3D();

    PresentParameters presentParams;

    presentParams.Windowed = false;
    presentParams.BackBufferFormat = Format.X8R8G8B8;
    presentParams.BackBufferWidth = 800;
    presentParams.BackBufferHeight = 600;
    presentParams.FullScreenRefreshRateInHertz = 60;
    presentParams.SwapEffect = SwapEffect.Copy;
    presentParams.BackBufferCount = 1;
    presentParams.PresentationInterval = PresentInterval.One;

    int multisampleQuality;
    Result result;
    if (d3d.CheckDeviceMultisampleType(adaptor, DeviceType.Hardware, Format.X8R8G8B8, false, MultisampleType.FourSamples, out multisampleQuality, out result))
    {
        if(multisampleQuality > 4)
        {
            presentParams.Multisample = multisampleType;
            presentParams.MultisampleQuality = 4;
        }
    }

    // Device creation
    Device device = new Device(d3d, adaptor, DeviceType.Hardware, this.Handle, CreateFlags.HardwareVertexProcessing, presentParams);
} 
```

最后一行总是会因为*D3DERR_INVALIDCALL*错误而崩溃，即使*CheckDeviceMultisampleType*始终返回 true 且没有错误并且*multisampleQuality*返回 8 。

如果我使用窗口模式或删除多重采样选项，它会起作用。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:22:16.950

尝试

```
 presentParams.SwapEffect = SwapEffect.Discard; 
```

# amazon-ec2 - 如何在亚马逊 ec2 中更改公共 DNS

> ID：12899887
> 
> 赞同：7
> 
> 时间：2012-10-15T16:26:53.810
> 
> 标签：amazon-ec2

我在 Amazon ec2 中创建了一个实例并在其中部署了我的应用程序。

现在我可以使用公共 dns 访问我的应用程序。

我的默认公共 dns 类似于 ec2* ***** *** *compute-1.amazonaws.com。

如何将其更改为像 srinivas.com 这样的好名字？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T16:28:41.813

*   注册您的域名（即去域名注册商并在其他人之前购买域名 srinivas.com）
*   从亚马逊获取弹性 IP 地址
*   通过 aws 管理界面将弹性 IP 地址分配给您的实例
*   使用注册商的 DNS 工具将您的域指向您的弹性 IP 地址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-21T19:28:24.537

正向 DNS 和反向 DNS 是两个完全不同的东西。

无论您在 DNS 中做什么，它都会解析为该 ip 段的所有者所说的任何内容。

将其视为反向 DNS。所以说对于 foo.stackoverflow.com，您首先查询 stackoverflow NS 的根 .com 域，然后在该 NS 中查询 foo A. 说 192.168.1.1

但是没有办法让这种跳跃反向。没有任何东西可以将您从 192.168.1.1 带到 stackoverflow.com 域的 NS。您需要完全不同的查找，但现在查看的是 IP 范围而不是域。

在 AWS 情况下，您需要在此处填写此表格：[https ://aws.amazon.com/forms/ec2-email-limit-rdns-request](https://aws.amazon.com/forms/ec2-email-limit-rdns-request)

他们会将其更改为指向您的 A 记录，这通常是邮件服务器所需要的，因此是电子邮件限制请求。只需忽略该部分并填写表格的底部即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T23:29:24.097

您可以请求删除 PTR 记录。如果您不使用弹性 IP 地址，请执行此操作。

但是，如果您 24x7 运行或者您希望关闭，请务必获取弹性 IP 地址。在没有弹性 IP 的情况下关闭只会让你回到原点。

# sql - 在 IBM DB2 中设置命名参数的属性

> ID：12899889
> 
> 赞同：0
> 
> 时间：2012-10-15T16:26:57.433
> 
> 标签：sql, jdbc, parameters, db2

我刚刚进入 IBM DB2，我有一些相当复杂的查询要创建，这些查询将基于 Java webapp 中的用户输入。问题是，这些查询将与多个不同的参数组合在一起，可以这么说，简单地使用问号是不可能的。真的没有办法知道应该去哪里。值得庆幸的是，DB2 似乎允许命名参数，这让事情变得更加简单。我仔细阅读了一些 DB2 文档，这一切看起来都非常简单，但我一直收到一个异常，说参数标记在 SQL 字符串中不存在，而它显然存在，即 :parameter1 在 SQL 字符串中，但在 setJccStringAtName 方法中找不到“parameter1”。我已经设置了“enabledNamedParameterMarkers” 到传递给 getConnection 方法的 Properties 对象中的 DB2BaseDataSource.YES ，但无论我是否这样做似乎都没有任何区别，即使这似乎确实是这样做的方法。也许我错过了一些明显的东西。这是否也需要在服务器端启用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:20:10.827

我认为您的问题是您混合了纯 Java 开发和 SLQJ 的一些概念。

SQLJ 允许您在标记之间在 Java 代码中本地编写 SQL 查询

```
#sql{ ... }; 
```

但是，前面有一个步骤是“准备”代码并生成 .java 文件和 .bnd。

使用 SQLJ 时，您可以直接在代码中使用主机变量，而不必使用“Sets”方法。

```
String id = "A00";
#sql [ctx] iter = 
       {SELECT LASTNAME
        FROM EMPLOYEE
        WHERE EMPNO = :id}; 
```

InfoCenter中有很多例子：http: [//pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.apdv.samptop.doc/doc/r0007622.html](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.apdv.samptop.doc/doc/r0007622.html)

有IBM的课程专注于这个技术：CG113，在网上找。

# mysql - MySQL：从具有 id 的表中选择所有记录，请参阅架构

> ID：12899890
> 
> 赞同：0
> 
> 时间：2012-10-15T16:27:01.350
> 
> 标签：mysql, join

我不知道如何在 sql 中解决这个问题：

表广告：

```
ad_id
ad_title
ad_type_id 
```

.... 表 ADS_DATA：

```
ad_data_id
ad_id
ad_data_name
ad_data_value 
```

好的，让我们试着让它变得简单：表 ADS 存储类型为 ad_type_id 的对象的公共数据。表 ADS_DATA 根据其 ad_type_id 存储对象的额外数据。

ADS_DATA.ad_data_name 存储数据的名称（在普通表中将是列名），ADS_DATA.ad_data_value 存储此数据的值。根据 ad_type_id，ADS_DATA 表填充了特定的 ad_data_name 值。例如：

```
ADS
ad_id = 1,ad_type_id = 2
ad_id = 2,ad_type_id = 3
ADS_DATA
ad_data_id = 1,ad_id = 1,ad_data_name = 'rooms',ad_data_value = 2
ad_data_id = 2,ad_id = 1,ad_data_name = 'size',ad_data_value = 20
ad_data_id = 3,ad_id = 2,ad_data_name = 'fingers',ad_data_value = 15
ad_data_id = 4,ad_id = 2,ad_data_name = 'toes',ad_data_value = 5 
```

好的，我如何从具有特定 ad_id 的 ADS_DATA 中获取所有行（每一行，尽管其名称或值）以及（ad_data_name = x 和 ad_data_value = y）AND（ad_data_name = x1 和 ad_data_value = y2）AND ...

我知道这是一个huuuugge混乱，但感谢阅读！

更新：这是一个例子：我试图建立一个不同类别的广告系统（ADS.ad_type_id）。根据您选择的广告类型，ads_data 表会填充此类别的特定数据，例如：AD 房屋类别，ads_data 表中将包含：rooms,size,baths,...。我可以创建一个 ads_data 表列包含每个类别的所有可能数据的名称，并且只填写我需要的那些，但我认为这是一种浪费，所以决定创建一个包含列的表：

```
ad_data_id        UNIQUE ID
ad_id             REFERENCE TO ADS.ad_id
ad_data_name      for the "column name",e.g: house_rooms
ad_data_value     for the value.

INSTEAD OF A "NORMAL" RELATION:
ad_data_id        UNIQUE ID
ad_id             REFERENCE TO ADS.ad_id
house_rooms       ad data,only fill columns relative to choseen category(e.g:house_)
house_size
house_baths
car_engine
car_hp
car_year
... 
```

我想通过 ADS 表搜索（例如按广告价格过滤（这是所有广告的通用数据，所以它在 ADS 表中，而不是 ADS_DATA），然后只获取具有的行，例如：（house_rooms BETWEEN X AND Y) AND (house_size BETWEEN A AND B)。在 ADS_DATA 列之间，我需要一个“AND”而不是“OR”。您认为制作“NORMAL”表是否更好（并且可能是唯一的方法）并且只填写每个类别我需要的列？

谢谢

更新：虽然有很多谷歌建议不要使用键/值对，但我发现，尽管性能受到影响，但这里有一个解决方案： [需要一个 MySQL 查询来从存储键值对的表中进行选择](https://stackoverflow.com/questions/4287822/need-a-mysql-query-for-selecting-from-a-table-storing-key-value-pairs)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:40:04.463

我想你有点回答了你自己的问题。子选择似乎适用于此...

```
SELECT * FROM ADS_DATA WHERE ad_id IN (
    SELECT DISTINCT ad_id FROM ADS_DATA 
    WHERE 
        (ad_data_name = 'Foo' AND ad_data_value = 'Bar') 
    OR 
        (ad_data_name = 'Fizz' AND ad_data_value = 'Buzz')
) 
```

不过，您的架构似乎可以进行规范化。在关系数据库中存储键/值对有点浪费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:36:03.220

这假设您不会有相同的重复行`ad_data_name`和`ad_data_value`给定的值`ad_id`：

```
select a.*
from ADS_DATA a
inner join (
    select ad_id
    from ADS_DATA
    and (
        (ad_data_name = 'rooms' and ad_data_value = 2) 
        or (ad_data_name = 'size' and ad_data_value = 20)
    ) 
    group by ad_id
    having count(*) = 2
) am on a.ad_id = am.ad_id
where a.ad_id = 1 
```

# batch-file - %~dp0 是什么意思

> ID：12899892
> 
> 赞同：0
> 
> 时间：2012-10-15T16:27:12.733
> 
> 标签：batch-file, modifiers

> **可能重复：**
> [%~dp0 是什么意思，它是如何工作的？](https://stackoverflow.com/questions/5034076/what-does-dp0-mean-and-how-does-it-work)

几天前我不得不在我的工作中修改一个bat文件。当我阅读文件时，我发现我不知道字符串“%~dp0”是什么意思。我在微软网站上得到了它的解释。它说“%~dp0 将 %0 扩展为驱动器号和路径。” 我的问题是剂量扩大是什么意思？为什么结果是驱动程序字母+路径，而不是驱动程序字母+路径+ bat的名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T16:29:07.027

1.  Expands 表示将标识符替换为其值。

2.  `dp`表示驱动器号和路径。 `%0`单独将包括文件名。

# asp.net - HTTP 重定向到 SOAP Web 服务

> ID：12899894
> 
> 赞同：1
> 
> 时间：2012-10-15T16:27:16.603
> 
> 标签：asp.net, web-services, soap, iis-7, http-redirect

我需要将几个 ASP.net SOAP Web 服务移动到不同的服务器，但它们被广泛使用，我们不能中断客户端与其以前位置的连接。无法修改客户端。

我已经建立了到新服务位置的 HTTP 重定向 (302)，但 SOAP 客户端获取的是重定向广告而不是服务响应。

我已经看到了一些处理这个问题的方法，但它们都涉及修改客户端代码，这不是一个选项。我剩下的唯一想法是创建一个透明的代理 SOAP 服务来返回所需的响应，但是我们并没有放松我们的耦合，而是实际上将它收紧了一个档次，这既愚蠢又难看。

有更好的答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:14:12.620

我认为使用 HttpServerUtility.Transfer 方法为您的旧服务创建一个使用旧 URL 的存根是最好的方法。这对任何客户端应该是 100% 透明的，这意味着它不会发送 HTTP 级别的重定向或任何让客户端正确接收和响应的内容。

在服务器端，您可以将旧的 Web 服务调用映射到新的调用，并且它应该对客户端完全透明。这仅在来自新服务的响应仍然足够接近以验证旧服务的 WSDL 时才有效。如果 web 服务方法和响应的签名发生了太大的变化，那么您将无法透明地执行此操作。

# c# - 如何从gridview中删除特定行。使用gridview的内置删除命令按钮

> ID：12899901
> 
> 赞同：0
> 
> 时间：2012-10-15T16:27:32.323
> 
> 标签：c#, asp.net

嗨，我正在将文本框中的数据添加到本地的 gridview 中，而不是从数据库中。它就像一个销售页面，推销员正在销售产品。现在我想从那个gridview中删除一行，但我在删除时总是遇到异常。请帮助我。这是我的代码，我在其中获取数据并将其存储在gridview中。谢谢。

```
DataTable dt1 = new DataTable();

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            gridVIEWData();
            GridView1.DataSource = dt1;
            GridView1.DataBind();
        }
private void gridVIEWData()
    {

        dt1.Columns.Add("pName", typeof(string));
        dt1.Columns.Add("pCategory", typeof(string));
        dt1.Columns.Add("price", typeof(string));
        dt1.Columns.Add("pQuantity", typeof(string));
        dt1.Columns.Add("totalPrice", typeof(string));
        Session["dtInSession"] = dt1;   //Saving Datatable To Session
    }
protected void Button3_Click(object sender, EventArgs e)
    {
        if (Session["dtInSession"] != null)
            dt1 = (DataTable)Session["dtInSession"]; //Getting datatable from session 

            Int32 total = Convert.ToInt32(txt_quantity.Text) * Convert.ToInt32(txt_price.Text);
            DataRow dr = dt1.NewRow();
            dr["pName"] = DropDownList2.SelectedItem;
            dr["pCategory"] = DropDownList1.SelectedItem;
            dr["price"] = txt_price.Text;
            dr["pQuantity"] = txt_quantity.Text;
            dr["totalPrice"] = total;
            dt1.Rows.Add(dr);

            Session["dtInSession"] = dt1;     //Saving Datatable To Session 

            GridView1.DataSource = dt1;
            GridView1.DataBind();

        }
protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {

       // string value = GridView1.DataKeys[e.RowIndex].Values["price"].ToString();
        //GridView1.DeleteRow(Convert.ToInt32(value));
        //GridView1.DeleteRow(GridView1.SelectedIndex);

           // dt1.Rows.RemoveAt(GridView1.SelectedIndex);
        Int32 index = GridView1.SelectedIndex;
        GridView1.DeleteRow(index);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:11:11.903

只是为了与您的代码保持一致，

方法1：

```
protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
        if (Session["dtInSession"] != null)  
           dt1 = (DataTable)Session["dtInSession"];

       Int32 index = GridView1.SelectedIndex;
       dt1 = dt1.Rows[index].Delete();

       dt1.AcceptChanges();

       Session["dtInSession"] = dt1;  //Saving Datatable To Session   
       GridView1.DataSource = dt1;                         
       GridView1.DataBind();   
} 
```

方法二：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="pName" onselectedindexchanged="GridView1_SelectedIndexChanged"> 
```

和

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
  string _pName = Convert.ToString(GridView1.SelectedDataKey.Value); 

  // Once you get the pName you can query from DataTable and Delete the row which the pName = _pName
  // BindGrid and Store DataTable in session.
} 
```

这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-30T10:39:58.523

```
 protected void gvDetails_RowDeleting(object sender, GridViewDeleteEventArgs e)
        {
            if (ViewState["CurrentTable"] != null)
                dt = (DataTable)ViewState["CurrentTable"];            
            if (dt.Rows.Count > 0)
            {
                int Index = Convert.ToInt32(gvDetails.DataKeys[e.RowIndex].Values["Pk"].ToString());
                dt.Rows.Cast<DataRow>().Where(o => o.Field<Int32>("Pk").Equals(Index)).FirstOrDefault().Delete();
               //  dt.Rows.RemoveAt(Index-1);
                gvDetails.DataSource = dt;
                gvDetails.DataBind();
            }
        } 
```

# c# - MVC 3 - RequiredAttribute - 基于会话覆盖

> ID：12899903
> 
> 赞同：0
> 
> 时间：2012-10-15T16:27:40.940
> 
> 标签：c#, asp.net-mvc

我有一个这样的模型，其中包含几个字段，例如姓名、电子邮件和电话。所有这些都是用 [Required] 属性设置的。

我想做的是覆盖RequiredAttribute，并且仅在网站的当前访问者不是管理员时才需要该属性。所以基本上管理员可以输入他们喜欢的内容，或者在普通用户无法输入的地方留空。

谁能指出我正确的方向或建议实现这一目标的最佳方法？

要确定访问者是否是管理员，我使用：

```
var permissionId = Helpers.ConvertToInt(Services.UserService.GetCurrentPermissionId().ToString()); 
```

如果这是 0 或 1，则访问者不是管理员，因此该字段应为必填项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:40:45.620

您可以编写自定义条件验证属性：

```
public class RequiredIfPermissionIdsAttribute : RequiredAttribute
{
    public int[] PermissionIds { get; private set; }

    public RequiredIfPermissionIdsAttribute(params int[] permissionIds)
    {
        PermissionIds = permissionIds ?? new int[0];
    }

    public override bool IsValid(object value)
    {
        int permissionId = Helpers.ConvertToInt(Services.UserService.GetCurrentPermissionId().ToString());

        if (PermissionIds.Contains(permissionId))
        {
            return base.IsValid(value);
        }

        // the current permission id is not in the list of permission ids
        // that require validation => we consider the model valid
        return true;
    }
} 
```

然后你可以用这个属性装饰你的财产：

```
[RequiredIfPermissionIds(0, 1)]
public string SomeProperty { get; set; } 
```

或者，您可以使用白名单方法，而不是使用黑名单方法：

```
public class NotRequiredIfPermissionIdsAttribute : RequiredAttribute
{
    public NotRequiredIfPermissionIdsAttribute(params int[] permissionIds)
    {
        PermissionIds = permissionIds ?? new int[0];
    }

    public int[] PermissionIds { get; private set; }

    public override bool IsValid(object value)
    {
        int permissionId = Helpers.ConvertToInt(Services.UserService.GetCurrentPermissionId().ToString());

        if (!PermissionIds.Contains(permissionId))
        {
            return base.IsValid(value);
        }

        return true;
    }
} 
```

进而：

```
[NotRequiredIfPermissionIds(2)]
public string SomeProperty { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:28:21.450

我建议考虑使用[FluentValidation](http://fluentvalidation.codeplex.com/)，它允许您指定更复杂的规则，然后内置数据注释允许，而无需构建自定义属性。

然后，您可以使用与此类似的语法来解决此问题：

```
RuleFor(obj => obj.Email).NotEmpty().Unless(obj => Helpers.ConvertToInt(Services.UserService.GetCurrentPermissionId()) > 1) 
```

# asp.net - 对象数据源选择方法直接访问数据访问层？

> ID：12899906
> 
> 赞同：0
> 
> 时间：2012-10-15T16:27:43.010
> 
> 标签：asp.net, sql, gridview, objectdatasource

在我的数据访问层（我正在使用数据集）中，我有几个查询从数据库表中检索不同的列。同时，我有一个业务逻辑层，它有一种基于输入参数的方法，从 DAL 中选择一个查询。

现在，由于实现分页和排序非常容易，我希望在我的网页上使用对象数据源作为网格视图的数据源。但是，对象数据源的 select 方法似乎直接进入了数据访问层，而不是业务逻辑层。

是否可以将对象数据源的select方法指向BLL中的方法？还是我坚持为 DAL 中的不同查询创建多个对象数据源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:56:08.110

我不明白你为什么说

> 似乎对象数据源的选择方法直接进入数据访问层而不是业务逻辑层

您可以通过指定 TypeName 和 SelectMethod 来指定调用哪个方法：

```
<asp:ObjectDataSource ID="ODSData" runat="server" 
    SelectMethod="GetXXX" TypeName="BusinessLayer.MyClass" 
```

但是，如果您想从 Visual Studio 设计器中查看业务方法，则必须使用以下内容装饰业务层方法：

```
 [System.ComponentModel.DataObjectMethodAttribute
            (System.ComponentModel.DataObjectMethodType.Select, true)] 
```

# jakarta-ee - IBM RAD 8 无法仅从 RAD 内部署第二个 ear 文件

> ID：12899912
> 
> 赞同：0
> 
> 时间：2012-10-15T16:28:09.423
> 
> 标签：jakarta-ee, websphere, java-ee-6, jndi

以下行动来自**RAD**

我有两个耳朵项目，**myEar** .ear 和**myXEar** .ear

myEar.ear**依赖**于 ejb 客户端模块，它是 myXEar.ear 的一部分

首先我启动**服务器**，然后将 myXEar.ear 添加到服务器，这样就**可以正常工作**。

**其次，**我添加了 myEar.ear 但是当它尝试将 ejb 与**message绑定时它****会中断**：

 **```
[10/15/12 10:46:33:915 CEST] 0000008f EJBContainerI E   WSVR0039E: Unable to start EJB jar, ManageInfoHeaderFacadeBean: The com.volvo.myEarx.facade.b.ManageInfoHeaderFacade interface of the ManageInfoHeaderFacadeBean bean in the myEarXFacadeEJB-5.2.27_M2ECLIPSE_UPGRADE-SNAPSHOT-client.jar module of the myEarEar application cannot be bound to the ejb/ManageInfoHeaderFacade name location. The com.volvo.myEarx.facade.b.ManageInfoHeaderFacade interface of the ManageInfoHeaderFacadeBean bean in the myEarXFacadeEJB-5.2.27_M2ECLIPSE_UPGRADE-SNAPSHOT.jar module of the myEarXEar application has already been bound to the ejb/ManageInfoHeaderFacade name location. 
```

EJB 已经在 myEarX.ear 启动期间注册了......所以现在我们遇到了**这个问题，当引用相同 ejb 模块的第二个 ear**文件尝试**“启动它”时**。

> 为什么它在 RAD 内不起作用？从**webconsole**一切正常**，**但我需要**在 RAD 内完成这项工作。**

 ****我看过 org.eclipse.wst.common。**组件**文件和什么不是..但无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:20:08.053

您有两个 EAR 项目，它们都包含相同的 EJB 模块。EJB 模块有一个绑定到`ejb/ManageInfoHeaderFacade`. 由于 JNDI 命名冲突，在服务器上部署两个 EAR 模块将导致错误。

我严重怀疑它是否可以通过 Web 管理控制台完美运行。我怀疑，当您通过 Web 管理控制台进行部署时，您可以通过手动为 bean 分配 JNDI 名称*或*为 bean的 JNDI 名称选择前缀来使其工作。这样，每个 bean 都有自己独特的 JNDI 名称。

在 RAD 中，没有办法这样做（至少在 RAD 8.0 中没有）。******

# iphone - iOS - "NSObjectFromString"--- 从字符串构建对象的名称

> ID：12899914
> 
> 赞同：0
> 
> 时间：2012-10-15T16:28:17.107
> 
> 标签：iphone, ios, ipad

我有几个我想使用的对象，比如 obj11、obj21、obj33 等。

正确使用对象的选择取决于用户定义的一些参数，例如：要使用的大小和对象的种类。

因此，对象名称上的第一个数字代表大小，第二个字母代表种类。如果用户选择对象大小 2 和对象种类 1，则要加载的对象将是“obj21”。

有没有办法根据对象的名称引用对象作为 NSString？

就像是

```
NSString *name = [NSString stringWithFormat:@"obj%d%d", size, kind];
["use object name" doSomething]; 
```

我需要类似 NSSelectorFromString 的东西，但在这种情况下，它会根据其名称运行一个方法。我需要的是像“NSObjectFromString”这样的东西，它根据对象的名称作为字符串引用一个对象。

我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:30:03.543

由于这是不可能的，最好将您的对象存储在 NSDictionary（或其可变副本）中，并使用您构建的字符串作为该对象的键。

这是一个奇怪的例子：

```
NSMutableDictionary *objectDict = [[NSMutableDictionary alloc] init];

... init your objects somehow ...

// build your keys somehow and add the object to the dict
int size = 1;
int kind = 2;

NSString *name = [NSString stringWithFormat:@"obj%d%d", size, kind];
[objectDict addObject:obj12 forKey:name];

... Do some stuff ...

// access your object and call a method
id obj =  [objectDict objectForKey:name];
[obj doSomething]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:51:55.693

您可以创建一个工厂方法并使用`NSSelectorFromString`它来动态调用它。

更多细节在这里：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html)

编辑：

我对我认为是同一个问题的回答：

```
id object = [[NSClassFromString(@"NameofClass") alloc] init]; 
```

[按名称创建objective-c类实例？](https://stackoverflow.com/questions/1174093/create-objective-c-class-instance-by-name/1174127#1174127)

# c# - C#多态性错误：由于其保护级别而无法访问

> ID：12899916
> 
> 赞同：3
> 
> 时间：2012-10-15T16:28:35.103
> 
> 标签：c#

我正在尝试一个多态示例，但我的代码中出现以下错误：

```
public class CPolygon 
{
    CPolygon() {} 
    public int width {get; set;} 
    public int height {get; set;}        
    public virtual int area(){ return 0; } 
}

class CRectangle: CPolygon 
{ 
    public CRectangle() {} //'Lista.CPolygon.CPolygon()' is inaccessible due to its protection level

    public override int area ()
    { 
        return (width * height); 
    }
}

class CTriangle: CPolygon //'Lista.CPolygon.CPolygon()' is inaccessible due to its protection level
{
    CTriangle() {} 

    public override int area ()
    { 
        return (width * height / 2); 
    }
}

static void Main(string[] args)
{
    CTriangle triangle= new CTriangle();
    triangle.height=5;
    triangle.width=6;
    int area1 = triangle.area();
} 
```

我得到派生类构造函数“由于其保护级别而无法访问”的错误。我不知道为什么。我用隐式派生构造函数做了另一个例子。

```
abstract class Shape
{
    public Shape(string name = "NoName")
    { PetName = name; }
    public string PetName { get; set; }
    public abstract void Draw();
}

class Circle : Shape
{
    public Circle() {}
    public Circle(string name) : base(name) {}
    public override void Draw()
    {
    Console.WriteLine("Drawing {0} the Circle", PetName);
    }
}

class Hexagon : Shape
{
    public Hexagon() {}
    public Hexagon(string name) : base(name) {}
    public override void Draw()
    {
    Console.WriteLine("Drawing {0} the Hexagon", PetName);
    }
} 
```

这有效并且具有几乎相同的代码。构造函数 "Circle()" 、 "Hexagon()" 这次不需要任何保护级别。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T16:30:03.377

```
CPolygon() {} 
```

那是一个`private`构造函数。
你不能在课堂外调用它。

由于派生类必须始终从其基类调用构造函数，因此会出现错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T16:32:01.517

C# 的默认符号可见性是私有的。如果你不把“public”放在类或函数定义的前面，它就具有私有可见性，这意味着没有其他类可以看到该符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:33:01.297

CPolygon 类是 Public，但您还没有为 CRectangle 和 CTriangle 定义保护级别，如果您将两个派生类设为 public，您还会收到错误吗？

# c++ - 未调用模板成员的重载构造函数

> ID：12899924
> 
> 赞同：0
> 
> 时间：2012-10-15T16:29:00.720
> 
> 标签：c++, c++11

好吧，这个让我发疯。我不知道为什么不调用构造函数。

这是代码：

```
template<class T>
struct JV {
  JV() {}
  JV(const T& t0) : F{{t0}} {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }
  std::array<T,1> F;
};

template<class T>
struct RS : public JV<T>
{
  RS(): JV<T>() {}

  RS(const T& rhs) : JV<T>(rhs) {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }
};

template<class T>
struct PS : public JV<T>
{
  PS(): JV<T>() {}

  PS(const T& rhs) : JV<T>(rhs) {
    std::cout << __PRETTY_FUNCTION__ << "\n";
  }
};

template<class T>
struct WJ
{
  WJ() {
    std::cout << "WJ::WJ()\n";
  }
};

int main() {
  PS<RS<WJ<float> > > wj;
  std::cout << "go for it\n";
  PS<PS<RS<WJ<float> > > > copy(wj);
} 
```

如果使用 GCC g++ 4.7.2 编译`-std=c++0x`并运行，输出为：

```
WJ::WJ()
go for it
JV<T>::JV(const T&) [with T = PS<RS<WJ<float> > >]
PS<T>::PS(const T1&) [with T1 = PS<RS<WJ<float> > >; T = PS<RS<WJ<float> > >] 
```

为什么不`JV<T>::JV(const T&) [with T = PS<RS<WJ<float> > >]`调用重载的构造函数`PS<RS<WJ<float> > >::PS<RS<WJ<float> > >(const RS<WJ<float> >&)`？

编辑：

此外，在限制重载的构造函数时它不会调用它，见上文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:33:56.423

~~模板构造函数永远不是复制构造函数。~~编译器使用复制构造函数在in`PS<RS<WJ<float>>>`内部构造。您没有在您的代码副本构造器中进行跟踪，因此之后没有显示其他消息。`std::array``JV``JV<T>::JV(T const&)`

# sql - 如何使用变量查询表？

> ID：12899929
> 
> 赞同：1
> 
> 时间：2012-10-15T16:29:20.953
> 
> 标签：sql, oracle

我正在尝试在 Oracle 中执行与此等效的 SQL。基本上，我需要将给定列中的值放入变量中，然后使用这些变量来查询表

```
DECLARE @transID INT
       ,@pol_no varchar(20)

SELECT @pol_no = 'xxx'

SELECT @transID = p.transID 
  FROM policy_dimension p 
 WHERE p.pol_no = @pol_no

SELECT pd.* 
  FROM property_dimension pd 
 WHERE pd.trans_id = @transID 
```

我试过这个

```
DECLARE 
  policy_no VARCHAR2(20);
  transaction_id int;
BEGIN
  :policy_no := '20P0000175';

  SELECT pd_transaction_id
    INTO transaction_id
    FROM policy_dimension p
   WHERE p.pd_policy_no = :policy_no
     AND ROWNUM = 1 
   ORDER BY pd_transaction_id desc;

   BEGIN
     SELECT *
       FROM property_dimension pd
      WHERE pd.pd_transaction_id = :transaction_id;
   END;

END;
/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:37:38.180

丢失冒号

```
DECLARE 
  v_policy_no VARCHAR2(20);
  v_transaction_id number;
  v_some_value number;
BEGIN 
 -- no colon here ( :policy_no )
  v_policy_no := '20P0000175';

  SELECT pd_transaction_id
    INTO v_transaction_id -- no colon here
    FROM policy_dimension p
   WHERE p.pd_policy_no = v_policy_no -- no colon here
     AND ROWNUM = 1 
   ORDER BY pd_transaction_id desc;

   BEGIN
     SELECT some_column into v_some_value
       FROM property_dimension pd
      WHERE pd.pd_transaction_id = v_transaction_id; -- no colon here
   END;

END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:42:37.690

此代码显示`pd_transaction_id`来自`property_dimension`（我不知道其他列）：

```
set serveroutput on -- need to display message using dbms_output.put_line
DECLARE 
  policy_no VARCHAR2(20);
  transaction_id int;
  cur_pd_transaction_id int;

  CURSOR cur (param VARCHAR2)  -- cursor with parameter
  is       
    SELECT pd_transaction_id /*You can add here more columns*/
    FROM property_dimension pd
    WHERE pd.pd_transaction_id = param;
begin
   policy_no := '20P0000175';

   SELECT pd_transaction_id
     INTO transaction_id -- set policy_dimension.pd_transaction_id to transaction_id
    FROM policy_dimension p
    WHERE p.pd_policy_no = policy_no; 

   open cur(transaction_id); -- open cursor with parameter transaction_id
   fetch cur into cur_pd_transaction_id;    
    LOOP
    FETCH cur INTO cur_pd_transaction_id;
       EXIT WHEN cur%NOTFOUND;
       dbms_output.put_line('pd_transaction_id: '||cur_pd_transaction_id);
   END LOOP;

   close cur;  
end; 
```

下面是更简单的方法：

```
set serveroutput on
DECLARE 
  policy_no VARCHAR2(20);
  transaction_id int;
begin
   policy_no := '20P0000175';

   SELECT pd_transaction_id
     INTO transaction_id 
    FROM policy_dimension p
    WHERE p.pd_policy_no = policy_no; 

   for cur in ( SELECT *
                FROM property_dimension pd
                WHERE pd.pd_transaction_id = transaction_id)   
    LOOP
       dbms_output.put_line('pd_transaction_id: '||cur.pd_transaction_id);
   END LOOP;

end; 
```

[在这里](http://www.techonthenet.com/oracle/cursors/)您可以找到有关游标的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:14:07.737

变量之前的符号`:`使其成为`Bind`变量，在您的情况下这不是必需的。PLSQL 块内的A`SELECT`不会按原样显示结果，您需要遍历结果集的每条记录并调用`dbms_output`包以显示输出。因此，对您的 PLSQL 块进行如下微小更改应该可以使其正常工作。

```
SET SERVEROUTPUT ON
DECLARE 
  policy_no VARCHAR2(20);
  transaction_id int;
BEGIN
  policy_no := '20P0000175';

 BEGIN             --Since the select query can return no rows which will cause this Block to fail, use proper exception handling
    SELECT pd_transaction_id
      INTO transaction_id
      FROM policy_dimension p
     WHERE p.pd_policy_no = policy_no
       AND ROWNUM = 1 
     ORDER BY pd_transaction_id desc;
 EXCEPTION
 WHEN NOTFOUND THEN
     dbms_output.put_line ('No pd_transaction_id found');
     transaction_id := '0';
 END;

   FOR c_rec in (SELECT *
                   FROM property_dimension pd
                  WHERE pd.pd_transaction_id = transaction_id) --Notice the LOOP
   LOOP
    dbms_output.put_line ('Displaying - ' || c_rec.column1 ||' '||c_rec.column2||....); --Display every row with columns column1, column2 , column3.... as the column names
   END LOOP;
END;
/ 
```

# c# - 在屏幕上平滑滑动位图 C#

> ID：12899935
> 
> 赞同：1
> 
> 时间：2012-10-15T16:29:50.133
> 
> 标签：c#, .net, winforms, bitmap

我有一个类似于 android 通知抽屉类型的表单，用户可以选择在表单上放置背景图像；由于表单通过用鼠标拉到屏幕上一直打开，我怎样才能使位图在被拉到屏幕上时看起来像没有绘制？我正在使用 C#.net。当窗体被拉起时，位图是白色的，直到它有一秒钟可以加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:34:13.233

您可以尝试将表单设置为在双缓冲模式下进行绘制。

```
class Form1 : Form {
  Form1(){
   this.doublebuffered = true;
  }
} 
```

[如何在表单上加倍缓冲 .NET 控件？](https://stackoverflow.com/questions/76993/how-to-double-buffer-net-controls-on-a-form)

# iphone - iOS 上命令 Quartz 2D CGContext 绘图

> ID：12899944
> 
> 赞同：2
> 
> 时间：2012-10-15T16:30:21.607
> 
> 标签：iphone, objective-c, ios, quartz-2d, cgcontext

嗨，我已经制作了一个自定义视图，它表示带有轴等的图形，所以我在视图的 drawRect: 方法中使用 Quartz 2D 绘制了很多线。

但是，我现在想更改它，以便可以使用视图的控制器分别绘制图形的特定部分。例如，绘制 x 轴等待 10 秒，然后绘制 y 轴。所以我已经分离了绘图命令并将它们放入单独的方法中，以便可以从控制器调用它们，但现在因为我在 drawRect 之外绘图：我无法获得图形上下文。

我应该如何实施呢？石英 2d 甚至是正确的使用方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:46:20.177

您可以将`drawRect:`功能分成多个`UIView's`，并让视图控制器管理在给定时间将绘制哪些视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:51:10.360

为什么不从每个绘制操作中创建一个 UIImage 并在 UIImageView 中绘制 UIImage ？

```
UIGraphicsBeginImageContext(self.view.frame.size);
//draw code here (draw previous UIIMage first before new drawing)
[drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

//now draw here

//get the UIImage
drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//set the UIImage to your UIImageView 
```

# css - susy、媒体查询和 lt IE9

> ID：12899945
> 
> 赞同：0
> 
> 时间：2012-10-15T16:30:22.933
> 
> 标签：css, internet-explorer, media, susy-compass

我想知道你用什么（如果有的话）垫片来让魔法网格在 IE8 及以下的[SUSY](http://susy.oddbird.net/)中正确响应？

在非 susy 网站上，我一直使用[moderizr](http://modernizr.com/)或 google 的 shim，它们按预期工作。我在我的第一个 SUSY 网站上工作，最大尺寸的媒体查询不会启动。

[http://dev.apehangar.com](http://dev.apehangar.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:52:43.170

我不清楚你在寻找什么样的“垫片”。我不知道任何让 MQ 在 IE8 中工作的好方法，但 Susy 确实可以选择[在 fallback class 下输出样式](http://susy.oddbird.net/guides/reference/#ref-media-layouts)。这些样式不会动态响应，但您可以使用它向 IE 发送桌面站点：

```
.page {
  width: 20em;
  @include at-breakpoint(30em 12 no-mediaqueries) {
    width: 70em;
  }
} 
```

将输出：

```
.page { width: 20em; }
@media (min-width: 30em) { .page { width: 70em; } }
.no-mediaqueries .page { width: 70em; } 
```

您可以将“no-mediaqueries”替换为您想要的任何后备类。只需确保使用 Modernizr 或 IE 条件注释应用该类。

# ios - 查找哪些朋友 og.like 了特定对象

> ID：12899946
> 
> 赞同：-1
> 
> 时间：2012-10-15T16:30:26.430
> 
> 标签：ios, facebook-graph-api

我正在使用以下 Graph API 请求来获取所有喜欢特定对象的朋友：

```
me/?fields=friends.fields(likes.target_id(searched_object_id)) 
```

iOS代码如下：

```
[ FBRequestConnection startWithGraphPath: [ NSString stringWithFormat: @"me/?fields=friends.fields(name,likes.target_id(%lld))", 7919071058 ]
                 completionHandler: ^(FBRequestConnection *connection, id result, NSError *error) {
                     [ [ [ result objectForKey: @"friends" ] objectForKey: @"data" ] enumerateObjectsUsingBlock:^(id friend, NSUInteger idx, BOOL *stop) {
                         if ( [ friend objectForKey: @"likes" ] )
                             NSLog( @"%@ also likes that", [ friend objectForKey: @"name" ] );
                     } ];
                 }
 ]; 
```

不幸的是，我想对 og.likes 做同样的事情 .target_id 不可用

有关信息 og.likes 是开放图形对象，您可以在您的应用程序中声明。（[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)）

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:45:19.907

此处遵循修改后的代码以使用 og.likes

```
[ FBRequestConnection startWithGraphPath: @"me/?fields=friends.fields(name,og.likes)"
                     completionHandler: ^(FBRequestConnection *connection, id result, NSError *error) {
                         [ [ [ result objectForKey: @"friends" ] objectForKey: @"data" ] enumerateObjectsUsingBlock:^(id friend, NSUInteger idx, BOOL *stop) {
                             [ [ [ friend objectForKey: @"og.likes" ] objectForKey: @"data" ] enumerateObjectsUsingBlock:^(id ogLike, NSUInteger idx, BOOL *stop) {
                                 if ( [ [ [ [ ogLike objectForKey: @"data" ] objectForKey: @"object" ] objectForKey: @"id" ] isEqualToString: [ NSString stringWithFormat: @"%lld", idObject ] ] )
                                     NSLog( @"%@ also og.likes that", [ friend objectForKey: @"name" ] );
                             } ];
                         } ];
                     }
 ]; 
```

正如你所看到的，我必须抓住我朋友的每一个 og.likes 然后遍历他们以找到匹配的一个。这是更多的带宽，但它的工作原理。如果有人找到更优雅的方式，我仍然对此感到好奇。

问候

# java - 不想在子类中使用构造函数

> ID：12899949
> 
> 赞同：1
> 
> 时间：2012-10-15T16:30:36.037
> 
> 标签：java, constructor, super

在我的程序中，我有 4 个类，如下所示：

*   `class Bank`
*   `class Branch extends Bank`
*   `class Customer extends Branch`
*   `class Loan extends Customer`

如果我想添加 a `Customer`，那么我会提供 main 函数中的所有参数。像：

```
customer(bank name, bank add, branch number, brunch add, customer info...) 
```

从这个构造函数中，银行的信息`Bank`通过 both`Customer`和`Branch`构造函数 using`super()`等传递给类。

问题是当我创建`Loan`扩展`Customer`类的 , 类时，我没有使用任何构造函数，我也不想使用它，因为我只想要`Customer`类中的一个变量。但是我的编译器显示了这个错误，它是说使用构造函数来获取`Bank`、`Branch`和`Customer`的构造函数的所有参数。

如何在不使用`Loan`类中的任何构造函数的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:40:50.907

避免在类中使用`Customer`构造函数的最简单方法是**不**扩展。在决定扩展什么类（如果有的话）时，您应该使用“is a”测试。例如， a是 a ，所以有 是有意义的。但是，is a并没有真正的意义，所以你不应该这样做。另一方面， a有一个; 事实上，a可能不止一个或根本没有。这意味着在类中有一个成员变量（或者可能是一个of s，如果您已经了解了 Container API）是有意义的。`Loan`**`Customer``Branch``Bank``class Branch extends Bank``Loan``Customer``class Loan extends Customer``Customer``Loan``Customer``Loan``Loan``List``Loan``Customer`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:40:11.093

您将不得不修改您的 OO 思维：

分行扩展了银行，好吧，我可以忍受它，但可能不是一个好主意（也许装饰器模式是更好的选择）

客户扩展了分支，这是不正确的（尝试真实地思考......）一个分支将有一个客户集合，并且可能一个客户有一个字段分支，具体取决于您的需要。

贷款扩展客户，这是不正确的，就像上面一样，客户可以拥有一系列贷款，并且可能贷款拥有一系列客户，具体取决于您的需求。

所以我建议你检查你的对象模型。

请注意，只有在您真的需要时才有 2 路参考是一个好主意，但由于我不知道您的要求，我无法为您决定。

一些要阅读的文章：

[装饰图案](http://en.wikipedia.org/wiki/Decorator_pattern)

[组合优于继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:50:27.083

不要使用继承，对这些类使用引用：

```
class Bank {
    private List<Loan> loans;
}

class Loan {
    private Customer customer;
} 
```

您可以通过不同的方式对此进行建模：银行有一个客户列表和一个贷款列表，一个贷款有一个客户或一个客户有一个贷款列表，等等。但重要的一点是，一个类应该只在以下情况下扩展另一个类它“是”那种类型：Dog 可以扩展 Animal，但 Dog 不会扩展 Kennel 或 Food。

当你这样做时，你可以创建一个银行，在构造函数中将它的属性传递给它。然后创建一个客户，只将客户属性传递给它的构造函数。要将客户关联到银行，请将此方法添加到银行：

```
public void addLoan(Loan loan) {
    this.loans.add(loan);
} 
```

那么每个类的构造函数只需要它自己的属性。**

# android - 如何打开一个活动，输入数据，然后用数据返回第一个活动？

> ID：12899951
> 
> 赞同：0
> 
> 时间：2012-10-15T16:30:37.813
> 
> 标签：android, android-intent

好的，标题不是一个标题，但不要评判我。我搜索了网站，还有很多其他的，但我似乎没有找到正确的答案。问题是这样的：

我创建了一个具有一个主要活动（活动 A）的 android 应用程序，它打开了另一个活动 B，我在其中放入了一些数据，该数据应传输回第一个活动，然后记录到数据库中。

我这样做：

在活动 A 中：

-我调用一个新的意图，然后调用`startActivityForResult()`方法。

在第二个活动中，当我点击保存按钮时，它会被执行：

```
btnSave.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Intent i = new Intent(getApplicationContext(), MainActivity.class);

                i.putExtra("date", dateText.getText().toString());
                i.putExtra("time", timeText.getText().toString());
                i.putExtra("text", taskText.getText().toString());
                setResult(100);
                startActivity(i);

            }
        }); 
```

当我回到第一个活动（主要活动）时，此方法被调用。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(resultCode==100)
{
            i = getIntent();
        String text = i.getStringExtra("text");
            String date = i.getStringExtra("date");
            String time = i.getStringExtra("time");
            Toast.makeText(this, text + "-" + date + "-" + time, Toast.LENGTH_LONG).show();
        }

        super.onActivityResult(requestCode, resultCode, data);
} 
```

使用 toast 消息我只得到空值，这意味着数据没有从第二个活动传输回第一个活动。有人可以帮我吗，顺便说一句，数据应该保存到数据库中，但这是另一个问题，我只是提到它，以防它可能有助于以后不使事情复杂化。

先谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:40:10.783

在按钮保存单击侦听器中，您无需`Intent`使用 startActivity() 调用。就是这样

```
 Intent returnIntent = new Intent();
      returnIntent.putExtra("SelectedBook",book);
      setResult(RESULT_OK,returnIntent);        
      finish(); 
```

并在 onActivityResult() 获取数据`Intent data`

请参阅此[示例](http://saigeethamn.blogspot.in/2009/08/android-developer-tutorial-for_31.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:54:25.497

你有很多方法可以从不同的活动中获取数据，

1.  您正在使用的那个，错误是不要打电话`startActivity`而只是打电话`finish();` [链接](http://developer.android.com/training/basics/intents/result.html)
2.  使用静态变量并直接在这些公共字符串变量上输入数据并在任何地方获取。
3.  使用 SharedPreferences 并通过仅使用键值在任何地方使用保存的数据，即不仅仅是在`onActivityResult` [链接中](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:48:10.480

尝试在第二个活动中使用它

```
Intent returnIntent = new Intent();
returnIntent.putExtra("SelectedBook",book);
returnIntent.putExtra("date", dateText.getText().toString());
returnIntent.putExtra("time", timeText.getText().toString());
returnIntent.putExtra("text", taskText.getText().toString());
setResult(RESULT_OK,returnIntent);        
finish(); 
```

并在第一个活动中尝试使用

```
data.getStringExtra("date"); 
```

和其余的类似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T16:41:24.980

在您的第二个活动中，您不调用 startActivity。您可以调用[setResult(int)](http://developer.android.com/reference/android/app/Activity.html#setResult%28int%29)或[setResult(int, Intent)](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29)然后`finish()`

在您的第一个活动中，您检索结果。

# c++ - 仅当您在 QML 中单击 Blackberry Cascades 模拟器时，您如何响应点击文本字段？

> ID：12899952
> 
> 赞同：1
> 
> 时间：2012-10-15T16:30:40.953
> 
> 标签：c++, qt, textfield, qml, blackberry-10

我试图弄清楚如何响应黑莓级联中文本字段的点击。现在，我有这样的代码：

```
TextField {
    onFocusedChanged: {
        if (focused) {
            doStuff();
        }
    }
} 
```

但这会在您单击某个项目时做出响应，但不会等到您在模拟器中松开鼠标（或在真正的黑莓中等效）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:03:43.127

试试这个代码，这在模拟器中对我有用。我没有黑莓设备来检查这个。

```
TextField {
    id: field
    width: parent.width

    MouseArea {
        anchors.fill: parent
        onClicked:{ console.debug("Got click event received! \nSetting focus for TextField");  field.focus = true; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:55:53.240

试试这个

```
onTouch: {
  if (event.isUp()) {
    //do stuff here
  }
} 
```

# java - 在 Java 中，如何更有效地附加字符串？

> ID：12899953
> 
> 赞同：47
> 
> 时间：2012-10-15T16:30:45.320
> 
> 标签：java, arrays, string

我写了一个Java程序，我需要在其中附加一个字符串

`" u13a2"`到现有的`"u1234 u12de u1386 ... u15a3"`。

所以渐渐地，绳子变得越来越长。我发现每次追加所花费的时间也变得越来越长。有什么方法可以在一定程度上改善这一点吗？

我想到的实现包括：

```
unicodeArray += " "+unicode; 
```

或者

```
unicodeArray = unicodeArray.concat(" "+unicode); 
```

他们给出了类似的表现。我认为造成这些不良表现的主要原因是特殊类型`String`。它为每个分配创建一个新对象。如果你也这么认为，这是否意味着我最好使用另一种类型，比如字节数组？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-10-15T16:33:02.773

您应该使用[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)类。

```
StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("Some text");
stringBuilder.append("Some text");
stringBuilder.append("Some text");

String finalString = stringBuilder.toString(); 
```

此外，请访问：

*   [“Java 如何使用 StringBuilder 优化代码？”](https://stackoverflow.com/questions/4645020/when-to-use-stringbuilder-in-java)
*   [“Java 中 toString() 中的 StringBuilder 与字符串连接”](https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-15T16:31:48.943

使用[`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)类。它在您尝试做的事情上更有效率。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-15T16:32:03.717

您可以为此使用`StringBuffer`或。`StringBuilder`两者都用于动态字符串操作。`StringBuffer`是线程安全的，而 as`StringBuilder`不是。

`StringBuffer`在多线程环境中使用。但是如果它是单线程`StringBuilder`的，推荐它，它比`StringBuffer`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T16:34:07.053

**-**每次您附加或对其进行任何修改时，它都会创建一个新`String`对象。

**-**所以使用`append()`方法`StringBuilder`（如果线程安全**不重要**），否则使用`StringBuffer`（如果线程安全**很**重要。），这将是有效的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T16:32:46.923

java.lang.StringBuilder。使用 int 构造函数创建初始大小。

# java - GWT 设计器组件

> ID：12899954
> 
> 赞同：3
> 
> 时间：2012-10-15T16:30:50.997
> 
> 标签：java, gwt, gwt-designer

我是 GWT 的新手，正在使用*GWT Designer*来帮助我适应它。到目前为止，我已经能够获得一些简单的示例并在本地运行，但是在尝试弄清楚如何自己做一些事情并且无法在 GWT 文档中找到它们的答案之后，我有一些关于 Designer 及其用法的问题：

1.  如何创建 HTML 表格或**TableLayout**？尽管文档显示了 a 的存在`TableLayout`，但我在 Designer 调色板中看不到它（即使在**Cell Widgets**部分下也是如此）。基本上，我希望能够以表格方式组织我的小部件，但不知道该怎么做。
2.  什么时候应该使用（考虑到“GWT 最佳实践”和 GWT 团队认可/鼓励的其他程序）`SafeHTML`，为什么？设计师是如何推广的？我在设计器面板中看不到任何“安全 HTML”小部件。
3.  为了创建任何性质的有趣 UI，我发现自己嵌套了面板、面板内部、更多面板内部（就像你在 Swing 中所做的那样）。这是在 GWT 中做事的正常方式，还是我让事情变得比我需要的更复杂？
4.  我开始了解如何使用 GWT Designer 来设计单个面板或页面的“部分”，但是您如何/在哪里实际设计整个页面的布局/配置？例如，一个页面可能有 5 个不同`HorizontalPanel`的 major ，每个都包含其他面板和小部件的错综复杂的嵌套。您如何布局每个主要面板以生成完整的页面？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:37:11.607

1.  该`Cell`库旨在从头开始扩展，所以是的，您需要自己编写此功能。
2.  GWT Designer 旨在成为 GWT 新手的工具，缺少一些更复杂的功能（例如 Safe* API）。正如@Jason Tholtstrup 所指出的，该框架用于帮助防止 XSS 和 XSRF 攻击。
3.  是的，就像 Swing：面板内的面板内的面板。就像《盗梦空间》。
4.  您将页面组织成不同的*显示区域*，您可以通过 CSS 规则进行布局（参见`CssResource`和`ClientBundle`）。每个显示区域实际上是一个`AcceptsOneWidget`实现，您可以将其传递给您用来控制应用程序视图部分的任何机制（通常是一个`Presenter`或一个实现）。`Activity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:40:59.530

2) 安全的 html 将帮助保护您免受跨站点脚本攻击。基本上它会转义数据（可能来自用户），因此无法从您的应用程序变量中注入恶意 html。

3）是的，它几乎是如何工作的。

希望有帮助

# django - Django Lib 创建 Facebook Canvas 应用程序

> ID：12899956
> 
> 赞同：2
> 
> 时间：2012-10-15T16:31:03.020
> 
> 标签：django, facebook, facebook-graph-api, django-facebook, fandjango

我发现至少三个库可用于在 Django 上创建 Facebook Canvas 应用程序：

1.  PythonForFacebook - [https://github.com/pythonforfacebook/django-facebook](https://github.com/pythonforfacebook/django-facebook)
2.  Fandjango - [https://github.com/jgorset/fandjango](https://github.com/jgorset/fandjango)
3.  Facebook 的 Django (fashiolista.com) - [https://github.com/tschellenbach/Django-facebook](https://github.com/tschellenbach/Django-facebook)

您更喜欢其中哪一个来完成这项任务？也许还有其他一些更强大的库？我有点困惑该选择哪一个。

# list - 列表操作

> ID：12899958
> 
> 赞同：0
> 
> 时间：2012-10-15T16:31:05.850
> 
> 标签：list, lisp

我是一个 lisp 新手，我正在尝试在 lisp 中操作列表。这是来自大学的实用教程。当我调用该函数时，列表中的第一个元素需要增加一个，其余的保持原样。这是一个例子：

```
(inc-1st '(1 2 3 4))  =>  (2 2 3 4) 
```

我试图解决它，但列表中的第一个数字没有打印出来。这是我的代码：

```
(defun inc-1st (list)
    (and (+ 1(car list)) (cdr list))) 
```

输出是：`(2 3 4)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:40:44.777

标准 CL 宏[INCF](http://www.lispworks.com/documentation/HyperSpec/Body/m_incf_.htm)会做你想做的事：

```
[1]> (defparameter list (list 1 2 3))
LIST
[2]> (incf (first list))
2
[3]> list
(2 2 3) 
```

（尝试`(macroexpand (incf (first list)))`看看它是如何工作的。）

因此，您的功能将类似于

```
(defun inc-1st (list)
  (incf (first list))
  list) 
```

注意打印值和返回值的区别：上面的函数**返回** `list`，而 REPL 打印返回值。

# javascript - 更新键和值 - json 对象

> ID：12899963
> 
> 赞同：0
> 
> 时间：2012-10-15T16:31:25.467
> 
> 标签：javascript, jquery, json

我有一个带有多个选择元素以及其他输入和选择元素的表单。在提交到服务器之前，我可以访问发布数据对象，并且我想在允许它到达服务器之前修改发布数据。

**如果在我的名为设备**的多项选择中未选择任何选项，则值为“ **null** ”，这是发布数据的样子。

```
({roomNumber:"As369", minCapacity:"1", maxCapacity:"10", capacity:"8", campus:"1", equipments:null, roomGrid_id:"127"}) 
```

如果设备为空，我想将键从“设备”更改为“设备 []”，将值从“空”更改为空数组。你看我的动作需要“设备[]”。理想情况下，如果在多选中至少有一个选定的项目，那么这里的 postdata 将是什么样子。

```
({roomNumber:"As369", minCapacity:"1", maxCapacity:"10", capacity:"8", campus:"1", equipments:["2"], roomGrid_id:"127"}) 
```

有任何想法吗 ？我正在考虑简单地添加一个名为设备的新**键：值**对**：[]**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:40:01.940

```
var obj = {
    roomNumber:"As369",
    minCapacity:"1", 
    maxCapacity:"10", 
    capacity:"8", 
    campus:"1", 
    equipments:null, 
    roomGrid_id:"127"
} 

 if(obj["equipments"] === null ) {
      delete obj["equipments"];
      obj["equipments[]"] = [] 
   } 
```

# maxscript - 从另一个 maxscript 调用 maxscript

> ID：12899966
> 
> 赞同：8
> 
> 时间：2012-10-15T16:31:36.333
> 
> 标签：maxscript

我正在尝试编写一个调用外部脚本但语法没有任何运气的函数

```
scripts_folder = "C:\\Program Files\\Autodesk\\3ds Max 2008\\Scripts"
var script1 = "hello_world.ms"

-- use function to call scripts
callScript(script1)

-- function callScript
function callScript script =
(
getFiles scripts_folder + "\\" + script
) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T09:06:58.867

最好在这里区分两种可能的解决方案：

1.  文件输入
2.  包括

fileIn 将执行与“运行脚本”相同的操作或在编辑器中评估所有内容。如果它是全局声明的（不优选，使用尽可能少的全局变量），它***可以使函数可用，如果它是在该脚本中本地声明的，则您无法访问它。***

Include 实际上从该文件中获取代码并在此时注入它。因此，如果您有一个大脚本并且您想更好地组织事物，您可以在单独的文件中编写某些函数并在脚本执行时包含该函数，以便该函数始终可以访问，因为它包含在该范围内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T16:34:02.290

弄清楚了！

```
--- "hello_world.ms"
enter function hello =
(
print "hello the world"
)

---- another _script.ms
fileIn "hello_world.ms"

-- use function to call scripts 
```

你好 （）

似乎 fileIn 比 include 效果更好

# iphone - 想要在 iPad 中存储大量数据

> ID：12899969
> 
> 赞同：0
> 
> 时间：2012-10-15T16:31:45.697
> 
> 标签：iphone, objective-c, ios, xcode

我正在开发通过 Web 服务接收大量数据（例如数组中的 30K 字典）的应用程序。我正在使用 JSON 工具包来解析大量数据。我每次都会收到 10k 块的数据。

那么，存储大量数据的 plist 文件或 SQLite 数据库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:02:50.733

我会使用 sqlite 数据库。这使您可以快速读取值，而无需将整个列表存储在内存中。添加和删​​除条目很容易。如果您的表具有正确的索引，查找将很快。

plist 需要整个列表都在内存中。如果每个条目只是一个单词，则 30k 条目将很容易放入内存中。但是，如果它是更多数据，或者您从不需要一次整个列表，那么您真的不希望所有这些都在内存中。

CoreData 对于一个列表来说可能是严重的矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:39:27.720

SQLite 是 iOS 编程中存储大量数据的最佳选择，因为当您使用任何其他方法进行存储时，它将需要运行时的内存以及检索所需数据的处理能力。使用 SQLite，您可以运行一个查询，该查询将轻松返回特定的数据。希望这会对你有所帮助。

# jquery - 防止 jQuery 更改事件无限递归

> ID：12899978
> 
> 赞同：1
> 
> 时间：2012-10-15T16:32:17.127
> 
> 标签：jquery, onchange, preventdefault

我在进行 Ajax 调用的复选框上有一个 jQuery 更改事件，然后突出显示该复选框所属的表行。当 Ajax 调用报告错误时，我遇到了问题 - 在这种情况下，我想反转复选框单击（我正在`that.prop("checked", !that.prop("checked"))`这样做）。但是，发生的事情是它进入了调用更改事件的无限循环。如您所见，为了阻止这种行为，我尝试设置一个名为 ajaxInProgress 的变量，但它似乎并没有像我希望的那样工作。任何人都可以提供替代方法或发现错误吗？我不确定我重置复选框的方式是否必要 - 是否可以重置复选框并仍然阻止更改事件启动？

```
var ajaxInProgress = false; //add this to stop recursive calls when errors occur 
jQuery(document).ready(function() {
  jQuery(".cc").change(function (e) {

    if (ajaxInProgress) return;

    var mode = "remove"
    if (jQuery(this).attr("checked")) {
       mode = "add"
    } 

    //grab the application ID from the checkbox ID
    var thisApp = this.id.substr(3);
    var that = jQuery(this);
    ajaxInProgress = true;
    jQuery.get("/particular/edit-ajax", { application_id: thisApp, 
                                          party_id: 1920, 
                                          party_rel_id: 21,
                                          mode: mode} , function(response) {
            if (response == 0) {
              that.closest('tr').removeClass('even').removeClass('odd').addClass('highlight');//highlight the tr
            } else {
              e.preventDefault();
              that.prop("checked", !that.prop("checked")); //reset the checkbox if there was an error
              alert("Please contact support - couldn't update database for application  "+thisApp+". Response was: "+response);
            }
    });       
    ajaxInProgress = false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:51:39.487

这一切似乎都非常复杂，而且我会这样做：

```
(function($) {
    $(function() {
        function sendAjax(e) {
            var data = {
                application_id: this.id.substr(3), 
                party_id: 1920, 
                party_rel_id: 21,
                mode: this.checked?'add':'remove',
            },
                that=this;

            $.ajax({
                type: 'GET',
                data: data
            }).done(function() {
                $(that).closest('tr').removeClass('even odd').addClass('highlight');
            }).fail(function(response) {
                e.preventDefault();
                that.checked = !that.checked;
                alert("Please contact support - couldn't update database for application  "+that.id.substr(3)+". Response was: "+response);
            }).always(function() {
                $(".cc").one('change', sendAjax);
            });
       }
       $(".cc").one('change', sendAjax);
    });
})(jQuery);
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:39:09.943

可能是因为你有`ajaxInProgress = false;`你`jQuery.get`。这会将它设置为`false`在您从 ajax 请求中获取任何内容之前。将该行移到回调内部：

```
jQuery.get("/particular/edit-ajax",
    {
        application_id: thisApp,
        party_id: 1920,
        party_rel_id: 21,
        mode: mode
    },
    function(response) {
        ajaxInProgress = false;

        if (response == 0) {
            that.closest('tr').removeClass('even').removeClass('odd').addClass('highlight');//highlight the tr
        } else {
          e.preventDefault();
          that.prop("checked", !that.prop("checked")); //reset the checkbox if there was an error
          alert("Please contact support - couldn't update database for application  "+thisApp+". Response was: "+response);
        }
    }
); 
```

小提琴：http: [//jsfiddle.net/gromer/BgNfR/](http://jsfiddle.net/gromer/BgNfR/)

我的 Fiddle`window.setTimeout`用于模拟 ajax 调用。我认为我的解决方案不起作用，但这是因为我最初使用`window.setInterval`它，所以*看起来*它被一遍又一遍地调用，它只是没有像我应该那样模拟 ajax 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:36:03.123

使用“处理中”变量为真：

```
var ajaxInProgress = false, handlingInProgress = false; //add this to stop recursive calls when errors occur
jQuery(document).ready(function() {
  jQuery(".cc").change(function (e) {
    if (handlingInProgress) return;
    if (ajaxInProgress) return;

    var mode = "remove"
    if (jQuery(this).attr("checked")) {
       mode = "add"
    } 

    //grab the application ID from the checkbox ID
    var thisApp = this.id.substr(3);
    var that = jQuery(this);
    ajaxInProgress = true;
    jQuery.get("/particular/edit-ajax", { application_id: thisApp, 
                                          party_id: 1920, 
                                          party_rel_id: 21,
                                          mode: mode} , function(response) {
            if (response == 0) {
              that.closest('tr').removeClass('even').removeClass('odd').addClass('highlight');//highlight the tr
            } else {
              e.preventDefault();
              that.prop("checked", !that.prop("checked")); //reset the checkbox if there was an error
              handlingInProgress = true; // Please see not below
              alert("Please contact support - couldn't update database for application  "+thisApp+". Response was: "+response);
            }
    });       
    ajaxInProgress = false;
    handlingInProgress = false; // 
  });
}); 
```

当您更改复选框时，事件会再次触发，但由于`handlingInProgress`设置为 true，它会立即脱离处理程序。

# php - 使用 Ajax 从 PHP+Zend 获取 JSON 数据不能仅在 IE 中工作

> ID：12899982
> 
> 赞同：1
> 
> 时间：2012-10-15T16:32:32.820
> 
> 标签：php, jquery, ajax, json, internet-explorer

尝试使用 Ajax 和仅在 Internet Explorer 上获取 JSON 数据时遇到问题。

我正在使用这个 jQuery 代码：

```
$.ajax({
    type: "GET",
    url: "./ajaxglobal/chargementcommandes", 
    cache: false,
    dataType: "json",
    contentType: "application/json",
    success: function(data) {
        alert("Success : "+data);
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert("Error : "+textStatus+" / "+errorThrown);
    }
}); 
```

“chargementcommandes”是一个 PHP/Zend 页面。

为测试而简化的“chargementcommandes”的 PHP 代码如下：

```
echo '[
        { "data" : "A node", "children" : [ { "data" : "Only child", "state" : "closed" } ], "state" : "open" },
        "Ajax node"
]'; 
```

在 Firefox 和 Chrome 中一切正常（我得到了预期的数据），但在 Internet Explorer 中（在 IE8 和 IE9 中测试），我从警报中得到“成功：未定义”。所以 Ajax 调用不会返回任何内容。我尝试了很多东西，但我没有成功摆脱这个问题。

任何帮助将不胜感激。提前致谢 ！

编辑：在 jQuery 代码中添加了类型、缓存和内容类型。仍然是“成功：未定义”响应...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:47:37.700

正如raina77ow 所建议的那样，对于json 响应，确保标头是正确的。

json 的正确标头是“application/json”，此标头设置如下：

`header('Content-type: application/json');`

# jquery - 将 RecordID 传递给 Jquery UI 对话框

> ID：12899988
> 
> 赞同：1
> 
> 时间：2012-10-15T16:33:02.313
> 
> 标签：jquery, asp.net

我的 DetailsView 上方有一个按钮。当我单击它时，它将弹出一个“插入注释”对话框（iframe 中的另一个页面），此对话框使用 Jquery。我不知道如何在对话框弹出窗口中将记录 ID 传递给这个插入页面。

jQuery代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script> 
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.ui/1.8.6/jquery-ui.min.js"></script> 
<link type="text/css" rel="Stylesheet" href="http://ajax.microsoft.com/ajax/jquery.ui/1.8.6/themes/smoothness/jquery-ui.css"> 
<script type="text/javascript">
    $(document).ready(function () {
        $('#AddNewProposal').live('click', function (e) {
            e.preventDefault();
            var page = $(this).attr("href")
            //var page = "ProposalCreateNew.aspx"
            var pagetitle = $(this).attr("title")
            alert(page);
            var $dialog = $('<div></div>')
            .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"  frameBorder="0"  align="middle"> ></iframe>')
            .dialog({
                autoOpen: false,
                modal: true,
                height: 650,
                width: 900,
                title: pagetitle
            });
            $dialog.dialog('open');
        });
    });
</script> 
```

我已经尝试过了，但它给出了错误“服务器标签不能包含 <% ... %>”

```
<table width="80%" align="center" >
    <tr>
        <td width="20%"></td>
        <td width="80%" class="PageTitle"></td>
        <td width="20%">
            <asp:Button runat="server" CommandName="AddNewProposal" ID="AddNewProposal" Text="Create New" href="ProposalCreateNote.aspx" title="Create Note" class="button3"/>              
        </td>
    </tr>
</table
--- Below is my DetailsView which has a label to display the ProposalID, so I want to grab this ID and pass it to the dialog box (URL + ID) when I click the AddNewProposal button.
<asp:TemplateField HeaderText="ProposedID" SortExpression="Name" > 
     <ItemTemplate >
          <asp:Label ID="ProposalID" runat="Server" 
          style="text-align:left;" Text='<%# Eval("ProposedID")%>' />
     </ItemTemplate>
</asp:TemplateField> 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:00:56.130

`Label`服务器控件正在客户端生成一个元素，`span`因此您应该能够像这样获取它的文本：

```
<script type="text/javascript">
$(document).ready(function () { 
    $('#<%= AddNewProposal.ClientID %>').live('click', function(e) {
        e.preventDefault();
        var page = '<%= ResolveClientUrl("~/ProposalCreateNew.aspx")%>' + '?ProposalID=' + encodeURIComponent($('span[id$="ProposalID"]').text());
        var pagetitle = $(this).attr("title");
        alert(page);
        var $dialog = $('<div></div>')
        .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"  frameBorder="0"  align="middle"> ></iframe>')
        .dialog({
            autoOpen: false,
            modal: true,
            height: 650,
            width: 900,
            title: pagetitle
        });
        $dialog.dialog('open');
    });
});
</script> 
```

请注意以下用途：

*   `ClientID`- 为确保您以正确的元素为目标，客户端的 ASP.NET WebForms id 可能不同（除非您在 ASP.NET 4.0中使用[ClientIDMode.Static ）](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)
*   `ResolveClientUrl`- 确保客户端的 URL 正确（除非您确定 URL 是什么）

您还应该知道`.live()`从 jQuery 1.7 开始不推荐使用它，您应该使用[`.on()`](http://api.jquery.com/on/).

# asp.net - IE 和 Active Directory 身份验证

> ID：12899992
> 
> 赞同：1
> 
> 时间：2012-10-15T16:33:15.397
> 
> 标签：asp.net, internet-explorer, networking, active-directory, iis-7.5

我已经建立了一个使用 AD 来确定权限的 Intranet 站点。与 IE 配合得很好。

有时用户会访问该站点并被要求提供凭据，即使他们使用的是 IE。我猜 IE 没有发送站点需要的 AD 信息，可能是因为安全设置。

我正在使用设置了 Windows 身份验证的 Windows Server 2008 R2 和 IIS 7.5。

在代码中，当页面被加载时，它会询问 NT 用户名：

```
 Dim ss As SoftwareStorage = New SoftwareStorage()
    Dim username As String
    username = ss.returnUserName()
    ...
    <input type="hidden" id="domainName" value="<% Response.Write(username)%>" />
    ...
    Dim ftpUser As System.Security.Principal.IPrincipal
    Public Function returnUserName() As String
       ftpUser = System.Web.HttpContext.Current.User
       Return (ftpUser.Identity.Name)
    End Function 
```

我查看了良好（工作）和坏（不工作）http 连接的 Wireshark 提要。好的有两个初始http调用的以下信息：

```
 GET /foo/index.aspx HTTP/1.1 , NTLMSSP_NEGOTIATE
    GET /foo/index.aspx HTTP/W.W , NTLMSSP_AUTH, User: MYDOMAIN\foobar 
```

坏的在相同的两个初始调用中具有以下内容：

```
 GET / HTTP/1.1
    GET / HTTP/1.1 
```

因此，看起来 IE 在一个实例（IE 9、Vista）中没有发送正确的请求标头信息，而在另一个实例（IE 9、Win7）中发送了正确的标头信息。

我希望有人能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:00:30.733

出于安全（安全）原因，IE 不会向服务器发送凭据，除非确定它可以信任服务器。对于自动发送域凭据尤其如此。因此，为了确保 IE 对您的服务器具有最大的信任，您可以进入（浏览器菜单）工具、Internet 选项、安全性，并将您的服务器的名称明确设置为“Intranet”区域。Intranet 区域的信任级别比普通的“受信任”服务器高得多。安全免责声明：除非您确实信任它，否则不要将服务器明确标识为 Intranet 服务器。

有关更多信息，请阅读 IE 安全区域。

此外，在 IIS（身份验证）中，确保启用“Windows 身份验证”（禁用匿名）并（选择“Windows 身份验证”，单击“提供程序”（右））确保 NTLM 位于列表顶部。

# ios - 垂直 UIToolbar（类似于 BOA 和 Mint）

> ID：12899994
> 
> 赞同：1
> 
> 时间：2012-10-15T16:33:24.513
> 
> 标签：ios, ipad, toolbar, vertical-alignment, uitoolbar

我正在开发需要与“美国银行”和“薄荷”应用程序类似的垂直工具栏的应用程序。

有人可以指导我如何实现这一目标吗？

# c# - 如何将 int 格式化为带有前导零和逗号的字符串

> ID：12899995
> 
> 赞同：4
> 
> 时间：2012-10-15T16:33:28.093
> 
> 标签：c#, string

我需要将 int 转换为长度始终为 9 位 + 2 个逗号的字符串。

1 将变为 000,000,001

12345 将变为 000,012,345

等等

我知道我可以使用 ToString().PadLeft(...) 添加前导零，但不知道如何在不使用一些 if 测试的情况下添加逗号。有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T16:36:39.270

只需使用：

```
int myint = 12345;
string formatted = myint.ToString("000,000,000"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T16:38:03.950

```
int number = 12345;
String result = String.Format("{0:000,000,000}", number); 
```

[资源](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T16:38:43.447

您可以使用自定义字符串格式，这很简单，但可能*不如*手动格式特定代码那么有效：

```
string text = value.ToString("000,000,000", CultureInfo.InvariantCulture); 
```

注意使用`CultureInfo.InvariantCulture`以避免使用当前线程的文化的分组字符（和数字）。

手卷的一种选择：

```
static string ToDigitsAndCommas(int value)
{
    char[] chars = new char[11];
    chars[3] = ',';
    chars[7] = ',';
    int remainder;
    for (int i = 0; i < 9; i++)
    {
        value = Math.DivRem(value, 10, out remainder);
        chars[10 - i - (i / 3)] = (char) (remainder + '0');
    }
    return new string(chars);
} 
```

我建议对此进行基准测试以了解您是否*真的*需要它而不是更简单的代码:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T16:37:00.243

只需在中使用格式说明符`ToString()`：

```
var stringified = yourNumber.ToString("000,000,000"); 
```

你会得到它回来零填充 w 逗号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T16:34:59.653

使用 ToString() 并将结果格式指定为参数。

有关更多信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

# javascript - 不滚动超出页面顶部的表格标题？

> ID：12899997
> 
> 赞同：3
> 
> 时间：2012-10-15T16:33:38.630
> 
> 标签：javascript, jquery, html-table

我在页面上有一个长表（在标题部分之后）。当用户向下滚动时，我想将表头保持在页面顶部（即向上滚动到顶部并留在那里）。

我找到了一些可以执行此操作的脚本，但是到目前为止，我还没有找到可以在 IE7 中运行的脚本。

[https://github.com/jmosbech/StickyTableHeaders/](https://github.com/jmosbech/StickyTableHeaders/)

[http://jsfiddle.net/trepmal/e7GN8/](http://jsfiddle.net/trepmal/e7GN8/)

[http://css-tricks.com/examples/PersistantHeaders/](http://css-tricks.com/examples/PersistantHeaders/)

有人找到解决方案吗？我不想给表格本身一个固定的高度，然后给表格一个滚动条 - 仍然应该使用整个页面滚动条。

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:40:14.820

例如，使用两个表/div 来固定两者的顶部位置

第一个 div 高度说 50px，然后第一个 div 顶部 =0px，第二个 div 顶部 =50px 并为第二个 div 设置溢出滚动，以便第二个 div 出现滚动，第一个 div 保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:04:34.763

如果浏览器支持 jQuery，这个脚本就可以工作。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
    function stickyObject(position,top,stickyoffset) { //object
    this.position = position;
    this.top = top ;
    }
    //#tableheader represents your element's id
    $(document).ready(function(){ // stores original position details of element in an object
    tableheader = new stickyObject($("#tableheader").css("position"),$("#tableheader").css("top"));
    });

    function stickyMy(elem) {
    elemObj = (elem.data).replace("#","");
    if($(window).scrollTop()>offset.top-parseFloat(window[elemObj].stickyoffset)) {// checks if the user has scrolled past the top of the element we want to make sticky . 
    $(elem.data).addClass((elem.data).replace("#","") + "-sticky"); // if yes, then adds a class to the element elementid-sticky.
    $(elem.data).css("position","fixed");
    $(elem.data).css("top","0");
    }
    else {
    $(elem.data).removeClass((elem.data).replace("#","") + "-sticky");
    $(elem.data).css("position","");
    $(elem.data).css("position",window[elemObj].position);
    $(elem.data).css("top","");
    $(elem.data).css("top",window[elemObj].top);
    }
}
$(window).scroll("#tableheader",stickyMy).resize("#tableheader",stickyMy); 

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T01:39:19.663

这很简单，无需添加自定义脚本或 js

只需使用**CSS** ;)

让我们看看当前项目的一个例子，所以我有这个表头 2

```
<tr id="TableTitle">
        <th>302/365</th>
        <th id="secondH">Lundi 29 octobre </th>
    </tr> 
```

＆这是正在使用的CSS：

```
 #TableTitle {
position: fixed;
z-index: 2000;
padding: 4px;
background: #EFF0EB;
width: 100%;
text-align: center;
} 
```

全部由固定位置完成，当你滚动之后它是固定的，我只是添加一些样式效果:) 重要的是 z-index 必须是页面上最高的数字，就像没有元素会在它上面传递一样（比如 jquery选项卡或对话框...）

您**应该**知道您有**多少** *表格标题*并自定义宽度

```
#secondH {
width: 90%;
text-align: center;
} 
```

＆我让您自定义您希望它看起来非常简单的方式：）您看到了吗？

CSS电源

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T15:14:07.503

Well, there is [this plugin](http://www.farinspace.com/jquery-scrollable-table-plugin/) but it only makes a table body scrollable (the header and footer stay in place, but the table body gets a scrollbar and becomes scrollable if it goes beyond a given height), it doesn't make the header stick to the top of the page.

The way it works is the following : It saves the columns widths in a variable, then it extracts the header and footer from the table, puts them in a container before and after the table, then it puts the table itself in a container with the wanted max-height. This way if the table is bigger than the container's max-height, it becomes scrollable. Then it restores the column widths.

I think you can either adapt this plugin to fit your situation or create your own following this pattern.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T17:13:44.910

这可能会帮助您：

```
 var windw = this;

$.fn.followTo = function (pos) {
    var $this = this,
    $window = $(windw);

    $window.scroll(function (e) {

        if ($window.scrollTop() > 1665) {
            $this.css({
                position: 'relative',
                top: 1187
            });
        } else {
            if ($window.scrollTop() < pos) {
                $this.css({
                    position: 'relative'
                });
            } else {
                $this.css({
                    position: 'fixed',
                    top: 0
                });
            }
        }
    });
};

$('#page-header').followTo(460); 
```

该行：

```
if ($window.scrollTop() > 1665) 
```

当您继续向下滚动页面时，如果需要删除元素很有用，如果不需要，则可以将其删除。该功能的其余部分是检查滚动条在页面上的位置（以允许您的初始页眉），以便它知道何时“拾取”表头。提取的点在这里：

```
$('#page-header').followTo(460); 
```

此外，当用户向上滚动时，此功能还会将标题“放下”回原位。

编辑：为确保在拾取标题时您的内容不会“跳跃”，请确保将#page-header 元素包装在容器中（例如#page-header-container）并给它一个固定的高度和宽度。

我会向您指出我的来源，但不幸的是我似乎找不到它，这说明它非常直截了当。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T10:45:53.173

SlickGrid 是一个非常好的网格（表格）。 [http://mleibman.github.com/SlickGrid/examples/example12-fillbrowser.html](http://mleibman.github.com/SlickGrid/examples/example12-fillbrowser.html)

它符合你的期望吗？`