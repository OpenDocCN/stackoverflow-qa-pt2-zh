# StackOverflow 问答 15900000-15900999

# actionscript-3 - 在函数中获取加载的数据作为返回值

> ID：15900008
> 
> 赞同：0
> 
> 时间：2013-04-09T10:55:56.247
> 
> 标签：actionscript-3, loaddata

我仍然无法理解一些简单的事情在 AS3 中是如何变得更难的。在这里，我想在函数中加载位图，并在完成时返回其值以让应用程序继续。这样的东西很容易使用：

```
var imageLoader:Bitmap;

for (var i:int=0; i<n.length; i++) {
    imageLoader = loadFile(name[i]);
    trace(imageLoader); // [object Bitmap]
}

function loadFile(name:String):Bitmap {
   imgLoad:ImageLoader = new ImageLoader(url + name)
   imgLoad.addEventListener(LoaderEvent.COMPLETE, fileLoaded);
   imgLoad.load;

   function fileLoaded(ev:LoaderEvent) {
      return ev.target.content; // the file now loaded is a bitmap.
   }
} 
```

但它不起作用。返回值必须在 loadFile() 的末尾。我真的不明白我应该怎么做才能让我的代码优化和工作。第一次尝试时，我使用了类似“loopingLoad”的方法和“_Count:int”和“_CountEnd”来知道何时停止调用loadFile……嗯，它工作得很好，但它真的很难看。所以，我想知道如何用“For”简单地加载几个文件。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:26:26.247

你基本上想要同步加载。不，您不能直接执行此操作，您必须执行一种变通方法以将加载的位图提供给其他地方。不过，这将使您重新考虑整个应用程序逻辑，至少是您希望加载图像的部分。

为了使用 for 循环加载多个文件，您需要执行以下操作：首先，创建一个加载器数组，每个加载器都有一个附加的`Event.COMPLETE`侦听器。其次，当其中一个加载器完成时，应通知您的应用程序，提供索引或内容链接，或两者兼而有之。

```
var loaders:Array=new Array();
...
for (var i:int=0;i<urlArray.length;i++) {
    // urlArray is the array with links to bitmaps
    var l:Loader=new Loader();
    l.addEventListener(Event.COMPLETE,onComplete);
    l.load(new URLRequest(urlArray[i]));
    loaders.push(l); // store it, if you want
    // do other stuff, like preparing to accept an image
} // and that's all, you initiate and wait!
...
function onComplete(event:Event):void {
    var i:int=loaders.indexOf(event.target); // get the index
    event.target.removeEventListener(Event.COMPLETE,onComplete);
    if (i<0) return; // oops! 
    notifyApplication(event.target.content); // now you transfer a ready bitmap
    // add "i" if you need that index of your former "for" loop here
} 
```

# java - Java 多按钮点击

> ID：15900009
> 
> 赞同：0
> 
> 时间：2013-04-09T10:56:00.107
> 
> 标签：java, swing, jbutton, actionlistener

我在面板上有 5 个按钮，分别命名为“添加”、“编辑”、“删除”、“确定”、“取消”。现在，如果我立即单击取消按钮，表单将终止。我已经`dispose()`从点击事件中调用了该方法。

但是，我想要做的是：如果我先单击添加按钮，然后单击取消按钮，程序应该回到初始状态，尽管终止，因为`dispose()`.

我该怎么做 ？

这是我的添加按钮操作事件代码：

```
public class TheButtounHandler implements ActionListener
{
     @Override
     public void actionPerformed(ActionEvent ae) 
     {
         if(ae.getSource().equals(addButton))
         {
             enableDisabledByDefault();
             editButton.setEnabled(false);
             deleteButtoun.setEnabled(false);
             addButton.setEnabled(false);
             if(ae.getSource().equals(cancelButton))
             {
                 disabledByDefault();
             }
         }
         else if(ae.getSource().equals(cancelButton))
         {
             dispose();
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:01:07.720

您试图通过检查来处理与`cancel`按钮相同的`if`分支中的`add`按钮，`ActionEvent.getSource()`但此代码将永远不会执行，因为源不能同时是`addButton`两者`cancelButton`。

相反，您需要将`disabledByDefault()`调用移动到处理 的部分，并通过添加一个新变量（您在按下按钮时设置）或简单地检查按钮的状态来`cancelButton`区分之前是否`add`已按下：`add``add`

```
...
else if(ae.getSource().equals(cancelButton))
{
    if (!addButton.isEnabled()) {
        disabledByDefault();
    } else {
        dispose();
    }
} 
```

# javascript - 如何区分 Internet Explorer 10 / Windows Phone 8 中的点击和触摸事件

> ID：15900011
> 
> 赞同：3
> 
> 时间：2013-04-09T10:56:05.373
> 
> 标签：javascript, click, touch, touchstart

我正在开发一个带有悬停导航的项目。

由于支持触摸的设备的性质，它们并不真正支持悬停。对于 iOS 和 android，我设法禁用了所有悬停效果并通过“touchstart”事件模拟它们，该事件设置了正确的 css 属性。这就像一个魅力。如果是“touchstart”事件，则它是移动设备，否则可能是桌面。

不幸的是，Internet Explorer 实现了自己的事件，即“MSPointerDown”等。

我的问题是，两个 IE 版本（最新的移动版和桌面版）都会触发一个“click”事件，以及两个“MSPointerDown”事件，一个是 pointerType“touch”，一个是 pointerType“mouse”。我真的不知道如何找出动作是真正的触摸事件还是由鼠标引起的，因为两者都被触发了。我想避免基于媒体查询的解决方案，因为大型触摸屏越来越受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-28T11:25:04.583

我最近遇到了类似的问题。我最终使用 JavaScript 而不是 :hover 伪类添加了悬停状态，然后如果主菜单项没有*悬停*类，则绑定 touchstart 或单击事件以显示子菜单。

```
$(document).ready(function(){
    var $menuItem = $( '.menu__item' );

    $menuItem.on( 'mouseenter', function(){
        $(this).addClass( 'hover' );
    });

    $menuItem.on( 'mouseleave', function(){
        $(this).removeClass( 'hover' );
    });

   // For touch devices
   $menuItem.on( 'click', function(e) {
       if ( !$(this).hasClass( 'hover' ) ) {
           $(this).addClass('hover');
       }
   });    
}); 
```

检查我创建的这个快速代码笔。

[http://codepen.io/aspjg/pen/zKzEQV](http://codepen.io/aspjg/pen/zKzEQV)

# oracle9i - 如何在以下查询中使用 distinct

> ID：15900014
> 
> 赞同：-1
> 
> 时间：2013-04-09T10:56:32.633
> 
> 标签：oracle9i

# 代码

```
SELECT            T_LEAVEAPPLY.I_EMPID, T_LEAVETYPE_MS.I_LEAVETYPE, T_LEAVEALLOCATION_MS.I_ALLOTTEDDAYS AS OPENINGBALANCE, EXTRACT(DAY
FROM T_LEAVEAPPLY.I_REQDATE) AS Dates, T_APPROVAL.I_CATEGORYNAME, T_LEAVEAPPLY.NOD,
T_LEAVEALLOCATION_MS.I_LASTUPDATED, T_EMPLOYEE_MS.I_EMPNAME 
FROM              T_LEAVEAPPLY 
INNER JOIN        T_APPROVAL ON T_APPROVAL.I_EMPID = T_LEAVEAPPLY.I_EMPID AND T_APPROVAL.I_REQDATE = T_LEAVEAPPLY.I_REQDATE AND T_APPROVAL.I_APPROVALSTATUS = T_LEAVEAPPLY.I_STATUS 
INNER JOIN        T_LEAVEALLOCATION_MS ON T_LEAVEALLOCATION_MS.I_EMPID = T_APPROVAL.I_EMPID AND T_LEAVEALLOCATION_MS.I_EMPID = T_LEAVEAPPLY.I_EMPID AND T_LEAVEALLOCATION_MS.I_LEAVETYPEID = T_LEAVEAPPLY.I_LEAVETYPEID
INNER JOIN        T_LEAVETYPE_MS ON T_LEAVETYPE_MS.I_LEAVETYPEID = T_LEAVEAPPLY.I_LEAVETYPEID AND T_LEAVETYPE_MS.I_LEAVETYPEID = T_LEAVEALLOCATION_MS.I_LEAVETYPEID
INNER JOIN        T_EMPLOYEE_MS ON T_EMPLOYEE_MS.I_EMPID = T_LEAVEAPPLY.I_EMPID
WHERE            (T_LEAVEAPPLY.I_EMPID = '9') AND (EXTRACT(MONTH FROM  T_LEAVEALLOCATION_MS.I_LASTUPDATED) = '3') AND (EXTRACT(YEAR FROM  T_LEAVEALLOCATION_MS.I_LASTUPDATED) = '2012') AND (EXTRACT(MONTH FROM   T_APPROVAL.I_REQDATE) = '3') AND (EXTRACT(YEAR FROM T_APPROVAL.I_REQDATE) = '2012') AND (EXTRACT(YEAR FROM T_LEAVEALLOCATION_MS.I_LASTUPDATED) = '2012')
ORDER BY T_LEAVEAPPLY.I_REQDATE DESC 
```

# 输出

#

9 赚取休假 10 28 休假 2 2012 年 3 月 9 日

9 病假 8 19 病假 2 2012 年 3 月 9 日

9 临时休假 10 17 休假 1 2012 年 3 月 9 日

9 临时休假 10 2 休假 2 2012 年 3 月 9 日

#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:05:29.523

如果您没有将它包含在 SELECT DISTINCT 子句中，则不能 ORDER BY I_REQDATE。

# c# - 使用差异模式序列处理 CSV 的最佳方法是什么？

> ID：15900015
> 
> 赞同：0
> 
> 时间：2013-04-09T10:56:32.890
> 
> 标签：c#, parsing, csv

我正在编写一个程序，该程序用每行逗号分隔符解析 .txt 文件。代码在 C# 中。文件是 a `.txt`，db 是 mssql。

通常的顺序是

```
date_aired, 
time_aired_start, 
time_aired_end, 
duration_aired, 
movie_name but 
```

找出一些按此顺序显示的行

```
date_aired, 
time_aired_start, 
duration_aired, 
movie_name. 
```

这没问题，因为我可以通过添加 time_aired_start 和持续时间来获得 time_aired_end 但再次发现还有另一个像这样的序列

```
date_aired, 
time_aired_start, 
date_aired, 
time_aired_end, 
movie_name 
```

我的意思是有些行在第一个模式中写入，而有些行在第二个模式或第三个模式中，仅在 1 个 txt 文件中。我无法确定在解析每一列时必须使用哪些代码并按索引将其放入我的对象中，如下面的代码：

```
AirData aData= new AirData();
aData.dateAir = txtParse[0]
aData.timeStart = txtParse[1]
aData.timeEnd = txtParse[2]
aData.duration = txtParse[3] ...etc. 
```

所以我的问题是，处理这种情况的最佳方法是什么？文本文件已经由某些机器生成，我无法更正它。我的工作是解析它并将其存储在数据库中，以便为它生成报告。

我的想法是将它放在 try catch 中，每次抛出异常时，如果抛出另一个异常，它将尝试执行第二种模式或第三种模式。这样好吗？或任何建议？

**更新：**

一些实际数据。这里的列与我上面的示例不同，因为我只是将其简化。

模式 1：11 个字段

```
01/01/2013,
00:00:00;00,
00:00:54;19,
00:00:54:20,
01/01/2013,
00:00:00;00,
00:00:54;19,
00:00:54:20,
Seg 4 HAPPY NEW YEAR WISHES.mp4,
Aired,
5D189F06-886D-40B1-AC70-609C2CA5E774 
```

模式 2：9 个字段 - 这很容易被发现，因为我可以检查数组长度是否大于 11

```
01/28/2013,
21:38:23;11,
00:01:00:04,
01/28/2013,21:38:23;11,
00:01:00:04,
ADXEFRF2-0243.mov,
Aired,
9E74C08C-8E30-48A1-A743-44ACC93E183E 
```

但这是我遇到的问题：

模式 3 - 也有 11 个字段，但顺序不同。

```
01/28/2013,
21:39:23;15,
00:08:03:01,
01/28/2013,
21:39:23;15,
01/28/2013,
21:47:26;13,
00:08:03:01,
THE IMPOSTOR With Eng Subs Ep 11-5.mp4,
Aired,
895F4F16-5624-4A2C-A5E0-D3BF1BA57B86 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:25:23.847

您可以在解析文件时使用一些正则表达式并测试每个字段。

案例 2 很容易被发现，因为它只有 4 列，而不是 5 列。案例 1 和 3 在不知道`time_aired_end`&格式的情况下很难区分`duration_aired`（例如，01:30 是 1 小时 30 分钟、1 分钟 30 秒、30 分钟凌晨 1 点过去，或下午 1 点过去 30 分钟）

# java - 如何将字符串转换为数字

> ID：15900017
> 
> 赞同：-8
> 
> 时间：2013-04-09T10:56:43.140
> 
> 标签：java

我有一个代码：

```
String sum = mDBHelper.SumIn(tglawal, tglakhir);
jmlh.setText("Amount of your income : Rp " + sum); 
```

这输出：

```
200000 
```

现在我想将值与 format `200.000`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:14:52.497

Try something like this:

```
int i = 1412214;
String s = NumberFormat.getIntegerInstance().format(i); 
```

An another easy example:

```
System.out.println(NumberFormat.getNumberInstance(Locale.US).format(1412214)); 
```

Output: `1,412,214`

PS: RP = Riot Points?? :O

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:59:34.623

您可以使用**String.format**来实现这一点。

对于格式规范，您可以查看 [http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:10:20.383

试试这个代码：

```
NumberFormat format = NumberFormat.getInstance();
double doubleValue;

try
{
    Number inValue = format.parse("200.000");
    doubleValue = inValue.doubleValue();
} catch (ParseException e)
{
    doubleValue = 0.0;
} 
```

您可以解析 int, long ... 在这一行中更改方法

```
doubleValue = inValue.doubleValue(); 
```

例如：

```
int number = inValue.intValue(); 
```

我希望，这对你有帮助。

# perl - 读取文本文件并将信息保存到 perl 中的数组和数组中

> ID：15900022
> 
> 赞同：0
> 
> 时间：2013-04-09T10:57:00.867
> 
> 标签：perl, perl-data-structures

我有一个包含以下代码的文本文件。我想创建 perl 代码来读取该包含并在 perl 中形成相应的数据结构。我可以用下面的 perl 代码读取**.txt**文件，但是如何在 perl 数据结构中读取和保存所有这些`Arrays of arrays/Hashes of arrays/Arrays of hashes/Hashes of hashes`，有人可以帮助我吗？

```
{
   "Availability" : {
      "142" : {
         "141" : "1.042",
         "161" : "0.000",
         "162" : "0.000"
      }
   },
   "Average Jitter to Destination" : {
      "142" : {
         "141" : "192.309",
         "161" : "13.323",
         "162" : "37.003"
      }
   },
   "Average Jitter to Source" : {
      "142" : {
         "141" : "192.309",
         "161" : "13.323",
         "162" : "37.003"
      }
   },
   "Average Round Trip Time" : {
      "142" : {
         "141" : "8557.511",
         "161" : "772.278",
         "162" : "389.566"
      }
   },
   "Packet Loss to Destination" : {
      "142" : {
         "141" : "0.000",
         "161" : "0.000",
         "162" : "0.000"
      }
   },
   "Packet Loss to Source" : {
      "142" : {
         "141" : "0.000",
         "161" : "0.000",
         "162" : "0.000"
      }
   } 
```

对于上面我写的代码：

```
print "content-type: text/html \n\n"; #HTTP HEADER
$dirname = "/ravikiran/html/JSONData.txt";
$dirpath = "$ENV{DOCUMENT_ROOT}$dirname";
sysopen(HANDLE, $dirpath , O_RDWR);
my %data;`enter code here`
while($line = <HANDLE>) {
chomp $line;
print $line;
}
close (HANDLE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:01:41.253

输入看起来像 JSON。使用适当的模块：

```
use JSON;
my $s = from_json(join q(), <>); 
```

# mysql - MYSQL 按属性过滤产品

> ID：15900023
> 
> 赞同：0
> 
> 时间：2013-04-09T10:57:08.780
> 
> 标签：mysql, attributes, product

如何选择具有用户指定的所有属性的产品

例如：用户指定属性来搜索产品：41,2,4,6

MYSQL结构为：

表：报价

```
`id` int(11) NOT NULL auto_increment,

`title_pl` varchar(100) character set utf8 collate utf8_polish_ci NOT NULL, 
```

表：offer_att

```
`id` int(11) NOT NULL auto_increment,
`offer_id` int(11) NOT NULL,
`att_id` int(11) NOT NULL, 
```

表属性

```
`id` int(11) NOT NULL auto_increment,

`title_pl` varchar(255) character set utf8 collate utf8_polish_ci NOT NULL, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:17:35.603

这是你需要的吗？

```
SELECT *
FROM offer
WHERE id IN
    (SELECT offer_id
     FROM offer_att oa,
          att a
     WHERE a.title_pl IN (41,
                          2,
                          4,
                          6)
       AND a.id = oa.att_id); 
```

PS[这](http://sqlfiddle.com/#!2/de3cc/6)是一个小提琴样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:20:46.873

如果您只想获取同时具有所有 4 个属性（41、2、4、6）的商品，那么您应该使用下一个查询

```
SELECT
    o.id
    o.title_pl
FROM
    offer o INNER JOIN offer_att oa ON o.id = oa.offer_id AND oa.att_id IN (41,2,4,6)   
GROUP BY o.id
HAVING COUNT(DISTINCT oa.att_id) = 4 
```

如果您想获取至少具有一种属性（41 或 2 或 4 或 6）的报价，请使用以下属性：

```
SELECT
    o.id
    o.title_pl
FROM
    offer o INNER JOIN offer_att oa ON o.id = oa.offer_id AND oa.att_id IN (41,2,4,6) 
```

为您的 SQL 查询生成参数的 PHP 代码：

```
<?php
$attributes = array(41, 2, 4, 6);
$count = count($attributes);
$list = implode(',', $attributes);
$query = '
    SELECT
        o.id
        o.title_pl
    FROM
        offer o INNER JOIN offer_att oa ON o.id = oa.offer_id AND oa.att_id IN (' . $list . ')  
';
$db->query($query);
?> 
```

# objective-c - 编译器和运行时系统在我生成的程序集中真正做了什么？

> ID：15900029
> 
> 赞同：7
> 
> 时间：2013-04-09T10:57:17.980
> 
> 标签：objective-c, compiler-construction, runtime

我想了解生成的程序集和运行时如何协同工作，并且在逐步执行一些生成的程序集代码时遇到了一个问题。

**源示例**

这是在 XCode 4.5 中运行的三行 Objective-C：

```
// Line 1:
NSObject *obj1 = [[NSObject alloc] init];

// Line 2:
[obj1 release];

// Line 3:
NSObject *obj2; 
```

**比较生成的程序集**

逐步浏览生成的程序集，我做了一些观察。

第1行之前的地址`obj1`如图：

```
obj1    (NSObject*) 0x00003604 
```

在第 1 行之后，它发生了变化：

```
obj1    NSObject *  0x08122110 
```

**观察**

1）地址`obj1`变了。编译源代码时，编译器会为`obj1`. 然后，（在第 1 行之后）编译器显然会重新分配，因此对象的地址会发生变化。

2）在第2行之后，地址`obj2`还是一样的（`0x08122110`）！当我调用 时`[obj1 release]`，我是在告诉编译器：“我不再需要这个了。请把它拿走。” 但是系统实际上会在将来的某个时候发布，我似乎无法直接控制它。

3）调试器不能越过第3行。我不明白为什么它不会！

**问题**

在创建和销毁对象方面，编译器实际上对这些代码行做了什么（特别是“alloc-init”、释放和没有赋值的 NSObject 指针声明）？另外，为什么调试器不让我跨过第三行？调试器看不到吗？

除了答案，如果您能推荐一些关于编译器和运行时系统真正做什么的文档或书籍，我将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T11:08:38.243

1.  调用的指针`obj1`是在堆栈上创建的。它未初始化，这意味着它将包含该内存位置中的任何内容。这是一个固定的错误来源，因为使用未初始化的指针会导致未指定的行为。一旦分配了对象，指针就会用它的地址初始化。

2.  地址不会改变，因为指针没有更新。当`-release`消息被发送到对象时，保留计数器通常减一。如果保留计数器已经为 1，`-dealloc`则调用该方法并将内存标记为空闲。只有指针指向的内存被标记为空闲，但指针保持不变。这就是为什么有些人更喜欢将指针设置为`nil`一旦他们不再需要它们。

3.  您正在创建一个未初始化的指针。由于它没有被初始化，它将重用已经在存储指针的内存位置的数据。

关于书籍推荐。我会推荐*编译器：原理、技术和工具*。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-09T15:55:16.270

Marcus 的回答非常好，但这里有更多细节（我一直想复习阅读生成的程序集；必须实际尝试解释它是最好的方法）。

```
NSObject *obj1 = [[NSObject alloc] init]; // Line 1 
```

编译器将两个函数调用编译为`objc_msgSend()`. 第一个调用类`+alloc`上的方法`NSObject`。该函数调用的结果成为调用该方法的第二个函数调用的第一个参数（目标对象）`-init`。

然后，调用的结果`init`将存储在堆栈中您已声明为已命名的内存块中，该内存块具有*指向 NSObject 实例的指针*`obj1`类型。

 *您可以在调试器中单步执行这一行，*因为该行上有一个已执行的表达式*。如果代码写成：

```
NSObject *obj1; // declaration
obj1 = [[NSObject alloc] init]; 
```

然后你会发现你不能单步执行声明。

在ARC** 下的`obj1 = [[NSObject alloc] init];, the value of`obj1 `is *undefined* under Manual Retain Release, but **will be automatically set to`nil`(0) 之前（从而消除了 Marcus 指出的错误来源）。

```
[obj1 release]; // Line 2 
```

这一行调用*NSObject 指向的实例*上的`release`方法。*`obj1`*

 *```
NSObject *obj2; // Line 3 
```

这条线实际上什么也没做。如果打开编译器的优化器，则根本不会生成任何代码。如果没有优化器，编译器*可能会*碰撞堆栈指针`sizeof(NSObject*)`以在堆栈上保留名称为 的空间`obj2`。

而且，您不能在调试器中单步执行它，因为在该行上没有要执行的表达式。

* * *

值得注意的是，您可以将代码重写为：

```
[[[NSObject alloc] init] release]; 
```

就执行而言，这实际上与您编写的原始代码相同。如果没有优化器，它会有点不同，因为它不会在堆栈上存储任何东西。使用优化器，它可能会生成与原始代码相同的代码。优化器非常擅长在不需要时消除局部变量（这也是调试优化代码如此困难的部分原因）。

* * *

鉴于这种：

```
(11) void f()
(12) {
(13)    NSObject *obj1 = [[NSObject alloc] init]; // Line 1
(14)    
(15)    [obj1 release]; // Line 2
(16)    
(17)    NSObject *obj2; // Line 3
(18)} 
```

这是未优化的 x86_64 程序集。忽略“修复”的东西。看`callq`线条；它们是对 objc_msgSend() 的实际调用，如上所述。在 x86_64 上，%rdi——一个寄存器——是所有函数调用的参数 0。因此， %rdi 是方法调用的目标所在。%rax 是用于返回值的寄存器。

所以，当你看到一个 callq ，然后是`movq %rax, %rdi`，然后是另一个 callq 时，它表示“获取第一个的返回值`callq`并将其作为第一个参数传递给下一个`callq`。

至于你的变量，你会`movq %rax, -8(%rbp)`在`callq`. 这表示“获取由 . 返回的任何内容`callq`，将其写入堆栈上的当前位置，然后将堆栈指针向下移动 8 个位置（堆栈向下增长）”。不幸的是，程序集没有显示变量名。

```
_f:                                     ## @f
    .cfi_startproc
Lfunc_begin0:
    .loc    1 12 0                  ## /tmp/asdfafsd/asdfafsd/main.m:12:0
## BB#0:
    pushq   %rbp
Ltmp2:
    .cfi_def_cfa_offset 16
Ltmp3:
    .cfi_offset %rbp, -16
    movq    %rsp, %rbp
Ltmp4:
    .cfi_def_cfa_register %rbp
    subq    $32, %rsp
    leaq    l_objc_msgSend_fixup_release(%rip), %rax
    leaq    l_objc_msgSend_fixup_alloc(%rip), %rcx
    .loc    1 13 0 prologue_end     ## /tmp/asdfafsd/asdfafsd/main.m:13:0
Ltmp5:
    movq    L_OBJC_CLASSLIST_REFERENCES_$_(%rip), %rdx
    movq    %rdx, %rdi
    movq    %rcx, %rsi
    movq    %rax, -24(%rbp)         ## 8-byte Spill
    callq   *l_objc_msgSend_fixup_alloc(%rip)
    movq    L_OBJC_SELECTOR_REFERENCES_(%rip), %rsi
    movq    %rax, %rdi
    callq   _objc_msgSend
    movq    %rax, -8(%rbp)
    .loc    1 15 0                  ## /tmp/asdfafsd/asdfafsd/main.m:15:0
    movq    -8(%rbp), %rax
    movq    %rax, %rdi
    movq    -24(%rbp), %rsi         ## 8-byte Reload
    callq   *l_objc_msgSend_fixup_release(%rip)
    .loc    1 18 0                  ## /tmp/asdfafsd/asdfafsd/main.m:18:0
    addq    $32, %rsp
    popq    %rbp
    ret
Ltmp6:
Lfunc_end0: 
```

* * *

对于傻笑，看看打开优化器生成的程序集（-Os - 最快，最小，部署代码的默认值）：

首先要注意的——这又回到问题（3）——是**在第一个和最后一个指令之外****没有任何操作。`%rbp`** 也就是说，没有任何东西被推入或拉出堆栈；从字面上看，没有证据表明`obj1`并且`obj2`曾经被声明过，因为编译器不需要它们来生成等效代码。

一切都是通过寄存器完成的，你会注意到有两个`move %rax, %rdi`. 第一个是“获取 the 的结果`+alloc`并将其用作调用的第一个参数`-init`”，第二个是“获取 the 的结果`-init`并将其用作`-release`.

在旁边; `%rsi`是函数调用的第二个参数在 x86_64 上的位置。对于方法调用——对于`objc_msgSend()`函数调用——该参数将始终包含要调用的方法（选择器）的名称。

```
Lfunc_begin0:
    .loc    1 12 0                  ## /tmp/asdfafsd/asdfafsd/main.m:12:0
## BB#0:
    pushq   %rbp
Ltmp2:
    .cfi_def_cfa_offset 16
Ltmp3:
    .cfi_offset %rbp, -16
    movq    %rsp, %rbp
Ltmp4:
    .cfi_def_cfa_register %rbp
    .loc    1 13 0 prologue_end     ## /tmp/asdfafsd/asdfafsd/main.m:13:0
Ltmp5:
    movq    L_OBJC_CLASSLIST_REFERENCES_$_(%rip), %rdi
    leaq    l_objc_msgSend_fixup_alloc(%rip), %rsi
    callq   *l_objc_msgSend_fixup_alloc(%rip)
    movq    L_OBJC_SELECTOR_REFERENCES_(%rip), %rsi
    movq    %rax, %rdi
    callq   *_objc_msgSend@GOTPCREL(%rip)
    .loc    1 15 0                  ## /tmp/asdfafsd/asdfafsd/main.m:15:0
    leaq    l_objc_msgSend_fixup_release(%rip), %rsi
    movq    l_objc_msgSend_fixup_release(%rip), %rcx
    movq    %rax, %rdi
    popq    %rbp
    jmpq    *%rcx  # TAILCALL
Ltmp6:
Lfunc_end0: 
```

* * *

如果你想了解更多关于方法分派的知识，我写了[一点指南](http://www.friday.com/bbum/2009/12/18/objc_msgsend-part-1-the-road-map/)。这是 objc_msgSend() 的几个版本过时，但仍然相关。

请注意，ARM 代码在哲学上以相同的方式工作，但生成的程序集会有点不同，而且会更多。

* * *

> 我还是不明白为什么我不能跨过第3行^^

如果您查看生成的程序集，则不会为变量声明生成任何内容。至少不是直接的。最接近的是`movq %rax, -8(%rbp)` 移动`init`into 的结果，但那是*在两个函数调用之后*。

对于`NSObject *obj2;`，编译器不会生成任何代码。即使禁用优化器也不行。

那是因为变量声明不是表达式；除了为您（开发人员）提供一个用于保存值的标签之外，它实际上并没有做任何事情。只有当您实际使用该变量时才会生成代码。

因此，当您进入调试器时，它会跳过该行，因为无事可做。**

# sql - 使用默认列值插入表中

> ID：15900035
> 
> 赞同：10
> 
> 时间：2013-04-09T10:57:36.887
> 
> 标签：sql, sql-server

我创建了一个具有默认列值的表`male`

```
CREATE TABLE Persons 
 (name varchar(20), 
  age int, 
  sex varchar(5) default 'male') 
```

插入语句#1：

```
INSERT INTO Persons values('Bob', 20) 
```

插入语句#2：

```
INSERT INTO Persons(name,sex) values('Bob', 20) 
```

当我尝试`Persons`使用插入语句 #1 将值插入表中时，出现如下所示的错误

> 列名或提供的值的数量与表定义不匹配

但是当我插入`Persons`using 语句 #2 时，它成功执行。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T11:01:39.140

好吧，在您的声明 #1 中，如果您*省略*列列表，则**必须为****所有三**列提供值，而您没有这样做。这就是如果您只提供其中两个值会失败的原因。

你的陈述#2可能应该是：

```
INSERT INTO Persons(name, age) values('Bob', 20) 
```

然后您清楚地**指定**要插入 (`name`和`age`) 的列，并提供填充两列所需的两个值 - 这就是它起作用的原因。第三列将填充配置的默认值，因为您没有为它指定任何内容。

出于这些原因，我建议**始终明确指定**要向其中插入数据的列列表 - 不要只是忽略该列表并*假设*您得到所有​​列正确.....

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T11:05:29.000

如果不想写字段，VALUES 必须与表中的字段数相匹配。

您可以使用 DEFAULT 四个您的目的：

```
 INSERT INTO Persons VALUES('Bob', 20, DEFAULT); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T11:01:52.407

第一个失败，因为您没有指定`INSERT`语句中的任何列。然后，您只提供两列而不是全部 3 列的值，因此它不知道将值放入哪些列...这是行不通的。

第二个有效，因为您明确声明要插入`name`，`gender`并且您正在为每一列指定一个值。

以下将起作用（但我怀疑您是否希望`20`在该`gender`列中）：

```
INSERT INTO Persons(name,gender) 
values('Bob',20) 
```

或者：

```
INSERT INTO Persons(name,age) 
values('Bob',20) 
```

我猜你实际上想要插入`age`not `gender`。明确说明要插入数据的列非常重要，这样您就可以在正确的列中获取数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T11:02:08.017

您的表格有 3 列 -

```
Name
Age
Gender 
```

您已为性别设置了默认值。在查询 (1) 中，您为 3 列提供 2 个值，但没有列列表。因此错误。

拉吉

# c# - 如何在数据表中插入新行？

> ID：15900037
> 
> 赞同：0
> 
> 时间：2013-04-09T10:57:44.547
> 
> 标签：c#, linq, join

我有两个表 A 和 B。表 A 是这样的：

```
Date           | Value
1/9/2013 13:30 |   1
1/9/2013 13:31 |   2
1/9/2013 13:32 |   2.1
1/9/2013 13:33 |   1.6
1/9/2013 13:34 |   1.7
1/9/2013 13:35 |   1.9
1/9/2013 13:36 |   5.6
1/9/2013 13:37 |   1.6
1/9/2013 13:38 |   1.64
1/9/2013 13:39 |   1.36 
```

表 B 是这样的：

```
1/9/2013 13:33 |   1.7
1/9/2013 13:37 |   1.6
1/9/2013 13:38 |   1.8 
```

我想要一个包含 B 的所有条目的表 C，但如果在 13:30 时没有条目，则值为 null。所以表 C 是这样的：

```
 Date           | Value
1/9/2013 13:30 |   null
1/9/2013 13:31 |   null
1/9/2013 13:32 |   null
1/9/2013 13:33 |   1.7
1/9/2013 13:34 |   null
1/9/2013 13:35 |   null
1/9/2013 13:36 |   null
1/9/2013 13:37 |   1.6
1/9/2013 13:38 |   1.8
1/9/2013 13:39 |   null 
```

我知道可以通过 join 和 linq 做到这一点，你知道吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:00:48.227

尝试以下`LEFT JOIN`查询：

```
from a in dtA.AsEnumerable()
join b in dtB.AsEnumerable() on a.Field<DateTime>("Date") equals b.Field<DateTime>("Date") into joinedB
from b in joinedB.DefaultIfEmpty()
select new
{
    Date = a.Field<DateTime>("Date"),
    Value = b != null ? b.Field<DateTime>("Value") : null
} 
```

# r - 通过使 id 从 1 开始来准备 igraph 输入数据

> ID：15900043
> 
> 赞同：0
> 
> 时间：2013-04-09T10:57:58.707
> 
> 标签：r, igraph

我有一个包含三列的数据库，前两列表示图形顶点的 ID，而第三列表示它们之间的距离。

```
cbind(id1=c(10,10,30,12,400,30),id2=c(11,12,400,30,10,79),dist=c(1000,20000,30123,1233,20200,400))

      id1 id2  dist
[1,]  10  11  1000
[2,]  10  12 20000
[3,]  30  400 30123
[4,]  12  30  1233
[5,]  400 10 20200
[6,]  30  79   400 
```

为了让 igraph 包读取此类数据，顶点 ID 需要是连续的并且从一个开始。所以是这样的：

```
 id1 id2  dist
[1,]  1  2  1000
[2,]  1  3 20000
[3,]  4  5 30123
[4,]  3  4  1233
[5,]  5  1 20200
[6,]  4  6   400 
```

谁能建议我一种自动完成的方法？此外，我还想为 ids 创建原始名称和新名称的转换表：

```
 old_id new_id
[1,]    1    1
[2,]   11    2
[3,]   12    3
[4,]   30    4
[5,]  400    5
[6,]   79    6 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:49:27.507

> 为了让 igraph 包读取此类数据，顶点 ID 需要是连续的并且从一个开始。

这实际上并不完全正确，您可以使用符号 id：

```
library(igraph)

mat <- cbind(id1 =c(10,  10,   30,   12,  400,  30),
             id2 =c(11,  12,   400,  30,  10,   79),
             dist=c(1000,20000,30123,1233,20200,400))
g <- graph.data.frame(as.data.frame(mat))

g
# IGRAPH DN-- 6 6 -- 
# + attr: name (v/c), dist (e/n)

V(g)$name
# [1] "10"  "30"  "12"  "400" "11"  "79" 

str(g)
# IGRAPH DN-- 6 6 -- 
# + attr: name (v/c), dist (e/n)
# + edges (vertex names):
# [1] 10 ->11  10 ->12  30 ->400 12 ->30  400->10  30 ->79 
```

# java - 表达式语言在tomcat 7中跳过标识符检查

> ID：15900044
> 
> 赞同：7
> 
> 时间：2013-04-09T10:58:04.980
> 
> 标签：java, eclipse, tomcat

我收到以下错误：

```
SEVERE: Servlet.service() for servlet jsp threw exception
javax.el.ELException: The identifier [case] is not a valid Java identifier as required by section 1.19 of the EL specification (Identifier ::= Java language identifier). This check can be disabled by setting the system property org.apache.el.parser.SKIP_IDENTIFIER_CHECK to true. 
```

这是由于在 tomcat 7 中默认 SKIP IDENTIFIER CHECK 功能为假（在 tomcat 6 及以下版本中为真），我在正则表达式中使用“case”，而**case**是标识符，因此它会引发错误。

我找到了以下解决方案： [javax.el.E​​LException: The identifier [return] is not a valid Java identifier](https://stackoverflow.com/questions/6233473/javax-el-elexception-the-identifier-return-is-not-a-valid-java-identifier)

但这对我不起作用，因为我不想更改我的代码。所以我想要将 tomcat 7 配置为 SKIP IDENTIFIER CHECK 的解决方案。

即使经过大量的谷歌搜索，我也没有找到办法做到这一点。我正在使用 eclipse juno 和 tomcat 7，请帮我考虑一下。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-21T18:46:58.357

终于得到了eclipse的解决方案。将以下行添加到我指定的位置

```
-Dorg.apache.el.parser.SKIP_IDENTIFIER_CHECK=true 
```

请逐步查找以下图片

```
STEP 1 : 
```

![第1步](https://i.stack.imgur.com/9mTq1.png)

```
STEP 2 : 
```

![第2步](https://i.stack.imgur.com/jjYE7.png)

```
STEP 3 : 
```

![第 3 步](https://i.stack.imgur.com/iSLMP.png)

干杯。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T19:25:04.710

在 CATALINA_HOME/bin 中创建一个 setenv.[bat|sh] 文件（即与所有其他脚本一起）并在该文件中设置系统属性。在 Windows 上，您将使用以下内容创建 setenv.bat：

```
SET CATALINA_OPTS=%CATALINA_OPTS% -Dorg.apache.el.parser.SKIP_IDENTIFIER_CHECK=true 
```

在 Linux 上，您将使用以下内容创建 setenv.sh：

```
export CATALINA_OPTS="$CATALINA_OPTS -Dorg.apache.el.parser.SKIP_IDENTIFIER_CHECK=true" 
```

您可以重复这些行（更改系统属性名称）以在同一个 setenv.[bat|sh] 文件中设置多个系统属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-08T13:27:54.970

我们还可以在 tomcat_home 目录/bin 下的 catalina.sh 文件中添加以下命令

CATALINA_OPTS="-Dorg.apache.el.parser.SKIP_IDENTIFIER_CHECK=true"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-14T12:39:51.730

我在将我目前的应用程序迁移到 Tomcat 7 时遇到了同样的问题（jsf 1.2 with ice faces 1.8.2）。我已经通过包含一个名称为 setenv.bat 的 bat 文件来解决它，其中包含以下内容。'SET CATALINA_OPTS=%CATALINA_OPTS% -Dorg.apache.el.parser.SKIP_IDENTIFIER_CHECK=true'

我已将它包含在 TomcatInstallationDirectory/bin 中。

它由 catalina.bat 文件读取。在下面的行'调用“%CATALINA_BASE%\bin\setenv.bat”'。

因此，我的 jspx 页面被适当地呈现

我通过tomcat浏览了以下文档：

## [https://tomcat.apache.org/tomcat-7.0-doc/RUNNING.txt](https://tomcat.apache.org/tomcat-7.0-doc/RUNNING.txt)

请发布您所做的所有解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-20T16:19:40.340

例如，如果您使用 Eclipse，则必须在 Servers 文件夹中的 catalina.properties 中添加以下行（在 Package Explorer 中查找，然后选择相应的 Tomcat 文件夹）：

```
org.apache.el.parser.SKIP_IDENTIFIER_CHECK=true 
```

请记住，Eclipse 使用不同的位置进行配置，而不是 CATALINA 原始目录。

值得看看 Tomcat 的属性页面，在[https://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html](https://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html)

# c# - 如何重定向cmd输出

> ID：15900045
> 
> 赞同：1
> 
> 时间：2013-04-09T10:58:09.497
> 
> 标签：c#, process

我想启动一个 cmd 文件并将输出重定向到控制台，但它不起作用。我必须做什么？我已经设置了 `startInfo.RedirectStandardOutput = true`。

```
com = "Parameter";

System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = 
    new System.Diagnostics.ProcessStartInfo();

startInfo.FileName = Properties.Settings.Default.pathTo+ @"\Make\copy.cmd";
startInfo.Arguments = com;
startInfo.RedirectStandardOutput = true;
startInfo.UseShellExecute = false;
process.StartInfo = startInfo;
process.Start();
output = process.StandardOutput;
string ln;

while ((ln = output.ReadLine()) != null)
{
    Console.WriteLine(line);
}
process.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:02:18.880

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.useshellexecute.aspx)

放`startInfo.UseShellExecute = false;`

然后你可以得到输出

```
Console.WriteLine(process.StandardOutput.ReadToEnd()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:21:28.610

现在，我有这个解决方案：

```
 com = "Parameter";;

                System.Diagnostics.Process process = new System.Diagnostics.Process();
                System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
                startInfo.FileName = Properties.Settings.Default.pathTo + @"\Make\copy.cmd";
                startInfo.Arguments = com;
                startInfo.RedirectStandardOutput = true;
                startInfo.RedirectStandardError = true;
                startInfo.UseShellExecute = false;
                startInfo.CreateNoWindow = true;
                process.StartInfo = startInfo;
                process.Start();
                process.WaitForExit();
                Console.WriteLine(process.StandardOutput.ReadToEnd());
                Console.WriteLine(process.StandardError.ReadToEnd()); 
```

# jquery-mobile - 在 jQuery Mobile 中使用带有滚动条的 iframe

> ID：15900049
> 
> 赞同：1
> 
> 时间：2013-04-09T10:58:22.390
> 
> 标签：jquery-mobile, iframe

我在使用 iframe 标记时显示滚动条时遇到问题。

我必须显示滚动条，因为内容超过 100 行。

虽然在桌面浏览器上，我可以在 iframe 框中看到滚动条，但在移动 Safari 上，即使我添加了溢出样式，它也不会显示滚动条。

```
iframe {
    overflow-y: scroll;
    -webkit-overflow-scrolling: touch;
}

<iframe id="PageHomePrivacyContent" src="test_en.html"></iframe> 
```

我一直在寻找其他解决方案，例如 iScroll、jQuery 滚动插件等。

然而，一切都不起作用。

解决办法是什么？

PS HTML5 删除了 iframe 中的滚动属性，所以请不要提及它。

谢谢，

杨成岩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-28T21:01:27.703

尝试

```
.iframe-holder {
    overflow-y: scroll;
    -webkit-overflow-scrolling: touch;
} 
```

然后

```
<div class="iframe-holder">
 <iframe id="PageHomePrivacyContent" src="test_en.html"></iframe>
</div> 
```

# angularjs - 使用 $resource 保存后如何从 $scope ng-repeat 更新项目

> ID：15900052
> 
> 赞同：0
> 
> 时间：2013-04-09T10:58:34.790
> 
> 标签：angularjs, angularjs-ng-repeat, angularjs-service, angular-resource

我有一个显示项目列表的角度视图，每个项目都有两个按钮将每个活动设置为暂停/开始。我知道这是 angular $resource 的一个非常基本的问题，但是我无法在成功 $start 时更新项目（在成功回调中，我无法访问与该项目相关的任何内容）。

```
function CampaignsListCtrl($scope, Campaign, $resource) {
    $scope.campaigns = Campaign.query();

    $scope.startCampaign = function () {
        var c = new Campaign(this.campaign);
        c.status = 1;
        c.$start(function success(response) {
               //here I'd like to update the value but can't access the item.
               //for example this.campaign.status = 1 doesn't work
               //how can I access the ng-repeat item to update it on success $start?
               //the response represents the updated Object

               console.log (response);

        }, function error (response) {
           console.log (response)
        });
    }

    $scope.pauseCampaign = function () {
        var c = new Campaign(this.campaign);
        c.status = 0;
        c.$pause(function success(response) {
               console.log (response);

        }, function error (response) {
           console.log (response)
        });
    }

}
//// and Campaign is defined as factory
mongoAPI.
factory('Campaign', ['$resource', '$http', function($resource, $http) {
        var actions = {
            'start': {method:'POST'},                           
            'pause': {method:'POST'}                 
        }
        var res = $resource('/api/campaign.js',{}, actions)
        return res;
}]); 
```

在我的观点中：

```
<div ng-repeat="campaign in campaigns">
     <button type="button" ng-show="campaign.status==0" ng-click="startCampaign(campaign)" class="btn"><i class="icon-play"></i></button>
     <button type="button" ng-show="campaign.status==1" ng-click="pauseCampaign(campaign)" class="btn"><i class="icon-pause"></i></button>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:29:37.313

这是一个与闭包/范围相关的问题，而不是 Angular 本身。在成功处理程序内部，`this`不再是作用域，因此无法访问`this.campaign`. 您实际上可以通过多种方式解决此问题。

我相信，最简单的方法是接收`campaign`as 参数并从那里引用它：

你的 HTML 中已经有了这个：

```
ng-click="startCampaign(campaign)" 
```

所以接收并使用它：

```
$scope.startCampaign = function (campaign) {
    var c = new Campaign(campaign);
    c.$start(function success(response) {
      campaign.status = 1;
    },
    ...
}; 
```

# apache - Mod Deflate 是否会自动缓存已删除的文件？

> ID：15900053
> 
> 赞同：0
> 
> 时间：2013-04-09T10:58:41.977
> 
> 标签：apache, apache2

我正在使用 mod_deflate 来压缩 javascript 文件。我想知道放气的文件是否缓存在某处，或者每次请求文件时都会对其进行压缩。

如果它们被缓存，有没有办法配置缓存以提高性能或调整设置？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:21:25.420

不，

您可以告诉浏览器将其缓存在那里以及我的使用

```
a2enmod expires 
```

并配置 mod expire 你需要在这个文件 /etc/apache2/sites-available/default

```
<IfModule mod_expires.c>
          <FilesMatch "\.(jpe?g|png|gif|js|css)$">
                      ExpiresActive On
                      ExpiresDefault "access plus 1 week"
          </FilesMatch>
</IfModule> 
```

在浏览器中测试。

现在，如果您想使用更高级的缓存，他们为什么不使用清漆。如果你有静态内容清漆会让你的网站飞起来，减轻你 apache 的负担。

# mysql - 在 MySQL Point 字段中反转 X 和 Y 坐标

> ID：15900054
> 
> 赞同：4
> 
> 时间：2013-04-09T10:58:42.760
> 
> 标签：mysql

我正在尝试反转 MySQL POINT 字段中值的 X 和 Y 坐标。

以下查询运行没有错误，但之后所有 vales 都为空：

```
UPDATE `Table` SET `column` = PointFromText(CONCAT('"POINT(',Y(`column`),',',X(`column`),')"')) 
```

查询有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-18T05:04:21.100

对于 MySQL >= 5.0.82

```
UPDATE `Table` SET `column` = POINT(Y(`column`), X(`column`)) 
```

否则

```
UPDATE `Table` SET `column` = GeomFromWKB(POINT(Y(`column`), X(`column`))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:10:55.723

像这样更改您的查询

```
UPDATE `Table` AS t
  INNER JOIN `Table` AS l
    ON l.id = t.id
SET t.`column` = PointFromText(CONCAT('"POINT(',Y(l.`column`),',',X(l.`column`),')"')) 
```

加入主键。

# android - 格式化日期和时间，如“设置 - 日期和时间”

> ID：15900056
> 
> 赞同：1
> 
> 时间：2013-04-09T10:58:44.667
> 
> 标签：android, datetime

似乎有很多方法可以在 Android 中格式化日期和时间 - 但没有一种完全符合我的要求 ;-)

我能够找到的方法涉及区域设置（直接或间接） - 但正确的方法必须是使用用户在“设置 - 日期和时间”中配置的内容。

使用例如：

```
String res = java.text.DateFormat.getDateTimeInstance(java.text.DateFormat.SHORT, java.text.DateFormat.MEDIUM).format(date);
                Log.d("", res); 
```

日志：2013 年 4 月 9 日下午 12:11:34

和

```
res = android.text.format.DateUtils.formatDateTime(getActivity(), date.getTime(), android.text.format.DateUtils.FORMAT_SHOW_TIME | android.text.format.DateUtils.FORMAT_SHOW_DATE  | android.text.format.DateUtils.FORMAT_SHOW_YEAR);
                Log.d("", res); 
```

日志：2013 年 4 月 9 日 12:11

但这不是它的配置方式，当我查看文件的日期和时间时，它被写为：09/04/2013 12:11

那么如何获取在“设置 - 日期和时间”中配置的格式字符串（如“yyyy-MM-dd”和“HH:mm”），或者如何获取根据这些规则格式化的日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:01:46.670

尝试使用以下代码：

```
public static String convertDateToUserFormat(final Date inputDate) {
if (inputDate != null) {
    return getDateFormat().format(inputDate);
}

return null;
}

private static DateFormat getDateFormat() {
    final String format = Settings.System.getString(context.getContentResolver(),
            Settings.System.DATE_FORMAT);
    if (TextUtils.isEmpty(format)) {
        return android.text.format.DateFormat
                .getDateFormat(context);
    }

    return new SimpleDateFormat(format);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:02:46.240

```
Format dateFormat = android.text.format.DateFormat.getDateFormat(getApplicationContext());
formattedDate = formatter.parse(yourDateString); 
```

有关 DateFormatter[的更多信息，请查看开发人员文档](http://developer.android.com/reference/java/text/DateFormat.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T11:03:15.813

这是日期格式的示例

```
 SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
  Date date = new Date();

  System.out.println("format 1 " + sdf.format(date));

  sdf.applyPattern("E MMM dd yyyy");
  System.out.println("format 2 " + sdf.format(date)); 
```

您可以点击此链接了解更多信息[在此处输入链接描述](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

# django - 限制模型仅访问具有特定条件的行？

> ID：15900058
> 
> 赞同：0
> 
> 时间：2013-04-09T10:58:55.913
> 
> 标签：django, django-models

我想使用 Django 模型来访问数据库行的子集。使用许多遗留数据库，如果可能的话，我宁愿不创建数据库视图。

简而言之，我想告诉我的模型，有些字段`foo`应该始终具有 value `bar`。这应该跨越表的任何 CRUD 操作，以便新创建的行也将具有`foo`= `bar`。对于我想要实现的目标，是否有一种简单的 Django 方式？

更新：我想确保这个模型不会在`foo`!=的表中写入任何内容`bar`。它必须只能读取、修改或删除`foo`=的那些行`bar`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:11:19.330

对于新创建的项目，您可以`default`在模型定义中设置值

```
class MyModel(models.Model):
    # a lot of fields
    foo = models.CharField(max_length=10, default='bar')

    # Set the manager
    objects = BarManager()

    def save(self, force_insert=False, force_update=False, using=None):
        self.foo = 'bar'
        super(MyModel, self).save(force_insert, force_update, using) 
```

要实现这一点，您应该`MyModel.objects.all()`只返回行，`foo=bar`您应该实现[您的自定义管理器](https://docs.djangoproject.com/en/1.5/topics/db/managers/#custom-managers)。您可以重新定义`get_query_set`添加过滤的方法。

```
class BarManager(models.Manager):
    use_for_related_fields = True

    def get_query_set(self):
        return super(BarManager, self).get_query_set().filter(foo='bar') 
```

*@tuomassalo 评论后更新*

1) 自定义管理器将影响对的所有调用，`MyModel.objects.get(id=42)`因为此调用只是代理对 的调用`.get_query_set().get(id=42)`。为此，您必须将 Manager 设置为模型的默认管理器（将其分配给`objects`变量）。

要使用此管理器进行相关查找（例如`another_model_instance.my_model_set.get(id=42)`），您需要`use_for_related_fields = True`对您进行设置`BarManager`。请参阅文档中的[控制自动管理器类型](https://docs.djangoproject.com/en/1.5/topics/db/managers/#controlling-automatic-manager-types)。

2）如果你想强制执行，`foo=bar`那么`default`价值对你来说是不够的。您可以使用`pre_save`信号或覆盖`save`模型上的方法。不要忘记调用原始的保存方法。

我更新了`MyModel`上面的例子。

# batch-file - 批处理：在文件夹中的所有文本文件上运行 Awk 脚本

> ID：15900060
> 
> 赞同：0
> 
> 时间：2013-04-09T10:58:58.863
> 
> 标签：batch-file

基本上我想在每个文本文件上自动运行以下命令：

```
awk -f myScript.awk file1.txt > new\file1.txt
awk -f myScript.awk file2.txt > new\file2.txt
... 
```

然后将处理后的文件移动到文件夹 \old。

```
move *.txt \old 
```

应该为那部分工作。

如何创建正确的 for 循环，以便 awk 程序的输出与输入具有相同的名称，只是在新文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:22:20.493

好的，试试这个：

```
for %%i in (*.txt) do awk -f myScript.awk "%%~fi" > "new\%%~nxi" 
```

# dependency-injection - 自动接线标签不起作用

> ID：15900061
> 
> 赞同：2
> 
> 时间：2013-04-09T10:59:00.650
> 
> 标签：dependency-injection, spring.net, autowired

我正在学习 Spring.Net。我做了一个小例子来理解标签自动装配，但它不起作用。在我的课下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Spring.Context;
using Spring.Context.Support;
namespace ConsoleApplication6
{
    class Program
    {
        static void Main(string[] args)
        {
            IApplicationContext context;
            context = new XmlApplicationContext("spring.xml");
            Texte texte = null;
            texte = (Texte)context.GetObject("texte");
            texte.print();
            Console.ReadKey();
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
namespace ConsoleApplication6
{
    class Texte
    {
        private String _t;
        private Description _desc;
        public String T
        {
            get { return _t; }
            set { _t = value; }
        }
        internal Description Desc
        {
            get { return _desc; }
            set { _desc = value; }
        }
        public void print()
        {
            Console.WriteLine("text in object: " + _t);
            Console.WriteLine("text description: " + _desc.D);
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
namespace ConsoleApplication6
{
    class Description
    {
        private String _d;
        public String D
        {
            get { return _d; }
            set { _d = value; }
        }
    }
} 
```

这里是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net">
  <object id = "texte" type = "ConsoleApplication6.Texte" autowire="byName">
    <property name = "_t" value = "I am the Text"/>
  </object>
  <object id = "_desc" type = "ConsoleApplication6.Description">
    <property name = "_d" value = "I am the description"/>
  </object>
</objects> 
```

Text 对象已实例化，但似乎我的对象 Description 未实例化。

我阅读了文档并检查了所有可以找到的文档： http: [//springindepth.com/book/in-depth-ioc-autowiring.html](http://springindepth.com/book/in-depth-ioc-autowiring.html) [http://www.berchtel.com/archive/diplomathesis/html/ 05.4-spring_.net.html](http://www.berchtel.com/archive/diplomathesis/html/05.4-spring_.net.html)

我还检查了 stackoverflow 中与 autowire 相关的所有问题，但其中大多数都与 autowire 注释有关（我没有尝试这个注释）。

你们中有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:25:37.970

您的第一个参考实际上是一本关于 Spring 的 Java 版本的书。Spring.net 是 Spring for Java 框架的 .net 端口，有很多相似之处，但也有一些不同。spring.net 上的文档位于[www.springframework.net/](http://www.springframework.net/doc-latest/reference/html/)。

根据[有关自动装配的文档](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-factory-autowire)：

> [Spring.net] 将寻找一个与需要自动装配的属性名称完全相同的对象。例如，如果您有一个按名称设置为自动装配的对象定义，并且它包含 Master 属性，Spring.NET 将查找名为 Master 的对象定义，并将其用作对象定义中 Master 属性的值.

所以我想你必须将你的对象定义更改为

```
<object id = "Desc" type = "ConsoleApplication6.Description">
  <property name = "_d" value = "I am the description"/>
</object> 
```

你可能不得不 make`Texte.Desc` `public`而不是`internal`，但我不太确定那个。

***更新***

好吧，这对我有用：

```
using System;
using NUnit.Framework;
using Spring.Context.Support;

namespace XmlConfig.AutoWireByName
{
    [TestFixture]
    public class AutoWireByName
    {
        [Test]
        public void LetsAutoWireByName()
        {
            var ctx = new XmlApplicationContext("AutoWireByName/objects.xml");
            var texte = (Texte)ctx.GetObject("texte");
            texte.Print();
        } 
    }

    class Texte
    {
        public string T { get; set; }
        public Description Desc { get; set; }

        public void Print()
        {
            Console.WriteLine("text in object: " + T);
            Console.WriteLine("text description: " + Desc.D);
        }
    }

    class Description
    {
        public string D { get; set; }
    }
} 
```

```
<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net">
  <object id = "texte" type = "XmlConfig.AutoWireByName.Texte, XmlConfig" autowire="byName">
    <property name = "T" value = "I am the Text"/>
  </object>
  <object id = "Desc" type = "XmlConfig.AutoWireByName.Description, XmlConfig">
    <property name = "D" value = "I am the description"/>
  </object>
</objects> 
```

# android-camera - Android：将照片相机切换到同一表面上的摄像机

> ID：15900063
> 
> 赞同：0
> 
> 时间：2013-04-09T10:59:12.450
> 
> 标签：android-camera

我是一个新的安卓开发者。我已经使用照相机完成了一个 Activity 以在表面视图中拍照，但现在我正在考虑在 Activity 中添加一个按钮，以便在同一表面视图中将相机切换到录像机。这个有可能？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:01:19.680

我有自己问题的解决方案。在我认为放置一个按钮以在具有相同表面视图的同一个活动中录制视频之后，我为照片相机做了一个表面视图和一个活动，但我不知道这是否可能。嗯，我在Activity中写了这个方法来准备de MediaRecorder，取表面视图。

```
 public Boolean prepararCamaraVideo(){

    mMediaRecorder = new MediaRecorder();

    mCamera.unlock();
    mMediaRecorder.setCamera(mCamera);

    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    state = MediaRecorderState.INITIALIZED;

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO)
        mMediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
    else { 
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    }

    state = MediaRecorderState.DATA_SOURCE_CONFIGURED;

    mOutputFile = Files.getExternalMediaFile(Files.MEDIA_TYPE_VIDEO).toString();
    mMediaRecorder.setOutputFile(mOutputFile);

    mMediaRecorder.setPreviewDisplay(mCameraPreview.getHolder().getSurface());

    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        Log.d("Video", "IllegalStateException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;

    } catch (IOException e) {
        Log.d("Video", "IOException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    }
    return true;

} 
```

这个命令 mMediaRecorder.setPreviewDisplay(mCameraPreview.getHolder().getSurface()); 获取摄像机的表面。

最后是录制视频的方法。

```
 public void grabaVideo(View v) {
    if (state!=MediaRecorderState.RECORDING){
        if (prepararCamaraVideo()) {
            mMediaRecorder.start();
            state = MediaRecorderState.RECORDING;
            Toast.makeText(getApplicationContext(), getString(R.string.capturing_video), Toast.LENGTH_SHORT).show();                
        } else {
            // prepare didn't work, release the camera
            releaseMediaRecorder();
            // inform user
        }
    }
    else{
        mMediaRecorder.stop();  // stop the recording
        releaseMediaRecorder(); // release the MediaRecorder object
        mCamera.lock();         // take camera access back from MediaRecorder

        state = MediaRecorderState.INITIAL;
        Toast.makeText(getApplicationContext(), getString(R.string.video_stored_in) + " " + mOutputFile, Toast.LENGTH_SHORT).show();

    }

} 
```

如果你需要，我希望能帮助你。

# r - OHCL 时间序列 - 多元高斯分布的异常检测

> ID：15900065
> 
> 赞同：1
> 
> 时间：2013-04-09T10:59:15.827
> 
> 标签：r, gaussian

我有一些股票价格的 OHLC 时间序列：

```
library(quantmod)
library(mnormt)
library(MASS)

download.file("http://dl.dropbox.com/u/25747565/941.RData", destfile="test.RData")
load("test.RData")
chartSeries(p) 
```

![941 OHLC 时间序列](https://i.stack.imgur.com/WmI68.png)

从图中可以看出，有两个向下的尖峰，很可能是由于某种数据错误。我想使用多元高斯来检测包含这两个违规数据点的行。

```
> x[122,]
 941.Open  941.High   941.Low 941.Close 
    85.60     86.65      5.36     86.20 
> x[136,]
 941.Open  941.High   941.Low 941.Close 
    84.15     85.60     54.20     85.45 
```

这是我的代码来拟合分布并计算每个数据点的概率：

```
x <- coredata(p[,1:4])
mu <- apply(x, 2, mean)
sigma <- cov.rob(x)$cov
prob <- apply(x, 1, dmnorm, mean = mu, varcov = sigma, log = TRUE) 
```

但是，此代码引发以下错误：

```
Error in pd.solve(varcov, log.det = TRUE) : x appears to be not symmetric 
```

当我使用标准函数计算协方差矩阵时没有出现这个错误`cov()`，而只是使用了鲁棒协方差矩阵函数。协方差矩阵本身对我来说看起来很温和，所以我不确定发生了什么。我想使用协方差矩阵的稳健估计的原因是因为标准协方差矩阵给出了一些误报，因为我在训练集中包含了异常。

有人可以告诉我：

a）如何解决这个问题

b）如果这种方法甚至有意义

谢谢！

PS 我考虑在 Cross Validated 上发布此内容，但认为 SO 更合适，因为这似乎是一个“编程”问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T11:55:21.920

你走对了。我不知道如何解决这个错误，但我可以建议你如何找到新点的索引。

1.  您的训练数据可能有少量异常，否则交叉验证和测试结果将受到影响
2.  在 MATLAB 中计算均值和协方差为

    ```
     mu=mean(traindata);
       sigma=cov(traindata); 
    ```

3.  根据您的要求设置 epsilon

    ```
    count=0;
      Actual=[];
      for j=1:size(cv,1)
        p=mvnpdf(cv(j,:),mu,sigma);
          if p<eplison
            count=count+1;
            Actual=[Actual;j];
               fprintf('j=%d \t p=%e\n',j,p);
         end
    end 
    ```

4.  如果结果不令人满意，则调整阈值

5.  使用 F-1 分数评估模型（如果 F-1 分数为 1，则您做对了）
6.  将模型应用于测试数据
7.  完毕！

# fitnesse - 在 FitNesse .Net 中测试空列表

> ID：15900069
> 
> 赞同：0
> 
> 时间：2013-04-09T10:59:25.937
> 
> 标签：fitnesse

FitNesse .Net（使用 FIT 测试系统，而不是 SLIM）支持对以下形式的列表进行测试：

```
element1, element2, ..., elementN 
```

这很好用。但是，我不知道如何测试*空*列表。

可以使用 测试空字符串`blank`。列表的等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:12:44.287

Try this:

|configure|processor|add operator|parsequotedstring|

|check|myemptylist|""|

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T07:22:06.157

请看这里：[https ://github.com/imanushin/NetRunner/wiki/Collection-result](https://github.com/imanushin/NetRunner/wiki/Collection-result)

如果输出上有任何集合，NetRunner（和 fitSharp）将写入几个红色行（例如测试将失败）。

例如，通过使用此类函数，我正在检查日志中的错误条目：预期条目计数为空列表。但是，任何有问题的行都会在网页上呈现给我，这非常有用：我从几个文件中收集日志结果并在测试中对它们进行报道。

# asp.net - ExtJS：太快的处理程序的响应有时会失败

> ID：15900079
> 
> 赞同：2
> 
> 时间：2013-04-09T10:59:45.133
> 
> 标签：asp.net, json, extjs, ashx

我有一个奇怪的问题，它并不总是出现，但有时会出现相同的请求。在我的网站（本地主机）上，我有一个带有自动加载功能的 ExtJS 存储，在页面加载（按下 F5 按钮）之后，它从服务器的某个处理程序（*** .ashx）中读取 JSON。处理程序从数据库中获取数据并将其序列化为 JSON。按 F5 可工作 4 次 5。第 5 次 json-reader 显示 success=false 和 0 长度数据。

如果我在处理程序中使用时间延迟，例如：

```
System.Threading.Thread.Sleep(1000); 
```

它是 50 的 49 倍。但是当我试图让网站更快时，在我的响应中设置延迟是很奇怪的。

请帮助或询问我是否没有足够的关于问题的信息！

这是我的js示例：

```
storePrefixes.on({
        'beforeload': function () {
           //...
        },
        'load': {
            fn: function() {
                if (storePrefixes.data.items.length > 0)
                    // ... working with response
                else 
                    // here is a problem
            },
            single: true
        }
    }); 
```

还有服务器代码：

```
 <%@ WebHandler Language="C#" Class="GetPrefixesInRD" %>

using System;
using System.Web;
using BCR.BLL;

public class GetPrefixesInRD : IHttpHandler, System.Web.SessionState.IReadOnlySessionState
{
    private readonly PrefixNewBLL prefixeBLL = new PrefixNewBLL();
    private readonly Newtonsoft.Json.JsonSerializer serializer = new Newtonsoft.Json.JsonSerializer();

    public void ProcessRequest(HttpContext context)
    {
        var prefixes = prefixeBLL.GetPrefixesByExistPrefixInAccountingDocs(null, 1, false);
        prefixes.Sort((x, y) => String.CompareOrdinal(x.Prefix, y.Prefix));

        context.Response.ContentType = "application/json";
        context.Response.Clear();
        context.Response.BufferOutput = true;
        serializer.Serialize(context.Response.Output, new { root = prefixes, total = prefixes.Count });
        context.Response.Flush();
        context.Response.End();
    }

    public bool IsReusable { get { return false; } }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T02:32:28.100

调试时，我会检查 this.isLoading() 以查看它是否仍在尝试加载奇怪的人。将所有内容移至 datachanged 事件可能会更好。如果需要分析store，使用console.dir(Ext.apply({}, this)); 在运行时获取快照。

# c - 指向结构打印的指针数组

> ID：15900085
> 
> 赞同：0
> 
> 时间：2013-04-09T11:00:00.540
> 
> 标签：c, pointers, struct, segmentation-fault

我有一个指向结构的指针数组：

```
item** items = NULL; 
```

这些是我为分配和打印数组而编写的函数：

```
void allocateItems(item** items, int numItems) {
    items =malloc(numItems*sizeof(item*));
    for (int i = 0; i < numItems; i++) {
        items[i]=malloc(sizeof(item*));
        items[i]->data = i + 1;
        items[i]->data2 = (i + 1) % 2;
    }
}

void printItems(item** items, int numItems) {
    for (int i = 0; i < numItems; i++) {
        printf("%d : %d\n", items[i]->data, items[i]->data2);
    }
} 
```

但是当我尝试打印该结构数组时，我遇到了分段错误。有人可以告诉我错误在哪里吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T11:02:14.623

这只是为 a 分配足够的内存`item*`：

```
items[i]=malloc(sizeof(item*)); 
```

它必须为 a 分配内存`item`：

```
items[i]=malloc(sizeof(item)); 
```

为了使`allocateItems()`调用者可以看到所做的更改，`items`必须传入的地址：

```
allocateItems(&items, 4); 
```

`items`必须在函数内取消引用参数类型和方法的更改：

```
void allocateItems(item*** items, int numItems)
{
    *items = malloc(numItem * sizeof(item*));
    for (int i = 0; i < numItems; i++)
    {
        (*items)[i] = malloc(sizeof(item));
        (*items)[i]->data = i + 1;
        (*items)[i]->data2 = (i + 1) % 2;
    }
} 
```

This could be simplified by allocating an array of `item` instead of an array of `item*`. It would also mean that the list of `items` are in a contiguous block of memory instead of being fragmented with the multiple `malloc()` for allocating each element in the array:

```
void allocateItems(item** items, const int numItems)
{
    *items = malloc(numItems * sizeof(item));
    if (*items)
    {
        for (int i = 0; i < numItems; i++)
        {
            (*items)[i].data  = i + 1;
            (*items)[i].data2 = (i + 1) % 2;
        }
    }
}

item* items;
allocateItems(&items, 4);

if (items)
{
    for (int i = 0; i < 4; i++)
        printf("[%d]: (%d, %d)\n",
               i,
               items[i].data,
               items[i].data2);

    free(items);
} 
```

# eclipse - OSGI Mylyn java.lang.ClassNotFoundException: AbstractRepositoryConnector

> ID：15900087
> 
> 赞同：0
> 
> 时间：2013-04-09T11:00:07.047
> 
> 标签：eclipse, eclipse-plugin, noclassdeffounderror, mylyn

我创建了两个 Mylyn 扩展（com.xyz.mylyn.ui.MyRepositoryUi 扩展 AbstractRepositoryConnectorUi 和 com.xyz.mylyn.core.MyRepositoryConnector 扩展 AbstractRepositoryConnector）。我通常使用 Eclipse 更新站点选项安装这些自定义扩展插件。

在安装这些自定义插件之前，我还成功安装了先决条件依赖的 Mylyn 插件，即 Mylyn Task List、Mylyn Task Focused Interface 和 Mylyn Wikitext。安装后，我看到以下两个包含我扩展的 Mylyn 类的 jar 正确存在于我的 eclipse 工作空间插件文件夹下。

1] org.eclipse.mylyn.tasks.core_3.6.0.v20110608-1400.jar 包含扩展的 org.eclipse.mylyn.tasks.core.AbstractRepositoryConnector

2] org.eclipse.mylyn.tasks.ui_3.6.2.v20110826-0100.jar 包含扩展的 org.eclipse.mylyn.tasks.ui.AbstractRepositoryConnectorUi

以下是我创建的 ui plugins plugin.xml 文件 -

```
'<?xml version="1.0" encoding="UTF-8"?>'
'<?eclipse version="3.2"?>'
'<plugin>'
'<extension point="org.eclipse.mylyn.tasks.ui.repositories">'
'<connectorCore class="com.xyz.mylyn.core.MyRepositoryConnector"'
'id="com.xyz.mylyn.core.myrepositoryconnector"'
'name="My Repository Connector"'
'type="My"/>'
'<connectorUi brandingIcon="images/connectionsmall.gif"'
'class="com.xyz.mylyn.ui.MyRepositoryUi" id="com.xyz.mylyn.ui.myconnectorui"'
'name="Connector UI" overlayIcon="images/mobius.gif"/>'
'<taskListMigrator class="com.xyz.mylyn.ui.MyTaskListMigrator"/>'
'</extension>'
'<extension'
'point="org.eclipse.mylyn.tasks.ui.editors">'
'<pageFactory'
'class="com.telelogic.synergy.integration.mylyn.ui.editor.MyTaskEditorPageFactory"'
'id="com.ibm.rational.synergy.integration.mylyn.ui.editor.mytaskeditorpagefactory">'
'</pageFactory>'
'</extension>'
'</plugin>' 
```

但是，在安装自定义插件后，我收到以下错误 -

```
!ENTRY org.eclipse.mylyn.tasks.ui 4 0 2013-03-22 14:50:46.117
!MESSAGE Repository connectors failed to load.
!SUBENTRY 1 org.eclipse.mylyn.tasks.ui 4 0 2013-03-22 14:50:46.117
!MESSAGE Could not load connector core
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in com.xyz.integration.mylyn.ui was unable to load class com.xyz.mylyn.core.MyRepositoryConnector. at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:178)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.mylyn.internal.tasks.ui.util.TasksUiExtensionReader$ConnectorDescriptor.createConnector(TasksUiExtensionReader.java:95)
    at org.eclipse.mylyn.internal.tasks.ui.util.TasksUiExtensionReader.initConnectorCores(TasksUiExtensionReader.java:327)
    at org.eclipse.mylyn.internal.tasks.ui.util.TasksUiExtensionReader.initStartupExtensions(TasksUiExtensionReader.java:245)
    at org.eclipse.mylyn.internal.tasks.ui.TasksUiPlugin.start(TasksUiPlugin.java:583)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
        ...
        ...

which is caused by the following exception - 

Caused by: java.lang.NoClassDefFoundError: AbstractRepositoryConnector
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:632)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:607)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:568)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:492)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:465)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
    ... 112 more
Caused by: java.lang.ClassNotFoundException: AbstractRepositoryConnector
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
```

我不确定为什么加载的类在 eclipse 工作空间的插件文件夹下可用时无法加载依赖的 Mylyn 库。

任何指针都会有很大帮助。

谢谢，阿迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:20:43.977

这些插件可能尚未解决/安装。尝试使用以下方法进行检查：

尝试以下操作：打开控制台视图，从控制台的“打开控制台”上下文菜单中选择主机 OSGi 控制台并输入

ss org.eclipse.mylyn.tasks.core

在主机控制台 OSGi 面板中

如果插件不存在，请尝试重新安装 mylyn。如果您使用 RCP 或 PDE，则需要将此插件添加到所需的插件中。

您的分配也可能无效。如果您使用 dropins 文件夹并从 dropins 文件夹更新一些插件，则可能会发生这种情况。

您还可以将 com.xyz.integration.mylyn.ui 插件添加到 com.xyz 的依赖项中...

# asp.net-mvc-4 - 实体框架 5 一对一关系（例如用户 -> 配置文件） - ModelBuilder ASP.NET MVC4

> ID：15900090
> 
> 赞同：0
> 
> 时间：2013-04-09T11:00:12.027
> 
> 标签：asp.net-mvc-4, ef-code-first, entity-framework-5

我正在尝试做与之前的答案类似的事情： [如何使用实体框架 4 代码优先 (POCO) 声明一对一关系](https://stackoverflow.com/questions/3622572/how-to-declare-one-to-one-relationship-using-entity-framework-4-code-first-poco)

问题是，我对此很陌生，我首先使用 Entity Framework 5 代码并且`HasConstraint`不再存在，更不用说我不擅长 lamda。我想知道是否有人可以帮助扩展这一点，以便我可以有效轻松地将 User 类映射到 Profile 类？我需要知道如何为配置文件和模型构建器执行此操作

每个用户都有一个配置文件

另外，另一个快速的问题，假设配置文件模型中有列表，我如何将它们有效地放在模型构建器和配置文件中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:19:05.670

例如

```
public class User
{
    public int Id { get; set; }
    public string Username { get; set; }
    public Profile Profile { get; set; }
    // public int ProfileId { get; set; }
}

public class Profile
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string PostalCode { get; set; }
}
// ...
modelBuilder.Entity<User>()
    .HasOptional(x => x.Profile)
    .WithRequired(); 
```

`ProfileId`没用，FK 在“围栏的另一边”（在 中`Profile`）。
（这是最有意义的国际海事组织）

如果您确实需要一个`Id`输入`User`（例如，在添加时能够`Profile`仅通过其 ID填写`User`- 如果没有真正使用一对一 - 在您创建配置文件和用户时），那么您可以反转...

```
modelBuilder.Entity<User>()
    .HasRequired(x => x.Profile)
    .WithOptional(); 
```

...而您`ProfileId`实际上在`Id`(pk -> pk) 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-16T11:05:06.383

> 该解决方案对我有用

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
 modelBuilder.Entity<ApplicationUser>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).HasMaxLength(450);
                entity.HasOne(d => d.Profile).WithOne(p => p.User);
            });

 modelBuilder.Entity<UserProfile>(entity =>
            {
                entity.HasKey(e => e.Id);
                entity.Property(e => e.Id).HasMaxLength(450);
                entity.Property(e => e.Type)
                    .HasMaxLength(10)
                    .HasColumnType("nchar");
                entity.HasOne(d => d.User).WithOne(p => p.Profile);
            });

 } 
```

# mysql - SQL 外部约束

> ID：15900091
> 
> 赞同：-1
> 
> 时间：2013-04-09T11:00:12.737
> 
> 标签：mysql, sql

我想从不同的表中获取键，当我成功时，我收到此错误：无法添加或更新子行：外键约束失败。

这是我的数据库的样子：

```
 POST           COMMENTS

 id             id 

 post           comment

 ---------      post_id 
```

我想当`connect POST id to COMMENTS post_id.`我尝试在我的网站上添加评论时，会出现该错误消息，或者有时在我试图使其工作的 phpmyadmin 中。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:04:53.563

我敢打赌，您以相反的方式创建了外键约束:)。

在您的情况下，来自 Comments 表的 post_id 是引用 Post 表中 Id 的外键。

否则，只要您确保首先在 POST 中有一个条目，它就应该起作用。如果您不将其链接到 POST 中的行，则无法在 COMMENTS 中添加一行！

# android - 如何了解我的 Android 应用在用户设备上消耗了多少电量？

> ID：15900094
> 
> 赞同：18
> 
> 时间：2013-04-09T11:00:16.783
> 
> 标签：android, battery

我正在编写一个应用程序来评估 Android 上蓝牙 P2P 网络的可行性。

我注意到在 Galaxy Nexus 上，它使用的电池非常少，而在 Nexus S 上，它会很快耗尽电池。这是由蓝牙导致的高 CPU 负载直接导致的。

现在，我想收集有关我的应用程序在安装它的设备上消耗多少电量的信息。简单地记录时间与电池电量是没有用的，因为我不知道设备何时在使用，即使我记录了，我也不知道用户是否在通过 WiFi 下载或阅读电子书时玩 3D 游戏屏幕变暗。

更糟糕的是，并非所有由我的应用程序引起的电池使用都归因于电池屏幕中的它 - 例如，有些被列为“蓝牙”（同样，取决于设备）。

**是否有任何简单、保护隐私的方法可以在非 root 设备上获取有用信息？**这些设备不在我的控制之下。我不能简单地查看菜单，我不能使用 ADB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:08:34.353

Android API 目前不支持此功能。唯一[可用的文档](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)是描述如何使用[BatteryManager](http://developer.android.com/reference/android/os/BatteryManager.html)的广播的文档，它仅提供整体电池电量，不提供每个应用程序的详细信息。

我想即使有未记录的方法来模拟系统设置电池管理器显示的内容，它们也需要生根。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:25:49.227

AFAIK 没有办法做到这一点。您可以做到这一点的最接近的方法是将设备连接到像[小眼实验室](http://www.littleeye.co/)这样的监控工具，该工具会在图表上绘制应用程序随时间消耗的电池电量。它还支持标记应用程序生命周期中的关键事件，如打开 WIFI/蓝牙等。

不支持远程执行此操作，但您可以在自己的测试设备上获取数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:29:00.683

这种方法相当粗糙，但它可能会有所帮助。您可以使用现有的 BatteryManager 广播来跟踪**应用程序处于活动状态时**整体电池电量的变化。

Knowing when your app is active is a separate issue. If your app consists entirely of Activities, then you can get good results by starting to track whenever any of your Activities' `onResume()` methods is called, and stopping tracking in `onPause()`. If you can have all your Activities derive from a single base Activity class, then this is quite easy. See [How to detect when an Android app goes to the background and come back to the foreground](https://stackoverflow.com/questions/4414171/how-to-detect-when-an-android-app-goes-to-the-background-and-come-back-to-the-fo) for suggestions on how to track this.

If your app is more complex, and the smart stuff happens in a longer-running component like a Service, then it's much harder.

This is crude, but at least it would help you distinguish "playing 3D games" from "using my app".

# c - C 标准对两个有符号整数的按位异或有何规定？

> ID：15900098
> 
> 赞同：1
> 
> 时间：2013-04-09T11:00:24.283
> 
> 标签：c, xor, signed

*哪个 ANSI C 标准说明了两个有符号*整数的按位异或？我试图阅读标准，但它是巨大的。

根据 C 标准，两个有符号整数的 XOR 是否有效？结果的符号位会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:10:11.557

按位运算对*bits*进行操作，即对数据的实际 1 和 0 进行操作。因此，符号是无关紧要的；运算的结果是写出表示每个整数的 1 和 0 的系列，然后对每个相应的位对进行异或运算得到的结果。（即使类型信息也无关紧要，只要操作数是某种整数，而不是双精度数、指针等）

# requirejs - 将外部 requirejs 模块加载到自己的应用程序中

> ID：15900099
> 
> 赞同：0
> 
> 时间：2013-04-09T11:00:24.760
> 
> 标签：requirejs

我有一个大型 requirejs 应用程序。现在我有一个外部库，它是一堆 requireJs 模块。我的第一个想法是将模块编译成一个文件，只需要这个模块。但这似乎行不通。编译后的模块是这样的

**lib.js**

```
define("a", function(){

})

define("b", function(){

})

define("", function(){

}) 
```

在我的模块中，我像这样加载它

```
define(['lib'], function(){
}) 
```

# log4j - 骡子日志文件到数据库

> ID：15900102
> 
> 赞同：1
> 
> 时间：2013-04-09T11:00:26.557
> 
> 标签：log4j, mule, flow

在 mule CE 3.3.0 版本中，我有一个 mule 项目，调用它的 URL 是`http://localhost:8086/mule?msg=Hello-World!!!`.

每次我调用它时，都会在 mule 服务器的日志文件中默认添加一些作为日志的行。

现在我想更改 mule 中的日志类型？我想代替骡子为日志创建它的文件，作为默认骡子在数据库中创建一个表并将重要信息保存到其中。

实际上我想为我的项目有一个表日志，在这个表中我想有客户的信息，比如 IP 和......

可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-23T12:20:40.257

您可以使用 Log4j 数据库附加程序将 Mule ESB 日志插入数据库。下面的代码片段用于执行相同的操作。

```
<appender name="DB" class="org.apache.log4j.jdbc.JDBCAppender">
   <param name="url" value="jdbc:mysql://localhost/DBNAME"/>
   <param name="driver" value="com.mysql.jdbc.Driver"/>
   <param name="user" value="user_id"/>
   <param name="password" value="password"/>
   <param name="sql" value="INSERT INTO LOGS VALUES('%level','%message','%X{muleMessage}','%X{payload}')"/>

   <layout class="org.apache.log4j.PatternLayout">
   </layout>
</appender>

<logger name="log4j.rootLogger" additivity="false">
   <level value="DEBUG"/>
   <appender-ref ref="DB"/>
</logger> 
```

# html5-audio - HTML5 音频缓冲区卡住

> ID：15900103
> 
> 赞同：3
> 
> 时间：2013-04-09T11:00:26.620
> 
> 标签：html5-audio, webkitaudiocontext

我正在使用 HTML5 webkitAudioContext 使用以下代码获取用户麦克风的实时级别：

```
var liveSource;

function getLevel(){
    var context = new webkitAudioContext();  

    navigator.webkitGetUserMedia({audio: true}, function(stream) {

       liveSource = context.createMediaStreamSource(stream);
       liveSource.connect(context.destination);

       var levelChecker = context.createJavaScriptNode(4096, 1 ,1);
       liveSource.connect(levelChecker);

       levelChecker.connect(context.destination);

       levelChecker.onaudioprocess = function(e) {

            var buffer = e.inputBuffer.getChannelData(0);

        var maxVal = 0;
        // Iterate through buffer to check if any of the |values| exceeds 1.
        for (var i = 0; i < buffer.length; i++) {
            if (maxVal < buffer[i]) {
                maxVal = buffer[i];
            }
        }
        if(maxVal <= 0.01){
            console.log(0.0);
        } else if(maxVal > 1){
            console.log(1);
        } else if(maxVal > 0.2){
            console.log(0.2);
        } else if(maxVal > 0.1){
            console.log(0.1);
        } else if(maxVal > 0.05){
            console.log(0.05);
        } else if(maxVal > 0.025){
            console.log(0.025);
        } else if(maxVal > 0.01){
            console.log(0.01);
        }
};
});

 }

getLevel(); 
```

如果您将其复制并粘贴到您的控制台并在麦克风附近单击手指（假设您已启用麦克风输入），您会看到它工作了几秒钟，然后突然停止。它不报告任何错误。谁能解释为什么会这样？谢谢

有关级别正常工作的示例，请参见[http://labs.dinahmoe.com/dynamicmusicengine/ 。](http://labs.dinahmoe.com/dynamicmusicengine/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-21T15:45:58.867

我有同样的问题，但终于得到了解决方案！问题是javascript节点cicle。我建议您先更改 createJavaScriptNode() ：

```
var levelChecker = context.createScriptProcessor(4096, 1 ,1); 
```

The garbage collector has a problem with "levelChecker" variable and his onaudioprocess , so you have to bind the scriptprocessor or the onaudioProcess callback to the window. Here the HOLY SOLUTION:

```
 levelChecker.onaudioprocess = window.audioProcess = function(e) { ... 
```

Just add window.audioProcess in that line and you will never deal with tat problem anymore.

Here you can find further info : [http://lists.w3.org/Archives/Public/public-audio/2013JanMar/0304.html](http://lists.w3.org/Archives/Public/public-audio/2013JanMar/0304.html)

Hope that works for you!

# ios - 如何使音量键对 Audioplyer Sound 没有影响

> ID：15900108
> 
> 赞同：0
> 
> 时间：2013-04-09T11:00:55.700
> 
> 标签：ios, avaudioplayer, volume, alarm

我正在开发一个警报应用程序，我使用 AVAudioPlayer 播放警报声音，我有一个滑块来调整我的应用程序设置中的 audioPlayer 声音。现在，当警报发出任何声音时，我不想通过减少/增加 audioPlayer 声音Iphone/Ipad 的音量键。

```
 //to set the slider value as player sound in my app
player.volume =[[NSUserDefaults standardUserDefaults]floatForKey:@"Volume"]; 
```

任何人都可以建议我如何使音量键在闹钟播放声音时对播放器声音没有影响。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:22:26.787

您不应更改任何设备功能的默认行为。根据我的经验，Apple 不会批准该申请。

# c# - 文件 io 和伪终端的 p/invoke 声明

> ID：15900110
> 
> 赞同：1
> 
> 时间：2013-04-09T11:01:01.233
> 
> 标签：c#, linux, mono, pinvoke

我想使用来自单声道的文件 io 函数（打开、读取、写入）和伪终端（[http://linux.die.net/man/4/pts](http://linux.die.net/man/4/pts)）函数（grantpt、unlockpt、ptsname）。

翻译参数和返回值是微不足道的（不过，如果你能验证它们，我会很感激）但我找不到相应的库。

我的 Linux 发行版是 Arch Linux on ARM (Raspberry PI)。由于 ARM 平台只有 32 位，我可以将 int32 用于 int/size_t 等

非常感谢你。

```
internal class LinuxNativeMethods
{
    //int open(const char *pathname, int flags);
    [DllImport("??.so")]
    internal extern int open(string name, int flags);

    //ssize_t read(int fd, void *buf, size_t count);
    [DllImport("??.so")]
    internal extern int read(int fd, byte[] buffer, int length);

    //ssize_t write(int fd, const void *buf, size_t count); 
    [DllImport("??.so")]
    internal extern int write(int fd, byte[] buffer, int length);

    //int grantpt(int fd);
    [DllImport("??.so")]
    internal extern int grantpt(int fd);

    //int unlockpt(int fd);
    [DllImport("??.so")]
    internal extern int unlockpt(int fd);

    //i later marshall the pointer to a string
    //char *ptsname(int fd);
    [DllImport("??.so")]
    internal extern IntPtr ptsname(int fd);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:07:42.677

这些函数似乎在 glibc 中，因此 dllimport 看起来像这样：

```
[DllImport("libc.so.6")] 
```

# python - 使用 pprint 并跳过类型名称

> ID：15900111
> 
> 赞同：2
> 
> 时间：2013-04-09T11:01:05.763
> 
> 标签：python, printing, pprint

我想`pprint`用来打印一些复杂的列表，见下​​面的例子：

```
>>> x = [OrderedDict([(u'D-ID', u'clci-2'), (u'R', u'1691')]), OrderedDict([(u'D-ID', u'dallas-pcc-1'), (u'R', u'5498')]), OrderedDict([(u'D-ID', u'gx-1'), (u'R', u'2275')]), OrderedDict([(u'D-ID', u'gx-2'), (u'R', u'0')]), OrderedDict([(u'D-ID', u'ocs-1'), (u'R', u'31735')]), OrderedDict([(u'D-ID', u'ocs-2'), (u'R', u'0')]), OrderedDict([(u'D-ID', u'pcc-gx-1'), (u'R', u'46351')]), OrderedDict([(u'D-ID', u'rgx-1'), (u'R', u'907')]), OrderedDict([(u'D-ID', u'rgx-2'), (u'R', u'1010')]), OrderedDict([(u'D-ID', u'rocs-1'), (u'R', u'915')]), OrderedDict([(u'D-ID', u'rocs-2'), (u'R', u'1033')])]
>>> pprint.pprint(x)
[OrderedDict([(u'D-ID', u'clci-2'), (u'R', u'1691')]),
 OrderedDict([(u'D-ID', u'dallas-pcc-1'), (u'R', u'5498')]),
 OrderedDict([(u'D-ID', u'gx-1'), (u'R', u'2275')]),
 OrderedDict([(u'D-ID', u'gx-2'), (u'R', u'0')]),
 OrderedDict([(u'D-ID', u'ocs-1'), (u'R', u'31735')]),
 OrderedDict([(u'D-ID', u'ocs-2'), (u'R', u'0')]),
 OrderedDict([(u'D-ID', u'pcc-gx-1'), (u'R', u'46351')]),
 OrderedDict([(u'D-ID', u'rgx-1'), (u'R', u'907')]),
 OrderedDict([(u'D-ID', u'rgx-2'), (u'R', u'1010')]),
 OrderedDict([(u'D-ID', u'rocs-1'), (u'R', u'915')]),
 OrderedDict([(u'D-ID', u'rocs-2'), (u'R', u'1033')])] 
```

这很好，除了我想删除所有类型 name( `OrderedDict & u`) 和所有不必要`[]`的 . **pprint可以吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:31:30.523

您需要创建自己的 class 子[`pprint.PrettyPrinter`类](http://docs.python.org/2/library/pprint.html#pprint.PrettyPrinter)，并覆盖该`.format()`方法：

```
from pprint import PrettyPrinter, _recursion

class MyPrettyPrinter(PrettyPrinter):
    def format(self, object, context, maxlevels, level):
        if isinstance(object, OrderedDict):
            if not object:
                return "()", True, False

            objid = id(object)
            if maxlevels and level >= maxlevels:
                return "(...)", False, objid in context
            if objid in context:
                return _recursion(object), False, True
            context[objid] = 1
            readable = True
            recursive = False
            components = []
            append = components.append
            level += 1
            selfformat = self.format
            for k, v in sorted(object.items()):
                krepr, kreadable, krecur = selfformat(k, context, maxlevels, level)
                vrepr, vreadable, vrecur = selfformat(v, context, maxlevels, level)
                append('({}, {})'.format(krepr, vrepr))
                readable = readable and kreadable and vreadable
                if krecur or vrecur:
                    recursive = True
            del context[objid]
            return '({})'.format(', '.join(components)), readable, recursive

        formatted, readable, recursion = PrettyPrinter.format(self, object, context, maxlevels, level)
        if isinstance(object, unicode):
            formatted = formatted.lstrip('u')

        return formatted, readable, recursion 
```

我们让基类完成大部分工作，并且只`OrderedDict`显式地格式化；它有一个自定义`__repr__`，这意味着原始`pprint`实现只是使用它而不是递归它。

然后使用此类而不是直接调用`pprint.pprint()`：

```
mypprint = MyPrettyPrinter()

mypprint.pprint(x) 
```

这会产生：

```
>>> mypprint = MyPrettyPrinter()
>>> mypprint.pprint(x)
[(('D-ID', 'clci-2'), ('R', '1691')),
 (('D-ID', 'dallas-pcc-1'), ('R', '5498')),
 (('D-ID', 'gx-1'), ('R', '2275')),
 (('D-ID', 'gx-2'), ('R', '0')),
 (('D-ID', 'ocs-1'), ('R', '31735')),
 (('D-ID', 'ocs-2'), ('R', '0')),
 (('D-ID', 'pcc-gx-1'), ('R', '46351')),
 (('D-ID', 'rgx-1'), ('R', '907')),
 (('D-ID', 'rgx-2'), ('R', '1010')),
 (('D-ID', 'rocs-1'), ('R', '915')),
 (('D-ID', 'rocs-2'), ('R', '1033'))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:04:59.180

```
>>> import pprint
>>> from collections import OrderedDict
>>> x = [OrderedDict([(u'D-ID', u'clci-2'), (u'R', u'1691')]), OrderedDict([(u'D-ID', u'dallas-pcc-1'), (u'R', u'5498')]), OrderedDict([(u'D-ID', u'gx-1'), (u'R', u'2275')]), OrderedDict([(u'D-ID', u'gx-2'), (u'R', u'0')]), OrderedDict([(u'D-ID', u'ocs-1'), (u'R', u'31735')]), OrderedDict([(u'D-ID', u'ocs-2'), (u'R', u'0')]), OrderedDict([(u'D-ID', u'pcc-gx-1'), (u'R', u'46351')]), OrderedDict([(u'D-ID', u'rgx-1'), (u'R', u'907')]), OrderedDict([(u'D-ID', u'rgx-2'), (u'R', u'1010')]), OrderedDict([(u'D-ID', u'rocs-1'), (u'R', u'915')]), OrderedDict([(u'D-ID', u'rocs-2'), (u'R', u'1033')])]
>>> print pprint.pformat(x).replace("OrderedDict([", "(") \
                           .replace("u'", "'") \
                           .replace("])", ")")

[(('D-ID', 'clci-2'), ('R', '1691')),
 (('D-ID', 'dallas-pcc-1'), ('R', '5498')),
 (('D-ID', 'gx-1'), ('R', '2275')),
 (('D-ID', 'gx-2'), ('R', '0')),
 (('D-ID', 'ocs-1'), ('R', '31735')),
 (('D-ID', 'ocs-2'), ('R', '0')),
 (('D-ID', 'pcc-gx-1'), ('R', '46351')),
 (('D-ID', 'rgx-1'), ('R', '907')),
 (('D-ID', 'rgx-2'), ('R', '1010')),
 (('D-ID', 'rocs-1'), ('R', '915')),
 (('D-ID', 'rocs-2'), ('R', '1033'))] 
```

`replace`根据您的需要调整s，我认为这看起来足够干净

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:53:01.613

If it's just for printing some `dict` and `list` stuff (or stuff from classes inheriting from them), you would be better off using some other serialization, e.g., JSON:

```
import json
print json.dumps(obj) 
```

# python - 如何使用特定站点范围内安装的库创建 virtualenv？

> ID：15900115
> 
> 赞同：2
> 
> 时间：2013-04-09T11:01:18.387
> 
> 标签：python, python-2.7, virtualenv

我想知道是否可以创建仅使用某些系统安装库的虚拟环境。

例如，我在系统范围内安装了 scipy、numpy 和 matplotlib。

我想创建使用它们的虚拟环境，但不是所有系统范围的库。每次我使用 pip 安装它们时，下载和编译都需要一段时间，而且它们占用空间，我想避免这种情况。

# html - HTML5 视频未在 Safari 中显示

> ID：15900118
> 
> 赞同：3
> 
> 时间：2013-04-09T11:01:23.097
> 
> 标签：html, video

我在这里阅读了有关此问题的其他答案，但没有任何帮助。我正在尝试在 Safari 中使用 HTML5 视频，但它根本不会显示。参考视图：[http](http://www.shaun-pelling.com/malagnini/index2.html) ://www.shaun-pelling.com/malagnini/index2.html - （视频位于顶部的滑块上，只需单击一次向左的滑块箭头）。

它在除 Safari 之外的所有其他浏览器中都显示良好。

htaccess 文件：

```
<Files ~ "\.(mp4|m4v)">
AddType video/mp4 mp4
order allow,deny
allow from all
satisfy any
</Files>

AddType video/mp4 mp4 m4v
AddType audio/mp4 m4a
AddType video/ogg ogv
AddType audio/ogg ogg oga
AddType video/webm webm 
```

HTML 代码：

```
<video width="100%" controls="controls">
<source src="/malagnini/video/paradise.mp4" type="video/mp4" />
<source src="/malagnini/video/paradise.ogv" type="video/ogg" />
<source src="/malagnini/video/paradise.webm" type="video/webm" />
</video> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:53:13.100

现在已经解决了。在 Windows 上，您需要安装 Quick Time 才能在 Safari 中观看 HTML5 视频。

# c# - 适用于 Windows Phone 的 Facebook SDK：调用 FacebookSessionClient.LoginAsync(permissions) 时出现 InvalidCastException；

> ID：15900119
> 
> 赞同：1
> 
> 时间：2013-04-09T11:01:25.530
> 
> 标签：c#, facebook, windows-phone-7, windows-phone-7.1, facebook-c#-sdk

*   我正在使用适用于 Windows Phone 的 Facebook SDK。
*   我创建了一个 Facebook 应用程序，启用了“使用 Facebook 登录的网站”选项，并在代码中分配了 appID。
*   当我执行代码时，我创建的 Facebook 应用程序出现在 Facebook 的“您的应用程序”部分，但随后出现 InvalidCastException 错误。
*   我使用的 Facebook 客户端版本是 0.3.0.0。

这行代码抛出 InvalidCastException：

```
session = await App.FacebookSessionClient.LoginAsync("user_about_me,read_stream"); 
```

以下是堆栈跟踪：

```
at Facebook.Client.FacebookSessionClient.<LoginAsync>d__d.MoveNext()
at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()
at Microsoft.Runtime.CompilerServices.TaskAwaiter.<>c__DisplayClassa.<OnCompletedInternal>b__1(Object state)
at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
at System.Delegate.DynamicInvokeOne(Object[] args)
at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
at System.Delegate.DynamicInvoke(Object[] args)
at System.Windows.Threading.DispatcherOperation.Invoke()
at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:06:01.937

此问题现已在 SDK 的 0.4.0 版本中得到修复。请获取最新的 nuget 包，然后重试。

谢谢

# codeigniter - Codeigniter：无法在我的库中加载数据库。

> ID：15900120
> 
> 赞同：4
> 
> 时间：2013-04-09T11:01:28.883
> 
> 标签：codeigniter, codeigniter-2

当我尝试打电话时

```
$this->load->database(); 
```

产生以下错误“调用非对象上的成员函数数据库（）”
自动加载数据库也无济于事......
当我尝试自动加载它时。
所有对数据库的调用

```
$this->db->get('people'); 
```

它说 get 方法未定义...
我不知道从什么开始以及从哪里开始..
\ 有人吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T11:02:14.373

转到 autoload.php`application/config/autoload.php`并添加这个

```
$autoload['libraries'] = array('database'); // add database in array 
```

确保您的连接设置在 `application/config/database.php`

比在图书馆这样做

```
Class MyLib
{
    function getPeople(){
        $CI =   &get_instance();
        $query  =   $CI->db->get('people');
        return $query->result();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:22:11.067

如果不工作，请使用扩展 CI_Model 尝试扩展模型

```
class User_model extends CI_Model { 

     public function __construct() 
     {
           parent::__construct(); 
           $this->load->database();
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-24T11:57:35.063

您可以通过两种方法加载数据库：

方法一：自动连接

$autoload['libraries']=array('database');

方法二：手动连接

$this->加载>数据库（）；

i hope above methods clear your confusion....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-11T21:25:04.520

You are doing a very common mistake. When you call `$this->load->database();` from `controller` or `model` it works because controllers and models are child of `CI_Controller` and `CI_Model` respectively. But when you are call them from Library which is not a child class of any basic `CI`class you cannot load database() or anything else using `$this->` key. you must use the help of `&get_instance();` to load codeigniter instance and use that instance instead of `$this`. Which suggests following Code:

```
$INST=&get_instance();//Store instance in a variable.
$INST->load->database();//If autoload not used.
$INST->db->get('people');//or Your desired database operation. 
```

It is better to keep a field variable to hold the reference to `$INST`as you may need to access it in various functions.

Following Code will be more eligent:

```
 class MyLib{
     var $INST;
     public function __construct() 
     {
         $INST=&get_instance();//Store instance in a variable.
         $INST->load->database();//If autoload not used.
     }

     function getPeople(){
         $query  =  $INST->db->get('people');
         return $query->result();
     }
 } 
```

# powershell - 如何在powershell中测试无效路径？

> ID：15900121
> 
> 赞同：1
> 
> 时间：2013-04-09T11:01:34.050
> 
> 标签：powershell, path

我有一个脚本尝试使用相对路径运行一些可执行文件。
所以我`test-path`用来验证可执行文件是否在它应该在的位置。如果没有，我尝试另一个位置。

```
if(test-path "$current../../../myexe.exe"){
   # found it!
} 
```

但在这种情况下，如果 $current`C:/folder/`则`test-path "C:/folder/../../../myexe.exe"`失败

> 路径 ... 引用了基础“C:”之外的项目

是否有一种干净而可靠的方法来测试路径，以便它返回真或假，并且不会给我带来一些意外错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:12:49.773

```
Test-Path ([io.path]::Combine($current,(Resolve-Path ../../../myexe.exe))) 
```

有关更多信息，请参阅[此线程](https://stackoverflow.com/a/499101/9833)：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:29:31.100

我让它使用 .NET 工作，但如果你想正确解析相对路径`File.Exists`，你必须设置第一个。`Environment.CurrentDirectory`

**编辑**：在 Shay Levy 指出它对其他后台进程可能是危险的之后不更改 CurrentDirectory（请参阅[http://www.leeholmes.com/blog/2006/06/26/current-working-directory-with-powershell-and -net-calls/](http://www.leeholmes.com/blog/2006/06/26/current-working-directory-with-powershell-and-net-calls/) )

 ~~[环境]::CurrentDirectory = $pwd~~

```
[System.IO.File].Exists("$pwd\$invalidRelativePath")
False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-10T14:01:34.373

测试路径从根本上被破坏了。

甚至**SilentlyContinue**也坏了：

```
Test-Path $MyPath -ErrorAction SilentlyContinue 
```

如果 $MyPath 为 $null、空或不作为变量存在，这仍然会爆炸。

如果 $MyPath 只是一个空格，它甚至会返回 $true。那个“”文件夹到底在哪里！

以下是适用于以下情况的解决方法：

```
$MyPath = "C:\windows"  #Test-Path return $True as it should
$MyPath = " "       #Test-Path returns $true, Should return $False
$MyPath = ""        #Test-Path Blows up, Should return $False
$MyPath = $null      #Test-Path Blows up, Should return $False
Remove-Variable -Name MyPath -ErrorAction SilentlyContinue  #Test-Path Blows up, Should return $False 
```

解决方案在于在 Test-Path 想要炸毁时强制它返回 $False。

```
if ( $(Try { Test-Path $MyPath.trim() } Catch { $false }) ) {  #Returns $false if $null, "" or " "
    write-host "path is GOOD"
} Else {
    write-host "path is BAD"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-03T09:49:14.423

您应该使用 Resolve-Path 或 Join-Path

# php - 如何更改 tank_auth 中的电子邮件内容？

> ID：15900125
> 
> 赞同：1
> 
> 时间：2013-04-09T11:01:39.720
> 
> 标签：php, codeigniter, email, tankauth

我在我的 codeigniter 项目中使用 Tank_auth 进行身份验证。当我创建新帐户或重置密码时。标准电子邮件已发送。如何更改这些电子邮件的内容/语言？

我搜索了整个应用程序文件夹，但找不到任何相关内容。

希望有人能指出我正确的地方。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:05:14.647

Tank auth 将电子邮件的 HTML 文件存储在`application/views/email/`. 检查那个位置。您将通过文件名猜测每个文件的用途。

# mysql - 在 MySQL 中使用带有子查询的 Cursor 时出错

> ID：15900126
> 
> 赞同：0
> 
> 时间：2013-04-09T11:01:39.907
> 
> 标签：mysql, cursor, handle

我有以下存储过程：

```
DECLARE CURSORITO CURSOR FOR SELECT  issues.id FROM issues

DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done=1;

OPEN CURSORITO;

REPEAT
FETCH CURSORITO INTO c_id ; 

IF NOT done THEN
    -- TOTAL HOURS
    SELECT SUM(hours) INTO c_Tot_Horas FROM time_entries WHERE issue_id=c_id;
    INSERT INTO TOTAL (ID,TOT) VALUES c_id,c_Tot_Horas ;
END IF;
UNTIL done END REPEAT; 
```

但是当“Total Hours Querys”没有数据时，进程退出repeat部分，将“Done”变量设置为true

我应该怎么做才能很好地完成这个过程，即围绕所有光标走动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:12:47.947

为此，您不需要光标。

```
INSERT INTO total(ID, TOT)
SELECT issue_id, SUM(hours) 
FROM time_entries t
/*optionally you can add*/
INNER JOIN issues i ON t.issue_id = i.id
/*if you need to filter by joining*/
GROUP BY issue_id 
```

光标非常慢，当你不需要它们时，不惜一切代价避免它们。

# python - 如何使用 matplotlib 中的 PCA 类进行人脸识别？

> ID：15900133
> 
> 赞同：-1
> 
> 时间：2013-04-09T11:01:58.983
> 
> 标签：python, matplotlib, face-recognition, pca

我正在尝试使用 python 构建用于人脸识别的代码。现在我可以将所有数据库图像放入一个二维数组中，以便能够对它们应用主成分分析 (PCA)。我在 matplotlib 中找到了一个名为 PCA 的类，但我想知道如何将它用于人脸识别。

以下是提到的类的描述：

```
class matplotlib.mlab.PCA(a)
compute the SVD of a and store data for PCA. Use project to project the data onto a reduced set of dimensions

Inputs:

a: a numobservations x numdims array
Attrs:

a a centered unit sigma version of input a

numrows, numcols: the dimensions of a

mu : a numdims array of means of a

sigma : a numdims array of atandard deviation of a

fracs : the proportion of variance of each of the principal components

Wt : the weight vector for projecting a numdims point or array into PCA space

Y : a projected into PCA space

The factor loadings are in the Wt factor, ie the factor loadings for the 1st principal component are given by Wt[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T15:32:13.207

他们的关键概念是您将面投影到更高维度的空间中，然后在该空间中测量它们之间的距离。

我从这个文档中引用（看起来像一个班级的作业）：

[http://www.umiacs.umd.edu/~knkim/KG_VISA/PCA/FaceRecog_PCA_Kim.pdf](http://www.umiacs.umd.edu/~knkim/KG_VISA/PCA/FaceRecog_PCA_Kim.pdf)

“PCA 计算由其训练向量表示的空间的基。这些基向量，实际上是特征向量，由 PCA 计算，是在训练向量的最大方差方向上。正如前面所说，我们称它们为特征面.

每个特征面都可以被视为一个特征。当一个特定的脸被投影到人脸空间时，它在人脸空间中的向量描述了每个人脸特征的重要性。人脸通过其特征面系数（或权重）在人脸空间中表示。我们可以处理一个大的输入向量，面部图像，只需要在面部空间中取它的小权重向量。这意味着我们可以在一定程度上重建原始人脸，因为图像空间的维数远大于人脸空间的维数。

在本报告中，我们只考虑人脸识别。训练集中的每个人脸都被转换为人脸空间，其组件存储在内存中。人脸空间必须填充这些已知的人脸。输入人脸给系统，然后投影到人脸空间。系统计算它与所有存储的人脸的距离。”

有几个教程可用。这是我的最爱：

*   [http://scikit-learn.org/dev/auto_examples/applications/face_recognition.html](http://scikit-learn.org/dev/auto_examples/applications/face_recognition.html)

    [http://www.tp.umu.se/~nylen/pylect/advanced/scikit-learn/index.html#id9](http://www.tp.umu.se/~nylen/pylect/advanced/scikit-learn/index.html#id9)

    [http://www.janeriksolem.net/2009/01/pca-for-images-using-python.html](http://www.janeriksolem.net/2009/01/pca-for-images-using-python.html)

# ios - 僵尸 UIWebView 在从 javascript 调用 alert() 后被释放时

> ID：15900137
> 
> 赞同：1
> 
> 时间：2013-04-09T11:02:06.827
> 
> 标签：ios, objective-c, uiwebview, nszombie

我正在使用 UIWebView，它会在单击按钮时弹出警报（来自 javascript）。还有另一个按钮（在本机端），它关闭控制器，所以也释放 UIWebView。

问题是，如果我触摸 UIWebView 中的按钮，并在填充警报之前触摸关闭按钮，我的控制器和 UIWebView 将被释放，但警报仍保留在屏幕上。然后，如果我单击警报上的任何按钮，应用程序将崩溃并给出以下错误：

```
[UIWebView modalView:didDismissWithButtonIndex:]: message sent to deallocated instance 
```

并且这个方法是从私有方法中调用的

```
[UIModalView(Private) _popoutAnimationDidStop:finished:] 
```

我正在使用ARC，我的dealloc是这样的：

```
- (void)dealloc {
    [_myWebView stopLoading];
    _myWebView.delegate = nil;
    _myWebView = nil;
} 
```

但这并不能解决我的问题，因为我认为 UIModalView 将我的 webview 引用为委托，并且我无法将其设置为 nil，因为它是私有的。

我该如何解决？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T16:01:26.630

这是他们处理警报视图的 Apple 错误。[打开错误报告。](https://bugreport.apple.com)

与此同时，这里有一些解决方法：

在 UIAlertView 上创建一个类别：

```
@interface UIAlertView (QuickDismiss) @end

@implementation UIAlertView (QuickDismiss)

- (void)__quickDismiss
{
     [self dismissWithClickedButtonIndex:self.cancelButtonIndex animated:NO];
}

@end 
```

现在，在您的视图控制器的 dealloc 方法中，调用它：

```
[[UIApplication sharedApplication] sendAction:@selector(__quickDismiss) to:nil from:nil forEvent:nil]; 
```

这将关闭当前打开的所有警报视图，包括您的 Web 视图显示的那些。

如果这不起作用，您始终可以迭代所有`UIApplication.sharedApplication.windows`对象的所有子视图，检查是否`[view.class.description hasPrefix:@"UIAlertView"]`为真，然后将其关闭。这是一种不如前一种优雅的方法，应该是最后的手段。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:34:39.363

在解除分配 UIWebView 之前，找到一种将 UIAlertView 上的委托设置为 nil 的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-18T08:09:36.723

最后，我找到了一个非常有效的解决方案。我使用方法 swizzle 来挂钩 UIAlertView 委托功能 - (void)didPresentAlertView:(UIAlertView *)alertView

```
- (void)didPresentAlertView:(UIAlertView *)alertView
{
    if ([self.delegate respondsToSelector:@selector(didPresentAlertView:)]) {
        [self.delegate didPresentAlertView:alertView];
    }
    if ([self.delegate isKindOfClass: [UIWebView class]]) {
        uiWebView = self.delegate;
    }
} 
```

我只是在这个函数中保留了 UIWebView 实例，这样 UIWebView 实例作为 UIAlertView 的委托就不会在 UIAlertView 实例被释放之前被释放。

# ios - 在iphone上的opengl中找到当前视图之前的空间点

> ID：15900144
> 
> 赞同：0
> 
> 时间：2013-04-09T11:02:28.270
> 
> 标签：ios, opengl-es

我有一些代码可以在 opengl 中创建一个 3d 视图，然后使用设备运动在其中环顾四周。我知道这是可行的，因为我可以将 3d 立方体放置在我周围的空间中，并查看它们是否在正确的位置。（我只是用 x/y/z 坐标创建它们）。

该代码使用设备的旋转矩阵，然后将其应用于各个块。

```
CMRotationMatrix r = dm.attitude.rotationMatrix;
GLKMatrix4 baseModelViewMatrix = GLKMatrix4Make(r.m11, r.m21, r.m31, 0.0f,
                                                r.m12, r.m22, r.m32, 0.0f,
                                                r.m13, r.m23, r.m33, 0.0f,
                                                0.0f,  0.0f,  0.0f,  1.0f);

float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);

GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, kNearZ, kFarZ);

block.effect.transform.projectionMatrix = projectionMatrix; 
```

我想要做的是弄清楚我在看哪里，然后在我面前创建一个街区。

通过在一个方向上创建一个向量，将旋转矩阵应用于它，然后读取它的新值，我取得了一些有限的成功。但它只适用于某些方向 - 当我旋转太远时它会搞砸。

```
GLKVector4 vect = GLKVector4Make(0.0f,0.0f,10.0f,1.0f);

GLKVector4 newVec = GLKMatrix4MultiplyVector4(baseModelViewMatrix,vect); 
```

然后我读取 newVec.x,newVec.y,newVec.z 并使用它们来放置立方体。

有人可以告诉我我是否在正确的轨道上？有没有更简单的方法来实现这一点？

这一切的数学是相当艰巨的。

更新：

我已经取得了一些部分成功

```
 GLKVector3 newVec1 = GLKVector3Make(-r.m22, -r.m33, r.m21); 
```

这仅适用于一个横向方向，也仅适用于我当前位置周围的圆柱体。上/下轴不太正确。

旋转矩阵的这些部分是否足以在我周围的任何地方得到一个点？

更新 2：

认为发布更多代码以使其真正清晰可能会有所帮助。

这就是所有内容的显示方式。

```
//1- get device position
CMDeviceMotion *dm = motionManager.deviceMotion;
CMRotationMatrix r = dm.attitude.rotationMatrix;

GLKMatrix4 baseModelViewMatrix = GLKMatrix4Make(r.m11, r.m21, r.m31, 0.0f,
                                    r.m12, r.m22, r.m32, 0.0f,
                                    r.m13, r.m23, r.m33, 0.0f,
                                    0.0f,  0.0f,  0.0f,  1.0f);

GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(45.0f), aspect, kNearZ, kFarZ);

//2- work out position ahead of current view
GLKVector3 newVector = GLKVector3Make(-r.m22, -r.m33, r.m21);

//place cube in 3d space- this works fine when just positioning with x,y,z co-ordinates
cube.effect.transform.projectionMatrix = projectionMatrix;
GLKMatrix4 modelViewMatrix = GLKMatrix4Identity;

modelViewMatrix = GLKMatrix4Translate(modelViewMatrix, newVector.x*100, newVector.y*100, newVector.z*100);
modelViewMatrix = GLKMatrix4Multiply(baseModelViewMatrix, modelViewMatrix);

cube.effect.transform.modelviewMatrix = modelViewMatrix; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:39:09.950

您查看的向量可能应该乘以倒矩阵。你没有写出你得到了什么结果，但这里有一些可能的解决方案：

1.  newVect1 = (r.m13, r.m23, r.m33)
2.  newVect2 = (-r.m13, -r.m23, r.m33)
3.  将 (0,0,1) 与倒矩阵相乘

**编辑：（**添加一些解释）

如果您的 baseModelViewMatrix 负责旋转您周围的所有对象，那么面向前方（显示方式）的矢量应该由 baseModelViewMatrix 的倒置矩阵旋转。如果确实，如果 baseModelViewMatrix 是恒等式，则面向前方的正确向量是 (0,0,1)，那么只需将 (0,0,1) 与倒矩阵相乘（您可以简单地尝试一下，甚至应该，只需将其设置为标识并将对象放置在（0,0,100）或其他位置）。如果不是，您应该找到朝前的那个并对其执行相同的操作。

关于我发布的第二种方法，`newVect2 = (-r.m13, -r.m23, r.m33)`它专门用于 (0,0,1) 是前向向量的情况。这个想法是旋转矩阵由 3 个基向量 x,y,z 组成，其中每一行分别代表其中一个（它始终适用于创建旋转矩阵，但可能不可逆）。如果第 3 行确实代表 z 基向量，则向量 (0,0,1) 将转换为 (r.m13, r.m23, r.m33) 并且您似乎面对的是镜像的向量通过它的正常（0,0,1）。该操作将是 R' = normal*(2*dot(normal, R)) - R 并且对于 normal 为 (0,0,1) 且 R 为 (r.m13, r.m23, r .m33)，结果 R' 是 (-r.m13, -r.m23, r.m33)。就像这里的注释一样，它可能会被转过来，z 基向量是 (r.m31, r.m32, r.m33)。

在任何情况下，如果第 3 个选项不起作用，则第 2 个选项也不起作用，问题可能是 (0,0,1) 不是身份的前向向量。

# java - EJB @Stateless bean，两个客户端使用不同的方法并且 poolsize = 1

> ID：15900146
> 
> 赞同：0
> 
> 时间：2013-04-09T11:02:33.157
> 
> 标签：java, ejb, stateless

请帮助我理解@Stateless EJB 3 bean。

如果我有一个具有两种方法且池大小为 1 的 bean，如果两个客户端在其上调用不同的方法，是否可以同时访问该 bean。

我觉得答案是“否”，因为 ejb 不检查方法是否在内部没有链接。这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:15:33.807

答案是否定的，因为规范保证永远不会同时调用给定的 EJB 实例。

# android - Android - 如果我暂停、清除缓存和恢复，我的应用程序会崩溃

> ID：15900148
> 
> 赞同：3
> 
> 时间：2013-04-09T11:02:37.553
> 
> 标签：android, actionbarsherlock, slidingmenu

### 在我的项目中，我同时使用 actionbarsherlock 和slidingmenu 作为库

我有扩展这个类的主要活动： public class SlidingSherlockFragmentActivity extends SherlockFragmentActivity implements SlidingActivityBase 它有他自己的 findviewbyid 实现

```
public View findViewById(int id) {
        View v = super.findViewById(id);
        if (v != null)
            return v;
        return mHelper.findViewById(id);
        } 
```

问题在于，当我在清除缓存后恢复我的应用程序时，v 和 mHelper 为 NULL。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T12:34:32.050

这是前一阵子，但你用过这个吗？

```
View v = (View) getSupportFragmentManager().findFragmentById(your fragment ID here).getView(); 
```

# javascript - 点击图片无效

> ID：15900149
> 
> 赞同：0
> 
> 时间：2013-04-09T11:02:37.973
> 
> 标签：javascript, jquery, fancybox, fancybox-2, onmouseover

出于某种原因，如果我将“onmouseover”作为参数，则无法单击此图像以显示幻想框：

```
<area onmouseover="toggleOverlay('SteWoz',1);" id="locSteWoz" alt="Test" class="fancybox" coords="24,51,236,244" href="http://www.google.com" rel="iframe" shape="rect" title="Test"> 
```

**编辑：**这就是 toggleOverlay 所做的：

```
<script>
    function toggleOverlay(name, newState){
        var element = 'imgOverlay' + name;
        var newDisplay

        if (newState == 0) {newDisplay = 'none'}
        if (newState == 1) {newDisplay = 'block'}           

        document.getElementById(element).style.display = newDisplay;
        //document.getElementById(element).style.z-index = '5';

            $(element).hide().fadeIn(4000);
    }
</script> 
```

如果我删除“onmouseover”它工作正常。我怎样才能解决这个问题？

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:11:58.683

**首先**，这一行：

```
$(element).hide().fadeIn(4000); 
```

... 并没有真正做任何事情，因为此时`element`仍然需要一个正确的符号（`#`或`.`）来定义选择器，所以在这种情况下应该是：

```
$("#" + element).hide().fadeIn(1000); 
```

**其次**，如果您在使用该图像的图像上覆盖另一个图像`map`，我假设您在此**[JSFIDDLE](http://jsfiddle.net/hCu5b/)**中所做的事情，

...那么您无法“***使叠加层不响应任何点击，以便可以点击下面的图像***”。

但是，您可以做的是使*叠加*图像使用与下图相同`map`的图像，因此，在您的`toggleOverlay()`函数中，您可以调整此行

```
$("#" + element).hide().fadeIn(1000); 
```

...进入这个

```
$("#" + element).hide().fadeIn(1000).attr("usemap", "#Map"); 
```

...假设您的 html 看起来像

```
<map name="Map" id="Map">
    <area onmouseover="toggleOverlay('SteWoz',1);" id="locSteWoz" class="fancybox" shape="square" coords="0,0,415,319" href="{target}" title="title" alt="alt" />
</map> 
```

... 否则使用标签的相应 ID `map`。

查看**[更新的 JSFIDDLE](http://jsfiddle.net/hCu5b/1/)**

# php - 如何在 Sugarcrm 模块的搜索功能中更改搜索运算符

> ID：15900153
> 
> 赞同：3
> 
> 时间：2013-04-09T11:02:57.457
> 
> 标签：php, search, module, sugarcrm

我在 Sugarcrm 模块中的搜索功能遇到问题，我总是使用**%-sign** in field box 示例：**%john**来显示搜索结果，我只需要**john**而不是**%john**

我在 /modules/Accounts/Account.php 的方法中编辑了我的文件：

```
function build_generic_where_clause ($the_query_string) {
    $where_clauses = Array();
    $the_query_string = $GLOBALS['db']->quote($the_query_string);
    array_push($where_clauses, "accounts.name like '%$the_query_string%' ");

    if (is_numeric($the_query_string)) {
        array_push($where_clauses, "accounts.phone_alternate like '%$the_query_string%'");
        array_push($where_clauses, "accounts.phone_fax like '%$the_query_string%'");
        array_push($where_clauses, "accounts.phone_office like '%$the_query_string%'");
    } 
```

并编辑 /modules/Accounts/metadata/SearchFields.php 在

```
'name' => array( 'query_type'=>'default', 'operator' => 'like'), 
```

但总是失败，你有解决办法吗？

* * *

**解决方案**

> 我编辑了我的 config.php 并添加了`'search_wildcard_infront' => true`

问候， 兰帕克

# android - 在其他活动中使用 getIntent() 访问时相同的项目值

> ID：15900155
> 
> 赞同：0
> 
> 时间：2013-04-09T11:03:06.520
> 
> 标签：android, android-intent, oncreate

我的代码流程是：

`Reports => ReportsType`

报告有 3 个项目，在单击每个项目时，我开始`ReportsType`传递带有名称的标签的活动`name`，以区分单击了哪个项目。

问题是 OnCreate 方法只被调用一次，所以标题总是设置为开始时单击的项目。

```
public void onCreate(Bundle si)
    {
        Intent intent = getIntent();
        heading = intent.getExtras().getString("name"); //this tells which item was clicked.
        TextView heading_txt = (TextView) findViewById(R.id.heading);
        heading_txt.setText(heading);
     } 
```

我试图`onResume()`调用这段代码，因为每次活动恢复时都会调用它。但是仍然`getIntent()`给出了`name`前一项中设置的旧值。

如何在其他活动中获取当前单击的项目意图值？

更新：

**报告活动代码：**

```
 public void showReport(View v) {
    String tag = v.getTag().toString();
    Intent i5 = new Intent(this, ReportsType.class);
    i5.putExtra("name", tag);
    startActivity(i5);

} 
```

其中`showReport()`方法被称为每个项目，您单击三个项目中的任何一个。

更新：

**goBack报告代码**

```
public void goBackReport(View v)
    {

    Intent intent = new Intent(ReportsType.this, Reports.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        startActivity(intent);
        finish();
    } 
```

**XML 按钮视图**

```
<Button
        android:id="@+id/entry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/btn_blue_xml"
        android:clickable="true"
        android:padding="8dp"
        android:onClick="goBackReport"
        android:text="Back"
        android:textColor="#ffffff"
        android:textSize="15dp" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:47:36.153

最后通过像这样在被调用的活动中设置旧的意图值来解决 -

```
@Override
    public void onNewIntent (Intent intent)
    {
        super.onNewIntent(intent);
        setIntent(intent);
    } 
```

`onResume()`然后在通话中获取旧的意图值-

```
@Override
    public void onResume()
    {
        super.onResume();
        Intent intent = getIntent();
        heading = intent.getExtras().getString("name");
        TextView heading_txt = (TextView) findViewById(R.id.heading);
        heading_txt.setText(heading);   
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:06:20.830

尝试第二次`Activity`

```
if (getIntent().getExtras() != null) {
        String  mstr = getIntent().getExtras().getString("yourkey");               
        } 
```

和你的代码

```
 Intent intent = getIntent();
        heading = intent.getExtras().getString("name"); //this tells which item was clicked.
        TextView heading_txt = (TextView) findViewById(R.id.heading);
        heading_txt.setText(heading); 
```

放在`onItemclick`不需要的地方`onCreate`

# opengl - OpenGL 二进制程序格式是否标准化？

> ID：15900161
> 
> 赞同：7
> 
> 时间：2013-04-09T11:03:19.807
> 
> 标签：opengl, binary, shader

我一直在搜索 OpenGL 二进制格式以及它们的实际含义/含义。到目前为止，我还没有取得太大的成功。我知道我可以按如下方式获取格式的数量和集合：

```
::glGetIntegerv(GL_PROGRAM_BINARY_FORMATS, &values[0]); 
```

，其中 values 是大小整数的 std::vector：

```
::glGetIntegerv(GL_NUM_PROGRAM_BINARY_FORMATS, &value); 
```

对于我机器中的驱动程序，这将返回一个二进制格式。这只是一个数字，否则对我来说毫无意义。

所以我的问题如下：

(1) 格式数字/代码代表什么？(2) 是否有标准的 ARB 二进制格式，或者它们都依赖于供应商？(3) 供应商之间是否有共同的格式？(4) 如果有多种格式，你应该如何选择它们？

我有一种模糊的感觉，我必须在给定的机器上预编译和缓存着色器才能利用这一点。我的意思是它不像 DX，您可以在其中将着色器编译器作为构建后事件运行并将它们打包在一起并在任何具有 D3D 的（Windows）机器上使用它们。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T11:22:50.293

> (1) 格式数字/代码代表什么？

它们代表唯一标识符。

> (2) 是否有标准的 ARB 二进制格式，或者它们都依赖于供应商？

它们都是特定于供应商的。

> (3) 供应商之间是否有共同的格式？

不。

> (4) 如果有多种格式，你应该如何选择它们？

You don't. You don't get a choice of formats. When you call [`glGetProgramBinary`](http://www.opengl.org/wiki/GLAPI/glGetProgramBinary), you get binary data in a particular format decided by the driver. When you [load that program later](http://www.opengl.org/wiki/GLAPI/glProgramBinary), you must pass that specific format with the binary data.

> I have a vague feeling I have to pre-compile and cache shaders on a given machine in order to take advantage of this.

Yes, that's the purpose of the feature: to allow you to cache shader compilation. But you must always make sure that your program will work if the driver's shader version *changes* (and therefore is different from when you created the cached version). So you'll still need to be able to rebuild the shaders from the textual form.

# c# - 如何将此字符串解析为数组？

> ID：15900162
> 
> 赞同：-1
> 
> 时间：2013-04-09T11:03:20.330
> 
> 标签：c#, arrays, string, parsing, indexing

如何用下面的格式将这个字符串解析为**数组**或**任何**可以通过索引访问每个字符串的东西？

```
"[\"string 1\",[\"string 2\",\"string 3\"],\"string 4\"]" // to array_1
"[[\"string 5\",\"string 6\",\"string 7\"],\"string 8\"]" // to array_2 
```

例子，`array_1[1][0] == "string 2"`还是`array_2[0][2] == "string 7"`
非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:10:10.410

我已经复制了您的代码并得到了预期的结果，我认为您的问题在于 array_2 在它的末尾有一个额外的括号。

```
var array_1 = ["string 1",["string 2","string 3"],"string 4"];
var array_2 = [["string 5","string 6","string 7"],"string 8"];

console.log(array_1[1][0]); // "string 2"
console.log(array_2[0][2]); // "string 7" 
```

你可以在这里看到这一切：

[http://jsfiddle.net/t7SDr/](http://jsfiddle.net/t7SDr/)

**编辑**

要在 C# 中执行此操作，您可以简单地执行以下操作：

```
string[] array_1 = {"string 1",{"string 2","string 3"},"string 4"};

var stringItem = array_1[1][2]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T11:11:08.183

您可以像这样定义和访问字符串数组

```
 //to define the string array
 string[] array_1 = new string[]
                                   {
                                       "string 1",
                                       "string 2",
                                       "string 3",
                                       "string 4"
                                   };

// To access the string using foreach loop

            foreach (string str in array_1)
                Console.WriteLine(str);

       // To access the string using index

    for (int i = 0; i < array_1.Length;i++ ) 

            Console.WriteLine(array_1[i]); 
```

# zend-framework2 - 如何更改数据库中选择列表值的格式

> ID：15900167
> 
> 赞同：1
> 
> 时间：2013-04-09T11:03:45.443
> 
> 标签：zend-framework2

我有一个我在创建公司报告时使用的公司列表作为选择列表。

我正在使用 [KEY] => [Value] 数组类型使用数据库值填充选择列表，它工作正常并且在 exchangeArray

```
\Zend\Json\Json::encode($morningreport->company) 
```

这就是选择列表值的处理方式。工作正常。

现在公司的值以这种格式存储[“2”，“1”]。

它是zend定义的方式。如果是这样，我该如何改变它。或任何转换为​​字符串或数组的方式。

我的要求是遍历这个值并返回基于这个“2”和“1”IDS 的名称。

注：2和1为公司IDS。并且选择列表被传递给数组，如：

```
'2' => 'companyA'.
'1' => 'companyB' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:09:38.117

所以终于找到了答案，

```
\Zend\Json\Json::encode($morningreport->company) 
```

将数组编码为 json 格式，所以在取回这个之后

```
$result = ["2"]
\Zend\Json\Json::encode($result); 
```

解码 jscon 格式，它将返回数组。

# java - 在一页上显示两个 JFreeCharts

> ID：15900169
> 
> 赞同：0
> 
> 时间：2013-04-09T11:04:03.887
> 
> 标签：java, pdf, graph, jfreechart

我使用 JFreeChart 在 PDF 上显示两个图形，但只有一个显示在底部，并且显示在底部。是否有示例代码说明如何在页面顶部显示一个图表并在底部显示另一个图表？谢谢。

# c# - 在多个 Web 浏览器上测试 WPF 简单应用程序

> ID：15900172
> 
> 赞同：1
> 
> 时间：2013-04-09T11:04:22.857
> 
> 标签：c#, asp.net, wpf, silverlight

我是 WPF/Silverlight 世界的新手。第一步，我开发了一个“Hello world”应用程序并简单地运行它，但问题是应用程序只能在 Internet Explorer 上成功运行。当我更改浏览器（如 chrome 或 firefox 等）时，应用程序会弹出一个保存窗口，这意味着浏览器无法理解文件类型。我想知道在不同的 Web 浏览器上顺利运行我的 WPF 项目所需的任何插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:20:13.630

IMO，您指的是 Silverlight 而不是 WPF WPF 应用程序是桌面应用程序，它们不是为浏览器制作的。

Silverlight 是跨平台的，跨浏览器。

您可以从这里下载并安装插件，
[http://www.microsoft.com/getsilverlight/Get-Started/Install/Default.aspx](http://www.microsoft.com/getsilverlight/Get-Started/Install/Default.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:08:02.680

我认为您正在寻找 Silverlight，而不是 100% 确定艰难

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:20:23.747

基于 WPF 浏览器的应用程序可以在 IE 和 firefox 网络浏览器中运行。可以使用 silverlight 来实现基于 WPf 浏览器的应用程序。但是 silverlight 是 WPF 框架的一个小子集。运行基于 WPF Web 浏览器的应用程序的机器必须安装 .Net 运行时环境。基于 WPF Web 浏览器的应用程序非常适合用于 Intranet 用途。

# android - 是否可以在启用/禁用任何位置提供程序并确定发生了什么操作时收到通知？

> ID：15900180
> 
> 赞同：10
> 
> 时间：2013-04-09T11:04:57.187
> 
> 标签：android, android-location

我希望在用户启用或禁用网络或 GPS 位置时收到通知，重要的是我希望知道他们更改了哪个以及如何更改。我有一个用于`android.location.PROVIDERS_CHANGED`广播意图的广播接收器，它正在接收正确的广播。

我现在需要尝试确定发生了哪些操作，即启用或禁用以及更改了哪个提供程序。我知道我可以保留每个提供者的状态，然后当我收到他们已更改的通知时，我可以弄清楚发生了什么变化，我正在寻找一种更“标准”的方法来执行此操作。广播意图似乎没有任何额外内容来指示哪个提供者已更改。

这是我目前拥有的代码。

```
 public class LocationProviderChangedReceiver extends BroadcastReceiver {
    private final static String TAG = "LocationProviderChangedReceiver";

    @Override
    public void onReceive(Context context, Intent intent) {
      if (intent.getAction().matches("android.location.PROVIDERS_CHANGED"))
      {
        Log.i(TAG,"Location Providers changed");
        Bundle bundle = intent.getExtras();
        if (bundle == null) {
          Log.d(TAG, "No extras data");
         } else {
           Log.d(TAG, "Bundle received of size " + bundle.size);
         } 
      }
    }
  } 
```

这是我的清单中的一小部分摘录

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

  <receiver 
    android:name=".LocationProviderChangedReceiver"
    android:exported="false">
    <intent-filter>
      <action android:name="android.location.PROVIDERS_CHANGED" />
      <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
  </receiver> 
```

如果广播中有一个额外的说明哪个提供者已更改以及它是启用还是禁用，这将是完美的。不幸的是，这种情况并非如此。有谁知道我可以在不维护自己的状态变量的情况下确定哪些状态发生了变化的任何机制。

在一个理想的世界里，我会不断地监控变化，但只是偶尔监听位置变化。我想避免不断监控位置变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-11T07:07:59.350

这对我有用：

将接收者添加到清单文件中：

```
<receiver
        android:name="com.eegeo.location.LocationProviderChangedReceiver">
        <intent-filter>
            <action android:name="android.location.PROVIDERS_CHANGED" />
        </intent-filter>
    </receiver> 
```

检查接收器中的两个位置提供程序：

```
public class LocationProviderChangedReceiver  extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {

        boolean anyLocationProv = false;
        LocationManager locationManager = (LocationManager) MyMainActivity.context.getSystemService(Context.LOCATION_SERVICE);

        anyLocationProv |= locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        anyLocationProv |=  locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        Log.i("", "Location service status" + anyLocationProv);

    }

} 
```

尽管由于显而易见的原因多次调用此接收器，但这会告诉您状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T11:32:17.117

我希望这不会与您的要求相矛盾

> 我知道我可以保留每个提供者的状态，然后当我收到他们已更改的通知时，我可以弄清楚发生了什么变化，我正在寻找一种更“标准”的方法来执行此操作。

...但我认为最好的“标准”和最灵活的方法是让您`LocationProviderChangedReceiver`实现[`LocationListener`](http://developer.android.com/reference/android/location/LocationListener.html)接口，然后实现`onProviderEnabled()`，`onProviderDisabled()`就像这样：

```
public void onProviderEnabled(String provider) {
  if(provider.equals(LocationManager.GPS_PROVIDER)){
    ...
  } else if (provider.equals(LocationManager.NETWORK_PROVIDER)){
    ...
  }
} 
```

请注意，`ACCESS_FINE_LOCATION`如果您还没有将权限添加到您的清单中，您应该这样做。此外，其他提供商（“网络”和“GPS”之外）可能会根据上下文应用，例如[`PASSIVE_PROVIDER`](http://developer.android.com/reference/android/location/LocationManager.html#PASSIVE_PROVIDER)甚至[`FUSED_PROVIDER`](https://github.com/android/platform_frameworks_base/blob/master/location/java/android/location/LocationManager.java#L116).

**更新的答案：**
如果您无法选择不断侦听位置变化，则[`LocationManager`](http://developer.android.com/reference/android/location/LocationManager.html)还知道[当前启用了哪个提供程序](http://developer.android.com/reference/android/location/LocationManager.html#isProviderEnabled%28java.lang.String%29)：

```
LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER); 
```

...这样您就可以将这些检查与您一起使用，`BroadcastReceiver`以避免手动持有任何启用/禁用的标志。[`android.location.GPS_ENABLED_CHANGE`](https://github.com/android/platform_frameworks_base/blob/master/location/java/android/location/LocationManager.java#L150)除此之外，您还可以尝试接收（和处理）一个意图。但是由于此意图隐藏在官方文档中，因此使用它可能不安全，如[this answer](https://stackoverflow.com/a/11398913/1140682)中所述。

**甚至另一种方法：**
Android 的默认设置切换小部件（你知道我的意思）通过订阅`android.location.PROVIDERS_CHANGED`意图（就像你做的那样）来显示 GPS 启用/禁用状态，以通过用户设置触发 GPS 状态请求：

```
@Override
public int getActualState(Context context) {
  ContentResolver resolver = context.getContentResolver();
  boolean on = Settings.Secure.isLocationProviderEnabled(
                 resolver, LocationManager.GPS_PROVIDER);
  return on ? STATE_ENABLED : STATE_DISABLED;
} 
```

（来自[官方来源](https://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/widget/SettingsAppWidgetProvider.java#L522)）。
您也可以将此方法应用于其他位置提供程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T07:40:42.980

感谢@usman 的回答，我们可以`extends`通过以下方式应用没有类的解决方案；

AndroidManifest.xml；

```
<receiver android:name="com.eegeo.location.LocationProviderChangedReceiver">
    <intent-filter>
        <action android:name="android.location.PROVIDERS_CHANGED" />
    </intent-filter>
</receiver> 
```

类（我从未测试过）；

```
public class LocationProviderChangedReceiver {

    private mLocationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);
    private BroadcastReceiver mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String ability = (isGPSProviderEnabled() && isNetworkProviderEnabled()) ? "CAN" : "CANNOT";
            Log.d("", "The location " + ability + " be caught in high accuracy!");
        }
    };

    public startProviderChangeObserving () {
        registerReceiver(mReceiver, new IntentFilter(LocationManager.PROVIDERS_CHANGED_ACTION));

    }

    public stopProviderChangeObserving () {
        unregisterReceiver(mReceiver);
    }   

    /**
    * Method to verify that the location providers wheter on or not on the device
    **/
    public boolean isGPSProviderEnabled() {
        return (Boolean) mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    }

    public boolean isNetworkProviderEnabled() {
        return (Boolean) mLocationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T11:13:03.503

在接收器上，您可以简单地检查启用了哪些提供程序：

```
LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE)
List<String> providers = lm.getProviders(true); 
```

通过这种方式，您可以获得所有启用提供程序。

# java - 移动二维数组中的元素 - Java

> ID：15900182
> 
> 赞同：0
> 
> 时间：2013-04-09T11:04:59.230
> 
> 标签：java, multidimensional-array

我正在寻找一种方法来上下移动二维数组中的所有元素，以便满足特定条件的元素留在数组的末尾。我的意思的简化示例：

一个用 1 填充的 2D 整数数组，有四个 0。

```
1 1 1 1 1  
1 1 1 1 0  
1 1 1 0 1  
1 1 1 1 1  
0 0 1 1 1 
```

我想要做的是通过移动其他元素来填充孔（零），最后留下零。期望的结果是：

```
1 1 1 1 1  
1 1 1 1 1  
1 1 1 1 1  
1 1 1 1 1  
1 0 0 0 0 
```

在我的项目中，我正在处理一个二维对象数组，其状态是决定移位的因素。我只是在寻找一个可以完成这个结果的基本算法。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:11:00.380

遍历数组并计数零。每次找到零时，将 1 添加到计数器并用 1 替换零。然后从数组的末尾到其开头，将 N 个位置替换为 0，其中 N 是零的总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:10:36.077

对第一个数组中的每个数组进行冒泡排序，并按您的顺序对它们进行排序

```
for (i=0; i<array1.length; i++){
   yourBubblesort(array1[i]);
} 
```

实现冒泡排序很容易，你必须在功课中做一些事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:18:38.553

试试这个方法

```
public void shiftZeros(int[] arr )
{
int count;
for(int j=0;j<arr.length-1;j++)
{
  if(arr[j]=0)
   {
    arr[j]=1;
    count++;
   }
}

for(int j=arr.length-1,i=1;i<count;i++,j--)
{
   arr[j]=0;
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T11:34:39.707

这是一种使用复制到新数组的方法

*   创建新数组以保存移位元素/最终结果
*   遍历数组
*   复制一个元素，女巫将被移动（满足条件）到新数组中的最后一个空闲位置
*   将不移动（不满足条件）的元素复制到数组中的下一个空闲位置

当元素即将遇到处理结束时，不会有重叠。

**编辑**

只是为了完整起见，这里是上面算法的一个实现

```
private E[][] shift(E[][] input) {
    int maxLen = get2DMaxLen(input);
    int i_next = 0, j_next = 0;
    int i_least = input.length-1, j_least = maxLen-1;
    E[][] actual = new E[input.length][maxLen];
    for(int i = 0; i < input.length; i++) {
        for(int j = 0; j < input[i].length; j++) {
            if(meetsCondition(input[i][j])) {
                actual[i_least][j_least--] = input[i][j];
                if(j_least == -1) {
                    j_least = maxLen-1;
                    i_least--;
                }
            } else {
                actual[i_next][j_next++] = input[i][j];
                if(j_next == input[i].length) {
                    j_next = 0;
                    i_next++;
                }
            }
        }
    }
    return actual;
} 
```

测试输入

```
0 1 1 0 1 
0 1 1 1 0 
1 0 1 0 1 
1 1 0 1 1 
0 0 1 1 1 
```

输出

```
1 1 1 1 1 
1 1 1 1 1 
1 1 1 1 1 
1 0 0 0 0 
0 0 0 0 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T11:35:15.187

**低效版本：**

*   遍历存储所有非 0 项的数组（例如，使用[queue ，可以使用](http://en.wikipedia.org/wiki/Queue_%28abstract_data_type%29)[LinkedList](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)进行模拟）。

*   再次迭代，只需将存储的项目一一拉入数组

迭代器通过类似的东西：

```
for (int i = 0; i < arr.length; i++)
for (int j = 0; j < arr[i].length; j++)
  ... 
```

**更（空间）效率更高的版本：**

同时遍历数组两次，读取每个值并将它们放在正确的位置。

伪代码：（希望足够可读）

```
while ahead.hasNext
  // skip all 0s
  do
    i = ahead.next
  while i == 0
  behind.writeNext(i)

// the rest must all be 0
while behind.hasNext
  behind.writeNext(0) 
```

我不能给你代码，因为我不能为你做所有的工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T11:42:43.977

为什么不对列进行降序排序，然后对每一行进行降序排序？有很多算法可以做到这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T12:28:52.040

对于上面的确切问题，解决方案可以是：

从两个指针开始，一个在数组的左上角，一个在右下角。让我们分别调用这些第一个和第二个指针。现在使用第一个指针逐行遍历数组。当您找到要放在末尾的元素（在这种情况下为“0”）时，请检查第二个元素指向的元素。如果第二个元素是 0，则递减第二个指针以指向二维数组中的倒数第二个元素。现在检查这个元素，如果这也是“0”，再次递减第二个指针，依此类推，直到达到“1”（必须在数组开头的元素）。然后交换两个元素。在任何时间点，如果指针相互交叉，则数组已按要求排序。

以下 java 代码将执行此操作：最初变量 endi 和 endj 指向最后一个元素（第二个指针），变量 i 和 j 指向第一个元素（第一个指针）。数组大小为 m X n。

```
for(i=0;i<m;i++)
    {
        for(j=0;j<n;j++)
        {
            if(a[i][j]==0)
            { 
                while(a[endi][endj]!=1 && i*m+j<endi*m+endj) //second part of the condition checks if i,j and endi,endj haven't crossed over
                {
                    endj--;
                    if(endj==-1)
                    {
                        endj=n-1;
                        endi--;
                        if(endi==-1)
                        {
                            disparr(a,m,n);
                            System.exit(0);
                        }
                    }
                }
                if(!(i*m+j<endi*m+endj))//if the pointer have crossed over
                {
                    disparr(a,m,n);
                    System.exit(0);
                }    
                int t=a[i][j];
                a[i][j]=a[endi][endj];
                a[endi][endj]=t;

            }
        }
    } 
```

对上述代码的其他改进可能是可能的，例如删除用于递减指向函数的指针并调用它的代码。但是代码可以正常工作。

# xpages - Dijit.MenuItem 和关联

> ID：15900183
> 
> 赞同：0
> 
> 时间：2013-04-09T11:05:03.073
> 
> 标签：xpages, dojo, menuitem

我的问题类似于那个： [Dijit Menu (bar) with link](https://stackoverflow.com/questions/6883680/dijit-menu-bar-with-link)

我正在使用 Dijit 菜单，如下所示：

```
<div data-dojo-type="dijit/Menu">
    <div id="menuItem" data-dojo-type="dijit/MenuItem">
        <a href="http://url.com">urlLink</a>
    </div>
</div> 
```

但是链接不起作用，因为它`dojo.stopEvent`在 _onClick() 中被阻止。

问题是：
如何删除 dojo.stopEvent 并使里面的链接`<div id="menuItem" data-dojo-type="dijit/MenuItem">`正常工作？

问题：
我需要放入`<div id=menuItem">`一些代码，它必须接收 onClick 事件。

*PS 原来这是 XPages 代码。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-17T12:25:02.380

好吧，我遇到了同样的问题，看到了这篇文章和相关的其他文章，但对“onclick”解决方案不满意：

*   它对键盘导航不起作用（对我来说）
*   它强加给声明区域中的添加脚本元素（onclick = ...），这不是我对不显眼的 JavaScript 所期望的

最后，我在 dojo 中进一步挖掘，并决定直接使用处理程序中第一个子节点的 href 属性。我的脚本部分（来自[dijit 菜单教程](http://dojotoolkit.org/documentation/tutorials/1.9/menus)）是：

```
<script>
    require([
        "dojo/dom",
    "dojo/parser",
    "dojo/dom-attr",
    "dojo/query",
        "dijit/registry",
        "dijit/WidgetSet", // for registry.byClass
        "dijit/Menu",
        "dijit/MenuItem", 
        "dijit/MenuBar",
        "dijit/MenuBarItem", 
        "dijit/PopupMenuBarItem",
        "dojo/domReady!"
    ], function(dom, parser, domattr, query, registry){
        // a menu item selection handler
        var onItemSelect = function(event){
            dom.byId("lastSelected").innerHTML = this.get("label");
            var achild = query("a", this.domNode)[0];
            if (achild != null) {
                var href = domattr.get(achild, "href");
                if ((href != null) && (href != '') && (href != '#')) {
                    window.location.href = href;
                }
            }
        };

        parser.parse();

        var setClickHandler = function(item){
            item.on("click", onItemSelect);
        };

        registry.byClass("dijit.MenuItem").forEach(setClickHandler);
        registry.byClass("dijit.MenuBarItem").forEach(setClickHandler);
    });
</script> 
```

这样我就不必更改类型菜单中的任何内容

```
<ul><li><a href="...">...</a></li></ul> 
```

在禁用 JavaScript 的情况下工作，并且在启用 JavaScript 时，链接可以在鼠标和键盘导航下正常工作。只是不要忘记body元素中的“class ='claro'”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:49:45.003

那这个呢：

```
<div data-dojo-type="dijit/Menu">
    <div id="menuItem" data-dojo-type="dijit/MenuItem" 
          onclick="window.location('http://url.com')">
        <a href="http://url.com">urlLink</a>
    </div>
</div> 
```

工作jsfiddle：

[http://jsfiddle.net/KuyYX/](http://jsfiddle.net/KuyYX/)

# c# - WPF 自定义 TextTrimming

> ID：15900194
> 
> 赞同：4
> 
> 时间：2013-04-09T11:05:34.013
> 
> 标签：c#, .net, wpf, trim

我需要做一个特殊的文本修剪。可以说我的字符串是：`abcd`

默认修剪会给我这个：`ab...`

但我需要它。`a..d`

知道如何实施吗？

目前我正在使用

```
<TextBlock Text="abcdLongWord" TextTrimming="CharacterEllipsis"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:42:24.590

我过去也有过这种担忧，并编写了自己的转换器来处理 Kearning 的过程。

转换器类

```
internal class KearningConverter : IValueConverter {

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
        string result = value.ToString();

        try {
            int length = int.Parse(parameter.ToString());

            if (result.Length > length) {
                result = result.Substring(0, length) + "...";
            }
        } catch {
            result += "...";
        }
        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
        throw new NotImplementedException();
    }
} 
```

Xaml 标记

```
xmlns:conv="clr-namespace:project.converters;assembly=project"

<Window.Resources>
<conv:KearningConverter x:Key="kearnConverter"/>
</Window.Resources>

<TextBlock Text="{Binding Path=AttributeName, Converter={StaticResource kearnConverter}, ConverterParameter=3}"/> 
```

通过这种方式，您可以根据 UI 布局的不同要求来实现多种学习。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-09T11:25:07.627

未对此进行测试，但取决于您实际需要的内容：

```
string test = "abcdefghij";
  int nCharNum = test.Length();
  test.Remove(2, nCharNum - 1); // this will get you "aj"
  //or
  test.Remove(2, 3); // this will result in "adefg..."
  //or
  test.Remove(2, nCharNum - 1);
  test.Insert(2, "..") // this will get you "a..j" 
```

希望这可以帮助。（索引可能需要一些修正）

# google-apps-script - 减去日期谷歌电子表格脚本

> ID：15900198
> 
> 赞同：1
> 
> 时间：2013-04-09T11:05:49.760
> 
> 标签：google-apps-script, google-sheets

我有一个似乎很小的问题......

我在 Google 电子表格中设置了一个脚本，它返回当前的月份和年份并将其放入一个单元格中。（这构成了更大工作表的一部分，因此我确实需要在脚本中执行此操作）。我似乎无法显示上个月，这是我想要的，因为这是上个月的报告。

因此，例如，如果我想在 2013 年 3 月报告，我如何让单元格使用当前日期显示这个，或者有更好的方法来做到这一点？

我目前正在执行此操作，但由于在第 9 行的参数列表之后出现错误“丢失）”，因此计算陷入困境

```
function myFunction() {
var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();

var today_date = Utilities.formatDate(new Date(), "GMT", "MMMM yyyy");

var date = sheet.getRange("A2");
date.setValue(today_date);

date.setFormula("=EDATE("today_date",-1)");

} 
```

或者我可以通过在 Utilities.formatDate(new Date(), "GMT", "MMMM yyyy");

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:16:43.440

正确的 Javascript 将是：

`date.setFormula("=EDATE(" + today_date + ",-1)");`

但不幸的是，这在电子表格方面不起作用。你需要这样的东西才能使它工作：

`date.setFormula('=EDATE(VALUE("1 ' + today_date + '");-1)');`

并且大概您希望将其格式化为 MMMM yyyy：

`date.setFormula('=TEXT(EDATE(VALUE("1 ' + today_date + '");-1);"MMMM yyyy")');`

话虽如此，这似乎确实有点令人费解。你可以用 Javascript 做到这一点：

```
function monthOffset(date, months) {
  //returns the first day of the month with the required months offset
  var result = new Date();
  result.setFullYear(date.getFullYear(), date.getMonth() + months, 1);  
  return result;
} 
```

然后在你的主要功能中使用：

`var calc_date = Utilities.formatDate(monthOffset(new Date(), -1), "GMT", "MMMM yyyy");`

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

# javascript - Windows Metro 应用程序 标签

> ID：15900202
> 
> 赞同：1
> 
> 时间：2013-04-09T11:05:59.640
> 
> 标签：javascript, windows, microsoft-metro, winjs

我正在开发一个 javascript Windows 商店应用程序。

在显示的 html 中有一些嵌套`ul`和`li`标签，如下所示：

```
<ul>
    <li>
        <a href="html1.html#anchor">
            <strong>Link1</strong>
        </a>
        <ul>
            <li>
                <a href="html2.html#anchor">Link2</a>
                <ul>
                    <li>
                        <a href="html3.html#anchor">Link3</a>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

标签的实际数量`li`约为 130，但这是最大嵌套级别。在大多数情况下，一旦我尝试显示此内容，应用程序就会崩溃并出现访问冲突异常（无堆栈跟踪）。如果我只是`li`用它们的内容替换所有标签，那么应用程序运行没有问题。

由于内容是动态的并且我无法控制网页中的标签 - 因此我不能保证其他标签不会发生这种情况，因此知道可能导致这种情况的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:24:22.563

好的，问题与[地铁的安全限制](http://msdn.microsoft.com/en-us/library/windows/apps/hh465380.aspx)有关。显然，在我调用来处理内容的函数中的某个地方执行了一些“不安全”的代码。我通过像这样包装函数来解决这个问题`MSApp.execUnsafeLocalFunction(myFunction)`。至于为什么这会导致访问冲突错误超出了我的范围。

我希望这可以帮助任何遇到类似问题的人，因为调试这样的事情可能会很痛苦。

# linux - Linux：手动减小堆大小

> ID：15900203
> 
> 赞同：2
> 
> 时间：2013-04-09T11:06:06.157
> 
> 标签：linux, memory

我正在尝试模拟内存耗尽。所以这就是我的想法：

1.  关闭提交。
2.  减少可用堆，以便更快地发生内存耗尽。
3.  运行被测程序。

我的问题是 2：是否有减少内核将分配的堆大小的技巧？我可能可以编写另一个分配大量 RAM 的程序，但可能有更聪明的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T11:48:51.150

`ulimit`您可以使用系统调用删除最大进程内存大小。该命令可从 shell 获得。有问题的选项是`-v`（最大内存大小），例如，要将进程限制为最大 2GB，您可以这样做：

```
ulimit -v 2097152 
```

然后你从那个 shell 启动进程。

如果您使用`-H`ulimit 选项，那么它会设置一个硬限制，一旦设置就无法增加（root 可以增加限制）。

如果你想从程序中控制，你可以使用`setrlimit`系统调用，方式如下：

```
#include <sys/types.h>
#include <sys/resource.h>

struct rlimit the_limit = { 2097152 * 1024, RLIM_INFINITY };
if (-1 == setrlimit(RLIMIT_AS, &the_limit)) {
  perror("setrlimit failed");
} 
```

这将软限制设置为`2GB`，您可以通过更改`RLIM_INFINITY`值来设置硬限制。请注意，如果您是 root，则只能增加硬限制。

此限制适用于可用于进程的内存总量，而不仅仅是可用作堆的内存。

可以使用该`-d`选项限制堆内存。`setrlimit`调用的等效名称是`RLIMIT_DATA`。此限制仅适用于内存分配 - 例如 malloc、mmap、静态数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T11:48:37.293

如果使用`ulimit -d`，您可以限制用于堆分配（以及全局/静态变量）的数据段大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T15:48:39.607

要模拟内存耗尽，您还可以使用 mmap 来映射大内存段并确保将它们“锁定”在内存中。请参阅 mmap 手册页，了解如何将页面锁定在内存中。这样它们就不会被交换，并且可用内存将减少。

如果对大型连续 mmap 段的请求失败，您可能需要请求几个小段（例如 256KB）。此外，如果你想一路走下去，你可能需要让你的 mmap 进程对 Linux“OOM 杀手”免疫（通过将 OOM prio 设置为 -17）。否则，当 Linux 发现系统的可用内存过低时，它可能会选择并杀死正在调用 mmap 的进程，以释放内存。

# ruby-on-rails - 使用链接 Nokogiri 包裹特定文本

> ID：15900204
> 
> 赞同：0
> 
> 时间：2013-04-09T11:06:09.957
> 
> 标签：ruby-on-rails, ruby, nokogiri

我正在使用`Nokogiri`并且无法弄清楚如何使用我提供的链接来包装特定单词。

我有`<span class="blah">XSS Attack document</span>`

我想改成哪个

`<span class="blah"><a href="http://blah.com">XSS</a> Attack document</span>`

我知道`.wrap()`Nokogiri 中有一个，但它似乎不能只包装特定的`XSS`文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:21:06.933

通过显式创建和添加新节点

```
require 'nokogiri'

text = '<html> <body> <div> <span class="blah">XSS Attack document</span> </div> </body> </html>'
html = Nokogiri::HTML(text)

# get the node span
node = html.at_xpath('//span[@class="blah"]')
# change its text content
node.content = node.content.gsub('XSS', '')

# create a node <a>
link = Nokogiri::XML::Node.new('a', html)
link['href'] = 'http://blah.com'
link.content = 'XSS'

# add it before the text
node.children.first.add_previous_sibling(link)

# print it
puts html.to_html 
```

通过使用`inner_html=`

```
require 'nokogiri'

text = '<html> <body> <div> <span class="blah">XSS Attack document</span> </div> </body> </html>'
html = Nokogiri::HTML(text)

node = html.at_xpath('//span[@class="blah"]')
node.inner_html = node.content.gsub('XSS', '<a href="http://blah.com">XSS</a>')

puts html.to_html 
```

在我们的案例中，这两种解决方案都可以。但是在遍历节点树时，`inner_html=`并不是最好的，因为它会删除所有子节点。因为它删除了所有节点子节点，所以它不是性能方面的最佳选择，当您只需要添加一个节点子节点时。

# operating-system - 在基于 vortex86 的设备上安装 WinCe 6.0 os

> ID：15900209
> 
> 赞同：0
> 
> 时间：2013-04-09T11:06:30.287
> 
> 标签：operating-system, windows-ce, builder, platform

我需要在 Vortex86 设备上安装 WinCe 6.0，然后向其写入应用程序。

我使用了 Platform Builder 并基于 Vortex86 BSP 构建了操作系统。如何将它安装在基于 Vortex 的设备上？（它有 USB 并且我有钥匙上的磁盘可以安装在上面）

如何使用 VS2005 连接到它并在其上运行应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:31:46.770

这里有两个单独的问题。

首先，“安装”CE 取决于使用的引导加载程序。您需要将 NK.BIN 放在引导加载程序正在查找的任何位置。您也许可以使用[`diskprep`](http://archive.msdn.microsoft.com/DiskPrep)使 USB 设备可启动并直接从中运行映像。也许它有内部存储并用于[`loadcepc`](http://msdn.microsoft.com/en-us/library/aa448680.aspx)加载 NK.bin。这是我使用的 Vortex86 设备的两种操作方式，但您使用的方式我们只能猜测。

至于连接和调试应用程序，已被多次询问和回答。 [这里只是其中之一](https://stackoverflow.com/questions/6127349/connecting-to-wince-device-from-visual-studio)。

# search - SharePoint 2013 搜索结果 Web 部件未显示所有结果

> ID：15900218
> 
> 赞同：7
> 
> 时间：2013-04-09T11:06:54.410
> 
> 标签：search, sharepoint-2013, sharepoint-search

我将标准搜索结果 Web 部件添加到空页面布局。我单击“更改查询”，然后添加我想要的查询。搜索结果预览显示 179 个结果。完美，正是我想要的。我单击“确定”、“应用”，然后发布页面。现在它只显示 7 个结果。我没有在搜索结果 Web 部件上配置任何其他内容。

剩下的 172 个结果去哪了？任何建议表示赞赏:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-26T03:46:00.583

[http://msdn.microsoft.com/en-us/library/office/jj687488.aspx](http://msdn.microsoft.com/en-us/library/office/jj687488.aspx)

我遇到了同样的问题，结果是搜索结果 web 部件错误地修剪了被认为是重复的结果。

我通过将**TrimDuplicates**设置为*false*来解决此问题。去做这个：

*   导出 Web 部件，
*   在**DataProviderJSON**属性中将**TrimDuplicates**更改为*false ，并且*
***   将 Web 部件添加回您的页面。**

 **希望能帮助克里斯托弗·斯科特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:53:30.097

相信它是一个内容搜索 webpart，看看这个[博客](http://www.wonderlaura.com/Lists/Posts/Post.aspx?ID=185)

作者在其中提到了类似的内容，您可以设置要在 Web 部件中显示的默认项目数。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T05:14:40.360

这可能是删除您的结果的结果。

您可以使用 REST API 并设置 CollapseSpecification 对其进行测试。

要在搜索 GUI 中更改它，您必须导出搜索结果 web 部件，编辑 xml 并在添加 web 部件下上传 xml。webpart 将显示在“Imported Webparts”下。添加 web 部件，然后将搜索框和优化器 web 部件重新连接到新的搜索结果 web 部件（即使您删除了旧的 web 部件，您也需要这样做）。在此之后它将工作，但不要更改 GUI 中 Web 部件上的任何设置，然后设置将被覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-04T17:43:15.760

当您 `'` 在查询模板中使用 a 而不是 a`"`来构建字符串时，我已经看到了这一点。( `field1:"match this"` vs `field1:'match this'`) 查询生成器会提供结果，但是当嵌入到 Web 部件或页面片段中时，我们不会得到任何结果。我的作为片段 webpart 嵌入到页面中，当我查看调试器时，我可以看到一些 webpart 正在使用`"` ，它们被转换为，`\&amp;quot;` 而那些不起作用的变成了一些 Unicode 等价物，例如`\u00`...。

更改要使用的 webpart 片段`\&amp;quot;` 效果很好。**

# java - 使用多个视图填充 JList

> ID：15900220
> 
> 赞同：0
> 
> 时间：2013-04-09T11:06:57.020
> 
> 标签：java, swing, jlist, defaultlistmodel

我有以下问题：
我想用“Worker”类填充几个 JList。在 Worker 类中，有一个 WorkerType 字段（一个 Enum）。每个 View 的 ListModel 应该是相同的 Type 和相同的 Instance，因此当一个 Worker 在一个 View 中被删除时，它不应该再在其他 View 中可见。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:17:34.670

使用单列 JTable 可能更容易。JTable 支持过滤，因此可以创建每个视图以仅显示特定的工作人员类型。

阅读 Swing 教程中有关[排序和过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)的部分以获取更多信息。

# android - VideoView 无法播放更高比特率的视频流

> ID：15900222
> 
> 赞同：0
> 
> 时间：2013-04-09T11:07:01.893
> 
> 标签：android, android-videoview, http-live-streaming

我正在尝试使用 android VideoView 播放 HLS（Http Live Streaming）视频流。

Android VideoView 正在正确播放较低比特率（比特率大约 200 到 700 kbps）的视频流，但是当我从较低比特率切换到较高比特率（如 1 mbps 或更高）时，视频视图无法正常播放视频并且视频卡住并且只有听到音频。

这是视频视图的问题吗，我已经检查了差异。视频流，我看到了相同的结果。

安卓版本：ICS-4.0.4。

# vb.net - VB.NET 在文本文件的指定行后添加文本

> ID：15900225
> 
> 赞同：0
> 
> 时间：2013-04-09T11:07:20.380
> 
> 标签：vb.net

如何使用 vb.net 在文本文件的指定行之后（或之前）添加文本？
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:55:23.883

要将第 5 行之后的文本添加到文本文件，只需调用：

```
AppendAtPosition("C:\Temp\test.txt", 5, "contenttoappend") 
```

要将第 5 行之前的文本添加到 Textfile 只需调用

```
AppendAtPosition("C:\Temp\test.txt", 4, "contenttoappend") 
```

需要此功能：
如果文本文件的行数少于您的预期，则内容将添加到最后一行之后。

```
Private Sub AppendAtPosition(ByVal ltFilePath As String, ByVal liAppendLine As Integer, ByVal ltAppendLine As String)

    Dim ltFileContents As String = ""
    Dim lReader As StreamReader = New StreamReader(ltFilePath)
    Dim liRow As Integer = 0

    While Not lReader.EndOfStream
      ltFileContents &= lReader.ReadLine
      If liRow = liAppendLine Then
        ltFileContents &= ltAppendLine
        Exit While
      End If
      liRow += 1
    End While
    If liAppendLine >= liRow Then
      ltFileContents &= ltAppendLine
    End If
    File.WriteAllText(ltFilePath, ltFileContents)
End Sub 
```

# c# - DateTime.ParseExact FormatException 字符串未被识别为有效的 DateTime

> ID：15900226
> 
> 赞同：9
> 
> 时间：2013-04-09T11:07:20.417
> 
> 标签：c#, .net-4.0

我完全被这个难住了。据我所见，我读过的 SO 上的文档和其他帖子说这应该可行。我一定错过了一些愚蠢的东西，但我就是看不到它。

我收到 FormatException 消息“字符串未被识别为有效日期时间”。在以下代码行：

```
return DateTime.ParseExact(value, DateFormat, null,
                           DateTimeStyles.AllowWhiteSpaces | DateTimeStyles.AssumeUniversal); 
```

*   `value`是`"11/04/2013"`
*   `DateFormat`是`"dd/MM/yyyy"`
*   现在的文化是`en-GB`
*   我尝试了各种变体，`DateTimeStyles`但没有效果。

我最初的意图是格式`ddd, dd/MMM/yyyy`，但这也不起作用（该实例中的值是`Tue, 30/Apr/2013`）

我还尝试通过传入`new CultureInfo("en-GB")`而不是`null`

我还将代码提取到它自己的控制台应用程序中，以查看环境是否有不同（ASP.NET MVC 3）

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Text;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var DateFormat = "dd/MM/yyyy";
            var value = "30/04/2013";
            var culture = new CultureInfo("en-GB");
            var result = DateTime.ParseExact(value, DateFormat, culture,
                           DateTimeStyles.AllowWhiteSpaces | DateTimeStyles.AssumeUniversal);
            Console.WriteLine("\"{0}\" as \"{1}\" ==> {2}", value, DateFormat, result);
            Console.ReadKey();
        }
    }
} 
```

这仍然给了我同样的错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T11:19:48.933

这行得通吗

```
 string myDate = "30-12-1899 07:50:00:AM";
DateTime dt1 = DateTime.ParseExact(myDate, "dd-MM-yyyy hh:mm:ss:tt", 
                                           CultureInfo.InvariantCulture) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-18T13:39:09.033

```
string myDate = "30-12-1899 07:50:00:AM";
DateTime dt1 = DateTime.ParseExact(myDate, "dd-MM-yyyy HH:mm:ss:tt",  
                                           CultureInfo.InvariantCulture); 
```

请注意使用 HH（24 小时制）而不是 hh（12 小时制），以及 InvariantCulture 的使用，因为某些文化使用斜线以外的分隔符。

例如，如果文化是 de-DE，则格式“dd/MM/yyyy”将期望句点作为分隔符 (31.01.2011)。

# java - Hibernate：如何从“一”端删除“多”端的一对多关系中的实体

> ID：15900228
> 
> 赞同：1
> 
> 时间：2013-04-09T11:07:31.880
> 
> 标签：java, hibernate, orm, foreign-keys, relational-database

我注意到 Hibernate 不允许删除一对多关系中的实体。我有两个表（和实体），公司和员工。
我想使用以下代码删除员工：

```
..
company.getEmployees().remove(myEmployee); //employees is a collection in Company, it is  mapped as a one-to-many relationship (@OneToMany)
sessionFactory.getCurrentSession().merge(company); 
```

您知道如何强制删除吗？或者至少得到一个例外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:15:08.507

是的，默认情况下不删除。但是您可以使用[orphanRemoval = true 属性](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch11.html#example-one-to-many-with-orphan-removal)`@OneToMany`映射关系，以便自动删除：

```
@OneToMany(cascade=CascadeType.ALL, orphanRemoval=true) 
public Set<Employee> getEmployees() { return employees; } 
```

# sql - SQL::Abstract 使用选择查询生成插入

> ID：15900230
> 
> 赞同：2
> 
> 时间：2013-04-09T11:07:35.803
> 
> 标签：sql, perl, sqlite, sql-generation

`insert into table1(id, text) select (max(id)+1), "Something" from table1`

如何使用 SQL::Abstract 或 SQL::Abstract::More 生成此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T19:06:20.493

你可以这样做：

```
use strict;
use warnings;
use SQL::Abstract;

my $sa = SQL::Abstract->new;
my $select = $sa->select('table1', "MAX(id) + 1, 'Something'");
my $full_sql = "INSERT INTO table1 (id, text) $select"; 
```

但实际上，你为什么要这样做？您的示例很简单，正如其他人所指出的，仅编写 SQL 会更好。如果您打算将“某物”作为变量，则可以这样做：

```
my $new_id = $sa->select('table1', 'MAX(id) + 1');
my $data = {
   id => \["($new_id)"],
   text => $some_value_from_elsewhere
};
my ($sql, @binds) = $sa->insert('table1', $data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:09:03.710

正如 Rachcha 所指出的，您的 SQL 语句包含一些缺陷。我假设你正在尝试类似的东西

```
insert into table1(id, text) values((select (max(id)+1) from table1), "Something") 
```

如果您想将新数据添加到具有唯一 ID 的 table1 中，您真的应该考虑在数据库中的 id 字段中添加主键。

**更新的答案**

旧的 anwser**确实**创建了一个关于数据和语法的有效 SQL 语句，但是 DBI 中的*准备*和*执行*函数对这些值做了一些魔术。

如果我像这样运行查询：

```
my $query = "insert into table1 values((select (max(id)+1) from table1), 'Something')";
$dbh->do($query); 
```

查询将在执行时保持原样。当我改为使用*prepare*和*execute*时，DBI 会自动将值放在单引号之间，例如 'this'，这会导致：

```
insert into table1(id, text) values('(select (max(id)+1) from table1)', 'Something'); 
```

显然，这会将值打印为文本（如果这是有效的数据类型）。在我看来，这并不意味着从代码生成的查询是错误的，而不是来自 DBI 的不需要的引用。如果可以删除它们，我找不到答案。问题是 DBI 是否支持 insert ... select 语句。否则，您将无法对这些查询使用 SQL::Abstract（或准备/执行）。

只要您的数据库没有可能导致重复的多个事务，您就可以将其构建为两步火箭。

```
my $select_stmt = $sql->select('table1', '(max(id)+1)'):
# Prepare with $stmt
# Fetch your result and declare $max_id, e.g.
my $sth = $dbh->prepare($select_stmt);
$sth->execute();

my $max_id = 0;
my @max_id_arr = $sth->fetchrow_array();
$max_id = $max_id_arr[0];

die($max_id . " is 0") unless($max_id);

my %data = (
    id => $max_id,
    text => 'Something',
);

my($insert_stmt, @insert_bind) = $sql->insert('table1', \%data); 
```

**旧答案**

但是，要回答您的问题，这应该可以解决问题：

```
my $max_id = $sql->select('table1', 'max(id)+1');
my %data = (
    id => "($max_id)",
    text => "Something",
);
my($stmt, @bind) = $sql->insert('table1', \%data);

printf("My SQL statement was %s\nThe values was %s\n", $insert_stmt, join(", ", @insert_bind)); 
```

这将打印

> 我的 SQL 语句是 INSERT INTO table1 ( id, text) VALUES ( ?, ? ) 值是 (SELECT max(id)+1 FROM table1)，Something

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:51:06.797

虽然我在代码中大量使用 SQL::Abstract，但我不会在您的示例中推荐它。主要是因为如果您直接编写 SQL 代码，它有时更具可读性和可维护性。并且因为您必须确保插入字段的顺序与选择字段的顺序完全匹配。

但是，您可以使用该`$sql->where()`方法从您的选择查询中提取 where-part，如果您必须：

```
 my $stmt1 = <<'END_SQL';
    INSERT INTO table1(id, text) 
    SELECT (MAX(id)+1) id, 'Something' text
    FROM table1
    END_SQL

    my ($stmt2,@binds) = $sql->where( key1=>$value1, key2=>$value2 ); 
```

然后简单地连接两个 SQL 语句。

# java - 使用哪种模式来创建具有不同参数的多个版本的对象？

> ID：15900233
> 
> 赞同：1
> 
> 时间：2013-04-09T11:07:45.583
> 
> 标签：java, design-patterns

我的应用程序通过将“服务请求”对象传递给该服务来通过 PUT 调用其他一些服务。但是，我们需要与一些新服务的集成来维护 3 个不同版本的服务请求。我查看了 wikipedia 和其他几个站点中的 Builder Pattern 文档，但找不到任何东西可以确认我可以在我的用例中使用 builder 模式。

我们需要的三个版本的服务请求对象是：

```
Version 1:

{
  id: "SomeGlConsumer",
  parameters: {
    m_id: 44551,
    m1_id: 695831032,
    r1: "EU",
    r2: "xyz",
    o1: 30,
    l1: 130,
    g1: "alksja",
    g2: 75,
    g3: "akjsa",
    g4: 2040,
    p1: "aks;alksa" 
    c1: "http:/xyz.com/services/gl"
  }
}

version 2:

{
  id: "SomeGlConsumer",
  parameters: {
    m1: 44551,
    m2: 695831032,
    r1: "EU",
    r2: "xyz",
    o1: 30,
    l1: 130,
    g: [
      {
        g1: "lksaskasa",
        g2: 228,
        g3: "alksjajslkajs",
        g4: 8400,
        p1: "kjsasjajsjak" 
     },
     {
       g1: "aslalsalksa",
       g2: 396,
       g3: "ajksaj",
       g4: 6350,
       p1: "akjsasa" 
     },
     {
       g1: "ajsajsa",
       g2: 397,
       g3: "aslalksa",
       g4: 6350,
       p1: "lkasal" 
     }
   ],
   c1: "http://abc.com/services/gl"
 }
}

version 3:

{
  c1: "Contribution Profit",
  c2: "http://abc.com/services/notifySetupStatus",
  a1:834,
  c3: {
    l1: 03/30/2013
  },
  m: {
    m1: 44551,
    m2: 695831032,
    r1: "EU",
    r2: "haasla",
    s1: "ES",
    o1: 30,
    l2: 130
  },
  g: [
    {
      g1: "aasassla",
      g2: 228,
      g3: "lkaskaskja",
      g4: 8400,
      p1: "ls;aksas",
      p2: "alsalska"  (Optional)
    },
    {
      g1: "aasassla",
      g2: 228,
      g3: "lkaskaskja",
      g4: 8400,
      p1: "ls;aksas",
    },
    {
      g1: "aasassla",
      g2: 228,
      g3: "lkaskaskja",
      g4: 8400,
      p1: "ls;aksas",
    }
  ],
  xyzservice_config: [ # service specific bucket
    {
      g1: "alksaks",
      c1: "kaskas" 
    },
    {
      g1: "akslaksa", 
    },
    {
      g1: "aslaksa",
    },
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:05:45.700

我已经实现了一些用 REST 接口包装的 API。对我来说最好的解决方案是使用命令模式。您可以将所有参数放在一个表中，并将其放在命令对象中。

我会做一个命令对象，其中包含一个版本属性、一个 Id 属性和一个 HashMap 或 Hashtable 来保存您可能成为的所有不同类型的参数。你甚至可以用某种 JSON 对象替换这个 hashMap。

使用这种结构，您总是很灵活。它在具有多种方法和大量不同数据结构的系统中非常适合我。

# c++ - C++11 是否要求向量 将 resize() 中的元素归零？

> ID：15900235
> 
> 赞同：5
> 
> 时间：2013-04-09T11:07:49.837
> 
> 标签：c++, performance, vector, c++11

这个问题是关于 new[] int 和 new [] int() 在语义和性能上的差异，以及在向 allocator_traits::construct() 添加 ctor 参数的完美转发时可能无意中创建的从第一个措辞到第二个措辞的变化。这个问题不涉及一个非常明显的问题，即默认 ctor 在由向量的 resize() 构造的所有新元素上运行。

对我来说，在调整大小时清除内置类型向量的元素似乎是一种浪费。但是 VS2012 的实现使得 resize(n) 以及因此带有 count 参数的构造函数实际上将分配的值数组设置为 0。

我还在标准中找到了对此的支持（[http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3485.pdf](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3485.pdf)），但我认为它可能是一个错误在那里，因为它依赖于最近涉及完美转发的条款：

第 507 页：

```
template <class T, class... Args>
static void construct(Alloc& a, T* p, Args&&... args); 
```

5 效果：调用

```
::new (static_cast<void*>(p)) T(std::forward<Args>(args)...). 
```

并且由于 new int() 必须根据同一文档第 191 页上的第 11 条将值设置为 0，因此向量中的浪费实现是正确的。

问题是标准提交是否真的希望构造调用的空参数包导致行为从默认构造更改为基本类型的值构造。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T11:13:26.573

不，这不是一个错误。

该标准的先前版本`resize(n)`创建了一个元素，然后将其复制到向量中的所有新位置。新的措辞是故意允许不可复制但只是可构造的类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T11:13:51.343

容器从不保存未初始化的对象是一个不变量。这意味着任何增加容器大小的东西都*必须*以某种方式初始化所有新元素。这是一个特性，而不是缺陷——访问未初始化的值是未定义的行为，如果某些值未初始化，您将无法重新分配（或插入）。例如：

```
std::vector<int> v;
v.resize( 20 );
v.insert( v.begin(), 1 ); 
```

`resize` 如果没有初始化它创建的元素，最后一行将导致未定义的行为。

# javascript - javascript 对象原型 this reference

> ID：15900237
> 
> 赞同：2
> 
> 时间：2013-04-09T11:07:52.217
> 
> 标签：javascript, object, this

```
var x = (arg1, arg2) {
  this.y = arg1;
  this.z = arg2;
}

x.prototype.a = function() {
  var self = this;
  some_obj1.on('data', function() {
    self.y = 'new y value';
  });
}

x.prototype.b = function() {
  var self = this;
  some_obj2.on('data', function() {
    self.z = 'new z value';
  });
} 
```

有没有办法将 self 声明为实例变量（显然不使用'this'），这样它就不需要在每个函数中声明？例如，'a' 的声明将是：

```
x.prototype.a = function() {
  ob2.on('data', function() {
    self.z = 'some new value';
  });
} 
```

希望这个例子足够清楚，它没有经过测试（在提问时即时编写）和更多的伪代码，但应该明白这一点..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:18:33.880

最好的办法是部分应用参数。下面是较新的跨浏览器实现`Function.prototype.bind`。`project.bind`, 使用下面的实现，`Function.prototype.bind`如果它可用，将使用原生，如果原生不可用，将使用自定义实现。

**更新** 我创建了一个工作[Fiddle](http://jsfiddle.net/alexflav23/7Q92R/6/)。

```
project = {};
project.bindJs_ = function(fn, selfObj, var_args) {
  if (!fn) {
    throw new Error();
  }

  if (arguments.length > 2) {
    var boundArgs = Array.prototype.slice.call(arguments, 2);
    return function() {
      // Prepend the bound arguments to the current arguments.
      var newArgs = Array.prototype.slice.call(arguments);
      Array.prototype.unshift.apply(newArgs, boundArgs);
      return fn.apply(selfObj, newArgs);
    };

  } else {
    return function() {
      return fn.apply(selfObj, arguments);
    };
  }
};
// A router for the native Function.prototype.bind
project.bindNative_ = function(fn, selfObj, var_args) {
  return /** @type {!Function} */ (fn.call.apply(fn.bind, arguments));
};

   project.bind = function() {
       if (Function.prototype.bind &&
           Function.prototype.bind.toString().indexOf('native code') != -1) {
           project.bind = project.bindNative_;
       } else {
           project.bind = project.bindJs_;
       }
       return project.bind.apply(null, arguments);
    }; 
```

**现在你可以这样做：**

```
x.prototype.a = function() {
  ob2.on('data', project.bind(function() {
    // the this. object inside the function will now point to x.
    this.z = 'some new value';
  }, this, any, argument, you, want, to, pass));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:19:50.320

不，你不能。您需要以某种方式修改范围链以避免使用`this`。一个稍微干净的方法是使用[`Function#bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)来指定`this`.

```
x.prototype.a = function() {
  ob2.on('data', function() {
    this.z = 'some new value';
  }.bind(this));
} 
```

# css - 如何使用 css 而不是整个模型/菜单从菜单/模型中更改 1？

> ID：15900238
> 
> 赞同：0
> 
> 时间：2013-04-09T11:07:56.087
> 
> 标签：css

以下代码从我们的数据库中获取我们的类别。我们有一个名为：销售！但是所有的颜色都是一样的。我的问题是，我怎么能对我的 .css “说”他只需要改变颜色：SALE！销售 id 为 0，Apple 1、Samsung 2 等...

```
 <div id="maincontainer">
        <div id="menu">

            <h3><center><b>Categorieën</center></b></h3>
            <hr width="100%">
            <h7><a href="/Categorie/cat/0">SALE!</a></h7><br />
            <h7><a href="/Categorie/cat/1">Htc</a></h7><br />
            <h7><a href="/Categorie/cat/2">Apple</a></h7><br />            
        </div>
  </div> 
```

所以：

> 分类
> 
> 1.  销售！<<<颜色橙色
> 2.  苹果
> 3.  三星

至今：

```
div#menu{float:left;width: 130px; min-height:inherit;background-color: #ffffff; border-width: .1em; border-style:solid; border-color: #0404B4; text-align:center; margin:0; padding:0px; } 
```

但正如我所料，整个菜单发生变化而不是销售！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:25:24.710

您可以使用 CSS3 选择器[nth-of-type](http://www.w3schools.com/cssref/sel_nth-of-type.asp)。如果您的输出是列表，则更改第一个

*   您需要添加的元素：

    ```
    div#menu h7:nth-of-type(1) a {color:#ff0000;} 
    ```

    你可以在这个[小提琴中检查它](http://jsfiddle.net/rJ4aJ/3/)

    '编辑类以定位列表元素内的链接

# eclipse-rap - Eclipse RAP 2.0 双击 TableViewer/TreeViewer 在 IE8 上无响应

> ID：15900247
> 
> 赞同：0
> 
> 时间：2013-04-09T11:08:19.573
> 
> 标签：eclipse-rap

我正在使用 IE8 开发 RAP 2.0。很多时候，我双击 tableviwer 上的 treeviewer 节点或项目，它不会触发 DoubleClickListener 事件。但是，如果我连续单击 3 次，它将触发 DoubleClickListener。它在 Firefox 和 Chrome 上运行良好。谁能帮我这个？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:17:03.403

如果 IE 和其他浏览器的行为不同，则很可能是 RAP 中的错误。但是，它对我来说很好，所以您的应用程序代码中可能有一些东西会触发这个问题。我建议您创建一个小型 RAP 应用程序（只是一个入口点）来演示该问题并将其发布在[RAP 新闻组](http://www.eclipse.org/forums/eclipse.technology.rap)或[RAP Bugzilla](http://eclipse.org/rap/bugs/)上。

# r - 通过 RCurl 发布表单时避免服务器证书错误

> ID：15900248
> 
> 赞同：1
> 
> 时间：2013-04-09T11:08:23.870
> 
> 标签：r, post, curl, web-scraping, rcurl

尝试通过以下方式发布表单时出现此证书验证错误`RCurl::postForm()`：

```
Error in function (type, msg, asError = TRUE)  : 
  SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

还不太熟悉 POST 表单，谁能告诉我我做错了什么？

## 产生错误的示例

我查看了[http://goo.gl/qOf5t](http://goo.gl/qOf5t)的源代码并确定了列出的第一个航班的 POST 形式（截至 2013 年 4 月 9 日，这是 FFM - NY 为 437,97 欧元）：

```
<form data-carrier='["AF"]' method="post" target="_blank" action=
"https://www.fluege.de/flight/itinerary/sFlightInput/bd253d844ad40c38e2334930a849da76/SAB"
class="clearfix itinForm">
  <input type="hidden" name="key" value="2" /> <input type="hidden" name="recom"
  value="2" /> <input type="hidden" name="type" value="SAB" />

  <div class="relative clearfix">
    <div class="Pricebox PriceboxWO">
      <div class="spiffy spiffytop schemeh1">
        <div class="spiffy1">
          &nbsp;
        </div>

        <div class="spiffy2">
          &nbsp;
        </div>

        <div class="spiffy3">
          &nbsp;
        </div>

        <div class="spiffy4">
          &nbsp;
        </div>
      </div>

      <div class="PriceItin floatfix">
        <div class="fll">
          Preis p. P.&nbsp;:&nbsp;
        </div>
      </div>
    </div>
  </div>
</form> 
```

然后我解雇了这个：

```
require("RCurl")
x <- RCurl::postForm(
    uri="https://www.fluege.de/flight/itinerary/sFlightInput/bd253d844ad40c38e2334930a849da76/SAB",
    .params=list(
        key=160,
        recom=160,
        type="SAB"
    ),
    style="POST"
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:10:10.480

从我在其他地方读到的内容来看，问题似乎是 RCurl 不再包含任何 CA 信息。

看看下面的网址。您可能需要从某处获取 CA 信息并将其安装在本地。

[http://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)

使用 getURL，您可以设置一个参数来忽略证书，但我还没有找到使用 postForm 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:25:18.550

来自 RCurl 常见问题[http://www.omegahat.org/RCurl/FAQ.html](http://www.omegahat.org/RCurl/FAQ.html)

> 为什么 https 对我不起作用？
> 
> 可能是因为当您编译/安装 libcurl 时，您不支持 SSL。你可以用命令来检查 `curl-config --feature` 如果 ssl 没有出现在那里，你不支持它。您应该重新安装 curl，首先安装 SSL（例如[openssl](http://www.openssl.org/)）。

# regex - Dart 如何匹配然后替换正则表达式

> ID：15900254
> 
> 赞同：38
> 
> 时间：2013-04-09T11:08:35.480
> 
> 标签：regex, dart

这可能是一个愚蠢的问题，但我找不到任何关于如何在使用 Dart 的正则表达式匹配后替换文本的参考`RegExp`。

基本上我想做的是这样的：我有这样的文字

```
'{name : aName, hobby : [fishing, playing_guitar]}' 
```

我想用这个模式匹配字符串`\b\w+\b`，然后用`"$&"`. 我希望输出如下：

```
'{"name" : "aName", "hobby" : ["fishing", "playing_guitar"]}' 
```

所以稍后我可以使用`dart:json`'s`parse`将其转换为`Map`.

也许我错过了什么。有谁知道我怎样才能实现这个替换？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-09T12:25:26.967

您必须使用[String.replaceAllMapped](https://api.dartlang.org/stable/1.20.1/dart-core/String/replaceAllMapped.html)。

```
final string = '{name : aName, hobby : [fishing, playing_guitar]}';
final newString = string.replaceAllMapped(RegExp(r'\b\w+\b'), (match) {
  return '"${match.group(0)}"';
});
print(newString); 
```

这个食谱是由[Dart Cookbook](http://www.dartlang.org/docs/cookbook/#substituting-strings-using-regular-expressions)赞助的。

# c# - 您可以将 GroupBox 的可见性绑定到其子项的可见性吗？

> ID：15900255
> 
> 赞同：5
> 
> 时间：2013-04-09T11:08:36.387
> 
> 标签：c#, wpf, xaml, data-binding

我在尝试让 GroupBox 折叠时遇到问题。我想要一个 GroupBox，如果它的所有子项都折叠起来，它就会折叠起来。

我已经设法使用对属性的多重绑定来实现这一点，如下所示。

```
<StackPanel>
    <GroupBox>
      <GroupBox.Visibility>
        <MultiBinding 
          Converter="{StaticResource multiBoolOrToVis}"
          ConverterParameter="{x:Static Visibility.Collapsed}"
        >
          <Binding Path="a_visible"/>
          <Binding Path="b_visible"/>
        </MultiBinding>
      </GroupBox.Visibility>
        <GroupBox.Header>
        <Label Content="GroupBox"/>
      </GroupBox.Header>
      <StackPanel>
        <Label 
          Content="A"
          Visibility="{Binding Path=a_visible, Converter={StaticResource boolToVis}}"
        />
        <Label 
          Content="B"
          Visibility="{Binding Path=b_visible, Converter={StaticResource boolToVis}}"
        />
      </StackPanel>
    </GroupBox>
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      <CheckBox 
        Content="A Visible"
        Grid.Column="0"
        Grid.Row="1"
        IsChecked="{Binding Path=a_visible, Mode=TwoWay}"
      />
      <CheckBox 
        Content="B Visible"
        Grid.Column="1"
        Grid.Row="1"
        IsChecked="{Binding Path=b_visible, Mode=TwoWay}"
      />
    </Grid>
  </StackPanel> 
```

这样做的问题是我们希望能够多次执行此操作，而不必担心离开绑定。所以我的问题是有什么方法可以通用地做到这一点，最好是在一种风格上。另一个要求是它必须在 xaml 而不是代码后面。

所以我理想的答案是一种风格，所以我可以在我的 xaml 中进行以下操作。

```
<StackPanel>
    <GroupBox Style="ChildrenVisibilityStyle">
        <GroupBox.Header>
        <Label Content="GroupBox"/>
      </GroupBox.Header>
      <StackPanel>
        <Label 
          Content="A"
          Visibility="{Binding Path=a_visible, Converter={StaticResource boolToVis}}"
        />
        <Label 
          Content="B"
          Visibility="{Binding Path=b_visible, Converter={StaticResource boolToVis}}"
        />
      </StackPanel>
    </GroupBox>
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      <CheckBox 
        Content="A Visible"
        Grid.Column="0"
        Grid.Row="1"
        IsChecked="{Binding Path=a_visible, Mode=TwoWay}"
      />
      <CheckBox 
        Content="B Visible"
        Grid.Column="1"
        Grid.Row="1"
        IsChecked="{Binding Path=b_visible, Mode=TwoWay}"
      />
    </Grid>
  </StackPanel> 
```

我看过这些问题，它们让我认为这是不可能的；[controltemplate中的绑定](https://stackoverflow.com/questions/3046262/wpf-binding-to-observablecollection-in-controltemplate-is-not-updated)，[stackpanel 可见性](https://stackoverflow.com/questions/569144/bind-stackpanel-visibility-to-the-visibility-property-of-its-children)，[边框可见性](https://stackoverflow.com/questions/9921969/how-can-i-bind-a-border-visibility-to-the-visibility-of-containing-children-obje)。

对不起，如果这已经回答过。提前感谢您的任何答案/评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T11:39:12.220

当孩子们被折叠时，你可以使用 a`MultiDataTrigger`来折叠`GroupBox`

这是一个工作示例：

```
 <StackPanel>
    <GroupBox>
        <GroupBox.Header>
            <Label Content="GroupBox"/>
        </GroupBox.Header>
        <StackPanel>
            <Label x:Name="lbl_a" Content="A" Visibility="{Binding IsChecked, ElementName=chk_a, Converter={StaticResource boolToVis}}"  />
            <Label x:Name="lbl_b" Content="B" Visibility="{Binding IsChecked, ElementName=chk_b, Converter={StaticResource boolToVis}}"  />
        </StackPanel>
        <GroupBox.Style>
            <Style TargetType="GroupBox">
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding Visibility, ElementName=lbl_a}" Value="Collapsed" />
                            <Condition Binding="{Binding Visibility, ElementName=lbl_b}" Value="Collapsed" />
                        </MultiDataTrigger.Conditions>
                        <MultiDataTrigger.Setters>
                            <Setter Property="GroupBox.Visibility" Value="Collapsed" />
                        </MultiDataTrigger.Setters>
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
        </GroupBox.Style>
    </GroupBox>

    <CheckBox x:Name="chk_a" Content="A Visible" Grid.Column="0" Grid.Row="1" />
    <CheckBox x:Name="chk_b" Content="B Visible" Grid.Column="1" Grid.Row="1"  />

</StackPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:00:00.943

有两种方法，都具有附加行为：第一种是在父 GroupBox 和 OnPropertyChanged 回调循环中对所有子项设置附加属性，并将绑定添加到多重绑定，然后将其挂接到 GroupBox Visibility 属性。这种方法的问题是您必须指定要包含在多重绑定中的子项的类型（因为您需要找到它们才能将它们添加到指示父项状态的组中） - FindVisualChildren 如果您想捕获您想要的所有内容，则需要使用多种泛型类型来调用它......虽然很容易做到：

```
public sealed class GroupBoxCloseBehavior : DependencyObject
{
    public static readonly DependencyProperty IsEnabledProperty = DependencyProperty.RegisterAttached("IsEnabled", typeof(bool), typeof(GroupBoxCloseBehavior), new PropertyMetadata(false, OnIsEnabledChanged));

    public static bool GetIsEnabled(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsEnabledProperty);
    }

    public static void SetIsEnabled(DependencyObject obj, bool value)
    {
        obj.SetValue(IsEnabledProperty, value);
    }

    private static void OnIsEnabledChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        GroupBox parent = obj as GroupBox;
        if (parent == null)
        {
            return;//Do nothing, or throw an exception depending on your preference
        }

        if (parent.IsLoaded)
        {

            MultiBinding mb = new MultiBinding();
            mb.Converter = new MultiVisibilityToVisibilityConverter();
            if ((bool)e.NewValue)
            {
                foreach (CheckBox child in FindVisualChildren<CheckBox>(parent))
                {
                    mb.Bindings.Add(new Binding("Visibility") { Mode = BindingMode.OneWay, Source = child });
                }
                BindingOperations.SetBinding(parent, UIElement.VisibilityProperty, mb);
            }
            else
            {
                BindingOperations.ClearBinding(parent, UIElement.VisibilityProperty);
            }
        }
        else
        {
            parent.Loaded += (sender, eventArgs) =>
            {
                MultiBinding mb = new MultiBinding();
                mb.Converter = new MultiVisibilityToVisibilityConverter();
                if ((bool)e.NewValue)
                {
                    foreach (CheckBox child in FindVisualChildren<CheckBox>(parent))
                    {
                        mb.Bindings.Add(new Binding("Visibility") { Mode = BindingMode.OneWay, Source = child });
                    }
                    BindingOperations.SetBinding(parent, UIElement.VisibilityProperty, mb);
                }
                else
                {
                    BindingOperations.ClearBinding(parent, UIElement.VisibilityProperty);
                }
            };
        }
    }

    private sealed class MultiVisibilityToVisibilityConverter : IMultiValueConverter
    {
        public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return values.OfType<Visibility>().Any(vis => vis != Visibility.Collapsed) ? Visibility.Visible : Visibility.Collapsed;
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotSupportedException();
        }
    }

    public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
    {
        if (depObj != null)
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
                if (child != null && child is T)
                {
                    yield return (T)child;
                }

                foreach (T childOfChild in FindVisualChildren<T>(child))
                {
                    yield return childOfChild;
                }
            }
        }
    }
}

<StackPanel>
    <GroupBox Header="GroupBox" cl2:GroupBoxCloseBehavior.IsEnabled="True">
        <StackPanel>
            <CheckBox x:Name="CheckOne" Content="CheckBox One"/>
            <CheckBox x:Name="CheckTwo" Content="CheckBox Two"/>
        </StackPanel>
    </GroupBox>
    <StackPanel>
        <Button Content="Hide One" Click="Button_Click_1"/>
        <Button Content="Hide Two" Click="Button_Click_2"/>
    </StackPanel>
</StackPanel> 
```

以另一种方式执行此操作，将附加属性放在子元素上，并且 OnPropertyChanged 沿着树向上寻找父 GroupBox 可能会更好，但您会遇到不知道有多少元素的麻烦。这只是绑定的限制。至少使用 GroupBox 附加属性，您可以构建所需的绑定。

# php - 从返回的数组中获取信息 - 混淆

> ID：15900260
> 
> 赞同：0
> 
> 时间：2013-04-09T11:08:51.203
> 
> 标签：php, class, function, return

下午！我到处寻找答案，我正在尝试为一家公司建立一个网站，他们希望对他们的外部服务器进行检查。我有一个检查此信息的类，并已通过使用 print_r() 确认它可以工作，但是我正在从该类中寻找更具体的东西 - 只是为了澄清一下，我对 PHP 很陌生，不要知道很多。

这是课程：

```
class MinecraftQueryException extends Exception
{
// Exception thrown by MinecraftQuery class
}

class MinecraftQuery
{
/*
 * Class written by xPaw
 *
 * Website: http://xpaw.ru
 * GitHub: https://github.com/xPaw/PHP-Minecraft-Query
 */

const STATISTIC = 0x00;
const HANDSHAKE = 0x09;

private $Socket;
private $Players;
private $Info;

public function Connect( $Ip, $Port = 25565, $Timeout = 3 )
{
    if( !is_int( $Timeout ) || $Timeout < 0 )
    {
        throw new InvalidArgumentException( 'Timeout must be an integer.' );
    }

    $this->Socket = @FSockOpen( 'udp://' . $Ip, (int)$Port, $ErrNo, $ErrStr, $Timeout );

    if( $ErrNo || $this->Socket === false )
    {
        throw new MinecraftQueryException( 'Could not create socket: ' . $ErrStr );
    }

    Stream_Set_Timeout( $this->Socket, $Timeout );
    Stream_Set_Blocking( $this->Socket, true );

    try
    {
        $Challenge = $this->GetChallenge( );

        $this->GetStatus( $Challenge );
    }
    // We catch this because we want to close the socket, not very elegant
    catch( MinecraftQueryException $e )
    {
        FClose( $this->Socket );

        throw new MinecraftQueryException( $e->getMessage( ) );
    }

    FClose( $this->Socket );
}

public function GetInfo( )
{
    return isset( $this->Info ) ? $this->Info : false;
}

public function GetPlayers( )
{
    return isset( $this->Players ) ? $this->Players : false;
}

private function GetChallenge( )
{
    $Data = $this->WriteData( self :: HANDSHAKE );

    if( $Data === false )
    {
        throw new MinecraftQueryException( "Failed to receive challenge." );
    }

    return Pack( 'N', $Data );
}

private function GetStatus( $Challenge )
{
    $Data = $this->WriteData( self :: STATISTIC, $Challenge . Pack( 'c*', 0x00, 0x00, 0x00, 0x00 ) );

    if( !$Data )
    {
        throw new MinecraftQueryException( "Failed to receive status." );
    }

    $Last = "";
    $Info = Array( );

    $Data    = SubStr( $Data, 11 ); // splitnum + 2 int
    $Data    = Explode( "\x00\x00\x01player_\x00\x00", $Data );
    $Players = SubStr( $Data[ 1 ], 0, -2 );
    $Data    = Explode( "\x00", $Data[ 0 ] );

    // Array with known keys in order to validate the result
    // It can happen that server sends custom strings containing bad things (who can know!)
    $Keys = Array(
        'hostname'   => 'HostName',
        'gametype'   => 'GameType',
        'version'    => 'Version',
        'plugins'    => 'Plugins',
        'map'        => 'Map',
        'numplayers' => 'Players',
        'maxplayers' => 'MaxPlayers',
        'hostport'   => 'HostPort',
        'hostip'     => 'HostIp'
    );

    foreach( $Data as $Key => $Value )
    {
        if( ~$Key & 1 )
        {
            if( !Array_Key_Exists( $Value, $Keys ) )
            {
                $Last = false;
                continue;
            }

            $Last = $Keys[ $Value ];
            $Info[ $Last ] = "";
        }
        else if( $Last != false )
        {
            $Info[ $Last ] = $Value;
        }
    }

    // Ints
    $Info[ 'Players' ]    = IntVal( $Info[ 'Players' ] );
    $Info[ 'MaxPlayers' ] = IntVal( $Info[ 'MaxPlayers' ] );
    $Info[ 'HostPort' ]   = IntVal( $Info[ 'HostPort' ] );

    // Parse "plugins", if any
    if( $Info[ 'Plugins' ] )
    {
        $Data = Explode( ": ", $Info[ 'Plugins' ], 2 );

        $Info[ 'RawPlugins' ] = $Info[ 'Plugins' ];
        $Info[ 'Software' ]   = $Data[ 0 ];

        if( Count( $Data ) == 2 )
        {
            $Info[ 'Plugins' ] = Explode( "; ", $Data[ 1 ] );
        }
    }
    else
    {
        $Info[ 'Software' ] = 'Vanilla';
    }

    $this->Info = $Info;

    if( $Players )
    {
        $this->Players = Explode( "\x00", $Players );
    }
}

private function WriteData( $Command, $Append = "" )
{
    $Command = Pack( 'c*', 0xFE, 0xFD, $Command, 0x01, 0x02, 0x03, 0x04 ) . $Append;
    $Length  = StrLen( $Command );

    if( $Length !== FWrite( $this->Socket, $Command, $Length ) )
    {
        throw new MinecraftQueryException( "Failed to write on socket." );
    }

    $Data = FRead( $this->Socket, 2048 );

    if( $Data === false )
    {
        throw new MinecraftQueryException( "Failed to read from socket." );
    }

    if( StrLen( $Data ) < 5 || $Data[ 0 ] != $Command[ 2 ] )
    {
        return false;
    }

    return SubStr( $Data, 5 );
}
} 
```

我正在尝试从 GetInfo() 函数中获取数据，我已经对返回和函数进行了一些谷歌搜索，并尝试了一些事情：

```
 $Query = new MinecraftQuery( );

                try
                {
                    $Query->Connect( 'ipgoeshere', 25565 );
                    $Info = $Query->GetInfo();
                    $maxPlayers = $Info['maxplayers'];
                    echo $maxPlayers;
                }
                catch( MinecraftQueryException $e )
                {
                echo $e->getMessage( );
                } 
```

我在这里做错了吗？或者这是完全错误的方法类型。一个解决方案会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:33:53.663

```
$maxPlayers = $Info['maxplayers']; 
```

应该是

```
$maxPlayers = $Info['MaxPlayers']; 
```

你也可以尝试做一个

```
print_r($Info); 
```

紧接着

```
$Query->Connect( 'ipgoeshere', 25565 );
$Info = $Query->GetInfo(); 
```

看看数据是否确实做到了`$Info`，我似乎找不到任何其他问题:(

# javascript - javascript将对象传递给函数

> ID：15900261
> 
> 赞同：3
> 
> 时间：2013-04-09T11:08:55.340
> 
> 标签：javascript, function, object

```
var o = {};
(function(x){x=null})(o);       //o is NOT null after this statement
(function(x){x.foo = "foo"; x.bar = "bar";})(o)   //o has properties foo and bar after this statement 
```

* * *

将对象 o 传递给函数时发生了什么？第一个函数使它看起来没有通过；第二个功能使 o 似乎通过了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T11:12:49.113

第 1 行：创建了一个对象。对它的引用被传递给`o`.

第 2 行：调用一个函数。对对象的引用作为参数传递。然后引用 (in `x`) 被覆盖`null`（不触及对象本身或仍然分配给它的引用`o`）。

第 3 行：调用一个函数。对对象的引用作为参数传递。将 A`foo`和`bar`属性添加到对象并分配值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T11:12:39.477

```
(function(x){
  x=null
})(o); 
```

`x`“指向” `o`，但您只是指定`x`指向另一事物，`null`因此不会改变`o`。

```
(function(x){
  x.foo = "foo"; 
  x.bar = "bar";
})(o); 
```

在此代码中，您正在更改指向的任何内容的属性（添加`foo`和），即. 这种改动将反映到.`bar``x``o``o`

# model - Rails 4 to_xml 问题与模型中的访问器覆盖

> ID：15900262
> 
> 赞同：2
> 
> 时间：2013-04-09T11:08:56.993
> 
> 标签：model, ruby-on-rails-4, ruby-2.0, export-to-xml

我在覆盖模型中的访问器并`to_xml`稍后在模型上使用该方法时遇到问题。问题是，这`to_xml`似乎使用了默认的 getter 方法，而不是使用`read_attribute`.

我的模型：

```
class Announcement < ActiveRecord::Base
  ...

  def created_at
    date = self[:created_at]
    "#{german_date(date)} #{german_time(date)} #{I18n.t(:clock)}"
  end

  ...
end 
```

我正在使用它，以便通过始终对标签和 text_fields 使用正确的方法来轻松地运行我的 haml 视图中的参数。因为我需要修改一些属性，所以我覆盖了访问器。

```
-# Minified example ...
= form_for ...
  - %i(a b c d e).each do |attr|
    = f.label attr
    = f.text_field attr 
```

问题是：当我运行时`to_xml`，我遇到了这个问题：

```
NoMethodError: undefined method `xmlschema' for "15.03.2009 18:17 Uhr":String 
```

显然，`to_xml`正在使用我的自定义 getter 而不是`read_attribute(:created_at)`，这将给出正确的值。我很惊讶在其他地方没有发现这个问题，但是有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:39:13.217

有一种使用选项和块的方法`to_xml`

```
announcment.to_xml(except: :created_at, procs: -> (options, record) {
  options[:builder].tag!("created-at", record.read_attribute(:created_at))
}) 
```

但这并不漂亮。我只想为您的视图使用装饰器，而无需理会模型属性方法，Draper 与 Rails 4 配合得很好。

# sitecore - Sitecore 多站点

> ID：15900267
> 
> 赞同：1
> 
> 时间：2013-04-09T11:09:12.373
> 
> 标签：sitecore

这里有一点帮助；我有这个包含多个站点的内容树（对于糟糕的图表，我很抱歉，但我希望它有所帮助）：

```
Site1
  -Home
  -About
  -contact

Site2
  -Home
  -Gallery
  -Contact 
```

站点 2 运行良好，但站点 1 的主页、关于和联系人项目也应该正常运行，因为我可以在内容编辑器中看到它们的所有预览，但在站点（本地主机）上它只显示 www.Site1.com/Home。当我浏览站点 1 下的其他页面时，它显示：

未找到请求的文档
您要查找的资源（或其依赖项之一）已被删除、更改名称或暂时不可用。请查看以下 URL 并确保其拼写正确。

知道为什么 Site1 不工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:34:04.137

这可能是因为两个站点都有一个`Home`项目。此外，您应该查看您的 web.config 设置。在该`<sites>`部分中，您应该有 2 个条目，如下所示：

```
<site name="site1" virtualFolder="/" physicalFolder="/" rootPath="/sitecore/content" startItem="/Home1" hostName="www.site1.com" database="web" domain="extranet" allowDebug="true" cacheHtml="true" htmlCacheSize="10MB" registryCacheSize="0" viewStateCacheSize="0" xslCacheSize="5MB" filteredItemsCacheSize="2MB" enablePreview="true" enableWebEdit="true" enableDebugger="true" disableClientData="false" />
<site name="site2" virtualFolder="/" physicalFolder="/" rootPath="/sitecore/content" startItem="/Home2" hostName="www.site2.com" database="web" domain="extranet" allowDebug="true" cacheHtml="true" htmlCacheSize="10MB" registryCacheSize="0" viewStateCacheSize="0" xslCacheSize="5MB" filteredItemsCacheSize="2MB" enablePreview="true" enableWebEdit="true" enableDebugger="true" disableClientData="false" /> 
```

此外，请确保将两个域都设置为 IIS 中站点的绑定。这是从 Sitecore SDN 配置多个站点的有用文档：http: [//sdn.sitecore.net/Articles/Administration/Configuring%20Multiple%20Sites.aspx](http://sdn.sitecore.net/Articles/Administration/Configuring%20Multiple%20Sites.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:56:35.227

如果您将数据库更改为 Web 数据库，您能看到站点 1 和它的项目吗？

可能是您尚未发布您的项目，或者您的项目仍在工作流程中？
如果您正在使用的是开发环境，您可以尝试在实时模式下工作。默认情况下，App_Config/Include 文件夹中有一个名为 livemode.config.example 的文件，如果您将其重命名为 livemode.config，它将起作用。或者，您可以通过转到 web.config 中的 site1 定义并将数据库设置为 web 而不是 master 来检查它。
这两个选项都将绕过工作流程和发布的需要。

如果这些项目已经发布，您能否查看日志文件并查看其中是否有任何错误？

# requirejs - 使用 requirejs 部署仅 javascript 的单页应用程序

> ID：15900268
> 
> 赞同：2
> 
> 时间：2013-04-09T11:09:14.573
> 
> 标签：requirejs, single-page-application

据我了解，r.js 有两种主要的优化模式……单个文件或整个项目。

整个项目优化，有效地将整个项目复制到一个`dist`文件夹中，似乎更适合更大的多页应用程序。

但是假设您有单页应用程序，特别是一个相对较小的应用程序，您肯定希望将所有 JavaScript 连接到一个文件中（包括 RequireJS/almond）。

你如何部署这个？如果我有可用的服务器端语言，我想服务器可以检查环境标志并加载适当的脚本标签。

但是如果环境是静态web服务器，应该怎么做呢？这应该作为构建脚本的一部分处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:14:24.817

对于这样的事情，我总是建议使用[Rex](http://rexify.org/)或[Capistrano](http://capify.org/)之类的工具，这使得配置管理和部署非常容易，即使对于单页或静态应用程序也是如此。

我现在正在使用 Capistrano 将一些应用程序部署到我的服务器上。在 Capistrano 脚本中，我定义了几个任务，这些任务将为我的 HTML 文件执行缩小/丑化以及所需的补丁（实际上是使用位于`js-built`存储优化文件的位置而不是`js`目录的 JavaScript 文件）。

因此，您的静态网站部署脚本会上传最新版本，开始缩小过程（可能使用[r.js](http://requirejs.org/docs/optimization.html)），然后修补`index.html`文件以使用脚本的缩小版本。

由于 Capistrano 和 Rex 非常容易理解，这甚至不会产生太多开销，并且生成的部署脚本可能包含大约 30 行代码。这绝对值得。

# iphone - 在代码中更新应用程序

> ID：15900272
> 
> 赞同：1
> 
> 时间：2013-04-09T11:09:21.433
> 
> 标签：iphone, ios, objective-c, xcode

我希望将来更新应用程序，那么在我当前的应用程序中要添加哪些代码，以便它检测更新中的更改并自动实施更改。与该主题相关的注释更有帮助...在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:12:04.757

您无法在代码中更新应用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:20:56.763

更新您的`iOS`应用程序一旦您提交新版本并获得批准`Apple`，您之前的二进制文件将不再可供消费者使用，您最新的二进制文件将是`AppStore`.

这意味着新用户只会下载最新版本，而现有用户会收到新更新版本的通知，并且他们可以在更新时跳过版本。版本必须是独立的，而不是`patches`以前版本的“”。

在应用程序中，无需添加任何类型的代码来告诉用户进行更新。

# alfresco - 通过 OpenCMIS 读取 Alfresco 自定义元数据？

> ID：15900275
> 
> 赞同：1
> 
> 时间：2013-04-09T11:09:33.423
> 
> 标签：alfresco, cmis, opencmis, dotcmis

我创建了一个新的 Alfresco 文档，并向其中添加了一个自定义方面（EXIF 方面）。

如何通过 OpenCMIS/DotCMIS 获取此元数据的值？

我尝试了以下方法，但它没有显示 EXIF 元数据（也可能没有任何自定义方面元数据）：

```
foreach(IProperty property in document.Properties)
{
    if (property.IsMultiValued)
    {
         metadata.Add(property.Id, property.ValuesAsString);
    }
    else
    {
         metadata.Add(property.Id, property.ValueAsString);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:43:02.337

在 Alfresco 支持 CMIS 1.1 之前，如果不使用提到的扩展 Gagravarr，您将无法读取基于方面的属性。到今天为止，无论是企业版还是社区版，都没有支持 CMIS 1.1 的 Alfresco 版本。我怀疑 4.2 将包括 CMIS 1.1，但希望之后的版本会。

# php - 数组中的重复键

> ID：15900276
> 
> 赞同：5
> 
> 时间：2013-04-09T11:09:34.373
> 
> 标签：php, arrays

在类型转换期间防止重复键的最佳方法是什么？

**例子 ：**

```
//Credits @bwoebi
$obj = (object)array(1,2,3);
$obj->{1} = "Duplicate key 1";
$obj->{2} = "Duplicate key 2";
$obj->{3} = "Duplicate key 3";
$array = (array)$obj ;
print_r($array); 
```

输出

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [1] => Duplicate key 1
    [2] => Duplicate key 2
    [3] => Duplicate key 3
) 
```

现在我知道有些聪明人会说它，因为一个`key`是`string`，另一个是`int`使用`var_dump`

```
var_dump($array); 
```

输出

```
array (size=6)
  0 => int 1
  1 => int 2
  2 => int 3
  '1' => string 'Duplicate key 1' (length=15)
  '2' => string 'Duplicate key 2' (length=15)
  '3' => string 'Duplicate key 3' (length=15) 
```

但主要问题是连钥匙都拿不到

```
echo $array['1'] ,PHP_EOL;     //Expected Duplicate key 1
echo $array[1] ,PHP_EOL; 
```

输出

```
2
2 
```

是否有任何解决此问题的方法而无需循环？显然，除非@PeeHaa埽再次提供啤酒，否则我永远不会犯这个错误，但我认为任何答案都应该有助于受过教育`PHP`的开发人员。

**注意**。- 这可以很容易地解决`array_values`，`sort`或任何改变关键位置的 php 函数

例子

```
sort($array);
print_r($array); 
```

输出

```
Array
(
    [0] => Duplicate key 1
    [1] => Duplicate key 2
    [2] => Duplicate key 3
    [3] => 1
    [4] => 2
    [5] => 3
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:37:25.220

在我看来，*唯一*的解决方案（即唯一不是丑陋的黑客）是停止使用匿名对象并为此目的定义一个类。它不需要复杂：

```
class SimpleArrayObject
{
    public function __construct($array = null)
    {
        foreach ((array) $array as $key => $value) {
            $this->{$key} = $value; // implicitly calls __set()
        }
    }

    public function __set($key, $value)
    {
        $this->{(string) $key} = $value;
    }
} 
```

由于使用`__set()`并将所有内容定义为动态公共属性，这仍然可以很好地与`json_encode()`, `foreach`, 强制转换以及您期望从`stdClass`. 但是，这会强制属性名称使用字符串类型，这意味着不再可能出现重叠的松散类型。

您还可以定义一个辅助函数，以使“强制转换”语法非常清楚发生了什么：

```
function object($value)
{
    if (is_object($value)) {
        return $value;
    }

    if (!is_array($value)) { // mimic the behaviour of a regular cast
        $value = array('scalar' => $value);
    }

    return new SimpleArrayObject($value);
} 
```

走着瞧吧：

```
$obj = object(array(1,2,3));
$obj->{1} = "Duplicate key 1";
$obj->{2} = "Duplicate key 2";
$obj->{3} = "Duplicate key 3";
$array = (array)$obj ;
print_r($array); 
```

[输出](http://codepad.org/VDAaikF2)：

```
Array
(
    [0] => 1
    [1] => Duplicate key 1
    [2] => Duplicate key 2
    [3] => Duplicate key 3
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:17:58.263

您可以使用[array_values](http://php.net/manual/en/function.array-values.php)函数来重置数组键。

尝试这个：

```
$obj = (object)array(1,2,3);
$obj->{1} = "Duplicate key 1";
$obj->{2} = "Duplicate key 2";
$obj->{3} = "Duplicate key 3";
$array = (array)$obj ;

$array = array_values($array);
print_r($array); 
```

产生这个：

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => Duplicate key 1
    [4] => Duplicate key 2
    [5] => Duplicate key 3
) 
```

或者你甚至可以在转换之前使用 array_values，如下所示：

```
$array = array_values((array)$obj); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:36:32.723

也许不是最好的解决方案，但使用自定义函数将数组转换为对象可以解决部分问题。

```
// function that convers an array to an object, and prefixes the numeric values with a string
function toObj(Array $arr, $prefix = '_', $convertAll = false ) {
    foreach ($arr as $key => $value) {
        if (is_numeric($key) || $convertAll) {
            unset($arr[$key]);
            $arr[$prefix . $key] = $value;
        }
    }
    return (object)$arr;
}

$obj = toObj(array(1, 2, 3));
$obj->{'_0'} = "Duplicate key 0"; // either this way
$obj->_1 = "Duplicate key 1"; // or this way
$obj->{'_2'} = "Duplicate key 2";
$array = (array)$obj;
print_r($array); 
```

结果是：

```
Array
(
    [_0] => Duplicate key 0
    [_1] => Duplicate key 1
    [_2] => Duplicate key 2
) 
```

尽管这类似于`array_values`解决方案，但它的好处是仍然保留了密钥，至少在一定程度上是这样。

# java - Phonegap：关闭 DroidGap 活动后，javascript 计时器仍在运行

> ID：15900282
> 
> 赞同：3
> 
> 时间：2013-04-09T11:09:55.207
> 
> 标签：java, javascript, android, cordova, exit

我正在使用 Phonegap 在 Android WebApp 中工作。要退出应用程序，我`navigator.app.exitApp`从 JavaScript 代码调用。

我试图找到此方法的文档页面，但它不存在。然后我下载了 Android 的 Phonegap 源代码，但我迷路了，没有找到这个库在哪里以及如何从本机代码中退出应用程序。我没有时间做这个，所以我决定自己测试一下。

我的应用程序有一个 DroidGap 活动（使用 singleInstance 标志启动），还有一个服务和一个广播接收器。用户必须能够关闭 GUI，但我想保持服务和其他一切运行。所以我想做的是只完成活动，而不是调用`System.exit`.

现在奇怪的部分来了。我已经在模拟器中对此进行了测试，DroidGap 活动似乎以我想要的方式关闭（onDestroy 被触发）并且服务保持运行。但是，尽管活动已关闭，并且应用程序图标不再显示在任务管理器中，但不知何故 JavaScript 计时器仍在运行。我已经三重检查了这一点。我想相信活动在后台，但它不可能：它作为单实例启动，当我再次打开应用程序时，它显示初始页面（它在不同的页面中关闭）。

为什么会发生这种情况？我应该编写一个插件来直接调用`finish`活动吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:26:39.337

我已经调查了几个小时，所以我将在这里发布我的发现。

在每个 Android WebApp 中，不仅是 Phonegap 应用程序，只要你有一个 WebView，就会产生两个线程：`WebViewCoreThread`和`WebViewWorkerThread`. 它们显示在 DDMS 中。我一直在阅读 Android 源代码，并且我已经将这个线程的创建跟踪到`WebViewCore.java`文件中。显然，每个应用程序进程只启动了两个线程，它们由应用程序中的每个 WebView 共享。

恕我直言，在屏幕中使用视图意味着产生线程这一事实是非常糟糕的设计。如果这个字段需要做像启动线程一样复杂的事情，那么它应该被更好地设计为 WebViewActivity 或 WebWiewFragment 。在任何情况下，创建线程的类也应该负责在不再需要它时完成它。不幸的是，事实并非如此。

当包含 WebView 的 Activity 关闭但应用程序进程仍在运行时（可能是因为您有其他组件，如服务，或者操作系统尚未杀死它），这些线程将继续运行。核心线程将继续执行您在应用程序中设置的计时器。再次创建活动时，线程将被重用。

作为旁注，请注意这如何允许在后台运行 javascript 代码而不必保持显示活动。

我为这个问题中公开的常规 WevView 尝试了一些解决方法：[WebView threads never stop (WebViewCoreThread, CookieSyncManager, http[0-3])](https://stackoverflow.com/q/2040963/813951)，

但由于某些未知原因，它不适用于 Phonegap。我尝试像这样覆盖我的 DroidGap 子类：

```
@Override
public void onDestroy(){
    System.out.println("Activity destroyed");

    if(appView != null){ //This is a protected reference to the `CordovaWebView`, extending `WebView`
        //First attempt
        try {
            Class.forName("android.webkit.WebView").getMethod("onPause", (Class[]) null).invoke(appView, (Object[]) null);
        } catch (Exception e) {             
            e.printStackTrace();
        } 

        //Second attempt
        appView.pauseTimers();          
    }

    super.onDestroy();
} 
```

所以我最终做的是确保在退出应用程序之前从 JavaScript 代码中取消所有计时器。但是，人们会期望在 Android 操作系统代码中修复此问题，或在 Phonegap 中进行修补，因为即使在最好的情况下，这些线程也会浪费资源，而这些资源在没有显示网页时确实不需要。在最坏的情况下，一些与 DOM 相关的 JavaScript 代码可能会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:23:13.350

您需要在调用`navigator.app.exitApp()`. 这个问题也在[这里](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/8_XUXo0yOWQ)讨论。

希望这可以帮助...：）

# java - 从日期更改为日历

> ID：15900289
> 
> 赞同：-5
> 
> 时间：2013-04-09T11:10:27.313
> 
> 标签：java, datetime, calendar

我有以下代码，我应该如何将它从日期更改为返回类型日历？

```
 Date date = new Date();

        SimpleDateFormat parsedDate = new SimpleDateFormat("yyyy-mm-dd");
        // TODO handle exception
        try {
            date = parsedDate.parse((String) memberValue);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        return new SwitchInputType<Date>(date); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:12:47.467

您可以使用

```
Calendar cal = Calendar.getInstance();
  cal.setTime(date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:13:03.037

你可以这样做： -

```
Calendar cal  = Calendar.getInstance();
cal.setTime(date); 
```

# php - PHP将'file_get_contents'分解为数组

> ID：15900290
> 
> 赞同：0
> 
> 时间：2013-04-09T11:10:29.720
> 
> 标签：php, ios, objective-c, json, post

在我的 ios 应用程序代码中，我在 HTTPBody 中传递了一个 NSDictionary，因此我的 php 可以检查用户是否存在于数据库中。

```
-(void)checkUser
    {
      NSDictionary *userDict = [NSDictionary dictionaryWithObjectsAndKeys:
      sessionId, @"sessionId",
      sessionName, @"sessionName",
      nil];

      NSData *jsonData = [NSJSONSerialization dataWithJSONObject:userDict
                        options:NSJSONWritingPrettyPrinted error:nil];
      NSString *jsonString = [[NSString alloc] initWithData:jsonData
      encoding:NSUTF8StringEncoding];

      // initialize and open the stream
      NSURL *url = [NSURL URLWithString:@"http://www.mysite.com/userValidate.php"];
      NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
      [request setHTTPMethod:@"POST"];
      [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
      [request setHTTPBody:[jsonString dataUsingEncoding:NSUTF8StringEncoding]];

      [NSURLConnection connectionWithRequest:request delegate:self];
    } 
```

在我使用的 PHP 文件中

```
$raw = file_get_contents('php://input'); 
```

回来

```
post = "{\n \"sessionId\" : \"132156\",\n \"sessionName\" : \"My Name\"\n}"; 
```

我关注了这篇文章[https://stackoverflow.com/a/5078426/1333294](https://stackoverflow.com/a/5078426/1333294)并将此方法添加到我的 PHP 文件中

```
 function getTestPostData()
    {
     $post_data = explode( "\n", file_get_contents('php://input') );
     $result = array();

     foreach( $post_data as $post_datum ) {
         $pair = explode(":", $post_datum );
         $result[urldecode($pair[0])] = urldecode($pair[1]);
       }
     return $result;
    } 
```

现在我得到

```
 explode = {
        " \"sessionId\" " = " \"132156\",";
        " \"sessionName\" " = " \"My Name\"";
        "{" = "";
        "}" = "";
    }; 
```

我怎样才能进一步“清理”阵列，这样我的阵列就会像

```
 "sessionId" = "132156";
        "sessionName" = "My Name"; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:12:32.993

它看起来像一个 json 数组。尝试将绳子送入`json_decode()`

```
function getTestPostData()
{
    $post_data = file_get_contents('php://input');
    $result = json_decode( $post_data, true );
    return $result;
} 
```

这可以进一步减少，但为了清楚起见，请使用您的原始变量。

**编辑**：添加了第二个参数，以返回数组与对象

# css - 默认情况下，为文档的所有相关标签设置 zoom=1 属性时的缺点？

> ID：15900301
> 
> 赞同：2
> 
> 时间：2013-04-09T11:11:05.470
> 
> 标签：css, internet-explorer-8, haslayout

我为客户开发 IE8。经常发生 css 设置不起作用（例如自动换行），当我调查一个常见原因时，没有为标签设置 hasLayout = true (resp. zoom=1) 属性。我想如果我只是提前设置我的默认样式表 zoom=1 就不会再出现这个问题了？有什么反对它的吗？当所有标签都默认设置了 zoom=1 属性时，是否存在某些其他潜在问题？我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:10:53.500

我不会将 zoom:1 设置为默认值。如果您需要 hasLayout 触发，则可以添加

```
*
{
  zoom:1
} 
```

作为调试的一部分，但是当您决定需要 hasLayout = true 时，请花一些时间缩小选择器的范围，使其仅针对您需要它定位的元素。

我已经看到以前的工作布局被一揽子设置缩放打破：1。恕我直言，最好了解需要修复的特定场景，因为这可能会在未来有所帮助。

zoom:1 的所有默认设置都告诉你 IE7\8 是一个有缺陷的废话，无论如何你都知道 :-)

# windows - 用于在 VC++ 上发送免费 ARP 请求和接收 ARP 回复数据包的 RAW 套接字类型

> ID：15900302
> 
> 赞同：1
> 
> 时间：2013-04-09T11:11:05.783
> 
> 标签：windows, arp, raw-sockets

在 VC++ 上发送免费 ARP 请求和接收 ARP 回复包需要什么类型的 RAW 套接字。

int s = socket(AF_PACKET, SOCK_DGRAM, htons(ETH_P_ARP));

Windows的相应代码应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T07:02:14.830

我一直在试图弄清楚同样的事情。但似乎你不能在 Windows 中这样做：在 Windows 中你只能构造 Internet 层数据包，但 ARP 在链路层。所以如果你真的必须这样做，我认为你需要使用winPcap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T00:21:42.940

是的。如果以太网，Windows 不允许您在顶部发送 RAW 流量，但可以发送 RAW 以太网流量。

因此，如果您构建自己的以太网标头，则可以发送 ARP 数据包。

# signalr - GlobalHost.ConnectionManager.GetHubContext & Clients.Others

> ID：15900304
> 
> 赞同：1
> 
> 时间：2013-04-09T11:11:09.920
> 
> 标签：signalr

我似乎在打电话时遇到问题：

```
Clients.Others.SomeJavascriptFunction; 
```

当我使用

```
GlobalHost.ConnectionManager.GetHubContext("MyHub"); 
```

我似乎只能让它在集线器内工作。任何人都可以对此有所了解。

问候

麦克风

**更新**

在大卫发表评论后

我发现我可以做到以下几点：

```
public class MyHub1 : Hub
{        
    public static HubConnectionContext MyProperty { get; set; }        

    public void Start()
    {
        MyProperty = Clients;
    }        
} 
```

然后在我的 js 中调用 Start

```
 $.connection.hub.start().done(function () {
    sig.server.start();
}); 
```

然后允许我从我的 api 控制器调用我的函数

```
[HttpPost]
    public SaveResult SaveChanges(JObject saveBundle) {
        var changes = _contextProvider.SaveChanges(saveBundle);

        var stuff = MyHub1.MyProperty;

        stuff.Others.refreshToDos();

        return changes;
    } 
```

也许是一个完整的黑客，但似乎工作。

任何人都可以看到这有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T14:13:25.163

其他只有在您有要排除的连接 ID 时才有意义。其他是 Clients.AllExcept(Context.ConnectionId) 的简写。当您在集线器之外时，没有当前连接 ID，因此您无法使用其他。

您需要将连接 ID 从客户端传递给 API 以用于执行 AllExcept。

# android - Android自定义视图：设置画布大小以包装位图

> ID：15900305
> 
> 赞同：5
> 
> 时间：2013-04-09T11:11:12.857
> 
> 标签：android, android-canvas, android-view, android-custom-view

我有一个自定义视图`Canvas`。我正在使用此画布在其上显示位图，然后我可以在触摸时绘制位图。当我加载位图时，它比视图大小大很多，我看不到整个位图（这是用相机拍摄的照片）。我尝试创建缩放位图，然后将其绘制在画布上，但在这种情况下，位图较小，并且画布占用了整个可用的布局空间。我以编程方式添加此视图，而不是 int xml 布局。我已将此设置为视图但不起作用：

```
fdvImage = new ImageEditingView(this, b);
RelativeLayout.LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
lp.addRule(RelativeLayout.CENTER_IN_PARENT, 1);
fdvImage.setLayoutParams(lp); 
```

这是我的视图构造函数：

```
public ImageEditingView(Context c, Bitmap b) {
    super(c);
    this.setMinimumHeight(0);

    mBitmap = Bitmap.createScaledBitmap(b, b.getWidth()/2, b.getHeight()/2, true);
    mCanvas = new Canvas(mBitmap);
} 
```

在`onDraw`我有这个：

```
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
} 
```

**所以，我的问题是：**为什么即使位图更小，画布也会占用所有布局空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:18:30.547

使用此代码绘制位图

```
canvas.drawBitmapMesh(yourBitmap, 1, 1,vertices, 0, null, 0,
                                        paint); 
```

根据您的视图制作顶点

**[编辑]**

```
 float[] vertices = new float[8];
 vertices[0]=0; vertices[1]=0; vertices[2]=100; vertices[3]=0;
 vertices[4]=0;vertices[5]=200; vertices[6]=100; vertices[7]=200; 
```

将 100 更改为您的宽度，将 200 更改为高度

# c# - 集合 ViewSource 通过输入文本框来过滤列表框

> ID：15900306
> 
> 赞同：2
> 
> 时间：2013-04-09T11:11:14.403
> 
> 标签：c#, wpf, textbox, listbox, collectionviewsource

我在 WPF 中有一个列表框，其中列出了用户的名字和姓氏。我有一个文本框，我试图在输入名称时进行过滤。这是我正在尝试的：（当我在文本框中输入时，没有任何内容被过滤）

这是我的虚拟机

```
 #region Members

        private CollectionViewSource usercvs = new CollectionViewSource();
        private string searchString;

        #endregion

        #region Properties

        public string SearchFilter
        {
            get
            {
                return this.searchString;
            }

            set
            {
                if (!string.IsNullOrEmpty(this.searchString))
                    AddFilter();

                usercvs.View.Refresh();    
                this.searchString = value;
            }
        }

        #endregion

        #region Methods

        private void AddFilter()
        {
            usercvs.Filter -= new FilterEventHandler(Filter);
            usercvs.Filter += new FilterEventHandler(Filter);

        }

        private void Filter(object sender, FilterEventArgs e)
        {
            // see Notes on Filter Methods:
            var src = e.Item as User;
            if (src == null)
                e.Accepted = false;
            else if (src.LastName != null && !src.LastName.Contains(SearchFilter))
                e.Accepted = false;
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:15:37.057

向您的 ViewModel 添加一个附加属性，该属性公开 CollectionViewSource 并将您的 ListBox 绑定到该属性。

```
public CollectionViewSource FilteredUsers{
  get {
    return usercvs.View;
  }
} 
```

对`ObservableCollection`应用任何过滤器时 不会更改`CollectionViewSource`，因此您将始终看到所有项目。Filter 被应用到 CollectionViewSource 并且过滤的结果可以通过类的属性 View 访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T13:55:50.993

有了这个

```
 public ICollectionView FilteredUsers
        {
            get
            {
                return usercvs.View;
            }
        } 
```

# java - Json:java.lang.ClassNotFoundException

> ID：15900307
> 
> 赞同：1
> 
> 时间：2013-04-09T11:11:17.330
> 
> 标签：java, json, spring-mvc, classnotfoundexception, java-web-start

我正在尝试在 Java Web 中使用 JSON。通过调用 JSONArray.fromObject() 将 List 转换为 JSONArray，我确定我的论点是正确的，但抛出了如下异常：

```
java.lang.ClassNotFoundException: org.apache.commons.lang.exception.NestableRuntimeException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1645)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2733)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1124)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1612)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
    at org.vclub.model.json.Page2Json.getJsonFromList(Page2Json.java:10)
    at org.vclub.controller.TopicController.loadMoreTopic(TopicController.java:70)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:185)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:502)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:465)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:863)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:792)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:851)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:767)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619) 
```

顺便说一句，从谷歌的答案中学习，我添加了所需的库。

```
commons-beanutils-1.8.3.jar
commons-collections-3.2.1.jar
commons-lang3-3.1.jar
commons-logging-1.1.2.jar
ezmorph-1.0.6-sources.jar 
```

它仍然不起作用。请帮我。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:17:45.040

查看：

[http://json-lib.sourceforge.net/](http://json-lib.sourceforge.net/)

你需要`commons-lang 2.5`在你的类路径中。目前你有`commons-lang3-3.1.jar`哪个没有`org.apache.commons.lang.`包但有 `org.apache.commons.lang3.`.

在您的类路径中添加`commons-lang 2.5`或`2.6`，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:18:52.833

我想你的问题在这里：`commons-lang3-3.1.jar`。您已经添加了 commons lang 版本 3。请查看[commons lang 的主页](http://commons.apache.org/proper/commons-lang/)：

> 请注意，Lang 3.0（和后续版本）使用与以前版本（org.apache.commons.lang）不同的包（org.apache.commons.lang3）

这意味着您可能应该使用 commons lang 版本 2。

# git - 如何在自托管 Team Foundation Server 2012 上创建 GIT 项目

> ID：15900311
> 
> 赞同：2
> 
> 时间：2013-04-09T11:11:37.617
> 
> 标签：git, visual-studio-2012, tfs

谁能告诉我如何在自托管的 Team Foundation Server 2012 上创建 GIT 项目？我知道在微软托管的 TFS 上是可能的。

我已将自托管 TFS 更新为 Update 2（并且也将我自己的 VS2012 更新为 Update 2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:24:34.223

`on-premise`TFS 2012 服务器不支持此功能。我读到的最后一件事（我现在正在努力寻找）建议大约需要 12 个月才能将其提供给本地解决方案。

# php - 我可以在客户端移动应用程序上使用 PHP

> ID：15900312
> 
> 赞同：0
> 
> 时间：2013-04-09T11:11:39.320
> 
> 标签：php, client-side, html5builder

我在我的 PC 上安装了 HTML5 Builder，并制作了我的第一个“hello world”客户端移动应用程序。客户页面是`uHelloWorld.js`. 这是 Javascript，但我想知道我是否可以在客户端页面上使用 PHP，还是 PHP 仅用于服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:47:58.683

在 HTML5 Builder 中使用客户端移动应用程序时，您无法将 .php 代码部署到设备。事实上，您也不部署 .js。是的，您在 js 中编写代码，但在部署期间，代码通过构建在 Android SDK 或 phonegap 服务上编译成 .apk（适用于 Android 平台）。但是，您可以安装 KSWEB 并尝试运行您的 php [KSWEB:server](https://play.google.com/store/apps/details?id=ru.kslabs.ksweb&feature=search_result#?t=W251bGwsMSwxLDEsInJ1LmtzbGFicy5rc3dlYiJd "KSWEB：服务器")。我没有尝试过使用 HTML5 Builder 生成的 php 代码，但它可能会起作用。

您在调试器中看到的是真实的，HTML5 Builder 源于 RadPHP（PHP 的前 Delphi）。这些工具旨在使用 RAD 组件开发 php 应用程序。所以一些内部操作可能仍然是指旧范式。这绝不是使用标准 HTML5 Builder 工作流程开发/部署到移动设备的 php 代码的标志。再次记住，在部署时，会发生转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:13:37.610

要运行 PHP，您需要安装 PHP 解释器和运行时。任何可以安装 PHP 的系统都可以运行 PHP 脚本。

现在，寻找适用于移动设备的 PHP 版本。基本上：没有。

所以不行。

# php - 删除除换行符、回车符、制表符和间距之外的所有控制和非打印字符

> ID：15900313
> 
> 赞同：3
> 
> 时间：2013-04-09T11:11:40.270
> 
> 标签：php, regex, preg-replace

原谅我，但是当我看正则表达式时，它就像一只盯着新栅栏的山羊。

这个 ( `/\p{C}+/u`) 似乎工作正常，但去掉了换行符/回车符和制表符：

```
$str = "
<pre>
    te" . chr(31) . "st

   test
</pre>
";

echo $str;
echo preg_replace('/\p{C}+/u', '',$str); 
```

我怎么把那些留在里面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T11:29:33.757

试一试：

```
$str = "
<pre>
    te" . chr(31) . "st

   test
</pre>
";

echo $str;
echo '=====================================',"\n";
echo preg_replace('/[^\P{C}\s]+/u', '',$str); 
```

我刚刚否定了该属性`\p{C}`并将其添加到一个否定字符类中，该类还包括所有空格字符。

# jquery - jqgrid getRowData（rowId）没有返回正确的值

> ID：15900319
> 
> 赞同：0
> 
> 时间：2013-04-09T11:11:59.987
> 
> 标签：jquery, jqgrid

从那时起，我已将 jgrid 从 3.7.2 升级到 4.4.4 getRowData(rowId) 不起作用（即不返回行详细信息）

我相应的代码片段是

```
....
....
subGridRowExpanded: function(subgrid_id, row_id) {
...
var temprecord = new Array();
temprecord = jq("#dataGrid").getRowData(row_id);            
...
}
..... 
```

在上面的例子中

jqgrid 3.7.2 返回

```
temprecord : Object
name : abc
place : xyz 
```

jqgrid 4.4.4 返回

```
temprecord as empty Object 
```

我也试过这个变种 jq('#dataGrid').jqGrid('getRowData','row_id'); 但即使它不起作用

注意：在我的网格中，有几列对用户不可见（未显示）。在某些论坛中，我记得我读到 getRowData 有一个错误，当在某些列对用户不可见（显示：无）的网格中使用时。

这是真的 ？当网格包含一些不可见的列时，谁能告诉我如何使用 jgrid 4.4.4 版本获取行数据

# twitter-bootstrap - 如何使用 Simple Form 和 Bootstrap 将提交按钮放置在与输入相同的行上？

> ID：15900320
> 
> 赞同：6
> 
> 时间：2013-04-09T11:12:00.213
> 
> 标签：twitter-bootstrap, simple-form

使用 Simple Form 和 Bootstrap，我希望以下内容出现在行内，而不是在输入选择下方有提交按钮。

```
<%= simple_form_for :select_rollout, :html => {:class => "form-inline"}, do |f| %>
  <%= f.input :rollout_id, collection: @rollout_options, :label => false %>
  <%= f.button :submit, "Apply" %>
<% end %> 
```

以下解决方案仅适用于输入（提交按钮呈现在输入的 div 之外）：

```
<%= form.input :city, label: 'City/State/Zip', input_html: {class: 'span3'}, wrapper_html: {class: 'controls controls-row'} do %>
  <%= form.input_field :city, class: 'span1' %>
  <%= form.input_field :state, class: 'span1' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T08:47:32.580

为了解决这个问题，我需要在输入块中使用**input_field** ，并在块的包装器上使用**内联表单样式：**

```
<%= f.input :rollout_id, :label => false, wrapper_html: {class: "form-inline"} do %>
  <%= f.input_field :rollout_id, collection: @rollout_options, :label => false %>
  <%= f.button :submit, "Apply", :class => "btn-primary" %>
<% end %> 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-10T09:07:48.727

对于以后阅读本文的任何人，我通常只是将输入包装并提交到弹性框中。您可以在之后提供您希望每个元素看起来如何的样式（即：给表单组宽度：100%

```
<%= simple_form_for :select_rollout, :html => {:class => "form-inline"}, do |f| %>
  <div class="flexbox-class">
    <%= f.input :rollout_id, collection: @rollout_options, :label => false %>
    <%= f.button :submit, "Apply" %>
  </div>
<% end %>

.flexbox-class {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  .form-group {
    width: 100%;
  }
  .btn-primary {
    margin-bottom: 16px
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:44:27.493

尝试将`pull-left`or`pull-right`类添加到您的元素中。这会将`float: left`or`float: right`属性添加到您的对象。

但如果 float 不适合您，请创建您自己的名为 inline 的类，如下所示：

`.inline { display: inline; }`

或（取决于您网站的实施）

`.inline { display: inline-block; }`

并将`inline`类添加到您的对象中。

# c++ - 在 Windows 上连接到 postgresql

> ID：15900322
> 
> 赞同：0
> 
> 时间：2013-04-09T11:12:14.030
> 
> 标签：c++, postgresql

当我为某些客户端编写代码时`postgresql`，`cpp`我总是对这个简单的代码有疑问：

```
#include <iostream>
#include <libpq-fe.h>
#include <stdio.h>
using namespace std;

char pghost[] = "localhost";
char pgport[] = "5432";
char pgbase[] = "baza";
char pguser[] = "postgres";
char pgpass[] = "server";
char conninf[] = "host=localhost port=5432 database=postgres user=postgress password=server";

int main(){    
  PGconn *conn = PQsetdbLogin(pghost,pgport,NULL,NULL,pgbase,pguser,pgpass);

  if (PQstatus(conn) == CONNECTION_OK)
  {
    //if connected
    cout<<"Ok.\n";
  }
  else
  {  
    cout<<"ERROR: %s\n";
    PQfinish(conn);
    }
    return 0;
  }
} 
```

我有一个错误输出

```
C:\Users\Tom\Desktop\connect\connect.cpp|16|undefined reference to `PQsetdbLogin'| 
```

以及库中其他功能的很多错误。

我做错了什么？如何在 Windows 上正确连接到这个库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:31:24.987

从[文档](http://www.postgresql.org/docs/9.2/static/libpq-build.html)：

```
testlibpq.o: In function `main':
testlibpq.o(.text+0x60): undefined reference to `PQsetdbLogin'
testlibpq.o(.text+0x71): undefined reference to `PQstatus'
testlibpq.o(.text+0xa4): undefined reference to `PQerrorMessage'

This means you forgot -lpq. 
```

尝试传递`-lpq`标志，看看您提到的其他错误是否消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T14:07:57.593

您的 libpq-fe.h 文件包含： extern PGconn *PQsetdbLogin ??

还要检查你的库。可能是缺少 libq 链接器。

在构建项目时尝试包含 include/postgresql -L/lib -lpq。

# sql-server-2008 - 如何查找表中列的总和并将总和插入为新行

> ID：15900323
> 
> 赞同：0
> 
> 时间：2013-04-09T11:12:15.163
> 
> 标签：sql-server-2008

我在执行某种查询后得到了这个结果

![在此处输入图像描述](https://i.stack.imgur.com/oSwlU.png)其中有这些行：

我想为给定结果中的每个学生计算总分 (12/38 + 14/23 + ....) 并将其插入新行

StudentName ,StudentId ,term, " **Total** " 作为 Subject, " **Calculated TotalMarks** " 作为 Marks, Class, Dicision,id, **null**作为 DivisionSubject_SubjectProirity

有什么办法吗....请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:24:58.533

试试这个查询。

首先`select`将所有值放入**临时表**

```
select 
       StudentName,
       StudentId,
       term,
       cast(sum(convert(int,substring(Marks,1,CHARINDEX('/',Marks,1)-1))) as varchar) As 'Subject',
       cast(sum(convert(int,substring(Marks,CHARINDEX('/',Marks,1)+1,len(Marks)))) as varchar) As Marks,
       class,
       division,
       id
into #t
from tablename
group by StudentName,StudentId,term,class,division,id 
```

现在使用**批量插入**

```
insert into table_insert
(
StudentName
,StudentId
,term
,[Subject]
,Marks
,class
,division
,id
,DivisionSubject_SubjectPriority
)
select 
StudentName
,StudentId
,term
,[Subject]
,Marks
,class
,division
,id
,NULL
from #t 
```

# c++ - 来自对象向量的虚函数调用的模板版本

> ID：15900329
> 
> 赞同：2
> 
> 时间：2013-04-09T11:12:30.370
> 
> 标签：c++, templates, vector, polymorphism

是否可以通过模板实现类似于下面的伪代码？如果是这样，在这里获得正确的编译时多态性的正确方法是什么？谢谢！

```
class Base {virtual void DoSomething();};
class Derived:public Base{void DoSomething();};
class Derived1:public Base{void DoSomething();};
class Derived2... etc.

std::vector<Base*> bases;
bases.push_back(new Derived());
bases.push_back(new Derived1());
etc...

bases[i]->DoSomething(); 
```

*编辑*

由于上述内容引起了一些混乱，我想我应该添加一个我刚刚发现的建议的起始解决方案的示例，该解决方案是针对与我自己的问题类似的问题给出的。这是从 2001 年的旧澳大利亚 linux c++ 板中提取的 [http://lists.linux.org.au/archives/tuxcpprogramming/2001-August/000135.html](http://lists.linux.org.au/archives/tuxcpprogramming/2001-August/000135.html)：

```
squareTy square;
twiceTy twice;
thriceTy thrice;

functionBaseTy* fns[] = { &square, &twice, &thrice };

template <class T, int N>
inline
void my_algorithm(T* functions[N])
{
 // This deduces T and the array size N
  my_real_algorithm(functions, N);
} 

template <class T> // not inline
void my_real_algorithm(T* functions, int n)
{
  // Loop here ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:17:04.913

如果您的容器（向量）跟踪基类实例指针的集合，则您需要为每个实例支付标准的 vtable 指针/间接（或自定义等价物，这可能不值得付出努力）。

仅当您在编译时知道具体（派生）类型时，静态消除 vtable/函数指针开销的可能性才会出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:18:37.887

我怀疑这是可能的，下面的代码怎么样？

```
std::vector<Base*> bases;
bases.push_back(new Derived());
bases.push_back(new Derived1());

//...

bases[i]->DoSomething(); 
```

# arduino - Arduino 可以在微秒内对 1-4 kHz 的音频进行采样吗？

> ID：15900330
> 
> 赞同：5
> 
> 时间：2013-04-09T11:12:31.940
> 
> 标签：arduino, signal-processing, frequency, sampling

我刚刚将[驻极体麦克风](http://en.wikipedia.org/wiki/Electret_microphone)连接到 Arduino，我想在 1  [kHz](http://en.wikipedia.org/wiki/Hertz#SI_multiples)和 4 kHz 的范围内进行采样。

我知道这仅限于机器代码和[ADC](http://en.wikipedia.org/wiki/Analog-to-digital_converter)，所以我试图保持[草图](http://www.arduino.cc/en/Tutorial/Sketch)简单。

是否可以使用下面的草图在这些频率之间进行采样？

```
const int analogPin = 0;
int ledPin = 13;

void setup() {
    pinMode(ledPin, OUTPUT);
}

void loop() {
    int mn = 1024;
    int mx = 0;
    for (int i = 0; i < 5; ++i) {
        int val = analogRead(analogPin);
        mn = min(mn, val);
        mx = max(mx, val);
    }
    if (mx-mn >= 50) {
        digitalWrite(ledPin, HIGH);
    }
    else {
        digitalWrite(ledPin, LOW);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:03:46.280

Arduino 是一个原型平台，由许多硬件板和一个软件抽象层组成。对于这样的问题，考虑底层硬件的功能很有用，因为它们提供了最终限制。我假设您使用的是 Arduino Uno/Nano，Due 的情况有所不同。

根据数据表，每个 ADC 读数（除了第一个）需要 13 个 ADC 时钟周期。ADC 时钟（不同于 MCU）时钟是通过将系统时钟除以某个因子（至少为 2）得出的。因此，在 16Mhz 板上，这相当于每秒 60 万个样本。到目前为止，一切都很好。然而，事情还没有结束，您仍然需要读取数据。如果你使用中断，即使你做一些非常简单的事情，经验表明你会损失大约 100 个时钟来中断处理。现在您的采样率降至 126K 样本/秒。但这是理论上的最大值。

数据表指出，要获得 ADC 的最大精度，需要 50kHz - 200kHz ADC 时钟。在 Arduino 代码 (in `wiring.c`) 中，选择了 128 的除法因子：

```
sbi(ADCSRA, ADPS2);
sbi(ADCSRA, ADPS1);
sbi(ADCSRA, ADPS0); 
```

这意味着每次转换需要 128*13 = 1764 个时钟，理论上每秒最多产生 10K 个样本。考虑到该`readAnalog()`函数所做的不仅仅是启动 ADC 转换并等待它完成，这比这要差一些，但应该不会差太多。这当然不涉及您的代码：您对结果进行的任何处理`readAnalog()`都会使捕获更多样本变得更加困难。但是，是的，要以 4Khz 捕获，您需要确保您的代码花费少于 1.5k 时钟周期/样本，这应该是可行的。请注意，如果您像在发布的代码中那样进行五次读取，如果您的代码执行的代码很少，则最大捕获速率将为 2kHz。

* * *

至于如何捕获数据，您需要处理这样一个事实，即没有放大的麦克风不会为您提供 0-5V 读数，如果您使用`analogRead()`. 事实上，麦克风输出电压从正向负摆动，但是，负电压不会被 ADC 拾取，并且仅显示为零，除非您给麦克风提供电压偏移。

* * *

我不确定您将最小幅度与最大幅度进行比较的代码应该做什么。您想将音频数字化吗？在这种情况下，您需要保存从 收集的所有幅度读数`analogRead()`，然后您可以在另一台计算机上对它们运行 FFT：Arduino 很可能不够快，无法对数据进行频率分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:34:36.990

我听说过，或者更确切地说记得读过，ADC 每秒可以处理多达 10k 个样本，所以它应该可以达到 5 kHz。但是，我还没有尝试过，也没有链接来备份它。

试试看。

现在我知道一些 Arduino 库函数很慢，尤其是具有数百个周期开销的 DigitalRead/Write。其中大部分是健全性检查，允许人们只执行 DigitalRead/Write 而无需考虑设置所有内容。

但是，为了发挥最大性能，您可以考虑编写针对您的用例进行优化的自己的 AnalogRead。

至少有一些关于这个主题的链接：

*   *[引脚 I/O 性能](http://jeelabs.org/2010/01/06/pin-io-performance/)*(JeeLabs)

*   [用于更快访问的 C++ 模板方法](http://jeelabs.org/2010/01/12/c-templates/)(JeeLabs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-06T21:35:48.463

我碰巧刚刚使用 Arduino Uno 和您的类似代码尝试过这个，我已经能够平均每秒采样 8000 次。那是 4 kHz 的奈奎斯特频率，所以你很好，但误差不大。

# javascript - 淘汰映射 - 多个数据源到一个视图模型

> ID：15900333
> 
> 赞同：3
> 
> 时间：2013-04-09T11:12:45.543
> 
> 标签：javascript, .net, json, knockout.js, knockout-mapping-plugin

我目前正在尝试分解大部分数据，这些数据由对 .NET Web 服务的 $ajax 调用提供，当数据映射到 Knockout 视图模型时，这会导致页面上的脚本超时。我在文档中注意到您**应该**能够将多个数据源绑定到一个视图模型，如下所示：

```
var viewModel = ko.mapping.fromJS(alice, aliceMappingOptions);
ko.mapping.fromJS(bob, bobMappingOptions, viewModel); 
```

我已经在自己的代码中尝试过，如下所示，在第一遍我绑定到一个新的视图模型，然后在随后的遍中我尝试重新绑定到同一个视图模型：

```
if(currLoadIndex == 0)
{
    currViewModel = ko.mapping.fromJS(data, mappingOptions);
}
else{
    ko.mapping.fromJS(data, mappingOptions, currViewModel);
} 
```

然而，当我将它绑定到我的模板时，这只是给我留下了我加载的最后一部分数据。我试过在我的“mappingOptions”中设置一个键，但这没有帮助。任何人都可以看到我做错了什么明显的事情吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:18:43.773

可能不是最好的解决方案，但这解决了我的问题：

```
if(currLoadIndex == 0)
{
     currViewModel = ko.mapping.fromJS(data, mappingOptions);
}
else{
     var tmpModel = ko.mapping.fromJS(data, mappingOptions);
     for(i = 0; i < tmpModel.GetProductListResult().length; i++)
     {
         currViewModel.GetProductListResult().push(tmpModel.GetProductListResult()[i]);
     }
} 
```

# python - 带有参数数据的 Python 请求发布

> ID：15900338
> 
> 赞同：201
> 
> 时间：2013-04-09T11:12:56.547
> 
> 标签：python, httprequest, python-requests, http-status-codes

这是 API 调用的原始请求：

```
POST http://192.168.3.45:8080/api/v2/event/log?sessionKey=b299d17b896417a7b18f46544d40adb734240cc2&format=json HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: application/json
Content-Length: 86
Host: 192.168.3.45:8080
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)

{"eventType":"AAS_PORTAL_START","data":{"uid":"hfe3hf45huf33545","aid":"1","vid":"1"}}""" 
```

此请求返回成功 (2xx) 响应。

现在我正在尝试使用以下方式发布此请求`requests`：

```
>>> import requests
>>> headers = {'content-type' : 'application/json'}
>>> data ={"eventType":"AAS_PORTAL_START","data{"uid":"hfe3hf45huf33545","aid":"1","vid":"1"}}
>>> url = "http://192.168.3.45:8080/api/v2/event/log?sessionKey=9ebbd0b25760557393a43064a92bae539d962103&format=xml&platformId=1"
>>> requests.post(url,params=data,headers=headers)
<Response [400]> 
```

对我来说一切都很好，我不太确定我发布的错误是什么以获得 400 响应。

* * *

## 回答 #1

> 赞同：341
> 
> 时间：2013-04-09T11:19:20.547

`params`用于 GET 样式的 URL 参数，`data`用于 POST 样式的正文信息。*在请求中提供这两种*类型的信息是完全合法的，您的请求也这样做，但是您已经将 URL 参数编码到 URL 中。

您的原始帖子包含*JSON*数据。`requests`可以为您处理 JSON 编码，它也会设置正确的`Content-Type`标头；您需要做的就是将要编码为 JSON 的 Python 对象传递到`json`关键字参数中。

您也可以拆分 URL 参数：

```
params = {'sessionKey': '9ebbd0b25760557393a43064a92bae539d962103', 'format': 'xml', 'platformId': 1} 
```

然后发布您的数据：

```
import requests

url = 'http://192.168.3.45:8080/api/v2/event/log'

data = {"eventType": "AAS_PORTAL_START", "data": {"uid": "hfe3hf45huf33545", "aid": "1", "vid": "1"}}
params = {'sessionKey': '9ebbd0b25760557393a43064a92bae539d962103', 'format': 'xml', 'platformId': 1}

requests.post(url, params=params, json=data) 
```

该`json`关键字是`requests`2.4.2 版本中新增的；如果您仍然必须使用旧版本，请使用`json`模块手动编码 JSON 并将编码结果作为`data`密钥发布；在这种情况下，您必须显式设置 Content-Type 标头：

```
import requests
import json

headers = {'content-type': 'application/json'}
url = 'http://192.168.3.45:8080/api/v2/event/log'

data = {"eventType": "AAS_PORTAL_START", "data": {"uid": "hfe3hf45huf33545", "aid": "1", "vid": "1"}}
params = {'sessionKey': '9ebbd0b25760557393a43064a92bae539d962103', 'format': 'xml', 'platformId': 1}

requests.post(url, params=params, data=json.dumps(data), headers=headers) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-09T11:17:26.210

将数据设置为：

```
data ={"eventType":"AAS_PORTAL_START","data":{"uid":"hfe3hf45huf33545","aid":"1","vid":"1"}} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-09T11:16:34.647

将响应分配给一个值并测试它的属性。这些应该告诉你一些有用的东西。

```
response = requests.post(url,params=data,headers=headers)
response.status_code
response.text 
```

*   status_code 应该只是重新确认您之前给出的代码，当然

# css - 自定义字体在 Zope/Plone 的 IE8 中不起作用

> ID：15900343
> 
> 赞同：3
> 
> 时间：2013-04-09T11:13:13.607
> 
> 标签：css, internet-explorer-8, plone, font-face, zope

我正在使用 Zope/Plone4 CMS 制作一个 Web 门户。

好吧，我曾经`@font-face`声明标题的排版。代码和字体来自 Font-squirrel。我在本地机器上制作了网站（没有在我的电脑上安装字体），一切正常。但是在 Plone 中，IE8 根本不渲染字体。只有 IE8，当 IE7 和 IE9 完美呈现时（？）

我用谷歌字体做了一个测试。一切正常，所有浏览器。

我认为错误可能来自读/写权限或其他原因，因为如果我退出，字体**根本不会在任何 IE 中呈现。**这解释了为什么 Google 字体正确呈现（字体托管在 Plone 之外）。但没有解释唯一的IE8问题......

我在这里发布代码，好吧，我认为这无关紧要，但如果它有帮助......

```
 @font-face {
        font-family: 'TeXGyreAdventorRegular';
        src: url('../font/texgyreadventor-regular-webfont.eot');
        src: url('../font/texgyreadventor-regular-webfont.eot?#iefix') format('embedded-opentype'),
             url('../font/texgyreadventor-regular-webfont.woff') format('woff'),
             url('../font/texgyreadventor-regular-webfont.ttf') format('truetype'),
             url('../font/texgyreadventor-regular-webfont.svg#TeXGyreAdventorRegular') format('svg');
        font-weight: normal;
        font-style: normal;
     }

     h1 {font-family:'TeXGyreAdventorRegular'} 
```

我不是 Zope 开发人员，也没有编程技能，不知道我是否正在以正确的方式寻找解决方案。我的意思是，我认为 CSS 是正确的，问题来自另一方。但是在绝对放弃该站点的自定义字体之前，想利用我手中的所有可能性。

注意：Google 字体可以正常工作，但我测试过的所有字体在 Windows 中都呈现得非常糟糕，并且该站点必须非常易于访问（并且清晰易读）。我宁愿避免它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-30T09:36:12.723

您必须添加一个 .eot（嵌入式开放式）文件。这种格式是微软在 15 年前创建的。这是 IE8 及以下版本在使用 @font-face 时唯一能识别的格式。

您可以使用免费转换器[ttf2oet轻松制作](http://code.google.com/p/ttf2eot/)

# flash - 在时间范围内计数到 24:00（24 小时）lineair 的时钟的 Flash 动画？

> ID：15900347
> 
> 赞同：0
> 
> 时间：2013-04-09T11:13:26.687
> 
> 标签：flash, time, counter, clock

我正在制作基于一段时间的动画。我正在制作 3600 帧的时间线，我需要计数到 00:00 到 24:00 的计数器（每个周期为 00:05 -> 00:05, 00:10 .. .. 00:55, 01： 00, 01:05)

它应该测量 3600 帧内的速度（或何时进入下一个 00:05）。

有没有可能用代码做到这一点，或者我应该每隔几帧用 +00:05 更改时钟）。

我希望有人能给我一些代码或建议。

谢谢！

# .net - 暴力破解时防止填充是无效异常

> ID：15900355
> 
> 赞同：1
> 
> 时间：2013-04-09T11:13:53.923
> 
> 标签：.net, encryption, exception-handling, cryptography, aes

我使用此代码解密 AES 数据：

```
public static String decrypt(String ciphertext, String password)
{
    byte[] cipherdata = System.Convert.FromBase64String(ciphertext);

    byte[] iv = new byte[AESBlockSize * 4];
    Array.Copy(cipherdata, 0, iv, 0, iv.Length);

    byte[] input = new byte[cipherdata.Length - iv.Length];
    Array.Copy(cipherdata, iv.Length, input, 0, input.Length);

    Rfc2898DeriveBytes passwordDB = new Rfc2898DeriveBytes(password, iv, PBKDF2Iterations);
    byte[] keyBytes = passwordDB.GetBytes(256 / 8);

    RijndaelManaged symmetricKey = new RijndaelManaged();

    symmetricKey.Mode = CipherMode.CBC;
    symmetricKey.Padding = PaddingMode.ISO10126;

    ICryptoTransform decryptor = symmetricKey.CreateDecryptor(keyBytes, iv);

    MemoryStream memoryStream = new MemoryStream(input);
    CryptoStream cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read);

    byte[] plainTextBytes = new byte[input.Length];

    int decryptedByteCount = cryptoStream.Read(plainTextBytes, 0, plainTextBytes.Length);

    memoryStream.Close();
    cryptoStream.Close();

    return Encoding.UTF8.GetString(plainTextBytes, 0, decryptedByteCount);
} 
```

当提供错误密码时，我`Padding is invalid and cannot be removed`在调用时遇到异常。`cryptoStream.Read`

使用错误密码时有什么方法可以防止此异常，因为我正在尝试进行暴力破解，并且异常处理起来很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:33:25.647

如果您只是暴力破解并设置`PaddingMode`为`None`，您将解密包含填充的最后一个块，您可以将其用于识别明文以及您正在检查的任何其他内容。

# jquery - jquery，我的函数被调用 x 次而不是一次

> ID：15900358
> 
> 赞同：1
> 
> 时间：2013-04-09T11:14:00.907
> 
> 标签：jquery

在页面 trigger.php 中，我正在加载 content.php，如下所示：

```
$(document).on('click', '#trigger', function () {
        $('#content').load('content.php');
}); 
```

在 content.php 我有这个 Jquery 代码：

```
$(function() {

    clickLike = function(el,el2) {
        alert(el+el2);
    }

    $(document).on('click', '.like', function(){
        clickLike($(this).attr('id'),'yes');
    });

    $(document).on('click', '#exit', function () { $('#content').html(''); });
    $(document).off('click', '.like', clickLike);

}); 
```

因此，当我第一次单击 #trigger 时，会加载 content.php，而当我单击 .like 时，我会收到一个警报。然后我点击退出，我再次加载 content.php，当我点击 .like 时，我现在有 2 个警报，如果我这样做 x 次，我将有 x 个警报。我不明白为什么 .off 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:29:49.233

每次执行 content.php 中的 jQuery 代码时，都会将 .like 的 onclick 函数与一个碰巧调用 clickLike() 的匿名函数绑定。

稍后在代码中，您似乎正在尝试使用 off() 取消绑定，以避免多个事件绑定，但是您将 clickLike 指定为要删除的处理程序，而这首先不存在。

要取消绑定事件处理程序，您需要指定您绑定的确切处理程序（您不能使用匿名函数执行此操作），或者根本不指定处理程序，在这种情况下，所有处理程序都将被取消绑定。

另外，我假设您只想在“退出”处理程序中解除绑定，而不是总是像上面那样。

所以我认为以下内容对你有用（但我还没有测试过）

```
$(function() {

    clickLike = function(el,el2) {
        alert(el+el2);
    }

    $(document).on('click', '.like', function(){
        clickLike($(this).attr('id'),'yes');
    });

    $(document).on('click', '#exit', function () { 
        $('#content').html(''); 
        $(document).off('click', '.like');
    });

}); 
```

# asp.net-mvc - Telerik MVC 上传控件消失

> ID：15900362
> 
> 赞同：0
> 
> 时间：2013-04-09T11:14:16.423
> 
> 标签：asp.net-mvc, file-upload, telerik, telerik-mvc

我有消失的 Telerik 上传控制 (mvc) 的问题。我有一个基本模板项目，页面上有一个 Telerik 上传控件 - 仅此而已。

设想：

1.  选择要上传的文件
2.  文件出现在带有上传文件的 div 中
3.  我点击删除按钮删除上传的文件
4.  上传控件消失并从 DOM 中删除

这只发生在 Chrome（版本 26.0.1410.43 m）中。在 FF 和 IE 上工作正常。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T02:37:47.390

我遇到了同样的问题，原因是teleric js中的remove函数会删除上传容器中的全部内容，重写处理这个问题的函数。

# github - 如何删除问题参考

> ID：15900363
> 
> 赞同：40
> 
> 时间：2013-04-09T11:14:18.877
> 
> 标签：github

1.  我有`issue #1`和`issue #2`在github上。
2.  我对`issue #1`这样的事情发表了评论：**“我认为问题 #2 与这个问题有关”**。
3.  现在在`issue #2`有关引用的消息`issue #2`的评论中`issue #1`出现。
4.  我删除我的评论`issue #1`。
5.  关于引用的消息`issue #2`仍然`issue #1`存在于`issue #2`评论中。

**如何从`issue #2`评论中删除有关引用的消息？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-01-15T14:26:47.443

当前无法在创建 GitHub 问题参考后删除它。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-09T14:48:46.853

您可以编辑提交消息：

[http://git-scm.com/book/en/Git-Tools-Rewriting-History#Changing-Multiple-Commit-Messages](http://git-scm.com/book/en/Git-Tools-Rewriting-History#Changing-Multiple-Commit-Messages)

# ruby-on-rails - Rails 中用户定义的 URL

> ID：15900364
> 
> 赞同：0
> 
> 时间：2013-04-09T11:14:19.073
> 
> 标签：ruby-on-rails

我在应用程序中有一个链接按钮

```
 = link_to "Hello" , :controller => "pages" , :action => "home" 
```

单击此链接，生成的 url 为“localhost:3000/pages/home”。但我想，url应该显示为=>“localhost:3000/hello” Rails有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:28:52.797

您可以设置一个[命名路线](http://guides.rubyonrails.org/routing.html#naming-routes)：

```
match 'hello' => 'pages#home', :as => :hello 
```

在您看来：

```
= link_to "Hello", hello_path 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:02:52.893

您可以根据需要命名 URL，并且可以在 routes.rb 中映射。在您的情况下，您可以使用`match` 以下示例：

```
in your route.rb
match 'hello' => 'pages#home', :as => :hello 
```

现在在您可以在[文档](http://guides.rubyonrails.org/routing.html)`link_to "hello", home_path` 中找到更多选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:18:01.413

你也可以试试这个

```
resources :pages do
  collection do
    get :hello
  end
end 
```

# python - 所有示例 concurrent.futures 代码都因“BrokenProcessPool”而失败

> ID：15900366
> 
> 赞同：40
> 
> 时间：2013-04-09T11:14:28.560
> 
> 标签：python, python-3.x

在创建我需要的实际应用程序之前，我试图对此有一个基本的了解。我最近从 2.7 转到 3.3。

[从 python 文档](http://docs.python.org/dev/library/concurrent.futures.html#processpoolexecutor-example)直接复制粘贴此代码失败，[这里](https://stackoverflow.com/a/8081576/1199721)的一个稍微简单的示例也是如此。

这是我的代码，源自第二个示例：

```
import concurrent.futures

nums = [1,2,3,4,5,6,7,8,9,10]

def f(x):
    return x * x

# Make sure the map and function are working
print([val for val in map(f, nums)])

# Test to make sure concurrent map is working
with concurrent.futures.ProcessPoolExecutor() as executor:
    for item in executor.map(f, nums):
        print(item) 
```

这是输出：

```
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
Traceback (most recent call last):
  File "<string>", line 420, in run_nodebug
  File "<module1>", line 13, in <module>
  File "C:\Python33\lib\concurrent\futures\_base.py", line 546, in result_iterator
    yield future.result()
  File "C:\Python33\lib\concurrent\futures\_base.py", line 399, in result
    return self.__get_result()
  File "C:\Python33\lib\concurrent\futures\_base.py", line 351, in __get_result
    raise self._exception
concurrent.futures.process.BrokenProcessPool: A process in the process pool was terminated abruptly while the future was running or pending. 
```

我怎样才能让这个代码按预期工作？我希望这些例子能开箱即用。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-10T06:42:12.663

这是我的错，有两个原因：

1.  代码是无人看守的，即没有`if __name__`
2.  看起来奇怪的 Traceback 是因为文件没有保存。以前从未给我造成过问题，但在这种情况下确实如此。

更正**这两个**修复了错误。

最终测试代码：

```
import concurrent.futures

nums = [1,2,3,4,5,6,7,8,9,10]

def f(x):
    return x * x
def main():
    # Make sure the map and function are working
    print([val for val in map(f, nums)])

    # Test to make sure concurrent map is working
    with concurrent.futures.ProcessPoolExecutor() as executor:
        print([val for val in executor.map(f, nums)])

if __name__ == '__main__':
    main() 
```

输出，如预期：

```
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100] 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-07-25T11:57:35.237

在 Windows 下，当使用 processpoolexecutor 或任何其他生成新进程的并行代码时，保护代码的主循环以避免递归生成子进程非常重要。

基本上，所有创建新进程的代码都必须在 下`if __name__ == '__main__':`，出于同样的原因，您不能在解释器中执行它。

# database - 用于自动创建数据库表的脚本

> ID：15900367
> 
> 赞同：1
> 
> 时间：2013-04-09T11:14:29.283
> 
> 标签：database, oracle, plsql

我必须制作一个脚本来创建必须有 1.000 个表和 1.000 列的模式。表名（示例）：TABLE_058 列名（示例）：T058_COL_078

表应该是空的。我正在使用 Oracle DB，不太适合使用 SQL/PL-SQL。如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:57:44.687

如果您将其保存为脚本，然后在 SQL*Plus 下执行，这将起作用。表通过 命名`TABLE_000`，`TABLE_999`列通过 类似地`000`排序`999`。

```
SET ECHO OFF
SET TERMOUT OFF
SET TRIMSPOOL ON
SET PAGESIZE 0
SET LINESIZE 2000
SET FEEDBACK OFF
SPOOL C:\CreateTables.sql

SELECT
  CASE
     WHEN ColIndex = 0 THEN 'CREATE TABLE TABLE_' || TO_CHAR(TableIndex, 'FM000') || '     ('
     ELSE NULL
     END ||
  '  T' || TO_CHAR(TableIndex, 'FM000') || '_COL_' || TO_CHAR(ColIndex, 'FM000') || '   VARCHAR2(1)' ||
  CASE
     WHEN ColIndex = 999 THEN ');'
     ELSE ','
     END
FROM (
  SELECT TableIndex, ColIndex FROM (
    SELECT LEVEL - 1 AS TableIndex FROM DUAL CONNECT BY LEVEL <= 1000)
  CROSS JOIN (
    SELECT LEVEL - 1 AS ColIndex FROM DUAL CONNECT BY LEVEL <= 1000)
  ORDER BY TableIndex, ColIndex);

SPOOL OFF 
```

需要注意的一些事项：

*   编号方案是从 000 到 999，因为您的表/列名称模板使用三位数字，而获得 1000 个表/列的唯一方法是从零开始。

*   将文件名更改`SPOOL C:\CreateTables.sql`为适合您的文件名。

*   您没有指定列类型，因此上面的脚本将它们全部作为`VARCHAR2(1)`

*   **从 SQL*Plus 将上述内容作为脚本运行很重要**。如果您不这样做，很多 SQL*Plus 喋喋不休将在假脱机输出中结束。要从 SQL*Plus 运行脚本，只需键入“at”符号 ( `@`)，后跟脚本名称。如果您命名它`TableGenScript.sql`，请执行以下操作：

    ```
    SQL> @TableGenScript.sql 
    ```

脚本的前几行输出如下所示：

```
CREATE TABLE TABLE_000 (  T000_COL_000 VARCHAR2(1),
  T000_COL_001 VARCHAR2(1),
  T000_COL_002 VARCHAR2(1),
  T000_COL_003 VARCHAR2(1), 
```

试一试，您应该能够根据您的特定需求进行调整。

* * *

**附录**NikolaB 询问如何改变列类型，答案太长，无法放入评论...

要更改列类型，请使用查询的部分内容`|| ' VARCHAR2(1)' ||`并将其替换为您的数据类型逻辑。例如，如果列 0-599 是`VARCHAR2`，列 600-899 是`NUMBER`，列 900-999 是`DATE`，则将脚本更改为以下内容：

```
... all the SETs like above, then the SPOOL ...

SELECT
  CASE
     WHEN ColIndex = 0 THEN 'CREATE TABLE TABLE_' || TO_CHAR(TableIndex, 'FM000') || '     ('
     ELSE NULL
     END ||
  '  T' || TO_CHAR(TableIndex, 'FM000') || '_COL_' || TO_CHAR(ColIndex, 'FM000') ||

  CASE -- put the data-type logic in this CASE
    WHEN ColIndex BETWEEN   0 AND 599 THEN '   VARCHAR2(1)'
    WHEN ColIndex BETWEEN 600 AND 899 THEN '   NUMBER'
    ELSE '   DATE'
  END || -- data-type logic ends here and original query resumes

  CASE
     WHEN ColIndex = 999 THEN ');'
     ELSE ','
     END
FROM
... and then the same as above, all the way through to the SPOOL OFF 
```

我`CASE`用评论突出显示了该声明。如果你把你的数据类型逻辑放在`CASE`和之间`END`你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:56:35.617

导出架构的元数据。

```
exp userid=user/pass@db owner=someowner rows=n file=somefile.dmp 
```

如果您使用记事本打开文件，您可以看到 DML 语句。然后你可以使用导入

```
imp userid=user/pass@otherdb file=somefile.dmp full=y 
```

您还可以复制到同一数据库上的另一个模式（通常用于测试）

```
imp userid=user/pass@db file=somefile.dmp fromuser=someschema touser=otherschema 
```

您还可以使用新的数据泵进行并行和压缩增强。看看[这个链接](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_export.htm)

# android - 当我专注于使用数字输入类型编辑文本时，会弹出标准 qwerty 键盘

> ID：15900368
> 
> 赞同：2
> 
> 时间：2013-04-09T11:14:32.280
> 
> 标签：android, android-edittext, numeric-keypad

我已经这样设置了我的`EditText`字段：

```
 <EditText
        android:inputType="number"
        android:layout_width="130dp"
        android:layout_height="wrap_content"
        android:id="@+id/editText" android:layout_gravity="center"
        /> 
```

当我点击它时`Edittext`，会出现正确的数字输入键盘，但随后会立即被标准键盘取代。如果我再次单击，则会出现数字键盘，并且不会被标准键盘取代。这发生在动态生成`ListView`的，如果这会影响任何东西，并且发生在模拟器和手机（三星银河笔记）中。如何防止出现标准键盘？

这是实际的代码：

```
public class Delivery extends Activity {
ListView deliveryTipes;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.delivery_main);
    deliveryTipes=(ListView) findViewById(R.id.tasksID);
    String[] deliveryTipesList = getResources().getStringArray(R.array.tasks);
    deliveryTipes.setAdapter(new ArrayAdapter<String>(this, R.layout.delivery_line,R.id.taskName, deliveryTipesList));
} 
```

}

Delivery_main.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android">
<ListView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/tasksID" android:layout_gravity="center" android:padding="10dp"/>
</LinearLayout> 
```

交付线.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="horizontal"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content" android:paddingLeft="10dp" android:paddingRight="10dp">

<TextView
        android:layout_width="130dp"
        android:layout_height="wrap_content"
        android:text="Task Name"
        android:id="@+id/taskName" android:layout_gravity="left|center_vertical" android:textStyle="bold"/>
<Space
        android:layout_width="50dp"
        android:layout_height="fill_parent"
        android:id="@+id/space"/>
<EditText

        android:inputType="number"
        android:layout_width="130dp"
        android:layout_height="wrap_content"
        android:id="@+id/editText" android:layout_gravity="center"
        />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:21:28.603

这类问题非常烦人。简短的故事是，默认情况下，a`ListView`旨在简单地显示项目，并可选择选择它们。

`ListView`不假设它的孩子是可聚焦的，它自己处理焦点并触发适当的侦听器。当您开始将可聚焦的小部件放入 中时`ListView`，事情很快就会变得疯狂。发布实际代码，您将有更多机会获得帮助。

# c# - IEnumerable 与收益回报和 VS Quickwatch 崩溃

> ID：15900370
> 
> 赞同：1
> 
> 时间：2013-04-09T11:14:33.003
> 
> 标签：c#, visual-studio-2012, ienumerable, yield-return

我有以下方法返回`IEnumerable`

```
public IEnumerable<ExternalFilter> GetExternalFilters()
{
    if (externalfilters == null)
        yield break;
    foreach (ExternalFilter filter in externalfilters)
        yield return filter;
} 
```

如果我查看 VS Quickwatch 中的 GetExternalFilter，在扩展集合时，调试中的程序会立即崩溃，并且 Quickwatch 什么也没有显示。

使用 Quickwatch 消息评估`Count()`该集合时也是如此`Function evaluation was aborted.`

我需要什么才能使此功能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T11:12:38.907

我相信您的参数`externalfilters`不是线程安全的。

您是否从另一个线程更新您的参数？

如果是这样，请使用`lock`更新列表并从中读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:19:23.260

只是一个预感：也许你的枚举`externalfilter`只能被评估一次？（例如，因为数据的来源）。

这意味着一旦您尝试使用 QuickWatch 重新评估它的结果`GetExternalFilters`就会失败。

If`externalfilter`不仅仅是一个可枚举的，而是一个简单的东西，`List<T>`那么你的问题就在其他地方。

# php - 将表格中的顺序路径插入到上传到文件夹的图像

> ID：15900372
> 
> 赞同：0
> 
> 时间：2013-04-09T11:14:58.847
> 
> 标签：php

我试图允许用户将 2 个图像上传到他们注册时创建的文件夹，并在上传时将两个文件的后续路径插入到我的表中，该表具有“main”作为第一个图像路径，“one”作为下一个图像路径。

上传者正确地将这两个文件上传到文件夹中，但是我是否执行插入以将图像一个路径插入“主”，并将图像两个路径插入“一个”？

上传代码如下......

非常感谢任何帮助！

```
<?php
$userid = $_SESSION['userid'];
$username = $_SESSION['user_name'];
$uploadDir = "images/test/$username/";

$uploadsNeeded = '2';
for($i = 0; $i < $uploadsNeeded; $i++){
$file_name = $_FILES['uploadFile'. $i]['name'];
// strip file_name of slashes
$file_name = stripslashes($file_name);
$file_name = str_replace("'","",$file_name);
$copy = copy($_FILES['uploadFile'. $i]['tmp_name'],$uploadDir . $file_name);
 // prompt if successfully copied
 if($copy){
 echo "$file_name | uploaded sucessfully!<br>";
 }else{
 echo "$file_name | could not be uploaded!<br>";
 }

$filePath = $uploadDir . $file_name;

$sql = "UPDATE images SET main = '$filePath' WHERE userid = '$_SESSION[userid]'";
    $result = @mysql_query($sql, $connection) or die(mysql_error());

$sql = "UPDATE images SET one = '$filePath' WHERE userid = '$_SESSION[userid]'";
    $result = @mysql_query($sql, $connection) or die(mysql_error());    
}   

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:30:28.093

我想这就是你需要做的......

$userid = $_SESSION['userid'];

$username = $_SESSION['user_name'];

$uploadDir = "图像/测试/$用户名/";

$filePath = 数组（）；

$uploadsNeeded = '2';

for($i = 0; $i < $uploadsNeeded; $i++){

$file_name = $_FILES['uploadFile'. $i]['名字'];

// 去除文件名的斜线

$file_name = stripslashes($file_name);

$file_name = str_replace("'","",$file_name);

$copy = copy($_FILES['uploadFile'. $i]['tmp_name'],$uploadDir . $file_name);

// 复制成功时提示

如果（$复制）{

echo "$file_name | 上传成功！
";

} 别的{

echo "$file_name | 无法上传！
";

}

$filePath[] = $uploadDir 。$文件名；

}

$sql = "更新图像 SET main = '$filePath[0]' AND one = '$filePath[1]' WHERE userid = '$_SESSION[userid]'";

```
$result = @mysql_query($sql, $connection) or die(mysql_error()); 
```

# sql - 对多个表执行相同的 SQL 更新语句？

> ID：15900374
> 
> 赞同：2
> 
> 时间：2013-04-09T11:15:05.430
> 
> 标签：sql, sql-server, tsql

嗨，我在 sql server 中有 6 个不同的表，我想针对这些表运行以下脚本。是否有可能在某种循环中做到这一点？

```
UPDATE Table
    SET fk =CASE fk
    WHEN 1 THEN 15
    WHEN 2 THEN 16
    WHEN 3 THEN 17
    WHEN 4 THEN 11
    WHEN 5 THEN 12
    WHEN 6 THEN 13
    WHEN 7 THEN 14
    END
    WHERE fk IN (1,2,3,4,5,6,7) 
    UPDATE Table SET fk = fk - 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:53:47.843

尝试如下...它会帮助你...

以逗号分隔传递您的表名...

```
DECLARE @test varchar(max);
Declare @Count int;
DECLARE @intFlag INT
SET @intFlag = 1
set @test = '#temp,#temp1,#temp2,#temp3'; --Table Names Separate by Commas
set @test = Replace(@test, ',', '.')
select @Count = len(@test) - len(replace(@test, '.', ''))
WHILE (@intFlag <= @Count + 1)
BEGIN
Declare @tablename as varchar(100)
Declare @sqlquery as varchar(5000)
Select @tablename = ParseName(@test, @intFlag )
SET @sqlquery = @sqlquery + 'UPDATE ' + @tablename  
SET @sqlquery = @sqlquery + 'SET fk = (CASE fk '    
SET @sqlquery = @sqlquery + 'WHEN 1 THEN 15    '
SET @sqlquery = @sqlquery + 'WHEN 2 THEN 16    '
SET @sqlquery = @sqlquery + 'WHEN 3 THEN 17    '
SET @sqlquery = @sqlquery + 'WHEN 4 THEN 11    '
SET @sqlquery = @sqlquery + 'WHEN 5 THEN 12    '
SET @sqlquery = @sqlquery + 'WHEN 6 THEN 13    '
SET @sqlquery = @sqlquery + 'WHEN 7 THEN 14    '
SET @sqlquery = @sqlquery + 'END)  WHERE fk IN (1,2,3,4,5,6,7)     UPDATE ' + @tablename + ' SET fk = fk - 10'
print @sqlquery
exec(@sqlquery)
SEt @intFlag = @intFlag + 1
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:16:35.273

不，这是不可能的，除非您编写一个游标，在该游标中您必须手动获取表名，或者通过从系统表中选择表名直到条件`sys.Tables`

* * *

您将需要使用 Nikola Markovinović 在他的评论中提到的动态 sql，以便您可以将表名作为参数提供，然后将其作为表名处理。

像：

```
CREATE PROCEDURE updTable @Tablename nvarchar(30)
AS
UPDATE @Tablename ... 
Your script here ...
GO 
```

为每个表调用它，例如：

```
EXEC updTable 'yourTableName' 
```

或者创建一个游标来为您执行此操作：

```
DECLARE @TableName VARCHAR(30) 
DECLARE db_cursor CURSOR FOR  
SELECT name 
FROM SYS.Tables 
WHERE name IN ('YourTable_1','YourTable_2' ... , 'YourTable_N')  

OPEN db_cursor   
FETCH NEXT FROM db_cursor INTO @name
WHILE @@FETCH_STATUS = 0   
BEGIN   
  updTable @name    
END   

CLOSE db_cursor   
DEALLOCATE db_cursor 
```

# ios - 在 UIBezierPath 的长度上拉伸 UIImage

> ID：15900377
> 
> 赞同：0
> 
> 时间：2013-04-09T11:15:18.660
> 
> 标签：ios, uibezierpath

我基本上需要实现的是水果忍者风格的“斜线”效果，其中“斜线”跟随用户的触摸并跟随用户手势的形状，并且用户滑动的距离越长越细。

实现这一点的最简单方法似乎是收集用户在 UIBezierPath 中经过的所有点，并通过 BezierPath 的长度“拉伸”图像。这将实现我正在寻找的那种“尾随”效果，并且如果行进的距离更长，还可以确保线条更细。

但是我似乎无法找到一种方法来实际实现这一点。这甚至可能吗？

备择方案？谢谢。

PS：这是针对普通应用程序的中低优先级部分而不是游戏，所以我想避免使用 OpenGL 并花费大量时间来实现这一点（完全自定义绘图等）。SDK 级别的东西会更受欢迎，如果这根本不可能，我们会想出一个不同的 UI。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:48:09.183

好的。也许你可以使用这个。

[https://github.com/hfossli/AGDraw](https://github.com/hfossli/AGDraw)

只是我前一阵子写的东西。点击 clear 并尝试绘制一些东西（clear 将在两种类型的笔画之间切换）。您会看到笔画的宽度会随着您使用的速度而增加。我想这符合您的需要。如果您修复了一些错误，请提出拉取请求。您可以自由使用代码，但我稍后会添加 MIT 许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:26:18.773

我建议尝试使用 CoreGraphics 进行绘制。看到这个链接

[http://www.effectiveui.com/blog/2011/12/02/how-to-build-a-simple-painting-app-for-ios/](http://www.effectiveui.com/blog/2011/12/02/how-to-build-a-simple-painting-app-for-ios/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:51:45.760

对于非常易于使用的图像/视图的拉伸技术，您可以查看

[https://github.com/hfossli/AGGeometryKit/](https://github.com/hfossli/AGGeometryKit/)

# database - 低延迟的数据库异地复制

> ID：15900378
> 
> 赞同：4
> 
> 时间：2013-04-09T11:15:19.837
> 
> 标签：database, cloud, replication, latency, geo

我有一个网站，目前托管在欧洲的一台服务器上。为了改善非欧洲用户的延迟，我想在美国和亚洲添加本地服务器。

保持静态文件同步没问题。我们每天只添加一次新内容，因此一个简单的 rsync cron 作业可以很好地保持文件更新。

我完全坚持的是如何在数据库端处理这个问题？我更喜欢保存所有用户信息的单个主数据库，这样如果本地服务器脱机，我们总是在主服务器中拥有用户数据（无论备份如何）。

到目前为止，我们考虑了 2 个选项：

**支持异地复制的数据库**

开箱即用支持异地复制的数据库。应该非常容易设置并且对于数据库写入应该具有非常低的延迟（即，无需等待主服务器上的“写入成功”消息）。

**使用主数据库和本地数据库的编程方法**

一个用户同时从一个区域访问，所以我们可以做一些连接到主数据库和本地数据库的东西。首次登录时，所有用户信息将从主数据库中提取并缓存在本地数据库中。从此用户生成的所有数据都可以存储在本地数据库中，并在后台同步回主数据库。可以工作，但如果某些东西不同步，似乎过于复杂且难以修复？

**关于数据库的更多背景信息**

*   我们的数据库进行大量读取和少量写入
*   数据库性能根本不是问题。所以我们只希望改善用户体验（降低延迟）
*   用户不会生成太多数据（一般 10kb，最大 200kb）
*   我们不是银行或证券交易所，如果一些用户数据在一分钟甚至几分钟后同步回主服务器，这不是什么大问题。

**我们的问题**

*   有没有描述这个特定问题的名称？（所以我可以更好地谷歌）
*   是否有数据库可以开箱即用地进行地理复制而不会造成延迟损失？（也许是沙发床？）
*   程序化方法是可行的，还是会是一个痛苦的世界？

我将非常感谢任何见解，或者可能是涵盖此类内容的文章的链接。我敢肯定还有更多的小型网站遇到了这个问题。

# netbeans-7 - Netbeans错误“并非所有模块都可以启用”

> ID：15900379
> 
> 赞同：8
> 
> 时间：2013-04-09T11:15:24.250
> 
> 标签：netbeans-7

我在 netbeans 中运行文件时遇到问题。直到今天，我一直在使用 netbeans 7.3 来运行 PHP 代码，到目前为止它曾经完美地工作过。突然，今天当我第一次尝试打开一个 php 文件时，它根本没有打开任何东西，也没有显示任何错误。我尝试重新安装，但再次没有任何变化。我注意到如果我尝试创建一个新项目，那么它会向我显示此消息`This feature is not yet enabled. Press Next to activate it`。然后我单击下一步，它显示`Not all requested modules can be enabled`...和一条很长的消息。我又卸载了。删除了 netbeans 的缓存和库。再次安装并在第一次打开时向我显示此警告

`Warning - could not install some modules: org.apache.commons.logging - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-apache-commons-logging.jar: Not found bundle:org.apache.commons.logging org.apache.ws.commons.util - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-apache-ws-commons-util.jar: Not found bundle:org.apache.ws.commons.util org.apache.commons.io - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-apache-commons-io.jar: Not found bundle:org.apache.commons.io org.apache.commons.codec - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-apache-commons-codec.jar: Not found bundle:org.apache.commons.codec org.apache.commons.httpclient - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-apache-commons-httpclient.jar: Not found bundle:org.apache.commons.httpclient org.apache.xmlrpc - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-apache-xmlrpc.jar: Not found bundle:org.apache.xmlrpc org.eclipse.equinox.common - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-equinox-common.jar: Not found bundle:org.eclipse.equinox.common org.eclipse.core.jobs - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-core-jobs.jar: Not found bundle:org.eclipse.core.jobs org.eclipse.equinox.registry - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-equinox-registry.jar: Not found bundle:org.eclipse.equinox.registry org.eclipse.equinox.app - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-equinox-app.jar: Not found bundle:org.eclipse.equinox.app org.eclipse.equinox.preferences - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-equinox-preferences.jar: Not found bundle:org.eclipse.equinox.preferences org.eclipse.core.contenttype - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-core-contenttype.jar: Not found bundle:org.eclipse.core.contenttype org.eclipse.core.runtime.compatibility.auth - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-core-runtime-compatibility-auth.jar: Not found bundle:org.eclipse.core.runtime.compatibility.auth org.eclipse.core.runtime - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-core-runtime.jar: Not found bundle:org.eclipse.core.runtime org.eclipse.equinox.security - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-equinox-security.jar: Not found bundle:org.eclipse.equinox.security org.eclipse.core.net - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-core-net.jar: Not found bundle:org.eclipse.core.net org.eclipse.mylyn.commons.core - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-mylyn-commons-core.jar: Not found bundle:org.eclipse.mylyn.commons.core org.eclipse.mylyn.commons.repositories.core - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-mylyn-commons-repositories-core.jar: Not found bundle:org.eclipse.mylyn.commons.repositories.core org.apache.commons.lang - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-apache-commons-lang.jar: Not found bundle:org.apache.commons.lang org.eclipse.mylyn.commons.net - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-mylyn-commons-net.jar: Not found bundle:org.eclipse.mylyn.commons.net org.eclipse.mylyn.commons.xmlrpc - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-mylyn-commons-xmlrpc.jar: Not found bundle:org.eclipse.mylyn.commons.xmlrpc org.eclipse.mylyn.tasks.core - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-mylyn-tasks-core.jar: Not found bundle:org.eclipse.mylyn.tasks.core org.eclipse.mylyn.bugzilla.core - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-mylyn-bugzilla-core.jar: Not found bundle:org.eclipse.mylyn.bugzilla.core com.jcraft.jzlib - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/com-jcraft-jzlib.jar: Not found bundle:com.jcraft.jzlib com.jcraft.jsch - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/com-jcraft-jsch.jar: Not found bundle:com.jcraft.jsch org.eclipse.jgit - org.netbeans.InvalidException: Netigso: /Applications/NetBeans/NetBeans 7.3.app/Contents/Resources/NetBeans/ide/modules/org-eclipse-jgit.jar: Not found bundle:org.eclipse.jgit`.

我花了将近一天的时间。我正在使用netbeans 7.3。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-13T23:25:54.727

打开 netbeans.conf 文件并注释掉*netbeans_jdkhome="/usr"*行。它适用于我的 Linux 系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T16:49:36.390

我今天遇到了这个问题。解决方案非常简单：重新安装 NetBeans，当安装管理器询问 JDK 路径时，将路径设置为您的 JDK 之一（使用菜单中的选择器）。默认路径“/usr/”或其他 IDE 自动设置的路径不是实际的，安装后您将无法更改默认路径！

# c++ - NOMINMAX 与 Visual Studio 2012 MFC 项目

> ID：15900381
> 
> 赞同：6
> 
> 时间：2013-04-09T11:15:28.613
> 
> 标签：c++, visual-studio, visual-studio-2012, mfc

我想`#define NOMINMAX`在我的 Visual Studio C++ 项目中使用 MFC，这样我就可以使用`std::min`和`std::max`. 但是，当我将此行放入 stdafx.h 时，出现以下编译错误：

> c:\program files (x86)\windows kits\8.0\include\um\GdiplusTypes.h(475): error C3861: 'min': identifier not found

我不是故意使用 GDI+，这是 MFC 必须要做的事情。是否可以通过删除 GDI+ 或通过对其进行调整以进行编译来以某种方式解决此问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T11:25:43.180

我不在 Windows 上工作，所以我不习惯处理这个问题，我也没有测试这个，但我相信答案是建议你这样做：

```
#define NOMINMAX
#include <algorithm>
namespace Gdiplus
{
  using std::min;
  using std::max;
};
//... your other includes. 
```

`min`这将获得and的“正确”版本`max`，并使它们在没有`std::`前缀的情况下可用（这似乎是它在`GdiplusTypes.h`标题中的使用方式）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T11:26:12.867

winapi`min`和`max`是宏，因此您可以`#undef`在包含 MFC 或 winapi 标头后仅使用它们：

```
#undef min
#undef max 
```

# svn - 是否有基于 svn 的 Wiki？

> ID：15900385
> 
> 赞同：2
> 
> 时间：2013-04-09T11:15:35.070
> 
> 标签：svn, sharepoint-2010, content-management-system, tortoisesvn, wiki

我们在我们的团队中使用 TurtoiseSVN 作为我们的知识库。我在那里管理我们的 MS Office 文件（*.ppt、*.doc、*.xls ...）。对于安全关键文件，我们使用的是 Sharepoint 2010。

多年来，我们得到了很多“操作方法”和组织性 Powerpoint 文件。我们想在 wiki 中组织这些文件中的信息。

**问题是：**

我想避免启动通常的 wiki。原因：我们不想要另一个系统，因为我们公司已经有这么多系统了。此外，wiki 不会被太多使用，因为你不需要经常在那里的信息。所以我想把它集成到我们正在运行的系统中。

所以我正在考虑将 wiki 集成到 TortoiseSVN 中。

问题：是否有任何基于 SVN 或基于文件系统的 wiki 可以集成到 SVN 中？我已经尝试过 GrooWiki，但我没有让它与 TurtoiseSVN 一起使用。此外，它没有一个庞大的社区来支持。

如果没有这样的系统，你推荐使用 Sharepoint wiki 吗？

在写作时，我觉得我无法避免引入像 FosWiki 这样的 wiki 作为第三个系统：-(

# java - java - 如何停止java执行程序类中的所有可运行线程？

> ID：15900387
> 
> 赞同：16
> 
> 时间：2013-04-09T11:15:36.813
> 
> 标签：java, multithreading, executorservice

```
final ExecutorService executor = Executors.newFixedThreadPool(1);
final Future<?> future = executor.submit(myRunnable);
executor.shutdown();
if(executor.awaitTermination(10, TimeUnit.SECONDS)) {
  System.out.println("task completed");
}else{
  System.out.println("Executor is shutdown now");
}

//MyRunnable method is defined as task which I want to execute in a different thread. 
```

这是`run`执行程序类的方法：

```
public void run() {
try {
     Thread.sleep(20 * 1000);
} catch (InterruptedException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
}} 
```

在这里它正在等待`20`第二次，但是当我运行代码时它会引发异常：

```
java.lang.InterruptedException: sleep interrupted
at java.lang.Thread.sleep(Native Method) 
```

我无法关闭破坏`Java Executor class`. 这是我的代码流程：

*   使用 Java 执行器类创建了一个新线程来运行一些任务，即用`MyRunnable`
*   `executor`等待 10 秒完成任务。
*   如果任务已经完成，那么可运行线程也被终止。
*   如果任务未在 10 秒内完成，则`executor`类应终止线程。

除了在最后一个场景中终止任务外，一切正常。我该怎么做？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-09T11:21:28.723

该[`shutDown()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)方法只是防止安排额外的任务。相反，您可以调用[`shutDownNow()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow%28%29)并检查`Runnable`.

```
// in your Runnable...
if (Thread.interrupted()) {
  // Executor has probably asked us to stop
} 
```

根据您的代码，一个示例可能是：

```
final ExecutorService executor = Executors.newFixedThreadPool(1);
executor.submit(new Runnable() {
  public void run() {
    try {
      Thread.sleep(20 * 1000);
    } catch (InterruptedException e) {
      System.out.println("Interrupted, so exiting.");
    }
  }
});

if (executor.awaitTermination(10, TimeUnit.SECONDS)) {
  System.out.println("task completed");
} else {
  System.out.println("Forcing shutdown...");
  executor.shutdownNow();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-09T11:24:09.887

从外部终止正在运行的线程通常是一个坏主意，因为您不知道线程当前所处的状态。它可能需要进行一些清理，而当你强行关闭它。[这就是为什么所有执行此操作的 Thread 方法都标记为 deprecated](http://docs.oracle.com/javase/7/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)。

最好使用可用于进程间通信的众多技术中的一种来向线程本身中运行的过程发出信号，表明它必须中止其工作并正常退出。一种方法是`abort()`向您的可运行文件添加一个方法，该方法会引发一个声明为`volatile`. Runnable 的内部循环检查该标志并在该标志被提升时退出（以受控方式）。

# javascript - 传单缩放无缘无故不起作用

> ID：15900390
> 
> 赞同：0
> 
> 时间：2013-04-09T11:15:45.800
> 
> 标签：javascript, types, maps, leaflet

我似乎无缘无故地在传单缩放方面遇到了一些问题。

我写了以下函数。

```
function set_view(lat,lon,min_zoom)
{

    var zoom = current_map.getZoom();
    alert(typeof zoom);

    if(typeof min_zoom != 'undefined')
    {
        if(min_zoom>=zoom)
        {
            zoom = min_zoom;
                        alert(typeof zoom);
        }
    }

    current_map.setView(new L.LatLng(lat, lon),zoom);

} 
```

本质上，如果我传入一个 min_zoom 值，我会收到第一个警报，指出当前缩放是一个数字，然后我会收到第二个警报，说传递的 min_zoom 也是一个数字。IE 两者都是同一类型。

如果我传入了 min_zoom，则我的视图已设置但处于完全缩放状态并且没有缩放控件起作用。

如果我没有传递 min_zoom 值，我的地图将在当前缩放级别完美显示。

这是没有意义的。来自两个不同地方的完全相同的值会给出两个不同的结果。

如果通过了 min_zoom，为什么这不起作用，而是破坏地图？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T22:26:39.507

`current_map.setView(new L.LatLng(lat, lon),zoom);`

有一个错字。

**L.LatLng()**应该是**L.latLng()**

# android - Android 的权限检查事件（或日志）

> ID：15900391
> 
> 赞同：0
> 
> 时间：2013-04-09T11:15:54.010
> 
> 标签：android, android-event, android-permissions, android-broadcast

我了解，当您安装 Android 应用程序时，您需要接受该应用程序请求的权限。当您运行应用程序时，当应用程序真正要使用该权限并执行任务时，android系统必须再次检查“是否允许此应用程序执行此任务？”。我现在需要执行一些任务（记录事件）。我怎样才能做到这一点？

有一个问题。我想为其他正在运行的应用程序（而不是我的应用程序）识别这些实例（时刻）

（例如：我想知道 DropBox 应用程序什么时候可以访问互联网。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:04:51.170

> 我现在需要执行一些任务（记录事件）。我怎样才能做到这一点？

您可以下载 Android 源代码，对其进行修改以包含所需的安全漏洞，将结果编译到 ROM 模块中，然后将该 ROM 模块安装在您自己的设备上。

这无法通过 Android SDK 实现。

> 有一个问题。我想为其他正在运行的应用程序（而不是我的应用程序）识别这些实例（时刻）（例如：我想知道 DropBox 应用程序何时即将访问互联网。）

欢迎您在有根的 Android 设备上安装和使用防火墙包，并可能以这种方式连接某些东西，以应对这种特定情况。一般来说，出于明显的隐私和安全原因，您所寻求的都是不可能的。

# jquery - Jquery Datatables 不适用于嵌套表

> ID：15900392
> 
> 赞同：0
> 
> 时间：2013-04-09T11:15:59.433
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在尝试在一段 HTML 上应用 jQuery 数据表。标记由嵌套表组成，这会产生问题。

错误控制台的错误是：-“nCell 未定义”。

为什么嵌套表上的数据表不起作用，这有点令人困惑？是 jQuery Datatables 不支持嵌套表还是我错过了什么？这是我写的标记：

```
 <script type="text/javascript">
$(document).ready(function() { $('#table_id,#id2').dataTable();} );
   </script>
</head>
<body text="#000000" link="#000000" alink="#000000" vlink="#000000">
  <table id="table_id">

<thead> 
 <tr>
<th> AAA</th>
<td> BBB</td>
<td> CCC</td>
</tr>
</thead> 
<tbody>
<tr>
        <td>Row 1 Data 1</td>
        <td>Row 1 Data 2</td>
        <td>etc</td>
    </tr>
<tr>
        <td>Row 2 Data 1</td>
        <td>Row 2 Data 2</td>
        <td>etc</td>
    </tr>
    <tr>
       <td> <table id ="id2">
            <thead>
               <tr>
                   <th>JJJJ</th>
                    <th>KKK</th>
               </tr> 
             </thead>
             <tbody>
                 <tr>
                     <td>LLL</td>
                     <td>MMM</td>
                 </tr>

             </tbody>
        </table>
       </td>
    </tr>
</tbody> 
```

# r - 由 knitr 和 hook_r2swf 重叠创建的 .swf

> ID：15900395
> 
> 赞同：4
> 
> 时间：2013-04-09T11:16:15.350
> 
> 标签：r, animation, flash, knitr

我尝试使用`knitr`和进行动态演示`animation`。我选择了`hook_r2swf`唯一一个在我的机器上工作的。

例如，我`knit`有以下`.Rmd`文件：

```
# Test Animation

```{r, fig.show='animate', aniopts='autoresume'}
opts_knit$set(animation.fun = hook_r2swf)
plot(1,1,type="n")
plot(2,2,type='n')
``` 
```

但是，似乎 .swf 将与块中绘制的所有数字重叠，可能如下所示：

```
<p><embed width="504" height="504" name="plugin" src="https://dl.dropbox.com/u/11900271/unnamed-chunk-1.swf" type="application/x-shockwave-flash"></p> 
```

有谁知道如何使结果不重叠？

我正在使用带有以下会话信息的 ubuntu 12.04：

R 版本 2.15.3 (2013-03-01) 平台：i686-pc-linux-gnu (32-bit)

```
locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8       
 [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] testpkg_1.0    xts_0.9-1      zoo_1.7-9      Rcpp_0.10.2    roxygen2_2.2.2 digest_0.5.2  
[7] knitr_1.1     

loaded via a namespace (and not attached):
[1] brew_1.0-6      evaluate_0.4.3  formatR_0.6     grid_2.15.3     lattice_0.20-13 stringr_0.6.2  
[7] tools_2.15.3 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T12:50:07.610

这似乎是处理动画方式的一个问题。两个地块相互重叠。虽然我不确定如何防止它本身，但我可以建议以下解决方法。默认情况下，背景是透明的。如果我们把背景改成白色，问题就解决了：

```
```{r, fig.show='animate'}
opts_knit$set(animation.fun = hook_r2swf)
par(bg="white")
plot(1,1,type="n")
plot(2,2,type='n')
``` 
```

# regex - 正则表达式括号

> ID：15900397
> 
> 赞同：1
> 
> 时间：2013-04-09T11:16:31.540
> 
> 标签：regex

我在正则表达式中遇到问题，没有匹配的 URL：

```
Sound/ranzor%20S001/sound,ranzor%20S001,245--40%20ZR20%20(95Y),TL,AMR 
```

正则表达式的表达式为：

```
((.+?)/(.+?)/.+?,.+?,(\d+)--(\d{1,3})%\d{2}R(\d{1,3})%\d{2}|(\d{1,3}\w).*) 
```

问题是**(95Y)**。

谢谢。

**解决方案：**

```
((.+?)/(.+?)/.+?,.+?,(\d+)--(\d{1,})%\d{2}.?.?(\d{1,})%\d{2}\((\d{1,})(\w{1}).*) 
```

解决方案是转义**"("**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:20:24.027

试试这个正则表达式：

`/((.+?)/(.+?)/.+?,.+?,(\d+)--(\d{1,3})\%\d{2}R(\d{1,3})\%\d{2}|\(\d{1,3}\w\).*)/`

你需要逃跑`%`，`(`并且`)`。为此，请在它们之前添加反斜杠

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:23:15.530

中间`R`应该改成`ZR`. 另外我不明白你为什么使用 OR ( `|`) 模式，我删除了它，并在括号周围加上：

```
(.+?)/(.+?)/.+?,.+?,(\d+)--(\d{1,3})%\d{2}ZR(\d{1,3})%\d{2}\((\d{1,3}\w)\).* 
```

# python - Python 站点包：如何同时维护 2.x 和 3.x 版本

> ID：15900399
> 
> 赞同：1
> 
> 时间：2013-04-09T11:16:33.607
> 
> 标签：python

我知道我们可以在同一个盒子上安装不同版本的 Python - 但是有些包不支持两者通用。

因此，如果我安装了两个版本的 Python（2.x 和 3.x），如何使用 pip 自动为每个 Python 版本正确部署包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:22:55.990

我不知道你是否可以配置 pip 为多个 Python 版本自动安装包，但是很容易[在命令行上手动指定两个包，](https://stackoverflow.com/questions/2812520/pip-dealing-with-multiple-python-versions)编写一个脚本来多次调用 pip 并正确Python 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:25:27.287

至少在 Arch Linux 上，大概在其他发行版上，pip 有两个单独的包，如果两个包都安装了，它们会给你两个不同的命令：pip 和 pip3。运行`pip ...`将始终安装到 Python 2 站点包和`pip3 ...`Python 3 站点包。这既适用于系统范围的软件包（以 root 身份运行），也适用于将它们安装到您的主目录中。

# xml - 如何通过 XSL 删除重复的一行？

> ID：15900403
> 
> 赞同：0
> 
> 时间：2013-04-09T11:16:38.007
> 
> 标签：xml, xslt

我有一个 XML 文件：

```
<Picture id="001.png"/>

<Line/>

<Picture id="002.png"/>

<Line/>

<Picture id="003.png"/> 
```

并想将其更改为：

```
<Picture id="001.png"/>

<Line/>

<Picture id="002.png"/> 
```

我可以通过以下xsl删除“003.png”，因为我知道它的id，但不知道如何删除它上面的“Line”。

```
 <xsl:template
     match="//Picture[@id='003.png']">
 </xsl:template> 
```

我可以通过跟随兄弟姐妹来做到这一点吗？多谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:30:20.680

您的输入不是格式良好的 XML，因为它没有根元素，但这里有一个选项：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- Identity transform -->
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <!--
  Drop unwanted elements: <Picture id="003.png"/> and the <Line/> element
  preceding it
  -->
  <xsl:template
    match="Line[following-sibling::*[1][self::Picture[@id = '003.png']]]
         | Picture[@id = '003.png']"/>
</xsl:stylesheet> 
```

### 输入

```
<Elements>
  <Picture id="001.png"/>
  <Line/>
  <Picture id="002.png"/>
  <Line/>
  <Picture id="003.png"/>
</Elements> 
```

### 输出

```
<Elements>
  <Picture id="001.png"/>
  <Line/>
  <Picture id="002.png"/>
</Elements> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:42:27.097

是的，您可以使用以下兄弟姐妹来做到这一点。如下更改 Eero Helenius 的代码。

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
      <xsl:strip-space elements="*"/>

      <!-- Identity transform -->
      <xsl:template match="node() | @*">
        <xsl:copy>
          <xsl:apply-templates select="node() | @*"/>
        </xsl:copy>
      </xsl:template>

      <!--
      Drop unwanted elements: <Line> with fist following-sibling::Picture id = '003.png
      <Picture id="003.png"/>
      -->
      <xsl:template match="Picture[@id = '003.png']"/>

      <xsl:template match="Line">
          <xsl:if test="not(following-sibling::Picture[1][@id = '003.png'])">
            <xsl:copy>
              <xsl:apply-templates select="node() | @*"/>
            </xsl:copy>
        </xsl:if>
       </xsl:template>
    </xsl:stylesheet> 
```

# php - 在 PHP 中计算一个数字的平方根到至少一位小数

> ID：15900405
> 
> 赞同：-4
> 
> 时间：2013-04-09T11:16:41.710
> 
> 标签：php, recursion

我需要在不使用内置 PHP 数学函数的情况下将一个数字的平方根计算到至少一位小数。换句话说，我们只能使用乘法、除法、加法和减法。

示例：`calculate_square_root(56)`将导致：`7.4`

注意：我需要一个基于递归的代码来解决上述问题

请帮助任何人解决问题并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:18:35.270

简单的.....

```
function calculate_square_root($number) {
  return parseInt($number^0.5*10)/10;
} 
```

**编辑**抱歉：没有内置...

**如下评论中所指出的**edit2**`^` ，插入符号不是幂/指数，而是XOR。所以这个答案是**错误**的。**

# reporting-services - mdx 中的聚合函数在用于百分比时有什么作用？

> ID：15900411
> 
> 赞同：1
> 
> 时间：2013-04-09T11:17:03.680
> 
> 标签：reporting-services, ssas, aggregate-functions, mdx, average

当我将 MDX 中的聚合函数应用于 SSAS 或 SSRS 中的百分比列时，它到底做了什么？我知道这不是总和，我不认为它是平均的？

![百分比结果](https://i.stack.imgur.com/G7gwk.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:43:56.680

聚合函数不应该在计算之上使用。我希望您不是从外部检索百分比或比率值。由于此类值在多维数据集中不可聚合。对于此类度量，您需要检索组件并在多维数据集中进行划分。

聚合函数适用于您检索的度量。对于您在多维数据集中计算的度量，您需要自己处理时间平衡。很难提供更多建议，因为每个立方体都有很大不同。

聚合函数根据检索到的度量的聚合属性进行聚合。

例如，如果物理度量的聚合属性设置为 SUM，那么它将求和。此外，如果您使用帐户维度（而不是使用许多度量），那么它还可以动态选择聚合类型。例如，您可以用 SUM 标记某个帐户，而用 last 标记另一个帐户，即使您可能有聚合类型 = byaccount 的单个 Measure 类型，它也会动态聚合。

如果您在公式上使用聚合函数，则默认行为会将时间平衡应用于您物理检索的度量（公式组件），然后评估公式。因此，它不是评估公式并应用时间余额，而是将时间余额应用于组件，然后忽略您可能设置的任何时间余额（这部分仅对帐户类型维度有效）。

只有在帐户维度的情况下，您才能在计算的成员/派生单元（如父单元）上设置时间余额属性，但该属性仍然被忽略。这与 Essbase 中的问题相同。引擎只是默默地忽略它。

# jsp - 使用 0+ 个键/值参数编写 JSP 标签

> ID：15900413
> 
> 赞同：2
> 
> 时间：2013-04-09T11:17:20.920
> 
> 标签：jsp, jstl, jsp-tags

我目前正在开发一个需要使用 JSP 的项目，并且我正在尝试编写一个自定义标签来生成 A 链接（因为无论如何，所有链接上总是提供一些参数，所以我想将所有这些都封装在一个地方）。

理想情况下，我希望能够编写我的链接，例如：

```
<h:link value="${policy.name}" href="show">
    <h:param name="id" value="${policy.id}" />
    .... There will be an arbitrary number of these, with arbitrary names and values ....
</h:link> 
```

并有这个写一个链接：

```
<a href="show?id=1&customer=234" /> 
```

其中“客户”是始终存在的参数之一。

到目前为止，我已经尝试通过在我的标签中使用 jsp:doBody 来做到这一点，并且标签的主体是 c:param 或 spring:param 标签，但这些都不起作用。环顾四周，我能想到的最好的方法是用 Java 编写我的自定义标签——我真的很讨厌这样做，因为它开始意味着我的视图是用 JSP 和 Java 的拆分编写的——或者做一些非常hacky的事情，比如构建一个地图并将其传递给标签。

有没有更好的方法来实现这样的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:06:24.550

因此，事实证明，您可以通过在标签顶部指定来使用动态属性：

```
<%@ tag dynamic-attributes="dynattrs" %> 
```

然后，这将在您的标签中提供一个名为*dynattrs*的属性，其中包含所有未使用的属性。这是一个地图，可以这样使用。因此，我可以将我的标签称为：

```
<h:link value="${policy.name}" href="show" id="${policy.id} /> 
```

并且*id*属性将作为*dynattrs*映射中的单个条目提供。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T11:24:40.170

编写标签很容易：将它们放在**WEB-INF/tags下**

```
<!-- myTag.tag -->
<%@ tag language="java" pageEncoding="UTF-8"%>

<%@ attribute name="id" description="Customer" required="true"%>
<%@ attribute name="customer" description="Id" required="true"%>

<a href="show?id=${id}&customer=${customer}" /> 
```

HTML

```
<%@ taglib prefix="tags" tagdir="/WEB-INF/tags"%>

<tags:myTag id="1" customer="James Bond" /> 
```

地图标签

```
<!-- myMapTag.tag -->
<%@ tag language="java" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%@ attribute name="map" description="My Key Value Map" type="java.util.Map" required="true"%>

<c:forEach items="${map}" var="pair">
     <a href="show?id=${pair.key}&customer=${pair.value}" />
</c:forEach> 
```

Servlet/Portlet

```
Map<Long, String> pairMap = new HashMap<Long, String>();
pairMap.put(1L, "YooZoo");
pairMap.put(2L, "YooZoo Oh Oh");

request.setAttribute("pairMap", true); 
```

HTML

```
<%@ taglib prefix="tags" tagdir="/WEB-INF/tags"%>

<tags:myMapTag map="${pairMap}" /> 
```

# android - 警报对话框 - 出现错误

> ID：15900422
> 
> 赞同：1
> 
> 时间：2013-04-09T11:17:49.280
> 
> 标签：android, android-alertdialog

我想在一个使用 arrayAdapter 扩展的类中显示警报对话框。

我收到此错误

android.view.WindowManager$BadTokenException: 无法添加窗口 -- 令牌 null 不适用于应用程序

这是我的代码，我尝试过的

```
public class DeteteAdapter extends ArrayAdapter<Gold> {
private int contexts = Intent.FLAG_ACTIVITY_NEW_TASK;
private Context context;
private List<Gold> subjects = new ArrayList<Gold>();
private TextView subject;
private TextView date_day;
private TextView time;
private ProgressDialog pDialog;
String name;
JSONParser jsonParser = new JSONParser();
// url to create new product
private static String url_create_product = "http://ayyappagold.com/ayyappa/test.php";
// JSON Node names
private static final String TAG_SUCCESS = "success";

public static String month;
public static String year;

public DeteteAdapter(Context context, int textViewResourceId,
        List<Gold> objects) {
    super(context, textViewResourceId, objects);
    this.context = context;
    this.subjects = objects;
}

@Override
public int getCount() {
    return this.subjects.size();
}

@Override
public Gold getItem(int index) {
    return this.subjects.get(index);
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View row = convertView;
    if (row == null) {
        // ROW INFLATION
        Log.d("ExamAdapter", "Starting XML Row Inflation ... ");

        LayoutInflater inflater = (LayoutInflater) this.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.custom_gold, parent, false);
        Log.d("ExamAdapter", "Successfully completed XML Row Inflation!");
    }

    // Get item
    Gold text = getItem(position);
    subject = (TextView) row.findViewById(R.id.textView1);

    time = (TextView) row.findViewById(R.id.textView2);

    String content = text.content;

    String times = text.time;

    subject.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            name = getItem(position).id.toString();
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                    context);

            // set title
            alertDialogBuilder.setTitle("Delete");

            // set dialog message
            alertDialogBuilder
                    .setMessage("This item will be deleted")
                    .setCancelable(false)
                    .setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    // if this button is clicked, close
                                    // current activity
                                    new DeleteProduct().execute();
                                }
                            })
                    .setNegativeButton("Cancel",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    // if this button is clicked, just close
                                    // the dialog box and do nothing
                                    dialog.cancel();
                                }
                            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
        }
    });

    subject.setText(content.replace("*", "\n"));

    return row;
} 
```

请帮我在这个类中显示警报对话框

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-11T07:39:42.317

我找到了答案。我真的很高兴与你分享，

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                        v.getRootView().getContext()); 
```

使用**v.getRootView().getContext()**代替 context 或 v.getContext()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:24:51.787

试试这个

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder( DeteteAdapter.this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T07:47:28.697

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                context); 
```

像这样改变这条线；

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                (Activity)context); 
```

也许它可以帮助你

# jpa - 如何使用实体类获取 entityManager

> ID：15900426
> 
> 赞同：2
> 
> 时间：2013-04-09T11:18:02.543
> 
> 标签：jpa, ejb

如何联系管理实体的实体经理。我是说; 假设我在 sessionBean 中有一个实体引用，我怎样才能得到这个实体的 entityManager 属于一个？我已经尝试过（请参阅 getEntityManagerOfEntity() 方法）包含 em 的方法；但它不起作用。

谢谢bgrds

```
@Stateless(name = "MainManager", mappedName = "MainManager")
@TransactionManagement(TransactionManagementType.CONTAINER)
@Interceptors(value = { PerformanceMonitor.class, ProfileInterceptor.class })
public class MainManagerBean implements MainManager, MainManagerLocal
{
    private Logger logger = Logger.getLogger(this.getClass());

    @PersistenceContext(unitName = "DSApp")
    private EntityManager manager;

    @PersistenceContext(unitName = "DSIX")
    private EntityManager integrationManager;

    @Resource
    SessionContext ctx;

public EntityManager getEntityManagerOfEntity(SuperEntity superEntity)
{
    if (manager.contains(superEntity))
        return manager;
    else if (integrationManager.contains(superEntity))
        return integrationManager;

    return null;
}

public SuperEntity findByPrimaryKey(SuperEntity superEntity)
{
    getEntityManagerOfEntity(superEntity).setFlushMode(FlushModeType.COMMIT);
    return dao.findByPrimaryKey(getEntityManagerOfEntity(superEntity), superEntity); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:54:24.140

您不能`EntityManager`使用 JPA API 从实体回溯，即使它仍处于托管状态。

如果您在 bean 中有对不同 EM 的引用并且实体是受管理的，那么您可以做的是通过调用来检查正确的 EM `em.contains(entity)`。

在大多数情况下，知道哪个 EM 最初获取了实体并不重要，因为您可以将实体合并到任何持久性上下文中并继续使用它。

# selenium - 使用 selenium 的下拉选择自动化

> ID：15900428
> 
> 赞同：1
> 
> 时间：2013-04-09T11:18:10.757
> 
> 标签：selenium, automated-tests, selenium-webdriver

![在此处输入图像描述](https://i.stack.imgur.com/zwQdC.png)

我需要自动选择 selenium 中的下拉框。下面给出了包含下拉列表的 html 代码。每个组件的 html 代码都是使用 firebug 获取的。

```
// Input Area

<input type="text" title="Filter by Administrator" readonly="readonly" value="Filter by   Administrator" id="dnn_ctr373_View_BusinessList_admin_dd_Input" class="rcbInput   rcbEmptyMessage" name="dnn$ctr373$View$BusinessList_admin_dd" autocomplete="off">

// Dropdown arrow

<a style="overflow: hidden;display: block;position: relative;outline: none;"   id="dnn_ctr373_View_BusinessList_admin_dd_Arrow">select</a>

// Values inside drop down

<ul class="rcbList" style="list-style:none;margin:0;padding:0;zoom:1;">
<li class="rcbItem ">All</li>
<li class="rcbItem ">dat@nykkos.com</li>
<li class="rcbHovered ">dat1@nykkos.com</li>
</ul> 
```

根据[此处](https://stackoverflow.com/questions/6430462/how-to-select-get-drop-down-option-in-selenium-2)的回复，我使用以下代码自动进行下拉选择。

```
Select select = new Select(driver.findElement(By.xpath("//*[@id=\"dnn_ctr373_View_BusinessList_admin_dd_Input\"]")));
select.deselectAll();
select.selectByVisibleText("All"); 
```

该代码给了我以下异常：

```
org.openqa.selenium.support.ui.UnexpectedTagNameException: Element should have been  "select" but was "input"
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 20:21:18'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.35-32-generic',  java.version: '1.6.0_26'
Driver info: driver.version: unknown
at org.openqa.selenium.support.ui.Select.<init>(Select.java:46)
at FilterByAdministrator.testFilterByAdministrator(FilterByAdministrator.java:41)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我不确定我上面用于下拉选择的代码是否正确。

有人可以让我知道可能的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:46:33.683

试试这个：

```
driver.findElement(By.xpath("//*[text()='select']")).click();
driver.findElement(By.xpath("//*[text()='All']")).click(); 
```

它可能会起作用。根据您的 html，它看起来不像选择框。您可以通过正常的点击操作来实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:40:42.570

采用：

```
driver.findElement(By.id("dnn_ctr373_View_BusinessList_admin_dd_Input")); 
```

代替：

```
driver.findElement(By.xpath("//*[@id=\"dnn_ctr373_View_BusinessList_admin_dd_Input\"]"))); 
```

**编辑**

试试下面的代码，让我知道它是否有效。

```
WebElement DropDown = driver.findElement(By.id("dnn_ctr373_View_BusinessList_admin_dd_Input"));

Dropdown.sendKeys("All"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:48:56.317

如果您阅读错误消息，它会显示 -

```
Element should have been  "select" but was "input" 
```

这表明有问题的 Web 元素是输入字段类型。因此，不要选择，而是尝试输入/`send`您的输入，就像这样

```
driver.findElement(By.id("dnn_ctr373_View_BusinessList_admin_dd_Input")).sendKeys("All"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T05:29:23.600

在 python webdriver 下拉选择中是非常简单的方法。请参阅下面的代码。

```
Select(driver.find_element_by_xpath("xpath")).select_by_visible_text(" enter text with you want select") 
```

它应该在 python selenium webdriver 中工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-15T18:29:49.353

上面带有区分大小写修饰的行

```
Driver.Instance.FindElement(By.XPath("//*[text()='select']")).Click();
Driver.Instance.FindElement(By.XPath("//*[text()='All']")).Click(); 
```

# android - 使用 JSON 登录 Android 应用

> ID：15900435
> 
> 赞同：2
> 
> 时间：2013-04-09T11:18:33.717
> 
> 标签：android

我正在开发一个 android 应用程序，其中使用 web 服务通过 JSON 获取数据。以下是我用来登录应用程序的 JSON 字符串。所有参数、wsfunction、syntax 都经过检查并发现是正确的。

**MainActivity.java**

```
String loginjson = "{\"userDetails\":[{\"username\":"
       +"\""
+username.getText().toString().trim()
+"\",\"password\":"
+"\""
+password.getText().toString()
+"\",\"ipaddress\":"
+"\""
+Constants.ipaddress
+"\",\"lastaccess\":\"0\"}],\"wsfunction\":\"user_authentication\"}";

Constants.sercall.servercall(loginjson); 
```

这里还有代码，其中写入了来自服务器的请求和响应的逻辑。

**服务器调用.java**

```
import java.io.InputStream;
import java.io.InputStreamReader;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import android.util.Log;
public class Servercalls {

        public String response_str="";
        public HttpClient httpclient = new DefaultHttpClient();
        public HttpPost httppost = new HttpPost(url); //PHP webservice url

        public void servercall(String jsonstring){
         try {
                 Log.d("Request to server",jsonstring);  
                JSONArray postjson=new JSONArray();
                    postjson.put(jsonstring);
                    httppost.setHeader("json",jsonstring);
                     httppost.getParams().setParameter("jsonpost",postjson);
                HttpResponse response;
                response = httpclient.execute(httppost);
                   if(response != null){
                InputStream is = response.getEntity().getContent();
                     BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                     String line="";
                          while ((line = reader.readLine()) != null) {
                                         response_str=line;
                                Log.e("Response from server",response_str);  
                           }         
                        }
                        } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        Log.e("cpexception", "Error in client protocol" + e.toString());
                        } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        } catch (Exception e) {
                        Log.e("log_tag", "Error in http connection "+ e.toString());
                                }
         }

} 
```

它给出的输出为：

{"error":1,"msg":"未指定服务"}

请帮助我从服务器获得正确的响应....

# jquery - 过滤与 jQuery "on" 方法绑定的元素

> ID：15900446
> 
> 赞同：1
> 
> 时间：2013-04-09T11:19:03.493
> 
> 标签：jquery, bind

我想将事件绑定到正文中的所有元素，但容器及其后代除外，并且无法使其正常工作。假设 html 标记是：

```
<div class="myDiv">
    <div>
        <label>Click here (should not alert)</label>    
    </div>
</div>

 <label>Click here (should alert)</label> 
```

我首先尝试过：

```
$("body, body *").not(".myDiv, .myDiv *").on("click", function(e) {
    e.stopPropagation();
    alert(e.target);
}); 
```

但警报会在两个标签上触发（[此处](http://jsfiddle.net/5DrbD/1/)为小提琴）。我得到了以下相同的结果：

```
$("body, body *").on("click", ":not(.myDiv)", function(e) {
    e.stopPropagation();
    alert(e.target);
}); 
```

我设法实现了我想要的（[这里](http://jsfiddle.net/4FzXd/1/)小提琴）：

```
$("body, body *").on("click", function(e) {
    if ($(e.target).parents(".myDiv, .myDiv *").length == 0) {
        e.stopPropagation();
        alert(e.target);
    }
}); 
```

但我不明白为什么前两种方法不会产生相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:45:32.957

发生的事情是 jQuery 与您告诉他的完全匹配，所以当您编写时：

```
$("body, body *").not(".myDiv, .myDiv *").on("click", function(e) { 
```

它将匹配第`body`一个，然后是*每个*后代，当您过滤时，`not`您会忽略`.myDiv`它，它是孩子，但您仍然保留身体。

同样的情况也发生在这里：

```
$("body, body *").on("click", ":not(.myDiv)", function(e) { 
```

所以，即使你的 not 选择器是正确的，body 元素仍然有一个附加的事件，这就是你最后一段代码工作的原因，它在 body 中触发事件并询问稍后要过滤什么。

要解决此问题，您可以执行以下操作：

```
$("body *").not(".myDiv, .myDiv *").on("click", function(e) {
    e.stopPropagation();
    alert(e.target);
}); 
```

我建议您登录控制台 ( `console.log`) 选择器的结果，这样您就可以更好地了解正在发生的事情

祝你好运！

# jquery - 在 twitter bootstrap 中显示/隐藏带有数据属性的警报框

> ID：15900447
> 
> 赞同：1
> 
> 时间：2013-04-09T11:19:08.143
> 
> 标签：jquery, html, twitter-bootstrap, custom-data-attribute

我想**使用数据属性在 twitter bootstrap**中显示隐藏警报框，这是因为我可以在一页中使用多个警报框...

目前我有这个，

```
<a href="#" data-box="myAlert">Hint</a> //data-box is the id of the box

<div id="myAlert" class="alert alert-info">
    <a class="close" data-dismiss="alert" href="#">&times;</a>
    <p>Alert Me !!!!</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:26:10.880

尝试

```
$(function(){

  $('[data-box]').click(function(){
    var $this = $(this);
    $('#' + $this.data('box')).show()
    return false;
  });

  $(document).on('click', '.alert .close', function(){
    $(this).closest('.alert').hide()
  });

}); 
```

演示：[Plunker](http://plnkr.co/edit/ZDglZl?p=preview)

**更新**
使用锚选项卡显示/隐藏

```
<a href="#" data-box="myAlert">Hint</div>

<div id="myAlert" class="alert alert-info hide">
    <p>Alert Me !!!!</p>
</div>  

$(function(){

  $('[data-box]').click(function(){
    var $this = $(this);
    $('#' + $this.data('box')).toggle()
    return false;
  });

}); 
```

演示：[小提琴](http://plnkr.co/edit/8zS3pi?p=preview)

# android - 如何动态显示谷歌广告而不在布局文件中添加广告视图

> ID：15900449
> 
> 赞同：1
> 
> 时间：2013-04-09T11:19:13.297
> 
> 标签：android

我只有在 android 布局文件中查看，但我想在我的应用程序中显示添加，我搜索了很多东西但没有得到解决方案，请帮助我如何在没有布局文件的情况下动态插入广告。

# azure - 从 WinRT 应用程序访问 Azure Blob 存储

> ID：15900450
> 
> 赞同：1
> 
> 时间：2013-04-09T11:19:13.473
> 
> 标签：azure, windows-8, winrt-xaml, blobstorage

我尝试从我的 Windows 8 应用程序中访问 azure blob sotage。我看到了这个 [例子](http://code.msdn.microsoft.com/windowsapps/Upload-File-to-Windows-c9169190)，但在他使用**Windows Azure Storage Client Library for Windows 8**时，我无法在 github、google 等上找到这个库。如何从我的 Windows 8 应用程序访问 blob storagw&

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:37:32.917

适用于 Windows 8 的 Windows Azure 存储客户端库是适用于 .Net ( [https://github.com/WindowsAzure/azure-sdk-for-net](https://github.com/WindowsAzure/azure-sdk-for-net) ) 的 Windows Azure 存储客户端库的一部分。RT 版本的直接链接：[https](https://github.com/WindowsAzure/azure-sdk-for-net/tree/master/microsoft-azure-api/Services/Storage/Lib/RT) ://github.com/WindowsAzure/azure-sdk-for-net/tree/master/microsoft-azure-api/Services/Storage/Lib/RT 。

您需要做的是使用第一个链接下载整个源代码，在 VS 2012 中打开解决方案并仅构建`RT`项目。然后，您将获得必要的`winmd`文件。

**更新：**

实际上我从你上面提到的链接下载了项目的源代码，我发现它没有使用 Windows 8 的存储客户端库。它实际上使用了 Windows 8 的 Windows Azure 移动客户端 SDK，你可以从这里下载：[http： //www.windowsazure.com/en-us/downloads/](http://www.windowsazure.com/en-us/downloads/)（移动设备 --> Windows 应用商店）。一旦你这样做，那么你的代码应该编译。为了运行该应用程序，您需要首先创建一个移动服务，您可以通过访问 Windows Azure 门户来完成，当您在那里时，获取应用程序密钥（底部按钮栏 --> 管理密钥）。您需要移动服务 URL 和应用程序密钥，以便将它们粘贴到 app.xaml.cs 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:29:04.697

如果有人需要适用于 Windows 8 的旧版 Windows Azure 存储客户端库，则可以从[此处](https://github.com/Xyroid/Microsoft-WindowsAzure-Storage-for-win8)下载。然后我也建议下载源代码并编译它。

# php - PHP CSS Color Shuffle数组？

> ID：15900452
> 
> 赞同：0
> 
> 时间：2013-04-09T11:19:17.753
> 
> 标签：php, jquery, css, shuffle

在一个网站中，我有一个 PHP 片段，在每次刷新时，某些元素都会改变颜色（div 的链接、文本、悬停状态等）。这很好用，但目前，在刷新时，它们会通过在必要时将它们应用于 css 来更改为我的主题颜色（下面的示例）。

我现在有一个用于动画的悬停状态的 jQuery 函数和我的所有链接：悬停状态它们包含在颜色随机播放中。当应用颜色随机播放时，如果您要将它们放在 css 中，它是默认的“红色”、“蓝色”、“绿色”。

我在网上看过，但我不确定还能在哪里看，因为它不在 jQuery 代码段上工作，所以我认为它与 jQuery 函数有关。

标头顶部的 PHP：

```
<?php $colours = array('red', 'yellow', 'pink', 'blue', 'green'); 
shuffle($colours); 
$random = $colours[0]; ?> 
```

在 body 标签上，它作为 id 回显：

```
<body id="<?php echo $random; ?>"> 
```

关联`*<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>*`

在任何 div 或元素上，我希望它们在 css 中更改它们之前的颜色是#green，#red 等颜色，所以如果我想要“共享类”来更改我的 css，如下所示：

```
#green .share {
    color:#79b74c;
}
#red .share {
    color:#900;
} 
```

现在，除了我使用 jQuery 函数的悬停随机播放状态之外，这一切都有效：

```
$(document).ready(function(){
    // colour rollover navigation
    $(".share").hover(function() {
       $(this).stop().animate({ 'color': "<?php echo $random; ?>" }, 300);
    },function() {
       $(this).stop().animate({ 'color': "#fff" }, 300);
    }); 
```

它必须与 jQuery 有关，因为它在删除时运行良好，并且在应用时运行良好，但它将 php 中的颜色作为 css 的默认颜色十六进制代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:37:23.190

CSS3呢？

```
 #green .share {
        color:#79b74c;
    }
    #green .share:hover{
        color:#79b74c;
    }
    #red .share {
        color:#900;
    }
    #red .share:hover {
        color:black;
    }
    .share:hover{
        -webkit-transition: 0.3s;
        -moz-transition:  0.3s;
        -o-transition:  0.3s;
        transition:  0.3s;
    } 
```

# c++ - C++：一种查找依赖于 Visual C++ Redistribute 的方法

> ID：15900455
> 
> 赞同：2
> 
> 时间：2013-04-09T11:19:27.113
> 
> 标签：c++, visual-studio-2012, redistributable

我在 C++ 培训项目中做了很多事情，stackoverflow 对我帮助很大。我总是尽可能地保持它的“标准”，这样它就可以跨平台了。到处使用 boost，C++11 线程和使用 WIN32 套接字或 BSD API 的包装器。我决定为一个朋友编译 RELEASE 只是为了炫耀，它需要在他的计算机上安装 MSVCPP110.dll :(

我在早期就遇到了这个问题，但后来我将 Visual Studio 设置为将 MFC 编译为 STATIC 库，并修复了初始测试，但我不知道我在需要“我的用户”为一个简单的控制台应用程序安装 Visual C++ Redistribute，该应用程序启动 2 个线程并在其中一个线程上打开一个 TCP 套接字。

您对新手有什么建议吗，我如何检查困扰我的系统的问题，或者将其包含在可执行文件中的方法，我已经看到我的计算机上的一些游戏在其安装目录中具有上述 DLL，如果我只是将该 DLL 与我的可执行文件打包，它会起作用吗？

提前感谢您对此事的任何建议！

PS：彻底审查我的代码后，我意识到这可能是一个问题

`#pragma comment(lib, "ws2_32.lib")`

但我似乎没有找到这个库的静态版本：U 有没有解决方法。我需要那个库来进行 WSA 启动调用

`WSAStartup(MAKEWORD(2,2), &Winsock);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T11:25:23.263

您不需要所有文件，通常只有 1 或 2 个，例如 mfcXXX 和 msvcrxxx

[使用http://dependencywalker.com/](http://dependencywalker.com/)检查您的依赖项并将其添加到您的分发中

# linux-kernel - 对内核加载器的 x86 内存布局感到困惑

> ID：15900456
> 
> 赞同：0
> 
> 时间：2013-04-09T11:19:28.507
> 
> 标签：linux-kernel, x86, bootloader

我是 Linux 内核的新手，正在阅读内核加载程序的内存布局，但对下面给出的图表感到困惑

```
0A0000  +------------------------+
        |  Reserved for BIOS     |  Do not use.  Reserved for BIOS EBDA.
09A000  +------------------------+
        |  Command line          |
        |  Stack/heap            |  For use by the kernel real-mode code.
098000  +------------------------+  
        |  Kernel setup          |  The kernel real-mode code.
090200  +------------------------+
        |  Kernel boot sector    |  The kernel legacy boot sector.
090000  +------------------------+
        |  Protected-mode kernel |  The bulk of the kernel image.
010000  +------------------------+
        |  Boot loader           |  <- Boot sector entry point 0000:7C00
001000  +------------------------+
        |  Reserved for MBR/BIOS |
000800  +------------------------+
        |  Typically used by MBR |
000600  +------------------------+ 
        |  BIOS use only         | 
```

现在解释这个图的声明对我来说有点混乱。

使用 bzImage 时，保护模式内核被重定位到 0x100000（“高端内存”），内核实模式块（引导扇区、设置和堆栈/堆）被重定位到 0x10000 和低端末尾之间的任何地址记忆。

现在第一件事是0x100000地址在上图中？？

第二件事是当它说内核实模式块被重定位到“0x10000和低内存结束之间的任何地址”时意味着它可以重定位到0x10000到000600之间的地址？

最初，内核模式块放置在 0x10000 到 09A000 之间。

“希望保持“内存上限”——引导加载程序触及的低内存中的最高点——尽可能低，因为一些较新的 BIOS 已经开始分配一些相当大量的内存，称为扩展 BIOS数据区，靠近低内存的顶部”。

当它说低内存意味着内存下降到 000600 和高内存上升到 0A0000 时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:39:22.980

> 现在第一件事是0x100000地址在上图中？？

0x100000 不在图表上，因为只有第一个兆字节是特殊的。超过该点，物理内存至少在 15-16MB 点之前是连续的。

> 第二件事是当它说内核实模式块被重定位到“0x10000和低内存结束之间的任何地址”时意味着它可以重定位到0x10000到000600之间的地址？

实模式代码可以存在于大约 1 MB 以下的任何地方，并且结尾可能就在附近，在 0x9A000 或 EBDA 开始的任何地方。

> 当它说低内存意味着内存下降到 000600 和高内存上升到 0A0000 时？

你有它在图表上，从 0xA0000 向下，到 0。

# java - Java - 使用字符串合并排序

> ID：15900457
> 
> 赞同：3
> 
> 时间：2013-04-09T11:19:28.487
> 
> 标签：java, sorting, merge, mergesort, indexoutofboundsexception

在这个程序中，我使用mergeSort 对奥运奖牌进行排序。

我的代码似乎有点不对劲，因为有时它会给我一个 java.lang.ArrayIndexOutOfBoundsException ，有时它不会。

* * *

对于一些背景说明：

我有一种方法可以随机生成奥运国家和他们在记分牌中获得的奖牌。以以下形式返回结果的 String[] 数组：

**可以 1 1 1**

**美国 1 1 2**

**英国 0 0 1**

**中国 0 0 2**

* * *

然而，记分牌需要按金、银、铜牌的递减顺序排列。所以它必须是这样的：

**美国 1 1 2**

**可以 1 1 1**

**中国 0 0 2**

**英国 0 0 1**

使用冒泡排序和快速排序对棋盘进行排序可以正常工作，但归并排序不行。有时它会很好，但更多时候它会给我 ArrayIndexOutOfBoundsException。

```
public static void main(String[] args) {    

  Olympic_Results score = new Olympic_Results();

  //print a return value of an array    

  String[] countries = score.OlympicResult(7); //input how many game results
  mergeSort(countries, 0, countries.length - 1);
  for (String value:countries)
  System.out.println(value);
}

public static void mergeSort(String array[], int lo, int n) {
  int low = lo;
  int high = n;
  if (low >= high) {
    return;
  }

  int middle = (low + high) / 2;
  mergeSort(array, low, middle);
  mergeSort(array, middle + 1, high);
  int end_low = middle;
  int start_high = middle + 1;
  while ((lo <= end_low) && (start_high <= high)) {
    if ((array[low].substring(4,8)).compareTo(array[high].substring(4,8)) > 0) {
      low++;
    } 

    else {
      String Temp = array[start_high];
      for (int k = start_high - 1; k >= low; k--) {
        array[k + 1] = array[k];
      }
      array[low] = Temp;
      low++;
      end_low++;
      start_high++;
    }
  }
} 
```

**知道为什么这段代码不能正常工作吗？谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T09:30:53.190

两大错误：

1.  您保留两个名称相似但用途不同的变量。结果，`while`循环测试该`lo`值，尽管从未更改它（循环与`low`变量一起使用）。

2.  内部应该比较两个排序后的系列的初始项目以选择其中一个`if`。`while`您的系列从`low`and开始`start_high`，因此您应该与 进行比较`array[low]`，`array[start_high]`但您将其与 进行比较`array[high]`。如果`array[high]`数据恰好是正在排序的子区间中的最小值，则该`low`值将增加超过数组大小（并且`while`条件不会捕获它，因为它会进行测试`lo`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:47:00.037

我认为您在将数组划分为多个部分时过于深入：

```
if (low >= high) {
    return;
    } 
```

尝试在长度为 1 时停止并开始修复它。

```
if (high - low <=1) {
    return;
    } 
```

顺便说一句，如果长度为 2，那么您可以比较适当的值并立即返回它们已经排序。

**UPD**

您似乎添加了太多具有相似名称的变量并迷失在其中:)..

这看起来不正确：

while (( **lo** <= end_low) && (start_high <= high)) {

# asp-classic - 找不到将浮点数转换为逗号分隔的数千个 ASP CLASSIC 的函数

> ID：15900463
> 
> 赞同：0
> 
> 时间：2013-04-09T11:19:41.647
> 
> 标签：asp-classic, format

在 ASP CLASSIC 中找不到将浮点数转换为逗号分隔的函数时遇到问题

它需要格式化各种数字：

```
0.01
-.1
100000.45
993000 
```

他们最终应该像：

```
 0.01
-0.1
100,000.45
993,000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:24:21.447

会`FormatNumber(yournumber, 2)`为你工作吗？

千位分隔符是数据显示方式的一部分。这称为全球化，由`Response.LCID`or配置`Session.LCID`（对于所有响应）。

有关 localeID 以及如何设置它的更多信息：http: [//msdn.microsoft.com/en-us/library/ms525091 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525091(v=vs.90).aspx)

我怀疑英语或美国语言环境用逗号设置千位分隔符。

**编辑**

如果您想了解有关 的参数的更多信息`FormatNumber`，可以在[W3Schools FormatNumber](http://www.w3schools.com/vbscript/func_formatnumber.asp)参考中找到它们。

# android - 不幸的是，[appname] 已停止错误

> ID：15900471
> 
> 赞同：2
> 
> 时间：2013-04-09T11:20:01.147
> 
> 标签：android

我是开发android应用程序的新手。我一直在阅读这里和其他网站的提要来学习。当我单击一个名为 Social 的按钮时，我得到了不幸 [appname] 已停止。我正在构建一个应用程序，这就是我所拥有的：

MainActivity.java

```
Button btnOut = (Button)findViewById(R.id.btnOut);
btnOut.setOnClickListener(new View.OnClickListener() {
@Override
public void onClick(View v) {      
    final Dialog alertbox = new Dialog(MainActivity.this);
        alertbox.setContentView(R.layout.button);
    alertbox.setTitle("News - Choose One:");
                Button world = (Button) alertbox.findViewById(R.id.world);
                world.setOnClickListener(new View.OnClickListener() {
                @Override
                    public void onClick(View v) {
                        WebView myWebView = (WebView) findViewById(R.id.webview2);
                        myWebView.setWebViewClient(new WebViewClient());
                        setContentView(myWebView);
                        myWebView.loadUrl("http://news.yahoo.com/world");
                    }
                });  
                Button tech = (Button) alertbox.findViewById(R.id.tech);
                tech.setOnClickListener(new View.OnClickListener() {
                @Override
                    public void onClick(View v) {
                        WebView myWebView = (WebView) findViewById(R.id.webview2);
                        myWebView.setWebViewClient(new WebViewClient());
                        setContentView(myWebView);
                        myWebView.loadUrl("http://news.yahoo.com/tech");
                    }
                });  
                Button sport = (Button) alertbox.findViewById(R.id.sport);
                sport.setOnClickListener(new View.OnClickListener() {
                @Override
                    public void onClick(View v) {
                        WebView myWebView = (WebView) findViewById(R.id.webview2);
                        myWebView.setWebViewClient(new WebViewClient());
                        setContentView(myWebView);
                        myWebView.loadUrl("http://sports.yahoo.com");
                    }
                });
                alertbox.show();
            }
        }); 
```

WebActivity2.java

```
<?xml version="1.0" encoding="utf-8"?>

<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:id="@+id/webview2" >

</WebView> 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.nicx.amazing"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />
    <uses-permission 
        android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".SplashActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
            </intent-filter>
        </activity>

</manifest> 
```

编辑＃2（对不起，我之前放错了logcat）：LOGCAT

 `````
04-09 20:04:40.348: W/dalvikvm(26501): threadid=1: thread exiting with uncaught exception (group=0x40abc210)
04-09 20:04:40.378: E/AndroidRuntime(26501): FATAL EXCEPTION: main
04-09 20:04:40.378: E/AndroidRuntime(26501): java.lang.NullPointerException
04-09 20:04:40.378: E/AndroidRuntime(26501):    at com.nicx.amazing.MainActivity$3$1.onClick(MainActivity.java:127)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at android.view.View.performClick(View.java:3574)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at android.view.View$PerformClick.run(View.java:14293)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at android.os.Handler.handleCallback(Handler.java:605)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at android.os.Looper.loop(Looper.java:137)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at android.app.ActivityThread.main(ActivityThread.java:4448)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-09 20:04:40.378: E/AndroidRuntime(26501):    at dalvik.system.NativeStart.main(Native Method) 
````  `任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:15:44.693

这是你的罪魁祸首：

```
04-09 20:04:40.378: E/AndroidRuntime(26501): java.lang.NullPointerException
04-09 20:04:40.378: E/AndroidRuntime(26501):    at com.nicx.amazing.MainActivity$3$1.onClick(MainActivity.java:127) 
```

在 MainActivity.java 的第 127 行中，您得到了`null`参数值。``

# c# - 在有界数据网格视图中捕捉新记录的创建

> ID：15900474
> 
> 赞同：0
> 
> 时间：2013-04-09T11:20:18.227
> 
> 标签：c#, data-binding, datagridview

我`DataGridView`认为它与某些s （我的班级名称）`BindingList`有关。`Student`在我的表单中，当用户向 DataGridView 添加行时，我想调用一些方法。但是，当我注册到`RowsAdded`事件时，事件会在创建记录 ( ) 之前启动该方法`Student`，当然在它绑定到行之前。`DataGirdView`我在或 中找不到正确的事件`DataGirdView.DataBinding`。

它的名字是什么，我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:28:06.713

另一种方法是不要弄乱 ui 事件，只需观察 BindingList 的 CollectionChanged 事件。当然，这仅在您的 DataGridView 的绑定为 Mode=TwoWay 时才有效

# html - CSS样式不起作用我需要的

> ID：15900475
> 
> 赞同：0
> 
> 时间：2013-04-09T11:20:22.293
> 
> 标签：html, css

我想要做的是，在开始我的页面时，我不希望我的画廊显示，直到用户单击按钮。

我认为我的 CSS 有问题，因为我不能只打开背景但图像不显示。在我看来，它与“显示”有关。我已经尝试了很多东西，但我无法解决我的问题。

谢谢你的帮助。

CSS：

```
.fixed-bar{margin-top:43px;display:none}
.ui-btn-right{margin-right:70px}

.elastislide-list {
    list-style-type: none;
    display:inline;
}

.no-js .elastislide-list {
    display: block;
}

.elastislide-carousel ul li {
    min-width: 60px; /* minimum width of the image (min width + border) */
    }

.elastislide-wrapper {
    position: relative;
    background-color: #fff;
    margin: 0 auto;
    min-height: 90px;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
}

.elastislide-wrapper.elastislide-loading {
    background-image: url(../elastislide/loading.gif);
    background-repeat: no-repeat;
    background-position: center center;
}

.elastislide-horizontal {
    padding: 10px 40px;
}

.elastislide-vertical {
    padding: 40px 10px;
}

.elastislide-carousel {
    overflow:hidden;
    position:relative;
}

.elastislide-carousel ul {
    position: relative;
    display: block;
    list-style-type: none;
    padding: 0;
    margin: 0;
    -webkit-backface-visibility: hidden;
    -webkit-transform: translateX(0px);
    -moz-transform: translateX(0px);
    -ms-transform: translateX(0px);
    -o-transform: translateX(0px);
    transform: translateX(0px);
}

.elastislide-horizontal ul {
    white-space: nowrap;
}

.elastislide-carousel ul li {
    margin: 0;
    -webkit-backface-visibility: hidden;
}

.elastislide-horizontal ul li {
    height: 100%;
    display: inline-block;
}

.elastislide-vertical ul li {
    display: block;
}

.elastislide-carousel ul li a {
    display: inline-block;
    width: 100%;
}

.elastislide-carousel ul li a img {
    display: block;
    border: 2px solid white;
    max-width: 100%;
}

/* Navigation Arrows */

.elastislide-wrapper nav span {
    position: absolute;
    background: #ddd url(../elastislide/nav.png) no-repeat 4px 3px;
    width: 23px;
    height: 23px;
    border-radius: 50%;
    text-indent: -9000px;
    cursor: pointer;
    opacity: 0.8;
}

.elastislide-wrapper nav span:hover {
    opacity: 1.0
}

.elastislide-horizontal nav span {
    top: 50%;
    left: 10px;
    margin-top: -11px;
}

.elastislide-vertical nav span {
    top: 10px;
    left: 50%;
    margin-left: -11px;
    background-position: -17px 5px;
}

.elastislide-horizontal nav span.elastislide-next {
    right: 10px;
    left: auto;
    background-position: 4px -17px;
}

.elastislide-vertical nav span.elastislide-next {
    bottom: 10px;
    top: auto;
    background-position: -17px -18px;
} 
```

HTML：

```
<div class="container demo-3">
  <div class="main">
     <div class="fixed-bar">
         <ul id="carousel" class="elastislide-list" >
        <li><a href="#"><img src="elastislide/small/1.jpg" alt="image01" /></a></li>
        <li><a href="#"><img src="elastislide/small/2.jpg" alt="image02" /></a></li>
        <li><a href="#"><img src="elastislide/small/3.jpg" alt="image03" /></a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:40:10.597

似乎它应该可以工作，因为您已将 .fixed-bar 设置为 display: none。这应该使它所有的孩子都不会出现。有没有可能让你在 JSFiddle 中工作？这将有助于每个试图回答它的人，也可能会帮助您在此过程中修复它（当它看起来很小时，总是会发生在我身上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:22:53.667

```
.fixed-bar{margin-top:43px;display:block;} 
```

存在问题是因为您的代码中没有可见按钮来使用目标选择器激活不可见部分。检查这个有趣的例子。 [http://jsfiddle.net/codepo8/wsD9L/](http://jsfiddle.net/codepo8/wsD9L/)

# php - 更大和更少或更小和更多的查询？

> ID：15900482
> 
> 赞同：0
> 
> 时间：2013-04-09T11:20:34.920
> 
> 标签：php, mysql, join

所以假设我有两个表，一个（让我们称之为`person`）有一个名为的字段`type`，它存储了一个链接到另一个表的整数（让我们`types`用一个名为的字段来调用它`id`。什么会提高性能？

*   一个更大的查询存储所有类型的值，然后遍历`person`表并从我们从`types`查询中获得的数组中获取一个值。

*   在每个循环中`person`获取一个值`types`

*   使用`JOIN`查询将 加入`type`到`person`查询中。

注意：在示例中，我使用了一些假变量，例如`$db`（显然）。把这些想象成一个 CodeIgniter 数据库类或其他东西......

BP #1 的示例代码：

```
<?php
    $types = $this->db->query("SELECT * FROM `types`")->result_array();

    $query = $this->db->query("SELECT * FROM `person`");

    foreach($query->result_array() as $value)
    {
        $type = $types[$value['type']];
    } 
```

BP #2 的示例代码：（已编辑以添加缓存形式）

```
<?php
    $query = $this->db->query("SELECT * FROM person");

    $types = [];

    foreach($query->result_array() as $value)
    {
        if(empty($types[$value['type']]))
        {
            $types[$value['type']] = $this->db->query("SELECT * FROM types WHERE id = {$value['type']} LIMIT 1")->row_array();
        }
        $type = $types[$value['type']];
    } 
```

BP #3 的示例代码：（注意：我根本没有使用`JOIN`过，所以请原谅查询中的任何错误，并随时修复它......）

```
<?php
    $query = $this->db->query("SELECT * FROM person JOIN types ON person.type = types.id");

    foreach($query->result_array() as $value)
    {
        // type is already there for us in $value
    } 
```

注意：我们预计`person`，两者（将）都有超过 100k+ 行。`types`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:27:13.030

连接方法（选项 3）当然应该是最有效的 - 其他两种方法本质上是重新发明数据库最初设计的处理，*并且*所有相关数据都必须发送到 Web 服务器在它可以完成之前！

# javascript - 在 JavaScript 中将字节大小转换为 KB、MB、GB 的正确方法

> ID：15900485
> 
> 赞同：378
> 
> 时间：2013-04-09T11:20:45.783
> 
> 标签：javascript, byte, converters

我得到[这个代码](https://stackoverflow.com/questions/5501427/php-filesize-mb-kb-conversion)来通过 PHP 以字节为单位转换大小。

现在我想使用 JavaScript将这些尺寸转换为*人类可读的尺寸。*我尝试将此代码转换为 JavaScript，如下所示：

```
function formatSizeUnits(bytes){
  if      (bytes >= 1073741824) { bytes = (bytes / 1073741824).toFixed(2) + " GB"; }
  else if (bytes >= 1048576)    { bytes = (bytes / 1048576).toFixed(2) + " MB"; }
  else if (bytes >= 1024)       { bytes = (bytes / 1024).toFixed(2) + " KB"; }
  else if (bytes > 1)           { bytes = bytes + " bytes"; }
  else if (bytes == 1)          { bytes = bytes + " byte"; }
  else                          { bytes = "0 bytes"; }
  return bytes;
} 
```

这是这样做的正确方法吗？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1058
> 
> 时间：2013-09-06T05:53:36.140

由此：（[来源](https://web.archive.org/web/20120507054320/http://codeaid.net/javascript/convert-size-in-bytes-to-human-readable-format-(javascript))）

```
function bytesToSize(bytes) {
   var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
   if (bytes == 0) return '0 Byte';
   var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
   return Math.round(bytes / Math.pow(1024, i), 2) + ' ' + sizes[i];
} 
```

**注意：**这是原始代码，请使用下面的固定版本。

* * *

**固定版本，未缩小和 ES6 版本：（**按社区）

```
function formatBytes(bytes, decimals = 2) {
    if (bytes === 0) return '0 Bytes';

    const k = 1024;
    const dm = decimals < 0 ? 0 : decimals;
    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];

    const i = Math.floor(Math.log(bytes) / Math.log(k));

    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
} 
```

**固定版本** *（由 StackOverflow 的社区提供，由[JSCompress](https://jscompress.com/)缩小）*

```
function formatBytes(a,b=2,k=1024){with(Math){let d=floor(log(a)/log(k));return 0==a?"0 Bytes":parseFloat((a/pow(k,d)).toFixed(max(0,b)))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][d]}} 
```

**用法 ：**

```
// formatBytes(bytes,decimals)

formatBytes(1024);       // 1 KB
formatBytes('1024');     // 1 KB
formatBytes(1234);       // 1.21 KB
formatBytes(1234, 3);    // 1.205 KB 
```

**演示/来源：**

```
function formatBytes(bytes, decimals = 2) {
    if (bytes === 0) return '0 Bytes';

    const k = 1024;
    const dm = decimals < 0 ? 0 : decimals;
    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];

    const i = Math.floor(Math.log(bytes) / Math.log(k));

    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
}

// ** Demo code **
var p = document.querySelector('p'),
    input = document.querySelector('input');

function setText(v){
    p.innerHTML = formatBytes(v);
}
// bind 'input' event
input.addEventListener('input', function(){ 
    setText( this.value )
})
// set initial text
setText(input.value);
```

```
<input type="text" value="1000">
<p></p>
```

*PS：更改`k = 1000`或`sizes = ["..."]`根据需要（**位**或**字节**）*

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-05-13T07:41:27.970

```
function formatBytes(bytes) {
    var marker = 1024; // Change to 1000 if required
    var decimal = 3; // Change as required
    var kiloBytes = marker; // One Kilobyte is 1024 bytes
    var megaBytes = marker * marker; // One MB is 1024 KB
    var gigaBytes = marker * marker * marker; // One GB is 1024 MB
    var teraBytes = marker * marker * marker * marker; // One TB is 1024 GB

    // return bytes if less than a KB
    if(bytes < kiloBytes) return bytes + " Bytes";
    // return KB if less than a MB
    else if(bytes < megaBytes) return(bytes / kiloBytes).toFixed(decimal) + " KB";
    // return MB if less than a GB
    else if(bytes < gigaBytes) return(bytes / megaBytes).toFixed(decimal) + " MB";
    // return GB if less than a TB
    else return(bytes / gigaBytes).toFixed(decimal) + " GB";
} 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2016-10-06T22:22:42.833

如果显示少于十个 KB 或更大的单位，此解决方案包括一个小数点和一个十分位数字

```
const units = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];

function niceBytes(x){

  let l = 0, n = parseInt(x, 10) || 0;

  while(n >= 1024 && ++l){
      n = n/1024;
  }

  return(n.toFixed(n < 10 && l > 0 ? 1 : 0) + ' ' + units[l]);
} 
```

结果：

```
niceBytes(435)                 // 435 bytes
niceBytes(3398)                // 3.3 KB
niceBytes(490398)              // 479 KB
niceBytes(6544528)             // 6.2 MB
niceBytes(23483023)            // 22 MB
niceBytes(3984578493)          // 3.7 GB
niceBytes(30498505889)         // 28 GB
niceBytes(9485039485039445)    // 8.4 PB 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2017-02-23T06:03:53.447

**这是一个衬里：**

```
val => ['Bytes','Kb','Mb','Gb','Tb'][Math.floor(Math.log2(val)/10)] 
```

**甚至：**

```
val => 'BKMGT'[~~(Math.log2(val)/10)] 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-03-18T16:21:32.917

您可以使用[filesizejs](http://filesizejs.com/)库。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-09-03T18:32:44.820

当与字节相关时，有 2 种真正的方式来表示大小，它们是 SI 单位 (10^3)​​ 或 IEC 单位 (2^10)。还有 JEDEC，但他们的方法模棱两可且令人困惑。我注意到其他示例存在错误，例如使用 KB 而不是 kB 来表示千字节，因此我决定编写一个函数，该函数将使用当前接受的度量单位范围来解决每种情况。

最后有一个格式化位，可以使数字看起来更好一些（至少在我看来），如果它不适合您的目的，请随意删除该格式。

享受。

```
// pBytes: the size in bytes to be converted.
// pUnits: 'si'|'iec' si units means the order of magnitude is 10^3, iec uses 2^10

function prettyNumber(pBytes, pUnits) {
    // Handle some special cases
    if(pBytes == 0) return '0 Bytes';
    if(pBytes == 1) return '1 Byte';
    if(pBytes == -1) return '-1 Byte';

    var bytes = Math.abs(pBytes)
    if(pUnits && pUnits.toLowerCase() && pUnits.toLowerCase() == 'si') {
        // SI units use the Metric representation based on 10^3 as a order of magnitude
        var orderOfMagnitude = Math.pow(10, 3);
        var abbreviations = ['Bytes', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
    } else {
        // IEC units use 2^10 as an order of magnitude
        var orderOfMagnitude = Math.pow(2, 10);
        var abbreviations = ['Bytes', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];
    }
    var i = Math.floor(Math.log(bytes) / Math.log(orderOfMagnitude));
    var result = (bytes / Math.pow(orderOfMagnitude, i));

    // This will get the sign right
    if(pBytes < 0) {
        result *= -1;
    }

    // This bit here is purely for show. it drops the percision on numbers greater than 100 before the units.
    // it also always shows the full number of bytes if bytes is the unit.
    if(result >= 99.995 || i==0) {
        return result.toFixed(0) + ' ' + abbreviations[i];
    } else {
        return result.toFixed(2) + ' ' + abbreviations[i];
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-08-21T10:49:43.980

根据[Aliceljm](https://stackoverflow.com/users/1596799/aliceljm)的回答，我删除了小数点后的 0：

```
function formatBytes(bytes, decimals) {
    if(bytes== 0)
    {
        return "0 Byte";
    }
    var k = 1024; //Or 1 kilo = 1000
    var sizes = ["Bytes", "KB", "MB", "GB", "TB", "PB"];
    var i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(decimals)) + " " + sizes[i];
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-07-13T11:49:46.563

```
function bytesToSize(bytes) {
  var sizes = ['B', 'K', 'M', 'G', 'T', 'P'];
  for (var i = 0; i < sizes.length; i++) {
    if (bytes <= 1024) {
      return bytes + ' ' + sizes[i];
    } else {
      bytes = parseFloat(bytes / 1024).toFixed(2)
    }
  }
  return bytes + ' P';
}

console.log(bytesToSize(234));
console.log(bytesToSize(2043));
console.log(bytesToSize(20433242));
console.log(bytesToSize(2043324243));
console.log(bytesToSize(2043324268233));
console.log(bytesToSize(2043324268233343));
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-07-15T13:08:05.333

这对我有用。

```
bytesForHuman(bytes) {
    let units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB']

    let i = 0

    for (i; bytes > 1024; i++) {
        bytes /= 1024;
    }

    return bytes.toFixed(1) + ' ' + units[i]
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-04-09T12:05:27.377

使用按位运算将是一个更好的解决方案。试试这个

```
function formatSizeUnits(bytes)
{
    if ( ( bytes >> 30 ) & 0x3FF )
        bytes = ( bytes >>> 30 ) + '.' + ( bytes & (3*0x3FF )) + 'GB' ;
    else if ( ( bytes >> 20 ) & 0x3FF )
        bytes = ( bytes >>> 20 ) + '.' + ( bytes & (2*0x3FF ) ) + 'MB' ;
    else if ( ( bytes >> 10 ) & 0x3FF )
        bytes = ( bytes >>> 10 ) + '.' + ( bytes & (0x3FF ) ) + 'KB' ;
    else if ( ( bytes >> 1 ) & 0x3FF )
        bytes = ( bytes >>> 1 ) + 'Bytes' ;
    else
        bytes = bytes + 'Byte' ;
    return bytes ;
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-08-18T16:37:03.437

此解决方案建立在以前的解决方案的基础上，但同时考虑了公制和二进制单位：

```
function formatBytes(bytes, decimals, binaryUnits) {
    if(bytes == 0) {
        return '0 Bytes';
    }
    var unitMultiple = (binaryUnits) ? 1024 : 1000; 
    var unitNames = (unitMultiple === 1024) ? // 1000 bytes in 1 Kilobyte (KB) or 1024 bytes for the binary version (KiB)
        ['Bytes', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']: 
        ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
    var unitChanges = Math.floor(Math.log(bytes) / Math.log(unitMultiple));
    return parseFloat((bytes / Math.pow(unitMultiple, unitChanges)).toFixed(decimals || 0)) + ' ' + unitNames[unitChanges];
} 
```

例子：

```
formatBytes(293489203947847, 1);    // 293.5 TB
formatBytes(1234, 0);   // 1 KB
formatBytes(4534634523453678343456, 2); // 4.53 ZB
formatBytes(4534634523453678343456, 2, true));  // 3.84 ZiB
formatBytes(4566744, 1);    // 4.6 MB
formatBytes(534, 0);    // 534 Bytes
formatBytes(273403407, 0);  // 273 MB 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2022-01-05T11:57:01.110

### 将字节格式化为最合理的大小（KB、MB 或 GB）的实用方法

```
Number.prototype.formatBytes = function() {
    var units = ['B', 'KB', 'MB', 'GB', 'TB'],
        bytes = this,
        i;

    for (i = 0; bytes >= 1024 && i < 4; i++) {
        bytes /= 1024;
    }

    return bytes.toFixed(2) + units[i];
}

let a = 235678; //bytes

console.log(a.formatBytes()); //result is 230.15KB
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-12-08T21:22:14.053

我最初将[@Aliceljm](https://stackoverflow.com/users/1596799/aliceljm)的答案用于我正在处理的文件上传项目，但最近遇到了一个文件`0.98kb`被读取为`1.02mb`. 这是我现在使用的更新代码。

```
function formatBytes(bytes){
  var kb = 1024;
  var ndx = Math.floor( Math.log(bytes) / Math.log(kb) );
  var fileSizeTypes = ["bytes", "kb", "mb", "gb", "tb", "pb", "eb", "zb", "yb"];

  return {
    size: +(bytes / kb / kb).toFixed(2),
    type: fileSizeTypes[ndx]
  };
} 
```

像这样添加文件后将调用上述内容

```
// In this case `file.size` equals `26060275` 
formatBytes(file.size);
// returns `{ size: 24.85, type: "mb" }` 
```

当然，Windows 会按原样读取文件，`24.8mb`但我对额外的精度很好。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-01-15T12:00:52.650

我在这里更新@Aliceljm 答案。由于小数位对 1,2 位数字很重要，因此我将第一个小数位四舍五入并保留第一个小数位。对于 3 位数字，我将单位位四舍五入并忽略所有小数位。

```
getMultiplers : function(bytes){
    var unit = 1000 ;
    if (bytes < unit) return bytes ;
    var exp = Math.floor(Math.log(bytes) / Math.log(unit));
    var pre = "kMGTPE".charAt(exp-1);
    var result = bytes / Math.pow(unit, exp);
    if(result/100 < 1)
        return (Math.round( result * 10 ) / 10) +pre;
    else
        return Math.round(result) + pre;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-08-09T07:24:16.743

```
var SIZES = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];

function formatBytes(bytes, decimals) {
  for(var i = 0, r = bytes, b = 1024; r > b; i++) r /= b;
  return `${parseFloat(r.toFixed(decimals))} ${SIZES[i]}`;
}
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-11-27T23:52:07.963

我只是想分享我的意见。我遇到了这个问题，所以我的解决方案是这样的。这会将较低的单位转换为较高的单位，反之亦然，只需提供参数`toUnit`和`fromUnit`

```
export function fileSizeConverter(size: number, fromUnit: string, toUnit: string ): number | string {
  const units: string[] = ['B', 'KB', 'MB', 'GB', 'TB'];
  const from = units.indexOf(fromUnit.toUpperCase());
  const to = units.indexOf(toUnit.toUpperCase());
  const BASE_SIZE = 1024;
  let result: number | string = 0;

  if (from < 0 || to < 0 ) { return result = 'Error: Incorrect units'; }

  result = from < to ? size / (BASE_SIZE ** to) : size * (BASE_SIZE ** from);

  return result.toFixed(2);
} 
```

我从[这里得到了这个想法](https://www.techspot.com/news/68482-quickly-convert-between-storage-size-units-kb-mb.html)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-07-01T13:10:52.880

我使用递归并为适当的单元分配级别变量。

```
function getReadableByte(count, decimal=0, level=0) {
    let unitList = ["Bytes", "KB", "MB", "GB", "TB", "PT"];

    if (count >= 1024.0 && (level+1 < unitList.length)) {
        return getReadableByte(count/1024, decimal, ++level)
    }
    return `${decimal ? (count).toFixed(decimal) : Math.round(count)}${unitList[level]}`
}

console.log(getReadableByte(120, 2))
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-09-11T05:53:49.233

这是转换字节的可靠有效方法。您只需要安装**mathjs**库以进行准确计算。只需复制粘贴即可。

```
import { multiply, divide, round } from "mathjs";

class Size {
  constructor(value, unit) {
    this.value = value;
    this.unit = unit.toUpperCase();
  }
}

async function byteToSize(bytes) {
  const B = 1;
  const KB = multiply(B, 1024);
  const MB = multiply(KB, 1024);
  const GB = multiply(MB, 1024);
  const TB = multiply(GB, 1024);
  const PB = multiply(TB, 1024);

  if (bytes <= KB) {
    // @returns BYTE

    const result = round(divide(bytes, B));
    const unit = `B`;

    return new Size(result, unit);
  }

  if (bytes <= MB) {
    // @returns KILOBYTE

    const result = round(divide(bytes, KB));
    const unit = `KB`;

    return new Size(result, unit);
  }

  if (bytes <= GB) {
    // @returns MEGABYTE

    const result = round(divide(bytes, MB));
    const unit = `MB`;

    return new Size(result, unit);
  }

  if (bytes <= TB) {
    // @returns GIGABYTE

    const result = round(divide(bytes, GB));
    const unit = `GB`;

    return new Size(result, unit);
  }

  if (bytes <= PB) {
    // @returns TERABYTE

    const result = divide(bytes, TB).toFixed(2);
    const unit = `TB`;

    return new Size(result, unit);
  }

  if (bytes >= PB) {
    // @returns PETABYTE

    const result = divide(bytes, PB).toFixed(2);
    const unit = `PB`;

    return new Size(result, unit);
  }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-07-31T13:56:05.410

这是一个字节应该如何显示给人类：

```
function bytesToHuman(bytes, decimals = 2) {
  // https://en.wikipedia.org/wiki/Orders_of_magnitude_(data)
  const units = ["bytes", "KiB", "MiB", "GiB", "TiB", "PiB", "EiB"]; // etc

  let i = 0;
  let h = 0;

  let c = 1 / 1023; // change it to 1024 and see the diff

  for (; h < c && i < units.length; i++) {
    if ((h = Math.pow(1024, i) / bytes) >= c) {
      break;
    }
  }

  // remove toFixed and let `locale` controls formatting
  return (1 / h).toFixed(decimals).toLocaleString() + " " + units[i];
}

// test
for (let i = 0; i < 9; i++) {
  let val = i * Math.pow(10, i);
  console.log(val.toLocaleString() + " bytes is the same as " + bytesToHuman(val));

}

// let's fool around
console.log(bytesToHuman(1023));
console.log(bytesToHuman(1024));
console.log(bytesToHuman(1025)); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-04-11T03:24:24.517

```
function bytes2Size(byteVal){
    var units=["Bytes", "KB", "MB", "GB", "TB"];
    var kounter=0;
    var kb= 1024;
    var div=byteVal/1;
    while(div>=kb){
        kounter++;
        div= div/kb;
    }
    return div.toFixed(1) + " " + units[kounter];
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-12-08T14:03:50.427

### 单线

```
const b2s=t=>{let e=Math.log2(t)/10|0;return(t/1024**(e=e<=0?0:e)).toFixed(3)+"BKMGP"[e]};

console.log(b2s(0));
console.log(b2s(123));
console.log(b2s(123123));
console.log(b2s(123123123));
console.log(b2s(123123123123));
console.log(b2s(123123123123123));
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-04-22T23:39:12.577

@Aliceljm 的答案相同，但以“更具说教性”的方式。**谢谢！=D**

```
function formatBytes(numBytes, decPlaces) {
    /* Adjust the number of bytes informed for the most appropriate metric according
    to its value.

    Args:
        numBytes (number): The number of bytes (integer);
        decPlaces (Optional[number])): The number of decimal places (integer). If
            it is "undefined" the value "2" will be adopted.

    Returns:
        string: The number adjusted together with the most appropriate metric. */

    if (numBytes === 0) {
        return "0 Bytes";
    }

    // NOTE: 1 KB is equal to 1024 Bytes. By Questor
    // [Ref(s).: https://en.wikipedia.org/wiki/Kilobyte ]
    var oneKByte = 1024;

    // NOTE: Treats if the "decPlaces" is "undefined". If it is "undefined" the value
    // "2" will be adopted. By Questor
    if (decPlaces === undefined || decPlaces === "") {
        decPlaces = 2;
    }

    var byteMtrcs = ["Bytes", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"];
    // Byte Metrics

    // NOTE: Defines the factor for the number of bytes and the metric. By Questor
    var mtrcNumbFactor = Math.floor(Math.log(numBytes) / Math.log(oneKByte));
    // Metrics Number Factor

    return parseFloat((numBytes / Math.pow(oneKByte, mtrcNumbFactor)).
            toFixed(decPlaces)) + " " + byteMtrcs[mtrcNumbFactor];
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-12-22T02:21:49.030

我使算法快了 7 倍（像忍者一样工作）：

```
function rafaelFormatBytes(number){
  if(number == null || number === undefined || number <= 0) {
    return '0 Bytes';
  }
  var scaleCounter = 0;
  var scaleInitials = [' Bytes',' KB',' MB',' GB',' TB',' PB',' EB',' ZB',' YB'];
  while (number >= 1024 && scaleCounter < scaleInitials.length - 1){
    number /= 1024;
    scaleCounter++;
  }
  if(scaleCounter >= scaleInitials.length) scaleCounter = scaleInitials.length - 1;
  var compactNumber = number.toFixed(2)
                              .replace(/\.?0+$/,'')
                              .replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  compactNumber += scaleInitials[scaleCounter];
  return compactNumber.trim();
}
var testNum = 0;

var startTime, endTime;

function start() {
  startTime = new Date();
};

function end() {
  endTime = new Date();
  var timeDiff = endTime - startTime; //in ms
  // strip the ms
  timeDiff /= 1000;

  // get seconds 
  var seconds = Math.round(timeDiff, 5);
  console.log(timeDiff + " seconds");
}

function formatBytes(a,b=2,k=1024){with(Math){let d=floor(log(a)/log(k));return 0==a?"0 Bytes":parseFloat((a/pow(k,d)).toFixed(max(0,b)))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][d]}}

console.log(formatBytes(1000000000000000000000000000));
console.log(rafaelFormatBytes(1000000000000000000000000000));

start();
for(i=0; i<100000; i++){
    formatBytes(1000000000000000);
}
end();
start();
for(i=0; i<100000; i++){
    rafaelFormatBytes(1000000000000000);
}
end();
```

...和输出：

```
827.18 YB
827.18 YB
0.293 seconds
0.039 seconds 
```

耶稣基督！！！！

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-01-06T09:23:43.073

我遇到了从服务器返回的具有不同大小单位的文件的元数据问题。我使用了@Alicejim 响应并尝试更通用。在这里分享代码，也许它会对某人有所帮助。

```
enum SizeUnits {
   Bytes = 'Bytes',
   KB = 'KB',
   MB = 'MB',
   GB = 'GB',
   TB = 'TB',
   PB = 'PB',
   EB = 'EB',
   ZB = 'ZB',
   YB = 'YB'
}
function convertSizeUnites(size: number, sourceSizeUnits: SizeUnits, targetSizeUnits: SizeUnits) {
    const i = Object.keys(SizeUnits).indexOf(sourceSizeUnits);
    const sizeInBytes = size * Math.pow(1024, i);
    const j = Object.keys(SizeUnits).indexOf(targetSizeUnits);
    return sizeInBytes / Math.pow(1024, j);
}
function formatSize(size: number, measureUnit: SizeUnits, decimals = 2) {
    if (size === 0) return '0 Bytes';
    const sizeInBytes = convertSizeUnites(size, measureUnit, SizeUnits.Bytes);
    const dm = decimals < 0 ? 0 : decimals;
    const i = Math.floor(Math.log(sizeInBytes) / Math.log(1024));
    return parseFloat((sizeInBytes / Math.pow(1024, i)).toFixed(dm)) + ' ' + 
    Object.keys(SizeUnits)[i];
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2022-02-21T15:37:41.137

只是稍微修改了@zayarTun 答案的代码，以包含一个额外的参数，表示结果中的小数位数（如果小数为零，则不需要显示像 15.00 KB 这样的结果，而是 15 KB 就足够了，这就是我包装的原因中的结果值`parseFloat()`）

```
 bytesForHuman(bytes, decimals = 2) {
    let units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB']

    let i = 0

    for (i; bytes > 1024; i++) {
        bytes /= 1024;
    }

    return parseFloat(bytes.toFixed(decimals)) + ' ' + units[i]
  } 
```

* * *

## 回答 #26

> 赞同：-7
> 
> 时间：2015-10-16T09:24:56.970

试试这个简单的解决方法。

```
var files = $("#file").get(0).files;               
                var size = files[0].size;
                if (size >= 5000000) {
alert("File size is greater than or equal to 5 MB");
} 
```

# javascript - 如何获取显示一页的内容但单击按钮

> ID：15900489
> 
> 赞同：1
> 
> 时间：2013-04-09T11:20:59.503
> 
> 标签：javascript, jquery, html, css, ajax

我有一个页面有一些内容加上一个编辑按钮所以当你点击编辑按钮时它会显示第二页。我希望两者都只在一页中。它看起来像姓氏（文本区域转换为文本字段）请告诉我怎么做屏幕截图是

源代码如下

```
<!DOCTYPE html> <!-- The new doctype -->
<html>
    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <title>home</title>

        <link rel="stylesheet" type="text/css" href="styles.css" />

    </head>

    <body>

        <section id="page" > <!-- Defining the #page section with the section tag -->

            <header > <!-- Defining the header section of the page with the appropriate tag -->

                <hgroup>
                    <h1>Your Logo</h1>
                    <h3>and a fancy slogan</h3>
                </hgroup>

                <nav class="clear"> <!-- The nav link semantically marks your main site navigation -->
                    <ul>
                        <li><a href="#article1">My Profile</a></li>
                        <li><a href="#article2">Change password</a></li>
                        <li><a href="#article3">Navigation Menu</a></li>
                    </ul>
                </nav>

            </header>

            <section id="articles"> <!-- A new section with the articles -->

                <!-- Article 1 start -->

                <div class="line"></div>  <!-- Dividing line -->

                <article id="article1"> <!-- The new article tag. The id is supplied so it can be scrolled into view. -->
                    <h2>Dr. Sukant Kumar nayak</h2>

                    <div class="line"></div>

                    <div class="articleBody clear">

                     <div >

        <div style="float: left; padding-left: 50px; padding-top: 5px">
            <table cellspacing="10" cellpadding="10" >
            <tr>
                <td width="200" height="30">
                    <b>Last Name</b>
                </td>
                <td>
                     <label for="LastName">LastName</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>First Name</b>
                </td>
                <td>
                    <label for="FirstName">First Name</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Date of Birth</b>
                </td>
                <td>
                    <label for="DateofBirth">Date of Birth</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Qualification</b>
                </td>
                <td>
                    <label for="LastName">Qualification</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Registration. No.</b>
                </td>
                <td>
                    <label for="RegistrationNo">Registration No</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Country of Registration</b>
                </td>
                <td>
                    <label for="CountryofRegistration">Country of Registration</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Practice Name</b>
                </td>
                <td>
                    <label for="PracticeName">Practice Name</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Phone</b>
                </td>

                <td>
                    <label for="Phone">Phone</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Email</b>
                </td>
                <td>
                    <label for="Email">Email</label>
                </td>
            </tr>
<tr>
                <td  height="30">
                    <b></b>
                </td>
                <td align="right" >
                    <label for="Email"><input type="submit" class="button button-submit" value="Edit" /></label>
                </td>
            </tr>
        </table>

        </div>
        <div style="float: right;padding-right: 50px;padding-top: 50px">

            <table>

                <tr>
                <td width="160" height="30">
                    <b>Address</b>
                </td>
                <td>
                    <label for="Address">Address</label>
                </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Street</b>
                    </td>
                    <td>
                        <label for="Street">Street</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>City</b>
                    </td>
                    <td>
                        <label for="City">City</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>State</b>
                    </td>
                    <td>
                        <label for="State">State</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Country</b>
                    </td>
                    <td>
                        <label for="Country">Country</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Pin Code</b>
                    </td>
                    <td>
                        <label for="PinCode">Pin Code</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>How do you know?</b>
                    </td>
                    <td>
                        <label for="HowDoYouKnow">How Do You Know</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Comment</b>
                    </td>

                    <td>
                        <label for="Comments">Comments</label>
                    </td>
                </tr>
            </table><div  align="center" style="padding-top: 30px">

        </div>
        </div>
        </div>
                    </div>
                </article>

                <!-- Article 1 end -->

                <!-- Article 2 start -->

                <div class="line"></div>
                <div class="space"></div>                <div class="space"></div>                <div class="space"></div>                <div class="space"></div>
<div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div>
<div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div><div class="space"></div>
                <article id="article2">
                    <h2>Change Password</h2>

                    <div class="line"></div>

                    <div class="articleBody clear">
                        <figure>
                            <img src="medical.jpg" width="620" height="440" /></a>
                        </figure>

                        <p><div align="center" style="padding-top: 30px">
            <table  cellspacing="10" cellpadding="10">
                <tr>
                    <td width="200" height="30"><h5>Old Password</h5></td>
                    <td  height="30"><input name="old" type="password"></td>
                </tr>
                <tr>
                    <td  height="30"><h5>New Password</h5></td>
                    <td  height="30"><input name="newPsw" type="password"></td>
                </tr>
                <tr>
                    <td height="30"><h5>Confirm Password</h5></td>
                    <td  height="30"><input name="confirm" type="password"></td>
                </tr>
            </table>
        </div>
        <div class="footer-bar"  align="center" style="padding-top: 30px">
            <table align="center" >
                <tr >
                    <td width="100" align="center"><input type="submit" class="button button-submit" value="Submit"  /></td>
                    <td width="100" align="center"><input type="reset" class="button button-submit" value="Reset" /></td>
                </tr>
            </table>
        </div></p>
                        <p></p>
                    </div>
                </article>

                <!-- Article 2 end -->

                <!-- Article 3 start -->

                <div class="line"></div>

                <!-- Article 3 end -->

            </section>

        <footer> <!-- Marking the footer section -->

           <div class="line"></div>

           <p>Copyright 2013 - mysite.com</p> 

           <a href="#" class="up">Go UP</a>
           <a href="www.df.com" class="by">dh</a>

        </footer>

        </section> <!-- Closing the #page section -->

        <!-- JavaScript Includes -->

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script src="jquery.scrollTo-1.4.2/jquery.scrollTo-min.js"></script>
        <script src="script.js"></script>
    </body>
</html> 
```

当您点击编辑按钮时，这应该显示

![此处输入图片描述][2]源码如下

```
<!DOCTYPE html> <!-- The new doctype -->
<html>
    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <title>home</title>

        <link rel="stylesheet" type="text/css" href="styles.css" />

    </head>

    <body>

        <section id="page" > <!-- Defining the #page section with the section tag -->

            <header > <!-- Defining the header section of the page with the appropriate tag -->

                <hgroup>
                    <h1>Your Logo</h1>
                    <h3>and a fancy slogan</h3>
                </hgroup>

                <nav class="clear"> <!-- The nav link semantically marks your main site navigation -->
                    <ul>
                        <li><a href="#article1">My Profile</a></li>
                        <li><a href="#article2">Change password</a></li>
                        <li><a href="#article3">Navigation Menu</a></li>
                    </ul>
                </nav>

            </header>

            <section id="articles"> <!-- A new section with the articles -->

                <!-- Article 1 start -->

                <div class="line"></div>  <!-- Dividing line -->

                <article id="article1"> <!-- The new article tag. The id is supplied so it can be scrolled into view. -->
                    <h2>Dr. Sukant Kumar nayak</h2>

                    <div class="line"></div>

                    <div class="articleBody clear">

                     <div >

        <div style="float: left; padding-left: 50px; padding-top: 50px">
            <table cellspacing="10" cellpadding="10" >
            <tr>
                <td width="200" height="30">
                    <b>Last Name</b>
                    <p style="float:right; color: red ">*   </p>
                </td>
                <td>
                    <input name="LastName" type="text" value="<%=lastName %>"/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>First Name</b>
                    <p style="float:right; color: red ">*   </p>
                </td>
                <td>
                    <input name="FirstName" type="text" value="<%=firstName %>" />
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Date of Birth</b>
                </td>
                <td>
                    <input name="DateofBirth" type="text" value="<%=DOB %>" />
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Qualification</b>
                </td>
                <td>
                    <input name="Qualification" type="text" value="<%=Qualification %>" />
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Registration. No.</b>
                    <p style="float:right; color: red ">*   </p>
                </td>
                <td>
                    <input name="RegistrationNo" type="text" value="<%=RegistrationNo %>"/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Country of Registration</b>
                </td>
                <td>
                    <input name="CountryofRegistration" type="text" value="<%=CountryOfRegistration %>" />
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Practice Name</b>
                </td>
                <td>
                    <input name="PracticeName" type="text" value="<%=PracticeName %>" />
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Phone</b>
                    <p style="float:right; color: red ">*   </p>
                </td>

                <td>
                    <input name="Phone" type="text" value="<%=Phone %>"/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Email</b>
                    <p style="float:right; color: red ">*   </p>
                </td>
                <td>
                    <input name="Email" type="text" value="<%=Email %>"/>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Image</b>
                </td>

                <td>
                    <input name="Image" type="file" />
                </td>
            </tr>
        </table>

        </div>
        <div style="float: right;padding-right: 50px;padding-top: 50px">
            <table>
                <tr>
                <td width="160" height="30">
                    <b>Address</b>
                </td>
                <td>
                    <input name="Address" type="text" value="<%=Address %>"/>
                </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Street</b>
                    </td>
                    <td>
                        <input name="Street" type="text" value="<%=Street %>" />
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>City</b>
                        <p style="float:right; color: red ">*   </p>
                    </td>
                    <td>
                        <input name="City" type="text" value="<%=City %>" />
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>State</b>
                        <p style="float:right; color: red ">*   </p>
                    </td>
                    <td>
                        <input name="State" type="text" value="<%=State %>" />
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Country</b>
                        <p style="float:right; color: red ">*   </p>
                    </td>
                    <td>
                        <input name="Country" type="text" value="<%=country %>" />
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Pin Code</b>
                    </td>
                    <td>
                        <input name="PinCode" type="text" value="<%=PinCode %>" />
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>How do you know?</b>
                    </td>
                    <td>
                        <input name="HowDoYouKnow" type="text" />
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Comment</b>
                    </td>

                    <td>
                        <textarea  name="Comments" cols="15" rows="5" readonly></textarea>
                    </td>
                </tr>
            </table>
        </div>
        <br><br>
        <div class="footer-bar"  align="center" style="padding-top: 30px">
            <table align="center" >
                <tr >
                    <td width="100" align="center"><input type="submit" class="button button-submit" value="Submit"  /></td>
                    <td width="100" align="center"><input type="reset" class="button button-submit" value="Reset" /></td>
                </tr>
            </table>
        </div></p>
                        <p></p>
                    </div>
                </article>

                <!-- Article 2 end -->

                <!-- Article 3 start -->

                <div class="line"></div>

                <!-- Article 3 end -->

            </section>

        <footer> <!-- Marking the footer section -->

           <div class="line"></div>

           <p>Copyright 2013 - mysite.com</p> 

           <a href="#" class="up">Go UP</a>
           <a href="www.df.com" class="by">dh</a>

        </footer>

        </section> <!-- Closing the #page section -->

        <!-- JavaScript Includes -->

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script src="jquery.scrollTo-1.4.2/jquery.scrollTo-min.js"></script>
        <script src="script.js"></script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:31:05.120

正如Praveen所说，您不需要两个不同的页面，而是同一页面中的两个div，然后使用一些javascript在两者的显示/可见性之间切换。您可以对每个元素使用两个不同的类来执行此操作，这些类具有不同的显示 ( `display:none`and `display:block`) 或可见性 ( `visibilty: hidden`and `visibility:visible`) 属性。

JQuery`toggle()`方法是一个简单的选择：

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

但请注意它会切换`display`，因此它会影响您的布局（`display:none` 影响您的布局，而`visibility:hidden does not`），这可能是您不想要的。避免这种情况的一种方法（但我不是 100% 确定这是最好的方法）是将每个 div ( `position:absolute`) 插入另一个 div ( `position:relative`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:26:24.413

只需制作两个 div .. 一个 div 具有第一个图像内容，第二个 div 具有第二个图像内容。一旦你点击编辑按钮，只需隐藏第一个 div 并显示第二个 div .....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:22:51.497

应用您要显示的 CSS 类。通过单击按钮仅显示这些字段。

# android - FFMPEG：使用 android-ndk 更改视频的采样率/比特率

> ID：15900491
> 
> 赞同：2
> 
> 时间：2013-04-09T11:21:07.080
> 
> 标签：android, android-ndk, ffmpeg, libavcodec, libavformat

您好我正在尝试使用 ffmpeg 更改视频文件的音频流的采样率。但我无法更改原始文件的音频。到目前为止，我能够分别读取音频和视频流并显示其采样率。不知道如何永久应用此效果。以下是我的 Java 代码。

```
 public class MainActivity extends Activity {
public static native float logFileInfo(String inputfilename);
static
{
    System.loadLibrary("mylib");
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView tv= new TextView(this);
    String path= Environment.getExternalStorageDirectory().getPath();
    path+="/test2_modified.mp4";
    float x=logFileInfo(path);
    String y=Float.toString(x);
    tv.setText(y);
    setContentView(tv);   
} 
```

和我的原生文件

```
JNIEXPORT jfloat JNICALL Java_ru_dzakhov_ffmpeg_test_MainActivity_logFileInfo
        (JNIEnv * env,
     jobject this,
     jstring filename
    )
{

AVFormatContext *pFormatCtx;
int             i, videoStream, audioStream;
AVCodecContext  *pCodecCtx; 
AVCodec         *pCodec;
AVFrame         *pFrame; 
AVPacket        packet;
int             frameFinished;
float           aspect_ratio;
AVCodecContext  *aCodecCtx;
AVCodec         *aCodec;

av_register_all();
char *str = (*env)->GetStringUTFChars(env, filename, 0);
 LOGI(str);
// Open video file
if(av_open_input_file(&pFormatCtx, str, NULL, 0, NULL)!=0)
    ;

// Retrieve stream information
if(av_find_stream_info(pFormatCtx)<0)
    ;
 LOGI("Separating");
// Find the first video stream  
videoStream=-1;
audioStream=-1;
for(i=0; i<pFormatCtx->nb_streams; i++) {
    if(pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_VIDEO &&
        videoStream < 0) {
                    videoStream=i;
        }
    if(pFormatCtx->streams[i]->codec->codec_type==AVMEDIA_TYPE_AUDIO &&
        audioStream < 0) {
                    audioStream=i;
        }
}
if(videoStream==-1)
     LOGI("Video stream is -1");    
;
if(audioStream==-1)
     LOGI("Audio stream is -1");
        ;   

//pFormatCtx->streams[audioStream]->codec->sample_rate=16000;
aCodecCtx=pFormatCtx->streams[audioStream]->codec;
//aCodecCtx->sample_rate=16000;
jfloat sr=aCodecCtx->sample_rate;
return sr;} 
```

# android - MainProject 总是需要更新类库资源字符串

> ID：15900496
> 
> 赞同：2
> 
> 时间：2013-04-09T11:21:16.123
> 
> 标签：android, xamarin.android, android-resources, xamarin

当我在安装了 Xamarin 的 Visual Studio 2012 中创建项目时，我选择 Android 应用程序作为项目的模板。

后来，我在解决方案中添加了一个 Android 类库。类库有一个字符串资源。主项目有对类库的引用。

每次我构建解决方案时，主项目的资源设计器的`UpdateIdValues()`方法总是自动填充其内容（我一遍又一遍地删除它），它期望主项目具有相同的资源字符串，它应该更新类库资源字符串！

![在此处输入图像描述](https://i.stack.imgur.com/WLhF7.png)

我不希望我的主要项目的资源设计器以这种方式更新。我的主项目永远不会有与类库相同的资源字符串，它也不应该更新任何类库的资源字符串。

我不知道是否有我错过的设置属性，但有没有办法（修复）正确处理这种情况？（我是 android 和 xamarin 的新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:34:46.467

这样做是为了将库与应用程序项目同步。主应用程序需要了解库项目中的资源，因此 Xamarin 工具为主应用程序项目中库中的所有内容创建 ID，并运行`UpdateIdValues()`更新库项目中的 Id。

`UpdateIdValues()`然而，在 Android 的 Mono 中，未调用的地方有点损坏，因此 Id 不匹配。

使用资源库时，您需要确保所有内容都是小写的。这对我来说在 L [egacyBar](https://github.com/Cheesebaron/LegacyBar)中效果很好。检查该项目如何完成。

# assembly - 关于装配标志的好手册

> ID：15900498
> 
> 赞同：0
> 
> 时间：2013-04-09T11:21:26.467
> 
> 标签：assembly, flags, manual, instructions

什么是关于所有大会标志的好的手册/文章以及哪些说明会影响每个标志？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:24:41.877

来自英特尔的官方版本，当然！

[英特尔® 64 位和 IA-32 架构软件开发人员手册组合卷：1、2A、2B、2C、3A、3B 和 3C](http://download.intel.com/products/processor/manual/325462.pdf)。

如需更多信息，请参阅[英特尔® 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)。

# c# - 检查 GUI 模型是否已更改；比较两个 GUI 模型

> ID：15900501
> 
> 赞同：1
> 
> 时间：2013-04-09T11:21:29.043
> 
> 标签：c#

我有以下情况。

我有一个复杂的模型（包含许多对象、非原始数据类型）。通过 GUI，我允许用户编辑这个模型。

单击 EDIT 按钮时，我会创建用户修改的当前模型的克隆，直到他们按下“保存”或“放弃”。

我需要知道克隆模型是否已更改，以及其数据与原始模型相比是否已更改。这将是检查用户是否更改了模型的任何属性的最佳方法。

我在这里考虑两种选择：

1.  覆盖 Equals 和 GetHashCode 并为模型的每个对象类部分实现 IEquatable 接口（在这种情况下需要做很多工作）。

2.  使用脏标志。

3.  我看到了 INotifyPropertyChanged 接口的一些实现。

我不认为选项 2 和 3 是有效选项，因为用户可能会修改一个属性，然后将其设置回原始值。（因此模型并没有真正改变）。

还有其他可能性吗？

谢谢，

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:06:10.310

这是一个选项，假设您的模型是可序列化的（在[Convert any object to a byte[]](https://stackoverflow.com/questions/4865104/convert-any-object-to-a-byte)中找到的方法下方）

```
byte[] ObjectToByteArray(Object obj)
{
    if (obj == null)
        return new byte[]{};
    BinaryFormatter bf = new BinaryFormatter();
    MemoryStream ms = new MemoryStream();
    bf.Serialize(ms, obj);
    return ms.ToArray();
} 
```

然后，如果您的模型非常庞大并且可能会损害性能，并且您可以使用不安全的代码，请使用我在此处找到的比较器[Comparing two byte arrays in .NET](https://stackoverflow.com/questions/43289/comparing-two-byte-arrays-in-net)

```
static unsafe bool UnsafeCompare(byte[] a1, byte[] a2)
    {
        if (a1 == null || a2 == null || a1.Length != a2.Length)
            return false;
        fixed (byte* p1 = a1, p2 = a2)
        {
            byte* x1 = p1, x2 = p2;
            int l = a1.Length;
            for (int i = 0; i < l / 8; i++, x1 += 8, x2 += 8)
                if (*((long*)x1) != *((long*)x2)) return false;
            if ((l & 4) != 0) { if (*((int*)x1) != *((int*)x2)) return false; x1 += 4; x2 += 4; }
            if ((l & 2) != 0) { if (*((short*)x1) != *((short*)x2)) return false; x1 += 2; x2 += 2; }
            if ((l & 1) != 0) if (*((byte*)x1) != *((byte*)x2)) return false;
            return true;
        }
    } 
```

否则，您可以使用更简单但更慢的（在同一个问题中找到）

```
static bool ByteArrayCompare(byte[] a1, byte[] a2) 
{
    IStructuralEquatable eqa1 = a1;
    return eqa1.Equals(a2, StructuralComparisons.StructuralEqualityComparer);
} 
```

这是一个示例中使用的模型：

```
 [Serializable]
    class House
    {
        public Size Size{get;set;}
    }

    [Serializable]
    class Size
    {
        public double Width { get; set; }
        public double Length { get; set; }
        public double Height { get; set; }
    } 
```

然后比较你的对象：

```
House house = new House()
{
    Size = new Size()
    {
        Width = 10
    }
};
House house2 = new House()
{
     Size = new Size()
     {
        Width = 20
     }
};
House equal = new House()
{
    Size = new Size()
    {
        Width = 10
    }
};

Debug.Assert(UnsafeCompare(ObjectToByteArray(house), ObjectToByteArray(equal)));
Debug.Assert(!UnsafeCompare(ObjectToByteArray(house), ObjectToByteArray(house2)));

Debug.Assert(ByteArrayCompare(ObjectToByteArray(house), ObjectToByteArray(equal)));
Debug.Assert(!ByteArrayCompare(ObjectToByteArray(house), ObjectToByteArray(house2))); 
```

# ajax - JQgrid 不适用于本地数据

> ID：15900502
> 
> 赞同：0
> 
> 时间：2013-04-09T11:21:39.263
> 
> 标签：ajax, jqgrid, cgi

我将数据发布到 cgi 脚本并以 json 格式获取响应。存储到变量中并尝试将其加载到 jqgrid 中。但是 Jqgrid 甚至没有加载本地数据，甚至它的显示表。这是jQuery脚本：

```
$(document).ready(function(){
$("#blastform").submit(function(){
$('#blast').hide();
$('#blastresults').show();
    $("#datatable").show();
     var thistarget = this.target;
     jQuery.ajax({
         data: $(this).serialize(),
         url: this.action,
         type: this.method,
     dataType: 'html',
         error: function() {
             $(thistarget).html("<span class='error'>Failed to submit form!</span>");
         },
         success: function(res) {
            // $('#blastresults').html(res);

         }
     })
     return false;
    var mydata=[res];
$("#datatable").jqGrid({
    datatype:'local',
    data: mydata,
    jsonReader: {
        repeatitems : false,
    },
    colNames:['QueryID','SubjectID', 'Identity', 'Align-len', 'Mismatches','Gaps','QStart','QEnd','Suject-start','Subject_end','E.Value','Score'],
    colModel:[ {name:'query',index:'query', width:55},
        {name:'subject',index:'subject', width:90},
        {name:'Identity',index:'Identity', width:100},
        {name:'AlignLen',index:'AlignLen', width:80, align:"right"},
        {name:'Mismatches',index:'Mismatches', width:80, align:"right"},
        {name:'Gaps',index:'Gaps', width:80,align:"right"},
        {name:'Qstart',index:'Qstart', width:80,align:"right"},
        {name:'Qend',index:'Qend', width:80,align:"right"},
        {name:'Sstart',index:'Sstart', width:150, sortable:false},
        {name:'Send',index:'Send', width:150, sortable:false},
        {name:'Evalue',index:'Evalue', width:10, sortable:false},
        {name:'Score',index:'Score', width:10, sortable:false}, ],
    rowNum:5,
    rowList:[2,3,5,10],
    pager: $('#pager2'),
    sortname: 'QueryID',
    //imgpath: '/var/www/test/images',
    viewrecords: true,
    sortorder: 'desc',
    loadonce: true,
    height: '500px',
    width:'1000px',
    altRows: true,
    pgbuttons: true,
    caption: 'Blast Results'
    });
    $("#datatable").jqGrid('navGrid','#pager2', {position: 'right'});
    jQuery("#datatable").jqGrid('navGrid','#blastresults',{edit:false,add:false,del:false});

     }
); 
```

});

Ajax 调用的响应是：

```
[ {"Mismatches":"6","subject":"Ca7","query":"AB-Contig743","Send":"17305359","Gaps":"1","AlignLen":"1119","Score":"2113","Identity":"99.37","Evalue":"0.0","Sstart":"17304241","Qstart":"33","Qend":"1150"}, {"Mismatches":"1","subject":"Ca7","query":"AB-Contig743","Send":"41349183","Gaps":"0","AlignLen":"26","Score":"44.1","Identity":"96.15","Evalue":"0.032","Sstart":"41349208","Qstart":"614","Qend":"639"}, {"Mismatches":"0","subject":"Ca7","query":"AB-Contig743","Send":"22007817","Gaps":"0","AlignLen":"20","Score":"40.1","Identity":"100.00","Evalue":"0.51","Sstart":"22007836","Qstart":"672","Qend":"691"}, {"Mismatches":"2","subject":"C11062332","query":"AB-Contig743","Send":"101","Gaps":"0","AlignLen":"29","Score":"42.1","Identity":"93.10","Evalue":"0.13","Sstart":"129","Qstart":"714","Qend":"742"}, {"Mismatches":"2","subject":"Ca5","query":"AB-Contig743","Send":"10391193","Gaps":"0","AlignLen":"29","Score":"42.1","Identity":"93.10","Evalue":"0.13","Sstart":"10391165","Qstart":"714","Qend":"742"}, {"Mismatches":"0","subject":"scaffold438","query":"AB-Contig743","Send":"55788","Gaps":"0","AlignLen":"20","Score":"40.1","Identity":"100.00","Evalue":"0.51","Sstart":"55769","Qstart":"1175","Qend":"1194"}, {"Mismatches":"0","subject":"scaffold1613","query":"AB-Contig743","Send":"56169","Gaps":"0","AlignLen":"20","Score":"40.1","Identity":"100.00","Evalue":"0.51","Sstart":"56188","Qstart":"367","Qend":"386"}] 
```

请帮我找出错误。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:57:46.807

如果您使用的是本地数据，它应该是这样的：

```
 var mydata = [ {query:"qry",subject:"foo"........},{query:"qry",subject:"foo"........}  ];//colname,value pairs 
```

但目前你有

```
mydata={"page":1,"records":1,"rows":[null,{"id":1,"cell":["AB-Contig743","Ca7","99.37","1119","6","1","33","1150","17304241","17305359","0.0","2113"]}],"total":1} 
```

因此，要么您必须重新格式化 ajax 结果，要么直接使用 jqgrid 的 url 属性来调用方法（您在 ajax 请求中调用的方法），如下所示：

```
$("#blastform").submit(function(){
$('#blast').hide();
$('#blastresults').show();
    $("#datatable").show();
     var thistarget = this.target;
    $("#datatable").jqGrid({

         url:  $(this).action,

                    datatype: 'json',
                    mtype: 'post', //

                    postData: $(this).serialize(),
    colNames:['QueryID','SubjectID', 'Identity', 'Align-len', 'Mismatches','Gaps','QStart','QEnd','Suject-start','Subject_end','E.Value','Score'],
    colModel:[ {name:'query',index:'query', width:55},
        {name:'subject',index:'subject', width:90},
        {name:'Identity',index:'Identity', width:100},
        {name:'AlignLen',index:'AlignLen', width:80, align:"right"},
        {name:'Mismatches',index:'Mismatches', width:80, align:"right"},
        {name:'Gaps',index:'Gaps', width:80,align:"right"},
        {name:'Qstart',index:'Qstart', width:80,align:"right"},
        {name:'Qend',index:'Qend', width:80,align:"right"},
        {name:'Sstart',index:'Sstart', width:150, sortable:false},
        {name:'Send',index:'Send', width:150, sortable:false},
        {name:'Evalue',index:'Evalue', width:10, sortable:false},
        {name:'Score',index:'Score', width:10, sortable:false}, ],
    rowNum:5,
    rowList:[2,3,5,10],
    pager: $('#pager2'), 

...................... 
```

# sql - 数据库被锁定在 R

> ID：15900503
> 
> 赞同：3
> 
> 时间：2013-04-09T11:21:41.363
> 
> 标签：sql, r, sqlite

在 R 中，我正在使用以下函数，该函数在该函数中使用 3 或 4 个数据库操作。但是显示如下错误消息：

```
Error in sqliteExecStatement(conn, statement, ...) : 
  RS-DBI driver: (RS_SQLite_exec: could not execute1: database is locked) 
```

我需要在我的代码中进行哪些修改？我的代码如下：

```
library('RSQLite')
test <- function(portfolio,date,frame){
  lite <- dbDriver("SQLite", max.con = 25)
  db <- dbConnect(lite, dbname = "portfolioInfo1.db")
  sql <- paste("SELECT *  from ", portfolio," where portDate='", date, "' ", sep = "")
  res <- dbSendQuery(db, sql)
  data <- fetch(res)
  frame1 <- data.frame(portDate=date,frame)

 lite <- dbDriver("SQLite", max.con = 25)
 db <- dbConnect(lite, dbname = "portfolioInfo1.db")
  sql <- paste("delete from ", portfolio," where portDate='", date, "' ", sep = "")
 res <- dbSendQuery(db, sql)

  lite <- dbDriver("SQLite", max.con = 25)
  db <- dbConnect(lite, dbname = "portfolioInfo1.db")
  dbWriteTable(db,portfolio,frame1,append=TRUE,row.names=FALSE) 
}
tick <- c("AAPL","TH","YHOO")
quant <- c("121","1313","131313131")
frame <-data.frame(ticker=tick,quantities=quant)
#print(frame)
test("RUSEG","2006-02-28",frame) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T11:31:45.457

似乎您多次连接到同一个数据库而没有断开连接。如果建立连接以防止其他人编辑已被编辑的数据库，则数据库可能会进入锁定状态。

每次连接后断开连接，或者只连接一次，执行所有查询，然后最终断开连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-31T14:12:12.937

更准确地说，多个进程可以同时读取一个 SQLite 数据库文件，但一次只能写入一个进程：[SQLite 文档、文件锁定](https://sqlite.org/lockingv3.html#locking)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-01T13:10:44.713

在我的情况下，我使用 DB Browser 添加表。我没有保存更改，这就是为什么尝试在 RStudio (Shiny) 中连接不起作用的原因。

# symfony - Sonata Admin Bundle 仪表板从角色和 DDBB 权限过滤实体

> ID：15900504
> 
> 赞同：5
> 
> 时间：2013-04-09T11:21:41.937
> 
> 标签：symfony, filter, fosuserbundle, dashboard, sonata-admin

我将 SonataAdminBundle 与 FosUserBundle 一起使用。我的仪表板有一些问题。

在我的应用程序中，我有资源、公司和用户。一个用户属于一个公司，并且可以创建也属于他的公司的资源。所有这些过程都将在仪表板中完成，所有角色都可以访问。

我想做的是每个人都可以访问仪表板，但是当用户选择要在仪表板中列出的实体（资源）时，只会显示他公司的实体。例如，两家公司可以创建一个车辆（资源），但每个公司只能看到自己的车辆（资源）。

最后，我希望仪表板过滤连接用户的公司实体。有没有办法在奏鸣曲中创建一个查询，以根据用户的 Company_Id 和 BBDD 中映射的资源的 Company_Id 显示一些实体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T12:55:13.727

最简单的方法是编辑查询并检查编辑/显示操作中的访问权限。

像这样的东西：

*管理类*

```
/**
 * {@inheritdoc}
 */
public function createQuery($context = 'list')
{
    $user = $this->getConfigurationPool()->getContainer()->get('security.context')->getToken()->getUser();

    /** @var \Sonata\DoctrineORMAdminBundle\Datagrid\ProxyQuery @query */
    $query = $this->getModelManager()->createQuery($this->getClass(), 'o');
    if (!$this->isGranted('MASTER')) {
        $query
            ->where('entity.user = :user')
            ->setParameter('user', $user)
        ;
    }

    return $query;
} 
```

如果用户不是 MASTER，他只会看到他自己的实体。

您还可以实现`hasSubjectAccess`管理类的方法，例如：

```
/**
 * Check whether the user has access to the subject
 *
 * @return bool
 */
protected function hasSubjectAccess()
{
    $user = $this->getConfigurationPool()->getContainer()->get('security.context')->getToken()->getUser();
    if (!$this->isGranted('MASTER') && $this->getSubject()->getUser() !== $user) {
        return false;
    }

    return true;
} 
```

并在编辑和显示表单中执行这种检查：

```
/**
 * {@inheritdoc}
 */
protected function configureFormFields(FormMapper $formMapper)
{
    if (!$this->hasSubjectAccess()) {
        throw new AccessDeniedException();
    }

    // ...
} 
```

另一种方式是实现ACL。您可以在[官方文档中阅读更多相关信息](http://sonata-project.org/bundles/admin/master/doc/reference/security.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:16:29.290

最后，我得到它是这样的：

```
public function createQuery($context = 'list')
    $query = $this->getModelManager()->createQuery($this->getClass(), 'entity'); 

    if ( ($this->getClass() instanceof \Sademer\CoreBundle\Entity\Resource)
     || ( is_subclass_of($this->getClass(), \Sademer\CoreBundle\Entity\Resource') ) )
    {
          $query->select ('e');
          $query->from($this->getClass(), 'e');
          $query->from('CoreBundle\Entity\Resource', 'r');
          $query->where('e.id = r.id AND r.company = :company');
          $query->setParameter('company', 5);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T20:01:26.283

对我来说 createQuery() 函数不起作用。可能是由于 Sonata Admin 的版本。无论如何，对我有用的是 configureDatagridFilters() 函数。

它和 createQuery 做同样的工作，看起来像这样：

```
protected function configureDatagridFilters(DatagridMapper $datagridMapper)
{
    $qb = $datagridMapper
        ->getDatagrid()
        ->getQuery()
        ->getQueryBuilder();

    $qb->andWhere(
        // Your where clause here
    );
    $qb->setParameter(); // Set Parameter
} 
```

# javascript - 是否有充分的理由为 javascripts 设置短文件名？

> ID：15900508
> 
> 赞同：2
> 
> 时间：2013-04-09T11:21:58.940
> 
> 标签：javascript

例如。为什么是谷歌分析脚本 ga.js 而不是 google-analytics.js？

是约定、优化还是过度优化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:23:04.020

很多网站都使用谷歌分析。虽然通常在路径中保存几个字节显然是过度优化，但在这种情况下确实有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:23:04.703

更少的字符通过网络传输并被客户端解析。差别不大，但一切都有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:24:26.720

数以百万计的网站使用谷歌分析。他们可能希望节省每个字节的带宽。

或者这只是一个随机的选择。短网址也更容易记住。

# mysql - 在 Mysql 和 Windows XP 中使用批处理文件创建和恢复数据库

> ID：15900510
> 
> 赞同：0
> 
> 时间：2013-04-09T11:21:59.850
> 
> 标签：mysql, batch-file

我在 WindowsXP 中工作。我需要创建一个数据库并
使用批处理脚本使用 data.sql 文件恢复该数据库。这在用户配置项目时是必需的。我尝试了以下方法，但它对我不起作用。

```
// createdb.bat 
// Password is empty

@echo off 
mysql -u root -p < mysql.sql

//mysql.sql
CREATE DATABASE newdb ; 
```

我的桌面中有两个文件。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:50:42.120

谢谢大家回答我的问题。正如 Fuzzy Button 所说，这是一个路径问题。我必须设置 xps.sql 文件的路径。我刚刚使用此代码创建了 createdb.bat，它运行良好。

```
@echo off 
set root=C:\Documents and Settings\Administrator
cd %root%
mysql -u root  -e "CREATE DATABASE IF NOT EXISTS xps";
mysql -u root  xps < xps.sql 
```

# c++ - 使用 wxIS_KIND_OF 宏获取类类型时出错

> ID：15900517
> 
> 赞同：-1
> 
> 时间：2013-04-09T11:22:26.833
> 
> 标签：c++, wxwidgets

我正在尝试使用**wxIS_KIND_OF**宏获取*wxSizer*类类型。几秒钟后，我的程序完成，但没有显示我的应用程序的主窗口。

 **这是代码：

```
wxXmlResource::Get()->LoadFrame((wxFrame*)this,  (wxWindow*)NULL , wxT("MyFrame1"));

wxPanel* container = (wxPanel*)FindWindowByName("m_panel1");
if (!container){
    cout << "Error loading container!" << endl << flush;
}
else{
    for (unsigned int i=0; i<3; i++){
        auxPanelArray[i] = new wxPanel( container, wxID_ANY, wxDefaultPosition, wxDefaultSize, wxTAB_TRAVERSAL );
        wxXmlResource::Get()->LoadPanel( auxPanelArray[i] , wxT("MyPanel6"));

        wxSizer* mySizer = auxPanelArray[i]->GetSizer();
        if (wxIS_KIND_OF(mySizer, wxStaticBoxSizer)){
            cout << "Your sizer is a wxStaticBoxSizer" << endl << flush;
            ((wxStaticBoxSizer*)mySizer)->GetStaticBox()->SetLabel("My new label");
        }

        container->GetSizer()->Add(auxPanelArray[i]);
    }
} 
```

在我的 XRC 中，sizer 类型是 wxStaticBoxSizer，所以 wxIS_KIND_OF 应该检测到它并进入 if 块。

为什么它不起作用？

***更新*** 这是 XRC 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<resource xmlns="http://www.wxwindows.org/wxxrc" version="2.3.0.1">
    <object class="wxPanel" name="MyPanel6">
        <style>wxTAB_TRAVERSAL</style>
        <object class="wxStaticBoxSizer">
            <minsize>100,100</minsize>
            <orient>wxVERTICAL</orient>
            <label>label</label>
            <object class="sizeritem">
                <option>1</option>
                <flag>wxEXPAND|wxALL</flag>
                <border>5</border>
                <object class="wxBoxSizer">
                    <orient>wxHORIZONTAL</orient>
                    <object class="sizeritem">
                        <option>0</option>
                        <flag>wxALL</flag>
                        <border>5</border>
                        <object class="wxStaticText" name="m_staticText12">
                            <label>MyLabel</label>
                            <wrap>-1</wrap>
                        </object>
                    </object>
                    <object class="sizeritem">
                        <option>0</option>
                        <flag>wxALL</flag>
                        <border>5</border>
                        <object class="wxTextCtrl" name="m_textCtrl4">
                            <value></value>
                        </object>
                    </object>
                </object>
            </object>
            <object class="sizeritem">
                <option>0</option>
                <flag>wxALL</flag>
                <border>5</border>
                <object class="wxButton" name="m_button8">
                    <label>MyButton</label>
                    <default>0</default>
                </object>
            </object>
        </object>
    </object>
</resource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:09:09.190

`wxIS_KIND_OF()`当然，必须为 工作`wxStaticBoxSizer`，所以要么 sizer 不是这种类型，要么你的代码实际上正在执行但没有任何效果，因为你的标准输出没有显示在任何地方——这是默认情况下在 GUI 应用程序中的情况在 Windows 下。

我还建议使用`wxDynamicCast()`而不是`wxIS_KIND_OF`：

```
wxStaticBoxSizer* boxSizer = wxDynamicCast(mySizer, wxStaticBoxSizer);
if ( boxSizer ) {
   ... just use it now, no need for more casts ...
} 
```**

# android - 自定义ActionBar，只有部分item自定义view

> ID：15900520
> 
> 赞同：2
> 
> 时间：2013-04-09T11:22:42.287
> 
> 标签：android, android-actionbar, actionbarsherlock, android-relativelayout

我已经阅读了 ActionBar 并尝试了一些东西。我已经到了用这样的自定义视图替换 ActionBar 的地步：

```
getSupportActionBar().setCustomView(R.layout.actionbar_timer); 
```

但是有些图标太大了，这不是我想要的样子，右边有一个巨大的填充（选项菜单图标）。

所以这就是我的 actionbar_timer 布局的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/de.myapp"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_gravity="fill_horizontal"
    android:background="#000"
    android:focusable="true">

    <ImageView
        android:id="@+id/actionbar_back"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:paddingTop="8dp"
        android:paddingBottom="8dp"
        android:paddingLeft="10dp"
        android:src="@drawable/icon_actionbar_back" />

    <ImageView
        android:id="@+id/actionbar_moon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        android:src="@drawable/icon_actionbar_moon" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:paddingTop="15dp"
        android:paddingBottom="15dp"
        android:layout_marginRight="5dp"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/actionbar_timer"
        android:src="@drawable/icon_actionbar_clock" />

    <ImageView
        android:id="@+id/actionbar_icon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/actionbar_back"
        android:paddingBottom="10dp"
        android:paddingTop="10dp"
        android:src="@drawable/icon_actionbar_something" />

    <de.myapp.views.TextViewPlus
        android:id="@+id/actionbar_timer"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/actionbar_moon"
        android:gravity="center|center"
        android:text="00:00:00"
        android:textColor="#FFFFFF"
        android:textSize="20sp"
        app:customFont="roboto_regular.ttf" />

    <View
        android:background="#33b5e5"
        android:layout_height="1.5dp"
        android:layout_alignParentBottom="true"
        android:layout_width="fill_parent"

       />

</RelativeLayout> 
```

因此，我在布局的最右侧元素设置了 alignParentRight="true"，但视图和选项菜单图标之间仍然存在很大差距。

有没有办法缩小这个差距？此外，我必须在布局末尾使用 View-stub “重新创建” ActionBar 底部的蓝线。我怎样才能避免这种情况？顺便说一句，我正在使用 ActionBarSherlock。

# android - 在发布应用程序的新版本之前测试应用内计费

> ID：15900522
> 
> 赞同：0
> 
> 时间：2013-04-09T11:22:45.667
> 
> 标签：android, integration-testing, google-play, in-app-billing, android-permissions

我有一个[免费应用程序](https://play.google.com/store/apps/details?id=org.zighinetto.wifitav)，我想在其中添加高级产品。

我正在开发新代码，同时维护旧版本的错误修复。现在我想至少用我的个人手机测试 IAB 集成（不是最好的主意），但是在我添加权限之前，Google Play 不允许我添加应用内产品`BILLING`，实际上当前*发布*的版本没有吨。

问题很简单：如何在发布应用程序的新版本之前添加应用程序内产品？如果我必须在实现高级功能之前添加`BILLING`（以及`RECEIVE_BOOT_COMPLETED`）权限，我担心用户不会及时收到他们安装版本的错误修复，当然，一旦他们启用了自动更新。

你有什么想法可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:45:46.043

如果您想在版本发布之前添加应用内产品，您必须上传您的应用程序的具有 BILLING 权限的 APK。使用 Android Developer Console 中上传 APK 页面表单的“高级模式”。当心！只上传，不要发布！

完成此操作后，您将能够从 ADC 中您的应用程序的“应用内产品”页面添加产品。

# android - 以编程方式设置 ImageButton layout_gravity

> ID：15900523
> 
> 赞同：7
> 
> 时间：2013-04-09T11:22:46.727
> 
> 标签：android, android-layout, android-linearlayout, layout-gravity

# 我试图做什么

我尝试通过 Java 代码设置我`ImageButton`的 's ，我想要的方式如下图**橙色**框架内的方式所示：`layout_gravity``ImageButton`

 **![图片](https://i.stack.imgur.com/sXtEj.png)

**蓝色**框架是作为“基础”布局的垂直`LinearLayout`行为，这是我尝试添加子布局的布局。

**橙色**和**红色**都是水平的`LinearLayout`。

**橙色**布局是我想要放置的方式，`ImageButton`这个`TextView`是通过 XML 设置的

红色布局是我试图通过 Java 代码模仿橙色布局**的****结果。**

# 相关代码

这是设置**Orange**布局的 XML 代码，**这是我想通过 Java 代码实现的效果：**

```
 <!-- Begin the Orange Layout -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/info_left_padding"
            android:layout_marginRight="@dimen/info_right_padding" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:gravity="center_vertical"
                android:minHeight="@dimen/detail_min_line_item_height"
                android:text="TextView" />

            <FrameLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <ImageButton
                    android:id="@+id/imageButton1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="right|center_vertical"
                    android:adjustViewBounds="true"
                    android:maxHeight="@dimen/abs__action_bar_default_height"
                    android:scaleType="fitCenter"
                    android:src="@drawable/navigation_cancel" />
            </FrameLayout>
        </LinearLayout> 
```

这是设置**红色**布局的 Java 代码

```
 int textHeight = (int)getResources().getDimension(R.dimen.detail_min_line_item_height);
        int imgHeight = (int)getResources().getDimension(R.dimen.abs__action_bar_default_height);

        TextView mTextView = new TextView(this);
        ImageButton mDeleteButton = new ImageButton(this);

        // Set Delete Button Padding
//      mDeleteButton.setPadding(buttonPadding, buttonPadding, buttonPadding, buttonPadding);

        // Set Imagebutton Scale type as fitCentre
        mDeleteButton.setScaleType(ScaleType.FIT_CENTER);

        // Set AdjustViewBounds
        mDeleteButton.setAdjustViewBounds(true);

        // Set max height of the image
        mDeleteButton.setMaxHeight(imgHeight);

        // Set the text appearance to be "large"
        mTextView.setTextAppearance(this, android.R.style.TextAppearance_Large);
        mTextView.setText(text);

        // Set the minimum height of this textview
        mTextView.setMinHeight(textHeight);

        // Set the content of the textview to be centred
        mTextView.setGravity(Gravity.CENTER_VERTICAL);

        // Set the ImageButton's background image
        mDeleteButton.setImageResource(R.drawable.navigation_cancel);

        LinearLayout.LayoutParams hParams = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

        LinearLayout hLayout = new LinearLayout(this);
        // Set Margins
        hParams.leftMargin = (int) getResources().getDimension(R.dimen.info_left_padding);
        hParams.rightMargin = (int) getResources().getDimension(R.dimen.info_right_padding);
        hParams.bottomMargin = (int) getResources().getDimension(R.dimen.text_layout_margin);

        hLayout.setLayoutParams(hParams);
        // Set orientation to horizontal
        hLayout.setOrientation(LinearLayout.HORIZONTAL);

        // The settings below is actually setting up some of the button's parameters        
        LinearLayout.LayoutParams buttonParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        buttonParams.gravity = Gravity.RIGHT;
        mDeleteButton.setLayoutParams(buttonParams);

        hLayout.addView(mTextView);
        hLayout.addView(mDeleteButton);

        layout_blue.addView(hLayout); 
```

# 到目前为止我尝试过的

根据这样的一些 SO 帖子：[Java method for android:layout_gravity](https://stackoverflow.com/questions/2945315/java-method-for-androidlayout-gravity)我最初尝试先将 my`ImageButton`放入 a`FrameLayout`然后设置 this 的参数`FrameLayout`，如下所示：

```
FrameLayout buttonFrame = new FrameLayout(this);
FrameLayout.LayoutParams buttonParams = new FrameLayout.LayoutParams(android.widget.FrameLayout.LayoutParams.WRAP_CONTENT, 
                                                                            android.widget.FrameLayout.LayoutParams.WRAP_CONTENT, 
                                                                            Gravity.RIGHT | Gravity.CENTER_VERTICAL);
buttonFrame.setLayoutParams(buttonParams);
buttonFrame.addView(mDeleteButton); 
```

但我得到了与上面显示的图像相同的结果。后来我还尝试将`LayoutParams`宽度更改为 MATCH_PARENT `only to find the`ImageButton`被水平拉伸（是的，它被拉伸了）

然后我尝试了这两个SO帖子中发布的方法：

[如何以编程方式设置 layout_gravity？](https://stackoverflow.com/questions/8049620/how-to-set-layout-gravity-programmaticaly/8049860#8049860)

[如何以编程方式设置按钮的参数](https://stackoverflow.com/questions/8127704/how-to-set-a-buttons-parameters-programatically)

他们的方法是先设置一个`LinearLayout.Params`，然后将此参数应用于按钮（我在**相关代码**部分发布的代码应用了此方法）。简而言之就是：

```
 // The settings below is actually setting up some of the button's parameters        
    LinearLayout.LayoutParams buttonParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    buttonParams.gravity = Gravity.RIGHT;
    mDeleteButton.setLayoutParams(buttonParams); 
```

但是，结果仍然与上面显示的图像相同。

# 问题

由于稍后我需要以编程方式将更多子视图添加到**蓝色**布局，我想知道是否有一种方法可以设置每个子布局，如图像中的**橙色**布局？

**终于**

我找到了一个与@Permita 的答案非常相似的解决方案。

这是我的解决方案：

```
 LinearLayout.LayoutParams textParams = new LinearLayout.LayoutParams(0, LayoutParams.WRAP_CONTENT);
    textParams.weight = 1.0f;
    mTextView.setLayoutParams(textParams); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:27:00.027

添加以下代码，它将所有可用空间分配给 texView，将按钮移动到布局的右侧，使其看起来像 orangeLayout。

```
mTextView.setLayoutParams(LayoutParams param = new LinearLayout.LayoutParams(
                         LayoutParams.MATCH_PARENT,
                         LayoutParams.MATCH_PARENT, 1.0f)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:28:30.907

为 TextView 尝试 layout_width = "0dp" layout_weight="1"。这告诉 TextView 占据整个可用宽度，因此带有 ImageView 的 FrameLayout 将与右边框对齐。

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:gravity="center_vertical"
        android:minHeight="@dimen/detail_min_line_item_height"
        android:text="TextView" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:15:54.087

与其使用标准`LinearLayout`，不如尝试使用更复杂的`RelativeLayout`？有了它，您可以调整每个单独视图相对于其他视图的位置。您可以将`ImageButton`橙色布局中的 设置为`android:layout_alignParentRight="true"`，这会将附加到父布局右侧的按钮设置为，`RelativeLayout`在我的情况下，但`LinearLayout`在您的情况下。[这](http://developer.android.com/guide/topics/ui/layout/relative.html "API 指南 - 相对布局 - Android 开发者")是 Android 开发者网站上相对布局的 API 指南的链接。**

# sql - 嵌套 if else 语句

> ID：15900532
> 
> 赞同：7
> 
> 时间：2013-04-09T11:23:05.403
> 
> 标签：sql, sql-server, tsql

我正在创建一个函数来根据嵌套 if else 语句的结果返回“0”或“1”。使用 MSSQL。

```
ALTER FUNCTION udf_check_names_starting_with_quotationmark
(@string NVARCHAR(100))
RETURNS INT
AS
BEGIN
  DECLARE @condition INT
  SET @string = LTRIM(@string)
  SET @string = RTRIM(@string)

  IF (PATINDEX('"%', @string) !=0)
    BEGIN
      SET @condition = 1
    END
  ELSE IF (PATINDEX('%"%', @string) !=0) 
    BEGIN
      SET @condition=1
    END
  ELSE IF (PATINDEX('%"', @string) !=0)
    BEGIN
      SET @condition = 1
    END
  ELSE
    BEGIN
      SET @condition=0
    END
  RETURN @condition
END 
```

一切正常。有没有更好的方法来实现这一点（我尝试使用 OR，但 SQL 编辑器显示错误，无法识别 OR）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T11:25:44.993

```
SET @condition = (case when PATINDEX('"%', @string) !=0 or 
                            PATINDEX('%"%', @string) !=0 or 
                            PATINDEX('%"', @string) !=0 then 1 else 0 end) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T11:41:28.940

当然，这可以简化为：

```
 IF (PATINDEX('%"%', @string) !=0) 
    BEGIN
      SET @condition=1
    END
  ELSE
    BEGIN
      SET @condition=0
    END 
```

- 因为`PATINDEX('%"%', @string)`将 > 0 其中一个`PATINDEX('"%', @string)`或 PATINDEX('%"', @string) > 0？

# android - CursorAdapter 自动更新图像

> ID：15900534
> 
> 赞同：1
> 
> 时间：2013-04-09T11:23:14.240
> 
> 标签：android, listview, simplecursoradapter

我有一个定制的 SimpleCursorAdapter 从数据库中获取信息。如果一个值为 1，我为 ImageView 的背景着色，如果它为 0，我不给它着色。加载 ListView 时，一切都正确，但是如果我滚动列表中的项目，则图像颜色错误。

============刚加载============ 上下滚动一次后====

![](https://i.stack.imgur.com/LfpgP.png) ![](https://i.stack.imgur.com/DIuC3.png)

我知道 ListView 回收，当一个项目离开屏幕时，它的资源被释放，但我不明白为什么当它们回到屏幕时加载错误。当我不希望它着色时，我只需将 ImageView 颜色设置为透明即可：这种解决方法是使其正常工作的唯一方法吗？

这是我的相关代码：

RecipeCursorAdapter.java

```
public class RecipeCursorAdaptor extends SimpleCursorAdapter  {

private final Context mContext;
private final int mLayout;
private final Cursor mCursor;
private final LayoutInflater mLayoutInflater;

public CustomCursorAdaptor(Context context, int layout, Cursor c, String[] from, int[] to) {
    super(context, layout, c, from, to);
    this.mLayout = layout;
    this.mContext = context;
    this.mCursor = c;
    this.mLayoutInflater = LayoutInflater.from(mContext);
}

private final class ViewHolder {
    TextView txt_title;
    TextView txt_time;
    TextView txt_difficulty;
    ImageView img_color;
}

public View getView(int position, View convertView, ViewGroup parent) {
    if (mCursor.moveToPosition(position)) {
        ViewHolder viewHolder;

        if (convertView == null) {
            convertView = mLayoutInflater.inflate(mLayout, null);

            viewHolder = new ViewHolder();
            viewHolder.img_color = (ImageView) convertView.findViewById(R.id.ricettaColore);
            viewHolder.txt_title = (TextView) convertView.findViewById(R.id.ricettaTitolo);
            viewHolder.txt_time = (TextView) convertView.findViewById(R.id.ricettaTempo);
            viewHolder.txt_difficulty = (TextView) convertView.findViewById(R.id.ricettaDifficolta);

            convertView.setTag(viewHolder);
        }
        else {
            viewHolder = (ViewHolder) convertView.getTag();
        }

        String title = mCursor.getString(1);
        String time = mCursor.getString(2);
        String difficulty = mCursor.getString(3);
        int vegetarian = mCursor.getInt(4);

        viewHolder.txt_title.setText(title);
        viewHolder.txt_time.setText(time);
        viewHolder.txt_difficulty.setText(difficulty);

        if(vegetarian == 1)
            viewHolder.img_color.setBackgroundColor(0xff669900);
             /* Adding these two lines it works properly 
             else
            viewHolder.img_color.setBackgroundColor(0x00000000);
             */

    }
    return convertView;
} 
```

list_ricette.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ImageView
    android:id="@+id/ricettaColore"
    android:layout_width="5dip"
    android:layout_height="45dip"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:contentDescription="Ricetta vegetariana" />

<TextView
    android:id="@+id/ricettaTitolo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dip"
    android:layout_toRightOf="@+id/ricettaColore"
    android:scrollHorizontally="false"
    android:singleLine="true"
    android:text="Titolo Ricetta"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/ricettaDifficolta"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/ricettaTitolo"
    android:layout_below="@+id/ricettaTitolo"
    android:scrollHorizontally="false"
    android:singleLine="true"
    android:text="Difficoltà"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#A1A1A1" />

<TextView
    android:id="@+id/ricettaTempo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/ricettaDifficolta"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/ricettaTitolo"
    android:gravity="right"
    android:text="Tempo"
    android:textAppearance="?android:attr/textAppearanceSmall"
    android:textColor="#A1A1A1" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:41:14.340

您需要将 ViewHolder 类设为静态并在该视图持有者类中创建一个静态 int 数组。在 getView 中，您应该使用数据库中的值设置该数组，并使用该数组来设置您想要的行。

这就是我设法在 ExpandableListView 中保持复选框正确的方法：

```
static class ViewHolder {
    CheckBox check;
    static boolean[][] bool = new boolean[parentCounter][childCounter];

    public static void setChecked(int parent, int child, boolean value) {
        bool[parent][child] = value;
    }

    public static boolean getChecked(int parent, int child) {
        return bool[parent][child];
    }
} 
```

这是同一个概念。

# c - 编译器是否允许通过重新排序局部变量来优化堆栈内存使用？

> ID：15900536
> 
> 赞同：7
> 
> 时间：2013-04-09T11:23:16.163
> 
> 标签：c, stack, alignment, compiler-optimization

考虑以下程序：

```
#include <stdio.h>

void some_func(char*, int*, char*);

void stack_alignment(void) {
    char a = '-';
    int i = 1337;
    char b = '+';
    some_func(&a, &i, &b); // to prevent the compiler from removing the local variables
    printf("%c|%i|%c", a, i, b);
} 
```

它生成以下程序集（我自己添加的评论，我是程序集的新手）：

```
$ vim stack-alignment.c
$ gcc -c -S -O3 stack-alignment.c
$ cat stack-alignment.s
        .file   "stack-alignment.c"
        .section .rdata,"dr"
LC0:
        .ascii "%c|%i|%c\0"
        .text
        .p2align 2,,3
        .globl  _stack_alignment
        .def    _stack_alignment;       .scl    2;      .type   32;     .endef
_stack_alignment:
LFB7:
        .cfi_startproc
        subl    $44, %esp
        .cfi_def_cfa_offset 48
        movb    $45, 26(%esp)    // local variable 'a'
        movl    $1337, 28(%esp)  // local variable 'i'
        movb    $43, 27(%esp)    // local variable 'b'
        leal    27(%esp), %eax
        movl    %eax, 8(%esp)
        leal    28(%esp), %eax
        movl    %eax, 4(%esp)
        leal    26(%esp), %eax
        movl    %eax, (%esp)
        call    _some_func
        movsbl  27(%esp), %eax
        movl    %eax, 12(%esp)
        movl    28(%esp), %eax
        movl    %eax, 8(%esp)
        movsbl  26(%esp), %eax
        movl    %eax, 4(%esp)
        movl    $LC0, (%esp)
        call    _printf
        addl    $44, %esp
        .cfi_def_cfa_offset 4
        ret
        .cfi_endproc
LFE7:
        .def    _some_func;     .scl    2;      .type   32;     .endef
        .def    _printf;        .scl    2;      .type   32;     .endef 
```

如您所见，有 3 个局部变量（`a`和`i`）`b`，大小分别为 1 字节、4 字节和 1 字节。包括填充，这将是 12 字节（假设编译器对齐到 4 字节）。

`a`如果编译器将变量的顺序更改为 ( , `b`, )会不会提高内存效率`i`？那么只需要 8 个字节。

这里是“图形”表示：

```
 3 bytes unused                  3 bytes unused
     vvvvvvvvvvv                     vvvvvvvvvvv
+---+---+---+---+---+---+---+---+---+---+---+---+
| a |   |   |   | i             | b |   |   |   |
+---+---+---+---+---+---+---+---+---+---+---+---+

                |
                v

+---+---+---+---+---+---+---+---+
| a | b |   |   | i             |
+---+---+---+---+---+---+---+---+
         ^^^^^^^
      2 bytes unused 
```

编译器是否允许进行这种优化（通过 C 标准等）？

*   如果不是（我认为汇编输出显示），为什么？
*   如果是，为什么上面没有发生这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T11:28:18.390

编译器可以随意布局局部变量。它甚至不需要使用堆栈。

如果它使用堆栈，它可以以与堆栈上的声明顺序无关的顺序存储局部变量。

> 编译器是否允许进行这种优化（通过 C 标准等）？
> 
> *   如果是，为什么上面没有发生这种情况？

好吧，这完全是一种优化吗？

这还不清楚。它少用了几个字节，但这并不重要。`char`但是在某些架构上，如果它是按字对齐存储的，那么读取它可能会更快。因此，将`char`s 彼此相邻放置将迫使其中一个至少不对齐字并使其阅读速度变慢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T12:10:07.273

> 编译器是否允许进行这种优化（通过 C 标准等）？

是的。

> 如果是，为什么上面没有发生这种情况？

它确实发生了。

仔细阅读汇编输出。

```
 movb    $45, 26(%esp)    // local variable 'a'
    movl    $1337, 28(%esp)  // local variable 'i'
    movb    $43, 27(%esp)    // local variable 'b' 
```

变量`a`位于偏移量 26。变量`b`位于偏移量 27。变量`i`位于偏移量 28。

现在使用您制作的图像进行布局：

```
+---+---+---+---+---+---+---+---+
|   |   | a | b | i             |
+---+---+---+---+---+---+---+---+
 ^^^^^^^
 2 bytes unused 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T11:43:28.200

> 如果编译器改变变量的顺序，不是更有效吗？

如果不谈论特定的 CPU、特定的操作系统和特定的编译器，就无法判断。一般来说，编译器会做的最优化。为了以有意义的方式优化代码，您需要对特定系统有深入的了解。

在您的情况下，编译器可能会设置为在这种情况下优化速度。似乎编译器已经决定每个变量的对齐地址给出最有效的代码。在某些系统上，它不仅更快，而且必须在偶数地址上分配，因为某些 CPU 只能处理对齐的访问。

> 编译器是否允许进行这种优化（通过 C 标准等）？

是的，C 标准甚至不需要分配变量。编译器可以完全自由地以它想要的任何方式处理这个问题，并且不需要记录如何或为什么。它可以将变量分配到任何地方，可以将它们完全优化掉，或者将它们分配在 CPU 寄存器中，或者在堆栈上，或者在你桌子下面的一个小木箱里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T11:37:22.953

通常在速度很重要的正常系统中，逐字阅读比逐字阅读要快。与速度增益相比，内存损失被忽略。但是对于内存很重要的系统，例如在为特定目标平台生成可执行文件（非常通用的含义）的不同交叉编译器中，情况可能会完全不同。编译器可以将它们打包在一起，甚至检查它们的生命周期和用途，这取决于减少位宽等。所以基本上它高度依赖于必要性。但总的来说，如果你想`"pack"`紧紧地使用它们，每个编译器都会为你提供灵活性。您可以查看手册

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T11:51:17.243

具有堆栈缓冲区溢出保护的编译器（`/GS`对于 Microsoft 的编译器）可以将变量重新排序作为安全功能。例如，如果您的局部变量是一些恒定大小的 char 数组（缓冲区）和函数指针，则可以溢出缓冲区的攻击者也可以覆盖函数指针。因此，局部变量被重新排序，使得缓冲区靠近金丝雀。这样，攻击者就不能（直接）破坏函数指针，并且（希望）被破坏的金丝雀检测到缓冲区溢出。

警告：这些功能并不能防止妥协，它们只会为攻击者设置障碍，但熟练的攻击者通常会找到解决办法。

# ruby-on-rails - to_d 总是在 ruby 中返回 2 位小数

> ID：15900537
> 
> 赞同：63
> 
> 时间：2013-04-09T11:23:17.647
> 
> 标签：ruby-on-rails, ruby, math, decimal, currency

我正在处理货币，我想将数字四舍五入到小数点后 2 位。即使数字是 500.0，我也希望它是 500.00 以保持一致。当我执行“500.00”.to_d 时，它会将其转换为 500.0。

什么是改变这种行为的好方法？我还使用这种方法向下舍入到 2 位数字，并确保它始终有 2 位小数。

```
def self.round_down(x, n=2)
    s = x.to_s      
    l = s.index('.') ? s.index('.') + 1 + n : s.length
    s = s[0, l]
    s =  s.index('.') ? s.length - (s.index('.') + 1) == 1 ? s << '0' : s : s << '.00'      
    s.to_f
end 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-04-09T11:30:20.307

除了 mcfinnigan 的答案，您还可以使用以下方法获得小数点后 2 位

```
'%.2f' % 500 # "500.00" 
```

此用例称为[字符串格式运算符](http://ruby-doc.org/core-2.2.0/String.html#method-i-25)

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-04-09T11:36:30.427

由于您使用的是 Rails，这似乎与视图有关，因此有[`number_with_precision`](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_precision)：

```
number_with_precision(500, precision: 2)
#=> "500.00"

I18n.locale = :de
number_with_precision(500, precision: 2)
#=> "500,00" 
```

对于我建议的货币[`number_to_currency`](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency)：

```
number_to_currency(500)
#=> "$500.00" 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-04-09T11:27:01.353

这里有一个提示。500.00 是数字 500.0 的表示

具体来说，sprintf 将帮助您：

```
irb(main):004:0> sprintf "%.2f", 500.0
=> "500.00" 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-09T11:36:13.197

不要使用浮点数来表示金钱。请参阅[此问题](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)，以全面了解为什么这是一个坏主意。

相反，将货币值存储为整数（表示美分），或者查看[货币](https://github.com/RubyMoney/money)宝石，它提供了许多有用的功能来处理这些值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-15T01:42:36.713

**要求向下舍入。**

*大多数其他答案从 500.016 到 500.02*

**尝试：**

```
def self.round_down(x, n = 2)
  "%.#{n}f" % x.to_d.truncate(n)
end

irb(main):024:0> x=500.0; '%.2f' % x.to_d.truncate(2)
=> "500.00"
irb(main):025:0> x=500.016; '%.2f' % x.to_d.truncate(2)
=> "500.01" 
```

# java - 将主要方法（Java）中的内容实现到 Android 应用程序中？

> ID：15900538
> 
> 赞同：1
> 
> 时间：2013-04-09T11:23:17.853
> 
> 标签：java, android

我想将我之前制作的 Java 应用程序中的一些代码应用到我目前正在处理的 Android 应用程序中。此活动将包含我编写的用于加密消息的算法（使用简单的替换密码）。我的主要问题是这样的：我在类中有两个实例变量和一个main方法，这在Java中显然不会很好地集成，如下。

```
public class subcipher_1 {

//Use Static variables so main class can recognize them
int key = 0;
static char ch;

/*Create main method
 *Will contain GUI prompts and encryption algorithms
 */
public static void main (String[] args){

    subcipher_1 converter = new subcipher_1();
    //Object created for the mesasage GUI
    converter.message();

} 
```

为了将其整合到 Android 中，我的一个想法是将 main 方法中的内容应用到 OnCreate 中，如下所示：

```
int key = 0;
static char ch;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_screen_next);

    JavaApplication2 converter = new JavaApplication2();
            converter.message();
} 
```

但是我不确定我将如何将其与其余代码一起使用？我正在考虑使用匿名内部类，但是我对此的了解非常有限，并且我的实例变量在多种方法中被调用。

任何建议将不胜感激。

# python - python 测试套件中没有哪些类和方法是静态的？

> ID：15900539
> 
> 赞同：0
> 
> 时间：2013-04-09T11:23:22.407
> 
> 标签：python, testing, abstract-syntax-tree, static-code-analysis

说`file.py`有类`C`的方法`M1 M2`......，
但从`test/*.py`不调用`C`，或者从不调用`M2`。
是否有一个**静态**程序分析工具可以检测到这一点，并编写一个明显未使用的类/未使用方法的列表？

（当然，动态 Python 可以轻松击败静态分析，但静态分析可能仍然有用。
查找不在其中的类名`test/*.py`是微不足道的，一个 bash 单线，并且确实在 anon 中找到了一些（非基类）。
找到一个从不-`Cinstance.method`但是，我猜想是否需要 ast[之](http://docs.python.org/2/library/ast.html)类的。）

# javascript - 如何避免在站点范围的 javascript 文件顶部有大量条件实例化？

> ID：15900541
> 
> 赞同：1
> 
> 时间：2013-04-09T11:23:34.167
> 
> 标签：javascript

我有一个在整个应用程序中使用的 JS 文件。它的顶部看起来像这样：

```
$(document).ready( function() {
    if( $('#element-a').length ) {
        var featureA = new ElementAFeature( $('#element-a') );
    }

    if( $('#element-b').length ) {
        var featureB = new ElementBFeature( $('#element-b') );
    }

    // repeat ad nauseam for elements C thru Z etc etc
});

// actual objects and logic go here 
```

它有效，但它有点丑陋。没有在不同页面上运行不同的脚本，有没有办法整理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:45:51.203

在每个页面做这样的事情

```
window.MYAPP = window.MYAPP || {};
window.MYAPP.element = $("page-element");
window.MYAPP.feature = new ElementXFeature(window.MYAPP.element); 
```

然后修改你的初始化脚本

```
$(document).ready( function() {
   var feature = window.MYAPP.feature;
   //Use feature here.
}); 
```

如果您正在为每个页面编写大量特定的初始化代码，您可能需要考虑同时拥有一个全局 init 方法并为每个页面定义一个本地方法，并从全局 init 传递所需的任何上下文。

```
window.MYAPP.initMethod = function(context) {}

//in global init
if (typeof window.MYAPP.initMethod === "function") {
    window.MYAPP.initMethod({ pageSpecificSetting : 0});
} 
```

# html - XML 到 XSLT 的转换

> ID：15900545
> 
> 赞同：0
> 
> 时间：2013-04-09T11:23:41.183
> 
> 标签：html, xml, xslt

亲爱的朋友，我们正在开发医疗保健应用程序，它将远程监控患者数据并以动态图表显示患者心电图是我的要求，基本上我是 XML 和 XSLT 的新手。所以我想知道如何将 xml EcG 数据传输到 xslt，以便在 linux xsltproc 命令中可以将 xsl 文件传输到 html 文件，我可以在浏览器中查看。

我知道的基本示例，但是像线条聊天这样的图形我很困惑怎么办？如果有人知道，请让我知道提前谢谢。如果有人分享，任何参考或任何链接或任何示例也都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:23:03.243

您不会将 XML 数据传输到 XSLT。使用 XSLT，您可以定义一个样式表，该样式表定义如何转换 XML 数据（在您的情况下为 HTML）。因此，您将 XSLT 样式表*应用于*您的 XML 数据。

定义 XSLT 后，可以像这样使用 xsltproc：

```
xsltproc stylesheet.xsl myData.xml 
```

您可以从本[教程](http://www.w3schools.com/XSL/)开始了解它是如何工作的。（单击“自己尝试”查看 XML 文档示例、XSLT 样式表和结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:11:13.860

对于条形图、饼图等图形，您需要 java 脚本帮助，它将您生成的 XML 作为输入并将一些参数传递给能够为您生成图形的 javascript。您还可以在[http://www.fusioncharts.com/products/suite/?gclid=CI71hJqsjbUCFVEX6wodPgYAeg上查看 FusionCharts](http://www.fusioncharts.com/products/suite/?gclid=CI71hJqsjbUCFVEX6wodPgYAeg)

# http-headers - 为什么浏览器不发送“If-None-Match”标头？

> ID：15900548
> 
> 赞同：17
> 
> 时间：2013-04-09T11:23:42.330
> 
> 标签：http-headers, browser-cache, cache-control

我正在尝试在 PHP 中下载（并希望缓存）动态加载的图像。以下是发送和接收的标头：

要求：

```
GET /url:resource/Pomegranate/resources/images/logo.png HTTP/1.1
Host: pome.local
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.22 (KHTML, like Gecko) Ubuntu Chromium/25.0.1364.160 Chrome/25.0.1364.160 Safari/537.22
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: PHPSESSID=fb8ghv9ti6v5s3ekkmvtacr9u5 
```

回复：

```
HTTP/1.1 200 OK
Date: Tue, 09 Apr 2013 11:00:36 GMT
Server: Apache/2.2.22 (Ubuntu)
X-Powered-By: PHP/5.3.14 ZendServer/5.0
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Disposition: inline; filename="logo"
ETag: "1355829295"
Last-Modified: Tue, 18 Dec 2012 14:44:55 Asia/Tehran
Keep-Alive: timeout=5, max=98
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: image/png 
```

当我重新加载 URL 时，发送和接收完全相同的标头。我的问题是我应该在回复中发送什么来查看`If-None-Match`后续请求中的标头？

注意：我相信这些标头不久前做得很好，尽管我不能确定，但​​我认为浏览器已更改为`If-None-Match`不再发送标头（我曾经看到该标头）。我正在使用 Chrome 和 Firefox 进行测试，但都无法发送标头。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-10-17T18:57:32.243

# 同样的问题，类似的解决方案

`If-None-Match`我一直在尝试确定为什么 Google Chrome在访问我正在开发的网站时不会发送标题。（Chrome 46.0.2490.71 m，虽然我不确定版本的相关性。）

这是一个与最终引用的 OP 不同（尽管非常相似）的答案（在关于已接受答案的评论中），但它解决了相同的问题：

浏览器不会`If-None-Match`在“应该”的后续请求中发送标头（即，服务器端逻辑，通过 PHP 或类似方法，已用于在第一个响应中发送`ETag`或标头）。`Last-Modified`

# 先决条件

使用自签名 TLS 证书（将 Chrome 中的锁变为红色）会更改 Chrome 的缓存行为。在尝试解决此类问题之前，请在有效的受信任的根存储中安装自签名证书，并完全重新启动浏览器，如[https://stackoverflow.com/a/19102293](https://stackoverflow.com/a/19102293)中所述。

# 第一个顿悟：If-None-Match 需要来自服务器的 ETag，首先

我很快意识到 Chrome（可能还有大多数或所有其他浏览器）`If-None-Match`在***服务器*** **已经发送**了一个`ETag`标头以响应先前的请求之前不会发送标头。从逻辑上讲，这是完全合理的。毕竟，当 Chrome`If-None-Match`从未被赋予价值时，它怎么能发送呢？

这导致我查看我的服务器端逻辑 - 特别是当我希望用户代理缓存响应时如何发送标头 - 以确定由于什么原因`ETag`没有发送标头以响应 Chrome 的第一个请求资源。我已经计算出将`ETag`标头包含在我的应用程序逻辑中的努力。

我碰巧在使用 PHP，所以@Mehran（OP）的评论突然出现在我身上（他/她说`header_remove()`在发送所需的与缓存相关的标头之前调用可以解决问题）。

坦率地说，我对这个解决方案持怀疑态度，因为 a) 我很确定 PHP 在默认情况下不会发送任何自己的标头（鉴于我的配置，它不会发送）；b) 当我`var_dump(headers_list());`在 PHP 中设置自定义缓存标头之前调用时，唯一的标头集是我在上面故意设置的：

```
header('Content-type: application/javascript; charset=utf-8'); 
```

所以，没有什么可失去的，我试着`header_remove();`在发送我的自定义标题之前打电话。令我惊讶的是，PHP`ETag`突然开始发送标头！

# 第二个顿悟：压缩响应会改变它的哈希值

然后我像一袋砖头一样打我：通过`Content-type`在 PHP 中指定标头，我告诉 NGINX（我正在使用的网络服务器）一旦 PHP 将响应交还给 NGINX，就将其 GZIP 压缩！需要明确的是`Content-type`，我指定的是 NGINX 的 gzip 类型列表。

为了彻底起见，我的 NGINX GZIP 设置如下，PHP 通过 php-fpm 连接到 NGINX：

```
gzip            on;
gzip_min_length 1;
gzip_proxied    expired no-cache no-store private auth;
gzip_types      text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript image/svg+xml;

gzip_vary on; 
```

我思考为什么 NGINX 可能会`ETag`在指定“gzippable”内容类型时删除我在 PHP 中发送的内容，并想出了一个现在显而易见的答案：因为 NGINX 修改了当 NGINX 压缩它时 PHP 传回的响应正文！这很有意义；`ETag`当它与用于生成它的响应不匹配时，发送它是没有意义的。NGINX 如此智能地处理这种情况是非常巧妙的。

我不知道 NGINX 是否一直足够聪明，不会压缩*未压缩但包含`ETag`headers*的响应主体，但这似乎就是这里发生的事情。

**更新**：我找到[了解释 NGINX 在这方面的行为的评论](https://thinkingandcomputing.com/posts/enable-etag-nginx-resources-sent-gzip.html)，这反过来又引用了关于这个主题的两个有价值的讨论：

1.  [NGINX 论坛线程讨论该行为](https://forum.nginx.org/read.php?2,240120,240127)。
2.  [项目存储库中相关的讨论](https://code.google.com/archive/p/phusion-passenger/issues/903)；见评论`Posted on Jun 15, 2013 by Massive Bird`。

为了保留这个有价值的解释，如果它碰巧消失了，我引用`Massive Bird`对讨论的贡献：

> Nginx 在动态压缩响应时会剥离 Etag。这是根据规范，因为非压缩响应与压缩响应不是逐字节可比的。

然而，NGINX 在这方面的行为可能会被认为在同一规范中存在轻微缺陷

> ... 还说有一种叫做弱 Etags 的东西（一个以 W/ 为前缀的 Etag 值），并告诉我们它可以用来检查响应是否在语义上等价。在这种情况下，Nginx 不应该乱用它。不幸的是，该检查从未进入源代码树[可悲的是，引文现在充满了垃圾邮件]。”

我不确定 NGINX 目前在这方面的态度，特别是它是否增加了对“弱”Etags 的支持。

# 那么，解决方案是什么？

那么，`ETag`恢复响应的解决方案是什么？在 PHP 中执行 gzipping，以便 NGINX 看到响应已经被压缩，并简单地传递它，同时保持`ETag`标头完整：

```
ob_start('ob_gzhandler'); 
```

一旦我在发送标头和响应正文之前添加了这个调用，PHP 就开始在`ETag`每个响应中发送值。是的！

# 其他经验教训

以下是从我的研究中收集到的一些有趣的花絮。在尝试测试服务器端缓存实现（无论是 PHP 还是其他语言）时，此信息非常方便。

Chrome 及其开发者工具“网络”面板的行为***取决于请求的发起方式***。

如果请求是“新鲜的”，例如，通过按`Ctrl+F5`，Chrome 会发送这些标头：

```
Cache-Control: no-cache
Pragma: no-cache 
```

并且服务器响应`200 OK`。

如果仅使用 发出请求`F5`，Chrome 会发送以下标头：

```
Pragma: no-cache 
```

并且服务器响应`304 Not Modified`。

最后，如果请求是通过单击指向您正在查看的页面的链接**或**将焦点放在 Chrome 的地址栏并按 Enter 发出的，则 Chrome 会发送以下标头：

```
Cache-Control: no-cache
Pragma: no-cache 
```

并且服务器响应`200 OK (from cache)`。

虽然这种行为一开始有点令人困惑，但如果您不知道它是如何工作的，这是理想的行为，因为它允许您非常彻底地测试每个可能的请求/响应场景。

也许最令人困惑的是，Chrome 会自动在传出请求中插入`Cache-Control: no-cache`和标头，而**实际上**Chrome 正在从其缓存中获取响应（如响应中所证明的那样）。`Pragma: no-cache`**`200 OK (from cache)`**

 **这段经历对我来说相当有用，我希望其他人在未来能找到这种价值分析。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-09T13:19:18.247

您的响应标头包括`Cache-Control: no-store, no-cache`；这些防止缓存。

删除这些值（我认为`must-revalidate, post-check=0, pre-check=0`可以/应该保留——它们告诉浏览器检查服务器是否有变化）。

而且我会坚持`Last-Modified`单独使用（如果可以仅使用此标准检测到您的资源更改） -`ETag`处理起来更复杂（特别是如果您想自己在 PHP 脚本中处理它）和 Google PageSpeed/YSlow也建议不要这样做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-01-19T12:43:44.913

为未来的我发布这个...

我遇到了类似的问题，我正在发送`ETag`响应，但是 HTTP 客户端没有在后续请求中发送`If-None-Match`标头（这很奇怪，因为那是前一天）。

原来我`http://localhost:9000`用于开发（没有使用`If-None-Match`） - 通过切换到`http://127.0.0.1:9000`Chrome ¹自动开始`If-None-Match`再次发送请求中的标头。

此外 - 确保`Devtools > Network > Disable Cache [ ]`未选中。

**Chrome：版本 71.0.3578.98（官方版本）（64 位）**

¹我在任何地方都找不到这个记录 - 我假设 Chrome 负责这个逻辑。

[![chrome 开发工具说明](https://i.stack.imgur.com/VzKr1.png)](https://i.stack.imgur.com/VzKr1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-20T21:36:30.757

## 类似问题

我试图获取带有`If-None-Match`标头的条件 GET 请求，并提供了正确的`Etag`标头，但在我尝试的任何浏览器中都无济于事。

经过大量试验后，我意识到浏览器将两者`GET`和`POST`相同的路径视为相同的缓存候选者。因此，通过立即“POST”到与 相同的路径有效`GET`地`Etag`取消了 with `Cache-Control:"no-cache, private"`，即使它是由 提供的`X-Requested-With:"XMLHttpRequest"`。

希望这可能对某人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-16T04:08:43.447

这发生在我身上，因为我将缓存大小设置得太小（通过组策略）。

它并没有发生在 Incognito 中，这让我意识到这可能是这种情况。

修复解决了问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-16T20:41:23.733

由于两个原因，这发生在我身上：

1.  我的服务器没有发送 etag 响应标头。我通过添加以下内容更新了我的 jetty web.xml 以返回 etag：

    ```
    <init-param>
        <param-name>etags</param-name>
        <param-value>true</param-value>
    </init-param> 
    ```

2.  我调用的 URL 用于 xml 文件。当我将其更改为 html 文件时，chrome 开始发送“if-none-match”标头！

我希望它可以帮助某人**

# phantomjs - phantom.js 控制台上的多行输入

> ID：15900552
> 
> 赞同：2
> 
> 时间：2013-04-09T11:24:01.673
> 
> 标签：phantomjs

(>= 1.7.0)是否`phantom.js`支持其控制台上的多行输入？既不按`Enter`也不`META`-`Enter`在下面工作，

```
phantomjs> function foo() {
Parse error 
```

# java - 格式化 .txt 文件中的文本

> ID：15900553
> 
> 赞同：2
> 
> 时间：2013-04-09T11:24:05.117
> 
> 标签：java, file, text

我必须为这样的文本文件创建一个小程序：

```
hello_this_is_a_test_Example_
 this line has to go up because it has a space at the beginning
 this one too
this is the next line because there's no space at the start
 this one has to connect with the first line 
```

我希望你明白。

所以最后，它应该将格式化的文本保存在这样的文件中：

```
hello_this_is_a_test_Example_ this line has to go up because it has a space at the beginning this one too
this is the next line because there's no space at the start this one has to connect with te upper again 
```

基本上，如果该行在每个字符串的开头都有一个空格字符，则它必须与顶行连接。我已经有了 GUI 来选择这两个文件只需要算法。提前谢谢你：D

我现在有这个，但它把所有东西放在一条线上。这是不对的：

```
public class Engine {

    public void Process(String fileIn,String fileOut) throws IOException{
        System.out.println("[Info]--> Processign");
        System.out.println("[Info]--> FileIn = " + fileIn);
        System.out.println("[Info]--> FileOut = " + fileOut);
        FileWriter Writer = new FileWriter(fileOut);

        BufferedReader br = new BufferedReader(new FileReader(fileIn));
        String line;
        String modified;
        while ((line = br.readLine()) != null) {
         System.out.println(line);
            Writer.write(line);
         if(line.startsWith(" ")){
            modified = line.replaceAll("\n ", " ");
            Writer.write(modified);
         }
        } 
        br.close();
        Writer.close();}    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:47:05.300

试试这个：

```
String modified = yourString.replaceAll("\n ", " "); 
```

尝试这样的事情：

```
StringBuilder builder = new StringBuilder();
foreach (string line in Files.ReadAllLines(@"c:\myfile.txt"))
{
    builder.append(line);
}
String modified = builder.toString().replaceAll("\n ", " ");
FileWriter fw = new FileWriter(@"c:\myfile.txt");
fw.write(modified);
fw.close(); 
```

# jquery - 保持花式绑定阻止父 jquery 操作

> ID：15900556
> 
> 赞同：1
> 
> 时间：2013-04-09T11:24:11.740
> 
> 标签：jquery

好的，快点。我已经通过 $.ajax() 加载了这个 DIV，并附加了以下 jquery live()`$('div').live('click', function(event) {});`但在这个 DIV 内部有一个用于 jquery fancybox 画廊的锚。

html:

```
<div>
    <a class="foo" href="some-image.png"><img src="some-thumb.png"></a>
    <a class="foo" href="some-image2.png"><img src="some-thumb2.png"></a>
    <a class="foo" href="some-image2.png"><img src="some-thumb2.png"></a>
</div> 
```

jQuery：

```
$('div').live('click', function(event) {
     alert();
});
$('.foo').fancybox(); 
```

我想在单击图库链接后阻止执行 div 操作...我对此有点坚持。希望你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:51:26.447

你需要使用[stopPropagation](http://api.jquery.com/event.stopPropagation/)，看看我的例子[http://jsfiddle.net/abimaelmartell/ZS8Yw/](http://jsfiddle.net/abimaelmartell/ZS8Yw/)

```
$('a').on("click",function(event){
    event.stopPropagation();
    alert("link");
}) 
```

# java - 如何使番石榴缓存值永久化

> ID：15900557
> 
> 赞同：0
> 
> 时间：2013-04-09T11:24:14.827
> 
> 标签：java, caching, guava

是否可以使用 Google Guava 的缓存将我的缓存值永久保存在缓存中？

以下是我构建缓存的方式：

```
cache = CacheBuilder.newBuilder()               
                .expireAfterWrite(60, TimeUnit.MINUTES)
                .maximumSize(100)
                .build(....); 
```

我希望我的缓存永久保留该值（当前为 60 分钟）。有没有这样做的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T11:31:22.817

只需`expireAfterWrite`从构建器中删除（这是可选功能）：

```
cache = CacheBuilder.newBuilder()
            .maximumSize(100)
            .build(....); 
```

这样只有在达到 maximumSize 时才会驱逐条目。

Guava's Cache 有[据可查](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/cache/CacheBuilder.html)，但您也应该阅读[Wiki 页面](https://github.com/google/guava/wiki/CachesExplained)。

PS如果“永久”是指“重新启动后将在那里”，则 Guava Cache 不适合您，因为它是内存缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:30:11.910

只需更改 builder 中的值：

```
cache = CacheBuilder.newBuilder()               
            .expireAfterWrite(Long.MAX_VALUE, TimeUnit.DAYS)
            .maximumSize(Long.MAX_VALUE)
            .build(....); 
```

# sql-server - 根据其他唯一 id 选择随机 id

> ID：15900562
> 
> 赞同：1
> 
> 时间：2013-04-09T11:24:37.623
> 
> 标签：sql-server, tsql

对于样本表：

```
ID courseId dishID
1  1        1
2  1        5
3  2        4
4  1        7
5  2        8 
```

我不想通过唯一的 courseId 随机 discId 进行选择。所以我的结果是

```
ID courseId dishId
1  1        1
3  2        4 
```

如果我比其他随机再次运行：

```
ID courseId dishId
2  1        5
5  2        8 
```

ETC...

我正在使用微软 sql 2008

例如

```
SELECT * FROM Table 
WHERE dishId IN
(SELECT MIN(dishId) 
FROM Table 
GROUP BY courseId 
```

这会给我返回正确的结果，但 discId 始终相同，但我希望 discId 是随机菜

或者我可以先通过 courseId = 1 从一个表中选择，然后通过 courseId 2 再次选择（两个结果都按 newId() 排序）并进行 UNION，但是当我有 7 门课程时，我不想有 7 SELeCT sentances 。 .. 我希望没有 UNION 也能得到同样的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:44:43.090

```
select ID, courseId, dishID from (
select row_number() over (partition by courseId order by newid()) as n, *
from Table 
) t
where n = 1 
```

# java - 日出时间计算与 Google 的结果不符

> ID：15900564
> 
> 赞同：7
> 
> 时间：2013-04-09T11:24:40.440
> 
> 标签：java, android, algorithm

我不确定它是否真的与 Android 有关，但由于我打算将它用于 Android 应用程序，所以我也标记了 Android。

如果给出经纬度，我正在尝试建立一些逻辑来计算日出时间。

我试过跟随，但一切都给出了我提供的位置（印度班加罗尔）的日出时间略有不同，当我用关键字搜索谷歌时，谷`Bangalore Sunrise`歌在卡片中给出了不同的结果，看起来更多准确的：

*   尝试将此 C 代码移植到 Java：[http ://souptonuts.sourceforge.net/code/sunrise.c.html](http://souptonuts.sourceforge.net/code/sunrise.c.html)
*   尝试使用维基百科的这个公式：[http ://en.wikipedia.org/wiki/Sunrise_equation](http://en.wikipedia.org/wiki/Sunrise_equation)
*   尝试使用这个库：[https ://github.com/mikereedell/sunrisesunsetlib-java](https://github.com/mikereedell/sunrisesunsetlib-java)
*   尝试使用此 Web 服务：[http ://www.earthtools.org/webservices.htm#sun](http://www.earthtools.org/webservices.htm#sun)

都给出不同的结果，但谷歌的看起来仍然更准确。

这里有人知道API或更好的计算吗？或者谷歌用于他们卡片的算法/网络服务？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:01:28.357

印度标准时间是 UTC+05:30，这可能就是您看到 30 分钟差异的原因。

该算法可以以 UTC 计算日出时间，但无法将 UTC 转换为本地时间，这需要复杂的时区知识。该算法可能会做一些非常简单的事情，比如

```
localTime = utcTime + 1_hour * longitude / 15_degree 
```

班洛尔市是 5 小时。

您应该采用 UTC 时间，然后使用 Java 日期 API 将其转换为本地时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:50:58.633

我没有研究您提供的所有链接，但很可能差异源于不同的假设和定义。特别是，以下因素往往因算法而异：

*   包括或不包括大气折射（即“真实”或“表观”海拔）
*   太阳破地平线的“顶部”或“中心”

当然还有其他因素，随着纬度离赤道越来越远，这个问题变得越来越模糊。但仅这些因素就可以解释几分钟的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:40:32.367

快速搜索将我带到这个 api

[http://www.earthtools.org/webservices.htm#sun](http://www.earthtools.org/webservices.htm#sun)

# jquery - 在窗口调整大小时自动调整右容器的宽度

> ID：15900567
> 
> 赞同：0
> 
> 时间：2013-04-09T11:24:44.333
> 
> 标签：jquery, html, css, responsive-design, window-resize

在我的模板中，包装 div 包含另外两个容器。一个是固定位置 left div ，另一个是绝对位置 right div 。右 div 包含另一个宽度为 100% 的子 div。

html:

```
<div id ="wrapper">
  <div class="left"></div>
  <div class="right"></div>
</div> 
```

CSS：

```
 #wrapper {position:absolute; width:100%; height:100%;background:red;}
 .left {float:left; position:fixed; width:150px; height:100%;background:green;}
.right {position:absolute; width:350px; height:100%; margin-left:150px;background:blue;} 
```

我的目标是`right`容器。我想`right div`在窗口重新调整大小时调整它的宽度，所以它的宽度保持不变（视口宽度 - 左 div 宽度）。

我用jquery试了一下：

```
var right_width_prcnt = (($(window).width()- 150)/($(window).width()/100) )

function right_width_adjust() {
         $('.right').stop(false,true).animate({'width':right_width_prcnt + '%'});
};

var resizeTimer = null;
$(window).bind('resize', function() {
    if (resizeTimer) clearTimeout(resizeTimer);
    resizeTimer = setTimeout(right_width_adjust, 100);
}); 
```

Jsfiddle 供参考：http: [//jsfiddle.net/RWDQ2/2/](http://jsfiddle.net/RWDQ2/2/)

每当我们重新调整窗口大小时，是否有任何 css 方法（没有 jquery）来调整右 div =（窗口宽度 - 左 div 宽度）的宽度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:42:19.003

我认为这就是你需要的

```
$(document).ready(function() {
    $(window).bind('resize', function() {
        var right_width_prcnt = (($(window).width()-150)/($(window).width()/100) );
        $('.right').stop(false,true).animate({'width':right_width_prcnt+ '%'});
    });
}); 
```

注意：在您的代码中，

```
var right_width_prcnt = (($(window).width()-150)/($(window).width()/100) ); 
```

已经在 domready 上宣布了。意思是，窗口调整大小时该值保持不变。它应该在窗口调整大小时重新计算。

另外，也许您应该尝试像这样计算百分比

```
var right_width_prcnt = (($(window).width()-150)/$(window).width())*100; 
```

我希望这有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:49:37.173

你可以在这里尝试一些操作。

如果您的左 div 宽度以像素为单位固定，则给`width:100%`右 div 并为右 div 创建一个内部 div，并将左边距（值应等于左 div 宽度）给内部 div。

**HTML**

```
<div class="wrapper">
      <div class="left">zc</div>
      <div class="right">
          <div class="right_inner">xvnxmvn </div>
    </div>
</div> 
```

**CSS**

```
html, body{
    height:100%;
    margin:0
}
.wrapper { 
    width:100%; 
    height:100%;
    background:red; 
    float:left
}
 .left {
     width:150px; 
    height:100%;
    background:green; 
    position:fixed
}
.right { 
    width:100%; 
    height:100%;  
    background:blue;     
    color:white;
}
.right_inner { 
    margin-left:150px; 
    padding:10px /*Only if you need*/
} 
```

**[演示](http://jsfiddle.net/RWDQ2/8/)**

# c++ - 从变化的区间有效地生成伪随机整数

> ID：15900568
> 
> 赞同：5
> 
> 时间：2013-04-09T11:24:45.717
> 
> 标签：c++, random, c++11, integer

我编写了以下类，用于从给定的区间生成随机整数`[lower, upper]`。

```
 class RandomInteger {

protected:

    std::random_device randomDevice;
    std::default_random_engine randomEngine;
    std::uniform_int_distribution<> distribution;

public:

    RandomInteger(int64_t lower, int64_t upper);

    virtual ~RandomInteger();

    virtual int64_t generate();
};

RandomInteger::RandomInteger(int64_t lower, int64_t upper) : randomEngine(this->randomDevice()), distribution(lower, upper) {
}

RandomInteger::~RandomInteger() {
    // TODO Auto-generated destructor stub
}

int64_t RandomInteger::generate() {
    int64_t i = this->distribution(this->randomEngine);
    return i;
} 
```

如果间隔保持不变并且进行了多次调用，这是可以的`generate`。但是，现在我的用例是从一个总是变化的间隔生成整数（上限每次都增加）。

首先，这需要快速。这与密码学无关，因此非常伪随机数是可以的（并且`std::random_device`可能不需要）。如果可能，我还想避免使用 C 风格并使用现代 C++11 风格。

你能建议有效地做到这一点的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:27:57.883

使用`uniform_int_distribution::operator()`接受 a的重载`const param_type &`：

```
int64_t RandomInteger::generate(int64_t lower, int64_t upper) {
    int64_t i = this->distribution(this->randomEngine,
      std::uniform_int_distribution<int64_t>{lower, upper}.param());
    return i;
} 
```

（请注意，您应该 value-initialize `distribution`，因为您对设置它不感兴趣`param`。此外，`distribution`应该使用 模板`int64_t`，而不是 int。）

如果`uniform_int_distribution`保留任何状态，那么这将有效地使用它。

实际上，大多数实现`uniform_int_distribution`不保留任何状态。参见例如 libstdc++ random.tcc：[http ://gcc.gnu.org/onlinedocs/gcc-4.6.0/libstdc++/api/a01001_source.html#l00832](http://gcc.gnu.org/onlinedocs/gcc-4.6.0/libstdc++/api/a01001_source.html#l00832)

# jquery - 阻止身体滚动的更好方法？

> ID：15900569
> 
> 赞同：2
> 
> 时间：2013-04-09T11:24:46.827
> 
> 标签：jquery, css

我正在尝试构建一个布局，当滚动侧边栏时，当您到达侧边栏的底部时，主要内容区域不会随之滚动。

我能想到的唯一方法是在将鼠标悬停在侧边栏上时向 body/html 添加一个类，将 body 的溢出设置为隐藏，从而停止飞走滚动。

```
$(document).ready(function () {
            $(".sidebar").hover(function () {
                $('body,html').addClass("special-overflow");
            }, function () {
                $('body,html').removeClass("special-overflow");
            });
        }); 
```

这是基本布局的jsfiddle。[http://jsfiddle.net/V7vaK/](http://jsfiddle.net/V7vaK/)

这样做的问题是，当您将鼠标悬停在侧边栏上时，侧边栏会消失，并且会在页面周围晃动。我已经在谷歌上搜索了一段时间，但我看不到，也想不出更好的解决方案。

谁能提出比这更优雅的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:55:58.097

如果我理解得很好，这可能是您尝试做的另一种方法：

[http://cdpn.io/uzrpF](http://cdpn.io/uzrpF)

我希望它有帮助！

米格尔。

# sql - 行号重置

> ID：15900572
> 
> 赞同：7
> 
> 时间：2013-04-09T11:24:51.857
> 
> 标签：sql, sql-server

我有一张桌子。

**prod, change, date**
pr1, 'Yes', 2012-01-01
pr1, 'No' , 2012-02-01
pr1, 'No' , 2012-03-01
pr1, 'Yes', 2012-04-01
pr1 , '是', 2012-05-01
pr1, '否' , 2012-06-01

我正在尝试构建一个 qry 并使用 row_number() 函数来对行进行编号。只是我需要 row_number() 来重置每次更改列的值为 yes。然后 row_number() 计算必须从头开始。像这样

**prod, change, date, row_number**
pr1, 'Yes', 2012-01-01, **1**
pr1, 'No' , 2012-02-01, **2**
pr1, 'No' , 2012-03-01, **3**
pr1, 'Yes ', 2012-04-01, **1**
pr1, '是', 2012-05-01, **1**
pr1, '否' , 2012-06-01, **2**
... 等等

是否有可能只使用 SQL 来做类似的事情？我正在查看诸如 row_number() 之类的窗口函数（按日期排序，prd_prod，更改），但它不是那样工作的。还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-20T15:14:51.123

为了重置row_number，您必须添加“PARTITION BY”

前：

```
select RowOrder=ROW_NUMBER() OVER (ORDER BY WidgetTimeCreated) 
```

后：

```
select RowOrder=ROW_NUMBER() OVER (PARTITION BY WidgetType ORDER BY WidgetTimeCreated) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:20:44.900

```
select *, row_number() over (partition by prod, 
                                (case when change = 'No' then (select max(date) from [<YourTable>] where prod = d.prod and change = 'Yes' and date < d.date)
                                      else date end) order by date) as rownum
from [<YourTable>] d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:48:06.757

尝试：

```
with yes as
(select y.*, row_number() over (partition by prod order by date) yesn
 from mytable y
 where change = 'Yes'),
yesrange as
(select c.*, n.[date] next_date
 from yes c
 left join yes n on c.prod = n.prod and c.yesn+1 = n.yesn)
select m.*, row_number() over (partition by m.prod, r.yesn order by m.date)
from mytable m
join yesrange r 
  on m.prod = r.prod and 
     m.[date] >= r.date and
     m.[date] < coalesce(r.next_date, dateadd(d, 1, m.[date]) ) 
```

[（这里](http://sqlfiddle.com/#!3/0c522/2)的 SQLFiddle ）

# php - Oxwall - 电子邮件通知

> ID：15900575
> 
> 赞同：0
> 
> 时间：2013-04-09T11:25:02.553
> 
> 标签：php, email-notifications, oxwall

我在 Oxwall 上安装了“电子邮件通知”扩展程序，但没有收到任何电子邮件。无论用户是否在网站上看到通知，我都希望用户收到电子邮件通知。

换句话说：如果有人对我的帖子发表评论，我可以立即收到电子邮件通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T16:30:42.693

是的。它可能在最新版本的 Oxwall 中。

检查您的 oxwall cron 是否已安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T17:48:12.687

您必须更改用户的选项。开箱即用的默认设置是在通知 2 天内未激活时发送通知。这需要设置为“立即”，以便通知按您的意愿发出。

# java - 尝试构建 httpget 链接时出现 URISyntaxException

> ID：15900587
> 
> 赞同：0
> 
> 时间：2013-04-09T11:25:35.597
> 
> 标签：java, android, base64, http-get

我在尝试执行以下操作时遇到了 URISyntaxException 异常。我完全不知道是什么导致了这个问题。能得到一些帮助会很好。错误位于最后一行

```
 EditText edUserName = (EditText)findViewById(R.id.textBox_username_register);
    String strUsernameTemp = edUserName.getText().toString();
    byte[] byteUsernameTemp = null;
    try
    {
        byteUsernameTemp = strUsernameTemp.getBytes("UTF-8");
    }
    catch(UnsupportedEncodingException e)
    {
        e.printStackTrace();
    }
    String strUsername = Base64.encodeToString(byteUsernameTemp, Base64.DEFAULT);

    EditText edPassword = (EditText)findViewById(R.id.passwordBox_password_register);
    String strPasswordTemp = edPassword.getText().toString();
    byte[] bytePasswordTemp = null;     
    try
    {
        bytePasswordTemp = strPasswordTemp.getBytes("UTF-8");
    }
    catch(UnsupportedEncodingException e)
    {
        e.printStackTrace();
    }
    String strPassword = Base64.encodeToString(bytePasswordTemp, Base64.DEFAULT);       

    EditText edEmail = (EditText)findViewById(R.id.textBox_email_register);
    String strEmailTemp = edEmail.getText().toString();
    byte[] byteEmailTemp = null;
    try
    {
        byteEmailTemp = strEmailTemp.getBytes("UTF-8");
    }
    catch(UnsupportedEncodingException e)
    {
        e.printStackTrace();
    }       
    String strEmail = Base64.encodeToString(byteEmailTemp, Base64.DEFAULT);     

    String strD = "22";
    String strM = "11";
    String strY = "1993";
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();        
    HttpGet httpget = new HttpGet(loginData.strAPIURL + "addUser&username=" + strUsername + "&password=" + strPassword + "&email=" + strEmail + "&d=" + strD + "&m=" + strM + "&y=" + strY); // this line causes the error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:42:37.013

`URISyntaxException`如果在创建 URI 时无法解析某些信息，通常会抛出此错误。尝试`URI`使用`URLEncoder`.

```
String encodedURI = java.net.URLEncoder.encode(loginData.strAPIURL + "addUser&username=" + strUsername + "&password=" + strPassword + "&email=" + strEmail + "&d=" + strD + "&m=" + strM + "&y=" + strY,"UTF-8");
HttpGet httpget = new HttpGet(encodedURI); 
```

# android - IBM Worklight：更改设备方向

> ID：15900588
> 
> 赞同：0
> 
> 时间：2013-04-09T11:25:40.070
> 
> 标签：android, ibm-mobilefirst

当我将设备的方向从纵向更改为横向时。应用程序自动关闭。我用来测试的应用程序是[带有 jQ​​uery Mobile 的 IBM Worklight Starter 应用程序](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/WorklightStarter_jQueryMobile.zip)。我还在 Eclipse 中创建了一个 Worklight 项目并在真实设备中进行测试，当方向改变时，应用程序也会关闭。

环境：Worklight 5.0.6 Android 4.1.1 Samsung Galaxy S3

这是来自日志猫的日志：

04-09 19:05:32.485: D/DroidGap(4535): onMessage(spinner,stop)
04-09 19:05:35.320: D/DroidGap(4535): 暂停应用程序！
04-09 19:05:35.320: D/CordovaWebView(4535): 处理暂停
04-09 19:05:35.330: D/DroidGap(4535): onDestroy()
04-09 19:05:35.330: D/CordovaWebView (4535): >>> loadUrl(javascript:try{cordova.require('cordova/channel').onDestroy.fire();}catch(e){console.log('异常从本机触发销毁事件'); };)

这里有一些问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:32:16.197

听起来您正在使用`minSdkValue`值 17 左右的（在 AndroidManifest.xml 中）？这是我们已经注意到的一个缺陷（无论问题是在 Worklight 还是 Android 中，都还没有进行调查）。但是，您可以通过将值更改为“8”来克服它。为此，请确保您还使用 Android SDK 管理器安装 API Level 8。

# java - 通过ndk从c ++检索复杂对象列表到java

> ID：15900594
> 
> 赞同：0
> 
> 时间：2013-04-09T11:25:58.400
> 
> 标签：java, c++, android-ndk, java-native-interface

我有一个用 c++ 编写的 ListComplexType 类型，它对从 Android 应用程序传递的文本进行一些解析。ListComplexType 类型包含一个 std::list，填充有 MyComplexType。

现在我想将列表中 MyComplexType 对象的“名称”参数输出到 android 端的简单 ListView。

我该怎么做呢？我看过[这里](https://stackoverflow.com/questions/10300039/how-to-pass-a-complex-structure-between-c-and-java-with-jni-on-android-ndk)。

例子：

C++：

```
class ListComplexType{
private:
  std::string jsonString;//For testing!
  list<MyComplexType> myList;

public:
  ListComplexType(std::string jsonstring);
  ~ListComplexType();
  void read( string jsonString);
  std::string deserialize();

};

class MyComplexType{
public:
  std::string name;
  std::string phone;
  Adress adress;
};

class Adress{
public:
  double house;
  std::string street;

}; 
```

爪哇：

```
json_parse(readJsonFile(getApplicationContext()));
Debug.stopMethodTracing();
mainListView = (ListView) findViewById( R.id.mainListView );    

//RETRIEVE LIST FROM C++?       

listAdapter = new ArrayAdapter<String>(this, R.layout.simplerow, list);  
mainListView.setAdapter( listAdapter ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:13:10.493

您可以通过以下方式将 C++ 字符串复制到 Java 数组中：

Java（简单的部分）：

```
 private native String [] getNames(); 
```

C++/JNI（较难的部分）：

```
#include <jni.h>

static jclass Class_JavaString;

JNIEXPORT jint JNICALL JNI_OnLoad(JavaVM* vm, void* reserved)
{
    JNIEnv* env = getEnv();

    cls = env->FindClass("java/lang/String");
    if (cls == NULL)
      return JNI_ERR;

    Class_JavaString = reinterpret_cast<jclass>(env->NewGlobalRef(cls));
    if (Class_JavaString == NULL)
      return JNI_ERR;    

    return JNI_VERSION_1_6;
}  

JNIEXPORT void JNICALL JNI_OnUnload(JavaVM *vm, void *reserved)
{
    JNIEnv *env = getEnv();
    env->DeleteGlobalRef(Class_JavaString);
    return; 
}

// To get correct signature for next function you can use
// javah -bootclasspath /opt/android-sdk/platforms/android-8/android.jar -classpath bin/classes -d jni com.example.main.MyActivity

JNIEXPORT jobjectArray JNICALL Java_com_example_main_MyActivity_getNames(JNIEnv * env, jobject)
{
 // copy std::list of std::strings into Java compatible object array
 // pListComplexType should be initialized somewhere to your instance of ListComplexType!
 jsize i = 0;
 jobjectArray jarray = env->NewObjectArray(pListComplexType->myList.size(),
   Class_JavaString, NULL);
 list::iterator it,b,e;
 b = pListComplexType->myList.begin();
 e = pListComplexType->myList.end();
 for (it = b; it != e; ++it) {
   jstring tmp = env->NewStringUTF((it->name).c_str());
   env->SetObjectArrayElement(jarray, i++, tmp);
   env->DeleteLocalRef(tmp);
 }
 return jarray;
} 
```

# plist - 从 cocos2d-x 中的 plist 中检索图像的非弃用方法

> ID：15900601
> 
> 赞同：0
> 
> 时间：2013-04-09T11:26:19.147
> 
> 标签：plist, deprecated, cocos2d-x

我必须从 plist 在屏幕上加载图像，我正在使用以下代码

```
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("level1.plist");

CCSpriteBatchNode *bgBatch = CCSpriteBatchNode::batchNodeWithFile("level1.png");
this->addChild(bgBatch);

CCSprite *bg = CCSprite::spriteWithSpriteFrameName("jug.png");
    bg->setPosition(ccp(30,115));
    bgBatch->addChild(bg); 
```

但函数“batchNodeWithFile”和“spriteWithSpriteFrameName”已被弃用。我应该使用哪些功能来代替这些功能？

感谢您的帮助，但我已经尝试过了，但是当我运行它时

* * *

感谢您的帮助，但我已经尝试过了，当我运行它时

```
 CCSprite* CCSprite::createWithSpriteFrameName(const char *pszSpriteFrameName)
        {
            CCSpriteFrame *pFrame = CCSpriteFrameCache::sharedSpriteFrameCache()-   >spriteFrameByName(pszSpriteFrameName);
#if COCOS2D_DEBUG > 0
            char msg[256] = {0};
            sprintf(msg, "Invalid spriteFrameName: %s", pszSpriteFrameName);
            CCAssert(pFrame != NULL, msg); /* it stops right here and gives error "Assertion failed: (pFrame != __null), function createWithSpriteFrameName, file /Users/gameview/Desktop/mahwish/mahwish/libs/cocos2dx/sprite_nodes/CCSprite.cpp, line 158."

        #endif 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T12:35:01.140

Cocos2d-x 中的静态构造函数已经被重命名，所以它们都以 开头`create`，所以

*   `CCSpriteBatchNode::batchNodeWithFile`变成了刚刚**`CCSpriteBatchNode::create`**
*   `CCSprite::spriteWithSpriteFrameName`转向**`CCSprite::createWithSpriteFrameName`**

# kendo-ui - Kendo UI TreeView 右键单击

> ID：15900605
> 
> 赞同：3
> 
> 时间：2013-04-09T11:26:25.337
> 
> 标签：kendo-ui, kendo-treeview

我有一些带有远程数据的剑道树视图。我也有右键单击激活的上下文菜单，是否可以手动选择节点？我的意思是这个节点必须像鼠标左键一样突出显示。也许触发一些事件是有道理的？请帮忙

```
 $("#myTree").on('mousedown', '.k-item', function (event) {
        if (event.which === 3) {
            var treeView = $('#myTree').data('kendoTreeView');     
            var dataSource = treeView.dataSource;
            var itemUId = $(this).attr("data-uid");
            var node = dataSource.getByUid(itemUId);                        
        }
    }) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:19:49.353

你可以加 ：

```
$("#myTree").on('mousedown', '.k-item', function (event) {
    if (event.which === 3) {
        event.stopPropagation(); // to avoid propagation of this event to the root of the treeview
        $('#myTree').data('kendoTreeView').select(this);                        
    }
}) 
```

# android - 在 Android 中访问 PHP 文件时出现 FileNotFound 异常

> ID：15900607
> 
> 赞同：0
> 
> 时间：2013-04-09T11:26:28.460
> 
> 标签：android, httpclient, filenotfoundexception

我正在尝试在 android 中使用客户端/服务器端应用程序。我有一个简单地获取或发布数据的 php 文件。在 Android 上，我有一个从服务器文件获取和发布数据的活动。我在访问位于 android 上的文件时遇到问题，`c://xampp/htdocs/Project/server.php`我有这些代码行：

```
URL url = new URL("http://192.178.10.54/xampp/htdocs/Project1/server.php");
URLConnection connection = url.openConnection(); 
```

但是当我运行我的应用程序时，会出现这些异常行：

```
04-09 16:18:21.484: W/System.err(7752):java.io.FileNotFoundException: http://192.178.10.54/xampp/htdocs/Project1/server.php
04-09 16:18:21.664: W/System.err(7752):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
04-09 16:18:21.664: W/System.err(7752):     at com.android.ServerInterface.executeHttpRequest(ServerInterface.java:111)
04-09 16:18:21.664: W/System.err(7752):     at com.android.ServerInterface.getAnimalList(ServerInterface.java:60)
04-09 16:18:21.664: W/System.err(7752):     at com.android.AndroidListClient$GetListTask.doInBackground(AndroidListClient.java:106)
04-09 16:18:21.664: W/System.err(7752):     at com.android.AndroidListClient$GetListTask.doInBackground(AndroidListClient.java:1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:34:59.013

```
URL url = new URL("http://192.168.10.54/xampp/htdocs/Project1/server.php");
URLConnection connection = url.openConnection(); 
```

# c# - 如何读/写这个 app.config 设置？

> ID：15900612
> 
> 赞同：1
> 
> 时间：2013-04-09T11:26:40.017
> 
> 标签：c#, .net-3.5, app-config

具有以下 app.config：

```
<configuration>
  <configSections>
    <sectionGroup name="businessObjects">
      <sectionGroup name="crystalReports">
        <section name="crystalReportViewer" type="System.Configuration.NameValueSectionHandler" />
      </sectionGroup>
    </sectionGroup>
  </configSections>

  <businessObjects>
    <crystalReports>
      <crystalReportViewer>
        <add key="maxNumberListOfValues" value="5000"/>
      </crystalReportViewer>
    </crystalReports>
  </businessObjects> 
```

您将如何阅读以及如何在运行时设置**maxNumberListOfValues**设置？另外，如果 app.config 不存在怎么办？那么，您将如何在运行时动态设置设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:34:42.360

您可以使用以下代码来获取 app.config 文件进行编辑..

```
Configuration configFile = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
```

还可以检查它是否为空，可以使用类似的东西

```
 //Check
            if (ConfigurationManager.AppSettings.AllKeys.Contains(str someKey))
            {
                if (configFile.AppSettings.Settings[str someKey].Value == string.Empty)
                    return true;
            }
            else
            {
                // If app config does not contain needed Keys
                //Handle issue
            } 
```

但是，案例是 app.config 文件意味着只读值。如果要在运行时编辑它，请使用用户配置文件。在 Visual Studio 中，项目的文件夹中 有一个名为`settings.Settings`的文件。使用它。`properties`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:31:24.067

app.config 中设置的全部意义在于它们是静态的常量变量，如果你愿意的话。它们不应该被改变。

诸如此类的答案解释了从 App Config 读取变量：[Reading settings from App.Config](https://stackoverflow.com/questions/4226816/reading-settings-from-app-config)

如果您没有 app.config，您只需`maxNumberListOfValues`在解决方案中设置为全局变量，例如，在您的所有表单/页面继承的基本文件中。

# c++ - 为什么指针返回值而不是地址？

> ID：15900615
> 
> 赞同：0
> 
> 时间：2013-04-09T11:26:54.180
> 
> 标签：c++, string, pointers, c-str

这段代码：

```
string  str1 ( "Hello world" );
const char *c_str1 = str1.c_str ( );
cout << "The C-style string c_str1 is: " << c_str1 
```

生成此输出：

```
The C-style string c_str1 is: Hello world 
```

我不明白。

`c_str1`是指针，对吧？因此，`c_str1`应该返回一个地址，并且只`*c_str1`应该给出位于该地址的值。但是，在上面的示例`c_str1`中给出了值（而不是地址）。

我有什么误解？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T11:28:49.577

这是因为它的`std::cout::operator <<`定义方式——它有一个重载，它接受 a`const char*`并打印它指向的字符串。如果你想要地址，你必须投到`void*`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T11:29:53.523

“我误会了什么？” `<<`上的定义`char const*`。指针是按值传递的，但 的定义 `operator<<( std::ostream&, char const* )`指定它将指针视为`'\0'`终止字符串的开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T11:30:39.907

该变量`c_str1`是指向字符串中第一个字符的指针。`&c_str1`是指向的指针`c_str1`（即指向指针的指针）。`*c_str1`是指向的位置的值`c_str1`（即只有一个字符）。

输出运算符有一个重载，它接受一个指向字符（是什么`c_str1`）的指针并将其打印为字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T11:29:14.600

[for](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2)有一个[重载`ostream& operator<<``const char*`](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2)，它假定指针指向[空终止字符串](http://en.wikipedia.org/wiki/Null-terminated_string)中的第一个字符，并打印整个字符串。

您可以在此处不应该应用的地方看到此假设的示例：

```
#include <iostream>

int main()
{
  char c = 'x'; // not a null terminated string
  std::cout << &c << std::endl; // will write until it finds a 0 (really UB)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T11:29:22.273

`operator<< (ostream, char*)`该标准指定了输出存储在指针中的字符串的重载。换句话说，`c_str1`确实是一个指针，但输出流将它解释为它指向的字符串。

要输出指针值，请将其转换为`void*`：

```
cout << "The C-style string c_str1 is: " << static_cast<void*>(c_str1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T11:30:19.893

cout 运算符<< 将指向 char 的指针解释为 C 字符串。

# gnuplot - Gnuplot：如何创建多个 x 标签

> ID：15900620
> 
> 赞同：0
> 
> 时间：2013-04-09T11:27:09.770
> 
> 标签：gnuplot

使用 Gnuplot 是否可以在一个图中有多个 x 标签？

我的数据文件如下所示：

```
A dog 10
A cat 20
A fish 14
B dog 15
B cat 44
B fish 5 
```

所需的输出，例如：

```
dog | cat | fish | dog | cat | fish
       A         |        B 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:00:38.127

不完全符合您的要求，但如果您的数据格式如下：

*文件*

```
Label     dog   cat   fish
A         10    20    14
B         15    44     5 
```

你可以非常接近：

```
set yrange [0:50]
set style data histogram
plot for [col=2:4] 'infile' using col:xtic(1) title columnheader fs solid .3 
```

![plot 命令的结果](https://i.imgur.com/uzxL18i.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:25:03.867

假设您的数据文件格式在您的控制之下，您可能希望将数据文件更改为如下所示：

```
dog 10 15
cat 20 44
fish 14 5 
```

以下脚本应该为您提供所需的内容：

```
set style histogram cluster gap 2
set boxwidth 1.5
unset xtics
set ytics
set auto y
plot newhistogram "A", 'data.dat' using 2:xtic(1) \
newhistogram "B", '' u 3:xtic(1) 
```

# c# - .NET 应用程序在以前由 Windows 服务启动时无法运行外部进程

> ID：15900623
> 
> 赞同：0
> 
> 时间：2013-04-09T11:27:19.740
> 
> 标签：c#, .net, windows, service, external-process

我有一个具有提升的用户权限（=以管理员身份运行）的 C# WInForms 客户端和一个 Windows 服务，如果用户意外退出客户端，它会自动重新启动该客户端。

如果客户端由用户启动，则一切正常。如果客户端是由服务（**LocalSystem**帐户）启动的，它不会按预期工作。

客户端应该调用名为**gemcom**的第 3 方可执行文件，而后者又调用另一个名为 ruby​​link 的可执行**文件**。对 Gemcom 的调用按预期工作，对 ruby​​link 的调用没有——***但只有当客户端先前由 Windows Service 启动时***。

```
Case 1: Client is started by User
A) client.exe is running in *John* account
B) gemcom.exe is called (runs in John account)
C) rubylink.exe is called (runs in John account)
--> OK!

Case 2: Client is started by Service
A) client.exe is running in SYSTEM account
B) gemcom.exe is called (runs in SYSTEM account)
C) rubylink.exe cannot be called
--> FAIL! 
```

**这里重要的是 gemcom（根据错误消息）可以看到 ruby​​link.exe 但它不能用它做任何事情，即它不能与它通信。**

我对 gemcom 到 ruby​​link 的调用没有影响。这些都来自第 3 方供应商。这两个是在 1999 年用 C++ 编写的。

我在 Wind7/8 和 XP 上都观察到了这种行为。

有人会知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:42:18.907

这可能是一个安全问题 - 如果您以用户身份运行服务会发生什么。如果这可行，那么问题就很明显了——LocalSystem 没有以足够的权限启动客户端来访问 ruby​​link 可执行文件。无论是因为对 ruby​​link exe 的权限还是因为 LocalSystem 没有网络权限来进行调用，您都必须检查（在事件日志或调试日志中收到任何错误消息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:42:48.360

此类问题的最常见原因是会话零隔离。但是由于这是在 Vista 中引入的，并且您在 XP 中遇到了问题，我们可能可以排除这种情况。

然后将用户作为最可能的解释。从 LOCALSYSTEM 帐户运行程序时失败是很常见的。程序失败的原因有很多。来自失败程序的诊断将引导您进行解释。

在任何情况下，您都不应该使用 LOCALSYSTEM 帐户。至少 10 年以来，Microsoft 的官方政策一直是，您不应该使用 LOCALSYSTEM 帐户来提供服务。我建议您在专门为其创建的用户帐户下运行您的服务。但在短期内，要测试理论，只需使用测试机器上的现有帐户之一即可。

如果这解决了眼前的问题，那么您仍然可能会在实现该功能的操作系统上遇到会话零隔离问题。

# c# - 每个字符输入的 WPF 文本框 OnSourceUpdate

> ID：15900624
> 
> 赞同：0
> 
> 时间：2013-04-09T11:27:27.790
> 
> 标签：c#, wpf, binding

我有一个带有文本框的 wpf 窗口和视图模型中名为 Val 的属性

```
<Textbox Binding={Path=Val, Mode=TwoWay, NotifyOnSourceUpdated=true, NotifyOnTargetUpdated=true}> 
```

问题是 val 仅在控件失去焦点时才更新，而不是针对我输入的每个字符。

任何人都知道如何为文本框中的每个输入更新 Val？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:39:44.850

只需使用以下

```
<Textbox Binding={Path=Val, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}> 
```

TextBox的默认`UpdateSourceTrigger`值为`LostFocus`. 如果您将其设置为`PropertyChanged`，它将在您更改的每个 Char 上触发。

# c# - 在 WPF 后面的代码中创建情节提要

> ID：15900627
> 
> 赞同：26
> 
> 时间：2013-04-09T11:27:42.400
> 
> 标签：c#, .net, wpf, animation, eventtrigger

以下代码工作正常。

```
<Window.Triggers>
    <EventTrigger RoutedEvent="Window.Loaded">
        <BeginStoryboard>
            <Storyboard>
                <DoubleAnimation Duration="0:0:.8" Storyboard.TargetProperty="Left" From="1920" To="0" AccelerationRatio=".1"/>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</Window.Triggers> 
```

但是在这个`From`和`To`值是*静态*的。我需要动态传递基于系统分辨率的值。所以我需要在后面的代码中创建它。有可能吗？

如何将其转换为代码隐藏？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-09T11:56:35.103

在代码中工作时，您真的不需要故事板，只需要基本事物的动画，就像您在问题中显示的那样。我做了一个小样本来展示它的工作原理。

这是主窗口背后的完整代码：

```
namespace WpfCSharpSandbox
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            WidenObject(150, TimeSpan.FromSeconds(1));
        }

        private void WidenObject(int newWidth, TimeSpan duration)
        {
            DoubleAnimation animation = new DoubleAnimation(newWidth, duration);
            rctMovingObject.BeginAnimation(Rectangle.WidthProperty, animation);
        }
    }
} 
```

这是 XAML 的样子：

```
<Window x:Class="WpfCSharpSandbox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sandbox" Height="350" Width="525">
    <Grid Background="#333333">
        <Rectangle x:Name="rctMovingObject" Fill="LimeGreen" Width="50" Height="50"/>
    </Grid>
</Window> 
```

把它放在一个 WPF 应用程序中，看看它是如何工作的，试验它并尝试其他动画/属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:47:26.763

添加 djerry 的注释示例代码如下所示：

```
var anim = new DoubleAnimation {
                                From = 1920, 
                                To = 1, 
                               };

wnd.BeginAnimation(Window.LeftProperty, anim); 
```

并且您必须在窗口加载的事件处理程序中拥有此代码。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-26T16:28:43.943

问题的示例代码是关于动画`Window.Left`属性的，我正在寻找确切的情况，但给定的答案仅适用于一次性用例。
具体来说：如果动画已经执行，然后通过拖放手动移动窗口，则相同的动画过程将无法按需要再次运行。动画将始终使用最近动画运行的结束坐标。
所以如果你移动了窗口，它会在开始新动画之前跳回来：

[https://imgur.com/a/hxRCqm7](https://imgur.com/a/hxRCqm7)

要解决该问题，需要`AnimationClock`在动画完成后从动画属性中删除任何内容。

这是通过使用`ApplyAnimationClock`or `BeginAnimation`with`null`作为第二个参数来完成的：

```
public partial class MainWindow : Window
{
    // [...]

    private void ButtonMove_Click(object sender, RoutedEventArgs e)
    {
        AnimateWindowLeft(500, TimeSpan.FromSeconds(1));
    }

    private void AnimateWindowLeft(double newLeft, TimeSpan duration)
    {
        DoubleAnimation animation = new DoubleAnimation(newLeft, duration);
        myWindow.Completed += AnimateLeft_Completed;
        myWindow.BeginAnimation(Window.LeftProperty, animation);
    }

    private void AnimateLeft_Completed(object sender, EventArgs e)
    {
        myWindow.BeginAnimation(Window.LeftProperty, null);
        // or
        // myWindow.ApplyAnimationClock(Window.LeftProperty, null);
    }
} 
```

XAML：

```
<Window x:Class="WpfAppAnimatedWindowMove.MainWindow"
        // [...]
        Name="myWindow"> 
```

结果：
[https ://imgur.com/a/OZEsP6t](https://imgur.com/a/OZEsP6t)

另请参阅[Microsoft Docs - HandoffBehavior Enum 的备注部分](https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.animation.handoffbehavior#remarks)

# javascript - 页面源可以包含 JavaScript 内容吗？

> ID：15900631
> 
> 赞同：0
> 
> 时间：2013-04-09T11:27:53.093
> 
> 标签：javascript

有没有办法在普通页面源中查看 javascript 文件的全部内容？我的 javascipt 文件包含许多链接，当我执行普通页面源时，我希望这些链接可见？谁能建议我如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:31:16.570

好吧，一方面，您可以将脚本嵌入页面中。

而不是`<script src="abc.js"></script>`，请执行以下操作：

```
<script>
//Full contents of abc.js here
</script> 
```

不过，我不明白你为什么要这样做。大多数开发人员工具都非常先进，您可以在旁边获得一个包含脚本的列表来检查（例如，Chrome 开发工具中的“源”选项卡）

# java - 打印/调试 GeoPoint 数组

> ID：15900636
> 
> 赞同：0
> 
> 时间：2013-04-09T11:28:11.840
> 
> 标签：java, android, arrays, debugging, printing

我有一个 GeoPoint 数组列表，如下所示：

```
ArrayList<GeoPoint> listOfPoints = new ArrayList<GeoPoint>(); 
```

我想将其打印出来以检查它是否正确包含我已解析到其中的点。我只能找到如何打印非 GeoPoint 数组，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:31:22.867

假设您插入的值如下

```
ArrayList<GeoPoint> listOfPoints = new ArrayList<GeoPoint>();
Double latitude = Double.parseDouble("48.89364");
Double longitude = Double.parseDouble("2.33623");       
GeoPoint oneP = new GeoPoint((int)(latitude*1e6),(int)(longitude*1e6));
listOfPoints.add(oneP);
... 
```

或者你把不同`Location`对象的值。

```
GeoPoint oneP = new GeoPoint((int) (loc.getLatitude() * 1e6), (int) (loc.getLongitude() * 1e6));
listOfPoints.add(oneP);
... 
```

迭代并在日志上打印的方式是：

```
 for(GeoPoint gp:listOfPoints){
        Log.w(this.getClass().getName()+", Latitude", String.valueOf(gp.getLatitudeE6()/1e6));
        Log.w(this.getClass().getName()+", Longitude", String.valueOf(gp.getLongitudeE6()/1e6));
    } 
```

`Log.w`是将其作为警告打印在 logcat 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:43:37.213

为此，请使用以下行：

```
System.out.println(array) 
```

# python - 是否可以在 Python 中打开 ljpg（无损 jpeg）文件？

> ID：15900642
> 
> 赞同：1
> 
> 时间：2013-04-09T11:28:27.960
> 
> 标签：python, image, jpeg, octave, spyder

有谁知道是否可以在 Python 中打开 ljpg（无损 jpeg）文件？（特别是我在 Windows XP 上使用 spyder）。

我在 Google、here 和 Python 文档上四处搜索，但什么也看不到。

如果不可能，我会尝试找出如何调用 Octave 来转换它，但如果我不必这样做，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:31:52.200

由于以下不起作用，请尝试使用此包装器： [http ://ebiznisz.hu/python-jpegtran/](http://ebiznisz.hu/python-jpegtran/)

似乎可以解决问题。

* * *

[http://www.pyglet.org/doc/api/pyglet.image-module.html](http://www.pyglet.org/doc/api/pyglet.image-module.html)
[http://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)

两者中的任何一个都应该能够。

```
from PIL import Image
im = Image.open("test.ljpg")
im.show() 
```

* * *

# spring - Bean 属性“firstName”不可读或具有无效的 getter 方法

> ID：15900646
> 
> 赞同：0
> 
> 时间：2013-04-09T11:28:35.530
> 
> 标签：spring

`ContactController`我在类文件中有以下方法

```
public ModelAndView listContacts() { 
    return new ModelAndView("contact", "contact", contactService.listContact()); 
} 
```

我在 JSP 中迭代这个列表：

```
<c:if test="${!empty contact}">
<table class="data">
    <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Telephone</th>
        <th>&nbsp;</th>
    </tr>
    <c:forEach items="${contact}" var="contact">
        <tr>
            <td>${contact.lastName}, ${contact.firstName}</td>
            <td>${contact.email}</td>
            <td>${contact.telephone}</td>
            <td><a href="delete/${contact.id}">delete</a></td>
        </tr>
    </c:forEach>
</table> 
```

但我收到以下错误：

> org.springframework.beans.NotReadablePropertyException：bean 类 [java.util.ArrayList] 的无效属性“firstName”：Bean 属性“firstName”不可读或具有无效的 getter 方法：getter 的返回类型是否与参数类型匹配二传手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:32:11.570

看来您喜欢让自己的生活变得困难 :-) 为什么您对不同的事物使用相同的名称。你有一个联系人列表，这个列表应该被命名`contacts`（复数形式：它是一个联系人列表），而不是`contact`. 然后在循环中，可以命名每个单独的联系人`contact`（单数形式：它是一个联系人实例）：

```
return new ModelAndView("contact", "contacts", contactService.listContact());

<c:forEach items="${contacts}" var="contact">
    <tr>
        <td>${contact.lastName}, ${contact.firstName}</td>
        <td>${contact.email}</td>
        <td>${contact.telephone}</td>
        <td><a href="delete/${contact.id}">delete</a></td>
    </tr>
</c:forEach> 
```

# salesforce - 使用 salesforce 和 openam 进行单点登录

> ID：15900649
> 
> 赞同：-1
> 
> 时间：2013-04-09T11:28:49.653
> 
> 标签：salesforce, single-sign-on, federated-identity, openam

嗨，我是 salesforce 和 openam 的新手，有人可以告诉我如何使用 salesforce 作为 SP 和 openam 作为 IDP 启动和详细实施单点登录（SP 和 IDP 启动）

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:22:45.510

你有没有看过...

[http://openam.forgerock.org/openam-documentation/openam-doc-source/doc/admin-guide/index/chap-federation.html#salesforce-as-sp](http://openam.forgerock.org/openam-documentation/openam-doc-source/doc/admin-guide/index/chap-federation.html#salesforce-as-sp)

? 当然，让自己熟悉 SAML2.0 规范会有很大帮助。

# c++ - 前向声明和友元函数

> ID：15900651
> 
> 赞同：1
> 
> 时间：2013-04-09T11:28:53.490
> 
> 标签：c++, namespaces, friend

如果我省略了这样的命名空间，请遵循这里的问题：

```
void f(window);

  class window{
    private:
    int a;
    friend void ::f(window);
  };

void f(window rhs){
  std::cout << rhs.a << std::endl;
} 
```

我得到奇怪的行为：

```
friend void f(window); 
```

编译时没有 f(window) 的前向声明，但是

```
friend void ::f(window); 
```

才不是：

```
error C2039: 'f' : is not a member of '`global namespace'' 
```

有人可以解释它的原因吗？为什么 :: 会产生这种差异，如果我们无论如何都在全局命名空间中......

谢谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:31:45.397

如果您在朋友声明中没有资格`f`，它的行为也像普通声明并`f`在周围的命名空间中声明（在您的情况下是全局的）。

但是，如果您明确地将其限定为`::f`，则它不再是 的声明`f`，而只是想要引用已声明的 朋友声明`f`。但是没有，因此错误。

# php - 如何在 Ubuntu 12.04 中使用终端创建 Netbeans PHP 项目？

> ID：15900655
> 
> 赞同：2
> 
> 时间：2013-04-09T11:29:03.307
> 
> 标签：php, netbeans, ubuntu-12.04

如何在 Ubuntu 12.04 中使用终端创建 Netbeans PHP 项目 例如，我们在 /home/username/sites/php_project_directory 下有一个 php 项目。通过使用 Netbeans GUI，我们可以通过选择目录轻松创建 PHP 项目。但是是否有任何命令可以让我们使用一些命令从终端创建项目，这样下次当用户打开 NetBeans 时，该项目已经创建，或者如果 Netbeans 已经打开，那么这个新创建的项目将开始反映在Netbeans 图形用户界面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:30:44.040

也许您可以复制现有项目并通过 sed 运行它以更改所有细节。

# php - 在 strtotime 和 date 函数中得到意外结果

> ID：15900662
> 
> 赞同：0
> 
> 时间：2013-04-09T11:29:16.573
> 
> 标签：php, date, strtotime

```
$selectedDate = "1365465600";
echo $selectedDate;//Output : 1365465600
echo date("Y-m-d",$selectedDate);//Output : 2013-04-09
echo strtotime(date("Y-m-d",$selectedDate));//Output : 1365445800 
```

为什么最后一条语句没有产生输出：`1365465600`。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:31:56.750

请尝试以下代码，您将得到准确的结果

```
$selectedDate = "1365465600";
echo $selectedDate;
echo date("Y-m-d H:i:s",$selectedDate);
echo strtotime(date("Y-m-d H:i:s",$selectedDate)); 
```

# hadoop - Hadoop 2 节点集群

> ID：15900668
> 
> 赞同：0
> 
> 时间：2013-04-09T11:29:40.803
> 
> 标签：hadoop, hdfs

是否需要2台linux机器来配置两个节点hadoop集群（即1主1从）。可以在单机上完成吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:32:11.813

是的，您可以在本地模式或伪分布式模式下运行，您不一定需要实际的机器集群。

见：[http ://hadoop.apache.org/docs/stable/single_node_setup.html](http://hadoop.apache.org/docs/stable/single_node_setup.html)

# python - Pandas set_option - 每行不止一个选项

> ID：15900670
> 
> 赞同：2
> 
> 时间：2013-04-09T11:29:47.333
> 
> 标签：python, pandas

这可能是一个愚蠢的问题，但是......

在导入熊猫后设置选项时，我一次设置一个，例如：

```
pd.set_option('max_rows',1000)
pd.set_option('notebook_repr_html',False) 
```

有什么方法可以尝试将它们结合起来。我尝试传递一个选项列表，但没有工作。

如果只有一种方法可以做到这一点，那就不是大问题了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T12:44:18.570

没有一种本地方法可以在一行上执行多个选项。我想你可以这样做：

```
[pd.set_option(option, setting) for option, setting in [('max_rows', 1000), ('notebook_repr_html', False)]] 
```

*但我不建议这样做！*

我认为写这个速记更容易阅读，更简洁，更pythonic：

```
pd.set_option('max_rows',1000)
pd.set_option('notebook_repr_html',False) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-29T12:22:31.967

[几年后参加聚会....]

我知道这是一个老问题，但我发现自己经常寻找这个。

这是我基于上述[Andy Hayden](https://stackoverflow.com/a/15902262) 解决方案的解决方案。更具可读性并使用 python 3.X dict。

```
pd_options = {
'display.max_rows'    : 500,
'display.max_columns' : 500,
'display.width'       : 1000,
}

[pd.set_option(option, setting) for option, setting in pd_options.items()] 
```

# gnuplot - 从另一个文件中命名的文件中绘制数据

> ID：15900676
> 
> 赞同：0
> 
> 时间：2013-04-09T11:29:56.350
> 
> 标签：gnuplot

我正在尝试编写一个 gnuplot 脚本来绘制文件中的数据（那里没有问题），文件名在另一个文件中给出（我需要帮助）。我目前有以下内容：

```
set terminal pngcairo
set output 'interpolation.png'

plot 'output.txt' u 2:3 w lines, \
     'data_1.txt' w points 
```

按预期工作。但是，我生成了`output.txt`从`data_X.txt`（并插入数据）中获取值的数据文件。我的程序从中读取数据文件名`stdin`，因此我有一个输入文件，其中包含一次运行所需的所有数据。此输入文件的第一行是该运行的数据文件的文件名。

**有什么方法可以从同一个输入文件中获取文件名？如何？**

换句话说，给定一个绘图脚本`interpolation.gpt`、多个数据文件`data_X.txt`和一个输入文件`input.txt`，其中第一行命名其中一个`data_X.txt`文件，我可以`interpolation.gpt`使用名为 in 的数据文件`input.txt`而无需手动编辑这两个文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:00:46.623

您也可以在 gnuplot 中执行此操作：

```
datafile = system("head -1 output.txt")
plot 'output.txt' u 2:3 w lines, \
      datafile w points 
```

我认为反引号替换也可以：

```
datafile = "`head -1 output.txt`" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:09:16.457

最简单的方法可能是从另一个脚本调用 gnuplot，例如

```
#!/bin/bash

datafile=$(head -1 output.txt)

gnuplot << EOF
set terminal ...
set output ...
plot 'output.txt' u 2:3 w lines, \
     '$datafile' w points
EOF 
```

# c# - 在 IF-ELSE 语句中分配匿名

> ID：15900680
> 
> 赞同：1
> 
> 时间：2013-04-09T11:30:15.663
> 
> 标签：c#, linq, entity-framework, c#-4.0, anonymous-types

请考虑以下代码：

```
 var Final = result.OrderBy(p => p.AreaCode).ThenBy(p => p.PCode).Skip(PageSize * (PageNo - 1)).Take(PageSize);
  if (PageSize == 0)
  {
      Final = result.OrderBy(p => p.AreaCode).ThenBy(p => p.PCode);
  } 
```

因为匿名类型应该分配给一个表达式，所以我不能这样写：

```
 var Final ;
   if(PageSize > 0 )
   {
      Final =  result.OrderBy(p => p.AreaCode).ThenBy(p => p.PCode).Skip(PageSize * (PageNo - 1)).Take(PageSize);
   }
  else
  {
      Final = result.OrderBy(p => p.AreaCode).ThenBy(p => p.PCode);
  } 
```

我怎样才能更好地写出丑陋的代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:32:56.760

你可以让它变得更好，如下所示：

```
var Final = result.OrderBy(p => p.AreaCode).ThenBy(p => p.PCode);

if (PageSize > 0)
    Final = Final.Skip(PageSize * (PageNo - 1)).Take(PageSize); 
```

# c# - 在页面加载时从 Gridview 中删除行

> ID：15900681
> 
> 赞同：1
> 
> 时间：2013-04-09T11:30:17.700
> 
> 标签：c#, asp.net

`GridView`我想知道您是否可以从页面加载中删除一行。

我正在使用`Linq`和之后`Grid.DataBind();`

`Grid.Rows.[0].Remove();`会好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:33:14.287

你可以使用[`DeleteRow`](http://msdn.microsoft.com/en-in/library/system.web.ui.webcontrols.gridview.deleterow%28v=vs.100%29.aspx)

```
Grid.DeleteRow(0); 
```

这应该删除之后的行`DataBind`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:40:38.170

您可以在此之前执行此操作，`DataBind`
因为在 gridview 中绑定数据后会创建行。

所以你可以删除gridview行如下

```
int rowToDelete=5;
Gridview1.DeleteRow(rowToDelete); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:42:00.003

你不应该这样做！您应该在数据绑定之前选择要在网格中显示的实体字段。

为此，您可以将呈现给 GridView 的实体列表转换为 entityDto 列表，其中仅包含网格所需的字段！

# c# - 如何反序列化元素名称为列表编号的 XML？

> ID：15900687
> 
> 赞同：0
> 
> 时间：2013-04-09T11:30:31.757
> 
> 标签：c#, xml, deserialization

大家好消息！我遇到了一些棘手的 xml 的新问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
<osmp_txn_id>100500</osmp_txn_id>
<result>0</result>
<fields>
<field1 name="name">Ko Chu Bey</field1>
<field2 name="contract">777-1</field2>
...
<fieldN name="account">65000</fieldN>
</fields>
<comment>Result for round 1 of fight vs Pe Re Svet: 1:1</comment>
</response> 
```

我的问题是生成 xsd 的 ans cs 的内置实用程序为每个`fieldX`. 而且因为它们可能有`N`很多，所以在一个非常私密的地方会变得很痛苦。有没有办法将此 XML 中的对象反序列化为具有`field`对象数组的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:58:10.547

如果您在字符串中有 XML，您可以使用 Linq to XML 和名称的正则表达式来执行此操作：

```
var fieldElementNameRegex = new Regex(
    "^field[0-9]+$",
    RegexOptions.IgnoreCase | RegexOptions.Compiled);

var xml = XElement.Parse(xmlString);

var fieldElements = xml
    .Descendants()
    .Where(e => fieldElementNameRegex.IsMatch(e.Name.ToString()))
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:51:55.257

最好的解决方案是让您自己的`IXmlSerializable`实现来使用有问题的 xml。预先做会很麻烦，但从长远来看可能是值得的。

作为替代方案（我不会太强烈推荐它），您可以编写一个小技巧来反映默认序列化对象的属性 - 您解释的那个是由内置实用程序生成的。

例如，假设：

公共类字段 { 公共字符串名称；公共字符串值；}

```
public class response
{
  public Field field1;
  public Field field2;
  public Field field3;
  public Field field4;
  public Field field5;
  public Field field6;
  public Field field7;
  public string comments;
  public string osmp_txn_id;
  public string result;
} 
```

您可以定义以下“便利”类：

```
public class myResponse
{
  public string comments;
  public string osmp_txn_id;
  public string result;
  public List<Field> fields;
} 
```

这将是如何填充更方便的类：

```
myResponse ConvertFromResult(response target)
{
  var returnObject = new myResponse();

  var fields = target.GetType().GetFields().Where(f => f.FieldType == typeof(Field));
  returnObject.fields = (from f in fields
    let fp = f.GetValue(target) as Field
    where fp != null
    select fp).ToList();

  returnObject.comments = target.comments;
  returnObject.osmp_txn_id = target.osmp_txn_id;
  returnObject.result = target.result;

  return returnObject;
} 
```

这都是概念性的，因此您可能需要从这里开始“推出自己的”解决方案。另一种选择是使用扩展方法`IEnumerable<field>`为 xml 反序列化对象返回一个，如果您打算以非性能密集型方式使用它，这将是可行的。

```
public static class responseExtensions
{
  private static IEnumerable<Field> GetFields(this response target)
  {
    var fields = target.GetType().GetFields().Where(f => f.FieldType == typeof(Field));
    return from f in fields
           let fp = f.GetValue(target) as Field
           where fp != null
           select fp;
  }
} 
```

# android - KSOAP2 - 在另一个复杂对象中序列化复杂对象数组

> ID：15900688
> 
> 赞同：3
> 
> 时间：2013-04-09T11:30:31.633
> 
> 标签：android, marshalling, ksoap2, soap-serialization

我正在尝试通过 ksoap2 将复杂对象发送到 webmethod。IDE 执行 AndroidHttpTransport.call 命令时出现问题，它发送该错误；

> java.lang.RuntimeException：无法序列化：[webServiceClasses.movementItem@4123d840]

我将参数发送到下面的 webmethod；

```
[WebMethod]
        public TransferReturn ApplyVanToVanMovement(vanToVanMovement vMovement)
        {
            OracleConnection opCnn = new       OracleConnection(Settings.Instance.GetConnectionString());
            opCnn.Open();
            DBOperations dbOp = new DBOperations();

         .
         .
         .
        } 
```

这是我将参数发送到 webmethod 的代码；

```
public static TransferReturn ApplyVanToVanMovement(TransferReturn pTransferReturn, vanToVanMovement vMovement)
        throws Exception {

    String NAMESPACE = "http://tempuri.org/";
    String METHOD_NAME = "ApplyVanToVanMovement";
    String SOAP_ACTION = "http://tempuri.org/ApplyVanToVanMovement";
    String URL;
    if (Settings.instance().getDocNum().isApn == 0)
        URL = Settings.instance().getDocNum().WANIP + Settings.instance().getDocNum().WANTransferServiceUrl;
    else
        URL = Settings.instance().getDocNum().LANIP + Settings.instance().getDocNum().LANTransferServiceUrl;

    PropertyInfo pi = new PropertyInfo();
    pi.setName("vanToVanMovement");
    pi.setValue(vMovement);
    pi.setType(vMovement.getClass());
    Request.addProperty(pi);

    ArrayList<movementItem> alMi = vMovement.getItemCollectionField();

    for (int i = 0; i < alMi.size(); i++) {
        PropertyInfo pi2 = new PropertyInfo();
        pi2.setName("movementItem" + i);
        pi2.setValue(alMi.get(i));
        pi2.setType(movementItem.class);
        Request.addProperty(pi2);
    }

    /*
     * Set the web service envelope
     */
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(Request);

    envelope.addMapping(NAMESPACE, "vanToVanMovement", new vanToVanMovement().getClass());

    for (int i = 0; i < alMi.size(); i++) {
        envelope.addMapping(NAMESPACE, "movementItem" + i, movementItem.class);
    }

    MarshalDouble marshaldDouble = new MarshalDouble();
    marshaldDouble.register(envelope);

    AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);

    /*
     * Call the web service and retrieve result ... how luvly <3
     */SoapObject response = null;
    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        response = (SoapObject) envelope.getResponse();

    } catch (Exception e) {
        e.printStackTrace();
    }
    // (SoapObject) wsClass.InvokeMethodMarshal(pInfo);

    pTransferReturn = (TransferReturn) DBLayout.setSoapObjectToClass(response, pTransferReturn);
    return pTransferReturn;
} 
```

我的类，第一个是我发送的参数，第二个是第一个作为数组的属性（我用 Vector 而不是 ArrayList 尝试了同样的事情，没有任何改变。）；

```
public class vanToVanMovement implements WebServiceReturn {
private long companyIdField;

private long branchIdField;

private long createdUserIdField;

private long fromWarehouseIdField;

private long toWarehouseIdField;

private long representativeIdField;

private long routeIdField;

private long vehicleIdField;

private ArrayList<movementItem> itemCollectionField;

public vanToVanMovement() {

}

public long getCompanyIdField() {
    return companyIdField;
}

public void setCompanyIdField(long companyIdField) {
    this.companyIdField = companyIdField;
}

public long getBranchIdField() {
    return branchIdField;
}

public void setBranchIdField(long branchIdField) {
    this.branchIdField = branchIdField;
}

public long getCreatedUserIdField() {
    return createdUserIdField;
}

public void setCreatedUserIdField(long createdUserIdField) {
    this.createdUserIdField = createdUserIdField;
}

public long getFromWarehouseIdField() {
    return fromWarehouseIdField;
}

public void setFromWarehouseIdField(long fromWarehouseIdField) {
    this.fromWarehouseIdField = fromWarehouseIdField;
}

public long getToWarehouseIdField() {
    return toWarehouseIdField;
}

public void setToWarehouseIdField(long toWarehouseIdField) {
    this.toWarehouseIdField = toWarehouseIdField;
}

public long getRepresentativeIdField() {
    return representativeIdField;
}

public void setRepresentativeIdField(long representativeIdField) {
    this.representativeIdField = representativeIdField;
}

public long getRouteIdField() {
    return routeIdField;
}

public void setRouteIdField(long routeIdField) {
    this.routeIdField = routeIdField;
}

public long getVehicleIdField() {
    return vehicleIdField;
}

public void setVehicleIdField(long vehicleIdField) {
    this.vehicleIdField = vehicleIdField;
}

public ArrayList<movementItem> getItemCollectionField() {
    return itemCollectionField;
}

public void setItemCollectionField(ArrayList<movementItem> itemCollectionField) {
    this.itemCollectionField = itemCollectionField;
}

public Object getProperty(int index) {
    switch (index) {
    case 0:
        return companyIdField;
    case 1:
        return branchIdField;
    case 2:
        return createdUserIdField;
    case 3:
        return fromWarehouseIdField;
    case 4:
        return toWarehouseIdField;
    case 5:
        return representativeIdField;
    case 6:
        return routeIdField;
    case 7:
        return vehicleIdField;
    case 8:
        return itemCollectionField;

    default:
        return null;
    }
}

public int getPropertyCount() {
    return 9;
}

public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo pInfo) {
    switch (index) {
    case 0:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "companyIdField";
        break;
    case 1:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "branchIdField";
        break;
    case 2:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "createdUserIdField";
        break;
    case 3:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "fromWarehouseIdField";
        break;
    case 4:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "toWarehouseIdField";
        break;
    case 5:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "representativeIdField";
        break;
    case 6:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "routeIdField";
        break;
    case 7:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "vehicleIdField";
        break;
    case 8:
        pInfo.type = PropertyInfo.OBJECT_CLASS;
        pInfo.name = "itemCollectionField";
        break;

    default:
        break;
    }
}

public void setProperty(int index, Object obj) {
    switch (index) {
    case 0:
        companyIdField = Long.valueOf(obj.toString());
        break;
    case 1:
        branchIdField = Long.valueOf(obj.toString());
        break;
    case 2:
        createdUserIdField = Long.valueOf(obj.toString());
        break;
    case 3:
        fromWarehouseIdField = Long.valueOf(obj.toString());
        break;
    case 4:
        toWarehouseIdField = Long.valueOf(obj.toString());
        break;
    case 5:
        representativeIdField = Long.valueOf(obj.toString());
        break;
    case 6:
        routeIdField = Long.valueOf(obj.toString());
        break;
    case 7:
        vehicleIdField = Long.valueOf(obj.toString());
        break;
    case 8:
        itemCollectionField = (ArrayList<movementItem>) obj;
        break;

    default:
        break;
    }
}

public int getArrayNumber(String s) {

    int i = -1;

    if (s.equals("companyIdField"))
        i = 0;

    if (s.equals("branchIdField"))
        i = 1;

    if (s.equals("createdUserIdField"))
        i = 2;

    if (s.equals("fromWarehouseIdField"))
        i = 3;

    if (s.equals("toWarehouseIdField"))
        i = 4;

    if (s.equals("representativeIdField"))
        i = 5;

    if (s.equals("routeIdField"))
        i = 6;

    if (s.equals("vehicleIdField"))
        i = 7;

    if (s.equals("itemCollectionField"))
        i = 8;

    return i;
} 
```

}

```
public class movementItem implements WebServiceReturn {
private long itemIdField;

private long unitSetIdField;

private long unitIdField;

private long unitSetId2Field;

private long unitId2Field;

private double convFact1Field;

private double convFact2Field;

private double planQuantityField;

private double planQuantity1Field;

private double planQuantity2Field;

public movementItem() {

}

public long getItemIdField() {
    return itemIdField;
}

public void setItemIdField(long itemIdField) {
    this.itemIdField = itemIdField;
}

public long getUnitSetIdField() {
    return unitSetIdField;
}

public void setUnitSetIdField(long unitSetIdField) {
    this.unitSetIdField = unitSetIdField;
}

public long getUnitIdField() {
    return unitIdField;
}

public void setUnitIdField(long unitIdField) {
    this.unitIdField = unitIdField;
}

public long getUnitSetId2Field() {
    return unitSetId2Field;
}

public void setUnitSetId2Field(long unitSetId2Field) {
    this.unitSetId2Field = unitSetId2Field;
}

public long getUnitId2Field() {
    return unitId2Field;
}

public void setUnitId2Field(long unitId2Field) {
    this.unitId2Field = unitId2Field;
}

public double getConvFact1Field() {
    return convFact1Field;
}

public void setConvFact1Field(double convFact1Field) {
    this.convFact1Field = convFact1Field;
}

public double getConvFact2Field() {
    return convFact2Field;
}

public void setConvFact2Field(double convFact2Field) {
    this.convFact2Field = convFact2Field;
}

public double getPlanQuantityField() {
    return planQuantityField;
}

public void setPlanQuantityField(double planQuantityField) {
    this.planQuantityField = planQuantityField;
}

public double getPlanQuantity1Field() {
    return planQuantity1Field;
}

public void setPlanQuantity1Field(double planQuantity1Field) {
    this.planQuantity1Field = planQuantity1Field;
}

public double getPlanQuantity2Field() {
    return planQuantity2Field;
}

public void setPlanQuantity2Field(double planQuantity2Field) {
    this.planQuantity2Field = planQuantity2Field;
}

public Object getProperty(int index) {
    switch (index) {

    case 0:
        return itemIdField;
    case 1:
        return unitSetIdField;
    case 2:
        return unitIdField;
    case 3:
        return unitSetIdField;
    case 4:
        return unitSetId2Field;
    case 5:
        return unitId2Field;
    case 6:
        return convFact1Field;
    case 7:
        return convFact2Field;
    case 8:
        return planQuantityField;
    case 9:
        return planQuantity1Field;

    default:
        return null;
    }
}

public int getPropertyCount() {
    return 10;
}

public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo pInfo) {
    switch (index) {
    case 0:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "itemIdField";
        break;
    case 1:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "unitSetIdField";
        break;
    case 2:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "unitIdField";
        break;
    case 3:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "unitSetId2Field";
        break;
    case 4:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "unitId2Field";
        break;
    case 5:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "convFact1Field";
        break;
    case 6:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "convFact2Field";
        break;
    case 7:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "planQuantityField";
        break;
    case 8:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "planQuantity1Field";
        break;
    case 9:
        pInfo.type = PropertyInfo.LONG_CLASS;
        pInfo.name = "planQuantity2Field";
        break;

    default:
        break;
    }
}

public void setProperty(int index, Object obj) {
    switch (index) {
    case 0:
        itemIdField = Long.valueOf(obj.toString());
        break;
    case 1:
        unitSetIdField = Long.valueOf(obj.toString());
        break;
    case 2:
        unitIdField = Long.valueOf(obj.toString());
        break;
    case 3:
        unitSetId2Field = Long.valueOf(obj.toString());
        break;
    case 4:
        unitId2Field = Long.valueOf(obj.toString());
        break;
    case 5:
        convFact1Field = (double)Double.valueOf(obj.toString());
        break;
    case 6:
        convFact2Field = (double)Double.valueOf(obj.toString());
        break;
    case 7:
        planQuantityField = (double)Double.valueOf(obj.toString());
        break;
    case 8:
        planQuantity1Field = (double)Double.valueOf(obj.toString());
        break;
    case 9:
        planQuantity2Field = (double)Double.valueOf(obj.toString());
        break;

    default:
        break;
    }
}

public int getArrayNumber(String s) {

    int i = -1;

    if (s.equals("itemIdField"))
        i = 0;

    if (s.equals("unitSetIdField"))
        i = 1;

    if (s.equals("unitIdField"))
        i = 0;

    if (s.equals("unitSetId2Field"))
        i = 1;

    if (s.equals("unitId2Field"))
        i = 0;

    if (s.equals("convFact1Field"))
        i = 1;

    if (s.equals("convFact2Field"))
        i = 0;

    if (s.equals("planQuantityField"))
        i = 1;

    if (s.equals("planQuantity1Field"))
        i = 0;

    if (s.equals("planQuantity2Field"))
        i = 1;

    return i;
} 
```

这两个类实现 from ；

```
public interface WebServiceReturn extends KvmSerializable {

    public int getArrayNumber(String s);

} 
```

最后是我的编组方法，用于序列化双打；

```
 public class MarshalDouble implements Marshal {
    public Object readInstance(XmlPullParser parser, String namespace, String name,
                           PropertyInfo expected) throws IOException, XmlPullParserException {
        return Double.parseDouble(parser.nextText());
    }

    public void register(SoapSerializationEnvelope cm) {
        cm.addMapping("http://tempuri.org/", "double", Double.class, this);
    }

    public void writeInstance(XmlSerializer writer, Object obj) throws IOException {
        writer.text(obj.toString());
    }
} 
```

# parameters - 从带有参数的 bat 中调用 bat

> ID：15900691
> 
> 赞同：1
> 
> 时间：2013-04-09T11:30:36.713
> 
> 标签：parameters, vbscript, batch-file

```
 main.bat contains:
     cscript treat.vbs /a:"the name of file" 
```

REm：文件名包含很多空格

```
 treat.vbs contains:
     dim param: param_input=Wscript.Arguments.Named("a")
     msgbox param_input
     shell.run "second.bat" param_input & " " & ""myfile.out""

     second.bat contains:(just for purpose of test)
     echo %1
     echo %2 
```

运行 main.bat 时，msgbox 显示一个包含所有文件名的弹出窗口（包括文件名中包含的所有空格，而回显消息 echo %1 显示文件名被删减。

请问我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:48:20.373

您的问题似乎是“从带有参数的**vbs调用 bat”**

你变暗`param`但使用`param_input`

```
dim param: param_input=Wscript.Arguments.Named("a") 
```

您将 cmd 连接到 .run 是错误的：

```
>> s = "second.bat" param_input & " " & ""myfile.out""
>>
Error Number:       1025
Error Description:  Expected end of statement 
```

一种正确的方法是使用 ' 并将其替换为 " 以避免 VBScript 的 "" 在连接中转义：

```
>> param_input = "the name of file"
>> s = Replace("'second.bat' '" & param_input & "' 'myfile.out'", "'", """")
>> WScript.Echo s
>>
"second.bat" "the name of file" "myfile.out" 
```

有关讨论/其他方式，请参阅[How-To-Quote-Like-A-Pro](http://www.visualbasicscript.com/How-To-Quote-Like-A-Pro-m81189.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:52:17.620

您需要将参数括在双引号中，以使空格成为参数的一部分。而且您需要通过在 VBS 中将它们加倍来逃避这些双引号。

```
shell.run "second.bat """ & param_input & """ ""myfile.out""" 
```

我无法包含整个示例，因为您的代码甚至无法编译。

另请参阅[在 VBScript 中将引号添加到字符串的](https://stackoverflow.com/q/2942554/850848)问题。

# primefaces - Primefaces rowExpansion在primefaces 3.5中不起作用

> ID：15900694
> 
> 赞同：1
> 
> 时间：2013-04-09T11:30:48.290
> 
> 标签：primefaces, datatable, row

我正在尝试在我的数据表中使用 p:rowToggler 和 p:rowExpansion。它在 primefaces 3.2 上运行良好，最近我升级到 primefaces 3.5。从那时起它就不起作用了。以下是带有 roToggler 和 rowExpansion 的数据表

```
<p:datatable value="#{myBean.valueList}">
<p:column>
<p:rowToggler/>
</p:column>
<p:rowExpansion>
...
</p:rowExpansion>
</p:datatable> 
```

任何帮助，将不胜感激

谢谢

普拉文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-26T13:27:09.577

请尝试如下，

```
<p:dataTable var="education" 
             value="#{backingBean.schoolList}" 
             reflow="true"
             paginator="true" 
             sortMode="multiple" 
             emptyMessage="No records found."
             rows="#{backingBean.rowsPerPage}">

            <p:column headerText="Details" styleClass="Wid10">
                <p:rowToggler expandLabel="Show" collapseLabel="Hide" icon="ui-icon-close"/>
            </p:column>

            <p:column headerText="Center">
                <h:outputText value="#{education.centerName}"/>
            </p:column>

            <p:column headerText="Address">
                <h:outputText value="#{education.addr}" />
            </p:column>

            <p:rowExpansion>
                <p:outputLabel value="Course: " styleClass="FontBold" />
                <BR />
                <h:outputText value="#{education.course}" />
                <Br />
                <p:outputLabel value="Details: " styleClass="FontBold" />
                <BR />
                    <h:outputText value="#{education.details}" />
            </p:rowExpansion>
        </p:dataTable> 
```

# spring - 如何构建任何框架，使框架用户无需学习构建框架时使用的任何底层框架？

> ID：15900696
> 
> 赞同：0
> 
> 时间：2013-04-09T11:31:04.090
> 
> 标签：spring, frameworks

我参与构建提供金融、非金融移动服务的框架。

我们使用的底层技术是 Spring 3.2 框架，尤其是 Spring MVC。

现在 Spring MVC 通过注解的方式提供了许多功能。例如，创建控制器只需使用***@Controller***注解注解类即可。除此之外，还有更多的东西，如处理程序、适配器、异常解析器。

我的问题是。因为我已经利用了 Spring 框架，并且我知道如何使用 Spring 框架或通过可用的挂钩点进行自定义。我可能已经这样做了，但是我的框架用户呢。

我是否应该在 Spring 的上述产品上创建包装器，以便我的框架用户不需要了解或学习 Spring 框架？

例如，Spring 提供了注册异常处理程序以处理异常的灵活性，但为此我们需要为所需的异常处理程序创建 bean 条目，并且需要在异常解析器类中注册，他的工作是深入研究 Spring 细节以了解它们是如何提供的异常处理程序和所有这些东西。

他需要做的和我已经做的完全一样。

而不是我应该提供一些规定，以便用户可以为其异常处理程序定义 bean 条目并将其注册到我的框架提供的注册表中，而不是在 Spring 提供的 bean 类中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:35:16.597

你不应该试图隐藏 Spring。

无论你怎么努力，你的抽象都会泄漏，然后 API 用户无论如何都需要了解 Spring。

请参阅[http://www.joelonsoftware.com/articles/LeakyAbstractions.html](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:38:02.230

Spring 已经提供了所有这些特性，被广泛使用，有据可查，拥有蓬勃发展的社区等。

您应该直接公开它们，以便您的框架的用户可以轻松地适应您的框架。

# asp.net - Azure 启动任务中的 aspnet_compiler

> ID：15900697
> 
> 赞同：3
> 
> 时间：2013-04-09T11:31:10.470
> 
> 标签：asp.net, azure, azure-web-roles

有谁知道是否可以从 azure 角色启动任务中调用 aspnet_compiler 来强制就地预编译。（如果是作为前景/背景或简单任务？）

可能类似于：%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_precompile.exe -v / -p "F:\siteroot\0"

或者有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:48:34.177

是的，一旦你找到了编译器的正确路径，这应该可以工作，尽管我没有尝试过这种特定的方法。

我尝试过的另一种方法是[按照此答案中](https://stackoverflow.com/a/10620704/57428)`ClientBuildManager.PrecompileApplication`的说明使用。我尝试从内部调用它，但您可以将 C# 代码编译为 .NET 程序集并从 PowerShell 中使用它，或者只从 PowerShell 中调用 .NET 原语，如此处所述[，](https://stackoverflow.com/a/6813572/57428)然后从启动任务中调用它。`OnStart()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-25T15:19:48.473

启动任务是可能的，但其中一个问题是站点根路径是硬编码的，并且可能会发生变化。而是将以下内容添加到 RoleEntryPoint OnStart 方法：

```
 using (var serverManager = new ServerManager())
        {
            string siteName = RoleEnvironment.CurrentRoleInstance.Id + "_" + "Web";
            var siteId = serverManager.Sites[siteName].Id;
            var appVirtualDir = $"/LM/W3SVC/{siteId}/ROOT";  // Do not end this with a trailing /

            var clientBuildManager = new ClientBuildManager(appVirtualDir, null, null,
                                        new ClientBuildManagerParameter
                                        {
                                            PrecompilationFlags = PrecompilationFlags.Default,
                                        });

            clientBuildManager.PrecompileApplication();
        } 
```

# android - 传递带有意图的图像会导致“Binder Transaction 失败”，但仍能正确显示图像

> ID：15900699
> 
> 赞同：3
> 
> 时间：2013-04-09T11:31:20.893
> 
> 标签：android, android-intent, bitmap

**已修复
最后，我在最后一个活动上创建了位图，而不是通过解决问题的意图传递它。**

所以我正在拍摄图像和一些文本，然后将其放在图像上，然后我缩放位图并从中创建一个新位图。然后将带有意图的位图传递给下一个显示图像并提供将该图像保存到 sd 的选项的活动。

虽然我确实得到了失败的活页夹事务，这似乎是由于在意图之间传递了太多数据引起的，但是图像仍然可以很好地传递，所以我应该担心错误还是忽略它，因为它仍然可以正常工作？

我像这样创建/缩小位图

```
 strTop = txtTop.getText().toString();
    strButtom = txtButtom.getText().toString();
    combinedBitmap = BitmapFactory.decodeResource(getResources(), lstImages.get(index)).copy(Bitmap.Config.ARGB_8888, true);

    Paint paint = new Paint(); 
    paint.setStyle(Style.FILL);  
    paint.setColor(Color.RED); 
    paint.setTextSize(combinedBitmap.getHeight()/10); 
    paint.setTextAlign(Paint.Align.CENTER);

    Canvas canvas = new Canvas(combinedBitmap);
    canvas.drawText(strTop, (canvas.getWidth() / 2), paint.getTextSize()+10, paint);
    canvas.drawText(strButtom, (canvas.getWidth() / 2), combinedBitmap.getHeight()-paint.getTextSize()-10, paint);
    Intent intent = new Intent(this, SaveToSD.class);
    int width = combinedBitmap.getWidth();
    int height = combinedBitmap.getHeight();
    int newWidth = 400;
    int newHeight = 240;
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    Matrix matrix = new Matrix();
    matrix.postScale(scaleWidth, scaleHeight);
    Bitmap newbm = Bitmap.createBitmap(combinedBitmap, 0, 0, width, height, matrix,true);
    intent.putExtra("combinedBitmap", newbm);
    startActivity(intent); 
```

我用这段代码检索它：
`combinedBitmap = getIntent().getExtras().getParcelable("combinedBitmap"); imgView.setImageBitmap(combinedBitmap);`

# php - 将 JSON 从 AS3 发送到 PHP

> ID：15900702
> 
> 赞同：1
> 
> 时间：2013-04-09T11:31:24.190
> 
> 标签：php, json, actionscript-3, variables

我真的不知道出了什么问题。

我将 JSON 从 AS3 发送到 PHP：

```
var sendToPHPJson:String = com.adobe.serialization.json.JSON.encode(sqlResult);

myRequest = new URLRequest("http://xxx.pl/FlashFiles/Winebook/uploadToServer.php");
myLoader = new URLLoader;
myVariables = new URLVariables;
myVariables.firstProperty = sendToPHPJson;
myLoader.addEventListener(flash.events.Event.COMPLETE,onUploadingComplete);
myLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
myRequest.method = URLRequestMethod.POST;
myRequest.data = myVariables;
myLoader.load(myRequest); 
```

我的 PHP 正在接收：

```
<?php
include "XXX.php";
$json=$_POST['firstProperty'];
$data = json_decode($json);
$answe=$data[0]->wineName;
echo "answer='".$answe."'";
?> 
```

我收到答案=''。但是当我将 sendToPHPJson 硬编码为 PHP 时，答案具有很好的价值。

有什么问题？要改变什么？

*编辑：我做了一些搜索和重建代码：

AS3：

```
var url:String = "http://adres/uploadToServer.php";
var request:URLRequest = new URLRequest(url);
request.method = URLRequestMethod.POST;

var requestVars:URLVariables = new URLVariables();
requestVars.myObject = sendToPHPJson;
request.data = requestVars;

var loader:URLLoader = new URLLoader();
loader.addEventListener(flash.events.Event.COMPLETE,onUploadingComplete);
loader.load(request); 
```

PHP：

```
<?php
include "XXX.php";
ob_start();
var_dump($_POST['myObject']);
print_r($_POST);
$content = ob_get_contents();
ob_end_clean();
$wynik = json_decode($content);
echo $wynik;
?> 
```

而且我仍然没有得到任何数据：

```
private function onUploadingComplete(e:flash.events.Event):void
{
    trace("upload complete");
    trace(e.target.data);
    txtField.text = String(e.target.data);
    this.touchable = true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:01:11.253

它应该是

```
myRequest.data = myVariables; 
```

此外，AS3 内置 JSON 顶级类，无需使用 3rd 方库。下次检查 var_dump($_POST) 或浏览器网络信息，您的数据是如何发送的。

# .net - 为什么可以访问私有字段？

> ID：15900704
> 
> 赞同：0
> 
> 时间：2013-04-09T11:31:25.033
> 
> 标签：.net, oop, static

C＃。为什么可以访问私有字段？

```
internal class MyClass
{
   private int someInt;

   public static StaticMethod() 
   {
      new MyClass().someInt = 3;
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T11:32:20.517

**同一类**的所有实例都可以访问它。

可访问性是针对*类*的，而不是针对每个实例的。

# sql-server - 需要有关 SQL Server 2008 编程的帮助

> ID：15900710
> 
> 赞同：0
> 
> 时间：2013-04-09T11:31:40.383
> 
> 标签：sql-server

我对 SQL Server 2008 编程和尝试创建过程非常陌生。

好吧，要求是*“该过程根据输入参数返回数据，或者如果没有给出输入数据，它应该执行默认选择并返回所有符合条件的数据”*

我试过这样的东西-

```
CREATE PROCEDURE [dbo].[Proc_sampletestproc]
   (@testid int)
AS
BEGIN         
   SET NOCOUNT OFF;  ----I worked with Oracle PL/SQL and so do we need for mandatory this declarations 
```

在这里，我需要检查输入`testid`是否有值。如果它存在，我们有一个带有选择的案例，或者我们进行默认选择。

另外，我`SELECT`在表上放置了一个没有连接的直接。因为可能有保险，也可能没有保险，我怎么`JOIN`办？我的意思是语法 - SQL Server 中的语法完全不同。`OUTER JOINS``testid`

```
SELECT 
    T.TESTID, T.NAME, TI.INSURENAME 
FROM 
    testinsured ti, test t, testinsuredHistory tih
WHERE
    t.testid = ti.testid  -----This entry may be there or not IN THE testinsured TABLE
    AND tih.testinsuredid = ti.testinsuredid --A testid might have 2 Insurers whose history is stored here.
    AND TIH.STARTDATE IS NOT NULL
    AND TIH.ENDDATE IS NOT NULL     --TO CHECK ACTIVE DATES FOR COVERAGE 
```

另外，我想进行分组，`testid`以便名称出现一次，但相应地`InsuredPlanname`出现一次，是每个名称的两倍`Testid`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:31:01.680

```
if (@testid is not null)
begin
    /* ... */
end
else 
begin
    SELECT T.TESTID,T.NAME,TI.INSURENAME 
    FROM test t 
    left outer join testinsured ti on t.testid = ti.testid -----This entry may be there or not IN THE testinsured TABLE
    left outer join testinsuredHistory tih on ti.testinsuredid = tih.testinsuredid --A testid might have 2 Insurers whose history is stored here.
    where TIH.STARTDATE IS NOT null AND TIH.ENDDATE IS NOT NULL
    /* group by ... */
end 
```

# javascript - JavaScript 从输入中添加文本并将其移动 beetwen divs

> ID：15900711
> 
> 赞同：0
> 
> 时间：2013-04-09T11:31:43.993
> 
> 标签：javascript

再次newbee（我的第二个）问题：

我需要填写一个空列表

```
var todos = [
    {title:"Lorem ipsum 1",done:false},
    {title:"Lorem ipsum 2",done:true},
    {title:"Lorem ipsum 3",done:false},
    {title:"Lorem ipsum 4",done:true}
]; 
```

它需要生成如下 HTML：（我有两个 div：一组（完成：false），第二组（完成：true））

<------- 结果-------->

**Div 组（完成：假）**

Lorem ipsum 1 Lorem ipsum 3

**Div 组（完成：true）**

Lorem ipsum 2 Lorem ipsum 4

<------- /结果-------->

现在有趣的开始了。单击元素后，它需要将其移动到另一个 div。我需要一个提交表单，将输入添加到第一个 div。

向好的方向提供任何帮助或建议。我是 Js 的新手，所以不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:35:10.943

利用

```
document.getElementById(myDiv).innerHTML = someContent; 
```

# iphone - 从静态库捆绑

> ID：15900717
> 
> 赞同：3
> 
> 时间：2013-04-09T11:31:52.863
> 
> 标签：iphone, ios, ipad, cocoa-touch, cocoa

我已将一个子项目作为静态库添加到我的主项目中。

现在，在主项目上，我正在尝试加载子项目包中的内容。像这样的东西：

```
NSString *defaultStorePath =
[[NSBundle bundleForClass:[self class]] pathForResource:@"database" ofType:@"sqlite"]; 
```

但这是返回零......

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T16:38:06.727

A-live给出了答案，但他太谦虚了，无法在此处发布作为答案。

这是答案的链接 [http://www.galloway.me.uk/tutorials/ios-library-with-resources/](http://www.galloway.me.uk/tutorials/ios-library-with-resources/)

问题正是因为创建静态库时不包含资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:10:03.303

试试这样的..

```
 NSString *resourceBundlePath = [[NSBundle mainBundle]       
                   pathForResource:@"StaticLibrary" 
                                       ofType:@"bundle"];

    NSBundle *resourceBundle = [NSBundle bundleWithPath:resourceBundlePath]; 
```

现在，您可以将此 resourceBundle 用作静态库包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T16:10:55.097

我遇到了类似的问题，在我的情况下，甚至 bundleWithIdentifier 出于某种原因返回了 nil。如果没有其他工作，您可以随时尝试遍历所有文件，如下所示。这对我有用。

```
[self urlForResource:@"database.sqlite"];

// ...

- (NSURL *)urlForResource:(NSString *)resource
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSURL *directoryURL = [NSBundle bundleForClass:[self class]].bundleURL;
    NSDirectoryEnumerator *enumerator = [fileManager enumeratorAtURL:directoryURL includingPropertiesForKeys:nil options:0 errorHandler:^BOOL(NSURL *url, NSError *error) {
        return YES;
    }];

    for (NSURL *url in enumerator)
    {
        NSString *lastPathComponent = [[url absoluteString] lastPathComponent];
        if ([lastPathComponent isEqual:resource])
            return url;
    }
    return nil;
} 
```

# java - 使用计时器销毁/中断Java中的进程

> ID：15900718
> 
> 赞同：0
> 
> 时间：2013-04-09T11:31:56.477
> 
> 标签：java, multithreading, process, timer, runtime

嗨，我想知道如果进程经过了以毫秒为单位的预定义时间段，我如何使用计时器来销毁进程。

目前我有一个从运行时获取线程的方法

```
Runtime runtime = Runtime.getRuntime(); 
```

然后我创建单独的进程以使用运行时执行命令

```
 Process process = runtime.exec(comman); //where command is a string with a defined command 
```

然后我在调用之前处理正常/错误输出流：

```
 process.waitFor(); 
```

如果它还没有，这会等待进程终止。

我的问题是，我怎样才能在进程完成之前使用计时器来终止进程，即通过调用：

```
 process.destroy; 
```

基本上，如果该过程的工作时间超过一定时间，我想过早地销毁它。

如果由于过度运行而被破坏，我会抛出一个 InterruptedException。

有人告诉我，使用计时器是实现这一目标的最佳方式，但不确定是否是这种情况？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:38:39.550

尝试

```
 final Process p = ...
    final Thread mainThread = Thread.currentThread();
    Thread t = new Thread() {
        public void run() {
            try {
                Thread.sleep(1000);
                p.destroy();
                mainThread.interrupt();
            } catch (InterruptedException e) {
            }
        };
    };
    p.waitFor();
    if (mainThread.isInterrupted()) {
        throw new InterruptedException();
    }
    t.interrupt(); 
```

# javascript - 如何为展开的菜单添加类并在折叠后删除类

> ID：15900722
> 
> 赞同：0
> 
> 时间：2013-04-09T11:32:02.830
> 
> 标签：javascript, jquery, html

我尝试制作动态菜单列表，并且我有主菜单和子菜单，每个项目在项目名称前都有提供（+）号的子菜单。当我双击菜单项并且它可以工作时，我使用 addClass 添加（ - ），但是当我再次双击该项目时会折叠但（ - ）符号不会变为（ + ）。我的问题，如何使用 removeClass 在菜单折叠时删除（ - ）符号并将其更改为官方的（ + ）？

非常感谢。

CSS：

```
.openSign{
  background: url('images/open.png')no-repeat 0px  0px;
}
.closeSign{
  background: url('images/close.png')no-repeat 0px  0px;
} 
```

HTML：

```
<ul > 1
  <li class="navL1 openSign"> 1.1 
    <ul class="navL2 openSign"> 
      <li class="navL2 openSign"> 1.1.1
        <ul>
          <li class="navL3"><a>1.1.1.1 </a> </li>
          <li class="navL3">1.1.1.2 </li>
          <li class="navL3">1.1.1.3</li>
        </ul> 
```

JavaScript：

```
<script type="text/javascript">
       $(document).ready(function() {
                $(".navL2, .navL3").hide();
                $(".navL1").dblclick(function(e){
                    $(this).find('.navL2').slideToggle();
                    $(this).addClass("closeSign");   
              });
        });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:34:21.597

有一个`toggleClass`就像有一个`slideToggle`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:35:31.413

如果你使用`slideToggle`，你也应该使用[`toggleClass()`](http://api.jquery.com/toggleClass/)（而不是`addClass`）：

```
$(this).toggleClass("closeSign")
  .find('.navL2').slideToggle(); 
```

# c# - c#中如何根据属性进行排序

> ID：15900723
> 
> 赞同：0
> 
> 时间：2013-04-09T11:32:05.540
> 
> 标签：c#, linq, xmlwriter

我在 c# 中有以下代码，我正在尝试生成 xml。

```
foreach (Component compCategories in categories)
{
    GenerateXML(xml, compCategories);
}

private void GenerateXML(XmlWriter xml, Component compCategory)
{
    xml.WriteStartElement("category");

    xml.WriteAttributeString("id", compCategory.Id.ItemId.ToString()); 
```

## 字符串顺序 = compCategory.Title；

```
 xml.WriteAttributeString("order", order);
    Component detailCategory = compCategory.ComponentValue("Detail");
    if (detailCategory != null)
    {
        xml.WriteAttributeString("detail", detailCategory.Id.ItemId.ToString());
    }
    Component catArtwork = compCategory.ComponentValue("Artwork");
    if (catArtwork != null)
    {
        Component summaryArtwork = catArtwork.ComponentValue("Summary");
        if (summaryArtwork != null)
        {
            String CatImageUrl = PublishBinary(summaryArtwork);
            xml.WriteAttributeString("image", CatImageUrl);
        }
    }
    xml.WriteElementString("title", compCategory.StringValue("Title").ToString());
    xml.WriteElementString("summary", compCategory.StringValue("Summary").ToString());
    xml.WriteElementString("linktext", compCategory.StringValue("Linktext").ToString());
    xml.WriteEndElement();
} 
```

如何根据“order”（上面突出显示）属性值对 xml 渲染进行排序，我不打算使用 XSLT，但是 LINQ 很好。

请推荐！！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:38:57.503

您可以在生成 XML 之前对您的集合进行排序吗？

```
var ordered = categories.OrderBy(cat=>cat.Title);
foreach (Component compCategories in ordered)
{
    GenerateXML(xml, compCategories);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:38:48.210

在调用 Generatexml() 之前对列表进行排序：

```
foreach (Component compCategories in categories.OrderBy(c => c.Title).ToList())
{
    GenerateXML(xml, compCategories);
} 
```

# php - 允许用户在没有 JS 的情况下选择

> ID：15900724
> 
> 赞同：0
> 
> 时间：2013-04-09T11:32:08.240
> 
> 标签：php, html, mysql

我想开发一种技术，允许用户从数据库中选择预设关键字并将它们添加到提交的表单中。如果我使用的是 JS，我知道我可以让他们输入一个关键字，它会以动态下拉菜单的形式弹出。

在不使用 JS 的情况下，是否有一种巧妙的技术可以实现这一点？

在运行中，我如何生成关键字供用户选择，无论他们想要多少。

我知道这是一个模糊的问题，但我相信有一种标准方法可以在非 JS 环境中实现这种类型的解决方案。

# php - 使用 PHP 跟踪 Google Analytics 的综合浏览量、事件、自定义变量？

> ID：15900731
> 
> 赞同：1
> 
> 时间：2013-04-09T11:32:18.023
> 
> 标签：php, google-analytics

我想知道使用**PHP 调用**（使用`POST`/ `GET`with`cURL`或其他方法）而不是 JavaScript 的 Google Analytics 跟踪（页面浏览量、事件、自定义变量）的方式（如果可能）。

问题是我们的客户想要跟踪一些无法使用 JavaScript 跟踪的特殊事件，或者我必须设置特殊（通常是无用的）`SESSION`变量来检查是否已设置，然后使用 JavaScript 跟踪并取消设置它们，这会导致在模板...

我看到一些 PHP[项目](http://code.google.com/p/php-ga/)应该提供这样的功能，但我希望它是纯 PHP 的，因为我不允许将这样的第三方项目集成到我的项目中。

所以我的问题是：**有没有办法从控制器中的 PHP 代码而不是模板中的 JavaScript 代码中跟踪 Google Analytics？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:46:19.880

php-ga 完全符合您的要求。URL 构建有很多变量来跟踪发送您自己的请求。如果您想深入研究并自己制作 - 您发布的库是一个非常好的地方，因为 URL 的各个部分很容易通过它周围的代码来解释。

# sql - 在将表分区到多个磁盘时保留时间跨度列的数据

> ID：15900734
> 
> 赞同：0
> 
> 时间：2013-04-09T11:32:29.987
> 
> 标签：sql, sql-server, partitioning

我需要将一个表分区为多个磁盘上的多个文件。下面是创建表。

我们面临的挑战是，在对这个巨大的表进行分区时，`ts`时间戳数据将丢失（将被覆盖为新的时间戳）。我怎样才能避免这种情况？

```
CREATE TABLE [dbo].[Audit](

       [Id] [uniqueidentifier] NOT NULL,

       [ObjectName] [varchar](150) NOT NULL,

       [IUD] [varchar](1) NOT NULL,

       [ts] [timestamp] NULL,

       [username] [varchar](150) NOT NULL,

       [IP] [varchar](50) NULL,

       [MAC] [varchar](50) NULL,

       [ChangeSet] [xml] NULL,

       [Key1] [varchar](50) NULL,

       [Key2] [varchar](50) NULL,

       [Date] [datetime] NULL,

CONSTRAINT [PK_Audith] PRIMARY KEY CLUSTERED

(

       [Id] ASC

)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:25:01.640

简短的回答是您不能写入时间戳。顺便说一句，rowversion 是新类型，时间戳已被弃用。如果您使用的版本支持新类型，您可能应该这样做。

如果您确实需要保留旧的 rowversion，可以将其保存在 varbinary 列中。但是，您不会知道该行在转换后是否已更新。我想您可以在表上放置一个触发器，以在转换后将更新的旧时间戳设为 NULL。然后你可以在 ISNULL(OLD_TS, TS) 上有一个计算列。单独列的额外开销和存储是否值得由您决定。

您还可以将转换时的新时间戳存储在单独的表中。您不能将它放在同一个表中，因为更新后触发器会增加时间戳，从而破坏存储原始时间戳的目的。并且 rowversion 在插入的伪表中不可用，而不是触发器（至少在 2008 v2 中，我已经尝试过）。但是，这意味着连接，如果您要进行分区，我怀疑我们正在谈论一个大型数据集。因此，我包含更多内容以警告您不要尝试通过触发器在表中存储转换时的 rowversion。

# javascript - 在早午餐上创建带有骨架的项目时出现 ENOTEMPTY 错误

> ID：15900742
> 
> 赞同：0
> 
> 时间：2013-04-09T11:33:08.437
> 
> 标签：javascript, git, build, command-prompt, brunch

我在windows上......当我用`brunch new projectname`它创建一个项目时，但是当我指定一个骨架时，我得到了这个错误：

```
c:\xampp-portable\htdocs>brunch new marionette --skeleton https://github.com/SimbCo/brunch-with-marionette.git
09 Apr 12:14:52 - log: Created skeleton directory layout
09 Apr 12:14:52 - error: { [Error: ENOTEMPTY, rmdir 'c:\xampp-portable\htdocs\marionette\.git\objects\00']
errno: 53,
code: 'ENOTEMPTY',
path: 'c:\\xampp-portable\\htdocs\\marionette\\.git\\objects\\00' } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T12:34:43.270

引用保罗米勒（[链接](https://github.com/brunch/brunch/issues/544#issuecomment-17293950)）：

> 只需克隆 git repo 并删除`.git`目录，然后执行`npm install`. 就是`brunch new`这样

这对我来说是:)

# c# - 为什么在 Windows 应用程序设置中会发生 System.IO.FileLoadException？

> ID：15900744
> 
> 赞同：0
> 
> 时间：2013-04-09T11:33:13.620
> 
> 标签：c#, winforms, visual-studio-2010, installation

我使用 c#.net(4.0) 和 SQLite 数据库制作了一个 Windows 应用程序。它在调试时运行良好，然后我创建了设置并安装了它，然后当我执行 .exe 时出现如下错误：

```
 System.IO.FileLoadException: Mixed mode assembly is built against version 
  'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without  
  additional configuration information. 
```

当我创建应用程序设置时-

在我的 app.config 中，代码是

```
<configuration>
<startup useLegacyV2RuntimeActivationPolicy="true">
<supportedRuntime version="v4.0"/>
</startup>
</configuration> 
```

并且数据库位于 [System.Environment.CurrentDirectory] ​​例如。bin\debug 目录，.exe 所在的位置。

我在创建设置时犯了什么错误，我需要在 SQLite 的情况下添加更多内容吗？

需要帮忙！！非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:34:37.737

您需要添加

```
<supportedRuntime version="v2.0"/> 
```

# html-agility-pack - HTML Agility Pack - 获取一个类的所有链接

> ID：15900747
> 
> 赞同：3
> 
> 时间：2013-04-09T11:33:24.950
> 
> 标签：html-agility-pack

我想获取某个类中的所有链接。

HTML的一个例子是

```
<tr>
<td>
    <a class="dn-index-link" href="/dailynotes/symbol/659/-1/e-mini-sp500-june-2013">
        ES M3
    </a>
</td>
<td>
    <a href="/dailynotes/symbol/659/-1/e-mini-sp500-june-2013">
        E-mini S&amp;P500 June 2013
    </a>
</td>
</tr> 
```

如果我想获取所有具有类 class="dn-index-link" 的链接

我的 XPath 和 HTML 敏捷代码是什么？

谢谢，威尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T12:05:25.073

控制台应用程序中的此类代码将转储所有 A 节点（在整个文档中的任何级别）的 HREF 属性的内容，其 CLASS 属性等于“dn-index-link”（[单击此处获取良好的 XPATH 教程](http://www.w3schools.com/xpath/)):

```
HtmlDocument doc = new HtmlDocument();
doc.Load("mytest.htm");

foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//a[@class='dn-index-link']"))
{
    Console.WriteLine("node:" + node.GetAttributeValue("href", null));
} 
```

# list - 创建一个形状数组 (N,N)

> ID：15900755
> 
> 赞同：1
> 
> 时间：2013-04-09T11:34:07.317
> 
> 标签：list, numpy

如何创建一个形状为 (120,120) 的 numpy 数组，前 7 个值为 0.924，其余值为 0.53。我需要这个作为 matplotlib 中的矩阵

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:42:02.993

最快的方法可能是创建一个空数组，用一个常量值填充它，然后更新几个需要更新的值：

```
>>> x = np.empty((120, 120))
>>> x.fill(0.53)
>>> x[0,:7] = 0.924
>>> x
array([[ 0.924,  0.924,  0.924, ...,  0.53 ,  0.53 ,  0.53 ],
       [ 0.53 ,  0.53 ,  0.53 , ...,  0.53 ,  0.53 ,  0.53 ],
       [ 0.53 ,  0.53 ,  0.53 , ...,  0.53 ,  0.53 ,  0.53 ],
       ..., 
       [ 0.53 ,  0.53 ,  0.53 , ...,  0.53 ,  0.53 ,  0.53 ],
       [ 0.53 ,  0.53 ,  0.53 , ...,  0.53 ,  0.53 ,  0.53 ],
       [ 0.53 ,  0.53 ,  0.53 , ...,  0.53 ,  0.53 ,  0.53 ]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:38:25.980

```
--> x = np.array([0.53]*(120*120)).reshape(120,120)
--> x[0,:7] = 0.924 
```

将第一行的前 7 个值填充为 0.924，交换索引中的 0 和 :7 以得到第一列中的前 7 个为 0.924

# mysql - 从 php-mysqld 更改为 php-mysqlnd

> ID：15900757
> 
> 赞同：0
> 
> 时间：2013-04-09T11:34:18.907
> 
> 标签：mysql, mysqlnd

我安装了`VPS`centOS 6.3，我想从更改`php-mysqld`为`php-mysqlnd`（本机驱动程序）以获得更好的性能。

但问题是我在服务器上有一个生产网站，其中包含一个巨大的数据库和安装了 phpmyadmin 来控制基于 Web 的 DB。现在我担心如果我删除 php-mysqld 并安装 php-mysqlnd 我将丢失数据库以及为它们创建的用户，我必须重新配置所有这些。

无论如何在此更改期间保留我的数据库、用户、配置...？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:06:06.840

实际上我发现它很容易完成，因为您只需更改驱动程序，无需更改。

一个简单的 yum erase php-mysqld 然后 yum install php-mysqlnd 并重新启动就可以了，您不需要任何备份或任何配置更改。

# postgresql - POSTGRES 外语

> ID：15900759
> 
> 赞同：0
> 
> 时间：2013-04-09T11:34:26.260
> 
> 标签：postgresql

我在将“ó,č,ĕ,ř”等外来字符直接插入数据库时​​遇到问题。即使使用我的 php 前端也不能确保没有转换或其他编码。所以我直接使用登录的 psql，这是我的设置：

```
server_encoding
-----------------
UTF8
(1 row) 
```

和

```
client_encoding
-----------------
UTF8
(1 row) 
```

数据库是：

```
 Name    |  Owner   | Encoding |   Collate   |    Ctype    |  
   my_db   | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
```

所以我想应该没有问题。

我创建了这个：

```
CREATE TABLE test (a text); 
```

现在我想插入一些文字

```
INSERT INTO TEST (a) ('ó'); 
```

并且有一条消息：

```
ERROR:  invalid byte sequence for encoding "UTF8": 0xf327293b 
```

请问有没有人可以帮助我？看起来它忽略了我的输入编码或者我真的不知道。

编辑 ：

我的终端配置

```
LANG=en_US.UTF-8
LANGUAGE=en_US:en
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

编辑2：

```
my_db=# \encoding
UTF8 
```

EDIT3：来自文件的 psql

文件

```
file -bi test
text/plain; charset=utf-8 
```

执行

```
ERROR:  syntax error at or near "'Ăł'"
LINE 1: INSERT INTO tes (a) ('Ăł'); 
```

编辑4：

```
set client_encoding='latin1'; 
```

这适用于 psql，但我需要它与 utf8 一起使用。我知道有可能我每次都使用这个设置与 mysql 数据库，它就像一个魅力。

我的 jdbc 驱动程序需要它是 UTF8。

编辑5：

这是我在这里做什么：[点击我](http://www.forumhistoriae.sk/podujatia)

在它存储之前我可以看到它 - 所以 php 工作正常 - 但之后当我从 DB 中读取它时我看不到它。那是因为我靠近 DB 进入 psql 看看发生了什么。看起来可能是服务器问题。服务器可能无法处理这些字符吗？

编辑6：

Tomcat 配置

```
 -Dfile.encoding=UTF8 
```

URI 编码也设置为 UTF8。哪里有这个问题？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:51:52.340

如果您的 shell 采用 latin1 编码，如注释中所示，这将解决它：

```
set client_encoding = 'latin1'; 
```

如果您不想更改客户端的系统编码，您可以更改默认值`postgresql.conf`

```
client_encoding = latin1 
```

或者更改 PHP 的默认字符编码：

```
default_charset = "utf-8"; 
```

在 Apache 或您使用的任何 http 服务器中执行此操作，配置：

```
AddDefaultCharset UTF-8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:03:43.530

根据您使用 PuTTY 的评论，默认为 latin-1。您需要将 PuTTY 配置为使用 UTF-8。除非您的 PuTTY 编码与环境声称的编码相匹配，否则仅设置服务器区域设置不会有任何好处。

打开腻子。在窗口设置标题下选择翻译子标题。将“远程字符集”设置为“utf-8”。在字体子选项卡中，确保您使用的字体具有合理的 Unicode 覆盖率。然后，在“会话”菜单中，在“保存的设置”文本输入框中输入名称，然后输入“保存”以将您的设置保存为配置文件。您可以通过选择“默认设置”配置文件并设置保存来覆盖它，但这会影响所有未来的连接和新配置文件，因此如果您使用其他不是 utf-8 的服务器，可能会导致混淆。

（这些说明基于我在 Fedora 18 上的 PuTTY；在最近的 Windows 版本中，UI 细节可能存在一些差异。如有疑问，请搜索如何设置 PuTTY 使用 utf-8。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:53:43.377

只是另一个调试测试（我仍然认为这是一个终端问题）：您可以在 UTF-8 编码文件中编写插入语句并尝试从文件中运行命令吗？例如：

```
psql my_db -U postgres -f <utf8-encoded-file> 
```

如果这工作正常，那么它会以某种方式回到终端......

# c# - Windows 服务和缓存

> ID：15900768
> 
> 赞同：4
> 
> 时间：2013-04-09T11:34:41.313
> 
> 标签：c#, caching, windows-services

我目前正在.net 4中开发一个windows服务。它连接到一个发送回我需要的信息的WS。我使用一个计时器：每隔 x 秒，服务会向网络服务询问信息。但是为了避免每次都访问 WS，我想将这些凭据存储在缓存中。

我用谷歌搜索并没有找到与 Windows 服务情况相关的任何内容（它总是与 ASP.NET 环境有关）。

我试过`MemoryCache`（从`ObjectCache`from `System.Runtime.Caching`）没有成功。这是我使用缓存的课程。

我是好方法还是完全错误？

```
public class Caching
{
    private const string CST_KEY = "myinfo";
    private const string CST_CACHENAME = "mycache";

    private MemoryCache _cache;

    public Caching()
    {
        _cache = new MemoryCache(CST_CACHENAME);
    }

    private CacheItemPolicy CacheItemPolicy
    {
        get
        {
            return new CacheItemPolicy
                {
                    SlidingExpiration = new TimeSpan(1, 0, 0, 0),
                    AbsoluteExpiration = new DateTimeOffset(0, 0, 1, 0, 0, 0, new TimeSpan(1, 0, 0, 0))
                };
        }
    }

    public bool SetClientInformation(ClientInformation client_)
    {
        if (_cache.Contains(CST_KEY))
            _cache.Remove(CST_KEY);

        return _cache.Add(CST_KEY, client_, CacheItemPolicy);
    }

    public bool HasClientInformation()
    {
        return _cache.Contains(CST_KEY);
    }

    public ClientInformation GetClientInformation()
    {
        return _cache.Contains(CST_KEY) ? (ClientInformation) _cache.Get(CST_KEY) : null;
    }
} 
```

`MemoryCache`好用的类吗？

在 [another post][1] 中，他们建议使用 ASP.NET Cache ( `System.Web.Caching`)，但在 Windows 服务中这似乎很奇怪，不是吗？

如果您能指导我一点，将不胜感激。

**编辑**

我改变`new DateTimeOffset(0, 0, 1, 0, 0, 0, new TimeSpan(1, 0, 0, 0))`了`new DateTimeOffset(DateTime.UtcNow.AddHours(24))` ~~没有区别~~ ***，它完美地工作***！

[1] [：.NET 的缓存（不在网站中）](https://stackoverflow.com/questions/1280165/caching-for-net-not-in-websites)*强调文本*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:52:42.973

试试这个。

```
cacheItemPolicy.AbsoluteExpiration = new DateTimeOffset(DateTime.UtcNow.AddHours(24)); 
```

基本上，您发送的是 0 年的绝对到期日期。鉴于文档说 DateTimeOffset 需要月份为 1-12，我不确定它是如何工作的。

您应该得到一个参数超出范围异常。？？？如果你去[这里](http://www.compileonline.com/compile_csharp_online.php)

并运行这个...

使用系统；

```
namespace Dela.Mono.Examples
{
   public class HelloWorld
   {
      public static void Main(string[] args)
      {
         Console.WriteLine(new DateTimeOffset(0, 0, 1, 0, 0, 0, new TimeSpan(1, 0, 0, 0)));
      }
   } 
```

你会得到以下异常。

```
Compiling the source code....
$/usr/local/bin/mcs /tmp/136548353410035/csharp136548353410035.cs 2>&1

Executing the program....
$mono /tmp/136548353410035/csharp136548353410035.exe 

Unhandled Exception: System.ArgumentOutOfRangeException: Argument is out of range.
Parameter name: Parameters describe an unrepresentable DateTime.
at System.DateTime..ctor (Int32 year, Int32 month, Int32 day, Int32 hour, Int32 minute, Int32 second, Int32 millisecond) [0x00000] in <filename unknown>:0 
at System.DateTime..ctor (Int32 year, Int32 month, Int32 day, Int32 hour, Int32 minute, Int32 second) [0x00000] in <filename unknown>:0 
at System.DateTimeOffset..ctor (Int32 year, Int32 month, Int32 day, Int32 hour, Int32 minute, Int32 second, TimeSpan offset) [0x00000] in <filename unknown>:0 
at Dela.Mono.Examples.HelloWorld.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

# java - 当底层模型元素过多时，JComboBox的弹出菜单填充空白值

> ID：15900771
> 
> 赞同：0
> 
> 时间：2013-04-09T11:34:48.840
> 
> 标签：java, swing, jcombobox, popupmenu, comboboxmodel

首先，让我讨论一下数据模型：

我在树状对象模型中编译了 HL7 定义，具有 3 个级别：段、元素和子元素。段包含一个列表，元素包含一个列表。它们之间的关系有点像“大陆-乡村-城市”

其次，我创建了一个由 3 个组合框组成的 GUI 组件，每个组合框都有不同的 ComboBoxModel 访问前面描述的对象模型。

我在 ComboBoxModel 上应用了观察者模式，以便每个模型都知道它必须访问哪个 List<>：
- HL7DefinitionElementModel 观察 HL7DefinitionSegmentModel
- HL7DefinitionSubelementModel 观察 HL7DefinitionElementModel

当您在第一个组合框（Segment）中选择一个值时，HL7DefinitionElementModel 会更新并存储已选择的 Segment。数据已正确存储。第一个值正确显示在“关闭”的 JComboBox 中。但是当您尝试打开该 JComboBox（元素）时，如果元素的数量太大（大约 12 个），则调用的弹出菜单中的项目为空白。

我很乐意发布任何代码。如果需要，我可以发送整个项目，但无法将其简化为 SSCEE。

编辑：这是问题的说明
（[http://imgur.com/AiJ8mu0](http://imgur.com/AiJ8mu0)）

编辑：这是一个 SSCCE：

```
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.Observable;
import java.util.Observer;
import java.util.Vector;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.event.ListDataListener;

public class Application extends JFrame {
  /**
   * 
   */
  private static final long serialVersionUID = -2517616123689799182L;

  public Application() {
    add(new HL7FieldSelector());
  }

  public static void main(String[] args) {
    Application a = new Application();
    a.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    a.setSize(new Dimension(400, 100));
    a.setVisible(true);
  }
}

class HL7FieldSelector extends JPanel implements ActionListener {
  /**
   * 
   */
  private static final long serialVersionUID = 6135074279269049773L;
  private JComboBox<HL7DefinitionSegment> segment;
  private JComboBox<HL7DefinitionElement> element;
  private HL7DefinitionSegmentModel segmentModel;
  private HL7DefinitionElementModel elementModel;

  public HL7FieldSelector() {
    segment = new JComboBox<HL7DefinitionSegment>();
    element = new JComboBox<HL7DefinitionElement>();

    segmentModel = new HL7DefinitionSegmentModel();
    elementModel = new HL7DefinitionElementModel();

    segmentModel.addObserver(elementModel);

    segment.setModel(segmentModel);
    element.setModel(elementModel);

    segment.addActionListener(this);
    element.addActionListener(this);

    initUI();
  }

  private void initUI() {
    this.setLayout(new GridLayout(1, 3));
    this.add(segment);
    this.add(element);
    this.setMinimumSize(new Dimension(500, 30));
    this.setPreferredSize(new Dimension(500, 30));
    this.setMaximumSize(new Dimension(500, 30));

    segment.setMaximumRowCount(10);
    element.setMaximumRowCount(10);
  }

  @Override
  public void actionPerformed(ActionEvent arg0) {
    setVisible(!isVisible());
    setVisible(!isVisible());
  }
}

class HL7DefinitionSegment implements Comparable<HL7DefinitionSegment>, Serializable {
  /**
   * 
   */
  private static final long serialVersionUID = 7922798285885405647L;
  private List<HL7DefinitionElement> elements;
  private String name;

  public HL7DefinitionSegment(String name, ArrayList<HL7DefinitionElement> elements) {
    this.name = name;
    this.elements = elements;
  }

  public HL7DefinitionSegment() {
    elements = new Vector<HL7DefinitionElement>();
  }

  public boolean addElement(HL7DefinitionElement element) {
    return elements.add(element);
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public List<HL7DefinitionElement> getElements() {
    return elements;
  }

  @Override
  public String toString() {
    return this.name;
  }

  @Override
  public int compareTo(HL7DefinitionSegment segment) {
    return name.compareTo(segment.getName());
  }
}

class HL7DefinitionElement implements Comparable<HL7DefinitionElement>, Serializable {
  /**
   * 
   */
  private static final long serialVersionUID = -5344721929162039227L;
  private String name;
  private String number;

  public HL7DefinitionElement(String name, String number) {
    this.name = name;
    this.number = number;
  }

  public HL7DefinitionElement() {
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public String getNumber() {
    return number;
  }

  public void setNumber(String number) {
    this.number = number;
  }

  @Override
  public String toString() {
    return number + " " + name;
  }

  @Override
  public int compareTo(HL7DefinitionElement element) {
    return number.compareTo(element.getNumber());
  }
}

class HL7DefinitionModel implements Serializable {
  /**
   * 
   */
  private static final long serialVersionUID = -8180582371776223436L;
  private List<HL7DefinitionSegment> segments;
  private static HL7DefinitionModel _instance;

  public HL7DefinitionModel(Vector<HL7DefinitionSegment> segments) {
    this.segments = segments;
  }

  public HL7DefinitionModel() {
    segments = new Vector<HL7DefinitionSegment>();
  }

  public boolean addSegment(HL7DefinitionSegment segment) {
    return segments.add(segment);
  }

  public List<HL7DefinitionSegment> getSegments() {
    return segments;
  }

  public void setSegments(List<HL7DefinitionSegment> segments) {
    this.segments = segments;
  }

  public static HL7DefinitionModel getInstance() {
    if (_instance == null) {
      _instance = new HL7DefinitionModel();

      for (int i = 0; i < 2; i++) {
        HL7DefinitionSegment s = new HL7DefinitionSegment();
        s.setName("SEG" + i);
        for (int j = 0; j < 20; j++) {
          s.addElement(new HL7DefinitionElement("" + j + j + j, "" + j));
        }
        _instance.addSegment(s);
      }
    }
    return _instance;
  }
}

class HL7DefinitionSegmentModel extends Observable implements javax.swing.ComboBoxModel<HL7DefinitionSegment> {
  private HL7DefinitionModel model;
  private HL7DefinitionSegment selectedItem;

  public HL7DefinitionSegmentModel() {
    this.model = HL7DefinitionModel.getInstance();
    this.selectedItem = getElementAt(0);
  }

  public void addListDataListener(ListDataListener l) {}
  public void removeListDataListener(ListDataListener l) {}

  @Override
  public HL7DefinitionSegment getElementAt(int index) {
    return model.getSegments().get(index);
  }

  @Override
  public int getSize() {
    return model.getSegments().size();
  }

  @Override
  public Object getSelectedItem() {
    return selectedItem;
  }

  @Override
  public void setSelectedItem(Object anItem) {
    this.selectedItem = (HL7DefinitionSegment) anItem;
    setChanged();
    notifyObservers();
  }
}

class HL7DefinitionElementModel extends Observable implements javax.swing.ComboBoxModel<HL7DefinitionElement>, Observer {
  private HL7DefinitionSegment segment;
  private HL7DefinitionElement selectedItem;

  public HL7DefinitionElementModel() {
    this.segment = null;
  }

  @Override
  public void update(Observable o, Object arg1) {
    if (o instanceof HL7DefinitionSegmentModel) {
      segment = (HL7DefinitionSegment) ((HL7DefinitionSegmentModel) o).getSelectedItem();
      setSelectedItem(getElementAt(0));
    }
  }

  public void addListDataListener(ListDataListener l) {}
  public void removeListDataListener(ListDataListener l) {}

  @Override
  public HL7DefinitionElement getElementAt(final int index) {
      return segment.getElements().get(index);
  }

  @Override
  public int getSize() {
    return (segment != null ? segment.getElements().size() : 0);
  }

  @Override
  public Object getSelectedItem() {
    return selectedItem;
  }

  @Override
  public void setSelectedItem(Object anItem) {
    this.selectedItem = (HL7DefinitionElement) anItem;
    setChanged();
    notifyObservers();
  }
} 
```

要重现错误：
- 启动应用程序
- 单击第二个组合框
- 单击第一个，选择选项 2
- 单击第二个组合框
- 注意列表如何为空

如果您这样做：
- 启动应用程序
- 单击第一个组合框，选择选项 2
- 单击第二个组合框
- 注意列表的填充方式

编辑：这是我发现的其他内容：只有在弹出菜单中的元素多于初始“填充”时，弹出菜单才为空白。也就是说，如果组合框在第一次选择中填充了 20 个元素，那么在下一次选择中，如果元素数量为 21 或更多，则弹出菜单将为空白，如果元素数量为 20 或更少，则显示。

# r - R：填充轮廓中的封闭区域

> ID：15900777
> 
> 赞同：1
> 
> 时间：2013-04-09T11:35:15.263
> 
> 标签：r, plot, contour

我在 R 中绘制了一个 knn 分类图，使用 plot 来绘制样本和轮廓以绘制对平面进行分类的线。

这是我的代码：

```
k<-1
datax<-rbind(matrix(rnorm(30,-1,5.25),15,2),matrix(rnorm(36,1,5.25),18,2))
datay<-rbind(matrix(1,15,1),matrix(0,18,1))
plot(datax[,1], datax[,2],pch = datay+1,axes=FALSE,ann=FALSE)
box()
n <- 1000
xp <- seq(length=n, from = min(datax[,1]), to = max(datax[,1]))
yp <- seq(length=n,from = min(datax[,2]) ,to = max(datax[,2]))
gr <- expand.grid(xp, yp)
library(class)
z <- as.numeric(knn(datax, gr, datay,k))-1
zM <- matrix(z, n, n, byrow = FALSE)
contour(xp, yp, zM, xlab="x",ylab="",nlevels = 1 ,lwd=2, add=TRUE, drawlabels =FALSE) 
```

我的问题是：如何为情节中的封闭区域着色？我尝试了filled.contour 但没有添加参数。我只想要分类器 = 0 白色的区域和分类 = 1 的蓝色区域。我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:00:15.647

代替`contour`，您可以使用`contourLines`来保留等高线边缘的坐标并用 绘制它们`polygon`。

```
plot(datax[,1], datax[,2],axes=FALSE,ann=FALSE, type="n")
box()
cL <- contourLines(xp, yp, zM,nlevels = 1)
lapply(cL,function(x)polygon(x$x,x$y,col="red"))
points(datax[,1], datax[,2],pch = datay+1) 
```

然而，到达绘图边缘的等高线并不完美（参见第二个绘图的左下角），因此需要一些手工调整：
![在此处输入图像描述](https://i.stack.imgur.com/abHsI.png)

**编辑**：在嵌套轮廓线的情况下，我认为没有一种简单的方法来处理它，但这是一种方法：

```
library(splancs)
ord <- sapply(lapply(cL,function(x)datay[inout(datax,cbind(x$x,x$y))]),
              median) #Check what values are present in the polygon and 
                      #take the most common one
plot(datax[,1], datax[,2],axes=FALSE,ann=FALSE, type="n")
box()
lapply(cL[ord==1],function(x)polygon(x$x,x$y,col="blue"))
lapply(cL[ord==0],function(x)polygon(x$x,x$y,col="white"))
points(datax[,1], datax[,2],pch = datay+1) 
```

![在此处输入图像描述](https://i.stack.imgur.com/mbE4r.png)

**第二次编辑：**当然也有可能`image`在你的情况下使用函数：

```
image(xp, yp, zM, col=c("transparent","blue"))
points(datax[,1], datax[,2],pch = datay+1) 
```

![在此处输入图像描述](https://i.stack.imgur.com/eLIKA.png)

# ember.js - 找不到嵌套 url：没有路由匹配的 URL

> ID：15900780
> 
> 赞同：0
> 
> 时间：2013-04-09T11:35:27.187
> 
> 标签：ember.js

Ember 向我显示以下错误：未捕获的错误：没有与 URL '/users' 匹配的路由

```
Sks.IndexRoute = Ember.Route.extend
  redirect: ->
    this.transitionTo 'users'

Sks.Router.map ->
  this.resource 'users', path: 'users/:user_id'

Sks.UsersRoute = Ember.Route.extend
  setupController: (controller, model) ->
    this.controllerFor('users').set 'content', Sks.User.find()
    this.controllerFor('currentUser').set 'content', Sks.CurrentUser.find 1
    this.controllerFor('top').set 'content', Sks.Top.find()
    this.controllerFor('hamsters').set 'content', Sks.Hamster.find() 
```

当我删除动态段时，一切正常。

版本：v1.0.0-rc.1-78-gd4e6a5c

编辑#1 添加了 IndexRoute

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:54:22.880

在 Ember 中，集合和项目实际上使用不同的路由。这是我的做法：

```
App.Router.map(function () {
    this.resource('contacts', { path: '/contacts' });
    this.resource('contact', { path: '/contact/:contact_id' });
});

App.IndexRoute = Ember.Route.extend({
    redirect: function () {
        this.replaceWith('contacts');
    }
});

App.ContactsRoute = Ember.Route.extend({
    model: function (params) {
        return App.Contact.find();  
    }
});

App.ContactRoute = Ember.Route.extend({
    model: function (params) {
        return App.Contact.find(params.contact_id);  
    }
}); 
```

这是一个[有效的 jsFiddle](http://jsfiddle.net/ekidd/VKewU/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:13:32.373

看来我应该有 RTM :)

```
Sks.Router.map ->
  this.resource 'users', ->
    this.resource 'user', path: ':user_id' 
```

# c# - 如何在数据网格视图中查看来自 MS Access 的数据？

> ID：15900784
> 
> 赞同：3
> 
> 时间：2013-04-09T11:35:40.007
> 
> 标签：c#, database-connection, ms-access-2007

我是 C-Sharp 的新手，我正在尝试从 C-Sharp 访问我的数据库，我编写了以下代码，但我不知道接下来要写什么来查看数据。我在网上搜索过这个，但没有得到太多。请用简单的代码告诉我。

```
string connection = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=F:\Database3.accdb";

OleDbConnection conn = new OleDbConnection(connection);
conn.Open();
OleDbCommand cmd = new OleDbCommand("Select * from score", conn);

OleDbDataAdapter da = new OleDbDataAdapter(cmd);
da.SelectCommand = cmd; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T11:39:36.750

**参考以下代码：**

```
string strProvider = "@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=F:\Database3.accdb";
string strSql = "Select * from score";
OleDbConnection con = new OleDbConnection(strProvider);
OleDbCommand cmd = new OleDbCommand(strSql, con);
con.Open();
cmd.CommandType = CommandType.Text;
OleDbDataAdapter da = new OleDbDataAdapter(cmd);
DataTable scores = new DataTable();
da.Fill(scores);
dataGridView1.DataSource = scores; 
```

希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:41:43.243

试试这个

```
 try
        {

        Dataset myDataSet=new Dataset();

        string connection = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=F:\Database3.accdb";
        OleDbCommand cmd = new OleDbCommand("Select * from score", conn);
        OleDbDataAdapter myDataAdapter = new OleDbDataAdapter(cmd );

        connection .Open();
        myDataAdapter.Fill(myDataSet,"TableName");

        }
        catch (Exception ex)
        {
              Console.WriteLine("Error: Failed to retrieve the required data from the DataBase.\n{0}", ex.Message);
              return;
        }
        finally
        {
              connection .Close();
        } 
```

请记住良好的编码习惯，始终应在**Try Block中打开连接并在****finally** Block 中关闭

# c++ - 如何在 Objective-C 中使用 C++ 库

> ID：15900788
> 
> 赞同：1
> 
> 时间：2013-04-09T11:35:45.923
> 
> 标签：c++, ios, libraries

Objective-C - 是属于 C 组语言的一种语言。

`C++`在这种情况下，我可以在我的 iOS 项目中使用任何库，对吗？

我怎样才能做到这一点？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:47:03.363

*   如果您希望将库的源代码集成到您的应用程序中，那么您的问题确实是[tilo](https://stackoverflow.com/users/184245/tilo)提到的[How can I use C++ with Objective-C in XCode](https://stackoverflow.com/questions/2683101/how-can-i-use-c-with-objective-c-in-xcode)

*   如果您希望使用已构建的库（例如`.so`文件），您需要：

    1.  创建你的 Xcode 项目
    2.  将库包含在您的资源中
    3.  将标题添加到您的项目中
    4.  在运行时加载库（见下面的代码）

.

```
 // 1\. Load library
    void *lib = dlopen("path/to/you/lib.so", RTLD_LAZY);

    // 2\. Handle errors (load failed)
    if (!lib) 
    {
        fprintf(stderr, "dlopen(): %s\n", dlerror());
        exit(EXIT_FAILURE);
    }

    // 3\. Get lib functions addresses
    any_library_function = (void *)GetProcAddress(lib, "any_library_function");

    // 4\. Use the functions
    any_library_function(…); 
```

***注意：****您可能需要将使用该代码的源文件从 重命名`.m`为`.mm`. 最好是在创建文件后直接在 Xcode 中执行此操作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:37:42.883

是的你可以。您的 C++ 库通过 C 链接公开绑定，您可以直接在 Objective-C 中使用，或者您可以使用 Objective-C++ 访问 C++ 绑定。

# spring - Spring、Hibernate、MySQL压力测试

> ID：15900789
> 
> 赞同：2
> 
> 时间：2013-04-09T11:35:50.413
> 
> 标签：spring, hibernate, c3p0

[在对我的 Web 应用程序进行压力测试时， Hibernate](http://en.wikipedia.org/wiki/Hibernate_%28Java%29)似乎无法再创建与数据库的连接。

Web 应用程序是使用[Spring](http://en.wikipedia.org/wiki/Spring_Framework) 3.0、Hibernate 3.6 和 c3p0 0.9.2.1 连接池开发的。它在[Tomcat](http://en.wikipedia.org/wiki/Apache_Tomcat) 7 下运行。DBMS 是 MySQL Server 5.5。所有事务都由 Spring 通过`@Transactional`注解管理。

以下是Hibernate/c3p0的一些设置

```
 <property name="acquireIncrement" value="5" />
    <property name="initialPoolSize" value="15" />
    <property name="minPoolSize" value="10" />
    <property name="maxPoolSize" value="75" />
    <property name="maxStatements" value="100" /> 
    <property name="maxIdleTime" value="600" />   
    <property name="checkoutTimeout" value="2500" /> 
    <property name="autoCommitOnClose" value="true" />
    <bean id="transactionManager"
      class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />      
    <property name="defaultTimeout" value="15" />
    </bean> 
```

这是 JDBC 连接 URL：

```
jdbc.url=jdbc:mysql://myserver:myport/mydb?connectTimeout=31000&socketTimeout=30000 
```

当我达到大约 200 个并发用户时，CPU 负载接近 100%（但连接池似乎仍低于 75），并出现以下异常：

```
 SEVERE: Cannot connect to database.
 org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.transaction.CannotCreateTransa
 ctionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.GenericJDBCException: Cannot open connec
 tion
         at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
         at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
         at com.my-company.SimpleConnetionLogFilter.doFilter(SimpleConnetionLogFilter.java:132)
         at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
         at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
         at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
         at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
         at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
         at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
         at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
         at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
         at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
         at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
         at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
         at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
         at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
         at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
         at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
         at java.lang.Thread.run(Unknown Source)
 Caused by: org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org
 .hibernate.exception.GenericJDBCException: Cannot open connection
         at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:596)
         at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
         at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
         at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
         at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
         at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
         at com.my-company.bizlogic.spring.XService$$EnhancerByCGLIB$$4e6a04f7.digest(<generated>)
         at com.my-company.XController.handleRequest(XController.java:55)
         at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
         at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
         at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
         at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
         ... 24 more
 Caused by: org.hibernate.exception.GenericJDBCException: Cannot open connection
         at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
         at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
         at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
         at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
         at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
         at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
         at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
         at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
         at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:551)
         ... 35 more
 Caused by: java.sql.SQLException: An attempt by a client to checkout a Connection has timed out.
         at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:118)
         at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:77)
         at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:687)
         at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:140)
         at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81)
         at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
         ... 39 more
 Caused by: com.mchange.v2.resourcepool.TimeoutException: A client timed out while waiting to acquire a resource from com.mchange.v2.resourcepool.BasicResourcePool@7624a28d -- timeout at awaitAvailable()
         at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1416)
         at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:606)
         at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:526)
         at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutAndMarkConnectionInUse(C3P0PooledConnectionPool.java:755)
         at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:682)
         ... 42 more 
```

我显然不明白的是，当池中的所有 75 个连接都被使用时会发生什么？

我认为下一笔交易将等待一个免费连接。

由于我已经为交易设置了*defaultTimeout*，我希望在这种情况下会发生这种情况。这种错误将在应用程序中进行管理，客户端将知道服务器正忙。但目前生成了一个通用的“服务器内部错误”，因为在 Tomcat 方面，MySQL 似乎不再可用，而不仅仅是忙。

此外，我是否在设置中遗漏了什么？我已经尝试提出一些 Hibernate/c3p0 和 JDBC 参数，但唯一的影响是我得到了一个不同的异常，总是与 JDBC 连接有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:28:48.043

我们在对我们的应用程序 (NON JTA) 进行简单的负载测试时发现了一个类似的问题。我们更改了连接释放模式，这解决了我们的问题。希望它对你有用：

休眠属性 hibernate.connection.release_mode=after_transaction

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:00:31.307

您设置了 c3p0 参数 checkoutTimeout ，并且您正在通过连接泄漏耗尽池，或者您只是非常努力地推动它们，因此某些客户端无法在 checkoutTimeout 期间获取连接。

处理方式：

1）确保您没有泄漏连接。尝试设置 unreturnedConnectionTimeout 和 debugUnreturnedConnectionStackTraces（见[这里](http://www.mchange.com/projects/c3p0/#configuring_to_debug_and_workaround_broken_clients)）

2）如果没有连接泄漏，请更好地配置您的 DataSource 以便它可以处理您的负载。首先，尝试增加[numHelperThreads](http://www.mchange.com/projects/c3p0/#numHelperThreads)，使其显着大于您正在运行的内核数量（因为这些线程通常与数据库在 IO 上保持一致）。接下来，尝试更大的 maxPoolSize。您还可以重新配置语句池。为简单起见，我会关闭它，直到您解决此问题（将 maxStatements 设置为零）。当连接池运行良好时，您可以将其重新打开，但 100 条语句很少能处理 200 条左右的连接，您将无效率地使用 PreparedStatements。考虑使用[maxStatementsPerConnection](http://www.mchange.com/projects/c3p0/#maxStatementsPerConnection)而不是 maxStatements。将其值设置为应用程序客户端经常使用的 PreparedStatements 的数量。

3) 如果您的 DataSource 仍然无法及时处理负载，请接受更长的[checkoutTimeout](http://www.mchange.com/projects/c3p0/#checkoutTimeout)（或将 checkoutTimeout 设置为零，以便客户端永远不会超时）。

不相关...您确定要将[autoCommitOnClose](http://www.mchange.com/projects/c3p0/#autoCommitOnClose)设置为 true 吗？

祝你好运！

# mongodb - 如何通过 Spring Data MongoDB 的 Mongo Java 驱动程序以编程方式克隆 mongodb 集合？

> ID：15900792
> 
> 赞同：1
> 
> 时间：2013-04-09T11:35:57.197
> 
> 标签：mongodb, spring-data-mongodb, mongo-java

在通过我的 Spring 控制器处理其中的所有条目之前，我想将一个集合克隆到一个备份集合。

在搜索中，我通过终端了解了各种方法。也可以使用 executeCommand 方法直接执行 mongodb 命令（在我的例子中是 copyTo 命令）。但同样，我找不到这样做的方法。

有人可以给我任何指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:19:01.567

您可以为您的项目设置 JMX 支持：[http](http://static.springsource.org/spring-data/data-document/docs/current/reference/html/) ://static.springsource.org/spring-data/data-document/docs/current/reference/html/ ，请参阅“第 10 章。JMX 支持”部分，您将能够要获得管理 MBean，MongoAdmin 将允许您执行管理操作，例如删除或创建数据库，并执行您的解决方案候选之一，例如执行 mongodump（[http://docs.mongodb.org/manual/reference/mongodump/ #cmdoption-mongodump--collection](http://docs.mongodb.org/manual/reference/mongodump/#cmdoption-mongodump--collection) ) 和 mongorestore( [http://docs.mongodb.org/manual/reference/mongorestore/#cmdoption-mongorestore--collection](http://docs.mongodb.org/manual/reference/mongorestore/#cmdoption-mongorestore--collection) ) 用于一个简单的集合，在恢复过程中你可以指定新的集合名称。

问候， 莫西

# prolog - Prolog 中的不同谓词，不起作用（始终为假）

> ID：15900800
> 
> 赞同：2
> 
> 时间：2013-04-09T11:36:43.397
> 
> 标签：prolog

我正在使用 SWI Prolog 为大学考试学习 Prolog，我对这个简单的程序有一些疑问，它实现了**不同**的谓词，如果两个元素不同（如果它们不匹配），则说 TRUE，如果它们匹配，则说 FALSE。

这是代码：

```
different(X,X) :- !,
              fail.

diferent(_,_). 
```

问题是，如果我尝试在 Prolog shell 中执行以下查询，我总是会得到 FALSE：

```
[debug] 10 ?- different(a,b).
false.

[debug] 11 ?- different(a,a).
false. 
```

如您所见，第一个查询必须说 TRUE，因为 a 与 b 不匹配

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T11:45:28.120

将不同的（_，_）更改为不同的（_，_）。即这是一个拼写错误。您的第二个谓词没有被检查，因为它与您的查询不匹配。

程序应该是

```
different(X,X) :- !,fail.
different(_,_). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-05T07:33:32.383

这种“锻炼”毫无意义。**使用[序言差异](/questions/tagged/prolog-dif "显示标记为“prolog-dif”的问题")！**

IMO**唯一**合理的定义`different/2`是：

```
different(A,B) :- dif(A,B). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T12:35:23.420

如果您使用 emacs 来编辑您的 prolog 文件（如果不是，我强烈建议您切换到它）我建议您使用 hi-lock-mode。只要光标在一个单词上，我就会以类似模式的方式突出显示文件中的所有匹配项。当您开发更大的项目时，它可以为您节省数小时的痛苦。

![在此处输入图像描述](https://i.stack.imgur.com/0reTV.png)

# c# - 如何在打印机中打印代码十六进制或十进制或二进制？

> ID：15900804
> 
> 赞同：0
> 
> 时间：2013-04-09T11:36:57.600
> 
> 标签：c#, binary, hex, special-characters, printers

我想执行一台打印机 epson TM-T88III 的命令。

更具体：

*   我想要打印符号€...打印机是 epson TM-T88III，它只是通用打印/txt
*   通过我的调查，我找到了一些解决方案，最可信的是这里[http://www.novopos.ch/client/EPSON/TM-U230/APG_Div_Printer.pdf](http://www.novopos.ch/client/EPSON/TM-U230/APG_Div_Printer.pdf)在最后几页

我的疑问是：我如何做到这一点？我如何通过 c# 将这些命令设置为打印机？我选择什么？十六进制？二进制？十进制？我很困惑！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:58:42.250

# ios - Tesseract - 为 iOS 编译：未创建库

> ID：15900806
> 
> 赞同：0
> 
> 时间：2013-04-09T11:37:13.370
> 
> 标签：ios, tesseract

我正在尝试根据这个[howto](http://tinsuke.wordpress.com/2011/11/01/how-to-compile-and-use-tesseract-3-01-on-ios-sdk-5/)为 iOS 编译 tesseract 。不幸的是，构建后“lib”文件夹为空，但我无法找出问题所在。

我正在使用 Xcode 4.6.1 和 iOS SDK 6.1。

我可以在输出中找到的最后一个错误是：

```
configure: error: leptonica library missing
make: *** No targets specified and no makefile found.  Stop. 
ar: creating archive libtesseract_all.a
ar: *.o: No such file or directory 
```

# php - 在mysql数据库中保存复选框

> ID：15900814
> 
> 赞同：1
> 
> 时间：2013-04-09T11:37:33.497
> 
> 标签：php, mysql, checkbox

我已经更新了我的代码。除非我一次选择更多选择框，否则它可以工作。例如，如果我同时选择 2 个选择框并更新它们，数据库会将它们都更新为 0。当我分别更新它们时，一切正常。

这是现在的代码：

```
<?php
include "header.php";

if($_SERVER['REQUEST_METHOD'] == 'POST')
{

    if(isset($_POST['aan']))
    {
        $doSave = implode(',',$_POST['aan']);
        mysql_query("UPDATE Modules SET 
            aan = '".mysql_real_escape_string('1')."'
            WHERE module_name IN ('".mysql_real_escape_string($doSave)."')") or die (mysql_error());

        mysql_query("UPDATE Modules SET 
            aan = '".mysql_real_escape_string('0')."'
            WHERE module_name NOT IN ('".mysql_real_escape_string($doSave)."')") or die (mysql_error());

    }
    elseif(!isset($_POST['aan']))
    {
        mysql_query("UPDATE Modules SET 
            aan = '".mysql_real_escape_string('0')."'
            WHERE module_name NOT IN ('".mysql_real_escape_string($doSave)."')") or die (mysql_error());
    }

    echo $doSave;

}

echo "<h1>Module beheer</h1>";

$getmodules = mysql_query("SELECT * FROM Modules") or die(mysql_error());

echo "<form id='module' method='post'>";
   while($modules = mysql_fetch_array($getmodules))
   {
        echo "<label>".$modules['module_name']."</label>";
        echo "<input type='hidden' name='module_name' value='".$modules['module_name']."' />";
        if($modules['aan'] == 1) 
        { 
            $set_checked = "CHECKED";
        }
        else
        {
            $set_checked = "";
        }

        echo "<input type='checkbox' name='aan[]' value=".$modules['module_name']." ".$set_checked." /><br />";
    }
   echo "<input type='submit' id='modulesubmit' name='modulesubmit' value='Opslaan'>";

echo "</form>";

include "footer.php";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:48:36.140

请开始使用 PDO 访问数据库！mysql_* 函数已弃用，不再维护！

`status`是 MySQL 中的保留关键字；使用它作为列名不是很聪明。您可以通过使用 backtiks 来避免它被用作关键字。但为避免混淆，我将采用另一个列名。比方说：`aan`。

让我们稍微清理一下您的代码。

您有许多行执行相同的“逻辑”；每当您在代码中多次编写某些内容时，就会出现问题。为什么在statu字段本身已经在模块行中时单独查询状态？

那么更新语句也一样吗？您只想将状态字段更新为 1|0。

```
if($_POST){
   if(intval($_POST['aan']) == 1 || intval($_POST['aan']) == 0){
     $aan = intval($_POST['aan']);
   }else{
     $aan = 0; //what if it's not 1|0
   }
   mysql_query("UPDATE Modules SET 
            aan = '".mysql_real_escape_string($aan)."'
            WHERE module_name = '".mysql_real_escape_string($_POST['module_name'])."'") or die (mysql_error());

)

    echo "<h1>Module beheer</h1>";

    $getmodules = mysql_query("SELECT * FROM Modules") or die(mysql_error());

    echo "<form id='module' method='post' action='*****add action parameter*****'>";
       while($m = mysql_fetch_array($getmodules)){
           {
           echo "<label name='module_name'>".$m['module_name']."</label>";
           echo "<input type='checkbox' name='aan' value='".$m['aan']."'>";
           }

       echo "<input type='submit' id='modulesubmit' name='modulesubmit' value='Opslaan'>";

    echo "</form>"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T11:48:01.360

您在提交表单时尝试**访问标签值**，但您无法访问您定义的标签值。您必须将代码更改为：

```
mysql_query("UPDATE Modules SET 
            Status = '".mysql_real_escape_string('1')."'
            WHERE module_name = '".mysql_real_escape_string($_POST['uitgeschakeld'])."'") or die (mysql_error());
            echo'bhal'; 
```

并在以下行中进行更改-

```
**echo "<input type='checkbox' id='ingeschakeld' name='ingeschakeld' value='.$fetchmodules['module_name'].' checked></br>";** 
```

# xslt - XSLT 无法将节点从特定位置到最后存储到变量中

> ID：15900816
> 
> 赞同：0
> 
> 时间：2013-04-09T11:37:43.197
> 
> 标签：xslt

我正在尝试将 XSLT 变量节点拆分为两个不同的节点。假设我在一个变量 Parent 中有超过 50 个节点。我想将前 50 个存储在一个变量（First50）中，其余节点存储到另一个变量（After50）中。

问题是我能够正确存储 First50。但是无法获得After50。

```
<xsl:variable name="check" select="count($Parent) - 50"/>

<xsl:if test="$check &gt; 0">

<xsl:variable name="First50" select="$Parent[position() &lt;= 50]"/>

<xsl:variable name="After50" select="$Parent[51 &lt;= position()]"/>

</xsl:if>

</xsl:variable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:50:20.280

您还可以在谓词中使用“1 to 50”和“50 to end()”

# sql-server - 分配给变量“User::de_sters”的值的类型与当前变量类型不同

> ID：15900818
> 
> 赞同：6
> 
> 时间：2013-04-09T11:37:46.453
> 
> 标签：sql-server, ssis

我有一个变量`de_sters`，一个字符串类型变量，它在我的 SSIS 包中定义，它的范围是 SSIS 包，我需要`fill`使用一个表中的几行的值，使用一个`Execute Sql Task`包。

底线是我有一个“执行 Sql 任务”包，在属性 - >“Sql 语句”中我写过：

```
declare @s varchar(max) = '' 
select @s =  case when @s <> '' 
                  then  @s + ',''' + employer_name + '''' 
                  else   @s + '''' + employer_name+ ''''
                  end 
from employers
select @s as Result 
```

然后，在`Result Set`我选择时`Single Row`（首先我运行了我的选择，我看到它只返回一行）。然后在选项卡`Result Set`（左侧）上，我在`Result Name`字段`Result`（我之前的 sql 语句的别名）中写了，在字段中`Variable Name`我写了`User::de_sters`.

但是当我运行 sql task 它给了我

```
The type of the value being assigned to variable "User::de_sters"
differs from the current variable type" error. 
```

任何帮助或提示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T12:35:51.967

问题是 SSIS 不理解`varchar(max)`为数据类型。您需要指定`limit`.Just 将`max`值更改为`8000`.

```
declare @s varchar(8000) = '' 
```

如果您的字符串非常大，则`varchar(max)`在查询中使用 FullResultSet 并将值存储在数据类型为 的变量中 `object`。

现在为了访问对象使用`Script task`或`Script component`（数据流）并编写以下代码以从`object`变量中提取值

```
OleDbDataAdapter oleDA = new OleDbDataAdapter();
DataTable dt = new DataTable();
oleDA.Fill(dt, Dts.Variables["User::YourVariable"].Value);
 foreach (DataRow rowLoop in dt.Rows)
     {
        MessageBox.Show (rowLoop[0].ToString());
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-02T04:50:38.870

要将其中的`varchar(max)`字段加载`SQL Script Tasks`到`Control flow`字符串变量中，您应该将其拆分为较小的块，例如。`varchar(4000)`并将它们加载到 a`object`中，然后在下一步中添加 a`foreach loop container`以将它们组合回一个`string`变量，

要将大文本拆分为小文本作为行，您可以使用以下存储过程：

```
CREATE PROCEDURE SSIS_VarcharMax_Loader 
     @Input varchar(max) ,
     @maxRowLength int = 50
 AS
 BEGIN
 SET NOCOUNT ON

 ;WITH 
     tmp(inp,c,rn) as (
              select @Input,SUBSTRING(@Input, 1,@maxRowLength),@maxRowLength
           union all
              select @Input,SUBSTRING(@Input,rn,@maxRowLength),rn + @maxRowLength
              from tmp
              where rn < len(@Input)
        )
      select c from tmp
      OPTION (MAXRECURSION 500);

 END; 
```

然后将以下表达式添加到由 foreach 容器包含的表达式任务中，并将它们连接回一个字符串，

```
@strResult = (ISNULL(@[User::strResult])?"": @[User::strResult] )+  @[User::str] 
```

![asd](https://i.stack.imgur.com/Zdfqk.jpg) ![asd](https://i.stack.imgur.com/OFvvf.jpg) ![asd](https://i.stack.imgur.com/jqjLc.jpg) ![asd](https://i.stack.imgur.com/OYlTQ.jpg) ![asd](https://i.stack.imgur.com/aZHYJ.jpg)

# python - 如何在numpy中将2个uint32连接到uint64

> ID：15900820
> 
> 赞同：2
> 
> 时间：2013-04-09T11:37:55.780
> 
> 标签：python, numpy

我有一对 numpy uint32，它们都是 uint64 的一半。如何轻松连接它们？

即我有类似的东西

```
w = np.uint32(775329792) 
x = np.uint32(46919588)

wx = np.uint64(?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:41:58.453

您可以使用[位移](http://docs.python.org/2/library/stdtypes.html#bitwise-operations-on-integer-types)运算符

```
wx = (w << 32) + x; 
```

上面使用 w 作为最重要的 32 位，然后将 x 添加为最不重要的 32 位。

# android - 从现有的数据库和表中检索文本

> ID：15900822
> 
> 赞同：0
> 
> 时间：2013-04-09T11:38:00.287
> 
> 标签：android, sql, sqlite

我制作了一个数据库和一个工作正常的表。现在我希望检索表中输入的数据并将其显示在 TextView 中。但我做不到。我正在共享代码并记录 cat 。请帮忙

Helper类（这里指的是已经存在的DB）：package com.example.query；

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DBHElper extends SQLiteOpenHelper{

    public static final String TABLE_COMMENTS = "comments";
      public static final String COLUMN_ID = "_id";
      public static final String COLUMN_COMMENT = "comment";

      private static final String DATABASE_NAME = "commments.db";
      private static final int DATABASE_VERSION = 1;

      public DBHElper(Context context) {
            super(context,DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

MainActivity（这里我查询了表格并在textview上显示）

```
package com.example.query;

import android.os.Bundle;
import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    public static final String TABLE_COMMENTS = "comments";
      public static final String COLUMN_ID = "_id";
      public static final String COLUMN_COMMENT = "comment";
     TextView tv;
    SQLiteDatabase db;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        QueryDb();
    }

    private void QueryDb() {
        // TODO Auto-generated method stub
    try
    {

        DBHElper helper = new DBHElper(this.getApplicationContext());
        db= helper.getWritableDatabase();
         Cursor c = db.rawQuery("SELECT COLUMN_COMMENT " +
                 TABLE_COMMENTS 
                 , null);

        if(c!=null)
        {
            if(c.moveToFirst())
            {
                do
                {
                    String comment=c.getString(1);
                    tv =(TextView) findViewById(R.id.labels);
                    tv.setText(comment);
                }while(c.moveToNext());
            }
        }

    }catch(SQLiteException se)
    {
        Log.e(getClass().getSimpleName(), "Could not create or Open the database");
    }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

LOGCAT

```
 04-09 16:59:46.460: I/SqliteDatabaseCpp(1662): sqlite returned: error code = 1, msg =   no such column: COLUMN_COMMENT, db=/data/data/com.example.query/databases/commments.db
  04-09 16:59:46.470: E/MainActivity(1662): Could not create or Open the database
  04-09 16:59:46.610: D/gralloc_goldfish(1662): Emulator without GPU emulation detected. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:44:25.213

您的查询无效。您需要将其更正为：

```
String query = "select " + DBHElper.COLUMN_COMMENT + " from "
               + DBHElper.TABLE_COMMENTS;
db.rawQuery(query, null); 
```

在您的来源查询中，您写道：

```
"SELECT COLUMN_COMMENT " + TABLE_COMMENTS 
```

你有几个错误：

*   您缺少`FROM`强制性条款
*   您将列命名为**评论**并分配 **了 COLUMN_COMMENT**。这应该是正确的，但是您需要将其分配给查询作为变量（保存列名值）而不是文字。

## 第二个大错误：

你忘了创建数据库。所以你必须在你的`onCreate()`方法中创建数据库：

```
@Override
public void onCreate(SQLiteDatabase db) {
   String createQuery = "create table " + DBHElper.TABLE_COMMENTS + "("
   + DBHElper.COLUMN_ID + " integer primary key autoincrement, "
   + DBHElper.COLUMN_COMMENT + " text" + ")";
   db.execSQL(qreateQuery);
} 
```

我还建议您也实施 onUpgrade() 方法：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
   String upgradeQuery = "drop table if exists " + DBHElper.TABLE_COMMENTS;
   db.execSQL(upgradeQuery);
   onCreate(db);
} 
```

# python - For 循环在模拟中无法正常工作

> ID：15900826
> 
> 赞同：0
> 
> 时间：2013-04-09T11:38:06.310
> 
> 标签：python, python-2.7, simulation, simulator

这是我在 python 中创建的代码（对它来说相当新）。

我正在尝试对生物膜进行模拟，但在我将其用于实现实际算法（增长的数学公式）和图形部分之前，我希望我的代码以所需的方式运行。我在生成部分中遇到了 for 循环的问题。

我面临的问题是，从第 1 代到第 2 代的增长（根据印刷输出）的增长远远超过了应有的增长。增长应该只到相邻的行，但一步就会变得很多。

有一个矩阵，我们在其上调用生成函数。假设循环开始有 5 个节点。现在，当我们在第一个节点上运行 generate 时，假设添加了 1 个节点。现在循环不应该在这一代中这个新添加的节点上运行生成。但它确实如此，这导致了指数级增长。

请帮我找出这里的问题。

代码（在 python 版本 2.7.4 中）：

```
import math
from random import choice
from copy import deepcopy

width=20
height=20

def checksuround(self,i,j):
    memory=0
    if(i+1<width and j+1<height and j-1>=0 and i-1>=0):
        for m in range(-1,2):
            for n in range(-1,2):
                if(self[i+m][j+n]==0):
                    memory=1
        if memory==1:
            return 1
        else:
            return 0

#comment
def add(matrix,m,n,sites):
    count=0
    if(m+1<width and n+1<height and n-1>=0 and m-1>=0):
        for q in range(-1,2):
            for w in range(-1,2):
                if(matrix[m+q][n+w]==0 and count<sites):
                    matrix[m+q][n+w]='.'
                    count=count+1

def generate(substrate,self,i,j):
    if(i+1<width and j+1<height and j-1>=0 and i-1>=0):
        if(substrate[i][j]==1):
            pick=[2,3,4,5,6]
            add(self,i,j,choice(pick))
        else:
            add(self,i,j,1)

print "-----------------------------------------------"
print "Basic floor for growth"
grid=[]
for x in range(width):
    grid.append([])
    for y in range(height):
        grid[x].append(0)

for x in range(width):
    print 
    for y in range(height):
        print grid[x][y],

print "-----------------------------------------------"
print "Substrate matrix (1 represents sites with favorable growth conditions)"
arr=[0,1,2,3,4,5,6,7]
substrate=[]
for x in range(width):
    substrate.append([])
    for y in range(height):
        substrate[x].append(choice(arr))

for x in range(width):
    print 
    for y in range(height):
        print substrate[x][y],

print "-----------------------------------------------"

for x in range(10,12):
    for y in range(10,12):
        grid[x][y]='.'

for x in range(width):
    print 
    for y in range(height):
        print grid[x][y],

print "-----------------------------------------------"
generation=5
undergrid=deepcopy(grid)
flag=0

for g in range(generation):
    print "generation : ",g
    for x in range(width):
        for y in range(height):
            flag=checksuround(grid,x,y)
            if (grid[x][y]!=0 and flag==1):
                generate(substrate,undergrid,x,y)
    for x in range(width):
        print 
        for y in range(height):
            print undergrid[x][y],
    grid=undergrid
    print
    print "----------------------------------------------" 
```

一个输出是这样的：（如果输出不对齐，请复制粘贴上面的代码并运行它，它应该可以正常工作）

```
generation :  0

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 . . 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 . . . . 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 . . 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

----------------------------------------------

generation :  1

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 . . 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 . . . . . . 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 . . . . . 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 . . . . 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

----------------------------------------------

generation :  2

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 . . 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 . . . . . . . . 0 0 0 0 0
0 0 0 0 0 0 0 0 . . . . . . . 0 0 0 0 0
0 0 0 0 0 0 0 0 . . . . . . . 0 0 0 0 0
0 0 0 0 0 0 0 0 . . . . . . . . 0 0 0 0
0 0 0 0 0 0 0 0 . . . . . . . . . 0 0 0
0 0 0 0 0 0 0 . . . . . . . . . . 0 0 0
0 0 0 0 0 0 0 . . . . . . . . . . 0 0 0
0 0 0 0 0 0 0 . . . . . . . . . . 0 0 0
0 0 0 0 0 0 . . . . . . . . . . . 0 0 0
0 0 0 0 0 0 . . . . . . . . . . . 0 0 0
0 0 0 0 0 0 0 . . . . . . . . . 0 0 0 0
0 0 0 0 0 0 0 . . . . . 0 0 0 0 0 0 0 0

----------------------------------------------

generation :  3

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 . . 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 . . . . . . . . . . 0 0 0 0
0 0 0 0 0 0 0 . . . . . . . . . 0 0 0 0
0 0 0 0 0 0 0 . . . . . . . . . 0 0 0 0
0 0 0 0 0 0 0 . . . . . . . . . . 0 0 0
0 0 0 0 0 0 0 . . . . . . . . . . . . 0
0 0 0 0 0 0 . . . . . . . . . . . . . 0
0 0 0 0 0 . . . . . . . . . . . . . . 0
0 0 0 0 0 . . . . . . . . . . . . . . 0
0 0 0 0 0 . . . . . . . . . . . . . . 0
0 0 0 0 0 . . . . . . . . . . . . . . .
0 0 0 0 0 . . . . . . . . . . . . . . .
0 0 0 0 0 0 . . . . . . . . . . . . . 0
0 0 0 0 0 0 . . . . . . . . . . . . . 0

----------------------------------------------

generation :  4

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 . . . . 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 . . . . . . . . . . . . 0 0 0
0 0 0 0 0 . . . . . . . . . . . . 0 0 0
0 0 0 0 0 0 . . . . . . . . . . . 0 0 0
0 0 0 0 0 0 . . . . . . . . . . . . 0 0
0 0 0 0 0 . . . . . . . . . . . . . . .
0 0 0 0 0 . . . . . . . . . . . . . . .
0 0 0 0 . . . . . . . . . . . . . . . .
0 0 0 0 . . . . . . . . . . . . . . . .
0 0 0 0 . . . . . . . . . . . . . . . .
0 0 0 0 . . . . . . . . . . . . . . . .
0 0 0 0 . . . . . . . . . . . . . . . .
0 0 0 0 . . . . . . . . . . . . . . . .
0 0 0 0 0 . . . . . . . . . . . . . . .
0 0 0 0 0 . . . . . . . . . . . . . . .

---------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:51:18.020

在您的主循环中，您使用 `grid = undergrid`，这是一个浅拷贝。从这一点开始（即在以下迭代中）两者`grid`都是`undergrid`相同的python 列表。试试`grid = deepcopy(undergrid)`吧。

# python - 在 div 中查找“p”标签的数量并遍历它们以使用 python xpath 抓取底层文本

> ID：15900827
> 
> 赞同：0
> 
> 时间：2013-04-09T11:38:06.440
> 
> 标签：python, xpath

我试过这个；

```
no_of_p_tags = 10 # I'm assuming this. Yet to figure out how to find this.
for x in range(1,no_of_p_tags + 1)
    test = content.xpath('//*[@id="ciHomeContentlhs"]/div[4]/div[2]/div[1]/p[x]/span/text()')
    print test 
```

(1) 如何在 div 中找到“p”标签的数量，以及 (2) 遍历它们以使用 python xpath 抓取底层文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:40:23.993

选择`p`标签而不是它们的文本内容；通过使用`p[span]`，我们只选择将元素作为直接子元素的`p`标签：`span`

```
ptags_with_span = content.xpath('//*[@id="ciHomeContentlhs"]/div[4]/div[2]/div[1]/p[span]')
no_of_p_tags = len(ptags_with_span)
for ptag in ptags_with_span:
    print ptag.xpath('./span/text()') 
```

# java - 使用“image:image”创建 XML 元素

> ID：15900829
> 
> 赞同：1
> 
> 时间：2013-04-09T11:38:15.443
> 
> 标签：java, xml

我正在使用 java 创建站点地图 xml。

```
Element img = doc.createElement("image:image"); 
```

我得到一个例外：

```
org.w3c.dom.DOMException: INVALID_CHARACTER_ERR: An invalid or illegal XML character is specified. 
```

关于如何创建元素的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:58:44.847

我认为您想使用 XML 命名空间。有关如何执行此操作的方法，请参阅此问题：[使用 Java 中的名称空间创建 XML 文档](https://stackoverflow.com/questions/528312/creating-an-xml-document-using-namespaces-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:51:15.460

在这个元素名称`"image:image"`中，这`:`不是一个有效的 cahrecter。

**编辑**

[参考链接](http://www.w3schools.com/xml/xml_elements.asp)

```
Best Naming Practices for XML Element Name

Make names descriptive. Names with an underscore separator are nice: <first_name>, <last_name>.

Names should be short and simple, like this: <book_title> not like this: <the_title_of_the_book>.

Avoid "-" characters. If you name something "first-name," some software may think you want to subtract name from first.

Avoid "." characters. If you name something "first.name," some software may think that "name" is a property of the object "first."

Avoid ":" characters. Colons are reserved to be used for something called namespaces (more later).

XML documents often have a corresponding database. A good practice is to use the naming rules of your database for the elements in the XML documents.

Non-English letters like éòá are perfectly legal in XML, but watch out for problems if your software vendor doesn't support them. 
```

# java - (String)value 和 value.toString() 之间的区别，新 Long(value) 和 (Long)value

> ID：15900831
> 
> 赞同：8
> 
> 时间：2013-04-09T11:38:25.957
> 
> 标签：java, casting

在一些地方我看到了`(String)value`。在一些地方`value.toString()`

这两者有什么区别。在哪种情况下我需要使用哪个。

`new Long(value)`和和有什么区别 `(Long)value`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T11:40:20.397

(String) value 将对象值转换为字符串，该字符串必须扩展 String。value.toString() 调用对象值上的方法，该值继承自 Object 类，该方法返回 String，显示该对象的信息。如果你有一些 yourClass 值，建议覆盖 toString()

new Long(value) 创建 Long 类型的新对象并将 Long 的值设置为您的变量值。(Long)value 获取对象值并将其转换为 Long 类型的对象。Long(value) 中的值必须是数字或字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T11:42:17.193

在

```
new Long(value) 
```

创建新的包装类 Object

和

```
(Long)value 
```

如果可能，将值转换为 Long（到包装器）。

相似地

```
String(value) 
```

将值类型转换为字符串

但是 toString() 是一种方法，它是一种对象类方法，必须根据需要重写它，例如。

```
class User
{
String name;
int age;

public String toString()
{
return "name :"+name+" \n  age :"+age;
}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T11:50:08.397

在任何语言（我所知道的）中，演员阵容都不会改变对象的类型。

`(String)`例如，当您有一个编译器认为是对象的引用时，您使用强制转换，但您知道它实际上是一个字符串，并且您希望编译器知道这一点。如果您有一个 Integer 并尝试强制转换为 String，则在运行代码时会收到 ClassCastException。

因此，如果您有一个 Integer 并想要它的 String 表示，您将使用 toString。

（请注意，强制转换会改变“标量”的类型。也就是说，您可以从 int 强制转换为 char`(char)`并且编译器将执行适当的转换。在这种情况下，“强制转换”是一个完全不同的概念。不幸的是传统导致两者使用相同的语法。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T11:42:32.833

首先， value 本身是一个字符串吗？(String)value 是一个强制转换，只有在 value 是一个字符串时才有效。但是，调用 value.toString() 只是一个方法调用。toString() 是 java 中每个对象的方法，因此即使 value 是整数也不会失败。

现在，调用 (Long)value 正在尝试将 value 转换为 Long，并且仅在 value 为 Long 类型时才有效。并且，调用 Long(value) 实际上是调用 Long 类的构造函数，传入 value 作为参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-06T11:51:28.070

当您将一个对象转换为 String 时，您可以确定它是一个字符串，并且在运行时如果它恰好是另一个对象的实例，那么您会得到一个类转换异常。

另一方面，当您在对象上调用 toString() 方法时，它不必是字符串，因为所有类都从类对象继承该方法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-09T11:42:50.893

`String`类实现`CharSequence`，它也从`Object`类扩展。因此，如果有人使用其他类型，`CharSequence`我们必须像您的第一个版本一样进行类型转换`(String)value`
*[`(String)value`如果它包含`String`对象和对象`(StringBuffer)value`的 StringBuffer 类型]*
关于`toString()`我们必须覆盖`toString()`我们类中的方法，该方法将根据我们的要求以字符串格式显示我们的对象表示. 如果我们不覆盖，那么`toString()`from`Object`类的默认实现将被继承，并将以十六进制表示的字符串给出我们对象的哈希码，例如`UserObject@12dacd1`

其他实现`CharSequence`是**CharBuffer、StringBuffer、StringBuilder**

1> **(String)value**表示`value`包含 String 对象。如果它不包含`String`将`ClassCastException`在运行时抛出。如果您使用不相关的类型层次结构进行类型转换，则类型转换将引发编译时异常。如下所示

```
Exception e = new Exception();
String str = (String)e; 
```

2> 调用**toString()**表示`anyobject` 不一定是`String`对象。我们自己的类中正确的覆盖`toString()`方法将有助于我们自己的类的 String 表示，并且它**永远不会**抛出 java 世界中存在的任何异常，因为它继承`toString()`自对象类。因此，如果您覆盖**toString**并打印`System.out.println(userObject);`，那么它将不会显示我们对象的哈希码的十六进制表示，例如`UserObject@12dacd1`

```
public class UserObject {
    String name;
    int age;
    @Override
    public String toString() {
        return " Name="+name+" \n age="+age;
    }

    public static void main(String[] args) {
        UserObject uo = new UserObject();
        uo.name="AAA";
        uo.age=18;
        System.out.println(uo); //output will be "Name=AAA age=18" instead of "UserObject@12dacd1"

    }
} 
```

关于新的 Long(value) 和 (Long)value。

`new Long(value)`意味着，您有价值，因为`long/String`您想将其转换为包装类`Long`对象。所以你可以根据条件使用 Long(long), Long(String)[构造函数](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#constructor_summary)。

长类型转换解释类似于上面的字符串类型转换或任何类型转换。`(Long)value` 意味着当您获得如下代码时，您可以将类型转换为 Long、Integer、Double 以及取决于等号右侧的分配值。

```
Number i=10L; //java.lang.Number
Long a= (Long)i; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-09T11:42:54.580

这些都非常不同。第一个是`Type Casting`。假设您在方法上收到一个 Object，并且您知道它是一个 String，因此您希望它被称为该类型。所以你这样做

```
public void method(Object obj){
    String str = (String) obj;
} 
```

[toString](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#toString%28%29)方法是从[Object](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)类继承的一个方法，它返回给您`String`任何给定的表示`Object`。

所以不同的是，当你进行转换时，你的对象必须已经是 a `String`，没有实际的转换。不同之处在于您可以为变量使用更具体的类型，但是当您调用 toString 时，这不是必需的。

调用`toString`可能会为您提供与原始对象不同的对象，除非您的类已经是 a `String`，在这种情况下返回相同的引用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-09T11:48:43.383

当您执行“（字符串）值”时，它是一个强制转换，换句话说，您明确地为编译器“说”该值是一个字符串，但如果不是，则会引发运行时异常。

当您执行“value.ToString()”时，将使用此值创建一个新字符串

长也一样

# toggle - 如何在 jquery 1.9 中使用 .toggle

> ID：15900838
> 
> 赞同：1
> 
> 时间：2013-04-09T11:38:52.337
> 
> 标签：toggle, jquery-1.9

我正在尝试在 jquery 1.9 中使用切换方法，但它已被删除，这是一个切换 div 内容的简单示例 [http://jsfiddle.net/Y5pFe/1/](http://jsfiddle.net/Y5pFe/1/) 代码：

```
<div class="divone"></div>
$(document).ready(function(e) {
$('.divone').toggle(function() {
$(this).text("click one");
}, function() {
$(this).text("click two");
}); 
}); 
```

请问有什么替代方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T11:52:50.270

我只会使用`.click`并分配一个属性作为标志：

```
<div class="divone"></div>
$(document).ready(function(e) {
$('.divone').click(function() {
    if($(this).hasClass("clicked")) {
        $(this).text("removing click");
        $(this).removeClass("clicked");
    } else {
        $(this).text("adding click");
        $(this).addClass("clicked");
    }
}); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T19:13:49.320

```
$( document ).ready(function() {
var flag=0;
$('div.divone').on('click', function(){

    var menu = $(this);

     if(flag==0)
       {

            menu.text("click one");

            flag=1;
            return;
        }

        if(flag==1)
        {

            menu.text("click two");

            flag=0;
            return;
         }

    });
}); 
```

# android - 将图像返回到whatsapp

> ID：15900842
> 
> 赞同：4
> 
> 时间：2013-04-09T11:39:10.853
> 
> 标签：android, image, android-intent, return-value, whatsapp

当用户尝试使用 whatsapp 共享图像时，我一直在尝试构建一个显示为可选图像源的应用程序。到目前为止，我已经设法让我的应用程序显示在 whatsapp 使用意图过滤器启动的服务选择器中，但我无法让图像正确返回到 whatsapp。我在下面发布我的代码：

```
public void returnImage(View v){
    //Bitmap img;
    //Bundle selectedImage = new Bundle();
    Uri imageURI;
    Intent shareIntent = new Intent();
    switch(v.getId()){
    case R.id.eric1 :
        imageURI =  saveToCache(R.drawable.cartman1);
        shareIntent.putExtra(Intent.EXTRA_STREAM, imageURI);
        shareIntent.setType("image/png");
        setResult(RESULT_OK, shareIntent);
        Utils.makeToast("Selected",this);
        System.out.println("--------------------------------");
        System.out.println(imageURI.toString());
        finish();
    }
}

   private Uri saveToCache(int resID) {
    // TODO Auto-generated method stub
    Bitmap image = BitmapFactory.decodeResource(getResources(), resID);
    File imageFile;
    Date d = new Date();
    String imgName = ((Long.toString(d.getTime())).subSequence(1,
            9)).toString();
    String state = Environment.getExternalStorageState();
    printDebug(state);
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        File file = getExternalFilesDir(null);
        if (file != null) {
            try {
                //String root = file.getAbsolutePath();
                imageFile = new File(file, imgName+".png");
                printDebug(imageFile.getAbsolutePath());
                FileOutputStream stream = new FileOutputStream(imageFile);
                boolean complete = image.compress(Bitmap.CompressFormat.PNG, 100, 
                    stream);
                if (!complete) {
                    Log.d("tag", "image not saved");
                }
                Log.d("tag", "image saved");
                // Tell the media scanner about the new file so that it is
                // immediately available to the user.
                MediaScannerConnection.scanFile(this,
                        new String[] { imageFile.toString() }, null,
                        new MediaScannerConnection.OnScanCompletedListener() {
                    public void onScanCompleted(String path, Uri uri) {
                        Log.i("ExternalStorage", "Scanned " + path + ":");
                        Log.i("ExternalStorage", "-> uri=" + uri);
                    }
                });

                return Uri.parse(imageFile.getAbsolutePath());
            } catch (IOException e) {
                Log.d("tag", "Can't save image", e);
            }
        }
    }
    return null;
    } 
```

该应用程序打开，我选择了图像，但 whatsapp 报告该图像无法共享。LogCat 不显示任何错误或警告。

我阅读了 [Whatsapp 的资源 Intent-Filter -> 共享图像](https://stackoverflow.com/questions/10301413/intent-filter-for-whatsapp-share-image)

但是没有提及应用程序返回的方式或内容，所以我在这里完全不知所措。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-26T21:06:56.580

在搜索了几天之后，这是一个将图像返回到所有其他应用程序的工作解决方案（针对 GMail 和 WhatsApp 进行了测试）。

首先，您需要在**AndroidManifest.xml**中设置一个意图过滤器（在*应用程序*内部>*活动*）。当其他应用程序调用此意图时（例如请求图像时），这将列出您的应用程序。 **注意**：WhatsApp 正在使用 action.PICK - 意图。即使在下面添加所有意图过滤器也会提供与其他应用程序的良好兼容性。

```
<intent-filter>
                <action android:name="android.intent.action.PICK" /> 
                <category android:name="android.intent.category.DEFAULT"  /> 
                <category android:name="android.intent.category.OPENABLE" />
                <data android:mimeType="image/*" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.OPENABLE" />
                <data android:mimeType="image/*" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.GET_CONTENT" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.OPENABLE" />
                <data android:mimeType="image/*" />
            </intent-filter> 
```

* * *

您需要注意的第二件事是响应闲置意图。这应该由两部分组成：首先，您应该检查您的应用程序是否已被执行以返回图像，或者它是否完全自行运行。

```
Intent intent = getIntent();
        if (intent!=null && intent.getType()!=null)  //check if any application has executed your app
        {
             if(intent.getType().indexOf("image/") != -1) isinint=true; //check if the requested type is an image. If true, set a public static boolean, f.e. named isinint to true. Default is false.
        } 
```

现在，当用户选择图像时，将结果设置如下。由于内存问题，您应该将要返回的文件复制到 sdcard 并返回 Uri。

```
if(isinint) //check if any app cares for the result
        {
            Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND, Uri.fromFile(openprev)); //Create a new intent. First parameter means that you want to send the file. The second parameter is the URI pointing to a file on the sd card. (openprev has the datatype File)

            ((Activity) context).setResult(Activity.RESULT_OK, shareIntent); //set the file/intent as result
            ((Activity) context).finish(); //close your application and get back to the requesting application like GMail and WhatsApp
            return; //do not execute code below, not important
        } 
```

**笔记！**`((Activity) context)`：在 OnCreate 或类似的 void 中调用数据时可以省略。当我在另一个空白中使用这个片段时，我需要在任何情况下提供一个必须定义为显示的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-19T12:17:20.137

Followig 正在为我工​​作：

```
 <activity android:name="com.selcuksoydan.sorucevap.Main">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
            <action android:name="android.intent.action.SEND" />

            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="image/*" />
            <data android:mimeType="text/*" />
        </intent-filter>

        Uri imageUri = (Uri) getIntent().getParcelableExtra(Intent.EXTRA_STREAM);
        if (imageUri != null) { 
```

# windows-7 - ZwDebugActiveProcess 挂钩

> ID：15900845
> 
> 赞同：0
> 
> 时间：2013-04-09T11:39:28.660
> 
> 标签：windows-7, kernel, driver, wdk

我正在尝试为 Windows 7 32 位创建防病毒软件屏蔽。为此，我需要挂钩 ZwDebugActiveProcess。当我尝试在驱动程序中指定 ZwDebugActiveProcess 时，在 WDK 中编译时出现错误“未声明的标识符”。我已经使用相同的程序来挂钩 ZwOpenProcess 。它成功挂钩。指定该 api 的名称有任何错误。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:06:45.460

ZwDebugActiveProcess 不是从 ntoskrnl 导出的——你可以使用 dumpbin 来验证。Win32 DebugActiveProcess 是对 OpenProcess 的调用，并设置了调试标志。更好的方法是继续使用 ZwOpenProcess，并检查标志是否为 PROCESS_ALL_ACCESS - 这是 DebugActiveProcess() 工作所必需的。

# c# - 错误模块名称：clr.dll，版本：4.0.30319.544

> ID：15900850
> 
> 赞同：4
> 
> 时间：2013-04-09T11:39:40.257
> 
> 标签：c#, .net

我有一个针对 Win 7 的 WPF 应用程序。在使用该应用程序时，我突然收到应用程序关闭错误。

当我检查事件日志时，出现以下错误：

机器详情：

4 GB 内存，Win 7 Professional 和 64 位机器。

```
Log Name:      Application
Source:        Application Error
Date:          4/9/2013 2:28:54 PM
Event ID:      1000
Task Category: Application Crashing Events
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      HOME
Description:
Faulting application name: Client.exe, version: 1.1.0.14, time stamp: 0x516328ad
Faulting module name: clr.dll, version: 4.0.30319.544, time stamp: 0x4ee9a8e7
Exception code: 0xc0000005
Fault offset: 0x0010943a
Faulting process id: 0xc14
Faulting application start time: 0x01ce34fde4195884
Faulting application path: C:\Program Files (x86)\MyClient\Client.exe
Faulting module path: C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Report Id: b4329b51-a0f3-11e2-86c9-082e5f2a7903
Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name="Application Error" />
    <EventID Qualifiers="0">1000</EventID>
    <Level>2</Level>
    <Task>100</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2013-04-09T08:58:54.000000000Z" />
    <EventRecordID>7917</EventRecordID>
    <Channel>Application</Channel>
    <Computer>HOME</Computer>
    <Security />
  </System>
  <EventData>
    <Data>Client.exe</Data>
    <Data>1.0.0.14</Data>
    <Data>516328ad</Data>
    <Data>clr.dll</Data>
    <Data>4.0.30319.544</Data>
    <Data>4ee9a8e7</Data>
    <Data>c0000005</Data>
    <Data>0010943a</Data>
    <Data>c14</Data>
    <Data>01ce34fde4195884</Data>
    <Data>C:\Program Files (x86)\MyClient\client.exe</Data>
    <Data>C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll</Data>
    <Data>b4329b51-a0f3-11e2-86c9-082e5f2a7903</Data>
  </EventData>
</Event> 
```

另外我得到了另一个相关的错误

```
Log Name:      Application
Source:        .NET Runtime
Date:          4/9/2013 2:28:52 PM
Event ID:      1023
Task Category: None
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      HOME
Description:
Application: Client.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an internal error in the .NET Runtime at IP 743C943A (742C0000) with exit code 80131506.

Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name=".NET Runtime" />
    <EventID Qualifiers="0">1023</EventID>
    <Level>2</Level>
    <Task>0</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2013-04-09T08:58:52.000000000Z" />
    <EventRecordID>7916</EventRecordID>
    <Channel>Application</Channel>
    <Computer>HOME</Computer>
    <Security />
  </System>
  <EventData>
    <Data>Application: Client.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an internal error in the .NET Runtime at IP 743C943A (742C0000) with exit code 80131506.
</Data>
  </EventData>
</Event> 
```

我在使用 clr.dll v 4.0.30319.269 时遇到了同样的错误，我搜索了社区并安装了给出的修复程序

[http://support.microsoft.com/kb/2640103](http://support.microsoft.com/kb/2640103)文章。

安装修复程序后，旧的 clr.dll(4.0.30319.269) 被新版本 4.0.30319.544 替换，但今天我仍然收到此错误。

上述崩溃是否有任何解决方案，是框架问题还是exe问题？

# c# - 如何在 IDE 控件属性中使用变量？

> ID：15900853
> 
> 赞同：1
> 
> 时间：2013-04-09T11:39:58.333
> 
> 标签：c#, vb.net, visual-studio, visual-studio-2012, ide

我在一个 WinForm 项目中，我在我的主窗体的声明中有这个 var：

> Dim Game_Color As Color = Color.FromArgb(97, 31, 28)

那么这里有可能在IDE中使用变量吗？

![在此处输入图像描述](https://i.stack.imgur.com/FJ8Ha.jpg)

有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:44:21.740

您不能在 中使用变量`Designer`，但可以在`code`. 所以在你的代码中设置颜色。我想你想看看`TextBox Events`，你应该改变下想要的颜色`Event`。例如 OnTextChanged：

```
Private Sub TextBox1_TextChanged(sender As Object, e As EventArgs)
    'Change color here
End Sub 
```

**编辑**：

您可以在此处更改 TextBox 颜色：

```
Private Sub Form1_Load(sender As Object, e As EventArgs)
    'Change Color here
     TextBox_Game.BackColor = Color.FromArgb(97, 31, 28)
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T21:29:25.540

这应该可以解决问题。

```
string strCol = "97-31-28";

private void Form1_Load(object sender, EventArgs e)
{
    TextBox_Game.BackColor = Color.FromArgb(Convert.ToInt16(strCol.Split('-')[0]), Convert.ToInt16(strCol.Split('-')[1]), Convert.ToInt16(strCol.Split('-')[2]));
} 
```

它是 C#，但您可以轻松地将其转换为 VB.NET。

# eclipse - Android中的快速傅里叶变换

> ID：15900854
> 
> 赞同：0
> 
> 时间：2013-04-09T11:40:04.463
> 
> 标签：eclipse, signals, fft

我在哪里可以找到在 Android 中免费、非常快速且可靠的 FFT 实现？只剩下我做了一个Matlab的FFT在Android中的移植，完成了职业生涯结束的Proyect。感谢你所做的一切！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:03:22.867

看看这个：[android Sdk 中的 FFT 库](https://stackoverflow.com/questions/9272232/fft-library-in-android-sdk)

我个人使用的是 JFFT 包，它在分析音频时运行流畅，fft 窗口大小为 2048。

# javascript - 如何接收 div 元素的完整 DOM 路径并检查 CSS 高度元素

> ID：15900860
> 
> 赞同：0
> 
> 时间：2013-04-09T11:40:20.617
> 
> 标签：javascript, html, nodes

这是一个找到**学校**ID 的网页示例：

```
<html><body><div><table style="height:2px"><tr><td style="height:10px"><div id="school"> 
```

目前我有这个 JavaScript 代码，该代码可以很好地检测**学校**ID，它为我提供了该 div 元素的 DOM 路径。但现在我还想检查是否有**高度**样式元素，以及是否有值。然后用`alert(y)`.

```
var path = [];
var el = document.getElementById('school');
do {
    var qq = path.unshift(el.nodeName);
    if (el.nodeName.currentStyle){ var y = qq.currentStyle["Height"]; alert(y);}
 else {var y = document.defaultView.getComputedStyle(el.nodeName,null).getPropertyValue("Height");alert(y);}

} while ((el.nodeName.toLowerCase() != 'html') && (el = el.parentNode)) 
```

但这不起作用。问题：需要帮助来读取所有当前`height`值（`div id="school"`元素路径的）。

正常它必须提醒我这个值：2px 10px

如果需要更多信息，请在下面评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:14:37.167

您应该尝试在代码中将“高度”的大小写更改为小写，因为它区分大小写（“高度”）。

以 IE 为例，

```
.currentStyle["height"]; 
```

对于 Mozilla，

```
.getPropertyValue("height"); 
```

当它运行时，它返回*auto*的高度 div **school**。**要找到 div学校**的实际高度，您需要找到其父`<td>`元素和父`<table>`元素的高度。

例如，IE 中的以下代码返回`<table>`div **school**的父级的高度，并返回*2px*。

```
.parentNode.parentNode.parentNode.parentNode.currentStyle["height"]; 
```

以下返回`<td>`div **school**父级的高度并返回*10px*。

```
.parentNode.currentStyle["height"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:32:36.143

`getComputedStyle(el.nodeName,null)`应该`getComputedStyle(el,null)`

[jsFiddle](http://jsfiddle.net/3GRYj/)

# jquery - 如何使用 JQuery 查找动态添加的 html 控件

> ID：15900871
> 
> 赞同：0
> 
> 时间：2013-04-09T11:40:40.407
> 
> 标签：jquery, asp.net, html, dom

我在我的 ASP.Net 网页上有一个文字控件。在我的函数背后的代码中，我为这个文字的文本分配了一个 javascript 块。此脚本块指向一个网站 URL，该 URL 将 html 输出返回给文字，因此它会动态呈现在我的页面上。

页面 HTML

`<asp:Literal runat="server" ID="MyLiteral" EnableViewState="False"></asp:Literal>`

背后的代码

```
MyLiteral.Text = String.Format(@"<script type='text/javascript' src='http://mywebsite/gethtml'></script>"; 
```

在此页面完全加载后，我想使用这样的 JQuery 代码访问其中一个 html 元素，例如 DIV（上面动态创建）

```
alert($('#mydynamicdiv').attr('id')); 
```

但是，此警报返回未定义。为什么这基本上会发生，我如何在这里访问动态元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:48:46.933

您可以使用 on 函数。

```
$(document).on( eventName, selector, function(){} );
$(document).on('click','.myDiv',function(){ ... }); 
```

试试看嘛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:45:22.280

尝试使用

```
 alert($('#<%=mydynamicdiv.ClientID%>').attr('id')); 
```

# python - django-disqus 的 Javascript 配置不起作用

> ID：15900879
> 
> 赞同：0
> 
> 时间：2013-04-09T11:41:12.233
> 
> 标签：python, django, disqus

我是 Stack Overflow 的新手，所以如果我的问题太天真，我很抱歉。我正在 Heroku 上构建一个基于 Django 的网站，并使用 django-disqus 添加了 Disqus 评论系统。用户也可以登录我的网站，所以我自然不希望他们在使用 Disqus 发表评论时再次输入登录详细信息 - 我希望用户自动注册 Disqus（至少应在推断后填写姓名+电子邮件表单来自 request.user 的用户详细信息）。

我在网上找到了一些东西来做到这一点（他们都建议同样的事情）：[这里](https://stackoverflow.com/questions/4177397/import-logged-in-user-disqus-comments)。他们说我必须在 Disqus iframe 渲染之前将以下内容放入程序的 Javascript 代码中：

```
var disqus_def_name = "{{ user.get_full_name}}";
var disqus_def_email = "{{ user.email }}"; 
```

如果您[在此处](http://help.disqus.com/customer/portal/articles/472098-javascript-configuration-variables)选中，则 Javascript 配置与 embed.js 在同一块中指定。由于我使用的是 Django，该代码包含在我的模板标签中，因此我必须将上述（名称和电子邮件）配置添加到其他一些 JS 块中。我将它添加到第一个主块，但它不起作用。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:55:50.403

这些 javascript 变量现已弃用 - 想要在 Disqus 上注册的用户必须自己注册 Disqus。好消息是他们只需要这样做一次，而且很多人可能已经有帐户了。

# php - 具有相同名称的多个ckeditor textarea

> ID：15900880
> 
> 赞同：1
> 
> 时间：2013-04-09T11:41:13.620
> 
> 标签：php, javascript, html, textarea, ckeditor

我有一个通过 php 在循环中创建的表单

是这样的

```
<?php 

        $number = count($name_array);
        $id = 0;

        while($id<$number)
            {
                if($category[$id] == ewbp)
            {
            $ewbp = 'selected';
            }
                if($category[$id] == iwbp)
            {
            $iwbp = 'selected';
            }
                if($category[$id] == wbe)
            {
            $wbe = 'selected';
            }
                if($category[$id] == texture)
            {
            $texture = 'selected';
            }
                if($category[$id] == putties)
            {
            $putties = 'selected';
            }
                if($category[$id] == primer)
            {
            $primer = 'selected';
            }

        echo "
        <div class=\"update_form_holder\">
        <form action=\"processor/update.php\" enctype=\"multipart/form-data\" method=\"post\">
            <table>
                <tr>
                    <td>Name</td><td><textarea rows=\"1\" cols=\"30\" name=\"name\">"."$name_array[$id]"."</textarea></td>
                </tr>
                <tr>
                    <td>Small Description</td><td><textarea rows=\"2\" cols=\"60\" name=\"short_desription\">"."$short_description[$id] "."</textarea></td>
                </tr>
                <tr>
                    <td>Full Description</td><td><textarea rows=\"5\" cols=\"60\" name=\"long_description\">"."$long_description[$id]"."</textarea></td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>
                        <select name=\"category\">
                            <option value=\"ewbp\" ". "$ewbp" . ">Exterior Water Based Paints </option>
                            <option value=\"iwbp\" ". "$iwbp" . ">Interior Water Based Paints</option>
                            <option value=\"wbe\" ". "$wbe" . ">Water Based Enamel </option>
                            <option value=\"texture\" ". "$texture" . ">Textures</option>
                            <option value=\"putties\" ". "$putties" . ">Putties</option>
                            <option value=\"primer\" ". "$primer" . ">Premir</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type=\"hidden\" value=\""."$idi[$id]"."\" name=\"idi\"></td>
                </tr>
                <tr>
                    <td><input type=\"submit\" value=\"update\"></td>
                </tr>
            </table>
        </form>
        </div>
        <div class=\"image_holder\">
            <img src=\""."$imgurl[$id]"."\" />
        </div>
        <form action=\"processor/delete.php\" method=\"post\">
            <input type=\"hidden\" value=\"$idi[$id]\" name=\"delete_id\">
            <input type=\"hidden\" value=\"$filename[$id]\" name=\"delete_file\">
            <input type=\"submit\" value=\"delete entry\" >
        </form>
        ";
        $id++;
        $ewbp = '';
        $iwbp = '';
        $wbe = '';
        $texture = '';
        $putties = '';
        $primer = '';
        }
        ?> 
```

我试图让 textareas 使用 ckeditor，问题是，它需要不同的名称来创建新实例，但是我无法更改名称，因为数据被提交到另一个 php 文件以存储在 sql 数据库中。有没有办法让它创建更多实例而无需更改名称？我尝试使用 ID，但它不起作用。此外，这个[链接](http://ckeditor.com/forums/CKEditor-3.x/Multiple-textareas-same-name)让我怀疑它是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:52:07.053

由于您可以控制整个解决方案（php 和 html/javascript），因此最简洁的解决方案是为每个文本区域选择不同的名称并更改您的 php 代码，以便在访问`$_POST`数组时使用这些新名称。

* * *

**更新：**有时间进行一些测试后，我无法重现该问题。我已经使用以下 html 进行测试 - 它按预期工作，这意味着两个 ckeditor 被渲染并且可以单独提交：

```
<html>
 <head>
    <script type="text/javascript" src="ckeditor/ckeditor.js"></script>
 </head>
 <body>
    <form action="test.php" method="post">
      <textarea class="ckeditor" name="the_text"></textarea>
      <input type="submit">
    </form>

    <form action="test.php" method="post">
      <textarea class="ckeditor" name="the_text"></textarea>
      <input type="submit">
    </form>
 </body>
 </html> 
```

我用过 CKEditor 4.1 版

# python - 用于 Django 的 RSS 解析器

> ID：15900883
> 
> 赞同：1
> 
> 时间：2013-04-09T11:41:18.587
> 
> 标签：python, django, parsing, rss

来自网站[http://www.case-parts.com](http://www.case-parts.com)的数据对我来说是必要的。为了获取这些数据，我打算使用 RSS。所有商品目录对我来说都是必需的，但是在 RSS ( [http://www.case-parts.com/catalog.html](http://www.case-parts.com/catalog.html) ) 中，我设法仅接收有关站点上最后到货的信息。如何接收所有目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T12:54:36.260

Django 提供联合作为框架的一部分。[你可以在这里](https://docs.djangoproject.com/en/dev/ref/contrib/syndication/)阅读更多关于它的信息

基本上，您创建一个类并定义提要。（这个例子来自[django](http://djangoproject.com)）

```
class LatestEntriesFeed(Feed):
    title = "Chicagocrime.org site news"
    link = "/sitenews/"
    description = "Updates on changes and additions to chicagocrime.org."

    def items(self):
        return NewsItem.objects.order_by('-pub_date')[:5]

    def item_title(self, item):
        return item.title

    def item_description(self, item):
        return item.description

    # item_link is only needed if NewsItem has no get_absolute_url method.
    def item_link(self, item):
        return reverse('news-item', args=[item.pk]) 
```

# html - 如何给页面内容一个固定的宽度并在大屏幕上居中，并为小屏幕缩小其背景图像？

> ID：15900894
> 
> 赞同：0
> 
> 时间：2013-04-09T11:41:52.890
> 
> 标签：html, css

我刚开始使用 HTML5 开发一个针对所有手机、平板电脑和台式机的网站。谷歌搜索后，我知道使用下面的标签会根据所有形式因素的需要重新调整我们的网站：

```
<meta name="viewport" content="width=device-width" /> 
```

所以我只是尝试了一下，它看起来就像一个魅力，但我看到当我们在桌面上查看这个网站（带有 19 英寸显示屏）时，所有元素看起来都像是被拖过屏幕以使其 100% 适合屏幕，这对我来说看起来有点奇怪。

那么是否有任何选项可以使网站的主要内容（具有固定宽度）居中，在桌面上查看时背景图像跨越整个屏幕，但在较小形式的屏幕上查看时缩小背景图像因素。

举个例子，如果我们看到 Twitter，它的行为方式就像我建议的那样，用背景图像将主要内容居中，当我们减小屏幕尺寸时，它会缩小背景，但会尝试保持内容大小不变。

如果 HTML5 或 CSS3 中有任何新属性可以实现这一点，谁能建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:03:24.840

改用流体布局 [https://www.google.com/search?q=fluid+layout+examples](https://www.google.com/search?q=fluid+layout+examples)

如果您想让网站响应式，请参阅[CSS 媒体查询](https://developer.mozilla.org/en/docs/CSS/Media_queries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:44:19.120

我不建议从头开始这项任务，因为有太多其他人已经在浪费时间的问题和故障。

如果你喜欢 Twitter 风格，他们的布局和 JS 库实际上是开源的（称为“Bootstrap”），所以你可以从他们的解决方案中获利：http: [//twitter.github.io/bootstrap/](http://twitter.github.io/bootstrap/) （看看看你喜不喜欢的例子）

我最近通过伟大的 Initialzr ( [http://www.initializr.com/](http://www.initializr.com/) ) 开始了一个 Bootstrap 项目......他们的座右铭是“在 15 秒内启动一个 HTML5 项目！”，所以也许对你来说也是正确的？如果您认为 Bootstrap 可能很重，还有很多其他选择！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:12:45.067

您绝对应该看看[Media Queries (W3C)](http://www.w3.org/TR/css3-mediaqueries/)。使用它们允许您根据屏幕分辨率、视口宽度甚至屏幕的方向（横向或纵向）使用不同的 CSS 规则。

这是一个最小的例子：

```
@media all {
    #wrapper {
        /* have some whitespace on the left and right */
        width: 80%;
        margin: 0 auto;
    }
}

@media screen and (max-width: 800px) {
    /* on small screens, use the full width */
    #wrapper {
        width: 100%;
    }
} 
```

如您所见，首先定义您的总体布局，`@media all { }`然后为较小的设备调整布局是很聪明的。要查看一些示例，请查看[mediaqueri.es](http://mediaqueri.es/)

# jquery - 页面加载和优先级

> ID：15900898
> 
> 赞同：1
> 
> 时间：2013-04-09T11:42:00.827
> 
> 标签：jquery, fancybox, nivo-slider, galleria

我有一个包含很多画廊的页面（使用 Galleria 和 fancybox ）和顶部的图像滑块（nivo 滑块）。问题是滑块加载需要时间，导致浏览器同时加载画廊。现在我想给滑块一个优先级，所以页面至少会构建它的结构，或者也许让画廊只在点击时加载。

```
<script type="text/javascript"><!--fancybox-->
    $(document).ready(function() {
        $(".fancybox").fancybox();
    });
</script>

<script type='text/javascript'>
            Galleria.loadTheme('galleria/themes/classic/galleria.classic.min.js');
            Galleria.run('#gallery-1,#gallery-2,#gallery-3,#gallery-4,#gallery-5,#gallery-6,#gallery-7,#gallery-8,#gallery-9,#gallery-10,#gallery-11,#gallery-12,#gallery-1b,#gallery-2b,#gallery-3b,#gallery-4b');
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:50:57.650

`document.ready()`您可以尝试使用[**window.onload**](https://developer.mozilla.org/en-US/docs/DOM/window.onload) ，而不是在加载 HTML 时加载的 using ，它在加载页面上的所有元素之后发生。

```
$(window).on("load", function(){
   $(".fancybox").fancybox();
}); 
```

然后，如果你想在点击事件上加载画廊：

```
$('relevantIDHere').on('click', function(){
  Galleria.loadTheme('galleria/themes/classic/galleria.classic.min.js');
  Galleria.run('#gallery-1,#gallery-2,#gallery-3,#gallery-4,#gallery-5,#gallery-6,#gallery-7,#gallery-8,#gallery-9,#gallery-10,#gallery-11,#gallery-12,#gallery-1b,#gallery-2b,#gallery-3b,#gallery-4b'); 
}); 
```

# windows-installer - 将现有的 MST 文件应用到新的 MSI 包

> ID：15900901
> 
> 赞同：1
> 
> 时间：2013-04-09T11:42:16.067
> 
> 标签：windows-installer, orca

我有一个使用 Visual Studio 2010 部署项目构建的“app.msi”文件和基于“empty.msi”模板创建的“empty.mst”转换。当我尝试使用 Orca 将“empty.mst”应用于“app.msi”时，出现以下错误：“无法应用指定的转换”。

我需要修改“app.msi”，以便可以将“empty.mst”转换文件应用于它，但我无法弄清楚在这种情况下究竟是什么导致了 msi - mst 相关性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:22:54.903

转换（.mst 文件）中包含验证位，可以限制转换可能适用的产品（.msi 文件）。目前，转换可以验证目标产品的`UpgradeCode`、和。我没有检查过，但很可能验证了这些值中的一个或多个，因此通常不适用。`ProductCode``ProductVersion``ProductLanguage``empty.mst``empty.msi`

您可能只是创建自己的 .msi 的转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:47:51.723

问题与语言/本地化设置有关 - .msi 文件的代码页值与 .mst 转换不同。将两者都更改为 1252（英文）后，应用变换没有问题。

# cakephp - cakephp 中的表单验证问题

> ID：15900905
> 
> 赞同：1
> 
> 时间：2013-04-09T11:42:21.127
> 
> 标签：cakephp, cakephp-2.1

我的表单验证有一个奇怪的问题。我的表单中有 4 个输入，它们都在被验证。

一切正常，直到它验证我的最后一个输入字段，即电子邮件输入字段。我在电子邮件输入字段上设置了两个规则，`'rule' => 'notEmpty'`, `'rule' => 'email'`。当表单只需要检查 notEmpty 规则时，表单验证和发布就很好，但如果发现无效的电子邮件，它会验证它，但即使在您输入有效的电子邮件后它也不会发布。

以下是一些场景：
**一：用户为所有输入输入有效条目**
一切正常，表单发布和数据被添加到数据库中。

**二：用户为除电子邮件输入之外的所有输入输入有效条目，但随后在所有输入中输入有效电子邮件**
*假设用户仅在为前三个字段提供输入后点击提交，*
在他们第一次输入有效的电子邮件地址后一切正常，表单帖子和数据被添加到数据库中。

**三：用户为除电子邮件之外的所有条目输入有效条目（提供无效的电子邮件）**
它显示错误消息，但即使提供了有效的电子邮件地址，它也不会做任何事情。我注意到如果您继续单击提交按钮，页面会不断重新加载相同的数据。
*此外，如果在初次单击后再次单击提交按钮，则错误消息会消失*

**这是我的模型：**

```
class Member extends AppModel
{
    public $validate = array(
        'id' => array(
            'rule' => 'notEmpty'
            ),
        'Student_First_Name' => array(
            'rule' => 'notEmpty'
            ),
        'Student_Last_Name' => array(
            'rule' => 'notEmpty'
            ),
        'Student_Email' => array(
            'emailRule-1' => array(
                'rule' => 'notEmpty',
                'last' => false
                ),
            'emailRule-2' => array(
                'rule' => 'email',
                'message' => 'Please enter a valid email address.'
            ))
        );

} 
```

**这是控制器：**

```
class MembersController extends AppController
{
    ...
    public function add()
    {
        if($this->request->is('post'))
        {
            $this->Member->create();

            if($this->Member->save($this->request->data))
            {
                $this->Session->setFlash('Member has been added!');
                $this->redirect( array( 'action' => 'members'));
            }
            else
            {
                $this->Session->setFlash('Unable to add member.');
            }
        }
    }
    } 
```

对于这么简单/烦人的问题，我为这么长的帖子道歉，但我讨厌在我的应用程序/网站中有这样的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:49:57.560

您的表单很可能是另一种形式的帖子：put。

一个快速的解释是：

```
POST is simulated by FormHelper for 'create' form, or any post form that isn't modifying an existing record.

PUT is for updating existing records. 
```

见[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper::create](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper::create)

您的添加操作算作“创建”。

顺便说一句：蛋糕代码显示它实际上应该是一个 POST（见下面的评论）。因此，在您的代码中的某个地方，您可以让助手将其从 POST 更改为 PUT 。也许你正在做一些非常规的事情。

提示：如果您想安全起见，请检查以下两项：

```
if ($this->request->is('post') || $this->request->is('put')) {} 
```

确保两种帖子类型都有效。

还要尝试遵守约定并使用 lower_case_underscored 字段名。最后但并非最不重要的是放弃“id”验证。验证主键是没有意义的。

# c# - 在属性网格中排序

> ID：15900906
> 
> 赞同：0
> 
> 时间：2013-04-09T11:42:22.423
> 
> 标签：c#, collections, propertygrid

我`Propertygrid`按 A - B 排序。

其中一个属性是`Collection`带有扩展器的-我使用此站点进行了操作：**[PropertyGrid 中集合数据的自定义显示](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert)**

如果我在集合中（比如说字符串）b，a，我想要那个。在扩展器中也将是 b，a（现在它显示 a，b）。

我的问题是，如果可能的话，如何**仅从**集合的扩展器中取消排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:52:15.333

我认为不可能，如果选择AZ排序，所有网格项和子项都按名称排序。

# multithreading - 测量线程的工作集大小？

> ID：15900910
> 
> 赞同：0
> 
> 时间：2013-04-09T11:42:43.813
> 
> 标签：multithreading, migration

信息：在 [了解多核平台上运行的多线程 Java 应用程序的线程迁移成本中](http://www.google.ca/search?client=opera&q=Understanding+the+Cost+of+Thread+Migration+for+Multi-Threaded+Java+Applications+Running+on+a+Multicore+Platform&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest)说明：

1、

> 在多核平台上迁移的主要成本是由于 L2 缓存未命中。

2、

> 具有非常小或非常大工作集大小的线程受迁移的影响最小。当迁移线程的工作集大小几乎填满整个缓存时，会导致最大的缓存未命中惩罚。

问题：有没有办法确定指定线程的工作集大小（由 TID 正确引用）？因此确定线程迁移是否是主要的性能瓶颈。

# javascript - 如何使用jQuery判断客户端使用的是什么浏览器

> ID：15900918
> 
> 赞同：0
> 
> 时间：2013-04-09T11:42:58.633
> 
> 标签：javascript, jquery, client, detection

如何检测客户端使用什么浏览器？

我看到在 Jquery API Documention 中有一个 $.browser 但它不再适用于 jQuery 1.9.1。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:52:29.697

我会建议你使用特征检测而不是浏览器检测。以下是有关特征检测的一些细节：

```
http://api.jquery.com/jQuery.support/ 
```

但要回答您的问题，您可以使用此代码来检测浏览器：

```
<script type="text/javascript">
 $(document).ready(function() {
    if (!navigator.userAgent.match(/mozilla/i) && 
        ! navigator.userAgent.match(/webkit/i) ){
        alert('Mozilla');
    }
 });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:46:42.843

您可以使用[**jQuery Migrate 插件**](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)并调用`$.browser`. 它会起作用的！

使用插件很容易；例如，只需在 jQuery 的脚本标记之后立即包含它。

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.js"></script> 
```

JS：

```
$.each($.browser, function(i, val) {
  $("<div>" + i + " : <span>" + val + "</span>")
  .appendTo( document.body );
}); 
```

[**DEMO HERE**](http://jsfiddle.net/Hcgtr/)（请参阅左侧选中的 Migrate 1.1.0 复选框）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:47:09.690

$.browser 已在 1.9 中删除，因为有人建议通过 $.support 首选功能检测

检查 [http://api.jquery.com/jQuery.support/](http://api.jquery.com/jQuery.support/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T11:49:58.083

看到这个 [http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)

按照威廉的建议使用 **[jQuery Migrate 插件](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)**

# obfuscation - Mono.Cecil - 混淆恶意代码

> ID：15900920
> 
> 赞同：1
> 
> 时间：2013-04-09T11:43:07.250
> 
> 标签：obfuscation, mono.cecil, deobfuscation

在这篇很棒的文章（[http://eatplayhate.wordpress.com/2010/07/18/mono-cecil-vs-obfuscation-fight/](http://eatplayhate.wordpress.com/2010/07/18/mono-cecil-vs-obfuscation-fight/)）中，作者声称 Mono.Cecil 并不完美，但它翻译得很好90%的功能没有任何问题。

我对你们的问题是：一个邪恶的程序员能否混淆无法使用 Mono.Cecil 反混淆的恶意代码，从而导致我的程序（第 3 方代码）严重违规？如果答案是肯定的，您知道我可以使用哪些符号来编写此类代码，或者我如何保护自己免受此类代码的伤害？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T04:52:22.440

当然，一个邪恶的程序员总是能比你去混淆它更好地混淆代码。预先确定任意代码的行为毕竟是一个无法确定的问题。

更实际地，混淆与去混淆的斗争只是在于谁付出了更多的努力。混淆比反混淆容易得多，但出于各种原因，商业混淆器往往不如您可以手写或使用自定义混淆器编写的复杂得多。Mono Cecil 足以对许多常见的混淆工具进行反混淆这一事实并不意味着它可以对后者做任何事情。

如果您想了解一些可以使用手动混淆代码提取的技巧，请查看[这个crackme](http://www.crackmes.de/users/warsaw/java_crackme_3/)。它是 Java 字节码而不是 CLI，但想法是相似的。在撰写本文时，甚至没有人解决它，尽管crackme 由单个类中的单个方法组成。它甚至不使用反射，正确使用反射使得自动反混淆几乎是不可能的。

然而，真正的问题是你想用这个做什么。您是否正在尝试检查任意代码是否存在恶意行为？对不起，但这实际上是不可能的。您需要在沙箱中运行它。

# wpf - 在 wpf datagrid mvvm 友好中选择和取消选择行

> ID：15900921
> 
> 赞同：1
> 
> 时间：2013-04-09T11:43:07.293
> 
> 标签：wpf, mvvm, datagrid, caliburn.micro

我希望能够以对 MVVM 友好的方式从 C# 代码中选择和取消选择 WPF DataGrid 行。

我正在使用 caliburn micro

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:59:40.540

`SelectedItem`将您的网格和对象绑定`SelectedItems`到对象和对象列表（observablecollection）。

然后您可以更改视图模型上的属性并触发 PropertyChanged 事件以在您的 UI 中反映这一点

# php - 将具有 $_SESSION 值的记录写入数据库表

> ID：15900925
> 
> 赞同：1
> 
> 时间：2013-04-09T11:43:22.610
> 
> 标签：php, mysql, session, record

我似乎无法将 $_SESSION 变量的值写入具有自动递增主键的数据库表的记录中。我在论坛上找了很多地方，但找不到解决我问题的方法。我的预感是我需要添加一些东西才能使自动增量起作用，但我不确定。我正在使用的代码如下所示。我究竟做错了什么？

```
<?php

// SESSION FILE
include ("sessionstart.inc");

echo "<html>
    <head><title>Reports-SESSION</title></head>
    <body>";

include ("misc.inc"); //THIS SETS $cxn AS MY VARIABLE TO CONNECT TO THE DATABASE

// SELECT THE DATABASE TO USE
mysqli_select_db($cxn,"carregistration") or die(mysqli_error($cxn));

// SET TEST VALUES IN $_SESSION VARIABLE
$_SESSION['OwnerCarIdentifier']='6Gh7J8';
$_SESSION['CarType']='station car';

// TEST TO SEE WHAT VALUES ARE NOW IN $_SESSION
foreach ($_SESSION as $field => $value)
{
    echo "$field = $value<br />\n";
}
// THIS CONFIRMS THAT THE TWO $_SESSION VALUES ARE THERE AND AS SET ABOVE

echo "<br />";

// NOW WRITE VALUES FROM $_SESSION INTO A NEW RECORD IN THE DATABASE
mysqli_query($cxn,"INSERT INTO 'car' (OwnerCarIdentifier,CarType) VALUES ('$_SESSION[OwnerCarIdentifier]','$_SESSION[CarType]')");

//ERROR CHECKING TO SEE IF THE DATA WERE SUCCESSFULLY RECEIVED BY THE DATABASE OR NOT.
if (mysqli_connect_errno()) {
echo "The connection with the database failed." . mysqli_connect_error();
exit();
}

// CLOSE THE RECORD
mysqli_close($cxn);

//DESTROY THE SESSION: THIS STATEMENT SHOULD APPEAR AT THE VERY END WHEN YOU HAVE STORED ALL THE FIELDS FOR A ROW IN THE DATABASE
session_destroy();

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T13:12:38.547

尝试这个：

```
$sql = mysql_query("INSERT INTO car VALUES('{$_SESSION['OwnerCarIdentifier']}','{$_SESSION['CarType']}' "); 
```

它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:48:06.987

第一的....

```
 mysqli_query($cxn,"INSERT INTO `car` (`OwnerCarIdentifier`, `CarType`) VALUES ('" .$_SESSION['OwnerCarIdentifier']."','".$_SESSION['CarType']."')"); 
```

其次...我希望您在 db 中的主键不是`OwnerCarIdentifier`因为您不能在字符串上放置自动增量。

第三......希望数据不会从表单或其他东西进入会话，或者你在那里有一个巨大的 mysql 注入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:48:27.540

尝试这个。

```
mysqli_query($cxn,"INSERT INTO 'car' (`OwnerCarIdentifier`,`CarType`) VALUES ('".$_SESSION['OwnerCarIdentifier']."','".$_SESSION['CarType']."')"); 
```

这将正确执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T13:18:43.897

另一种方式：

```
 $sql = mysqli_query($cxn,"INSERT INTO 'car' (OwnerCarIdentifier,CarType) VALUES ('{$_SESSION[OwnerCarIdentifier]}','{$_SESSION[CarType]}')");

     if(mysqli_affected_rows($cxn) === 0)
     {
        eixt ("Error on insert");
     } 
```

# c# - 读取网络流以获取 HTTP 请求

> ID：15900930
> 
> 赞同：1
> 
> 时间：2013-04-09T11:43:32.580
> 
> 标签：c#, .net, httpwebrequest

我还没有找到与此主题相关的任何内容，所以我问你。

我想要实现的是从套接字处理 NetowrkStream。

它确实包含来自 WebShop 的 HTTPWebRequest。肥皂，更具体地说。

我要避免的是使用 StreamReader 并逐行读取。我可以为此使用标准课程吗？（或者如何将流转换为 WebRequest？）

例如，theese 是 Stream 的第一行：

```
HTTP/1.0 200 OK
Date: Fri, 13 Jan 2006 15:12:48 GMT
Last-Modified: Tue, 10 Jan 2006 11:18:20 GMT
Content-Language: de
Content-Type: text/html; charset=utf-8 
```

Networkstream 是这样创建的：

```
using (NetworkStream netowrkStream = new NetworkStream(_socket))
{
    if (netowrkStream.CanRead)
    { 
         // PSEUDO: HttpRequest = HttpRequest.FromStream(networkStream); 
```

**试图问更简单：**

从网络流中检索 HTTP 请求并解析其数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:49:59.777

框架中有一个 HTTP 服务器的实现：

[MSDN：System.Net.HttpListener](http://msdn.microsoft.com/en-gb/library/system.net.httplistener.aspx)

如果可以的话，我建议你使用它。

# oledbcommand - 单个 OleDbCommand 中的多个选择语句不起作用

> ID：15900932
> 
> 赞同：0
> 
> 时间：2013-04-09T11:43:42.847
> 
> 标签：oledbcommand

我正在尝试使用单个命令对象从 2 个访问表中选择数据。这是我的代码-

```
using (OleDbCommand cmdCommand=new OleDbCommand())
{
    cmdCommand.CommandType = CommandType.Text;
    cmdCommand.CommandText = "select * from tableA;select * from tableB";
    cmdCommand.Connection = Connection;
    using (OleDbDataAdapter daData=new OleDbDataAdapter())
    {
       daData.SelectCommand = cmdCommand;
       Connection.Open(); daData.Fill(ds); Connection.Close();
    }
 } 
```

但它会抛出异常“在 sql 语句结束后找到的字符”。有什么建议吗？

# java - 如何将 PCM 原始数据转换为 mp3 文件？

> ID：15900934
> 
> 赞同：4
> 
> 时间：2013-04-09T11:43:56.420
> 
> 标签：java, android, mp3, converter

编辑了我的问题：是否有从 PCM 原始数据到任何音频文件的编码器？mp3,ogg... 但不是 WAV，因为它太大了

我确实有一个包含原始 PCM 数组的文本文件，我想将其转换为 mp3、ogg 文件。经过长时间的搜索，我找不到提供这种编码的库（PCM 到 MP3）。我期待有一些建议或可能链接到此类库。

它应该在android手机中以编程方式完成，所以我不想有一些桌面解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:11:10.717

有一个 github 项目为 android
[https://github.com/intervigilium/liblame提供 lame 编码器](https://github.com/intervigilium/liblame)

还有一个使用库
[https://github.com/intervigilium/Lame4Android的示例应用程序](https://github.com/intervigilium/Lame4Android)

但如前所述，如果您想对 mp3 文件进行编码/解码，您可能需要支付许可/专利费。

在这里您可以找到 mp3 许可证价格
[http://mp3licensing.com/royalty](http://mp3licensing.com/royalty)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:54:51.217

我认为，您必须先检查许可问题。AFAIK mp3 软件从来都不是免费的。Linux 确实支持 mp3，但必须在本地机器上构建代码，而不是下载现成的包。（不确定近年来这种情况是否发生了变化。）

[Re: EDITED] 其他格式更容易，例如：

[如何将录制的语音编码为 ogg vorbis？](https://stackoverflow.com/questions/7314816/how-to-encode-recorded-voice-to-ogg-vorbis)

[如何在 Android 中将 WAV/OGG 文件转换为 FLAC 文件？](https://stackoverflow.com/questions/9733064/how-to-convert-the-wav-ogg-file-to-flac-file-in-android)

# c++ - C解决方案，有人可以向我解释这段代码吗？

> ID：15900936
> 
> 赞同：0
> 
> 时间：2013-04-09T11:44:00.253
> 
> 标签：c++, multidimensional-array

我的 C++ 老师为我们遇到的问题提供了解决方案，但有一部分我无法理解正在发生的事情。有人可以向我解释吗？m 和 n 正在从文本文件中读取以定义数组的大小。

```
for (int row=0; row < m; row++) {
    for (int col = 0; col < n; col++) {
        if (field[row][col] =='*') {

            ctr[row - 1][col - 1]++;
            ctr[row - 1][col]++;
            ctr[row - 1][col + 1]++;
            ctr[row][col - 1]++;
            ctr[row][col + 1]++;
            ctr[row + 1][col - 1]++;
            ctr[row + 1][col]++;
            ctr[row + 1][col + 1]++;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T11:47:48.670

它将增加一个`*`矩阵中围绕星星 ( ) 的所有正方形的值。

首先它搜索 a `*`，然后增加该星周围所有 8 个方格的值。

假设矩阵的一部分`field`如下所示。

```
 |    |  
+----+----+---+
     |  * |  
+----+----+---+
     |    | 
```

`ctr`就像下面

```
 1 |  1 | 1
+----+----+---+
   1 |  1 | 1
+----+----+---+
   1 |  1 | 1 
```

`ctr`将会

```
 2 |  2 | 2
+----+----+---+
   2 |  1 | 2
+----+----+---+
   2 |  2 | 2 
```

逻辑如上。但是当星星靠近边界时要小心访问冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:55:28.867

您有两个二维数组`ctr`和`field`. `field`包含的一些字段`*`

假设这个二维数组

```
field        ---->row
       . | .  | .
    +----+----+---+
 |     . |  * | .
 |  +----+----+---+
 c     . |  . | .
 o
 l 
```

会给

```
 ctr        ---->row
       1 | 1  | 1
   | +----+----+---+
   |   1 |  * | 1
   c +----+----+---+
   o   1 |  1 | 1
   l 
```

编码：

```
for (int row=0; row < m; row++) {
    for (int col = 0; col < n; col++) {
        if (field[row][col] =='*') { //Assume center of the field array contains *

            ctr[row - 1][col - 1]++; //incr elemnt at previous row, previous col
            ctr[row - 1][col]++;     //incr elemnt on previous row, same col
            ctr[row - 1][col + 1]++; //incr elemnt on previous row, next col
            ctr[row][col - 1]++;     //incr elemnt on same row, previous col
            ctr[row][col + 1]++;     //incr elemnt on same row, next col
            ctr[row + 1][col - 1]++; //incr elemnt on next row, previous col
            ctr[row + 1][col]++;     //incr elemnt on next row, same col
            ctr[row + 1][col + 1]++; //incr elemnt on next row, next col

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:54:03.907

它在“字段”矩阵中查找 *。

然后它获取 * 的位置，并将“ctr”矩阵中 * 位置周围的值加 1。

# path - Bitnami：如何在 Apache2 中配置 GitLab 5.0 应用程序没有相对根？

> ID：15900937
> 
> 赞同：0
> 
> 时间：2013-04-09T11:44:01.227
> 
> 标签：path, gitlab, apache2, relative-path, bitnami

（或者如何将 GitLab 应用程序作为 Apache2 HTTP 服务器上的根应用程序。）

我以前没有使用过 Apache2，但是我得到了带有预装服务器的[Bitnami GitLab VM 。](http://bitnami.com/stack/gitlab/virtual-machine)

我遇到了问题，因为应用程序根是相对的。 [Bitnami GitLab 5.0 和 git & Eclipse EGit 快速入门](https://stackoverflow.com/questions/15757642/bitnami-gitlab-5-0-and-git-eclipse-egit-quick-start)

解决方法是不使用相对 root，而是在 Apache2 HTTP 服务器上以 root 身份运行 GitLab 应用程序。

我使用[Bitnami wiki 为 Apache 组件](http://wiki.bitnami.com/Components/Apache?highlight=apache)找到了配置文件位置：

1)`/opt/bitnami/apache2/conf/httpd.conf`不存在。

2) 用于 GitLab 应用程序的 Apache2 配置：`gitlab.conf`

![gitlab.conf](https://i.stack.imgur.com/IpLF6.png)

请帮忙：

**如何在 Apache2 中配置 GitLab 5.0 应用程序没有相对根？**

更新：这仍然没有解决，我自己的回答没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T16:08:21.173

您是否再次预编译了资产？为此，您应该运行：

```
$ cd /opt/bitnami/apps/gitlab/htdocs
$ bundle exec bin/rake assets:precompile RAILS_RELATIVE_URL_ROOT='/' 
```

然后重新启动 Apache 服务器。

更多信息：[http ://wiki.bitnami.com/Applications/BitNami_GitLab#How_to_change_the_default_URL_to_the_root.3f](http://wiki.bitnami.com/Applications/BitNami_GitLab#How_to_change_the_default_URL_to_the_root.3f)

我希望它有所帮助。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:24:28.830

[Apache 组件的 Bitnami wiki - 如何更改 URL？](http://wiki.bitnami.com/Components/Apache?highlight=apache#How_to_change_the_URL.3f)

2种方法

> 如果要将默认 URL 从 更改 `http://your_domain/your_application`为`http://your_domain`，则应在应用程序 conf 文件中添加“DocumentRoot”条目。编辑 /opt/bitnami/apps/your_application/conf/your_application.conf 文件以添加此行并注释“别名”条目。您可以使用“纳米”编辑器：
> 
> `$ sudo nano /opt/bitnami/apps/your_application/conf/your_application.conf`
> 
> your_application.conf 文件内容：

```
DocumentRoot "/opt/bitnami/apps/your_application/htdocs"
# Alias /your_application/ "/installdir/apps/your_application/htdocs/"
# Alias /your_application "/installdir/apps/your_application/htdocs"

(...) 
```

> 一些应用程序还需要更改其配置文件或数据库。

`/opt/bitnmai/apps/gitlab/gitlab.conf`更改后：

```
DocumentRoot /opt/bitnami/apps/gitlab/htdocs/public

<Directory "/opt/bitnami/apps/gitlab/htdocs/public">
   Options -MultiViews
   allow from all
</Directory>

PassengerDefaultUser git
PassengerDefaultGroup git

PassengerPreStart htttp://127.0.0.1:80/ 
```

![在此处输入图像描述](https://i.stack.imgur.com/0V9vZ.png)

另请参阅[http://wiki.bitnami.com/Applications/BitNami_GitLab#How_to_change_the_default_URL_to_the_root.3f](http://wiki.bitnami.com/Applications/BitNami_GitLab#How_to_change_the_default_URL_to_the_root.3f)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T09:56:13.953

[BitNami GitLab](http://bitnami.com/stack/gitlab) 6.0 已经发布，默认配置在根 URL 中。

# perl - 在 perl 中将值传递给引用的子例程

> ID：15900939
> 
> 赞同：0
> 
> 时间：2013-04-09T11:44:11.700
> 
> 标签：perl, subroutine

我引用的子例程很少，我需要将值传递给引用的子例程。有没有办法做到这一点。

```
 #Sample Code
   sub CreateHtmlBox {
     my ($box_type,$hash_ref) = @_;
     my %subCall = (
        'singlebox'   =>  \&CreateSingleBox   ,
        'multiplebox' =>  \&CreateMultipleBox
              );

     my $htmlCode = $subCall->($box_html);
   }

   sub CreateSingleBox {
    my ($box_type) =@_;
    #...................
    return $htmlCode;
   } 
```

我想调用引用的子程序并将哈希的引用传递给它。

```
 CreateSingleBox($hash_ref) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:35:17.707

您必须先访问哈希中的特定元素，然后才能将其称为 coderef。IE

```
# WRONG! Variable $subCall does not exist.
my $htmlCode = $subCall->($box_html); 
```

真的应该

```
my $htmlCode = $subCall{box_type}($box_html); 
```

生成的代码如下所示：

```
use strict;
use warnings;

sub CreateHtmlBox {
    my ($box_type, $hash_ref) = @_;
    my %subCall = (
        singlebox   => \&CreateSingleBox,
        multiplebox => \&CreateMultipleBox,
    );
    return $subCall{$box_type}($hash_ref);
}

sub CreateSingleBox {
    my ($box_type) = @_;
    my $htmlCode= "<p>" . $box_type->{a} . "</p>";
    return $htmlCode;
}

print CreateHtmlBox("singlebox",{a => 1}) 
```

# c++ - 将 PostgreSQL 9.X 与 C++ 一起使用

> ID：15900943
> 
> 赞同：0
> 
> 时间：2013-04-09T11:44:23.587
> 
> 标签：c++, postgresql, postgresql-9.2, postgresql-8.4, connector

当我尝试使用 c++ 连接到 postgresql 9.2 时，它在 Windows 中不起作用，但我可以使用 postgresql 8.4 做到这一点。我听说我可以使用 ODBC 和 MFC 进行连接。

有没有其他简单的方法可以将 postgresql 与 C++ 一起使用？

编辑：

错误消息之一是：LNK2019：函数“void __cdecl queryExecuterWithGlobalConn(char const *)”中引用的未解析外部符号_PQclear

当我搜索它时，我发现这是 PostgreSQL 9.X 中的一个常见问题，但我没有找到解决方案。顺便说一句，它可以与 cygwin 一起使用，但不能与 MinGW 和 cl 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:07:10.433

使用 Npgsql。它是一个本地库（Postgresql 的 .Net Data Provider）示例：

```
using System;
using System.Data;
using Npgsql;

public class NpgsqlUserManual
{
    public static void Main(String[] args)
    {
         NpgsqlConnection conn = new NpgsqlConnection("Server=127.0.0.1;Port=5432;User Id=joe;Password=secret;Database=joedata;");
         conn.Open();
         conn.Close();
    }
} 
```

# c# - 基于格式的日期时间基参数获取数据问题

> ID：15900945
> 
> 赞同：0
> 
> 时间：2013-04-09T11:44:26.700
> 
> 标签：c#, asp.net, .net, database, ado.net

我基于一个日期时间类型字段从数据库中获取记录。但是我保存在数据库中的甲酸盐就像“2013-04-09 15:02:46.803”。当我发送日期时间的参数来选择记录时，就像'4/9/2013 3:07:26 PM'。实际上，我尝试在条件下同时使用 like 和 equal 但两者都不起作用。因为日期的格式应该相同。

![在此处输入图像描述](https://i.stack.imgur.com/p6S83.png)

![在此处输入图像描述](https://i.stack.imgur.com/taIF9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:55:48.373

您可以使用 DateTime.ParseExact() 以您需要的格式（“yyyy-MM-dd hh:mm:ss.ff”）字符串并将数据作为字符串值传递。但是您必须将 ExecuteTag 第二个参数从 DateTime 更改为字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:02:20.377

您可以将日期转换为浮点数，然后进行比较

```
select ......
where cast(a.UpdatedOn as float) = cast(cast('4/9/2013 3:07:26 PM' as datetime) as float) 
```

# php - 具有来自 CSV PHP 的多个数组的数组

> ID：15900946
> 
> 赞同：0
> 
> 时间：2013-04-09T11:44:32.497
> 
> 标签：php, arrays, loops, csv, while-loop

我正在尝试学习 PHP，因此开发了一个 PHP 脚本，该脚本将读取一个 CSV 文件并将其放置在一个包含多个数组的数组中。

CSV就是由这个结构组成的

```
USER,PRINTER,PAGES,COPIES,GRAYSCALE,DUPLEX

001,001,1,2,G,D

001,002,1,3,C,ND

002,003,2,2,C,D 
```

到目前为止，我已经设法创建了一个 PHP 脚本，该脚本输出主数组，其中包含“用户”子数组。

像这样的东西

```
Array
(
     ['user1']=>Array
                (
                 ['printer1']=>Array
                               (
                                [PAGES]=>'1'
                               )
                )
) 
```

这适用于多个用户，但我似乎无法将 Users 数组中的打印机相乘。这是我的代码：

```
<?php
$arrprint = array();
$arrprinter = array();
if (($handle = fopen("log-2013-04-03.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
            if (! isset($arrprint ["".$data[1].""]) ){
                $arrprint ["'".$data[1]."'"] = $data[1];
                if(! isset($arrprinter["".$data[4].""]) )
                    $arrprinter["'".$data[4]."'"] = ['Pages' => $data[2]];
        }
        /*$arrprint ["'".$data[1]."'"]  = [ "'".$data[4]."'" => ['NºPag' => $data[2]]];*/
            $arrprint["'".$data[1]."'"] = $arrprinter;      
    }
        print_r ($arrprint);
        fclose($handle);
} 
```

我究竟做错了什么？我的代码中是否缺少任何循环？

编辑：根据要求所需的输出将是：

```
array( 
     ['user1']=>array( 
                ['printer1']=>Array( 'bw_cp'=10 'colour'=20) 
                ['printer2']=>Array( 'bw_cp'=5 'colour_cp'=1 ) 
                ) 
     ) 
```

这将是最终的想法！

# javascript - 如何改变滚动条的颜色？

> ID：15900948
> 
> 赞同：1
> 
> 时间：2013-04-09T11:44:39.167
> 
> 标签：javascript, jquery, html, css, jscrollpane

我想更改滚动条的颜色。为了创建滚动条，我使用了给定的代码。
javascript是

```
$('.scroll-pane').jScrollPane();

    $('#body').bind(
    'jsp-scroll-y',
    function (event, scrollPositionY, isAtTop, isAtBottom) {
        console.log('#pane1 Handle jsp-scroll-y', this,
                        'scrollPositionY=', scrollPositionY,
                        'isAtTop=', isAtTop,
                        'isAtBottom=', isAtBottom);
    }
); 
```

CSS是

```
.scroll-pane
{
    width: 100%;
    height: 300px;
    overflow: auto;
} 
```

但是在这里我无法更改滚动条的颜色。如何更改颜色？ [演示](http://jsfiddle.net/KVyAG/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T11:54:24.400

这两个元素基本上是滚动条和拖动处理程序。

```
.jspTrack {
    background: lightgray !important;
}

.jspDrag {
    background: gray !important;
} 
```

编辑：真正确保应用颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:53:10.167

您可以对拖动元素进行样式化`.jspDrag`：

```
.jspDrag {
    background-color: #000;
} 
```

和 scollbar`.jspVerticalBar`本身：

```
.jspVerticalBar {
    background-color: rgba(0,0,0,0.5);
} 
```

**UPD** 工作示例[http://jsfiddle.net/KVyAG/2/](http://jsfiddle.net/KVyAG/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:54:46.047

这可能会对您有所帮助。对于特定的**类或 id**，您可以只写**类或 id**的名称而不是**BODY**

```
 <style type="text/css">
    BODY{
    scrollbar-face-color:#DFFFBF;
    scrollbar-shadow-color:green;
    }
    </style> 
```

您还可以使用以下属性：

*   1) scrollbar-3dlight-color 2) scrollbar-arrow-color 3) scrollbar-base-color 4) scrollbar-darkshadow-color 5) scrollbar-face-color 6) scrollbar-highlight-color 7) scrollbar-shadow-color 8 ) 滚动条轨道颜色

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T11:49:56.903

试试这个：

```
.scroll-pane
 {
 width: 100%;
  height: 300px;
  overflow: auto;
  background-color:#000000;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-04T12:32:32.433

我们也可以使用 javascript 更改滚动条的颜色。滚动条中有各种组件，例如基色、面色、箭头颜色等，它们可以改变滚动条各个部分的颜色。以下几行可能会对您有所帮助。

```
document.body.style.scrollbarBaseColor = "colorname";
document.body.style.scrollbarArrowColor = "colorname";
document.body.style.scrollbarTrackColor = "colorname"; 
```

除了上面的样式，你还会有 scrollbarShadowColor、scrollbarHighlightColor、scrollbar3dlightColor、scrollbarDarkshadowColor 等。所以，选择你的滚动条组件并改变它的颜色。

# hp-quality-center - Python：使用 CurrentTSTest 对象添加 VAPI-XP 参数的问题

> ID：15900951
> 
> 赞同：0
> 
> 时间：2013-04-09T11:44:46.013
> 
> 标签：hp-quality-center

我知道以前有人问过类似的问题。我没有劫持这个问题，而是提出了一个新问题，因为那个问题没有回答我的问题。这是代码：我正在使用 Python 语言

```
def Test_Main(Debug, CurrentTestSet, CurrentTSTest, CurrentRun):
 try :
   ParamFactory=CurrentTSTest
   ParamObj=ParamFactory.TestParameterFactory
   ParamAdd=ParamObj.AddItem(None)
   ParamAdd.name="Provider"
   ParamAdd.DefaultValue="XYZ"
   ParamAdd.Description="XYZ Service Provider"
   ParamAdd.Post()
   # clear output window
   TDOutput.Clear() 
```

执行后，TestParameterFactory 不工作。请任何人都可以让我知道我在哪里做错了。

```
Error] (L21: c0): Traceback (most recent call last): 
 File "<Script Block >", line 21, in Test_Main 
 ParamObj=ParamFactory.TestParameterFactory 
 File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 516, in _    _getattr__ 
  raise AttributeError("%s.%s" % (self._username_, attr)) 
  AttributeError: <unknown>.TestParameterFactory 
```

如果我使用 OTA ***TestParameterFactory***工作正常。如果有人能指出我正确的方向，我真的很感激。我现在尝试了所有选项。感谢您的调查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:26:27.917

找到了答案

这就是您要做的（使用**TDApiOle80.Test类型的“** **ThisTest** ”对象，您可以在下一个（左侧）找到该窗格以在 Object 下进行测试（通常您会在其中看到 Library、Soap、Java ..）

 **```
def Test_Main(Debug, CurrentTestSet, CurrentTSTest, CurrentRun):
  try :
  # clear output window
  TDOutput.Clear()
  ParamObj=ThisTest.TestParameterFactory
  ParamAdd=ParamObj.AddItem(None)
  ParamAdd.name="Provider"
  ParamAdd.DefaultValue="XYZ"
  ParamAdd.Description="XYZ Service Provider"
  ParamAdd.Post()
  TDOutput.Print (ThisTest.HasParam ) 
```**

# css - IE GWT：DockPanel 中心组件 100% 高度样式被忽略

> ID：15900954
> 
> 赞同：0
> 
> 时间：2013-04-09T11:45:06.513
> 
> 标签：css, internet-explorer, gwt, dockpanel

像往常一样，我的 Internet Explorer 和 CSS 有问题。我正在使用 GWT 一个 DockPanel 来创建一个带有页眉、主要部分和页脚的网站，所有 VerticalPanels 我在运行时添加不同的复合材料/元素。

```
 RootPanel rootPnl = RootPanel.get("rootContainer");

    final DockPanel dockPanel = new DockPanel();
    dockPanel.setWidth("100%");
    dockPanel.setHeight("100%");

    rootPnl.add(dockPanel);

    final VerticalPanel headerPanel = new VerticalPanel();
    headerPanel.setSpacing(10);
    headerPanel.setStyleName("gwt-HeaderPanel");
    dockPanel.add(headerPanel, DockPanel.NORTH);
    dockPanel.setCellHeight(headerPanel, "100px");

    final VerticalPanel mainPanel = new VerticalPanel();
    mainPanel.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_CENTER);
    mainPanel.setStyleName("gwt-MainPanel");
    dockPanel.add(mainPanel, DockPanel.CENTER);

    final VerticalPanel footerPanel = new VerticalPanel();
    dockPanel.add(footerPanel, DockPanel.SOUTH);
    dockPanel.setCellHeight(footerPanel, "150px"); 
```

如您所见，我添加了 CSS 样式。主面板如下所示：

```
.gwt-MainPanel {
    width: 100%;
    height: 100%;
    padding: 20px;
    background-color: #353334;
    -moz-box-shadow: 0 2px 2px 0px #232323;
    -webkit-box-shadow: 0 2px 2px 0px #232323;
    box-shadow: 0 2px 2px 0px #232323;
} 
```

所以我把高度设置为中心单元格的 100%，这是按预期使用 Firefox，但 Internet Explorer 完全忽略了它。如何使 IE 也垂直填充 DockPanel 的中心部分？我已经搜索过它并尝试将不同的 DOCTYPE 添加到 html 页面。

请在[此处](http://am.tassta.com/)查看实时示例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:15:02.873

您正在设置 100%`VerticalPanel`中间的高度`DockLayout`，但您没有将中间单元格高度设置为 100%。尝试：

```
dockPanel.setCellHeight(mainPanel, "100%"); 
```

无论如何，使用表格和百分比可能会导致您经常需要自己处理的微妙问题。总是问自己“100% 什么？”。

此外，从以下引用 javadoc `DockPanel`：

> 此小部件在标准模式中具有在怪癖模式中不存在的限制。DockPanel 中包含的子小部件不能使用百分比来调整大小。将子部件的高度设置为 100% 不会导致子部件填充可用高度。
> 
> 如果您需要解决这些限制，请改用 DockLayoutPanel，但要了解它不是此类的替代品。它需要标准模式，并且最容易在 RootLayoutPanel（与 RootPanel 相对）下使用。

使用`<!DOCTYPE html>`将页面设置为标准模式，这意味着这将无法正常工作，并且在怪癖模式下您必须自己进行试验。

`Layout`正如 javadoc 所建议的，还尝试考虑使用基于 - 的方法。由于您对整个页面（that）使用单个 div `rootContainer`，因此使用起来应该很轻松。请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:13:51.297

不要混淆布局面板和非布局面板。如果您使用的是布局面板，则不要使用垂直面板和绝对面板。查看这个[问题](https://stackoverflow.com/questions/8771922/gwt-re-sizing-components-on-browser-window-resize)及其接受的答案以获取更多详细信息。

# php - PHP 退出使我的代码工作

> ID：15900957
> 
> 赞同：3
> 
> 时间：2013-04-09T11:45:20.973
> 
> 标签：php, codeigniter, exit

不敢相信我在问这个问题，但这里......

（在 Codeigniter 中使用 PHP）

我正在将 Barclays EPDQ 集成到一个电子商务网站中以进行信用卡付款。成功付款后，EPDQ 将重定向回在 URL 中传递查询字符串参数的站点。我正在寻找从 EPDQ 发回的 orderID，如果它在那里，我会在 PHP 会话中存储一些东西并重定向到付款确认页面。如果付款不成功，订单 ID 将不存在，因此我重定向到显示 CI 视图文件的付款失败方法。

此检查和会话保存例程的条件如下：

```
$success = false;

if($_GET['orderID'])
{
    $_SESSION['payment']['order_id']  = $_GET['orderID'];
    $_SESSION['payment']['method']    = 'card';
    $_SESSION['payment']['ref']       = $_GET['PAYID'];
    $_SESSION['payment']['status']    = 'Completed';

    $success = true;
} 
```

（请注意，在执行此代码之前已初始化会话并创建了支付数组）

到目前为止很简单，对。方向的代码如下所示：

```
if(!$success)
{
    redirect('payment/card/fail');
}
else
{
    redirect('payment/confirmation');
} 
```

我遇到的问题是这种重定向不像我预期的那样工作。EPDQ 报告付款成功并根据需要重定向回我们的网站。但是，当我的脚本评估它发送的 GET 参数并进行重定向时，它总是使用失败的重定向............除非，这是真正难倒我的一点，我做这个：

```
if(!$success)
{
    exit('Failed');
    redirect('payment/card/fail');
}
else
{
    redirect('payment/confirmation');
} 
```

（注意添加的“退出”）。

一旦我包含此退出，代码就会在所有测试用例中按需要执行，我们开始看到支付成功页面。移除出口会立即恢复到 100% 测试失败。

有谁知道为什么会发生这种情况，因为我以前从未见过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:53:05.953

唯一可能的解释是 $success 没有更新并且它的预分配值为 false 的情况。通过 var_dump 检查 $success 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:12:19.623

发生这种情况的原因是 Barclays EPDQ 中的设置在主要支付响应之前发出响应（这是一个预响应响应，允许根据传入的成功或失败来定制网站）。这意味着我的函数被击中了两次，一次在第一次击中时没有 GET 参数，一次在返回带有参数的完整支付响应时使用了它们。放入出口意味着第一次命中的失败重定向没有被执行，因此脚本被允许显示成功条件。现在，从 EPDQ 中删除/取消设置此预响应意味着所有条件都按要求执行。

最后，这并不是真正的 PHP 问题，但值得注意的是，以防有人正在集成 EPDQ 并错误地在 EPDQ 的管理界面中设置此响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:52:34.657

最有可能的是，如果到达*redirect('payment/confirmation')*的唯一方法是添加对 exit 构造的调用，我会假设在所有情况下都会重定向到失败路由（即使脚本应该成功结束）。

# c# - 是否可以在 Linux 上运行 Xamarin Mono？

> ID：15900963
> 
> 赞同：44
> 
> 时间：2013-04-09T11:45:29.943
> 
> 标签：c#, android, mono, xamarin.android

我想知道是否可以在 Ubuntu 上运行 Xamarin。我不喜欢 java，所以我想用 C# 制作 Android 应用程序。

是 Ubuntu 的一个软件包，因为到目前为止我还没有看到一个？

或者...

我可以使用 Wine 在 Ubuntu 上运行 Xamarin 吗？

或者...

是否有在 Ubuntu 上运行的替代软件（具有相同功能）？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-09T12:39:45.453

Xamarin 曾在[多个](https://xamarin.uservoice.com/forums/149715-xamarin-android-suggestions/suggestions/2697538-linux-support)不同[场合](https://bugzilla.xamarin.com/show_bug.cgi?id=142)[表示](http://forums.xamarin.com/discussion/1599/xamarin-studio-in-linux)，他们短期内没有计划在 Linux 上支持 Xamarin Studio。主要原因是：

*   他们必须创建一个独立的 Mono 运行时来配合 IDE，因为不同风格的 Linux 会附带不同的 Mono 支持
*   支持多个 Linux 版本的成本将超过收益
*   缺乏支付支持的商业需求

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-01T01:18:21.523

可能值得一提的是，Miguel de Icaza（Xamarin 的 CTO）至少认为[Xamarin 在 2011 年支持 Linux 的单一发行版](https://bugzilla.xamarin.com/show_bug.cgi?id=142#c1)。他很平易近人，经常在[IRC](http://www.mono-project.com/community/help/irc/)上回答问题。即使它不支持任何类型的 GUI RAD，询问他们是否重新访问了该选项可能也很巧妙。

作为“不，你绝对不能在 Linux 上为 Xamarin 开发”的替代方案，我经常考虑[在 Linux 上使用 MonoDevelop](http://monodevelop.com/)来开发我的匿名、可共享代码。在某种程度上，当我使用 Windows 笔记本电脑时，我已经做了类似的事情。您不能使用 Xamarin Studio 在 Windows 上为 iOS 进行开发，因此我将一个普通的控制台项目存根，并让它调用我位于另一个库项目中的控制器。与 Xamarin Studio 相比，我更喜欢 Visual Studio（并且我正在使用 Starter & Indie 许可证，所以我不能将[Xamarin 用于 Visual Studio](http://xamarin.com/visual-studio)），所以我喜欢在 Windows 上进行匿名开发。然后，当我“完成”（即准备休息）这个不露面的开发人员时，我会前往 OS X 上的 Xamarin Studio，将事情连接到我在那里制作的 iOS UI 存根上。

在“for Android”的 Linux 上执行此操作很容易，并且仅在开发 UI 和创建可分发文件时使用 Windows 或 OS X。诚然，用户界面通常包含大量代码（至少总是比我预期的要多），但您可以轻松地摆脱在 Linux 上开发的良好、精心设计的库，让我们说一半或更多的代码。它迫使你很好地分离你的关注点，我一直很感激。

**编辑：**我觉得有人应该指出[Mono-qua-Mono 已经在 Linux 上运行了](http://www.mono-project.com/download/#download-lin)。只是 Xamarin 的东西——更流行的消费者平台的粘合剂——不在 Linux 上。因此，您现在可以在 Linux 上运行~~Xamarin~~ Mono，并且能够比 Xamarin 更长时间地成为“一件事”。;^)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-20T15:27:17.253

在 Ubuntu 上构建 Xamarin.Android 应用程序需要遵循几个步骤。

1.  安装 mono 的 alpha 版本（当前为 5.8），说明在他们的[网站上](http://www.mono-project.com/download/alpha/)（也可以在添加 ppa 密钥后重新安装 mono-complete）。
2.  按照以下 repo 中的说明进行操作：[https ://github.com/xamarin/xamarin-android](https://github.com/xamarin/xamarin-android)

这是一个缓慢的过程，会下载自己的临时 NDK 和其他东西，但它应该可以工作。

# java - 使用会话空闲超时轮询

> ID：15900972
> 
> 赞同：1
> 
> 时间：2013-04-09T11:46:22.697
> 
> 标签：java, web-services, tomcat, single-sign-on

我正在对 Tomcat 中的所有应用程序使用单点登录。我的要求是，我必须轮询应该从后端获取的交易状态。但它也不应该影响会话的空闲超时。

有人可以建议是否可以做点什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:23:28.927

我不知道是否有标准的方法来做到这一点。如果没有，您可以编写一个过滤器。

在过滤器中，忽略不计数的请求（例如您的轮询请求）。

对于其他请求，请检查上次请求时间（您应该在会话中保存）。如果已经过去了足够长的时间，则结束会话。否则，保存新时间。

显然，你必须看看这增加了多少开销，但是——通过一些调整——它应该可以工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-09T11:52:50.880

简单的方法是创建一个名为 PulseServlet 的 Servlet，并定期从 Javascript 或 JQuery AJAX 代码调用它以获取状态。但是，这会影响服务器上的会话超时。在不影响会话超时的情况下，您不能这样做。但是，如果您真的希望会话超时不受影响，则需要以编程方式重置会话超时。

# javascript - 防止嵌入式 YouTube 播放器电镀 onclick

> ID：15900973
> 
> 赞同：1
> 
> 时间：2013-04-09T11:46:42.693
> 
> 标签：javascript, iframe, youtube, youtube-api, youtube-javascript-api

当您在页面中嵌入 YouTube 视频时，中间有一个大播放按钮，单击该按钮即可播放视频。例如：

![按钮示例](https://i.stack.imgur.com/sTfA8.png)

有没有办法可以在播放视频之前捕获此点击事件并将其转移到做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:33:45.630

您可以在上面放一些东西..它可以链接或执行一些代码
如果 Youtube 播放器是 Flash ..那么您需要将参数
wmode=transparent 添加到播放器嵌入代码中，
这将阻止 Flash 停留在顶部。

正式地，它违反了 Youtube 的规则 (TOS)，
如果它误导了访问者，则将任何内容叠加在上面甚至更糟......谁认为他会播放视频
但被重定向到其他内容。
至少确保单击播放视频按钮确实会播放该视频。

# windows - MultiByteToWideChar 无法识别某些韩文字符

> ID：15900985
> 
> 赞同：2
> 
> 时间：2013-04-09T11:47:12.783
> 
> 标签：windows, winapi, character-encoding, multibyte-functions

MultiByteToWideChar 无法将这个韩文文本（引用打印）“2013-03-22 =0E?@HD=0F 05:30”正确转换为 Unicode。此处引用可打印的形式只是为了将这段文字放在这里，实际内容包含0xE和0xF字节。

```
MultiByteToWideChar(50225, 0, bs.pData, bs.nSize, pData + nSize, nConvertedLen); 
```

=0E?@HD=0F 按原样转换，生成的 Unicode 包含 0xE 和 0xF ASCII 字符。但是，我发现那里应该出现几个韩文字符而不是这些字符。我一直认为国际字符序列以代码大于 127 的字节开头，但最近发现它不是真的。但是， MultiByteToWideChar 仍然认为我的方式并拒绝对待 0xE ？@ HD 0xF 作为 50225（或 949）代码页的几个非 ASCII 韩语字符。当我使用 .NET 函数（如 Encoding.GetEncoding(50255).GetString）在同一台计算机上执行相同操作时，我得到正确的转换结果并且韩语字符在那里。但是 MultiByteToWideChar 不起作用。我尝试了可以​​为 MultiByteToWideChar（MB_COMPOSITE 等）设置的不同标志，但仍然没有运气。

如何让 MultiByteToWideChar 正常工作？如果重要的话，我在 WinXP SP3 上。同样，.NET 方式运行良好，并且在内部 Encoding.GetString 似乎调用了 MultiByteToWideChar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-20T07:41:26.770

这是一个[已知问题](http://support.microsoft.com/kb/960293)。根本原因是 50225 中`SHIFT IN`(0x0E) 和`SHIFT OUT`(0x0F) 的使用不一致。它们不用作编码*移位*。

重要的是要了解这些字节本身不是字符。代码页 50225 不是普通的多字节编码，例如 UTF-8。UTF-8 是无状态的；相同的字节序列总是解码为相同的 Unicode。50255 中字节序列的解码取决于之前消耗的字节，特别是 0x0E 和 0x0F。

给出的建议很有意义。使用任何合理的 Unicode 编码。（就个人而言，我建议使用 UTF-8）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T13:13:08.913

我建议不要使用**MultiByteToWideChar ，而是使用**[IMultiLanguage::ConvertStringToUnicode](https://msdn.microsoft.com/en-us/library/aa741011%28v=vs.85%29.aspx)，这是[Microsoft 建议的](https://support.microsoft.com/en-us/kb/960293)，可以正确解码字符。唯一的“缺点”是它需要 Windows XP，而 MultiByteToWideChar 在 Windows 2000 上工作。这不是一个巨大的缺点 IMO。

**IMul​​tiLanguage**还有一些其他工具可以使编码转换更容易，例如**IMultiLanguage::GetCharsetInfo**或**IMultiLanguage::EnumCodePages**。

# javascript - 根据 jshint 的错误检测将 == 更改为 === 是否安全，无需进一步检查

> ID：15900989
> 
> 赞同：0
> 
> 时间：2013-04-09T11:47:34.260
> 
> 标签：javascript, jshint

我正在检查基于 JSHint 工具的 JavaScript 代码。这个工具检测到很多关于使用“===”而不是“==”的错误。我的问题是遵循 JSHint 所说的内容是否安全？在将 == 替换为 === 之前，我是否需要进一步检查（关于它们的类型和值）？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:50:21.427

是的，你应该。

如果您在没有考虑类型强制的情况下编写代码，则可能会发生一些您没想到的错误，[例如](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

```
'' == '0'           // false
0 == ''             // true
0 == '0'            // true

false == 'false'    // false
false == '0'        // true

false == undefined  // false
false == null       // false
null == undefined   // true

' \t\r\n ' == 0     // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:48:41.590

> 我的问题是遵循 JSHint 所说的内容是否安全？

不，您可能*取决于*给出的类型强制`==`。

> 在将 == 替换为 === 之前，我是否需要进一步检查（关于它们的类型和值）？

是的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:49:13.807

```
""==0 // true

""===0 // false 
```

所以你不能盲目地改变你的所有代码并期望它像以前一样工作。这就是为什么你的代码应该有单元测试。所以你知道什么不再起作用了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T11:54:17.367

建议替换`==`为，`===`因为它使代码更易于预测且不易出错。Douglas Crockford 建议永远不要使用`==`. 然而，这只是*他的*意见。

实际上，如果你在代码中有这样的检查并且知道你在做什么（类型会被强制），甚至可能依赖于这种行为，那么使用这些比较是绝对可以的。您可以取消选中“关于不安全比较的警告”。

如果您想替换这些比较，您肯定必须检查您的代码是否继续按预期工作。

# jquery - 设置当前页面 url cookie jquery

> ID：15900990
> 
> 赞同：0
> 
> 时间：2013-04-09T11:47:38.797
> 
> 标签：jquery, url, cookies, set

如何在 cookie 中设置当前页面 url？现在我正在使用`jQuery.cookie("previousUrl", window.location.href, {path:"/"});`，但正在设置的是点击的 url。如何设置当前页面 url 而不是点击的 url？干杯，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:49:35.503

也许不完全是您正在寻找的答案，但您尝试过`document.referrer`吗？在目标页面上，它应该为您提供用户来自的页面，而不需要 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:50:12.760

尝试这个，

```
 var pathname = window.location.pathname;
    jQuery.cookie("currentPath", pathName); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:29:35.997

在此处下载 jQuery cookie 插件：github.com/carhartl/jquery-cookie

```
// setting the cookie 

$.cookie("previousUrl", "www.example.com/page/1"); 
$.cookie("currentUrl", "www.example.com/page/2"); 

// getting the cookie 

alert( $.cookie("previousUrl") );

alert( $.cookie("currentUrl") ); 
```

维护这 2 个 url 并根据需要不断更新它们。现在您的 previousUrl 不会干扰 currentUrl。

# c# - VSIntr - 去仪器文件

> ID：15900992
> 
> 赞同：0
> 
> 时间：2013-04-09T11:47:41.203
> 
> 标签：c#, visual-studio-2010, instrumentation

我的用例是：我想使用 Visual Studio 2010 中的命令行工具 VSInstr 检测 dll 文件以进行代码覆盖率分析，运行测试用例，取消检测文件，切换到另一个目录并为另一个文件切换到相同的内容。

现在我的问题是我不知道如何删除第一个文件，有人知道该怎么做吗？

**编辑：**

抱歉，为了让事情更清楚，造成误解：我的问题不是我需要恢复第一个文件，我的问题是 VSinstr 不会让我在检测另一个文件时检测第二个文件以进行代码覆盖。如果我按照建议简单地删除检测文件，我会收到错误“错误 VSP1005：命令行错误：不支持检测多个文件”。当我尝试检测另一个文件时。

但是，如果我在没有我需要使用的命令行参数“Coverage”的情况下调用 VSinstr，它会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:55:53.003

您不需要“取消检测”文件 - 如果您没有为检测版本指定新名称，原始版本将被重命名，因此您只需删除检测的 DLL 并将原始版本重命名。下面复制[的 VSInstr 文档](http://msdn.microsoft.com/en-us/library/ms182402%28v=vs.100%29.aspx)部分

![截屏](https://i.stack.imgur.com/DafzO.png)

# c# - 在 Windows 7 中的特殊文件夹上引发异常

> ID：15900993
> 
> 赞同：3
> 
> 时间：2013-04-09T11:47:42.350
> 
> 标签：c#, .net, windows-7, directory, authorization

在我的应用程序中，我使用以下命令从选定路径获取所有文件：

```
foreach (string currentFile in Directory.EnumerateFiles(@"c:\", "*.*", SearchOption.AllDirectories))
{
    //some logic here
} 
```

问题是，当尝试访问某些目录时，例如`c:\Documents and Settings`我得到一个`UnauthorizedAccessException`.

上面提到的文件夹没有显示在里面`Windows Explorer`或里面，`.NET System.Windows.Forms.FolderBrowserDialog`我找不到这个文件夹的特定属性，所以我可以过滤枚举。

我试过[这个](https://stackoverflow.com/questions/130617/how-do-you-check-for-permissions-to-write-to-a-directory-or-file)和[这个](https://stackoverflow.com/questions/1281620/checking-for-directory-and-file-write-permissions-in-net)但没有用。

是否有任何类型的属性或参数可以用来限制循环中的此类目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:52:22.487

目录类不提供跳过无法访问的文件和文件夹的方法。您可以编写自己的目录扫描方法，该方法将递归地进入每个文件夹并在发生异常时跳过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:54:24.883

您不能让系统管理员授予您的用户对所有文件的读取权限吗？听起来有些东西是您无法访问的。虽然我不阻止您通过仅从可移植性的角度排除这些文件来解决这个问题（不幸的是，我不能直接谈论如何做到这一点）。

# sql - 如何按计算字段分组

> ID：15900999
> 
> 赞同：41
> 
> 时间：2013-04-09T11:48:10.993
> 
> 标签：sql, sql-server, tsql, group-by

我需要按 SQL Server 2005/2008 中的计算字段进行分组。

我有以下sql：

```
select dateadd(day, -7, Convert(DateTime, mwspp.DateDue) + (7 - datepart(weekday, mwspp.DateDue))),
sum(mwspp.QtyRequired)
from manufacturingweekshortagepartpurchasing mwspp
where mwspp.buildScheduleSimID = 10109 and mwspp.partID = 8366
group by mwspp.DateDue
order by mwspp.DateDue 
```

而不是`group by mwspp.DateDue`我需要按计算结果分组。是否可以 ？

提前致谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-09T11:51:15.997

当然，只需在`GROUP BY`子句中添加相同的计算：

```
select dateadd(day, -7, Convert(DateTime, mwspp.DateDue) + (7 - datepart(weekday, mwspp.DateDue))),
sum(mwspp.QtyRequired)
from manufacturingweekshortagepartpurchasing mwspp
where mwspp.buildScheduleSimID = 10109 and mwspp.partID = 8366
group by dateadd(day, -7, Convert(DateTime, mwspp.DateDue) + (7 - datepart(weekday, mwspp.DateDue)))
order by dateadd(day, -7, Convert(DateTime, mwspp.DateDue) + (7 - datepart(weekday, mwspp.DateDue))) 
```

**评论后编辑：**

像所有关于优化器的问题一样，答案实际上是“视情况而定”，但很可能它只会执行一次 - 您将在执行计划中将其视为**计算标量**运算符。

基于这个**计算标量**操作，优化器将决定如何执行实际的聚合。

这里的其他答案（CTE/子查询等）都同样有效，但并没有真正改变逻辑——最终它们将执行类似的操作。SQL Server 可能会以不同的方式对待它们，但不太可能。但是，它们将有助于提高可读性。

如果您担心效率，您可以查看几个选项，例如将计算设置为[持久计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)并在索引中使用它，或者将中间结果添加到临时表中。

真正确定的唯一方法是在对典型数据集运行查询时检查执行计划/IO 统计信息，看看您是否对性能感到满意；如果没有，也许调查上述选项之一。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-09T11:51:30.377

如果要进行`GROUP BY`dateadd 计算，则需要将该公式放在`GROUP BY`子句中，或者可以将查询包装在另一个 SELECT 中：

```
select DateCalc,
  sum(QtyRequired) TotalQty
from
(
  select mwspp.DateDue,
    dateadd(day, -7, Convert(DateTime, mwspp.DateDue) + (7 - datepart(weekday, mwspp.DateDue))) DateCalc,
    mwspp.QtyRequired
  from manufacturingweekshortagepartpurchasing mwspp
  where mwspp.buildScheduleSimID = 10109 
    and mwspp.partID = 8366
) src
group by DateCalc
order by DateCalc 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T11:53:41.493

有几种方法可以这样做 - 一种涉及使用 CTE：

```
with cte as 
(select m.*, 
        dateadd(day, -7, Convert(DateTime, DateDue) + (7 - datepart(weekday, DateDue))) datecalc
 from manufacturingweekshortagepartpurchasing m)
select datecalc, sum(QtyRequired)
from cte
where buildScheduleSimID = 10109 and partID = 8366
group by datecalc
order by datecalc 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T11:53:46.327

只需将计算放在`GROUP BY`子句中：

代替

```
group by mwspp.DateDue 
```

到

```
group by dateadd(day, -7, Convert(DateTime, mwspp.DateDue) + (7 - datepart(weekday, mwspp.DateDue))) 
```