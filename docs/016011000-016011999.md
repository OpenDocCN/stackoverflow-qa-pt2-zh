# StackOverflow 问答 16011000-16011999

# c# - 如何在特定列的 DataGridView 中添加 TextBox？

> ID：16011000
> 
> 赞同：1
> 
> 时间：2013-04-15T08:42:33.840
> 
> 标签：c#, .net, datagridview, datagridviewcolumn, datagridviewtextboxcell

```
void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
     TextBox txtbox = e.Control as TextBox;
     if (this.dataGridView1.CurrentCell.ColumnIndex == 0)
     {
         if (txtbox != null)
         {
             //
         }
     }
} 
```

我还使用 AutoCompleteStringCollection 进行了编码。

代码正在运行，

1.  在编辑第 1 列之前，它不允许自动完成任何其他列。

2.  一旦编辑了第 1 列，所有列将与第 1 列相同。

请帮助我如何解决问题或任何其他最佳方法，请在此处分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T22:27:27.407

这应该有效。

```
private bool firstColEdited = false;
/************************************************************/
var source = new AutoCompleteStringCollection();
String[] stringArray = Array.ConvertAll<DataRow, String>(products.Select(), delegate(DataRow row) { return (String)row["code"]; });
source.AddRange(stringArray);
/************************************************************/
void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    TextBox txtbox = e.Control as TextBox;
    if (this.dataGridView1.CurrentCell.ColumnIndex == 0 || firstColEdited)
    {
        firstColEdited = true;
        txtbox.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
        txtbox.AutoCompleteCustomSource = source;
        txtbox.AutoCompleteSource = AutoCompleteSource.CustomSource;
    }
 } 
```

# syntax-highlighting - .vimrc 如何设置自己的文件类型？

> ID：16011003
> 
> 赞同：1
> 
> 时间：2013-04-15T08:42:37.340
> 
> 标签：syntax-highlighting, vim, vim-syntax-highlighting

针对 SuperUser 上的[这个问题](https://superuser.com/questions/582573/is-there-a-simple-setting-that-make-vim-find-filetype-more-smart/582579#582579)，我编写了一个小的 vimscript，它将检测符号链接的文件类型并更改语法突出显示：

> au BufNewFile,BufRead * if &syntax == '' | 沉默的！执行 (':set filetype='.matchstr(resolve(@%),'.[^.]*$')[1:]) | 万一

因此，如果我打开一个没有扩展名的符号链接，它将查看它指向的文件的扩展名。

它可以工作，但一个意想不到的结果是，现在我的`.vimrc`文件的语法高亮已经消失了。默认情况下，我的 .vimrc 文件具有 vim 语法高亮显示（`:echo &syntax`返回`vim`）。

但是当我添加上面的行时，`:echo &syntax`返回`vimrc`（无效类型）。

我不知道为什么会这样。不应该`&syntax==''`评估为假，从而保持`&syntax==vim`？我怀疑我的代码在语法高亮设置为`vim`. 但是，语法高亮究竟*是*如何（以及何时）设置为`vim`for 的`.vimrc`？此外，我怎样才能让我的脚本按照它应该的方式运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:34:29.017

在 Vim 的运行时区中查找`filetype.vim`. 你可以在 vim 中使用：

```
:e $VIMRUNTIME/filetype.vim 
```

在我的版本中，这条线似乎可以解决问题：

```
" Vim script
au BufNewFile,BufRead *vimrc*           call s:StarSetf('vim') 
```

也许你想把你`autocmd`的`~/.vim/after/filetype.vim`。我相信这会导致它在系统注册之后注册，然后`&syntax`应该正确设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:32:10.583

[jszakmeister 的回答](https://stackoverflow.com/a/16011889/353278)准确地诊断了问题：`filetype.vim`为 vimrc 设置文件类型。

但是，为了将所有内容保留在 .vimrc 文件中，另一种解决方案是使用：

> au BufNewFile,BufReadPre * if &syntax == '' | 沉默的！执行 (':set filetype='.matchstr(resolve(@%),'.[^.]*$')[1:]) | 万一

注意从**BufRead**到**BufReadPre**的变化。该更改导致该行在filetype.vim*之前执行。*语法将更改为`vimrc`，但随后更改为`vim`。结果是脚本可以正常工作，但保留了 vimrc 的语法突出显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:18:47.740

当前文件为`~/.vimrc`时，这部分代码

```
matchstr(resolve(@%),'.[^.]*$') 
```

返回您的文件名：`.vimrc`.

我不知道你怎么能想象那`/home/username/.vimrc`会产生`vim`.

对于您尝试解决的问题，这显然是一种不好的方法，但没有错误：您得到的正是您所要求的。使用文件类型的文件名/扩展名不能可靠地工作（`js`vs `javascript`，`py`vs `python`...）。

`if/elseif`如果你想让你的代码做你想做的事情，你可能需要一个文件名/文件类型列表或许多。

见`:h syntax-loading`。

# c# - 在 C# 代码中运行批处理文件

> ID：16011010
> 
> 赞同：0
> 
> 时间：2013-04-15T08:42:48.833
> 
> 标签：c#

请帮助我，我在特定位置有一个 .bat 文件，我想执行它，看看如果手动单击它会发生什么情况，问题是 .bat 文件作为弹出窗口运行只是片刻，没有完成任何过程，我的代码就好像

```
int exitCode;
            ProcessStartInfo processInfo;
            Process process;
            string command = @"D:\programs\PreRef\Run.bat";
            processInfo = new ProcessStartInfo("cmd.exe", "/c " + command);
            //processInfo.CreateNoWindow = true;
            processInfo.UseShellExecute = false;
            // *** Redirect the output ***
            processInfo.RedirectStandardError = true;
            processInfo.RedirectStandardOutput = true;

            process = Process.Start(processInfo);
            process.WaitForExit();

            // *** Read the streams ***
            string output = process.StandardOutput.ReadToEnd();
            string error = process.StandardError.ReadToEnd();

            exitCode = process.ExitCode;
            process.Close(); 
```

所以请帮我解决这个问题。注意这个`.bat`文件运行另一个`.exe`程序，`.bat`文件中的文本就像`PreRef.exe "D:\programs\PreRef"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:52:13.777

你可以试试这个：

```
Process objProcess = new Process();
objProcess.StartInfo.UseShellExecute = false;
objProcess.StartInfo.RedirectStandardOutput = true;
objProcess.StartInfo.CreateNoWindow = true;
objProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;   
//file location
objProcess.StartInfo.FileName = string.Format(@"D:\programs\PreRef\Run.bat";");
//any argument 
objProcess.StartInfo.Arguments = string.Format("");
try
{
 objProcess.Start();
}
catch
{
 throw new Exception("Error");
}
StreamReader strmReader = objProcess.StandardOutput;
string strTempRow = string.Empty;
while ((strTempRow = strmReader.ReadLine()) != null)
{
    Console.WriteLine(strTempRow);
}
if (!objProcess.HasExited)
{
   objProcess.Kill();
} 
```

# image - ？？？错误：文件：generation1.m 行：43 列：1 在提示符或脚本中不允许函数定义

> ID：16011013
> 
> 赞同：-3
> 
> 时间：2013-04-15T08:42:56.453
> 
> 标签：image, matlab, image-processing

1.通过应用DCT将图像带入频域

2.生成水印信号

3.利用原图最大的一千个系数嵌入长度为1000的水印序列。

4.系数根据消息的流位使用以下等式进行修改，

|CAW = CA (1 + α Wi)|

5.提取过程——简单地从加水印的图像系数中减去原始的DCT系数

```
function WM_plot(r,c,ext_wm,orig_wm)  
  for k=1:1000
  wm=randn(r,c);%depending on the size of the watermark
  wm=uint8(wm);%if necessary
  store(k)=WM_detect(ext_wm,wm);%wrong watermarks
  if k == 400
    store(k)=WM_detect(ext_wm,orig_wm);%original watermark detection
   end
  end
  figure(1),plot(1:k,[store]),ylabel('Watermark detector   response'),xlabel('random        watermarks');
  hold on
  %threshold calculation
      [peak,ind]=sort(store,'descend');
    threshold=peak(2)+(peak(2)*0.1);%T=second highest peak+10percentof the same
   figure(1),plot(1:1000,[threshold],'red');
   hold on
   figure(1),plot(1:1000,peak(2),'green'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T08:52:53.317

错误«在提示或脚本中不允许函数定义» - 告诉您您试图在错误的位置定义函数。根据[matlab answers](http://www.mathworks.com/matlabcentral/answers/23722)中的类似问题，您应该：

将每个函数写在一个编辑器文件中，并保存为函数的标题，例如：

```
function hello_world(hObject,evt)
  fprintf(2,'Hello World!');
end 
```

保存在 hello_world.m

然后你应该从你的主应用程序中调用你的函数。

# grails - Grails：如何创建静态数组

> ID：16011014
> 
> 赞同：0
> 
> 时间：2013-04-15T08:43:04.760
> 
> 标签：grails, static

我是 grails 的新手。我需要创建一个静态数组，需要在启动时填充某些项目。IE

```
public class kingUtil {

    public static String[] overlordArray = new String[]

    static def init() {
        overlordArray[0] = "foos"
        overlordArray[1] = "roh"
        overlordArray[2] = "dah"
    }
} 
```

因此，我将实用程序 groovy 类放在源代码中，并打算从引导程序中调用 init()。但是，引导程序无法识别类名，就像它无法访问它一样。在 grails 中建立实现应用程序范围静态的最佳方法是什么。

# java - 从编辑文本中抓取文本并在当前文本视图中突出显示该文本

> ID：16011022
> 
> 赞同：2
> 
> 时间：2013-04-15T08:43:21.240
> 
> 标签：java, android

我正在开发模块以从编辑文本中搜索抓取文本并将其搜索到当前文本视图中。如果存在，则在当前文本视图中突出显示此文本。我也用谷歌搜索了这段代码，但没有找到任何相关的答案。

```
tv=(TextView) mView.findViewById(R.id.detailsText);
    edit_text=(EditText)findViewById(R.id.searchText);

edit_text.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

            hightLightText(tv, s.toString());
        }
    });

}

void hightLightText(TextView textView, String searchString){
    try{

        String s=getResources().getString(R.string.firstpage);

        String withHighLightedText = s.replaceAll(searchString, "<font color='red'>"+searchString+"</font>");
        String styledText = "This is <font color='red'>simple</font>.";
        textView.setText(Html.fromHtml(withHighLightedText), TextView.BufferType.SPANNABLE);
        }catch(Exception ex){

        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T08:57:55.170

其中的HTML 标记格式`TextView`非常有限。

```
<b>Bold</b> and <i>Italic</i> 
```

做工作，但是

```
<font color> 
```

可悲的是没有。

使用[Spannable](http://developer.android.com/reference/android/text/Spannable.html)来突出显示您想要的部分文本。

这是在视图中将选定文本设为斜体的示例*：*`EditText` Is [there any example about Spanned and Spannable text](https://stackoverflow.com/questions/2159847/is-there-any-example-about-spanned-and-spannable-text)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:11:45.203

调用以下函数进行突出显示。

```
public void hightLightText(TextView textView, String searchString) {
    String s = textView.getText().toString();
    SpannableString str = new SpannableString(s);
    if (searchString != null && !searchString.equalsIgnoreCase("")) {
        int startIndex = 0;
        while (true) {
            startIndex = s.indexOf(searchString, startIndex);

            if (startIndex >= 0) {
                str.setSpan(new BackgroundColorSpan(Color.YELLOW),
                        startIndex, startIndex + searchString.length(),
                        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                startIndex++;
            } else {
                break;
            }
        }
    }
    textView.setText(str);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:07:21.417

```
EditText edit_text;
TextView tv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edittest);
    tv=(TextView) findViewById(R.id.detailsText);
    edit_text=(EditText)findViewById(R.id.searchText);

  edit_text.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

            hightLightText(tv, edit_text.getText().toString().trim());
        }
    });

}

void hightLightText(TextView textView, String searchString){
    try{

        String s=getResources().getString(R.string.app_name);

        String withHighLightedText = s.replaceAll(searchString, "<font color='red'>"+searchString+"</font>");
        String styledText = "This is <font color='red'>simple</font>.";
        textView.setText(Html.fromHtml(withHighLightedText), TextView.BufferType.SPANNABLE);
        }catch(Exception ex){

        }

} 
```

在您的代码中只需更改以下方法

```
 @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

        hightLightText(tv, edit_text.getText().toString().trim());
    } 
```

# css - 主div两边的div，填充剩余空间

> ID：16011026
> 
> 赞同：0
> 
> 时间：2013-04-15T08:44:20.070
> 
> 标签：css, html, background

我很难把我的大脑包裹在这个周围。

我将如何获得一个固定宽度的 div，margin:auto，然后在该 div 的两侧都有 div 可以自动调整其宽度以填充其余空间？

感谢感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:58:23.687

试试这个[jsfiddle](http://jsfiddle.net/Y7NAR/)它使用简单的`display`属性来实现这个布局。即使您将宽度缩放到极小值，它也会为您提供一致的布局，并且您无需硬编码任何内容，除了`<div>`您也可以在`%`.

## 更新

First fiddle 的中心`<div>`宽度`%`使其适合响应式设计。[这个小提琴](http://jsfiddle.net/Y7NAR/1/)的中心宽度固定*（以像素为单位）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:53:28.197

像这样没有任何容器的东西。

[http://jsfiddle.net/JuG8W/](http://jsfiddle.net/JuG8W/)

HTML

```
<div id="left">left</div>
<div id="middle">middle</div>
<div id="right">right</div> 
```

CSS

```
#left{
   float:left;
   width: calc( 50% - 150px );
   background-color:blue;
}
#right{
    float:right;    
    width: calc( 50% - 150px );
    background-color:green;
}
#middle{
   float:left;
   width:300px; 
   margin:0 auto;
   background-color:red;
} 
```

# c# - 如何检索邮件项目 (Outlook.MailItem) 的 Outlook 文件夹？

> ID：16011029
> 
> 赞同：5
> 
> 时间：2013-04-15T08:44:33.903
> 
> 标签：c#, outlook, vsto, outlook-2010

我通过以下方式获取我的默认收件箱文件夹`inboxFolder = Globals.ThisAddIn.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox`

在我的代码的其他地方，我开始执行 foreach 循环以从这些 MailItems 中提取我想要的特定信息

```
foreach (var item in this.inboxFolder.Items)
{
   Outlook.MailItem mailItem = (Outlook.MailItem)item;
   //.... doing stuff here
   string SenderEmail = mailItem.SenderEmailAddress;
   string SenderName = mailItem.SenderName;
   string FolderLocation = mailItem.???;  //how to retrieve folder location?
   //.... more stuff here
} 
```

例如：用户可能创建了一个名为“Test”的子文件夹，如下所示。

![Outlook-2010 中用户创建的子文件夹的图像](https://i.stack.imgur.com/xC7cB.jpg)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-06-07T06:00:32.803

谢谢各位大侠指点。但是，我最初在实施相同时遇到了一些麻烦。这是我解决它的方法，以防万一有人遇到同样的问题。

```
Outlook.MAPIFolder parentFolder = mailItemToDelete.Parent as Outlook.MAPIFolder;
string FolderLocation = parentFolder.FolderPath; 
```

Parent 对象是动态的，因此引起了问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T16:23:08.840

你的意思是文件夹路径？使用 MAPIFolder.FullFolderPath。或 MAPIFoldert.Name 如果您只需要名称。

还要记住，文件夹中所有项目的值都相同，因此没有理由在循环的每个步骤中对其进行评估。

# c# - 使用 imageresizer 库转换 psd 图像时出错

> ID：16011030
> 
> 赞同：0
> 
> 时间：2013-04-15T08:44:34.833
> 
> 标签：c#, image-resizing, imageresizer

使用 imageresizer 库转换 psd 图像时出现以下错误（[http://imageresizing.net/](http://imageresizing.net/)）

```
"A generic error occurred in GDI+" 
```

我正在传递以下参数：

```
decoder=freeimage&scale=both&mode=max&quality=100&ignoreicc=false&dpi=96&width=240&height=240 
```

我正在调整以下图片的大小： [https ://docs.google.com/file/d/0B5s7cXZgfIAoaVB4eGo0T1NOSGM/edit?usp=sharing](https://docs.google.com/file/d/0B5s7cXZgfIAoaVB4eGo0T1NOSGM/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:29:14.403

### 如果 FreeImage 正在解码图像，你会得到一个不同的错误，而不是 GDI+。

请创建诊断页面输出的[要点](http://gist.github.com)，并向我们展示 FreeImageDecoder 已正确安装。

# postgresql - 重复的单个数据库记录

> ID：16011032
> 
> 赞同：1
> 
> 时间：2013-04-15T08:44:39.833
> 
> 标签：postgresql, plpgsql, postgresql-9.0

您好，在同一张表上复制数据库记录的最简单方法是什么？

我的问题是我正在执行此操作的表有很多列，比如 100+，我不喜欢解决方案的样子。这是我所做的（这是在 plpqsql 函数中）：...

**1.重复记录**

```
INSERT INTO history 
  (SELECT NEXTVAL('history_id_seq'), col_1, col_2, ... , col_100)
   FROM history
   WHERE history_id = 1234
   ORDER BY datetime DESC
   LIMIT 1)
 RETURNING
   history_id INTO new_history_id; 
```

**2.更新部分栏目**

```
UPDATE history
SET 
    col_5 = 'test_5', 
    col_23 = 'test_23', 
    datetime = CURRENT_TIMESTAMP
WHERE history_id = new_history_id; 
```

* * *

**这是我试图解决的问题**

1.  列出所有这 100 多列看起来很蹩脚
2.  当最终添加新列时，该功能也应该更新
3.  在单独的数据库实例上，列顺序可能不同，这会导致函数失败

我不确定是否可以再次列出它们（解决问题 3），`insert into <table> (<columns_list>) values (<query>)`但查询看起来更丑陋。

我想实现像“插入”这样的东西，但这似乎是不可能的，唯一的主键约束会引发重复错误。

有什么建议么？

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:29:07.780

这不是很漂亮或特别优化，但有几种方法可以解决这个问题。理想情况下，您可能希望在 UPDATE 触发器中完成所有这些操作，尽管您可以实现如下所示的复制功能：

```
-- create source table
CREATE TABLE history (history_id serial not null primary key, col_2 int, col_3 int, col_4 int, datetime timestamptz default now());

-- add some data
INSERT INTO history (col_2, col_3, col_4)
  SELECT g, g * 10, g * 100 FROM generate_series(1, 100) AS g;

-- function to duplicate record
CREATE OR REPLACE FUNCTION fn_history_duplicate(p_history_id integer) RETURNS SETOF history AS
$BODY$
DECLARE
  cols text;
  insert_statement text;
BEGIN

  -- build list of columns
  SELECT array_to_string(array_agg(column_name::name), ',') INTO cols
    FROM information_schema.columns 
    WHERE (table_schema, table_name) = ('public', 'history')
    AND column_name <> 'history_id';

  -- build insert statement
  insert_statement := 'INSERT INTO history (' || cols || ') SELECT ' || cols || ' FROM history WHERE history_id = $1 RETURNING *';

  -- execute statement
  RETURN QUERY EXECUTE insert_statement USING p_history_id;

  RETURN;

END;
$BODY$
  LANGUAGE 'plpgsql';

-- test
SELECT * FROM fn_history_duplicate(1);
 history_id | col_2 | col_3 | col_4 |           datetime            
------------+-------+-------+-------+-------------------------------
        101 |     1 |    10 |   100 | 2013-04-15 14:56:11.131507+00
(1 row) 
```

正如我在原始评论中所指出的，您还可以查看[colnames 扩展](http://pgxn.org/dist/colnames/)作为查询信息模式的替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T08:57:54.137

无论如何您都不需要更新，您可以直接在`SELECT`语句中提供常量值：

```
INSERT INTO history 
SELECT NEXTVAL('history_id_seq'), 
       col_1, 
       col_2, 
       col_3, 
       col_4, 
       'test_5', 
       ... 
       'test_23', 
       ...,
       col_100
FROM history
WHERE history_sid = 1234
ORDER BY datetime DESC
LIMIT 1
 RETURNING history_sid INTO new_history_sid; 
```

# jquery - 取消选中所有复选框，然后检查一些

> ID：16011035
> 
> 赞同：0
> 
> 时间：2013-04-15T08:44:47.990
> 
> 标签：jquery

有没有办法在加载页面时取消选中页面上的所有复选框，然后如果其中一些被选中，则同时将其保存在变量中并使其选中。我试过这个

```
$('input[id^="chkbx_"]').prop("checked", false);

var a;
if ($("#chkbx_program_a").prop("checked")){
a= "true";
}else{
a= "false";
}

     $('#chkbx_program_b').prop('checked', a);
}
}); 
```

但仍然所有复选框都未选中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:57:20.997

我不明白为什么在检查#chkbx_program_a 时是否要检查#chkbx_program_b。如果你想这样做，那么你可以这样做。

`$e = $("#chkbx_program_b").prop("checked",$("chkbx_program_a").prop("checked")); $('input[id^="chkbx_"]').not($e).prop("checked", false);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:48:58.333

它不起作用的原因是程序逻辑的顺序错误。首先你取消选中所有复选框，*然后*检查其中一个是否被选中——当然不是，因为你只是取消选中它。您可以将保存其状态的部分移到开头，它会起作用，甚至更好：

```
$('input[id^="chkbx_"]').not("#chkbx_program_a").prop("checked", false); 
```

这将取消选中除一个复选框之外的所有内容。

# javascript - 下拉列表在 IE 7 上打开/隐藏在另一个下拉列表后面

> ID：16011046
> 
> 赞同：1
> 
> 时间：2013-04-15T08:45:06.310
> 
> 标签：javascript, jquery, html, css, internet-explorer-7

我在 html 页面上创建了两个下拉列表。这在 IE 10、IE 9、IE 8 和其他浏览器（如 Firefox、Chrome、Opera、Safari）上运行良好，但在 IE 7 上不起作用。在 IE 7 上，它隐藏在另一个下拉列表后面，请参见图片

![在此处输入图像描述](https://i.stack.imgur.com/yaCqd.png)

代码行如下

HTML 代码

```
<html>
<head>
    <title>Index</title>
    <link href="../../Content/dd1.css" rel="stylesheet" type="text/css" />
</head>
<body style="background-color: #4876b9;">
    <table style="">
        <tr>
            <td>
                <select id="ItemList1" name="ItemList1" style="width: 240px; position: relative;
                    z-index: 0;">
                    <option value="" tooltipdata="">Item 1</option>
                    <option value="" tooltipdata="">Item 2</option>
                    <option value="" tooltipdata="">Item 3</option>
                    <option value="" tooltipdata="">Item 4</option>
                    <option value="" tooltipdata="">Item 5</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <select id="ItemList2" name="Application" style="width: 240px;">
                    <option value="" tooltipdata="">Item 6</option>
                    <option value="" tooltipdata="">Item 7</option>
                    <option value="" tooltipdata="">Item 8</option>
                    <option value="" tooltipdata="">Item 9</option>
                    <option value="" tooltipdata="">Item 10</option>
                </select>
            </td>
        </tr>
    </table>
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/dropdown/jquery.dd.js")" type="text/javascript"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            jQuery.noConflict();
            jQuery("#ItemList1").msDropDown({ mainCSS: 'dd2' });
            jQuery("#ItemList2").msDropDown({ mainCSS: 'dd2' });
        });
    </script>
</body>
</html> 
```

下拉列表 CSS (dd1.css)

```
.dd2
{
    text-align: left;
    background-color: #E5E5E5;
    font-family: TradeGothic;
    font-style: oblique;
    font-size: 14px;
    color: #000000;
    position: relative;
}
.dd2 .ddTitle
{
    text-indent: 0;
    cursor: default;
    overflow: hidden;
    height: 25px;
}
.dd2 .ddTitle span.arrow
{
    background: transparent url(../../Content/icon-arrow.gif) no-repeat 0 0;
    float: right;
    display: inline-block;
    width: 25px;
    height: 25px;
    cursor: pointer; 
    position: relative;
}

.dd2 .ddTitle span.ddTitleText
{
    text-indent: 1px;
    overflow: hidden;
    line-height: 25px;
    margin-left: 5px;
    font-family: TradeGothic;
    font-style: oblique;
    font-size: 14px;
}
.dd2 .ddTitle span.ddTitleText img
{

}
.dd2 .ddTitle img.selected
{

    vertical-align: top;
}
.dd2 .ddChild
{
    position: absolute;
    background-color: #fff;
    border: 1px solid #e5e5e5;
    border-top: none;
    display: none;
    margin: 0;
    width: auto;
    overflow: auto;
    overflow-x: hidden !important;
    font-size: 14px;
}
.dd2 .ddChild .opta a, .dd2 .ddChild .opta a:visited
{
    padding-left: 10px;
}
.dd2 .ddChild a
{
    display: block;
    text-decoration: none;
    color: #000;
    overflow: hidden;
    white-space: nowrap;
    cursor: pointer;
    padding-left: 10px;
    padding-top: 1px;
    margin-bottom: 0px;
    height: 25px;
    line-height: 25px;
}
.dd2 .ddChild a:hover
{
    background-color: #d21c1c;
    color: #fff;
}
.dd2 .ddChild a img
{
    border: 0;
    padding: 0 2px 0 0;
    vertical-align: middle;
}
.dd2 .borderTop
{
    border-top: 1px solid #c3c3c3 !important;
}
.dd2 .noBorderTop
{
    border-top: none 0 !important;
} 
```

[下拉 JS 文件](http://code.google.com/p/phpwcms-modules/source/browse/trunk/include/inc_module/mod_cm_calendar/template/msdropdown/js/jquery.dd.js?r=86)

问题：需要进行哪些更改才能使其在 IE7 上运行，就像显示的其他浏览器一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:30:53.987

尝试将 z-index 从选择框中移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:54:53.800

尝试设置`position:relative`为您的选择器的父级。我认为您可能会遇到 IE7 位置错误。[您可以在此处](http://snook.ca/archives/html_and_css/position_relative_overflow_ie)检索有关该错误的更多信息。

# python - 谷歌驱动API和服务帐户

> ID：16011049
> 
> 赞同：4
> 
> 时间：2013-04-15T08:45:14.603
> 
> 标签：python, google-drive-api

我为我的帐户名@steelkiwi.com（Google 应用程序）创建了服务帐户，我的应用程序运行良好。然后我为我的个人帐户 name@gmail.com 创建了服务帐户，将这个新凭据用于我的应用程序，现在当我尝试插入文件时，我收到错误 500 和下一个文本：

> [请求https://www.googleapis.com/upload/drive/v2/files?quotaUser=30&uploadType=resumable&convert=true&ocr=false&alt=json](https://www.googleapis.com/upload/drive/v2/files?quotaUser=30&uploadType=resumable&convert=true&ocr=false&alt=json)时出现 HttpError 500返回“内部错误”

唯一改变的是凭据 SERVICE_ACCOUNT_EMAIL 和 SERVICE_ACCOUNT_PKCS12_FILE_PATH。我试图为 name@steelkiwi.com 创建另一个服务帐户，但没有帮助，所以基本上我的应用程序只适用于第一个服务帐户。语言是python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:28:12.140

如果您使用您的应用程序域管理员创建服务帐户，您应该能够通过更改以下`prn`属性来模拟所有用户。如果您没有设置`prn`域外的用户，您应该会看到访问错误。

```
f = open('path-to-privatekey.p12')
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials('xxx@developer.gserviceaccount.com', key, scope='https://www.googleapis.com/auth/drive', prn='user@steelkiwi.com')

http = httplib2.Http()
credentials.authorize(http)

client = build('drive', 'v2', http=http) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:11:28.797

好的，我不确定发生了什么事情，也许在这次事故后修复了[http://www.google.com/appsstatus#hl=en&v=issue&ts=1366405199000&iid=369723584758ad9cdfd010ac44c8272e](http://www.google.com/appsstatus#hl=en&v=issue&ts=1366405199000&iid=369723584758ad9cdfd010ac44c8272e) 但现在一切正常。起初，我从使用服务帐户[https://gist.github.com/mobedigg/5420958](https://gist.github.com/mobedigg/5420958)的示例创建了简单的小应用程序也。除了凭据，主代码没有任何变化。我还在这个小应用程序上尝试了其他凭据，他们使用它并使用主代码。这很奇怪。

# php - TCPDF ERROR: 一些数据已经输出，不能发送 PDF 文件

> ID：16011050
> 
> 赞同：27
> 
> 时间：2013-04-15T08:45:14.983
> 
> 标签：php, tcpdf

尝试将自己的数组添加到代码中时，我不断收到此错误。这是我的数组；

```
$array = array();

while (odbc_fetch_row($rs))
{
$array[] = odbc_result($rs,'Product Name');
} 
$test = print_r($array); 
```

原始代码在这里。我正在使用示例页面进行尝试，因为我知道示例页面可以正常工作。

[http://www.tcpdf.org/examples/example_001.phps](http://www.tcpdf.org/examples/example_001.phps)

这段代码在 $html 变量之前，当它被设置时，我只需将 $test 变量添加到 $html 变量中。odbc 连接工作正常，示例在我添加任何代码之前工作正常，但是当我运行脚本时出现此错误；

```
Array ( [0] => Test1 [1] => Test2 ) TCPDF ERROR: Some data has already been output, can't send PDF file 
```

并且数组中也有超过 2 项。有任何想法吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2016-03-11T23:06:41.073

添加函数 ob_end_clean(); 在调用输出函数之前。它在自定义 Wordpress 功能中对我有用！

```
ob_end_clean();
$pdf->Output($pdf_name, 'I'); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-01-15T06:10:38.257

只需使用 ob_start(); 在页面顶部。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-06-17T02:06:27.320

在调用输出函数之前添加函数 ob_end_clean()。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-25T03:48:57.707

我只想补充一点，我收到了这个错误，在我将`Output`目标参数从`F`更改为 之前，没有任何办法可以解决它`FI`。换句话说，我必须同时输出到文件和内联。

```
Output('doc.pdf', 'I') 
```

至

```
Output('doc.pdf', 'FI') 
```

我不知道为什么这会有所不同，但它为我解决了错误......

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-03T20:32:19.340

这个问题意味着你有标题。删除标签

> ?>

在代码的末尾，并确保开头没有空格。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-04-24T06:44:30.680

导致“数据已输出”的 tcpdf 文件位于名为 tcpdf.php 的 tcpdf 文件夹中。你可以修改它：

添加行**ob_end_clean();** 如下（倒数第三行）：

```
public function Output($name='doc.pdf', $dest='I') {
    //LOTS OF CODE HERE....}
    switch($dest) {
        case 'I': {
        // Send PDF to the standard output
        if (ob_get_contents()) {
        $this->Error('Some data has already been output, can\'t send PDF file');}
        //some code here....}
            case 'D': {         // download PDF as file
        if (ob_get_contents()) {
    $this->Error('Some data has already been output, can\'t send PDF file');}
            break;}
        case 'F':
        case 'FI':
        case 'FD': {
            // save PDF to a local file
                 //LOTS OF CODE HERE.....       break;}
        case 'E': {
            // return PDF as base64 mime email attachment)
        case 'S': {
            // returns PDF as a string
            return $this->getBuffer();
        }
        default: {
            $this->Error('Incorrect output destination: '.$dest);
        }
    }
           ob_end_clean(); //add this line here 
    return '';
} 
```

现在让我们看看你的代码。
我看到您混淆了 $rs 和 $sql 。这是两个不同的东西一起工作。

```
$conn=odbc_connect('northwind','****','*****');
if (!$conn) {
   exit("Connection Failed: " . $conn);
 }

$sql="SELECT * FROM products"; //is products your table name?
$rs=odbc_exec($conn,$sql);
if (!$rs) {
  exit("Error in SQL");
}

while (odbc_fetch_row($rs)) {
  $prodname=odbc_result($rs,"Product Name"); //but preferably never use spaces for table names.
 $prodid=odbc_result($rs,"ProdID");  //prodID is assumed attribute
  echo "$prodname";
  echo "$prodid";
}
odbc_close($conn);

now you can use the $prodname and output it to the TCPDF output. 
```

我假设您正在连接到 MS 访问数据库。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-12-20T19:56:06.607

使用 ob_start(); 在代码的开头。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-08-01T10:36:22.877

我有这个，但与 OP 不同，我在 TCPDF 错误消息之前看不到任何输出。

原来在我的脚本的最开始有一个 UTF8 BOM（字节顺序标记），在 <?php 标记之前，所以在我有机会调用 ob_start() 之前。并且在 TCPDF 错误消息之前还有一个 UTF8 BOM。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-29T06:27:06.377

我遇到了这个奇怪的错误，罪魁祸首是 PHP 打开标记开头的空格

即使没有`ob_flush`and`ob_end_clean`

只要确保在任何块`white spaces`上或之后没有多余的`<?php ?>`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-12-08T13:45:29.450

就我而言，页脚方法的 html 代码格式错误（缺少 td）导致 osx 出错。

```
public function Footer() {
$this->SetY(-40);
$html = <<<EOD
<table>
<tr>
 Test Data
</tr>
</table>
EOD;
$this->writeHTML($html);
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-06-23T10:23:09.910

使用 ob_end_clean();

$pdf->输出($file, 'I'); 打开pdf。这个对我有用

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-03-04T07:13:54.640

“一些数据已经输出，无法发送PDF文件”的错误是指PHP的输出缓冲区。

所以你需要在发送输出之前清理输出缓冲区的任何内容。

```
ob_end_clean(); // Clean any content of the output buffer 
```

然后

```
$pdf->Output('example_001.pdf', 'I'); // Send the PDF ! 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-10-09T10:49:33.300

这个问题是在`apache/php`显示错误时出现的。

此 data( `html`) 破坏 pdf 输出。

您必须关闭**php.ini**中的显示错误。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-11-14T01:01:45.557

我有同样的错误，但最后我通过抑制 PHP 错误来解决它只需将此代码`error_reporting(0);`放在打印页面的顶部

```
 <?php 
    error_reporting(0); //hide php errors
    if( ! defined('BASEPATH')) exit('No direct script access allowed');
    require_once dirname(__FILE__) . '/tohtml/tcpdf/tcpdf.php';
    .... //continue 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-09-26T13:21:25.663

对于那些仍然面临这个问题的人，请尝试添加：

`libxml_use_internal_errors(true);`

在`loadHtml`通话之前添加

`libxml_use_internal_errors(false);`

通话后。

这为我解决了。

# c# - 如何在处理时显示加载图像或文本

> ID：16011055
> 
> 赞同：0
> 
> 时间：2013-04-15T08:45:27.687
> 
> 标签：c#, asp.net

在我的项目中，我正在检查链接是否正常工作，当我单击要显示的创建链接按钮时，请稍候，但何时何地如果它们在文本框中的某些文本如果 textbox1.text == null 那么它不应该是显示，当它不为空时，当我单击创建按钮时，它应该显示，请稍候，我的代码正在工作，但我想检查它们是否在文本框中有一些值，用户单击它应该显示的创建按钮，请稍等。如果它们在 textbox1 中没有值，则如果用户单击创建按钮，则不应显示请稍候

这是我的代码

```
<script type="text/javascript">       

            function ShowProgressBar() {
                if (Textbox1.Text == " ") {
                    document.getElementById('dvProgressBar').style.visibility = "hidden";
                }
                else {
                    document.getElementById('dvProgressBar').style.visibility = "visible";
                }
            }        
    </script>

      <asp:Button ID="Button1" runat="server" Text="Create link" OnClick="btn_createlink_Click" OnClientClick="javascript:ShowProgressBar()" />

    <br />
        <div ID="dvProgressBar" style="visibility: hidden;">
        <div id="content" style="text-align: left; " > 
         Please wait for while...
      </div>
      </div>

    <asp:TextBox ID="TextBox1" runat="server" TextMode="MultiLine" Height="373px" 
        Width="410px" ViewStateMode="Enabled"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T08:55:08.703

据我了解，您只是在问如何验证复选框是否为空，对吗？这应该这样做：

```
<script type="text/javascript">       

function ShowProgressBar() {
    if (document.getElementById('<%=TextBox1.ClientID%>').value == "") {
         document.getElementById('dvProgressBar').style.visibility = "hidden";
    }
    else {
         document.getElementById('dvProgressBar').style.visibility = "visible";
    }
}        
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:49:36.227

最简单的方法可能是使用`ajax`. 只需调用 Web 服务并使用 javascript 为用户显示加载消息/图标/任何内容。尝试为此使用谷歌，这真的很简单。

它必须是异步的，否则它会阻止您的 UI 并且`please wait`不会显示。

# python - 如何避免全局变量

> ID：16011056
> 
> 赞同：12
> 
> 时间：2013-04-15T08:45:31.443
> 
> 标签：python, global-variables

在阅读 python 文档和各种邮件列表时，我总是阅读看起来有点像教条的东西。应该像地狱一样避免全局变量，它们的设计很糟糕......好吧，为什么不呢？但是在一些现实生活中我不知道如何避免这种模式。

假设我有一个 GUI，可以从主菜单中加载几个文件。与加载的文件相对应的文件对象可以在整个 GUI 中使用（例如，将显示图像并且可以通过不同的对话框/插件对其执行各种操作的图像查看器）。

构建以下设计是否真的有问题：

*   Menu.py --> 文件将从这里加载
*   main.py --> 这里可以使用加载的文件对象
*   Dialog1.py --> 或者这里
*   Dialog2.py --> 或者那里
*   Dialog3.py --> 或者那里
*   ...
*   全局变量.py

其中 Globals.py 将存储一个字典，其键是加载文件的名称，值是相应的文件对象。然后，从那里，需要这些数据的代码的各个部分将通过弱引用访问它。

抱歉，如果我的问题看起来（或很）愚蠢，但是您是否看到任何优雅或无全球性的替代方案？一种方法是将加载的数据字典封装在 Main.py 的主应用程序类中，将其视为 GUI 的中央访问部分。然而，这也会带来一些复杂性，因为这个类应该可以从所有需要数据的对话框中轻松访问，即使它们是它的直接子级。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T08:51:24.427

应该避免使用全局变量，因为它们会抑制代码重用。多个小部件/应用程序可以很好地存在于同一个主循环中。这允许您将您现在认为的单个 GUI 抽象到一个库中，该库可根据请求创建此类 GUI，以便（例如）单个启动器可以启动共享同一进程的多个顶级 GUI。

如果您使用全局变量，这是不可能的，因为多个 GUI 实例将胜过彼此的状态。

全局变量的替代方法是将所需属性与顶级小部件相关联，并创建指向相同顶级小部件的子小部件。然后，例如，菜单操作将使用其顶级小部件到达当前打开的文件以便对其进行操作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-15T09:04:31.650

我将通过将数据封装在一个或多个类中来管理全局数据，并为这些类实现 borg 模式。请参阅[为什么 Borg 模式比 Python 中的 Singleton 模式更好](https://stackoverflow.com/questions/1318406/why-is-the-borg-pattern-better-than-the-singleton-pattern-in-python#1318444)

# java - CssSelector 多重，Arquillian Graphene

> ID：16011063
> 
> 赞同：0
> 
> 时间：2013-04-15T08:45:53.820
> 
> 标签：java, css-selectors, selenium-webdriver, jboss-arquillian

我正在使用 Arquillian Graphene 来获取一个元素，我想成为这个元素，因为有很多具有相同类的元素并且生成了 id，所以我不能真正使用它。

所以，我正在寻找类似的东西：

```
@FindBy(css="input[id*='contactPerson'] and [type='text']") 
```

PS：我暂时不能尝试，所以我才问这个问题，谢谢你的理解。

* * *

编辑 ：

这就是我的输入的生成方式。

```
<input id="contactPerson:contactPerson_input" 
       name="contactPerson:contactPerson_input" 
       type="text" 
       class="ui-autocomplete-input ui-inputfield ui-widget ui-state-default ui-corner-all ui-state-hover"
       value="James Bond" role="textbox"aria-multiline="false"> 
```

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:06:16.420

如果 css 不工作，您可以尝试以下操作。

```
@FindBy(xpath = "//*[contains(@value,'James Bond')]") 
```

**编辑**

```
@FindBy(xpath = "//div[contains(@class,'ui-autocomplete-input ui-inputfield ui-widget ui-state-default ui-corner-all ui-state-hover') and contains(@type,'text')]") 
```

# openssl - Safari 扩展开发者证书 - Windows

> ID：16011066
> 
> 赞同：10
> 
> 时间：2013-04-15T08:46:04.917
> 
> 标签：openssl, certificate, safari-extension, csr

我正在尝试开始 Safari 扩展开发，但我不断收到“没有 Safari 扩展开发者证书”错误。

我在这里按照 openssl 说明进行操作： [在 Windows 中制作 CSR 证书 (7)](https://stackoverflow.com/questions/6902030/making-csr-certificates-in-windows-7)

我将 CSR 文件上传到 developer.apple.com，下载了生成的文件并将其安装在个人和受信任的根证书颁发机构商店中。扩展生成器中没有任何反应。

这里的最高响应让我想到： [Safari 没有检测到我的扩展证书](https://stackoverflow.com/questions/3061769/safari-doesnt-detect-my-extension-certificate)

它说“在另一台机器上，您没有与证书关联的私钥”。

我看到 openssl 命令为我生成了一个私钥文件。我需要在 Safari 的某个地方或操作系统的其他地方使用它吗？

我已经尝试了一整天，我觉得我在这里错过了一些明显的东西。你能建议它是什么吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-07-03T18:46:41.030

好的，这是一个演练。

在其中两个步骤中，您将被要求创建密码。您可以选择一个空的 - 只需按 Enter。

1.  获取 OpenSSL。这里有几个选项，我在 [这里](http://slproweb.com/products/Win32OpenSSL.html)找到了。我下载了第一个东西（精简版）和 Visual C++ Redistributables（你可能已经有了它们，如果你需要它们，OpenSSL 安装程序会警告你）。我在 C:\OpenSSL 中安装了 OpenSSL，并选择将 OpenSSL DLL 复制到 OpenSSL 二进制目录。
2.  在标准 Windows 终端中运行此命令：

    `set OPENSSL_CONF=c:\OpenSSL\bin\openssl.cfg`

3.  然后是这个（至于细节，我只输入了我的姓名和电子邮件，但Apple可能不需要这些）：

    `c:\OpenSSL\bin\openssl.exe req -out CSR.csr -new -newkey rsa:2048 -nodes -keyout privateKey.key`

4.  在 developer.apple.com 的证书部分上传新文件 CSR.csr。作为回报，您将获得一个名为 safari_extension.cer 的文件。
5.  运行这个：

    `c:\OpenSSL\bin\openssl x509 -in safari_extension.cer -inform DER -out safari_extension_PEM.cer -outform PEM`

6.  和这个：

    `c:\OpenSSL\bin\openssl pkcs12 -export -in safari_extension_PEM.cer -inkey privateKey.key -out bundle.p12`

7.  双击 safari_extension.cer。将其安装在个人证书存储中。

8.  双击 bundle.p12。安装在同一家商店。

而已。打开 Safari，它应该知道证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T22:38:26.250

仅供参考，这里还有另一种方法：

[https://apple.stackexchange.com/a/169271/24632](https://apple.stackexchange.com/a/169271/24632)

原始网址/帖子：

[http://smarttechie.org/2013/12/13/how-to-create-apple-safari-extension-developer-certificate-for-windows/](http://smarttechie.org/2013/12/13/how-to-create-apple-safari-extension-developer-certificate-for-windows/)

# algorithm - 如何将一个整数转换为两个并轻松反转转换？

> ID：16011067
> 
> 赞同：0
> 
> 时间：2013-04-15T08:46:06.233
> 
> 标签：algorithm, sql-server-2005, optimization, integer, bit-manipulation

我有几个整数 (x,y)，其中 0 < y <= x <= 6。
我只需要将它们存储到一个名为 z 的列中。
我想要三个函数 F1、F2、F3 来解决这个问题：

z=F1(x,y)
x=F2(z)
y=F3(z)

我的第一种方法：

F1 : 10*y+x
F2 : (zz%10)/10
F3 : z%10

我必须在`WHERE`包含数百万行的表的子句中使用它。
有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:21:07.173

我会使用：

```
 F1 : z=10*x+y
  F2 : x=z/10
  F3 : y=z-F2*10 
```

也许，如果你取 16 个基数，它会在内部进行优化？我会尝试以 256 为基数 - 因此一位数字位于一个字节中。

```
F1 : z=256*x+y
F3 : y=z&255   // that is definitely faster
F2 : x=z/256 
```

由于 SQL-server 没有 >> 或 << 运算符，恐怕就这样结束了。

# ios - ios VOIP后台模式无实时通话

> ID：16011068
> 
> 赞同：0
> 
> 时间：2013-04-15T08:46:10.243
> 
> 标签：ios, voip, background-process

我的下一个应用程序将是一个聊天应用程序（whatsApp 杀手 :)），它使用 SIP 来提供所有数据（文本、录制的声音、图像、视频 ..），它将在未来的版本中包含 VOIP。

我可以在 info.plist 中使用 UIBackgroundModes = voip 让应用程序“永远”运行，而不会有 Apple 拒绝应用程序的风险（如邮件客户端 Sparrow）？

谁能告诉我他是否将这种技术用于与我的应用程序相同的目的？

谢谢你。

# ruby-on-rails - Amazon cloudfront 是否提供背景主页图片或 heroku？（轨道应用程序）

> ID：16011070
> 
> 赞同：0
> 
> 时间：2013-04-15T08:46:14.157
> 
> 标签：ruby-on-rails, ruby, heroku, amazon-s3, amazon-cloudfront

这就是我在 production.rb （生产环境）文件中的内容。

```
 #Enable serving of images, stylesheets, and JavaScripts from an asset server
  config.action_controller.asset_host = "xxxxxxxxxxxxx.cloudfront.net" 
```

所以它是启用的。但是，我的背景图像在过去工作时停止显示。这是我需要在 heroku 或 cloudfront 上解决的错误吗？我的背景图片大小是 850kb。是图像尺寸过大造成的吗？

在我指向图像的 css.scss 文件中，它是：

```
.big {
    width: 100%;
    height: 450px;
    position: absolute;
    z-index: -999;
    top: 41px;
    left: 0;
    background: url(../img/main.jpg);
} 
```

所以这是指向我heroku中的/img文件夹。这是否需要更改为上传到 Amazon S3 的文件？为什么我的背景图片不再出现？如果这有什么不同，我目前正在为 heroku 上的额外测功机付费。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:32:33.657

您需要使用 Rails 提供的`image-url`or`asset-path`助手，以便它在生成的 CSS 文件中写出绝对图像路径。资产直接从 Cloudfront 提供，因此浏览器直接向 Cloudfront 发出请求——除了样式表请求外，没有任何一个通过 Heroku。

[您可以在https://devcenter.heroku.com/articles/cdn-asset-host-rails31#asset-references-in-css-js](https://devcenter.heroku.com/articles/cdn-asset-host-rails31#asset-references-in-css-js)阅读更多相关信息

本文还介绍了assetsync gem，在这里也很方便。

# cocoa - NSTask plutil 无法识别的选项

> ID：16011072
> 
> 赞同：0
> 
> 时间：2013-04-15T08:46:22.763
> 
> 标签：cocoa, plist, nstask

我正在尝试使用 NSTask 将二进制 plist 转换为 xml，尽管遇到了我不太理解的错误。如果我接受命令 NSTask 失败并将其复制到命令行，它就可以正常工作。希望有人能告诉我什么是错的。

```
NSString *defaultPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Library/Preferences/com.defaults.plist"];

task = [[NSTask alloc] init];
[task setLaunchPath: @"/usr/bin/plutil"];

NSArray *arguments;
arguments = [NSArray arrayWithObjects: @"-convert xml1", defaultPath, nil];

// using `@"-convert", "xml1", defaultPath, nil` doesn't seem to work either.

[task setArguments: arguments];

NSPipe *pipe;
pipe = [NSPipe pipe];
[task setStandardOutput: pipe];

NSFileHandle *file;
file = [pipe fileHandleForReading];

[task launch];

[task waitUntilExit];
[task release]; 
```

NSLog

```
/usr/bin/plutil (
    "-convert xml1",
    "/Users/Mira/Library/Preferences/com.defaults.plist"
)
unrecognized option: -convert xml1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T02:25:53.887

NSTask 为 shell 格式化它的命令的方式可能有点棘手。这是一个应该有帮助的建议。

```
[task setLaunchPath:@"/bin/bash"];

NSMutableArray *commandLine = [NSMutableArray new];
[commandLine addObject:@"-c"];
[commandLine addObject:@"/usr/bin/plutil -convert xml1"];
[commandLine addObject:defaultPath]; 
```

如果这不起作用，则制作一个长字符串 plutil 命令和文件路径，并将其作为 -c 之后的第二个对象添加到命令行。

前任：

```
NSString *cmd = [NSString stringWithFormat:@"/usr/bin/plutil -convert xml1 %@",defaultPath]; 
```

然后将其添加到数组中

```
[task setLaunchPath:@"/bin/bash"];

NSMutableArray *commandLine = [NSMutableArray new];
[commandLine addObject:@"-c"];
[commandLine addObject:cmd]; 
```

希望有帮助。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:29:04.103

“-convert”和“xml1”需要是单独的字符串

# java - 安卓——隐藏文件

> ID：16011075
> 
> 赞同：0
> 
> 时间：2013-04-15T08:46:40.083
> 
> 标签：java, android

我在使用 Eclipse 开发的 Android 应用程序时遇到问题。

问题是当我使用以下说明捕获新图像时：

```
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
startActivityForResult(intent, TAKE_IMAGE); 
```

设备将文件正确存储在右侧`destination(extSdCard)`，但以下应该重新加载目录内容的代码在设备重新启动之前找不到新文件。

```
 images.clear();
   final String[] columns = { MediaStore.Images.Thumbnails._ID };
   final String orderBy = MediaStore.Images.Media._ID;
   String condition = MediaStore.Images.Media.DATA + " like '%/"+
   Singleton.getCurrentPatient().getNrdo()+"/%'";

   Cursor imagecursor =  getContentResolver().query(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns,
                condition, null, orderBy);

    if(imagecursor != null){
     int image_column_index = imagecursor
                    .getColumnIndex(MediaStore.Images.Media._ID);
     int count = imagecursor.getCount();
     for (int i = 0; i < count; i++) {
                imagecursor.moveToPosition(i);
           int id = imagecursor.getInt(image_column_index);
           ImageItem imageItem = new ImageItem();
          imageItem.id = id;
          lastId = id;
          imageItem.img = MediaStore.Images.Thumbnails.getThumbnail(
                        getApplicationContext().getContentResolver(), id,
                        MediaStore.Images.Thumbnails.MICRO_KIND, null);
         images.add(imageItem);
     }
       imagecursor.close();
     }
    notifyDataSetChanged();
} 
```

有什么想法吗？我们必须提交来刷新一些缓存吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T08:58:13.853

您可以使用它[`MediaScannerConnection`](http://developer.android.com/reference/android/media/MediaScannerConnection.html)来通知系统有新的媒体文件。`MediaScanner`也作为启动顺序的一部分运行，这就是为什么您在`MediaStore`重新启动后看到文件出现的原因。

# jquery - 如何在 Shadowbox 中打开带有 html 布局的 div？

> ID：16011078
> 
> 赞同：1
> 
> 时间：2013-04-15T08:47:05.280
> 
> 标签：jquery, html, markup, shadowbox

我想用阴影框打开一个带有 html 内容的 div。有谁知道这个插件是否可行，因为我在他们网站上的任何地方都看不到它？ [http://www.shadowbox-js.com/](http://www.shadowbox-js.com/)

谢谢你的帮助

朱迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:12:19.237

我认为这会得到你所需要的。

当您单击时`lightbox`将复制元素的示例`#cont``a`

```
 <div id="cont" style="display:none">
            <h1>Header</h1>
            <b>Test test</b>
            <i>Test test</i>
        </div>

        <a href="#">Open</a> 
```

***还有剧本***

```
 Shadowbox.init({
            skipSetup: true
        });

        $('a').click(function() {
            var content = $('#cont').html();
            Shadowbox.open({
                content: content,
                player: 'html',
                displayNav:false,
                height: 350,
                width: 350
            });
        }); 
```

该框可能显示黑色背景，因此您必须将其更改为另一种颜色。

请注意，这`shadowbox.js`是一个专为播放视频而设计的播放器灯箱。您可以考虑使用其他内容作为`html`内容。**灯箱必须包含一个，`player`否则它不会启动。**

# c# - 在另一个面板上显示控件

> ID：16011084
> 
> 赞同：5
> 
> 时间：2013-04-15T08:47:21.333
> 
> 标签：c#, user-controls, panel

我的 winform 上有两个面板：在第一个面板上，我有一个`usercontrol`可以动态相乘的面板。我希望在第二个面板上显示`usercontrol`用户选择的内容。这个想法是，我想要，如果我在运行时更改文本`usercontrol`，这些更改也将显示在第二个面板上。我需要一个想法，我该怎么做。我现在正在尝试为我`usercontrol`和事件的每个对象创建属性，但我认为为此做的太多了。. 谢谢。
我的代码，到目前为止我所尝试的：

在我的用户控件上，我为其中包含的每个对象创建了属性。usercontrol.cs 上的代码：

```
 public string TextName
    {
        get { return textname.Text; }
        set { textname.Text = value; }
    }
    public string Task
    {
        get { return checkboxTip.Text; }
        set { checkboxTip.Text = value; }
    }
       .......
     and on my winform.cs I created an event for all properties:

    private void PropertiesChange_Click(object sender, EventArgs e)
 {
       textname1.Text=textname.Text; //textname1 is the textbox from usercontrol,and                     textname is from the second panel;
      checkboxTip1.Text-checkbox.Text;
    .....// I am doing this for each object,but I have 10 objects. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:56:14.537

尝试这个：

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{

   textBox2.Text = textBox1.Text;
   // you can do anytihng here
} 
```

假设它`textBox1`在您的第一个面板上并且`textBox2`在您的第二个面板上。

# mysql - 保持数据库连接更好吗？

> ID：16011086
> 
> 赞同：0
> 
> 时间：2013-04-15T08:47:28.880
> 
> 标签：mysql, database

我目前正在为 bukkit 开发插件，其中很多都需要数据库连接。现在我正在考虑是否只有一个插件来处理所有插件的连接是否会更好。

这背后的问题是，即使在几分钟内没有任何查询（这可能会发生），保持连接是否良好。否则我需要为每个查询建立一个新连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T08:58:55.147

有一个类/插件来处理数据库是个好主意，但连接状态不应该一直打开，确保连接只在查询所用的时间内打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:06:41.770

许多应用程序使用[连接池](http://en.wikipedia.org/wiki/Connection_pool)来提供许多可随时用于运行查询的连接。它减少了数据库驱动程序必须执行的协议重新协商的次数。这对于需要快速访问基础数据但请求之间的停机时间较长的应用程序特别有用。像网上商店这样的电子商务应用程序就是一个很好的例子。

# c# - C++ /Cli 程序 System.BadImageFormatException

> ID：16011089
> 
> 赞同：0
> 
> 时间：2013-04-15T08:47:32.337
> 
> 标签：c#, c++-cli

我有一个奇怪的问题

平台：.net 4.0，win7 32/64，VS2010

MIPCChannel.dll：C++/cli 混合 dll

NewClient.exe：引用 MIPCChannel.dll 的 C#

问题是当我部署我的程序时，有人尝试运行 NewClient.exe 给出错误：CLR20r3, System.BadImageFormatException

我执行以下步骤：

1.  我尊重 MIPCChannel.dll 一切正常
2.  或者我安装 VS2010 重新分发一切正常

但我不想回复重新分发，我想知道问题出在哪里！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:43:46.907

混合模式 C++/CLI DLL 必须链接到动态运行时。这意味着您必须将动态运行时部署到您希望在其上运行此类 DLL 的任何机器上。

由于您使用的是 VS2010，因此不需要使用可再发行包部署运行时，尽管这是推荐的方法。您可以改为将[特定的 Visual C++ DLL 部署到应用程序本地文件夹](http://msdn.microsoft.com/en-us/library/ms235299%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:57:19.600

检查是x86还是x64的问题。您很可能在 64 位环境中开发，但在 32 位环境中部署。

# c# - 如何在 ASP.NET 中从 Jquery 调用 UserControls CodeBehind 方法？

> ID：16011093
> 
> 赞同：1
> 
> 时间：2013-04-15T08:47:39.820
> 
> 标签：c#, jquery, user-controls

我有一个用于显示成功/警告/错误消息的用户控件。对于所有这些类型的消息，我们有一个 UserControl "Message.ascx" 目前用于其他没有 Jquery 的 aspx 页面

因为我们正在尝试维护标准消息警报。现在我第一次在我的 aspx 页面中使用 Jquery 和 JSON 调用。我想从我的 jquery 中显示这些成功消息。

一般来说，aspx 代码隐藏我使用用户控件作为

```
//register User Control
<UM1:UM runat="server" ID="Message" /> 
 ....
 public void insert(){
 .. Some logic.., after success
 Message.ShowSuccess(" Inserted Successfully");
 } 
```

但是在 Jquery 中，我如何调用这些在 ascx.cs 中的 ShowSuccess() 我的 ajax 调用

```
 $.ajax({
                 type: "POST",
                 contentType: "application/json; charset=utf-8",
                 url: "Voyage.aspx/Context_Update",
                 data: "{'ID':''1}",
                 dataType: "html",
                 success: function (html) {
                     try {                          
                        // Want to Show    Message.ShowSuccess(" Inserted Successfully");                     
                     } catch (ex) {
                         alert("ErrCode:1");
                     } 
```

我没有任何想法，也没有找到任何结果..，请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T08:56:30.490

您不能在 ASP .NET 中调用用户控件，因为它不是直接提供给外部世界的东西，而是服务器在页面生命周期中结合到您的页面中的东西。

如果你想在服务器上调用某些东西，你需要将`[WebMethod]`属性添加到服务器端方法，这允许你从 jQuery 调用。您可以`[WebMethod]`在您的页面上有一个然后调用您的用户控件中的一些代码，但不能直接访问您的用户控件。

所以，像这样：

**我的页面.aspx**

```
[WebMethod]
public static string GetMessageFromWebPage()
{
    return MyUserControl.GetMessageFromUserControl();
} 
```

**MyUserControl.ascx**

```
public static string GetMessageFromUserControl()
{
    return "Hello World!"
} 
```

**jQuery**

```
$.ajax({
  type: "POST",
  url: "MyPage.aspx/GetMessageFromWebPage",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // Do something with the page method's return.
    $("#Result").text(msg.d);
  }
}); 
```

# encoding - 在 Sublime Text 2 中恢复原始编码

> ID：16011096
> 
> 赞同：0
> 
> 时间：2013-04-15T08:47:56.040
> 
> 标签：encoding, sublimetext2, iconv

我打开一个文件并没有注意到它是 windows-1251 编码的。它以带有不正确字符的 utf-8 编码文件打开。然后我在那里粘贴了一堆 utf-8 编码的代码。保存后（带有一些关于回退到 UTF-8 的错误消息）我无法恢复文件的原始内容。我重新打开新文件，剪切所有粘贴的代码并保存。下界“使用编码重新打开”或“使用编码保存”都不会给出正确编码的文件。

```
iconv -f UTF-8 -t WINDOWS-1251 file.txt > file_1251.txt 
```

Iconv 说有一个非法的输入序列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:06:21.730

看起来它仍然在 Windows-1251 中。将原始文件错误地解码为 UTF-8 并覆盖不会导致文件 UTF-8 不正确，因此您不会看到错误。

尝试

```
iconv -f Windows-1251 -t UTF-8 file.txt > file_UTF8.txt 
```

并以 UTF-8 正常打开 UTF-8 文件。

# coldfusion - 错误：< 标记 ColdFusion 标记的开始。你说的是 LT 还是 LTE？

> ID：16011102
> 
> 赞同：0
> 
> 时间：2013-04-15T08:48:34.527
> 
> 标签：coldfusion, coldfusion-10, cfml

我收到以下错误。该网站目前在 ColdFusion 10 服务器上运行。之前运行的是ColdFusion 6，这个问题是ColdFusion版本升级引起的吗？

> < 标记 ColdFusion 标记的开始。你说的是 LT 还是 LTE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:21:43.880

该问题不应由 ColdFusion 版本的升级引起。您没有提供任何代码示例。请向我们展示该错误引用的代码。

通常，“您的意思是 LT 还是 LTE”错误与`<cfif>`标签有关。在 ColdFusion 中，使用`<cfif>`标签，条件是`LT`代替`<`和`LTE`代替`<=`等。

我的猜测是你有一些这样的代码：

```
<cfif myvariable < 10> 
```

当代码应如下所示：

```
<cfif myvariable LT 10> 
```

*如果您发布代码，那么我们会更有帮助。*

# opencv - 如何提取 SparseMat 的子矩阵

> ID：16011104
> 
> 赞同：0
> 
> 时间：2013-04-15T08:48:41.513
> 
> 标签：opencv

我有一个尺寸为 50x50 的 SparseMat A。我有另一个 10x10 尺寸的矩阵 B。我想在 B 中添加 A (0~10 x 0~10) 的子矩阵。如何提取 SparseMat 的子矩阵。我在 Mat 中确实喜欢 A(Range(0,10), Range(0,10))，错误是“在没有适当的 operator() 或将函数转换为指针函数类型的情况下调用类类型的对象”。如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:31:39.440

这些函数在 OpenCV 中没有实现（很少有操作实际上是在稀疏矩阵上实现的）。

您需要做的是使用提供的`SparseMatConstIterator_<T>`迭代器遍历稀疏矩阵，测试非零点的位置是否在您感兴趣的子区域中，然后编写它。您必须遍历输入稀疏矩阵的非零元素，但您可以在目标矩阵已满时添加测试以提前退出。

顺便说一句，50x50 并没有那么大。您可以切换到密集矩阵以便更轻松地处理矩阵。我定期在 OpenCV 中使用 1024x1024 矩阵。

# button - 菜单按钮不起作用

> ID：16011105
> 
> 赞同：0
> 
> 时间：2013-04-15T08:48:43.707
> 
> 标签：button, user-interface, actionscript, menu, actionscript-2

我正在尝试制作一个菜单屏幕，允许用户按下包含以下实例的按钮。我知道我几乎拥有它，但我无法弄清楚它有什么问题。

```
stop();

home_btn.onRelease {
    gotoAndStop(1);
}
graphics_btn.onRelease {
    gotoAndStop(3);
}
animation_btn.onRelease {
    gotoAndStop(2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:33:25.453

```
stop();

home_btn.onRelease = function() {
    gotoAndStop(1);
}
graphics_btn.onRelease = function() {
    gotoAndStop(3);
}
animation_btn.onRelease = function() {
    gotoAndStop(2);
} 
```

添加`=function()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:44:25.837

您可以使用 mx.utils.Delegate 类：

导入 mx.utils.Delegate；

```
home_btn.onRelease = Delegate.create(this, function() {
    gotoAndStop(1);
}) 
```

[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00002284.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00002284.html)

# asp.net - 如何将 JavaScript var 传递给 @... Razor 语句？

> ID：16011107
> 
> 赞同：0
> 
> 时间：2013-04-15T08:48:53.137
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有以下问题，我有一个 Javascript 战争，需要将它传递到 RazorView 语句中，如下所示：

```
<script type="text/javascript">
    var myID = ...
    @MyREazorCall(myID);
</script> 
```

我收到消息：`"myID" is not available in this context`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T08:53:02.160

由于 RazorView 语句在 Javascript 之前在服务器上执行，您可能必须更改您的解决方案以允许 Javascript 运行 ajax 请求，然后您的 View/Controller 必须响应该 ajax 请求，然后您处理响应在 Javascript 中。

# c++ - unique_ptr 对象的 getter 和 setter（依赖注入）

> ID：16011113
> 
> 赞同：11
> 
> 时间：2013-04-15T08:49:16.467
> 
> 标签：c++, visual-studio-2012, dependency-injection, getter-setter, unique-ptr

我有一个类`MyClass`，它拥有某个类的实例，`DataProvider`并为此有一个 getter。

为了依赖注入，我更喜欢有一个getter和一个setter。此外，`DataProvider`应该包含在一个`std::unique_pointer`：

```
#include <memory>
#include <iostream>

class DataProvider
{
public:
    DataProvider() {}
    virtual ~DataProvider() {}
    /* stuff */

private:
    /* more stuff */

};

class MyClass
{
public:
MyClass() {}

    virtual inline const DataProvider &getDataProvider() const
    {
        return *data;
    }
    void setDataProvider(std::unique_ptr<DataProvider> newData)
    {
        data = std::move(newData);
    }

private:
    std::unique_ptr<DataProvider> data;
}; 
```

我读过这个：[如何将 unique_ptr 参数传递给构造函数或函数？](https://stackoverflow.com/questions/8114276/how-do-i-pass-a-unique-ptr-argument-to-a-constructor-or-a-function/8114913#8114913)

但它不包括吸气剂部分。这是（以上）正确的方法吗？可以考虑哪些替代方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-05T06:41:48.160

正如你所写

```
virtual inline const DataProvider &getDataProvider() const
{
    return *data;
}
void setDataProvider(std::unique_ptr<DataProvider> newData)
{
    data = std::move(newData);
} 
```

完全可以。在 setter 中，该类获得 DataProvider 实例的所有权并且永远不会放手（就这里所见而言）。

sftrabbit 在这里给出了一个完整的例子：http: [//ideone.com/enarAS](http://ideone.com/enarAS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:59:28.787

虽然我不确定这是否真的是您需要的，但这是一个起点：

```
const DataProvider &getDataProvider() const
{
    return *data.get();
} 
```

# c# - 属性网格中的只读变量

> ID：16011114
> 
> 赞同：0
> 
> 时间：2013-04-15T08:49:23.547
> 
> 标签：c#, readonly, propertygrid

我想在属性网格中创建一个只读变量（int）。

有一点我不明白。

该变量没有设置，为什么它仍然允许我更改值（并且当它无法将值放入变量时下降）？

```
 private int _myVar= 1;

    public int MyVar
    {
        get { return _myVar; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:52:33.443

尝试[`ReadOnlyAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.readonlyattribute.aspx)：

```
private int _myVar= 1;

[ReadOnly(true)]
public int MyVar {
    get { return _myVar; }
} 
```

# php - 如何在codeigniter中检索特定的会话值？

> ID：16011122
> 
> 赞同：7
> 
> 时间：2013-04-15T08:49:42.493
> 
> 标签：php, codeigniter

我会在 codeigniter 中设置一个会话值

```
$sess_array = array(
'id' => $row->Login_Id,
'username' => $row->Login_Name,
'postid'=> $row->Fk_Post_Id,
 );
$CI->session->set_userdata('logged_in', $sess_array); 
```

然后如何检索特定的（比如 id）会话值。我试过这些

```
$createdby=$this->session->userdata('id');
$createdby=$this->session->userdata($logged_in['id']); 
```

但失败了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T08:55:29.723

为此使用数组语法。喜欢，

```
$this->session->userdata['logged_in']['id']; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T08:52:30.060

像这样设置

```
$sess_array = array(
                    'id'        =>  $row->Login_Id,
                    'username'  =>  $row->Login_Name,
                    'postid'    =>  $row->Fk_Post_Id,
                );

$CI->session->set_userdata($sess_array); 
```

检索

```
$createdby  =   $this->session->userdata('id'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T09:05:43.773

```
$sess_array = array(
'id' => $row->Login_Id,
'username' => $row->Login_Name,
'postid'=> $row->Fk_Post_Id,
 );
$CI->session->set_userdata('logged_in', $sess_array); 
```

然后

```
$logged_in = $this->session->userdata('logged_in');
$createdby = $logged_in['id']; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-15T08:56:13.227

```
$createdby = $this->session->userdata(logged_in['id']); 
```

或者

```
$createdby = echo $_SESSION[logged_in['id']]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-17T11:55:50.650

```
Session write process. session content could be dynamic value
$logged_in = [
'id'=> 1,
'name'=> 'test'
]; 

Particular Session retrieve process.

    $this->session->userdata['logged_in']['id']; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-15T09:02:23.297

```
$pdata = array(
                'id'        =>  $row->Login_Id,
                'username'  =>  $row->Login_Name,
               );  // pass ur data in the array

$this->session->set_userdata('session_data', $pdata); //Sets the session

$pdata = $this->session->userdata('session_data'); //Retrive ur session

$pdata['id'] will give u the corresponding id 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-17T03:49:30.463

在较新的版本中，您可以简单地使用

```
$this->session->username
$this->session->id
$this->session->postid 
```

# java - 是否可以重新排序实例初始化和分配给共享变量？

> ID：16011126
> 
> 赞同：13
> 
> 时间：2013-04-15T08:50:10.430
> 
> 标签：java, concurrency

我正在阅读[一篇文章](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)，其中实际上谈到了双重检查锁定，但我对作为示例的代码中更基本的失败感到惊讶。那里指出，实例的初始化（即在构造函数返回之前写入实例变量）可能会*在*对实例的引用写入共享变量（在下面的例子）。

`Foo`使用以下 class 定义，一个线程正在执行`Foo.initFoo();`，另一个线程正在执行`System.out.println(Foo.foo.a);`，第二个线程可能会打印`0`（而不是`1`或抛出 a `NullPointerException`），这是真的吗？

```
class Foo {
    public int a = 1;

    public static Foo foo;

    public static void initFoo() {
        foo = new Foo();
    }

    public static void thread1() {
        initFoo(); // Executed on one thread.
    }

    public static void thread2() {
        System.out.println(foo.a); // Executed on a different thread
    }
} 
```

从我对 Java 内存模型（以及其他语言的内存模型）的了解来看，这实际上并不让我感到惊讶，但直觉强烈认为这是不可能的（可能是因为涉及对象初始化并且对象初始化似乎如此在 Java 中是神圣的）。

`0`是否可以在第一个线程中不同步的情况下“修复”此代码（即它永远不会打印）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T09:07:28.260

调用`foo = new Foo();`涉及几个操作，除非您引入适当的同步以防止它发生，否则这些操作可能会被重新排序：

1.  为新对象分配内存
2.  写入字段的默认值 ( `a = 0`)
3.  写入字段的初始值 ( `a = 1`)
4.  发布对新创建对象的引用

如果没有适当的同步，步骤 3 和 4 可能会重新排序（请注意，步骤 2 必然发生在步骤 4 之前），尽管在 x86 架构上的热点不太可能发生。

为了防止它，您有几种解决方案，例如：

*   做`a`最后
*   同步访问`foo`（使用同步的`init`AND getter）。

* * *

无需深入了解 JLS #17 的复杂性，您可以阅读[JLS #12.4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1-310)关于类初始化（强调我的）：

> 初始化代码不受限制的事实允许构造示例，其中**在评估其初始化表达式之前，类变量的值仍然具有初始默认值时可以观察到**，但这样的示例在实践中很少见。（**这样的例子也可以构造实例变量初始化**。）Java 编程语言的全部功能在这些初始化程序中可用；程序员必须小心谨慎。这种能力给代码生成器带来了额外的负担，但无论如何都会出现这种负担，因为 Java 编程语言是并发的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-11T07:54:52.373

即使在 x86 下，也可以通过 JIT 编译器对实例初始化重新排序。但是，编写可以触发这种重新排序的代码有些棘手。关于如何重现这种重新排序，请参阅我的问题：

[Hotspot JIT 编译器是否有任何可以重现的指令重新排序？](https://stackoverflow.com/questions/35883354/is-there-any-instruction-reordering-done-by-the-hotspot-jit-compiler-that-can-be)

# node.js - 在 jugglingdb 中访问数据库后没有响应

> ID：16011127
> 
> 赞同：4
> 
> 时间：2013-04-15T08:50:13.070
> 
> 标签：node.js, express, httprequest, compoundjs, jugglingdb

我尝试将我的 Compound.js 应用程序用作（透明）代理服务器。当用户尝试请求外部网站时，应用程序将检查具有该 IP 地址的用户之前是否经过身份验证。

如果是这样，将显示外部站点，如果不是，将鼓励用户登录。问题是，当访问数据库对象“用户”时，没有处理响应。当我注释掉数据库部分并只使用匿名函数中的代码时，程序按预期工作。

```
action('exturl', function () {
    User.all({ where: { ipaddress: req.ip }}, function(err, users) {
      if (users.length > 0) {                                                                                              
          this.user = user[0];                                                                                            

          var proxy = http.createClient(80, req.headers['host'])
          var proxy_request = proxy.request(req.method, req.url, req.headers);
          proxy_request.addListener('response', function (proxy_response) {
              proxy_response.addListener('data', function(chunk) {
                  res.write(chunk, 'binary');
              });
              proxy_response.addListener('end', function() {
                  res.end();
              });
              res.writeHead(proxy_response.statusCode, proxy_response.headers);
          });
          req.addListener('data', function(chunk) {
              proxy_request.write(chunk, 'binary');
          });
          req.addListener('end', function() {
              proxy_request.end();
          });
      } else {                                                                                                            
          redirect(path_to.login);                                                                                        
      }                                                                                                                   
    });
}); 
```

我的代码中是否有故障？我不知道我做错了什么。

# c++ - 错误：预期的类型说明符之前

> ID：16011133
> 
> 赞同：-2
> 
> 时间：2013-04-15T08:50:28.253
> 
> 标签：c++, c++11, c++builder

以下代码块生成了错误

```
rating* TrustManager::initNewRating(double alpha, double beta, double fading)
{
   rating* rating = new rating(1.0, 1.0);
   rating->updateRating(alpha, beta, fading, 1);
   return rating;
} 
```

错误是

```
error: expected type-specifier before ‘rating’
error: cannot convert ‘int*’ to ‘rating*’ in initialization
error: expected ‘,’ or ‘;’ before ‘rating’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:10:55.803

编译器不知道`rating`。#包括它...

# java - 让我的球衣资源可以使用现有的实例？

> ID：16011135
> 
> 赞同：0
> 
> 时间：2013-04-15T08:50:35.747
> 
> 标签：java, rest, jersey

我有一个球衣资源，它需要一个类的特定实例才能运行。我无法找出如何将此实例提供给我的资源。

当我需要在我的资源中注入一个单例时，我使用 SingletonTypeInjectableProvider，但我不能将它用于我想要注入的已经存在的对象实例。

我目前创建我的球衣服务器，如：

```
ResourceConfig rc = new PackagesResourceConfig("com.resources");
HttpServer httpServer = GrizzlyServerFactory.createHttpServer("http://localhost:9998/", rc); 
```

有没有办法手动将资源添加到球衣服务器，例如：

```
Resource res=new Resource(myinstance);
jersey.addResource(res) 
```

或者是否有一种方法可以向 InjectableProvider 提供实例，而不是手动将此可注入提供程序添加到球衣中，例如：

```
InjectableProvider ip=new InjectableProvider(myinstance)
jersey.addInjectableProvider(ip) 
```

或者是否有另一种方法可以使我的球衣资源可以使用已经存在的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:45:36.420

我认为您可以`ServletContext`在运行服务器之前添加一个属性。就像是

```
ServletContainer s = new ServletContainer();
// Add the Servlet to the context ...
// Deploy context to the server ...
s.getServletContext().setAttribute("myRc", new MyRc());
httpServer.start(); 
```

然后在 Provider

```
@Provider
public class MyRcProvider implements ContextResolver<MyRc>{
    @Context ServletContext sc; 
    @Override
    public MyRc getContext(Class<?> arg0) {

        return (MyRc)sc.getAttribute("myRc");
    }

} 
```

为此，我认为自己创建 HttpServer 比使用`GrizzlyServerFactory`. 阅读源代码`GrizzlyServerFactory`会很有帮助。

# java - JRI REXP 布尔值

> ID：16011136
> 
> 赞同：1
> 
> 时间：2013-04-15T08:50:43.747
> 
> 标签：java, r, rjava, jri

我想从一种叫做 kruskalmc 的方法中得到结果。

R 控制台中的结果如下所示：

```
Multiple comparison test after Kruskal-Wallis 
p.value: 0.05 
Comparisons
      obs.dif critical.dif difference  
1-2    7.65     9.425108      FALSE
1-3   14.40     9.425108       TRUE 
2-3    6.75     9.425108      FALSE 
```

现在我想从差异列中获取值。

如果我尝试通过以下方式在 java 中获取它：

```
REXP res = re.eval("result$dif.com$difference"); 
```

我会得到这样的东西：[BOOLi*]

java - 我如何在java中的BOOLi对象中迭代？

我想要的是值 FALSE TRUE FALSE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:10:44.673

我没有太多使用JRI，但由于没有人回答你，我会去的。

我可能是错的，但似乎没有转换`res`为布尔数组的方法——尽管有转换为`int[]`,`double[]`和`String[]`. 您可以将结果转换为整数，如下所示：

```
REXP res = re.eval("result$dif.com$difference");
int[] x = res.asIntArray();

for (int i = 0; i < x.length; i++) {
  System.out.println(x[i]);
} 
```

您将返回`1`代表`TRUE`值和`0`代表`FALSE`。如果你想从 Java 中将这些数字转换为布尔值，或者直接使用它们，你可以将它们转换为布尔值。

不是一个理想的解决方案，所以我希望有人提出更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:08:42.343

据我所见，问题是从`R`to导出时的类型转换`java`。查看 JRI的部分[文档：](http://svn.mesquiteproject.org:8080/repository/MesquiteR/trunk/MesquiteR/Source/org/rosuda/JRI/REXP.java)

> 当前支持的对象是字符串、整数和数字向量。

举一个可重现的例子（来自函数自己的文档）：

```
require(pgirmess)
resp <-c(0.44,0.44,0.54,0.32,0.21,0.28,0.7,0.77,0.48,0.64,0.71,0.75,0.8,0.76,0.34,0.80,0.73,0.8)
categ <- as.factor(rep(c("A","B","C"),times=1,each=6))
k1 <- kruskalmc(resp, categ) 
```

然后我们可以看到`is.logical(k1[[3]][,3]) == TRUE`：

```
> str(k1[[3]][,3])
logi [1:3] FALSE TRUE FALSE 
```

虽然仍然`R`是最简单的方法，但似乎将其转换为

```
> as.numeric(k1[[3]][,3])
[1] 0 1 0 
```

或者您可以将其作为字符发送：

```
> as.character(k1[[3]][,3])
[1] "FALSE" "TRUE"  "FALSE" 
```

进入后，`java`您需要将其转换回布尔值或您正在使用的任何最终形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T05:44:21.250

称呼：

```
survdiff(formula = model)

                                N Observed Expected (O-E)^2/E (O-E)^2/V
x[, 1]=G1:Vehicle               8        6     2.65      4.22      9.02
x[, 1]=G2:AZ13655037 15mg/kg/qd 8        0     3.35      3.35      9.02 
```

Chisq= 9 on 1 自由度，p= 0.00267 现在我们要从 p 中获取值。我怎样才能在java中得到它？

# java - 使用 EasyMock 断言方法调用

> ID：16011139
> 
> 赞同：0
> 
> 时间：2013-04-15T08:50:46.787
> 
> 标签：java, unit-testing, easymock

我正在围绕 void 函数编写单元测试。在里面我调用另一个函数。
我想测试这个函数应该只被调用一次。如果它被调用 0 或 2 次，它应该会失败。

我曾尝试使用以下内容。但即使我从代码中删除函数调用，测试也不会失败。

```
EasyMock.expectLastCall().once();
EasyMock.expectLastCall().atLeastOnce(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:20:20.577

这应该工作：（但你也可以省略`EasyMock.expectLastCall().once()`）

```
 I m = EasyMock.createMock(I.class);
    m.meth();
    EasyMock.expectLastCall().once();
    EasyMock.replay(m);

    m.meth();
    m.meth(); //fails

    EasyMock.verify(m); 
```

# mysql - 使用 Ubuntu 终端通过 shell 脚本将 CSV 插入 MySQL

> ID：16011143
> 
> 赞同：2
> 
> 时间：2013-04-15T08:51:09.613
> 
> 标签：mysql, shell, ubuntu, csv

是否可以在 Ubuntu 中使用 shell 脚本将 CSV 文件插入 MySQL？

这是我尝试过的：

```
mysql -uroot -proot mysfdb < /home/sf/data.csv 
```

但我得到了一个错误

```
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 
```

以下是 CSV 文件中的示例内容：

```
showinventory_SST312V8N4615041313_1366009574txt_,800-200002.A0,00007985 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T01:24:48.630

Maksym Polshcha 的回答是正确的，但只是遗漏了几件事。显然，由于它是本地文件，我必须在 mysql 命令中将其声明为本地文件。最后的命令应该是这样的：

```
 mysql -uroot -proot --local_infile=1 3parsfdb -e "LOAD DATA LOCAL INFILE '/logfiles/Bat_res.csv' INTO TABLE Bat_res FIELDS TERMINATED BY ','" 
```

我还确保`/logfiles`目录和目录`Bat_res.csv`是世界可读的。

谢谢你的好答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T08:59:49.160

尝试这个：

```
mysql -uroot -proot mysfdb -e "LOAD DATA INFILE '/home/sf/data.csv' INTO TABLE mytable" 
```

其中*mytable*是您的数据表。如果您的 CSV 文件中有非标准的字段/行分隔符，请使用*FIELDS TERMINATED BY*和*LINES TERMINATED BY*

见[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-06T06:33:37.080

**我用了这个，它奏效了。**

```
Login in mysql using `mysql -uroot -ppassword --local-infile` 
```

然后在终端：

```
LOAD DATA LOCAL INFILE '.csv path' INTO TABLE table_name FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-08T08:28:02.747

打开 Ubuntu 终端并运行以下命令

```
# mysql -u admin -p --local_infile=1 DATABASE_NAME -e "LOAD DATA LOCAL INFILE 'students.csv' INTO TABLE TABLE_NAME FIELDS TERMINATED BY ',' enclosed by '\"'" 
```

这里，

*   DATABASE_NAME = 您的数据库的名称
*   student.csv = CSV 文件目录，您要上传到数据库中
*   TABLE_NAME = 您要在哪个表中上传数据
*   admin = 数据库用户名

运行此命令后，系统要求输入管理员用户的密码。

写下密码并享受。

# javascript - Dhtmlx：以不同于输入中显示的格式保存的数据输入

> ID：16011144
> 
> 赞同：0
> 
> 时间：2013-04-15T08:51:16.050
> 
> 标签：javascript, sql, calendar, dhtmlx

我将表单绑定到一个网格并尝试使用以下方法进行日历输入：

> { 类型：“日历”，dateFormat：“%Y-%m-%d %H:%i:%s”，名称：“creationdate”，标签：“”，labelWidth：250，labelAlign：“left”，只读: false, enableTime: true, calendarPosition: "under", labelLeft:825, labelTop:75, inputWidth:297, inputLeft:303, inputTop:116 }

在我选择日期后，它以这种格式显示**2013-04-15 07:35:00**但在我点击保存后它以这种格式显示到我的网格中：**Mon Apr 15 2013 07:35:00 GMT+0300 (GTB夏令时）**。我怎样才能让它以与我的日历输入相同的格式显示？

问题是这种格式没有保存在我的数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:15:43.677

解决方案是将日期格式设置为我的网格：

> grid.setDateFormat("%Y-%m-%d %H:%i:%s");

# pypy - 是否可以限制 PyPy 中的内置函数？

> ID：16011148
> 
> 赞同：1
> 
> 时间：2013-04-15T08:51:26.337
> 
> 标签：pypy

根据[PyPy 文档](http://doc.pypy.org/en/latest/cpython_differences.html)，“**内置**名称总是引用**内置**模块，而不是像有时在 CPython 中那样的字典。分配给**内置**没有任何效果。” 例如在 CPython 中：

```
>>> eval("__import__('os').system('clear')", {'__builtins__':{}})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 1, in <module>
NameError: name '__import__' is not defined 
```

在 PyPy 中，它运行它没有错误。还有另一种限制可用内置函数的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:41:24.323

不，我们很久以前就决定不提供这个。也许我们现在可以重新考虑它，但请注意它只会给人一种虚假的安全感。即使*您*使用`{'__builtins__':{}}`. 请参阅[Python：使 eval 安全](https://stackoverflow.com/questions/3513292/python-make-eval-safe)。

# c# - MVC 4 使用 Bootstrap 编辑模态表单

> ID：16011151
> 
> 赞同：35
> 
> 时间：2013-04-15T08:51:40.290
> 
> 标签：c#, jquery, ajax, asp.net-mvc, twitter-bootstrap

我正在使用 MVC 4 和 Entity Framework 来开发 Intranet Web 应用程序。我有一个可以通过编辑操作修改的人员列表。我想通过使用模态表单使我的应用程序更加动态。所以我试图将我的编辑视图放入我的 Bootstrap 模式中，我有两个问题：

*   我应该使用简单视图还是部分视图？
*   如何执行验证（实际上它可以工作，但它会将我重定向到我的原始视图，而不是模式形式）

我想我必须使用 AJAX 和/或 jQuery，但我是这些技术的新手。任何帮助，将不胜感激。

编辑：我的索引视图：

```
@model IEnumerable<BuSIMaterial.Models.Person>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<br />

<div class="group">
        <input type="button" value="New person" class="btn" onclick="location.href='@Url.Action("Create")';return false;"/>
        <input type="button" value="Download report" class="btn" onclick="location.href='@Url.Action("PersonReport")';return false;"/>
</div>

@using (Html.BeginForm("SelectedPersonDetails", "Person"))
{  
    <form class="form-search">
        <input type="text" id="tbPerson" name="tbPerson" placeholder="Find an employee..." class="input-medium search-query">
        <button type="submit" class="btn">Search</button>
    </form>
}

<table class="table">
    <thead>
        <tr>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Details</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
@foreach (BuSIMaterial.Models.Person item in ViewBag.PageOfPersons)
{
    <tr>
        <td>@item.FirstName</td>
        <td>@item.LastName</td>
        <td>@item.StartDate.ToShortDateString()</td>
        <td>
            @if (item.EndDate.HasValue)
            {
                @item.EndDate.Value.ToShortDateString()
            }        
        </td>

        <td>
            <a class="details_link" data-target-id="@item.Id_Person">Details</a>
        </td>

        <td>
            <div>
                <button class="btn btn-primary edit-person" data-id="@item.Id_Person">Edit</button>

            </div>
        </td>

    </tr>
    <tr>
        <td colspan="6">

            <table>
                <tr>
                    <th>National Number</th>
                    <td>@item.NumNat</td>
                </tr>
                <tr>
                    <th>Vehicle Category</th>
                    <td>@item.ProductPackageCategory.Name</td>
                </tr>
                <tr>
                    <th>Upgrade</th><td>@item.Upgrade</td>
                </tr>
                <tr>
                    <th>House to work</th>
                    <td>@item.HouseToWorkKilometers.ToString("G29")</td>
                </tr>
            </table>
            <div id="details_@item.Id_Person"></div>
        </td>

    </tr>

}
    </tbody>
</table>

<div class="modal hide fade in" id="edit-member">
    <div id="edit-person-container"></div>
</div>

@section Scripts
{
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")

    <script type="text/javascript" language="javascript">

        $(document).ready(function () {

            $('#tbPerson').autocomplete({
                source: '@Url.Action("AutoComplete")'
            });

            $(".details_link").click(function () {
                var id = $(this).data("target-id");
                var url = '/ProductAllocation/ListByOwner/' + id;
                $("#details_"+ id).load(url);
            });

            $('.edit-person').click(function () {
                var url = "/Person/EditPerson"; 
                var id = $(this).attr('data-id');
                $.get(url + '/' + id, function (data) {
                    $('#edit-person-container').html(data);
                    $('.edit-person').modal('show');
                });
            });

        });

    </script>
} 
```

我的部分观点：

```
@model BuSIMaterial.Models.Person

<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Edit</h3>
</div>
<div>

@using (Ajax.BeginForm("EditPerson", "Person", FormMethod.Post,
                    new AjaxOptions
                    {
                        InsertionMode = InsertionMode.Replace,
                        HttpMethod = "POST",
                        UpdateTargetId = "list-of-people"
                    }))
{

    @Html.ValidationSummary()
    @Html.AntiForgeryToken()
    <div class="modal-body">
        <div class="editor-field">
            @Html.TextBoxFor(model => model.FirstName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-field">
            @Html.TextBoxFor(model => model.LastName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.LastName)
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-inverse" type="submit">Save</button>
    </div>
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-15T09:25:48.813

您应该使用局部视图。我使用以下方法：

使用视图模型，这样您就不会将域模型传递给您的视图：

```
public class EditPersonViewModel
{
    public int Id { get; set; }   // this is only used to retrieve record from Db
    public string Name { get; set; }
    public string Age { get; set; }
} 
```

在你的`PersonController:`

```
[HttpGet] // this action result returns the partial containing the modal
public ActionResult EditPerson(int id)
{  
    var viewModel = new EditPersonViewModel();
    viewModel.Id = id;
    return PartialView("_EditPersonPartial", viewModel);
}

[HttpPost] // this action takes the viewModel from the modal
public ActionResult EditPerson(EditPersonViewModel viewModel)
{
    if (ModelState.IsValid)
    {
        var toUpdate = personRepo.Find(viewModel.Id);
        toUpdate.Name = viewModel.Name;
        toUpdate.Age = viewModel.Age;
        personRepo.InsertOrUpdate(toUpdate);
        personRepo.Save();
        return View("Index");
    }
} 
```

接下来创建一个名为`_EditPersonPartial`. 这包含模态页眉、正文和页脚。它还包含 Ajax 表单。它是强类型的并接受我们的视图模型。

```
@model Namespace.ViewModels.EditPersonViewModel
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Edit group member</h3>
</div>
<div>
@using (Ajax.BeginForm("EditPerson", "Person", FormMethod.Post,
                    new AjaxOptions
                    {
                        InsertionMode = InsertionMode.Replace,
                        HttpMethod = "POST",
                        UpdateTargetId = "list-of-people"
                    }))
{
    @Html.ValidationSummary()
    @Html.AntiForgeryToken()
    <div class="modal-body">
        @Html.Bootstrap().ControlGroup().TextBoxFor(x => x.Name)
        @Html.Bootstrap().ControlGroup().TextBoxFor(x => x.Age)
    </div>
    <div class="modal-footer">
        <button class="btn btn-inverse" type="submit">Save</button>
    </div>
} 
```

现在在你的应用程序的某个地方，说另一个部分 _peoplePartial.cshtml 等：

```
<div>
   @foreach(var person in Model.People)
    {
        <button class="btn btn-primary edit-person" data-id="@person.PersonId">Edit</button>
    }
</div>
// this is the modal definition
<div class="modal hide fade in" id="edit-person">
    <div id="edit-person-container"></div>
</div>

    <script type="text/javascript">
    $(document).ready(function () {
        $('.edit-person').click(function () {
            var url = "/Person/EditPerson"; // the url to the controller
            var id = $(this).attr('data-id'); // the id that's given to each button in the list
            $.get(url + '/' + id, function (data) {
                $('#edit-person-container').html(data);
                $('#edit-person').modal('show');
            });
        });
     });
   </script> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-09-26T22:21:21.247

我更喜欢避免使用`Ajax.BeginForm`帮助程序并使用 JQuery 进行 Ajax 调用。以我的经验，维护这样编写的代码更容易。下面是详细信息：

**楷模**

```
public class ManagePeopleModel
{
    public List<PersonModel> People { get; set; }
    ... any other properties
}

public class PersonModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
    ... any other properties
} 
```

**父视图**

此视图包含以下内容：

*   要迭代的人的记录
*   当需要编辑 Person 时，将使用模态填充一个空 div
*   一些处理所有 ajax 调用的 JavaScript

```
@model ManagePeopleModel

<h1>Manage People</h1>

@using(var table = Html.Bootstrap().Begin(new Table()))
{
    foreach(var person in Model.People)
    {
        <tr>
            <td>@person.Id</td>
            <td>@Person.Name</td>
            <td>@person.Age</td>
            <td>@html.Bootstrap().Button().Text("Edit Person").Data(new { @id = person.Id }).Class("btn-trigger-modal")</td>
        </tr>
    }
}

@using (var m = Html.Bootstrap().Begin(new Modal().Id("modal-person")))
{

}

@section Scripts
{
    <script type="text/javascript">
        // Handle "Edit Person" button click.
        // This will make an ajax call, get information for person,
        // put it all in the modal and display it
        $(document).on('click', '.btn-trigger-modal', function(){
            var personId = $(this).data('id');
            $.ajax({
                url: '/[WhateverControllerName]/GetPersonInfo',
                type: 'GET',
                data: { id: personId },
                success: function(data){
                    var m = $('#modal-person');
                    m.find('.modal-content').html(data);
                    m.modal('show');
                }
            });
        });

        // Handle submitting of new information for Person.
        // This will attempt to save new info
        // If save was successful, it will close the Modal and reload page to see updated info
        // Otherwise it will only reload contents of the Modal
        $(document).on('click', '#btn-person-submit', function() {
            var self = $(this);
            $.ajax({
                url: '/[WhateverControllerName]/UpdatePersonInfo',
                type: 'POST',
                data: self.closest('form').serialize(),
                success: function(data) {
                    if(data.success == true) {
                        $('#modal-person').modal('hide');
                        location.reload(false)
                    } else {
                        $('#modal-person').html(data);
                    }
                }
            });
        });
    </script>
} 
```

**局部视图**

此视图包含一个将填充有关人员的信息的模式。

```
@model PersonModel
@{
    // get modal helper
    var modal = Html.Bootstrap().Misc().GetBuilderFor(new Modal());
}

@modal.Header("Edit Person")
@using (var f = Html.Bootstrap.Begin(new Form()))
{
    using (modal.BeginBody())
    {
        @Html.HiddenFor(x => x.Id)
        @f.ControlGroup().TextBoxFor(x => x.Name)
        @f.ControlGroup().TextBoxFor(x => x.Age)
    }
    using (modal.BeginFooter())
    {
        // if needed, add here @Html.Bootstrap().ValidationSummary()
        @:@Html.Bootstrap().Button().Text("Save").Id("btn-person-submit")
        @Html.Bootstrap().Button().Text("Close").Data(new { dismiss = "modal" })
    }
} 
```

**控制器动作**

```
public ActionResult GetPersonInfo(int id)
{
    var model = db.GetPerson(id); // get your person however you need
    return PartialView("[Partial View Name]", model)
}

public ActionResult UpdatePersonInfo(PersonModel model)
{
    if(ModelState.IsValid)
    {
        db.UpdatePerson(model); // update person however you need
        return Json(new { success = true });
    }
    // else
    return PartialView("[Partial View Name]", model);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-20T20:22:00.363

作为对 Dimitrys 的回答，但使用`Ajax.BeginForm`以下内容至少适用于 MVC >5（4 未测试）。

1.  编写一个模型，如其他答案所示，

2.  在“父视图”中，您可能会使用表格来显示数据。模型应该是一个可枚举的。我假设，该模型具有`id`- 属性。然而，在模板下方，模态和相应 javascript 的占位符

    ```
    <table>
    @foreach (var item in Model)
    {
        <tr> <td id="editor-success-@item.Id"> 
            @Html.Partial("dataRowView", item)
        </td> </tr>
    }
    </table>

    <div class="modal fade" id="editor-container" tabindex="-1" 
         role="dialog" aria-labelledby="editor-title">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content" id="editor-content-container"></div>
        </div>
    </div> 

    <script type="text/javascript">
        $(function () {
            $('.editor-container').click(function () {
                var url = "/area/controller/MyEditAction";  
                var id = $(this).attr('data-id');  
                $.get(url + '/' + id, function (data) {
                    $('#editor-content-container').html(data);
                    $('#editor-container').modal('show');
                });
            });
        });

        function success(data,status,xhr) {
            $('#editor-container').modal('hide');
            $('#editor-content-container').html("");
        }

        function failure(xhr,status,error) {
            $('#editor-content-container').html(xhr.responseText);
            $('#editor-container').modal('show');
        }
    </script> 
    ```

注意数据表行中的“editor-success-id”。

3.  这`dataRowView`是一个包含模型项目表示的部分。

    ```
    @model ModelView
    @{
        var item = Model;
    }
    <div class="row">
            // some data 
            <button type="button" class="btn btn-danger editor-container" data-id="@item.Id">Edit</button>
    </div> 
    ```

4.  编写通过单击行按钮（通过 JS `$('.editor-container').click(function () ...`）调用的局部视图。

    ```
    @model Model
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="editor-title">Title</h4>
    </div>
    @using (Ajax.BeginForm("MyEditAction", "Controller", FormMethod.Post,
                        new AjaxOptions
                        {
                            InsertionMode = InsertionMode.Replace,
                            HttpMethod = "POST",
                            UpdateTargetId = "editor-success-" + @Model.Id,
                            OnSuccess = "success",
                            OnFailure = "failure",
                        }))
    {
        @Html.ValidationSummary()
        @Html.AntiForgeryToken()
        @Html.HiddenFor(model => model.Id)
        <div class="modal-body">
            <div class="form-horizontal">
                // Models input fields
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Save</button>
        </div>
    } 
    ```

这就是神奇的地方：在 中`AjaxOptions`，UpdateTargetId 将替换编辑后的数据行，onfailure 和 onsuccess 将控制模态。

**也就是说，模态框只有在编辑成功并且没有错误时才会关闭，否则模态框将在 ajax-posting 之后显示以显示错误消息，例如验证摘要。**

但是如何让ajaxform知道是否有错误呢？这是控制器部分，只需在步骤 5 中更改 response.statuscode 如下：

5.  部分编辑模式对应的控制器动作方法

    ```
    [HttpGet]
    public async Task<ActionResult> EditPartData(Guid? id)
    {
        // Find the data row and return the edit form
        Model input = await db.Models.FindAsync(id);
        return PartialView("EditModel", input);
    }

    [HttpPost, ValidateAntiForgeryToken]
    public async Task<ActionResult> MyEditAction([Bind(Include =
       "Id,Fields,...")] ModelView input)
    {
        if (TryValidateModel(input))
        {  
            // save changes, return new data row  
            // status code is something in 200-range
            db.Entry(input).State = EntityState.Modified;
            await db.SaveChangesAsync();
            return PartialView("dataRowView", (ModelView)input);
        }

        // set the "error status code" that will redisplay the modal
        Response.StatusCode = 400;
        // and return the edit form, that will be displayed as a 
        // modal again - including the modelstate errors!
        return PartialView("EditModel", (Model)input);
    } 
    ```

**这样，如果在模态窗口中编辑模型数据时发生错误，错误将显示在模态中，并带有MVC的validationsummary方法；但如果更改成功提交，将显示修改后的数据表，并且模态窗口消失。**

注意：你让 ajaxoptions 工作，你需要告诉你的 bundles 配置绑定`jquery.unobtrusive-ajax.js`（可能由 NuGet 安装）：

```
 bundles.Add(new ScriptBundle("~/bundles/jqueryajax").Include(
                    "~/Scripts/jquery.unobtrusive-ajax.js")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T19:40:40.650

在`$('.editor-container').click(function (){})`，不`var url = "/area/controller/MyEditAction";`应该`var url = "/area/controller/EditPartData";`吗？

# ruby - 无法从参数中获取准确值

> ID：16011153
> 
> 赞同：0
> 
> 时间：2013-04-15T08:51:54.703
> 
> 标签：ruby, ruby-on-rails-3.2

我正在使用红宝石 1.9.3。我有“名称”字段，值为“J＆E Mechanical Contractors Inc.”，提交表格后，我在控制器中得到以下语句。

```
Started POST "/pages/new?name=J%20&%20E%20Mechanical%20Contractors%20Inc." for
127.0.0.1 at 2013-04-15 13:59:08 +0530

Processing by PageController#create as JSON
Parameters: {"name"=>"J ", " E Mechanical Contractors Inc."=>nil} 
```

这里我的名字是“J”，但预期的结果是“J & E Mechanical Contractors Inc.” 任何建议。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:55:11.590

您的请求包含未转义的 & 字符：

```
"/pages/new?name=J%20 & %20E%20Mechanical%20Contractors%20Inc." 
```

这需要转义，否则 Web 服务器会将其视为参数分隔符。

你是手动建立这个帖子请求吗？如果是这样，您需要在发出请求之前对参数进行 URL 编码。

# powershell - 如何从powershell连接到另一个环境的powershell

> ID：16011154
> 
> 赞同：0
> 
> 时间：2013-04-15T08:51:55.417
> 
> 标签：powershell

我正在运行powershell，我想从我的powershell连接到我的Exchange powershell，
这两个文件之间的差异在它们的目标中（右键单击= proproties），

“正常”powershell 目标 = **“%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe”**

"exchange" powershell 目标 = **"C:\WINDOWS\system32\windowspowershell\v1.0\powershell.exe -PSConsoleFile "C:\Program Files\Microsoft\Exchange Server\bin\exshell.psc1" -noexit -command "。'C:\Program Files\Microsoft\Exchange Server\bin\Exchange.ps1'""**

有没有办法通过代码连接到exchange powershell？？我猜是在目标中添加那两条额外的线......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:36:47.130

该命令行仅在安装了 Exchange 管理工具时才有效（它将尝试加载 Exchange 管理管理单元。

通常，在脚本中使用隐式远程处理并将远程 shell 中的函数导入当前会话更容易：

[http://www.mikepfeiffer.net/2010/02/managing-exchange-2010-with-remote-powershell/](http://www.mikepfeiffer.net/2010/02/managing-exchange-2010-with-remote-powershell/)

# android - CSS：-webkit-touch-callout 的 android 替代品

> ID：16011159
> 
> 赞同：6
> 
> 时间：2013-04-15T08:52:07.520
> 
> 标签：android, css, mobile, webkit

-webkit-touch-callout 是否有任何替代方案，它适用于基于 Android 的手机。我正在尝试禁用移动设备中的长触摸弹出窗口。我试图绑定 jQuerys taphold 事件以返回 false；但没有运气......有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-14T16:40:08.027

```
<!DOCTYPE html>
<html>
<head>
  <script>
    function absorbEvent_(event) {
      var e = event || window.event;
      e.preventDefault && e.preventDefault();
      e.stopPropagation && e.stopPropagation();
      e.cancelBubble = true;
      e.returnValue = false;
      return false;
    }

    function preventLongPressMenu(node) {
      node.ontouchstart = absorbEvent_;
      node.ontouchmove = absorbEvent_;
      node.ontouchend = absorbEvent_;
      node.ontouchcancel = absorbEvent_;
    }

    function init() {
      preventLongPressMenu(document.getElementById('theimage'));
    }
  </script>
</head>
<body onload="init()">
  <img id="theimage" src="http://www.google.com/logos/arthurboyd2010-hp.jpg" width="400">
</body>
</html> 
```

资料来源：[在 Android 上长按时禁用上下文菜单](https://stackoverflow.com/questions/3413683/disabling-the-context-menu-on-long-taps-on-android)

# html - 打包混合应用时可以存储 HTML5 的应用缓存吗？

> ID：16011163
> 
> 赞同：1
> 
> 时间：2013-04-15T08:52:15.333
> 
> 标签：html, application-cache, hybrid-mobile-app

我正在开发一个混合应用程序。

它将从我的服务器中获取内容，并且我将使用应用程序缓存来解决性能和流量成本问题。

即使我使用应用程序缓存，用户第一次打开页面时也必须下载网页。

我想在将应用上传到谷歌播放和苹果应用商店之前存储应用缓存。

然后，如果打包后页面没有更新，应用程序只会检查清单文件。

**我可以将应用程序缓存存储在混合应用程序中吗？**如果是这样，我在哪里可以获得操作文档，或者我该怎么做？

先感谢您！

ps：我会用phonegap打包webapp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T22:12:07.537

迟到总比不回答好，我猜！

答案是肯定的，这是可能的。我在应用商店中有两个应用程序正在执行此操作。它工作得很好，虽然这是一个痛苦的过程（主要是因为[appcache 是一个冲洗器](http://alistapart.com/article/application-cache-is-a-douchebag)）并且我们正在使用定制版本的 Cordova 来做到这一点。

这是您如何实现此功能的粗略想法：

*   `index.html`有一个你的 Cordova`startPage`指向的空本地存根。

*   在您的网络视图中实施`webViewDidFinishLoad`。它将做两件事 - 在开始时打开 appcache 页面并将您的页面注入`cordova.ios.js`后续页面。像这样的东西：

    ```
    - (void)webViewDidFinishLoad:(UIWebView*)webView {
        if(!_initialPageLoaded) {
            _initialPageLoaded = YES;
            NSURL *url = [NSURL URLWithString: @"https://mywebsite.com/app/"];

            NSMutableURLRequest *req = [[NSMutableURLRequest alloc] initWithURL:ful];
            [self.webView loadRequest:req];

            return;
        }

        NSString* jsPath = [[NSBundle mainBundle] pathForResource:@"www/cordova.ios" ofType:@"js"];
        NSString* c = [NSString stringWithContentsOfFile:jsPath encoding:NSUTF8StringEncoding error:nil];

        [webView stringByEvaluatingJavaScriptFromString:c];

        return [super webViewDidFinishLoad:webView];
    } 
    ```

*   利润！

请注意，cordova.ios.js 文件是应用程序的本地文件，因此不要将其保存在您的网络服务器上。

# javascript - 如何使用 File API 和 Dropzone.js 检测文件的尺寸

> ID：16011164
> 
> 赞同：6
> 
> 时间：2013-04-15T08:52:28.987
> 
> 标签：javascript, dropzone.js

使用 Dropzone.js，我需要在添加文件时检测图像的尺寸并将它们应用于其父`.details`div。以下代码代码有效并返回带有添加的图像宽度的警报。

```
myDropzone.on("addedfile", function(file, xhr) {
  var fr;
  fr = new FileReader;
  fr.onload = function() {
    var img;
    img = new Image;
    img.onload = function() {
      return alert(img.width);
    };
    return img.src = fr.result;
  };
  return fr.readAsDataURL(file);
}); 
```

问题是我不知道如何将宽度分配给`.details`设置预览的预览宽度的父元素。

我尝试替换此代码的警报，但它没有做任何事情。

```
$(this).parent('.details').css('height',img.height); 
```

我有点迷失如何将 onload 函数中的值与将其应用于其父类相关联。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T17:44:53.597

使用最新版本的 dropzone，您不必自己编写此代码。

只需读取生成缩略图时在对象上设置的`file.width`和`file.height`属性。`file`

问题，为什么你的 CSS 不影响元素，是因为你没有指定单位，`px`在这种情况下。所以你的代码可以是：

```
myDropzone.on("thumbnail", function(file) {
  $(this.element).parent('.details').css('height', file.height + 'px');
}); 
```

# core-plot - Coreplot - 可拉伸图像

> ID：16011167
> 
> 赞同：0
> 
> 时间：2013-04-15T08:52:30.860
> 
> 标签：core-plot

我无法在 CorePlot 中找到任何关于可拉伸图像的示例或任何其他问题。我正在尝试在我的图表中使用注释，其图像必须是可拉伸的（图像的角必须保持不变）。

我设置了`fill`注释，`fillWithImage:`我认为我在那个地方是对的，但是图像完全调整了自身的大小，同时也拉伸了角落。

我尝试了所有我知道或见过`UIImage`的组合。`CPTImage`但无济于事。

一个例子是：

```
 UIImage *annotationImage = [[UIImage imageNamed:@"image.png"] stretchableImageWithLeftCapWidth:13 topCapHeight:12];
 CPTFill *annotationFill = [CPTFill fillWithImage:[CPTImage imageWithCGImage:annotationImage.CGImage]];
 borderLayer.fill = annotationFill; 
```

请告诉我这是可能的，我错过了一些东西。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:25:38.393

当前版本的 Core Plot 不支持此功能。[请在 Core Plot问题跟踪器](http://code.google.com/p/core-plot/issues/list)上打开增强请求。

# css - 将canvas元素设置为div元素的背景

> ID：16011168
> 
> 赞同：5
> 
> 时间：2013-04-15T08:52:31.950
> 
> 标签：css, html

我们可以使用画布来绘制自定义形状。我需要将我的形状动态绘制为画布项并将其放置为 div 背景项。我的页面生成运行时，它们不是静态的 html 代码，所以我不能使用棘手的方法。你的想法是什么？

问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T09:02:15.903

Looks like you searching for [toDataURL()](http://tutorials.jenkov.com/html5-canvas/todataurl.html).

**UPD:** Here a usage exaple:

```
dataUrl = your_canvas.toDataURL();
your_div.style.background='url('+dataUrl+')' 
```

Live [demo](http://jsfiddle.net/6t3xX/1/) on jsFiddle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:55:37.563

听起来你需要canvas2image：[https ://github.com/hongru/canvas2image](https://github.com/hongru/canvas2image)

您可以创建一个画布，然后以 png 格式获取内容：

```
var canvas = document.createElement("canvas");

....do stuff here...

var img = Canvas2Image.convertToPNG(canvas, canvas.width, canvas.height); 
```

然后您需要做的就是使用 png 作为背景图像：

```
document.body.style.background = "url(" + img.src + ")"; 
```

如果有任何错误，请纠正我。

# c# - 使用反射的 Linq 组

> ID：16011176
> 
> 赞同：1
> 
> 时间：2013-04-15T08:53:04.173
> 
> 标签：c#, linq, data-structures, system.reflection

我有数据表“汽车”，它有 3 个列（所有者、汽车类型、颜色）。我的问题是如何通过使用反射使分组部分更加动态。我的想法是将分组 col 添加到数组中，然后在查询分组部分使用反射。但是我对反射感到震惊..

```
var gcols = new string[] { "owner", "carType" };                         
var reseult = dt.AsEnumerable()
                     .GroupBy(x => new
                     {
                         carType = x.Field<string>("carType"),
                         colour = x.Field<string>("colour")
                     })
                     .Select(x => new
                     {
                         CarType = x.Key.carType,
                         Colour = x.Key.colour,
                         count = x.Count()
                     })
                    .OrderBy(x => x.CarType).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:00:55.217

If you added this extension method to object:

```
 public static T Field<T>(this object source, string FieldName)
    {
        var type = source.GetType();
        var field = type.GetField(FieldName);
        return (T)field.GetValue(source);
    } 
```

You'd be able to use the syntax you've posted in your code.

I've not added any safety checking here so it'll need cleaning up, but it'll get you going. Ideally you'd want to check that the type of `field` is the same as `T` and a few other checks.

# social-networking - 远程社交 API 有哪些替代方案？

> ID：16011177
> 
> 赞同：1
> 
> 时间：2013-04-15T08:53:20.963
> 
> 标签：social-networking

Telesocial api 的主要缺点是它只支持美国号码。那么其他国家呢？有什么替代方案吗？是否有任何其他 api 提供像 telesocial 这样的社交 api 调用？

# qt - 向 QTabWidget 添加文本

> ID：16011178
> 
> 赞同：0
> 
> 时间：2013-04-15T08:53:25.040
> 
> 标签：qt, user-interface, qtabwidget

我有继承的类`QTabWidget`。在生成的选项卡中，我想显示一些文本。用户不能编辑文本。但是在应用程序执行期间，可能会有一个案例导致文本更改。我应该为文本使用哪个类？考虑过`QTextEdit`- 但它看起来不是最好的主意 - 因为用户不应该更改文本。还考虑过`QLabel`- 但它也不好 - 因为应用程序显示文本而不是标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:09:35.013

`QTextEdit`可以使用其属性设置为只读`readOnly`。我`QTextEdit`用来显示很长的只读文本，因为它可以滚动。我也有读写文本，通过为所有长文本选择相同的小部件，我的用户界面看起来很均匀。

[http://qt-project.org/doc/qt-4.8/qtextedit.html#readOnly-prop](http://qt-project.org/doc/qt-4.8/qtextedit.html#readOnly-prop)

另一种选择是`QWebView`，如果您打算拥有复杂格式的文本。

[http://qt-project.org/doc/qt-4.8/qwebview.html](http://qt-project.org/doc/qt-4.8/qwebview.html)

# variables - 在 Sass 中拆分变量列表

> ID：16011181
> 
> 赞同：1
> 
> 时间：2013-04-15T08:53:28.877
> 
> 标签：variables, loops, sass

在 Sass 中有没有办法用连字符拆分变量/类的列表？
这是一个模糊的问题标题，所以我最好展示我正在努力实现的目标。

在下面的示例中，我尝试创建一些可以应用于 HTML 元素的实用程序类，以帮助处理垂直节奏。

例如，我可能想给一个元素一个与我的垂直节奏策略一致的小边距，因此我将添加类 .mts（代表 margin-top-small）。

然后，我想针对每个媒体查询输出这些实用程序类的版本，以进行细粒度控制，例如，我可能想要一个类`.m-t-s-768`，当最小视口宽度为 768 像素时，该类将添加一个小的上边距。

我在下面实现了这一点，但这是一种非常冗长且重复的方式。任何人都可以提出更简洁的方法吗？

```
Variables
––––––––––
$mediaQueries-px:
640,
768,
1024
;

$s: 20px; /* FYI I've simplified these examples for the sake of demonstration, normally I use something like ($baseLineHeight / 1.5) + rem */
$m: 50px;
$l: 60px;

Creating the classes
–––––––––––––––––––––
.m-t-s {
  margin-top: $s;
}

/* Create versions for each defined media query */
@each $mediaQuery in $mediaQueries-px {
  @media screen and (min-width: ($mediaQuery / 16px)) {
    .m-t-s-#{$mediaQuery} {
      margin-top: $s;
    }
  }
}

.m-t-m {
  margin-top: $m;
}

/* Create versions for each defined media query */
@each $mediaQuery in $mediaQueries-px {
  @media screen and (min-width: ($mediaQuery / 16px)) {
    .m-t-m-#{$mediaQuery} {
      margin-top: $m;
    }
  }
} 
```

这也重复`.m-t-l`了（margin top large），然后它继续填充类（例如`.p-t-s`等等），所以它变成了一个很长的实用程序类列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:25:51.810

要以编程方式生成该输出，您需要另一个列表和一个内部循环：

```
$mediaQueries-px:
640,
768,
1024
;

$s: 20px;
$m: 50px;
$l: 60px;

$sizes: s $s, m $m, l $l;

@each $size in $sizes {
    .m-t-#{nth($size, 1)} {
      margin-top: nth($size, 2);
    }
}

@each $mediaQuery in $mediaQueries-px {
  @media screen and (min-width: ($mediaQuery / 16 * 1em)) { // modified for compilation purposes
    @each $size in $sizes {
        .m-t-#{nth($size, 1)}-#{$mediaQuery} {
          margin-top: nth($size, 2);
        }
    }
  }
} 
```

输出：

```
.m-t-s {
  margin-top: 20px;
}

.m-t-m {
  margin-top: 50px;
}

.m-t-l {
  margin-top: 60px;
}

@media screen and (min-width: 40em) {
  .m-t-s-640 {
    margin-top: 20px;
  }

  .m-t-m-640 {
    margin-top: 50px;
  }

  .m-t-l-640 {
    margin-top: 60px;
  }
}
@media screen and (min-width: 48em) {
  .m-t-s-768 {
    margin-top: 20px;
  }

  .m-t-m-768 {
    margin-top: 50px;
  }

  .m-t-l-768 {
    margin-top: 60px;
  }
}
@media screen and (min-width: 64em) {
  .m-t-s-1024 {
    margin-top: 20px;
  }

  .m-t-m-1024 {
    margin-top: 50px;
  }

  .m-t-l-1024 {
    margin-top: 60px;
  }
} 
```

# java - 没有替换功能的标准 Eclipse“查找/替换”对话框

> ID：16011183
> 
> 赞同：0
> 
> 时间：2013-04-15T08:53:36.073
> 
> 标签：java, eclipse, find

我必须创建一个对话框来搜索包含具有不可编辑节点的树的视图。我想到了标准的 Eclipse“查找/替换”功能。相关的对话框类是否可访问？如果是，它是否足够灵活，以便我可以停用替换功能，使其仅在查找模式下工作？

PS我已经从一个开源项目下载了代码。那里有我需要的相同功能。但是他们从头开始实现了对话框和查找功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:34:56.610

创建并运行[FindReplaceAction](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/texteditor/FindReplaceAction.html)，这将打开对话框。是否启用替换取决于活动视图部分。每当活动视图部分更改时，对话框将[收到新的 IFindReplaceTarget 通知](http://javasourcecode.org/html/open-source/eclipse/eclipse-3.5.2/org/eclipse/ui/texteditor/FindReplaceDialog.html#updateTarget%28org.eclipse.jface.text.IFindReplaceTarget,%20boolean,%20boolean%29)，并取决于启用/禁用编辑功能。

# performance - git - 仅获取文件，而不是历史记录

> ID：16011184
> 
> 赞同：5
> 
> 时间：2013-04-15T08:53:42.263
> 
> 标签：performance, git, repository

当我运行`git pull`or时`git fetch`，我显然会同时检索历史记录和文件。对于大型项目，这需要很长时间。我想知道如何加快这个过程，因为对于某些项目，我只对源代码感兴趣，而不对历史感兴趣。有没有办法告诉 git 我只想获取文件的当前快照而不是整个历史记录？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T09:11:11.747

您可能想查看--称为“浅克隆”中的`--depth`选项。`git clone`特别是，您可能想要：

```
git clone --depth=1 <url> 
```

如果项目在 GitHub 上，您可以随时使用那里的下载链接。请注意，使用浅层克隆有一些注意事项：

> 创建一个浅克隆，其历史被截断为指定的修订数。浅层存储库有许多限制（您不能克隆或从中获取，也不能从中推送或进入），但如果您只对历史悠久的大型项目的近期历史感兴趣，并且想要作为补丁发送修复。

但这听起来像是你可以忍受的东西。

此外，正如 positron 指出的那样，您也可以这样做`git archive`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T09:09:15.710

您可以使用*浅克隆*：

```
git clone --depth=1 git://url/of/repo 
```

但是，您将无法提交/推送在浅克隆中所做的更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T09:13:39.190

如果有像 gitweb 或 cgit 这样的 webview，你可以很好地拍摄快照。但我认为单独获取代码是*不可能的*。因为 fetch 正在处理您的 git 对象而不是代码。

```
git archive --format=tar --remote=gitolite@server:repo.git HEAD | bzip2 > repo-snapshot.tar.bz2 
```

# spring - Spring 上下文刷新使 Hibernate 会话抛出此异常：No Session found for current thread

> ID：16011190
> 
> 赞同：1
> 
> 时间：2013-04-15T08:54:08.973
> 
> 标签：spring, hibernate, spring-mvc, hibernate-session

我正在开发一个具有多个弹簧上下文的 Web 应用程序。它有一个主上下文，包含业务逻辑、休眠会话和应用程序的核心需求，其他上下文用于 spring mvc 绑定。通常应用程序工作正常，一切正常，但是当我刷新主上下文并尝试从其他上下文访问休眠会话时，休眠会话会抛出此异常：

```
org.hibernate.HibernateException: No Session found for current thread at         
org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97) at 
org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:980)... 
```

但有趣的是应用程序可以启动启动，包括从数据库中选择大量数据。

有没有一种方法可以让我安全地刷新 spring 上下文？

PS：我可以毫无问题地获得其他弹簧上下文对象。在我刷新主上下文之前，应用程序可以在多个上下文中正常工作。我尝试在主上下文之后刷新 mvc 上下文，我从中调用休眠会话。在那个 mvc 上下文中仍然是同样的例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:54:29.617

您收到该错误的原因是您正在从线程下方删除 Hibernate 会话。据我所知，这些会话与创建它们的线程相关联。这就是为什么您不能将代理的 Hibernate 实体传递给像 BlazeDS 这样的框架的原因。一旦被代理的实体离开线程，会话就不再与之关联，并且您失去了追踪被代理的项目的能力。

一种解决方案可能是不使用代理，而是急切地加载所有关系。然而，这将破坏使用 ORM 的主要好处之一。或者，如果您可以以某种方式重新启动所有有问题的线程，创建与新的 Hibernate 会话相关联的新线程，那也可能会起作用。

# makefile - Gnu make：使用文件内容作为配方

> ID：16011195
> 
> 赞同：1
> 
> 时间：2013-04-15T08:54:17.703
> 
> 标签：makefile, dependencies, gnu-make

考虑拥有一个 makefile，它可以使用文件中列出的生成行生成一些文件。例如文件 001 使用第一行，002 使用第二行等。

该文件可以更改（它有自己的依赖项，但这并不重要）。如果此文件中的某些行发生更改，则应重新制作相应的文件。但其他文件不应该。

我找到的解决方案是这个：对于每个文件都有标志文件，其内容是上次生成的行。用生成线重新制作文件后，我检查所有这些文件，如果线改变，则将其删除。因此，依赖于已删除文件的文件将被重新制作，而其他文件则不会。但是如果使用 msys-make，这工作太慢了。

您能否建议任何其他解决方案，它不需要对文件系统和可执行文件进行多次额外调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:47:47.973

我们有可能与您的问题类似的情况。我们有 xml 文件，说它`foobar.xml`包含依赖项`foobar.out`

```
<files>
  <file>a</file>
  <file>b</file>
  <file>c</file>
</files> 
```

我们决定坚持这种简单的布局，所以我们不需要解析 xml。我们使用[makepp](http://makepp.sourceforge.net/)（因为我们厌倦了 gmake 没有注意到命令更改等依赖项）。这为我们提供了内置`&sed`命令（该表达式实际上是 Perl 编程，但正如您所见，您不需要深入了解它）。下面是我们对三种行的三个简单替换：

```
%.d: %.xml
    &sed 's!<files>!$(stem).out: \\! || s!<file>(.+)</file>!$$1 \\! || s!</files>!!' \
        $(input) -o $(output)

include foobar.d 
```

这产生`foobar.d`了我们然后包括：

```
foobar.out: \
  a \
  b \
  c \ 
```

Stackoverflow 在这里吞下了最后一个空行，这样就不必担心尾随的反斜杠了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:39:10.607

如果我正确理解您的描述，那么您所描述的是一个 Makefile，它依赖于另一个功能上是 Makefile 但由于未知原因使用不同格式的文件。

将该文件转换为 Makefile 格式并将其[包含](http://www.gnu.org/software/make/manual/html_node/Include.html)到原始 Makefile 中。（如果您使用的是 GNU Make。）

# ruby - 组织 Rails 视图，使其易于阅读

> ID：16011196
> 
> 赞同：0
> 
> 时间：2013-04-15T08:54:19.727
> 
> 标签：ruby, ruby-on-rails-3, model-view-controller

我有以下代码

```
<% @data1.results.map do |s|%>
    <%if params[:data1].empty? == true%>
        s.product.text
            <!-- More content to come-->
    <%else%>
        <% if s.text.include?(params[:data1])%>
            <!--Skip over -->
        <%else%>
            s.product.text
                    <!-- More content to come-->
    <%end%>
        <%end%>
<%end%> 
```

现在你可以看到

```
s.product.text
<!-- More content to come--> 
```

被重复。我刚刚粘贴了这两行，但将来会有更多。现在我想知道有什么巧妙的方法可以将代码放在那里而不重复或使视图不舒适？也许使用 Proc ？但是如何？我尝试在助手中使用它但没有用

我有类似的东西

```
@proc = Proc.new {
    s.product.text
    <!-- More content to come-->
} 
```

但是当我做 a`@proc.call`它给了我一个`no method error`.

任何帮助或建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:34:20.603

您可以将这两个条件结合起来，这样就不需要重复了。

```
<%if !params[:data1].empty? && s.text.include?(params[:data1]) %>
   <!--Skip over -->
<%else%>
   s.product.text
   <!-- More content to come-->
<%end%> 
```

但是在你的视图中有复杂的条件并不是一个好主意，所以我建议把它推到一个助手中，然后你的视图看起来像

```
<%if show_thing?(s) %>
   s.product.text
   <!-- More content to come-->
<% else %>
   <!--Skip over -->
<%end%> 
```

你的助手看起来像

```
def show_thing?(s)
  params[:data1].empty? || !s.text.include?(params[:data1])
end 
```

正如其他一些答案所建议的那样，将要为产品呈现的内容也推送到部分内容可能仍然是一个好主意。如果您总是为产品呈现相同的标记，您甚至可以将其缩短为

```
<%if show_thing?(s) %>
   <%= render  s.product %>
<% else %>
   <!--Skip over -->
<%end%> 
```

这将呈现 products/_product 部分，将局部变量 product 设置为 s.product。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T08:56:16.843

您可以将它`s.product.text <more content>`放在一个部分中，并在需要时从两个地方渲染它。

欲了解更多信息： http: [//guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:53:21.907

这应该有效。顺便说一句，你应该使用每个 for 循环，除非你想修改数组。

```
<% @data1.results.each do |s|%>
  <% if params[:data1].empty? == true%>
    <%= render :partial => 'partial_name', :locals => { :text => s.product.text }
  <% else%>
    <% if s.text.include?(params[:data1])%>
        <!--Skip over -->
    <%else%>
        <%= render :partial => 'partial_name', :locals => { :text => s.product.text }
    <%end%>
  <%end%>
<%end%> 
```

现在您可以在局部变量中使用局部变量“文本”

# jquery - jquery文件上传限制文件数

> ID：16011200
> 
> 赞同：19
> 
> 时间：2013-04-15T08:54:35.687
> 
> 标签：jquery, jquery-file-upload

我正在使用 jquery 文件上传将文件上传到服务器。我想限制用户最多上传 6 个文件。我搜索了 wiki jquery 文件上传，但没有找到它的参数。有什么方法可以限制用户上传的数量

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-15T09:18:42.630

此处使用`maxNumberOfFiles`的是[文档](https://github.com/blueimp/jQuery-File-Upload/wiki/Options#maxnumberoffiles)：

```
$('#fileuploadbasic').fileupload({

maxNumberOfFiles: 6

}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-05-14T11:52:37.763

**maxNumberOfFiles**不适合我，所以我做了以下

```
$('#fileuploadbasic').fileupload({
    change : function (e, data) {
        if(data.files.length>=5){
            alert("Max 5 files are allowed")
            return false;
        }
    },
    maxFileSize: 20000000,
    acceptFileTypes: /(\.|\/)(jpe?g|png)$/i,
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-01T10:54:40.857

您可以通过“Uploadhandler.php”文件限制上传文件。更改“max_number_of_files”选项。为我工作。但它仅在您上传文件时验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-23T13:10:09.807

如果您使用的是“Krajee”文件上传，那么您将不得不使用

```
$('#fileuploadbasic').fileinput({
    maxFileCount: 6
}); 
```

如果设置为 0，则表示允许的大小不受限制。默认为 0。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-14T08:58:10.753

你可以试试：

```
$('#fileuploadbasic').fileupload({
  //.....
  paramName: 'your_input_name',
  add : function (e, data) {
    if(data.paramName != undefined) data.submit();
  }
}); 
```

# html - 设置没有“位置：绝对”的li的高度

> ID：16011202
> 
> 赞同：1
> 
> 时间：2013-04-15T08:54:38.203
> 
> 标签：html, css, height, html-lists, listitem

我想制作一个带有背景的 li 元素的菜单，所以我想设置`height`and `width`，但我不能这样做。我试过`position: absolute;`了，但是当我这样做时，列表项会彼此重叠。

有没有办法改变高度/宽度`position: absolute;`？

我以前从来没有遇到过这个问题，我无法弄清楚它是什么，希望你能提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T08:55:31.480

您可以尝试调整`line-height` 或`display: block`与`width`and一起使用`height`：

```
<ul class="one">
    <li>One</li>
    <li>Two</li>
</ul>

<ul class="two">
    <li>One</li>
    <li>Two</li>
</ul>

.one li {
    line-height: 2em;
    background-color: green;
}

.two li {
    display: block;
    background-color: pink;
    width: 50px;
    height: 50px;
} 
```

[http://jsfiddle.net/PJvq4/](http://jsfiddle.net/PJvq4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:15:06.323

LI 元素默认是一个*display:list-item*，它忽略了高度。高度和宽度是对显示块和内联块或浮动元素有效的 css 属性。

在您的情况下，如果您想要一个包含固定高度元素的垂直列表，请使用*display:block*，因为它意味着换行。

希望有帮助

# css - 按钮背景比应有的暗 3%

> ID：16011204
> 
> 赞同：4
> 
> 时间：2013-04-15T08:54:48.777
> 
> 标签：css, twitter-bootstrap, colors, hsl

我正在将 CSS 添加到基于 Bootstrap 的 Web 应用程序中，以匹配来自设计师的 PDF。有一个按钮图像，其背景颜色 Seashore 报告为`rgb(0,186,158)`aka `hsl(171,100,36%)`。所以我设置按钮的背景颜色以匹配图像：

```
background-image: url('images/elements/small-search-button-up.png');
background-color: hsl(171,100%,36%); 
```

只是……没有。![不匹配](https://i.stack.imgur.com/xfDZ5.png)

从亮度中减去 3% 可以修复它：![匹配](https://i.stack.imgur.com/VdDFD.png)

我很想知道为什么。我在应用的所有其他 CSS 样式中看不到任何明显的原因。这在 OS X Snow Leopard 上的 Chrome 和 Firefox 中都会发生。

我看到某些字体有类似的东西（将 Web 呈现的输出与提供的 PDF 进行比较），但原因可能不同。

编辑

这是原始图像。希望 SO 不会处理它。![原始图像](https://i.stack.imgur.com/xMV5F.png)

编辑2

为什么使用 PNG？这就是设计师提供图像的方式。我不知道有一个与色彩空间信息的权衡。另外，我会认为 PNG 更适合需要平坦背景和清晰边缘的字形（与 JPEG 相比），不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:02:05.123

很可能是 PNG 图像的颜色显示不一致。

PNG图像没有色彩空间信息，而是有一个伽玛值，并且解释该值以确定色彩空间存在问题。您可能会看到不同浏览器之间存在颜色差异，因此如果您调整一个浏览器显示 PNG 的颜色，它在其他浏览器中将不匹配。

如果您需要颜色匹配其他元素，请使用不同的文件格式，或者使 PNG 的背景透明而不是绿色。

* * *

渲染文本是另一回事。浏览器渲染不同字体的方式总会有细微的差别，这取决于所使用的渲染方法、安装的字体以及系统/用户设置。您根本无法期望在不同的浏览器中得到完全相同的结果。

# objective-c - 目标 C：区分 iVar 和访问器

> ID：16011210
> 
> 赞同：1
> 
> 时间：2013-04-15T08:55:10.160
> 
> 标签：objective-c, properties

```
 @interface RandomObject : NSObject
 {
  NSString* someObject; // I know I don't have to explicitly declare. Just to clarify my point. 
 }
 @property (nonatomic, strong) NSString *someObject;
 @end

 @implementation RandomObject 
 @synthesize someObject;
 @end 
```

鉴于上面的代码并使用了 Xcode 4.3（因此，没有自动合成），这是我的问题。

property/synthesize 将为 someObject 创建访问器，即 getter 和 setter。所以如果我想给 someObject 赋值，我可以这样做。

```
 self.someObject = @"Tomato"; // [self setSomeObject: @"Tomato"]; 
```

如果我的理解是正确的，self 会将 @"Tomato" 发送给 setSomeObject 方法。但是如果你这样做呢？

```
 someObject = @"Tomato"; // or maybe _someObject = @"Tomato" if you are doing auto-synthesizing 
```

直接访问 iVar 对象似乎是个坏主意，但由于 someObject 是私有变量，因此在同一个类中您可以访问它，对吗？

我理解如果您想从另一个类操作 someObject ，为什么需要使用 self.someOject 。但是为什么即使你还在同一个班级，你也需要做同样的事情。为什么直接访问 iVar 是个坏主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:10:00.147

一般来说，访问器的优点多于缺点，我可以在任何地方使用它们。

主要问题是，您直接引用 ivar 的每个地方都是您的代码需要更改的另一个潜在地方。

例如，假设您`someObject`在课堂上的多个地方引用过。然后需求发生变化，现在您决定在`someObject`分配 的值时需要进行其他一些工作。由于您在整个类中直接访问了 ivar，因此您现在必须在分配`someObject`或重构的任何地方复制此新代码。如果您使用的是访问器，则只需更改一段代码

```
- (void)setSomeObject:(id)anObject
{
  if (anObject != someObject) {
    someObject = anObject;
    [self doSomeWork];
  }
} 
```

您可能会遇到与 getter 相同的问题 - 假设您存储了一个对象数组`someObjects`- 这很好用，但后来您决定实际上不需要存储`someObjects`，因为它可以从其他值动态计算。如果您在任何地方都直接访问了 ivar，那么这将成为一件大事。如果您坚持`someObject`在 getter 后面进行抽象，那么您现在要做的就是

```
- (NSArray *)someObjects
{
   return [self calculateSomeObjects];
} 
```

* * *

这正是非 ARC 代码的想法，它将 ivar 的内存管理放在一个地方（在访问器之后），这样您就不必在代码中乱扔重复的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:59:01.877

该属性不仅仅是将一个对象分配给 ivar。

如果您不使用 ARC，该属性将自动生成保留/释放代码来处理内存管理。只是调用`someObject = @"Tomato"`会造成内存泄漏（如果分配了 someObject）

如果您的属性是`atomic`，则该属性将提供线程安全，而访问 ivar 将不是线程安全的。

有关自动生成的属性代码的示例，请参阅[https://stackoverflow.com/a/589348/1597531](https://stackoverflow.com/a/589348/1597531)。

# wordpress - 在 wordpress 主题中更改 cufonttext 标记中的内容

> ID：16011212
> 
> 赞同：1
> 
> 时间：2013-04-15T08:55:18.270
> 
> 标签：wordpress, wordpress-theming, cufon

我安装了一个 WordPress 主题，其中包含“我们的赞助商”或“精选帖子”等标题。当我使用谷歌浏览器检查元素时，它显示它位于一个名为“cufontext”的标签内，这是我以前从未遇到过的（我认为它与 javascript 有关）。

是否可以更改 cufontext 标记中的内容，使其显示不同的内容，例如“关于我”而不是“我们的赞助商”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:23:53.790

Cufon 是一种字体替换技术，它使用 javascript 将字体从字体文件写入浏览器。

所以这些`<cufon>`标签是在页面呈现时生成的，而不是在模板文件中。

只需找到“我们的赞助商”文本所在的位置并将其替换为您的喜好。

该文本最可能的位置是：

*   在帖子/页面中作为标题
*   在模板中作为静态文本

# java - byte[] 到 Wicket 中的 iresourcestream

> ID：16011213
> 
> 赞同：3
> 
> 时间：2013-04-15T08:55:20.933
> 
> 标签：java, xml, ajax, stream, wicket

我想实现[这个页面](https://cwiki.apache.org/WICKET/ajax-update-and-file-download-in-one-blow.html)的例子。

我被困在`getResourceStream()`方法上。我的应用程序有一个`byte[]`（生成的 XML 文件），用户应该能够下载。问题是我不知道如何将 a 转换`byte[]`为`IResourceStream`.

这就是我所拥有的：

```
final AJAXDownload download = new AJAXDownload()
{
    private static final long serialVersionUID = 1L;

    @Override
    protected IResourceStream getResourceStream()
    {
        ByteArrayResource bar = new ByteArrayResource("TEXT??", xmlFileInBytes);
                return (IResourceStream) bar;
        }
    }; 
```

上面的代码给出了一个`ClassCastException`. 有人可以解释我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T09:01:08.130

You can use the class StringResourceStream which is a child of IResourceStream and to use the byte array:

You can do something like this:

```
 byte byteArray[] = new byte[1024]   //this is the byte array containing the xml which you want to use.
  StringResourceStream srs = new StringResourceStream(new String(byteArray)); 
```

So in your case the method will look something like below:

```
 final AJAXDownload download = new AJAXDownload()
 {
     private static final long serialVersionUID = 1L;

     @Override
     protected IResourceStream getResourceStream()
     {
         StringResourceStream bar = new StringResourceStream (new String(xmlFileInBytes) );
                 return (IResourceStream) bar;
         }
     }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T08:59:06.190

该类`ByteArrayResource`实现`IResource`，但不是`IResourceStream`。这就是为什么你有`ClassCastException`.

要解决它，您应该找到一个实现的类`IResourceStream`；查看它的[Javadoc](https://ci.apache.org/projects/wicket/apidocs/org/apache/wicket/util/resource/IResourceStream.html)以获取可能的实现列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T08:25:30.950

这是目前未经测试的代码，但不是做

```
ByteArrayResource bar = new ByteArrayResource("TEXT??", xmlFileInBytes);
return (IResourceStream) bar; 
```

你可以尝试[`getResourceStream`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/resource/ByteArrayResource.html#getResourceStream%28%29)如下：

```
ByteArrayResource bar = new ByteArrayResource("TEXT??", xmlFileInBytes);
return bar.getResourceStream(); 
```

# iphone - 在 UIimageView 上滚动 UITextView，如 facebook 弹出图像

> ID：16011214
> 
> 赞同：1
> 
> 时间：2013-04-15T08:55:26.773
> 
> 标签：iphone, uiscrollview, uiimageview, uitextview

![我如何在 facebook 应用程序中的 imageview 上滚动文本视图](https://i.stack.imgur.com/TEk3f.png)

我有一组图像，必须水平滚动，我可以管理，但在每张图像中，图像的描述都向上滚动到图像上方，就像我在图像中显示的那样。怎么可能？

感谢 Jacu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:43:03.217

使用包含 UIView 的（水平）UIScrollView。然后，每个 UIView 都包含一个 UIImageView，以及另一个包含 UITextView 的（垂直）UIScrollView。

确保：

*   水平 UIScrollView 的 contentSize.height 小于等于它的高度
*   垂直 UIScrollView 的 contentSize.width 小于等于它的宽度
*   UIImageView 在 UIScrollView 之前添加到包含 UIView
*   UITextView 的背景是（半）透明的

顺便说一句，如果文本不可编辑，那么最好使用 UILabel 而不是 UITextView

# android - Cocos2d for android 支持不同分辨率

> ID：16011216
> 
> 赞同：6
> 
> 时间：2013-04-15T08:55:28.020
> 
> 标签：android, cocos2d-android

我正在尝试构建一款游戏，并且想知道如何支持不同的分辨率和屏幕尺寸。对于精灵的位置，我实现了一个基本函数，它根据一定的比例设置位置，我通过从 sharedDirector 的 winSize 方法获取屏幕宽度和高度来获得。

但是这种方法没有经过测试，因为我还没有开发出一些东西来根据设备的分辨率计算精灵的比例因子。有人可以告诉我一些方法和技巧，我可以通过这些方法和技巧正确计算精灵的缩放比例，并建议一个系统来避免精灵像素化，如果我确实应用了任何这样的方法。

我在谷歌上搜索，发现 Cocos2d-x 支持不同的分辨率和大小，但我只能使用 Cocos2d。

编辑：我有点困惑，因为这是我的第一场比赛。请指出我可能犯的任何错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T08:24:08.830

好的，我终于通过让设备显示拒绝来做到这一点

```
getResources().getResources().getDisplayMetrics().densityDpi 
```

在此基础上，我分别将 ldpi、mdpi、hdpi 和 xhdpi 的 PTM 比率乘以 0.75、1、1.5、2.0。

我也在相应地改变精灵的比例。对于定位，我将 320X480 作为我的基础，然后将其乘以我当前的 x 和 y （以像素为单位）与我的基础像素的比率。

编辑：添加一些代码以便更好地理解：

```
public class MainLayer extends CCLayer()
{
CGsize size; //this is where we hold the size of current display
float scaleX,scaleY;//these are the ratios that we need to compute
public MainLayer()
{
  size = CCDirector.sharedDirector().winSize();
  scaleX = size.width/480f;//assuming that all my assets are available for a 320X480(landscape) resolution;
  scaleY = size.height/320f;

  CCSprite somesprite = CCSprite.sprite("some.png");
  //if you want to set scale without maintaining the aspect ratio of Sprite

  somesprite.setScaleX(scaleX);
  somesprite.setScaleY(scaleY);
  //to set position that is same for every resolution
  somesprite.setPosition(80f*scaleX,250f*scaleY);//these positions are according to 320X480 resolution.
  //if you want to maintain the aspect ratio Sprite then instead up above scale like this
  somesprite.setScale(aspect_Scale(somesprite,scaleX,scaleY));

}

public float aspect_Scale(CCSprite sprite, float scaleX , float scaleY)
    {
        float sourcewidth = sprite.getContentSize().width;
        float sourceheight = sprite.getContentSize().height;

        float targetwidth = sourcewidth*scaleX;
        float targetheight = sourceheight*scaleY;
        float scalex = (float)targetwidth/sourcewidth;
        float scaley = (float)targetheight/sourceheight;

        return Math.min(scalex,scaley);
    }
} 
```

# angularjs - ng-switch 更改指令的用户界面

> ID：16011219
> 
> 赞同：1
> 
> 时间：2013-04-15T08:55:38.107
> 
> 标签：angularjs, angularjs-directive, ng-switch

我创建了一个用于显示人员详细信息的指令：

```
angular.module('person.directives', []).
directive("person", function() {
return {
    restrict: "E",
    templateUrl: "person/views/person.html",
    replace: true,
    scope: {
        myPerson: '='
    },
    link: function (scope, element, attrs) {

    }        
} 
```

});

风景：

```
<div>
<span>FirstName: {{myPerson.firstName}}</span><span>LastName: {{myPerson.lastName}}               </span>
 </div> 
```

它的调用方式：

```
<person my-person="mandat.Person"></person> 
```

强制是父控制器的属性。

现在，如果 myPerson 为 null，则指令的 UI 应显示搜索按钮而不是人员详细信息。

doig 的最佳方法是什么？我可以使用 ng-switch 语句吗？在这种特殊情况下我将如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:03:00.317

我发现...我使用 ng-show 和 ng-hide

```
<div>
<div ng-show="myPerson">
    <span>FirstName: {{myPerson.firstName}}</span><span>LastName: {{myPerson.lastName}}</span>
</div>
<div ng-hide="myPerson">
    <button>search</button>

</div> 
```

# java - 在 SWT 浏览器小部件中禁用拼写检查

> ID：16011232
> 
> 赞同：2
> 
> 时间：2013-04-15T08:56:43.633
> 
> 标签：java, eclipse, browser, swt

我正在开发一个基于 Eclipse 的应用程序，我们在其中使用了一个`Browser`小部件。在此小部件中键入文本时，会执行拼写检查。我们想停用它。

可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-27T12:53:54.207

如果您可以控制显示的页面，则可以通过设置适当的属性来简单地禁用拼写检查（请参阅 [禁用 HTML 文本字段的拼写检查](https://stackoverflow.com/questions/254712/disable-spell-checking-on-html-textfields)）。但我想你不会问是不是这样......

但是，如果页面是从其他地方加载的，您需要让浏览器小部件执行 Javascript 代码，在页面完全加载后禁用拼写检查。

下面的代码片段使用了`ProgressListener`在页面完全加载时调用的 to。然后执行的 Javascript 不在我的脑海中，可能需要改进。

```
Browser browser = new Browser( parent, SWT.NONE );
browser.addProgressListener( new ProgressAdapter() {
  public void completed( ProgressEvent event ) {
    browser.execute( "document.getElementsByTagName( 'html' )[ 0 ].spellcheck = false;" );
  }
} );
browser.setUrl( ... ); 
```

# jquery - 单击另一个时关闭信息框（Google Maps API v3）

> ID：16011237
> 
> 赞同：1
> 
> 时间：2013-04-15T08:57:16.220
> 
> 标签：jquery, infobox

我正在开发一个带有谷歌地图的应用程序，它应该在地图上显示几个类别。现在我想有可能从几个类别中添加标记并在必要时删除它们。

我正在使用信息框插件，它可以自定义 Windows 信息框。你可以在**[这里找到](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)**

我的问题。当您单击另一个标记时，我希望关闭一个信息框。不过，我不知道该怎么做。这是我用于标记上的单击事件的代码。

## 代码

```
google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
        newMarkers[i].infobox.open(map, this);
        map.panTo();
    }
})(marker, i)); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T07:13:00.830

打开 addListener 后，将此 jQuery 添加为第一行：

`$(".infoBox").fadeOut(300);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T22:37:36.873

您使用的代码不会关闭信息框。发挥作用的另一件事是仅使用一个信息框并从信息框中添加和删除信息。（这是前五行代码所做的）。这是我正在使用的代码。

```
parkMarker.push(marker);
parkOptions.push(markerOptions);

parkMarker[arrayLoc].infobox = new InfoBox(parkOptions[arrayLoc]);

parkMarker[arrayLoc].infobox.open(map, marker);
parkMarker[arrayLoc].infobox.close();

google.maps.event.addListener(parkMarker[arrayLoc], 'click', (function(marker, arrayLoc){
    return function(){
        for ( h = 0; h < parkMarker.length; h++ ) {
            if(parkMarker[h].infobox){
              parkMarker[h].infobox.close();
        }
    }
      marker.infobox.open(map, marker);
  }
})(parkMarker[arrayLoc], arrayLoc)); 
```

这个 jsfiddle 不起作用，但它有我用来让它工作的所有代码：http: [//jsfiddle.net/UDRmz/1/](http://jsfiddle.net/UDRmz/1/)

# jquery-mobile - Jquery 移动性能？

> ID：16011242
> 
> 赞同：2
> 
> 时间：2013-04-15T08:57:40.037
> 
> 标签：jquery-mobile, jquery, event-bubbling

请在下面找到 2 组代码块，让我知道要遵循哪一个以及为什么？

```
<!DOCTYPE html> 
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>Set 1</title> 
    <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="css/customStyle.css" />    
</head> 

<body> 

<div data-role="page">      
    <div data-role="header" data-position="fixed"></div>
    <div data-role="content"></div>
    <div data-role="footer" data-position="fixed"></div>

</div>

    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/customScript.js"></script>  
    <script src="js/jquery.mobile-1.2.0.js"></script>   

</body>
</html> 
```

第 2 组是....

```
<!DOCTYPE html> 
    <html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <title>Set 1</title> 
        <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" href="css/customStyle.css" />        

        <script src="js/jquery-1.8.2.min.js"></script>
        <script src="js/customScript.js"></script>  
        <script src="js/jquery.mobile-1.2.0.js"></script>
    </head> 
```

（即）哪一个是正确的，将所有脚本放在顶部或底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:08:05.077

两者都是正确的，唯一的区别是您将如何绑定事件。

在第一种情况下，由于 HTML 已经加载到 DOM 中，因此可以直接像这样绑定事件：

```
$('#buttonID').on('click', function(){       

}); 
```

因为 button 已经进入 DOM，所以可以直接绑定 click 事件。

在第二种情况下，因为 jQuery Mobile 在页面内容之前加载，所有事件绑定必须像委托一样完成：

```
$(document).on('click', '#buttonID',function(){       

}); 
```

这是一种更安全但速度较慢的解决方案。它不需要对象存在即可将事件绑定到它。

简而言之，解决方案 1 稍微快一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:14:41.190

将所有 javascript 放在页面底部会很好。永远不要忘记，页面呈现可能会因 javascript 解析/执行而延迟。好吧，我相信你喜欢阅读[http://developer.yahoo.com/performance/rules.html#js_bottom](http://developer.yahoo.com/performance/rules.html#js_bottom)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:03:06.113

提高性能的第一个案例....据说这是将javascript保持在页面下方的一般做法...以便更快地加载内容....尽管我个人没有事实或分析。检查这个不错的帖子 sameelegantcode.com/2010/03/30/your-javascript-goes-where/

# c# - 实体框架数据模型和连接字符串

> ID：16011244
> 
> 赞同：0
> 
> 时间：2013-04-15T08:57:41.463
> 
> 标签：c#, entity-framework, connection-string

我有 2 个 C# .net 应用程序，例如 1。一个数据访问应用程序，它有一个实体框架工作数据模型来连接到数据库。2.一个Web应用程序，它将包含第一个应用程序的dll并通过从dll调用函数来获取数据

我需要从第二个应用程序 web 配置文件中获取连接字符串并将其传递给第一个应用程序。在第一个应用程序中，应根据来自第二个应用程序的连接字符串检索数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:05:39.633

有很多方法可以实现这一目标。一个（我不会在这里介绍）是通过某种引导加载程序 - 您可以通过存储库的构造函数（或数据上下文）传递一个连接字符串，或者您可以构造一个`SqlConnectionStringBuilder`（[这里有一些进一步的细节](http://blogs.msdn.com/b/cbowen/archive/2007/03/05/sqlconnectionstringbuilder.aspx)）。

如果您想保持简单，请将连接字符串存储在`web.config`Web 应用程序的文件中，将键设置为对象的名称。因此，假设您扩展`DbContext`了一个名为`MyDbContext`. 在 web.config 中，您将拥有以下内容作为连接字符串

```
<add name="MyDbContext" connectionString="<conn string>" providerName="System.Data.SqlClient" /> 
```

实体框架将自动使用此连接字符串，因为键与您的上下文相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:06:19.717

如果 dll 要充当数据访问层，它应该检索数据并将其传递给 Web 应用程序。不是反过来。

如果您仍然选择这样做，则必须创建一个函数，从 dll 的 app.config 中检索连接字符串并将其传递给 Web 应用程序。

要访问程序集配置文件中的连接字符串，请使用 ConfigurationManager 类（与您将在 Web 应用程序中使用的 WebConfigurationManager 类相对）。它使用相同的调用以相同的方式访问配置的元素，仅用于通用配置读取/写入。

编辑：正如@PaulAldred-Bann 所提到的，如果网络应用程序也需要连接字符串“应该”存储在网络应用程序配置文件中。程序集仍然可以访问它（您只需将设置从 app.config 移动到 web.config。可以从那里访问它的原因是，程序集在被引用时代表调用者（在在这种情况下，网络应用程序）。

# bash - bash 脚本中的源文件

> ID：16011245
> 
> 赞同：78
> 
> 时间：2013-04-15T08:57:42.543
> 
> 标签：bash, shell, ubuntu

我正在使用彼此相邻的两个版本的 ROS。要使用一个，我必须为特定版本获取一些环境变量。我想创建一个执行此操作的脚本。但是如果我创建一个像下面这样的脚本没有设置变量，它们可能设置在一个子shell中。如何将文件源到主终端外壳？

来源.sh：

```
source /opt/ros/fuerte/setup.bash;
source  ~/fuerte_workspace/setup.bash; 
```

这是我调用 source.sh 的方式：

```
./source.sh
# This does not echo anything, but I expect it should
echo $ros_config 
```

* * *

更新：通过按照答案中的建议采购 source.sh ，我现在可以看到正在设置的变量。

```
source ./source.sh
# This works now
echo $ros_config 
```

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-04-15T09:11:46.170

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-15T09:06:44.297

使用点符号在***当前***shell 中的脚本文件中获取源，即**不创建子 shell**：

```
. /opt/ros/fuerte/setup.bash
. ~/fuerte_workspace/setup.bash 
```

# .htaccess - .htaccess 错误文档不起作用

> ID：16011251
> 
> 赞同：2
> 
> 时间：2013-04-15T08:57:55.883
> 
> 标签：.htaccess, user-agent, errordocument

希望有人可以帮助解决这个问题。

我有以下代码检查访问者的用户代理并引发错误

```
# ANYWHERE IN UA
RewriteCond %{HTTP_USER_AGENT} ^.* (exabot|craftbot|download|extract|stripper|sucker|ninja|clshttp|webspider|leacher|collector|grabber|webpictures).*$ [NC]

# SERVE ERRORDOCUMENT
RewriteRule . - [F,L]

ErrorDocument 500 /errorPage500.php 
```

由于某种我不知道的原因，错误文档失败并出现以下错误

禁止的

您无权访问此服务器上的 /。

此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。

我是否需要添加更多代码才能使其正常工作？

提前致谢

完整代码如下

```
RewriteEngine On
#prevent hotlinking
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?website.com [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ - [NC,F,L]

# Redirect from website.com to www.website.com
RewriteCond %{HTTP_HOST} ^ website.com [NC]
RewriteCond %{HTTP_HOST} !^m.website.com [NC]
RewriteCond %{REQUEST_URI} !errorPage
RewriteCond %{HTTP_HOST} !^www [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1  [R=301,L]

ErrorDocument 400 /errorPage400.php
ErrorDocument 401 /errorPage401.php
ErrorDocument 403 /errorPage403.php
ErrorDocument 404 /errorPage404.php
ErrorDocument 500 /errorPage500.php

php_value session.gc.maxlifetime 604800
php_flag register_globals 0
php_flag session.use_only_cookies 1
php_flag session.use_trans_sid 0

<IfModule mod_deflate.c>
#The following line is enough for .js and .css
AddOutputFilter DEFLATE js css

#The following line also enables compression by file content type, for the following list of Content-Type:s
AddOutputFilterByType DEFLATE text/html text/plain text/xml application/xml

#The following lines are to avoid bugs with some browsers
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSIE !no-gzip !gzip-only-text/html 
</IfModule>

<IfModule mod_headers.c>
<FilesMatch "\.(js|css|xml|gz)$">
Header append Vary Accept-Encoding
</FilesMatch>
</IfModule>

<filesMatch "\.(jpg|jpeg|png|gif|swf)$">
Header set Cache-Control "max-age=604800, public"
</filesMatch>
# 1 WEEK
<filesMatch "\.(xml|txt|css|js)$">
Header set Cache-Control "max-age=604800, proxy-revalidate"
</filesMatch>
# 1 MIN
<filesMatch "\.(html|htm|php)$">
Header set Cache-Control "max-age=60, private, proxy-revalidate"
</filesMatch>

RewriteBase /

# IF THE UA STARTS WITH THESE
RewriteCond %{HTTP_USER_AGENT} ^(aesop_com_spiderman|alexibot|backweb|bandit|batchftp|bigfoot) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(black.?hole|blackwidow|blowfish|botalot|buddy|builtbottough|bullseye) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(cheesebot|cherrypicker|chinaclaw|collector|copier|copyrightcheck) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(cosmos|crescent|curl|custo|da|diibot|disco|dittospyder|dragonfly) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(drip|easydl|ebingbong|ecatch|eirgrabber|emailcollector|emailsiphon) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(emailwolf|erocrawler|exabot|eyenetie|filehound|flashget|flunky) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(frontpage|getright|getweb|go.?zilla|go-ahead-got-it|gotit|grabnet) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(grafula|harvest|hloader|hmview|httplib|httrack|humanlinks|ilsebot) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(infonavirobot|infotekies|intelliseek|interget|iria|jennybot|jetcar) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(joc|justview|jyxobot|kenjin|keyword|larbin|leechftp|lexibot|lftp|libweb) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(likse|linkscan|linkwalker|lnspiderguy|lwp|magnet|mag-net|markwatch) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(mata.?hari|memo|microsoft.?url|midown.?tool|miixpc|mirror|missigua) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(mister.?pix|moget|mozilla.?newt|nameprotect|navroad|backdoorbot|nearsite) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(net.?vampire|netants|netcraft|netmechanic|netspider|nextgensearchbot) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(attach|nicerspro|nimblecrawler|npbot|octopus|offline.?explorer) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(offline.?navigator|openfind|outfoxbot|pagegrabber|papa|pavuk) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(pcbrowser|php.?version.?tracker|pockey|propowerbot|prowebwalker) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(psbot|pump|queryn|recorder|realdownload|reaper|reget|true_robot) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(repomonkey|rma|internetseer|sitesnagger|siphon|slysearch|smartdownload) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(snake|snapbot|snoopy|sogou|spacebison|spankbot|spanner|sqworm|superbot) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(superhttp|surfbot|asterias|suzuran|szukacz|takeout|teleport) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(telesoft|the.?intraformant|thenomad|tighttwatbot|titan|urldispatcher) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(turingos|turnitinbot|urly.?warning|vacuum|vci|voideye|whacker) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(libwww-perl|widow|wisenutbot|wwwoffle|xaldon|xenu|zeus|zyborg|anonymouse) [NC,OR]

# STARTS WITH WEB
RewriteCond %{HTTP_USER_AGENT} ^web(zip|emaile|enhancer|fetch|go.?is|auto|bandit|clip|copier|master|reaper|sauger|site.?quester|whack) [NC,OR]

# ANYWHERE IN UA
RewriteCond %{HTTP_USER_AGENT} ^.*(exabot|craftbot|download|extract|stripper|sucker|ninja|clshttp|webspider|leacher|collector|grabber|webpictures).*$ [NC]

# ISSUE 403 / SERVE ERRORDOCUMENT
RewriteRule . - [F,L]

#when access is denied, allow access to just the error page and logo
<Files errorPage.*> 
Order Deny,Allow 
Allow from All 
</Files>
<Files  logo.gif>
Order Deny,Allow 
Allow from All
</Files> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:03:47.597

尝试将您的代码更改为：

```
ErrorDocument 400 /errorPage400.php
ErrorDocument 401 /errorPage401.php
ErrorDocument 403 /errorPage403.php
ErrorDocument 404 /errorPage404.php
ErrorDocument 500 /errorPage500.php

# all of your %{HTTP_USER_AGENT} 
# matches here
# ...
# ANYWHERE IN UA
RewriteCond %{HTTP_USER_AGENT} "exabot|craftbot|download|extract|stripper|sucker|ninja|clshttp|webspider|leacher|collector|grabber|webpictures" [NC]
# SERVE ERRORDOCUMENT conditionally
RewriteRule (?!^errorPage403\.php$)^ - [F,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:24:53.627

部分代理禁止访问，所以禁止消息是正常的。没有 403 错误处理程序脚本，这就是生成 500 错误的原因。

如果您希望脚本处理 403 错误，则必须添加它，因为 [F] 标志会导致服务器返回 403 Forbidden 状态码。

如果是这种情况，请创建`errorPage403.php`脚本并尝试以下操作：

```
RewriteEngine On
# ANYWHERE IN UA
RewriteCond %{HTTP_USER_AGENT} ^(exabot|craftbot|download|extract|stripper|sucker|ninja|clshttp|webspider|leacher|collector|grabber|webpictures) [NC]
# SERVE ERRORDOCUMENT
RewriteCond %{REQUEST_URI}  !/errorPage403.php [NC]
RewriteRule . - [F]

ErrorDocument 500 /errorPage500.php
ErrorDocument 403 /errorPage403.php 
```

### 更新

根据对此答案的OP评论和问题更新，解决方案是在我的评论中建议的规则之前添加一个条件，并从一开始就在此答案中，如下所示：

```
# Add next line
RewriteCond %{REQUEST_URI} !/errorPage403.php [NC] 

# To current rule in your file.
RewriteRule . - [F,L]. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:11:01.590

你已经得到它抛出 500 错误。注意：

```
ErrorDocument 500 /errorPage500.php 
```

# ruby - 将行（数组）添加到空矩阵

> ID：16011252
> 
> 赞同：2
> 
> 时间：2013-04-15T08:57:56.300
> 
> 标签：ruby, arrays, matrix, row, add

我想在空矩阵中添加一行（数组）。

就像将数组添加到空数组一样：

```
a = []
a << [1,2,3]

=> [[1,2,3]] 
```

所以我尝试了以下方法：

```
require 'Matrix'
m = Matrix[]
m.to_a << [1,2,3]

# => Matrix.empty(0, 0) 
```

然后是以下内容：

```
m = Matrix[]
Matrix.rows(m.to_a << [1,2,3])

# => Matrix.empty(0, 0) 
```

但它不起作用！它应该创建以下矩阵：

```
# => Matrix[[1,2,3]]

# and then with each add:
# => Matrix[[1,2,3], [2,3,4], ...] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:19:41.100

怎么样

```
m = [[1,2,3], [2,3,4]]
matrix = Matrix.rows(m)

m << [4,5,6]
matrix = Matrix.rows(m) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:28:08.257

```
require 'Matrix'
m = Matrix[]
p m.object_id #=> 6927492
p m.to_a.class #=> Array
p m.class #=> Matrix
p m.to_a.object_id #=> 6927384
p m.to_a << [1,2,3] #[[1, 2, 3]]
p m #=> Matrix.empty(0, 0) 
```

见上面`object_id`是不同的。`m.to_a`不要转换矩阵`m`本身，而是给出给定矩阵的新数组表示。

现在在下面，创建一个新矩阵，而不是向矩阵本身`Matrix.rows(m.to_a << [1,2,3])`添加任何行。`m`从而`p m`按预期显示结果。

```
p Matrix.rows(m.to_a << [1,2,3]).class #=> Matrix
p Matrix.rows(m.to_a << [1,2,3]).object_id #=> 6926640
p Matrix.rows(m.to_a << [1,2,3]) #=>Matrix[[1, 2, 3]]
p m #=> Matrix.empty(0, 0) 
```

现在要使其工作，请执行以下操作：

```
m = Matrix.rows(m.to_a << [1,2,3]) #=>Matrix[[1, 2, 3]]
p m #=>Matrix[[1, 2, 3]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:08:10.493

它适用于 Ruby 1.9.3p392

```
1.9.3p392 :001 > require 'matrix'
 => true 
1.9.3p392 :002 > m = Matrix[]
 => Matrix.empty(0, 0) 
1.9.3p392 :003 > m = Matrix.rows(m.to_a << [1,2,3])
 => Matrix[[1, 2, 3]] 
1.9.3p392 :004 > m = Matrix.rows(m.to_a << [2,3,4])
 => Matrix[[1, 2, 3], [2, 3, 4]] 
```

2.0.0p0 也很好

```
2.0.0p0 :001 > require 'matrix'
 => true 
2.0.0p0 :002 > m = Matrix[]
 => Matrix.empty(0, 0) 
2.0.0p0 :003 > m = Matrix.rows(m.to_a << [1,2,3])
 => Matrix[[1, 2, 3]] 
2.0.0p0 :004 > m = Matrix.rows(m.to_a << [2,3,4])
 => Matrix[[1, 2, 3], [2, 3, 4]] 
```

# cakephp-2.0 - 如何验证上传的图片高度为 65px

> ID：16011256
> 
> 赞同：0
> 
> 时间：2013-04-15T08:58:15.687
> 
> 标签：cakephp-2.0

在我的控制器中，我正在使用函数上传网站徽标，但我想验证徽标图像的高度为 65px 我如何在 cakephp 中实现这一点。谢谢

```
 if ($this->request->is('post')||$this->request->is('put')) {

        if (!empty($this->data['GlobalAdminSetting']['site_logo']['name']) && is_uploaded_file($this->data['GlobalAdminSetting']['site_logo']['tmp_name'])) {
            $allowedType = array('image/jpeg', 'image/pjpeg', 'image/jpeg', 'image/pjpeg', 'image/jpeg', 'image/pjpeg', 'image/png', 'image/x-png');
            if (!is_dir(APP . DS . WEBROOT_DIR . DS . 'siteImg/')) {
                mkdir(APP . DS . WEBROOT_DIR . DS . 'siteImg/');
                chmod(APP . DS . WEBROOT_DIR . DS . 'siteImg/', 0777);
            }

            $imageName = $this->data['GlobalAdminSetting']['site_logo'];
            unset($this->request->data['GlobalAdminSetting']['site_logo']);
            if (!in_array($imageName['type'], $allowedType)) {
                $this->request->data['GlobalAdminSetting']['site_logo'] = 'invalidFormat';
                $this->Session->setFlash(__('Sorry, Logo could not be uploaded. only jpeg,png are allowed.'));

            } else {
                if ($imageName != '') {
                    $filePath = APP . DS . WEBROOT_DIR . DS . 'siteImg/' . $imageName['name'];
                    move_uploaded_file($imageName['tmp_name'], $filePath);
                    chmod(APP . DS . WEBROOT_DIR . DS . 'siteImg/'. $imageName['name'], 0777);
                    $this->GlobalAdminSetting->save(array('id' => 1, 'site_logo' => 'siteImg/'. $imageName['name']));
                    $this->Session->setFlash(__('site logo is uploaded Successfully.'));
                } else {
                    $this->Session->setFlash(__('Image Not Found to upload.'));
                }
            }
        }else{
            $this->Session->setFlash(__('Image Not Found to upload.'));
        }
        $this->redirect(array('controller' => 'global_admin_settings', 'action' => 'logo'));
    } else{
   $this->set('logo',$this->GlobalAdminSetting->findById(1));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:17:01.803

使用 PHP 的[`getimagesize()`](http://php.net/manual/en/function.getimagesize.php). 该函数将图像的路径作为输入并返回图像数据数组。第一个数组键分别包含宽度和高度。

我不确定您何时要验证高度（在文件上传之前或之后），但如果您希望验证成为模型验证规则的一部分，您可以编写一个自定义验证函数[，如此处](http://book.cakephp.org/2.0/en/models/data-validation.html#custom-validation-rules)所述。验证规则函数的第一个变量包含相关的表单数据（`$check`在文档中命名），然后您可以将其与`getimagesize()`.

# database - 如何处理 1 --> 0..1 关系？

> ID：16011259
> 
> 赞同：2
> 
> 时间：2013-04-15T08:58:25.400
> 
> 标签：database, foreign-keys, entity-relationship, cardinality

我们有一个`Claim`实体，可以通过a `EmailVerification`、放在`MetaCode`相关网站或上传来证明`CertificateFile`。现在的问题是，索赔人可以选择使用上述方法的任意组合来证明他们的索赔，但在每个类别中他们只获得了一次机会。意义 ：

```
 Claim -- 0..1 --> EmialVerification
 Claim -- 0..1 --> MetaCode
 Claim -- 0..1 --> CertificateFile 
```

所以这是有效的：

```
 Claim #20 --> EmialVerification #12
 Claim #20 --> MetaCode (none)
 Claim #20 --> CertificateFile #124 
```

还有这个：

```
 Claim #34 --> EmialVerification (none)
 Claim #34 --> MetaCode (none)
 Claim #34 --> CertificateFile (none) 
```

但**不是**这个：

```
 Claim #34 --> EmialVerification #1034 & #450
 Claim #34 --> MetaCode (none)
 Claim #34 --> CertificateFile (none) 
```

因为#43 与两个`EmailVerification`s 有关。

现在我被困在表模式中，因为我不知道如何最好地建模`0..1`关系：

*   四个带有人工 PK（整数 id）的单独表，并像往常一样使用 1..* 关系
*   四个单独的表，但只有一个有一个`id`，另外 3 个使用这个`id`作为他们自己的 PK 和 FK 到`Claim`表？
*   只需将其他 3 个表聚合到`Claim`表中并用于`Null`指示缺乏关系？
*   别的东西？

编辑 看起来问题不是很清楚：一行`Claim`可以连接到 0（根本不连接）或其他 3 行中的任何一行，但任何单行*不能*`Claim`连接到超过一行任何其他 3 个表（如示例中的第 3 种情况）。

 *编辑一个可怕的错字潜伏在阴影中（`Claim #34`在每个示例的第一行错误地输入为`Claim #43`）！. 真对不起。顺便说一句，我认为正确的答案仍然成立。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:47:50.967

澄清注释后，您似乎只需要将主键存储在各种验证表中。（您不必使用人工或代理键。如果“claim_num”是自然键，并且它是 varchar(15)，请使用“claim_num”。）

```
create table Claims (
  claim_id integer primary key,
  other_columns_go_here char(1) not null default 'x'
);

create table EmailVerifications (
  claim_id integer primary key references Claims (claim_id),
  email_verification_num integer not null unique,
  other_columns_go_here char(1) not null default 'x'
);

create table MetaCodes (
  claim_id integer primary key references Claims (claim_id),
  metacode_num integer not null unique,
  other_columns_go_here char(1) not null default 'x'
);

create table CertificateFiles (
  claim_id integer primary key references Claims (claim_id),
  certificate_file_num integer not null unique,
  other_columns_go_here char(1) not null default 'x'
); 
```

这些插入将成功。

```
insert into Claims values (20);
insert into EmailVerifications values (20, 12);
insert into CertificateFiles values (20, 124); 
```

前两个插入将成功。“EmailVerifications”上的 PRIMARY KEY 约束将使第三个约束失败。

```
insert into Claims values (43);
insert into EmailVerifications values (43, 1034);
insert into EmailVerifications values (43, 450); 
```

* * *

**以下不符合明确的要求。考虑它的持续存在是一种奖励。**

如果我理解正确，您希望声明中的每一行都被零行或仅一行引用。

```
create table Claims (
  claim_id integer primary key,
  verification_code char(1) not null
    check (verification_code in ('c', 'e', 'm')),
  unique (claim_id, verification_code),
  other_columns_go_here char(1) not null default 'x'
);

create table EmailVerifications (
  claim_id integer not null,
  verification_code char(1) not null default 'e'
    check (verification_code = 'e'),
  primary key (claim_id, verification_code),
  foreign key (claim_id, verification_code)
    references Claims (claim_id, verification_code),
  other_columns_go_here char(1) not null default 'x'
);

create table MetaCodes (
  claim_id integer not null,
  verification_code char(1) not null default 'm'
    check (verification_code = 'm'),
  primary key (claim_id, verification_code),
  foreign key (claim_id, verification_code)
    references Claims (claim_id, verification_code),
  other_columns_go_here char(1) not null default 'x'
);

create table CertificateFiles (
  claim_id integer not null,
  verification_code char(1) not null default 'c'
    check (verification_code = 'c'),
  primary key (claim_id, verification_code),
  foreign key (claim_id, verification_code)
    references Claims (claim_id, verification_code),
  other_columns_go_here char(1) not null default 'x'
);

begin;
  insert into Claims values (1, 'c', 'x');
  insert into CertificateFiles values (1, 'c', 'x');
commit;

begin;
  insert into Claims values (2, 'e', 'x');
  insert into EmailVerifications values (2, 'e', 'x');
commit;

begin;
  insert into Claims values (3, 'm', 'x');
  insert into MetaCodes values (3, 'm', 'x');
commit; 
```

“声明”中重叠的 PRIMARY KEY 和 UNIQUE 约束是必需的。其他表引用“claim_id”和“verification_code”这对列，除非这对列有 UNIQUE 约束，否则它们不能这样做。

verify_code 及其 CHECK 约束保证外键引用来自正确的表。

```
-- This insert will fail. 
-- Inserting into EmailVerifications requires 'e', not 'c'.
begin;
  insert into Claims values (4, 'c', 'x');
  insert into EmailVerifications values (4, 'c', 'x');
commit;

-- This insert will fail. (Duplicate row.)
insert into EmailVerifications values (2, 'e', 'x');

-- This insert will fail. (Trying to make two rows reference one row in Claims.)
insert into CertificateFiles values (2, 'e', 'x'); 
```*

# actionscript - Starling textField 触摸事件

> ID：16011260
> 
> 赞同：0
> 
> 时间：2013-04-15T08:58:26.140
> 
> 标签：actionscript, textfield

我目前正在尝试创建多个可拖放的文本字段。我之前正在关注一个教程，该教程使用四边形作为您将使用的示例：

```
var target:Quad = event.target as Quad; 
```

它针对您悬停的四边形，我试图将其更改为

```
var target:TextField = event.target as TextField; 
```

在编译时给了我“无法访问空对象引用的属性或方法”的错误。我不太确定问题出在哪里，所以如果有人能为我解决这个问题，那就太好了。

这是相关的其余代码：

```
public function onAdded():void{
//stuff that initialises bitmap

for(var i:int=0; i<3; i++){

            //create Textfield
            var bmpFont:starling.text.TextField = new starling.text.TextField(100,100, "test", "Arial", 10);

            bmpFont.fontSize = 50;
            if(i==0){
                bmpFont.color = Color.WHITE;

            }
            else if (i==1){
                bmpFont.color = Color.RED;  
            }

            else if (i==2){
                bmpFont.color = Color.BLUE; 
            }

            bmpFont.x = Math.random() * (stage.stageWidth - bmpFont.width);
            bmpFont.y = stage.stageHeight/2;
            //centering pivot point
            bmpFont.pivotX = 50;
            bmpFont.pivotY = 50;

            //centering code
            //bmpFont.x = stage.stageWidth - bmpFont.width >> 1;
            //bmpFont.y = stage.stageHeight - bmpFont.height >> 1;

            useHandCursor = true;                   
            bmpFont.addEventListener(starling.events.TouchEvent.TOUCH, onTouch);
            parent.addChild(bmpFont);

            } 
```

触控功能：

```
 //function activating on touch
        public function onTouch(event:starling.events.TouchEvent):void{
            var touches:Vector.<Touch> = event.getTouches(stage, TouchPhase.MOVED);
            //var target:Quad = event.target as Quad;

            var target:starling.text.TextField= event.target as starling.text.TextField

            //single finger manipulations
            if(touches.length == 1){
                var delta:Point = touches[0].getMovement(parent);
                target.x += delta.x;
                target.y += delta.y;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:23:37.163

尝试

```
 //function activating on touch
    public function onTouch(event:starling.events.TouchEvent):void{
        var target:starling.text.TextField= event.target as starling.text.TextField;
        var touches:Vector.<Touch> = event.getTouches(target, TouchPhase.MOVED);

        //single finger manipulations
        if(touches.length == 1){
            var delta:Point = touches[0].getMovement(target.parent);
            // delta and target should be not null

            target.x += delta.x;
            target.y += delta.y;
        } 
```

# php - Codeigniter 重新路由不包括控制器

> ID：16011266
> 
> 赞同：1
> 
> 时间：2013-04-15T08:58:36.617
> 
> 标签：php, codeigniter

我正在尝试做与该问题中所写相同的操作： [Codeigniter：将所有与控制器名称不匹配的请求发送到默认控制器](https://stackoverflow.com/questions/4507676/codeigniter-send-all-requests-that-do-not-match-a-controllers-name-to-the-defa)。因此，当 id 与控制器名称不匹配时，我试图调用一个函数。所以这是我在 confgi/routes 中所做的：

```
$route['default_controller'] = "main";
$route['404_override'] = '';
$route['page/privacy-policy'] = "pages/privacyPolicy";
$route['u/(:any)'] = "profile/show/$1";
$route['(:any)'] = "login/show/$1"; 
```

所以如果我去网址

```
mypage.com/myname 
```

它进入登录/显示这很好，但问题是如果我输入

```
mypage.com/main 
```

它仍然进入登录/显示。任何想法如何克服这种行为？

如果我输入

```
mypage.com 
```

它也进入登录/显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:06:34.977

我认为`$route['(:any)']`会匹配任何一组 URI 请求。如果您希望所有控制器都是安全的，您必须从 SecureController 扩展它们并在该 SecureController 的构造函数中设置登录验证检查。

# javascript - SignalR 在页面刷新时初始化连接

> ID：16011267
> 
> 赞同：0
> 
> 时间：2013-04-15T08:58:37.247
> 
> 标签：javascript, signalr

编码 ：

```
 $.connection.hub.start().done(function () {
    chat.server.connectclient(UserID, UserName);
  }); 
```

为什么在每个页面刷新signalR访问connectClient函数？我可以阻止它使其仅访问一次吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:43:40.117

在每次页面刷新时，现有的连接将被断开并建立一个新的连接。这就是调用 hub.start() 和 connectClient 函数的原因。您无法更改此行为。

# android - 尽管有 AsyncTask，但不确定的 ProgressBar 卡住（不旋转）

> ID：16011268
> 
> 赞同：1
> 
> 时间：2013-04-15T08:58:38.047
> 
> 标签：android, android-asynctask, androidplot

我构建了一个应用程序，在其中使用[androidplot](http://androidplot.com/)库以选项卡式布局（使用 ActionBar 选项卡）显示多个图表

在每个选项卡上，我在片段中显示一个图表。由于切换选项卡时渲染速度很慢（我有一系列 3000/4000 值），因此我尝试使用 AsyncTask 将图形生成放在后台线程中。

它工作正常，但我注意到如果我使用不确定的 ProgressBar，指示器不会旋转但它仍然保持静止，这意味着有一些进程阻塞了 UI 线程。（我的猜测在这里）。

您对如何改进我的应用程序有什么建议吗？我想将 ProgressBar 显示为加载指示器而不是静态文本

这是 AsyncTask 代码，我最终使用“正在计算...”消息而不是 ProgressBar 作为解决方法：

```
private class AsyncPlotTask extends AsyncTask<XYPlot, Void, Boolean> {

    @Override
    protected void onPreExecute() {

        //show loading message only
        loading.setVisibility(View.VISIBLE);
        dataContainer.setVisibility(View.GONE);

    }

    @Override
    protected Boolean doInBackground(XYPlot... plot) {

        boolean success = true;

        plot[0].addSeries(dataSeries, dataSeriesFormat);

        return success;
    }

    @Override
    protected void onPostExecute(Boolean result) {

        //hide loading message and show graph
        loading.setVisibility(View.GONE);
        dataContainer.setVisibility(View.VISIBLE);

    }
}//AsyncPlotTask 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T15:28:40.327

这对我来说是这样的：

默认情况下，Androidplot 使用主线程进行渲染，这对于大多数具有几十个点的绘图来说很好，但对于包含几千个点的绘图，您已经体验过它需要时间。当主线程用于渲染绘图时，UI 不会更新 - 这包括更新进度条。

将绘图设置为使用后台模式渲染应该可以解决问题。如果您使用的是 Androidplot 0.5.1 或更高版本，则可以通过将其添加到绘图的 xml 来启用后台渲染线程：

```
renderMode="use_background_thread" 
```

缺口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T15:01:33.797

似乎没有完美的解决方案

我最终在 Activity 中有一个 ProgressBar 实例，每个片段中的另一个实例与 Activity 完全重叠，然后我只是将它们淡入淡出。

“卡住”效应现在可以忽略不计

# qt - BlackBerry10 Cascades：如何将 QObject 转换为 QVariant？

> ID：16011270
> 
> 赞同：2
> 
> 时间：2013-04-15T08:58:43.957
> 
> 标签：qt, blackberry, qobject, qvariant

我有一个 QObjects* 列表，想将它们添加到我的 DataModel 中。但是数据模型需要一个 QVariant 而不是 QObject。

是否可以将 QObjects 转换为 QVariant？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:13:25.363

是的，因为它不是支持的类型，`QVariant::Type`它回退到`QMetaType::Type`支持。您必须使用`QVariant::setValue(..)`或`QVariant::fromValue(..)`设置它，因为[构造](http://qt-project.org/doc/qt-4.8/qvariant.html#setValue)`QVariant`函数没有`QObject*`.

# handsontable - HT：使用数组数据做复选框

> ID：16011271
> 
> 赞同：1
> 
> 时间：2013-04-15T08:58:45.580
> 
> 标签：handsontable

我知道您可以使用 Jquery 中的数据对象在 HT 中放置复选框，如此处所示[。](http://handsontable.com/demo/renderers.html)我想知道如果数据在数组中，您是否可以制作一个复选框单元格。数据样本如下：

```
var data = [
          ["", "Maserati", "Mazda", "Mercedes", "Mini", "Mitsubishi"],
          ["2009", 0, 2365, 4303, 354, 5814],
          ["2010", 5, 2905, 2867, 412, 5284],
          ["2011", 4, 2517, 4822, 552, 6127],
          ["2012", 2, 2422, 5399, 776, 4151]
        ]; 
```

取自 HT 样本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T23:51:03.593

是的，您可以使用带有handsontable 的复选框列。复选框为真或假。您的示例数据中的所有列/值都不是真/假。

有关如何使用复选框列的更多详细信息，请参见[此处的示例](http://handsontable.com/demo/renderers.html)

简而言之，您需要确保该列具有如下的真/假值：

```
var data = [
  {id: 1, name: "Ted", isActive: true, color: "orange", date: "2008-01-01"},
  {id: 2, name: "John", isActive: false, color: "black", date: null},
  {id: 3, name: "Al", isActive: true, color: "red", date: null},
  {id: 4, name: "Ben", isActive: false, color: "blue", date: null}
]; 
```

然后将列类型设置为复选框：

```
 columns: [
    {data: "id"},
    {data: "name"},
    {data: "isActive", type: 'checkbox'},
    {data: "date", type: 'date'},
    {data: "color",
      type: 'autocomplete',
      source: ["yellow", "red", "orange", "green", "blue", "gray", "black", "white"]
    }
  ], 
```

# php - 扩展导出 excel 的列宽

> ID：16011272
> 
> 赞同：3
> 
> 时间：2013-04-15T08:58:47.907
> 
> 标签：php, excel, magento

我正在从 Magento 进行 excel 导出。我希望自动调整列的大小。这是我尝试过的代码，

```
public function exportOrders($orders)
{
$fileName = 'order_export_'.date("Ymd_His").'.csv';
$fp = fopen(Mage::getBaseDir('export').'/'.$fileName, 'w');

$this->writeHeadRow($fp);
foreach ($orders as $order) {
    $order = Mage::getModel('sales/order')->load($order);
    $this->writeOrder($order, $fp);
}

for($i = $fromCol; $i !== $toCol; $i++) {
    $calculatedWidth = $sheet->getColumnDimension($i)->getWidth();
    $sheet->getColumnDimension($i)->setWidth((int) $calculatedWidth * 2);
}

fclose($fp);

return $fileName;
} 
```

它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T12:09:11.007

如果您使用的是 PhpExcel 库

// 这个扩展使用 PhpExcel Lib [Perfect Excel Export - Management Report](http://www.magentocommerce.com/magento-connect/perfect-excel-export-management-report.html) then

$objPHPExcel = 新 PHPExcel(); $objPHPExcel->getActiveSheet()->getColumnDimension('A')->setAutoSize(true);

希望这对你有帮助

# ios - 在 ios 应用程序中存储用户语言选择

> ID：16011276
> 
> 赞同：0
> 
> 时间：2013-04-15T08:58:59.207
> 
> 标签：ios, objective-c, xcode

我正在开发一个多语言（阿拉伯语和英语）应用程序，用户将从设置中选择语言。

我用 a`UITableView`来显示两个单元格；用于阿拉伯语和英语。在这里，用户只能选择一个选项。但我的问题是在哪里存储用户选择，以便我可以根据用户选择为我的整个应用程序使用所选语言。作为 iOS 新手。

我应该在 中创建一个键`info.plist`，使用全局变量还是任何其他最佳方式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:01:59.153

有`NSLocalizedString(key, comment)`那个。这里有一个很好的教程： [http ://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:08:38.330

正如我们在评论中讨论的那样，您想要存储 Value 用户选择的是英语还是阿拉伯语，而不是为此您可以使用[NSUserDefalut](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。这是用户选择英语的示例。

用键设置对象

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
// saving an NSString
[prefs setObject:@"English" forKey:@"SelectedLanguage"]; 
```

获取带键的对象

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
// getting an NSString
NSString *languageSeleted = [prefs stringForKey:@"SelectedLanguage"]; 
```

尝试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:09:38.877

以我的方式，我想在 plist 中使用一个值来保存选择。

也许还有其他简单的方法可以做到这一点。

祝你好运。

# excel - 在 Excel 单元格中显示名称不起作用

> ID：16011280
> 
> 赞同：3
> 
> 时间：2013-04-15T08:59:12.873
> 
> 标签：excel, excel-formula, cells, vba

我使用这个函数（这是 Excel 2007，文件类型是 *.xlsm）

```
Public Function CellName(oCell As Range) As Variant
Dim oName As Name
For Each oName In ThisWorkbook.names
  If oName.RefersToRange.Parent Is oCell.Parent Then
    If Not Intersect(oCell, oName.RefersToRange) Is Nothing Then
       CellName = oName.Name
       Exit Function
    End If
  End If
Next
CellName = CVErr(xlErrNA)
End Function 
```

获取单元格的名称。

它工作正常，但可能我删除了一些行并显示错误（所以它循环直到结束，没有找到名称）。对于工作簿中的每个单元格。公式中没有这个单元格是可以的。

我曾经遇到过这个问题，问题是-我不记得确切-有些名字什么都没有。但是现在，当我打开名称管理器时，所有名称都可以，没有一个与其他任何名称相同。

我写了一个宏：

```
Sub names_delete()
  Dim oName As Variant
  Dim i As Integer
  i = 0
  For i = 1 To ThisWorkbook.names.Count
   oName = ThisWorkbook.names(i).Name
   result = MsgBox(oName, vbYesNo + vbDefaultButton2, "Delete name?")

   If (result = vbYes) Then
     ThisWorkbook.names(i).Delete
     Exit Sub
    End If
  Next
End Sub 
```

显示的第一个名称是“_xlfn.IFERROR”。我不能删除它。这未显示在名称管理器中。

我用谷歌搜索，但唯一的答案是我可以使用 Excel 中不存在的函数，所以除了 2007 Excel 版本之外，但事实并非如此，总是使用 2007，但是，我可能将它保存为 2003，我不记得了。

我的问题是 - 如何更正此函数以使其没有错误，或者如何删除此“_xlfn.IFERROR”名称，或者错误可能在其他地方。

正如我所写，我已经遇到了类似的问题，但我通过修复错误的名称解决了它。这里一切都是正确的（“_xlfn.IFERROR”除​​外）。

**编辑**

我可以在公式中使用名称，没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-21T03:11:38.027

名称“_xlfn.IFERROR”是隐藏的，这意味着您无法在 Excel 的本机名称管理器中看到它。您需要先使用第三方解决方案（如 JPK 的名称管理器或 Macabacus 的名称洗涤器）取消隐藏名称。然后，返回 Excel 的本机名称管理器并删除名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T10:17:29.513

我今天也遇到了问题。从我在互联网上读到的内容来看，Windows 的第一个 Excel 2007 没有任何宏/宏编辑器（可怕但......）。这就是为什么例如带有宏的文件必须具有独立的扩展名，而没有宏的文件。尽管如此，他们最终还是通过包括 2003 年的宏观系统来反对抗议，该系统并不完全稳定（尤其是公式）。关于这个_xlfn.XXXXX隐藏名称，它们与2007/2010新功能有关，2003不支持。这意味着如果您想在宏中使用名称，则不能使用表单中带有XXXXX名称的功能。删除后，您必须保存、关闭并重新打开文件才能使隐藏的名称消失。

希望它可以提供帮助。

丹尼斯

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-01T17:41:44.237

> Option Explicit
> Public Function CellName(oCell As Range) As Variant
> 
> Dim oName As string
> For Each oName In worksheet("sheet1").range("A1:Z65536")
> If oName.name = oCell.name
> 
> 然后 cellname = oName.name '你需要的任何 其他
> 代码
> 
> ```
>  exit function 
> ```
> 
> 万一
> 
> 下一个结束函数

# java - 即使我在 Windows 上，我的 Java 虚拟机是否认为我在 unix 下？

> ID：16011283
> 
> 赞同：-1
> 
> 时间：2013-04-15T08:59:24.960
> 
> 标签：java, android, windows, eclipse, android-logcat

我对我在 Logcat 中获得的结果感到困惑。我正在尝试读取文件，但收到 FileNotFoundException。现在我正在硬编码文件所在的 url。

```
InputStream readMyFile(String fileName){
    File file = new File("C:\\Users\\Alvaro\\workspaceEclipse\\ProyectA\\file.xml");
    //File file = new File("C:" +File.separator +"Users" +File.separator +"Alvaro" +File.separator +"workspaceEclipse" +File.separator +"ProyectA" +File.separator +"file.xml");
    System.out.println("Working Directory = " +
              System.getProperty("user.dir"));
    System.out.println(file.exists());
    System.out.println(file.canRead());
    InputStream in = null;
    try {
        in = new BufferedInputStream(new FileInputStream(file));
        if (in != null) {
            in.close();
        }
    }catch(Exception e){
        System.out.println("Error opening the file. \n" +e);
    }
    return in;
} 
```

我可以看到找不到该文件，因为不知何故，在 url 字符串的开头插入了一个“/”：

```
/C:\Users\Alvaro\workspaceEclipse\ProyectA\file.xml: open failed: ENOENT (No such file or directory) 
```

问题是，如果我使用 File.separator，输出是：

```
/C:/Users/Alvaro/workspaceEclipse/ProyectA/file.xml: open failed: ENOENT (No such file or directory) 
```

有谁知道可能会发生什么？

其他信息：

*   工作目录 = /
*   file.exists() 和 file.canRead() 显然返回 false。
*   Windows 7家庭高级版。
*   Eclipse 版本 Indigo 服务版本 2
*   Java 版本 1.6.0_37

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:20:48.923

我认为问题在于您并没有*真正*“在 Windows 上”运行。

相反，我怀疑您在 Android 仿真环境中运行。Android 是为 Linux 设计的，我希望仿真环境中的 Android 运行时库假定文件系统使用 UNIX/Linux 样式的路径名。

赠品是您在 logcat 中看到消息。Logcat 是一个 Android 主义。它不是 Windows 上的 Java 或 Linux 上的 Java 原生的。

* * *

需要注意的另一件事是，您尝试做的事情（访问 Eclipse 工作区中的文件）在真正的 Android 设备上并不适用。与其弄清楚如何使用 Windows 路径名来访问 Eclipse 工作区，不如弄清楚如何将文件放入 Android 应用程序本身或（模拟的）Android 文件系统。

* * *

如果您想确认此诊断，请将您的代码示例放入一个普通的 Java 应用程序中，然后从命令提示符编译和运行它。

# utf - 使用 Rails 自定义表单构建器覆盖 utf8_enforcer_tag？

> ID：16011285
> 
> 赞同：2
> 
> 时间：2013-04-15T08:59:30.377
> 
> 标签：utf, ruby-on-rails-4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:53:19.967

您可能对以下实现感兴趣`bring_back_snowman`：[https ://github.com/steveklabnik/bring_back_snowman](https://github.com/steveklabnik/bring_back_snowman)

具体来说，[https://github.com/steveklabnik/bring_back_snowman/blob/master/lib/bring_back_snowman.rb#L15-L28](https://github.com/steveklabnik/bring_back_snowman/blob/master/lib/bring_back_snowman.rb#L15-L28)

# monkeytalk - MonkeyTalk：http://localhost:16862/fonemonkey：连接被拒绝

> ID：16011288
> 
> 赞同：0
> 
> 时间：2013-04-15T08:59:39.397
> 
> 标签：monkeytalk

我正在尝试使用 Monkey talk 运行我的 IOS 测试用例，它开始给我错误：

到 localhost:16862/fonemonkey: 连接被拒绝

这在早些时候并没有发生，几天后当我开始重新研究 monekytalk 时，这个错误开始出现。

请帮助我，因为我需要自动化 My IOS 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:08:32.837

16862 是安卓播放端口。这表明 MonkeyTalk 认为它正在尝试与 Android 设备或模拟器而不是 iOS 通信。查看 MonkeyTalk IDE 中的连接菜单。

# javascript - 使用 jQuery attr 检查 img src 是否为空

> ID：16011289
> 
> 赞同：2
> 
> 时间：2013-04-15T08:59:39.740
> 
> 标签：javascript, jquery, image

我正在尝试以下代码：

```
 if(!$('img.photoPreview', this).attr('src') == '') {
                    alert('empty src...');
            } 
```

但它在编辑器中出错，因为没有正确完成。

有人可以建议有什么问题吗？

注意：我正在尝试检查 - 如果不是这个图像 src 是空的......

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T09:01:59.780

Placing the ! at the start negates the $('img...') not the whole expression. Try:

```
if ($('img.photoPreview', this).attr('src') != '') {
    alert('empty src');
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T09:02:19.090

`!`运算符将在`==`运算符返回的结果（布尔值）之前进行评估，并将应用于选择器返回的对象，而不是运算符`boolean`返回的对象`==`。

改变

```
if(!$('img.photoPreview', this).attr('src') == '') 
```

至

```
if($('img.photoPreview', this).attr('src') != '') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-15T09:02:12.070

It's due to "src" being undefined. You should use this (it's more efficient than != ""):

```
if(!$('img.photoPreview', this).attr('src')) {
     alert('empty src...');
} 
```

You can see this working here: [http://jsfiddle.net/GKHvQ/](http://jsfiddle.net/GKHvQ/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-15T09:08:44.930

@adil & @scoot

```
if($('img.photoPreview', this).attr('src') != '') 
```

此条件表示如果属性 src 不为空。但条件是检查 src 属性是否为 ''。

更好的是使用

```
if($('#photoPreview').attr('src') == '') {
 alert('empty src...');
} 
```

# puppet - Vagrant & Puppet - 配置失败

> ID：16011294
> 
> 赞同：6
> 
> 时间：2013-04-15T08:59:52.067
> 
> 标签：puppet, vagrant

我第一次尝试使用 Vagrant + Puppet Provisioning 脚本来改进我的开发工作流程。

我目前正在尝试为 L4 开发设置一个开发箱 - 并且正在使用[https://github.com/paolooo/vagrant-lamp](https://github.com/paolooo/vagrant-lamp)和[https://github.com/paolooo/puppet-laravel](https://github.com/paolooo/puppet-laravel)。

按照说明：

克隆 LAMP 框：

```
git clone git://github.com/paolooo/vagrant-lamp.git lamp
cd lamp 
```

添加 Puppet 配置脚本：

```
git submodule add https://github.com/paolooo/puppet-laravel.git extras/modules/laravel 
```

然后更新子模块：

```
git submodule update --init --recursive 
```

到目前为止很棒 - 简单的东西......

所以现在准备运行`vagrant up`- 这似乎可以很好地配置 VM，并启动它。

然而，当 init.pp 脚本运行时，我的问题似乎开始了。运行时我得到了很多 404 `apt-get <<package>>`。

我的第一个想法是网络接口可能已关闭 - 但`mysql-client`下载工作（我认为）查看日志。

我在 OSX 和 Windows 机器上试过这个。

任何帮助将不胜感激 - 我不想在第一个障碍中跌倒。

我的木偶脚本：

```
# Default path
Exec { path => ['/usr/bin', '/bin', '/usr/sbin', '/sbin', '/usr/local/bin', '/usr/local/sbin', '/opt/local/bin'] }
exec { 'apt-get update':
  command => '/usr/bin/apt-get update --fix-missing',
  require => Exec['add php54 apt-repo']
}

# Configuration
if $db_name == '' { $db_name = 'development' }
if $db_location == '' { $db_location  = '/vagrant/db/development.sqlite' }
if $username == '' { $username = 'root' }
if $password == '' { $password = '123' }
if $host == '' { $host = 'localhost' }

# Setup

## PHP
include php54
class { 'php': version => latest, }

## APACHE2
include apache
class {'apache::mod::php': }

## PACKAGES
## 'vim','curl','unzip','git','php5-mysql','php5-sqlite','php5-mcrypt','php5-memcache',
## 'php5-suhosin','php5-xsl','php5-tidy','php5-dev','php5-pgsql','php5-odbc', 'php5-ldap','php5-xmlrpc','php5-intl','php5-fpm'
package { ['vim','curl','unzip','git','php5-mcrypt','php5-memcached']:
  ensure  => installed,
  require => Exec['apt-get update'],
}

package { ['php5-mysql','php5-sqlite']:
  ensure  => installed,
  require => Exec['apt-get update'],
}

include pear
include composer

### Apache
apache::vhost { $fqdn:
  priority  => '20',
  port => '80',
  docroot => $docroot,
  logroot => $docroot, # access_log and error_log
  configure_firewall  => false,
}
a2mod { 'rewrite': ensure => present }

## Ruby
class { "ruby": 
  gems_version => "latest"
}

## Nodejs
class { "nodejs": }

## PHP MODULES
php::module { ['curl', 'gd']:
  notify  => [ Service['httpd'], ],
}

## PEAR
pear::package { "PEAR": }
pear::package { "PHPUnit": 
  version     => "latest",
  repository  => "pear.phpunit.de",
  require     => Pear::Package["PEAR"],
}
pear::package { "Yaml": 
  version     => "latest",
  repository  => "pear.symfony.com",
  require     => Pear::Package["PEAR"]
}

## DB
### MySQL
class { 'mysql::server':
  config_hash => { 'root_password' => "${password}" }
}
class { 'mysql': }
mysql::db { "${db_name}":
  user  => "${username}",
  password  => "${password}",
  host  =>  "${host}",
  grant => ['all'],
  charset => 'utf8',
}

### PostgreSQL
class { 'postgresql':
  version => 'latest',
}
class { 'postgresql::server': }
postgresql::db { "${db_name}":
  owner => "${username}",
  password  => "${password}",
}

### SQLite Config
class { 'sqlite': }
define sqlite::db(
    $location   = '',
    $owner      = 'root',
    $group      = 0,
    $mode       = '755',
    $ensure     = present,
    $sqlite_cmd = 'sqlite3'
  ) {

      file { $safe_location:
        ensure  => $ensure,
        owner   => $owner,
        group   => $group,
        notify  => Exec['create_development_db']
      }

      exec { 'create_development_db':
        command     => "${sqlite_cmd} $db_location",
        path        => '/usr/bin:/usr/local/bin',
        refreshonly => true,
      }
  }

## phpmyadmin
class { 'phpmyadmin': } 
```

我的流浪文件：

```
# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant::Config.run do |config|
  # All Vagrant configuration is done here. The most common configuration
  # options are documented and commented below. For a complete reference,
  # please see the online documentation at vagrantup.com.

  # Every Vagrant virtual environment requires a box to build off of.
  config.vm.box = "precise32"

  # The url from where the 'config.vm.box' box will be fetched if it
  # doesn't already exist on the user's system.
  config.vm.box_url = "http://files.vagrantup.com/precise32.box"

  # Boot with a GUI so you can see the screen. (Default is headless)
  # config.vm.boot_mode = :gui

  # Assign this VM to a host-only network IP, allowing you to access it
  # via the IP. Host-only networks can talk to the host machine as well as
  # any other machines on the same network, but cannot be accessed (through this
  # network interface) by any external networks.
  config.vm.network :hostonly, "192.168.33.10"

  # Assign this VM to a bridged network, allowing you to connect directly to a
  # network using the host's network device. This makes the VM appear as another
  # physical device on your network.
  # config.vm.network :bridged

  # Forward a port from the guest to the host, which allows for outside
  # computers to access the VM, whereas host only networking does not.
  config.vm.forward_port 80, 8082

  # Share an additional folder to the guest VM. The first argument is
  # an identifier, the second is the path on the guest to mount the
  # folder, and the third is the path on the host to the actual folder.
  config.vm.share_folder "v-data", "/vagrant/db", "./db"
  config.vm.share_folder "v-web", "/vagrant/www", "c:\\www"

  # Enable provisioning with Puppet stand alone.  Puppet manifests
  # are contained in a directory path relative to this Vagrantfile.
  # You will need to create the manifests directory and a manifest in
  # the file base.pp in the manifests_path directory.
  #
  # An example Puppet manifest to provision the message of the day:
  #
  # # group { "puppet":
  # #   ensure => "present",
  # # }
  # #
  # # File { owner => 0, group => 0, mode => 0644 }
  # #
  # # file { '/etc/motd':
  # #   content => "Welcome to your Vagrant-built virtual machine!
  # #               Managed by Puppet.\n"
  # # }
  #
  config.vm.provision :puppet do |puppet|
    puppet.facter = {
      "fqdn"      => "dev.lamp.mysql",
      "hostname"  => "www",
      "docroot"   => "/vagrant/www",
      "host"      => 'localhost',
      "username"  => 'root',
      "password"  => '123',
      "db_name"   => "development",
      "db_location" => "/vagrant/db/development.sqlite"
    }
    puppet.manifests_path = "puppet/manifests"
    puppet.module_path = ["puppet/modules", "extras/modules"]
    puppet.manifest_file  = "init.pp"
  end

  # Enable provisioning with chef solo, specifying a cookbooks path, roles
  # path, and data_bags path (all relative to this Vagrantfile), and adding 
  # some recipes and/or roles.
  #
  # config.vm.provision :chef_solo do |chef|
  #   chef.cookbooks_path = "../my-recipes/cookbooks"
  #   chef.roles_path = "../my-recipes/roles"
  #   chef.data_bags_path = "../my-recipes/data_bags"
  #   chef.add_recipe "mysql"
  #   chef.add_role "web"
  #
  #   # You may also specify custom JSON attributes:
  #   chef.json = { :mysql_password => "foo" }
  # end

  # Enable provisioning with chef server, specifying the chef server URL,
  # and the path to the validation key (relative to this Vagrantfile).
  #
  # The Opscode Platform uses HTTPS. Substitute your organization for
  # ORGNAME in the URL and validation key.
  #
  # If you have your own Chef Server, use the appropriate URL, which may be
  # HTTP instead of HTTPS depending on your configuration. Also change the
  # validation key to validation.pem.
  #
  # config.vm.provision :chef_client do |chef|
  #   chef.chef_server_url = "https://api.opscode.com/organizations/ORGNAME"
  #   chef.validation_key_path = "ORGNAME-validator.pem"
  # end
  #
  # If you're using the Opscode platform, your validator client is
  # ORGNAME-validator, replacing ORGNAME with your organization name.
  #
  # IF you have your own Chef Server, the default validation client name is
  # chef-validator, unless you changed the configuration.
  #
  #   chef.validation_client_name = "ORGNAME-validator"
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T10:51:42.513

看来问题是正在执行 apt-get update note，不知道为什么会这样，因为我的 Puppet 脚本似乎已正确配置为调用它...

但是 - 我能够通过在我的 Vagrant 文件中添加以下行来解决这个问题：

```
config.vm.provision :shell, :inline => "apt-get update --fix-missing" 
```

不过很想知道 puppet 配置有什么问题，因为能够避免将其放入 Vagrant 文件中会很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:29:55.827

首先，您引用了一些未包含在您的帖子中的类，所以我无法评论这些。

看起来您有木偶订购问题；我建议再次运行它并确定哪些特定的包部署失败并确定它们属于哪个类。因此，例如，如果类 y 中的某个包 x 失败，请将以下内容添加到您的初始化脚本中，就在相关类的右括号之前 -

```
class y {

    package { "x":

       ensure  => installed,
    }

    Exec["apt-get update"] -> Class["y"]  

} 
```

以上将确保`apt-get update`在运行任何类“y”配置之前完成。

或者，对于包资源类型，您可以继续添加 -

require => Exec['apt-get update'] ，但我发现类排序更整洁。

# android - Multiple line ListAdapter, using ListActivity

> ID：16011297
> 
> 赞同：0
> 
> 时间：2013-04-15T09:00:07.380
> 
> 标签：android, json, textview, listactivity, listadapter

I've run in to a problem with my Android application. What I'm trying to do is parsing data from a JSON API and then put the gathered data into a multiple line list using ListActivity. However, I cant seem to get it to work. I've tried Googeling for a solution but I cannot find anyone using the same method as me.

Anyone who can explain to me how I can get this to work?

**PubsActivity.java:**

```
public class PubsActivity extends ListActivity implements OnItemClickListener, MyCallbackInterface{

private static String url = "http://api.fatkoll.se/json/1.0/getPlaces.json?api_key=fd6950b1499b71037ec3c5a5e01081d6&city_id=";

static String TAG_LIST = "list";
static String TAG_ID = "id";
static String TAG_NAME = "name";
static String TAG_ADDRESS = "address";
static String TAG_OPEN_HOURS = "openhours";
static String TAG_LAT = "lat";
static String TAG_LNG = "lng";

private static String address;
private static String openhours;
private static String lat;
private static String lng;

private ArrayList<String> info = new ArrayList<String>();
int[] toId = new int[] {R.id.listName ,R.id.listAddress};
private ArrayList<String> pubIds = new ArrayList<String>();

JSONArray list = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pubs);

    Intent getCityId = getIntent();
    String cityId = getCityId.getExtras().getString("cityId");

    JSONparser parser = new JSONparser(this);       
    parser.execute(url);

}

@Override
public void onRequestComplete(JSONObject result) {

    JSONObject json = result;

    try {

        list = json.getJSONArray(TAG_LIST);
        Log.e("onRequestComplete", "Fått JSONArray");

        for (int i = 0; i < list.length(); i++){
            JSONObject c = list.getJSONObject(i);
            Log.e("onRequestComplete", list.getString(i));
            pubIds.add(c.getString(TAG_ID));
            info.add(c.getString(TAG_NAME));
            info.add(c.getString(TAG_ADDRESS));
            openhours = c.getString(TAG_OPEN_HOURS);
            lat = c.getString(TAG_LAT);
            lng = c.getString(TAG_LNG);

        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, info);
    Log.e("onRequestComplete", "Skapar ArrayAdapter");
    setListAdapter(adapter);
    Log.e("onRequestComplete", "Sätter ListAdapter");
    ListView lv = getListView();
    lv.setOnItemClickListener(this); 
```

**JSONparser.java:**

```
package se.mima.jeda.frsa.krogrunda;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.util.Log;

public class JSONparser extends AsyncTask<String, Void, JSONObject> {

// Initializing variables

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

public interface MyCallbackInterface {
    public void onRequestComplete(JSONObject result);
}

private MyCallbackInterface mCallback;

public JSONparser(MyCallbackInterface callback) {
    mCallback = callback;
}

public JSONObject getJSONFromUrl(String url) {

    // Make a HTTP request
    try {
        // Creating a DefaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        // skapar en HttpPost
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

        // Catching exceptions
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    // BufferedReader reads the data gathered from the API
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"), 8000);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // Trying to parse a JSONObject from a String
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // Return JSONObject
    return jObj;
}

@Override
protected JSONObject doInBackground(String... params) {
    String url = params[0];
    return getJSONFromUrl(url);
}

@Override
protected void onPostExecute(JSONObject result) {
    mCallback.onRequestComplete(result);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:57:36.970

我认为您应该为您的数据使用自己的 BaseAdapter（请参阅此处的 Google 示例[列表 14](http://developer.android.com/tools/samples/index.html)）。目前，您在列表中交替显示每个列表条目的“名称”和“地址”，因为您将此数据存储到一个 ArrayList 中。使用 BaseAdapter，您可以将自己的自定义数据对象放入列表适配器中，并且可以自由地在列表中呈现它。

# iphone - UIImage mask with transparent borders

> ID：16011298
> 
> 赞同：0
> 
> 时间：2013-04-15T09:00:07.730
> 
> 标签：iphone, ios, objective-c

I am using this method to mask a `UIImage`:

```
UIImage *inputImage = [UIImage imageName:@"inputImage.png"];
CGImageRef maskRef = [UIImage imageNamed:@"mask.png"].CGImage; 

CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);

CGImageRef masked = CGImageCreateWithMask([inputImage CGImage], mask);
CGImageRelease(mask);

UIImage *maskedImage = [UIImage imageWithCGImage:masked];

CGImageRelease(masked); 
```

This is the mask image:

![enter image description here](https://i.stack.imgur.com/WIgVV.png)

And the problem is that when I mask the image the border is in black, it is possible to make the border transparent?

# java - Joda DateTimeFormatter 仅在 Jenkins 运行时失败

> ID：16011300
> 
> 赞同：1
> 
> 时间：2013-04-15T09:00:11.287
> 
> 标签：java, jenkins, jodatime

这是一个奇怪的问题。我的基于 Joda DateTimeFormatter 的解析器可以完美运行，除非它由 Jenkins 运行。我什至可以以 jenkins 用户身份登录 jenkins，并成功运行测试。

```
private static final DateTimeFormatter TIMESTAMP_FORMAT = 
    DateTimeFormat.forPattern("HH:mm:ss.SSS MMM dd yyyy");

public static DateTime datetime(String timeStamp, String timeZone) {
  return TIMESTAMP_FORMAT.withZone(DateTimeZone.forID(timeZone))
                         .parseDateTime(timeStamp)
                         .withZone(DateTimeZone.UTC);
}

@Test public void getDatetime() {
  assertEquals(new DateTime("2013-01-01T00:35:18.146Z")
    .withZone(DateTimeZone.UTC), datetime("00:35:18.146 JAN 01 2013", "GMT"));
} 
```

当由 Jenkins 运行时，我得到：

> java.lang.IllegalArgumentException：无效格式：“00:35:18.146 JAN 01 2013”​​在“JAN 01 2013”​​格式错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:07:23.033

这似乎是一个语言环境问题。如果默认语言环境不是英语，它将引发此类异常。请检查 Jenkins 默认语言环境。

顺便说一句，您还可以更改代码：添加`withLocale(Locale.ENGLISH)`到格式化程序。

```
public static DateTime datetime(String timeStamp, String timeZone) {
    return TIMESTAMP_FORMAT.withZone(DateTimeZone.forID(timeZone))
            .withLocale(Locale.ENGLISH)
            .parseDateTime(timeStamp)
            .withZone(DateTimeZone.UTC);
} 
```

# smarty - smarty中如何修改问题索引

> ID：16011301
> 
> 赞同：0
> 
> 时间：2013-04-15T09:00:16.100
> 
> 标签：smarty

我想改变 index 的值，我是怎么做的。我只想放四个 <li>

在每个 <ul>

```
<ul>

  {section name=pos loop=$post}
         {$smarty.section.pos.index = 1}
              <li>
                <a href="#{$post[pos].titulo}">
                  {$post[pos].titulo}
                </a>
              </li>
              {if $smarty.section.pos.index is div by 4}
                 </ul>
                 <ul>                            
              {/if}
   {/section} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:50:55.343

你这样做是错的。Index 包含循环的当前数组索引，从 0 开始，你不应该给它一个值。

我认为 .iteration ($smarty.section.pos.iteration) 是您正在寻找的，因为它从 1 开始

# php - 如何上传带文字的照片？

> ID：16011307
> 
> 赞同：0
> 
> 时间：2013-04-15T09:00:32.260
> 
> 标签：php, mysql

这是学生资料信息表格，当我提交表格时，它工作正常，所有数据都完美保存到 mysql 表中，但我想上传带有信息的照片

当我填写表格并在提交表格后附上图片时

没有在图像目录中上传，但在 mysql 表照片名称中保存完美但不上传到图像文件夹。

我该怎么做，请帮我解决这个问题？

提交表格

```
 <form action="" method="post">
 <div>
   <p><span class="style9"><strong>G.R.N No:</strong></span><strong>  *</strong>
     <input name="grn" type="text" value="<?php echo $grn; ?>" size="50" />
   </p>
   <p><span class="style9"><strong>Name:</strong></span><strong>  *</strong>
     <input name="name" type="text" value="<?php echo $name; ?>" size="50" />
   </p>
   <p><span class="style9"><strong>Home Address:</strong></span><strong>  *</strong>
     <textarea name="address" cols="50"><?php echo $address; ?></textarea>
   </p>
   <p><span class="style9"><strong>Father Name:</strong></span><strong>  *</strong>
     <input name="fathername" type="text" value="<?php echo $fathername; ?>" size="50" />
   </p>
      <p><span class="style9"><strong>Mother Name:</strong></span><strong>  *</strong>
     <input name="mothername" type="text" value="<?php echo $mothername; ?>" size="50" />
    </p>
    <p><span class="style9"><strong>Date Of Birth :</strong></span><strong>  *</strong>
      <input name="age" type="text" value="<?php echo $age; ?>" size="50" />
   </p>
      <p><span class="style9"><strong>Religion :</strong></span><strong>  *</strong>
        <input name="religion" type="text" value="<?php echo $religion; ?>" size="50" />
   </p>
   <p><span class="style9"><strong>Parents Cell No :</strong></span><strong>  *</strong>
     <input name="phoneno" type="text" value="<?php echo $phoneno; ?>"/>
   </p>
   <p><strong>Home Phone No:</strong>
     <input name="phoneno2" type="text" value="<?php echo $phoneno2; ?>" />
   </p>
   <p><span class="style9"><strong>Date Of Join :</strong></span><strong>  *</strong>
     <input id="fullDate" name="dateofjoin" type="text" value="<?php echo $dateofjoin; ?>" size="50" />
   </p>
    <p><span class="style9"><strong>Class :</strong></span><strong>  *</strong>
      <input  name="class" type="text" value="<?php echo $class; ?>" size="50" />
   </p>
    <p><span class="style9"><strong>N.I.C :</strong></span><strong>  *</strong>
      <input name="nic" type="text" value="<?php echo $nic; ?>" size="50" />
   </p>
    <span class="style9"><strong>Branch:</strong></span><strong> *</strong>
    <input name="branch" type="text" value="<?php echo $branch; ?>" size="50">
<span class="style9"><strong>Photo:</strong></span><strong> *</strong>
             <input type="hidden" name="size" value="350000">
            <input type="file" name="photo"> 
    <br/>
   <p class="style1">* required</p>
 <input type="submit" name="submit" value="Submit">
 </div>
 </form> 
```

php代码

```
<?php 
 }

 //This is the directory where images will be saved
$target = "images/";
$target = $target . basename( $_FILES['photo']['name']);

//This gets all the other information from the form

$photo=($_FILES['photo']['name']);
//Writes the photo to the server
if(move_uploaded_file($_FILES['photo']['tmp_name'], $target))
{

//Tells you if its all ok
echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded, and your information has been added to the directory";
}

 // connect to the database
 include('connect-db.php');

 // check if the form has been submitted. If it has, start to process the form and save it to the database
 if (isset($_POST['submit']))
 { 
 // get form data, making sure it is valid
 $grn = mysql_real_escape_string(htmlspecialchars($_POST['grn']));
 $name = mysql_real_escape_string(htmlspecialchars($_POST['name']));
 $address = mysql_real_escape_string(htmlspecialchars($_POST['address']));
 $branch = mysql_real_escape_string(htmlspecialchars($_POST['branch']));
 $phoneno = mysql_real_escape_string(htmlspecialchars($_POST['phoneno']));
 $phoneno2 = mysql_real_escape_string(htmlspecialchars($_POST['phoneno2']));
 $fathername = mysql_real_escape_string(htmlspecialchars($_POST['fathername']));
 $mothername = mysql_real_escape_string(htmlspecialchars($_POST['mothername']));
 $age = mysql_real_escape_string(htmlspecialchars($_POST['age']));
 $religion = mysql_real_escape_string(htmlspecialchars($_POST['religion']));
 $nic = mysql_real_escape_string(htmlspecialchars($_POST['nic']));
 $class = mysql_real_escape_string(htmlspecialchars($_POST['class']));
 $dateofjoin = mysql_real_escape_string(htmlspecialchars($_POST['dateofjoin']));
 $photo = mysql_real_escape_string(htmlspecialchars($_POST['photo']));

 // check to make sure both fields are entered
 if ($grn == '' || $name == '' || $address == '')
 {
 // generate error message
 $error = 'ERROR: Please fill in all required fields!';

 // if either field is blank, display the form again
 renderForm($grn, $name, $address, $branch, $phoneno, $phoneno2, $fathername, $mothername, $age, $religion, $nic, $class, $dateofjoin,$error);
 }
 else
 {
 // save the data to the database
  mysql_query("INSERT admission SET grn='$grn', name='$name', address='$address', branch='$branch', phoneno='$phoneno', phoneno2='$phoneno2', fathername='$fathername', mothername='$mothername', age='$age', religion='$religion', nic='$nic', class='$class', dateofjoin='$dateofjoin', photo='$photo'")
 or die(mysql_error()); 
 echo "<center>Admission Complete!</center>";
 // once saved, redirect back to the view page

 }
 }
 else
 // if the form hasn't been submitted, display the form
 {
 renderForm('','','','','','','','','','','','','','');
 }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:05:20.577

更改`<form action="" method="post">`为`<form action="" method="post" enctype="multipart/form-data">`

有关更多信息，请参阅此 w3schools 页面：http: [//www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:09:52.553

`enctype = multipart/form-data`您的表单标签中缺少... `$_FILES`如果您没有设置，则不会填充数组`enctype`。所以用

```
<form action="" method="post"> to <form action="" method="post" enctype="multipart/form-data"> 
```

检查 php.ini 中的文件夹权限和以下设置

```
file_uploads
upload_max_filesize
max_input_time
memory_limit
max_execution_time
post_max_size 
```

当您使用它时，您无法访问文件的信息，`$_POST`而只能通过`$_FILES`like`$_FILES['photo']['name']`

**使固定**

代替

```
$photo = mysql_real_escape_string(htmlspecialchars($_POST['photo'])); 
```

和

```
$photo = mysql_real_escape_string(htmlspecialchars($_FILES['photo']['name'])); 
```

# entity-framework - 代码优先 - 带有外键的 ICollection 导航属性抛出“ObjectStateManager 中已存在具有相同键的对象。”

> ID：16011308
> 
> 赞同：0
> 
> 时间：2013-04-15T09:00:32.493
> 
> 标签：entity-framework, ef-code-first, code-first

我在这里有点问题。我已经阅读了许多 SO 线程，但没有找到答案。

我正在使用断开连接的存储库模式进行数据访问，并使用 Code First EF。

POCO：

```
public class LineItem
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<LineItemCategoryMap> LineItemCategoryMaps { get; set; }
}

public class LineItemCategoryMap
{
    [Key]
    public int Id { get; set; }

    [ForeignKey("LineItem")]
    public int LineItemId { get; set; }
    public LineItem LineItem { get; set; }

    [ForeignKey("Category")]
    public int CategoryId { get; set; }
    public Category Category { get; set; }
} 
```

数据访问代码（更新）：

```
public void Update(LineItem lineItem)
{
    using (var db = new DBContext())
    {
        db.LineItems.Attach(lineItem);
        db.Entry(lineItem).State = EntityState.Modified;
        db.SaveChanges();
    }
} 
```

如果我有一个 LineItemCategoryMap 更新工作。但是，如果有两个项目都具有相同的 LineItemID，则会出现异常**“ObjectStateManager 中已存在具有相同键的对象”。**被抛出。

使用多个地图对象创建 LineItem 100%

如我所见， LineItem 正在尝试多次附加。它不应该只是重用 LineItem 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:22:49.217

感谢@tschmit007 发现我正在尝试读取地图。

我通过删除 LineItemCategoryMap 上的 ID 并添加一个复合键来解决这个问题。

```
public class LineItemCategoryMap
{
    [Key, Column(Order = 0)]
    [ForeignKey("LineItem")]
    public int LineItemId { get; set; }
    public LineItem LineItem { get; set; }

    [Key, Column(Order = 1)]
    [ForeignKey("Category")]
    public int CategoryId { get; set; }
    public Category Category { get; set; }
} 
```

不幸的是，更新代码有点不卫生，因为标记实体只保存标量和复杂属性，而不是导航属性（即关系）。 [https://stackoverflow.com/a/14102487/101662](https://stackoverflow.com/a/14102487/101662)

```
var lineItemToUpdate = (from obj in db.LineItems.Include("LineItemCategoryMaps")
                                             where obj.Id == lineItem.Id
                                             select obj).First();

lineItemToUpdate.LineItemCategoryMaps = lineItem.LineItemCategoryMaps;
lineItemToUpdate.LineItemDepartmentMaps = lineItem.LineItemDepartmentMaps;

db.Entry(lineItemToUpdate).CurrentValues.SetValues(lineItem);

db.SaveChanges(); 
```

我可以让它工作的唯一方法是获取具有上下文范围的对象，然后设置导航属性。

有谁知道更清洁的方法来做到这一点？也许没有额外的数据库调用。

我真的希望我可以更改导航属性。

# javascript - 如何在按回车键时执行功能场地？

> ID：16011312
> 
> 赞同：39
> 
> 时间：2013-04-15T09:00:41.697
> 
> 标签：javascript, events, input, listener

我有一个输入，我只想为它添加一个事件侦听器，以便在我按下回车键时激活一个功能，当输入聚焦时。我如何用纯 JS 做到这一点？

现在我有：

HTML：

```
Enter your wage:<input type="text" id="wage" value ="" size=20>
<button id="sub">Submit</button> 
```

JavaScript：

```
var wage = document.getElementById("wage");
wage.addEventListener("change", validate);

var btn = document.getElementById("sub");
btn.addEventListener("click", validate); 
```

所以基本上`validate()`当我单击或更改文本时该功能会激活，但我想通过按 Enter 来调用它。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-15T09:04:16.003

你可以使用这个：

```
var wage = document.getElementById("wage");
wage.addEventListener("keydown", function (e) {
    if (e.code === "Enter") {  //checks whether the pressed key is "Enter"
        validate(e);
    }
});

function validate(e) {
    var text = e.target.value;
    //validation of the input...
} 
```

**[现场演示在这里](http://jsfiddle.net/TazQ5/1/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T09:05:28.983

```
var elem = document.getElementById("wage");
elem.onkeyup = function(e){
    if(e.keyCode == 13){
       validate();
    }
} 
```

**工作示例** [http://jsfiddle.net/aMgLK/](http://jsfiddle.net/aMgLK/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-22T17:58:11.297

这是当前接受的答案（来自@MinkoGechev）的一个版本，其中带有[密钥](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values)而不是密钥代码：

```
const wage = document.getElementById('wage');
wage.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
        validate(e);
    }
});

function validate(e) {
    const text = e.target.value;
    //validation of the input...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T09:04:49.827

你需要类似的东西 `wage.addEventListener('keydown', validate);`

然后，您的验证功能将需要检查`event.keyCode == 13`以确定“输入”按键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T09:05:24.537

如果您将按钮元素更改为

```
<input type="submit" value="Submit"> 
```

它将与键盘上的输入按钮一起使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-08T09:13:16.580

或者使用 jQuery

```
$("#wage").on("keydown", function (e) {
    if (e.keyCode === 13) {  //checks whether the pressed key is "Enter"
        validate(e);
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-22T09:49:16.193

```
var input = document.getElementById("todo-item");
input.addEventListener("keyup", function(event) {
    if (event.keyCode === 13) {
        event.preventDefault();
        document.getElementById("sub").click(); 
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-19T11:33:39.313

HTML：
输入您的工资：

```
<input type="text" id="wage" value ="" onkeypress="myFunction(event)" size=20> 
```

JavaScript：

```
function myFunction(event) {
    var x = event.code;
    if(x == "Enter") {
        validate();
    }    
} 
```

[w3schools - 键盘事件代码属性](https://www.w3schools.com/jsref/event_key_code.asp)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-11T09:48:09.293

这很简单。您可以使用 keyup 事件来做到这一点。

```
$(document).on("keyup", "#wage", function(e) {
  if (e.which == 13) {
    alert("Hi")
  }
}) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-14T08:47:47.657

我建议使用`key`KeyboardEvent 的属性，可以在[此处](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)找到有关该属性的文档。您还可以使用 lambda 函数和 AND (&&) 运算符使代码更短。

这是我的做法：

```
document.querySelector('#wage').addEventListener('keypress', e => e.key === 'Enter' && validate(e)); 
```

AND 运算符首先检查是否`e.key`等于“Enter”，如果为真，则执行该`validate`函数。如果`e.key`不是'Enter'，它将不会到达该`validate`功能并且不会执行它。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-08-19T09:29:18.707

```
$(document).on("keyup", function(e) {
    var key = e.which;

    if (key == 13) // the enter key ascii code
    {
        login();
    }
}); 
```

# codeigniter - 防止在控制器功能中覆盖查询 - codeigniter

> ID：16011313
> 
> 赞同：1
> 
> 时间：2013-04-15T09:00:53.833
> 
> 标签：codeigniter, search, cookies

我有一个使用您的邮政编码搜索工厂的搜索功能。

这是基于我今天早些时候提出的一个问题：[如何在 php 中使用 cookie 的值进行搜索 - codeigniter](https://stackoverflow.com/questions/16010012/how-to-search-with-the-value-of-a-cookie-in-php-codeigniter) 我有一个这样的查询：

> $match = $this->input->post('搜索');

这工作正常，但是当我添加时：

```
$match = $this->input->cookie('postcode'); 
```

它覆盖了第一个 $match。如何在不覆盖彼此的情况下同时使用两个搜索查询？

如何设置两个变量，如 $match1 和 $match2？当我这样做时，它只搜索工厂而不搜索邮政编码。我只想获得邮政编码的结果，并搜索邮政编码为 9101 之类的工厂

我的模型功能：

```
 function get_search($match, $match2)
    {
        $this->db->like('Bedrijfsnaam', $match);
        $this->db->or_like('Postcode', $match);
        $this->db->or_like('Plaats', $match);
        $this->db->or_like('Telefoonnummer', $match);
        $this->db->or_like('Email', $match);
        $this->db->or_like('Website', $match);
        $this->db->or_like('Profiel', $match);
        $this->db->or_like('Adres', $match);
        $this->db->or_like('Categorie', $match);

        $this->db->join('bedrijven', 'bedrijfcategorieen.idbedrijven = bedrijven.idbedrijven');
        $this->db->join('categorieen', 'bedrijfcategorieen.idcategorieen = categorieen.idcategorieen');
        $this->db->group_by('bedrijfcategorieen.idbedrijven', 'bedrijfcategorieen.idcategorieen');

        $query = $this->db->get('bedrijfcategorieen');

        return $query->result();
    } 
```

我的控制器功能：

```
 function searchresults()
    {   
        $this->breadcrumbs->page = array('link'=> base_url().'home/search' ,'title' => 'Bedrijven Zoeken' );            
        $this->breadcrumbs->method = array('link'=> base_url().'home/searchresults' ,'title' => 'Zoekresultaten' );
        $data['breadcrumbs'] = $this->breadcrumbs->get();
        $match = $this->input->post('search');
        $match2 = $this->input->cookie('postcode');
        $data['query'] = $this->bedrijven_model->get_search($match, $match2);
        $this->load->view('views/header');
        $this->load->view('views/searchresults', $data);
        $this->load->view('views/footer');
        $data['query'] = $this->bedrijven_model->bedrijven_tags();
    } 
```

希望有人知道我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T10:05:16.300

我像这样解决了我的问题：

我删除了我的旧模型，而是像这样：

```
function get_search($match, $match2)
{
    if (!isset($_COOKIE['cookie'])) {

        $query = "SELECT * FROM (`bedrijfcategorieen`) 
        JOIN `bedrijven` ON `bedrijfcategorieen`.`idbedrijven` = `bedrijven`.`idbedrijven` 
        JOIN `categorieen` ON `bedrijfcategorieen`.`idcategorieen` = `categorieen`.`idcategorieen` 
        WHERE (`Bedrijfsnaam` LIKE '%".$this->input->post('search')."%' 
        OR `Plaats` LIKE '%".$this->input->post('search')."%' 
        OR `Telefoonnummer` LIKE '%".$this->input->post('search')."%' 
        OR `Email` LIKE '%".$this->input->post('search')."%' 
        OR `Website` LIKE '%".$this->input->post('search')."%' 
        OR `Profiel` LIKE '%".$this->input->post('search')."%' 
        OR `Adres` LIKE '%".$this->input->post('search')."%' 
        OR `Categorie` LIKE '%".$this->input->post('search')."%') 
        AND (Postcode LIKE '%".$this->input->post('cookie')."%')

        GROUP BY `bedrijfcategorieen`.`idbedrijven`";
        $result = $this->db->query($query);

        return $result->result();

  } 
```

这样它会搜索两件事。位于 factory 表中的邮政编码和设置的邮政编码 cookie。

我的控制器：

```
 function search()
    {
        $this->breadcrumbs->page = array('link'=> base_url().'home/search' ,'title' => 'Bedrijven Zoeken' );
        $data['breadcrumbs'] = $this->breadcrumbs->get();
        $this->load->view('views/header');
        $this->load->view('views/search', $data);
        $this->load->view('views/footer');
    }

    function searchresults()
    {   
        $this->breadcrumbs->page = array('link'=> base_url().'home/search' ,'title' => 'Bedrijven Zoeken' );            
        $this->breadcrumbs->method = array('link'=> base_url().'home/searchresults' ,'title' => 'Zoekresultaten' );
        $data['breadcrumbs'] = $this->breadcrumbs->get();
        $match = $this->input->post('search');
        if(strlen($this->input->post('cookie')) > 0){ $match2 = $this->input->post('cookie'); } else{ $match2 = '9101'; }
        $data['query'] = $this->bedrijven_model->get_search($match, $match2);
        $this->load->view('views/header');
        $this->load->view('views/searchresults', $data);
        $this->load->view('views/footer');
        $data['query'] = $this->bedrijven_model->bedrijven_tags();
    } 
```

我的看法：

**搜索：**

```
<div style="clear: both; margin-top: 10px;"></div>
<div class="path"><?php echo $breadcrumbs ?></div>  
<div id="bigcontent">
<h1>Bedrijven zoeken</h1>
<hr>
<br/>
<br />
<p>Voer een zoekterm en postcode in om bedrijven te zoeken.</p>
<br/>
<form name="input" action="searchresults" method="post">
<input type="search" onchange="validate()" placeholder="Zoeken..." name="search" size="70">
<input type="search" onchange="validate()" required="true" size="14" placeholder="Postcode..." name="cookie" value="<?= $this->input->cookie('postcode', TRUE); ?>" >

<input type="submit" value="Zoeken">

</form>

<br /><br />

<form method="link" action="<?= base_url('bedrijven/all')?>">
<input type="submit" value="Alle bedrijven">
</form>

</div> 
```

**搜索结果：**

```
<div style="clear: both; margin-top: 10px;"></div>
<div class="path"><?php echo $breadcrumbs ?></div>  
<div id="bigcontent">
<h1>Bedrijven gevonden: <?= count($query); ?></h1>
<?= br(1); ?>
<h2>Bedrijf:</h2>
<?= br(1); ?>
<hr/>
<?php foreach($query as $item):?>
    <a href="<?php echo base_url()?>bedrijven/<?= $item->idbedrijven?>"><h3><?= $item->Bedrijfsnaam   ?></h3></a>
    <p><b>Categorie:</b> <?= $item->Categorie ?></p>
    <p><small><?php echo $item->Profiel ?></p>
    <p><b><?php echo $item->Email ?></b></p>
    <p><b>Postcode:</b> <?php echo $item->Postcode ?></p>
    <p><b>Tags:</b></p>
    </small>
    <hr/>
<?php endforeach;?>
<br />
<<<a href="<?php echo base_url() ?>">Terug</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:29:33.287

为什么不使用两个不同的变量，例如 $match1 和 $match2。

# c# - How to share a folder on Windows 7

> ID：16011320
> 
> 赞同：0
> 
> 时间：2013-04-15T09:01:15.133
> 
> 标签：c#, networking, directory

I am using C# to create a folder and share it on the network:

```
if (!System.IO.Directory.Exists(FolderPath))
{
      System.IO.Directory.CreateDirectory(FolderPath);
      // Calling Win32_Share class to create a shared folder
      ManagementClass managementClass = new ManagementClass("Win32_Share");
      // Get the parameter for the Create Method for the folder
      ManagementBaseObject inParams = managementClass.GetMethodParameters("Create");
      ManagementBaseObject outParams;
      // Assigning the values to the parameters
      inParams["Description"] = Description;
      inParams["Name"] = ShareName;
      inParams["Path"] = FolderPath;
      inParams["Type"] = 0x0;
      // Finally Invoke the Create Method to do the process
      outParams = managementClass.InvokeMethod("Create", inParams, null);
      // Validation done here to check sharing is done or not
      if ((uint)(outParams.Properties["ReturnValue"].Value) != 0)
      {
           //MessageBox.Show("Folder might be already in share or unable to share the directory");
      }
} 
```

It works on XP, but I am not able to share a folder from this code on Windows 7.

Can anyone tell me how I can share a folder in Windows 7 using C#?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:17:39.687

您的应用程序需要以管理权限运行才能共享文件夹。

如果您查看以下链接，它会讨论与您正在处理的情况似乎相同的情况。大约一半有一个公认的答案，其中介绍了它在 Windows 7 机器上工作所需的额外操作。

链接：[http ://social.msdn.microsoft.com/Forums/en-US/windowssdk/thread/de213b61-dc7e-4f33-acdb-893aa96837fa](http://social.msdn.microsoft.com/Forums/en-US/windowssdk/thread/de213b61-dc7e-4f33-acdb-893aa96837fa)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-25T17:41:12.820

更换

```
\ 
```

在你的路上

```
/ 
```

# android - How to use MediaCodec class to decode H.264 streams

> ID：16011324
> 
> 赞同：5
> 
> 时间：2013-04-15T09:01:55.580
> 
> 标签：android, video, h.264, decoder

I have been asked to display a video stream (the stream is not from HTTP)in android, the stream is raw H.264 which is Recorded and encoded in a PC ,and I get it through WIFI.

When I get the stream, can use the MediaCodec decoder to decode the stream and display it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:59:02.577

是的。将 MediaCodec 配置为“video/avc”解码器，并将输出 Surface 传递给 configure() 调用。

MediaCodec API 非常低级，并且没有很多可用的示例代码。相反，它可能更容易使用`MediaPlayer`。

**更新：**[这里](http://bigflake.com/mediacodec/) 现在有一堆示例代码。其中大部分使用 Android 4.3 (API 18) 功能，但如果您不需要`MediaMuxer`或 Surface 输入，`MediaCodec`它将在 API 16 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:07:50.870

[在此处](http://developer.android.com/guide/appendix/media-formats.html#recommendations)查看视频编码建议

# c# - 从类库中抛出单个自定义异常

> ID：16011351
> 
> 赞同：4
> 
> 时间：2013-04-15T09:03:24.977
> 
> 标签：c#, .net, design-patterns

如何在 C# 中的类库项目中编写一个*捕获所有异常处理程序，这将为库中发生的任何异常提供外部调用者一个自定义异常。*

我发现最接近的解决方案是实现一个`Facade`类，从中调用低级类，并写入`try..catch`来自 Facade 的每个调用，如果下面发生任何异常，它将抛出单个自定义异常。

我搜索了解决方案，但只为 Web 应用程序（使用应用程序上下文捕获异常）找到它，例如[如何用简历实现一个“catch'em all”异常处理程序？](https://stackoverflow.com/questions/337702/c-sharp-how-to-implement-one-catchem-all-exception-handler-with-resume)

我需要在类库级别或库级别的使用者上实现它，但如果可以通过编写最少的异常处理语句来完成，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:27:25.380

你*可以*使用：

```
AppDomain.CurrentDomain.UnhandledException += (sender, e) =>
    {
        var exception = e.ExceptionObject as Exception;
        if (exception != null && exception.Source == "MyLib")
        {
            // Do stuff here
        }
    }; 
```

但说真的，不要这样做。不应以这种方式处理异常，您应该在本地捕获它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:25:31.030

您可以使用[`AppDomain.UnhandledException`](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)，但请确保您彻底阅读了文档 - 有一些您无法处理的例外情况，它还取决于您使用的框架版本。

# c++ - 增加线程中的内存泄漏

> ID：16011355
> 
> 赞同：0
> 
> 时间：2013-04-15T09:03:36.657
> 
> 标签：c++, boost, memory-leaks

有人能解释一下为什么这种和平的代码会产生内存泄漏吗？

Boost 1.49 和 boost-1.53​​ 给出了相同的结果....

```
#include <boost/thread.hpp> 
#include <iostream> 
#include <vector> 
#include <cstdlib> 
#include <ctime> 

boost::mutex mutex; 
boost::condition_variable_any cond; 
std::vector<int> random_numbers; 

void fill() 
{ 
  std::srand(static_cast<unsigned int>(std::time(0))); 
  for (int i = 0; i < 3; ++i) 
  { 
    boost::unique_lock<boost::mutex> lock(mutex); 
    random_numbers.push_back(std::rand()); 
    cond.notify_all(); 
    cond.wait(mutex); 
  } 
} 

void print() 
{ 
  std::size_t next_size = 1; 
  for (int i = 0; i < 3; ++i) 
  { 
    boost::unique_lock<boost::mutex> lock(mutex); 
    while (random_numbers.size() != next_size) 
      cond.wait(mutex); 
    std::cout << random_numbers.back() << std::endl; 
    ++next_size; 
    cond.notify_all(); 
  } 
} 

int main() 
{ 
  boost::thread t1(fill); 
  boost::thread t2(print); 
  t1.join(); 
  t2.join(); 
} 
```

这是 valgrind 的输出：

> valgrind --leak-check=full --show-reachable=yes ./a.out
> 
> ==3079== Memcheck，内存错误检测器
> 
> ==3079== 版权所有 (C) 2002-2011 和 GNU GPL，由 Julian Seward 等人提供。
> 
> ==3079== 使用 Valgrind-3.7.0 和 LibVEX；使用 -h 重新运行以获取版权信息
> 
> ==3079== 命令：./a.out
> 
> ==3079==
> 
> 值：535293148
> 
> 值：1979778795
> 
> 值：1888522902
> 
> ==3079==
> 
> ==3079== 堆摘要：
> 
> ==3079== 在退出时使用：1 个块中的 8 个字节
> 
> ==3079== 总堆使用量：16 次分配，15 次释放，1,732 字节分配
> 
> ==3079==
> 
> ==3079== 1 个块中的 8 个字节在丢失记录 1 of 1 中仍然可以访问
> 
> ==3079== 在 0x4C2B3F8：malloc（在 /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so 中）
> 
> ==3079== by 0x4E45BF9: boost::detail::get_once_per_thread_epoch() (在/usr/local/lib/libboost_thread.so.1.53.0)
> 
> ==3079== 0x4E3F861：_ZN5boost9call_onceIPFvvEEEvRNS_9once_flagET_.constprop.239（在 /usr/local/lib/libboost_thread.so.1.53.0 中）
> 
> ==3079== by 0x4E3F978: boost::detail::get_current_thread_data() (在/usr/local/lib/libboost_thread.so.1.53.0)
> 
> ==3079== by 0x40A909: boost::detail::interruption_checker::interruption_checker(pthread_mutex_t*, pthread_cond_t*) (在/u00/system/workspace/shared_lock2/src/a.out)
> 
> ==3079== by 0x4E40502: boost::thread::join_noexcept() (在/usr/local/lib/libboost_thread.so.1.53.0)
> 
> ==3079== by 0x40ACAE: boost::thread::join() (在/u00/system/workspace/shared_lock2/src/a.out)
> 
> ==3079== by 0x4092B0: main (in /u00/system/workspace/shared_lock2/src/a.out)
> 
> ==3079==
> 
> ==3079== 泄漏摘要：
> 
> ==3079== 肯定丢失：0 个块中的 0 个字节
> 
> ==3079== 间接丢失：0 个块中的 0 个字节
> 
> ==3079== 可能丢失：0 个块中的 0 个字节
> 
> ==3079== 仍然可达：1 个块中的 8 个字节
> 
> ==3079== 抑制：0 个块中的 0 个字节
> 
> ==3079==
> 
> ==3079== 对于检测到和抑制的错误计数，重新运行：-v
> 
> ==3079== 错误摘要：来自 0 个上下文的 0 个错误（抑制：2 个来自 2）

此来源是来自[http://en.highscore.de/cpp/boost/的 cpp 书的一部分](http://en.highscore.de/cpp/boost/)

# jquery - 将 Image src 设置为 CDN URL

> ID：16011356
> 
> 赞同：0
> 
> 时间：2013-04-15T09:03:41.727
> 
> 标签：jquery, image, src

这是我想要做的

我有一个带有大量图像的 jQuery UI 对话框，如下所示

```
<td><a id='ai42' class='ancico' title='Key'><img/></a></td>
<td><a id='ai52' class='ancico' title='Last'><img/></a></td>
<td><a id='ai62' class='ancico' title='Lock'><img/></a></td> 
```

我想避免为每个图像指示完整的 CDN url - 导致保存数百字节。所以我正在做的是：

在我所做的对话框的 create: 事件中

```
$('.ancico').each(function(ndx,anc){adjustSourceTo(ndx,anc);}); 
```

adjustSourceTo 代码是这样的

```
function adjustSourceTo(ndx,anc)
{
 var sources = new Array('noicon','alert','arrow-d','arrow-l','arrow-r','arrow-u','back',
 'check','delete','forward','gear','grid','home','info','minus','plus',
 'refresh','search','star','address','clock','email','ffwd','first','key',
 'last','lock','next','phone','prev','record','redo','rewind',
 'trolley','unlock')
  var isrc = sources[ndx];             
  var src = 'http://url_to_cdn/images/{src}.png'.format({src:isrc}); 
  console.log($(anc).attr('src',src).attr('src'));
 } 
```

我可以看到生成的 URL 是正确的，单击日志输出会将我带到图像。但是，当打开对话框时，图像仍然是顽固的空白。我认为这可能是由于我未能为初学者指定占位符图像，所以我尝试将我的 HTML 标记更改为

```
<img src='i.png'/> 
```

但无济于事 - 现在带有图像的锚点出现了，但被我的服务器提供的 i.png 卡住了，而不是来自 CDN 的真实文件。

如果我能做到这一点，应用程序负载的节省将是显着的 - 我非常感谢任何能够告诉我我可能做错了什么的人。

# r - 有部分求和的功能吗？

> ID：16011358
> 
> 赞同：4
> 
> 时间：2013-04-15T09:04:02.873
> 
> 标签：r

我想做类似的事情

```
foo = c(1, 1, 1)
bar = magic_function(foo, sum, init=0) 
```

其中`bar`是`1 2 3`，即 的部分和`foo`。是否有这样的功能，或者最好的方法是什么（避免for循环）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T09:16:59.533

将詹姆斯的评论和我的评论结合成一个正式的答案，这里有几个选项：

```
> foo = c(1, 1, 1)
> cumsum(foo)
[1] 1 2 3
> Reduce("+", foo, accumulate = TRUE)
[1] 1 2 3
> Reduce("sum", foo, accumulate = TRUE)
[1] 1 2 3 
```

# c - snprintf - 格式不是字符串文字并且没有格式参数警告

> ID：16011359
> 
> 赞同：4
> 
> 时间：2013-04-15T09:04:04.493
> 
> 标签：c, linux, gcc, posix, printf

`format not a string literal and no format arguments`我在 Linux 上编译它时收到警告。[snprintf](http://linux.die.net/man/3/snprintf)显示`const char*`第三个参数。定义 `const char *INTERFACE = "wlan0"`然后将其传递给函数有什么问题？

```
#include <stdio.h>
#include <net/if.h>
#include <string.h>

int main(int argc,char *argv[]){
    const char *INTERFACE        = "wlan0";
    struct ifreq ifr;

    memset(&ifr, 0, sizeof(ifr));
    snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), INTERFACE);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:07:13.203

没有错（这就是为什么它是警告而不是错误的原因），只是`printf`函数族最常见的用法是使用*文字*格式字符串。

喜欢：

```
snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), "%s", INTERFACE); 
```

在您的情况下，您可能应该使用 eg[`memcpy`](http://en.cppreference.com/w/c/string/byte/memcpy)代替：

```
#define MIN(a, b) ((a) < (b) ? (a) : (b))

memcpy(ifr.ifr_name, INTERFACE, MIN(strlen(INTERFACE) + 1, sizeof(ifr.ifr_name)); 
```

也[`strncpy`](http://en.cppreference.com/w/c/string/byte/strncpy)有可能会起作用，但在某些情况下它不会添加终止`'\0'`字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T09:11:26.953

警告的后半部分（“并且没有格式参数”）意味着该字符串不包含任何`%`s，因此`snprintf()`像您正在做的那样使用没有意义。

值得警告的是，因为它可能存在安全风险，如果字符串参数在运行时可更改，则 a`%`可能会“潜入”，这将导致问题。因此，最好将格式化字符串硬编码为“做你想做的事”。

`snprintf()`如前所述，在这种情况下使用完全没有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T09:08:08.293

这只是一个警告，所以你可以忽略它。

但`snprintf `在你的情况下不值得使用，只是代码

```
 strncpy (ifd.ifr_name, sizeof(ifr.ifre_name), INTERFACE); 
```

这可能会运行得更快，更重要的是不要发出警告。如果您想确保名称以 null 结尾，请使用`ifd.ifr_name[sizeof(ifr.ifre_name)-1] = (char)0;`

顺便说一句，与最近的 GCC 4.8 一起编译，`gcc-4.8 -Wall sven.c -o sven`我没有收到任何警告。甚至与`gcc-4.7 -Wall`. 这可能是一个`libc`标题问题`<stdio.h>`......

# php - 使用 PRADO 将数据传递给视图时出现问题

> ID：16011360
> 
> 赞同：0
> 
> 时间：2013-04-15T09:04:05.723
> 
> 标签：php, model-view-controller, prado

我得到了一个网站来维护。该网站正在使用 PRADO 框架，我不得不做一些小改动。HTML 和 CSS 更改没有问题，但现在我必须将一些数据从页面传递到视图。我试过使用：

```
$this->HomeCalendar2->DataSource = $result['data'];
$this->HomeCalendar2->dataBind(); 
```

但它说`Component property 'Home.HomeCalendar2' is not defined.`

在我的代码上方有以下代码：

```
$this->HomeCalendar->DataSource = $result;
$this->HomeCalendar->dataBind(); 
```

它工作得很好，我看不出 HomeCalendar 的定义在哪里。任何帮助将不胜感激。

PS：我以前从未与 PRADO 合作过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T15:27:52.050

这个问题现在很老了，希望你已经解决了。

使用 DataSource 意味着在您的模板（.page 或 .tpl）中必须有一个[TDataBoundControl](http://www.pradosoft.com/docs/manual/class-TDataBoundControl.html)组件，如 folowwing（例如使用 TRepeater）

```
<com:TRepeater ID="HomeCalendar">
<!--- [ properties like ItemTemplate here and it contents ] --->
</com:TRepeater> 
```

TDataBoundControl 的子类用于需要循环结果的组件（某种`for`或`foreach`某种方式）。如果您只是需要将信号结果传递给视图，您可以使用 TPanel/TActivePanel、TLiteral 等组件，或者简单地使用[表达式标签](http://www.pradosoft.com/demos/quickstart/?page=Configurations.Templates2#dct)。

**例子 ：**

表达式标签：

php：

```
<?php
$this->myvalue = 'Hello World!'; 
```

模板 ：

```
<h1><%= $this->myvalue %></h1> 
```

**或另一种解决方案：**

模板 ：

```
<com:TLiteral ID="MyLiteral" /> 
```

PHP：

```
<?php
$this->MyLiteral->getControls()->add('<h1>Hello world !</h1>'); 
```

# extjs - 使用控制器中的 refs 在 extjs4.1 中未触发更改事件

> ID：16011363
> 
> 赞同：0
> 
> 时间：2013-04-15T09:04:11.127
> 
> 标签：extjs, extjs4.1

使用控制器中的 refs 在 extjs4.1 中未触发更改事件。我已经实现了以下代码。我使用了组合框 id cmbMarketRegion。

有人可以纠正我吗？如果有什么遗漏，请告诉我。

这是我的视图组合框

```
{
    xtype:'combo',
    id:'cmbMarketRegion',
    minWidth:50,
    minHeight:30,
    displayField:'marketRegionName',
    valueField:'marketRegionId'                                                 
} 
```

**在控制器中**

```
{
        ref: '#cmbMarketRegion',
}

  ], 

   init: function() {
    this.control({
        'cmbMarketRegion': {
            change: 'valueChange'
        }
    });

    }, 

valueChange:function(combo, ewVal, oldVal,optionsVal) {
    alert("hai");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:42:05.940

您正在搜索 xtype 'cmbMarketRegion'，而不是 id。尝试这样的事情：

```
this.control({
    'combo[id="cmbMarketRegion"]': {
        change: this.valueChange,
        scope: this
    }
}); 
```

或者，因为 id 是唯一的：

```
this.control({
    '[id="cmbMarketRegion"]': {
        change: this.valueChange,
        scope: this
    }
}); 
```

尽量不要使用 id 属性，它是全局的。

# jquery - 如何使用 jquery 1.7.2 获取当前显示的选项卡索引

> ID：16011366
> 
> 赞同：4
> 
> 时间：2013-04-15T09:04:16.207
> 
> 标签：jquery, tabs, refresh

我正在使用 html + PHP + jquery 开发一个网页，我面临以下问题。该页面使用 jquery-1-7-2.js（由于某些历史原因，我无法升级......）。我正在使用 PHP 和表单来查询 MySQL 数据库，然后在不同的选项卡中显示结果（使用 jquery）。

问题是我希望在刷新页面时能够保持在当前活动选项卡上（表单会在更改时引发自动刷新）。

我正在使用的代码类型是：

```
<html>

<div class="container">
  <div class="row">

    <div class="span12">

      <div class="well">
        <div class="row">

          <div class="span2">
            <form name="choice">
            <label>Choice :</label>
            <select name="menu" style="width:150px" onChange="refreshFormTechno(this.options[this.selectedIndex].value);">
            <option value="%">ALL</option>
            <option value="choice1">Choice 1</option>
            <option value="choice2">Choice 2</option>
            </select>
            </form>
          </div>

        </div>
      </div>

    <ul class="nav nav-tabs" id="MyTab">
    <li class="active"><a href="#tab1" data-toggle="tab">First Tab</a></li>
    <li><a href="#tab2" data-toggle="tab">Second Tab</a></li>
    <li><a href="#tab3" data-toggle="tab">Third Tab</a></li>
    </ul>

      <div class="tab-content">

        <div class="tab-pane active" id="tab1">
          <div class="row">
        MY CODE TO DISPLAY IN TAB 1
      </div>
        </div>

        <div class="tab-pane" id="tab2">
          <div class="row">
        MY CODE TO DISPLAY IN TAB 2
      </div>
        </div>

        <div class="tab-pane" id="tab3">
          <div class="row">
        MY CODE TO DISPLAY IN TAB 3
      </div>
        </div>

      </div>

    </div>
  </div>
</div>

<script type="text/javascript" language="javaScript">
function refreshFormTechno(value_id)
{
  document.location = './index.php?choice='+value_id;
}
</script>

</html> 
```

如果我通过以下方式更改脚本部分：

```
<script type="text/javascript" language="javaScript">
function refreshFormTechno(value_id)
{
  //document.location = './index.php?choice='+value_id;
  var index = $('#MyTab a[href="#tab2"]').parent().index();
  alert(index);
}
</script> 
```

我能够获得我想要的选项卡的 ID（0 代表 tab1，1 代表 tab2）。但我无法弄清楚如何获取活动选项卡的 ID。

我发现了很多关于此类问题的线程，并尝试测试提供的代码，但没有成功。我试过了：

```
<script type="text/javascript" language="javaScript">
function refreshFormTechno(value_id)
{
  //document.location = './index.php?choice='+value_id;
  var index = $('#MyTab').tabs('option', 'selected');
  alert(index);
}
</script> 
```

或者：

```
<script type="text/javascript" language="javaScript">
function refreshFormTechno(value_id)
{
  //document.location = './index.php?choice='+value_id;
  var index = $('#MyTab').parent.tabs('option', 'selected');
  alert(index);
}
</script> 
```

没有结果...

知道当前的标签索引将允许我在重新加载整个页面时更改默认的活动标签。不仅如此，它还允许我仅在需要时加载 php 脚本并限制页面的充电时间。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:09:30.467

你不能只使用“活动”窗格ID吗？

```
var visiblePaneId = $('div.tab-pane.active').attr('id')
var activeTabIndex = $('#MyTab a[href="' + visiblePaneId + '"]').parent().index(); 
```

或获取活动选项卡：

```
var tabHref = $('li.active:first-child').attr('href'); //returns the anchor's href which has #
var activeTabIndex = $(tabHref).parent().index(); 
```

# ruby - Ruby rest-client 持久化 cookie

> ID：16011367
> 
> 赞同：0
> 
> 时间：2013-04-15T09:04:22.380
> 
> 标签：ruby, http, session, cookies, rest-client

我正在使用`rest-client`gem 在我的 CLI 客户端和服务器之间进行通信。我正在使用 cookie 来持久化 HTTP 会话。

```
@cookies = response.cookies
...
RestClient.post( :cookies => @cookies) 
```

从片段中可以看出，cookie 在 ruby​​ 进程中是持久的。我想将它们持久化更长的时间（就像浏览器一样）。

有没有`rest-client`办法做到这一点？如果没有，我应该将它们存储在 *nix 和 windows 系统的文件系统中的什么位置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:55:08.417

一种解决方案是使用 RestClient::Resource

然后你可以调用它，cookies就会被持久化。

```
def client(url)
    headers = {
        :accept => :json,
        :content_type => :json,
    }

    cookies = {}
    cookies[SESSION_COOKIE] = @sessionID if @sessionID
    RestClient::Resource.new(url, :headers => headers, :cookies => cookies)
end 
```

要回答有关将它们存储在何处的问题，这取决于您是否希望它们在会话之后持续存在。如果您只需要短期会话，内存中是存储它们的理想场所。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T03:20:10.820

您可以使用[**Redis**](http://redis.io/)或[**Memcached**](http://memcached.org/)等外部​​存储方法来实现您的目标，或者简单地使用一堆文件来存储您的 cookie（就像浏览器一样）。

如果你使用redis或者memcached，你可以使用域名作为key。如果是文件，则只需使用域名作为文件名，并将 cookie 存储到这些文件中。无论哪种方式，您都应该将 cookie 哈希序列化为字符串（例如 JSON）。您可以选择将 cookie 字符串转换为 Base64 以防止肩黑客攻击，或使用 RSA 对其进行加密以提高性能成本的安全性。

# php - 用于获取用户队列的 SQL - 用于游戏

> ID：16011378
> 
> 赞同：2
> 
> 时间：2013-04-15T09:04:58.010
> 
> 标签：php, mysql, sql

问候！

我目前正在为在线国际象棋游戏构建匹配逻辑。

但是，我在弄清楚如何想出一个逻辑来获得一个可以相互竞争的用户池时遇到了很多麻烦。

所以基本上，我的数据库表设计如下：

```
Users
-------
ID   |   Username   |   Gender

1    |   GKasparov  |   Male
2    |   MCarlsen   |   Male
3    |   VKramnik   |   Male
4    |   JPolgar    |   Female
5    |   HYifan     |   Female
6    |   KHumpy     |   Female
...... 
```

还有另一张桌子用来存放他们的描述

```
ELO
------

ID   |   Rating

1    |   2000
2    |   1990
3    |   1800
4    |   1990
5    |   1980
6    |   1700
....... 
```

我需要想出一种方法来为每个相互匹配的查询收集多达 10 对用户。

所以在我的搜索结果中，我需要 10 个组，每组两个用户，总共 20 个用户。

我想的结果是这样的：

```
Group 1: #1, #41 (Males Match)
Group 2: #2, #55 (Males Match)
Group 3: #3, #22 (Males Match)
Group 4: #4, #55 (Females Match)
Group 5: #5, #23 (Females Match)
.......
Group 10: #6, #13 (Females Match) 
```

有没有办法在 SQL 中做到这一点？

此外，只有男性可以与男性匹配，也许将来会考虑他们的自尊。

任何建议将不胜感激。

我也使用 PHP 作为我的应用程序服务器。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:37:30.160

认为我会使用子选择来获取每个用户组合，按第一个用户 ID 排序，第二个用户 ID 以随机顺序排列。然后添加一个计数器变量，并且只为每个第一个用户 id 带回第一个。

粗略地完成（并且未经测试），但是像这样：-

```
SELECT CONCAT("GROUP ", @Group := @Group + 1), CONCAT("#", Player1), CONCAT("#", Player2), MatchType
FROM (
SELECT a.ID AS Player1, b.ID AS Player2, CONCAT("(", a.Gender, " Match)") AS MatchType, (CASE WHEN @aUser = a.ID THEN @Cnt = @Cnt + 1 ELSE @Cnt END) AS rownum, @aUser := a.ID
FROM users a
INNER JOIN users b
ON a.Gender = b.Gender
AND a.ID != b.ID 
INNER JOIN (SELECT @Cnt := 0, @aUser := NULL) c
ORDER BY a.ID, RAND()) Sub1
INNER JOIN (SELECT @Group := 0) c
WHERE Sub1.rownum = 0
ORDER BY RAND()
LIMIT 0, 10 
```

这个问题（目前）是 #1 可以播放 #2，但也可以返回为 #2 播放 #1。消除这个问题需要一些努力。

编辑 - 修复重复项的简单方法。将 JOIN 中的 AND 从**AND a.ID != b.ID**更改为**AND a.ID < b.ID**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:33:24.653

试试这个：

```
 function scheduler($players){

        if (count($players)%2 != 0){

            array_push($players,"bye");

        }

        $away = array_splice($players,(count($players)/2));

        $home = $players;

        for ($i=0; $i < count($home)+count($away)-1; $i++){

            for ($j=0; $j<count($home); $j++){

                $round[$i][$j]["Home"]=$home[$j];

                $round[$i][$j]["Away"]=$away[$j];

            }

            if(count($home)+count($away)-1 > 2){

                array_unshift($away,array_shift(array_splice($home,1,1)));

                array_push($home,array_pop($away));

            }

        }

        return $round;

    }

    ?> 
```

显示匹配：

```
foreach($schedule AS $round => $games){

    echo "Group: ".($round+1)."<BR>";

    foreach($games AS $play){

        echo $play["Home"]." - ".$play["Away"]."<BR>";

    }

    echo "<BR>";

}

?> 
```

使用 mysql 查询团队名称获取团队数组。其中`$round`包含“客场”和“主场”比赛。

# python - pip 的操作系统特定要求

> ID：16011379
> 
> 赞同：15
> 
> 时间：2013-04-15T09:04:58.267
> 
> 标签：python, operating-system, pip

pip 的 requirements.txt 文件中是否可以有操作系统特定的要求？

例如：我依赖于*readline*，因此，如果安装在 Windows（或 OSX）上，那么*pyreadline*是必需的。如果是 linux，那么我不想强制安装。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2019-01-20T21:52:21.710

[您可以使用PEP-508](https://www.python.org/dev/peps/pep-0508/#environment-markers)中指定的“环境标记”来执行此操作：

这是在 a 中使用此类标记的示例`requirements.txt`：

```
pyreadline==2.1; platform_system == "Windows" 
```

同样，在 a 中`setup.py`：

```
setup(
    ...
    install_requires=['pyreadline; platform_system == "Windows"'],
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T09:59:16.203

最后，在 setup.py 中添加操作系统检查是我发现其他人使用的。前任：

```
install_requires = [
        "parsedatetime >= 1.1.2",
        "colorama >= 0.2.5",
        "pycrypto >= 2.6"
        ] + ["pyreadline >= 2.0"] if "win" in sys.platform else [], 
```

[使用示例代码链接到完整的 setup.py](https://github.com/maebert/jrnl/blob/9b0bee06376372ea6ecaa3c1c0caad14647c86bd/setup.py)

# magento - 如何通过 local.xml 添加新布局？

> ID：16011381
> 
> 赞同：0
> 
> 时间：2013-04-15T09:05:18.443
> 
> 标签：magento, layout, content-management-system

如何使用 local.xml 在 magento 中添加新布局？当我制作新的 CMS 页面时，我希望它出现在布局列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-05T14:55:01.693

查看[此页面](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/0_-_theming_in_magento/adding_cms_layout_templates)上的最后一段代码。您可以进入`app/code/core/Mage/Page/etc/config.xml`并添加如下行：

```
 <TEMPLATE_LABEL module="page" translate="label">
     <label>TEMPLATE NAME</label>
     <template>page/TEMPLATE-FILENAME.phtml</template>
     <layout_handle>page_HANDLE_NAME</layout_handle>
 </TEMPLATE_LABEL> 
```

替换大写的单词，例如

```
 <home_format module="page" translate="label">
     <label>Home Format</label>
     <template>page/home-page.phtml</template>
     <layout_handle>page_home_format</layout_handle>
 </home_format> 
```

`<page> ... </page>`就在代码块结束之前。

**注意**：如果你这样做，你可能无法在不丢失自定义布局的情况下升级 Magento，就像`config.xml`核心文件一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:22:11.670

**使用 local.xml 在 magento 中布局**

> *请去遵循这个代码。*

[http://www.codeboss.in/web-funda/2009/07/07/create-new-layout-in-magento/](http://www.codeboss.in/web-funda/2009/07/07/create-new-layout-in-magento/)

# html - 纯css弹出式设计

> ID：16011385
> 
> 赞同：1
> 
> 时间：2013-04-15T09:05:33.813
> 
> 标签：html, css, popup

如何使用纯 css 创建如下图所示的弹出框

![在此处输入图像描述](https://i.stack.imgur.com/eoAIf.jpg)

这是我用 position:absolute 所做的，它工作得很好，但我想要得到的是，是否可以通过使用`:after`或`:before`伪类只使用一个 div？

```
.pop{
    background:#333;
    display:inline-block;
    width:250px;
    height:120px;
    border-radius:8px;
    position:relative;
    margin-top:25px
}
span{
    position:absolute; 
    left:0; 
    top:-20px;
    color:white;
    display:inline-block;
    border-radius:8px 8px 0 0;
    background:#333; 
    padding:6px;
    width:100px
} 
```

**[小提琴](http://jsfiddle.net/Cup5Y/14/)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:17:28.363

这个不是很灵活，但是没有额外的标记，使用伪元素`::before`。

```
.pop {
  background: #333;
  width: 250px;
  height: 120px;
  border-radius: 8px;
  display: inline-block;
}
.pop::before {
  content: "Pop up head";
  display: block;
  width: 90px;
  background: #333;
  border-radius: 8px;
  padding: 3px;
  margin-top: -14px;
  text-align: center;
  color: white;
}
```

```
<div class="pop"></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:15:25.627

如果我正确理解了您的问题，这就是您需要的[http://jsfiddle.net/slash197/Cup5Y/15/](http://jsfiddle.net/slash197/Cup5Y/15/)

HTML

```
<div class="holder">
    <div class="header">Header</div>
    <div class="pop">asd asd asd </div>
</div> 
```

CSS

```
.holder {
    position: relative;
    width: 250px;
    height: 140px;
}
.header {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 20px;
    background:#333;
    color: #ffffff;
    border-top-left-radius:8px;
    border-top-right-radius:8px;
    padding: 0px 10px;
}
.pop{
    position: absolute;
    top: 20px;
    left: 0px;
    background:#333;
    color: #ffffff;
    display:inline-block;
    width:250px;
    height:120px;
    padding: 10px;
    border-top-right-radius:8px;
    border-bottom-left-radius:8px;
    border-bottom-right-radius:8px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:20:35.140

首先，您需要 2 个 div，一个用于“标题”，一个用于“内容”

看我的例子[http://jsfiddle.net/Cup5Y/13/](http://jsfiddle.net/Cup5Y/13/)

```
<div class="pop">
    <div class="head">
        Title
    </div>
    <div class="content">

    </div>
</div> 
```

# iphone - 在 ios6 中将视频格式 .mov 更改为 .mp4

> ID：16011386
> 
> 赞同：1
> 
> 时间：2013-04-15T09:05:37.487
> 
> 标签：iphone, uiimagepickercontroller, video-capture, mp4

我想将 .mov 转换为 .mp4 。当我从 iPhone 相机录制视频时，它会自动使用无法在 android OS 上播放的 .mov 格式录制视频。我想将此格式转换为 .mp4，以便视频可以轻松在 iPhone 和 android 上播放。我已经使用以下代码转换了视频格式：

```
[request addData:videoData withFileName:@"video1.mp4" andContentType:@"video/mp4" forKey:@"video"]; 
```

现在格式已更改，但无法在 android 设备上运行。

# ios - 哪一个在性能方面是有效的 - AppDelegate 的对象或 AppDelegate 的宏？

> ID：16011387
> 
> 赞同：0
> 
> 时间：2013-04-15T09:05:37.963
> 
> 标签：ios, objective-c, optimization, performance

我们可以通过这些方式使用 AppDelegate 的对象说......

1)

```
AppDelegate *app; // Globally declared

app = (AppDelegate*)[[UIApplication sharedApplication] delegate]; //Use this any where in app 
```

2)

```
#define     APP_DELEGATE ((AppDelegate*)[[UIApplication sharedApplication] delegate]) 

[APP_DELEGATE.navigationController ...]; //use macro any where in app 
```

我想知道在性能和处理速度方面哪种方式更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:10:44.677

不要认为它会改变性能。老实说，它只是一个实用程序而不是其他任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:29:48.210

这两种方法都不会成为应用程序性能的限制因素。首先写清楚，可读性和良好的结构。

不要试图通过查看使用的方法调用的数量来“提高性能”。方法调用实际上是免费的，除非您要进行数百万次调用。

如果您经常与来自任何地方的应用程序代表交谈而担心访问速度，那么您在应用程序的设计和实现中犯了一个可怕的错误。

“经常担心访问速度”是指 Instruments（您正在使用 Instruments，对吗？如果不使用它，您不能担心或提高应用程序的性能）告诉您获取对应用程序委托的引用是您当前的性能瓶颈。

# sharepoint - 快速访问不同列表中的 splistitem 的方法？

> ID：16011392
> 
> 赞同：0
> 
> 时间：2013-04-15T09:05:57.247
> 
> 标签：sharepoint, spquery

我有 2 个列表：listA 和 listB

listA 有 2 个字段：

```
Title (text)
PortalID (text) 
```

listB 有 3 个字段：

```
Title (text),
listAField(lookup to listA Title field)
UserID (text) 
```

我有一个 UserID 值，我需要一种快速获取 PortalID 值的方法。

目前我正在使用 2 个 SPQueries：

```
1.Gets listAField value
2.Gets PortalID value. 
```

是否可以直接使用一个查找来完成所有操作？或其他更有效的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:10:23.133

您可以为此使用 SPServices，使用级联下拉菜单，您可以在此处找到更多信息：http: [//www.sharepointkings.com/2010/09/sharepoint-cascading-drop-downs-using.html](http://www.sharepointkings.com/2010/09/sharepoint-cascading-drop-downs-using.html)这为我节省了很多已经好几次了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:02:17.650

当您进行查找时，您可以检查列表 A 中的哪些字段要带有标题。只需选中带有 PortalID 字段的复选框

# windows-7 - 运行隐藏的蝙蝠并同时以管理员身份运行

> ID：16011394
> 
> 赞同：1
> 
> 时间：2013-04-15T09:05:59.443
> 
> 标签：windows-7, vbscript, batch-file

`bat`由于它所做的事情，我有一个可以运行一个多小时的文件。我可以让它以某种方式隐藏并在管理模式下运行吗？

我找到了一种使用 vbs 使其隐藏运行的方法：

```
Set WshShell = CreateObject("WScript.Shell")

WshShell.Run chr(34) & "C:\Users\Ab\Desktop\vi\nove.bat" & Chr(34), 0

Set WshShell = Nothing 
```

我希望找到一种方法将它们放入批处理文件中，但我认为这是不可能的，因此`vbs`文件也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:34:51.673

我相信对象的[ShellExecute 方法](http://ss64.com/vb/shellexecute.html)`runas`的动词将以提升的权限运行。您可以通过将句柄设置为 0 以在当前脚本中执行此操作的相同方式隐藏它。`Shell.Application``window`

```
set shell=CreateObject("Shell.Application")
' shell.ShellExecute "application", "arguments", "path", "verb", window
shell.ShellExecute "move.bat",,"C:\Users\Ab\Desktop\vi\", "runas", 0
set shell=nothing 
```

# ssl - SSL 连接，错误

> ID：16011396
> 
> 赞同：0
> 
> 时间：2013-04-15T09:06:00.960
> 
> 标签：ssl, blackberry

我正在尝试通过 SSL 从我的电话设备连接到我的服务器。

当我在尝试连接到我的服务器时调试设备上的应用程序时，我在日志中得到了这个：

```
> Opening URL:
> https://193.158.3.165:8443/low-level-sample/subscribe?username=fk&password=ckd&appid=35[0.0]
> 82-M4687r9k9k836r980kO2395i32i66y10a34&address=320ef999&osversion=5.0.0.669&model=9520&type=public&f[0.0]
> ield1=844;deviceside=false;ConnectionType=mds-public
>     SSL:->CH 
```

以及我无法访问我的服务器的设备上的错误。但是，设备的浏览器可以访问服务器。

任何想法这意味着什么：

> SSL:->CH

再看一遍，我想这就像客户端和服务器之间握手的第一步？

# php - 来自 iOS 应用程序的 PHP POST

> ID：16011398
> 
> 赞同：0
> 
> 时间：2013-04-15T09:06:11.757
> 
> 标签：php, ios, objective-c

我需要从我的 iOS 应用程序访问 PHP 的 POST。我似乎无法让它工作。

这是一个非常简短的 PHP 片段：

```
$post_data = $_POST["function"];

if ($function == 'post_data') {
    //do stuff, not important
else if($function == 'send_stuffz') {
    //do stuff, not important
} 
```

如何访问这部分代码？

我认为它可能只是通过一个 URL，例如：

```
fakewebsitename.com/file.php?function=post_data
fakewebsitename.com/file.php?function=send_stuffz 
```

但这不起作用。

在 iOS 应用程序中，到目前为止我有这个：

```
NSMutableURLRequest *urlReq = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:baseURL]]; <-baseURL = fakewebsitename.com/file.php in this "instance"
[urlReq setHTTPMethod:@"POST"]; 
```

不知道如何进行...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:09:26.053

**这个函数不正确**

```
$post_data = $_POST["function"];

if ($function == 'post_data') {
    //do stuff, not important
else if($function == 'send_stuffz') {
    //do stuff, not important
} 
```

您没有定义变量`$function`请更改如下

**请更改为**

```
$post_data = $_POST["function"];

if ($post_data == 'post_data') {
    //do stuff, not important
else if($post_data == 'send_stuffz') {
    //do stuff, not important
} 
```

# git - 从 gitolite 中的组中删除 repo

> ID：16011400
> 
> 赞同：1
> 
> 时间：2013-04-15T09:06:13.500
> 
> 标签：git, gitolite

我有一个 gitolite 设置，我的 gitolite.conf 文件看起来像，

```
@myrepos = test
@myrepos = proj1 proj2

repo @myrepos
    RW+ = user1 user2 user3 user4 
```

现在，我想单独授予新用户“user5”对“proj2”的访问权限。有没有办法在 gitolite 中做到这一点而不从组中删除回购？

如果我要从组中删除 repo“proj2”以单独放置它，那会破坏什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:10:15.227

您可以为 user5 和 proj2 定义另一个规则，这意味着您不必修改`myrepos`组。

```
repo @myrepos
    RW+ = user1 user2 user3 user4

repo proj2
    RW+ = user5 
```

# html - HTML 表单输入窃取焦点/焦点转移

> ID：16011404
> 
> 赞同：0
> 
> 时间：2013-04-15T09:06:22.227
> 
> 标签：html

由于某种原因，焦点不断从我的 HTML 表单上的任何地址字段转移到信用卡字段。

所以点击地址字段，焦点又回到了信用卡字段。

这可能很简单，但有人可以帮忙吗？

[http://jsfiddle.net/xYbsz/](http://jsfiddle.net/xYbsz/)

```
<form name='order-validation'>
<p><label>email: <input type="email" title="email" id="emailAddress" name="email"   value=""></label></p>

<p>
Phone: <select name="countrycode" style="display: inline;">
<option value="44" selected>UK (+44)</option> 
<option value="1">USA (+1)</option> 
<option value="213">Algeria (+213)</option> 
</select><input type="tel" name="phone" id="id_tel" required pattern="(\+?\d[-.]*){7,13}" title="international, national or local phone number"/></p>
<img class="cc-img" id="visa-card-img" src="visa.jpg" />
<img class="cc-img" id="mastercard-card-img" src="mastercard.jpg" />
<img class="cc-img" id="amex-card-img"src="american-express.jpg" />
<p><label>credit card: <input type="text" id="cc_number" pattern="[0-9]{13,16}"><br />
<img class="cc-security-code" id="visa-sec-code" src="cvv.gif" />

<img class="cc-security-code" id="amex-sec-code" style="display: none;" src="amex-sec-code.gif" /><br />
Address:
<input type="text" name="newCreditCardStreet" size="35" tabindex="5" value="" id="id_creditCardStreet"><br />
Town/City:
<input type="text" name="newCreditCardLocality" size="35" tabindex="5" value="" id="id_creditCardLocality"><br />
Country:
<input type="text" name="country" id="id_country">
<p><input type="button" name="submit" value="Submit" /></p>
<p id="test"></p>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:10:30.550

的标签标签`cc_number`未关闭。

```
 <label for="cc_number">credit card:</label> 
  <input type="text" id="cc_number" pattern="[0-9]{13,16}"><br /> 
```

我还注意到在标记中标签标签正在包装输入。这是不必要的：

```
<label>email: 
    <input type="email" title="email" id="emailAddress" name="email"   value="">
</label> 
```

而是使用`for`属性：

```
<label for="emailAddress">email:</label>
<input type="email" title="email" id="emailAddress" name="email"   value=""> 
```

**工作示例** [http://jsfiddle.net/xYbsz/1/](http://jsfiddle.net/xYbsz/1/)

# c++ - 如何将内置类型转换为用户定义类型

> ID：16011405
> 
> 赞同：0
> 
> 时间：2013-04-15T09:06:22.697
> 
> 标签：c++, conversion-operator

我有一个名为 BigInteger 的类，它支持大整数运算。我想在 BigInteger 和内置类型“int”之间实现混合操作。换句话说，我想支持以下陈述

```
BigInteger a(10);
a + 10;
10 + a; 
```

我知道重载函数可以处理它

```
BigInteger operator +(const BigInteger&, const int&);
BigInteger operator +(const int&, const BigInteger&); 
```

此外，我知道转换运算符只能处理它，

```
operator int(); 
```

但是上面的函数支持将 BigInteger 转换为 int 会**丢失精度**。我正在寻找一些比重载函数更简单并保持精度的方法。

感谢大家。

我试试看

```
#include <iostream>
using namespace std;

class BigInteger
{
public:
    BigInteger(const int& i)
    {
        cout << "construct: " << i << endl;
        val = i;
    }

//    BigInteger operator +(const BigInteger& tmp) const
//    {
//        return BigInteger(val + tmp.val);
//    }

    friend ostream& operator <<(ostream& os, const BigInteger& bi)
    {
        os << bi.val << endl;
        return os;
    }

    int val;
};

BigInteger operator +(const BigInteger& a, const BigInteger& b)
{
    return BigInteger(a.val + b.val);
}

int main(int argc, const char *argv[])
{
    BigInteger a(12);
    cout << (a + 123) << endl;
    cout << (1231 + a) << endl;

    return 0;
} 
```

为什么我不能使用成员函数？这个怎么运作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:08:31.773

您需要添加`BigInteger`将从 int获取值的构造函数

```
BigInteger (const int& value) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T09:08:46.783

因此，创建一个构造函数`BigInteger(int)`，并定义一个`BigInteger operator(const BigInteger &lhs, const BigInteger &rhs)`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T09:24:20.870

您应该为`BigInteger operator+(BigInteger const&, int);`Herb Sutter 和 Andrei Alexandrescu 在 C++ 编码标准（第 29 项）中所写的实现重载，您应该“考虑重载以避免隐式类型对话”。您的 BigInteger 可能会使用 operator new 进行构造，在这种特殊情况下可以避免这种情况。此外，您应该根据一元运算来实现二元运算：

```
class BigInteger {
  // ..
public:
    BigInteger& operator+=(int); // this operation can reuse BigIntegers buffer
  // ..
}

BigInteger operator+(BigInteger lhs, int rhs)
{
  return lhs+=rhs;
}

BigInteger operator+(int lhs, BigInteger rhs)
{
   return rhs+=lhs;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T09:09:27.820

确保你只是从`int`to转换，而`BigInteger`不是反过来。或者，如果反向转换会导致溢出，则抛出异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T09:26:12.863

定义构造函数 BigInteger(int) 并重载运算符 BigInteger operator+(const BigInteger &left, const BigInteger &right)。

# c# - 在 IIS6 中使用自定义角色提供程序时要考虑的事项

> ID：16011406
> 
> 赞同：0
> 
> 时间：2013-04-15T09:06:32.447
> 
> 标签：c#, .net, asp.net-mvc, iis-6, roleprovider

**我在IIS7.5**上部署了一个网站。它工作得很好。当我尝试在**IIS6**上部署它时，我收到有关**CustomRoleProvider** (* *Line 65* *)的**“配置错误” 。**似乎是什么问题？

 ***```
 <roleManager enabled="true" defaultProvider="CustomRoleProvider">
      <providers>
        <clear />
Line 65: <add name="CustomRoleProvider" type="A.B.CustomRoleProvider, A" connectionStringName="MyConnectionString" />
      </providers>
 </roleManager> 
```

错误信息 ：

```
Configuration Error 
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Exception has been thrown by the target of an invocation. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:52:13.023

```
<add name="CustomRoleProvider" type="A.B.CustomRoleProvider, CustomRoleProvider.Web.Security" applicationName="/" connectionStringName="MyConnectionString" /> 
```***

# android - 点击listview可以得到一个timePicker

> ID：16011416
> 
> 赞同：-2
> 
> 时间：2013-04-15T09:06:48.647
> 
> 标签：android, android-listview

所以这个列表以这种方式工作，当我单击该项目时，该项目被删除。所以我想要它当我单击该项目时，它必须向我显示 TimeDialog（**TimePicker**）来更改日期和时间。

```
 mList = (ListView) findViewById(id.list);
    mList.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int position, long id)       {
            mCursor.moveToPosition(position);
            String rowId = mCursor.getString(0); //Column 0 of the cursor is the id
            mDb.delete(MyDbHelper.TABLE_NAME, "_id = ?", new String[]{rowId});
            mCursor.requery();
            mAdapter.notifyDataSetChanged(); 
```

****这是我的 MainActivity，我认为这会有所帮助！！还包括 Listview！****

```
class MyDbHelper extends SQLiteOpenHelper {

private static final String DB_NAME = "mydb";
private static final int DB_VERSION = 1;

public static final String TABLE_NAME = "TaskTbl";
public static final String COL_TXT = "Text";
public static final String COL_DATE = "Date";
public static final String COL_TIME = "Time";
private static final String STRING_CREATE = "CREATE TABLE "+TABLE_NAME+" (_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "
    +COL_TXT+" VARCHAR(250), "+COL_DATE+" VARCHAR(20), "+COL_TIME+" VARCHAR(20));";

public MyDbHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(STRING_CREATE);
    ContentValues cv = new ContentValues(2);
    cv.put(COL_TXT, "New Entry");
    db.insert(TABLE_NAME, null, cv);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS "+TABLE_NAME);
    onCreate(db);
}
}

   public class MainActivity extends ListActivity {

public static final int RESULT_CODE = 1; 

MyDbHelper mHelper;
SQLiteDatabase mDb;
Cursor mCursor;
SimpleCursorAdapter mAdapter;
Intent weather;     
Intent i;
String text;
String date;
String time;
ListView mList;
Intent nTaskScreen ;

public TextView timeText;
public TextView dateText;
public EditText taskText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFormat(PixelFormat.RGBA_8888);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);
    setContentView(R.layout.activity_main);

    timeText = (TextView) findViewById(R.id.timeTxt);
    dateText = (TextView) findViewById(R.id.dateTxt);
    taskText = (EditText) findViewById(R.id.editText1);

    mHelper = new MyDbHelper(getApplicationContext());

    Button showBtn = (Button) findViewById(R.id.shTask);
    showBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

        }
    });

    Button nTaskBtn = (Button) findViewById(R.id.nTask);
    nTaskBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            nTaskScreen = new Intent(MainActivity.this, new_task.class);
            startActivityForResult(nTaskScreen, RESULT_CODE);

        }
    });

    Button wthrBtn = (Button) findViewById(R.id.wthrBtn);
    registerForContextMenu(wthrBtn);

    mList = (ListView) findViewById(id.list);
    mList.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

            int hourOfDay = 0, minute = 0;

            TimePickerDialog tp = new TimePickerDialog(MainActivity.this,
                    mTimeSetListener, hourOfDay, minute, false);
            tp.show();
        };

    TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {

        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            // TODO Auto-generated method stub
            timeText.setText("" + hourOfDay + "" + minute);
        };

    };

    });
    }

public void onResume() {
    super.onResume();
    mDb = mHelper.getWritableDatabase();
    String[] columns = new String[] {"_id", MyDbHelper.COL_TXT, MyDbHelper.COL_TIME};
    mCursor = mDb.query(MyDbHelper.TABLE_NAME, columns, null, null, null, null, null, null);
    String[] headers = new String[] {MyDbHelper.COL_TXT, MyDbHelper.COL_TIME};
    mAdapter = new SimpleCursorAdapter(this, android.R.layout.two_line_list_item,
            mCursor, headers, new int[]{android.R.id.text1, android.R.id.text2});
    mList.setAdapter(mAdapter);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode==RESULT_CODE)
    {

        String text = data.getStringExtra("text");
        String date = data.getStringExtra("date");
        String time = data.getStringExtra("time");

        Toast.makeText(this, "Registration was successfull! \nTask: " +text + "\nOn: " + date + "\nat:" + time, Toast.LENGTH_LONG).show();

        ContentValues cv = new ContentValues(2);
        cv.put(MyDbHelper.COL_TXT, text.toString());
        //cv.put(MyDbHelper.COL_DATE, date); //Insert 'now' as the date
        cv.put(MyDbHelper.COL_TIME, time);

        mDb.insert(MyDbHelper.TABLE_NAME, null, cv);
        mCursor.requery();
        mAdapter.notifyDataSetChanged();
        text = null;

            //mDb.execSQL("INSERT INTO TaskTbl (text,time,date) VALUES(" + "'" + text + "', '" + time + "', '" + date + "');");      

    }

    super.onActivityResult(requestCode, resultCode, data);

}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-09T11:14:48.957

如果您在布局中动态添加视图，您可以保存点击位置然后可以在那里设置文本

将视图添加到布局

```
final View v = View.inflate(MainActivity.this,R.layout.row_timw,null);
final TextView txTextView = (TextView) v.findViewById(R.id.time);
EditText hour11 = (EditText)v.findViewById(R.id.hour11);
EditText hour22 = (EditText)v.findViewById(R.id.hour22);
EditText minute11 = (EditText)v.findViewById(R.id.minute11);
EditText minute22 = (EditText)v.findViewById(R.id.minute22);
ArrayListhour11.add(hour11);
ArrayListhour22.add(hour22);
ArrayListminute11.add(minute11);
ArrayListminute22.add(minute22); 
```

然后保存已单击的位置，然后在时间或日期集中获取值。

```
private TimePickerDialog.OnTimeSetListener timePickerListener1 =
        new TimePickerDialog.OnTimeSetListener() {
            public void onTimeSet(TimePicker view1, int selectedHour,
                                    int selectedMinute) {
                ArrayListhour11.get(clickedPos).setText(selectedHour+"");
                ArrayListminute11.get(clickedPos).setText(selectedMinute+"");
                showDialog(BOutTIME_DIALOG_ID);
            }
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:16:29.247

您可以使用日期和时间数据传递意图，然后在保存按钮上单击您可以将该数据保存到数据库中，并且在将数据保存到上一个活动的恢复后，您可以重新加载光标并将数据重新加载到列表视图中。请说明您到底想要什么。你可以这样做：

```
listview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> l, View arg1, int arg2,
                long id) {
            int hourOfDay = 0, minute = 0;

            TimePickerDialog tp = new TimePickerDialog(MainActivity.this,
                    mTimeListener, hourOfDay, minute, false);
            tp.show();

        }
    }); 
```

其中 mTimeListener 如下：

```
TimePickerDialog.OnTimeSetListener maxtime = new OnTimeSetListener() {

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // TODO Auto-generated method stub
        textview.setText("" + hourOfDay + "" + minute);
    }
}; 
```

希望这对你有用...

# xcode - 在 XCode 中创建自定义 Instrument 的教程

> ID：16011417
> 
> 赞同：0
> 
> 时间：2013-04-15T09:06:57.927
> 
> 标签：xcode, instruments, dtrace

我想在 XCode 中创建自己的自定义 Instrument。不幸的是，我似乎找不到任何教程；我找到的唯一帮助是[手册](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/CreatingCustomInstruments/CreatingCustomInstruments.html#//apple_ref/doc/uid/TP40004652-CH8-SW1)，在我看来这几乎不是独立的。有人知道教程吗？实际上，如果我可以检测一个自定义仪器（甚至是一个内置的），我已经很高兴了，因为如果我手头有一个例子，我可以更好地解决其余的问题。

如果它是相关的，我计划为 JAVA 构建一个时间/cpu 分析器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:20:14.003

可以检查一些内置仪器。将仪器添加到跟踪文档窗口并选择它。选择乐器 > 编辑乐器。如果启用了“编辑仪器”菜单项，您可以检查该仪器。可以检查的一些内置工具是 Cocoa Layout、Sudden Termination 和 Core Data 工具。

自定义仪器具有以下部分：DATA、BEGIN、一个或多个探针和 END。DATA 部分包含全局变量。使用 DATA 部分提供要在多个探针中使用的任何变量。BEGIN 部​​分执行您的自定义仪器所需的任何初始化。END 部分执行自定义仪器运行后需要执行的任何清理。

探针是与传统编程语言中的功能等效的定制仪器。您提供触发探测器必须满足的条件、要执行的 DTrace 脚本以及要记录的任何数据。Instruments 的自定义仪器编辑器提供了一个 UI 来提供条件并选择要记录的数据。

站点[dtrace.org](http://dtrace.org)提供了 DTrace 及其脚本语言的指南，它可以帮助您学习为自定义仪器编写脚本。

# java - 在 Java Web 应用程序中集成签名的小程序

> ID：16011418
> 
> 赞同：1
> 
> 时间：2013-04-15T09:07:03.120
> 
> 标签：java, security, applet, signed-applet

我有一个 java 小程序项目，它启动一个网络摄像头并将其显示在一个窗口上。我正在尝试将此小程序集成到我的网络应用程序中，因为我已将我的小程序作为 JAR 导出并包含在我的网络应用程序中，并通过使用小程序标记在我的 JSP 页面上使用它。现在我收到一条消息，无法验证数字签名。我目前正在尝试签署我的小程序并使用它，但我没有找到任何教程。

有人可以指导我吗？

我想做的是合法的，或者我可以尝试一些其他方式将我的小程序集成到 JSP 页面中，或者任何其他方式在 Java Web 应用程序中具有网络摄像头捕获功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:12:43.987

在将它作为 applet 运行之前，您需要对 applet jar 进行签名。这是您参考的链接。：http: *[//docs.oracle.com/javase/tutorial/deployment/jar/signing.html](http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html)* 一旦 jar 被签名，您可以运行它，如果它仍然不起作用，请尝试运行签名的选项内容下：控制面板：Java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:27:55.830

嗯...我确实认为，当您将小程序“导出”到 JAR 时，签名变得无效或其他什么；实际上任何修改都会使其无效......所以我想你需要

*   A）作为提示，首先清理您的 JRE 证书缓存*（然后尝试重新启动您的 JSP；如果不这样做，请阅读 B、C 点）*
*   B）将您的（带有空白清单的）小程序打包到 JAR 中
*   C) 如果您有[密钥库使用](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html#Commands)[jarsigner util](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jarsigner.html)对小程序 JAR 进行签名

* * *

报告是否有帮助

# jquery - 在全日历中选择整周

> ID：16011421
> 
> 赞同：4
> 
> 时间：2013-04-15T09:07:19.180
> 
> 标签：jquery, database, select, fullcalendar, selectable

我在使用 fullcalendar 插件时遇到问题，我试图通过单击在月视图中选择一整周，然后创建一个事件。换句话说，如果您单击特定周的任何一天，该周将突出显示并创建一个事件。此后，应将此事件输入我的数据库。

这是我到目前为止所拥有的：

```
<script>
    $(document).ready(function() {
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
// page is now ready, initialize the calendar...

$("#calendar").fullCalendar({
    // put your options and callbacks here
    header: {
            right: "today prev,next",
            left: "title",
        },
    height:650,
        selectable: true,
        selectHelper: true,
        select: function(start, end, allDay) {
            var title = confirm("Apply for kitchenweek?");
            if (title) {
                calendar.fullCalendar("renderEvent",
                    {
                        title: title,
                        start: start,
                        end: end,
                        allDay: allDay
                    },
                    true // make the event "stick"
                );
            }
            calendar.fullCalendar("unselect");
        },
    editable: true,
    events: "/json-events.php"
   })
  });
</script> 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T10:06:14.957

我设法在月视图中选择了整整一周，并在 fullcalendar js 中做了一点修改。在函数 renderDayOverlay 中的 fullcalendar js

```
function renderDayOverlay(overlayStart, overlayEnd, refreshCoordinateGrid) {
overlayStart.setDate(overlayStart.getDate()-overlayStart.getDay());
overlayEnd.setDate(overlayStart.getDate() + 7);
.
.
.
.
overlayEnd.setDate(overlayEnd.getDate() - 1); // last line of function 
```

它选择整周的事件并在该周保存该事件。还有一个问题是他们关于连续几个月（即 4 月 28 日至 5 月 4 日）一周的 EndDate 计算。对于其他几周，它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-09T04:18:54.467

一些用户没有注意到 OP 编辑​​了他们的问题以包含答案，因此为了便于访问，我将其重新发布为答案，这样人们就不会错过它。完全披露这不是我的代码，它是 OP 的代码，支持他的问题而不是这个答案。这里所说的是代码：

（也因为我没有写它我不能保证它的工作，我也不能解释它）

```
 <script>
        $(document).ready(function() {
        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();
    // page is now ready, initialize the calendar...

   var calendar = $("#calendar").fullCalendar({
    // put your options and callbacks here
    header: {
            right: "today prev,next",
            left: "title"
        },
    height:650,
    events: "/json-events.php",
    //selectable: true,
        selectHelper: true,
    dayClick: function(start, allDay, jsEvent, view) {
        $(this).parent().siblings().removeClass("week-highlight");
        $(this).parent().addClass("week-highlight");
        if(start < date && start.getDate() != date.getDate())
        {
            alert("Cannot select past dates.");
            $(this).parent().removeClass("week-highlight");
            return;
        }
            var title = confirm("Apply for kitchenweek?");
             var now = date? new Date(start-1) : new Date();
             now.setHours(0,0,0,0);
             var monday = new Date(now);
             monday.setDate(monday.getDate() - monday.getDay() + 1);
             var sunday = new Date(now);
             sunday.setDate(sunday.getDate() - sunday.getDay() + 7);
            if (title) {
                calendar.fullCalendar("renderEvent",
                    {
                        title: "Kitchenweek for: '; echo $username; echo'",
                        start: monday,
                        end: sunday,
                        allDay: allDay
                    },
                    true // make the event "stick"
                );
            var mondaydate = $.fullCalendar.formatDate(monday,"yyyy-MM-dd");
            var sundaydate = $.fullCalendar.formatDate(sunday,"yyyy-MM-dd");
            var pname = "Kitchenweek for: '; echo $username; echo'";
            var username = "'; echo $username; echo'";
            $.ajax({
            type: "POST",
            url: "/new_event.php",
            data: {
            startdate: mondaydate,
            enddate: sundaydate,
            event_title: pname,
            uname: username
            }
            });
            }
            $(this).parent().removeClass("week-highlight");
        }
});
});
</script> 
```

# kendo-ui - 如果验证失败，则 Kendo DatePicker 红色边框

> ID：16011424
> 
> 赞同：0
> 
> 时间：2013-04-15T09:07:35.537
> 
> 标签：kendo-ui

`Kendo UI date picker`如果验证失败，我可以添加红色边框吗

```
function onChange(e) {
    if (e.date == undefined) {
        var item = $(this).find('.t-input').val('Incorrect date!');
    }
} 
```

我有这个`onChange`方法并试图添加`red`边框。谁能帮助我或提出更好的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T10:39:35.013

添加这个 CSS 应该可以工作：

```
#datepicker[aria-invalid] {
  border: 1px solid #f00;
} 
```

这是一个示例： [jsbin](http://jsbin.com/ufimom/360/edit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T06:22:55.637

不幸的是，你不能用 Kendo UI 做到这一点。Kendo UI 元素不允许您这样做。

我对剑道小部件上的样式表进行了数据绑定。Firebug 会通知您这是不可能的。

我现在会用我的 Telerik 支持帐户开一张票，然后回来找你。我也想做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-08T12:13:06.000

```
$('input[aria-owns=txt-orderedTime_timeview]').closest(".k-picker-wrap.k-state-default").css("border-color", '#ff0000');
```

> 或者

```
$("#txt-orderedTime").data("kendoTimePicker").wrapper.find(".k-picker-wrap.k-state-default").addClass("validationErrorClass");
```

```
.validationErrorClass {
        border-color: #ff0000 !important;
    }
```

# javascript - 不规则时间序列最高点上的符号

> ID：16011430
> 
> 赞同：0
> 
> 时间：2013-04-15T09:08:08.967
> 
> 标签：javascript, highcharts

有没有办法在时间序列（不规则间隔）的特定点（例如最高值）上显示符号？

在“正常”系列的最高点上有符号的代码：

```
data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, {
   y: 26.5,
    marker: {
     symbol: 'url(http://www.highcharts.com/demo/gfx/sun.png)'
    }
 }, 23.3, 18.3, 13.9, 9.6] 
```

我的时间序列不规则间隔：

```
 data: [
        [Date.UTC(2013, 3, 14, 00, 10), 5],
        [Date.UTC(2013, 3, 14, 00, 20), 15],
        [Date.UTC(2013, 3, 14, 00, 50), 10],
    ... 
```

我正在寻找一个解决方案，在第二个值上有一个符号，即 15
我尝试过`y: Date.UTC(2013, 3, 14, 00, 20), 15]`和其他一些“混合”但它不起作用......提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:30:10.193

你应该使用：

```
 data: [
        {
            x:Date.UTC(2013, 3, 14, 00, 10), 
            y:5,
            marker: {
                 symbol: 'url(http://www.highcharts.com/demo/gfx/sun.png)'
            }
        },{
            x:Date.UTC(2013, 3, 14, 00, 20), 
            y:15

        }] 
```

# android - 测量我的应用的网络使用情况

> ID：16011432
> 
> 赞同：2
> 
> 时间：2013-04-15T09:08:21.707
> 
> 标签：android, wireshark

自然地，我想将我的 android 应用程序的网络使用率保持在尽可能低的水平，问题是如何衡量它。我设法用tcpdump捕获流量并在wireshark中打开它，这是要走的路吗？我几乎不知道wireshark中的所有东西意味着什么，显然我必须阅读它，我只是想问一下是否有专门用于上述目的的教程或工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:21:39.517

[在这里](http://www.edumobile.org/android/android-development/traffic-statistics-demo-android-tutorial/)，您有关于测量网络使用情况的非常简单的教程。

您也可以下载[此应用程序](http://www.xda-developers.com/android/check-your-network-in-real-time-with-network-traffic-monitor/)并尝试对其进行反编译并观看代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:13:31.453

尝试使用[TrafficStats](http://developer.android.com/reference/android/net/TrafficStats.html)来统计系统流量。

统计应用流量。如果您使用 HttpClient ，请尝试

```
HttpGet httpRequest = new HttpGet("http://xx.com/*");
HttpResponse response = httpClient.execute(httpRequest);
HttpEntity entity = response.getEntity();
int flowBytes = entity.getContentLength() ; //Traffic statistics 
```

如果您使用 URLConnection ，请尝试

```
URLConnection conn = imageUri.toURL().openConnection();
conn.setConnectTimeout(connectTimeout);
conn.setReadTimeout(readTimeout);
int flowBytes = conn.getContentLength() //Traffic statistics 
```

# javascript - 在 JavaScript 中使用 forEach 方法

> ID：16011434
> 
> 赞同：0
> 
> 时间：2013-04-15T09:08:23.263
> 
> 标签：javascript

forEach 方法是否设计为仅适用于 javascript 中的数组？任何人都可以分享有关使用 forEach() 方法可以完成哪些主要任务的想法或示例，还是仅对获取元素值和索引有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:11:17.460

不。

它旨在处理数组，但可以对任何类似数组的对象进行操作（尽管您仍然必须从它存在的地方访问它）。

例如，在 NodeList 上：

```
Array.prototype.forEach.call(
    document.getElementsByTagName('div'), 
    function (divElement) { console.log(divElement); }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:10:14.597

它是一个数组函数。查看[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

您*可以*在任何类似数组的对象上使用它，但这不是很方便，因为您必须使用`apply`or `call`。例如 ：

```
[].forEach.call("abc",function(v){console.log(v)}) 
```

要遍历对象键，您应该使用[for..in](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)：

```
for (key in object) {
    var value = object[key];
} 
```

请注意，jQuery 的兼容性函数[$.each](http://api.jquery.com/jQuery.each/)为数组和非数组对象启用了相同的迭代函数，但您通常知道您是否正在处理一个数组（或者您应该），所以我只使用它来与旧浏览器兼容。

# python - 小波谱

> ID：16011438
> 
> 赞同：1
> 
> 时间：2013-04-15T09:08:32.773
> 
> 标签：python, python-2.7, wavelet

我有一个 morlet 小波，它由平面波乘以高斯窗口和缩放参数 s 来描述。即python语言：

```
import numpy
f = 10
omega = 2*numpy.pi*f
x = numpy.linspace(-5,5,num=1000)
wavelet = numpy.exp(numpy.complex(0,1)*omega*x/s) * numpy.exp(-1.0*(x/s)**2/2.0) 
```

通常将小波的缩放参数（也称为“级别”）加倍使其带宽减半。绘制上述不同尺度的小波的 FFT `s = 2**i`，其中 i=1,2,3，...对于后续 i，宽度不会减半。

morlet 小波有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:43:36.817

您提供的上述代码看起来（*在我看来*）好像没有正确构造 Morlet 小波。论文[A Practical Guide to Wavelet Analysis](http://paos.colorado.edu/research/wavelets/bams_79_01_0061.pdf)为小波变换的构建提供了很好的指导，并且应该解释改变小波尺度的影响。

请注意，根据您的实现，更改小波比例*不会*更新/更改用于创建小波的 FFT 的比例。通常，先构造 FFT，然后将其用于构造 Descreet 小波变换。因此，改变小波尺度不会影响底层的 FFT。

我希望这有帮助。

# c# - 将十六进制字符串转换为数字类型并返回

> ID：16011441
> 
> 赞同：2
> 
> 时间：2013-04-15T09:08:43.047
> 
> 标签：c#, hex, byte, int32

我需要一个函数将格式`0xFFFF`（2 字节）的十六进制值转换为十进制（无符号和有符号）。

例如：

`0xFFFE`是`65534` （无符号）
`0xFFFE`是`-2` （有符号）

**对于4 Bytes 和 1 Byte**我也需要同样的东西。

所有这些选项（3 * 2 个选项）我需要转换回来 - 从十进制到十六进制（总共 12 个选项）。

我的功能应该是这样的：

```
 string Myconverter(int ByteSize, bool IsFromHextoDecimal, bool IsSigned)
    {
        ...
    } 
```

如果有执行这些转换的内置功能，我想要一个参考/链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:16:44.557

使用`Convert`类中的方法将字符串解析为数字。要解析无符号的 2 字节值，请使用该`ToUInt16`方法，并指定基数 16：

```
ushort value = Convert.ToUInt16("0xFFFF", 16); 
```

将这些方法用于其他格式：

```
ToInt16  = signed 2 byte
ToUInt32 = unsigned 4 byte
ToInt32  = signed 4 byte
ToByte   = unsigned 1 byte
ToSByte  = signed 1 byte 
```

要将数字格式化为十六进制字符串，您可以使用`X`格式（或`x`获取小写字母）并指定位数：

```
string formatted = value.ToString("X4"); 
```

然而，这将没有`0x`前缀，所以如果你想要你必须添加它：

```
string formatted = "0x" + value.ToString("X4"); 
```

# itunes - 与财务报告相比，我的 iTunes 销售报告不正确

> ID：16011445
> 
> 赞同：0
> 
> 时间：2013-04-15T09:08:49.737
> 
> 标签：itunes, app-store-connect, itunes-store

每个月我都会使用他们的 java 库从 iTunes 下载销售报告。这些数据保存在我的数据库中。

报告包含字段数，我曾经将**developer_proceeds**字段保存为我的收入。但是当我查看财务报告时，金额差异很大。出于这个原因，我仔细检查了我的报告。首先，我查看 3 月份的销售报告。在我从“付款和财务报告”收入选项卡中检查后。但这份报告包含一些额外的内容。

如果有人知道这件事，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T02:59:36.427

您是否将国际汇率应用于您的 developer_proceed 字段？这可能会导致金额的巨大差异。

如果您正在进行汇率转换，由于汇率变化很大，仍然会有很小的差异，并且很可能与创建销售报告并转换它时与 Apple 转换数字时有所不同削减你的支票。

# javascript - HTML 工具提示 jQuery CSS

> ID：16011446
> 
> 赞同：-3
> 
> 时间：2013-04-15T09:08:54.363
> 
> 标签：javascript, jquery, html, css

我有一些文字，并突出显示了某些单词。当我将鼠标悬停在相应的文本上时，我希望图像（主要是 gif）显示为一种“工具提示”。对于我突出显示的每个单词，我想使用不同的 gif。

如果我将 CSS 与`a:hover`and一起使用`background-image`，整个布局就会变得混乱。我也尝试了 jQuery & qTip，但我没有找到图像的解决方案。

如果可以的话，最完美的解决方案是：

```
<a href="#" title="" src="1y2m_small.png">1st year, 2nd month</a> 
```

`src`我想出现在工具提示中的图像在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:24:18.237

尝试一点 jQuery：

```
$('a').hover(
    function(){
        $(this).append('<img src="' + $(this).attr('src') + '" />');
    },
    function(){
        $(this).children('img').remove();
    }
); 
```

需要 CSS：

```
a{
    position: relative;
}
img{
    position: absolute;
    top: 20px;
    left: 0; //position how you want
} 
```

[这](http://jsfiddle.net/8wb9P/)是一个工作的jsFiddle

**来源**

[.hover() - jQuery API](http://api.jquery.com/hover/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:52:13.447

在这里得到你的答案儿子。请检查我并为我+1

[http://jsfiddle.net/alaingoldman/ybQCd/4/](http://jsfiddle.net/alaingoldman/ybQCd/4/)

简单的

CSS

> #隐藏{显示：无；位置：绝对；}

HTML

> ```
> <span id="target" > Hover over me </span>
> <img id="hide"  src="http://oi45.tinypic.com/33tjd3d.jpg"> 
> ```

jQuery

> $(document).bind('mousemove', function(e){ $('#hide').css({ left: e.pageX + 20, top: e.pageY }); $("#target") .hover( 函数 () { $("#hide").show(); }, 函数 () { $("#hide").hide(); });});

# jquery - iOS 和 PhoneGap 的 SAML 2.0 单次注销 (SLO) 问题

> ID：16011447
> 
> 赞同：0
> 
> 时间：2013-04-15T09:08:58.943
> 
> 标签：jquery, ios, cordova, sap, saml-2.0

我正在使用 Phonegap 和 jQuery AJAX 调用来执行注销，如下所示

```
$.ajax({
url: logoutURL,
type: "POST",
data: {},
cache: false,
success: function(data, textStatus, jqXHR){........},
error: function(jqXHR, textStatus, errorThrown){                

        alert("Logout Failed.");

    $.mobile.hidePageLoadingMsg();
    enableAllButtons(); 
}
}); 
```

注销 URL 是 SAML 2.0 单次注销 (SLO) URL。我已经在 Android 上进行了测试，它运行良好。但是当我在 ios 特别是 iPad ios 6.1.3 上尝试 SLO 时，它会失败并返回一个 http 0。

我刚刚从 IDP 日志中发现，对于 android，它有“客户端证书错误，IP 地址”的警告，但它会自动尝试在没有受信任证书的情况下创建传出 SSL 连接。另一方面，在 iOS 上，发出签名断言后它不会继续连接。

我怎样才能解决这个问题，或者有没有办法绕过证书问题？

感谢所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:48:36.307

这听起来不标准，所以我认为你最好的办法是与 IDP 提供商交谈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:02:50.160

我发现问题是 iOS 无法调用 https ajax 调用自签名证书。这似乎是一个 SDK 限制，您将需要一个插件或在您的 appdelegate.m 中添加以下代码

```
@implementation NSURLRequest(DataController)

+ (BOOL)allowsAnyHTTPSCertificateForHost:(NSString *)host
{
    return YES; 
}
@end 
```

我发现这篇文章很有帮助[，在 iOS 中使用 PhoneGap 的 Ajax https 调用不起作用？](https://stackoverflow.com/questions/9276643/ajax-https-call-in-ios-using-phonegap-not-working/9843315#9843315)

然后它神奇地起作用了。

# sorting - XSLT：对嵌套节点进行排序和限制

> ID：16011449
> 
> 赞同：0
> 
> 时间：2013-04-15T09:09:06.363
> 
> 标签：sorting, limit, xslt-1.0

**XML:**

```
<node>
  <node date="01-01-2002">Node</node>
  <node date="01-01-2005">Node</node>
  <node date="01-01-2001">Node</node>
  <node date="01-01-2003">Node</node>
  <node date="01-01-2006">Node</node>
  <node>
    <node date="01-01-2000">Node</node>
    <node date="01-01-2007">Node</node>
  </node>
  <node date="01-01-2004">Node</node>
</node> 
```

**问题：**
我需要按日期排序并获取有限数量的排序节点。需要能够穿越任意数量的关卡。

**要求的结果：**

```
<p>01-01-2000</p>
<p>01-01-2001</p>
<p>01-01-2002</p>
<p>01-01-2003</p>
<p>01-01-2004</p> 
```

**假设：**
对于按日期排序，我使用返回时间戳的 c# 扩展方法：

```
<xsl:sort select="cs:formatDate(@date)" order="ascending" data-type="number" /> 
```

限制为 5 个最旧的节点。
顺序：升序
XSLT 1.0

**编辑：** 根据要求，这是我到目前为止的位置：我可以对非嵌套节点进行排序和限制：

```
<xsl:template match="node">

  <xsl:apply-templates select="node">
    <xsl:sort select="cs:formatDate(@date,'dd-MM-yyyy','timestamp')" order="ascending" data-type="number" />
    <xsl:with-param name="limit" select="5"/>
  </xsl:apply-templates>

</xsl:template>

<xsl:template match="node[@date]">
  <xsl:param name="limit" />
  <xsl:if test="position() &lt; $limit+1">
    <h5><xsl:value-of select="@date"/></h5>
  </xsl:if>
</xsl:template> 
```

或者当我尝试如下申请嵌套时，我得到的嵌套节点是单独排序的，我不能再以同样的方式限制它们：

```
<xsl:template match="*">

    <xsl:apply-templates select="node[@date]">
      <xsl:sort select="cs:formatDate(@date,'dd-MM-yyyy','timestamp')" order="ascending" data-type="number" />
    </xsl:apply-templates>
    <xsl:apply-templates select="node[not(@date)]">
    </xsl:apply-templates>

</xsl:template>

<xsl:template match="node[@date]">
  <h5><xsl:value-of select="@date"/></h5>
</xsl:template>

<xsl:template match="node[not(@date)]">
  <xsl:apply-templates select="node[@date]">
    <xsl:sort select="cs:formatDate(@date,'dd-MM-yyyy','timestamp')" order="ascending" data-type="number" />
  </xsl:apply-templates>
  <xsl:apply-templates select="node[not(@date)]">
  </xsl:apply-templates>
</xsl:template> 
```

**编辑：**

我认为这很明显，但可能不是：我需要在限制之前应用排序。例如：“获取最旧的五个”而不是：“从 xml 获取前五个节点，然后对它们进行排序”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:25:20.740

```
<xsl:template match="/">
    <xsl:apply-templates select="//node[@date]">
        <xsl:sort select="concat(substring-after(substring-after(@date,'-'),'-'),substring-before(substring-after(@date,'-'),'-'),substring-before(@date,'-'))" order="ascending" data-type="number" />
        <xsl:with-param name="start" select="1"/>
        <xsl:with-param name="end" select="5"/>
    </xsl:apply-templates>
</xsl:template>

<xsl:template match="node">
    <xsl:param name="start" />
    <xsl:param name="end" />
    <xsl:if test="position() &gt;= $start and position() &lt;= $end">
        <p>
            <xsl:value-of select="@date"/>
        </p>
    </xsl:if>
</xsl:template> 
```

# bash - 回车不会删除以前的值

> ID：16011450
> 
> 赞同：2
> 
> 时间：2013-04-15T09:09:06.503
> 
> 标签：bash, return

我正在尝试在一个终端行中显示一些数据。此数据包含文件编号和路径。我正在使用以下代码来做到这一点：

```
#!/bin/bash 
echo
find . -type f | while read a;
do
sleep 1s;
echo -ne "$a\r";
done 
```

问题是，实际线路并不清楚前一个。目录包含以下文件`aaa.aaa`，`bbbb.bbbbb`输出`cccc.cccccccccccccccc`顺序如下：

```
./cccc.cccccccccccccccc
./aaa.aaacccccccccccccc
./bbbb.bbbbbccccccccccc 
```

我希望它是：

```
./cccc.cccccccccccccccc
./aaa.aaa
./bbbb.bbbbb 
```

我应该怎么做才能清除线路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:12:01.407

`\033[K`在后面加一个`\r`：

```
echo -ne "$a\r\033[K"; 
```

这是擦除当前行上从光标位置到行尾的所有内容的控制序列。

# c# - 如何将 InsertCommand 参数设置为函数调用？

> ID：16011460
> 
> 赞同：3
> 
> 时间：2013-04-15T09:09:44.113
> 
> 标签：c#, postgresql, ado.net, postgis, dataadapter

我正在开发一个使用 PostgreSQL 数据库和 PostGIS 扩展的 GIS 应用程序。我已经为整个项目创建了数据访问逻辑，除了几何值插入之外一切正常。

我必须将几何值作为函数调用传递：

```
INSERT INTO mygeotable (id, name, geom) VALUES 
    (1, "MyName", ST_GeomFromText('POINT(755888.4156 112458.556)', 23700)) 
```

如您所见，我必须为列值调用**ST_GeomFromText** PostGIS 函数。此列是 ADO.NET 视图中的字符串值，但不能将其设置为.`INSERT``geom``geom``INSERT`

我认为 ADO.NET 会自动以`INSERT`这种方式格式化我的命令：

```
INSERT INTO mygeotable (id, name, geom) VALUES 
    (1, "MyName", "ST_GeomFromText('POINT(755888.4156 112458.556)', 23700)") 
```

由于引号，这是错误的！

如何设置`INSERT`命令的`geom`参数以使用`ST_GeomFromText`函数调用？

我为每一列使用参数。InsertCommand CommandText 是：

```
INSERT INTO mygeotable (id, name, geom) VALUES (id, name, geom) 
```

几何参数 DbType 是字符串。函数调用没有 DbType！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:03:10.063

将参数作为数字传递给函数，而不是传递整个函数调用：

```
INSERT INTO mygeotable (id, name, geom) VALUES
    (id, name, ST_GeomFromText('POINT(X Y)', Z)) 
```

顺便说一句，像 in 这样的双引号`"MyName"`不会生成有效的字符串，因为它们是为标识符保留的。字符串应该用单引号括起来。

# javascript - 使用Javascript中的另一个数组对数组进行排序

> ID：16011462
> 
> 赞同：1
> 
> 时间：2013-04-15T09:09:48.680
> 
> 标签：javascript, arrays

我有一个这样的数组：

```
[1, Stopped]
[2, Waiting]
[3, Finished]
[4, Stopped]
[5, Running] 
```

数字是程序的id，文本是程序的状态。我需要根据下一个顺序对该数组进行排序：

```
['Error','Halted','Blocked','Finished','Waiting to Start','Waiting','Stopping','Running','Idle','Stopped','Opened','Ready']; 
```

谁能告诉我如何使用预定义的顺序对数组进行排序？

它适用于除 IE8 之外的所有不同浏览器。谁能告诉我如何在 IE8 中对其进行排序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:13:32.503

你可以使用这个：

```
if (typeof Array.prototype.indexOf !== 'function') {
    Array.prototype.indexOf = function (el) {
        for (var i = 0; i < this.length; i += 1) {
            if (this[i] === el) return i;
        }
        return -1;
    }
}

var a = [[1, 'Stopped'],
[2, 'Waiting'],
[3, 'Finished'],
[4, 'Stopped'],
[5, 'Running']];
var order = ['Error','Halted','Blocked','Finished','Waiting to Start','Waiting','Stopping','Running','Idle','Stopped','Opened','Ready'];

a.sort(function (a, b) {
   return order.indexOf(a[1]) - order.indexOf(b[1]);
}); 
```

# mobile - RMS j2me 中提交更改的文件夹

> ID：16011466
> 
> 赞同：0
> 
> 时间：2013-04-15T09:10:05.117
> 
> 标签：mobile, java-me, rms

我在模拟器设置中提到了文件夹名称（提交 RMS 更改），但我的问题是：

这样的文件夹在真实手机上是否可用？

# android - 在片段屏幕中不断加载一次又一次？

> ID：16011470
> 
> 赞同：0
> 
> 时间：2013-04-15T09:10:14.757
> 
> 标签：android, android-fragments

我已经显示了在网格中显示的项目列表，并且数据来自 webservice 。当我单击它需要进入新屏幕的项目时，但是当从这个屏幕来到具有 Grid 的屏幕时，布局被重新创建，但我想像活动一样保存实例，这样屏幕就不会再次创建。我能做些什么来实现这一目标？

```
public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            mfragmentManager = getActivity().getSupportFragmentManager();
                mhandler=new Handler(this);
            mLvAllDeals = (GridView) mview.findViewById(R.id.xLvAllDeals);
            mLvAllDeals.setCacheColorHint(0);
            mLvAllDeals.setOnItemClickListener(this);

                    new MyDealsAsyncTask().execute();
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                mAlDealName = new ArrayList<AllDealsData>();
    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
         if(arg0==mLvAllDeals)
{
             position = arg2;

                        AllDealsData bean;

                            bean = mAlDealName.get(position);

                            Fragment frag = getFragmentManager().findFragmentById(R.id.inner_content2);
                            FragmentTransaction ft = getFragmentManager().beginTransaction();
                            ft.setCustomAnimations(R.anim.slide_in_right, R.anim.slide_out_left, R.anim.slide_in_left, R.anim.slide_out_right);
                            if (!frag.getTag().equals("dealsinfo")) 
                            {
                                Bundle args = new Bundle();
                                args.putString("dealid", bean.getId());
                                mdealinfo.setArguments(args);
                                ft.replace(R.id.inner_content2, mdealinfo, "dealsinfo");
                                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
                                ft.addToBackStack(null);
                                ft.commit();
                            }

        }
}
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:17:58.080

分片执行事务时，`onCreateView()`会`onActvityCreated()`再次调用，但不会调用`onCreate()`方法。`onCreate()`所以在方法中维护数据。如果数据已经加载，直接设置到适配器以及加载 web 服务数据使用一些额外的标志来管理它。

有关片段生命周期的更多信息，请参阅此[链接](http://marakana.com/s/post/1250/android_fragments_tutorial)

# oracle11g - 显示下划线和点之间的数字

> ID：16011474
> 
> 赞同：0
> 
> 时间：2013-04-15T09:10:35.493
> 
> 标签：oracle11g

在甲骨文中

我想显示下划线和点之间的数字

例如： pSE1001335806_ **17950** .dat 所以列将 = 17950

但是对于： pSE1001311462_ **4558** .dat 该列将是 = 4558

我怎样才能做到这一点？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:44:45.450

单程：

```
select regexp_replace('pSE1001335806_17950.dat','.*_([0-9]+).dat','\1') from dual 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:38:30.233

您可以为此使用正则表达式；如果您可以将其概括为第二个字母数字字符块，那么这个简单的东西就可以了：

```
regexp_substr(<value>, '([[:alnum:]]+)', 1, 2) 
```

使用 CTE 生成样本值：

```
with files as
(
    select 'pSE1001335806_17950.dat' as filename from dual
    union all select 'pSE1001311462_4558.dat' from dual
)
select regexp_substr(filename, '([[:alnum:]]+)', 1, 2)
from files;

REGEXP_SUBSTR(FILENAME,'([[:ALNUM:]]+)',1,2)
--------------------------------------------------------------------------------
17950
4558 
```

# sql-server - 操作数类型冲突：int 与 sqlsever 2012 中的 uniqueidentifier 不兼容

> ID：16011475
> 
> 赞同：1
> 
> 时间：2013-04-15T09:10:38.690
> 
> 标签：sql-server

当我试图执行这个存储过程时，我面临一个错误 int is int is incompatable with uniqueidentifier.my userid coloumn is bigint

使用 [iFlipOut_Dev] 去 / *******对象：StoredProcedure [dbo].[SaveRegistration] 脚本日期：2013 年 4 月 14 日下午 3:29:40******** / SET ANSI_NULLS ON SET QUOTED_IDENTIFIER ON GO***

 ***```
ALTER PROCEDURE [dbo].[SaveRegistration]  
(
   @p_UserId int,
   @p_FirstName nvarchar(150),
   @p_LastName nvarchar(50),
   @p_Gender nvarchar(10),
   @p_Email nvarchar(150),
   @p_Mobile nvarchar(12),
   @p_Phone nvarchar(12),
   @p_DateOfBirth nvarchar(50),
   @p_Address nvarchar(250),
   @p_ZipCode nvarchar(10),
   @p_City nvarchar(100),
   @p_StateId smallint,
   @p_LoginId int,
   @p_UserStatusId smallint,
   @p_LanguageId smallint,
   @p_ModifiedBy bigint,
   @p_CountryId smallint,
   @p_UserImage nvarchar(20),
   @p_publicRegistrationId nvarchar(50),
   @p_TimeZone_Id smallint

   )
AS 
   BEGIN

      SET  NOCOUNT  ON

      IF 
         CASE 
            WHEN EXISTS 
               (
                  SELECT 
                     UD.UserId, 
                     UD.FirstName, 
                     UD.LastName, 
                     UD.Gender, 
                     UD.email, 
                     UD.Mobile, 
                     UD.phone, 
                     UD.DateOfBirth, 
                     UD.Address, 
                     UD.ZipCode, 
                     UD.City, 
                     UD.StateId, 
                     UD.LoginId, 
                     UD.UserStatusId, 
                     UD.LanguageId, 
                     UD.ModifiedBy, 
                     UD.ModifiedDate, 
                     UD.CountryId, 
                     UD.UserImage, 
                     UD.PublicRegistrationId, 
                     UD.TimeZone_Id,
                     UD.IsActivated
                  FROM dbo.UserDetails as UD
                  WHERE UD.UserId = @p_UserId
               ) THEN 1
            ELSE 0
         END <> 0
         /*
         *  Added UserId Coloumn to be inserted in the table
         */

         UPDATE dbo.UserDetails
            SET 
               FirstName = @p_FirstName, 
               LastName = @p_LastName, 
               Gender = @p_Gender, 
               Email = @p_Email, 
               Mobile = @p_Mobile, 
               Phone = @p_Phone, 
               DateOfBirth = @p_DateOfBirth, 
               Address = @p_Address, 
               ZipCode = @p_ZipCode, 
               City = @p_City, 
               StateId = @p_StateId, 
               LoginId = @p_LoginId, 
               UserStatusId = @p_UserStatusId, 
               LanguageId = @p_LanguageId, 
               ModifiedBy = @p_ModifiedBy, 
               ModifiedDate = isnull(getdate(), getdate()), 
               CountryId = @p_CountryId, 
               UserImage = @p_UserImage, 
               PublicRegistrationId=@p_publicregistrationId,
               TimeZone_Id = @p_TimeZone_Id

         WHERE UserDetails.UserId = @p_UserId
      ELSE 
         BEGIN

            /*
            *  added userid coloumn in the insert statement
            */

            INSERT dbo.UserDetails(
               dbo.UserDetails.FirstName, 
               dbo.UserDetails.LastName, 
               dbo.UserDetails.Gender, 
               dbo.UserDetails.email, 
               dbo.UserDetails.Mobile, 
               dbo.UserDetails.Phone, 
               dbo.UserDetails.DateOfBirth, 
               dbo.UserDetails.Address, 
               dbo.UserDetails.ZipCode, 
               dbo.UserDetails.City, 
               dbo.UserDetails.StateId, 
               dbo.UserDetails.LoginId, 
               dbo.UserDetails.UserStatusId, 
               dbo.UserDetails.LanguageId, 
               dbo.UserDetails.ModifiedBy, 
               dbo.UserDetails.ModifiedDate, 
               dbo.UserDetails.CountryId, 
               dbo.UserDetails.UserImage, 
               dbo.UserDetails.PublicRegistrationId, 
               dbo.UserDetails.TimeZone_Id)

               VALUES (
                  @p_FirstName, 
                  @p_LastName, 
                  @p_Gender, 
                  @p_Email, 
                  @p_Mobile, 
                  @p_Phone, 
                  @p_DateOfBirth, 
                  @p_Address, 
                  @p_ZipCode, 
                  @p_City, 
                  @p_StateId, 
                  @p_LoginId, 
                  @p_UserStatusId, 
                  @p_LanguageId, 
                  @p_ModifiedBy, 
                  isnull(getdate(), getdate()), 
                  @p_CountryId, 
                  @p_UserImage, 
                  newid(), 
                  @p_TimeZone_Id)

            SET @p_UserId = scope_identity()

         END

      SELECT @p_UserId AS UserId

   END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:21:45.443

是的。Int 和 GUID 数据类型不兼容。您能否指定发生错误的确切位置。

我也很少重写你的 sp -

```
ALTER PROCEDURE [dbo].[SaveRegistration]  
(
   @p_UserId int,
   @p_FirstName nvarchar(150),
   @p_LastName nvarchar(50),
   @p_Gender nvarchar(10),
   @p_Email nvarchar(150),
   @p_Mobile nvarchar(12),
   @p_Phone nvarchar(12),
   @p_DateOfBirth nvarchar(50),
   @p_Address nvarchar(250),
   @p_ZipCode nvarchar(10),
   @p_City nvarchar(100),
   @p_StateId smallint,
   @p_LoginId int,
   @p_UserStatusId smallint,
   @p_LanguageId smallint,
   @p_ModifiedBy bigint,
   @p_CountryId smallint,
   @p_UserImage nvarchar(20),
   @p_publicRegistrationId nvarchar(50),
   @p_TimeZone_Id smallint

   )
AS BEGIN

      SET  NOCOUNT  ON

      IF EXISTS (
            SELECT 1
            FROM dbo.UserDetails UD
            WHERE UD.UserId = @p_UserId
        ) BEGIN

         UPDATE dbo.UserDetails
            SET 
               FirstName = @p_FirstName, 
               LastName = @p_LastName, 
               Gender = @p_Gender, 
               Email = @p_Email, 
               Mobile = @p_Mobile, 
               Phone = @p_Phone, 
               DateOfBirth = @p_DateOfBirth, 
               Address = @p_Address, 
               ZipCode = @p_ZipCode, 
               City = @p_City, 
               StateId = @p_StateId, 
               LoginId = @p_LoginId, 
               UserStatusId = @p_UserStatusId, 
               LanguageId = @p_LanguageId, 
               ModifiedBy = @p_ModifiedBy, 
               ModifiedDate = getdate(), 
               CountryId = @p_CountryId, 
               UserImage = @p_UserImage, 
               PublicRegistrationId=@p_publicregistrationId,
               TimeZone_Id = @p_TimeZone_Id
         WHERE UserDetails.UserId = @p_UserId

      END
      ELSE BEGIN

            INSERT dbo.UserDetails(
               FirstName, 
               LastName, 
               Gender, 
               email, 
               Mobile, 
               Phone, 
               DateOfBirth, 
               Address, 
               ZipCode, 
               City, 
               StateId, 
               LoginId, 
               UserStatusId, 
               LanguageId, 
               ModifiedBy, 
               ModifiedDate, 
               CountryId, 
               UserImage, 
               PublicRegistrationId, 
               TimeZone_Id)
            SELECT
                  @p_FirstName, 
                  @p_LastName, 
                  @p_Gender, 
                  @p_Email, 
                  @p_Mobile, 
                  @p_Phone, 
                  @p_DateOfBirth, 
                  @p_Address, 
                  @p_ZipCode, 
                  @p_City, 
                  @p_StateId, 
                  @p_LoginId, 
                  @p_UserStatusId, 
                  @p_LanguageId, 
                  @p_ModifiedBy, 
                  getdate(), 
                  @p_CountryId, 
                  @p_UserImage, 
                  newid(), 
                  @p_TimeZone_Id

            SELECT @p_UserId = scope_identity()

         END

      SELECT @p_UserId AS UserId

   END 
```

清理意味着：

```
IF 
         CASE 
            WHEN EXISTS 
               (
                  SELECT 
                     UD.UserId, 
                     UD.FirstName, 
                     UD.LastName, 
                     UD.Gender, 
                     UD.email, 
                     UD.Mobile, 
                     UD.phone, 
                     UD.DateOfBirth, 
                     UD.Address, 
                     UD.ZipCode, 
                     UD.City, 
                     UD.StateId, 
                     UD.LoginId, 
                     UD.UserStatusId, 
                     UD.LanguageId, 
                     UD.ModifiedBy, 
                     UD.ModifiedDate, 
                     UD.CountryId, 
                     UD.UserImage, 
                     UD.PublicRegistrationId, 
                     UD.TimeZone_Id,
                     UD.IsActivated
                  FROM dbo.UserDetails as UD
                  WHERE UD.UserId = @p_UserId
               ) THEN 1
            ELSE 0
         END <> 0 
```

可以优化到：

```
 IF EXISTS (
            SELECT 1
            FROM dbo.UserDetails UD
            WHERE UD.UserId = @p_UserId
        ) BEGIN 
```***

# html - 960 网格系统 - 难以实现所需的布局

> ID：16011479
> 
> 赞同：0
> 
> 时间：2013-04-15T09:10:44.603
> 
> 标签：html, css, 960.gs

我目前正在设计我的网页的一部分，但在定位联系人卡片时遇到了困难，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/98OcF.jpg)

目前，由于以下标记结构，第二列联系人卡片未垂直对齐。这`<h2 class="text200 margbottom margtop">Contact Us</h2>`是垂直向下“推动”第一个网格 4 中的其他 2 张接触卡，但当然这不会发生在第二个网格 4 中，因为不`<h2>`存在。有没有办法通过修改我的 HTML 标记将联系人卡片定位在相同的高度，以便它们水平对齐，如上图所示？

这是链接：[http ://www.bestcastleintown.co.uk/pg/](http://www.bestcastleintown.co.uk/pg/)

```
<div class="grid_4">
    <h2 class="text200 margbottom margtop">Contact Us</h2>
    <div class="contact_block_tiny trophy clearfix">
    <!-- content -->
    </div>
    <div class="contact_block_tiny target clearfix">
    <!-- content -->                                                
    </div>
</div>      
<div class="grid_4 omega">
    <div class="contact_block_tiny drink clearfix">     
    <!-- content -->                                    
    </div>
    <div class="contact_block_tiny editorial clearfix"> 
    <!-- content -->                                        
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:13:46.380

“联系我们”是第一列的标题还是两列的标题？如果它是两列的标题，那么为什么将它放在第一列中？那不是它在语义上所属的地方，因此会破坏您的布局。

# jsf - 如何禁用或启用一组组件

> ID：16011481
> 
> 赞同：2
> 
> 时间：2013-04-15T09:10:52.323
> 
> 标签：jsf, primefaces

是一次禁用或启用一组组件的任何方式。例如：我想禁用整个表单，它又具有几个 InputTexts，Dropdowns，......我希望能够一次禁用或启用所有它们。

怎么做？而不是使用布尔变量并将 disable="#{boolean variable} 添加到所有组件。有没有其他方法可以将它们全部放在一个组件中并使其启用或禁用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-14T10:12:37.353

正如@Kukeltje 在类似的问题中告诉我的那样：“对于每个 jsf 的较新版本，请检查[massAttribute](http://showcase.omnifaces.org/taghandlers/massAttribute)（来自omnifaces）”。

在我意识到我使用自己的代码一次禁用一组组件之前。这是我的代码，但我建议使用前面所说的“massAttribute”：

```
public class UtilsPrimefaces { 

/**
 * Disable all the children components
 * @param uiComponentName
 */
public static void disableUIComponent(String uiComponentName) {  
    UIComponent component = FacesContext.getCurrentInstance()  
            .getViewRoot().findComponent(uiComponentName);
    if(component!=null) {
        disableAll(component.getChildren());
    } 
}  

/**
 * Recursive method to disable the list
 * @param components Widget PD list
 */
private static void disableAll(List<UIComponent> components) {  

    for (UIComponent component : components) {  
        logger.info(component.getClass().getTypeName());            

        if (component instanceof InputText) {  
            ((InputText) component).setDisabled(true);

        } else if (component instanceof InputNumber) {  
            ((InputNumber) component).setDisabled(true);

        } else if (component instanceof InputTextarea) {  
            ((InputTextarea) component).setDisabled(true);

        }  else if (component instanceof HtmlInputText) {  
            ((HtmlInputText) component).setDisabled(true);

        }  else if(component instanceof SelectOneMenu) {  
            ((SelectOneMenu) component).setDisabled(true);

        } else if(component instanceof SelectBooleanCheckbox) {  
            ((SelectBooleanCheckbox) component).setDisabled(true);

        } else if(component instanceof CommandButton) {  
            ((CommandButton) component).setDisabled(true);              
        }
        disableAll(component.getChildren());  
    }  
} 
```

然后你可以在你的豆子中使用它。这是一个具有 3 个滚动面板并且只想禁用面板 1 和面板 3 的页面的示例：

```
@PostConstruct
public void init() {        
    super.init();        
    Utils.disableUIComponent(":form:panel1");
    Utils.disableUIComponent(":form:panel3");
} 
```

这是[相关问题的链接](https://stackoverflow.com/questions/3152561/how-to-disable-page-form-in-jsf/46215566?noredirect=1#comment79394121_46215566)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-14T14:56:41.557

有很多方法可以做到这一点。如果您使用的是 primefaces，则可以使用`<p:blockUI />`组件。您可以自定义“禁用区域”的 css 样式。

查看官方演示：[https ://www.primefaces.org/showcase/ui/misc/blockUI.xhtml](https://www.primefaces.org/showcase/ui/misc/blockUI.xhtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T22:16:56.930

我见过几种不同的方法：

抛出 SystemEvent 时添加禁用属性： [https ://stackoverflow.com/a/15031242/1981358](https://stackoverflow.com/a/15031242/1981358)

创建一个自定义组件来环绕您的表单字段： [https ://stackoverflow.com/a/11453029/1981358](https://stackoverflow.com/a/11453029/1981358) [https://stackoverflow.com/a/9543826/1981358](https://stackoverflow.com/a/9543826/1981358)

正如 rags 所提到的，可以使用 PF blockUI，特别是如果您需要在客户端事件处理期间限制访问。

同样，您可以使用 jQuery 在页面上插入您自己的自定义“玻璃”，这将阻止任何点击（并且真的会惹恼您的用户）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:26:26.667

如果您只需要使它们不可点击，也许 javascript/jquery 就足够了吗？查看此[答案](https://stackoverflow.com/a/1414366/332248)以使用 jquery 禁用它们。

# ckeditor - CKEditor 内联编辑——添加提示文本

> ID：16011483
> 
> 赞同：2
> 
> 时间：2013-04-15T09:10:56.760
> 
> 标签：ckeditor

我正在使用 CKEditor 的内联编辑功能，但我想在控件的初始状态中添加一些提示文本，例如“单击此处编辑...”，但我希望删除该提示文本当用户单击控件开始键入时自动执行。这是可行的，还是有其他选择？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:48:43.980

在要编辑的元素上设置“占位符”属性并将此插件添加到您的 CKEditor 构建中：[http://ckeditor.com/addon/confighelper](http://ckeditor.com/addon/confighelper)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T13:02:07.933

你的问题是指：

*   [ckEditor 4.1 - 如何删除内联工具提示](https://stackoverflow.com/questions/15771455/ckeditor-4-1-how-do-i-remove-inline-tooltip/15790093#15790093)

*   [如何删除 CKEditor 4 在内联编辑时自动添加的“title”属性？](https://stackoverflow.com/questions/14730921/how-to-remove-the-title-attribute-that-the-ckeditor-4-add-automatically-on-inl)

*   [如何更改内联实例的标题 ckeditor 集？](https://stackoverflow.com/questions/14502142/how-can-i-change-the-title-ckeditor-sets-for-inline-instances/14548739)

*   [CKEditor 论坛帖子](http://ckeditor.com/forums/CKEditor/How-to-remove-the-title-attribute-that-the-CKEditor-4-add-automatically-on-inline)

...最后是在下一个主要版本（CKEditor 4.2）中解决上述问题[的票。](https://dev.ckeditor.com/ticket/10042)

# java - 如何处理重复提交表单？

> ID：16011491
> 
> 赞同：1
> 
> 时间：2013-04-15T09:11:30.977
> 
> 标签：java, jsp

如何处理用户可能不小心多次点击提交按钮的情况？如果发生这种情况，那么将在表中生成两行。如何避免。我在 JSP 工作。

还要避免`back`按钮和`refresh`页面导致在数据库中创建重复输入的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:19:10.800

几种方式：

1.  您可以使用 javascript 来禁止在提交按钮中单击两次，但如果用户在两次单击之间使用导航器的“后退”按钮，则它不起作用。

2.  在服务器端，您可以发送带有保存在用户会话中的唯一 id 的表单（也可以用于 CSRF 对策）。然后在提交表单时，您可以比较然后删除用户会话中的 id。注意并发访问会话（每个请求都有自己的线程）。

3.  在数据库中检测，但它取决于数据及其约束。第 2 点的一个扩展是将生成的表单 ID 保留在数据库中，并在第一次访问期间将其删除。这种方法的优点是在并发访问的情况下使用事务支持。

4.  如果表单更新数据库中的特定条目（行 ID 与表单一起发送），则可以认为问题已自行解决，因为它使用相同数据更新同一行两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:19:32.730

我建议永远不要过于依赖任何客户端。使用非常易于访问的工具，您几乎可以改变客户端强制执行的任何行为。如果您的应用程序在客户端失败后崩溃/具有未定义的行为，您应该更改您的应用程序。

您可以做的一件事是创建一个类，该类获取此 POST 产生的所有字段，覆盖它的 equals() 方法以尊重所有字段，在用户级别保存请求并将所有其他传入请求与请求列表进行比较您已经拥有该用户。

然后，您可以在成功处理请求对象后立即删除它们。

另一方面，如果您以某种方式再次获得用户相同的请求（通过在用户发布请求时查看“打开”请求列表），您可以忽略它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T09:17:20.770

第一个解决方案。禁用 sumbit 按钮 .. 如果可能，第二次检查一些唯一键...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T09:13:47.667

首先，在客户端，一旦用户单击按钮，就禁用该按钮。

其次，在服务器端，这种形式的某些信息将成为数据库表中的主键。因此，当插入数据时再次向服务器发送相同的信息时，您将得到一个异常，因为主键的值不能重复。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T09:14:05.680

如果您想 100% 确定提交按钮不能被点击两次，您可以在按钮的 onclick= 方法中的 javascript 中禁用它。

例如，在下面的 javascript (jquery) 中，如果按钮 id 是“发送”...

```
$('#send').click(function(e) {
    this.disabled = true;
    businessLogicCall();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T09:13:33.537

等待您不再接受按钮上的任何点击，例如禁用提交按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T09:15:41.043

禁用提交按钮，直到用户更改输入信息，从而表明他想提交另一部分信息。

# actionscript-3 - 无法引用按钮

> ID：16011493
> 
> 赞同：0
> 
> 时间：2013-04-15T09:11:38.487
> 
> 标签：actionscript-3, flash, animation, user-interface, actionscript

我正在尝试创建一个界面，允许用户单击按钮并将它们带到某些框架。

```
stop();

home_btn.onRelease {
    gotoAndStop(1);
}
graphics_btn.onRelease {
    gotoAndStop(3);
}
animation_btn.onRelease {
    gotoAndStop(2);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:26:09.923

如果您乐于在 Actionscript 2 而不是 Actionscript 3 中编写代码，那么您需要对现有代码进行的唯一修改是：

```
home_btn.onRelease = function() {
    gotoAndStop(1);
} 
```

其他两个按钮也一样，这是 AS2 的正确语法。

对于 AS3，您需要为按钮分配一个事件侦听器，以便在触发时执行函数：

```
home_btn.addEventListener(MouseEvent.CLICK, homeClick);

function homeClick(e:MouseEvent):void {
    gotoAndStop(1);
} 
```

# php - 如何实现带有 Rss 新闻提要的时事通讯系统？

> ID：16011494
> 
> 赞同：0
> 
> 时间：2013-04-15T09:11:42.860
> 
> 标签：php, mysql, rss, newsletter

我有一个包含每日新闻的新闻门户。我需要通过时事通讯向订阅者发送每日新闻。

我已经实现了一个 PHP/MySQL 自定义通讯系统，它执行以下任务：

*   获取每日新闻
*   获取想要时事通讯的用户列表
*   每晚通过 cronjob 我启动一个脚本，每 5 分钟执行一次上述操作，每个周期一次将时事通讯发送给 10 个收件人

**问题：**

1.  我必须估计这个 cronjob 需要运行多长时间才能完成完整的用户列表（5' x 10 封电子邮件）= 120Email/hours = TotalUsers/emailperhours = cronjob 需要运行的小时数我克服了这个问题，因为我直到现在还没有这么多用户，我仍然可以设法使 cronjob 运行得足以发送所有邮件，但是对于未来呢？

2.  所有电子邮件接收者都保存了双重选择加入，这意味着我很确定他们的存在，但是你可以想象我无论如何都会有很多邮件递送出于其他原因：在这里我需要帮助，因为我不知道如何捕捉通过 PHP 发送邮件并更新 MySQL 表以暂停这些不必要的发送。

**替代方案：**
我知道有许多提供时事通讯系统的提供商，但是每次你去编译你的静态电子邮件正文时，这都能正常工作。在这里，我需要每天生成一个动态的电子邮件正文，其中包含最新消息，然后将其发送给收件人。仍然在这里，我需要一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:01:00.620

您可能会发现使用像[SendGrid](http://sendgrid.com/docs/API_Reference/SMTP_API/substitution_tags.html)这样的服务是值得的——它们有一个处理动态内容的 API。我自己还没有在这方面进行过测试，但是对于他们收取的小额价格，这可能值得让您省去头疼的问题。

# youtube - Youtube 流 fmt_stream_map 质量

> ID：16011497
> 
> 赞同：3
> 
> 时间：2013-04-15T09:11:50.400
> 
> 标签：youtube, streaming

我通过解析“fmt 流图”得到 Stream URL，

问题是，如果我的视频时长不到 1 小时，我会得到以下信息：

```
{
"comment_count" = 1;
description = "";
"dislikes_num" = 0;
duration = "54:46";
"encrypted_id" = WWjNEyHrNsk;
"fmt_stream_map" =     (
            {
        "fallback_host" = "tc.v7.cache6.c.youtube.com";
        itag = 22;
        quality = hd720;
        type = "video/mp4; codecs=\"avc1.64001F, mp4a.40.2\"";
        url = "http://r4---sn-bvvbax-8pxl.c.youtube.com/videoplayback?sver=3&ipbits=8&itag=22&key=yt1&expire=1366039593&upn=phUk9-1Fjyw&signature=34CDFF5AAC4E5BB24177EAA001B5519E0218A04E.A437435FC87FD09D7AD95E0417A4EA77BC786C86&ms=au&mv=m&mt=1366015457&app=youtube_mobile&ip=85.127.44.131&fexp=906370%2C923120%2C932000%2C932004%2C906383%2C916911%2C916910%2C902000%2C901208%2C919512%2C929903%2C925714%2C931202%2C900821%2C900823%2C931203%2C906090%2C909419%2C908529%2C930807%2C919373%2C930803%2C906836%2C920201%2C929602%2C930101%2C930609%2C926403%2C900824&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&el=watch&newshard=yes&id=5968cd1321eb36c9&cp=U0hVS1BOV19OTUNONV9ISEFGOmh3anpiZHFRODBI&dnc=1&yms=izkxzhrL53I&source=youtube&ratebypass=yes";
    },
            {
        "fallback_host" = "tc.v14.cache4.c.youtube.com";
        itag = 18;
        quality = medium;
        type = "video/mp4; codecs=\"avc1.42001E, mp4a.40.2\"";
        url = "http://r4---sn-bvvbax-8pxl.c.youtube.com/videoplayback?sver=3&ipbits=8&itag=18&key=yt1&expire=1366039593&upn=phUk9-1Fjyw&signature=BCA6FFE2575EE8947CFF52E91D0C8896538E239F.33FE7FF507257A8F5161A1E4C80A101BE4EB693F&ms=au&mv=m&mt=1366015457&app=youtube_mobile&ip=85.127.44.131&fexp=906370%2C923120%2C932000%2C932004%2C906383%2C916911%2C916910%2C902000%2C901208%2C919512%2C929903%2C925714%2C931202%2C900821%2C900823%2C931203%2C906090%2C909419%2C908529%2C930807%2C919373%2C930803%2C906836%2C920201%2C929602%2C930101%2C930609%2C926403%2C900824&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&el=watch&newshard=yes&id=5968cd1321eb36c9&cp=U0hVS1BOV19OTUNONV9ISEFGOmh3anpiZHFRODBI&dnc=1&yms=izkxzhrL53I&source=youtube&ratebypass=yes";
    },
            {
        "fallback_host" = "tc.v3.cache3.c.youtube.com";
        itag = 36;
        quality = small;
        type = "video/3gpp; codecs=\"mp4v.20.3, mp4a.40.2\"";
        url = "http://r4---sn-bvvbax-8pxl.c.youtube.com/videoplayback?sver=3&ipbits=8&itag=36&key=yt1&expire=1366039593&upn=phUk9-1Fjyw&signature=8174E39396391843AFA940C30624A823E5275890.B323AA44059ED3928A47C4AEA1BC82F3C565F433&ms=au&mv=m&mt=1366015457&app=youtube_mobile&ip=85.127.44.131&fexp=906370%2C923120%2C932000%2C932004%2C906383%2C916911%2C916910%2C902000%2C901208%2C919512%2C929903%2C925714%2C931202%2C900821%2C900823%2C931203%2C906090%2C909419%2C908529%2C930807%2C919373%2C930803%2C906836%2C920201%2C929602%2C930101%2C930609%2C926403%2C900824&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&el=watch&newshard=yes&id=5968cd1321eb36c9&cp=U0hVS1BOV19OTUNONV9ISEFGOmh3anpiZHFRODBI&dnc=1&yms=izkxzhrL53I&source=youtube&ratebypass=yes";
    }
);
"length_seconds" = 3286;
"likes_num" = 7;
longform = 1;
playability = "PLAY_OK";
"player_type" = desktop;
"profile_url" = "/user/KapfenbergWebTV";
"public_name" = KapfenbergWebTV;
"thumbnail_for_watch" = "http://i.ytimg.com/vi/WWjNEyHrNsk/hqdefault.jpg?w=600&h=360&sigh=5t9yhLmY66cc2ZBb6gJyOaNOsRs";
"thumbnail_info" = "<null>";
"time_created_text" = "Feb  6, 2013";
title = "HiWay-TV Sendung 3 - 2013";
"user_image_url" = "//s.ytimg.com/yts/img/silhouette32-vflu0yzhs.png";
"view_count" = "1,593";
"watch_link" = "/watch?v=WWjNEyHrNsk";
} 
```

具有不同的品质。

但如果我的视频时长超过 1 小时，我只会得到小的质量，例如：

```
{
"comment_count" = 0;
description = "";
"dislikes_num" = 0;
duration = "1:00:47";
"encrypted_id" = taiK0WKSApg;
"fmt_stream_map" =     (
            {
        "fallback_host" = "tc.v1.cache6.c.youtube.com";
        itag = 36;
        quality = small;
        type = "video/3gpp; codecs=\"mp4v.20.3, mp4a.40.2\"";
        url = "http://r6---sn-bvvbax-8pxe.c.youtube.com/videoplayback?ratebypass=yes&fexp=906370%2C923120%2C932000%2C932004%2C906383%2C916911%2C916910%2C902000%2C901208%2C919512%2C929903%2C925714%2C931202%2C900821%2C900823%2C931203%2C906090%2C909419%2C908529%2C930807%2C919373%2C930803%2C906836%2C920201%2C929602%2C930101%2C930609%2C926403%2C900824&signature=9B83CFB7B240D7DA86E0ED4EC0DFFCFF4151D85B.81CBC92237B653BA3BF7E0E52A730B324EFD70A8&key=yt1&id=b5a88ad162920298&newshard=yes&mt=1366015334&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&mv=m&ms=au&ip=85.127.44.131&el=watch&yms=izkxzhrL53I&itag=36&upn=j7RXkiXzhRI&source=youtube&cp=U0hVS1BOV19OUkNONV9ISEFHOm13anpiZHFROTBN&expire=1366039698&ipbits=8&sver=3&dnc=1&app=youtube_mobile";
    }
);
"length_seconds" = 3647;
"likes_num" = 6;
longform = 1;
playability = "PLAY_OK";
"player_type" = desktop;
"profile_url" = "/user/KapfenbergWebTV";
"public_name" = KapfenbergWebTV;
"thumbnail_for_watch" = "http://i.ytimg.com/vi/taiK0WKSApg/hqdefault.jpg?w=600&h=360&sigh=6hxibWtgHUAnZzNL9bBYxIQRScU";
"thumbnail_info" = "<null>";
"time_created_text" = "Apr  3, 2013";
title = "HiWay-TV Sendung 07 2013";
"user_image_url" = "//s.ytimg.com/yts/img/silhouette32-vflu0yzhs.png";
"view_count" = 974;
"watch_link" = "/watch?v=taiK0WKSApg";

} 
```

有谁知道问题出在哪里？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-16T01:59:58.523

持续时间无关紧要。该视频支持多种格式和质量。您需要选择一个可用的。

我有一段关于 ITAG 的代码库，希望这能有所帮助。

```
function GetScreenTag(iTag: Byte): String;
begin
  case iTag of
    5:  Result := 'Low Quality, 240p, FLV, 400x240';
    17: Result := 'Low Quality, 144p, 3GP, 0x0';
    18: Result := 'Medium Quality, 360p, MP4, 480x360';
    22: Result := 'High Quality, 720p, MP4, 1280x720';
    34: Result := 'Medium Quality, 360p, FLV, 640x360';
    35: Result := 'Standard Definition, 480p, FLV, 854x480';
    36: Result := 'Low Quality, 240p, 3GP, 0x0';
    37: Result := 'Full High Quality, 1080p, MP4, 1920x1080';
    38: Result := 'Original Definition, MP4, 4096x3072';
    43: Result := 'Medium Quality, 360p, WebM, 640x360';
    44: Result := 'Standard Definition, 480p, WebM, 854x480';
    45: Result := 'High Quality, 720p, WebM, 1280x720';
    46: Result := 'Full High Quality, 1080p, WebM, 1280x720';
    82: Result := 'Medium Quality 3D, 360p, MP4, 640x360';
    84: Result := 'High Quality 3D, 720p, MP4, 1280x720';
    100: Result := 'Medium Quality 3D, 360p, WebM, 640x360';
    102: Result := 'High Quality 3D, 720p, WebM, 1280x720';
    else
      Result := 'NA';
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T08:27:16.297

它不取决于持续时间，它取决于可用的质量。如果质量可用，则解析 (url_encoded_fmt_stream_map) 块时存在问题。

您可以检查此块并将其内容与解析结果进行比较。“url_encoded_fmt_stream_map”：“......”

# perl - 无法更改这些权限 .CPAN

> ID：16011504
> 
> 赞同：2
> 
> 时间：2013-04-15T09:12:15.730
> 
> 标签：perl, permissions, installation, cpan

我想安装 CPAN 模块时遇到问题

我输入 `cpan`安装 cpan ，但我收到此错误：

> mkdir /home/cyrine/.cpan/CPAN: Permission >denied at /usr/share/perl/5.10/CPAN/Shell.pm line 656

如何更改这些权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:16:30.560

可能 CPAN 目录归 root 所有；您可以通过执行来检查这一点`ls -l /home/cyrine/.cpan`。

有两种方法可以解决这个问题：

1.  如果您对服务器具有 sudo 访问权限，请在安装和使用 CPAN 时使用它。

2.  删除或重命名整个 /home/cyrine/.cpan 目录（或者`mv ~/.cpan ~/.cpan-old`，或`rm -rf ~/.cpan`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:01:56.610

您的主目录似乎存在权限问题。也许其他人在您的主目录中安装了 Perl 模块，因此您不拥有这些文件夹？

如果您无法解决底层权限问题，有几种方法可以在没有 root 权限的情况下安装 Perl 模块。您可以使用它们在您有权访问的另一个位置安装模块。

[`Local::Lib`](http://search.cpan.org/~apeiron/local-lib-1.008009/lib/local/lib.pm)允许您维护您自己的本地 Perl 模块库，这些库安装在您的主目录中。[如果您还没有](http://search.cpan.org/~apeiron/local-lib-1.008009/lib/local/lib.pm#The_bootstrapping_technique)它，它会提供安装模块本身的说明。

[Perlbrew](http://perlbrew.pl/)是一个非常易于使用的工具，它允许您在主目录中维护自己的 Perl 单独安装（并安装模块）。

如果这还不够，请浏览[之前关于此问题的一些问题](https://stackoverflow.com/a/3736710/1919238)以了解更多信息。

# ios - 如何从 NSDecimal 获取 NSDecimalNumber 的值？

> ID：16011506
> 
> 赞同：1
> 
> 时间：2013-04-15T09:12:34.957
> 
> 标签：ios, nsdecimalnumber

我有一个对象数组，每个对象都有一个 NSDecimalNumber，称之为“大小”

对于数组中的每个对象，我将减去一个推荐的大小，称为 rSize。

然后我想进入生成的 NSDecimalNumber 并获取增量的值，并不关心它是正面还是负面结果。

我想我将使用返回 NSDecimal 结构的 decimalNumber 方法，所以问题是：结构中的哪个属性会给我增量值？

换种说法：一个 NSDecimal 代表一个 NSDecimalNumber，但是 NSDecimal 结构的哪个属性保存该值？

非常感谢罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:53:50.283

您的“delta”似乎是“rSize”与项目之间差异的绝对值。在这种情况下，您可以执行减法 ( `item – rSize`)，如果它完全在 内为负，则将其乘以 -1 `NSDecimalNumber`：

```
NSDecimalNumber *negativeOne = [NSDecimalNumber decimalNumberWithMantissa:1 
                                                                 exponent:0
                                                               isNegative:YES];
NSDecimalNumber *delta = [item decimalNumberBySubtracting:rSize];
if ([delta compare:[NSDecimalNumber zero]] == NSOrderedAscending) {
    delta = [delta decimalNumberByMultiplyingBy:negativeOne];
} 
```

然后使用`-compare:`生成的增量对象上的选择器对对象数组进行排序。

# mysql - 如何在 codeigniter 活动记录中正确使用 mysql MONTH() 和 YEAR()

> ID：16011507
> 
> 赞同：1
> 
> 时间：2013-04-15T09:12:35.453
> 
> 标签：mysql, codeigniter

我正在使用 Codeigniter Active Record 类尝试获取数据类型为 DATE 的列的月份和年份部分

```
$this->db->where('mo', 'MONTH(so_date)');
$this->db->where('yr', 'YEAR(so_date)'); 
```

上面的代码给了我这个。MONTH() 和 YEAR() 用单引号括起来。

```
SELECT *
FROM mytbl 
WHERE `mo` = 'MONTH(so_date)'
AND `yr` = 'YEAR(so_date)'

//so_date looks like this : 2013-04-15 
```

我在这里做错了什么或者我要改变什么以免得到引号？当我删除引号并尝试在 PHPMYADMIN 中运行它时，查询给出了我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:23:37.587

```
$this->db->where('mo = MONTH(so_date)'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:16:52.440

来自[文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

`$this->db->where()`接受可选的第三个参数。

如果您将其设置为 FALSE，CodeIgniter 将**不会尝试使用****反引号**保护您的字段或表名称。

```
$this->db->where('MATCH (field) AGAINST ("value")', NULL, FALSE); 
```

所以做类似的事情：

```
$this->db->where('mo', 'MONTH(so_date)' , FALSE); 
```

# xml - 有没有办法修复 xml 中元素的值？

> ID：16011510
> 
> 赞同：1
> 
> 时间：2013-04-15T09:12:44.467
> 
> 标签：xml

是否可以通过 xsd 将 xml 元素约束为“A”、“B”或“C”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:41:43.337

我不确定您是想将其限制为仅单个字母（但任何字母），还是仅限制为字母 A、B 或 C，但是是的，其中任何一个都是可能的：

```
<xs:element name="def">
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:enumeration value="A"/>
            <xs:enumeration value="B"/>
            <xs:enumeration value="C"/>
        </xs:restriction>
    </xs:simpleType>
</xs:element>
<xs:element name="ghi">
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:length value="1"/>
        </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

# wpf - WPF：ListView 中的图像未显示

> ID：16011513
> 
> 赞同：1
> 
> 时间：2013-04-15T09:13:09.317
> 
> 标签：wpf, image, listview, binding

我有一个 ListView，每行应该包含一个图像和文本。文本的绑定工作正常，但没有显示图像。

我的 XAML 标记：

```
<ListView Name="lvUpgrade">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="20px">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Image Source="{Binding Path=Icon}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Width="75px" DisplayMemberBinding="{Binding Path=Time, StringFormat={}{0:HH:mm:ss}}" />
            <GridViewColumn Width="300px" Header="Nachricht" DisplayMemberBinding="{Binding Path=Message}" />
        </GridView>
    </ListView.View>
</ListView> 
```

我背后的代码：

```
Public Class Upgrade

    Public Sub AddMessage(ByVal message As Message)
        Me.lvUpgrade.Items.Add(message)
    End Sub

    Public Class Message

        Public Enum MessageType

            Normal
            Information
            Warning
            [Error]
        End Enum

        Public Sub New(ByVal type As MessageType, ByVal message As String)
            _Type = type
            _Message = message
        End Sub

        Private _Type As MessageType = MessageType.Normal
        Public ReadOnly Property Type As MessageType
            Get
                Return _Type
            End Get
        End Property

        Private _Message As String = String.Empty
        Public ReadOnly Property Message As String
            Get
                Return _Message
            End Get
        End Property

        Private _Time As DateTime = Now
        Public ReadOnly Property Time As DateTime
            Get
                Return _Time
            End Get
        End Property

        Public ReadOnly Property Icon As System.Drawing.Image
            Get
                Select Case Me.Type
                    Case MessageType.Information
                        Return My.Resources.Information16
                    Case MessageType.Warning
                        Return My.Resources.Alert16
                    Case MessageType.Error
                        Return My.Resources.Error16
                    Case Else
                End Select

                Return Nothing
            End Get
        End Property
    End Class
End Class 
```

为了绑定图像，我使用了一个从本地资源返回图像的属性。我使用与文本相同的方式将图像绑定到控件。这是尝试错误还是为什么不起作用？

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:41:08.107

您必须将 转换`Image`为`BitmapImage`：

为此，您可以在单独的模块中定义以下扩展。这提供了在代码中的每个图像上使用函数的机会：

```
Module Extensions

  <Extension()>
  Public Function ToBitmapImage(ByVal lBitmap As Bitmap) As BitmapImage
    Dim lMemoryStream As New MemoryStream()
    Dim lBitmapImage As New BitmapImage()

    lBitmap.Save(lMemoryStream, ImageFormat.Png)
    lBitmapImage.BeginInit()
    lBitmapImage.StreamSource = New MemoryStream(lMemoryStream.ToArray())
    lBitmapImage.EndInit()
    Return lBitmapImage
  End Function

End Module 
```

之后，您必须编辑您的属性，例如：

```
Public ReadOnly Property Icon As BitmapImage
  Get
    Select Case Me.Type
      Case MessageType.Information
        Return My.Resources.Information16.ToBitmapImage
      Case MessageType.Warning
        Return My.Resources.Alert16.ToBitmapImage
      Case MessageType.Error
        Return My.Resources.Error16.ToBitmapImage
      Case Else
    End Select

    Return Nothing
  End Get
End Property 
```

# html - 浮动下方的 4px 间隙 包含图像的元素

> ID：16011514
> 
> 赞同：3
> 
> 时间：2013-04-15T09:13:15.067
> 
> 标签：html, css, css-float

我有以下**HTML**：

```
<div class="container">
    <ul>
        <li><img src="30x30.gif" /></li>
        <li><img src="30x30.gif" /></li>
        <li><img src="30x30.gif" /></li>
    </ul>
    <div style="clear: both" />
</div> 
```

我希望这些图像沿水平方向很好地串在一起，所以我应用了以下**CSS**：

```
div, p, ul, li {
    margin: 0;
    padding: 0;
    list-style: none;
}

div.container > ul li {
    float: left;
    background-color: yellow;
} 
```

这行得通。`<li>`但是，由于某种原因，元素底部有 4px 的间隙。我知道这一点是因为我可以看到一小块黄色背景（就在底部，而不是一直在周围）。

你可以在这里看到一个例子：http: [//jsfiddle.net/DBcPw/](http://jsfiddle.net/DBcPw/)

**注意：**这似乎只在`<li>`元素包含图像时发生。如果我尝试使用`<p>`元素，则不会出现问题。

所以，我的两个问题是：

1.  为什么会这样？
2.  我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T09:17:31.987

这是您的[jsfiddle的更新](http://jsfiddle.net/DBcPw/1/)

我补充说：

```
img{display:block; float:left;} 
```

它消除了浏览器倾向于应用于图像的额外填充和边距，以给它们一些您可能不想要的间距。如果你想删除间距，请制作它们`display :block`，如果你希望它们并排放置，则制作图像`float:left`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:17:44.783

该`<img>`标签从您当前使用的字体中获取其间距，（取决于空白）因此设置`font-size: 0;`在`<li>`s 上就可以了。

```
li {
    margin: 0;
    padding: 0;
    list-style: none;
    font-size: 0;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/DBcPw/2/](http://jsfiddle.net/Kyle_Sevenoaks/DBcPw/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:17:20.127

的`li`高度应与 的高度相匹配`img`。

```
div.container > ul li {
    float: left;
    background-color: yellow;
    height: 30px;
} 
```

**工作示例** [http://jsfiddle.net/DBcPw/6/](http://jsfiddle.net/DBcPw/6/)

# c - 使用 malloc 在结构中初始化 char *vals[SIZE]

> ID：16011515
> 
> 赞同：1
> 
> 时间：2013-04-15T09:13:15.783
> 
> 标签：c, struct, malloc

我有一个这样的结构：

```
struct students {
    char *names[MAXLENGTH];
}; 
```

我将如何使用初始化结构`malloc`？

我试过了

```
struct students student1 = {malloc(MAXLENGTH * sizeof(char**))}; 
```

但这给了我一个“初始化器周围缺少大括号”的错误。

我是 C 新手，所以我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:18:22.550

这是完全错误的`struct students student1 = {malloc(MAXLENGTH * sizeof(char**))};`

试试这个代码。

```
struct students* Student1 = malloc(sizeof(struct students ));
Student1->names[0] = malloc(sizeof(NAME_MAX));
scanf("%s",Student1->names[0]);//It may be first name. I think you want like this . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:20:39.670

您可以像这样分配结构的实例：

```
struct students *pStudent = malloc(sizeof *pStudent); 
```

这将分配字符串指针数组（因为它是 的一部分`struct students`），但不会将指针设置为指向任何东西（它们的值将是未定义的）。

您需要设置每个单独的字符串指针，例如：

```
pStudent->names[0] = "unwind"; 
```

这存储了一个指向文字字符串的指针。您还可以动态分配内存：

```
pStudent->names[1] = malloc(20);
strcpy(pStudent->names[1], "unwind"); 
```

当然，如果你`malloc()`空间，你必须记住`free()`它。不要将文字字符串与动态分配的字符串混合，因为不可能知道哪些字符串需要`free()`ing。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:23:29.323

您必须使用这样的 for 循环：

```
#define MAX_NAME_LENGTH 20

struct student s;
for(int i = 0; i < MAXLENGTH; ++i)
{
    s.names[i] = malloc(sizeof(char) * MAX_NAME_LENGTH);
} 
```

# google-maps - 如何在 google.maps.places.autocomplete 上设置几种类型？

> ID：16011517
> 
> 赞同：1
> 
> 时间：2013-04-15T09:13:20.330
> 
> 标签：google-maps

我想展示城市和国家，但我只得到城市

这有效

```
 var options = {
      types: ['(cities)'],
    };

    var autocomplete = new google.maps.places.Autocomplete(input, options); 
```

这不起作用

```
 types: ['(cities)','(coutry)'],

    types: ['(cities),(coutry)'],

    types: ['(cities,coutry)'], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T13:58:01.913

我认为迟到总比没有好

```
types: ['(cities,country)'] 
```

# sql-server - 移动数据库后出现“System.Data.SqlClient.SqlException: Invalid object name”

> ID：16011541
> 
> 赞同：0
> 
> 时间：2013-04-15T09:14:20.930
> 
> 标签：sql-server, connection

我将数据库从托管移动`SQL Server 2008`到`SQL Server 2012`专用服务器上。我创建了数据库，并使用`Import/Export`向导复制了一个表。我更改了应用程序中的连接字符串以指向新数据库。

该应用程序似乎能够连接，但是当我进行选择或插入时出现错误：

> “System.Data.SqlClient.SqlException：无效的对象名称'...'”。

当我将相同的连接字符串放入时，`SQL Management Studio`它会连接并正常工作。这可能是什么原因？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-18T09:31:10.683

您可以检查 web.config，如果它不包含多个连接字符串，或者您必须使用 VS 接口进行连接，那么您可以轻松测试连接，这会自动将连接写入 web.config

# iphone - 无法调用 UIKeyboardNotifications

> ID：16011549
> 
> 赞同：0
> 
> 时间：2013-04-15T09:14:52.287
> 
> 标签：iphone, ios, ios6, uitextfield, uitextview

我在视图中有一个文本字段和文本视图。我想在 textView 中编辑文本时在键盘上显示工具栏，但我不想在编辑 textField 时显示工具栏。我正在使用以下代码：

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{
    [super viewWillAppear:animated];

    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc addObserver:self selector:@selector(keyboardWillShow:)
               name: UIKeyboardWillShowNotification object:nil];
    [nc addObserver:self selector:@selector(keyboardWillHide:)
               name: UIKeyboardWillHideNotification object:nil];
 return YES;
} 
```

和

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
    [[NSNotificationCenter defaultCenter] removeObserver:self    name:UIKeyboardWillShowNotification
                                              object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification
                                              object:nil];

    return YES;
} 
```

我的问题是当用户尝试编辑文本字段并直接开始编辑 textView 时，我们无法为其显示工具栏？在这种情况下，如何在键盘上显示工具栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:54:11.693

正如之前在这个[答案](https://stackoverflow.com/questions/5591792/how-to-get-keyboard-with-next-previous-and-done-button)中解释的那样。`UITextField`并且`UITextView`有一个`inputAccessoryView`>iOS3.2的属性，你可以设置任何你想要的视图，它出现在键盘的顶部。所以，你不需要使用`UINotificationCenter`. 这是完成您想要的代码的代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIToolbar *keyboardToolbar =[[UIToolbar alloc] initWithFrame:CGRectMake(0,250,320,30)];
    keyboardToolbar.barStyle = UIBarStyleBlackOpaque;
    UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(dismissKeyboard)];

    UIBarButtonItem *flex = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    NSArray *items = [[NSArray alloc] initWithObjects:flex,barButtonItem, nil];
    [keyboardToolbar setItems:items];
    self.textView.inputAccessoryView =keyboardToolbar;
}

-(void)dismissKeyboard
{
    [self.textView resignFirstResponder];
} 
```

您需要做的就是`inputAccessoryView`为您的 设置`UITextView`，因此 `UITextField`默认键盘将出现。

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:23:44.763

您应该使用此委托方法来检索 UITextField 或 UITextView 的键盘通知

```
- (void)keyboardWillShow:(NSNotification *)notification
{
    //self.keyboardNotification = notification; //store notification and process on text begin delegate method. 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:23:32.533

您已经知道应该使用 inputAccessoryView，但这就是您的代码不起作用的原因：

`UIKeyboardWillShowNotification`将在`textFieldShouldBeginEditing:`返回后发布。

这是因为您可以通过从 中返回 NO 来取消编辑`textFieldShouldBeginEditing:`，在这种情况下应该没有`UIKeyboardWillShowNotification`。

不要删除 中的通知`textFieldShouldBeginEditing:`。否则，您在发布此通知时将不再观察它。

如果您在 中添加通知，请在`viewWillAppear:`中删除它们`viewWillDisappear:`。

# java - 在java中的链表中移动元素

> ID：16011550
> 
> 赞同：0
> 
> 时间：2013-04-15T09:14:54.433
> 
> 标签：java, linked-list, shift, doubly-linked-list, circular-list

我必须将链接列表中的所有标记左移一个位置。

这是我的方法代码：

```
private LLNode<E> head;     // the first node in the list
private LLNode<E> tail;     // the last node in the list

public void shiftLeft()
{
    LLNode<E> temp = new LLNode<E>();
    temp = head;
    head = head.next;
    tail.next = temp;
}

/*from main method
TopSpinLinkedList<Integer> ll = new TopSpinLinkedList<Integer>(numTokens, spinSize);

//fills LinkedList with tokens
for(int i = 1; i <= numTokens; i++) {
    ll.add(i);
}
*/ 
```

当我调用该方法时，在运行时出现空指针错误。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:23:59.353

我假设`head`并且正确`tail`更新`insert``remove`

```
public void shiftLeft()
{
    if(head == null || head.next == null){
       return;    
    }
    LLNode<E> temp = new LLNode<E>();     
    temp = head;           
    head = head.next;  
    temp.next = null;   
    tail.next = temp;  
    tail = temp;  
} 
```

**更新：**
从评论中我看到 OP 提到了一个循环列表。这在 OP 中没有提到，也没有从代码中明显看出。我将按原样保留答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:30:59.553

如果它是循环链表并且您的 add 方法可以正常工作。

```
public void shiftLeft(){
    head = head.next; tail = tail.next;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:22:10.990

您必须考虑以下几点：
1）如果您的链接列表不包含任何元素，那该怎么办？
2) 对于要移动的所有标记，您必须使用 while 循环。

# javascript - 根据其中的值拆分数组

> ID：16011551
> 
> 赞同：-1
> 
> 时间：2013-04-15T09:14:58.837
> 
> 标签：javascript, arrays, multidimensional-array

我有这样的数组

```
var aaa = [
  [value1,value2],[0,0]],
  [[value3,value4],[0,1]],
  [[value5,value6],[1,0]],
  [[value7,value8],[0,2]],
  [[value9,value10],[1,1]],
  [value11,value12],[2,0]]
]; 
```

我想根据值，等将此数组拆分为多个`[0,1]`数组`[0,2]`。

IE

```
array1 = [[value1,value2],[value3,value4],[value7,value8]];
array2 = [[value5,value6],[value9,value10]];
array3 = [[value11,value12]]; 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:19:46.947

用这个：

```
var aaa = [
[['value1','value2'],[0,1]],
[['value3','value4'],[0,2]],
[['value5','value6'],[1,0]],
[['value7','value8'],[0,3]],
[['value9','value10'],[1,1]],
[['value11','value12'],[2,0]]];

var result = {};

for (var i = 0; i < aaa.length; i += 1) {
    if (!result[aaa[i][1][0]]) {
        result[aaa[i][1][0]] = [];
    }
    result[aaa[i][1][0]].push(aaa[i][0]);
} 
```

之后：

```
result[0]; //[[value1,value2],[value3,value4],[value7,value8]];
result[1]; //[[value5,value6],[value9,value10]];
result[2]; //[[value5,value6],[value9,value10]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:30:19.390

假设：

```
[['value1','value2'],[0,1]] 
```

在此示例中： 0 告诉必须将值存储在哪个数组中。1 告诉它必须存储在该数组的哪个单元格中。

这段代码可以完成工作：

```
var aaa = [
    [['value1','value2'],[0,1]],
    [['value3','value4'],[0,2]],
    [['value5','value6'],[1,0]],
    [['value7','value8'],[0,3]],
    [['value9','value10'],[1,1]],
    [['value11','value12'],[2,0]]
];

var arr_result = new Array();

for (var k in aaa) {
    if (arr_result[aaa[k][1][0]] == undefined) {
        arr_result[aaa[k][1][0]] = new Array();
    }
    arr_result[aaa[k][1][0]][aaa[k][1][1]] = aaa[k][0];
} 
```

警告：这可能会让空单元格，就像在这个例子中一样，没有 [0,0] 单元格。

# file - Linux 异步 I/O 队列

> ID：16011554
> 
> 赞同：2
> 
> 时间：2013-04-15T09:15:12.517
> 
> 标签：file, asynchronous, linux-kernel, device

在像文件这样的块设备的上下文中；是 Linux 内核 AIO 函数，例如`io_submit()`仅*在*提供的 I/O 操作队列中异步，还是它们（也）跨多个进程和/或线程异步，这些进程和/或线程在同一文件上也有 I/O 操作队列。

> Doc 说：**io_submit()**系统调用将 nr I/O 请求块排队，以便在 AIO 上下文 ctx_id 中进行处理。iocbpp 参数应该是 nr 个 AIO 控制块的数组，将提交给上下文 ctx_id。

**更新：**

示例：如果我生成两个线程，它们在同一个文件上都有 100 个排队的 I/O 操作，并且都调用`io_submit()`大约。同时; 是否*所有*200 个 I/O 操作都是异步的，或者线程 #1 的 100 个 I/O 操作是否彼此异步但阻塞线程 #2 直到所有线程 #1 的 I/O 操作完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:21:05.200

您的应用程序应该关心的异步行为的唯一部分是在您的应用程序中。是的，其他进程也可能会在应用程序运行时的某个时间点将数据写入磁盘。在多任务、多用户和潜在的多处理器系统中，您几乎无法阻止这种情况。

这里的一般想法是您的应用程序不会阻塞，这就是`read`or `write`[和他们更高级的表亲`fread`，,`fwrite`等）的方式。

如果你想阻止其他进程接触“你的”文件，那么你需要使用文件锁定或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:37:10.310

当使用 提交一组 io 请求时`io_submit`，系统调用立即返回。从发出请求的线程的角度来看，嵌入在请求中的命令的执行是异步的。线程必须查询操作系统才能知道结果，同时可以自由地做它想做的事情。

现在，如果两个线程碰巧各自发出一组请求，它们都将处于相同的情况。他们都必须向操作系统询问各自 IO 命令的进展情况。不会阻塞任何线程。

从 AIO 框架的角度来看，完全有可能让操作系统在从调用它的一个或所有线程的调用返回*之前*`io_submit`实际执行请求，但 API 保持不变：用户态线程仍将 API 作为一个async one，在发布请求时从 API 获取未来结果的令牌，并使用该令牌获取真实结果。

在 linux AIO 的特定情况下，token 是预先创建的上下文，结果检查系统调用是`io_getevents`，它为每个完成的请求报告一个“事件”（即结果）。

关于您的示例，是否有可能在第二个系统调用期间，第一个线程的所有请求都已完成？我看不出这根本不会发生的原因，但是如果两个线程彼此非常接近地发布 100 个请求，那么这似乎不太可能。更可能的情况是，`io_submit`当第二个线程自己调用时，第一个线程调用的几个请求已完成`io_submit`，但无论如何该调用*不会阻塞*。

# ruby - Ruby 正则表达式无法识别字符串的开头

> ID：16011555
> 
> 赞同：0
> 
> 时间：2013-04-15T09:15:12.900
> 
> 标签：ruby, regex

我想用此链接的实际 HTML 标记替换“文本”包含 http 链接。

这是我的 Ruby 代码

```
url_check = Regexp.new( '(\A|[\n ])([\w]+?://[\w]+[^ \"\r\n\t<]*)', Regexp::MULTILINE |    Regexp::IGNORECASE )
self.gsub!(url_check, '\1<a href="http://\2">\2</a>')
to_s 
```

这是一个测试用例：

```
This is entrance page for the service (using HTML):

http://foobar.org/resources?format=html

Let us pick the "contributions" namespace: http://foobar.org/ 
```

该链接仅针对第二种情况创建，而不是为第一种情况创建（之前有几个换行符）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:04:50.253

我建议使用 \b （字边界）而不是换行符/行首检测：

```
.gsub!(/\b([\w]+?:\/\/[\w]+[^ \"\r\n\t<]*)/i, '<a href="\1">\1</a>') 
```

您不需要替换“http：”，因为您已经匹配协议。

# sql-server - 将 Sql Server 存储过程迁移到 Oracle PL/SQL

> ID：16011559
> 
> 赞同：0
> 
> 时间：2013-04-15T09:15:25.250
> 
> 标签：sql-server, oracle, stored-procedures

下面的存储过程适用于 SQL Server（在我进行一些特定于 oracle 的更改之前）。现在这个存储过程也必须适用于 Oracle。

我使用的 Oracle Sql Developer 在“OPEN CURSOR_ FOR”之后的行中抱怨

不知何故，Oracle 不喜欢我将 select 语句和 union 都“分组”，并对整个结果进行排序...

我错了什么？我只知道一点oracle存储过程...

```
create or replace
PROCEDURE GetWorkflowStatusForMatrix(
    p_ApplicationId IN varchar2,    
    CURSOR_ OUT sys_refcursor
)
AS
BEGIN   
    OPEN CURSOR_ FOR
    (
  select ApplicationId || ModuleId || UNIT_ID as StatusKey, UNIT_ID, ApplicationId, ModuleId, Owner, "Level", Action, "Comment", LastModifiedUser, LastModifiedDate 
    from WorkflowStatus where ApplicationId = p_ApplicationId

    union

    select distinct e.ApplicationId + WorkflowId + UnitId as StatusKey, UnitId, e.ApplicationId, WorkflowId, w.Owner, 'Level1', 'Working', EventType, UserId, EventDateTime as LastModifiedDate
    from EventLog e
    join WorkflowStatus w on w.ApplicationId = e.ApplicationId and w.ModuleId = e.WorkflowId and w.UNIT_ID = e.UnitId
    where e.ApplicationId = p_ApplicationId and w.Owner <> '' and w.Action = 'Created'
    )
    order by LastModifiedDate DESC;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:17:59.660

您需要阅读如何在 Oracle 中定义游标 - 这将对您有所帮助..

[http://www.techonthenet.com/oracle/cursors/declare.php](http://www.techonthenet.com/oracle/cursors/declare.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:39:11.393

```
create or replace
PROCEDURE GetWorkflowStatusForMatrix(
    p_ApplicationId IN varchar2,    
    CURSOR_ OUT sys_refcursor
)
AS
BEGIN   
  OPEN CURSOR_ FOR
    select ApplicationId || ModuleId || UNIT_ID as StatusKey, UNIT_ID, ApplicationId, ModuleId, Owner, "Level", Action, "Comment", LastModifiedUser, LastModifiedDate 
  from WorkflowStatus where ApplicationId = p_ApplicationId
  union
  select distinct e.ApplicationId + WorkflowId + UnitId as StatusKey, UnitId, e.ApplicationId, WorkflowId, w.Owner, 'Level1', 'Working', EventType, UserId, EventDateTime as LastModifiedDate
from EventLog e
join WorkflowStatus w on w.ApplicationId = e.ApplicationId and w.ModuleId = e.WorkflowId and w.UNIT_ID = e.UnitId
where e.ApplicationId = p_ApplicationId and w.Owner <> '' and w.Action = 'Created'

order by LastModifiedDate DESC;
END; 
```

# asp.net - 计数asp.net中的天数

> ID：16011561
> 
> 赞同：-1
> 
> 时间：2013-04-15T09:15:34.800
> 
> 标签：asp.net, date

我有一学期的 fromDate 和 toDate 两个字段。假设它们的值是“01-06-2013”​​到“01-09-2013”​​。如何在 vb.net 中获得学期的总天数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:32:28.783

您可以在 vb.net 中尝试：

```
 Dim t1 As DateTime = Convert.ToDateTime("01-06-2013")
    Dim t2 As DateTime = Convert.ToDateTime("01-09-2013")
    MessageBox.Show(t2.Subtract(t1).Days) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:19:29.980

我认为 сlass DateDiff 可以帮助你：http: [//msdn.microsoft.com/ru-ru/library/ms189794.aspx](http://msdn.microsoft.com/ru-ru/library/ms189794.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T09:20:19.843

试试这个（C#）：

```
TimeSpan timespan = Convert.ToDateTime("01-09-2013").Subtract(Convert.ToDateTime("01-06-2013")); 
Response.Write(timespan.Days+1); 
```

通常，Subtract 方法返回一个比正确值小一的值，因此加一以获得 excat 天数

或者：

```
DateDiff(DateInterval.Day , curDate, srDate) //can replace the first argument with "d" 
```

还要检查[这个链接](http://msdn.microsoft.com/en-US/library/b5xbyt6f%28v=vs.80%29.aspx)

# javascript - 如何在javascript中画一条线？什么是摇摆/awt？我需要下载它们吗？

> ID：16011567
> 
> 赞同：0
> 
> 时间：2013-04-15T09:16:05.133
> 
> 标签：javascript, swing, awt, java-2d

我对 javascript 很陌生，但对它的了解足以满足我的需要，主要将它用于网页设计（按钮等）。

我一直在使用 Adob​​e Brackets 结合 html/css 来编辑 javascript。

我的目标是从一个点到另一个点画一条线。然而，在浏览这个网站时，我注意到人们一直在谈论导入“swing”、“awt”和“java 2d”来绘制东西。

这些插件适用于特定的 javascript 编辑器吗？我需要下载它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:19:24.020

您可以使用以下代码使用画布和画线

帆布

```
<canvas id="myCanvas" width="200" height="100"></canvas> 
```

Javascript

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.moveTo(0,0);
ctx.lineTo(200,100);
ctx.stroke(); 
```

[画布上的完整教程](http://www.w3schools.com/html/html5_canvas.asp)

# .net - IIS 中的“字符串未被识别为有效的日期时间”

> ID：16011569
> 
> 赞同：0
> 
> 时间：2013-04-15T09:16:14.827
> 
> 标签：.net, datetime, iis

我`DateTime.TryParse`在 WebApplication 中使用。

```
var datetime = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss");
DateTime dt;
var result = DateTime.TryParse(datetime, out dt); 
```

它几乎可以正常工作！但有时结果会是错误的！当我重新启动 IIS 时，它会再次运行！

我在中国，我的服务器区域也是中国。中国很多人都有同样的问题，但没有人能解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:18:33.990

您应该使用[DateTime.ParseExact 方法](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)来解决此问题

`CultureInfo.InvariantCulture`用作第三个参数或 用于`CultureInfo("zh-CN")`中国

# java - Web 服务浏览器和会话管理

> ID：16011570
> 
> 赞同：0
> 
> 时间：2013-04-15T09:16:15.840
> 
> 标签：java, eclipse, web-services, session-management

如何在 Eclipse 中使用 Web 服务资源管理器测试会话管理？我曾经`HttpSession session = ((javax.servlet.http.HttpServletRequest)mc.get(MessageContext.SERVLET_REQUEST)).getSession();`在服务器端获取会话并`((BindingProvider)proxy).getRequestContext().put(BindingProvider.SESSION_MAINTAIN_PROPERTY,true);`维护来自客户端的会话。

但这在 Web 服务资源管理器中是不可能的。还有其他方法吗？

由于我目前正在开发 Web 服务，因此每天都在更改它，我目前正在通过使用`wsimport`或使用`Eclipse's`向导生成客户端代码来测试它。我想在 GUI 中测试它并尝试了 Web 服务资源管理器，但无法管理会话。

对于 Web 服务的简单测试，任何建议都会有所帮助。

**编辑：**我读[了这个](https://stackoverflow.com/questions/3458604/session-management-in-web-services)，我想要一些与 Web 服务资源管理器相关的东西。

# javascript - Backbone.js 中的 Textarea 事件

> ID：16011572
> 
> 赞同：2
> 
> 时间：2013-04-15T09:16:25.530
> 
> 标签：javascript, jquery, backbone.js

在我的应用程序中，是一些带有“contentBlock”类的文本区域。

我在主干视图中使用以下代码：

```
 'change textarea': 'updateText' 
```

但是 updateText 函数没有被触发。

当文本区域中的任何文本发生更改时，我想触发该事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-01T23:23:53.060

您应该使用**keyup**事件（或其他一些键事件）来侦听文本区域中的文本更改。使用*Loamhoof 的*例子：

```
var View = Backbone.View.extend({
    events: {
        'keyup textarea': 'test'
    },
    test: function() {
        alert();   
    }
});

new View({el: 'div'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:24:06.870

所以......遗憾的是，由于我们提供任何答案的元素太少，我只是为您提供一个有效的简单示例：

```
var View = Backbone.View.extend({
  events: {
    'change textarea': 'test'
  },
  test: function() {
    alert();   
  }
});

new View({el: 'div'}); 
```

[http://jsfiddle.net/ZSgvy/](http://jsfiddle.net/ZSgvy/)

所以，基于常见的错误：确保你的事件绑定到你的视图元素（如果你指定一个不存在的元素或者你之后以错误的方式更改它，它们不会），并确保你的 textarea 实际上是您的视图元素的后代。此外，按照您的方式，textarea 不能是视图的元素本身。

# python - python + matplotlib：barh plot显示不完整的YTick标签-如何动态地将绘图区域向右移动以适合给定的YTickLabels？

> ID：16011573
> 
> 赞同：5
> 
> 时间：2013-04-15T09:16:27.717
> 
> 标签：python, matplotlib, plot

我正在使用`matplotlib`将绘图`barh`绘制到文件中。不幸的是，YTickLaels 有点太长，情节区域不会自动向右移动。有没有办法自动将绘图区域向右移动，这样我就不会遇到不完整的 YTickLabels 的问题？

我使用的代码如下：

```
import matplotlib as mpl
mpl.use('Agg')
import matplotlib.pyplot as plt
D = {u'Label1':26, u'Label2 is longer than others': 17, u'Label3 is not so short either':30}
fig = plt.figure(figsize=(5.5,3),dpi=300)
ax = fig.add_subplot(111)
ax.grid(True,which='both')
bar = ax.barh(range(1,len(D)+1,1),D.values(),0.4,align='center')
plt.yticks(range(1,len(D)+1,1), D.keys(), size='small')
fig.savefig('D_bar.png') 
```

这是输出： ![barh的输出](https://i.stack.imgur.com/Mv60k.png)

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T12:43:41.853

实际上，现在有一种自动执行此操作的方法：[`tight_layout`](http://matplotlib.org/users/tight_layout_guide.html).

在你的情况下：

```
import matplotlib as mpl
mpl.use('Agg')
import matplotlib.pyplot as plt
D = {u'Label1':26, u'Label2 is longer than others': 17, 
     u'Label3 is not so short either':30}
fig = plt.figure(figsize=(5.5,3),dpi=300)
ax = fig.add_subplot(111)
ax.grid(True,which='both')
bar = ax.barh(range(1,len(D)+1,1),D.values(),0.4,align='center')
plt.yticks(range(1,len(D)+1,1), D.keys(), size='small')
fig.tight_layout() # <---- ADD THIS
fig.savefig('D_bar.png') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:38:01.433

根据[matplotlib mailing list](http://matplotlib.1069221.n5.nabble.com/plot-cuts-off-long-tick-labels-td19890.html)，没有自动的方法可以做到这一点。[`figure.subplots_adjust`](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.subplots_adjust)但是，您可以使用方法手动调整子图填充。在您的代码中放置`fig.subplots_adjust(left = 0.4)`after会产生以下结果：`ax = fig.add_subplot(111)`

![在此处输入图像描述](https://i.stack.imgur.com/t47Kw.png)

# asp.net - 会话未在处理程序的 asp 页面中维护

> ID：16011575
> 
> 赞同：0
> 
> 时间：2013-04-15T09:16:29.077
> 
> 标签：asp.net

在我们的项目中，我`context.Session["StackImgInsert"]="some string"`在 asp.net 处理程序（.ashx 页面）中分配。
现在我想`Session["StackImgInsert"]=null` 在 ASP 页面 (.aspx) 中读取 的值`Session["StackImgInsert"]`，然后它显示为`null`。
谁能告诉如何从处理程序中读取会话并将其设为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:19:56.120

您需要`IReadOnlySessionState`在类名中使用它，如下所示

```
 public class GetFeatures : IHttpHandler, IReadOnlySessionState
 {
      context.Session["StackImgInsert"]="some string";
 } 
```

# java - Android 使用 TargetApi 实现接口

> ID：16011577
> 
> 赞同：1
> 
> 时间：2013-04-15T09:16:32.343
> 
> 标签：java, android, api, nfc

我在 Android 应用程序中遇到问题，我的活动实现`CreateNdefMessageCallback`了`API 14+`.

`public NdefMessage createNdefMessage(NfcEvent event)`我用.注释了实现的方法`@TargetApi(14)`。它在 Android 4 设备上运行良好，但在低于 Android 4.0 的设备上加载时会崩溃！

唯一的解决方案是为实现创建另一个`class`？或者有可能有一个有条件的实现`@TargetApi`？

这是完整的例外，如果我删除它不会附加`implements CreateNdefMessageCallback`：

```
04-15 11:22:28.063: E/AndroidRuntime(3784): FATAL EXCEPTION: main
04-15 11:22:28.063: E/AndroidRuntime(3784): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{XXXX/XXXX.MyActivity}: java.lang.ClassNotFoundException: XXXX.MyActivity in loader dalvik.system.PathClassLoader[/data/app/XXXX.apk]
04-15 11:22:28.063: E/AndroidRuntime(3784):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at android.os.Looper.loop(Looper.java:123)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at java.lang.reflect.Method.invokeNative(Native Method)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at java.lang.reflect.Method.invoke(Method.java:521)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at dalvik.system.NativeStart.main(Native Method)
04-15 11:22:28.063: E/AndroidRuntime(3784): Caused by: java.lang.ClassNotFoundException: XXXX.MyActivity in loader dalvik.system.PathClassLoader[/data/app/XXXX.apk]
04-15 11:22:28.063: E/AndroidRuntime(3784):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-15 11:22:28.063: E/AndroidRuntime(3784):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
04-15 11:22:28.063: E/AndroidRuntime(3784):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:16:09.060

最后我做了一个内部匿名内部类型来解决这个问题和一个条件来检查设备是否有 NFC 芯片。

```
mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
if (mNfcAdapter != null) {
   mNfcAdapter.setNdefPushMessageCallback(new CreateNdefMessageCallback() {...}, this);
} 
```

我还围绕此代码添加了第二个测试，以检查 Android 的运行版本。

# mips - mips 打印字符

> ID：16011579
> 
> 赞同：6
> 
> 时间：2013-04-15T09:16:36.643
> 
> 标签：mips

```
li $a0, '0'
li $v0, 11
syscall 
```

所以我有这段代码来打印 $a0 中的内容

就打印出来的字符而言，-1 和 1 有什么区别？当我尝试打印 -1 而不是 0 时，火星只会抱怨该值。

是否有任何数学函数可以用正数来处理负数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T09:24:47.623

Syscall 11 打印一个字符。字符串“0”和“1”都由一个字符组成，但“-1”由两个字符组成（'-'和'1'）。

您可以将 -1 打印为两个单独的字符：

```
li $a0, '-'
li $v0, 11    # print_character
syscall
li $a0, '1'
li $v0, 11    # print_character
syscall 
```

或作为字符串：

```
 li $v0, 4    # print_string    
 la $a0, str     
 syscall          

 str:  .asciiz "-1" 
```

或作为整数：

```
 li $v0, 1    # print_int     
 li $a0, -1     
 syscall 
```

# database - 对应月的分叉记录

> ID：16011581
> 
> 赞同：0
> 
> 时间：2013-04-15T09:16:40.830
> 
> 标签：database, sql-server-2008, monthcalendar

在这里，我将解释我的场景：

我有以下表格：

```
Table : Service_Type

Id  | Service_Name | Service_Table_Name|
----------------------------------------
1   |   FA         |    FA     |
2   |   TPA        |        TPA        |

Table: Service_Mapping

Id  | Service_Type_Id |
---------------------------
1   |   1     |
2   |   2     |
3   |   2     |
4   |   1     |

Table: FA

Id  | Created_date| Qty |
-----------------------------
1   | 3/20/2012   | 20  |
2   | 4/22/2012   | 10  |
3   | 5/12/2012   | 15  |
4   | 6/3/2012    | 5   |

Table: TPA

Id  | Created_date| Qty |
-----------------------------
1   | 5/20/2012   | 2   |
2   | 7/22/2012   | 10  |
3   | 1/12/2012   | 1   |
4   | 9/3/2012    | 5   | 
```

我想要这样的输出：

```
Month | FA| TPA|
----------------
Jan     0   1
Mar     1   0
Apr     1   0
Jul     1   0
Sep     0   1 
```

在输出中，我希望月份对应于 FA 和 TPA 表的 Created_date 字段。相对于月份，我想要一个月内发生多少 FA 和 TPA 的总和。

我有像这样的输出

```
FA   |  TPA  |
--------------
3    |  2    |

SELECT 
SUM(CASE WHEN Service_Type_Id = 1 THEN 1 ELSE 0 END) AS FA, 
SUM(CASE WHEN Service_Type_Id = 2 THEN 1 ELSE 0 END) AS TPA 
FROM Service_Mapping 
```

但是现在我想将它们分别对应于它们发生的月份。从 TPA 和 FA 的提交日期开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:22:04.010

尝试这个：

```
SELECT Mon.monthNAME, ISNULL(TPAcount,0) TPAcount, ISNULL(FAcount,0) FAcount FROM
(
    SELECT DATENAME(MONTH,created_date) AS [monthNAME], MONTH(created_date) [month], YEAR(created_date) as [year] FROM FA
    UNION
    SELECT DATENAME(MONTH,created_date) AS [monthNAME], MONTH(created_date) [month], YEAR(created_date) as [year]  FROM TPA
) Mon LEFT JOIN
(
    SELECT DATENAME(MONTH,created_date) tpaMonth, YEAR(created_date) as [year] , COUNT(1) TPAcount 
    FROM TPA GROUP BY DATENAME(MONTH,created_date), YEAR(created_date)
) TPA ON TPA.tpaMonth = Mon.monthNAME and tpa.[year] = mon.[year] LEFT JOIN
(
    SELECT DATENAME(MONTH,created_date) faMonth, YEAR(created_date) as [year] , COUNT(1) FAcount 
    FROM FA GROUP BY DATENAME(MONTH,created_date), YEAR(created_date)
) FA ON FA.faMonth = MON.monthNAME and FA.[year] = mon.[year]

ORDER BY 
 Mon.[year], Mon.[month] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:38:50.870

您还可以检查另一种方法：

```
SELECT Mon.monthNAME, SUM(tpCount) tpCount, SUM(faCount) faCount FROM
(
    SELECT DATENAME(MONTH,created_date) AS [monthNAME], MONTH(created_date) [month], YEAR(created_date) as [year], 0 AS tpCount, 1 as faCount FROM FA
    UNION
    SELECT DATENAME(MONTH,created_date) AS [monthNAME], MONTH(created_date) [month], YEAR(created_date) as [year], 1 as tpCount, 0 AS faCount FROM TPA
) Mon 
GROUP BY 
   [monthNAME],[month],[year]
ORDER BY 
    Mon.[year], Mon.[month] 
```

# java - 如何在 Java 中扫描和比较图像

> ID：16011587
> 
> 赞同：1
> 
> 时间：2013-04-15T09:17:14.300
> 
> 标签：java, image

我想知道是否有可能将我本地磁盘中的图像与放置在网站上的 flash 应用程序中的图像进行比较。不可能从网站上直接链接到这些图像，所以我需要一种方法来扫描位于精确坐标上的图像。如果它适用于 Robot 类，那就太好了，因为在比较之后我需要远程移动鼠标指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:23:14.677

这是可能的，但是有很多方法可以比较图像，具体取决于您需要什么结果。

*   你需要精确比较吗？（然后计算所有像素的散列）
*   你需要一些相似度吗（计算不变矩并计算距离）

对于不变的时刻，您可以使用我们的纯 java ocr 库：

[http://sourceforge.net/projects/javaocr/](http://sourceforge.net/projects/javaocr/)

（棘手的部分是选择适当的时刻）

# javascript - javascript中带有两个点的电话号码方法？

> ID：16011588
> 
> 赞同：3
> 
> 时间：2013-04-15T09:17:15.060
> 
> 标签：javascript

为什么

```
123.toString() 
```

抛出一个 SyntaxError

尽管

```
123..toString() 
```

不是？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T09:19:30.543

您在数字文字中键入的第`.`一个是小数点。

# objective-c - 不从 MainMenu.xib 加载窗口，而是加载另一个窗口

> ID：16011591
> 
> 赞同：1
> 
> 时间：2013-04-15T09:17:23.470
> 
> 标签：objective-c, macos, cocoa

这是我的第一个 Mac OS-X 应用程序，所以这可能是一个愚蠢的问题。在我的应用程序中，基本上我有两个窗口，

1.  ***MainMenu.xib***文件默认自带的主窗口
2.  我用另一个 xib 文件创建了另一个***WindowController 。***

我创建了一个连接到 MainMenu.xib 的 AppController 类，我在`awakeFromNib`AppController 类的方法中尝试做的是加载主窗口或自定义窗口，但每次都加载主菜单。可能吗？

以前的方式我做不到，如果我需要使用自定义窗口，我会先创建主窗口并立即关闭它。我试图通过这个获取主窗口，`[[NSApplication sharedApplication]mainWindow];`然后关闭它。但是没有成功。

我认为我对可可的窗口、视图和控制器还没有正确的理解。我正在关注**aaron hillegass 的可** ***可编程 Mac OS X***书。请建议我一些其他教程，以便我可以清楚地理解这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:50:56.007

您需要取消选中“启动时可见”窗口

然后根据您的 BOOL 值，您需要显示窗口并使其成为 orderFront。

![在此处输入图像描述](https://i.stack.imgur.com/ok1fA.png)

# html - 从 html 页面创建 Web 服务：客户端，我如何获取结果而不是页面的代码源

> ID：16011594
> 
> 赞同：0
> 
> 时间：2013-04-15T09:17:28.893
> 
> 标签：html, web-services

我正在尝试做以下事情：我想从位于 Web 服务器中的 page.html 获取两个动态数据（纬度和经度）我想将它们作为 Web 服务获取：这是执行的结果我的网页位于服务器中：{“results”：[{“Latitude”：“36.81881”，“Longitude”：“10.16596”}]} 这正是我想在我的客户端应用程序中恢复的，但问题是我无法得到结果，我只能得到页面的代码源。Html 位于服务器中。这是我在客户端用于从服务器获取数据的方法：

```
function latLong()
{

    var ajax = new XMLHttpRequest();
ajax.open("GET","http://localhost/AtitLongiWebService.html",true);
ajax.send();
ajax.onreadystatechange=function(){
     if(ajax.readyState==4 && (ajax.status==200||ajax.status==0)){
     alert(ajax.responseText);    
 }
     }
} 
```

这是我在网络服务器中的 page.html：

```
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <script type="text/javascript">

    function startWatch(){
      if (navigator.geolocation)
        var watchId = navigator.geolocation.watchPosition(successCallback,
                                  errorCallback,
                                  {enableHighAccuracy:true,
                                  timeout:10000,
                                  maximumAge:0});
      else
        alert("Votre navigateur ne prend pas en compte la géolocalisation HTML5");
    }

    function stopWatch(){
      navigator.geolocation.clearWatch(watchId);
    }     

    function successCallback(position){
      document.getElementById("lat").innerHTML = position.coords.latitude;
      document.getElementById("long").innerHTML = position.coords.longitude;
    };  

    function errorCallback(error){
      switch(error.code){
        case error.PERMISSION_DENIED:
          alert("L'utilisateur n'a pas autorisé l'accès à sa position");
          break;      
        case error.POSITION_UNAVAILABLE:
          alert("L'emplacement de l'utilisateur n'a pas pu être déterminé");
          break;
        case error.TIMEOUT:
          alert("Le service n'a pas répondu à temps");
          break;
        }
    };

  </script>
    </head>
    <body onload="startWatch()">

        {"results":[{"Latitude":"<label id="lat"></label>",
        "Longitude": "<label id="long"></label>"}]}

    </body>
</html> 
```

通常 ajax.responseText 返回结果，但在这种情况下它返回代码源，有人可以帮我获取页面执行的结果，而不是代码源。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:25:23.707

目前您正在访问的网页是一个标准的静态 HTML 页面，其中嵌入了 javascript。由于这是由 Apache 提供的（作为 WAMPserver 环境的一部分），因此它将其视为带有*客户端*javascript 的纯 HTML 页面。也就是说，只需将文件发送到客户端而不运行任何内容。

为了运行*服务器端*javascript，您需要有一个[javascript 服务器](http://en.wikipedia.org/wiki/Comparison_of_server-side_JavaScript_solutions)，例如[node.js](http://en.wikipedia.org/wiki/Node.js)。

# php - 选择性地将 WHERE 子句中的用户 ID 应用于条目

> ID：16011596
> 
> 赞同：0
> 
> 时间：2013-04-15T09:17:38.847
> 
> 标签：php, mysql

我一直在反复讨论 IF 和 CASE 以及在其他地方找到的许多其他建议，试图弄清楚如何根据类别和用户 ID 过滤掉某些条目。假设一个表`user_posts`包含很多用户发布的帖子。对于“CAT_64”或“CAT_106”类别的帖子，我希望将结果限制为`user_ID`='MIRA76'。但是，我仍然想从其他类别的其他用户那里获得结果。

桌子`user_posts`

```
+----------+--------------+----------+-----------------+
| post_ID  | category_ID  | user_ID  |     content     |
+----------+--------------+----------+-----------------+
| 456FQ    | CAT_64       | MEK90    | TEXTUAL CONTENT |
| 754GD    | CAT_21       | MEK90    | TEXTUAL CONTENT |
| 616CZ    | CAT_106      | MIRA76   | TEXTUAL CONTENT |
| 714PA    | CAT_64       | MIRA76   | TEXTUAL CONTENT |
| 554WU    | CAT_26       | RON32    | TEXTUAL CONTENT |
| 451YD    | CAT_41       | RON32    | TEXTUAL CONTENT |
| 783TD    | CAT_21       | MIRA76   | TEXTUAL CONTENT |
| 156GL    | CAT_11       | MEK90    | TEXTUAL CONTENT |
| 274HD    | CAT_11       | HOM92    | TEXTUAL CONTENT |
+----------+--------------+----------+-----------------+ 
```

在示例条目中，对于类别“CAT_64”和“CAT_106”，仅采用`user_ID`“MIRA76”的类别，但对于其他类别则没有此类限制。我该怎么做呢？这里除了第一个之外的那些是理想的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:18:44.490

您可以[在此处](http://dev.mysql.com/doc/refman/5.0/en/where-optimizations.html)`WHERE`使用函数来限制您的查询结果**文档**

所以你可以使用类似的东西

```
WHERE user_ID='MIRA76' AND (category_id = 'CAT_64' OR category_id = 'CAT_106') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:21:11.980

```
SELECT * 
FROM user_posts
WHERE (user_ID = 'MIRA76' AND category_ID IN('CAT_64','CAT_106')) 
       OR user_ID != 'MIRA76' 
```

## 更新

现在我已经*非常*仔细地阅读了您的帖子并且也应用了一个假设，看来您不希望*其他用途的*帖子位于`CAT_64`和中`CAT_106`。那正确吗？如果是，请尝试此查询

```
SELECT * 
FROM user_posts
WHERE (user_ID  = 'MIRA76' AND category_ID IN('CAT_64','CAT_106')) 
   OR (user_ID != 'MIRA76' AND category_ID NOT IN('CAT_64','CAT_106')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:21:04.247

你有几个选择：

您可以将其拆分为两个查询 - 并加入输出，例如选择受限制的 user_id，然后与其他查询结果组合（可能不包括先前选择的）。

或者

您可以查看在 WHERE 子句中使用条件语句，例如 CASE、OR、AND...

如果您发布您已经尝试过的代码 - 也许我可以更具体地提供帮助。

# c# - 如何在输入 datagridview 时检查输入数据并将光标移动到下一个单元格？

> ID：16011599
> 
> 赞同：0
> 
> 时间：2013-04-15T09:17:47.943
> 
> 标签：c#, datagridview, verification

我有一行 dataGridView，其中可能包含 1 到 30 个单元格。现在我需要在输入时检查输入数据，如果验证通过，则将焦点放在下一个单元格上……顺便说一下，每个单元格的 MaxInputLength 设置为 1。

主要思想是在输入时检查当前单元格。

PS 单元以编程方式创建，每个单元只能包含 1 个**字母**。

*好吧，为了检查我做了下一个，它可以工作：*

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            if (dataGridView1.CurrentCell.RowIndex == 0)
            {
                TextBox tb = (TextBox)e.Control;
                tb.KeyPress += new KeyPressEventHandler(tb_KeyPress);
            }
        }

        void tb_KeyPress(object sender, KeyPressEventArgs e)
        {
            List<string> detect = new List<string> { "№", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", "`", "~", "!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "_", "+", "=", "-", "/", "*", ".", "|", "]", "[", "}", "{", "'", ";", ":", "?", ">", "<", ",", "\"", "\\" };
            var character = e.KeyChar.ToString();
            if (dataGridView1.CurrentCell.RowIndex == 0)
            {
                foreach (string Item in detect)
                {
                    if (character == Item)
                    {
                        e.Handled = true;
                    }
                }
            }
        } 
```

现在，如果当前单元格有 1 个字母，我只需要将焦点移动到下一个单元格。

*我找到了这段代码，它看起来很合适，但实际上我不知道如何处理它：*

```
public static class GridExtension
{
    public static void MoveNextCell(this DataGridView dgv)
    {
        DataGridViewCell currentCell = dgv.CurrentCell;
        if (currentCell != null)
        {
            int nextRow = currentCell.RowIndex;
            int nextCol = currentCell.ColumnIndex + 1;
            if (nextCol >= dgv.ColumnCount)
            {
                nextCol = 0;
                nextRow++;
            }
            if (nextRow >= dgv.RowCount)
            {
                nextRow = 0;
            }
            DataGridViewCell nextCell = dgv.Rows[nextRow].Cells[nextCol];
            if (nextCell != null && nextCell.Visible)
            {
                if ((currentCell != null) && (currentCell.IsInEditMode))
                    dgv.EndEdit();
                try
                {
                    dgv.CurrentCell = nextCell;
                }
                catch (InvalidOperationException) { } //Fails if you have cell validation
            }
        }
    }
} 
```

关于如何使用它的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:25:12.140

首先，您需要分配常量值，以便您可以在运行时检查相同的值例如：

```
Private Const GV_Cell1 As Integer = 0
Private Const GV_Cell2 As Integer = 1 
```

您可以使用 For Each 循环 Ex 通过其常数评估相同的单元格。

```
For Each gr As GridViewRow In Me.GV.Rows

gr.Cells(GV_cell1).Text 
```

# c++ - 如何在 Intel TBB 的 parallel_for 循环中指定循环步骤？

> ID：16011600
> 
> 赞同：0
> 
> 时间：2013-04-15T09:17:47.910
> 
> 标签：c++, multithreading, tbb

我想利用英特尔 TBB 的库做这样的事情（伪代码）：

```
some function( int index, Mat data, vector<int> other ) {

}

int start = 0
int end = 100
int step = 5

parallel_for( start, end, step, some function ) 
```

但是我不确定如何将附加参数传递给“某个函数”。为了能够将我的附加数据传递给并行化函数，而不使它们成为静态/全局，我应该怎么做？

我知道您可以使用 C++ 的 lambda 函数来做到这一点，但是由于某些情况（与其他库冲突），我无法使用它。

除此之外，我知道我们可以使用 Range 来指定循环范围，但是，有什么方法可以在 Range 内设置循环步骤？

我要提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:29:31.617

请参阅 [http://software.intel.com/sites/products/documentation/doclib/tbb_sa/help/hh_goto.htm#tbb_userguide/parallel_for.htm](http://software.intel.com/sites/products/documentation/doclib/tbb_sa/help/hh_goto.htm#tbb_userguide/parallel_for.htm)中的示例。它展示了如何为 parallel_for 手动滚动仿函数。

# mysql - mysql 不使用主 bigint 索引

> ID：16011609
> 
> 赞同：1
> 
> 时间：2013-04-15T09:18:02.660
> 
> 标签：mysql, indexing, database-performance

我正在与一个非常简单的表上的一些性能问题作斗争，当使用它的主键（bigint）获取数据时似乎很慢

我有这张表有 1.24 亿个条目：

```
CREATE TABLE `nodes` (
  `id` bigint(20) NOT NULL,
  `lat` float(13,7) NOT NULL,
  `lon` float(13,7) NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `lat_index` (`lat`),
  KEY `lon_index` (`lon`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

和一个简单的查询，它使用 IN 子句从另一个表中获取一些 id 以从节点表中获取数据，但是从该表中获取几行只需要 1 小时。EXPLAIN 向我展示了它没有使用 PRIMARY 键作为索引，它只是扫描整个表。为什么？id 和另一个表中的 id 列都来自 bigint(20) 类型。

```
mysql> EXPLAIN SELECT lat, lon FROM nodes WHERE id IN (SELECT node_id FROM ways_elements WHERE way_id = '4962890');
+----+--------------------+-------------------+------+---------------+--------+---------+-------+-----------+-------------+
| id | select_type        | table             | type | possible_keys | key    | key_len | ref   | rows      | Extra       |
+----+--------------------+-------------------+------+---------------+--------+---------+-------+-----------+-------------+
|  1 | PRIMARY            | nodes             | ALL  | NULL          | NULL   | NULL    | NULL  | 124035228 | Using where | 
|  2 | DEPENDENT SUBQUERY | ways_elements     | ref  | way_id        | way_id | 8       | const |         2 | Using where | 
+----+--------------------+-------------------+------+---------------+--------+---------+-------+-----------+-------------+ 
```

该查询`SELECT node_id FROM ways_elements WHERE way_id = '4962890'`只返回两个节点 id，因此整个查询应该只返回两行，但它或多或少需要 1 小时。

使用“强制索引（PRIMARY）”没有帮助，即使它会有所帮助，为什么 MySQL 不采用该索引，因为它是主键？EXPLAIN 甚至没有在 possible_keys 列中提及任何内容，但 select_type 显示 PRIMARY。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:47:00.723

这表现如何？

`SELECT lat, lon FROM nodes t1 join ways_elements t2 on (t1.id=t2.node_id) WHERE t2.way_id = '4962890'`

我怀疑您的查询是针对“IN”子句中的每个项目检查节点中的每一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:23:48.187

这就是所谓的相关子查询。您可以[将此](http://dev.mysql.com/doc/refman//5.5/en/correlated-subqueries.html)作为参考或在 Stackoverflow 上发布的[这个](https://stackoverflow.com/questions/141278/subqueries-vs-joins)热门问题。一个更好的查询是：

```
SELECT lat,
       lon
FROM nodes n
JOIN ways_elements w ON n.id = w.node_id
WHERE way_id = '4962890' 
```

# java - 将 .class 文件加载到 jar 中？

> ID：16011610
> 
> 赞同：1
> 
> 时间：2013-04-15T09:18:03.753
> 
> 标签：java, class, jar, zip

是否可以执行以下任何操作？：

1.  从给定的 .class 文件创建一个新的 JAR 文件？
2.  将本地 .class 文件插入现有 JAR？

似乎我需要以某种方式将 .class 读入 a `JarEntry`，但这似乎不适用于任何现有的`JarEntry`构造函数。是否有任何解决方法或替代方法来实现这一点？

提前致谢

**编辑：**寻找编程解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:28:57.390

jar 文件只是其中包含类的 zip 文件。在机器上安装 java 后，您可以使用**jar**命令创建 jar 文件。

如果您使用 java IDE，它应该可以选择从某些类创建 jar 文件。

但是大多数人使用构建工具来实现这一点。众所周知且广泛使用的 java 构建工具是[Apache Ant](http://ant.apache.org/)或[Apache Maven](http://maven.apache.org/)。如果您是 Java 新手并且它是工具，那么开始使用 Apache Ant 可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:24:21.213

[使用 .class 文件，您可以使用JAD 反编译器](http://en.wikipedia.org/wiki/JAD_%28JAva_Decompiler%29)提取源代码。然后创建一个您自己的新 JAR 文件，您可以根据需要在其中修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:42:10.650

我编写了一些实用方法来使用 NIO2 File API（库是开源的）将文件添加到 ZIP/JAR 文件中：

马文：

```
<dependency>  
    <groupId>org.softsmithy.lib</groupId>  
    <artifactId>softsmithy-lib-core</artifactId>  
    <version>0.3</version>  
</dependency> 
```

教程：

[http://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html](http://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html)

API：[CopyFileVisitor.copy](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/org/softsmithy/lib/nio/file/CopyFileVisitor.html#copy%28java.nio.file.Path,%20java.nio.file.Path%29)

# symfony - 安装 Doctrine Migration 时的依赖混淆

> ID：16011617
> 
> 赞同：5
> 
> 时间：2013-04-15T09:18:38.930
> 
> 标签：symfony, doctrine-orm, composer-php

我正在尝试安装`doctrine-migrations-bundle`，但我收到了*您的要求无法解析为一组可安装的软件包*，这是日志

```
Loading composer repositories with package information
Updating dependencies (including require-dev)
Your requirements could not be resolved to an installable set of packages.  

  Problem 1  
   - Conclusion: remove symfony/symfony 2.1.x-dev  
   - Conclusion: don't install symfony/symfony 2.1.x-dev  
   - Conclusion: don't install symfony/symfony v2.1.9  
   - Conclusion: don't install symfony/symfony v2.1.8  
   - Conclusion: don't install symfony/symfony v2.1.7  
   - Conclusion: don't install symfony/symfony v2.1.6  
   - Conclusion: don't install symfony/symfony v2.1.5  
   - Conclusion: don't install symfony/symfony v2.1.4  
   - Conclusion: don't install symfony/symfony v2.1.3  
   - Conclusion: don't install symfony/symfony v2.1.2  
   - Conclusion: don't install symfony/symfony v2.1.1  
   - Conclusion: don't install symfony/symfony v2.1.0  
   - Conclusion: don't install symfony/symfony v2.1.0-RC2  
   - Conclusion: don't install symfony/symfony v2.1.0-RC1  
   - Conclusion: don't install symfony/symfony v2.1.0-BETA4  
   - Installation request for doctrine/doctrine-migrations-bundle dev-master -> satisfiable by doctrine/doctrine-migrations-bundle dev-master.  
   - Conclusion: don't install symfony/symfony v2.1.0-BETA3  
   - Installation request for symfony/config dev-master -> satisfiable by symfony/config dev-master, symfony/symfony dev-master, symfony/symfony 2.3.x-dev.  
   - Conclusion: don't install symfony/symfony v2.1.0-BETA2  
   - doctrine/doctrine-migrations-bundle dev-master requires symfony/framework-bundle >=2.1.0,<2.3-dev -> satisfiable by symfony/symfony 2.1.x-dev, symfony/symfony 2.1.x-dev, symfony/symfony 2.2.x-dev, symfony/symfony v2.1.0, symfony/symfony v2.1.1, symfony/symfony v2.1.2, symfony/symfony v2.1.3, symfony/symfony v2.1.4, symfony/symfony v2.1.5, symfony/symfony v2.1.6, symfony/symfony v2.1.7, symfony/symfony v2.1.8, symfony/symfony v2.1.9, symfony/symfony v2.2.0, symfony/symfony v2.2.0-BETA1, symfony/symfony v2.2.0-BETA2, symfony/symfony v2.2.0-RC1, symfony/symfony v2.2.0-RC2, symfony/symfony v2.2.0-RC3, symfony/symfony v2.2.1, symfony/framework-bundle 2.1.x-dev, symfony/framework-bundle 2.2.x-dev, symfony/framework-bundle v2.1.0, symfony/framework-bundle v2.1.1, symfony/framework-bundle v2.1.2, symfony/framework-bundle v2.1.3, symfony/framework-bundle v2.1.4, symfony/framework-bundle v2.1.5, symfony/framework-bundle v2.1.6, symfony/framework-bundle v2.1.7, symfony/framework-bundle v2.1.8, symfony/framework-bundle v2.1.9, symfony/framework-bundle v2.2.0, symfony/framework-bundle v2.2.0-BETA1, symfony/framework-bundle v2.2.0-BETA2, symfony/framework-bundle v2.2.0-RC1, symfony/framework-bundle v2.2.0-RC2, symfony/framework-bundle v2.2.0-RC3, symfony/framework-bundle v2.2.1\.  
   - Can only install one of: symfony/symfony v2.1.0-BETA1, symfony/symfony 2.2.x-dev.  
   - Can only install one of: symfony/symfony v2.2.0, symfony/symfony v2.1.0-BETA1\.  
   - Can only install one of: symfony/symfony v2.2.0-BETA1, symfony/symfony v2.1.0-BETA1\.  
   - Can only install one of: symfony/symfony v2.2.0-BETA2, symfony/symfony v2.1.0-BETA1\.  
   - Can only install one of: symfony/symfony v2.2.0-RC1, symfony/symfony v2.1.0-BETA1\.  
   - Can only install one of: symfony/symfony v2.2.0-RC2, symfony/symfony v2.1.0-BETA1\.  
   - Can only install one of: symfony/symfony v2.2.0-RC3, symfony/symfony v2.1.0-BETA1\.  
   - Can only install one of: symfony/symfony v2.2.1, symfony/symfony v2.1.0-BETA1\.  
   - don't install symfony/framework-bundle 2.2.x-dev|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.2.0|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.2.1|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle 2.1.x-dev|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.0|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.1|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.2|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.3|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.4|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.5|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.6|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.7|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.8|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.1.9|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.2.0-BETA1|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.2.0-BETA2|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.2.0-RC1|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.2.0-RC2|don't install symfony/symfony v2.1.0-BETA1  
   - don't install symfony/framework-bundle v2.2.0-RC3|don't install symfony/symfony v2.1.0-BETA1  
   - Installation request for symfony/symfony 2.1.* -> satisfiable by symfony/symfony 2.1.x-dev, symfony/symfony v2.1.0, symfony/symfony v2.1.0-BETA1, symfony/symfony v2.1.0-BETA2, symfony/symfony v2.1.0-BETA3, symfony/symfony v2.1.0-BETA4, symfony/symfony v2.1.0-RC1, symfony/symfony v2.1.0-RC2, symfony/symfony v2.1.1, symfony/symfony v2.1.2, symfony/symfony v2.1.3, symfony/symfony v2.1.4, symfony/symfony v2.1.5, symfony/symfony v2.1.6, symfony/symfony v2.1.7, symfony/symfony v2.1.8, symfony/symfony v2.1.9. 
```

这是我的`composer.json`

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": {
            "": "src/"
        }
    },
    "require": {
        "php": ">=5.3.2",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "doctrine/doctrine-migrations-bundle": "dev-master",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "sonata-project/user-bundle": "dev-master",
        "sonata-project/admin-bundle": "dev-master",
        "sonata-project/doctrine-orm-admin-bundle": "dev-master",
        "isoft/mssql-bundle": "master-dev",
        "sonata-project/cache-bundle": "dev-master",
    "symfony/config": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web",
        "symfony-assets-install": "symlink"
    }
} 
```

我从来不理解`composer`日志。

有人可以帮我破译错误，这样我就可以看到我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-04T18:27:03.020

我今天尝试安装时遇到了类似的问题`doctrine/doctrine-migrations-bundle`。我将在这里留下我的答案，因为虽然解决方案很简单，但我在其他地方没有找到它。

就像我们需要`doctrine/orm`拥有一样`doctrine/doctrine-bundle`，我们需要**`doctrine/migrations`**拥有`doctrine/doctrine-migrations-bundle`。

因此，将其也包含在您的`composer.json`:

```
{
    "require": {
        "doctrine/migrations": "dev-master",
        "doctrine/doctrine-migrations-bundle": "dev-master"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:11:02.807

您不能要求`symfony/config` `dev-master` *and* `symfony/symfony` `2.1`，因为主包替换了其他包。如果你改成`symfony/config`它`2.1.*`可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T10:24:06.613

[我现在已经能够使用packagist](https://packagist.org/)修复这种错误

# asp.net - 在 WCF 服务中使用 HTTP 绑定向所有客户端发送数据包

> ID：16011628
> 
> 赞同：0
> 
> 时间：2013-04-15T09:19:15.620
> 
> 标签：asp.net, wcf, web-services, soap

我创建了一个 wcf 服务。我想在每个时间间隔使用此服务向我的所有客户广播数据包。我使用了回调，但它是一个不同的概念。请让我知道我该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:59:54.327

回调合约将允许您向 Web 服务客户端发送推送。我不确定您所说的“不同的概念”是什么意思。

以我的经验，虽然它有效，但 WCF 中的回调合同充其量是复杂的。我将转向支持异步排队的绑定（如 netMsmqBinding）。

这将允许您存储有关服务客户端的服务信息，并在必要时将数据推送给它们。

# java - 范围混淆（对我而言）：DefaultTableModel 保持对 Vector 的引用。为什么？

> ID：16011630
> 
> 赞同：1
> 
> 时间：2013-04-15T09:19:19.773
> 
> 标签：java, swing, map, vector, scope

只有 loadDefaultTableModel 中 rowData 的最后一个 Vector 实例实际显示在实际的 JTable 中。这是为什么？

其他向量和其他数据正在被实例化，但没有被添加到模型中——显然。至少它们没有被显示。

如何确保模型包含所需的数据？所需数据由 Logger 输出，并且已经是 Vector 形式。我不明白这种不一致。

```
package net.bounceme.dur.nntp.swing;

import java.util.Map;
import java.util.Map.Entry;
import java.util.Vector;
import java.util.logging.Logger;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;
import net.bounceme.dur.nntp.gnu.PageMetaData;
import net.bounceme.dur.nntp.gnu.Page;
import net.bounceme.dur.nntp.gnu.Usenet;

public class ArticlesTable extends JScrollPane {

    private static final Logger LOG = Logger.getLogger(ArticlesTable.class.getName());
    private static final long serialVersionUID = 1L;
    private JTable jTable = new JTable();
    private DefaultTableModel defaultTableModel = new DefaultTableModel();
    private Page page;
    private Usenet usenetConnection = Usenet.INSTANCE;

    public ArticlesTable() throws Exception {
        page = new Page();//eh, throws Exception -- fix later
        LOG.fine(page.toString());  //empty Page
        initComponents();
    }

    @SuppressWarnings("unchecked")
    private void initComponents() {
        defaultTableModel = new DefaultTableModel(new Object[][]{
                    {"some", "text"}, {"any", "text"}, {"even", "more"},
                    {"text", "strings"}, {"and", "other"}, {"text", "values"}},
                new Object[]{"Column 1", "Column 2"});
        jTable.setModel(defaultTableModel);
        jTable.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        jTable.addMouseListener(new java.awt.event.MouseAdapter() {

            public void mouseReleased(java.awt.event.MouseEvent evt) {
                itemSelected();
            }
        });
        jTable.addKeyListener(new java.awt.event.KeyAdapter() {

            public void keyReleased(java.awt.event.KeyEvent evt) {
                itemSelected();
            }
        });

        setSize(2000, 2000);  //not sure these lines are quite right, but ok for now
        setViewportView(jTable);
        jTable.setVisible(true);
        setVisible(true);
    }

    private void itemSelected() {
        int row = jTable.getSelectedRow();
        int column = 0;
        Object selectedObject = jTable.getValueAt(row, column);
        int i = (int) selectedObject;
        Map<Integer, Message> messages = page.getMessages();
        Message message = messages.get(i);
        firePropertyChange("message", null, message);
    }

    public final void nextPage() throws Exception {
        LOG.fine("trying to get next page..." + page);
        PageMetaData pageMetaData = page.getPageMetaData();
        pageMetaData.next();  //only changes meta data
        page = usenetConnection.getPage(pageMetaData); //fetches actual data
        LOG.fine("was the page advanced?" + page);  //yes, logs show this
        loadDefaultTableModel();
        LOG.fine(page.toString());
    }

    @SuppressWarnings("unchecked")
    private void loadDefaultTableModel() throws MessagingException {
        LOG.fine("trying to load...");
        defaultTableModel = new DefaultTableModel();
        defaultTableModel.addColumn("index");
        defaultTableModel.addColumn("message subject");
        Vector rowData = new Vector(); //vector?! nothing better?
        Message message = null;
        Map<Integer, Message> messages = page.getMessages(); //sort this
        int key = 0;
        LOG.info("trying to traverse..." + messages.size()); //page meta data determines the size
        for (Entry<Integer, Message> entry : messages.entrySet()) {
            rowData.clear();
            key = entry.getKey();
            message = messages.get(key);
            rowData.add(key);
            rowData.add(message.getSubject());
            LOG.info("vector\t" + key + "\t" + message.getSubject());
            //the vector logs the data which **should** get added
            //to the table model
            defaultTableModel.addRow(rowData);  //adds same row over and over
        }
        jTable.setModel(defaultTableModel);
    }

    private Message getMessage(int i) {
        LOG.fine("trying to get\t\t" + i);
        Map<Integer, Message> messages = page.getMessages();
        Message m = messages.get(i);
        return m;
    }
} 
```

图片： ![在此处输入图像描述](https://i.stack.imgur.com/7GUno.png)

和一些输出：

```
INFO: trying to traverse...5
Apr 15, 2013 2:05:13 AM net.bounceme.dur.nntp.swing.ArticlesTable loadDefaultTableModel
INFO: vector    25  Re: Netbeans question?
Apr 15, 2013 2:05:13 AM net.bounceme.dur.nntp.swing.ArticlesTable loadDefaultTableModel
INFO: vector    27  Re: Helpppp plzzz
Apr 15, 2013 2:05:13 AM net.bounceme.dur.nntp.swing.ArticlesTable loadDefaultTableModel
INFO: vector    26  Re: writing Unix files on Windows
Apr 15, 2013 2:05:13 AM net.bounceme.dur.nntp.swing.ArticlesTable loadDefaultTableModel
INFO: vector    29  JTextPane.modelToView() exception
Apr 15, 2013 2:05:13 AM net.bounceme.dur.nntp.swing.ArticlesTable loadDefaultTableModel
INFO: vector    28  Java 6 update 39 to 41 balloon 
```

可以看出，每个向量实例都有正确的数据。然而，似乎只有第一个实例最终出现在 GUI 输出中。为什么？

它没有正确添加到模型中吗？模型是否没有正确更新表格？

为什么在 GUI 中看到的模型中的数据与记录的输出不匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:39:16.383

> 如何确保模型包含所需的数据？

`DefaultTableModel`是内部`TableModel`使用的基本实现`Vector`。*是一个广泛*`Vector`使用的同步遗留类。`System.arraycopy()`

 *由于您可能需要更好地控制内部数据结构，`AbstractTableModel`因此提供所需的事件管道并让您直接管理数据结构。

[*创建一个表模型*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)比较了这两种方法，这个说明的例子[可能](https://stackoverflow.com/a/9134371/230513)`Map`暗示了它的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:35:12.380

你的错误在这里： for (Entry entry : messages.entrySet()) { rowData.clear(); <-- 您总是在删除所有行数据，因此只存在最后一行数据。*

# php - 优化数据库请求数的最佳实践

> ID：16011634
> 
> 赞同：0
> 
> 时间：2013-04-15T09:19:23.807
> 
> 标签：php, mysql

我正在研究喜欢/不喜欢系统 (php+ajax+mysql) 。我的系统就像这里推荐的那样：[喜欢和不喜欢帖子系统](https://stackoverflow.com/questions/7169470/like-and-dislike-system-for-posts)。所以我对数据库有很多请求，例如：

1.  当用户喜欢（插入数据库）
2.  为这篇文章点赞（从 db 中选择）
3.  此外，当用户尝试点赞时，数据库中有检查标志。
4.  如果用户尝试两次为这篇文章点赞，请再次通过 db 检查标志。

这仅适用于一篇文章，但我也有评论，用户可以喜欢。是否有通过数据库进行此操作的好习惯，或者最好使用缓存/会话或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:23:12.850

如果您希望它在会话之间持续存在，那么您必须将其保存到某种数据库中。

您可以通过拥有一个从属仅读取而主仅写入的主从数据库来提高效率。

有更多方法可以做到这一点，具体取决于规格。

# jquery - 调用 Accounts.createUser 时，Meteor 表单元素会导致重新渲染和输入不保留

> ID：16011636
> 
> 赞同：0
> 
> 时间：2013-04-15T09:19:29.650
> 
> 标签：jquery, twitter-bootstrap, meteor

我构建了一个自定义表单，用于在 Meteor 中创建新用户。

```
<button id="hide-show">Hide/show registration form</button>

<div class="wrapper" style="display:none">
  <form>
    // some inputs, each with an id.
  </form>
  <button id="create-account">Create account</button>
</div> 
```

在我的模板中，我使用 jQuery .toggle() 在单击#hide-show 按钮时隐藏/显示包装表单的 div。单击#create-account 时，我还会调用 Accounts.createUser 。

首先，只要有一个包装输入的表单，当我调用 Accounts.createUser 时，整个页面似乎都会重新呈现。至少所有原始显示等于 none 的元素都会被隐藏，无论调用时它们的当前显示属性如何。（我也尝试过使用引导模式。当我调用 Accounts.createUser 时，模式会消失。）但是，删除表单元素并仅保留输入可以解决此问题（但会破坏表单的 css，因为引导程序希望输入被包装在某些行为的表单元素中）。

其次，即使我没有包装输入的表单元素，当 Accounts.createUser 导致错误（使用用户名等）时，它们也不会保留。我显然不想强迫用户重新输入他们的注册信息。我安装了保留输入，我什至尝试将输入包装在 {{#constant}} 中，但没有任何运气。

编辑：为了澄清，我在客户端上运行 Accounts.createUser。我不使用 Meteor.call 或任何其他方式调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:03:28.843

您可以在成功创建帐户时将其隐藏，而不是立即隐藏 div。我做过类似的事情，它仍在进行中，希望对您有所帮助

我的注册模板：

```
<template name="SignUpForm">    
    <div id="signUpForm" class="modal hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Sign Up</h3>
        </div>
        <form><div class="modal-body" align="center">
            <input type="text" id="usernameSU" placeholder="Username" /><br />
            <input type="password" id="passwordSU" placeholder="Password" /><br />
            <input type="password" id="passconf" placeholder="Password" /><br />
            <input type="text" id="email" placeholder="You@Email.com" /><br />
            {{> CurErr}}
         </div>
         <div class="modal-footer">
                <a href="#" id="btnSignUp" class="btn btn-primary">Sign Up</a>
        </div></form> 
    </div>
</template> 
```

CurErr 模板仅在引导警报中显示 curErr Session 变量中的任何内容。我的注册模板.js：

```
Template.SignUpForm.events({
'click #btnSignUp': function(e,t){
    signUpUser();
}
});

function signUpUser(){
    var password = $('#passwordSU').val();
    var passconf = $('#passconf').val();

    if (password !== passconf){
        Session.set('curErr', 'Password fields do not match');

    } else {
        var options = {
            username: $('#usernameSU').val(),
            password: $('#passwordSU').val(),
            email: $('#email').val(),
            profile: {}
        }

        try{
            //made a validation library, use your own validation logic here
            validate(options.username, 'username');
            validate(options.password, 'password');
            validate(options.email, 'email');

            Accounts.createUser(options, function(err){
                if(err){
                    Session.set('curErr', err.reason);
                }
                else
                    $('#signUpForm').modal('hide');
            });
        }catch(err){
            Session.set('curErr', err.reason);
        }
    }
} 
```

所以我的注册模式会在成功创建用户时隐藏，否则我会在表单上显示错误并且用户不会丢失任何数据，如果表单关闭，数据在重新打开时仍会保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T06:35:14.940

我遇到了同样的问题，结果证明我在高级模板的帮助程序中使用 Meteor.logginIn() 来显示加载页面。

即使 Accounts.createUser 失败，Meteor 似乎也会进入登录状态。当它执行时，它会导致加载模板呈现，然后它从 loggingIn 状态返回并导致另一个模板呈现。由于它在本地托管并且没有连接延迟，所有这一切都发生得如此之快，以至于您甚至看不到加载模板渲染，并且只是对为什么一切都闪烁和消失感到困惑。

唯一的解决方案是在不影响其余模板并导致它们重新渲染的较低级别模板中使用 Meteor.logginIn()。

理想情况下，除非帐户创建成功，否则 Accounts.createUser 不会将 Meteor.loggingIn 设置为 true 状态。

我在 github 上提交了一个问题（[问题 #1243](https://github.com/meteor/meteor/issues/1243)），但不幸的是，我不希望这是一个优先问题。

# ajax - AJAX加载数据时如何在主干模板上使用循环？

> ID：16011643
> 
> 赞同：0
> 
> 时间：2013-04-15T09:19:45.317
> 
> 标签：ajax, json, backbone.js

关于这个的一个简短的问题：http: [//jsfiddle.net/ambiguous/xczBy/](http://jsfiddle.net/ambiguous/xczBy/)

如果我的 Json 被 fetch() 加载了怎么办？**简单的例子**

```
var self = this;
this.collection.fetch({
      reset: true,
      success: function (model, attributes) {
                    self.render();
      }
}); 
```

我需要知道如何在我的循环模板中设置“帖​​子”

```
 <% _.each(posts, function(post){ %>
         <span class="day"><%=posts.day %></span><br />
    <% }); %> 
```

# jquery - 裹当@被按下时 - Jquery

> ID：16011648
> 
> 赞同：-2
> 
> 时间：2013-04-15T09:19:56.277
> 
> 标签：jquery, keypress

这是我得到的-：

`<div contenteditable="true">Hey man @tt</div>`

现在我想在输入`<a></a>`时环绕`@`。

例如，当`@`被按下时，html 将是

`<div contenteditable="true">Hey man <a>@</a>tt</div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:22:48.790

使用`replace()`.

尝试这个

```
var output= $('div').html().replace('@','<a>@</a>');
$('div').html(output); 
```

[在这里摆弄](http://jsfiddle.net/bipen/SJJq8/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:30:15.147

```
$('input').keypress(function(e){
    if ((e.shiftKey == true) && (e.charCode == 64))
    {
        $(this).html().replace('@','<a>@</a>');
    }
}); 
```

# iphone - 请建议，实现应用内购买（消耗品/非消耗品）的最佳方法是什么？

> ID：16011652
> 
> 赞同：-4
> 
> 时间：2013-04-15T09:20:06.373
> 
> 标签：iphone, ios, ipad, cocoa-touch

我想在我的应用程序中实现应用内购买。将有一百多种产品，每种产品都是固定费率的。苹果网站不会输入所有产品详细信息。将有一个单一的产品，我将为所有人重复使用相同的产品。请建议我可以使用的最佳方法（消耗品/非消耗品）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:08:19.773

您销售什么样的产品？取决于它，您将获得问题的答案，以下是一些注意事项：

*   如果您将 IAP 定义为非消耗品，则用户将只执行一次购买，下次您尝试向他出售具有相同 id 的产品时，Apple 将返回您已购买该产品的信息。

*   如果您将非消耗性产品定义为消耗性产品（例如用户可以下载的文件），您的应用可能会被拒绝。

*   如果作为最后一点的结果，如果您必须销售非消耗性产品，则必须将每个产品单独添加到 iTunes Connect。

您没有给我们足够的信息，但考虑到**我**从您的问题中得到的信息，我认为您将不得不创建非消耗品。

# php - PHP 日期计算显示下一个 6 月 1 日

> ID：16011657
> 
> 赞同：0
> 
> 时间：2013-04-15T09:20:31.043
> 
> 标签：php, date

我需要能够使用 PHP 计算显示下一个 6 月 1 日的日期。所以，今天是**2013 年 4 月 15 日**，因此我需要显示**01/06/2013（英国格式）**。如果日期是**2013 年 8 月 5 日，**我需要显示**01/06/2014**。

任何人都可以帮忙吗？

谢谢，

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:31:16.263

您可以使用以下方法实现此目的：

```
$now = time();
$june = strtotime("1st June");

if ($now > $june)
    echo date("d/m/Y", strtotime('+1 year', $june));
else 
    echo date("d/m/Y", $june); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:53:24.120

为此，您可以通过检查当前月份来实现

```
 if(date('m')>06)
   {
       $date= date('d-m-Y',strtotime("next year June 1st"));
    }
   else{
          $date= date('d-m-Y',strtotime("this year June 1st"));
    }
    echo $date; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:31:14.333

为当前年份创建一个新的 DateTime 对象。DateTime 是在 PHP 中处理日期的首选方式。

如果为时过早，请为下一年创建一个新的日期时间对象。

最后，使用“格式”来输出。

```
$d = new DateTime(date('Y').'-08-05');
if ($d < new DateTime()) {
  $d = new DateTime((date('Y')+1).'-04-15');
}

echo $d->format('d/m/Y'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-15T09:22:20.550

您可以使用本教程实现此目的。您可以定义时区并根据您的格式显示日期。

检查本手册。[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

这里给出了明确的例子：

```
 <?php
      // set the default timezone to use. Available since PHP 5.1
         date_default_timezone_set('UTC'); 
         echo $today = date("d/m/y");                         // 03/10/01
   ?> 
```

# web-services - CXF 自己自动生成 WSDL 导入？

> ID：16011661
> 
> 赞同：5
> 
> 时间：2013-04-15T09:20:45.700
> 
> 标签：web-services, wsdl, cxf

我使用 CXF 开发了一个代码优先的 SOAP Web 服务，这是我得到的一个 WSDL。为什么要在 WSDL 上导入

第二行是兴趣之一：

我猜也许它与命名空间有关？我想知道发布 Web 服务 impl 的代码是否有帮助？

```
<wsdl:import location="http://localhost:8080/abc/RaceCalc?wsdl=RaceCalc.wsdl" namespace="http://service.wrapper.ie/">
</wsdl:import> 
```

从 Web 服务生成的 WSDL：

```
 <?xml version='1.0' encoding='UTF-8'?><wsdl:definitions name="RaceCalcImplService" targetNamespace="http://impl.service.wrapper.ie/" xmlns:ns1="http://service.wrapper.ie/" xmlns:ns2="http://cxf.apache.org/bindings/xformat" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://impl.service.wrapper.ie/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <wsdl:import location="http://localhost:8080/abc/RaceCalc?wsdl=RaceCalc.wsdl" namespace="http://service.wrapper.ie/">
    </wsdl:import>
<wsdl:binding name="RaceCalcImplServiceSoapBinding" type="ns1:RaceCalc">
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
<wsdl:operation name="setRaceCalcHelper">
  <soap:operation soapAction="" style="document" />
  <wsdl:input name="setRaceCalcHelper">
    <soap:body use="literal" />
  </wsdl:input>
  <wsdl:output name="setRaceCalcHelperResponse">
    <soap:body use="literal" />
  </wsdl:output>
</wsdl:operation>
<wsdl:operation name="calculate">
  <soap:operation soapAction="" style="document" />
  <wsdl:input name="calculate">
    <soap:body use="literal" />
  </wsdl:input>
  <wsdl:output name="calculateResponse">
    <soap:body use="literal" />
  </wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="RaceCalcImplService">
<wsdl:port binding="tns:RaceCalcImplServiceSoapBinding" name="RaceCalcImplPort">
  <soap:address location="http://localhost:8080/abc/RaceCalc" />
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-23T09:46:32.407

因为您的实现中有两个不同的命名空间：{ [http://service.wrapper.ie/](http://service.wrapper.ie/) } 和 {http:// **impl** .service.wrapper.ie/}。你肯定有包中的接口`ie.wrapper.service`和`ie.wrapper.service.impl`. 因此，CXF 假设名称空间 { [http://service.wrapper.ie/](http://service.wrapper.ie/) } 用于逻辑内容（interface/portType），名称空间 { [http://impl.service.wrapper.ie/](http://impl.service.wrapper.ie/) } 用于物理内容（impl /服务/绑定）。将`@WebService(targetNamespace = "http://whatever.you.want")`注释添加到接口和实现应该删除 WSDL 中的（需要）导入。

# android - 是否可以以编程方式运行“pm create-user Name”命令？

> ID：16011662
> 
> 赞同：0
> 
> 时间：2013-04-15T09:20:45.730
> 
> 标签：android

我可以在模拟器上使用“pm create-user Name”终端命令在 Jellybean 上创建多用户配置文件，但我想知道有什么方法可以以编程方式运行相同的命令。我不想打开终端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:21:35.783

是的，您可以：

使用[Stericson RootTools](https://code.google.com/p/roottools/)：

> RootTools 为有根开发者提供了一套标准化的工具，用于开发有根应用程序。最后，我们将通过为开发人员提供强大、易于使用的库来实现这一目标，这将大大缩短开发时间并促进代码重用。该项目对任何认为自己有贡献的成熟开发人员开放。通过共同参与，我们可以简化我们自己的流程，提高我们应用程序的效率，学习新技术，并为我们的用户提供更好的体验。

使用[Android 运行时](http://developer.android.com/reference/java/lang/Runtime.html#exec%28java.lang.String%29)：

> 允许 Java 应用程序与它们运行的​​环境交互。应用程序不能创建此类的实例，但它们可以通过调用 getRuntime() 来获取单例实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:38:13.080

当在 4.1 中首次发现多用户功能时，我编写了一个应用程序来执行此操作。[我在这里](https://github.com/RaghavSood/UserManagement)开源了它。您可以在 TerminalUtils 中找到以编程方式运行该命令的代码，但我也会将其放在答案中。

```
public static void createUser(String name)
{
    Process p;
    try {
        p = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(p.getOutputStream());  

        os.writeBytes("pm create-user \"" + name + "\"\n");
        os.writeBytes("exit\n");
        os.flush();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

TerminalUtils 还包含删除和重命名用户的方法。

# .net - Windows 毫秒计时 - 没有忙等待？

> ID：16011663
> 
> 赞同：0
> 
> 时间：2013-04-15T09:20:47.737
> 
> 标签：.net, c, windows, timing

我正在编写一个应用程序，将输入从一个设备转换到另一个设备——比如一种头部跟踪格式到另一种格式，主要用于为游戏中的多种头部跟踪提供支持。

大多数情况下，我的程序的输入是通过轮询共享内存来传递的。但是，在紧密循环中这样做会不必要地消耗 CPU 内核。应用程序必须不降低游戏体验。

Windows 上的默认计划时间似乎是 60 赫兹，所以睡眠几乎没有了。我需要的时间少于 5 毫秒，但偶尔出现的问题是可以的。

我宁愿不通过影响​​系统范围的计时器来影响系统配置。

我有什么选择可以防止消耗核心，但仍然主要使用 C 或 .net 每 1-5 毫秒左右执行一次方法？

我正在寻找适用于 Windows 7 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:00:10.690

Looks like your only two options are:

1.  Using [Multimedia Timers](http://msdn.microsoft.com/en-us/library/dd757634%28v=vs.85%29.aspx), but you seem to dislike the idea.
2.  Sprinkling a function call in all of your long loops, checking there the `TSC` or the [`Performance Counter`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx) and executing whatever needs to be executed if the time is right.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T09:51:12.117

如果无法实现进程间同步，请尝试使用`SetTimer`函数。它可以以毫秒为间隔调用您的回调。

如果你想要一个毫秒级的睡眠，你可以使用`WaitForSingleObject`. 只要给它一些永远不会改变自己状态的事件句柄。

然而，所有这些选项都非常不可靠，因为 Windows 不给你时间保证，如果系统过载，结果将不是很好。

# java - 结合形式和选择

> ID：16011665
> 
> 赞同：0
> 
> 时间：2013-04-15T09:20:56.800
> 
> 标签：java, forms, servlets, select, action

当我将表格放在评论中时，它可以工作。但我需要一个表单，因为我需要将操作称为“onclick”。使用此代码，它将值打印在一行中。

现在他在一个长字符串中打印：AprilMayJuneJulyAugustSeptemberOctoberNovemberDecember。它必须在下拉列表中。

请问需要帮忙吗？

```
 HTMLCode += "<form name='month' onclick=\"window.open('availability.jsp?user=99&clickeddate="+dateFormat.format(today.getTime())+"&month=" + avail.getMaand() + "','_self')\"";
    HTMLCode += "<select onchange='javascript:setMonth(\"" + m + "\");'>";
    for (m=today.get(Calendar.MONTH); m<12; m++){    
    if(month == m)
    HTMLCode += "<option value='" + m + "' selected>" + maand_voluit[m]+ "</option>";
    else
    HTMLCode += "<option value='" + m + "'>" + maand_voluit[m] + "</option>";
    }
    HTMLCode += "</select>";
    HTMLCode += "</form>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:27:06.863

`>`您在表单标签中错过了：

```
HTMLCode += "<form name='month' 
   onclick=\"window.open('availability.jsp?
   user=99&clickeddate="+dateFormat.format(today.getTime())+"&month=" + avail.getMaand() +
   "','_self')\">";

                ^
                |
                |
             This one 
```

所以这并不能构成有效的 html，因此您可以在一行中获得所有内容，而不是您所期望的。

另外，提示一下，使用 JSP，因为它们简洁易读。

# google-app-engine - 用于 GWT 的 Google 端点客户端库

> ID：16011670
> 
> 赞同：4
> 
> 时间：2013-04-15T09:21:04.253
> 
> 标签：google-app-engine, gwt, google-cloud-endpoints

有谁知道 Google 是否计划为 GWT 发布一个端点客户端库？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:56:06.507

这样的客户端库已经存在：

[https://code.google.com/p/gwt-google-apis/](https://code.google.com/p/gwt-google-apis/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:22:37.187

Google 不再开发 GWT（[自有](http://www.javaworld.com/javaworld/jw-06-2012/120629-google-hands-gwt-to-committee.html)），所以答案是否定的，但有些人正在创建 GWT 库来与 REST API 通信（无论背后的技术是什么：JAX-RS、端点......）。

看看[RestyGWT](http://restygwt.fusesource.org/)

> RestyGWT 是一个用于 REST 服务和 JSON 编码数据传输对象的 GWT 生成器。

# sql - 获取特定视图中引用的表的索引统计信息

> ID：16011675
> 
> 赞同：0
> 
> 时间：2013-04-15T09:21:13.233
> 
> 标签：sql, sql-server, sql-server-2012

我正在尝试修改以下脚本以仅指向与特定视图*关联*`vw_foo`的索引。这可能吗？

```
SELECT name AS index_name,
STATS_DATE(OBJECT_ID, index_id) AS StatsUpdated
FROM sys.indexes 
```

* * *

**编辑**

当我说“关联”时，我指的是用于创建视图的基础表上的索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:34:15.903

现有的答案可能正朝着检查名称的方向发展，`sys.objects`但从未这样做。但无论如何都没有必要这样做，因为该`OBJECT_ID()`功能可以让您`object_id`以一种干净的方式获得：

```
SELECT name AS index_name,
STATS_DATE(OBJECT_ID, index_id) AS StatsUpdated
FROM sys.indexes
WHERE object_id = OBJECT_ID('vw_foo') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:29:45.687

可能对你有帮助——

```
SELECT 
      SCHEMA_NAME(o.[schema_id]) + '.' + o.name
    , s.name
    , statistics_update_date = STATS_DATE(o.[object_id], stats_id) 
FROM sys.objects o
JOIN sys.stats s ON o.[object_id] = s.[object_id]
WHERE o.[type] = 'V' AND o.name = 'vw_foo'

DECLARE @table_name SYSNAME
SELECT @table_name = 'dbo.vw_foo' 
```

**已编辑**

> 当我说“关联”时，我指的是视图使用的表上的索引

此查询返回使用指定表的视图列表 + 显示有关已使用索引的附加信息 -

```
SELECT 
      o.table_name
    , b.view_name
    , i.name
    , stast_updates = STATS_DATE(i.[object_id], i.index_id)
    , dm_ius.last_user_seek
    , dm_ius.last_user_scan
    , dm_ius.last_user_lookup
    , dm_ius.last_user_update
    , dm_ius.user_updates
    , dm_ius.user_lookups
    , dm_ius.user_scans
    , dm_ius.user_seeks
FROM (
    SELECT
          table_name = s.name + '.' + o.name
        , o.[object_id]
    FROM sys.objects o
    JOIN sys.schemas s ON o.[schema_id] = s.[schema_id]
    WHERE o.[type] = 'U'
        AND s.name + '.' + o.name = @table_name
) o
JOIN sys.indexes i ON o.[object_id] = i.[object_id]
                  AND i.[type] > 0
                  AND i.is_disabled = 0
                  AND i.is_hypothetical = 0
LEFT JOIN sys.dm_db_index_usage_stats dm_ius ON i.index_id = dm_ius.index_id AND dm_ius.[object_id] = i.[object_id]  
OUTER APPLY (
    SELECT 
          view_name = r.referencing_schema_name + '.' + r.referencing_entity_name
        , r.referencing_id
    FROM sys.dm_sql_referencing_entities (o.table_name, 'OBJECT') r
    JOIN sys.objects o2 ON r.referencing_id = o2.[object_id]
    WHERE o2.[type] = 'V'
) b
WHERE b.view_name IS NOT NULL 
```

# c++ - 使用 Proc 文件计算 %CPU 使用率

> ID：16011677
> 
> 赞同：1
> 
> 时间：2013-04-15T09:21:35.813
> 
> 标签：c++, c, linux

我想在我的程序中专门设置一个线程来收集有关其性能的指标。内存使用情况、CPU 等。我一直在尝试使用 /proc/stat 和 /proc/pid/stat 文件来执行此操作。我目前一直在尝试测量 %CPU 使用率。我的程序报告的值与“顶部”报告的值完全不一致。我在几个不同的 linux 发行版上尝试过这个，并且在每个发行版上都看到了相同的结果。

这是我用来计算百分比的代码。任何人都可以在这里发现任何问题吗？

[https://github.com/mmcilroy/cpu_usage](https://github.com/mmcilroy/cpu_usage)

```
#include <stdlib.h>
#include <sys/types.h>
#include <sys/times.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

struct pstat {
    long unsigned int utime_ticks;
    long int cutime_ticks;
    long unsigned int stime_ticks;
    long int cstime_ticks;
    long unsigned int vsize; // virtual memory size in bytes
    long unsigned int rss; //Resident  Set  Size in bytes
    long unsigned int cpu_total_time;
};

int get_usage(const pid_t pid, struct pstat* result) {

    //convert  pid to string
    char pid_s[20];
    snprintf(pid_s, sizeof(pid_s), "%d", pid);

    char stat_filepath[30] = "/proc/"; strncat(stat_filepath, pid_s,
            sizeof(stat_filepath) - strlen(stat_filepath) -1);
    strncat(stat_filepath, "/stat", sizeof(stat_filepath) -
            strlen(stat_filepath) -1);

    FILE *fpstat = fopen(stat_filepath, "r");
    if (fpstat == NULL) {
        perror("FOPEN ERROR ");
        return -1;
    }

    FILE *fstat = fopen("/proc/stat", "r");
    if (fstat == NULL) {
        perror("FOPEN ERROR ");
        fclose(fstat);
        return -1;
    }

    //read values from /proc/pid/stat
    bzero(result, sizeof(struct pstat));
    long int rss;
    if (fscanf(fpstat, "%*d %*s %*c %*d %*d %*d %*d %*d %*u %*u %*u %*u %*u %lu"
                "%lu %ld %ld %*d %*d %*d %*d %*u %lu %ld",
                &result->utime_ticks, &result->stime_ticks,
                &result->cutime_ticks, &result->cstime_ticks, &result->vsize,
                &rss) == EOF) {
        fclose(fpstat);
        return -1;
    }
    fclose(fpstat);
    result->rss = rss * getpagesize();

    //read+calc cpu total time from /proc/stat
    long unsigned int cpu_time[10];
    bzero(cpu_time, sizeof(cpu_time));
    if (fscanf(fstat, "%*s %lu %lu %lu %lu %lu %lu %lu %lu %lu %lu",
                &cpu_time[0], &cpu_time[1], &cpu_time[2], &cpu_time[3],
                &cpu_time[4], &cpu_time[5], &cpu_time[6], &cpu_time[7],
                &cpu_time[8], &cpu_time[9]) == EOF) {
        fclose(fstat);
        return -1;
    }

    fclose(fstat);

    for(int i=0; i < 4;i++)
        result->cpu_total_time += cpu_time[i];

    printf( "usage: cpu %lu, utime %lu, stime %lu\n", result->cpu_total_time, result->utime_ticks, result->stime_ticks );

    return 0;
}

void calc_cpu_usage_pct(const struct pstat* cur_usage,
                        const struct pstat* last_usage,
                        double* usage)
{
    printf( "delta: cpu %lu, utime %lu, stime %lu\n",
        cur_usage->cpu_total_time - last_usage->cpu_total_time,
        cur_usage->utime_ticks - last_usage->utime_ticks,
        cur_usage->stime_ticks - last_usage->stime_ticks );

    const long unsigned int cpu_diff = cur_usage->cpu_total_time - last_usage->cpu_total_time;
    const long unsigned int pid_diff =
        ( cur_usage->utime_ticks + cur_usage->utime_ticks + cur_usage->stime_ticks - cur_usage->stime_ticks ) -
        ( last_usage->utime_ticks + last_usage->utime_ticks + last_usage->stime_ticks - last_usage->stime_ticks );

    *usage = 100.0 * ( (double)pid_diff / (double)cpu_diff );
}

int main( int argc, char* argv[] )
{
    pstat prev, curr;
    double pct;

    struct tms t;
    times( &t );

    if( argc <= 1 ) {
        printf( "please supply a pid\n" ); return 1;
    }

    while( 1 )
    {
        if( get_usage(atoi(argv[1]), &prev) == -1 ) {
            printf( "error\n" );
        }

        sleep( 5 );

        if( get_usage(atoi(argv[1]), &curr) == -1 ) {
            printf( "error\n" );
        }

        calc_cpu_usage_pct(&curr, &prev, &pct);

        printf("%%cpu: %.02f\n", pct);
    }
} 
```

如果您想自己尝试一下，该程序需要 1 个参数 - 要监控的进程的 pid

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-03T21:22:13.873

我知道这有点老了，但我可以解释为什么你的新方程有效：`(1/INTERVAL) * (pid diff)`

这只是基本百分比方程的简化`100 * (pid diff) / (cpu diff)`，看起来就像您在第一个示例中尝试做的那样。

/proc/stat 中的 cpu 时间（以及 /proc/pid/stat 中的 utime 和 stime）以 USER_HZ（或 jiffies）报告。这个值*通常是*1/100 秒。这意味着 CPU 每秒将有 100 个“抽动”，这意味着您的“CPU diff”将为`INTERVAL*100`.

代入，你得到：

> 100 * (pid 差异) / (INTERVAL * 100)

取消 100，您将得到：

> （pid 差异）/间隔

这与您现在使用的相同。这也意味着，如果您确实纠正了顶部代码中的问题，那么它也*应该可以*正常工作。pid 差异应该是`(curr utime + curr stime) - (prev utime + prev stime)`. 如果它不起作用，那么您添加 CPU 时间的方式可能是错误的？它很容易测试，因为您知道它应该是什么值`(INTERVAL*100)`。

由于您现在有一个工作方程式，您可能不关心原始代码的问题，但请记住，如果您尝试在 USER_HZ*不是*1/100 的系统上使用它，则方程式将无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T21:22:13.703

我检查了 top 的来源（来自 procps）。似乎它本质上是在执行以下计算......

(1/间隔) * (utime+stime)

其中间隔是样本之间的秒数。utime / stime 直接从 /proc/pid/stat 读取

我必须承认我不明白为什么会这样（它不应该根据“man proc”），但我已经用许多不同的场景对此进行了测试，并且我的程序的输出总是与“top”的输出相匹配。

有兴趣听到一些关于为什么这样做的反馈:)

这是我最新的来源

```
#include <stdlib.h>
#include <sys/types.h>
#include <sys/times.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

#define INTERVAL 3

struct pstat {
    long unsigned int utime_ticks;
    long int cutime_ticks;
    long unsigned int stime_ticks;
    long int cstime_ticks;
    long unsigned int vsize; // virtual memory size in bytes
    long unsigned int rss; //Resident  Set  Size in bytes
};

int get_usage(const pid_t pid, struct pstat* result) {

    //convert  pid to string
    char pid_s[20];
    snprintf(pid_s, sizeof(pid_s), "%d", pid);

    char stat_filepath[30] = "/proc/"; strncat(stat_filepath, pid_s,
            sizeof(stat_filepath) - strlen(stat_filepath) -1);
    strncat(stat_filepath, "/stat", sizeof(stat_filepath) -
            strlen(stat_filepath) -1);

    FILE *fpstat = fopen(stat_filepath, "r");
    if (fpstat == NULL) {
        perror("FOPEN ERROR ");
        return -1;
    }

    //read values from /proc/pid/stat
    bzero(result, sizeof(struct pstat));
    long int rss;
    if (fscanf(fpstat, "%*d %*s %*c %*d %*d %*d %*d %*d %*u %*u %*u %*u %*u %lu"
                "%lu %ld %ld %*d %*d %*d %*d %*u %lu %ld",
                &result->utime_ticks, &result->stime_ticks,
                &result->cutime_ticks, &result->cstime_ticks, &result->vsize,
                &rss) == EOF) {
        fclose(fpstat);
        return -1;
    }
    fclose(fpstat);
    result->rss = rss * getpagesize();

    return 0;
}

void calc_cpu_usage_pct(const struct pstat* cur_usage,
                        const struct pstat* last_usage,
                        double* usage)
{
    const long unsigned int pid_diff =
        ( cur_usage->utime_ticks + cur_usage->stime_ticks ) -
        ( last_usage->utime_ticks + last_usage->stime_ticks );

    printf( "delta %lu\n", pid_diff );

    *usage = 1/(float)INTERVAL * pid_diff;
}

int main( int argc, char* argv[] )
{
    pstat prev, curr;
    double pct;

    struct tms t;
    times( &t );

    if( argc <= 1 ) {
        printf( "please supply a pid\n" ); return 1;
    }

    while( 1 )
    {
        if( get_usage(atoi(argv[1]), &prev) == -1 ) {
            printf( "error\n" );
        }

        sleep( INTERVAL );

        if( get_usage(atoi(argv[1]), &curr) == -1 ) {
            printf( "error\n" );
        }

        calc_cpu_usage_pct(&curr, &prev, &pct);

        printf("%%cpu: %.02f\n", pct);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:01:36.570

The main loop is somewhat off: instead of getting "prev", then sleeping, then getting "next" and calculating the difference, you should get "prev" once outside the loop, and inside the loop get "curr", calculate, the copy "curr" into "prev" and then loop again. This fixes the part where 50% of the used time is not counted.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T09:54:20.317

linux中的这个命令可能对linux有用。

```
# apt-get install sysstat
# up2date sysstat
# mpstat 
```

现在您将了解如何找到如何将命令行输出作为字符串并进行解析。您还可以使用 mpstat 的不同参数。也试试`$ top`。

从此[链接](https://stackoverflow.com/questions/9229333/how-to-get-overall-cpu-usage-e-g-57-on-linux)获得帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T10:08:30.130

试试看最上面的命令源码，busybox里会有源码

**编辑**：将 mpstat 替换为 top 因为 mpstat 显示整体使用情况

# ios - MKMapView removeOverlay 在临时分发中崩溃-不在开发版本中

> ID：16011682
> 
> 赞同：0
> 
> 时间：2013-04-15T09:21:48.927
> 
> 标签：ios, xcode, mkmapview, ad-hoc-distribution

我无法在我的应用程序中找到错误，因为它仅在临时安装后才出现。我已将其范围缩小为`[self.mapview removeOverlay:overlay];`'[self.mapview addOverlay:overlay]。如果我通过 Xcode (4.6.1) 安装和调试，具有完全相同步骤的完全相同的代码可以在几分钟前工作。我不会在测试之间更改任何其他设置。我只是存档并分发应用程序，或者我按下运行按钮并将其推送到我的 iPad。一次有效，一次失败。

Xcode->device = 覆盖可以随心所欲 Xcode->adhoc->server->device = 当我尝试删除可见覆盖或添加地图现在可以看到的区域内的覆盖时，应用完全冻结

我查看了设备上的崩溃日志，它总是在 [MKOverlayClusterView didAddSubview:] 或 [MKOverlayClusterView willRemoveSubview:]

这是崩溃日志中显示的主线程

```
0   libsystem_kernel.dylib        0x3c4ff27c __psynch_rw_wrlock + 24
1   libsystem_c.dylib             0x3c44fbd6 pthread_rwlock_wrlock + 334
2   MapKit                        0x34fb321e -[MKOverlayClusterView willRemoveSubview:] + 50
3   UIKit                         0x3614b2d2 __UIViewWillBeRemovedFromSuperview + 126
4   UIKit                         0x35f93844 -[UIView(Hierarchy) removeFromSuperview] + 52
5   MapKit                        0x34fae5b0 -[MKOverlayContainerView _removeOverlayView:forOverlay:coalesce:] + 24
6   MapKit                        0x34fae118 -[MKOverlayContainerView removeOverlays:] + 240 
```

值得注意的是，在两个添加/删除变体中，堆栈的最后一个顶部是相同的，所以这可能是 pthread_rwlock_wrlock 的问题，这意味着我在某些时候已经越过了线程。我试图通过使用 [self performSelectorOnMainThread:@selector(mainThreadRemoveOverlays:) withObject:@[overlay] waitUntilDone:YES]; 但是当通过 adhoc 方法安装应用程序时崩溃一直发生，并且在通过 Xcode 调试时永远不会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:44:49.220

我有类似的问题。我正在向地图添加地图叠加层。测试时工作正常，但不适用于 Ad hoc 部署。我的解决方案是我放错了箱子。当文件名实际上是 Map.jpeg 时，我正在使用 map.jpeg。

地图.jpeg != 地图.jpeg

由于地图正在进行测试，我只是假设这是正确的名称。我花了一段时间才发现这是问题所在。不知道为什么我的 iPhone 5 或模拟器没有选择这个。

在部署之前清理你的项目也是很好的。

希望这可以帮助

# javascript - JavaScript (WebGL) 开源光线追踪器（非实时）

> ID：16011691
> 
> 赞同：1
> 
> 时间：2013-04-15T09:22:36.240
> 
> 标签：javascript, 3d, webgl, raytracing

我想在浏览器中使用 RayTracing 算法渲染图像并将渲染的位图发送到服务器。使用 WebGL / JavaScript 可以实现这一点吗？如果可能，那么我可以使用哪个非实时开源光线追踪器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:11:22.610

[OCLToys](http://code.google.com/p/ocltoys/)包括一个开源 OpenCL 路径跟踪器 (SmallPTGPU)。还有一个[WebCL 版本](https://ocltoys.googlecode.com/hg/web/webcl/smallptgpu/webcl-smallptgpu.html)可以很容易地适应您的任务。

# c++ - 由于构造函数，即将出现分段错误

> ID：16011701
> 
> 赞同：0
> 
> 时间：2013-04-15T09:23:08.740
> 
> 标签：c++, pointers, constructor, segmentation-fault

我编写了一个 C++ 代码来构建二叉搜索树。代码编译正确，但是当我尝试运行可执行文件时，它给出了分段错误。下面是我的代码：

```
 #include <iostream>

using namespace std;

struct Node{
    Node *parent, *right, *left; 
    int data;
};

class bst{
    private:
    Node* root;

    public:
        bst (int data);
        void insert (Node * node, int data);
        void insert (int data);
        Node * search (int data);
        Node * search (Node * node, int data);
        // remove (Node * node, int data);
};

bst::bst (int data){
    root -> data = data;
}

void bst::insert (Node * node, int data){
    if (node == NULL){
        node -> data = data;
    }
    else if (data < node -> data){
        insert (node -> left, data);
    }
    else if (data > node -> data){
        insert (node -> right, data);
    }
}

void bst::insert (int data){
    insert (root, data);
}

Node * bst::search (Node * node, int data){
    if (node == NULL || node -> data == data)
        return node;
    else if (data < node -> data)
        return search (node -> left, data);
    else if (data > node -> data)
        return search (node -> right, data);
}

Node * bst::search (int data){
    search (root, data);
}

int main(){
    cout << "main entry\n";
    bst __bst (10);
    cout << "new causing problem\n";
    bst bst2(1);
//  bst *my_bst = new bst(10);
    cout << "tree created\n";
/*  my_bst -> insert(32);
    my_bst -> insert(3);
    my_bst -> insert(36);
    my_bst -> insert(93);
    my_bst -> insert(23);
    cout << "insertion completed\n";

    if (my_bst -> search(4) == NULL )
        cout << "4 does not exist\n";
    if (my_bst -> search(36) != NULL)
        cout << "36 exists in tree\n";
*/  return 0;
} 
```

在调试问题时，我发现了一个有趣的观察结果。当 main 函数只包含**bst 时 __bst(10);** 对象定义和**“新引起的问题\n”**注释之后，它不会打印任何内容。所以我假设第一个对象定义引起了问题。但是当我把**bst bst2(1);** 或**bst *my_bst = new bst(10);** 总的来说，分段错误再次发生，但在打印**“新导致问题\n”之前不会发生。**所以执行确实达到了这一点。所以第一个对象定义在这种情况下没有引起任何问题。

有人可以说出导致分段错误的原因以及为什么会发生这种奇怪的事情。

**编辑：** 正如你们所有人指出的那样，我试图在构造函数代码期间取消引用 NULL 指针，我做了建议的更改并且代码运行良好。但是我有一个类似的程序，即使没有这些更改也能正常工作。下面是代码：

```
#include <iostream>

using namespace std;

struct Name{
    string first_name;
    string last_name;
};

class Person{
    public:
    Person (string first_name, string last_name){
            name -> first_name = first_name;
            name -> last_name = last_name;
    }   

    int get_age(){
            return age;
    }   

    void set_age (int new_age){
            age = new_age;
    }   

    string get_first_name(){
            return name -> first_name;
    }   

    string get_last_name(){
            return name -> last_name;
    }   

    private:
    Name * name;
    int age;
};

int main (){ 
    Person prince ("Prince", "Kumar");
    cout << prince.get_first_name() << endl;
    cout << prince.get_age() << endl;
    return 0;
} 
```

在这种情况下，程序运行得非常好。是否为指针`Name`分配了一些空间的默认构造函数。`name`我知道它将 0 值分配给数字类型，将 NULL 分配给指针、对象和字符串。我对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:27:03.547

```
private:
    Node* root; 
```

root 没有在构造函数中初始化

```
bst::bst (int data){
    root -> data = data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:27:16.110

您在`insert()`当树为空的情况下取消引用空指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:28:12.307

在您的构造函数中，您正在取消引用作为指针的根而不为其分配任何内存，这是[未定义的行为](https://stackoverflow.com/questions/6793262/why-dereferencing-a-null-pointer-is-undefined-behaviour)：

```
bst::bst (int data){
  root -> data = data;
} 
```

这样的事情就足够了：对于这个问题

```
bst::bst (int data) : root( new Node ) 
                      ^^^^^^^^^^^^^^^^ 
{
  root -> data = data;
} 
```

只需使用初始化列表来分配内存。你的`insert`方法也有同样的问题：

```
if (node == NULL){
    node -> data = data;
} 
```

解决方案类似：

```
node = new Node ;
node->data = data ; 
```

尽管您需要正确地进行初始化`right`，但要使其正常工作`left`，`parent`我建议`Node`为此使用构造函数：

```
Node() : parent(NULL), right(NULL), left(NULL) {} 
```

这些修复程序似乎可以为您提供一个工作程序。

# javascript - 拉斐尔的锥形线

> ID：16011709
> 
> 赞同：0
> 
> 时间：2013-04-15T09:23:33.763
> 
> 标签：javascript, raphael

我正在尝试绘制一些动画的草叶，并且我想生成一条底部较厚而顶部较薄的锥形曲线。我能想到的唯一方法是绘制曲线，每条曲线的长度较短，线宽较大。

我很好奇是否有人有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T07:17:49.683

请尝试以下功能。它绘制了草的开放轮廓。您可以对其进行修改以满足您的需要。为拉斐尔编码。

```
/**
 * drawAGrass draws an open base grass.
 * @param   paper   Raphael paper instance
 * @param   baseX   X position of the grass base center
 * @param   baseY   Y position of the grass base center
 * @param   baseW   Width of the grass base
 * @param   length  Length of the grass
 * @param   tilt    Angle of shift of the grass tip; Safe range: [-45, 45]
 */
function drawAGrass (paper, baseX, baseY, baseW, length, tilt) {
    var x1 = baseX + baseW * 0.5,
        x2 = baseX - baseW * 0.5,
        ang = (180 - tilt) * Math.PI / 180,
        x = Math.round(baseX + length * Math.sin(ang)),
        y = Math.round(baseY + length * Math.cos(ang));

    paper.path(['M', baseX, baseY, 'Q', baseX, y, x, y]);
    paper.path(['M', x1, baseY, 'Q', x1, y, x, y]);
    paper.path(['M', x2, baseY, 'Q', x2, y, x, y]);
} 
```

像下面这样使用它。

```
var paper = Raphael(0, 0, 500, 350);
drawAGrass(paper, 250, 330, 15, 150, 25); 
```

# java - 如何使用swing清空java中的密码字段值（字符串）

> ID：16011717
> 
> 赞同：0
> 
> 时间：2013-04-15T09:24:05.277
> 
> 标签：java, swing, jpasswordfield

我有文本字段和密码字段。我能够将字符串写入文本字段和密码字段，但无法将密码字段的文本设置为空。

错误出现“方法 setText(String) 未定义字符串类型”

```
JTextField jtf=new JTextField(8);
JPasswordField jpwf=new JPasswordField(8);
String value= jtf.getText();
String jpwf= jpwfName.getText();
jtfName.setText("");
**Error on this line**//jpwf.setText(""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:26:02.633

您没有`setText()`在正确的变量上调用该方法。采用

```
jpwf.setText(""); 
```

代替

```
pwd.setText(""); 
```

在此之前还有另一个问题，你声明了两次变量`jpwf`（一次 with`JPasswordField`和一次 with `String`）。也许这只是一个错字。

您收到的错误表明您有一个`jpwf`类型的变量，`String`其中没有名为 的方法`setText()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:15:30.877

你可以使用这个代码

```
 jpwf.setText(""); 
```

在你输入的行中

```
 jtfName.setText(""); 
```

# java - java - 如何在java swing中设置Filepicker以仅选择特定文件？例如。仅以 .mo 作为扩展名的文件

> ID：16011720
> 
> 赞同：1
> 
> 时间：2013-04-15T09:24:09.950
> 
> 标签：java, swing, jfilechooser

该文件必须是工具的输入文件才能进一步处理它。

我是java新手..会感谢任何帮助。

这是我当前的文件选择器代码。

```
private void browseButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                              
        // TODO add your handling code here:
        JFileChooser chooser = new JFileChooser();
      chooser.showOpenDialog(null);
      File f = chooser.getSelectedFile();
      String filename = f.getAbsolutePath();
      textField1.setText(filename);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:27:12.477

也许您想阅读 API 文档： [http ://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html)

上面写着：

> 以下代码为用户的主目录弹出一个文件选择器，该目录只显示 .jpg 和 .gif 图像：
> 
> ```
> JFileChooser chooser = new JFileChooser();
> FileNameExtensionFilter filter = new FileNameExtensionFilter(
>     "JPG & GIF Images", "jpg", "gif");
> chooser.setFileFilter(filter);
> int returnVal = chooser.showOpenDialog(parent);
> if(returnVal == JFileChooser.APPROVE_OPTION) {
>    System.out.println("You chose to open this file: " +
>         chooser.getSelectedFile().getName());
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:28:46.730

尝试将 FileFilter 与 JFileChooser 一起使用。使用文件过滤器，您可以指定要填充的文件类型（仅说 .jpg 文件）。这是你的参考链接。* [http://www.cs.cf.ac.uk/Dave/HCI/HCI_Handout_CALLER/node99.html](http://www.cs.cf.ac.uk/Dave/HCI/HCI_Handout_CALLER/node99.html) *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:14:34.080

您可以创建自定义文件过滤器，例如

```
class Chooser extends JFrame {
        JFileChooser chooser;
        String fileName;

        public Chooser() {
            chooser = new JFileChooser();

            int retVal = 0;
            chooser.setAcceptAllFileFilterUsed(false);
            chooser.addChoosableFileFilter(new CUFilter());
            retVal = chooser.showOpenDialog(null);

            if (retVal == JFileChooser.APPROVE_OPTION) {
                fileName = chooser.getSelectedFile().getPath();
                // Ok logic
            }
        }
    }

    class CUFilter extends FileFilter {

        public boolean accept(File f) {
            if (f.isDirectory())
                return true;
            String s = f.getName();
            int i = s.lastIndexOf('.');

            if (i > 0 && i < s.length() - 1)
                if (s.substring(i + 1).toLowerCase().equals("mo"))
                    return true;

            return false;
        }

        public String getDescription() {
            return "Accept .mo files only";
        }
    } 
```

# jquery - 将json数据从父窗口发送到子窗口

> ID：16011728
> 
> 赞同：0
> 
> 时间：2013-04-15T09:24:41.347
> 
> 标签：jquery, jquery-dialog

我的 jsp 页面中有一个按钮。每当我单击该按钮时，我都会打开一个新窗口。

> 在打开新窗口之后，我在父窗口中调用 ajax 调用。我想在子窗口中使用该 ajax 响应。

我在 SO 中搜索。但我找不到正确的答案。这可能吗？如果可能的话，我该怎么做。我试图从过去 3 小时获得解决方案。请帮助我。提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:28:29.980

如果您使用 jquery 弹出窗口，那么请理解 jquery 弹出窗口只是一个具有更高 z 索引的 div。其次，对于实际浏览器，您可以通过 . 开窗器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:46:57.770

我解决了我的问题

```
 browser.name = JSON.stringify(results);//parent window

   JSON.parse(name) //in the child window 
```

# cuda - 同一 GPU 上的 OpenCL 和 CUDA 内核

> ID：16011734
> 
> 赞同：0
> 
> 时间：2013-04-15T09:24:54.707
> 
> 标签：cuda, opencl

我是这项技术的新手。我有一个由 OpenCL 内核和 CUDA 内核组成的应用程序。我想在同一个GPU（特斯拉M2050）上一个接一个地执行OpenCL内核和CUDA内核。可以执行吗？

如果可能的话，我们是否需要处理任何内存管理。？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:48:30.953

是的，可以从同一个应用程序运行 OpenCL 内核和 CUDA 内核。每个都有自己的调度程序。内存管理将由 GPU 驱动程序负责。

# tcl - 使用带有“set”的 TCL eval 命令

> ID：16011735
> 
> 赞同：2
> 
> 时间：2013-04-15T09:25:02.137
> 
> 标签：tcl, eval

这是我正在测试的代码：

```
proc check_eval {} {
    set cmd {set return_val {}; set return_val}
    puts "Command to evaluate : $cmd"
    uplevel eval $cmd
} 
```

我遇到了以下问题：当我调用“check_eval”时，看起来语句“set return_val {}”被忽略了。即，interpeter 在调用范围内寻找现有的 return_val 变量。例子：

```
tcl>unset return_val
tcl>check_eval
Command to evaluate : set return_val {}; set return_val
can't read "return_val": no such variable
while evaluating check_eval

tcl>set return_val 556
556
tcl>check_eval
Command to evaluate : set return_val {}; set return_val
556
tcl> 
```

另一方面，如果我将程序中的“set return_val {}”替换为“set return_val 10000”，运行时将显示 10000：

```
tcl>set return_val 556
556
tcl>check_eval
Command to evaluate : set return_val 10000; set return_val
10000
tcl>set return_val
10000 
```

有人可以解释一下这里发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:06:40.710

您正在执行两个级别的评估/解释，首先使用`uplevel`然后使用`eval`，并且围绕 cmd 脚本的大括号分组仅保护您免受第一个级别的影响。

你不需要`eval`，这就足够了：

```
uplevel $cmd 
```

**编辑**：`eval`和`uplevel` `concat`:enate 将它们的所有参数一起放入一个平面字符串并将其*作为脚本*进行评估（`uplevel`您可以选择另一个堆栈框架来运行它）。他们不使用第一个参数作为*单个命令*名称，其余参数作为参数发送到该命令。如果是这种情况，您会收到一条错误消息，`eval`指出找不到命令“set return_val {}; set return_val”。所以你使用`eval`正确但`uplevel`错误。

`uplevel`运行这个脚本...

```
eval set return_val {}; set return_val 
```

...它的破坏方式不止一种，因为您没有列出引号（组）它的论点。

`eval`在您的示例中不需要，但是如果您需要调用单个命令上层，而没有连接它的参数，当您不需要任何替换时引用静态字符串的方法是使用大括号：

```
uplevel {after 1000 {set return_val {}; set return_val}} 
```

...以及引用具有替换值的动态字符串的方法是`list`：

```
set cmd {set return_val {}; set return_val}
uplevel [list after 1000 $cmd] 
```

# regex - 全部重定向到基域

> ID：16011737
> 
> 赞同：0
> 
> 时间：2013-04-15T09:25:13.013
> 
> 标签：regex, .htaccess, mod-rewrite, redirect

我想重定向所有页面，例如：

```
www.mydomain.com/test
www.mydomain.com/test2/test3 
```

等等 ...

永远立足

```
www.mydomain.com 
```

我怎样才能做到这一点？

```
RewriteCond %{HTTP_HOST} ^www.mydomain.com 
RewriteCond %{THE_REQUEST} ^/(.*)$
RewriteRule (.*) http://%{HTTP_HOST} [L,QSA,R=301] 
```

不会工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:34:21.630

请试试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/([a-z].*)
RewriteRule .* http://kap.com/ [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:34:41.967

只需省略`RewriteCond`s 并将所有内容重定向到`/`

```
RewriteCond %{REQUEST_URI} !^/$
RewriteRule ^ / [R,L] 
```

当一切按预期工作时，您可以更改`R`为`R=301`. 永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:41:05.053

```
RedirectMatch 301 ^/ http://www.mydomain.com/ 
```

它会将所有内容重定向到您的新域。如果您有[mod_alias这将起作用](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:13:39.730

我觉得这个解决方案没问题

```
RewriteCond %{HTTP_HOST} ^www.mydomain.com
RewriteCond %{REQUEST_URI} ^/[a-zA-Z0-9\/]+$
RewriteRule ^ / [R,L] 
```

# javascript - 停止另一个 JS 函数的 JS 函数

> ID：16011741
> 
> 赞同：0
> 
> 时间：2013-04-15T09:25:25.513
> 
> 标签：javascript

我有两个 JS 函数：一个显示进度条的 load() 函数和一个在页面加载后停止执行加载的 kill() 函数。现在，当加载另一个页面时，不会显示进度条，因为知道在每个页面上都会调用 load 函数。关于问题可能出在哪里以及是否有解决方法的任何提示。

这是我的代码：

```
<script type="text/javascript">
    var count=0;
    function load(i) {
        j = parseInt(i);
        document.getElementById("progressBar").style.display = "block";
        count=count+1;
        if (document.all) { 
            document.all.btn1.value=count+'%';
            document.all.progressbar.pic1.width=2*count;
        }
        else { 
            document.getElementById("pic1").width=2*count;
            document.getElementById("bar").width=count+'%';
        } 
        if (count<100) {
            setTimeout('load(j)',j);
        }
        if(count==100) { 
            document.getElementById("progressBar").style.display = "none";
            count=0;
        }
    }

    function kill(){
        if (document.applets[0].isActive()) {
            document.getElementById("progressBar").style.visibility = "hidden"; 
        } 
    }

</script> 
```

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:50:27.853

在`load()`您将**显示**更改为`block`，但在`kill()`您将**可见性**设置为`hidden`; 您应该将**显示**设置为，以便下次`none`可以再次正确设置。[阅读有关可见性](http://www.w3schools.com/cssref/pr_class_visibility.asp)的信息。`block`

优化代码：

```
<script type="text/javascript">
    var count = 0,
        win = window,
        doc = document,
        progressBar = doc.getElementById("progressBar"),
        t, j;

    function load(i) {
        j = parseInt(i);
        progressBar.style.display = "block";
        count++;

        // no actual need to check if doc.all is available
        // just select through id
        doc.getElementById("pic1").style.width = 2*count;
        doc.getElementById("bar").style.width = count+'%'; 

        if (count < 100) {
            t = win.setTimeout('load(j)',j);
        } else { 
            progressBar.style.display = "none";
            win.clearTimeout(t);
            count = 0;
        }
    }

    function kill(){
        if (doc.applets[0].isActive()) {
            progressBar.style.display = "none";
        } 
    }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:53:15.413

如果你分配`setTimeout`给一个变量，你可以在它上面使用 clearTimeout 来停止它。
例如设置超时， `t = setTimeout('load(j)',j);` 然后停止它 `clearTimeout(t);`让我知道这是否有帮助，并且有意义:)

# html - 如何在 IE 中使一行中的元素内联

> ID：16011742
> 
> 赞同：0
> 
> 时间：2013-04-15T09:25:26.420
> 
> 标签：html, jsp

我有一排由两个 tds 组成。TD1 包含两个文本（txt1 和 txt2）。TD1 中的 txt2 必须与 TD2 一致。这是我的代码：

```
<tr>

        <td width="220">
        <span class="b">TB From:</span>
        <span style="position: relative; left : 20px;" id="lblTBHoriz" class="b"><br> 
        <span style="padding-left: 1.5px">  TBN:</span>
        </span>
        </td>

        <td>
        <pre></pre> 
        <input type="text" id="tBFrom"  name="tBFrom"
         value="" size="20" maxlength="16"
         onkeypress="return isNumberKey(event);"  onchange="validate(this);" > 
        </input>
        </td>

    </tr> 
```

问题是 TBN：另一个 td 中的输入框必须符合要求，并且在 Mozilla 中它可以正常工作。但在 IE 中，输入框向上显示文本 TBN: 并与 TB From: 文本对齐。我能做些什么来解决这个问题？请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:45:53.327

```
<tr>

        <td colspan="2" width="220">
        <span class="b">TB From:</span>
        <span style="position: relative; left : 20px;" id="lblTBHoriz" class="b"><br> 
        <span style="padding-left: 1.5px">  TBN:</span>
        </span>
        </td>

        <td colspan="2">
        <pre></pre> 

            <br/>

        <input type="text" id="tBFrom"  name="tBFrom"
         value="" size="20" maxlength="16"
         onkeypress="return isNumberKey(event);"  onchange="validate(this);" > 
        </input>
        </td>

    </tr> 
```

[http://jsfiddle.net/dolours/zvMKH/335/](http://jsfiddle.net/dolours/zvMKH/335/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:50:39.317

如果`<input>`每次都必须在底部添加一个类到`td`标签并添加一些 CSS 到它：

```
td.your-class
{
    vertical-align:bottom;
} 
```

表格应该有表格数据。不建议将它们用于布局。您可以改用`div`标签。

```
<div>TB From:</div>
<div><label>TBN:</label><input type="text" vlaue="" /></div> 
```

`div`您可以随心所欲地设计标签。

# restlet - Restlet Java SE 2.1.2 jvm 内存使用

> ID：16011743
> 
> 赞同：0
> 
> 时间：2013-04-15T09:25:26.993
> 
> 标签：restlet

我们使用 Restlet 向 Web 服务器发出许多并发 http 请求。几天前，我们将 Restlet 库从 2.0.14 升级到 2.1.2，我们注意到相对于旧版本的堆内存消耗非常高。以下是一些数据： - 2.0.14 -> 100 个线程 ~115MB - 2.1.2 -> 30 个线程 ~90MB

有没有其他人注意到这种行为？

下面是一个请求示例：

```
...
clientResource = new ClientResource(URI);
representation = clientResource.get(MediaType.APPLICATION_JSON);
... 
```

谢谢

# excel - 自动更新外部工作簿中的值

> ID：16011744
> 
> 赞同：7
> 
> 时间：2013-04-15T09:25:28.553
> 
> 标签：excel, scripting, vbscript, wsh, vba

我有以下工作簿设置：

![在此处输入图像描述](https://i.stack.imgur.com/oyfj3.jpg)

工作簿 A 有一个指向 x 个工作簿 B 的链接，并从中获取数据。工作簿 B 具有指向其他一些工作簿的链接并从中获取数据。

工作簿 A 是所有其他工作簿所包含内容的一种“总结”。现在，我必须打开所有工作簿 B，刷新它们并保存，然后再打开工作簿 A。如果我不这样做，工作簿 B 将不会使用工作簿 C 中的数据进行更新。

是否可以使用 .bat 或 vbs 脚本更新所有工作簿 B？或者是否可以从工作簿 A 中更新它们？

**我可能会补充一点，我在这台计算机上使用 excel starter，所以最好该解决方案与之兼容。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:51:53.327

附件是一个潜在的解决方案，作为一个可以运行的[vbs](/questions/tagged/vbs "显示标记为“vbs”的问题")`vba` ，如果可用的话

感谢 Sid Rout 提出的修改建议`RecursiveFile(objWB)`

*警告：有可能同时打开的书太多（我在`vbs`递归地狱期间达到 512）会导致内存问题 - 在这种情况下，应该依次更新每个主要分支，然后在继续下一个分支之前关闭这些工作簿。*

***它能做什么***

1.  打开由持有的工作簿`strFilePath`
2.  检查 1 中是否有任何链接的工作簿，如果有则打开它们（B、B1、B2 等）
3.  然后代码在 (2) 的每个工作簿中查找任何链接，然后依次打开所有这些链接（C1 和 C2 用于 B 等）
4.  每个打开的书名都存储在一个数组中，`Arr`
5.  当所有书都打开时，初始工作簿将已更新，递归代码结束，所有打开的书`strFilePath`都关闭而不保存
6.  `strFilePath`然后保存并关闭
7.  代码整理

**编辑：更新代码以修复 vbs 递归问题**

```
Public objExcel, objWB2, lngCnt, Arr()
Dim strFilePath, vLinks
`credit to Sid Rout for updating `RecursiveFileRecursiveFile(objWB)`

Erase Arr
lngCnt = 0

Set objExcel = CreateObject("Excel.Application")
strFilePath = "C:\temp\main.xlsx"

With objExcel
    .DisplayAlerts = False
    .ScreenUpdating = False
    .EnableEvents = False
End With

Set objWB = objExcel.Workbooks.Open(strFilePath, False)
Call RecursiveFile(objWB)

For Each vArr In Arr
    objExcel.Workbooks(vArr).Close False
Next

objWB.Save
objWB.Close
Set objWB2 = Nothing

With objExcel
    .DisplayAlerts = True
    .ScreenUpdating = True
    .EnableEvents = True
    .Quit
End With

Set objExcel = Nothing
MsgBox "Complete"

Sub RecursiveFile(objWB)
    If Not IsEmpty(objWB.LinkSources()) Then
        For Each vL In objWB.LinkSources()
            ReDim Preserve Arr(lngCnt)

            'MsgBox "Processing File " & vL

            Set objWB2 = objExcel.Workbooks.Open(vL, False)
            Arr(lngCnt) = objWB2.Name
            lngCnt = lngCnt + 1
            RecursiveFile objWB2
        Next
    End If
End Sub 
```

**工作截图**

![在此处输入图像描述](https://i.stack.imgur.com/JO4bC.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:41:10.370

是的，您可以遍历所有源 B 工作簿，在后台打开它们并将 UpdateLinks 标志设置为 True ...

```
strFiles=Dir(*path & \.xls*)

do
    workbooks.open strfiles, UpdateLinks:=true
    workbooks(strfiles).close savechanges:=true
    strFiles=Dir
loop while strfiles<>"" 
```

那应该给你一个开始

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T10:03:52.813

所以，由于 VBA 不是一个选项，让我们尝试一个 VB 脚本解决方案：

```
dim objFSO, objExcel, objWorkbook, objFile
'
set objExcel= CreateObject("Excel.application")
'
objExcel.visible=false
objExcel.displayalerts=false
'
Set objFSO = CreateObject("Scripting.FileSystemObject")
objStartFolder = path
'
Set objFolder = objFSO.GetFolder(objStartFolder)
' get collection of files from folder
Set colFiles = objFolder.Files
' begin loop through all files returned by Files collection of Folder object
For Each objFile in colFiles
    ' sanity check, is the file an XLS file?
    if instr(objfile.name,"xls")<>0 then ' could also use right(objfile.name,4)=...
        Wscript.Echo "Opening '" objFile.Name & "' ..."
        set objWorkbook=objexcel.workbooks.open objfile.name, updatelinks:=true
        objexcel.workbooks(objfile.name).close savechanges:=true
    end if
Next
' close Excel
objexcel.quit
' kill the instance and release the memory
set objExcel=nothing 
```

试试看，看看你的进展如何

这是 VB Script SDK：[MSDN Library - VB Script](http://msdn.microsoft.com/en-us/library/d1wf56tt%28v=vs.84%29.aspx)

# c# - 阻止已登录用户的登录 C#

> ID：16011746
> 
> 赞同：1
> 
> 时间：2013-04-15T09:25:35.227
> 
> 标签：c#, sql-server, permissions

我有一个桌面 C# 应用程序，几个客户端连接到 SQL 服务器。每个用户都有一个 ID 和密码。我想要的是防止已经登录的用户从另一台计算机登录。

我通过在登录时更新数据库**'UserLoggedIn'=true**中的字段来实现它，当用户注销时，字段更新为**False**。但是这个解决方案并不是最优的，如果系统崩溃或计算机意外关闭，数据库中的值将保持'UserLoggedIn'=True，并且该用户将永远无法再次登录到系统。

什么是最佳解决方案，并防止已经登录的用户从另一台计算机登录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:28:38.497

而不是`true`，在数据库中存储一个时间戳。确保在用户登录时定期更新它。

当他们登录时，如果它不是太新，请允许他们。也就是说：如果您在最后（比如说）30 秒内从另一台 PC 上看到了它们，那么认为该会话仍然存在，并拒绝新的登录。

这样，如果他们的另一台 PC 崩溃，时间戳将不会更新，最终会过期。

更新频率应该是到期超时的两倍左右。例如，如果您想要 1 分钟的会话到期，您应该每 30 秒更新一次时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:59:24.883

我建议您使用以下查询检查用户是否已建立与数据库的连接

```
SELECT loginame as LoginName,program_name
FROM sys.sysprocesses 
WHERE db_name(dbid)='my_database'  and loginame='test_user' 
```

如果返回的记录数大于零，那么您可以假设用户已经从您的应用程序连接到数据库。

如果您查看 MSDN 中的[连接字符串](http://msdn.microsoft.com/en-in/library/system.data.sqlclient.sqlconnection.connectionstring%28v=vs.71%29.aspx)属性，您会发现以下感兴趣的属性。这 2 个属性可以添加到您现有的连接字符串中，以进一步改进可以在上面的查询中定义的过滤器

*   **应用程序名称**- 应用程序的名称，如果未提供应用程序名称，则为“.Net SqlClient 数据提供程序”。**（=上表中的程序名称）**

*   **工作站 ID** - 连接到 SQL Server 的工作站的名称。**（=上表中的主机名）**

*我相信无论客户端发生崩溃，此解决方案都可以正常工作，并且不需要您将状态保存在任何表中。*

# wpf - WPF-使用特定的数据网格事件访问代码中数据网格（xaml）中存在的文本框

> ID：16011747
> 
> 赞同：-2
> 
> 时间：2013-04-15T09:25:36.917
> 
> 标签：wpf, xaml, textbox, wpfdatagrid

我在使用 xaml 设计的数据网格中有一个文本框。我可以使用数据网格的事件访问以前在代码文件中在 xaml 中设计的文本框吗？请帮我.....................

```
<Window x:Class="GridTextBox.Test"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" WindowState="Maximized"
    Title="Test" Height="300" Width="300" Loaded="Window_Loaded">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="30"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="30"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width=".25*"/>

        <ColumnDefinition Width=".25*"/>
        <ColumnDefinition Width=".25*"/>
        <ColumnDefinition Width=".25*"/>
    </Grid.ColumnDefinitions>
    <DataGrid Grid.Row="1" Grid.Column="1"  Name="datagrid1" SelectionChanged="datagrid1_SelectionChanged" LoadingRowDetails="DataGrid_LoadingRowDetails"  Height="auto" Width="auto">
        <DataGrid.Columns>
            <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBox Name="txtEmpid" Text="hiiiiii"></TextBox>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:30:16.153

您可以为 DataGrid 使用以下扩展。
只需创建一个新模块并插入以下代码。

```
Module Extensions
<Extension()>
  Public Function GetDataTemplateObjectFromSelectedRow(Of DataTemplateType As Visual)(ByVal lDataGrid As DataGrid, ByVal lColumnIndex As Integer) As DataTemplateType
    Dim lRow As DataGridRow
    Dim lCell As DataGridCell
    Dim lPresenter As DataGridCellsPresenter
    Dim lFoundObject As DataTemplateType = Nothing

    If lDataGrid.SelectedIndex >= 0 Then
      lRow = lDataGrid.ItemContainerGenerator.ContainerFromIndex(lDataGrid.SelectedIndex)
      lPresenter = GetVisualChild(Of DataGridCellsPresenter)(lRow)
      lCell = lPresenter.ItemContainerGenerator.ContainerFromIndex(lColumnIndex)
      lFoundObject = GetVisualChild(Of DataTemplateType)(lCell)
    End If
    Return lFoundObject
  End Function

  Public Function GetVisualChild(Of T As Visual)(parent As Visual) As T
    Dim child As T = Nothing
    Dim numVisuals As Integer = VisualTreeHelper.GetChildrenCount(parent)
    For i As Integer = 0 To numVisuals - 1
      Dim v As Visual = DirectCast(VisualTreeHelper.GetChild(parent, i), Visual)
      child = TryCast(v, T)
      If child Is Nothing Then
        child = GetVisualChild(Of T)(v)
      End If
      If child IsNot Nothing Then
        Exit For
      End If
    Next
    Return child
  End Function

End Module 
```

之后，您可以在 DataGrid 的事件中调用以下函数：

```
 Private Sub DataGridButtons_CurrentCellChanged(sender As Object, e As EventArgs) Handles DataGridButtons.CurrentCellChanged
    Dim lTextBox As TextBox = DataGridButtons.GetDataTemplateObjectFromSelectedRow(Of TextBox)(0)
  End Sub 
```

该部分`(Of TextBox)`描述了您预期的 DataType 并使用`(0)`您描述相关的参数`GridColumn`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:19:58.730

C#的解决方案

```
namespace ExtensionMethods
{
  public static class Extensions
  {

    public static DataTemplateType GetDataTemplateObjectFromSelectedRow<DataTemplateType>(DataGrid lDataGrid, int lColumnIndex) where DataTemplateType : Visual
    {
      DataGridRow lRow = default(DataGridRow);
      DataGridCell lCell = default(DataGridCell);
      DataGridCellsPresenter lPresenter = default(DataGridCellsPresenter);
      DataTemplateType lFoundObject = null;

      if (lDataGrid.SelectedIndex >= 0)
      {

        lRow = (DataGridRow)lDataGrid.ItemContainerGenerator.ContainerFromIndex(lDataGrid.SelectedIndex);
        lPresenter = GetVisualChild<DataGridCellsPresenter>(lRow);
        lCell = (DataGridCell)lPresenter.ItemContainerGenerator.ContainerFromIndex(lColumnIndex);
        lFoundObject = GetVisualChild<DataTemplateType>(lCell);
      }
      return lFoundObject;
    }

    public static T GetVisualChild<T>(Visual parent) where T : Visual
    {
      T child = null;
      int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
      for (int i = 0; i <= numVisuals - 1; i++)
      {
        Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
        child = v as T;
        if (child == null)
        {
          child = GetVisualChild<T>(v);
        }
        if (child != null)
        {
          break; // TODO: might not be correct. Was : Exit For
        }
      }
      return child;
    }

  }
} 
```

使用以下调用获取文本框：

```
private void DataGridButtons_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
  TextBox lTextBox = Extensions.GetDataTemplateObjectFromSelectedRow<TextBox>(DataGridButtons, 0);
} 
```

# mysql - MySQL 执行更多 SQL 语句并得到一个结果

> ID：16011763
> 
> 赞同：0
> 
> 时间：2013-04-15T09:26:27.910
> 
> 标签：mysql, sql

您好，我想执行更多 SQL 语句并得到一个结果，比如我有 3 个表，它们都有相同的列名：

```
Table user1
User Password Email

Table user2
User Password Email

Table user3
User Password Email 
```

现在我想在一个 SQL 语句中从所有表中获取所有用户密码电子邮件。我希望你能帮助我。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:27:41.553

使用`UNION`.

```
SELECT User, PassWord, Email FROM Table1
UNION 
SELECT User, PassWord, Email FROM Table2
UNION 
SELECT User, PassWord, Email FROM Table3 
```

上述查询将生成唯一记录。如果要保留重复，请添加`ALL`

```
SELECT User, PassWord, Email FROM Table1
UNION ALL
SELECT User, PassWord, Email FROM Table2
UNION ALL
SELECT User, PassWord, Email FROM Table3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:28:12.400

A`union`将允许您合并记录集。

```
select user, password, email from user1
union 
select user, password, email from user2
union
select user, password, email from user3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T09:31:07.057

很简单，使用 Union 运算符如下：

```
SELECT User, PassWord, Email FROM User1
UNION 
SELECT User, PassWord, Email FROM User2
UNION
SELECT User, PassWord, Email FROM User3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T09:27:41.743

```
select User, Password, Email
from Table1
union all
select User, Password, Email
from Table2
union all
select User, Password, Email
from Table3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T09:33:03.560

联合操作是您问题的一个很好的例子：

```
select user, password, email from user1
union
selection user, password, email from user2
union
select user, password, email from user3 
```

# iframe - 多个 iframe 的部分更新不起作用

> ID：16011768
> 
> 赞同：2
> 
> 时间：2013-04-15T09:26:45.077
> 
> 标签：iframe, xpages

在 XPage（名为“xBase”）上，我在容器（div）中有两个 IFrame：

```
<xp:div id="divIFrames">
    <iframe src="xTest.xsp?key=abc" id="iframe0" frameborder="0" width="100%" height="28px" scrolling="no"></iframe>
    <iframe src="xTest.xsp?key=def" id="iframe1" frameborder="0" width="100%" height="28px" scrolling="no"></iframe>
    <xp:label><xp:this.value><![CDATA[#{javascript:context.getUrl().toString();}]]></xp:this.value></xp:label>
</xp:div> 
```

两个 IFrame 都指向我的数据库中的另一个 XPage“xTest”，具有不同的 URL 参数。为简单起见，“xTest”仅包含带有当前 URL 的标签：

```
<xp:label value="#{javascript:context.getUrl().toString()}"></xp:label> 
```

但是，**容器的部分更新不起作用**，并且在“xBase”中添加了一个 URL 参数：$$ajaxid=view%3A_id1%3AdivIFrames

仅当有超过 1 个带有 URL 参数的 iframe 时才会出现此问题。例如，它适用于 src 中**没有**URL 参数的多个 iframe 或具有 URL 参数的单个 iframe。为什么它不适用于 2 个或更多带有 URL 参数的 IFrame？有人知道我在这里做错了什么吗？

**编辑**：

**事实证明，当 XPage 上有多个 IFrame 时，不是部分刷新，而是在 sessionScope 中设置变量不起作用。因为这不适合当前的问题，所以我创建了一个[新](https://stackoverflow.com/questions/16052911/cannot-set-sessionscope-variable-when-multiple-iframes-are-present-on-a-xpage)问题。对不起给您带来不便！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:49:40.690

*xBase.xsp*中更改的标签表明部分刷新工作正常。网址参数

```
?$$ajaxid=view%3A_id1%3AdivIFrames 
```

添加是因为这是部分刷新的工作方式：它是对 XPage 本身的 Ajax 请求，参数是随请求刷新的元素的 id。显示请求 URL 的标签位于刷新的 DOM 元素内，这就是您看到它的原因。

由于*context.getUrl()*方法的缓存，您有时会看到“原始”查询，有时还会看到带有 Ajax 参数的 URL。如果您将示例代码更改为...

```
facesContext.getExternalContext().getRequest().getQueryString(); 
```

...您将看到没有任何缓存的参数。

顺便说一句：我已经用 1000 个 IFrame 测试了示例代码的乐趣，它对我来说没有任何问题。

请提供有关您的环境的更多信息（Domino 版本、浏览器等）

# c++ - 为 CUDA 应用程序在自定义类 int2_、float2_ 和 double2_ 之间重载 operator=

> ID：16011774
> 
> 赞同：0
> 
> 时间：2013-04-15T09:26:54.340
> 
> 标签：c++, templates, cuda, operator-overloading

我正在定义类`int2_`,`float2_`和`double2_`来处理 C++ 和 CUDA 中的复杂算术。我想重载运算符`=`以混合分配上述类和`int`,`float`和`double`类型的对象。

我的实现如下：

```
class float2_;
class double2_;

class int2_ {

    public:
        int x;
        int y;

        int2_() : x(), y() {}

        __host__ __device__ inline const int2_& operator=(const int a)          { x = a;            y = 0.;         return *this; }
        __host__ __device__ inline const int2_& operator=(const float a)        { x = (int)a;       y = 0.;         return *this; }
        __host__ __device__ inline const int2_& operator=(const double a)       { x = (int)a;       y = 0.;         return *this; }
        __host__ __device__ inline const int2_& operator=(const int2_ a)        { x = a.x;          y = a.y;        return *this; }
        __host__ __device__ inline const int2_& operator=(const float2_ a);
        __host__ __device__ inline const int2_& operator=(const double2_ a);
};

class float2_ {

    public:
        float x;
        float y;

        float2_() : x(), y() {}

        __host__ __device__ inline const float2_& operator=(const int a)        { x = (float)a;     y = 0.;         return *this; }
        __host__ __device__ inline const float2_& operator=(const float a)      { x = a;            y = 0.;         return *this; }
        __host__ __device__ inline const float2_& operator=(const double a)     { x = (float)a;     y = 0.;         return *this; }
        __host__ __device__ inline const float2_& operator=(const int2_ a)      { x = (float)a.x;   y = (float)a.y; return *this; }
        __host__ __device__ inline const float2_& operator=(const float2_ a)    { x = a.x;          y = a.y;        return *this; }
        __host__ __device__ inline const float2_& operator=(const double2_ a);
};

class double2_ {

    public:
        double x;
        double y;

        double2_() : x(), y() {}

        __host__ __device__ inline const double2_& operator=(const int a)       { x = (double)a;    y = 0.;         return *this; }
        __host__ __device__ inline const double2_& operator=(const float a)     { x = (double)a;    y = 0.;         return *this; }
        __host__ __device__ inline const double2_& operator=(const double a)    { x = a;            y = 0.;         return *this; }
        __host__ __device__ inline const double2_& operator=(const int2_ a)     { x = (double)a.x;  y = (double)a.y;return *this; }
        __host__ __device__ inline const double2_& operator=(const float2_ a)   { x = (double)a.x;  y = (double)a.y;return *this; }
        __host__ __device__ inline const double2_& operator=(const double2_ a)  { x = a.x;          y = a.y;        return *this; }

};

__host__ __device__ inline const int2_& int2_::operator=(const float2_ a)           { x = (int)a.x;             y = (int)a.y;       return *this; }
__host__ __device__ inline const int2_& int2_::operator=(const double2_ a)      { x = (int)a.x;             y = (int)a.y;       return *this; }
__host__ __device__ inline const float2_& float2_::operator=(const double2_ a)  { x = (float)a.x;           y = (float)a.y;     return *this; } 
```

但是，我在内核中收到编译错误

```
template <class A, class T1, class T2>
__global__ inline void evaluation_matrix(T1 *data_, const Expr<A,T2> e, int NumElements)
{
    const int i = blockDim.x * blockIdx.x + threadIdx.x;
    if(i < NumElements) data_[i] = e[i];
} 
```

when`e`是一个表达式。错误信息是

```
calling a __host__ function("float2_::float2_") from a __global__  
function("evaluation_matrix<BinExpr<const float *, const float2_ *, CudaOpSum, float2_> 
, double2_, float2_> ") is not allowed 
```

在这种情况下，`data_`是一个`double2_`对象并且`e`是一个`float2_`表达式。

我在处理任何`int`, `float`, `double`, `int2_`,`float2_`或`double2_`类型或类时都没有问题`data_`。`e`当是`int`,`float`或`double`类型的表达式时，我什至没有收到错误消息。唯一的问题出现在`e`是 类`int2_`或`float2_`时`double2_`。

有什么帮助吗？谢谢你。

**ARNE MERTZ 回答后的工作解决方案**

```
class float2_;
class double2_;

class int2_ {

    public:
        int x;
        int y;

        __host__ __device__ int2_() : x(), y() {}

        __host__ __device__ inline const int2_& operator=(const int a)          { x = a;            y = 0.;         return *this; }
        __host__ __device__ inline const int2_& operator=(const float a)        { x = (int)a;       y = 0.;         return *this; }
        __host__ __device__ inline const int2_& operator=(const double a)       { x = (int)a;       y = 0.;         return *this; }
        __host__ __device__ inline const int2_& operator=(const int2_ a)        { x = a.x;          y = a.y;        return *this; }
        __host__ __device__ inline const int2_& operator=(const float2_ a);
        __host__ __device__ inline const int2_& operator=(const double2_ a);
};

class float2_ {

    public:
        float x;
        float y;

        __host__ __device__ float2_() : x(), y() {}

        __host__ __device__ inline const float2_& operator=(const int a)        { x = (float)a;     y = 0.;         return *this; }
        __host__ __device__ inline const float2_& operator=(const float a)      { x = a;            y = 0.;         return *this; }
        __host__ __device__ inline const float2_& operator=(const double a)     { x = (float)a;     y = 0.;         return *this; }
        __host__ __device__ inline const float2_& operator=(const int2_ a)      { x = (float)a.x;   y = (float)a.y; return *this; }
        __host__ __device__ inline const float2_& operator=(const float2_ a)    { x = a.x;          y = a.y;        return *this; }
        __host__ __device__ inline const float2_& operator=(const double2_ a);
};

class double2_ {

    public:
        double x;
        double y;

        __host__ __device__ double2_() : x(), y() {}

        __host__ __device__ inline const double2_& operator=(const int a)       { x = (double)a;    y = 0.;         return *this; }
        __host__ __device__ inline const double2_& operator=(const float a)     { x = (double)a;    y = 0.;         return *this; }
        __host__ __device__ inline const double2_& operator=(const double a)    { x = a;            y = 0.;         return *this; }
        __host__ __device__ inline const double2_& operator=(const int2_ a)     { x = (double)a.x;  y = (double)a.y;return *this; }
        __host__ __device__ inline const double2_& operator=(const float2_ a)   { x = (double)a.x;  y = (double)a.y;return *this; }
        __host__ __device__ inline const double2_& operator=(const double2_ a)  { x = a.x;          y = a.y;        return *this; }

};

__host__ __device__ inline const int2_& int2_::operator=(const float2_ a)           { x = (int)a.x;             y = (int)a.y;       return *this; }
__host__ __device__ inline const int2_& int2_::operator=(const double2_ a)      { x = (int)a.x;             y = (int)a.y;       return *this; }
__host__ __device__ inline const float2_& float2_::operator=(const double2_ a)  { x = (float)a.x;           y = (float)a.y;     return *this; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:43:02.160

好吧，错误说你不能从一个函数调用`__host__`函数（在这种情况下是你的`float2_`类的构造`__global__`函数）。乍一看，这与操作符无关，因为错误消息中没有提到它们。但如果你仔细观察，有`data_[i] = e[i]`。

**注意：**这里是疯狂的猜测，因为您没有显示所有相关代码：

我猜想`e[i]`引用表达式的一部分，在这种情况下是 type `float2_`。您正在将其分配`e[i]`给 a `double2_`，并且相应的赋值运算符是您的`double2_::__host__ __device__ inline const double2_& operator=(const float2_ a)`which - 除了不必要和非常规地返回一个 const 引用之外，它`float2_` *按值*获取，因此编译器必须`e[i]`通过复制构造函数进行复制，该复制构造函数似乎是用`__host__`. 显然，从编译器消息来看，不允许`__host__`从`__global__`函数调用。

一个解决方案是要么声明构造函数，要么`__global__`让`op=`(const) 引用获取其参数，因此不需要调用复制构造函数。但是，由于它`operator=`本身是声明`__host__`的，因此您可能也会因为该调用而得到相同的错误。

`__host__`我对cuda一无所知，也不知道`__global__`比错误消息告诉我的更多信息，但希望我能给你一个提示，代码可能有什么问题。

# unit-testing - VS2012 不运行单元测试

> ID：16011775
> 
> 赞同：7
> 
> 时间：2013-04-15T09:26:55.207
> 
> 标签：unit-testing, visual-studio-2012

几周前，我在进行单元测试，它们正在按预期构建和运行。

我去度假了一个星期，今天早上启动了我的机器，并且没有对单元测试项目进行任何代码更改，测试不再运行。

当我说“测试不再运行”时，我并不是说它们失败了。他们真的不会跑。

我尝试运行或调试特定测试，我尝试运行或调试所有测试，我从每个测试方法名称旁边的 Resharper 图标中尝试过，我从 TEST 菜单项中尝试过，我已经从“单元测试会话”窗口尝试过......所有发生的事情是“单元测试会话”窗口从右侧滑入，所有测试都显示“待处理”......然后什么也没有。

输出窗口中也没有消息。

该项目构建没有任何问题。我试过清理解决方案并重建，但这没有任何改变。此外，这不仅仅是我几周前进行的测试，而是我的 UnitTests 项目中的所有测试。

同事可以运行测试。他遇到了我没有遇到的各种 Resharper 消息，但他仍然可以运行测试。

唯一的区别是我在尝试运行测试之前安装了 VS2012.2 更新。

有谁知道为什么这些测试显然不会运行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T02:41:40.343

我遇到了同样的问题，Resharper 7.1.3 的更新对我有用。

更新：在 VS 2012 Update 2 中找到有关 Resharper 单元测试问题的信息，并且在 Resharper 7.1.3 中专门解决了该问题：http: [//blogs.jetbrains.com/dotnet/2013/04/resharper-713-is-可用于-visual-studio-2012-update-2/](http://blogs.jetbrains.com/dotnet/2013/04/resharper-713-is-available-for-visual-studio-2012-update-2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-13T09:03:43.773

我们刚刚遇到了类似的问题。受影响的机器有一个香草 VS2012（专业版）和 Resharper 8。修复是将 VS2012 更新为更新 4。

# cdb - 用于处理 cdb 数据库的 sg-cdb Java 库

> ID：16011781
> 
> 赞同：0
> 
> 时间：2013-04-15T09:27:15.970
> 
> 标签：cdb

我已经从[http://www.strangegizmo.com/products/sg-cdb/](http://www.strangegizmo.com/products/sg-cdb/)下载了 sg-cdb Java 库并将其包含在我的项目中。我正在尝试使用以下代码读取 CDB 数据库：

```
import com.strangegizmo.cdb.Cdb;
import com.strangegizmo.cdb.CdbElement;
import java.util.Enumeration;

class Start
{ 
    public static void main(String args[])
    {
        Cdb cdbFile = null;
        try{
            cdbFile = new Cdb("basefile.cdb");
        }catch (Exception e) { e.printStackTrace(); }

        try
        {
            Enumeration em = cdbFile.elements("basefile.cdb");
            while(em.hasMoreElements())
            {
                CdbElement cdbElt = (CdbElement) em.nextElement();
            }
        }catch (Exception e) {e.printStackTrace();}
    }
} 
```

我做错了什么，我收到以下异常消息：

```
java.lang.IllegalArgumentException: invalid cdb format
    at com.strangegizmo.cdb.Cdb$1.nextElement(Cdb.java:358) 
```

你能提供任何使用这个库的例子吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:17:21.627

我是 sg-cdb 的作者，可以帮助您使用该库。

您的示例的主要问题是您必须先“制作”一个 CDB 文件，然后才能枚举文件的元素。可移植的方法是生成[cdbmake/cdbdump 格式](http://cr.yp.to/cdb/cdbmake.html)的文件，然后使用静态`CdbMake.make(...)`方法将该文件转换为常量数据库。然后，您可以使用该类加载该常量数据库`Cdb`并查询键、枚举值等。

sg-cdb 支持另一种创建常量数据库的机制，即[`CdbMake`](https://github.com/malyn/sg-cdb/blob/master/java/com/strangegizmo/cdb/CdbMake.java)直接构造类的实例，调用`start(...)`开始写入数据库，调用向数据库添加键，写完键`add(...)`后再调用。`finish()`

这是您的示例的更新，它使用 CdbMake.start/.add/.finish 生成文件，然后枚举该文件：

```
import com.strangegizmo.cdb.Cdb;
import com.strangegizmo.cdb.CdbElement;
import com.strangegizmo.cdb.CdbMake;
import java.util.Enumeration;

class Start
{ 
    public static void main(String args[])
    {
        try{
            CdbMake maker = new CdbMake();
            maker.start("basefile.cdb");
            maker.add("one".getBytes(), "Hello".getBytes());
            maker.add("two".getBytes(), "Goodbye".getBytes());
            maker.finish();
        }catch (Exception e) {e.printStackTrace();}

        try
        {
            Enumeration em = Cdb.elements("basefile.cdb");
            while(em.hasMoreElements())
            {
                CdbElement cdbElt = (CdbElement) em.nextElement();
            }
        }catch (Exception e) {e.printStackTrace();}
    }
} 
```

请注意，这`elements(...)`是类上的静态方法`Cdb`，因此您不需要`Cdb`实例即可转储数据库中的所有内容。

一般来说，我的建议是你摄取`cdbdump`-formatted 文件。如果您在以下文本文件上运行`cdbmake`（或`cdb.make`sg-cdb 中包含的实用程序），您将获得相同的结果：

```
+3,5:one->Hello
+3,7:two->Goodbye 
```

最后一点：创建`Cdb`类的新实例总是成功的（即使文件不存在），因为拥有一个没有键的文件是完全有效的。使用不存在的文件初始化的`Cdb`实例（如您在示例中所做的那样）将正确返回 null 以响应每次`find()`调用。 `Cdb.enumerate(...)`虽然并不那么宽容，并且希望获得有效 CDB 文件的路径，这就是为什么您会收到 IllegalArgumentException。

如果您需要任何其他信息，请告诉我！

# c# - 如何在创建数据库命令期间使用 Transactions 属性（在 C# 中）

> ID：16011785
> 
> 赞同：3
> 
> 时间：2013-04-15T09:27:35.707
> 
> 标签：c#, sql-server-2008

*   我需要创建一个数据库
*   在创建的数据库上运行 SQL 脚本
*   我需要以编程方式将一些数据输入到创建的 Db 中

如果任何步骤失败，整个事务应该回滚甚至数据库创建。但是当我在创建数据库上使用事务属性时，它会引发异常

> 多语句事务中不允许 CREATE DATABASE 语句。

有没有什么方法可以实现相同的而不是删除数据库命令。（即以编程方式删除数据库）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:37:19.900

恐怕你不能。

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms176061.aspx)：

> CREATE DATABASE 语句必须在自动提交模式（默认事务管理模式）下运行，并且不允许在显式或隐式事务中运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:39:36.300

不，这是不可能的。[`CREATE DATABASE`](http://msdn.microsoft.com/en-gb/library/ms176061.aspx)：

> CREATE DATABASE 语句必须在自动提交模式（默认事务管理模式）下运行，并且不允许在显式或隐式事务中运行。

因此，您必须在最后明确检查并发出 a`DROP DATABASE`进行清理。

# android - 视图显示在 Eclipse 布局编辑器中，但不在平板设备上

> ID：16011788
> 
> 赞同：0
> 
> 时间：2013-04-15T09:27:46.870
> 
> 标签：android, xml, android-relativelayout

这是我的列表视图行布局：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="190dip"
android:layout_marginTop="5dip"
android:background="@drawable/feed_bg_new"
android:minHeight="190dip" >

<!--
first two hex digits in background color are for alpha  android:background="#E6FFFFFF"
android:cacheColorHint="#E6FFFFFF" >
-->

<TextView
    android:id="@+id/q_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/subjectNameTv"
    android:layout_below="@+id/subjectNameTv"
    android:layout_marginTop="10dip"
    android:autoLink="none"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:text="Seminarska naloga o letalih hldffgdfgdfgdfgdfggkldfkjgldgjldfjgdlfgkj slkdfsdlfsldkfsldf sdlfkjslkdfsd"
    android:textColor="#4D4D4D"
    android:textSize="15sp" />

<TextView
    android:id="@+id/subjectNameTv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dip"
    android:layout_marginTop="10dip"
    android:background="#ff0000"
    android:padding="5dip"
    android:text="Slovenščina"
    android:textSize="15sp" />

<TextView
    android:id="@+id/clock_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="80dip"
    android:layout_toRightOf="@+id/commentBtn"
    android:background="@drawable/time_bg"
    android:text="15 min"
    android:textColor="#FFFFFF"
    android:textSize="20sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/star_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/clock_text"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/clock_text"
    android:background="@drawable/star_bg"
    android:text="1350555"
    android:textColor="#FFFFFF"
    android:textSize="20sp"
    android:textStyle="bold" />

<ImageView
    android:id="@+id/quoteLine"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/q_avatar"
    android:layout_marginBottom="5dip"
    android:src="@drawable/quote_line" />

<Button
    android:id="@+id/doneBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/q_avatar"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="5dip"
    android:layout_marginTop="10dip"
    android:background="@drawable/done_button_selector"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:text="3/15"
    android:textSize="12sp" />

<Button
    android:id="@+id/likeButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="5dip"
    android:layout_marginLeft="5dip"
    android:layout_toRightOf="@+id/doneBtn"
    android:background="@drawable/like_button_selector"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:text="10"
    android:textSize="12sp"
    android:textStyle="bold" />

<Button
    android:id="@+id/commentBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="5dip"
    android:layout_marginLeft="5dip"
    android:layout_toRightOf="@+id/likeButton"
    android:background="@drawable/comment_button_selector"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:text="2"
    android:textSize="12sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/q_user"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/q_avatar"
    android:layout_marginLeft="5dip"
    android:layout_toRightOf="@+id/q_avatar"
    android:text="Marko Novak"
    android:textColor="#8F8F8F" />

<TextView
    android:id="@+id/q_time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/q_user"
    android:layout_alignRight="@+id/commentBtn"
    android:layout_marginLeft="5dip"
    android:layout_toRightOf="@+id/q_user"
    android:text="|9:30"
    android:textColor="#8F8F8F" />

<ImageView
    android:id="@+id/q_avatar"
    android:layout_width="20dip"
    android:layout_height="20dip"
    android:layout_above="@+id/doneBtn"
    android:layout_alignLeft="@+id/q_title"
    android:adjustViewBounds="true"
    android:scaleType="fitCenter"
    android:src="@drawable/xerox" />

</RelativeLayout> 
```

问题是 ImageViews q_avatar、quoteLine 和 TextViews q_user、q_time 显示在 Eclipse ADT 布局编辑器中，但不在我的平板电脑上。

有什么问题？

# hadoop - HFileOutputFormat 是否启动减速器？

> ID：16011789
> 
> 赞同：1
> 
> 时间：2013-04-15T09:27:53.157
> 
> 标签：hadoop, hbase

我使用 HFileOutputFormat 将 CSV 文件批量加载到 hbase 表中。我只有 map 而没有使用 job.setNumReduceTasks(0) 的 reduce 任务。但是我可以看到一个减速器在工作中运行，这个减速器是因为 HFileOutputFormat 而启动的吗？
以前我使用 TableOutputFormat 完成相同的工作，其中从来没有运行过减速器。我最近重构了 map 任务以使用 HFileOutputFormat，但现在在此更改之后，我可以看到一个减速器正在运行。

其次，在减速器中出现以下错误，这是我以前使用 TableOutputFormat 没有得到的，这是否也与 HFileOutputFormat 有关？

***错误：java.lang.ClassNotFoundException：com.google.common.base.Preconditions***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:30:15.377

HFileOutputFormat 确实启动了一个（对于 HFiles 必要的）reduce 任务。

那里弹出错误 Hadoop 需要 Google 的 Guava 库才能生成 HFile。让 Hadoop 找到该库的最简单方法是将其`$HBASE_HOME/lib/`从`$HADOOP_HOME/lib/`. 寻找`guava-<version>.jar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T15:31:18.153

是的，即使我们将 Reducer 的数量设置为零，HFileOutputFormat 也会启动一个 reducer 任务来对 mapper 输出进行排序和合并，以使这个文件 HTable 兼容。reducer 的数量等于 HBase 表中的区域数

[在此处](http://databuff.blogspot.com/2013/11/bulk-load-data-in-hbase-table.html#.V3-BVut9744)查找示例代码以通过 MapReduce 作业为 HBase 批量加载准备数据

# r - 在 R 中使用线性插值添加缺失的 xts/zoo 数据

> ID：16011790
> 
> 赞同：8
> 
> 时间：2013-04-15T09:28:02.680
> 
> 标签：r, time-series, xts, zoo

我确实有丢失数据的问题，但我没有 NA - 否则会更容易处理......

我的数据如下所示：

```
time, value
2012-11-30 10:28:00, 12.9
2012-11-30 10:29:00, 5.5
2012-11-30 10:30:00, 5.5
2012-11-30 10:31:00, 5.5
2012-11-30 10:32:00, 9
2012-11-30 10:35:00, 9
2012-11-30 10:36:00, 14.4
2012-11-30 10:38:00, 12.6 
```

如您所见 - 缺少一些分钟值 - 它是 xts/zoo 所以我使用 as.POSIXct... 将日期设置为索引。如何添加缺少的时间步来获得完整的 ts？我想用线性插值填充缺失值。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T12:45:20.433

您可以`merge`使用包含所有日期的向量来处理您的数据。之后，您可以使用`na.approx`来填写空白（在这种情况下为 NA）。

```
data1 <-read.table(text="time, value
2012-11-30-10:28:00, 12.9
2012-11-30-10:29:00, 5.5
2012-11-30-10:30:00, 5.5
2012-11-30-10:31:00, 5.5
2012-11-30-10:32:00, 9
2012-11-30-10:35:00, 9
2012-11-30-10:36:00, 14.4
2012-11-30-10:38:00, 12.6", header = TRUE, sep=",", as.is=TRUE)
times.init <-as.POSIXct(strptime(data1[,1], '%Y-%m-%d-%H:%M:%S'))
data2 <-zoo(data1[,2],times.init)
data3 <-merge(data2, zoo(, seq(min(times.init), max(times.init), "min")))
data4 <-na.approx(data3) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-18T04:10:03.637

感谢[P Lapointe](https://stackoverflow.com/users/1042478/p-lapointe)提供了一个很酷的答案。此外，如果您还利用 na.approx 中的 'xout' 参数，则不再需要进行合并：

```
data1 <-read.table(text="time, value
2012-11-30-10:28:00, 12.9
2012-11-30-10:29:00, 5.5
                   2012-11-30-10:30:00, 5.5
                   2012-11-30-10:31:00, 5.5
                   2012-11-30-10:32:00, 9
                   2012-11-30-10:35:00, 9
                   2012-11-30-10:36:00, 14.4
                   2012-11-30-10:38:00, 12.6", header = TRUE, sep=",", as.is=TRUE)
times.init <-as.POSIXct(strptime(data1[,1], '%Y-%m-%d-%H:%M:%S'))
data2 <-zoo(data1[,2],times.init)
data2
data4 <- na.approx(object=data2, 
          xout=seq(min(times.init), max(times.init), "min")) 
```

# java - 在二进制图像中识别单独形状的最简单方法是什么？

> ID：16011791
> 
> 赞同：0
> 
> 时间：2013-04-15T09:28:03.990
> 
> 标签：java, computer-vision, shapes, image-recognition

所以我有以下图像：

![二进制图像 - 形状](https://i.stack.imgur.com/JenhN.jpg)

现在我希望找到每个单独的断开形状的中心点。如果可能的话，我还想找到宽度和高度。

我正在使用 Java 和 java.awt.image 包，但即使只是这个问题的一般解决方案也会有所帮助。

我自己的想法是：

*   遍历并找到第一个白色像素。
*   从该像素执行 BFS，用数字 1 标记它找到的白色像素。
*   完成后，继续遍历图像，该图像在第一个白色像素处停止，没有分配/标记数字。
*   一旦找到，执行 BFS 并用数字 2 标记找到的所有像素。
*   *起泡，冲洗并重复。*我的意思是......继续这样做直到图像结束。
*   您要达到的数字是不同形状的数量。

但这似乎有点密集，然后我必须找到中心、宽度和高度。有没有更简单的方法？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:25:41.873

我不知道这是否是个好主意，但也许这会对您有所帮助：

我会`randomWalks`从边缘发送并将图像分成更小的盒子，然后继续从更小的盒子发送 randomWalks 直到某个点（我不知道那会是什么，但你会知道这里没有超过 1 个元素的更小的盒子）

-如果一个没有看到任何`randomWalk`切割另一个，那么，有一个新的弓。例如，在我的图像中，假设从**(0,200)**开始并从**(100,0)**开始，然后他们在**(100,200)**没有接触任何东西的情况下击中，那么你有一个盒子**(0,0,100,200)**。将此添加到您的.`randomWalk``whitecolor``1st randomWalk(rw1)`**`rw2`****`whitecolor`**`myBoxes`********

 ******- 现在我想到了，你可以这样做：如果一个盒子**里像素的颜色总和**等于零（或小于一个小数字），那么那个盒子里就没有图像。所以你可以将它添加到另一个列表中，让我们调用它`myEmptyBoxes`。

-接下来，当您确定每个盒子中只有一个元素时，然后**将每个盒子的颜色相加**，如果两个盒子相等或非常接近，那么它们可能是相同的图像。如果不是自动它们不是相同的图像，则无需处理这两个图像/框。

-我想不出下一步，这一切都浮现在我的脑海里。

-另外，我建议您使用 opencv，它是解决此类问题的好库

希望这会有所帮助

![图片](https://i.stack.imgur.com/INbbL.jpg)******

# vb.net - 为什么设置excel的值单元格在vb.net中不起作用？

> ID：16011794
> 
> 赞同：0
> 
> 时间：2013-04-15T09:28:15.807
> 
> 标签：vb.net, add-in, excel-2010

我通过 vb.net 为 excel 创建了一个示例插件：

```
Imports System.Runtime.InteropServices
Imports Excel = Microsoft.Office.Interop.Excel

Public Class Form1

        Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
            Dim excelApp As Excel.Application
            excelApp = CType(Marshal.GetActiveObject("Excel.Application"), Excel.Application)
            ' Dim xlwb As Excel.Workbook = Globals.ThisAddIn.Application.Worksheets.Add()
            ' dim sheet As Excel.Worksheet = xlwb.ActiveSheet
            Dim sheet As Excel.Worksheet
            sheet = excelApp.ActiveSheet
            sheet.Range("A1").Value = "OK"

            Me.Close()

        End Sub
    End Class 
```

我为 excel 的单元格设置了值： `sheet.Range("A1").Value = "OK"`但它没有设置。为什么？怎么修？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:50:23.743

与其将工作表声明为变量，不如直接根据其名称调用工作表。例如，

```
Sheets("Sheet1").Range("A1").Value = "OK" 
```

这样你就不会有多个工作表变量。

我还应该补充一点，这意味着您必须激活正确的工作簿。

希望这可以帮助

格雷格

# mysql - 让 MySQL AFTER INSERT 在事务完成后触发触发

> ID：16011795
> 
> 赞同：2
> 
> 时间：2013-04-15T09:28:18.150
> 
> 标签：mysql, triggers, user-defined-functions

我有一个 mysql 数据库，其中条目被添加到显式事务块内的两个相关表中。当事务成功完成时（并且仅在那时），应该通知另一个进程关于新数据。

为此，我编写了一个 UDF，它通过 IPC 通知其他进程。我还在其中一张表上设置了一个 AFTER INSERT 触发器，该触发器调用了 UDF。

我假设，触发器将在事务完成并且实际插入行后触发。但是，它似乎是在执行 INSERT 语句之后立即执行的。

是否有某种方法可以延迟触发函数的执行，直到行真正全局插入到数据库中（即在 COMMIT 之后）？

我想，一种解决方法是在 COMMIT 之后显式调用 UDF，但自动化方法会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:12:08.220

查看 MySQL 文档，似乎无法定义在事务提交后运行的触发器。

我认为理由是触发器通常用于对数据库进行额外的更改，因此您几乎总是希望它们在事务中运行以避免数据完整性问题。

其他数据库系统（如 Oracle）似乎支持这种行为，但如果您坚持使用 MySQL，则必须手动调用 UDF。

# c++ - 为什么在阻塞模式下不会为 TServerSocket 触发 OnClientConnect 和 OnClientError 事件

> ID：16011800
> 
> 赞同：0
> 
> 时间：2013-04-15T09:28:32.180
> 
> 标签：c++, sockets, c++builder, c++builder-xe

我正在使用 Embarcadero RAD studio C++ builder XE 创建一个 C++ 应用程序。`TServerSocket`应用程序在阻塞模式下使用动态创建的组件。我创建了一个派生类，`TServerClientThread`它提供了一个自定义`ClientExecute()`方法。这个类是通过我已经实现的`TServerSocket`事件处理程序创建的。我为、和`OnGetThread`分配事件处理程序。在我的线程类中，我使用类从套接字连接中读取和写入。`OnAccept``OnClientConnect``OnClientDisconnect``OnClientError``TWinSocketStream`

我使用一个自定义编写的类（派生自`TComponent`），它创建`TServerSocket`我分配的事件处理程序是此类的成员函数。

我的`OnAccept`和`OnClientDisconnect`事件触发，但`OnClientConnect`和事件都没有`OnClientError`触发。这是该组件的正常行为吗？我读到的关于这个组件的所有内容都表明所有事件都将`TServerSocket`在阻塞模式下触发，我根本无法理解为什么这些事件不会触发。我还需要做些什么，或者这些事件在阻塞模式下不起作用？将`TServerSocket`实例用作另一个`TComponent`派生类的成员是否可能会导致一些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:04:43.563

该`OnClientConnect`事件由`TServerClientWinSocket`构造函数触发。当 WinSock 接受一个新的客户端套接字时，在调用事件`TServerClientWinSocket`之后立即构造一个对象，并且就在调用和事件之前。因此，唯一可能不会被调用的方法是，如果您实际上没有分配给它的处理程序。`OnGetSocket``OnAccept``OnGetThread``OnClientConnect`

`OnClientError`在非阻塞套接字故障期间调用，由`TCustomWinSocket.SendStream()`、`TCustomWinSocket.SendBuf()`和调用`TCustomWinSocket.ReceiveBuf()`。如果您将`TWinSocketStream`其用于 I/O，则它不会调用这些方法。相反，它会引发`ESocketError`失败异常。如果您没有捕获这些异常，调用`TServerClientThread` 将简单地终止自身（在将异常传递给主线程进行处理之后）。

# php - JQuery UI 对话框在一台服务器上工作，但在另一台服务器上不工作

> ID：16011803
> 
> 赞同：-2
> 
> 时间：2013-04-15T09:28:38.863
> 
> 标签：php, jquery, jquery-ui

我有一个简单的链接列表，因此当单击每个链接时，我应该会弹出一个对话框，其中包含从 DB 获得的更多信息，并作为 json 对象发布回该对话框。

现在的问题是，这个设置可以在我的一台服务器上运行，而不能在另一台服务器上运行。两台服务器都运行 Apache 并且两台服务器总体上非常相似，除了一件事，第一个（工作的）是 VPS，第二个是共享主机，我真的不确定这是否与它有关，但这是唯一让我想到的。

```
 <head>

<link rel=stylesheet href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/themes/start/jquery-ui.css" type="text/css">
<script type="text/javascript" src="/js/jquery-1.8.2.min.js"></script>
<script>
function user_dialog(a,b){
    "undefined"!=typeof jQuery.ui?($("#dialog").attr("title","Detailed Information").html(a),
    $("#dialog").dialog({
        modal:true,
        width:400,
        buttons: {
            Cancel: function() {
                $(this).dialog("close");
                },
                Download: function(){
                    $(this).dialog("close");
                    window.location=b
                    }
                    }
                    }
                    ))
                    :window.location=b}

function user_notice(a){
    download_link=$(a).attr("href");
    $.ajax({
        type:"POST",
        url:"/includes/json.php",
        data:"action=reminder&thepath="+download_link,
        dataType:"json",
        error:function(){
            window.location=download_link
            },
        success:function(a){
            1==a.status&&user_dialog(a.html,download_link);
            }
            })
            };
</script>

</head>

<body>
<div class="bb_button"><a class="bb_xls" href=" " rel="nofollow" onClick=" user_notice(this,''); return false;">Download Now</a></div>
<div id="dialog" style="display:none;"> <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>
<div id="g_plus_message"></div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js?ver=1.10.1"></script>

</body> 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:49:35.200

我在我的 json.php 中发现了一个错误。

导致我所有问题的错误是我有以下代码行

```
header('Status: 403 Forbidden'); 
```

感谢安德烈

# c# - Id 的重复是否会导致有关视图状态的随机错误？

> ID：16011804
> 
> 赞同：2
> 
> 时间：2013-04-15T09:28:39.523
> 
> 标签：c#, asp.net, ajax, viewstate, web-controls

asp.net 接受不同模板字段中 asp.net 服务器控件的重复 ID。

```
<ItemTemplate>
<asp:HiddenField ID="HDN_MainCode" Value='<%#Eval("v_main_code")%>' runat="server" /> 
</ItemTemplate> 
```

* * *

在另一个网格视图中：

```
<ItemTemplate>
<asp:HiddenField ID="HDN_MainCode" Value='<%#Eval("v_main_code")%>' runat="server" /> 
</ItemTemplate> 
```

* * *

这种类型的重复会导致有关 viewstate 的随机错误吗？如果答案是肯定的，我怎么能检测到`.aspx`文档 中的所有重复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:35:33.350

> 这种类型的重复会导致有关 viewstate 的随机错误吗？

不会。这些内部控件在渲染时会获得**唯一的 ID 。**例如，如果您的 中有标签 ID `ProductIDLabel`，`ListView`则其生成的 ID 将类似于：

```
ListView1$ctrl0$ProductIDLabel
ListView1$ctrl1$ProductIDLabel 
```

有关更多信息，请参阅：[ASP.NET Web 服务器控件标识](http://msdn.microsoft.com/en-us/library/1d04y8ss%28v=vs.100%29.aspx)

> 当控件位于创建多个控件实例的数据绑定控件内时，分配给 ID 属性的值将与命名容器和递增索引连接。

**但是如果**您将[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode%28v=vs.100%29.aspx)设置为`Static`，那么您将获得与 ASPX 页面中指定的 ID 相同的 ID。

# c++ - BitBlt 两个图像相互叠加

> ID：16011805
> 
> 赞同：1
> 
> 时间：2013-04-15T09:28:42.767
> 
> 标签：c++, winapi

我正在尝试编写一个程序，当复选框被打勾时，会在屏幕的大面积上显示网格。我正在尝试使用 BitBlt 在 WM_PAINT 中执行此操作，并且我的显示函数肯定是使用正确的布尔值调用的。但是，它不会对窗口进行任何更改。我是在做一些愚蠢的事情，还是没有切实可行的方法来实现这一目标？如果这是无法实现的，是否有任何方法可以在不指定包含网格的不同图像集的情况下获得类似的结果？

```
void DisplayRoom(HWND hwnd, char TileList[][100], POINT pMaxDisplay, POINT pMinDisplay, HBITMAP ahbmTileset[], bool bDisplayBars)
{
HBITMAP hbmSprite, hbmMask;
BITMAP bm;
PAINTSTRUCT ps;
HINSTANCE hinNULL = GetModuleHandle(NULL);
HDC hdc = BeginPaint(hwnd, &ps);
HDC hdcMem = CreateCompatibleDC(hdc);
HBITMAP hbmOld;
POINT Position;
hbmSprite = LoadBitmap(hinNULL, MAKEINTRESOURCE(IDB_CLEAR_GROUND));
hbmOld = (HBITMAP)SelectObject(hdcMem, hbmSprite);
GetObject(hbmSprite, sizeof(bm), &bm);
for (int iii = pMinDisplay.x; iii < pMaxDisplay.x; iii++)
    for (int jjj = pMinDisplay.y; jjj < pMaxDisplay.y; jjj++)
    {
        switch(TileList[iii][jjj])
        {
        case 'g':
            hbmSprite = ahbmTileset[0];
            break;
        case 'd':
            hbmSprite = ahbmTileset[1];
            break;
        case 'i':
            hbmSprite = ahbmTileset[2];
            break;
        case 'l':
            hbmSprite = ahbmTileset[3];
            break;
        }
                    assert(hbmSprite != NULL);
        SelectObject(hdcMem, hbmSprite);
        BitBlt(hdc, (iii - pMinDisplay.x) * 34 + 90, (jjj - pMinDisplay.y) * 34 + 60, 34, 34, hdcMem, 0, 0, SRCCOPY);
    }
DeleteDC(hdcMem);
EndPaint(hwnd, &ps);
if (bDisplayBars)
{
    HDC hdc = BeginPaint(hwnd, &ps);
    HDC hdcMem = CreateCompatibleDC(hdc);
    hbmSprite = LoadBitmap(hinNULL, MAKEINTRESOURCE(IDB_GRID));
            assert(hbmSprite != NULL);
    hbmMask = CreateBitmapMask(hbmSprite, RGB(0,0,0));
    for (int iii = pMinDisplay.x; iii < pMaxDisplay.x; iii++)
        for (int jjj = pMinDisplay.y; jjj < pMaxDisplay.y; jjj++)
        {
            SelectObject(hdcMem, hbmMask);
            BitBlt(hdc, (iii - pMinDisplay.x) * 34 + 90, (jjj - pMinDisplay.y) * 34 + 60, 34, 34, hdcMem, 0, 0, SRCAND);
            SelectObject(hdcMem, hbmSprite);
            BitBlt(hdc, (iii - pMinDisplay.x) * 34 + 90, (jjj - pMinDisplay.y) * 34 + 60, 34, 34, hdcMem, 0, 0, SRCPAINT);
        }
    DeleteDC (hdcMem);
    EndPaint(hwnd, &ps);
}
} 
```

对话过程如下所示。

```
BOOL CALLBACK CreateRoom(HWND hwnd, UINT Message, WPARAM wParam, LPARAM lParam)
{
static char achTileDetails[100][100];
static POINT pDimensions, pMonsterLocations, pMinDisplay, pMaxDisplay;
static HBITMAP ahbmTileset[4];
static bool bShowBars;
switch(Message)
{
case WM_INITDIALOG:
    SetFocus(hwnd);
    for (int iii = 0; iii < 100; iii++)
        for(int jjj = 0; jjj < 100; jjj++)
            achTileDetails[iii][jjj] = 'g';
    pDimensions.x = 20;
    pDimensions.y = 10;
    pMinDisplay.x = 0;
    pMinDisplay.y = 0;
    pMaxDisplay.x = 20;
    pMaxDisplay.y = 10;
    for (int iii = 0; iii < 4; iii++)
        ahbmTileset[iii] = LoadBitmap(GetModuleHandle(NULL), MAKEINTRESOURCE(IDB_CLEAR_GROUND + iii));
    return TRUE;
case WM_PAINT:
    DisplayRoom(hwnd, achTileDetails, pMaxDisplay, pMinDisplay, ahbmTileset, bShowBars);
    break;
case WM_COMMAND:
    switch(LOWORD(wParam))
    {
    case IDCANCEL:
        EndDialog(hwnd, IDCANCEL);
        break;
    case IDC_DISPLAY_GRID:
        switch(HIWORD(wParam))
        {
        case BN_CLICKED:
            bShowBars = SendMessage(GetDlgItem(hwnd, IDC_DISPLAY_GRID), BM_GETCHECK, 0, 0);
            InvalidateRect(hwnd, NULL, TRUE);
            UpdateWindow(hwnd);
            break;
        }
        break;
    }
    break;
case WM_LBUTTONDOWN:

    break;
default:
    return FALSE;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:39:08.580

我能看到的主要问题是你打`BeginPaint`了`EndPaint`两次电话。在任何绘画完成之前，你应该只做一次`BeginPaint`，并且`EndPaint`在所有绘画完成之后。

可能还有其他问题，这些东西很难完全正确。

# android - Android：如何将公共交通层添加到谷歌地图

> ID：16011818
> 
> 赞同：0
> 
> 时间：2013-04-15T09:29:33.343
> 
> 标签：android, google-maps, google-maps-android-api-2

我的 Android 应用程序使用 Google Maps API v2 来显示火车站。如何启用公共交通层（在我的代码中）以便显示火车/铁路线？

我不想要任何交通数据，只想要显示火车/铁路线的地图图层（例如伦敦地铁彩色火车线）。

请参阅此链接了解我想要的内容： [Google Maps Public Transport Layer](http://www.blendor.com/wp-content/uploads/2009/02/picture-4-297x300.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:16:55.137

您需要从获取数据开始。

在获得所有纬度、经度、颜色和任何其他所需内容（在 APK 中硬编码或从 Web 服务检索）之后，使用 Polyline 绘制所有内容。

您不能简单地在应用程序中打开此类图层。

# assembly - 关于保护模式下间接jmp的问题

> ID：16011819
> 
> 赞同：0
> 
> 时间：2013-04-15T09:29:41.763
> 
> 标签：assembly, x86, protected-mode

因为地址 xxxx:yyyyyyyy 在保护模式下是 32 位的，所以我把一个 48 位的地址放在一块内存中，想给间接`jmp`的，下面是我写的：

```
mov eax,s1
mov [address],eax
mov ax,SelectorCode32
mov [address+4],ax
jmp  fword [address]

address:dd 0
        dw 0 
```

但是 nasm 表明这`jmp fword [address]`是错误的，我已经阅读了一些类似的建议 [，](https://stackoverflow.com/questions/4812797/doing-a-indirect-far-jump-call-in-protected-mode)但也没有帮助，那我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:18:03.973

NASM 的近调用和远调用语法不同于 TASM 和 MASM。

以下是间接跳转的两个选项：

```
jmp [fptr] ; jump to CS:0x12345678
jmp far [fptr] ; jump to 0xABCD:0x12345678

fptr dd 0x12345678
     dw 0xABCD 
```

您也可以始终将远地址压入堆栈并执行`retf`.

# c# - MonoDevelop : "要写入的字节数大于指定的 ContentLength"

> ID：16011820
> 
> 赞同：0
> 
> 时间：2013-04-15T09:29:42.693
> 
> 标签：c#, .net, exception, mono, monodevelop

我正在尝试开发短信发送应用程序，但它给出了一个异常“要写入的字节数大于指定的 ContentLength”这是代码

```
using System;
using Gtk;
using WebKit;
using System.Text;
using System.Net;
using System.IO;

public partial class MainWindow: Gtk.Window
{   
    byte[] dataout; //global variables
    Stream stream = null;
    int length;
    public MainWindow (): base (Gtk.WindowType.Toplevel)
    {

        Build ();
        requestweb ();

        this.DeleteEvent += OnDeleteEvent;

    }
    private void requestweb() //the post method
    {
        System.Net.ServicePointManager.ServerCertificateValidationCallback += (s,ce,ca,p) => true;
        string index = entryIndex.Text;
        string number = entryNumber.Text;
        string sms = textviewSMS.Buffer.Text;
        string captcha = entryCaptcha.Text;
        ASCIIEncoding encoding = new ASCIIEncoding();
        string postData = "send=1&smstext=" + sms + "&smstoprefix=" + index + "&smsto=" + number + "&dirtysmstext=" + sms
            + "&translit=on&confirm_key=1&confirmcode=" + captcha + "&x=0&y=0";

        byte[] data = encoding.GetBytes (postData);
        WebRequest request = WebRequest.Create("https://mobile.beeline.ge/ge/main/sms/send.wbp");
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = data.Length;
        stream = request.GetRequestStream();
        dataout = data;
        length = data.Length;

    }
    private void addWebView() //load captcha url
    {
        WebView web = new WebView ();
        web.Open ("https://mobile.beeline.ge/ge/main/sms/mamimg.aspx");

        web.SetSizeRequest(60,19);
        captchaImage.Add (web);
        captchaImage.ShowAll ();
    }

    protected void OnButtonSendClicked (object sender, EventArgs e)
    {
        SendSMS ();
    }

    private void SendSMS()
    {
        stream.Write(dataout, 0, length);
        stream.Close();
    }
    void OnDeleteEvent(object o, DeleteEventArgs args){
        Application.Quit();
        args.RetVal = true; //this is necessary to stop an error on close.
    }

    protected void OnButton1Clicked (object sender, EventArgs e)
    {
        addWebView (); //this loads captcha
    }
} 
```

我将发送函数拆分为方法的原因是验证码必须在请求之后和发送之前加载。这是终端输出：

```
alex@alex-PC:~$ mono /home/alex/C#/BeeSMS/BeeSMS/bin/Release/BeeSMS.exe
No bp log location saved, using default.
[000:000] Browser XEmbed support present: 1
[000:000] Browser toolkit is Gtk2.
[000:000] Using Gtk2 toolkit
No bp log location saved, using default.
[000:013] Warning(optionsfile.cc:47): Load: Could not open file, err=2
[000:013] No bp log location saved, using default.
[000:013] Browser XEmbed support present: 1
[000:013] Browser toolkit is Gtk2.
[000:013] Using Gtk2 toolkit
[000:000] Warning(optionsfile.cc:47): Load: Could not open file, err=2
[000:000] No bp log location saved, using default.
java version "1.7.0_15"
OpenJDK Runtime Environment (IcedTea7 2.3.7) (7u15-2.3.7-0ubuntu1~12.10.1)
OpenJDK 64-Bit Server VM (build 23.7-b01, mixed mode)
Marshaling clicked signal
Exception in Gtk# callback delegate
  Note: Applications can use GLib.ExceptionManager.UnhandledException to handle the exception.
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Net.ProtocolViolationException: The number of bytes to be written is greater than the specified ContentLength.
  at System.Net.WebConnectionStream.CheckWriteOverflow (Int64 contentLength, Int64 totalWritten, Int64 size) [0x00000] in <filename unknown>:0 
  at System.Net.WebConnectionStream.BeginWrite (System.Byte[] buffer, Int32 offset, Int32 size, System.AsyncCallback cb, System.Object state) [0x00000] in <filename unknown>:0 
  at System.Net.WebConnectionStream.Write (System.Byte[] buffer, Int32 offset, Int32 size) [0x00000] in <filename unknown>:0 
  at MainWindow.SendSMS () [0x00000] in <filename unknown>:0 
  at MainWindow.OnButtonSendClicked (System.Object sender, System.EventArgs e) [0x00000] in <filename unknown>:0 
  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&)
  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in <filename unknown>:0 
  at System.Reflection.MethodBase.Invoke (System.Object obj, System.Object[] parameters) [0x00000] in <filename unknown>:0 
  at System.Delegate.DynamicInvokeImpl (System.Object[] args) [0x00000] in <filename unknown>:0 
  at System.MulticastDelegate.DynamicInvokeImpl (System.Object[] args) [0x00000] in <filename unknown>:0 
  at System.Delegate.DynamicInvoke (System.Object[] args) [0x00000] in <filename unknown>:0 
  at GLib.Signal.ClosureInvokedCB (System.Object o, GLib.ClosureInvokedArgs args) [0x00000] in <filename unknown>:0 
  at GLib.SignalClosure.Invoke (GLib.ClosureInvokedArgs args) [0x00000] in <filename unknown>:0 
  at GLib.SignalClosure.MarshalCallback (IntPtr raw_closure, IntPtr return_val, UInt32 n_param_vals, IntPtr param_values, IntPtr invocation_hint, IntPtr marshal_data) [0x00000] in <filename unknown>:0 
   at GLib.ExceptionManager.RaiseUnhandledException(System.Exception e, Boolean is_terminal)
   at GLib.SignalClosure.MarshalCallback(IntPtr raw_closure, IntPtr return_val, UInt32 n_param_vals, IntPtr param_values, IntPtr invocation_hint, IntPtr marshal_data)
   at Gtk.Application.gtk_main()
   at Gtk.Application.Run()
   at BeeSMS.MainClass.Main(System.String[] args) 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:51:08.823

你只是得到流`request.GetRequestStream()`，但什么也不写。

尝试：

```
var stream = request.GetRequestStream();
stream.Write(data,0,data.Length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:17:29.727

还有另一种流写方法

```
private void SendSMS()
{
    stream.Write(dataout, 0, length);
    stream.Close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T07:27:22.307

**您需要通过在System.webServer**部分添加这部分代码来转到**Web.config**文件。

 **```
<security> 
<requestFiltering> 
<requestLimits maxAllowedContentLength="3000000000" /> 
</requestFiltering> 
</security> 
```**

# sql - 如何在 sql server 中加入和取回结果

> ID：16011825
> 
> 赞同：1
> 
> 时间：2013-04-15T09:29:53.223
> 
> 标签：sql, sql-server, sql-server-2008

基于以下表格（表1和表2）结构。我想得到一个Table3。如何在 Sql Server 中执行此操作？

表格1

```
ID Name
1   A
2   B
3   C 
```

表2

```
ID Name
1  D
2  E 
```

预期输出是

```
ID Name
1   D
2   E
3   C 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T09:35:28.443

您可以使用`COALESCE`外连接

```
SELECT t1.ID, 
       COALESCE(t2.Name, t1.Name)AS Name 
FROM   table1 t1 
       LEFT OUTER JOIN table2 t2 
               ON t1.ID = t2.ID 
```

[**演示**](http://sqlfiddle.com/#!3/a8640/1/0)（插入`Table3`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:32:55.097

```
select 
Table1.ID,case when Table2.Name is null then Table1.Name else Table2.Name end
from
Table1 left join Table2 on Table1.id=Table2.id 
```

您的数据不是太多，我不确定这是否是您想要的。对于你的例子，我认为它有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:46:08.563

select t1.id,t2.name from table1 t1 left outer join table2 t2 on t1.id=t2.id

我希望这会产生类似的结果

```
t1.id  t1.name  t2.id  t2.name
1       A        1       D
2       B        2       E
3       C        NULL    NULL 
```

# c# - 从 sql 数据库中获取列数据并存储在标签/字符串中

> ID：16011826
> 
> 赞同：0
> 
> 时间：2013-04-15T09:29:55.593
> 
> 标签：c#, asp.net

我打算只从 SQLdatabase 中检索列数据，并将其存储在字符串或标签中作为持有者。

**案例：** 从数据库 "tblUser" WHERE apple = 1 中选择所有电子邮件地址并存储在 "emaillist" 字符串持有者中，然后附加 mail.to.add(emaillist);

**注意：** ExecuteScalar 只允许我检索数据库的第一行。因此，只有第一行电子邮件地址能够检索。（例如，user@user.com）

**预期结果：** 由“user@user.com,testing.gmail.com,admin@admin.com”等组成的电子邮件列表。

**我的代码：**

```
 String status = "1";
    SqlConnection conn100 = new SqlConnection("Server=localhost;Integrated                     Security=true;database=WebsiteDatabase");
    conn100.Open();
    SqlCommand cmd100 = conn100.CreateCommand();
    cmd100.CommandText = "select emailaddress from tblUser where apple= '" + status + "'";
        string selected100 = cmd100.ExecuteScalar().ToString();

        String emailcontent = "";
        emailcontent = "" + selected1 + "- Highlight: " + selected2;
        String emaillist = "" + selected100;
        //Create a new MailMessage in order to send email
        MailMessage mail = new MailMessage();

        //The recipient of this email
        mail.To.Add("recipient@gmail.com" + emaillist);

        //The sender of this email
        mail.From = new MailAddress("sender@gmail.com");

        //The subject of this email
        mail.Subject = "Latest Product";

        //The email's content
        string body = "New Product added! " + emailcontent;
        mail.Body = body;
        mail.IsBodyHtml = true;

        //Create new smtpClient and use smtp services
        SmtpClient smtp = new SmtpClient();

        //SMTP host (Gmail)
        smtp.Host = "smtp.gmail.com";

        //SMTP port
        smtp.Port = 587;
        smtp.UseDefaultCredentials = false;

        //Sender Email and password
        smtp.Credentials = new System.Net.NetworkCredential("sender@gmail.com", "password");

        //Enable SSL in order to have secure transmission
        smtp.EnableSsl = true;

        //Send the email
        smtp.Send(mail); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:34:57.687

使用执行阅读器。它会帮助你。
MSDN 链接[http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx](http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx)

```
string str="";
SqlCommand command = new SqlCommand(queryString, connection);
SqlDataReader reader = command.ExecuteReader();
while (reader.Read())
{
   str+=dr[0].ToString()+",";
} 
```

并删除最后一个逗号。

或者你可以利用 List 如下

```
 var userEmail = new List<string>();

  while (lobjDtReader.Read())
  {
       userEmail .Add(lobjDtReader[0].ToString());
  }

  var Emails = string.Join(",", userEmail ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:39:02.757

执行返回多条记录的查询时，您应该使用[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)然后循环返回的行

```
....
conn100.Open();
SqlCommand cmd100 = conn100.CreateCommand();
cmd100.CommandText = "select emailaddress from tblUser where apple= @status";
cmd100.Parameters.AddWithValue("@status", status);
SqlDataReader dr = cmd100.ExecuteReader();
StringBuilder sb = new StringBuilder();
while(dr.Read())
{
   sb.AppendFormat("{0},", dr[0].ToString());
} 
```

我还更改了您的代码以删除 sql text 命令中的字符串连接，我还使用了 StringBuilder 来构建您的目标列表，因为当您有许多字符串要连接在一起时它会更有效。

```
....
// Now the StringBuilder contains all of your To Address separated by a comma as required 
// Clip away the last comma
sb.Length = sb.Length - 1;
mail.To.Add(sb.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:45:39.663

```
String status = "1";
SqlConnection conn100 = new SqlConnection("Server=localhost;Integrated                     Security=true;database=WebsiteDatabase");
conn100.Open();
SqlCommand cmd100 = conn100.CreateCommand();
cmd100.CommandText = "select emailaddress from tblUser where apple= '" + status + "'";
    SqlDataReader dr= cmd100.ExecuteReader();
while(dr.Read())
{
string selected100= dr("emailaddress").ToString();
}

    String emailcontent = "";
    emailcontent = "" + selected1 + "- Highlight: " + selected2;
    String emaillist = "" + selected100;
    //Create a new MailMessage in order to send email
    MailMessage mail = new MailMessage();

    //The recipient of this email
    mail.To.Add("recipient@gmail.com" + emaillist);
...................... 
```

# java - 对数亿文本中的正则表达式搜索的任何建议（存储在 MongoDB 中）

> ID：16011833
> 
> 赞同：2
> 
> 时间：2013-04-15T09:30:22.813
> 
> 标签：java, regex, mongodb, solr, lucene

这是场景：

*   文本字段目前存储在 MongoDB 中；
*   字段平均大于 1KB，无法索引；
*   需要对文本字段执行精确的短语搜索；

搜索要求如下：

*   应该能够为（任何）单个或多个字符（如`?`，`*`或`(.)(.*)`）使用占位符/通配符；
*   应该能够指示短语在搜索文本中的位置（开始、任何地方、结束：`phrase%`、、、`%phrase%`）`%phrase`；
*   结果应该是完全匹配的。

我已经尝试过的：

*   字段不可索引，因为 mongodb 对索引字段有 1KB 的限制；
*   将文本拆分为 1KB 块，正则表达式仍然很慢，并且在搜索短语不是时不使用索引 (^phrase)；
*   MongoDB全文搜索-不确定我是否可以查询位置和短语的完全匹配；
*   尝试使用 Solr，没有运气（启用 ComplexPhraseQueryParser）；
*   ComplexPhraseQueryParser（支持通配符）内置在 lucene 中，但不知道如何指示搜索短语在文本中的位置以及如何仅获得完全匹配；

当前可能的解决方案是将文本字段保留在 RDBMS 中（MySQL，这是个好主意吗？不确定 varchar 和文本字段索引限制）并使用 LIKE 运算符，但我很想听听一些建议：

*   将它全部放在 MongoDB 中并使用它的内置功能会很棒；
*   或使用 solr，因为它将用于其他搜索功能，可靠、可扩展等；
*   或使用与 solr 相同的 lucene，但必须自己处理可扩展性、复制和其他问题；
*   还有其他选择吗？

**更新：**

我得出的结论是，当前的 MongoDB 版本无法满足要求，因此向 solr 方向移动了一点。这是我到目前为止所得到的：

*   Solr 查询工作 ( `/.*sear.* ph.ase.*/`);
*   正则表达式搜索文本开头的速度和预期的一样快（`/sear.* ph.ase.*/`）；
*   其他的，中间和结尾（`/.*sear.* ph.ase.*/`, `/.*sear.* ph.ase/`）有点慢（在 solr 中搜索 200,000 个文档在我的工作站上大约需要 900 毫秒）；

搜索到的 solr 字段类型为：

```
<fieldType name="text_keyword_lowercase" class="solr.TextField" positionIncrementGap="100">
 <analyzer>
  <tokenizer class="solr.KeywordTokenizerFactory"/>
  <filter class="solr.LowerCaseFilterFactory" />
 </analyzer>
</fieldType> 
```

对此有何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T19:08:11.413

你提到过：

> 正则表达式仍然很慢，并且当搜索的短语不是时不使用索引（^phrase）

那么是否有可能强制它始终使用该正则表达式来提高性能？
我的意思是，在每个搜索查询的开头注入，`(^.\*)`所以完整的正则表达式看起来像：`(^.\*phrase)`

当然，您必须`^`在搜索短语的开头进行检查，如果找到，请先将其删除或不注入`(^.\*)`.

# rest - 在客户端处理身份验证错误

> ID：16011836
> 
> 赞同：1
> 
> 时间：2013-04-15T09:30:32.657
> 
> 标签：rest, authentication, backbone.js, jersey, dropwizard

目前我们正在开发一个 REST 应用程序，在服务器端使用 Dropwizard，在客户端使用 RequireJS、Backbone。

我们的身份验证模型是基于 cookie 的。对于每个请求，Web 过滤器都会检查适当的 cookie 及其值，即令牌。如果令牌仍然有效，它将在过滤器链上转发请求，如果不是，它将以 401 响应。

在客户端，它最终像：

```
do an ajax request:
    success:
        render the rest of the content
    error: // got 401
        stop whatever you were doing and redirect to the login page 
```

这种方法出现的唯一缺陷是客户端首先必须下载实际页面，然后才能重定向到登录页面（当然是在 401 的情况下）。

比如我有两个页面a.html和b.html。如果客户端正在浏览页面*a.html*并且在一段时间后其令牌过期，首先他需要下载*b.html*它将在后台执行 ajax 请求（见上文），然后我将能够将其重定向到登录页面：

```
a.html (200) -> token expired -> b.html (200) -> login.html (200) 
```

到目前为止，我在我们编写的每个 REST 应用程序中都使用了这种错误处理方式。我想看到的是例如：

```
a.html (200) -> token expired -> login.html (200) 
```

但这需要例如在服务器端过滤器中对登录页面 url 进行硬编码，并且通常将一些逻辑绑定到服务器端代码中。

我确信有更好的方法来处理客户端的服务器身份验证错误，我想了解它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T15:58:10.053

为什么不使用 Dropwizard 内置的身份验证[1]？如邮件列表[2] 中所述，您可以编写自己的 BasicAuthProvider，然后您可以在其中访问 HttpContext。

希望能帮助到你。

再见，皮耶罗

[1] [http://dropwizard.codahale.com/manual/auth/](http://dropwizard.codahale.com/manual/auth/)

[2] [https://groups.google.com/d/msg/dropwizard-user/NyvxbefQ1FE/vexCdTHdFuYJ](https://groups.google.com/d/msg/dropwizard-user/NyvxbefQ1FE/vexCdTHdFuYJ)

# python - 分配给键后填充海龟图

> ID：16011841
> 
> 赞同：0
> 
> 时间：2013-04-15T09:30:55.677
> 
> 标签：python, function, fill, turtle-graphics

到目前为止，我已经设置了一种蚀刻草图样式的程序，它在按键上移动一定距离并使用 onkey 函数改变颜色。但是，我想通过将程序分配给另一个键（例如“空格”）来填充您使用程序绘制的内容。因此，当执行“空格”时，它将填充我绘制的内容，例如一个带有我当前使用的颜色的正方形。空格键已被定义为停止绘图，但我也希望它也能执行填充命令。

提前致谢。

```
screen_size = 600
setup(screen_size, screen_size)
maximum_coord = (screen_size/2) - 20
bgcolor("white")
goto(0,0)
speed = 5
pensize(3)
color("red")
pendown()

# Listen for the key presses
listen()

# Define all the functions that will control forward, back, left and right
    def up():
        if ycor() < maximum_coord:
    setheading(90)
    forward(speed)
def down():
    if ycor() > -maximum_coord:
        setheading(270)
        forward(speed)
def left():
    if xcor() > -maximum_coord:
        setheading(180)
        forward(speed)
def right():
    if xcor() < maximum_coord:
        setheading(0)
        forward(speed)
def undo_move():
    undo()

#Define space bar to make the pen go up and therefore stop drawing
current_state = penup
next_state = pendown
def space_bar():
    global current_state, next_state
    next_state()
    current_state, next_state = next_state, current_state

#Define colours when keys are pressed
def red():
        color("red")

def green():
    c    olor("green")

def blue():
        color("blue")

#Define space bar to make the pen go up and therefore stop drawing

current_state = penup
next_state = pendown
def space_bar():
     global current_state, next_state
     next_state()
     current_state, next_state = next_state, current_state

# Define the function to clear all the currently drawn lines on the page,
# but keep the turtle in the same position
def clear_drawing():
    clear()

# Define all the functions that will control forward, back, left and right
s= getscreen()
s.onkey(up,"Up")
s.onkey(down,"Down")
s.onkey(left,"Left")
s.onkey(right,"Right")
s.onkey(space_bar,"space")
s.onkey(red,"r")
s.onkey(green,"g")
s.onkey(blue,"b")
s.onkey(undo_move,"z")
s.onkey(clear_drawing, "c")

    done() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:36:08.883

`Turtle`调用中有两个函数，`begin_fill()`它们填充颜色中所描绘的`end_fill()`任何形状。棘手的事情是区分 when to或 when to 。`Turtle``Turtle``begin_fill()``end_fill()`

有很多方法可以做到这一点（例如，在按下键时更改变量布尔值），但为了简单起见，我将向您展示如何使用计数器来做到这一点。

首先更改`pendown()`为`penup()`

```
global counter
counter = 0

def space_bar():
    global counter
    counter =  counter + 1
    if counter % 2 != 0:
        pendown()
        begin_fill()
    else:
        penup()
        end_fill() 
```

每当按下此功能时，该功能将能够切换进出功能，并且还将填充您跟踪的任何形状`Turtle`。

编辑：摆脱另一个`space_bar()`并用此代码替换一个以获得结果。

# android - 以编程方式设置（主屏幕）小部件大小（来自配置实用程序）

> ID：16011843
> 
> 赞同：1
> 
> 时间：2013-04-15T09:30:56.943
> 
> 标签：android, widget, size

是否可以设置与*appwidget-provider* xml 中设置的值不同的小部件尺寸？

重点是使用配置活动配置大小，以便可以选择 1x1 或 3x1 样式的小部件。

谢谢。

# android - 同一布局中另一个布局的可见性不起作用？

> ID：16011846
> 
> 赞同：2
> 
> 时间：2013-04-15T09:31:03.897
> 
> 标签：android, android-relativelayout

我在 grid_progress_layout 中看不到我的 textview tv_progress_status，只有我能看到我的进度条......所以我无法显示我的进度更新。如果我剪切我的 Textview 代码并将其粘贴到进度条上方，则 textview 会显示而进度条不会显示。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/Rl_imageframe"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_margin="5dp"
android:background="@drawable/imageframe"
android:paddingBottom="5dp" >

<TextView
    android:id="@+id/tv_header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_margin="4dp"
    android:gravity="center"
    android:textColor="@android:color/white"
    android:textSize="10sp" />

<ImageView
    android:id="@+id/iv_cover_page"
    android:layout_width="90dp"
    android:layout_height="120dp"
    android:layout_below="@+id/tv_header"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/cover_page" />

<ImageView
    android:id="@+id/iv_delete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:background="@drawable/close_btn"
    android:contentDescription="@string/cover_page"
    android:visibility="invisible" />

<Button
    android:id="@+id/b_footer"
    android:layout_width="fill_parent"
    android:layout_height="15dp"
    android:layout_below="@+id/iv_cover_page"
    android:layout_margin="4dp"
    android:background="@drawable/issue_selector_red"
    android:textColor="@android:color/white"
    android:textSize="9sp" />

<RelativeLayout
    android:id="@+id/grid_progress_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true" >

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="fill_parent"
        android:layout_height="15dp"
        android:layout_centerInParent="true"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:max="100"
        android:progressDrawable="@drawable/progressbarlayout" />

    <TextView
        android:id="@+id/tv_progress_status"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:background="@android:color/transparent"
        android:text="100"
        android:textColor="@android:color/white" />
</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:51:01.843

更改两个布局的代码，希望它的工作。

```
<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="200dp"
    android:layout_height="15dp"
    android:layout_centerInParent="true"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:max="100"
    android:progressDrawable="@drawable/progressbarlayout" />

<TextView
    android:id="@+id/tv_progress_status"
    android:layout_width="200dp"
    android:layout_height="200dp"
   android:layout_below="@id/progressBar1"
    android:background="@android:color/transparent"
    android:text="100"
    android:textColor="@android:color/white" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:51:15.683

尝试这个：

尝试将`RelativeLayout`包含进度视图的内容更改为`FramLayout`：

```
<FrameLayout
    android:id="@+id/grid_progress_layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true" >

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="fill_parent"
        android:layout_height="15dp"
        android:layout_gravity="center"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:max="100"
        android:progressDrawable="@drawable/progressbarlayout" />

    <TextView
        android:id="@+id/tv_progress_status"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="@android:color/transparent"
        android:text="100"
        android:textColor="@android:color/white" />
</FrameLayout> 
```

# linux - 附加到特定行的末尾

> ID：16011853
> 
> 赞同：0
> 
> 时间：2013-04-15T09:31:21.903
> 
> 标签：linux, bash, sed, awk

希望这对那里的人来说是一个简单的问题。我很确定我知道我需要使用什么，但我不知道如何使它工作。这是问题：

我有一个平面文件数据库。让我们称之为 file.db

以下是 file.db 中的一些示例行

```
#file.db
#
line1|example|sample|name|flag|blah
line2|example|sample|name|flag|blah
line3|example|sample|name|flag|blah 
```

基本上，该脚本计算 tar 文件的 MD5 哈希。让我们说 tar 文件的哈希 = 1234abcd

我需要将 MD5 总和和另一个分隔符 (|) 附加到 file.db 中的特定行

例如：

```
#file.db
#
line1|example|sample|name|flag|blah
line2|example|sample|name|flag|blah|1234abcd
line3|example|sample|name|flag|blah 
```

它附加到的行当然将由变量控制。我曾尝试使用 sed 和 awk 但无法弄清楚语法。

# 更新

谢谢各位，现在有解决办法了。这是我最终做的事情：

```
HASH=`md5sum tmp/$URL.tgz | awk '{ print $1 }'`
DBLINE=5
awk -v OFS="|" -v l="$DBLINE" -v h="$HASH" 'NR==l{print $0,h;next}1' databases/$WEB > /tmp/$WEB.tmp && mv /tmp/$WEB.tmp databases/$WEB 
```

谢谢肯特，以及其他所有回答的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:35:45.063

```
line=2
awk -v line="$line" 'FNR==line {printf("%s%s\n" $0, "|123abcd") ;next}
                     {print $0}' infile > newfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:45:26.310

试试这个 awk 单线：

```
line=2
awk -v OFS="|" -v l="$line" 'NR==l{print $0,"123abc";next}1' 
```

使用您的示例输入：

```
kent$  echo "line1|example|sample|name|flag|blah
line2|example|sample|name|flag|blah
line3|example|sample|name|flag|blah"|awk -v OFS="|" -v l="$line" 'NR==l{print $0,"123abc";next}1'                                                                           
line1|example|sample|name|flag|blah
line2|example|sample|name|flag|blah|123abc
line3|example|sample|name|flag|blah 
```

如果要将输出保存回原始文件：

```
awk '....' file.db > /tmp/file.db.tmp && mv file.db.tmp /path/to/your/file.db 
```

**编辑**

如果您还需要 md5 哈希的变量：

```
 line=2
 hsh="whatever"
 awk -v OFS="|" -v l="$line" -v h="$hsh" 'NR==l{print $0,h;next}1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:46:52.983

看看[这个问题](https://stackoverflow.com/questions/3273670/inserting-text-into-a-specific-line)。我想，它有你的答案。我可以补充一点，您可以在 sed 中使用正则表达式模式：

```
sed '/.*line2.*/ a |123asdfasdf' out.db 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:12:02.833

```
set LN = 5
set MS = 1234abcd
sed -i.bak $LN's/$/|'$MS'/' file.db 
```

这应该工作+

# java - 创建和访问数据库的简单方法：（列表 和 HashMap ) 在java中

> ID：16011855
> 
> 赞同：0
> 
> 时间：2013-04-15T09:31:36.273
> 
> 标签：java, database, kyotocabinet

我不熟悉数据库，我通常受益于内存和数据结构，例如 Maps。但是现在我的数据很大，通过将其读入内存，它很快就会溢出，然后系统完全冻结（linux 12.04 LTS）。

所以我认为数据库可能是一个好主意，但是我需要一种快速而直接的方式来实现和访问它。它也应该是一种快速的数据库。例如京都或类似的东西。

所以我想将以下数据放入数据库：

```
HashMap<String, List> Index = new HashMap<String,List>();
List<String> sentences = new List<String>(); 
```

然后以这种方式访问​​它们：通过键访问哈希图，通过列表索引访问列表。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:37:14.297

通常用于以`key-value`对的形式访问数据，因为您似乎需要使用像[Memcached](http://en.wikipedia.org/wiki/Memcached)这样的解决方案。
但是，如果问题是内存大小，您可以在关系数据库中“模拟”哈希图。
这似乎类似于[在 SQL 中存储 hashmap](https://stackoverflow.com/questions/5776331/storing-a-hashmap-in-an-sql-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:38:53.530

`HashMap`您可以通过扩展类并添加所需的方法来制作自己的实现：

*   persist() ，将 HashMap 中的当前记录加载到数据库中
*   retrieve(int limit) ，从数据库中检索有限制的记录

等等

对于 db 层，您可以使用[REDIS](http://redis.io/)，它是您想要的理想选择

# java - 自定义 Java Formatter 以保持机器精度

> ID：16011856
> 
> 赞同：0
> 
> 时间：2013-04-15T09:31:37.607
> 
> 标签：java, floating-point, string-formatting, formatting

默认情况下，默认 java String.format 会将浮点值四舍五入为 6 位，这可以通过在格式字符串中使用格式说明符来覆盖。

如何创建一个格式化程序实例，默认情况下打印要格式化的浮点数或双精度的完整机器精度，但保留在格式字符串中指定较低精度的能力。

举个例子，下面的代码

```
String.format("%f",1.23456789) 
```

返回

```
1.234568 
```

我想创建一个自定义格式化程序，以便

```
MyFormatter.format("%f",1.23456789) 
```

返回

```
1.23456789 
```

如果格式字符串为“%.2f”，则生成与 String.format 相同的输出

那是

```
String.format("%.2f",1.23456789).equals(MyFormatter.format("%.2f",1.23456789)) 
```

应该评估为真

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:30:21.520

您可能需要考虑 Java 的[toString](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Float.html#toString%28float%29)方法。它只产生足够的数字来唯一地将值与相邻的浮点值区分开来。所以像 2 这样简单的数字会产生短字符串，但是需要更多数字来表示的数字会产生更长的字符串。

因为位数取决于类型（更精细的类型有更近的邻居），所以结果对于`float`和`double`操作数可能不同，即使被转换的值完全相同。（[在这里](https://stackoverflow.com/a/15550870/298225)讨论。）

如果可能，请直接使用内置格式化程序，或者通过在字符串缓冲区中操作它们的结果。基数之间的转换是一个令人惊讶的复杂问题，可能涉及扩展精度算术和数学证明。进行正确转换的算法是已知的，并且有描述它们的科学论文。因此可以自己编写，但通常最好依靠已经完成的出色工作。

在你的情况下，你可能会使用这样的东西：

```
If format string is "%f", then use the toString method.
Otherwise, use the format method. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:18:03.840

这是不可能的。`String.format()`以小数位表示精度。浮点变量没有小数位，它们有二进制位。FP 变量的“全机精度”是该点之后的二进制位数。

# iphone - 方向不适用于吐司视图

> ID：16011858
> 
> 赞同：1
> 
> 时间：2013-04-15T09:31:57.203
> 
> 标签：iphone, ipad, ios6, uiinterfaceorientation

我已经包含了 toast 类，当我使用以下代码时，我已将我的应用程序分配为 iphone 中的纵向和 ipad 中的横向

```
customView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 54)] autorelease];
[customView setBackgroundColor: UIColorFromRGB(0xda5340)];
UILabel *lb1=[[[UILabel alloc]initWithFrame:CGRectMake(10, 17, 180, 21)] autorelease];
lb1.text=@"Pet is out of boundary";
lb1.textAlignment = UITextAlignmentCenter;
lb1.textColor=[UIColor whiteColor];
lb1.backgroundColor = [UIColor clearColor];
[customView addSubview:lb1];
[self.window showToast:customView duration:3.0 position:@"top" ]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/eXxpo.png)![在此处输入图像描述](https://i.stack.imgur.com/rmhlP.png)

在 iphone 中，它正确地显示在确切的位置。

当我尝试使用 ipad 时，它会像图像中一样垂直显示。

请帮我整理一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:32:27.207

嗨，对不起，但我已经在 ios 6.0 的 ipad 和 iphone 中添加了您的代码，如果我们在视图中添加代码并且我以这种方式更改了代码，它工作得很好

```
 #if __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_6_0
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
      return UIInterfaceOrientationIsLandscape(interfaceOrientation);
    }
    else{
      return UIInterfaceOrientationIsPortrait(interfaceOrientation);
    }
}
#endif
-(NSUInteger)supportedInterfaceOrientations{
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
    return UIInterfaceOrientationMaskLandscapeRight;
    }
    else{
        return UIInterfaceOrientationMaskPortrait;
    }
} 
```

# android - 仅允许通过 Android 上的 USB 访问特定文件夹

> ID：16011860
> 
> 赞同：2
> 
> 时间：2013-04-15T09:32:03.477
> 
> 标签：android, android-4.0-ice-cream-sandwich

我希望只能通过 USB 连接到计算机访问特定文件夹。基本上，我只想访问存储在 android 平板电脑上的图像、视频和笔记。这适用于运行 4.0.3 的三星 Galaxy Tab 2

他们的一些应用程序可以做到这一点还是如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:35:57.913

出于安全原因，不允许应用程序控制、限制或停止对设备外部存储的访问。

您必须在固件级别修改 Android 才能执行此操作。

# javascript - Colorbox maxHeight 剪辑我的图像

> ID：16011861
> 
> 赞同：3
> 
> 时间：2013-04-15T09:32:13.320
> 
> 标签：javascript, colorbox

我正在使用 Colorbox 在我的网站上显示高清图片。有些照片是人像，有些是风景。我将颜色框设置设置为具有`maxHeight`并且`maxWidth`它适用于横向图片。

问题是纵向图片显示为横向图片，但放大并剪掉了一半。风景图片也会在一定程度上被剪裁，具体取决于窗口大小。

如何让颜色框自动缩放所有图像，以便整个图像很好地适合窗口，而不管方向或大小？

有关问题的演示，请参见下图。

![在此处输入图像描述](https://i.stack.imgur.com/OpnX0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:13:54.730

由于 Vitalii Masilianok 关于 max-height 的提示，找到了一个解决方案（尽管不是最佳的）

在我设置的colorbox css中：

```
#cboxContent img {
    max-height: 100%;
} 
```

然后我必须使用`onComplete`回调来调整颜色框的大小：

```
$(".gallery").colorbox({
    maxWidth: "95%", 
    maxHeight: "95%",
    transition: "none",
    onComplete: function() {
        $.colorbox.resize({ width: $('.cboxPhoto').width() })
    }
}); 
```

使用此解决方案我删除了过渡，否则我会在每张幻灯片之间出现尴尬的 sizeup-sizedown 过渡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:15:07.880

试试这个态度：

1.  计算`widthRatio`为 imageWidth / winWidth, `heightRatio`as imageHeight / winHeight
2.  计算比率为`Math.max(widthRatio, heightRatio)`
3.  将图像大小设置为原始`imageWidth / ratio`和原始`imageHeight / ratio`
4.  钩住函数`window.load`和`window.resize`

看到这个代码

```
var image = document.getElementById("image");
var origWidth = image.offsetWidth, origHeight = image.offsetHeight;

function setImageSize() {
    var winWidth = window.innerWidth, winHeight = window.innerHeight;
    var ratioWidth = origWidth / winWidth, ratioHeight = origHeight / winHeight;
    var ratio = Math.max(ratioWidth, ratioHeight);
    // var ratio = Math.max(ratio,1); uncomment this not to enlarge small images
    with(image.style) {
        width = origWidth / ratio - 20 + "px"; // 10 px margin
        height = origHeight / ratio - 10 + "px";
    }
}

window.addEventListener("load",setImageSize);
window.addEventListener("resize",setImageSize); 
```

在[这个小提琴](http://jsfiddle.net/qUUnk/)

# php - 在标头函数的 url 中传递变量

> ID：16011863
> 
> 赞同：1
> 
> 时间：2013-04-15T09:32:16.963
> 
> 标签：php, url, variables, header

我正在尝试在标头函数中的 URL 中传递变量。`index2.php?ID=<?=$objResult["ID"];?>`我知道如果它不在标头函数中，我可以这样做 。但是，如果我尝试在标头函数中执行此操作，我的整个脚本就会崩溃。我也试过这个：

```
header("Refresh: 5;url=index2.php?ID=".$objResult["ID"].""); 
```

但这给出了以下错误：

> 警告：无法修改标头信息 - 标头已由第 33 行 /var/www/Mail/index.php 中的（输出开始于 /var/www/Mail/index.php:25）发送

（第 33 行是标题行）

我的整个代码是这样的：

```
<?php
if($_POST)
{
    mysql_connect('localhost','root','root');
    mysql_select_db('NAW') or die (mysql_error());

    $Naam              =    $_POST['naam'];
    $Email             =    $_POST['email'];
    $Soort             =    $_POST['soort'];

    $sql = mysql_query("INSERT INTO Klant (Naam, Email, Soort) VALUES ('".$Naam."', '".$Email."', '".$Soort."')") or die (mysql_error());

    if ($sql === false) {

        die (mysql_error());

    }

    else {

        echo ''.$Naam.' is in de database toegevoegd.<br><br>';

    }

    $strSQL         = ("SELECT * FROM Klant WHERE Naam='".$Naam."'");
    $objQuery       = mysql_query($strSQL) or die ("Error Query [".$strSQL."]");
    $objResult      = mysql_fetch_array($objQuery);  

    header("Refresh: 5;url=index2.php?ID=".$objResult["ID"]."");

    if($sql){ return 1; } else { return 0; }

}
?> 
```

如果有人能告诉我我做错了什么，将我推向正确的方向，那就太好了！

**笔记：**

我知道我不应该因为 sql 注入而使用 mysql_* 但是因为这段代码永远不会在线并且只在本地使用这不是问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T09:34:09.363

如果已经输出到页面，则无法发送标题，您拥有：

```
echo ''.$Naam.' is in de database toegevoegd.<br><br>'; 
```

关于这一点有一个很好的答案，[here](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)。

# asp.net-mvc - asp.net-mvc PlaceHolder，怎么用？

> ID：16011865
> 
> 赞同：0
> 
> 时间：2013-04-15T09:32:26.360
> 
> 标签：asp.net-mvc, asp.net-mvc-2, controls, placeholder

我有我的母版页，里面有一些 Html.RenderPartial 和一个随机的 ContentPlaceHolder，或多或少像这样：

```
<body>

<% Html.RenderPartial("Controls/Menu"); %>
<% Html.RenderPartial("Controls/GenericControl"); %>
<asp:ContentPlaceHolder ID="MyContent" runat="server" />

</body> 
```

目前在*Menu.ascx*文件中，我有一个按钮列表。在*GenericControl.ascx*文件中有一些按钮来管理内容。
我的菜单中有与按钮一样多的视图，内容是这样描述的：

```
<asp:Content ID="Content1" ContentPlaceHolderID="MyContent" runat="server">
<div>Some divs here</div>
<asp:Content> 
```

这是我的问题。我想在我的视图中添加另一个*asp:Content*，我不想在母版页中链接它，而是在 GenericControl 中。
显然我不能使用 ContentPlaceHolder。我正在尝试改用 PlaceHolder，但在查找如何使用它时遇到了一些问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T09:39:14.423

如果您使用的是 Asp.net MVC，则不应使用服务器控件（以 开头的控件`<asp: />`）。

使用 Razor 引擎在 asp.net mvc 中定义占位符，你可以这样做：

在_布局中

```
@RenderSection("header", required: false) 
```

在视图中

```
@section header {
   <h1>Hello World</h1>
} 
```

要使其在 Web 表单视图引擎中工作，可能您必须替换`@`为`<% %>`

# jquery - 将另一个 CSS 文件应用于特定的 阻止.net

> ID：16011867
> 
> 赞同：2
> 
> 时间：2013-04-15T09:32:31.933
> 
> 标签：jquery, css, jquery-mobile, twitter-bootstrap

我在我的母版页中使用了 bootstrap.css 来生成标题内容。然后，我使用该母版页创建了一个网页（我需要使用与 bootstrap.css 文件相同的标题内容）。我想在同一页面中创建另一个内容（正文内容），但此内容将使用 jquery-mobile.css 文件。但是当我在同一页面中使用这个 css 文件时，标题内容正在根据 jquery-mobile.css 样式更改（我不希望它被更改）。有没有办法将 jquery-mobile.css 文件应用于特定块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:33:45.523

要了解更多信息，请阅读我的其他文章/答案：**[jQuery Mobile：动态添加内容的标记增强](https://stackoverflow.com/a/14550417/1848600)**

# 解决方案

这可以通过几种方式完成，有时您需要将它们结合起来才能达到预期的结果。

*   方法一：

    它可以通过添加这个属性来做到这一点：

    ```
    data-enhance="false" 
    ```

    到页眉、内容、页脚容器。

    这也需要在应用加载阶段开启：

    ```
    $(document).one("mobileinit", function () {
        $.mobile.ignoreContentEnabled=true;
    }); 
    ```

    ***在初始化 jquery-mobile.js 之前初始化它（看下面的例子）。***

    更多相关信息可以在这里找到：

    [http://jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

    示例：http: [//jsfiddle.net/Gajotres/UZwpj/](http://jsfiddle.net/Gajotres/UZwpj/)

    要再次重新创建页面，请使用以下命令：

    ```
    $('#index').live('pagebeforeshow', function (event) {
        $.mobile.ignoreContentEnabled = false;
        $(this).attr('data-enhance','true');
        $(this).trigger("pagecreate")
    }); 
    ```

*   方法二：

    第二种选择是使用此行手动执行此操作：

    ```
    data-role="none" 
    ```

    示例：http: [//jsfiddle.net/Gajotres/LqDke/](http://jsfiddle.net/Gajotres/LqDke/)

*   方法三：

    可以防止某些 HTML 元素进行标记增强：

    ```
     $(document).bind('mobileinit',function(){
          $.mobile.page.prototype.options.keepNative = "select, input";
     }); 
    ```

    示例：http: [//jsfiddle.net/Gajotres/gAGtS/](http://jsfiddle.net/Gajotres/gAGtS/)

    ***在 jquery-mobile.js 初始化之前再次初始化它（看下面的例子）。***

# 结论

在您的情况下，请使用解决方案 1。它会阻止 jQuery Mobile 增强您的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T12:17:45.743

我写了一个关于类似问题的答案。

[为特定 DIV 加载外部 CSS](https://stackoverflow.com/questions/7379168/load-an-external-css-for-a-specific-div/18252363#18252363)

我相信这应该可以解决您的问题。

确保验证 CSS 文件将始终在响应标头中返回“Access-Control-Allow-Origin”。

祝你好运！

# c++ - C++11 可变参数模板和逗号分隔表达式等价

> ID：16011873
> 
> 赞同：4
> 
> 时间：2013-04-15T09:33:20.017
> 
> 标签：c++, c++11, variadic-templates

在可变参数模板中 ... 运算符将参数包扩展为一系列以逗号分隔的参数（以最简单的形式）。我的问题是：为什么以逗号分隔的多个参数调用 some_function() 并使用 ... 运算符调用它却不行？

我说的是这段代码：

```
template<typename... Args> inline void expand(Args&&... args) 
{
   some_function(22),some_function(32); // Works
   some_function(args)...; // Doesn't work - ERROR
} 
```

这两行不应该产生类似的输出吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T09:57:17.430

正如在另一个答案中所说，通过扩展参数包获得的逗号不是逗号操作符，而是参数列表。将参数列表作为表达式显然是一个错误。由于您不需要函数的返回值，您可以尝试以下几行：

```
template <class... T>
void ignore(T&&...) {}

template<typename... Args> inline void expand(Args&&... args) 
{
   ignore(some_function(args)...); 
} 
```

但是，如果`some_function`return `void`，则包扩展将不起作用，因为您不能为函数提供 void “值”。您可以返回一个值，也可以`some_function`使用逗号运算符链接每次调用：

```
template<typename... Args> inline void expand(Args&&... args) 
{
   ignore( (some_function(args),true)...); 
   //or:
   bool b[] = {(some_function(args),true)...};
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T09:37:28.620

因为在第一种情况下，您没有逗号分隔的参数，而是使用逗号运算符，这是一种完全不同的野兽。

`expand`您可以递归地实现该函数：

```
inline void expand() {}

template<typename T, typename... Args>
inline void expand(T&& head, Args&&... tail)
{
    some_function(head);
    expand(tail...);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T09:52:29.287

一个直截了当的答案是，这不是标准允许包扩展的上下文。允许上下文的完整列表在 14.5.3/4 中指定：

> 4 包扩展由一个模式和一个省略号组成，其实例化会在列表中产生零个或多个模式的实例化（如下所述）。模式的形式取决于扩展发生的上下文。包扩展可能发生在以下情况下：
> 
> — 在函数参数包中（8.3.5）；模式是没有省略号的参数声明。
> 
> — 在作为包扩展 (14.1) 的模板参数包中：
> 
> *   如果模板参数包是参数声明；模式是没有省略号的参数声明；
>     
>     
> *   如果模板参数包是带有模板参数列表的类型参数；模式是没有省略号的相应类型参数。
>     
>     
> 
> — 在初始化列表中（8.5）；该模式是一个初始化子句。
> 
> — 在基本说明符列表中（第 10 条）；模式是一个基本说明符。
> 
> — 在 mem-initializer-list (12.6.2) 中；该模式是一个内存初始化器。
> 
> — 在模板参数列表 (14.3) 中；该模式是一个模板参数。
> 
> — 在动态异常规范（15.4）中；模式是类型标识。
> 
> — 在属性列表中（7.6.1）；模式是一个属性。
> 
> — 在对齐说明符（7.6.2）中；模式是没有省略号的对齐说明符。
> 
> — 在捕获列表中（5.1.2）；该模式是一个捕获。
> 
> — 在 sizeof... 表达式 (5.3.3) 中；模式是一个标识符。

这是一种可能的解决方法，可确保以从左到右的顺序评估参数：

```
struct expand_aux {
    template<typename... Args> expand_aux(Args&&...) { }
};

template<typename... Args>
inline void expand(Args&&... args)
{
    expand_aux  temp { some_function(std::forward<Args>(args))...  };
} 
```

# angularjs - 连接angularjs中的字段

> ID：16011881
> 
> 赞同：0
> 
> 时间：2013-04-15T09:34:05.253
> 
> 标签：angularjs

考虑以下：

```
 <ul class="contracts">
            <li ng-repeat="contract in contracts" class="thumbnail">
                <h3>ID:{{contract.Id}}</a></h3>                    
                <h4>Owner: {{contract.Person.firstName}} {{contract.Person.lastName}}</h4>
           </li>
  </ul> 
```

好的，这行得通，我可以通过连接名字和姓氏来显示所有者。但是，最好在某处拥有一个属性 FullName。如果 Person 为 null，则该属性将返回 firstname + lastname 或“None”。

我的问题是我不知道在哪里添加这个属性。将它添加到合同控制器中感觉很奇怪，因为它与 Person 更相关。但我没有 Person 控制器。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:44:00.790

假设您有合同服务

```
angular.factory('Contract', ['$resource', function($resource) {
  var Contract = $resource(...);
  ...

  Contract.prototype.getOwner = function() {
    if (this.Person) {
      return this.Person.firstName + this.Person.lastName;
    }
    return 'None';
  }

  return Contract;

}]); 
```

然后您可以将其用作

```
<h4>Owner: {{contract.getOwner()}}</h4> 
```

# java - jpa entity mappagin 不同的值

> ID：16011884
> 
> 赞同：0
> 
> 时间：2013-04-15T09:34:10.597
> 
> 标签：java, jpa, jsf-1.2

我在表中有一个列：状态具有以下值：P、A、E、C....

因为我在 jsp 页面上显示此值，所以我想将此值映射到：P-> processing, A->.... E-> errror , C-> Completed

所以我做了一个用于映射值的类：

```
import java.util.HashMap;

public class FactoryStatusValue {

private static final HashMap<String, String> statusValues;

static{
    statusValues = new HashMap<String, String>(){{
        put("C","Completed");
        put("E","Errore");
        put("T","Terminato");
        put("P","Processing");
        put("N","Da processare");
        put("A","Attivà manuale");
    }};
}

public static String getValue(String key){
    return statusValues.get(key);
}
} 
```

在实体中我这样做了：

```
 /**
  * The persistent class for the SETT_TB_BATCHREQUEST database table.
  * 
  */
 @Entity
 @Table(name="SETT_TB_BATCHREQUEST")
 public class SettTbBatchrequest implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@SequenceGenerator(name="SETT_TB_BATCHREQUEST_UIDBATCHREQUEST_GENERATOR", sequenceName="SEQ_SETT_TB_BATCHREQUEST" , allocationSize = 1)
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="SETT_TB_BATCHREQUEST_UIDBATCHREQUEST_GENERATOR")
@Column(unique=true, nullable=false, precision=19)
private Long uidbatchrequest;

@Column(length=64)
private String note;

@Column(name="\"PARAMETER\"", length=1024)
private String parameter;

@Column(length=64)
private String pdr;

@Column(length=64)
private String plant;

@Column(precision=19)
private BigDecimal prognum;

@Column(length=64)
private String ratecode;

@Column(length=64)
private String relco;

@Temporal( TemporalType.DATE)
@Column(nullable=false)
private Date scheddate;

@Column(name="SETT_DISCO", nullable=false, length=64)
private String settDisco;

@Temporal( TemporalType.TIMESTAMP)
@Column(name="SETT_TIME")
private Date settTime;

@Column(name="SETT_USER", length=64)
private String settUser;

@Temporal( TemporalType.DATE)
private Date starttime;

@Column(nullable=false, length=1)
private String status;

@Temporal( TemporalType.TIMESTAMP)
private Date stoptime;

//bi-directional many-to-one association to SettTbBatchprocess
@ManyToOne
@JoinColumn(name="PROCESSNUM", nullable=false)
private SettTbBatchprocess settTbBatchprocess;

//bi-directional many-to-one association to SettTbStoricoRettifica
@OneToMany(mappedBy="settTbBatchrequest")
private List<SettTbStoricoRettifica> settTbStoricoRettificas;

public SettTbBatchrequest() {
}

public long getUidbatchrequest() {
    return this.uidbatchrequest;
}

public void setUidbatchrequest(long uidbatchrequest) {
    this.uidbatchrequest = uidbatchrequest;
}

public String getNote() {
    return this.note;
}

public void setNote(String note) {
    this.note = note;
}

public String getParameter() {
    return this.parameter;
}

public void setParameter(String parameter) {
    this.parameter = parameter;
}

public String getPdr() {
    return this.pdr;
}

public void setPdr(String pdr) {
    this.pdr = pdr;
}

public String getPlant() {
    return this.plant;
}

public void setPlant(String plant) {
    this.plant = plant;
}

public BigDecimal getPrognum() {
    return this.prognum;
}

public void setPrognum(BigDecimal prognum) {
    this.prognum = prognum;
}

public String getRatecode() {
    return this.ratecode;
}

public void setRatecode(String ratecode) {
    this.ratecode = ratecode;
}

public String getRelco() {
    return this.relco;
}

public void setRelco(String relco) {
    this.relco = relco;
}

public Date getScheddate() {
    return this.scheddate;
}

public void setScheddate(Date scheddate) {
    this.scheddate = scheddate;
}

public String getSettDisco() {
    return this.settDisco;
}

public void setSettDisco(String settDisco) {
    this.settDisco = settDisco;
}

public Date getSettTime() {
    return this.settTime;
}

public void setSettTime(Date settTime) {
    this.settTime = settTime;
}

public String getSettUser() {
    return this.settUser;
}

public void setSettUser(String settUser) {
    this.settUser = settUser;
}

public Date getStarttime() {
    return this.starttime;
}

public void setStarttime(Date starttime) {
    this.starttime = starttime;
}

public String getStatus() {
    return FactoryStatusValue.getValue(this.status);
}

public void setStatus(String status) {
    this.status = FactoryStatusValue.getValue(status);
}

public Date getStoptime() {
    return this.stoptime;
}

public void setStoptime(Date stoptime) {
    this.stoptime = stoptime;
}

public SettTbBatchprocess getSettTbBatchprocess() {
    return this.settTbBatchprocess;
}

public void setSettTbBatchprocess(SettTbBatchprocess settTbBatchprocess) {
    this.settTbBatchprocess = settTbBatchprocess;
}

public List<SettTbStoricoRettifica> getSettTbStoricoRettificas() {
    return this.settTbStoricoRettificas;
}

public void setSettTbStoricoRettificas(List<SettTbStoricoRettifica> settTbStoricoRettificas)         {
    this.settTbStoricoRettificas = settTbStoricoRettificas;
}

    } 
```

但表格总是显示：E，P，A，C .....为什么？

为了完成，这是jsp页面

```
 <%@ taglib uri="http://www.sun.com/webui/webuijsf" prefix="webuijsf"%>
  <%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
  <%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
  <%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
  <f:view>
<f:loadBundle basename="it.eni.italgas.sam.web.dictionary"
    var="bundle" />
<webuijsf:page id="page1"  rendered="#{UserBean.userEnabled}">
    <webuijsf:html id="html1">
        <webuijsf:head id="head1" parseOnLoad="false"
            title="Pagina di prova2" webuiOnLoad="false">
            <webuijsf:link id="link1" url="/resources/stylesheet.css" />
        </webuijsf:head>
        <webuijsf:body id="body1" style="-rave-layout: grid"
        styleClass="pageLayout">

        <webuijsf:form id="form1">
            <webuijsf:label id="label3" 
            style="font-size: 14px; left: 24px; top: 24px; position: absolute" 
            text="#{bundle.TitoloPaginaRisultatiRettifiche_02}"/>

            <webuijsf:button id="button3" actionExpression="#{guiRisultati_02.button1_action}" style="height: 24px; left: 48px; top: 120px; position: absolute; width: 96px" text="#{bundle.refresh}"/>

            <!-- inizio tabella -->
            <webuijsf:table id="table1" paginateButton="true"
                paginationControls="true"
                style="height: 52px; left: 48px; top: 168px; position: absolute; width: 1840px"
                title="#{bundle.TitoloTabella}">
                <webuijsf:tableRowGroup id="tableRowGroup2" rows="10"
                    sourceData="#{GUISessionBeanDisplayRett.provider}" sourceVar="richiesta">
                    <webuijsf:tableColumn headerText="#{bundle.UidBatchrequest}"
                        id="tableColumn13" sort="uidbatchrequest">
                        <webuijsf:staticText id="staticText11"
                            text="#{richiesta.value.uidbatchrequest}" />
                    </webuijsf:tableColumn>
                    <webuijsf:tableColumn headerText="#{bundle.Scheddate}"
                        id="tableColumn7" sort="scheddate">
                        <webuijsf:staticText id="staticText12"
                            converter="#{guiRisultati_02.sqlDateConverter1}"
                            text="#{richiesta.value.scheddate}" />
                    </webuijsf:tableColumn>
                    <webuijsf:tableColumn headerText="#{bundle.DataInizio}"
                        id="tableColumn5" sort="starttime">
                        <webuijsf:staticText id="staticText13"
                            converter="#{guiRisultati_02.sqlDateConverter1}"
                            text="#{richiesta.value.starttime}" />
                    </webuijsf:tableColumn>
                    <webuijsf:tableColumn headerText="#{bundle.DataFine}"
                        id="tableColumn6" sort="stoptime">
                        <webuijsf:staticText id="staticText14"
                            converter="#{guiRisultati_02.sqlDateConverter2}"
                            text="#{richiesta.value.stoptime}" />
                    </webuijsf:tableColumn>
                    <webuijsf:tableColumn headerText="#{bundle.Status}"
                        id="tableColumn8" sort="status">
                        <webuijsf:staticText id="staticText15"
                            text="#{richiesta.value.status}" />
                    </webuijsf:tableColumn>
                    <webuijsf:tableColumn headerText="#{bundle.SdV}"
                        id="tableColumn9" sort="relco">
                        <webuijsf:staticText id="staticText16"
                            text="#{richiesta.value.relco}" />
                    </webuijsf:tableColumn>
                    <webuijsf:tableColumn headerText="#{bundle.Impianto}"
                        id="tableColumn10" sort="plant">
                        <webuijsf:staticText id="staticText17"
                            text="#{richiesta.value.plant}" />
                    </webuijsf:tableColumn>
                    <webuijsf:tableColumn headerText="#{bundle.Pdr}"
                        id="tableColumn11" sort="pdr">
                        <webuijsf:staticText id="staticText18"
                            text="#{richiesta.value.pdr}" />
                    </webuijsf:tableColumn>
                    <webuijsf:tableColumn headerText="#{bundle.Parametri}"
                        id="tableColumn12" sort="parameter">
                        <webuijsf:staticText id="staticText19"
                            text="#{richiesta.value.parameter}" />
                    </webuijsf:tableColumn>

                    <webuijsf:tableColumn headerText="#{bundle.DataUltimaModifica}"
                        id="tableColumn200" sort="settTime">
                        <webuijsf:staticText id="staticText200"
                            converter="#{guiRisultati_02.sqlDateConverter2}"
                            text="#{richiesta.value.settTime}" />
                    </webuijsf:tableColumn>

                    <!-- colonne di modifica -->
                    <webuijsf:tableColumn id="tableColumn2" styleClass="buttonColumn">
                        <webuijsf:button actionExpression="#{guiRisultati_02.button4_action}"
                            id="button5" text="#{bundle.BottoneDettagli}">
                            <f:setPropertyActionListener
                                target="#{GUISessionBeanDisplayRett.uidBatchrequest}"
                                value="#{richiesta.value.uidbatchrequest}" />
                        </webuijsf:button>
                    </webuijsf:tableColumn>
                    <!-- parte colonna con eliminazione -->

                </webuijsf:tableRowGroup>
            </webuijsf:table>

        </webuijsf:form> 

        </webuijsf:body>
    </webuijsf:html>
</webuijsf:page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:59:26.503

I have often observed that hibernate doesn't invoke your entity's `getter` while accessing **value** for a particular **field**.

For example, if `status` is a field, and someone tries to call `getStatus()`, hibernate doesn't invoke your entity's `getStatus()` method.

So it would be better to declare a `transient` field (not mapped to a column) called `longStatus` (say) in your entity class and have a `getter` for it like below.

```
private transient longStatus;   

public String getLongStatus() {
  return FactoryStatusValue.getValue(this.status);
} 
```

You may need to modify your jsp to access the `entity.longStatus` instead of `entity.status.`

# php - 剑道网格中的自定义过滤器在使用 serevr 侧过滤时传递空值

> ID：16011886
> 
> 赞同：0
> 
> 时间：2013-04-15T09:34:11.330
> 
> 标签：php, kendo-ui, kendo-grid

我正在使用剑道网格服务器端过滤。所有列都工作正常，我有一个名为购买日期的列。我在这里使用了使用日期选择器的自定义过滤，如下所示。但是在过滤 datePicker 的值时不会传递到服务器端..请建议

```
field: "purchase_date",
                              width: "120px",
                              title: "Purchase Date",
                              template: '#= kendo.toString(purchase_date, "MM-dd-yyyy") #',
                              filterable:
                              {
                                  ui: function (element) {
                                      element.kendoDatePicker(); // initialize a Kendo UI DateTimePicker
                                  },
                                  extra: false,
                                  operators: {
                                      date: {
                                          eq: "Equals to",
                                          lt: "Less than",
                                          gt: "Greater than"
                                      }
                                  }

                              } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T10:37:43.850

似乎**日期字段**并不总是以可理解的格式正确发送到服务器。

例如一个日期过滤器被发送到服务器： take=5&skip=0&page=1&pageSize=5&filter[logic]=and&filter[filters][0][field]=HireDate&filter[filters][0][operator]=eq&filter[filters ][0][值]= **2013 年 11 月 12 日星期二 00:00:00 UTC+0100**

为了解决这个问题，我使用添加自定义映射代码将所有日期字段的值更改为服务器可以理解的格式。我为此使用了[parameterMap](http://docs.kendoui.com/api/framework/datasource#configuration-transport.parameterMap)。

```
parameterMap: function (options) {
    if (options.filter) {
       KendoGrid_FixFilter(dataSource, options.filter);
    }
    return options;
} 
```

自定义映射 javascript 函数 KendoGrid_FixFilter 定义为：

```
// kendoDataSource = kendo.data.DataSource
// filter = kendo filter
function KendoGrid_FixFilter(kendoDataSource, kendoFilter, depth) {
    if ((!kendoDataSource) || (!kendoFilter)) return;

    if (!depth) depth = 0;
    // console.log(depth + " - FixDatesInFilter:" + JSON.stringify(kendoFilter));

    $.each(kendoFilter.filters, function (idx, filter) {
        //console.log("filter = " + idx + " = " + JSON.stringify(filter));

        if (filter.hasOwnProperty("filters")) {
            depth++;
            KendoGrid_FixFilter(kendoDataSource, filter, depth)
        }
        else {
            $.each(kendoDataSource.schema.model.fields, function (propertyName, propertyValue) {
                if (filter.field == propertyName && propertyValue.type == 'date') {
                    filter.value = kendo.toString(filter.value, _DefaultDateFormat); // "MM/dd/yyyy"
                    // console.log("changed = " + filter.value);
                }
            });
        }
    });
} 
```

有关正在运行的演示，请参见[此处](http://kendogridbinderex.apphb.com/Employee)。

# ios - Google Maps SDK v1.1.2 for iOS 演示不起作用？

> ID：16011893
> 
> 赞同：0
> 
> 时间：2013-04-15T09:34:45.177
> 
> 标签：ios, maps, demo, google-maps-sdk-ios

我正在使用适用于 iOS 的 Google Maps SDK 的当前版本 1.1.2。1.我添加了apikey。2.编译成功，但无法运行。我什么都看不到。 [http://i.stack.imgur.com/iyIHs.jpg](http://i.stack.imgur.com/iyIHs.jpg)

有谁实现了它的工作？ [http://lwxshow.com/google-maps-sdk-v1-1-2-for-ios-demo-doesnt-work](http://lwxshow.com/google-maps-sdk-v1-1-2-for-ios-demo-doesnt-work)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:45:22.890

在我的情况下它工作顺利，只需要仔细遵循“入门”说明。您是否将所有必需的框架添加到构建阶段？见这里：[https ://developers.google.com/maps/documentation/ios/start#adding_the_google_maps_sdk_for_ios_to_your_project](https://developers.google.com/maps/documentation/ios/start#adding_the_google_maps_sdk_for_ios_to_your_project)

您正在运行什么模拟器/iOS SDK 版本？您需要 iOS SDK 6.0 或更高版本进行开发。

# iphone - 没有互联网连接时无法计算滚动视图的高度

> ID：16011894
> 
> 赞同：0
> 
> 时间：2013-04-15T09:34:45.637
> 
> 标签：iphone, ios, objective-c, core-data, uiscrollview

我有一个动态高度的滚动视图。高度取决于我从核心数据库返回的图像和文本。我有以下。

在我的`ViewDidLoad`我调用我的方法`getNewsItem`。

这是该方法的外观。

```
-(void)getNewsItem{
    NSManagedObjectContext *context = [RKManagedObjectStore defaultStore].persistentStoreManagedObjectContext;
    NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"News"];
    NSLog(@"news ID IN METHOD %d",_newsId);
    NSPredicate *predicate = [NSPredicate predicateWithFormat:
                              @"new_id = %d",_newsId];
    [fetchRequest setPredicate:predicate];
    NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"new_id" ascending:YES];
    fetchRequest.sortDescriptors = @[descriptor];
    NSArray *matches = [context executeFetchRequest:fetchRequest error:nil];
    newsItem = [matches objectAtIndex:0];

    lblTitle.text = newsItem.pnt_new_title;
    lblTitle.font = [UIFont fontWithName:@"ShadowsIntoLightTwo-Regular" size:16.0];
    lblTitle.textColor = [UIColor whiteColor];

    NSString *datetext = [newsItem.new_date substringWithRange:NSMakeRange(0, 11)];
    lblDate.text = datetext;
    lblDate.font = [UIFont fontWithName:@"TitilliumWeb-Regular" size:15.0];

    NSString *imgUrl = @"";
    imgUrl = [NSString stringWithFormat:@"http://mosaqua.appmax.be/%@",newsItem.new_imgurlbig];
    NSData *imgData = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:imgUrl]];
    UIImage *image = [UIImage imageWithData:imgData];
    self.img_Picture.image = [UIImage imageWithData:imgData];

    float ratioImage = image.size.width/image.size.height;
    float ratioPlaceholder = 320/206;
    float width;
    float heigth;
    float x;
    if(ratioImage < ratioPlaceholder){
         width = 206 * ratioImage;
        heigth = 206;
    }else{
        width = 320;
        heigth = 320/ratioImage;
    }
    if (heigth < self.view.bounds.size.width){
        x = (self.view.bounds.size.width - width) / 2;
    }else{
         x = 0;
    }
    NSLog(@"x is %f",x);
    if(heigth < 206){
        self.img_titlback.frame= CGRectMake(-4, heigth-8, self.view.bounds.size.width+5, 45);
        self.lblTitle.frame = CGRectMake(40, heigth-8, self.view.bounds.size.width, 40);
        self.btnBack.frame = CGRectMake(5, heigth, 67, 28);
        self.lblDate.frame = CGRectMake(7, heigth+30, self.view.bounds.size.width, 45);
           [self updateScrollView:newsItem.pnt_new_description andHeight:heigth+60];
    }else{
        [self updateScrollView:newsItem.pnt_new_description andHeight:300];

    }
    self.img_Picture.frame = CGRectMake(x, 0, width, heigth);

} 
```

网页浏览方式

```
-(void)updateScrollView:(NSString *)text andHeight:(float)height{

        NSLog(@"till here in scrollview");
        UIWebView *webView = [[UIWebView alloc]initWithFrame:CGRectMake(10, height,self.view.bounds.size.width-30, 20)];
        [[webView scrollView] setBounces: NO];
        webView.delegate = self;
        [scrollView addSubview:webView];
        [self setWebDescription:webView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:43:44.973

那是因为您的计算取决于从 Internet 加载的图像：

```
NSData *imgData = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:imgUrl]]; 
```

您应该异步加载图像，并在没有互联网连接或图像仍在加载时提供默认大小。

# jquery - 如何选择列表框中的所有选项

> ID：16011895
> 
> 赞同：0
> 
> 时间：2013-04-15T09:34:47.607
> 
> 标签：jquery

我有以下代码

```
<select id="first" size="5" multiple="multiple">
    <option id="all" value="0">Select All</option>
    <option value="1">Have</option>
    <option value="2">a</option>
    <option value="3">Great</option>
    <option value="4">day</option>
</select> 
```

单击`Select all`列表框中的所有选项时必须选择。请帮助我更正以下代码

```
$("#first").find("option").attr("selected", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:38:25.907

您需要[change()](http://api.jquery.com/change/)事件来检查是否选择了全选。

**[现场演示](http://jsfiddle.net/rajaadil/NEenn/1/)**

```
$('#first').change(function () {
    if ($(this).val() == "0")
       $("option", this).attr("selected", true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:39:33.377

就像这样你可以做到

```
$('#first').click( function() {
   if($(this).val() == "0")
    $(this).prop('selected', 'selected');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:44:39.617

这是另一个解决方案

```
$("#first").change(function () {
      $("#first option").attr("selected","selected");
}); 
```

# java - 将记录插入数据库时 出现 java 堆空间错误？

> ID：16011897
> 
> 赞同：2
> 
> 时间：2013-04-15T09:35:10.317
> 
> 标签：java, oracle, heap-memory

我收到 java 堆空间错误，但在尝试将记录插入数据库时​​。我不确定 oracle 为何能够消耗堆以及为什么消耗这么多。此行发生错误：

```
 Connection con       = null;
    PreparedStatement ps = null;
    ResultSet rs         = null;
    String sqlString     = null;
    DaoUtility dUtil     = DaoUtility.getInstance();

    try
    {
      con = dUtil.getConnection();
      . . .
      dUtil.executeUpdate(ps); 
```

这是日志：

> java.lang.OutOfMemoryError: java.lang.reflect.Array.newArray(Native Method) at java.lang.reflect.Array.newInstance(Array.java:52) at oracle.jdbc.driver.BufferCache.get 的 Java 堆空间(BufferCache.java:226) 在 oracle.jdbc.driver.PhysicalConnection.getCharBuffer(PhysicalConnection.java:7643) 在 oracle.jdbc.driver.OraclePreparedStatement.setupBindBuffers(OraclePreparedStatement.java:2949) 在 oracle.jdbc.driver.OraclePreparedStatement。 processCompletedBindRow(OraclePreparedStatement.java:2355) 在 oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3571) 在 oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3657) 在 oracle.jdbc.driver.OraclePreparedStatementWrapper .在 weblogic.jdbc.wrapper.PreparedStatement.executeUpdate（PreparedStatement.java:172）处执行更新（OraclePreparedStatementWrapper.java:1350）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:39:36.793

Oracle JDBC 驱动程序因内存消耗而臭名昭著。请阅读您可以使用的[配置参数](http://dev-answers.blogspot.com/2012/07/managing-oracle-jdbc-memory-usage.html)来控制其内存消耗。特别要注意`oracle.jdbc.maxCachedBufferSize`你的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T12:56:13.103

通常，当 Java 堆中没有足够的空间来分配对象时会引发此错误。在这种情况下，垃圾收集器无法腾出空间来容纳新对象，并且无法进一步扩展堆。此外，当本机内存不足以支持 Java 类的加载时，可能会引发此错误。在极少数情况下，当花费过多时间进行垃圾收集并且释放的内存很少时，可能会抛出 java.lang.OutOfMemoryError。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:32:08.273

您还需要检查 JDBC 和您的应用程序的 JDK 版本。有时两者之间的不匹配也会导致这种错误。

您也可以尝试将记录插入到另一个（简单）表中。这是为了确认问题在于插入特定表（由于更多的行或数据量）。

# c# - DTO 与 WCF 层中的业务对象

> ID：16011898
> 
> 赞同：2
> 
> 时间：2013-04-15T09:35:10.673
> 
> 标签：c#, asp.net, wcf, rest

我们的应用程序中有两个项目：

1.  Web UI 项目（aspx 页面）。
2.  WCF 项目。

这两个部分将进一步调用相同的 BL 和 DAL 层。这是架构：

**网络项目**：

![在此处输入图像描述](https://i.stack.imgur.com/45ZeX.png)

**WCF 项目（将使用 REST）：**

![在此处输入图像描述](https://i.stack.imgur.com/OtFhB.png)

上面提到的业务对象和 DTO 示例：

```
public class User
{
    public int UserID { get; set; }
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class UserDTO
{
    public int UserID { get; set; }
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

是否值得为 WCF REST 层提供一个单独的数据传输对象 UserDTO.cs？我们已经将 User.cs 作为 Web 项目、BL 和 DAL 使用的业务对象。此外，在我们的 WCF REST 层中，我们仅将 DTO 用于输入婴儿车：

```
 public MyResponse CreateUser(User user)
        { 
```

通过这种方法，我们通过一些映射器将 DTO 转换为业务对象（即 UserDTO 到 User.cs 对象），并将其传递给仅接受业务对象而不接受 DTO 的 BL 层。即，从 WCF 将业务对象传递给 BL 和 DAL 的角度来看，它的行为方式与 UI 将业务对象传递给 BL 和 DAL 层的方式完全相同。

**使用 2 个单独的数据传输对象有什么实际优势**吗？我问过这个问题是因为 IMO 这将是多余的，我们应该使用一个数据传输对象，即 Web 项目和 WCF 项目的业务对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:53:30.720

对我来说，是的，这样做总是值得的，但**前提**是您将对象用于 AJAX 调用。

在这种情况下，它会自成一体：

```
public class User
{
    public int UserID { get; set; }
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class UserDTO
{ 
    // Hide the UserID
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

您是否真的希望用户能够看到 AJAX 响应并获得用户 ID？可能不是。这就是我们使用单独的 DTO 的原因。它还确保您只使用轻量级对象，而不是使用完整的、可能很重的对象在客户端和服务器之间进行数据传输。

当然，你也可以这样做：

```
var query = GetYourUsers();

return query.Select(a => new { a.UserName, a.FirstName, a.LastName }); 
```

哪个更轻量级，那么您可以使用 User 对象**将**数据从客户端发送到服务器端，并使用诸如[Value Injector](http://valueinjecter.codeplex.com/documentation)之类的工具将客户端发送的值注入服务器上的完整对象。

# java - 在jsf中将mac地址从客户端pc发送到服务器pc

> ID：16011900
> 
> 赞同：0
> 
> 时间：2013-04-15T09:35:12.420
> 
> 标签：java, jsf

首先我像这样从pc客户端获取mac地址

```
public void getterMacAddress(){
      InetAddress ip;
    try {

        ip = InetAddress.getLocalHost();
        System.out.println("Current IP address : " + ip.getHostAddress());

        NetworkInterface network = NetworkInterface.getByInetAddress(ip);

        byte[] mac = network.getHardwareAddress();

        System.out.print("Current MAC address : ");

        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < mac.length; i++) {
            sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));        
        }
        System.out.println(sb.toString());
                macAddress = sb.toString();

    } catch (UnknownHostException e) {

        e.printStackTrace();

    } catch (SocketException e){

        e.printStackTrace();

    }
    } 
```

我成功获得了mac地址，但是如何将该mac地址发送到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T22:37:06.567

您可以将字符串作为 URL 参数传递给服务器（JSF）

我的服务器：端口/myproject/innerpage/mac.jsf?mac=5C-AC-4C-75-44-4A

```
public class Bean {

@ManagedProperty(value="#{param.mac}")
private String mac;

@PostConstruct
public void init() {
    System.out.println(mac); // 5C-AC-4C-75-44-4A
}
// ...
} 
```

还要看这个问题：[URL jsf2 中的参数](https://stackoverflow.com/questions/3355611/parameter-in-url-jsf2)

我不建议为此目的使用 JSF。Servlet 或 REST web 服务 - 是一种更好的方式。

# c# - 我在自定义 BoundField 中动态创建的文本框上的 TextChanged 事件永远不会触发？

> ID：16011901
> 
> 赞同：1
> 
> 时间：2013-04-15T09:35:26.553
> 
> 标签：c#, asp.net, events, boundfield

我正在尝试`BoundField`为我的 custom 制作一个自定义（列）`GridView`。我添加了文本框来`FooterRow`管理列的过滤。它显示得很好，但`TextChanged`从未引发该事件。我想这是因为在每次回发时都会重新创建文本框，而不是持久化。

这是我的代码：

```
public class Column : BoundField
{
    public override void InitializeCell(DataControlFieldCell cell, DataControlCellType cellType, DataControlRowState rowState, int rowIndex)
    {
        base.InitializeCell(cell, cellType, rowState, rowIndex);
        if (cellType == DataControlCellType.Footer)
        {
            TextBox txtFilter = new TextBox();
            txtFilter.ID = Guid.NewGuid().ToString();
            txtFilter.Text = "";
            txtFilter.AutoPostBack = true;
            txtFilter.TextChanged += new EventHandler(txtFilter_TextChanged);
            cell.Controls.Add(txtFilter);
        }
    }

    protected void txtFilter_TextChanged(object sender, EventArgs e)
    {
        // Never get here
    }
} 
```

我尝试了一个复选框，它起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-03T17:39:23.390

我在 WPF 应用程序中遇到了同样的问题。像这样对我来说简直就是工作，

```
 TextBox txtBx = new TextBox();
 txtBx.Width = 300;
 txtBx.TextChanged += txtBox_TextChanged; 
```

它呼唤，

```
private void txtBox_TextChanged(object sender, EventArgs e)
    {
        errorTxt.Text = "Its working";
    } 
```

“errorTxt”是一个预定义的文本块。希望这会帮助一些人..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:15:52.217

**解决方案：**

我终于找到了问题，但我不明白！问题出在使用 Guid 生成的 ID 属性上。只是删除它解决了我的问题。

```
public class Column : BoundField
{
    public override void InitializeCell(DataControlFieldCell cell, DataControlCellType cellType, DataControlRowState rowState, int rowIndex)
    {
        base.InitializeCell(cell, cellType, rowState, rowIndex);
        if (cellType == DataControlCellType.Footer)
        {
            TextBox txtFilter = new TextBox();
            // Removing this worked
            //txtFilter.ID = Guid.NewGuid().ToString(); 
            txtFilter.Text = "";
            txtFilter.AutoPostBack = true;
            txtFilter.TextChanged += new EventHandler(txtFilter_TextChanged);
            cell.Controls.Add(txtFilter);
        }
    }

    protected void txtFilter_TextChanged(object sender, EventArgs e)
    {
        // Never get here
    }
} 
```

# go - 如何将 MongoDB 数据库传递给 GO 例程？

> ID：16011902
> 
> 赞同：1
> 
> 时间：2013-04-15T09:35:27.303
> 
> 标签：go, goroutine, mgo

我是 Go 新手，我正在尝试编写一个简单的程序，该程序迭代 MongoDB 数据库中的所有用户，并使用“mgo”包为每个用户迭代他的所有帖子。

```
package main

import (
    "fmt"
    "labix.org/v2/mgo"
    "labix.org/v2/mgo/bson"
)

type User struct {
    Id string
    Email string
}

type Post struct {
    Id string
    Description string
}

func handleUser(db *mgo.Database, user *User) {
    fmt.Println("ID: ", user.Id, " EMAIL: ", user.Email)

    result := Post{}

    iter := db.C("posts").Find(bson.M{"user_id": user.Id}).Iter()

    for iter.Next(&result) {
        fmt.Println("POST ID: ", result.Id, " POST DESCRIPTION: ", result.Description)
    }
}

func main() {
    session, err := mgo.Dial("localhost")

    if err != nil {
        panic(err)
    }

    defer session.Close()

    db := session.DB("mydb")

    result := User{}

    iter := db.C("users").Find(nil).Iter()
    for iter.Next(&result) {
        handleUser(db, &result)
    }   
} 
```

这工作得很好，但是如果我尝试将调用更改为`handleUser(db, &result)`handleUser`go handleUser(db, &result)`中的第二个查询，则不会执行任何操作。

我怀疑会话已经关闭，因为“主要”已经完成，对吗？如果是这样，处理这种情况的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T09:42:03.227

你是对的[specs](http://golang.org/ref/spec#Program_execution)，他们定义当 main 返回时，所有的 goroutine 都被杀死：

> 当 main 函数返回时，程序退出。它不会等待其他（非主）goroutine 完成。

有两种选择。

*   在 main 结束时与你的 goroutine 同步。可以使用“完成”的 chanel 或[`sync.WaitGroup`](http://golang.org/pkg/sync/#WaitGroup).

*   在适当的情况下，可以使用阻塞的空 select 语句：

    `select{} // Non busy block forever`

# reporting-services - SSRS 自定义可见性参数 - 多选错误

> ID：16011904
> 
> 赞同：2
> 
> 时间：2013-04-15T09:35:29.283
> 
> 标签：reporting-services, ssrs-2008, parameter-passing

我有一个带有基本表格设置的 RS 报告，如果选择了自定义指定值，我已将其设置为隐藏特定列。参数设置如下：

```
Label      | Value
Select All |   1
Select  1  |   2
Select  2  |   3
Select  3  |   4 
```

然后在 tablix 列的可见性中将其设置为：

```
 =Parameters!Client.Value <> 1 
```

但是，理想情况下，我希望将其设置为选择多个参数值，但是我得到：

> 表“tablix”的隐藏表达式包含错误：未为 Object() 类型和 integer 类型定义运算符 <>。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:39:18.090

您需要将**Client**设置为多值参数，以允许选择多个值。

问题是多值参数是基于数组的，因此您不能像对待单值参数一样对待它们。要获得选定的值，您需要使用该`Join`函数，该函数返回选定值的字符串。

获得此列表后，您可以检查返回的字符串中的某些值，并将每列的可见性基于其值是否已被选中。因此，对于每一列的可见性，请使用以下内容：

```
=IIf(InStr(Join(Parameters!Client.Value, ","), "1") > 0, false, true) 
```

即如果值*1*在选定值的字符串中，则不隐藏，否则隐藏。

我创建了一个简单的报告来测试这一点。一些例子：

![在此处输入图像描述](https://i.stack.imgur.com/U0Yvz.png)

![在此处输入图像描述](https://i.stack.imgur.com/Gm6T5.png)

![在此处输入图像描述](https://i.stack.imgur.com/5i40p.png)

所以这应该符合你的要求。

移动到多值参数还意味着您可以从可用值中删除“**全**选”选项，因为默认情况下始终可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:47:27.097

您需要将 Parameter 值转换为 Int 才能进行比较。

做这个 ：

```
= CInt(Parameters!Client.Value) <> 1 
```

# python - Python - 安装 Scitools（std 似乎缺失）

> ID：16011905
> 
> 赞同：0
> 
> 时间：2013-04-15T09:35:31.220
> 
> 标签：python

我已经从 sourceforge (mac osx 10.7) 安装了适用于 Python 2.7 的 SciTools 包。当我像这样导入它时，它不会出错。

```
import scitools 
```

但是当我尝试像这样导入时（就像在课堂上展示的那样）：

```
from scitools.std import * 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    from scitools.std import *
ImportError: No module named std 
```

任何人都知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:59:38.603

Your `scitools` version is *too old*. The `scitools.std` module was not introduced until version 0.6.

You have version 0.3 instead, where it is still called `scitools.all`. From the [ChangeLog](https://code.google.com/p/scitools/source/browse/ChangeLog):

> Version 0.6:
> 
> [...]
> 
> *   The `all` module is renamed to `std`, i.e.,
>     
>     
>     
>     ```
>     from scitools.all import * 
>     ```
>     
>     
>     
>     should now read
>     
>     
>     
>     ```
>     from scitools.std import * 
>     ```
>     
>     
>     
>     The old name "`all`" is still available as a synonym for `std`, implying that old programs will work. (The "`all`" name is misleading as only a small portion of `scitools` is actually imported.)

You may want to upgrade your `scitools` installation to 0.9, the most recent release.

# c# - 实体类型 [名称] 不是当前上下文模型的一部分

> ID：16011910
> 
> 赞同：8
> 
> 时间：2013-04-15T09:35:40.837
> 
> 标签：c#, entity-framework-5, poco, database-first

我使用 EF 创建了一个模型，并使用 DbContext 5.X 生成器生成了它的上下文。现在我重命名了我的一个实体的类名。现在，当我运行我的代码时，我得到“实体类型 Student2 不是当前上下文模型的一部分”。错误。

```
var context = new MyEntities(connectionString);
foreach(var student in context.Students)
{
    Console.WriteLine(class.Name.ToString());
} 
```

在我的数据上下文中。

```
public partial class MyEntities : DbContext
{
    public MyEntities()
        : base("name=MyEntities")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    // public DbSet<Student> Students { get; set; } -> Origional
    public DbSet<Student2> Student { get; set; } // I renamed Student to Student2
} 
```

如何解决这个问题？由于一些冲突，我需要重命名我的班级。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-17T12:29:18.860

当我在连接字符串中有错误的元数据时，我遇到了同样的问题。尝试在 app.config 中重新创建连接字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:50:10.623

利用`Add-Migration`

这是示例：

```
Add-Migration "Muster" -ConnectionString "Data Source=.;" -ConnectionProviderName System.Data.SqlClient 
```

和更新数据库，像这样：

```
Update-Database -ConnectionString "Data Source=.;" -ConnectionProviderName System.Data.SqlClient 
```

在`Visual Studio`你可以使用`Package Manager Console`它。作为默认项目，您应该选择您的`Entity Framework`项目 - 如果您有很多项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T18:20:04.397

许多教程要求制作所有这些不需要的额外类。基本上，要使实体框架工作，您需要做的就是创建模型，然后在控制器中创建对象。

示例模型：myEntity.edmx 示例控制器：

```
public class HomeController : Controller
    {
        myEntity db = new myEntity();

        public ActionResult Index()
        {
            return View(db.myTable.ToList());
        }
} 
```

其他所有内容都在实体模型中，因此当错误读取：“myEntityContext”不是模型的一部分”时，这是真的，因为我根据教程创建了一个名为“myEntityContext”的额外类。

当您尝试使用您创建的上下文创建强视图时，它会爆炸，因为它试图关联模型中不存在的类。因此，通过删除所有额外的 DAL 和模型上下文，使用显示在强视图菜单中的 Entity.context 创建一个新视图，一切都应该正常工作。

我遇到了同样的问题并[发布](https://stackoverflow.com/questions/19695545/the-entity-type-xxx-is-not-part-of-the-model-for-the-current-context)了我为解决它所做的事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T04:57:56.450

那么这里是解决方案。打开 Model.edmx 文件的 UI，将 Student 实体名称编辑为 Student2。这将生成新的文件和上下文，其中 Student 将被 Student2 替换。

# asp.net - 将表单数据发布到外部 url

> ID：16011912
> 
> 赞同：1
> 
> 时间：2013-04-15T09:35:43.133
> 
> 标签：asp.net, c#-4.0, asp.net-mvc-4

将带有数据的表单从控制器发布到外部 url 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:29:29.873

您可以使用 C# 的 HttpWebClient 连接到外部资源，然后发布数据。请参考这里：http: [//msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)。我希望以前的 google/bing 会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T13:37:41.453

借助示例让我们理解。首先创建对象，`HttpClient`然后分配基地址 let ( [https://stackoverflow.com/questions](https://stackoverflow.com/questions) ) 和要发送的数据以及数据传输的数据类型。

```
HttpClient client = new HttpClient();

client.BaseAddress = new Uri("https://stackoverflow.com/");//Assign Only Base Addresss

client.DefaultRequestHeaders.Accept.Clear();

client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

StringContent content = new StringContent(JsonConvert.SerializeObject(objDataYouWantTosend), Encoding.UTF8, "application/json");

HttpResponseMessage response = await client.PostAsync("questions", content);

var data = response.Content.ReadAsAsync<"ClassNameInWhichresponseIsComming">(); 
```

# ruby-on-rails - 带语言环境的路由路径

> ID：16011916
> 
> 赞同：1
> 
> 时间：2013-04-15T09:35:45.800
> 
> 标签：ruby-on-rails, internationalization

这是在我的路线文件中：

```
scope "(:locale)", locale: /en|es/ do
  get "about" => "static_pages#about"
end 
```

我已经知道我可以使用 about_path 来获取“about”路由的路径，但我想知道是否有一种方法可以以这种格式返回“about”路由和当前语言环境：

```
/en/about 
```

# sql - Rails 传递多个参数

> ID：16011917
> 
> 赞同：0
> 
> 时间：2013-04-15T09:35:50.117
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

尊敬的人...

很多天以来我都有一个严重的设计问题......请帮忙......

![在此处输入图像描述](https://i.stack.imgur.com/IkZHp.png)

在输入你可以从 URL 中获取的医院 ID 为 10（使用 ransack）后，我从上一个屏幕进入这个阶段......在这个阶段，当我点击“为员工添加绩效详细信息”时，我只将员工 ID 传递给绩效创作画面...

![在此处输入图像描述](https://i.stack.imgur.com/ChBKU.png)

我如何从前一个屏幕中捕获 hospital_id 并存储在我的表演创建屏幕中？...（它有野战医院 ID）...。

我可以以某种方式使用这个原始 sql 查询直接存储医院 ID 吗？...

`employee_sanction_working` 从哪里 选择医院 ID`employee_id`

请帮忙...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:33:30.077

有几种方法可以解决您的问题：

1) 你可以像 Rubyman 和 Santhosh K 建议的那样在参数中传递 hospital_id 或者

2）您可以在控制器中创建一个类变量，您可以在您的 erb 或 haml 视图中使用它。

例如：

```
in controller:

def new 
    @hospital_id = params[:hospital_id] #this you can use in your view
end
in view
Hospital ID is <%= @hospital_id %> 
```

请参阅[此](http://api.rubyonrails.org/classes/ActionView/Base.html)以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:42:51.453

您可以将 hospital_id 作为参数传递给“为员工添加绩效详细信息”链接。

# tomcat7 - 安装 Alfresco 后 Tomcat7 无法启动

> ID：16011919
> 
> 赞同：0
> 
> 时间：2013-04-15T09:35:58.743
> 
> 标签：tomcat7, alfresco

我的tomcat7有问题。

我只是将它安装在 Kubuntu 11.04 上，然后我下载 Alfresco community 4.0.d 并完成本指南所说的所有我需要做的事情。[http://paultiseo.wordpress.com/2012/06/27/installing-alfresco-community-4-on-ubuntu-server-12/](http://paultiseo.wordpress.com/2012/06/27/installing-alfresco-community-4-on-ubuntu-server-12/)

当我安装 tomcat7 时它工作正常，我可以转到 localhost:8080 并且 tomcat 的菜单出现并且工作正常。

但是，当我按照指南执行以下步骤并尝试连接到 localhtost:8080 时，网络不会加载。不要给我任何错误，它只是不断加载，永远不会结束。

此外，当我尝试关闭 tomcat7 时，它给了我一个 java 错误，因为某些东西正在执行中。

我不确定我是否做错了什么，所以我感谢任何建议。如果您需要一些信息，请直接说出来。

谢谢！

信息： **SO：** Kubuntu 11.04 32 **Tomcat：** 7 **Alfresco：**社区 4.0.d

从今天开始的 localhost.log：

```
 abr 15, 2013 9:21:15 AM org.apache.catalina.core.ApplicationContext log
    INFO: ContextListener: contextInitialized()
    abr 15, 2013 9:21:15 AM org.apache.catalina.core.ApplicationContext log
    INFO: SessionListener: contextInitialized()
    abr 15, 2013 9:21:15 AM org.apache.catalina.core.ApplicationContext log
    INFO: ContextListener: attributeAdded('org.apache.jasper.compiler.TldLocationsCache', 'org.apache.jasper.compiler.TldLocationsCache@10da34e') 
```

catalina.log 从今天开始：

```
abr 15, 2013 9:20:54 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:20:55 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:20:55 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:20:55 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:20:55 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:20:55 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
abr 15, 2013 9:20:55 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
abr 15, 2013 9:20:55 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2097 ms
abr 15, 2013 9:20:56 AM org.apache.catalina.core.StandardService startInternal
INFO: Arrancando servicio Catalina
abr 15, 2013 9:20:56 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.39
abr 15, 2013 9:20:56 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Despliegue del archivo /usr/share/tomcat7/webapps/share.war de la aplicaciÃ³n web
abr 15, 2013 9:21:15 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio /usr/share/tomcat7/webapps/host-manager de la aplicaciÃ³n web
abr 15, 2013 9:21:15 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio /usr/share/tomcat7/webapps/docs de la aplicaciÃ³n web
abr 15, 2013 9:21:15 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio /usr/share/tomcat7/webapps/examples de la aplicaciÃ³n web
abr 15, 2013 9:21:15 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio /usr/share/tomcat7/webapps/manager de la aplicaciÃ³n web
abr 15, 2013 9:21:16 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio /usr/share/tomcat7/webapps/ROOT de la aplicaciÃ³n web
abr 15, 2013 9:21:16 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Despliegue del directorio /usr/share/tomcat7/webapps/alfresco de la aplicaciÃ³n web
abr 15, 2013 9:21:27 AM org.apache.catalina.core.StandardContext addApplicationListener
INFO: El escuchador "org.apache.myfaces.webapp.StartupServletContextListener" ya estÃ¡ configurado para este contexto. La definiciÃ³n duplicada ha sido ignorada.
abr 15, 2013 9:31:25 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:31:25 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:31:25 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:31:25 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:31:26 AM org.apache.catalina.core.AprLifecycleListener init
SEVERE: Se encuentra instalada una versiÃ³n incompatible 1.1.20 de la biblioteca nativa APR de Apache Tomcat, mientras que Tomcat necesita la versiÃ³n 1.1.24
abr 15, 2013 9:31:26 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
abr 15, 2013 9:31:26 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
abr 15, 2013 9:31:26 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1489 ms
abr 15, 2013 9:31:26 AM org.apache.catalina.core.StandardService startInternal
INFO: Arrancando servicio Catalina
abr 15, 2013 9:31:26 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.39
abr 15, 2013 9:31:26 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Despliegue del archivo /usr/share/tomcat7/webapps/share.war de la aplicaciÃ³n web
abr 15, 2013 9:31:39 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Despliegue del archivo /usr/share/tomcat7/webapps/alfresco.war de la aplicaciÃ³n web
abr 15, 2013 9:31:47 AM org.apache.catalina.core.StandardContext addApplicationListener
INFO: El escuchador "org.apache.myfaces.webapp.StartupServletContextListener" ya estÃ¡ configurado para este contexto. La definiciÃ³n duplicada ha sido ignorada.
abr 15, 2013 9:32:36 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: PermGen space
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: java.lang.OutOfMemoryError: PermGen space
    at java.lang.StackTraceElement.equals(StackTraceElement.java:204)
    at java.lang.Throwable.printEnclosedStackTrace(Throwable.java:688)
    at java.lang.Throwable.printStackTrace(Throwable.java:666)
    at java.lang.Throwable.printStackTrace(Throwable.java:720)
    at java.util.logging.SimpleFormatter.format(SimpleFormatter.java:157)
    at org.apache.juli.FileHandler.publish(FileHandler.java:200)
    at java.util.logging.Logger.log(Logger.java:565)
    at java.util.logging.Logger.doLog(Logger.java:586)
    at java.util.logging.Logger.logp(Logger.java:786)
    at org.apache.juli.logging.DirectJDKLog.log(DirectJDKLog.java:185)
    at org.apache.juli.logging.DirectJDKLog.error(DirectJDKLog.java:151)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:768)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:477)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1402)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:318)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:402)
    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:347)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1140)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:45:15.373

您需要调整 JAVA_OPTS 并为 JVM PermGen 留出更多内存。对于 Alfresco 4.xa，一般好的值是 256m。

您引用的文章指示使用 JAVA_OPTS="${JAVA_OPTS} -XX:MaxPermSize=512m -Xms128m -Dalfresco.home=/opt/alfresco -Dcom.sun.management.jmxremote"，这取决于您的可用内存和 Xmx 设置——太多了。

如果您按照说明操作，则 JAVA_OPTS 变量未在其他地方正确设置/覆盖。您可以使用 'ps aux | 查看传递给 tomcat 的参数。grep java' 或类似的东西。

Alfresco wiki 参考（我认为自 Alfresco 3.4 以来未更新，但此信息仍然相关）：[http ://wiki.alfresco.com/wiki/JVM_Tuning#Permanent_Generation_.28PermGen.29_Size](http://wiki.alfresco.com/wiki/JVM_Tuning#Permanent_Generation_.28PermGen.29_Size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:41:58.573

请重新启动您的电脑，然后重试。

# android - 更改布局中的按钮

> ID：16011921
> 
> 赞同：-6
> 
> 时间：2013-04-15T09:36:24.667
> 
> 标签：android

我目前正在研究一个`Music Player`. 在布局中我有一个`Play`按钮。当我按下`Play`按钮 音频开始播放。这不是问题。问题是当我按下`Play`按钮时，我想显示一个`pause`按钮而不是`play`按钮。但是如何更改`play`和`pause`按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:38:41.193

```
public void onPlayPress(){
    //start music
    playBtn.setVisibility(View.GONE);
    pauseBtn.setVisibility(View.VISIBLE);
} 
```

因此，您的播放按钮将被隐藏，暂停按钮将可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:39:17.287

试试这个代码。

```
btnPlay.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // check for already playing
            if (mp.isPlaying()) {
                if (mp != null) {
                    mp.pause();
                    // Changing button image to play button
                    btnPlay.setImageResource(R.drawable.play);
                }
            } else {
                // Resume song
                if (mp != null) {
                    mp.start();
                    // Changing button image to pause button
                    btnPlay.setImageResource(R.drawable.puse);
                }
            }

        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T09:42:15.030

在播放按钮的点击事件中，您可以执行类似的操作。

```
playbtn.setBackgroundResource(R.drawable.pauseimage); 
```

你只需要改变按钮的布局。你可以做到这一点。

# c# - 根据框架版本实现接口

> ID：16011922
> 
> 赞同：4
> 
> 时间：2013-04-15T09:36:27.077
> 
> 标签：c#, .net, interface, compilation

我正在编写一个库，如果可能的话，我想要一个类来实现和使用`IReadOnlyList<T>`。但是，该接口仅从框架版本 4.5 开始可用，我不想仅仅因为这个接口而被绑定到该版本。

有没有一种方法可以自动编译两个版本的库，一个用于 4.5（将实现接口，并且可能还有一些其他功能），另一个用于 3.5？

举个例子，我正在寻找类似 MSBuild 配置的东西，上面写着“在两个 [或更多] 版本中编译这个库”，然后为每个版本指定不同的选项，比如定义的符号、框架、引用等。

如果这是可能的，它实际上可以解决我遇到的许多其他类似问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T09:45:55.843

您可以使用编译器指令，例如

```
#if NET45
//specific code for .NET 4.5
#endif 
```

然后创建两个项目，每个版本一个，使用[Project Linker](http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044)维护单个代码库。在 .NET 4.5 项目中，您可以`NET45`在构建时指定变量。这样，`#if`块中的代码将仅用于其中一个版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T09:57:09.210

您可以制作两个版本的项目文件，针对不同的框架版本。在这种情况下，我会将所有项目文件放在现有项目目录中。

在每个项目中，您将定义一个表示框架版本的符号（根据需要），例如`DOTNET45`. 您可以在**Properties - Build - Conditional Compilation Symbols下执行此操作**

然后你可以使用[`#if`指令](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)：

```
class MyClass<T> : IList<T>
#if DOTNET45
    , IReadOnlyList<T>
#endif
{
    // Your usual code

    #if DOTNET45

    // IReadOnlyList implementation

    #endif
} 
```

然而，这可能会变得混乱。因此，或者，您可以使用部分类：

```
partial class MyClass<T>
{
}

#if DOTNET45

partial class MyClass<T> : IReadOnlyList<int>
{
    // IReadOnlyList implementation
}

#endif 
```

显然，部分类也可以在文件中进行划分，因此您可以完全不使用`#if`，只在项目的 .NET 4.5 版本中包含这个部分类文件。

# hadoop - org.apache.hadoop.hbase.client.NoServerForRegionException

> ID：16011927
> 
> 赞同：0
> 
> 时间：2013-04-15T09:36:41.707
> 
> 标签：hadoop, cluster-computing, hbase, hdfs

我正在使用 hbase 处理集群。

一个节点几天前崩溃了。我重新启动了集群；从那时起，尽管我付出了所有努力，但根区域仍在过渡。

> 70236052 -ROOT-,,0.70236052 state=CLOSING, ts=Wed Apr 10 15:06:04 CEST 2013 (417729s ago), server=NODE09...

我尝试过了 ：

*   重启 HBase
*   删除服务并重新安装
*   撤销服务并将主节点安装到另一个节点上
*   安装 2 个不同的 Hbase
*   格式化 HDFS 名称节点
*   从 HDFS 系统中删除 HBase 文件

它仍然可以找到这个过渡区域。

*   我试图访问.META。桌子 ：

    > org.apache.hadoop.hbase.client.NoServerForRegionException：尝试 7 次后无法找到区域

*   我尝试使用命令 /bin/hbase hbck :
    org.apache.hadoop.hbase.client.NoServerForRegionException: Unable to find region for
    after 10 次尝试。

我没有解决这个问题的想法。

有人有什么建议吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:37:20.647

可能是有问题的 regionserver 所在节点上的时间与集群的其余部分不同步。检查 NTP 配置是否正确。

无论如何检查有问题的区域服务器的日志

# java - 在 Ant / Java 任务中可用于自动构建的 Selenium IDE 导出

> ID：16011928
> 
> 赞同：2
> 
> 时间：2013-04-15T09:36:42.177
> 
> 标签：java, selenium, ant

如果我们使用 IDE 导出 selenium 测试用例，它会创建可爱的 Java 代码。

是否可以使用 ant 将这些测试自动生成到 Java 代码中，并将其集成到自动构建中？那可能吗？

或者是否可以从 Ant 任务运行测试套件？

# android - 如何定义该android应用程序在后台？

> ID：16011930
> 
> 赞同：0
> 
> 时间：2013-04-15T09:36:59.007
> 
> 标签：android, android-service

我有一个广播接收器，它启动一个服务，在这个服务中我应该检查我的主应用程序是处于活动状态还是在后台。有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:44:10.193

您可以扩展 Application 类并存储应用程序的当前状态。您需要从每个 Activity 的 onPause() 和 onResume() 方法中更新它。

```
public class MyApplication extends Application {

    public static boolean isAppVisible() {
      return visible;
   }  

    public static void inForeground() {
      visible = true;
    }

    public static void inBackground() {
      visible = false;
    }

    private static boolean visible;
} 
```

在 AndroidManifest.xml 中注册您的应用程序类：

```
<application
    android:name="your.app.package.MyApplication"
    android:icon="@drawable/icon"
    android:label="@string/app_name" > 
```

将 onPause 和 onResume 添加到项目中的每个 Activity（如果您愿意，可以为您的 Activity 创建一个公共超类，但如果您的 Activity 已经从 MapActivity/ListActivity 等扩展，您仍然需要手动编写以下内容） ：

```
@Override
protected void onResume() {
    super.onResume();
    MyApplication.inBackground();
}

@Override
protected void onPause() {
    super.onPause();
    MyApplication.inForeground();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:44:56.327

```
Context ctx = context.getApplicationContext();

ActivityManager am = (ActivityManager) context
        .getSystemService(ACTIVITY_SERVICE);

// get the info from the currently running task
List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);

PackageManager pm = this.getPackageManager();
boolean flag = false;
try {
    /**
     * take fore ground activity name
     */
    ComponentName componentInfo = taskInfo.get(0).topActivity;
    if (printLog) {
        Log.d("Tag", "CURRENT Activity ::"
                + taskInfo.get(0).topActivity.getClassName());
        Log.d("Tag", "Number Of Activities : "
                + taskInfo.get(0).numRunning);
        Log.d("Tag",
                "Componenet Info : " + componentInfo.getPackageName());
        Log.d("Tag",
                "Componenet Info : " + componentInfo.getClassName());
    }
    /**
     * All activities name of a package to compare with fore ground
     * activity. if match found, no notification displayed.
     */
    PackageInfo info = pm.getPackageInfo(
            "com.package_name",
            PackageManager.GET_ACTIVITIES);
    ActivityInfo[] list = info.activities;

    for (int i = 0; i < list.length; i++) {
        Log.d("Tag","Activity : "+list[i].name);

        if (list[i].name.equals(componentInfo.getClassName())) {
            flag = true;
        }
    }

    if(flag)
    {
        //activity is running
    }
} catch (NameNotFoundException e) {
    e.printStackTrace();
} 
```

并`<uses-permission android:name="android.permission.GET_TASKS" />`在清单中获得许可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:45:21.633

考虑使用 onPause() 和 onResume() 实现一个应用程序来跟踪应用程序是前进还是后退。
看看这个[解决方案](https://stackoverflow.com/a/5862048/1503155)。
希望能帮助到你。

# php - 导入数据库表时如何限制csv的第一行

> ID：16011939
> 
> 赞同：0
> 
> 时间：2013-04-15T09:37:20.497
> 
> 标签：php

```
if ($_FILES[csv][size] > 0) { 

    //get the csv file 
    $file = $_FILES[csv][tmp_name]; 
    $handle = fopen($file,"r"); 

    //loop through the csv file and insert into database 
    do { 
        if ($data[0]) { 
            mysql_query("INSERT INTO contacts (contact_first, contact_last, contact_email) VALUES 
                ( 
                    '".addslashes($data[0])."', 
                    '".addslashes($data[1])."', 
                    '".addslashes($data[2])."' 
                ) 
            "); 
        } 
    } while ($data = fgetcsv($handle,1000,",","'")); 
    // 

    //redirect 
    header('Location: import.php?success=1'); die; 

} 

?> 
```

> 在上述导入过程中，csv文件中的第一行也被插入到数据库中，任何人都可以帮助我如何在插入时限制第一行帮助我尽快

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:39:35.007

```
$lineNr = 1;
if ($_FILES[csv][size] > 0) { 

    //get the csv file 
    $file = $_FILES[csv][tmp_name]; 
    $handle = fopen($file,"r"); 

    //loop through the csv file and insert into database 
    do { 
        if ($data[0] && $lineNr!=1) { 
            mysql_query("INSERT INTO contacts (contact_first, contact_last, contact_email) VALUES 
                ( 
                    '".addslashes($data[0])."', 
                    '".addslashes($data[1])."', 
                    '".addslashes($data[2])."' 
                ) 
            "); 
            $lineNr++;
        } 
    } while ($data = fgetcsv($handle,1000,",","'")); 
    // 

    //redirect 
    header('Location: import.php?success=1'); die; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:40:01.783

利用

```
fgetcsv($handle);
if ( $data = fgetcsv($handle,1000,",","'") ) 
```

前

```
do{ ... 
```

并且不要忘记使用以下命令关闭文件：

```
fclose( $handle ); 
```

在重定向之前。

# c# - 如何复制公共属性列表 列出

> ID：16011944
> 
> 赞同：1
> 
> 时间：2013-04-15T09:37:39.013
> 
> 标签：c#, linq, linq-to-entities

如何将列表复制到另一个列表

类 x 和类 y 都有几个共同的属性想要将共同的属性复制到另一个列表，假设 x 到 y

有两个列表一个将一个列表内容复制到另一个，我使用以下语法将列表复制到列表项。

```
List<SomeType2> list1 = new List<SomeType2>();
List<SomeType> list2 = new List<SomeType>();

// This will copy all the items from list 1 to list 2
list1.ForEach(i => list2.Add(i)); 
```

但是我的 list1 与 list2 不同，当它们具有相同类型的上述语法时，它们可以完美地工作。

我的列表不一样，所以我需要使用以下语法进行复制

```
List<Y> y = new List<Y>(x.ConvertAll<Y>(e => { return new Y { Id = e.Id, Name = e.Name }; })); 
```

但是我不想使用静态的“Id = e.Id, Name = e.Name”，需要在几个列表（属性不同）上多次使用这个过程所以我最好写任何常见的东西可以为我做那件事。

如果有任何疑问，请询问，谢谢。任何类型的建议都可以接受

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:39:59.613

考虑使用[AutoMapper](http://stackoverflow.com)，它就是为了做到这一点而设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:40:21.897

如果要映射具有相同名称的属性，则可以使用[Automapper](http://automapper.org/)（可从 NuGet 获得）之类的东西，它会自动为您完成。在应用程序启动的某处添加映射：

```
Mapper.CreateMap<Source, Destination>(); 
```

默认映射将为具有相同名称的属性提供映射。所以，然后简单地映射列表：

```
List<Source> list1 = new List<Source>();
List<Destination> list2 = Mapper.Map<List<Destination>>(list1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T09:44:01.463

你可以使用反射

```
static T2 Copy<T1, T2>(T1 from)
{
    T2 to = Activator.CreateInstance<T2>();
    Type toType = typeof(T2);

    foreach (var p in from.GetType().GetProperties())
    {
        var prop = toType.GetProperty(p.Name);
        if (prop != null)
            prop.SetValue(to, p.GetValue(from,null),null);
    }

    return to;
} 
```

* * *

```
SomeType2 t2 = Copy<SomeType1,SomeType2>(new SomeType1(){/*....*/}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T09:40:26.583

只需使用`.select`

```
List<y> = oldList.select(x=> new y{prop1 = x.prop1}).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T09:40:59.523

如果您有共同的属性，也许它们应该在一个`interface`, 或一个基类中。

# visual-c++ - DLL加载和调用类方法

> ID：16011945
> 
> 赞同：4
> 
> 时间：2013-04-15T09:37:40.823
> 
> 标签：visual-c++, dll

要在 VC++ 中加载 DLL 和调用函数，我们使用 LoadLibrary 和 GetProcAddress ，这需要方法名称的错位。它是否实例化一个类对象然后调用该方法？

如果没有，那么我如何调用类中的方法但实例化类的对象然后调用方法？

加载.h文件，加载类，实例化对象然后在VC++中调用方法的过程是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:59:17.577

CodeProject 上有一个[很好的例子，](http://www.codeproject.com/Articles/9405/Using-classes-exported-from-a-DLL-using-LoadLibrar)它准确地描述了如何做到这一点。

**参考您的评论进行编辑**，如果您阅读了上面的文章，您会发现`GetProcAddress()`它只不过是返回一个函数指针。如果要创建`class`从 DLL 导出的 a 的实例，则必须分配内存并强制系统调用类的构造函数以在此处实例化它。但是，一旦完成，我有点假设您可以使用刚刚创建的对象以正常方式调用类中定义的函数。

# wpf - 如何将两个数据表与关系绑定

> ID：16011951
> 
> 赞同：1
> 
> 时间：2013-04-15T09:38:02.597
> 
> 标签：wpf, data-binding, datatable

我在数据集和关系中有两个数据表

```
DataSet newDataset = new DataSet("dsShop");
DataTable customers = new DataTable("customers");
DataTable orders = new DataTable("orders");
customers.Columns.Add("customerid", typeof(int));
customers.Columns.Add("title", typeof(string));
customers.Columns.Add("phone", typeof(int));
customers.Rows.Add(new object[] { 1, "Mr.Smith", 3442343 });
customers.Rows.Add(new object[] { 2, "Mr.Klein", 3442343 });
orders.Columns.Add("id", typeof(int));
orders.Columns.Add("customerid", typeof(int));
orders.Columns.Add("caption", typeof(string));
orders.Columns.Add("order", typeof(int));
orders.Rows.Add(new object[] { 1,1,"dildo",1 });
orders.Rows.Add(new object[] { 3, 2, "shorts", 1 });
orders.Rows.Add(new object[] { 4, 3, "umbrella", 1 });
newDataset.Tables.Add(customers);
newDataset.Tables.Add(orders);
newDataset.Relations.Add(new DataRelation("order_customerfk", customers.Columns[""customerid""], orders.Columns["customerid"])); 
```

现在我想为“客户”制作编辑窗口。customer.Columns 显示在文本框和 orders.Columns 中。显示在数据网格中。

我做了这样的事情，但 id 不起作用

```
public CustomerEdit(int customerID)
{
    var curCustomer = dsShop.customer.Select("customerid='" + customerID + "'");  
    gCustomer.DataContext = curCustomer.FirstOrDefault(); 
}

<Grid x:Name="gCustomer">
<Grid.RowDefinitions>
    <RowDefinition Height="*"/>
    <RowDefinition Height="*"/>
    <RowDefinition Height="*"/>
</Grid.RowDefinitions>
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="*"/>
    <ColumnDefinition Width="2*"/>
    <ColumnDefinition Width="*"/>
    <ColumnDefinition Width="2*"/>
</Grid.ColumnDefinitions>

<Label Content=""customer id"" Style="{StaticResource g_PropertyLabel}" Grid.Row="0" Grid.Column="0"/>
<TextBox x:Name="tbx"Customerid"" Text="{Binding Path=customerid, Mode=TwoWay}" Style="{StaticResource g_PropertyTextBox}" Grid.Row="0" Grid.Column="1"/>
<Label Content="title" Style="{StaticResource g_PropertyLabel}" Grid.Row="1" Grid.Column="0"/>
<TextBox x:Name="tbxTitle" Text="{Binding Path=title, Mode=TwoWay}" Style="{StaticResource g_PropertyTextBox}" Grid.Row="1" Grid.Column="1"/>
<Label Content="phone" Style="{StaticResource g_PropertyLabel}" Grid.Row="2" Grid.Column="0"/>
<TextBox x:Name="tbxPhone" Text="{Binding Path=phone, Mode=TwoWay}" Style="{StaticResource g_PropertyTextBox}" Grid.Row="2" Grid.Column="1"/>

<DataGrid x:Name="dgOrders" IsSynchronizedWithCurrentItem="True" AutoGenerateColumns="False" ItemsSource="{Binding Path=order_customerfk}"  CanUserAddRows="True" Grid.Row="5" Grid.Column="1" Grid.ColumnSpan="3">
    <DataGrid.Columns>
        <DataGridTextColumn Header="ID" Binding="{Binding Path=id, Mode=TwoWay}" Width="50"/>
        <DataGridTextColumn Header="Caption" Binding="{Binding Path=caption, Mode=TwoWay}" Width="250"/>
        <DataGridTextColumn Header="Order" Binding="{Binding Path=order, Mode=TwoWay}" Width="50"/>
    </DataGrid.Columns>
</DataGrid>
</Grid> 
```

在这个窗口中，我想编辑客户数据和订单数据。客户我可以，但订单不能...

# php - 将从数据库读取的图像上传到亚马逊云

> ID：16011957
> 
> 赞同：0
> 
> 时间：2013-04-15T09:38:28.793
> 
> 标签：php, sql-server, gd, amazon, imagick

我正在尝试遍历以二进制格式存储在 MS SQL 数据库中的一堆图像，并使用 php 将它们移动到亚马逊云上的存储桶中。我尝试了几种方法但没有成功，虽然我能够在内存中获取图像文件的实例，但我无法上传。阅读了以下帖子：[创建图像而不将其存储为本地文件](https://stackoverflow.com/questions/189368/creating-an-image-without-storing-it-as-a-local-file/189410#189410)后，我认为使用 Imagick 库可能会更好，但仍然没有运气。

所以我的问题是，我可以使用未设计的 S3 类或实际的 AWS SDK 从读入 PHP 内存的图像上传到云吗？

这是我到目前为止创建的一些代码，以了解我所采用的方法。我正在使用未设计的 S3 类在云上创建对象。图像表字段上的文件是“图像”类型，包含文件的字符串引用。任何提示，指针，帮助都会很棒。

```
// get the images that have not been moved to the cloud yet
$obj_File = new Images();
$aImages = $obj_File->Select_ImagesNotOnCloud();
unset($obj_File);

// set the start time
$mtime = microtime(); 
$mtime = explode(" ",$mtime); 
$mtime = $mtime[1] + $mtime[0]; 
$starttime = $mtime; 

// upload the image to the cloud
$images_processed = 0;

// get and include the Amazon sdk
require_once('../includes/classes/library/plugins/amazon/undesigned/S3.php');
$s3 = new S3("key", "secretkey");

$sBucket = 'testbucket';

// loop through each image and move to the cloud
foreach($aImages as $aImage) {

    // save the file to the file server with a temporary name
    $oImage = imagecreatefromstring($aImage['FileData']);

    // generate random filename
    $mtime = microtime(); 
    $mtime = explode(" ",$mtime); 
    $mtime = $mtime[1] + $mtime[0]; 
    $sMicrotime = $mtime; 
    $sFilename = date('Ymdhms') . $sMicrotime;
    $sFilename = md5(str_replace(array(' ','.'), '', $sFilename));

    // get the correct file extension
    $sFilename .= '.' . $aImage['FileExtension'];

    // Create Imagick object - the new bit I've just started playing with as per https://stackoverflow.com/questions/189368/creating-an-image-without-storing-it-as-a-local-file/189410#189410
    $im = new Imagick();

    // Convert image into Imagick
    $im->readimageblob($image);

    // Upload an object from a resource (requires size):
    $result = $s3->putObject($s3::inputResource($im->getimageblob(), $im->getSize()), $sBucket, $sFilename, $s3::ACL_PUBLIC_READ);

    // try and put the object into the bucket on the cloud
    $response = $s3->putObject(
        $s3->inputResource($oImage, $aImage['FileSize']),
        $sBucket,
        $sFilename,
        S3::ACL_PUBLIC_READ
    );

    echo("<pre>"); var_dump($response); echo("</pre>"); 

    echo('<br /><br />File_Id = ' . $aImage['File_Id'] .', filename generated = '. $sFilename .'<br />');
    $images_processed++;

    // clear the image object
    unset($oImage);
}

// get the end time and calculate the seconds it took to run the script
$mtime = microtime(); 
$mtime = explode(" ",$mtime); 
$mtime = $mtime[1] + $mtime[0]; 
$endtime = $mtime; 

// get final time taken to run script
$sTotalTime = ($endtime - $starttime);
$aTime = explode('.', $sTotalTime);
$sTotalTime = $aTime[0] .'.'. substr($aTime[1], 0, 4); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:27:49.303

**解决方案**

如果其他人遇到同样的问题，请为此提供一些解决方案。最终无法直接从数据库中获取图像到云端，因此选择获取文件并将其保存到服务器，然后将该文件上传到云端。

我不得不为此使用[Imajick](http://php.net/manual/en/book.imagick.php "伊马吉克")库，代码如下。

```
// path to upload the file to the server prior to uploading to the cloud
$sServerUploadFolder = 'D:\Inetpub\wwwroot\site\\tmp\\';

// set parent folder name on the bucket
$sBucketParentFolder = 'images/';

// get the images that have not been moved to the cloud yet
$aImages = GetImages();     // gets an array of image data including the FileData which is in image format from MS SQL database

// set the start time
$mtime = microtime(); 
$mtime = explode(" ",$mtime); 
$mtime = $mtime[1] + $mtime[0]; 
$starttime = $mtime; 

// upload the image to the cloud
$images_processed = 0;

// set the bucket name to upload to
$sBucket = 'testbucket';

// loop through each image and move to the cloud
foreach($aImages as $aImage) {

    // generate random filename
    $mtime = microtime(); 
    $mtime = explode(" ", $mtime); 
    $mtime = $mtime[1] + $mtime[0]; 
    $sMicrotime = $mtime;
    $sFilenameToSave = date('Ymdhms') . $sMicrotime;
    $sFilenameToSave = md5(str_replace(array(' ','.'), '', $sFilenameToSave));

    // get the correct file extension
    $sFilenameToSave .= '.' . $aImage['FileExtension'];

    // Create Imagick object
    $oImagick = new Imagick();

    // Convert image into Imagick
    $oImagick->readimageblob($aImage['FileData']);

    // write the image to the temporary storage folder on the server
    $oImagick->writeimage($sServerUploadFolder.$sFilenameToSave);

    // upload the file to the cloud
    $response = AWSCreateObject($sBucket, $sFilenameToSave, $sServerUploadFolder.$sFilenameToSave, $sBucketParentFolder);

    // increment the counter for images processed
    $images_processed++;

    // delete the image from the temp storage folder
    unlink($sServerUploadFolder.$sFilenameToSave);

    // clear the image object
    unset($oImagick);
}

// get the end time and calculate the seconds it took to run the script
$mtime = microtime(); 
$mtime = explode(" ",$mtime); 
$mtime = $mtime[1] + $mtime[0]; 
$endtime = $mtime; 

// get final time taken to run script
$sTotalTime = ($endtime - $starttime);
$aTime = explode('.', $sTotalTime);
$sTotalTime = $aTime[0] .'.'. substr($aTime[1], 0, 4); 

// clear objects
unset($obj_File);

// final output
echo "<h1>images processed = $images_processed, time taken: $sTotalTime seconds</h1>";

/**
 * uploads a file to the cloud - should only be used for files that are reasonably small in bucket terms, ie. 10mb or less
 * @param string    $param_str_bucket           name of the bucket to upload to
 * @param string    $param_str_filename         name of the file to be uploaded to the bucket, eg. personphoto.jpg
 * @param string    $param_str_upload_path      full path to the file in the bucket, eg. images/photos/personphoto.jpg
 * @param string    $param_str_parent_folder    optional - name of the parent folder in which to upload the object into
 * @param array     $param_arr_meta             optional - meta data values for the object
 * @param boolean   $param_bln_public_access    optional - declares which acl type to use for the upload, ACL_PUBLIC or ACL_PRIVATE, defaults to ACL_PUBLIC
 */
function AWSCreateObject($param_str_bucket, $param_str_filename, $param_str_upload_path, $param_str_parent_folder = null, $param_arr_meta = null, $param_bln_public_access = 1) {
    // load the Amazon class
    require_once 'sdk-1.5.7/sdk.class.php';

    // Instantiate the Amazon class
    $S3 = new AmazonS3();

    // set the acl type
    $sACL = isset($param_bln_public_access) && $param_bln_public_access == 1 ? AmazonS3::ACL_PUBLIC : AmazonS3::ACL_PRIVATE;

    // check the $param_str_parent_folder value
    if(isset($param_str_parent_folder)) {
        if(substr($param_str_parent_folder, -1) != '/') {
            $param_str_parent_folder .= '/';
        }
    }

    // create the object on the cloud
    $response = $S3->create_object
    (
        $param_str_bucket           // bucket to upload the file to
    ,   $param_str_parent_folder.$param_str_filename        // filename to use for the object to be saved

        // Optional configuration
    ,   array(
            'fileUpload'    => $param_str_upload_path
        ,   'acl'           => $sACL
        ,   'storage'       => AmazonS3::STORAGE_STANDARD

        // Object metadata
        ,   'meta' => $param_arr_meta
        )
    );

    // tidy up
    unset($S3);

    // return result
} 
```

# javascript - 如何正则表达式方括号？

> ID：16011961
> 
> 赞同：0
> 
> 时间：2013-04-15T09:38:36.707
> 
> 标签：javascript, regex

问题：我想获取所有方括号的内容，然后删除它们，但前提是方括号位于字符串的开头。

例如，给定字符串`[foo][asd][dsa] text text text`将返回包含所有三个括号内容 ( `["foo", "asd", "dsa"]`) 的数组，字符串将变为`text text text`.

但如果字符串看起来像这样：`[foo] text [asd][dsa] text text`，它只需要`[foo]`，字符串将变为：`text [asd][dsa] text text`。

我怎样才能使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:18:48.867

您可以继续使用一段时间，首先将其添加到数组中，然后将其删除，然后再次执行所有操作。这将给出：

```
var t1 = "[foo][asd][dsa] text text text";
var rule = /^(?:\[([^\]]*)\])/g;
var arr = new Array();

while(m = rule.exec(t1)){
    arr.push(m[1]);
    t1 = t1.replace(rule, "")
}

alert(arr); // foo,asd,dsa
alert(t1);  //  text text text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:13:34.177

循环检查字符串的开头是否有方括号中的任何内容，获取方括号的内容，并从开头删除全部内容。

```
var haystack = "[foo][asd][dsa] text text text";
var needle = /^\[([^\]]+)\](.*)/;
var result = new Array();

while ( needle.test(haystack) ) {  /* while it starts with something in [] */
    result.push(needle.exec(haystack)[1]);       /* get the contents of [] */
    haystack = haystack.replace(needle, "$2"); /* remove [] from the start */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T09:42:28.873

就像是`var newstring = oldstring.replace(/\[\w{3}]/, "");`

# dynamics-crm-2011 - CRM 2011：自定义工作流活动输出参数不显示

> ID：16011966
> 
> 赞同：0
> 
> 时间：2013-04-15T09:38:51.390
> 
> 标签：dynamics-crm-2011, output, workflow-activity

大家，我有一个问题没有出现在“Local Values”下的“Look for”下右侧的输出参数列表中，我不明白问题或没有出现的原因，因为就输入参数而言好的。

```
protected override void Execute(CodeActivityContext executionContext)
        {
            ITracingService tracingService = executionContext.GetExtension<ITracingService>();

            //Create the context
            IWorkflowContext context = executionContext.GetExtension<IWorkflowContext>();
            IOrganizationServiceFactory serviceFactory = executionContext.GetExtension<IOrganizationServiceFactory>();
            IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

            tracingService.Trace("Creating Account");

            Account entity = new Account();
            entity.Name = AccountName.Get<string>(executionContext);
            Guid entityId = service.Create(entity);

            string a = entity.Name;

            AccountNameTest.Set(executionContext, a);

            tracingService.Trace("Account created with Id {0}", entityId.ToString());

            tracingService.Trace("Create a task for the account");
            Task newTask = new Task();
            newTask.Subject = TaskSubject.Get<string>(executionContext);
            newTask.RegardingObjectId = new EntityReference(Account.EntityLogicalName, entityId);

            Guid taskId = service.Create(newTask);

            tracingService.Trace("Task has been created");

            tracingService.Trace("Retrieve the task using QueryByAttribute");
            QueryByAttribute query = new QueryByAttribute();
            query.Attributes.AddRange(new string[] { "regardingobjectid" });
            query.ColumnSet = new ColumnSet(new string[] { "subject" });
            query.EntityName = Task.EntityLogicalName;
            query.Values.AddRange(new object[] { entityId });

            tracingService.Trace("Executing the Query for entity {0}", query.EntityName);

            //Execute using a request to test the OOB (XRM) message contracts
            RetrieveMultipleRequest request = new RetrieveMultipleRequest();
            request.Query = query;
            Collection<Entity> entityList = ((RetrieveMultipleResponse)service.Execute(request)).EntityCollection.Entities;

            //Execute a request from the CRM message assembly
            tracingService.Trace("Executing a WhoAmIRequest");
            service.Execute(new WhoAmIRequest());

            if (1 != entityList.Count)
            {
                tracingService.Trace("The entity list was too long");
                throw new InvalidPluginExecutionException("Query did not execute correctly");
            }
            else
            {
                tracingService.Trace("Casting the Task from RetrieveMultiple to strong type");
                Task retrievedTask = (Task)entityList[0];

                if (retrievedTask.ActivityId != taskId)
                {
                    throw new InvalidPluginExecutionException("Incorrect task was retrieved");
                }

                tracingService.Trace("Retrieving the entity from IOrganizationService");

                //Retrieve the task using Retrieve
                retrievedTask = (Task)service.Retrieve(Task.EntityLogicalName, retrievedTask.Id, new ColumnSet("subject"));
                if (!string.Equals(newTask.Subject, retrievedTask.Subject, StringComparison.Ordinal))
                {
                    throw new InvalidPluginExecutionException("Task's subject did not get retrieved correctly");
                }

                //Update the task
                retrievedTask.Subject = UpdatedTaskSubject.Get<string>(executionContext);
                service.Update(retrievedTask);
            }
        }
        //
        [Input("Name conta")]
        [Default("testv01")]
        public InArgument<string> AccountName { get; set; }

        [Input("Task")]
        [Default("testv01")]
        public InArgument<string> TaskSubject { get; set; }

        [Input("Update task")]
        [Default("testUPDATED:v01}")]
        public InArgument<string> UpdatedTaskSubject { get; set; }

        [Output("Account ID Guid")]
        [Default("testUPDATED:v01")]
        public OutArgument<string> AccountNameTest { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:17:33.923

好的，问题解决了，只需重新启动 IIS 以假设字段，或通过版本更改。问题在于插件的更新，工作流程也会发生这种情况。根据 CRM 4.0，我意识到这种情况在 CRM 4.0 中不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T08:54:03.160

即使已经回答了这个问题，我还是想分享两个该解决方案不起作用的案例（即使在最新版本的 CRM 中）：

## 情况1

已选择包含德语变音符号 (äöüß) 的输入参数名称。

IIS 重新启动没有帮助。选择没有变音符号的名称为我解决了这个问题。

## 案例2

我们最近还遇到了一个正常的 In-Argument 没有出现的案例，即使在重新启动整个 Maschine CRM 运行之后也是如此。解决方案并不明显：

1.  从 SDK 打开 PluginRegistrationTool
2.  选择包含您的 CWA 的程序集
3.  选择您的 CWA
4.  点击 CWA 属性选项卡中的保存按钮

# javascript - Highcharts 3.0 中的反转/重新创建图表问题

> ID：16011972
> 
> 赞同：0
> 
> 时间：2013-04-15T09:39:06.063
> 
> 标签：javascript, jquery, highcharts

在反转具有多个系列的图表时，我正在处理缺少系列的问题。在我们升级到 Highcharts v3.0 之前，它就可以工作。因此，“动态”反转图表的技术是复制以前的图表选项，更改反转选项，然后使用这些选项创建一个新图表。

```
options = jQuery.extend(true, {}, chart.options);
options.chart.inverted = isInverted;
chart.destroy();
chart = new Highcharts.Chart(options); 
```

这以前“很好”工作。但现在它只保留一个系列。尝试了各种解决方案，复制系列对象，并将每个系列添加到新对象，但没有运气，因为复制的对象使用指针。

有接受者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:20:17.337

我终于找到了原因：chart.options 对象不包含系列，只是系列对象包含它们。该系列已使用 Chart.addSeries() 添加。这个方法不应该也创建一个 options.series 对象吗？无论如何，在数组中推入一个新对象，从 chart.series 中获取设置，瞧！

# c - 问题写入字符串数组

> ID：16011975
> 
> 赞同：0
> 
> 时间：2013-04-15T09:39:16.377
> 
> 标签：c, arrays, string, strcpy

遇到了稍微复杂一点的代码部分的问题，我已经把它剥离了，但错误仍然存​​在。你能粗略地看看这个并指出我的错误吗？

```
//before this, nbnoeud is defined and graphe is a stream that reads from a .txt file

double* xtab = (double *) calloc(nbnoeud, sizeof(double));
double* ytab = (double *) calloc(nbnoeud, sizeof(double));
char** nomtab = (char **) calloc(nbnoeud, 100*sizeof(char));

double x, y; char nom[100]; int numero=0, scancheck;

int a;
for(a=0; a<nbnoeud; a++){
    scancheck = fscanf(graphe, "%d %lf %lf %[^\n]", &numero, &x, &y, nom);
    if(scancheck = 4) printf("Read item %d; \t Scancheck: %d; \t %s - (%lf, %lf). \n", numero, scancheck, nom, x, y);
    xtab[a] = x; 
    ytab[a] = y;
    nomtab[a] = nom; I imagine it's something to do with compatibility of this but to my eyes it all checks out
    /*int b; //this section just illustrates that only the previously accessed elements are being overwritten. See code2.png
    for(b=0; b<=nbnoeud; b++){
        printf("%s \n", nomtab[b]);
    }*/
}

for(a=0; a<nbnoeud; a++){
    printf("Read item %d; \t \t \t %s - (%lf, %lf). \n", a, nomtab[a], xtab[a], ytab[a]);
}

exit(1); 
```

当我`nomtab[0]`通过`[7]`( `nbnoeud = 8`，在这种情况下) 进行打印时，问题就出现了，因为所有值 ( `nomtab[0]`，`nomtab[1]`等) 都等于写入的最终值。奇怪的是，经过检查，只有已经访问过的元素`nomtab`被覆盖。例如，在第一个循环之后，`nomtab[0]= Aaa`其余的等于`null`；在第二个循环之后，`nomtab[0]`&`nomtab[1] = Baa`和其余的相等`null`（见第二张图片）。我想对此有一个愚蠢的简单解决方案，但这使得不知道更加难以忍受。

我也尝试过使用`strcpy`，但它不喜欢那样。

有任何想法吗？

输出：

![输出：](https://i.stack.imgur.com/5HRac.png)

每次循环后检查数组内容的输出

![每次循环后检查数组内容的输出](https://i.stack.imgur.com/cAKLq.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:50:22.447

问题出在你的行内

```
nomtab[a] = nom; 
```

这会将 nomtab[a] 处的指针设置为指向本地数组 nom。但是在每次循环迭代中，您在使用 fscanf 读取文件 Input 时都会覆盖 nom。如果要存储所有字符串，则应复制 nom 并存储它。您可以使用`strdup(nom)`nom 来制作副本。

顺便说一句，您正在调用 fscanf 而不限制要写入 nom 的字符数。这是一个坏主意。如果文件中有一行太长，那么您将在 nom 中出现缓冲区溢出，从而覆盖您的堆栈。

编辑：这条线看起来很可疑：

```
char** nomtab = (char **) calloc(nbnoeud, 100*sizeof(char)); 
```

我想，你想要的是一个具有 100 个字符长度的 nbnoeud 字符串的数组。您应该将其更改为

```
char* nomtab = (char *) calloc(nbnoeud, 100*sizeof(char));
strcpy(nomtab[100*a], nom); 
```

或者

```
char** nomtab = (char **) calloc(nbnoeud, sizeof(char*));
nomtab[a] = strdup(nom); 
```

在第一种情况下，nomtab 是一个包含所有字符串（字符）的大缓冲区，在第二种情况下，nomtab 是一个指向字符串的指针数组，每个字符串都以其他方式分配。在第二种情况下，您需要注意`free()`分配的字符串缓冲区。

# sql - sql语句的哈希值

> ID：16011976
> 
> 赞同：8
> 
> 时间：2013-04-15T09:39:17.133
> 
> 标签：sql, oracle, sql-execution-plan

当我们在 Oracle 中执行任何 sql 语句时，都会为该 sql 语句分配一个哈希值并存储到库缓存中。因此，稍后，如果另一个用户请求相同的查询，那么 Oracle 会找到哈希值并执行相同的执行计划。但是，我对哈希值有一个疑问。我的意思是，**如何生成哈希值？**，我的意思是，Oracle 服务器是否使用一些算法或者他们只是将 sql 字符串转换为一些数值。

因为，我正在阅读**Pro Oracle SQL**书，上面写着，

```
select * from employees where department_id = 60;

SELECT * FROM EMPLOYEES WHERE DEPARTMENT_ID = 60;

select /* a_comment */ * from employees where department_id = 60; 
```

会返回不同的哈希值，因为执行sql语句时，Oracle首先将字符串转换为哈希值。但是，当我尝试这个时，它返回相同的哈希值。

```
SQL> select * from boats where bid=10;

no rows selected

Execution Plan
----------------------------------------------------------
Plan hash value: 2799518614

-------------------------------------------------------------------------------------
| Id  | Operation                   | Name  | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |       |     1 |    16 |     1   (0)| 00:00:01 |
|   1 |  TABLE ACCESS BY INDEX ROWID| BOATS |     1 |    16 |     1   (0)| 00:00:01 |
|*  2 |   INDEX UNIQUE SCAN         | B_PK  |     1 |       |     0   (0)| 00:00:01 |
-------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - access("BID"=10)

SQL> SELECT * FROM BOATS WHERE BID=10;

no rows selected

Execution Plan
----------------------------------------------------------
Plan hash value: 2799518614

-------------------------------------------------------------------------------------
| Id  | Operation                   | Name  | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |       |     1 |    16 |     1   (0)| 00:00:01 |
|   1 |  TABLE ACCESS BY INDEX ROWID| BOATS |     1 |    16 |     1   (0)| 00:00:01 |
|*  2 |   INDEX UNIQUE SCAN         | B_PK  |     1 |       |     0   (0)| 00:00:01 |
-------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - access("BID"=10) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T09:51:48.563

在您的问题文本中，您似乎在描述`sql_id`和/或`hash_value`. 这是 SQL 语句文本的散列值，是 Oracle 用来确定特定 SQL 语句是否已存在于共享池中的内容。但是，您在示例中显示的`plan_hash_value`是为 SQL 语句生成的计划的哈希值。两者之间可能存在多对多的关系。一条 SQL 语句 ( `sql_id`/ `hash_value`) 可以有多个不同的计划 ( `plan_hash_value`)，并且多个不同的 SQL 语句可以共享同一个计划。

因此，例如，如果我编写两个不同的 SQL 语句从`EMP`表中查询特定行，我将得到相同的`plan_hash_value`.

```
SQL> set autotrace traceonly;
SQL> select * from emp where ename = 'BOB';

no rows selected

Execution Plan
----------------------------------------------------------
Plan hash value: 3956160932

--------------------------------------------------------------------------
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |      |     1 |    39 |     3   (0)| 00:00:01 |
|*  1 |  TABLE ACCESS FULL| EMP  |     1 |    39 |     3   (0)| 00:00:01 |
--------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("ENAME"='BOB')

SQL> ed
Wrote file afiedt.buf

  1* select * FROM emp WHERE ename = 'BOB'
SQL> /

no rows selected

Execution Plan
----------------------------------------------------------
Plan hash value: 3956160932

--------------------------------------------------------------------------
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |      |     1 |    39 |     3   (0)| 00:00:01 |
|*  1 |  TABLE ACCESS FULL| EMP  |     1 |    39 |     3   (0)| 00:00:01 |
--------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter("ENAME"='BOB') 
```

但是，如果我查看`v$sql`，我会看到生成了两个不同`sql_id`的`hash_value`值

```
SQL> set autotrace off;
SQL> ed
Wrote file afiedt.buf

  1  select sql_id, sql_text, hash_value, plan_hash_value
  2    from v$sql
  3   where sql_text like 'select%BOB%'
  4*    and length(sql_text) < 50
SQL> /

SQL_ID        SQL_TEXT                                 HASH_VALUE PLAN_HASH_VALUE
------------- ---------------------------------------- ---------- ---------------
161v96c0v9c0n select * FROM emp WHERE ename = 'BOB'      28618772      3956160932
cvs1krtgzfr78 select * from emp where ename = 'BOB'    1610046696      3956160932 
```

Oracle 认识到这两个语句是具有不同`sql_id`和`hash_value`散列的不同查询。但是他们都碰巧产生了相同的计划，所以他们最终得到了相同的`plan_hash_value`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:45:15.653

我会说你只是证明了这本书在这种情况下是错误的。从理论上讲，让散列标识概念 SQL 语句而不是随机大写的字符串似乎更好……我希望在生成散列时也忽略注释。;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T01:42:23.467

设置第 300 行 col BEGIN_INTERVAL_TIME for a30 select a.snap_id, a.begin_interval_time, b.plan_hash_value from dba_hist_snapshot a, dba_hist_sqlstat b where a.snap_id=b.snap_id and b.sql_id='&sql_id' order by 1;

# c# - 有没有更简洁的方法来表示 C# 中的这个习语？

> ID：16011979
> 
> 赞同：4
> 
> 时间：2013-04-15T09:39:33.317
> 
> 标签：c#, coding-style, value-type

我在项目中使用结构，如下所示：

```
struct Position
{
    public int X { get; private set; }
    public int Y { get; private set; }
    // etc
} 
```

我想添加一个方法，允许我创建具有任意更改属性的结构的修改副本。例如，使用它会很方便：

```
var position = new Position(5, 7);
var newPos = position.With(X: position.X + 1); 
```

这个成语很hacky吗？有更好的方法来支持这一点吗？

```
public Position With(int? X = null, int? Y = null)
{
    return new Position(X ?? this.X, Y ?? this.Y);
} 
```

编辑：如果不清楚，结构是不可变的，我只想创建一个修改了一些值的新值。顺便说一句，这与 Haskell 的记录语法糖非常相似，人们会在其中写`newPos = oldPos { x = x oldPos + 1 }`. 关于这样的习语在 C# 中是否有用，这只是一个实验性的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:48:57.623

Personally, I consider the idiom of a plain-old-data-struct to be vastly underrated. Mutable structs which encapsulate state in anything other than public fields are problematic, but sometimes it's useful to bind together a fixed collection of variables stuck together with duct tape so they can be passed around as a unit. A plain-old-data-struct is a perfect fit for that usage; it behaves like a fixed collection of variables stuck together with duct tape, since that's what it *is*. One can with some work come up with an immutable class which requires slow and hard-to-read code to do anything with, or with some more work come up with something that's still slow but not quite so unaesthetic; one can also code structures in such fashion as to mimic such classes. In many cases, however, the only effect of going through all that effort is that one's code will be slower and less clear than it would have been if one had simply used a PODS.

The key thing that needs to be understood is that a PODS like `struct PersonInfo { public string Name, SSN; public Date Birthdate; }` does *not* represent a person. It represents a space that can hold two strings and a date. If one says `var fredSmithInfo = myDatabase.GetPersonInfo("Fred Smith");`, then `FredSmithInfo.BirthDate` doesn't represent Fred Smith's birthdate; it represents a variable of type `Date` which is initially loaded with the value returned by a call to `GetPersonInfo`--but like any other variable of type `Date`, could be changed to hold any other date.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:43:27.723

这与您将获得的一样简洁。对我来说似乎并不特别hacky。

尽管在您只是这样做的情况下，`position.X + 1`拥有类似的东西会更整洁：

```
var position = new Position(5,7);
var newPos = position.Add(new Position(1,0)); 
```

这会给你一个修改后的 X 值，而不是修改后的 Y 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:46:42.113

可以将这种方法视为[原型模式](http://en.wikipedia.org/wiki/Prototype_pattern)的一种变体，其重点是拥有一个模板结构，而不是避免新实例的成本。设计的好坏取决于您的上下文。如果您可以清楚地说明语法背后的信息（我认为`With`您使用的名称有点不具体；可能类似于`CreateVariant`或`CreateMutant`会使意图更清晰），我会认为这是一种合适的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:56:51.943

我也在添加一个基于表达式的表单。请注意由于它是一个结构而需要完成的可怕的装箱/拆箱。

但正如人们所看到的那样，格式非常好：

```
var p2 = p.With(t => t.X, 4);
var p3 = p.With(t => t.Y, 7).With(t => t.X, 5); // Yeah, replace all the values :) 
```

而且该方法确实适用于各种类型。

```
public void Test()
{
  var p = new Position(8, 3);

  var p2 = p.With(t => t.X, 4);
  var p3 = p.With(t => t.Y, 7).With(t => t.X, 5);

  Console.WriteLine(p);
  Console.WriteLine(p2);
  Console.WriteLine(p3);
}

public struct Position
{
  public Position(int X, int Y)
  {
    this._X = X; this._Y = Y;
  }

  private int _X; private int _Y;
  public int X { get { return _X; } private set { _X = value; } }
  public int Y { get { return _Y; } private set { _Y = value; } }

  public Position With<T, P>(Expression<Func<Position, P>> propertyExpression, T value)
  {
    // Copy this
    var copy = (Position)this.MemberwiseClone();
    // Get the expression, might be both MemberExpression and UnaryExpression
    var memExpr = propertyExpression.Body as MemberExpression ?? ((UnaryExpression)propertyExpression.Body).Operand as MemberExpression;
    if (memExpr == null)
      throw new Exception("Empty expression!");

    // Get the propertyinfo, we need this one to set the value
    var propInfo = memExpr.Member as PropertyInfo;
    if (propInfo == null)
      throw new Exception("Not a valid expression!");

    // Set the value via boxing and unboxing (mutable structs are evil :) )
    object copyObj = copy;
    propInfo.SetValue(copyObj, value); // Since struct are passed by value we must box it
    copy = (Position)copyObj;
    // Return the copy
    return copy;
  }

  public override string ToString()
  {
    return string.Format("X:{0,4} Y:{1,4}", this.X, this.Y);
  }
} 
```

# sql - 如何创建查询谁将是表中的总和或不是值

> ID：16011985
> 
> 赞同：0
> 
> 时间：2013-04-15T09:39:49.613
> 
> 标签：sql, doctrine

我有这样的桌子

```
Table1 
ID   Name  Value fk_table
1    edd   3      1 
2    tom   1      2
3    emi   2     NULL 
```

第二张桌子

```
Table2
ID VALUE
1   3
2   3 
```

如果是外键，如何创建查询谁将是 table1 和 table2 的总和值，或者如果不是 fk，则只输出 table1 的值

```
return $this->getEntityManager()
                    ->createQuery('SELECT t1.name, SUM(t1.value as value +t2.value) 
                                   FROM AcmeBlogBundle:Table1 t1
                                   LEFT JOIN t1.table2 t2')
                    ->execute(); 
```

我想要这样的结果

```
edd 6
tom 5
emi 2 
```

我使用学说和 Symfony2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:28:02.660

1 - 您尚未指定要加入的条件

2 - SUM 函数不能那样工作 - 它对整列的聚合求和，你只需要一个 +

3 - 使用 COALESCE 确保将缺失值替换为 0

```
SELECT T1.Name, COALESCE(T1.VALUE,0) + COALESCE(T2.VALUE,0) 
FROM Table1 T1
LEFT JOIN Table2 T2 ON T1.fk_table = T2.ID 
```

[SQLFiddleDemo](http://sqlfiddle.com/#!6/20410/4)（例如 SQL Server，但也可以与其他 SQL 风格一起正常工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:42:06.940

你的问题是 NULL '破坏了一切的生命'。将其添加到任何其他值都会导致 NULL。您应该使用`COALESCE(t2.value, 0)`它来确保它产生一个不会干扰总和的有效整数。

# ios - 设计类似路径的 iOS 视图

> ID：16011986
> 
> 赞同：0
> 
> 时间：2013-04-15T09:39:54.753
> 
> 标签：ios, view, uiviewcontroller, path, themes

Path iOS 应用程序通常使用什么来使他们的视图看起来如此酷？这是iOS中的特殊视图吗？

它是 UITableView 还是其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:01:39.100

你有什么特别想知道的观点吗？是的，您可能想知道对左下 (+) 按钮有什么影响。好的，对于像*PATH APP for iPhone*这样的效果，您可以随时查看[THIS](http://www.cocoacontrols.com/controls/pathmenuexample)和[THIS](https://github.com/burtlo/QuadCurveMenu)

*我的普遍猜测是：*

很可能它是一个`UIScrollView`（主图像几乎一直在顶部）与许多其他`UI`控件一起使用，例如`UILabel`, `UIImageView`, custom`UIButton`等等。重要的是他们已经编写了完美的逻辑来为所有这些设置显示框架。这就是为什么它看起来如此有条理和流畅。（流畅度总是取决于设备，当然，iPhone 3GS 上的这个应用程序滞后太多了。）

对于左右滑动菜单，我的猜测是，它们再次`UIView`包含`UITableView`许多自定义项。这两个视图都与`ViewController`主视图所在的视图相同。

# performance - cuda 内在函数 sqrtf 和 powf 性能问题

> ID：16011989
> 
> 赞同：1
> 
> 时间：2013-04-15T09:40:00.427
> 
> 标签：performance, math, cuda, device, intrinsics

当我转换`powf`为它时，`__powf`它会给我带来性能改进。但如果我转换`sqrtf`为其中之一，`__fsqrt_[rn,rz,ru,rd]`它会减慢速度。我认为它们的运行速度至少应该和 sqrtf 一样快。可能是什么问题？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:11:17.183

如果您需要对整数进行平方（或浮点数），那么您可以将值与自身相乘，即代替；

```
y = powf(x, 2); 
```

利用：

```
y = x * x; 
```

这避免了使用昂贵的超越函数（连同其相关的函数调用开销），并且在大多数情况下只生成单个乘法指令。

平方根可能无法避免，但您可以使用`fsqrtf`而不是`sqrtf`只需要单精度 - 这通常要快得多。

# r - 使用 R 列表进行查找

> ID：16011990
> 
> 赞同：3
> 
> 时间：2013-04-15T09:40:00.917
> 
> 标签：r

我正在处理大量调查回复，并尝试使用存储在列表中的值进行查找（将问题标题放入我的数据框中）。我担心我的索引忽略了一些简单的事情，但我无法做到这一点。这是一个可重现的示例：

```
survey.data <- data.frame(
  question.number = c("q2","q3","q4","q5")
)

titles <- list(q1="question1", 
           q2="question2", 
           q3="question3", 
           q4="question4", 
           q5="question5") 
```

经过一些涉及删除一些问题的数据操作后，我尝试使用以下列表索引在我的数据框中创建一个新的 question.title 变量以提取正确的标题：

```
survey.data$question.title <- titles[survey.data$question.number] 
```

这给出了输出：

```
 question.number question.title
1   q2  question1
2   q3  question2
3   q4  question3
4   q5  question4 
```

您可以看到新变量没有应用查找，只是“导入”列表中从第一个值开始的所有值。

对于使用列表进行这种查找，我找不到任何适用的帮助，所以也许不建议这样做？我将非常感谢修复或替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:04:11.457

这是一个解决方案，但在分享之前，我通过添加重复的问题（“q2”）稍微修改了您的数据：

```
survey.data <- data.frame(
  question.number = c("q2","q3","q4","q5", "q2")
)

titles <- list(q1="question1", 
               q2="question2", 
               q3="question3", 
               q4="question4", 
               q5="question5") 
```

该解决方案使用`match`和`unlist`。

```
survey.data$question.title <- unlist(titles[match(survey.data$question.number, 
                                                  names(titles))])
survey.data
#   question.number question.title
# 1              q2      question2
# 2              q3      question3
# 3              q4      question4
# 4              q5      question5
# 5              q2      question2 
```

这与撰写本文时已经存在的两种解决方案有何不同？

两种主要方式：

1.  这些解决方案都不会容纳重复的“q2”问题。

    ```
    > survey.data$question.title <- titles[names(titles) %in% survey.data$question.number]
    Error in `$<-.data.frame`(`*tmp*`, "question.title", value = list(q2 = "question2",  : 
      replacement has 4 rows, data has 5
    > survey.data$question.title <- titles[levels(survey.data$question.number)]
    Error in `$<-.data.frame`(`*tmp*`, "question.title", value = list(q2 = "question2",  : 
      replacement has 4 rows, data has 5 
    ```

2.  其他两个解决方案都保留了`list`“question.title”列的结构（如果不使用，此解决方案也会这样做`unlist`），如果您尝试执行诸如将数据导出到csv 文件稍后。这特别麻烦，因为没有视觉指示结果列是 a ，但是您可以通过查看结果的 ucture`list`来验证这一点。`str``data.frame`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:47:51.897

这应该工作 -

```
survey.data$question.title <- titles[names(titles) %in% survey.data$question.number] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:48:33.337

我认为您需要列表中的级别，如下所示：

```
> survey.data$question.title <- titles[levels(survey.data$question.number)]
> survey.data
  question.number question.title
1              q2      question2
2              q3      question3
3              q4      question4
4              q5      question5 
```

# android - 设置包含视图的文本

> ID：16011999
> 
> 赞同：6
> 
> 时间：2013-04-15T09:40:24.637
> 
> 标签：android, xml, android-layout, include

我想知道这是否可能：

在布局文件中，我包含了一个视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <include 
        layout="@layout/includedView" />

</LinearLayout> 
```

包含视图包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="48dip" >

    <ImageView
    ...
    />

    <TextView
    ....
    />

</RelativeLayout> 
```

我的问题是：是否可以在包含视图的布局中为包含视图中的 textview 设置文本（所以从布局 1 开始）？

希望我的问题很清楚，如果没有，请询​​问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:00:49.967

you can do that from code as same as single layout. for example

```
setContentView(R.layout.first_layout);
TextView tv = (TextView)findViewById(R.id.textview_of_second_layout); // just like single layout
tv.setText(something); 
```

But I think it is not possible to do this from the first layout xml as there is no visible way. (someone corrects me if I am wrong)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:53:40.030

是的，有可能，您可以参考该视图，因为整个包含的布局已复制到主布局文件中。您可以始终使用它的 id 来引用 textview，它会被找到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-31T18:46:38.133

如果您想在包含的视图/布局中设置某些内容，例如在导航抽屉中设置文本（个人资料名称、电子邮件等），请按如下方式进行。

```
NavigationView mNavigationView = findViewById(R.id.nav_view);
View headerView = mNavigationView.getHeaderView(0);

TextView profilename = headerView.findViewById(R.id.profile_name);
TextView emailtxt = headerView.findViewById(R.id.email_txt); 
```