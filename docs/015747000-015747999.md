# StackOverflow 问答 15747000-15747999

# ios - 为什么在 iOS 6 中分配新图像时 UIImageView 会调整大小？

> ID：15747001
> 
> 赞同：8
> 
> 时间：2013-04-01T16:10:03.173
> 
> 标签：ios, uitableview, uiimageview, resize

一个应用程序包含一个包含自定义 UITableViewCell 的 UITableView。该单元格又​​包含一个 UIImageView。

问题是在 cellForRowAtIndexPath 中设置图片会使图片占据整个 UITableViewCell 区域：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"CustomCell"];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"bigrect" ofType:@"png"];
    UIImage *image = [[UIImage alloc] initWithContentsOfFile:path];

    cell.imageView.image = image;

    return cell;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/xG6FO.png)

在 IB 中，已选择“Aspect Fit”作为模式，但更改此字段对结果没有明显影响。

但是，当从 IB 设置图像时，在我的代码中没有调用 cell.imageView.image = image 时，结果正是我希望看到的。图像保持在我为 IB 中的 UIImageView 定义的范围内，并且不会尝试缩放以适应 UITableViewCell 的整个垂直高度：

![在此处输入图像描述](https://i.stack.imgur.com/yNfQS.png)

我使用的图像是 1307x309 像素，以防万一。测试在 iOS 6.1 模拟器上运行。

我从[UIIMageView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html)中注意到了这一点：

> 在 iOS 6 及更高版本中，如果您为此视图的 restoreIdentifier 属性分配一个值，它会尝试保留显示图像的框架。具体来说，该类保留视图的边界、中心和变换属性的值以及底层的锚点属性。在恢复过程中，图像视图会恢复这些值，以便图像与以前完全一样。有关状态保存和恢复如何工作的更多信息，请参阅 iOS App Programming Guide。

但是，我无法在文档中的此处或其他地方找到任何解决问题的方法。在“身份”下的 IB 中的 UIImageView 中添加“Foo”的“恢复 ID”并没有改变行为。取消选中“使用自动布局”也没有改变行为。

设置图像时，如何防止 iOS 在 UITableViewCell 中调整 UIImageView 的大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T21:43:21.653

事实证明，UITableViewCell 显然已经有一个名为“imageView”的属性，它覆盖了单元格的整个背景。设置此 imageView 对象的 image 属性设置**背景**图像，而不是我感兴趣的图像。

将我的方法更改为以下内容，同时确保 CustomCell 具有“myImageView”属性解决了问题：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CustomCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"CustomCell"];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"bigrect" ofType:@"png"];
    UIImage *image = [[UIImage alloc] initWithContentsOfFile:path];

    cell.myImageView.image = image;

    return cell;
} 
```

[这个 SO](https://stackoverflow.com/a/14214337/54426)对一个稍微不同的问题的回答为我指明了正确的方向。

# duration - 查找歌曲的时长

> ID：15747004
> 
> 赞同：0
> 
> 时间：2013-04-01T16:10:38.857
> 
> 标签：duration, sampling, quantization

这是一个中期问题，我不知道如何计算。

一首 CD 质量的立体声歌曲已保存在您的计算机上，占用 35.28 MB 的存储空间。CD 质量要求我们具有 16 位量化以及 44.1 KHz（样本/秒）的统一采样。找出这首歌的持续时间（提示：1 字节=8 位）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:26:31.603

提示：按照单位。

编辑：忘了立体声。

`(total size = bits) / (channels) / (quantization = bits/sample) / (sampling rate = samples/second)`

`= 35.28 MB / (2 channels for stereo) (16 bits/sample) / (44.1 k samples/second) = (35.28 * 8000000) / (16 * 44100)`

`= x seconds (assuming MB = 8000000 bits, not MiB)`

# json - 带有 Coffeescript 基本 GET 的主干 JS

> ID：15747010
> 
> 赞同：0
> 
> 时间：2013-04-01T16:11:07.923
> 
> 标签：json, backbone.js, coffeescript

我正在学习 CoffeeScript 和 Backbone JS。我只想装载一件设备。是的，我知道我不需要 Backbone JS - 但如果我从基础开始学习，它会帮助我学习。页面加载后，我希望它从服务器获取一些 JSON，并将其显示在页面上。

到目前为止，这是我的咖啡脚本：

```
jQuery ->
    class Equipment extends Backbone.Model
        defaults:
            title:''
            desc:''
        url:'/getData'

    class ItemView extends Backbone.View
        tagName: 'div'

        initialize: ->
            _.bindAll @, 'render'

        render: ->  
            $(@el).html """
                <h1>#{@model.get 'title'}</h2>
                <p>#{@model.get 'desc'}</p>
            """
            @

    class AppRouter extends Backbone.Router.extend
        routes:
            '':'getData'

        getData: ->
            @equipment = new @Equipment()
            @equipmentView = new @ItemView
                model: @equipment
            @equipment.fetch()
            $('div').html @equipmentView.render().el

    appRouter = new AppRouter

    Backbone.history.start() 
```

我觉得我已经准备好了所有的部分，并且没有出现任何错误（无论是在编译还是在运行页面时）。

我期望从服务器返回的基本 JSON 只是一个与此相呼应的 PHP 页面：

```
{
    "title": "title",
    "desc": "description"
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:15:06.317

您必须告诉 Backbone 像这样路由您的初始 url ('')：

```
Backbone.history.start pushState: true 
```

您还应该传递一个 id （我认为 Backbone 会`/getData/undefined`在您的情况下提出请求，并且在旁注中，我认为您应该使用咖啡的胖箭头而不是`bindAll`（这是咖啡脚本的众多优点之一，但是您应该摆脱一些`@`s 因为他们不再指代 window ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:30:33.937

@equipment.fetch() 甚至会触发 HTTP 请求吗？

据我了解，您必须设置 id:`@equipment = new @Equipment(id:123)`这将触发“/getData/123”请求。

或者在 fetch: 中指定 url`@equipment.fetch(url:"/getData")`来加载

但是视图仍然是空的，因为在执行视图 render() 时数据还没有加载。当模型更改时，Backbone 不会自动更新视图（就像 EmberJS 一样）。

添加`@listenTo(@model, "change", @render)`到初始化方法以在模型更改时重新渲染。

我为您找到了一个不错的指南/教程 [http://adamjspooner.github.com/coffeescript-meet-backbonejs/](http://adamjspooner.github.com/coffeescript-meet-backbonejs/)

# web-services - 使用 Maven 构建/部署时 Web 服务的 WebSphere 问题

> ID：15747013
> 
> 赞同：0
> 
> 时间：2013-04-01T16:11:33.793
> 
> 标签：web-services, maven, websphere, websphere-7

我正在迁移要使用 Maven 构建和部署的应用程序。它部署在 WebSphere 7 上。我已经设法让这个应用程序的一部分（HTML UI 等）工作正常，但是 Web 服务有问题。

当我尝试访问 Web 服务的 URL（例如`localhost:9000/MyApplication/MyWebServiceProject/MyService`）时，我希望看到一个页面，上面写着“你好，这是一个 Web 服务！”。

相反，我看到了这个异常：

```
[4/1/13 11:49:37:484 EDT] 0000001d WASAxis2Servl E 尝试加载 servlet 的 ConfigurationContext 时遇到以下异常：com.ibm.ws.websvcs.exception.ConfigurationException：无法检索服务器模块Axis servlet 中模块的元数据：MyWebServiceProject
com.ibm.ws.websvcs.exception.ConfigurationException：无法在 Axis servlet 中为模块检索服务器模块元数据：MyWebServiceProject
    在 com.ibm.ws.websvcs.transport.http.WASAxis2Servlet.init(WASAxis2Servlet.java:290)
    在 com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:358)
    在 com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.init(ServletWrapperImpl.java:171)
    在 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:739)
    在 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    在 com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:181)
    在 com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935)
    在 com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
    在 com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
    在 com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1592)
    在 com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    在 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    在 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    在 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    在 com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    在 com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    在 com.ibm.io.async.AbstractAsyncFuture.invokeCallback（AbstractAsyncFuture.java:217）
    在 com.ibm.io.async.AsyncChannelFuture.fireCompletionActions（AsyncChannelFuture.java:161）
    在 com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    在 com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    在 com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    在 com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1613)

```

我猜想通过 Maven 部署 Web 服务需要一些特定于 IBM 的配置，但我不确定它是什么。

EAR 项目的 POM 中的相关部分：

```
<plugin>
<artifactId>maven-ear-plugin</artifactId>
<version>2.7</version>
<configuration>

  <applicationName>PolicyGatewayEAR</applicationName>

      <defaultLibBundleDir>lib/</defaultLibBundleDir>
</configuration>
</plugin>
<plugin>
    <groupId>org.codehaus.mojo</groupId>
<artifactId>was6-maven-plugin</artifactId>
<version>1.2</version>
<executions>
    <execution>
    <phase>integration-test</phase>
    <id>uninstall</id>
    <goals>
        <goal>wsUninstallApp</goal>
    </goals>
    <configuration>
        <wasHome>${was7Home}</wasHome>
        <verbose>false</verbose>
        <failOnError>false</failOnError>
        <profileName>was70profile1</profileName>
        <workingDirectory>${project.build.directory}/was6-maven-plugin</workingDirectory>
            <applicationName>MyApplication</applicationName>
    </configuration>
</execution>
<execution>
    <phase>integration-test</phase>
    <id>installation</id>
    <goals>
    <goal>installApp</goal>
    </goals>
    <configuration>
    <wasHome>${was7Home}</wasHome>
    <verbose>false</verbose>
    <failOnError>true</failOnError>
    <updateExisting>false</updateExisting>
    <profileName>was70profile1</profileName>
    <workingDirectory>${project.build.directory}/was6-maven-plugin</workingDirectory>
        <applicationName>MyApplication</applicationName>
   </configuration>
</execution>
</executions>
</plugin> 
```

Web 服务子项目的 POM 片段：

```
 <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <warSourceDirectory>WebContent</warSourceDirectory>
                <failOnMissingWebXml>true</failOnMissingWebXml>
                <warSourceDirectory>WebContent</warSourceDirectory>
                <packagingExcludes>WEB-INF/lib/*.jar</packagingExcludes>
                <archive>
                <manifest>
                  <addClasspath>true</addClasspath>
                  <classpathPrefix>lib/</classpathPrefix>
                </manifest>
              </archive>
            </configuration>
        </plugin> 
```

当我使用 RAD (v8.5) 部署到 WAS 时，这不是问题——它只是在我尝试使用 Maven 构建和部署应用程序后才开始的。有谁知道如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:43:05.063

所以事实证明我必须使用与这里描述的相同的解决方案：

[部署的 Web 服务架构与工作区中的内容不匹配](https://stackoverflow.com/questions/15880662/deployed-webservice-schema-does-not-match-whats-in-workspace)

由于某种原因，当 Maven 构建项目中未提供 WSDL 和模式文件时，WebSphere 无法从代码生成 WSDL。我报告的错误消息类似于我在运行测试时看到的错误消息，其中包括 EJB 项目中的 WSDL 和模式。

# batch-file - 批处理文件在编辑文本文件后留下空格的问题

> ID：15747021
> 
> 赞同：1
> 
> 时间：2013-04-01T16:12:00.407
> 
> 标签：batch-file

我正在寻找解决问题的方法，我试图在文本文件的每一行末尾添加扩展名。我有一个效果很好的解决方案，除了它在每行之后添加一个空格。这是我所拥有的：

```
@echo off
Set "_t1=PDF List.txt"
Set "_t3=.pdf"
PUSHD %_t0%
If EXIST tmp.txt del tmp.txt
For /F "usebackq delims=" %%A in ("%_t1%") do echo %%A%_t3% >>tmp.txt
del "%_t1%"
rename tmp.txt "%_t1%"
For %%A in (0 1 2) do Set _t%%A=
POPD 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:14:25.997

`echo`从命令中删除空格：

```
For /F "usebackq delims=" %%A in ("%_t1%") do echo %%A%_t3%>>tmp.txt 
```

# python - 使用 py2exe 时非常奇怪的 Windows 服务行为

> ID：15747025
> 
> 赞同：0
> 
> 时间：2013-04-01T16:12:21.143
> 
> 标签：python, windows, service, exe, py2exe

我在 python 中编写了一个 Windows 服务，以将一些文本连续写入文件并安装并运行它，它工作正常。现在，如果我尝试使用 py2exe 将我的 python windows 服务脚本转换为可执行文件 (.exe)。.exe 作为服务安装得很好，但是当我尝试启动它时，我收到错误“服务器没有及时响应启动......”。这是否与 py2exe 破坏我的 python 脚本中的信息有关。我该如何解决这个问题？（我正在尝试将其转换为 .exe，因为我想分发它）。

我的python脚本如下：

```
import win32service
import win32serviceutil
import win32event

class clear_queue(win32serviceutil.ServiceFramework):

_svc_name_ = "avant"

_svc_display_name_ = "avant"

_svc_description_ = "Elegant file writer"

def __init__(self, args):
    win32serviceutil.ServiceFramework.__init__(self,args)

    self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)

def SvcDoRun(self):

    import servicemanager;
    fil = open("C:/Users/u/Desktop/c99/user.txt",'r+');

    rc = win32event.WaitForSingleObject(self.hWaitStop, 64)
    while rc != win32event.WAIT_OBJECT_0:

        fil.write("george\n");
        rc = win32event.WaitForSingleObject(self.hWaitStop, 64)

def SvcStop(self):

    self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)

    win32event.SetEvent(self.hWaitStop)

if __name__ == '__main__':
win32serviceutil.HandleCommandLine(clear_queue) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T05:39:35.563

查看[http://tools.cherrypy.org/wiki/WindowsService](http://tools.cherrypy.org/wiki/WindowsService)上的示例，您似乎需要添加`self.ReportServiceStatus(win32service.SERVICE_STOPPED)`作为 SvcStop 方法的最后一行。

# jwplayer - 如何消除黑条？

> ID：15747027
> 
> 赞同：1
> 
> 时间：2013-04-01T16:12:30.483
> 
> 标签：jwplayer

我正在使用 JWPlayer 6.3 在 HTML/Javascript 应用程序中嵌入视频。我有一个外部 div，其中包含嵌入视频的容器 div。容器在外部 div 内的两个方向上居中。外部 div 尺寸大致是浏览器窗口的尺寸。我正在调用 jwplayer("container").setup({options}) 来嵌入视频。都好。

该应用程序通过使用不同的视频再次调用 jwplayer("container").setup({options}) 来在不同的时间显示不同的视频。我想让每个视频尽可能地填充外部 div，同时仍然保持自己的纵横比。视频纵横比保证在任何给定时间都不同于外部 div 的纵横比。

如果我选择拉伸：“最适合”，我会得到可怕的黑条 (™)。如果我也可以为这些条选择一种颜色（我会选择白色），那就太好了。

```
Q1: can I/how do I specify the color of the bars? 
```

如果我可以在运行时检测到视频的大小，那么我可以使用宽高比指定嵌入的宽度和高度（通过 .setup()），并使用拉伸：“exactfit”。

```
Q2: can I/how can I detect the size of the video at run time? 
```

感谢弗雷德罗斯佩里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:20:25.187

您应该使用精确拟合，而不是最佳拟合。如果这不起作用，请尝试填充。您可能可以使用我们的 API 和 getMeta() 来检测视频的大小 - [http://www.longtailvideo.com/support/jw-player/28851/javascript-api-reference](http://www.longtailvideo.com/support/jw-player/28851/javascript-api-reference)

# ruby - 独角兽可以听文件描述符吗？

> ID：15747028
> 
> 赞同：0
> 
> 时间：2013-04-01T16:12:30.293
> 
> 标签：ruby, unicorn

Unicorn Rack 服务器可以监听现有的文件描述符吗？如果没有，是否有任何 Rack 服务器可以？

例如，我有一个父进程将端口`80`作为文件描述符打开，`3`然后分叉并执行 Unicorn。Unicorn 可以选择监听预先打开的套接字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-22T11:45:58.400

您可以在配置文件中手动设置套接字以侦听方法，例如

`listen Socket.for_fd(ENV['FD'])`

# java - 标准输入读取多行

> ID：15747038
> 
> 赞同：0
> 
> 时间：2013-04-01T16:13:28.903
> 
> 标签：java, stdin

我有以下代码：

```
 BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));
        String submittedString = "";
        System.out.flush();
        submittedString = stdin.readLine();

        int numberofLines = Integer.parseInt(submittedString.split(" ")[0]);

        for(int i = 0; i < numberofLines; i++)
            submittedString += stdin.readLine();

        zipfpuzzle mySolver = new zipfpuzzle();
        mySolver.getTopSongs(submittedString); 
```

然而，尽管输入是多行的，但这只会读取第一行。

我的错误在哪里？

如果有什么不同，我正在 Eclipse 上编译。

干杯! 达里奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:19:05.457

只需使用一个数组并将其填充到您的 for 循环中：

```
String[] inputs = new String[numberofLines];

for (int i = 0; i < numberofLines; i++)
    inputs[i] = stdin.readLine(); 
```

**额外说明：**

如果您想要多行带有单个字符串：

```
String submittedString = "";

for (int i = 0; i < numberofLines; i++)
    submittedString += stdin.readLine() + System.getProperty("line.separator"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T16:18:24.397

```
BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));
String line = "";

while ((line = stdin.readLine()) != null){
// Do something.
submittedString += line + '\n';

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T16:19:21.307

```
submittedString = stdin.readLine(); 
```

[BufferedReaders readLine 方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html#readLine%28%29 "读线")将读取 System.in 直到它遇到新行，因此如果您使用文件的第一行来确定要读取的行数，那么您的数据一定是不正确的。

# jquery - 如何用jquery扭曲图像

> ID：15747039
> 
> 赞同：-1
> 
> 时间：2013-04-01T16:13:29.727
> 
> 标签：jquery, slider, carousel

我想做一个类似于这个的轮播/滑块：[carousel](http://codecanyon.net/item/icarousel/2527180) 我遇到的问题是图像的失真。这对 jquery 是可能的还是我需要对整个想法做一些不同的事情？我还没有开始编码过程，因为我真的不知道从哪里开始。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:17:03.663

您可以尝试使用 CSS 过滤器来达到相同的效果。这是一篇关于该主题的精彩文章 [http://davidwalsh.name/css-filters](http://davidwalsh.name/css-filters)

# sql - 使用一个参数获取最新数据库条目的存储过程？

> ID：15747045
> 
> 赞同：0
> 
> 时间：2013-04-01T16:13:47.757
> 
> 标签：sql, stored-procedures

我对 SQL 查询非常陌生，并且在编写它们时遇到了麻烦。

我需要一个可以传入参数 ( `Description`) 的查询，它会为此返回数据库中的最新项目。

*   微软SQL
*   数据库表：`dbo.Document`
*   列：`DocumentID (int), Description (nvarchar(255)), CreatedDate (datetime)`

询问：

```
SELECT * 
FROM dbo.Document 
WHERE Description = "HelpDocument", 
      select * from (RANK() OVER (PARTITION BY DocumentID order by CreatedDate desc) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:25:18.687

```
SELECT TOP 1 *
FROM dbo.Document 
WHERE Description = @yourparameter
ORDER BY CreatedDate desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:23:53.030

每当您需要最近的项目时，如果您的表中没有任何 PRIMARY`id`键，您可以使用它`LIMIT 1`来检索最近添加的项目。

所以我认为您的查询可能如下所示：

```
SELECT * 
FROM dbo.Document 
WHERE Description = "HelpDocument", 
      select * from (RANK() OVER (PARTITION BY DocumentID order by CreatedDate desc)
LIMIT 1 
```

# mysql - 如何为子查询中的每一行添加 WHERE 子句？

> ID：15747047
> 
> 赞同：0
> 
> 时间：2013-04-01T16:13:49.167
> 
> 标签：mysql, sql

我有以下表格：

```
CREATE TABLE `content` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `content` varchar(255) NOT NULL,
  `tag_a_id` int unsigned DEFAULT NULL,
  `tag_b_id` int unsigned DEFAULT NULL,
  `tag_c_id` int unsigned DEFAULT NULL,
  `tag_d_id` int unsigned DEFAULT NULL,
  `tag_e_id` int unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
);
CREATE TABLE `tags` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `tag` varchar(32) NOT NULL UNIQUE,
  PRIMARY KEY (`id`)
); 
```

该`tags`表与内容表具有一对多的关系，使用`tag_?_id`字段，但每个标签 ID 每行仅出现一次。

我想做一个查询，从`content`表中选择与给定标签集（以及所有相关标签）关联的所有行。例如，“获取所有与标签“新闻”和“医疗保健”相关联的内容行。

这意味着需要在`tags`表中查找“News”和“MedicalCare”的 ID，然后使用这样的一对查询将其注入到`content`表上的查询中（假设这些标签具有 ID`45`和`68`）：

```
SELECT id FROM tags WHERE tag IN ("News","MedicalCare"); 
```

... 进而...

```
SELECT t1.id, t1.content, ts_a.tag, ts_b.tag, ts_c.tag, ts_d.tag, ts_e.tag
FROM (
    SELECT t.id, t.content, t.tag_a_id, t.tag_b_id, t.tag_c_id, t.tag_d_id, t.tag_e_id
    FROM content t
    WHERE 45 IN (t.tag_a_id, t.tag_b_id, t.tag_c_id, t.tag_d_id, t.tag_e_id)
    AND 68 IN (t.tag_a_id, t.tag_b_id, t.tag_c_id, t.tag_d_id, t.tag_e_id)
    ORDER BY t.id ASC LIMIT 200
) t1
LEFT JOIN tags ts_a ON t1.tag_a_id=ts_a.id
LEFT JOIN tags ts_b ON t1.tag_b_id=ts_b.id
LEFT JOIN tags ts_c ON t1.tag_c_id=ts_c.id
LEFT JOIN tags ts_d ON t1.tag_d_id=ts_d.id
LEFT JOIN tags ts_e ON t1.tag_e_id=ts_e.id; 
```

*有没有一种方法可以在*此查询中获取我感兴趣的标签 ID ，并动态生成那些 AND x IN (a,b,c) 子句？

另一种选择可能是这样的：

```
WHERE EVERY ONE OF (
    SELECT id FROM tags WHERE tag IN ("News","MedicalCare")
) IN (t.tag_a_id, t.tag_b_id, t.tag_c_id, t.tag_d_id, t.tag_e_id) 
```

请注意：该`content`表非常大，因此如果不先过滤掉不需要的行并应用`LIMIT`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:22:11.247

如果您知道标签是唯一的，您可以执行以下操作：

```
where ((ts_a.tag in ('News', 'MecialCare')) +
       (ts_b.tag in ('News', 'MecialCare')) +
       (ts_c.tag in ('News', 'MecialCare')) +
       (ts_d.tag in ('News', 'MecialCare')) +
       (ts_e.tag in ('News', 'MecialCare'))
      ) = 2 
```

这使用了在 MySQL 中比较返回 0 或 1 的事实，然后可以将它们相加。

顺便说一句，这个问题是为什么数据应该正确结构化的一个很好的理由，有一个表，每个人的每个标签都有一个单独的行，一个 persno_tag 表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:22:19.177

我认为这会做到：

```
select t1.id, t1.content, ts_a.tag, ts_b.tag, ts_c.tag, ts_d.tag, ts_e.tag
from content t1
LEFT JOIN tags ts_a ON t1.tag_a_id=ts_a.id
LEFT JOIN tags ts_b ON t1.tag_b_id=ts_b.id
LEFT JOIN tags ts_c ON t1.tag_c_id=ts_c.id
LEFT JOIN tags ts_d ON t1.tag_d_id=ts_d.id
LEFT JOIN tags ts_e ON t1.tag_e_id=ts_e.id
where "News" in (ts_a.tag, ts_b.tag, ts_c.tag, ts_d.tag, ts_e.tag)
and "MedicalCare" in (ts_a.tag, ts_b.tag, ts_c.tag, ts_d.tag, ts_e.tag) 
```

# mysql - 重复字段 Hibernate + MySQL [播放 1.2.4]

> ID：15747050
> 
> 赞同：1
> 
> 时间：2013-04-01T16:14:00.123
> 
> 标签：mysql, jpa, playframework

我有一个 MySQL 模型，其中包含 2 个表**Empresa**（公司）和**Ruta**（路线），它们之间的`1:N`关系。我正在使用 NetBeans 进行开发。

在运行我的应用程序之前，在 MySQL 命令行中，我输入：

```
describe ruta; 
```

我的表 ruta 有 3 个字段：

```
idRuta  --  int(10) unsigned --  NONULL  --  PK  --  DEFAULTNULL  --  AUTOINC  
zona  --  varchar(45)  --  NO NULL  --  DEFAULTNULL --  
idEmpresa  -- int(11)  --  NONULL  --  KEYMUL  --  DEFAULTNULL 
```

当我运行我的 webapp 时，在添加任何对象之前，日志说：

```
[...]  
17:32:39,163 INFO  ~ Connected to jdbc:mysql://localhost:3306/opticaDB  
17:32:41,021 ERROR ~ Unsuccessful: alter table Ruta add index FK270C1013017BBD (empresa_idEmpresa), add constraint FK270C1013017BBD foreign key (empresa_idEmpresa) references Empresa (idEmpresa)  
17:32:41,021 ERROR ~ Can't create table 'opticadb.#sql-b0c_10' (errno: 150)  
17:32:41,344 INFO  ~ Application 'Optica2.0' is now started !  
17:32:55,235 WARN  ~ SQL Error: 1364, SQLState: HY000  
17:32:55,235 ERROR ~ Field 'idEmpresa' doesn't have a default value  
[...] 
```

`idEmpresa`是表**Ruta**中表**Empresa**和**FK的****PK**。然后，随着我的应用程序运行，当我输入

 ******```
describe ruta; 
```

我的表 ruta 有四个字段：

```
idRuta  --  int(10) unsigned --  NONULL  --  PK  --  DEFAULTNULL  --  AUTOINC  
zona  --  varchar(45)  --  NONULL  --  DEFAULTNULL --  
idEmpresa  -- int(11)  --  NONULL  --  KEYMUL  --  DEFAULTNULL 
empresa_idEmpresa  --  bigint(20)  --  YESNULL  --  DEFAULTNULL 
```

我的模型是这样的：

### 型号：Empresa

```
package models;    
import play.*;  
import java.util.*;  
import javax.persistence.*;  
import play.db.jpa.*;  
import play.data.validation.*;  

@Entity  
public class Empresa extends GenericModel {  

    @Id  
    @GeneratedValue (strategy = GenerationType.AUTO)  
    public Long idEmpresa;  

    public String nombre;  
    public Integer telefono;  
    public String web;  
    public String direccion;

    public String toString() {  
        return nombre;
    }  
} 
```

### 型号：鲁塔

```
package models;

import play.*;
import java.util.*;
import javax.persistence.*;
import play.db.jpa.*;
import play.data.validation.*;

@Entity
public class Ruta extends GenericModel {

    @Id
    @GeneratedValue (strategy = GenerationType.AUTO)
    public Long idRuta;
    public String zona;

    @ManyToOne
    public Empresa empresa;

    @Override
    public String toString(){
        return zona;
    }
} 
```

对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:11:01.913

使用@JoinColumn 指定要使用 idEmpresa 列来映射 ManyToOne 关联：

```
@ManyToOne
@JoinColumn(name = "idEmpresa")
public Empresa empresa; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:13:32.930

如果您在框架启动之前定义了表，通常会发生此问题。它是**DDL 生成模式**特性，您可以在文件中禁用它，我建议在生产模式下部署应用程序时`application.conf`设置为该值。`jpa.ddl=none`

作为替代方案，如果您之前已经定义了表，特别是您已经定义了外键。你应该这样做：

```
@Entity
public class Ruta extends GenericModel {

    @Id
    @GeneratedValue (strategy = GenerationType.AUTO)
    public Long idRuta;
    public String zona;

    @ManyToOne
    @JoinColumn(name = "idEmpresa")
    public Empresa empresa;

    @Override
    public String toString(){
        return zona;
    }
} 
```

请注意，有一个新注释在 field`@JoinColumn`采用参数`name`（关联列名称）`empresa`。请参阅[此参考](http://docs.oracle.com/javaee/6/api/javax/persistence/JoinColumn.html)以进一步阅读。

> ### 更新
> 
> 如果您之前已定义表， JPA DDL UPDATE**无法**删除或有时自动更新您的列）。作为替代方案，您可以`ALTER TABLE`为该表手动执行 sql，或者如果您处于开发模式，删除前一个表是执行此操作的简单方法。******

# sql-server-2008 - ColdFusion 9 和文件流

> ID：15747053
> 
> 赞同：0
> 
> 时间：2013-04-01T16:14:09.777
> 
> 标签：sql-server-2008, coldfusion, filestream, coldfusion-9

我有一个允许用户上传文件的应用程序。现在它正在直接上传到文件系统。我将我的数据库设置为使用文件流（在 SQL Server 2008 中）。我有一个输入字段类型为文件的表单。

```
<input type="file" name="ul_path1" id="ul_path1"> 
```

允许用户选择文件。然后我尝试使用选择的文件名进行查询以将文件插入数据库。

```
<cfquery datasource=#ODSN# name="upFiles">
insert into redbook_uploads 
'#session.buildno#', '#form.ul_path1#', Cast('#form.ul_path1#' As varbinary(max))
</cfquery> 
```

但是我在 #form.u1_path1# 之前收到一个错误，并且在错误消息中它显示 SQL 语句为

```
insert into redbook_uploads '009', 'C:\apps\ColdFusion9\runtime\servers\coldfusion\SERVER-INF\temp\wwwroot-tmp\neotmp7306602622243140924.tmp', Cast('C:\apps\ColdFusion9\runtime\servers\coldfusion\SERVER-INF\temp\wwwroot-tmp\neotmp7306602622243140924.tmp' As varbinary(max)) 
```

什么时候应该：

```
insert into redbook_uploads '009', 'C:\users\username\file.pdf', Cast('C:\users\username\file.pdf' As varbinary(max)) 
```

我不知道如何获得实际的文件名，也不确定为什么没有得到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:12:03.573

[这个论坛帖子](http://forums.adobe.com/message/2558070)可能有正确的答案：

> 以下是上传文件并将其存储在数据库中的基本步骤。
> 
> 1.  使用包含文件标签的表单创建页面。此表单将提交到“action.cfm”页面。注意.cfm 页面的名称并不重要，“action.cfm”就是一个例子。
>     
>     
> 2.  在您的“action.cfm”上，使用带有 action="upload" 标记的 CFFILE 将文件保存到您的文件系统。
>     
>     
> 3.  使用带有 action="readbinary" 的 CFFILE 标签将上传文件的内容读入一个变量。您可能还想在将上传的文件读入变量后使用 CFFILE 删除它。
>     
>     
> 4.  使用 CFQUERY 和 CFQUERYPARAM 来插入文件内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:18:57.940

> 无论出于何种原因，文件的路径默认为：
> 
> `C:\apps\ColdFusion9\runtime\servers\coldfusion\SERVER-INF\temp\wwwroot-tmp\neotmp###.tmp.`

我们需要查看一些代码来提供更具体的答案。但是要回答您的部分问题...

新上传的文件总是放在服务器临时目录中，并给定一个临时文件名。在您的操作页面上，您必须使用`cffile action=upload`标记将文件从临时目录移动到所需位置。

动作名称有点误导。它并没有真正*上传*任何东西。从临时路径可以看出，文件已经上传到服务器了。所做`action=upload`的只是移动/重命名文件。它还使用文件的详细信息填充`CFFILE`（或`result`）结构，例如文件名、文件扩展名、mime 类型等。（有关更多详细信息，请参阅[文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-738f.html)。）这些值可用于将文件信息保存到数据库中。

```
 <cffile action="upload" 
          fileField    = "form.nameOfYourInputField"  
          destination  = "c:\path\to\target\directory"  
          nameConflict = "makeUnique"
          result="fileDetails" /> 

   <cfdump var="#fileDetails#" label="Uploaded File Details"> 
```

# java - Java GCDetail 输出是什么意思？

> ID：15747056
> 
> 赞同：2
> 
> 时间：2013-04-01T16:14:17.847
> 
> 标签：java, garbage-collection

我正在检查不同类型的 Java 垃圾收集器，我使用以下命令`G1`在 Debian（挤压）系统上输出 GC 详细信息：

```
$ java -XX:+PrintCommandLineFlags -XX:+PrintGCDetails -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC -version 

-XX:MaxHeapSize=130024448 -XX:+PrintCommandLineFlags -XX:+PrintGCDetails   
-XX:+UnlockExperimentalVMOptions -XX:+UseG1GC 
java version "1.6.0_18"
OpenJDK Runtime Environment (IcedTea6 1.8.13) (6b18-1.8.13-0+squeeze2)
OpenJDK Client VM (build 14.0-b16, mixed mode)
Heap
      F 0 space 1024K,   0% used [0xa8700000, 0xa8700000, 0xa8800000)
      F 0 space 1024K,   0% used [0xa8800000, 0xa8800000, 0xa8900000)
      F 0 space 1024K,   0% used [0xa8900000, 0xa8900000, 0xa8a00000)
      F 0 space 1024K,   0% used [0xa8a00000, 0xa8a00000, 0xa8b00000)
      F 0 space 1024K,   0% used [0xa8b00000, 0xa8b00000, 0xa8c00000)
      F 0 space 1024K,   0% used [0xa8c00000, 0xa8c00000, 0xa8d00000)
      F 0 space 1024K,   0% used [0xa8d00000, 0xa8d00000, 0xa8e00000)
   Y    0 space 1024K,  17% used [0xa8e00000, 0xa8e2bc10, 0xa8f00000) 
```

**我可以在 G1 中看到堆布局是相同大小的块（区域），那么字符`F`和`Y`含义是什么，以及 17% 的使用是什么？**

我还使用以下命令输出（我认为默认的）GC 详细信息：

```
$ java -XX:+PrintCommandLineFlags -XX:+PrintGCDetails -version

-XX:+PrintCommandLineFlags -XX:+PrintGCDetails 
java version "1.6.0_18"
OpenJDK Runtime Environment (IcedTea6 1.8.13) (6b18-1.8.13-0+squeeze2)
OpenJDK Client VM (build 14.0-b16, mixed mode, sharing)
Heap
 def new generation   total 960K, used 180K [0x6f030000, 0x6f130000, 0x71790000)
  eden space 896K,  20% used [0x6f030000, 0x6f05d010, 0x6f110000)
  from space 64K,   0% used [0x6f110000, 0x6f110000, 0x6f120000)
  to   space 64K,   0% used [0x6f120000, 0x6f120000, 0x6f130000)
 tenured generation   total 4096K, used 0K [0x71790000, 0x71b90000, 0x8f030000)
   the space 4096K,   0% used [0x71790000, 0x71790000, 0x71790200, 0x71b90000)
 compacting perm gen  total 12288K, used 24K [0x8f030000, 0x8fc30000, 0x93030000)
   the space 12288K,   0% used [0x8f030000, 0x8f0361b8, 0x8f036200, 0x8fc30000)
    ro space 8192K,  89% used [0x93030000, 0x93763300, 0x93763400, 0x93830000)
    rw space 12288K,  59% used [0x93830000, 0x93f60560, 0x93f60600, 0x94430000) 
```

**我怎么知道这个默认的 GC 属于哪种类型的 GC？CMS 一台还是并行一台？**

# linux - 如何在 NF_IP_PRE_ROUTING 挂钩中直接将数据包传递到 L4 层

> ID：15747064
> 
> 赞同：0
> 
> 时间：2013-04-01T16:14:40.553
> 
> 标签：linux, networking, kernel, ipv4, netfilter

当数据包到达NF_IP_PRE_ROUTING的钩子时，我想直接将一些数据包传递到L4层。我使用使用 ip_local_deliver() 函数。但是，它不起作用。我可以知道如何使它工作。谢谢！

最好的问候，劳伦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:59:40.890

感谢您的建议！我的代码如下：

```
const char* hooks[] = {"NF_IP_PRE_ROUTING"};

unsigned int
header(unsigned int hooknum,
                     struct sk_buff* skb,
                     const struct net_device *in,
                     const struct net_device *out,
                     int (*okfn)(struct sk_buff*))
{

    struct sk_buff* nskb;
    struct iphdr *iph = NULL;

    nskb = skb;
    if(nskb==NULL)
    {
      printk("%s\n", "*skb is NULL");
      return NF_ACCEPT;
    }

    iph = ip_hdr(nskb);
    if(iph == NULL)
    {
      printk("%s\n", "*iph is NULL");
      return NF_ACCEPT;
    }

    if ((iph->protocol == IPPROTO_UDP) || (iph->protocol == IPPROTO_ICMP)){

            ip_local_deliver(nskb);
            printk("------delivered  --------\n");
            return NF_STOLEN;
    }

    return NF_ACCEPT;
}

static struct nf_hook_ops header_ops[] = {  
{
    {
        .hook     = header,
        .owner    = THIS_MODULE,
        .pf       = PF_INET,
        .hooknum  = 0, //NF_IP_PRE_ROUTING,
        .priority = NF_IP_PRI_FIRST,
    },
};

static int __init init(void)
{

      int ret;
      ret = nf_register_hooks(header_ops, ARRAY_SIZE(header_ops));
      if (ret < 0) {
          printk("http detect:can't register header_ops detect hook!\n");
          return ret;
      }
      printk("insmod header_ops detect module\n");
      return 0;
}

static void __exit fini(void)
{

     nf_unregister_hooks(header_ops, ARRAY_SIZE(header_ops));
     printk("remove header_ops detect module.\n");

}

module_init(init);

module_exit(fini); 
```

# python - 使用 Doxygen 记录 UTF-8 Python 代码

> ID：15747065
> 
> 赞同：1
> 
> 时间：2013-04-01T16:14:43.093
> 
> 标签：python, utf-8, doxygen

doxygen 未正确解析以下代码，生成的文档中未显示“模块文档字符串”：

```
# -*- coding: utf-8 -*-
"""
Module Docstring
""" 
```

如果我删除第一行，它会被正确解析。但是我需要设置编码，因为我在代码中使用了非 ASCII 字符。有没有人有同样的问题？我尝试使用 doxypy，但它也失败了。还尝试了配置文件中的许多不同更改。

到目前为止，最好的方法是将 INPUT_FILTER 参数用于某种去除第一行的脚本，可能使用“tail -n +3”作为过滤器。问题在于并非每个文件都需要“编码：utf-8”，因此将其放在每个文件中都会很痛苦。有更好的想法吗？我忽略了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:18:35.267

您可以指定`input encoding`配置变量：

[http://www.doxygen.nl/manual/config.html#cfg_input_encoding](http://www.doxygen.nl/manual/config.html#cfg_input_encoding)

该变量应设置为`UTF-8`（全部大写，需要连字符，无空格），如在[http://www.gnu.org/software/libiconv/中所指定](http://www.gnu.org/software/libiconv/)

希望这可以帮助。快乐的记录:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:46:49.563

查看[此链接](http://www.doxygen.nl/manual/docblocks.html#pythonblocks)，您似乎必须`@package <packagename>`为 doxygen 放入模块文档字符串才能对其进行处理。

在同一页面下方，您可以看到 doxygen 实际上更喜欢您使用注释而不是 docstring，因为 doxygen 特殊命令在 docstrings 中不受支持。

**编辑：**

为了避免混淆 doxygen，请将`@package`注释放在与注释不同的行上`coding`。

要让 doxygen 将包“放在适当的位置”，您应该查看[grouping](http://www.doxygen.nl/manual/grouping.html)，尤其是模块。

# ajax - 通过 ajax 调用 Magento .phtml 文件

> ID：15747071
> 
> 赞同：1
> 
> 时间：2013-04-01T16:15:12.487
> 
> 标签：ajax, magento

我有我的自定义 magento 插件。我在产品页面中有图像滑块。我想通过产品页面中的 ajax 调用特定的模板（abc.phtml）文件。有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:24:53.237

在您的控制器中创建这样的代码（这将呈现 AJAX 调用）操作：

```
$html = Mage::getSingleton('core/layout')->createBlock('core/template')
            ->setTemplate('your_module/abc.phtml')->toHtml();
$this->getResponse()->setBody($html); 
```

# sas - 在 SAS 中使用多个变量进行转置

> ID：15747073
> 
> 赞同：3
> 
> 时间：2013-04-01T16:15:30.770
> 
> 标签：sas

在 SAS 中，我将列变量按顺序排列，相应的列变量并排堆叠，如下所示：

```
 id lab1 lab2 lab3 dt1  dt2  dt3  bili1 bili2 bili3 alb1 alb2 alb3
 3  dx   sx   sx   2/04 2/06 3/08 x.x   x.x   x.x   x.x  x.x  x.x 
 4  dx   tx   tx   5/05 3/06 9/06 x.x   x.x   x.x   x.x  x.x  x.x 
```

我想转换为以下长格式：

```
 id lab dt   bili alb
 3  dx  2/04 x.x  x.x
 3  sx  2/06 x.x  x.x
 3  sx  3/08 x.x  x.x
 4  dx  5/05 x.x  x.x
 4  tx  3/06 x.x  x.x
 4  tx  9/06 x.x  x.x 
```

但我似乎无法正确地操纵这个，把

```
var lab1-lab3 dt1-dt3 bili1-bili3 alb1-alb3; 
```

实际上这和之间没有区别

```
var lab1-alb3 
```

所以每一列都是独立处理的，但我想对这些进行聚类，以便 SAS 知道它们在长数据集中有单独的列。一些论坛建议我只执行几次转置并合并输出数据。这看起来不优雅、效率低下、难以阅读和乏味......比 SAS 本身更是如此。是否没有语法可以在单个数据或 proc 步骤中执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T16:47:32.677

如果没有大量额外的工作，您将无法使用 PROC TRANSPOSE 到达那里。大多数时候，从宽到长在数据步骤中更容易处理。在这种情况下，您可以使用数组非常轻松地做到这一点。

```
data have;
input id lab1 $ lab2 $ lab3 $ dt1 $ dt2 $ dt3 $ 
      bili1 $ bili2 $ bili3 $ alb1 $ alb2 $ alb3 $;
datalines;
 3  dx   sx   sx   2/04 2/06 3/08 x.x   x.x   x.x   x.x  x.x  x.x 
 4  dx   tx   tx   5/05 3/06 9/06 x.x   x.x   x.x   x.x  x.x  x.x 
;;;;
run;

data want;
set have;
array labs lab1-lab3;
array dts dt1-dt3;
array bilis bili1-bili3;
array albs alb1-alb3;

do _t = 1 to dim(labs);
  lab = labs[_t];
  dt  = dts[_t];
  bili= bilis[_t];
  alb = albs[_t];
  output;
end;
keep id lab dt bili alb;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:46:58.597

您可以在单个数据步骤中执行此操作，并包含在宏中，如下所示：

```
%macro trans;

data want(keep = id lab dt bili alb);
set have;
%do i = 1 %to 3;
    lab = lab&i;
    dt = dt&i;
    bili = bili&i;
    alb = alb&i;
    output;
%end;
run;

%mend;

%trans; run; 
```

# vb.net - 如何使用坐标填充 datagridview 中的单元格

> ID：15747076
> 
> 赞同：0
> 
> 时间：2013-04-01T16:15:40.677
> 
> 标签：vb.net

我需要知道如何在 Visual Basic 中的 datagridview 中仅使用行和列坐标填充单个单元格。因此，例如我有行坐标：10 和列坐标：10 并且在该单元格内我想写你好，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:47:33.190

你可以试试下面这样，它会帮助你..

```
//It sets the value "Hello" to 10th Rows 10th Cell

DataGridView1.Rows(10).Cells(10).Value = "Hello" 
```

# python - 从 Python 中的第二个列表创建具有多个对象实例的单个列表

> ID：15747078
> 
> 赞同：5
> 
> 时间：2013-04-01T16:16:00.723
> 
> 标签：python, list-comprehension

我正在尝试从包含图块描述的 xml 文件构建棋盘游戏的图块列表。xml 文件描述了每种磁贴类型以及该类型的磁贴数量。

到目前为止，我已经获得了以下代码，它创建了一个列表，其中每种瓷砖类型都只有一种：

```
 [Tile(el.id) for el in <tile descriptions>] 
```

我想创建一个包含每个图块的适当数量的列表，例如：

```
 [Tile(el.id) * <el.n_tiles> for el in <tile descriptions>] 
```

是否有一个优雅的单线来做到这一点，还是我需要通过为每种瓷砖类型创建一个列表然后连接来长期完成它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:19:05.493

怎么样：

```
[Tile(el.id) for el in <tile descriptions> for _ in range(el.n_tiles)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T16:24:22.903

您发布的代码将多次重复*相同的内部列表：*

```
[Tile(el.id) * <el.n_tiles> for el in <tile descriptions>] 
```

相反，使用内部列表推导：

```
[[Tile(el.id) for i in range(<el.n_tiles>)] for el in <tile descriptions>] 
```

如果目标是创建单个串联列表，则可以使用带有嵌套 for 循环的列表推导：

```
[Tile(el.id) for el in <tile descriptions> for i in range(<el.n_tiles>)] 
```

当您稍微高级一点时，可以使用[itertools.chain.from_iterable](http://docs.python.org/2.7/library/itertools.html#itertools.chain.from_iterable)实现相同的效果（列表展平） 。

希望这可以帮助。快乐的游戏:-)

# nsis - 为什么 NSIS 中没有删除临时文件？

> ID：15747079
> 
> 赞同：0
> 
> 时间：2013-04-01T16:16:02.630
> 
> 标签：nsis

我比较了两个文件并将不匹配的值存储在临时文件中。我已经提到了这个[链接](http://nsis.sourceforge.net/Replacing_Lines_in_a_Text_File)。之后从临时文件中读取值并替换为原始文件。最后我试图删除临时文件。除了临时文件删除之外，所有过程都运行良好。

我使用了以下代码：

```
page custom twofilecompare
page custom originalwrite
        Function twofilecompare
        FileOpen $0 "$INSTDIR\backup.properties" "r"
        FileOpen $1 "$INSTDIR\orginal.properties" "r"
        #IfFileExists "$INSTDIR\temp.properties" 0 +1 
        #Delete /REBOOTOK "$INSTDIR\temp.properties"
        FileOpen $R0 "$INSTDIR\temp.properties" "w"
        ClearErrors             

        loop:
            FileRead $0 $2
            ${If} $2 ==  "$\r$\n"
            Goto loop
            ${EndIf}
            FindClose $0

            FileRead $1 $3
            IfErrors done         
            strcmp $2 $3 loop here
            here: 
               FileWrite $R0 $2
               Goto loop

        done:
            FileClose $0                                    
            FileClose $1
            FileClose $R0
        FunctionEnd

       Function originalwrite
    IfFileExists "$INSTDIR\temp.properties" 0 filenotfound
    FileOpen $0 "$INSTDIR\temp.properties" "r"
    loop:
            FileRead $0 $1
            IfErrors done
            //do some stuff

    done:
        **IfFileExists "$INSTDIR\resource\temp.properties" 0 filenotfound
        Delete /REBOOTOK "$INSTDIR\temp.properties"**   
    filenotfound:
    MessageBox MB_OK "file not found"
    FunctionEnd 
```

即使我也无法手动修改这三个文件[temp，backup，original]。如果我修改并单击保存提示消息，显示为**“请检查此文件是否打开了另一个程序”** ，我也使用了文件使用完成后关闭的文件。即使我也尝试过这段代码

```
Function .onInstSuccess
IfFileExists "$INSTDIR\temp.properties" notfound
MessageBox MB_OK "file exists"
Delete /REBOOTOK $INSTDIR\temp.properties
Goto done
notfound:
MessageBox MB_OK "file not found"
Done:
MessageBox MB_OK "file deleted"
FunctionEnd 
```

但是临时文件没有被删除。如何删除临时这个文件？

有人能帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:05:14.493

缺少原始写入功能`FileClose`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:03:47.780

您是否在脚本中请求管理员权限？

```
RequestExecutionLevel admin 
```

如果您尝试编辑需要管理员权限才能编辑的文件（例如 C:\Program Files 中的文本文件），某些应用程序（如 Notepad++）会显示“请检查此文件是否打开了另一个程序”消息。

# c - 在命令行上为 C 程序使用 OSX 泄漏？

> ID：15747084
> 
> 赞同：4
> 
> 时间：2013-04-01T16:16:35.693
> 
> 标签：c, xcode, macos

谁能给我任何简单的语法来运行 OSX 的`leaks`工具来检测编译的 C 程序中的内存泄漏？我在 10.8，所以我遇到了严重的兼容性问题`valgrind`。

我读过的关于 XCode 的泄漏/仪器的大部分内容都涉及在 XCode 环境中——这不是我想为我的 C 程序做的事情。

有没有办法可以从命令行对已编译的 C 程序运行泄漏？如果没有，在等待更新版本的 valgrind 时，我是否可以使用其他可靠的替代方案，或者我是否必须使用 Linux 发行版设置 VM？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-11T20:03:25.677

通过将其添加到命令行的开头来使用该`iprofiler`工具（[manpage ）：](http://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/iprofiler.1.html)

```
iprofiler -leaks -d $HOME/tmp 
```

（`$HOME/tmp`您希望在哪里写入结果）。

*然后，您可以使用Instruments*打开生成的`.dtps`包以检查泄漏（或执行的其他 4 个检查中的任何一个）。*`iprofiler`*

 *如果您使用的是*clang*`-O3` ，则同时使用and进行编译`-g`（因为*clang*不支持`-pg`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-24T09:17:19.633

这似乎有效（macOS Catlina 10.15.6）：

```
cd /usr/local/lib
ln -s $(xcode-select -p)/usr/lib/libLeaksAtExit.dylib
leaks --atExit -- ./a.out 
```

完成后最好删除符号链接。

参考：

*   [https://medium.com/@dr_rost/detect-memory-leaks-on-macos-4cf257529aa](https://medium.com/@dr_rost/detect-memory-leaks-on-macos-4cf257529aa)
*   [https://www.reddit.com/r/macprogramming/comments/7iao6d/using_the_leaks_command_on_a_cc_executable/](https://www.reddit.com/r/macprogramming/comments/7iao6d/using_the_leaks_command_on_a_cc_executable/)*

# silverlight - Resharper 测试运行程序：无法加载文件或程序集“System.Windows”

> ID：15747085
> 
> 赞同：2
> 
> 时间：2013-04-01T16:16:45.137
> 
> 标签：silverlight, visual-studio-2012, nunit, resharper

我目前在运行单元测试（Nunit）时遇到了 VS2012 和 Resharper 7.1.2 的问题。

完整的错误信息在这里：

> Unit Test Runner 未能运行测试：
> 
> System.IO.FileNotFoundException：无法加载文件或程序集“System.Windows，版本=5.0.5.0，Culture =neutral，PublicKeyToken=7cec85d7bea7798e”或其依赖项之一。该系统找不到指定的文件。”

我已经上传了 Resharper 的最新版本（7.1.2），我尝试使用 vs2010，但问题仍然存在。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:12:10.487

此问题已知 ( [http://youtrack.jetbrains.com/issue/RSRP-339987](http://youtrack.jetbrains.com/issue/RSRP-339987) )，可在此处下载预发布版本 7.1.3 ( [http://download.jetbrains.com/resharper/ReSharperSetup.7.1。 3000.1964.msi](http://download.jetbrains.com/resharper/ReSharperSetup.7.1.3000.1964.msi)）。

这个版本目前不是官方的。

# r - R中存在哪些标准化方法？

> ID：15747086
> 
> 赞同：-1
> 
> 时间：2013-04-01T16:16:45.827
> 
> 标签：r, statistics, normalization

我正在处理非正态分布的数据。我应用了常用方法：对数和平方根来转换数据，然后用 ARIMA 模型对其进行处理，以便进行预测。

我尝试过的是：

```
set.seed(123)
y<-rexp(200)

yl<-log(y+1)
shapiro.test(yl)

trans<-(y-mean(y))/sd(y)
shapiro.test(trans) 
```

这种方法未能通过正态性测试，我想问一下是否还有其他选项可以将数据转换为 R 中的正常数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T18:46:12.467

您可以尝试使用具有*BoxCox.lambda*函数来处理 BoxCox 转换的**预测包。**缩放/重新缩放是自动完成的。例子：

 *```
 require(forecast)
 y <- ts(rnorm(120,0,3) + 20*sin(2*pi*(1:120)/12), frequency=12) + runif(120)
 lambda <- BoxCox.lambda(y) # should check if the transformation is necessary
 model <- auto.arima(y, lambda = lambda)
 plot(forecast(model)) 
```*

# javascript - 用于验证邮政编码和检查无效字符的正则表达式

> ID：15747087
> 
> 赞同：2
> 
> 时间：2013-04-01T16:16:55.667
> 
> 标签：javascript, regex

我正在尝试验证邮政编码的输入，现在这个邮政编码应该适用于美国、加拿大、英国、所有国家，但忽略任何特殊字符，所以我尝试了，如果通过了，首先检查无效字符然后我检查邮政编码要么是美国，要么不仅仅是为了确保有有效字符并且不超过 8 个（只要现在是美国，它们之间的空格就可以了（其中包括 - 用于 5 + 4）

我遇到的问题是，例如 11215 对于有效字符验证返回为假，而 11215@@ 也返回假。

这是我的正则表达式：

```
var reg1 = /^[\^$%@!#&\*:<>\?\/\\~\{\}\(\)\+|]+$/;
var reg2 = /(^\d{5}$)|(^\d{5}-\d{4}$)|(([a-z0-9]{8})*$)/

var isOk = reg1.test("11215"); // returns false!
if(isOk)
{
   isOk = isOk && reg2.test("11215");
}

var isOk2 = reg1.test("11215@@"); // returns false also!
if(isOk2)
{
   isOk2 = isOk2 && reg2.test("11215@@");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:23:09.070

除非您的字符串完全由“坏字符”组成，否则对“坏字符”的测试`reg1`将始终如此。`false`我不认为这是你想要的行为。

```
var matchBad = /[^\s\da-z\-]/i;
// Match all non-whitespace, non-digit, non-alpabet, non-hyphen
if (false === matchBad.test("11215")) { // no bad chars detected
    console.log('pass!');
    // continue checking validity..
} else { // bad chars detected
    console.log('fail!);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:22:57.767

您的第一个正则表达式正在测试*整个*字符串是否包含这些字符。如果你想要包含，删除`^`和`$`表示你的正则表达式的开始和结束：

```
var reg1 = /[\^$%@!#&\*:<>\?\/\\~\{\}\(\)\+|]/; 
```

这可能只是问题的一部分，但它应该能让你到达某个地方。注意我还删除了 + 因为它真的只需要匹配一个字符来检测坏字符。

还有另一个设计说明。与模式完全匹配的正则表达式应该足以测试这一点。尽管我对第三种类型的 zip 不太熟悉，但您可能想让它捕获整个字符串（使用`^`and `$`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T15:46:20.770

Javascript应该如下所示

```
<script type="text/javascript">

    function IsValidZipCode(zipcode) {
        var isValid = /^[0-9]{5}(?:-[0-9]{4})?$/.test(zipcode);
        if (!isValid){
       alert('Invalid ZipCode');
      document.getElementById("zipcode").value = "";
    }
    }
</script> 
```

邮政编码文本应该是

```
<input id="zipcode" class="zipcode" type="text" placeholder="Your Zipcode?" name="zipcode" onchange="IsValidZipCode(this.form.zipcode.value)" required > 
```

# bash - Bash/Sed/Awk - 再次从列 ==x 解析 CSV 直到列==x

> ID：15747098
> 
> 赞同：0
> 
> 时间：2013-04-01T16:17:51.720
> 
> 标签：bash, sed, awk

我有一组相当大的 CSV 文件需要解析。其中大部分都非常简单，但是我有一些带有嵌入对象的“组”对象，我需要正确提取这些对象。

该文件看起来像这样

```
Test_GroupA,Group,-,-,-,-,NodeA,,-,
,,,,,,NodeB,,,
,,,,,,NodeC,,,
,,,,,,NodeD,,,
,,,,,,NodeE,,,
Test_GroupB,Group,-,-,-,-,NodeA,,-,
,,,,,,NodeB,,,
,,,,,,NodeC,,,
,,,,,,NodeX,,,
,,,,,,NodeE,,,
,,,,,,NodeF,,, 
```

所以，正如你所看到的，我需要一些类似的东西：

```
 awk -F"[,|]" '{if ($2=="Group")
then - pseudo code->
print "create group",$1
print "add member in $7 to group found in $1 of first row"
continue until you reach next $2=="Group"), then loop 
```

这让我非常困惑:)

编辑:: 似乎很多值有些虚假，并且在它们为空白时包含“-”，而不仅仅是 ,,

就像是

```
 sed 's/\,\-\,/\,\,/g' 
```

我认为应该替换它们，但是我认为我需要一个前导通配符。

新示例：

```
grp-ext-test-test,Group,-,-,-,-,Net_10.10.10.10,,-,
,,,,,,Net_10.101.10.10,,,
,,,,,,ws-ext-test-10.102,,,
,,,,,,ws-ext-test-10.103,,,
,,,,,,ws-ext-test-10.104,,,
,,,,,,ws-ext-test-10.105,,,
,,,,,,ws-ext-test-10.106,,,
,,,,,,ws-ext-test-10.107,,,
,,,,,,ws-ext-test-10.108,,,
,,,,,,ws-ext-test-10.108,,, 
```

在其上运行新字符串只会产生：

```
create group grp-ext-test-test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:36:18.253

您可以尝试这样的事情并根据需要进行调整..

```
awk -F, '$2=="Group"{g=$1; print "create group",g}{print "add " $7 " to " g}' file 
```

输出：

```
create group Test_GroupA
add NodeA to Test_GroupA
add NodeB to Test_GroupA
add NodeC to Test_GroupA
add NodeD to Test_GroupA
add NodeE to Test_GroupA
create group Test_GroupB
add NodeA to Test_GroupB
add NodeB to Test_GroupB
add NodeC to Test_GroupB
add NodeX to Test_GroupB
add NodeE to Test_GroupB
add NodeF to Test_GroupB 
```

---edit--- 要检查 $7 的内容是否有效，您可以尝试以下操作：

```
awk -F, '$2=="Group"{ g=$1; print "create group",g } $7!="-"{print "add " $7 " to " g}' file 
```

# android - Android java.lang.IllegalStateException：结果未挂起时调用

> ID：15747101
> 
> 赞同：1
> 
> 时间：2013-04-01T16:18:02.520
> 
> 标签：android

我有一个注销功能。因此，当用户注销时，我想中止 BroadcastReceiver。但是在标题中出现错误。我究竟做错了什么？

```
public static void logout(Context context, String empid)
{
    try
    {
        Log.d("Testing", "TRY 2  LOGOUT me " + empid );
        try
        {
            Log.d("Testing", "TRY handle logout");
            db = new DbAdapter_User(context);
            db.open();
            db.handleLogout();
            db.close();
        }
        catch(Exception e)
        {
            Log.d("Testing", "CATCH handlelogout " + e.toString());
        }
        Log.d("Testing", "When logout class is " +  context.getClass());
        if (!context.getClass().equals(LogIn.class))
        {
             Log.d("Testing", "In IF When logout class is " +  context.getClass());
            context.startActivity(new Intent(context, LogIn.class).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));
        }
        Log.d("Testing", "logout: setting Global variables ");
        ((GlobalMobileVianet)context.getApplicationContext()).setUserId("000000");
        ((GlobalMobileVianet)context.getApplicationContext()).setPassword("");
        Log.d("Testing", "logout: DONE setting Global variables ");
        try
        {
            Log.d("Testing", "TRY session manager aborted");
            SessionManager sessionManager = new SessionManager();
            sessionManager.abortBroadcast();
         }
        catch(Exception e)
        {
            Log.d("Testing", "CATCH session manager aborted " + e.toString());
        }
         LogoutNotification(context);

    }
    catch (Exception e)
    {
        Log.d("Testing", "CATCH 2  LOGOUT me " + e.toString() );
    }
} 
```

# zurb-foundation - Foundation 4 的容器 div 和背景图像

> ID：15747103
> 
> 赞同：0
> 
> 时间：2013-04-01T16:18:05.100
> 
> 标签：zurb-foundation

刚刚切换到Foundation 4。我想为身体放置纹理背景图案，为包含所有元素的容器放置另一个纹理背景。无法找出如何以正确的方式创建这个。

在纯 html+css 中，我将创建容器元素。但在 Foundation4 中，它将具有 100% 的宽度和重叠的主体背景。

```
<div class="container">
    <div class="row">
    ...
    </div>
    <div class="row">
    ...
    </div>
</div> 
```

如果我将 .row 类添加到容器中，我会得到想要的结果，但是在移动设备上会添加令人反感的水平滚动。...

如何在 F4 中构建这个简单的布局？

我可以设置所有 .row 元素的样式，但它会为每个元素使用个人背景，这是不受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:22:01.567

看看我在这里给出的关于 CSS 和背景元素的答案：[How to use background images in Foundation](https://stackoverflow.com/questions/15751813/zurb-foundation-changing-padding-between-columns)

# php - 为什么两个单词相同时不匹配？

> ID：15747108
> 
> 赞同：0
> 
> 时间：2013-04-01T16:18:18.720
> 
> 标签：php, arrays, string

我必须比较两个词。第一个词是“模”，另一个是“模”。我试图替换重音，然后我意识到在调用替换重音的方法后单词从未改变。我从两个数组中得到第一个单词。来自名为**tipo**的反序列化数组的第一个数组。

```
<? 
$tipo = unserialize(TIPO); 
$estado = unserialize(ESTADO);  ?> 
```

第二个数组来自数据库结果，**$prop['propiedad_tipo']** **propiedad_tipo**是 int 类型。

```
$tipo_dato = (@$prop['propiedad_tipo'])?$tipo[ $prop['propiedad_tipo'] ]:''; 
```

通过这个值，我可以访问“ **tipo** ”数组中的索引，这就是我得到“módulo”这个词的地方。

当我这样做时

```
if($tipo_dato == 'módulo')
  $tipo_dato = 'modulo'; 
```

什么也没发生:(请帮忙。

附言。对不起我的英语不好 ：（

-- 也许这有帮助

```
$tipo_dato = (@$prop['propiedad_tipo'])?strtolower($tipo[ $prop['propiedad_tipo'] ]):''; 
  echo serialize($tipo_dato); echo '<br>'.serialize('módulo'); 
```

结果是 s:13:"módulo"; s:7:"模块";

——我发现了大错误。当我序列化我使用的数组“TIPO”时，我将 `m&oacute;dulo` 其更改为 módulo，然后一切正常......非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:23:15.960

使用

```
if($tipo_dato=='modulo')
    $tipo_dato='modulo'; 
```

没有意义。它检查值是否为模数，然后分配模数。将其更改为

```
if($tipo_dato!='modulo')
    $tipo_dato='modulo'; 
```

或将其更改为

```
if($tipo_dato=='modulo')
     #do some other thing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:32:35.723

发现这看起来对您需要的东西非常有用：

```
function toASCII( $str )
{
    return strtr(utf8_decode($str), 
        utf8_decode(
        'ŠŒŽšœžŸ¥µÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýÿ'),
        'SOZsozYYuAAAAAAACEEEEIIIIDNOOOOOOUUUUYsaaaaaaaceeeeiiiionoooooouuuuyy');
} 
```

取自[如何去除重音符号并将字母转换为“普通”ASCII 字符？](https://stackoverflow.com/questions/3542717/how-to-transliterate-accented-characters-into-plain-ascii-characters)

然后你可以使用：

```
$tipo_dato = toASCII($tipo_dato); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:44:13.820

它可能是通过数据库检索价值的问题，因此试图找到 $tipo_dato 通过数据库获得的价值

```
 $tipo_dato = (@$prop['propiedad_tipo'])?$tipo[ $prop['propiedad_tipo'] ]:''; 
     echo "$tipo_dato"; 
```

我认为这只是交换概念，其中一种方法可以尝试这个简单的代码。

```
//initial check the value 
echo "$uid<br>";
echo "$bid";

//after the swaping the value 
$d=$uid;
$uid="$bid";
$bid="$d";

//final outcome
echo "$uid<br>";
 echo "$bid";

  ?> 
```

# ruby-on-rails - Rails 2.x 服务器无法启动

> ID：15747111
> 
> 赞同：0
> 
> 时间：2013-04-01T16:18:32.850
> 
> 标签：ruby-on-rails, ruby

我有一个 ruby​​ on rails 2.x 应用程序，并试图通过在应用程序的脚本目录中运行“script -e production”来启动本地服务器。我似乎无法启动服务器。我已经卸载了我所有的 gem 并使用“bundle install”重新安装了它们。以下错误对我来说实际上都不是致命的。有人可以解释为什么服务器无法加载吗？我尝试启动服务器的输出如下：

```
--[dps@neve]-[/tmp/asapnew/asap/script]--
> ./server -e production
/usr/lib/ruby/gems/1.9.1/gems/activesupport-2.3.14/lib/active_support/inflector.rb:3:in `<top (required)>': iconv will be deprecated in the future, use String#encode instead.
=> Booting WEBrick
=> Rails 2.3.14 application starting on http://0.0.0.0:3000
config.load_paths is deprecated and removed in Rails 3, please use autoload_paths instead
config.load_paths= is deprecated and removed in Rails 3, please use autoload_paths= instead
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /usr/lib/ruby/gems/1.9.1/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
Please switch to Ruby 1.9's standard CSV library.  It's FasterCSV plus
support for Ruby 1.9's m17n encoding engine.
--[dps@neve]-[/tmp/asapnew/asap/script]--
> 
```

**编辑：**这是我当前的 gem 版本（由捆绑程序安装）。

```
--[dps@neve]-[/tmp/asapnew/asap]--
> bundle list
Gems included by the bundle:
  * actionmailer (2.3.14)
  * actionpack (2.3.14)
  * activerecord (2.3.14)
  * activeresource (2.3.14)
  * activesupport (2.3.14)
  * builder (3.0.0)
  * bundler (1.3.4)
  * configatron (2.6.3)
  * declarative_authorization (0.4.1)
  * fastercsv (1.5.3)
  * haml (3.0.4)
  * hoptoad_notifier (2.4.7)
  * liquid (2.0.0)
  * memcache-client (1.8.3)
  * mysql2 (0.2.18)
  * newrelic_rpm (2.13.4)
  * nokogiri (1.4.1)
  * paperclip (2.3.1.1)
  * pdfkit (0.5.2)
  * prawn (0.8.4)
  * prawn-core (0.8.4)
  * prawn-layout (0.8.4)
  * prawn-security (0.8.4)
  * preferences (0.4.2)
  * rack (1.1.3)
  * rails (2.3.14)
  * rake (0.8.7)
  * ruby_parser (2.0.6)
  * sanitize (1.2.1)
  * searchlogic (2.4.9)
  * sexp_processor (3.2.0)
  * slim_scrooge (1.0.11)
  * uuidtools (2.1.1)
  * version_bumper (0.3.0)
  * will_paginate (2.3.12)
  * yamler (0.1.0)
--[dps@neve]-[/tmp/asapnew/asap]--
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:27:17.960

我相信这是由于 mysql 和 mysql2 gem 之间的冲突而引起的。我从我的 Gemfile 中注释掉了 mysql2 gem，并明确添加了 mysql；这似乎解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:23:51.097

看起来您在尝试使用 Rails 2 时对 Rails 3 有 gem 依赖。您使用的是什么 gem？您可能必须深入研究每个版本，并更具体地了解要使用的版本（以确保它与 Rails 2 一起使用）。

# java - 如何处理在 Android 的小屏幕尺寸上截断的大 textView？

> ID：15747119
> 
> 赞同：0
> 
> 时间：2013-04-01T16:19:00.517
> 
> 标签：java, android, xml, android-layout

我有一个非常适合我的 Galaxy Nexus 的 textView，它占据了整个屏幕。我正在低分辨率设备上试用该应用程序，但我的文本被截断了。缓解这种情况的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:20:13.480

将其粘贴在 ScrollView 中。

编辑：如果你不能使用 ScrollView，这样的事情[可能](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)会有所帮助。基本上，您将扩展 TextView 并且每当视图大小发生变化时它都会重新计算文本大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:26:48.827

如果您不能放入 ScrollView 或 2 行，另一种选择是为较低的分辨率使用不同的较小文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:52:34.097

您可以通过使用 \n 在 java 上执行此操作，它将获得新行。它自动看起来像滚动视图。

# php - php 使用推特登录

> ID：15747122
> 
> 赞同：0
> 
> 时间：2013-04-01T16:19:13.463
> 
> 标签：php, twitter, oauth

我尝试使用 Epi twitter 进行登录，这是代码

```
 $consumerKey = $this->consumerKey ;
    $consumerSecret = $this->consumerSecret;        
    include 'application/libraries/twitter-oauth/EpiCurl.php';
    include 'application/libraries/twitter-oauth/EpiOAuth.php';
    include 'application/libraries/twitter-oauth/EpiTwitter.php';
    error_reporting(E_ALL);

    $Twitter = new EpiTwitter($consumerKey, $consumerSecret);

    if(isset($_GET['oauth_token']) || (isset($_COOKIE['oauth_token']) && isset($_COOKIE['oauth_token_secret'])))
    {
              // process
    }
    elseif(isset($_GET['denied']))
    {
        // user denied access
        echo 'You must sign in through twitter first';
        exit;
    }
    else
    {
        // user not logged in
        echo 'You are not logged in';
        exit;
    } 
```

但总是响应是“你没有登录 ini”，尽管我已经在其他页面上登录了 twitter。我的代码有问题吗？

感谢任何帮助。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:26:25.303

当您对用户进行身份验证时，请保存他们的 authToken 和 authTokenSecret。无论是在会话/数据库/cookie 中，都由您决定。

然后，当您创建 EpiTwitter 类的新实例时，传递这两个新参数会膨胀。

```
$Twitter = new EpiTwitter($consumerKey, $consumerSecret, $userAuthToken, $userTokenSecret); 
```

查看您正在调用的 __construct 函数的参数，

```
 public function __construct($consumerKey = null, $consumerSecret = null, $oauthToken = null, $oauthTokenSecret = null)
  {
    parent::__construct($consumerKey, $consumerSecret, self::EPITWITTER_SIGNATURE_METHOD);
    $this->setToken($oauthToken, $oauthTokenSecret);
  } 
```

# c - K&R 练习 2-7 中的位反转功能

> ID：15747123
> 
> 赞同：4
> 
> 时间：2013-04-01T16:19:14.753
> 
> 标签：c, bit-manipulation, kernighan-and-ritchie

*C 编程语言的*练习 2-7 ：

> 编写一个函数`invert(x,p,n)`，返回从反转位置开始`x`的`n`位`p`（即，1 变为 0，反之亦然），其他保持不变。

我理解这样的问题：我有 182 是`101(101)10`二进制的，括号中的部分必须反转而不改变其余部分。返回值应该是`10101010`then，即十进制的 170。

这是我的尝试：

```
#include <stdio.h>

unsigned int getbits(unsigned int bitfield, int pos, int num);
unsigned int invert(unsigned int bitfield, int pos, int num);

int main(void)
{
    printf("%d\n", invert(182, 4, 3));
    return 0;
}

/* getbits: get num bits from position pos */
unsigned int getbits(unsigned int bitfield, int pos, int num)
{
    return (bitfield >> (pos+1-n)) & ~(~0 << num);
}

/* invert: flip pos-num bits in bitfield */
unsigned int invert(unsigned int bitfield, int pos, int num)
{
    unsigned int mask;
    unsigned int bits = getbits(bitfield,pos,num);

    mask = (bits << (num-1)) | ((~bits << (pos+1)) >> num);

    return bitfield ^ mask;
} 
```

这似乎是正确的（对我来说），但`invert(182, 4, 3)`输出`536870730`. `getbits()`工作正常（直接来自书中）。我写下了我分配给的表达式中发生的事情`y`：

```
(00000101 << 2) | ((~00000101 << 5) >> 3)    -- 000000101 is the part being flipped: 101(101)10
       00010100 | ((11111010 << 5) >> 3)
       00010100 | (01000000 >> 3)
       00010100 | 00001000
= 00011100

  10110110 (182)
^ 00011100
----------
= 10101010 (170) 
```

应该是正确的，但事实并非如此。我发现这是出错的地方：`((~xpn << (p+1)) >> n)`. 我不明白怎么做。

另外，我不知道这段代码有多通用。我的首要任务是让这个案子运作起来。也欢迎在这个问题上提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:46:42.843

`((1u<<n)-1)``n`是在 RHS 处带有“1”位的位掩码。`<<p`将此块的`p`位置向左移动。（`(p-n)`如果你想从左边数，你应该用而不是 p 移动）。

```
return val  ^ (((1u<<n)-1) <<p) ; 
```

当 p 大于 wordsize 时仍然存在问题（移动超过 wordsize 是未定义的），但这应该是调用者的责任;-)

对于`101(101)10`p=2 和 n=3 的示例：

```
1u<<n               := 1000
((1u<<n)-1)         := 0111
(((1u<<n)-1) <<p) := 011100
original val    := 10110110
val ^ mask      := 10101010 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:46:52.573

我认为您在其中一个班次中遇到了一个不一样的问题（这只是一种预感，我不完全确定）。不过，我会保持简单（我假设索引位置`p`从 LSB 开始，即`p`=0 是**LSB**）：

```
unsigned int getbits(unsigned int x, int p, int n) {
  unsigned int ones = ~(unsigned int)0;
  return x ^ (ones << p) ^ (ones << (p+n));
} 
```

编辑：如果您需要 p=0 作为**MSB**，只需反转班次（这可以正常工作，因为`ones`定义为`unsigned int`）：

```
unsigned int getbits(unsigned int x, int p, int n) {
  unsigned int ones = ~(unsigned int)0;
  return x ^ (ones >> p) ^ (ones >> (p+n));
} 
```

注意：在这两种情况下 if `p < 0`、`p >= sizeof(int)*8`或`p+n < 0`的`p+n >= sizeof(int)*8`结果`getbits`是未定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:14:33.513

看看 Steve Summit 的[“Introductory C programming”](http://www.eskimo.com/~scs/cclass/cclass.html)和 Ted Jensen 的[“At tutorial on pointers and arrays in C”](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)。他们所涵盖的语言与今天的 C 语言有些不同（编程习惯也在演变，机器*更大*，真正的男人不再编写汇编程序），但他们所说的大部分内容在今天和当时一样真实。肖恩安德森的[“Bit twiddling hacks”](http://graphics.stanford.edu/~seander/bithacks.html#ValueInWord)会让你的眼睛凸出。保证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T16:48:54.707

我发现我的实现中出了什么问题（除了`num`从错误的方向计数）。现在我已经了解了更多关于比特的知识，之后似乎相当明显。

当一个 1 位左移，超出位域的范围时，它被扩展。

```
 1000 (8) << 1
== 10000 (16) 
```

`bitfield << n`乘以`bitfield`2`n`倍。我的表达式`((~bits << (pos+1)) >> num)`分别有 5、4 和 3 作为`bits`、`pos`和的值`num`。我将一个几乎 32 位 int 大小的数字乘以 2 两次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-19T03:18:59.577

我的功能怎么样？我觉得很好。

```
unsigned invert(unsigned x,int p,int n)
{
     return (x^((~(~0<<n))<<p+1-n));
} 
```

# php - 将多组字段中的数据传递到一个页面以进行审核和确认

> ID：15747126
> 
> 赞同：0
> 
> 时间：2013-04-01T16:19:21.770
> 
> 标签：php, jquery, mysql

我对 jquery 很陌生，所以任何帮助都将不胜感激。我正在使用 jquery 1.8.3 和 ui 1.9.2。我在页面中包含了 jquery ui 选项卡，并且在其中一个选项卡中，我有多行字段，用户可以填写并提交到数据库。

PHP 代码（new_member.php）：

```
<form action = "" method = "POST">
<table id = "member">
    <thead>
        <tr>
            <th>Gender</th>
            <th>Birthday</th>
            <th>Name</th>
            <th>Surename</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><select name = "gender"><option value = "male">Male</option><option value = "female">Female</option></select></td>
            <td><input class = "date" name = "bdate" type = "text"></td>
            <td><input class = "field_text" type = "text" name = "name"></td>
            <td><input class = "field_text" type = "text" name = "surename"></td>
        </tr>
        <tr>
            <td><select name = "gender"><option value = "male">Male</option><option value = "female">Female</option></select></td>
            <td><input class = "date" name = "bdate" type = "text"></td>
            <td><input class = "field_text" type = "text" name = "name"></td>
            <td><input class = "field_text" type = "text" name = "surename"></td>
        </tr>
        <tr>
            <td><select name = "gender"><option value = "male">Male</option><option value = "female">Female</option></select></td>
            <td><input class = "date" name = "bdate" type = "text"></td>
            <td><input class = "field_text" type = "text" name = "name"></td>
            <td><input class = "field_text" type = "text" name = "surename"></td>
        </tr>
    </tbody>
</table>
<input id="save" type="button" name="save" value = "Save"><br>
</form> 
```

然后我使用 jquery 检查空格和警告。如果所有检查都正常，我如何将数据传递到要求用户在保存到数据库之前查看的 php 页面？任何方向将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:25:22.223

改变

```
<form action = "" method = "POST"> 
```

到

```
 <form action = "actionpage.php" method = "POST"> 
```

在 actionpage.php 中使用 POST 获取值：-

```
$gender= $_POST['gender'];
$name= $_POST['name'];
and so on............... 
```

现在回显此信息以将其显示给用户并包括 2 个按钮“确认”和“取消”。如果用户单击确认将其存储在数据库中，则将其重定向回表单页面。

# javascript - 组织我的 JavaScript 函数库

> ID：15747129
> 
> 赞同：4
> 
> 时间：2013-04-01T16:19:44.387
> 
> 标签：javascript

随着时间的推移，我创建了一堆不同的 JavaScript 函数。它们中的大多数是静态函数，并且执行诸如修改日期的显示、从数组创建选择菜单 HTML 等操作。

我目前将它们全部放在一个名为“general.js”的文件中，该文件又由我的 HTML 页面直接调用，它们每个看起来都像：

```
function modifyDate(data){....}
function makeArray(arr){....} 
```

然后我将它们用作：

```
alert(modifyDate("12/14/2013")); 
```

我认为这是一个坏主意，因为它可能与其他库发生冲突。相反，我正在考虑以下内容：

```
myLibrary={};
myLibrary.modifyDate= function(data){....}
myLibrary.makeArray= function(arr){....} 
```

他们将它们用作：

```
alert(myLibrary.modifyDate("12/14/2013")); 
```

请注意，我正在编造这个。请提供建议，我应该如何最好地组织我的 JavaScript 库。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T16:22:37.937

您所描述的称为**命名空间**，通常被认为是一个好主意。

在这个问题中可以找到更多关于命名空间的讨论：[Why do they use namespaces in javascript?](https://stackoverflow.com/questions/7277130/why-they-use-namespace-in-javascript)

一般来说，命名空间的好处是：

1.  限制全局范围的污染并防止命名冲突
2.  `WindowUtils.getHeight`为您的函数名称提供上下文（例如，我们希望得到不同的结果`MenuUtils.getHeight`）。

因此，您的示例将提供第一个好处，但如果这只是一组抓包功能，则不一定是第二个好处。这是否是一件好事完全取决于您的个人项目以及您要做什么。

请注意，如果您要进行命名空间，您可能需要查看**模块模式**，这是一种保护命名空间范围以允许私有变量/受保护状态的方法。[在这个类似问题的答案中](https://stackoverflow.com/a/247406/1424361)有一个很好的例子， 或者你可以查看这个[关于模块模式的规范博客文章](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)

在您的情况下，模块模式看起来像这样：

```
var myLibrary=(function(){
  var privateVariable; //accessible by your functions but not in the global context    
  return {
    modifyDate: function(data){....},
    myLibrarymakeArray: function(arr){....}
  };
}()) 
```

# node.js - 在猫鼬中指定模式

> ID：15747130
> 
> 赞同：3
> 
> 时间：2013-04-01T16:20:07.853
> 
> 标签：node.js, mongodb, mongoose

我想知道定义此模式的最佳方法是：

![在此处输入图像描述](https://i.stack.imgur.com/I6wHs.png)

Newsitem 只能有 1 个用户 ID 和 1 个任务 ID。一个任务可以属于许多新闻站点。一个用户可以属于许多新闻站点

我已经搜索了示例，但我会说它们不是很多示例。我怎样才能用 mongoose 和 mongodb 做到这一点？我会说用户到newsitem 和Task 到Newsitem 都是一对多的关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:25:32.287

在 Mongodb 中，您可以引用模式中的集合，因此当您 find() newsitem 中的文档时，猫鼬会在用户和任务中执行 find()，因此它不会返回 newsitem 文档，而是返回带有用户和任务的 newsitem。

[猫鼬种群](http://mongoosejs.com/docs/populate.html)

# vb.net - 使用 .net sdk 从 Amazon S3 下载扩展名为 .txt 或通配符的文件？

> ID：15747133
> 
> 赞同：2
> 
> 时间：2013-04-01T16:20:16.310
> 
> 标签：vb.net, amazon-web-services, amazon-s3

有没有办法使用 .Net SDK 一次性从 Amazon S3 的文件夹中下载具有特定扩展名（例如`*.txt`）或通配符字符串（`1234 *.*`）的所有文件，而不是遍历文件列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:43:59.100

您不能一次调用来下载某种模式的所有文件，但您可以在列表对象调用中使用该模式，然后下载单个文件。使用 Amazon.S3.IO 命名空间中的 S3DirectoryInfo 可以简化此操作。

```
S3DirectoryInfo info = new S3DirectoryInfo(s3Client, bucketName);
foreach（info.GetFiles("*.jpg", SearchOption.AllDirectories) 中的 var 文件）
{
    var localPath = Path.Combine(@"C:\Temp\download", file.FullName.Substring(bucketName.Length + 2));
    Console.WriteLine("正在下载：{0}", localPath);
    file.CopyToLocal(localPath);
}
```

# sql - 如果插入失败，SQL Server 存储过程会恢复我的记录

> ID：15747136
> 
> 赞同：4
> 
> 时间：2013-04-01T16:20:22.070
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想知道如果我不能插入，是否有办法回滚删除。

请指教。

像下面的东西。

```
BEGIN TRAN
Delete from MYTABLE where ID=@ID;

INSERT INTO MYTABLE (ID, NAME)
SELECT @ID, NAME

COMMIT 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T16:27:57.020

您可以将两个语句放入一个`TRY....CATCH`块中，并且仅在两个语句都成功时才提交：

```
BEGIN TRANSACTION
BEGIN TRY
    DELETE FROM dbo.MYTABLE WHERE ID=@ID;

    INSERT INTO dbo.MYTABLE (ID, NAME)
       SELECT @ID, NAME

    -- COMMIT only if both DELETE and INSERT worked ....
    COMMIT TRANSACTION
END TRY
BEGIN CATCH
    SELECT 
        ERROR_NUMBER() AS ErrorNumber,
        ERROR_SEVERITY() AS ErrorSeverity,
        ERROR_STATE() AS ErrorState,
        ERROR_PROCEDURE() AS ErrorProcedure,
        ERROR_LINE() AS ErrorLine,
        ERROR_MESSAGE() AS ErrorMessage

    -- ROLLBACK if either DELETE and INSERT failed ....
    ROLLBACK TRANSACTION
END CATCH 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T18:17:42.413

打开[xact_abort](http://msdn.microsoft.com/en-us/library/ms188792.aspx)以在出现任何错误时回滚事务。

```
SET XACT_ABORT ON;
BEGIN TRAN
Delete from MYTABLE where ID=@ID;

INSERT INTO MYTABLE (ID, NAME)
SELECT @ID, NAME

COMMIT TRAN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:36:37.233

这是完成您似乎正在尝试的另一种方法：

```
update myTable
set name = @name
where id = @id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T17:58:09.260

```
BEGIN TRAN

Delete from MYTABLE where ID=@ID;

INSERT INTO MYTABLE (ID, NAME)
SELECT @ID, NAME

if @@error = 0 and @@trancount > 0
    commit
else
    rollback 
```

# vb.net - VB.NET 绘制三角形

> ID：15747138
> 
> 赞同：1
> 
> 时间：2013-04-01T16:20:31.617
> 
> 标签：vb.net, random, geometry, draw

亲爱的论坛成员我必须做一个三角班。

我的问题是我的公共覆盖子 teken 不起作用

**在我的课堂形式中（功能随机）**

```
Private Function RandomStraal() As Int32
    Return 20 + _Random.Next(Me.ClientSize.Width\2)
End Function 
```

**在我的班级表格中（SUB MAAKTRIANGLE）**

```
 Private Sub MaakTriangle(x As Integer, y As Integer)
    Dim tria As New Triangle(RandomKleur, RandomKleur, New Point(x, y), New Point(x, y + RandomStraal()), New Point(x + RandomStraal(), y))
    tria.PenDikte = _Random.Next(1, 6)
    _Tekening.Add(tria)
    '_Tekening.Teken(Me.CreateGraphics)
    Invalidate()
End Sub 
```

**我的班级三角**

```
Friend Class Triangle
    Inherits Figuur

    Public Property Point1() As Point
    Public Property Point2() As Point
    Public Property Point3() As Point

    Private _Pointers() As Point = {Point1, Point2, Point3}

    Public Sub New(penKleur As Color, vulKleur As Color, point1 As Point, point2 As Point, point3 As Point)
        MyBase.New(penKleur, vulKleur)
        Me.Point1 = point1
        Me.Point2 = point2
        Me.Point3 = point3
    End Sub

    Public Overrides Sub Teken( doek As Graphics)
        Using borstel As New SolidBrush(VulKleur),
            pen As New Pen(PenKleur, PenDikte)
            Dim tria As New Rectangle(_Pointers)      **'<--the problem**
            doek.FillPolygon(borstel, tria)
            doek.DrawPolygon(pen, tria)
        End Using
    End Sub
End Class 
```

做这项工作应该怎么做

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:19:36.053

两个问题：

Rectangle 对象不采用指针数组，此外，您正在尝试制作三角形，而不是矩形。消除这个：

```
' Dim tria As New Rectangle(_Pointers) 
```

第二个问题是您正在引用 _Pointers 数组，但它们没有使用新坐标进行更新。点都是 (0, 0)：

试试这样：

```
Public Overrides Sub Teken(doek As Graphics)
  Using borstel As New SolidBrush(VulKleur), _
        pen As New Pen(Me.PenKleur, Me.PenDikte)
    Dim myPoints() As Point = New Point() {Point1, Point2, Point3}
    doek.FillPolygon(borstel, myPoints)
    doek.DrawPolygon(pen, myPoints)
  End Using
End Sub 
```

旁注：确保使用控件的 Paint 事件：

```
Private Sub Panel1_Paint(sender As Object, e As PaintEventArgs) _
                         Handles Panel1.Paint
  e.Graphics.Clear(Color.White)

  Dim tria As New Triangle(Color.Blue, Color.Red, New Point(64, 64), _
                                                  New Point(96, 96), _
                                                  New Point(32, 96))
  tria.Teken(e.Graphics)
End Sub 
```

如果直接在表单上绘图，则覆盖 OnPaint 方法。

# model-view-controller - Symfony2 最佳实践 - 实体排序

> ID：15747141
> 
> 赞同：1
> 
> 时间：2013-04-01T16:20:51.207
> 
> 标签：model-view-controller, sorting, symfony, architecture, doctrine

我正在 Symfony2 中创建一个应用程序。这是我第一次使用框架进行开发，也是我的第一个项目。这是一个学生项目。

在这个项目中，我希望在到达视图之前对我的实体集合进行排序。这可以通过以下方式完成：

在多对一关系的实体上的 getter 中，在一侧的 getter 中的 usort() 方法使用多端的比较器方法。下面我有一个方法也可以填补“Day”实体集合中的空白（以日记的形式），但关键是它使用 usort 对日期进行排序。

在用户实体类中：

```
public function getDaysWithNulls()
    {
    $days = $this->getDays()->toArray();
    //get the first day and find out how many days have passed
    usort($days, array("\Pan100\MoodLogBundle\Entity\Day", "daySorter"));
    $firstEntry = $days[0];
    $interval = $firstEntry->getDate()->diff(new \DateTime());
    $numberOfDaysBack = $interval->d;
    //create an array consisting of the number of days back
    $daysToShow = array();
    for ($i=0; $i < $numberOfDaysBack ; $i++) { 
        $date = new \DateTime();
        $date->sub(new \DateInterval('P' . $i . 'D'));
        $daysToShow[] = $date;
    }
    $daysToReturn = array();
    foreach ($daysToShow as $day) {
        //figure out if this day has an entity, if not set an empty Day object
        $dayEntityToProcess = new \Pan100\MoodLogBundle\Entity\Day();
        $dayEntityToProcess->setDate($day);
        foreach ($days as $dayEntity) {
            //check if there is a day entity
            if($day->format('Y-m-d') == $dayEntity->getDate()->format('Y-m-d')) {
                $dayEntityToProcess = $dayEntity;
            } 
        }
        $daysToReturn[] = $dayEntityToProcess;
    }
    //return a collection
    return new \Doctrine\Common\Collections\ArrayCollection($daysToReturn);
} 
```

usort 在 Day 实体类中使用它：

```
static function daySorter($dayEntity1, $dayEntity2) {
    $interval = $dayEntity1->getDate()->diff($dayEntity2->getDate());
    if($interval->invert == 1) {
        return +1;
    }
    else if ($interval->invert == 0) {
        return 0;
    }
    else return -1;
} 
```

**我的问题是：这是排序和返回排序集合的最佳实践，还是应该在其他地方进行排序？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:32:35.277

我确实认为这是一种乏味的做法。所以我在网上搜索了一下，并阅读了更多内容，发现我可以创建自定义存储库。

我会这样做：

[http://symfony.com/doc/2.1/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/2.1/book/doctrine.html#custom-repository-classes)

编辑：发现在注释中排序更好：

```
/**
 * @ORM\OneToMany(targetEntity="Day", mappedBy="user_id")
 * @ORM\OrderBy({"date" = "DESC"})     
 **/    
protected $days; 
```

# php - facebook 应用程序：获取用户 ID 的替代方式（php-sdk 除外）

> ID：15747142
> 
> 赞同：0
> 
> 时间：2013-04-01T16:20:51.587
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

由于一些错误，facebook php-sdk 的 getuser 总是返回 0。[为什么 Facebook PHP SDK getUser 总是返回 0？](http://facebook.stackoverflow.com/questions/6790272/why-is-facebook-php-sdk-getuser-always-returning-0)

我还能如何获取当前使用该应用程序的用户的 userId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:24:48.440

使用有效的访问`https://graph.facebook.com/me`令牌进行访问，它将以 JSON 格式返回当前用户的详细信息。

# php - 根据 cakephp 上包含的表格进行分页

> ID：15747143
> 
> 赞同：0
> 
> 时间：2013-04-01T16:20:53.303
> 
> 标签：php, cakephp, cakephp-2.0, pagination

我正在使用 cakephp 开发 CMS，我有 2 个表需要通过一些参数进行过滤，并且为了优化我必须从“hasMany”模型开始进行查询，简单的方法是在“belongsTo”模型上进行。

```
class Client extends AppModel {
    public $actsAs = array('Containable');

    public $hasMany = array('Projects');
}

class Project extends AppModel {
    public $actsAs = array('Containable');

    public $belongsTo = array('Client');
} 
```

我在 $conditions 数组中有 where 条件。

```
$this->paginate = array(
                'Client' => array(
                    'limit' => 20,
                    'conditions' => $conditions,
                    'contain' => array(
                        'Project' => array(
                            //'limit' => 20
                        )
                    )
                )
            );
$this->set('clients', $this->paginate('Client')); 
```

通过这种方式，我得到了 20 个客户和每个客户内的所有项目。如果我取消注释该行，我会在 20 个客户中的每个客户中获得 20 个项目。

我一共想要 20 个项目，不管有多少客户（最多 20 个）。

谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T23:05:49.560

如果你想展示**项目，你应该对****项目**进行分页；

```
$this->paginate = array(
    'Project' => array(
        'limit' => 20,
            'conditions' => $conditions,

            // no need to set a limit on 'client',
            // as each project belongs to only one client
            'contain' => array(
                'Client'
            )
        )
);

$this->set('projects', $this->paginate('Project')); 
```

可能需要将`Project`模型添加到`$uses`控制器内的数组中

# javascript - Javascript 更改图像

> ID：15747148
> 
> 赞同：0
> 
> 时间：2013-04-01T16:21:18.370
> 
> 标签：javascript, html, image

我已经完成了研究，我很确定我所做的正是我所发现的，但我的更改图像仍然不起作用。

我正在努力做到这一点，以便当该人单击图像时，图像会发生变化：

```
<script type="javascript">
    function changeLeftImages()
    {
        document.getElementById("leftImagesWin").src="wins.png";
    }
</script>

<a href='javascript:changeLeftImages()'><img src='winsTab.png' width='54' height='50' style='margin-right: 5px;' id='leftImagesWin'></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:23:10.807

`type`属性应该是，而`text/javascript`不仅仅是`javascript`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:23:16.887

摆脱属性

```
type="javascript" 
```

这导致无法解析 JavaScript 的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:24:05.407

在脚本标签中使用它：

```
<script language="JavaScript" type="text/javascript"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:29:26.947

试试这个：

```
<script language="text/javascript">
    function changeLeftImages() {

        if (document.getElementById("leftImagesWin").src == "winsTab.png") 
        {
            document.getElementById("leftImagesWin").src = "wins.png";
        }
        else 
        {
            document.getElementById("leftImagesWin").src = "winsTab.png";
        }
    }
</script>

<p>
        <img alt="" src="winsTab.png" id="leftImagesWin" onclick="changeLeftImages()" />
</p> 
```

# ruby-on-rails - 为什么这个 JSON 字符串周围有一个额外的括号？

> ID：15747150
> 
> 赞同：0
> 
> 时间：2013-04-01T16:21:31.303
> 
> 标签：ruby-on-rails, ruby, json

我正在尝试生成 JSON 以供我的智能手机应用程序读取，但是我对为什么我在 JSON 结构上有一个外部“[]”感到困惑。这是我的 JSON：

```
[{"article":{"title":"First"}},{"article":{"title":"Ontario"}}] 
```

这是我的文章索引的代表。有没有办法删除，`[]`因为据我了解，它们不是正确的 JSON。

这是我制作它的方式：

```
respond_with :json
def index
  @articles= Article.all
  respond_with @articles.as_json(:root => true, :only => [:title])
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:24:14.927

这是正确的 JSON。它用于表示一个数组——在本例中，是一个文章数组。您可能希望将其保留为您的 Web 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:24:44.313

`[]`外面的's 只是创建一个数组。您正在序列化多篇文章，因此这是将它们输出为列表的最自然方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:29:35.400

它是一个 JSON 数组 -

[http://www.json.org/javadoc/org/json/JSONArray.html](http://www.json.org/javadoc/org/json/JSONArray.html)

JSONArray 是有序的值序列。它的外部文本形式是一个用方括号括起来的字符串，用逗号分隔值。内部形式是一个对象，它具有 get 和 opt 方法，用于通过索引访问值，以及 put 方法用于添加或替换值。这些值可以是以下任何类型：Boolean、JSONArray、JSONObject、Number、String 或 JSONObject.NULL 对象。

构造函数可以将 JSON 文本转换为 Java 对象。toString 方法转换为 JSON 文本。

# centos5 - Ceph：挂载失败：数值参数超出域

> ID：15747151
> 
> 赞同：0
> 
> 时间：2013-04-01T16:21:35.357
> 
> 标签：centos5, distributed-filesystem, ceph

由于[这个](https://stackoverflow.com/questions/15737709/compiling-ceph-on-centos-5-doc-data-is-used-but-docdir-is-undefined)问题，我的朋友找到了包含[ceph的](http://repo.openfusion.net/centos5-x86_64/)[Open Fusion](http://www.openfusion.net/linux/openfusion_rpm_repository)存储库。

`ceph-fuse`安装没有问题：

```
# ceph -v
ceph version 0.27.1 (commit:44900d4c13f02913b3347cac3e1dc33632d5b8ff)
You have new mail in /var/spool/mail/root 
```

但是安装时出现以下错误：

```
# cfuse -m 192.168.2.13:6789 /mnt/ceph/
 ** WARNING: Ceph is still under heavy development, and is only suitable for **
 **          testing and review.  Do not trust it with important data.       **
cfuse[8431]: starting ceph client
terminate called after throwing an instance of 'ceph::buffer::end_of_buffer'
  what():  buffer::end_of_buffer
*** Caught signal (Aborted) **
 in thread 0x2b0745b53940
*** Caught signal (Aborted) **
 in thread 0x2b0745b53940
 ceph version 0.27.1 (commit:44900d4c13f02913b3347cac3e1dc33632d5b8ff)
 1: cfuse [0x58d411]
 2: /lib64/libpthread.so.0 [0x33dde0eca0]
 3: (gsignal()+0x35) [0x33dce302c5]
 4: (abort()+0x110) [0x33dce31d70]
 5: (__gnu_cxx::__verbose_terminate_handler()+0x114) [0x33edcbed94]
 6: /usr/lib64/libstdc++.so.6 [0x33edcbce46]
 7: /usr/lib64/libstdc++.so.6 [0x33edcbce73]
 8: /usr/lib64/libstdc++.so.6 [0x33edcbcf71]
 9: (ceph::buffer::list::iterator::copy(unsigned int, char*)+0x177) [0x4703d7]
 10: (MDSMap::decode(ceph::buffer::list::iterator&)+0x723) [0x4d3bd3]
 11: (Client::handle_mds_map(MMDSMap*)+0x218) [0x486938]
 12: (Client::ms_dispatch(Message*)+0x3f0) [0x4b44b0]
 13: (SimpleMessenger::dispatch_entry()+0x655) [0x45c5d5]
 14: (SimpleMessenger::DispatchThread::entry()+0x1f) [0x45265f]
 15: /lib64/libpthread.so.0 [0x33dde0683d]
 16: (clone()+0x6d) [0x33dced503d]
 ceph version 0.27.1 (commit:44900d4c13f02913b3347cac3e1dc33632d5b8ff)
 1: cfuse [0x58d411]
 2: /lib64/libpthread.so.0 [0x33dde0eca0]
 3: (gsignal()+0x35) [0x33dce302c5]
 4: (abort()+0x110) [0x33dce31d70]
 5: (__gnu_cxx::__verbose_terminate_handler()+0x114) [0x33edcbed94]
 6: /usr/lib64/libstdc++.so.6 [0x33edcbce46]
 7: /usr/lib64/libstdc++.so.6 [0x33edcbce73]
 8: /usr/lib64/libstdc++.so.6 [0x33edcbcf71]
 9: (ceph::buffer::list::iterator::copy(unsigned int, char*)+0x177) [0x4703d7]
 10: (MDSMap::decode(ceph::buffer::list::iterator&)+0x723) [0x4d3bd3]
 11: (Client::handle_mds_map(MMDSMap*)+0x218) [0x486938]
 12: (Client::ms_dispatch(Message*)+0x3f0) [0x4b44b0]
 13: (SimpleMessenger::dispatch_entry()+0x655) [0x45c5d5]
 14: (SimpleMessenger::DispatchThread::entry()+0x1f) [0x45265f]
 15: /lib64/libpthread.so.0 [0x33dde0683d]
 16: (clone()+0x6d) [0x33dced503d]
cfuse[8400]: mount failed: Numerical argument out of domain 
```

有人熟悉 Ceph 吗？我现在能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:26:13.417

首先，那是 ceph 的一个古老版本（0.60.0 刚刚发布，0.56.4 是当前的稳定版本）。

如果您实际上没有设置 Ceph 集群，我猜想虽然可能安装了软件包，但集群实际上并不能正常工作。我会看一下'ceph -s'，看看你是否收到'HEALTH OK'类型的消息。

# ruby - 为什么我不能在 ruby -debug 中设置断点？

> ID：15747159
> 
> 赞同：0
> 
> 时间：2013-04-01T16:22:00.547
> 
> 标签：ruby, jruby, breakpoints, ruby-debug

当我尝试从命令行 ruby​​ 调试器“ruby-debug”设置断点时，出现以下错误：

```
(rdb:1) break 11
INTERNAL ERROR!!! undefined method `entries' for #<String:0x2f3cf887> 
```

我正在使用 JRuby 1.7.3 版。我正在使用 ruby​​-debug 版本 0.10.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:22:00.547

根据这个论坛，这是 ruby​​-debug 中的一个已知错误：[http ://www.ruby-forum.com/topic/3636709](http://www.ruby-forum.com/topic/3636709#1058565)

该论坛上还提到了一个补丁。为了完整起见，我将重复一遍。

`$GEM_HOME/gems/ruby-debug-base-0.10.4-java/lib/linecache-ruby.rb`从第 8 行更改

```
(1..code.entries.size).to_a 
```

至

```
(1..code.lines.count).to_a 
```

那为我修好了。

# reporting-services - SSRS - 如果报表分组的字段是空白的，你可以在不同的列上分组吗？

> ID：15747161
> 
> 赞同：0
> 
> 时间：2013-04-01T16:22:03.643
> 
> 标签：reporting-services

在 SSRS 中，我有一个按员工 ID 分组的报告，然后是一个名为 Code1 的字段上的子组。该子组末尾有小计。Code1 有时可能为空白或 null，在这些情况下，用户希望将报表分组到名为 Code2 的不同字段上，而不是将所有空白 Code1 字段分组。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:32:04.330

在您的 sql 中使用 isnull 函数添加一列 - 选择 isnull(code1,code2) as GroupCode from... 然后使用 GroupCode 作为报告中的子组字段。

或者在报告中，您可以为组创建一个表达式 - =IIF(IsNothing(Fields!Code1.Value),Fields!Code2.Value,Fields!Code1.Value)

两者都做同样的事情——测试 code1 的值，如果没有，则使用 code2。

# c# - 代码先创建表

> ID：15747162
> 
> 赞同：4
> 
> 时间：2013-04-01T16:22:04.640
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5, entity-framework-migrations

我正在关注[本](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties)教程，并尝试在 userprofile 表中添加一些新列。我试图创建一个新表。

```
 public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<TestTabel> TestTabel { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string Mobile { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

[Table("TestTabel")]
public class TestTabel
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int TestId { get; set; }
    public string TestName { get; set; }
    public string TestMobile { get; set; }
} 
```

比我尝试使用 update-database 命令在控制台更新数据库时，我得到了这个错误消息：

**数据库中已经有一个名为“UserProfile”的对象。**

未添加的新列和表均未添加。

我错过了什么？

[编辑] 我执行了 add-migration 和 update-database 命令，这就是结果（必须执行两次 update-database 命令，第二次详细说明）

```
PM> Add-Migration
cmdlet Add-Migration at command pipeline position 1
Supply values for the following parameters:
Name: test
Scaffolding migration 'test'.
The Designer Code for this migration file includes a snapshot of your current Code First model. This snapshot is used to calculate the changes to your model when you scaffold the next migration. If you make additional changes to your model that you want to include in this migration, then you can re-scaffold it by running 'Add-Migration 201304011714212_test' again.
PM> Update-Database
The project 'MVC4SimpleMembershipCodeFirstSeedingEF5' failed to build.
PM> Update-Database
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Applying code-based migrations: [201304011714212_test].
Applying code-based migration: 201304011714212_test.
Running Seed method.
PM> Update-Database -verbose
Using StartUp project 'MVC4SimpleMembershipCodeFirstSeedingEF5'.
Using NuGet project 'MVC4SimpleMembershipCodeFirstSeedingEF5'.
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Target database is: 'aspnet-MVC4SimpleMembershipCodeFirstSeedingEF5' (DataSource: ., Provider: System.Data.SqlClient, Origin: Configuration).
No pending code-based migrations.
Running Seed method.
PM> 
```

[/编辑]

配置.cs：

```
 namespace MVC4SimpleMembershipCodeFirstSeedingEF5.Migrations
{
    internal sealed class Configuration : DbMigrationsConfiguration<UsersContext>
    {
        public Configuration()
        {
            AutomaticMigrationsEnabled = true;
        }

    protected override void Seed(UsersContext context)
    {
        WebSecurity.InitializeDatabaseConnection(
            "DefaultConnection",
            "UserProfile",
            "UserId",
            "UserName", autoCreateTables: true);

        if (!Roles.RoleExists("Administrator"))
            Roles.CreateRole("Administrator");

        if (!WebSecurity.UserExists("test"))
            WebSecurity.CreateUserAndAccount(
                "test",
                "password",
                new { Mobile = "+19725000374", FirstName = "test", LastName = "test" });

        if (!Roles.GetRolesForUser("test").Contains("Administrator"))
            Roles.AddUsersToRoles(new[] { "test" }, new[] { "Administrator" });
    }
  }
} 
```

在 Filters 文件夹 1 cs 文件中：

```
namespace MVC4SimpleMembershipCodeFirstSeedingEF5.Filters
{
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, 

    Inherited = true)]
    public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
    {
        private static SimpleMembershipInitializer _initializer;
        private static object _initializerLock = new object();
        private static bool _isInitialized;

        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            // Ensure ASP.NET Simple Membership is initialized only once per app start
            LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
        }
    private class SimpleMembershipInitializer
    {
        public SimpleMembershipInitializer()
        {
            Database.SetInitializer<UsersContext>(null);

            try
            {
                using (var context = new UsersContext())
                {
                    if (!context.Database.Exists())
                    {
                        // Create the SimpleMembership database without Entity Framework migration schema
                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                    }
                }

                WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
            }
            catch (Exception ex)
            {
                throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
            }
        }
    }
  }
} 
```

连接字符串：

```
<configSections>
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections> 
```

上次迁移：

```
namespace MVC4SimpleMembershipCodeFirstSeedingEF5.Migrations
{
    using System;
    using System.Data.Entity.Migrations;

public partial class test : DbMigration
{
    public override void Up()
    {
        CreateTable(
            "dbo.TestTabel",
            c => new
                {
                    TestId = c.Int(nullable: false, identity: true),
                    TestName = c.String(),
                    TestMobile = c.String(),
                })
            .PrimaryKey(t => t.TestId);

    }

    public override void Down()
    {
        DropTable("dbo.TestTabel");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-01T16:47:38.910

**我只是将这里的所有内容作为一个演练，让您的代码优先和迁移进行** *- 攻击可能发生或可能不会发生的各种问题。注意：代码优先已被证明是非常可靠的——并且也可以在实时场景中解决——你只需要知道你在做什么。*

> 最有可能的是，您的迁移和数据库基本上是不同步的。

您现有的迁移尝试针对数据库的旧副本运行 - 我猜是针对“空数据库”优化的起伏。

您需要针对您附加到的 Db 副本运行迁移（添加迁移） - 这将产生“差异”并且只是最新的 Db（当然，请始终**确保备份**，因为它可能会下降/改变等）。

或者如果可能的话，清空你的数据库——然后重新开始。

或者，如果实时 Db - 创建迁移 - 并`Update-Database -Script`在您的开发机器上运行 - 以生成完整的 Db - 或更改（这一切都非常粗糙，您需要根据您的情况进行调整）。然后通过运行脚本应用到您的“live Db”。

您也可以查看我之前关于同步的帖子...

[MVC3 和 Code First 迁移 - “自从创建数据库以来，支持‘blah’上下文的模型已经改变”](https://stackoverflow.com/questions/10254613/mvc3-and-code-first-migrations/10255051#10255051)

**编辑：**
还要检查这个答案[AutomaticMigrationsEnabled false 还是 true？](https://stackoverflow.com/questions/11806570/automaticmigrationsenabled-false-or-true/11815229#11815229)

如果您的处事方式没问题，请将其添加`AutomaticMigrationsEnabled = true;`到您`Configuration`（也在 Migrations 文件夹下 - 为您创建）..

> 我经常做的几个步骤来清理迁移：

（最好先备份）
- Enable-Migrations -force （仅限第一次 - 这会删除 configuration.cs 和那里的任何“种子”！）
- AutomaticMigrationsEnabled = true；
- 从项目中手动删除现有迁移 (\Migrations)
- 此时重建项目
- Add-Migration Initial
- Update-Database -Force -Verbose

...稍后（后续迁移）：
- Add-Migration SomeOther1
- Update-Database -Force -Verbose
...如果您保持 Db 同步 - 即小心“移动 Db”、手动调整等（以及这种情况见另一篇文章）

**结合其他事情：**

使用 PM 控制台...
- 从列表中选择您的项目，
- 确保您的“主 exe”（调用您的数据项目/程序集 - 或者如果控制台/应用程序则为同一个项目）- 设置为“启动”项目，
- 始终观看控制台评论 - 因为它可能正在尝试构建和访问不同的项目。

**联系：**

请参阅我的这篇文章[迁移不会改变我的表](https://stackoverflow.com/a/15734839/417747)
简而言之 - 您的连接命名为您的上下文 + 您的项目 - 如果未另行指定。它取自您的 DbConfig 构造函数 - 或 app.config（连接）。确保您正在查看“正确的数据库”（即您通过某些资源管理器查看的内容和代码优先连接的内容 - 可能是两个不同的东西）。

**构建：**
确保您的项目设置为“配置”以自动构建 - 这也可能是一个问题。

# sql - Postgresql 按日期排序但随机

> ID：15747165
> 
> 赞同：1
> 
> 时间：2013-04-01T16:22:12.300
> 
> 标签：sql, postgresql

我正在尝试提取数据并按日期排列，但让它以随机顺序出现。我试过了

```
SELECT * FROM table ORDER BY article_date_added::DATE DESC, RANDOM() limit 30; 
```

我试过了

```
SELECT * FROM table ORDER BY to_timestamp(to_char(article_date_added, \'DD Mon YYYY HH24\'), \'DD Mon YYYY\') DESC, RANDOM() 
```

它会获取最新的文章，但随后会每天随机发布。所以它会像

```
April 1
March 29
March 31
Apr 1 
```

我试图实现按日期分开的结果，但随后随机化。

```
April 1
April 1
March 31
March29 
```

有没有办法在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:34:13.283

将获得 30 篇最新文章的部分放入子查询中，并从子查询中随机选择排序。我不使用 postgresql，所以这个例子可能有一些错误：

```
select * from 
(select somefields
from sometables
order by article_date_added desc
limit 30) temp
order by random() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:53:34.720

所以，您希望每一天都组合在一起，但日期以随机顺序显示，对吗？我们可以使用可以接受时间戳参数的内置函数`generate_series`来制作一个可以提供帮助的伪表。

```
WITH t AS (
  SELECT gs::date AS dt, random() AS r 
  FROM generate_series('2010-01-01'::timestamp, '2015-01-01', '1 day') AS gs )
SELECT articles.* 
FROM articles JOIN t 
ON articles.article_date_added::date=t.dt 
ORDER BY r; 
```

请注意，不必`r`在输出列中包含。

显然，这段代码只能再运行 2 年 9 个月，但必要的修改应该是显而易见的。您甚至可以将硬连线日期替换为`(SELECT min(article_date_added) FROM articles)`[注意额外的括号！] 和`max`.

* * *

[评论后编辑] 在查看您的示例输出时，我看到您不希望按日期聚合。我不确定描述是否与输出匹配。您所要求的可能是其他建议之一，但您可以轻松地做到这一点

```
WITH t AS (
  SELECT * FROM articles
  ORDER BY article_created_date DESC LIMIT 30 )
SELECT * FROM t ORDER BY t.article_created_date desc, random(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:27:07.437

我认为以下将起作用：

```
select t.*
from (select t.*,
             avg(random()) over (partition by article_date_added::DATE) as groupnum
      from t
     ) t
order by groupnum; 
```

或者，如果您希望日期降序然后随机执行：

```
select t.*
from t
order by article_date_added::DATE desc, random(); 
```

这就是您的示例数据的结构方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:42:30.973

```
select DATE
from TABLE 
order by date_trunc('month',DATE),
random() 
```

这首先将日期截断为月份并对其进行排序。因此，2012-01-25 和 2012-01-13 变为 2012-01-01。

之后，对实际日期进行随机排序。

# javascript - 如何使用 Javascript 解析 json 并在下拉按钮中显示数据？

> ID：15747168
> 
> 赞同：0
> 
> 时间：2013-04-01T16:22:32.113
> 
> 标签：javascript, jquery, html, json

我有一个看起来像这样的 JSON 结构

```
[
   {
      "term_id":"28",
      "name":"Audi",
      "slug":"audi",
      "term_group":"0"
   }
] 
```

在我的 HTML 页面中，我有一个下拉按钮，我想在单击后显示名称。为此，我有一些 Javascript 代码，如下所示：

```
var serviceURL = "http://www.dohamark.com/samudra/";

var make;

$('#make1').bind('pageinit', function(event) {
    getEmployeeList();
});

function getEmployeeList() {
    $.getJSON(serviceURL + '1st.php', function(data) {
        $.each(data, function(index, employee) {
            $('#make1').append('<option>' + employee.name + '</option>');
        });
    });
} 
```

但是，此脚本在下拉按钮单击中不显示任何内容，而是在空白处显示。我是 JavaScript 的新手，对 JSON 解析不太了解。有人可以帮助确定我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:28:22.253

试试这个：

```
$.each(data, function (index, employee) {
    $('#make1').append('<option>' + employee.name + '</option>');
}); 
```

小提琴：http: [//jsfiddle.net/KYtph/2/](http://jsfiddle.net/KYtph/2/)

你的代码很好。确保它不像其他人建议的那样跨域，并且它被正确解析为 json。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:57:29.167

这个怎么样：

```
for (var index in employee) {
    $('#make1').append($('<option>').text(employee[index].name));
}); 
```

如果我正确阅读了您的问题，我认为应该这样做。

**编辑**- 只是为了确保 OP 清楚，当我`employee`在`for in`循环中使用变量时，它应该引用返回的 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:52:48.233

我会这样写：

```
$.each(data, function () {
    $('#make1').append('<option>' + this.name + '</option>');
}); 
```

此外，@Mike Bryant 提出了一个很好的观点；如果您要跨域，那么如果没有 JSON-P 之类的东西，这将永远无法工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:21:57.737

请尝试以下代码：

```
 var dd = $("#make1");

    $(dd).empty();
    $(dd).append($('<option />').attr('value', '-1').text('-----Select----'));
     $.each(data, function(index, employee) {
        dd.append($('<option />').attr('Value',employee.ID).text(employee.Name));
    }); 
```

# javascript - Javascript 正则表达式字符串列表

> ID：15747169
> 
> 赞同：0
> 
> 时间：2013-04-01T16:22:35.223
> 
> 标签：javascript, regex

我有一个如下所示的文本文件：

```
1)  bla bla bla 

 bla bla bl- 

a bla bla 

 2)  bla bla bl- 

a bla bla bl- 

  a bla bla 

3)  bla bla bl- 

a bla bla bl- 

a bla bla 
```

我想把每个列表项放在一个

```
<p class="bla"></p> 
```

html标签。我也想融合分解成音节的单词。

我只设法得到列表项的开头

```
^[ ]+[0-9]+\) 
```

以及以减号结尾的单词

```
[a-zA-ZäöüßÄÖÜ]+\- 
```

我希望在 JavaScript 中做到这一点，但如果它可以在 notepad++ 中完成，那就更好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:34:19.260

> 我想获取每个列表项并将其放在 html 标记中

我会推荐一个`<li>`标签 :-) 你想要的是以 开头的字符串，`[0-9]+\)`前面是换行符或文件开始，[然后](http://www.regular-expressions.info/lookaround.html)是换行符和下一个点，或文件结束。这个正则表达式应该这样做：

```
(^|\s*\n\s*)\d+\)([\s\S]+?)(?=\s*$|\s*\n\s*\d+\)) 
```

现在您可以将其替换为`$1<p class="bla">$2</p>`. 您可能希望从匹配组中排除一些空格以删除它们。

* * *

> 我想融合分解成音节的单词。

为此，我们可以匹配[一个单词 end](http://www.regular-expressions.info/wordboundaries.html)，后跟减号和换行符：

```
\b-\s*\n\s* 
```

然后用空字符串替换它。

# vb.net - 使用 VB.NET 同时读取和写入文本文件

> ID：15747172
> 
> 赞同：0
> 
> 时间：2013-04-01T16:22:50.297
> 
> 标签：vb.net, file-io

我有一个程序必须读取代码栏并将读取的代码写入文本文件。每 30 秒启动一个线程，读取该文件以执行一些操作并删除已处理的行。

我的问题是，当我从主线程读取文件时，它必须能够写入更多行并在以后读取每 30 秒启动的线程。

我真的没有找到任何关于如何解决问题的样本或想法。有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:01:01.777

当你有一个像这个文件这样的共享可变资源并且有多个单元访问它时，通常使用锁。锁可以存在于程序中，但也由许多文件系统提供。需要访问时锁定文件，不再需要时释放锁定。这样，在任何给定点，您的程序只有一部分会访问该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:20:52.270

与其使用文件作为待完成工作的后备存储，不如使用[队列](http://msdn.microsoft.com/en-us/library/system.collections.queue%28v=vs.110%29.aspx)存储“实时”数据？您仍然可以将文件用作日志，输入项目何时排队和从队列中删除的条目，以防您需要回顾操作的历史记录。这样，文件只需要被附加到并且永远不会被读取，除非需要某种回滚，例如您的程序在不合时宜的时刻停止。

# asp.net-mvc - MVC 单选按钮选中状态无法正常工作

> ID：15747176
> 
> 赞同：1
> 
> 时间：2013-04-01T16:23:08.260
> 
> 标签：asp.net-mvc, c#-4.0

我有一个视图，我试图分配是否选中了单选按钮。我有 2 个元素，**Grouped**和**Variant**。我将**分组**分配为`checked`，但**变体**（第二个）始终为`checked`。如果我添加更多元素，它总是最后一个是`checked`.

```
<div>
 @Html.Label("Grouped")
 @Html.RadioButton("familyType", "grouped", new { @checked = true})             
 @Html.Label("Variant")
 @Html.RadioButton("familyType", "variant", new { @checked = false})       
</div> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:26:21.477

“checked”属性没有布尔值。唯一可接受的值是“checked”。

```
checked="checked" 
```

只需具有“选中”属性，单选/复选框就会使其选中。

如果您不希望选中单选/复选框，则不要包含“checked”属性。

# javascript - 在 Servlet Controller 类中定义弹出窗口选项

> ID：15747182
> 
> 赞同：1
> 
> 时间：2013-04-01T16:23:18.833
> 
> 标签：javascript, jsp, servlets

我已将 Servlet 控制器类中的编辑页面定义为

```
private static final String EDIT = "edit.jsp"; 
```

在基于请求参数的控制器类中显示编辑/删除页面。如果是编辑选项，我会重定向到`edit.jsp`

是否可以`edit.jsp`作为我可以在控制器类中定义的弹出窗口打开？

或者如果请求参数被编辑，是否可以触发以下内容

```
<script type="text/javascript">
    function openEdit() {
        window.open('edit.jsp','width=400, height=400');
    }
    </script> 
```

谢谢

# powershell - 仅输出文件夹并排除特定文件夹

> ID：15747183
> 
> 赞同：1
> 
> 时间：2013-04-01T16:23:22.870
> 
> 标签：powershell, recursion, dir

我有一个包含超过 10TB 数据的数据库，需要组织数据。我这样做是通过使用 Powershell 仅将文件夹输出到文本文件，然后将其导入到 Excel 中进行进一步处理。例如，我只想要 Z 驱动器的文件夹和子文件夹。我不想要任何文件。当我尝试排除某些文件夹及其中的所有子文件夹时遇到问题。

例如，我要排除的文件夹名称及其内容是“BackScatter”和“MicroData”。我正在使用这个脚本：

```
dir -recurse -Exclude "Backscatter","MicroData" | Where-Object { $_.PSIsContainer } | ForEach-Object { $_.FullName } > ZDrive.txt 
```

我没有收到错误，它只是在递归时不排除这些文件夹。

另外我想知道我是否可以只排除“Backscatter”中的子文件夹而不是整个文件夹。我在网站上做了很多搜索，但我太新了，我无法理解任何回答问题的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:48:45.097

[Get-Help Get-ChildItem -Full](http://technet.microsoft.com/library/hh847897.aspx)

我使用的是 PS 3.0，似乎有`-File`和`-Directory`switch 可以用来代替`? {$_.psiscontainer}`. 处理大数据时，使用[Foreach-Object`%`](http://blogs.technet.com/b/heyscriptingguy/archive/2009/07/22/hey-scripting-guy-how-can-i-speed-up-my-windows-powershell-scripts.aspx)比 Where-Object 更快。至于`-Exclude`不工作，我不确定。您始终可以使用[正则表达式](http://www.regular-expressions.info/reference.html)和`-match`运算符。

```
Get-ChildItem $path -r -Directory | % {if($_.name -notmatch 'BackScatter|MicroData'){$_.fullname}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:44:43.767

这对你有用吗？

```
(dir -recurse | Where-Object { $_.PSIsContainer } | ForEach-Object { $_.FullName }) -notmatch '\\(BackScatter|MicroData)\\' > ZDrive.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:25:43.933

尝试这个：

```
$excludes = @("BackScatter", "MicroData")

dir -recurse | ? {
  $_.PSIsContainer -and $excludes -notcontains $_.Name
} | % { $_.FullName } > ZDrive.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T17:03:59.397

好吧，由于递归，它可能不包括您告诉它的 2 个文件夹，但不包括子文件夹。

你可以试试后期处理。喜欢添加 | ? {$_ -notmatch 'Backscatter|MicroData'}

# .net - 执行项目设置后出现未处理的异常

> ID：15747185
> 
> 赞同：0
> 
> 时间：2013-04-01T16:23:27.133
> 
> 标签：.net, vb.net, installation, setup-deployment

我为我的 vb.net 项目创建了一个设置。我在连接字符串中使用了“application.startup”属性。我已经使用设置和部署向导创建了我的项目的 exe，在创建设置时将数据库添加到程序文件（特殊文件夹）中，然后构建项目。但是，当我安装设置和运行....

```
Unhandled Exception has occured in your application. If you click Continue, the application will ignore this error and attempt to continue. If you click Quit, the application will close immediately.

Object reference not set to an instance of an object.
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.NullReferenceException: Object reference not set to an instance of an object.
   at Hotel_Management_System.fLogIn.btnLogIn_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5466 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
Hotel Management System
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/Program%20Files%20(x86)/Hotel/Hotel%20Management%20System.exe
----------------------------------------
Microsoft.VisualBasic
    Assembly Version: 8.0.0.0
    Win32 Version: 8.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualBasic/8.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5467 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5468 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5467 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
----------------------------------------
System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
System.Runtime.Remoting
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Runtime.Remoting/2.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll
----------------------------------------
System.Data
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_32/System.Data/2.0.0.0__b77a5c561934e089/System.Data.dll
----------------------------------------
System.Transactions
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.4927 (NetFXspW7.050727-4900)
    CodeBase: file:///C:/Windows/assembly/GAC_32/System.Transactions/2.0.0.0__b77a5c561934e089/System.Transactions.dll
----------------------------------------
System.EnterpriseServices
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_32/System.EnterpriseServices/2.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll
----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration>

When JIT debugging is enabled, any unhandled exception
will be sent to the JIT debugger registered on the computer
rather than be handled by this dialog box. 
```

# sql-server - 存储过程中的动态 SQL - 与多列连接

> ID：15747186
> 
> 赞同：0
> 
> 时间：2013-04-01T16:23:32.903
> 
> 标签：sql-server, stored-procedures

我正在尝试创建一个视图，其中列连接以生成导入行。

这是我的声明：

```
SET NOCOUNT ON;
declare @SQL as varchar(4000)
        --@CD as date

--set @CD = convert(varchar(30), cast(getdate() as date), 110)

    -- Insert statements for procedure here
set @SQL = 'CREATE VIEW vw_GCS_Export
    As
    select division, [primary image id],[Item Number], [Brand Name],[Marketing Description],
    [Colours]as Colors,[Live Date],[Sample Type],substring([FileName],charindex('+ CHAR(39) + '_' + CHAR(39) +',[FileName],1)+1,CHARINDEX('+ CHAR(39) + '.' + CHAR(39) +',[FileName],1)-5) as BatchID,
    '+ CHAR(39) + '670' + CHAR(39) +' as Status, [Primary image ID] + '+ CHAR(39) + '_P' + CHAR(39) +' as [Shot Name],
    Cast(Null as varchar(50))as [Swatch/Variation],Cast(Null as varchar(50))as [Alternate Shot],[UserName],''' + CAST(convert(date,Sysdatetime(),110)as varchar(10)) + ''' as [Import Date],
    Cast(Null as varchar(50))as [Return Instructions],Cast(Null as varchar(50))as [Rush Request], DATEADD(WEEKDAY,-5,[live date]) as [ImageDeliveryDate],
    '+ CHAR(39) + 'Division '+ CHAR(39) + '+ [division] +'+ CHAR(39) + ' * ' + CHAR(39) +' + [UserName] as JobName
    from Sheet1$'

EXEC (@SQL)
select * from vw_GCS_Export

END 
```

当我执行存储过程时出现错误：

> 将数据类型 varchar 转换为浮点数时出错。

我是否需要`nvarchar(50)`使用 cast 将列定义为或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:46:14.910

n本题缺少很多信息，比如[Sheet1$]中各列的数据类型。不过，我可以给你一个一般性的解释。每当表达式尝试将浮点值与字符串值连接时，您都会收到此错误。您可能期望自动转换是将浮点数转换为字符串然后连接，但实际上发生的情况是 MSSQL 尝试将字符串转换为数值，然后将其添加到浮点数中。正如 Love2Learn 所说，您需要将数值显式转换/转换为字符串，例如

```
cast([Primary image ID] as varchar(max)) + '_P' as [Shot Name]
'Division '+ cast([division] as varchar(max)) +' * ' + [UserName] as JobName 
```

# c++ - 为什么 boost 的随机数生成（在正态分布上）总是给出相同的值？

> ID：15747194
> 
> 赞同：4
> 
> 时间：2013-04-01T16:24:03.590
> 
> 标签：c++, boost, random

我正在做一些随机数生成并获得可疑行为。这是我的代码：

```
 // initialized earlier... in the constructor of a class
    boost::mt19937 *rng = new boost::mt19937();
    rng->seed(time(NULL));

    // actual use here.
    for (int i = 0; i < 10; ++i)
    {
        test();
    }

    void test()
    {
       boost::normal_distribution<> distribution(10, 10);
       boost::variate_generator< boost::mt19937, boost::normal_distribution<> > resampler(*rng, distribution);

       const double sample = (resampler)(); // always the same value.
    } 
```

我在提升中滥用随机抽样吗？我做错了什么以使其始终具有相同的价值。我在构造函数中初始化了随机数生成器，所以它应该总是吐出一个不同的值（没有重新初始化）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T16:37:56.497

问题出在线路上`boost::variate_generator< boost::mt19937, boost::normal_distribution<> > resampler(*rng, distribution);`。此构造函数按值获取其参数（请参阅[文档](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/variate_generator.html#idp74778928-bb "boost::variate_generator 构造函数")）。因此，每个都`resampler`从生成器的相同副本开始并调用它一次。

* * *

编辑：沙菲克在我做完之后就注意到了同样的事情。如果您真的无法将初始化提升到循环之外，您也可以重新播种生成器。根据您的应用程序，有很多方法可以实现这一点。下面只是一个例子：

```
void test()
{
   static unsigned int seed = 0
   rng->seed((++seed) + time(NULL));

   boost::normal_distribution<> distribution(10, 10);
   boost::variate_generator< boost::mt19937, boost::normal_distribution<> > resampler(*rng, distribution);

   const double sample = (resampler)(); // always the same value.
} 
```

注意：不要`rng`使用 just重新播种，因为如果您在紧密循环中`time(NULL)`调用，可能会多次返回相同的值。`test()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:38:30.890

`test`这是因为如果您将它们移到外部，您正在实例化函数中的类，那么它会按预期工作。您将使用相同的生成器启动每个实例。看到这个最小的情况：

```
int main()
{
    boost::mt19937 *rng2 = new boost::mt19937();
    rng2->seed(time(NULL));

    boost::normal_distribution<> distribution(0, 1);
    boost::variate_generator< boost::mt19937, boost::normal_distribution<> >        resampler(*rng2, distribution);

    for (int i = 0; i < 10; ++i)
    {
        std::cout << resampler() << std::endl ;
    }
} 
```

如果您将循环更改为像您发布的代码一样工作，那么您会看到同样的问题：

```
 for (int i = 0; i < 10; ++i)
    {
        boost::normal_distribution<> distribution(0, 1);
        boost::variate_generator< boost::mt19937, boost::normal_distribution<> >        resampler(*rng2, distribution);

        std::cout << resampler() << std::endl ;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T19:14:33.230

“为什么”已在其他答案中得到解决。以下是如何在不重新播种的情况下修复它（这破坏了使用生成器的意义）：初始化`normal_distribution`和`variate_generator`一次，以及`mt19937`.

在您的班级中，请注意以正确的顺序定义这些成员。

作为旁注，“新”是没用的，你可以简单地写：

```
boost::mt19937 rng ; 
```

# knockout.js - 如何绑定 ko.observableArray 字符串？

> ID：15747211
> 
> 赞同：8
> 
> 时间：2013-04-01T16:24:57.500
> 
> 标签：knockout.js, knockout-2.0, knockout-mvc

我正在尝试将 ko.observableArray 字符串绑定到模板，但我无法让模板获取数组内字符串的更改。

如果我绑定一组对象而不是一组字符串，我会获得对 JSON 的更新，但在我实际更改第一个非数组值之前，它们不会触发任何内容。但是，我更愿意找到一个字符串数组，因为我可以将数据模型直接发布回服务器而无需任何后处理。

如何获取要触发的字符串数组的更新，以及如何确保它们正确触发更改而无需更新非数组值？

如果无法绑定到可观察的字符串数组，如何在更新可观察数组内的对象时触发事件？

请参阅此处的示例：http: [//jsfiddle.net/gcEHC/2/](http://jsfiddle.net/gcEHC/2/)

在这个例子中，array3 的数据会在值改变时反映在模型中，但是对 array1 和 array2 的数据的改变永远不会出现。

JS：

```
var ViewModel = function() {
    this.value = ko.observable("hi")
    this.array1 = ko.observableArray(["hi", "there"]);
    this.array2 = ko.observableArray([ko.observable("hi"), ko.observable("there")]);
    this.array3 = ko.observableArray([{ data: "hi" }, { data: "there" }]);
};

ko.applyBindings(new ViewModel()); 
```

HTML：

```
<div class='liveExample'>   
    <p><input data-bind='value: value' /></p> 
    <div data-bind="foreach: array1">
        <p><input data-bind='value: $data' /></p> 
    </div>
    <div data-bind="foreach: array2">
        <p><input data-bind='value: $data' /></p> 
    </div>
    <div data-bind="foreach: array3">
        <p><input data-bind='value: data' /></p> 
    </div>
</div>

<pre data-bind="text: ko.toJSON($data)"></pre> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-16T18:53:04.030

在 KO 3 中，如果您在绑定中指向 $rawData，array2 示例将按预期工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T16:38:05.640

从[文档：](http://knockoutjs.com/documentation/observableArrays.html)

> 简单地将一个对象放入 observableArray 并不能使该对象的所有属性本身都可观察。当然，如果您愿意，您可以使这些属性可观察，但这是一个独立的选择。observableArray 只跟踪它持有的对象，并在添加或删除对象时通知侦听器。

您需要创建一个具有（您的字符串的）可观察属性的对象。然后制作这些对象的 observableArray。

例如，以下示例在应用绑定 2 秒后更新对象的属性：

```
var item = function(text) {
    var self = this;

    self.Name = ko.observable(text);
}

var vm = {
    items: ko.observableArray([
        new item('one'),
        new item('two'),
        new item('three')
        ])
}

ko.applyBindings(vm);
setTimeout(function() {
    vm.items()[1].Name('updated!');
}, 2000); 
```

这是一个完整的、可运行的示例：http: [//jsfiddle.net/psteele/z6gbM/](http://jsfiddle.net/psteele/z6gbM/)

# wordpress - 删除部分网址

> ID：15747219
> 
> 赞同：0
> 
> 时间：2013-04-01T16:25:31.573
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting, rewrite

[http://website.com/wp-content/uploads/a87ff.gif](http://website.com/wp-content/uploads/a87ff.gif)

我如何进行 mod 重写以将其更改为

[http://website.com/a87ff](http://website.com/a87ff)

htaccess 看起来像这样

```
# BEGIN WordPress
# END WordPress

# BEGIN wtwp_cache
# END wtwp_cache

# BEGIN wtwp_security
# END wtwp_security 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:29:20.203

要将请求重定向`http://website.com/wp-content/uploads/a87ff.gif`到`http://website.com/a87ff`，您必须捕获所需的部分并在替换中使用它

```
RewriteEngine on
RewriteRule ^wp-content/uploads/(.+?)\.gif$ /$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:30:24.933

试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{DOCUMENT_ROOT}/wp-content/uploads/%{REQUEST_URI}.gif -f
RewriteRule (.*) /wp-content/uploads/$1.gif [L] 
```

让我们通过这个来了解发生了什么：

**RewriteCond** - 使用此条件，我们正在检查请求的文件是否确实存在于适用的文件夹中。因此，如果您`/test-image`作为 URI 输入，它将检查是否`wp-content/uploads/test-image.gif`存在。

**RewriteRule** - 现在，如果文件确实存在，我们将默默地将它传递给实际文件。换句话说，我们将让 Apache 加载确实存在的文件，而不更改用户可见的 URI。

**在你的情况下：**

如果我们输入这个：             `http://website.com/a87ff`

服务器将加载：     `http://website.com/wp-content/uploads/a87ff.gif`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:46:25.490

```
Options +FollowSymlinks
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^website\.com
RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)$
RewriteRule ^/? /wp-content/uploads/%1.gif [NC] 
```

现在，试试这个！但它尚未测试，因为我在移动。((; 与此代码的第二版不同。

# c# - 使用 Linq 查找重复项但获取整个记录

> ID：15747220
> 
> 赞同：9
> 
> 时间：2013-04-01T16:25:36.757
> 
> 标签：c#, linq, duplicates

所以我正在使用这段代码

```
 var duplicates = mg.GroupBy(i => new { i.addr1, i.addr2 })
                    .Where(g => g.Count() > 1)
                    .Select(g=>g.Key);
    GridView1.DataSource = duplicates;
    GridView1.DataBind(); 
```

根据 addr1 和 addr2 在表中查找并列出重复项。这段代码的唯一问题是，当我真正想要显示记录的所有字段时，它只给了我一对重复的 addr1 和 addr2。（所有字段，如 ID、addr1、addr2、city、state...）

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T16:28:51.787

要获取所有值，您可以使用`ToList()`on`IGrouping`

```
var duplicates = mg.GroupBy(i => new { i.addr1, i.addr2 })
                   .Where(g => g.Count() > 1)
                   .Select(g => new {g.Key, Values = g.ToList()}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-01T16:26:51.527

您应该使用`First()`而不是`Key`：

```
var duplicates = mg.GroupBy(i => new { i.addr1, i.addr2 })
                .Where(g => g.Count() > 1)
                .Select(g => g.First()); 
```

它返回每个重复组的第一行

# c++ - 为什么这个基本线程程序在 Clang 中失败但在 g++ 中通过？

> ID：15747223
> 
> 赞同：7
> 
> 时间：2013-04-01T16:26:00.080
> 
> 标签：c++, c++11

我有这个与线程一起工作的简单程序。在 Clang 中，我得到了一堆令人困惑的无关错误。这是程序：

```
#include <iostream>
#include <thread>
#include <future>

int main()
{
   std::packaged_task<int()> task([] { return 1; });
   std::future<int> result = task.get_future();

   task();

   std::cout << "Result was: " << result.get();
} 
```

错误：

> `std::chrono::duration<long, std::ratio<1, 1000000> >`错误：没有用于初始化“持续时间”（又名“ ”）的匹配构造函数：_d *（*`'std::chrono::time_point<std::chrono::system_clock, std::chrono::duration<long, std::ratio<1, 1000000> > >::time_point<std::chrono::duration<long, std::ratio<1, 1000000000> > >'` _t.time_since_epoch（））注意：在此处请求的函数模板特化的实例化中

还有更多，但您可以在程序的[这个链接](http://liveworkspace.org/code/4yc7Hy%243290)中看到它。奇怪的是，它在 g++ 4.7.3 和 4.6.3 中编译得很好。为什么这只发生在 Clang 中？

**更新：**正如大卫指出的那样，当我包含`<future>`标题时，它似乎只是失败了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T16:44:36.803

这是 clang/libstdc++ 中记录的错误。

[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=666539](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=666539)

[http://llvm.org/bugs/show_bug.cgi?id=12893](http://llvm.org/bugs/show_bug.cgi?id=12893)

从 Clang 的[状态页面](http://clang.llvm.org/cxx_status.html)：

> Clang 的 C++11 模式可以与 libc++ 或 gcc 的 libstdc++ 一起使用，但需要补丁才能使 libstdc++-4.4 在 C++11 模式下与 Clang 一起使用。还需要补丁才能使 libstdc++-4.6 和 libstdc++-4.7 在 C++11 模式下与 3.2 版之前的 Clang 版本一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:43:20.287

这是 libstdc++ 和 clang 之间的不兼容问题。如果您要针对 libstdc++ 4.8.0 进行构建，这个问题就会消失。

```
[11:43am][wlynch@apple /tmp] /opt/llvm/3.2/bin/clang++ -std=gnu++11 -gcc-toolchain /opt/gcc/4.8.0 se.cc |& wc -l
0
[11:43am][wlynch@apple /tmp] /opt/llvm/3.2/bin/clang++ -std=gnu++11 -gcc-toolchain /opt/gcc/4.7.2 se.cc |& wc -l
21 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T12:52:50.627

如果在 clang 3.2 中发生这种情况，则不是[bug 12893](http://llvm.org/bugs/show_bug.cgi?id=12893)（已在 clang 3.2 中修复）。

更有可能是[这个错误](http://llvm.org/bugs/show_bug.cgi?id=15517)，这实际上是 libstdc++ 4.7 中的一个错误：[http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=53841](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53841)

# java - 错误：参数的非法修饰符

> ID：15747231
> 
> 赞同：1
> 
> 时间：2013-04-01T16:26:32.353
> 
> 标签：java, static, int, public, final

我正在使用这些代码行...

```
public static final int WIDTH = 240;
public static final int HEIGHT = 350;
public static final int SCALE = 2; 
```

但我总是遇到这些错误......

```
Illegal modifier for parameter WIDTH; only final is permitted
Illegal modifier for parameter HEIGHT; only final is permitted
Illegal modifier for parameter SCALE; only final is permitted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:30:44.070

我希望您尝试在局部变量声明或方法参数声明上使用`public`和。`static`局部变量/参数只能是`final`.

你只能在类成员（或类似的）上使用`public`和。`static`

# itext - 如何为 PDF 的根大纲设置操作

> ID：15747233
> 
> 赞同：0
> 
> 时间：2013-04-01T16:26:36.350
> 
> 标签：itext

如何在 PDF 的根大纲上设置操作？

我知道我可以在一个有根的孩子身上做到这一点：

```
newOutline = new PdfOutline (rootOutline, PdfAction.GotoLocalPage ("1", false), rootNode.DivisionLabel, true); 
```

但是我如何为根做同样的事情呢？

因为我不能设置根大纲（它是只读的），我也不能为它设置一个动作。我是这样开始的：

```
PdfReader inputPdf = new PdfReader (rs);  
int pageCount = inputPdf.NumberOfPages;  
PdfStamper stamper = new PdfStamper (inputPdf, ws);  
PdfWriter writer = stamper.Writer;  
writer.ViewerPreferences = PdfWriter.PageModeUseOutlines;  
PdfContentByte cb = writer.DirectContent;  
PdfOutline rootOutline = cb.RootOutline; 
```

谢谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:32:36.720

我永远无法让 stamper.writer 返回的 PdfWriter 工作。我必须更改我的方法，使其使用独立的 PdfReader 和 PdfWriter 对，我可以在其中将页面从输入 PDF 复制到输出 PDF，同时添加所需的本地目的地和大纲。使用 iTextSharp 非常令人沮丧...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-03T16:56:09.687

我不确定您是否可以为根大纲设置操作。什么时候触发？根只是任何其他轮廓的容器。

如果您想在文档打开时始终转到第 1 页，那么还有其他方法可以做到这一点。

# java - 如何忽略日志记录

> ID：15747234
> 
> 赞同：-3
> 
> 时间：2013-04-01T16:26:41.167
> 
> 标签：java, annotations, slf4j

目前，我的代码使用 slf4j 的实现。使用 url (wsdl) 获取记录器。因此，我无法在独立的开发环境中测试我的代码，除非我启动了托管服务的巨型服务器。除了评论相关代码之外，有没有人知道我可以让我的 Eclipse 忽略类中 org.slf4j,impl.LoggingService 的使用？我认为像@Ignore 这样带有类参数的注释会很棒。这可以帮助某人将这些类作为参数传递，在代码中调用这些参数需要被忽略。我愿意为它编写自己的注释实现。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:31:35.073

SLF4J 将日志 API 从底层实现中分离出来，您应该能够通过选择不同的日志实现在运行时切换实现。因此，例如忽略所有日志记录请求的 slf4j-noop.jar。

# c# - 基于平均值预测数据

> ID：15747241
> 
> 赞同：1
> 
> 时间：2013-04-01T16:27:00.917
> 
> 标签：c#, serial-port, data-processing

我每秒都有 GPS 数据进入我的 PC 上的串行端口。我已经成功处理了 GPS 数据，并且纬度和经度作为浮点数存储在单独的数组中。

```
double[] dlat = new double[100000]; //contains the latitude data
double[] dlon = new double[100000]; //contains the longitude data 
```

大多数时候，纬度和经度数字保持不变，因为 GPS 位置仅每 5 米变化一次。当数组中的纬度或经度值发生变化时，我希望我的程序根据变化之间存储的数据点的纬度或经度的平均值进行预测。例如：

假设这是`latitude`数组的内容：

```
2,2,2,2,2,17 
```

我希望我的程序将数组中的内容更改为：

```
2,5,8,11,14,17 
```

我已经尝试解决这个问题，但我的方法不起作用：-/我是 C# 新手；必须有更好的方法来做到这一点。这是我尝试进行预测的代码片段（后面`---GPS coordinate prediction---`的位是不起作用的位）：

```
string RxString;// where the raw serial data is stored
string mag;
double[] dmag = new double[100000];//magnetic data stored here
string lat;
double[] dlat = new double[100000];//latitude data stored here
string lon; 
double[] dlon = new double[100000];//longitude data stored here
double average;//average step between change in latiude
int i; //pointer double array data;
int count;//counter for prediction code

private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)//activates when port is open and data in buffer
{
    RxString = serialPort1.ReadTo("\r\n");//read raw data from serial port into string
    this.Invoke(new EventHandler(DisplayText));//invoke allows it to call function diplay text*/

    if(RxString.StartsWith("G"))
    {
       lat = RxString.Split(',')[0].Substring(4);// extract latitude
       this.Invoke(new EventHandler(DisplayText1));//invoke allows it to call function diplay text
       dlat[i] = Convert.ToDouble(lat);//convert and store in double array
       this.Invoke(new EventHandler(Form1_Load));//invoke allows it to call function 

       lon = RxString.Split(',')[2];// extract longitude
       this.Invoke(new EventHandler(DisplayText2));//invoke allows it to call function diplay text
       dlon[i] = Convert.ToDouble(lon);//covert and store in double array
       this.Invoke(new EventHandler(Form1_Load));//invoke allows it to call function 

       mag = RxString.Split(',')[3].Substring(6).Trim();// extract magnetic data 
       this.Invoke(new EventHandler(DisplayText3));//invoke allows it to call function diplay text
       dmag[i] = Convert.ToDouble(mag);//convert and store in double array
       this.Invoke(new EventHandler(Form1_Load));//invoke allows it to call function 
       i++;
       RxString = null;

        /* -------------------------GPS coordinate prediction--------------------------------------------- */

       if (i > 0)
       {
           if (dlat[i] == dlat[i - 1])
           {
               count++;
           }
           if (dlat[i] != dlat[i - 1])
           {
               double average = (dlat[i] - dlat[i - 1]) / (count);//average data step beween changed values
               int firstAv = i - (count - 1);//position of first average
               int lastAv = i - 1;//position of last average

               for (int j = firstAv; j <= lastAv; i++)
               {
                   dlat[j] = dlat[j - 1] + average;
               }

               count = 0;
           }
       }
       if (i==0) count = 1;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:55:36.233

以下作品：

```
 using System;
    using System.Text;

    namespace Practice
    {
        public class Hello
        {
            static double[] ldat = {2.0,2.0,2.00,2.0,2.0,17.0};
            static double[] ldat2 = {2.0,3.0,4.00,4.0,7.0,19.0};
            static double[] ldat3 = {0.0, 0.0, -5.0, -5.0, -11.0, -11.0, -20};

            public static void Main(string[] args)
            {
                test(ldat);
                test(ldat2);
                test(ldat3);
            }

            public static void test(double[] array){
                //Use Code from here.....
                int firstEqualIndex = -1;
                for(int i = 1; i < array.Length ; i ++)
                {
                    if (i > 0)
                    {
                        if(array[i] == array[i - 1])
                        {
                            if(firstEqualIndex == -1)
                            {
                                firstEqualIndex = i - 1;
                            }
                        }
                        else //They are not equal
                        {
                            //Figure out the average.
                            if(firstEqualIndex >= 0)
                            {
                                double average = (array[i] - array[firstEqualIndex]) / (Double)((i - firstEqualIndex));
                                int k = 0;
                                for(int j = firstEqualIndex; j < i; j++)
                                {
                                    array[j] += average * k;
                                    k++;
                                }
                                firstEqualIndex = -1;
                            }
                        }
                    }
                }
                //..... to here.
                StringBuilder builder = new StringBuilder();
                foreach (double entry in array)
                {
                    // Append each int to the StringBuilder overload.
                    builder.Append(entry).Append(", ");
                }
                string result = builder.ToString();
                Console.WriteLine(result);
            }
        }
    } 
```

该测试输出

```
2, 5, 8, 11, 14, 17, 
2, 3, 4, 5.5, 7, 19,
0, -2.5, -5, -8, -11, -15.5, -20, 
```

抱歉，我正在尝试确保该方法适用于其他测试用例的所有编辑。

**编辑**：添加了对否定案例的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:51:02.400

我会根据信号处理来阐述这个问题。因此，如果您有一个信号`f(t)`（例如，可能是您的离散化`latitude`数组），您希望创建一个`g(t)`由定义的新信号

```
g(t) = E[f(z) | t-0.5*w <= z <= t+0.5*w] 
```

其中`E`表示期望值（或平均值）并且`w`是过滤器的宽度。

以这种方式对问题进行建模的好处之一是您有一种非常具体的方式来指定您的运动模型。也就是说，您将如何转换数据 [0, 0, 0, 0, 1, 1, 1, 1]？

应该是 [0, 0, 0, 1/3, 2/3, 1, 1, 1]？

还是应该是 [0, 1/7, 2/7, 3/7, 4/7, 5/7, 6/7, 1]？

鉴于您知道样本之间经过了多长时间，您可以选择`w`指定所需模型的持续时间。

另一个好处是，如果您想要一个非线性运动模型，您也可以轻松地扩展到该模型。在我上面给出的示例中，我使用了一个盒子过滤器来进行平滑处理，但是您可以使用其他东西来考虑您正在跟踪的任何东西的加速/减速的物理限制。形状更像高斯曲线的滤波器可以实现这一点。

# android - 如何检测 onResume() 是从 onCreate() 调用、从应用程序唤醒还是从切换活动调用？

> ID：15747244
> 
> 赞同：2
> 
> 时间：2013-04-01T16:27:15.823
> 
> 标签：android, android-lifecycle, android-tabactivity, android-wake-lock

我对android的生命周期如何工作以及如何检测onResume等函数调用的来源有点困惑。

让我这样陈述这个问题。我有一个包含 5 个活动的应用程序，它们将使用选项卡活动进行导航。

所以在切换每个选项卡后，我知道`onPause()`当前活动和`onResume()`新活动将被调用。

在活动 B 中说，我按下后退按钮，然后返回到 android 的主屏幕。重新打开应用程序后，活动 B 将是`onResume()`.

我希望实现的是，当从主屏幕恢复活动时，内容和数据将被刷新。但在标签切换期间它们应该保持不变。

有什么办法可以做到这一点？我怎么知道活动是从 android 主屏幕还是从选项卡开关恢复？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:03:36.067

我不知道你的应用程序逻辑是如何设置的，但你总是可以在某个地方有一个公共静态变量，你可以更改它来保存 lastScreen 的标签。

例如：

把它放在你的主要活动中，例如：

```
public enum LastScreen {
        NONE, TAB1, TAB2 , TAB3 , MAIN_SCREEN
    }

public static LastScreen lastScreen = LastScreen.NONE; 
```

并在每个选项卡中执行以下操作，然后再切换：

```
MainActivity.lastScreen = LastScreen.TAB1; 
```

在 onResume() 你可以检查它：

```
if(MainActivity.lastScreen == LastScreen.TAB1)
   //do something!
else if (MainActivity.lastScreen == LastScreen.MAIN_ACTIVITY)
   //do something else! 
```

# outlook - html email outlook 要求下载图片

> ID：15747245
> 
> 赞同：0
> 
> 时间：2013-04-01T16:27:15.793
> 
> 标签：outlook, html-email

可能绝对没有办法做到这一点，而且它也可能被不赞成。当我向 Outlook 发送 html 电子邮件时，有时会询问用户是否要下载图像，有时他们只是加载。我的第一个问题是为什么会这样？我的第二个问题是，有没有办法阻止 Outlook 询问并自动下载图像，还是只有用户才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:58:04.010

如果图像是嵌入的图像附件，则不会有提示。

如果 HTML 引用外部图像，则必须使用无法传输且只能由最终用户或以编程方式在本地设置的特殊属性标记消息（PR_BLOCK_STATUS 属性 - 请参阅下面 [MS-OXOMSG].pdf 的摘录.

如果您使用 Redemption，可以使用 RDOMail.DownloadPictures 属性设置该属性：[http ://www.dimastr.com/redemption/RDOMail.htm](http://www.dimastr.com/redemption/RDOMail.htm)

* * *

2.2.1.1 PidTagBlockStatus

类型：PtypInteger32 8

指示用户在消息正文中查看外部内容（例如指向 HTTP 服务器上的图像的链接）的偏好。客户端可以忽略此值并始终根据其他因素（例如发件人是否在安全列表中）允许或阻止外部内容。如果使用此属性，则默认操作是阻止外部内容。但是，如果此属性的值在一定范围内，则允许查看外部内容。允许的值是从 PidTagMessageDeliveryTime 计算出来的：因为消息的发送者不知道这个值，所以发送者不能可靠地将 PidTagBlockStatus 设置为允许的值。

要计算允许的值，请将 PidTagMessageDeliveryTime 的值转换为 PtypDouble、floatdate，其中日期表示为从 1899 年 12 月 30 日午夜开始的天数。应用以下公式：result = ((floatdate - floor(floatdate) ) * 100000000) + 3; 其中 floor(x) 返回最大整数？X。将 PtypDouble 值结果转换为 32 位整数计算值。客户端应该将 PidTagBlockStatus 设置为 computedvalue 以允许外部内容。但是，在确定是否接受外部内容时，如果 computedvalue 与 PidTagBlockStatus 的值之间的差值的绝对值为 1 或更小，则客户端应该允许外部内容。

# ruby-on-rails - Rails 多态关联 - has_many 条件错误

> ID：15747247
> 
> 赞同：1
> 
> 时间：2013-04-01T16:27:25.080
> 
> 标签：ruby-on-rails, activerecord, polymorphic-associations, has-many-polymorphs

我正在使用 rails 3.2.8 并且在多态关联方面遇到了一些麻烦。我有一个模型活动，它是多态的，它与另一个多态模型贡献相关，可以是资产文件、传记、动态注释或引用。

所以祖父是活动......父亲是贡献，最后（贡献的）儿子是传记，资产文件，动态注释或引文。

我的模型东西聚合了所有这些概念，我有下一个代码：

```
 has_many :activities, 
           :order => 'created_at DESC', 
           :dependent =>:delete_all

  has_many :contributions,
           :through => :activities,
           :source => :activable,
           :source_type => "Contribution"

  has_many :dynamic_annotations,
           :through => :contributions,
           :source => :contributable,
           :source_type => "DynamicAnnotation",
           :conditions => {"contributions.c_state" => "ACCEPTED"}

  has_many :biographies,
           :through => :contributions,
           :source => :contributable,
           :source_type => "Biography",
           :conditions => {"contributions.c_state" => "ACCEPTED"}

  has_many :citations,
           :through => :contributions,
           :source => :contributable,
           :source_type => "Citation",
           :conditions => {"contributions.c_state" => "ACCEPTED"}

  has_many :asset_files,
           :through => :contributions,
           :source => :contributable,
           :source_type => "AssetFile",
           :conditions => {"contributions.c_state" => "ACCEPTED"} 
```

问题：我打开控制台并输入了下一个查询：

```
Thing.first.biographies 
```

我得到的sql：

```
SELECT `biographies`.* FROM `biographies` INNER JOIN `contributions` ON `biographies`.`id` = `contributions`.`contributable_id` INNER JOIN `activities` ON `contributions`.`id` = `activities`.`activable_id` WHERE `activities`.`thing_id` = 1 AND `activities`.`activable_type` = 'Contribution' AND (`contributions`.`c_state` = 'ACCEPTED') AND (`contributions`.`contributable_type` = 'Biography') 
```

这是一个正确的答案

然后我在命令后输入：

```
Thing.first.dynamic_annotations 
```

我得到的sql：

```
SELECT `dynamic_annotations`.* FROM `dynamic_annotations` INNER JOIN `contributions` ON `dynamic_annotations`.`id` = `contributions`.`contributable_id` INNER JOIN `activities` ON `contributions`.`id` = `activities`.`activable_id` WHERE `activities`.`thing_id` = 1 AND `activities`.`activable_type` = 'Contribution' AND (`contributions`.`c_state` = 'ACCEPTED') AND (`contributions`.`contributable_type` = 'Biography' AND `contributions`.`contributable_type` = 'DynamicAnnotation') 
```

我得到了一个 void 结果，因为该对象不能有两种类型的 corse。

如果有人可以帮助我，我会很感激:)

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:13:05.030

我发现了一个 rails 问题：[https](https://github.com/rails/rails/issues/3882) ://github.com/rails/rails/issues/3882使用“alarribeau”解决问题的解决方法。这不是一个修复，但它可以帮助你。

# jquery - 我应该将单位“px”添加到 jQuery 的 css 函数中的数值吗？

> ID：15747249
> 
> 赞同：5
> 
> 时间：2013-04-01T16:27:26.450
> 
> 标签：jquery, integer

以下有什么区别吗？

`$(elem).css({ height : 100 })`

`$(elem).css({ height : 100+'px' })`

我在谷歌搜索了很长时间，但没有找到答案。在 jquery.com 上有 px 和整数值的示例......浏览器或操作系统有什么不同吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T16:48:00.550

jQuery 自动将单位“px”（作为默认单位）添加到大多数 css 属性的所有数字，包括“高度”：

[请参阅src/css.js](https://github.com/jquery/jquery/blob/85ee87b4444e1322f3a5b1a033902b3f9764b1ef/src/css.js#L221)中的第 221 行

```
// If a number was passed in, add 'px' to the (except for certain CSS properties)
if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
    value += "px";
} 
```

`!jQuery.cssNumber[ origName ]`不包括以下 CSS 属性：

*   列数
*   填充不透明度
*   字体重量
*   线高
*   不透明度
*   孤儿
*   寡妇
*   z索引
*   飞涨

（旁注：如果您一开始像我一样对排除“lineHeight”感到惊讶：[没有单位的数字将乘以当前字体大小以设置行高](http://www.w3schools.com/cssref/pr_dim_line-height.asp)- 所以属性存在差异' line-height' 当你指定/省略单位时）

# android - 开箱即用的应用程序引擎连接的 android 项目不工作 - 应用程序崩溃

> ID：15747250
> 
> 赞同：3
> 
> 时间：2013-04-01T16:27:41.030
> 
> 标签：android, google-app-engine, osx-mountain-lion, eclipse-juno, gae-eclipse-plugin

我一直在关注关于使用 eclipse 插件[创建 App Engine 连接的 Android 项目的简单教程。](https://developers.google.com/eclipse/docs/endpoints-androidconnected-gae)

设置完所有内容后，运行项目会导致两种可能性：

*   如果`LOCAL_ANDROID_RUN = false`，项目吐出预期的抱怨：

    1) 向 Google Cloud Messaging 注册...成功！2) 向端点服务器注册...失败

    您的 Cloud Endpoints 服务器未部署到 App Engine，或者需要通过在 CloudEndpointUtils.java 中将 LOCAL_ANDROID_RUN 设置为“true”来更改您的设置以针对本地实例运行。

*   如果`LOCAL_ANDROID_RUN = true`，第二次我点击“注册”应用程序崩溃！这是我没有得到的部分。我正在开箱即用地运行该项目。我唯一做的就是`LOCAL_ANDROID_RUN`从假变为真。

因此，过去四个小时我一直在研究解决方案。我看到有关`-a 0.0.0.0`或的讨论`-bindAddress 0.0.0.0`；除非我错误地设置它们（我可能是），否则它们不起作用。有时我会收到下面的“错误”。`apply`因此，如果这是我的问题，那么在单击and之前，我应该在参数框中究竟有什么`run`？

```
Options:
 --help, -h                 Show this help message and exit.
 --server=SERVER            The server to use to determine the latest
  -s SERVER                   SDK version.
 --address=ADDRESS          The address of the interface on the local machine
  -a ADDRESS                  to bind to (or 0.0.0.0 for all interfaces).
 --port=PORT                The port number to bind to on the local machine.
  -p PORT
 --sdk_root=DIR             Overrides where the SDK is located.
 --disable_update_check     Disable the check for newer SDK versions.
 --generated_dir=DIR        Set the directory where generated files are created.
 --jvm_flag=FLAG            Pass FLAG as a JVM argument. May be repeated to
                              supply multiple flags. 
```

关于如何让这个`out of the box`项目工作的任何见解？

# html - 使用 CSS 将 DIV 向右下角浮动

> ID：15747259
> 
> 赞同：11
> 
> 时间：2013-04-01T16:28:20.617
> 
> 标签：html, css

我有三个 DIV，在 DIV 内，我想将“了解更多”浮动到右下角，这样它就会位于灰色背景的顶部。

![三格](https://i.stack.imgur.com/Bg1Hn.png)

## CSS

```
/* the div for LEARN MORE */
#trt {
    z-index: 9999999999999;
    position: relative;
    float: right;
    bottom: 0; // not working
    top: 12; //not working
}

/* the entire div */
.main .cols { padding-left: 2px; padding-right: 0px; padding-top: 10px; }
.main .cols .col { width: 315px; height: 108px; float: left;  background: url(images/tempf.png) no-repeat 0 0; }
.main .cols .col:after { content:''; width: 100%; clear: both; }
.main .cols .col + .col { padding-left: 20px; }
.main .cols .col img.hid { float: left; width: 129px; height: 108px;  }
.main .cols .col-cnt { width: 183px; float: right; }
.main .cols .col .more { font-weight: bold; color: #0206AA; } 
```

## HTML

```
<div class="main">              
    <section class="cols">
        <div class="col">
            <a href="link.aspx">
                <img class="hid" src="css/images/orgNews.png" alt="" />
            </a>
            <div class="col-cnt">
                <h3 style="color: #FFFFFF;">Organization News</h3>
                <p style="color: #FFFFFF;">Interfaith Medical Center related news and updates</p>
                <div id="trt">
                    <img src="css/images/arrow.png" width=11 height=11 align=absmiddle />
                    <a href="link.asp" class="more">Learn More</a>
                </div>
            </div>
        </div>
    </section>
</div> 
```

## CSS - 编辑后

```
.trt {
    z-index: 9999999999999;
    position: absolute;
    bottom: 3px;
    right: 3px;
}
...
.main .cols .col-cnt { width: 183px; float: right; position: relative; }
... 
```

![编辑后](https://i.stack.imgur.com/kCKCd.png)

这个 CSS 工作：

```
.trt {
    z-index: 9999999999999;
    position: absolute;
    top: 85px;
    right: 3px;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T16:31:54.627

将`col-cnt`div`position: relative`设置`trt`为`position: absolute; bottom:3px; right:3px;`那个应该可以让你到达你需要的地方。`trt`如果它被重用，应该是一个类

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-22T15:32:00.540

首先，您必须将#trt 的父级设置为相对。

```
#parent-of-trt  {
   position: relative;
} 
```

并将#trt 设置为绝对

```
#trt {
   position: absolute;
   left: 4px;
   bottom: 5px;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T16:35:29.397

由于`#trt`div 的宽度问题，您的 float: right 无法正常工作。基本上它延伸了 100% 的宽度，因此从技术上讲它不能向左或向右移动。而不是浮动，只需使用...

```
#trt { text-align: right; } 
```

？？？

至于让它被推到那条灰线上，添加一些`margin-top`来`#trt`做到这一点......

其他解决方案是使用`position: absolute;`，但不太可取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T16:32:44.243

也许使用位置：绝对；而不是相对的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-16T10:30:21.590

更改固定位置，如下所示：

`position:fixed;`

它应该工作。

# javascript - 将列表从 c# 传递到 asp.net 并且它没有获取数据

> ID：15747264
> 
> 赞同：0
> 
> 时间：2013-04-01T16:28:51.223
> 
> 标签：javascript, asp.net, google-maps-api-3

**我做出了 Mikey 建议不要使用 Session 的更改，但我的地图上仍然没有任何内容**

我正在向我的asp页面传递一个谷歌地图的经度列表，如下所示：

```
 public List<string> GetLatLonList()
  {
        var list = new List<string>();
        list.Add("43.169582 , -76.823404");
        list.Add("43.169133 , -76.822956");
        list.Add("43.169115 , -76.821818");
        list.Add("43.169151 , -76.820488");
        list.Add("43.170049 , -76.820424");
        return string.Join(";", list.ToArray());
      } 
```

这是我的 asp.net 页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="MultipleMarker.aspx.cs" Inherits="MultipleMarker" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script type ="text/javascript">
  var map; var infowindow;
  var latlons = 'System.Collections.Generic.List`1[System.String]';

    function InitializeMap() {

      var latlng = new google.maps.LatLng(latlons[0]);
      console.log("latlng:" + latlng);
        var myOptions =
        {
            zoom: 8,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map"), myOptions);
    }

    function markicons() {

        InitializeMap();

        var ltlng = [];

      //        ltlng.push(new google.maps.LatLng(17.22, 78.28));
      //        ltlng.push(new google.maps.LatLng(13.5, 79.2));
      //        ltlng.push(new google.maps.LatLng(15.24, 77.16));

        var length = latlons.length;
        for (var i = 0; i < length; i++) {
          console.log(latlons[i]);
          ltlng.push(new google.maps.LatLng(latlons[i]));
        }

        map.setCenter(ltlng[0]);
        for (var i = 0; i <= ltlng.length; i++) {
            marker = new google.maps.Marker({
                map: map,
                position: ltlng[i]
            });

            (function (i, marker) {

                google.maps.event.addListener(marker, 'click', function () {

                    if (!infowindow) {
                        infowindow = new google.maps.InfoWindow();
                    }

                    infowindow.setContent("Message" + i);

                    infowindow.open(map, marker);

                });

            })(i, marker);

        }

    }

    window.onload = markicons; 

</script>
<h2>Multiple Markers Demo:</h2>
<div id ="map"   
        style="width: 80%; top: 51px; left: 32px; position: absolute; height: 80%">

</div>
</asp:Content> 
```

屏幕上没有内容。它提出了一张空白地图。我没有收到任何 javascript 错误，所以我不确定它为什么不起作用。

这是我第一次尝试 javascript。任何人都知道为什么我有问题？

编辑#2 回应 Mikey

这是运行时页面的来源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title></head>
<body>
    <form method="post" action="MultipleMarker.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTEwMDUyNjYzMjhkZOATrmZzTn3jrg2qYoyIsT7K8EJcig29Z1QzbaXOQK0d" />
</div>

    <div>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script type ="text/javascript">
  var map; var infowindow;
  var latlons = 'System.Collections.Generic.List`1[System.String]';

    function InitializeMap() {

      var latlng = new google.maps.LatLng(latlons[0]);
      console.log("latlng:" + latlng);
        var myOptions =
        {
            zoom: 8,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map"), myOptions);
    }

    function markicons() {

        InitializeMap();

        var ltlng = [];

      //        ltlng.push(new google.maps.LatLng(17.22, 78.28));
      //        ltlng.push(new google.maps.LatLng(13.5, 79.2));
      //        ltlng.push(new google.maps.LatLng(15.24, 77.16));

        var length = latlons.length;
        for (var i = 0; i < length; i++) {
          console.log(latlons[i]);
          ltlng.push(new google.maps.LatLng(latlons[i]));
        }

        map.setCenter(ltlng[0]);
        for (var i = 0; i <= ltlng.length; i++) {
            marker = new google.maps.Marker({
                map: map,
                position: ltlng[i]
            });

            (function (i, marker) {

                google.maps.event.addListener(marker, 'click', function () {

                    if (!infowindow) {
                        infowindow = new google.maps.InfoWindow();
                    }

                    infowindow.setContent("Message" + i);

                    infowindow.open(map, marker);

                });

            })(i, marker);

        }

    }

    window.onload = markicons; 

</script>
<h2>Multiple Markers Demo:</h2>
<div id ="map"   
        style="width: 80%; top: 51px; left: 32px; position: absolute; height: 80%">

</div>

    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:15:42.273

请通过以下链接。在这篇文章中，我将复杂的数据传递给图表 API。你可以从这篇文章中得到想法。

[如何在asp.net中使用google chart[google chart]](http://aspdotnetcodebook.blogspot.in/2012/06/how-to-used-google-chart-in-aspnet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:49:46.343

似乎您在不理解它们的情况下将内容 CTRL-V-ing 到您的页面中...以下方法将使您更接近..

在您后面的代码中：

```
public string getLatLonList()
{
        var list = new List<string>();
        list.Add("[43.169582 , -76.823404]"); // this is the center
        list.Add("[43.169133 , -76.822956]"); // these are the marks
        list.Add("[43.169115 , -76.821818]");
        list.Add("[43.169151 , -76.820488]");
        list.Add("[43.170049 , -76.820424]");
        return string.Join(",", list.ToArray());    
        // TODO:  cache the above list so you're not always creating it..  
        // e.g. create the list on Page_Load and simply return its string representation in this method..
} 
```

然后在你的aspx中：

```
var latlons = [<%= getLatLonList() %>];
function InitializeMap() {

  var latlng = new google.maps.LatLng(latlons[0][0], latlons[0][1]);
  console.log("latlng:" + latlng); 
```

你需要*调试*它..

这是另一个javascript函数：

```
function markicons() {
    InitializeMap();

    // TODO: ensure there at least 2 items in the latlons list...
    for (var i = 1; i < latlons.length; i++) {
        marker = new google.maps.Marker({
            map: map,
            position: latlons[i][0], latlons[i][1]
        });

        (function (i, marker) {

            google.maps.event.addListener(marker, 'click', function () {

                if (!infowindow) {
                    infowindow = new google.maps.InfoWindow();
                }

                infowindow.setContent("Message" + i);

                infowindow.open(map, marker);

            });

        })(i, marker);

    }

} 
```

# azure - Azure 虚拟机启动任务

> ID：15747266
> 
> 赞同：6
> 
> 时间：2013-04-01T16:28:52.817
> 
> 标签：azure, azure-vm-role

我们正在创建一个多租户应用程序并将其托管在 Window Azure IaaS 平台上。我们希望使用 PowerShell 远程配置和配置我们所有的虚拟机。我们不想为任何配置将 RDP 引入虚拟机。

Azure VM 是否支持启动任务以执行类似于 Web-Role 和 Worker-Role 的 power shell 脚本？

如果不是，那么是否有任何可用的替代方法（如 PsExec 之类的工具）可以帮助执行启动脚本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T16:31:12.987

你的虚拟机只是虚拟化的 Windows/Linux 机器，它支持像往常一样的启动任务。

对于 Windows 虚拟机，您需要：

1.  下载基础 Azure Windows Server 来宾 VM。
2.  自定义机器的启动流程，[执行启动脚本](http://technet.microsoft.com/en-us/library/cc770556.aspx)。
3.  将您的自定义 VM 推送回 Azure。
4.  配置 Azure 以启动您的自定义 VM。

> 注意：您还可以[使用 PowerShell 远程](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/e477e6a1-eb8b-43f7-8089-6837ae3ee34c)访问远程 VM 上的 PowerShell ，其方式类似于使用 SSH 访问远程 [LI|U]N[U|I]X 框/VM 的控制台。

FWIW，Git 是用于下拉和执行 VM 配置脚本的好工具：您的虚拟机启动脚本可以使用[Chocolatey](http://chocolatey.org)安装最新版本的 GIT（如果尚未安装），然后使用 Git 下拉来自 GitHub/similar 的最新版本的启动脚本并执行它。这样您就不需要在每次脚本更改时都不断地重建 VM 映像。

# objective-c - 使用 ARC 的 Objective-C 命名约定和可能的警告

> ID：15747267
> 
> 赞同：8
> 
> 时间：2013-04-01T16:28:54.113
> 
> 标签：objective-c, automatic-ref-counting, llvm-clang

我有纯ARC编码的经验。作为编译器功能，它尊重 Objctive-C 方法系列，在需要时放置正确的保留/释放调用。

所有以,开头的方法`alloc`，并创建一个新对象。它们增加了保留计数。因此，当我不再需要它时，ARC 将释放任何指针（以及与之关联的对象）。`mutableCopy``copy``new`

我认为当我编写不遵循命名约定的方法时可能会出现问题。例如，如果我`newCustomer`在第一个版本中编写这样的方法返回一个自动释放的对象，而在第二个版本中没有，会发生什么？

特别是，我的问题如下（它们属于相同的推理）：

*   如果调用和被调用的代码都用 ARC 编译会发生什么？
*   **(a)**如果调用代码使用 ARC 编译，而被调用代码使用非 ARC 编译，会发生什么情况？
*   **(b)**如果调用代码使用非 ARC 编译，而被调用代码使用 ARC 编译，会发生什么情况？

如果答案显示了 ARC 如何在幕后工作（ , 等），我们将不胜`objc_release`感激`objc_retainAutoreleasedReturnValue`。

先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T16:53:57.010

命名的方法`newCustomer`属于`new` [方法族](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#arc-method-families)，因此被隐式标记为返回保留对象。当调用代码和被调用代码都使用 ARC 编译时，ARC 会平衡额外的保留与调用者中的释放：

> 从这样的函数或方法返回时，ARC 会在返回语句的求值点保留该值，然后再离开所有本地范围。
> 
> 当从这样的函数或方法接收到返回结果时，ARC 会在包含它的完整表达式的末尾释放值，但要服从对局部值的通常优化。

[来源](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#retained-return-values)

如果`newCustomer`使用手动引用计数实现并违反命名约定（即，不返回保留对象），则调用者可以根据情况过度释放或释放不足。

如果调用者使用 ARC，则返回的对象`newCustomer`将被过度释放 - 可能导致程序崩溃。这是因为调用代码将参与上述过程的后半部分，而在此之前没有执行相应的保留。

如果调用代码不是用 ARC 编译的，但被调用代码是（因此正确实现返回保留对象），那么行为取决于程序员遵循命名约定。如果他们释放返回值，那么对象的引用计数将被正确管理。但是，如果程序员认为他们的`new...`方法确实违反了命名约定，并且未能在调用代码中手动插入释放，则返回的对象将泄漏。

总而言之，正如 Martin R. 在评论中指出的那样，关键的决定是在包括手动引用计数在内的任何环境中是否遵循命名约定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:57:01.683

就像任何其他语言一样，当您违反该语言的一些基本假设时，您就会进入未定义行为的领域。在未来的某个时候，Apple 可能会修改`-new...`引用计数的内部结构。Apple 有责任确保符合预期用途的代码有效，但他们不会为不符合规定的用途这样做。

如果您需要知道在特定系统上运行的特定版本的编译器的实际行为是什么，那么您必须对其进行测试。不要假设其他编译器或运行时版本的行为相同。

最后，未定义的行为就是未定义的行为。当你构建依赖它的代码时，你最终会受到一个微妙且难以诊断的缺陷的影响。

# http - 在常规 HTTP POST 中发布数据/对象的集合/数组

> ID：15747272
> 
> 赞同：0
> 
> 时间：2013-04-01T16:29:14.397
> 
> 标签：http, jpa, spring-mvc

我有一个`@OneToMany`JPA 关联，该关联`Curriculum`具有多个`WorkExperience`.

我遇到的问题是，我希望能够在**单个**实体管理器调用中将**一个**课程与**多个**WorkExperience保持在一起。**`persist/save`**

 **我不知道如何将来自 html 表单的常规 HTTP POST 的**几个 WorkExperiences 实例粘合****到 Spring MVC 模型属性中的 java 集合/集**...

首先，这可能吗？如果是这样，这是一个好主意，**什么样的 html**可以在常规 HTTP POST 中发布数据集合/数组？

`Curriculum`JPA 实体：

```
@Entity
public class Curriculum {
    ...
    @OneToMany
    private Set<WorkExperience> workExperiences;
    ... 
```

`WorkExperience`JPA 实体：

```
@Entity
public class WorkExperience {
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:04:33.963

是的，有可能。Spring MVC 支持将 Lists/Maps 作为表单值发送。工作方式是通过下标值。对于列表，您使用列表编号，例如

```
<form:input path="myVal[1].property" /> 
```

对于地图，您可以使用地图键，例如

```
<form:input path="myVal[key].property' /> 
```

这是假设您的模型属性具有所述项目的列表/映射。我建议使用 DTO 并翻译成您的实体。这可能有点矫枉过正，但我​​在允许 View 直接操作我的 Entity 对象时遇到了问题。

还要注意：您将不得不做一些视图端编码来动态添加/删除表单上的项目。这可能是一个真正的痛苦，因为删除不像你想象的那样工作。Spring MVC 能够添加到列表/地图，更改列表/地图中的项目，但我还没有找到直接从地图中删除项目的方法。我通常通过在我的 DTO 中添加一个“删除”布尔标志来处理删除，然后通过简单地在列表/映射中为该项目添加一个 form:hidden 元素来跟踪删除，并在我得到时清理服务器端的列表/映射它。

在服务器端获得所有实体后，您必须存储它们。如果您希望它更加自动魔术，只需在您的父实体上设置一个注释，例如

```
@OneToMany(cascade=CascadeType.PERSIST) 
```

有几个[CascadeType](http://docs.oracle.com/javaee/5/api/javax/persistence/CascadeType.html)可用，所以选择一个有意义的。**

# java - 如何让Java程序在几秒钟后退出

> ID：15747277
> 
> 赞同：5
> 
> 时间：2013-04-01T16:29:27.993
> 
> 标签：java, system, exit, seconds

无论如何我可以在几秒钟后退出java程序，例如5秒。

我知道您可以使用以下方法退出 java 程序：

```
System.exit(0); 
```

但我不确定 0 是否代表秒，因为这段代码：

```
System.exit(10); 
```

也立即退出

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T16:41:48.607

System.exit(0) 指定程序的退出错误代码。

您可以将其放在计时器上并安排任务

```
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;

public class TimedExit {
Timer timer = new Timer();
TimerTask exitApp = new TimerTask() {
public void run() {
    System.exit(0);
    }
};

public TimedExit() {
timer.schedule(exitApp, new Date(System.currentTimeMillis()+5*1000));
    }

} 
```

然后你可以调用 TimedExit()

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-01T16:30:17.793

`Thread.sleep()`您可以在退出程序之前调用：

```
// Your code goes here.

try 
{
   Thread.sleep(5000);
} 
catch (InterruptedException e) 
{
   // log the exception.
}

System.exit(0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:41:19.790

来自[System.exit(int)](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#exit%28int%29)方法文档：

> 终止当前运行的 Java 虚拟机。该参数用作状态码；按照惯例，非零状态码表示异常终止。

如果您需要在等待退出期间执行某些操作，您可以创建一个控制线程，它将等待正确的时间执行退出，如下所示：

```
public class ExitFewMiliseconds {

    public static void main(String args[]) {

        new Thread(new Runnable() {
            public void run() {
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.exit(0);
            }
        }).start();

        while (true) {
            System.out.println("I'm doing something");
        }
    }

} 
```

如果在等待退出时什么都不执行，你可以简单地使用[Thread.sleep(ms)](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep%28long%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:36:08.863

您传递给 System.exit(0) 的 0 与退出前等待的时间无关。 [Javadocs 是您的朋友](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#exit%28int%29)。从javadoc：

> 该参数用作状态码；按照惯例，非零状态码表示异常终止。

如果您确实需要这样做，其他答案已经涵盖了如何在退出前等待 5 秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T16:49:31.483

```
import java.util.Timer;
import java.util.TimerTask;

/**
 * Simple demo that uses java.util.Timer to schedule a task 
 * to execute once 5 seconds have passed.
 */
class Reminder {

    Timer timer;

    public Reminder(int seconds) {
        timer = new Timer();
        timer.schedule(new RemindTask(), seconds * 1000);
    }

    class RemindTask extends TimerTask {
        public void run() {
            System.out.format("Time's up!%n");
            System.exit();
            timer.cancel(); //Terminate the timer thread
        }
    }

    public static void main(String args[]) {
        new Reminder(10);
        System.out.format("Task scheduled.%n");
    }
} 
```

通过这种方式，您可以使用 Timer 类并在特定时间间隔后退出系统

# css - CSS按钮样式不起作用

> ID：15747278
> 
> 赞同：1
> 
> 时间：2013-04-01T16:29:28.220
> 
> 标签：css, html, button

注意：我是这个论坛的新手，英语不是我的主要语言，如果不能完全理解，非常抱歉。

我正在为学校制作一个移动网站，而且进展顺利......

一个问题：我的css文件（#styled_button）中有一个东西（对不起，不知道它的名字）并且工作正常。有一个按钮我想以不同的方式定位，所以我从“#styled_button”复制了代码并创建了一个新的东西并添加了位置：相对；和浮动：对；但由于某种原因，我的按钮现在根本没有样式。（我确实更改了按钮上的 ID）。

编辑：如果我将我的按钮 id 改回 button_styled 它是样式化的。

即使不更改代码，因此#logout_button 与#button_styled 相同，也不会发生任何事情。

我的按钮：

```
<form action='m.member.php' method='POST'>
    <input type='submit' name='logout_button' value='Logout' id="button_styled">
</form> 
```

CSS：

```
#button_styled {
    color:white;
    background:#666;
    font: bold 45px Harabara;
    padding: 20px;
    text-decoration: none;
    vertical-align: middle;
} 
```

编辑：错字已删除（没有从我的原始代码中复制粘贴），但问题不在于表单，因为它可以工作......

根据“brbcode”的要求，这里是我使用的其他按钮之一的代码：

```
<form action='m.loginscreen.php' method='POST'>
    <p>Username:</p>
    <input type='text' name='username' id="styled">
    <p>Password:</p>
    <input type='password' name='password' id="styled"><br>
    <ul>
        <li><input type='submit' name="loginbutton" value='Log In'            class="button_styled"></li>
        <li><input type='submit' name="registerbutton" value='Register' class="button_styled"></li>
    </ul>
</form> 
```

PS：再次对不起我的英语流利，但对于那些不完全理解我的按钮的人来说，它只是样式......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:43:53.447

听起来您可能在 html(?) 中的多个元素上使用了 ID。ID 每页只应使用一次——通常是在您有一个与其他所有元素不同的元素时。如果您`button_styled`在多个地方使用该类型，则应将其更改为**class**。在您的 html 中：

```
<input class="button_styled" ... > 
```

在你的 CSS 中：

```
.button_styled {
  /* your styling */
} 
```

# php - 使用 PHP 根据会话变量选择下拉选项

> ID：15747282
> 
> 赞同：0
> 
> 时间：2013-04-01T16:29:35.493
> 
> 标签：php, select, drop-down-menu

我正在使用 PHP 通过 Javascript 追加填充我的 HTML 下拉菜单选项。到目前为止它有效，并且我使用条件语句仅在设置会话变量时显示该团队 ID 的值。问题是即使设置了会话变量，我也需要显示所有下拉选项（如 PHP 中的 else/while 语句），因此人们仍然可以使用该选项手动选择另一个 ID，但如果设置了会话，则自动选择值会话变量设置为.... 否则只显示选择默认选项 (1) 的选项，就像在我的 else 语句中一样。关于我应该如何去做的任何建议？谢谢！

HTML

```
<td class="label_container">Team ID#</td>
            <td class="input_container">
            <select id="prepping_team" name="prepping_team"></select>
            </td> 
```

JS

```
//Populate Team IDs
function get_prepping_team() {
$.ajax({
    url: './php/getprepping_team.php',
    success: function(data) {
        $('#prepping_team').append(data);
    }
});
}; 
```

PHP

```
//Grab Session (if set)
session_start();
$_SESSION['prepping_team'];

$prep_team = $_POST['prepping_team'];

header("Cache-Control: no-cache, must-revalidate");
header('Access-Control-Allow-Origin: *');
header('Content-type: multipart/form-data');

$logAuditFile = "../log/prepform.log";
$logModule = "getprepping_team.php";
include '/mnt/library/auditlog.php';

require("/mnt/library/configdb.php");        
include '/mnt/library/accessdb.php';

//Parse and store the db ini file, this will return an associative array
db_config_cables_test();
db_connect();

$sql = mysql_query("SELECT pt_id FROM preppingteam;");
//IF SESISON VARIALBE IS SET
if(isset($_SESSION['prepping_team'])) {
    print "<option value=\"".$_SESSION['prepping_team']."\">".$_SESSION['prepping_team']."</option>";
    //print "<option value=\"".$_SESSION['prepping_team']."\">".$_SESSION['prepping_team']."</option>";
//OTHERWISE LOAD TEAM IDs
} else {
    while ($data = mysql_fetch_assoc($sql)) {
        print "<option value=\"".$data['pt_id']."\">".$data['pt_id']."</option>";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:39:50.757

代码的最后一部分没有做你想做的事。所以像这样纠正它

**更新：**

```
while ($data = mysql_fetch_assoc($sql)) {
   if(isset($_SESSION['prepping_team']) && $_SESSION['prepping_team'] == $data['pt_id'])
    {
    print "<option selected = 'selected'  value=\"".$_SESSION['prepping_team']."\">".$_SESSION['prepping_team']."</option>";    
    }
   else
    print "<option value=\"".$data['pt_id']."\">".$data['pt_id']."</option>";
} 
```

# c++ - 具有相似功能但名称不同的标头

> ID：15747283
> 
> 赞同：0
> 
> 时间：2013-04-01T16:29:36.917
> 
> 标签：c++, header, cross-platform

我在多个平台上有通用代码，这些代码依赖于具有某些函数名称的标头`#include`。

问题是 [或多或少] 相同的标头在每个平台上具有不同的名称。我不能简单地在任何平台上重命名标题，因为它是标准的`#include`. 保持这种普遍性的推荐方法是什么？

## 宏

```
#ifdef PLATFORM_A
   #include <platformA>
#endif

#ifdef PLATFORM_B
   #include <platformB>
#endif

//.... 
```

## 标题掩码

在通用代码中：

```
#include "common.h" 
```

平台 A 的“common.h”：

```
#include <platformA> 
```

平台 B 的“common.h”：

```
#include <platformB> 
```

或者是其他东西？

每种方法的优缺点是什么，在什么情况下我应该使用一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:48:12.307

实际上，我会结合这两种方法。与其在代码中一遍又一遍地使用方法 A，从而使维护变得困难，您应该为每个依赖于平台的标头添加一个公共标头，并使用它来包装特定于平台的包含：

**common_iostream.hpp：**

```
#ifndef COMMON_IOSTREAM_INC
#define COMMON_IOSTREAM_INC

#ifdef PLATFORM_A
#include <iostream>
#endif

#ifdef PLATFORM_B
#include <iostream.h>
#endif

#endif 
```

这样，您就有了一组不错的`common_*.hpp`标头，并且您的代码保持干净，而且您不会将其拆分为不同`platformA/common.hpp`的 ,`platformB/common.hpp`等。

# python - 单个模型连接到多个对话框上的多个视图，不更新

> ID：15747287
> 
> 赞同：0
> 
> 时间：2013-04-01T02:46:48.483
> 
> 标签：python, model-view-controller, pyqt4

连接到同一模型的两个独立形式。据我了解模型视图是如何工作的，所有连接到模型的视图都应该在模型中呈现数据。但这种情况并非如此。请参阅随附的代码。

```
class Model(QStringListModel):

    def __init__(self, parent=None):
        super(Model, self).__init__(parent)
        data = QStringList()
        data << "one" << "two" << "three" << "four" << "five"
        self.setStringList(data)

class Form_2(QDialog):

    def __init__(self, parent=None):
        super(Form_2, self).__init__(parent)
        self.model = Model()
        self.combo = QListView()
        self.combo.setModel(self.model)

        layout = QVBoxLayout()
        layout.addWidget(self.combo)
        self.setLayout(layout)

class Form_1(QDialog):

    def __init__(self, parent=None):
        super(Form_1, self).__init__(parent)
        self.model = Model()
        self.listView = QListView()
        self.listView.setModel(self.model)
        self.combo = QComboBox()
        self.combo.setModel(self.model)
        self.form2_button = QPushButton("Open Form_2")

        layout = QVBoxLayout()
        layout.addWidget(self.listView)
        layout.addWidget(self.combo)
        layout.addWidget(self.form2_button)
        self.setLayout(layout)

        self.connect(self.form2_button, SIGNAL("clicked()"), self.form_2)

    def form_2(self):
        self.ft = Form_2()
        self.ft.show()

app = QApplication(sys.argv)
form = Form_1()
form.show()
app.exec_() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:39:08.523

感谢 ccc.larc 回答我的问题。您基本上需要将模型的相同实例传递给您希望它使用的任何形式。

```
class Model(QStringListModel):

    def __init__(self, parent=None):
        super(Model, self).__init__(parent)
        data = QStringList()
        data << "one" << "two" << "three" << "four" << "five"
        self.setStringList(data)

class Form_2(QDialog):

    def __init__(self, model, parent=None):
        super(Form_2, self).__init__(parent)
        self.model = model
        self.combo = QListView()
        self.combo.setModel(self.model)

        layout = QVBoxLayout()
        layout.addWidget(self.combo)
        self.setLayout(layout)

class Form_1(QDialog):

    def __init__(self, parent=None):
        super(Form_1, self).__init__(parent)
        self.model = Model()
        self.listView = QListView()
        self.listView.setModel(self.model)
        self.combo = QComboBox()
        self.combo.setModel(self.model)
        self.form2_button = QPushButton("Open Form_2")

        layout = QVBoxLayout()
        layout.addWidget(self.listView)
        layout.addWidget(self.combo)
        layout.addWidget(self.form2_button)
        self.setLayout(layout)

        self.connect(self.form2_button, SIGNAL("clicked()"), self.form_2)

    def form_2(self):
        self.ft = Form_2(self.model)
        self.ft.show()

app = QApplication(sys.argv)
form = Form_1()
form.show()
app.exec_() 
```

# python - python中**的含义是什么（当不是数学表达式时）

> ID：15747288
> 
> 赞同：1
> 
> 时间：2013-04-01T16:29:49.837
> 
> 标签：python

这是一小部分代码

```
import networkx as nx
G=nx.MultiDiGraph()
...
G.add_edge(white, black, **game) 
```

（游戏是字典）最后一行**的作用是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:34:31.910

`**`是将映射类型（例如 a ）解压缩`dict`为关键字参数的运算符。

考虑：

```
def foo(bar=1):
   print bar

d = {'bar':2}
foo(**d) 
```

在本例中，`2`将被打印。另一方面，您还可以在`**kwargs`类型变量中吸收所有未知的关键字参数：

```
def foo(a=1,b=2,**kwargs):
    print kwargs

foo(a=1,b=2,c=3) 
```

当然，您也可以组合这些形式：

```
def foo(a=1,b=2,**kwargs):
    print b
    print kwargs

d = {'b':3, 'c':4}
foo(**d) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:34:08.467

该函数作为[关键字参数](http://docs.python.org/2/tutorial/controlflow.html#keyword-arguments)`add_edge`传入字典。例如，以下两个是等价的：`game`

```
game = {'weight': 5, 'color': 'blue'}
G.add_edge(white, black, **game) 
```

```
G.add_edge(white, black, weight=5, color='blue') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:36:11.323

它扩展了一个字典，因此它的键对值用作命名参数。例如，考虑这个函数：

```
>>> def f(a, b, c):
...     return a+b-c
... 
```

我可以调用它以原始顺序传递它的参数：

```
>>> f(1,2,3)
0 
```

但是，如果我将值赋予参数名称，我也可以切换它们：

```
>>> f(1,c=3,b=2)
0 
```

当调用一个函数并传递一个以 开头的字典`**`时，该字典的对将用作参数。所以，我可以在下面创建字典

```
>>> params = {'c':3, 'b':2} 
```

...并将其传递给我的功能...

```
>>> f(1,**params)
0 
```

...并会得到相同的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:32:16.603

这意味着参数基本上是一个字典。

它通常用作`**kwargs`，含义，关键字参数。

例如，当您定义如下方法时：

```
def myMethod(first, *args, **kwargs):
    .... 
```

这意味着第二个参数应该是一个集合（参数的“列表”），并且`kwargs`应该是一个`dict`.

# c# - 丢失引用时如何处理对象实例

> ID：15747289
> 
> 赞同：1
> 
> 时间：2013-04-01T16:29:56.400
> 
> 标签：c#, object, reference, destructor

使用 C#。

我有一个 MainFoo 类：

```
class MainFoo
{
    private Foo foo;

    public MainFoo()
    {
        this.foo = new Foo();
    }  

    public CreateNewFoo()
    {
        this.foo = new Foo();
    }

    public DoCurrentFoo()
    {
        this.foo.Do();
    }
} 
```

Foo 类：

```
class Foo
{
    ~Foo()
    {
        this.DoEnd();
    }

    public void Do() {}

    private void DoEnd() {}
} 
```

我希望能够在get 再次初始化时调用`DoEnd()` **Foo**类中的方法。`private Foo;`此方法`DoEnd()`是私有的，我想保持这种方式*（因此无法从 访问`MainFoo`）*。

由于相同的 Foo get 再次被初始化，我虽然实例会丢失它的引用，所以它会调用析构函数。但这仅在`MainFoo`实例丢失引用时才被调用。

问题：当对象实例失去引用时如何处理它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T16:33:11.900

不保证在任何特定时间调用析构函数，甚至根本不被调用。通常，您不应依赖析构函数，而应实现 IDisposable 并自己调用 Dispose。

最方便的是，这可以通过`using(...){ }`.

回到您的示例，您还可以在分配属性时处理对象（如 Jason Watkins 建议的那样），但请确保它没有在其他任何地方使用。

```
public Foo F
{
    get{return foo;}
    set
    {
        if( foo != null)
            foo.Dispose();
        foo = value;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:32:36.070

你不能，这是[垃圾收集器](http://msdn.microsoft.com/en-us/library/ms973837.aspx)的工作。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms228629%28v=vs.80%29.aspx)：

> 在 C# 中，垃圾收集由具有与 JVM 类似的功能的公共语言运行时 (CLR) 处理。CLR 垃圾收集器定期**检查内存堆中是否存在任何未引用的对象**，并释放这些对象持有的资源。

# windows - Shortcut Ghost：将快捷方式作为文件运行？

> ID：15747304
> 
> 赞同：0
> 
> 时间：2013-04-01T16:31:08.983
> 
> 标签：windows, batch-file, installation, shortcuts

我正在尝试生成一个快捷方式，该快捷方式将运行一个名为`WAVistaWin7.exe`. 每当快捷方式生成时，我会双击它，它会说“WAVistaWin7.exe 找不到'wa.exe'。” `wa.exe`位于它所属的文件夹内。然后我尝试放置一个名为的批处理文件，`run.bat`其中包含两行：

```
@echo off
WAVistaWin7.exe 
```

我重定向快捷方式以运行此文件，批处理文件指出它找不到`WAVistaWin7.exe`. 很明显，快捷方式独立于文件运行。请注意，每当我*直接*在文件夹中运行`WAVistaWin7.exe`或在其中运行时，它都会起作用。如何获得作为文件运行的快捷方式？`run.bat`

 *![结果。](https://i.stack.imgur.com/SHPDP.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:47:40.903

看起来您需要设置工作目录。在快捷方式属性中，您可以设置**“开始于”**文件夹。

或者，在您的批处理文件中，您可以更改为相应的文件夹：

```
@echo off
pushd C:\Program Files\WA
WAVistWin7.exe 
```*

# ember.js - 如何在 emberjs 1.0.0-rc.2 中使用预编译的车把模板？

> ID：15747310
> 
> 赞同：1
> 
> 时间：2013-04-01T16:31:20.580
> 
> 标签：ember.js

我正在尝试使用[guard-handlebars](https://github.com/aiwilliams/guard-handlebars)来预编译我的handlebars 模板（以避免将它们全部放在我的index.html 中，这感觉不太理想......）。预编译效果很好，Ember 接受了模板在我将其注入 Ember.TEMPLATES 时接受的事实，如下所示：

```
Ember.TEMPLATES['application'] = Handlebars.templates['application'] 
```

但是，它不起作用。我得到一个这样的例外：

```
Could not find property 'outlet' 
```

...在 Handlebars helperMissing 方法中。似乎 Ember 使用了一些默认 Handlebars 东西的猴子补丁，据说添加了对 {{outlet}} 助手和其他的支持。但我的模板似乎没有使用这些插座。你如何解决这个问题？

我正在使用通过 NPM 安装的车把编译器来编译模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:41:53.050

[适合你的插件](https://github.com/dgeb/grunt-ember-templates)。

（这是一个示例集成：[https](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences/blob/master/Gruntfile.js) ://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences/blob/master/Gruntfile.js ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:57:02.617

发现一个带有建议解决方案/解决方法的重复问题：[如何使用 Ember 使用车把命令行生成的模板？](https://stackoverflow.com/questions/12409504/how-can-i-consume-handlebars-command-line-generated-templates-with-ember?rq=1)

（简短的总结：是的，使用`handlebars`命令行程序进行预编译不能立即工作，正是因为我在原始问题中建议的原因）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:23:40.503

`guard-handlebars`gem 已经过时了，它不是为与 ember 一起工作而设计的。

今天有几个选择。

*   带[耙式管道的](https://github.com/livingsocial/rake-pipeline)[理发师](https://github.com/tchak/barber)
*   [grunt-ember-模板](https://github.com/yaymukund/grunt-ember-handlebars)

例如，要使用 barber 编译 ember 模板，请尝试以下操作：

```
compiled_template = Barber::Ember::FilePrecompiler.call(IO.read(file))
# now ruby variable compiled_template is a string like: "Ember.Handlebars.template(function(...));"

result = "Ember.TEMPLATES['#{name}'] = '#{compiled_template}';"
# now result is a JS string that sets Ember.TEMPLATES[name] to precompiled handlebars 
```

当新版本的 ember 出现时，可能需要几天时间才能通过生态系统。发生这种情况时，您可能会发现 ember-source gem 很有帮助。有关详细信息，请参阅 Alex 的博客文章：

[http://alexmatchneer.com/blog/2013/02/27/gemifying-ember-dot-js-slash-handlebars-dot-js-slash-etc-dot-js/](http://alexmatchneer.com/blog/2013/02/27/gemifying-ember-dot-js-slash-handlebars-dot-js-slash-etc-dot-js/)

# android - 如何称呼某人

> ID：15747322
> 
> 赞同：0
> 
> 时间：2013-04-01T16:32:17.673
> 
> 标签：android, call, android-manifest

在我按下 a 后，我正试图给某人打电话，`Button` 我使用了这个：

[http://www.helloandroid.com/tutorials/how-make-phone-call-your-application](http://www.helloandroid.com/tutorials/how-make-phone-call-your-application)

当我尝试在清单中添加它时遇到问题

```
<uses-sdk android:minSdkVersion="3" />
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

我的错误是这样的：

> 清单中应该只有一个 uses-sdk 元素将它们合并在一起

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:15:35.153

在文件中搜索重复`<uses-sdk>`标签。`androidManifest.xml`此标签不能有两个元素。删除其中一个将解决问题。

# javascript - filepicker.io - 将画布保存为 PNG

> ID：15747329
> 
> 赞同：1
> 
> 时间：2013-04-01T16:32:48.277
> 
> 标签：javascript, canvas, filepicker.io

让它工作，我想知道是否是最好的方法：

```
// Take off the "data:image/png;base64," prefix
var b64 = canvas.toDataURL().split(',', 2)[1];
filepicker.store(
  b64, 
  {
    mimetype: 'image/png',
    base64decode: true
  }
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T01:53:52.433

是的，我觉得不错！您可能希望使用稍微更精确的正则表达式来解析 b64 数据，但 base64 编码的数据中不应包含逗号，因此您通常应该没问题。作为最低要求，您可以指定`.split(',', 2)`

# typescript - TypeScript 是否没有对类使用显示模块模式？

> ID：15747332
> 
> 赞同：4
> 
> 时间：2013-04-01T16:33:05.287
> 
> 标签：typescript

TypeScript 是否没有对类使用显示模块模式？我期望从这段代码中得到不同的结果。

```
class Test {

    private privateProperty: any;

    public publicProperty: any;     
} 
```

生成这个：

```
var Test = (function () {
    function Test() { }
    return Test;
})(); 
```

我期待这样的事情：

```
var test = (function(){
    var privateProperty;
    var publicProperty;

    return {
        publicProperty: publicProperty;
    };

})(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T17:33:07.223

RMP 不适用于基于类的设计。`module`做你想做的事：

```
module myMod {
    var x = 31;
    export var y = x + 15;
} 
```

生成：

```
var myMod;
(function (myMod) {
    var x = 31;
    myMod.y = x + 15;
})(myMod || (myMod = {})); 
```

这里的显着特点：

*   用闭包捕获私人
*   公共成员作为对象自己的属性可见
*   该对象是在 IIFE 中创建的

# php - 根据上一个 DropDown 填充 DropDown

> ID：15747335
> 
> 赞同：0
> 
> 时间：2013-04-01T16:33:17.757
> 
> 标签：php, javascript

目前我有一个沿着这些线路[http://jsfiddle.net/4Zw3M/1/](http://jsfiddle.net/4Zw3M/1/)的设置，其中第二个下拉列表由先前的选择填充。

问题是这些字段是由数据库填充的。因此，作为 PHP，我会编写选项下拉列表，以便在提交后保留该值。

```
<option <?= $foobar == $foo->slug ? 'value="'.$foo->slug.'" selected="selected"' : 'value="'.$food->slug.'"'?>><?=$foo->name?></option> 
```

在用户提交表单后，我无法弄清楚如何保留该值。另外，是的，我确实`$foobar = mysqli_real_escape_string($mysqli, $_POST['foobar']);`在页面顶部有记录价值。

其次，我试图弄清楚如何以这种格式添加值，因为该值实际上是名称的 id。

```
|id| |name  |
|1 | |ten   |
|2 | |twenty| 
```

所以在正常格式中它会是

```
<option value="<?=$foo->id?>"><?=$foo->name?></option> 
```

目前我只能使值与名称相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:41:23.137

您可以将下拉菜单文本发布到操作页面并使用以下方法捕获值：-

```
 $s_option = $_POST["somename"]; 
```

根据所选文本（$s_option）的值调用 JS 函数，如下所示：-

```
function func1()
{
document.forms[0].somename.selectedIndex=0;
}

function func2()

{
document.forms[0].somename.selectedIndex=1;
} 
```

等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:06:53.527

我会在 jquery/ajax/php 中做，希望这会有所帮助：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#dropdown1').on('change', function(){
            var value = $(this).val();

            $.ajax({
                type: "post",
                url: "path_to_your.php",
                data: ({p : value}),
                datatype: "json",
                success: function(results){
                    $.each(results, function(v) {
                        $('#dropdown2').append($('<option>', {
                            value: v,
                            text: v
                        }));
                     });
                }

            });
        });

    });
</script>
</head>
<body>
<select id="dropdown1">
    <option>Select One..</option>
    <option value="something">Something</option>
<select>
<select id="dropdown2">

</select>
</body> 
```

# javascript - 通过 AJAX 到 Django 的 Javascript POST 根本没有用完

> ID：15747336
> 
> 赞同：1
> 
> 时间：2013-04-01T16:33:26.527
> 
> 标签：javascript, ajax, django, post

嗨，我们只是想将一个 javascript 字符串变量发布到 django 视图。这听起来很容易，但自从我开始尝试这样做已经三天了！我实际上已经阅读了有关堆栈溢出的所有相关问题，但我只是不知道我做错了什么..

模板 HTML 页面上的 JAVASCRIPT

```
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

<!--also have a jquery file imported further up in my code - 
<script type="text/javascript" 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
should be where it is getting ajax from, right?-->

<script language="JavaScript">
  $(function() {
  $( "#sortable" ).sortable();
  $( "#sortable" ).disableSelection();
  });

$(document).ready(function() {
$('#makeconstruct').submit(function()

{
        //Serializes the sortable's item id's into an array of string
        var senderStrIndexArray = $('#sortable').sortable();

    var linkOrder = $(senderStrIndexArray).sortable('toArray');
    alert(linkOrder);

    $.ajax({
        type: "POST",
        url: "/ecosystem/ajaxmes/",
        // The key needs to match your method's input parameter (case-sensitive).
        data: JSON.stringify({ linkOrder:linkOrder }),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        //do we need json??
        success: function(data){alert(data);},
        failure: function(errMsg) {
            alert(errMsg);
        }
    });             
});
});
</script> 
```

模板上的 HTML

```
<form id="makeconstruct" action="/ecosystem/ajaxmes/" method="post">
<!--DO WE NEED A METHOD/ACTION HERE IF IT IS DEFINED IN THE JAVASCRIPT??-->
{% csrf_token %}<!--view defined as csrf exempt but kept just in case-->
<ul id="sortable">
and a jQuery sortable list of things goes here in the code, each with an id
</ul>
<button type="submit">Submit</button></form> 
```

意见.PY

```
from django.utils import simplejson #not sure this is necessary given the code
from django.views.decorators.csrf import csrf_exempt
@csrf_exempt
def ajaxmes(request):
    if request.is_ajax():
        message = "Yes, I am the king!!!"
    else:
        message = "No, I am going to cry!!"
    return HttpResponse(message) 
```

URLS.PY

```
url(r'^ecosystem/ajaxmes', 'container.views.ajaxmes'),
#Think this is the only line I need to show here 
```

javascript linkOrder 变量的警报有效，但我们得到的只是“不，我要哭了”响应。我们现在真的很绝望，在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:08:16.020

您没有从 Javascript`submit`函数返回 false 。这意味着 Ajax 被触发了，但是在它有机会做任何事情之前，按钮的默认动作发生并且表单被正常提交，这就是 is_ajax 函数返回 false 的原因。如果 JS 返回 false，则不会触发该操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:39:15.703

试着把这个改成`url(r'^ecosystem/ajaxmes', 'container.views.ajaxmes')`这个`url(r'^ecosystem/ajaxmes/', 'container.views.ajaxmes'),`

您正在将请求发送到“/ecosystem/ajaxmes/”，但由于在您的 urls.py 中您没有尾部斜杠，它会被重定向。

# php - 使用 suPHP 进行全局文件访问

> ID：15747338
> 
> 赞同：1
> 
> 时间：2013-04-01T16:33:32.917
> 
> 标签：php, apache, permissions, suphp

我需要用户对全局文件具有只读访问权限。目前，我将全局文件的符号链接添加到用户目录中。在我访问符号链接目录中的文件之前，这似乎有效。那时，我收到以下错误，直到我使文件所有者/组匹配。

```
SoftException in Application.cpp:422: Mismatch between target UID (1067) and UID (99) of file 
```

我已经阅读了一些没有明确答案的[论坛帖子。](http://forums.cpanel.net/f5/suphp-symbolic-links-reseller-account-212102.html)

我怎样才能做到这一点，理想情况下不影响安全性？

# c# - Word 加载项：将子菜单添加到 CommandBar

> ID：15747341
> 
> 赞同：1
> 
> 时间：2013-04-01T16:33:46.010
> 
> 标签：c#, ms-word, ms-office, add-in

我正在尝试向 Word 应用程序中的 CommandBar 添加子菜单。

我设法在右键菜单中创建了一个触发事件的菜单项。我想要的是出现一个新的子菜单。

这是我正在寻找的一个例子：

![在此处输入图像描述](https://i.stack.imgur.com/23kHL.png)

下面的代码是我写的一部分。

```
application.CustomizationContext = 
Office.CommandBar commandBar = application.CommandBars["Text"];
Office.CommandBarButton button =commandBar.Controls.Add(Office.MsoControlType.msoControlButton) as Office.CommandBarButton;
button.accName = "Accronym Highlights";
button.Caption = "Accronym Highlights";
button.Tag = "UNIQUE"; 
```

谢谢您的帮助！

# c - C socket编程，服务器发送缓冲区好像没有被清除

> ID：15747345
> 
> 赞同：3
> 
> 时间：2013-04-01T16:34:17.233
> 
> 标签：c, sockets

我对套接字编程非常陌生，并且遇到了麻烦。我想实现一个根据特定客户端请求进行响应的服务器。就我而言，GET、HEAD 或其他错误。考虑以下代码

如果我在调用之前打印答案`send()`（请参阅下面的服务器端代码），则消息是正确的。但是让我们从我发送的客户说

1.  得到
2.  头
3.  得到
4.  测试
5.  得到

，从客户端打印的答案是

```
You want GET
You want HEAD
You want GETD
HTTP/1.1 400 Bad Request
You want GET Bad Request 
```

所以看起来从服务器发送的消息有点“覆盖”，但这是如何避免的呢？如果这是问题所在，是否可以“清除服务器缓冲区”？

这是完整的服务器端代码

```
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>

#define BUFSIZE         1024
#define MAXPENDING      100

int main(){

    char get[] = "GET";
    char head[] = "HEAD";
    int serverSocket = socket(PF_INET, SOCK_STREAM, 0);

    struct sockaddr_in serverAddress;
    serverAddress.sin_family = AF_INET;
    serverAddress.sin_port = htons(8080);
    serverAddress.sin_addr.s_addr = htonl(INADDR_ANY);
    memset(&serverAddress.sin_zero, '\0', 8);

    bind(serverSocket, (struct sockaddr*)&serverAddress, sizeof(serverAddress));

    listen(serverSocket, MAXPENDING);

    for(;;){
        struct sockaddr_in clientAddress;
        int clientAddressLength = sizeof(clientAddress);
        int clientSocket;

        clientSocket = accept(serverSocket, (struct sockaddr*)&clientAddress, &clientAddressLength);

        char buf[BUFSIZE];
        int bytesRec;

        bytesRec = recv(clientSocket, buf, BUFSIZE, 0);
        while(bytesRec > 0){

            char *result;
            result = strtok(buf, " ");

            printf("result %s\n", result);

            if(strcmp(&buf, &get) == 0){
                char answer[] = "You want GET";
                send(clientSocket, answer, strlen(answer), 0);
            }else{
                if(strcmp(&buf, &head) == 0){
                    char answer[] = "You want HEAD";
                    send(clientSocket, answer, strlen(answer), 0);
                }else{
                    char answer[] = "HTTP/1.1 400 Bad Request";
                    send(clientSocket, answer, strlen(answer), 0); 
                }
            }

            bytesRec = recv(clientSocket, buf, BUFSIZE, 0);
        }

    return 0;
} 
```

和客户端

```
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>

int main(){

    int clientSocket = socket(PF_INET, SOCK_STREAM, 0);

    struct sockaddr_in clientAddress;
    clientAddress.sin_family = AF_INET;
    clientAddress.sin_port = 0;
    clientAddress.sin_addr.s_addr = htonl(INADDR_ANY);
    memset(&clientAddress.sin_zero, '\0', 8/*sizeof(clientAddress.sin_zero)*/);

    bind(clientSocket, (struct sockaddr*)&clientAddress, sizeof(clientAddress));

    struct sockaddr_in serverAddress;
    serverAddress.sin_family = AF_INET;
    serverAddress.sin_port = htons(8080);
    serverAddress.sin_addr.s_addr = inet_addr("127.0.0.1");
    memset(&serverAddress.sin_zero, '\0', 8);

    if(connect(clientSocket, (struct sockaddr*)&serverAddress, sizeof(serverAddress)) == -1){
        printf("error in connecting!\n");
        return 0;
    }

    char* serverReply[1024];

    for(;;){
        char request[100];
        printf("Enter your request: ");
        scanf("%s", &request);
        send(clientSocket, request, strlen(msg), 0);
        if(recv(clientSocket, serverReply, strlen(serverReply), 0) < 0){
            printf("failure in receiving from server!\n");
        }else{
            printf("%s\n", serverReply);
        }
    }

    close(clientSocket);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T16:49:21.967

```
send(clientSocket, request, strlen(msg), 0); 
```

这仅发送字符串字符，不包括终止 NULL。接收缓冲区不会终止服务器端接收到的字符串。

这就是为什么您仍然看到上一条消息中的“D”字符的原因。

```
You want GETD <-- 'D' is from the previous 'HEAD' 
```

要么终止服务器上接收到的字符串，

```
buf[bytesRec] = '\0'; 
```

编辑：正如@Zan 指出的，不要这样做：

~~或从客户端发送 NULL 终止符。~~

 ~~```
send(clientSocket, request, strlen(msg) + 1, 0); 
```~~  ~~* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:48:18.093

如果你`strcmp()`错了

**（1）**我可以从你的问题中理解，而不是你需要比较的buf `result`，喜欢：（你在评论中说结果打印为GET）

```
if(strcmp(result, get) == 0){ 
```

**(2)**正如@phihag 回答的那样，应该是

```
if(strcmp(buf, get) == 0){
          ^   ^remove & 
```

您在每个 strcmp() 上都有类似的错误，因为`buf`, `get`,`head`都是宪章数组。

**(3)** `recv()`不会终止读取缓冲区，因此最好`\0`在使用它之前添加 null ()（*我可以注意到您正在使用 buff 作为字符串*）

喜欢：

```
bytesRec = recv(clientSocket, buf, BUFSIZE, 0);
buf[bytesRec] = '\0' 
```

感染你应该只读取`BUFSIZE-1`剩下的一个字节作为空`'\0'`符号，例如：

```
ytesRec = recv(clientSocket, buf, BUFSIZE-1, 0);
buf[bytesRec] = '\0' 
```~~

# ios - 如何实例化自定义 iOS UIViewController 并在 Storyboard 下使用它的 NIB？

> ID：15747351
> 
> 赞同：2
> 
> 时间：2013-04-01T16:34:48.443
> 
> 标签：ios, uiviewcontroller, storyboard, xib, nib

![故事板设置](https://i.stack.imgur.com/5y9tY.png)

我有一个带有 StoryBoard（iOS 5+）的项目，有两个 UIViewController。

任务是以编程方式实例化第二个 UIViewController (CoordinationController)，但我想将它的 XIB 文件用于用户界面设计。

由于未记录的原因，将 XIB 复制到 StoryBoard 的明显解决方法不起作用或不可用。甚至规则是，如果第二个故事板的视图控制器没有视图，它将寻找同名的 XIB... 不起作用。

如何实例化第二个 UIViewController 并使用它的 XIB 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T16:59:27.390

您可以加载 nib 文件并在 CoordinationController 的 initWithCoder: 方法中设置视图：

```
-(id)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:aDecoder]) {
        UINib *nib = [UINib nibWithNibName:@"CoordinationController" bundle:nil];
        NSArray *nibObjects = [nib instantiateWithOwner:self options:nil];
        self.view = nibObjects.lastObject;
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-10T00:50:04.350

一个非常简单的解决方案是覆盖视图控制器的`nibName`属性并返回对您要加载的视图进行编码的 nib 的名称：

```
- (NSString*) nibName
{
    NSLog( @"p.s. this is the nib that the storyboard generated: %@", [super nibName]);

    return @"MyViewController";
} 
```

请注意，您可以访问故事板编译器生成的 nib 的名称，该名称将被使用。这个 nib 包含在 app bundle 中，打包在 storyboard.storyboardc 包中。

我有点惊讶您不能从此 nibName 实现中返回 nil 并获得加载程序使用[文档中描述的规则](https://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/nibName)搜索 nib 的默认行为。

或者（这是作弊）您可以通过带有键 nibName 的用户定义的运行时属性在 Storyboard 本身中为视图控制器设置所需的 nib 名称。这是有效的，因为该属性有一个未记录的设置器，所以实际上不要这样做！

我认为这是一个比公认答案更好的解决方案，因为视图将在视图控制器生命周期的正常过程中加载 - 也就是说，它将在控制器出现之前延迟加载，而不是在 init 方法中预先加载。而且代码更少。

# post - php邮件中的textarea没有换行符

> ID：15747352
> 
> 赞同：2
> 
> 时间：2013-04-01T16:34:50.270
> 
> 标签：post, php

从代码中可以看出，用户首先输入姓名和消息，然后单击发送。问题是文本区域。当我换行时，我收到的电子邮件中仍然没有任何换行符。

```
<?php
$to = "abc@xyz.com";
$subject = "Message from contact form";

//begin of HTML message
$message = <<<EOF
<html>
<body>
<b>Name:</b><br>
{$_POST['name']}
<br>
<b>Message:</b><br>
{$_POST['message']}
</body>
</html>
EOF;
//end of message

$header  = "MIME-Version: 1.0" . "\r\n";
$header .= "Content-type: text/html; charset=iso-8859-1" . "\r\n";
$header .= "from:abc@xyz.com";

mail($to, $subject, $message, $header);
echo "Email sent!";
?>

<form action="sendmail.php" method="post">
Name: <br>
<input type="text" name="name" style="width: 200px;"> <br><br>

Message: <br>
<textarea name="message" style="width: 200px; height: 100px;"></textarea> <br><br>

<input type="submit" value="Send">
</form> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T16:40:45.330

这就是 HTML 的本意。无论您`Enter`在 HTML 源代码中点击多少次，浏览器只会在有 HTML 标记告诉它这样做时才显示换行符。

[您可以使用nl2br()](http://uk3.php.net/nl2br)插入此类标签。您还想使用[htmlspecialchars()](http://uk3.php.net/htmlspecialchars)转义原始输入。

```
$name = htmlspecialchars($_POST['name']);
$message = nl2br(htmlspecialchars($_POST['message']));

//begin of HTML message
$message = <<<EOF
<html>
<body>
<b>Name:</b><br>
{$name}
<br>
<b>Message:</b><br>
{$message}
</body>
</html>
EOF; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:49:28.497

用这个：-

```
echo nl2br("My name is\n user2232809"); 
```

将输出

我的名字是
user2232809

此函数返回`<br /> or <br>`在所有换行符之前插入的字符串。因此，当您按 Enter 时，它会返回它的 html 等效项`<br>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:40:35.527

在 textarea 的文本上使用 PHP 的 nl2br()....

# mysql - PHP MySQL删除父子行

> ID：15747353
> 
> 赞同：5
> 
> 时间：2013-04-01T16:34:51.233
> 
> 标签：mysql, parent, children, sql-delete

我有 1 个 MySQL 表。它看起来像这样：

```
+---------+-------------+--------+
| item_id |  parent_id  |  Name  |
+---------+-------------+--------+
|   1     |     0       |  Home  |
+---------+-------------+--------+
|   2     |     1       |  Sub   |
+---------+-------------+--------+
|   3     |     2       | SubSub |
+---------+-------------+--------+ 
```

如果我删除 item_id 1，我也想删除其余的子，但我该怎么做？

我已经尝试过外键，但只有当你有 2 个表时它才有效？

我希望有人可以在 MySQL 或者 PHP 中帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T16:43:21.680

您绝对可以在 MySQL 中使用自引用外键（您不需要多个表）。但是，对于任何类型的外键支持，您都需要使用[`InnoDB`引擎](http://dev.mysql.com/doc/refman/5.5/en/innodb-storage-engine.html)。我的猜测是，您正在使用[`MyISAM`引擎](http://dev.mysql.com/doc/refman/5.5/en/myisam-storage-engine.html)。

您可以创建一个类似于您已经拥有`InnoDB`的表，包括自引用外键，如下所示：

```
CREATE TABLE  `yourTable` (
  `item_id` int(10) unsigned NOT NULL auto_increment,
  `parent_id` int(10) unsigned default NULL,
  `Name` varchar(50) NOT NULL,
  PRIMARY KEY  (`item_id`),
  KEY `FK_parent_id` (`parent_id`),
  CONSTRAINT `FK_parent_id` FOREIGN KEY (`parent_id`) REFERENCES `yourTable` (`item_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

然后，当您发布`DELETE`声明时，例如：

```
DELETE FROM `yourTable` WHERE `item_id` = 1; 
```

...它会删除每个“子”行，它也有一个`parent_id`。`1`如果这些“子”行中的任何一个都有自己的子行，它们也会被删除，等等（这就是`ON DELETE CASCADE`意思）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:55:53.193

实际上比想象的要容易：

```
DELETE FROM table WHERE id = # OR parent_id = #; //where # is the same in both places. 
```

例子：

```
DELETE FROM table WHERE id = 1 OR parent_id = 1; 
```

# java - 用不同的 JPanel 替换 JPanel

> ID：15747357
> 
> 赞同：0
> 
> 时间：2013-04-01T16:35:10.917
> 
> 标签：java, swing, jpanel, actionlistener

嗨，这是一个基本的问题。在我的代码中，我在构造函数中创建了一个 gui，然后嵌套了一个 ActionListener 类来处理按钮更改。此代码将创建 gui 并且动作侦听器正确运行 actionPerformed 方法。但是，我尝试了多种方法来更改 gui 中的面板，但我觉得我设置程序的方式不可能让它工作。抱歉，如果这是重复的，但是在搜索了一段时间之后，我还没有找到一个可以帮助我解决问题的好例子。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;

import org.math.plot.Plot2DPanel;
import org.math.plot.plotObjects.BaseLabel;

public class GraphGui extends JFrame {

//default width and height of the GUI
private static final int WIDTH = 1200;
private static final int HEIGHT = 700;

GraphPlot gp = new GraphPlot();
Plot2DPanel plotPanel =gp.determinePlotToPlot("duration");

/**
 * This is the constructor that initializes the JFrame and the layout of the GUI.
 * The radio buttons are also created here and grouped accordingly.
 */
public GraphGui() {
    //title of GUI
    setTitle("VibeTech Graph Gui");

    //First JRadioButton for date vs duration
    JRadioButton durToDate = new JRadioButton("Duration vs. Date");
    durToDate.addActionListener(new RadioButtonListener());
    durToDate.setActionCommand("duration");
    durToDate.setSelected(true);

    //JRadioButton for weight vs date
    JRadioButton weightToDate = new JRadioButton("Weight vs. Date");
    weightToDate.addActionListener(new RadioButtonListener());
    weightToDate.setActionCommand("weight");

    //JRadioButton for plan type vs date
    JRadioButton planToDate = new JRadioButton("Plan vs. Date");
    planToDate.addActionListener(new RadioButtonListener());
    planToDate.setActionCommand("level");

    //button group of the buttons to display them as one group
    ButtonGroup group = new ButtonGroup();
    group.add(planToDate);
    group.add(weightToDate);
    group.add(durToDate);

    //create JPanel to add objects to
    JPanel jplRadio = new JPanel();
    jplRadio.setLayout(new GridLayout(0, 1));
    //add radio buttons
    jplRadio.add(planToDate);
    jplRadio.add(weightToDate);
    jplRadio.add(durToDate);

    Plot2DPanel dvt = new Plot2DPanel();
    dvt.addLinePlot("Duration over Time", gp.getDate(), gp.getDuration());
    BaseLabel title = new BaseLabel("Duration over Time", Color.RED,
            0.5, 1.1);
    title.setFont(new Font("Courier", Font.BOLD, 20));
    dvt.addPlotable(title);
    dvt.setAxisLabels("Time", "Duration");

    setLayout(new BorderLayout());
    add(jplRadio, BorderLayout.WEST);
    add(plotPanel, BorderLayout.EAST);

    setSize(WIDTH, HEIGHT);
    setVisible(true);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

//main method to run program
public static void main(String [ ] args)
{
    //create new GUI
    @SuppressWarnings("unused")
    GraphGui test = new GraphGui();
}

//create a radio button listener to switch graphs on button press
class RadioButtonListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        if(e.getActionCommand().equals("duration")) {
            plotPanel = gp.determinePlotToPlot("duration");
        } else if (e.getActionCommand().equals("weight")) {
            plotPanel = gp.determinePlotToPlot("weight");
        } else if (e.getActionCommand().equals("level")) {
            plotPanel = gp.determinePlotToPlot("level");
        }
        //here is where I tried to do removes, adds, and validates but
        //I have trouble getting to the frame itself to remove the JPanel
        //component. I think this is a setup problem.
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:38:03.797

您需要*添加*面板和`revalidate`/`repaint`以`JFrame`使其显示：

```
add(plotPanel, BorderLayout.EAST);
revalidate();
repaint(); 
```

最好使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)来管理此类功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:41:24.070

尝试`CardLayout`用于在面板之间切换。这是我对类似问题的解决方案：[https ://stackoverflow.com/a/9377623/544983](https://stackoverflow.com/a/9377623/544983)

# c# - 我的处方集没有得到验证.... asp.net mvc EF5

> ID：15747360
> 
> 赞同：0
> 
> 时间：2013-04-01T16:35:29.767
> 
> 标签：c#, asp.net-mvc, entity-framework

我有这个 viewModel 类：

```
[Required]
     [StringLength(50)]
     public string Name { get; set; }

     [Required]
     [EmailAddress]
     public string Email { get; set; }

     [Required]
     public string MessageType { get; set; }

    [Required]
    [StringLength(300)]
    [DataType(DataType.MultilineText)]
    public string Message { get; set; } 
```

我的视图中有这段代码：

```
@model Kekanto.ViewModels.DoubtViewModel

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

<br />
@Html.LabelFor(model=>model.Name)
@Html.EditorFor(model=>model.Name)<br />
@Html.ValidationMessageFor(model => model.Name)

@Html.LabelFor(model=>model.Email)
@Html.EditorFor(model=>model.Email)<br />
 @Html.ValidationMessageFor(model => model.Email)

@Html.Label("MessageType") 
<select  name="MessageType" id="MessageType">
<option ></option>
<option >Sugestion</option>
<option >Question</option>
<option >Complaint</option>
</select>
 @Html.ValidationMessageFor(model => model.MessageType)

<br /><br />

@Html.LabelFor(model=>model.Message)
@Html.EditorFor(model=>model.Message)
 @Html.ValidationMessageFor(model => model.Message)

     <input type="submit" value="Send Message" />

} 
```

尽管某些属性是必需的，但我没有得到验证...我可以发送空表单并且我没有收到消息“此字段是必需的”...。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:41:16.640

您是使用客户端验证还是仅使用服务器端验证。

为了启动服务器端，您需要检查`ModelState.IsValid`您的 POST

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:43:32.633

看看[这里](http://www.asp.net/mvc/tutorials/older-versions/javascript/creating-a-mvc-3-application-with-razor-and-unobtrusive-javascript)。您可能缺少对正确 javascript 文件的一些引用。

# youtube - Youtu.be 网址不再等同于 youtube.com 网址

> ID：15747361
> 
> 赞同：4
> 
> 时间：2013-04-01T16:35:36.567
> 
> 标签：youtube, short-url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-20T22:00:29.290

如果您仍然遇到此问题，我建议您将 QRcode 发送到您拥有的网站，然后此 sith 将重定向到视频。这样，即使 youtube 将您的视频踢出，您也可以将它们上传到其他服务器并更新重定向

# mysql - 在一个 SQL 命令中更新表中的多行

> ID：15747364
> 
> 赞同：-1
> 
> 时间：2013-04-01T16:35:40.750
> 
> 标签：mysql, sql, oracle

假设我有一个名为的表`'PRODUCTS'`，我需要在销售完成时更新此表。有没有办法将所有更新合并到一个 SQL 语句中？

目前我有类似的东西：

```
UPDATE PRODUCT
SET PROD_Q=PROD_Q - 1
WHERE PROD_CODE='A'

UPDATE PRODUCT
SET PROD_Q=PROD_Q - 1
WHERE PROD_CODE='B'

... 
```

难道没有更有效的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:37:31.437

这是您正在寻找的 - 使用`IN`：

```
UPDATE PRODUCT 
SET PROD_Q=PROD_Q - 1
WHERE PROD_CODE IN ('A','B') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:38:45.207

你试过了吗

```
UPDATE PRODUCT SET PROD_Q=PROD_Q-1 WHERE PROD_CODE='A' OR PROD_CODE='B' 
```

这将更新 prod_code 的两个值

# c# - WPF - Listview 项目边距

> ID：15747365
> 
> 赞同：5
> 
> 时间：2013-04-01T16:35:41.583
> 
> 标签：c#, wpf, xaml

我的 Listview 项目没有延伸到列的整个宽度。我的单元格边框右侧总是有一个边距。我想让边界区域延伸到整个列宽，并去掉我的内容左右两侧的任何填充、边距或其他任何东西。目标是让边框填充每个单元格中的整个空间。

我已经应用了拉伸并将边距设置为“-6,0,-6,0”，但这似乎并不能解决问题。

这是我的代码：

```
 <Grid>
            <Grid.Resources>
                <x:Array Type="{x:Type sys:String}" x:Key="items">
                    <sys:String>Foo</sys:String>
                    <sys:String>Bar</sys:String>
                    <sys:String>Spong</sys:String>
                </x:Array>
            </Grid.Resources>

            <ListView ItemsSource="{StaticResource items}">

                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="Margin"
            Value="-6, 0,-6,0" />
                        <Setter Property="HorizontalAlignment" Value="Stretch" />
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Setter Property="VerticalContentAlignment" Value="Stretch" />
                        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
                    </Style>
                </ListView.ItemContainerStyle>

                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Data" Width="80">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Border BorderThickness="2" BorderBrush="Black" HorizontalAlignment="Stretch">
                                        <TextBox Text="{Binding .}"  />
                                    </Border>

                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="Length"
         DisplayMemberBinding="{Binding Length}" />
                    </GridView>
                </ListView.View>
            </ListView>

        </Grid> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T17:10:25.263

我使用 DataTemplate 资源使其工作并将边框的边距设置为-6。

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <x:Array Type="{x:Type sys:String}" x:Key="items">
                <sys:String>Foo</sys:String>
                <sys:String>Bar</sys:String>
                <sys:String>Spong</sys:String>
            </x:Array>
            <DataTemplate x:Key="MyDataTemplate">
                <Border BorderThickness="2" BorderBrush="Black" Margin="-6">
                    <TextBox Text="{Binding .}" Margin="0" Padding="0"/>
                </Border>
            </DataTemplate>
        </Grid.Resources>
        <ListView ItemsSource="{StaticResource items}">
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.View>
                <GridView >
                    <GridViewColumn Header="Data" Width="80" CellTemplate="{StaticResource MyDataTemplate}" />
                    <GridViewColumn Header="Length" DisplayMemberBinding="{Binding Length}" />
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:02:50.047

只需为边框元素设置边距：

```
 <Border Margin="-6,0,-6,0" BorderThickness="2" BorderBrush="Black" HorizontalAlignment="Stretch">
               <TextBox Text="{Binding .}"  />
            </Border> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-09T12:42:02.327

替代解决方案

```
typeof(GridViewRowPresenter).GetField("_defalutCellMargin", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.GetField).SetValue(null, new Thickness(0)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-08T11:42:09.813

我这样做

```
HorizontalContentAlignment="Stretch" 
```

在列表视图上

# c# - C# 将数字转换为单词

> ID：15747372
> 
> 赞同：-9
> 
> 时间：2013-04-01T16:36:12.543
> 
> 标签：c#, int, void

我在这里有这个私人空白

```
private void NumbersToWords(int number)
    {
        string word;
        if (number == 8)
        {
            word = "Eight";
        }
        return word;
    } 
```

我在另一个私人空白中称它为

```
lblDaysToGo.Text = NumbersToWords(info.DaysToGo.ToString()); 
```

但是我收到了这个错误......我做错了什么？

```
Cannot implicitly convert type 'void' to 'string' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:37:21.467

您正在尝试`string`从`void`函数返回 , 。您需要将功能更改为：

```
private string NumbersToWords(int number) 
```

一旦你涵盖了这一点，你需要改变：

```
lblDaysToGo.Text = NumbersToWords(info.DaysToGo.ToString()); 
```

`string`当你应该传入a时，你传入了 a `int`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:37:29.963

将您的方法更改为

```
private string NumbersToWords(int number)
{
    string word = "";
    if (number == 8)
    {
        word = "Eight";
    }
    return word;
} 
```

以前您没有返回值，由 表示`void`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:37:28.640

该错误非常具有描述性 - 您可以`void`用作类型的唯一位置是方法的返回类型，因此这是第一个查看的位置。

您的函数的返回类型是`void`. 您正试图从中返回 a `string`。

将返回类型更改为`string`：

```
private string NumbersToWords(int number) 
```

# xpath - selenium - how can you find an element using a parent element?

> ID：15747373
> 
> 赞同：0
> 
> 时间：2013-04-01T16:36:13.303
> 
> 标签：xpath, selenium, webdriver, selenium-webdriver

I am using selenium as a web scraper and would like to locate a number of tables and then for every table (by looping) locate an element inside that table (without going through the entire document again).

I am using the `Iwebelement.FindElements(By.XPath)` but keeps giving an error saying '`element no longer connected to DOM`'

here is an excerpt from my code:

```
IList[IWebElement] elementsB = driver.FindElements(By.XPath("//*[@id=\"col_main\"]/table[@class='risultati']")); 

// which loads all tables with class 'risultati'

foreach (IWebElement iwe in elementsB)

{

IList[IWebElement] ppp = iwe.FindElements(By.XPath("//table"));

} 
```

here I am trying to load inner tables from inside each table found in elements, but keeps giving me the error mentioned above.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:53:26.230

我相信问题在于双斜杠

```
IList[IWebElement] ppp = iwe.FindElements(By.XPath("//table")); 
```

它不应该有任何斜线，以便查找以您的 iwe 元素开头。双斜杠表示查看文档中的任何位置。

应该

```
IList[IWebElement] ppp = iwe.FindElements(By.XPath("table")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:10:52.897

我会这样做：

```
By tableLocator = By.XPath("//table");
By itemLocator = By.XPath("//*[@id=\"col_main\"]/table[@class='risultati']");

for(WebElement iwe : elementsB) {
   List<WebElement> tableList = iwe.FindElements( tableLocator );
   for ( WebElement we : tableList ) {
       we.getElementByLocator( itemLocator );
       System.out.println( we.getText() );
   }
}

public static WebElement getElementByLocator( final By locator ) {
  LOGGER.info( "Get element by locator: " + locator.toString() );  
  final long startTime = System.currentTimeMillis();
  Wait<WebDriver> wait = new FluentWait<WebDriver>( driver )
    .withTimeout(30, TimeUnit.SECONDS)
    .pollingEvery(5, TimeUnit.SECONDS)
    .ignoring( StaleElementReferenceException.class ) ;
  int tries = 0;
  boolean found = false;
  WebElement we = null;
  while ( (System.currentTimeMillis() - startTime) < 91000 ) {
   LOGGER.info( "Searching for element. Try number " + (tries++) ); 
   try {
    we = wait.until( ExpectedConditions.visibilityOfElementLocated( locator ) );
    found = true;
    break;
   } catch ( StaleElementReferenceException e ) {      
    LOGGER.info( "Stale element: \n" + e.getMessage() + "\n");
   }
  }
  long endTime = System.currentTimeMillis();
  long totalTime = endTime - startTime;
  if ( found ) {
   LOGGER.info("Found element after waiting for " + totalTime + " milliseconds." );
  } else {
   LOGGER.info( "Failed to find element after " + totalTime + " milliseconds." );
  }
  return we;
} 
```

# ajax - Yii 中的动态表单

> ID：15747374
> 
> 赞同：0
> 
> 时间：2013-04-01T16:36:14.837
> 
> 标签：ajax, tabs, yii

我在为我的应用程序创建某些东西时遇到问题。我已经拥有的是一个 CJuiTabs 系统，每个选项卡中都有一个表单。选项卡的数量和值/名称由我数据库中另一个表中的许多 tinyInt 列定义。选项卡的值作为隐藏字段与表单一起提交。

因此，现在如果您使用已提交记录的 id 访问视图，您将能够更新该记录，但无法使用其他选项卡值创建新记录。这是我的问题。我如何让应用程序根据您选择的选项卡决定是创建新记录还是更新现有记录？如果您正在更新一条记录，我希望显示该记录的值，但如果您正在创建一个新记录，您应该只看到空白字段（好吧，它是一个评级系统，所以我猜它是星号而不是字段）。

我想应该通过使用 AJAX 来完成，但我非常不确定如何做到这一点。

游戏/视图：

```
<?php 
$tab_list=Platform::getPlatforms();
$tabarray=array();

// Create Dynamic Tabs
foreach($tab_list as $key=>$value){
    $tabarray["$value"]=array(
        'id'=>$key,
        'content'=>$this->renderPartial('../ranking/_form',
            array('model'=>$ranking, 'key'=>$key),TRUE)
    );
}?>

<?php
$this->widget('zii.widgets.jui.CJuiTabs',array(
    'tabs'=>$tabarray,
    'options'=>array(
        'collapsible'=>true,
    ),
    'id'=>'categorytabs',
)); ?> 
```

型号/平台：

```
const PC = 1;
    const Mac = 2;
    const XBOX = 3;
    const XBOX360 = 4;
    const PS2 = 5;
    const PS3 = 6;
    const PSP = 7;
    const PSVITA = 8;
    const Wii = 9;
    const WiiU = 10;
    const NintendoDS = 11;
    const NintendoDS3 = 12;
...
    public function getPlatforms()
    {
        $id = Yii::app()->request->getQuery('id');
        $platform = Platform::model()->findByPk($id);
        $platforms = array();
        if ($platform -> pc == 1)
        {
            $platforms[self::PC] = "PC";
        }
        if ($platform -> xbox == 1)
        {
            $platforms[self::XBOX] = 'XBOX';
        }
        if ($platform -> xbox360 == 1)
        {
            $platforms[self::XBOX360] = "XBOX 360";
        }
        if ($platform -> ps2 == 1)
        {
            $platforms[self::PS2] = "PS2";
        }
        if ($platform -> ps3 == 1)
        {
            $platforms[self::PS3] = 'PS3';
        }
        if ($platform -> psp == 1)
        {
            $platforms[self::PSP] = "PSP";
        }
        if ($platform -> psVita == 1)
        {
            $platforms[self::PSVITA] = 'PS VITA';
        }
        if ($platform -> wii == 1)
        {
            $platforms[self::Wii] = "Wii";
        }
        if ($platform -> wiiU == 1)
        {
            $platforms[self::WiiU] = "Wii U";
        }
        if ($platform -> nintendoDS == 1)
        {
            $platforms[self::NintendoDS] = 'Nintendo DS';
        }
        if ($platform -> nintendoDS3 == 1)
        {
            $platforms[self::NintendoDS3] = 'Nintendo DS3';
        }       
        return $platforms;
    } 
```

控制器/游戏控制器：

```
public function actionView($id)
    {
        ...
        $ranking=$this->createRanking($model);
        ...
        }

    protected function createRanking($model)
    {
        $user_id=Yii::app()->user->getId(); 
        $game_id=$model->id;
        $rank=ranking::model()->find("create_user_id=$user_id and game_id=$game_id"); 

        if($rank===null){
        $ranking=new Ranking;
        }
        else{
        $ranking=$rank;
        }

        if(isset($_POST['Ranking']))
        {
            $ranking->game_id=$model->id;
            $ranking->attributes=$_POST['Ranking'];

            $valid = $ranking->validate();
            if ($valid)
            {
                $ranking->save(false);
                $this->redirect(array('index'));
            }
        }
        return $ranking;
    } 
```

排名/_form:

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'ranking-form',
    'enableAjaxValidation'=>false,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <?php echo $form->hiddenField($model, 'platform_id', array('value' => $key)); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'overall'); ?>
        <?php $this->widget('CStarRating',array(
            'model'=>$model,
            'attribute' => 'overall',
        )); ?>
        <?php echo $form->error($model,'overall'); ?>
    </div>
    <br/>

    <div class="row">
        <?php echo $form->labelEx($model,'graphics'); ?>
        <?php $this->widget('CStarRating',array(
            'model'=>$model,
            'attribute' => 'graphics',
        )); ?>
        <?php echo $form->error($model,'graphics'); ?>
    </div>
    <br/>

    <div class="row">
        <?php echo $form->labelEx($model,'sound'); ?>
        <?php $this->widget('CStarRating',array(
            'model'=>$model,
            'attribute' => 'sound',
        )); ?>
        <?php echo $form->error($model,'sound'); ?>
    </div>
    <br/>

    <div class="row">
        <?php echo $form->labelEx($model,'gameplay'); ?>
        <?php $this->widget('CStarRating',array(
            'model'=>$model,
            'attribute' => 'gameplay',
        )); ?>
        <?php echo $form->error($model,'gameplay'); ?>
    </div>
    <br/>

    <div class="row">
        <?php echo $form->labelEx($model,'lastingApp'); ?>
        <?php $this->widget('CStarRating',array(
            'model'=>$model,
            'attribute' => 'lastingApp',
        )); ?>
        <?php echo $form->error($model,'gameplay'); ?>
    </div>
    <br/>

    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:47:13.347

我不确定我是否完全明白，让我试试看是否有问题，

您有多个表单一个用户可以编辑，它们都是在不同游戏平台（XBOX、PS2/3 等）上对一款游戏进行排名的表单。

如果是这种情况，请在您的游戏控制器中：

```
$rank=ranking::model()->find("create_user_id=$user_id and game_id=$game_id"); 
```

无论游戏平台如何，都将始终返回相同的数据库条目（前提是有条目）您需要使用类似的东西

```
$rank=ranking::model()->find("create_user_id=$user_id and game_id=$game_id and platform_id=$platform_id"); 
```

这涵盖了保存部分，但显示中也存在问题。你有：

```
foreach($tab_list as $key=>$value){
    $tabarray["$value"]=array(
        'id'=>$key,
        'content'=>$this->renderPartial('../ranking/_form',
            array('model'=>$ranking, 'key'=>$key),TRUE)
    ); 
```

本质上，您对每个选项卡使用相同的 $ranking 模型，因此相同的（已经存在的）字段输入或星级评分。

这是它变得有点棘手的地方。理想情况下，您将使用[Yii 的关系](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#declaring-relationship)将您的模型设置为具有多个游戏（MANY_MANY）的平台，这些游戏具有多个评级，具体取决于平台/游戏组合。然后你可以按照以下方式做一些事情：

```
 $platforms = Plateform::model()->findAll(array(
            'with'=>array(                                                  
                'rankings'=>array(
                       'condition'=>'game_id=$game_id AND platform_id=t.id')) //t refers to platform in Yii < 1.1.13\. For Yii >= 1.1.13 check version update logs

));
    foreach($platforms as $platform){
        $tabarray[$platform->title]=array( //called it title arbitrarily, could be anything
            'id'=>$platform->id,
            'content'=>$this->renderPartial('../ranking/_form',
                array('model'=>$platform->rankings[0], 'key'=>$platform->id),TRUE)
        ); 
```

（我不让你使用 'params'=>array()，但请养成习惯。）

但是，您似乎并没有走那条路，所以如果需要，请检查一下其中关键是平台 ID。然后你可以这样做：

```
 foreach($tab_list as $key=>$value){
        $tabarray["$value"]=array(
            'id'=>$key,
            'content'=>$this->renderPartial('../ranking/_form',
                array('model'=>$rankings[$key], 'key'=>$key),TRUE)
        ); 
```

如果您这样做，就保存而言，如果 isset($_GET['Ranking']) 那么您将使用 platform_id 将正确的模型与数组隔离，以便将其保存到 db （或创建一个新模型）如果它不存在）

希望对您有所帮助，或者至少让您走上正轨。

**编辑：**添加了一些代码，不是最好/最干净的解决方案，但它应该可以工作并且易于理解：

控制器/游戏控制器：

```
 public function actionView($id)
{
    ...
    $this->createRanking($model);
    $rankings = $this->getRankingList();
    ...
}

//add this function
protected function getRankingList($gid,$uid)
    {
        $tab_list=Platform::getPlatforms();
        $rankings = array();
        foreach($tab_list as $key=>$value)
        {
            $rank=Ranking::model()->find("create_user_id=$user_id and game_id=$game_id and platform_id=$key"); 
            if(empty($rank))
                 $rank = new Ranking;
            $rankings[$key]= $rank;
        }
        return $rankings;
    } 
```

游戏/视图：

```
<?php 
$tab_list=Platform::getPlatforms();
$tabarray=array();

// Create Dynamic Tabs
foreach($tab_list as $key=>$value){
    $tabarray["$value"]=array(
        'id'=>$key,
        'content'=>$this->renderPartial('../ranking/_form',
            array('model'=>$rankings[$key], 'key'=>$key),TRUE)
    );
}?>

<?php
$this->widget('zii.widgets.jui.CJuiTabs',array(
    'tabs'=>$tabarray,
    'options'=>array(
        'collapsible'=>true,
    ),
    'id'=>'categorytabs',
)); ?> 
```

# c - Dynamic 2D array in typedef

> ID：15747375
> 
> 赞同：0
> 
> 时间：2013-04-01T16:36:15.463
> 
> 标签：c, arrays

How do I get this to work? I am not sure how many invoices a customer will be assigned to and want to leave it dynamic. Please help.

```
#include <stdio.h>
#include <stdlib.h>

typedef struct _cust{
    int id;
    int invoices[][2];
} cust;

cust account[] = {
    {1,{10,100}},
    {2,{{10,100},{20,200}}},
    {3,{{10,100},{20,200},{30,300}}}
};

int main(void) {
    printf("%d\n", account[0].invoices[0][0]);
    printf("%d\n", account[1].invoices[1][0]);
    printf("%d\n", account[2].invoices[2][0]);
    return 0;
    } 
```

When I run this code I get following error ...

```
error: initialization of flexible array member in a nested context 
```

If I give fill in a number something like this int invoices[3][2], the code runs fine.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:01:38.233

指向具有两个元素的数组的指针如下所示：

```
int (*array)[2]; 
```

但您可能更容易使用`typedef`第一个：

```
typedef int pair[2];
.
.
pair * array; 
```

你可以为这样的野兽分配一大块。如果您有一个 C99（或更高版本）兼容的编译器，这将类似于

```
array = malloc(sizeof(pair[n])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:41:55.200

您可以更改`invoices`为`int** invoices`，然后使用动态分配`malloc()`。您可以像这样分配二维数组：

```
int** theArray;
theArray = (int**) malloc(arraySizeX*sizeof(int*));
for (int i = 0; i < arraySizeX; i++)
   theArray[i] = (int*) malloc(arraySizeY*sizeof(int)); 
```

# android - Load Image in a custom list by SimpleCursorAdapter

> ID：15747380
> 
> 赞同：0
> 
> 时间：2013-04-01T16:36:34.323
> 
> 标签：android, imageview, simplecursoradapter

I have a custom list that I am loading data in it by a SimpleCursorAdapter ..My list has an imageview that I want to change its image per each row of list..I used viewbilnder..but didnot get anything.. this is myadapter code

```
private void getData() {

        try {

        // obtain a list of from DB

            db = SQLiteDatabase.openDatabase(ClubCP.DbPath,null,SQLiteDatabase.CREATE_IF_NECESSARY);
            String TABLE_NAME = "cat";
            String COLUMN_ID = "_id";
            String COLUMN_POET_ID = "poet_id";
            String COLUMN_TEXT = "text";
            String COLUMN_PARENT_ID = "parent_id";
            String [] columns ={COLUMN_ID,COLUMN_TEXT,COLUMN_POET_ID};
            String mySQL = "SELECT DISTINCT id as _id "+","+COLUMN_POET_ID+","+COLUMN_TEXT+","+COLUMN_PARENT_ID
                    + " from "+TABLE_NAME
                    + " where " + COLUMN_PARENT_ID+"= 0 "
                    + " order by " + COLUMN_POET_ID+"= 0 ";
          // String mySQL="SELECT DISTINCT id as _id,poet_id,text,parent_id from cat where parent_id=0 order by poet_id";              
        //Cursor c = db.query(TABLE_NAME,columns,COLUMN_PARENT_ID+"= 0", null, null, null, COLUMN_POET_ID);
         Cursor c = db.rawQuery(mySQL, null);

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.list_item, c, 
                columns, new int[] {R.id.list_item_text_sub,R.id.list_item_text_main,R.id.list_item_text_id}, 0);
    adapter.setViewBinder(new CustomViewBinder());  
    ListView list = (ListView) findViewById(R.id.list_poet_name);
    list.setAdapter(adapter);

        } catch (Exception e) {
        Toast.makeText(this, e.getMessage(), 1).show();
        }

} 
```

and this is viewbinder

```
 public class CustomViewBinder implements ViewBinder {

    @Override
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

        if (columnIndex == cursor.getColumnIndex(ClubCP.KEY_POET_ID)) {
            // If the column is IS_STAR then we use custom view.
            int poet_id = cursor.getInt(columnIndex);

            String path = ClubCP.SDcardPath + "/temp/"+poet_id+".jpg"; 
            File imgFile = new File(path);
            ImageView img=(ImageView)findViewById(R.id.list_item_img);
            if(imgFile.exists())
        {
                Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());                  

                img.setImageBitmap(myBitmap);
        }
            else                    
               Toast.makeText(Read.this,"no IMAGE IS PRESENT'",Toast.LENGTH_SHORT).show();

            img.setImageResource(R.drawable.music_album_header_vinyl);
        }
        /// if (poet_id != 6) {

                 //TextView verse = (TextView)findViewById(R.id.poem_verse_list_item_01);
                // verse.setGravity(Gravity.LEFT);

        //  } else {

        //  }
        //  return true;
    //  }

        return false;
    }

} 
```

Can some one helps me about this? I searched and find a way to load image from database but I want to load image from sdcard and only image's name is from database

I searched a lot but cant find any solution to fix my problem...No one can help me about this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:47:22.840

我找到了这部分代码

```
esodaAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
             @Override
             public boolean setViewValue (View view, Cursor cursor, int columnIndex){
                 if (view.getId() == R.id.imageView1) {
                     ImageView IV=(ImageView) view;
                     int resID = getApplicationContext().getResources().getIdentifier(cursor.getString(columnIndex), "drawable",  getApplicationContext().getPackageName());
                     IV.setImageDrawable(getApplicationContext().getResources().getDrawable(resID));
                     return true;
                }
                 return false;
     } 
```

我认为我的代码条件有问题..你怎么看？但是当我将代码更改为此

```
enter code here @Override
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

        if (view.getId() == R.id.list_item_img) {
            // If the column is IS_STAR then we use custom view.
            int poet_id = cursor.getInt(columnIndex);

            String path = ClubCP.SDcardPath + "/temp/"+"9"+".jpg"; 
            File imgFile = new File(path);
            ImageView img=(ImageView)view;
            if(imgFile.exists())
        {
                Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());                  

                img.setImageBitmap(myBitmap);
        }
            else                    
               Toast.makeText(Read.this,"no IMAGE IS PRESENT'",Toast.LENGTH_SHORT).show();

            img.setImageResource(R.drawable.music_album_header_vinyl);
        } 
```

我的列表不再加载..只有列表布局重复，文本视图没有任何变化

# java - 找不到 createNewFile 的文件

> ID：15747385
> 
> 赞同：0
> 
> 时间：2013-04-01T16:36:47.913
> 
> 标签：java, ioexception, filenotfoundexception

我正在用 Java 编写一个私有方法，该方法读取和写入一个简单的文本文件，如果它不存在，它应该创建它，因为 createNewFile() 首先检查它。

```
private boolean updateGameQuota(String name, String quantity) {
    ...
    File quotaLog = new File("seller-quotas.txt");
    quotaLog.createNewFile();
    ...
    return ret;
} 
```

编译时错误是：SmsFunctions.java:256: error: unreported exception IOException; 必须被捕获或声明被抛出 quotaLog.createNewFile(); ^ 1 个错误

将它放在 try-catch 块中似乎不是问题，因为我尝试过（也在许多其他尝试传递 quotaLog 的行上），但最终我到了很明显其他地方出了问题的地步。File 对象很好，但是如果我尝试使用 createNewFile 或说

```
FileReader sQReader = new FileReader(quotaLog); 
```

即使该文件肯定存在，我也会收到 FileNotFoundException，并且我在其他文本文件上尝试了此操作，这些文本文件在其他地方成功读取，结果相同。

任何帮助或想法将不胜感激！

**更新**：所以最后我的问题确实只是在所有内容周围放置 try-catch 块，并确保在其中设置的变量首先在这些块之外创建。我的困惑来自于一种错误的确定感，即 fileraders/filewriters 不应该需要 try catch 块（我可以发誓我没有多次使用它们），而这个错误实际上是其他事情的迹象。也许在关闭线程之前，有人可以详细说明为什么 Java 并不总是对此大惊小怪，如果这是真的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:41:29.713

[`File.createNewFile()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createNewFile%28%29)可以抛出 IOException （已检查异常）并且需要被包围在 try-catch 块中，或者您使用它的方法需要声明为`throws IOException`并且您需要在上游处理它。

要调试 FileNotFoundException，您可以尝试：

```
File quotaLog = new File("seller-quotas.txt");
System.out.println(quotaLog.getAbsolutePath()); 
```

它使用该[`File.getAbsolutePath()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getAbsolutePath%28%29)方法打印它期望文件存在的位置。

# jquery - 更改弹出对话框的位置

> ID：15747386
> 
> 赞同：-1
> 
> 时间：2013-04-01T16:36:49.650
> 
> 标签：jquery, asp.net

英语不是我的母语；请原谅打字错误。

当用户单击保存按钮时，我试图显示一个显示“已成功保存”的弹出对话框。

在 HTML 中，我有

```
<script src="Scripts/jquery-ui-1.9.0.custom.js" type="text/javascript"></script>
<link rel="Stylesheet" type="text/css" href="Styles/jquery-ui-1.8.21.custom.css" />
<link rel="Stylesheet" href="Styles/jquery-ui.css" />
<script type="text/javascript">
    $(document).ready(function () {
        var isSaved = '<%= this.showSavedDialog %>';
        if (isSaved)
        {
            $("#savedDialog").dialog({
                buttons: {
                    OK: function () {
                        $(this).dialog("close");
                    }
                },
                position: {
                    my: 'left bottom',
                    at: 'right top',
                    of: ("#btnSave")
                }
            });
        }
    });

</script>

<asp:LinkButton ID="btnSave" runat="server">Save</asp:LinkButton>

<div id="savedDialog">
    Saved successfully
</div> 
```

在后面的代码中，我有

```
protected bool showSavedDialog
{
    get
    {
        if (Session["showSavedDialog"] == null)
        {
            Response.Redirect("SessionExpired.aspx");
        }
        return bool.Parse(Session["showSavedDialog"].ToString().ToLower());
    }
} 
```

单击“保存”按钮时，确实会弹出对话框。但是，问题在于“保存”按钮位于页面下方，并且对话框显示在页面顶部，因此我必须向上滚动才能单击对话框上的“确定”按钮。我找到了有关如何更改对话框位置的解决方案，但无论我如何设置，显示都位于页面顶部或保存按钮正下方（这就是对话框的实际 html 代码, "savedDialog", 是)。我在这里缺少什么来更改对话框的位置？我对 jquery 很陌生，所以我将不胜感激。理想情况下，我想将它显示在页面的中心，或者至少，我希望它就在保存按钮旁边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:55:51.530

我得到了我自己的问题的答案。这就是我所做的。

**HTML：**

```
<script type="text/javascript">
    $(document).ready(function () {
        var isSaved = '<%= this.showSavedDialog %>';
        if (isSaved)
        {
            $("#savedDialog").dialog({
                buttons: {
                    OK: function () {
                        $(this).dialog("close");
                    }
                },
                position: {
                    my: "bottom",
                    at: "top",

                    //used div instead of a button so the dialog can be centered     
                    of: ("#div-save") 

                    //I needed this the dialog can be displayed at the bottom of the page
                    collison: "none"                     
                    }
            });
        }
    });

</script>

<div id="div-save">
    <asp:LinkButton ID="btnSave" runat="server">Save</asp:LinkButton>
</div>

<div id="savedDialog">
    Saved successfully
</div> 
```

**CS：**

```
protected bool showSavedDialog
{
    get
    {
        if (Session["showSavedDialog"] == null)
        {
            Response.Redirect("SessionExpired.aspx");
        }
        return bool.Parse(Session["showSavedDialog"].ToString().ToLower());
    }
} 
```

**CSS：**

```
#div-save
{
    float:left;
    width: 935px;
} 
```

# visual-studio - VSIX 包构建失败但未显示原因（Visual Studio 错误）

> ID：15747387
> 
> 赞同：11
> 
> 时间：2013-04-01T16:36:57.263
> 
> 标签：visual-studio, vsix, vs-extensibility, vspackage

我必须启用 MSBuild 项目构建输出详细程度的诊断模式才能看到：

```
1>Done executing task "EnableExtension" -- FAILED. (TaskId:81)
1>Done building target "DeployVsixExtensionFiles" in project "myextension.csproj" -- FAILED.: (TargetId:93)
...
1>Build FAILED.
1>
1>Time Elapsed 00:00:01.27
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

我的问题是我无法调试我正在处理的 Visual Studio 扩展包，因为构建输出显示某些东西失败了。已创建包含所有内容（包括 vsix 包）的 obj 和 bin 文件夹。我真的不知道我改变了什么特别之处，因为几个小时前一切都很好。

我如何调查出了什么问题？

顺便说一句：我正在使用 VS 2012 Premium Update 1

**编辑：**

我记得我做过什么。在调试模式下，我进入了工具 -> 扩展和更新，并卸载了我当前调试的扩展（在该操作之后没有重新启动 VS）。进一步尝试调试（关闭 VS 实验实例后按 F5）会导致这种神秘的构建行为。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-01T17:33:20.250

一段时间后我想出的当前解决方法是更改**​​ source.extension.vsixmanifest**文件中扩展包的显示名称：

```
 <Metadata>
    ...
    <DisplayName>Change this name to sth else and press F5</DisplayName>
    ...
  </Metadata> 
```

无需更改任何其他内容（不幸的是，恢复为旧名称仍会引发此错误，但至少可以继续开发和调试）。

**更新：**

我检查了 Windows 注册表中是否存在此类有问题的名称，并找到了以下`PendingDeletions`键：

```
HKEY_USERS\S-1-5-21-1832937852-2116575123-337272265-599953\Software\Microsoft\VisualStudio\11.0Exp\ExtensionManager\PendingDeletions 
```

在这个键下有指向我之前卸载的扩展的值（在调试模式下）：

```
C:\USERS\G_159\APPDATA\LOCAL\MICROSOFT\VISUALSTUDIO\11.0EXP\EXTENSIONS\JAROSLAW WALISZKO\MYEXTENSION\1.0\ 
```

删除此条目可以解决这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-17T16:49:33.973

大卫伊卡尔迪评论道：

> 另一种解决方案是手动打开 Visual Studio 实验实例。启动它会导致所有待处理的扩展被自动删除。

要启动实验实例，请在开发人员命令提示符下运行以下命令：

```
devenv.exe /RootSuffix Exp 
```

**更新：**我很笨 - 安装 VS 2013 SDK 后，在开始菜单的 Visual Studio 2013 文件夹中有一个启动实验实例的快捷方式。

# javascript - 填充，边框不适用于 chrome 上的 kineticjs 文本对象

> ID：15747390
> 
> 赞同：0
> 
> 时间：2013-04-01T16:37:12.907
> 
> 标签：javascript, jquery, canvas, kineticjs

我已经更新到 4.4。我正在像这样初始化一个 Text 对象：

```
var droppableText = new Kinetic.Text({
            x : posX,
            y : posY,
            name : field,
            stroke : '#555',
            strokeWidth : 2,
            fill : '#ddd',
            text : text,
            fontSize : fontSize,
            fontFamily : 'Calibri',
            textFill : '#555',
            width : width,
            height : height,
            padding : padding,
            align : 'center',
            fontStyle : 'italic',
            shadow : {
                color : 'black',
                blur : 10,
                offset : [10, 10],
                opacity : 0.2
            },
            cornerRadius : 10
        }); 
```

似乎 X、Y 和文本位置正确，但没有像以前那样的背景或边框。这在我使用 4.0 版本之前有效，我刚刚更新到 4.4，现在它不起作用。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:14:09.117

是的，从 4.3.0 版开始，边框矩形就消失了

[https://github.com/ericdrowell/KineticJS/wiki/Change-Log](https://github.com/ericdrowell/KineticJS/wiki/Change-Log)

```
Big changes to Kinetic.Text shape. 

Rectangle component has been removed to simplify the API. textFill is now fill, textStroke is now stroke, textStrokeWidth is now strokeWidth, and textShadow is now shadow. 

If you want to have a rectangle behind the text, you need to group the text with a Kinetic.Rect shape. Text fontSize units are now in pixels (used to be in points). The lineHeight attr is now defaulted to 1 (used to be defaulted to 1.2).

cornerRadius attr moved to rect shape 
```

# android - android googleMaps v2 onMarkerclick 对比

> ID：15747391
> 
> 赞同：0
> 
> 时间：2013-04-01T16:37:14.340
> 
> 标签：android, if-statement, google-maps-markers, google-maps-api-2

我的谷歌地图上有一个 onMarkerClickListener ，它在按下标记时触发。

标记是在 Tag 类中创建的，该类在通过的地图上创建自身内部的标记：

地图活动开始时的列表实例：

```
//tags
  List<Tag> tags = new ArrayList<Tag>(); 
```

在包含 googleMap 的活动的 onCreate() 中，我将标记添加到列表中：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

....other code here

    //add the markers to the map
    tags.add(new Tag(map,1,"City Of Dundee", "Home Of The Jakey", DUNDEE, this.getResources(),R.drawable.ic_launcher));
    tags.add(new Tag(map,2,"Some Place","This is some place",LOCATION_Z,this.getResources(),R.drawable.ic_launcher));

....other code here

}//end on create 
```

Tag 类的构造函数：

```
public Tag(GoogleMap map, int atagID,String tagTitle, String tagSnippet, LatLng tagPosition, Resources resource, int id){

    this.tagID = atagID;
    this.position = tagPosition;
    this.title = tagTitle;
    this.snippet = tagSnippet;
    this.icon = BitmapDescriptorFactory.fromResource(id);

    this.theTag = map.addMarker(new MarkerOptions()
            .position(tagPosition)
            .title(tagTitle)
            .snippet(tagSnippet)
            .icon(icon));

} 
```

这将创建标签并正确显示在地图上

在 onMarkerClickedListener 的侦听器中，我将在地图上单击的标记与列表中的标记进行比较，但 if 语句永远不会通过，即使我比较相同的标题也是如此。

聆听者：

```
onMarkerClickListener = new OnMarkerClickListener(){

    @Override
    public boolean onMarkerClick(Marker marker) {
        //for loop that goes over array or marker
            //if marker is equal to mark in array
                //do marker functionality
        for(Tag currentTag : tags){
            if(currentTag.theTag == marker){
                switch(currentTag.tagID){
                    case 1:
                    //do something for that button
                        Toast.makeText(getApplicationContext(), "marker 1", Toast.LENGTH_SHORT).show();
                        return true;
                    case 2:
                        Toast.makeText(getApplicationContext(), "marker 2", Toast.LENGTH_SHORT).show();
                        return false;
                    default:
                        Toast.makeText(getApplicationContext(), "default", Toast.LENGTH_SHORT).show();
                        return false;
                }
            }else{
                Toast.makeText(getApplicationContext(), "theTag " + currentTag.tagID + ": " + currentTag.theTag.getTitle(), Toast.LENGTH_SHORT).show();
                Toast.makeText(getApplicationContext(), "marker: " + marker.getTitle(), Toast.LENGTH_SHORT).show();
            }
        }

        return false;
    }
}; 
```

我不知道为什么它从来没有达到 switch 语句的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:28:08.517

我找到了我正在寻找的文档，不知道我是怎么错过的。

正如我所读到的，您无法使用“==”比较标记，但您可以使用

```
if(markerA.equals(markerB)
{
} 
```

像这样：

```
if(theTag.equals(marker){
    //it will compare properly this way instead of returning false every time
} 
```

参考网站： [https ://developers.google.com/maps/documentation/android/marker](https://developers.google.com/maps/documentation/android/marker)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:43:56.570

您不需要代码中的 for 循环。当您对标记进行相等测试时（使用 ==），它将返回 false，并且永远不会到达您的开关。而是尝试删除 for 循环，只删除我们。

```
 switch(marker.getId()){
                case 1:
                //do something for that button
                    Toast.makeText(getApplicationContext(), "marker 1", Toast.LENGTH_SHORT).show();
                    return true;
                case 2:
                    Toast.makeText(getApplicationContext(), "marker 2", Toast.LENGTH_SHORT).show();
                    return false;
                default:
                    Toast.makeText(getApplicationContext(), "default", Toast.LENGTH_SHORT).show();
                    return false;
            }
        }else{
            Toast.makeText(getApplicationContext(), "theTag " + currentTag.tagID + ": " + currentTag.theTag.getTitle(), Toast.LENGTH_SHORT).show();
            Toast.makeText(getApplicationContext(), "marker: " + marker.getTitle(), Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T21:29:47.167

从所选答案扩展@MaciejGórski 评论我建议使用标记的ID（奇怪的是一个字符串）。

这可以帮助您避免保留对本身具有对象引用的标记的硬引用，从而避免`GoogleMap`整个`MapView`//`MapFragment``SupportMapFragment`

在我的课堂上，我有：

```
private Map< String, MyObject > markersMap = new HashMap< String, MyObject >(); 
```

然后，当我创建标记时，我将它们添加到地图中：

```
markersMap.put( marker.getId(), myObj ); 
```

然后在侦听器中，我可以像这样检索 myObj

```
@Override
public void onInfoWindowClick( Marker m )
{
    Log.v( TAG, "onInfoWindowClick m.getId = " + m.getId() );

    MyObject myObj = markersMap.get( m.getId() );

    Log.v( TAG, "onInfoWindowClick myObj = " + myObj );
} 
```

这样我可以避免泄漏视图/活动/地图等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-27T13:57:48.163

== 运算符将比较两个对象的内存方向（它们不相同，因为是不同的实例）而不是对象属性。equals 方法将比较对象属性的值，或者如果您覆盖 equals，您可以比较您想要的任何内容，这将更适合您。

# paypal - PayPal IPN 和 PDT - 无法在 return_url 页面或电子邮件中获取买家邮政地址

> ID：15747394
> 
> 赞同：0
> 
> 时间：2013-04-01T16:37:28.097
> 
> 标签：paypal, paypal-ipn, eclipse-pdt, donations

我正在建立一个基本的捐赠系统，需要向客户发送确认电子邮件，但无法让买家邮政地址显示在网站的 return_url 页面上，或显示在发送给客户的电子邮件中。纳税人是/否无线电选择的自定义值不会在电子邮件中遵循。我在我们的网站上使用了一个自定义表格，其中包含填写捐款金额、姓名、地址以及他们是否纳税（简单的无线电选择）的字段。不确定我是否正确使用它，但我同时设置了 IPN 和 PDT网站站点和 PayPal 帐户中的设置。

**捐款表格：**

```
<form class="dsForm" name="details" action="https://www.paypal.com/cgi-bin/webscr" method="post" onsubmit="if ( !CheckForm() ) return false;">
       <input type="hidden" name="cmd" value="_donations">
       <input type="hidden" id="business" name="business" value="charityemail@internet.com">
       <input type="hidden" id="item_name" name="item_name" value="Website Donation - Water">
       <input type="hidden" name="notify_url" value="http://www.urltoipnscript.com/ipn.php">
       <input type="hidden" id="item_number" name="item_number" value="3">
       <input type="hidden" name="no_note" value="1">
       <input type="hidden" id="currency_code" name="currency_code" value="GBP">
       <input type="hidden" name="no_shipping" value="2">
       <input type="hidden" name="tax" value="0">
       <input type="hidden" name="bn" value="IC_Sample">
       <input type="hidden" value="donation" name="custom">

       <ul id="donate-form">
        <li><label>Amount:</label>
            <input type="text" id="amount" name="amount" value="25.00" size='9'>
           <select id='currency' onchange='CheckCurrency()'>
                <option value="GBP">GBP</option>
                <option value="EUR">EUR</option>
                <option value="AUD">AUD</option>
                <option value="USD">USD</option>
           </select>
       </li>
        <li><label>Program:</label>
        <select name='program' id='program' onchange='ProgramChange();' >
            <option value=''>Please Select</option>
            <option id="education" value='4'>Education</option>
            <option id="water" value='3' selected="selected">Water</option>
            <option id="health" value='2'>Health Promotion</option>
            <option id="community" value='18'>Community Based Projects</option>
            <option id="sponsorship" value='8'>Child Sponsorship</option>
        </select>
       </li>

        <li><label>Firstname:</label>
        <input type='text' name='first_name' size='30' />
       </li>
        <li><label>Surname:</label>
        <input type='text' name='last_name' size='30' />
       </li>
        <li><label>Address 1:</label>
        <input type='text' name='address1' size='30' />
       </li>
        <li><label>Address 2:</label>
        <input type='text' name='address2' size='30' />
       </li>
        <li><label>Town/City:</label>
        <input type='text' name='city' size='30' />
       </li>
        <li><label>Postcode/Zip:</label>
        <input type='text' name='zip' size='30' />
       </li>
       <li><label>Country:</label>
        <select name='country' id='country'  >
        <option value='' selected='selected'>Please Select</option>
        <option value='AL'>Albania
        </option><option value='DZ'>Algeria
        </option><option value='GB'>United Kingdom
        </option><option value='US'>United States
        etc...
       </li>
       <div id='ukTaxOptions' style='display:none'>
       <label style="width:auto; margin-top:20px; margin-bottom:10px;font-weight: bold;" > Please choose an appropriate option below:</label >
        <li>
        <label style="width:auto" >         
    <input id='gbTaxPayer_1' name='gbTaxPayer_radio' type='radio' value='1'  onchange="SetPayPalCustom('UK')" />
    <input id="gbTaxPayer" name="gbTaxPayer" type="hidden" value="1" /> I am a UK taxpayer and would like to Gift Aid all donations I have made to Fields Of Life in the last four years and all donations I make in the future, until I notify you otherwise *
        </label>
        </li>

        <li><label style="width:auto">
        <input id='gbTaxPayer_' name='gbTaxPayer_radio' type='radio' value=''  checked  onchange="SetPayPalCustom('')" />I am not a UK taxpayer
        </label></li>

        <li><label style="width:auto">* I understand that I must have paid an amount of income tax or capital gains tax at least equal to the tax you reclaim on my donations</label></li>

        </div>
        <input type="hidden" name="hosted_button_id" value="hidden from stackflow">
        <input type="image" src="http://www.hiddenfromsov.com/mybtn.png" border="0" name="submit" alt="PayPal — The safer, easier way to pay online.">

       <li><img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif width="1" height="1" /></li>
       </ul> 
```

**IPN 脚本：**

```
 <?php

    $raw_post_data = file_get_contents('php://input');
    $raw_post_array = explode('&', $raw_post_data);
    $myPost = array();
    foreach ($raw_post_array as $keyval) {
      $keyval = explode ('=', $keyval);
      if (count($keyval) == 2)
         $myPost[$keyval[0]] = urldecode($keyval[1]);
    }
    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';
    if(function_exists('get_magic_quotes_gpc')) {
       $get_magic_quotes_exists = true;
    } 
    foreach ($myPost as $key => $value) {        
       if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
            $value = urlencode(stripslashes($value)); 
       } else {
            $value = urlencode($value);
       }
       $req .= "&$key=$value";
    }

    $ch = curl_init('https://www.paypal.com/cgi-bin/webscr');
    curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

    if( !($res = curl_exec($ch)) ) {
        curl_close($ch);
        exit;
    }
    curl_close($ch);

    if (strcmp ($res, "VERIFIED") == 0) {

        // assign posted variables to local variables
        $item_name = $_POST['item_name'];
        $item_number = $_POST['item_number'];
        $payment_status = $_POST['payment_status'];
        $payment_amount = $_POST['mc_gross'];
        $payment_currency = $_POST['mc_currency'];
        $txn_id = $_POST['txn_id'];
        $receiver_email = $_POST['receiver_email'];
        $payer_email = $_POST['payer_email'];
        $address_street = $_POST['address_street'];
        $address_city = $_POST['address_city'];
        $address_state = $_POST['address_state'];
        $address_zip = $_POST['address_zip'];
        $address_country = $_POST['address_country'];
        $address_status = $_POST['address_status'];
        $gbtax = $_POST['gbTaxPayer_radio'];
    } else if (strcmp ($res, "INVALID") == 0) {
        // log for manual investigation
    } 
```

**成功 return_url 页面上的代码**

```
 //PDT
    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-synch';
    $tx_token = $_GET['tx'];
    $auth_token = "I've copied this the paypal settings";
    $req .= "&tx=$tx_token&at=$auth_token";

    // post back to PayPal system to validate
    $header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
    $fp = fsockopen ('www.paypal.com', 80, $errno, $errstr, 30);
    // $fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

    if (!$fp) {
    // HTTP ERROR
    } else {
    fputs ($fp, $header . $req);
    // read the body data
    $res = '';
    $headerdone = false;
    while (!feof($fp)) {
    $line = fgets ($fp, 1024);
    if (strcmp($line, "\r\n") == 0) {
    // read the header
    $headerdone = true;
    }
    else if ($headerdone)
    {
    // header has been read. now read the contents
    $res .= $line;
     }
    }

    // parse the data
    $lines = explode("\n", $res);
    $keyarray = array();
    if (strcmp ($lines[0], "SUCCESS") == 0) {
    for ($i=1; $i<count($lines);$i++){
    list($key,$val) = explode("=", $lines[$i]);
    $keyarray[urldecode($key)] = urldecode($val);
    }

    // check the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment
    $item_number = $_GET['item_number'];
    $address12 = $_GET['address_street'];
    $firstname = $keyarray['first_name'];
    $lastname = $keyarray['last_name'];
    $payer_email = $keyarray['payer_email'];
    $amount = $keyarray['mc_gross'];
    $payment_date = $keyarray['payment_date'];
    $payment_status = $keyarray['payment_status'];
    $payment_type = $keyarray['payment_type'];
    $mc_currency = $keyarray['mc_currency'];
    $transactionid = $keyarray['txn_id'];
    $itemname = $keyarray['item_name'];
    $address1 = $keyarray['address1'];
    $address_street = $keyarray['address_street'];
    $address_city = $keyarray['address_city'];
    $address_state = $keyarray['address_state'];
    $address_zip = $keyarray['address_zip'];
    $address_country = $keyarray['address_country'];
    $gbtax = $keyarray['gbTaxPayer_radio'];

    echo ("<p><strong>Payment Details</strong></p>\n");
    echo ("<ul>\n");
    echo ("<li><b>Address</b>: $address12</li>\n");
    echo ("<li><b>Item Number</b>: $item_number</li>\n");
    echo ("<li><b>Donation Type</b>: $itemname</li>\n");
    echo ("<li><b>Date</b>: $payment_date</li>\n");
    echo ("<li><b>Name</b>: $firstname $lastname ($payer_email)</li>\n");
    echo ("<li><b>Street Address</b>: $address1</li>\n");
    echo ("<li><b>Town/City</b>: $address_city</li>\n");
    echo ("<li><b>County/State</b>: $address_state</li>\n");
    echo ("<li><b>Postcode/ZIP</b>: $address_zip</li>\n");
    echo ("<li><b>Country</b>: $address_country</li>\n");
    echo ("<li><b>Amount</b>: &pound;$amount</li>\n");
    echo ("<li><b>Payment status</b>: $payment_status</li>\n");
    echo ("<li><b>Transaction ID</b>: $transactionid</li>\n");
    echo ("<li><b>UK Tax Payer?</b> $gbtax</li>\n");
    echo ("</ul>\n");

    // send e-mail
    $today = date("F j, Y, g:i a");
    mail("charityemail@internet.com", "Donation made - $itemname", "A donation was made on $today \n Payment Details \r\n\r\n Donation type: $itemname \r\n\r\n Name: $firstname $lastname \n Amount: $amount \n Donator Email: $payer_email \r\n\r\n Address: $address1 \n $address_city \n $address_state \n $address_zip \n $address_country \r\n\r\n Payment date: $payment_date \n Payment status: $payment_status \n Currency: $mc_currency \n Transaction ID: $transactionid \n UK Tax Payer? $gbtax \n", "From: Charity Donation <charityemail@internet.com>");
    }
    else if (strcmp ($lines[0], "FAIL") == 0) {
    // log for manual investigation
     }
    }
    fclose ($fp); 
```

目前我只需要在电子邮件、return_url 页面和 PayPal 网站上显示的地址（当前显示*Postal Address: Not Specified*。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:01:48.393

你在测试时输入地址吗？尝试传递变量“no_shipping”并将值设置为“2”，看看这是否会有所不同。此外，PayPal 不会传回无效的 PayPal 变量的变量/值，这意味着您将无法制作自己的变量并将它们传递出去。

# c - Run time error in C program in ubuntu. But executed in well SunOS

> ID：15747400
> 
> 赞同：0
> 
> 时间：2013-04-01T16:37:39.337
> 
> 标签：c, gcc, segmentation-fault, sunos

I executed the below C program which prints a the primes below the given N (N < 4294967295). It went fine when executed in SunOS, but I'm getting Segmentation fault (core dumped) when running in Ubuntu(compiled it with gcc compilter). Can anyone please let me know where I went wrong. Mentioned below the compiler versions of SunOS and Ubuntu 12.10

```
cc -V 
```

cc: Sun C 5.9 SunOS_sparc Patch 124867-01 2007/07/12

```
gcc -v 
```

Using built-in specs. COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper Target: x86_64-linux-gnu Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-2ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu Thread model: posix gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1)

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<inttypes.h>

int main()
{
FILE *fpin,*fpout;
char ch[11], file_name[100];
long long int num1=0,i,tmp=0;
long long int *arr;

printf("enter file name:: ");
gets(file_name);

fpin = fopen(file_name,"r");
fpout = fopen("/home/code/output.c","w");

while(1)
{
 fgets(ch,11,fpin);
 if (!feof(fpin))
 {
   num1=atoll(ch);

   arr = prime_number(num1);

   for(i=0;*(arr+i)!='\0';i++)
      {
         fprintf(fpout,"%llu",*(arr+i));
         if(*(arr+i+1) == '\0')
             fputc('.',fpout);
         else
             fputc(',',fpout);
      }

 }
 else 
 {
   fclose(fpin);
   fclose(fpout);
   break;
 }
}

}

prime_number(long long int n)
{
  long long int i,j,total=0,a[200];
  int count=0;

  printf("\n%llu \n",n);

  for (j=2;j<=n;j++)
  {
     count = 0;
     for (i=1;i<=j;i++)
       {`enter code here`
         if ((j%i) == 0)
           count++;

         if (count > 2)
            break;
        }
     if (count==2)
        {
          a[total] = j; 
          total++; 
        }
  } 
return(&a[0]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:53:22.997

在 prime_number 函数结束时，您将返回一个指向在 prime_number 函数本身（堆栈）中定义的变量的指针。因为当函数存在时，它的堆栈内容被有效地蒸发了，所以你返回了一个无效的指针。

当然，根据您正在运行的系统、操作系统等，堆栈的内容可能没有被立即覆盖，并且会在短时间内有效，但这只是运气。

尝试分配返回结果（并与调用者一起释放），或将数组传递给 prime_number 函数。这样，内容将对调用者保持有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:51:42.840

```
return(&a[0]); 
```

您正在返回一个指向局部变量的指针，该变量在您的函数返回后不存在。

如果您运行 gcc 时出现警告，您的编译器应该会告诉您这一点。

# ssh - Identify a file or directory on a SSH machine using net.schmizz.sshj.sftp.SFTPClient api.

> ID：15747402
> 
> 赞同：0
> 
> 时间：2013-04-01T16:37:58.457
> 
> 标签：ssh

I want to identify whether a the given path is a valid path for file or directory using net.schmizz.sshj.sftp.SFTPClient api and based on i need to take decision that if it is a valid file path then i need to access its parent directory. my code looks like below> SSHClient ssh = new SSHClient(); String rsaKey = "e3:27:12:a9:62:9a:46:cc:98:ee:0d:b7:38:72:a0:63"; String host = "10.235.1.154"; String uName = "root"; String pwd = "pspl@123"; String url = "/root/ram2.log/"; String testUrl = host + url; ssh.addHostKeyVerifier(rsaKey); List fileItems = new ArrayList();

```
 1.try {
    2\.  ssh.connect(host);
    3\.  ssh.authPassword(uName,pwd);
    4\.  SFTPClient sftp = ssh.newSFTPClient();
    5\.  
    6\.  if(testUrl.startsWith(host)){
    7\.      String[] splitedStrings = testUrl.split(host);
    8\.      String str = splitedStrings[1];
    9\.      url = str;
    10\. }else{
    11\.     url = url;
    12\. }
    13\. 
    14.
    15\. List<RemoteResourceInfo> fileInfoList = sftp.ls(url, new RemoteResourceFilter() {
    16\.     public boolean accept(RemoteResourceInfo rrInfo) {
    17\.         return rrInfo.getName().charAt(0) != '.';
    18\.     }
    19\. });
    20\. 
    21\. 
    22\. for (RemoteResourceInfo fileInfo : fileInfoList) {
    23\.     //files.add(str + "/" + fileInfo.getName());
    24\.     String fileName = fileInfo.getName();
    25\.     if (fileInfo.isDirectory()) {
                FileItem childFileItem = new FileItem();
                childFileItem.setPath(host + url + fileName);
                fileItems.add(childFileItem);
            } else {
                int dotIndex = fileName.lastIndexOf('.');
                String ext = dotIndex > 0 ? fileName
                        .substring(dotIndex + 1) : "";
                FileItem childFileItem = new FileItem();
                childFileItem.setPath(host + url + fileName);
                childFileItem.setDirectory(false);
                fileItems.add(childFileItem);
            }
        }

    } catch (IOException e) {
        System.out.println("Couldn't resolve host : {} "+ host);
    }
    return fileItems; 
```

Problem: Line no. 15 is throwing error saying no such file if I m giving the path as "/root/ram2.log/" even though the file ram2.log does exis on server.

Any help on this wud be graet helpful.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T17:11:43.463

您可以使用`lstat`来获取有关文件系统对象的信息。

```
FileAttributes attributes = sftp.lstat(url);
if (attributes.getType() == FileMode.Type.DIRECTORY) {
    ...
} 
```

但我认为您的实际问题是目录“/root/ram2.log/”有些奇怪。也许没有权限，也许它对您不可见，也许它包含一个名称未正确编码的文件。

# c - 使用莫尔斯电码读取 .txt 文件并从树中查找字母？

> ID：15747407
> 
> 赞同：0
> 
> 时间：2013-04-01T16:38:10.310
> 
> 标签：c, tree, morse-code

' 我需要能够创建一个字母树。`'.'`然后用,`'-'`和.打开一个示例 .txt 文件`'/'` `'//'`。`'.'`转到树的左侧，或者在这种情况下是 rist 字母。'-'向右破折号。 [http://www.skaut.ee/?jutt=10201](http://www.skaut.ee/?jutt=10201) - 树长什么样。'

```
#include <stdio.h>
#include<stdlib.h>
#include<string.h>

struct MorsePuu {
       char t2ht; 
       struct MorsePuu *punkt, *kriips, *next;
};

static int i;    
char TAHED[32]={' ','E','I','S','H','V','U','F','Ü','A','R','L','Ä','W','P','J','T','N','D','B','X','K','C','Y','M','G','Z','Q','O','Ö','™'};
//creating the "alphabet-tree"
struct MorsePuu *Ehitamine(int N) {
   struct MorsePuu *uus;
   int nl, nr;
   if (N==0) {return NULL;}
   else {
        nl = N / 2;
        nr = N-nl-1;
        uus = malloc(sizeof *uus);
        uus->t2ht = TAHED[i];
        i++;
        uus->punkt = NULL;
        uus->kriips = NULL;
        uus->punkt = Ehitamine(nl);
        uus->kriips = Ehitamine(nr);
        return uus;
        }
 }
 //creating the order of the tree.
  Preorder(struct MorsePuu *JViit) {
    printf("%c",JViit->t2ht);
    if (JViit->punkt != NULL) {
       Preorder(JViit->punkt);}
//      printf("%c",JViit->t2ht); Siin oleks Inorderi väljatrükk
    if (JViit->kriips != NULL) {
       Preorder(JViit->kriips);}
//      printf("%c",JViit->t2ht);  Ja siin oleks Postorderi väljatrükk
 }

main(void) {
    struct MorsePuu *morse, *abi;    
    char rida[128];
    FILE *fm=NULL;

    printf("Käigepealt tuleb morsepuu ?les ehitada!");
    i = 0;
    morse=Ehitamine(31);
    printf("Puu väljatrükk preorder järjekorras.\n");
    Preorder(morse);
    printf("%c",morse);

    //opening the file . Contents e.g .-/.// return ie. // stops it.
    fm = fopen("morse1.txt", "r");

    fgets(rida, 128, fm);
    printf("\n %s", rida);    

    fclose(fm);
    //this is where the reading and changing loop crashers.
    /*  
    for(i=0; i<strlen(rida); i++){
       if(rida[i]=='/'){

      }
       if(rida[i] == '.'){
          //printf();
          abi=abi->punkt;     
       }
       if(rida[i]== '-'){
          abi=abi->kriips;          
         }
      }
  */ 
  } 
```

问题从最后一个循环开始。字母树已创建，但我无法从树中搜索字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:43:11.613

你没有为`*abi`这里分配任何内存

```
main(void) {
struct MorsePuu *morse, *abi;    
char rida[128];
FILE *fm=NULL; 
```

Abi 是一个指向 struct MorsePuu 的指针，它指向一个随机位置，当您稍后使用它时，您会在 line 处导致未定义的行为`abi=abi->punkt`。

您必须添加一行

```
abi = malloc( sizeof( struct MorsePuu )) ; 
```

# django - 生产环境中用于 django 的 Amazon S3

> ID：15747408
> 
> 赞同：1
> 
> 时间：2013-04-01T16:38:11.517
> 
> 标签：django, django-storage

我正在使用 django-s3-folder-storage 来存储我的静态和媒体文件。我遵循了文档中提到的所有说明，但仍然无法提供我的静态文件。我可以为我的用户上传的文件提供服务，但是即使在运行 collectstatic 命令后静态文件也不会显示在网站上，该命令将文件复制到存储桶中。我没有在我的域中创建任何 CNAME 记录（不确定这是否有任何区别，因为我能够看到用户上传的图像）。

我的设置文件：

```
DEFAULT_FILE_STORAGE = 's3_folder_storage.s3.DefaultStorage'
DEFAULT_S3_PATH = "media"
STATICFILES_STORAGE = 's3_folder_storage.s3.StaticStorage'
STATIC_S3_PATH = "static"
AWS_ACCESS_KEY_ID = # omitted
AWS_SECRET_ACCESS_KEY = # omitted
AWS_STORAGE_BUCKET_NAME = # omitted

MEDIA_ROOT = '/%s/' % DEFAULT_S3_PATH
MEDIA_URL = '//s3.amazonaws.com/%s/media/' % AWS_STORAGE_BUCKET_NAME
STATIC_ROOT = "/%s/" % STATIC_S3_PATH
STATIC_URL = '//s3.amazonaws.com/%s/static/' % AWS_STORAGE_BUCKET_NAME
ADMIN_MEDIA_PREFIX = STATIC_URL + 'admin/'

STATICFILES_DIRS = (
       root('static'),
) 
```

还有我的项目目录：

```
website_name
    static
    website_name
      settings.py 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:11:24.063

我已将 STATIC_URL 更改为如下所示，现在工作正常。

STATIC_URL = '//bucketname.s3.amazonaws.com/static/'

但是 MEDIA_URL 就像文档本身中提到的那样，MEDIA_URL 工作正常。只有 STATIC_URL 需要修改。

看起来文档是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T19:53:42.023

通常 S3 可以使用子域或子文件夹路径格式。此特定存储使用的默认值`django-storages`是子域。所以有趣的是，更改为子文件夹解决了这个问题。[OP 在另一个问题](https://stackoverflow.com/questions/15747933/amazon-s3-problems-with-s3fox)中提到了使用欧洲区域，我怀疑这里的根本问题与正在使用的端点或 S3/S3BotoStorage 的影响区域的配置设置之一有关（例如`AWS_CALLING_FORMAT`）。

# c# - 如何将字典从 Javascript 传递到 C# 运行时组件？

> ID：15747410
> 
> 赞同：3
> 
> 时间：2013-04-01T16:38:26.363
> 
> 标签：c#, collections, windows-runtime, windows-store-apps, winjs

我创建了一个 C# Windows 运行时组件，它有一个接受 IDictionary 参数的公共静态方法。

```
public sealed class DictionaryTest
{
    public static void print(IDictionary<string, string> dict)
    {
    }
} 
```

我正在从 WinJS 应用程序访问该库，并在 default.js 中调用此方法，如下所示：

```
var ps = new Windows.Foundation.Collections.PropertySet();
ps['testkey'] = "testvalue";
TestComponent.DictionaryTest.print(ps); 
```

当我运行应用程序时，我收到“不支持此类接口”错误。print() 的智能感知显示它接受 Windows.Foundation.Collections.IMap 的参数，但我找不到该集合。

如何将字典之类的对象从 Javascript 传递给 print(IDictionary)？

编辑：虽然@IAbstract 提出了一个很好的观点，但我不能将其用作解决方案。我的限制是我不能修改 print() 方法。所以我需要能够将字符串的字典类型对象从 javascript 传递给`print(IDictionary<string, string> dict)`方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:23:09.553

Windows.Foundation.Collections.PropertySet 声明如下：

```
public sealed class PropertySet : Object,
    IPropertySet,
    IObservableMap<String, Object>,
    IDictionary<String, Object>,
    IEnumerable<KeyValuePair> 
```

将值对象转换为字符串。你不能总是`Object.ToString()`隐含地依赖。

# matlab - 如何将 Matlab 类编译成 C lib？

> ID：15747411
> 
> 赞同：4
> 
> 时间：2013-04-01T16:38:28.613
> 
> 标签：matlab, matlab-deployment, matlab-compiler

这个问题的起源来自这里[How to use "global static" variable in matlab function called in c](https://stackoverflow.com/questions/15714825/how-to-use-global-static-variable-in-matlab-function-called-in-c)。

我正在尝试将“全局变量”封装到一个对象中。但是我不知道如何使用 [MATLAB Compiler (mcc)将 matlab 类导出到 c++](http://www.mathworks.com/help/compiler/shared-libraries.html)

为此，我只是尝试了标准命令

### Matlab 命令

```
mcc -W cpplib:Vowel4 -T link:lib Vowel4.m 
```

### Matlab 脚本

```
classdef Vowel4

  properties
    x
    y
  end

  methods
    Vowel4
    A
    B
  end

end 
```

生成的库实际上是独立的函数而不是 c++ 类。

如何将 Matlab 中的类编译成 c++ 类？

我一直在寻找答案，但没有找到。

显然 matlab 命令不适合这种场景。但是我找不到任何关于将 Matlab 类构建到 c++ 类中的信息。

===========================编辑======================= =

实际cpp代码如下：@Alan

```
mclInitializeApplication(NULL, 0);
loadDataInitialize();
soundByCoefInitialize();
loadData(); 

mwArray F(4, 1, mxDOUBLE_CLASS);
float test[4];

for ( ;; ){
    const Frame frame = controller.frame();
    const FingerList fingers = frame.fingers();
    if ( !fingers.empty() ){
        for ( int i = 0; i < 4; i ++ ){
            double v = fingers.count() > i ? (fingers[i].tipPosition().y / 50) - 2 : 0;
            F(i+1,1) = v;
            test[i] = v;
            cout << v << ' ';
        }
        cout << endl;
        soundByCoef(F);
    }
} 
```

这里的 matlabA() 对应于 loadData()，它加载数据，soundByCoef(F) 对应于 matlabB()，它在主循环中完成工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T22:51:34.033

正如 Alan 所指出的，[我](https://stackoverflow.com/a/15718438/97160)只是建议使用句柄类作为全局变量的容器（这样做的好处是可以通过引用传递这样的对象）。创建的对象不打算由您的 C++ 代码直接操作（它将存储在通用`mxArray/mwArray`C/C++ 结构中）。

[据](http://www.mathworks.com/support/solutions/en/data/1-30EZVF/)[我所知](http://www.mathworks.com/matlabcentral/newsreader/view_thread/246759)，在使用 MATLAB 编译器构建共享库时，您不能直接将 classdef 样式的 MATLAB 类编译为适当的 C++ 类。它只支持构建常规功能。您可以为 MATLAB 类成员方法创建功能接口，但那是另一回事......

也许一个完整的例子将有助于说明我的想法。首先让我们在 MATLAB 端定义代码：

### 全球数据.m

这是用于存储全局变量的句柄类。

```
classdef GlobalData < handle
    %GLOBALDATA  Handle class to encapsulate all global state data.
    %
    % Note that we are not taking advantage of any object-oriented programming
    % concept in this code. This class acts only as a container for publicly
    % accessible properties for the otherwise global variables.
    %
    % To manipulate these globals from C++, you should create the class API
    % as normal MATLAB functions to be compiled and exposed as regular C
    % functions by the shared library.
    % For example: create(), get(), set(), ...
    %
    % The reason we use a handle-class instead of regular variables/structs
    % is that handle-class objects get passed by reference.
    %

    properties
        val
    end
end 
```

### create_globals.m

作为上述类的构造函数的包装函数

```
function globals = create_globals()
    %CREATE_GLOBALS  Instantiate and return global state

    globals = GlobalData();
    globals.val = 2;
end 
```

### fcn_add.m, fcn_times.m

将作为 C++ 函数公开的 MATLAB 函数

```
function out = fcn_add(globals, in)
    % receives array, and return "input+val" (where val is global)

    out = in + globals.val;
end

function out = fcn_times(globals, in)
    % receives array, and return "input*val" (where val is global)

    out = in .* globals.val;
end 
```

将上述文件存储在当前目录中，让我们使用 MATLAB 编译器构建 C++ 共享库：

```
>> mkdir out
>> mcc -W cpplib:libfoo -T link:lib -N -v -d ./out create_globals.m fcn_add.m fcn_times.m 
```

您应该期待以下生成的文件（我在 Windows 机器上）：

```
./out/libfoo.h
./out/libfoo.dll
./out/libfoo.lib 
```

接下来，我们可以创建一个示例 C++ 程序来测试该库：

### 主文件

```
// Sample program that calls a C++ shared library created using
// the MATLAB Compiler.

#include <iostream>
using namespace std;

// include library header generated by MATLAB Compiler
#include "libfoo.h"

int run_main(int argc, char **argv)
{
    // initialize MCR
    if (!mclInitializeApplication(NULL,0)) {
        cerr << "Failed to init MCR" << endl;
        return -1;
    }

    // initialize our library
    if( !libfooInitialize() ) {
        cerr << "Failed to init library" << endl;
        return -1;
    }

    try {
        // create global variables
        mwArray globals;
        create_globals(1, globals);

        // create input array
        double data[] = {1,2,3,4,5,6,7,8,9};
        mwArray in(3, 3, mxDOUBLE_CLASS, mxREAL);
        in.SetData(data, 9);

        // create output array, and call library functions
        mwArray out;
        fcn_add(1, out, globals, in);
        cout << "Added matrix:\n" << out << endl;
        fcn_times(1, out, globals, in);
        cout << "Multiplied matrix:\n" << out << endl;
    } catch (const mwException& e) {
        cerr << e.what() << endl;
        return -1;
    } catch (...) {
        cerr << "Unexpected error thrown" << endl;
        return -1;
    }

    // destruct our library
    libfooTerminate();

    // shutdown MCR
    mclTerminateApplication();

    return 0;
}

int main()
{
    mclmcrInitialize();
    return mclRunMain((mclMainFcnType)run_main, 0, NULL);
} 
```

让我们构建独立程序：

```
>> mbuild -I./out main.cpp ./out/libfoo.lib -outdir ./out 
```

最后运行可执行文件：

```
>> cd out
>> !main
Added matrix: 
     3     6     9 
     4     7    10 
     5     8    11 
Multiplied matrix: 
     2     8    14 
     4    10    16 
     6    12    18 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:02:13.233

继上一篇文章中的线程[之后](https://stackoverflow.com/questions/15714825/how-to-use-global-static-variable-in-matlab-function-called-in-c)，建议不要将您的函数包装在一个类中，而是使用一个类来传递编译后您无法使用的全局变量。

```
classdef Foo < handle
  properties
    value
  end

  methods
    function obj = Foo(value)
      obj.value = value;
    end
  end
end 
```

注意：类 Foo 扩展`handle`类以使其通过引用传递，而不是通过值传递。请参阅：[句柄和值类之间的比较](http://www.mathworks.co.uk/help/matlab/matlab_oop/comparing-handle-and-value-classes.html)。

```
function foo = matlabA()
  foo = new Foo(1);
end

function matlabB(foo)
  foo.value
end 
```

据我所知，matlab 编译器不会像这样编译代码，而是[将其与 MATLAB 组件运行时的副本一起打包，](http://blogs.mathworks.com/loren/2008/06/19/writing-deployable-code/)并编写一些包装函数来处理从 c/c++ 对代码调用所述运行时。

我建议避免过多地在 matlab 和 c/c++ 之间来回跳跃；转换数据类型和调用 MCR 肯定会有一些开销。我真正使用它的只是将一个复杂但自包含的 matlab 脚本（即：不需要在所述脚本的中途与 c/c++ 代码交互）作为一个函数，或者打包代码以部署到环境没有完整的matlab副本。

**作为一个有趣的附注：如果您在 Matlab 中调用 C++**，并且 C++ 代码需要访问全局变量，事情就容易多了。您可以通过将 C++ 代码包装到[mexFunction 中](http://www.mathworks.co.uk/help/matlab/apiref/mexfunction.html)并对其进行编译来简单地做到这一点。在您需要访问 Matlab 工作区中的变量的地方，您可以使用[mexGetVariablePtr](http://www.mathworks.co.uk/help/matlab/apiref/mexgetvariableptr.html)执行此操作，它将返回指向数据的只读指针。您正在访问的变量可以在全局工作区中，也可以在调用 mexFunction 的函数中。

使用这种方法，我建议对您在 C++ 和 Matlab 代码中获得的变量进行自由注释，因为从 Matlab 方面来看，它们之间的联系可能并不明显；您不希望有人稍后出现，编辑脚本并想知道它为什么会损坏。

**在这种情况下，C++ 端似乎不需要访问数据**，因此您可以重构它，让 matlab 通过将“获取手指的当前位置”代码包装到 mexFunction 中来进行调用，然后让 matlab 执行环形：

```
data = loadData();
while(~stop) {
  position = getFingerPositionMex();
  soundByCoef(position, data);
} 
```

假设您不修改`soundByCoef`Matlab 中的数据将使用按引用传递，因此不会复制大型数据集。

# jquery - 主题和色板之间的区别

> ID：15747420
> 
> 赞同：3
> 
> 时间：2013-04-01T16:39:02.970
> 
> 标签：jquery, jquery-mobile, markup, jquery-mobile-themeroller

在 jQuery Mobile 中，有主题和色板。两者听起来一样。这两者有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T17:39:04.170

# 主题定义

在 jQuery Mobile 中，“主题”是跨界面应用的统一视觉设计。实际上，主题指定了从字体到阴影到颜色的所有内容。

# 色板定义

为了与将布局与颜色和纹理分开的想法保持一致，一个 jQuery Mobile 主题可以有多个“色板”。色板是一个统一的颜色概念，用于控制背景、文本、阴影、图像等的颜色。

默认的 jQuery Mobile 主题包括五个色板（称为 a、b、c、d 和 e）。每个样本提供不同的视觉强调，样本 a 是最强调视觉的（通常是黑色背景上的白色文本），样本 d 更柔和。样本 e 是“错误”样本。

在大多数情况下，jQuery Mobile 默认使用色板 c，但使用 data-theme 属性很容易指定不同的色板。data-theme 属性可以应用于任何增强的元素，并将通过子元素向下级联。

# 例子

您可以在此工作示例中看到差异：http: [//jsfiddle.net/Gajotres/VbPRx/](http://jsfiddle.net/Gajotres/VbPRx/)

# 源示例

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <section id="swatch-default" data-role="page">
      <header data-role="header"><h1>jQuery Mobile</h1></header>
      <div class="content" data-role="content">
        <h3>Default Swatch</h3><br>
        <ul data-role="listview">
            <li><a href="#swatch-a">View swatch a</a></li>
            <li><a href="#swatch-b">View swatch b</a></li>
            <li><a href="#swatch-c">View swatch c</a></li>
            <li><a href="#swatch-d">View swatch d</a></li>
            <li><a href="#swatch-e">View swatch e</a></li>
        </ul><br>
        <p>Some sample form elements and buttons:</p>
        <form  action="formprocessor.php" method="post">
          <div data-role="fieldcontain">
            <label for="select-restaurants">Select Your Restaurants:</label>
            <select id="select-restaurants"
                    name="select-restaurants"
                    data-native-menu="false"
                    multiple="multiple">
              <option value="choose" data-placeholder="true">Choose...</option>
              <optgroup label="French">
                <option value="lecentral">Le Central</option>
                <option value="bistrovandome">Bistro Vandome</option>
                <option value="antoines">Antoine's</option>
              </optgroup>
              <optgroup label="Cajun">
                <option value="bayoubobs">Bayou Bob's</option>
                <option value="pappadeaux" disabled="disabled">Pappadeaux</option>
                <option value="luciles">Lucile's</option>
              </optgroup>
            </select>
          </div>
        </form>
        <div data-role="controlgroup" data-type="horizontal">
          <a href="#" data-role="button">Yes</a>
          <a href="#" data-role="button">No</a>
          <a href="#" data-role="button">Cancel</a>
        </div>
      </div>
      </div>
      <footer data-role="footer"></footer>
    </section>

    <section id="swatch-a" data-role="page" data-theme="a">
      <header data-role="header"><h1>jQuery Mobile</h1></header>
      <div class="content" data-role="content">
        <h3>Swatch A</h3><br>
        <ul data-role="listview">
            <li><a href="#swatch-default">View default swatch</a></li>
            <li><a href="#swatch-b">View swatch b</a></li>
            <li><a href="#swatch-c">View swatch c</a></li>
            <li><a href="#swatch-d">View swatch d</a></li>
            <li><a href="#swatch-e">View swatch e</a></li>
        </ul><br>
        <p>Some sample form elements and buttons:</p>
        <form  action="formprocessor.php" method="post">
          <div data-role="fieldcontain">
            <label for="select-restaurants">Select Your Restaurants:</label>
            <select id="select-restaurants"
                    name="select-restaurants"
                    data-native-menu="false"
                    multiple="multiple">
              <option value="choose" data-placeholder="true">Choose...</option>
              <optgroup label="French">
                <option value="lecentral">Le Central</option>
                <option value="bistrovandome">Bistro Vandome</option>
                <option value="antoines">Antoine's</option>
              </optgroup>
              <optgroup label="Cajun">
                <option value="bayoubobs">Bayou Bob's</option>
                <option value="pappadeaux" disabled="disabled">Pappadeaux</option>
                <option value="luciles">Lucile's</option>
              </optgroup>
            </select>
          </div>
        </form>
        <div data-role="controlgroup" data-type="horizontal">
          <a href="#" data-role="button">Yes</a>
          <a href="#" data-role="button">No</a>
          <a href="#" data-role="button">Cancel</a>
        </div>
      </div>
      </div>
      <footer data-role="footer"></footer>
    </section>

    <section id="swatch-b" data-role="page" data-theme="b">
      <header data-role="header"><h1>jQuery Mobile</h1></header>
      <div class="content" data-role="content">
        <h3>Swatch B</h3><br>
        <ul data-role="listview">
            <li><a href="#swatch-default">View default swatch</a></li>
            <li><a href="#swatch-a">View swatch a</a></li>
            <li><a href="#swatch-c">View swatch c</a></li>
            <li><a href="#swatch-d">View swatch d</a></li>
            <li><a href="#swatch-e">View swatch e</a></li>
        </ul><br>
        <p>Some sample form elements and buttons:</p>
        <form  action="formprocessor.php" method="post">
          <div data-role="fieldcontain">
            <label for="select-restaurants">Select Your Restaurants:</label>
            <select id="select-restaurants"
                    name="select-restaurants"
                    data-native-menu="false"
                    multiple="multiple">
              <option value="choose" data-placeholder="true">Choose...</option>
              <optgroup label="French">
                <option value="lecentral">Le Central</option>
                <option value="bistrovandome">Bistro Vandome</option>
                <option value="antoines">Antoine's</option>
              </optgroup>
              <optgroup label="Cajun">
                <option value="bayoubobs">Bayou Bob's</option>
                <option value="pappadeaux" disabled="disabled">Pappadeaux</option>
                <option value="luciles">Lucile's</option>
              </optgroup>
            </select>
          </div>
        </form>
        <div data-role="controlgroup" data-type="horizontal">
          <a href="#" data-role="button">Yes</a>
          <a href="#" data-role="button">No</a>
          <a href="#" data-role="button">Cancel</a>
        </div>
      </div>
      </div>
      <footer data-role="footer"></footer>
    </section>

    <section id="swatch-c" data-role="page" data-theme="c">
      <header data-role="header"><h1>jQuery Mobile</h1></header>
      <div class="content" data-role="content">
        <h3>Swatch C</h3><br>
        <ul data-role="listview">
            <li><a href="#swatch-default">View default swatch</a></li>
            <li><a href="#swatch-a">View swatch a</a></li>
            <li><a href="#swatch-b">View swatch b</a></li>
            <li><a href="#swatch-d">View swatch d</a></li>
            <li><a href="#swatch-e">View swatch e</a></li>
        </ul><br>
        <p>Some sample form elements and buttons:</p>
        <form  action="formprocessor.php" method="post">
          <div data-role="fieldcontain">
            <label for="select-restaurants">Select Your Restaurants:</label>
            <select id="select-restaurants"
                    name="select-restaurants"
                    data-native-menu="false"
                    multiple="multiple">
              <option value="choose" data-placeholder="true">Choose...</option>
              <optgroup label="French">
                <option value="lecentral">Le Central</option>
                <option value="bistrovandome">Bistro Vandome</option>
                <option value="antoines">Antoine's</option>
              </optgroup>
              <optgroup label="Cajun">
                <option value="bayoubobs">Bayou Bob's</option>
                <option value="pappadeaux" disabled="disabled">Pappadeaux</option>
                <option value="luciles">Lucile's</option>
              </optgroup>
            </select>
          </div>
        </form>
        <div data-role="controlgroup" data-type="horizontal">
          <a href="#" data-role="button">Yes</a>
          <a href="#" data-role="button">No</a>
          <a href="#" data-role="button">Cancel</a>
        </div>
      </div>
      </div>
      <footer data-role="footer"></footer>
    </section>

    <section id="swatch-d" data-role="page" data-theme="d">
      <header data-role="header"><h1>jQuery Mobile</h1></header>
      <div class="content" data-role="content">
        <h3>Swatch D</h3><br>
        <ul data-role="listview">
            <li><a href="#swatch-default">View default swatch</a></li>
            <li><a href="#swatch-a">View swatch a</a></li>
            <li><a href="#swatch-b">View swatch b</a></li>
            <li><a href="#swatch-c">View swatch c</a></li>
            <li><a href="#swatch-e">View swatch e</a></li>
        </ul><br>
        <p>Some sample form elements and buttons:</p>
        <form  action="formprocessor.php" method="post">
          <div data-role="fieldcontain">
            <label for="select-restaurants">Select Your Restaurants:</label>
            <select id="select-restaurants"
                    name="select-restaurants"
                    data-native-menu="false"
                    multiple="multiple">
              <option value="choose" data-placeholder="true">Choose...</option>
              <optgroup label="French">
                <option value="lecentral">Le Central</option>
                <option value="bistrovandome">Bistro Vandome</option>
                <option value="antoines">Antoine's</option>
              </optgroup>
              <optgroup label="Cajun">
                <option value="bayoubobs">Bayou Bob's</option>
                <option value="pappadeaux" disabled="disabled">Pappadeaux</option>
                <option value="luciles">Lucile's</option>
              </optgroup>
            </select>
          </div>
        </form>
        <div data-role="controlgroup" data-type="horizontal">
          <a href="#" data-role="button">Yes</a>
          <a href="#" data-role="button">No</a>
          <a href="#" data-role="button">Cancel</a>
        </div>
      </div>
      </div>
      <footer data-role="footer"></footer>
    </section>

    <section id="swatch-e" data-role="page" data-theme="e">
      <header data-role="header"><h1>jQuery Mobile</h1></header>
      <div class="content" data-role="content">
        <h3>Swatch E</h3><br>
        <ul data-role="listview">
            <li><a href="#swatch-default">View default swatch</a></li>
            <li><a href="#swatch-a">View swatch a</a></li>
            <li><a href="#swatch-b">View swatch b</a></li>
            <li><a href="#swatch-c">View swatch c</a></li>
            <li><a href="#swatch-d">View swatch d</a></li>
        </ul><br>
        <p>Some sample form elements and buttons:</p>
        <form  action="formprocessor.php" method="post">
          <div data-role="fieldcontain">
            <label for="select-restaurants">Select Your Restaurants:</label>
            <select id="select-restaurants"
                    name="select-restaurants"
                    data-native-menu="false"
                    multiple="multiple">
              <option value="choose" data-placeholder="true">Choose...</option>
              <optgroup label="French">
                <option value="lecentral">Le Central</option>
                <option value="bistrovandome">Bistro Vandome</option>
                <option value="antoines">Antoine's</option>
              </optgroup>
              <optgroup label="Cajun">
                <option value="bayoubobs">Bayou Bob's</option>
                <option value="pappadeaux" disabled="disabled">Pappadeaux</option>
                <option value="luciles">Lucile's</option>
              </optgroup>
            </select>
          </div>
        </form>
        <div data-role="controlgroup" data-type="horizontal">
          <a href="#" data-role="button">Yes</a>
          <a href="#" data-role="button">No</a>
          <a href="#" data-role="button">Cancel</a>
        </div>
      </div>
      </div>
      <footer data-role="footer"></footer>
    </section>   
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:53:59.057

这应该有助于：

*   [http://jquerymobile.com/demos/1.2.1/docs/api/themes.html](http://jquerymobile.com/demos/1.2.1/docs/api/themes.html)

> 主题系统将颜色和纹理与定义填充和尺寸等内容的结构样式分开。这允许在样式表中定义一次主题颜色和纹理，然后进行混合、匹配和组合以实现广泛的视觉效果。

和

> 主题包括多种颜色“色板”

# ios - iOS HTML5 视频播放器如何检测文件类型？

> ID：15747422
> 
> 赞同：0
> 
> 时间：2013-04-01T16:39:15.927
> 
> 标签：ios, html, video, playback

现在我正在我的网站上实现视频播放，对于移动设备，我使用 HTML 5 视频播放器：

```
<video src="/get_video.php/myfile.mov" controls width="400" height="250"></video> 
```

在`src`属性中存储 url 到`php`输出视频文件内容的文件。我不知道文件的 MIME 类型（它是动态的）所以我发送内容类型标题 - `application/octet-stream`。

我的 iPhone 无法播放此视频：[截图](http://s3.micp.ru/JS8sb.jpg)

所以问题：如何强制播放器播放视频？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:40:01.190

首先，我建议阅读有关视频标签的这些资源：

*   [http://www.w3schools.com/tags/tag_video.asp](http://www.w3schools.com/tags/tag_video.asp)
*   [http://www.w3schools.com/tags/att_video_src.asp](http://www.w3schools.com/tags/att_video_src.asp)
*   [https://developer.mozilla.org/en-US/docs/HTML/Element/video](https://developer.mozilla.org/en-US/docs/HTML/Element/video)

据我了解，您必须在 MIME 类型中指定一个真实的视频类型（vs `application/octet-stream`）。您提到它是动态的，但是在服务器端您知道您正在读取哪个文件（因此，您可以找出文件格式）。

支持的类型有：

*   `video/mp4`
*   `video/webm`
*   `video/ogg`

# oracle - 在 Oracle 中丢失索引表

> ID：15747423
> 
> 赞同：0
> 
> 时间：2013-04-01T16:39:22.273
> 
> 标签：oracle, indexing

我有一个带有 char(20) 数据类型列的表，我为此列编制了索引。当我这样做时：

```
select * from ex_table where charColumn = 'abc' 
```

引发异常 No_Data_Found。因为数据是 'abc'。我如何在不丢失索引的情况下进行这样的搜索？感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:03:10.750

`CHAR`使用数据类型很少是一个好主意。你几乎总是想用 a`VARCHAR2`代替。A`CHAR(20)`总是存储 20 字节的数据。如果没有足够的数据，该`CHAR`列将在字符串的右侧附加额外的 17 个空格字符，以将其填充到所需的 20 个字节。

话虽如此，如果您确实按照您所说的去做，那么无论数据类型如何，您都会正确地恢复行。

```
SQL> create table foo( col1 char(20), col2 varchar2(20) );

Table created.

SQL> insert into foo values( 'abc','abc' );

1 row created.

SQL> select * from foo where col1 = 'abc';

COL1                 COL2
-------------------- --------------------
abc                  abc

SQL> select * from foo where col2 = 'abc';

COL1                 COL2
-------------------- --------------------
abc                  abc 
```

但是，我怀疑您真正在做的是尝试将`CHAR(20)`列中的数据与`VARCHAR2`局部变量中的数据进行比较。如果是这种情况，那么 Oracle 使用`VARCHAR2` [比较语义](http://docs.oracle.com/cd/E11882_01/server.112/e17118/sql_elements002.htm#sthref312)，并且列末尾的额外 17 个空格字符`CHAR(20)`会导致匹配失败

```
SQL> declare
  2    l_str varchar2(20) := 'abc';
  3    l_row foo%rowtype;
  4  begin
  5    select *
  6      into l_row
  7      from foo
  8     where col1 = l_str;
  9    dbms_output.put_line( l_row.col1 );
 10  end;
 11  /
declare
*
ERROR at line 1:
ORA-01403: no data found
ORA-06512: at line 5 
```

您可以将列中的数据与`CHAR(20)`局部变量中的数据进行比较（在实际代码中，您希望使用锚定类型`foo.col1%type`而不是硬编码长度，我只是使用硬编码类型来强调)

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_str char(20) := 'abc';
       -- In real code, this would be
       -- l_str foo.col1%type := 'abc';
  3    l_row foo%rowtype;
  4  begin
  5    select *
  6      into l_row
  7      from foo
  8     where col1 = l_str;
  9    dbms_output.put_line( l_row.col1 );
 10* end;
SQL> /
abc

PL/SQL procedure successfully completed. 
```

或者你可以拉出合适`RPAD`的`VARCHAR2`长度

```
SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_str varchar2(20) := 'abc';
  3    l_row foo%rowtype;
  4  begin
  5    select *
  6      into l_row
  7      from foo
  8     where col1 = RPAD(l_str,20);
  9    dbms_output.put_line( l_row.col1 );
 10* end;
SQL> /
abc

PL/SQL procedure successfully completed. 
```

但是，正确的答案几乎总是避免使用`CHAR`数据类型。

# php - 缓慢的初始网站加载，更快的后续加载

> ID：15747429
> 
> 赞同：0
> 
> 时间：2013-04-01T16:39:38.793
> 
> 标签：php, mysql, wordpress, apc, plesk

我的网站 www.slople.com 混合了自编程的东西（整个坡度查找器等和移动网站）和 Wordpress/Buddypress 的东西（Slople Unity、博客）。

我注意到在第一个请求上加载页面需要更长的时间，无论它在哪里（起始页、特定坡度、博客）都比后续页面加载要长。

该站点在我的“自己的”VPS 上运行，带有 CentOS 和 Plesk 11。我使用 APC、nginx、Apache、MySql 和 PHP 5.1

我想你们中的一些人可能知道我必须调查的地方或可能是什么原因。我一直认为这可能取决于我的 DNS（我使用 plesk 运行我自己的 DNS 服务）。

机器足够强大，从不使用超过 1/3 的 RAM。感谢您的任何投入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T00:10:45.237

试试 FireBug 的“页面速度”选项卡。

正如我所见，您的服务器没有针对静态内容的 gzip 压缩。压缩可以[在 nginx 配置中打开](http://wiki.nginx.org/HttpGzipModule)。

此外，网站有很多单独的 PNG、CSS 和 JS 文件。我知道一些 CMS 模板允许在单个文件中收集所有 JS 和 CSS。PNG文件也可以收集在单个文件中。

# php - 给定时间后自动终止 Linux 进程/php 脚本

> ID：15747431
> 
> 赞同：2
> 
> 时间：2013-04-01T16:39:45.717
> 
> 标签：php, linux, cron

我每小时都在运行一个用 PHP 编程的爬虫，并有一个 cron 作业。当一切都按预期进行时，脚本会自动退出。但是，由于某些原因，有时它会陷入无限循环。情况变得更糟，因为我使用锁定文件来避免重复运行，当爬虫卡住时，它永远不会再次运行，直到它手动杀死它（ ps aux -> kill ）

无论发生什么，我如何确保脚本在几个小时后结束？

我应该在 php 代码中添加一行吗？直接在 Linux 中这样做不是更健壮吗？

到目前为止，我最好的想法是制作一个包含所有必要命令的小批处理文件，然后使用 cron 而不是直接使用 php 脚本调用该批处理。

我是对的，命令应该是什么？

谢谢

编辑：到目前为止我发现的最好的是：[http ://www.linuxquestions.org/questions/linux-general-1/how-to-kill-the-process-after-specific-time-624453](http://www.linuxquestions.org/questions/linux-general-1/how-to-kill-the-process-after-specific-time-624453)

bash 太长了，我希望有一个更智能、更短的解决方案。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-01T20:59:16.453

这将杀死一个多小时前开始的 php 进程：

```
$(ps -eo comm,pid,etimes | awk '/^php/ {if ($3 > 3600) { print "kill "$2}}') 
```

3600 - 以秒为单位的时间戳

PS你可以运行命令

```
> ps -eo comm,pid,etimes 
```

之前和之后，以确保一切顺利。

PPS 我知道这是个老问题，但有人可能会觉得它有帮助

# python - 是否可以整理 matplotlib 中 x 轴上使用秒数的图形

> ID：15747437
> 
> 赞同：0
> 
> 时间：2013-04-01T16:40:14.803
> 
> 标签：python, graph, matplotlib

我有一个日期时间数据集，有时包含以秒为单位的差异。

我将日期时间（在 x 轴上）垂直显示，希望文本不会相互重叠，但从外观上看，它们实际上是堆叠在一起的。我认为这是因为我有以秒为单位的数据，并且日期可以跨越不同的日子，所以 x 轴非常紧。另一个问题是图上的数据点也是重叠的，因为它们之间的距离太近了。

这是一个示例集（已使用 转换`date2num()`）。它以秒为单位，但跨越数天：

```
dates = [734949.584699074, 734959.4604050926, 734959.4888773148, 734949.5844791667, 734959.037025463, 734959.0425810185, 734959.0522916666, 734959.4607060185, 734959.4891435185, 734949.5819444444, 734959.0348726852, 734959.0390393519, 734959.0432175926, 734959.0515393518, 734959.4864814815, 734949.5842476852, 734959.0367476852, 734959.038125, 734959.0423032407, 734959.052025463, 734959.4603819444, 734959.4895023148, 734949.5819791667, 734959.0348958333, 734959.0390740741, 734959.0432407408, 734959.0515856481, 734959.4579976852, 734959.487175926]

values =  [39, 68, 27, 57, 22, 33, 70, 19, 60, 53, 52, 33, 87, 63, 78, 34, 26, 42, 24, 97, 20, 1, 32, 60, 61, 48, 30, 48, 17]

dformat = mpl.dates.DateFormatter('%m-%d-%Y %H:%M:%S')
figure = plt.figure()
graph = figure.add_subplot(111)
graph.xaxis.set_major_formatter(dformat)
plt.xticks(rotation='vertical')
figure.subplots_adjust(bottom=.35)
graph.plot_date(dates,values)
graph.set_xticks(dates)
plt.show() 
```

我有两个问题：

*   有没有办法在 x 轴上创建一个间距，以便我可以清楚地看到文本和数据点？这将导致一个非常长的水平图，但我会将其保存到图像文件中。

*   与第一个问题有关：为了减少图形的水平长度，有没有办法压缩 x 轴上的刻度，以便缩短没有数据的区域？

    例如，如果我们有三个带值的日期：

    ```
     March 22 2013 23:11:04        55

     March 22 2013 23:11:10        70

     April 1 2013 10:43:56         5 
    ```

    2013 年 3 月 22 日 23:11:10 和 2013 年 4 月 1 日 1-:43:56 之间的空间是否可以压缩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:28:09.667

您基本上是在要求一些不可能的事情，在保持 x 轴线性的同时，您不能既看到天的范围，又能看到*几*秒钟的差异。如果你想试试这个，你可以做类似[（doc）的事情](http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.set_size_inches)

```
fig.set_size_inches(1000, 2, forward=True) 
```

这将使您的身材有 1000 英寸宽和 2 英寸高，但这样做相当笨拙。

我认为你应该做的是应用 Dermen 的链接（[Python/Matplotlib - Is there a way to make a discontinuous axis?](https://stackoverflow.com/questions/5656798/python-matplotlib-is-there-a-way-to-make-a-discontinuous-axis)）在任何地方你的数据有很大的中断。您最终会得到多个部分，每个部分都有几秒钟的宽度，这将为刻度标签提供足够的空间以供阅读。

# java - 如何在保存新 Notes 电子邮件之前访问其基础文档

> ID：15747439
> 
> 赞同：2
> 
> 时间：2013-04-01T16:40:22.617
> 
> 标签：java, plugins, lotus-notes

我们有一个用 Java 开发的 Lotus Notes 插件。我们支持的当前 Notes 版本是 8.5.2。

该插件向 Notes UI 添加了一个按钮。当用户单击它时，我们会向用户显示一个窗口，允许用户使用 Web 服务将当前项目添加到我们基于 Web 的应用程序中。一切正常，除非用户尝试添加*新的电子邮件项目。*

“单击事件”的侦听器（如果您愿意的话）需要知道当前文档，以便它可以将其字段数据传递给 Web 服务调用。为了做到这一点，已经设置了一个单独的侦听器`DocumentContextService`（

`DocumentContextService`尝试检索当前文档的 URI。这就是事情分崩离析的地方。我发现未发送的电子邮件*没有 URI*。此外，似乎没有办法访问该文档并保存它，以便我可以获得一个。

从理论上讲，这是设计使然。奇怪的是，我可以看到新文档有一个 DocumentKey，所以我知道它存在（作为某处的草稿），但我无法得到它。因此，在实际保存之前，似乎没有任何方法可以访问文档的数据。

除非我错了（我很可能是）。还有一个问题：**有没有办法在保存新电子邮件之前获取它的基础文档，以便我可以访问它的数据（特别是它的字段）？**

来自文档上下文侦听器的代码如下。再次，问题是 URI 属性总是计算为新电子邮件的空字符串。

```
package com.ibm.lotuslabs.context.service.internal;

import java.net.URI;
import java.net.URISyntaxException;
import java.util.Properties;

import org.eclipse.jface.resource.ImageDescriptor;
import org.eclipse.swt.graphics.Image;
import org.eclipse.ui.IWorkbenchPart;
import org.eclipse.ui.model.IWorkbenchAdapter;
import org.eclipse.ui.views.properties.IPropertyDescriptor;
import org.eclipse.ui.views.properties.IPropertySource;

import com.ibm.lotuslabs.context.service.document.IDocumentContext;
import com.ibm.rcp.jface.launcher.IURIProvider;
import com.satuit.sys.The;

/**
 * Extracts document information about about a selection object. Represents the document within the DocumentSelection.
 */
@SuppressWarnings("deprecation")
public class DocumentContext implements IDocumentContext
{
    private IWorkbenchPart part;
    private Object obj;
    private String label;
    private URI uri;
    private ImageDescriptor icon;
    private Properties properties;
    private String id;

    /**
     * Initializes a new instance of the DocumentContext class.
     * 
     * @param part  The current view part.
     * @param obj   The currently selected object.
     */
    public DocumentContext(final IWorkbenchPart part, final Object obj)
    {
        this.part = part;
        this.obj = obj;

        // Is this object a URIProvider?
        final IURIProvider provider = (IURIProvider)ContextUtil.getAdapterObject(obj, IURIProvider.class);
        if (provider != null)
        {
            this.uri = provider.getURI();
            this.label = provider.getTitle();
            this.icon = provider.getImageDescriptor();
        }

        if (this.label == null || this.icon == null)
        {
            // Is this object a workbench adapter?
            final IWorkbenchAdapter wba = (IWorkbenchAdapter)ContextUtil.getAdapterObject(obj, IWorkbenchAdapter.class);
            if (wba != null)
            {
                if (this.label != null)
                {
                    this.label = wba.getLabel(obj);
                }

                if (this.icon != null)
                {
                    this.icon = wba.getImageDescriptor(obj);
                }

            }

            if (this.icon == null)
            {
                final Image i = part.getTitleImage();
                if (i != null)
                {
                    this.icon = ImageDescriptor.createFromImage(i);
                }
            }
        }

        // Is this object a URI?
        if (this.uri == null)
        {
            this.uri = (URI)ContextUtil.getAdapterObject(obj, URI.class);
        }

        //  Is this object a PropertySource?
        //  (A document that isn't a URI provider may provide a URI in its properties.)
        final IPropertySource prop = (IPropertySource)ContextUtil.getAdapterObject(obj, IPropertySource.class);
        if (prop != null)
        {
            this.properties = buildProperties(prop);
        }
    }

    /**
     * Gets the ID of this instance.
     * @return A string containing the ID.
     */
    public final String getId()
    {
        return this.id;
    }

    /**
     * Gets the workbench part used to initialize this instance.
     * @return
     */
    public final IWorkbenchPart getPart()
    {
        return this.part;
    }

    /* (non-Javadoc)
     * @see com.ibm.lotuslabs.context.service.document.IDocumentContext#getImageDescriptor()
     */
    public final ImageDescriptor getImageDescriptor()
    {
        return this.icon;
    }

    /* (non-Javadoc)
     * @see com.ibm.lotuslabs.context.service.document.IDocumentContext#getLabel()
     */
    public final String getLabel()
    {
        if (this.label == null && this.part != null)
        {
            return this.part.getTitle();
        }

        return this.label;
    }

    /* (non-Javadoc)
     * @see com.ibm.lotuslabs.context.service.document.IDocumentContext#getObject()
     */
    public final Object getObject()
    {
        return this.obj;
    }

    /* (non-Javadoc)
     * @see com.ibm.lotuslabs.context.service.document.IDocumentContext#getProperties()
     */
    public final Properties getProperties()
    {
        return this.properties;
    }

    /* (non-Javadoc)
     * @see com.ibm.lotuslabs.context.service.document.IDocumentContext#getURI()
     */
    public final URI getURI()
    {
        return this.uri;
    }

    private Properties buildProperties(final IPropertySource source)
    {
        if (source == null)
        {
            return null;
        }

        final IPropertyDescriptor[] descs = source.getPropertyDescriptors();

        if (The.Value(null).Is.NullOrEmpty(descs))
        {
            return null;
        }

        final Properties prop = new Properties();
        for (int i = 0; i < descs.length; i++)
        {
            final Object id = descs[i].getId();
            final String name = descs[i].getDisplayName();

            String value = source.getPropertyValue(descs[i].getId()).toString();
            if (The.Value(descs[i].getDescription()).Is.Not.Null())
            {
                value += "|" + source.getPropertyValue(descs[i].getDescription()).toString();
            }

            if (this.uri == null)
            {
                if (The.Value("URI").Is.OneOfIgnoreCase(id.toString(), name) ||
                    The.Value("URL").Is.OneOfIgnoreCase(id.toString(), name))
                {
                    try
                    {
                        this.uri = new URI(value);
                        continue;
                    }
                    catch (URISyntaxException e)
                    {

                    }
                }
            }
            prop.setProperty(name, value);
        }

        return prop;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:01:27.633

抱歉，在将文档保存到后端数据库之前，没有文档可以获取 URI，因为它不存在于内存中的任何地方。它根本不存在于磁盘上。

# sql - 强制转换和子字符串

> ID：15747446
> 
> 赞同：0
> 
> 时间：2013-04-01T16:40:55.527
> 
> 标签：sql, ssis, substring

我在为 SSIS 转换修剪连接键时遇到了一些麻烦。

```
SELECT year_time, substring(rtrim(cast(region_code+county_code+district_code as varchar(100)), 5,4)as DR, rtrim(ltrim(T1.district_name)) as 'DNR', SUM(CAST(K12 AS INT)) AS 'TR'   
FROM Database_Table
GROUP BY year_time, region_code+county_code+district_code, district_name
order by year_time, district_code_raw, district_name_raw 
```

我收到一个错误，我的 rtrim 函数需要 1 个参数。我相信错误是在串联上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:44:10.903

您缺少括号来关闭`RTRIM()`：

```
SELECT year_time, 
    substring(rtrim(cast(region_code+county_code+district_code as varchar(100))), 5,4)as DR, 
    rtrim(ltrim(T1.district_name)) as 'DNR',                                 --^--missing
    SUM(CAST(K12 AS INT)) AS 'TR'   
FROM Database_Table
GROUP BY year_time, region_code+county_code+district_code, district_name
order by year_time, district_code_raw, district_name_raw 
```

# android - 从 Google Play 安装但不是从 eclipse/apk 文件安装时 APK 崩溃

> ID：15747447
> 
> 赞同：1
> 
> 时间：2013-04-01T16:40:59.110
> 
> 标签：android, android-manifest, runtimeexception

我发布了我的一个应用程序的新版本，当应用程序启动时，我开始从用户那里收到大量关于崩溃问题的错误。

这些是我得到的错误：

第一个错误：

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.jayColber.andcarryon/com.jayColber.andcarryon.MainActivity}: java.lang.ClassNotFoundException: com.jayColber.andcarryon.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.jayColber.andcarryon-1.apk]
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.jayColber.andcarryon.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.jayColber.andcarryon-1.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
... 11 more 
```

第二个错误：

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.jayColber.andcarryon/com.jayColber.andcarryon.MainActivity}: java.lang.ClassNotFoundException: com.jayColber.andcarryon.MainActivity
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
at android.app.ActivityThread.access$600(ActivityThread.java:139)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:154)
at android.app.ActivityThread.main(ActivityThread.java:4945)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.jayColber.andcarryon.MainActivity
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.Instrumentation.newActivity(Instrumentation.java:1039)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2101)
... 11 more 
```

我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.jayColber.andcarryon"
    android:versionCode="10"
    android:versionName="1.1.3"  >
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
        <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>   
        <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
        <uses-permission android:name="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS"/>
        <uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/>
        <uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT"/>
        <uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT"/>
        <uses-permission android:name="com.android.launcher.permission.READ_SETTINGS"/>
        <uses-permission android:name="com.htc.launcher.permission.READ_SETTINGS"/>
        <uses-permission android:name="com.motorola.launcher.permission.READ_SETTINGS"/>
        <uses-permission android:name="com.motorola.dlauncher.permission.READ_SETTINGS"/>
        <uses-permission android:name="com.fede.launcher.permission.READ_SETTINGS"/>
        <uses-permission android:name="com.lge.launcher.permission.READ_SETTINGS"/>
        <uses-permission android:name="org.adw.launcher.permission.READ_SETTINGS"/>
        <uses-permission android:name="com.motorola.launcher.permission.INSTALL_SHORTCUT"/>
        <uses-permission android:name="com.motorola.dlauncher.permission.INSTALL_SHORTCUT"/>
        <uses-permission android:name="com.lge.launcher.permission.INSTALL_SHORTCUT"/>
        <uses-permission android:name="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS"/>
        <uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
        <uses-permission android:name="android.permission.SET_WALLPAPER"/>
        <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />

    <application
        android:icon="@drawable/icon144" 
        android:label="@string/app_name"
        android:allowBackup="true" 
        android:largeHeap="true"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
        <activity android:name="MainActivity" android:label="Keep Calm" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="BackgroundSelector" android:label="Select Background" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"></activity>
        <activity android:name="library.AmbilWarna" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"></activity>
        <activity android:name="IconSelector" android:label="Select Icon" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"></activity>
        <activity android:name="ShareSelector" android:label="Share your poster" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"></activity>
        <activity android:name="colorSelector" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"></activity>
        <activity android:name="infoActivity" android:label="Info" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"></activity>
        <activity android:name="com.revmob.ads.fullscreen.FullscreenActivity" android:configChanges="keyboardHidden|orientation" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"></activity>
       <activity android:name="com.apperhand.device.android.EULAActivity" android:theme="@android:style/Theme.Translucent" android:configChanges="keyboard|keyboardHidden|orientation" />
        <service android:enabled="true" android:name="com.apperhand.device.android.AndroidSDKProvider"/>
        <meta-data android:name="com.startapp.android.DEV_ID" android:value="1011042240"/>
        <meta-data android:name="com.startapp.android.APP_ID" android:value="201812008"/>
    </application>
</manifest> 
```

我尝试使用 APK 文件和 TestFlight 在多个设备中安装该应用程序，它运行良好 - 但是从 Google Play 安装到设备时它立即崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:48:42.817

如果您没有为每个组件指定包名称，正确的简写方式是以句点开头。例如，而不是

```
<activity android:name="MainActivity" android:label="Keep Calm" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"> 
```

它应该是：

```
<activity android:name=".MainActivity" android:label="Keep Calm" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"> 
```

对于所有其他组件也是如此。否则你应该指定包名

```
<activity android:name="com.jayColber.andcarryon.MainActivity" android:label="Keep Calm" android:screenOrientation="portrait" android:theme="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"> 
```

# .net - CLR 使用 bindingRedirect 绑定到正确的程序集，但是如何？

> ID：15747450
> 
> 赞同：0
> 
> 时间：2013-04-01T16:41:14.963
> 
> 标签：.net, web-config, clr, gac

一点背景知识：我们有一个应用程序使用 3 个核心 DLL，这些 DLL 被应用程序的不同部分引用。这三个 DLL 在 GAC 中。在我们的测试环境中，我们有 3 个测试网站（相同网站，不同版本）都使用 GAC 中的 DLL，以及 bin\ 中的产品特定 DLL。

我们遇到了一种情况，其中一种产品需要更新这些核心 DLL，但我们不想将程序集放在 GAC 中，因为我们的特定测试网站是唯一引用这些 DLL 的网站。我们知道我们可以在 GAC 中放置一个程序集的多个版本，但这与这个特定问题无关，因为我们选择不这样做。

我自己的研究表明，一群人似乎对自己的答案非常有信心，但他们中的大多数人不同：运行时定位程序集。大多数人说GAC 优先，根据我自己的经验，情况就是如此。其他人说，只要程序集没有被强烈命名，它将更喜欢 bin\ 而不是 GAC，根据我的经验，这是不正确的。

我找到了这篇 MS 文章：

[运行时如何定位程序集](http://msdn.microsoft.com/en-us/library/aa720133.aspx)

它描述了 CLR 确定要绑定到哪些程序集的步骤。事实证明，这并不完全符合预期。所有这些很可能是一个环境问题（我实际上会这样倾斜）。

我还发现[这个](https://stackoverflow.com/questions/2797174/how-does-the-clr-know-which-if-the-given-assembly-is-the-correct-one)SO 问题与我读过的其他问题相似，但不一定是我需要的答案

我终于找到了一个比 GAC 更喜欢 bin\ 的解决方法。我在我们的 web.config 中使用了这个标签。我在 SO 和其他网站上看到了这个建议，并且间歇性地成功了，并且很高兴它在我的情况下有效。

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <dependentAssembly>
            <assemblyIdentity name="dll1" publicKeyToken="ourToken" 
                culture="neutral" />
            <bindingRedirect oldVersion="5.0.0.0" newVersion="5.0.1.0" />
        </dependentAssembly>
    </assemblyBinding>
</runtime> 
```

版本 5.0.1.0 在我的 bin\ 文件夹中。5.0.0.0 在 GAC 中。最后我的问题是，即使 5.0.1.0 不是 GAC 中的程序集，CLR 怎么知道它需要在 bin\ 中查找要绑定的正确程序集？在 .config 中添加标记之前，无论项目是使用什么程序集版本 (5.0.1.0) 构建的，应用程序仍然更喜欢 GAC (5.0.0.0) 中的旧版本 DLL。

我无法找到任何有关此的文档，很可能是因为我不知道如何将这 5 段解释分解为搜索查询。任何参考资料都将不胜感激，甚至可能对上面引用的文章进行澄清，这样我就可以了解 CLR 为何正在做它正在做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:54:18.023

它*总是*首先在 GAC 中查找，搜索程序集的特定*名称 + 版本*。如果没有找到，那么它会在探测路径中寻找程序集。并且只查找程序集的特定*名称*。当它找到一个时，它会检查版本是否匹配。Kaboom 如果没有。

所以最初它总是寻找“dll1”+ 5.0.0.0 并在 GAC 中找到它。无需去别处寻找。

更改 .config 文件后，它现在在 GAC 中查找“dll1”+ 5.0.1.0。并没有在那里找到它。所以现在去寻找“dll1”并在你的bin目录中找到它。版本匹配，所以很高兴。

# qt - qt 3.0.3 中的鼠标点击事件

> ID：15747452
> 
> 赞同：-1
> 
> 时间：2013-04-01T16:41:16.097
> 
> 标签：qt

鼠标按钮单击我正在尝试在特定坐标处创建自动鼠标单击事件。

此源代码将鼠标指针移动到坐标区域，但没有单击。

请帮我解决这个问题或提出任何新的想法来自动化鼠标点击事件。

注意：我使用的是 QT 3.0.3

```
 void mMouseClickFunction() 
  { 

   QWidget *d = QApplication::desktop()->screen(); 
   int w=d->width(); // returns desktop width 
   int h=d->height(); 
   printf("w=%d\nh=%d\n",w,h); 
   int x,y; 
   printf("Enter the points...\n"); 
   scanf("%d%d",&x,&y); 
   QApplication::desktop()->cursor().setPos(x,y); 
   QPoint pt(x,y); 
    std::cout << pt.x() << " " << pt.y() << std::endl; 
   QMouseEvent *e = new QMouseEvent(QEvent::MouseButtonPress, pt,Qt::LeftButton, 0); 
   QApplication::sendEvent(d, e); 
   std::cout << "in contentsMousePressEvent"<< e->x() << " " << e->y() << std::endl; 
   QMouseEvent *p = new QMouseEvent(QEvent::MouseButtonRelease, pt,Qt::LeftButton, 0); 
   QApplication::sendEvent(d, p); 
   std::cout << "in contentsMouseReleaseEvent"<< p->x() << " " << p->y() << std::endl; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:49:07.863

`QApplication::sendEvent`向 QApplication 内部发送事件，而不是系统范围的事件。您可能需要特定于系统才能发送这样的事件。这是windows的函数调用：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx)

但是即使使用这种调用，您也将被限制在某些窗口中，除非您的 UIAccess 为 true，并且您的程序是位于硬盘驱动器右侧的已签名应用程序。

编辑：这是一个页面，其中包含一些在 Linux 中发送输入的示例：

[http://www.linuxquestions.org/questions/programming-9/simulating-a-mouse-click-594576/](http://www.linuxquestions.org/questions/programming-9/simulating-a-mouse-click-594576/)

希望有帮助。

# flash - Flash Actionscript 3.0 中的过渡

> ID：15747454
> 
> 赞同：1
> 
> 时间：2013-04-01T16:41:18.517
> 
> 标签：flash, function, tween

我是 Flash 新手，不幸的是我们的老师没有教我们如何进行过渡。我曾尝试研究它们，似乎有 100 种方法可以做到这一点。在我的例子中，我还没有找到有效的方法。如何在正在加载的图片之间进行过渡？

```
import flash.display.Loader;
import flash.net.URLRequest;
import flash.events.MouseEvent;
import fl.transitions.*;
import fl.transitions.easing.*;

home_btn.addEventListener(MouseEvent.CLICK, takeToHomeZerg);
sarahkerrigan_btn.addEventListener(MouseEvent.CLICK, addsarahkerrigan);
izsha_btn.addEventListener(MouseEvent.CLICK, addizsha);
abathur_btn.addEventListener(MouseEvent.CLICK, addabathur);

var sarahkerriganAdd:Loader = new Loader();
var izshaAdd:Loader = new Loader();
var abathurAdd:Loader = new Loader();

var sarahkerrigan:URLRequest = new URLRequest("zerg/sarahkerrigan.jpg");
var izsha:URLRequest = new URLRequest("zerg/izsha.jpg");
var abathur:URLRequest = new URLRequest("zerg/abathur.jpg");

sarahkerriganAdd.visible = false;
izshaAdd.visible = false;
abathurAdd.visible = false;

addChild(sarahkerriganAdd);
addChild(izshaAdd);
addChild (abathurAdd);

function takeToHomeZerg (evt:MouseEvent):void{
    gotoAndStop(1);
    removeChild(sarahkerriganAdd);
    removeChild(izshaAdd);
    removeChild (abathurAdd);

}

function addsarahkerrigan (evt:MouseEvent):void{
    sarahkerriganAdd.load(sarahkerrigan);
    sarahkerriganAdd.x = 275;
    sarahkerriganAdd.y = 32;
    sarahkerriganAdd.scaleX = .2618;
    sarahkerriganAdd.scaleY = .28;
    sarahkerriganAdd.visible = true;
    izshaAdd.visible = false;
    abathurAdd.visible = false;

}

function addizsha (evt:MouseEvent):void{
    izshaAdd.load(izsha);
    izshaAdd.x = 275;
    izshaAdd.y = 32;
    izshaAdd.scaleX = .2618;
    izshaAdd.scaleY = .28;
    izshaAdd.visible = true;
    sarahkerriganAdd.visible = false;
    abathurAdd.visible = false;

}
function addabathur (evt:MouseEvent):void{
    abathurAdd.load(abathur);
    abathurAdd.x = 275;
    abathurAdd.y = 32;
    abathurAdd.scaleX = .2618;
    abathurAdd.scaleY = .28;
    abathurAdd.visible = true;
    izshaAdd.visible = false;
    sarahkerriganAdd.visible = false;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:40:54.460

有很多方法可以进行转换，但我认为最方便（和优化）的是 GreenSock 库。看看他们的[示例页面](http://www.greensock.com/get-started-tweening/)！

PS你也可以只用AS3原生工具来做，但不会那么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:19:24.220

以下是在没有 GreenSock 的情况下淡出影片剪辑的方法：

```
// add a listener that calls a function on each frame 
// (i.e. 15, 24 or 30 times per second depending on your movie settings)
stage.addEventListener(Event.ENTER_FRAME,fadeOutMyClip)

function fadeOutMyClip(e:Event) {
    if (myClip.alpha > 0) { 
// decrease the transparency of the mc by 1 percent each frame
// at 30 fps, it'll take 3.3 seconds, and at 15 fps it'll take 6.6 seconds
        myClip.alpha-=0.01
    } else {
// don't forget to remove the listener when it's no longer needed
// you could also remove the now-transparent movieclip from stage completely, 
// if you're not planning on fading it back again
        stage.removeEventListener(Event.ENTER_FRAME,fadeOutMyClip)
    }
} 
```

# emacs - Flymake CFGERR 使用自定义 g++ 命令

> ID：15747457
> 
> 赞同：0
> 
> 时间：2013-04-01T16:41:21.360
> 
> 标签：emacs, elisp, syntax-highlighting, flymake

我正在尝试使用 flymake 在 Emacs 中工作的 C++ 代码的语法突出显示。我知道使用 C++ 的标准 flymake 配置它会尝试运行`make syntax-check`，但是，我的构建系统不使用 Makefile（或至少不直接使用）。它使用[rosmake](http://www.ros.org/wiki/rosmake)，它是 ROS 系统的 cmake 包装器。

为了解决我无法控制 Makefile 的事实，我一直在尝试添加一个基于[flymake 网站](http://www.gnu.org/software/emacs/manual/html_mono/flymake.html)和[这个 stackoverflow question](https://stackoverflow.com/questions/14864511/configure-emacs-flymake-to-call-g-directly/14866268#14866268)的自定义 flymake 检查器。

我已经创建了命令`g++ -Wall -Wextra -fsyntax-only -Iinclude_dir file_to_check.cpp`。当我在 bash 中运行命令时，我得到了预期的输出。没有语法错误，我有一个退出代码 0 并且没有输出。由于语法错误，我有一个退出代码 1 和按行列出的错误。但是，每当我尝试使用 flymake 运行它时，我都会得到一个 CFGERR 并被告知 flymake 已被禁用。

我很确定正在运行正确的命令，因为错误显示了完整的命令，并且一切看起来都与我在终端中键入的内容相同。我将日志记录级别一直提高到 3 以查看问题所在。日志中途出现错误

```
file /home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/src/Broadcaster.cpp, init=flymake-cc-init [3 times]
create-temp-inplace: file=/home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/src/Broadcaster.cpp temp=/home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/src/Broadcaster_flymake.cpp
saved buffer Broadcaster.cpp in file /home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/src/Broadcaster_flymake.cpp
started process 14517, command=(g++ -Wall -Wextra -fsyntax-only -std=c++0x  -I/home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/include -I/home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/msg_gen/cpp/include -I/home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/srv_gen/cpp/include -I/opt/ros/fuerte/include
 Broadcaster_flymake.cpp), dir=/home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/src/
received 40 byte(s) of output from process 14517
file /home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/src/Broadcaster.cpp, init=flymake-cc-init
parsed 'g++: error: : No such file or directory', no line-err-info
file /home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/src/Broadcaster.cpp, init=flymake-cc-init
process 14517 exited with code 1
cleaning up using flymake-simple-cleanup
deleted file /home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/src/Broadcaster_flymake.cpp
Broadcaster.cpp: 0 error(s), 0 warning(s), 0 info in 0.07 second(s)
switched OFF Flymake mode for buffer Broadcaster.cpp due to fatal status CFGERR, warning Configuration error has occured while running (g++ -Wall -Wextra -fsyntax-only -std=c++0x  -I/home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/include -I/home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/msg_gen/cpp/include -I/home/rhololkeolke/ros_workspace/team-hku-drc/robot_code/state_trigger/srv_gen/cpp/include -I/opt/ros/fuerte/include
 Broadcaster_flymake.cpp) 
```

主要错误似乎是`parsed 'g++: error: : No such file or directory', no line-err-info`。我认为这可能是因为 Broadcaster_flymake.cpp 从未被创建，但我检查了它，它似乎正在工作。无论是否存在语法错误，我都会收到这些错误。我无法弄清楚为什么它找不到文件，因为将命令复制并粘贴到 Bash 中效果很好。我还尝试`(shell-command "g++")`在缓冲区中确保 emacs 正在找到 g++ 二进制文件，并且确实如此。

如果您知道为什么 flymake 无法运行命令，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:18:27.973

我弄清楚了问题所在。我重载了函数`flymake-get-project-include-dirs`。在那个函数中，我运行`rospack cflags-only-I`命令来获取当前 ROS 包的必要包含目录。我没有意识到的是，在我处理完 rospack 命令的输出后，最终的包含目录最后包含了一个换行符。当我看到它试图在缓冲区中运行的命令时，我注意到它试图检查的文件名总是在一个新行上，但我认为这只是一个格式化的东西。

现在我已经从我的包含目录中删除了所有换行符，一切都很好。

# c# - 如何从后面的代码访问在 xaml 中声明的全局变量

> ID：15747465
> 
> 赞同：2
> 
> 时间：2013-04-01T16:41:36.667
> 
> 标签：c#, wpf, xaml, resources

我想从 wpf 中的不同导航页面访问一个对象。为此，我创建了一个类并在 app.xaml 中声明。我可以从 xaml 中的多个导航页面访问该类，但是当我想在后面的代码中创建按钮单击事件时，我无法访问该类。

这是我所做的。

类（SerialComm.cs）。

```
class SerialComm : INotifyPropertyChanged
{
    private SerialPort _serialPortComm;

    public SerialComm()
    {
        _serialPortComm = new SerialPort();
    }

    public SerialPort SerialPortComm
    {
        get { return _serialPortComm; }
        set
        {
            _serialPortComm = value;
            OnPropertyChanged("SerialPortComm");
        }
    }

    #region NotifyPropertyChange handler
    public event PropertyChangedEventHandler PropertyChanged;

    [NotifyPropertyChangedInvocator]
    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
    #endregion

} 
```

资源字典 (/Resources/DataSourceResources.xaml)

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:sys="clr-namespace:System;assembly=mscorlib" 
                xmlns:local="clr-namespace:RemoteConfigurator"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                mc:Ignorable="d" 
                >
<local:SerialComm x:Key="SerialCommDataSource" d:IsDataSource="True" /> 
```

app.xaml 中的声明

```
<Application x:Class="RemoteConfigurator.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:local="clr-namespace:RemoteConfigurator"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         mc:Ignorable="d" 
         StartupUri="MainWindow.xaml">
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/Resources/DataSourceResources.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

我可以访问该对象的导航页面。

```
<UserControl x:Class="RemoteConfigurator.Content.SerialSettings"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:ports="clr-namespace:System.IO.Ports;assembly=System"
         xmlns:sys="clr-namespace:System;assembly=mscorlib" 
         xmlns:local="clr-namespace:RemoteConfigurator"
         mc:Ignorable="d" 
         d:DesignHeight="600" d:DesignWidth="600" Loaded="SerialSettings_Loaded">

<Grid Style="{StaticResource ContentRoot}" DataContext="{Binding Source={StaticResource SerialCommDataSource}}" >
    <ScrollViewer>
        <StackPanel >
            <StackPanel Orientation="Horizontal" Margin="4">
                <TextBlock TextWrapping="Wrap" Text="Baud Rate (bps)" VerticalAlignment="Center" MinWidth="150"/>
                <TextBox x:Name="tbbaudRate" Height="23" TextWrapping="Wrap" MinWidth="200" Text="{Binding SerialPortComm.BaudRate}" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
    **<Button Content="Connect" HorizontalAlignment="Right" VerticalAlignment="Bottom" Click="Button_Connect"/>**
</Grid> 
```

我的问题是如何从后面的代码访问 SerialPort？类在哪里实际声明。iirc，我从不调用任何串口构造函数。

这是后面的代码。

```
 private void Button_Connect(object sender, RoutedEventArgs e)
    {
        **//SerialPortComm - doesnt work**
        **//SerialCommDataSource - doest work**
    } 
```

如何从后面的代码访问串行端口对象？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:43:46.680

你可以做

```
App.Current.Resources["SerialCommDataSource"] as SerialCom; 
```

基本上，当您添加了一个带密钥的全局资源时，`SerialCommDataSource`您可以像上面一样获得它

# java - 如何在 Netbeans 7.3 中安装 javax.microedition.lcdui

> ID：15747466
> 
> 赞同：0
> 
> 时间：2013-04-01T16:41:38.580
> 
> 标签：java, import

每当我尝试使用此代码时...

```
import javax.microedition.lcdui.Graphics;
import javax.microedition.lcdui.Image; 
```

...它显示此错误“javax.microedition.lcdui 不存在”

我该如何解决这个问题？

它安装...

“ [http://gyazo.com/ccd667e24ea2952112cd9fdcd064e0c2](http://gyazo.com/ccd667e24ea2952112cd9fdcd064e0c2) ”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:43:19.557

您还需要将 JME 库/JAR 添加到项目的类路径中。您可以通过右键单击项目并从弹出菜单中选择属性来执行此操作。

# unix - BSD Makefile 中的 ${_+_}

> ID：15747472
> 
> 赞同：4
> 
> 时间：2013-04-01T16:42:10.160
> 
> 标签：unix, makefile, bsd

我`${_+_}`在[FreeBSD Makefile](https://github.com/freebsd/freebsd/blob/master/Makefile#L201)中找到了。

`${_+_}`BSD Makefiles中的含义是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:56:10.160

`${_+_}`指一个变量。它在由 make 进程读取的[share/mk/sys.mk中定义。](https://github.com/freebsd/freebsd/blob/master/share/mk/sys.mk#L99)所以用户 Zack 在他的评论中指出了正确的方向；在某些情况下，此变量会扩展为一个`+`符号，具体取决于为 make 提供的标志：

```
.if !empty(.MAKEFLAGS:M-n) && ${.MAKEFLAGS:M-n} == "-n"
_+_     ?=
.else
_+_     ?=  +
.endif 
```

可以在[此提交的评论中找到](https://github.com/freebsd/freebsd/commit/273eef07a6984e917a1b9593d09fbfd80eed5cfb)[这样](https://github.com/freebsd/freebsd/commit/91ae96e9ab60545b12f373666c26846c1980e13c)做的理由，以及在此处引入符号的地方：

```
Make make recurse into sub-directories and sub-makes when given
two -n flags.  If only one -n flag is given the old behaviour
is retained (POLA). 
```

# javascript - 在源文件之前在 Jasmine on Rails 3.1 插件上加载 jQuery

> ID：15747475
> 
> 赞同：3
> 
> 时间：2013-04-01T16:42:16.823
> 
> 标签：javascript, jquery, ruby-on-rails, testing, jasmine

我在一个 Rails 插件上工作 Jasmine，该插件将包含在从 CDN 加载 jQuery 的 Rails 应用程序中。但是，我在插件中运行 Jasmine 测试时遇到了问题。我需要在 app/assets/javascripts 中的源 javascript 文件之前加载 jQuery，但是如果我在 jasmine.yml 中包含 jQuery，它不会在源文件之前加载：

jasmine.yml 内容：

```
src_dir: "app/assets/javascripts"
src_files:
 - "my_rails_plugin_source_includer.js"
spec_dir: spec/javascripts
asset_paths:
- "vendor/assets/javascripts" 
```

my_rails_plugin_source_includer.js 需要我的源 javascripts：

```
//= require my_jquery_dependent_script.js
//= require my_other_jquery_dependent_script.js 
```

我正在使用

```
bundle exec jasmine-headless-webkit --color --keep ./spec/javascripts/specs.js 
```

运行我的测试。我收到一条错误消息，例如

```
ReferenceError: Can't find variable: jQuery
ReferenceError: Can't find variable: jQuery
Test ordering seed: --seed 1629 
```

如果我在 my_rails_plugin_source_includer.js 中明确需要一个 jQuery javascript 文件（例如 jquery-1.9.1-min.js），我的测试就会通过。但是，我不想这样做，因为我想要实际的 Rails 应用程序，而不是这个插件。关于如何在我的源文件之前需要 jQuery 的任何建议？在我的规范或我的助手中要求它不起作用，因为 Jasmine 似乎总是首先加载源文件（这当然是有道理的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:53:19.893

我能够通过执行以下操作来解决此问题：

1.  [从官方 jQuery 源](http://jquery.com/)下载 jquery-1.9.1.min.js并将其存储在我的 spec/javascripts/support/helpers 文件夹中。
2.  在我的 spec/javascripts/support/fixtures 文件夹（可以是任意文件夹）中创建一个 source.js 文件，该文件具有以下内容：

    ```
    //= require ../helpers/jquery-1.9.1.min
    //= require ../../../../app/assets/javascripts/application 
    ```

    其中 app/assets/javascripts/application.js 是我的插件 JavaScript 的清单。

3.  编辑我的 jasmine.yml 文件以使用以下来源：

    ```
    src_dir: "spec/javascripts/support/fixtures"
    src_files:
     - "source.js" 
    ```

因此，依赖于 jQuery 的源 JavaScript*仅为*Jasmine 测试预加载了 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T00:51:28.640

感谢[您的回答，Fares](https://stackoverflow.com/a/15749695/249543)，它让我深入了解了 jasmine 配置文件发生了什么。

文件如何包含在`jasmine`页面`<head>`标签中的顺序是可预测的。

首先，我的设置细节：

```
rails 4.0.1
jasmine 1.3.2
jquery-rails 3.0.4 (which provides jquery-1.10.2) 
```

* * *

这是我的**`spec/javascripts/support/jasmine.yml`**。我没有`helpers`，我不需要`css`文件来测试我的特定应用程序，并且我删除了所有评论。

```
src_files:
  - spec/javascripts/lib/jquery-1.10.2.js
  - app/assets/javascripts/tools/dependency-parser.js

spec_dir: spec/javascripts
spec_files:
  - '**/*[sS]pec.js' 
```

* * *

我的`<head>`茉莉花页面按顺序包含以下内容：

```
jasmine core  <link rel="shortcut icon" type="image/png" href="/__JASMINE_ROOT__/images/jasmine_favicon.png">
              <link rel="stylesheet" href="/__jasmine__/jasmine.css" type="text/css" media="screen">
              <script src="/__jasmine__/jasmine.js" type="text/javascript"></script>
              <script src="/__jasmine__/jasmine-html.js" type="text/javascript"></script>
              <script src="/__jasmine__/json2.js" type="text/javascript"></script>

   src_files  <script src="/spec/javascripts/lib/jquery-1.10.2.js" type="text/javascript"></script>
              <script src="/app/assets/javascripts/tools/dependency-parser.js" type="text/javascript"></script>

helper_files  <!-- I didn't have anything here -->

  spec_files  <script src="/__spec__/dependency-parser_spec.js" type="text/javascript"></script>

jasmine boot  <script src="/__boot__/boot.js" type="text/javascript"></script> 
```

* * *

我的应用程序使用资产管道和`jquery-rails`gem，以及典型的包括**`app/assets/application.js`**：

```
//=require jquery
//=require jquery-ujs
//=require tree . 
```

因为我使用的是`jquery-rails`gem，这意味着我实际上没有任何地方可以直接加载 jQuery JavaScript 文件——如果它们来自任何地方，它们应该来自资产管道。`app/assets/javascripts/application.js`由于某种原因，我似乎也无法包含该文件。事实证明这没问题。我只想测试我的自定义 JavaScript，它依赖于 jQuery。

所以，我只是下载了我的应用程序正在使用的 jQuery 版本`(1.10.2)`，并将其放入：

```
spec/javascripts/lib/   <= I created this folder 
```

* * *

之后一切都运行良好，因为我可以`.js`按照我需要的顺序加载我的文件。这并不完美。我现在手动让我的 jQuery 版本在我的规范中与`jquery-rails`我使用的任何版本相同，但现在这是一件相当小的事情......尽管它引出了一个问题，**“为什么人们将 javascript 文件打包成一个 gem？ "** 没有其他 Web 框架能做这种古怪的事情。

我还尝试使用`jasmine 2.0.0.rc5`gem（撰写本文时的当前版本），因为它应该处理这样的资产管道问题，但它对我不起作用。

我还尝试跳到更复杂的东西，比如使用`jasmine-jquery`or `jasminerice`gems，但发现它们的两个实现都是我上面所做的更复杂的版本。一旦我了解了配置文件`<head>`在我的特定情况下如何生成标签的内容，这是一个相对简单的修复。

如果我觉得有必要（据说它有更好的 Rails 4 支持），我可能会`jasmine 2.0.0`在它发布时移到它，但我很确定这个解决方案会很好地工作。

# c++ - 如何在 C++ 中转发类的声明？

> ID：15747480
> 
> 赞同：3
> 
> 时间：2013-04-01T16:42:46.350
> 
> 标签：c++, compiler-errors, forward-declaration

为什么 A 和 B 类的前向声明不起作用？

```
#include <iostream>
using namespace std;

class A, B;    

class A {
public:
    A() {
        new B();
    }
};

class B {
public:
    B() {
        new A();
    }
};

int main () {
    A a = new A();
    B b = new B();
}; 
```

编译器错误：

```
classes.cpp:4:8: error: expected unqualified-id before ‘,’ token
classes.cpp:4:10: error: aggregate ‘A B’ has incomplete type and cannot be defined
classes.cpp: In constructor ‘A::A()’:
classes.cpp:9:7: error: expected type-specifier before ‘B’
classes.cpp:9:7: error: expected ‘;’ before ‘B’
classes.cpp: In function ‘int main()’:
classes.cpp:22:14: error: conversion from ‘A*’ to non-scalar type ‘A’ requested
classes.cpp:23:4: error: expected ‘;’ before ‘b’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T16:44:04.730

像这样：

```
class A
{
public:
    A();
};

class B
{
public:
    B();
};

A::A() { new B(); }    // terrible code, leaks, serves no purpose
B::B() { new A(); }    // likewise 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:46:13.157

当您需要创建对象时，前向声明不起作用。

前向声明创建了一个不完整的类型。您不能使用它来声明成员或基类，因为编译器需要知道类型的布局。您不能定义将类型作为参数（按值）或返回（按值）的函数。

前向声明类型可以做什么。

1.  您可以声明指向前向声明类型的指针或引用。
2.  定义具有类型的指针/引用作为参数的函数
3.  定义返回类型的指针/引用的函数
4.  您可以*原型*化一个接受类型作为参数的函数
5.  您可以对返回类型的函数进行*原型设计。*

顺便说一句，您正在尝试做的事情将导致无限递归。

创建 A 的对象 -> A 的构造函数将创建 B 的对象 -> B 的构造函数将创建 A 的对象 -> A 的构造函数将创建 B 的对象，依此类推，直到你的程序崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:53:01.617

如果要创建对象，编译器必须知道定义。前向声明产生不完整的类型。您仅使用前向声明来声明参数（声明函数或原型）或返回指针或引用的类型。您可以只声明构造函数并在已知对象定义时定义它们，如下所示：

```
class Aa {
public:
    Aa();
};

class Bb {
public:
    Bb();
};

Aa::Aa(){
    new Bb;//do something
}
Bb::Bb(){
    new Aa;//do something
} 
```

顺便说一句：小心无限分配堆栈溢出......

# jsf - 无状态 CDI 托管 bean

> ID：15747495
> 
> 赞同：0
> 
> 时间：2013-04-01T16:43:38.550
> 
> 标签：jsf, jsf-2, ejb, cdi

当我部署具有 jsf 2.2 的 WAR 文件时，我在 jboss 上的 JNDI 中找不到 bean，我得到以下异常。有谁知道为什么会这样？（bean 在 JNDI 中，我看到 Jboss 绑定了它，我尝试了各种查找路径）

```
Deployment "vfs:///C:/jboss-6.1.0.Final/server/all/deploy/web.war" is in error due to the following reason(s): java.lang.RuntimeException: Could not resolve @EJB reference: [EJB Reference: beanInterface 'se.questify.services.entities.ExamServiceBase', beanName 'null', mappedName 'null', lookupName
 'null', owning unit 'AbstractVFSDeploymentContext@1298976756{vfs:///C:/jboss-6.1.0.Final/server/all/deploy/web.war}'] for environment entry: env/ExamService/local in unit AbstractVFSDeploymentContext@1298976756{vfs:///C:/jboss-6.1.0.Final/server/all/deploy/web.war} 
```

部署 ejb.jar 时的 Jboss 堆栈

```
INFO  [org.jboss.ejb3.nointerface.impl.jndi.AbstractNoInterfaceViewBinder] Binding the following entry in Global JNDI for bean:ExamServiceBase

        ExamServiceBase/no-interface -> EJB3.1 no-interface view 
```

EJB

```
@Stateless
@Named("examServiceBase")
public class ExamServiceBase{

    public String getHello(){
        return "hello";
    }
} 
```

JSF 代码

```
<h:body>    
    <h1>JSF 2 Demo</h1>
    <h:form>
        <h:outputLabel value="#{examServiceBase.hello}" />
    </h:form>
</h:body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:48:05.753

你不能两者兼得。你不能同时拥有`@Named`和`@Stateless`，它们是互斥的。[来自甲骨文：](http://docs.oracle.com/javaee/6/tutorial/doc/gjfzi.html)

> 如果满足以下所有条件，则顶级 java 类是托管 bean：
> 
> *   它没有使用 EJB 组件定义注解进行注解，也没有在*ejb-jar.xml中声明为 EJB bean 类*

# ios - iOS：测试设备以允许访问照片库...重置设置

> ID：15747496
> 
> 赞同：0
> 
> 时间：2013-04-01T16:43:40.423
> 
> 标签：ios, photolibrary

我正在测试我的应用程序，其中一部分允许用户拍照并保存。当屏幕上出现警告要求我让我的应用程序访问照片库时，我不小心点击了“否”（愚蠢的触摸功能：D）。现在每次运行应用程序时，我都无法保存图像。有没有办法重置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:46:56.590

只需在设置中打开访问权限即可。设置->隐私->照片->你的应用。

# java - Java中的对象数组列表

> ID：15747501
> 
> 赞同：-4
> 
> 时间：2013-04-01T16:43:55.973
> 
> 标签：java, generics, arraylist

我正在尝试创建一个使用相同抽象类的不同类的数组列表。

但是，我收到此错误。

`<identifier> expected, illegal start of type, package list does not exist.`

都在图里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:47:25.583

您`list.add`不是在构造函数或方法中发生，而只是在您的类中浮动，这是不允许的。如果您需要它在类实例化时发生，请尝试将其放入构造函数中，或者创建一个方法以将传递给它的参数添加到您的`list`.

[或者用于内联实例化：（但请务必查看双括号初始化](https://stackoverflow.com/questions/924285/efficiency-of-java-double-brace-initialization)的优缺点）

例如

```
public class TestEmployee {

    private ArrayList<Employee> list = new ArrayList<Employee>() {{
        add(new SalariedEmployee...);
        add(new SalariedEmployee...);
    }}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:51:17.177

其实我看到你的图片，发现你正在尝试在方法或块之外添加ArrayList中的元素。

而不是这个在方法中写这个。

```
public void method() {
   list.add(.........);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:56:00.327

列表类型应为：

```
ArrayList <? extends Employee> list = new ArrayList<>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:47:23.433

您没有将这些语句包装在任何方法中。字段的实例化`list`很好，但是给它分配一些值？不。把它放在一个块或方法中。

# .net - 全景背景水平拉伸

> ID：15747504
> 
> 赞同：1
> 
> 时间：2013-04-01T16:43:56.990
> 
> 标签：.net, xaml, windows-phone-8, panorama-control

我正在尝试使用以下代码为全景控制设置背景：

```
<phone:Panorama.Background>
    <ImageBrush ImageSource="{Binding BgImage}" Stretch="UniformToFill"></ImageBrush>
</phone:Panorama.Background> 
```

一旦应用程序启动，BgImage 属性就会被填充。图像因设备的屏幕分辨率而异。问题是，一旦设置了背景，它就会被女巫缩小到单个屏幕宽度。因此，当我滑动到下一个项目时，背景不会移动。

看起来[这个](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/0743ee59-f407-4e8a-afc8-93569698a924/)错误是针对 wp 7.1 的。它在 wp8 中修复了吗？如果此类错误仍未修复，如何根据设备分辨率设置不同的图像？

# python - 在 response().read() 中搜索具体信息

> ID：15747505
> 
> 赞同：0
> 
> 时间：2013-04-01T16:43:57.190
> 
> 标签：python, python-2.7, mechanize, httpresponse

我正在尝试确定表单是否使用正确提交`Mechanize Python library`。如何在返回的网站中搜索特定文本？例如，我想检查网站是否包含文本：**“正确提交”**，然后打破循环（或做任何其他事情......）

**这是我的代码的一部分：**

```
try:
br.open(url)
br.select_form(nr=0)
br.form['email'] = MAIL
br.submit()

print br.response().read()
except HTTPError, e:
    print "Error: ", e.code
finally:
    test= 0.0
    test1= [] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:08:04.087

你也可以使用`if 'foo' in string_variable: print('yes')`

# python-2.7 - 从包含大量多边形的单个 kml 文件中解析坐标

> ID：15747506
> 
> 赞同：0
> 
> 时间：2013-04-01T16:44:00.540
> 
> 标签：python-2.7, kml, pykml

我有这个kml，文件很长，我已经设法从一个多边形中获取坐标。但我的循环似乎没有转移到下一个多边形。有没有办法“指向”下一个多边形，所以我可以从中获取坐标？谢谢

PS我已经从stackoverflow中一些问题的代码中获取了部分代码

```
from pykml import parser
import os, zipfile, os.path
from zipfile import ZipFile as zip

mapCoords = [[]]

def extractAll(zipName):
    z = zip(zipName)
    for f in z.namelist():
        if f.endswith('/'):
             os.makedirs(f)
        else:
             z.extract(f)
    return f

doc = parser.parse(extractAll("temp_kmz")).getroot()

for Polygon in doc.Document.Folder.Placemark.MultiGeometry:
    a = 0
    mapCoords[a].append(doc.Document.Folder.Placemark.MultiGeometry.Polygon.outerBoundaryIs.LinearRing.coordinates)
    a+=1

print mapCoords 
```

这是kml文件的一部分

```
<MultiGeometry>
    <Polygon>
      <outerBoundaryIs><LinearRing><coordinates> 121.077285,14.626314 121.077006,14.626312 121.077009,14.626040 121.077287,14.626043 121.077285,14.626314</coordinates></LinearRing></outerBoundaryIs>
    </Polygon>
    <Polygon>
      <outerBoundaryIs><LinearRing><coordinates> 121.077285,14.626314 121.077563,14.626316 121.077561,14.626587 121.077282,14.626585 121.077285,14.626314</coordinates></LinearRing></outerBoundaryIs>
    </Polygon>
    <Polygon>
      <outerBoundaryIs><LinearRing><coordinates> 121.079236,14.626059 121.079234,14.626330 121.079512,14.626332 121.079510,14.626603 121.079231,14.626601 121.078953,14.626599 121.078955,14.626328 121.078958,14.626057 121.079236,14.626059</coordinates></LinearRing></outerBoundaryIs>
    </Polygon>
    <Polygon>
      <outerBoundaryIs><LinearRing><coordinates> 121.077561,14.626587 121.077839,14.626590 121.077837,14.626861 121.077834,14.627132 121.077556,14.627129 121.077558,14.626858 121.077561,14.626587</coordinates></LinearRing></outerBoundaryIs>
    </Polygon>
    <Polygon>
      <outerBoundaryIs><LinearRing><coordinates> 121.125000,14.627245 121.125000,14.627516 121.124887,14.627515 121.124890,14.627244 121.125000,14.627245</coordinates></LinearRing></outerBoundaryIs>
    </Polygon> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-09T06:39:45.763

问题在于您如何调用有关 MultiGeometry 的属性，您必须按以下方式调用：

```
for Poly in doc.Document.Folder.Placemark.MultiGeometry.Polygon:

      mapCoords[a].append(Poly.outerBoundaryIs.LinearRing.coordinates) 
```

用“多边形”

# javadoc - 我使用 Lombok 项目，但 getter 和 setter 没有 JavaDoc

> ID：15747507
> 
> 赞同：8
> 
> 时间：2013-04-01T16:44:01.133
> 
> 标签：javadoc, lombok

我使用 Lombok 项目，但 getter 和 setter 没有 JavaDoc。

如何激活此选项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:31:01.370

0.12.0 版本中有一个初始实现。默认情况下，该字段上的 javadoc 的整个内容将被复制到 getter 和 setter。Getter 将获得返回位；设置参数位。这些将从现场的 javadoc 中删除。使用节，您甚至可以指定不同的 getter/setter javadoc。

这仅在您在生成 javadoc 之前对代码进行 delombok 时有效，并且可能永远不会在 eclipse 中工作。

对于当前语法，请查看[功能请求](https://code.google.com/p/projectlombok/issues/detail?id=59)的文档。

完全披露：我是[Lombok 项目](http://projectlombok.org)的开发人员之一。

# php - 如何构建最有效的 MySQL 查询

> ID：15747511
> 
> 赞同：0
> 
> 时间：2013-04-01T16:44:07.687
> 
> 标签：php, mysql

我想知道是否有人可以帮助我找到从具有共同 ID 的两个表中提取数据的最有效方法。

一个简单的例子是我有两个表；具有以下字段的客户和消息：

**客户** - id、名字、姓氏

**消息** - customer_id，消息

关系是客户表只有一个具有唯一 id 的条目，但消息表可以为每个客户提供多条消息。

在 PHP 页面上，我想在页面顶部显示客户姓名，然后显示该客户的所有消息。

目前，我正在使用以下两个查询：

```
$q1 = mysql_query("SELECT * FROM customers WHERE id='123'");
while($row1= mysql_fetch_assoc($q1)){
    echo "$row1[firstname] $row1[surname]";
}

$q2 = mysql_query("SELECT * FROM messages WHERE customer_id='123'");
while($row2= mysql_fetch_assoc($q2)){
    echo "$row2[message]";
} 
```

这是我想要实现的目标的简化版本，但我想知道是否有一种方法可以通过一个查询来做到这一点。我在这里搜索时看到了 JOIN 和 UNION 函数（但从未使用过它们），但看不到这些函数如何允许我在所有消息中只显示一次客户名称。如果这些来自一个查询并且有 10 条消息，那么客户名称将重复 10 次？

不确定我在那里是否完全理解，但任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:46:18.550

确保在两个表上都有适当的索引

```
SELECT customers.name,
       messages.*
  FROM customers
  LEFT JOIN messages
         ON messages.customer_id = customers.id
 WHERE customers.id = 123 
```

# websocket - Ruby Websocket 端点、EventMachine、Goliath 等

> ID：15747513
> 
> 赞同：3
> 
> 时间：2013-04-01T16:44:11.457
> 
> 标签：websocket, url-routing, eventmachine, endpoint

我对使用 web sockets 还是很陌生，但我很享受到目前为止所做的一切。

我的应用程序当前根据最初建立连接的路径设置了 3 个端点。

**端点 #1** - 用户可以连接并且只能接收消息。

**EndPoint #2** - 可以将消息发送给特定用户。

**EndPoint #3** - 返回哪些用户已连接以及每个用户有多少连接的状态。

我找不到任何可以说明我正在尝试做的事情（路由）的好的教程或示例。这让我觉得我可能不正确地处理这个问题。但是，我的应用程序似乎一切正常。

这是我的路由器的示例：`router.rb`

```
class Router

    def setup
        @@connections ||= {}
        @@sockets ||= {}
        @response_servers = {
            "connect" => ConnectionPool.new,
            "status" => StatusServer.new,
            "message" => MessageServer.new
        }
    end

    def onopen(socket, handshake)
        @@connections[socket] = handshake 
        get_response_server(socket).onopen(socket)
    end

    def onmessage(socket, message)
        get_response_server(socket).onmessage(socket, message)
    end

    def onclose(socket)
        get_response_server(socket).onclose(socket)
    end

    def get_response_server(socket)
        uri = URI(@@connections[socket].path)
        case uri.path
        when "/status"
            return @response_servers["status"]
        when "/send_message"
            return @response_servers["message"]
        when "/"
            return @response_servers["connect"]
        end
    end
end 
```

这是负责处理状态 EndPoint #3 的类之一：`status_server.rb`

```
class StatusServer < Router
    def onopen(socket)
        puts "StatusServer onopen"
    end

    def onmessage(socket, message)
        puts "StatusServer onmessage => Recieved message: #{message}"
        socket.send get_connected_users.to_s
    end

    def onclose(socket)
        puts "StatusServer onclose"
    end

    def get_connected_users
        connected_users = {}

        @@sockets.each do |key, value|
            if value.count > 0 then
                connected_users[key] = value.count
            end
        end
        connected_users
    end
end 
```

我是否以正确/建议的方式解决这个问题？我正在做任何不安全的事情——就异​​步而言？

我也调查过`Goliath`，但他们似乎已经从那里的项目中删除了路由器......

# python - 在python中合并2个具有重复坐标的排序文件的有效方法

> ID：15747515
> 
> 赞同：0
> 
> 时间：2013-04-01T16:44:16.180
> 
> 标签：python, merge, duplicates, coordinates, sorted

我对 Python 比较陌生，并尝试使用它来合并两个包含 4 列的排序文件：

文件 1：

```
x-coordinate, y-coordinate, data 1, data 2  
1, 10, 20, 0  
5, 15, 1, 2  
... 
```

文件 2：

```
x-coordinate, y-coordinate, data 3, data 4  
1, 10, 7, 8  
3, 25, 1, 2  
... 
```

放入一个包含 6 列的单个排序文件，其中包含每个唯一的 (x,y) 坐标集：

```
x-coordinate, y-coordinate, data 1, data 2, data 3, data 4  
1, 10, 20, 0, 7, 8  
3, 25, 0, 0, 1, 2  
5, 15, 1, 2, 0, 0 
```

如果仅输出文件的顺序无关紧要，我认为使用字典这项任务将是微不足道的。由于我的输入文件有 100 行长，我试图想出一种有效的“pythonic”方式来处理重复的情况（即，两个文件中都存在相同的 (x,y) 坐标），但到目前为止我难住了。

任何和所有的帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T16:55:16.800

我可能会使用这样`defaultdict`的东西：

```
from collections import defaultdict
from itertools import chain   

d = defaultdict(lambda:[0,0,0,0])
with open('file1') as f1, open('file2') as f2:
    next(f1) #get rid of header info
    next(f2)
    for line1,line2 in zip(f1,f2):
        data1 = [int(x) for x in line1.split(',')]
        data2 = [int(x) for x in line2.split(',')]
        d[tuple(data1[:2])][:2] = data1[2:]
        d[tuple(data2[:2])][2:] = data2[2:]

#now sort the items and write them out:
#This puts them in stdout, but you could easily use `file.write` here.
for k,v in sorted(d.items()):
    print(', '.join(str(x) for x in chain(k,v))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:06:35.943

使用[熊猫](http://pandas.pydata.org)：

```
import pandas as pd

df1 = pd.read_csv("coord1.csv")
df2 = pd.read_csv("coord2.csv")
combined = df1.merge(df2, how='outer').fillna(0)
combined.sort(list(combined.columns[:2]), inplace=True)
combined.to_csv("coord_merged.csv",index=False) 
```

* * *

首先，读入原始数据：

```
>>> import pandas as pd
>>> df1 = pd.read_csv("coord1.csv")
>>> df2 = pd.read_csv("coord2.csv")
>>> df1
   x-coordinate   y-coordinate   data 1   data 2
0             1             10       20        0
1             5             15        1        2
>>> df2
   x-coordinate   y-coordinate   data 3   data 4  
0             1             10        7          8
1             3             25        1          2 
```

合并它们，并用零填充缺失的数据：

```
>>> combined = df1.merge(df2, how='outer')
>>> combined
   x-coordinate   y-coordinate   data 1   data 2   data 3   data 4  
0             1             10       20        0        7          8
1             5             15        1        2      NaN        NaN
2             3             25      NaN      NaN        1          2
>>> combined = df1.merge(df2, how='outer').fillna(0)
>>> combined
   x-coordinate   y-coordinate   data 1   data 2   data 3   data 4  
0             1             10       20        0        7          8
1             5             15        1        2        0          0
2             3             25        0        0        1          2 
```

种类：

```
>>> combined.sort(list(combined.columns[:2]), inplace=True)
>>> combined
   x-coordinate   y-coordinate   data 1   data 2   data 3   data 4  
0             1             10       20        0        7          8
2             3             25        0        0        1          2
1             5             15        1        2        0          0 
```

最后写出：

```
>>> combined.to_csv("coord_merged.csv",index=False)
>>> !cat coord_merged.csv
x-coordinate, y-coordinate, data 1, data 2, data 3, data 4  
1.0,10.0,20.0,0.0,7.0,8.0
3.0,25.0,0.0,0.0,1.0,2.0
5.0,15.0,1.0,2.0,0.0,0.0 
```

如果保持整数格式很重要，那么

```
>>> combined.astype(int).to_csv("coord_merged.csv",index=False)
>>> !cat coord_merged.csv
x-coordinate, y-coordinate, data 1, data 2, data 3, data 4  
1,10,20,0,7,8
3,25,0,0,1,2
5,15,1,2,0,0 
```

会做的。

# java - 数组空指针异常错误

> ID：15747516
> 
> 赞同：5
> 
> 时间：2013-04-01T16:44:16.847
> 
> 标签：java, arrays, class, nullpointerexception

我正在继续我的学校项目，似乎遇到了另一个错误。所以发生的事情基本上是我收到一个空指针异常，即使代码看起来不错。我相信我的数组有问题，即使经过数小时的搜索，我似乎也找不到错误。再次，任何帮助/解决方案将不胜感激。

```
import java.util.*;

public class library {

private static students stu1 = new students(65435, "Bob", "Ted");
private static students stu2 = new students(45546, "Guy", "Sid");
private static students stu3 = new students(78688, "Tim", "Cas");
private static students stu4 = new students(45387, "Guy", "Jim");
private static students stu5 = new students(12367, "Dom", "Lam");
private static students stu6 = new students(45905, "Kid", "Loo");
private static students stu7 = new students(65484, "Mut", "Hum");
private static students stu8 = new students(34578, "Kim", "Hay");
private static students stu9 = new students(20457, "Roy", "Boy");
private static students stu0 = new students(15678, "Kil", "Bil");

private static students[] studentArray;
private static students[] stuArrayAlt;
private static boolean firstArrayStu = true;

// private static books bookName = new books("title",
// "author","category","isbn", cost, rating out of 10);

private static books book1 = new books(
        "Harry Potter and the Deathly Hallows", "JK Rowling", "fantasy",
        "9780739360385", 30.00, 9.0);
private static books book2 = new books("Angels and Demons", "Dan Brown",
        "fiction", "9780828855495", 25.00, 8.5);
private static books book3 = new books("The Hunger Games",
        "Suzanne Collins", "science fiction", "9780439023481", 20.00, 8.0);
private static books book4 = new books("A Game of Thrones",
        "George R R Martin", "fantasy", "9780002245845", 54.50, 12.5);
private static books book5 = new books("title2", "author2", "category2",
        "isbn2", 54.50, 12.5);
private static books book6 = new books("title2", "author2", "category2",
        "isbn2", 54.50, 12.5);
private static books book7 = new books("title2", "author2", "category2",
        "isbn2", 54.50, 12.5);
private static books book8 = new books("title2", "author2", "category2",
        "isbn2", 54.50, 12.5);
private static books book9 = new books("title2", "author2", "category2",
        "isbn2", 54.50, 12.5);
private static books book0 = new books("title2", "author2", "category2",
        "isbn2", 54.50, 12.5);

private static books[] bookArray;
private static books[] bookArrayAlt;
private static boolean firstArrayBook;

private static int year1;
private static int month1;
private static int date1;

public library() {
    bookArray = new books[] { book1, book2, book3, book4, book5, book6,
            book7, book8, book9, book0 };
    firstArrayBook = true;

    studentArray = new students[] { stu1, stu2, stu3, stu4, stu5, stu6,
            stu7, stu8, stu9, stu0 };
    firstArrayStu = true;
}

public static void main(String[] args) {
    // System.out.println(stu1.getStuNum() + " " + stu1.getFirstName() +
    // " "+ stu1.getLastName());

    // books[] bookReturn = stu1.insertBook(book1);
    // System.out.println(book1.getCheckInLibrary());
    // System.out.println(book1.getCheckInLibrary());

    // System.out.println(bookReturn[0].getName());

    // books[] bookReturn2 = stu1.insertBook(book2);
    // System.out.println(book2.getCheckInLibrary());
    // System.out.println(book2.getCheckInLibrary());
    // stu1.insertBook(book1);

    // checkOutBook(stu1,book1);
    // System.out.println(stu1);
    // stu1=null;
    // System.out.println(stu1);

    /*
     * stu1.lostBookFine(book1); System.out.println(stu1.getFineBalance());
     * stu1.lostBookFine(book2); System.out.println(stu1.getFineBalance());
     */

    int[] a = new int[] { 1, 2, 3, 4, 5 };
    int[] b = new int[(a.length) + 1];

    System.arraycopy(a, 0, b, 0, a.length);
    b[a.length] = 6;
    // for(int i=0;i<b.length;i++)
    // {
    // System.out.println(b[i]);
    // }

    /*
     * int[] c = new int[]{1,2,3,4,5,6}; b = new int[(c.length)+1];
     * 
     * System.arraycopy( c, 0, b, 0, c.length ); b[c.length]=7;
     * 
     * for(int i=0;i<b.length;i++) { System.out.println(b[i]); }
     */

    // int[] date = enterDate();
    // int[] date2 = book1.addTwoWeeks(date);
    // int[]date2= book1.getDateDue();

    System.out.println(studentArray[0].getFirstName());

    //boolean array=checkStuNum(45456);
    //System.out.println(array);

    //students[]array=lookUpLastName("sid");
    //array[0].getFirstName();

}

public static void returnBook(students borrower, books bookReturn) {

}

public static books[] lookUpTitleBooks(String title)// //////////////interchange
                                                    // the array-boolean
                                                    // firstArrayBook--two
                                                    // if statements
{

    int counter = 0;
    for (int i = 0; i < bookArray.length; i++) {
        if (title.equalsIgnoreCase(bookArray[i].getTitle())
                || ((bookArray[i].getTitle().toLowerCase())).contains(title
                        .toLowerCase())) {
            counter++;
        }
    }
    books[] booksLookUp = new books[counter];
    int counterS = 0;
    for (int i = 0; i < bookArray.length; i++) {
        if (title.equalsIgnoreCase(bookArray[i].getTitle())
                || ((bookArray[i].getTitle().toLowerCase())).contains(title
                        .toLowerCase())) {
            booksLookUp[counterS] = bookArray[i];
            counterS++;
        }
    }

    return booksLookUp;
}

// look up last name of student
public static students[] lookUpLastName(String lName) {

    students[] studentlName = new students[1] ;

    if (firstArrayStu == true) {
        int counter = 0;
        System.out.println("check");
        for (int i = 0; i < studentArray.length; i++) {
            if (lName.equalsIgnoreCase(studentArray[i].getLastName())   || ((studentArray[i].getLastName()).contains(lName.toLowerCase())) ){
                counter++;
                System.out.println("check if");

            }
            System.out.println("check for");

        }
        studentlName = new students[counter];
        int counterS = 0;
        for (int i = 0; i < studentArray.length; i++) {
            if (lName.equalsIgnoreCase(studentArray[i].getFirstName())
                    || ((studentArray[i].getFirstName().toLowerCase()))
                            .contains(lName.toLowerCase())) {
                studentlName[counterS] = studentArray[i];
                counterS++;
            }
        }
    }

    if (firstArrayStu == false) {
        int counter = 0;
        for (int i = 0; i < stuArrayAlt.length; i++) {
            if (lName.equalsIgnoreCase(stuArrayAlt[i].getFirstName())
                    || ((stuArrayAlt[i].getFirstName().toLowerCase()))
                            .contains(lName.toLowerCase())) {
                counter++;
            }
        }
        studentlName = new students[counter];
        int counterS = 0;
        for (int i = 0; i < stuArrayAlt.length; i++) {
            if (lName.equalsIgnoreCase(stuArrayAlt[i].getFirstName())
                    || ((stuArrayAlt[i].getFirstName().toLowerCase()))
                            .contains(lName.toLowerCase())) {
                studentlName[counterS] = stuArrayAlt[i];
                counterS++;
            }
        }
    }

    return studentlName;
}

public static void checkOutBook(students borrower, books bookBorrow) {

    boolean canBorrow1 = checkFine(borrower);
    boolean canBorrow2 = checkBorrowedBooks(borrower);
    boolean canBorrow3 = checkBorrowedBooks(bookBorrow);

    if (canBorrow1 == false) {
        System.out.println("Your fine is too damn high");// alert window and
                                                            // redirect to
                                                            // main menu-so
                                                            // he/she can
                                                            // pay it if he
                                                            // wants to
    }
    if (canBorrow2 == false) {
        System.out.println("Your already have 3 books checked out");// alert
                                                                    // window
                                                                    // and
                                                                    // redirect
                                                                    // to
                                                                    // main
                                                                    // menu-
                                                                    // so
                                                                    // he/she
                                                                    // can
                                                                    // return
                                                                    // a
                                                                    // book
                                                                    // if he
                                                                    // wants
                                                                    // to
    }
    if (canBorrow1 == false) {
        System.out.println("This book has been checkd out");// alert window
                                                            // and redirect
                                                            // to main menu-
                                                            // so he/she can
                                                            // look for
                                                            // another book
                                                            // and check it
                                                            // out
    }
    if (canBorrow1 && canBorrow2 && canBorrow3) {
        borrower.insertBook(bookBorrow);
        bookBorrow.checkOutStatusChange();
        // alert window to show successful check out and redirect to main
        // menu
    }

}

public static boolean checkFine(students borrower) {
    boolean canBorrow1 = borrower.checkBorrowedBooks(borrower
            .getBookArray());
    return canBorrow1;
}

public static boolean checkBorrowedBooks(students borrower) {
    boolean canBorrow2 = borrower.checkFine(borrower);
    return canBorrow2;
}

public static boolean checkBorrowedBooks(books bookBorrow) {
    boolean canBorrow3 = bookBorrow.getCheckInLibrary();
    return canBorrow3;
}

public static int[] enterDate() {
    Scanner input = new Scanner(System.in);
    boolean dateTrue = false;

    int year, month, date;

    while (dateTrue == false) {

        System.out.println("Enter year");
        year = input.nextInt();

        System.out.println("Enter month");
        month = input.nextInt();

        System.out.println("Enter date");
        date = input.nextInt();

        // checking first date----------------------------------------
        year1 = ((year >= 2010) ? year : 0);

        month1 = ((month >= 1 && month <= 12) ? month : 0);

        if (month1 == 1) {
            date1 = ((date >= 1 && date <= 31) ? date : 0);
        }

        if (month1 == 2 && (year1 % 4) != 0) {
            date1 = ((date >= 1 && date <= 28) ? date : 0);
        }

        if (month1 == 2 && (year1 % 4) == 0) {
            date1 = ((date >= 1 && date <= 29) ? date : 0);
        }

        if (month1 == 3) {
            date1 = ((date >= 1 && date <= 31) ? date : 0);
        }

        if (month1 == 4) {
            date1 = ((date >= 1 && date <= 30) ? date : 0);
        }

        if (month1 == 5) {
            date1 = ((date >= 1 && date <= 31) ? date : 0);
        }

        if (month1 == 6) {
            date1 = ((date >= 1 && date <= 30) ? date : 0);
        }

        if (month1 == 7) {
            date1 = ((date >= 1 && date <= 31) ? date : 0);
        }

        if (month1 == 8) {
            date1 = ((date >= 1 && date <= 31) ? date : 0);
        }

        if (month1 == 9) {
            date1 = ((date >= 1 && date <= 30) ? date : 0);
        }

        if (month1 == 10) {
            date1 = ((date >= 1 && date <= 31) ? date : 0);
        }

        if (month1 == 11) {
            date1 = ((date >= 1 && date <= 30) ? date : 0);
        }

        if (month1 == 12) {
            date1 = ((date >= 1 && date <= 31) ? date : 0);
        }

        if (month1 == 0 || date1 == 0 || year1 == 0) {
            // do nothing boolean remains false
            // put alert window here
        } else {
            dateTrue = true;
        }
    }

    int[] dates = { year1, month1, date1 };
    return dates;
}

public void createStudent(int stuNum, String fName, String lName) {
    if (firstArrayStu == true) {

        for (int i = 0; i < studentArray.length; i++) {
            if (studentArray[i] == null) {
                studentArray[i] = new students(stuNum, fName, lName);

            } else if (i == (studentArray.length - 1)) {
                stuArrayAlt = new students[studentArray.length + 1];
                System.arraycopy(studentArray, 0, stuArrayAlt, 0,
                        studentArray.length);
                stuArrayAlt[studentArray.length] = new students(stuNum,
                        fName, lName);
                firstArrayStu = false;
            }
        }

    } else if (firstArrayStu == false) {
        for (int i = 0; i < stuArrayAlt.length; i++) {
            if (stuArrayAlt[i] == null) {
                stuArrayAlt[i] = new students(stuNum, fName, lName);

            } else if (i == (stuArrayAlt.length - 1)) {
                studentArray = new students[stuArrayAlt.length + 1];
                System.arraycopy(stuArrayAlt, 0, stuArrayAlt, 0,
                        stuArrayAlt.length);
                studentArray[stuArrayAlt.length] = new students(stuNum,
                        fName, lName);
                firstArrayStu = true;
            }
        }
    }
}

public static void createBook(String name, String author, String category,
        String isbn, double cost, double sRating) {

    if (firstArrayBook == true) {
        for (int i = 0; i < bookArray.length; i++) {
            if (bookArray[i] == null) {
                bookArray[i] = new books(name, author, category, isbn,
                        cost, sRating);

            } else if (i == (bookArray.length - 1)) {
                bookArrayAlt = new books[bookArray.length + 1];
                System.arraycopy(bookArray, 0, bookArrayAlt, 0,
                        bookArray.length + 1);
                bookArrayAlt[bookArray.length] = new books(name, author,
                        category, isbn, cost, sRating);
                firstArrayBook = false;
            }
        }
    }

    else if (firstArrayBook == false) {
        for (int i = 0; i < bookArrayAlt.length; i++) {
            if (bookArrayAlt[i] == null) {
                bookArrayAlt[i] = new books(name, author, category, isbn,
                        cost, sRating);

            } else if (i == (bookArrayAlt.length - 1)) {
                bookArray = new books[bookArrayAlt.length + 1];
                System.arraycopy(bookArrayAlt, 0, bookArray, 0,
                        bookArrayAlt.length + 1);
                bookArray[bookArrayAlt.length] = new books(name, author,
                        category, isbn, cost, sRating);
                firstArrayBook = false;
            }
        }
    }
}

public static boolean deleteStudent(String lName, int stuNum) {
    students[] arrayLookedUp = lookUpLastName(lName);
    boolean deleted = false;
    for (int i = 0; i < arrayLookedUp.length; i++) {
        if ((arrayLookedUp[i].getStuNum()) == stuNum) {
            System.out.println("checker");
            if (firstArrayStu == true) {
                for (int j = 0; j < studentArray.length; j++) {
                    if (arrayLookedUp[i] == studentArray[j]) {
                        studentArray[j] = null;
                        deleted = true;
                        break;
                    }
                }
                break;

            } else if (firstArrayStu == false) {
                for (int j = 0; j < stuArrayAlt.length; j++) {
                    if (arrayLookedUp[i] == stuArrayAlt[j]) {
                        stuArrayAlt[j] = null;
                        deleted = true;
                        break;
                    }
                }
            }
        } else if (i == (arrayLookedUp.length - 1)) {
            deleted = false;
        }
    }

    return deleted;
}

public static boolean checkStuNum(int stuNum) {

    // private static students[] studentArray;
    // private static students[] stuArrayAlt;
    // private static boolean firstArrayStu=true;
    boolean stuNumNew = false;

    System.out.println("test");
    if (firstArrayStu == true) {
        for (int i = 0; i < studentArray.length; i++) {
            System.out.println("false");

            if ((studentArray[i].getStuNum()) == stuNum) {
                System.out.println("true");

                stuNumNew = true;

                break;
            }
        }
    }

    else if (firstArrayStu == false) {
        for (int i = 0; i < stuArrayAlt.length; i++) {
            if ((stuArrayAlt[i].getStuNum()) == stuNum) {
                stuNumNew = true;

                break;
            }
        }
    }

    return stuNumNew;
} 
```

}

我有一个带有构造函数的学生类，以及一个声明

```
public String getFirstName() {
        return fName;
    } 
```

但我仍然收到错误消息。我知道要处理很多代码，因此再次非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T16:46:32.050

由于您的代码目前正在编写，

```
System.out.println(studentArray[0].getFirstName()); 
```

将抛出 NPE，因为您从未初始化数组。

```
private static students[] studentArray; 
```

只声明它，不初始化它。

也许你应该重构你的代码如下

```
private static ArrayList<students> studentArray = new ArrayList<students>();

// Inside the constructor or some method called before you access studentArray:
studentArray.add(stu1);
studentArray.add(stu2);
//...

// or, more concisely, since you're not using the temporary `students` variables:
studentArray.add(new students(65435, "Bob", "Ted"));
studentArray.add(new students(45546, "Guy", "Sid"));
//... 
```

如果您致力于使用数组而不是列表，

```
private static students[] studentArray; 
```

需要用类似的东西初始化

```
private static students[] studentArray = new students[10]; 
```

然后你需要分配它的元素

```
studentArray[0] = stu1; 
```

或者

```
studentArray[0] = new students(65435, "Bob", "Ted"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T16:50:22.093

在尝试访问它之前，您应该始终创建一个对象。您已经声明了一个指向数组的引用：

```
private static students[] studentArray; 
```

但从未将任何对象分配给引用。因此你得到一个 NullPointerException。

用这个 ：

```
private static students[] studentArray = new students[size]; 
```

上面的代码将创建一个由引用变量（studentArray）指向的新对象（学生数组）。或者

您可以使用比数组更有效的[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)或[Set 。](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)

# c# - 在 CUDA 中返回数组的最小和最大元素

> ID：15747519
> 
> 赞同：2
> 
> 时间：2013-04-01T16:44:30.917
> 
> 标签：c#, cuda, cudafy.net

我正在 CUDA 中执行一些数组操作/计算（通过[Cudafy.NET 库](http://www.hybriddsp.com/Products/CUDAfyNET.aspx)，尽管我对 CUDA/C++ 方法同样感兴趣），并且需要计算数组中的最小值和最大值。其中一个内核如下所示：

```
 [Cudafy]
    public static void UpdateEz(GThread thread, float time, float ca, float cb, float[,] hx, float[,] hy, float[,] ez)
    {
        var i = thread.blockIdx.x;
        var j = thread.blockIdx.y;

        if (i > 0 && i < ez.GetLength(0) - 1 && j > 0 && j < ez.GetLength(1) - 1)
            ez[i, j] =
                ca * ez[i, j]
                + cb * (hx[i, j] - hx[i - 1, j])
                + cb * (hy[i, j - 1] - hy[i, j])
                ;
    } 
```

我想做这样的事情：

```
 [Cudafy]
    public static void UpdateEz(GThread thread, float time, float ca, float cb, float[,] hx, float[,] hy, float[,] ez, out float min, out float max)
    {
        var i = thread.blockIdx.x;
        var j = thread.blockIdx.y;

        min = float.MaxValue;
        max = float.MinValue;

        if (i > 0 && i < ez.GetLength(0) - 1 && j > 0 && j < ez.GetLength(1) - 1)
        {
            ez[i, j] =
                ca * ez[i, j]
                + cb * (hx[i, j] - hx[i - 1, j])
                + cb * (hy[i, j - 1] - hy[i, j])
                ;

            min = Math.Min(ez[i, j], min);
            max = Math.Max(ez[i, j], max);

        }
    } 
```

任何人都知道返回最小值和最大值的便捷方法（对于整个数组，而不仅仅是每个线程或块）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-25T13:49:36.207

如果您正在编写电磁波模拟器并且不想重新发明轮子，您可以使用`thrust::minmax_element`. 下面我将报告一个关于如何使用它的简单示例。请添加您自己的 CUDA 错误检查。

```
#include <stdio.h>

#include <cuda_runtime_api.h>

#include <thrust\pair.h>
#include <thrust\device_vector.h>
#include <thrust\extrema.h>

int main()
{
    const int N = 5;

    const float h_a[N] = { 3., 21., -2., 4., 5\. };

    float *d_a;     cudaMalloc(&d_a, N * sizeof(float));
    cudaMemcpy(d_a, h_a, N * sizeof(float), cudaMemcpyHostToDevice);

    float minel, maxel;
    thrust::pair<thrust::device_ptr<float>, thrust::device_ptr<float>> tuple;
    tuple = thrust::minmax_element(thrust::device_pointer_cast(d_a), thrust::device_pointer_cast(d_a) + N);
    minel = tuple.first[0];
    maxel = tuple.second[0];

    printf("minelement %f - maxelement %f\n", minel, maxel);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:20:03.177

[您可以使用分而治之](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)的方法开发自己的最小/最大算法。

如果你有可能使用 npp，那么这个函数可能很有用：[nppsMinMax_32f](http://graphics.im.ntu.edu.tw/~bossliaw/nvCuda_doxygen/html/group__npps.html#gaf2cf23761d6c8b0be43ca3c8cdbe6277)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T00:34:08.860

根据您对问题的评论，您试图在计算最大值和最小值时找到它们；虽然有可能，但它并不是最有效的。如果您打算这样做，那么您可以与一些全局最小值和全局最大值进行原子比较，缺点是每个线程都将被序列化，这可能是一个重要的瓶颈。

对于通过减少找到数组中的最大值或最小值的更规范的方法，您可以执行以下操作：

```
#define MAX_NEG ... //some small number

template <typename T, int BLKSZ> __global__
void cu_max_reduce(const T* d_data, const int d_len, T* max_val)
{
    volatile __shared__ T smem[BLKSZ];

    const int tid = threadIdx.x;
    const int bid = blockIdx.x;
        //starting index for each block to begin loading the input data into shared memory
    const int bid_sidx = bid*BLKSZ;

    //load the input data to smem, with padding if needed. each thread handles 2 elements
    #pragma unroll
    for (int i = 0; i < 2; i++)
    {
                //get the index for the thread to load into shared memory
        const int tid_idx = 2*tid + i;
        const int ld_idx = bid_sidx + tid_idx;
        if(ld_idx < (bid+1)*BLKSZ && ld_idx < d_len)
            smem[tid_idx] = d_data[ld_idx];
        else
            smem[tid_idx] = MAX_NEG;

        __syncthreads();
    }

    //run the reduction per-block
    for (unsigned int stride = BLKSZ/2; stride > 0; stride >>= 1)
    {
        if(tid < stride)
        {
            smem[tid] = ((smem[tid] > smem[tid + stride]) ? smem[tid]:smem[tid + stride]);
        }
        __syncthreads();
    }

    //write the per-block result out from shared memory to global memory
    max_val[bid] = smem[0];
}

//assume we have d_data as a device pointer with our data, of length data_len
template <typename T> __host__
T cu_find_max(const T* d_data, const int data_len)
{
    //in your host code, invoke the kernel with something along the lines of:
    const int thread_per_block = 16; 
    const int elem_per_thread = 2;
    const int BLKSZ = elem_per_thread*thread_per_block; //number of elements to process per block
    const int blocks_per_grid = ceil((float)data_len/(BLKSZ));

    dim3 block_dim(thread_per_block, 1, 1);
    dim3 grid_dim(blocks_per_grid, 1, 1);

    T *d_max;
    cudaMalloc((void **)&d_max, sizeof(T)*blocks_per_grid); 

    cu_max_reduce <T, BLKSZ> <<<grid_dim, block_dim>>> (d_data, data_len, d_max);

    //etc....
} 
```

这将找到每个块的最大值。您可以在 1 个块上在其输出上再次运行它（例如，使用 d_max 作为输入数据并使用更新的启动参数）以找到全局最大值 - 如果您的数据集太大，则需要像这样以多遍方式运行它（在这种情况下，超过 2 * 4096 个元素，因为我们让每个线程处理 2 个元素，尽管您可以只为每个线程处理更多元素来增加这一点）。

我应该指出，这不是特别有效（在加载共享内存时，您希望使用更智能的步幅以避免银行冲突），而且我不是 100% 确定它是正确的（它适用于一些小我尝试过的测试用例），但我尝试将其编写为最清晰。另外不要忘记输入一些错误检查代码以确保您的 CUDA 调用成功完成，我将它们留在这里以保持简短（呃）。

我还应该指导您阅读一些更深入的文档；您可以在[http://docs.nvidia.com/cuda/cuda-samples/index.html](http://docs.nvidia.com/cuda/cuda-samples/index.html)上查看 CUDA 样本减少，尽管它没有进行最小/最大计算，但它是相同的一般概念（并且更有效）。此外，如果您正在寻找简单性，您可能只想使用 Thrust 的函数`thrust::max_element`和`thrust::min_element`，以及位于以下位置的文档：thrust.github.com/doc/group__extrema.html

# php - fwrite append ，在 php end 之前追加

> ID：15747526
> 
> 赞同：0
> 
> 时间：2013-04-01T16:44:47.137
> 
> 标签：php, fwrite

我想将一个字符串存储到一个 .php 文件中，但它本身就是一个 php 脚本，我想在其中添加数组，但到目前为止我总是像这样附加字符串

```
<?php
$.....
....
?> 
```

但我只想添加内容而不打开和关闭新的代码块。所以只有一个脚本的打开和关闭，因此在文件的实际结尾之前附加。我怎样才能像这样有效地移动指针？

到目前为止，我的功能看起来像这样

```
 $fw = fopen('../Resource/articlelist.php',"a");
 .....
 fwrite ($fw,$diffWrite); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:47:18.047

PHP 解释器不需要`?>`在文件末尾关闭，只需省略它，它就会以同样的方式工作。

* * *

（只是为了回答问题的标题）
对于移动文件资源的内部指针，有[fseek()](http://php.net/manual/en/function.fseek.php)。

```
$fd = fopen('file', 'a');
fseek($fd, -3, SEEK_END); // now the pointer is at the end -3 bytes 
```

您可以创建一个循环，从末尾向后移动读取块并搜索第一个`?>`，如果您想让这个附加更健壮。

# magento - magento URL 访问如何工作

> ID：15747527
> 
> 赞同：0
> 
> 时间：2013-04-01T16:44:52.587
> 
> 标签：magento, url-routing

嗨，我想创建一个自定义表单来获取用户的输入，我可以从 url 访问表单：

```
http://localhost/website/index.php/contest 
```

但是当我将它上传到在 magento 中设置了多个网站的服务器时，我无法像以前在本地服务器上那样访问表单。

[http://www.website.org/index.php/contest](http://www.website.org/index.php/contest)

我被难住了，我撞到了我用谷歌搜索的墙，我只是不知道要寻找什么，任何帮助将不胜感激。提前感谢任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:32:36.990

Magento 路由是一个要在单个 Stack Overflow 答案中涵盖的大主题。您可以在此处阅读有关[设置控制器](http://alanstorm.com/magento_controller_hello_world)的基础知识，以及此处[可能过于深入的路由过程](http://alanstorm.com/category/magento#dispatch)。

也就是说，这里有一些一般的调试技巧。

1.  Magento 可以看到您的控制器所属的模块吗？如果没有，您可能在`app/etc/modules`. （查看`System -> Configuration -> Advanced -> Disable Module Output中的模块列表）

2.  如果您的模块已安装，Magento 可能找不到您的控制器类。Eitehr 因为它不存在，所以你有区分大小写的问题。在函数中添加一些临时调试代码，`_validateControllerClassName`以确定 Magento 找不到您的控制器的原因。

您可以在`_validateControllerClassName`此处找到该功能

```
#File: app/code/core/Mage/Core/Controller/Varien/Router/Standard.php
protected function _validateControllerClassName($realModule, $controller)
{
    $controllerFileName = $this->getControllerFileName($realModule, $controller);
    if (!$this->validateControllerFileName($controllerFileName)) {
        return false;
    }

    $controllerClassName = $this->getControllerClassName($realModule, $controller);
    if (!$controllerClassName) {
        return false;
    }

    // include controller file if needed
    if (!$this->_includeControllerClass($controllerFileName, $controllerClassName)) {
        return false;
    }

    return $controllerClassName;
} 
```

子句之前的一些`var_dump`s`return false`应该告诉您为什么 Magento 无法找到和/或包含您的控制器类文件。

# php - div刷新后滚动到顶部需要停止自动滚动到顶部

> ID：15747536
> 
> 赞同：3
> 
> 时间：2013-04-01T16:45:30.197
> 
> 标签：php, javascript

我正在尝试获取每 2 秒刷新一次的 div，以在 2 秒刷新后停止滚动回顶部我有 PHP 代码和 javascript。我使用的 Javascript 是：

```
function at_Ticket_scrollBottom()
{
   var objDiv = document.getElementById("cartTicket");
   objDiv.scrollTop = objDiv.scrollHeight;
}

function at_Tabs_Update()
{

if(div_WPOSVar_IsVisible())
{
    //calling setTimeout without clearing any existing timeout can add multiple calls.
    //IE the normal 2 second sequence, then call at_Tabs_Update two more times, and
    //     now we have 3 timeouts set to call at_Tabs again, etc.
    //This wouldn't be an issue except that we call at_Tabs_Update directly to cause
    //     immediate refresh from many places.
    //So clear the handle everytime to get rid of the last one we set.
    clearTimeout(at_Tabs_Timer);
    at_Tabs_Timer=setTimeout("at_Tabs_Update()", 2*1000); //every 2 seconds
    return;
}
} 
```

因此，刷新后，如果我向下滚动到票证的底部，它会在下一次刷新后跳回顶部，所以我永远无法到达底部并选择一个项目并在刷新之前对其进行编辑如何停止自动回滚到顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:51:19.297

从我可以在这里收集的疤痕信息中，我认为您最好的选择是在刷新之前和在 ajax 调用滚动到该保存位置之后保存您当前的滚动位置。使用 jQuerys [.scrollTop()](http://api.jquery.com/scrollTop/)函数来读取和设置滚动。

一些用于说明的伪代码：

```
at ajax refresh function
    var curPos $(element).scrollTop();
    ... do ajax call ..
        ajax callback: $(element).scrollTop(curPos); 
```

# ios - iOS：系统声音预览

> ID：15747541
> 
> 赞同：0
> 
> 时间：2013-04-01T16:45:43.573
> 
> 标签：ios, cocoa-touch

我希望这会奏效。我希望能够单击该按钮，并且每次它播放下一个系统声音。它不起作用。

我有一个按钮可以做到这一点：

```
- (IBAction)btnPressed:(id)sender
{
    AudioServicesPlaySystemSound(soundNumber);
    NSLog(@"%d",soundNumber);
    soundNumber++;
} 
```

NB Soundnumber 初始化为 1000，通过[这个站点](http://iphonedevwiki.net/index.php/AudioServices)应该是新邮件通知。NSLog 工作得很好，但我没有得到任何音频。显然我做错了什么，但我不太了解系统声音服务文档..这就是我在这里的原因:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:07:53.360

忘了这个:(

```
#import <AudioToolbox/AudioServices.h> 
```

# android - NETWORK_PROVIDER 的 LocationListener 已启用，但永远不会调用 onLocationChanged

> ID：15747543
> 
> 赞同：42
> 
> 时间：2013-04-01T16:45:52.910
> 
> 标签：android, geolocation, gps, locationmanager, locationlistener

我正在开发一个应用程序，该应用程序可以在服务中 6 分钟和 6 分钟内全天获取手机的位置，它工作正常，但有时`OnLocationChanged`网络提供商侦听器的方法停止被调用，我不知道为什么。

它由于某种原因停止被调用，但是当我手动启用或禁用 Provider 并被调用时，Provider 已启用并且 Lister 正在`onProviderEnabled`工作`onProviderDisabled`。

它只是发生在`NETWORK_PROVIDER`，`GPS_PROVIDER`效果很好。

听众：

```
LocationListener locationListenerGPS = new LocationListener() {
        // @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO locationListenerGPS onStatusChanged
            Log.d(TAG, "Provedor trocado");
        }

        // @Override
        public void onProviderEnabled(String provider) {
            Log.w(TAG, "PROVEDOR " + provider + " HABILITADO!");
        }

        // @Override
        public void onProviderDisabled(String provider) {
            Log.w(TAG, "PROVEDOR " + provider + " DESABILITADO!");
        }

        // @Override
        public void onLocationChanged(Location location) {

            longitudeGPS = location.getLongitude();
            latitudeGPS = location.getLatitude();
            Log.d(TAG,"LocationChangedGPS LAT: "+latitudeGPS+" longi: "+longitudeGPS);
            gpsComSinal = true;
        }
    };

    LocationListener locationListenerNET = new LocationListener() {

        // @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO locationListenerNET onStatusChanged
            Log.d("Contele", "Provedor foi mudado");
        }

        // @Override
        public void onProviderEnabled(String provider) {
            Log.i(TAG, "PROVEDOR " + provider + " HABILITADO!");
        }

        // @Override
        public void onProviderDisabled(String provider) {
            Log.i(TAG, "PROVEDOR " + provider + " DESABILITADO!");
        }

        @Override
        public void onLocationChanged(Location location) {
            longitudeNET = location.getLongitude();
            latitudeNET = location.getLatitude();
            Log.d(TAG,"LocationChangedNET LAT: "+latitudeNET+" longi: "+longitudeNET);
            netComSinal = true;
        }
    }; 
```

代码：

```
public void initProviders() {

        localizacao = (LocationManager) getApplicationContext().getSystemService(LOCATION_SERVICE);

        localizacao.removeUpdates(locationListenerNET);
        localizacao.removeUpdates(locationListenerGPS);

        localizacao.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                locationListenerGPS);

        localizacao.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0,
                0, locationListenerNET);

        Log.d(TAG,"EsperaGPS");
        Handler esperaGPS = new Handler() {
            public void handleMessage(Message msg) {

                requestGPS();
            }
        };

        Message msgEsperaGPS = Message.obtain();
        msgEsperaGPS.what = 0;
        esperaGPS.sendMessageDelayed(msgEsperaGPS, 35000);
    }

    public void requestGPS() {
            if (gpsComSinal) {
                Log.d(TAG,"PEGO SINAL DE GPS");
                rastreio = "GPS";
                longitude = longitudeGPS;
                latitude = latitudeGPS;
                Log.d(TAG, "Utilizando provedor GPS.");
                localizacao.removeUpdates(locationListenerGPS);
                localizacao.removeUpdates(locationListenerNET);

            } else {
                Log.d(TAG,"Sem GPS... pegar NEt");
                // Setando os valores para usar network
                localizacao.removeUpdates(locationListenerGPS);
                localizacao.removeUpdates(locationListenerNET);
                localizacao
                        .requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                                0, 0, locationListenerNET);
                Log.d(TAG,"EsperaNET");

                        requestNET();
            }
        }

    public void requestNET() {
            if (netComSinal) {
                Log.d(TAG,"PEGO SINAL DE NET");
                rastreio = "NET";
                longitude = longitudeNET;
                latitude = latitudeNET;
                Log.d(TAG, "Utilizando provedor NET.");
                localizacao.removeUpdates(locationListenerNET);

            } else {
                localizacao.removeUpdates(locationListenerGPS);
                localizacao.removeUpdates(locationListenerNET);
                Log.d(TAG,"Sem sinal");
            }
        } 
```

三星 Galaxy S3 中的报告： ![在此处输入图像描述](https://i.stack.imgur.com/IehPc.jpg)

仍然连续 4 天获得“Sem sinal”。

Galaxy Y 和 LG Optimus l5 已经出现了这个问题

我进行了另一项测试，看看其他应用程序是否获得了 NET 位置，我发现它们通过了同样的问题，它们无法仅通过 GetLastknowLocation 获得 NET 位置；测试我使用 Galaxy S3 解决了这个问题，并禁用了 GPS Provider。（在 Cerberus 中测试）。

我找不到任何解释为什么 NETWORKSLOCATIONS 听众停止给出位置，但这可能是因为它不应该连续工作 2 或 3 天。

我已经对其他应用程序进行了一些测试，以查看这个问题是否只是在我的应用程序中发生，我发现它们正在通过相同的问题，例如在 Cerberus 中：

我用“Sem sinal”问题禁用了手机（Galaxy S3）中的 GPS 提供程序，看看：

我的报告： ![在此处输入图像描述](https://i.stack.imgur.com/IehPc.jpg)

和 Cerberus（打印于 2013 年 5 月 14 日）报告： ![在此处输入图像描述](https://i.stack.imgur.com/8ojzU.jpg)

但是当我打开谷歌地图时它似乎工作正常，我试图移动到一个较远的地方，看看它是否会显示`GetLastknowLocation`，但是没有，谷歌地图把我放在正确的地方，所以我意识到谷歌Maps 正在使用 motionevent 在地图中移动我；

并打印 Google Maps 的 Log 以获取 NetWorkProvider：

正常情况：

![在此处输入图像描述](https://i.stack.imgur.com/LSnQ0.png)

标准案例：

![在此处输入图像描述](https://i.stack.imgur.com/1wABn.jpg)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-09T21:20:40.913

我遇到过与**网络提供商**类似的问题，唯一的解决方案是**强制设备重启**。尽管谷歌地图总是显示正确的位置，因为它使用除了网络位置提供者之外的其他传感器信息。

但这是**个好消息**，不是很久以前 Google 通过其[**Google Play 服务框架**](http://developer.android.com/google/play-services/index.html)引入了 Fused Location Provider api，它比 GPS / 网络位置提供程序超级容易使用。

兼容 API 级别 8，现在当我遇到网络提供商这个奇怪的问题时，同时融合位置给了我准确的位置（无需重启设备）。

我在[**这里提交了一个有效的 FusedLocation 测试项目**](https://github.com/akhgupta/FusedLoctionTest)，您可以克隆和测试自己..

以下是代码片段：-

```
package com.example.fusedLoctionTest.service;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.support.v4.content.LocalBroadcastManager;
import android.util.Log;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesClient;
import com.google.android.gms.location.LocationClient;
import com.google.android.gms.location.LocationRequest;

public class FusedLocationService extends Service implements GooglePlayServicesClient.ConnectionCallbacks,
        GooglePlayServicesClient.OnConnectionFailedListener, com.google.android.gms.location.LocationListener{
    private static final LocationRequest REQUEST = LocationRequest.create()
            .setInterval(0)
            .setFastestInterval(0)
            .setPriority(LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY);
    public static final String LOCATION_RECEIVED = "fused.location.received";
    private Long now;

    private LocationClient mLocationClient;
    private final Object locking = new Object();
    private Runnable onFusedLocationProviderTimeout;
    private Handler handler = new Handler();

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);
        now = Long.valueOf(System.currentTimeMillis());
        mLocationClient = new LocationClient(this, this, this);
        mLocationClient.connect();
        return START_STICKY;
    }

    @Override
    public void onConnected(Bundle bundle) {
        Log.d("FusedLocationService", "Fused Location Provider got connected successfully");
        mLocationClient.requestLocationUpdates(REQUEST,this);
        onFusedLocationProviderTimeout = new Runnable() {
            public void run() {
                Log.d("FusedLocationService", "location Timeout");

                Location lastbestStaleLocation=getLastBestStaleLocation();
                sendLocationUsingBroadCast(lastbestStaleLocation);

                if(lastbestStaleLocation!=null)
                    Log.d("FusedLocationService", "Last best location returned ["+lastbestStaleLocation.getLatitude()+","+lastbestStaleLocation.getLongitude()+"] in "+(Long.valueOf(System.currentTimeMillis())-now)+" ms");

                if(mLocationClient.isConnected())
                    mLocationClient.disconnect();
            }
        };
        handler.postDelayed(onFusedLocationProviderTimeout, 20000);//20 sec
    }

    private void sendLocationUsingBroadCast(Location location) {
        Intent locationBroadcast = new Intent(FusedLocationService.LOCATION_RECEIVED);
        locationBroadcast.putExtra("LOCATION", location);
        locationBroadcast.putExtra("TIME", Long.valueOf(System.currentTimeMillis()-now) +" ms");
        LocalBroadcastManager.getInstance(this).sendBroadcast(locationBroadcast);
        stopSelf();
    }

    @Override
    public void onDisconnected() {
        Log.d("FusedLocationService","Fused Location Provider got disconnected successfully");
        stopSelf();
    }

    @Override
    public void onLocationChanged(Location location) {
        synchronized (locking){
            Log.d("FusedLocationService", "Location received successfully ["+location.getLatitude()+","+location.getLongitude()+"] in "+(Long.valueOf(System.currentTimeMillis()-now))+" ms");

            handler.removeCallbacks(onFusedLocationProviderTimeout);
            if(mLocationClient.isConnected())
                mLocationClient.removeLocationUpdates(this);

            sendLocationUsingBroadCast(location);

            if(mLocationClient.isConnected())
                mLocationClient.disconnect();
        }
    }

    @Override
    public void onConnectionFailed(ConnectionResult connectionResult) {
        Log.d("FusedLocationService", "Error connecting to Fused Location Provider");
    }

    public Location getLastBestStaleLocation() {
        Location bestResult = null;
        LocationManager locMgr = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Location lastFusedLocation=mLocationClient.getLastLocation();
        Location gpsLocation = locMgr.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        Location networkLocation = locMgr.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        if (gpsLocation != null && networkLocation != null) {
            if (gpsLocation.getTime() > networkLocation.getTime())
                bestResult = gpsLocation;
        } else if (gpsLocation != null) {
            bestResult = gpsLocation;
        } else if (networkLocation != null) {
            bestResult = networkLocation;
        }

        //take Fused Location in to consideration while checking for last stale location
        if (bestResult != null && lastFusedLocation != null) {
            if (bestResult.getTime() < lastFusedLocation.getTime())
                bestResult = lastFusedLocation;
        }

        return bestResult;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-27T15:38:50.847

我有完全相同的问题，对我来说唯一的解决方案是重新启动设备。有趣的是，除了谷歌地图，没有一个应用程序有位置信息。
谷歌地图应用程序以某种方式找到了一个位置！..

PS 在服务中使用 LocationListener，所以它绝对不是坏引用、死对象等问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-04T12:32:50.230

我仍然有这个问题。但我仍在寻找答案，我试图在 NETWORK_PROVIDER 的侦听器中实现这一点：

```
public void onStatusChanged(final String provider, final int status, final Bundle extras) {
    switch( status ) {
    case LocationProvider.AVAILABLE:
                // ...
        break;
    case LocationProvider.OUT_OF_SERVICE:
                // ...
        break;
    case LocationProvider.TEMPORARILY_UNAVAILABLE:
                // ...
        break;
    }
} 
```

因为：**OUT_OF_SERVICE 如果提供程序停止服务，并且预计在不久的将来不会改变；TEMPORARILY_UNAVAILABLE 如果提供者暂时不可用但预计很快就会可用；如果提供程序当前可用，则为 AVAILABLE。** [onStatusChanged](http://developer.android.com/reference/android/location/LocationListener.html#onStatusChanged%28java.lang.String,%20int,%20android.os.Bundle%29)

而且我认为 OUT_OF_SERVICE 是我的问题，到目前为止还没有解决方案，只是重新启动设备，然后我尝试在发生这种情况时进行一些报告，当这种情况发生时，我要求用户重新启动设备，但很少有设备接收这种状态。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-21T12:02:38.730

似乎是一个开放的错误，Android 开源项目报告的网络提供商问题，问题跟踪器：[https](https://code.google.com/p/android/issues/detail?id=57707) ://code.google.com/p/android/issues/detail?id=57707 。简而言之：2013 年 7 月 17 日报告的问题 - 上一篇博客 2015 年 1 月 7 日，问题出现在 Android 4.1.x 中，出现在各种设备中，“在最新的 Play 服务库中未解决”，博客中没有建议的解决方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-13T06:22:42.920

当手机的 GPS 正在运行并接收到信号时，NETWORK_PROVIDER 不会更新。如果您关闭 GPS 并强制手机从网络获取其位置，那么您将再次开始获取更新。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-10T08:50:37.157

我理解我们问题中的一些内容；您调用 requestGPS 方法，然后发现它的位置。如果启用了 gps，则通过 gps 获取。Othervise gott via NET。当调用 requestGPS 和控制提供者而不是获取 lat-lang 但删除更新时。（不要调用，因为您删除了更新触发器）；

```
if (gpsComSinal) {
    Log.d(TAG,"PEGO SINAL DE GPS");
    rastreio = "GPS";
    longitude = longitudeGPS;
    latitude = latitudeGPS;

    Log.d(TAG, "Utilizando provedor GPS.");
    // if you remove update don't call onLocationChanged
    localizacao.removeUpdates(locationListenerGPS); 
    localizacao.removeUpdates(locationListenerNET);
} else {
    Log.d(TAG,"Sem GPS... pegar NEt");
    // Setando os valores para usar network
    localizacao.removeUpdates(locationListenerGPS);
    localizacao.removeUpdates(locationListenerNET);
    localizacao.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                                       0, 0, locationListenerNET);
    Log.d(TAG,"EsperaNET");
    requestNET();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-18T20:40:48.900

我认为这是因为您的应用程序在后台被“杀死”。我以前遇到过这个问题，我通过在服务中移动 LocationListener 的创建来解决它。一定要保留对侦听器的引用。它可能会解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-01T16:52:06.297

我遇到了这个问题，当您禁用 GPS 时，我发现网络提供商无法在某些 android 设备中工作，因为如果未启用 GPS，它们会阻止访问位置数据。

我在很多设备上都试过了 1\. lenove k6 note ( [screen](https://i.stack.imgur.com/W1Edo.jpg) shot1 , [screen shot2](https://i.stack.imgur.com/W1Edo.jpg) ) 2\. Xiomai mi 9t [screen shot1](https://i.stack.imgur.com/93HeE.jpg) 3\. Google Pixel 1 & Pixel 2

所以有些设备需要启用 GPS 才能从 LocationManager.NETWORK_PROVIDER 访问位置，如果不启用 GPS，您将无法获取位置数据

# html - 页面宽度超过 100%

> ID：15747544
> 
> 赞同：0
> 
> 时间：2013-04-01T16:45:54.710
> 
> 标签：html, css

我的网站有以下CSS...

CSS：

```
body {
    font-family: Calibri;
    font-size: 100%;
    color: #323232;
    position: relative;
    min-width: 60%;
}
html, body { height:100%;} 
```

它出于某种原因添加了一个水平滚动条，我不知道为什么

这是完整的 css 和 html 的小提琴：http: [//jsfiddle.net/charliejsford/9MdSv/](http://jsfiddle.net/charliejsford/9MdSv/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:47:51.960

您必须删除`body`元素上的边距：

```
body {
    font-family: Calibri;
    font-size: 100%;
    color: #323232;
    position: relative;
    min-width: 60%;
    margin: 0
} 
```

这是一个更新的[jsFiddle](http://jsfiddle.net/9MdSv/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:56:55.667

您必须设置一个最大宽度作为示例here

```
#trans-nav li ul {
    opacity: 0;
    position: absolute;
    left: 0;
    max-width: 260px;
    background: #EEEEEE;
    list-style-type: none;
    padding: 0;
    margin: 0; 
} 
```

# rally - 使用 App SDK 2.0 创建自定义缺陷趋势图

> ID：15747545
> 
> 赞同：0
> 
> 时间：2013-04-01T16:46:09.693
> 
> 标签：rally

我的任务是使用 Rally 历史数据绘制一些缺陷图表。现在我正在使用一个简单的 REST 客户端在特定时间点提取数据并在电子表格上绘制计数。我现在正在做的是：

```
{
find : {
    "_ProjectHierarchy": <projectId>, 
    "_TypeHierarchy": -51006, 
    "FoundInBuild" : {$regex: "3\\.3\\."},
    "State" : {$in : ["Submitted","Open"] },
    $or: [ 
       {"Severity" : { $in : ["Catastrophic","Severe"] }},
       {"Priority" : "showstopper"}
    ],
    "__At" : "<date>"
},

pagesize : 1,false
} 
```

我只在需要数据的每个日期运行一次。这是*很多*查询！我正在寻找的是一种使用 _ValidFrom 和 _ValidTo 运行单个查询以包含时间范围，然后将其传递给 SnapshotStore，然后将其绘制在图表上的方法？我确定有办法做到这一点，但我无法从文档中弄清楚。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:05:04.077

不幸的是，AppSDK2 和 Lookback API 的示例空间目前有点薄。那里有一些很酷的应用程序，例如，您可能希望查看 David Thomas 的很酷的 Hackathon 应用程序：

[缺陷返工趋势](https://github.com/RallyHackathon/DefectRework)

作为起点。它查询 LBAPI 的缺陷并将结果数据存储在 SnapshotStore 中。应用程序本身测量缺陷“抖动”或在特定开发周期内重新打开缺陷的次数的趋势。

在审查 Hackathon 应用程序时，请注意 SnapshotStore 的某些方法和语法可能会在 AppSDK2 的未来版本中略有变化。

# optimization - 我可以预编译一个 haxelib 库，以便每次构建项目时它都不会重新编译吗？

> ID：15747556
> 
> 赞同：4
> 
> 时间：2013-04-01T16:46:39.463
> 
> 标签：optimization, compilation, haxe, haxelib

我正在使用 Haxe 和 NME 构建游戏。我的代码编译得很快，但后来我用 haxelib 添加了 Nape 物理引擎，现在我的编译时间增加了很多。

我的猜测是每次都重新编译 Nape 库，因为它看起来像输出是单个 swf 文件，并且删除该库可以将编译时间缩短回原来的样子。

是否可以编译一次 Nape 而不必在每次构建时都重新编译它？Neko 目标的解决方案是否不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T23:58:43.937

我不使用 NME，所以我不确定这如何适合 NME 的构建工具，但是使用简单的 haxe，您将使用构建服务器，例如：

```
haxe --wait 4000 
```

启动服务器，然后在构建时，添加

```
--connect 4000 
```

只要构建服务器正在运行并被使用，编译器就会缓存编译模块的结果，所以像nape这样的东西只会在第一次编译，只要代码没有改变，编译器就只有将做的是生成.swf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T13:55:51.043

它非常适合 OpenFL/NME 工具

```
haxe --wait 5000

openfl build flash --connect 5000 
```

但请注意，目前它可能不适用于：

```
openfl build windows|mac|linux|android|ios|blackberry --connect 5000 
```

目前，cpp 目标不支持此功能。

# tidesdk - 潮汐dk未解决

> ID：15747559
> 
> 赞同：1
> 
> 时间：2013-04-01T16:46:46.520
> 
> 标签：tidesdk

刚刚安装了 TideSDK 1.3.1-beta。当我尝试启动“HelloWorld”示例时，我在不知道从哪里开始解决问题的情况下收到这些消息：

未解决：运行时 1.3.1-beta 未解决：应用程序 1.3.1-beta 未解决：编解码器 1.3.1-beta 未解决：数据库 1.3.1-beta 未解决：文件系统 1.3.1-beta 未解决：媒体 1.3.1-beta 未解决：猴子 1.3.1-beta 未解决：网络 1.3.1-beta 未解决：平台 1.3.1-beta 未解决：进程 1.3.1-beta 未解决：ui 1.3.1-beta 未解决：工人 1.3.1-beta

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:51:12.083

[请遵循docs 网站](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started)中提供的 SDK 安装和入门指南 如果您按照描述的步骤并将 SDK 安装在正确的位置，您将一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T06:56:36.327

我遇到了类似的问题，然后我发现解压tideSDK后，它给了我们三个文件夹，分别是**sdk**、**modules**和**runtime**。所有这三个文件夹都应该在 ~/.tidesdk 中。但是，我在文件夹中只有**sdk 。**因此，我将**运行时**和**模块**复制到 ~/.tidesdk 文件夹中，然后发现 HelloWorld App 现在正在运行。

我希望这个有帮助......祝你好运......

# android - 从 adb shell 使用 sqlite3 时光标键不起作用

> ID：15747564
> 
> 赞同：12
> 
> 时间：2013-04-01T16:46:58.230
> 
> 标签：android, sqlite, adb, readline

通过`adb shell`箭头键使用 sqlite3 时，不是将光标移动到所需位置或调用历史工具，而是在屏幕上显示以下内容：`^[[A`, `^[[B`, `^[[C`, `^[[D`。

我正在使用 Mac OS X，并且我尝试过**Terminal**和**iTerm**终端仿真器。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T19:05:19.593

为了允许在控制台程序的输入中进行编辑和历史记录，该程序必须与`readline`库链接。

该`sqlite3`工具确实支持 readline，但在 Android 上，readline 支持已被禁用。（可能是因为 readline 仅在 GPL 下获得许可。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-22T07:00:42.243

一种解决方法是使用具有 readline 支持的本地版本的 SQLite。

1.  将数据库文件从您的设备复制到本地计算机：
    `adb pull <database-file-on-device>`

2.  使用本地版本的 SQLite 访问数据库文件：
    `sqlite3 <database-file-on-local>`

3.  如果您进行了更改，您可以将它们传输到设备。将本地数据库文件从本地计算机复制到设备：
    `sqlite3 <database-file-on-local> <database-file-on-device>`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-17T02:58:18.687

您可以在 adb shell 中使用之前的命令功能。所以只是 adb shell。然后 cd 到 /data/data//databases 目录。从这里运行（例如）： sqlite3 "select * from "

然后您可以使用向上箭头来重做该命令。有点 hack，但比在 sqlite3 交互式提示中重新键入命令要好得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-10T00:26:24.030

根据 Khanad 的回答：我在设备上编写了一个 shell 脚本，并通过它发送我的 sqlite 命令。

首先在设备上创建一个脚本文件并使其可执行：

```
# get on the device
$ adb shell 

# get write access on the device (this will also put you in the data/data directory)
$ run-as com.YOUR_PACKAGE.YOUR_APP_NAME

# create the script file
$ touch qlite

# make it executable
$ chmod +x qlite 
```

然后将此代码添加到脚本中。请记住将您的实际应用名称放在那里。（回声只是为输出增加了一点喘息的空间。）

```
echo

sqlite3 databases/YOUR_APP_NAME -cmd ".mode column" ".headers on" "$1;"

echo 
```

然后你只需要做类似的事情：

```
./qlite "select * from table limit 1" 
```

该脚本将传递 sqlite 命令，添加分号，用列名漂亮地打印它，您可以使用向上箭头获取最后一个命令。由于您具有写入权限，因此您可以直接对设备上的数据库进行更新。

我希望这能让某人的生活更轻松！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-28T11:56:59.487

使用 ADB shell 代替 sqlite3 shell 以获得 readline 包的优势。

```
generic_x86:/data/data/com.example.musicplayer/databases $ sqlite3 music_player_database -line 'select * from lastplayedsong;' 
```

只要确保您在正确的包中并且不要将**.db**放在数据库名称的末尾，否则将创建一个新数据库并且查询将不会返回任何结果。
*PS：[来源](https://linux.die.net/man/1/sqlite3)*

# django - Django-social-auth 不登录

> ID：15747567
> 
> 赞同：0
> 
> 时间：2013-04-01T16:47:00.847
> 
> 标签：django, authentication, vk

我的测试项目中有一个 Django-social-auth。我需要进行身份验证抛出“vkontakte”（它是俄罗斯流行的社交网络）。[文档](http://django-social-auth.readthedocs.org/en/latest/backends/vkontakte.html)。所以，在**/etc/hosts**我有：

```
#127.0.0.1  localhost
127.0.1.1   pc-my-motherboard
127.0.0.1   domain.com 
```

我将**social_auth**添加到已安装的应用程序中，这是设置中的一些代码：

```
VK_APP_ID = '123456'
VK_API_SECRET = 'secrets :)'
VK_EXTRA_SCOPE = ['notify', 'friends', 'status', 'groups', 'notifications']

# Добавляем в AUTHENTICATION_BACKENDS нужные бекенды
AUTHENTICATION_BACKENDS = (
    'social_auth.backends.contrib.vkontakte.VKontakteOAuth2Backend',
    'django.contrib.auth.backends.ModelBackend',
)

# Добавляем в TEMPLATE_CONTEXT_PROCESSORS процессор "social_auth_by_name_backends"
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.request',
    'social_auth.context_processors.social_auth_by_name_backends',
    'social_auth.context_processors.social_auth_backends',
    'social_auth.context_processors.social_auth_by_type_backends',
    'social_auth.context_processors.social_auth_login_redirect',
)

# Если имя не удалось получить, то можно его сгенерировать
SOCIAL_AUTH_DEFAULT_USERNAME = lambda: random.choice(['0', '1', '2', '3', '4', '5'])

# Разрешаем создавать пользователей через social_auth
SOCIAL_AUTH_CREATE_USERS = True

# Перечислим pipeline, которые последовательно буду обрабатывать респонс 
SOCIAL_AUTH_PIPELINE = (
    # Получает по backend и uid инстансы social_user и user
    'social_auth.backends.pipeline.social.social_auth_user',
    # Получает по user.email инстанс пользователя и заменяет собой тот, который получили выше.
    # Кстати, email выдает только Facebook и GitHub, а Vkontakte и Twitter не выдают
    #'social_auth.backends.pipeline.associate.associate_by_email',
    # Пытается собрать правильный username, на основе уже имеющихся данных
    'social_auth.backends.pipeline.user.get_username',
    # Создает нового пользователя, если такого еще нет
    'social_auth.backends.pipeline.user.create_user',
    # Пытается связать аккаунты
    'social_auth.backends.pipeline.social.associate_user',
    # Получает и обновляет social_user.extra_data
    'social_auth.backends.pipeline.social.load_extra_data',
    # Обновляет инстанс user дополнительными данными с бекенда
    'social_auth.backends.pipeline.user.update_user_details'
)

SOCIAL_AUTH_UID_LENGTH = 223
SOCIAL_AUTH_NONCE_SERVER_URL_LENGTH = 18
SOCIAL_AUTH_ASSOCIATION_SERVER_URL_LENGTH = 18
SOCIAL_AUTH_ASSOCIATION_HANDLE_LENGTH = 223
SOCIAL_AUTH_UUID_LENGTH = 16 
```

在**网址**中：

```
urlpatterns = patterns('',
    url(r'$', 'myapp.views.index', name='index'),
    url(r'', include('social_auth.urls')),

) 
```

在**index.html**中：

```
<p>Hello {{ user }}</p>

<a href="{% url 'socialauth_begin' 'vkontakte-oauth2' %}">Enter VK</a> 
```

然后我启动服务器：`sudo python manage.py runserver 127.0.0.1:80`。我看到链接，我按下它，它转到`http://domain.com/login/vkontakte-oauth2/`. 上次这个节目认证形式的社交网络，并重定向到我的网站，现在它没有发生。这很奇怪，因为所有设置都是真的，请帮我修复它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:09:46.370

当您尝试访问表单时，您能否准确说明发生了什么？你看到一个特定的错误吗？[当我尝试在 django-social-auth演示](http://social.matiasaguirre.net/)中访问此社交网络的表单时，出现错误。可能是有关 vkontakte 的应用程序部分被窃听，似乎用于重定向的域名是错误的。您可以检查您尝试访问的网址是否与通常用于登录社交网络的网址相对应。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:53:54.803

哦，错误`url(r'^$',`在**urls**中。只有铁杆

# http - Twitter API 返回 HTTP 429 - 请求过多

> ID：15747575
> 
> 赞同：2
> 
> 时间：2013-04-01T16:47:28.360
> 
> 标签：http, twitter, https, http-status-code-429

我制作了 twiiter 应用程序，并制作了一个循环以从 twitter API 获取数据它显示错误

```
[raw] => HTTP/1.1 429 Too Many Requests
[content-type: application/json; charset=utf-8
date: Fri, 29 Mar 2013 20:03:07 UTC
server: tfe
set-cookie: guest_id=v1%3A136458738755627462; Domain=.twitter.com; Path=/; Expires=Sun, 29-Mar-2015 20:03:07 UTC 
```

我该如何解决

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T17:25:49.193

[Twitter API 文档](https://developer.twitter.com/en/docs)有一篇关于[rate-limiting](https://developer.twitter.com/en/docs/basics/rate-limiting)的长文章。

> **15 分钟窗口**
> 
> API 1.1 版本中的速率限制分为 15 分钟间隔，这与 1.0 版本中的 60 分钟块有所不同。此外，所有 1.1 端点都需要身份验证，因此不再有未经身份验证的呼叫和速率限制的概念。
> 
> 虽然在 API 的第一个版本中，启用 OAuth 的应用程序可以每小时每个访问令牌发起 350 个基于 GET 的请求，但 API v1.1 的速率限制模型允许通过每个方法请求限制来处理更广泛的请求。有两个初始存储桶可用于 GET 请求：每 15 分钟调用 15 次，每 15 分钟调用 180 次。

[速率限制](https://developer.twitter.com/en/docs/basics/rate-limits.html)页面显示哪个资源允许每 15 分钟的请求数。

在 15 分钟的窗口中发出更少的请求。您可以缓存来自 API 的响应并从那里读取数据，而不是每次都通过查询 API 来刷新数据。例如，不要在用户每次点击按钮时都查询主时间线，而是从之前读取缓存的结果。然后为缓存设置一个超时，这样您的缓存数据就不会过时太多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:56:20.830

您过于频繁地尝试请求更新。等待一个小时，然后重新运行您的应用程序，但仅每 5 分钟查询一次 Twitter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-24T06:35:57.137

我找到了可以帮助您的东西：将其设置为 wait_on_rate_limit = True

```
tw.API(auth,wait_on_rate_limit=True) 
```

# css - chrome 页脚重叠内容，即使清除：都使用

> ID：15747577
> 
> 赞同：0
> 
> 时间：2013-04-01T16:47:28.883
> 
> 标签：css, google-chrome

我的页脚 div 与 chrome 浏览器中的内容重叠，尽管我已经清除了它。有人可以用css指出我正确的方向吗？我应该使用 if is chrome javascript 吗？

[http://archibaldbutler.com/projects/roaming-giraffe/html/](http://archibaldbutler.com/projects/roaming-giraffe/html/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:14:24.837

如果页脚设计为始终位于页面底部，请执行以下操作：

```
.footer-bg {
    clear: both;
    bottom: 0px;
    position: fixed;
    width: 996px;
    height: 192px;
    background-image: url('../html/images/footer-bg.jpg');
    background-position: center top;
    background-repeat: no-repeat;
}

.content-bg2 {
    clear: both;
    float: left;
    margin-top: 10px;
    margin-bottom:192px;
    width: 996px;
    height: 369px;
    background-image: url('../html/images/maincontent2bg.jpg');
    background-position: center top;
    background-repeat: none;
} 
```

如果它应该只是在该内容区域的底部，那么请执行以下操作：

```
.footer-bg {
    clear: both;
    bottom: 0px;
    width: 996px;
    height: 192px;
    background-image: url('../html/images/footer-bg.jpg');
    background-position: center top;
    background-repeat: no-repeat;
} 
```

# php - HTML DOM 解析器 UTF-8

> ID：15747578
> 
> 赞同：0
> 
> 时间：2013-04-01T16:47:30.090
> 
> 标签：php, html, utf-8, domparser

我有一个网站，但没有使用 UTF-8 编码。我在另一个 php 中包含 php 文件。当我将编码更改为 UTF-8 时，所有字符都损坏了。所以我不能使用 header(..utf8 bla bla 标签。

```
include_once 'includes/simple_html_dom.php';

$ozet = file_get_contents($url);
$html = str_get_html($ozet);
$trozet = $html->find('div[class="TEST"]',0)->plaintext;
$icerik = "";
$yazi = "<span>$trozet</span>";
$uzunluk = strlen($yazi);
$sinir = 155;
if ($uzunluk > $sinir) {
$icerik = substr($yazi,0,$sinir) . "...";
}

$content.= '<i><span>'.$icerik.'</span></i>';

return $content; 
```

但它得到这样的html：

```
Pittsburgh kentinde sakin ve gÃ¼neÅŸli bir sabah, mesai saatinden hemen Ã¶nce insanlar iÅŸlerine doÄŸru koÅŸturmakta, gÃ¼nlÃ¼k telaÅŸlarÄ±nÄ± yaÅŸama... 
```

它应该是：

```
Pittsburgh kentinde sakin ve güneşli bir sabah, mesai saatinden hemen önce insanlar işlerine doğru koşturmakta, günlük telaşlarını... 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:53:54.920

要 Substr utf-8 字符串，您可以使用如下函数：

```
function substrutf8($str,$from,$len){
return preg_replace('#^(?:[\x00-\x7F]|[\xC0-\xFF][\x80-\xBF]+){0,'. $from .'}'.'((?:[\x00-\x7F]|[\xC0-\xFF][\x80-\xBF]+){0,'. $len .'}).*#s','$1', $str);} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:22:15.417

如果不能使用 UTF-8，则必须将其转换为其他编码：

```
$yazi = mb_convert_encoding("<span>$trozet</span>", "Windows-1250", "UTF-8"); 
```

请注意，并非每个网站都使用 UTF-8，而且 Windows-1250 仅支持一小部分 Unicode 字符。

# mysql - 提高查询的性能以删除重复项

> ID：15747582
> 
> 赞同：0
> 
> 时间：2013-04-01T16:47:34.570
> 
> 标签：mysql, database, query-optimization

我的托管公司最近从慢查询日志中给了我这个条目。检查的行似乎过多，可能有助于降低服务器的速度。phpMyAdmin 中的测试导致持续时间为 0.9468 秒。

Check_in 表通常包含 10,000 到 17,000 行。它还有一个索引：Num, unique = yes, cardinality = 10852, collat​​ion = A。

我想改进这个查询。WHERE 后面的前五个条件包含要检查以排除重复项的字段。

```
# User@Host: fxxxxx_member[fxxxxx_member] @ localhost []
# Query_time: 5  Lock_time: 0  Rows_sent: 0  Rows_examined: 701321
use fxxxxx_flifo;
SET timestamp=1364277847;
DELETE FROM Check_in USING Check_in, 
Check_in as vtable WHERE 
    ( Check_in.empNum = vtable.empNum ) 
AND ( Check_in.depCity = vtable.depCity ) 
AND ( Check_in.travelerName = vtable.travelerName ) 
AND ( Check_in.depTime = vtable.depTime ) 
AND ( Check_in.fltNum = vtable.fltNum ) 
AND ( Check_in.Num > vtable.Num ) 
AND ( Check_in.accomp = 'NO' ) 
AND Check_in.depTime >= TIMESTAMPADD ( MINUTE, 3, NOW() )
AND Check_in.depTime < TIMESTAMPADD ( HOUR, 26, NOW() ); 
```

编辑：

*   empNum 整数 (6)
*   姓氏 varchar (30)
*   travelerName varchar (40) (99.9% = '全部')
*   depTime 日期时间
*   fltNum varchar (6)
*   depCity varchar (4)
*   总共 23 个字段（包括一个 blob，包含 25K 图像）

编辑：

```
ADD INDEX deleteQuery (empNum, lastName, travelerName, depTime, fltNum, depCity, Num) 
```

这是创建索引的问题吗？如果是这样，什么类型和什么字段？

最后 3 个条件通过询问是否完成以及在时间段内来限制行数。他们能否在查询中（更早）更好地定位？第5个`AND ...`有必要吗？

对所有想法开放。感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:09:57.757

如果不查看表定义，很难确切知道如何提供帮助。

不要删除自联接（两次提到的同一个表），因为此查询正在清除重复项 ( `check_in.Num > vtable.Num`)。

你有关于 depTime 的索引吗？如果没有，请添加一个。

您可能还想在

```
 (empNum,depCity,travelerName,depTime,fltNum) 
```

优化自连接。您可能需要花点时间才能弄清楚什么是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:28:52.287

索引的目的是加快搜索和过滤速度……索引（用外行的话来说）是一个排序表，它精确定位数据的每一行（它本身可能是未排序的）。

因此，如果您想加快删除查询的速度，了解数据的位置会有所帮助。因此，作为一组经验法则，您需要向以下字段添加索引：

1.  每个主键或外键
2.  您执行频繁搜索/过滤的每个日期
3.  您执行频繁搜索/过滤的每个数字字段

我避免对文本字段进行索引，因为它们非常昂贵（就空间而言），但是如果您需要对文本字段执行频繁的搜索，您还应该对它们进行索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T19:15:49.157

如果您的目标是删除重复项，则解决方案是首先避免出现重复项 - 在您认为共同定义重复项的字段中定义一个唯一索引（但您将无法创建索引，而您在数据库中有重复项）。

*此*查询所需的索引按 (deptime,empnum,depcity,travellername,fltnum,num,accomp}*的顺序*打开。deptime 字段必须排在第一位，以优化表上的 2 次访问。一旦你删除重复项，使索引唯一。

暂且不说，您会遇到一大堆性能问题。

1）您似乎在提供某种商业服务 - 那么您为什么要等待您的 ISP 告诉您您的网站正在像狗一样运行？

2）虽然您的索引应设计为防止重复，但在许多情况下其他索引将有助于提高性能 - 但为了了解这些索引是什么，您需要查看针对您的数据运行的所有查询。

3）blob可能应该在一个单独的表中

> 他们能否在查询中（更早）更好地定位？

查询层次结构中同一级别的谓词顺序对性能没有影响。

> 第 5 个 AND 是必要的吗？

如果您的意思是“AND (Check_in.Num > vtable.Num)”，那么是的 - 否则它将删除*所有*重复的行 - 即它不会留下一行。

# c# - 在 C# 中使用具有正确私钥和公钥对的 RSA 解密时出现错误数据异常

> ID：15747583
> 
> 赞同：1
> 
> 时间：2013-04-01T16:47:35.793
> 
> 标签：c#, rsa, rsacryptoserviceprovider

这是我的解密过程代码：

```
 private RSACryptoServiceProvider _rsa;
    private string _privateKey;
    private string _publicKey;

    public RsaLibrary()
    {
        //initialsing the RSA object taking the option of a 1024 key size
        _rsa = new RSACryptoServiceProvider(1024);
        _privateKey = _rsa.ToXmlString(true);
        _publicKey = _rsa.ToXmlString(false);

    }

 public string Decrypt(string ciphertext, string privateKey_ = null)
    {
        if (String.IsNullOrEmpty(privateKey_))
        {
            return DecryptToBytes(ciphertext, _privateKey);
        }
        else
        {
            return DecryptToBytes(ciphertext, privateKey_);
        }
    }

    private string DecryptToBytes(string ciphertext, string privateKey)
    {
        if (String.IsNullOrEmpty(privateKey))
        {
            throw new ArgumentNullException("Error: No key provided.");
        }
        if (ciphertext.Length<=0)
        {
            throw new ArgumentNullException("Error: No message to decrypt.");
        }

        byte[] plaintext;
        byte[] ciphertext_Bytes = Encoding.Unicode.GetBytes(ciphertext);
        _rsa.FromXmlString(privateKey);

        plaintext = _rsa.Decrypt(ciphertext_Bytes, false);

        return Encoding.Unicode.GetString(plaintext);
    } 
```

加密代码：

```
 private string EncryptToByte(string plaintext, string publicKey)
    {
        if (String.IsNullOrEmpty(publicKey))
        {
            throw new ArgumentNullException("Error: No key provided.");
        }
        if (plaintext.Length<=0)
        {
            throw new ArgumentNullException("Error: No message to incrypt");
        }

        byte[] ciphertext;
        byte[] plaintext_Bytes = Encoding.Unicode.GetBytes(plaintext);
        _rsa.FromXmlString(publicKey);

        ciphertext = _rsa.Encrypt(plaintext_Bytes, false);
        return Convert.ToBase64String(ciphertext);
    } 
```

我看不到哪里出错了。我已确保密钥正确。我在构造函数中使用这一行提取的公共的：_publicKey = _rsa.ToXmlString(false); 此公钥显示在我创建的表单上。私人我使用“真”而不是假。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T16:52:54.500

密文不太可能是真正的 UTF-16 编码文本。假设*加密*方面有类似的东西：

```
string encryptedText = Encoding.Unicode.GetString(encryptedBytes); 
```

你基本上已经丢失了数据。加密的结果*不是*文本——它是任意的二进制数据。如果出于某种传输原因要将其转换为文本，则应使用 Base64，例如

```
string base64EncryptedText = Convert.ToBase64String(encryptedBytes); 
```

然后用于`Convert.FromBase64String`恢复准备解密的原始加密二进制数据。

# perl - 为什么 Perl::Unsafe::Signals 和 LWPx::ParanoidAgent 给我一个段错误？

> ID：15747586
> 
> 赞同：1
> 
> 时间：2013-04-01T16:47:40.557
> 
> 标签：perl

我正在运行一个抓取工具，它从数百个网页中获取一些关键信息。一切正常，但在超时时我遇到了分段错误。

```
use Perl::Unsafe::Signals;
require LWPx::ParanoidAgent;
...
$ua = LWPx::ParanoidAgent->new();
$ua->timeout(60);
...
local $SIG{ALRM} = sub {
    print "Timeout occurred.  Skipping to next record.\n";
};
alarm 60; # give each journal a minute to respond, in total.
UNSAFE_SIGNALS {
    ...
    # some calls like the following: 
    my $pageResponse = $ua->get($url);
    if ($pageResponse->is_success) {
        # calls to a sub
        # that also does $ua->get()
        # I think it fails inside the sub (if that makes a diff)
    }
};
alarm 0; # clear the timeout. 
```

运行：为 i686-linux 构建的 perl 5，版本 16，subversion 3 (v5.16.3)

该脚本在超时后引发分段错误。我得到“超时发生”的打印，然后是分段错误。

有人对可能发生的事情有任何线索吗？调试建议？

额外信息：我只有一个“eval”块，而不是之前的 UNSAFE_SIGNALS 块，它只会在发生超时时挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:50:28.780

该问题通过仅将 eval 块放在 $ua->get 请求周围来解决，仅此而已。问题似乎在于根据触发警报的时间而达到不一致的状态。

对我的所有获取请求使用以下代码：

```
sub uaGetWrapper($) {
    my $url = shift;
    my $response;
    eval {
        local $SIG{ALRM} = sub { die "timeout"; };
        alarm 60;
        $response = $ua->get($url);
        alarm 0;
    };

    if ($@ && $@ =~ /timeout/) {
        return 0; # return false on a timeout.
    }

    return $response;
} 
```

# c# - 找不到在 UserControl C# 中填充控件的方法

> ID：15747589
> 
> 赞同：0
> 
> 时间：2013-04-01T16:47:52.657
> 
> 标签：c#, winforms, tabs, devexpress, components

我正在使用包含字段、复选框、文本区域、网格等的 UserControl 制作这样一个选项卡式“产品版本控制”。在运行时，当我添加一个新选项卡（就像我们在浏览器上一样）时，我会实例化一个新的 UserControl（其中包含所有组件）。问题是：我可以获取所有内部组件值并填充一个对象以保持不变，但不能相反。我可以从 Object 中获取所有值并将它们设置为内部组件的 EditValue（或 Text/Value 属性）属性，但它们不会显示给用户。

考虑：

*   我所有的内部组件都有公共的 set/get 方法，如下所示

```
 public class TabVersion : UserControl
    {
        ...
        public DevExpress.XtraEditors.SpinEdit seRevision
        {
            get
            {
                return _seRevision;
            }
            set
            {
                _seRevision = value;
            }
        }
        ...
    } 

```

*   在 TabVersion 类中，我有一个“填充”方法，它接收一个“版本”对象并设置所有内部组件的“EditValue”属性，如下所示：

```
 public class TabVersion : UserControl
    {
        ...
        public void FillTab(Sheet sheet)
        {
            ...
            this.seRevision.EditValue = sheet.NumRevision;
            ...
        }
        ...
    } 

```

*   在运行时，所有 EditValue 组件属性都已填充但不向用户显示。我是否必须为我的用户控件中的每个组件设置“启用”或“可见”属性？

有任何想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T20:50:50.673

嗯......在没有目标的情况下到处搜索之后，我编写了一个“Fill”方法来填充我的用户控件中的所有 DevExpress 控件，并在父窗体的“Shown”事件中调用它。我认为这是 DevExpress 的一个错误，因为当我给它们各自的值时，所有 Windows 默认组件都可以正常工作。就是这样。

# solr - Solr：在布尔字段上使用过滤器查询？

> ID：15747590
> 
> 赞同：4
> 
> 时间：2013-04-01T16:47:58.523
> 
> 标签：solr

我有一个索引的存储布尔字段，我试图将其用作过滤器：

```
<field name="is_instrumental" type="boolean" indexed="true" stored="true" /> 
```

但是，当我尝试将其用作 fq 参数时，查询返回零结果：

```
select?q=*:*&fq=is_instrumental:true&wt=xml&indent=true

<response>
  <lst name="responseHeader">
    <int name="status">0</int>
    <int name="QTime">0</int>
    <lst name="params">
      <str name="indent">true</str>
      <str name="q">*:*</str>
      <str name="wt">xml</str>
      <str name="fq">is_instrumental:true</str>
    </lst>
  </lst>
  <result name="response" numFound="0" start="0"></result>
</response> 
```

我已经尝试了所有我能想到的组合（真、假、1、0、真、假，也在引号中），无论我尝试什么，它都不会返回任何东西。其他字段（整数或字符串）的过滤器工作得很好。使用 Solr 4.1。

我错过了什么？

编辑：

solrconfig.xml： http: [//pastebin.com/kGWhQBma](http://pastebin.com/kGWhQBma)

schema.xml： http: [//pastebin.com/uqnYuuHR](http://pastebin.com/uqnYuuHR)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:26:25.967

`&fq=is_instrumental:true`您的查询语法应该没有问题。

我的猜测是您正在使用自定义版本的 /select 请求处理程序，该处理程序正在实现自定义查询解析器，例如[eDisMax（扩展 Dismax）](http://docs.lucidworks.com/display/solr/The+Extended+DisMax+Query+Parser)解析器。也许该`&uf`参数已设置为防止现场搜索。您可以检查您的 solrconfig.xml 并查看`<requestHandler name="/select" class="solr.SearchHandler">`配置的默认值是如何定义的吗？

# css - 如何删除网站右侧的空白区域？

> ID：15747591
> 
> 赞同：0
> 
> 时间：2013-04-01T16:47:58.447
> 
> 标签：css

我正在开发一个有很多浮动 div 的单页网站，所有高度：100%；- 在较小的屏幕（如 iPad）和 FIREFOX 等浏览器中，您可以水平滚动到站点的一侧并查看空白区域。这让我完全发疯了。

我查看了其他空白问题，但它们非常具体，以至于我看不到相关性。我没有任何东西可以让 100% 的身体宽度断裂。任何意见是极大的赞赏。

测试站点位于[http://test.mysteryskin.co.uk/](http://test.mysteryskin.co.uk/)

说它未完成可能很有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:35:51.293

`position:fixed;`我能够通过将类添加到 div来解决 FF 上的问题`trailer`。事实上，我认为如果您的所有非滚动元素都已修复，那么您尝试拉出的页面类型会更好。

不确定这是否会帮助您解决 iPad 问题。

# jquery - 使用jquery添加输入字段

> ID：15747593
> 
> 赞同：0
> 
> 时间：2013-04-01T16:48:01.970
> 
> 标签：jquery

1.  新手在这里使用 jquery
2.  我想在我已经创建的表单中添加几个输入字段
3.  原因是 - 万一新用户想要将新学位添加到数据库中已有的学位
4.  这是我的jQuery代码

    `$("#addinst").click(function(){ $("mainform").append("<p> <label align="left">Institution #1:</label> <input name="EdInstitutionName1" type="text" value="" size="70" maxlength="100" /> </p>");`

5.  这是表单的一部分

    `<form id="someform" > <fieldset id="mainField"> <p><label align="left">Institution #1:</label> input name="EdInstitutionName1" type="text" value="" size="70" maxlength="100" /> tr> td align="left">City, State #1:</td> td><input name="EdInstitutionLocation1" type="text" value="" size="70" maxlength="100" /></td> </tr>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:52:13.677

似乎在您的 jQuery 代码中，您缺少`id`表单。要选择您的表格，请使用：

`$('#mainform').append`

代替

`$('mainform').append`

在 jQuery 中，`ids`需要`#`在它们前面有一个。如果没有`#`符号，jQuery 会查找具有该名称的标签。同样，`.`在类名前面使用类来选择类。

更多关于 jQuery 选择器的信息，可以参考[jQuery 选择器 API](http://api.jquery.com/category/selectors/)

# jquery - PhotoSwipe、页眉和页脚菜单

> ID：15747601
> 
> 赞同：2
> 
> 时间：2013-04-01T16:48:43.947
> 
> 标签：jquery, html, swipe

我尝试为移动设备制作照片滑动画廊。我想要做的是点击触摸屏打开页眉和页脚工具栏，因为他们有按钮可以共享并返回另一个页面。

但我无法选择按钮，

当我点击页眉和页脚时，我只能左右滑动。

有人可以帮我吗？

HTML5 代码：

```
<div data-role="page">
    <div data-role="header" id="header" data-position="fixed" data-fullscreen="true">
        <a href="Revista.html" class="ui-btn-left" data-direction="reverse" data-icon="home" data-iconpos="notext" data-inline="true" data-role="button" data-theme="a"></a>
        <h1>HOME</h1>
    </div>

<div data-role="content" id="f">

<ul id="Gallery" class="gallery">

        <li><a href="img/image001.jpg"></a></li>

    </ul>
</div>

<div data-role="footer" data-position="fixed" data-fullscreen="true">
      <ul class="social-likes" id="s">
            <li class="facebook" title="Facebook">Likes</li>
            <li class="twitter" title="Twitter">Twitter</li>
            <li last-option id="nomecontacto"><a href="#" onclick="showForm()" title="Enviar Mensagem">Contacto<img src="img/mail-icon.png"/></a></li>
    </ul>
</div> 

</div><!--rolepage-->

</div> 
```

JAVASCRIPT：

```
<script type="text/javascript">

        (function(window, PhotoSwipe){

            document.addEventListener('DOMContentLoaded', function(){

                var
                    options = {
                        preventHide: true,
                                    },
                    instance = PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'), options );

                    instance.show(0);

            }, false);

        }(window, window.Code.PhotoSwipe));

    </script> 
```

# algorithm - 尝试数字

> ID：15747602
> 
> 赞同：0
> 
> 时间：2013-04-01T16:48:44.153
> 
> 标签：algorithm, data-structures, trie

将 trie 或 DAWG 用于数字而不是字符串是个好主意吗？我有很多两个数字组合，并希望减少所需的内存大小。

我希望能够存储所有数字组合，但如果数据结构仅支持查询以检查给定组合中是否存在给定组合，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:47:26.990

我认为对 2 位数字的优化不会太大。但对于更长的数字，TRIE 绝对是一个很好的解决方案。

至于两位数组合，我认为最好使用大小为 100 的数组，该数组存储与 100 个两位数组合中的每一个相对应的标志（或计数，如果允许重复）。当然，如果只允许数字，您将只需要 90 个位置，因为以 0 开头的 10 个组合不是有效数字。插入数字时，只需在数组中设置相应的标志（恒定的计算复杂度）。当检查是否在集合中找到一个数字时，只需检查数组中的相应标志（同样是常数复杂度）。要恢复您拥有的所有数字，请遍历数组并打印所有设置了相应标志的数字。我的想法有点类似于设置排序，当允许重复[计数排序时](http://en.wikipedia.org/wiki/Counting_sort). 该解决方案还具有两种操作的最佳计算复杂度常数。

# opencv - camshift和opencv的结合

> ID：15747603
> 
> 赞同：2
> 
> 时间：2013-04-01T16:48:45.667
> 
> 标签：opencv, feature-detection, surf, object-detection, video-tracking

我正在尝试使用 OpenCV 进行对象检测工作。但是有一些事情让我感到困惑。像 camshift 和卡尔曼滤波器这样的跟踪和预测算法可以完成跟踪任务，而 SURF 匹配方法也可以做到这一点。

我不太明白这两种方法之间的区别。我已经根据 OpenCV 教程的 feature2d（使用 SURF）和 motion_analysis_and_object_tracking（使用 camshift）进行了一些编码。似乎它们只是一个目的的两种手段。我是对的还是我错过了一些概念？

将 camshift 跟踪与 SURF 特征匹配结合起来是不是一种好方法？...也许可以应用更多的东西，比如轮廓匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T20:22:11.700

简短的回答是：

1.  使用关键点 (SURF) 或任何其他方法检测有趣的对象。
2.  获取对象的边界矩形并将其作为对象跟踪器的输入（例如 CAMShift）。
3.  除非对象不会丢失，否则请使用对象跟踪器。

对象*跟踪*是使用先前帧中的信息找到对象位置的过程。跟踪和检测之间的区别在于，虽然两个过程都定位对象的位置，但 *检测*不使用来自先前帧的任何信息来定位对象。

查看[Alper Yilmaz、Omar Javed 和 Mubarak Shah 的“对象跟踪：调查”](http://crcv.ucf.edu/papers/Object%20Tracking.pdf)。本文包含检测和跟踪技术的全面概述。

# c# - 做 httpwebrequest 但不等待响应

> ID：15747604
> 
> 赞同：0
> 
> 时间：2013-04-01T16:48:48.180
> 
> 标签：c#, asp.net, httpwebrequest, webrequest, httpwebresponse

在这里，我不想等待服务器的响应，因为我不关心这些 httpwebrequest 的响应。

可以吗？还是以后会影响系统？

```
HttpWebRequest PostRequest = (HttpWebRequest)WebRequest.Create(PostUrl);
        PostRequest.ContentType = PostContentType;
        PostRequest.Method = "POST";
        byte[] bytes = Encoding.ASCII.GetBytes(DataUrl);            
        try
        {
            PostRequest.ContentLength = bytes.Length;
            using (Stream webpageStream = PostRequest.GetRequestStream())
            {
                webpageStream.Write(bytes, 0, bytes.Length);
            }
        }
        catch (Exception ex)
        {
            //
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:53:52.573

您可以调用异步`BeginGetRequestStream()`，然后在完成时处理响应数据。如果您不需要响应数据，则可以忽略它，但您可能有兴趣获取响应状态代码以检查您的请求是否成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:56:37.223

是的，只是不要忘记添加这些行

```
 webpageStream.Flush();
  webpageStream.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-20T08:09:29.957

是的，因为这个答案是如此真实，请删除此代码：

```
var response = (HttpWebResponse)request.GetResponse();

var responseString = new SreamReader(response.GetResponseStream()).ReadToEnd(); 
```

并在stream.write之后添加使用流的流动代码，如下所示：

```
stream.Flush();
stream.Close(); 
```

# php - 如何在 symfony2 中存储由 --- 用户详细信息创建/修改

> ID：15747607
> 
> 赞同：0
> 
> 时间：2013-04-01T16:49:15.140
> 
> 标签：php, symfony

我想存储正在创建和编辑数据的用户的值。如何在不触及会话变量的情况下做到这一点。我使用 FOSUserbundle 进行用户管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:56:35.447

Blameable from [Doctrine extensions](https://github.com/l3pp4rd/DoctrineExtensions)将完成这项工作。

# android - Android SQLite 数据库升级，获取旧版本

> ID：15747610
> 
> 赞同：1
> 
> 时间：2013-04-01T16:49:19.233
> 
> 标签：android, database, sqlite, upgrade

有没有办法在使用 onUpgrade() 方法进行数据库升级时获取以前的数据库？

我的意思是，如果当前数据库版本为 2，我将其更改为 3，则调用 onUpgrade 方法，但在那之后有没有办法获取与版本 2 对应的数据库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T16:54:12.273

不，没有。升级数据库时，旧版本将被覆盖。

您可以尝试通过将文件从内部存储的`databases`文件夹复制到普通的内部存储或外部存储来制作备份副本，然后在必要时将其还原。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T16:54:06.187

您无法*获取*以前的版本，因为现在它已升级到版本 3。

您可以做的是，[`onDowngrade`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onDowngrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)当您使用数据库版本 2 交付新应用程序时，将数据库降级到以前的版本。虽然，这仅适用于 API 级别 11。

# scala - Scala 泛型类型约束

> ID：15747618
> 
> 赞同：9
> 
> 时间：2013-04-01T16:50:01.483
> 
> 标签：scala, generics, type-constraints

我现在正在阅读[Programming Scala](https://rads.stackoverflow.com/amzn/click/com/0981531644)。我刚刚读完关于隐式类型转换的章节，其中`<%`介绍了符号。还有一个`<:`符号和一个`<`符号。

有人可以总结一下不同的类型约束吗？例如，我正在努力解决和之间的`<:`区别`<`。我很好奇是否还有其他我尚未介绍的内容。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-01T17:00:25.763

没有称为 的类型约束`<`。

`A <: B`意思`A`是字面上的子类型`B`（其中子类型是反身定义的，这意味着对于任何类型`T`都是`T <: T`）。

`A <% B`手段`A`要么是 的子类型，`B`要么存在从`A`到不同类型的隐式转换`AA`which `AA <: B`。这称为“视图边界”。

`A >: B`手段`A`是 的超类型`B`。

# php - 如何在 AJAX 中编写 PHP

> ID：15747621
> 
> 赞同：0
> 
> 时间：2013-04-01T16:50:19.697
> 
> 标签：php, jquery, ajax, joomla

我正在尝试在 ajax 中进行会话.. 因为我已经编写了这样的代码

```
BTLJ.ajax({
           type: "POST",
           url: btlOpt.BT_AJAX,
           data: datasubmit,
           success: function(html){
                //if html contain "Registration failed" is register fail
              BTLJ("#btl-register-in-process").hide();  
              if(html.indexOf('$error$')!= -1){
                  ...
                  ...
                  }
               }else{                  
                   BTLJ(".btl-formregistration").children("div").hide();
                   BTLJ("#btl-success").html(html); 
                   BTLJ("#btl-success").show(); 
                   alert(<?php session_start(); print_r($_SESSION); ?>);
                   setTimeout(function() { ); BTLJ(".kcregbox").show();},7000);
                  // BTLJ("#btl-success").hide();
               }
           },
           error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus + ': Ajax request failed');
           }
        }); 
```

但是如果我这样写的话，ajax 就不起作用了。请帮助我在 ajax 中进行会话。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:15:08.883

您在 Joomla 中的 AJAX 查询格式应如下所示。

```
 jQuery.post('index.php',{
                'option'        : 'com_componentname',
                'controller'    : 'controllername',
                'task'          : 'task_name',
                'format'        : 'raw',            
                'data'          :  data
            }).success(function(result) { 
                //if the request is success
            }).error(function() { 
                //if the request is fails
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T03:42:44.283

我在 joomla 中将这种格式用于 ajax

```
$.ajax({
        type: 'GET',
        url: 'index.php', 
        data: {option: 'com_componenetname', task: 'taskname.youroperation', format: 'json', tmpl: 'raw'},
    dataType: 'json',
        async: true, // can be false also
        error: function(xhr, status, error) {
                console.log("AJAX ERROR in taskToggleSuceess: ")
                var err = eval("(" + xhr.responseText + ")");
                console.log(err.Message);
                },
        success: function(response){

                // on success do something
                // use response.valuname for server's data
                        }
                ,
        complete: function() {
            // stop waiting if necessary 
                 }                     
          }); 
```

在您的组件/控制器中，您应该有一个文件 yourcontroller.json.php 它将处理您的调用并返回编码的 json 数组将您在客户端中需要的所有数据

# php - 错误：在非对象上调用成员函数 prepare()

> ID：15747623
> 
> 赞同：-2
> 
> 时间：2013-04-01T16:50:25.907
> 
> 标签：php, mysqli, prepare

请帮我

致命错误：在第 104 行的 /home/u357965800/public_html/include/class.admin.php 中的非对象上调用成员函数 prepare()

```
<?php
include_once('class.database.php');
class ManageAdmins
{
    public $link;

    function __construct()
    {
        global $prefix;
        $db_connection = new dbConnection();
        $this->link = $db_connection->connect();

        return $this->link;     
}

function AddAdmin($ausername,$apass,$afname,$alname,$aemail,$atel,$apic,$allow_term_add, $allow_term_list, $allow_term_edit, $allow_term_del, $allow_class_add, $allow_class_list, $allow_class_edit, $allow_class_del, $allow_lesson_add, $allow_lesson_list, $allow_lesson_edit, $allow_lesson_del, $allow_teacher_add, $allow_teacher_list, $allow_teacher_edit, $allow_teacher_del, $allow_course_add, $allow_course_list, $allow_course_edit, $allow_course_del, $allow_student_add, $allow_student_list, $allow_student_edit, $allow_student_del, $allow_cs_add, $allow_cs_list, $allow_cs_edit, $allow_cs_del, $allow_score_add, $allow_score_list, $allow_score_edit, $allow_chair_manage, $allow_admins_add, $allow_admins_list, $allow_admins_edit, $allow_admins_del, $allow_settings, $allow_homepage_message, $acomment, $admin_id)
{
    global $prefix;
    $query = $this->link->prepare("INSERT INTO `".$prefix."admins` (`ausername`, `apass`, `afname`, `alname`, `aemail`, `atel`, `apic`, `allow_term_add`, `allow_term_list`, `allow_term_edit`, `allow_term_del`, `allow_class_add`, `allow_class_list`, `allow_class_edit`, `allow_class_del`, `allow_lesson_add`, `allow_lesson_list`, `allow_lesson_edit`, `allow_lesson_del`, `allow_teacher_add`, `allow_teacher_list`, `allow_teacher_edit`, `allow_teacher_del`, `allow_course_add`, `allow_course_list`, `allow_course_edit`, `allow_course_del`, `allow_student_add`, `allow_student_list`, `allow_student_edit`, `allow_student_del`, `allow_cs_add`, `allow_cs_list`, `allow_cs_edit`, `allow_cs_del`, `allow_score_add`, `allow_score_list`, `allow_score_edit`, `allow_chair_manage`, `allow_admins_add`, `allow_admins_list`, `allow_admins_edit`, `allow_admins_del`, `allow_settings`, `allow_homepage_message`, `acomment`, `admin_id`)
    VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
    ");
    $values = array($ausername,$apass,$afname,$alname,$aemail,$atel,$apic,$allow_term_add, $allow_term_list, $allow_term_edit, $allow_term_del, $allow_class_add, $allow_class_list, $allow_class_edit, $allow_class_del, $allow_lesson_add, $allow_lesson_list, $allow_lesson_edit, $allow_lesson_del, $allow_teacher_add, $allow_teacher_list, $allow_teacher_edit, $allow_teacher_del, $allow_course_add, $allow_course_list, $allow_course_edit, $allow_course_del, $allow_student_add, $allow_student_list, $allow_student_edit, $allow_student_del, $allow_cs_add, $allow_cs_list, $allow_cs_edit, $allow_cs_del, $allow_score_add, $allow_score_list, $allow_score_edit, $allow_chair_manage, $allow_admins_add, $allow_admins_list, $allow_admins_edit, $allow_admins_del, $allow_settings, $allow_homepage_message, $acomment, $admin_id);

    for($i=7;$i<45;$i++)
    if(empty($values[$i]))
        $values[$i]=0;

    $query->execute($values);
    $counts = $query->rowCount();       
    return $counts;
}

function UpdateAdmin($aid,$ausername,$afname,$alname,$aemail,$atel,$apic,$allow_term_add, $allow_term_list, $allow_term_edit, $allow_term_del, $allow_class_add, $allow_class_list, $allow_class_edit, $allow_class_del, $allow_lesson_add, $allow_lesson_list, $allow_lesson_edit, $allow_lesson_del, $allow_teacher_add, $allow_teacher_list, $allow_teacher_edit, $allow_teacher_del, $allow_course_add, $allow_course_list, $allow_course_edit, $allow_course_del, $allow_student_add, $allow_student_list, $allow_student_edit, $allow_student_del, $allow_cs_add, $allow_cs_list, $allow_cs_edit, $allow_cs_del, $allow_score_add, $allow_score_list, $allow_score_edit, $allow_chair_manage, $allow_admins_add, $allow_admins_list, $allow_admins_edit, $allow_admins_del, $allow_settings, $allow_homepage_message, $acomment, $admin_id)
{
    global $prefix;
    $query = $this->link->prepare("UPDATE `".$prefix."admins` SET `ausername`=?, `afname`=?, `alname`=?, `aemail`=?, `atel`=?, `apic`=?, `allow_term_add`=?, `allow_term_list`=?, `allow_term_edit`=?, `allow_term_del`=?, `allow_class_add`=?, `allow_class_list`=?, `allow_class_edit`=?, `allow_class_del`=?, `allow_lesson_add`=?, `allow_lesson_list`=?, `allow_lesson_edit`=?, `allow_lesson_del`=?, `allow_teacher_add`=?, `allow_teacher_list`=?, `allow_teacher_edit`=?, `allow_teacher_del`=?, `allow_course_add`=?, `allow_course_list`=?, `allow_course_edit`=?, `allow_course_del`=?, `allow_student_add`=?, `allow_student_list`=?, `allow_student_edit`=?, `allow_student_del`=?, `allow_cs_add`=?, `allow_cs_list`=?, `allow_cs_edit`=?, `allow_cs_del`=?, `allow_score_add`=?, `allow_score_list`=?, `allow_score_edit`=?, `allow_chair_manage`=?,`allow_admins_add`=?, `allow_admins_list`=?, `allow_admins_edit`=?, `allow_admins_del`=?, `allow_settings`=?, `allow_homepage_message`=?, `acomment`=?, `admin_id`=? WHERE `aid`=?
    ");
    $values = array($ausername,$afname,$alname,$aemail,$atel,$apic,$allow_term_add, $allow_term_list, $allow_term_edit, $allow_term_del, $allow_class_add, $allow_class_list, $allow_class_edit, $allow_class_del, $allow_lesson_add, $allow_lesson_list, $allow_lesson_edit, $allow_lesson_del, $allow_teacher_add, $allow_teacher_list, $allow_teacher_edit, $allow_teacher_del, $allow_course_add, $allow_course_list, $allow_course_edit, $allow_course_del, $allow_student_add, $allow_student_list, $allow_student_edit, $allow_student_del, $allow_cs_add, $allow_cs_list, $allow_cs_edit, $allow_cs_del, $allow_score_add, $allow_score_list, $allow_score_edit, $allow_chair_manage, $allow_admins_add, $allow_admins_list, $allow_admins_edit, $allow_admins_del, $allow_settings, $allow_homepage_message, $acomment, $admin_id,$aid);

    for($i=6;$i<44;$i++)
    if(empty($values[$i]))
        $values[$i]=0;

    $query->execute($values);
    $counts = $query->rowCount();

    return $counts;
}

function ResetPassword($aid,$apass)
{
    global $prefix;
    $apass = md5($apass);
    $query = $this->link->prepare("UPDATE `".$prefix."admins` SET `apass`=? WHERE `aid`=?");
    $values = array($apass,$aid);

    $query->execute($values);
    $counts = $query->rowCount();

    return $counts;
}

function ChangePassword($aid,$current_pass,$new_pass)
{
    global $prefix;
    $current_pass = md5($current_pass);
    $new_pass = md5($new_pass);
    $query = $this->link->prepare("SELECT * FROM `".$prefix."admins` WHERE `aid`=? AND `apass`=?");
    $values = array($aid,$current_pass);
    $query->execute($values);

    $counts = $query->rowCount();
    if($counts==1)
    {
        $query = $this->link->prepare("UPDATE `".$prefix."admins` SET `apass`=? WHERE aid=?");
        $values = array($new_pass,$aid);

        $query->execute($values);
        $counts = $query->rowCount();
        if($counts==1)
            return 2;
        else
            return 3;
    }
    else
        return 1;
}

function LoginAdmin($username,$password)
{
    global $prefix;
    $query = $this->link->prepare("SELECT * FROM `".$prefix."admins` WHERE ausername=? AND apass=?");
    $values = array($username,$password);
    $query->execute($values);
    $counts = $query->rowCount();

    return $counts;
}

function GetAdminInfo($username)
{
    global $prefix;
    $query = $this->link->prepare("SELECT * FROM `".$prefix."admins` WHERE `ausername`=?");
    $values = array($username);
    $query->execute($values);
    $counts = $query->rowCount();
    if($counts==1)
    {
        $result = $query->fetchAll();

        return $result;         
    }
    else
    {
        return $counts;
    }
}

function GetAdminInfoById($aid)
{
    global $prefix;
    $query = $this->link->prepare("SELECT * FROM `".$prefix."admins` WHERE `aid`=?");
    $values = array($aid);
    $query->execute($values);
    $counts = $query->rowCount();
    if($counts==1)
    {
        $result = $query->fetchAll();

        return $result;         
    }
    else
    {
        return $counts;
    }
}

function GetAdminList($query)
{
    global $prefix;
    $query = $this->link->query("SELECT * FROM `".$prefix."admins` $query ORDER BY `aid` DESC");
    $counts = $query->rowCount();
    if($counts>=1)
    {
        $result = $query->fetchAll();

        return $result;         
    }
    else
    {
        return $counts;
    }
}

function GetAdminList2($query,$start,$limit)
{
    global $prefix;
    $query = $this->link->query("SELECT * FROM `".$prefix."admins` $query ORDER BY `aid` DESC LIMIT $start,$limit");
    $counts = $query->rowCount();
    if($counts>=1)
    {
        $result = $query->fetchAll();

        return $result;         
    }
    else
    {
        return $counts;
    }
}

function UsernameAvailability($username)
{
    global $prefix;
    if(preg_match('/^[a-z\d_]{1,50}$/i', $username))
    {
        $query = $this->link->prepare("SELECT * FROM `".$prefix."admins` WHERE `ausername`=?");
        $values = array($username);
        $query->execute($values);
        $counts = $query->rowCount();
        if($counts==1)
            return 0;           
        else
            return 1;
    }
    else
    {
        return 2;
    }

}

function AdminPermission($username,$module)
{
    global $prefix;
    $query = $this->link->prepare("SELECT * FROM `".$prefix."admins` WHERE `ausername`=? AND $module=1");
    $values = array($username);
    $query->execute($values);
    $counts = $query->rowCount();
    if($counts==1)
        return 1;
    else        
        return $counts;     
}

function DeleteAdmin($aid)
{
    global $prefix;
    $query = $this->link->prepare("DELETE FROM `".$prefix."admins` WHERE `aid`=?");
    $values = array($aid);
    $query->execute($values);
    $counts = $query->rowCount();
    if($counts==1)
        return 1;
    else        
        return $counts;
}

function DelPic($id)
{
    global $prefix;
    global $pic_prefix;
    $adminInfo = $this->GetAdminInfoById($id);
    if(file_exists('../img/admins/'.$pic_prefix.$adminInfo[0]['aid'].$adminInfo[0]['apic']))
    {
        if(unlink('../img/admins/'.$pic_prefix.$adminInfo[0]['aid'].$adminInfo[0]['apic']))
            return 1;
        else
            return 0;
    }
    else
        return 1;
}

function LastAdminID()
{
    global $prefix;
    $query = $this->link->query("SELECT `aid` FROM `".$prefix."admins` ORDER BY `aid` DESC LIMIT 0,1");
    $result = $query->fetchAll();
    return $result[0]['aid'];   
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:58:15.313

在第 104 行，您`prepare`调用`$this->link`：

```
$query = $this->link->prepare("SELECT * FROM `".$prefix."admins` WHERE `ausername`=?"); 
```

`$this->link`在第 11 行设置：

```
$db_connection = new dbConnection();
$db->link = $db_connection->connect(); 
```

由于`$this->link`不是对象（很可能是 NULL 左右），因此您必须修复`$db_connection->connect()`它以使其返回带有`prepare`函数的对象。

# c# - 无法检测到右键单击 MVVM 中的列表框

> ID：15747624
> 
> 赞同：0
> 
> 时间：2013-04-01T16:50:29.630
> 
> 标签：c#, wpf, mvvm, binding

我不明白为什么在使用 MVVM 时无法检测到右键单击列表框。我使用事件触发器，但有些事件不起作用。

```
<ListBox x:Name="PlaylistsList" ItemsSource="{Binding PlaylistsList}" HorizontalAlignment="Left">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseRightButtonDown">
                <i:InvokeCommandAction Command="{Binding NewPlaylistCommand}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
</ListBox> 
```

我的命令“NewPlaylistCommand”永远不会被调用。你可以帮帮我吗 ？谢谢你。

编辑：我找到了解决问题的方法，我使用 ContextMenu 与我的 ListBoxItem 交互

```
<ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel x:Name="ListBox">
                    <TextBlock Text="{Binding Name}"/>
                    <StackPanel.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Rename" Command="{Binding RenamePlaylistCommand}"/>
                            <MenuItem Header="Delete" Command="{Binding DeletePlaylistCommand}" CommandParameter="{Binding SelectedValue, ElementName=PlaylistsList}"/>
                        </ContextMenu>
                    </StackPanel.ContextMenu>
                </StackPanel>
            </DataTemplate>
</ListBox.ItemTemplate> 
```

现在我可以右键单击我的项目以重命名或删除它。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:57:11.917

很可能里面的东西吞下了你的右键单击事件，因此它没有冒泡（我怀疑它与上下文菜单行为有关）。您可以使用以另一种方式冒泡的 Preview- 事件。

您可以使用的另一个解决方案是将交互直接应用于列表框中的每个孩子（以及他们的孩子）。

但是，老实说，从 UI 的角度来看，我并不期望右键单击播放列表会创建一个新的播放列表......我希望从我多年的 Windows 使用情况来看，应该会弹出一个上下文菜单，可能带有“添加新播放列表”菜单项。

# php - 如果语句不显示 div / h2

> ID：15747626
> 
> 赞同：0
> 
> 时间：2013-04-01T16:50:36.450
> 
> 标签：php

这对于每个 / if 语句都显示更改，然后在它的正下方显示所做的更改。

我正在尝试编写一个 if 语句，告诉它如果没有更改则不显示 h2 和 #change_box。

帮助将不胜感激。

```
<h2 class="changes"> Changes: </h2>
<div id="change_box">
<? foreach ($audit['Events'] as $event):?>  
<?if ( $event['Type'] != 'Comment'):?>  
<span class="field">
<?= $event['Field']?>
</span>:
<?= $event['Value'] ?>      
<?=($event['Previous'])?>
<?endif?>
<?endforeach?>  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:52:03.413

请在每个之后留出空间`<?`并确保您启用了短标签

```
 <?php if(is_array($audit['Events']) && $audit['Events']):?>
  <h2 class="changes"> Changes: </h2>
  <div id="change_box">
  <?php foreach ($audit['Events'] as $event):?>  
     <?php if ( $event['Type'] != 'Comment'):?>  
        <span class="field">
        <?php echo $event['Field'];?>
        </span>:
        <?php echo $event['Value']; ?>      
        <?php echo $event['Previous'];?>
     <?php endif;?>
  <?php endforeach;endif;?>  
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:52:46.630

```
<?php

    if ($changes) { // You'll have to set this variable
        //Echo all of your HTML
    else {
        //Echo the stuff you'd rather show if they didn't change anything
    }

?> 
```

让您了解我将如何编写您的代码

```
<?php

  if ($changes) {
    echo '<h2 class="changes">Changes:</h2>';
    echo '<div id="change_box">';

    foreach ($audit['Events'] as $event) { 
      if ($event['Type'] != 'Comment') {
        echo $event['Field'] . </span> . $event['Value'] . $event['Previous'];
      }   
    }

    echo "</div>"
  }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:52:50.797

你可以用`if`like来包装你的代码

```
if(count($audit['Events'])>0)
{

//Your code

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:58:31.877

你是否每次都打开和关闭 php 标签？最好在 PHP 中制作所有内容并在您想要打印 HTML 代码时回显。

```
<?php
echo "<h2 class=\"changes\"> Changes: </h2>";
echo "<div id=\"change_box\">";

foreach ($audit['Events'] as $event) {
    if ( $event['Type'] != 'Comment') {
        echo "<span class=\"field\">".$event['Field']."</span>";
        echo $event['Value'];
        echo "(".$event['Previous'] .")";
    }
}

echo "</div>";
?> 
```

# css - 流动布局中的最小边距

> ID：15747627
> 
> 赞同：0
> 
> 时间：2013-04-01T16:50:37.093
> 
> 标签：css, margin, liquid-layout

当达到最小边距时，如何防止内容跳到侧边栏下方？

[http://jsfiddle.net/7SAHm/4/](http://jsfiddle.net/7SAHm/4/)

```
<div id="wrapper">
  <div id="sidebar"></div>
  <div id="content"></div>
</div>

#wrapper {
  width: 100%;
  overflow:hidden;
}
#sidebar {
  float:left;
  width: 20%;
  min-width:50px;
  background-color:#ffb8e0;
}
#content {
  float:left;
  width:80%;
  background-color:#fff7b8;
} 
```

尝试调整浏览器窗口的大小并查看内容跳下，而不是我希望它保持彼此相邻，即使 80%+50px > 包装宽度，它应该溢出而不是跳下。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:09:35.590

您应该在 CSS 中使用媒体查询来更改百分比 -

我已经编辑了您的代码，向您展示了一个演示[http://jsfiddle.net/kevinPHPkevin/7SAHm/5/](http://jsfiddle.net/kevinPHPkevin/7SAHm/5/)

```
@media screen and (max-width: 400px) {
     #sidebar {
        width: 50%;
     }
     #content {
        width:50%;    
     }  
} 
```

# ruby-on-rails-3 - 如何通过form_for将'nil'作为参数值传递？

> ID：15747629
> 
> 赞同：1
> 
> 时间：2013-04-01T16:50:50.543
> 
> 标签：ruby-on-rails-3

feed_entries 表包含`last_clicked_on:datetime`属性，默认为 nil。我只想将“nil”作为 last_clicked_on 的值传递。但下面的代码不起作用。

```
<%= form_for @search do |f|%>
    <%= f.hidden_field :last_clicked_on, value: 'nil' %>
    <%= f.submit "History" %>
<% end %> 
```

请帮助某人解决此问题。

# javascript - node.js：如何停止已经启动的 http 请求

> ID：15747632
> 
> 赞同：26
> 
> 时间：2013-04-01T16:51:01.957
> 
> 标签：javascript, node.js

我们使用[request](https://github.com/mikeal/request)通过 node.js 发出 http 请求。我们希望用户有机会在他决定时中止请求。这意味着我们必须从请求函数之外触发 abort()。也许我们可以从函数内部检查一个外部变量。（我们已经尝试在请求开始后将超时设置为零，但这不起作用。）也许我们将变量请求设置为空。你知道更好的方法吗？

这是示例代码来显示我们正在讨论的请求类型：

应用程序.js：

```
var http = require('http');
var request = require("request");

http.createServer().listen(1337, "127.0.0.1");

request({uri: 'http://stackoverflow.com'  }, function (error, response, body) {
    console.log('url requested ') ;
    if (!error){
        console.log(body);
    }
    else
    {
        console.log(error);
    }
}); 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-01T17:59:25.600

request 函数返回一个请求对象。就这么叫`abort()`吗？

```
var r = request({uri: 'http://stackoverflow.com'  }, function (error, response, body) {
    console.log('url requested ') ;
    if (!error){
        console.log(body);
    }
    else
    {
        console.log(error);
    }
});

r.abort(); 
```

# javascript - 画布和对象

> ID：15747636
> 
> 赞同：1
> 
> 时间：2013-04-01T16:51:21.413
> 
> 标签：javascript, canvas, transformation

我正在尝试使用画布和 javascript，并且想知道是否有办法将对象组​​合在一起，以便可以将它们视为一个画布中的单个对象。所以，作为一个非常简单的例子，假设我有一个实心圆，周围是一个更大的空心圆。现在，假设我有 10 个。我想单独移动每个集合，那么有没有办法将每个集合组合为一个对象？我不想打电话单独移动每个对象。

我上面的例子有点简单，因为我实际上有 10 或 11 个对象在每个集群中分组在一起。单独移动集群中的每个对象是一种痛苦，所以我希望能够将它们组合在一起并进行一次调用来移动它们。

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T16:11:28.930

好吧，您可以将所有对象放在一个数组中，然后进行循环，如下所示：

```
var objects = [
  {x: 200, y: 130, radius: 36, color: "red"}
  ,
  {x: 150, y: 80, radius: 31, color: "blue"}
  ,
  {x: 20, y: 210, radius: 22, color: "green"}
];

for (var i = 0; i < objects.length; i++) {
  context.beginPath();
  context.arc(objects[i].x, objects[i].y, objects[i].radius, 0, Math.PI * 2, false);
  context.fillStyle = objects[i].color;
  context.fill();
  context.closePath();
} 
```

:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:25:09.540

我最近做了类似的事情，我通过将对象组绘制到屏幕外（内存中）画布来解决这个问题。移动这个画布本质上是移动“组”。

根据您的实际目标，这可能是不灵活的 - 但这是另一个需要考虑的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T18:02:10.370

您可以使用画布的“翻译”功能来绘制您的圆圈组**，而无需重新计算！**

当您使用“翻译”时，组的位置变得更简单。

**翻译只是将整个组**拖到画布上的新位置 的“幕后”数学 。

您不必为每个圈子单独计算。相反，您只需进行翻译，然后绘制圆圈，就好像它们处于起始位置一样。

这是隐含翻译的方法：

```
 // do a translate to mouseX,mouseY
      // all draws will be now be done RELATIVE to mouseX,mouseY
      // so if we ctx.translate(100,100)
      // then a ctx.rect(0,0,10,10) will actually be drawn at 100,100

      ctx.translate(mouseX,mouseY);

      // draw the ball group
      // notice we didn't have to calculate ANY new positions!!

      drawBallGroup();

      // translate back after we're done

      ctx.translate(-mouseX,-mouseY); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/4rJgw/](http://jsfiddle.net/m1erickson/4rJgw/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:10px; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    drawBallGroup();

    function drawBallGroup(){
        drawBall(8,10,5,"red");
        drawBall(20,15,10,"green");
        drawBall(25,25,8,"blue");
        drawBall(5,22,10,"orange");
        drawBall(18,30,10,"black");
    }

    function drawBall(x,y,radius,color){
        ctx.beginPath();
        ctx.fillStyle=color;
        ctx.arc(x,y,radius, 0, 2 * Math.PI, false);
        ctx.fill();
    }

    function handleMouseDown(e){
      mouseX=parseInt(e.clientX-offsetX);
      mouseY=parseInt(e.clientY-offsetY);

      // clear the canvas
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // do a translate to mouseX,mouseY
      // all draws will be now be done RELATIVE to mouseX,mouseY
      // so if we ctx.translate(100,100)
      // then ctx.rect(0,0,10,10) will actually be drawn at 100,100
      ctx.translate(mouseX,mouseY);

      // draw the ball group
      // notice we didn't have to calculate ANY new positions!!
      drawBallGroup();

      // translate back after we're done
      ctx.translate(-mouseX,-mouseY);
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});

}); // end $(function(){});
</script>

</head>

<body>
    <p>Click to move the ball group to a new location</p>
    <p>WITHOUT recalculating each new ball position!</p><br/>
    <canvas id="canvas" width=400 height=500></canvas>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T17:13:22.573

正如评论中所指出的，`Canvas`API 中没有任何内容支持对象分组。但是，`Canvas`您可以查看各种支持此类功能的库。这个[stackoverflow 问题](https://stackoverflow.com/questions/3474608/what-is-the-current-state-of-the-art-in-html-canvas-javascript-libraries-and-fra)可能是开始调查的好地方。

[例如， easel.js](http://www.createjs.com/#!/EaselJS)支持对象的嵌套和分组。如果您熟悉 ActionScript `displayList`，您会发现它非常直观，因为 API 非常相似。

您将外圈和内圈分组并将其作为单个对象进行操作的示例在画架上看起来像这样：

```
// Create a stage by getting a reference to the canvas
var stage = new createjs.Stage("canvas");

// Create a container for the circle.
var circle = new createjs.Container();

// Create the outer circle
var outerCircle = new createjs.Shape();
outerCircle.graphics.beginFill("red").drawCircle(0, 0, 40);

// Create the inner circle
var innerCircle = new createjs.Shape();
innerCircle.graphics.beginFill('green').drawCircle(0, 0, 30);

// Add inner and outer circles instance to circle container
circle.addChild(outerCircle);
circle.addChild(innerCircle);

// Now we can move the circle container and its children as a single object
circle.x = circle.y = 40;

// Add circle container instance to stage display list.
stage.addChild(circle);

// Update stage will render next frame
stage.update(); 
```

# web-analytics - 用于滚动/锚定内容的omniture假页面加载跟踪

> ID：15747637
> 
> 赞同：0
> 
> 时间：2013-04-01T16:51:22.860
> 
> 标签：web-analytics, adobe-analytics

查看我的业务需求，网络分析团队希望在用户导航到同一个长页面上的不同部分时进行 sT() '页面加载'调用。当他们滚动到或通过此内容时，这也应该发生。我觉得这可能应该通过链接跟踪调用来完成，对吗？是否有推荐的方法来处理这种情况？伪造页面加载omniture调用是否有任何文档缺陷？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:01:35.800

多次调用 st() 绝对没有问题，只要您希望将这些调用中的每一个都视为页面视图。

st() 和 s.tl() 之间的唯一区别是：

*   st() 调用增加页面浏览量，而 s.tl() 调用不增加
*   st() 调用收集 pageName 和 pageURL 而 s.tl() 调用不收集
*   st() 调用发送所有定义的变量，而 s.tl() 调用仅发送 s.linkTrackVars 中定义的变量

根据您的业务需求，如果您希望在滚动浏览页面时增加额外的页面浏览量，请务必使用 st()。如果您希望页面浏览量仅在实际页面加载时增加，请考虑使用 s.tl() 调用。

# avalonedit - 如何使用 Avalon TextEditor 获取当前垂直滚动条位置

> ID：15747648
> 
> 赞同：3
> 
> 时间：2013-04-01T16:52:21.557
> 
> 标签：avalonedit

外部资源：http: [//www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor)

我正在使用编辑器来显示日志文件，并希望它在添加新行时始终滚动到按钮，但前提是它已经在底部。

我找到了一个 ScrollToEnd() 但这意味着它总是滚动，我需要某种方式来获取当前的滚动位置？任何人发现它或知道它是否不存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T04:39:41.647

尝试这个：

```
TextView textView = textEditor.TextArea.TextView;
bool isAtEnd = textView.VerticalOffset + textView.ActualHeight + 1 >= textView.DocumentHeight; 
```

该代码添加了 1px 以避免浮点不准确的问题。

# jquery - jquery .on 事件函数触发（+ jsfiddle）

> ID：15747649
> 
> 赞同：0
> 
> 时间：2013-04-01T16:52:23.193
> 
> 标签：jquery, function, events

有许多引导选项卡，每个选项卡都有带有大量“td”元素的示例表。我们在活动选项卡的 td 上绑定一个点击事件。为了性能，我们希望每次用户更改选项卡时取消绑定前一个选项卡的点击事件。

这是演示：http: [//jsfiddle.net/hyTCy/](http://jsfiddle.net/hyTCy/)

（“显示”事件是在所有转换完成之后）

```
$('a[data-toggle="tab"]').on('shown', function (e) {

    var newt = $(e.target).attr("href"),
        prevt = $(e.relatedTarget).attr("href");

    console.log("new tab: " + newt) // activated tab
    console.log("prev tab: " + prevt); // previous tab

    $(newt + " tbody").on("click", "td", function (e) {
        console.log("click");
    });

    var validate = function () {
        console.log("prev click ok");
    };
    $(prevt + " tbody").off("click", "td", validate);
}); 
```

正常情况下，如果你访问demo，点击“profile”标签，然后点击“home”，控制台应该会显示一条消息“prev click ok”，这样我们就知道上一个标签中的事件已经解除绑定了。

为什么功能验证不能正常工作？...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:09:51.273

您对如何`.off()`工作有误。它只是取消绑定事件处理程序。它不执行传递给它的回调函数。您只传递回调函数，以便该`.off()`函数可以匹配要删除的正确事件处理程序，如果传递，它必须与传递给的函数完全相同`.on()`。当你调用它时实际上并没有调用它`.off()`。

为了`.off()`正常工作，您必须传递与注册事件完全相同的回调函数，或者您必须不传递回调（在这种情况下，所有回调都将被取消注册）。现在，您正在传递与事件无关的回调，因此不会取消注册任何事件。

重要的是呼叫必须与您尝试注销的`.off()`呼叫具有完全相同的签名。`.on()`因此，无论`.on()`呼叫看起来如何，请确保`.off()`呼叫看起来相同。这意味着事件名称需要相同，选择器需要相同，并且回调函数需要完全不传递或相同。

如果这是您要撤消的操作：

```
$(newt + " tbody").on("click", "td", function (e) {
    console.log("click");
}); 
```

然后，你会想要使用这个：

```
$(prevt + " tbody").off("click", "td"); 
```

如果您尝试仅针对该特定回调，那么您需要将第一个回调放入一个函数中，以便它可以用于`.off()`这样的：

```
function logClick(e) {
    console.log("click");
}

$(newt + " tbody").on("click", "td", logClick); 
```

并且`.off()`将使用相同的功能：

```
$(prevt + " tbody").off("click", "td", logClick); 
```

# vb6 - 在 XP 机器上使用 CreateObject 时出现错误 91

> ID：15747651
> 
> 赞同：2
> 
> 时间：2013-04-01T16:52:28.400
> 
> 标签：vb6, special-folders, createobject

我有一个旧的 VB6 应用程序，已分发给几个运行 XP、Windows 7 和 Windows 8 的用户。以下代码抛出错误 91“”对象变量或未设置块变量“。

```
Const ssfPERSONAL = 46  'set directory to the common Documents folder
Dim strMyDocsPath As String  'stores common docsPath
On Error GoTo ErrorHandler

strMyDocsPath = CreateObject("Shell.Application").NameSpace(ssfPERSONAL).Self.Path 
```

具体来说，最后一行是问题所在。我希望 strMyDocsPath 指向用户计算机上的公共文档文件夹。它在 Windows 7 和 8 中运行良好，但不能在 XP 机器上运行，除了 XP 开发机器可以顺利运行。

在有问题的计算机上，我尝试重新注册 scrrrun.dll 并收到注册成功的消息。我尝试下载和安装 VB6 可分发 SP6 文件，但仍然出现错误。我已经搜索了几个论坛，但无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T20:34:27.370

在调试此类错误时，以每行一次调用的方式将复杂的单行解集通常很有用：

```
Dim DebugObj1 As Object
Dim DebugObj2 As Object
Dim DebugObj3 As Object

Set DebugObj1 = CreateObject("Shell.Application")
Debug.Print "1: " & CStr(DebugObj1 Is Nothing)
Set DebugObj2 = DebugObj1.NameSpace(ssfPERSONAL)
Debug.Print "2: " & CStr(DebugObj2 Is Nothing)
Set DebugObj3 = DebugObj2.Self
Debug.Print "3: " & CStr(DebugObj3 Is Nothing)
strMyDocsPath = DebugObj3.Path

Debug.Print strMyDocsPath 
```

之后，更容易准确地发现什么调用没有返回有用的对象。在您的情况下，它很可能是`.NameSpace(ssfPERSONAL)`.

如果禁用共享文档，我能够在 Windows XP SP3 中重现您的问题。有很多方法可以禁用它们。看到这个，例如： http: [//www.howtogeek.com/howto/windows/how-to-remove-shared-documents-icon-from-my-computer-in-windows-xp/](http://www.howtogeek.com/howto/windows/how-to-remove-shared-documents-icon-from-my-computer-in-windows-xp/)

作为旁注，`ShellSpecialFolderConstants.ssfPersonal`实际上是`0x05`，请参阅[MSDN](https://stackoverflow.com/questions/8731534/get-common-documents-folder-in-vbs)。您使用的值`46`（或`0x2e`）`CSIDL_COMMON_DOCUMENTS`确实可以转换为 Common Documents 文件夹，例如`C:\Documents and Settings\All Users\Documents`. 使用误导性命名可能不是最好的做法。

# css - Textarea 的调整大小抓取器不会被 Chrome/Firefox 上的浮动 div 隐藏

> ID：15747652
> 
> 赞同：1
> 
> 时间：2013-04-01T16:52:33.883
> 
> 标签：css

我在通过重叠 div 的背景插入文本区域的调整大小抓取器时遇到问题。这个 div 试图像弹出对话框一样显示内容，因此它使用绝对位置来坐在文本区域的顶部。然而，这种影响被调整大小的抓取器没有被 div 正确遮挡而破坏了。

有任何想法吗？

这个 jsfiddle 为我重现了这个问题：

[http://jsfiddle.net/czerwin/bdWLw/1/](http://jsfiddle.net/czerwin/bdWLw/1/)

HTML：

```
HTML:

<div>
    <textarea>This is the text in the text area. For some reason, the resize grabber is not properly hidden by a div positioned over it.
     </textarea>
</div>
<div class="floater">Here is the overlay div. It should occlude a portion of the text area.
</div>

CSS:
.floater {
   position: absolute;
   left: 100px;
   top: 30px;
   background: white;
   border: 1px solid black;
} 
```

这发生在 Mac 10.8.3 上的 Chrome 26.0.1410.43 上。我也在 Safari 上尝试过，结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:54:44.127

改用这个...`textarea { resize: none; }`

# jsf-2 - 当两个 bean 的范围相同时，托管属性值未更新

> ID：15747655
> 
> 赞同：2
> 
> 时间：2013-04-01T16:52:43.710
> 
> 标签：jsf-2, el

我在使用`@ManagedProperty`. 我有2个豆子：

**用户管理器**（会话范围）

```
@ManagedBean
@SessionScoped
public class UserManager extends BaseBean implements Serializable
{
   private static final long serialVersionUID = 1861000957282002416L;

   private User currentUser;

   public String login() 
   {
      // set value of currentUser after authentication
   }

   public User getCurrentUser() {
      return currentUser;
   }

   public boolean isLoggedIn() {
      return getCurrentUser() != null;
   }
} 
```

**CartBean**（*也是*SessionScoped）

```
...
import javax.faces.bean.ManagedProperty;
...

@ManagedBean
@SessionScoped
public class CartBean extends BaseBean implements Serializable
{
   @ManagedProperty(value = "#{userManager.loggedIn}")
   private boolean loggedIn;

   public void updateCart(Movie selectedMovie)
   {
      if (!loggedIn) {
         return;
      }

      System.out.println("UPDATE CART REQUEST");

      int id = selectedMovie.getMovieID();

      if (cart.containsKey(id)) {
         cart.remove(id);
      }
      else {
         cart.put(id, selectedMovie);
      }
   }

   public void setLoggedIn(boolean loggedIn) {
      this.loggedIn = loggedIn;
   }
} 
```

登录成功后， 的值`loggedIn` *仍然*保持为false。

但是，如果我将 CartBean 的范围更改为`@ViewScoped`，则值`loggedIn`会更新并且我会看到 sysout。

**根据我的理解，并且在阅读了各种文章之后，只有当它具有相同**或**更广泛**的范围时，才能注入托管 bean 或其属性。但是“相同范围”的情况似乎在我的代码中不起作用。我在这里想念什么？

我在用：

*   莫哈拉 2.1.16
*   春天 3.2
*   休眠 4.1
*   雄猫 7.0.37

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:44:19.937

`@ManagedProperty`注解只能提供静态注入，这意味着被注解的属性会**在且仅当**持有`@ManagedBean`被实例化时才会被注入。

当您部署您的应用程序时，我相信您`CartBean`在一开始就通过`View cart`按钮等内容被引用。因此，注入发生得太早了，因为 bean 是`@SessionScoped`，所以您将携带初始`false`值直到时间结束:)。

与其只注入`boolean`字段，不如注入整个`UserManager`bean：

```
@ManagedBean
@SessionScoped
public class CartBean extends BaseBean implements Serializable {
   @ManagedProperty(value = "#{userManager}")
   private UserManager userManager;

   public void updateCart(Movie selectedMovie) {
       if (!userManager.isLoggedIn()) {
           return;
       }

       ...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T14:26:03.153

解决方案是使用 Omnifaces，每次值更改时它都对我有用，您将获得新值

```
@ManagedBean
@ViewScoped
public class CartBean extends BaseBean implements Serializable {

   private boolean loggedIn;

   public void updateCart(Movie selectedMovie) {
loggedIn=Faces.evaluateExpressionGet("#{userManager.loggedIN}");
       if (!userManager.isLoggedIn()) {
           return;
       }

       ...
   }
} 
```

# javascript - openlayes中的弹出问题

> ID：15747662
> 
> 赞同：0
> 
> 时间：2013-04-01T16:52:55.210
> 
> 标签：javascript, jquery, openlayers, openstreetmap

我需要制作永久弹出窗口，但只能在鼠标事件时显示它，我找到了一个示例但没有适应成就： http: [//openlayers.org/dev/examples/osm-marker-popup.html](http://openlayers.org/dev/examples/osm-marker-popup.html)

任何人都可以帮助我永久弹出弹出窗口，谢谢。

```
var mapa;
OpenLayers.IMAGE_RELOAD_ATTEMPTS = 3;
OpenLayers.ImgPath = "/openlayers/img/"
mapa = new OpenLayers.Map('map',{
    controls: [
            new OpenLayers.Control.Attribution(),
            new OpenLayers.Control.Navigation(),
            new OpenLayers.Control.PanZoomBar(),
    ],
    theme: null
});
var osm  = new OpenLayers.Layer.OSM( " Open Street Map" );
var markers = new OpenLayers.Layer.Markers( "Ruta" );
$.each(info, function(i, data){
    var size   = new OpenLayers.Size(21,25);
    var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
    var icon   = new OpenLayers.Icon('/openlayers/img/data.png',size,offset);
    var lonlat = new OpenLayers.LonLat(parseFloat(data.long),parseFloat(data.lat));
    var proj_1 = new OpenLayers.Projection("EPSG:4326");
    var proj_2 = new OpenLayers.Projection("EPSG:900913");
    var EPSG   = lonlat.transform(proj_1,proj_2);
    var marker = new OpenLayers.Marker(EPSG, icon);
    markers.addMarker(marker);
    // popup
    marker.events.register("click", marker, function(e){
        var popup = new OpenLayers.Popup.FramedCloud(data.idunidad,
                    marker.lonlat,
                    new OpenLayers.Size(200,200),
                    '<p>info in the popup, mouse event</p>',
                    null,true);
        popup.idunidad = data.idunidad;
        mapa.addPopup(popup);
        arrPopup.push(popup);
    });
});
var lonlat  = new OpenLayers.LonLat(-74.075833,4.598056);
var proj_1  = new OpenLayers.Projection("EPSG:4326");
var proj_2  = new OpenLayers.Projection("EPSG:900913");
var centrar = lonlat.transform(proj_1,proj_2);
mapa.addLayers([osm,markers]);
mapa.setCenter(centrar, 5);
mapa.addControl(new OpenLayers.Control.LayerSwitcher()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:07:06.987

为什么不使用矢量图层，你知道这个例子吗？

[http://openlayers.org/dev/examples/dynamic-text-layer.html](http://openlayers.org/dev/examples/dynamic-text-layer.html)

# iphone - 使用 MBProgressHUD 时如何使 self.view 可点击？

> ID：15747663
> 
> 赞同：1
> 
> 时间：2013-04-01T16:52:58.587
> 
> 标签：iphone, objective-c, uiview, mbprogresshud

我正在使用 MBProgressHUD 在 iphone 应用程序中显示一些消息。

消息尺寸约为 200x20，我设置了 1 秒后自动隐藏。问题是在那 1 秒内 self.view 是不可点击的。

如何将 self.view 设置为可在 self.view 中的该消息上方和下方单击？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:01:48.337

`MBProgressHUD`通过将 hud 显示为模态叠加层来发挥作用：

> MBProgressHUD 窗口跨越由 initWithFrame 构造函数提供给它的整个空间，并捕获该区域上的所有用户输入，从而防止用户对视图下方的组件进行操作。HUD 本身以圆形半透明视图居中绘制，并根据用户指定的内容调整大小。

见： http: [//orfoundation.github.com/ORFoundation/Classes/MBProgressHUD.html](http://orfoundation.github.com/ORFoundation/Classes/MBProgressHUD.html)

我发现`ZAActivityBar`这是一个很好的替代方案，`MBProgressHUD`因为它不会拦截对视图的点击。有关更多信息，请参阅[GitHub 页面](https://github.com/zacaltman/ZAActivityBar)。

# php - 如何使图像显示为图像背景

> ID：15747665
> 
> 赞同：0
> 
> 时间：2013-04-01T16:53:21.070
> 
> 标签：php, html, css

下面的代码将图像多次显示为 10 个不同的图像，需要它是完整的图像..

```
<HTML>

<BODY >

<style>
body {background-image:url('back1.jpg');}
</style>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:58:28.420

像这样的东西一直对我有用。

```
body {
    background: url(cool-image.jpg) no-repeat center center;
    top:0;
    left:0;
    min-width:100%;
    min-height:100%;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
   background-size: cover; 
}

</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T16:55:48.973

试试这个...

```
html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T16:54:26.680

```
<HTML>

<BODY >

<style>
body {background-image:url('back1.jpg');background-repeat:no-repeat;} // add the no repeat 
</style>

</BODY>
</HTML> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:56:50.777

```
background-repeat: no-repeat;
background-size: cover; 
```

# ios - iOS Buttons 只显示一行文本

> ID：15747667
> 
> 赞同：0
> 
> 时间：2013-04-01T16:53:40.903
> 
> 标签：ios, button, text, uibutton

我有一些带有许多按钮的视图控制器。现在大约三分之一的按钮只显示一行文本。文本是通过情节提要的属性检查器输入的（不是以编程方式）。

这个问题似乎没有任何规律。

按钮需要很小，所以每个按钮有几行（大约在两到八行之间）。

是的，按钮足够大，可以显示所有文本。

Xcode 4.6，部署目标 iOS 6.1，按钮类型：自定义，状态配置：默认，标题：普通。

任何帮助将不胜感激！你们真棒。

编辑：情节提要文件显示所有行，但 iPad（模拟器）没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:59:28.880

将按钮 textlabel 的 lineBreakMode 设置为 UILineBreakModeWordWrap (NSLineBreakByWordWrapping for Ios 6+)。它应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:13:16.147

你（们）能做到

```
button.titleLabel.numberOfLines =0; 
```

button.titleLabel 的行为类似于 UILabel。UILabel 的所有属性都有效。

编辑：在 .xib 文件中单击要更改的按钮。在“换行符”中选择“自动换行”

# c++ - 如何从 std::function 获取这个指针？

> ID：15747669
> 
> 赞同：5
> 
> 时间：2013-04-01T16:53:47.920
> 
> 标签：c++, this, std-function, this-pointer

由于`std::function`可以保存成员函数，所以它必须在某处存储指向对象实例的指针。

如何从包含成员函数`this`的 a 中获取指针？`std::function`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T17:05:23.610

一个类型的对象`std::function`拥有一个**可调用对象**。指向成员函数的指针是一种可调用对象；可以使用适当的类类型的参数以及它需要的任何其他参数来调用它。例如：

```
struct S {
    void f(int);
};
std::function<void(S, int)> g(&S::f); 
```

要调用它，请传递一个类型的对象`S`：

```
S s;
g(s, 3); 
```

请注意，该`std::function`对象不**包含**对象`S`；只有当你调用它时，函数指针才会绑定到一个对象。

# php - 计算平面上两点之间的距离？(php)

> ID：15747673
> 
> 赞同：-2
> 
> 时间：2013-04-01T16:53:57.037
> 
> 标签：php, distance, points, flat

三年级问题：

如何计算平面上两点之间的距离？

我一直在浏览[Google_Results](http://www.google.com/q=distance+between+two+points+php)，似乎我发现的所有内容都适用于 Long/Lat 而不是平面。

我正在努力让 ObjectA 在 ObjetsC,D,E... 之间进行选择，选择最接近的一个并朝它移动。所以我必须遍历我的 SQL 表，取出范围内的内容，然后遍历结果以计算距离。

对于我多年来不必记住的数学的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T17:02:57.960

您将需要使用[欧几里得距离公式](http://en.wikipedia.org/wiki/Euclidean_distance#Two_dimensions)（特别是二维）。基本上公式是：

```
d = sqrt((x1 - x2)^2 + (y1 - y2)^2) 
```

*   `d`是你最后的距离
*   `sqrt`是平方根（[`sqrt()`](http://php.net/manual/en/function.sqrt.php)PHP 中的函数）
*   `x1`并且`y1`是您的第一个点的 xy 坐标
*   `x2`并且`y2`是您的第二点的 xy 坐标
*   `^2`表示提升到二次方（使用[`pow()`](http://php.net/manual/en/function.pow.php)PHP 的函数）

[毕达哥拉斯](http://en.wikipedia.org/wiki/Pythagoras)是希腊哲学家，他提出了[勾股定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)，可以用来推导二维距离公式（不同于[欧几里得](http://en.wikipedia.org/wiki/Euclid)的推导）。

# sql - SQL Server 查询以查找成员注册的年数

> ID：15747677
> 
> 赞同：3
> 
> 时间：2013-04-01T16:54:01.873
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有 2 张桌子：

桌子`tbmembers`

```
id   name
----------
 1    abc
 2    def
 3    ghi 
```

桌子`tbmemberenrollment`

```
id    memberid(foreign key)   startyear    endyear
--------------------------------------------------
 1            1                2007       2009
 2            1                2011       2012
 3            1                2013       2017 
```

在`tbmemberenrollment`表中，我想计算会员注册到当年的年数，在这种情况下，结果将是 6 年（2007、2008、2009、2011、2012、2013）

我想通过SQL查询计算上述结果，我不知道如何在SQL Server中使用for循环或如何使用游标来获得上述结果，请帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:18:57.080

假设您的年份可能重叠（2007-2008 年，然后是 2008-2009 年），我看到的最佳选择是创建一个 Years 查找表并对其进行查询，如下所示：

```
SELECT m.id, m.name, COUNT(DISTINCT y.yearfield) YearCount
FROM tblmembers m 
  CROSS JOIN YearLookup Y 
  INNER JOIN tbmemberenrollment me 
    ON m.id = me.memberid 
      AND YEAR(y.yearfield) >= YEAR(me.startyear)
      AND YEAR(y.yearfield) <= YEAR(me.endyear)
AND YEAR(Y.yearField) <= YEAR(GetDate())
GROUP BY m.id, m.name 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/2bb81/3)

如果您的数据没有这些重叠的年份，那么您可以执行以下操作来获得结果：

```
SELECT m.id, m.name, 
  SUM(
    CASE 
      WHEN YEAR(me.endyear) > YEAR(getDate()) 
      THEN YEAR(getDate()) 
      ELSE YEAR(me.endyear) 
    END - YEAR(me.startyear) + 1
    ) totYears
FROM tblmembers m 
  LEFT JOIN tbmemberenrollment me on m.id = me.memberid
WHERE YEAR(me.startyear) <= YEAR(getDate())
GROUP BY  m.id, m.name 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/15d6a/1)

*编辑：使用递归 CTE 与查找表*

虽然我仍然建议使用查找表，但有时这不是一个可行的选择。在这些情况下，您可以使用递归 CTE 完成同样的事情。

```
WITH years AS (
  SELECT MAX(endyear) maxyear, MIN(startyear) minyear 
  FROM tbmemberenrollment
  ),
RecursiveCTE AS (
  SELECT minyear yearfield
  FROM years
  UNION ALL
  SELECT DATEADD(year, 1, yearfield)
  FROM RecursiveCTE R 
    JOIN years T
      ON R.yearfield < T.maxyear
  )
SELECT m.id, m.name, COUNT(DISTINCT y.yearfield) YearCount
FROM tblmembers m 
  CROSS JOIN RecursiveCTE Y 
  INNER JOIN tbmemberenrollment me 
    ON m.id = me.memberid 
      AND YEAR(y.yearfield) >= YEAR(me.startyear)
      AND YEAR(y.yearfield) <= YEAR(me.endyear)
AND YEAR(Y.yearField) <= YEAR(GetDate())
GROUP BY m.id, m.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:12:53.903

怎么样？：

```
SELECT Count(DISTINCT c.yr) 
FROM   (SELECT a.startyear AS yr 
        FROM   tbmemberenrollment a 
        UNION 
        SELECT b.endyear AS yr 
        FROM   tbmemberenrollment b) AS c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:46:14.947

这是 CTE 查询的一个很好的条件。

```
;with memberEnrollment_CTE(memberid, Eyear, Startyear, Endyear)
as
(
  SELECT memberid, startyear as EYear, startyear, endyear
  from dbo.tbmemberenrollment
  union all
  select memberid, Eyear+1, Startyear, Endyear
  from memberEnrollment_CTE
  where endyear>yyear
)
select distinct memberid, Eyear as EnrolledYear from memberEnrollment_CTE where     
 Eyear<=     YEAR(GETDATE()) 
```

这甚至适用于重叠注册年份。并且应该给你所有的岁月，所以你可以对此运行 count() 查询或加入成员表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T18:07:18.463

如果您的年份*不*重叠，您可以进行聚合：

```
select tm.name,
       sum(case when endyear <= year(getdate()) then endyear - startyear + 1
                else year(getdate()) - startyear + 1
           end) as EnrollmentYears
from tmembers tm join
     tbmemberenrollment tme
     on tm.id = tme.memberid
where startyear <= year(getdate()) 
```

# c# - 预期 C# 语法错误值

> ID：15747682
> 
> 赞同：0
> 
> 时间：2013-04-01T16:54:16.493
> 
> 标签：c#, syntax-error

我这里有这两行代码

```
var unitsMap = new[] { "zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten", "eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen" };
        var tensMap = new[] { "zero", "ten", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety" }; 
```

`[]`而且在我的预期语法错误值下，我不断收到红色波浪错误下划线。而且我的所有值（一、二、三等）下面也有一个红色波浪形错误下划线，但不是零……错误是；预期的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:02:29.200

正如大卫所说，您必须使用不支持匿名声明的不同框架。

我只是使用 4.5 框架尝试过它并没有抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:59:17.460

您使用的是不支持 var 关键字的旧版 C#，这是在 v3.0 中引入的，VS 的最低支持版本是 2008。

您的版本中的等效项是：

```
string[] unitsMap = { "zero", "one", ... };
srring[] tensMap = { "zero", "ten", ... }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:06:13.007

if "; is expected" 可能在这些行之前您忘记结束上一行。否则重新编译。有时，必须重新启动智能感知（不知道为什么）。如果您再次看到此错误，请重新启动 VS。

# c - openmp 共享数组

> ID：15747687
> 
> 赞同：1
> 
> 时间：2013-04-01T16:54:41.907
> 
> 标签：c, parallel-processing, openmp

我有两个使用共享数组和共享布尔标志的 nasted for(s)，我知道在尝试写入数组时可能会发生冲突，但是如果我使这些部分变得至关重要，我将失去并行处理的所有好处。有什么选择可以避免这种情况并且仍然可以并行工作吗？谢谢

```
#pragma omp parallel 
{
#pragma omp for schedule (guided)
            for(int i=0;i<N-1;i++)
            {
                for(int j=i+1;j<N;j++)
                {
                    if(cluster[i*N+j]!=0)
                    {
                        inner_set[i]=1;// Critical???
                        inner_set[j]=1;
                    }
                    else
                    {
                        outter_set[i]=1;
                    }
                }
            }
}

do
{
    isChanged=false;
#pragma omp parallel for schedule (guided)      
            for(int i=0; i<N; i++)
            {
                if(inner_set[i]!=0)
                {
                    for (int j=0; j<N;j++)
                    {
                        if(i!=j && outter_set[j]!=0)
                        {
                            if(dis[i*N+j]<Dis)
                            {
                                isChanged=true;
                                inner_set[i]=0;//critical???
                                outter_set[i]=1;
                            }
                        }

                    }
                }

        }
}while(isChanged); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:35:06.660

首先，并行性是沿着**索引 i**和 j 从**(i+1)->N**运行的所有线程。所以你认为**关键**的不是。下一行即

```
inner_set[j] = 1 
```

实际上被所有线程覆盖。

您需要对该行**至关重要的#pragma omp 。**

出于同样的原因，第二个循环再次有利于并行性。

# mysql - 分组重复记录时的MySQL查询

> ID：15747688
> 
> 赞同：0
> 
> 时间：2013-04-01T16:54:42.607
> 
> 标签：mysql, database

我正在尝试编写一个查询，该查询将找到我们所有具有下拉和样本混合选项的 sku。

我们有一个存储此信息的表，但设置有点奇怪。对我来说很重要的专栏是。

```
-------------------------------------------
sku | option_flag | swatch_flag | sequence
------------------------------------------- 
```

sku 可能有多个重复记录，因为其他列会根据 sku 的设置方式而变化。

我的预期结果是这样的。

```
-------------------------------------------
 sku  | option_flag | swatch_flag | sequence
-------------------------------------------
aa001 |      YES    |    NO       |     1
-------------------------------------------
aa001 |      YES    |    YES      |     2
-------------------------------------------
aa001 |      YES    |    NO       |     3
------------------------------------------- 
```

到目前为止，我有这个，它是按 sku 分组的，但它仍然不包括 option_flag。也许不是按 sku 分组，有没有办法要求按 1 2 3 - 1 2 3 等顺序对其进行排序。

```
SELECT a.*
FROM sku_parent_attributes AS a
INNER JOIN
    (SELECT sku
    FROM sku_parent_attributes
    WHERE option_flag = 'yes'
    GROUP BY sku
    HAVING COUNT(sku) = 3) AS b
ON a.sku = b.sku; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:58:39.217

试试这个：

```
SELECT a.*,b.sku
FROM sku_parent_attributes AS a
INNER JOIN
sku_parent_attributes as b
ON a.sku = b.sku
GROUP BY b.sku
HAVING COUNT(b.sku) = 3 
```

完整查询内的 where 条件，而不仅仅是子查询内的条件。

# css - div 元素在指定时不会像块一样

> ID：15747694
> 
> 赞同：0
> 
> 时间：2013-04-01T16:55:04.513
> 
> 标签：css

好的，我的对齐有两个问题。

首先，正在创建 div 左侧的 2 个边框，但我不明白为什么会这样。我只希望创建一个边框。宽度是 1px，所以它不应该这样吗？

第二个问题是紫色的 div（底部有 2 个），我没有包含在这张图片中，但它基本上是这个类的 div：

```
.reviewsContent {
    clear:both;
    display: block;
    margin:0;
    padding:0;
    margin-left: 25px;
    background-color: purple;
} 
```

这个 div（紫色）不应该与蓝色 div 重叠，因为它是一个块，但它确实..

谢谢 ！

[大图在这里](http://i.imgur.com/U56krL0.jpg)

这是html代码

```
<div class="productWrapper">
        <div class="productName">LG 6.3 Cu. Ft. Self-Clean Smooth Top Range <br> <span class="categoryText">Dishwashers</span></div>
        <div class="productContent">
            <div class="subtitleText">Product Description</div>
            <p class="productText">
                some product descrip tion some product descrip tion some product descrip tion some product descrip tion some product descrip tion 
                some product descrip tion some product descrip tion some product descrip tion
            </p>
            <div class="subtitleText">Product Details</div>
            <p class="productText">
                Width: <br>
                Height: <br>
                Weights: <br>

            </p>
        </div>

        <div class="productImage">
            <img class='productImage' src='images/c000002.jpg'>
            <div class="productImageInfo">In-stock: 10 ................................... ADD CART BUTTON</div>
        </div>

        <div class="reviewsContent">Reviawe fawe a..</div>
        <div class="reviewsContent">Reviews..</div>
    </div> 
```

这是CSS表

```
.productWrapper {
    /*background-color: red;*/
    margin:0;
    padding:0;
    /*height:1000px;*/
    margin-left: 230px;
    padding-top:10px;
    /*font-family: "Open Sans",Verdana,sans-serif;*/
    font-family: calibri;
    color: #000000;
}

.productName {
    font-size: 24px;
    //font-size: 22px;
    margin:0;
    padding:0;
    margin-left:25px;
    padding-bottom: 15px;
    margin-bottom: 15px;
    color: #444444;
    /*background-color:green;*/
    border-bottom: 1px solid;
    border-color: #E4E4E4;
}

.productContent {
    display: inline-block;
    vertical-align: top;
    background-color:gray;
    margin:0;
    padding:0;
    margin-left:25px;
    width: 350px;
    border: none;
}

.productImage {
    display: inline-block;
    vertical-align: top;
    width: 330px;
    max-width: 330px;
    height: 330px;
    max-height: 360px;
    padding:0;
    margin:0;
    padding-left: 8px;
    border-left: 1px solid;
    border-color: #E4E4E4;
    /*float: right;
    //padding-left: 5px;
    background-color:blue;*/
}

.productImage img {
    display: inline-block;
    margin:0;
    padding:0;
    /*float:right;*/
    /*background-color:blue;*/
}

.productImageInfo {
    display: block;
    margin:0;
    padding:0;
    padding-left: 8px;
    margin-right: 8px;
    background-color: blue;
    width: auto;
}

.reviewsContent {
    clear:both;
    display: block;
    margin:0;
    padding:0;
    margin-left: 25px;
    background-color: purple;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:03:17.713

据我所知，到目前为止，这有两个问题：

首先，您已将`productImage`类应用于 the`div`和`img`标签。这就是为什么你有两个边界。`div`得到一个，得到`img`另一个从`productImage`班上。

div 似乎没有相互清除的原因是因为它们在 DOM 中的位置。

审查 div 实际上正在清除`productImage`div，但是您明确地给它一个高度，它不足以容纳您的图像和信息。由于信息在`productImage`div 内，因此不会被清除，因为我认为在布置评论时不会考虑它。

如果你将类的高度`productImage`增加到 380px，然后将`productImage`类从 div 中取出，[那么我认为你得到了你想要的。](http://jsfiddle.net/gvRGq/5/embedded/result/)

请记住，图像所在的位置仍然存在一些视觉中断，因为图像的背景是白色的，页面的背景是灰色的，但是边框消失了。

# java - 在 setcontentview 之后获取要显示的布局？

> ID：15747695
> 
> 赞同：0
> 
> 时间：2013-04-01T16:55:14.723
> 
> 标签：java, android, android-asynctask

所以我希望在启动一堆异步任务之前显示我的主 UI。但是，在调用 setcontentview 行后的调试模式下，布局不会显示在屏幕上。在运行多个线程之前如何让它显示出来？示例如下

```
SetContentView(R.layout.main)

//loop and run multiple asynctask threads 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:03:16.377

`setContentView()`在主 UI 线程中调用。这意味着如果您正在调试，您会阻塞 UI 线程，并且`onCreate()`在完成之前不会显示任何 UI。将断点`doInBackground()`移到 AsyncTask 内，您将看到 UI。

# php - php 在 HTML 中被注释掉

> ID：15747702
> 
> 赞同：1
> 
> 时间：2013-04-01T16:55:33.517
> 
> 标签：php, html

我正在构建一个用户表单，我正在使用 php 作为表单的值。

```
 <select id="customerInput" name="customerId" style="width:300px"> 
        <?  foreach (array_slice($customers, 1) as $row) { ?>
        <option value="<? echo $row['CustomerID']; ?>"> <? echo $row['Name'];  ?> </option> <? } ?>
    </select> 
```

希望您能看到我正在尝试做什么...我希望选项值是客户 ID，并在字段中写入客户名称。

当我运行它并查看源代码时，php 被注释掉等并且不起作用

我不知道为什么......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T16:57:02.887

试试这个*（更改`<?`为`<?php`）*：

```
<select id="customerInput" name="customerId" style="width:300px"> 
        <?php 
          foreach (array_slice($customers, 1) as $row) { ?>
             <option value="<?php echo $row['CustomerID']; ?>"> <?php echo $row['Name'];  ?> </option>
       <?php } ?>
</select> 
```

# android - 使用 phonegap-2.5.0 创建项目时出错

> ID：15747714
> 
> 赞同：0
> 
> 时间：2013-04-01T16:56:12.237
> 
> 标签：android, iphone, linux, cordova, hybrid-mobile-app

我已经安装了 android sdk 并在 fedora 18 中下载了最新版本的 phonegap 2.5.0。

我正在尝试使用以下命令创建一个项目

```
./create ~/Desktop/android-project com.example.android android_project 
```

我收到以下错误。

```
 which: no android in (/sbin:/bin:/usr/sbin:/usr/bin)
    An unexpected error occurred: ANDROID_BIN="${ANDROID_BIN:=$( which android )}" exited with 1 
```

需要您的宝贵建议。

终于找到了答案

在检查了我的 .bash_profile 路径和一堆挖掘之后，我终于找到了问题的原因。如果您打开创建文件 (phonegap-2.5.0/lib/android/bin/create)，有一行列出 ANDROID_BIN=”${ANDROID_BIN:=$( which android )}”。“哪个android”是问题的原因（或者至少在我看来是这样）。如果您将此行替换为您的 android 工具的完整路径（如下所示），它应该可以解决问题。我的最后一行看起来像这样：

```
ANDROID_BIN=/Users/ktyacke/DEV/adt-bundle-mac-x86_64-20130219/sdk/tools/android 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:03:51.997

您收到的消息意味着 phonegap 脚本找不到您下载的 SDK 中包含的*android二进制文件。*将二进制文件的目录以及 android 工具的目录添加到 ~/.bash_profile 中定义的路径或您正在初始化 shell 环境变量的任何其他位置。

# matlab - matlab如何画斜率场

> ID：15747718
> 
> 赞同：4
> 
> 时间：2013-04-01T16:56:25.773
> 
> 标签：matlab, math, differential-equations

我一直在寻找一种在 Matlab 中绘制坡度场的方法。

这是我正在寻找的：

我有一个方程

```
dy/dx = f(x,y) 
```

或者

```
dx/dt = f(x,y)
dy/dt = g(x,y) 
```

我想以一种很好的方式画出来

因为这里唯一的[答案](https://stackoverflow.com/questions/7761685/how-to-get-a-vector-field-that-maps-the-slopes-of-an-equation)是没有回答我的问题，所以我花了一些时间才找到如何做到这一点。

也因为这不是我在 matlab 中一直在做的事情（很可能直到下次我需要它时，我会忘记它）我正在为我创建一个备忘录如何做到这一点。

如果觉得有用，欢迎点赞

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T17:01:51.747

所以这是等式：

```
dx/dt = x^2-3xy+y
dy/dt = -5x+sin(yx) 
```

这就是代码，这将有助于完成这项工作：

```
[x,y] = meshgrid(-2:0.2:2);
dx = x.^2-3*x.*y+y;
dy = -5*x+sin(x.*y);
r = ( dx.^2 + dy.^2 ).^0.5;
px = dx./r;
py = dy./r;
quiver(x,y,px,py); 
```

也可以使用包 dfield。你可以在[这里](http://www.cfm.brown.edu/people/dobrush/am33/files/tutorial.pdf)阅读。但我没有为自己测试过

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-30T20:25:04.687

另一个方便的解决方案是：

`[x,y] = meshgrid('start':'step':'end');`

`dy = 'f(x,y)';`

`norm = sqrt(dy.^2+1^2);`

`quiver(x, y, ones(size(x))./norm, dy./norm, 'magnification' )`

* * *

例如，如果 dy 是 dy = x+y

```
[x,y] = meshgrid(-2:0.2:2);

dy = x+y;

norm = sqrt(dy.^2+1^2);

quiver(x, y, ones(size(x))./norm, dy./norm, 0.5 ) 
```

# java - 如何执行依赖对象的方法？

> ID：15747719
> 
> 赞同：0
> 
> 时间：2013-04-01T16:56:27.507
> 
> 标签：java, oop

我有`Canvas`几个`Shape`对象。对象是可选择的，并在 和 中进行`lastSelection`跟踪`currentSelection`。

在 shift+click 上，我想`Shapes`通过一条线连接一些。但是对于每个`Shape`实现，建立连接的方式应该是不同的。

如何重写以下内容并摆脱 1）instanceof 检查，2）类型转换？

```
class Shape;
class Ellipse extends Shape;
class Line extends Shape;
class Square extends Shape;
//some more

Shape lastSelection;
Shape currentSelection;

onClick() {
    if (lastSelection instanceof Ellipse && currentSelection instanceof Ellipse) {
        connect((Ellipse) lastSelection, (Ellipse) currentSelection);
    }
    if (lastSelection instanceof Square && currentSelection instanceof Square) {
        connect((Square) lastSelection, (Square) currentSelection);
    }
    //some more
}

connect(Ellipse e1, Ellipse 2) {}
connect(Square s1, Square s2) {} 
```

# javascript - 替换正则表达式中以特定字符开头并以特定字符结尾的字符串

> ID：15747725
> 
> 赞同：3
> 
> 时间：2013-04-01T16:56:39.503
> 
> 标签：javascript, regex

我想替换以特定字符开头并以特定字符结尾的字符串部分。在下面，我演示了测试用例。

```
var reg = /pattern/gi;

var str = "asdfkadsf[xxxxx]bb";

var test = str.replace(reg,"") == "asdfkadsfbb"

console.log(test); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T17:00:35.637

此模式适用于替换括号之间的任何内容（包括括号）：

```
var reg = /(\[.*?\])/gi;

var str = "asdfkadsf[xxxxx]bb";

var test = str.replace(reg,"") == "asdfkadsfbb" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:02:39.140

根据您的示例，这有效：

```
/\[.*]/gi 
```

# android - 将用户定义对象的数组列表传递给 Intent android

> ID：15747727
> 
> 赞同：9
> 
> 时间：2013-04-01T16:56:41.270
> 
> 标签：android, android-intent, bundle, extras

我正在尝试将arraylist的结构传递给一个意图，如下所示，在我正在使用的调用函数中

```
ArrayList<Parliament> s=(ArrayList<Parliament>)msg.obj;                                 
Intent i = new Intent(ReadTasks.this, GenrateTasks.class);                          
i.putExtra("tasks", s);
startActivity(i); 
```

并在被调用函数中

```
Bundle b = getIntent().getExtras();
if(b!=null)
{           
    ArrayList<Parliament> as = (ArrayList<Parliament>)b.getSerializable("tasklist");
} 
```

我已经在这两个类中给出了可序列化的实现，但是我无法编组.. 在线启动活动中调用函数中的运行时错误。请帮助如何进行！

编辑 1：堆栈跟踪：

```
04-01 22:21:53.999: E/AndroidRuntime(2078): FATAL EXCEPTION: main
04-01 22:21:53.999: E/AndroidRuntime(2078): java.lang.RuntimeException: Parcel: unable to marshal value com.viralm.readjson.Parliament@413597f0
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.os.Parcel.writeValue(Parcel.java:1137)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.os.Parcel.writeList(Parcel.java:524)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.os.Parcel.writeValue(Parcel.java:1097)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.os.Parcel.writeMapInternal(Parcel.java:493)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.os.Bundle.writeToParcel(Bundle.java:1612)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.os.Parcel.writeBundle(Parcel.java:507)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.content.Intent.writeToParcel(Intent.java:5846)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1606)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.app.Activity.startActivityForResult(Activity.java:3190)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.app.Activity.startActivity(Activity.java:3297)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at com.viralm.readjson.ReadTasks$1.handleMessage(ReadTasks.java:61)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.os.Looper.loop(Looper.java:137)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at android.app.ActivityThread.main(ActivityThread.java:4340)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at java.lang.reflect.Method.invokeNative(Native Method)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at java.lang.reflect.Method.invoke(Method.java:511)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-01 22:21:53.999: E/AndroidRuntime(2078):     at dalvik.system.NativeStart.main(Native Method) 
```

我的 Parliment 类有 5 个字符串及其设置器和获取器！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-01T17:01:52.717

> 我已经在这两个类中给出了可序列化的实现，但是我无法编组.. 在线启动活动中调用函数中的运行时错误。请帮助如何进行！

由于您使用的是[Serializable](http://developer.android.com/reference/java/io/Serializable.html)，因此您不能像现在这样。我建议您将 ArrayList 包装到名为**DataWrapper**的类中。这个类还需要实现 Serializable，然后你就可以通过 Intent 传递 ArrayList。

## 例子：

```
public class DataWrapper implements Serializable {

   private ArrayList<Parliament> parliaments;

   public DataWrapper(ArrayList<Parliament> data) {
      this.parliaments = data;
   }

   public ArrayList<Parliament> getParliaments() {
      return this.parliaments;
   }

} 
```

还有一个用法：

```
Intent i = new Intent(...);
i.putExtra("data", new DataWrapper(yourArrayList)); 
```

并检索：

```
DataWrapper dw = (DataWrapper) getIntent().getSerializableExtra("data");
ArrayList<Parliament> list = dw.getParliaments(); 
```

## 笔记：

还有使用[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)接口的选项。如果您将使用它，您可以使用以下方法放置和检索您的 ArrayList：

```
intent.putParcelableArrayListExtra("key", ArrayList<T extends Parcelable> list);
getIntent().getParcelableArrayListExtra("key"); 
```

*通常建议使用直接指定用于通过活动传递对象的 Parcelable 接口，但我通常使用 Serializable 接口，它总是有技巧。*

还要注意错别字。您正在使用键放置对象，**`task`**您应该使用**相同的键**而不是任务列表来检索它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-02T15:05:26.553

Implementation of Serializable is deemed low performant where as Parcelable is encouraged.

I had the exact same question and while still hassling with the `Parcelable`, I found out that the **static variables** are not such a bad idea for the task.

You can simply create a

```
public static ArrayList<Parliament> myObjects = .. 
```

and use it from elsewhere via `MyRefActivity.myObjects`

I was not sure about what public static variables imply in the context of an application with activities. If you also have doubts about either this or on performance aspects of this approach, refer to:

*   [What's the best way to share data between activities?](https://stackoverflow.com/questions/4878159/android-whats-the-best-way-to-share-data-between-activities)
*   [Using static variables in Android](https://stackoverflow.com/questions/2475978/using-static-variables-in-android)

Cheers.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T06:58:38.880

让您的对象类 Parcelable 稍后尝试使用

```
bundlename.putParcelableArrayList 
```

# jquery - jQuery 从动态创建的输入中获取内容

> ID：15747738
> 
> 赞同：0
> 
> 时间：2013-04-01T16:57:19.617
> 
> 标签：jquery, dynamic, input

我在获取从表中的内容创建的动态创建输入的值时遇到问题。它用于编辑操作，但是......当我完成编辑时我无法获得它的值。这是我的代码的一部分：

```
$(document).delegate('button#editContact', 'click', function(e) {
    e.preventDefault();
    var firstName = $('input[name="firstName"]').val();
    alert(firstName);
    var lastName = $('input[name="lastName"]').val();
    alert(lastName);
}); 
```

这 是整个代码[。](http://jsfiddle.net/XZNQS/4/)有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:46:53.757

我找到了一个解决方案，它是：[Superlive](http://www.youtube.com/watch?v=mh5mGR2GyLY)，无论何时，您都可以将它用于创建的每个元素，只需传递选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:04:55.633

它是否必须在 jQuery 中，在 vanilla javascript 中，您可以使用 getElementsByTagName。前任：

```
var allInputs = document.getElementsByTagName("input");
for(var i = 0; i < allInputs.length; i++){
   var id = allInputs[i].id;
   alert(document.getElementById(id).value);
} 
```

我在生成 n 个动态生成的输入时使用了这种方法。

希望能帮助到你

# c++ - Doxygen如何按路径分隔类？

> ID：15747739
> 
> 赞同：4
> 
> 时间：2013-04-01T16:57:23.713
> 
> 标签：c++, class, doxygen

那么在 Doxygen 中，一个类究竟是如何按路径分开的呢？我尝试过使用组和部分，但由于某种原因，它总是会组合具有相同名称的类。

当前文件结构如下：

```
Trunk
 |
 +-> Client -> DemoClass.h
 |
 +-> Server -> DemoClass.h
 |
 +-> Shared -> OtherClass.h 
```

问题是我不想要 doxygen 中的 1x DemoClass 包含所有组合的功能，我想要 2 个单独的部分/类，如 Server/DemoClass、Client/DemoClass。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:49:59.043

这是一个已知的限制，请参见[http://www.doxygen.org/manual/trouble.html](http://www.doxygen.org/manual/trouble.html)的第 4 条。

我建议制作单独的项目，一个用于服务器，一个用于客户端，因为它们永远不可能合法地存在于一个可执行文件中，或者使用命名空间。

文件名可以相同，这不是问题。

# error-code - 广告 API - 自定义受众 - 错误代码 #U8i8

> ID：15747744
> 
> 赞同：0
> 
> 时间：2013-04-01T16:57:41.403
> 
> 标签：error-code, facebook-ads-api

我们有一个客户使用 Ads API 为收到错误代码 #U8i8 且没有任何其他信息的自定义受众上传了一批电话号码。集群 ID 是 6006341262522。我们在最初的开发过程中也看到了这个错误，并且相信即使针对同一个文件，它也可能是暂时的。关于这意味着什么的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:31:03.653

这意味着您的观众是空的，可能是因为电话号码格式错误。您在上传之前是否规范了您的电话号码？

*   通过删除任何符号、字母和任何前导零来规范化电话号码。
*   在电话号码前加上国家代码。例如，为美国电话号码添加“1”。

# if-statement - 批处理文件中的嵌套 If Exist 语句

> ID：15747745
> 
> 赞同：5
> 
> 时间：2013-04-01T16:57:53.637
> 
> 标签：if-statement, batch-file

好的，我正在尝试执行几个嵌套的 IF EXIST 语句来检查几个文件夹的存在。如果第一个文件夹存在，请将 Folder1 设置为等于 1，然后跳至安装。与 Folder2 相同，然后如果两个文件夹都不存在，则跳过安装。

但即使 Folder1 不存在，这仍然将 %Folder1% 设置为等于 1。我错过了什么/没有做什么？

谢谢！

```
if exist "c:\folder1" set Folder1=1
    echo %Folder1%
    goto install
else if exist "c:\folder2" set Folder2=1
    echo %Folder2%
    goto Install
else goto Install   

:Install 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T17:09:38.210

两个基本问题：

复合语句必须用括号括起来。在括号内，更改变量值将不可见，除非您执行了`SETLOCAL ENABLEDELAYEDEXPANSION`- 并且即使这样您也需要使用 !var! 不是 %var%

所以：

```
SETLOCAL ENABLEDELAYEDEXPANSION
if exist "c:\folder1" (
        set Folder1=1
        echo !Folder1!
        goto install
) else if exist "c:\folder2" (
        set Folder2=1
        echo !Folder2!
        goto Install
) else goto Install 

:Install 
```

或者最好是，

```
@ECHO off
if exist "c:\folder1" (
        set Folder1=1
        goto install
) else if exist "c:\folder2" (
        set Folder2=1
        goto Install
) else goto Install 

:Install

SET folder 
```

或者更简单

```
@ECHO off
if exist "c:\folder1" set Folder1=1&goto install
if exist "c:\folder2" set Folder2=1&goto Install
:Install

SET folder 
```

* * *

测试：

```
@ECHO OFF
setlocal
SET "folder1="
SET "folder2="
ECHO.----------No folders
DIR /b /ad c:\folder*
CALL :test
ECHO.----------Folder 1 only
MD c:\folder1
DIR /b /ad c:\folder*
CALL :test
ECHO.----------Folder 2 only
RD c:\folder1
MD c:\folder2
DIR /b /ad c:\folder*
CALL :test
ECHO.----------Both
MD c:\folder1
DIR /b /ad c:\folder*
CALL :test
RD c:\folder1
RD c:\folder2

GOTO :eof

:test
if exist "c:\folder1" set Folder1=1&goto install
if exist "c:\folder2" set Folder2=1&goto Install
:Install

SET folder
SET "folder1="
SET "folder2="
GOTO :eof 
```

此测试创建和删除有问题的两个目录。

结果如下：

```
----------No folders
----------Folder 1 only
folder1
Folder1=1
----------Folder 2 only
folder2
Folder2=1
----------Both
folder1
folder2
Folder1=1 
```

注意

```
 SET "folder1="
    SET "folder2=" 
```

在每个报告的开始和之后执行，确保从环境中删除有问题的环境变量，以防止代码在陈旧信息上给出错误的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:00:07.850

```
if exist "c:\folder1" (
        set Folder1=1
        echo %Folder1%
        goto install
) if exist "c:\folder2" (
        set Folder2=1
        echo %Folder2%
        goto Install
) else goto Install 

:Install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:29:59.163

如果 folder1 不存在，此代码不会设置 %folder1%=1，并且在这种情况下不会产生任何输出。如果 Folder1 不存在且**Folder2**存在**THEN** %folder2% 设置为 1，否则 %folder2% 为空。`echo`如果变量为空，则在命令后放置一个未闭合的左括号以抑制输出。

```
@echo off &setlocal
if exist "c:\folder1" set "Folder1=1"
echo(%Folder1%
if not defined Folder1 if exist "c:\folder2" set "Folder2=1"
echo(%Folder2%
goto Install

:Install
endlocal 
```

# java - 列出 java 在循环中不起作用

> ID：15747753
> 
> 赞同：0
> 
> 时间：2013-04-01T16:58:25.453
> 
> 标签：java, oop, for-loop

我有一个项目列表，`for loop`我正在尝试比较此列表，但列表生成`ArrayOutOfBoundsException`。

列表`for loop`中有 4 个项目（0,1,2,3），但在我尝试访问最后一个项目时，只有 3 个（0,1,2）会引发异常。

```
List<Relatorio> relatorios = new RelatorioDao().listaTudoEmpresa(userWeb.logado);
        for(int i = 0; i < relatorios.size(); i++){
            if(!contem(relatorios.get(i))){
                relatorios.remove(i);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:00:26.833

那是因为当你删除元素时，你会缩小列表的大小，从而缩短循环。

当您想在迭代时删除元素时，请使用专用列表迭代器，此操作是安全的：

```
 Iterator<Relatorio> it = relatorios.iterator();
    while (it.hasNext())
        if (...) {
            it.remove();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:01:18.243

您不应该从非迭代器循环中删除项目。

考虑改为这样做

```
for( Iterator<Realtorio> iter = realtorios.iterator( ); iter.hasNext( ); )
{
   Relatorio cur = iter.next( );

   if(!contem(cur)){
      iter.remove( );
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:02:24.717

您无法在迭代列表中的项目时对其进行删除。您必须使用迭代器上的 remove 来执行此操作。
[见这篇文章](https://stackoverflow.com/questions/15573661/deleting-all-buttons-dynamically/15574047#15574047)。

# objective-c - 添加子视图后自定义 UIButton 未捕获触摸

> ID：15747769
> 
> 赞同：1
> 
> 时间：2013-04-01T16:59:35.723
> 
> 标签：objective-c, uibutton, sstoolkit

我在界面生成器中声明了一个 UIButton，其插座设置如下：

```
@property (weak, nonatomic) IBOutlet UIButton *loginButton; 
```

在我插入子视图之前它工作正常。然后它停止响应。这是违规行：

```
[self.loginButton insertSubview:_gradientButtonView atIndex:0]; 
```

将其注释掉会使按钮再次起作用。下面是所有涉及的代码（使用很棒的 SSToolkit 和 UIColor 上的自定义类别）：

```
SSGradientView *_gradientButtonView = [[SSGradientView alloc] initWithFrame:self.loginButton.layer.bounds];
_gradientButtonView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
_gradientButtonView.topBorderColor = [UIColor colorWithRed:0.558f green:0.599f blue:0.643f alpha:1.0f];
_gradientButtonView.topInsetColor = [UIColor colorWithWhite:1.0f alpha:0.3f];
_gradientButtonView.colors = [NSArray arrayWithObjects:[UIColor from_hex:@"E6E7E8"], [UIColor from_hex:@"A7A9AC"], nil];
_gradientButtonView.layer.cornerRadius = 5;
self.loginButton.layer.cornerRadius = 5;
self.loginButton.titleLabel.shadowOffset = CGSizeMake(0, 1);
[self.loginButton setTitleShadowColor:[UIColor whiteColor] forState:UIControlStateNormal];
self.loginButton.layer.masksToBounds = YES;
_gradientView.bottomBorderColor = [UIColor colorWithRed:0.428f green:0.479f blue:0.520f alpha:1.0f];
_gradientButtonView.clipsToBounds = YES;
_gradientButtonView.userInteractionEnabled = YES;
[self.loginButton insertSubview:_gradientButtonView atIndex:0];
self.loginButton.userInteractionEnabled = YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T17:53:57.327

这在上面的评论中得到了回答：

> 您写 _gradientButtonView.userInteractionEnabled = YES; 是否有特定原因？据我所知，这会阻止视图向响应者链发送触摸事件

# java - 使用 Java 裁剪上传的图像

> ID：15747771
> 
> 赞同：0
> 
> 时间：2013-04-01T16:59:42.993
> 
> 标签：java, crop, bufferedimage, javax.imageio, fileoutputstream

我正在从 http 请求中读取 servlet 中的图像文件。我想将其裁剪为正方形并将其写入文件。我可以使用以下代码实现这一点，但我使用临时文件先写入原始图像。如何在不使用临时文件的情况下做到这一点

```
 File tempFile = new File(saveFileFrameTemp);
                    fileOut = new FileOutputStream(tempFile);
                    fileOut.write(dataBytes, startPos, (endPos - startPos));
                    fileOut.flush();
                    fileOut.close();

                    BufferedImage fullFrame = ImageIO.read(tempFile);
                    int height = fullFrame.getHeight();
                    int width = fullFrame.getWidth();
                    if (height > width)
                        ImageIO.write( fullFrame.getSubimage(0, (height-width)/2, width, width), "jpg", new File(saveFileFrame));
                    else
                        ImageIO.write( fullFrame.getSubimage((width-height)/2, 0, height, height), "jpg", new File(saveFileFrame));

                    tempFile.delete(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:22:54.940

如果不创建新的 BufferedImage 作为副作用，则无法裁剪 BufferedImage

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:29:13.380

我使用 ByteArray 解决了它。

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
baos.write(dataBytes, startPos, (endPos - startPos));

BufferedImage fullFrame = ImageIO.read(new ByteArrayInputStream(baos.toByteArray())); 
```

我在这个过程中使用了这个链接[http://www.mkyong.com/java/how-to-convert-byte-to-bufferedimage-in-java/](http://www.mkyong.com/java/how-to-convert-byte-to-bufferedimage-in-java/)

# clojure - 当您不需要将某些东西定义为动态以使用重新定义时，将其定义为动态有什么意义？

> ID：15747774
> 
> 赞同：18
> 
> 时间：2013-04-01T16:59:55.267
> 
> 标签：clojure

在我看来，它`with-redefs`可以做`binding`动态符号可以做的所有事情，只是它没有需要`^:dynamic`元数据的限制。那么我什么时候应该使用其中一个呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-01T17:33:52.540

除了需要`^:dynamic`元数据之外，`binding`还会创建仅在当前线程中可见的绑定，而由 by进行的绑定`with-redefs`在所有线程中都可见。因此，`with-redefs`这是一个非常生硬的工具，并且有可能影响在同一 VM 中运行的其他代码。我从未见过`with-redefs`在测试代码之外使用过，也不应该（至少在我看来）。

我将两者之间的区别总结如下：

*   **与**^:dynamic****绑定**允许您以受控方式引入一些动态行为。这是在 API 中定义扩展点的好方法，它可以让调用链上的调用者更改代码的行为，而无需在调用堆栈中一直显式传递参数（其中一些甚至可能不是他们的代码）。**
***   **with-redefs**是免费的。它在测试中很有用，例如，当被测函数有很多依赖关系时，它可以模拟整个子系统。**

 **将 var 声明为`^:dynamic`，以及使用耳罩命名动态 var 的约定（例如`*my-dynamic-var*`），还有一个额外的好处，那就是它是一种自我记录的方式，向调用者宣传你的代码的那部分可以动态修改。

总结：在编写 API 和生产代码时更喜欢**^:dynamic**和**绑定。**在测试中使用**with-redefs**，并作为最后的手段来动态改变未声明的变量的行为超出您的控制`^:dynamic`（然后谨慎使用）。**

# html - phonegap 和 HTML5 中的地理位置

> ID：15747775
> 
> 赞同：0
> 
> 时间：2013-04-01T16:59:57.507
> 
> 标签：html, cordova, geolocation, geo

为我们县开发一个移动应用程序，我们有很多人骑自行车和徒步旅行的小径。想知道我的 html5 中需要哪些代码或功能，所以当人们单击他们有兴趣前往的跟踪选项卡时，它会抓住当前位置，然后为他们提供前往跟踪起点的方向。我有登山口的 GPS 坐标。

任何帮助将非常感激。

谢谢埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:43:54.537

To get current location, PhoneGap provides a geolocation service.

Example:

```
navigator.geolocation.getCurrentPosition(geolocationSuccess, [geolocationError], [geolocationOptions]); 
```

I suggest you look at detailed example on this page: [http://docs.phonegap.com/en/2.5.0/cordova_geolocation_geolocation.md.html#Geolocation](http://docs.phonegap.com/en/2.5.0/cordova_geolocation_geolocation.md.html#Geolocation)

To plot the coordinates of the trail, you can use the Google Maps API as you already have the coordinates of the trail.

Hope this helps.

# ios - 删除iOS目录中最旧的文件

> ID：15747777
> 
> 赞同：0
> 
> 时间：2013-04-01T17:00:02.757
> 
> 标签：ios

出于某种原因，我编写的这个方法并没有摆脱目录中最旧的文件，即使从逻辑的角度来看一切似乎都很好。我错过了什么微妙的东西吗？

```
+(void)removeOldestFileFromDir:(NSURL *)dir forFileManager:(NSFileManager *)fm{
NSError *error = nil;
NSArray *contents = [fm contentsOfDirectoryAtPath:[dir path] error:&error];
NSArray *jpgFiles = [contents filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"self ENDSWITH '.jpg'"]];

NSDate *oldest = [NSDate date];
NSString *oldestFileName = nil;
for (NSString *f in jpgFiles) {
    NSString *photoPath = [[dir path] stringByAppendingPathComponent:f];

    NSDate *created = [[fm attributesOfItemAtPath:photoPath error:&error] objectForKey:@"NSFileCreationDate"];

    if([created compare:oldest] == NSOrderedAscending){
        oldestFileName = [NSString stringWithString:photoPath];
    }
}
[fm removeItemAtPath:oldestFileName error:&error];

} 
```

我检查了错误，它总是（空）并且被删除的文件似乎是随机的 - 有时它是最新的，有时它是另一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:23:51.483

您忘记在 if 中设置最旧的变量。

它应该是这样的：

```
 if([created compare:oldest] == NSOrderedAscending){
        oldestFileName = [NSString stringWithString:photoPath];
        oldest = created; // !!! This is what is missing
   } 
```

# javascript - var col = new jsColor("red"); 产生错误条件

> ID：15747778
> 
> 赞同：0
> 
> 时间：2013-04-01T17:00:04.103
> 
> 标签：javascript, html, jscolor

我正在使用 jboss 在 Windows 7 上进行开发。我已将 jsColor.js 与我在 html5 中的 index.html 文件放在同一目录中。我在一个单独的 .js 文件中有一个测试函数。我已经包括

```
<script type="text/javascript" src="jscolor.js"></script> 
```

在 index.html 的标头中。

测试功能如下。

```
function Test(){
    alert("Before call");
    var col = new jsColor("red");
    alert("After call");
} 
```

未修改的功能只给了我一个警告框“通话前”。但是注释掉

```
 var col = new jsColor("red"); 
```

给了我两个警告框：“通话前”和“通话后”。

这表明

```
 var col = new jsColor("red"); 
```

产生错误。

# c# - 如何将集合绑定到 WPF 中的 ListView

> ID：15747780
> 
> 赞同：7
> 
> 时间：2013-04-01T17:00:09.153
> 
> 标签：c#, .net, wpf, listview, data-binding

我有一个程序可以在目录中搜索符合某些条件的文件。这个搜索过程需要**很长时间**，所以我不得不异步调用它。当搜索算法找到一个文件时，它会触发一个事件。我的`MainWindow`实例侦听此事件并需要更新 GUI。我怎样才能将这些“添加”的文件绑定到一个`ListView`？我想我可以使用一个`ObservableCollection<FileInfo>`实例，但我不知道如何绑定它。

我已经删除了所有不相关的控件和代码。这是两个相关文件。

MainWindow.xaml：

```
<Window x:Class="Example.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="CR Search" Height="395" Width="525">
    <Grid>
        <ListView x:Name="Results">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Filename"/>
                    <GridViewColumn Header="Directory"/>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</Window> 
```

MainWindow.xaml.cs：

```
using System.IO;
using System.Threading.Tasks;

public partial class MainWindow
{
    private SearchLogic _backgroundSearch;

    private async void Search(object sender, RoutedEventArgs e)
    {
        // TODO: clear Results

        _backgroundSearch = new SearchLogic("", new DirectoryInfo("C:\"));
        _backgroundSearch.FileAdded += FileAdded;

        await Task.Run(new Action(_backgroundSearch.Search));
    }

    private void FileAdded(object sender, FileAddedEventArgs eventArgs)
    {
        // TODO: add eventArgs.File to Results
        // eventArgs.File is an instance of FileInfo
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T17:08:54.150

这是一个简单的例子

**你的 XAML**

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Width="525"
        Height="350"
        Loaded="Window_Loaded">
    <Grid>
        <ListBox ItemsSource="{Binding FileNames}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical">
                        <Label>Name</Label>
                        <TextBlock Text="{Binding Name}"/>
                        <Label>Modified</Label>
                        <TextBlock Text="{Binding LastModified}"/>                        
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window> 
```

**你的代码背后**

```
public partial class MainWindow : Window
{
    public class FileInfo
    {
        public string Name { get; set; }
        public DateTime LastModified { get; set; }
        public FileInfo(string name)
        {
            Name = name;
            LastModified = DateTime.Now;
        }
    }

    ObservableCollection<FileInfo> mFileNames = new ObservableCollection<FileInfo>();

    public ObservableCollection<FileInfo> FileNames
    {
        get
        {
            return mFileNames;
        }
    }

    public MainWindow()
    {
        DataContext = this;
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        ThreadPool.QueueUserWorkItem((x) =>
            {
                while (true)
                {
                    Dispatcher.BeginInvoke((Action)(() =>
                    {
                        mFileNames.Add(new FileInfo("X"));
                    }));
                    Thread.Sleep(500);
                }
            });
    }
} 
```

如果你运行这个问题，你会注意到列表框每半秒更新一个新项目。基本上要注意的关键是 ObservableCollection 只能从 UI 线程更新，所以如果你重构上面的代码，你需要以某种方式使用当前 UI 线程的 Dispatcher 来更新它

# javascript - ASP.NET MVC - JQuery 日期选择器格式

> ID：15747781
> 
> 赞同：1
> 
> 时间：2013-04-01T17:00:09.807
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui

我有一个接受员工出生日期的表格，为此我使用了 jquery datepicker ui。我希望日期选择器使用“dd-mm-yyyy”格式。任何帮助将不胜感激 - 谢谢

```
<div class="editor-field">
            @Html.EditorFor(model=>model.DOB)
        </div>

<script type="text/javascript">
    $(document).ready(function () {
        $('#DOB').datepicker();
     });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:03:28.257

您可以指定日期格式如下

```
$('#DOB').datepicker({ dateFormat: 'dd-mm-yyyy' }) 
```

# java - 在 Java Android 中使用 Switch/Case 语句的更简单方法

> ID：15747783
> 
> 赞同：0
> 
> 时间：2013-04-01T17:00:15.003
> 
> 标签：java, android, switch-statement

我有一个片段类型的 getItem(int position) 方法。我有大约 100 多页，这意味着我尝试使用 switch 和 case 语句的每一页都不同。每个案例都返回一个扩展片段的新类，如下所示。

```
public class Pages{
public static class Page1 extends Fragment {
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    final View rootView = inflater.inflate(R.layout.fragment_main_dummy,
            container, false);
    final Button search = (Button) rootView.findViewById(R.id.clicktosearch);
    final EditText number = (EditText)rootView.findViewById(R.id.number);
    search.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            for(int i = 0; i < MainActivity.Help.arr.length; i++){
                if(number.getText().toString().equals(MainActivity.Help.arr[i])){ 
                    MainActivity.mViewPager.setCurrentItem(i);
                }
            }
        }
    });
    WebView webview = (WebView) rootView
            .findViewById(R.id.webview);
    webview.loadUrl("file:///android_asset/2.html");
    return rootView;
      }

   }
}
public Fragment getItem(int position) {
    switch(position){
    case 1:
        Pages.Page1 page1 = new Pages.Page2();
        return page1; //same with other pages in different cases. 
```

有没有比使用 switch/case 语句更容易做到这一点的方法，这将花费很长时间。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:03:55.380

是的。有一种更简单的方法

```
Page createPage(int index)
{
    // ignore the damn index
    return new Page();
} 
```

将执行您的功能正在执行的相同操作。由于您似乎没有做任何事情来保存存储正在创建的页面的变量。

另一方面，如果想将它存储在某个地方，你可以在类中拥有一个数组（这个函数存在的地方）——比如这个类是一本书。

```
public class Book
{
    private Page [] p;

    public Book()
    {
        p = new Page[1000];
        for(int i = 0; i < 1000; ++i)
            p[i] = new Page();
    }

    public Page createPage(int index)
    {
        return p[index];
    }
} 
```

或者懒惰的初始化

```
public class Book
{
    private Page [] p;

    public Book()
    {
        p = new Page[1000];
    }

    public Page createPage(int index)
    {
        if (p[index) != null)
            return p[index];

        p[index] = new Page();
        return p[index];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:27:14.830

你想用函数创建对象

```
Page getPage(){
    return new Page();
} 
```

我假设每个页面都有它自己的属性，可能是一个字符串或其他什么。因此，您可以将这些值存储在 an 中`ArrayList<String>`并根据索引将它们设置为页面

```
Page getPage(int index){
    Page p = new Page();
    String attr = youArrayList.get(index);
    p.setAttrMethod(attr);
    return p;
} 
```

# c# - 从包含某些子字符串的列表中删除所有字符串

> ID：15747784
> 
> 赞同：6
> 
> 时间：2013-04-01T17:00:24.977
> 
> 标签：c#, list

我有一个名为 albumList 的字符串列表，该字符串具有以下结构： abc,abc,abc,abc,abc 我要求用户搜索要删除的专辑；如果找到该专辑，它将从列表中删除。可能有多个同名专辑要从列表中删除。

```
 private void searchAlbumName(string search)
        {
            string[] cellVal;
            foreach (string x in albumList)
            {
                cellVal = x.Split(',');
                if (cellVal[0].ToString().Equals(search))
                {
                    //do delete here
                }
            }
        } 
```

我不确定如何删除带有搜索名称的每张专辑

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T17:02:30.490

您可以使用[`RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)来获得结果：

```
albumList.RemoveAll(x => x.Split(',')[0].ToString().Equals(search)) 
```

为了便于阅读，您可以使用：

```
albumList.RemoveAll(x => x.Split(',').First().Equals(search)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:04:30.097

使用`LINQ`做

```
albumList.RemoveAll(x => cellVal[0].ToString().Equals(search))); 
```

看到[这个](https://stackoverflow.com/questions/853526/using-linq-to-remove-objects-within-a-listt)帖子。

# javascript - Javascript/jQuery 切换侧边栏

> ID：15747791
> 
> 赞同：0
> 
> 时间：2013-04-01T17:00:43.093
> 
> 标签：javascript

只是想知道，有没有人知道任何好的切换侧边栏？

就像，它位于屏幕的一侧，您可以通过单击箭头将其隐藏，您可以通过单击箭头使其再次显示。

有谁知道好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:11:18.107

这是一个使用 Jquery 的非常简单的侧边导航菜单。

[演示](http://www.andrewsellick.com/examples/sliding-side-bar-scriptaculous/#)

教程：[滑动侧边栏-scriptaculous](http://www.parrisstudios.com/?p=339)

# java - 加载位图时，应用程序 UI 变得无响应

> ID：15747794
> 
> 赞同：0
> 
> 时间：2013-04-01T17:00:52.083
> 
> 标签：java, android, bitmap, android-asynctask, wallpaper

我有一个 CountDownTimer，它每 15 秒调用一次 ChangeWallpaper() 方法。壁纸会发生应有的变化，但是当我尝试打开应用程序时，它会使应用程序抽屉屏幕在几秒钟内无响应。当应用程序最终打开时，我选择的所有内容都需要 5-10 秒才能响应。我在 Android Developer 中阅读了有关 AsyncTask 的内容，它应该在 UI 线程之外加载位图并防止应用程序挂起，但它似乎不起作用。

以下代码在我的 Activity 类中：

```
/** changeWallpaper() **/ - called by CountDownTimer every 15 seconds
protected void changeWallpaper() throws IOException {
    Integer totalimages = finallist.size();

    if (lastloopcount == totalimages) { // if end of the list of images is reached, it resets and goes back to top.
        loopcount = 0;
        lastloopcount = 0;
    }

    for (String imagepath : finallist) { // "finallist" is global variable with all the image's paths in an array list. The Loop count is to select the next image in the array list every 15 seconds.
        loopcount++;
        if (loopcount > lastloopcount) {
            lastloopcount = loopcount;
            loopcount = 0;

            WallpaperManager wm = WallpaperManager.getInstance(this);
            wm.setBitmap(decodeImageFromPath(imagepath));

            break;
        }
    }
}

/** AsyncTask Wallpaper Load **/
class BitmapWorkerTask extends AsyncTask<Integer, Void, Bitmap> {
    public BitmapWorkerTask(ImageView imageView) {
        new WeakReference<ImageView>(imageView);
    }

    @Override
    protected Bitmap doInBackground(Integer... params) {
        return null;
    }
}

/** decodeImageFromPath() **/
public Bitmap decodeImageFromPath(String imagepath) {
    DisplayMetrics displayMetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    int height = displayMetrics.heightPixels;
    int width = displayMetrics.widthPixels << 2;

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(imagepath, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, width, height);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(imagepath, options);
}

/** WallpaperManager (Method) **/
public static int calculateInSampleSize(
    BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // ... Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;

    int stretch_width = Math.round((float)width / (float)reqWidth);
    int stretch_height = Math.round((float)height / (float)reqHeight);

    if (stretch_width <= stretch_height) return stretch_height;
    else return stretch_width;
} 
```

1.  我是否正确使用了 AsyncTask 功能？
2.  有没有更简单的方法来写这个？

提前致谢。

编辑：

```
/** Spinner **/
@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    String chosenTime = parent.getItemAtPosition(position).toString();
    int chosenTimeNew = 0;
    if (chosenTime.contains("sec")) {
        chosenTime = chosenTime.replace(" sec","");
        chosenTimeNew = Integer.parseInt(chosenTime) * 500;
    } else if (chosenTime.contains("min") ) {
        chosenTime = chosenTime.replace(" min","");
        chosenTimeNew = Integer.parseInt(chosenTime) * 30000;
    } else if (chosenTime.contains("hour")) {
        chosenTime = chosenTime.replace(" hour","");
        chosenTimeNew = (Integer.parseInt(chosenTime) * 30000) * 60;
    } else if (chosenTime.contains("day")) {
        chosenTime = chosenTime.replace(" day","");
        chosenTimeNew = ((Integer.parseInt(chosenTime) * 30000) * 60) * 24;
    }
    rSpeed = chosenTimeNew;
} 
```

编辑2：

由 CountDownTimer() 调用：

```
new BitmapWorkerTask(null).execute(imagepath); 
```

然后：

```
 /** AsyncTask Wallpaper Load **/
class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {

    public BitmapWorkerTask(ImageView imageView) {
        new WeakReference<ImageView>(imageView);
    }

    @Override
    protected Bitmap doInBackground(String... params) {

        DisplayMetrics displayMetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
        int height = displayMetrics.heightPixels;
        int width = displayMetrics.widthPixels << 2;

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(params[0], options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, width, height);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;

        Bitmap bmp = BitmapFactory.decodeFile(params[0], options);
        return bmp;
    }

    protected void onPostExecute(Bitmap bmp) {

        Context context = getApplicationContext();
        WallpaperManager wm = WallpaperManager.getInstance(context);
        try {
            wm.setBitmap(bmp);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

    /** WallpaperManager (Method) **/
public static int calculateInSampleSize(
    BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // ... Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;

    int stretch_width = Math.round((float)width / (float)reqWidth);
    int stretch_height = Math.round((float)height / (float)reqHeight);

    if (stretch_width <= stretch_height) return stretch_height;
    else return stretch_width;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:02:49.617

应该从 doInBackground 方法中调用您的主要代码（处理位图）。否则与这里的同步调用相同。

```
    @覆盖
    受保护的位图 doInBackground(String... params) {
        位图 bmp = decodeImageFromPath(params[0]);
        返回 bmp；
    }

     受保护的无效 onPostExecute（位图 bmp）{
        wm.setBitmap(bmp)
     }

```

```
新的 BitmapWorkerTask ().execute(imagePath);

```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

您可以参考此链接上的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:11:07.963

你甚至不使用你的`BitmapWorkerTask`！当您将一些代码写入代码时，没有什么魔法可以在后台执行代码的任意部分`AsyncTask`。你也必须使用它，你知道的。

将代码的持久部分移动到`doInBackground()`AsyncTask 的方法中并像这样调用它：`new BitmapWorkerTask().execute();`

**编辑**

要传递图像路径，请将 BitmapWorkerTask 的定义更改为类似这样`... extends AsyncTask<String, Void, Bitmap> ...`（注意**字符串**而不是整数），并将图像路径作为参数传递给`execute()`方法。

`new BitmapWorkerTask().execute(imagePath);`

请注意，现在这是异步运行的，因此 execute() 调用会立即返回，但图像的加载仍需要一些时间。

另请阅读[无痛穿线](http://android-developers.blogspot.co.at/2009/05/painless-threading.html)文章。

# php - Woocommerce - 尝试提取订单的运费

> ID：15747796
> 
> 赞同：5
> 
> 时间：2013-04-01T17:00:57.760
> 
> 标签：php, woocommerce

我正在使用 woocommerce 并安装了打印交货单插件。我想要做的是编辑打印文件，所以如果有人选择了某个“附加运费”，它将打印相关的打印邮资印象 - 一级与二级

我脑子里有一个基于运费价值的 IF 声明（免费对 1 英镑），我可以这样做。

但是，我在尝试提取该值时遇到问题，以便我可以检查它。

深入挖掘看起来我需要在 WC_Order 类中使用 get_shipping() 方法，以便我可以检查值 - [http://docs.woothemes.com/wc-apidocs/class-WC_Order.html](http://docs.woothemes.com/wc-apidocs/class-WC_Order.html) - 这就是我失败....惨不忍睹。

查看此页面 - http://docs.woothemes.com/document/class-reference/#listofclassesinwoocommerce - 我可以将 WC_Cart 示例直接复制并粘贴到用于打印并成功回显该值的 .php 文件中，但是当我将其更改为我认为正确的使用 get_shipping() 时，我得到“致命错误：在非对象中调用成员函数 get_shipping()”。

这是我放的

```
<?php global $woocommerce;
$order_shipping_total = $woocommerce->order->get_shipping();
echo $order_shipping_total ;
?> 
```

现在我猜，因为我已经达到了我的能力极限，我需要初始化 WC_Order 类，但我很难做到这一点。

任何帮助都会受到极大的欢迎。

干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T20:53:36.893

你快到了！您确实需要初始化订单。`$woocommerce`不知道你在说哪个订单。因此，您从订单中创建了一个对象：

```
$order = new WC_Order( $order_id); 
```

现在，该订单的所有信息（包括您的运费）都可以通过 访问`$order`。您唯一需要知道的是适当的`$order_id`. 由于您处于打印交货单环境中，因此您可以通过 `$wcdn->print->order_id`.

这将满足您的需要：

```
<?php
global $wcdn;
$order = new WC_Order($wcdn->print->order_id);
$order_shipping_total = $order->get_total_shipping();
echo $order_shipping_total;
?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-29T16:28:23.700

from > WC 3.您可以通过以下方式获取当前订单的总运费

```
<?php
$current_shipping_cost = WC()->cart->get_cart_shipping_total();
echo $current_shipping_cost;
?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-12T13:52:42.410

【2018更新】

您可以使用

```
<?php 
$order = wc_get_order( $order_id );
$order_shipping_total = $order->get_shipping_total();
echo $order_shipping_total;
?> 
```

# c# - 基于数字符号的自定义数字格式字符串

> ID：15747800
> 
> 赞同：0
> 
> 时间：2013-04-01T17:01:03.477
> 
> 标签：c#, formatting, string-formatting

我正在尝试格式化小数（作为没有 % 符号的百分比），在负数周围显示括号 () 并按原样显示正数。

```
var returnString = value.HasValue
            ? string.Format("{0:0.0;(0.0)}", value.Value * 100) :
            DefaultEmptyString;

return returnString; 
```

我的主要问题是，对于像 -0.000491 这样的数字，在这种格式方案中它是零，它仍然应该显示括号，因为它是负零。尽管如此，它正在丢失。

我可以停止使用[部分分隔符](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#SectionSeparator)并改用*if*语句，但似乎部分分隔符应该可以解决问题。

任何想法为什么格式不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:16:22.553

从文档：http: [//msdn.microsoft.com/en-US/library/0c899ak8%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-US/library/0c899ak8%28v=vs.80%29.aspx)

“如果要格式化的数字是负数，但是按照第二节的格式四舍五入后变成零，那么得到的零按照第一节的格式格式化。”

格式正确，您将需要 if 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:17:21.887

> 任何想法为什么格式不正确？

根据[文档](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#SectionSeparator)正确完成*：*

> 如果要格式化的数是负数，但是按照第二节的格式四舍五入后变成零，那么得到的零按照第一节的格式进行格式化。

由于我没有看到任何可以覆盖该默认行为的可用选项，因此一种选择是手动附加括号：

```
public string Format(decimal value)
{
   string s = (value*100).ToString("0.0;0.0");
   if(value < 0)
      s = "(" + s + ")";
    return s;
} 
```

# date - 在教义中查询日期

> ID：15747801
> 
> 赞同：1
> 
> 时间：2013-04-01T17:01:04.323
> 
> 标签：date, symfony, doctrine-orm, doctrine, symfony-2.1

我有一个名为的表`active_plans`，其中有两列：`activated_date`和`last_billed_at`. 基本上，我想创建一个查看这两列的查询，如下所示：

```
select all from active_plans 
          where last_billed_at = null AND activated_date + 1 month = today, 
          or if last_billed_at + 1 month = today. 
```

不过，我似乎无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:04:17.817

我最终做了很多不同的事情： public function getBillToday() { $activePlans = $this->entityManager ->createQuery('SELECT adp FROM adp WHERE adp.activationDate IS NOT NULL') ->getResult(); $数据 = 数组（）；

```
 foreach ($activePlans as $plan) {
        $recur = $plan->getPlan()->getRecurringInMonths();
        $nextBillTime = strtotime('-'.$recur.' months', time());
        $nextBill = date('Y-m-d', $nextBillTime);
        $activationDate = $plan->getActivationDate();
        $lastBilledAt = $plan->getLastBilledAt() != NULL ? $plan->getLastBilledAt()->format('Y-m-d') : 0;
        if ($activationDate == $nextBill || $lastBilledAt == $nextBill) {
            $data[] = $plan->getId();
        }
    }

    return $data;
} 
```

# css - 在部门之间移动 youtube iframe 播放器？

> ID：15747804
> 
> 赞同：1
> 
> 时间：2013-04-01T17:01:15.000
> 
> 标签：css, html, iframe, youtube, youtube-api

我试图通过将包含 youtube 播放器的 iframe 放入页面上不同位置的不同 div 来移动它，但没有成功。即使我尝试用 div 包装 iframe 并尝试移动 div 它也不起作用。

在视觉上，播放播放器不仅停止播放，而且恢复为显示定义播放器时设置的默认视频的图像。这是可能的，还是玩家本身正在做一些事情来专门防止这种情况发生？

ps 我是唯一一个在 google 群组中缺少旧 YouTube 社区的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:22:46.960

这在很大程度上取决于您尝试如何在 DOM 中移动元素，但可以说，一般来说，大多数方法都会产生您所看到的内容。例如，jQuery“appendTo”函数执行从其父元素中删除元素，然后调用 appendChild，这会触发 YouTube 播放器重置为 -1 状态（已加载并准备播放）。如果您尝试通过执行节点克隆来避免这种情况，则新播放器不会继承任何事件绑定，并且在创建时也会丢失其状态。

那么，我认为您只能自己尝试保持状态；您可以编写一个函数，在触发时暂停视频，获取当前时间，从其父视频中删除视频（或克隆它并删除原始视频，只要您重新设置所需的任何绑定），然后设置新视频的时间以匹配旧视频的时间。

# javascript - 在 div 中执行 javascript

> ID：15747806
> 
> 赞同：2
> 
> 时间：2013-04-01T17:01:19.483
> 
> 标签：javascript

问题已更新。在底部更新-

我必须将脚本放在页面上。不幸的是，我无法控制页眉或页脚甚至正文标记。所有，我有一组内部 html，它位于位于 body 标记内的包装 DIV 内。像这样的东西：

```
<body>
     <div id="wrap">
         <!-- My controlled content -->
     </div>
</body> 
```

现在，我必须放置一些 javascript。所以，我显然把它放在我控制的部分中。问题是javascript没有被执行。我什至发出警报，但没有弹出警报框。最终代码如下所示：

```
<body>
     <div id="wrap">
         <div id="mycontent">
              <script type="text/javascript" language="javascript" src="somesource"></script>

              <script>
                  var x, y; 
                  //Do something here with x,y;
                  alert("hello");
              </script>
         </div>
     </div>
</body> 
```

知道有什么问题吗？我该如何解决？

谢谢。

更新：我不确定这是否有什么不同，但我忘了提到所有这些 HTML 都存在于框架标签内（在框架集下）。这会有所作为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:04:38.633

**编辑：**

我看到您正在尝试加载外部 javascript 文件 - 您确定该文件存在吗？

* * *

相反，将一些 javascript 包装在`document ready`事件中：

下面是一种在使用[jQuery](http://jquery.com/)加载 dom 时运行代码的方法。但是，如果您不想使用 jQuery，请参阅此答案的最后一部分。

```
$(document).ready(function(){
// dom ready
   alert("hello");
}); 
```

您可以像这样进一步控制`div`我的内容：

```
$(document).ready(function(){
// dom ready
   alert("hello");
   $("#mycontent").hide(); // for example, hide the div
}); 
```

**非 jQuery：**

在`HTML`页面底部，将代码放在`<script>`标签中 - 这样代码将在页面上的元素加载后运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T13:00:18.990

禁用 XSS 过滤器。

作为一名安全审计员，我刚刚意识到 Chrome 和 Internet Explorer (IE) 正在呈现我的 alert()。

运行 chrome：

```
C:\Program Files (x86)\Google\Chrome\Application>chrome.exe --disable-xss-auditor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T13:18:44.963

Javascript 需要触发一个事件。就像提到的另一张海报一样，**document.ready**是文档加载事件。大多数其他事件是用户触发的，例如鼠标单击等。您不能只是将 Javascript 放在 HTML 文件的中途并期望它执行。它需要绑定到一个**事件**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T13:31:12.940

只是评论：：`document.ready`不是javascript，`$(document).ready`是jQuery。改用[DOMContentLoaded](https://developer.mozilla.org/en-US/docs/Web/Reference/Events/DOMContentLoaded)：

```
$(document).ready(function(){
// dom ready
   alert("hello");
}); 
```

在现代浏览器中（请参阅上面链接中的支持），它相当于

```
window.addEventListener("DOMContentLoaded",function() {
// dom ready
   alert("hello");
}); 
```

# c# - 数据集和数据表的问题

> ID：15747808
> 
> 赞同：0
> 
> 时间：2013-04-01T17:01:24.637
> 
> 标签：c#, asp.net

正在研究一种从学生数据库中提取学生成绩的方法，其中所有年份和班级的所有科目成绩都存储在一个表中，因此此函数将提取特定部门班级的结果并将其存储在数据表中数据集，所以这是我到目前为止所做的代码

```
public void Button1_Click(object sender, EventArgs e)
{
        con.Open();
        cmd.CommandText = "SELECT Course.Course_code, Course.Course_name, courseyear.level FROM Course INNER JOIN courseyear ON Course.Course_code = courseyear.Course_code WHERE (courseyear.dep = '" + dep.SelectedValue + "') AND (courseyear.subdep = '" + subdep.SelectedValue + "') AND (courseyear.year = '" + year.SelectedValue + "') AND (courseyear.level = '" + level2.SelectedValue + "')";
        da = new SqlDataAdapter(cmd.CommandText, con);
        ds.Clear();
        da.Fill(ds, "junk");
        cmd.CommandText = "SELECT Course.Course_code, Course.Course_name, courseyear.level FROM Course INNER JOIN courseyear ON Course.Course_code = courseyear.Course_code WHERE (courseyear.dep = '" + dep.SelectedValue + "') AND (courseyear.subdep = '" + subdep.SelectedValue + "') AND (courseyear.year = '" + year.SelectedValue + "') AND (courseyear.level = '" + level2.SelectedValue + "')";
        da = new SqlDataAdapter(cmd.CommandText, con);
        da.Fill(ds, "subs");
        ds.Tables.Add("res");
        cnum =  ds.Tables["junk"].Rows.Count;

        //l7de hna kweseen

        ds.Tables["res"].Columns.Add(new DataColumn("index",typeof(string)));
        ds.Tables["res"].Columns.Add(new DataColumn("name", typeof(string)));
        //int rnum = ds.Tables["res"].Rows.Count;
        for (int x = 0; x < cnum-1; x++) {

            ds.Tables["res"].Columns.Add(new DataColumn(ds.Tables["junk"].Rows[x].ItemArray[0].ToString(), typeof(string)));

        }//done inserting subjects 

        dr = ds.Tables["res"].NewRow();
        ds.Tables["junk"].Clear();
        cmd.CommandText = "SELECT id, name FROM Students WHERE (dep ='"+dep.SelectedValue+"') AND (class = '"+level2.SelectedValue+"') AND (subDep ='"+subdep.SelectedValue+"')";
        da = new SqlDataAdapter(cmd.CommandText, con);
        da.Fill(ds, "junk");
        int snum = ds.Tables["junk"].Rows.Count;
        for (int x = 0; x < snum; x++)
        {
            dr = ds.Tables["res"].NewRow();
            dr.ItemArray[0] = ds.Tables["junk"].Rows[x].ItemArray[0];
            dr.ItemArray[1] = ds.Tables["junk"].Rows[x].ItemArray[1];
            //ds.Tables["res"].Rows.Add(dr);
        }//done inserting students

        ShowPopUpMsg(ds.Tables["res"].Rows.Count.ToString());//for  testing
        ShowPopUpMsg(snum.ToString());// for testing
        for (int x = 0; x < cnum ;x++ )//for subjects
        {
            for (int y =0; y < snum;y++)//for students 
            {
                ds.Tables["junk"].Clear();
                cmd.CommandText = "select course_work+final_exam as exp from results where student_id = '" + ds.Tables["res"].Rows[y ].ItemArray[0] + "' and course_code = '"+ds.Tables["subs"].Rows[x]+"' ";
                da.Fill(ds, "junk");
                ds.Tables["res"].Rows[y].ItemArray[x] = ds.Tables["junk"].Rows[0].ItemArray[0];                   
            }
        }
        ShowPopUpMsg(ds.Tables["junk"].Rows[0].ItemArray[0].ToString());
    }
    private void ShowPopUpMsg(string msg)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("alert('");
        sb.Append(msg.Replace("\n", "\\n").Replace("\r", "").Replace("'", "\\'"));
        sb.Append("');");
        ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "showalert", sb.ToString(), true);
    }
}</i> 
```

我的问题是它一直告诉我在学生 for 循环的位置 0 处没有行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:06:38.330

您可能希望使用两个不同的数据适配器来填充 2 个不同的数据集。如果您查看它，您正在重新实例化数据适配器，这将重置先前加载的“垃圾”数据集。因此，当您尝试访问“垃圾”时，您什么也看不到。尝试不实例化或使用不同的适配器。

# javascript - Phonegap - javascript 长按

> ID：15747809
> 
> 赞同：0
> 
> 时间：2013-04-01T17:01:24.757
> 
> 标签：javascript, jquery, cordova, click

我已经尝试了一段时间来完成这项工作。这种方法似乎适用于互联网上的几个地方，但不适用于我。请注意，当我在手机上试用它时，这在 Dreamweaver（和 chrome）中有效，但在 Eclipse Indigo(Phonegap) 中无效。

```
 $("#button4").mouseup(function(){
 //  clearTimeout(pressTimer);
    pressTimer = 0;
   // Clear timeout
   return false;
 }).mousedown(function(){
   // Set timeout
   pressTimer = window.setTimeout(function() { test(); },1000);
   return false; 
 });

 function test ()
 {alert("Longpress works");} 
```

正常的“点击”也适用于“button4”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T07:41:34.820

这对我有用。使用 on() 是实现 jquery 事件的最新方法

```
var longpress;
$(document).ready(function(){
$("#yourElement").on('mousedown' ,function(){      
 longpress=true;    
 setTimeout(function() {    
    if(longpress)
     alert("long press works!");         
                  }, 3000);
})
$("#yourElement").on('mouseup' ,function(){      
    longpress=false;    
})

 }); //END 
```

使用 .off() 删除事件。另请注意，如果您使用的是智能手机，则应使用“touchstart”作为 mousedown 事件，使用“touchend”作为 mouseup。

# javascript - 使用直线连接拖放图片的Javascript插件框架？

> ID：15747810
> 
> 赞同：0
> 
> 时间：2013-04-01T17:01:37.717
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我想知道使用直线连接多张图片的最佳 javascript 插件/框架是什么。

图片需要支持拖放功能和点击功能。如果解决方案涉及 jQuery 框架，我会更喜欢。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:50:23.477

Arbor.js 看起来是一个不错的解决方案。

有关各种解决方案的列表：

[JavaScript 中的图形可视化库](https://stackoverflow.com/questions/7034/graph-visualization-code-in-javascript)

# actionscript-3 - 接口函数返回无类型值（*），而实现返回特定类型？

> ID：15747820
> 
> 赞同：1
> 
> 时间：2013-04-01T17:01:53.327
> 
> 标签：actionscript-3

出于好奇，我想知道是否可以让接口定义返回非类型化值，而其实现返回类型化值？

例如，具有以下接口：

```
interfaceExample
{
    function someExampleFunction():*
} 
```

实施以下方式：

```
classA implements interfaceExample
{
    public function someExampleFunction():Int{ ... }
}

classB implements interfaceExample
{
    public function someExampleFunction():String{ ... }
} 
```

（我用谷歌搜索没有结果，也许我无法问正确的方法）我想答案是'不，无论如何都不可能，界面不是那样设计的' - 那么可能是什么一种友好的方式来实现这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:03:01.783

你是对的，这不会编译。这是因为编译器不支持重载父类或接口的方法签名。

如果您考虑一下，在实现接口时覆盖返回类型实际上没有任何意义，因为使用您的接口 API 的代码不应该依赖于实现（`int`或`String`返回值）。

使用的解决方案实际上取决于您最终要做什么。通常，返回类型应该是您可以生成的不同类型之间的共同点。这也可能是**另一个接口**，描述了对返回值的期望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:06:30.383

虽然我对接口定义不是很熟悉，但我确实知道我编写了很多处理类型化和非类型化参数和返回的函数。

**如果您所描述的内容是不可能的**，并且取决于您正在做什么，我建议您编写一个可以将无类型变量转换为类型变量的简单函数。它们相当简单。然后，您可以调用此函数来处理通过接口定义传入的任何数据。

一个粗略的例子（未经测试）：

```
function convertDataTo(type:String, input:*):*
{
    var rI:int;
    var rN:Number;
    var rS:String;
    var rB:Boolean;

    switch(type)
    {
        case "int":
            if(isNaN(int(input))
            {
                rI = 0;
            }
            else
            {
                rI = int(input);
            }
        break;
        case "Number":
            if(isNaN(Number(input))
            {
                rN = 0;
            }
            else
            {
                rN = Number(input);
            }
        break;
        case "Boolean":
            if(input == "true")
            {
                rB = true;
            }
            else if(input == "false")
            {
                rB = false;
            }
            else
            {
                rB = Boolean(input);
            }
            return rB;
        break;
        case "String":
            rS = input.toString();
        break;
        default:
            trace("Invalid data type!");
            return 0;
        break;
    }
} 
```

您还可以重写此函数以从 String 类型转换为任何其他类型，并让您的接口定义始终返回字符串。另一方面，您可以拥有一个类似的函数，将所有变量转换为可由该函数解释的字符串。

顺便说一句，我不得不使用这种字符串解释来编写我自己的脚本语言，以便在我的一个更大的项目中使用。

**当然，我不会假装这直接回答了你的问题，但我想排除这种意外情况，以防你正在寻找的东西不起作用。**

# ios - 带有缩放的 UIImageView 的简单 UIScrollview

> ID：15747823
> 
> 赞同：0
> 
> 时间：2013-04-01T17:01:59.097
> 
> 标签：ios, xcode, debugging, crash

我有一个将图像加载到 UITableViewController（葡萄酒标签）中的应用程序，然后您可以导航到项目详细信息。在此页面上，您可以看到 Wine Label 的大图...IOS 6.1...

该应用程序可以运行很短的时间，然后只是崩溃，而不是在任何给定的行上。该应用程序刚刚关闭，我在任何地方都看不到任何错误消息。我很难找到有关解决此类关机问题的正确方法的文档。通常，如果我崩溃，它会在一条线上失败，我通常可以找到问题，但在这种情况下，Xcode 只是退出调试模式（但不是关闭）。我在控制台中看不到任何错误...我还能在哪里查看？Xcode 版本是 4.6。

任何建议都会很棒。谢谢。

# jquery - 为什么将 div 合并到另一个部分时会失去滚动效果？

> ID：15747828
> 
> 赞同：0
> 
> 时间：2013-04-01T17:02:24.293
> 
> 标签：jquery, html, scroll, scrollto

这是我的网站：

紫罗兰色.com

我做了一个测试页面， http: [//violetoeuvre.com/scroll.html](http://violetoeuvre.com/scroll.html)。

我希望主页上写作部分的内容与滚动页面上的内容相同，但是当我将其合并到 home_writing div 中时，滚动效果消失了。

我希望修复右上角的链接，并平滑滚动到写作部分的内容。

我怀疑该错误与 div、类和 id 之间的关系有关，但我无法弄清楚。

这是我的CSS：

```
.home_writing {
    display: block;
    background: rgba(50,50,50,0);
    height: 1000px;
    text-align: left;
    overflow: scroll;
}

    /* CSS for the small boxes that will scroll inside a div */

    #small-box-container {
        border: 1px solid black;
        background: rgba(10,200,10,0);
        width: 980px;
        height: 2000px;
        overflow: scroll;
    }

 #small-box-links{
    position: fixed;
    margin-left: 700px;
    height: 150px;
 }

    .small-box {

        color: #fff;
        width: 980px;
        margin: 0 0 50px 0;
    }

    #small-box1 {
        background: blue;
    }

    #small-box2 {
        background: red;
        height: 500px;
    }

    #small-box3 {
        background: green;
    }

     #small-box4 {
        background: aqua;
    } 
```

和html：

```
<div class="home_writing">
    <div id="small-box-container">
        <div id="small-box-links">
            <a href="#small-box1">deadspin</a>
            <a href="#small-box2">gawker</a>
            <a href="#small-box3">the awl</a>
            <a href="#small-box4">other</a>
        </div>
    </div>

    <div>
        <div id="small-box1" class="small-box"><h2>deadspin</h2>
            <h3>How Pat Summitt Ruined The Best Thing About Women's Basketball</h3>
                <p>In a kinder world, Geno 'n' Pat would be a sitcom about a bumbling male-female cop duo. Geno would cause trouble, and Pat would be very serious and by-the-book, and she'd occasionally trip on things. Alas, women's basketball is not that world.
                <a href="http://deadspin.com/5704435/how-pat-summitt-ruined-the-best-thing-about-womens-basketball">read</a>
                </p>
                <h3>Dropping In On The Demented Utopia Of The Gathering Of The Juggalos</h3>
                <p>ICP's version of hip hop—politically anti-racist, but very white and non-urban—is the escape plan for the kids who don't ever leave. The Gathering is an annual diversion. Of any of the things Juggalos hold dear, this is the one I might be able to understand now.On the other hand, I never sat with Juggalos in the high school cafeteria.
                <a href="http://deadspin.com/5831225/dropping-in-on-the-demented-utopia-of-the-gathering-of-the-juggalos">read</a></p>
                <h3>Starting In The Basement: A Day At Open Tryouts For The NBA's D-League</h3>
                <p> 
                One of the first things that Jay Larranaga, head coach of the Erie Bayhawks, tells the 35 players who have paid $150 apiece to possibly have a shot at maybe earning a spot on his NBA Development League team, is that they are not really talented. Well, he doesn't say it exactly like that.
                <a href="http://deadspin.com/5846103/starting-in-the-basement-a-day-at-open-tryouts-for-the-nbas-d+league"></a>read</p>
                <h3>Celebrating Serena Williams, Tennis Traditionalist</h3>
                <p>
                But what Serena reminded us is that, despite a year-long break from the sport, she still cares furiously about tennis, and about winning. This attitude, and this way of expressing it, was in no way unprecedented.
                <a href="http://deadspin.com/5839361/celebrating-serena-williams-tennis-traditionalist">read</a><p>
                <h3>The Graceful, Oversized Legacy of Yao Ming</h3>
                <p>The looming size of that body distracted us, at first, from considering what he could do with it. Yao did not start off great. He started off like a project.
                <a href="http://deadspin.com/5823208/the-graceful-oversized-legacy-of-yao-ming">read</a></p>
        </div>

        <div id="small-box2" class="small-box"><h2>gawker</h2>
            <h3>All the Girls Standing in the Line For the Rap Show&#58; Iggy Azalea’s Sudden Rise</h3>
                    <p>Of all of the self-reflective periods that hip hop has endured over the years, this one might be the most muddled: a culture that has spread far enough to reach a female teenager in Mullumbimby, Australia, and produce a viral video and an inevitable record deal is still doing its best gate-keeping job on a growing force of female rappers.
                    <a href="http://gawker.com/5916913/all-the-girls-standing-in-the-line-for-the-rap-show-iggy-azaleas-sudden-rise">read full article</a>
                    </p>
            <h3>Sexile in Guyville&#58; Lady Writers and the Male Celebrities They Profile</h3>
                    <p>The art of the form lies in a seamless two-step between writer and subject that is hard not to appreciate. Plenty of celebrity profiles suffer from the simple balance of an actor protecting an image, and the reporter duly packaging his or her cut-and-dry photo spread. The male-female profile knows no such limitations.
                    <a href="http://gawker.com/5893317/sexile-in-guyville-lady-writers-and-the-male-celebrities-they-profile">read full article</a>
                    </p>
        </div>

        <div id="small-box3" class="small-box"><h2>the awl</h2>
            <h3>Selling Herself Short&#58; The Miscontexualization of Nicki Minaj</h3>
            <p>Nicki Minaj's "Pink Friday" arrived just before this Thanksgiving. It could be difficult for anyone who is not a black female rapper (including me, a white female home-recording wannabe rapper) to understand that this is remarkable, and something to be celebrated, but I think Lin Que’s story provides some context. Minaj didn’t just release her first major album, she released the album that Lin Que—and a lot of other female rappers—once refused to record.
            <a href="http://www.theawl.com/2010/11/selling-herself-short-the-miscontexualization-of-nicki-minaj">read full article</a>
            </p>
            <h3>With the Ladies in the Back at an Odd Future Show</h3>
            <p>Their trick is deciding who gets to be in on the joke; for listeners sensitive to lyrics about rape or homophobia, the trick is deciding if you really want to be in on the joke in the first place. Young white men, Tyler masks strapped on, were clamoring for that right on Friday, while the women tried to find a place for themselves.
            <a href="http://www.theawl.com/2011/05/with-the-ladies-in-the-back-at-an-odd-future-show">read full article</a>
            </p>
            <h3>Kanye’s '808s'&#58; How A Machine Brought Heartbreak To Hip Hop</h3>
            <p>The immediate reaction to the album might have been similar to the one in Newport, Rhode Island in 1965, when Bob Dylan went electric at the Folk Festival. We don’t like drastic changes from the artists we’ve come to depend on for a certain kind of musical narrative, even if those artists happen to be going through drastic changes themselves.
            <a href="http://www.theawl.com/2011/09/kanye%E2%80%99s-808s-how-a-machine-brought-heartbreak-to-hip-hop">read full article</a>
            </p>
            <h3>"Make Me Proud": Does Drake Actually Care About Women?</h3>
            <p>But we’re already accustomed to chauvinism in hip hop; on Take Care, the women who are not Drake’s matriarchs are either treated like impassive, mindless listeners who need to be told they’ve made someone proud, or they need to be put in their place for doing him wrong. The “la da das" are only so distracting here.
            <a href="http://www.theawl.com/2011/11/make-me-proud-does-drake-actually-care-about-women">read full article</a>
            </p>
        </div>

        <div id="small-box4" class="small-box"><h2>other</h2>
            <h3>daily intel</h3>
            <h3>Kim’s Decision: How Kim Kardashian Made the Same Mistake As LeBron James</h3>
            <p>We may tolerate televised spectacles, but we’re affronted when they’re just as publicly unmasked. The interplay between audience and reality star acknowledges our complicity: We’re equal partners in the extravaganza and the collapse. And we don’t like to come out feeling like the chumps in that exchange.
            <a href="http://nymag.com/daily/intelligencer/2011/11/kims_decision_how_how_kim_kard.html">read full article</a>
            </p>
            <h3>sports illustrated</h3>
        </div>
    </div>

</div> 
```

提前致谢。克莱尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:27:10.673

我想我明白了。虽然教程头上有脚本，但我只是把脚本放在了写 div 部分。这似乎不优雅，但它正在工作。

# sql - 使用 SQL Workbench/J 和 amazon aws redshift 进行 UNPIVOT

> ID：15747832
> 
> 赞同：2
> 
> 时间：2013-04-01T17:02:30.623
> 
> 标签：sql, amazon-web-services, unpivot, amazon-redshift

我正在尝试在桌子上使用 unpivot。我正在使用 Workbench/J 作为亚马逊 redshift 的客户端。以下 select 语句不起作用：

```
SELECT 
  campaign_id,
  C.B,
  C.A
FROM campaign
UNPIVOT 
(
  A FOR B IN (item1, item2, item3)
) AS C 
```

我收到以下错误：

> 错误：“for”位置或附近的语法错误：62 [SQL 状态 = 42601]

如果可能的话，我想使用 UNPIVOT 而不是 UNION 并且它不会将 UNNEST 识别为函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:22:05.723

`UNPIVOT`语法是正确的，但并非每个数据库都支持该功能。

您可能需要考虑使用`UNION ALL`：

```
select campaign_id, 'item1' as B, item1 as A
from campaign
union all
select campaign_id, 'item2' as B, item2 as A
from campaign
union all
select campaign_id, 'item3' as B, item3 as A
from campaign 
```

# java - 在数组的下一行添加将格式化值存储为字符串的代码？

> ID：15747838
> 
> 赞同：1
> 
> 时间：2013-04-01T17:02:49.977
> 
> 标签：java

我需要使用二维数组作为分配的一部分。

1.  我需要在主方法的开头声明变量，用于行计数器和提供 10 行和 4 列的矩形字符串数组

2.  在计算、格式化和显示每次计算的结果的代码之后，添加将格式化的值作为字符串存储在数组的下一行的代码（您需要使用整数类的 toString 方法来存储年份值） .

我已经声明了一个 10x4 的数组和一个计数器变量，但是我在添加将格式化值作为字符串存储在数组的下一行中的代码时遇到了问题（您需要使用整数类的 toString 方法存储年份值）。

这是我在下面为这个问题（2）编写的代码，它似乎打印了一个空值列表，我如何让我的代码打印表格？在我看来，下面的这段代码是导致问题的代码，它正确吗？我有点困惑。

```
 FutureValueArray[counter][0] = Double.toString(monthlyInvestment);
    FutureValueArray[counter][1] = Double.toString(interestRate);
    FutureValueArray[counter][2] = Integer.toString(years);
    FutureValueArray[counter][3] = Double.toString(futureValue); 
```

* * *

```
/*This is how my table should look like.
Inv/Mo. Rate Years Future Value
$100.00 8.0% 10 $18.416.57
$125.00 8.0% 10 $23,020.71*/

public static void main(String[] args)
{
    String[][] FutureValueArray = new String [10][4];
    int counter = 0;
    // display a welcome message
    System.out.println("Welcome to the Future Value Calculator");
    System.out.println();

    // perform 1 or more calculations
    Scanner sc = new Scanner(System.in);
    String choice = "y";
    while (choice.equalsIgnoreCase("y"))
    {

        // get the input from the user
        System.out.println("DATA ENTRY");
        double monthlyInvestment = getDoubleWithinRange(sc,
            "Enter monthly investment: ", 0, 1000);
        double interestRate = getDoubleWithinRange(sc,
            "Enter yearly interest rate: ", 0, 30);
        int years = getIntWithinRange(sc,
            "Enter number of years: ", 0, 100);

        // calculate the future value
        double monthlyInterestRate = interestRate/12/100;
        int months = years * 12;
        double futureValue = calculateFutureValue(
            monthlyInvestment, monthlyInterestRate, months);

        // get the currency and percent formatters
        NumberFormat currency = NumberFormat.getCurrencyInstance();
        NumberFormat percent = NumberFormat.getPercentInstance();
        percent.setMinimumFractionDigits(1);

        // format the result as a single string
        String results =
              "Monthly investment:\t"
                  + currency.format(monthlyInvestment) + "\n"
            + "Yearly interest rate:\t"
                  + percent.format(interestRate/100) + "\n"
            + "Number of years:\t"
                  +  years + "\n"
            + "Future value:\t\t"
                  + currency.format(futureValue) + "\n";

        // print the results
        System.out.println();
        System.out.println("FORMATTED RESULTS");
        System.out.println(results);

        FutureValueArray[counter][0] = Double.toString(monthlyInvestment);
        FutureValueArray[counter][1] = Double.toString(interestRate);
        FutureValueArray[counter][2] = Integer.toString(years);
        FutureValueArray[counter][3] = Double.toString(futureValue);
        for(int i = 0; i < FutureValueArray.length; i++)
        {
            for (int j = 0; j < FutureValueArray[i].length; j++)
                System.out.println(FutureValueArray[i][j] + " ");
            System.out.println("\n");
        }
        // see if the user wants to continue
        System.out.print("Continue? (y/n): ");
        choice = sc.next();
        counter++;
        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:11:27.960

你的代码看起来不错。

如果你改变

```
for(int i = 0; i < FutureValueArray.length; i++) 
```

到

```
for(int i = 0; i <= counter; i++) 
```

您不会打印`FutureValueArray`尚未设置的行的空值。

此外，您似乎想`System.out.print()`在该循环中使用该函数，而不是该`System.out.println()`函数。

# iphone - 保存来自用户的请求

> ID：15747845
> 
> 赞同：0
> 
> 时间：2013-04-01T17:03:03.317
> 
> 标签：iphone, ios, objective-c

我有以下问题。我需要为一家餐厅制作一个应用程序，用户将能够选择一道菜并为同一道菜添加偏好，比如更多的盐、薯条等……该应用程序会在线读取所有菜式和偏好。我正在考虑使用 NSUserDefaults 在将请求发送到服务器之前临时保存请求。有一些因素需要考虑：

1.  用户可以编辑请求。
2.  用户可以删除请求。

构建此应用程序的最佳方法是什么？NSUserDefaults 还是 CoreData？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:20:13.577

核心数据主要用于处理海量数据，我个人认为您不需要将其用于餐厅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:27:06.917

如果你不熟悉 CoreData 并且数据项的数量相对较少，那么使用 NSUserDefaults 可能会更好。
但是，我认为正确的方法是使用 CoreData，因为它更加灵活和高效，并且您保存的数据在上下文上与用户默认值无关（我只会使用用户默认值来保存应用程序范围的数据和设置，不是数据记录）。使用 CoreData 更方便地更新、插入和删除数据记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:28:36.523

两者都不。我会说实现一个实现 NSCoding 协议的自定义类。NSCoding 要求你实现两种方法：

```
- (id)initWithCoder:(NSCoder *)aDecoder;
- (void)encodeWithCoder:(NSCoder *)aCoder; 
```

从那里，您将使用类似的东西`[NSKeyedArchiver archiveRootObject:myCustomDishArray toFile:[self dishesFilePath]];`

大多数 Cocoa 类已经实现了 NSCoding 协议，比如 NSArray，所以如果你有一个自定义类的实例数组，你可以归档这个数组。更多关于 NSCoding 协议的信息在[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)。

# c# - 转换字典 列出 使用 c# linq

> ID：15747851
> 
> 赞同：0
> 
> 时间：2013-04-01T17:03:30.957
> 
> 标签：c#, linq, list, dictionary, group-by

我有一本字典`<string,Rate>`

其中速率定义为：

```
class Rate
{
  public string Name { get; set;}
  public int Tier{ get; set;}
  public double Value { get; set;}

  public Rate(string name,int tr,double val)
   { Name = name; Tier = tr; Value = val;}
} 
```

我希望将此字典转换为列表，其中列表从上面的速率分解（分组）层，双数组也包含速率的值。

```
Rate rate1 = new Rate("One",1,1.1);
Rate rate2 = new Rate("Two",1,2.2);
Rate rate3 = new Rate("Three",2,3.3); 
```

因此，如果..

```
Dictionary<string,Rate> rates = new Dictionary<string,Rate> { {rate1.Name,rate1},{rate2.Name,rate2},{rate3.Name,rate3}};

List<double[]> myList = (linq result from Rates separated list of arrays by tier) 
```

那么 myList[0] 将计入 1.1 和 2.2，而 myList[1] 将计入 3.3。

答案很好，但我需要修改问题以提供按层排序的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:16:14.093

```
List<double[]> list = rates
            .GroupBy(pair => pair.Value.Class, pair => pair.Value.Value)
            .Select(doubles => doubles.Select(d => d).ToArray())
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:10:10.337

```
List<double[]> myList = rates.GroupBy(p => p.Value.Tier)
                             .Select(g => g.Select(p => p.Value.Value).ToArray())
                             .ToList(); 
```

# visual-studio-2010 - SQL Reporting Services 报告仅在第二次单击时加载

> ID：15747854
> 
> 赞同：4
> 
> 时间：2013-04-01T17:03:43.923
> 
> 标签：visual-studio-2010, reporting-services, asp.net-3.5

我有一个本地 .rdlc 报告被操纵以在单击按钮时显示，但由于某种原因，该报告仅显示在第二个按钮单击事件中。我不知道为什么报告没有在第一次单击按钮时显示...这是我在按钮的单击事件中调用的函数。

```
private void ShowReport(string accountingCompanyId, string companyId, string approvalUnitId, DateTime startDate, DateTime finishDate, string supplierId,
                    string documentNumber, string documentType, string documentState, string costCenterId, string chargingKeyId,
                    string dim1Value, string dim1Description, string dim1Id, string dim2Value, string dim2Description, string dim2Id,
                    string dim3Value, string dim3Description, string dim3Id, bool showDetails) {

        //this.ReportViewer1.Reset();

        //Set report mode for local processing.
        this.ReportViewer1.ProcessingMode = ProcessingMode.Local;

        ISettingsReader settingsReader = SettingsReaderFactory.Instance.CreateSettingsReader();
        this.ReportViewer1.LocalReport.ReportPath = settingsReader.GetSetting("ReportViewer", "FinancialReportPath" + (showDetails ? "" : "Small"), true, null);

        ReportsBL reports = new ReportsBL();

        // Clear out any previous datasources.
        this.ReportViewer1.LocalReport.DataSources.Clear();

        // Load the company dataSource.
        DataTable company = reports.GetCompanyDataSet(accountingCompanyId).Tables[0];
        ReportDataSource dataSourceCompany = new ReportDataSource(company.TableName, company);
        this.ReportViewer1.LocalReport.DataSources.Add(dataSourceCompany);

        // Load the dataSource.
        DataTable report = reports.GetReportFinanceiroSmallDataSet(companyId, startDate, finishDate, chargingKeyId, costCenterId, documentNumber, documentType, dim1Value, dim2Value, dim3Value, dim1Id, dim2Id, dim3Id, supplierId, approvalUnitId, documentState, accountingCompanyId).Tables[0];
        ReportDataSource dataSourceReport = new ReportDataSource(report.TableName, report);
        this.ReportViewer1.LocalReport.DataSources.Add(dataSourceReport);

        this.ReportViewer1.LocalReport.Refresh();

        this.pnlReport.Visible = true;
    } 
```

奇怪的是，如果我取消注释 this.ReportViewer.Reset(); 那么无论我产生多少点击次数，报告都不会显示...有人知道这是否正常吗？如何解决这个问题？提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:19:43.933

我想问题可能是在呈现页面后触发了 click 事件。`Page_Load`尝试在事件中调用方法。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsCallback)
    {
        ShowReport(
            // params
        );
    }
} 
```

如果这有效，您就知道它与执行顺序有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:18:55.050

经过大量试验和错误后，我通过在 pageload 事件上调用 databind() 方法使其工作。在页面加载数据绑定（没有设置数据源）之后，随后的按钮单击开始按预期工作。

我包含代码以防其他人遇到此错误。（很想知道为什么我需要在页面加载中进行数据绑定......）

**更新 2**

我终于找到了问题所在......原来.rdlc 是从旧的 2005 .rdl 报告迁移而来的，而新的 .rdlc 包含旧的报告参数+sql，这在某种程度上弄乱了报告的加载。在我删除未使用的报告参数 + sql 后，一切都开始完美运行......我更新了下面的代码以反映我现在在我的项目中使用的内容......

```
protected void Page_Load(object sender, System.EventArgs e) {

}

protected void btGenStats_Click(object sender, System.EventArgs e) {

    ...

    this.ShowReport(accountingCompanyId, companyId, approvalUnitId, startDate, finishDate, supplierId, documentNumber, documentType, documentState,
                    costCenterId, chargingKeyId, dim1, dim1Desc, dim1Id, dim2, dim2Desc, dim2Id, dim3, dim3Desc, dim3Id, showDetails);
}

private void ShowReport(string accountingCompanyId, string companyId, string approvalUnitId, DateTime startDate, DateTime finishDate, string supplierId, string documentNumber, string documentType, string documentState, string costCenterId, string chargingKeyId, string dim1Value, string dim1Description, string dim1Id, string dim2Value, string dim2Description, string dim2Id, string dim3Value, string dim3Description, string dim3Id, bool showDetails) {

    this.ReportViewer1.Reset();

    //Set report mode for local processing.
    this.ReportViewer1.ProcessingMode = ProcessingMode.Local;

    ISettingsReader settingsReader = SettingsReaderFactory.Instance.CreateSettingsReader();
    string reportPath = settingsReader.GetSetting("ReportViewer", "FinancialReportPath"+( showDetails? "" : "Small" ), true, null);
    this.ReportViewer1.LocalReport.ReportPath = Server.MapPath(reportPath);

    ReportsBL reports = new ReportsBL();

    // Clear out any previous datasources.
    this.ReportViewer1.LocalReport.DataSources.Clear();

    // Load the company dataSource.
    DataTable company = reports.GetCompanyDataSet(accountingCompanyId).Tables[0];
    ReportDataSource dataSourceCompany = new ReportDataSource(company.TableName, company);
    this.ReportViewer1.LocalReport.DataSources.Add(dataSourceCompany);

    if (showDetails)
    {
        // Load the dataSource.
        DataTable report = reports.GetReportFinanceiroDataSet(companyId, approvalUnitId, startDate, finishDate, chargingKeyId, costCenterId, documentNumber, documentType, dim1Value, dim2Value, dim3Value, dim1Id, dim2Id, dim3Id, supplierId, documentState, accountingCompanyId).Tables[0];
        ReportDataSource dataSourceReport = new ReportDataSource(report.TableName, report);
        this.ReportViewer1.LocalReport.DataSources.Add(dataSourceReport);
    }
    else
    {
        // Load the dataSource.
        DataTable report = reports.GetReportFinanceiroSmallDataSet(companyId, approvalUnitId, startDate, finishDate, chargingKeyId, costCenterId, documentNumber, documentType, dim1Value, dim2Value, dim3Value, dim1Id, dim2Id, dim3Id, supplierId, documentState, accountingCompanyId).Tables[0];
        ReportDataSource dataSourceReport = new ReportDataSource(report.TableName, report);
        this.ReportViewer1.LocalReport.DataSources.Add(dataSourceReport);
    }

    this.pnlReport.Visible = true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T21:38:50.643

我从来不需要调用 ReportViewer.DataBind(); 以下是我通常做的事情：

```
IEnumerable<ReportClass> ds = DataTranslator.GetReportData(Int64.Parse(<someId>));
report.LocalReport.ReportPath = "<some_path_to_report.rdlc>";
report.LocalReport.DataSources.Add(new ReportDataSource("DataSet", ds));
report.Visible = true;
report.LocalReport.Refresh(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T05:54:12.457

试试这个代码：

```
 protected void btnSubmit_Click(object sender, EventArgs e)
        {
            string pstrType;
            pstrType = Request.QueryString["Type"];           
            LoadReport();
        }

        public class CustomReportCredentials : Microsoft.Reporting.WebForms.IReportServerCredentials
        {
            // local variable for network credential.
            private string _UserName;
            private string _PassWord;
            private string _DomainName;
            public CustomReportCredentials(string UserName, string PassWord, string DomainName)
            {
                _UserName = UserName;
                _PassWord = PassWord;
                _DomainName = DomainName;
            }
            public System.Security.Principal.WindowsIdentity ImpersonationUser
            {
                get
                {
                    return null;  // not use ImpersonationUser
                }
            }
            public System.Net.ICredentials NetworkCredentials
            {
                get
                {
                    // use NetworkCredentials
                    return new NetworkCredential(_UserName, _PassWord, _DomainName);
                }
            }
            public bool GetFormsCredentials(out Cookie authCookie, out string user, out string password, out string authority)
            {
                // not use FormsCredentials unless you have implements a custom autentication.
                authCookie = null;
                user = password = authority = null;
                return false;
            }
        }

        void LoadReport()
        {
            string strCompanyName = objSession.SelCompanyName;
            string strHeading = "";
            string strBranchName = objSession.SelBranchName;
            rptvwMain.ProcessingMode = ProcessingMode.Remote;
            rptvwMain.ServerReport.ReportServerCredentials = new CustomReportCredentials(AppConfig.ReportServerUserName, AppConfig.ReportServerPassword, AppConfig.ReportServerDomain);
            string strReportServerUrl = AppConfig.ReportServerUrl + AppConfig.ReportServerFolder;
            rptvwMain.ServerReport.ReportServerUrl = new Uri(strReportServerUrl);
            List<ReportParameter> parameters = new List<ReportParameter>();
    if (pstrType == "OB")
            {
                strHeading = "Ledger Opening Balance";
                rptvwMain.ServerReport.ReportPath = "/Account/OpeningBalance";
            }

            parameters.Add(new ReportParameter("FyId", Convert.ToInt16(objSession.FyId).ToString()));
            parameters.Add(new ReportParameter("AccountGroupId", cmbAccountGroup.SelectedValue));
            parameters.Add(new ReportParameter("LedgerId", cmbLedgerId.SelectedValue));
            parameters.Add(new ReportParameter("BranchId", Convert.ToInt64(objSession.BranchId).ToString()));
            parameters.Add(new ReportParameter("StDate", Convert.ToDateTime(RadDtpFromDate.SelectedDate).ToString()));
            parameters.Add(new ReportParameter("EnDate", Convert.ToDateTime(RadDtpToDate.SelectedDate).ToString()));
            parameters.Add(new ReportParameter("CompanyName", strCompanyName.ToString()));
            parameters.Add(new ReportParameter("BranchName", strBranchName.ToString()));
            parameters.Add(new ReportParameter("Heading",strHeading.ToString()));
            rptvwMain.ServerReport.SetParameters(parameters);

            rptvwMain.ServerReport.SetDataSourceCredentials(new[] { new DataSourceCredentials() { Name =AppConfig.ReportServerDataSource , UserId = AppConfig.ReportServerDSUserName, Password = AppConfig.ReportServerDSPassword } });
            rptvwMain.ShowZoomControl = true;
            rptvwMain.ServerReport.Refresh();
        }
    } 
```

# iphone - iPhone - GCD 第一次不工作

> ID：15747855
> 
> 赞同：0
> 
> 时间：2013-04-01T17:03:44.250
> 
> 标签：iphone, ios, objective-c, xcode, cocoa

在我的应用程序中，我从 URL 加载图像：

```
-(void)loadImages
{
    ...

    image1 = [UIImage imageWithData:[NSData dataWithContentsOfURL:imgUrl1]];
} 
```

为了避免在下载完成之前阻塞主线程，我在 **-viewDidAppear**中使用以下方法调用此方法`GCD`：

```
dispatch_async( dispatch_get_global_queue(0,0), ^{
            [self loadImages];
        }); 
```

然而，当我第一次打开我`view controller`的`imageView`时候，它`imageView`是空的（即使我等了很长时间）但是当我`view controller`再次打开它并且图像出现并且一切都很好。

我的错误在哪里？抱歉，多线程新手 :)

**编辑**：我也忘了提到，我在`tableView`得到它时使用了图像：

```
 cell.imageView.image = image1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:15:28.707

iOS 中的 UIElements 应该始终通过主线程进行更新。你可以做的是： -

```
 __block NSData *data;
    dispatch_queue_t myQueue = dispatch_queue_create("com.appName", NULL);
    dispatch_async(myQueue, ^{
       data = [NSData dataWithContentsOfURL:imgUrl1];
       dispatch_async(dispatch_get_main_queue(), ^(void) {
       cell.imageView.image = [UIImage imageWithData = data];
    });
    }); 
```

否则，您有更好的方法可以使用 AFNetworking 从 URL 获取图像。它更快更容易。你只需要写一行代码：-

```
[cell.imageView setImageWithURL:imgUrl1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:16:20.737

这可能不是您要寻找的答案，但这不是加载 URL 的推荐方式。您应该使用可用的 URL 加载类，例如 NSURLRequest 和 NSURLConnection。

试试这个：

```
NSURLRequest *imageRequest = [[NSURLRequest alloc] initWithURL:imageURL];
[NSURLConnection sendAsynchronousRequest:imageRequest queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    if (!error) {
        UIImage *image = [[UIImage alloc] initWithData:data];
        [imageView setImage:image];
    }
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:09:01.230

您需要通知视图图像需要重绘。添加：

`[imageView setNeedsDisplay];`

到你的`loadImages`方法结束。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T06:20:49.243

你这里有很多问题：

1.  您不能在未运行 runloop 的线程上启动网络请求。
2.  您不能从主线程以外的线程更新您的 UI。
3.  `[NSData dataWithContentsOfURL:imgUrl1]`即使在不同的线程上（尤其是在主线程上），也不是加载外部资源的安全方法。
4.  每当您分派到不同的线程时，您都会面临表格单元格已被回收并且不再显示您认为的数据的风​​险。（它仍然是同一个单元格实例，但现在显示了一些其他行的数据。）

你应该做什么：

1.  在主线程上使用异步调用启动您的网络操作。（如果需要，您可以使用另一个线程或队列，但您需要确保它正在运行一个运行循环。）
2.  从您的委托消息中，将您的图像解码分派到不同的线程上。
3.  图像解码后，派回主线程进行更新。
4.  在实际分配图像之前，请检查单元格是否仍在用于您认为的目的。

您可以使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)解决前三个问题。它包装了委托方法，让您只提供一个成功和失败块。正如我所描述的， AFNetworking 的[AFImageRequestOperation特别是在队列之间反弹代码。](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFImageRequestOperation.h)（它甚至在不同的线程中运行它的主网络循环，这不是*必需*的，但既然它做得很好，为什么不呢？）

您仍然需要验证单元格的身份。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T17:33:06.263

既然是在TableView中使用，添加[self.tableView reloadData]; 在 loadImages 方法的最后。

# html - IE9和IE10中没有出现边框

> ID：15747859
> 
> 赞同：6
> 
> 时间：2013-04-01T17:03:53.197
> 
> 标签：html, internet-explorer-9, internet-explorer-10

我遇到了表格边框无法正确显示的问题。下面是一个重新创建问题的小提琴。

这个[小提琴](http://jsfiddle.net/vVDm2/20/)在 FF 和 Chrome 中产生了预期的结果，但在 IE9 和 IE10 中没有。

只有正在应用的 CSS 是边框折叠：折叠和

```
td{
   border:1px solid;
} 
```

第二个表格行应该在整个底部都有一个边框，但是第二个表格单元格上没有边框。[在这张图片](http://imgur.com/sQ78EzR)中可以看到。

一旦突出显示表格的一部分，这个问题就会消失，但预期的结果是边框应该首先存在。有时必须更新小提琴才能出现问题。

这是一个已知的 IE 问题还是必须应用更多样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-10T08:47:47.710

我有一个类似的问题，你上面的解决方案对我有用，但有一点改变。（我使用了素面）

以下代码有效

```
.ui-datatable tbody>tr>td {
    border-top: 1.1px solid; 
} 
```

以下代码不起作用

```
.ui-datatable tbody>tr>td {
    border-top: 1px solid; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:02:15.320

我能找到的最佳解决方案：

```
table{border-top:1px solid #000;}
tr{border-left:1px solid #000;border-bottom:1px solid #000;}
td{border-right:1px solid #000;} 
```

[这里的例子](http://dev.bescow.com/ieborder/)

已在 IE9 和 IE10 中检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T09:23:12.963

由于这是由`border-collapse: collapse`它引起的，因此也可以通过手动将边框放置在正确的位置并使用`border-collapse: separate`.

```
table { 
    border-collapse: separate;
    border-spacing: 0;
}

td {
    border-bottom:1px solid;
    border-right:1px solid;
}

tr > td:first-child {
    border-left: 1px solid;
}

table tr:first-child td {
    border-top: 1px solid;
} 
```

这在 IE7 及更低版本中不起作用，因为它们既不支持`border-spacing`也不支持`:first-child`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-24T10:08:07.753

对我来说[，这](http://social.msdn.microsoft.com/Forums/ie/en-US/c674a015-11cb-49af-a876-887fe7900d89/ie9-css-table-with-bordercollapse-fails-to-render-some-borders-when-printing?forum=iewebdevelopment)很有效：

```
<table cellspacing="0" and cellpadding="0"> ... </table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-22T15:14:12.703

我发现`position: static;`在`th`/上使用`td`效果很好。

```
table {
    border-collapse: collapse;
    border: none;
}
tr {
    border: none;
}
th, td {
    position: static;
    border: 1px solid #000;
} 
```

# c# - .Net：我是否需要在不同的项目中创建自定义控件？

> ID：15747871
> 
> 赞同：0
> 
> 时间：2013-04-01T17:05:01.033
> 
> 标签：c#, .net, wpf, vb.net, user-controls

可能会问这个问题，但是我想创建自定义控件，出于某种原因，网上的每个教程都说我们应该创建一个特殊的项目，然后将 dll 引用到母项目中。

我们真的需要那样做吗？我正在尝试使用 ClickOnce，当它只有一个项目时，它更易于部署。

我想知道，是否有必要这样做，如果没有，我可以创建一个 CustomControl o UserControl 并调用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:11:28.093

没有*必要*但*建议*在单独的类库项目中定义您的自定义控件，因此重用它就像引用该项目一样简单。

# facebook - Facebook opengraph（共享者）重复图像

> ID：15747874
> 
> 赞同：0
> 
> 时间：2013-04-01T17:05:09.430
> 
> 标签：facebook, facebook-opengraph, facebook-sharer

我在页面标题中包含了 opengraph 标签，如下所示：

```
<meta property="og:image" content="http://image1.jpg" />
<meta property="og:image" content="http://image2.jpg" /> 
```

图像 1 也显示在 body 标签中，这可能会导致图像 1 再次被抓取，从而在 Facebook 共享器中产生重复。我认为只有那些带有 og 元标记的图像才应该出现。Facebook Debug Linter 仅正确显示这两个图像。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-25T04:15:25.810

您应该使用代码从当前页面获取图像。这是代码：

```
<meta property="og:image" content="<?php echo $image; ?>" /> 
```

# android - 如何在android相机活动中放置日期水印

> ID：15747879
> 
> 赞同：0
> 
> 时间：2013-04-01T17:05:29.407
> 
> 标签：android, android-activity, camera

我正在使用下一个代码获取图片：

```
public void foto(View v) {
    nom_foto = Environment.getExternalStorageDirectory()+ aptr.ruta_temp + cuadrilla + "/" + medidor + "_"+ cont_foto + ".jpg";
    File arch = new File(Environment.getExternalStorageDirectory()+ aptr.ruta_temp+ cuadrilla);
    if (!arch.exists())
        arch.mkdirs();
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    int code = TAKE_PICTURE;
    Uri output = Uri.fromFile(new File(nom_foto));
    intent.putExtra(MediaStore.EXTRA_OUTPUT, output);
    startActivityForResult(intent, code);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == TAKE_PICTURE) {
        ImageView iv = (ImageView) findViewById(R.id.minifoto);
        if (resultCode == RESULT_OK) {
            new MediaScannerConnectionClient() {
                private MediaScannerConnection msc = null;
                {
                    msc = new MediaScannerConnection(getApplicationContext(), this);
                    msc.connect();
                }
                public void onMediaScannerConnected() {msc.scanFile(nom_foto,null); 
                }
            public void onScanCompleted(String path, Uri uri) 
            { msc.disconnect();}};
        Toast.makeText(usuario_lectura.this,"Foto N° " + cont_foto + " agregada  correctamente",    Toast.LENGTH_LONG).show();
        cont_foto++;
        iv.setVisibility(View.VISIBLE);
        iv.setImageBitmap(BitmapFactory.decodeFile(nom_foto));
        }
    }
    if (resultCode == RESULT_CANCELED) {
        File file = new File(nom_foto);
        if (file.exists())
            file.delete();
        }
    }
} 
```

一切正常，照片已正确拍摄并保存在 SD 卡上...但是，我必须添加水印，包括日期...如何添加？，相机活动没有给我这些选项...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:11:35.873

为了从相机向您的图像添加文本或图形水印，您必须打开图像，`Canvas`使用`Paint/Graphics`叠加层对其进行编辑，然后将其重新编码为 .jpg 图像，并将其重新保存为文件SD卡。您可以保存相机中的原始文件。所有这些步骤都相当简单。

然而，有一个严重的障碍。

大多数设备将无法在单个位图中打开来自相机的全尺寸图像。没有足够的可用堆内存。因此，您必须使用比例因子`inSampleSize`来打开图像。因此，带水印的图像将永远比相机的原始图像小一些。

我认为没有办法解决这个问题:(

# windows - Haxe - 部署到 Windows 时舞台上的对象不显示

> ID：15747886
> 
> 赞同：1
> 
> 时间：2013-04-01T17:05:46.290
> 
> 标签：windows, object, haxe, stage, nme

我正在使用 Haxe/nme 和 Flash Develope 将 Flash 游戏移植到多个平台。我所有的导入库都来自 NME。该程序以 Flash 为目标编译并运行良好。但是当我以 Windows 为目标时，程序编译并运行，甚至音乐开始播放，但我看到的只是一个空白窗口。

舞台上的所有物品都不见了。没有错误，一切似乎都可以完美编译/运行，除了没有对象出现？

我需要做一些特别的事情来使对象显示为 windows 目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:31:35.977

我解决了。隔行扫描 PNG 的工作在部署到 flash 时效果很好，但在 windows 上绝对不会显示任何内容，而且完全没有错误。这显然应该在某处用粗体字警告新手，但现在我知道一切都运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T11:40:19.550

没有“使对象显示在 Windows 目标上”设置。很难在没有看到代码的情况下告诉您代码是否有问题。

请尝试将示例项目编译到 windows 以查看工作项目。[http://www.nme.io/developer/documentation/getting-started/](http://www.nme.io/developer/documentation/getting-started/)

# javascript - 从剪贴板获取图像并从客户端浏览器 chrome 或 firefox 将其保存到服务器

> ID：15747896
> 
> 赞同：1
> 
> 时间：2013-04-01T17:06:16.047
> 
> 标签：javascript, jquery

我正在使用[本教程](http://strd6.com/2011/09/html5-javascript-pasting-image-data-in-chrome/)，它适用于 chrome，它向我显示了一个图像作为 div 背景图像

现在我想将该图像保存在服务器端的特定文件夹中...我的示例代码只需复制并保存在 .html 中并使用 chrome 打开...然后按键盘的 printscreen 按钮并单击此页面并按 Ctrl+ V 你会看到图像...现在我希望将该图像保存在服务器端的特定文件夹中

我的代码

```
 <html lang="en-US">

            <head>
            <meta charset="UTF-8" />
            <meta name="viewport" content="width=device-width" />
            <title>HTML5 JavaScript Pasting Image Data in Chrome   </title>

            <link rel="stylesheet" type="text/css" media="all" href="http://strd6.com/wp-content/themes/twentyeleven/style.css" />
            <script type='text/javascript' src='http://strd6.com/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>

            </head>

            <body  >
            <div id="page" style="height:1000px">

             <script>

            (function() {
              (function($) {
                var defaults;
                $.event.fix = (function(originalFix) {
                  return function(event) {
                    event = originalFix.apply(this, arguments);
                    if (event.type.indexOf('copy') === 0 || event.type.indexOf('paste') === 0) {
                      event.clipboardData = event.originalEvent.clipboardData;
                    }
                    return event;
                  };
                })($.event.fix);
                defaults = {
                  callback: $.noop,
                  matchType: /image.*/
                };
                return $.fn.pasteImageReader = function(options) {
                  if (typeof options === "function") {
                    options = {
                      callback: options
                    };
                  }
                  options = $.extend({}, defaults, options);
                  return this.each(function() {
                    var $this, element;
                    element = this;
                    $this = $(this);
                    return $this.bind('paste', function(event) {
                      var clipboardData, found;
                      found = false;
                      clipboardData = event.clipboardData;
                      return Array.prototype.forEach.call(clipboardData.types, function(type, i) {
                        var file, reader;
                        if (found) {
                          return;
                        }
                        if (type.match(options.matchType) || clipboardData.items[i].type.match(options.matchType)) {
                          file = clipboardData.items[i].getAsFile();
                          reader = new FileReader();
                          reader.onload = function(evt) {
                            return options.callback.call(element, {
                              dataURL: evt.target.result,
                              event: evt,
                              file: file,
                              name: file.name
                            });
                          };
                          reader.readAsDataURL(file);

                          return found = true;
                        }
                      });
                    });
                  });
                };
              })(jQuery);
            }).call(this);
            jQuery("html").pasteImageReader(function(results) {
              var dataURL, filename;
              filename = results.filename, dataURL = results.dataURL;

              return jQuery("#page").css({
                backgroundImage: "url(" + dataURL + ")",
                backgroundRepeat: "repeat"
              });
            });
            </script> 

            </div> 

            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:38:43.273

您需要将数据发送到服务器，可能使用 Ajax POST 请求。数据可以从 dataURL 中提取，它是一个 base64 编码的图像，前面有一些元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:21:44.977

昨天我面临这个问题，现在我在 Firefox 中解决了这个问题......

示例代码 index.jsp

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript"  >

    $(document).ready(function() {
    $('#submit').click(function() {
        $.ajax({
            type: "POST",
            url: "<%= request.getContextPath()%>" + "/ImageCreator",
            data: {html: $('#mydiv').find("img").attr('src')},
            success: function() {
                alert("Image Successfully Uploaded,Now Go Back And Click Submit");
                 window.close();
                 window.close();
            },
            error: function() {
                alert("Error Occurred  While Uploading Image");
            }
        });
    });

    });
    </script>
    </head>
    <body>
    <div style="text-align: center;">
    <h2>Press Keyboard "Print Screen key" Than Click in the Colored Area and Press Control+V then Click  Upload Button</h2>
      <!--  <div onclick="createDiv()"> Click Here!</div> 
    <div onclick="subb();"> Click Value!</div> -->
      <Button href="#" id="submit" >Upload</button>
      <div contenteditable="" id="mydiv" style=" height: 700px;background-color: #CCCCCC;"></div>
    </div>
    </body>
    </html> 
```

在它将ajax请求发送到servlet名称/ImageCreator

那是servlet的代码

```
 import java.awt.image.BufferedImage;
        import java.io.File;
        import java.io.IOException;
        import java.io.PrintWriter;
        import java.text.DateFormat;
        import java.text.SimpleDateFormat;
        import java.util.Date;
        import javax.imageio.ImageIO;
        import javax.mail.Session;
        import javax.servlet.ServletException;
        import javax.servlet.http.HttpServlet;
        import javax.servlet.http.HttpServletRequest;
        import javax.servlet.http.HttpServletResponse;
        import javax.servlet.http.HttpSession;
        import util.ImageUtils;

        /**
         *
         * @author Zeeshan Akhter
         */
        public class ImageCreator extends HttpServlet {

            protected void processRequest(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
                response.setContentType("text/html;charset=UTF-8");
                PrintWriter out = response.getWriter();
                BufferedImage newImg;
                HttpSession session = request.getSession(true);
                String minedata = request.getParameter("html");
              //  System.out.println("minedata" + minedata);
                newImg = ImageUtils.decodeToImage(minedata.replace("data:image/png;base64,", ""));

                String date = "";
                Date date1 = new Date();
                DateFormat formatter = new SimpleDateFormat("ddMMyyhhmmss");
                date = formatter.format(date1);
                //  File FilePathsdd = new File(FilePaths);
                //  JOptionPane.showConfirmDialog(null,application.getRealPath(request.getContextPath()+"/js/") );
                File dateFolder = new File(((String) session.getAttribute("imagePath")) + "/js/" + date);
                if (!dateFolder.exists()) {
                    dateFolder.mkdir();
                    dateFolder.setExecutable(true);
                    dateFolder.setReadable(true);
                    dateFolder.setWritable(true);
                }
                String path = dateFolder.getAbsolutePath();
                while ((path.contains("\\"))) {
                    System.out.println("\nPath1=" + path);
                    path = (path.replace("\\", "/"));
                    System.out.println("\nPath2=" + path);
                }
                File Save = new File(path + "/ForexImage.png");
                System.out.println("ImagePath=" + Save.getAbsolutePath().replace("\\", "/"));
                session.setAttribute("createdFilePath", Save.getAbsolutePath().replace("\\", "/"));
                ImageIO.write(newImg, "png", Save);

            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T11:56:27.270

这是类 util.ImageUtils

```
package util;

/**
 *
 * @author ZeeshanAakhter
 *http://latest-tutorial.com
 *http://zeeshanakhter.com
 */
import java.io.IOException;

import sun.misc.BASE64Encoder;
import sun.misc.BASE64Decoder;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;

public class ImageUtils {

    /**
     * Decode string to image
     *
     * @param imageString The string to decode
     * @return decoded image
     */
    public static BufferedImage decodeToImage(String imageString) {

        BufferedImage image = null;
        byte[] imageByte;
        try {
            BASE64Decoder decoder = new BASE64Decoder();
            imageByte = decoder.decodeBuffer(imageString);
            ByteArrayInputStream bis = new ByteArrayInputStream(imageByte);
            image = ImageIO.read(bis);
            bis.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return image;
    }

    /**
     * Encode image to string
     *
     * @param image The image to encode
     * @param type jpeg, bmp, ...
     * @return encoded string
     */
    public static String encodeToString(BufferedImage image, String type) {
        String imageString = null;
        ByteArrayOutputStream bos = new ByteArrayOutputStream();

        try {
            ImageIO.write(image, type, bos);
            byte[] imageBytes = bos.toByteArray();

            BASE64Encoder encoder = new BASE64Encoder();
            imageString = encoder.encode(imageBytes);

            bos.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return imageString;
    }
} 
```

# mysql - 使用 case 和 sum 语句更新

> ID：15747898
> 
> 赞同：0
> 
> 时间：2013-04-01T17:06:22.367
> 
> 标签：mysql, sql

运行此查询后，我收到一条错误消息，指出无效使用组功能。我很确定它在 case 语句之后，我需要一个“AS 金额”或“AS i.amount”，但 mySQl 也不喜欢其中任何一个。有什么建议么？

```
update INVITATION AS i 
 LEFT JOIN REGISTRATION AS r on i.id=r.INVITATION_id 
 LEFT JOIN FUNDING AS f on r.id=f.REGISTRATION_id 
 SET i.funding_travel_amount =  SUM(case
when f.category = "Other" then sum(amount) 
when f.category = "Airfare" then sum(amount)
when f.category = "Mileage" then sum(amount)
else 0 end), i.funding_travel = "Custom" 
 WHERE i.funding_hotel = "Prepaid" 
 and i.funding_travel = "None" 
 and i.funding_per_diem = "None" 
 and (f.category = "Other" OR f.category ="Airfare" OR f.category= "Mileage")
 and f.id is not null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:12:04.907

可能，您应该在金额之前删除**总和**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:01:22.747

这是您的查询格式，因此更具可读性（至少对我而言）：

```
update INVITATION i LEFT JOIN
       REGISTRATION r
       on i.id=r.INVITATION_id LEFT JOIN
       FUNDING AS f on r.id=f.REGISTRATION_id 
    SET i.funding_travel_amount = 
            SUM(case when f.category = "Other" then sum(amount) 
                     when f.category = "Airfare" then sum(amount)
                     when f.category = "Mileage" then sum(amount)
                     else 0
                end),
       i.funding_travel = "Custom" 
     WHERE i.funding_hotel = "Prepaid" and
           i.funding_travel = "None" and
           i.funding_per_diem = "None"  and
           (f.category = "Other" OR f.category ="Airfare" OR f.category= "Mileage") and
           f.id is not null; 
```

Onee 的问题很明显——在 sum 中有 sum 语句。我会用一个相关的子查询来写这个：

```
update INVITATION 
    SET funding_travel_amount = 
            (select SUM(case when f.category = "Other" then amount
                             when f.category = "Airfare" then amount
                             when f.category = "Mileage" then amount
                             else 0
                        end)
             from Registration r join
                  Funding f
                  on r.id=f.REGISTRATION_id and
                  invitation.id = r.invitation_id
            ),
       funding_travel = "Custom" 
     WHERE funding_hotel = "Prepaid" and
           funding_travel = "None" and
           funding_per_diem = "None" 
```

这并不完全相同，因为即使没有任何类别可用，它也会更新金额。您可以在`where`.

# java - 在多个转换之间共享值？

> ID：15747906
> 
> 赞同：0
> 
> 时间：2013-04-01T17:06:42.360
> 
> 标签：java, design-patterns, guava

想象一下，我有以下值列表：

```
List<String> values = Lists.asList("a", "a", "b", "c"); 
```

现在我想为所有值添加一个索引，以便最终将其作为列表：

```
a1 a2 b1 c1 // imagine numbers as subscript 
```

我想为此使用 a[`FluentIterable`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/FluentIterable.html)及其[`transform`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/FluentIterable.html#transform%28com.google.common.base.Function%29)方法，所以是这样的：

```
from(values).transform(addIndexFunction); 
```

问题在于，that`addIndexFunction`需要知道索引已经增加的频率 - 想想`a2`，当向 this 添加索引时`a`，函数需要知道，已经有一个`a1`.

那么，是否有某种最佳实践来做这样的事情？我目前的想法是创建一个以每个字母为键的 Map ，所以：

```
Map<String,Integer> counters = new HashMap<>();
// the following should be generated automatically, but for the sake of this example it's done manually...
counters.put("a", 0);
counters.put("b", 0);
counters.put("c", 0); 
```

然后修改我的转换调用：

```
from(values).transform(addIndexFunction(counters)); 
```

由于 Map 是一个对象并通过引用传递，我现在可以在转换之间共享计数器状态，对吗？反馈，更好的想法？Guava 中是否有一些内置机制来处理这些事情？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:44:15.953

不要`transform`在这里使用，否则每次迭代它时你的可迭代对象都会有不同的值，并且通常会表现得很奇怪。（在`Function`.

相反，使用助手进行适当的`for`循环：`Multiset`

```
Multiset<String> counts = HashMultiset.create();
List<Subscript> result = Lists.newArrayList();
for (String value : values) {
  int count = counts.add(value, 1);
  result.add(new Subscript(value, count));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T17:23:26.160

使用[Multiset](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)替换 HashMap，您可以按照@Perception 的建议将 Multiset 封装在 Function 本身中，并在应用函数时聚合数据。

# shell - 如何使用 Head 和 Tail 打印文件的特定行

> ID：15747912
> 
> 赞同：20
> 
> 时间：2013-04-01T17:06:56.250
> 
> 标签：shell, unix, arguments, tail, unix-head

我想说输出文件的第 5-10 行，作为传入的参数。

我怎么能使用`head`和`tail`做到这一点？

在哪里`firstline = $2`和`lastline = $3`。`filename = $1`

运行它应该是这样的：

```
./lines.sh filename firstline lastline 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-01T17:12:07.547

```
head -n XX # <-- print first XX lines
tail -n YY # <-- print last YY lines 
```

如果你想要从 20 到 30 的行，这意味着你想要从 20 开始到 30 结束的 11 行：

```
head -n 30 file | tail -n 11
# 
# first 30 lines
#                 last 11 lines from those previous 30 
```

也就是说，您首先获得第一`30`行，然后选择最后一行`11`（即`30-20+1`）。

所以在你的代码中它将是：

```
head -n $3 $1 | tail -n $(( $3-$2 + 1 )) 
```

基于`firstline = $2`, `lastline = $3`,`filename = $1`

```
head -n $lastline $filename | tail -n $(( $lastline -$firstline + 1 )) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-01T17:37:48.943

除了[fedorqui](https://stackoverflow.com/a/15747990/1430833)和[Kent](https://stackoverflow.com/a/15747983/1430833)给出的答案之外，您还可以使用单个`sed`命令：

```
#!/bin/sh
filename=$1
firstline=$2
lastline=$3

# Basics of sed:
#   1\. sed commands have a matching part and a command part.
#   2\. The matching part matches lines, generally by number or regular expression.
#   3\. The command part executes a command on that line, possibly changing its text.
#
# By default, sed will print everything in its buffer to standard output.  
# The -n option turns this off, so it only prints what you tell it to.
#
# The -e option gives sed a command or set of commands (separated by semicolons).
# Below, we use two commands:
#
# ${firstline},${lastline}p
#   This matches lines firstline to lastline, inclusive
#   The command 'p' tells sed to print the line to standard output
#
# ${lastline}q
#   This matches line ${lastline}.  It tells sed to quit.  This command 
#   is run after the print command, so sed quits after printing the last line.
#   
sed -ne "${firstline},${lastline}p;${lastline}q" < ${filename} 
```

或者，为了避免任何外部实用程序，如果您使用的是最新版本的 bash（或 zsh）：

```
#!/bin/sh

filename=$1
firstline=$2
lastline=$3

i=0
exec <${filename}  # redirect file into our stdin
while read ; do    # read each line into REPLY variable
  i=$(( $i + 1 ))  # maintain line count

  if [ "$i" -ge "${firstline}" ] ; then
    if [ "$i" -gt "${lastline}" ] ; then
      break
    else
      echo "${REPLY}"
    fi
  fi
done 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-01T17:11:51.680

试试这个单行：

```
awk -vs="$begin" -ve="$end" 'NR>=s&&NR<=e' "$f" 
```

在上面的行中：

```
$begin is your $2
$end is your $3
$f is your $1 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-25T19:02:17.807

将此另存为“ **script.sh** ”：

```
#!/bin/sh

filename="$1"
firstline=$2
lastline=$3
linestoprint=$(($lastline-$firstline+1))

tail -n +$firstline "$filename" | head -n $linestoprint 
```

没有*错误处理*（为简单起见），因此您必须按以下方式调用脚本：

**./script.sh yourfile.txt 第一行 最后一行**

```
$ ./script.sh yourfile.txt 5 10 
```

如果您只需要 yourfile.txt 中的“10”行：

```
$ ./script.sh yourfile.txt 10 10 
```

请确保： (firstline > 0) AND (lastline > 0) AND (firstline <= lastline)

# php - AJAX 在数组中加载更多行

> ID：15747917
> 
> 赞同：0
> 
> 时间：2013-04-01T17:07:27.207
> 
> 标签：php, jquery, ajax

我不得不承认我的 AJAX 技术很烂。我有一系列新闻。大约有 25 行。我想我不会显示所有 25 行，而是将数组分成 5 部分，并允许用户使用 array_slice 和一些 ajax 来“加载更多”。php 方面对我来说很容易，但我在使用 ajax 时遇到了一些问题。我尽我所能把它放在一起，但它还没有完全奏效。

阿贾克斯：

```
<script type="text/javascript">
$(document).ready(function() {
            $('#load-more').click(function () {        

                var size = 5;

                var data = 'size=' + content.val() + '&submit=yes';
                $('.loading-circle').show();

                //start the ajax
                $.ajax({
                    url: "<?php echo $url; ?>/process/load.php",    
                    type: "GET",        
                    data: data,        
                    cache: false,
                    success: function (html) {                
                        if (html==1) {                    

                        } 
                        else {
                            alert("Sorry, an unnexpected error has occurred."); 
                        }              
                    }        
                });
                return false;
            });    
        });    
    </script> 
```

加载.php

```
<?php
session_start();

if ($_GET["submit"] == 'yes')
{
    $_SESSION["load_size"] = $_GET["size"];
}
?> 
```

索引.php

```
$sorted = Feed::sortFeed($feed, $day, 0, $_SESSION["load_size"]);

foreach ($sorted as $article)           
    require $baseDir . 'feed.php'; 
```

所以我试图让会话变量来确定大小。尽管我不知道如何解决，但这种方法存在一些问题。每个页面可能有多个新闻提要，即使用户只想扩展一个，它们也会全部扩展。最重要的是，提要在页面刷新时不会调整为默认值 5。我在想我必须使用 load.php 页面生成数组，但我不知道如何通过 ajax 将其传回。那么我将如何最好地使用 ajax 对数组进行排序。有什么我可以阅读的，或者我可以做一些简单的改变吗​​？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:39:51.970

`json_encode`您可以使用 PHP 数组上的函数通过 ajax 将 PHP 数组传回。只需在 load.php 中回显 json_encode 的返回值

```
<?php
session_start();

if ($_GET["submit"] == 'yes')
{
    $_SESSION["load_size"] = $_GET["size"];
}

 //load some php array here
$array = array('success' => true, 'items' => array('item1','item2'));

echo json_encode($array);
?> 
```

`dataType`然后，您可以通过指定如下选项告诉 jQuery 返回类型是 JSON ：

```
$.ajax({
    url: "<?php echo $url; ?>/process/load.php",    
    type: "GET",        
    data: data,        
    cache: false,
    dataType: 'json',
    success: function (response) {                
      // response var is an object, same structure as the PHP array you encoded
      if(response.success){
        // handle success
      } else {
        alert('something went wrong');
      }
    }        
}); 
```

# sql - SQL - 从两个单独的数据集中选择并与同一个用户关联？一个查询中的多个 select/from 语句？

> ID：15747918
> 
> 赞同：0
> 
> 时间：2013-04-01T17:07:30.593
> 
> 标签：sql

我的报告有一个问题，即每个用户花费的时间和总票数。

问题在于“TotalTickets”子查询。我必须运行一个子查询，因为为了获得 TotalTickets，我必须从一个单独的数据集中提取：

```
"FROM tickets JOIN users" 
```

为了得到 ticket.time_spent 我还必须从一个单独的数据集中提取：

`"FROM tickets LEFT OUTER JOIN ticket_work ON ticket_work.ticket_id = tickets.id JOIN users"`

我可以编写两个完全独立的 SQL 报告，但我想将它们合并到同一个报告中，这就是我采用这种方法的原因。这是我所拥有的：

* * *

```
select users, tickets.time_spent, (select count(tickets.id) FROM tickets 
JOIN users where tickets.assigned_to = users.id) as TotalTickets
FROM tickets LEFT OUTER JOIN ticket_work ON ticket_work.ticket_id = tickets.id 
JOIN users where tickets.assigned_to = users.id 
```

* * *

问题在于它不会将 TotalTickets 计数与用户（选择用户）相关联。不过，tickets.time_spent 列工作正常。

任何帮助，将不胜感激！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:35:18.200

尝试以下方式（完全未经测试）：

```
SELECT users, tickets.time_spent, 
       (SELECT count(tickets.id) FROM tickets 
        WHERE tickets.assigned_to = users.id) as TotalTickets
FROM tickets LEFT OUTER JOIN ticket_work ON ticket_work.ticket_id = tickets.id 
JOIN users where tickets.assigned_to = users.id 
```

如果您实际上的意思是别的，那么请澄清手头的任务和您面临的问题。

# javascript - Javascript：在 eval 中创建的返回值

> ID：15747921
> 
> 赞同：1
> 
> 时间：2013-04-01T17:07:39.677
> 
> 标签：javascript, node.js, callback, eval

我想做这样的事情：

```
function end(){ console.log(this); } // <-- the problem is here with `this`
eval('var a = 0; setTimeout(function(){ a = 10; end(); }, 2000)'); 
```

2秒后应该输出：

```
{ "a" : 10 } 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:09:15.357

是的：

```
function end(){ console.log(this); }
eval('var a = 0, self = this; setTimeout(function(){ a = 10; end.call(self); }, 2000)'); 
```

请注意，我将变量 , 设置`self`为`this`，然后[`Function#call`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.4)在调用时使用`end`，这允许我们在调用期间设置特定值`this`。这是有效的，因为传递给的匿名函数`setTimeout`具有对创建它的执行上下文以及其中的所有变量的引用，因此可以访问`self`(and `a`)。

如果没有一个**很好**的使用理由`eval`（而且我在这里没有看到），我不会这样做：

```
function end(){ console.log(this); }
var a = 0, self = this; setTimeout(function(){ a = 10; end.call(self); }, 2000); 
```

您还可以创建第二个函数，该函数在调用时会转身并`end`以正确的`this`值调用。这称为*绑定*，由 ES5[`Function#bind`函数](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)促进：

```
function end(){ console.log(this); }
var a = 0, boundEnd = end.bind(this); setTimeout(function(){ a = 10; boundEnd(); }, 2000); 
```

由于您使用的是 NodeJS，因此您使用的是 V8，它具有`Function#bind`. `bind`（如果您在浏览器中执行此操作，如果您需要支持旧版浏览器，则必须小心提供 shim 。）

# java - 在选择行之前在 JTable 中执行操作

> ID：15747932
> 
> 赞同：2
> 
> 时间：2013-04-01T17:08:27.297
> 
> 标签：java, swing, jtable

大家！

在我的应用程序中，我需要创建一个被动 JTable。被动是指行的选择不是由 JTable 直接完成的，而是在另一个组件请求时完成的。因此，当用户转到新行时，表格不会立即做出反应，而是首先要求数据集根据所需的新行更新其内部状态，然后数据集回调表格以进行实际选择。所以我只是想在表格中选择新行之前执行一个操作。

我为您创建了一个小原型，让您了解我想要什么。在原型下方，您会找到我的问题。

```
import java.awt.BorderLayout;
import java.awt.Dimension;

import javax.swing.DefaultListSelectionModel;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.AbstractTableModel;

public class SSCCE extends JPanel
{
    public SSCCE()
    {
        setLayout(new BorderLayout());

        final JLabel selectedRow = new JLabel();

        final Table table = new Table();
        table.getSelectionModel().addListSelectionListener(
            new ListSelectionListener()
            {
                @Override
                public void valueChanged(ListSelectionEvent e)
                {
                    if (!e.getValueIsAdjusting())
                    {
                        selectedRow.setText(
                            "Selected row: " + table.getSelectedRow());
                    }
                }
            }
        );

        new DataSet(table);

        add(new JScrollPane(table), BorderLayout.CENTER);
        add(selectedRow, BorderLayout.PAGE_END);
    }

    private static void createAndShowGUI()
    {
        JFrame frame = new JFrame("Table Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new SSCCE());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(
            new Runnable()
            {
                @Override
                public void run()
                {
                    createAndShowGUI();
                }
            }
        );
    }
}

class DataSet
{
    private final Table _table;
    private int _currentIndex;

    DataSet(Table table)
    {
        _table = table;
        _table.setDataSet(this);
    }

    int getCurrentIndex()
    {
        return _currentIndex;
    }

    void moveTo(int index) throws MovementException
    {
        if (index < 0 || index > 4)
        {
            throw new IndexOutOfBoundsException();
        }
        // Let's suppose there was a problem moving to the 2nd index. Maybe
        // the data set was in edit mode and couldn't persist the changes
        // because of a validation error.
        if (index == 2)
        {
            throw new MovementException();
        }
        _currentIndex = index;
        // Notifies the table that the data was moved so that the table can
        // update its selection model based on the current index of the
        // data set.
        _table.dataMoved();
    }
}

class MovementException extends RuntimeException
{
}

class Table extends JTable
{
    private DataSet _dataSet;
    // When true signals that the data was moved in the data set, so selection
    // is allowed.
    private boolean _dataMoved;
    // Previous selected column.
    private int _oldSelectedColumn;

    Table()
    {
        super(new Model());

        setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        setCellSelectionEnabled(true);
        getTableHeader().setReorderingAllowed(false);
        setPreferredScrollableViewportSize(new Dimension(500, 170));

        getColumnModel().setSelectionModel(new ColumnSelectionModel());
    }

    void setDataSet(DataSet dataSet)
    {
        _dataSet = dataSet;
    }

    // Called by DataSet#moveTo.
    void dataMoved()
    {
        _dataMoved = true;
        try
        {
            int rowIndex = _dataSet.getCurrentIndex();
            // Select the new row.
            setRowSelectionInterval(rowIndex, rowIndex);
        }
        finally
        {
            _dataMoved = false;
        }
    }

    @Override
    protected ListSelectionModel createDefaultSelectionModel()
    {
        return new RowSelectionModel();
    }

    private class ColumnSelectionModel extends DefaultListSelectionModel
    {
        @Override
        public void setSelectionInterval(int index0, int index1)
        {
            // Save the old selected column to be restored in
            // RowSelectionModel#setSelectionInterval in case of an error.
            _oldSelectedColumn = getSelectedColumn();
            super.setSelectionInterval(index0, index1);
        }
    }

    private class RowSelectionModel extends DefaultListSelectionModel
    {
        @Override
        public void setSelectionInterval(int index0, int index1)
        {
            if (_dataMoved || index1 == _dataSet.getCurrentIndex())
            {
                super.setSelectionInterval(index0, index1);
            }
            else
            {
                try
                {
                    _dataSet.moveTo(index1);
                }
                catch (MovementException ex)
                {
                    // There was a problem in the data set. Restore the old
                    // selected column.
                    setColumnSelectionInterval(
                    _oldSelectedColumn, _oldSelectedColumn);
                    throw ex;
                }
            }
        }
    }

    private static class Model extends AbstractTableModel
    {
        private String[] columnNames =
            {"First Name", "Last Name", "Sport", "# of Years", "Vegetarian"};
        private Object[][] data = {
            {"Kathy", "Smith", "Snowboarding", 5, false},
            {"John", "Doe", "Rowing", 3, true},
            {"Sue", "Black", "Knitting", 2, false},
            {"Jane", "White", "Speed reading", 20, true},
            {"Joe", "Brown", "Pool", 10, false}
        };

        public int getColumnCount()
        {
            return columnNames.length;
        }

        public int getRowCount()
        {
            return data.length;
        }

        public String getColumnName(int col)
        {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col)
        {
            return data[row][col];
        }

        public Class<?> getColumnClass(int c)
        {
            return getValueAt(0, c).getClass();
        }

        public void setValueAt(Object value, int row, int col)
        {
            data[row][col] = value;
            fireTableCellUpdated(row, col);
        }
    }
} 
```

*   你觉得这个设计有什么缺陷吗？
*   我是否需要重写*ColumnSelectionModel*和*RowSelectionModel*类中的更多方法来强制合同，还是只需要*setSelectionInterval*方法就足够了？到目前为止，我还没有发现这方面的任何缺陷。
*   拥有*ColumnSelectionModel*类真的让我很恼火。它的目的只是在选择新列之前捕获旧的选定列，以便在出现问题时可以在*RowSelectionModel#setSelectionInterval*中恢复它。我不能只使用*RowSelectionModel*类来做到这一点。还有其他方法吗？

还有另一种不使用选择模型的方法。你可以这样做：

注释`getColumnModel().setSelectionModel(new ColumnSelectionModel());`表构造函数中的行。

注释方法*Table#createDefaultSelectionModel*方法。

将*Table#dataMoved*方法替换为：

```
void dataMoved()
{
    _dataMoved = true;
    try
    {
        int rowIndex = _dataSet.getCurrentIndex();
        changeSelection(rowIndex, getSelectedColumn(), false, false);
    }
    finally
    {
        _dataMoved = false;
    }
} 
```

覆盖*Table#changeSelection*方法：

```
@Override
public void changeSelection(int rowIndex, int columnIndex, boolean toggle, boolean extend)
{
    if (_dataMoved)
    {
        super.changeSelection(rowIndex, columnIndex, toggle, extend);
    }
    else
    {
        if (rowIndex != _dataSet.getCurrentIndex())
        {
            _dataSet.moveTo(rowIndex);
        }
        super.changeSelection(_dataSet.getCurrentIndex(), columnIndex, toggle, extend);
    }
} 
```

但是我没有使用这种方法，尽管它比选择模型简单得多，因为*changeSelection*方法的文档说：

> UI 接收到的键盘或鼠标事件导致的选择的大多数更改都是通过此方法引导的，因此该行为可以被子类覆盖。

所以我解释了

> 大多数变化

由于并非所有更改，这意味着可能会有一些选择更改未通过此方法。我是对的还是我可以相信*changeSelection*方法？

先感谢您。

马科斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:04:09.840

您的方法的主要缺陷是您的（导航）模型（又名：DataSet）和视图之间的硬连线双向耦合。出路类似于 VetoableSelectionModel：然后您可以将 DataSet 注册为 vetoablePropertyChangeListener 到选择模型，这是松散耦合，可以在不对表进行子类化的情况下进行配置。

整体布线的一些代码片段：

```
final JTable table = new JTable(new Model());
VetoableListSelectionModel selectionModel = new VetoableListSelectionModel();
table.setSelectionModel(selectionModel);
VetoableChangeListener veto = new VetoableChangeListener() {

    @Override
    public void vetoableChange(PropertyChangeEvent evt)
            throws PropertyVetoException {
        if (2 == (Integer) evt.getNewValue()) throw new PropertyVetoException("", evt);
    }
};
selectionModel.addVetoableChangeListener(veto);
table.getSelectionModel().addListSelectionListener(
    new ListSelectionListener()
    {
        @Override
        public void valueChanged(ListSelectionEvent e)
        {
            if (!e.getValueIsAdjusting())
            {
                selectedRow.setText(
                    "Selected row: " + table.getSelectedRow());
            }
        }
    }
); 
```

骨架选择模型（完整代码在[swingx 孵化器](http://java.net/projects/jdnc-incubator/sources/svn/show/trunk/src/kleopatra/java/org/jdesktop/beansbindingx?rev=3383)中- 注意：未维护！）

```
/**
 * Quick impl of a list selection model which respects a veto before
 * changing selection state. The veto is effect in SINGLE_SELECTION mode
 * only.
 */
public class VetoableListSelectionModel extends DefaultListSelectionModel {
    private VetoableChangeSupport vetoableChangeSupport;

    /**
     * Defaults to SINGLE_SELECTION mode.
     *
     */
    public VetoableListSelectionModel() {
        super();
        setSelectionMode(SINGLE_SELECTION);
    }

    @Override
    public void setSelectionInterval(int index0, int index1) {
        if (isVetoable()) {
            try {
                fireVetoableChange(getMinSelectionIndex(), index0);
            } catch (PropertyVetoException e) {
                // vetoed - do nothing
                return;
            }
        }
        super.setSelectionInterval(index0, index1);
    }

    // similar for all methods that change the selection
    ...

    // methods to add/remove listeners and fire the event
    ...
} 
```

# amazon-s3 - S3fox 的 Amazon S3 问题

> ID：15747933
> 
> 赞同：2
> 
> 时间：2013-04-01T17:08:31.227
> 
> 标签：amazon-s3

我创建了一个 Amazon S3 帐户并尝试使用 S3fox 插件上传一些文件。我添加了 S3fox 并使用我的 accesskey 和安全 id 凭据登录。

现在，我通过右键单击并选择创建目录创建了一个存储桶，并选择了将存储桶放入欧洲的选项。现在，当我尝试深入了解我的文件夹时，我不断收到一条错误消息，上面写着“连接错误！-临时重定向”。而且我也无法传输任何文件。

但是，如果我在没有选择将其放入欧洲的选项的情况下创建存储桶，那么我可以深入挖掘存储桶。

我希望我的桶在欧洲，因为我来自英国。请建议我缺少什么，我该如何解决这个问题？

谢谢斯里坎特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:10:50.087

我有同样的问题 - 一个小时后它仍然无法工作。为了节省等待，我安装了 Cloudberry（Windows 的免费软件），无论如何这似乎是一个更好的选择（它看起来更用户友好并且有更多选择）：[http ://www.cloudberrylab.com/free-amazon-s3 -explorer-cloudfront-IAM.aspx](http://www.cloudberrylab.com/free-amazon-s3-explorer-cloudfront-IAM.aspx)

# delphi - 在两个单独的 Win32 进程中使用模式对话框将程序 UI 嵌入到另一个程序中

> ID：15747935
> 
> 赞同：3
> 
> 时间：2013-04-01T17:08:48.657
> 
> 标签：delphi

我需要将辅助应用程序的用户界面 (UI) 嵌入到主应用程序中。我可以使用 SetParent 轻松地将辅助应用程序主窗体托管到主应用程序中。我正在使用命名管道在两个应用程序之间进行通信。借助主应用程序中的虚拟 TEdit，我什至可以在辅助应用程序中使用 AttachThreadInput API 解决选项卡问题。到现在为止还挺好。

我无法解决以下问题：辅助应用程序中的任何模式形式都不会被视为主要应用程序的模式，这会造成很大的麻烦。

顺便说一句：不要告诉我使用 DLL、OCX 或 ActiveX。我有两个普通的 exe 文件。

任何帮助/提示表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T17:27:57.600

模态形式的工作方式如下：

1.  当显示模态表单时，它会禁用其[所有者 window](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#owned_windows)。
2.  这具有使与所有者的交互变得不可能的效果。
3.  当模态窗口关闭时，它会重新启用所有者。

但是在您的场景中，辅助应用程序中的模态窗口不会禁用主应用程序中的窗口。因此，要解决您的问题，您需要确保您的辅助应用程序可以访问主应用程序并在显示模式表单时禁用相应的窗口。

模态是一个有点棘手的领域。各种不良后果很容易出错。至少需要 10 个版本的 VCL 才能使模式和窗口所有者的处理接近正确！Raymond Chen 写了一篇非常严肃的关于模态的文章，我相信你会发现它们很有用：

*   [模态，第 1 部分：UI 模态与代码模态](http://blogs.msdn.com/b/oldnewthing/archive/2005/02/18/376080.aspx)
*   [模态，第 2 部分：代码模态与 UI 模态](http://blogs.msdn.com/b/oldnewthing/archive/2005/02/21/377337.aspx)
*   [模态，第 3 部分：WM_QUIT 消息](http://blogs.msdn.com/b/oldnewthing/archive/2005/02/22/378018.aspx)
*   [模态，第 4 部分：为模态 UI 设置正确所有者的重要性](http://blogs.msdn.com/b/oldnewthing/archive/2005/02/23/378866.aspx)
*   [模态，第 5 部分：为模态 UI 设置正确的所有者](http://blogs.msdn.com/b/oldnewthing/archive/2005/02/24/379635.aspx)
*   [模态，第 6 部分：与已进入模态的程序交互](http://blogs.msdn.com/b/oldnewthing/archive/2005/02/28/381591.aspx)
*   [模态，第 7 部分：定时消息框，廉价版](http://blogs.msdn.com/b/oldnewthing/archive/2005/03/01/382380.aspx)
*   [模态，第 8 部分：定时消息框，更好的版本](http://blogs.msdn.com/b/oldnewthing/archive/2005/03/04/385100.aspx)
*   [模态，第 9 部分：为模态 UI 设置正确的所有者，实践考试](http://blogs.msdn.com/b/oldnewthing/archive/2011/01/21/10118482.aspx)

# c# - 跨域 ajax POST 到 web-api 总是返回空响应

> ID：15747939
> 
> 赞同：2
> 
> 时间：2013-04-01T17:09:03.427
> 
> 标签：c#, asp.net-mvc, jquery, asp.net-web-api, cross-domain

我想将 HTML 表单发布到 web-api。

如果我在其他域中使用 jQuery 执行 ajax POST，一切正常，我收到 200 OK **，但**在萤火虫和响应选项卡中，我收到如下图所示的空白响应。这是我的 jQuery 代码：

```
var formData = new FormData($('form')[0]);
                var response = '';
                $.ajax({
                    url: 'http://localhost:2143/api/controller',
                    type: 'POST',
                    // Form data
                    data: formData,
                    //Options to tell JQuery not to process data or worry about content-type
                    cache: false,
                    contentType: false,
                    processData: false,
                    success : function(text)
                     {
                         response = text;
                         alert(response);
                     }
                }); 
```

请帮我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T08:39:20.930

由于[`same origin policy restriction`](http://en.wikipedia.org/wiki/Same_origin_policy)浏览器内置，不允许执行跨域 AJAX 调用。您有几个可能的解决方法：

1.  [`JSONP`](http://en.wikipedia.org/wiki/JSONP)- 这里的想法是您的服务器将 JSON 响应包装在回调中。这仅适用于 GET 请求，因此从我可以看到您尝试发送 POST 请求的情况来看，它可能不适合您的情况。您可以使用自定义`JsonpMediaTypeFormatter`，如 中所示[`this similar post`](https://stackoverflow.com/questions/9421312/jsonp-with-asp-net-web-api)。
2.  [`CORS`](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)- 服务器应该发送一个特殊的`Access-Control-Allow-Origin`响应 HTTP 标头。这里的缺点是旧浏览器可能不支持它。这是一个[`blog post`](http://brockallen.com/2012/06/28/cors-support-in-webapi-mvc-and-iis-with-thinktecture-identitymodel/)更详细的介绍。
3.  服务器端网桥。如果前两种技术由于它们施加的限制而对您不起作用，您可以在托管您的 javascript 的域上拥有一个服务器端脚本，该脚本将充当您的域和托管 API 的远程域之间的代理。在这种情况下，您会将 AJAX 请求发送到您自己的域，然后该域将调用远程 API 并将结果返回给客户端。

# android - 如何更改动作栏颜色？

> ID：15747943
> 
> 赞同：4
> 
> 时间：2013-04-01T17:09:12.083
> 
> 标签：android, android-layout, android-actionbar

如何更改 ActionBar 颜色？我已经实现了这一点，它可以工作，但不是我想要的。它仅在活动开始后更改颜色，因此在应用程序启动后立即显示原始栏颜色，仅一秒钟后我的自定义颜色被显示。有没有其他方法可以处理？提前致谢

```
....
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);  
    ActionBar actionBar;
    actionBar.setBackgroundDrawable(new ColorDrawable(Color.parseColor("#879f38")));
..... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-01T17:13:36.963

创建主题：

```
<style name="Theme.MyAppTheme" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/Theme.MyAppTheme.ActionBar</item>
</style>

<style name="Theme.MyAppTheme.ActionBar" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:background">#222222</item>
</style> 
```

# c# - jquery 对话框在回发时重新出现

> ID：15747945
> 
> 赞同：0
> 
> 时间：2013-04-01T17:09:17.770
> 
> 标签：c#, jquery

我有一个 GridView，其 TemplateField 包含一个 LinkBut​​ton。单击此按钮时，它会将另一个隐藏的 TemplateField 中的一些 XML 转换为字符串，并将其分配给隐藏 div 中的标签，以便在模式对话框中使用。目前，对话框会按预期打开并显示正确的信息，它会关闭，我可以在网格中选择另一条记录来查看没有问题。这是出错的地方，我无法找到解决方案。如果我在导致回发的页面上执行其他操作，最后打开的对话框将在新页面加载时打开。

这是我的相关标记：

```
 <script type="text/javascript">
$(document).ready(function() {
    $("#txtBeginDate").datepicker();
    $("#txtEndDate").datepicker();

    $("#response").dialog({
        autoOpen: false,
        modal: true,
        height: "auto",
        width: "auto",
        title: "Equifax Response",
        close: function(ev, ui) {
            $(this).dialog('destroy').remove();
        }
    });

    $("[id*=lnkEquifaxResponse]").on("click", function EquifaxResopnse() {
        $("#lblDialog").empty();
    });

    if ($("#lblDialog").text() != "") {
        $("#response").dialog("open");
    }
});
    </script>

    <div id="response" visible="false">
        <asp:Label ID="lblDialog" runat="server" ></asp:Label>
    </div>

    <div id="Gridview">
        <asp:GridView ID="grClientTransactions" runat="server" AllowPaging="True" 
            PageSize="25" AutoGenerateColumns="False" DataKeyNames="ResponseXML"
            EmptyDataText="Record not found." EmptyDataRowStyle-BackColor="#CCCCCC" EmptyDataRowStyle-Font-Bold="true"
            CssClass="mGrid" PagerStyle-CssClass="pgr" 
            AlternatingRowStyle-CssClass="alt" 
            OnPageIndexChanging="grClientTransactions_PageIndexChanging" 
            onrowcommand="grClientTransactions_RowCommand">

            <Columns>
                <asp:TemplateField ShowHeader="false">
                    <ItemTemplate>
                        <asp:LinkButton ID="lnkEquifaxResponse" runat="server" CommandName="EquifaxResponse" Text="View" CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>'></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField Visible="false" HeaderText="Equifax Response">
                    <ItemTemplate>
                        <asp:Label ID="lblEquifaxResponse" runat="server" Text='<%# Bind("ResponseXML")%>' ></asp:Label></div>                            
                    </ItemTemplate>
                </asp:TemplateField>

            </Columns>
            <PagerStyle CssClass="pgr" />
            <AlternatingRowStyle CssClass="alt" />
        </asp:GridView>
    </div> 
```

我是编程新手，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:20:09.130

像这样更新您的代码：

```
 <div id="response" visible="false">
    <asp:Label ID="lblDialog" runat="server" EnableViewState="False"></asp:Label>
 </div> 
```

据我了解，当您单击链接时，lblDialog 会填充服务器上的一些数据，并且由于启用了视图状态，因此在每次回发时都会恢复数据。比，`if`如下所示返回 true 并出现弹出窗口。

```
if ($("#lblDialog").text() != "") {
    $("#response").dialog("open");
} 
```

如果添加 enableviewstate="false"，则 lblDialog 的内部文本将在第二次回发时丢失，并且在页面加载后 lable 将为空（如果未单击网格中的链接）。

您可以[在此处获取有关视图状态及其工作原理的更多信息](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# javascript - 在 JavaScript 中为匿名函数放置参数

> ID：15747953
> 
> 赞同：3
> 
> 时间：2013-04-01T17:09:50.137
> 
> 标签：javascript, function, anonymous-function, anonymous

当我像这样在 JavaScript 中创建匿名函数时：

```
(function(){
/* some code here */
})() 
```

该函数将添加到哪个对象中，该函数将存在于何处？

您还可以在 jQuery 源代码中看到这样的匿名函数：

```
(function(window, undefined){
    /* some code here */
    })(window) 
```

这个函数的参数如何将它与匿名的 0-arg 函数区分开来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:14:36.477

JavaScript 中的函数是*值*。也就是说，函数由对象表示，并且与任何其他对象一样，它可以是变量的值或参与表达式。

因此

```
(function() { ... }) 
```

是一个值，就像`17`or`"hello world"`是一个值一样。

当一个函数（作为一个值）出现在一个表达式中，并且它后面是`(...)`一个括号之间以逗号分隔的表达式列表时，这就是一个函数调用。

好的，所以：

```
(function() { ... })() 
```

创建一个函数（作为一个值），然后不带参数调用该函数。函数对象，至少作为该代码的直接结果，不存储在任何地方。它在函数调用完成后基本上消失了，并且该子表达式的整体值将是函数返回的任何值。

将参数传递给这样的函数与将参数传递给任何其他函数没有什么不同。在您引用的具体示例中，目的是防止由错误的“外星人”代码引起的某些异常。你的例子真的应该是：

```
(function(window, undefined) {
  // code
})(this); 
```

该符号`this`是保留字，其值完全受运行时控制。（好吧，它在本地执行上下文中的值因此受到控制。）在全局范围内评估时，上面的代码确保*在*匿名函数内部，符号“窗口”将是对全局上下文的引用。这种结构对于可能在浏览器以外的上下文中使用的代码也很有用，例如 Node.js，其中全局上下文不称为“窗口”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:19:11.440

根据[维基百科定义](http://en.wikipedia.org/wiki/Anonymous_function)的第一行，您给出的两个示例都是匿名函数：

> 匿名函数 [...] 是定义的函数（或子例程），并且可能被调用，但未绑定到标识符

这些论点对匿名性没有影响。匿名函数可以接受 0, 1, 2, ... n 个参数，就像非匿名函数（即命名函数）一样。

匿名函数的一个主要优点是它们不必存在于任何地方——它们可以内联定义和使用，就像其他类型的其他值一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:20:44.500

添加到@Pointy 的答案中，将参数添加到匿名函数没有任何区别

```
(function(){
  /* some code here */
})()

(function(window,undefined){
  /* some code here */
})(window) 
```

这两个函数在调用后都丢失了，唯一的区别是在第二个函数内部，一些变量或函数存储在窗口上下文中，但匿名函数本身在调用后丢失了。

如果您需要保留对函数的引用，请尝试

```
(window.myFunc = function(arg1, arg2, arg3) {
   /* your code here*/
})(arg1, arg2, arg3) 
```

# vhdl - 如何在 VHDL 中的同一进程中使用多个延迟计数器

> ID：15747962
> 
> 赞同：0
> 
> 时间：2013-04-01T17:10:24.373
> 
> 标签：vhdl

需要实现多个延迟计数器用于跟随等待时钟周期，可综合。

```
 if(clk'event and clk='1')then           
           if (StartTX = 1)then
                    TxBusy <= '1';
                    StartTxp <= '1';
                    Wait for 1 clock cycles;
                    StartTxp <= '0';
           End IF;

           IF (StartTX = 1)then
                    Wait x clock cycles  ;
                    StartTxM <= '1';
                    Wait 1 clock cycles;
                    StartTxM<= '0';
           End IF ;  

           IF (StartCal = 1) AND (StartInut =1 ) AND (IValid = 1)then
                    Wait 78 ns   ;
                   Interrupt <= '1'   ;  
                    Wait 1 clock cycle
                    Interrupt = 0
           End IF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:25:33.880

重写为三个独立的状态机。如果必须，这些可以组合成一个过程，但每个过程一个过程可能更简单、更清晰。

使用计数器“等待 X 个周期”：当您看到 StartTX 时，将其加载为处于空闲状态的 X；在等待状态时递减它，当它达到 0 时转换回空闲状态。

将 78ns 转换为第三个状态机的适当周期数，并以与第二个相同的方式实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:20:02.840

您可以对控制信号的状态变化事件做出反应作为起点。例子：

```
if(clk'event and clk='1')then 
      StartTx_Last<=StartTx; -- 1 clock cycle delayed copy of control signal
      StartTxp <= '0'; -- default value

       if (StartTX = 1 AND StartTx_Last=0) then -- activate signals only for one clock
                TxBusy <= '1';
                StartTxp <= '1';
                DelayCounter <= X; -- start delay counter
       End IF;

       -- set StartTxM after X clocks for 1 cycle
       case DelayCounter is
       when 1 => -- activity state
          StartTxM <= '1';
          DelayCounter<=0;
       when 0 => -- idle state
           StartTxM <='0';
       when others => -- delay states
          DelayCounter<=DelayCounter - 1;
       end case;
       .... 
```

对于 78ns 延迟，您需要一个周期为 t 的时钟和一个 n 计数器，其中 n*t=78ns

# mysql - MySQL 按期间从 Orders 中计算不同的客户

> ID：15747967
> 
> 赞同：0
> 
> 时间：2013-04-01T17:10:51.453
> 
> 标签：mysql, date, count, group-by, distinct

我有这个东西

```
mysql> explain Order;
+------------------------+-------------------+------+-----+-----------+----------------+
| Field                  | Type              | Null | Key | Default   | Extra          |
+------------------------+-------------------+------+-----+-----------+----------------+
| id                     | int(11) unsigned  | NO   | PRI | NULL      | auto_increment |
| date                   | timestamp         | NO   |     | NULL      |                |
| customer               | int(11) unsigned  | NO   |     | NULL      |                |
| address                | int(11) unsigned  | NO   |     | NULL      |                |
+------------------------+-------------------+------+-----+-----------+----------------+ 
```

我需要在一年中逐月统计所有活跃客户，例如：

```
SELECT 
  DATE_FORMAT(`date`,'%m/%Y') as period,
  COUNT(DISTINCT(customer)) as total

FROM
  Order

WHERE
  YEAR(`date`) = '2012'

GROUP BY
  period 
```

但是带有 DISTINCT 的 GROUP BY 效果不佳，并且此 SQL 在同一时期返回了很多结果

**@edit**会导致这个

```
07/2012 1
07/2012 1
06/2012 1
09/2012 1
12/2012 769
06/2012 1
07/2012 1
07/2012 1
06/2012 1
06/2012 1
10/2012 1
... a lot of results with 1 as total 
```

我期待这个

```
01/2012 329
02/2012 279
03/2012 229
04/2012 379
05/2012 411
06/2012 152
07/2012 277
08/2012 411
09/2012 468
10/2012 501
11/2012 488
12/2012 593 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:38:03.167

如果日期是日期时间或时间戳，您当前的查询应该可以工作：

```
SELECT DATE_FORMAT(`date`,'%m/%Y') as period,
  COUNT(distinct customer) as total
FROM Orders
WHERE YEAR(`date`) = 2012
GROUP BY period 
```

看[演示](http://sqlfiddle.com/#!2/ee519/2)

# html - 带有子菜单的导航菜单未保持突出显示

> ID：15747969
> 
> 赞同：0
> 
> 时间：2013-04-01T17:10:58.107
> 
> 标签：html, css

我的导航菜单有这个 CSS 和 HTML 代码，当您将鼠标悬停在其中一个主要链接上时，您可以看到它变为橙色。但是当您浏览子菜单上的链接时，橙色消失了。

当您进入子菜单链接时，如何保留它以使其保持橙色？

```
<ul id="trans-nav">
<li>
<a href="#">About Us</a>
<ul>
<li><a href="/contact">Contact Us</a></li>
<li><a href="/login">Login</a></li>
</ul>
</li>

#trans-nav {
    list-style-type: none; 
    height: 40px; 
    padding: 0; 
    margin: 0;
    position:relative;
    z-index:999;
}
#trans-nav {
    list-style-type: none; 
    height: 40px; 
    padding: 0; 
    margin: 0;
}
#trans-nav li {
    float: left; 
    position: relative; 
    padding: 0; 
    line-height: 40px;
}
#trans-nav li:hover {
    background-position: 0 -40px;
}
#trans-nav li a {
    display: block; 
    padding: 0 15px; 
    color: #666666; 
    text-decoration: none;
}
#trans-nav li a:hover {
    background-color:#F36F25; 
    color: #eeeeee;
}
#trans-nav li ul {
    opacity: 0;
    position: absolute;
    left: 0;
    width: 200px;
    background: #EEEEEE;
    list-style-type: none;
    padding: 0;
    margin: 0; 
}
#trans-nav li:hover ul {
    opacity: 1; 
}
#trans-nav li ul li {
    float: none; 
    position: static; 
    height: 0; 
    line-height: 0; 
    background: none;
}
#trans-nav li:hover ul li {
    height: 30px;
    line-height: 30px;
}
#trans-nav li ul li a {
    background: #EEEEEE;
}
#trans-nav li ul li a:hover {
    background: #666666;
    color:#EEEEEE;
}

#trans-nav li { -webkit-transition: all 0.2s; }
#trans-nav li a { -webkit-transition: all 0.5s; }
#trans-nav li ul { -webkit-transition: all 1s; }
#trans-nav li ul li { -webkit-transition: height 0.5s; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:18:10.037

尝试这个：

[http://jsfiddle.net/wjy74/](http://jsfiddle.net/wjy74/)

```
#trans-nav:hover {
 background-color:#F36F25; 
 color: #eeeeee;
 width: 89px;    
} 
```

# c# - 通过下拉列表更改文本框c#

> ID：15747970
> 
> 赞同：0
> 
> 时间：2013-04-01T17:11:04.933
> 
> 标签：c#, asp.net

要求：根据下拉列表的选择，用不同的句子填写文本框。但是当我选择 ddlist 的一个“x”值时，文本框必须显示为空，并且用户必须写一些东西。

我的问题是即使我写了一些东西......当我保存表单时......我制作的一个控件说我“你的文本框不能为空”

这里有一些代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
    if (!Page.IsPostBack)
    {
        getPermissions();
        setBeginingdata();
    //in the setBeginingdata() method, the setTxtObs() is called too.
    }
    setTxtObs();

     void setTxtObs()
      {

    if (ddmotivo.SelectedItem.Text.Contains("Others"))
        txtObservacoes.Text = ""; 

    else if (!ddmotivo.SelectedItem.Text.Contains("Others"))
    {
        StringBuilder sbObs = new StringBuilder();
        sbObs.AppendFormat("The employer {0} missed because ({1})", getDrUser( ["Sigla"].ToString(), ddmotivo.SelectedItem.ToString().Trim());
        txtObs.Text = sbObs.ToString();

    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:16:37.663

每当您想要一个组合框中的空项目时，您可以在数据绑定后添加一个。

所以要遵循的步骤是：

*   创建/检索数据源
*   将数据源绑定到组合框
*   执行 ComboBox.Items.Insert(0, string.Empty) （或类似“请选择”的字符串）

[http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/4d4462ba-f4d7-4f1d-8747-8fe63272a7f4/](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/4d4462ba-f4d7-4f1d-8747-8fe63272a7f4/)

# java - 使用 LWJGL/Slick2d 小程序加载图像/声音

> ID：15747976
> 
> 赞同：0
> 
> 时间：2013-04-01T17:11:20.543
> 
> 标签：java, applet, embedded-resource, lwjgl, noclassdeffounderror

当我尝试在 Applet 上加载图像或声音时遇到问题。我使用 LWJGL for applet 和 Slick2d 来加载图像/声音。但是当我用 Netbeans 启动小程序时，没有问题......我用来加载声音的代码：

```
public class Files {
    public static Audio sound;

    public static void load() {
        try {
            sound = AudioLoader.getAudio("WAV", ResourceLoader.getResourceAsStream("/snd/Tir1-16b.wav"));
        } catch (IOException ex) {
            Logger.getLogger(Files.class.getName()).log(Level.SEVERE, null, ex);
        }

        System.out.println("loaded with success !");
    }
} 
```

还有 HTML 页面：

```
<applet code="org.lwjgl.util.applet.AppletLoader" archive="lwjgl_util_applet.jar" codebase="." width="800" height="600">

    <!-- The following tags are mandatory -->

    <!-- Name of Applet, will be used as name of directory it is saved in, and will uniquely identify it in cache -->
    <param name="al_title" value="appletloadertest">

    <!-- Main Applet Class -->
    <param name="al_main" value="myapps.MyApps">

    <!-- List of Jars to add to classpath -->
    <param name="al_jars" value="lwjgl_applet.jar, lwjgl.jar, jinput.jar, lwjgl_util.jar MyApps.jar">

    <!-- signed windows natives jar in a jar --> 
    <param name="al_windows" value="windows_natives.jar">

    <!-- signed linux natives jar in a jar --> 
    <param name="al_linux" value="linux_natives.jar">

    <!-- signed mac osx natives jar in a jar --> 
    <param name="al_mac" value="macosx_natives.jar">

    <!-- signed solaris natives jar in a jar --> 
    <param name="al_solaris" value="solaris_natives.jar">

    <!-- Tags under here are optional -->

    <!-- whether to use cache - defaults to true -->
    <!-- <param name="al_cache" value="true"> -->

    <!-- Version of Applet (case insensitive String), applet files not redownloaded if same version already in cache -->
    <!-- <param name="al_version" value="0.1"> -->

    <!-- Specify the minimum JRE version required by your applet, defaults to "1.5" -->
    <!-- <param name="al_min_jre" value="1.6"> -->

    <!-- background color to paint with, defaults to white -->
    <!-- <param name="boxbgcolor" value="#000000"> -->

    <!-- foreground color to paint with, defaults to black -->
    <!-- <param name="boxfgcolor" value="#ffffff"> -->

    <!-- logo to paint while loading, will be centered, defaults to "appletlogo.gif" -->
    <!-- <param name="al_logo" value="appletlogo.gif"> -->

    <!-- progressbar to paint while loading. Will be painted on top of logo, width clipped to percentage done, defaults to "appletprogress.gif" -->
    <!-- <param name="al_progressbar" value="appletprogress.gif"> -->

    <!-- whether to run in debug mode -->
    <!-- <param name="al_debug" value="true"> -->

    <!-- whether to prepend host to cache path - defaults to true -->
    <!-- <param name="al_prepend_host" value="true"> -->

    <param name="separate_jvm" value="true">
  </applet> 
```

当我使用小程序启动 HTML 页面时，控制台日志会显示以下内容：

```
null
java.lang.reflect.InvocationTargetException
    at java.awt.EventQueue.invokeAndWait(Unknown Source)
    at java.awt.EventQueue.invokeAndWait(Unknown Source)
    at org.lwjgl.util.applet.AppletLoader.run(AppletLoader.java:906)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: org/newdawn/slick/util/ResourceLoader
    at myapps.Files.load(Files.java:24)
    at myapps.MyApps.init(MyApps.java:32)
    at org.lwjgl.util.applet.AppletLoader.switchApplet(AppletLoader.java:1330)
    at org.lwjgl.util.applet.AppletLoader$2.run(AppletLoader.java:909)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.newdawn.slick.util.ResourceLoader
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 18 more 
```

null 当然意味着变量 Audio 为空。这也意味着可能找不到该文件...所以我尝试将目录“snd”和“sprites”放在小程序目录以及小程序的 .jar 上，但没有任何反应...

任何人都可以帮助我吗？我搜索了很多时间试图在许多论坛上找到这种问题，但没有人帮助我......

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:51:35.933

感谢您的回答。我`NoClassDefFoundError`通过在我的 html 页面中添加“slick.jar”来解决问题，如下所示：

```
<param name="al_jars" value="MyApps.jar lwjgl_applet.jar, lwjgl.jar, jinput.jar, lwjgl_util.jar slick.jar"> 
```

但现在我有另一个问题：

```
This occurred while 'Initializing real applet'
access denied ("java.io.FilePermission" ".\snd\Tir1-16b.wav" "read")
java.security.AccessControlException: access denied ("java.io.FilePermission" ".\snd\Tir1-16b.wav" "read")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkRead(Unknown Source)
    at java.io.File.exists(Unknown Source)
    at org.newdawn.slick.util.FileSystemLocation.getResourceAsStream(FileSystemLocation.java:52)
    at org.newdawn.slick.util.ResourceLoader.getResourceAsStream(ResourceLoader.java:61)
    at myapps.Files.load(Files.java:24)
    at myapps.MyApps.init(MyApps.java:32)
    at org.lwjgl.util.applet.AppletLoader.switchApplet(AppletLoader.java:1330)
    at org.lwjgl.util.applet.AppletLoader$2.run(AppletLoader.java:909)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

我已经阅读了很多有关此问题的内容，并且尝试使用以下命令对 MyApps.jar 进行签名：

```
keytool -genkey -keyalg rsa -alias key
keytool -export -alias key -file cert.crt
jarsigner MyApps.jar key 
```

并且签名者已经工作了，因为现在我可以在 MyApps.jar 的 META-INF 上看到文件“KEY.RSA”和“KEY.SF”。但问题仍然在这里...

我需要一些帮助，我只是不明白这个问题......

谢谢 ！

# css - 为什么 z-index:99999999999; 禁用内联样式定义？

> ID：15747980
> 
> 赞同：1
> 
> 时间：2013-04-01T17:11:38.983
> 
> 标签：css, z-index, inline

根据：mozilla.org

css匹配的优先级如下：

*   通用选择器
*   类型选择器
*   类选择器
*   属性选择器
*   伪类
*   ID 选择器
*   内联样式

CSS 代码：

```
body div#redDiv.myClass{
    position:absolute;
    top:10px;
    left:10px;
    width:10px;
    height:10px;
    background-color:red;
    z-index:99999999999;
}
#blueDiv{
    position:absolute;
    top:15px;
    left:15px;
    width:10px;
    height:10px;
    background-color:blue;
} 
```

HTML：

```
<div id="blueDiv" style="z-index:99999999999;"></div>
<div id="redDiv" class="myClass" style="z-index:99999999998;"></div> 
```

所以给定 2 个 div，redDiv 和 blueDiv，其中：

*   redDiv 的 CSS 定义使用 body id 和类选择器的组合，z-index 属性设置为“99999999999”，但有一个内联定义，应该将其 CSS 覆盖为“99999999998”
*   blueDiv 将内联 css 设置为 "99999999999" 。

预期的行为应该是 redDiv 之上的 blueDiv 但相反的情况发生了，它几乎就像覆盖没有完成一样！但如果值较小，如“99”和“98”，blueDiv 高于 redDiv（[http://jsfiddle.net/9U2fU/1/](http://jsfiddle.net/9U2fU/1/)）。

谁能指出可能是什么问题？

我无法更改 redDiv 的原始 CSS，所以我需要通过添加内联样式定义来解决问题。

[错误覆盖的 JSFiddle 示例](http://jsfiddle.net/DTX4U/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:26:00.883

我将对此进行尝试并同意这些评论。您的数字大于 32 位整数，并且我确信最大 z-index（无论可能是什么）都小于该数字，并且可能是您的问题的原因，但我尚未对其进行测试。尝试将其减少到类似 ... 9 的内容，看看会发生什么。

# html - 选择第一个

> ID：15747984
> 
> 赞同：0
> 
> 时间：2013-04-01T17:11:52.470
> 
> 标签：html, css

我有以下代码：

```
<div class="wrapper">
    <div class="location info">
        <h3>Location</h3>
        <h3>should be no stlye</h3>
    </div>
    <div class="skills info">
        <h3>Skills</h3>
        <h3>should be no stlye</h3>
    </div>
</div> 
```

我正在尝试`h3`在信息类之后设置第一个元素的样式。我认为这应该可行，但它没有：

```
.info:first-child {
    color: color: rgb(200,50,50);
} 
```

为什么这不起作用？我应该如何设置 . 信息而不在 html 中添加额外的标记？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:13:49.183

你不远了，试试这个：

```
.info > h3:first-child {
    color: rgb(200,50,50);
} 
```

但我相信最好的方法是在第一个 h3 中添加一个有意义的类，而不是使用这样的东西——这将使将来阅读 CSS 和标记更加容易，并且可以防止编辑标记时出现意外行为。例如：

```
.info-title {
    /* your styles here */
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T17:14:44.137

你需要一个空间：

```
.info :first-child 
```

`first-child`伪元素描述元素本身，而不是元素的子元素。因此，如果没有空格，您将选择具有一类信息的元素，这些信息是其父级的第一个子级。

空格指定您正在寻找 的后代`.info`。由于您只是在寻找直接子元素，因此您应该使用子组合器 - `>`，并且可能还只指定 h3 元素：

```
.info > h3:first-child 
```

**编辑：**我只注意到选择器的问题。正如其他答案（[+1 to user1479606](https://stackoverflow.com/a/15748028/361684)）中提到的，您的样式定义中也有一个错字：`color: color: ...`应该是`color: ...`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:14:23.577

你的css不正确，你只需要指定`color`一次。您还需要对选择器进行更细微的更改：

```
.info > h3:first-child {
    color: rgb(200,50,50);
} 
```

演示：http: [//jsfiddle.net/WSZcS/](http://jsfiddle.net/WSZcS/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T17:14:53.760

> 我正在尝试在信息类之后设置第一个 h3 元素的样式。

```
.info > h3 {
    color: rgb(200,50,50);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-15T14:35:07.130

如果您的 h3 标签不是您可以使用的第一个子元素

```
.info > h3:first-of-type {
    color: rgb(200,50,50);
} 
```

# d3.js - d3中的嵌套圆圈

> ID：15747987
> 
> 赞同：4
> 
> 时间：2013-04-01T17:12:03.753
> 
> 标签：d3.js

使用 d3.js，我将如何修改以下[代码](http://jsfiddle.net/xmmqM/)以将半径为“inner_radius”的嵌套黄色填充圆添加到每个现有生成的圆中：

```
var circleData = [
    { "cx": 300, "cy": 100, "radius": 80, "inner_radius": 40}, 
     { "cx": 75, "cy": 85, "radius": 50, "inner_radius": 20}];

var svgContainer = d3.select("body").append("svg")
                                    .attr("width",500)
                                    .attr("height",500);

var circles = svgContainer.selectAll("circle")
                          .data(circleData)
                          .enter()
                          .append("circle");

var circleAttributes = circles
                       .attr("cx", function (d) { return d.cx; })
                       .attr("cy", function (d) { return d.cy; })
                       .attr("r", function (d) { return d.radius; })
                        .style("fill", function (d) { return "red"; }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:25:43.840

正如 imrane 在他的评论中所说，您将希望将圆圈组合在一个`g`svg 元素中。[您可以在此处](http://jsfiddle.net/xmmqM/2/)查看更新后的代码 以及下面的相关更改。

```
var circles = svgContainer.selectAll("g")
                          .data(circleData)
                          .enter()
                          .append("g");
// Add outer circle.
circles.append("circle")
       .attr("cx", function (d) { return d.cx; })
       .attr("cy", function (d) { return d.cy; })
       .attr("r", function (d) { return d.radius; })
       .style("fill", "red");
// Add inner circle.
circles.append("circle")
       .attr("cx", function (d) { return d.cx; })
       .attr("cy", function (d) { return d.cy; })
       .attr("r", function (d) { return d.inner_radius; })
       .style("fill", "yellow"); 
```

# php - PHP：正则表达式替换括号之间的部分文本（逗号）

> ID：15747993
> 
> 赞同：1
> 
> 时间：2013-04-01T17:12:12.480
> 
> 标签：php, regex, preg-replace

有人可以为我提供一个正则表达式，它将替换括号之间的部分文本吗？

示例：我有字符串

```
 123 (abc,def) 567 
```

我想结束

```
 123 (abc def) 567 
```

所以基本上我想替换括号之间的“，”字符。

在此先感谢，我似乎忘记了我对正则表达式的大部分了解。

罗伯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:16:07.080

这应该有效：

```
$s = '123 (abc,def) 567';

echo preg_replace('/(\([^)]*),([^)]*\))/', '$1 $2', $s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:16:58.057

有点干净，但很简单。

```
<?php
$string = '123 (abc,def) 567';

$string = preg_replace('!,!',' ',$string);

echo $string;

?> 
```

输出是：

```
123 (abc def) 567 
```

按照要求。

**更新**

为了平息投诉，另一个版本是：

```
$string = '123 (abc,def) 567';

$string = preg_replace('!([^,]+),(.+)!','$1 $2',$string);

echo $string; 
```

**另一个更新表明我们只删除括号之间的逗号**

```
$string = '123 (abc,def) 567';

$string = preg_replace('!(\([^,)]+),(.+\))!','$1 $2',$string);

echo $string; 
```

**并不是说这是最初的问题，要替换括号之间的所有逗号，您可以这样做**

```
$strings = array('123 (abc,def) 567','(),(zefzef)','(,abc)','(def,hij,nop,abc),(abc,) 123');

foreach($strings as $string){
  echo "Before: $string = ";    
    while(preg_match('!(\([^,)]*),(.+\)?)!',$string)){
        $string = preg_replace('!(\([^,)]*),(.+\)?)!',"$1 $2",$string);
    }
  echo "After: $string\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T17:26:10.543

**编辑：**
如果你没有递归括号，这就像一个魅力：

```
/,(?=[^(]*?\))/ 
```

当然换成一个空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T18:04:42.720

这适用于 PHP。（如果你可以使用 preg_replace_callback）：

```
 function commas($matches){return str_replace(',',' ',$matches[0]);}
 echo preg_replace_callback('/(\(.*\))/i','commas','123 (abc,def) 567'); 
```

或在一行中：

```
echo preg_replace_callback('/(\(.*\))/i',create_function('$matches','return str_replace(","," ",$matches[0]);'),'123 (abc,def) 567'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-24T12:56:49.580

请检查此正则表达式。这将对您有所帮助。

```
,(?=[^\(]*\)) 
```

[检查演示](http://regex101.com/r/yY7xW5)