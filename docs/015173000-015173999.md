# StackOverflow 问答 15173000-15173999

# python - 为什么 webkit2png 不起作用？ImportError：无法导入名称 init_qtgui

> ID：15173001
> 
> 赞同：2
> 
> 时间：2013-03-02T09:41:04.793
> 
> 标签：python

为什么 webkit2png 不起作用？

```
from webkit2png import WebkitRenderer, init_qtgui

Traceback (most recent call last):
  File "/home/ubuntu/workspace/screen/test4.py", line 1, in <module>
    from webkit2png import WebkitRenderer, init_qtgui
ImportError: cannot import name init_qtgui

import webkit2png
from pprint import pprint
pprint(dir(webkit2png))

['WebkitRenderer',
 '__all__',
 '__builtins__',
 '__doc__',
 '__file__',
 '__name__',
 '__package__',
 '__path__',
 'webkit2png'] 
```

我正在尝试截取页面的屏幕截图。有没有真正有效的图书馆？我正在使用 ubuntu 12.04。

# arrays - 计算两个数组元素靠近出现的次数

> ID：15173003
> 
> 赞同：1
> 
> 时间：2013-03-02T09:41:20.613
> 
> 标签：arrays, perl

我有一大堆词。我想计算两个特定单词出现的次数小于给定距离的次数。

例如，如果“时间”和“迟到”之间的距离不超过三个字，那么我想增加一个计数器。“时间”和“迟到”这两个词可以在数组中出现数百次。我怎样才能找到它们彼此靠近的次数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:47:47.700

你没有问问题，所以我认为你正在想出一个算法。

1.  遍历索引。
    1.  如果在该索引处找到第一个单词，
        1.  注意那个索引。
    2.  如果在该索引处找到第二个单词，
        1.  注意那个索引。
2.  从另一个索引中减去一个索引。

笔记：

*   您可能需要添加检查以确保找到每个单词。
*   当其中一个词出现不止一次时，您没有指定应该发生什么。

* * *

对于评论中提出的问题：

1.  遍历索引。
    1.  如果在该索引处找到第一个单词，
        1.  注意那个索引。
    2.  如果在该索引处找到第二个单词，
        1.  如果当前指数与标注指数之差≤3，
            1.  增加计数器。

笔记：

*   假设您只关心第二个单词与第一个单词的*前一个*实例之间的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:52:38.690

使用索引哈希将是非常有效的解决方案：

```
my @words = qw( word1 word2 word3 word4 word5 word6 );

# That can be expensive, but you do it only once
my %index;
@index{@words} = (0..$#words);

# That will be real quick
my $distance = $index{"word6"} - $index{"word2"}
print "Distance: $distance \n"; 
```

上面脚本的输出将是：

```
Distance: 4 
```

注意：创建索引哈希可能很昂贵。但是，如果您计划进行多次距离检查，这可能是值得的，因为任何查找都很快（恒定时间，而不是事件日志（n））。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T18:50:41.740

是否需要支持重复单词？

```
#! /usr/bin/perl
use strict;
use warnings;
use constant DEBUG => 0;

my @words;
if( $ARGV[0] && -f $ARGV[0] ) {
    open my $fh, "<", $ARGV[0] or die "Could not read $ARGV[0], because: $!\n";
    my $hughTestFile = do { local $/; <$fh> };
    @words = split /[\s\n]/, $hughTestFile;  # $#words == 10M words with my test.log
    # Test words (below) were manually placed at equal distances (~every 900K words) in test.log
    # With above, TESTS ran in avg of 15 seconds.  Likely test.log was in buffers/cache.
} else {
    @words = qw( word1 word2 word3 word4 word5 word6 word7 word8 word4 word9 word0 );
}

sub IndexOf {
    my $searchFor = shift;
    return undef if( !$searchFor );
    my $Nth = shift || 1;

    my $length = $#words;
    my $cntr = 0;
    for my $word (@words) {
        if( $word eq $searchFor ) {
            $Nth--;
            return $cntr if( $Nth == 0 );
        }
        $cntr++;
    }
    return undef;
}

sub Distance {
# args:  <1st word>, <2nd word>, [occurrence_of_1st_word], [occurrence_of_2nd_word]
# for occurrence counts:  0, 1 & undef - all have the same effect (1st occurrence)
    my( $w1, $w2 ) = ($_[0], $_[1]);
    my( $n1, $n2 ) = ($_[2] || undef, $_[3] || undef );
    die "Missing words\n" if( !$w1 );
    $w2 = $w1 if( !$w2 );

    my( $i1, $i2 ) = ( IndexOf($w1, $n1), IndexOf($w2, $n2) );
    if( defined($i1) && defined($i2) ) {
        my $offset = $i1-$i2;
        print "  Distance (offset) = $offset\n";
        return undef;
    } elsif( !defined($i1) && !defined($i2) ) {
        print "  Neither words were ";
    } elsif( !defined($i1) ) {
        print "  First word was not ";
    } else {
        print "  Second word was not ";
    }
    print "found in list\n";

    return undef;
}

# TESTS
print "Your array has ".$#words." words\n";
print "When 1st word is AFTER 2nd word:\n";
Distance( "word7", "word3" );
print "When 1st word is BEFORE 2nd word:\n";
Distance( "word2", "word5" );
print "When 1st word == 2nd word:\n";
Distance( "word4", "word4" );
print "When 1st word doesn't exist:\n";
Distance( "word00", "word6" );
print "When 2nd word doesn't exist:\n";
Distance( "word1", "word99" );
print "When neither 1st or 2nd words exist:\n";
Distance( "word00", "word99" );
print "When the 1st word is AFTER the 2nd OCCURRENCE of 2nd word:\n";
Distance( "word9", "word4", 0, 2 );
print "When the 1st word is BEFORE the 2nd OCCURRENCE of the 2nd word:\n";
Distance( "word7", "word4", 1, 2 );
print "When the 2nd OCCURRENCE of the 2nd word doesn't exist:\n";
Distance( "word7", "word99", 0, 2 );
print "When the 2nd OCCURRENCE of the 1st word is AFTER the 2nd word:\n";
Distance( "word4", "word2", 2, 0 );
print "When the 2nd OCCURRENCE of the 1st word is BEFORE the 2nd word:\n";
Distance( "word4", "word0", 2, 0 );
print "When the 2nd OCCURRENCE of the 1st word exists, but 2nd doesn't:\n";
Distance( "word4", "word99", 2, 0 );
print "When neither of the 2nd OCCURRENCES of the words exist:\n";
Distance( "word00", "word99", 2, 2 );
print "Distance between 2nd and 1st OCCURRENCES of the same word:\n";
Distance( "word4", "", 2, 1 ); 
```

# emacs - Emacs，如何为 LaTeX 文件自动打开 flyspell

> ID：15173004
> 
> 赞同：3
> 
> 时间：2013-03-02T09:41:25.810
> 
> 标签：emacs, emacs24, aspell, flyspell

我仅将 Emacs 用于 \LaTeX 和 python 编程。`flyspell-mode`有没有办法在我处理 .tex 文件时自动打开，并`flyspell-prog-mode`在我处理 .py 文件时自动打开？如何在我的 .emacs 文件中执行此操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T11:08:52.207

将这些函数添加到 python-mode 和 latex-mode 的钩子中

```
(require 'python)

;; If you use tex-mode
(require 'tex-mode)`
(add-hook 'latex-mode-hook 'flyspell-mode)

;; If you use AUCTeX
(load "auctex.el" nil t t)`
(add-hook 'LaTeX-mode-hook 'flyspell-mode)

(add-hook 'python-mode-hook 'flyspell-prog-mode) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T10:35:16.970

像这样的东西应该工作。

```
(setq auto-mode-alist (cons '("\\.tex\\'" . flyspell-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.py\\'" . flyspell-prog-mode) auto-mode-alist)) 
```

# javascript - Google Chrome 是否遵循 Firefox 规范

> ID：15173010
> 
> 赞同：2
> 
> 时间：2013-03-02T09:42:21.580
> 
> 标签：javascript, css, google-chrome, firefox

我使用[MDN](https://developer.mozilla.org/)作为我的 Javascript 和 CSS 参考。考虑到 Javascript 语言的创建者在 Mozilla 工作，我认为这是最好的参考。但是，我时不时地听说 Google Chrome 中提供了新功能，但 Firefox 还没有这些功能。这让我想知道：

1.  这些新规范在哪里以及如何发布？
2.  对于 Chrome 和 Firefox 之间的相似之处，假设 Chrome 遵循 Firefox 标准是否安全？我的印象是 Chrome 的主要目标是成为一个更快的 Firefox（？），这就是为什么它没有像 Firefox 那样庞大的 wiki。
3.  如果我正在为 Chrome 开发（例如制作 Chrome 应用程序），我可以依赖 Firefox 的 MDN 作为参考吗？我找不到与 MDN for Chrome 等效的东西。

我会将最佳回复标记为答案。感谢您分享您的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:56:38.880

1.  所有修改都在[google chrome 发布博客](http://googlechromereleases.blogspot.com.au/)中公布。

2.  在我看来，chrome 不仅仅是一个更快的 Firefox。它完全是一个不同的浏览器，在我看来，它提供了更好的用户定制（如主题之类的东西）以及拥有提供一些非常好的[扩展](https://chrome.google.com/webstore/category/extensions?hl=en)的开发人员基础。至于 wiki，chrome 相当新，但是，它通过 chrome 支持提供了一些非常好的用户支持。

3.  AFAIK、spidermonkey (Firefox) 和 v8 (chrome) 引擎在 javascript 方面相当相似，所以你应该可以只使用 MDN。[这里](https://webmasters.stackexchange.com/questions/3/what-are-the-differences-between-firefoxs-javascript-engine-and-chromes-v8)有一个关于这个问题的 webmaster.SE 线程。

# c - 通过 sockaddr_in 获取 WAN ip

> ID：15173011
> 
> 赞同：0
> 
> 时间：2013-03-02T09:42:37.130
> 
> 标签：c, sockets, wan

我试图通过我的 sockaddr_in 获取客户端的 ip，但这个 ip 总是 192.168.1.1（路由器 ip）。我怎样才能正确获得 WAN ip？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-02T10:44:54.970

听起来您在路由器上运行了某种反向代理。它可能在某处添加了客户端 IP，例如作为 HTTP 的 X-Forwarded-For 标头。

# java - 找不到用于设置偏好 Eclipse 的 Android SDK 位置

> ID：15173013
> 
> 赞同：5
> 
> 时间：2013-03-02T09:42:42.110
> 
> 标签：java, android, windows, eclipse, adt

要开始我安装的Android开发..

JDK 7

**在 Windows 7 上的E:/** Drive中下载并安装 Eclipse

然后按照步骤，*使用 Eclipse 安装 Android ADT*。到目前为止一切都很好，但是在尝试设置首选项时，它不接受任何文件夹。

在网上查看其他建议时，我发现有一些设置，*`C:\Program Files\Android\android-sdk`*但在我的情况下没有这样的文件夹。

是我的***android-sdk***在**E:/**驱动器而不是**C:/**

我刚得到一个文件夹（安装 ADT 后）：

E:\Software\JAVA 工具\eclipse-mobile-juno-SR2-win32-x86_64\eclipse\plugins\com.android.ide.eclipse.adt.package_21.1.0.v201302060044-569685

我什至找不到任何**“工具”**文件夹（正如 Eclipse 偏好所要求的那样）

不知道该怎么办。请给我一些建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T09:55:36.033

您好，请按照简单的步骤安装 eclipse 和 Android SDK 有一个 ADT 捆绑包，所以它包含所有类似

**1）** Eclipse，你不需要安装

**2)**安卓软件开发工具包，

**3)** ADT 插件

所以你只需点击 eclipse 它就会像 Android SDK 和 ADT 插件一样自动加载。因此，请按照链接**[下载](http://developer.android.com/sdk/index.html)**adt-bundle。

**注意：**在此之前请安装JDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T09:45:44.840

我的朋友，谁来安装`ANDROID SDK`？它既不附带`JDK`也不`Eclipse`。请通过这些正确设置[链接1](http://developer.android.com/sdk/index.html)，[链接2](http://developer.android.com/sdk/installing/index.html)

# database - 文本输入还是选择？

> ID：15173019
> 
> 赞同：0
> 
> 时间：2013-03-02T09:43:11.393
> 
> 标签：database, user-input

在为私立学校创建学生管理应用程序时，添加学生时，用户必须指定学生来自哪个公立学校，然后应用程序根据学生来自的学校显示有关学生的信息，我面临的问题是何时用户为同一所学校输入不同的名称（例如：“abc-paris”、“abc/paris”和“abc paris”将被视为 3 个不同的学校，而不是），我考虑的解决方案是进行选择而不是示例文本输入（在 html 中），但我发现这是一个糟糕的解决方案，因为：

*   学校列表将来可能会发生变化，因此我需要创建一个包含学校名称的数据库表。
*   我需要做一些额外的工作来管理（添加、删除）一所学校。
*   我发现创建一个只包含一列的数据库表很糟糕。

那么对于这个问题你有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:53:15.357

听起来您的数据模型没有标准化。我认为您应该在查找表中列出学校。学校和学生之间应该是一对多的关系。在用户界面上，学校应该是一个下拉框而不是文本框。

这是一个建议的表结构：

```
CREATE TABLE School (ID int identity, Name varchar(30), primary key (ID))
CREATE TABLE Student (ID int, SchoolID INT, primary key (ID),
FOREIGN KEY (SchoolID) REFERENCES School(Id))

INSERT INTO School (Name) VALUES ('School1')
INSERT INTO School (Name) VALUES ('School2')
INSERT INTO School (Name) VALUES ('School3')

INSERT INTO Student (id,SchoolID) VALUES (1,1)
INSERT INTO Student (id,SchoolID) VALUES (2,1)
INSERT INTO Student (id,SchoolID) VALUES (3,2)
INSERT INTO Student (id,SchoolID) VALUES (4,3)
INSERT INTO Student (id,SchoolID) VALUES (5,3)
INSERT INTO Student (id,SchoolID) VALUES (6,3) 
```

注意有两所学校和六名学生。其中两名学生上学 1，一名学生上学 2，三名学生上学 3。

用户界面应包含一个下拉框供用户选择学校，即选择 ID、名称来自学校。名称应显示在每所学校的下拉框中，以及用于选择学校/将学校插入数据库的 ID。

# javascript - 单击按钮时强制下载pdf

> ID：15173025
> 
> 赞同：3
> 
> 时间：2013-03-02T09:43:53.067
> 
> 标签：javascript, jquery, backbone.js, pdf-generation

我有一个backbonejs 视图，其中包含一个“下载pdf”按钮。我也有可以找到 pdf 的 url。我希望当用户单击按钮时，会下载 pdf 文件。是否可以？

编辑：我在backbone.js 中的视图代码

```
savendownload: function () {
  this.$("#saveanddownload").button('loading');

  var that = this;
  var formData = this.fetchData();
  if (formData) window.invoices.create({
    buyer: formData.buyer,
    items: formData.items,
    company: formData.company,
    action: "savendownload"
  }, {
    wait: true,
    success: function (model) {
      var data = model.toJSON();

      var filename = data.filename;
      //download code here
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:55:15.597

不要使用按钮，使用链接并将`href`属性设置为 PDF 文件的 URL。浏览器将为您处理文件下载，尊重用户的浏览器偏好。

```
<a href="your/file.pdf" /> 
```

如果您需要链接看起来像一个按钮，您可以使用 CSS 设置它的样式。参见例如这个[SO thread](https://stackoverflow.com/questions/710089/how-do-i-make-an-html-link-look-like-a-button)。

**编辑：** AFAIK，您无法可靠地初始化从 javascript 下载的文件。您可以做的是使用您的 pdf URL 打开一个新窗口/选项卡：

```
window.open("http://domain.com/document.pdf",'_blank'); 
```

但是用户的浏览器可以阻止新窗口的创建。您可能只想生成一个下载链接：

```
$('<a>Click here to download PDF</a>').attr('href', filename).appendTo(that.$el); 
```

并让用户单击链接以启动文件下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-25T20:37:13.273

**使用“下载”标签**

```
<a href="assets/pdfs/yourdocument.pdf" download>Download PDF</a> 
```

但不能在 IE Explorer 上工作；)

# css - 填充div之间的空间

> ID：15173031
> 
> 赞同：0
> 
> 时间：2013-03-02T09:44:17.393
> 
> 标签：css

我有以下 HTML：

```
<body>
  <div class="header">header</div>
  <div class="content">content</div>
  <div class="footer">footer</div>
</body> 
```

和 CSS：

```
.header {
  position: absolute;
  top: 0;
  width: 100%;
  height: 80px;
  background-color: #f0f0f0;
}

.content {
  margin: 30px;
  background-color: #bcbcbc;
}

.footer {
   position: absolute;
   bottom: 0;
   width: 100%;
   height: 30px;
   background-color: #f0f0f0;
} 
```

页眉和页脚看起来如我所愿，但现在我希望内容填充它们之间的所有空间（周围有 30 像素的边距）。我应该添加什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:46:59.593

在内容 div 上尝试高度 100%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:20:08.850

尝试这个

```
.header, .content, .footer {
    position: absolute;
}
.header{
    top: 0;
    width: 100%;
    height: 50px;
    background-color: #99CC00;
    left: 0;
    right: 0;
}
.content {
    top: 50px;
    left: 0;
    right: 0;
    bottom: 50px;
    background-color: #FF6600;
}
.footer {
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 50px;
    background-color: #6600CC;
} 
```

# java - Java：Java 编译器如何计算程序的内存使用量？

> ID：15173035
> 
> 赞同：3
> 
> 时间：2013-03-02T09:44:36.390
> 
> 标签：java, memory-management, java-memory-model

我正在解决[这个](http://www.codechef.com/problems/E1)问题。它需要 50000bytes 的内存限制。因此，如果我分配一个大小为 1000 X 1000 的 int 二维数组，它不应该超过内存边界吗？

PS：我看到了[这个](http://www.codechef.com/viewsolution/243250)问题的解决方案，程序员分配了一个大小为 m X m 的二维数组。如果 m 等于 1000，那么我认为会超出内存限制。但是 codechef 已经接受了他的解决方案。

codechef 编译器的机制有问题还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T09:47:17.507

从网站：

> **源限制**：50000 字节

此限制适用于源代码的大小，而不适用于程序分配的内存量。两者完全无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T12:40:53.473

50000 字节是您的源代码可以拥有的最大大小，它与您的程序使用的内存完全无关。大小为 1000*1000 的二维数组将从 RAM（主存储器）分配给您的程序。

顺便说一句，在 cadechef 上，单个数组的最大大小限制在 10^7 到 10^8 左右，因为很难分配连续的内存位置。

您可以参考关于 codechef 的[讨论以获取更多详细信息。](http://discuss.codechef.com/questions/28604/maximum-size-of-an-array)

# c# - 提交更改不起作用

> ID：15173039
> 
> 赞同：1
> 
> 时间：2013-03-02T09:44:54.423
> 
> 标签：c#, linq-to-sql

变量正在更新，但 submitchanges 不起作用。我认为问题就在我的 Users.dbml 附近，但我不知道该怎么办！我认为他不与我的数据库通信，只与我的Users.dbml。

```
DataClassesDataContext db = new DataClassesDataContext(GetConnectionString);

var a = (from p in db.Users
  where p.Username == tbloginName.Text
  select p).SingleOrDefault();
a.SessionId = Session.SessionID;

db.SubmitChanges(); 
```

# documentation - JSTL 1.2 Tag 参考文档的链接

> ID：15173041
> 
> 赞同：2
> 
> 时间：2013-03-02T09:45:11.497
> 
> 标签：documentation, jstl, java-ee-6

在 JavaEE 6 中，JSTL 版本是 1.2。我正在尝试查找此版本的 taglib 文档的链接。我找到了[1.1](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/index.html)的链接。但是在 1.2 中找不到它。我知道 JSTL 1.2 是由[java.net](http://jstl.java.net/)管理的；但没有在那里找到文档。JavaEE 6的[技术文档](http://docs.oracle.com/javaee/)也没有提到任何此类链接。

如果有人有链接，请分享。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:44:36.133

我今天自己在找它，在 JCP 网站上找到了一个 .pdf：http: [//jcp.org/aboutJava/communityprocess/mrel/jsr052/index2.html](http://jcp.org/aboutJava/communityprocess/mrel/jsr052/index2.html)

如果您找到像 1.1 链接上的那种基于 HTML 的文档，请告诉我！

# bash - 如何使用AWK按某列抓取文件中的一行

> ID：15173042
> 
> 赞同：3
> 
> 时间：2013-03-02T09:45:13.543
> 
> 标签：bash, unix, awk, grep

```
1|1001|399.00|123                                  
1|1001|29.99|234                                  
2|1002|98.00|345                                   
2|1002|29.98|456                                   
3|1003|399.00|567  
4|1004|234.56|456 
```

我将如何使用 awk 来获取第 2 列中带有 '1002' 的所有行？

如果我想在第一列中获取所有带有“2”的行，我可以使用 grep ^2，但是如何按不同的列进行搜索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T09:52:51.107

典型的解决方案是：

```
awk '$2 == 1002' FS=\| input-file 
```

你会得到一个稍微不同的结果： `$2 ~ 1002`，它在技术上满足你的查询，但可能不是你想要的。（它会进行正则表达式匹配，因此如果第二列是“341002994”则匹配）。

# javascript - 从两个 div 到一个输入字段值的内容

> ID：15173050
> 
> 赞同：0
> 
> 时间：2013-03-02T09:46:15.030
> 
> 标签：javascript, html

我正在尝试将两个 div 的内容插入到表单中的单个输入字段中。这是我到目前为止所拥有的，但目前唯一在 onclick 发生时复制的字段是 edit1 div 内容。

任何帮助将不胜感激。

JAVASCRIPT：

```
<script language="javascript" type="text/javascript">
function copyText2() {
var output = document.getElementById("edit1","edit2").innerHTML;
document.getElementById("user-submitted-tags").value = output;
}
</script> 
```

的HTML：

```
<div id="edit1">foo</div>
<div id="edit2">bar</div>

<form>
<input class="usp_input" type="text" name="user-submitted-tags" id="user-submitted-tags" value="">

<input onClick="copyText2()" class="usp_input" type="submit" name="user-submitted-post" id="user-submitted-post" value="Submit Post">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:49:50.013

改变

```
var output = document.getElementById("edit1","edit2").innerHTML; 
```

进入

```
var output = document.getElementById("edit1").innerHTML + document.getElementById("edit2").innerHTML; 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:49:55.543

分别获取这两个内容，然后添加。

```
var output1 = document.getElementById("edit1").innerHTML;
var output2 = document.getElementById("edit2").innerHTML;
document.getElementById("user-submitted-tags").value = output1 + "&nbsp;" + output2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T09:49:47.520

您应该一次复制一个，然后连接

```
function copyText2() {
    var output = "";

    output += document.getElementById("edit1").innerHTML;

    output += document.getElementById("edit2").innerHTML;

    document.getElementById("user-submitted-tags").value = output;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T09:50:42.077

`document.getElementById("")`仅使用您提供的第一个 id 字符串。它不接受多个 ID。来自[Mozilla 开发文档](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)：

```
id is a case-sensitive string representing the unique ID of the 
element being sought. 
```

只需`output`从第一个 id 中获取内容，然后从第二个中获取内容并将它们附加在一起。

# sencha-touch-2 - activeItemChange：如何加快其性能？

> ID：15173060
> 
> 赞同：2
> 
> 时间：2013-03-02T09:47:38.697
> 
> 标签：sencha-touch-2

为了优化我的应用程序的性能，我尝试尽可能减少其主轮播中的元素数量。我只剩 3 个一阶商品（正在查看的商品，以及 N-1 和 N+1）。

我还想删除 N-1 和 N+1 轮播项目的大部分内容，并以编程方式添加当前正在查看的项目的内容（以便轮播项目看起来像这样：[http：/ /i.imgur.com/gm7cL7E.png](http://i.imgur.com/gm7cL7E.png)）。

`activeItemChange`是事件监听器的明显选择。问题是，它显然相对较慢，尤其是在低端 Android 手机上。开火可能需要长达 4 秒的时间。

我已经尝试将轮播的`onDrag`属性作为触发内容创建的不同方式，但要求手机执行两项操作（动画轮播移动并创建新的内容项）会使轮播运动动画不稳定。

有什么办法可以修改 activeItemChange 或者轮播来提高听者的开火速度？或者我可以看到的任何其他听众会表现更好？我已经做了很多工作来优化应用程序的整体性能（缩小 DOM、事件委托等）并且应用程序的其余部分运行得很好，所以我不确定做一般性能工作是否会释放足够的空间CPU 让 activeItemChange 达到我想要的水平。

**编辑：**我做了更多的性能改进，试图释放足够的 CPU，但无济于事。任何额外的提示将不胜感激。

**编辑 2：**建议`order: 'before'`用于事件，如：

```
listeners : {
    order : 'before',
    activeitemchange : someFunction
} 
```

这确实会更快地发射。但是，由于 activeItemChange 一定还没有被触发，我无法确定哪个项目应该添加轮播内容。如果我能确定旋转木马的走向，那就足够了，但我似乎也无法理解。

此外，由于 Sencha 似乎会自动绘制 N+1 和 N-1 并擦除 N+2 和 N-2，我想我可以用它来更快速地确定物品在轮播中的位置；不幸的是，根据 Sencha 文档中提出的性能问题，看起来它最终的性能会更差，而不是更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:24:41.073

好问题。只是一个建议可能有效，也可能无效。除了专注于轮播的 activeItemChange 之外，也许您可​​以尝试要放置项目的容器的绘制事件，或者如果数据不会更改，则初始化事件，初始化比绘制快，但只触发一次所以如果您的内容要更改使用绘制，否则尝试使用初始化它可能是更好的方法。

# php - 如何通过 php 中的 url 获取图像的内容？

> ID：15173061
> 
> 赞同：0
> 
> 时间：2013-03-02T09:47:39.680
> 
> 标签：php, image, url

我正在使用一个 SNS 网站的 api，它正在上传图像。这个 api 有一个参数“photo=photo_file_content”，并且基于**[RFC 1867](http://www.ietf.org/rfc/rfc1867.txt)**。

现在我有某个图像的 url，但我不知道如何获取图像，我使用过`$param['photo'] = file_get_contents($pic_path);`，但它没有工作。

那么获取图像的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:02:09.560

您可以使用[**客户端 URL 库**](http://php.net/manual/en/book.curl.php)。这是最适合您的解决方案。

另外，试试这个：

```
$ch = curl_init ($url);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
        $gm=curl_exec($ch);
        curl_close ($ch); 
```

并将结果保存`$gm`在文件中。

# java - Jasper 的 excel 报告

> ID：15173063
> 
> 赞同：2
> 
> 时间：2013-03-02T09:47:43.800
> 
> 标签：java, jasper-reports

在 excel 中生成报告时，会显示以下错误消息。请帮忙！！！

代码：-

```
public String mainReportXLS(){

    Map<String, Object> jrxmlParams = null;

    try{

        String jrxmlFileName = "C:/Jasper/Dashboard2.jrxml";

        JasperReport objJReport = JasperCompileManager.compileReport(jrxmlFileName);
        connection = getConnection();

        JasperPrint print = JasperFillManager.fillReport(objJReport, jrxmlParams, connection);
        ByteArrayOutputStream outputByteArray = new ByteArrayOutputStream();
        //OutputStream outputfile= new FileOutputStream(new File("c:/output/JasperReport.xls"));

         JRXlsExporter exporterXLS = new JRXlsExporter();
         exporterXLS.setParameter(JRXlsExporterParameter.JASPER_PRINT, print);
         exporterXLS.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, "C:/Jasper/Dashboard2.xls" );
         exporterXLS.setParameter(JRXlsExporterParameter.OUTPUT_STREAM, outputByteArray);
         exporterXLS.setParameter(JRXlsExporterParameter.IS_ONE_PAGE_PER_SHEET, Boolean.FALSE);
         exporterXLS.setParameter(JRXlsExporterParameter.IS_DETECT_CELL_TYPE, Boolean.TRUE);
         exporterXLS.setParameter(JRXlsExporterParameter.IS_WHITE_PAGE_BACKGROUND, Boolean.FALSE);
         exporterXLS.setParameter(JRXlsExporterParameter.IS_REMOVE_EMPTY_SPACE_BETWEEN_ROWS, Boolean.TRUE);
         exporterXLS.exportReport();

         //outputfile.write(outputByteArray.toByteArray()); 

    }catch (Exception e) {
           System.out.print("Exceptiion" + e);
      }

    return null;
} 
```

查看的错误消息：--

```
]] Root cause of ServletException.
javax.faces.FacesException: Error calling action method of component with id headerForm:Report123456
    at org.apache.myfaces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:72)
    at javax.faces.component.UICommand.broadcast(UICommand.java:109)
    at javax.faces.component.UIViewRoot._broadcastForPhase(UIViewRoot.java:97)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:171)
    at org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:32)
    Truncated. see log file for complete stacktrace
Caused By: javax.faces.el.EvaluationException: Exception while invoking expression #{ReportsBB.extractJasper}
    at org.apache.myfaces.el.MethodBindingImpl.invoke(MethodBindingImpl.java:156)
    at org.apache.myfaces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:61)
    at javax.faces.component.UICommand.broadcast(UICommand.java:109)
    at javax.faces.component.UIViewRoot._broadcastForPhase(UIViewRoot.java:97)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:171)
    Truncated. see log file for complete stacktrace
Caused By: java.lang.NoSuchMethodError: org.apache.poi.hssf.usermodel.HSSFWorkbook.getCreationHelper()Lorg/apache/poi/ss/usermodel/CreationHelper;
    at net.sf.jasperreports.engine.export.JRXlsExporter.openWorkbook(JRXlsExporter.java:282)
    at net.sf.jasperreports.engine.export.JRXlsAbstractExporter.exportReportToStream(JRXlsAbstractExporter.java:879)
    at net.sf.jasperreports.engine.export.JRXlsAbstractExporter.exportReport(JRXlsAbstractExporter.java:629)
    at com.ultimatix.dealpricing.dao.ReportsDAO.mainReportXLS(ReportsDAO.java:137)
    at com.ultimatix.dealpricing.backingbeans.ReportsBackingBean.extractJasper(ReportsBackingBean.java:293)
    Truncated. see log file for complete stacktrace
> 
```

任何人都可以帮忙..!!!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T10:57:12.513

请尝试以下代码，它对我有用

```
 File xlsx = new File("C:/Users/Sadagopan/Documents/sample.xlsX");
   JRXlsxExporter Xlsxexporter = new JRXlsxExporter();
   Xlsxexporter.setParameter(JRExporterParameter.JASPER_PRINT,
                             jasperPrint);
   Xlsxexporter.setParameter(JRExporterParameter.OUTPUT_FILE,
                             xlsx);
   Xlsxexporter.exportReport(); 
```

也检查一下..“工具”>“选项”>“导出选项”选项卡>“PDF”各种安全选项

# opengl - OPEN GL 颜色映射

> ID：15173068
> 
> 赞同：0
> 
> 时间：2013-03-02T09:48:05.323
> 
> 标签：opengl, colors

我有以下工作代码（我从一个例子中得到它）。

它产生一个立方体，其侧面颜色不同。有什么方法可以根据它们的位置或某些模拟为侧面的每个（一组）像素分配颜色。像立方体表面上标量场的颜色图之类的东西......？有人可以给我一个在任意表面上这样做的例子吗？

```
#include <GL/glut.h>
#include <GL/glu.h>
#include <GL/freeglut_ext.h>

void init(void)
{
glClearColor(0,0,0,0);
glShadeModel(GL_FLAT);
}

void DrawCube(void)
{
glLoadIdentity();
gluLookAt(0, 10, 10, 0, 1, 0, 0, -2, -35.7);
glBegin(GL_QUADS);

//face in xy plane
glColor3f(0.12, 0.91, 0.02);//this the color with which complete cube is drawn. 
glVertex3f(0,0 ,0 );
glVertex3f(5, 0, 0);
glVertex3f(5, 5, 0);
glVertex3f(0, 5, 0);

//face in yz plane
glColor3f(1, 0.23, 0.56);
glVertex3f(0, 0, 0);
glVertex3f(0, 0, 5);
glVertex3f(0, 5, 0);
glVertex3f(0, 5, 5);

//face in zx plance
glColor3f(0.45, .81, 1);
glVertex3f(0, 0, 0  );
glVertex3f(0, 0, 5);
glVertex3f(5, 0, 5);
glVertex3f(5, 0, 0);

//|| to xy plane.
glColor3f(0.23, 0.78,0.13);
glVertex3f(0, 0, 5);
glVertex3f(5, 0, 5);
glVertex3f(5, 5, 5);
glVertex3f(0, 5, 5);

//|| to yz plane
glColor3f(0.73, 0.58, 0.58);
glVertex3f(0,0 ,5 );
glVertex3f(5, 0, 5);
glVertex3f(5, 5, 5);
glVertex3f(0, 5, 5);

//|| to zx plane
glVertex3f(0.58, 0, 0.82);
glVertex3f(0, 5, 0  );
glVertex3f(0, 5, 5);
glVertex3f(5, 5, 5);
glVertex3f(5, 5, 0);
glEnd();
glFlush();
}

void reshape(int w,int h){

glViewport(0, 0, (GLsizei)w, (GLsizei)h);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glFrustum(-1, 1, -1, 1, 1.5, 20);
glMatrixMode(GL_MODELVIEW);
}

int main(int argc, char** argv){

glutInit(&argc, argv);//we initizlilze the glut. functions
glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
glutInitWindowPosition(800, 800);
glutCreateWindow(argv[1]);
init();
glutDisplayFunc(DrawCube);
glutReshapeFunc(reshape);
glutMainLoop();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:19:30.930

观看此视频，您还可以下载代码。 [http://www.videotutorialsrock.com/opengl_tutorial/cube/home.php](http://www.videotutorialsrock.com/opengl_tutorial/cube/home.php)

在此视频中，您可以了解您需要的立方体表面上的纹理映射。

# python - 使用字典中已存在的键的大写值填充字典

> ID：15173071
> 
> 赞同：2
> 
> 时间：2013-03-02T09:48:25.930
> 
> 标签：python

我有一个`d`包含字符-字符键值对的 dict 变量。所有这些字符都是小写的。我也想将相应的大写字符映射存储为键值对。

字典由这些条目组成

```
d[q]='a'
d[w]='s'
d[e]='d'
d[r]='f'
d[t]='g' 
```

我也想拥有这个

```
d[Q]='A'
d[W]='S'
d[E]='D'
d[R]='F'
d[T]='G' 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T09:49:59.917

使用生成器表达式来更新您的字典：

```
d.update({k.upper(): v.upper() for k, v in d.iteritems()}) 
```

或者，对于 Python 3：

```
d.update({k.upper(): v.upper() for k, v in d.items()}) 
```

或者，对于 Python 2.6 及更早版本：

```
d.update([(k.upper(), v.upper()) for k, v in d.iteritems()]) 
```

这会遍历所有键值对，`d`然后添加相应的大写键值对。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T10:34:44.153

如果您将有很多值，最好创建自己的字典类，该类调用`.lower`传递给**getitem**的所有项目，如下所示：

```
class CustomDict(dict):
    def __getitem__(self, key):
        if key.lower() == key:
            return super(CustomDict, self).__getitem__(key.lower()).lower()
        else:
            return super(CustomDict, self).__getitem__(key.lower()).upper()
d = CustomDict({"a" : "q" , "s":"w" , "d":"e", "f": "r"})
print d["A"] #prints 'Q'
print d["s"] #prints 'w' 
```

这使得您不必对 2 个相似值有 2 个相似的引用。

# magento - 如何知道用户是否在结帐？

> ID：15173073
> 
> 赞同：1
> 
> 时间：2013-03-02T09:48:55.750
> 
> 标签：magento, checkout

在 Magento 中，我有一个监听器来监听`sales_order_save_before`事件。在保存订单之前调用此事件。如果您将订单保存在那里，这会发生在成功站点之前的结帐和后端中。

我只希望逻辑在结帐而不是在后端运行。那么，如果用户正在结帐，我如何签入我的观察者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:38:23.743

你定义了你的观察者

```
<config>
    <global></global>
<config> 
```

如果你定义它

```
<config>
    <frontend></frontend>
<config> 
```

仅在前端运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:04:01.233

你检查过这个吗？ [http://www.yireo.com/tutorials/magento/magento-programming/633-events-with-magento-checkout](http://www.yireo.com/tutorials/magento/magento-programming/633-events-with-magento-checkout)

而这个， [http://www.magentocommerce.com/wiki/5__-_modules_and_development/reference/events](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/events)

这是一个很棒的活动备忘单， [http: //www.nicksays.co.uk/magento-events-cheat-sheet-1-7/](http://www.nicksays.co.uk/magento-events-cheat-sheet-1-7/)

# r - 绘制最佳拟合非线性曲线的新值

> ID：15173086
> 
> 赞同：0
> 
> 时间：2013-03-02T09:50:24.573
> 
> 标签：r, nonlinear-functions, best-fit-curve

我已经为非线性函数创建了最佳拟合。它似乎工作正常：

```
#define a function
fncTtr <- function(n,d) (d/n)*((sqrt(1+2*(n/d))-1))

#fit
dFit <- nls(dData$ttr~fncTtr(dData$n,d),data=dData,start=list(d=25),trace=T)
summary(dFit)

plot(dData$ttr~dData$n,main="Fitted d value",pch=19,)
xl <- seq(min(dData$n),max(dData$n), (max(dData$n) - min(dData$n))/1000)

lines(xl,predict(dFit,newdata=xl,col=blue) 
```

我观察的情节是正确的。我无法在我的绘图上显示最佳拟合曲线。我创建了具有 1000 个值的 xl 自变量，并且我想使用最佳拟合来定义新值。当我调用“行”过程时，我收到错误消息：

> xy.coords(x, y) 中的错误：“x”和“y”长度不同如果我尝试仅执行预测函数：

```
a <-predict(dFit,newdata=xl)
str(a) 
```

我可以看到 xl 有 1000 个组件，但“a”只有 16 个组件。我不应该在 a 中有相同数量的值吗？

使用的数据：

```
 n    ttr      d
1  35 0.6951 27.739
2  36 0.6925 28.072
3  37 0.6905 28.507
4  38 0.6887 28.946
5  39 0.6790 28.003
6  40 0.6703 27.247
7  41 0.6566 25.735
8  42 0.6605 26.981
9  43 0.6567 27.016
10 44 0.6466 26.026
11 45 0.6531 27.667
12 46 0.6461 27.128
13 47 0.6336 25.751
14 48 0.6225 24.636
15 49 0.6214 24.992
16 50 0.6248 26.011 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:27:01.393

好的，我想我找到了解决方案，但是我不确定我是否能够解释它。
调用`predict.nls`时，您输入参数`newdata`的内容必须根据您预测的变量（此处`n`）命名，并且名称必须与原始调用中给出的`nls`.

```
#Here I replaced dData$n with n
dFit <- nls(ttr~fncTtr(n,d),data=dData,start=list(d=25),trace=T)

plot(dData$ttr~dData$n,main="Fitted d value",pch=19,)
xl <- seq(min(dData$n),max(dData$n), (max(dData$n) - min(dData$n))/1000)

a <- predict(dFit,newdata=list(n=xl))
length(a)==length(xl)
[1] TRUE

lines(xl,a,col="blue") 
```

![在此处输入图像描述](../Images/3987a133f158c726a877ab62213c75ec.png)

# java - 将运行 java 程序的输出保存为 String[]

> ID：15173090
> 
> 赞同：1
> 
> 时间：2013-03-02T09:50:57.887
> 
> 标签：java

我有以下将内容打印到控制台的 java 代码

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.IOException;

import javax.swing.JFrame;
import javax.swing.JPanel;

import org.jmol.adapter.smarter.SmarterJmolAdapter;
import org.jmol.api.JmolViewer;
import org.jmol.util.Logger;
import org.openscience.jmol.app.jmolpanel.AppConsole;

public class Integrate {

    public static void main(String[] argv) throws IOException {

        JFrame frame = new JFrame("JMOL_WS_V1");
        frame.addWindowListener(new ApplicationCloser());
        frame.setSize(410, 700);
        Container contentPane = frame.getContentPane();
        JmolPanel jmolPanel = new JmolPanel();
        jmolPanel.setPreferredSize(new Dimension(400, 400));

        // main panel -- Jmol panel on top

        JPanel panel = new JPanel();
        panel.setLayout(new BorderLayout());
        panel.add(jmolPanel);

        // main panel -- console panel on bottom

        JPanel panel2 = new JPanel();
        panel2.setLayout(new BorderLayout());
        panel2.setPreferredSize(new Dimension(400, 300));
        AppConsole console = new AppConsole(jmolPanel.viewer, panel2,
        "History State Clear");

        jmolPanel.viewer.setJmolCallbackListener(console);

        panel.add("South", panel2);

        contentPane.add(panel);
        frame.setVisible(true);

        //STARTUP SCRIPT

        String strError = jmolPanel.viewer.openFile("1644_____.pdb");
        if (strError == null){

                 //THIS IS THE COMMAND THAT CALCULATES STUFF
                jmolPanel.viewer.evalString("measure 3 4");
                jmolPanel.viewer.evalString("measure 2 4");
            }else{
                Logger.error(strError);
        }

    }

    static class ApplicationCloser extends WindowAdapter {
        @Override
        public void windowClosing(WindowEvent e) {
            System.exit(0);
        }
    }

    static class JmolPanel extends JPanel {

        JmolViewer viewer;

        private final Dimension currentSize = new Dimension();

        JmolPanel() {
            viewer = JmolViewer.allocateViewer(this, new SmarterJmolAdapter(), 
            null, null, null, null, null);
        }

        @Override
        public void paint(Graphics g) {
            getSize(currentSize);
            viewer.renderScreenImage(g, currentSize.width, currentSize.height);
        }
    }
} 
```

它在控制台中打印：

```
(C) 2012 Jmol Development
Jmol Version: 13.0.12  2013-01-23 21:55
java.vendor: Apple Inc.
java.version: 1.6.0_41
os.name: Mac OS X
Access: ALL
memory: 10.8/85.0
processors available: 4
useCommandThread: false

FileManager.getAtomSetCollectionFromFile(1644_____.pdb)
FileManager opening /Users/juliofdiaz/Dropbox/CF/1644_____.pdb
The Resolver thinks Pdb
openFile(1644_____.pdb): 119 ms
reading 2602 atoms
ModelSet: haveSymmetry:false haveUnitcells:false haveFractionalCoord:false
1 model in this collection. Use getProperty "modelInfo" or getProperty "auxiliaryInfo" to inspect them.
Default Van der Waals type for model set to Jmol
2602 atoms created
Time to autoBond: 58 ms
ModelSet: autobonding; use  autobond=false  to not generate bonds automatically
Jmol 13.0.12  2013-01-23 21:55 DSSP analysis for model 1.1 - null

W. Kabsch and C. Sander, Biopolymers, vol 22, 1983, pp 2577-2637

We thank Wolfgang Kabsch and Chris Sander for writing the DSSP software,
and we thank the CMBI for maintaining it to the extent that it was easy to
re-engineer for our purposes. At this point in time, we make no guarantee
that this code gives precisely the same analysis as the code available via license
from CMBI at http://swift.cmbi.ru.nl/gv/dssp

All bioshapes have been deleted and must be regenerated.

measurement[0] = [[MET]1.CB #3, [MET]1.C #4, 0.219 nm]
measurement[1] = [[MET]1.CA #2, [MET]1.C #4, 0.143 nm] 
```

我想在一个字符串数组中捕获该程序的所有输出（每个字符串项都是每一行）。我已经尝试为这个进程获取 BufferedReader，但是由于我对这个类缺乏好的经验，我不知道如何将当前运行时分配给进程。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:48:20.563

I would recommend to redirect the system output to a new one, use it, and restore the old one:

```
PrintStream systemOut = System.out;
ByteArrayOutputStream baos = new ByteArrayOutputStream();
PrintStream ps = new PrintStream(baos);
System.setOut(ps);
System.out.println("Test string");
String content = baos.toString("ISO-8859-1");  // A charset
System.setOut(systemOut);
System.out.println("Restored"); 
```

Note that this comment differs from the one of @yohlulz in that the toString() method decodes de data. The charset argument of toString is optional. The parameterless one will decode the output with the platform's default character. [ByteArrayOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html#toString%28%29)

# filepicker.io - 如何在 Filepicker.io 中隐藏某些服务（如 Facebook）？

> ID：15173094
> 
> 赞同：0
> 
> 时间：2013-03-02T09:51:44.113
> 
> 标签：filepicker.io

我正在构建一个商业应用程序，并且在文件对话框中使用 Facebook 等并不是很酷。我该如何隐藏它？我认为自定义 CSS 和“可见性：隐藏”样式可能是可能的，但服务没有单独的类名。唯一的其他方法是与第 n 个孩子一起，但这会非常混乱......

谢谢，格雷姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:15:08.400

您可以将其指定为选项：

```
filepicker.pick({services: ['DROPBOX','BOX',…]}, ....); 
```

[https://developers.filepicker.io/docs/web/#pick](https://developers.filepicker.io/docs/web/#pick)

或者：

```
<input type="filepicker" data-fp-services="BOX,COMPUTER"> 
```

[https://developers.filepicker.io/docs/web/#widgets-pick](https://developers.filepicker.io/docs/web/#widgets-pick)

# java - Spring 组件字段线程安全

> ID：15173097
> 
> 赞同：1
> 
> 时间：2013-03-02T09:51:56.500
> 
> 标签：java, spring

我正在开发一个网络浏览器游戏，我想问一下线程安全。假设我们有一个域类（数据库实体）用户和 MyBuilding：

```
class User
{
public String name;
List<Building> myBuildings = new ArrayList<Building>();
} 
```

和

```
class MyBuilding
{
public int buildingId;
public int level;
} 
```

现在，用户想要获得例如建筑物的健康点。我有另一个类，它存储有关那些构建规范的信息，不需要存储在数据库中，它们只是“构建规范”类，并在 Web 应用程序开始时从 xml 文件初始化。例如：

```
@Component
class BuildingSpecificationHolder
{
public List<BuildingSpecification> buildings = new ArrayList<BuildingSpecification>();
} 
```

// 下面的类不是 Spring 组件，只是一个简单的类

```
class BuildingSpecification
{
public int getHealthPointByBuildingLevel(MyBuilding usersBuilding)
{
return usersBuilding.getLevel() * 10;
} 
```

现在我的问题是：'public int getHealthPointByBuildingLevel(MyBuilding usersBuilding)' 线程安全吗？如果同时不同的用户想要获得建筑hp，他们都访问上述方法，即在NON-spring对象中。请注意，“BuildingSpecification”的所有方法都是只读的（用户永远不会更改建筑物属性），但是不同的用户将传递给这些方法不同的“MyBuilding”参数。只有拥有这些建筑规范的类才是 Spring 组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T12:16:41.467

如果一个程序不包含数据竞争，它就是线程安全的。如果一个内存位置被多个线程以访问顺序很重要的方式访问（例如，一个线程写入一个字段，另一个线程读取它），则会发生数据竞争。

换句话说，线程安全是关于协调多个线程对可变状态的访问。因此，如果您仅在初始化期间更改对象的状态，并且在对象可用于其他线程之前完成初始化，则该对象基本上是线程安全的。它的声音就像`BuildingSpecification`是这样一个物体。

方法参数，用于特定线程对方法的特定调用，仅由该线程访问，因此始终是线程安全的（当然，如果方法参数引用一个对象，则该对象可能被另一个线程访问，即使方法参数不是）。从技术上讲，方法参数存储在线程的堆栈上，而不是所有线程共享的堆上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:59:41.917

从技术上讲，`getHealthPointByBuildingLevel`它不是线程安全的。尽管 Spring 初始化在启动时发生在单个线程中，但您仍然可能在另一个线程中看到未初始化的值。不过，这不太可能。

由于您没有更改这些规范类，因此最简单的方法是使它们不可变：

```
class MyBuilding
{
public final int buildingId;
public final int level;

// constructor which initializes all fields
} 
```

# mysql - 替换 SQL db 中同一自定义字段中的多个字符串值

> ID：15173098
> 
> 赞同：0
> 
> 时间：2013-03-02T09:51:57.537
> 
> 标签：mysql, wordpress

我有一个名为“variations”的自定义字段，里面有颜色（逗号分隔），如“黑色、红色、蓝色”。我需要每天通过 cron 作业将颜色替换为另一种语言。对于一个单一的颜色变化，这可以将黑色变为黑色：

```
UPDATE `wp_postmeta` 
SET `meta_value` = replace(meta_value, 'Black', 'Noir')
WHERE `meta_key` LIKE 'variations' 
```

一切都很好，但我想在同一个查询中替换不止一种颜色。我不希望有 20 个类似的查询来涵盖所有 20 种可能的颜色变化。

这样的事情可能吗？

```
UPDATE `wp_postmeta` 
SET `meta_value` = replace(meta_value, 'Black', 'Noir'), (meta_value, 'Green', 'Vert') 
WHERE `meta_key` LIKE 'variations' 
```

我没有测试系统，也不想弄乱我的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:54:41.207

您可以轻松地做到这一点，使用您上次返回的 REPLACE 到一个新的 REPLACE

```
UPDATE `wp_postmeta` 
 SET `meta_value` = REPLACE(
                        REPLACE(
                            REPLACE(  meta_value, 
                                      'Black', 
                                      'Noir'
                            ), 
                            'Geen', 
                            'Vert'),
                        'Blue',
                        'Blu')
 WHERE `meta_key` LIKE 'variations' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:02:19.550

为了让您对`UPDATE`查询可能执行的操作充满信心，几乎总是有一个`SELECT`可以形成的，您可以看到您将使用它生成的数据。在这种情况下，您可以这样做：

```
SELECT meta_value, REPLACE(
                        REPLACE(  meta_value, 
                                  'Black', 
                                  'Noir'
                        ), 
                        'Geen', 
                        'Vert')
FROM wp_postmeta WHERE meta_key LIKE variations; 
```

# java - android中XML解析中的空白字符串

> ID：15173100
> 
> 赞同：0
> 
> 时间：2013-03-02T09:52:07.940
> 
> 标签：java, android, xml-parsing

我正在尝试制作一个 XML 解析器。但是，以下代码仅给出空白输出。getElementValue() 函数中的“heyya”消息被打印出来，它告诉我们返回了空字符串。请帮忙。

```
import java.io.IOException;
import java.io.StringReader;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class XMLParser {
        public Document getDomElement(String xml)
    {
        Document doc=null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try{

            DocumentBuilder db = dbf.newDocumentBuilder();
            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);

        }catch (ParserConfigurationException e){
            System.out.println(e.getMessage());
            return null;
        } catch(SAXException e){
            System.out.println(e.getMessage());
            return null;
        } catch(IOException e){
            System.out.println(e.getMessage());
            return null;
        }

        return doc;
    }

    public String getValue(Element item, String str)
    {
        NodeList n = item.getElementsByTagName(str);
        return this.getElementValue(n.item(0));
    }

    public final String getElementValue(Node elem)
    {
        Node child;
        if(elem!=null){
            if(elem.hasChildNodes()){
                for(child=elem.getFirstChild(); child!=null; child = child.getNextSibling()){
                    if(child.getNodeType() == Node.TEXT_NODE){
                        return child.getNodeValue();
                    }
                }

            }

        }
        //System.out.println("heyya");
        return "";
    }
}

class createData
{
    static final String KEY_ID = "id";   //parent node
    static final String KEY_NAME = "name";
    static final String KEY_COST = "cost";
    static final String KEY_DESC = "description";

    public void createArrayList()
    {

        //ArrayList<HashMap<String, String>> userData = new ArrayList<HashMap<String, String>>();
        XMLParser parser = new XMLParser();
        //obtain xml as string here
        String xml="<menu>\n\t<item>\n\t\t<id>1</id>\n\t\t<name>Margherita</name>\n\t\t<cost>155</cost>\n\t\t<description>Single cheese topping</description>\n\t</item></menu>\n";
        Document doc = parser.getDomElement(xml);
        NodeList node_L = doc.getElementsByTagName(KEY_ID);

        for(int i=0; i<node_L.getLength(); i++)
        {
            //HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element)node_L.item(i);
            String name = parser.getValue(e, KEY_NAME);
            String cost = parser.getValue(e, KEY_COST);
            String description = parser.getValue(e, KEY_DESC);
            System.out.println(name+" "+cost+" "+description);
            //map.put(KEY_NAME, name);
            //map.put(KEY_COST, cost);
            //map.put(KEY_DESC, description);
            //userData.add(map);
        }
        System.out.println("hello pop!");
        //System.out.println(userData.get(0));
    }

    public static void main(String args[])throws IOException
    {
        createData ob =new createData();
        ob.createArrayList();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:09:39.970

这就是问题。

```
NodeList node_L = doc.getElementsByTagName(KEY_ID); 
```

你到了`id`这里，但`id`只是你的`item`. 用这个替换它： -

```
NodeList node_L = doc.getElementsByTagName("item"); 
```

**注意：-**您的父节点是`ITEM`而不是`ID`.

您可以`ID`像获得其他标签一样获得您的标签。

```
String id = parser.getValue(e, KEY_ID); 
```

# html - 将 HTML 表格单元格浮动/定位到与前一个单元格重叠的右侧

> ID：15173102
> 
> 赞同：2
> 
> 时间：2013-03-02T09:52:18.387
> 
> 标签：html, css

请看一下[http://jsfiddle.net/3kV3Z/](http://jsfiddle.net/3kV3Z/)

在每个表格行悬停时，会出现编辑和删除按钮。现在他们有自己的专用牢房，即使不可见也能占据空间。我想要的是让他们出现在表格行上。如果它们出现时与表格行的内容重叠，那很好。我想要一个类似于 css {position:fixed; 右：0px}

谢谢

```
<table class='t'>
    <tr><td>Name 1</td><td>10</td><td class='actions'><button>Edit</button><button>Delete</button></td></tr>
    <tr><td>Name 2</td><td>20</td><td class='actions'><button>Edit</button><button>Delete</button></td></tr>
    <tr><td>Name 3</td><td>30</td><td class='actions'><button>Edit</button><button>Delete</button></td></tr>
    <tr><td>Name 4</td><td>40</td><td class='actions'><button>Edit</button><button>Delete</button></td></tr>
    <tr><td>Name 5</td><td>50</td><td class='actions'><button>Edit</button><button>Delete</button></td></tr>
    <tr><td>Name 6</td><td>60</td><td class='actions'><button>Edit</button><button>Delete</button></td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:51:33.220

找到了一种方法来做到这一点。 [http://jsfiddle.net/L2n7M/](http://jsfiddle.net/L2n7M/)

```
.t tr td.actions  {visibility:hidden;position:absolute;margin-left:-70px}
.t tr:hover td.actions  {visibility:visible} 
```

如果有人知道更好的主意，请告诉我。谢谢阿伦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:58:08.210

抱歉不喜欢表格 :) 但试试这个：[jsfiddle](http://jsfiddle.net/Snippet/R2Hsd/)

```
<div class="wrapper">
    <div class="row">
         <span>
             Name 1
        </span>
        <span>
            10
        </span> 
        <span class='actions'>
            <button>Edit</button><button>Delete</button>
        </span>  
        <span>
            Some Text here
        </span> 
    </div>
      <div class="row">
         <span>
             Name 2
        </span>
        <span>
            20
        </span> 
          <span class='actions'>
            <button>Edit</button><button>Delete</button>
        </span> 
          <span>
            The quick Brown fox jump over the lazy dog
        </span> 
    </div>
</div> 
```

# amazon-ec2 - akka (2.0.5) microkernel 在亚马逊 ec2 上因未知原因无法熬夜

> ID：15173103
> 
> 赞同：0
> 
> 时间：2013-03-02T09:52:22.637
> 
> 标签：amazon-ec2, amazon, akka

我最近遇到了一个问题，即使是一个简单的 akka 微内核模型应用程序。它不能在亚马逊 ec2 上熬夜。这是日志

* * *

```
Starting Akka...
Running Akka 2.0.5
Deploying file:/data/akka-scala/akka-2.0.5/deploy/catchif2_2.9.2-0.1-SNAPSHOT.jar
[DEBUG] [03/02/2013 09:35:32.626] [main] [EventStream] StandardOutLogger started
[DEBUG] [03/02/2013 09:35:33.415] [main] [EventStream(akka://hellokernel)] logger log1-Slf4jEventHandler started
[DEBUG] [03/02/2013 09:35:33.416] [main] [EventStream(akka://hellokernel)] Default Loggers started
Starting up com.catchif.HelloKernel
Successfully started Akka

Shutting down Akka...
Shutting down com.catchif.HelloKernel
Received message 'HELLO world!'
Successfully shut down Akka 
```

* * *

基本上它会立即自动启动和关闭。

我在我的 Mac 上运行相同的代码。它保持完美。除此以外，日志中没有其他信息：

```
03/02 09:35:33 INFO [hellokernel-akka.actor.default-dispatcher-4] a.e.s.Slf4jEventHandler - Slf4jEventHandler started
03/02 09:35:33 DEBUG[hellokernel-akka.actor.default-dispatcher-3] a.e.EventStream - logger log1-Slf4jEventHandler started
03/02 09:35:33 DEBUG[hellokernel-akka.actor.default-dispatcher-3] a.e.EventStream - Default Loggers started 
```

代码也很简单。

* * *

```
import akka.actor.{ Actor, ActorSystem, Props }
import akka.kernel.Bootable

case object Start

class HelloActor extends Actor {
  val worldActor = context.actorOf(Props[WorldActor])

  def receive = {
    case Start ⇒ worldActor ! "Hello"
    case message: String ⇒
      println("Received message '%s'" format message)
  }
}

class WorldActor extends Actor {
  def receive = {
    case message: String ⇒ sender ! (message.toUpperCase + " world!")
  }
}

class HelloKernel extends Bootable {
  val system = ActorSystem("hellokernel")

  def startup = {
    system.actorOf(Props[HelloActor]) ! Start
  }

  def shutdown = {
    system.shutdown()
  }
} 
```

* * *

不知道为什么会这样。我确实看到它在亚马逊上停留了一次，但后来一直失败。

在此先感谢，最好的，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:06:16.580

试试这个，告诉我会发生什么：

```
class HelloKernel extends App {
  val system = ActorSystem("hellokernel")
  system.actorOf(Props[HelloActor]) ! Start
} 
```

这是一个极简的实现，应该保持 bash shell 直到你按下 ctrl-c。如果可行，那么我会说您对 Bootable 类的扩展有些问题（您缺少的东西）。

# animation - iOS中图像列表的触摸滚动动画

> ID：15173104
> 
> 赞同：1
> 
> 时间：2013-03-02T09:52:31.460
> 
> 标签：animation, ios6, uiscrollview, uiimageview, uianimation

![在此处输入图像描述](../Images/f2b52de79ebf41551a6a8e1a2b8d5bbc.png)我的要求是以水平方式显示图像列表。当我触摸图像时，它被移到一边，下一个图像出现在前面。这样我需要并排移动图像。那么有什么方法可以滚动图像列表？或者我可以选择任何类型的动画吗？

以这种方式放置和移动图像。请建议我如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:47:56.747

我解决了这个问题。我在这个链接中找到了示例。[http://code4app.net/category/scrollview](http://code4app.net/category/scrollview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:55:17.527

我已经创建了一个覆盖流的工作模块......

尝试在允许 3D 转换的图层上使用....

```
-(void) rotateView3D:(UIView *)myView:(CGFloat)angle
{

    CATransform3D affinAndScaleTransform;
    if (angle==30.0f||angle==-30.0f)
    {
        affinAndScaleTransform = CATransform3DMakeAffineTransform(CGAffineTransformMakeScale(0.9f, 0.9f));
    }
    else
    {
        affinAndScaleTransform = CATransform3DMakeAffineTransform(CGAffineTransformMakeScale(1.0f, 1.0f));
    }
    CALayer *layer = myView.layer;

//    layer.borderColor = [[UIColor blackColor] CGColor];
//    layer.borderWidth = 2.0f;
    CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;

    rotationAndPerspectiveTransform.m34 = 1.0 / -500;
    rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, angle * M_PI / 180.0f, 0.0f, 1.0f, 0.0f);
    [layer setTransform:CATransform3DConcat(rotationAndPerspectiveTransform, affinAndScaleTransform)];
} 
```

滚动视图添加手势.......

对于左手势使用这样的一些东西........

```
{
    UIView * view0 = [self.view viewWithTag:-1111];
    UIView * view1 = [self.view viewWithTag:1111];
    UIView * view2 = [self.view viewWithTag:2222];
    UIView * view3 = [self.view viewWithTag:3333];
    UIView * view4 = [self.view viewWithTag:4444];

    [view4 setFrame:self.rect0];

    int preViewNo = self.leftProduct-1;
    if (preViewNo<0)preViewNo=self.productArray.count-1;

    [UIView animateWithDuration:0.4 animations:^
     {
         [view0 setFrame:self.rect1];
         [self rotateView3D:view0 : 30.0f];

         [view1 setFrame:self.rect2];
         [self rotateView3D:view1 : 0.0f];

         [view2 setFrame:self.rect3];
         [self rotateView3D:view2 : -30.0f];

         [view3 setFrame:self.rect4];
         [self rotateView3D:view4 : 0.0f];

     }];

    [self setdescriptionView:view0 :[self.productArray objectAtIndex:preViewNo]];

    [view0 setTag:1111];
    [view1 setTag:2222];
    [view2 setTag:3333];
    [view3 setTag:4444];
    [view4 setTag:-1111];

    self.currentProduct--;
    self.rightProduct--;
    self.leftProduct--;
    if (self.currentProduct < 0) self.currentProduct=self.productArray.count-1;
    if (self.rightProduct < 0) self.rightProduct=self.productArray.count-1;
    if (self.leftProduct < 0) self.leftProduct=self.productArray.count-1;

} 
```

在正确的手势识别器上使用这样的东西.......

```
{
    UIView * view0 = [self.view viewWithTag:-1111];
    UIView * view1 = [self.view viewWithTag:1111];
    UIView * view2 = [self.view viewWithTag:2222];
    UIView * view3 = [self.view viewWithTag:3333];
    UIView * view4 = [self.view viewWithTag:4444];

    [view0 setFrame:self.rect4];

    int nextViewNo = self.rightProduct+1;
    if (nextViewNo>=self.productArray.count)nextViewNo=0;

    [UIView animateWithDuration:0.4 animations:^
     {
         [view4 setFrame:self.rect3];
         [self rotateView3D:view4 : -30.0f];

         [view3 setFrame:self.rect2];
         [self rotateView3D:view3 : 0.0f];

         [view2 setFrame:self.rect1];
         [self rotateView3D:view2 : 30.0f];

         [view1 setFrame:self.rect0];
         [self rotateView3D:view1 : 0.0f];

     }];

    [self setdescriptionView:view4 :[self.productArray objectAtIndex:nextViewNo]];

    [view0 setTag:4444];
    [view1 setTag:-1111];
    [view2 setTag:1111];
    [view3 setTag:2222];
    [view4 setTag:3333];

    self.currentProduct++;
    self.rightProduct++;
    self.leftProduct++;
    if (self.currentProduct >= self.productArray.count) self.currentProduct=0;
    if (self.rightProduct >= self.productArray.count) self.rightProduct=0;
    if (self.leftProduct >= self.productArray.count) self.leftProduct=0;
} 
```

由于某些技术原因，我必须制作自定义封面流......

你也可以试试这个.....

[发情的](http://code4app.net/ios/iCarousel-for-Cover-Flow/4f87d2db06f6e79d32000000)

# javascript - 使用 1 个单一代码在所有网页上放置社交按钮

> ID：15173106
> 
> 赞同：0
> 
> 时间：2013-03-02T09:52:50.990
> 
> 标签：javascript, html, facebook, twitter

[jsfidllide](http://jsfiddle.net/E2u3b/1/)

我正在尝试通过 socialite.js 获得社交按钮的延迟加载效果。一切都很好，但 +1、点赞、推文计数器适用于 socialite.com，而不是我的网站。例如，这段代码给 socialite.com 一个“赞”：

```
<li>
  <a href="http://www.facebook.com/sharer.php?u=http://www.socialitejs.com&amp;t=Socialite.js"
     class="socialite facebook-like" data-href="http://socialitejs.com" data-send="false"
     data-layout="box_count" data-width="60" data-show-faces="false" rel="nofollow"
     target="_blank"><span class="vhidden">Share on Facebook</span></a>
</li> 
```

我希望它用于我的页面。为每个不同的页面手动将[http://socialitejs.com更改为 mywebsite.com 太烦人了。](http://socialitejs.com)

我相信有一个技巧可以用 javascript 执行此操作并替换`href`为`expr:share_url='data:post.url'`，但是这不起作用，因为代码除了 . 之外还有许多其他属性`href`。谁能帮助我。万分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:58:03.697

当您添加将在其中调用 socialite.js 的元素时：

```
<a class="socialite twitter-share" href="http://twitter.com/share" data-url="http://socialitejs.com">
    Share on Twitter
</a> 
```

您应该替换`data-url`您网站 URL 的值。然后生成的元素将指向您的网站。

如果您错误地已经在许多地方包含了错误的 URL - 并且觉得用 JavaScript 更正它而不是在一堆文件中进行搜索和替换更容易 - 那么我建议在调用**之前**`Socialite.load()`运行这个 jQuery 行：

```
$('[data-url]').attr('data-url', 'mywebsite.com'); 
```

# c++ - 模板化放置 new 和析构函数

> ID：15173112
> 
> 赞同：4
> 
> 时间：2013-03-02T09:53:27.443
> 
> 标签：c++, templates, constructor, destructor, placement-new

为什么不编译？

```
template <typename T>
class Pool{

    char Buff[sizeof(T)*256];

public:

    Pool(){
        T* item = reinterpret_cast<T*>(&Buff[0]);
        for(int i =0 ; i<256;i++)
            item[i] = new(&item[i]) T();
    }

    ~Pool(){
        T* item = reinterpret_cast<T*>(&Buff[0]);
        for(int i =0 ; i<256;i++)
            item[i] -> ~ T();   
    }

    void reset(unsigned int i){
        T* item = reinterpret_cast<T*>(&Buff[0]);
        item[i]->~T();
        item[i]->T();
    }
} 
```

我显然想要实现的是在原始内存数组上调用placement new（应该调用构造函数ok）。然后我想调用数组中项目的析构函数和构造函数。问题是 Item 是模板，所以如果我使用

```
Pool<FooBar> 
```

编译器期望找到“FooBar()”和“~FooBar()”而不是“T()”和“~T()”。有什么特殊的语法可以做到这一点吗？

我使用的是**C++03**而不是 C++11

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T10:00:22.253

你的语法不太正确。以下应该可以解决问题：

```
Pool() {
    T* item = reinterpret_cast<T*>(&Buff[0]);
    for(int i = 0; i < 256; i++)
        new(&item[i]) T();
}

~Pool() {
    T* item = reinterpret_cast<T*>(&Buff[0]);
    for (int i = 0; i < 256; i++)
        item[i].~T();
}

void reset(unsigned int i) {
    T* item = reinterpret_cast<T*>(&Buff[0]);
    item[i].~T();
    new(&item[i]) T();
} 
```

# codeigniter - 如何使用数据库存储的会话 ID 验证当前用户会话 ID？

> ID：15173115
> 
> 赞同：0
> 
> 时间：2013-03-02T09:53:45.327
> 
> 标签：codeigniter, session

我发现 Code Igniter 已经有 ci_sessions 表，其中存储了用户会话 ID。我了解该表的主要目的。只是我想澄清一下如何使用当前用户登录会话 ID 验证 ci_session 表数据？

基本上，我正在尝试一次用户登录一个地方。防止多次登录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:40:40.167

您无法使用会话 ID 执行此操作，因为从另一个位置登录会在该新位置创建一个新的会话 ID。

将用户 ID 存储到会话中，然后在登录时检查它。

```
$this->db->where('userId',$userId);
$result = $this->db->get('ci_session');
if($result->num_rows() > 0)
{
    //log out old user, throw error, whatever
} else {
    //continue with login
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T14:51:11.457

通过将用户 ID 存储在会话数据中并将其作为列添加到会话表中，您可以在创建会话数据之前在登录时删除该用户 ID 的所有会话。这将使同一用户的任何会话无效。有关如何执行此操作的进一步说明，请参见此处：[https ://stackoverflow.com/a/9564433/89211](https://stackoverflow.com/a/9564433/89211)

# android - Eclipse上烦人的自动文件复制

> ID：15173117
> 
> 赞同：0
> 
> 时间：2013-03-02T09:54:01.487
> 
> 标签：android, eclipse

当我正在开发一个 Android 项目时，有时源文件会自我复制，例如`ActivityMain.java Activitymain(2).java`

似乎 ActivityMain.java 旧版本和`ActivityMain(2).java`当前版本。

有没有办法解决这个问题？

# c# - 插件架构 - 如何在另一个 AppDomain 中的插件之间进行通信？

> ID：15173118
> 
> 赞同：1
> 
> 时间：2013-03-02T09:54:08.353
> 
> 标签：c#, plugins

我有插件之间的通信问题。每个插件都加载到单独的 AppDomain 中。我还想知道一些关于插件的信息（名称、版本、..）。

我使用[本教程](http://denisvuyka.wordpress.com/2007/10/17/make-a-really-dynamic-plugin-using-multiple-application-domains/#comment-681)创建了我的应用程序。

在教程中是方法，`raiseEvent()`但当我调用它时没有任何反应。我想获取新 appDomain 中的插件名称，并且教程中的事件不起作用。

我找到了很多文章，但没有什么对我有用。

主应用调用插件管理器：

```
 public static void Main(string[] args)
    {
        //Using block will make sure that the cleanup code of PluginHost is executed
        using (PluginHost host = new PluginHost())
        {
            host.PluginChange += new PluginEventHandler(host_PluginChange);
            host.RunPlugin(@"C:\Plugins2\WindowsFormsApplication1.dll");
            Console.ReadKey();
        }
    }

    static void host_PluginChange(string message)
    {
        Console.WriteLine(message);
    } 
```

源示例事件：

```
 event PluginEventHandler _pluginEvent;
    public event PluginEventHandler PluginChange
    {
        add { _pluginEvent += value; }
        remove { _pluginEvent -= value; }
    } 
```

事件调用：

```
 private void RaiseEvent(string message)
    {
        if (_pluginEvent != null)
            _pluginEvent(message);
    } 
```

创建 appDomain ant 的方法调用 Launch 方法，其中事件为：

```
 public void RunPlugin(string path)
    {
        //Creating the appdomain manager
        AppDomainManager manager = new AppDomainManager();
        //Check if there is any *.dll.config file
        string configFileName = string.Format("{0}.config", path);
        AppDomainSetup setup = new AppDomainSetup();
        //Enable shadow copying, so the Plugin files are not locked
        setup.ShadowCopyFiles = "true";
        setup.LoaderOptimization = LoaderOptimization.MultiDomain;
        //if the config file exists, load it into the appdomain
        if (File.Exists(configFileName))
            setup.ConfigurationFile = configFileName;
        //Creating the AppDomain & adding a reference to it in the _appDomains collection.
        AppDomain domain = manager.CreateDomain(String.Format("AD-{0}", _appDomains.Count), null, setup);
        _appDomains.Add(domain);
        /*
         * This important.
         * Here we are initiating an instance of PluginHost inside the new AppDomain.
         * this instance will give us control from the host appdomain to load & run the plugins inside the new appdomain
         */
        PluginHost remoteHost = domain.CreateInstanceAndUnwrap(Assembly.GetAssembly(typeof(PluginHost)).FullName, typeof(PluginHost).ToString()) as PluginHost;
        RaiseEvent(String.Format("Hello from domain {0}", domain.FriendlyName));

        // Here we run every plugin in a separate thread
        ThreadPool.QueueUserWorkItem(
            delegate(object state)
            {
                try
                {
                    //calling the PluginHost object created in the other appdomain.
                    remoteHost.Launch(path, domain);
                }
                catch (Exception ex)
                {
                    _appDomains.Remove(domain);
                    AppDomain.Unload(domain);
                }
            });
    } 
```

调用事件的方法：(raiseEvent)

```
 void Launch(string assemblyPath, AppDomain domain)
    {
        //Loading the assembly file into the appdomain
        Assembly pluginAssembly = domain.Load(AssemblyName.GetAssemblyName(assemblyPath));
        domain.AssemblyResolve += delegate(object sender, ResolveEventArgs args)
        {
            AppDomain d = sender as AppDomain;
            string path = Path.Combine(@"C:\Plugins\References", args.Name.Split(',')[0] + ".dll");
            return d.Load(path);
        };

        RaiseEvent(String.Format("Hello from domain {0}", domain.FriendlyName));
        //Searching for Plugin types inside the loaded assembly
        foreach (Type type in pluginAssembly.GetTypes())
        {
            if (!type.IsClass) continue;

            if (type.FindInterfaces(delegate(Type t, object filter) { return t == filter as Type; }, typeof(IPlugin)).Length > 0)
            {
                //Using block will make sure that the plugins will run cleanup code after execution
                using (IPlugin plugin = pluginAssembly.CreateInstance(type.ToString()) as IPlugin)
                {
                    plugin.Run("Here we place some params for the external plugin");
                }
            }
        }
    } 
```

# ruby-on-rails - Paperclip-dropbox gem 不允许访问

> ID：15173119
> 
> 赞同：0
> 
> 时间：2013-03-02T09:54:38.690
> 
> 标签：ruby-on-rails, file-upload, paperclip, dropbox

我的 Rails 应用程序配置为使用 app_folder 访问权限，但是当我尝试在开发中上传文件时，Rails 向我抛出此错误：

```
 Host: rpc.dropbox.com:443, FE: None, X-Dropbox-RequestId: None, X-Dropbox-App-Error:         None, Full Dropbox access attempt failed because this app is not configured to have full   Dropbox access.  Should your access type be app folder ('sandbox') instead? 
```

起初我想也许我输入了错误的值。我的变量如下所示：

```
 DROPBOX_ACCESS_TYPE: app_folder 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T03:40:07.533

宝石的创建者 Janko 通过告诉我更新宝石解决了这个问题

# sql - 在 SQL Server 2012 中注册 CLR 函数（基于 WCF）

> ID：15173120
> 
> 赞同：7
> 
> 时间：2013-03-02T09:54:39.423
> 
> 标签：sql, wcf, sql-server-2012, .net-assembly, sqlclr

我有一个基于 CLR 的存储过程，用于`MsmqIntegrationBinding`将消息发布到远程 MSMQ。在 SQL Server 2005 中一切正常，但现在假设从 2005 升级到 2012。我尝试在 SQL Server 2012 中注册 CLR (SP)，但在注册`System.ServiceModell.DLL`时出现以下错误。

> *消息 6544，级别 16，状态 1，第 1 行为
> 程序集“System.ServiceModel”创建程序集失败，因为程序集“microsoft.visualbasic.activities.compiler”格式错误或不是纯 .NET 程序集。无法验证的 PE 标头/本机存根。*

我搜索了解决方案，似乎很少有人遇到同样的问题，到目前为止还没有解决方案。

使用的主要原因`MSMQIntegrationBinding`是我们希望确保每条消息只传递一次。`ExactlyOnce`如您所见，我对普通 system.messaging 类中不存在的属性非常感兴趣。我们处理数千条消息，消息的排序非常重要，而且每条消息都带有一个 id 标记，如果发送的任何消息的 id 小于先前发送的消息，客户端系统就会停止（大问题）。

我还使用 system.messaging 重写了 CLR 存储过程。我只需要建议它是否可以支持我上面提到的场景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-16T07:30:44.147

我和你有同样的问题，不知道有没有解决办法。我发现的是：

> 有两种类型的 .NET 程序集。纯 .NET 程序集仅包含 MSIL 指令。混合程序集包含非托管机器指令和 MSIL 指令。混合程序集通常由带有 /clr 开关的 C++ 编译器编译，但包含由本机 C++ 代码生成的机器指令。
> 
> 无论是哪个版本的 SQL Server，CREATE ASSEMBLY 都只允许注册纯 .NET 程序集。SQL Server 一直要求使用 CREATE ASSEMBLY 将程序集加载到 SQL Server 数据库中仅包含 MSIL 指令（纯程序集）。如果要注册的程序集是混合程序集，CREATE ASSEMBLY 将引发上述错误。

来自[http://blogs.msdn.com/b/psssql/archive/2013/02/23/unable-to-register-net-framework-assembly-not-in-the-supported-list.aspx](http://blogs.msdn.com/b/psssql/archive/2013/02/23/unable-to-register-net-framework-assembly-not-in-the-supported-list.aspx)

关键是我们确实需要参考`System.ServiceModel`。

所以，我的猜测是，在不久的将来，它没有解决办法。我们要做的是以另一种方式编写代码。

# asp.net - 当它们实际上相同时，为什么只有一个连接字符串起作用？

> ID：15173122
> 
> 赞同：1
> 
> 时间：2013-03-02T09:54:51.657
> 
> 标签：asp.net, sql-server-2005, connection-string

我有 2 个相同的连接字符串。一个用于 ASP.NET 成员资格等，另一个用于其他所有内容。

我可以登录到我的应用程序，因此以下连接字符串显然有效。

```
<add name="ApplicationServices" connectionString="Data Source=SBS;Initial Catalog=CustomerIntranet;Integrated Security=True;"
      providerName="System.Data.SqlClient" /> 
```

一旦我尝试访问安全页面（基于角色的访问），我就会感到害怕：

```
System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

这是其他连接字符串：

```
<add name="CustomerIntranetConnectionString" connectionString="Data Source=SBS;Initial Catalog=CustomerIntranet;Integrated Security=True;"
  providerName="System.Data.SqlClient" /> 
```

*   我通过远程桌面连接连接到服务器。
*   我正在通过该服务器上的浏览器运行该应用程序
*   SQL 服务器 (SQLSERVER 2005) 已配置为远程访问
*   我可以登录
*   ASP.NET Membership 和其他数据库的东西都位于同一个数据库中
*   该应用程序部署在 IIS 6.0 上
*   该应用程序在我的机器上运行良好（IIS 7.0）

如果有人能对这个问题有所了解，那就太棒了。我玩过连接字符串，但成功率为零。

重申一下，我可以登录，所以我显然建立了与数据库的连接。一旦我点击安全页面，我就会收到错误消息。

谢谢。

PS这是堆栈

```
[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5009598
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +270
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +123
   System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior) +166
   System.Data.Common.DbDataAdapter.Fill(DataTable dataTable) +115
   DataAccess.IntranetTableAdapters.employeeTableAdapter.GetEmployeeByUserID(Nullable`1 id) +377
   BusinessClasses.GlobalOperations.getEmployeeByUserID(Guid id) +96
   Customer.EmployeeTimesheet.prepareComponents() +327
   Customer.EmployeeTimesheet.Page_Load(Object sender, EventArgs e) +179
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

这是完整的配置文件：

```
<?xml version="1.0"?>

<configuration>
  <connectionStrings>
    <add name="ApplicationServices" connectionString="Data Source=SBS;Initial Catalog=CustomerIntranet;Integrated Security=True;"
      providerName="System.Data.SqlClient" />
    <add name="IntranetConnectionString" connectionString="Data Source=SBS;Initial Catalog=CustomerIntranet;Integrated Security=True;"
      providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="8192" executionTimeout="360"/>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="true" defaultProvider="MyRoleProvider">
      <providers>
        <clear/>
        <add name="MyRoleProvider" type="BusinessClasses.MyRoleProvider, BusinessClasses"  />
      </providers>
    </roleManager>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:36:29.997

这个连接字符串实际上是将控制权传递给系统

`Data Source=SBS;Initial Catalog=CustomerIntranet;Integrated Security=True;`

所谓控制，是指系统和数据库一起检查他是否允许连接到数据库。这就是适用于一种情况而不适用于另一种情况的原因。

我的建议是，首先在 localhost 上使用`Data Source=localhost`，除非您连接到另一台计算机，然后确保在`host`您的服务器文件中正确配置了计算机的名称，或者直接使用 IP。

其次打开数据库管理并确保目录存在，并且尝试连接的池有权读取该目录。此外，数据库的文件必须具有池的权限。

池在用户帐户或系统帐户下运行。该帐户必须具有读取/写入该数据库的权限，无论是在数据库的文件上还是在数据库的首选项上。此外，该用户必须在数据库的大列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T00:29:29.137

我发现了这个问题的问题所在。让我首先添加一些与该问题相关的更多信息。

我正在使用具有典型 DataAccess、DataClasses（类型化数据集、xsd 文件）、业务和表示层的 n 层架构。

解决方案范围内的搜索`connectionString`显示了多个硬编码的连接字符串（由 VS 提供），这些连接字符串未被 web.config 覆盖。这些显然是在设置 DataSet 设计器期间创建的。

部署应用程序时，web.config connectionStrings 反映了生产服务器，但硬编码字符串仍然引用我的开发服务器。

我有限的理解是 web.config 应该覆盖应用程序中其他地方定义的任何其他连接字符串，如果它们具有相同的名称。似乎情况并非如此。比我聪明的人可能会详细说明这一点。

简而言之，如果您像我一样遇到任何奇怪的问题，请在解决方案范围内搜索任何其他连接字符串。它们可能在您不知情的情况下存在，并且可能导致冲突。

# mysql - 跨几个服务器同步数据

> ID：15173123
> 
> 赞同：-1
> 
> 时间：2013-03-02T09:54:56.827
> 
> 标签：mysql, sql, sql-server, database, data-synchronization

我有一个简单但棘手的问题——据我所知，Facebook、谷歌等出于显而易见的原因拥有不止一台服务器——保持 100% 的正常运行时间、负载分配等等。

我的问题是他们如何同步每台服务器后面的 sql/nosql 表上的数据。换句话说，我需要寻找什么才能了解​​他们如何进行数据同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:58:31.813

对于较小的应用程序，数据在节点之间复制（多个数据库系统的内置功能），以便相同的副本存在于多个地方。

较大的系统要么被分片，因此不同的数据存在于不同的地方，要么被聚集在一起。

[http://www.highscalability.com](http://www.highscalability.com)是了解运行和扩展大型 Web 应用程序问题的好资源

# activerecord - 在 Yii 中一起在控制器中保存和更新

> ID：15173128
> 
> 赞同：1
> 
> 时间：2013-03-02T09:55:50.640
> 
> 标签：activerecord, model, yii, controller

我的数据库中有两个表，用户和个人资料。Profile 有 user_id 作为主键。每个用户只能拥有一个配置文件。当我上传图像文件时，它的名称与该 user_id 一起存储在配置文件表中。当 profile 表中还有其他字段需要更新时，我首先检查是否已经存在具有该 user_id 的记录。在我的个人资料模型中，我写了

```
public function checkForSaveOrUpdate()
{
    return self::model()->findByAttributes(array('user_id'=>Yii::app()->user->id));
} 
```

我的控制器文件看起来像这样

```
 public function actionCreateInfo()
      {
        $profile = new Profile;
        $profile->user_id = Yii::app()->user->id;

        if(isset($_POST['Profile']))
        {
            if($profile->checkForSaveOrUpdate() === null)
            {
                $profile->attributes = $_POST['Profile'];
                if($profile->save())
                    Yii::app()->user->setFlash('success','Profile has been saved successfully');
            }
            elseif($profile = $profile->checkForSaveOrUpdate())
            {
                $profile->attributes = $_POST['Profile'];
                if($profile->update())
                    Yii::app()->user->setFlash('success','Profile has been updated successfully');
            }

            $this->redirect(array('index'));
        }

        $this->render('createInfo',array('profile'=>$profile));
} 
```

我的问题是当我已经在数据库中，在配置文件中有一条记录，并且我提交了一个新表单时，旧数据全部被删除，只有当前提交的值被更新，而它应该保留旧值并且只更新新值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:01:06.737

如果您将模型设置为：

```
$model = new YourModel; 
```

您将`$model->isNewRecord`设置为`true`：

```
var_dump($model->isNewRecord); // true, in this case you use $model->save() 
```

当您找到一条记录时，相同的属性将具有相反的值：

```
$model = YourModel::model()->findByPk(1);
var_dump($model->isNewRecord); // false - and now you use $model->update(), instead. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:27:34.583

将您的功能更改为静态功能

```
 public static function checkForSaveOrUpdate()
    {
        return self::model()->findByAttributes(array('user_id'=>Yii::app()->user->id));
    } 
```

然后将动作修改为

```
public function actionCreateInfo()
{
        $profile = Profile::checkForSaveOrUpdate();
        if($profile===null)
        {
            $profile=new Profile;
            $profile->user_id = Yii::app()->user->id;
        }
        if(isset($_POST['Profile']))
        {
            $profile->attributes = $_POST['Profile'];
            if($profile->save())
                Yii::app()->user->setFlash('success','Profile has been saved successfully');
           $this->redirect(array('index'));
        }

        $this->render('createInfo',array('profile'=>$profile));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T15:50:34.040

您的`POST`数据可能包括所有模型属性，包括那些由用户设置为空字符串的留空；除非模型规则中另有说明，否则空字符串是大规模分配的可接受值；一个巨大的任务是你实际做的`$profile->attributes = $_POST['Profile'];`。

一种解决方案是在控制器中取消设置您不想更新的那些属性，例如那些包含空字符串的属性。

但是这种规则应该在模型中定义并通过调用`validate()`方法来触发，你现在通过调用`update()`. 你最好打电话`save()`，因为内部电话`validate()`而不是`update()`.

默认值的规则定义如下：

```
array(
    'attr_name',
    'default',
    'setOnEmpty' => true,
    'value' => null
) 
```

# mule - mule 3，如何将响应从出站端点发送到另一个端点

> ID：15173130
> 
> 赞同：1
> 
> 时间：2013-03-02T09:56:01.180
> 
> 标签：mule

有没有办法将 JSON 响应作为异步请求发送到另一台服务器（例如监控等）这是我的 mule 流程

```
<flow name="loggingFlow1" doc:name="loggingFlow1">
<http:inbound-endpoint exchange-pattern="request-response" host="${source.http.host}" port="${source.http.port}" doc:name="HTTP" responseTimeout="10000" />
<http:outbound-endpoint exchange-pattern="request-response" method="GET" address="http://${dest.http.host}:${dest.http.port}#[header:INBOUND:http.request]" contentType="application/json" doc:name="HTTP_GET" responseTimeout="10000" />

<async processingStrategy="Asynchronous_Processing_Strategy" doc:name="Async">
<http:outbound-endpoint exchange-pattern="one-way" address="http://localhost:8080/Monitor/response" doc:name="HTTP"/>
</async>
</flow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:55:30.043

出于任何原因，似乎第一个`InputStream`制作的`http:outbound-endpoint`内容被阅读了不止一次。

将其序列化为`InputStream`a `String`with an`object-to-string-transformer`或 a `byte[]`with an`object-to-byte-array-transformer`是最好的选择，这`echo-component`是一个不再使用的遗留版本。

# bash - sed 模拟“tr | grep”

> ID：15173131
> 
> 赞同：3
> 
> 时间：2013-03-02T09:56:06.887
> 
> 标签：bash, sed, grep

给定以下文件

```
$ cat a.txt
FOO='hhh';BAR='eee';BAZ='ooo' 
```

`tr`我可以很容易地用和解析出一个项目`grep`

```
$ tr ';' '\n' < a.txt | grep BAR
BAR='eee' 
```

但是，如果我尝试使用`sed`它只会打印所有内容

```
$ sed 's/;/\n/g; /BAR/!d' a.txt
FOO='hhh'
BAR='eee'
BAZ='ooo' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:04:55.170

使用 awk 你可以这样做：

```
awk '/BAR/' RS=\; file 
```

但是如果在这种情况下`BAZ`会产生一个额外的换行符，因为`;`最后一个单词后面没有。如果您还想删除该换行符，则需要执行以下操作：

```
awk '/BAZ/{sub(/\n/,x); print}' RS=\;  file 
```

或者使用 GNU awk 或 mawk 你可以使用：

```
awk '/BAZ/' RS='[;\n]' 
```

* * *

如果你的 grep 有 -o 选项，那么你也可以试试这个：

```
grep -o '[^;]*BAZ[^;]*' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T14:20:46.790

`sed`可以随心所欲：

```
sed -n 's/.*\(BAR[^;]*\).*/\1/gp' <<< "FOO='hhh';BAR='eee';BAZ='ooo'" 
```

这里的重点是您必须禁止`sed`的默认输出——整行——，并且只打印您想要执行的替换。

值得注意的点：

*   `sed -n`抑制默认输出；
*   `s/.../.../g`在整条线上运行，即使已经匹配——贪婪；
*   `s/.1./.2./p`打印出替换部分 ( `.2.`)；
*   该`tr`部分作为表达式中的分隔符给出`\(BAR[^;]*\)`；
*   `grep`作业由行本身的匹配来表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T12:00:36.207

```
awk 'BEGIN {RS=";"} /BAR/' a.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T17:31:33.823

```
$ sed 's/;/\n/g;/^BAR/!D;P;d' a.txt
BAR='eee' 
```

*   全部替换`;`为`\n`
*   删除直到`BAR`行在顶部
*   打印`BAR`线
*   删除模式空间

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T17:41:26.727

以下 grep 解决方案可能对您有用：

```
grep -o 'BAR=[^;]*' a.txt 
```

# android - 在android中将值从第一个活动传递到第二个活动

> ID：15173134
> 
> 赞同：1
> 
> 时间：2013-03-02T09:56:39.433
> 
> 标签：android, android-intent, saxparser, pass-data

当我在第一个活动的 textview 上获得文章标题时。我如何将这些 textview 传递给下一个活动......

我使用了以下代码：

```
 for ( j = 0; j <Appscontent.Sub_arraylisttwo.size(); j++) 
      {
         LinearLayout ly = new LinearLayout(this);
         ly.setOrientation(LinearLayout.VERTICAL);
            ly.setOnClickListener(mArticleClick);
         TextView tv = new TextView(this);
         tv.setText(Appscontent.Sub_arraylisttwo.get(j));   

        ly.addView(tv);
        lLayout.addView(ly);
     }

       int num=Integer.parseInt(number);
       number=String.valueOf(num=num+1);
        System.out.println("the Number Value Is"+number);
          Appscontent.Sub_arraylisttwo.clear();

       hSroll.addView(lLayout);
       viewLayout.addView(headerText);
      viewLayout.addView(hSroll);
       verticalLayout.addView(viewLayout);

      Log.i("12", "" + lLayout.getChildCount());}
         }
      private OnClickListener   mArticleClick   = new OnClickListener() {

                                @Override
                                public void onClick(View v) {

                                Intent in = new Intent(MainActivity.this, SubCate.class);

                               startActivity(in); 

                                }
                            }; 
```

在这里我必须单击一篇文章意味着文章名称仅传递给下一个活动并显示该文章标题..我该怎么办？请给我解决这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:59:02.553

如果你想使用意图：

去 ListActivity 时通过..传递数据

```
intent.putExtra("Title", yourstring);
intent.putExtra("Content", yourstring);
startActivity(intent); 
```

并在第二个活动中恢复它使用：

```
title= getIntent().getExtras().getString("Title"); 
```

...等等..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:58:59.730

```
//to pass :
 Intent in = new Intent(MainActivity.this, SubCate.class);
in.putExtra("name", "Artical Name");  
 startActivity(in);

// to retrieve object in second Activity
getIntent().getSerializableExtra("name"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:03:14.140

```
 public void onClick(View view)
 {
    public void run()
    {
            Intent i=new Intent(activity1.this,activity2.class);
            i.putExtra("somename", variable1);
            i.putExtra("somename1", variable2);         

    }
 } 
```

在第二个活动

```
 Bundle extras = getIntent().getExtras();
    if (extras != null) {
        one= extras.getDouble("somename");
        two = extras.getDouble("somename2");

    } 
```

# c# - 控制 WCF 响应格式和命名空间

> ID：15173138
> 
> 赞同：4
> 
> 时间：2013-03-02T09:57:42.337
> 
> 标签：c#, wcf

我希望我的 WCF 响应使用 DataContracts 有一个带有两个命名空间的响应元素，但我无法让它工作。这就是我希望得到的回应：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <s:Header />
  <s:Body>
    <ns2:TestReply xmlns="http://www.test.org/test/2007/00" xmlns:ns2="http://www.test2.org/test2/types">
      <ns2:Result>
        <ns2:ActionSuccessful>true</ns2:ActionSuccessful>
      </ns2:Result>
      <ns2:ResultData>
        <ns2:Name>Maikel Willemse</ns2:Name>
      </ns2:ResultData>
    </ns2:TestReply>
  </s:Body>
</s:Envelope> 
```

这是我得到的响应（使用 WCF 测试客户端进行测试时）：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
    <GetDataResponse xmlns="http://www.test.org/test/2007/00">
      <TestReply xmlns:a="http://www.test2.org/test2/types" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <a:Result>
          <a:ActionSuccessful>true</a:ActionSuccessful>
        </a:Result>
        <a:ResultData>
          <a:Name>Maikel Willemse</a:Name>
        </a:ResultData>
      </TestReply>
    </GetDataResponse>
  </s:Body>
</s:Envelope> 
```

我的服务界面如下所示：

```
[ServiceContract(Namespace = "http://www.test.org/test/2007/00")]
public interface IService1
{
    [OperationContract]
    [return: MessageParameter(Name = "TestReply")]
    GetDataResponse GetData(string name);
} 
```

服务等级：

```
public class Service1 : IService1
{
    public GetDataResponse GetData(string name)
    {
        return new GetDataResponse
            {
                Result = new Result {ActionSuccessful = true},
                ResultData = new ResultData {Name = name}
            };
    }
} 
```

DataContract 类是：

```
[DataContract(Namespace = "http://www.test2.org/test2/types")]
public class GetDataResponse
{
    [DataMember(Name = "Result")]
    public Result Result { get; set; }

    [DataMember(Name = "ResultData")]
    public ResultData ResultData { get; set; }
}

[DataContract(Namespace = "http://www.test2.org/test2/types")]
public class Result
{
    [DataMember(Name = "ActionSuccessful")]
    public bool ActionSuccessful { get; set; }
}

[DataContract(Namespace = "http://www.test2.org/test2/types")]
public class ResultData
{
    [DataMember(Name = "Name")]
    public string Name { get; set; }
} 
```

我的 WCF 项目的目标框架是 .NET 4。命名空间前缀不必相同。我怎样才能得到我想要的格式的响应？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T21:06:14.557

如果要从响应中删除“包装”元素，则需要使用`[MessageContract]`. 下面的代码显示了如何完成它的一种方法。您可以使用服务/消息/数据合约中的命名空间来匹配您想要的。

```
public class StackOverflow_15173138
{
    [ServiceContract(Namespace = "http://www.test.org/test/2007/00")]
    public interface IService1
    {
        [OperationContract]
        MyResponse GetData(MyRequest request);
    }

    public class Service1 : IService1
    {
        public MyResponse GetData(MyRequest request)
        {
            return new MyResponse
            {
                TestReply = new GetDataResponse
                {
                    Result = new Result { ActionSuccessful = true },
                    ResultData = new ResultData { Name = request.name }
                }
            };
        }
    }

    [MessageContract(IsWrapped = false)]
    public class MyResponse
    {
        [MessageBodyMember]
        public GetDataResponse TestReply { get; set; }
    }

    [MessageContract(WrapperName = "GetData")]
    public class MyRequest
    {
        [MessageBodyMember]
        public string name { get; set; }
    }

    [DataContract(Namespace = "http://www.test2.org/test2/types")]
    public class GetDataResponse
    {
        [DataMember(Name = "Result")]
        public Result Result { get; set; }

        [DataMember(Name = "ResultData")]
        public ResultData ResultData { get; set; }
    }

    [DataContract(Namespace = "http://www.test2.org/test2/types")]
    public class Result
    {
        [DataMember(Name = "ActionSuccessful")]
        public bool ActionSuccessful { get; set; }
    }

    [DataContract(Namespace = "http://www.test2.org/test2/types")]
    public class ResultData
    {
        [DataMember(Name = "Name")]
        public string Name { get; set; }
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service1), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(IService1), new BasicHttpBinding(), "");
        host.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpGetEnabled = true });
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<IService1> factory = new ChannelFactory<IService1>(new BasicHttpBinding(), new EndpointAddress(baseAddress));
        IService1 proxy = factory.CreateChannel();
        Console.WriteLine(proxy.GetData(new MyRequest { name = "hello" }));

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:24:28.370

致@Maikel TestReply 位于默认命名空间中，因此没有前缀，但里面的元素确实有它。

```
xmlns:a="http://www.test2.org/test2/types 
```

所以这个命名空间的前缀是 a。（因为'a ='）并且它与默认命名空间不同。

在您的方法的 ServiceContractAttribute

```
GetDataResponse GetData(string name); 
```

正如@Carlos 建议的那样，你可以写

```
[ServiceContract(Namespace="http://www.test2.org/test2/types")] 
```

你不能拥有这个

```
<a:TestReply xmnls:a="http://www.test2.org/test2/types"> 
```

# controller - 当javaFX的控制器不足以显示内容时，它会在最后显示“...”？

> ID：15173141
> 
> 赞同：2
> 
> 时间：2013-03-02T09:57:54.847
> 
> 标签：controller, javafx

我的问题是我可以捕捉到 display "..." 的事件吗？

※我的意思是javaFX有API来判断内容的结尾是否替换为“...”？

事实上，我提出问题的原因是，现在我们的测试人员希望我们在一个控制器（如标签）上设置一个 TIP，如果它不足以显示的话。如果内容足够在控制器中显示，我们就不需要添加 TIP 了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T20:10:18.933

没有简单的方法可以判断文本是否已被剪切。

这个裁剪是在 Labeled 对象上完成的，在 LabeledSkinBase 的实现中，我们可以看到所有裁剪的逻辑都委托给了 computeClippedText()，它返回一个（裁剪与否）字符串：

```
result = Utils.computeClippedText(font, s, w, truncationStyle, ellipsisString);
[...]
text.setText(result); 
```

此方法没有获得对 Labeled 对象的引用，也不会触发任何事件，因此我们唯一的机会来判断 computeClippedText() 是否决定剪辑是查看实际的 Text 节点 ( *text* )，其中包含实际的显示的文本。由于 Labeled 没有公开这个节点，我们不得不求助于查找：

```
String originalString = myLabeled.getText();
Text textNode = (Text) myLabeled.lookup(".text"); // "text" is the style class of Text
String actualString = textNode.getText();

contentHasBeenClipped = originalString.notEquals(actualString); 
```

我们终于得到它了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:47:21.380

有一个 API 用于指定溢出文本的样式：

[http://docs.oracle.com/javafx/2/api/javafx/scene/control/Labeled.html#textOverrunProperty](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Labeled.html#textOverrunProperty)

[http://docs.oracle.com/javafx/2/api/javafx/scene/control/Labeled.html#ellipsisStringProperty](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Labeled.html#ellipsisStringProperty)

[http://docs.oracle.com/javafx/2/api/javafx/scene/control/Labeled.html#wrapTextProperty](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Labeled.html#wrapTextProperty)

但我不知道有任何 API 可以检测到是否发生了溢出。也许这将是一个很好的增强请求？你可以在这里归档：

[http://javafx-jira.kenai.com/](http://javafx-jira.kenai.com/)

# sql-server-2012 - Microsoft SQL Server 2012 已过期

> ID：15173143
> 
> 赞同：2
> 
> 时间：2013-03-02T09:58:17.603
> 
> 标签：sql-server-2012

我已经在这个 ASP.Net 项目上工作了几个月，今天我的 SQL Server 2012 Management Studio 已经过期。完全忽略了我可能一直在使用试用版而不是快速版。我无法访问 SQL 管理工作室，因为它说评估已过期。

1.  有没有办法可以降级到快速版（免费），而不会丢失任何数据库？

2.  有没有办法我仍然可以备份/导出我一直在处理的数据库？我试过使用导入/导出 64 位工具，但我忘记了我的 sql 服务器密码。我一直在使用默认值。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T10:17:41.407

1.  备份数据库：您可以通过从数据目录复制数据和日志文件来获得数据库的密切备份。您只需使用 Windows 复制和粘贴命令即可完成此操作。

2.  从试用版重新安装：我在 SQL Server 2008 试用版中遇到了这个问题。当 SQL Server 2008 过期时，我能够重新安装它，如下所示：

    a) 从控制面板 > 程序和功能中完全删除或卸载 SQL Server 的所有工具。
    b) 然后，重新安装 SQL Server 作为新工具。
    c) 安装成功后，将这些备份数据和日志文件复制粘贴到新安装的新数据目录中。
    d) 打开 SQL Server Mgmt Studio 并附加数据文件以重新创建旧数据库。您的数据库将以这种方式恢复。

我相信您也可以为您的 SQL Server 2012 试用版执行此过程。

# android - Sqlite - 简单函数返回计数

> ID：15173144
> 
> 赞同：0
> 
> 时间：2013-03-02T09:58:20.183
> 
> 标签：android, sqlite

我在带有 SQLite 数据库的 android 中有简单的函数来返回一些记录的计数。

```
public int getThreadMessagesCount(int thread_id){

    int mThreadCount = 0 ;

    Cursor cur = db.rawQuery("select count(*) as ThreadCount from tbl_messaging where thread_id = ?", new String[]{thread_id+""});
    Log.d("xxx", "query executed");

    if (cur.getCount()<=0)
        mThreadCount = 0 ;
        else
            mThreadCount = cur.getInt(cur.getColumnIndex("ThreadCount")) ;

    return mThreadCount ;

} 
```

但是当执行函数向我抛出惩罚时。

日志 ：

```
03-02 12:09:03.210: E/AndroidRuntime(32360): FATAL EXCEPTION: main
03-02 12:09:03.210: E/AndroidRuntime(32360): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
03-02 12:09:03.210: E/AndroidRuntime(32360):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:418)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at android.database.AbstractWindowedCursor.getInt(AbstractWindowedCursor.java:68)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at com.example.tawasol1.cls_database.getThreadMessagesCount(cls_database.java:460)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at com.example.tawasol1.Cls_act_check_account$5.onClick(Cls_act_check_account.java:377)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at android.view.View.performClick(View.java:4261)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at android.view.View$PerformClick.run(View.java:17356)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at android.os.Handler.handleCallback(Handler.java:615)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at android.os.Looper.loop(Looper.java:137)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at android.app.ActivityThread.main(ActivityThread.java:4921)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at java.lang.reflect.Method.invokeNative(Native Method)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at java.lang.reflect.Method.invoke(Method.java:511)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
03-02 12:09:03.210: E/AndroidRuntime(32360):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:16:18.617

试试这个代码

```
public int getThreadMessagesCount(int thread_id){

int mThreadCount = 0 ;

Cursor cur = db.rawQuery("select count(*) as ThreadCount from tbl_messaging where thread_id = ?", new String[]{thread_id+""});
Log.d("xxx", "query executed");

if (cur.getCount()<=0)
    mThreadCount = 0 ;
    else{
        cur.moveToNext();
        mThreadCount = cur.getInt(cur.getColumnIndex("ThreadCount")) ;}

return mThreadCount ; 
```

}`

# c# - 如何在特定打印机上打印

> ID：15173146
> 
> 赞同：0
> 
> 时间：2013-03-02T09:58:33.063
> 
> 标签：c#, printing, crystal-reports

我有两台打印机连接到安装了 WINFORM 应用程序的机器上，我有两个水晶报表 RPT1 和 RPT2。

那么如何向打印机 1 发送命令以打印 RPT1 和打印机 2 以打印 RPT2。

# jquery - 如何使用 jquery 检测组合箭头？

> ID：15173147
> 
> 赞同：0
> 
> 时间：2013-03-02T09:58:45.617
> 
> 标签：jquery, arrow-keys

如何在 jQuery 组合中检测：

> 向上箭头 + 向右箭头
> 
> 向上箭头 + 向左箭头
> 
> 向下箭头 + 向右箭头
> 
> 向下箭头 + 向左箭头

而不是组合，就像

> 向上箭头
> 
> 向下箭头
> 
> 向左箭头
> 
> 向右箭头

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:11:43.087

我发现在使用某些插件时处理组合键要容易得多。我不喜欢为每件事都使用插件，但有时它们只是节省了很多时间。我个人的选择是

KeyboardJS - [http://robertwhurst.github.com/KeyboardJS/](http://robertwhurst.github.com/KeyboardJS/)

# java - Java - JNDI / Active Directory / Kerberos / WebLogic Server - 密码配置

> ID：15173149
> 
> 赞同：1
> 
> 时间：2013-03-02T09:58:53.373
> 
> 标签：java, active-directory, weblogic, jndi, kerberos

我想从我的 EJB 中使用 Java 和 JNDI 从 Active Directory 中获取数据。进行此搜索时，我需要定义用户和密码。我正在考虑在 AD 中创建一个服务帐户（用于我的服务器）。

我还将使用 Kerberos 协议和 WebLogic Server。据我所知，我需要创建一个包含此服务帐户凭据的 keytab 文件。这个 keytab 文件会在 WebLogic Server 中配置吗？

因此，这意味着我必须在 keytab 文件和我的 EJB 中声明用户名/密码（*使用 JNDI 从 AD 获取数据*）。最好的方法是什么？可以动态定义 keytab 文件吗？这将简化更改密码并且只在一个地方执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:26:56.787

让您的计算机加入域，使用计算机帐户启动 WebLogic 服务器或授予对计算机密钥表的访问权限，使用 . 创建 JDNI 资源，[`DirContextSourceFactory`](http://dirctxsrc.sourceforge.net/dircontextsourcefactory.html)然后您就可以根据需要访问 AD。

# javascript - RSpec：是否有设置让所有规范都具有 js: true ？

> ID：15173150
> 
> 赞同：2
> 
> 时间：2013-03-02T09:58:54.840
> 
> 标签：javascript, google-chrome, rspec, capybara

每当请求规范失败时，我都会使用`respec`gem 重新运行失败的示例。执行此操作时，我想激活`:chrome`为驱动程序（而不是 headless `:webkit`），以便我可以在 Chrome 中直观地检查问题。

`driver: :chrome`我不想手动向测试用例添加一个，而是像这样全局指定它：

# spec_helper.rb Capybara.javascript_driver = if defined?(Respec) :chrome # 在 respec'ing 时使用有头浏览器在视觉上检查内容 else :webkit # 否则使用无头浏览器 end

遗憾的是，这似乎不适用于没有启用 JavaScript 的规范。有没有办法为所有规格打开 JS？就像是：

```
# spec_helper.rb
Capybara.javascript_driver = if defined?(Respec)
                                   Capybara.javascript = true
                                   :chrome # Use headed browser to inspect stuff visually when respec'ing
                                 else
                                   :webkit # Otherwise use headless browser
                                 end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:29:04.913

`javascript_driver`仅用于带有[标签](https://github.com/jnicklas/capybara/blob/master/lib/capybara/cucumber.rb#L17)[的场景`@javascript`](https://github.com/jnicklas/capybara/blob/master/lib/capybara/cucumber.rb#L17)。

如果你想用 chrome 运行所有场景，你应该修改`default_driver`而不是：`javascript_driver`

```
if defined?(Respec)
  Capybara.default_driver = :chrome
else
  Capybara.default_driver = :webkit
  Capybara.javascript_driver = :chrome
end 
```

# android - 创建可绘制资产的最佳方法是什么？

> ID：15173158
> 
> 赞同：4
> 
> 时间：2013-03-02T09:59:32.120
> 
> 标签：android, android-drawable

如果我把我的应用程序资源放进去，`drawable-xdpi`那么它会自动向下转换为`hdpi`,`mdpi`和`ldpi`ration`0.75`等等`0.05`。

如果仅一种类型就足够了，为什么我们需要创建额外的资源？

我相信如果我创建`xhdpi`并让 Android 自动缩减规模就足够了。我已经完成了这个问题 [What is the best way to create drawables for different dpi](https://stackoverflow.com/questions/8934399/what-is-the-best-way-to-create-drawables-for-different-dpi) 但没有人回答说是的，你可以这样做。

假设我保留了我的图像`xhdpi`，当应用程序在其中打开时，`hdpi`它的大小会减小到`0.75`，当它在其中打开时，`mdpi`它会减小到`0.5`.

那么创建可绘制资产的最佳方法是什么？请有正当理由提出完美的方法。

如果不需要，为什么我们要创建这么多资源而不是只为一个像`xdpi`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:08:04.557

如果您想在设备中显示具有不同分辨率的相同图像

```
xhdpi image then place it drawable-xhdpi
hdpi image then place it in drawable-hdpi** 
```

或维护一个可绘制文件夹放置所有您想要显示的图像，无论分辨率如何，它都会在所有设备中以相同大小显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T10:23:50.330

提供多个图像有两个原因：

1.  加载已经是正确大小的图像更有效。
2.  自动缩小可能会产生伪影，这可能会令人不安，尤其是对于小图像。因此，如果您想要一个像素完美的图像，最好提供一个正确尺寸的图像。

如果它们都不是您的问题，那么只使用一张图像也可以。

# java - 为什么这个动态编程代码不正确？

> ID：15173162
> 
> 赞同：-1
> 
> 时间：2013-03-02T09:59:43.710
> 
> 标签：java, dynamic-programming

我正在为家庭作业做[这个问题。](http://www.codechef.com/problems/E1)我已经使用标准的自下而上动态编程算法解决了这个问题。我的代码显示了我的测试用例的预期结果，但网站说它给出了错误的答案。我无法理解缺少此代码的位置。请帮我。

```
import java.io.*;
import java.util.*;
class Main300{

public static void main (String[] args) throws java.lang.Exception{
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    int nn = Integer.parseInt(br.readLine());
    for(int j = 0 ; j < nn; j++){
        int n = Integer.parseInt(br.readLine());
        char[][] a = new char[n][n];
        int ki = -1;
        int kj = -1;
        for(int i = 0 ; i < n ; i++){
            String s = br.readLine();
            for(int k = 0 ; k < n; k++){
                a[i][k] = s.charAt(k);
                if(a[i][k] == 'K'){
                    ki = i;
                    kj = k;
                }
            }
        }
        System.out.println(ans(a, ki, kj));
    }
}

private static int ans(char[][] a, int ki, int kj){
    int[][] x = new int[a.length][a.length];
    for(int j = a.length-1; j >= 0; j--){
        for(int i = 0 ; i < a.length; i++){
            if(a[i][j] == 'P'){
                x[i][j]++;
            }
            if(i-2 >= 0 && j+1 <= a.length-1 && a[i-2][j+1] == 'P'){
                x[i][j] += x[i-2][j+1];
            }else if(i-1 >= 0 && j+2 <= a.length-1 && a[i-1][j+2] == 'P'){
                x[i][j] += x[i-1][j+2];
            }else if(i+2 <= a.length-1 && j+1 <= a.length-1 && a[i+2][j+1] == 'P'){
                x[i][j] += x[i+2][j+1];
            }else if(i+1 <= a.length-1 && j+2 <= a.length-1 && a[i+1][j+2] == 'P'){
                x[i][j] += x[i+1][j+2];
            }
        }
    }
    return x[ki][kj];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:53:18.527

以下是错误答案的原因：

a) 由于 DP 配方将

`a[r][c] = max(a[r-2][c+1], a[r-1][c+2], a[r+1][c+2], a[r+2][c+1])`

所以你需要从当前位置验证每条路径。您的代码建议您只在一条路径上进行（仅`else if's`模拟通过一条路径）。

b）正如@Vinayak 指出的那样， `a[i-2][j+1] == 'P' 将允许您仅移动到有棋子的那些地方，这不一定是真的。你可以想出非常琐碎的例子来验证这一点。

这是代码：

```
import java.io.*;
import java.util.*;

class e1_test{

    public static void main (String[] args) throws java.lang.Exception{
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int nn = Integer.parseInt(br.readLine());
        for(int j = 0 ; j < nn; j++){
            int n = Integer.parseInt(br.readLine());char[][] a = new char[n][n];
            int ki = -1;
            int kj = -1;
            for(int i = 0 ; i < n ; i++){
                String s = br.readLine();
                for(int k = 0 ; k < n; k++){
                    a[i][k] = s.charAt(k);
                    if(a[i][k] == 'K'){
                        ki = i;
                        kj = k;
                    }
                }
            }
            System.out.println(ans(a, ki, kj));
        }
    }

    private static int ans(char[][] a, int ki, int kj) {
        int[][] x = new int[a.length][a.length];
        for(int j = a.length-1; j >= 0; j--) {
            for(int i = 0 ; i < a.length; i++) {
                if(a[i][j] == 'P') {
                    x[i][j]++;
                }
                int temp=0;
                //note the changes from else if's to only if's
                //removal of [i-2][j+1] == 'P' condition. 
                if(i-2 >= 0 && j+1 <= a.length-1) {
                    if(temp < x[i-2][j+1])
                        temp = x[i-2][j+1];
                }
                if(i-1 >= 0 && j+2 <= a.length-1) {
                    if(temp < x[i-1][j+2])
                        temp = x[i-1][j+2];
                }
                if(i+2 <= a.length-1 && j+1 <= a.length-1) {
                    if(temp < x[i+2][j+1])
                        temp = x[i+2][j+1];
                }
                if(i+1 <= a.length-1 && j+2 <= a.length-1) {
                    if(temp < x[i+1][j+2])
                        temp = x[i+1][j+2];
                }
                x[i][j] += temp;
            }
        }
        return x[ki][kj];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:22:06.160

我会稍微修改你的方法。您会发现这对于 DP 解决方案非常有用。这将帮助您编写更简单的解决方案，并且您将自己解决您的 WA :)

不是检查边界，而是根据您的关系使表格`TAB`（`x`在您的代码中）更大一点。

的值`TAB[r][c]`等于它可以捕获的最大棋子数`(r, c)`

在*白骑士*问题中，看看骑士如何上下 2 行，向右 2 列。所以让你的`TAB[N+4][N+2]`而不是`TAB[N][N]`. `0`在这种情况下，用基值填充这个额外的空间。

![在此处输入图像描述](../Images/5ff21dd1fe712d6a451046f4e83f8d7a.png)

关系非常简单（您使用 4 进行了编码`if-else`）

```
TAB[r][c] = max(TAB[r-2][c+1], TAB[r-1][c+2], TAB[r+1][c+2], TAB[r+2][c+1]) 
```

当然`TAB[r][c]`如果`INP[r][c] == 'P'`（`a`在你的情况下）增加

最后的最终解决方案是`TAB[ki+2][kj]`（`ki, kj`来自您的代码）。

# android - 从android上传base64编码图像到WCF服务

> ID：15173175
> 
> 赞同：1
> 
> 时间：2013-03-02T10:00:53.943
> 
> 标签：android, wcf, base64

我有一个可以将图像上传到 WCF 服务的 Android 程序。WCF 服务接受带有图像名称、文件夹名称和图像的 base64 编码的 JSON 对象。

我使用 fiddler 来测试该服务，我对来自在线服务的图像进行编码并将其放入对象中。然后组成一个 POST 请求；然后 WCF 服务成功上传图片。

但是当我使用 Android HTTP 客户端并做同样的事情时，WCF 接受了请求，但我无法识别图像。

这是我的安卓代码：

```
try {
    HttpPost httpPost=new HttpPost(this.remoteBasePath);
    JSONObject obj = new JSONObject();
    obj.put(FILE_NAME, fileName);
    obj.put(FILE_STREAM,fileStream);
    obj.put(FOLDER_NAME, remoteFolder);
    httpPost.setHeader("Content-type", "application/json; charset=utf-8");
    httpPost.setEntity(new StringEntity(obj.toString()));
    httpPost.setHeader(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    httpResponse=httpClient.execute(httpPost);
    if(httpResponse!=null){
        TLLog.d(TAG,"StatusCode : "+ httpResponse.getStatusLine().getStatusCode());
        if (httpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {                               
            InputStream instream = httpResponse.getEntity().getContent();
            BufferedReader r = new BufferedReader(
            new InputStreamReader(instream));
            StringBuilder total = new StringBuilder();
            String line;
            while ((line = r.readLine()) != null) {
                total.append(line);
            }
            instream.close();
            String result = total.toString();
            TLLog.d(TAG,"Image posting result : "+ result);
            return true;
        }
    }
} catch (ClientProtocolException e) {
    TLLog.e(TAG, e.getStackTrace().toString());
} catch (IOException e) {
    TLLog.e(TAG, e.getStackTrace().toString());
} catch (JSONException e) {
    e.printStackTrace();
} 
```

我无法理解问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:49:56.940

嗨，伙计们，我终于找到了问题。问题是编码，所以我使用从 Internet 下载的类[Base64.java](http://iharder.sourceforge.net/current/java/base64/)。我使用以下方法进行编码

```
public static String encodeTobase64(Bitmap image) throws IOException
{
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();  
    image.compress(Bitmap.CompressFormat.JPEG, 50, outputStream);
    byte[] bs = outputStream.toByteArray();
    String imageEncoded=Base64.encodeBytes(bs);
    return imageEncoded;
} 
```

并将返回值用作文件流。所以我的问题解决了。

# c++ - 我不明白枚举在 C++ 中是如何工作的

> ID：15173179
> 
> 赞同：0
> 
> 时间：2013-03-02T10:01:33.177
> 
> 标签：c++

我一直在玩 C++ 中的枚举，但我仍然无法理解这两个示例：

```
enum Colors {
    WHITE, BLACK, RED
};

Colors colors[3];
colors[0] = WHITE; // it's OK 
```

和：

```
enum Colors {
    WHITE, BLACK, RED
};

int colors[3];
colors[0] = WHITE; // it's OK 
```

我知道枚举的元素从 0 计数到 n-1，因此它们都有值。但是为什么我必须使用枚举的颜色名称来声明一个数组？为什么我不能使用 int 代替？或者我可以吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:03:29.240

允许您在和`enum`之间为您的值使用英文名称。对于下一个开发人员来说，它更漂亮、更容易理解`0``n-1`

```
int myColor = Colors::WHITE; 
```

比

```
int myColor = 0; // What color is this? I don't know 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T10:04:20.497

> 但是为什么我必须使用枚举的颜色名称来声明一个数组？为什么我不能使用 int 代替？或者我可以吗？

你可以：

```
enum {
    WHITE,
    BLACK
};

int arr[3];
arr[0] = WHITE; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T10:11:55.833

> 但是为什么我必须使用枚举的颜色名称来声明一个数组？为什么我不能使用 int 代替？或者我可以吗？

是的，您可以将变量声明为 an`int`而不是将其声明为 a `Colors`，但使用 an 的全部意义`enum`在于开发人员和编译器**都**可以判断可接受的值是有限的。更重要的是，编译器可以使用此信息来发出诊断信息并帮助开发人员避免错误：

```
int color1 = WHITE; // OK
int color1 = 0; // OK, no diagnostic, but what does 0 mean ?
Colors color2 = WHITE; // OK
Colors color2 = 0; // compilation warning or error 
```

# scala - 如何使用 Mockito 验证 Specs2 中特定字符串匹配器的调用

> ID：15173180
> 
> 赞同：6
> 
> 时间：2013-03-02T10:01:33.223
> 
> 标签：scala, mockito, specs2

我有一个沿着这些方向的测试：

```
httpClient.post(anyString, anyString) returns (first, second)

//do my thing

there were two(httpClient).post(anyString, anyString) 
```

这工作正常，但我想验证第一个调用传递的主体与第二个调用不同。身体相当大，我不想在严格的例子上进行精确匹配。我试过这个：

```
there was one(httpClientMock).postMessage(anyString, argThat(contain("FOO"))
there was one(httpClientMock).postMessage(anyString, argThat(contain("FOO")) 
```

这让 Mockito 抱怨：

```
InvalidUseOfMatchersException: 
 [error] Invalid use of argument matchers!
 [error] 2 matchers expected, 3 recorded: 
```

我也试过：

```
 there was one(httpClientMock).postMessage(argThat(contain("foo")), argThat(contain("FOO")))
  there was one(httpClientMock).postMessage(argThat(contain("foo")), argThat(contain("FOO"))) 
```

这导致：

```
Wanted 1 time:
 [error] -> ...
 [error] But was 2 times. Undesired invocation: ... 
```

在我看来，这样的事情应该是可能的，但我似乎无法弄清楚。洞察力？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T15:08:28.640

我认为这更多是 Mockito 的问题。当您使用带有 specs2 的 Mockito 并且有疑问时，请始终直接使用 Mockito API：

```
// simplified httpClient with only one parameter
val httpClient = mock[HttpClient]
httpClient.post(anyString) returns ""

httpClient.post("s1")
httpClient.post("s2")

// forget specs2
// there was two(httpClient).post(anyString)

org.mockito.Mockito.verify(httpClient, org.mockito.Mockito.times(1)).post("s1")

// I guess that you don't want this to pass but it does
org.mockito.Mockito.verify(httpClient, org.mockito.Mockito.times(1)).post("s1") 
```

解决此问题的一种可能方法是定义一个匹配器，它将检查参数的连续值：

```
there was two(httpClient).post(consecutiveValues(===("s1"), ===("s2"))) 
```

`consecutiveValues`匹配器定义如下：

```
import matcher._
import MatcherImplicits._

// return a matcher that will check a value against a different
// `expected` matcher each time it is invoked
def consecutiveValues[T](expected: Matcher[T]*): Matcher[T] = {
  // count the number of tested values
  var i = -1

  // store the results
  var results: Seq[(Int, MatchResult[T])] = Seq()

  def result(t: T) = {
    i += 1
    // with Mockito values are tested twice
    // the first time we return the result (but also store it)
    // the second time we return the computed result
    if (i < expected.size) {
      val mr = expected(i).apply(Expectable(t))
      results = results :+ (i, mr)
      mr
     } else results(i - expected.size)._2
  }

  // return a function that is translated to a specs2 matcher
  // thanks to implicits
  // display the failing messages if there are any
  (t: T) => (result(t).isSuccess,
             results.filterNot(_._2.isSuccess).map { case (n, mr) => 
               s"value $n is incorrect: ${mr.message}" }.mkString(", "))
} 
```

您可以测试上面的代码。失败消息不是最好的，但可以解决问题。在这个情况下：

```
httpClient.post("s1") 
httpClient.post("s2")

there was two(httpClient).post(consecutiveValues(===("s1"), ===("s3"))) 
```

你会看见：

```
[error] x test
[error]  The mock was not called as expected: 
[error]  httpClient.post(
[error]      value 1 is incorrect: 's2' is not equal to 's3'
[error]  );
[error]  Wanted 2 times:
[error]  -> at ... 
[error]  But was 1 time:
[error]  -> at ... 
```

# ruby-on-rails - 合并哈希并且不要覆盖里面的列表

> ID：15173182
> 
> 赞同：0
> 
> 时间：2013-03-02T10:01:44.687
> 
> 标签：ruby-on-rails, ruby

在 Ruby 中，我们可以使用以下`merge`函数合并哈希：

```
1.9.3-p194 :038 > h1 = { "a" => 1, "b" => [1] }
 => {"a"=>1, "b"=>[1]} 
1.9.3-p194 :039 > h2 = { "a" => 2, "b" => [2] }
 => {"a"=>2, "b"=>[2]} 
1.9.3-p194 :040 > h1.merge(h2)
 => {"a"=>2, "b"=>[2]} 
```

合并会覆盖散列中的数组，但我希望它加入它们。

```
 => {"a"=>2, "b"=>[1, 2]} 
```

是否有红宝石功能或单线来完成此任务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T10:13:52.980

您可以向合并方法添加额外的行为

```
h1 = { "a" => 1, "b" => [1] }
h2 = { "a" => 2, "b" => [2] }

h1.merge(h2) {|key, first, second| first.is_a?(Array) && second.is_a?(Array) ? first | second : second } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:17:01.807

你可以传入一个块来[合并](http://www.ruby-doc.org/core-2.0/Hash.html#method-i-merge)，看起来它是专门为这种情况设计的。

```
a = { x: 1, y: [1] }
b = { x: 2, y: [2] }
a.merge(b) {|k, a, b| a.is_a?(Array) && b.is_a?(Array) ? a + b : b}
=> { x: 2, y: [1, 2] } 
```

# windows - Windows过滤驱动开发的好教程？

> ID：15173186
> 
> 赞同：4
> 
> 时间：2013-03-02T10:02:08.237
> 
> 标签：windows, driver

我是一位经验丰富的 C/C++ 程序员，但我之前从未创建过 Windows 驱动程序。目前我需要创建一个非常简单的键盘过滤器驱动程序，它将“禁止”某些键组合（出于**说明**目的 - 它会通过过滤掉键中的“a”keydown 来防止同时按下“ctrl”和“a” ctrl" keydown 被检测到并且要keyup)。

我想自己解决这个任务并自学一点，但是阅读**所有**必需的文献和教程会有点矫枉过正并且需要很长时间:(。我可以使用任何好的 Windows 驱动程序开发教程来完成我的任务吗为了节省时间？

# c++ - 为什么我的 do while 语句不起作用

> ID：15173189
> 
> 赞同：0
> 
> 时间：2013-03-02T10:02:17.350
> 
> 标签：c++, while-loop

你能修复这个程序吗？它不会计算 z。

```
int main()
{
    using namespace std;
    int x, y, z, a;
    cout << "Please enter a number" << endl;
    cin >> x;
    cout << "Please enter another number" << endl;
    cin >> y;
    cout << "What do you want to do with these numbers?" << endl;
    cout << "1 = +" << endl;
    cout << "2 = -" << endl;
    cout << "3 = *" << endl;
    cout << "4 = /" << endl;
    cin >> a;

    do {
        z = add(x, y);
    } while (a == 1);

    do {
        z = sub(x, y);
    } while (a == 2);

    do {
        z = mul(x, y);
    } while (a == 3);

    do {
        z = dis(x, y);
    } while (a == 4);

    cout << z;
    return 0;
} 
```

我尝试使用 do while 语句，但我无法让它工作。---编辑---添加了适当的缩进，为什么它不能自动这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:07:02.290

无论您输入哪个选项，它都会进入那个 do-while 循环并且永远不会退出，因为条件总是会得到满足。前任。如果我输入 1 那么它将输入：

```
do {
    z = add(x, y);
} while (a == 1); 
```

并且由于 a 将始终为 1 它永远不会退出它。其他条件也是如此。相反，您可以使用 switch 语句。就像是 ：

```
switch(a) {
    case 1 : z = add(x, y);
             break;
    case 2 : z = sub(x, y);
             break;
    case 3 : z = mul(x, y);
             break;
    case 4 : z = div(x, y);
             break;
    default : cout<<"Please choose a valid option to proceed.";
}
cout << z;
return 0; 
```

此外，在这种情况下，您不要使用 do-while。即使您退出循环，它也总是会除（x，y），因为 do-while 是这样的，它进入然后随后检查条件。但是，您可以使用类似这样的 while 循环：

```
while(a==1) {
    z = add(x, y);
    a = -1;
}

while(a==2) {
    z = sub(x, y);
    a = -1;
}

while(a==3) {
    z = mul(x, y);
    a = -1;
}

while(a==4) {
    z = div(x, y);
    a = -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:26:42.777

该声明：

```
 while( 1 >= a <= 4) 
```

是不正确的[嗯，它是正确的 C 语法，但它很可能不是你想要的，因为它确实如此]：

```
while( (1 >= a) <= 4); 
```

并且由于 的​​结果`(1 >= a)`是 要么`0`，`1`所以它总是`<= 4`。你需要做：

```
while ( (1 >= a) && (a <= 4) ); 
```

[括号只是为了清楚起见，可以去掉里面的两组括号]

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-02T10:06:27.520

你的代码正在进入一个无限循环，像这样修改它

```
 int main()
{
using namespace std;
int x, y, z, a;
do
{
cout << "Please enter a number" << endl;
cin >> x;
cout << "Please enter another number" << endl;
cin >> y;
cout << "What do you want to do with these numbers?" << endl;
cout << "1 = +" << endl;
cout << "2 = -" << endl;
cout << "3 = *" << endl;
cout << "4 = /" << endl;
cin >> a;
switch(a)
{
  case 1:
    z = add(x, y);
    break;
  case 2:
    z = sub(x, y);
    break;
  case 3:
    z = mul(x, y);
    break;
  case 4:
    z = dis(x, y);
    break;
}  
cout << z;
} while( 1 >= a <= 4)
return 0;
} 
```

根据lokoko的建议修改

# c# - 将图表对象分配给图表控件

> ID：15173190
> 
> 赞同：0
> 
> 时间：2013-03-02T10:02:17.923
> 
> 标签：c#, asp.net

我有一个以编程方式创建的图表对象并尝试将其加载到图表控件中，但它失败了，什么也不显示...

```
Chart Chart1 = GetMyChart(); //GetMyChart Return a chart object.
ChartControl1 = Chart1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:29:01.883

我发现了一些东西......它可以工作，但我需要将图表对象的每个属性设置为图表控件。

```
ChartArea[] ca = new ChartArea[1];
Chart1.ChartAreas.CopyTo(ca, 0);
ChartControl1.ChartAreas.Add(ca[0]);

Series[] s = new Series[5];
Chart1.Series.CopyTo(s, 0);
foreach (Series ss in s)
{
  if (ss != null)
  {
    ChartControl1.Series.Add(ss);
  }
}        
Legend[] l = new Legend[5];
Chart1.Legends.CopyTo(l, 0);
foreach (Legend ll in l)
{
  if (ll != null)
  {
    ChartControl1.Legends.Add(ll);
  }
} 
```

# postgresql - PL/pgSQL 中的 BREAK 语句

> ID：15173194
> 
> 赞同：29
> 
> 时间：2013-03-02T10:02:43.553
> 
> 标签：postgresql, loops, plpgsql, break

如何`break`在 PostgreSQL 中有语句？我有这样的结构：

```
for()
 {
 for()
 {
  if(somecondition)
  break;
 }
} 
```

根据我的理解，它应该只打破内`for`循环？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-02T17:30:04.350

[PL/pgSQL](https://www.postgresql.org/docs/current/plpgsql.html)~~`BREAK`~~中没有。

**[`EXIT`](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#PLPGSQL-CONTROL-STRUCTURES-LOOPS)**终止循环。
**[`CONTINUE`](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#PLPGSQL-CONTROL-STRUCTURES-LOOPS)**在循环的下一次迭代中继续。
您可以将 a 附加`<<label>>`到循环并将其作为参数添加到每个命令中。然后你终止/继续*标记*的循环。否则，它涉及*内部*循环。
**[`RETURN`](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)**从函数中退出（因此不适用于[`DO`](https://www.postgresql.org/docs/current/sql-do.html)语句）。

所有这些都适用于 PL/pgSQL 的过程元素，*而不是*SQL。
使用所有三个的代码示例：

*   [循环输入功能无法按预期工作](https://stackoverflow.com/questions/19257398/loop-in-function-does-not-work-as-expected/19309470#19309470)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-07T11:42:53.420

请注意：是的！你需要“WHEN”，即使你最终（像我一样;-)）有类似的东西

```
LOOP
  ...
  IF l_my_var = 'some condition' THEN
    -- this is ok, bla
    IF l_debug_level >= 2 THEN
      RAISE NOTICE 'debug 2: skipping a duplicate %, l_my_var;
    END IF;
    -- do something
    CONTINUE WHEN TRUE; -- https://stackoverflow.com/questions/15173194/break-statement-in-pl-pgsql
  ELSE
    -- do something
  END IF;
  ... 
```

IF 和 WHEN 看起来有些扭曲。

对编辑的备注：可以使“CONTINUE”后面的链接更精确：[https ://www.postgresql.org/docs/9.6/plpgsql-control-structures.html#AEN66440](https://www.postgresql.org/docs/9.6/plpgsql-control-structures.html#AEN66440)

# android - Android - actionBar.setDisplayHomeAsUpEnabled 问题

> ID：15173199
> 
> 赞同：3
> 
> 时间：2013-03-02T10:03:14.537
> 
> 标签：android, android-actionbar, actionbarsherlock, android-fragmentactivity

在我扩展 SherlockFragmentActivity 的活动中，我有操作栏，并且还设置了 actionBar.setDisplayHomeAsUpEnabled(true) 以返回到我之前的活动。一切正常。但是当我点击主页按钮时，背景颜色应该只应用于应用程序图标，但它也适用于操作栏上的“标题”，如屏幕截图所示。我不希望这种情况发生。当我点击主页按钮时，只有应用程序图标应该可以点击（背景颜色应该只应用于应用程序图标）而不是标题。知道我该怎么做吗？

![在此处输入图像描述](../Images/eb56fe332a303802445175202b9e133e.png)

我的活动代码：

```
ActionBar actionBar = getSupportActionBar();
actionBar.setDisplayHomeAsUpEnabled(true);
actionBar.setTitle(some_string); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-04T02:48:01.897

不要忘记这部分，因为那个主页按钮也是一个菜单按钮。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // This is called when the Home (Up) button is pressed in the action bar.
            // Create a simple intent that starts the hierarchical parent activity and
            // use NavUtils in the Support Package to ensure proper handling of Up.
            Intent upIntent = new Intent(this, MainActivity.class);
            if (NavUtils.shouldUpRecreateTask(this, upIntent)) {
                // This activity is not part of the application's task, so create a new task
                // with a synthesized back stack.
                TaskStackBuilder.from(this)
                        // If there are ancestor activities, they should be added here.
                        .addNextIntent(upIntent)
                        .startActivities();
                finish();
            } else {
                // This activity is part of the application's task, so simply
                // navigate up to the hierarchical parent activity.
                NavUtils.navigateUpTo(this, upIntent);
            }
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:09:32.913

标准的 Android UI 模式是在按下状态下包含标题。但是，我认为如果您点击此链接（描述如何在操作栏左侧添加自定义视图）[如何将操作栏中的项目向左对齐？](https://stackoverflow.com/questions/7454102/how-to-align-items-in-action-bar-to-the-left)，并将标题设置为空。下面的代码在我的本地设备上工作

```
ActionBar action=getActionBar();
action.setDisplayShowCustomEnabled(true);
action.setHomeButtonEnabled(true);
action.setDisplayShowTitleEnabled(false);
TextView title =new TextView(getApplicationContext());
title.setText("Your Title here");
title.setGravity(Gravity.LEFT | Gravity.CENTER_VERTICAL);
action.setCustomView(title); 
```

# gwt - 在 2 个 GWT 项目之间共享 RemoteService 实现

> ID：15173200
> 
> 赞同：0
> 
> 时间：2013-03-02T10:03:15.343
> 
> 标签：gwt, smartgwt

我一直在努力尝试将 RemoteService 实现从一个 GWT 项目重用到一个新项目中。这是大图：

我有一个正在工作的 smartgwt-mobile 项目，我们现在决定我们想要一个相同项目的桌面版本，使用常规的 smart-gwt。这个新应用程序的 GUI 显然会有所不同，但服务器端代码将完全相同。

我试图通过链接新源结构中另一个项目中的包文件夹（我正在使用带有 GWT 插件的 Eclipse）或添加借用的代码路径来“借用” RemoteService 接口、它的异步对应物和整个服务器包作为构建路径的过滤源文件夹，虽然这满足 Eclipse 依赖项检查器，但 GWT 编译器无法找到借用的代码，这表明我需要在模块 .gwt.xml 文件中添加“继承”声明。

当我这样做并重新编译它时，现在需要在借用代码的根目录中添加第二个模块 .gwt.xml 文件，这是不可接受的，因为它会影响其他项目。

我一直在阅读 GWT 模块文档，但我看不到如何实现这样的方案。实际上可能无法做到我想要实现的目标。

如果这能解决问题，我愿意创建第三个项目，该项目仅定义一个 GWT RemoteService 模块，然后移动和桌面 smartgwt 项目都将继承该模块。

有人对如何解决这个问题有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:31:51.350

我同意 `"third project that simply defines a GWT RemoteService module that then will be inherited by both the mobile and desktop smartgwt projects"`

为什么，因为，我已经在这样做了。是的，这显然是一个`DAO`项目（数据库层），其中包含我所有的数据库业务逻辑方法。

并且它总是更好地保持分开来`DAO layer`暴露你。`data``services(ex.webservices)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:37:27.413

所以这就是我解决问题的方法。链接到现有 GWT 项目源文件夹的问题在于 GWT 编译器总是（至少看起来是这样）期望找到 GWT 模块定义文件 (.gwt.xml)。我无法以 GWT 编译器满意的方式链接源文件夹，即使 Eclipse 依赖解析器对此没有问题。

所以我使用 GWT Eclipse 插件创建了第三个项目。我取消选中“创建示例代码”选项，所以我最终得到了一个空的 GWT 项目。然后我选择“添加”>“新建”>“其他”>“Google”>“模块”，输入模块名称，例如“myModule”，包名称，例如“com.myCompany.myModule”，然后单击“完成” . GWT 新模块向导创建了包和一个名为“com.myCompany.myModule.client”的子包，我自己创建了“com.myCompany.myModule.server”。

现在我复制了 RemoteService 和相关类（实现和 Async 版本），加上我想借用的原始项目中 RemoteService 代码调用的所有服务器端代码，并将其粘贴到新项目中。很快我就满足了所有依赖项，并在新的 Smart-GWT Web 应用程序项目中打开了“构建路径”对话框，并将 GWT 远程服务模块项目包含在项目选项卡中。最后要做的是在 .gwt.xml 文件中添加一个继承元素：

`<inherits name='com.myCompany.myModule.MyModule'/>`

瞧：就是这样。如果您选择“GWT 编译项目”，它将在开发模式下编译并运行而不会出现警告。

我现在仍然必须从第一个项目中删除共享代码并从模块继承，这只是对我已经做过的事情的重复。

最后，这并没有我想象的那么痛苦，所以我推荐这种方法。

# jquery - 篡改猴子不点击

> ID：15173204
> 
> 赞同：4
> 
> 时间：2013-03-02T10:03:45.127
> 
> 标签：jquery, greasemonkey, tampermonkey

HTML：

```
<div id="someid">Attack ..</div> 
```

jQuery：

```
$("#someid").click(function() {
    alert("I was clicked.");
}); 
```

jsFiddle：http: [//jsfiddle.net/kgJKU/](http://jsfiddle.net/kgJKU/)

油猴：

```
// ==UserScript==
// @name       My Fancy New Userscript
// @namespace  http://use.i.E.your.homepage/
// @require       http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js
// @version    0.1
// @description  enter something useful
// @match      http://jsfiddle.net/kgJKU/
// ==/UserScript==
$("#someid").trigger('click'); 
```

...但我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:50:26.007

您可能必须这样做：

```
$(document).ready(function(){

    var clickEvent  = document.createEvent ("HTMLEvents");
    clickEvent.initEvent ("click", true, true);
    $("#someid")[0].dispatchEvent (clickEvent);

}); 
```

这就是它在 Firefox/Greasemonkey 中的工作方式。但是它似乎不适用于 jsfiddle.net，但它应该适用于所有其他网站。

确保您的脚本使用与网站使用相同的 jquery 版本。

# ios - 是否可以在 Xcode 中重构 Objective-C++ 代码

> ID：15173206
> 
> 赞同：2
> 
> 时间：2013-03-02T10:03:47.567
> 
> 标签：ios, xcode, cocoa, refactoring, objective-c++

我是一名游戏开发者。我已经使用处于最终阶段的 box2d 开发了一款游戏。为了在我尝试进行代码重构时构建代码，我收到此错误警报[http://screencast.com/t/ir1nCvnx](http://screencast.com/t/ir1nCvnx)。但是，当我尝试为另一个不使用 .mm 后缀的项目进行代码重构时，意味着我可以成功。我想知道的是我们能否使用 C++ 概念对代码进行代码重构。如果不是，还有什么其他方法可以进行代码重构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:11:40.327

> 我认为因为 Xcode 的所有代码覆盖功能都依赖于 clang 前端，所以它最终能够重构 C++。据我了解，它过去没有重构C++，因为clang的C++支持仍然不足。
> 
> 但是 clang 现在是一个非常好的 C++ 编译器。然而，Xcode 仍然不愿重命名符号（这是我唯一需要的重构）。

所以，到目前为止，你还不能重构你的 C++ 代码，希望你能通过新版本的 clang / LLVM / XCode 得到它。

# java - 对 1,000,000 个对象进行排序（不是按键）-Java

> ID：15173212
> 
> 赞同：3
> 
> 时间：2013-03-02T10:04:24.337
> 
> 标签：java, sorting, data-structures, abstract-data-type

我有 c.1,000,000 个对象需要以某种形式的数据结构存储。它们必须通过键 (ID) 是唯一的 - 但根据它们的日期排序。因此，我试图想出一种将它们存储在某种形式的数据结构中的最佳方法。性能（就执行时间而言）它是主要目标，然后是内存使用。我的想法是将对象放入树中，以便在它们进入数据结构时根据它们的日期对它们进行排序，然后我可以按顺序返回它们。但是 - 我认为根据其 ID 查找单个对象将非常缓慢。我确实想到的一个想法是有一个二级结构，它将 ID 与日期联系起来，这样我就可以减少查找单个对象所花费的时间，

## 关键点：

之后可能会添加对象，因此 c.1,000,000 个对象不是固定的。它们不会被更新或删除。我可能不会使用 Java 的内置比较器。我正在优化返回数据的效率 - 无论是按顺序（按日期）的完整集合，还是从其 ID 获得的单个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T10:14:23.283

如果您在使用内存之前主要关注性能，我会使用 2 个数据结构：

```
ArrayList<YourClass> instancesByDate; 
```

和

```
HashMap<SomeId,YourClass> instancesById; 
```

这为您提供了最快的按日期遍历和 O(1) 查找（显然取决于 hashCode() ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:09:52.127

如何使用 ID => yourobject 的哈希表进行 ID 查找，以及使用日期的二级哈希表（在某种粒度级别）=> `Vector<yourobject>`？您可以选择日期的“粒度”，以确保每个向量中有适量的对象 - 并按日期对每个对象进行排序。

# powershell - 导入-CSV 和 Foreach

> ID：15173213
> 
> 赞同：16
> 
> 时间：2013-03-02T10:04:43.253
> 
> 标签：powershell, csv, foreach

我有一个巨大的逗号分隔的 CSV 列表，其中包含我想要对其运行查询的网络 IP 地址。我的 CSV 输入示例：

```
172.168.0.1,172.168.0.2,172.168.0.3,172.168.0.4 
```

ETC....

当我运行以下代码来测试输出时：

```
$filepath = "c:\scripts\servers.csv" 
$servers = Import-CSV $filepath -delimiter "," 

Foreach ($server in $servers) {
     write-host $server

} 
```

我没有输出，我认为这是因为没有指定标题。我显然可以做一个解决方法并打开 CSV 文件并输入所有标题。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-02T10:08:54.380

您可以即时创建标题（当分隔符是逗号时无需指定分隔符）：

```
Import-CSV $filepath -Header IP1,IP2,IP3,IP4 | Foreach-Object{
   Write-Host $_.IP1
   Write-Host $_.IP2
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:28:22.333

```
$IP_Array = (Get-Content test2.csv)[0].split(",")
foreach ( $IP in $IP_Array){
    $IP
} 
```

Get-content Filename 为每一行返回一个字符串数组。

仅在第一个字符串上，我根据“，”将其拆分。将其转储到 $IP_Array。

```
$IP_Array = (Get-Content test2.csv)[0].split(",")
foreach ( $IP in $IP_Array){
  if ($IP -eq "2.2.2.2") {
    Write-Host "Found $IP"
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T09:24:03.013

解决方案是更改分隔符。

csv 文件的内容 -> 注意 .. 还有空格和 , 值

值为 6 个荷兰语单词 aap、noot、mies、Piet、Gijs、Jan

```
Col1;Col2;Col3

a,ap;noo,t;mi es

P,iet;G ,ijs;Ja ,n

$csv = Import-Csv C:\TejaCopy.csv -Delimiter ';' 
```

回答：

```
Write-Host $csv
@{Col1=a,ap; Col2=noo,t; Col3=mi es} @{Col1=P,iet; Col2=G ,ijs; Col3=Ja ,n} 
```

可以读取 CSV 文件并使用其他分隔符来分隔每一列。

它适用于我的脚本:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-15T19:18:24.747

$filepath = ".\ADcomputerslist.csv" $servers = Import-CSV $filepath -delimiter ","

Foreach（$servers 中的 $entry）{ write-host $entry.name }

# 也可以用对象替换愚蠢的文件。

$servers = Get-ADComputer -Filter * -Property * | 选择-对象名称、操作系统、操作系统版本、ipv4 地址

Foreach（$servers 中的 $entry）{ write-host $entry.name }

# search - 在 JavaMail 中使用 SearchTerm

> ID：15173214
> 
> 赞同：0
> 
> 时间：2013-03-02T10:04:51.387
> 
> 标签：search, jakarta-mail

一段时间以来，我一直在使用 JavaMail 来开发一个简单的邮件应用程序。我还使用 JavaMail 中的 SearchTerm 概念开发了一个简单的搜索工具。我想按发件人、收件人、日期、内容或主题搜索电子邮件。因此，对于上述参数，我有以下示例 SearchTerm 组合：

```
SearchTerm searchSenderOrSubjectTerm = new OrTerm(termSender, termSub);         
SearchTerm searchSenderOrDate = new OrTerm(termSender, termRecvDate);
SearchTerm searchSubjectOrSenderOrDate = new OrTerm(searchSenderOrSubjectTerm, searchSenderOrDate);
SearchTerm searchSubjectOrContentOrSenderOrDate = new OrTerm(searchSubjectOrSenderOrDate, termContent);         
SearchTerm searchSubjectOrContentOrSenderOrRecvrOrDate = new OrTerm(searchSubjectOrContentOrSenderOrDate, termRecvr);

//return the search results
 searchResults = folder.search(searchSubjectOrContentOrSenderOrRecvrOrDate); 
```

这工作正常并返回所需的结果。但是这种方法的问题是搜索和返回结果需要花费太多时间。我只是想知道问题是内部 SearchTerm 实现还是来自上述方法。那么，你们能分享我在这方面的经验，尤其是在性能问题上吗？这花费了太多时间，我不确定问题出在哪里。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T08:32:46.047

如果您使用 IMAP，则搜索都是在服务器上完成的，因此性能取决于服务器。如果您使用的是 POP3，则通过将所有消息下载到客户端并在那里进行搜索来完成搜索。使用 IMAP。:-)

您可以通过使用单个 OrTerm 和所有其他术语的数组来简化搜索。但是，我不知道这是否会产生任何性能差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T21:34:26.727

除非您使用 Google 的 IMAP 扩展，否则您将在本地应用搜索条件。

要使用 JavaMail 在服务器上搜索，您需要执行以下操作：

```
GmailStore store = (GmailStore) session.getStore("gimap");
store.connect("imap.gmail.com", "[your-account@gmail.com", "[your-pw]");
GmailFolder inbox = (GmailFolder) store.getFolder("[Gmail]/All Mail");
inbox.open(Folder.READ_ONLY);
Message[] foundMessages = inbox.search(new GmailRawSearchTerm("to:somebody@email.com")); 
```

这里有一个更完整的例子：http: [//scandilabs.com/technology/knowledge/How_to_search_gmail_accounts_via_JavaMail_and_IMAP](http://scandilabs.com/technology/knowledge/How_to_search_gmail_accounts_via_JavaMail_and_IMAP)

# javascript - 将执行从 js 文件中的单击事件传递到另一个 js 文件中的另一个函数

> ID：15173215
> 
> 赞同：2
> 
> 时间：2013-03-02T10:04:53.603
> 
> 标签：javascript, jquery

我有一个点击事件A，当触发时，它将检查用户是否登录。如果用户未登录，则会触发模式登录窗口并用户登录。当用户点击登录按钮时，执行登录并将执行传递回单击事件A并继续执行。

```
$('.A').on('click',function(){
   //Check if logged in
   if(!logged_in())
   {
      var r = confirm("you are not logged in. Do you want to login/register"?);
      if(r)
           $('#login_link').click();
      else return
   }   

   //Continue execution if logged in
   //Execution of code
}); 
```

我的#login_link 是登录的模式窗口。用户点击模式窗口上的登录按钮时的jquery

```
$('#sign_in').click(function(){
 //perform log in function
 if(success)
     window.location.assign(window.location.href);
}); 
```

当用户成功登录时，它将保留在它所在的页面上。但是现在登录后，我希望执行返回到A上的点击事件。这两个事件在不同的js文件中，但页面引用了它们。任何人都可以帮助我吗？在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:14:07.813

事件是异步的。您不能返回返回，因为代码将继续立即运行。您要做的是为事件创建函数。该函数`login.A`也`login.sign_in`可以只是对象之外的函数。这只是为了展示一种可能性。喜欢：

```
var login = {
    A : function(){
        //Check if logged in
       if(!logged_in())
       {
          var r = confirm("you are not logged in. Do you want to login/register"?);
          if(r)
               login.sign_in();
          else return
       }   

       //Continue execution if logged in
       //Execution of code
    },
    sign_in : function(){
        //perform log in function
        if(success)
             window.location.assign(window.location.href);

        return "back to A, or end the click event of #sign_in";

    }
};

$(".A").click(login.A);
$("#sign_in").click(login.sign_in); 
```

# wpf - 在VB中动态转换为类型

> ID：15173216
> 
> 赞同：0
> 
> 时间：2013-03-02T10:05:01.357
> 
> 标签：wpf, vb.net, user-interface, casting

我一直在寻找 stackoverflow 来回答这个问题。

我有一个 Listview，其项目是 Listview，其子项实际上是一个列表（字符串），它是父 listviewitem 的成员。

拖放功能是目标。然而，由于各种原因，这被证明是困难的，其中之一就是选角。在进行直接转换以使其工作之前，我需要获得类型 - 至少我认为这会让我解决一个问题。

但是我什至无法让这种语法开始工作，所以我将从这里开始：

```
 Dim itemType = listView.ItemContainerGenerator.ItemFromContainer(listViewItem)
   Dim g As Type = GetType(itemtype) 
```

这是我正在尝试的整个拖放实现：

```
Dim startpoint As Point

Public Sub List_PreviewMouseLeftButtonDown(sender As Object, e As MouseEventArgs)
    ' Store the mouse position
    startpoint = e.GetPosition(Nothing)
End Sub

Private Sub List_MouseMove(sender As Object, e As MouseEventArgs)
    Dim mousePos As Point = e.GetPosition(Nothing)
    Dim diff As Vector = startpoint - mousePos
    If e.LeftButton = MouseButtonState.Pressed And Math.Abs(diff.X) > SystemParameters.MinimumHorizontalDragDistance Or Math.Abs(diff.Y) > SystemParameters.MinimumVerticalDragDistance Then
        Dim listView As ListView = DirectCast(sender, ListView)
        Dim listViewItem As ListViewItem = FindAncestor(Of ListViewItem)(DirectCast(e.OriginalSource, DependencyObject))
        Dim itemType = listView.ItemContainerGenerator.ItemFromContainer(listViewItem)
        Dim g As Type = GetType(itemtype)
        Dim item As String = DirectCast(listView.ItemContainerGenerator.ItemFromContainer(listViewItem), String)
        Dim dragData As New DataObject("myFormat", item)
        DragDrop.DoDragDrop(listViewItem, dragData, DragDropEffects.Move)
    End If

End Sub

Private Shared Function FindAncestor(Of T As DependencyObject)(current As DependencyObject) As T
    Do
        If TypeOf current Is T Then
            Return DirectCast(current, T)
        End If
        current = VisualTreeHelper.GetParent(current)
    Loop While current IsNot Nothing
    Return Nothing
End Function

Private Sub DropList_DragEnter(sender As Object, e As DragEventArgs)
    If Not e.Data.GetDataPresent("myFormat") OrElse sender = e.Source Then
        e.Effects = DragDropEffects.None
    End If
End Sub

Private Sub DropList_Drop(sender As Object, e As DragEventArgs)
    If e.Data.GetDataPresent("myFormat") Then
        Dim contact As String = TryCast(e.Data.GetData("myFormat"), String)
        Dim listView As ListView = TryCast(sender, ListView)
        listView.Items.Add(contact)
    End If
End Sub 
```

这是嵌套的列表视图：

```
 <!--DataContext="{StaticResource RcpdInsertViewSource}" This is a collectionviewsource. 
                        RCPDInsert has a list(of string) member that is created from a single string property 
                        and whose order needs to be alterable. 
                        Eg rcpdInsert.template="[stuff] [more stuff]" so rcpdInsert.templateList = list(of String) from template.split("] [") -->
                        <ListView Grid.Column="1" Grid.Row="1" ItemsSource="{Binding}"  
                                  PreviewMouseLeftButtonDown="List_PreviewMouseLeftButtonDown" 
                                  PreviewMouseMove="List_MouseMove"
                                  Drop="DropList_Drop" 
                                  DragEnter="DropList_DragEnter" 
                                  AllowDrop="True">

                                <ListView.ItemTemplate>
                                  <DataTemplate>
                                    <DockPanel>
                                        <TextBox Text="{Binding Path=cpID}"></TextBox>
                                        <TextBox Text="{Binding Path=fieldRef}"></TextBox>
                                        <ListView ItemsSource="{Binding Path=InsertsList}" >
                                            <ListView.ItemTemplate>
                                                <DataTemplate DataType="DataClasses1:RcpdInsert.template" >
                                                    <StackPanel Orientation="Horizontal" Grid.Row="0">
                                                        <TextBlock Text="{Binding}" Margin="5" />
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ListView.ItemTemplate>
                                        </ListView>
                                    </DockPanel>
                                </DataTemplate>
                            </ListView.ItemTemplate>

                        </ListView> 
```

目标：拖放子列表视图的重新排序，理想情况下能够将单个项目从一个子列表视图拉到另一个。保存后，后面的代码实际上会将字符串重新连接在一起并更新模板成员。

对于上下文，这里是 RcpdInsert 的相关成员：

```
Sub SetupInsertList()
        _insertsList = template.Split(" ").ToList()
        For Each item In InsertsList
            Dim t = item
            RcpdList.Add(RcpdSet.RpcdListShared.Where(Function(x) x.insertID = t).ToList())
        Next
    End Sub

    Public Property RcpdList As New List(Of List(Of Rcpd))

    Private Property _insertsList As New List(Of String)

    Public Property InsertsList As List(Of String)
        Get
            If _insertsList.Count = 0 Then setupInsertList()
            Return _insertsList
        End Get
        Set(value As List(Of String))
            Dim combine As String = value.Aggregate("", Function(current, i) current + (i & " "))
            template = combine
        End Set
    End Property 
```

选角是其中一个问题，我希望能够完成这部分意味着其他部分将更容易解决。

提前感谢任何可以提供帮助的人:)

# java - java中的大分支树？

> ID：15173218
> 
> 赞同：3
> 
> 时间：2013-03-02T10:05:22.423
> 
> 标签：java, branching-and-merging, switching

我的问题是关于可扩展的逻辑分支。

有没有一种优雅的方法可以在 java 中进行分支逻辑树（虽然我一直认为它们看起来更像根系统，但这不是重点）。我正在尝试开发一个非常简单的基于文本的冒险游戏，作为我学习的辅助项目，但我不确定在这些大型逻辑系统中导航的最佳方式是什么。

我目前正在尝试的是一个包含四个值的数组：阶段、位置、步骤、选择。

[编辑 - 添加选择变量来存储用户选择，更改名称以反映我的代码中的实际名称，这样我以后就不会感到困惑]

```
int[] decisionPoint = {stage, location, step, choice}; 
```

一个阶段应该代表树的一个主要部分。一个位置应该代表我在树中的位置。一个步骤应该代表我通过给定位置的进度。选择是用户输入

目前，由于我只处理一棵树，因此阶段并没有被太多使用。位置和步骤运行良好，但每当我在一个步骤内做出决定时，系统就会崩溃。

我可以继续创建越来越多的变量来表示树中越来越深的层，但我觉得 Java 可能在某个地方提供了更好的解决方案。

目前，我正在使用 switch 语句根据存储在 nextQuestion 中的值来确定我在程序中的位置。有更好的吗？或者，有没有办法将数组扩展到我在这里使用的数组之外，使其更具多态性（在单个问题/文本的方法中/我可以让它从一个较小的数组创建一个更大的数组吗？我可以将较小的数组作为参数传递，但将参数定义为较大的数组吗？）

```
//Switch example
switch(LocationTracker.getLocation()) { //start location finding switch
    case 1 : //Location 1
        switch (LocationTracker.getStep()) {//start location1 switch
            case 1 :
                location1s1(graphicsStuff);
                break;
            case 2 :
                location1s2(graphicsStuff);
                break;
         } break; //end location1 switch
    case 2 : //Location 2
        switch (LocationTracker.getStep()) {
            //same stuff that happened above
        } break; 
```

我在网上找到的所有内容都会将我带到与我可以使用的不同在线调查创建者无关的页面。如果我可以查看他们的源代码，那就太好了，但由于我不能，我希望你们能提供帮助。:)

[编辑]

哇，这么早在这么短的时间内做出了多么好的反应！

我将尝试非常明确地详细说明我现在如何解决问题。值得一提的是，这在技术上确实有效，只是每次我需要在一个分支中创建一个分支时，我都必须在一个字符串数组中创建另一个变量来跟踪我的位置，实际上我只是在寻找一个解决方案随着程序变得越来越复杂，不需要无限扩展的字符串。

现在我有一个包含 5 个类的程序： 启动 GUI 的主类 GUI 类提供三种服务：userInput、userOptions 和 outputArea。

目前处理我的问题逻辑的 DecisionTreeStage1 类（使用 switch 语句）。LocationTracker 类旨在跟踪我在 DecisionTreeStage1 类中的位置 DialogueToOutput 类可更改用户拥有的选项，并使用他们的操作结果更新输出字段。

特殊兴趣点：我想在某个时候有多个决策分支和一棵主树（也许称它为 Yggdrasil？：D）。目前，DecisionTreeStage1 代表一个非常孤立的系统，不打算去任何地方。我希望使用存储在我的数组中的阶段变量从一个主要分支移动到下一个（如果你愿意，可以爬树）。我目前的实现只是使用嵌套的 switch 语句来决定我要去哪里。这带来了一个恼人的限制：每次我的路径越来越深时，我都需要在我的数组中使用另一个变量来存储该数据。例如：

```
//Switch example deeper
switch(LocationTracker.getLocation()) { //start location finding switch
    case 1 : //Location 1
        switch (LocationTracker.getStep()) {//start location1 switch
            case 1 :
                switch(LocationTracker.getChoice()) {//Make a decision at this step based on the user choice 
```

给定这个例子，如果用户的选择不只是导致一些逻辑怎么办？（在这种情况下，只是对 outputArea 的更新）如果它导致另一个分支路径怎么办？这会导致另一条分支路径吗？最终，我希望所有路径都汇聚在同一个位置，这样我就可以进入下一个“阶段”。

我真正的希望是让这个问题无限扩展。我希望能够根据需要深入到一个分支，而不必每次都在我的决策点数组中创建静态和任意数量的变量声明。

就像我说的那样，我无法找到有关此的太多信息。

让我尝试提出这个问题：除了以下内容之外，是否还有其他分支逻辑语句：

```
if(something)
    stuff;
else
    otherStuff; 
```

和

```
switch(something) {
    case 1:
        stuff;
        break;
    case 2:
        otherStuff;
        break; 
```

如果是这样，它们是什么？

PS - 我知道 Java 中的三元 if 语句，但它似乎对我正在做的事情没有用。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T14:31:47.327

您可以在 Java 中构建普通的树结构，类似于可以在 C 中构建的树。无论对象引用在理论上是否是指针，它们都可以很好地在树结构中替换指针：

```
class Node {
  Node left;
  Node right;
  Node parent;
} 
```

您还可以构建图（包括循环图）和链表没问题。大型结构应该有问题没有任何明显的原因（除了该对象引用使用一些内存）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:47:16.487

`Callable`您可以返回一个只需要执行的值，而不是返回一个值。然后可以将其链接起来（理论上是无限的）

你可以有一个`LocationEvaluation`例子，它可以返回一个`SpecificLocationEvaluator`，而它又返回一个`StepEvaluation`或一些这样的`ChoiceEvaluator`。所有这些都将实现 Callable 接口。

根据您的操作方式，您可以进行严格的类型检查，以便 LocationEvaluation 始终返回 SpecificLocationEvaluator 或者它可以是泛型的，然后您可以按任何顺序链接其中任何一个。

一旦你构建了结构，你基本上就会有一棵树，可以遍历它来解决它。

我没有充分理解这个问题，无法提供更具体的实现细节——如果我误解了一些分支（即上面的类/步骤的名称），我深表歉意

# c++ - 关于 const 禁止的重言式比较的警告？

> ID：15173219
> 
> 赞同：9
> 
> 时间：2013-03-02T10:05:28.613
> 
> 标签：c++, gcc, warnings, clang

以下代码会在 GCC 和 Clang 上生成警告：

```
int main() {
  unsigned n = 0;
  return ( n < 0 ) ? 1 : 0;
} 
```

警告是：

```
$ g++-4.7 -std=c++11 -O3 -Wall -Wextra t.cc -o t
t.cc: In function ‘int main()’:
t.cc:3:16: warning: comparison of unsigned expression < 0 is always false [-Wtype-limits]
$ clang++-3.2 -std=c++11 -O3 -Wall -Wextra t.cc -o t
t.cc:3:14: warning: comparison of unsigned expression < 0 is always false [-Wtautological-compare]
  return ( n < 0 ) ? 1 : 0;
           ~ ^ ~
1 warning generated.
$ 
```

到目前为止，一切都很好。现在我将变量更改为`const`：

```
int main() {
  const unsigned n = 0;
  return ( n < 0 ) ? 1 : 0;
} 
```

两个编译器都突然很乐意在没有警告的情况下编译代码：

```
$ g++-4.7 -std=c++11 -O3 -Wall -Wextra t.cc -o t
$ clang++-3.2 -std=c++11 -O3 -Wall -Wextra t.cc -o t
$ 
```

**问题：**为什么会发生这种情况？有没有**原因**，为什么`const`变量会抑制警告？如果 GCC 和 Clang 都同意，我会犹豫是否向他们提交错误报告，因为我似乎更有可能需要学习一些东西 :)

**编辑：**编译器的不断折叠可能与它有关，但*不足以解释行为*。在第一个示例中（没有`const`），编译器*确实*知道该值并且它永远不会改变。我检查了汇编程序的输出，编译器确实进行了常量折叠，但它**仍然**会生成警告，可能是*在*它看到表达式`( n < 0 )`并知道它`n`是无符号类型时用已知常量替换变量之前。也就是说：为什么当我添加时这种行为会发生变化`const`？我认为如果第一个示例产生警告，那么也应该可以为第二个示例产生警告。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T10:24:29.270

这是一个明确的常数——你的*意图*。您所需的警告有效地从以下位置转移：

```
warning: comparison of unsigned expression < 0 is always false [-Wtautological-compare]
return ( n < 0 ) ? 1 : 0;
         ~ ^ ~ 
```

到`-Wunreachable-code`什么时候`const`：

```
warning: will never be executed [-Wunreachable-code]
return ( n < 0 ) ? 1 : 0;
                   ^ 
```

注意：`-Wtautological-compare`编译器可能仍会在值未知的情况下发出警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T10:09:56.947

当变量不是`const`时，它可能会改变，编译器不知道它。这就是为什么会有警告。如果是`const`，它永远不会改变。这样，编译器可以`n`用 的实际值替换任何出现的`n`，在这种情况下：

```
return ( 0 < 0 ) ? 1 : 0;
-> return 0; 
```

因此，没有警告。

# ruby-on-rails - 通过关联在 has_many 中的 json 中嵌套模型

> ID：15173223
> 
> 赞同：0
> 
> 时间：2013-03-02T10:06:19.903
> 
> 标签：ruby-on-rails, json

使用 Rails 3.2。我有以下代码：

```
# month.rb                        
class Month < ActiveRecord::Base
  has_many :days

  def map_markers
    days.as_json(
      :only => :position,
      :include => {
        :day_shops => { 
          :only => :position, 
          :include => {
            :shops => {
              :only => [ :name ]
            }
          }
        }
      }
    )
  end
end

# day.rb
class Day < ActiveRecord::Base
  belongs_to :month
  has_many :day_shops
  has_many :shops, :through => :day_shops
end

# day_shop.rb
class DayShop < ActiveRecord::Base
  belongs_to :day
  belongs_to :shop
end

# shop.rb
class Shop < ActiveRecord::Base
end 
```

我想要实现的是将模型包装在`shop`模型`day_shop`（这是一个`through`表）中，但是当我将它包装在上面的 JSON 中时，我得到：

```
undefined method 'shops' for #<DayShop id: 87, day_id: 26, shop_id: 1, position: 1> 
```

我预期的 JSON 将是：

```
- position: 1
  :day_shops:
  - position: 1
    :shops:
    - name: Company A
  - position: 2
    :shops:
    - name: Company B
- position: 2
  :day_shops:
  - position: 1
    :shops:
    - name: Company A
  - position: 2
    :shops:
    - name: Company C 
```

我怎样才能改变我的方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:30:44.557

`DayShop belongs to a Shop`当您在方法中包含`shops`a时。修改为：`day_shop``map_marker``map_marker`

```
def map_markers
  days.as_json(
    :only => :position,
    :include => {
      :day_shops => { 
        :only => :position, 
        :include => {
          :shop => {
            :only => [ :name ]
          }
        }
      }
    }
  )
end 
```

# python - 计算给定2个句子字符串的余弦相似度

> ID：15173225
> 
> 赞同：79
> 
> 时间：2013-03-02T10:06:29.510
> 
> 标签：python, string, nlp, similarity, cosine-similarity

来自[Python：tf-idf-cosine：要找到文档相似度](https://stackoverflow.com/questions/12118720/python-tf-idf-cosine-to-find-document-similarity)，可以使用 tf-idf cosine 计算文档相似度。在不导入外部库的情况下，是否有任何方法可以计算 2 个字符串之间的余弦相似度？

```
s1 = "This is a foo bar sentence ."
s2 = "This sentence is similar to a foo bar sentence ."
s3 = "What is this string ? Totally not related to the other two lines ."

cosine_sim(s1, s2) # Should give high cosine similarity
cosine_sim(s1, s3) # Shouldn't give high cosine similarity value
cosine_sim(s2, s3) # Shouldn't give high cosine similarity value 
```

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-03-02T12:40:22.793

一个简单的纯 Python 实现将是：

```
import math
import re
from collections import Counter

WORD = re.compile(r"\w+")

def get_cosine(vec1, vec2):
    intersection = set(vec1.keys()) & set(vec2.keys())
    numerator = sum([vec1[x] * vec2[x] for x in intersection])

    sum1 = sum([vec1[x] ** 2 for x in list(vec1.keys())])
    sum2 = sum([vec2[x] ** 2 for x in list(vec2.keys())])
    denominator = math.sqrt(sum1) * math.sqrt(sum2)

    if not denominator:
        return 0.0
    else:
        return float(numerator) / denominator

def text_to_vector(text):
    words = WORD.findall(text)
    return Counter(words)

text1 = "This is a foo bar sentence ."
text2 = "This sentence is similar to a foo bar sentence ."

vector1 = text_to_vector(text1)
vector2 = text_to_vector(text2)

cosine = get_cosine(vector1, vector2)

print("Cosine:", cosine) 
```

印刷：

```
Cosine: 0.861640436855 
```

此处描述[了此处](http://en.wikipedia.org/wiki/Cosine_similarity)使用的余弦公式。

这不包括 tf-idf 对单词的加权，但为了使用 tf-idf，您需要有一个相当大的语料库来估计 tfidf 权重。

您还可以进一步开发它，通过使用更复杂的方法从一段文本中提取单词、词干或词形还原等。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-03-02T11:15:56.773

简短的回答是“不，不可能以一种原则性的方式来做到这一点，即使是远程也能很好地工作”。这是自然语言处理研究中一个未解决的问题，也恰好是我博士工作的主题。我将非常简要地总结一下我们所处的位置，并为您指出一些出版物：

**词义**

这里最重要的假设是有可能得到一个代表每个*词的向量*在有问题的句子中。通常选择这个向量来捕获单词可能出现的上下文。例如，如果我们只考虑三个上下文“eat”、“red”和“fluffy”，那么单词“cat”可能表示为 [98, 1 , 87]，因为如果您要阅读一段非常长的文本（按照今天的标准，几十亿字并不少见），“猫”这个词会经常出现在“蓬松”和“吃”的上下文中，但在“红色”的上下文中并不常见。同样，“dog”可能表示为 [87,2,34]，“umbrella”可能表示为 [1,13,0]。将这些向量成像为 3D 空间中的点，“cat”显然更接近“dog”而不是“umbrella”，因此“cat”

[自 90 年代初以来一直对这一](http://books.google.co.uk/books/about/Explorations_in_Automatic_Thesaurus_Disc.html?id=ZAxgQRIgzIcC&redir_esc=y)工作进行调查（例如Geffenstette 的这项工作），并取得了一些令人惊讶的好结果。例如，这是我最近通过让我的计算机阅读 wikipedia 构建的同义词库中的一些随机条目：

```
theory -> analysis, concept, approach, idea, method
voice -> vocal, tone, sound, melody, singing
james -> william, john, thomas, robert, george, charles 
```

这些相似词的列表完全没有人为干预 - 你输入文本并在几个小时后回来。

**短语的问题**

您可能会问，为什么我们对较长的短语不做同样的事情，例如“姜狐爱水果”。这是因为我们没有足够的文本。为了让我们*可靠地*确定 X 与什么相似，我们需要查看许多在上下文中使用 X 的示例。当 X 是像“声音”这样的单个词时，这并不太难。然而，随着 X 变长，找到 X 自然出现的机会会呈指数级下降。相比之下，Google 大约有 1B 页面包含“狐狸”一词，而没有一个页面包含“姜狐狸爱水果”，尽管它是一个完全有效的英文句子，我们都明白它的意思。

**作品**

为了解决数据稀疏的问题，我们希望进行组合，即为单词提取向量，这些向量很容易从真实文本中获得，并以一种能够捕捉其含义的方式组合在一起。坏消息是到目前为止没有人能够做到这一点。

最简单和最明显的方法是将单个词向量相加或相乘。这会导致“猫追狗”和“狗追猫”对您的系统意味着相同的不良副作用。此外，如果你在乘法，你必须格外小心，否则每个句子最终都会由 [0,0,0,...,0] 表示，这与这一点无关。

**进一步阅读**

我不会讨论迄今为止提出的更复杂的组合方法。我建议你阅读 Katrin Erk 的[“词义和短语意义的向量空间模型：调查”](http://onlinelibrary.wiley.com/doi/10.1002/lnco.362/abstract)。这是一个很好的高级调查，可以帮助您入门。不幸的是，出版商的网站上没有免费提供，请直接给作者发送电子邮件以获取副本。在那篇论文中，您将找到对许多更具体方法的参考。更容易理解的是[Mitchel 和 Lapata (2008)](http://aclweb.org/anthology-new/P/P08/P08-1028.pdf)以及[Baroni 和 Zamparelli (2010)](http://clic.cimec.unitn.it/marco/publications/bz-adj-com-emnlp10.pdf)。

* * *

在@vpekar 发表评论后进行编辑：这个答案的底线是强调这样一个事实，即虽然*确实存在幼稚的方法*（例如加法、乘法、表面相似性等），但这些方法*从根本上来说是有缺陷*的，通常人们不应该期望从他们。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-03-27T23:03:38.170

我有类似的解决方案，但可能对熊猫有用

```
import math
import re
from collections import Counter
import pandas as pd

WORD = re.compile(r"\w+")

def get_cosine(vec1, vec2):
    intersection = set(vec1.keys()) & set(vec2.keys())
    numerator = sum([vec1[x] * vec2[x] for x in intersection])

    sum1 = sum([vec1[x] ** 2 for x in list(vec1.keys())])
    sum2 = sum([vec2[x] ** 2 for x in list(vec2.keys())])
    denominator = math.sqrt(sum1) * math.sqrt(sum2)

    if not denominator:
        return 0.0
    else:
        return float(numerator) / denominator

def text_to_vector(text):
    words = WORD.findall(text)
    return Counter(words)

df=pd.read_csv('/content/drive/article.csv')
df['vector1']=df['headline'].apply(lambda x: text_to_vector(x)) 
df['vector2']=df['snippet'].apply(lambda x: text_to_vector(x)) 
df['simscore']=df.apply(lambda x: get_cosine(x['vector1'],x['vector2']),axis=1) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-21T07:42:36.927

试试这个。[从https://conceptnet.s3.amazonaws.com/downloads/2017/numberbatch/numberbatch-en-17.06.txt.gz](https://conceptnet.s3.amazonaws.com/downloads/2017/numberbatch/numberbatch-en-17.06.txt.gz)下载文件“numberbatch-en-17.06.txt”并解压。函数“get_sentence_vector”使用词向量的简单总和。然而，它可以通过使用加权和来改进，其中权重与每个单词的 Tf-Idf 成正比。

```
import math
import numpy as np

std_embeddings_index = {}
with open('path/to/numberbatch-en-17.06.txt') as f:
    for line in f:
        values = line.split(' ')
        word = values[0]
        embedding = np.asarray(values[1:], dtype='float32')
        std_embeddings_index[word] = embedding

def cosineValue(v1,v2):
    "compute cosine similarity of v1 to v2: (v1 dot v2)/{||v1||*||v2||)"
    sumxx, sumxy, sumyy = 0, 0, 0
    for i in range(len(v1)):
        x = v1[i]; y = v2[i]
        sumxx += x*x
        sumyy += y*y
        sumxy += x*y
    return sumxy/math.sqrt(sumxx*sumyy)

def get_sentence_vector(sentence, std_embeddings_index = std_embeddings_index ):
    sent_vector = 0
    for word in sentence.lower().split():
        if word not in std_embeddings_index :
            word_vector = np.array(np.random.uniform(-1.0, 1.0, 300))
            std_embeddings_index[word] = word_vector
        else:
            word_vector = std_embeddings_index[word]
        sent_vector = sent_vector + word_vector

    return sent_vector

def cosine_sim(sent1, sent2):
    return cosineValue(get_sentence_vector(sent1), get_sentence_vector(sent2)) 
```

我确实运行了给定的句子并发现了以下结果

```
s1 = "This is a foo bar sentence ."
s2 = "This sentence is similar to a foo bar sentence ."
s3 = "What is this string ? Totally not related to the other two lines ."

print cosine_sim(s1, s2) # Should give high cosine similarity
print cosine_sim(s1, s3) # Shouldn't give high cosine similarity value
print cosine_sim(s2, s3) # Shouldn't give high cosine similarity value

0.9851735249068168
0.6570885718962608
0.6589335425458225 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-13T22:56:14.267

感谢@vpekar 您的实施。它有很大帮助。我刚刚发现它在计算余弦相似度时错过了 tf-idf 权重。Counter(word) 返回一个字典，其中包含单词列表及其出现。

cos(q, d) = sim(q, d) = (q · d)/(|q||d|) = (sum(qi, di)/(sqrt(sum(qi2)))*(sqrt( sum(vi2))) 其中 i = 1 到 v)

*   qi 是查询中术语 i 的 tf-idf 权重。
*   di 是 tf-idf
*   文档中术语 i 的权重。|q| 和 |d| 是 q 和 d 的长度。
*   这是 q 和 d 的余弦相似度。. . . . . 或者，等效地，q 和 d 之间的夹角的余弦。

请随时[在此处](https://github.com/puneeth-u-bharadwaj/Data-Mining/blob/master/Cosine-Similarity/src/final/Puneeth_Umesh_Bharadwaj_PA1.py)查看我的代码。但首先你必须下载 anaconda 包。它会自动在 Windows 中设置你的 python 路径。在 Eclipse 中添加这个 python 解释器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-05T05:44:39.420

好吧，如果你知道像 Glove/Word2Vec/Numberbatch 这样的[词嵌入，你的工作就完成了一半。](https://nlp.stanford.edu/projects/glove/)如果不让我解释如何解决这个问题。将每个句子转换为词标记，并将这些标记中的每一个表示为高维向量（使用预训练的词嵌入，或者您甚至可以自己[训练](https://www.tensorflow.org/tutorials/word2vec)它们！）。因此，现在您只是不捕获它们的表面相似性，而是提取构成整个句子的每个单词的含义。在此之后计算它们的余弦相似度，你就设置好了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-20T13:02:33.370

在不使用外部库的情况下，您可以尝试 BLEU 或其替代品。你可以参考它的标准实现：[SACREBLEU](https://github.com/mjpost/sacrebleu)。

# java - Android：异常“java.lang.IllegalStateException：方案'https'未注册”

> ID：15173228
> 
> 赞同：1
> 
> 时间：2013-03-02T10:06:53.077
> 
> 标签：java, android, illegalstateexception

由于强制关闭，用户向我发送了此堆栈跟踪：

```
java.lang.IllegalStateException: Scheme 'https' not registered.
at org.apache.http.conn.scheme.SchemeRegistry.getScheme(SchemeRegistry.java:80)
at org.apache.http.impl.conn.DefaultHttpRoutePlanner.determineRoute(DefaultHttpRoutePlanner.java:107)
at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:581)
at org.apache.http.impl.client.DefaultRequestDirector.handleResponse(DefaultRequestDirector.java:923)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:473)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
at com.augustinianum.augustinianum.AlarmService.doWakefulWork(AlarmService.java:70)
at com.commonsware.cwac.wakeful.WakefulIntentService.onHandleIntent(WakefulIntentService.java:106)
at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.os.HandlerThread.run(HandlerThread.java:60) 
```

这是强制关闭类的最重要的代码，它是 Commonsware 的 WakefulIntentService ，它基本上只是一个普通的 IntentService 但是这个自动持有唤醒锁（不要认为这与异常有任何关系，但是以防万一）。此代码下载网页的 HTML 代码：

```
private DefaultHttpClient createHttpClient() {
        HttpParams my_httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(my_httpParams, 3000);
        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        ThreadSafeClientConnManager multiThreadedConnectionManager = new ThreadSafeClientConnManager(my_httpParams, registry);
        DefaultHttpClient httpclient = new DefaultHttpClient(multiThreadedConnectionManager, my_httpParams);
        return httpclient;
    }

@Override
    protected void doWakefulWork(Intent arg0) {

        int mStatusCode = 0;
        String content = "";

        String url = "http://www.example.com/";

        DefaultHttpClient httpclient = createHttpClient();
        HttpGet httpget = new HttpGet(url);

        try {
            HttpResponse response = httpclient.execute(httpget);
            StatusLine statusLine = response.getStatusLine();
            mStatusCode = statusLine.getStatusCode();

            if (mStatusCode == 200){
                content = EntityUtils.toString(response.getEntity());
            }

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

第 70 行（崩溃的地方）是这一行：

```
HttpResponse response = httpclient.execute(httpget); 
```

在我的清单中，我只是这样声明：

```
<service
    android:name=".AlarmService">
</service> 
```

奇怪的是，此异常并非发生在所有设备上，也并非总是在执行此代码时发生。大多数时候，这段代码执行得很好，但有时会发生这种异常。

有人知道我能做些什么吗？

非常感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:12:26.843

您不需要 a `ThreadSafeClientConnManager`，因为 a`IntentService`只使用一个线程。我会删除所有这些东西，这将摆脱您的 custom `SchemeRegistry`，这可能会帮助您处理未注册的计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T05:46:27.387

我也遇到过这样的问题，我得到了解决方案，这个检查你的代理设置的简单解决方案，这是因为网络代理设置的

只需删除代理并尝试 :) 它对我有用

# size - CodeChef 中的源限制是什么意思？

> ID：15173229
> 
> 赞同：0
> 
> 时间：2013-03-02T10:07:00.007
> 
> 标签：size

在[CodeChef](https://en.wikipedia.org/wiki/CodeChef)上给出的一个练习题中，源限制写在问题下面。这是什么意思？

PS：如果我分配一个大小为 1000 X 1000 的数组并且源限制为 50,000 Bytes，那么我是否没有违反源限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:11:23.820

*源限制*是源代码的最大大小；*不是JVM在运行时*分配的内存，所以没有。您不会违反源限制。阅读[此处](http://blog.codechef.com/2009/02/25/codechef-tutorial-your-first-non-trivial-problem/)和`Ctrl`+`F`以了解来源限制。

然而，为了阻止像我这样的懒惰的程序员，问题制定者设置了一个*代码*大小限制，即“源限制”。所以你的程序的源代码必须最多 2000*字节*- 上面的 CodeChef*链接*。

# email - 如何使用 Symfony2 和 Swiftmailer 为电子邮件发送时间设置计时器

> ID：15173232
> 
> 赞同：0
> 
> 时间：2013-03-02T10:07:17.677
> 
> 标签：email, symfony, timer, swiftmailer

Symfony2 使用[Swiftmailer](http://swiftmailer.org/)包来发送电子邮件。

从创建定期通讯的角度来看，了解是否有可能为电子邮件发送时间设置计时器是很有趣的。即，今天准备电子邮件并设置计时器以使其明天发送。

我如何在 Symfony2 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T10:21:59.907

我想到的第一个解决方案是使用`publishAt`和`isPublished`字段将时事通讯存储在数据库中，并创建一个命令来获取时事通讯`NOW() >= publishAt AND isPublished = false`，邮寄它们并将`isPublished`标志设置为`true`。该命令将由 cron 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:32:07.900

首先，没有标准的方式来安排定期电子邮件。

我认为最好的方法是使用[MailChimp](http://www.mailchimp.com)之类的工具，您可以在其中以编程方式管理和安排邮寄活动。为此有 Symfony2 捆绑包 - [MZMailChimpBundle](https://github.com/miguel250/MZMailChimpBundle)。

如果您不想使用 MailChimp（或类似的），那么[Elnur](https://stackoverflow.com/users/745188)的解决方案非常好。

或者，您可以使用[mailing queue](http://www.postfix.org/SCHEDULER_README.html)，但它是相当高级的主题，对于您的案例来说是额外的工作。

# symfony - Symfony2 供应商捆绑路由

> ID：15173235
> 
> 赞同：1
> 
> 时间：2013-03-02T10:08:00.237
> 
> 标签：symfony, routing

我制作了一个捆绑包，应该提供简单的“拖放文件”样式上传。问题是，当我在 symfony2 项目中安装包时，我需要提供到我的页面的上传文件路径。

删除上传包路由：

```
pi_flex_drop_uploader_receiver:
    pattern: /drop_upload
    defaults: { _controller: PIFlexDropUploaderBundle:Upload:upload } 
```

但是，在我应该使用捆绑包的项目中：

树枝模板片段：

```
$('textarea').dropLoad({
    uploadScript: "{{ path('pi_flex_drop_uploader_receiver') }}",

    onFileUploadEnd: function(value, data) {
        console.log(data.data.url);
    }
}); 
```

抛出异常：

> 在第 15 行的 PIFlexBlogBu​​ndle:Page:admin_article.html.twig 中呈现模板期间引发了异常（“路由“pi_flex_drop_uploader_receiver”不存在。”）。

为什么会这样？我是否具有跨捆绑路由访问权限？一个包中的模板可以访问其他包的路由吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:00:46.333

感谢@Jaitsu 的评论，我发现仅仅将捆绑软件添加到 AppKernel 是不够的。我必须在全局 symfony 应用程序路由文件中导入它的路由。

# c - Windows 等效的 POSIX srandom(...) 和 random() 函数？

> ID：15173238
> 
> 赞同：3
> 
> 时间：2013-03-02T10:08:20.033
> 
> 标签：c, windows, posix, prng

我正在尝试将一些代码从 UNIX 移植到 Windows，并且我需要 POSIX`srandom(x)`和`random()`函数的实现，对于给定的种子`x`，生成与符合 POSIX.1-2001 的相同的数字序列。Windows 上有哪些可用选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T10:41:36.903

`srandom`和family是glibc的成员。您可以将[glibc 中的 srandom/random 源代码](https://sourceware.org/git/?p=glibc.git;a=blob_plain;f=stdlib/random.c;hb=HEAD)复制到您的应用程序中，只要它与许可证兼容。如果您正在寻找另一种实现方式，任何小额

请记住，POSIX 实际上是接口一致性，而不是实现一致性——它实际上并没有说明生成它的机制是什么，也没有说明结果数字应该是什么。

如果您希望在多个平台上保证相同的数字序列，那么您不应该依赖任何随机数生成器的标准库实现，您应该自己制作或回收已知的实现。

> 正如 JWWalker 在评论中提到的那样，有一个非常好的[提升随机实现](http://www.boost.org/doc/libs/1_61_0/doc/html/boost_random/reference.html)，它`C++`为随机数提供了一组很好的类，但那是不同的语言，所以可能不直接适合`C++`。`C`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:16:12.670

您可以在 Windows中检查[rand_s](http://msdn.microsoft.com/en-us/library/sxtz2fa8%28v=vs.80%29.aspx) 和[srand函数。](http://msdn.microsoft.com/en-us/library/f0d4wb4t%28v=vs.80%29.aspx)但是，我不确定它们是否符合 POSIX 标准。

**编辑**

一个更好的似乎是[CryptGenRandom](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379942%28v=vs.85%29.aspx)。检查此[链接](https://www.securecoding.cert.org/confluence/display/seccode/MSC30-C.+Do+not+use+the+rand%28%29+function+for+generating+pseudorandom+numbers)以获取详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T10:39:36.840

如果您正在寻找一些简单的伪随机生成器，您可以使用线性同余生成器[http://en.wikipedia.org/wiki/Linear_congruential_generator](http://en.wikipedia.org/wiki/Linear_congruential_generator%20%20Linear%20congruential%20generator%20at%20Wikipedia)

例如。第一个例子：

```
unsigned int seed = 2;

unsigned int rand()
{
   seed = 1664525 * seed + 1013904223;
   return seed;
}

void srand(unsigned int new_seed)
{
   seed = new_seed;
} 
```

# javascript - Facebook 从脚本编辑 cookie

> ID：15173244
> 
> 赞同：1
> 
> 时间：2013-03-02T10:09:27.617
> 
> 标签：javascript, facebook, cookies

我正在 Facebook 上制作脚本，由于`c_user`. 所以我想编辑那个 cookie，但当我这样做时，Facebook 将我注销。

有没有办法做到这一点，或者阻止 FB Ajax 读取 cookie 或只读取特定的 cookie？

# python - 所需的精确十进制值

> ID：15173250
> 
> 赞同：-1
> 
> 时间：2013-03-02T10:10:05.007
> 
> 标签：python, decimal

> 输入：

```
from decimal import *
k=10
for i in range(k):
    getcontext().prec=i+1
    print(Decimal(103993)/Decimal(33102)) 
```

> 输出

```
3  # for k=0
3.1
3.14
3.142
3.1416
3.14159
3.141593 # for k=6
3.1415927
3.14159265
3.141592653 
```

我需要输出中的第 7 项（对于 k=6）正好是 3.141592，

对于 k=20，该值应为 3.14159265301190260407

103993/33102 保持这个分数不变（这不应该在输入中改变）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:15:15.907

> 我需要输出中的第 7 项（对于 k=6）正好是 3.141592，

您看到的原因`3.141593`是该值被四舍五入到最接近的带有六位小数的数字。要更改舍入模式，请`getcontext().rounding`根据需要进行设置。

[可用的模式有](http://docs.python.org/2/library/decimal.html#decimal.Context)：

*   ROUND_CEILING（朝向无穷大），
*   ROUND_DOWN（趋近于零），
*   ROUND_FLOOR（朝向 -Infinity），
*   ROUND_HALF_DOWN（到最近的平局趋于零），
*   ROUND_HALF_EVEN（到最近的关系，关系到最近的偶数），
*   ROUND_HALF_UP（到最近的平局从零开始），或
*   ROUND_UP（远离零）。
*   ROUND_05UP（如果四舍五入后的最后一位为 0 或 5，则远离零；否则为零）

要截断数字，请向零舍入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:05:19.863

利用

```
getcontext().rounding = ROUND_DOWN 

print(Decimal(103993)/Decimal(33102)) 
```

希望这能解决您的问题。

# python - 从Django中具有外键关系的两个表中检索数据？

> ID：15173251
> 
> 赞同：0
> 
> 时间：2013-03-02T10:10:05.750
> 
> 标签：python, mysql, django

```
 This is my models.py file 

 from django.db import models

   class Author(models.Model):
        first_name = models.CharField(max_length=30)
        last_name = models.CharField(max_length=40)
        email = models.EmailField()
        age=models.IntegerField()

        class Meta:
        db_table=u'Author Info'

        def __unicode__(self):
            return u"%d %s %s %s" % (self.pk, self.name, self.author.name, self.publisher_name)

        def books(self):
            return Book.objects.filter(author=self)

    class Book(models.Model):
        book_name=models.CharField(max_length=30)
        publisher_name=models.CharField(max_length=40)
        author=models.ForeignKey(Author)

        class Meta:
            db_table = u'Book Name'

        def __unicode__(self):
            return u'%d %s %s' % (self.pk, self.first_name, self.last_name) 
```

我想在 django 中显示 2 个表中的数据。请指导我如何编写 views.py 和模板。我在作者表中使用外键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:24:33.913

以下视图和 html 用于显示具有相应作者详细信息的所有书籍。

视图.py

```
def client_add(request):
   books = Book.objects.all()
   return render_to_response('book_details.html', locals(),    context_instance=RequestContext(request)) 
```

book_details.html

```
<body>
{% for book in books %}
{{book.book_name}}
{{book.publisher_name}}
{{book.author.first_name}}
{{book.author.last_name}}
{{book.author.email}}
{{book.author.age}}
{% endif %}
</body> 
```

以下视图和 html 用于显示特定作者对应详细信息的书籍。

视图.py

```
def client_add(request):
   books = Book.objects.all(author_last_name ="author_last_name")
   return render_to_response('book_details.html', locals(),    context_instance=RequestContext(request)) 
```

book_details.html

```
<body>
{% for book in books %}
{{book.book_name}}
{{book.publisher_name}}
{{book.author.first_name}}
{{book.author.last_name}}
{{book.author.email}}
{{book.author.age}}
{% endif %}
</body> 
```

# iphone - 如果我们在 iphone 中最小化应用程序，应用程序将关闭 - 这是开发的好方法

> ID：15173253
> 
> 赞同：-1
> 
> 时间：2013-03-02T10:10:38.363
> 
> 标签：iphone

```
If App is MINIMIZED?  (It currently logs out). 
```

苹果需要什么？什么是最佳实践？

我们是否可以选择在最小化时保持应用程序登录或注销？请说....哪个选项最好？

我在一个应用程序中工作，我的第一个视图是关于登录详细信息。但是，如果我最小化或者我可以运行其他应用程序，那么第一个应用程序也在后台运行，但它从第一个视图开始。我的问题是，通常如果我们可以最小化应用程序而不是仅从最后一个视图开始。但在我的应用程序中，它从第一个视图开始意味着登录视图。因此，如果应用程序最小化，最好从第一个视图开始。请说…..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:25:36.990

1.  当您按下主页按钮（最小化）时，iOS 应用程序不会关闭。它在后台运行。您可以在最小化的相同状态下再次运行它。
2.  我猜你的应用程序的第一页是登录屏幕。这是你的决定。如果您的应用程序是关于财务的，或者它有一些需要保护他人的数据。最好在您的应用最小化时注销用户。
3.  如果您的应用程序没有任何无法修改的数据，那么您可以让用户保持登录状态。但是，这是您的决定。
4.  Apple 没有任何关于在最小化您的应用程序时应该做什么的指南。

# javascript - 如何在悬停时选择元素

> ID：15173254
> 
> 赞同：0
> 
> 时间：2013-03-02T10:10:47.487
> 
> 标签：javascript, jquery

将元素悬停在 HTML 上时如何选择元素。就像如果我悬停一个 div 或其子元素，那么我需要控制它。我想在它周围显示一个边框。我的代码是

```
jQuery(document).ready(function(){
    $(window).bind('mousemove', function(e) {
        current_id = $(e.target).attr('id');
        jQuery('#'+current_id).css('border','2px solid yellow');        
    });
}); 
```

但是如果我悬停一个特定的div，这段代码会给我控制，但我需要我可以显示一个边框，即使我悬停在一个div内，如果那个div包含一个孩子，而不是悬停它我可以在那个孩子周围得到一个边框不是那个父 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:16:39.820

如果您只想在页面上的任何元素上显示边框，您可能可以不使用 JS，仅使用 CSS：

```
*:hover {
    border: 2px solid yellow;
} 
```

（出于调试目的，最好使用`outline`而不是`border`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:14:44.467

在所有元素上使用`hover`事件。`div`我创建了一个新类来轻松应用和删除应用的样式。如果您需要将此样式应用于输入元素或 span 例如，您还可以添加更多选择器：

`$('div, span, input').on('hover', ...);`

```
<style>
    .myBorder{
        border : 2px solid yellow;
    }
</style>

$('div').on('hover', 
    function(e) {
        $(this).addClass('myBorder');
    },
    function(e){
        $(this).removeClass('myBorder');
    }
); 
```

# css - CSS弹出菜单在IE7中不起作用

> ID：15173256
> 
> 赞同：0
> 
> 时间：2013-03-02T10:10:52.493
> 
> 标签：css, drop-down-menu, internet-explorer-7

谁能告诉我为什么[http://zahnarzt-christmann.de/](http://zahnarzt-christmann.de/)上的弹出菜单在我测试的每个浏览器中都可以正常工作，除了在 IE7 中？

显然横幅以某种方式迫使菜单松开悬停状态，因为如果我将横幅进一步向下移动它就可以了。

现在我已经尝试了我能想到的所有 z-indexing 组合，但没有任何帮助。那么任何人都可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:47:48.490

Try make the following changes to `#access ul ul` :

```
position:absolute;
top:60px; 
```

You can leave the `z-index` set as it is. It works for me in IE with with the compatibility mode targeted on version 7\.

# matlab - 在 4x5 的矩阵中找到前 5 个最高的数字

> ID：15173257
> 
> 赞同：0
> 
> 时间：2013-03-02T10:10:57.453
> 
> 标签：matlab, matrix, max

4x3 矩阵中有 12 个数字，我需要找出其中前 5 个最高的数字。例如，

```
B=[11 13 21;10 8 5;3 2 6;7 18 6] 
```

因此，前 5 个最高的数字应该是

```
ans=[21;18;13;11;10] 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:48:34.433

Sort the data:

```
Bsorted = sort(B(:), 'descend'); 
```

And pick the top 5:

```
Btop5 = Bsorted(1:5); 
```

# ios - 将 NSManagedObjectContext 对象传递给 UINavigationController 中的第三级视图控制器

> ID：15173258
> 
> 赞同：1
> 
> 时间：2013-03-02T10:11:00.997
> 
> 标签：ios, objective-c

我希望能够将托管对象上下文传递给 UITableView 视图，以便能够保存日期。我怎样才能做到这一点？我应该添加什么？我连接了模型并使用实体事件和属性时间戳对其进行了配置。这是项目，它真的很简单，我认为你不会花时间去理解，因为除了导航栏添加按钮之外我没有添加太多东西，其他的都是基础知识。我确实试图让它工作，但出现一个错误，告诉我 managedObjectContext 传递的是 nil。[https://www.dropbox.com/s/a1348diy589c2s0/Demo.zip?m](https://www.dropbox.com/s/a1348diy589c2s0/Demo.zip?m)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:53:05.453

我检查了你的代码。您没有模型类 e `Event.h(m)`。首先，您必须创建它。

1.  去`Demo.xcdatamodeld`选择你的实体`Event`添加一个新的文件子类`NSManagedObjectContext`

2.  添加`#import "Event.h"` `#import "DemoAppDelegate.h"`到您的 DemoDateViewController.m

3.  ```
    NSManagedObjectContext *context = [(DemoAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
    Event *event =  [NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:context];  
    [event setTimeStamp:[NSDate date]];
    NSError *error = nil;
      // If you have a propert called `managedObjectContext` assign `context` to it and use every where
      // self.managedObjectContext = context

      // or this is enough
     if (![context save:&error])
     {

      NSLog(@"insertNewObject error = %@", error);
     } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:14:20.730

假设您在应用程序委托中声明并初始化您的托管上下文，就像在项目模板中一样，您可以从那里获取您的上下文。

在您的视图控制器中导入您的应用程序委托

```
#import "MyAppDelegate.h" 
```

并访问托管上下文

```
context = [(MyAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
```

# javascript - 条件和正则表达式 phonegap

> ID：15173265
> 
> 赞同：0
> 
> 时间：2013-03-02T10:11:57.283
> 
> 标签：javascript, regex, cordova

我不明白为什么我的情况不起作用

```
$('#resPage').live('pageshow', function(event) {

    application.previousButton();

    //get pdf
    var text = '';
    var value;
    var get = application.readGet();
    switch(get['id']){
        case '1':
            var patt = /annales/g;
            var cutLen = 20;
            break;
         case '2':
             var patt = /copies/g;
             var cutLen = 19;
             break;
    }
    $.ajax({
        url:application.api+'/ressources',
        success:function(data){
            text = "<ul data-role='listview' data-inset='true' >"
            data = JSON.parse(data);
            for(elem in data.files){
            console.log(elem)
            console.log(patt.test(data.files[elem]));
            if(patt.test(data.files[elem])){
                console.log('add');
                value = data.files[elem].substr(1);
                text += application.textRelLink(value,cutLen);
            }
        }   
        text +="</ul>" 
        $('#resPage .content').html(text);
        $('#resPage .content ul').listview();
        }
    })
}); 
```

在我的日志中，我有：

```
03-02 11:03:14.722: D/CordovaLog(23226): 0
03-02 11:03:14.722: D/CordovaLog(23226): false
03-02 11:03:14.722: D/CordovaLog(23226): 1
03-02 11:03:14.722: D/CordovaLog(23226): false
03-02 11:03:14.722: D/CordovaLog(23226): 2
03-02 11:03:14.722: D/CordovaLog(23226): true
03-02 11:03:14.722: D/CordovaLog(23226): 3
03-02 11:03:14.722: D/CordovaLog(23226): true
03-02 11:03:14.730: D/CordovaLog(23226): 4
03-02 11:03:14.730: D/CordovaLog(23226): true
03-02 11:03:14.730: D/CordovaLog(23226): 5
03-02 11:03:14.745: D/CordovaLog(23226): false
03-02 11:03:14.745: D/CordovaLog(23226): 6
03-02 11:03:14.745: D/CordovaLog(23226): false 
```

但我从来没有在真实时添加

谢谢您的帮助

编辑：

解析前的数据值

```
03-02 11:25:05.253: D/CordovaLog(23611): {"files":[".\/thumbs\/pdf\/methodo\/sdsdfsd_sdf.pdf",".\/thumbs\/pdf\/methodo\/test!!.pdf",".\/thumbs\/pdf\/annales\/ddfgdfg.pdf",".\/thumbs\/pdf\/annales\/big.pdf",".\/thumbs\/pdf\/annales\/test.pdf",".\/thumbs\/pdf\/copies\/test.pdf",".\/thumbs\/pdf\/poly\/gdfhf.pdf"],"dirs":[".\/thumbs\/pdf\/poly\/",".\/thumbs\/pdf\/copies\/",".\/thumbs\/pdf\/annales\/",".\/thumbs\/pdf\/methodo\/"]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:02:01.670

重新测试前需要重置`lastIndex`正则表达式的属性

```
console.log(patt.test(data.files[elem]));
patt.lastIndex = 0;
if(patt.test(data.files[elem])){ 
```

或者，如果您`g`从正则表达式中删除不必要的标志，则无需 reset `lastIndex`。

当正则表达式与`g`标志一起使用时，它会跟踪找到最后一个匹配项的位置，以便下一个测试从该点开始搜索，即`lastIndex`.

请参阅[为什么在 Javascript 中带有全局标志的 RegExp 会给出错误的结果？](https://stackoverflow.com/questions/1520800/why-regexp-with-global-flag-in-javascript-give-wrong-results).

# java - 如何从列表创建对象的二维数组？

> ID：15173267
> 
> 赞同：0
> 
> 时间：2013-03-02T10:12:35.757
> 
> 标签：java, arrays, swing, arraylist, jtable

我想转换`ArrayList`成二维数组`Objects`。列表类似于

```
[[AD,ADCB, N], [AFC, Fund, Y], [IO, dfdfdfd, N]] 
```

我想将此列表转换为对象数组，并且我想将 Y、N 字段修改为布尔值，例如

```
Object[] rowdata = {
    {AD, ADCB, Boolean.FALSE}, 
    {AFC, Fund, Boolean.TRUE}, 
    {IO, dffdfdf, Boolean.FALSE}} 
```

之后我可以填充到`JTable`模型中，这些`boolean`值将显示为`JCheckboxes`.

将此列表转换为二维对象数组以便我可以传递的最佳方法应该是什么`JTable` `TableModel`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:19:42.150

在您的示例中，您展示了要存储的每个对象的三个成员。因此，如果 N 是数组列表中的项目数，则需要一个 N * 3 的多维数组。即：

```
Object[][] table = new Object[list.size()][3]; 
```

然后你将使用 for 循环，循环遍历列表中的每个对象：

```
for(int x = 0; x < list.size(); x++)
{
     Object currentObject = list.get(x);
     table[x][0] = currentObject.getValue();
     // Load the first value.
     ...
     table[x][2] = currentObject.getYorN().equalsIgnoreCase("Y")? true:false;
     // Embed a selection statement to decide if to store true or false.
} 
```

# r - 使用 plyr 按类别计算最频繁的级别

> ID：15173269
> 
> 赞同：4
> 
> 时间：2013-03-02T10:12:47.797
> 
> 标签：r, plyr

我想使用下面的代码使用 plyr 按类别计算最常见的因子水平。数据框`b`显示请求的结果。为什么`c$mlevels`只有值“数字”？

```
require(plyr)
set.seed(0)
a <- data.frame(cat=round(runif(100, 1, 3)),
                levels=factor(round(runif(100, 1, 10))))
mode <- function(x) names(table(x))[which.max(table(x))]
b <- data.frame(cat=1:3,
                mlevels=c(mode(a$levels[a$cat==1]),
                       mode(a$levels[a$cat==2]),
                       mode(a$levels[a$cat==3])))
c <- ddply(a, .(cat), summarise,
           mlevels=mode(levels)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T10:42:15.790

当您使用 时`summarise`，`plyr`在检查函数 in 之前似乎“看不到”在全局环境中声明的函数`base`：

我们可以使用 Hadley 的便捷`pryr`包检查这一点。您可以通过以下命令安装它：

```
library(devtools)
install_github("pryr")

require(pryr)
require(plyr)
c <- ddply(a, .(cat), summarise, print(where("mode")))
# <environment: namespace:base>
# <environment: namespace:base>
# <environment: namespace:base> 
```

基本上，它不会读取/知道/查看**您的** `mode`功能。有*两种*选择。第一个是@AnandaMahto 的建议，我也会这样做，并建议你坚持下去。另一种选择是不使用`summarise`并调用它，`function(.)`以便`mode`“看到”全局环境中的函数。

```
c <- ddply(a, .(cat), function(x) mode(x$levels))
#   cat V1
# 1   1  6
# 2   2  5
# 3   3  9 
```

为什么这行得通？

```
c <- ddply(a, .(cat), function(x) print(where("mode")))
# <environment: R_GlobalEnv>
# <environment: R_GlobalEnv>
# <environment: R_GlobalEnv> 
```

因为正如您在上面看到的，它会读取位于`global environment`.

```
> mode # your function
# function(x)
#     names(table(x))[which.max(table(x))]
> environment(mode) # where it sits
# <environment: R_GlobalEnv> 
```

相对于：

```
> base::mode # base's mode function
# function (x) 
# {
#     some lines of code to compute mode
# }
# <bytecode: 0x7fa2f2bff878>
# <environment: namespace:base> 
```

[](https://github.com/hadley/devtools/wiki/Environments)**`environments`如果您有兴趣进一步阅读/探索它，[**这里有一个来自 Hadley 的很棒的 wiki**](https://github.com/hadley/devtools/wiki/Environments)。**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T10:37:36.650

您在示例中几乎专门使用了现有函数名称：`levels`、`cat`和`mode`. 一般来说，这不会造成太大的问题——例如，调用 data.frame "df" 不会破坏 R 的`df()`功能。但它几乎总是会导致代码更加模棱两可或令人困惑，在*这种*情况下，它会让事情“崩溃”。Arun 的回答*很好*地说明了原因。

您可以通过重命名“模式”功能轻松解决问题。在下面的示例中，除了重命名它之外，我还对其进行了一些简化，并且它可以按您的预期工作。

```
Mode <- function(x) names(which.max(table(x)))
ddply(a, .(cat), summarise,
      mlevels=Mode(levels))
#   cat mlevels
# 1   1       6
# 2   2       5
# 3   3       9 
```

当然，有一个非常麻烦的解决方法：使用`get`并指定在哪里搜索函数。

```
> mode <- function(x) names(table(x))[which.max(table(x))]
> ddply(a, .(cat), summarise, mlevels = get("mode", ".GlobalEnv")(levels))
  cat mlevels
1   1       6
2   2       5
3   3       9 
```**

# php - 使用 setParameter 将 PHP 变量解析为 XSLT

> ID：15173271
> 
> 赞同：-2
> 
> 时间：2013-03-02T10:12:58.377
> 
> 标签：php, xml, xslt

我有这个 xml 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>

<bookstore>

<book category="COOKING">
  <title lang="en">Everyday Italian</title>
  <author>Giada De Laurentiis</author>
  <year>2005</year>
  <price>30.00</price>
</book>

<book category="CHILDREN">
  <title lang="en">Harry Potter</title>
  <author>J K. Rowling</author>
  <year>2005</year>
  <price>29.99</price>
</book>

<book category="WEB">
  <title lang="en">XQuery Kick Start</title>
  <author>James McGovern</author>
  <author>Per Bothner</author>
  <author>Kurt Cagle</author>
  <author>James Linn</author>
  <author>Vaidyanathan Nagarajan</author>
  <year>2003</year>
  <price>49.99</price>
</book>

<book category="WEB">
  <title lang="en">Learning XML</title>
  <author>Erik T. Ray</author>
  <year>2003</year>
  <price>39.95</price>
</book>

</bookstore> 
```

我有这个 php 代码

```
<?php
$xslDoc = new DOMDocument();
$xslDoc->load("test.xsl");

$xmlDoc = new DOMDocument();
$xmlDoc->load("test.xml");

$xsltProcessor = new XSLTProcessor();
$xsltProcessor->registerPHPFunctions();
$xsltProcessor->importStyleSheet($xslDoc);
$xsltProcessor->setParameter('','s_name', 'title');
$xsltProcessor->setParameter('','s_value', 35);

echo $xsltProcessor->transformToXML($xmlDoc);
?> 
```

这是我的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:php="http://php.net/xsl" xmlns:str="http://exslt.org/strings"  exclude-result-prefixes="str">

<xsl:template match="/">
  <html>
  <body>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th>O/p</th>
    </tr>
    <xsl:for-each select="/bookstore/book[price>$s_value]/$s_name">
    <tr>
      <td><xsl:value-of select="."/></td>
    </tr>
    </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

在这里，我想向我的 xsl 转换发送一些参数。这是`s_name`和`s_value`

这给了我错误

如果我只使用`s_value`那么它工作正常n xsl 将是

```
<xsl:for-each select="/bookstore/book[price>$s_value]/title"> 
```

如果我同时使用，那么它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:30:01.697

这不是有效的 XPath：

```
/bookstore/book[price>$s_value]/$s_name 
```

因为在这样的斜线之后不能出现变量。为了完成你想做的事情，试试这个：

```
/bookstore/book[price>$s_value]/*[local-name() = $s_name] 
```

# c# - Webform 中的 HTML 助手？

> ID：15173272
> 
> 赞同：5
> 
> 时间：2013-03-02T10:13:21.307
> 
> 标签：c#, asp.net, .net, webforms, helpers

我有一个旧网站，我想使用 HTML 助手之类的东西来生成特殊的 HTML（在这种情况下是复杂的按钮）。我知道这在 ASP.NET MVC 中是如何工作的，但我如何在 Webform（不是 Razor）中做到这一点。

我已经阅读了关于这样的静态方法的建议：

```
public class Helpers
{
    public static string Label1(string target, string text)
    {
        return String.Format("<label for= '{0}'>{1}</label>", target, text);
    }
} 
```

但是如何在 Webform 中使用它？

此致

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-17T11:19:20.997

放入`Helpers.cs`您的`App_Code`文件夹，然后您可以从`aspx`文件中这样调用它：

```
<div class="example>
    <%= Helpers.Label1("some", "text") %>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T10:17:21.553

在你的解决方案。添加一个`ASP.net Folder`名为 code 的特殊文件夹。`Helpers.cs`然后将您的文件粘贴到其中。然后你就可以访问它了。

# java - 如何使用Java中的正则表达式从单词的第一个中删除@符号？

> ID：15173273
> 
> 赞同：1
> 
> 时间：2013-03-02T10:13:24.367
> 
> 标签：java, regex

我有像这样的单词序列

```
@ ABC
@ ABCCD
@CDSFSF
@SDDSD
@SFSFS 
```

100000 个单词我需要代码从所有单词序列中删除 @ 符号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T10:15:06.700

你可以这样做：

```
str = str.replaceAll("^@", ""); 
```

[ideone 上的演示。](http://ideone.com/JbPQz8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:44:22.547

实现它的最快方法当然是[replaceFirst](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)方法：

```
String exampleValue = "@ CDSFSF";

long start = System.currentTimeMillis();
for (int i = 0; i < 100000 ; i++) {
    exampleValue.replaceFirst("^@\\s+", "");
}
long end = System.currentTimeMillis();
System.out.println(end - start); 
```

在我的电脑上大约需要 350 毫秒。

但是[replaceFirst](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)方法为每个调用创建[Pattern](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)实例。

```
String exampleValue = "@ CDSFSF";
Pattern pattern = Pattern.compile("^@\\s+");
long start = System.currentTimeMillis();
for (int i = 0; i < 100000 ; i++) {
    pattern.matcher(exampleValue).replaceFirst("");
}
long end = System.currentTimeMillis();
System.out.println(end - start); 
```

在我的电脑上大约需要 150 毫秒。快两倍以上。

但是，如果您的所有案例看起来都像“@ XXXXX”，您可以编写一个代码来查找单词中的第一个字母并在此之后获取[子字符串](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#substring%28int%29)：

```
String exampleValue = "@ CDSFSF";

long start = System.currentTimeMillis();
for (int i = 0; i < 100000 ; i++) {
    char[] array = exampleValue.toCharArray();
    int c = 0;
    for (; c < array.length;c++) {
        if (Character.isLetter(array[c])) {
            break;
        }
    }
    exampleValue.substring(c);
}
long end = System.currentTimeMillis();
System.out.println(end - start); 
```

在我的电脑上大约需要 30 毫秒。最快的一个。

如果我是你，我会使用[Pattern](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)类的第二种解决方案，因为它简单快捷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:17:33.573

从所有单词中删除 @

```
(?<=\s|^)@ 
```

所以它会是

```
str.replaceAll("(?<=\\s|^)@", ""); 
```

# jquery - 基于动态类的第 n 个类型

> ID：15173282
> 
> 赞同：0
> 
> 时间：2013-03-02T10:13:53.710
> 
> 标签：jquery, css-selectors

我在这里做了一个简化版本：http: [//jsfiddle.net/Y5zYy/](http://jsfiddle.net/Y5zYy/)

我正在尝试向列表的第 n 个可见项目添加不同的 css 样式，因此，例如，当用户单击 group2 时，我希望该组的第三个项目变为黑色（即数字 4），而当前第二项，即整个列表的第三项变为黑色。

这是它的工作原理：当您单击每个组时，该组上的项目将添加一个类，说“可见”然后我希望 javascript 在每次单击后计算可见项目并向第 n 个可见项目添加一些样式，无论其数量如何在整个列表中。

## HTML：

```
 <ul>
    <li class="g1">1</li>
    <li class="g1 g2">2</li>
    <li class="g1 g2">3</li>
    <li class="g1 g2">4</li>
    <li class="g1 g2">5</li>
    <li class="g1 g2">6</li>
    <li class="g1 g2">7</li>
    <li class="g1 g2">8</li>
    <li class="g1 g2">9</li>
    <li class="g1 g2 g3">10</li>
    <li class="g1 g2 g3">11</li>
</ul>
<a id="g1" href=#>Group1</a>
<a id="g2" href=#>Group2</a>
<a id="g3" href=#>Group3</a> 
```

## JS：

```
$(window).load(function(){

         $('li:nth-of-type(3)').css({
                                  "background-color":"#000",
                                   "font-weight":"bold",

      })

 $("li").addClass("visible");
$("a").click(function() {
             $("li").removeClass("visible");
             $('li').css({
                 "background-color":"red"
                                      })
               $(this).each(function() {
     $("." + $(this).attr('id')).addClass("visible");
   });
       if( $('li.visible').length > 3 ){
         $('li:nth-of-type(3)').css({
                                  "background-color":"#000",
                                   "font-weight":"bold",

      })
}
        });

});//]]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:18:12.750

如果您`<li>`在隐藏其余元素后尝试定位组中的第三个元素，那么您应该使用`:eq()`jQuery 中的选择器：

```
$('li:eq(2)').css({
    "background-color": "#000",
    "font-weight": "bold"
}); 
```

eq() 从 0 开始，所以如果你想选择第三个`<li>`，你需要使用`:eq(2)`

如果您想切换元素的外观，我建议您添加和删除类，这样可以在不需要时更轻松地重置为默认样式：

```
$('li.visible:eq(2)').addClass('highlighted'); 
```

CSS：

```
.highlighted {
    background-color: #000;
    font-weight: bold;
} 
```

# ember.js - Ember #linkTo 从编辑记录返回时显示空白区域

> ID：15173290
> 
> 赞同：0
> 
> 时间：2013-03-02T10:14:48.593
> 
> 标签：ember.js

[这是对我之前的问题](https://stackoverflow.com/questions/15146630/render-child-records-into-specific-outlet)的跟进。

[在这里工作 JSFiddle](http://jsfiddle.net/bazzel/uCggc/)。

我的`Router`基本上看起来如下：

```
App.Router.map(function () {
    this.resource('posts', function () {
        this.resource('post', {
            'path': '/:post_id'
        }, function () {
            this.route('edit');
            this.resource('comments');
            this.resource('trackbacks');
        });
    });
}); 
```

由于我希望 my`post`和`post/edit`template 都呈现为相同`{{outlet}}`的 ，因此我覆盖了`PostEditRoute`for this （因此`renderTemplate`which 负责处理此问题）。我还需要覆盖`model`以使用`PostRoute`'s 模型：

```
App.PostEditRoute = Ember.Route.extend({
    model: function() {
        return this.modelFor('post');
    },
    deactivate: function() {
        this.currentModel.get('transaction').rollback();
    },
    renderTemplate: function() {
        this.render({
            into: 'posts'
        });   
    }
}); 
```

我的`post/edit`模板包含一个**取消**链接，我想将其“重定向”回`post`视图。

```
<script type="text/x-handlebars" data-template-name="post/edit">
    {{view Em.TextField valueBinding="title"}}
    {{view Em.TextArea valueBinding="description"}}
    {{#linkTo post}}Cancel{{/linkTo}}
</script> 
```

但这就是麻烦开始的地方：单击**取消**`post`链接将在模板中显示一个空白区域。

我还尝试将参数传递给`#linkTo`助手（`#linkTo post this`）；确实显示了`post`模板，但`Uncaught RangeError: Maximum call stack size exceeded`返回时会导致错误`post/edit`。

`post`我的问题：取消到时如何导航回`post/edit`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:02:17.900

我发现最好总是嵌套我的资源和路由，前提是它们的 UI 是嵌套的。

`edit`在他们的 UI 未嵌套`post`时嵌套会使您与 Ember 对抗，这会给您带来问题并且不允许您利用约定。

既然`edit`view 嵌套在里面`posts`，为什么不嵌套`edit`进去呢`posts`。

```
this.resource('posts', { path: '/' }, function () {
  this.route('edit', { path: '/post/:post_id/edit'});
  this.resource('post', {
    'path': '/:post_id'
  }, function () {
    this.resource('comments');
    this.resource('trackbacks');
  });
}); 
```

当我更新路线时，我能够删除很多样板代码。

这是工作小提琴：http: [//jsfiddle.net/teddyzeenny/uCggc/2/](http://jsfiddle.net/teddyzeenny/uCggc/2/)

注意：`Uncaught RangeError: Maximum call stack size exceeded`发生这种情况是因为您将`this`整个控制器传递给`linkTo`助手，而不仅仅是模型（`content`）。

这已在 Ember master 中修复，因此在您更新到最新版本之前，请使用`{{#linkTo posts.edit content}}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:47:29.547

如下定义模型和路由器映射：

```
App.Post = DS.Model.extend({
    text: DS.attr('string'),
});

App.Router.map(function() {
    this.resource('posts');
    this.resource('post', { path: '/post/:post_id' }, function() {
       this.route('edit'); 
    });
}); 
```

由于您为`resource`调用提供了一个函数`post`，Ember 会自动重定向到带有模板`/post/:post_id`的路由（更多信息[请参阅官方指南](http://emberjs.com/guides/routing/defining-your-routes/#toc_resources)。让我们将“显示”格式放在这里。`App.PostIndexRoute``post/index`

```
<script type="text/x-handlebars" data-template-name="post/index">
    <h1>Post '{{content.id}}'</h1>
    <p>text: {{content.text}}</p>    
    <p>{{#linkTo 'post.edit' content}}Edit{{/linkTo}}</p>
    <p>{{#linkTo 'posts'}}Back to index{{/linkTo}}</p>
</script> 
```

现在我们有了`post/edit`模板：

```
<script type="text/x-handlebars" data-template-name="post/edit">
    <h1>Editing post '{{content.id}}'</h1>
    <label>Text:</label><br/>
    {{view Ember.TextField valueBinding="content.text"}}<br/>
    {{#if content.isDirty}}
        <em>Modified.</em><br/>
    {{/if}}
    <button {{action submit}}>Submit</button>
    <button {{action cancel}}>Cancel</button>
</script> 
```

`post`模板只不过是一个出口。

```
<script type="text/x-handlebars" data-template-name="post">
    {{outlet}}
</script> 
```

最后，我们需要处理 中的`submit`和`cancel`动作`PostEditController`。

```
App.PostEditController = Ember.ObjectController.extend({
    content: null,
    submit: function() {
        var post = this.get('content');
        post.get('transaction').commit();
        this.transitionToRoute('post', post);
    },
    cancel: function() {
        var post = this.get('content');
        post.get('transaction').rollback();
        this.transitionToRoute('post', post);
    },
}); 
```

这是[jsfiddle](http://jsfiddle.net/ahmacleod/ghcR7/)。

# iphone - 在iOS6中如何获取IP地址

> ID：15173291
> 
> 赞同：-1
> 
> 时间：2013-03-02T10:14:57.010
> 
> 标签：iphone, ipad, ios6

我使用以下代码。它在 iOS 5 上运行良好，但在 iOS 6 中我没有获得 IP 地址。

```
 #import <ifaddrs.h> 
   #import <arpa/inet.h>
  -(NSString *)getIPAddress {    
    NSString *address = @"error";
    struct ifaddrs *interfaces = NULL;
    struct ifaddrs *temp_addr = NULL;
    int success = 0;
    // retrieve the current interfaces - returns 0 on success
    success = getifaddrs(&interfaces);
    if (success == 0) {
    // Loop through linked list of interfaces
    temp_addr = interfaces;
    while(temp_addr != NULL) {
        if(temp_addr->ifa_addr->sa_family == AF_INET) {
            // Check if interface is en0 which is the wifi connection on the iPhone
               if([[NSString stringWithUTF8String:temp_addr-    >ifa_name]isEqualToString:@"en0"]) {
                // Get NSString from C String

   address = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr->ifa_addr)->sin_addr)];               
            }
        }
        temp_addr = temp_addr->ifa_next;
    }
}
   // Free memory
     freeifaddrs(interfaces);
    return address;
  } 
```

iOS 6 中的 WiFi 连接有问题吗？它在 iOS 5 中运行良好。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T10:43:10.590

试试这个

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSString *str =[self getIPAddress];
NSLog(@"%@",str);
// Do any additional setup after loading the view, typically from a nib.
}

-(NSString *)getIPAddress
{
struct ifaddrs *interfaces = NULL;
struct ifaddrs *temp_addr = NULL;
NSString *wifiAddress = nil;
NSString *cellAddress = nil;
NSString *addr;
if(!getifaddrs(&interfaces)) {
    temp_addr = interfaces;
    while(temp_addr != NULL) {
        sa_family_t sa_type = temp_addr->ifa_addr->sa_family;
        if(sa_type == AF_INET || sa_type == AF_INET6) {
            NSString *name = [NSString stringWithUTF8String:temp_addr->ifa_name];
           addr = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr->ifa_addr)->sin_addr)];
                          if([name isEqualToString:@"en0"]) {
                                   wifiAddress = addr;
            } else
                if([name isEqualToString:@"pdp_ip0"]) {
                                          cellAddress = addr;
                }
        }
        temp_addr = temp_addr->ifa_next;
    }
    // Free memory
    freeifaddrs(interfaces);
}
return addr;
} 
```

# google-app-engine - 使用 Google Cloud Endpoints 返回错误

> ID：15173292
> 
> 赞同：5
> 
> 时间：2013-03-02T10:14:58.820
> 
> 标签：google-app-engine, google-cloud-endpoints

我有一个如下生成的端点：

```
public Book insertBook(Book book) {
    PersistenceManager mgr = getPersistenceManager();
    try {
        if (containsShout(book)) {
            throw new EntityExistsException("Object already exists");
        }
        mgr.makePersistent(book);
    } finally {
        mgr.close();
    }
    return book;
} 
```

我想知道我应该如何将错误返回给客户端。例如，这本书包含一些必填字段、ISNM 检查等。

所以我会假设抛出一个异常，但这如何映射到返回的 json 响应。json 响应应包含所有字段错误以在客户端中突出显示这些字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T18:53:43.300

通常，异常会映射到响应中的 500 http 状态代码。除了以下例外，您可以获得不同的代码： `com.google.api.server.spi.response.BadRequestException`-> 400 `com.google.api.server.spi.response.UnauthorizedException`-> 401 `com.google.api.server.spi.response.ForbiddenException`-> 403 `com.google.api.server.spi.response.NotFoundException`-> 404

如果你在 Android 中使用你的端点，错误代码将在那里抛出的 IOException 中，你可以在 catch 中做出相应的反应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T10:42:02.887

我尝试了这样的事情，似乎对我很有效。

```
class Response<T> {
   Status status; 
   String userFriendlyMessage;
   T object; //your bean or entity object

   RestResponse toRestResponse() {
      RestResponse r = new RestResponse();
      r.status = status;
      r.userFriendlyMessage = userFriendlyMessage;
      r.object = object;
   }
} 
```

您不能从端点返回通用对象。因此，创建一个可以从 Response 创建的等效 RestResponse 类。

```
class RestResponse {
   Status status;
   String userFriendlyMessage;
   Object object;
} 
```

状态可以是这样的。

```
public enum Status {
   SUCCESS, RESOURCE_NOT_FOUND, RESOURCE_ALREADY_EXISTS; //etc
} 
```

您的所有端点方法都将返回 RestResponse ，它又将由 Response 构造（T 可以是您的 bean 或实体对象）。

当您反序列化您的 json 响应 (RestResponse) 时，您可以立即将其反序列化为 Response。

希望这可以帮助。

问候， 沙迪亚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:48:45.363

我通过拥有一个抽象类实体来做到这一点。

它有一个 ResponseCode，它是一个枚举和一个 String ErrorMessage。

所以“书”可以从实体继承。您的回复可能如下所示：

```
public Book insertBook(Book book) {
    PersistenceManager mgr = getPersistenceManager();
    try {
        if (containsShout(book)) {
            book.setResponseCode(ResponseCode.ERROR);
            book.setError("Object already exists");
        } else {
            mgr.makePersistent(book);
        }
    } finally {
        mgr.close();
    }
    return book;
} 
```

# jquery - 即使图像大小不同，如何使用 jQuery 使图像放大？

> ID：15173297
> 
> 赞同：0
> 
> 时间：2013-03-02T10:15:30.203
> 
> 标签：jquery, image, hover, zooming

我有一个相对简单的问题。下面的代码允许我将图像放大 20%，当我将鼠标悬停在它上面时会出现滑动文本。我想做的是扩展代码，这样我就可以访问其他类，这样我就可以使其他照片具有相同的效果。我所有的照片都有不同的尺寸，所以它不像为每张图像添加相同的类那么简单。

```
<script>
   $(document).ready(function() {
    //move the image in pixel
     var move = -15;
    //zoom percentage, 1.2 =120%
      var zoom = 1.2;

    //On mouse over those thumbnail
    $('.zitem').hover(function() {

    //Set the width and height according to the zoom percentage
    width = $('.zitem').width() * zoom;
    height = $('.zitem').height() * zoom;

    //Move and zoom the image
    $(this).find('img').stop(false,true).animate({'width':width, 'height':height, 'top':move, 'left':move}, {duration:200});

    //Display the caption
    $(this).find('div.caption').stop(false,true).fadeIn(200);
      },
  function() {
    //Reset the image
    $(this).find('img').stop(false,true).animate({'width':$('.zitem').width(), 'height':$('.zitem').height(), 'top':'0', 'left':'0'}, {duration:100});  

    //Hide the caption
    $(this).find('div.caption').stop(false,true).fadeOut(200);
      });
      });
</script> 
```

# vtk - 从云中移除比阈值距离更近的点

> ID：15173310
> 
> 赞同：0
> 
> 时间：2013-03-02T10:17:06.703
> 
> 标签：vtk, point-clouds

我正在导入网格文件，其中每个面都由其顶点的坐标来描述。大多数顶点在点之间共享。因此，我想消除比`threshold`已经添加到云中的点更近的点。这意味着我需要同时有效地执行最近点查找和点插入。

我尝试使用`vtkPointLocator`我已经用于静态云的方法；但我不知道应该如何增量使用它。[文档](http://www.vtk.org/doc/release/5.8/html/a01521.html)非常简洁，示例（例​​如这个）没有涵盖这种情况[。](http://www.vtk.org/Wiki/VTK/Examples/Cxx/DataStructures/IncrementalOctreePointLocator)[这篇文章](http://markmail.org/thread/zrfkbazg3ljed2mj)有点帮助，但我仍然没有一个可行的解决方案 - 我在（下面的情况下）出现段错误，在（使用而不是使用时）出现`InsertNextPoint`无限递归，或者一些 VTK 错误（比如，当有零点时） .`CheateChildNode``vtkIncrementalOctreePointLocator``vtkPointLocator``no points to subdivide`

这大约是我所做的：

```
// read from input file
std::vector<Vector3d> vertices;
// bounds of the data are known    
double bounds[6]={/*...*/}; 

const double threshold=1e-5;

auto locator=vtkSmartPointer<vtkIncrementalOctreePointLocator>::New();
auto polydata=vtkSmartPointer<vtkPolyData>::New();
auto points=vtkSmartPointer<vtkPoint>::New();

polydata->SetPoints(points);
locator->SetDataSet(polydata);
locator->InitPointInsertion(points,bounds);

for(size_t i=0; i< i<vertices.size(); i++){
    double* vertex=vertices[i].data(); // pointer to data
    double dist; // unused
    vtkIdType id;
    // don't search if there are no points yet
    // FindClosestPointWithinRadius calls BuildLocator internally,
    // which needs some points to be present already
    if(points->GetNumberOfPoints()>0) id=locator->FindClosestPointWithinRadius(threshold,vertex,dist);
    else id=-1;
    if(id<0){
        // point not found, insert it into the locator
        locator->InsertNextPoint(vertex);
    }
} 
```

如果错误的组织方式有明显的错误，我很乐意提出任何建议。如果没有，我尝试制作 MWE。

`BuildLocator`从阅读源代码来看，如果点集被修改，似乎每次查找时都会调用增量类，这可能会很昂贵。因此，对于组合插入/查找的更好类的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:54:49.680

如果我正确理解了您的问题，您可能需要查看[vtkCleanPolyData](http://www.vtk.org/doc/release/5.10/html/classvtkCleanPolyData.html)以及 PointMergingOn 和给定的容差。

# actionscript-3 - 每个对象上的 AS3 dispatchEvent

> ID：15173311
> 
> 赞同：1
> 
> 时间：2013-03-02T10:17:09.990
> 
> 标签：actionscript-3, dispatchevent

有没有办法在某个类上调度事件（Action Script 3.0），每个对象女巫都在该类中并且指定的侦听器函数可以捕获该事件？. 例如我有这样的结构：

编辑（更新类）：

```
class example extends EventDispatcher {
object1 = {subObject1 = {anotherObject1, anotherObbject2}, subObject2}
object2 = {subObject3}
object3

...
} 
```

我希望其中一些有事件监听器：

```
anotherObject1.addEventListener(MyEvent.PART3D_CHANGED, function (e: MyEvent){/*do something*/);
anotherObbject2.addEventListener(MyEvent.PART3D_CHANGED, function (e: MyEvent){/*do something*/);
object3.addEventListener(MyEvent.PART3D_CHANGED, function (e: MyEvent){/*do something*/); 
```

编辑：然后我想在这个类中调度事件，并且每个对象都有侦听器处理事件，如下所示：

```
this.dispatchEvent(new MyEvent(MyEvent.PART3D_CHANGED)) 
```

就像您看到的那样，我需要调度一种类型的事件，并且不需要对每个对象都执行此操作。

根据我的研究，我发现我需要在每个对象上分派 Event，但是如果我必须为每个带有需要侦听器的单个对象和另一个用于循环每个对象的子对象的选项和另一个选项分派，那么代码将是不整洁的。如果需要监听器，则随意添加监听器将没有成本效益。ps对不起我的英语:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:49:22.697

我认为在事件模型中这种行为没有标准方法：http: //livedocs.adobe.com/flex/3/html/help.html?content= [events_08.html](http://livedocs.adobe.com/flex/3/html/help.html?content=events_08.html)

有捕获阶段（与冒泡相反），但它仍然发生在祖先身上（只是顺序不同）。事件冒泡的主要动机是支持鼠标事件的特殊性质，而不是传递一般事件。当您单击某物时，您会同时单击按钮和舞台（因此两者都有处理它的自然权利）。

您的孩子可以直接订阅父类吗？例如，如果对象对全局鼠标移动感兴趣，则执行以下操作并不少见：

```
stage.addEventListener(MouseEvent.MOUSE_MOVE, watchMouse); 
```

同样，您的 anotherObject 可以执行以下操作：

```
myBigMainParent.addEventListener(MyEvent.MY_EVENT, anotherObjectLocalHandler); 
```

IMO，这将非常干净：事件发生在一个特定点，但任何地方的任何人都可以订阅它。

# session - Cakephp 2.0：我的自定义助手会话为假

> ID：15173312
> 
> 赞同：1
> 
> 时间：2013-03-02T10:17:18.070
> 
> 标签：session, cakephp, helper

我正面临有关会话的问题。当我的控制器中有我的自定义 Helper 时， debug($this->Session->read()) 给了我`false`. 自定义助手：

```
<?php 

App::uses('AppHelper', 'View/Helper');

class customFunctionsHelper extends AppHelper { 

public function FormatAddress($address)
{     
    $addr = "";
    if($address['street_name_1'] != "")
        $addr .= $address['street_name_1']."<br />";

    if($address['street_name_2'] != "")
        $addr .= $address['street_name_2']."<br />";

    if($address['street_name_3'] != "")
        $addr .= $address['street_name_3']."<br />";

    if($address['city'] != "")
        $addr .= $address['city'].", ";

    if($address['zipcode'] != "" && $address['state'] != "")
        $addr .= $address['state']." ".$address['zipcode']."<br />";
    else
        $addr .= $address['zipcode']."<br />";

    if($address['country'] != "")
        $addr .= $address['country'];

    if($addr != "")
        return $addr;
    else
        return "<i>Not specified</i>";
}

public function EchoInfo($info)
{
    if($info != "" && $info != 0)
        return $info;
    else
        return "<i>Not specified</i>";
}

} 
?> 
```

在我的控制器中，当我在 $helpers 变量中有 CustomFonctions 时，我遇到了这个会话问题：

```
class AgendaController extends AppController {
    public $helpers = array('Html', 'Form','CustomFunctions');
...... 
```

评估 ：

```
debug($this->Session->read()); 
```

这给我：

```
false 
```

因此，$this-Session-setFlash() 不适用于我的自定义助手 CustomFunctions。当我删除自定义助手时，效果很好......有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:40:55.560

您必须包含`SessionHelper`在`AppHelper`或`customFunctionsHelper`文件中。如果你想使用它。

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:30:15.613

当我删除数组中的`CustomFunctions`助手时。`$helpers`它有效，我可以访问我的自定义功能。似乎不需要在`$helpers`数组中声明自定义助手...

# ruby-on-rails - 你需要一个移动响应库吗？

> ID：15173316
> 
> 赞同：0
> 
> 时间：2013-03-02T10:17:29.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-mobile, mobile

如果要为移动设备开发一个应用程序并且它具有固定的布局。不是那么敏感。主要是最大宽度为 320 和 480x 像素。没有 iPad。我不需要元素和布局根据宽度动态移动。也没有这些库通常附带的花哨的东西。像流畅的网格布局、列表组件、精美的动画和滑动检测、按钮等。

使用 Foundation 或 jQuery mobile 之类的东西的目的是什么？滚动你自己的 CSS（和可能的 JS）不是更明智吗？

我认为这也值得注意。我只计划支持 4-5 页的移动设备。直到我们推出我们的原生应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:38:05.237

您可以使用Rails 开箱即用的**CSS 媒体查询：**

一般信息：[http ://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

一般示例：[http ://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

Rails 相关：[http ://crimpycode.brennonbortz.com/?p=7](http://crimpycode.brennonbortz.com/?p=7)

# node.js - Express.js 和 AngularJS - 使用静态页面而不是快速视图

> ID：15173322
> 
> 赞同：2
> 
> 时间：2013-03-02T10:18:10.040
> 
> 标签：node.js, express, angularjs

我有一个带有快速服务器的 node.js 后端。我想默认所有获取角度应用程序的请求并使用角度路由来处理请求。Express 服务器将处理来自 Angular 应用程序的所有 api 调用。我已经设置了我的快速路由，顶部有所有 api 调用，底部有以下代码：

```
app.get('*', function(req, res){
    res.sendfile('index.html', { root: path.resolve(__dirname + '/../../app') });
}); 
```

这对于默认主页非常有用，但如果有一个人造文件夹，它就不能很好地工作。例如

```
www.example.com (works)
www.example.com/product1 (works)
www.example.com/products/1 (does not work) 
```

我的 HTML 文件使用以下结构引用脚本：

```
<script src="scripts/app.js"></script> 
```

当我尝试使用虚假文件夹 (www.example.com/products/1) 访问 url 时，出现以下错误：找不到文件 'products/scripts/app.js'</p>

它正在尝试使用 url 中的文件夹来查找文件。有没有办法解决这个问题？或者我应该使用快递而不是角度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:19:32.823

尝试添加`<base href="/">`到 HTML 文档的头部。这为我解决了同样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T20:58:52.787

[angular-express-seed](https://github.com/btford/angular-express-seed)非常适合让您开始使用 angular 和 express 。

应用程序.js

```
app.get('*', routes.index); 
```

路由.js

```
exports.index = function(req, res){
  res.render('index');
}; 
```

你不必使用玉。你可以使用任何你想要的模板引擎或者只是静态的 html 文件。请注意，`res.sendfile`它不会缓存文件，也不应该在生产中使用。种子还有一个例子来展示客户端和服务器之间的 json 通信。

```
exports.name = function (req, res) {
  res.json({
    name: 'Bob'
  });
}; 
```

如果您使用 express 进行路由，您将失去单页应用程序的感觉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T09:51:44.340

为脚本（和 CSS 文件）提供 HTML 中的绝对路径

```
<script src="/scripts/app.js"></script> 
```

# java - 选择组合框上的项目时执行操作

> ID：15173325
> 
> 赞同：4
> 
> 时间：2013-03-02T10:18:23.393
> 
> 标签：java, swing, actionlistener, jcombobox, itemlistener

我有一个包含 item1 和 item2 的 jcombobox，还有一个 jtextfield .. 当我在我的 jcombobox 上选择 item1 时，我希望 30 出现在我的 jtextfield 上，而如果选择了 Item2 则为 40... 我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T10:43:43.723

这就是使用 ActionLIsener 的方式

```
import java.awt.FlowLayout;
import java.awt.event.*;

import javax.swing.*;

public class MyWind extends JFrame{

    public MyWind() {
        initialize();
    }

    private void initialize() {
        setSize(300, 300);
        setLayout(new FlowLayout(FlowLayout.LEFT));
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTextField field = new JTextField();
        field.setSize(200, 50);
        field.setText("              ");

        JComboBox comboBox = new JComboBox();
        comboBox.setEditable(true);
        comboBox.addItem("item1");
        comboBox.addItem("item2");

        //
        // Create an ActionListener for the JComboBox component.
        //
        comboBox.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                //
                // Get the source of the component, which is our combo
                // box.
                //
                JComboBox comboBox = (JComboBox) event.getSource();

                Object selected = comboBox.getSelectedItem();
                if(selected.toString().equals("item1"))
                field.setText("30");
                else if(selected.toString().equals("item2"))
                    field.setText("40");

            }
        });
        getContentPane().add(comboBox);
        getContentPane().add(field);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new MyWind().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T10:40:46.947

简单的解决方案是使用`ItemListener`. 当状态改变时，您只需检查当前选定的项目并相应地设置文本

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox06 {

    public static void main(String[] args) {
        new TestComboBox06();
    }

    public TestComboBox06() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private JComboBox cb;
        private JTextField field;

        public TestPane() {
            cb = new JComboBox(new String[]{"Item 1", "Item 2"});
            field = new JTextField(12);

            add(cb);
            add(field);

            cb.setSelectedItem(null);

            cb.addItemListener(new ItemListener() {
                @Override
                public void itemStateChanged(ItemEvent e) {
                    Object item = cb.getSelectedItem();
                    if ("Item 1".equals(item)) {
                        field.setText("20");
                    } else if ("Item 2".equals(item)) {
                        field.setText("30");
                    }
                }
            });
        }

    }

} 
```

更好的解决方案是创建一个自定义对象，该对象代表要显示的值以及与之关联的值......

**更新**

现在我的脚踝不再需要 10 个月的时间了，我更新了示例以使用`ListCellRenderer`更正确的方法，然后变得懒惰和压倒一切`toString`

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.DefaultListCellRenderer;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox06 {

    public static void main(String[] args) {
        new TestComboBox06();
    }

    public TestComboBox06() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private JComboBox cb;
        private JTextField field;

        public TestPane() {
            cb = new JComboBox(new Item[]{
                new Item("Item 1", "20"), 
                new Item("Item 2", "30")});
            cb.setRenderer(new ItemCelLRenderer());
            field = new JTextField(12);

            add(cb);
            add(field);

            cb.setSelectedItem(null);

            cb.addItemListener(new ItemListener() {
                @Override
                public void itemStateChanged(ItemEvent e) {
                    Item item = (Item)cb.getSelectedItem();
                    field.setText(item.getValue());
                }
            });
        }

    }

    public class Item {
        private String value;
        private String text;

        public Item(String text, String value) {
            this.text = text;
            this.value = value;
        }

        public String getText() {
            return text;
        }

        public String getValue() {
            return value;
        }

    }

    public class ItemCelLRenderer extends DefaultListCellRenderer {

        @Override
        public Component getListCellRendererComponent(JList<?> list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus); //To change body of generated methods, choose Tools | Templates.
            if (value instanceof Item) {
                setText(((Item)value).getText());
            }
            return this;
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T13:01:51.780

不是对原始问题的回答，而是如何在不破坏 MVC 的情况下制作可重用和工作的自定义渲染器的示例 :-)

```
// WRONG
public class DataWrapper {
   final Data data;
   final String description;
   public DataWrapper(Object data, String description) {
       this.data = data;
       this.description = description;
   }
   ....
   @Override
   public String toString() {
       return description;
   } 
}
// usage
myModel.add(new DataWrapper(data1, data1.getName()); 
```

在 MVC 环境中这是**错误**的，因为它混合了数据和视图：现在模型不包含*数据，而是出于**视图*原因引入的包装器。这打破了关注点和封装的分离（与模型交互的每个类都需要了解包装的数据）。

打破规则的驱动力是：

*   保留默认 KeySelectionManager 的功能（被自定义渲染器破坏）
*   包装类的重用（可以应用于任何数据类型）

就像在 Swing 中一样，自定义渲染器是设计用于容纳自定义视觉表示**的**小硬币，无法应对的默认管理器......坏了。调整设计以适应这种糟糕的默认设置是错误的，有点颠倒。正确的是，实施一个应对管理器。

虽然重用很好，但以破坏基本架构为代价这样做并不是一个好的交易。

我们在表示领域有一个问题，让我们在表示领域使用旨在解决该问题的元素来解决它。正如您可能已经猜到的那样，[SwingX](http://swingx.java.net)已经有了这样的解决方案 :-)

在 SwingX 中，字符串表示的提供者称为 StringValue，所有默认渲染器都采用这样的 StringValue 来配置自己：

```
StringValue sv = new StringValue() {
     @Override
     public String getString(Object value) {
        if (value instanceof Data) {
            return ((Data) value).getSomeProperty();
        }
        return TO_STRING.getString(value);
     }
};
DefaultListRenderer renderer = new DefaultListRenderer(sv); 
```

由于 defaultRenderer 是一个 StringValue （实现为委托给给定），KeySelectionManager 的良好实现现在可以委托给渲染器以找到合适的项目：

```
public BetterKeySelectionManager implements KeySelectionManager {

     @Override
     public int selectionForKey(char ch, ComboBoxModel model) {

         ....
         if (getCellRenderer() instance of StringValue) {
              String text = ((StringValue) getCellRenderer()).getString(model.getElementAt(row));
              ....
         } 
     }

} 
```

概述了该方法，因为即使不使用 SwingX 也很容易实现，只需定义实现类似的东西并使用它：

*   一些字符串表示的提供者
*   可由该提供程序配置的自定义渲染器，并保证在配置自身时使用它
*   一个行为良好的 keySelectionManager，它会向渲染器查询其字符串表示形式

除了字符串提供程序之外的所有内容都可以按原样重用（这正​​是自定义渲染器和 keySelectionManager 的一种实现）。可以有字符串提供程序的一般实现，那些格式化值或通过反射使用 bean 属性。所有这些都没有违反基本规则:-)

# refactoring - 用更动态的东西替换硬编码的类是否常见？

> ID：15173326
> 
> 赞同：3
> 
> 时间：2013-03-02T10:18:30.883
> 
> 标签：refactoring

我正在阅读 Fowler 的“重构”，第 1 章。

在第 51 页上，您会看到一部附有价格等级的电影。第一种方法是：使用继承创建多个电影，每个电影都使用其独特的 getCharge 方法来计算价格。在第 38 页，这种方法被放弃了，因为它太静态了——改变电影的分类太难了。但是，在第 51 页上再次使用了继承，这一次是为了价格。添加了三个价格子类：ChildrensPrice、NewReleasesPrice 和 RegularPrice。在这种设计中，通过更改价格对象来更改电影的分类更容易。但是在这里添加新的价格类别涉及添加一个新的类。

拥有一个基于接口或带有名称字段的抽象类的价格类不是更容易吗，所以名称可以是“ChildrensPrice”，您可以定义您想要的任何其他价格类别，而无需编写新类？

这是一个带有名称的重构模式，例如：“将硬编码的类更改为更动态的表示”？

这种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:02:01.673

使用价格类别标签的方法更加“动态”，即使在运行时，您也可以轻松添加新的价格类别。另一方面，每个价格类别有一个类的“静态”方法让您可以在常用类型系统中表达更多约束。

例如，如果有一个仅适用于儿童价格的界面，则可以使用静态方法在代码中表达约束。使用动态方法，编译器无法区分两个价格类别。（在类型系统中表达尽可能多的约束通常是一个好主意。）

关于一般情况，我能说的就这些了。哪种方法更好最终取决于特定要求。

# android - 每个元素都很大 - 拉伸（字体，图片，地图......）

> ID：15173327
> 
> 赞同：2
> 
> 时间：2013-03-02T10:18:32.050
> 
> 标签：android, google-maps, android-mapview, android-maps

我有两个项目，其中一个项目的每一个元素都非常非常大。这是带有正常尺寸图和警告对话框的屏幕：

![](../Images/2a524d9bc2f136d37cca0f7236248e80.png)

这就是一切都很大的地方（相同的平板电脑 10）：

![](../Images/64674ea4541141fe18eedbe55651f46e.png)

我不知道另一个项目有什么问题。第二个项目看起来不错`480x800`，但在更大的屏幕上更喜欢、警报、地图（带有控制器）以及所有内容。可能是什么问题呢？我尝试了相同的 XML，但它仍然不同。我在哪里可以修改一些东西，它会好吗？非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:35:52.967

看起来您在第二个项目中启用了屏幕兼容模式。所以你需要禁用它。它可以通过多种方式完成：

1.  `targetSdkVersion`在您的`AndroidManifest`.

    ```
    <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="11" /> 
    ```

2.  或者明确声明您的应用程序支持超大屏幕。

    ```
    <supports-screens android:xlargeScreens="true" /> 
    ```

在这里您可以找到更详细的信息[屏幕兼容模式](http://developer.android.com/guide/practices/screen-compat-mode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:23:01.753

您可以在值文件中声明维度。

# counter - Wordpress $wpdb 查询问题

> ID：15173336
> 
> 赞同：0
> 
> 时间：2013-03-02T10:19:43.247
> 
> 标签：counter, wordpress

我正在制作一个自定义计数器作为 wordpress 插件，我对 $wpdb 有一点问题这是失败的查询：

```
private function getMedlemmerfromDB(){
    global $wpdb, $table_prefix;
    $wpdb->plugin_medlemsteller = $table_prefix . "plugin_medlemsteller";
    $fromdb=$wpdb->get_var("SELECT medlemmer FROM $wpdb->plugin_medlemsteller WHERE mID=(SELECT MAX(mID) FROM $wpdb->plugin_medlemsteller)");
    return $fromdb;
} 
```

我不知道 $table_prefix 设置为什么。只希望它是空的。

在我的小部件功能中：

```
public function widget( $args, $instance ) {
        $medlemmer=getMedlemmerfromDB();
             ... 
```

这失败了，并且插件（女巫仍然处于活动状态）不显示。

查询工作正常，但是当我在我的插件中实现它时，它会导致小部件崩溃。

希望有人可以帮助我。

-克里斯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:18:51.087

你可以尝试更换

```
$medlemmer=getMedlemmerfromDB(); 
```

和

```
$medlemmer=$this->getMedlemmerfromDB(); 
```

if`widget()`和`getMedlemmerfromDB()`是同一类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:34:43.960

你没有定义`$wpdb->plugin_medlemsteller`. 只能这样访问默认的 WordPress 表。

您需要先定义它：

```
$wpdb->plugin_medlemsteller = $wpdb->prefix . "plugin_medlemsteller"; 
```

# highcharts - highslide 和 highchart

> ID：15173339
> 
> 赞同：1
> 
> 时间：2013-03-02T10:20:27.023
> 
> 标签：highcharts, highslide

我正在构建 highcharts 和 highstock，我会将它们作为小图表放入页面，然后单击它，以便它会展开（highslide）但代码不起作用

这是图表之一 [http://www.nourhammoury.com/silvercot.php](http://www.nourhammoury.com/silvercot.php)

我在此示例中添加代码[http://www.highcharts.com/studies/with-highslide.htm](http://www.highcharts.com/studies/with-highslide.htm)但它根本不起作用

谁能帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:22:53.450

请看这个演示： http: [//jsfiddle.net/roadrash/GqhEX/](http://jsfiddle.net/roadrash/GqhEX/)彻底研究js代码。
请注意，Highslide 文件必须包含在页面的 head 部分中。

```
<script type='text/javascript' src="http://highcharts.com/highslide/highslide-full.min.js"></script>
<script type='text/javascript' src="http://highcharts.com/highslide/highslide.config.js"></script>
<link rel="stylesheet" type="text/css" href="http://highcharts.com/highslide/highslide.css"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T13:32:30.960

它不可能在高幻灯片中显示完整的幻灯片放映......但它有可能我实现了在 css 中使用缩放的解决方案，最初我将所有 div 放大，当点击 div 时，它会缩小。并且还手动编写一些幻灯片事件。

示例代码： [http ://sdrv.ms/17sUIR7](http://sdrv.ms/17sUIR7)

# geocoding - 经纬度半径

> ID：15173342
> 
> 赞同：0
> 
> 时间：2013-03-02T10:21:28.630
> 
> 标签：geocoding, latitude-longitude

我正在开发应用程序，我首先将用户纬度和经度发送到服务器。服务器也有一些以前存储的坐标，现在应用程序必须检查用户坐标是否在服务器已有坐标的 1km 或 2km 半径内。

我发现的一种方法是将初始坐标作为圆心，但这并不准确。任何建议我应该遵循哪种算法和来源可以帮助我理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:58:05.090

```
 R  =  6378.1;  //  radius of the Earth (km)
    dlat = deg2rad( $lat1-$lat2 ) // lattitude diference in radians
    dlang = deg2rad ( $lang1 - $lang2 ) //longitude diference in radian 
```

地球的半径远大于 1-2 公里，所以我们可以使用毕达哥拉斯定理，我们得到了 0.03 % 的准确度 ~ 0.3 m。

```
 distance = R * sqrt( $dlat^2 + $dlang^2  );
   // same:   distance =  sqrt( ($dlat*R)^2 + ($dlang*R)^2)   ) 
```

这可能有助于您理解： [http ://en.wikipedia.org/wiki/Spherical_coordinate_system](http://en.wikipedia.org/wiki/Spherical_coordinate_system)

球坐标系与地理位置坐标系不同，但要了解您需要什么，我认为下面的链接有一个很好的解释。

如果您需要更高的准确性：请参阅**工作示例**部分的[http://en.wikipedia.org/wiki/Great-circle_distance](http://en.wikipedia.org/wiki/Great-circle_distance)

 **当距离只有几公里时，精度差异很小，但使用我写的公式计算时间要好得多。**

# jquery - 如何在 jQuery 移动应用程序首页制作（图标 + 标签）

> ID：15173343
> 
> 赞同：0
> 
> 时间：2013-03-02T10:21:29.537
> 
> 标签：jquery, icons

我想在 jquery 移动应用程序的主页面/第一页中制作类似于移动设备中的主菜单的一些图标，并在每个图标下制作其标签

```
<a href="#sport"  id="btn1">
  <img src="images/sports.png" ;  float: center"/>
</a><br /> sports 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:27:36.780

你可以使用 `<figure>`和 <`figcaption>`

```
<figure>
  <img src="http://lorempixel.com/300/300/place" alt="Macaque in the trees">
  <figcaption>A cheeky macaque, Lower Kintaganban River, Borneo. Original by <a href="http://www.flickr.com/photos/rclark/">Richard Clark</a></figcaption>
</figure> 
```

这是示例

[在 dabbet 上](http://dabblet.com/gist/5070433)

# highcharts - 想要打开一个表单来保存点击 highstock 图表中数据点的评论

> ID：15173345
> 
> 赞同：0
> 
> 时间：2013-03-02T10:21:37.717
> 
> 标签：highcharts, highstock

实际上，我正在使用 Highstock 库，并且正在使用 PHP 和 MySQL 生成带有折线图（数据分组）的图形。我正在使用 JSON 格式来绘制图表。

我可以用我的数据库绘制图表。现在我想在单击任何具有该记录的 ID（数据库中的主键）的数据点时打开一个弹出表单，并希望将评论保存在数据库中。

数据结构我的表有**ID**作为主键，**时间**（x 值），**点**（Y 值），**评论**（想从图表形式输入）

1.  编号：1,2,3,4,5,6
2.  时间：1345575960000、1345576140000、1345663860000、1345690200000、1345719780000、1345741920000
3.  点数：1720、2040、2570、1477、978、3007
4.  评论：（我想从图表形式更新）

在这个结构中，ID 是主键。所以我想根据ID保存评论。当我单击 cha 中的数据点时，我想保存评论。

你能帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:41:35.950

您可以使用以下方法捕获点的点击

```
series.dataevents.click 
```

例如。[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-click/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-click/)

一旦被困，您可以显示一个带有您的表单的对话框吗？表单可以提交回您的服务器以保存评论，然后隐藏自己。

创建您的点如下：

```
{
  x: 1142812800000,
  Y: 55,
  id: 12345
} 
```

# c++ - Netbeans IDE STL 支持

> ID：15173348
> 
> 赞同：0
> 
> 时间：2013-03-02T10:21:49.860
> 
> 标签：c++, list, netbeans, stl

您好，我是 C++ 的 Netbeans IDE 的新手。我希望支持 STL 集合，如列表、堆栈和 netbeans 中的所有内容。我正在其中编写以下代码，并在“列表”单词和无法解析标识符列表的消息下方出现红线。我该怎么办 ？

```
#include <iostream>
#include <list>

int main ()
{
  std::list<int> first;
  return 0;
} 
```

编辑：提到我的代码中包含的头文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:34:27.717

您是否通过以下方式制作了 netbeans 项目？文件 -> 新项目 .. -> C/C++ -> C/C++ 应用程序

我这样做了，将您的代码粘贴到 main.cpp 中，并且可以无错误地编译。

（网豆 7.2.1）

# ios - 核心数据实体数组在 IOS 中释放或删除对象时生成崩溃

> ID：15173350
> 
> 赞同：0
> 
> 时间：2013-03-02T10:22:00.343
> 
> 标签：ios, core-data, nsmutablearray, nsentitydescription

这是我的`CoreDataManagerClass`。

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>
@interface RTC_CoreDataManager : NSObject
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;
  - (void)saveContext;
  - (NSURL *)applicationDocumentsDirectory;
  -(void)insertEntity:(NSString *)entityName arrayOfManagedObject:(NSMutableArray *)array;
  +(RTC_CoreDataManager *)shredInstance;
   @end

#import "RTC_CoreDataManager.h"
RTC_CoreDataManager *obj_RTC;
@implementation RTC_CoreDataManager

@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

 - (void)saveContext
 {
 NSError *error = nil;
  NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
if (managedObjectContext != nil) {
 if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {

           NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
           abort();
        }
   }
}

+(RTC_CoreDataManager *)shredInstance{
if (obj_RTC ==  nil) {
           obj_RTC = [[RTC_CoreDataManager alloc]init];
       }
        return obj_RTC;

    }
#pragma mark - Core Data stack

- (NSManagedObjectContext *)managedObjectContext
{
   if (__managedObjectContext != nil) {
        return __managedObjectContext;
  }

   NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
   if (coordinator != nil) {
       __managedObjectContext = [[NSManagedObjectContext alloc] init];
       [__managedObjectContext setPersistentStoreCoordinator:coordinator];
   }
   return __managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"RTC" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
 {
     if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
   }

    NSURL *storeURL = [[self applicationDocumentsDirectory]     URLByAppendingPathComponent:@"RTC.sqlite"];
    NSError *error = nil;
    if (![[NSFileManager defaultManager] copyItemAtURL:storeURL toURL:[NSURL alloc] error:&error]) {
        NSLog(@"Oops, could copy preloaded data");
    }

__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return __persistentStoreCoordinator;
}

#pragma mark - Application's Documents directory

// Returns the URL to the application's Documents directory.
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

-(void)insertEntity:(NSString *)entityName arrayOfManagedObject:(NSMutableArray *)array 
{
NSManagedObjectContext *backgroundMOC = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
for (id object in array)
 {

 [backgroundMOC performBlockAndWait:^
 {
 NSError *error;
 if (![__managedObjectContext save:&error]) 
 {
NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
}
}];
}

}

@end 
```

这是我在另一个控制器中的代码。

```
 -(void)viewDidLoad
    {
     [super viewDidLoad];
     appDele_Obj = (RTC_AppDelegate *)[[UIApplication sharedApplication] delegate];
   appDele_Obj.entityArray=[[NSMutableArray alloc]init];

for (int i=0; i<10; i++)
{

    Survey *objSurvey = [NSEntityDescription
                         insertNewObjectForEntityForName:@"Survey"
                         inManagedObjectContext:[RTC_CoreDataManager shredInstance].managedObjectContext];        [objSurvey setFirstName:@"1"];
    [objSurvey setLastName:@"2"];
    [objSurvey setEmpId:@"3"];
    [objSurvey setLanguage:@"Hindi"];
    [objSurvey setCountry:@"India"];
    [objSurvey setSurveyNo:[NSNumber numberWithInt:2]];
    [[appDele_Obj entityArray] addObject:objSurvey];
    [objSurvey release];
}
//[objSurvey release];
[[RTC_CoreDataManager shredInstance] insertEntity:@"Survey" arrayOfManagedObject:[appDele_Obj entityArray]];
if ([[appDele_Obj entityArray]count]  >0) {
    [[appDele_Obj entityArray] removeAllObjects];

}
} 
```

所以我的问题是，如果我在应用程序崩溃时
调用方法 removeAllObjects 。`[appDele_Obj entityArray]`为什么我不能调用`[[appDele_Obj entityArray] removeAllObjects];` 上述方法。任何人都可以帮助我解决这个崩溃。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:37:05.930

这是内存管理不善的一个简单案例。这将创建一个自动释放的对象：

```
Survey *objSurvey = [NSEntityDescription
    insertNewObjectForEntityForName:@"Survey"
    inManagedObjectContext:[RTC_CoreDataManager shredInstance].managedObjectContext]; 
```

然后你这样做：

```
[[appDele_Obj entityArray] addObject:objSurvey];
[objSurvey release]; 
```

你不应该`release`在这里打电话。该对象是自动释放的——调用`release`不仅没有必要，而且很危险。稍后当您从数组中删除对象时，您最终会过度释放其中的每个对象。这会导致崩溃。

代码中的其他一些内容：

1.  在循环中调用`save:`托管对象上下文是不必要的，除非您在每次通过循环时都进行新的更改。你的`insertEntity:arrayOfManagedObject:`方法做了很多不必要的工作。

2.  数组 in`viewDidLoad`对于您正在做的事情不是必需的或有用的。您已经创建了对象，并且它们位于托管对象上下文中。一旦你完成了这些对象的属性设置，你就不需要保留引用了。继续添加对象，直到完成，然后告诉托管对象上下文进行保存。

3.  这是一个小细节，但您命名了一个创建单例的方法`shredInstance`。“切碎”几乎与您在该方法中所做的完全相反。你可能的意思是`sharedInstance`。

# jquery - jQuery 移动应用程序 ajax 调用给出错误

> ID：15173353
> 
> 赞同：1
> 
> 时间：2013-03-02T10:22:13.793
> 
> 标签：jquery, ajax, cordova, jquery-mobile, mobile

我正在使用 phonegap android 开发一个应用程序。当我运行这段代码时，它给出了以下错误

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <title>Insert title here</title>

        <script>
            (function($) {

                $.fn.getPageData = function() {
                    var finalData = "";

                    $.ajax({
                        url : "Demo url.com",
                        type : "GET",
                        success : function(data) {

                            finalData = '<div id="index" data-role="page" data-url="index" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 386px;"><div data-role="header" class="ui-header ui-bar-a" role="banner"><h3 class="ui-title" role="heading" aria-level="1">First Page</h3></div></div>';

                        },
                        fail : function() {
                            finalData = '<div id="index" data-role="page" data-url="index" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 386px;"><div data-role="header" class="ui-header ui-bar-a" role="banner"><h3 class="ui-title" role="heading" aria-level="1">Error Page</h3></div></div>';

                        }
                    });
                    this.append(finalData);

                };

            })(jQuery);
            $(document).ready(function() {

                $('body').getPageData();
                //$(a).appendTo("body");
            });
        </script>

    </head>
    <body>

    </body>
</html> 
```

它给出了以下错误。

```
Origin null is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:26:37.297

如果您执行 Ajax 调用，`OPTIONS`则首先将调用发送到服务器，以检测它是否允许跨域资源共享。如果返回的标题不允许这样做，您会收到这样的错误。

您可以尝试使用 localhost（或服务器本身）作为您的演示网址吗？

检查您的网络选项卡。

你可以阅读更多关于 CORS 的信息： [http ://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) [http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/](http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/)

关于同源政策： [http ://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:29:43.453

尝试将`http://localhost`（或任何您的本地主机 URL）添加到`phonegap.plist`“外部主机”下的文件中。它可能会存在于您的支持文件目录中。

# c++ - 查找数字数组中出现了多少特定数字（C++）

> ID：15173354
> 
> 赞同：0
> 
> 时间：2013-03-02T10:22:42.573
> 
> 标签：c++, arrays, numbers, digit

我正在做一个在线挑战，挑战如下：“孩子们正在玩一个叫做“数数”的游戏。对于给定的数字 S 和 K，他们首先写出这些数字之间的所有数字，然后计算每个数字出现的次数(0,1,2,3,4,5,6,7,8,9). 例如，S=767，K=772，数字将是：767,768,769,770,771,772

因此，0 将显示一次（在 770 中），1 将显示一次（在 771 中），依此类推..

基本上，我的程序必须执行以下操作（给定示例）：

输入：1 9（这些是数字 1,2,3,4,5,6,7,8,9）

输出：0 1 1 1 1 1 1 1 1 1（0 不显示，其他数字显示一次）。”

我被困在这个代码上......没有想法。

```
#include <iostream>

using namespace std;

int main()
{
    int s,k;
    int array[10];
    int c0=0,c1=0,c2=0,c3=0,c4=0,c5=0,c6=0,c7=0,c8=0,c9=0;
    cin >> s >> k;
    int saves = s;
    int savek = k;
    cout << s%10;
    for(int i=s;i<=k;i++)
    {
        int savei=i;
        while(savei!=0)
        {
            savei=savei%10;
        }
    } 
```

任何伪代码/片段/代码/提示都表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:37:51.190

纯数值问题的纯数值解：

```
#include <iostream>

int main()
{
    int s, k, i, tmp;
    std::cin >> s >> k;

    int count[10] = { 0 };

    for (i = s; i <= k; i++) {
        tmp = i;
        do {
            count[tmp % 10]++;
            tmp /= 10;
        } while(tmp);
    }

    for (i = 0; i < 10; i++) {
        std::cout << i << " appears " << count[i] << " times" << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:42:21.610

我的解决方案是这样的：

```
int main(){
    int s,k;
    cin >> s >> k;
    int numbers[10]={0};
    string sum;

    for(int i=s;i<=k;i++)
    {
        sum=to_string(i);
        for(int i=0;i<sum.length();i++){
            numbers[(int)sum.at(i)-48]++;
        }
    }

    for(int i=0;i<10;i++){
        cout<<numbers[i]<<endl;
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T15:26:35.863

```
public static void getDigitsInBook(int n) {
    for(int i=0;i<10;i++) {
        int x = n,val=0,k=1;
        while(x!=0) {
            int left  = x/10;
            int num = x%10;
            int right = n%k;
            if(i == 0) {
                val = val+ (left*k);
            }
            else if(i<num) {
                val = val + ((left+1)*k);
            }
            else if(i==num) {
                val = val + (left*k) + right+1;
            }
            else {
                val = val+ (left*k);
            }
            k=k*10;
            x = n/k;
        }
        System.out.println(val);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T10:31:34.217

您通常对此类任务所做的是计算和之间的数字`0`，`S`然后`0`减去`K`这些数字。

`0`和之间有多少个`767`？首先数最后一位的数字。有`77`时间 0, 1, 2, 3, 4, 5, 6, 7 和时间 8和`76`9。更正式地说，在其余部分`767/10+1`之间。然后计算 的最后一位数字的出现次数，乘以，加上时间 7 和 6（对于最后一位的错误）并对剩余的数字执行相同的操作，这里。最后，将结果相加。`0``767%10``767/10+1``767/10=76``10``7``76/10=7`

这解决了中的问题`O(log_10 K)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T10:38:56.417

试试这个代码：

```
for(int n=s ; n<=k ; n++)
{
    tempN = abs(n);
    while(tempN > 0)
    {
        tempDigit = tempN % 10;
        tempN /= 10;

        //count tempDigit here
    }
} 
```

假设你的变量是整数，“tempN /= 10;” 应该没有问题。

# c# - 澄清：尝试 Catch vs Throw 异常以及为什么调用基类构造函数

> ID：15173356
> 
> 赞同：0
> 
> 时间：2013-03-02T10:22:55.803
> 
> 标签：c#, .net, exception, custom-exceptions

按照书中的示例，得到以下稍微修改的代码：

```
 class OutOfHoneyException : Exception
 {
    public OutOfHoneyException(string message) :base(message){}
 }

    class HoneyDeliverSystem
    {
        public void FeedHoneyToEggs()
        {
            if (true)
            {
                throw new OutOfHoneyException("This hive is Out Of Honey");
            }
        }
    } 
```

.....................................

```
 HoneyDeliverSystem delivery = new HoneyDeliverSystem();

      try
        {
            delivery.FeedHoneyToEggs();
        }
        catch (OutOfHoneyException ex)
        {

            Console.WriteLine(ex.Message);
        } 
```

我的理解是，当我们在特定条件下抛出特定异常时，相应的 catch 块会处理它。

但是请帮我举一个更好的例子，也许.NET异常的实现会很有帮助。

为什么我们将消息传递给基`Exception`类？是否仅用于打印目的？

子类调用基类构造函数有一个 OOPS 概念。您能否命名它以及它与自定义异常示例的关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:23:31.757

最好的办法是将您的新异常放入它自己的文件中并公开。基`Exception`类有 4 个构造函数，在大多数情况下，至少实现前 3 个构造函数会很有用：

```
public class OutOfHoneyException : Exception
{
    public OutOfHoneyException()
        : base()
    {
    }

    public OutOfHoneyException(string message)
        : base(message)
    {
    }

    public OutOfHoneyException(string message, Exception innerException)
        : base(message, innerException)
    {
    }

    public OutOfHoneyException(SerializationInfo info, StreamingContext context)
        : base(info, context)
    {
    }
} 
```

您从`Exception`该类继承，因为它具有处理自定义异常时预期的所有基本异常实现/行为。

您需要实现所有 4 个构造函数，以使您的新自定义异常感觉更像是典型的 .NET 异常。

在学习有关异常的知识时要注意两件事，首先应仅针对异常行为抛出异常，其次不应使用异常来控制程序流。这两条规则很适合。

例如，如果您正在查询库存控制系统以查看库存中有多少罐豆，那么结果为 0 将是一个常见的答案，尽管这对客户来说不是一个理想的答案，但这并不例外。如果您在库存系统中查询豆罐头，但数据库服务器不可用，那么这是您所期望的常见结果之外的异常行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:43:46.780

你离常见的做法并不遥远。我会这样做：

```
class OutOfHoneyException : Exception {
  public OutOfHoneyException() : base("This hive is Out Of Honey"){}
}

class HoneyDeliverSystem {
  public void FeedHoneyToEggs() {
    throw new OutOfHoneyException();
  }
} 
```

我的意思是，没有理由为 a 提供不同的信息`OutOfHoneyException`，是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:46:48.073

When you pass the message to the base class(Exception), the base class will set Message property of your exception and do all helpful stuff like keeping StackTrace.

So when you catch your custom exception (OutOfHoneyException), the message field will be set by your base Exception class. Checkout the following code from implementation:

```
/// <summary>
/// Initializes a new instance of the <see cref="T:System.Exception"/> class with a specified error message.
/// </summary>
/// <param name="message">The message that describes the error. </param>
public Exception(string message)
{
  base..ctor();
  this.Init();
  this._message = message;
}

/// <summary>
/// Initializes a new instance of the <see cref="T:System.Exception"/> class with a specified error message and a reference to the inner exception that is the cause of this exception.
/// </summary>
/// <param name="message">The error message that explains the reason for the exception. </param><param name="innerException">The exception that is the cause of the current exception, or a null reference (Nothing in Visual Basic) if no inner exception is specified. </param>
public Exception(string message, Exception innerException)
{
  base..ctor();
  this.Init();
  this._message = message;
  this._innerException = innerException;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T11:18:04.980

而不是写一个答案告诉你如何创建一个例外，我将尝试回答你的具体问题。

> 为什么我们将消息传递给基类 Exception ？是否仅用于打印目的？

或多或少。该消息是为异常添加上下文。抛出 OutOfHoneyException 可能有几个原因 - 蜜蜂睡着了，它们正在度假，食蚁兽用尽了蚂蚁并决定改为喜欢蜜蜂，等等。

> 子类调用基类构造函数有一个 OOPS 概念。您能否命名它以及它与自定义异常示例的关系？

无论您在派生类上使用哪个构造函数，默认构造函数将始终在基类上调用，*除非您指定不同*的构造函数（这就是这里发生的情况）。这是基本的[构造函数重载](https://stackoverflow.com/questions/985280/can-i-call-a-overloaded-constructor-from-another-constructor-of-the-same-class-i)，它在创建派生类时为您提供了合理的灵活性（另请注意，存在[构造函数链接](https://stackoverflow.com/questions/829870/calling-constructor-from-other-constructor-in-same-class)）。

# twitter-bootstrap - Lesscss > bootstrap 的 darken() 和 lighten() 无法编译

> ID：15173360
> 
> 赞同：4
> 
> 时间：2013-03-02T10:23:27.820
> 
> 标签：twitter-bootstrap, less

我的 Less 文件没有按应有的方式编译。我正在使用 Bootstrap 较少的文件，最近的文件。

由于darken() 和lighten() 类，看起来less-files 失败了。

错误是：

> lessc 致命错误：预期颜色值：`background-color: darken(@inputBackground, 1%);` 在第 195 行的 /Applications/MAMP/htdocs/foobar/application/less/forms.less失败

当我走到那条线时，我找到了 lighten() 的 darken()，将其删除，错误就消失了。但是出现了一个新的错误，也与 lighten() 类的 darken() 一致。奇怪，对吧，不是吗？有没有人知道的修复？因为我不想到处删除 lighten() 和 darken()，所以它们是 Bootstrap 中最好的函数。

在 SublimeText2 中已将文件保存为 UTF8，但没有 BOM

编辑：奇怪，它在我的 NAS 上时有效。在我的 MacBook 上不是本地的 .. 是 OSX 问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T02:20:13.990

一旦我更改了less file @import 规则的顺序，我的问题就解决了。在调用 darken() 之前应该解析颜色定义。

# mysql - 在 MySQL 控制台中如何从文件中填充数据库

> ID：15173361
> 
> 赞同：1
> 
> 时间：2013-03-02T10:23:29.850
> 
> 标签：mysql, populate

当我在 mysql 控制台中时，如何从 sql 文件填充数据库？ `LOAD DATA INFILE`不适合我的问题。我想填充整个数据库，而不仅仅是一张表。`mysql -u root -p database < file.sql`也不会工作。因为我无法退出 mysql 控制台。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-02T10:26:28.717

您想在命令行批量插入吗？为什么不使用[mysqlimport](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html)

```
shell> mysqlimport [options] db_name textfile1 [textfile2 ...] 
```

# css - wordpress中的CSS缩略图悬停问题

> ID：15173364
> 
> 赞同：0
> 
> 时间：2013-03-02T10:23:41.987
> 
> 标签：css, wordpress

我在这里工作[http://tinyurl.com/a74ko2o](http://tinyurl.com/a74ko2o)，这是一家电子商务商店，由 wordpress 提供支持，我的问题是在单个产品页面中，在此链接页面中进行 css 设计，你们可以在悬停时看到大图像下的缩略图缩略图显示实心红色边框

我添加了这个效果，但是现在，问题是当它悬停时，图像向下移动，而不是固定。我需要修复它，就像这个网站[http://emporium.premiumcoding.com/demo.php](http://emporium.premiumcoding.com/demo.php)

此处为缩略图的 css

```
.leftcontentsp .thumbnails img {
    border: 4px solid #343434;
    height: 92px;
    margin: 5px 4px 8px 0;
    width: 92px;
} 
```

悬停时

```
.leftcontentsp .thumbnails img:hover, .product_list_widget li img:hover {
border: 5px solid #d00000;
} 
```

请帮助解决这个css问题，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:34:57.873

问题是因为在`5px`宽后添加宽边​​框会导致图像向下移动`4px`的`1px`差异。我们可以通过添加和删除填充来解决这个问题，因此图像保持在原位：

```
.leftcontentsp .thumbnails img {
    border: 4px solid #343434;
    height: 92px;
    margin: 5px 4px 8px 0;
    width: 92px;
    padding: 1px;
}

.leftcontentsp .thumbnails img:hover, .product_list_widget li img:hover {
    border: 5px solid #d00000;
    padding: 0;
} 
```

或者，如果这是一个错误，只需将边框设置`:hover`为与普通边框一样宽。

```
.leftcontentsp .thumbnails img:hover, .product_list_widget li img:hover {
    border: 4px solid #d00000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:36:21.433

看看男人的不同

给出相同的边框宽度

```
.leftcontentsp .thumbnails img:hover, .product_list_widget li img:hover {
border: 4px solid #d00000;
} 
```

与自然状态一样

`1px`令人不安

这是为了

悬停过渡

```
.leftcontentsp .thumbnails img:hover, .product_list_widget li img:hover {
    border: 4px solid #d00000;
-webkit-transition: all 0.25s ease-in-out;
        -moz-transition: all 0.25s ease-in-out;
        -o-transition: all 0.25s ease-in-out;
        -ms-transition: all 0.25s ease-in-out;
        transition: all 0.25s ease-in-out;
    } 
```

# css - Zurb Foundation 中的嵌套网格问题

> ID：15173368
> 
> 赞同：2
> 
> 时间：2013-03-02T10:24:11.597
> 
> 标签：css, grid, responsive-design, zurb-foundation

我将向您展示我创建的一个 jsfiddle，以说明我想要实现的目标：

[http://jsfiddle.net/vraG7/3/embedded/result/](http://jsfiddle.net/vraG7/3/embedded/result/)

这是该部分的代码：

```
<div class="row">
    <div class="twelve columns">
        <h2 class="first_column category_title">Nome Categoria</h2>

        <div class="row">
            <div class="nine columns thumbnail"><img
                src="http://www.placehold.it/125x125" alt=""></div>
            <div class="three columns date"><time
                datetime="2013-02-28" >28<br>02<br>2013</time></div>
        </div>
        <div class="row">
            <div class="twelve columns">
                <h2 class="post-title"><a href="">Titolto del post</a></h2>
            </div>
        </div>
    </div>
</div>

</div> <!-- category-column --> 
```

我想要做的是让 125x125 图像和右侧的日期框与带有“Nome categoria”的橙色框的宽度相同。我以为我做对了一切，但显然我错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:26:50.133

很难说到底是什么问题。您正在覆盖许多基础样式。一堆 div 上的高度、边距等。

1）您正在将希望对齐的背景颜色应用于`<h2>`. 我建议将其应用于包含`<div>`. h2 永远不会做 div 的边缘，因此您将无法对齐它们。

2）对于您将颜色应用于背景的日期。它们可能已经对齐。如果您更改上述内容。

3）对于嵌套网格的故障排除，很容易将`panel`类添加到所有它们，这会增加间距但让您看到每个嵌套网格之间的关系。

这是基础 4，但可能有用：

[http://foundation.zurb.com/grid-example2.php](http://foundation.zurb.com/grid-example2.php)

# iphone - iPad模拟器界面旋转90°

> ID：15173374
> 
> 赞同：0
> 
> 时间：2013-03-02T10:25:16.260
> 
> 标签：iphone, xcode, ipad

我正在为 iPad 开发一个应用程序（鼓机），我有一个用户界面的草稿。iOS 6.1模拟器界面OK：

![iOS 6.1 上的界面](../Images/e890c7bf72b0feb5fd9624f5476f64ac.png)

但它在 iOS 5.1 模拟器中转了 90°：

![iOS 5.1 上的界面](../Images/ab9cf643a89e3159db9d3bc57e8d4b4b.png)

这就是我调用视图的方式（在 stackoverflow 成员的帮助下）

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
{    
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.viewController = [[XDrumViewController alloc] initWithNibName:@"XDrumViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;
 } 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:19:56.633

您可能没有定义

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation; 
```

在 iOS < 6 上需要这样做才能使自动旋转工作（请参阅[此处](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation%3a)）。为了快速测试，定义：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
} 
```

在您的视图控制器中。这将只为横向启用自动旋转（即，它将强制您的控制器横向）。

# java - 在谷歌地图上显示小程序

> ID：15173375
> 
> 赞同：0
> 
> 时间：2013-03-02T10:25:34.677
> 
> 标签：java, google-maps, jar, applet, overlay

我可以使用自定义叠加层在谷歌地图上显示一个 java 小程序，以便在我滚动地图时它会滚动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:57:22.670

如果滚动地图时小程序应保持在原位，则无需执行任何特别的操作，也无需创建自定义叠加层。地图和小程序可以是两个不同`<div>`的元素，它们位于同一个父项中，并且被定位为小程序被绘制在地图的顶部。这与定位任何其他 html 元素没有什么不同。

见例子：http: [//jsfiddle.net/7Ckhu/](http://jsfiddle.net/7Ckhu/)

如果您想在自定义叠加层中添加小程序，例如因为您希望它与地图一起滚动/拖动，您可以以编程方式创建一个`div`包含小程序的元素

```
var appletDiv = document.createElement('div');
var objectElement = document.createElement('object');
objectElement.setAttribute('type', 'application/x-java-applet');
objectElement.setAttribute('height', '200');
objectElement.setAttribute('width', '200');
appletDiv.appendChild(objectElement);

var codeParam = document.createElement('param');
codeParam.setAttribute('name', 'code');
codeParam.setAttribute('value', <<the code>>);
objectElement.appendChild(codeParam);
var archiveParam = document.createElement('param');
archiveParam.setAttribute('name', 'archive');
archiveParam.setAttribute('value', <<the archive>>);
objectElement.appendChild(archiveParam);
<< etc etc >> 
```

并使用您自己的自定义覆盖类或使用许多可用实现之一（如[gmaps div 覆盖库](http://jonyt.github.com/gmaps-div-overlay/divoverlay.js)）将其覆盖在地图上。

```
var divOverlay = new DivOverlay(appletDiv, map, map.getCenter());
divOverlay.show(); 
```

然而， [结果令人失望。](http://jsfiddle.net/4BW68/2/embedded/result/)[（jsfiddle包括代码）](http://jsfiddle.net/4BW68/2/)

Mozilla 不太喜欢小程序，但是如果我单击导航栏中的红色乐高块并告诉它允许小程序，事情看起来很不错。

Chrome 显示所有内容，但是当我滚动并点击地图边缘时，小程序不会被剪裁。它被绘制在地图之外。并且在某些时候重绘机制会被打乱。这可能是可修复的，但至少这不是开箱即用的。

IE 只是画了一个白色方块，没有小程序。

# node.js - 对于实时 node.js 消息传递应用程序，我是否会在 Heroku 中没有 websockets 时获得相同的功能？

> ID：15173380
> 
> 赞同：2
> 
> 时间：2013-03-02T10:26:10.853
> 
> 标签：node.js, heroku, express, websocket, socket.io

我一直在 Heroku 上制作 node.jss + express + socket.io 应用程序。我最近意识到他们不支持 websockets，这对于实时通信来说是理想的。他们强迫你使用长轮询，它使用 http 代替。我想以正确的方式做到这一点，但另一方面，我不想再次设置这个项目，因为它只是一个概念证明/让我习惯了 node.js。

这里的正确做法是什么？继续使用heroku，然后可能稍后更改应用程序以使用套接字，或者使用与heroku不同的服务重新开始？这里要考虑的事情是我必须更改的代码量，以及坚持使用长轮询而不是 websockets 的功能损失。我不知道其中任何一个将如何受到影响。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T10:35:00.460

socket.io 使用`xhr-polling`而不是`websocket`. 性能不会那么好，但今天很少有云产品支持不止一个实例。

现在 nginx 已经支持 websocket，这可能很快就会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T13:46:50.320

如果您只想弄乱套接字和节点，我建议您改用 nodejitsu。我使用它并且对它非常满意。不过，我现在又回到了 Heroku，因为它更适合我的需求（并且应用程序不需要实时交互，轮询就足够了）。Nodejitsu 支持实际的 websocket。

# android - 切换服务活动

> ID：15173385
> 
> 赞同：0
> 
> 时间：2013-03-02T10:26:52.517
> 
> 标签：android, service

我正在开发一项需要在前台运行的服务，用户可以通过活动打开/关闭它。所以基本上，活动可能会被杀死，但只要用户没有停止服务，它就是安全的。

但是，我遇到了这个麻烦：如果服务打开，如何关闭它？这意味着，如果我的活动被杀死，然后重新启动，所以我没有得到启动服务意图的引用来调用`stopService`.

以下是我当前的代码。如果用户在同一活动启动服务后调用 deactivate ，它工作正常。按钮状态始终正确，但是当我的活动由操作系统重新启动时，`this.serviceIntent`为空。

```
protected boolean isServiceRunning() {
    ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if (SynchronizationService.class.getName().equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
}

@Override
protected void onResume() {
    super.onResume();

    this.togglingByCode = true;
    this.butActivate.setChecked(this.isServiceRunning());
    this.togglingByCode = false;
}

public void onActivateButtonClick(final boolean pIsChecked) {
    if (this.togglingByCode) { return; }

    if (pIsChecked) {
        this.saveSettings();

        this.serviceIntent = new Intent(this, SynchronizationService.class);
        this.serviceIntent.putExtra(KEY_WEBSERVICE, this.txtWebService.getText().toString());
        this.serviceIntent.putExtra(KEY_PASSWORD, this.txtPassword.getText().toString());
        this.serviceIntent.putExtra(KEY_INTERVAL, Integer.parseInt(this.txtRefreshInterval.getText().toString()));
        this.serviceIntent.putExtra(KEY_TIMEOUT, this.preferences.getInt(KEY_TIMEOUT, DEFAULT_TIMEOUT));
        this.serviceIntent.putExtra(KEY_RETRY, this.preferences.getInt(KEY_RETRY, DEFAULT_RETRY));

        this.startService(this.serviceIntent);
    } else {
        this.stopService(this.serviceIntent);
        this.serviceIntent = null;
    }
} 
```

请告诉我如何正确停止服务。谢谢你。

Ps：我知道一个 make 的技巧`serviceIntent` `static`，但我对此感到不安全。如果没有其他方法，那么我将使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:30:32.207

只需在活动的 onCreate 中初始化您的 serviceIntent... 您可以使用相同的 serviceIntent 启动您的服务、终止您的活动、重新打开它并停止服务。

# ubuntu - 无法在 Ubuntu 11.10 上启动 PhpStorm

> ID：15173386
> 
> 赞同：0
> 
> 时间：2013-03-02T10:26:57.640
> 
> 标签：ubuntu, phpstorm

我刚刚按照[http://wiki.jetbrains.net/intellij/Installing_and_running_PHPStorm_on_Ubuntu](http://wiki.jetbrains.net/intellij/Installing_and_running_PHPStorm_on_Ubuntu)官方教程一步一步在 Ubuntu 上安装了 PhpStorm。

当我尝试启动 /home/user/PhpStorm/phpstorm.sh 时，我收到此错误：

```
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)
Error: Could not find or load main class com.intellij.idea.Main 
```

因此，无法找到或加载 com.intellij.idea.Main。有谁能够帮助我？我不知道我应该如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:57:06.417

是的，问题出在存档管理器上。未选中“重新创建文件夹”复选框，导致文件夹结构损坏。使用选中的“重新创建文件夹”重新安装后，PhpStorm 启动良好！

以防万一，[这里](http://starikovs.com/2013/03/02/install-phpstorm-on-ubuntu/)有一些关于这个错误的信息。

# java - 当我们转发请求时，web.xml 中的过滤器会被执行吗？

> ID：15173388
> 
> 赞同：3
> 
> 时间：2013-03-02T10:27:06.690
> 
> 标签：java, jakarta-ee, web-applications, servlets, forward

当我将请求从 servlet 转发到另一个时，是否执行 web.xml 中描述的过滤器？事实上，如果请求转发，我不确定 web.xm 是否出现在图片中？我知道在重定向的情况下会发生这种情况，因为它是来自浏览器的新请求，但不确定是否转发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T10:39:09.877

默认情况下 - 没有。

您可以通过添加在转发时启用特定过滤器的执行

```
<dispatcher>FORWARD</dispatcher> 
```

对其`<filter-mapping>`。

# c# - 如何在.NET中以编程方式密码保护pdf？

> ID：15173389
> 
> 赞同：6
> 
> 时间：2013-03-02T10:27:06.553
> 
> 标签：c#, .net, pdf, password-protection

我需要使用 C# 中的密码以编程方式保护 PDF 文件。同一个 PDF 文件必须以不同的名称和不同的密码保存。

有谁知道这种方法（请不要使用昂贵的工具..）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T10:31:00.657

可以使用[itextsharp](http://itextpdf.com/)完成：

```
using (var input = new FileStream("test.pdf", FileMode.Open, FileAccess.Read, FileShare.Read))
using (var output = new FileStream("test_encrypted.pdf", FileMode.Create, FileAccess.Write, FileShare.None))
{
    var reader = new PdfReader(input);
    PdfEncryptor.Encrypt(reader, output, true, "userPassword", "userPassword", PdfWriter.ALLOW_PRINTING);
} 
```

# android - 如何根据一些标志在安卓手机上禁用/启用短信

> ID：15173390
> 
> 赞同：3
> 
> 时间：2013-03-02T10:27:12.617
> 
> 标签：android

我正在寻找一个应用程序，该应用程序禁用从 android 设备发送或接收 SMS 消息或两者兼而有之。安装应用程序后，它会检查 Web url 的布尔值 0 或 1，如果为零，则禁用 sms，否则启用。

谁能指导我从哪里开始？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:00:56.443

恕我直言，您根本无法禁用 SMS 接收/发送，但您可以捕获 SMS 接收到的广播意图。

SMS 接收到的Broadcast Intent 是一个有序的Broadcast，它将按照Receiver 中定义的Priority 的顺序传递给所有Broadcast Receiver。

如果您注册优先级为 0 的广播接收器，您可以捕获 SMS 广播并取消它。

请记住，其他 SMS 应用程序也可以使用优先级 0 注册，相同优先级值的行为未定义。无论如何，短信也会收到，你只隐藏结果通知/铃声。

* * *

另一种方法是将 SMS 中心号码设置为一些无效值，但需要有根电话

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T11:12:50.473

您可以为传入的 SMS 注册一个 BroadcastReceiver 并用于`this.abortBroadcast();`中止其进一步处理：

在你的内心显现：

```
 <receiver android:name=".SMSBroadcastReceiver">
   <intent-filter>
     <action android:name="android.provider.telephony.SMS_RECEIVED"></action>
   </intent-filter>
 </receiver> 
```

接收器的实现：

```
 public class SMSBroadcastReceiver extends BroadcastReceiver {

    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

    @Override
    public void onReceive(Context context, Intent intent) {
      if (intent.getAction() == SMS_RECEIVED) {
        Bundle bundle = intent.getExtras();
        ...
        this.abortBroadcast();
      }
    }
} 
```

但是 - 无法以这种方式中止发送的 SMS。请注意，如果注册了多个 BroadcastReceiver，则优先级最高的 ( `android:priority`) 将首先处理。

# magento - 升级 Magento EE1.10.to 1.12 显示问题添加到购物车按钮在客户登录后消失

> ID：15173391
> 
> 赞同：1
> 
> 时间：2013-03-02T10:27:26.087
> 
> 标签：magento

将 magento EE1.10 升级到 1.12 时，一切似乎都运行良好，但在测试期间，当客户从前端登录时，添加到购物车按钮和价格 Div 消失。

然后我将设计包和模板更改为“企业”我发现了类似的问题，我猜这个问题与设计无关，而是在其他地方，

我无法找出确切的问题是什么，

有没有人知道可能是什么问题？

启用日志后，我发现了这个

```
2013-03-02T10:53:27+00:00 ERR (3): 
SoapFault exception: [Client] SOAP-ERROR: Encoding: string '\xad...' is not a valid utf-8 string in /www/sites/xxxx/files/html/app/code/core/Mage/Usa/Model/Shipping/Carrier/Fedex.php:410
Stack trace:
#0 [internal function]: SoapClient->__call('getRates', Array)
#1 /www/sites/xxxxx/files/html/app/code/core/Mage/Usa/Model/Shipping/Carrier/Fedex.php(410): SoapClient->getRates(Array)
#2 /www/sites/xxxxx/files/html/app/code/core/Mage/Usa/Model/Shipping/Carrier/Fedex.php(443): Mage_Usa_Model_Shipping_Carrier_Fedex->_doRatesRequest('general')
#3 /www/sites/xxxxx/files/html/app/code/core/Mage/Usa/Model/Shipping/Carrier/Fedex.php(186): Mage_Usa_Model_Shipping_Carrier_Fedex->_getQuotes()
#4 /www/sites/xxxxx/files/html/app/code/core/Mage/Shipping/Model/Shipping.php(207): Mage_Usa_Model_Shipping_Carrier_Fedex->collectRates(Object(Mage_Shipping_Model_Rate_Request))
#5 /www/sites/xxxxx/files/html/app/code/core/Mage/Shipping/Model/Shipping.php(129): Mage_Shipping_Model_Shipping->collectCarrierRates('fedex', Object(Mage_Shipping_Model_Rate_Request))
#6 /www/sites/xxxxx/files/html/app/code/core/Mage/Sales/Model/Quote/Address.php(888): Mage_Shipping_Model_Shipping->collectRates(Object(Mage_Shipping_Model_Rate_Request))
#7 /www/sites/xxxxx/files/html/app/code/core/Mage/Sales/Model/Quote/Address.php(819): Mage_Sales_Model_Quote_Address->requestShippingRates()
#8 /www/sites/xxxxx/files/html/app/code/core/Mage/Sales/Model/Quote/Address/Total/Shipping.php(155): Mage_Sales_Model_Quote_Address->collectShippingRates()
#9 /www/sites/xxxxx/files/html/app/code/core/Mage/Sales/Model/Quote/Address.php(957): Mage_Sales_Model_Quote_Address_Total_Shipping->collect(Object(Mage_Sales_Model_Quote_Address))
#10 /www/sites/xxxxx/files/html/app/code/core/Mage/Sales/Model/Quote.php(1263): Mage_Sales_Model_Quote_Address->collectTotals()
#11 /www/sites/xxxxx/files/html/app/code/local/Idev/OneStepCheckout/Model/Sales/Quote.php(27): Mage_Sales_Model_Quote->collectTotals()
#12 /www/sites/xxxxx/files/html/app/code/core/Mage/Checkout/Model/Session.php(210): Idev_OneStepCheckout_Model_Sales_Quote->collectTotals()
#13 /www/sites/xxxxx/files/html/app/code/core/Mage/Checkout/Model/Observer.php(44): Mage_Checkout_Model_Session->loadCustomerQuote()
#14 /www/sites/xxxxx/files/html/app/code/core/Mage/Core/Model/App.php(1338): Mage_Checkout_Model_Observer->loadCustomerQuote(Object(Varien_Event_Observer))
#15 /www/sites/xxxxx/files/html/app/code/core/Mage/Core/Model/App.php(1317): Mage_Core_Model_App->_callObserverMethod(Object(Mage_Checkout_Model_Observer), 'loadCustomerQuo...', Object(Varien_Event_Observer))
#16 /www/sites/xxxxx/files/html/app/Mage.php(447): Mage_Core_Model_App->dispatchEvent('customer_login', Array)
#17 /www/sites/xxxxx/files/html/app/code/local/Mage/Customer/Model/Session.php(195): Mage::dispatchEvent('customer_login', Array)
#18 /www/sites/xxxxx/files/html/app/code/local/Mage/Customer/Model/Session.php(183): Mage_Customer_Model_Session->setCustomerAsLoggedIn(Object(Mage_Customer_Model_Customer))
#19 /www/sites/xxxxx/files/html/app/code/core/Mage/Customer/controllers/AccountController.php(149): Mage_Customer_Model_Session->login('IL876510@farrla...', 'abcd.1234')
#20 /www/sites/xxxxx/files/html/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Customer_AccountController->loginPostAction()
#21 /www/sites/xxxxx/files/html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('loginPost')
#22 /www/sites/xxxxx/files/html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#23 /www/sites/xxxxx/files/html/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#24 /www/sites/xxxxx/files/html/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#25 /www/sites/xxxxx/files/html/index.php(87): Mage::run('', 'store')
#26 {main} 
```

# mysql - 内部连接的行数

> ID：15173394
> 
> 赞同：0
> 
> 时间：2013-03-02T10:27:57.000
> 
> 标签：mysql, count, inner-join

好的，我已经尝试了 2 天来解决这个问题。我有 2 张桌子

*   组织部
    *   ID
    *   有机的
    *   部门名称
*   组织_dep_users
    *   ID
    *   有机的
    *   冷酷无情
    *   用户身份

我想列出组织部门的用户 ID 计数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T10:30:10.380

你可以试试这个：

```
SELECT 
    b.depname, count(a.id)
FROM organization_dep_users a 
INNER JOIN Organization_dep b ON a.depid = b.id
GROUP BY b.depname; 
```

## 编辑：

感谢 Barmar 提供更多详细信息。

# java - 通过带有 jQ uery 的选择框使用多个获取值进行 Onchange

> ID：15173396
> 
> 赞同：1
> 
> 时间：2013-03-02T10:28:05.807
> 
> 标签：java, jquery, html, drop-down-menu, jquery-selectbox

我有 2 个带有 Java 脚本的选择框。当我使用 filter1 时，我的 url 更改为 www.url.com/&filter[]=6827 这很完美，并且所选选项也可以正常工作。但我想要一个新的选择框，比如带有多个过滤器的 filter2。当我像下面这样使用它时，网址看起来像这样：www.url.com/&filter[]%3D=6727%26filter[]%3D6728

有人可以帮助解决这个问题吗？我认为它在 jquery 中...不确定。

```
<div class="filter1">
  <div class="title">Filter1</div>
    <form action="filter1" method="get" id="input-custom-filter1">   
     <select name="filter[]=" onchange="$('#formFilters').submit();">
     <option value="6725">Option1</option>
     <option value="6726">Option2</option>
     <option value="6727">Option3</option>
     <option value="6728">Option4</option>
     </select>
</div>   
<div class="filter2">
  <div class="title">Filter1</div>
    <form action="filter2" method="get" id="input-custom-filter2">   
     <select name="filter[]=" onchange="$('#formFilters').submit();">

     <option value="6725&filter[]=6726">Option1 & Option2</option>
     <option value="6727&filter[]=6728">Option3 & Option4</option>
         </select>
    </div> 

<script type="text/javascript">
    $(document).ready(function(){
      $('#formFilters').submit() {
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:54:05.317

该代码无法理解您通过的所有符号。我不确定您要在这里实现什么，但它显然不是您的 javascript 中的错误，也不是您的 HTML 中的错误。尽管使用 6727&filter[]=6728 作为值是一个坏主意。

我希望错误是您获得提交信息的地方。您可能有错误定义和重定向到 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:19:34.587

上面的 HTML 代码片段中存在一些问题。

1.  请从 中去掉`=`，`<select name="filter[]="`name属性表示表单域的名称，如果设置了**method="get"**，浏览器会自动添加**=**来构造URL。

2.  `<option value="6725&filter[]=6726">`不会满足你的要求。value 属性中的所有内容都将被视为某个表单字段的值，在您的情况下为**filter[]**，因此会被编码。这就是您看到**%3D的原因**

3.  不用于传递表单字段的多个值。Naturaly 复选框是这种情况下的选项。

所以在第二种形式中，您可以使用复选框传递多个值

```
<input type="checkbox" name="filter[]" value="6725"/>
<input type="checkbox" name="filter[]" value="6726"/> 
```

同样，请从任何表单字段元素的**名称**属性中删除**= 。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T11:22:23.370

```
<option value="6725&filter[]=6726">Option1 & Option2</option>
<option value="6727&filter[]=6728">Option3 & Option4</option> 
```

您的选项值有问题尝试更改它..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T00:33:44.663

@gijsnl URL 编码是默认浏览器行为（因为您使用的是表单**获取**方法），我认为破解它不是一个好主意。在您的情况下，您可以使用多选来实现目标。StackOverflow 里已经有帖子了，

**[如何发布具有多个选定值的 HTML 列表框的选择](https://stackoverflow.com/questions/379432/how-to-post-the-selections-of-an-html-list-box-with-multiple-selected-values)**

我的建议如下， 1.从select 元素的**name*属性中删除****等号；**2\. 不要在一个**选项**元素中添加多个值 3\. 使用表单**发布**而不是**获取**，除非您有非常充分的理由这样做。**

# java - JFreeChart 跨子图对齐 BarChart 宽度

> ID：15173398
> 
> 赞同：1
> 
> 时间：2013-03-02T10:28:16.797
> 
> 标签：java, swing, charts, jfreechart

我正在构建通过 CombinedRangeCategoryPlot 组合的多个堆叠条形图（子图）。

由于子图数据集没有相同数量的项目，并且由于 JFreeChart 决定为每个子图分配相同的空间，因此我有不同宽度的条形图。

有什么办法可以对齐它们的宽度（即使这意味着子图有不同的宽度）？

请参阅下面的结果和我到目前为止的代码。

非常感谢，托马斯

![在此处输入图像描述](../Images/af418869ab2fd9cae8a8df2aab2bae01.png)

 `````
//Builds commong range axis
NumberAxis rangeAxis = new NumberAxis("%");
rangeAxis.setRange(0, 1.0);
rangeAxis.setNumberFormatOverride(NumberFormat.getPercentInstance());

//Builds common data set
CombinedRangeCategoryPlot combinedPlots = new CombinedRangeCategoryPlot(rangeAxis);
for (int groupIndex=0; groupIndex<LeakGroups.values().length; ++groupIndex){
    //Builds category axis
    CategoryAxis categoryAxis = new CategoryAxis(GuiConstants.LEAK_GROUPS_LABELS[groupIndex]);
    //Sets margins between bars
    categoryAxis.setCategoryMargin(0.5f);

    //Builds bar renderer
    StackedBarRenderer barRenderer = new StackedBarRenderer();
    barRenderer.setRenderAsPercentages(true);

    //Builds dot/level renderer
    LineAndShapeRenderer dotRenderer = new LineAndShapeRenderer();
    //dotRenderer.setSeriesLinesVisible(0, false);
    //dotRenderer.setSeriesShapesVisible(0, false);
    //dotRenderer.setSeriesLinesVisible(1, false);
    //Defines level shape height (depends on chart size): nominal values are for a height of 1000px 
    int shapeHeightPx = (int) Math.round(20 * (this.getHeight() / 1000.0));
    dotRenderer.setSeriesShape(1, new Rectangle(-1, -shapeHeightPx/2, 2, shapeHeightPx));

    //Builds plot
    CategoryPlot plot = new CategoryPlot();
    plot.setDomainAxis(categoryAxis);
    plot.setDataset(0, data[groupIndex].bars);
    plot.setRenderer(0, barRenderer);
    plot.setDataset(1, data[groupIndex].dots);
    plot.setRenderer(1, dotRenderer);

    //Adds to combined
    combinedPlots.add(plot);
}
combinedPlots.setOrientation(PlotOrientation.HORIZONTAL);
//Puts range axis at the bottom
combinedPlots.setRangeAxisLocation(AxisLocation.BOTTOM_OR_RIGHT);
//Changes plot render sequence so that bars are in the background and shapes in front
combinedPlots.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);
//Shows gridlines for categories and not for values
combinedPlots.setDomainGridlinesVisible(true);
combinedPlots.setRangeGridlinesVisible(false);

//Creates chart
JFreeChart chart = new JFreeChart("Leaks", combinedPlots);

//Sets a margin right to allow space for last catergory label ("100%")
chart.setPadding(new RectangleInsets(0, 0, 0, 20));

return chart; 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:47:15.170

经过几个小时的搜索，找到了解决方案：使用`plot.setWeight()`.

出于某种原因，将绘图添加到 时，权重会重置为值 1 `CombinedRangeCategoryPlot`，因此必须在之后设置。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T03:23:36.380

> `1`出于某种原因，添加绘图时权重会重置为值。

通过解释，

*   该[`add(CategoryPlot subplot)`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/CombinedRangeCategoryPlot.html#add%28org.jfree.chart.plot.CategoryPlot%29)方法指定默认`weight`值`1`,

*   该[`add(CategoryPlot subplot, int weight)`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/CombinedRangeCategoryPlot.html#add%28org.jfree.chart.plot.CategoryPlot,%20int%29)方法允许您指定一个`weight`值。``

# jquery - 使用 jquery-ui-1.10.1.custom.js 时未定义 jQuery：

> ID：15173404
> 
> 赞同：3
> 
> 时间：2013-03-02T10:29:28.217
> 
> 标签：jquery, jquery-ui

*错误消息* ***(* *Uncaught ReferenceError: jQuery is not defined jquery-ui-1.10.1.custom.js:319 (anonymous function)** ) ***

```
<script src="JS/jquery-ui-1.10.1.custom.js" type="text/javascript"></script>
<script src="JS/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>        
<script src="MODULES/SHK/Js/autoCombo/jquery.ui.core.js" type="text/javascript"></script>
<script src="MODULES/SHK/Js/autoCombo/jquery.ui.position.js" type="text/javascript"></script>
<script src="MODULES/SHK/Js/autoCombo/jquery.ui.widget.js" type="text/javascript"></script>
<script src="MODULES/SHK/Js/autoCombo/jquery.ui.autocomplete.js" type="text/javascript"></script>
<script src="MODULES/SHK/Js/autoCombo/jquery.ui.button.js" type="text/javascript"></script>
<script src="MODULES/SHK/Js/autoCombo/TRYY.js" type="text/javascript"></script>

<script>
    window.onload = aa();
    function aa() {
        $("#combx").combobox({

            selected: function(event, ui) {
                alert(ui.item.value);
            }
        });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T10:32:24.280

您需要声明主 JQuery 库，并且您有两个 jquery-ui-custom 声明，一个是原始版本，另一个是缩小版本。尝试删除另一个。我建议你只删除未缩小的那个

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="JS/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>  
/** 
 *Your other scripts below 
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:48:16.683

当您使用其他 jquery 相关插件时，您应该`jquery-1.8.3.min.js`在其他 JS 的顶部声明 jquery minified ( )。

由于 JQuery 对象必须在`jquery-1.8.3.min.js`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T08:38:03.590

去掉括号！

```
window.onload = aa();//this runs aa instantly, not on window.onload

window.onload = aa;//this gives window.onload event a function to execute when it's time 
```

# python - Python 类和替换函数？

> ID：15173405
> 
> 赞同：0
> 
> 时间：2013-03-02T10:29:33.667
> 
> 标签：python

```
randomState = collections.namedtuple('randomState', ['player', 'score']) 
```

假设我有一个包含 player/score 的 namedtuple，如果我要替换这些函数中的任何一个，我会这样做：

```
def random(state):
    return state._replace(score='123') 
```

如何创建一个具有基本上类似于命名元组的函数的类，并且能够手动替换任一玩家/分数？

```
class Random:
    def abc(self, score):
        if self.score == '123':
            ###had it were a namedtuple, I would use the replace function here, but classes don't allow me to do that so how would I replace 'score' manually? 
```

我不确定我在这里是否有意义，但如果有人理解我的问题，我将非常感谢您的反馈。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:49:41.320

If I get your question right, you need a function which, depending on score's value assigns some new value to it. Is it what you are looking for?

```
# recommended to use object as ancestor
class randomState(object):
    def __init__(self, player, score):
        self.player = player
        self.score = score

    def random(self, opt_arg1, opt_arg2):
        # you may want to customize what you compare score to
        if self.score == opt_arg1:
            # you may also want to customize what it replaces score with
            self.score = opt_arg2 
```

Example:

```
my_state = randomState('David', '100')
new_state = my_state.random('100', '200') 
```

# asp.net - 板球得分网站 + Asp.net MVC + 自动更新得分和运行静态

> ID：15173407
> 
> 赞同：1
> 
> 时间：2013-03-02T10:29:56.327
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, sql-server-2008, entity-framework

我正在研究具有创建团队、锦标赛、团队之间的比赛以及对比赛进行评分等功能的项目......通过网络和移动应用程序......

所以我必须实现一个功能，比如如果记分员立即输入分数，记分卡或球员统计数据上的分数更新会用新值反映，

我正在使用 Asp.net MVC 3.0、MS SQL 2008 和实体框架、jQuery 等。

所以请任何人都可以在照顾网站性能的同时指导实现上述功能......

提前致谢......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:52:10.877

我的建议是**SignalR**

ASP.NET SignalR 是面向 ASP.NET 开发人员的新库，可简化向应用程序添加实时 Web 功能的过程。实时 Web 功能是让服务器端代码在内容可用时立即将内容推送到连接的客户端的能力。

您可能听说过 HTML5 WebSocket API，它可以在浏览器和服务器之间实现高效的双向通信。SignalR 在浏览器和服务器支持时使用 Websockets，在不支持时优雅地回退到其他技术和技术。无论哪种方式，您的应用程序代码都保持不变。

SignalR 提供了一个简单的 ASP.NET API，用于创建从服务器端 .NET 代码调用客户端浏览器中的 JavaScript 函数的服务器到客户端远程过程调用 (RPC)。SignalR 还包括用于连接管理（例如，连接和断开事件）、连接分组和授权的 API。

[更多关于 SignalR](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)

[样本](https://github.com/SignalR/SignalR)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T14:45:20.680

如果您的问题是已呈现页面的实时更新，我会使用 SignalR。它允许您将数据从 MVC 应用程序推送到网页。然后网站上的 JavaScript 可以实时更新内容。查找单页应用程序和 SignalR

这是入门指南[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)

# c++ - C++中数的素数除数

> ID：15173411
> 
> 赞同：-1
> 
> 时间：2013-03-02T10:30:17.193
> 
> 标签：c++

这是我在 Stackoverflow 上的第一个问题，如果我做错了什么，请见谅。:) 你能帮我处理这段代码吗？谢谢！:)

```
#include <iostream>
using namespace std; 
```

1)

```
int divisor(int a) // function that checks the divisors of a number *)
{
int i=1; // counter
while(i<=a) // while the counter is less than the number given
{
    int i;
    if(primes(i)) // here i get the error "primes was not declared in this scope
    {
        if(a%i==0) // if the remainder of the operation is 0, the number is a divisor
        {
            cout<<"The divisors of the number are: "<<i<<endl; // prints the divisors
            ++i; // counter is incremented
        }
    }
    else // else it is not, and the counter i is incremented
    {
        ++i;
    }
}
} 
```

2)

```
int primes(int number) // checks if a number is prime
{
int i; 
for(i=2;i<number;i++) // for loop until the counter i is less than a number
{
    if(number%i==0) // if the remainder of the operation is 0, the number is not prime
    {
        break;
    }
    else //else the number is prime
                    cout<<number;
        break;
    }
}
} 
```

3)

```
int main()
{
int n,i;
cout<<"Give the number: ";
cin>>n;
for(i=2;i<n;i++)
{
    divisor(n);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:33:38.607

有几个问题：

1）您需要在`primes()`之前声明`divisors()`：

```
int primes(int number); 
```

2）您的`primes()`函数无法返回值。

3) 不是所有的代码路径都是`divisor()`递增的`i`。

我相信还有更多问题，但这应该让你开始......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:39:47.443

假设您在上面给出的顺序与您在文件中使用的顺序相同，问题是您的除数函数首先出现并使用稍后声明的素数函数。最简单的（我猜也是最常见的）解决方案是使用“前向递减”。这意味着您在文件的顶部声明：

```
int divisor(int);
int primes(int); 
```

此外，您忘记让 primes() 返回一个值。（因为这个问题被标记为 C++，你甚至可以考虑让它返回一个 bool 而不是一个 int）。

同样在素数中， else 子句现在会导致中断，但我认为这并不完全明智。像 9 这样的数字在除以 2 时会出现在该子句中，但它不能被 2 整除的事实并不能使它成为质数……

在寻找素数时还有其他“聪明的技巧”，但也许这超出了这个问题的范围。

# c++ - 如何将列表存储到 STL 中的列表中

> ID：15173419
> 
> 赞同：0
> 
> 时间：2013-03-02T10:31:12.700
> 
> 标签：c++, list, stl, arraylist

我想生成 1 到 n 之间的一些数字的列表，假设最初的列表是：

```
 L1: 1
   L2: 2
   L3: 3
   L5: 4
       .
       .
   Ln-1: n-1
   Ln: n 
```

总共有 n 个列表，最初包含 1 到 n 。现在我想更新列表。

请告诉我如何使用 STL 列表在 C++ 中创建这样的列表。

我正在尝试这样。

```
list<int> first[n+1]; 
```

然后存储：

```
 for(i=1;i<=n;i++) 
     first[i].push_back(i); 
```

但我收到运行时错误，

请告诉我如何解决这个问题。

```
list<int> a = {1,2,3};
 list<int> b = {4,5};
 list<int> c = {5,6}; 
```

我们可以这样做：

```
 list<int>a[3];
 then 
    a[0].push_back(1);
    a[0].push_back(2);       
    a[0].push_back(3);
    a[1].push_back(4);
    a[1].push_back(5);
    a[2].push_back(5);
    a[2].push_back(6); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T05:51:22.550

邻接表

```
vector< vector<int> > Vec (n+1); 
```

它可以完全满足要求。

# ruby-on-rails - Heroku - Ruby On rails - 域更改后出错

> ID：15173423
> 
> 赞同：0
> 
> 时间：2013-03-02T10:31:39.193
> 
> 标签：ruby-on-rails, ruby

我的应用程序已经运行了超过 24 小时，没有任何问题。

我决定尝试将自定义域添加到我的网站。我按照说明进行操作，然后转到我的 Godaddy 面板，将 www 从 @ 更改为 mysite.heroku.com

我去睡觉了，当我今天早上醒来时，我得到了这个错误

```
An error occurred in the application and your page could not be served. Please try again in a few moments. 
```

如果您是应用程序所有者，请查看您的日志以获取详细信息。”

检查日志后，这是我看到的

```
2013-03-02T10:22:24+00:00 heroku[web.1]: Process exited with status 1
2013-03-02T10:22:24+00:00 heroku[web.1]: State changed from starting to crashed
2013-03-02T10:22:25+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=vauxden.herokuapp.com fwd="176.251.155.165" dyno= queue= wait= connect= service= status=503 bytes=
2013-03-02T10:22:26+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=vauxden.herokuapp.com fwd="176.251.155.165" dyno= queue= wait= connect= service= status=503 bytes=
2013-03-02T10:22:39+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=vauxden.herokuapp.com fwd="176.251.155.165" dyno= queue= wait= connect= service= status=503 bytes=
2013-03-02T10:22:39+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=vauxden.herokuapp.com fwd="176.251.155.165" dyno= queue= wait= connect= service= status=503 bytes= 
```

我对 ruby​​ on rails 和 heroku 还很陌生，所以我不知道如何解决这个错误。

我还删除了自定义域并在我的 Godaddy 面板中将所有内容更改为正常，但我仍然收到此错误。

我试图推送我的代码的最新版本，但没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:27:41.123

GoDaddy 可能会让人头疼，我赞同以上开发人员所说的话^。正确加载可能需要一两天的时间，因此在该端寻找问题的根源可能是不可靠的。

检查以确保在 Heroku 方面为您的应用程序正确运行一切。Heroku 的状态看起来不错，[https://status.heroku.com/](https://status.heroku.com/)。

你的应用在本地测试时没有崩溃？http://localhost:3000/随便

检查您的宝石，其他人似乎也有类似的问题。[关联](https://stackoverflow.com/questions/12880632/heroku-app-crashes-with-libruby-so-1-9-cannot-open-shared-object-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:49:18.063

你`heroku run rake db:migrate`在部署你的应用程序后执行了吗？

# php - 如何从外部js文件调用php文件中的函数

> ID：15173424
> 
> 赞同：1
> 
> 时间：2013-03-02T10:31:41.860
> 
> 标签：php, javascript, jquery, facebook

我必须调用下面的函数调用到我的 php 文件...如果有人有想法请帮助....

```
 function update_hidden_input(saved_tokens, hidden_input) 
{
    var token_values = $.map(saved_tokens, function (el) 
{
            //alert(el[settings.tokenValue]);
            return el[settings.tokenValue];
 });

    hidden_input.val(token_values.join(settings.tokenDelimiter));
         //var frienduid =(token_values.join(settings.tokenDelimiter));
        //alert(frienduid);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T20:24:04.263

您可以通过使用`jQuery.ajax()`or`jQuery.post()`函数将数据发送到**PHP**来完成。但它不安全。因为 JavaScript 对所有浏览器都是开放的。坏人可能会发送意外数据并借此机会损害您的应用程序/网络。无论如何，这是您的选择。

检查[facebook server-side-login](http://developers.facebook.com/docs/howtos/login/server-side-login/)，它可以帮助你更多。

# javascript - 在谷歌地图上放置多个标记

> ID：15173425
> 
> 赞同：0
> 
> 时间：2013-03-02T10:31:43.417
> 
> 标签：javascript, jquery, google-maps

我是 JS 的一个小新手，我正在尝试遍历节点中的一些坐标并将其放置在 Google 地图上。

这是我的代码

```
var lis = document.getElementById("showNames").getElementsByTagName("li");
var lat = document.getElementById("showLat").getElementsByTagName("li");
var lng = document.getElementById("showLng").getElementsByTagName("li");
var length = lis.length;

for (var i = 0; i < length; i++) {
    new google.maps.Marker({
        position: new google.maps.LatLng(lat[i].innerHTML, lng[i].innerHTML),
        icon: '/panasonic/images/store-icons.png'
    }).setMap(map);

} 
```

这不起作用，我得到一张空地图，但萤火虫没有显示错误。

如果我在循环之外这样做

```
new google.maps.Marker({
    position: new google.maps.LatLng(lat[0].innerHTML, lng[0].innerHTML),
    icon: '/panasonic/images/store-icons.png'
    //animation:google.maps.Animation.BOUNCE
}).setMap(map); 
```

但是我需要它循环，因为我将从我的数据库中更新

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:48:20.113

您可以查看以下示例。当您单击“添加一些标记”链接时，我有一组坐标出现在地图上。

```
<!doctype html>
<html lang="en">
   <head>
        <title>Google Maps</title>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
        <script type="text/javascript">

            var cityList = [
                    ['Chicago', 41.850033, -87.6500523, 1],
                    ['Illinois', 40.797177,-89.406738, 2]
                ],
                demoCenter = new google.maps.LatLng(41,-87),
                map;

            function initialize()
            {
                map = new google.maps.Map(document.getElementById('map_canvas'), {
                   zoom: 7,
                   center: demoCenter,
                   mapTypeId: google.maps.MapTypeId.ROADMAP
                 });
            }

            function addMarkers()
            {
                var marker, 
                i,
                infowindow = new google.maps.InfoWindow();

                for (i = 0; i < cityList.length; i++) 
                {  
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
                        map: map,
                        title: cityList[i][0]
                    });

                    google.maps.event.addListener(marker, 'click', (function(marker, i) {
                        return function() {
                            infowindow.setContent(cityList[i][0]);
                            infowindow.open(map, marker);
                        }
                    })(marker, i));
                }
            }

            $(document).ready(function() {
                initialize();
            });

            $(document).on('click', '.add-markers', function(e) {
                e.preventDefault();
                addMarkers();
            });

        </script>
    </head>
    <body>
        <div id="basic-map">
            <div id="map_canvas" style="height:350px;"></div>
            <a href="#" class="add-markers">Add Some Markers</a>
        </div>      
    </body>
</html> 
```

更新答案以自动显示标记：

```
<!doctype html>
<html lang="en">
   <head>
        <title>Google Maps</title>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
        <script type="text/javascript">

            var cityList = [
                    ['Chicago', 41.850033, -87.6500523, 1],
                    ['Illinois', 40.797177,-89.406738, 2]
                ],
                demoCenter = new google.maps.LatLng(41,-87),
                map;

            function initialize()
            {
                map = new google.maps.Map(document.getElementById('map_canvas'), {
                   zoom: 7,
                   center: demoCenter,
                   mapTypeId: google.maps.MapTypeId.ROADMAP
                 });
            }

            function addMarkers()
            {
                var marker, 
                i,
                infowindow = new google.maps.InfoWindow();

                for (i = 0; i < cityList.length; i++) 
                {  
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
                        map: map,
                        title: cityList[i][0]
                    });

                    google.maps.event.addListener(marker, 'click', (function(marker, i) {
                        return function() {
                            infowindow.setContent(cityList[i][0]);
                            infowindow.open(map, marker);
                        }
                    })(marker, i));
                }
            }

            $(document).ready(function() {
                initialize();
                addMarkers();
            });

        </script>
    </head>
    <body>
        <div id="basic-map">
            <div id="map_canvas" style="height:350px;"></div>
        </div>      
    </body>
</html> 
```

# phonegap-plugins - PhoneGap.Build 示例 com.facebook.sdk 错误 2

> ID：15173426
> 
> 赞同：0
> 
> 时间：2013-03-02T10:31:45.513
> 
> 标签：phonegap-plugins, facebook-ios-sdk, phonegap-build

通过这个 repo 中的 phonegap.build 服务简单示例（[https://github.com/phonegap-build/FacebookConnect/tree/master/example/Simple](https://github.com/phonegap-build/FacebookConnect/tree/master/example/Simple)）+我的 config.xml （[https://gist.github.com/祖尔曼/5070388](https://gist.github.com/zulman/5070388)）

点击登录按钮后消息通知我“com.facebook.sdk error 2”

我检查了 github 主页上有关此错误的所有信息，检查了 stackoverflow 条目。

*   我的包 id 在 facebook 开发页面和配置中是相同的。
*   我的沙盒模式在 Facebook 开发页面上被禁用。
*   我的应用程序 ID 在 js、配置和 facebook 开发页面上是相等的。

我如何在不使用 xcode 手动构建的情况下获得扩展的错误信息或修复它的方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:29:56.043

我有完全相同的问题。检查您请求的权限。显然，使用最新版本的 SDK，您无法在同一请求期间请求写入和读取权限。

对我来说，请求“offline_access”是个问题。删除那个后，错误消失了。尝试只请求基本权限（例如“email,user_about_me”），看看会发生什么。

# c - 在 C 中读取 .dat 文件丢失/重复记录

> ID：15173427
> 
> 赞同：0
> 
> 时间：2013-03-02T10:31:49.253
> 
> 标签：c, file

我正在尝试从 .dat 文件中读取结构...要读取的第一个整数是读数的数量，然后是以下结构格式的数据

```
struct Oven
{
int rec_no; 
int temp; 
int status;
char string[10];
}; 
```

下面是我读取文件的方法

```
int read_and_process_file()
{
    int counter;
    FILE *ptr_myfile;
    struct Oven my_record; 

    ptr_myfile=fopen("data.dat","rt");

    //for no of readings
    fread(&no_of_readings,sizeof(no_of_readings),1,ptr_myfile);

        for ( counter=1; counter <= 50; counter++) 
        { 
              fread(&my_record,sizeof(struct Oven),1,ptr_myfile);

            name=my_record.string;

            printf("%d : ",my_record.rec_no);
            fprintf(ptr_myfile2,"%d : ",my_record.rec_no);
            printf("%d : ",my_record.temp);
            printf("%d : ",my_record.status);
            printf("%s\n",name);
        } 

    fclose(ptr_myfile);
   return 0; 
} 
```

但我在 25 条记录后无法读取超过 25 条记录，它不断重复第 25 条记录...

试过 fseek 但它跳过了一些记录......有什么帮助吗？

这是输出图像

![](../Images/2542c97d55868aa16e25453311e99643.png)

更新（Wildplasser）这是数据的前 0x200 字节（看起来有点不规则......）

```
00000000  b8 0b 00 00 00 00 00 00  54 00 00 00 01 00 00 00  |........T.......|
00000010  42 6f 62 00 cd cd cd cd  cd cd cd cd 01 00 00 00  |Bob.............|
00000020  4d 00 00 00 00 00 00 00  43 4c 4f 53 45 44 00 cd  |M.......CLOSED..|
00000030  cd cd cd cd 02 00 00 00  2e 00 00 00 00 00 00 00  |................|
00000040  43 4c 4f 53 45 44 00 cd  cd cd cd cd 03 00 00 00  |CLOSED..........|
00000050  5f 00 00 00 01 00 00 00  48 61 72 72 79 00 cd cd  |_.......Harry...|
00000060  cd cd cd cd 04 00 00 00  44 00 00 00 01 00 00 00  |........D.......|
00000070  48 61 72 72 79 00 cd cd  cd cd cd cd 05 00 00 00  |Harry...........|
00000080  63 00 00 00 01 00 00 00  4a 69 6c 6c 00 cd cd cd  |c.......Jill....|
00000090  cd cd cd cd 06 00 00 00  53 00 00 00 01 00 00 00  |........S.......|
000000a0  4a 61 6d 65 73 00 cd cd  cd cd cd cd 07 00 00 00  |James...........|
000000b0  56 00 00 00 00 00 00 00  43 4c 4f 53 45 44 00 cd  |V.......CLOSED..|
000000c0  cd cd cd cd 08 00 00 00  49 00 00 00 00 00 00 00  |........I.......|
000000d0  43 4c 4f 53 45 44 00 cd  cd cd cd cd 09 00 00 00  |CLOSED..........|
000000e0  53 00 00 00 01 00 00 00  42 6f 62 00 cd cd cd cd  |S.......Bob.....|
000000f0  cd cd cd cd 0d 0a 00 00  00 59 00 00 00 00 00 00  |.........Y......|
00000100  00 43 4c 4f 53 45 44 00  cd cd cd cd cd 0b 00 00  |.CLOSED.........|
00000110  00 46 00 00 00 01 00 00  00 4a 69 6c 6c 00 cd cd  |.F.......Jill...|
00000120  cd cd cd cd cd 0c 00 00  00 38 00 00 00 00 00 00  |.........8......|
00000130  00 43 4c 4f 53 45 44 00  cd cd cd cd cd 0d 00 00  |.CLOSED.........|
00000140  00 48 00 00 00 00 00 00  00 43 4c 4f 53 45 44 00  |.H.......CLOSED.|
00000150  cd cd cd cd cd 0e 00 00  00 5e 00 00 00 01 00 00  |.........^......|
00000160  00 4a 61 6d 65 73 00 cd  cd cd cd cd cd 0f 00 00  |.James..........|
00000170  00 40 00 00 00 01 00 00  00 4a 69 6c 6c 00 cd cd  |.@.......Jill...|
00000180  cd cd cd cd cd 10 00 00  00 56 00 00 00 00 00 00  |.........V......|
00000190  00 43 4c 4f 53 45 44 00  cd cd cd cd cd 11 00 00  |.CLOSED.........|
000001a0  00 43 00 00 00 01 00 00  00 4a 61 6d 65 73 00 cd  |.C.......James..|
000001b0  cd cd cd cd cd 12 00 00  00 60 00 00 00 01 00 00  |.........`......|
000001c0  00 42 6f 62 00 cd cd cd  cd cd cd cd cd 13 00 00  |.Bob............|
000001d0  00 5e 00 00 00 00 00 00  00 43 4c 4f 53 45 44 00  |.^.......CLOSED.|
000001e0  cd cd cd cd cd 14 00 00  00 55 00 00 00 00 00 00  |.........U......|
000001f0  00 43 4c 4f 53 45 44 00  cd cd cd cd cd 15 00 00  |.CLOSED.........| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:06:30.267

由于您的代码片段不完整，因此很难准确判断发生了什么，但这里有一些我注意到的事情：

*   您似乎没有使用读取的 no_of_readings，而是尝试读取 50 条记录。由于您不检查 fread 的返回值，因此您的程序只会继续使用最后一次成功读取的 fread。

*   如果您不阅读文本，则不应以文本模式打开文件。行尾转换可能会损坏您的数据。改用“rb”（在文本模式下打开的标准 C 方式也只是省略 b，t 是非标准的）。

*   **编辑：**在 Windows 上以文本模式读取文件会将 ctrl-z 字节 (26) 解释为文件结尾。这就是您的读取在第 25 条记录后停止的原因。

*   像这样直接从结构读取/写入数据将导致数据文件不可移植。最好手动将您的结构序列化为字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T11:32:36.617

我建议检查 fread 的返回值以检查错误

```
 int size = fread(&my_record,sizeof(struct Oven),1,ptr_myfile);
       if (size != sizeof(struct Oven))
       {
          perror ("Error reading Line %d", counter);
          break;
       } 
```

这应该可以让您了解出了什么问题

# google-maps - 无法在 Google Maps v3 中的标记上注册点击侦听器

> ID：15173428
> 
> 赞同：0
> 
> 时间：2013-03-02T10:31:55.933
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

实际上我正在从 Maps v2 迁移到 v3。但我面临一个非常奇怪的错误。这是我的代码

```
function createMarker(arrayPos,title,posn) {
    var size = {width:15,height:15};
    var iconSize = new google.maps.Size(size.width,size.height);
    var iconAnchor = new google.maps.Point(9, 34);
    var marker = new google.maps.Marker({
        icon: new google.maps.MarkerImage("my.png",iconSize,null,iconAnchor),
        title: title,
        animation: google.maps.Animation.DROP,
        position: posn
    });
    marker.html = getMarkerHtml(arrayPos);
    var infowindow = new google.maps.InfoWindow();  
    infowindow.setContent(marker.html);
    infowindow.open(map,marker);
    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(marker.html);
        infowindow.open(map,marker);
    });
    return marker;
} 
```

在此，我正在尝试在添加标记后立即打开信息窗口以及点击侦听器。在此所有信息窗口都会打开，但侦听器始终未在第一个标记上注册。这有什么指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:18:55.230

我已将您的代码修改如下，并且可以正常工作。你会检查它是否解决了你的问题？

为了模拟标记单击，您应该添加：`google.maps.event.trigger(marker, 'click');`

```
function createMarker(arrayPos,title,posn) {
    var size = {width:15,height:15};
    var iconSize = new google.maps.Size(size.width,size.height);
    var iconAnchor = new google.maps.Point(9, 34);
    var marker = new google.maps.Marker({
        icon: new google.maps.MarkerImage("my.png",iconSize,null,iconAnchor),
        title: title,
        animation: google.maps.Animation.DROP,
        position: posn
    });
    //marker.html = getMarkerHtml(arrayPos);
    var infowindow = new google.maps.InfoWindow();  
    //infowindow.setContent(marker.html);
    //infowindow.open(map,marker);

    var markersHTML = getMarkerHtml(arrayPos);

    google.maps.event.addListener(marker, 'click', (function(marker, markersHTML) {
        return function() {
            infowindow.setContent(markersHTML);
            infowindow.open(map, marker);
        }
    })(marker, markersHTML));

    return marker;
} 
```

例子：

```
<!doctype html>
<html lang="en">
   <head>
        <title>Google Maps</title>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
        <script type="text/javascript">

            var cityList = [
                    ['Chicago', 41.850033, -87.6500523, 1],
                    ['Illinois', 40.797177,-89.406738, 2]
                ],
                demoCenter = new google.maps.LatLng(41,-87),
                map;

            function initialize()
            {
                map = new google.maps.Map(document.getElementById('map_canvas'), {
                   zoom: 7,
                   center: demoCenter,
                   mapTypeId: google.maps.MapTypeId.ROADMAP
                 });
            }

            function addMarkers()
            {
                var marker, 
                i,
                infowindow = new google.maps.InfoWindow();

                for (i = 0; i < cityList.length; i++) 
                {  
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
                        map: map,
                        title: cityList[i][0]
                    });

                    var markersHTML = ["<div><a href=\"test\">",cityList[i][0],"</a></div>"].join("");

                    google.maps.event.addListener(marker, 'click', (function(marker, markersHTML) {
                        return function() {
                            infowindow.setContent(markersHTML);
                            infowindow.open(map, marker);
                        }
                    })(marker, markersHTML));
                }
            }

            $(document).ready(function() {
                initialize();
            });

            $(document).on('click', '.add-markers', function(e) {
                e.preventDefault();
                addMarkers();
            });

        </script>
    </head>
    <body>
        <div id="basic-map">
            <div id="map_canvas" style="height:350px;"></div>
            <a href="#" class="add-markers">Add Some Markers</a>
        </div>      
    </body>
</html> 
```

我希望这有帮助。

# node.js - NodeJS - Mongoose（对象没有方法“id”）

> ID：15173431
> 
> 赞同：1
> 
> 时间：2013-03-02T10:32:05.480
> 
> 标签：node.js, mongoose

当我在我的应用程序中尝试此代码时：

*应用程序/模型/Post.coffee*

```
mongoose      = require "mongoose"
CommentModel  = require "./Comment"
Comment       = CommentModel.Schema
Schema        = mongoose.Schema

Post = new Schema {
    title: String,
    slug: {type: String, index: { unique: true, dropDubs: true }},
    content: String,
    author: String,
    tags: [String],
    comments: [Comment],
    created: { type: Date, default: Date.now }
}

Post.statics.findBySlug = (slug, cb) ->
    this.model("Post").findOne({ slug: slug }, cb)

PostModel = mongoose.model "Post", Post

module.exports = PostModel 
```

*应用程序/模型/Comment.coffee*

```
mongoose  = require("mongoose")
Schema    = mongoose.Schema

Comment = new Schema {
    author: String,
    content: String,
    approved: Boolean,
    created: { type: Date, default: Date.now }
}

CommentModel = mongoose.model "Comment", Comment

module.exports = CommentModel 
```

*app/controllers/PostsController.coffee*（只有一种方法）

```
commentDestroy: (req, res, next) ->
    Post.findBySlug req.params.slug, (err, doc) ->
        if (err)
            return next err

        if doc == null
            res.send 404
            return

        doc.comments.id(req.params.comment).remove()
        doc.save (err) ->
            if err
                next err

            res.json doc 
```

它以错误结束：

```
TypeError: Object [object Object],[object Object],[object Object],[object Object],[object Object] has no method 'id'
    at Promise.PostsController.commentDestroy (/home/r41ngoloss/Projects/www/my-express/app/controllers/PostsController.js:88:22)
    at Promise.addBack (/home/r41ngoloss/Projects/www/my-express/node_modules/mongoose/lib/promise.js:128:8)
    at Promise.EventEmitter.emit (events.js:96:17)
    at Promise.emit (/home/r41ngoloss/Projects/www/my-express/node_modules/mongoose/lib/promise.js:66:38)
    at Promise.complete (/home/r41ngoloss/Projects/www/my-express/node_modules/mongoose/lib/promise.js:77:20)
    at Query.findOne (/home/r41ngoloss/Projects/www/my-express/node_modules/mongoose/lib/query.js:1533:15)
    at model.Document.init (/home/r41ngoloss/Projects/www/my-express/node_modules/mongoose/lib/document.js:229:11)
    at model.init (/home/r41ngoloss/Projects/www/my-express/node_modules/mongoose/lib/model.js:192:36)
    at Query.findOne (/home/r41ngoloss/Projects/www/my-express/node_modules/mongoose/lib/query.js:1531:12)
    at exports.tick (/home/r41ngoloss/Projects/www/my-express/node_modules/mongoose/lib/utils.js:408:16) 
```

我已经尝试为我的问题找到解决方案，但我发现了[这一点](https://stackoverflow.com/questions/7035092/how-to-update-embedded-document-in-mongoose%20%22this)，并且我认为我的模式顺序正确（通过*require*）。

感谢您的每一个回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:14:29.403

您收到该错误的原因是您没有在*Post.coffee*文件`Comment`中正确获取架构。当我做你做的事情时，变量是. *将Post.coffee*文件的顶部修改为：*`Comment``undefined`*

 **```
mongoose = require "mongoose"
Comment  = mongoose.model('Comment').schema
Schema   = mongoose.Schema 
```

现在`Comment`变量是模型的`Comment`模式。**

# php - 上传 cron 文件 cron.txt 的目录

> ID：15173433
> 
> 赞同：0
> 
> 时间：2013-03-02T10:32:08.703
> 
> 标签：php, cron

我有一个名为的文件`cron.txt`，其中包含以下脚本

```
*/5 * * * * /usr/bin/curl http://www.divinotech.com/send_data 
```

我正在使用 url 来调用文件，

现在

我只想知道，在哪里上传这个文件以及如何调用它......

问题是我对此完全陌生，我对此一无所知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:08:55.773

要使用 crontab，您必须将此文本复制到`crontab`.

脚步：

*   类型`crontab -e`（`e`代表`edit`）
*   粘贴行`*/5 * * * * /usr/bin/curl http://www.divinotech.com/send_data`
*   保存并退出（通常是 vi 编辑器，所以你必须输入`:wq`- w 保存，q 退出）
*   `crontab -l`通过写作（`l`代表）检查是否所有内容都已正确写入`list`。它将显示保存在 crontab 中的实际信息。

从那一刻起，您的脚本应该每 5 分钟执行一次。无论如何，如果它没有回到这个站点并询问，因为会有一些问题需要检查。

祝你好运！

# java - 输出是什么，为什么？

> ID：15173438
> 
> 赞同：1
> 
> 时间：2013-03-02T10:32:44.777
> 
> 标签：java

这两个语句的输出是什么。我无法理解这是如何工作的。我会说对于数字 1，b = 33。这就是说 a=a+1 所以 a = 33。b 等于 a，所以 b 也必须是 33？对于第二个，我会说 b = delmar。有点困惑，希望得到一些帮助，谢谢。

1：

```
int a;
int b;
a = 32;
b = a;
a = a + 1;
System.out.println(b); 
```

2：

```
Person a;
Person b;
a = new Person("Everett");
b = a;
a.changeName("Delmar");
System.out.println(b.getName()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:35:24.160

第一条语句的输出是 32。这是因为 b 不是对象，所以 int 变量不代表指向对象的指针；它代表实际值。

第二条语句将输出“Delmar”。这是因为 B 和 A 实际上指向同一个对象，当你改变 a 中的一个值时，你就隐式地改变了 b 中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:36:22.610

在第一个中，值`a`被*复制*到 b。所以后面的变化`a`不会影响`b`.

在第二个中，两者都`a`指`b`代同一个对象。所以`a`后面的变化会体现在`b`.

所以输出将是：`32`在第一种情况下和`Delmar`在第二种情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:38:11.677

在添加后的 premetive 的情况下，将创建新对象。因此 b 将指向旧的 a，它等于 32。

但是在非 premetive Person 类的情况下，a 和 b 都指向同一个对象，因此对对象的任何更改都将被引用到两个参考变量。

# c# - 从对象转换回通用

> ID：15173440
> 
> 赞同：1
> 
> 时间：2013-03-02T10:32:55.650
> 
> 标签：c#, generics, windows-runtime

我想将一些 PageDefinitions 传递给一个新的 Windows RT 页面。

页面定义：

```
class PageDefinition<T> where T: IItem { ... } 
```

我这样传递：

```
rootFrame.Navigate(typeof(Overview), new PageDefinition<AnItem>) 
```

然后在新页面中，我想从我的论点中获取信息。页面的 LoadState-Method 预定义如下：

```
 protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState) 
```

但是如何将 navigationParameter 转换回我的原始类型？我尝试了以下方法，但这不起作用（pageDefinition 保持为空）

```
var pageDefinition = navigationParameter as PageDefinition<IItem>; 
```

我不能转换回原来的类型吗？

当我环顾四周但找不到有用的东西时，感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:42:52.133

正如 Jim 在评论中已经提到的那样，在 C# 中不允许以下转换，`PageDefinition<T>`并在您的问题中定义：

```
var def = (PageDefinition<IItem>)new PageDefinition<AnItem>(); 
```

这将需要将泛型类强制转换为具有较少派生泛型参数的泛型类。如果您`navigationParameter`改为使用 to `PageDefinition<AnItem>`，它将按预期工作。

或者，您可以利用对[协变通用接口](http://msdn.microsoft.com/en-us/library/dd997386.aspx)的支持，并在您确实需要时进行转换。您需要声明（注意`out`关键字）：

```
interface IPageDefinition<out T> where T: IItem { } 
```

接着：

```
class PageDefinition<T> : IPageDefinition<T> where T: IItem 
```

完成此操作后，以下演员将起作用：

```
var def = (IPageDefinition<IItem>)new PageDefinition<AnItem>(); 
```

在接口中使用 T 是有限制的（基本上你只能将它用作返回类型），所以你必须检查你是否可以让它为你工作。链接文章中描述了详细信息。

# android - 如何保存当前位置？

> ID：15173441
> 
> 赞同：1
> 
> 时间：2013-03-02T10:33:01.050
> 
> 标签：android, location

我创建了一个简单的应用程序，用于在我移动时向我显示当前位置（纬度、经度）。我需要时如何保存当前位置？

```
 public void onLocationChanged(Location location) {

        double lat = location.getLatitude();
        double lng = location.getLongitude();

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:17:10.373

使用`SharedPreferences`.

要保存位置，请使用：

```
getPreferences(MODE_PRIVATE).edit().putDouble("lng", lng).putDouble("lat", lat).commit(); 
```

要读取位置，请使用：

```
SharedPreferences prefs = getPreferences(MODE_PRIVATE);
double lng = prefs.getDouble("lng", -1);
double lat = prefs.getDouble("lat", -1); 
```

# c# - Visual Studios 中的参考是什么？

> ID：15173442
> 
> 赞同：1
> 
> 时间：2013-03-02T10:33:02.603
> 
> 标签：c#, visual-studio

我知道这会引入一个由 Microsoft 预编译的额外库，但是，例如，在阳光下添加每个库是否有缺点？我还可以看到，默认情况下，将最常用的库添加到任何项目中。

编译我的应用程序时，它实际上对输出二进制文件有什么作用吗，因为我的印象是这些库中的大多数无论如何都是 .NET 框架的一部分？

那么除了自定义库之外，还有什么意义呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:09:38.783

没有什么可以阻止你这样做。由于必须从所有这些程序集的元数据中加载所有声明，编译器将陷入困境，但这在慢速磁盘上花费的时间不应超过几秒钟。可以肯定的是，标识符查找是摊销的 O(1)，因此它不应该显着减慢实际编译的速度。.NET 框架中的命名空间名称经过精心挑选，不会引起冲突。输出程序集将只有在代码中实际使用的引用列表。

唯一反对它的是，嗯，它不**优雅**。你的队友会在你背后窃窃私语。无论哪一天被选中来维护您的项目，他都会在看到您的项目的那一刻开始寻找另一份工作。被认为*邋遢*是程序员最糟糕的一种标签，这种名声很难承受。

# compilation - 调用特定函数时无法分类的语句

> ID：15173445
> 
> 赞同：0
> 
> 时间：2013-03-02T10:33:13.390
> 
> 标签：compilation, fortran

我想在我的代码中添加一个函数来计算一些变量。我创建了一个虚拟函数

```
 double precision FUNCTION rawSE(x)
  double precision x
  real ax
  rawSE = 0.0d0
  return
  END 
```

我称之为使用

```
 selfE=rawSE(1.0d0) 
```

当我尝试编译代码时，标题中出现错误。当我用值 (1.0d0) 替换 rawSE 时，我没有收到错误消息。当我用另一个函数替换它时，我没有收到错误。我复制了一个正常工作的函数并将其重命名。我得到了错误。

那么......这里发生了什么？这不是列位置问题（至少不是一个简单的问题），因为它们都从同一行开始。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:46:54.067

The rawSE function was declared in a module and a value was expected instead of a function. Moving the declaration out of the module part solved this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:11:15.893

我问你是否`rawSE`在使用它的程序中声明，你回答说你声明为`double precision`. 你的意思是你在模块和使用模块的程序中都声明了函数？像这样？

```
module my_stuff

implicit none

contains

double precision FUNCTION rawSE(x)
  double precision x
  rawSE = 2.0d0 * x
  return
end FUNCTION rawSE

end module my_stuff

program test_rawSE

use my_stuff

implicit none

double precision rawSE   ! <-- This line

write (*, *) rawSE (2.0d0)

end program test_rawSE 
```

如果是这样，那就是问题所在。您应该声明该函数一次，因此应删除“此行”行。最好保留模块，因为这会使接口对编译器显式。它不仅“知道”函数返回是双精度的，它还“知道”函数有一个双精度参数。这使它能够检查调用的参数是否与这些属性保持一致。

PS gfortran 4.1 真的很老而且过时了。更新的版本有了很大的改进。这可能是错误消息神秘的原因。gfortran 4.7 确定两个语句相互冲突：

```
double precision rawSE
                      1
rawSE.f90:18.4:

use my_stuff
    2
Error: Symbol 'rawse' at (1) conflicts with symbol from module 'my_stuff', use-associated at (2) 
```

# c++ - 可以在 startServerEncryption() 之后立即使用 QSslSocket 吗？

> ID：15173447
> 
> 赞同：0
> 
> 时间：2013-03-02T10:33:29.293
> 
> 标签：c++, qt, qsslsocket

调用后`QSslSocket::startServerEncryption()`，是否可以立即将socket当作普通的QTcpSocket使用，从中读写数据，还是需要先调用`waitForStartEncrypted()`才能使用？

```
socket->startServerEncryption();
socket->waitForEncrypted(); // <==== Is this line necessary?
socket->write(data);
QByteArray response = socket->read(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:18:05.393

您可以立即开始使用它。数据将被缓冲并稍后发送。请注意，您还不能从中读取任何数据，因为没有任何数据到达。在您进入事件循环之前，不会发生实际的连接和握手。

# macos - 所有处理器上的 os x 内核调用函数

> ID：15173448
> 
> 赞同：1
> 
> 时间：2013-03-02T10:33:32.877
> 
> 标签：macos, concurrency, driver, cpu, iokit

我正在 OS X (10.8.4) 上实现我的第一个驱动程序。我的驱动程序应该每秒读取每个处理器上的 MSR (0x198) 并将值打印到 system.log。

我正在使用 IOWorkLoop 和 IOTimerEventSource 每秒唤醒一次并调用一个打印 MSR 值的函数，但我找不到任何关于如何在所有处理器上调用该函数的指南/文档。

在这种情况下，您建议使用什么机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:42:53.750

找到了解决方案：

```
void mp_rendezvous_no_intrs(void (*action_func)(void *), void *arg) 
```

这将在所有内核上运行带有参数**arg的函数****action_func 。**

 **你可以在这里找到这个函数的源代码： [http ://www.opensource.apple.com/source/xnu/xnu-1456.1.26/osfmk/i386/mp.c](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/osfmk/i386/mp.c)**

# zend-framework2 - 如何在 zend 框架 2 中执行具有多个结果集的 MYSQL 存储过程

> ID：15173452
> 
> 赞同：0
> 
> 时间：2013-03-02T10:33:45.877
> 
> 标签：zend-framework2

如何在 zend 框架 2 中执行具有多个结果集的 MYSQL 存储过程意味着如果 sp 有多个选择查询，那么我如何在数组中获取所有结果以及如何在 sp 中传递动态值以在表中插入和更新数据。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:09:52.453

我最近写了一篇关于这个的[小文章](http://codingexplained.com/coding/php/zend-framework/multiple-result-sets-from-stored-procedure-in-zf2)。我找到的解决方案不是通用解决方案，并假设您使用的是 PDO。我不确定它是否适用于 MySQL 以外的其他数据库。有可能有一种我不知道的更好、更通用的方法来做到这一点。

```
$driver = $this->dbAdapter->getDriver();
$connection = $driver->getConnection();

$result = $connection->execute('CALL sp_get_profile_for_display (123)');
$statement = $result->getResource();

// Result set 1
$resultSet1 = $statement->fetchAll(\PDO::FETCH_OBJ);

foreach ($resultSet1 as $row) {
    $something = $row->some_column;
}

// Result set 2
$statement->nextRowSet(); // Advance to the second result set
$resultSet2 = $statement->fetchAll(\PDO::FETCH_OBJ);

foreach ($resultSet2 as $row) {
    /* Do something */
}

// Result set 3
$statement->nextRowSet(); // Advance to the third result set
$resultSet3 = $statement->fetchAll(\PDO::FETCH_OBJ);

foreach ($resultSet3 as $row) {
    /* Do something */
} 
```

将 替换为`123`您希望作为参数传递给存储过程的数据。如果使用用户提供的数据，请记住将其转义以防止 SQL 注入！

# windows - 从应用程序目录中提取 Windows 中的 magento 事件

> ID：15173454
> 
> 赞同：0
> 
> 时间：2013-03-02T10:33:57.073
> 
> 标签：windows, magento, grep

在这个[Magento 帮助页面](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)中，我看到了这个命令：

> grep -rin -B2 -A2 "Mage::dispatchEvent" app/* > events.txt

如何通过 Windows 命令行或 .bat 文件执行此操作？还是您认为通过 php 编程更容易完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:14:21.923

我已经通过 PHP Magento 完成了，但我想知道是否可以通过 Windows 命令行完成。

```
//Load Magento
require_once('app/Mage.php');
Mage::app();
Mage::setIsDeveloperMode(true);

//Get Config
//header('Content-Type: text/xml');         
header('Content-Type: text/plain');         
$config = Mage::getConfig()->loadModulesConfiguration('config.xml')->getNode('global/events');              
$events = $config[0];
foreach($events as $item){      
    echo $item->getName()." \n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:37:08.623

windows有grep：http: [//www.wingrep.com/](http://www.wingrep.com/)

并回答了一个 SO 问题：[什么是适用于 Windows 的好 grep 工具？](https://stackoverflow.com/questions/87350/what-are-good-grep-tool-for-windows)

# jenkins - 詹金斯：每天只发送一次成功电子邮件（尽管工作正在运行@hourly）

> ID：15173455
> 
> 赞同：5
> 
> 时间：2013-03-02T10:34:06.103
> 
> 标签：jenkins, jenkins-plugins, email-ext

我有一个配置为每小时运行的詹金斯作业。我希望每天仅以电子邮件形式发送一次成功构建邮件。Email-Ext 让我可以选择发送所有成功、失败等的电子邮件。但我想要的是只发送一次成功电子邮件的能力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-17T16:02:11.093

这是一个老问题，您可能已经找到了自己的解决方法，但我也有类似的需求，我想无论如何我都会分享我的解决方案。我试图做的是每天生成一份关于失败状态的工作的摘要电子邮件。这与为单个工作发送每日一次的成功报告基本上非常相似。

我的解决方案使用了 Groovy 构建步骤以及 Email-Ext 插件的预发送脚本功能。我从上面评论中引用的[Nabble 线程中得到了这个想法。](http://jenkins-ci.361315.n4.nabble.com/generating-a-daily-weekly-report-on-job-status-by-mail-td3766477.html)另请参阅Jenkins 网站上的[电子邮件分机食谱。](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+Recipes)

这是确定哪些构建失败的初始 groovy 脚本，在**Execute System Groovy Script**下配置。您可以执行类似的操作来确定您的构建是成功还是失败：

```
// List the names of jobs you want to ignore for this check
ignore = [ ]

// Find all failed and unstable jobs
failed = hudson.model.Hudson.instance.getView("All").items.findAll{ job ->
  job.getDisplayName() != "Daily Jenkins Job Nag" &&
  !ignore.contains(job.getDisplayName()) &&
  job.isBuildable() &&
  job.lastCompletedBuild &&
  (job.lastCompletedBuild.result == hudson.model.Result.FAILURE ||
   job.lastCompletedBuild.result == hudson.model.Result.UNSTABLE)
}

// Log the job names so the build results are legible
failed.each { job ->
  println(job.getDisplayName() +
          " " + job.lastCompletedBuild.result +
          " at build " + job.lastCompletedBuild.number +
          " (" + job.lastCompletedBuild.timestamp.format("yyyy-MM-dd'T'HH:mm ZZZZ") + ")");
}

// Return failure if there are any failed jobs
return failed.size 
```

然后，在**Editable Email Notification**部分，我将 Email-Ext 插件设置为通知失败。我将**Content Type**设置为*Plain Text (text/plain)*，将**Default Content**留空，并将以下内容设置为**Pre-send Script**：

```
failed = hudson.model.Hudson.instance.getView("All").items.findAll{ job ->
  job.getDisplayName() != "Daily Jenkins Job Nag" &&
  job.isBuildable() &&
  job.lastCompletedBuild &&
  (job.lastCompletedBuild.result == hudson.model.Result.FAILURE ||
   job.lastCompletedBuild.result == hudson.model.Result.UNSTABLE)
}

def output = StringBuilder.newInstance()

output << "<html>\n"
output << " <body>\n"
output << "<p>Jenkins reports the following failed jobs:</p>"
output << "  <ul>\n"

failed.each { job ->
  url = hudson.model.Hudson.instance.rootUrl + job.url + "/" + job.lastCompletedBuild.number + "/"
  output << "   <li>"
  output << "<a href=\"" + url  + "\">" + job.displayName + "</a>"
  output << " " + job.lastCompletedBuild.result 
  output << " at build " + job.lastCompletedBuild.number
  output << " (" + job.lastCompletedBuild.timestamp.format("yyyy-MM-dd'T'HH:mm ZZZZ") + ")"
  output << "</li>\n"
}

output << "  </ul>\n"
output << " </body>\n"
output << "</html>"

msg.setContent(output.toString(), "text/html") 
```

关键是您可以访问该`msg`对象，即[MimeMessage](http://docs.oracle.com/javaee/6/api/javax/mail/internet/MimeMessage.html)。您可以将 MIME 消息的内容设置为您想要的任何内容。

在这种情况下，我正在生成一个失败作业的列表，但在您的情况下，它将是您希望收到的每日一次成功报告的任何消息。根据您的需要，您可以让 Email-Ext 为每个构建发送结果，而不仅仅是为失败的构建发送结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-02T13:19:05.650

如果自上一封电子邮件以来没有足够的时间过去，如何禁止电子邮件？虽然不完全是所要求的，但像这样的预发送脚本因其简单性可能值得考虑？

```
if (build.result != hudson.model.Result.SUCCESS) {
    cancel = true;
}
else {
  try {
    long minEmailGap = 1000 * 60 * 60 * 16; // 16 hours in milliseconds

    File file = new File("/TimestampForMyJob.txt");

    if (file.exists() == false) {
      file.createNewFile();
    }
    else {
      long currentTime = (new Date()).getTime();

      if (file.lastModified() + minEmailGap > currentTime) {
        cancel = true;
      }
      else {
        file.setLastModified(currentTime);
      }
    }
  }
  catch(IOException e) {
    // We can't tell whether the e-mail should be sent out or not, so we do nothing
    // and it just gets sent anyway - probably the best we can do with this exception.
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T11:50:04.790

好吧，没有插件可以为您做到这一点。Jenkins 中的默认电子邮件功能非常简单，而且运行良好。虽然有[Email-ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)，但这个插件可以为您做更多的事情。

首先，使用 Email-ext，您可以配置一个特定的触发器来发送电子邮件通知 - 它可以是*success*或*failure*，这类似于 Jenkins 的默认行为。但是你有更精致的，比如*First failure*和*Still failed*。这将让您对 Jenkins 发送电子邮件的时间和对象（收件人列表、提交者或请求者）有很大的控制权。就我而言，这里的良好配置将对 Jenkins 生成的电子邮件流量有很大帮助。您可以在特定情况下向特定人员列表发送**特定**电子邮件 - 太棒了！

另一种选择是，如果您真的不需要这种级别的控制并且只想将电子邮件流量限制为每天一个摘要，则可以设置一个邮件列表。大多数邮件列表引擎将允许您将所有电子邮件流量的*每日摘要发送到列表。*应该足够了，虽然我真的不觉得从长远来看它实际上是一个好的选择。我肯定会尝试使用 Email-ext 插件。

# algorithm - 识别图像中的数字（Matlab）

> ID：15173462
> 
> 赞同：5
> 
> 时间：2013-03-02T10:34:32.647
> 
> 标签：algorithm, matlab, image-processing, image-recognition, matlab-cvst

我正在学习图像处理，我正在尝试开始我的第一个项目，即图像中的简单数字识别。

到目前为止，我已经对图像应用了阈值。现在我想知道一些算法，我的系统可以通过这些算法识别图像中的数字。最好该算法必须简单，并且不必像我使用相同字体在绘画中生成图像那样健壮。

我已经在 SO 上查看了类似的问题，它们都指出使用库。记住我正在努力学习的人，所以请不要指出一些图书馆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T21:46:37.317

数字是打印的还是手写的？

计算机视觉系统工具箱包含一个名为 的函数`ocr`，它可以识别字母和数字。

如果您正在寻找手写数字识别，请查看此[示例](http://www.mathworks.com/help/vision/examples/digit-classification-using-hog-features.html)。

# c++ - 无符号/有符号短/整数转换

> ID：15173466
> 
> 赞同：2
> 
> 时间：2013-03-02T10:34:44.393
> 
> 标签：c++, c

我正在研究有符号-无符号整数转换，我得出了这些结论，有人可以告诉我这是否正确

```
unsigned short var = -65537u; 
```

脚步：

*   65537u（隐式转换为无符号整数）

二进制表示：0000 0000 0000 0001 0000 0000 0000 0001

*   -65537u

二进制表示：1111 1111 1111 1110 1111 1111 1111 1111

*   截短

二进制表示：1111 1111 1111 1111

*   读为无符号短：65535

* * *

这同样适用于以下情况：

```
unsigned short var = -65541u; 
```

*   65541u（无符号整数）

0000 0000 0000 0001 0000 0000 0000 0101

*   -65541u

1111 1111 1111 1110 1111 1111 1111 1011

*   截短

1111 1111 1111 1011

*   读为无符号短：65531

* * *

```
unsigned short var = -5u; 
```

*   5u（无符号整数）

0000 0000 0000 0000 0000 0000 0000 0101

*   -5u

1111 1111 1111 1111 1111 1111 1111 1011

*   截短

1111 1111 1111 1011

*   读为无符号短：65531

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:20:17.593

`short`您的分析对于16 位和`int`32 位的常用平台是正确的。

对于某些平台，常量`65537`可能不适合`unsigned int`，但如果是这种情况，`65537u`将被键入为更大的无符号类型。可以在 C99 标准的第 6.4.4.1:5 节中找到尝试过的类型列表。在 C99 中，它至少适合 ，`unsigned long`标准保证允许值那么大。

如果发生这种情况，推理仍然大致相同，直到转换回`unsigned short`分配。

相反，`unsigned short`C99 标准允许保存超过 16 位。在这种情况下，您的第一个示例`var`接收`USHRT_MAX-65536`，其他示例接收类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:49:04.477

short 的大小取决于实现 - 而不是 16 位。16bit 是最小尺寸。

同样，int 的大小也可能只有 16 位。

# c# - 使用 HTMLEditorExtender 的文本框在按 Enter 时不插入新行

> ID：15173473
> 
> 赞同：6
> 
> 时间：2013-03-02T10:35:33.627
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit, htmleditorextender

我`HTMLEditorExtender`在我的网站中使用 AjaxToolKit 的控件。标记如下：

```
<asp:TextBox ID="TextBox2" runat="server" 
        Font-Names="'lucida grande',tahoma,verdana,arial,sans-serif" Height="100%" OnTextChanged="TextBox2_TextChanged" 
        style="margin-bottom: 26px; font-size: small;" Width="90%"></asp:TextBox>

<asp:HtmlEditorExtender ID="TextBox2_HtmlEditorExtender" runat="server" 
        Enabled="True" TargetControlID="TextBox2">
    <Toolbar>
        <asp:Undo />
        <asp:Redo />
        <asp:Bold />
        <asp:Italic />
        <asp:Underline />
        <asp:StrikeThrough />
        <asp:Subscript />
        <asp:Superscript />
        <asp:InsertOrderedList />
        <asp:InsertUnorderedList />
        <asp:RemoveFormat />
        <asp:SelectAll />
        <asp:UnSelect />
        <asp:Delete />
        <asp:Cut />
        <asp:Copy />
        <asp:Paste />
        <asp:Indent />
        <asp:Outdent />
        <asp:FontNameSelector />
    </Toolbar>
</asp:HtmlEditorExtender> 
```

运行应用程序，并在获得焦点时按*Enter 键*`TextBox2`，不会插入新行；**相反，`TextBox2`失去焦点**。

**除非**`HTMLEditorExtender`附加到 ，否则不会发生这种情况`TextBox2`。

**更多细节**

我在本地 IIS 中运行应用程序。该网站已上线，但该功能尚未在主网站上启动。我正在使用 ASP.NET WebForms 和最新的 AjaxToolkit 版本。这个问题也存在于每个浏览器中，包括 Chrome、IE、Opera、Firefox。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T16:16:01.607

最后我自己解决了这个错误。我提供的代码包含在具有默认按钮的面板中。所以我删除了 DefaultButton 属性，代码现在可以正常工作了。感谢大家添加您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:57:33.517

我相信你需要设置行数。看看这个例子，因为我知道它对我有用：

```
<ajax:HtmlEditorExtender ID="tbCommentHtmlExtender" runat="server"  
TargetControlID="tbEditor" DisplaySourceTab="false" EnableSanitization="false">  
  <Toolbar>                                        
   <ajax:FontNameSelector />
   <ajax:FontSizeSelector />
   <ajax:Bold />
   <ajax:Italic />
   <ajax:Underline />
   <ajax:StrikeThrough />
   <ajax:JustifyLeft />
   <ajax:JustifyCenter />
   <ajax:JustifyRight />
   <ajax:JustifyFull />
   <ajax:InsertOrderedList />
   <ajax:InsertUnorderedList />
   <ajax:CreateLink />
   <ajax:UnLink />
   <ajax:RemoveFormat />
   <ajax:BackgroundColorSelector />
   <ajax:ForeColorSelector />
  </Toolbar>
</ajax:HtmlEditorExtender>  

<asp:TextBox ID="tbEditor"  runat="server" Width="570px" Height="570px"  Rows="10" TextMode="MultiLine" ></asp:TextBox> 
```

还有，什么是

> OnTextChanged="TextBox2_TextChanged"

正在做？如果我的上述建议不起作用，请尝试删除它。如果可行，请发布相应的功能。

# java - 我们可以在没有 main() 方法的情况下执行 java 程序吗？

> ID：15173474
> 
> 赞同：19
> 
> 时间：2013-03-02T10:35:35.717
> 
> 标签：java

据我所知，我们无法在没有 main 方法的情况下执行，因为当您运行 java 程序时。java虚拟机查找main方法。如果JVM找不到main方法，它将显示运行时错误线程main中的异常找不到主类。

但是我搜索了很多博客，其中一些人说，是的，如果java程序中有一个静态块，可以通过静态博客来完成，类加载器在java调用main（）方法之前加载所有静态块！

真的有可能吗？这些的可用性是什么。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-02T10:39:45.747

现在不

* * *

在 Java 7 之前：

是的，顺序如下：

*   jvm 加载类
*   执行静态块
*   查找 main 方法并调用它

因此，如果静态块中有代码，它将被执行。但这样做没有任何意义。

如何测试：

```
public final class Test {
    static {
        System.out.println("FOO");
    }
} 
```

然后，如果您尝试运行该类（使用`java Test`IDE 或使用 IDE 的形式命令行），结果是：

> FOO
> java.lang.NoSuchMethodError：主要

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T11:17:30.173

是的，您可以在没有 main 方法的情况下编译和执行使用静态块。但是在执行（打印）静态块之后，您将收到一条错误消息，指出找不到主要方法。

最新信息 --> 你不能用 JAVA 7 版本做到这一点。IT 不会执行。

```
{
    static
    {
        System.out.println("Hello World!");
        System.exit(0); // prevents “main method not found” error
    }
} 
```

但这不会在 JAVA 7 版本中执行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T10:38:59.470

由于您也标记**了 Java-ee** - 那么**是**的，这是可能的。

在核心java中也可以使用[静态块](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

并检查这个[如何在没有 main 方法的情况下运行 Java 程序？](https://stackoverflow.com/questions/11421542/how-can-you-run-a-java-program-without-main-method)

**编辑：**
正如在其他答案中已经指出的那样 - 它不支持 Java 7

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T10:55:37.340

您还应该能够使用[Java 代理的 premain 方法](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html)完成类似的事情。

> 代理 JAR 文件的清单必须包含属性 Premain-Class。该属性的值是代理类的名称。代理类必须实现一个原则上类似于主应用程序入口点的公共静态 premain 方法。在 Java 虚拟机 (JVM) 初始化之后，每个 premain 方法将按照代理指定的顺序被调用，然后真正的应用程序 main 方法将被调用。每个 premain 方法必须返回才能继续启动序列。

# javascript - 上传图片来自不通过服务器直接进入网页

> ID：15173477
> 
> 赞同：0
> 
> 时间：2013-03-02T10:35:56.703
> 
> 标签：javascript, html, input, image

是否可以从上传图片

```
<input type="file" /> 
```

直接进入 HTML 页面（例如使用 Javascript）而不首先将图像加载到服务器？

我知道我可以用一点 AJAX 来做到这一点，但如果我可以避免将文件保存到服务器（稍后清理），那将是我的偏好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:50:16.070

出于安全原因，不允许客户端 javascript 在浏览器中运行时访问文件系统。如果您确实找到了某种方法将本地文件放入网页而无需先将其上传到服务器，这将被视为安全漏洞，并且可能会被报告为针对允许它的浏览器的安全漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:50:20.930

我不知道它实际使用了多少 Ajax，但它似乎可以很好地完成您要求的工作。 [http://www.zurb.com/playground/ajax_upload](http://www.zurb.com/playground/ajax_upload)

# ios - xcode UICollection View 打开另一个视图控制器

> ID：15173478
> 
> 赞同：0
> 
> 时间：2013-03-02T10:36:19.917
> 
> 标签：ios, xcode, uiviewcontroller

我有一个 UICollectionViewController 并且已经在单元格中显示了图像，当我单击/点击特定图像时，它会“推送”到普通的 ViewController。我怎么做？这是我到目前为止的代码......想在其他视图控制器中打开选定的图像，请帮助

```
-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return [imagearray count];
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier=@"Cell" ;
    customcell *cell=[collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    [[cell nyimage]setImage:[UIImage imageNamed:[imagearray objectAtIndex:indexPath.item]]];
    return cell;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:53:36.217

您可以像这样实现委托方法：

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController* viewController = [[DetailViewController alloc] init];
    //configure detail view controller
    // viewController.detailInfo = ...
    [self.navigationController pushViewController:viewController animated:YES];
} 
```

# c - n - 1 位数字

> ID：15173484
> 
> 赞同：-6
> 
> 时间：2013-03-02T10:36:56.707
> 
> 标签：c, numbers, digits

我有一个'n'数字。我需要打印相同的前 n - 1 位数字。据我所知，它基本上是除以 10。但这是在不使用任何算术运算符的情况下完成的。我尝试使用**ctype**中的一些转换，但由于数字的确切长度，即没有。位数不知道，我无法使用相同的。

IE

```
convert int to string, say 12345 to string

set the last position of it to '\0', in my case last position is not known

//i.e. 1, 2, 3, 4, '\0', assuming string size is 5

convert it back to int.// 1234 
```

是否有任何调整或完全不同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:48:58.947

Use `sprintf()` to convert your int to a string. You'll need a `char buffer[SOMESIZE];` to pass into `sprintf`. Now you have a string, that you can manipulate. `strlen()` will give you the length of it [1]. The rest should follow what you outlined.

I'll let you figure out exactly how to put the bits together.

[1] Actually, you could use the return value from `sprintf` as length, since it returns the number of characters produced in the string.

# silverlight - 嵌套用户控件中的 Silverlight 绑定

> ID：15173494
> 
> 赞同：0
> 
> 时间：2013-03-02T10:37:50.767
> 
> 标签：silverlight, mvvm

我有一个有自己的视图模型的用户控件。我已将此视图模型的一个实例作为数据上下文添加到控件中。它工作正常，但我需要将此用户控件中的一些控件绑定到父数据上下文。换句话说，我需要将父控件数据上下文绑定到子控件视图模型。需要一些关于如何进行的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:28:42.363

可能最简单的方法是使用 Ancestor Binding 找到您想要的 DataContext。

例如：

```
<TextBox Text="{Binding DataContext.SomeProperty, 
    RelativeSource={RelativeSource AncestorType=myParentControlType}}" /> 
```

您还可以按名称定位元素：

```
<TextBox Text="{Binding DataContext.SomeProperty, ElementName=myParentCtrl}" /> 
```

# qt - 独立的 Qt 创建器

> ID：15173496
> 
> 赞同：0
> 
> 时间：2013-03-02T10:37:52.067
> 
> 标签：qt, qt-creator

有没有办法使用独立的 Qt Creator 来制作 *.ui 文件？我的意思是没有完整的 Qt 安装，即磁盘上 3+Gb。Qt Creator 以独立形式存在于 qt-project 中，但无法创建项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:43:33.397

Qt Creator 创建 *.ui 文件。

只需转到 File->New->New File or Project...->Files and Classes->Qt->Qt Designer Form。

请阅读更多[开发基于小部件的应用程序](http://doc.qt.digia.com/qtcreator/creator-using-qt-designer.html)和[Qt 设计器手册](http://doc.qt.digia.com/4.7/designer-manual.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-25T19:47:10.260

Qt Creator 可以作为独立文件从离线安装程序页面下载： [https ://www.qt.io/offline-installers](https://www.qt.io/offline-installers)

# php - 侧php函数中的MySQL查询给出错误

> ID：15173497
> 
> 赞同：0
> 
> 时间：2013-03-02T10:37:56.070
> 
> 标签：php, mysql, codeigniter

我有一个这样的 if 循环：

```
if(!empty($all_msg_e))
{ print_r($all_msg_e);

        foreach($all_msg_e as $ae)
        {
            echo $ae['msg_desc']."<br>";
            display($ae['msg_id']);
        }
} 
```

并且`function display()`是：

```
function display($msg_id,$obj)
{

    $this->db->select("*");
    $this->db->from("et_msg");
    $this->db->where("link_to",$msg_id);
    $child_msg=$this->db->get()->result_array();

    print_r($child_msg);die;
        echo $child_msg['msg_desc']."<br>";
        echo $child_msg['msg_id']."<br>";
        $msg_id=$child_msg['msg_id']."<br>";    

    display($msg_id);
} 
```

在这里我收到错误：**不在对象上下文中使用 $this**

然后参考[这个](https://stackoverflow.com/a/1644144)答案我用任何变量**$obj替换****了 $this**

 **```
$obj->db->select("*");
    $obj->db->from("et_msg");
    $obj->db->where("link_to",$msg_id);
    $query = $obj->db->get(); 
```

然后它开始给出错误，例如：**调用非对象上的成员函数 select()**

这一切背后的概念是：我有一个名为**“et_msg”**的表，其中存储了两个人之间的几条消息。通过将一条消息的 id 存储到另一条消息的**“link_to”**字段来链接对话。我想以一种又一种方式显示对话

做错了什么？？完全卡住了。。

PS 我正在使用 CodeIgniter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:05:04.247

在类中添加功能展示

它运作良好.. :)**

# android - 我如何通过意图调用其他活动的方法？

> ID：15173500
> 
> 赞同：0
> 
> 时间：2013-03-02T10:38:19.123
> 
> 标签：android, android-layout, android-intent

我是 Android 新手，我想在 Android 中调用另一个方法`Activity`。你能告诉我如何调用其他活动的方法吗？我想在`Mechanics`课堂上调用一个方法 - 我该如何调用它`Intent`？

```
switch(subject)
              {
              case 0:
                  Intent myIntent = new Intent(view.getContext(), Mechanics.class);
                  startActivityForResult(myIntent, 0);
                  break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:04:40.657

您可以通过意图传递其他参数。然后，新活动可以检查这些并调用预期的方法。

你想查找[Intent](http://developer.android.com/reference/android/content/Intent.html)`putSomething`的方法

# visual-studio-2010 - 在调试和发布模式下编译的函数汇编

> ID：15173501
> 
> 赞同：1
> 
> 时间：2013-03-02T10:38:32.153
> 
> 标签：visual-studio-2010, debugging, assembly, x86

我写了一个如下的函数：

```
void inject_func()
{
    _asm
    {
        push 2
        push 1
        mov eax, 0x0041188E
        call eax
    }
} 
```

在调试模式下编译时，我得到：

```
00F43330 > 55               PUSH EBP
00F43331   8BEC             MOV EBP,ESP
00F43333   81EC C0000000    SUB ESP,0C0
00F43339   53               PUSH EBX
00F4333A   56               PUSH ESI
00F4333B   57               PUSH EDI
00F4333C   8DBD 40FFFFFF    LEA EDI,DWORD PTR SS:[EBP-C0]
00F43342   B9 30000000      MOV ECX,30
00F43347   B8 CCCCCCCC      MOV EAX,CCCCCCCC
00F4334C   F3:AB            REP STOS DWORD PTR ES:[EDI]
00F4334E   6A 02            PUSH 2
00F43350   6A 01            PUSH 1
00F43352   B8 8E184100      MOV EAX,41188E
00F43357   FFD0             CALL EAX
00F43359   5F               POP EDI
00F4335A   5E               POP ESI
00F4335B   5B               POP EBX
00F4335C   81C4 C0000000    ADD ESP,0C0
00F43362   3BEC             CMP EBP,ESP
00F43364   E8 8CE2FFFF      CALL inject_c.00F415F5
00F43369   8BE5             MOV ESP,EBP
00F4336B   5D               POP EBP
00F4336C   C3               RETN 
```

在发布模式下，我得到：这就是我想要的。

```
00EA17A0 > . 6A 02          PUSH 2
00EA17A2   . 6A 01          PUSH 1
00EA17A4   . B8 8E184100    MOV EAX,41188E
00EA17A9   . FFD0           CALL EAX
00EA17AB   . C3             RETN 
```

我知道VS2010添加了一些调试信息，我想问的是它添加了什么。我在谷歌上搜索过，但没有任何相关信息，可能是关键字不正确。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:56:46.210

它是编译器实现的[安全检查的一部分。](http://msdn.microsoft.com/en-us/library/aa289171%28v=vs.71%29.aspx)

通过用已知值填充堆栈，系统可以检测到一些覆盖。如果您不希望这样，您可以通过删除该`/RTCs`选项将其关闭。

# php - php,js 创建 json 数据

> ID：15173502
> 
> 赞同：0
> 
> 时间：2013-03-02T10:38:31.693
> 
> 标签：php, javascript, json

在php中我有这样的东西：

```
$i=1; 
foreach ($result as $row){
    $outp['fields'][$i]['id']=$row['id'];
    $outp['fields'][$i]['x']=$row['x'];
    $outp['fields'][$i]['y']=$row['y'];
    $outp['fields'][$i]['type']=$row['type'];
    $i++;
}
echo json_encode($outp) 
```

在 JS 中：

```
success: function(data) {
  var map = eval('(data)');
} 
```

这是 JSON 输出：

```
{"fields":
     {"1":{"id":9521,"x":21,"y":96,"type":2},
      "2":{"id":9522,"x":22,"y":96,"type":3},
      "3":{"id":9523,"x":23,"y":96,"type":1},
      "4":{"id":9930,"x":30,"y":100,"type":3}
     } 
} 
```

我想为每个字段（在这种情况下为 4 个字段）编写 html 代码。我该怎么做？这可以将 var map 转换为数组吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:51:39.950

尝试这个：

```
for(var i=1;i<=Object.keys(map["fields"]).length;i++){
    console.log(map["fields"][i]["id"]); //id
    console.log(map["fields"][i]["x"]);  //x
    console.log(map["fields"][i]["y"]);  //y
} 
```

# stata - 在 Stata 中管理数字

> ID：15173503
> 
> 赞同：0
> 
> 时间：2013-03-02T07:25:20.027
> 
> 标签：stata

我有一个大列，对应于变量 x，如下所示：

```
198755
-235435436
4353455
-57863489
-2342345
45565768
9865385
-6534 
```

等等

我想用以下内容替换此列：

```
1.98755
-2.35435436
4.353455
-5.7863489
-2.342345
4.5565768
9.865385
-6.534 
```

也就是说，我有各种长度和符号的数字，我想在第一个数字之后放置一个点分隔符。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:09:09.233

最好将字符串和数字操作结合起来

```
. gen mystr = string(mynum, "%16.0f")
. gen double newnum = real(substr(mystr,1,1) + "." + substr(mystr,2,.)) if mynum >= 0
. replace newnum = -real(substr(mystr,2,1) + "." + substr(mystr,3,.)) if mynum < 0 
```

这`%16.0f`是从您的示例中看起来足够大的格式，因此您的数字不会被破坏。听起来好像您的数据中没有小数点。

所以这个想法只是在第一个数字字符之后插入一个小数点，当第一个字符是减号时，这是第二个字符。

# iphone - iOS 6 的本地化

> ID：15173511
> 
> 赞同：0
> 
> 时间：2013-03-02T10:39:12.403
> 
> 标签：iphone, ios, ios5, nslocalizedstring, nslocale

我有 3 种语言可以在我的项目中设置。因此，当用户选择我的 3 种语言应用程序中的一种语言时，该应用程序可以使用该特定语言。我尝试使用`Nslocalization`但没有找到任何解决方案。我有 Xcode 4.5。谁能给我一个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T09:44:26.773

您应该为本地化添加 Localizable.string 文件

# java - 'where 子句'中的未知列用户名

> ID：15173513
> 
> 赞同：1
> 
> 时间：2013-03-02T10:39:24.987
> 
> 标签：java, sql, hibernate, jdbc, hibernate-mapping

当我尝试在表上选择其中一列是外键时出现此错误：

```
select count(*) from cards where username = 'name'; 
```

我是通过 java jdbc 做的，所以我认为我的映射有问题，因为通过 MySql 命令行的相同查询工作得很好：

```
<many-to-one name="users" class="table" update="false" insert="false" fetch="select">
        <column name="username" length="45" not-null="true" />
</many-to-one> 
```

这

```
2013-03-02 12:19:03,660  INFO [http-bio-8080-exec-5] (NullableType.java:203) - could not read column value from result set: username; Column 'username' not found.
2013-03-02 12:19:03,663  WARN [http-bio-8080-exec-5] (JDBCExceptionReporter.java:100) - SQL Error: 0, SQLState: S0022
2013-03-02 12:19:03,664 ERROR [http-bio-8080-exec-5] (JDBCExceptionReporter.java:101) - Column 'username' not found. 
```

* * *

我发现了这个：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#d0e13696](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#d0e13696)

第 16.1.2 和 16.1.3 节可能是我问题的答案，但我无法弄清楚......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:49:50.590

The error message states:

> could not read column value from result set: username; Column 'username' not found.

The result set for `select count(*) from ...` does not have a column named `username`. It only consists of one column, the count.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:41:25.327

获取字段不应该使用“Select *”。
应该使用“从用户名='名称'的卡片中选择计数（用户名）；” 表达。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:52:25.647

尝试执行

```
 select count(*) from cards where `cards`.username='name'; 
```

# java - Java：方法名称约定

> ID：15173514
> 
> 赞同：0
> 
> 时间：2013-03-02T10:39:30.197
> 
> 标签：java, android, naming-conventions

这更多是出于好奇，只是想知道方法名称最常见的命名约定是什么？

从资本开始

```
GetName() 
```

或以小写开头，然后为每个新单词大写

```
getName() 
```

或者是其他东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T10:42:12.947

Java 使用`camelCase`方法名的约定。

您可以在本文档中阅读有关 Java 约定的更多信息：[Java 编程语言的代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:59:59.567

在 Java 中，方法的命名约定是 getName()

例如，变量也遵循与方法相同的命名约定。获取名称示例

用于类的命名约定将每个单词 ex 大写。获取名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T10:42:56.297

在 Java 中，约定是第一个单词小写，其余单词大写。

`public void getName()`

此外，常量以全大写形式声明：

`public final int MAX_USERS`

# objective-c - 从 NSTextView 获取命令输入

> ID：15173521
> 
> 赞同：0
> 
> 时间：2013-03-02T10:40:06.000
> 
> 标签：objective-c, cocoa, nstextview

好的，这就是我的想法：

*   我有一个`NSTextView`我正在用作“控制台”/“终端”
*   我希望能够处理“输入”上的用户输入
*   当用户输入内容并按“返回”时，我希望能够处理该输入

这种功能有内置的东西吗？您知道任何使用此功能的开源项目/示例代码吗？

有任何想法吗？

* * *

*请不要提及**iTerm2**（除非你有一些非常具体的代码可以指点我）——在我掌握核心要点之前，这东西需要 GPS 导航器或整整一个月的研究......*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:10:48.230

使用[NSTask怎么样](http://cocoadev.com/wiki/NSTask)

NSTask 类为您提供了大部分内容，只需输入一个应该是有效的 shell 命令或 unix 命令的字符串并执行它。

请参阅[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)。

# c# - 从选定行的列中获取数据

> ID：15173523
> 
> 赞同：1
> 
> 时间：2013-03-02T10:40:22.247
> 
> 标签：c#, .net, winforms, listview

我有`listView`以下列名称和电子邮件以及以下数据，例如

```
NAME     EMAIL
adam     adam@gmail.com
james    james@gmail.com
kris     kris@gmail.com 
```

我选择 james 行，现在在两个文本框中，我希望他们的姓名和电子邮件在那里

```
textbox1 = james
textbox2 = james@gmail.com 
```

我实际上正在做的是`form1`我已经`contextmenu`进行了项目更新。单击带有名称和电子邮件 的`updatecontextmenu`不良负载。包含姓名和电子邮件，如上所示。`form2``textbox``listview`

我想将列表视图中所选行中的名称分别放置到名称`textbox`和电子邮件中。

我试过这个。

```
updateToolStripMenuItem_Click(...)
{

    Form3 update = new Form3();
    update.ShowDialog();            
}

Form3_Load(...)
{
    Form1 f1 = new Form1();
    string oldName = f1.listView1.SelectedItems[0].SubItems[0].Text;
    string oldEmail = f1.listView1.SelectedItems[0].SubItems[0].Text;
    textBox1.Text = oldName.ToString();
    textBox2.Text = oldEmail.ToString();
} 
```

但得到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:11:05.263

```
ListViewItem selItem = ListView1.SelectedItems[0];
Console.WriteLine(selItem.SubItems[0].Text);
Console.WriteLine(selItem.SubItems[1].Text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T11:20:24.530

更新。尝试添加到您的`Form3`窗口方法：

```
public void SetData(string name, string email)
{
    textBox1.Text = name;
    textBox2.Text = email;
} 
```

接下来，将您的`updateToolStripMenuItem_Click`事件处理程序更新为：

```
updateToolStripMenuItem_Click(...)
{
    Form3 update = new Form3();
    ListViewItem selectedItem = listView1.SelectedItems[0];
    update.SetData(selectedItem.SubItems[0].Text, selectedItem.SubItems[1].Text);
    update.ShowDialog();            
} 
```

最后，明确的内容`Form3_Load(...)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T11:21:02.480

尝试从您的`Form3`

```
public string OldName {get;set;}
public string OldEmail {get;set;} 
```

然后，从你的`From1`

```
updateToolStripMenuItem_Click(...)
{
    using(var update = new Form3())
    {
        var firstCol = listView.SelectedItems[0].Text;
        update.OldName = listView.SelectedItems[0].SubItems[1].Text;
        update.OldEmail = listView.SelectedItems[0].SubItems[2].Text;
        update.ShowDialog();     
    } 
} 
```

然后，`Form3`看起来像这样

```
Form3_Load(...)
{
    textBox1.Text = OldName;
    textBox2.Text = OldEmail;
} 
```

# jquery - 如何在 jqgrid 中仅选择启用的复选框？

> ID：15173527
> 
> 赞同：-1
> 
> 时间：2013-03-02T10:41:00.007
> 
> 标签：jquery, jqgrid

我在处理 JqGrid 时遇到了一些问题，这里是我的情况：

1.  我试图设置`multiselect:true`.

2.  我试图设置一些行复选框，使用`loadComplete`事件句柄用复选标记禁用。

3.  如果我从列表中选择所有复选框，我如何才能启用复选框行 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:09:00.880

我假设您已将 jqgrid 对象定义为网格

```
grid.jqGrid(

beforeSelectRow: function(rowid, e) {

    var disabledCheckboxes = $("tr#"+rowid+".jqgrow > td > input.cbox:disabled", grid[0]);

    if (disabledCheckboxes.length === 0) {

        return true;    // allow select the row

    } else {

        return false;   // not allow select the row

    }

},

onSelectAll: function(aRowids,status) {

    if (status) {

        var Checkboxes = $("tr.jqgrow > td > input.cbox:disabled", grid[0]);

        Checkboxes.removeAttr("checked");

          grid[0].p.selarrrow = grid.find("tr.jqgrow:has(td > input.cbox:checked)")

            .map(function() { return this.id; }) // fatch ids

            .get(); // convert to instance of Array

    }

}); 
```

# android - 使用 onActivityResults() 方法时出错

> ID：15173528
> 
> 赞同：1
> 
> 时间：2013-03-02T10:41:09.040
> 
> 标签：android

我正在从这个[链接](http://androiddevelopement.blogspot.in/2011/04/adding-paypal-payment-in-android.html)做一个测试 Paypal 应用程序。以下是我的代码的一部分，

```
@Override
protected void onActivityResults(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);
    System.out.println ( "Result Code : " + resultCode );
    switch(resultCode) 
    {
    case Activity.RESULT_OK:
        System.out.println ( "Success" );
        break;
    case Activity.RESULT_CANCELED:
        System.out.println ( "Canceled" );
        break;
    case PayPalActivity.RESULT_FAILURE:
        System.out.println ( "Result Failure" );
    }
} 
```

只要我添加`@Override`它就会开始向我显示以下错误：

> MainActivity 类型的 onActivityResults(int,int,Intent) 方法必须覆盖或实现超类型方法

这是图像：

> ![在此处输入图像描述](../Images/dab0ce94a239d49d636642ebfef36412.png)

如果我删除`@Override`行，一切正常，但`onActivityResults()`不会调用方法。

我应该怎么做才能消除这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:58:11.497

您覆盖了错误的方法，不是`onActivityResults()`，而是[`onActivityResult()`](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)。

# javascript - 检测Javascript中的左右控制键

> ID：15173533
> 
> 赞同：4
> 
> 时间：2013-03-02T10:42:12.097
> 
> 标签：javascript, dom-events, keydown, keyup

我有一个文本输入，我需要在其中绑定一个事件`CTRL`- `V`。我已经设置了一个名为的全局变量`ctrl`，每当 a以 17`keydown`的值触发时，它就设置为 1。`which`同样，当 a以 17 的值`keyup`触发时，它设置为 0`which`

问题是，有两个`CTRL`键。因此，如果我执行以下操作：首先按下左键`CTRL`，然后在按下它的同时按下右键`CTRL`（以便`CTRL`现在按下两个键），然后我只释放其中一个键，`keyup`触发并且变量`ctrl`是设置为 0，即使`CTRL`仍在按下另一个键。

如何触发事件以使变量仅在两个`CTRL`键都打开时才设置为 0（我不需要完全区分它们）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-14T20:50:53.410

> 更新：这在现代浏览器中现在是可能的

在Javascript中检测左右控制键的最简单方法

```
$(document).ready(function(){
  $("html").keydown(function(e) {

      if (e.ctrlKey) {
         if (event.location == 1) console.log('left ctrl');
         if (event.location == 2) console.log('right ctrl');
      }

  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

注意：当您运行代码片段以激活键盘键时，您必须单击内部空格。这是在 Chrome 和 Safari 中测试的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-21T10:10:54.527

keydown 事件有两个属性。您可以通过使用区分左右 Ctrl

```
if ( e.location == 1 || e.keyLocation == 1 ) {
    var keyPosition = 'left';
} else if ( e.location == 2 || e.keyLocation == 2 ) {
    var keyPosition = 'right';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-17T20:59:11.960

除非您在低级上编写，否则我认为没有办法... keyCode 对于两者都是相同的（它是 17）

只是您可以使用 e.ctrlKey 来确定是否按下了控制键。

但是，我阅读并找到[了一个答案](https://stackoverflow.com/a/14755036/1334561)，提到您可以在 IE 中做到这一点，但我没有从我这边尝试过

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-30T00:28:34.670

您可以使用 e.originalEvent.location 而不是全局 event.location

```
$(document).ready(function(){
  $("html").keydown(function(e) {

      if (e.ctrlKey) {
         if (e.originalEvent.location === 1) console.log('left ctrl');
         if (e.originalEvent.location === 2) console.log('right ctrl');
      }

  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-04T06:10:31.800

以下是您对三个鼠标按键事件的回答。为鼠标滚轮休息，您应该再次询问：

```
/*
 1 = Left   Mousebutton
 2 = Centre Mousebutton
 3 = Right  Mousebutton
*/

$(document).mousedown(function(e) { 
if (e.which === 3) {
    /* Right Mousebutton was clicked! */
    alert("right key code 3");
}
else if(e.which === 2) {
    alert("Centre key code 2");
}
else if(e.which === 1) {
    alert("Left key code 1");
}
}); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-03-02T10:45:19.583

你可以使用这个：

```
$('#inputboxinput').bind('keypress', function(e) {
if(e.keyCode==13){
    // Enter pressed... do anything here...
} 
```

});

跨浏览器方式：

```
if (!event.which && ((event.charCode || event.charCode === 0) ? event.charCode: event.keyCode)) {
    event.which = event.charCode || event.keyCode;
} 
```

# jquery - 如何在谷歌浏览器数字输入中使用 jQuery 键？

> ID：15173536
> 
> 赞同：2
> 
> 时间：2013-03-02T10:42:19.647
> 
> 标签：jquery, google-chrome, keyup

我有一些在 Firefox 中运行良好的 jQuery 代码。我在数字输入上使用 keyup 事件。在 Chrome 中，但当然只有当我不使用谷歌浏览器提供的向上和向下迷你按钮时。如果用户使用那个迷你按钮，我的代码就无关紧要了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:48:05.270

您可以通过 CSS 禁用“微调器”：

```
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
} 
```

或者您可以使用 an`.on()`来同时捕获`keyup`and `change`：

```
$('#element').on('keyup change',function(){
    //your code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:48:29.947

我刚刚意识到我可以使用 jQuery.change() 它并不完全完美，但几乎没有。

# r - 数字列显示为字符

> ID：15173547
> 
> 赞同：1
> 
> 时间：2013-03-02T10:43:58.843
> 
> 标签：r

我有一个看起来像这样的文件：

```
Time,Open,High,Low,Close,Volume
01.02.1995 00:00:00.000,1.57920,1.58400,1.57700,1.58240,0.00
02.02.1995 00:00:00.000,1.58200,1.58620,1.57820,1.58130,0.00
03.02.1995 00:00:00.000,1.58150,1.58280,1.56050,1.56180,0.00
04.02.1995 00:00:00.000,1.56180,1.56180,1.56180,1.56180,0.00 
```

我想要一个`dataframe`第一列是字符（将其更改为日期是下一步）和其余数字的地方，所以我这样做：

```
myData <- read.table("C:\\Users\\Adam\\Desktop\\GU95.csv", colClasses=c("character",rep("numeric",5)), header=TRUE, sep = ',')) 
```

要检查第二列（打开）的类，我这样做：

```
myData$Open <- apply(myData, 1, function(row) print(class(row[2]))) 
```

但是，输出是“字符”而不是“数字”。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T10:55:22.147

`apply`将数据帧强制转换为矩阵或数组。见`?apply`：

> 如果 X 不是数组而是具有非空暗值的类的对象（例如数据框），则应用尝试通过 as.matrix 将其强制转换为二维数组（例如，数据框架）或通过 as.array。

数组和矩阵只能保存一种类型的数据，并且由于您的第一列包含字符，因此所有内容都被强制转换为字符。

正如@Arun 在他的评论中所说，您可以使用`sapply(myData, class)`或非常简单地使用`str(myData)`.

# iphone - 附加字符串时的内存管理？

> ID：15173551
> 
> 赞同：1
> 
> 时间：2013-03-02T10:44:26.627
> 
> 标签：iphone, ios, ipad

我有一个 iPhone 应用程序，我`didfinishlaunch`在 appdelegate 中创建了一个数组。像这样：

```
 for(int i=1;i<53;i++)
        {
            NSString *namestring=[NSString stringWithString:@"avatar"];
           NSString *string = [NSString stringWithFormat:@"%d",i];
            NSString *pngstring=[NSString stringWithString:@".png"];
            string = [string stringByAppendingString:pngstring];

            namestring = [namestring stringByAppendingString:string];

            NSLog(@"%@",namestring);          
        [avtararray addObject:namestring];

        } 
```

工作正常。在任何地方我都在 appdelegate 中使用我的头像数组进行头像工作。但在一种情况下，当我弹回上一个视图并尝试再次从数组中加载字符串时，
`NSString *avatarstringt=[[appDelegate.avtararray objectAtIndex:i]description];`它会因错误而崩溃

> -[CFString 描述]：发送到已释放实例的消息..

在进行配置文件工作时，我知道泄漏位于附加字符串代码中的上述循环中。有人可以帮我删除它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:14:06.027

首先，**永远不要这样做**

```
NSString *string = [NSString stringWithFormat:@"%d",i];
NSString *pngstring=[NSString stringWithString:@".png"];
string = [string stringByAppendingString:pngstring]; 
```

* * *

**以下陈述是多余的**

```
NSString *namestring=[NSString stringWithString:@"avatar"];
NSString *pngstring=[NSString stringWithString:@".png"]; 
```

并且应该写成：

```
NSString *namestring=@"avatar";
NSString *pngstring=@".png"; 
```

* * *

您可以用作：

```
NSString *namestring=@"avatar";
NSString *numberString = [NSString stringWithFormat:@"%d",i];
NSString *pngstring=@"png";

namestring = [namestring stringByAppendingFormat:@"%@.%@",numberString,pngstring]; 
```

* * *

**即使是最短的代码：**

```
for(NSInteger i=1;i<5;i++){
    NSString *namestring = [NSString stringWithFormat:@"avatar%@.png",@(i)];        
    NSLog(@"%@",namestring);
} 
```

正如 rmaddy 所建议的：您可以将 i 用作整数，无需将其转换为 nsnumber

```
NSString *namestring = [NSString stringWithFormat:@"avatar%d.png",i]; 
```

# database - 将本地数据库作为文本文件上传到 SkyDrive

> ID：15173555
> 
> 赞同：0
> 
> 时间：2013-03-02T10:44:54.740
> 
> 标签：database, windows-phone-7, onedrive

我还没有看过 SkyDrive 的样品。我做了一个应用程序，将一些数据保存在手机上的本地数据库中。

我想要做的是将所有这些作为文本文件上传到 SkyDrive 帐户。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:14:57.560

可能想从我写的博客文章开始 -[将 SkyDrive 支持添加到您的 Windows Phone 应用程序](http://den.azurewebsites.net/adding-skydrive-upload-support-to-your-windows-phone-app)。您将需要下载[Live SDK](http://msdn.microsoft.com/en-us/live/ff519582.aspx)（除非您想手动使用 REST API，目前我认为没有理由这样做）。

鉴于您获得了正确的会话初始化，之后上传相当简单：

```
client = new LiveConnectClient(App.MicrosoftAccountSession);
client.UploadCompleted += MicrosoftAccountClient_UploadCompleted;
client.UploadProgressChanged += MicrosoftAccountClient_UploadProgressChanged;
client.UploadAsync("me/skydrive", Binder.Instance.CurrentlyUploading,
   stream, OverwriteOption.Overwrite); 
```

实例`stream`在哪里。`MemoryStream`

# android - 从共享偏好中检索值未按预期工作

> ID：15173560
> 
> 赞同：0
> 
> 时间：2013-03-02T10:45:46.577
> 
> 标签：android

我正在尝试动态设置文本视图的文本属性。但是让应用程序强制关闭。我下面的代码有什么问题？

```
public class DataStorageActivity extends Activity {
    /** Called when the activity is first created. */

    public static final String PREFS_NAME = "MyPrefsFile";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        SharedPreferences settings = getSharedPreferences(PREFS_NAME,0);

        SharedPreferences.Editor editor=settings.edit();

        editor.putInt("myValue", 7);

        editor.commit();

        TextView tv=(TextView)findViewById(R.id.textView);

       int value=settings.getInt("myValue", 0);

        tv.setText(value);

    }
} 
```

**编辑**

根据@agamov，我已经解决了上述问题。但是即使在将字符串类型传递给 setText 方法之后，我也遇到了以下代码的相同问题。这里有什么问题？

```
public class InternalStorageActivity extends Activity {

    public String fileName="HelloFile";

    public TextView textview;

     @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String helloString="Hello";
        byte[] b = null;

        try {
            FileOutputStream fos=openFileOutput(fileName, MODE_PRIVATE);

            fos.write(helloString.getBytes());

            fos.close();

            FileInputStream fis=openFileInput(fileName);
            fis.read(b);
            String input=b.toString();

            textview=(TextView)findViewById(R.id.textView);

            textview.setText(input);

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:19:19.733

您正在将 int 传递给 TextView。这应该可以解决您的错误：

```
int value=settings.getInt("myValue", 0);
tv.setText("" + value); 
```

# mongodb - Mongodb Sleepy Mongoose http接口正则表达式不起作用

> ID：15173563
> 
> 赞同：0
> 
> 时间：2013-03-02T10:46:05.723
> 
> 标签：mongodb, http, database, nosql

我正在使用一个昏昏欲睡的 mongoose http 接口来搜索在远程服务器上运行的 mongodb 中的集合。我在用于在 mongodb 中的一个 json 文档中搜索模式的 http url 中的正则表达式存在问题。

如果我使用

```
...?criteria={"type":"book"} 
```

它返回所有类型参数匹配“book”作为完整字符串的 json 对象。

但是，如果我使用

```
...?criteria={"type":{"$regex":"book", "$options":"i"}} 
```

它返回所有类型参数匹配“book”作为子字符串但无法匹配具有完整子字符串作为“book”的类型的所有 json 对象。所以我输掉了完整的比赛。

为了同时获得两者，我应该两次调用上述两个查询吗？

# haskell - 案例表达式中的组匹配

> ID：15173564
> 
> 赞同：7
> 
> 时间：2013-03-02T10:46:06.750
> 
> 标签：haskell

我有一个变量

```
a = 3 
```

对于 a 的某些值，我想调用相同的函数：

```
case a of
     3 -> print "hello"
     4 -> print "hello"
     5 -> print "hello"
     6 -> print "hello something else" 
```

因此，对于 a=3、a=4 和 a=5，我进行了相同的函数调用。我可以更好地分组吗？我有点在寻找一个解决方案，它是：

```
case a of
     3 || 4 || 5 -> print "hello"
     6           -> print "hello something else" 
```

这当然行不通，但希望你能得到我想要的结果。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T10:59:16.383

怎么样

```
case a of
     _ | a == 3 || a == 4 || a == 5
       -> print "hello"
     6 -> print "hello something else" 
```

写起来不那么乏味

```
case a of
     _ | a `elem` [3, 4, 5]
       -> print "hello"
     6 -> print "hello something else" 
```

或者

```
case a of
     _ | 3 <= a && a <= 5
       -> print "hello"
     6 -> print "hello something else" 
```

甚至，如果在您的实际程序中有很多可能的值供您匹配，则如下所示：

```
import qualified Data.Set as S

valuesToMatchAgainst :: S.Set Int
valuesToMatchAgainst = S.fromList [3, 4, 5]

-- ...

    case a of
         _ | a `S.elem` valuesToMatchAgainst
           -> print "hello"
         6 -> print "hello something else" 
```

（我假设您已经了解这`_`是一个匹配任何值的通配符，并且它[`|`引入了一个 guard](http://learnyouahaskell.com/syntax-in-functions#guards-guards)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T12:55:06.780

你可以做不同的事情来改进你的代码。首先，如果所有分支都调用相同的函数，那为什么不呢：

```
print (case a of 
         3 -> "hello"
         4 -> "hello"
         5 -> "hello"
         6 -> "hello something else") 
```

这会排除代码的更多常见行为。其次，您似乎询问将 3,4 和 5 个案例组合在一起，最好的方法可能是分解出分类函数：

```
 let cat 3 = True
     cat 4 = True
     cat 5 = True
     cat 6 = False
 in print (case cat a of True -> "hello"
                         False -> "hello something else") 
```

您可以将其与上一张海报（`cat x = x`elem`[3,4,5]`等）建议的替代方案之一结合使用。

# iphone - 指向整数转换的不兼容指针将“void *”发送到“NSJSONReadingOptions”类型的参数

> ID：15173565
> 
> 赞同：3
> 
> 时间：2013-03-02T10:46:11.447
> 
> 标签：iphone, ios, objective-c, xcode

我收到一个奇怪的编译器警告。它说：

```
Incompatible pointer to integer conversion sending 'void *' to parameter of type 
'NSJSONReadingOptions' (aka 'enum NSJSONReadingOptions') 
```

这是它所在的块：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    //Incompatible pointer to integer conversion sending 'void *' to parameter of type 
    'NSJSONReadingOptions' (aka 'enum NSJSONReadingOptions')

    news = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
    [mainTableView reloadData];
} 
```

任何想法如何解决这一问题？谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-02T11:12:10.533

只需替换`options:nil`为`options:0`.

`nil`最终定义为`((void*)0)`并具有*指针类型*，但`NSJSONReadingOptions`（作为枚举）是*整数类型*。

# javascript - Retrieve Data from another server via Jquery Ajax

> ID：15173567
> 
> 赞同：0
> 
> 时间：2013-03-02T10:46:18.813
> 
> 标签：javascript, ajax, jquery, same-origin-policy

I want to retrieve some data from another server via ajax. I have searched through the net and been advised to use jsonp method. My question is if that other server does not returns data in json format rather than plainText then how can i catch that data, is there any way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:56:14.893

如果服务器不允许跨域资源共享，并且没有实现 JSONP，则需要使用本地代理。试试[简单的 PHP 代理](http://benalman.com/projects/php-simple-proxy/)。

# php - 如何在 qty 的动态表列中求和值

> ID：15173571
> 
> 赞同：0
> 
> 时间：2013-03-02T10:46:30.773
> 
> 标签：php, javascript, calculated-columns

如何在qty的动态表列中求和，我可以得到price1的总和，但是我不知道求和qty的列，这是动态表，我可以通过添加按钮添加行。请帮忙，我是php新手。

```

`<html>
<head>
<div>
<script type="text/javascript">
function tot(elem) {
var d=document.getElementById("total").value;
var total=Number(d); 
}
var total = 0;
function getValues() {
var qty1 = 0;
var unit = 0;
var obj = document.getElementsByTagName("input");
  for(var i=0; i<obj.length; i++){
     if(obj[i].name == "qty1[]"){var qty1 = obj[i].value;}
     if(obj[i].name == "unit[]"){var unit = obj[i].value;}
     if(obj[i].name == "totala[]"){
     if(qty1 > 0 && unit > 0)
     {obj[i].value = (qty1*unit).toFixed(2);total+=(obj[i].value*1);}
                    else{obj[i].value = 0;total+=(obj[i].value*1);}
            }
         }
    document.getElementById("total").value = (total*1).toFixed(2);
    total=0;
}
</script>
<script>
function addRow(tableID) {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);
        var colCount = table.rows[0].cells.length;
        for(var i=0; i<colCount; i++) {
            var newcell = row.insertCell(i);
            newcell.innerHTML = table.rows[0].cells[i].innerHTML;
            //alert(newcell.childNodes);
            switch(newcell.childNodes[0].type) {
                case "text":
                        newcell.childNodes[0].value = "";
                        break;
                case "checkbox":
                        newcell.childNodes[0].checked = false;
                        break;
            }
        }
    }
                function deleteRow(tableID)
{
        try
             {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
                for(var i=0; i<rowCount; i++)
                    {
                    var row = table.rows[i];
                    var chkbox = row.cells[0].childNodes[0];
                    if (null != chkbox && true == chkbox.checked)
                        {
                        if (rowCount <= 1)
                            {
                            alert("Cannot delete all the rows.");
                            break;
                            }
                        table.deleteRow(i);
                        rowCount--;
                        i--;
                        }
                    }
                } catch(e)
                    {
                    alert(e);
                    }
   getValues();
 }
 </script>
 </head>
 <body>
 <form id="form1" name="form1" method="post" action="">
 <table width="800" border="0">
  <tr>
  <td colspan="5" align="center">Products</td>
 </tr>
 <tr align="center">
    <td><INPUT type="button" value="Add Row" onclick="addRow('dataTable')" /></td>
    <td>
 <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" /></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
 </tr>
 <tr align="center">
  <td width="169">qty</td>
    <td width="145">&nbsp;</td>
    <td width="368">unit</td>
    <td width="151">price1</td>
        </tr>
 </table>
  <div>
<table width="800" border="0" class="box4_Box" id="dataTable">
<tr>
<td width="21" valign="top"><input name="chk[]" type="checkbox"/></td>

  <td width="280">
    <input type="text" name="qty1[]" id="qty" onkeyup="getValues()"onblur=""/></td>
  <td width="337"> 
    <input type="text" name="unit[]" id="unit" onkeyup="getValues()" onblur=""/></td>
  <td width="144">
    <input type="text" name="totala[]" id="totala" onkeyup="getValues()" /></td>
   </tr>
  </table>
    </div>
  <div>
  <table width="800" border="0">
  <tr>
     <td width="305"><input type="text" name="qtytotal" id="qtytotal" value="" /></td>
  <td width="337">&nbsp;</td>
  <td width="144"><input type="text" name="total" id="total" value="" /></td>
 </tr>
 </table>
  </div>
  </form>
 </body>
 </html>` 

            回答 #1

赞同：1

时间：2013-03-02T11:51:15.020

```
function sumQty(tableID) {
    var total = 0;
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    for (var i = 0; i < rowCount; i++) {
        var row = table.rows[i];
        var colCount = row.cells.length;
        for (var j = 0; j < cellCount; j++) {
            var node = row.cells[j].childNodes[0];
            if (node.name == "qty[]") {
                total += parseInt(node.value);
            }
        }
    }
    return total;
} 
```

```

# javascript - Jasmine + test external dependency

> ID：15173577
> 
> 赞同：2
> 
> 时间：2013-03-02T10:47:16.343
> 
> 标签：javascript, unit-testing, jasmine

I was wondering the best way to use jasmine to test external dependencies.

For example I have an overlay module that purely shows and hides a background mask:

```
function Overlay () {

}

Overlay.prototype.show = function () {

}

Overlay.prototype.hide = function () {

} 
```

This has complete Jasmine unit tests set up.

I then have another module Dialog that uses the overlay Module:

```
function Dialog () {

}

Dialog.prototype.show() {
 //do dialog stuff here, then show overlay
 var overlay = new Overlay();
 overlay.show();
} 
```

I have Jasmine tests that test all the dialog apart from the overlay. With the assumption that the overlay unit tests are setup and passing does the dialog test just need to ensure that var overlay is defined and that its show method has been called?

For separation of concerns is this the best way to do this?

Thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T17:39:12.747

最好的方法是将覆盖的实例注入对话框的构造函数中。

```
function Dialog (overlay) {
  this.overlay = overlay:
}

Dialog.prototype.show() {
 this.overlay.show();
} 
```

在您的测试中，您可以简单地注入一个间谍。

```
var overlay = {show: jasmine.createSpy()};
var dialog = new Dialog(overlay);
dialog.show();
expect(overlay.show). toHaveBeenCalled(); 
```

另一种方法是监视全局`Overlay`函数并返回一个带有 spy`show`函数的对象。

```
var overlay = {show: jasmine.createSpy()};
jasmine.spyOn(Overlay, 'show').andReturn(overlay);
var dialog = new Dialog(overlay);
dialog.show();
expect(overlay.show). toHaveBeenCalled(); 
```

# html - Matching TD heights in HTML emails

> ID：15173579
> 
> 赞同：0
> 
> 时间：2013-03-02T10:47:52.037
> 
> 标签：html, email, html-table, email-client

I'm currently building a HTML email and I'm having real issues with making two TD's the same height on all email clients.

It's a responsive email so I've separated the columns into two tables instead of nesting it all under the same one so they can snap underneath each other on mobiles.

I've tried stating the heights in both the TD's and the tables both with little success, in the end I even threw in a min-height.

I should say that it works fine on all web based browsers (except yahoo) my big problem is with outlook 2007 & 2010 which is what the client actually tests the emails on annoyingly enough.

Here's a sample:

```
<!-- square panels wrapper -->
<table width="600" border="0" cellpadding="0" cellspacing="0" class="square_panel_wrapper"><tr><td>

    <!-- square panels container -->
    <table width="600" border="0" cellpadding="0" cellspacing="0" class="square_panel_container"><tr><td>

        <!-- left table -->
        <table width="290" height="640" border="0" cellpadding="10" cellspacing="0" align="left" class="square_panel_left" style="border: 1px solid #c8c9cb; height: 640px; min-height: 640px;">
          <tr>
            <td valign="top" align="left" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size: 16px; color: #414042; line-height:1.5em; text-align: left; vertical-align: top;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vitae commodo leo</td>
          </tr>
          <tr>
            <td valign="top" align="left" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size: 16px; color: #414042; line-height:1.5em; text-align: left; vertical-align: top;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vitae commodo leo</td>
          </tr>
        </table>

        <!-- right table -->
        <table align="right" width="290" height="640" border="0" cellpadding="10" cellspacing="0" class="square_panel_right" style="border: 1px solid #c8c9cb; height: 640px; min-height: 640px;">
            <tr>
              <td valign="top" align="left" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size: 16px; color: #414042; line-height:1.5em; margin-top: 0px;  text-align: left; vertical-align: top;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vitae commodo leo. Aenean molestie tristique erat a consequat. Vestibulum nec nunc vel velit ornare fermentum in eget ipsum. Mauris venenatis volutpat malesuada. Curabitur fringilla libero at turpis tempor egestas quis rhoncus quam.  
            </td>
          </tr>
          <tr>
            <td valign="top" align="left" style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size: 16px; color: #414042; line-height:1.5em; text-align: left; vertical-align: top;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean vitae commodo leo</td>
          </tr>
        </table>

    </td></tr></table>

</td></tr></table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T12:41:45.157

是的，作为正确的悲伤wearwoolf，您可以强制对 td 使用 min-height 属性 - 将不可见的图像放入 td，或者将您的 td 包装到 div 中。第一种情况的示例：

```
<td><img style="float:left;min-height:50px;visibility:hidden;width:0px;">12345</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:41:12.567

如果高度`<td>`总是固定的，您可以尝试插入`<img src="http://somesite.com/dot.png" style="width:1px;height:640px" />`，`<td>`这个透明图像将不可见并且具有固定高度，因此您`<td>`将具有与图像相同的最小高度。

# javascript - 无法更改多个类名

> ID：15173583
> 
> 赞同：0
> 
> 时间：2013-03-02T10:48:18.763
> 
> 标签：javascript, for-loop, classname

经过几个小时的极度愤怒、愤怒、震惊——也许只是单纯的怀疑——我在这里发生了什么事，我才来到这里。

我试图在冗长的脚本中创建最简单的函数——通过 Id 获取元素，然后根据变量更改类的一部分。听起来很容易对吧？以下是相关代码：

```
{literal}
// check to see what kind of ban is this based on the ban_until and ban_at columns in table banlist from return data of /inc/classes/bans.class.php
var banduration = {/literal}{$ban.until - $ban.at}{literal};
if (banduration !== 1 || 0) {
    var bantype = ((banduration < 0 || banduration > 3600) ? "ban" : "warning");
}
// replace all classnames with others in case this is a warning/ban, and END the script before it also changes modnames
if (bantype === "warning" || "ban") {
            document.getElementbyId("modname_message_background").className = "common_background " + bantype + "_background";
            document.getElementById("modname_message_bottomribbon").className = "common_bottomribbon " + bantype + "_bottomribbon";
            document.getElementById("modname_message_letterbox").className = "common_letterbox " + bantype + "_letterbox";
            document.getElementById("modname_message_modname").className = "common_modname " + bantype + "_modname";
            document.getElementById("modname_message_servertime").className = "common_servertime " + bantype + "_servertime";
            document.getElementById("modname_message_signature").className = "common_signature " + bantype + "_signature";
            document.getElementById("modname_message_topribbon").className = "common_topribbon " + bantype + "_topribbon";
            document.getElementById("modname_message_username").className = "common_username " + bantype + "_username";
        } 
```

这是相当不言自明的：这是在 Smarty 模板中，`$ban.until`是禁令结束`$ban.at`的 unix 时间，也是应用它的 unix 时间，等等。但是当我运行这个脚本时，该脚本旨在根据各个版主等级（稍后但我离题）和消息类型（消息、警告或禁令）来更改禁令消息。当我插入这个时，只使用了第一行。激动，我花了两个小时以不同的方式多次修改它，但完全无济于事。我对自己很生气，我写了这个：

```
if (bantype == "warning" || "ban") {
    var list = ["modname_message_background","modname_message_bottomribbon","modname_message_letterbox","modname_message_modname","modname_message_servertime","modname_message_signature","modname_message_topribbon","modname_message_username"];
    var secondlist = ["background","bottomribbon","letterbox","modname","servertime","signature","topribbon","username"];
    for (var i=0;i<list.length;i++) {
    document.getElementById(list[i]).className = "common_" + secondlist[i] + " " + bantype + "_" + secondlist[i];
    }
}
return; 
```

这也不起作用。我难以置信——被打败了，我来到这里，为我不得不错过的荒谬简单的错误辩护，因为只有如此简单的事情才会如此令人讨厌。

我可以确认变量`banduration`工作正常（使用`alert`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:33:48.960

```
if (bantype === "warning" || "ban") 
```

不做你认为它做的事。它相当于：

```
if ((bantype === "warning") || "ban") 
```

这总是正确的，因为`"ban"`它不是错误的。它应该是：

```
if (bantype === "warning" || bantype === "ban") 
```

和：

```
if (banduration !== 1 || 0) 
```

应该：

```
if (banduration !== 1 && banduration !== 0) 
```

# php - 如何将更新查询从 mysql 转换为 PDO？

> ID：15173596
> 
> 赞同：0
> 
> 时间：2013-03-02T10:49:24.553
> 
> 标签：php, mysql, pdo

我想将此查询转换为 pdo ：请任何可以提供帮助的人都将不胜感激

```
function updateonlinesession(){         
if(isset($_SESSION['username']['id'])){
$uid = $_SESSION['username']['id'];
$page = $_SERVER['REQUEST_URI'];
$ip = $_SERVER['REMOTE_ADDR'];
$username = $_SESSION['logged'];

("UPDATE site_user SET dateupdated  = now(),ip = '$ip' WHERE 
username = '".mysql_real_escape_string($_SESSION['username'])."'"); 
}

}
This is What I have tried 
<?php 

function updateonlinesession(){         
if(isset($_SESSION['username']['id'])){
$uid = $_SESSION['username']['id'];
$page = $_SERVER['REQUEST_URI'];
$ip = $_SERVER['REMOTE_ADDR'];
$username = $_SESSION['logged'];

$update =("UPDATE site_user SET dateupdated  = now(),ip = '$ip' WHERE 
username = '"($_SESSION['username'])."'");  
$updated_once= $con->($update);
$updated_once->execute();
}

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:57:46.090

PDO 可以将值绑定到参数。像这样：

```
function updateonlinesession(){         
  if(isset($_SESSION['username']['id'])){
    $uid = $_SESSION['username']['id'];
    $page = $_SERVER['REQUEST_URI'];
    $ip = $_SERVER['REMOTE_ADDR'];
    $username = $_SESSION['logged'];
    $update = "UPDATE site_user SET dateupdated  = now(), ip = ? WHERE username = ?");  
    $updated_once = $con->prepare($update);
    $updated_once->bindParam(1, $ip, PDO::PARAM_STR );
    $updated_once->bindParam(2, $username, PDO::PARAM_STR );
    $updated_once->execute();
  }
} 
```

# facebook - 多个 OAuth 提供商（Facebook、Google、Windows Live）的单一帐户？

> ID：15173603
> 
> 赞同：9
> 
> 时间：2013-03-02T10:49:54.687
> 
> 标签：facebook, authentication, oauth

我有一个 Web 应用程序，它允许通过*Facebook*、*Google*和*Windows Live*进行注册和身份验证。每个 OAuth 请求都具有从身份验证提供程序检索关联电子邮件地址所需的范围。

**当前情况**是基于提供者和提供的标识符创建帐户。这意味着如果用户**使用多个提供商登录，**则该用户将在 Web 应用程序上拥有**多个帐户。**

即使使用**多个提供程序**，我也希望拥有一个**帐户的****理想情况**。我正在考虑使用电子邮件地址来查看用户是否存在帐户。如果存在，请使用基于电子邮件地址的帐户。

 ****这有多安全/可靠？是否所有提到的 OAuth 提供商都会验证电子邮件地址？更好的方法？

**编辑**：运行测试并想出了这个。仍在寻找进一步的建议:)

```
FaceBook: Cannot authenticate with unvalidated e-mail. Additional e-mail will not appear until validated.
Google: Provides `verified_email`. Additional e-mail will not appear until validated.
Windows Live: Cannot authenticate with unvalidated e-mail. Additional e-mail will not appear until validated. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T11:25:18.410

有趣的问题。您可以尝试使用电子邮件来检查用户是否存在，但问题是，用户可能为不同的提供商使用不同的电子邮件地址。

我的建议是要求用户（一旦他/她使用其中一种方法登录您的应用程序）将其他提供商附加到此帐户，以便他/她也可以使用它们登录您的应用程序。

它并不能完全解决您的问题（我不确定是否存在解决方案），但用户将拥有更多控制权，您将减少每个用户的帐户数量。****

# javascript - 如何在 HTML CSS Web 应用程序中使用通用页眉和页脚？

> ID：15173606
> 
> 赞同：0
> 
> 时间：2013-03-02T10:50:22.160
> 
> 标签：javascript, jquery, html, css, asp.net-mvc-4

我一直在为我的所有项目使用 ASP.NET MVC，并且一直在使用`@Html.Partial("_header")`任何我想在我的任何页面中包含通用静态 html 的地方。

但现在我在一个纯 HTML CSS 和 JS 网络应用程序中工作。这里我没有使用任何服务器端技术，只是一组静态内容。

在网站上，我有以下布局

> ----- 标题 -----
> 
> ----- 更改内容 ------
> 
> ----- 页脚 ------

所以，这就是我想要的，我想以某种方式做我曾经实现的事情`@Html.Partial()`

我知道的一种方法是使用 IFRAMES，还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:54:31.730

我在进行 chrome 扩展时遇到了这种情况。

我所做的是将页眉页脚存储在 js 文件的变量中，然后使用 jquery 将其附加到 body ...繁荣我在页面中得到了我的固定页眉页脚。

**[工作演示](http://jsbin.com/omefu4/42)**

**代码：**

```
<!DOCTYPE html>
<html>
 <head>
 <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript">      </script>
 <script>
 function appendheaderfooter(){
 var header="<div style='position:fixed;top:0px;background-color:aqua;'>header html</div>";
 var footer="<div style='position:fixed;bottom:0px;background-color:aqua;'>footer html</div>"
 $("body").append(header+footer);
}
  window.onload = appendheaderfooter;
</script>
<style>
div{width:100%;}
</style>
</head>
<body><br/>
<p>Content goes here</p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:28:47.920

如果您的 Web 应用程序将托管在支持服务器端包含的 Web 服务器上（例如 Apache），您可以添加`<!--#include virtual="/header.html" -->` 根据您的 Web 服务器，您可能需要先启用 SSI（`Options +Includes`在 apache 上的 .htaccess 中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:09:02.437

## 框架

框架曾经是要走的路，但随着时间的流逝，由于某种原因，它们已经不再受到开发人员的青睐——请注意[这篇](http://www.techrepublic.com/article/avoid-frame-based-layouts-in-favor-of-alternative-designs/6109221 "本文")2006 年的文章！

幸运的是，您似乎赞成避免使用框架:)

## 基于 JavaScript 的 SSI

其次，服务器端包含 (SSI) 或其他一些基于服务器的“包含”优于 JavaScript，尽管我承认这不一定是“纯”HTML/JS/CSS 解决方案。

SSI 声明的格式如下：
`<!--#include virtual="../quote.txt" -->`

[http://www.htmlgoodies.com/beyond/webmaster/article.php/3473341/SSI-The-Include-Command.htm](http://www.htmlgoodies.com/beyond/webmaster/article.php/3473341/SSI-The-Include-Command.htm)

有很多答案反映了这种关于 SO 的观点——例如，搜索中出现的前三个是 [here](https://stackoverflow.com/questions/418503/common-header-footer-with-static-html "这里")、 [here](https://stackoverflow.com/questions/676394/how-to-include-an-html-page-into-an-html-page)和 [here](https://stackoverflow.com/questions/13398089/template-of-sorts-for-html-website) ...

*请注意，最后一个接受的答案是推荐 JS 解决方案，但最后一段陈述了对服务器端的偏好。*

## 编译你的 HTML 代码（我的首选）

我需要创建一个“纯”HTML/CSS/JS 网站已经有一段时间了，但是这样做时，我的偏好是保持代码模块化并在部署之前“编译”HTML。

尽管在部署之前需要做一些额外的工作，但它会产生“最纯粹”的输出，以便在部署的代码中使用。您像往常一样编写代码，使用一点魔法来指示您想要包含的内容和位置，然后将此代码“编译”成部署到您网站上的标准 HTML/CSS/JS 文件。

这带来了使用模板化页眉/页脚/菜单栏/侧边栏文件的便利性和简单性，但需要事先编译 HTML 代码。

SASS 使用 Ruby on Rails 来执行此编译。不幸的是，在这个特定的时刻，它的 HTML 等价物的引用正在逃避我，所以我将在重新定位它时更新我的​​答案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T11:18:30.750

您是否愿意使用[Frameset](http://www.w3schools.com/tags/tag_frameset.asp)，尽管 HTML5 不支持它？

# hadoop - Hive 多次插入与 DISTINCT 选择语句出错

> ID：15173608
> 
> 赞同：0
> 
> 时间：2013-03-02T10:50:42.710
> 
> 标签：hadoop, hive, hiveql

*我从“ Hadoop the Definitive Guide* ”中阅读了这段代码：

```
SELECT a.ad_id, a.campaign_id, a.account_id, b.user_id
FROM dim_ads a JOIN impression_logs b ON (b.ad_id = a.ad_id)
WHERE b.dateid = '2008-12-01') x
INSERT OVERWRITE DIRECTORY 'results_gby_adid'
SELECT x.ad_id, count(1), count(DISTINCT x.user_id) GROUP BY x.ad_id
INSERT OVERWRITE DIRECTORY 'results_gby_campaignid'
SELECT x.campaign_id, count(1), count(DISTINCT x.user_id) GROUP BY x.campaign_id
INSERT OVERWRITE DIRECTORY 'results_gby_accountid'
SELECT x.account_id, count(1), count(DISTINCT x.user_id) GROUP BY x.account_id; 
```

但作为我的测试，使用几个 DISTINCT 不能得到正确的结果。

我的hiveql如下：

```
CREATE TABLE IF NOT EXISTS a (logindate int, id int); 
```

然后将本地文件加载到此表...

```
CREATE TABLE IF NOT EXISTS user (id INT) PARTITIONED BY (logindate INT) ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t' STORED AS TEXTFILE; 
```

那么如果单独插入表格：

```
INSERT OVERWRITE TABLE user PARTITION(logindate=20130120) SELECT DISTINCT(id) FROM a WHERE logindate=20130120;
INSERT OVERWRITE TABLE user PARTITION(logindate=20130121) SELECT DISTINCT(id) FROM a WHERE logindate=20130121; 
```

结果正确；

但如果选择下一个多重插入 hql：

```
FROM a
INSERT OVERWRITE TABLE user PARTITION(logindate=20130120) SELECT DISTINCT(id) WHERE logindate=20130120
INSERT OVERWRITE TABLE user PARTITION(logindate=20130121) SELECT DISTINCT(id) WHERE logindate=20130121;
the results are not correct, both partitions have the same number of records, seems like select from DISTINCT(id) WHERE logindate=20130120 OR logindate=20130121 
```

那么这是一个错误还是我写了一些错误的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:42:04.483

DISTINCT 在代码中有一些奇怪的历史作为分组依据。如果存在错误，那么了解您正在使用的 hive 版本将很重要，因为每个版本中都会解决错误。

这可能有效：

```
FROM a
INSERT OVERWRITE TABLE user PARTITION(logindate=20130120) SELECT id WHERE logindate=20130120 GROUP BY id
INSERT OVERWRITE TABLE user PARTITION(logindate=20130121) SELECT id WHERE logindate=20130121 GROUP BY id; 
```

如果这不起作用，这肯定会起作用...即使这不是您尝试使用的方法...

```
FROM (select distinct id, logindate from a where logindate in ('20130120','20130121')) subq_a
INSERT OVERWRITE TABLE user PARTITION(logindate=20130120) SELECT id WHERE logindate=20130120
INSERT OVERWRITE TABLE user PARTITION(logindate=20130120) SELECT id WHERE logindate=20130121; 
```

# php - How to apply lightbox jquery effect on images retrieved from database on fly

> ID：15173610
> 
> 赞同：0
> 
> 时间：2013-03-02T10:50:51.073
> 
> 标签：php, database, blob, lightbox

Hello pal's i need some help. I wanted to apply lightbox jquery effect on image gallery php file. I'm retrieving images from database which were stored in longblob format. i can get that effect by giving id value manually but by giving the variable like $id it's not providing that lightbox effect.... please check the below code and give some suggestions.

```
<div id="gallery">
<?php
$query = mysql_query("SELECT * FROM image_uploads") or die(mysql_error());
while($row = mysql_fetch_array($query)){
    $id = $row['entry_id'];
?>
<ul>
    <li>
        <a href="img_retrieve.php?oid=$id" $('#gallery').lightBox();">
            <img src="img_retrieve.php?sid=$id" width="72" height="72" alt="" />
        </a>
    </li>
</ul>
<?php
}
?> 
</div> 
```

in retrieve page follows

```
if(isset($_GET['sid'])){
$id = $_GET['sid'];
$run = mysql_query("SELECT * FROM image_uploads WHERE entry_id=$id") or die(mysql_error());

    while( $images = mysql_fetch_array($run) ){
        $image = $images['s_image'];

        header("Content-type: image/jpeg");
        echo $image;
    }   
}

if(isset($_GET['oid'])){
    $id = $_GET['oid'];
    $run = mysql_query("SELECT * FROM upload_images WHERE entry_id=$id") or die(mysql_error());

    while( $images = mysql_fetch_array($run) )
        $s_image = $images['s_image'];

        header("Content-type: image/jpeg");
        echo $s_image;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:31:28.063

```
 if(isset($_GET['sid'])){
        $id = $_GET['sid'];
        $run = mysql_query("SELECT * FROM image_uploads WHERE entry_id=$id") or die(mysql_error());

        while( $images = mysql_fetch_array($run) ){
            $image = $images['s_image'];

            header("Content-type: image/jpeg");
                echo $image;
        }   
    }

    if(isset($_GET['oid'])){
         $id = $_GET['oid'];
         $run = mysql_query("SELECT * FROM upload_images WHERE entry_id=$id") or die(mysql_error());

         while( $images = mysql_fetch_array($run) )
             $s_image = $images['s_image'];

             header("Content-type: image/jpeg");
                echo $s_image;
         }
    } 
```

# python - 如何在 python 中使用伪终端来模拟串口？

> ID：15173614
> 
> 赞同：5
> 
> 时间：2013-03-02T10:51:18.263
> 
> 标签：python, linux, twisted

我正在使用从串行端口读取行的twisted 创建一个python 应用程序。为了（单元）测试该应用程序而不必将实际设备连接到串行端口（也在没有实际串行端口的 pc 上）我想创建一个 python 脚本/应用程序来设置虚拟串行端口并写入它，所以扭曲的应用程序可以连接到虚拟串口的另一端并从中读取。这样我可以写一些单元测试。

我发现这可以在 linux 中使用伪终端。我还在[https://askubuntu.com/questions/9396/virtual-serial-port-for-testing-](https://askubuntu.com/questions/9396/virtual-serial-port-for-testing-purpose) purpose 上找到了一个工作示例脚本。

我想将该脚本更改为一个类，我可以在该类上调用 write 方法将数据写入串行端口，然后测试扭曲的应用程序。

这个示例脚本使用 poll 和 select 以及我不太了解的 linux stty 命令做了很多事情。我希望有人可以填补我的知识空白或提供一些提示。

干杯，

道夫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:14:05.527

除了 Jean-Paul Calderone 所说的（大部分是正确答案）之外，我还在 python 中使用 socat 制作了以下脚本。

这可以导入并实例化到解释器中，然后您可以使用它的 writeLine 方法将数据写入（虚拟）串行端口，该串行端口通过 socat 连接到另一个（虚拟）串行端口，另一个扭曲的应用程序可以在该端口上侦听. 但正如 Jean-Paul Calderone 所说：如果只是你想要的单元测试，你真的不需要做这些事情。只需阅读他提到的文档。

```
import os, subprocess, serial, time
from ConfigParser import SafeConfigParser

class SerialEmulator(object):
    def __init__(self,configfile):
        config=SafeConfigParser()
        config.readfp(open(configfile,'r'))
        self.inport=os.path.expanduser(config.get('virtualSerialPorts','inport'))
        self.outport=os.path.expanduser(config.get('virtualSerialPorts','outport'))
        cmd=['/usr/bin/socat','-d','-d','PTY,link=%s,raw,echo=1'%self.inport,'PTY,link=%s,raw,echo=1'%self.outport]
        self.proc=subprocess.Popen(cmd,stdout=subprocess.PIPE,stderr=subprocess.PIPE)
        time.sleep(3)
        self.serial=serial.Serial(self.inport)
        self.err=''
        self.out=''
    def writeLine(self,line):
        line=line.strip('\r\n')
        self.serial.write('%s\r\n'%line)
    def __del__(self):
        self.stop()
    def stop(self):
        self.proc.kill()
        self.out,self.err=self.proc.communicate() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T15:47:49.673

您不需要 pty 来测试您的协议。您甚至不需要任何类型的文件描述符。遵循[http://twistedmatrix.com/documents/current/core/howto/trial.html](http://twistedmatrix.com/documents/current/core/howto/trial.html)上的指南，尤其是*测试协议*部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T07:22:49.790

更好的方法可能是使用软件空调制解调器模拟器。

你可以从[github](https://github.com/freemed/tty0tty)获取 linux 和[sourceforge](http://sourceforge.net/projects/com0com/)获取 windows。

在 linux 上它被称为 tty0tty，你只需输入

> 制作

建造一切。然后你需要输入

> sudo insmod 模块/tty0tty.ko

安装虚拟驱动程序和

> ./pts/tty0tty

启动应用程序，它会打开 2 个虚拟端口：/dev/pts/4 和 /dev/pts/6。

然后，您可以在 python 单元测试中打开 /dev/pts/4 串行端口，并在应用程序中打开 /dev/pts/6。

在您的 python 单元测试中，您只需键入以下内容：

```
import serial 
ser = serial.Serial('/dev/pts/4', 19200) 
```

# c++ - 重载 + 运算符以添加 2 个多项式

> ID：15173617
> 
> 赞同：1
> 
> 时间：2013-03-02T10:51:34.190
> 
> 标签：c++

我正在尝试添加两个存储在二维数组中的多项式，第一行存储系数，第二行存储度数。

我创建了一个重载 + 函数，但在这里我使用 2D 分配的内存数组，当调用该函数时它会崩溃。

**更新：它现在运行，但结果是一些很大的负数

仅供参考，我有一个复制构造函数和一个重载 = 运算符

```
// overload +
Polynomial Polynomial::operator+(const Polynomial &right)
{

    maxExp = right.maxExp;
    poly = new int *[maxExp];
    for (int i=0; i < maxExp; i++)
        *(poly + i) = new int[2]; 

    Polynomial temp = *this;

    for (int i=0; i < maxExp; i++)
    {
        for (int j=0; j < 2; j++)
        {
            temp.poly[i][j] = poly[i][j] + right.poly[i][j];
        }
    }
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:53:23.820

只需从 += 开始并复制运算符并使用 + 运算符形成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:00:07.930

有多个问题，但最明显的是第一行：

```
delete [] poly; 
```

破坏加法之一（`x`in `x + y`）。它也会泄漏内存，但此时这是次要的。

**编辑：**我注意到你已经编辑`delete[]`了你的问题。这并不能解决问题，反而会使问题变得更糟：您仍在覆盖 summand，但现在正在泄漏更多内存。

# deployment - 未安装发布所需的 Web 发布扩展

> ID：15173618
> 
> 赞同：12
> 
> 时间：2013-03-02T10:51:35.983
> 
> 标签：deployment, azure, asp.net-mvc-4, connection-string, publish

我试图通过以下链接按照教程将 ASP.NET Web 应用程序部署到 Windows Azure 网站：[https](https://www.windowsazure.com/en-us/develop/net/tutorials/get-started/) ://www.windowsazure.com/en-us/develop/net/tutorials/get-started/ 之后下载公共配置文件，这是一个“.PublishSettings”文件，我回到 Visual Studio 并右键单击解决方案资源管理器中的项目，然后从上下文菜单中选择发布，如教程所述。但是，一个警告框跳了出来，它告诉我“未安装发布所需的 Web 发布扩展。您可以从[http://go.microsoft.com/fwlink/?LinkID=208120](http://go.microsoft.com/fwlink/?LinkID=208120)安装它。”

我已经安装了“Windows Azure SDK for .NET (VS 2012)”，我也尝试卸载它并再次安装，但同样的问题仍然存在。

任何人都知道如何解决这个问题？我真的很感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-07T19:48:00.543

我遇到了 2 个相关的问题。一是未安装发布所需的网络发布扩展，二是未加载网络扩展包。

我正在为遇到此问题并执行所有操作的其他人投票并重新发布 user3918092 的解决方案，包括：

1.  删除 ComponentModelCache
    `C:\Users\...\AppData\Local\Microsoft\VisualStudio\12.0`和
    `C:\Users\...\AppData\Roaming\Microsoft\VisualStudio\12.0`
2.  修复 Azure SDK 2.4 和 VS2013U3 卸载并重新安装 Azure SDK 2.4 和 VS2013U3
3.  从解决方案中删除扩展
4.  忽略 VS 启动时的扩展
5.  使用 devenv /setup 和 devenv /updateconfiguration 尝试重置配置

解决方案是：

使用以下命令从以管理员身份运行的 vs 命令行将以下项目重新安装到您的 GAC：

```
gacutil -i "C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\Extensions\Microsoft\Web Tools\Publish\Microsoft.VisualStudio.Web.Publish.dll"  
gacutil -i "C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\Extensions\Microsoft\Web Tools\Publish\Microsoft.VisualStudio.Web.Internal.Contracts.dll" 
```

感谢用户 3918092！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T05:57:44.547

我在 Visual Studio 2013 上遇到了同样的问题（尚未安装 Asp.net 和 web 工具 2013 扩展）

通过重新安装 Visual Studio 2013 更新 3 来解决它。

[http://www.microsoft.com/en-us/download/details.aspx?id=43721](http://www.microsoft.com/en-us/download/details.aspx?id=43721)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-07T11:08:57.310

这对我有用。我有 Visual Studio express 2012 然后安装了 Visual Studio 2013 需要 azure 工具，所以我安装了 2.4。我在这个阶段失去了发布，并没有安装 Visual Studio express 2012。

所以这就是我认为它失控的原因。

解决方案是使用 Developer 命令提示符以管理员身份重置合同和发布程序集。

如果您使用了默认安装设置，那么这可能是路径

```
gacutil -i "C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\Extensions\Microsoft\Web Tools\Publish\Microsoft.VisualStudio.Web.Publish.dll"
gacutil -i "C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\Extensions\Microsoft\Web Tools\Publish\Microsoft.VisualStudio.Web.Internal.Contracts.dll" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-07T13:48:32.083

我也有同样的问题。重新安装 VS 2013 更新 4 和 Azure SDK 2.6 后问题仍然存在。

但后来我尝试了下一件事：在“控制面板” **>** “程序” **>** “程序和功能”部分中，选择并修复 Microsoft ASP.NET 和 Web 工具 2013.4。

并且发布选项再次开始工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-09T12:45:37.420

安装 Web 工具更新后与 Visual Studio 2015.1 相同的问题。

现在必须安装到 gac 中的程序集是：

```
gacutil -i "C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\Extensions\Microsoft\Web Tools\Publish\Microsoft.VisualStudio.Web.Publish.dll"
gacutil -i "C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\Extensions\Microsoft\Web Tools\Publish\Microsoft.VisualStudio.Web.Publish.Core.Contracts.dll"
gacutil -i "C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\Extensions\Microsoft\Web Tools\Publish\Microsoft.VisualStudio.Web.Publish.Contracts.dll" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-23T13:46:26.110

我在将 VS 2013 Ultimate 从更新 3 升级到 4 时遇到了这个问题。我还收到了一条关于 Microsoft.VisualStudio.Web.PasteJson.JsonPackage 在加载解决方案时未正确加载的消息。修复 VS 足以让我再次使用发布选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-07T21:45:36.200

在将 VS 2013.2 更新到 VS 2013.3 后出现此问题时，注册 GAC 也可以工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-08T21:08:01.087

我有类似的问题，但我的错误与脚手架项目有关。

我需要卸载 Visual Studio 并浏览所有相关文件夹、注册表并重新安装 Visual Studio 才能使其正常工作！

我检查的文件夹：

*   ％应用程序数据％
*   %程序数据%
*   %程序文件%
*   视窗

希望有所帮助:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-20T04:16:35.050

我再次卸载了VS2012。在我重新安装（第三次）之前，我去了我用户的 AppData 和 Documents 文件夹，找到了 Visual Studio 2012 的所有实例并将它们删除。然后我重新安装了 VS2012，现在 Web Publishing 正在工作。

卸载后我删除的文件夹：

*   C:\Users\USERNAME\Documents\Visual Studio 2012
*   C:\Users\USERNAME\AppData\Local\Microsoft\VisualStudio\11.0
*   C:\Users\USERNAME\AppData\Roaming\Microsoft\Microsoft Visual Studio\11.0
*   C:\Program Files\Microsoft Visual Studio 11.0
*   C:\Program 文件 (x86)\Microsoft Visual Studio 11.0

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-20T19:40:13.650

[http://connect.microsoft.com/VisualStudio/feedback/details/758298/not-able-to-publish-web-application-after-installing-visual-studio-2012-rtw](http://connect.microsoft.com/VisualStudio/feedback/details/758298/not-able-to-publish-web-application-after-installing-visual-studio-2012-rtw)有一个解决方法，但它是一个痛苦重新安装并删除其他文件夹。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-06T15:19:21.207

I had this happen today out of the blue for a vs2013 project that was publishing fine previously.

I solved it by downloading a 'Visual Studio Web Publish Update' package from [here](https://msdn.microsoft.com/library/jj161045).

# python - Python：PIL：颜色数据类型，需要帮助“破译”其含义

> ID：15173620
> 
> 赞同：0
> 
> 时间：2013-03-02T10:51:42.353
> 
> 标签：python, image, python-imaging-library

我需要帮助来更好地理解 PIL 和颜色信息。

我正在研究一个 Python 项目，我应该分析一个已经存在的图像（.png，RGB）以提取该特定图像中表示的颜色。

我是 Python 和 PIL 的新手，我想我已经通过以下方式提取了图像中的颜色信息：

```
image = Image.open("image.png")
image.getcolors(4000) 
```

我看到的是一个元组列表，根据文档，每个元组代表一种颜色（第一个整数是图像中颜色存在的次数，然后是实际颜色）。

从输出中提取：

```
..., (44, (72, 64, 55, 255)), (32, (231, 208, 141, 255)), (2368, (70, 64, 55, 255)), 
(1, (187, 210, 216, 255)), (256, (68, 64, 57, 255)), (592, (67, 80, 103, 255)), 
(2, (198, 204, 214, 255), ... 
```

我不明白应该代表颜色的数字实际上意味着什么。我在想RGB，但有四个数字。如果真的是 RGB，那么最后一个数字是多少（几乎每种情况下都是 255）？

非常感谢在这件事上教育我的任何帮助。我浏览了文档并在网络上进行了搜索，但找不到有关此问题的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:55:53.690

那是[RGBA](http://en.wikipedia.org/wiki/RGBA_color_space)（红绿蓝 alpha）。

Alpha 通道通常用作不透明度通道。如果一个像素在其 Alpha 通道中的值为 0，则它是完全透明的（因此是不可见的），而 Alpha 通道中的值为 255 则表示一个完全不透明的像素。

# opencart - (vqmod) 错误：无法加载语言总计/子总计

> ID：15173622
> 
> 赞同：0
> 
> 时间：2013-03-02T10:51:44.237
> 
> 标签：opencart

我已将我的 Opencart 网站移至新主机，但收到错误消息：

> 注意：错误：无法加载语言总计/子总计！在 .../vqmod/vqcache/vq2-system_library_language.php 第 41 行

我该如何解决这个问题？

我尝试将 vqmod/xml 重命名为 vqmod/xml.bad，但没有结果。

我尝试将 /vqmod/vqcache 重命名为 /vqmod/vqcache.bad，但没有结果。

**更新：**

在 \system\library\language.php 中，我注释掉了导致应用程序退出的 else 分支。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:46:25.727

对此最合乎逻辑的解释是缺少您需要的语言文件。如果您有多种语言，这不一定是`english`一种语言，因此您需要全部验证它们

检查语言文件

```
admin/language/language-name-here/total/sub_total.php 
```

如果您在管理区域收到此信息，则存在，或者

```
catalog/language/language-name-here/total/sub_total 
```

如果它在客户端

另一种可能性是文件只是损坏了，在这种情况下，我建议只从干净的副本中重新上传所有这些文件。请注意，vQmod 引用仅仅是因为 vQmod 更改了语言加载文件（这是 vQmod 为使其工作而做的标准）。如果您没有任何专门改变语言工作方式的修改，这不会是错误的原因

我相信 1.5.X 的早期版本中也存在导致此类问题的错误，因此，如果您使用的不是相当新的版本，我也建议您升级

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:29:18.167

最可能的原因可能是您缺少以下文件之一：

```
catalog/language/english/total/sub_total.php
admin/language/english/total/sub_total.php 
```

如果您错过了它们，请从 opencart 的新副本上传它们，然后尝试。

并放回去`else`，错误将是错误，不显示错误不会解决它

# r - R中没有截距的功能回归

> ID：15173623
> 
> 赞同：3
> 
> 时间：2013-03-02T10:51:54.517
> 
> 标签：r, statistics, regression, intercept

我正在 R（包`fda`）中进行功能回归，并且应该消除截距项。但是 R 中的 fda 包似乎没有这样的公式。

这是我想做的：

`fit.fd <- fRegress(Acc.fd~Velo.fd - 1)`

其中`Acc.fd`和`Velo.fd`是包 fda 中的两个功能对象。但它与以下没有什么不同：

`fit.fd <- fRegress(Acc.fd~Velo.fd)`

由于结果嵌套很深，我添加了一个示例，以便可以小规模运行代码并生成结果的详细信息。

 `````
list3d <- rep(0, 10*5*2)
list3d <- array(list3d, c(10,5, 2))
# The data is 5 functions each evaluated at 10 points
# Indep variable
list3d[, , 2] <- matrix(rnorm(50, 0, 1), 10, 5)
# Response variable
list3d[, , 1] <- matrix(rnorm(50, 0, 0.1) , 10, 5)+list3d[, , 2] ^ 2 
dimnames(list3d)[[1]] <- seq(0,9)
time.range <- c(0, 9)
time.basis <- create.fourier.basis(time.range, nbasis = 3)
lfd <- vec2Lfd(c(0, (2*pi/20)^2, 0), rangeval = time.range)
time.lfd<- smooth.basisPar(seq(0,9),  list3d , time.basis, Lfdobj = lfd, lambda = 0.01)$fd
Acc.fd <- time.lfd[, 1]
Velo.fd <- time.lfd[, 2]
# Expecting to see without intercept here
fit.fd <- fRegress(Acc.fd ~ Velo.fd - 1)
# plot of coef func
plot(plotpoints, eval.fd(plotpoints, fit.fd$betaestlis$Velo.fd$fd))
# Plot of intercept func, I wish to limit it to zero
plot(plotpoints, eval.fd(plotpoints, fit.fd$betaestlis$const$fd))

# Compare with regular functional regression with no restriction
fit.fd <- fRegress(Acc.fd ~ Velo.fd)
plot(plotpoints, eval.fd(plotpoints, fit.fd$betaestlis$Velo.fd$fd)) 
````  `所以 no intercept 选项的工作方式与`lm`? 有人可以帮我吗？非常感谢！``

# c - 命令行解析器，端口号检索

> ID：15173624
> 
> 赞同：0
> 
> 时间：2013-03-02T10:52:08.403
> 
> 标签：c, parsing, unix

我正在尝试为从命令行输入的端口号实现一个​​简单的解析方案。我只是想知道下面的代码是否可以正常工作，或者是否有任何错误或不精确。

```
void main(int argc, char *argv[]){
int sock_ds, opt;
char *cmd_port;
unsigned short port;

/*Parsing command line: port-number retrieving*/
while (( opt = getopt(argc, argv, "p:")) != -1){
    switch(opt){
        case 'p':
            port = (unsigned short) strtoul(optarg, &optarg, 0); //string to unsigned long integer with ushort cast
            if(*optarg){
                fprintf(stderr, "String-integer conversion error\n");
                exit(EXIT_FAILURE);
            }
            break;
        default: /* '?' */
        fprintf(stderr, "Usage: %s -p port_number\n", argv[0]);
        exit(EXIT_FAILURE);
    }

}

printf("Port number retrieved (%d), server is starting ...\n", port);
    /* ... */
} 
```

谢谢你的支持！

`getopt(3)`在循环中重新编辑。这应该有效。还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:39:16.907

按照文档中的示例进行操作：[http ://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html#Example-of-Getopt](http://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html#Example-of-Getopt)

特别是，您没有在循环中调用 getopt()，也没有使用“？”检查“坏”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:44:54.440

另一种方法是使用 sscanf() 并检查其返回值（ := 它所做的分配数）：

```
unsigned short port;
int opt;
opt = getopt(argc, argv, "p:");
if(opt == 'p'){
    int rc;
    rc = sscanf( optarg, "%hu", &port);
    if (rc < 1){
        fprintf(stderr, "String-integer conversion error for %s\n", optarg);
        exit(EXIT_FAILURE);
        }
    } 
```

# assembly - ASM| 计算器项目中 Mod(%) 为 0 后的程序退出

> ID：15173627
> 
> 赞同：0
> 
> 时间：2013-03-02T10:52:19.793
> 
> 标签：assembly, x86, calculator, modulo, divide

在我的计算器项目中，我正在做一个 Mod 动作

前任 。15 % 6 = 3

当我这样做并且有一个mod（！= 0）它的工作

但是当我这样做并且 mod 是 0 时，例如。100 % 10

该程序甚至没有显示我输入了 '%' ，然后就退出了。

完整程序： http: [//pastebin.com/zkHw911M](http://pastebin.com/zkHw911M)（第168行）

或除和 Mod 部分：

```
DivideDo:
push ax
;mov ax , word ptr Num1Int
mov ah , 0
mov al , Num1Int
div Num2Int
mov ResultInt , al
pop ax
ret

ModDo:
push ax
;mov ax , word ptr Num1Int
mov ah , 0
mov al , Num1Int
div Num2Int
mov ResultInt , ah
pop ax
ret 
```

截图：

![](../Images/52bce726711f0ade3091b1ee951e8ad3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:37:57.497

您的“显示十进制数”例程似乎存在致命缺陷。它假定将至少显示一个非零数字。

```
I1:
                cmp al,0    <-- In the case where the result is zero, you don't push anything on the stack
                je I2
                mov ah,0
                div dl
                push ax
                inc cx
                jmp I1
        I2:
                pop ax
                add ah,30H
                mov [bx] , ah
                inc bx
                loop I2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:33:18.800

你`DoMod`在我看来没问题。我怀疑你`Int2Str`的问题。在我看来，如果结果为零，那么你的`pop`东西还没有被`push`编辑过，并且永远不要在你的字符串中放一个“0”。`sub`结果为零的 a是否有效？我不能（方便地）测试你的代码，但我认为`cmp al, 0`应该在 之后`div`，计算数字，然后`push`它 -`jnz top`而不是`jmp top`......微妙的错误！看看那里，看看有没有帮助...

# joomla1.5 - 将 Joomla 1.5.18 版网站移至新主机

> ID：15173632
> 
> 赞同：0
> 
> 时间：2013-03-02T10:52:55.003
> 
> 标签：joomla1.5

我必须移动一个版本为 1.5.18 的 Joomla 网站，但我无法正确处理。

如果我在新主机上安装最新版本的 Joomla，它具有与 v1.5.18 不匹配的不同文件夹和数据库结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:40:23.040

只需获取 Akeeba 备份的副本。它创建的备份文件将包含您将站点移动到新主机所需的一切。它免费且简单，上传和下载文件不应该超过 30 分钟，其中 25 分钟。

就是说-您最好升级站点或从头开始构建一个新站点。你已经过时了。不仅您的 1.5.x 8 版本落后，而且 1.5 系列在一年前就不再受支持。您的网站迟早会被黑客入侵，您的帐户肯定会被您的主机暂停。然后您将被迫升级并且您的网站将关闭。最好在网站还在运行时立即执行此操作，而不是稍后再匆忙完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:04:19.257

您不必安装全新的 Joomla！相反，将当前站点迁移到新主机

*   使用 phpmyadmin 从服务器导出当前数据库
*   备份您的文件
*   切换到新主机
*   再次使用 phpmyadmin 将您的数据库导入新服务器
*   使用 FTP 客户端软件（如 WinSCP）将文件恢复到新服务器
*   完成了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T11:25:21.350

传输后不要忘记在 configuration.php 中更新与 db 和根文件夹的连接

# php - php 从 db 字段中检索所有数据并存储到文件中

> ID：15173635
> 
> 赞同：1
> 
> 时间：2013-03-02T10:53:22.707
> 
> 标签：php

我有一个名为 users 的表和一个名为 email 的字段

我想从此字段中检索（所有）电子邮件，然后将它们存储在一个文件中

我尝试使用while循环，然后我使用了file_put_contents，但这只会保存第一列而不是整个数据

我如何将从while循环中检索到的所有电子邮件存储在一个文件中

```
$data=$db->query("select * from users order by userid desc");

 while($row=$data->fetch_assoc()){
 $string=$row['email'].",";
    file_put_contents("data.txt",$string);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:07:15.850

我认为最好`file_put_contents()`退出 while 循环，仅在将所有数据收集到字符串中时才调用它一次。

试试这个：

```
$data=$db->query("select * from users order by userid desc");

$string="";
while($row=$data->fetch_assoc()){
    $string .= $row['email'].",";
}

file_put_contents("data.txt",$string); 
```

**ps：**

如果要将数据附加到文件（通常），则应使用

```
file_put_contents("data.txt",$string,FILE_APPEND); 
```

[http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T11:09:06.017

您可以使用 MySQL 内置函数将数据导出到文件

```
 SELECT * FROM `table_name` INTO OUTFILE /path/file.txt 
```

如果你想导入然后这样做

```
 LOAD DATA INFILE '/path/file.txt' INTO TABLE db2.my_table; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T11:06:40.250

你可能会更好...

```
$data = $db->query("select * from users order by userid desc");

$emails = array();
while ($row = $data->fetch_assoc()) {
    $emails[] = $row['email'];
}

file_put_contents("data.txt", implode(', ', $emails)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T11:09:49.603

我想，你想要这个：

```
file_put_contents("data.txt", $string, FILE_APPEND); 
```

见[http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

# javascript - Chrome 和 IE 中的 Javascript onclick

> ID：15173638
> 
> 赞同：0
> 
> 时间：2013-03-02T10:53:46.810
> 
> 标签：javascript, flash

我想添加带有 Wordpress 链接的 flash 横幅：

```
<a href="javascript:void(0)" onclick="clickBanner(\''.$linkurl.'\')">
<object>
<param name="movie" value="'.$thead->image_url.'">
<param name="wmode" value="transparent" />
<embed wmode=transparent allowfullscreen="true" allowscriptaccess="always" src="'.$thead->image_url.'"></embed>
</object>
</a> 
```

此代码在 Firefox 中运行良好，在 Internet Explorer 中仅在双击时有效，在 Chrome 中它不起作用，我单击但链接不起作用。

如果我使用`onMouseDown()`它，但我不需要弹出窗口。

# javascript - Javascript“头”对象范围

> ID：15173640
> 
> 赞同：1
> 
> 时间：2013-03-02T10:54:13.717
> 
> 标签：javascript

我从“JavaScript Enlightement”一书中获取了下面的代码。代码说前两个语句返回 true，但是当我在 JSFiddle 中运行代码时，第一行返回“false”（使用 var 关键字定义的变量）。这是代码：

```
<!DOCTYPE html><html lang="en"><body><script>
var myStringVar = 'myString';
var myFunctionVar = function() {};
myString = 'myString';
myFunction = function() {};
console.log('myStringVar' in window); // returns true
console.log('myFunctionVar' in window); // return true
console.log('myString' in window); // returns true
console.log('myFunction' in window); // return true
</script></body></html> 
```

有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:55:49.710

在 jsFiddle 中，您的代码是嵌入的，并且不会直接运行，`window`而是在页面加载时调用的回调中运行。

如果要测试这些情况，则必须在标准页面中运行代码或选择`"no wrap"`左侧面板第二个菜单中的选项之一。

# php - HTTP PUT 请求 - 进度条实现

> ID：15173641
> 
> 赞同：3
> 
> 时间：2013-03-02T10:54:17.907
> 
> 标签：php, javascript, ajax, file-upload, put

我发现**HTTP PUT 请求最适合上传非常大的文件（1GB 或更多）。**

该解决方案运行良好，我可以将我选择的任何文件上传到服务器。但是，**我很难监控上传进度。**

我已经实现了*onprogress*回调，但是在通过 PUT 上传文件后，这个回调只被调用一次。

*我的 JavaScript 代码：*

```
var req = createRequest();
req.open("PUT", "PHP/upload_file.php?folder=" + aUploadedFile.upload_folder + "&master_folder=" + settings.strServerSideMasterFolder + "&file_name=" + aUploadedFile.file_name);
req.setRequestHeader("Content-type", "text/plain");
req.onload = function (event)
{
    console.log("OnLoad Called: " + aUploadedFile.file_name);
}
req.onprogress = function (event)
{
    console.log("OnProgress Called: " + aUploadedFile.file_name);
}
req.send(aUploadedFile.file_object); 
```

*   **当我希望通过 PUT 监控上传进度时，我有哪些选择？**
*   **我是否应该建立另一个 JavaScript AJAX 调用来监视服务器上传文件的大小？**
*   **有没有其他可行的解决方案？**

*我用：*

*   HTML5
*   JavaScript
*   PHP
*   阿帕奇

*我不用：*

*   jQuery

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T14:05:33.587

你试过`xhr.upload.onprogress`代替`xhr.onprogress`吗？

如果这也不起作用，您可以像您说的那样建立另一个 JavaScript AJAX 调用。最近，我做了一个上传系统，每行读取文件行，它需要显示一些关于上传的额外信息，而不仅仅是百分比，所以我做了这样的事情：

*   主页向负责处理文件的文件发出 AJAX 请求
*   在该文件中，我必须关闭连接，这样 AJAX 请求才能完成，但 PHP 脚本仍将运行，使用以下命令：

```
ob_start();
$file = tempnam('/tmp', uniqid()); // create a temp file to show status of the action
echo json_encode(array('file' => $file));
header('Content-length: '.ob_get_length());
header('Connection: close');
ob_end_flush();
flush(); // The AJAX request is completed here, but the script is still running...

function writeToFile($handle, $arr) {
    ftruncate($handle, 0); // empty file
    fwrite($handle, json_encode($arr));
}
$handle = fopen($file, 'w');
while (readLine($uploadedFile)) {
    // code to process line
    writeToFile($handle, array('progress' => $current / $total, 'action' => 'Reading...'));
}
// insert into database
writeToFile($handle, array('progress' => '100', 'action' => 'Inserting into database...'));
fclose($handle); 
```

*   在主页上，AJAX 请求将返回包含信息的文件的名称，因此我将创建几个对该文件的 GET 请求，使用`setInterval`方法

***注意：**在我的例子中，我创建了另一个 PHP 文件来显示进度文件的内容（带有`file_get_contents`），所以我可以在操作完成时手动删除该文件*

# android - 使用android WiFi API查找我手机范围内的路由器信息

> ID：15173642
> 
> 赞同：1
> 
> 时间：2013-03-02T10:54:23.020
> 
> 标签：android, api, wifi, router

我想创建一个使用 WiFi 路由器信息的 android 应用程序。使用 android WiFi API，我可以获得所有可用 WiFi 网络的所有信息，但我想找到我的手机所在范围内的路由器的信息或唯一身份。

有什么办法可以得到这些信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T20:09:37.363

网络信息二

显示有关手机和当前网络、蓝牙、IPv6 和蜂窝连接的信息。

```
**>> Information shown <<** 
```

•设备IP和主机名，私有和公共。

•当前的移动小区和任何邻居，以及他们的信号强度、位置信息和类型。

•IMSI/IMEI。

•有关当前移动提供商的信息（MCC+MNC、当前连接等）

•Android 设备唯一ID。

•有关 WiFi 连接的完整信息（MAC、当前 SSID 和 BSSID、链接速度、IP/网络掩码、网关、DNS 和 DHCP 服务器等）

链接如下：https: [//play.google.com/store/apps/details? id=aws.apps.networkInfoIi](https://play.google.com/store/apps/details?id=aws.apps.networkInfoIi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:30:15.923

这个[工作代码片段](https://stackoverflow.com/a/15976165/1166727)（由于 SO 中的反垃圾邮件策略，我无法重新发布）从连接的 wifi、设备上存储的网络和设备“视线”中的可用网络中提取所有内容。

当您说“唯一身份”时，我想您是指wifi路由器的MAC地址（称为BSSID，“getMacAddress”是为设备的mac地址保留的）。

# python - 如何从 cookiejar 形成 Cookie 标头？

> ID：15173645
> 
> 赞同：5
> 
> 时间：2013-03-02T10:54:45.737
> 
> 标签：python

我有一个`CookieJar`实例，我想`Cookie:`从其内容中获取格式正确的 HTTP 标头。

我查看了 Python 模块源代码，但它大约有 3/4 个函数和 20 个 sloc，我正在寻找一个更优雅的解决方案。

注意：我真的想要标头，而不是`urllib`使用该 cookie 发出请求，我知道`HTTPCookieProcessor`但它不符合我的需要（见上文）。

`Cookie`编辑：如果我能够使用 cookiejar 的内容获得一个（不同的东西，不同的模块）对象，那么它就像`.output(header="Cookie:")`. 然而，

> cookielib 和 Cookie 模块不相互依赖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:12:59.617

由于 Python 使用[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing#In_Python)，您可以改为将自己的对象传递给`add_cookie_header`; [文档](http://docs.python.org/3/library/http.cookiejar.html#cookiejar-and-filecookiejar-objects)甚至列出了您需要实现的方法（`get_full_url`、`get_host`等），尽管创建一个临时`urllib.request.Request`对象然后从中获取 cookie 并用它做您想做的事情可能更简单。

（当然，你*可以*调用内部方法，`_cookie_attrs`但我假设你知道为什么这是一个坏主意——依赖这样的实现细节是很脆弱的。）

# php - 如何使用php获取客户端计算机的MAC id

> ID：15173651
> 
> 赞同：3
> 
> 时间：2013-03-02T10:55:56.107
> 
> 标签：php, ip, client-server

要获取 mac ID，请使用以下代码。

```
<?php

ob_start(); // Turn on output buffering
system('ipconfig /all'); //Execute external program to display output
$mycom=ob_get_contents(); // Capture the output into a variable
ob_clean(); // Clean (erase) the output buffer

$findme = "Physical";
$pmac = strpos($mycom, $findme); // Find the position of Physical text
$mac=substr($mycom,($pmac+36),17); // Get Physical Address

echo $mac;
?> 
```

但它返回服务器机器 MAC ID .. 我需要获取运行我的网页的 PC 的 MAC ID。

谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:03:37.820

MAC 地址不会在 PHP 请求标头中发送，因此您将无法通过这种方式访问​​它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T14:33:51.820

您需要实现使用 JAVA（不是 Javascript）来获取用户连接信息。

所有互联网连接和网络设备都有 MAC ID，用于识别设备、制造商和设备编号。

这将依赖于实现在用户机器上运行的 JAVA，并且将是收集该信息的最可靠方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-22T06:28:07.137

有关使用 PHP + netstat 的正确解决方案，请参阅[如何在 PHP 中获取已连接客户端的 MAC 和 IP 地址？](https://stackoverflow.com/questions/1420381/how-can-i-get-the-mac-and-the-ip-address-of-a-connected-client-in-php#answer-1420402)

这个问题已经过时了，但是当我设法找到它并且所有其他响应都很愚蠢时，请知道您不需要使用 Java，即使此信息不直接暴露给 php 脚本，它也适用于每个 tcp以一种或另一种方式连接。

请注意，如果他在 NAT 之后（大多数用户可能都是这种情况），那么您不太可能获得客户端真实的 mac 或 ip 地址。所以它的用处是另一回事。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T11:02:58.000

您不能在 php.ini 中执行此操作。PHP 只在您的服务器中运行。您可以在客户端机器上执行的唯一代码是 JavaScript。

更多信息： [如何在 Web 应用程序中获取客户端计算机的 Mac 地址](https://stackoverflow.com/questions/9904100/how-to-get-client-machines-mac-address-in-a-web-application)

# macos - 启动应用程序时出现“库未加载”错误

> ID：15173654
> 
> 赞同：5
> 
> 时间：2013-03-02T10:56:11.833
> 
> 标签：macos, cocoa, frameworks

我创建了一个使用[RMSharedPreferences](https://github.com/realmacsoftware/RMSharedPreferences)框架的 Mac 应用程序。打开应用程序时，它立即崩溃，我收到以下错误：

```
Dyld Error Message:
  Library not loaded: @rpath/RMSharedPreferences.framework/Versions/A/RMSharedPreferences
  Referenced from: /Users/USER/Desktop/MyApp.app/Contents/MacOS/MyApp
  Reason: image not found 
```

好像找不到框架。我尝试将复制文件阶段添加到应该复制框架的目标中，并且在 Finder 中浏览应用程序的内容时，它似乎被正确复制了。

有谁知道可能导致此错误的原因？

**编辑**：将框架设置为可选确实使应用程序启动时没有任何错误**，但**应用程序不能完全工作。任何与 RMSharedPreferences 相关的调用都将被忽略。

![复制框架。](../Images/19e06ee0395eed7ba81f4ad60bd681b1.png) ![应用程序的内容。](../Images/18b0411b6fe3c67d361e5a7371af7f5f.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T12:03:57.677

由于您将框架与您的应用程序捆绑在一起，因此您应该设置框架的安装位置。您可以在框架目标构建设置“安装位置”中进行设置。使用类似的东西：

```
@executable_path 
```

您还可以为您的框架使用单独的文件夹，然后您将使用：

```
@executable_path/../Frameworks/ 
```

如果您无法重建框架（这不是您的，但我说的是一般情况），您可以像这样修改预构建的框架安装路径：

```
install_name_tool -id @executable_path/../Frameworks/<framework_name> <your_framework> 
```

[在这里你可以找到一个参考。](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/InstallingFrameworks.html#//apple_ref/doc/uid/20002261-BBCCFBJA)

如果您要将一个框架捆绑到另一个框架中，您可以`@loader_path`使用`@executable_path`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-14T14:59:31.130

@rpath 是一个更灵活的关键字，建议使用它。

更好的方法是在 Xcode 中设置“运行路径搜索路径”构建设置。

这避免了需要额外的构建阶段脚本来修改框架。

例如，在您的情况下，您可以将“运行路径搜索路径”设置为

```
@executable_path/../Frameworks 
```

或者

```
@loader_path/../Frameworks 
```

如果您尝试从框架内加载框架。

# c# - 快速排序作废问题

> ID：15173657
> 
> 赞同：0
> 
> 时间：2013-03-02T10:56:26.793
> 
> 标签：c#, quicksort

我一直在尝试用 C# 编写自己的快速排序。

但是，当我连接 lower、pivot 和更大的分区时，Visual Studio 告诉我它不能将 void 转换为字符串列表，尽管我不确定连接的 lessList 和 moreList 是如何变为 void 的。

代码片段：

```
 public List<string> SortFiles(List<string> fileList)
    {
        int listSize = fileList.Count;

        if (listSize <= 1)
        {
            return fileList; //because it is already sorted
        }

        string pivotString = fileList[listSize/2];

        //partition list
        List<string> lessList = new List<string>();
        List<string> moreList = new List<string>();

        foreach (string g in fileList)
        {
            if (String.Compare(g, pivotString) <= 0)
            {
                lessList.Add(g);
            }
            else
            {
                moreList.Add(g);
            }
        }

        lessList = SortFiles(lessList);
        moreList = SortFiles(moreList);

        //concatenate lessList + pivot + moreList
        List<string> sortedFiles = lessList.Add(pivotString); //thinks is void
        sortedFiles = sortedFiles.AddRange(moreList);         //thinks is void

        return sortedFiles; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:00:11.070

事实是，`Add`不要`AddRange`返回带有添加元素（或范围）的新列表。相反，他们将元素添加到列表中，并就地修改它。

实际上，您可以简单地修改代码以执行`Add`and `AddRange`，它会起作用。

请注意，这将是相当低效的，因为您正在创建列表并复制很多东西。

# php - 如何使我的简单警报窗口工作

> ID：15173658
> 
> 赞同：0
> 
> 时间：2013-03-02T10:56:32.877
> 
> 标签：php, button, alert

我目前正在使用 php 进行编码，当我单击一个按钮时，我应该会收到消息你想删除这个条目吗？

这是我目前在的地方

```
<button onClick="alert('Sure to delete entry?')"><a href="delete.php?delete=<?php echo $row['guestbook_id'];?>">Remove Entry</a></button> 
```

并确保它有效。但是当我按“x”关闭警报窗口时，它仍然会删除该条目。如何制作一个带有“取消”选项的弹出窗口？

我非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:59:43.960

```
if (confirm("Your question")) { 
 // do things if OK
} 
```

利用`confirm`

单击[此处](http://www.javascripter.net/faq/confirm.htm)查看示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:03:24.940

您可以使用以下 JavaScript 代码执行此操作：

```
if (confirm('Sure to delete entry?') == true) {
   //write your code here to delete
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T11:03:10.403

的HTML

```
<a href="delete.php?delete=<?php echo $row['guestbook_id'];?>" 
    onclick="return areYouSure()">Remove Entry</a> 
```

和 JS

```
function areYouSure()
{
   var con = window.confirm("Are You Sure?");
   if(con)
   {
     return true;
   }
   else
   {
     return false;
   }
} 
```

# css - 对齐复选框和文本的问题

> ID：15173660
> 
> 赞同：0
> 
> 时间：2013-03-02T10:56:49.853
> 
> 标签：css, less

我的页面出现了一些问题，我使用的 css 较少，而 css 的属性之一是 line-height 不能很好地工作。在所有浏览器上显示相同的模式，但在 IE 上显示不同。

这就是问题： ![在此处输入图像描述](../Images/fb39d4b28ffa0f26a6b70c2230edee82.png)

如果你看看。会看到 IE 显示的文本比 IE 上的复选框更高

我正在使用一个变量来定义行高，所以我想知道是否存在一些技巧或技巧来对同一个变量使用两个值（即 line-height = 20 - 如果有浏览器，line-height = 25 - 如果是 IE 浏览器，或者有什么方法可以解决这个问题。

我只想对齐复选框和文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:05:33.043

你可以试试

`<!--[if IE]> <style> </style> <![endif]-->`

# jquery - 删除使用 prependTo 添加的元素

> ID：15173666
> 
> 赞同：1
> 
> 时间：2013-03-02T10:57:40.013
> 
> 标签：jquery

我使用“ **prependTo** ” **JQuery**方法来复制表单元素，但不能**删除**新元素，也不能选择它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:15:47.703

所以，真的不知道你的意思我可以帮助一点..

你可以尝试这样的事情：http: [//jsfiddle.net/3Jymb/1/](http://jsfiddle.net/3Jymb/1/)

**HTML：** 添加元素删除元素

```
<div id="container">
<div>
    <b>I'm an element</b>
</div>
</div> 
```

**JS：**

```
$("#addElement").click(function(){
    $("#container").prepend("<div class='prepended'><b>I'm a prepended element</b></div>")
});

$("#removeElement").click(function(){
     $(".prepended").eq(1).remove()
}); 
```

这里每个假装的元素都有一个特殊的类，将他标记为前置......这样你就可以删除它......

如果每个新的前置元素都包含一个特别想删除它的按钮，那么您将不得不使用“On” API，它可以帮助您将事件附加到动态添加的 DOM 元素。

示例：http: [//jsfiddle.net/xG69Z/3/](http://jsfiddle.net/xG69Z/3/)

**HTML：**

```
<button id="addElement">Add Element</button>
<button id="removeElement">Remove Element</button>

<div id="container">
<div>
    <b>I'm an element</b>
    <button class="removeMe"> Remove Me</button>
</div>
</div> 
```

**JS：**

```
var i=1;

$("#addElement").click(function(){
    $("#container").prepend("<div class='prepended'><b>I'm a prepended element #"+i+"</b> <button class='removeMe'> Remove Me</button></div>");
    i++;
});

$("#removeElement").click(function(){
     $(".prepended").eq(1).remove()
});

$(document).on("click", ".removeMe", function(){
    $(this).parent().remove();
}); 
```

# java - Eclipse 窗口生成器 java 1.6 1.7

> ID：15173668
> 
> 赞同：3
> 
> 时间：2013-03-02T10:57:47.077
> 
> 标签：java, eclipse, macos, windowbuilder

我刚刚为 Eclipse 和 java 1.7 JDK 安装了 WindowBuilder，但是当我在 Eclipse 中创建一个新的 JFrame，并尝试在 WindowBuilder 中打开“设计视图”时，我收到以下错误：“Eclipse 在 1.6 下运行，但 Java项目具有 1.7 Java 合规级别，因此 WindowBuilder 将无法从项目中加载类。为项目使用较低级别的 Java，或使用更新的 Java 版本运行 Eclipse。

当我检查项目的属性时，它被设置为 Java Compiler 1.7。当我`Java -version`在终端中运行 a 时，我得到：

```
 java version "1.7.0_15"
  Java(TM) SE Runtime Environment (build 1.7.0_15-b03)
  Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode) 
```

我试图通过这个链接找到最新 Java 的路径： [Link to Eclipse Wiki](http://wiki.eclipse.org/Eclipse.ini)

将其更改为：

```
-vm
/Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk/Contents/Home/bin/java 
```

当我尝试打开 Eclipse 时出现错误提示：“jvm 共享库不包含 jni_createjavavm 符号”

我卡在什么地方了。任何人都知道如何解决这个问题？我曾尝试使用 Netbeans，但我的 Mac 和 Netbeans 不是最好[的朋友：屏幕崩溃图片](http://instagram.com/p/WSl4IqDOBJ/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T12:30:21.107

转到项目属性并将项目合规性级别从 1.7 更改为 1.6。还要让 Eclipse 在 Java 1.6 下运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-06T23:04:59.927

在我的情况下，我在整个操作系统中更改了我的默认 java 版本，我遵循了这个[问题](https://stackoverflow.com/questions/10401776/newbie-on-debian-and-trying-to-make-java-7-the-default-java-version-used)中的步骤！，我使用的是 Debian，但你可以寻找你的操作系统如何使 java 1.7 成为默认的 java 版本，在我的情况下，我没有不再需要 java 1.6，我将我的操作系统 java 默认版本从 1.6 设置为 1.7，它使 eclipse 在我的默认 java 版本 1.7 下加载，然后我在 Eclipse 中将所有工作区的 java 更改为 1.7 版本。

通过这样做，eclipse 将使用操作系统的默认 java 版本 1.7 运行。

但是，如果您仍然需要操作系统的 java 1.6 和仅用于 eclipse 的 1.7，在我使用 Debian 的情况下，您需要编辑：

vim /etc/eclipse.ini

并按照建议添加选项“-vm /usr/lib/jvm/java-7-openjdk-amd64/bin/”

当然你需要知道你的 java 1.7 路径，这是一个使用我的路径的例子。

由操作系统选择任何解决方案以从操作系统的 java 版本加载 eclipse 或将 eclipse.ini 更改为 java 1.7 并将 java 1.6 作为操作系统的默认设置由您决定。

# java - 带有数学运算符的字符串到整数

> ID：15173681
> 
> 赞同：2
> 
> 时间：2013-03-02T10:59:39.773
> 
> 标签：java, string, math, operators, int

我有一个带有数学运算符的字符串，我需要将其转换为`int`（答案）。

下面的代码不起作用，但我不确定如何让 answer 变量起作用。

```
String question;
int answer;

question = "7/7+9-9*5/5";
answer = Integer.parseInt(question); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:33:22.820

`Integer.parseInt(question);`……要是这么简单就好了……

您有一个`"7/7+9-9*5/5"`中[缀符号](http://en.wikipedia.org/wiki/Infix_notation)的数学表达式，您想要评估并将结果打印给用户。做到这一点的方法是使用[Shutting-yard 算法将其转换为](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)[后缀表示法，也称为反向波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)。将表达式转换为后缀评估后，使用此[算法非常容易](http://en.wikipedia.org/wiki/Reverse_Polish_notation#Postfix_algorithm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T11:44:07.737

## 1.Javascript引擎

```
public class MainTest {
    public static void main(String[] args)throws Exception {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("js");
        Object result = engine.eval("7/7+9-9*5/5");
        System.out.println(result);
    }
} 
```

## 2.Java编译器

a) 将字符串编译成 Java 类

b) 使用自定义 ClassLoader 加载类。

c) 使用反射执行它。

### 这是一个示例：

```
import java.io.IOException;
import java.lang.reflect.Method;
import java.net.URI;
import java.util.Arrays;

import javax.tools.JavaCompiler;
import javax.tools.JavaFileObject;
import javax.tools.SimpleJavaFileObject;
import javax.tools.ToolProvider;

public class MainTest{
    public static void eval(String str) throws Exception{
        StringBuffer sb = new StringBuffer();
        sb.append("public class TempClass{\n");
        sb.append("    public void run(){\n");
        sb.append("        " + str + "\n");
        sb.append("    }\n");
        sb.append("}\n");
        System.out.println(sb.toString());
        Class clazz = new EvalClassLoader().findClass(sb.toString());

        Method method = clazz.getMethod("run");
        method.invoke(clazz.newInstance());
    }

    public static void main(String[] args) throws Exception {
        eval("System.out.println(7/7+9-9*5/5);");
    }
}

/**
 * A custom class Loader.
 */
class EvalClassLoader extends ClassLoader{
    private String tempCLassName = "TempClass";
    @Override
    protected Class<?> findClass(String codeStr) throws ClassNotFoundException {
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        JavaFileObject file = new ClassFromString(tempCLassName, codeStr.toString());

        // Start a compile task
        Iterable<JavaFileObject> compilationUnits = Arrays.asList(file);
        JavaCompiler.CompilationTask task = compiler
                    .getTask(null, null, null, null, null, compilationUnits);
        if(task.call()){
            return loadClass(tempCLassName);
        }
        return null;
    }

}

/**
 * A Java class constructed from String.
 */
class ClassFromString extends SimpleJavaFileObject{
    private String code;

    public ClassFromString(String className,String code){
        super(URI.create("string:///" + className.replace('.', '/') +
                Kind.SOURCE.extension), Kind.SOURCE);
        this.code = code;
    }

    @Override
    public CharSequence getCharContent(boolean ignoreEncodingErrors)
            throws IOException {
        return code;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T11:33:06.657

从 1.6 开始，Java 已经嵌入了 JavaScript 引擎

```
 ScriptEngine e = new ScriptEngineManager().getEngineByName("js");
    int res = ((Number)e.eval("7/7+9-9*5/5")).intValue(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T11:14:35.993

你需要像[Reverse Polish notation](http://en.wikipedia.org/wiki/Reverse_Polish_notation)这样的东西。理解该算法并将其移植到 Java 大约需要一天的时间。当然，您可以在 Google 上搜索代码，但我强烈建议您学习该 wiki 页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T11:35:19.733

我会让框架和其他库为我完成工作。如果这是学术问题，我建议使用 Lai Vung 提供的解决方案。使用将为您进行解析和计算的 ScriptManager，然后将输出转换为所需的类型。快速演示：

```
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class Main {
    public static void main(String[] args) throws ScriptException {
        String question;
        int answer;

        question = "7/7+9-9*5/5";

        ScriptEngineManager mgr = new ScriptEngineManager();
        ScriptEngine engine = mgr.getEngineByName("JavaScript");

        answer = ((Number)engine.eval(question)).intValue();
       }
} 
```

值得一提的是：如果 android 不提供对脚本引擎的支持，您可能必须将 ScriptEngine 库添加到您的路径中。可以在[这里](https://stackoverflow.com/questions/3859305/problems-using-rhino-on-android)找到一篇解释如何使用 Android 和 Rhino 的好帖子。

# c# - .NET 中的智能类型转换

> ID：15173684
> 
> 赞同：1
> 
> 时间：2013-03-02T11:00:02.563
> 
> 标签：c#, .net, algorithm, types, converter

我一直在尝试将字符串转换为 .NET 中的值类型，其中生成的值类型是未知的。我在代码中遇到的问题是我需要一个接受字符串的方法，并使用“最适合”的方法来填充结果值类型。如果机制找不到合适的匹配，则返回字符串。

这就是我想出的：

```
public static dynamic ConvertToType(string value)
{
    Type[] types = new Type[]
    {
        typeof(System.SByte),
        typeof(System.Byte), 
        typeof(System.Int16), 
        typeof(System.UInt16), 
        typeof(System.Int32), 
        typeof(System.UInt32), 
        typeof(System.Int64), 
        typeof(System.UInt64), 
        typeof(System.Single), 
        typeof(System.Double), 
        typeof(System.Decimal),
        typeof(System.DateTime),
        typeof(System.Guid)
    };
    foreach (Type type in types)
    {
         try
         {
               return Convert.ChangeType(value, type);
         }
         catch (Exception)
         {
             continue;
         }
    }
    return value;
} 
```

我觉得这种方法可能不是最佳实践，因为它只能匹配预定义的类型。

通常我发现 .NET 以比我的实现更好的方式适应这个功能，所以我的问题是：有没有更好的方法来解决这个问题和/或这个功能在 .NET 中实现得更好吗？

**编辑：**请注意，数组中类型的排序是为了使给定类型的“最佳拟合”尽可能准确。

**编辑：**根据 miniBill 的要求，我将如何使用该方法（简单示例！）：

```
JsonDictionary["myKey"] = ConvertToType("255"); // 255 is a stringified json value, which should be assigned to myKey as a byte. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:54:18.110

您的方法并不理想，因为如果`value`不是`SByte`.

由于所有这些类型共享一个通用方法`.TryParse(string, out T)`，我们可以使用反射提取方法并为每种类型调用它。我将该方法设置为扩展方法，`string`并将`Type[]`数组分解为它自己的延迟加载属性，以便更快地使用。

```
public static class StringExtensions
{
    public static dynamic ConvertToType(this string value)
    {
        foreach (Type type in ConvertibleTypes)
        {
            var obj = Activator.CreateInstance(type);
            var methodParameterTypes = new Type[] { typeof(string), type.MakeByRefType() };
            var method = type.GetMethod("TryParse", methodParameterTypes);
            var methodParameters = new object[] { value, obj };

            bool success = (bool)method.Invoke(null, methodParameters);

            if (success)
            {
                return methodParameters[1];
            }
        }
        return value;
    }

    private static Type[] _convertibleTypes = null;

    private static Type[] ConvertibleTypes
    {
        get
        {
            if (_convertibleTypes == null)
            {
                _convertibleTypes = new Type[]
                {
                    typeof(System.SByte),
                    typeof(System.Byte), 
                    typeof(System.Int16), 
                    typeof(System.UInt16), 
                    typeof(System.Int32), 
                    typeof(System.UInt32), 
                    typeof(System.Int64), 
                    typeof(System.UInt64), 
                    typeof(System.Single), 
                    typeof(System.Double), 
                    typeof(System.Decimal),
                    typeof(System.DateTime),
                    typeof(System.Guid)
                };
            }
            return _convertibleTypes;
        }
    }
} 
```

用法：

```
string value = "2391203921";
dynamic converted = value.ConvertToType(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:36:53.570

你的方法会奏效，但正如你所说，它并不那么优雅。

我认为您有几种方法可以改进此代码：

1.  正如 psubsee2003 所说，将数组移出函数
2.  使用`TryParse`更便宜的测试方法（不涉及捕获）[（例如`Int32.TryParse`：）](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)
3.  实际上写一个解析器，在修剪之后，
    *   检查号码是否为 GUID
        *   它在 > 0 的位置是否有“-”？
        *   如果（`Guid.TryParse`）
            *   返回结果
        *   返回字符串（不能是数字！）
    *   检查数字是否为小数（是否有一个点？）
        *   尝试使用各种转换为单、双、十进制`TryParse`
        *   如果失败返回字符串
    *   它是否以减号开头？
        *   尝试解析为 Int64，然后检查大小并查看是否适合（<256 -> ubyte，< 65536 ushort...）
        *   如果失败返回字符串
    *   尝试解析为 Int64
        *   如果它有效，请检查它适合的最小尺寸
        *   如果失败，它可能是一个整数，但太大，尝试解析为双精度，如果失败返回字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T11:56:47.800

这是我之前写的可能有帮助的东西：

```
public static Boolean CanCovertTo(this String value, Type type)
{
    var targetType = type.IsNullableType() ? Nullable.GetUnderlyingType(type) : type;

    TypeConverter converter = TypeDescriptor.GetConverter(targetType);
    return converter.IsValid(value);
} 
```

基本思想是，如果您传递`Type`要测试的字符串和 a，您可以在尝试转换之前检查转换是否有效。

这种设计的问题在于`TypeConverter.IsValid()`它只是一个包装器（带有一些异常处理），`TypeConverter.CanConvertFrom()`因此您实际上并没有消除异常处理，但由于它是 BCL 的一部分，我倾向于认为这将是一个更好的实现.

所以你可以这样实现：

```
private static Type[] defaultTypes = new Type[]
{
    typeof(System.SByte),
    typeof(System.Byte), 
    typeof(System.Int16), 
    typeof(System.UInt16), 
    typeof(System.Int32), 
    typeof(System.UInt32), 
    typeof(System.Int64), 
    typeof(System.UInt64), 
    typeof(System.Single), 
    typeof(System.Double), 
    typeof(System.Decimal),
    typeof(System.DateTime),
    typeof(System.Guid)
};

public static dynamic ConvertToType(string value)
{
    return ConvertToType(value, defaultTypes);
}

public static dynamic ConvertToType(string value, Type[] types)
{
    foreach (Type type in types)
    {
        if (!value.CanConvertTo(type))
            continue;
        return Convert.ChangeType(value, type);
    }

    return value;
} 
```

如果没有异常处理（甚至`TypeConverter.IsValid`方法中的异常处理），没有真正的好方法可以做到这一点，所以如果你真的需要这样的方法，你必须忍受它。但是，如果您实施[miniBill 回答](https://stackoverflow.com/a/15174001/250725)中的一些建议以及设计中的一些改进，则可以限制对异常处理的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T12:08:12.873

您可以通过调用该方法`Reflection`来处理所有类型，这比使用处理多个异常要快一些`Parse``TryParse``ChangeType`

```
public Type[] PredefinedTypes = new Type[]
{
    typeof(System.SByte),
    typeof(System.Byte), 
    typeof(System.Int16), 
    typeof(System.UInt16), 
    typeof(System.Int32), 
    typeof(System.UInt32), 
    typeof(System.Int64), 
    typeof(System.UInt64), 
    typeof(System.Single), 
    typeof(System.Double), 
    typeof(System.Decimal),
    typeof(System.DateTime),
    typeof(System.Guid)
};

public dynamic ConvertToType(string value)
{
    foreach (var predefinedType in PredefinedTypes.Where(t => t.GetMethods().Any(m => m.Name.Equals("TryParse"))))
    {
        var typeInstance = Activator.CreateInstance(predefinedType);
        var methodParamTypes = new Type[] { typeof(string), predefinedType.MakeByRefType() };
        var methodArgs = new object[] { value, typeInstance };
        if ((bool)predefinedType.GetMethod("TryParse", methodParamTypes).Invoke(predefinedType, methodArgs))
        {
            return methodArgs[1];
        }
    }
    return value
} 
```

# android - Simon Ics Date Picker Dialog throws android.view.InflateException: Binary XML file line #20: Error inflating class net.simonvt.widget.DatePicker

> ID：15173687
> 
> 赞同：4
> 
> 时间：2013-03-02T11:00:27.650
> 
> 标签：android, android-datepicker, android-simon-datepicker

我在我的 android 应用程序中使用 Simon 的 ICS 日期选择器库 ( [https://github.com/SimonVT )。](https://github.com/SimonVT)我有一个日期按钮，如果我单击该按钮，它将在对话框中显示 ics datepicker。我的问题是，如果我单击按钮，它不会显示 datepicker 对话框，但会显示以下错误：

```
03-02 10:46:59.521: E/AndroidRuntime(911): android.view.InflateException: Binary XML file line #20: Error inflating class net.simonvt.widget.DatePicker
03-02 10:46:59.521: E/AndroidRuntime(911):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
03-02 10:46:59.521: E/AndroidRuntime(911):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
03-02 10:46:59.521: E/AndroidRuntime(911):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
03-02 10:46:59.521: E/AndroidRuntime(911):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-02 10:46:59.521: E/AndroidRuntime(911):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-02 10:46:59.521: E/AndroidRuntime(911):  at net.simonvt.app.DatePickerDialog.<init>(DatePickerDialog.java:103)
03-02 10:46:59.521: E/AndroidRuntime(911):  at net.simonvt.app.DatePickerDialog.<init>(DatePickerDialog.java:74)

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case START_DATE_PICKER_ID:
            mCalendar.setTimeInMillis(mStartMillis);
            year = mCalendar.get(Calendar.YEAR);
            monthOfYear = mCalendar.get(Calendar.MONTH);
            dayOfMonth = mCalendar.get(Calendar.DAY_OF_MONTH);
            return new DatePickerDialog(ListPillBoxActivity.this, startPillBoxDateListener,
                    year, monthOfYear, dayOfMonth);
        case END_DATE_PICKER_ID:
            mCalendar.setTimeInMillis(mEndMillis);
            year = mCalendar.get(Calendar.YEAR);
            monthOfYear = mCalendar.get(Calendar.MONTH);
            dayOfMonth = mCalendar.get(Calendar.DAY_OF_MONTH);
            return new DatePickerDialog(ListPillBoxActivity.this, endPillBoxDateListener, year,
                    monthOfYear, dayOfMonth);
    }

    return null;
} 
```

在这两种情况下，错误都指向以下行：

```
 return new DatePickerDialog(ListPillBoxActivity.this, startPillBoxDateListener,
                    year, monthOfYear, dayOfMonth); 
```

每个参数都正确传递给 datePickerDialog，但在膨胀对话框中存在问题

任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:07:18.973

我遇到了同样的问题。解决方案是在 DatePickerSamples 中为您的样式添加三个项目：

```
<style name="SampleTheme" parent="@android:style/Theme">
    <item name="calendarViewStyle">@style/Widget.Holo.CalendarView</item>
    <item name="datePickerStyle">@style/Widget.Holo.DatePicker</item>
    <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T18:34:33.000

基于@ham 所说的，

将这些行添加为 xml 资源后：

```
<style name="SampleTheme" parent="@android:style/Theme">
    <item name="calendarViewStyle">@style/Widget.Holo.CalendarView</item>
    <item name="datePickerStyle">@style/Widget.Holo.DatePicker</item>
    <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
</style> 
```

有必要将此属性添加到您`application`在 AndroidManifest 中的标签中：

```
android:theme="@style/SampleTheme" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-06T22:04:41.923

也不要错过：

```
<!-- Copy one of these attributes to your own theme (choose either dark or light).
    <item name="numberPickerStyle">@style/NPWidget.Holo.NumberPicker</item>
    <item name="numberPickerStyle">@style/NPWidget.Holo.Light.NumberPicker</item>
--> 
```

# magento - 清理 Magento 中的客户账单和送货地址

> ID：15173689
> 
> 赞同：1
> 
> 时间：2013-03-02T11:00:46.000
> 
> 标签：magento

我想删除 Magento 中与客户关联的所有地址（帐单和送货地址）。我怎样才能以编程方式做到这一点？有人可以帮帮我吗？

我正在使用这段代码：

```
 $customer = Mage::getModel('customer/customer');
    $customer->setWebsiteId(Mage::app()->getWebsite()->getId());

    $customer->loadByEmail((string) $_REQUEST['email']);

    $address = Mage::getModel('customer/address');

    $address->delete(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:49:55.153

假设您已经从客户集合中加载了客户。找到下面的代码，使用客户ID加载客户地址，并一一删除。

```
 if($customer){
         /*Load the customer addresses by Customer Id*/
        $customerAddressCollection = Mage::getResourceModel('customer/address_collection')->addAttributeToFilter('parent_id',$customer->getId())->getItems();
        foreach($customerAddressCollection as $customerAddress){
            $customer_address_id = $customerAddress->getData('entity_id');
            if($customer_address_id!=""){   
      /*Load the Customer Address by ID and delete it*/    
               Mage::getModel('customer/address')->load($customer_address_id)->delete();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:41:47.107

您要删除关系还是删除所有地址？

# 关系

```
$col = Mage::getModel('customer/customer')->getCollection()
foreach($col as $customer) {
    $address = $customer->getDefaultBillingAddress();
    // set attributes
    $address->save();

    $address = $customer->getDefaultShippingAddress();
    // set attributes
    $address->save();

} 
```

# 删除所有地址

这是一个坏主意，因为地址上有很多外键。不要那样做。

# c++ - 在 .NET 中使用 C++ DLL

> ID：15173692
> 
> 赞同：0
> 
> 时间：2013-03-02T11:01:00.017
> 
> 标签：c++, vb.net, cygwin

昨天我问了这个问题，关于使用 Cygwin 编译器生成可供 .NET 使用的 C++ DLL：[Using C++ app in .NET](https://stackoverflow.com/questions/15155237/using-c-app-in-net)

解决方案是使用 Visual C++ 而不是 Cygwin 编译 C++ 应用程序，即我能够从 .NET 调用 C++ 函数。

为什么我能够在 Visual C++ 而不是 Cygwin 中做到这一点？该代码可以在我的链接问题中找到。这是 Visual C++ DLL 的 Dependancy Walker 的屏幕截图，以帮助回答我的问题：

![在此处输入图像描述](../Images/e6b15f0aa666cd03f1cc3c703050170a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:27:00.057

名称修改方案在 gcc/mingw/cygwin 和 msvs 中有所不同。如果要在编译器之间共享 DLL，则必须使用纯 C 接口。

或者，您可以使用 .def 文件，如该问题的底部答案中所述：[如何在 MSVC 中使用使用 MingW 编译的库？](https://stackoverflow.com/questions/2529770/how-to-use-libraries-compiled-with-mingw-in-msvc)

# java - Web 服务接受 Object[]。它接受什么 JSON？

> ID：15173700
> 
> 赞同：0
> 
> 时间：2013-03-02T11:02:08.597
> 
> 标签：java, json, web-services, jakarta-ee

我正在编写一个应该接受类型 Object[] 的 Web 服务。它具有通用性，需要在不同的场景中接受不同数量和类型的参数。

请求对象如下所示：

```
@XmlRootElement
public class SimilarityRequest {

    private Object[] params;
    private String similarity;

    public Object[] getParams() {
    return params;
    }

    public void setParams(Object[] params) {
    this.params = params;
    }  

    public String getSimilarity() {
    return similarity;
    }

    public void setSimilarity(String similarity) {
    this.similarity = similarity;
    }

} 
```

这是网络服务：

```
@SessionScoped
@Path("/similarity/")
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Stateful
@StatefulTimeout(600000) // 10 minutes
public class SimilarityResource {

    @POST
    @Path("/")
    public List<SimilarityResult> universalSimilarity(JAXBElement<SimilarityRequest> sr) {

        Object[] params = sr.getValue().getParams();
        String similarity = sr.getValue().getSimilarity();

    }

} 
```

我不知道在这种情况下它接受什么 json 作为参数？我试过了`"params":{5,10}`，`"params":{"0":5,"1":10}`还有`"params":[5,10]`。有些东西会抛出 500 和 400 （错误的请求）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:30:30.163

我已经使用 Jersey 成功实现了服务，代码是一样的，我只是删除了*JAXBElement*包装器和*@XmlRootElement*注释。*WEB-INF.xml 文件必须在com.sun.jersey.config.property.packages*参数部分包含包含*SimilarityRequest*类 的文件夹，并且*com.sun.jersey.api.json.POJOMappingFeature*参数必须为 true。该服务正确接收以下 json：

 **> { “相似度”：“测试”，“参数”：[5,10] }

对象数组包含两个整数值。**

# c - 在扩展 void 指针的动态数组后初始化新分配的内存

> ID：15173704
> 
> 赞同：1
> 
> 时间：2013-03-02T11:03:01.967
> 
> 标签：c

我正在学习 Zed Shaw 的 Learn C the Hard Way。我对 ex34 中函数定义的代码感到困惑。在 ex34 中，Zed 教我们如何实现动态数组。darray.h 中的代码：

```
typedef struct DArray {
  int end;
  int max;
  size_t element_size;
  size_t expand_rate; /* it's 300 by default. */
  void **contents;
} DArray;

DArray *DArray_create(size_t element_size, size_t initial_max);
int DArray_expand(DArray *array);
/* other operations... */ 
```

让我感到困惑的代码在 darray.c 中：

```
DArray *DArray_create(size_t element_size, size_t initial_max)
{
  DArray *array = malloc(sizeof(DArray));
  array->max = initial_max;
  array->contents = calloc(initial_max, sizeof(void *));
  array->end = 0;
  array->element_size = element_size;
  array->expand_rate = DEFAULT_EXPAND_RATE; /* defined in header, which is 300 */

  return array;
}

static inline int DArray_resize(DArray *array, size_t newsize)
{
  array->max = newsize;
  void *contents = realloc(array->contents, array->max * sizeof(void *));
  array->contents = contents;
  return 0;
}

int DArray_expand(DArray *array)
{
  size_t old_max = array->max;
  DArray_resize(array, array->max + array->expand_rate);
  memset(array->contents + old_max, 0, array->expand_rate + 1); // confused

  return 0;
}
/* Definitions of other operations... */ 
```

[练习链接...](http://c.learncodethehardway.org/book/ex34.html)

`memset`所以我的问题是，为什么被调用的第三个参数`DArray_expand`是`array->expand_rate + 1`而不是`array->expand_rate`？我认为扩展后的数组长度为 400（假设初始长度为 100），范围从`contents[0]`到`contents[399]`. 需要初始化的元素范围从`contents[100]`到`contents[399]`，那么 的第三个参数`memset`应该`array->expand_rate`是 300。谁能给我解释一下？

感谢您编辑我的帖子。我忘了我可以使用内联代码 md 语法。

* * *

编辑：我也对在这段代码中使用 memset 感到困惑。我电脑中 memset 的手册页说：

> memset() 函数将值 c（转换为无符号字符）的 len 个字节写入字节串 b。

我用谷歌搜索了 memset 的实现。我从这个链接得到这个：

[C 标准库：string.h:memset](http://clc-wiki.net/wiki/C_standard_library%3astring.h%3amemset)

```
#include <stddef.h> /* size_t */
void *memset(void *s, int c, size_t n)
{
    unsigned char* p=s;
    while(n--)
        *p++ = (unsigned char)c; // This line confused me..
    return s;
} 
```

在我的操作系统（达尔文 12.0.0）中，`sizeof(void *)`和的`sizeof(int *)`值为 8。我尝试了更多。我的操作系统中各种指针的大小似乎是8。如果指针的大小是8，那么这段代码会发生什么：

```
*p++ = (unsigned char)c; /* the value of c is 0\. size of 
                            unsigned char is 1 in my OS */ 
```

如果 Zed 的代码有错误，你能告诉我如何修复它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:09:13.120

`+1`至少可能是疯子或代码气味。此外，该`memset`函数写入`n`字节：

> memset() 函数用常量字节 c 填充 s 指向的内存区域的**前 n 个字节**

因此，它应该是`array->expand_rate * sizeof(void *)`。

* * *

此外，`memset`到 0 并不是使指针为 NULL 的防弹方法。在一些奇特的架构上**[，all-bits-0 并不一定意味着`NULL`](http://c-faq.com/null/machexamp.html)**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:10:29.253

你是对的，陈述是错误的

```
memset(array->contents + old_max, 0, array->expand_rate + 1); 
```

这可能会导致访问超出数组范围

它应该是

```
memset(array->contents + old_max, 0, array->expand_rate * sizeof(void *)); 
```

**编辑：** 另外，正如上面 cnicutar 正确提到的，它应该是`array->expand_rate * sizeof(void *)`. 在看到 cnicutar 的回答后，我错过了这一点并对其进行了修改。

# java - 为什么 com.sun.net.httpserver.HttpServer 挂起？

> ID：15173709
> 
> 赞同：3
> 
> 时间：2013-03-02T11:03:52.843
> 
> 标签：java, https, freeze

[当通过这个 PHP 代理](https://languagetool.svn.sourceforge.net/svnroot/languagetool/trunk/website/www/online-check/tiny_mce/plugins/atd-tinymce/server/proxy.php)（使用 curl）`com.sun.net.httpserver.HttpServer`调用我实现的简单 HTTPS 服务器时，它工作正常。但是一旦我不使用代理而是更改我的 Web 表单以便浏览器直接将其请求发送到服务器，服务器就会变得不稳定并且有时会停止响应。然后客户端将等待响应，直到超时。该问题难以重现，有时会在实时系统中数小时后发生。所有这些都是通过 HTTPS 在非标准端口（当前为 8081）上进行的。我的服务器返回 XML。

当服务器不再响应时我看到的堆栈跟踪（通过“ `kill -QUIT [pid]`”）：

```
"Thread-2" prio=10 tid=0x0000000017fc4800 nid=0x1c2b runnable
    [0x00002ba5ec97c000]
java.lang.Thread.State: RUNNABLE
at sun.nio.ch.FileDispatcherImpl.read0(Native Method)
at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)
at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:218)
at sun.nio.ch.IOUtil.read(IOUtil.java:191)
at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:359)
    - locked <0x00000000fd1e4b98> (a java.lang.Object)
at sun.net.httpserver.SSLStreams$EngineWrapper.recvAndUnwrap(SSLStreams.java:334)
    - locked <0x00000000fd1e4c58> (a java.lang.Object)
at sun.net.httpserver.SSLStreams.recvData(SSLStreams.java:409)
at sun.net.httpserver.SSLStreams$InputStream.read(SSLStreams.java:524)
at sun.net.httpserver.SSLStreams$InputStream.read(SSLStreams.java:593)
at sun.net.httpserver.Request.readLine(Request.java:84)
at sun.net.httpserver.Request.<init>(Request.java:54)
at sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:529)
at sun.net.httpserver.ServerImpl$DefaultExecutor.execute(ServerImpl.java:156)
at sun.net.httpserver.ServerImpl$Dispatcher.handle(ServerImpl.java:424)
at sun.net.httpserver.ServerImpl$Dispatcher.run(ServerImpl.java:389)
at java.lang.Thread.run(Thread.java:722) 
```

**我已经尝试过：**发送`Connection: close`http 标头 - 没有帮助。编写一个使用多个线程并行查询服务器的 Java 测试用例 - 工作正常。

所以问题是：浏览器和我的代理有什么不同，为什么这会让我的服务器进程挂起？

**来源：**这[是 HttpHandler](https://languagetool.svn.sourceforge.net/svnroot/languagetool/trunk/languagetool/languagetool-server/src/main/java/org/languagetool/server/LanguageToolHttpHandler.java)的[来源，这是使用该处理程序的服务器的来源](https://languagetool.svn.sourceforge.net/svnroot/languagetool/trunk/languagetool/languagetool-server/src/main/java/org/languagetool/server/HTTPSServer.java)

**背景：**我希望任何人都能够从他们的网页使用我的 REST 服务，而无需安装代理（需要规避 Javascript 跨域策略）。为此，服务器发送一个`Access-Control-Allow-Origin: *`标头。与 Jetty 或 Tomcat Embedded 相比，我使用 Java 提供的类具有最小的开销。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T02:51:09.933

## 为什么代理和无代理的行为不同？

*   没有代理的更多连接
*   现实世界的浏览器用户可以做一些有趣的事情，比如开始一个请求，然后取消/返回按钮/新请求。

您需要设置套接字超时。不幸的是，API 文档建议无法以编程方式执行此操作。

## 但是您可以通过 JVM 系统属性设置请求和响应超时：

[http://www.javaworld.com/community/node/8424](http://www.javaworld.com/community/node/8424)
[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/net/httpserver/ServerConfig .java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/net/httpserver/ServerConfig.java)
[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6563368](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6563368)

设置这些系统属性：

**sun.net.httpserver.clockTick** `默认值 = 10000 即 10 秒`

 `**sun.net.httpserver.timerMillis** `默认值 = 1000 即 1 秒`

 `**sun.net.httpserver.maxReqTime** `默认值 = -1 即永远。`

 `默认值 > 0 给出 timeout = default * (either clockTick ot timerMillis) sec

**sun.net.httpserver.maxRspTime** `默认值 = -1 即永远。`

 `默认值 > 0 给出 timeout = default * (either clockTick ot timerMillis) sec

* * *

显然，在您的 HttpHandler.handle() 方法中，请确保在响应标头中设置响应代码：

```
 httpExchange.sendResponseHeaders(HttpURLConnection.HTTP_OK, response.length());  
  final OutputStream os = httpExchange.getResponseBody();  
  os.write( response.getBytes() );  
  os.close(); 
```````

# javascript - 如何从 Coffeescript 文件中配置 JSHint？

> ID：15173711
> 
> 赞同：3
> 
> 时间：2013-03-02T11:04:05.707
> 
> 标签：javascript, coffeescript, jshint

使用 Javascript 编程时，可以使用以下语法从 Javascript 文件中配置 JSHint

> /* jshint eqnull: true, eqeqeq: false */

有没有办法从 Coffeescript 文件中设置这些特定配置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T11:09:01.263

## 这个咖啡文...

```
### jshint eqnull: true, eqeqeq: false ###

alert "regular coffee script here..." 
```

## 编译为...

```
/* jshint eqnull: true, eqeqeq: false */alert("regular coffee script here..."); 
```

## 需要它自己的线路吗？

```
### jshint eqnull: true, eqeqeq: false ###
### break after hint ###
alert "regular coffee script here..." 
```

## 编译为...

```
/* jshint eqnull: true, eqeqeq: false */
/* break after hint */alert("regular coffee script here..."); 
```

# c++ - 查找具有特定数字 (7) 的特定数字的最近数字

> ID：15173713
> 
> 赞同：1
> 
> 时间：2013-03-02T11:04:16.497
> 
> 标签：c++, arrays, numbers, digit

好吧，我必须编写一个程序来找到给定数字 N 的 NEAREST 数字，它恰好具有“K”7。

例如，如果输入是：

```
N K
1773 3 
```

输出：

```
1777 
```

哦，还有一件事是 N 可以是 100 000 000 000 000 最大值，将足够长的时间来处理这个？

到目前为止我的代码不起作用:(

```
#include <iostream>
using namespace std;
int main()
{
    unsigned long long a, i;
    int b, num=0, dig, tmp;
    cin>>a>>b;
    i=a+1;
    do
    {
        num=0;
        tmp=i;
        while (tmp>0)
        {
            dig=tmp%10;
            tmp=tmp/10;
            if (dig==7)
            num++;
        }
        i++;
    }
    while(num<b);
    cout<<i-1;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:00:03.393

您的问题不是编程问题，而是数学问题。

让`m = 1+E(log10(N))`，即十进制书写中的位数`N`（通过计算位数可能比使用对数更快）。

设`mK`为`7`in的数量`N`。

设`N'`为输出数。

我看到4个案例：

*   `K >= m`：然后`N' = 7..7`（`K`数字）。
*   `K == mK`: 那么`N' = N`。
*   `K > mK and K < m`: 然后你用 替换所有非`7`数字`7`，从最低有效数字开始。例如：`N = 1 357 975 , K = 4 => N' = 1 357 777`。警告：有一个特殊情况，如果你有一个`8`，例如：`N = 80, N' = 79`。您可以通过使用一个公共前缀来实现这种情况，然后生成一个 all`7`后缀（特殊情况：从前缀中再删除一个并添加`7 9 7 7 ... 7`）。见`special case`代码。
*   `K < mK`: 有两个可能的数字。

    让我们分解`N`：`N = a1 a2 ... ap 7 b1 b2 ... bq`，在哪里

    *   `a1 ... ap`是`p`数字`[0..9]`和
    *   `b1 ... bq`是`q`数字`[0..9] \ {7}`

    让`A = a1 ... ap 6 9 ... 9`和`B = a1 ... ap 8 0 ... 0`（或`q`之后的数字）。那么，。如果两个数字同样接近，则选择取决于您。`6``8``N' = closestToN(A,B)`

*抱歉数学格式不好。* 代码现在可以更容易编写。[这是我的实现](http://ideone.com/8eevEa)：

```
#include <iostream>

unsigned long long getClosestWith7(unsigned long long n, unsigned int k)
{
    // Count number of digits
    unsigned long long tmp = n;
    unsigned int m = 0, mK = 0;
    while(tmp > 0)
    {
        if(tmp % 10 == 7) mK++;
        tmp /= 10;
        m++;
    }

    // Distinct cases
    if(k == mK && n != 0)
        return n;
    else if(k >= m || n == 0) // implicit: k != mK
    {
        unsigned long long r = 0;
        while(k > 0)
        {
            r = 10 * r + 7;
            k--;
        }
        return r;
    }
    else if(k > mK) // implicit: k != mK, k < m
    {
        unsigned long long r = n;
        unsigned long long s = 0;
        m = 0;
        while(mK < k)
        {
            if(r % 10 != 7) mK++;
            r /= 10;
            m++;
        }
        if(r % 10 == 8) // special case
            s = 79 + 100 * (r / 10);
        while(m > 0)
        {
            r = 10 * r + 7;
            if(s != 0 && m > 1) // special case
                s = 10 * s + 7;
            m--;
        }
        return (r < n && n - r < n - s) || (r >= n && r - n < n - s) ? r : s;
    }
    else // implicit : k < mK
    {
        // Generate a and b
        unsigned long long a = n;
        unsigned long long b = 0;
        m = 0;
        while(mK > k)
        {
            if(a % 10 == 7) mK--;
            a /= 10;
            m++;
        }
        b = 10 * a + 8;
        a = 10 * a + 6;
        m--;
        while(m > 0)
        {
            a = 10 * a + 9;
            b = 10 * b + 0;
            m--;
        }

        // Compare (return lowest if equal)
        return n - a <= b - n ? a : b;
    }
}

#define CLOSEST7( N , K ) \
    std::cout << "N = " << N << ", K = " << K << " => N' = " << getClosestWith7(N,K) << "\n"

int main()
{
    CLOSEST7(1773,3);
    CLOSEST7(83,1);
    CLOSEST7(17273,3);
    CLOSEST7(1273679750,6);
    CLOSEST7(1773,1);
    CLOSEST7(83,5);
    CLOSEST7(0,2);
    CLOSEST7(0,0);
} 
```

对于您的问题`long long`：这取决于编译器。通常，这种类型的大小是 64 位，因此您可以存储从 0 到 2^64 - 1（无符号）的数字，即 18 446 744 073 709 551 615，因此在大多数实现中，您的数据范围应该没问题.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:33:52.303

一些问题：

*   `ans=i``i`分几次后记录一些，需要记录原件`i`
*   您只循环 1 个方向，您需要同时检查两个方向
*   循环遍历所有数字基本上太慢了
    *   如果数字是 100 000 000 000 000 且 k = 14，则需要检查 22 222 222 222 223 (100 000 000 000 000-77 777 777 777 777) 个数字，这是不可行的

旁注 - [long long 的最大值为 9223372036854775807](http://www.cplusplus.com/reference/climits/)。

这是一些应该可以工作的伪代码：

```
num = number of 7s in input
if (num == k)
  print input
if (num < k)
  a = input with (k-num) non-7 digits from least significant digit set to 7
    let x = last position set
  b = substring(input, 1, position)
  c = b + 1
  d = b - 1
  ba = concat(b, substring(a, position, end))
  ca = concat(c, substring(a, position, end))
  da = concat(d, substring(a, position, end))
  if (abs(input - ba) <= abs(input - ca) &&
      abs(input - ba) <= abs(input - da))
    print b
  else
  if (abs(input - ca) <= abs(input - ba) &&
      abs(input - ca) <= abs(input - da))
    print c
  else
    print d
if (num > k)
  x = (k-num)th 7 from least significant digit
  a = input with x set to 6 and all less significant digits to 9
  b = input with x set to 8 and all less significant digits to 0
  if (input - a > b - input)
    print b
  else
    print a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:59:54.597

这个算法怎么样？

1.  将数字转换为字符串。

2.  数一数其中有多少个 7。

3.  如果 7 比 K 少，则从最右边到左边的数字一个接一个地变成 7，直到达到 K，然后转到步骤 5。

4.  如果 7 比 K 多，则从最右边到左边的数字只有 7 才一个一个地变成 6，直到达到 K，然后转到步骤 5。

5.  将其转换回整数。

`long long`根据杜克林的回答可以使用。

# python - 为什么会出现 TypeError

> ID：15173715
> 
> 赞同：0
> 
> 时间：2013-03-02T11:04:20.837
> 
> 标签：python, python-3.x

为什么会这样：

```
def p3(x):
        primes = [2]
        for a in range(3, x, 2):
            sqrt = a ** 0.5
            for b in range(3, sqrt, 2):
                if a % b == 0:
                    break
            if a % b != 0:
                primes.append(a)
        return primes
    print(p3(19)) 
```

返回这个：

```
TypeError: 'float' object cannot be interpreted as an integer, line 5 
```

这是什么意思，我该如何纠正？
提前致谢，
LewisC

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T11:06:31.070

因为`sqrt`是一个浮点数并且`range`需要严格的整数。

你可能想要这个：

```
for b in range(3, int(sqrt) + 1, 2): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:06:06.473

`sqrt`是类型`float`，因此不能用于`range()`：

```
>>> range(1, 2.0)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'float' object cannot be interpreted as an integer 
```

要修复，请将其转换为整数：

```
sqrt = int(a ** 0.5) 
```

# jquery - 带有css精灵的jQuery背景位置动画不起作用

> ID：15173719
> 
> 赞同：1
> 
> 时间：2013-03-02T11:04:53.340
> 
> 标签：jquery, html, css, css-sprites, background-position

所以我试图为我的导航链接背景设置动画，它是 Css sprite。这张图片：http: [//img689.imageshack.us/img689/2996/menufc.png](http://img689.imageshack.us/img689/2996/menufc.png)

```
$(document).ready(function(){
      $('nav a')

   // On mouse over, move the background on hover

   .mouseover(function(){
 $(this).stop().animate({backgroundPosition: '0px ' +$(this).attr('data-one')+'px';}, 500);
   })

// On mouse out, move the background back

   .mouseout(function(){
  $(this).stop().animate({backgroundPosition: '0px ' +$(this).attr('data-two')+'px';}, 500);
   })
 }); 
```

这是应该做这项工作的 jQuery。另外在这里我有HTML：

```
 <header id="menu">
        <h1>dawe's portfolio</h1>
        <nav>   
            <a id="m_portf" data-one="0" data-two="-37" href="#portfolio">portfolio</a>
            <a id="m_music" data-one="-72" data-two="-111" href="#music">music</a>
            <a id="m_about" data-one="-148" data-two="-185" href="#about">about</a>
            <a id="m_contact" data-one="-222" data-two="-259" href="#contact">contact</a>
        </nav>
    </header> 
```

我不知道问题是什么。我已经尝试过以许多其他方式来做到这一点。我认为这是最接近实际解决方案的一个，我将找到的两种类型的代码放在一起。我想知道问题是否可能是我没有将背景位置定义为绝对、相对等（甚至可能吗？）就我而言，jquery 动画需要定义 iamge 的位置。或者我的代码中可能有任何其他错误。我不知道请帮帮我。这也是我的CSS：

```
#m_portf{
background: #fff url('menu.png')repeat-X 0px -37px;
}
#m_music{
background: #fff url('menu.png')repeat-X 0px -111px;
}
#m_about{
background: #fff url('menu.png')repeat-X 0px -185px;
}
#m_contact{
background: #fff url('menu.png')repeat-X 0px -259px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:49:05.810

对于背景图像位置动画，您需要使用“jquery.backgroundpos.js”您可以从这里下载它[http://keith-wood.name/js/jquery.backgroundpos.js](http://keith-wood.name/js/jquery.backgroundpos.js)

下面的代码像这样工作正常

CSS

```
body{
    background-color:#ccc;  
}
nav a{
    background-image:url(http://img689.imageshack.us/img689/2996/menufc.png);
    display:block;
    width:120px;
    height:22px;
    margin-bottom:10px;
}
#m_portf{
background-position:0 -37px;
}
#m_music{
background-position:0 -111px;
}
#m_about{
background-position:0 -185px;
}
#m_contact{
background-position:0 -259px;
} 
```

jQuery

```
$(document).ready(function(){
$('nav a').hover(
function () {
    $(this).addClass('active');
    $(this).stop().animate({backgroundPosition: '0px ' +$(this).attr('data-one')+'px'}, 500);
},
function () {
    $(this).removeClass('active');
    $(this).stop().animate({backgroundPosition: '0px ' +$(this).attr('data-two')+'px'}, 500);
}
);
}); 
```

html

```
<header id="menu">
<h1>dawe's portfolio</h1>
<nav>   
    <a id="m_portf" data-one="0" data-two="-37" href="#portfolio">portfolio</a>
    <a id="m_music" data-one="-72" data-two="-111" href="#music">music</a>
    <a id="m_about" data-one="-148" data-two="-185" href="#about">about</a>
    <a id="m_contact" data-one="-222" data-two="-259" href="#contact">contact</a>
</nav>
</header> 
```

这是工作文件[链接](http://jsfiddle.net/GSZpH/)

# android - 在 Android 设备上调用以前的布局？

> ID：15173723
> 
> 赞同：1
> 
> 时间：2013-03-02T11:05:22.593
> 
> 标签：android, android-layout

`back`单击平板电脑或手机上的按钮时如何调用先前的布局？

我想调用以前的布局，但是当我单击`back`平板电脑上的按钮时，应用程序完全关闭。然后我需要重新打开应用程序。为什么会这样？

我的代码是：

```
public class MainActivity extends Activity {

private Button girisyap_button;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    girisyap_button = (Button) findViewById(R.id.button_gonder);

    girisyap_button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            setContentView(R.layout.giris_ekrani);

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:19:32.553

您似乎正在同一活动中加载另一个视图。因此，您需要覆盖后退按钮

```
@Override
public void onBackPressed() {
    // load previous layout here
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T10:09:45.183

尝试这个：

@覆盖

```
 public void onClick(View arg0) {

       onBackPressed();

    } 
```

# ruby-on-rails - 如何在 ActiveAdmin 的仪表板中使用自定义查询自定义可排序表

> ID：15173730
> 
> 赞同：1
> 
> 时间：2013-03-02T11:05:41.013
> 
> 标签：ruby-on-rails, activeadmin

假设我有一个 ActiveRecord 查询：

```
User.select('name', 'created_at').all
=> [#<User created_at: "2012-08-06 13:27:40", name: "Alice">, #<User created_at: "2012-08-06 15:41:33", name: "Bill">] 
```

如何按`created_at`列显示具有行跨度的可排序表？

预期的输出html：

```
 <table>
      <tr>
          <th>created_at</th>
          <td>name</td>
      </tr>
      <tr>
          <td>2012-08-06</td>
          <td>Alice</td>
      </tr>
      <tr>
          <td>2012-08-06</td>
          <td>Bill</td>
      </tr>   
  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:09:37.883

您应该阅读文档：[http ://activeadmin.info/docs/3-index-pages/index-as-table.html](http://activeadmin.info/docs/3-index-pages/index-as-table.html)

假设您使用的是最新版本（0.5.1）：

```
index do
  column "created_at", :sortable => :created_at do |user|
    user.created_at.strftime('%Y-%m-%d') # if the format is different that expected
  end
  column "name", :sortable => :name do |user|
    user.name
  end
end 
```

# c - 使用链表实现后缀的中缀

> ID：15173731
> 
> 赞同：1
> 
> 时间：2013-03-02T11:05:52.293
> 
> 标签：c, linked-list, infix-notation, postfix-notation

我一直在尝试调试这个程序很长时间。当我输入表达式`a + b - c`或`a / b + c`第一个运算符的优先级大于或等于第二个运算符时，它可以正常工作。但是对于像`a - b / c`第一个运算符的优先级低于第二个运算符这样的表达式，编译器会抛出一个断点。

```
struct stack
{
    char ele;
    struct stack *next;
};

void push(int);
int pop();
int precedence(char);

struct stack *top = NULL;

int main()
{
    char infix[20], postfix[20];
    int i = 0, j = 0;

    printf("ENTER INFIX EXPRESSION: ");
    gets(infix);

    while(infix[i] != '\0')
    {
        if(isalnum(infix[i]))
            postfix[j++] = infix[i];
        else
        {
            if(top == NULL)
                push(infix[i]);

            else
            {
                while( top != NULL && 
                      (precedence(top->ele) >= precedence(infix[i])) ) 
                    postfix[j++]=pop();
                push(infix[i]);
            }
        }

        ++i;
    }

    while(top != NULL)
        postfix[j++] = pop();

    postfix[j] = '\0';
    puts(postfix);
    getchar();
    return 0;
}

int precedence(char x)
{
    switch(x)
    {
    case '^': return 4;
    case '*':
    case '/': return 3;
    case '+':
    case '-': return 2;

    default: return 0;
    }
}

void push(int x)
{
    int item;
    struct stack *tmp;

    if(top == NULL)
    {
        top = (struct stack *)malloc(sizeof(struct stack));
        top->ele = x;
        top->next = NULL;
    }

    else
    {
        tmp = top;
        top->ele = x;
        top->next = tmp;
    }
}

int pop()
{
    struct stack *tmp;
    int item;

    if(top == NULL)
        puts("EMPTY STACK");

    else if(top->next == NULL)
    {
        tmp = top;
        item = top->ele;
        top = NULL;
        free(tmp);
    }

    else
    {
        tmp = top;
        item = top->ele;
        top = top->next;
        free(tmp);
    }

    return item;
} 
```

关于如何改进我的编码的任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-28T10:14:52.323

```
it works fine for me.

#include<stdio.h>
#include<stdlib.h>
#include<string.h>

struct node
{

char data;
struct node *next;

}*top=NULL,*pstart=NULL;
/*-------------------- insertion in postfix expression linked list -------*/

void insert(char ch)
{
struct node *t,*baby;
    baby=(struct node *)malloc(sizeof(struct node));
    baby->next=NULL;
    baby->data=ch;
    t=pstart;

    if(pstart==NULL)
    {
    pstart=baby;
    }
    else
    {
    while(t->next!=NULL)
    t=t->next;
    t->next=baby;

    }
    //printf(" inserted in list- %c",baby->data);

}

/* --------- push operation ------- */

void push (char symbol)
{

    struct node *p;
    p=(struct node *)malloc(sizeof(struct node));
    p->data=symbol;
    if(top==NULL)
    {
     top=p;
     p->next=NULL;

    }
    else
    {

    p->next=top;
    top=p;

    }
}

char  pop()
{
struct node *x,*y;
char k;
if(top==NULL)
{
    printf("stack underflow\n");
    return 0;

}
else
{
x=top;
top=top->next;
k=x->data;
//printf("node %d is deleted\n",top->data);
free(x);
x=NULL;
return k;

}

}

void displaypost()
{
    struct node *to;
    if(pstart==NULL)
    printf("");
    else`enter code here`
    {
    to=pstart;
    while(to!=NULL)
    {
        printf("%c",to->data);
        to=to->next;

    }

    }

}

/*============== precedence selector ================= */

int precedence(char ch)
{

if(ch=='^')
return (5);
else if(ch=='*' || ch== '/')
return (4);
else if (ch== '+' || ch== '-')
return (3);
else
return (2);
}

/*=================== infix to postfix conversion ================ */

void intopost(char infix[])
{

    int len;
    int index=0;
    char symbol,temp;
    len= strlen(infix);
    //printf("%d",len);
    while(len>index)
    {
        symbol=infix[index];

        switch(symbol)
        {

        case '(':
        push(symbol);
        break;

        case ')':
        temp=pop();
        while(temp!='(')
        {
        insert(temp);
        temp=pop();
        }
        break;

        case '^':
        case '+':
        case '-':
        case '*':
        case '/':
        if(top==NULL)
        {
            push(symbol);
    //      break;

        }
        else
        {
        while(top!=NULL && (precedence(top->data)>=precedence(symbol)))
        {
            temp=pop();
            insert(temp);

        }
        push(symbol);

        }   
        break;
        default:
        insert(symbol);

         }
         index=index+1;

    }
    while(top!=NULL)
    {
    temp=pop();
    insert(temp);

    }
    displaypost();
    return;

}

int main()
{
char infix[50];
system("clear");
printf("enter infix expression: ");
gets(infix);

printf("\n\n equivalent postfix expression is---> ");
intopost(infix);
getchar();
return 0;
}
` 
```

# php - 消息代理和消息队列

> ID：15173733
> 
> 赞同：0
> 
> 时间：2013-03-02T11:06:27.373
> 
> 标签：php, message-queue, messagebroker

我有一个场景，我将消息放入队列并从其他进程获取此消息并执行这些操作。

我有一个用 PHP 编写的网站，我正在读写 Redis，而主数据库是 MySQL。

我不想延迟用户响应时间，所以我使用 Redis。写入 Redis 后，我想将消息放入队列中，然后运行的其他进程将读取它并将事务存储在数据库中。因此，在写入 Redis 时向队列发送消息不是问题，因为这可以在 PHP 中轻松完成，从队列中读取也可以通过在域中运行 PHP 脚本（使用打开的套接字）、cron 等来实现。

我需要知道是否有任何可用的开源软件可以在消息到达后立即从队列中读取消息并触发带有参数的 PHP 脚本。这种机制会很快。

我不确定 PHP 套接字作为域运行的效率，但对于 cron 有一定的延迟。

# c# - 如何检测彼此靠近的两个窗口

> ID：15173740
> 
> 赞同：2
> 
> 时间：2013-03-02T11:07:24.670
> 
> 标签：c#, .net, wpf, oop, mdi

我有一个 MDI 应用程序，它允许用户在屏幕上拖动和移动窗口。我想检测两个窗户何时彼此靠近，但我不确定如何去做。我正在使用 WPF MDI 库来处理 MDI，但是我不确定它是否内置了此功能。

如果不是，解决这个问题的标准方法是什么？

我想做的是 - 在拖动窗口时，不断检查周围窗口的 X 和 Y 坐标，看看它们是否在附近。但是，如果我有很多窗口，这最终可能会导致一些滞后。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:05:45.880

以防万一有人稍后查看这个 - 这是我采取的方法：

我在被拖动的源窗口中添加了一个 DoDragDrop 事件，并将另一个窗口设置为放置目标。它可能特定于我的要求，但最终结果完美！

# mysql - 如何检索触发器中select语句返回的多个值？

> ID：15173741
> 
> 赞同：1
> 
> 时间：2013-03-02T11:07:32.030
> 
> 标签：mysql, sql, triggers, subquery

我在 phpmyadmin 中创建了以下触发器。

```
delimiter |
create trigger active after insert on event
for each row
begin
declare n int;
set n = (select follower_id from follow where circle_id=new.circle_id);
insert into activity (uid, performed_activity_id,activity_type_id) values(new.uid,new.event_id,'1');
insert into notification (sender_id,receiver_id,message)values (new.uid,n,new.title);
end;
| 
```

我在这里遇到的问题是 select 语句返回了更多的一个值。

`ERROR 1242 (21000): Subquery returns more than 1 row`

如何从 select 语句中获取多个值以及如何将它们传递给 insert statemant。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:08:37.300

问题出在这条线上，

```
set n = (select follower_id from follow where circle_id=new.circle_id); 
```

变量只能保存一个值。如果查询结果为*空*或者一个值就可以了，否则会抛出select查询返回多个值的错误信息。

但可以通过添加来解决`LIMIT`，例如

```
set n = (select follower_id from follow where circle_id=new.circle_id LIMIT 1); 
```

**更新 1**

```
delimiter |
create trigger active after insert on event
for each row
begin

    insert into activity (uid, performed_activity_id, activity_type_id) 
    values (new.uid, new.event_id, '1');

    insert into notification (sender_id, receiver_id, message)
    select new.uid, follower_id, new.title
    from   follow 
    where  circle_id=new.circle_id;

end |
delimiter ; 
```

# php - 神秘的 url 重写 apache/php

> ID：15173743
> 
> 赞同：0
> 
> 时间：2013-03-02T11:07:45.483
> 
> 标签：php, apache, rewrite

我在 ubuntu Precise 上有一个普通的 Apache php-fpm 设置。我启用了重写模块，但在 Virtualhost 或目录级别的任何地方都没有重写规则，也没有任何 .htaccess 文件。但是， domain.com/abc 启动 domain.com/abc.php

默认的 apache 或 php 设置中是否有启用此功能的东西。请指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:12:43.427

调用此功能`MultiViews`，您必须禁用它...

`Options -MulviViews`

# javascript - 在 extjs4 如何在另一个函数中调用函数？

> ID：15173744
> 
> 赞同：1
> 
> 时间：2013-03-02T11:07:48.160
> 
> 标签：javascript, extjs, extjs4

我在 Extjs4 中工作，我被困在我想在另一个函数中调用一个函数的地方。

这里我将在成功函数中调用 hideLoginWindow() 函数。

如何在成功函数中调用 hideLoginWindow() 函数。这是我的控制器文件代码

```
Ext.define('Am.controller.sn.UserController',
        {

            extend:'Ext.app.Controller',
            stores:['sn.UserStore','sn.SecurityquestionStore'],
            models:['sn.UserModel','sn.SecurityquestionModel'],
            views:['sn.user.Login','sn.user.Registration','sn.user.ForgetMyKey','sn.user.SecurityQuestion','sn.user.KpLogin'],

            init:function()
            {
                console.log('Initialized Users! This happens before the Application launch function is called'); 
                this.control(
                {
                    'Login button[action=loginAction]':
                    {
                        click:this.authenticateUser
                    },
                    'Login button[action=registerAction]':
                    {
                        click:this.registerUser
                    },
                    'KpLogin button[action=loginAction]':
                    {
                        click:this.authenticateUser 
                    }   
                });//end of this.control    
            },//end of init function    
    authenticateUser:function(button)
    {
        ***// this function is called
        this.temp();***

        var email=this.getUserName().getValue();
        var password=this.getPassword().getValue();
        console.log("Email"+email);
        console.log("Password"+password);
        var check = Ext.ModelManager.create(
        {
            primaryEmail:email,
            password: password,
        }, 'Am.model.sn.UserModel');
        check.save(
        {   
            success: function(record, operation) 
            {

                if(operation.request.scope.reader.jsonData["id"]==1)
                {
                    // Code for geting component
                    alert("you are logged in successfully");

                    **//this function is not called
                    this.hideLoginWindow(); // I tried also hideLoginWindow();**

                }//end of if statement

            },//End of success function
            failure: function(record, operation) 
            {
                console.log("Inside failure function");

            },//End of failure function

        });// End of check save function
        console.log("outside authenticated function");

    },//end of authenticate user function

    //***************************Reusable functions********************
    // this function get called
    temp:function()
    {
        console.log("Temp function called");
    },
    //this function is not get called
    hideLoginWindow:function()
    {
        var obj=Ext.ComponentQuery.query('#loginId');
        console.log("Object name = "+obj[0].id);
        obj[0].hide();
    }
});// End of login controller 
```

当我运行此代码时，我收到错误消息

未捕获的类型错误：对象 [object Object] 没有方法“hideLoginWindow”

如何在成功函数中调用 hideLoginWindow() 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:11:42.270

您需要设置保存回调的范围：

```
check.save({
    scope: this,
    success: function() {}
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:13:09.130

你必须问自己，`this`你的方法调用的意义是什么？因为该调用在另一个函数内部，所以作用域现在在该函数内部，而不是在您的`hideLoginWindow()`方法所在的外部对象中。

最好的办法是`check.save`在调用它之前设置方法的范围......

```
check.save({
    scope: this,
    //...
}); 
```

当您输入函数调用时，这将保留外部对象的范围

# css - table, td, div heigth 100% 不起作用

> ID：15173750
> 
> 赞同：0
> 
> 时间：2013-03-02T11:08:43.723
> 
> 标签：css, height

我的布局有问题。我想要 3 列：第一列和最后一列小于中央列。

这是 jsfiddle 示例：http: [//jsfiddle.net/CL333/](http://jsfiddle.net/CL333/)

我有这个 HTML

```
 <body>
<div id="container">
    <table>
        <tr>
            <td id="sinistra">
                <div id="divsinistra">sinistra</div>
            <td id="centro"><div id="divcentro">centro</div>
            <td id="destra"><div id="divdestra">destra</div>
    </table>
</div>
</body> 
```

这个CSS

```
 html{
height: 100%;
 }
body{
height: 100%;
 }

 #container{
min-height: 100%;
width: 100%;    
 }
 #sinistra{
min-height: 100%;
width: 20%;
border: 1px solid red;
 }
 #centro{
min-height: 100%;
border: 1px solid red;
 }
 #destra{
min-height: 100%;
width: 20%;
border: 1px solid red;
 }
 table, table tr{
width: 100%;
min-height: 100%;
 }
 #divsinistra,#divcentro,#divdestra{
min-height: 100%;
 } 
```

问题是我希望这些列适合页面的整个高度，而以这种方式它们非常小。我不知道还有什么地方可以将另一个高度 100% :( 有人可以帮助我吗？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:13:23.927

你错误地引用了你的标签

```
html{
    height: 100%;
}
body{
    height: 100%;
} 
```

并且表格不适用于最小高度。

```
#container{
    height: 100%;
    width: 100%;    
} 
```

**[看一下这个](http://jsfiddle.net/CL333/1/)**

**编辑** 我也忘了提到你的 html 标签没有正确关闭。

```
<table>
            <tr>
                <td id="sinistra">
                    <div id="divsinistra">sinistra</div>
                </td>
                <td id="centro"><div id="divcentro">centro</div></td>
                <td id="destra"><div id="divdestra">destra</div></td>
            </tr>
        </table> 
```

# cordova - 从 AppleStore 更新 iOS Phonegap 应用程序并保留以前的用户持久数据

> ID：15173755
> 
> 赞同：3
> 
> 时间：2013-03-02T11:09:01.490
> 
> 标签：cordova, updates

您好，我是 iOS 和 Phonegap 开发新手。我已经尝试使用 Xcode 进行 PhoneGap 进行测试，并且我将构建我的第一个应用程序，该应用程序将进入应用商店。

我的问题是，在我的应用程序中，用户会做一些事情并拥有自己的数据（文件和/或数据库本地存储）。我想确保创建正确的架构，以便能够在不进化的情况下更新我的应用程序，但保留用户数据。如果在我的更新后用户丢失了他们的数据，那将是一场大戏。

通过阅读这个[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html#//apple_ref/doc/uid/TP40007072-CH8-SW10](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html#//apple_ref/doc/uid/TP40007072-CH8-SW10) 和这个[http:// /docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileWriter](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileWriter) ，我想我可以使文件适用于文件，但是如何...

那么本地存储和数据库呢？

如果您有代码示例，那就太好了。问候，

# c# - 编辑数据网格中当前选定的项目

> ID：15173762
> 
> 赞同：3
> 
> 时间：2013-03-02T11:09:52.840
> 
> 标签：c#, mvvm, binding, datagrid

嘿，

我正在使用 MVVM 创建简单的应用程序，并偶然发现了一个我发现难以解决的问题。在我的应用程序中，我有数据网格和几个控件来编辑数据网格中当前选定的项目。在我的 ViewModel 中，我有`CurrentSequence`持有`ColorSettingsSequencesSequence`对象的属性（这些对象的集合用作数据网格的 DataContext）。

这是xml：

```
<DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Path=ColorSettingsSequences}"
                  SelectedItem="{Binding Path=CurrentSequence, Mode=TwoWay}">
    .... more things here ...
</DataGrid>

<StackPanel Grid.Column="0" Grid.Row="0">
    <Grid>
        <Label Content="Start temperature (°C)" Height="28" HorizontalAlignment="Left" x:Name="lblSeqStartTemp" VerticalAlignment="Top" />
        <TextBox Height="23" Margin="0,28,10,0" x:Name="tbSeqStartTemp" VerticalAlignment="Top" Text="{Binding Path=CurrentSequence.StartTemp}" />
    </Grid>
    <Grid>
        <Label Content="Start color" Height="28" HorizontalAlignment="Left" x:Name="lblSeqHue" VerticalAlignment="Top" />
        <xctk:ColorPicker Margin="0,28,10,0" x:Name="clrpSeqHue" SelectedColor="{Binding Path=CurrentSequence.StartHue, Converter={StaticResource hueToColor}, ConverterParameter=False}" ShowStandardColors="False" />
    </Grid>
</StackPanel>
<StackPanel Grid.Column="1" Grid.Row="0">
    <Grid>
        <Label Content="End temperature (°C)" Height="28" HorizontalAlignment="Left" x:Name="lblSeqEndTemp" VerticalAlignment="Top" />
        <TextBox Height="23" Margin="0,28,10,0" x:Name="tbSeqEndTemp" VerticalAlignment="Top" Text="{Binding Path=CurrentSequence.EndTemp}" />
    </Grid>
    <Grid>
        <Label Content="End color" Height="28" HorizontalAlignment="Left" x:Name="lblSeqEndHue" VerticalAlignment="Top" />
        <xctk:ColorPicker Margin="0,28,10,0" x:Name="clrpSeqEndHue" SelectedColor="{Binding Path=CurrentSequence.EndHue, Converter={StaticResource hueToColor}, ConverterParameter=False}" ShowStandardColors="False" />
    </Grid>
</StackPanel> 
```

代码：

```
private ColorSettingsSequencesSequence _currentSequence;
public ColorSettingsSequencesSequence CurrentSequence
{
    get
    {
        return this._currentSequence;
    }
    set
    {
        this._currentSequence = value;
        OnPropertyChanged("CurrentSequence");
    }
} 
```

这很好用，但是当我想添加验证时问题就来了。我想分别验证`StartTemp`并`EndTemp`给出不同的错误。如果我编辑一个值，它也会在数据网格中更新，我将如何分解`ColorSettingsSequencesSequence`对象以便绑定也能正常工作？

这是我尝试过的，我创建了 2 个新属性并将我的验证添加到这些属性中：

```
private String _currentSequenceStartTemp;
public String CurrentSequenceStartTemp
{
    get
    {
        return _currentSequenceStartTemp;
    }
    set
    {
        this._currentSequenceStartTemp = value;
        CurrentSequence.StartTemp = value;
        RaisePropertyChanged("CurrentSequenceStartTemp");
        Validator.Validate(() => CurrentSequenceStartTemp);
        ValidateCommand.Execute(null);
    }
}

private String _currentSequenceEndTemp;
public String CurrentSequenceEndTemp
{
    get
    {
        return _currentSequenceEndTemp;
    }
    set
    {
        this._currentSequenceEndTemp = value;
        CurrentSequence.EndTemp = value;
        RaisePropertyChanged("CurrentSequenceEndTemp");
        Validator.Validate(() => CurrentSequenceEndTemp);
        ValidateCommand.Execute(null);
    }
} 
```

我只是将 TextBoxes 绑定到这些值，而不是将它们直接绑定到`CurrentSequence`. 我还添加了在设置器中设置 CurrentSequence 值，并希望这样我的更改将一直推回原始集合并在数据网格中进行更改。那没有发生..当 CurrentSequence 改变时，我也改变了这些属性的值：

```
private ColorSettingsSequencesSequence _currentSequence;
public ColorSettingsSequencesSequence CurrentSequence
{
    get
    {
        return this._currentSequence;
    }
    set
    {
        this._currentSequence = value;
        RaisePropertyChanged("CurrentSequence");
        if (value != null)
        {
            CurrentSequenceStartTemp = value.StartTemp;
            CurrentSequenceEndTemp = value.EndTemp;
        }
        else
        {
            CurrentSequenceStartTemp = String.Empty;
            CurrentSequenceEndTemp = String.Empty;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:28:25.940

如果我理解正确，您的问题是即使验证失败，您也想提交您的属性值。如果我在这个假设中错了，解决方案会更简单，基本上是他的评论中暗示的，你只需要`INotifyPropertyChanged`在你的`ColorSettingsSequencesSequence`班级中实现。

我无法从你的帖子中推断出你采用了什么样的验证，但我会这样做。即使文本框中的验证失败，更新数据网格的关键是（以及规则的实现）的`ValidationStep="UpdatedValue"`一部分。`ValidationRule`

![演示验证](../Images/0d6925705992e55d7232b7e70cf41d02.png)

看法：

```
<UserControl x:Class="WpfApplication1.DemoValidation"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                 xmlns:local="clr-namespace:WpfApplication1"
                 mc:Ignorable="d" 
                 d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.DataContext>
        <local:DemoValidationViewModel />
    </UserControl.DataContext>

    <UserControl.Resources>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Validation.ErrorTemplate">
                <Setter.Value>
                    <ControlTemplate>
                        <StackPanel>
                            <Border BorderBrush="Red" BorderThickness="1">
                                <AdornedElementPlaceholder Name="ph" />
                            </Border>
                            <Border BorderBrush="LightGray" BorderThickness="1" Background="Beige">
                                <TextBlock Foreground="Red" FontSize="12" Margin="5"
                                           Text="{Binding ElementName=ph, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                                </TextBlock>
                            </Border>
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="10" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Grid.Row="0">
            <Label Content="Start temperature (°C)" Height="28" HorizontalAlignment="Left" x:Name="lblSeqStartTemp" VerticalAlignment="Top" />
            <TextBox Height="23" x:Name="tbSeqStartTemp" VerticalAlignment="Top" >
                <TextBox.Text>
                    <Binding Path="CurrentSequence.StartTemp" UpdateSourceTrigger="PropertyChanged">
                        <Binding.ValidationRules>
                            <local:TempValidationRule MaximumTemp="400" MinimumTemp="-100" ValidationStep="UpdatedValue" />
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>
        </StackPanel>
        <StackPanel Grid.Column="2" Grid.Row="0">
            <Label Content="End temperature (°C)" Height="28" HorizontalAlignment="Left" x:Name="lblSeqEndTemp" VerticalAlignment="Top" />
            <TextBox Height="23" x:Name="tbSeqEndTemp" VerticalAlignment="Top" >
                <TextBox.Text>
                    <Binding Path="CurrentSequence.EndTemp" UpdateSourceTrigger="PropertyChanged" >
                        <Binding.ValidationRules>
                            <local:TempValidationRule MaximumTemp="500" MinimumTemp="100" ValidationStep="UpdatedValue" />
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>
        </StackPanel>

        <DataGrid Grid.Row="2" Grid.ColumnSpan="3" Margin="0,10,0,0"
                      ItemsSource="{Binding Path=ColorSettingsSequences}"
                      SelectedItem="{Binding Path=CurrentSequence, Mode=TwoWay}" />

    </Grid>
</UserControl> 
```

视图模型：

```
public class DemoValidationViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private ColorSettingsSequencesSequence _currentSequence;
    public ColorSettingsSequencesSequence CurrentSequence
    {
        get { return this._currentSequence; }
        set
        {
            this._currentSequence = value;
            OnPropertyChanged("CurrentSequence");
        }
    }

    public List<ColorSettingsSequencesSequence> ColorSettingsSequences { get; private set; }

    public DemoValidationViewModel()
    {
        // dummy data
        this.ColorSettingsSequences = new List<ColorSettingsSequencesSequence>()
        {
            new ColorSettingsSequencesSequence() { StartTemp = "10", EndTemp = "20" },
            new ColorSettingsSequencesSequence() { StartTemp = "20", EndTemp = "30" },
            new ColorSettingsSequencesSequence() { StartTemp = "30", EndTemp = "40" }
        };
    }

} 
```

ColorSettingsSequencesSequence：

```
public class ColorSettingsSequencesSequence : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private string _startTemp;
    public string StartTemp { get { return _startTemp; } set { _startTemp = value; OnPropertyChanged("StartTemp");}}

    private string _endTemp;
    public string EndTemp { get { return _endTemp; } set { _endTemp = value; OnPropertyChanged("EndTemp"); } }
} 
```

ValidationRule（另见此[线程](https://stackoverflow.com/questions/10342715/validationrule-with-validationstep-updatedvalue-is-called-with-bindingexpressi/15275781#15275781)）：

```
public class TempValidationRule : ValidationRule
{
    // default values
    private int _minimumTemp = -273;
    private int _maximumTemp = 2500;

    public int MinimumTemp
    {
        get { return _minimumTemp; }
        set { _minimumTemp = value; }
    }

    public int MaximumTemp
    {
        get { return _maximumTemp; }
        set { _maximumTemp = value; }
    }

    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        string error = null;
        string s = GetBoundValue(value) as string;

        if (!string.IsNullOrEmpty(s))
        {
            int temp;
            if (!int.TryParse(s, out temp))
                error = "No valid integer";
            else if (temp > this.MaximumTemp)
                error = string.Format("Temperature too high. Maximum is {0}.", this.MaximumTemp);
            else if (temp < this.MinimumTemp)
                error = string.Format("Temperature too low. Minimum is {0}.", this.MinimumTemp);
        }

        return new ValidationResult(string.IsNullOrEmpty(error), error);

    }

    private object GetBoundValue(object value)
    {
        if (value is BindingExpression)
        {
            // ValidationStep was UpdatedValue or CommittedValue (validate after setting)
            // Need to pull the value out of the BindingExpression.
            BindingExpression binding = (BindingExpression)value;

            // Get the bound object and name of the property
            string resolvedPropertyName = binding.GetType().GetProperty("ResolvedSourcePropertyName", BindingFlags.Public | BindingFlags.DeclaredOnly | BindingFlags.Instance).GetValue(binding, null).ToString();
            object resolvedSource = binding.GetType().GetProperty("ResolvedSource", BindingFlags.Public | BindingFlags.DeclaredOnly | BindingFlags.Instance).GetValue(binding, null);

            // Extract the value of the property
            object propertyValue = resolvedSource.GetType().GetProperty(resolvedPropertyName).GetValue(resolvedSource, null);

            return propertyValue;
        }
        else
        {
            return value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:08:31.330

我已经重现了你的问题。但我`couldn't find`有什么问题。一切正常。

*   `StartTemp`单独验证`EndTemp`。
*   如果更新了一个值，则数据网格也应更新

所以我在我的项目中解决了以上两个问题。

结果

![在此处输入图像描述](../Images/9f6fa3f73fca8a2c2c05e5da34d021bf.png)

将起始温度更改为 40 后，数据网格值也已更改。

![在此处输入图像描述](../Images/470892590478aed1d92ac8433c183965.png)

让我们在开始温度文本框中创建一个错误。

![在此处输入图像描述](../Images/12b6e491cccd0b2e49d1a26c124463c2.png)

现在另一个

![在此处输入图像描述](../Images/cb47869cbef7b4d88c13194ab2fa77cb.png)

您现在可以看到这两个属性都是单独验证的。

这是我创建的项目。

项目结构

![在此处输入图像描述](../Images/95523c33987bf11f5cd382086687fdf5.png)

ViewModelBase 类

```
public class ViewModelBase : INotifyPropertyChanged
{
    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
    }

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs args)
    {
        var handler = PropertyChanged;
        if (handler != null)
            handler(this, args);
    }

    #endregion
} 
```

ColorSettingsSequencesSequence 类

```
public class ColorSettingsSequencesSequence : ViewModelBase, IDataErrorInfo
{
    #region Declarations

    private string startColor;
    private string startTemperature;
    private string endTemperature;

    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets the start color.
    /// </summary>
    /// <value>
    /// The start color.
    /// </value>
    public string StartColor
    {
        get
        {
            return this.startColor;
        }
        set
        {
            this.startColor = value;
            OnPropertyChanged("StartColor");
        }
    }

    /// <summary>
    /// Gets or sets the start temperature.
    /// </summary>
    /// <value>
    /// The start temperature.
    /// </value>
    public string StartTemperature
    {
        get
        {
            return this.startTemperature;
        }
        set
        {
            this.startTemperature = value;
            OnPropertyChanged("StartTemperature");
        }
    }

    /// <summary>
    /// Gets or sets the end temperature.
    /// </summary>
    /// <value>
    /// The end temperature.
    /// </value>
    public string EndTemperature
    {
        get
        {
            return this.endTemperature;
        }
        set
        {
            this.endTemperature = value;
            OnPropertyChanged("EndTemperature");
        }
    }

    #endregion

    /// <summary>
    /// Gets an error message indicating what is wrong with this object.
    /// </summary>
    /// <returns>An error message indicating what is wrong with this object. The default is an empty string ("").</returns>
    public string Error 
    {
        get 
        {
            return "";
        } 
    }

    /// <summary>
    /// Gets the error message for the property with the given name.
    /// </summary>
    /// <param name="columnName">Name of the column.</param>
    /// <returns></returns>
    public string this[string columnName]
    {
        get 
        {
            if (columnName.Equals("StartTemperature"))
            {
                if (string.IsNullOrEmpty(this.StartTemperature))
                {
                    return "Please enter a start temperature";
                }
            }

            if (columnName.Equals("EndTemperature"))
            {
                if (string.IsNullOrEmpty(this.EndTemperature))
                {
                    return "Please enter a end temperature";
                }
            }

            return "";
        }
    }
} 
```

主视图模型

```
public class MainViewModel : ViewModelBase
{
    #region Declarations

    private ColorSettingsSequencesSequence currentSequence;
    private ObservableCollection<ColorSettingsSequencesSequence> colorSettingsSequences;

    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets the current sequence.
    /// </summary>
    /// <value>
    /// The current sequence.
    /// </value>
    public ColorSettingsSequencesSequence CurrentSequence
    {
        get
        {
            return this.currentSequence;
        }
        set
        {
            this.currentSequence = value;
            OnPropertyChanged("CurrentSequence");
        }
    }

    /// <summary>
    /// Gets or sets the color settings sequences.
    /// </summary>
    /// <value>
    /// The color settings sequences.
    /// </value>
    public ObservableCollection<ColorSettingsSequencesSequence> ColorSettingsSequences
    {
        get
        {
            return this.colorSettingsSequences;
        }
        set
        {
            this.colorSettingsSequences = value;
            OnPropertyChanged("ColorSettingsSequences");
        }
    }

    #endregion

    #region Commands

    #endregion

    #region Constructors

    /// <summary>
    /// Initializes a new instance of the <see cref="MainViewModel" /> class.
    /// </summary>
    public MainViewModel()
    {
        this.ColorSettingsSequences = new ObservableCollection<ColorSettingsSequencesSequence>();

        ColorSettingsSequencesSequence sequence1 = new ColorSettingsSequencesSequence();
        sequence1.StartColor = "Blue";
        sequence1.StartTemperature = "10";
        sequence1.EndTemperature = "50";
        ColorSettingsSequences.Add(sequence1);

        ColorSettingsSequencesSequence sequence2 = new ColorSettingsSequencesSequence();
        sequence2.StartColor = "Red";
        sequence2.StartTemperature = "20";
        sequence2.EndTemperature = "60";
        ColorSettingsSequences.Add(sequence2);

        ColorSettingsSequencesSequence sequence3 = new ColorSettingsSequencesSequence();
        sequence3.StartColor = "Yellow";
        sequence3.StartTemperature = "30";
        sequence3.EndTemperature = "70";
        ColorSettingsSequences.Add(sequence3);

        this.CurrentSequence = sequence1;

    }

    #endregion

    #region Private Methods

    #endregion
} 
```

MainWindow.xaml (XAML)

```
<Window x:Class="DataGridValidation.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" 
        Height="350"
        Width="525">

    <Window.Resources>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip"
                        Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                        Path=(Validation.Errors)[0].ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Name="mainGrid">

        <Grid.RowDefinitions>
            <RowDefinition Height="149" />
            <RowDefinition Height="73" />
            <RowDefinition Height="123" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="249*" />
        </Grid.ColumnDefinitions>

        <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding ColorSettingsSequences}"
                  SelectedItem="{Binding CurrentSequence}"
                  IsReadOnly="True">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Start Color" Binding="{Binding StartColor}" />
                <DataGridTextColumn Header="End Color" Binding="{Binding StartTemperature}" />
                <DataGridTextColumn Header="End Color" Binding="{Binding EndTemperature}" />
            </DataGrid.Columns>

        </DataGrid>

        <StackPanel Grid.Column="0" Grid.Row="1">
            <Grid>
                <Label Content="Start temperature (°C)" 
                       Height="28" 
                       HorizontalAlignment="Left" 
                       x:Name="lblSeqStartTemp" 
                       VerticalAlignment="Top" />
                <TextBox Height="23" 
                         Margin="10,28,10,0" 
                         x:Name="tbSeqStartTemp" 
                         VerticalAlignment="Top" 
                         Text="{Binding Path=CurrentSequence.StartTemperature, ValidatesOnDataErrors=True, NotifyOnValidationError=True}"/>
            </Grid>
        </StackPanel>
        <StackPanel Grid.Row="2" Margin="0,0,0,43">
            <Grid>
                <Label Content="End temperature (°C)" 
                       HorizontalAlignment="Left"  
                       VerticalAlignment="Top" />
                <TextBox Height="23" 
                         Margin="10,28,10,0" 
                         x:Name="tbSeqEndTemp" 
                         VerticalAlignment="Top" 
                         Text="{Binding Path=CurrentSequence.EndTemperature, ValidatesOnDataErrors=True, NotifyOnValidationError=True}"/>
            </Grid>
        </StackPanel>
    </Grid>
</Window> 
```

MainWindow.xaml.cs（文件隐藏代码）

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        mainGrid.DataContext = new MainViewModel();
    }
} 
```

# php - 在我的网页中获取IP地址（192.168.XX，由无线路由器分配）？

> ID：15173764
> 
> 赞同：4
> 
> 时间：2013-03-02T11:10:05.857
> 
> 标签：php, javascript, jquery, html, web

如何在我的网页中获取内部 IP 地址？可以是用于设计网站的任何语言（javascript、php 等）。我实际上需要做的是制作一个本地Web服务器，并让同一wifi网络中的客户端通过网页上显示的IP地址（192.168.XX）进行连接。但我总是在 php 中得到 127.0.0.1 而不是 192.168.XX，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T19:27:06.703

我通过以下代码解决，获取无线本地IP地址（192.168.XX）：

```
$myIP = gethostbyname(trim(`hostname`)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T20:16:33.867

```
// PHP < 5.3.0
$Local_IP = @gethostbyname(php_uname('n'));

// PHP >= 5.3.0
$Local_IP = @gethostbyname(getHostName()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-02T13:56:42.683

你只需要阅读它

```
$ip = $_SERVER['SERVER_ADDR']; 
```

如果您想知道 $_SERVER 中可用的所有数据，请使用：

```
print("<pre>\n");
print_r($_SERVER);
print("\n</pre>\n"); 
```

$_SERVER 包含很多有用的信息。您可能还想检查：

```
$_SERVER['LOCAL_ADDR'] 
```

# c# - .Show() 后模态弹出扩展器自动关闭

> ID：15173766
> 
> 赞同：3
> 
> 时间：2013-03-02T11:10:20.760
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit

我正在使用来自 AjaxToolkit 的 ModalPopupExtender 用于 asp.net。我正在尝试使用不同的按钮触发 ModalPopupExtender。问题是，除非我使用 TargetControlID，否则弹出窗口会在一秒钟内打开并快速关闭。我需要这个弹出窗口可以通过几个不同的按钮访问，每次都使用同一个面板。

下面的代码应该很好地复制了这个问题，在我的实际应用程序中它几乎可以正常工作。甚至内容正在使用弹出窗口的选定面板进行更新，除了当我从 OnClientClick 调用 .show() 时它在大约 1/2 秒后关闭；

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title>Untitled Page</title>
<script language="javascript" type="text/javascript">
    //Function to Hide ModalPopUp
    function Hidepopup() {
        $find('AjaxPopupHi').hide();
    }
    //Function to Show ModalPopUp
    function Showpopup() {
        $find('AjaxPopupHi').show();
    }

</script>

</head>

<form id="form1" runat="server">

<asp:LinkButton ID="lnk" OnClientClick = "Showpopup()" runat="server" Text="hi"></asp:LinkButton>

<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<br />

<asp:Button ID="Button_dummy" Style="display: none" runat="server" Text="Button" />

<ajaxToolKit:ModalPopupExtender ID="mpe" runat="server" BehaviorID="AjaxPopupHi" TargetControlID="Button_dummy" PopupControlID="pnl"
    CancelControlID="close" />

<!--BELOW panel does not remain OPEN :/-->
<asp:Panel ID="pnl" runat="server" CssClass="popupPanel">
    <div>
        Hi!!!
    </div>
    <asp:Button ID="close" runat="server" Text="Close" />
</asp:Panel>

 </form> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T11:13:01.363

你可以这样使用

```
OnClientClick = "return Showpopup()"

function Showpopup() {
    $find('AjaxPopupHi').show();
    return false;
} 
```

您必须在`OnClientClick`组合代码时使用 return

```
<asp:LinkButton ID="lnk" OnClientClick = "return Showpopup()" runat="server" Text="hi">  
</asp:LinkButton> 
```

你的javascript函数应该像

```
function Showpopup() {
    $find('AjaxPopupHi').show();
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-25T20:40:57.943

现在很晚了，但希望这对正在寻找答案的人有所帮助。
单击时，会发生回发并重新加载页面。如果您使用`updatepanel`，那么您的弹出消息将在页面加载后保留。请参阅下面的示例：

**象素：**

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %>

<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Popup.aspx.cs" Inherits="Popup_example_Popup" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript">

        //Function to Hide ModalPopUp
        function Hidepopup() {
            $find('AjaxPopupHi').hide();
        }
        //Function to Show ModalPopUp
        function Showpopup() {
            $find('AjaxPopupHi').show();
        }

    </script>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>

        <asp:UpdatePanel ID="udpOutterUpdatePanel" runat="server">
            <ContentTemplate>

                <asp:LinkButton ID="lnk" OnClientClick="Showpopup()" runat="server" Text="hi"></asp:LinkButton>

            </ContentTemplate>
        </asp:UpdatePanel>

        <br />

        <asp:Button ID="Button_dummy" Style="display: none" runat="server" Text="Button" />
        <ajaxToolkit:ModalPopupExtender ID="mpe" runat="server" BehaviorID="AjaxPopupHi" TargetControlID="Button_dummy" PopupControlID="pnl"
            CancelControlID="close" />

        <asp:Panel ID="pnl" runat="server" CssClass="popupPanel">
            <div>
                Hi!!!
            </div>

            <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>

                    <asp:Button ID="close" runat="server" Text="Close" OnClick="close_Click" />

                </ContentTemplate>
            </asp:UpdatePanel>
        </asp:Panel>

    </form>
</body>
</html> 
```

**后面的代码：**

```
using System;

public partial class Popup_example_Popup : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void close_Click(object sender, EventArgs e)
    {
        mpe.Hide();
    }
} 
```

# sql - 如何在 SQL“IN”子句中使用包含 ' 的字符串

> ID：15173773
> 
> 赞同：21
> 
> 时间：2013-03-02T11:11:24.507
> 
> 标签：sql, select

我有一个像'Apple's'这样的字符串值。我想在 SQL“IN”子句中使用这个字符串，如下查询

```
select * from tbl_fruit where nm_fruit IN(''Apple's'','Orange'); 
```

我怎样才能使上述查询正常工作？

非常感谢，Awais Afzal。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-02T11:12:25.143

双引号，

```
select * from tbl_fruit where nm_fruit IN ('Apple''s', 'Orange') 
```

但如果您在应用程序级别执行此操作，请确保将查询参数化`:)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-17T20:31:40.767

我发现 SQL 正确地将 ASCII 单引号 (ALT 0146) 解释为搜索中的撇号，而“IN”将其视为任何其他字符。现在我可以使用 Matt（ASCII 字符 0146）s Macintosh 搜索“Matt's Macintosh”，而不会弄乱我的列表或搜索。

# c# - CLR 中的错 误？CLR 执行引擎失败

> ID：15173774
> 
> 赞同：3
> 
> 时间：2013-03-02T11:11:24.710
> 
> 标签：c#, c#-4.0, clr

AFAIK`try`和`finally`block 用于执行一段可能会抛出一些异常的代码，如果我们准备处理某种类型的异常和/或正在排除它们`exception`，我们也会添加block，比如，或其他东西。但是当我运行这个..`catch``FileIOException``AccessRight`

```
private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            Environment.FailFast("It failed");
        }
        finally
        {
            MessageBox.Show("Done");
        }
    } 
```

它打破了一个例外并说

**检测到 FatalExecutionEngineError
消息：运行时遇到致命错误。错误地址位于线程 0xd04 上的 0x032526f4。错误代码为 0x80131623。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。**

现在[msdn](http://msdn.microsoft.com/en-us/library/zwc8s4fz%28v=vs.110%29.aspx)说

> 通常，当未处理的异常结束应用程序时，finally 块是否运行并不重要。但是，如果即使在这种情况下也必须在 finally 块中运行语句，则一种解决方案是在 try-finally 语句中添加一个 catch 块。

所以，我添加了`catch`块，但它仍然说同样的事情。

```
 private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            Environment.FailFast("It failed");
        }
        catch (Exception ex)
        {

        }
        finally
        {
            MessageBox.Show("Done");
        }
    } 
```

它再次失败并出现同样的错误。至于 CLR 说 finally 中的代码块总是运行（至少在添加 catch 时），肯定不是这样。评论/意见有人吗？

还有截图。。

![在此处输入图像描述](../Images/0f80abc1f6324447df506b065706ce68.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T11:14:33.887

这是设计使然。的目的`Environment.FailFast`是立即停止执行。按照设计，它不会在 catch 或 finally 块中运行任何代码。

[文档](http://msdn.microsoft.com/en-us/library/ms131100.aspx)说：

> 此方法在不运行任何活动的 try/finally 块或终结器的情况下终止进程。
> 
> FailFast 方法将消息字符串写入 Windows 应用程序事件日志，创建应用程序的转储，然后终止当前进程。messa 字符串也包含在向 Microsoft 报告的错误中。
> 
> 如果应用程序的状态已损坏无法修复，则使用 FailFast 方法而不是 Exit 方法来终止应用程序，并且执行应用程序的 try/finally 块和终结器将损坏程序资源。

这清楚地表明 finally 块中的代码不会运行。如果有办法让代码在之后运行，`Environment.FailFast`那将变得`Environment.FailFast`毫无用处。它的存在是基于这样一个事实，即您的代码在您调用它后不会执行。

您指向说明（强调我的）的文档：

> 通常，当一个**未处理的异常结束一个应用程序**时，finally 块是否运行并不重要。但是，如果即使在这种情况下也必须在 finally 块中运行语句，则一种解决方案是在 try-finally 语句中添加一个 catch 块。

但这些话在这里根本不适用。您假设当您调用 时`Environment.FailFast`，未处理的异常会终止应用程序。事实并非如此。该应用程序只是当场终止 - 没有未处理的异常。

# java - 我的算法只找到二维数组中的最长路径

> ID：15173776
> 
> 赞同：0
> 
> 时间：2013-03-02T11:11:27.113
> 
> 标签：java, algorithm, search, path

我有一个学校作业，我的方法需要找到从给定节点开始的每条可能的路径。现在的问题是，我的方法只找到最长的路径，然后停止创建新路径，我似乎无法弄清楚它为什么这样做（可能在 Java 中太缺乏经验）。我正在使用`char[3][3]`该方法需要遍历的数组。基本的想法是可行的，但不是所有的路径。

我写的方法：

```
private void computeAllPaths(Point current, ArrayList<Point> currentFullPath) {

    if (currentFullPath.isEmpty()) {
        currentFullPath.add(current);
    }

    for (Point coord : neighbouringCoords.get(current)) {
        if (!(currentFullPath.contains(coord))) {
            currentFullPath.add(coord);
            if (!(paths.contains(currentFullPath))) {
                paths.add(currentFullPath);
                //start over again with same coord
                computeAllPaths(currentFullPath.get(0), new ArrayList<Point>()); 
            } else {
                //try to add another coord
                computeAllPaths(coord, currentFullPath); 
            }
        }
    }
} 
```

方法调用：

```
computeAllPaths(new Point(0, 0), new ArrayList<Point>()); 
```

声明：

```
private List<ArrayList<Point>> paths = new LinkedList<ArrayList<Point>>(); 
```

3x3 数组的一些输出：

> ```
>  Current paths size: 8
> 
> (0.0,0.0)(1.0,0.0)(0.0,1.0)(0.0,2.0)(1.0,2.0)(2.0,2.0)(2.0,1.0)(2.0,0.0)(1.0,1.0)
> (0.0,0.0)(1.0,0.0)(2.0,0.0)(2.0,1.0)(2.0,2.0)(1.0,2.0)(0.0,2.0)(0.0,1.0)(1.0,1.0)
> (0.0,0.0)(1.0,0.0)(2.0,0.0)(2.0,1.0)(1.0,1.0)(2.0,2.0)(1.0,2.0)(0.0,2.0)(0.0,1.0)
> (0.0,0.0)(1.0,0.0)(2.0,0.0)(2.0,1.0)(2.0,2.0)(1.0,2.0)(0.0,2.0)(0.0,1.0)(1.0,1.0)
> (0.0,0.0)(1.0,0.0)(2.0,0.0)(2.0,1.0)(2.0,2.0)(1.0,2.0)(1.0,1.0)(0.0,2.0)(0.0,1.0)
> (0.0,0.0)(1.0,0.0)(2.0,0.0)(2.0,1.0)(2.0,2.0)(1.0,2.0)(0.0,2.0)(0.0,1.0)(1.0,1.0)
> (0.0,0.0)(1.0,0.0)(2.0,0.0)(2.0,1.0)(2.0,2.0)(1.0,2.0)(0.0,2.0)(0.0,1.0)(1.0,1.0)
> (0.0,0.0)(1.0,0.0)(2.0,0.0)(2.0,1.0)(2.0,2.0)(1.0,2.0)(0.0,2.0)(0.0,1.0)(1.0,1.0) 
> ```

我尝试了许多类型的列表和集合，但似乎没有人在工作，我不知道为什么，有人可以帮我解决这个问题吗？

板子示例：

N | N | A
R | E | TN
| T | ○

允许的动作：假设我们从 R (1,0) 开始，那么允许的动作将是：

*   N(0,0)
*   N(0,1)
*   E(1,1)
*   T(2,1)
*   N(2,0) 所以基本上它是直接邻居。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:29:13.317

所以我自己不是 Java 编码员，但你做的事情很少。

随着`currentFullPath`你添加一个指向它的指针`paths`，你应该添加一个指向它的副本的指针，所以猜猜会发生什么。将其添加到`paths`您之后，您将进一步更改它。基本上要调试它，只需打印出`paths`内部循环的每一遍。此外，如果您不这样做，您应该`currentFullPath`为每个`coord`in创建副本，您最终会将所有邻居添加到同一路径。`neighbouringCoords`

请记住，Java 总是将指针传递给对象。

编辑：我看到仍然有很多废话飞来飞去。试试这个：

```
private void computeAllPaths(Point current, ArrayList<Point> currentFullPath) {

    if (currentFullPath.isEmpty()) {
        currentFullPath.add(current);
    }

    for (Point coord : neighbouringCoords.get(current)) {
        if (!(currentFullPath.contains(coord))) {
            ArrayList<Point> newList = new ArrayList<Point>(currentFullPath);
            newList.add(coord);
            if (!(paths.contains(newList))) {
                paths.add(newList);
                //start over again with same coord
                computeAllPaths(currentFullPath.get(0), new ArrayList<Point>()); 
            } else {
                //try to add another coord
                computeAllPaths(coord, newList); 
            }
        }
    }
} 
```

显示结果。

编辑2：这会快很多。

```
private void computeAllPaths(Point current, ArrayList<Point> currentFullPath) {

    if (currentFullPath.isEmpty()) {
        currentFullPath.add(current);
    }

    for (Point coord : neighbouringCoords.get(current)) {
        if (!(currentFullPath.contains(coord))) {
            ArrayList<Point> newList = new ArrayList<Point>(currentFullPath);
            newList.add(coord);
            paths.add(newList);                           
            computeAllPaths(coord, new ArrayList<Point>(newList));            
        }
    }
} 
```

# cakephp - 如何将视图导入 cakephp 默认布局

> ID：15173781
> 
> 赞同：0
> 
> 时间：2013-03-02T11:12:10.970
> 
> 标签：cakephp

我是 cakephp 新手...我有一个用户添加表单 (add.ctp)，并希望在我的默认布局 (default.ctp) 中显示此表单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:15:09.550

Elements 不是您要找的东西吗？

[http://book.cakephp.org/2.0/en/views.html#elements](http://book.cakephp.org/2.0/en/views.html#elements)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:06:53.700

在您的默认布局中应该有一行：

```
print $this->fetch('content'); 
```

如果此行存在，则 cake 将根据 url 和路由自动包含所需的视图。

# android - 更改 EditText setError 可绘制重力

> ID：15173785
> 
> 赞同：9
> 
> 时间：2013-03-02T11:12:35.117
> 
> 标签：android, android-edittext, right-to-left

对于将填充 RTL 文本的 EditText，有没有办法改变错误可绘制（当然还有弹出）的严重性？

这是常规错误可绘制的示例

![错误绘制永远正确](../Images/6f34e9326b1118a2bc9917765d571830.png)

因此，由于输入的文本是 RTL，我希望弹出窗口显示在 EditText 的左侧

我试图应用自定义 drawable ，但[Drawable](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)似乎没有任何 setGravity 方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:45:37.503

这是不可能的，但您可以扩展 Android TextView 类并更改 Android 用来填充弹出窗口的布局。我自己没有尝试过，但它可以工作。

我快速浏览了 TextView的[源代码并找到了这一行](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/TextView.java)

```
final TextView err = (TextView) inflater.inflate(com.android.internal.R.layout.textview_hint,
                   null); 
```

[对此](https://code.google.com/p/jota-text-editor/source/browse/trunk/res/layout/textview_hint.xml?r=56)布局的引用。

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/popup_inline_error"
    android:textAppearance="?android:attr/textAppearanceSmallInverse"
/> 
```

在这里增加重力可以解决问题。可适用于可绘制对象的类似方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-06-26T06:57:25.650

已经一年多了，但如果它对其他人有帮助，您可以使用：

```
myEdit.setCompoundDrawablesWithIntrinsicBounds(R.drawable.ic_error, 0, 0, 0); 
```

但它会一直存在，直到你删除它

```
myEdit.setCompoundDrawablesWithIntrinsicBounds(0, 0, 0, 0); 
```

# php - UPDATE 查询出错，未更新我的 MySql 数据库

> ID：15173791
> 
> 赞同：0
> 
> 时间：2013-03-02T11:12:56.587
> 
> 标签：php, html, mysql

我正在尝试将一组数据传递给更新查询，以更新客户记录。但是由于某种原因， ?success 页面显示我的详细信息已更新，但事实并非如此。如果我调试并回显

```
echo implode(', ', $update);
die(); 
```

我得到结果

> `mem_first_name`='乔希'，`mem_last_name`='史密斯'，`mem_email`='j.smith@gmail.com'，`allow_email`='0'

这对我来说看起来不错。这是我的 update_user 函数

```
function update_user($mem_id, $update_data) {
$update = array();
array_walk($update_data, 'array_sanitize');

foreach ($update_data as $field=>$data) {
    $update[] = '`' . $field . '` = \'' . $data . '\'';
}

mysql_query("UPDATE `members` SET " . implode(', ', $update) . " WHERE `mem_id` = '$mem_id'") or die(mysql_error());
} 
```

还有我的 $update_data 数组

```
if (isset($_GET['success']) === true && empty($_GET['success']) === true) {
$message = 'Your details have been updated';
} else {
if (empty($_POST) === false && empty($errors) === true) {

    $update_data = array(
            'mem_first_name' => $_POST['mem_first_name'],
            'mem_last_name' => $_POST['mem_last_name'],
            'mem_email' => $_POST['mem_email'],
            'allow_email' => ($_POST['allow_email']) ? 1 : 0
    );

    update_user($session_member_id, $update_data);
    header('Location: settings.php?success');
    exit();
} else if (empty($errors) === false) {
    $message = output_errors($errors);
}
} 
```

所以我已经计算出在我内爆后我失去了我的反引号，因此列名没有反引号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:17:51.037

这是某种错字（因此当然不是真正的问题）。
您正在为您的字段添加反引号

```
$update[] = '`' . $field . '`
             ^   here 
```

但是它们在调试时不存在。
因此，您要么运行要么发布错误代码，这使整个问题变得毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:27:42.330

检查与 db 的连接，以及表字段名称的拼写。我认为这段代码没有问题。

# sql-server-2008 - 如何在 DataGridView 中添加 datetimepicker 类型列

> ID：15173797
> 
> 赞同：0
> 
> 时间：2013-03-02T11:13:33.613
> 
> 标签：sql-server-2008, nhibernate, c#-4.0

我有一个表，其中有一个名为“From”的列，该列具有“Date”数据类型。

我想在我的 DataGridView 中添加一列，它可以选择像 datetimepicker 这样的日期。

谁能建议我如何在 DataGridView 中添加 datetimepicker 类型列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:22:12.193

您可以使用 XAML 将 DatePicker 对象或 DateTimePicker（取决于可用的内容）添加到 DataGridView 中。只需将其命名为“dtp_whateverYouLike”，然后在您的代码中使用它。

# c++ - 对 VBO 中的特定三角形使用不同的纹理

> ID：15173798
> 
> 赞同：6
> 
> 时间：2013-03-02T11:13:34.363
> 
> 标签：c++, opengl, textures, shader

我有 9 个由三角形组成的四边形，如下所示：

![在此处输入图像描述](../Images/5ddac0f12d53356a112a5d3885263bb4.png)

我`VBO`用来存储关于它们的数据——它们的位置和纹理坐标。

我的问题是 - 是否可以通过仅使用一个`VBO`和使四边形 5 具有与其他四边形不同的纹理`shader`？：

![在此处输入图像描述](../Images/1c8dee54f2170369c13537383705983b.png)

绿色代表纹理 1，黄色代表纹理 2。

到目前为止，我得到了：

```
GLfloat vertices[] = { 
    // Positions
    0.0f, 0.0f,
    ...

    // Texture coordinates
    0.0f, 0.0f, 
    ...
}; 
```

我正在`VBO`使用该`vertices[]`数组创建，然后绑定我的第一个纹理`m_texture1`（我也可以访问第二个 - `m_texture2`）并调用着色器：

```
glBindTexture(GL_TEXTURE_2D, m_texture1);

glUseProgram(program);

glBindBufferARB(GL_ARRAY_BUFFER_ARB, m_vboId);          // for vertex coordinates
glEnableVertexAttribArray(0);
glEnableVertexAttribArray(1);
glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, 0);                                      // Vertices
glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 0, (void*)(sizeof(GLfloat)*108));           // Texture
glDrawArrays(GL_TRIANGLES, 0, 108);
glDisableVertexAttribArray(0);
glDisableVertexAttribArray(1);

glUseProgram(0); 
```

我的顶点着色器：

```
#version 330

layout (location = 0) in vec4 position;
layout (location = 1) in vec2 texcoord;

out vec2 Texcoord;

void main()
{
    gl_Position = position;
    Texcoord = texcoord;
} 
```

和片段着色器：

```
#version 330

in vec2 Texcoord;

out vec4 outputColor;

uniform sampler2D tex;

void main()
{
    outputColor = texture(tex, Texcoord) * vec4(1.0,1.0,1.0,1.0);
} 
```

所以基本上我在这里只使用一种纹理，因为我不知道如何使用第二种纹理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:39:55.337

您可以使用不同的[纹理图像单元](http://www.opengl.org/wiki/Texture#Texture_image_units)并将它们的值设置为`uniform sampler2D tex`.

您必须调用[glActiveTexture](http://www.opengl.org/wiki/GLAPI/glActiveTexture)并设置纹理图像单元 (GL_TEXTURE0)，绑定绿色纹理，然后将活动纹理设置为 GL_TEXTURE1 并绑定黄色纹理。这样，您的绿色纹理将具有纹理图像单元 id 0 和黄色 1。

您必须将绘图调用分成两部分：一个用于绿色四边形，另一个用于黄色。您必须通过为每次调用设置`uniform sampler2D tex`使用[glUniform1i来设置要使用的纹理。](http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml)最后`glDrawArrays`在您的 VBO 中调用一个三角形子集，指示您在当前调用中绘制的绿色或黄色三角形。

如果您需要绘制的只是示例中的图片，您也可以考虑使用[纹理图集。](http://en.wikipedia.org/wiki/Texture_atlas)在这种情况下，您将在一次调用中映射一个纹理。

# parent - 为什么子类继承父类有错？

> ID：15173799
> 
> 赞同：-1
> 
> 时间：2013-03-02T11:13:36.883
> 
> 标签：parent, subclass, extend

如果继承 TrainCar 这是一个问题。如果继承 GCompoud 那很好。哪里错了？

家长：</p>

```
public class TrainCar extends GCompound{

    public TrainCar(double size){

        engine =  new Engine(size);
        add(engine);
        }
} 
```

子类：</p>

```
public class Engine extends  TrainCar { 

    public Engine (double size){    //if inherit TrainCar that's a problem. 
                                    //if inherit GCompoud that's well.

        GPolygon engine = engine(size);     
        add(engine);
    }
} 
```

Boxcar 继承了 TrainCar，这很好。

在讲义 #31 中：

```
public class Boxcar extends TrainCar {

 public Boxcar(Color color) {
} 
```

[http://www-cs-faculty.stanford.edu/~eroberts/courses/cs106a/handouts/30-graphical-structures.pdf](http://www-cs-faculty.stanford.edu/~eroberts/courses/cs106a/handouts/30-graphical-structures.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:15:39.360

您必须`TrainCar`在 的构造函数中调用构造函数`Engine`。你可以这样做：

```
public Engine (double size) {
     super(size);

    GPolygon engine = engine(size);     
    add(engine);
} 
```

# asp.net - 本地主机的 SSL 证书

> ID：15173803
> 
> 赞同：2
> 
> 时间：2013-03-02T11:14:06.477
> 
> 标签：asp.net, ssl

我想在我的示例 asp.net 应用程序 localhost 中使用来自 geotrust 的 SSL（试用版）。但是当我给出通用名称“localhost”时，geotrust 证书会给出错误“通用名称不包含完全限定的域名。” 那么我应该怎么做才能做到这一点呢？

# java - 需要在请求 XML SOAP 的标头部分添加身份验证详细信息

> ID：15173804
> 
> 赞同：1
> 
> 时间：2013-03-02T11:14:09.080
> 
> 标签：java, web-services, soap, wsdl, client

我想在我的肥皂请求中添加以下身份验证标头：

```
<soap:Header>
<AuthHeader xmlns="abcd">
<UserID>abcd</UserID>
<User_Password> abcd</User_Password>
<CorrespondentID>abcd</CorrespondentID>
</AuthHeader>
</soap:Header> 
```

我正在调用一个需要身份验证的 Web 服务，并且我必须将上述给定的身份验证标头显式设置为请求 XML。

请帮我写java代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:43:20.423

我假设您正在使用 JAX-WS（或兼容库）。您需要编写一个消息处理程序并将其附加到处理程序链。处理程序可以访问消息头并将您的安全令牌插入出站消息中。这是有关如何编写适当的 jax-ws 处理程序的链接。[http://www.intertech.com/Blog/Post/Working-with-Headers-in-JAX-WS-SOAPHandlers.aspx](http://www.intertech.com/Blog/Post/Working-with-Headers-in-JAX-WS-SOAPHandlers.aspx)

编辑：以下链接显示了如何在 JAX-WS Soap 客户端中添加自定义标头。 [http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client](http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client)

希望这对您有所帮助。

# jsp - 从jsp访问servlet中的日期

> ID：15173811
> 
> 赞同：0
> 
> 时间：2013-03-02T11:14:45.617
> 
> 标签：jsp, servlets

我应该将日期类型作为参数从 JSP 发送到 servlet，以便插入 MySQL 数据库。当我使用 Date toDate = new java.sql.Date(format.parse(request.getParameter("to_date")).getTime()); 在 servlet 中，它总是在月份的位置显示 01。我输入日期为 2013-03-03，但它显示为 2013-01-03。请告诉我错误可能出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:03:33.670

我不知道你是如何定义格式的，但它应该是：

```
DateFormat format = new SimpleDateFormat("yyyy-MM-dd"); 
```

SimpleDateFormat 构造函数中的字符串区分大小写。

# excel - 如何使用 SAS 从 Excel 中读取格式不正确的列

> ID：15173814
> 
> 赞同：4
> 
> 时间：2013-03-02T11:15:01.777
> 
> 标签：excel, sas

在发布之前，我尝试了谷歌，但没有太多帮助。

我在列中有一个具有此值的**Excel 文件****`Opened_DT`**：**1448300037,15**。Excel 只显示一堆**######**字符而不是日期。

我已经得到了这个文件，但不知道日期格式应该是什么实际输出。它应该说明在机构开设账户的日期。我需要将此 Excel 列导入`SAS`数据集，但这个字符串让我发疯:(我尝试了一堆转换实用程序和插件，但没有运气。

有人可以告诉我如何使用 SAS 阅读本专栏吗？

这是[我的 Excel 工作簿的示例](http://leteckaposta.cz/192523373)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T12:13:15.837

从您的示例看来，初始数据是错误的：这是 Excel 2007 向我展示的：

![来自 Excel 的屏幕截图](../Images/1eeb9fa96b3c74ac68349a75ae4e974c.png)

确实，实际值太大了`Date`——因为今天的日期序列号是`41335`。请确保您的应用程序计算正确的`Opening_DT`值。

根据[Excel 规范和限制](http://office.microsoft.com/en-001/excel-help/excel-specifications-and-limits-HP010342495.aspx?CTT=5&origin=HP005199291)：

```
Latest date allowed for calculation         December 31, 9999
Largest amount of time that can be entered  9999:59:59 
```

序列号`December 31, 9999`是`2958465`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T19:03:17.763

在我看来，您的 Excel 工作表中的列是使用某种将小数点转换为逗号的技术创建的。引用的示例值 ( **1448300037,15** ) 相当于 SAS 时间戳`22NOV2005:17:33:57.15`。

如果该值是合法的并且您想将其转换为 SAS 数据集，我建议在 Excel 中将该列格式化为 TEXT，将其保存为新工作簿，然后使用 PROC IMPORT 将该新工作簿读入 SAS。然后对结果进行后处理以将该变量重新读取为 SAS 日期时间变量。为了显示：

```
proc import out=have
            datafile="path-to-workbook\workbook.xlsx"
            replace
            dbms=excel;
     sheet="sheetname";
run;

data want;
   set have(rename=(Open_DT=prevOpen_DT));
   format Open_DT datetime21.2;
   Open_DT = input(prevOpen_DT,numx13.2);
   drop prevOpen_DT;
run; 
```

语句中使用的`numx`SAS 信息`input`读取字符变量并将逗号解释为小数点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T09:51:21.413

我假设您所在地区的小数分隔符是逗号，所以 1448300037,15 是一个有效数字......

如果这表示从 1960 年 1 月 1 日开始的秒数，那么在 Excel 中，您可以通过将开始日期（1960 年 1 月 1 日）添加到以天数表示的数字（您可以通过除以一天中的秒数），因此对于 A2 中的数据，请使用此公式

`=DATE(1960,1,1)+A2/86400`

并格式化为日期/时间，例如`dd.mm.yyyy hh:mm`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T11:17:10.743

使列宽更宽。如果数据不合适，Excel 有时会显示哈希值。

# ios - 将 Dropbox 集成到 ios 应用程序中，但没有登录弹出窗口

> ID：15173815
> 
> 赞同：0
> 
> 时间：2013-03-02T11:15:13.813
> 
> 标签：ios, dropbox, dropbox-api

我想将 Dropbox 集成到我的应用中。我使用 Dropbox 文档和示例代码制作了一个示例。

但问题是，我不想打开登录弹出窗口。那么有什么方法可以让我无需登录就可以使用保管箱，或者在某些地方我可以设置默认登录 ID 密码并自动登录。这样我就可以直接使用Dropbox了。

谢谢，

哈迪克·沙阿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:52:43.277

好吧，您可以将文件放在 Dropbox 中，然后共享它们并使用共享的 URL 作为调用资源。我们实际上是为我们的一些开发人员[博客资产](https://www.dropbox.com/developers/blog)这样做的。希望有帮助。小心不要移动文件，否则链接会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T23:36:10.453

我使用了 DropBox Core API 并生成了访问令牌。这对我来说很好。

```
NSString *surl = @"https://api.dropbox.com/1/metadata/dropbox/";

NSURL *url = [[NSURL alloc] initWithString:surl];
NSMutableURLRequest *req = [[NSMutableURLRequest alloc] initWithURL:url];

[req setValue:[self getAuth] forHTTPHeaderField:@"Authorization"];

NSURLSessionConfiguration *config = [NSURLSessionConfiguration ephemeralSessionConfiguration];
[config setHTTPAdditionalHeaders:@{@"Authorization": @"Bearer xxxxxxxxxxxxxxxxxxxx"}];  // replace xs with you access token

NSURLConnection *conn = [[NSURLConnection alloc]initWithRequest:req delegate:self]; 
```

当然你需要处理 NSURLConnectionDelegate 协议

该示例为您提供 Dropbox 帐户根目录下的所有文件和文件夹

# java - java - 如何在Java中的图像上绘制符号（正确或错误）？

> ID：15173817
> 
> 赞同：0
> 
> 时间：2013-03-02T11:15:37.773
> 
> 标签：java, draw, symbols

`Image`如果是的话，我会`JPanel`使用`Paint`方法绘制。之后，我在图像上绘制“Y”和“N”作为字符串。但不是 'Y' 和 'N' ，我想为正确或错误绘制符号（比如错误是 'X'）。那么如何在java中的图像上绘制那种类型的符号呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:18:48.643

您正在寻找的是 Java 中的多层，这是`JLayeredPane`一个教程：

[http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)

另一种方法是绘制叠加图像，这也是一个教程：

[http://sanjaal.com/java/482/java-graphics-2d/java-how-to-overlay-one-image-over-another-using-graphics2d-tutorial/](http://sanjaal.com/java/482/java-graphics-2d/java-how-to-overlay-one-image-over-another-using-graphics2d-tutorial/)

# c++ - c++ 在 Os X 上捕获所有异常失败

> ID：15173822
> 
> 赞同：0
> 
> 时间：2013-03-02T11:16:46.673
> 
> 标签：c++, exception

在我的 ubuntu 32 位计算机下，一切正常。但是当我的朋友尝试下面的代码时，程序被中止，try catch 块失败。这很奇怪，因为它是一个全能块。

osm.h：

```
#ifndef _OSM_H
#define _OSM_H

/* calling a system call that does nothing */
#define OSM_NULLSYSCALL asm volatile( "int $0x80 " : : \
        "a" (0xffffffff) /* no such syscall */, "b" (0), "c" (0), "d" (0) /*:\
        "eax", "ebx", "ecx", "edx"*/)

/* Time measurement function for an empty function call.
   returns time in nano-seconds upon success, 
   and -1 upon failure.
   */
double osm_function_time(unsigned int osm_iterations);

/* Time measurement function for an empty trap into the operating system.
   returns time in nano-seconds upon success, 
   and -1 upon failure.
   */
double osm_syscall_time(unsigned int osm_iterations);

/* Time measurement function for a simple arithmetic operation.
   returns time in nano-seconds upon success,
   and -1 upon failure.
   */
double osm_operation_time(unsigned int osm_iterations);

typedef struct {
    char* machineName;
    int numberOfIterations;
    double instructionTimeNanoSecond;
    double functionTimeNanoSecond; 
    double trapTimeNanoSecond;
    double functionInstructionRatio;
    double trapInstructionRatio;    
} timeMeasurmentStructure;

timeMeasurmentStructure measureTimes (unsigned int numOfIterations);

#endif 
```

osm.cpp

```
#include "osm.h"
#include <cmath>
#include <stdlib.h>
#include <sys/time.h>
#include <unistd.h>
#define SEC_MICROSEC_RATIO 1000000
#define NANOSEC_MICROSEC_RATIO 1000
#define DEFAULT_NUM_ITERATIONS 50000
#define MAX_MACHINE_NAME 30
#define ERR_CODE -1

void dummy_function()
{

}

double osm_function_time(unsigned int osm_iterations)
{
    unsigned int i;
    double elapsed = 0;
    struct timeval timeFirst, timeSecond;

    for (i=0; i<osm_iterations;i++)
    {
        gettimeofday(&timeFirst, NULL);
        dummy_function();
        gettimeofday(&timeSecond, NULL);
        elapsed += (timeSecond.tv_sec-timeFirst.tv_sec)*SEC_MICROSEC_RATIO + timeSecond.tv_usec-timeFirst.tv_usec;
    }

    return (elapsed / osm_iterations) * NANOSEC_MICROSEC_RATIO;
}

double osm_operation_time(unsigned int osm_iterations)
{
    unsigned int i;
    int a=1,b=10;
    double elapsed = 0;
    struct timeval timeFirst, timeSecond;

    for (i=0; i<osm_iterations;i++)
    {
        gettimeofday(&timeFirst, NULL);
        a = a + b;
        gettimeofday(&timeSecond, NULL);
        elapsed += (timeSecond.tv_sec-timeFirst.tv_sec)*SEC_MICROSEC_RATIO + timeSecond.tv_usec-timeFirst.tv_usec;
    }

    return (elapsed / osm_iterations) * NANOSEC_MICROSEC_RATIO;
}

double osm_syscall_time(unsigned int osm_iterations)
{
    unsigned int i;
    double elapsed = 0;
    struct timeval timeFirst, timeSecond;

    for (i=0; i<osm_iterations;i++)
    {
        gettimeofday(&timeFirst, NULL);
        OSM_NULLSYSCALL;
        gettimeofday(&timeSecond, NULL);
        elapsed += (timeSecond.tv_sec-timeFirst.tv_sec)*SEC_MICROSEC_RATIO + timeSecond.tv_usec-timeFirst.tv_usec;
    }

    return (elapsed / osm_iterations) * NANOSEC_MICROSEC_RATIO;
}

timeMeasurmentStructure measureTimes (unsigned int numOfIterations)
{
    if (numOfIterations<=0)
    {
        numOfIterations = DEFAULT_NUM_ITERATIONS;
    }

    timeMeasurmentStructure timer;
    timer.numberOfIterations = numOfIterations;

    // get machine name
    timer.machineName = new char[MAX_MACHINE_NAME];
    try{
        gethostname(timer.machineName,MAX_MACHINE_NAME);
    } catch(...){
        delete [] timer.machineName;
        timer.machineName = NULL;
    }

    try{
        timer.functionTimeNanoSecond = osm_function_time(numOfIterations);
    } catch(...){
        timer.functionTimeNanoSecond = ERR_CODE;
    }

    try{
        timer.instructionTimeNanoSecond = osm_operation_time(numOfIterations);
    } catch(...){
        timer.instructionTimeNanoSecond = ERR_CODE;
    }

    try{
        timer.trapTimeNanoSecond = osm_syscall_time(numOfIterations);
    } catch(...){
        timer.trapTimeNanoSecond = ERR_CODE;
    }

    // trap/instruction
    if((timer.trapInstructionRatio!=ERR_CODE) && (timer.trapTimeNanoSecond!=ERR_CODE))
    {
        timer.trapInstructionRatio = timer.trapTimeNanoSecond / timer.instructionTimeNanoSecond;
    } else
    {
        timer.trapInstructionRatio = ERR_CODE;
    }

    // function/instruction
    if((timer.functionTimeNanoSecond!=ERR_CODE) && (timer.instructionTimeNanoSecond!=ERR_CODE))
    {
        timer.functionInstructionRatio = timer.functionTimeNanoSecond / timer.instructionTimeNanoSecond;
    } else
    {
        timer.functionInstructionRatio = ERR_CODE;
    }

    return timer;
} 
```

主文件

```
#include <iostream>
#include "osm.h"
using namespace std;

int main()
{
    timeMeasurmentStructure timeMe = measureTimes(0);
    if(timeMe.machineName!=NULL)
    {
        cout << "machine name: " << timeMe.machineName << endl;
    }

    cout << "iterations: " << timeMe.numberOfIterations << endl;
    cout << "instruction time: " << timeMe.instructionTimeNanoSecond << endl;
    cout << "function time: " << timeMe.functionTimeNanoSecond << endl;
    cout << "trap time: " << timeMe.trapTimeNanoSecond << endl;
    cout << "function/instruction ratio: " << timeMe.functionInstructionRatio << endl;
    cout << "trap/instruction ratio: " << timeMe.trapInstructionRatio << endl;
    return 0;
} 
```

他被抛出时行：

```
OSM_NULLSYSCALL; 
```

叫做。我知道 SO 不喜欢打印屏幕，但由于我没有 OS X，这是显示它的唯一方法：

![在此处输入图像描述](../Images/a20dca2f506961552f939c410810f4cc.png)

为什么我的 catch 块失败？我该如何解决？

**笔记：**

我根本无法修改 osm.h 文件（作为我们练习的一部分）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:20:25.163

我想您会发现您的代码可以很好地捕获 C++ 异常。

但是，如果您开始搞乱内联汇编，并且您的汇编有缺陷，那么所有的赌注都将失败。

`EXC_BAD_INSTRUCTION`不是 C++ 异常，它表明您的程序做了一些非法的事情。这发生在 C++ 抽象级别之下。

# c# - 如何在单击 asp.net 中的另一个按钮时创建一个按钮？

> ID：15173825
> 
> 赞同：0
> 
> 时间：2013-03-02T11:17:04.073
> 
> 标签：c#, asp.net, .net

我有一个按钮，现在我想要当我单击此按钮然后单击在同一页面上再创建一个按钮时。请详细告诉我应该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:22:18.210

这是如何做到的。

在 aspx 中

```
<asp:Button ID="btnMain" Text="Create New Button" runat="server" 
        onclick="btnMain_Click" /> 
```

在 aspx.cs 中

```
private static int count=0;

protected void btnMain_Click(object sender, EventArgs e)
{
    Button btnNew = new Button();
    btnNew.ID = "btnNew_" + count;
    btnNew.Text = "New Button_" + count;
    Form.Controls.Add(btnNew);
    count++;
} 
```

您可以设置任何容器控件 ID 来代替`this`在该容器内添加按钮。您还可以在此处设置按钮的位置、高度、宽度等。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:22:48.820

您将不得不使用 `page_load`或`page_init` 事件。

```
protected void Page_Load()// it can be any event button click also
{
  Button ButtonChange = new Button();

  ButtonChange.Text = "Change";
  ButtonChange.ID = "change_" + i.ToString();
  ButtonChange.Font.Size = FontUnit.Point(7);
  ButtonChange.ControlStyle.CssClass = "button";
  ButtonChange.Click += new EventHandler(test);
} 
```

阅读 MSDN 文章 -[如何：以编程方式将控件添加到 ASP.NET 网页？](http://msdn.microsoft.com/en-us/library/kyt0fzt1.aspx)

# objective-c - 我是否需要在 Objective-C 代码中释放 C 变量（带有 ARC 的 iOS 6）？

> ID：15173832
> 
> 赞同：2
> 
> 时间：2013-03-02T11:17:37.163
> 
> 标签：objective-c, c, ios6, automatic-ref-counting

如果我在 iPhone 代码中实现以下内容：

```
NSString* soundPath = [[NSBundle mainBundle] pathForResource:soundFile ofType:@"wav"];
SystemSoundID feedbackSound;
AudioServicesCreateSystemSoundID((__bridge CFURLRef) [NSURL fileURLWithPath:soundPath], &feedbackSound);
AudioServicesPlaySystemSound(feedbackSound); 
```

我真的必须释放“feedbackSound”，因为它是 C 代码吗？会泄漏吗？

我正在使用 ARC / iOS 6。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T11:22:08.523

你应该。正确的调用方法是：

```
AudioServicesDisposeSystemSoundID 
```

（[参考](http://developer.apple.com/library/ios/documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html#//apple_ref/c/func/AudioServicesDisposeSystemSoundID)）。

一般来说，ARC 只处理 Objective-C 对象。当您处理较低级别的框架（Core Graphics、AudioServices 等）时，许多调用将“在后台”分配内存，由您负责处理。在许多情况下，您有特定的方法来进行释放，就像您进行分配一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:23:52.767

ARC 只管理 Objective-C 对象的内存。然而，系统声音服务是一个 C 接口。在这种情况下，您必须自己管理内存。

```
AudioServicesDisposeSystemSoundID (feedbackSound); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T11:29:30.837

是的，你必须。ARC 仅适用于声明为 Objective-C 对象的类型。问题中的程序会产生泄漏。

`malloc`需要`free`。`new`需要`delete`。`CFStringCreate...`需要`CFRelease`——等等……</p>

# c# - 标签或文本框上的列表框索引显示

> ID：15173835
> 
> 赞同：0
> 
> 时间：2013-03-02T11:17:46.533
> 
> 标签：c#, listview, listbox

有谁知道如何将以下命令与 Listbox SelectedIndexChanged 事件一起使用。请告诉我。我从互联网上拿了这个例子，我只想知道如何将它与列表框而不是 Listview 一起使用。

当我在 listbox 上的选定项目 [0] 之后没有获得索引选项时。请帮我。谢谢各位

```
 private void listView1_SelectedIndexChanged(object sender, EventArgs e)
  {
    textBox1.Text = people[listView1.SelectedItems[0].Index].Name;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:42:28.120

也许不完全准确，但工作。

```
public partial class Form1 : Form
{
    List<People> people = new List<People>();

    public Form1()
    {
        InitializeComponent();
        people.Add(new People("Joe Montana"));
        people.Add(new People("Alex Smith"));
        people.Add(new People("Colin Kaepernick"));

        foreach (People p in people)
        {
            this.listBox1.Items.Add(p.Name);
        }
    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.textBox1.Text = people[listBox1.SelectedIndices[0]].Name;
    }
}

class People
{
    public People(string Name)
    {
        this.Name = Name;
    }

    public string Name
    {
        get;
        set;
    }
} 
```

# asp.net - Telerik 过滤器控制在 IIS6 服务器上不起作用

> ID：15173839
> 
> 赞同：1
> 
> 时间：2013-03-02T11:18:13.383
> 
> 标签：asp.net, telerik-grid

我已经用 Telerik 创建了一个 rad 网格，它在我的 IIS 7 上的一台服务器上运行良好，但在 IIS6 服务器上却不行。

我已经在我的服务器上安装了 Telerik web.ui 安装程序。

# android - Android：具有自定义视图和圆角的 AlertDialog

> ID：15173855
> 
> 赞同：10
> 
> 时间：2013-03-02T11:20:13.713
> 
> 标签：android, android-alertdialog

我正在尝试`AlertDialog`使用自定义`view`（无标题或页脚）和圆角构建一个。我看过很多关于如何做到这一点的帖子，我尝试了很多东西，但我无法按照我想要的方式构建它。

这是我的目标：

![在此处输入图像描述](../Images/019fc689f107dcf811f9a1d459ffd259.png)

`drawable`我为被`dialog`调用的 dialog_background.xml创建了一个：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid
        android:color="#FFAAAAAA" />

    <stroke
        android:width="2dp"
        android:color="#FF000000" />

    <corners android:radius="20dp" />
</shape> 
```

我添加了一个`style`来使用它：

```
<style name="MyDialog" parent="@android:style/Theme.Dialog">
    <item name="android:background">@drawable/dialog_background</item>
</style> 
```

我的`layout`习惯`view`是有两个按钮。现在我向您展示一个空`LinearLayout`的以使其简单。这是 playdialog.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    style="@style/MyDialog"
     >

</LinearLayout> 
```

要构建`Dialog`我使用`DialogFragment`. 这是它的`onCreateDialog`功能：

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.playdialog, null));
    return builder.create();
} 
```

好的，如果我使用这样的代码，我会得到：

![在此处输入图像描述](../Images/f2afff2e213faa8b6306e32c52ecbeac.png)

我试图将`dialog`背景设置为透明修改我的`DialogFragment`代码：

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.playdialog, null));

    **NEW**        

    Dialog d = builder.create();
    d.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
    return d; 
} 
```

结果完全一样，所以我意识到我下面的那个白色矩形`dialog` **来自我的 custom `view`，而不是来自`dialog`**. 我已经将我`view`的背景设置为 dialog_background.xml，所以我也不能将其设置为透明，否则我会丢失角落、颜色等。

然后我决定`dialog`使用 dialog_background.xml 修改背景，并让我的视图以纯色作为背景。

在我的自定义`view` `layout`（playdialog.xml）中，我将 style="@style/MyDialog" 替换为：

```
android:background="#FFAAAAAA" 
```

然后在我的`DialogFragment`我使用了这个代码：

```
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.playdialog, null));

    **NEW**        

    Dialog d = builder.create();
    d.getWindow().setBackgroundDrawableResource(R.drawable.dialog_background);
    return d; 
} 
```

这就是我得到的：

![在此处输入图像描述](../Images/b19080f25df1af8a25815765c8901d30.png)

这几乎是我想要的，但你可以看到我的自定义`view`边框，所以还不够好。在这一点上，我不知道我还能做什么。

任何人都知道我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T12:13:19.347

我刚刚创建了一个自定义警报对话框。但它的角不是圆的。

首先为它创建一个布局 -

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="240sp"
android:layout_height="wrap_content"
android:background="#FFFFFF"
tools:ignore="SelectableText" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="1sp"
    tools:ignore="UselessParent" >

    <TableLayout 
        android:id="@+id/tablelayout_dialog_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:stretchColumns="1" >

        <TableRow
            android:id="@+id/tablerow_dialog_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"            
            tools:ignore="UselessParent" >

            <ImageView 
                android:id="@+id/imageview_dialog_image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/alertwhite" 
                android:layout_gravity="center"
                android:background="#643c3a"
                android:contentDescription="@string/string_todo"/>

            <TextView
                android:id="@+id/textview_dialog_title"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent" 
                android:background="#643c3a"
                android:padding="10sp"
                android:gravity="center_vertical"
                android:textColor="#FFFFFF"
                android:textSize="15sp" />

        </TableRow>     
    </TableLayout>

    <View 
        android:id="@+id/viewline_dialog"
        android:layout_below="@+id/tablelayout_dialog_title"
        android:layout_width = "wrap_content" 
        android:layout_height="0.25dip"
        android:background="#ffffff"          
        android:layout_centerVertical ="true" />

    <TextView
        android:id="@+id/textview_dialog_text"
        android:layout_below="@+id/viewline_dialog"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="8sp"
        android:background="#643c3a"
        android:textColor="#FFFFFF"
        android:textSize="12sp" />

    <View 
        android:id="@+id/viewline1_dialog"
        android:layout_width = "wrap_content" 
        android:layout_height="0.5dip"
        android:background="#ffffff"          
        android:layout_centerVertical ="true" 
        android:layout_below="@+id/textview_dialog_text"/>

    <TableLayout 
        android:id="@+id/tablelayout_dialog_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:stretchColumns="*"
        android:layout_below="@+id/viewline1_dialog"
        android:background="#a8a8a8" >

        <TableRow
            android:id="@+id/tablerow_dialog_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"            
            tools:ignore="UselessParent" >

            <Button
                android:id="@+id/button_dialog_yes"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="8sp"
                android:paddingTop="5sp"
                android:paddingBottom="5sp"
                android:background="@drawable/roundedcornerbuttonfordialog_shape"
                android:text="@string/string_yes" />

            <Button
                android:id="@+id/button_dialog_no"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="8sp"
                android:paddingTop="5sp"
                android:paddingBottom="5sp"
                android:background="@drawable/roundedcornerbuttonfordialog_shape"
                android:text="@string/string_no" />

        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

现在将对话框的代码编写为 -

```
public static void callAlert(String message, final Context context){
    final Dialog dialog = new Dialog(context);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(R.layout.customdialog_layout);
    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.WHITE));               

    TextView tvTitle = (TextView) dialog.findViewById(R.id.textview_dialog_title);
    tvTitle.setText("MyApp..");

    TextView tvText = (TextView) dialog.findViewById(R.id.textview_dialog_text);
    tvText.setText(message);    

    Button buttonDialogYes = (Button) dialog.findViewById(R.id.button_dialog_yes);
    buttonDialogYes.setOnClickListener(new OnClickListener() {          
        public void onClick(View v) {
            // Do your stuff...
            dialog.dismiss();
        }
    });

    Button buttonDialogNo = (Button) dialog.findViewById(R.id.button_dialog_no);
    buttonDialogNo.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // Do your stuff...
            dialog.dismiss();
        }           
    });
    dialog.show();
} 
```

并将此方法称为 -

```
String message = "Your Message";
callAlert(message, callingClass.this); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-09T06:43:57.693

就我而言，要删除对话框中的边框，此解决方案很有帮助：

```
dialog.setStyle(DialogFragment.STYLE_NO_FRAME, 0); 
```

就像这里描述的那样[https://stackoverflow.com/a/19521674/3173384](https://stackoverflow.com/a/19521674/3173384)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T12:26:06.097

下面的代码解决了这个问题

```
MyDialog mydialog = new MyDialog(this, "for testing",
            new myOnClickListener() {

                @Override
                public void onPositiveButtonClick() {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(),
                            "I am positive button in the dialog",
                            Toast.LENGTH_LONG).show();
                }

                @Override
                public void onNegativeButtonClick() {
                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(),
                            "I am negative button in the dialog",
                            Toast.LENGTH_LONG).show();
                }
            });

    // this will remove rectangle frame around the Dialog
    mydialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent);
    mydialog.show(); 
```

谢谢，纳根德拉

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-02T11:49:20.760

为什么不使用您显示的图像，例如“这是我的目标：”将您的目标 bg 图像保存在可绘制文件夹中。

```
private AlertDialog createAlertDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setView(getLayoutInflater().inflate(R.layout.playdialog, null));
    return builder.create();
} 
```

然后

```
AlertDialog dialog = createAlertDialog();
dialog.show(); 
```

# mysql - codeigniter 表单验证和 ajax 查找以查看名称是否存在

> ID：15173857
> 
> 赞同：0
> 
> 时间：2013-03-02T11:20:20.203
> 
> 标签：mysql, ajax, forms, codeigniter, validation

我有一个表单，允许我将新客户添加到数据库表中。

customer_name 字段是唯一字段。因此，我想在尝试写入数据库之前对输入字段执行表单验证。

理想情况下，验证可以是双重的。当用户输入客户名称时，显示名称是否可用的 ajax 查找。其次，codeigniter的验证功能？如果这不可用，也许在提交时可以进行查询以查看是否存在然后进行相应处理？

我已经审查并广泛搜索了一个完整的示例，但没有遇到任何示例。试了几次都没有运气。不幸的是，我的 java 脚本和 jquery 技能不存在，并试图在代码点火器周围感受我的方式。

我已经查看并尝试了以下文章： http: [//vortexdev.netii.net/article_17/Check_the_user_name_availability_with___Codeigniter_jQuery](http://vortexdev.netii.net/article_17/Check_the_user_name_availability_with___Codeigniter_jQuery) [CodeIgniter - 检查数据库中是否已存在值](https://stackoverflow.com/questions/4296930/codeigniter-checking-to-see-if-a-value-already-exists-in-the-database) [http://www.joshuawinn.com/check-if-email -username-exists-with-codeigniter-and-jquery-validation/](http://www.joshuawinn.com/check-if-email-username-exists-with-codeigniter-and-jquery-validation/)

我目前的代码是：

**jQuery链接：**

```
<head>
    <meta charset="utf-8">
    <title><?php  echo $title; ?></title>
    <link href="<?php echo base_url();  ?>styles/style.css" type="text/css" rel="stylesheet">
    <link href="<?php echo base_url();  ?>styles/menu.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="jquery-1.9.1.min.js"></script>  
    <script type="text/javascript">

    </script>   
</head> 
```

**我的控制器：**

```
function create_customer()
    {

        $this->form_validation->set_rules("customer_name","`Customer Name`","required|min_length[6]|xss_clean");
        $this->form_validation->set_rules("address_line_1","`Address Line 1`","required|xss_clean|min_length[6]");
        $this->form_validation->set_rules("address_line_2","`Address Line 2`","xss_clean|min_length[6]");
        $this->form_validation->set_rules("suburb","`Suburb`","required|xss_clean|min_length[6]");
        $this->form_validation->set_rules("city","`City`","required|xss_clean|min_length[6]");
        $this->form_validation->set_rules("postalcode","`Postal Code`","required|xss_clean|min_length[4]|max_length[5]");
        $this->form_validation->set_rules("primary_contact_name","`Contact Person Name`","required|xss_clean|min_length[6]");
        $this->form_validation->set_rules("primary_contact_email","`Contact Person email`","required|valid_email|xss_clean");
        $this->form_validation->set_rules("primary_contact_tell","`Contact Person tell`","required|xss_clean|min_length[10]|max_length[14]");

        if ($this->form_validation->run() == FALSE){
            $data["message"]="";

            $data['title']="Master Data Home Page";
            $this->load->view("master_data/view_master_data_header",$data);
            $this->load->view("master_data/view_master_data_nav");
            $this->load->view("master_data/view_content_master_data_create_customer");
            $this->load->view("master_data/view_master_data_footer");
        } else {

        $data = array(
            'customer_name' =>  $this->input->post('customer_name'),
            'address_line_1' =>  $this->input->post('address_line_1'),
            'address_line_2' =>  $this->input->post('address_line_2'),
            'suburb' =>  $this->input->post('suburb'),
            'city' =>  $this->input->post('city'),
            'postalcode' =>  $this->input->post('postalcode'),
            'primary_contact_name' =>  $this->input->post('primary_contact_name'),
            'primary_contact_email' =>  $this->input->post('primary_contact_email'),
            'primary_contact_tell' =>  $this->input->post('primary_contact_tell'),
            );

        $this->model_master_data->add_record($data);

        $this->customer_created_successfully();
            }
        } 
```

**和我的观点：**

```
<?php
echo validation_errors();
?>
<br>
<?php 
    echo form_open('masterdata/create_customer');
?>

<table>
    <tr>
        <td valign="top">

<?php   

    echo form_label("Customer Name", "customer_name");
    $data= array(
    "name"=>"customer_name",
    "id"=>"customer_name",
    "value"=>set_value("customer_name"));
    echo form_input($data);

    echo form_label("Contact Name", "primary_contact_name");
    $data= array(
    "name"=>"primary_contact_name",
    "id"=>"primary_contact_name",
    "value"=>set_value("primary_contact_name"));
    echo form_input($data);

        echo form_label("Contact Email", "primary_contact_email");
    $data= array(
    "name"=>"primary_contact_email",
    "id"=>"primary_contact_email",
    "value"=>set_value("primary_contact_email"));
    echo form_input($data);

    echo form_label("Contact Tel", "primary_contact_tell");
    $data= array(
    "name"=>"primary_contact_tell",
    "id"=>"primary_contact_tell",
    "value"=>set_value("primary_contact_tell"));
    echo form_input($data);

    ?>
    </td>
    <td width="20">
    <td valign="top">
    <?php

    echo form_label("Address Line 1", "address_line_1");
    $data= array(
    "name"=>"address_line_1",
    "id"=>"address_line_1",
    "value"=>set_value("address_line_1"));
    echo form_input($data);

    echo form_label("Address Line 2", "address_line_2");
    $data= array(
    "name"=>"address_line_2",
    "id"=>"address_line_2",
    "value"=>set_value("address_line_2"));
    echo form_input($data);

    echo form_label("Suburb", "suburb");
    $data= array(
    "name"=>"suburb",
    "id"=>"suburb",
    "value"=>set_value("suburb"));
    echo form_input($data);

    echo form_label("City", "city");
    $data= array(
    "name"=>"city",
    "id"=>"city",
    "value"=>set_value("city"));
    echo form_input($data);

    echo form_label("Postal Code", "postalcode");
    $data= array(
    "name"=>"postalcode",
    "id"=>"postalcode",
    "value"=>set_value("postalcode"));
    echo form_input($data);

    ?>
    </td>
        </tr>
            </table>
<br>
    <p>
        <input type="submit" value="Add New Record">
    </p>
<br>
<?php 
    echo form_close();
?> 
```

任何建议都非常感谢一如既往。如果您知道我可以遵循的完整工作示例或教程，请提供建议。

再次感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:31:54.750

好的，这会给你提示

```
 <script type="text/javascript" >
      function registerForm(id)
    {
      $('#user_error').html('');    

  var name        = $.trim($('#name').val());

   if(name=='')
  {
      $('#user_email_error').html('All fields are required!');
      return false;
  }

  $.ajax({
  type  :   'POST',
  data    :   $('#form-register').serialize(),
  url       :   '<?=base_url()?>login/register_user',
  cache : false,    
  success: function(data){
        if(data=='name')
        {
            $('#user_error').html('This name is already in use try new one!');
            return false;   
        }

        else 
        {                   
            document.location.href='<?=base_url()?>login';
        }
      }

      });

  return false;

    }
      </script> 
```

这个在你的控制器中

```
 function register_user()
{
    $str = '';

    $user_email =   $this->input->post('email');
    $name=  $this->input->post('name');
    $data_a['name']         = $name;

        $result1     =      $this->login_model->check_username($name);

        if($result1->num_rows() > 0 )
        { 
            $str = 'name';   
        }

    else
    { 
        $this->login_model->add_user($data_a);

        $str = 'goo';

     }
     echo($str);

     exit;
} 
```

这是视图

```
 <div id="user_error" style="color:#FF0000; font-size:13px; font-weight:bold"></div>
    <form method="post" action="" id="form-register" title="Register" onSubmit="return registerForm(this)">

            <input type="text" name="name" id="name" value="" class="input-unstyled" placeholder="Your name" autocomplete="off">

                    <button type="submit" id="send-register">Register</button>
           </form> 
```

# google-app-engine - 何时检索引用的实体？

> ID：15173861
> 
> 赞同：0
> 
> 时间：2013-03-02T11:20:44.840
> 
> 标签：google-app-engine, google-cloud-datastore

目前我检索到一个具有 ReferenceProperty 的实体，该实体是否已经检索到父实体？
在这种情况下会发生两次读取吗？
如果我总是想要父键并且有时想要父实体数据，我不应该为此使用 ReferenceProperty 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:10:04.280

> 实体是否已经检索到父实体？

不。

> 在这种情况下会发生两次读取吗？

不

> 如果我总是想要父键并且有时想要父实体数据，我不应该为此使用 ReferenceProperty 吗？

ReferenceProperty 在这种情况下非常有意义。

# mysql - 如何使用 PDO 缩短 mySQL 查询？

> ID：15173866
> 
> 赞同：0
> 
> 时间：2013-03-02T11:21:43.967
> 
> 标签：mysql, pdo

我是 PDO 的新手，并试图了解它是如何工作的。这是从数据库中删除用户的片段：

```
$stmt = $db->prepare("-- 02 account_delete.php
        DELETE FROM " . TABLE_ADDRESS_BOOK . " WHERE customers_id = :id");
    $stmt->bindParam(':id', $_SESSION['customer_id'], PDO::PARAM_INT);
    $stmt->execute();
    $stmt = $db->prepare("-- 03 account_delete.php
        DELETE FROM " . TABLE_CUSTOMERS . " WHERE customers_id = :id");
    $stmt->bindParam(':id', $_SESSION['customer_id'], PDO::PARAM_INT);
    $stmt->execute();
    $stmt = $db->prepare("-- 04 account_delete.php
        DELETE FROM " . TABLE_CUSTOMERS_INFO . " WHERE customers_info_id = :id  
    ");
    $stmt->bindParam(':id', $_SESSION['customer_id'], PDO::PARAM_INT);
    $stmt->execute(); 
```

我如何缩短它，例如将它组合成一个数组或其他东西。我也想知道为什么我必须重复：

```
$stmt->bindParam(':id', $_SESSION['customer_id'], PDO::PARAM_INT); 
```

否则它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:26:28.877

> 我如何缩短它，例如将它组合成一个数组

只需将您的查询放入数组并在循环中执行它们。

> 我也想知道为什么我必须重复绑定

因为您将变量绑定到**特定**查询。所以你不能和其他人一起使用它。
无论如何，在一个循环中你只需要做一次 - 所以，这并不重要

# c# - 从 DependencyProperty PropertyChangedCallback 获取父对象

> ID：15173867
> 
> 赞同：4
> 
> 时间：2013-03-02T11:21:45.860
> 
> 标签：c#, .net, wpf, dependency-properties

我想在每次更改属性时执行一些代码。以下在一定程度上起作用：

```
public partial class CustomControl : UserControl
{
        public bool myInstanceVariable = true;
        public static readonly DependencyProperty UserSatisfiedProperty =
            DependencyProperty.Register("UserSatisfied", typeof(bool?),
            typeof(WeeklyReportPlant), new FrameworkPropertyMetadata(new PropertyChangedCallback(OnUserSatisfiedChanged)));

        private static void OnUserSatisfiedChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            Console.Write("Works!");
        }
} 
```

当 UserSatisfiedProperty 的值更改时，这将打印“Works”。问题是我需要访问调用 OnUserSatisfiedChanged 的​​ CustomControl 实例来获取 myInstanceVariable 的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T11:25:50.780

实例是通过`DependencyObject d`参数传递的。您可以将其转换为您的`WeeklyReportPlant`类型：

```
public partial class WeeklyReportPlant : UserControl
{
    public static readonly DependencyProperty UserSatisfiedProperty =
        DependencyProperty.Register(
            "UserSatisfied", typeof(bool?), typeof(WeeklyReportPlant),
            new FrameworkPropertyMetadata(new PropertyChangedCallback(OnUserSatisfiedChanged)));

    private static void OnUserSatisfiedChanged(
        DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var instance = d as WeeklyReportPlant;
        ...
    }
} 
```

# ruby-on-rails - 用户名 rails devise

> ID：15173868
> 
> 赞同：0
> 
> 时间：2013-03-02T11:21:47.957
> 
> 标签：ruby-on-rails, devise

我是新来的轨道。在决定发布问题之前，我一直在寻找答案。我找到的 2 个答案对我不起作用。

所以我安装和配置了一个模型“post”和“design”gem。

然后我将“用户名”添加到用户中

`rails generate migration add_username_to_users username:string`

然后关系

用户 --> 有很多，帖子 --> 属于用户。

但我被困住了。

我究竟如何检索用户名以与帖子一起呈现？

<%= post.user.username =%> ？

还需要做什么？

post.rb

 `````
class Post < ActiveRecord::Base
  attr_accessible :postbody, :posttitle
  validates_presence_of :postbody, :posttitle
  belongs_to :user

end 
````  `用户.rb `class User < ActiveRecord::Base`

 ````
# Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :username, :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body

  has_many :posts 
```` 

`end`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:01:43.620

您没有提到您遇到的错误类型。但似乎您可能对未定义的属性有错误。通过添加模型`attr_accessible :username`使用户名可访问。`User`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T12:58:52.417

我猜你的意思是“设计”，对吧？我不确定您的错误（可能显示整个迁移），但我建议您重置数据库而不是添加迁移。就放

```
t.string :username 
```

到 create_users 迁移。然后

```
rake db:migrate:reset 
`````

# c++ - 文本文件中的字母数

> ID：15173870
> 
> 赞同：0
> 
> 时间：2013-03-02T11:22:01.070
> 
> 标签：c++

在这部分程序中，我想读取一个文本文件并将 txt 文件中的字符串长度输入 lenA，但是当 str1.fa 包含 10 时，程序输出 5，对于 6 个字符显示 3。

```
 #include <iostream.h>
   #include <stdio.h>
   using namespace std;

   int main(){
int lenA = 0;
FILE * fileA;
char holder;
    char *seqA=NULL;
char *temp;

//open first file
fileA=fopen("d:\\str1.fa", "r");

//check to see if it opened okay
if(fileA == NULL) {
    perror ("Error opening 'str1.fa'\n");
    exit(EXIT_FAILURE);
}

//measure file1 length
while(fgetc(fileA) != EOF) {
    holder = fgetc(fileA);
    lenA++;
    temp=(char*)realloc(seqA,lenA*sizeof(char));
    if (temp!=NULL) {
        seqA=temp;
            seqA[lenA-1]=holder;
    }
    else {
        free (seqA);
        puts ("Error (re)allocating memory");
        exit (1);
    }
}
cout<<"len a: "<<lenA<<endl;
free(seqA);
fclose(fileA);

    system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:25:12.283

您正在丢弃所有其他字符，因为您在`fgetc`每次循环迭代中调用了两次。

改变这个：

```
while(fgetc(fileA) != EOF) {
    holder = fgetc(fileA); 
```

对此：

```
while((holder = fgetc(fileA)) != EOF) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:53:10.420

只需打开文件并获取它的大小。跳过任何内存分配和字符读取...

```
FILE *f = fopen(fn, "r");
fseek(f, SEEK_END, 0);
long int lenA = ftell(f);
fclose(f); 
```

# javascript - 三个选择框，但是当我选择第一个时，接下来的两个将发生变化-HTML、JavaScript 或 jQuery

> ID：15173871
> 
> 赞同：0
> 
> 时间：2013-03-02T11:22:06.540
> 
> 标签：javascript, jquery, html

如果我从第一个选择框中选择硕士学位选项，那么在第二个选择框中它将仅显示 MBA/金融和 MBA/市场营销选项，从第三个选择框中它将显示学士学位、硕士学位和博士学位。现在，如果我从第一个选择框中选择学士学位选项，那么在第二个选择框中它将仅显示 BCJ/Law Enforcement 和 BCJ/Corrections 选项，从第三个选择框中它将显示所有选项。我做了一些代码，但它不起作用。

```
<select id="degree">
<option value="default">Choose a degree</option>
<option value="Master">Master Degree</option>
<option value="Bachelor">Bachelor Degree</option> 
```

```
<select id="program">
<option value="default">Choose  a program</option>
<option value="MBA/FN" Degree="Master">MBA/Finance</option>
<option value="MBA/MK" Degree="Master">MBA/Marketing</option>
<option value="BCJ/LE" Degree="Bachelor">BCJ/Law Enforcement</option>
    <option value="BCJ/COR" Degree="Bachelor">BCJ/Corrections</option> 
```

```
<select id="level">
<option selected="selected" value="">Choose Highest level of Education</option>
    <option value="Less than 2 years of college">Less than 2 years of college</option>
    <option value="2 or more years of college">2 or more years of college</option>
    <option value="Associate Degree">Associate Degree</option>
    <option value="Bachelor Degree">Bachelor Degree</option>
    <option value="Master Degree">Master Degree</option>
    <option value="Doctorate Degree">Doctorate Degree</option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:57:43.740

**HTML**

根据您的选择框...

```
 <select id="degree">
<option value="default">Choose a degree</option>
<option value="Master">Master Degree</option>
<option value="Bachelor">Bachelor Degree</option>

<select id="program">
<option value="default">Choose  a program</option>

<optgroup class="level1">
<option class="level1" value="MBA/FN" Degree="Master">MBA/Finance</option>
<option class="level1" value="MBA/MK" Degree="Master">MBA/Marketing</option>
</optgroup>
<optgroup class="level2">
<option class="level2" value="BCJ/LE" Degree="Bachelor">BCJ/Law Enforcement</option>
<option class="level2" value="BCJ/COR" Degree="Bachelor">BCJ/Corrections</option>
</optgroup>
<select id="level">

<option selected="selected" value="">Choose Highest level of Education</option>
    <optgroup class="level3">
    <option class="level3" value="Less than 2 years of college">Less than 2 years of college</option>
    <option class="level3" value="2 or more years of college">2 or more years of college</option>
    </optgroup>
    <optgroup class="level1">
    <option class="level1" value="Associate Degree">Associate Degree</option>
    <option class="level1" value="Bachelor Degree">Bachelor Degree</option>
    </optgroup>
    <optgroup class="level2">
    <option class="level2" value="Master Degree">Master Degree</option>
    <option class="level2" value="Doctorate Degree">Doctorate Degree</option>
    </optgroup> 
```

**脚本**

```
 $('#degree').change(function () {
        if ($('#degree option:selected').text() == "Master"){
                $('.level1').css('display', 'block');
                $('.level2').css('display', 'none');
                $('.level3').css('display', 'none');
        } else if ($('#degree option:selected').text() == "Bachelor"){
                $('.level1').css('display', 'none');
                $('.level2').css('display', 'block');
                $('.level3').css('display', 'none');
        }  else {
                $('.level1').css('display', 'block');
                $('.level2').css('display', 'block');
                $('.level3').css('display', 'block');
        }}); 
```

# ajax - 什么时候应该优先使用 HTTP Form POST 而不是 Ajax？

> ID：15173877
> 
> 赞同：1
> 
> 时间：2013-03-02T11:22:19.323
> 
> 标签：ajax, web-applications, http-post, form-submit

我最近开始使用ajax。在此之前，我主要使用表单提交将数据发送到服务器。但是使用 ajax，我觉得在大多数情况下我们可以避免表单提交。即使在我们需要从一个页面转到另一个页面的情况下（例如，如果我想在单击表中的客户链接时查看特定客户的详细信息，我可以对服务器进行 ajax 调用并获取 html 响应并附加它在当前页面上，之前是通过表单提交处理的，这也有点慢）。

所以我想知道表单提交应该优先于ajax的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:29:31.400

这实际上是一个非常广泛的问题，我会尝试更深入地回答它。

**如果需要，有一些理由使用常规 HTTP POST 而不是 Ajax：**

1.  HTTP POST 是 [万维网联盟 (W3C)](http://www.w3.org/Protocols/rfc2616/rfc2616.html "万维网联盟 (W3C)")指定的 HTTP 1.1 标准的一部分， 因此适用于*任何*符合 HTTP 1.1 的浏览器。

2.  Ajax 需要 JavaScript 支持。即使*您*用户的浏览器支持 JavaScript，不同的浏览器使用不同的引擎运行 JavaScript，您也可能会遇到特定于浏览器的错误。

3.  Ajax 需要完全不同级别的错误处理。

    **让我解释一下：**当用户向您的服务器发送 POST 请求并发生错误（例如连接丢失）时，用户将在浏览器中收到完全可见的错误，因为浏览器本身会通知用户出现问题。当您使用 Ajax 时，您必须自己编写/实现所有这些错误处理。

    *示例：*用户 A 正在访问您的博客并希望使用您在博客上实施的 Facebook OAUTH 发表评论。用户在评论字段中输入评论文本并按下评论按钮，结果如何？*什么也没有发生*。 **为什么？**可能有多种原因，例如连接丢失、未处理的内容错误、服务器错误、兼容性错误、安全错误（如服务器证书丢失/无效、Facebook OAUTH 通信错误等）。

    对 HTTP POST 执行相同的操作*将*导致用户可见的错误。

**更通用的 Ajax / JavaScript 问题**

1.  使用 HTTP 请求加载页面时，加载页面时它在浏览器中可见。Ajax 通常在页面加载*后*加载，因此浏览器不会通知用户资源正在加载。

2.  如果您使用 Ajax 加载资源（例如博客文章），它们将不会被 Google 索引，因为 Google 不运行 JavaScript。因此，更少的人会找到您的网站/内容。

3.  无响应的响应式设计；Ajax 繁重的网站可能会占用大量 CPU 和网络流量，以至于加载页面实际上比使用普通的旧 HTML 所花费*的时间要长得多。*

**不幸的是，现代网站通常确实需要 JavaScript。那么，如何处理上述情况呢？**

1.  在适用的情况下使用正确的技术（[http://en.wikipedia.org/wiki/KISS_principle](http://en.wikipedia.org/wiki/KISS_principle)）

2.  处理错误。

3.  使用 Ajax 进行 POST 时，如果您希望服务器的响应时间超过一秒，请通过显示加载动画来给用户“触觉反馈”。

4.  **不显眼的 JavaScript**。

    Unobtrusive JavaScript 允许未启用 JavaScript 的用户至少使用您网站上的基本功能。

    **示例：**用户 A 使用非 JavaScript 浏览器进入您的博客并单击评论按钮。出现一个弹出窗口，用户 A 在其中输入她的评论并定期向服务器发帖，然后被重定向回您的博客帖子。用户 B 使用支持 JavaScript 的浏览器进入您的博客。在您的博客文章下方，有一个评论字段和一个提交按钮。用户 B 输入她的评论并单击提交按钮，然后将 Ajax 请求发送到服务器。该页面会使用发布的评论进行更新，并且永远不必重定向用户。

    基本上，通过始终加载常规的普通旧 HTML 页面，可以实现不显眼的 JavaScript。加载页面后，您运行 JavaScript 将 html 元素和链接替换为 JavaScript 锚点和元素。这样，不允许执行 JavaScript 的浏览器可以使用您的站点。

**资源：**

不显眼的 JavaScript

*   [http://www.ibm.com/developerworks/library/wa-aj-unobtrusive/%2F&ei=deUzUfekB6OH4AS09IFo&usg=AFQjCNGZwD9bsz52xK3zGpDQTjyGzO4EHQ](http://www.ibm.com/developerworks/library/wa-aj-unobtrusive/%2F&ei=deUzUfekB6OH4AS09IFo&usg=AFQjCNGZwD9bsz52xK3zGpDQTjyGzO4EHQ)
*   [http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-technique/](http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-technique/)
*   [http://www.searchenginepeople.com/blog/unobtrusive-javascript.html](http://www.searchenginepeople.com/blog/unobtrusive-javascript.html)
*   [http://en.wikipedia.org/wiki/Unobtrusive_JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

Ajax 错误处理

*   [http://www.unseenrevolution.com/jquery-ajax-error-handling-function/](http://www.unseenrevolution.com/jquery-ajax-error-handling-function/)
*   [http://enterprisejquery.com/2010/09/creating-an-ajax-component-handling-errors-and-loading-notifications-with-publish-and-subscribe/](http://enterprisejquery.com/2010/09/creating-an-ajax-component-handling-errors-and-loading-notifications-with-publish-and-subscribe/)
*   [http://aaronsaray.com/blog/2010/08/24/how-to-handle-ajax-errors-with-jquery/](http://aaronsaray.com/blog/2010/08/24/how-to-handle-ajax-errors-with-jquery/)

我希望这回答了你的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:21:58.987

大多数情况下，可以使用 Ajax。但请记住，它需要额外的实施努力。

此外，在某些情况下仍需要表格：

*   上传文件
*   向其他服务器发送数据
*   触发下载的表单

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T08:46:36.643

两者没有太大区别。我通常更喜欢 ajax 而不是常规形式。

无论您选择哪种方法，重要的是如何使其安全。

例如，如果您有一个网站，您可以在其中接受帖子形式的数据。我可以制作一个表格并将数千行代码发布到您的网站，您的网站会接受，因为您不知道数据来自哪里。示例是您网站中的注册页面。

如果您将带有表单的 md5 哈希发送到用户浏览器并将其保存在会话中会更好。因此，当用户提交表单时，他/她会将哈希发送回您的服务器，您可以在那里检查保存的会话值。然后你会知道它是你的网站，而不是来自第三方。

# c - 使用叉子打印

> ID：15173883
> 
> 赞同：1
> 
> 时间：2013-03-02T11:22:30.323
> 
> 标签：c

我无法理解打印输出的顺序......

```
#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>

int main(void)
{
    int index;
    for (index = 1; index < 4; index++)
    {
        printf("HI\n"); 
        fork();
    }
    printf("Unix System Programming\n");
    exit(0);
} 
```

很容易理解，当我只打印 unix 编程系统时，fork 工作了 2^n 次……但是当我用它打印 HI 时……我不明白为什么这个顺序？输出：

```
HI
HI
HI
HI
HI
Unix System Programming
HI
HI
Unix System Programming
Unix System Programming
Unix System Programming
Unix System Programming
Unix System Programming
Unix System Programming
Unix System Programming 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:51:02.770

> 为了更好的可见性，我刚刚修改了代码

```
int main(void)   
    {  
        int index;  
        for (index = 1; index < 4; index++)  
        {
            printf("We are in loop with  process id=%d\n",getpid());
            if(!fork()) { //Child process
               printf("Came inside chid with process id=%d\n",getpid());
              // _exit(0);
            } else {     //Parent process
              printf("Came inside parent with process id=%d\n",getpid());
           }
        }
        printf("We are out of loop with  process id=%d\n",getpid());
        exit(0);
    }

    [OP]   
    We are in loop with  process id=2258   -----> Main Parent   
    Came inside parent with process id=2258   
    We are in loop with  process id=2258  
    Came inside child with process id=2259  
    We are in loop with  process id=2259  
    Came inside parent with process id=2258  
    We are in loop with  process id=2258  
    Came inside parent with process id=2259  
    We are in loop with  process id=2259  
    Came inside parent with process id=2258  
    We are out of loop with  process id=2258 ----> "Outer block of loop referring main Parent  Here exit(0) will rip parent process of pid 2258 "      
    Came inside parent with process id=2259     
    We are out of loop with  process id=2259   
    Came inside child with process id=2263   
    We are out of loop with  process id=2263   
    Came inside child with process id=2261   
    We are in loop with  process id=2261   
    Came inside parent with process id=2261   
    We are out of loop with  process id=2261   
    Came inside child with process id=2264   
    We are out of loop with  process id=2264   
    Came inside child with process id=2262   
    Came inside child with process id=2260   
    We are out of loop with  process id=2262   
    We are in loop with  process id=2260   
    Came inside parent with process id=2260   
    We are out of loop with  process id=2260   
    Came inside child with process id=2265   
    We are out of loop with  process id=2265 
```

首先，我们必须考虑循环执行 3 次，每次 fork 将产生 1 个子节点，并且肯定会有一个父节点，并且执行将完全取决于调度，可能是子节点，也可能是父节点。

一旦你有更多的迭代值，这将变得非常令人头疼。

> 现在让孩子清洗

```
 int main(void)   
            {  
                int index;  
                for (index = 1; index < 4; index++)  
                {
                    printf("We are in loop with  process id=%d\n",getpid());
                    if(!fork()) { //Child process
                       printf("Came inside chid with process id=%d\n",getpid());
                       _exit(0);
                    } else {     //Parent process
                      printf("Came inside parent with process id=%d\n",getpid());
                   }
                }
                printf("We are out of loop with  process id=%d\n",getpid());
                exit(0);
            }

    We are in loop with  process id=2393
Came inside parent with process id=2393
We are in loop with  process id=2393
Came inside chid with process id=2394
Came inside parent with process id=2393
We are in loop with  process id=2393
Came inside parent with process id=2393
We are out of loop with  process id=2393
Came inside chid with process id=2396
Came inside chid with process id=2395 
```

所以上面的OP现在更清楚了三倍父和三倍子执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:47:34.647

不能保证计算机选择以哪种顺序调度进程，一个进程可以在另一个进程执行单行之前完全执行。

**输出的一种可能解释：**

列是进程，索引在括号中

"USP" 是 "Unix 系统编程"
"FORK" 是当一个进程分叉时
"CREATE" 是当一个进程被创建时

```
1      2      3      4      5      6      7      8
HI (1)
FORK   CREATE
HI (2)
FORK          CREATE
       HI (2)
       FORK          CREATE
HI (3)
FORK                        CREATE
                     HI (3)
                     FORK          CREATE
USP
              HI (3)
              FORK                        CREATE
       HI (3)
       FORK                                      CREATE
       USP
              USP
                     USP
                            USP
                                   USP
                                          USP
                                                 USP 
```

以上不太可能是实际输出，因为我们不知道计算机以什么顺序调度进程。您可以在打印语句中添加进程 ID 以指示任何给定输出行属于哪个进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T11:50:49.190

还可以通过查询每个进程的 PID 来更详细地了解正在发生的事情：

```
#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>

int main(void)
{
    int index;
    for (index = 1; index < 4; index++)
    {
        printf("HI: pid %d with i=%d will now fork\n", getpid(), index);
        if (0 == fork())
        {
                printf("I am a new process with i=%d and pid=%d\n", index, getpid());
        }
    }
    printf("Unix System Programming from pid %d\n", getpid());
    exit(0);
} 
```

至于 printf()s 的顺序，事实是新进程在完全产生之前需要一个**随机**时间（很小，几乎为零，但仍然是随机的），并且该时间与父进程产生更多进程并终止所需的时间。

因此，您可能有：

```
process 1 prints "HI" and spawns process 2
process 2 prints "HI" and...
process 1 prints "HI" and spawns process 3
                             ... spawns process 4
...process 2 terminates ("Unix programming")
...process 3 terminates ("Unix programming")
...process 4 prints "HI" 
```

下一次可能进程 2 在进程 3 生成之前成功打印 HI，依此类推。如果您需要确定性序列，则必须实现某种类型的进程同步。

# android-source - 制作android源文件时出错

> ID：15173888
> 
> 赞同：0
> 
> 时间：2013-03-02T11:22:55.950
> 
> 标签：android-source

当我构建 android 源代码时，我收到以下错误：

```
external/webkit/Source/WebCore/xml/XPathParser.cpp: In member function 'WebCore::XPath::Expression* WebCore::XPath::Parser::parseStatement(const WTF::String&, WTF::PassRefPtr<WebCore::XPathNSResolver>, WebCore::ExceptionCode&)':
external/webkit/Source/WebCore/xml/XPathParser.cpp:480:39: error: too many arguments to function 'int WebCore::XPath::xpathyyparse()'
In file included from external/webkit/Source/WebCore/xml/XPathParser.cpp:51:0:
out/target/product/generic/obj/STATIC_LIBRARIES/libwebcore_intermediates/Source/WebCore/XPathGrammar.hpp:106:5: note: declared here
make: *** [out/target/product/generic/obj/STATIC_LIBRARIES/libwebcore_intermediates/Source/WebCore/xml/XPathParser.o] Error 1 
```

谁能告诉我可能的错误和解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:32:20.363

检查你的野牛的版本，如果它是 2.6 或更高版本，就会有 webkit 的错误，请参阅[Bug 92264](https://bugs.webkit.org/show_bug.cgi?id=92264)。

有人讨论同样的问题：[Mac 10.8 上的 libwebcore build error](https://groups.google.com/forum/#!msg/android-building/T1Myr6Sz3ms/7nlX2OCqZygJ)，您可以了解如何解决它。

# wordpress - 在 Pods 模板中使用 PHP 代码显示 Pods 2.0 项目的正确方法

> ID：15173891
> 
> 赞同：0
> 
> 时间：2013-03-02T11:23:08.060
> 
> 标签：wordpress, podscms

我差点把头发扯掉！我相信您应该能够在 PODS 2.0 模板中使用除 HTML 之外的 PHP、javacript 等，对吗？如果是这样，为什么我让我的项目使用魔术标签显示在 pod 模板中，但我无法使用 PHP 代码回显内容？

我使用下面的代码设置了一个 Pods 模板来显示我的东西：

```
<h5><a href="{@permalink}">{@post_title}</a></h5>
<div>
<?php 
$mypod = pods( 'post' );
echo $mypod->field( 'post_title' ); 
?>
</div> 
```

它按预期在标题（h5）中输出**post_title**，但在 div 中没有显示 u。我究竟做错了什么。让我提一下，我没有使用 Pod 的页面，而是使用 Pod 的列表小部件在我的 WP 侧边栏中显示它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:21:45.067

您没有为 pods() 提供您要使用的帖子的 ID。但是你的主要问题是你根本不需要设置一个新的 pods() 对象，你只需要使用这个：

```
<?php echo $obj->display( 'post_title' ); ?> 
```

$obj 在模板中引用当前使用的 Pods 对象。

另外，我在这里使用 display ，因为它会运行 the_title() 在 Pods 中通常会运行的任何过滤器。

# jquery - 是否可以检查单击了哪些“子”DIV

> ID：15173892
> 
> 赞同：3
> 
> 时间：2013-03-02T11:23:09.717
> 
> 标签：jquery, event-handling

如果我按如下方式编写侦听器，

```
$('.parent').bind('click', function() {
//...
})

<div class="parent">
    <div class="children1"></div>
    <div class="children2"></div>
    <div class="children3"></div>
</div> 
```

例如我点击`children2`了，是否可以检查点击了哪个“儿童”DIV `parent`？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T11:24:53.117

是的，您可以查看`e.target`（更改您的处理程序以接受`e`作为参数），可能[`closest`](http://api.jquery.com/closest)用于获取`div`单击的实际元素的第一个祖先（以防那些 child`div`有后代）。

```
$('.parent').bind('click', function(e) {
    // Here, `e.target` is the DOM element where the click occurred
    var div = $(e.target).closest('div');
}); 
```

[实例](http://jsbin.com/acoqax/1)| [来源](http://jsbin.com/acoqax/1/edit)

或者，如果您*只*希望在单击其中一个孩子时触发处理程序，您可以通过[`delegate`](http://api.jquery.com/delegate)or使用事件委托[`on`](http://api.jquery.com/on)：

```
$('.parent').delegate('div', 'click', function(e) {
    // Here, `this` is the child div that was clicked
});

// or

$('.parent').on('click', 'div', function(e) {
    // Here, `this` is the child div that was clicked
}); 
```

[实例](http://jsbin.com/acoqax/2)| [来源](http://jsbin.com/acoqax/2/edit)

请注意，args 的顺序在`delegate`（为了清楚起见我更喜欢）和`on`（似乎其他人都喜欢）之间是不同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T11:26:01.253

**[工作演示](http://jsfiddle.net/RNCu8/)**

您可以查看事件的目标。这里的事件是 e。

```
$('.parent').bind('click', function(e) {
   console.log(e.target);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T11:26:59.760

`e.target.className`将获得触发事件的 div 的类名。

```
$('.parent').bind('click', function(e) {
   if(e.target.className.indexOf('children') != -1) { // <-- Perform function only if any child is clicked
     // do something
   }
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T11:28:43.657

你应该使用

```
$('.parent').on('click', 'div', function() {
// ...
}); 
```

应该使用 .on() 而不是 .bind()。`this`引用事件处理程序中单击的 div。

# jsp - 比较 JSTL/EL 中的数值

> ID：15173893
> 
> 赞同：1
> 
> 时间：2013-03-02T11:23:20.393
> 
> 标签：jsp, jstl, el

我在 JSTL 中以下列方式比较数值。

```
<c:set var="testValue" value="10"/>

<c:choose>
    <c:when test="${testValue==10}">
        <c:out value="Test is successful."/>
    </c:when>
    <c:otherwise>
        <c:out value="Test is unsuccessful."/>
    </c:otherwise>
</c:choose> 
```

条件被评估为真并显示 - “测试成功”。

如果变量的值`testValue`不是数字，例如，

```
<c:set var="testValue" value="xxx"/> 
```

然后测试失败，但出现以下异常。

> javax.el.E​​LException：无法将 java.lang.String 类型的 xxx 转换为 java.lang.Long 类

因为字符串无法解析为`Long`. 比较是按字典顺序进行的。

这可以通过使用 EL 来避免，如下所示。

```
<c:set var="testValue" value="${xxx}"/> 
```

在这种情况下，`<c:otherwise>`将显示该部分中的文本。

* * *

我在从数据库中检索数据时使用了这样的结构，

```
<c:forEach var="row" items="${list}" varStatus="loop">
    <c:choose>
        <c:when test="${param.edId==row.id || row.id==param.id}">
            // Do something.
        </c:when>

        <c:otherwise>
            // Do something.
        </c:otherwise>
    </c:choose>
</c:foreach> 
```

在上面的代码中，`row.id`保证的值与 Oracle 数据库中`Long`的数据类型相对应。`Number`

`param.edId`然而，和/或的值`param.id`不保证是数字，并且可以被恶意用户更改。在这种情况下，可能会发生上述意外错误。

* * *

我真的需要为此设置两个额外的变量吗？

```
<c:set var="paramId" value="${param.id}"/>
<c:set var="paramEdId" value="${param.edId}"/> 
```

并在上面的循环中使用它们，或者是否有一种简洁的方法来避免该解析异常（以防这些值不可解析）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:30:43.957

首先，如果我的 JSP 因恶意用户更改参数值而产生异常，我根本不在乎。

但是，如果您使用 MVC 模式并开始使用浏览器发送的参数填充命令/表单对象，则不会发生这种情况。这样，您将使用类型变量而不是字符串，并将这些类型变量与来自数据库的类型值进行比较。

# r - R：检查完整设计的功能

> ID：15173894
> 
> 赞同：1
> 
> 时间：2013-03-02T11:23:23.267
> 
> 标签：r, function

我想创建一个函数，它接受 1 到 10 个向量并返回是或否，这意味着我的所有向量都代表一个“完整设计”。

这是我称之为“完整设计”的示例：

> a <- c(1,1,1,1,2,2,2,2,3,3,3,3)
> 
> b <- c(1,2,1,2,1,2,1,2,1,2,1,2)
> 
> c <- c(1,1,2,2,1,1,2,2,1,1,2,2)

这是一个完整的设计，因为：对于所有向量的所有级别，（在同一位置）所有其他向量的所有级别的次数相同。

这是“不完整设计”的两个示例：（在以下两个示例中，a 和 b 匹配，但 c 不匹配 a 和 b）

示例 1：

> a <- c(1,1,1,1,2,2,2,2,3,3,3,3)
> 
> b <- c(1,2,1,2,1,2,1,2,1,2,1,2)
> 
> c <- c(1,2,3,1,2,3,1,2,3,1,2,3)

示例 2：

> a <- c(1,1,1,1,2,2,2,2,3,3,3,3)
> 
> b <- c(1,2,1,2,1,2,1,2,1,2,1,2)
> 
> c <- c(1,2,3,4,5,1,2,3,4,5,1,2)

希望我清楚。整个想法是我有一个数据集，这个数据集由 a、b、c、d、e 等因素解释......我想要一个函数来告诉我我是在测试一个完整的还是一个在其上运行 aov() 之前的设计不完整。

非常感谢 ！

在我要创建的函数中要问的问题类似于：当等于给定级别时（例如 2）。我们查看 b[which(a==2)] 并检查 b 的所有级别是否包含在 b[which(a==2)] 中，并检查 b[which(a==2)] 的所有级别是否包含重复相同的次数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T14:33:22.323

使用 plyr 的`id()`函数有一个非常简单的方法：

```
library(plyr)
a <- c(1,1,1,1,2,2,2,2,3,3,3,3)
b <- c(1,2,1,2,1,2,1,2,1,2,1,2)
c <- c(1,1,2,2,1,1,2,2,1,1,2,2)

ids <- id(data.frame(a, b, c))
attr(ids, "n") == length(unique(ids))
# [1] TRUE

d <- c(1,1,2,2,1,1,2,2,1,1,2,3)
ids <- id(data.frame(a, b, d))
attr(ids, "n") == length(unique(ids))
# [1] FALSE 
```

`id()`通过为输入中的每一行分配一个唯一的 ID 来工作，这样就可以为所有可能的组合留出空间。输出包含一个属性 ，`n`它给出了可能的组合总数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T12:37:16.330

如果我理解正确，您可能能够以`interaction`某种方式首先确定您的数据是否完整。

查看您的示例，似乎每个向量中的所有唯一级别都应该始终有一个唯一的组合（不是 2，不是 0）。因此，对于您展示的第一组：

```
> all(table(interaction(a, b, c)) == 1)
[1] TRUE 
```

而且，对于其他两个示例，如果您执行相同操作，您将得到`FALSE`结果。

* * *

另一种选择是假设我们可以将变量`a`视为分组变量，并将所有向量放入`data.frame`如下所示：

```
df1 <- data.frame(a = c(1,1,1,1,2,2,2,2,3,3,3,3),
                  b = c(1,2,1,2,1,2,1,2,1,2,1,2),
                  c = c(1,1,2,2,1,1,2,2,1,1,2,2)) 
```

一旦我们这样做了，我们可以`split`这样`data.frame`做：

```
DF1 <- split(df1[-1], df1[1]) 
```

然后，我们可以编写一个小函数来检查拆分的每个部分是否相等。我们会稍微作弊并使用`merge`，但必须有更强大的方法来做到这一点。这个想法是，如果我们`merge`在相同的输入上使用，它应该只是一个`data.frame`与所有输入相同的单个`data.frame`。

这是一个（不是那么健壮——没有经过广泛测试）的函数，可以用作起点。

```
myFun <- function(myList) {
  all.equal(Reduce(function(x, y) 
    merge(x, y, all = TRUE, sort = FALSE), myList),
            myList[[1]], check.attributes = FALSE)
} 
```

应用于`DF1`，它给了我们`TRUE`，但请尝试以下操作：

```
df2 <- data.frame(a = c(1,1,1,1,2,2,2,2,3,3,3,3),
                  b = c(1,2,1,2,1,2,1,2,1,2,1,2),
                  c = c(1,2,3,1,2,3,1,2,3,1,2,3))
df3 <- data.frame(a = c(1,1,1,1,2,2,2,2,3,3,3,3),
                  b = c(1,2,1,2,1,2,1,2,1,2,1,2),
                  c = c(1,2,3,4,5,1,2,3,4,5,1,2))

DF1 <- split(df1[-1], df1[1])
DF2 <- split(df2[-1], df2[1])
DF3 <- split(df3[-1], df3[1])

myFun(DF1)
# [1] TRUE
myFun(DF2)
# [1] "Component 1: Numeric: lengths (6, 4) differ" "Component 2: Numeric: lengths (6, 4) differ"
myFun(DF3)
# [1] "Component 1: Numeric: lengths (10, 4) differ" "Component 2: Numeric: lengths (10, 4) differ" 
```

# mysql - 在子查询中使用列，但不在主查询的选择中

> ID：15173895
> 
> 赞同：2
> 
> 时间：2013-03-02T11:23:23.653
> 
> 标签：mysql, sql, subquery

首先这些是我的表：

```
 Foo (id, Name)
 Bar (foo_id, num) 
```

我正在尝试执行以下操作：我想选择其所有 Bars 的 num 均高于 10 的 Foos。下面的查询可以正常工作并且可以做到，但我不想在选择中包含 Foo.id . 当我从选择中删除 Foo.id 时，我收到一个错误，即在 where 子句（子查询的）中找不到该列。

```
#1054 - Unknown column 'Foo.id' in 'where clause' 
```

如何从选择中删除 Foo.id，但仍使用子查询的 where 子句中的列？我尝试在子查询中加入 Foo 表并在 where 中使用 Name，但这并没有给我想要的结果，因为 Name 不是唯一的。

```
SELECT 
    Foo.Name, 
    Foo.id
FROM
    Foo
    LEFT  JOIN Bar ON Bar.foo_id = Foo.id
GROUP BY Bar.foo_id
HAVING COUNT(Bar.foo_id) = ( 
    SELECT 
        COUNT(Bar.foo_id) 
    FROM 
        Bar 
    WHERE 
        num > 10 
    AND 
        Bar.foo_id = Foo.id GROUP BY Bar.foo_id 
    ) 
```

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:37:56.637

这是另一种简单的方法，

```
SELECT  a.Name
FROM    Foo a
        INNER JOIN Bar b
            ON a.ID = b.foo_ID
GROUP   BY a.ID, a.Name
HAVING  COUNT(b.foo_ID) = SUM(b.num > 10) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ce7e9/2)

# c++ - rapidjson 中是否已经嵌入了序列化/反序列化 std::pair 的方法 ?

> ID：15173897
> 
> 赞同：1
> 
> 时间：2013-03-02T11:23:42.123
> 
> 标签：c++, json, rapidjson

rapidjson 中是否已经嵌入了序列化/反序列化 std::pair 的方法？我正在尝试序列化点数组但没有创建自定义对象（目前我在数组中序列化，x坐标在偶数位置，y坐标在数组的奇数位置，但更优雅的是对数组）

# wordpress - 遵循导航菜单结构的面包屑

> ID：15173900
> 
> 赞同：2
> 
> 时间：2013-03-02T11:23:54.573
> 
> 标签：wordpress, custom-post-type, breadcrumbs

是否可以为 wordpress 创建一个遵循菜单结构而不是父子关系的面包屑功能？

我正在自定义一个 PressEvent 主题，它有几种自定义帖子类型、演讲者、组委会等。使用简码可以将任何自定义帖子的列表添加到静态页面，但是一旦你在一个帖子上，面包屑不包括显示帖子的静态页面，但包含所有自定义帖子的页面。

这是一个例子：

这是当您在包含组委会自定义帖子类型的页面上时的踪迹（组委会是页面标题）

首页 > 关于 > 组委会

一旦我点击一个帖子，路径是这样的（在这里，组委会链接到所有自定义帖子，而不是来自上面的 bradcrumbs 的页面）：

首页 > 组委会 > 姓名

主题有一些限制，或者我没有找到解决方案，但是我无法为我创建的自定义帖子类型添加类别以便将类别添加到菜单中，如果在每个自定义帖子类型的属性中我将它设置为出现在主菜单中，我无法控制它在导航中的位置。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:58:12.517

如果有人有类似的问题，我发现[Breadcrumb NavXT](http://wordpress.org/extend/plugins/breadcrumb-navxt/installation/)插件可以完成工作。您可以为主题中的每个自定义帖子类型选择根页面。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-31T22:31:00.223

我写了一个插件来做到这一点！

*   基于 WP Nav 菜单的面包屑
*   包括丰富的片段（微数据）
*   三种不同风格
*   自定义 CSS 编辑器
*   各种设置
*   多语言准备，现在只有英语

您可以在以下网址找到它： [http ://codecanyon.net/item/wp-nav-menu-breadcrumbs/4706192](http://codecanyon.net/item/wp-nav-menu-breadcrumbs/4706192)

# php - 当给定的变量可能没有值时，在 PHP 中强制保留 2 位小数而不用逗号

> ID：15173901
> 
> 赞同：2
> 
> 时间：2013-03-02T11:23:57.303
> 
> 标签：php, numbers, int

我需要一个 $_POST 变量并强制它有 2 位小数，没有逗号。

下面的工作，但肯定这不能是最好的方式来做到这一点。

```
$difference = str_replace(",","",number_format((int)$_POST["difference"],2)); 
```

我放了它，`(int)$_POST["difference"],2)`所以它会将空值转换为 0 并防止警告`number_format() expects parameter 1 to be double, string given ...`，因为可能未使用上一页上的某些表单输入。

正如我所说，这确实有效。主要是我担心这样做会产生意想不到的副作用，因为它看起来不太干净。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T11:28:08.280

```
 number_format((float)$number, 2, '.', ''); 
```

其他方式：

```
sprintf('%0.2f', $unpadded); // 520 -> 520.00 
```

# c# - 面板内的表单

> ID：15173902
> 
> 赞同：0
> 
> 时间：2013-03-02T11:24:10.103
> 
> 标签：c#, forms, panel

我正在使用 C# 构建一个 Windows 应用程序，其中有一个可以托管表单的面板（上面有背景图像）。每个表单都包含一个带有图像（由用户选择）、4 个标签和 4 个按钮的图片框。当我在面板上移动表单时，我会遇到闪烁，尤其是当表单超出面板边缘时会发生这种情况。

我尝试过双缓冲和设置样式，但仍然存在闪烁。在链接中，您可以看到它发生的情况，正如我上面所说：表单已移动到面板边缘之外（[http://postimage.org/image/qgmad2ey9/](http://postimage.org/image/qgmad2ey9/)）。

# vb.net - VB.Net Combobox 显示引用值的文本

> ID：15173903
> 
> 赞同：0
> 
> 时间：2013-03-02T11:24:10.737
> 
> 标签：vb.net

我想在组合框中显示许多项目，并且当用户选择打开时，而不是返回文本，而是返回引用该文本的特定值。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T14:22:48.597

这是典型的`Key,Value`绑定。我将使用`Dictionary`, 作为示例。因此，假设您已经使用正确的值填充了 Dictionary，代码可能如下所示：

```
ComboBox1.DataSource = yourDictionary.ToList
ComboBox1.DisplayMember = "Value"
ComboBox1.ValueMember = "Key" 
```

然后，您可以使用`ComboBox1.SelectedValue`属性选择值。

# javascript - 如何阻止 jar 文件从 jsp 运行

> ID：15173904
> 
> 赞同：0
> 
> 时间：2013-03-02T11:24:17.403
> 
> 标签：javascript, jsp, web-applications, jar, processing

我创建了一个可以触发一些 .jar 小程序的 Web 应用程序。
我通过jsp中的servlet打印带有HTML标签的jar。

想象两种情况。A anb B.
从 A 开始运行 jar。
我去 B，第二个罐子取代了第一个罐子。
当我返回 A 时，第二个 jar 被删除，但第一个 jar 未能以*添加相同的 VBO 两次 + 空指针异常开始。*

所以我相信我必须在离开情况 A 后停止它。
**有没有办法阻止 .jar 从 servlet 内部运行？**

提前致谢。

**添加了堆栈跟踪：**

> 两次添加相同的 VBO。线程“动画线程”P3D 中的异常：已调用​​ beginDraw()。javax.media.opengl.GLException：在 jogamp.opengl.ThreadingImpl.invokeOnOpenGLThread(ThreadingImpl.java:196) 处的 jogamp.opengl.awt.AWTThreadingPlugin.invokeOnOpenGLThread(AWTThreadingPlugin.jav‌​a:98) 处的 java.lang.NullPointerException。 media.opengl.Threading.invokeOnOpenGLThread(Threading.java:164) at javax.media.opengl.awt.GLCanvas.maybeDoSingleThreadedWorkaround(GLCanvas.java:83‌​1)

# emacs - 可以使emacs org-mode 将以% 开头的行视为注释吗？

> ID：15173906
> 
> 赞同：2
> 
> 时间：2013-03-02T11:24:32.310
> 
> 标签：emacs, comments, org-mode

我知道我可以通过在 org-mode 中添加前缀来将一行标记为注释`#`。是否可以为以“%”开头的行配置相同的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:00:11.353

```
(font-lock-add-keywords
  'org-mode `(("^[ \t]*\\(#\\)[ +\n].*$"
      (0 (compose-region
      (match-beginning 1) (match-end 1) ?%))))) 
```

这会显示一个`%`字符，即使它是一个`#`字符。您仍然需要使用# 插入注释，但它们会按照您的意愿显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T00:18:54.090

你可能认为这不是一个真正的答案，但它是......

**不要，只需使用#**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T19:40:35.240

我刚刚尝试从以下功能修改`org.el`：

```
(defun org-at-comment-p nil
  "Is cursor in a line starting with a # character?"
  (save-excursion
    (beginning-of-line)
    (looking-at "^#"))) 
```

通过更改诸如 的正则表达式`^[#%]`，但没有运气。

该`#`字符在 org-mode 中的*许多*地方都被硬编码。

# python - Django - AuthenticationMiddleware 设置 request.user

> ID：15173907
> 
> 赞同：3
> 
> 时间：2013-03-02T11:24:40.960
> 
> 标签：python, django, authentication, django-middleware

关于`AuthenticationMiddleware`，为什么 Django 1.3 会`user`在类级别处理属性，为什么在 1.4 中将其更改为实例属性？

**这是从 1.3**

```
class LazyUser(object):
    def __get__(self, request, obj_type=None):
        if not hasattr(request, '_cached_user'):
            from django.contrib.auth import get_user
            request._cached_user = get_user(request)
        return request._cached_user

class AuthenticationMiddleware(object):
    def process_request(self, request):
        request.__class__.user = LazyUser()
        return None 
```

**这从 1.4**

```
def get_user(request):
    if not hasattr(request, '_cached_user'):
        request._cached_user = auth.get_user(request)
    return request._cached_user

class AuthenticationMiddleware(object):
    def process_request(self, request):
        assert hasattr(request, 'session'), "The Django authentication middleware requires session middleware to be installed. Edit your MIDDLEWARE_CLASSES setting to insert 'django.contrib.sessions.middleware.SessionMiddleware'."

        request.user = SimpleLazyObject(lambda: get_user(request))
        # SimpleLazyObject inherits from LazyObject 
```

在 1.3 中，我理解`process_request`分配`LazyUser()`给类级别的`user`属性，这对我来说基本上意味着两件事：

*   类`HttpRequest`( )在两个请求之间`request.__class__`存储了它的属性，因此未来的对象可以访问它。`user``request`
*   每当视图函数尝试访问`request.user`时，都会触发`LazyUser`对象的`__get__`方法并从请求的缓存或身份验证存储中返回一个用户对象。

**我说得对吗？**

另外，我在 1.4 中注意到了这两个主要变化：

*   `SimpleLazyObject`被分配给`request`，而不是它的类（因此，它是一个实例属性）。
*   `LazyObject`并且`SimpleLazyObject`不要定义（自定义）他们自己的`__get__`方法。

**这样，什么时候`get_user`触发？**
**现在如何`AuthenticationMiddleware`在两个请求之间存储request.user，并覆盖Http的无状态？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:30:55.927

不，这两个版本是等效的。不过 1.4 版本更简单。

## 它过去是如何工作的

该`LazyUser`对象实现了[描述符协议](http://docs.python.org/2/howto/descriptor.html)。

描述符理解起来有点复杂，但这里的总体思路是，虽然`user`是类属性，但访问`request.user`woud call `request.__class__.user.__get__(request)`，因此让`__get__`方法访问请求参数，它将用于返回绑定到请求的用户。

## 现在如何运作

该`user`属性使用该`SimpeLazyObject`构造来实现相同的目标：如果不需要，避免加载所有用户机器。

至于何时`get_user`调用：

`request.user`例如，当您访问 上的属性时，将调用`request.user.attr1`then ，然后再`request.user.__getattr__('attr1')`调用`request.user._setup()`，最终将调用`get_user`。

## Django 如何创建有状态

通过使用会话。看看 django 的 session 中间件。

# xcode - xcode中是否有任何调试器区域样式机制

> ID：15173913
> 
> 赞同：2
> 
> 时间：2013-03-02T11:25:33.820
> 
> 标签：xcode

基本上，调试器区域在 XCode 中采用随机字体（有些粗体有些浅色）。在打印日志和所有内容时是否有任何样式。我的意思是增加通过代码指定的字体、大小和颜色。

了解首选项中的主题设置。我正在通过 Obj-C 代码寻找东西。可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T12:57:38.617

可以在 Xcode 首选项中更改调试器控制台的字体和颜色。

![控制台样式](../Images/c24c87ef907791ebad383c6d9032c93e.png)

# algorithm - 确定是否存在包含线性时间给定边的 MST

> ID：15173922
> 
> 赞同：2
> 
> 时间：2013-03-02T11:26:42.963
> 
> 标签：algorithm, graph-algorithm, minimum-spanning-tree, kruskals-algorithm

令 G = (V, E) 为加权、连通且无向图，令 e 为 E 中的任意边。展示一个线性时间算法，该算法决定是否存在包含边 e 的最小生成树。

我设法为问题 1 找到了一个奇怪的“解决方案”，它似乎有效，但我认为它不是线性的：

他们建议对每条边 (u,v) 使用 union find 并执行 Union(u,v)，使得 W(u,v) < W(e)。现在，假设 e = (x,y)。现在如果 find(x) != find(y) 那么 x 和 y 没有连接，W(e) 肯定是 Kruskal 算法检查的下一个权重，所以肯定存在一个包含边缘的 MST e.

另一方面，如果 find(x) = find(y) 那么如果我们将 Kruskal 算法运行到这一点，x 和 y 肯定会连接，所以我们不能将边 e 添加到任何 MST（通过操纵具有相同权重的边的排序顺序 - Kruskal 算法可用于创建任何 MST）。

我不明白为什么这是线性的？由于工会，它不应该花费 O( |E| alpha(|V|) ) 吗？

也许还有另一种方法可以在线性时间内做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T15:43:54.407

如果我们将 Kruskal 算法带到“这个”点，标记到目前为止构建的连接组件，并将所有丢弃的边添加回来，每个连接组件仍将包含与之前相同的所有顶点（丢弃的边只会添加循环，而不是连接不同的组件） . 所以我们只需要检查*e*是否连接了由严格比*e*轻的边组成的两个不同的连通分量。查找连接的组件是一项线性时间工作。

# android - 使用 Gradle 的外部 Android 库项目

> ID：15173923
> 
> 赞同：16
> 
> 时间：2013-03-02T11:26:44.983
> 
> 标签：android, maven, build, gradle

我正在尝试使用 Gradle 和[Android Gradle 插件](http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system)构建一个 Android 项目。我想依赖在外部（maven）存储库中找到的库项目，例如 ActionBarSherlock。

根据[官方网站](http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system#TOC-Using-Library-Projects)，这似乎是可能的：

> 使用库是通过以下方式之一完成的：
> 
> 多项目设置。在这里阅读：http: [//www.gradle.org/docs/current/userguide/multi_project_builds.html](http://www.gradle.org/docs/current/userguide/multi_project_builds.html)
> 
> **通过诸如 maven 或 ivy 之类的 repo 进行依赖。**

我的 build.gradle 的当前内容：

```
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.2'
    }
}
apply plugin: 'android'

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.actionbarsherlock:library:4.2.0'
}

android {
    target = 'android-16'
    sourceSets {
        main {
            manifest {
                srcFile 'AndroidManifest.xml'
            }
            java {
                srcDir 'src'
            }
            res {
                srcDir 'res'
            }
            assets {
                srcDir 'assets'
            }
            resources {
                srcDir 'src'
            }
        }
    }
} 
```

我正在使用 Gradle 1.2。当我尝试使用 构建时`gradle assemble`，我收到以下错误：

```
Error: duplicate files during packaging of APK /[path to project]/build/apk/[project name]-debug-unaligned.apk
    Path in archive: AndroidManifest.xml
    Origin 1: /[path to project]/build/libs/[apk name]-debug.ap_
    Origin 2: /[home directory]/.gradle/caches/artifacts-14/filestore/com.actionbarsherlock/actionbarsherlock/4.2.0/apklib/dd63451a922558005d8c10be1085b488ed731d19/actionbarsherlock-4.2.0.apklib
:packageDebug FAILED 
```

似乎它正在尝试从库项目和我的项目中包含 AndroidManifest.xml。如果我删除 中的`manifest`规范`sourceSets`，我仍然会收到相同的错误。

该网站提到`apply plugin: 'android-library'`用于图书馆项目；我猜这只是在构建实际库（使用多项目设置）时，因为这样做不会产生 APK。

如何让外部 Android 库项目依赖项工作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-13T01:23:05.233

虽然可以通过 Maven 或 Ivy 存储库获取依赖项，但这些依赖项并未打包在标准 Jar 存档中。有一种专门为此构建系统设计的新格式。类型是'aar'

Maven Central 上可用的当前 Android 库是使用 Maven 插件创建的，该插件使用不同的存档格式（“apklib”），因此它们不兼容。

如果您查看 com.actionbarsherlock:actionbacksherlock（这是该库的新位置），您会看到它的格式是 apklib。 [http://search.maven.org/#artifactdetails%7Ccom.actionbarsherlock%7Cactionbarsherlock%7C4.2.0%7Capklib](http://search.maven.org/#artifactdetails%7Ccom.actionbarsherlock%7Cactionbarsherlock%7C4.2.0%7Capklib)

查看源代码，我们检查“aar”包装并恢复将所有其他包装为“jar”，这显然是一个问题。我们应该检测 apklib 并提供更好的错误消息。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-10T11:46:28.447

您现在可以将 ActionBarSherlock 集成为 aar。

只需将其添加到 build.gradle 文件中的依赖项定义中：

```
dependencies {
    compile 'com.android.support:support-v4:18.0.+'
    compile 'com.actionbarsherlock:actionbarsherlock:4.4.0@aar' 
```

Jake Wharton 发布了一个[示例项目](https://github.com/JakeWharton/ActionBarSherlock-Gradle-Sample)，展示了如何将 ActionBarSherlock 与 Gradle 一起使用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T07:18:12.860

您使用的是旧版本的 android gradle 插件。
在最新的 0.3 版本中，这方面进行了很多改进。

我建议你升级到这个插件的 0.3 版。另请注意，您必须使用更新版本的 gradle（1.3 或 1.4）。

有关如何在此插件中使用[外部库的更多信息。](http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Dependencies-on-binary-packages)

# ios - 如何使用左侧的后退按钮创建导航栏？

> ID：15173926
> 
> 赞同：2
> 
> 时间：2013-03-02T11:27:07.203
> 
> 标签：ios, cocoa-touch, interface-builder, uinavigationbar

在我的应用程序中，我试图使用导航栏后退按钮从第二个 ViewController 导航到第一个 ViewController，但是在我的应用程序的 XIB 中将导航栏拖放到 ViewController 上时，我只能获得带有标题的栏。

我究竟做错了什么？我正在使用 Xcode 4.6。和 .xib 文件来设计视图。这是我现在得到的：

![没有返回按钮的导航栏](../Images/44f6166a72e4e75846b720dbcb42b223.png)

这就是我要找的东西：

![带返回按钮的导航栏](../Images/7de4d6869be863376e2890b221195947.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:52:20.700

导航控制器提供了一个默认的导航栏和一个后退按钮。但是后退按钮标题的改变是一件有点乱的事情

**以编程方式**

```
 UIStoryboard *astoryBoard=[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
    ViewController2 *vc=[astoryBoard instantiateViewControllerWithIdentifier:@"ViewController2"];

    UIBarButtonItem *newBackButton = [[UIBarButtonItem alloc] initWithTitle: @"Master" style: UIBarButtonItemStyleBordered target: nil action: nil];
    [[self navigationItem] setBackBarButtonItem: newBackButton];
    [self.navigationController pushViewController:vc animated:YES]; 
```

如果您使用**segue**，请将这些行包含到父 VC

```
 UIBarButtonItem *newBackButton = [[UIBarButtonItem alloc] initWithTitle: @"Master" style: UIBarButtonItemStyleBordered target: nil action: nil];
    [[self navigationItem] setBackBarButtonItem: newBackButton]; 
```

**只为回来**

代码明智

```
 UIStoryboard *astoryBoard=[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
        ViewController2 *vc=[astoryBoard instantiateViewControllerWithIdentifier:@"ViewController2"];
        [self.navigationController pushViewController:vc animated:YES]; 
```

不是故事板

创建第二个 VC 的实例，然后使用此代码

```
YourViewController *VC=[[YourViewController alloc]initWithNibName:@"yournibname" bundle:[NSBundle mainBundle]];
        [self.navigationController pushViewController:VC animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:32:44.203

在您的 BUS2AppDelegate.h 文件中添加此代码

```
@interface BUS2AppDelegate : UIResponder <UIApplicationDelegate>
{
     UINavigationController *navController;   //you have added this code?
}
@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;
    @end 
```

并在 BUS2AppDelegate.m 文件中

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
     self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        // Override point for customization after application launch.
    self.viewController = [[BUS2ViewController alloc] initWithNibName:@"BUS2ViewController" bundle:nil];

    // View Controller with each Navigational stack support.
    navController = [[UINavigationController alloc]
                     initWithRootViewController:self.viewController];
    self.window.rootViewController = navController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

在您的第一个视图控制器中添加此代码

```
#import "AAlesund.h"

- (IBAction)secodVCBtnClicked:(id)sender {

    AAlesund *aAlesund = [[AAlesund alloc] initWithNibName:@"AAlesund" bundle:nil];

self.navigationItem.title = @"Master";
    [self.navigationController pushViewController:aAlesund  animated:NO];
} 
```

要在第二个视图控制器的导航栏中添加标题，请添加此代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UILabel *nav_title1 = [[UILabel alloc] initWithFrame:CGRectMake(60, 10, 220, 25)];
    nav_title1.font = [UIFont fontWithName:@"Arial-BoldMT" size:18];
    nav_title1.textColor = [UIColor whiteColor];
    nav_title1.adjustsFontSizeToFitWidth = NO;
    nav_title1.textAlignment = UITextAlignmentCenter;
    nav_title1.text = @"Detail";
    nav_title1.backgroundColor = [UIColor clearColor];
    self.navigationItem.titleView = nav_title1;
} 
```

这是输出。

![在此处输入图像描述](../Images/251897cda8db175810845263ac11b413.png)

# java - Java不同的函数返回类型

> ID：15173933
> 
> 赞同：0
> 
> 时间：2013-03-02T11:28:14.050
> 
> 标签：java, oop, function, return, return-type

在Java编程教程中，我看到了这个例子：

```
public ClassName open()
{
    code....
} 
```

我对使用类名有点困惑。我习惯于创建这样的方法：

```
public void open()
{
    code...
} 
```

有人能解释一下吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T11:30:03.457

一个`void`函数什么也不返回，而第一个例子返回一个`ClassName`对象。

例如：

```
public int getInt() {
    return 1;
} 
```

在此示例中，返回一个整数。因此，该方法必须定义它将返回什么类型的对象。

或者在您的情况下，可能有意义的是以下内容：

```
public User getLoggedInUser() {
    User user = SomeDeviceClass.getLoggedInUser();
    return user;
} 
```

阅读材料：[http ://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html](http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:30:19.683

在该教程中，程序员必须返回类的任何对象作为`ClassName`返回类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T11:36:27.813

函数的返回类型可能是类的对象。

```
 public ClassName open()
    {
       ClassName obj;
.
.
.
.
       return obj;
    } 
```

# jquery - jquery mobile ajax css刷新

> ID：15173934
> 
> 赞同：0
> 
> 时间：2013-03-02T11:28:23.547
> 
> 标签：jquery, jquery-mobile

使用 ajax 呈现部分视图，然后成功需要显示新数据（哪些有效）但没有应用 css，想法？

```
$.ajax({
                     url: baseUrl,
                     type: 'GET',
                     data: { date: date },
                     success: function (response) {
                         $('#schedule').html(response);
                     },
                     complete:function() {  $('#listId').listview('refresh');
                     },

                 }); 
```

看法

```
 <ul data-role="listview" data-divider-theme="b" data-inset="true" id="listId">
                    <li data-role="list-divider" role="heading">
                        @Model.AppointmentDate
                    </li>
                    @foreach (var item in Model.Appointments)
                    {
                        <li data-theme="c">
                            <a href="/Schedule/MobileAppointmentEdit/@item.Id" data-transition="slide">
                                @item.StartTime @item.Name
                            </a>
                        </li>
                    }

                </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:39:54.393

您应该在 ajax 成功但不是 ajax 完成时刷新 ul。这是因为jquery mobile在页面初始化时应用了css，用于动态检索的数据。您必须触发一个事件来刷新 UI。

jQuery Mobile 列表视图参考​​：http: [//jquerymobile.com/demos//1.2.0/docs/lists/lists-methods.html](http://jquerymobile.com/demos//1.2.0/docs/lists/lists-methods.html)

```
success: function (response) {
   $('#schedule').html(response);
   $("#schedule ul").listview();
}, 
```

# android - Eclipse ADT 21 不包括 android 应用程序中的依赖项目

> ID：15173937
> 
> 赞同：0
> 
> 时间：2013-03-02T11:28:33.897
> 
> 标签：android, eclipse, adt, dependency-management

我有一个 Android 应用程序，它依赖于定义为 Eclipse 项目的非 Android 特定的纯 Java 库。我已使用 Build Path/Projects 选项卡将其添加为依赖项，并在 Build Path/Order 和 Export 上对其进行了检查。但是当我尝试运行该项目时，我得到如下 logcat 错误：

```
03-02 11:05:58.615: W/dalvikvm(2292): Link of class 'Lnet/meridiandigital/polltest/MainActivity$5;' failed
03-02 11:05:58.615: E/dalvikvm(2292): Could not find class 'net.meridiandigital.polltest.MainActivity$5', referenced from method net.meridiandigital.polltest.MainActivity.<init>
03-02 11:05:58.615: W/dalvikvm(2292): VFY: unable to resolve new-instance 575 (Lnet/meridiandigital/polltest/MainActivity$5;) in Lnet/meridiandigital/polltest/MainActivity;
03-02 11:05:58.615: W/dalvikvm(2292): VFY: unable to resolve virtual method 3316: Limap/IMAPConnection;.noop ()V
03-02 11:05:58.615: W/dalvikvm(2292): VFY: unable to resolve exception class 471 (Limap/IMAPException;)
03-02 11:05:58.615: W/dalvikvm(2292): VFY: unable to find exception handler at addr 0x26
03-02 11:05:58.615: W/dalvikvm(2292): VFY:  rejected Lnet/meridiandigital/polltest/MainActivity;.alarm ()V
03-02 11:05:58.615: W/dalvikvm(2292): VFY:  rejecting opcode 0x0d at 0x0026
03-02 11:05:58.615: W/dalvikvm(2292): VFY:  rejected Lnet/meridiandigital/polltest/MainActivity;.alarm ()V
03-02 11:05:58.615: W/dalvikvm(2292): Verifier rejected class Lnet/meridiandigital/polltest/MainActivity;
03-02 11:05:58.625: W/dalvikvm(2292): Class init failed in newInstance call (Lnet/meridiandigital/polltest/MainActivity;) 
```

依赖项目包含所有`imap/`类的定义，并且`$5`是该库中定义的接口的实现，因此它肯定是罪魁祸首。

任何想法为什么我的项目没有被链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:45:12.630

更新到 ADT21.1 修复了这个问题，所以它可能是 21.0 中的一个错误。

# android - Android扩展文件创建ZIP还是JOBB？

> ID：15173938
> 
> 赞同：2
> 
> 时间：2013-03-02T11:28:38.703
> 
> 标签：android, apk-expansion-files

我正在为我的 apk 创建超过 100mb 大小的扩展文件。

我应该如何使用来自 sdk 的 JOBB 或默认 Windows 存档文件创建扩展存档..

并且任何工作示例项目链接也将不胜感激..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-27T12:07:11.077

没错，看看[文档](http://developer.android.com/google/play/expansion-files.html)是怎么说的：

**从 ZIP 读取媒体文件**

如果您使用扩展文件来存储媒体文件，ZIP 文件仍然允许您使用提供偏移和长度控制的 Android 媒体播放调用（例如 MediaPlayer.setDataSource() 和 SoundPool.load()）。为了使其正常工作，您在创建 ZIP 包时不得对媒体文件执行额外的压缩。例如，使用 zip 工具时，应使用 -n 选项指定不应压缩的文件后缀：

使用 Linux 命令行的示例：

```
zip -r -0 main.1.com.my.pkg.obb media_files/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:58:18.743

最后我最终使用了压缩较少的 zip 存档。它可以通过 winrar 使用压缩方法“store”轻松创建

如果您只想将媒体/文件存储在扩展文件中，只需使用 zip 文件。注意：您可以使用 android sdk 中的 zip align 来优化您的文件内存。

# iphone - 电子邮件附件、PDF 和 CSV 的问题

> ID：15173941
> 
> 赞同：2
> 
> 时间：2013-03-02T11:28:51.910
> 
> 标签：iphone, ios, cocoa-touch, qlpreviewcontroller, uti

我正在使用 PDF 生成，它生成了 PDF，使用 查看`QLPreviewController`，除了邮件转发之外一切正常，我有两个 .pdf 和 .csv 类型的附件。我在发送电子邮件时遇到以下问题。

*   有时在发送电子邮件时没有附件
*   当 pdf 包含图像时，pdf 大小会非常大（一页 pdf 为 10 mb，如果它包含图像）

    问题是在设备中进行测试时，在模拟器中一切正常......，我在这里知道一些与导出或导入 UTI 相关的问题[，](https://stackoverflow.com/questions/5408029/xcode-4-document-types-and-exported-utis) 因为我是初学者，我觉得很难理解，我认为我必须在某处添加一些 UTI ..谁能帮我找出问题并解决，拜托。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:21:12.650

> **1.附件问题**

将 mime 类型设置为 text/csv 而不是 application/csv 或 image/csv。代码如下图

```
[mailComposer addAttachmentData:[NSData dataWithContentsOfFile:self.csvFilePath]
                               mimeType:@"text/csv" fileName:[NSString stringWithFormat:@"csvPage.csv" ]]; 
```

> **1.尺寸问题**

我挣扎了很多..最后当使用下面的代码将jpeg格式的图像写入pdf页面时，尺寸减小了十倍！

```
UIImage *lowResImage = [UIImage imageWithData:UIImageJPEGRepresentation(plotImage, 0.02)]; 
```

# d - 检测 D 中纯函数的非变异调用语句

> ID：15173942
> 
> 赞同：0
> 
> 时间：2013-03-02T11:28:53.100
> 
> 标签：d, function-call, dmd, in-place

我相信 D 有可能在其编译器套件中添加另一个很酷的功能，即禁止对纯函数进行非副作用调用的能力。

例如

```
auto s = "a";
toStringz(a); 
```

应该像错误一样

```
a == ""; 
```

目前 DMD 中的错误为

```
Error: == has no effect in expression (s == "") 
```

这样的功能可以防止程序员在期望它具有就地（变异）语义时*意外调用非静音算法。*这无需使用 GCC 的属性等显式标记`__attribute((warn_unused_result))`函数`__attribute((const))`。

DMD 的待办事项列表中有这样的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:43:25.093

DMD 没有官方的 TODO 列表。它的开发主要基于志愿者的工作，虽然一些增强请求在 bugzilla 中获得了“预先批准”的标签，但它并没有说明什么时候可以实现这个功能或者根本不会实现这个功能。

鉴于现在有很多更严重的问题需要解决，我几乎不能指望在不久的将来实施一些次要的事情。

此外，您的问题实际上看起来像提案，更适合官方 DMD/Phobos bugzilla：[http ://d.puremagic.com/issues/](http://d.puremagic.com/issues/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:39:11.447

问题在于 D 大量使用模板。您并不总是可以控制模板或其参数。例如：

```
class Foo{
    /*...*/
    pure int foo(){
        /*...*/
    }
    /*...*/
}

void bar(T)(T arg){
    /*...*/
    arg.foo();
    /*...*/
} 
```

现在你不能`bar`用`Foo`参数调用。这可以通过删除`foo`' 的纯粹性（这可能会破坏代码和/或损害性能）或`bar`将`foo()`' 的结果更改为变量（这也很糟糕，因为它从不使用该值并且因为`foo`' s 返回类型可能是 void 甚至更糟 -`struct`带有析构函数的 a（它的调用将被推迟到`bar`' 的执行结束）。当然 - 只有当你可以改变`Foo`或`bar`......

# ruby-on-rails - RSpec：特性和请求规范有什么区别？

> ID：15173946
> 
> 赞同：116
> 
> 时间：2013-03-02T11:29:08.467
> 
> 标签：ruby-on-rails, rspec, rspec-rails

[Rspec 的功能规范](https://www.relishapp.com/rspec/rspec-rails/v/2-13/docs/feature-specs/feature-spec)和[请求规范](https://www.relishapp.com/rspec/rspec-rails/v/2-13/docs/request-specs/request-spec)之间的概念区别是什么？

从功能规范文档：

> 功能规范是高级测试，旨在通过应用程序执行部分功能。他们应该只通过其外部接口驱动应用程序，通常是网页。

对于请求规格：

> 请求规范为 Rails 的集成测试提供了一个精简的包装器，旨在通过整个堆栈驱动行为，包括路由（由 Rails 提供）和没有存根（这取决于你）。使用请求规范，您可以：
> 
> *   指定单个请求
> *   跨多个控制器指定多个请求
> *   跨多个会话指定多个请求

我知道功能规范使用[Capybara](http://jnicklas.github.com/capybara/)而请求规范不使用。但这几乎不值得不同的概念。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-03-04T03:06:39.910

概念上的区别在于您通常在测试用户故事，并且所有交互都应通过用户界面驱动。这就是 Capybara 的用武之地。请求规范仍在测试您的应用程序的行为，并且没有验收测试所具有的可读性期望。因此，改进了验收测试语法的功能就在那里。

技术差异包括请求规范包含 Rails 集成测试，而功能规范则没有。这意味着通过请求规范，您可以针对响应使用 get、post、put、delete 和 assert 方法。使用功能规范，您应该通过浏览器驱动所有交互，并使用访问和断言页面等方法。

我建议阅读 github 上 rspec-rails 源代码中的 feature_spec.feature。我希望这有帮助。

# android - 如何在android中链接没有地图活动的地图视图？

> ID：15173953
> 
> 赞同：0
> 
> 时间：2013-03-02T11:29:50.443
> 
> 标签：android, android-mapview, android-maps

在我的应用程序中，我使用包含函数在主布局中使用两个布局。在这两种布局中，一种布局是地图视图。是否可以在没有 MapActivity 的情况下将该地图视图与主要活动链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:02:06.840

它取决于设计“ `Google`”现在有办法将它们分开你可以在这里查看

[在没有 MapActivity 的情况下使用 Android MapView？](https://stackoverflow.com/questions/8488516/using-android-mapview-without-the-mapactivity)

# iphone - 什么是应用程序登录如何在 iphone 上工作..？

> ID：15173957
> 
> 赞同：0
> 
> 时间：2013-03-02T11:30:04.130
> 
> 标签：iphone, ios, objective-c, addressbook

我只是很好奇，想知道什么是应用程序如何显示所有朋友的列表..？我的意思是，一旦您使用您的电话号码登录应用程序，它是否会从通讯录中获取所有联系人电话号码并将其发送到服务器（可以这样做吗？如果您访问某人的联系人列表并转移所有联系人，苹果可以拒绝您的应用程序吗？数据到您的服务器？）

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T11:37:24.217

是的，whats app 确实会将您的所有联系人列表发送到服务器，然后服务器会返回谁安装了 whats app。Apple 不会拒绝您的申请，因为这是它的工作方式。

但更喜欢在发送到服务器时加密联系人列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:40:21.080

看[这里](http://www.whatsapp.com/faq/en/general/20971813)。

> WhatsApp 会查看您通讯录中的电话号码，然后检查其中哪些号码已在 WhatsApp 中注册。这允许您通讯录中的任何 WhatsApp 用户在您的收藏夹/选择联系人屏幕和聊天中显示为联系人。

# c++ - 如何创建带有状态的游戏菜单

> ID：15173959
> 
> 赞同：5
> 
> 时间：2013-03-02T11:30:08.077
> 
> 标签：c++, opengl, glew, freeglut

我曾经并且一直在寻找有关如何制作游戏菜单的示例。例如，我想让应用程序打开菜单。从那里它会打开“玩游戏”“显示积分”“退出”。

到目前为止我所看到的一切都是弹出菜单..

因此，我正在寻找的答案是关于使用“状态”，例如暂停状态、游戏状态等。但我无法弄清楚这应该是什么布局或应该如何使用它。也不知道如何创建 MenuState 并且找不到任何地方的例子

使用 glut 和 freeglew

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T11:35:47.003

## 图形用户界面实现

基本思想是在摄像机前创建一些带纹理的四边形，当用户点击屏幕时，将其转换为世界空间，并找出他们点击的是哪个四边形，以及点击了哪个按钮。您可能会发现正交投影是这里的方法。

确切的实现将取决于您如何与键盘和鼠标（GLUT、SDL 等）进行交互。

您可能需要考虑使用 GUI 框架，例如[CEGUI](http://www.cegui.org.uk/wiki/index.php/Using_CEGUI_with_SDL_and_OpenGL_%280.7%29)、[FLTK](http://www.fltk.org/)或类似的，尽管这通常是一项复杂的任务。

## 游戏状态

游戏状态是一种从用户通过游戏的过程中抽象出来的简单方法。它允许您将游戏的不同区域建模为 DFA 上的节点或使用堆栈。然后，您可以通过创建 GameState 对象继承的 api 来实现这一点。然后，您可以通过从该接口派生类来实现不同类型的游戏状态。

接口本身可以提供方法来允许在激活状态和“暂停”等类似情况时通知状态。

如果使用 DFA 管理状态，则有一个活动状态表示当前节点 DFA。然后状态可以根据对游戏的输入（单击菜单中的播放按钮等）选择要进入的新状态。

如果您使用堆栈管理游戏状态，情况会有所不同。首先，将菜单状态推到堆栈上，然后选择级别时，您也可以将其推入堆栈。当关卡结束时，状态从堆栈中弹出，用户返回主菜单状态。

一个简单的游戏引擎的例子在这里：[https](https://bitbucket.org/iwillspeak/thulium/src) ://bitbucket.org/iwillspeak/thulium/src 。`GameState`是游戏状态的基类。这些由`GameStateFactory`. `SampleState`是一个示例游戏状态实现。

# string - 为什么最长公共子串不是词干算法的解决方案？

> ID：15173960
> 
> 赞同：4
> 
> 时间：2013-03-02T11:30:12.193
> 
> 标签：string, algorithm, search, language-agnostic, search-engine

我正在阅读一个词干，这是将单词匹配到一个共同的根的问题，并且似乎是搜索引擎中的一个标准问题。
当我第一次想到这个问题时，我认为这是最长公共子串问题应用于`N`单词的经典应用。
例如，对于单词来说`{computation, compute, computers}`，最长的公共子串是`compute`，这是词干/词根。
但我读到这不是问题的解决方案。实际上，这[似乎](http://en.wikipedia.org/wiki/Stemming)甚至不是一个考虑因素，其他方法（后缀去除、随机等）是标准解决方案。

我的问题是：为什么最长的公共子字符串`N`不能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:40:52.550

在许多语言中，语言词干通常不是公共子串。例如，动词“to be”在许多语言中是非常不规则的。

即使是英文名词，也有例外的例子，例如 { index, indices, indices }。您真的想使用“索引”作为词干；如果您使用更短的“ind”作为词干，则会发生冲突，在这种情况下，独立政治家的政党缩写为“ind”。

# php - 使用 jQuery 和 PHP 序列化和提交表单

> ID：15173965
> 
> 赞同：52
> 
> 时间：2013-03-02T11:31:09.527
> 
> 标签：php, jquery, forms, serialization, form-submit

我正在尝试使用 jQuery 发送表单的数据。但是，数据不会到达服务器。你能告诉我我做错了什么吗？

我的 HTML 表单：

```
<form id="contactForm" name="contactForm" method="post">
    <input type="text" name="nume" size="40" placeholder="Nume">
    <input type="text" name="telefon" size="40" placeholder="Telefon">
    <input type="text" name="email" size="40" placeholder="Email">
    <textarea name="comentarii" cols="36" rows="5" placeholder="Message"></textarea> 
    <input id="submitBtn" type="submit" name="submit" value="Trimite">
</form> 
```

JavaScript（在与上述形式相同的文件中）：

```
<script type="text/javascript">
    $(document).ready(function(e) {

        $("#contactForm").submit(function() {
            $.post("getcontact.php", $("#contactForm").serialize())
            // Serialization looks good: name=textInNameInput&&telefon=textInPhoneInput etc
            .done(function(data) {
                if (data.trim().length > 0) {
                    $("#sent").text("Error");   
                } else {
                    $("#sent").text("Success");
                }
            });

            return false;
        })
    });
</script> 
```

服务器端 PHP ( */getcontact.php* ):

```
$nume = $_REQUEST["nume"]; // $nume contains no data. Also tried $_POST
$email = $_REQUEST["email"];
$telefon = $_REQUEST["telefon"];
$comentarii = $_REQUEST["comentarii"]; 
```

你能告诉我我做错了什么吗？

* * *

## 更新

检查`var_dump($_POST)`并返回一个空数组。

奇怪的是，在我的本地机器上测试的相同代码工作正常。如果我将文件上传到我的托管空间，它就会停止工作。我尝试在不使用 jQuery 的情况下做一个老式的表单，并且所有数据都是正确的。

我不明白这将是一个服务器配置问题。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-03-02T12:10:22.520

你可以使用这个功能

```
var datastring = $("#contactForm").serialize();
$.ajax({
    type: "POST",
    url: "your url.php",
    data: datastring,
    dataType: "json",
    success: function(data) {
        //var obj = jQuery.parseJSON(data); if the dataType is not specified as json uncomment this
        // do what ever you want with the server response
    },
    error: function() {
        alert('error handling here');
    }
}); 
```

返回类型为 json

编辑：我[`event.preventDefault`](http://api.jquery.com/event.preventDefault/)用来防止浏览器在这种情况下被提交。

为答案添加更多数据。

`dataType: "jsonp"`如果是跨域调用。

`beforeSend:`// 这是一个预请求回调函数

`complete:`// 请求结束后要调用的函数。所以无论成功或错误都必须执行的代码可以放在这里

`async:`// 默认情况下，所有请求都是异步发送的

`cache:`// 默认为真。如果设置为 false，它将强制浏览器不缓存请求的页面。

[在这里](http://api.jquery.com/jquery.ajax/)找到官方页面

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-08-17T16:53:33.513

您可以使用表单数据添加额外的数据

使用 serializeArray 并添加附加数据：

```
var data = $('#myForm').serializeArray();
    data.push({name: 'tienn2t', value: 'love'});
    $.ajax({
      type: "POST",
      url: "your url.php",
      data: data,
      dataType: "json",
      success: function(data) {
          //var obj = jQuery.parseJSON(data); if the dataType is not     specified as json uncomment this
        // do what ever you want with the server response
     },
    error: function() {
        alert('error handing here');
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-11T06:39:12.023

```
 $("#contactForm").submit(function() {

    $.post(url, $.param($(this).serializeArray()), function(data) {

    });
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T11:38:03.483

如果表单中的数据已正确序列化，您是否在控制台中检查过？ajax请求成功了吗？此外，您没有关闭占位符引号，这可能会导致一些问题：

```
 <textarea name="comentarii" cols="36" rows="5" placeholder="Message> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T12:12:45.870

如果 POST 或 GET，您是否查看过萤火虫？

检查控制台显示。

放入测试脚本：

```
console.log(data); 
```

你可以看到来自服务器的响应，如果它显示了什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-20T11:43:53.800

两端注册或用户在通过表单提交完成注册时通过 ajax 自动注册到“Shouttoday”。

```
var deffered = $.ajax({
     url:"code.shouttoday.com/ajax_registration",
     type:"POST",
     data: $('form').serialize()
    }); 

        $(function(){ 
            var form;
            $('form').submit( function(event) {
                var formId = $(this).attr("id");
                    form = this;
                event.preventDefault();
                deffered.done(function(response){
                    alert($('form').serializeArray());alert(response);
                    alert("success");
                    alert('Submitting');
                    form.submit();
                })
                .error(function(){
                    alert(JSON.stringify($('form').serializeArray()).toString());
                    alert("error");
                    form.submit();
                });
            });
         }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-19T06:39:15.807

问题可能是PHP配置：

请检查php.ini 文件中的**max_input_vars设置。**

例如，尝试将此设置的值增加到 5000。

```
max_input_vars = 5000 
```

然后重新启动您的网络服务器并尝试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-25T00:05:28.507

这是@rahulbhondave答案的更详细和解释的版本

```
$('#my-button').click(function () {
    $.post(this.form.action, $(this.form).serializeArray(),
            function (successMessage) {
                console.log(
                    successMessage
                );
            },
            "json"
        )
        .done(function () {
            alert("second success");
        })
        .fail(function () {
            alert("error");
        })
        .always(function () {
            alert("finished");
        });
}); 
```

# android - 如何在活动忙时避免黑屏以开始从服务器播放视频

> ID：15173968
> 
> 赞同：0
> 
> 时间：2013-03-02T11:31:39.510
> 
> 标签：android, android-mediaplayer

我在单击按钮时打开一个活动，如果我单击按钮，下一个活动是从服务器播放视频，它发生黑色，5-6 秒后它开始播放视频，如何避免黑屏。？

这是我的代码：

```
mPreview=new SurfaceView(getApplicationContext()); 
l1.addView(mPreview); 
holder = mPreview.getHolder(); 
holder.addCallback(this);
holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
extras = getIntent().getExtras(); 
```

以下内容为表面混凝土法。

```
 path = "http://www.pixintro.com/upload/video/Benetton.mp4";
        mMediaPlayer = new MediaPlayer();
        mMediaPlayer.setDataSource(Environment.getExternalStorageDirectory()+"/Benetton.mp4");
        mMediaPlayer.setDataSource(path);
        mMediaPlayer.setDisplay(holder);
        mMediaPlayer.prepare();
        mMediaPlayer.setOnBufferingUpdateListener(this);
        mMediaPlayer.setOnCompletionListener(this);
        mMediaPlayer.setOnPreparedListener(this);
        mMediaPlayer.setOnVideoSizeChangedListener(this);
        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

public void onPrepared(MediaPlayer mediaplayer){
       mIsVideoReadyToBePlayed = true;
       if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown){
               holder.setFixedSize(mVideoWidth, mVideoHeight);
               mMediaPlayer.start();
       }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:51:56.660

您可以使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html) 。在 doInBackground() 即在后台进行处理时。您可以显示一个进度对话框（onPreExecute()），一旦任务完成（onPostExecute）就会关闭。

```
public class DisplayActivity extends Activity {
     @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_screen);
          // create surface view etc
              new Operation().execute();
}

}

 private class Operation extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
    // code to be executed in background thread 

    for(int i=0;i<5;i++) {
    try {
    Thread.sleep(1000);
    } catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
    }

    return "Executed";
    } 

    @Override
    protected void onPostExecute(String result) {
    // runs on UI thread and updated UI after executing doInBackground
    progressDialog.dismiss();
    }

    @Override
    protected void onPreExecute() {
    ProgressDialog progressDialog = ProgressDialog.show(MainActivity.this, "Title ", "Loading...");
    progressDialog.show();

    }

    @Override
    protected void onProgressUpdate(Void... values) {
    // runs on UI thread and starts first

    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:38:48.520

看看[这个](http://developer.android.com/reference/android/media/MediaPlayer.OnPreparedListener.html)界面。当媒体准备好播放时，它包含一个回调。

MediaPlayer 也有一个 prepareAsync 方法。阅读[本文](http://developer.android.com/guide/topics/media/mediaplayer.html)了解更多详情

# python - Python 线程和队列示例

> ID：15173975
> 
> 赞同：15
> 
> 时间：2013-03-02T11:32:36.217
> 
> 标签：python, multithreading, queue

我是 python 新手（我来自 PHP），我已经阅读教程并尝试了几天，但我无法理解这个队列示例（[http://docs.python.org/2/library /queue.html](http://docs.python.org/2/library/queue.html) )

```
def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

q = Queue()
for i in range(num_worker_threads):
     t = Thread(target=worker)
     t.daemon = True
     t.start()

for item in source():
    q.put(item)

q.join()       # block until all tasks are done 
```

我不明白的是工作线程是如何完成和存在的。我已经阅读了 q.get() 块，直到一个项目可用，所以如果所有项目都已处理并且队列中没有任何项目，为什么 q.get() 不会永远阻塞？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T11:34:32.890

在这段代码中线程不会正常退出（队列为空时它们确实被阻塞）。程序不会等待它们，因为它们是[守护线程](http://docs.python.org/2/library/threading.html#thread-objects)。

程序不会立即退出，也不会因为[`q.join`](http://docs.python.org/2/library/queue.html#Queue.Queue.join)and[`q.task_done`](http://docs.python.org/2/library/queue.html#Queue.Queue.task_done)调用而永远阻塞。

每当将项目添加到队列中时，未完成任务的计数就会增加。`task_done()`每当消费者线程调用以指示该项目已被检索并且所有工作都已完成时，计数就会下降。当未完成任务的计数下降到零时，`join()`解除阻塞，并且程序存在而不等待守护线程。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-01-31T12:06:44.290

我曾经也有过一样的问题。当所有线程都完成后，我在进程列表中看到了“睡眠线程”（使用脚本`top -H -p <pid>`中`<pid>`的进程 ID ）。`ps aux | grep python`

我通过将“无限循环”替换`while True`为`while not q.empty():`.

它解决了“睡眠线程”的问题。

```
def worker():
    while not q.empty():
        item = q.get()
        do_work(item)
        q.task_done()

q = Queue()
for i in range(num_worker_threads):
     t = Thread(target=worker)
     t.daemon = True
     t.start()

for item in source():
    q.put(item)

q.join()       # block until all tasks are done 
```

# objective-c - 从 JSON 中的嵌套字典中获取密钥

> ID：15173982
> 
> 赞同：0
> 
> 时间：2013-03-02T11:33:50.443
> 
> 标签：objective-c, json, nsdictionary

我想从字典中获取密钥。我的字典是

```
JsonDict{
       1{
          name:"sam"
          value:"1000"
        }
       2{
          name:"harry"
          value:"2000"
        }
       3{
          name:"potter"
          value:"3000"
        }
    } 
```

如果 JsonDict 是一个 NSArray，那么我知道如何从 for 循环中获取它，但它是一个字典。

我的问题是如何从这个 json 中获取名称？

我的代码是...

//----从这里我得到Json-----

```
NSDictionary *jsonObject = [responseString JSONValue];

NSArray *array= (NSArray *)[jsonObject allKeys];

for (int i =0; i<[array count]; i++)
{
    NSMutableDictionary *dictLocation = [array objectAtIndex:i];
    //NSLog(@"Index :%@",dictLocation);
    NSDictionary *dictName12 = [dictLocation objectForKey:@"name"];

    NSLog(@"%i : %@",i,dictName12);

} 
```

我在上面的代码中得到 dictLocation 但不是 dictName12 ......

# android - 如何在从活动 1 调用的活动 2 中单击退出时退出活动 1

> ID：15173984
> 
> 赞同：-4
> 
> 时间：2013-03-02T11:34:03.863
> 
> 标签：android, android-intent, android-activity

嗨，大家好

我想问：我有一个第一个活动，它在活动菜单中打开第二个活动。我在活动 2 中按退出，并希望您也关闭活动 1。如何执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T11:44:19.087

当您从 Activity A 启动 Activity B 时，使用`startActivityForResult(...)`. 当您想关闭整个应用程序时，您可以执行以下操作：

```
 setResult(RESULT_CLOSE_ALL);
    finish(); 
```

您可以检查**[如何杀死一个应用程序及其所有活动？](https://stackoverflow.com/questions/3105673/android-how-to-kill-an-application-with-all-its-activities)**详细说明

# three.js - 挤出的“立方体”是截锥体剔除的，我自己的形状不是。知道为什么吗？[三.js]

> ID：15173999
> 
> 赞同：0
> 
> 时间：2013-03-02T11:36:36.400
> 
> 标签：three.js

我正在慢慢缩小我的性能问题，并且遇到了截锥体剔除的障碍，特别是对于我的定制挤压建筑。

我一直在做一些测试，似乎标准立方体 ( `CubeGeometry`) 和我自己的自定义挤压立方体一旦离开屏幕边界就会被剔除。这可以通过监视正在渲染的调用、面和顶点的数量来查看。

如果我随后尝试使用与挤出立方体相同的技术来渲染建筑形状，我将不再能够让它在屏幕边界处剔除——某些东西会使其渲染直到远远超出屏幕边缘。

这是问题的 jsFiddle，您可以在其中看到不剔除的构建示例。您可以取消注释`initCubes()`调用以查看多维数据集如何正常工作。控件是鼠标滚轮缩放和单击平移：http: [//jsfiddle.net/tuJAB/](http://jsfiddle.net/tuJAB/)

几天来我一直在用这个把头发拉出来，所以我很感激任何和所有的帮助。

谢谢！

**更新**

经过更多测试后，它似乎与我用来创建顶点的坐标有关。`position`如果我创建相对于原点 (0,0) 的顶点，然后使用然后剔除移动整个网格。如果我在正确的位置（距 (0,0) 大约 5000 个单位）创建顶点并且不更改`position`，则剔除不会按预期工作。

还没有解决这个问题，所以需要帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T12:55:59.217

> `position`如果我创建相对于原点 (0,0) 的顶点，然后使用然后剔除移动整个网格。

那。