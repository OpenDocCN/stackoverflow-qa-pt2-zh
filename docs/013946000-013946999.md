# StackOverflow 问答 13946000-13946999

# ios - 自定义 UITableViewCell 为其子视图委派？

> ID：13946005
> 
> 赞同：0
> 
> 时间：2012-12-19T05:22:55.593
> 
> 标签：ios, xcode, uitableview

我有`custom cell`一个`textfield`作为子视图的。将单元格设置为代表是否合法`textfield`？

我想将单元格设置为委托，因为它是父视图，但是当我这样做时，应用程序崩溃了。我想这是因为`table view dequeue cells`，也许这就是委托参考在两者之间丢失的原因。所以，我尝试设置委托`cellForRowAtIndexPath`以确保它每次都是新设置的，但它仍然无法正常工作。

我真的必须提升一个级别并让作为`tableview controller`单元格子视图的代表吗？还是我错过了其他东西？

崩溃报告输出：

```
>libobjc.A.dylib`objc_msgSend:
>
0x32ed4f78:  ldr    r3, [r4, #8]
> 
```

initWithStyle 我有

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier type: (NSString *)cellType
{

self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    NSArray *nibArray = [[NSBundle mainBundle] loadNibNamed:@"Custom Cell" owner:self options:nil];
    self = [nibArray lastObject];

    self.cellType = [NSString stringWithString:cellType];
    self.contentText.autoresizingMask = UIViewAutoresizingNone;
    self.detailLabel.autoresizingMask = UIViewAutoresizingNone;
    self.contentText.delegate = self;
}
return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:47:16.170

不要设置`delegate`在`cellForRowAtIndexPath.`

在您的`UITableViewCell`子类中添加方法，然后`UITextField`在其中设置。`initWithStyle``delegate``self`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:32:39.083

将自定义单元格作为单元格中文本字段的委托根本不是问题。表格视图将在需要时重用一些单元格，但这不会影响任何事情。我猜你错过了别的东西。如果您发布崩溃时遇到的错误以及相应的代码片段，也许我可以提供帮助。

# android - 未获取 YouTube 视频列表

> ID：13946013
> 
> 赞同：1
> 
> 时间：2012-12-19T05:23:54.987
> 
> 标签：android, android-emulator, youtube, youtube-api

我遵循了有关如何使用 youtube gdata 的教程。使用来自 youtube 的视频和 onclick 填充列表视图。源代码可在：

[http://blog.blundell-apps.com/click-item-in-a-listview-to-show-youtube-video/](http://blog.blundell-apps.com/click-item-in-a-listview-to-show-youtube-video/)

一旦我更改了 YouTube GData 链接

从：

[https://gdata.youtube.com/feeds/api/videos?author=](https://gdata.youtube.com/feeds/api/videos?author=) "+username+"&v=2&alt=jsonc

至 ：

[http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads](http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads)

我没有得到视频列表，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:30:19.290

原因是它不起作用，因为：

**从这个网址：**

[https://gdata.youtube.com/feeds/api/videos?author=](https://gdata.youtube.com/feeds/api/videos?author=) "+username+"&v=2&alt=jsonc

您在 gdata.youtube.com 的响应中获得 JSON 字符串

和

**在这个网址中：**

[http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads](http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads)

您在 gdata.youtube.com 的响应中获得 Rss XML

**解决方案 ：**

要使其正常工作，您需要将`GetYouTubeUserVideosTask`类中的 JSON 字符串解析更改为 XML 解析

**或者**

使用此 URL 获取 JSON 格式的数据：

[http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads?v=2&alt=jsonc](http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads?v=2&alt=jsonc)

并使用本教程了解我们如何在 android 中解析 json：

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-16T05:32:54.923

这是新 google api 版本 3 的完美代码

```
<html>
  <head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="application/javascript">
 $(document).ready(function () {

  var channelName = 'PochicaKing';

  $.get(
          "https://www.googleapis.com/youtube/v3/channels", {
            part: 'contentDetails',
            forUsername: channelName,
//            mine: true,
//            access_token: 'ya29.cQEoJbvUmAMT6xJFgDoi4gq0EW8O5Q_9ZqLtNUay0AbNh-mldmNh5mlicarLx00AHxL_O6Vur8M3Bw',
            key: 'AIzaSyARSqGexKgNt0BdHUJBXg2pnxMGgYXrszw'
          },
  function (data) {

    $.each(data.items, function (i, item) {
      console.log(item);
      pid = item.contentDetails.relatedPlaylists.likes;
      gitVids(pid);
    });

  }
  );

  function gitVids(pid) {

    $.get(
            "https://www.googleapis.com/youtube/v3/playlistItems", {
              part: 'snippet',
              maxResults: 5,
              playlistId: pid,
              key: 'AIzaSyARSqGexKgNt0BdHUJBXg2pnxMGgYXrszw'
            },
    function (data) {

      var output;
      $.each(data.items, function (i, item) {
//      console.log(item);
        vidTitle = item.snippet.title;
        vidId = item.snippet.resourceId.videoId;

        output = '<li><iframe width="420" height="315"src="http://www.youtube.com/embed/' + vidId + '"></iframe></li>'
        $('#results').append(output);
      });

    }
    );

  }

});   

</script>
  </head>
  <body>
    <ul id="results"></ul>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T20:47:13.220

Api V2 已过时。使用 V3
[https://www.googleapis.com/youtube/v3/search?part=snippet&q=](https://www.googleapis.com/youtube/v3/search?part=snippet&q=) **QUERY** &maxResults=50&key= **YOURKEYGOOGLECONSOLE**

# sql - 带有 AND 和 OR 运算符的 SQL 选择语句发出

> ID：13946017
> 
> 赞同：0
> 
> 时间：2012-12-19T05:24:20.087
> 
> 标签：sql, asp-classic, vbscript, sql-server-2000, ado

我正在使用 Classic ASP 从 SQL Server 2000 数据库中获取记录。这就是我使用的代码。

**ASP 代码：**

```
<form name="search" method="post" onsubmit="return attention();">
<table width="60%" border="0" cellpadding="2" cellspacing="0" style="margin:0 auto">
<tr>
    <td colspan="2"><h1 style="color:#003399;">Search for Certificate of Analysis</h1></td>
</tr>
<tr>
    <td valign="bottom">Product number <sup style="color:#EE0000;font-size:1.3em">*</sup></td>
    <td valign="bottom">Lot number</td>
</tr>
<tr>
    <td width="30%" valign="top">
        <input type="text" name="input1" size="20"/>
    </td>
    <td valign="top">
        <input type="text" size="20" name="input2"/> 
        <input style="background-color:#ffffff;border:0px;cursor:pointer" size="10" type="submit" name="sub" value=">>" />
    </td>
</tr>

</table>
<%
    if request.Form("sub") <> "" then
    Dim fname, lname
    fname= request.Form("input1")
    lname= request.Form("input2")
    session("n") = fname & lname
    sql = "Select * from search where cat_no_batch_no LIKE '"&request.Form("input1")&"%' OR cat_no_batch_no='"&session("n")&"'"
    rs.open sql, con, 1, 2
    if rs.eof then

    response.write("Please provide a valid Cat No.")    

    else

            do while not rs.eof
        %>
            <table border="1" cellpadding="5" cellspacing="0" width="60%" style="margin:0 auto; border-collapse:collapse;border-color:#999999">
            <tr>
                <td width="50%"><%=rs("cat_no_batch_no")%></td>
                <td width="10%">Click to open <a target="_blank" href="http://localhost/search1/<%=rs("pdf_path")%>"><%=rs("cat_no_batch_no")%></a></td>
            </tr>
            </table>

        <%
            rs.movenext
            loop
        end if
    rs.close
    end if
%>
</form> 
```

上面的 LIKE 语句按预期工作，并显示包含类似 **Cat No.**的多条记录。当我在第一个输入框中输入**Cat No**并在另一个输入框中输入**批号时，问题就出现了。**我想要的输出应该只是显示一条记录，因为我已经给出了**Cat No.**和**Lot Number**，但它显示了多条记录。

我提供了更清晰的图像。

1.  在下图中，我将**6106021**作为**产品编号**，因此它显示了两个条目。 ![在此处输入图像描述](../Images/4d07a7191ec9b07ac2efe21babef8672.png)

2.  在这张图片中，我将**6106021**作为**产品编号**，将**218111**作为批号，它显示两个条目而不是 1。这就是问题所在，它应该显示一个条目，因为批号是唯一的，而猫号可以相同。 ![在此处输入图像描述](../Images/8a92a5730ddad7d348578863d1b8b994.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:03:53.687

把你的问题读给自己听，想想你在说什么：

您声明*“我想要的输出应该只是一条要显示的记录，因为我已经给出了 Cat No. 和 Lot Number”*

但是在你的 SQL 中你写`where cat_no_batch_no LIKE '"&request.Form("input1")&"%' OR cat_no_batch_no='"&session("n")&"'`

关键词是 AND vs. OR

在您的脑海中，您认为这两个条件都必须为真，但您的查询却不然。如果您希望这两个条件都为真，那么您必须使用 AND 运算符。

Naoki 正在做一些事情——您将不得不根据指定的条件修改您的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T05:46:02.150

我想您可以根据是否提供“批号”来编写两个单独的 SQL 查询。您的代码可能如下所示：

```
if lname = "" then
    sql = "Select * from search where cat_no_batch_no LIKE '"&request.Form("input1")&"%'" 
else
    sql = "Select * from search where cat_no_batch_no LIKE '"&session("n")&"%'"
end if 
```

我希望这会有所帮助

# c# - 在 .NET 的 Main() 方法之前执行代码

> ID：13946024
> 
> 赞同：6
> 
> 时间：2012-12-19T05:24:54.890
> 
> 标签：c#, c++, .net

[是否可以在 .NET Main 方法](http://msdn.microsoft.com/en-us/library/acy3edy3%28v=vs.110%29.aspx)之前执行任何用户提供的代码？

如果代码必须是非托管的，这是可以接受的。

询问的原因是，这可能是解决在显示任何 UI 元素之前调用 SetCurrentProcessExplicitAppUserModelID 问题的一种方法（如在[Windows 任务栏中对单独的进程进行分组中所述](https://stackoverflow.com/questions/13924264/grouping-separate-processes-in-the-windows-taskbar)）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T05:28:36.617

在 C# 中，您可以将静态构造函数添加到包含该`main`方法的类。静态构造函数中的代码将在之前执行`main`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T05:43:30.613

静态构造函数将在 Main 之前执行，但前提是该类实际上被某些东西引用。例如：

```
class ClassWStaticCon
{
    static ClassWStaticCon()
    {
        Console.WriteLine("Hello world!");
    }
}

...
static void Main(string[] args)
{
    Console.WriteLine("Hello main.");
} 
```

将打印：

> 楼主你好。

```
class ClassWStaticCon
{
    public static int SomeField;
    static ClassWStaticCon()
    {
        Console.WriteLine("Hello world!");
    }
}

...
static void Main(string[] args)
{
    ClassWStaticCon.SomeField = 0;
    Console.WriteLine("Hello main.");
} 
```

将打印：

> 你好世界！楼主你好。

如果您想控制执行顺序，请在单个静态“初始化所有主要内容”类中使用操作队列委托[http://msdn.microsoft.com/en-us/library/018hxwa8.aspx 。](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)

# php - Magento/PHPUnit - 强制异常

> ID：13946028
> 
> 赞同：3
> 
> 时间：2012-12-19T05:25:14.393
> 
> 标签：php, unit-testing, magento, phpunit

我正在使用 phpunit 和 ecomdev 模块对 Magento 进行单元测试。对于特定类，最后需要测试的代码是尝试将模型保存在 try/catch 中的异常。我能看到的唯一方法是临时更改数据库。所以我更改了有效的表名，但是我必须重新命名它。如果测试本身失败，我就处于不一致的状态。

我真的很想测试那个代码，所以覆盖率是 100%。否则我会想知道为什么它是 98%，直到我查看代码并记住异常没有经过测试。

我试图关闭连接，但我需要它来记录异常。所以我想知道我是否可以暂时对模型或资源模型做些什么来导致保存引发异常。下次加载时会重置的东西。

请注意 - 无论如何我都看不到操纵数据会导致异常。同样，我看到在生产中导致异常的唯一情况是数据库连接消失。

有任何想法吗？

编辑：示例代码：

```
public function logStuff($stuff){

    try{
        Mage::getModel('my/stuff')
            ->setData('stuff', $stuff)
            ->save();

    }catch(Exception $e){
        Mage::helper('log/error')->logError(__METHOD__, "Could not save stuff: ". $e->getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:41:28.137

要测试异常捕获，您需要将模型实例替换为模拟实例。使用 EcomDev_PHPUnit 扩展很容易实现：

```
$mockedStuff = $this->getModelMock('your/stuff', array('save'));
$mockedStuff->expects($this->once()) // How many times it is invoked
     ->method('save') // Wich method to mock
     ->will($this->returnCallback(function () {
          throw new Exception('Some error text');
     })); // Your exception

$this->replaceByMock('model', 'your/stuff', $mockedStuff); 
```

您也可以使用模拟来评估您的日志记录。

```
$loggerMock = $this->getHelperMock('log/error', array('logError'));
$loggerMock->expects($this->once())
    ->method('logError')
    ->with('className::methodName', 'Could not save stuff: Some error text'); // Check that correct arguments passed

$this->replaceByMock('helper', 'log/error', $loggerMock); 
```

享受单元测试的乐趣:)

# sql - 如何从 SQL Server Express 中的动态查询创建 RDLC 报告

> ID：13946029
> 
> 赞同：0
> 
> 时间：2012-12-19T05:25:13.507
> 
> 标签：sql, vb.net, sql-server-express

我无法从此过程创建 rdlc 报告，我正在使用报告查看器，但是当我选择该过程时，它不显示任何列名，但我的过程返回 7 列。如何创建报告请帮忙？我正在 vb.net 中创建报告

```
ALTER PROCEDURE Pr_getAcceptedOnDateReport
@date date
AS
SET FMTONLY OFF
DECLARE  @SQL varchar(MAX)
DECLARE  @antiHIV bit
DECLARE  @HBsAg bit
DECLARE  @IGMHBCore bit
DECLARE  @NAT bit
DECLARE  @Malaria bit
DECLARE  @TotalHBCore bit
DECLARE  @Syphilis bit
DECLARE  @HCV bit
DECLARE  @ICT bit
DECLARE  @DCT bit
DECLARE  @Antibody bit

 Select @antiHIV=[HIV1/2 screen Reactive],
@IGMHBCore=[IgM HBcore Reactive], 
@HBsAg=[HBsAg Screen Reactive],
@NAT= [NAT Reactive],
@Malaria=[Malaria Screen Reactive],
@TotalHBCore=[Total HBcore Reactive],
@Syphilis=[Syphilis Screen Reactive],
@HCV=[HCV screen Reactive],
@ICT=[ICT Positive],
@DCT= [DCT Positive],
@Antibody= [Antibody Screen Positive]
 from m_rejectionRules where deleted=0

 DECLARE @sql1 nvarchar(4000)    

 Select @sql1='Select t.donorid, t.donorname, t.sampleid, t.customid,t.bagtype,t.bagnumber, t.segmentno from ttidetail t, m_donor m 
where t.donorid=m.donorid 
AND  CONVERT(date, m.RDate) =''' + cast(@date as varchar(100)) + ''''

IF @antiHIV='True' 
BEGIN
SELECT @sql1 = @sql1 + ' AND t.antiHIV like ' + ''''+ 'Non%Reactive'+''''
END
IF @HBsAg='True' 
BEGIN
SELECT @sql1 = @sql1 + ' AND t.HBsAg like '+ ''''+ 'Non%Reactive'+''''
END
IF @IGMHBCore='True' 
BEGIN
SELECT @sql1 = @sql1 + ' AND t.IGM_antiHBC like '+ ''''+ 'Non%Reactive'+''''
END
IF @NAT='True' 
BEGIN
SELECT @sql1 = @sql1 + ' AND t.NAT_HIV1 like '+ ''''+ 'Non%Reactive'+''''
END
IF @Malaria='True' 
BEGIN
SELECT @sql1 = @sql1 + ' AND t.malariaScreen like '+ ''''+ 'Non%Reactive'+''''
END
IF @TotalHBCore='True' 
BEGIN
SELECT @sql1 = @sql1 + ' AND t.totalAnti_HBC like '+ ''''+ 'Non%Reactive'+''''
END

IF @Syphilis='True' 
BEGIN
SELECT @sql1 = @sql1 + ' AND t.SyphilisScreen like '+ ''''+ 'Non%Reactive'+''''
END

EXEC sp_executesql @sql1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:37:43.043

创建一个映射到存储过程返回的字段的类

```
Public Class ReportData

Property donorid AS Integer = 0
Property donorname as string = string.empty
Property sampleid as integer = 0 
Property customid as integer = 0
Property bagtype as string = string.empty
Property bagnumber as integer = 0
Property segmentno as integer = 0

End Class 
```

假设您有一个使用上述查询返回数据集的函数，我将其称为 ds

*** 最重要 *** 创建 rdlc 报告而不是映射到存储过程时，将其映射到对象数据源并选择您刚刚创建的类。使用此类中的文件作为报告的字段。

在按钮显示报告中，您可以使用以下代码显示您的报告

```
Private Sub ShowReport()
    Dim dsL As DataSet = New DataSet()
    dsL = GetReportData()  ' Function which will get the data from the SQL Query

    Dim rds As ReportDataSource = New ReportDataSource()
    rds.Name = "ReportDS" ' Change to what you will be using when creating an objectdatasource
    rds.Value = dsL.Tables(0)
    With rvReport   ' Name of the report control on the form
        .Reset()
        .ProcessingMode = ProcessingMode.Local
        .LocalReport.DataSources.Clear()
        .Visible = True
        .LocalReport.ReportPath = reportPath
        .LocalReport.DataSources.Add(rds)

        ' If you have any parameters you can pass them here
        Dim rptParameters As New List(Of ReportParameter)()
        With rptParameters
            .Add(New ReportParameter("Title",
                String.Format("{0} Grid For Period {1} To {2}",
                    gridType,
                    FormatDateTime(startDate, DateFormat.ShortDate),
                    FormatDateTime(endDate, DateFormat.ShortDate))))
            .Add(New ReportParameter("SubTitle", String.Format("Program: {0}", ucProgram.Text)))
            .Add(New ReportParameter("StartDate", startDate))
            .Add(New ReportParameter("EndDate", endDate))
        End With
        .LocalReport.SetParameters(rptParameters)

        .RefreshReport()
    End With

End Sub 
```

# php - 是否建议将 PHP 会话存储在 MemCache 中？

> ID：13946033
> 
> 赞同：60
> 
> 时间：2012-12-19T05:25:58.780
> 
> 标签：php, memcached

我正在使用负载均衡器后面的几个 Web 服务器，我可以启用粘性会话以将用户保留到一个特定的 Web 服务器 - 这将起作用。

我一直在阅读有关 PHP Sessions 和 MemCache 的信息。我必须说我读到的内容有点令人困惑，因为有些页面说这是个好主意，而另一些则相反。

问题：

1.  是否可以在 memcache 中保留 php 会话？
2.  在 memcache 上使用粘性会话更好吗？
3.  memcache 中的 php 会话有什么问题 - 注意：我可以获得足够的缓存（亚马逊所以它可以扩展）。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-19T05:57:48.340

**1：是的。我强烈建议将 PHP 会话存储在 Memcached 中。原因如下：**

Memcached 非常适合存储数据库和文件系统经常访问的小块数据。

Memcached 专为会话而设计。它最初是 livejournal.com 的首席开发人员的创意，后来也用于缓存用户帖子的内容。好处是立竿见影的：大部分动作都发生在记忆中。页面加载时间大大改善。

值得庆幸的是，PHP 和 Apache 有一个简单的实现来处理 Memcached 的会话。只需几个 shell 命令即可安装

以 Debian 为例：

```
sudo apt-get -t stable install php7.4-memcached 
```

和

将您的 php.ini 设置更改为类似于：

（取自[https://www.php.net/manual/en/memcached.sessions.php](https://www.php.net/manual/en/memcached.sessions.php)）

```
 session.save_handler = memcached
 ; change server:port to fit your needs...
 session.save_path = "localhost:11211" 
```

关键是 session.save_path

它将不再指向您服务器上的相对文件路径。提到了 APC - APC 用于缓存程序使用的 .php 文件。APC 和 Memcached 将显着减少 IO 并使 Apache/Nginx 更快地释放给服务器资源，例如图像。

**2：** **没有**

**3：** **使用Memcached的根本缺点是数据易波动**

会话数据在 Memcached 中不是持久的。因此，当服务器崩溃时，内存中的所有数据都会丢失。每个人都必须重新登录。

**然后你有内存消耗......**

请记住：会话存储在内存中。如果您的网站处理大量并发用户，您可能需要花一点额外的钱来获得更大的内存分配。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-19T05:58:04.570

## 1\. 是的，可以将 PHP 会话保存在 memcached 中。

memcache 扩展甚至带有一个会话处理程序，只需很少的配置即可启动和运行。[http://php.net/manual/en/memcached.sessions.php](http://php.net/manual/en/memcached.sessions.php)

## 2\. 内存缓存/粘性会话

我真的不知道哪个“更好”。我觉得这将是那些“视情况而定”的答案之一。这可能取决于您进行负载平衡的原因。如果少量用户导致每个负载很大，或者如果它是一个很大的数量导致每个负载很小。

## 3\. Memcache 的缺点

使用 memcache 进行会话存储可能有两个主要缺点。

首先，它是易变的。这意味着，如果您的某个 memcached 实例重新启动/崩溃等，则存储在该实例中的任何会话都将丢失。虽然如果他们使用传统的基于文件的会话，当服务器返回时，他们仍然会在那里。

其次，可能更相关，memcached 不保证持久性，它只是一个缓存。可以随时出于任何原因从 memcached 中清除数据。而实际上，应该清除数据的唯一原因是缓存是否接近其大小限制。最近最少访问的数据将被驱逐。同样，这可能不是问题，因为如果用户的会话过时，用户可能已经离开，但这取决于您的需求。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-28T06:41:23.843

如果你想使用“memcacheD”扩展而不是“memcache”（有两种不同的扩展）进行会话控制，你应该注意修改**php.ini**。

Google 的大多数网络资源都基于 memcache，因为它的版本比 memcacheD 更早。他们会说如下：

```
session.save_handler = memcache 
session.save_path = "tcp://localhost:11211" 
```

但是当涉及到 memcacheD 时它是无效的。

您应该像这样修改 php.ini：

```
session.save_handler = memcached 
session.save_path = "localhost:11211" 
```

没有协议标识符。

来自： http: [//php.net/manual/en/memcached.sessions.php#99646](http://php.net/manual/en/memcached.sessions.php#99646)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-17T13:22:29.540

根据我的观点，不建议将会话存储在 Memcached 中。如果会话消失，通常用户会注销，如果缓存的一部分消失或由于硬件崩溃，它不应该给您的用户带来明显的痛苦。根据memcached 网站，“memcached 是一种高性能的分布式内存对象缓存系统，本质上是通用的，但旨在通过减轻数据库负载来加速动态 Web 应用程序。” 因此，在开发应用程序时，请记住，一旦在 Memcached 服务器中找不到数据，您必须有一个备用机制来检索数据。

# android - android中的Logcat（调试）通过Wifi

> ID：13946036
> 
> 赞同：4
> 
> 时间：2012-12-19T05:26:12.587
> 
> 标签：android

如果我使用 Wifi（不是 USB 数据线）连接我的 android 设备来调试我的应用程序，有没有办法可以看到我的 logcat 结果。如果是，我该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-11T23:45:32.133

无需应用程序！

(1) 用usb连接手机，然后在命令行输入：

亚行 tcpip 5555

您现在可以断开手机与 USB 的连接

（如果使用wifi的原因是usb在你的机器上不工作，就在另一台电脑上做上面的

（2）找出您移动设备的IP地址（在设置中的某处......电话状态）

(3) 在命令行类型中：

adb connect [你手机的IP]

注意：所有设备都需要连接到同一个wifi；避免使用公共wifi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:38:34.390

是的，您可以使用 Playstore 中名为“wifi ADB”的程序。并从服务器运行 adb connect ipaddress .. 然后您的 logcat 流量将出现在 eclipse logcat 中

# java - 如何在android中打开一个java文件？

> ID：13946040
> 
> 赞同：-1
> 
> 时间：2012-12-19T05:26:46.560
> 
> 标签：java, android, xml

嗨，我是 Android 新手，**我有一个从中提取源代码的 apk 文件**。

我的问题是现在我需要***在 eclipse 中打开所有的 java 和 xml 文件***作为一个新的 Android 项目进行编辑。

现在我只能查看 java 类但不能运行它，即；我不能把它放在我创建的项目中。当我尝试读取 xml 文件时，它会显示一些垃圾值。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:32:16.667

.apk 文件是包含已编译代码的包，而不是源代码。那里没有 java 文件，只有 android .class 等效文件—— classes.dex 文件。无法从 .apk 中获取原始源代码（.java 文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:00:08.987

请参考这篇博文，[GT 的博客](http://ganeshtiwaridotcomdotnp.blogspot.in/2011/12/android-reverse-engineering-decompile.html)还有这个 StackOverflow Question [decompiling DEX into Java sourcecode](https://stackoverflow.com/questions/3122635/is-it-possible-to-decompile-an-android-apk-file)

您可以尝试反编译一些 .class 文件，但我从未尝试对 XML 文件进行反编译。我在 XDA 开发人员博客中找到了一个可能对您有所帮助的讨论。[如何从 .apk 文件反编译/重新编译二进制 XML？](http://forum.xda-developers.com/showthread.php?t=519397)

# c++ - Irrlicht 不包含 MinGW 库

> ID：13946041
> 
> 赞同：2
> 
> 时间：2012-12-19T05:26:49.343
> 
> 标签：c++, irrlicht

我目前正在使用 MinGW 编译 C++ 程序。我下载了 irrlicht-1.8 并尝试做第一个教程。它正在查找头文件，但是当我尝试编译时出现以下错误：

> C:\Users\E5DC9~1.MAR\AppData\Local\Temp\ccfR3pSv.o:LightSpacePrototype.C<.text+0xb12>：未定义对“__imp__createDevice”的引用
> 
> collect2: ld 返回 1exit 状态

我应该注意到这是一台公共计算机，我在他们的网络上有一个私人帐户。我没有管理员权限。这是我可以访问的唯一 Windows 计算机。我从哪里开始？我不知道那个错误是什么意思。我的 .c 文件甚至不在 C 盘中。在H盘。编译时，我在 .bat 文件中给出以下命令：

> H：
> 
> CD H:\桌面\MinGW\Bin
> 
> G++ H:\Desktop\MinGW\SOURCE\LightSpacePrototype.C -o H:\Desktop\MinGW\COMPILED\LightSpacePrototype.exe -LH:\Desktop\MinGW\irrlicht-1.8\lib\Win32-gcc -IH:\Desktop\ MinGW\irrlicht-1.8\包括
> 
> 命令

-I 指定要搜索的头文件目录，如上所述，工作正常。不过，我对库目录感到困惑，因为本教程适用于 Visual C++，而不是 MinGW。所以教程说将路径指定为 H:\Desktop\MinGW\irrlicht-1.8\lib\Win32-visualstudio 而不是 H:\Desktop\MinGW\irrlicht-1.8\lib\Win32-gcc 就像我有它。我假设我应该使用 gcc，因为那似乎是 MinGW 版本。但是，在教程中它说我需要“#pragma comment(lib, "Irrlicht.lib")” 但是在 Win32-gcc 中没有 Irrlicht.lib 文件，只有另外两个名为 libIrrlicht.a 和 libIrrlicht.def 的文件，但是在 Win32-visualstudio 文件夹中有一个 Irrlicht.lib 文件。我已经尝试删除编译指示注释并切换库目录，但无论是这样还是任何组合都不起作用。我的朋友告诉我这个错误意味着编译器找不到它需要的文件，但我不知道那是什么文件。我只假设它是 Irrlicht.lib。

源代码：

```
#include "irrlicht.h"

using namespace irr;
using namespace core;
using namespace scene;
using namespace video;
using namespace io;
using namespace gui;

#pragma comment(lib, "Irrlicht.lib")

int main()
{

IrrlichtDevice *device = createDevice(EDT_SOFTWARE, dimension2d<u32>(512, 384), 16, false, false, false, 0);

device->setWindowCaption(L"Hello World! - Irrlicht Engine Demo");

IVideoDriver *driver = device->getVideoDriver();
ISceneManager *smgr = device->getSceneManager();
IGUIEnvironment *guienv = device->getGUIEnvironment();

guienv->addStaticText(L"Hello World! This is the Irrlicht Software engine!", rect<s32>(10,10,200,22), true);

IAnimatedMesh *mesh = smgr->getMesh("H:Desktop\MinGW\irrlicht-1.8\media\sydney.md2");
IAnimatedMeshSceneNode *node = smgr->addAnimatedMeshSceneNode(mesh);

if(node)
{

    node->setMaterialFlag(EMF_LIGHTING, false);
    node->setFrameLoop(0, 310);     
    node->setMaterialTexture(0, driver->getTexture("H:Desktop\MinGW\irrlicht-1.8\media\sydney.bmp"));

}

smgr->addCameraSceneNode(0, vector3df(0,30,-40), vector3df(0,5,0));

while(device->run())
{

    driver->beginScene(true, true, SColor(255,100,101,140));
    smgr->drawAll();
    guienv->drawAll();
    driver->endScene();

}

device->drop();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-29T10:40:03.290

*OP的解决方案。*

首先让我说，虽然我所做的允许它编译，但由于某些 32 位/64 位错误，它无法执行，但这是另一个话题。

有两个问题：

- 编译器没有编译库

-编译器不包括库

对于第一个问题，我必须在编译命令的开头添加 -c ，告诉它编译库文件。第二，我必须使用 -l 并指定要包含的库文件。

> H：
> 
> CD H:\桌面\MinGW\Bin
> 
> G++ -c H:\Desktop\MinGW\SOURCE\LightSpacePrototype.C -o H:\Desktop\MinGW\COMPILED\LightSpacePrototype.exe -LH:\Desktop\MinGW\irrlicht-1.8\lib\Win32-gcc -l H: \Desktop\MinGW\irrlicht-1.8\lib\Win32-gcc\libIrrlicht.a -IH:\Desktop\MinGW\irrlicht-1.8\include
> 
> 命令

对于编译指示评论，我只是这样做了：

```
#pragma comment(lib, "libIrrlicht.a") 
```

# html - 字体颜色不起作用

> ID：13946043
> 
> 赞同：2
> 
> 时间：2012-12-19T05:27:04.193
> 
> 标签：html, ios

我的 iPad 应用程序中显示了以下 html 段。

```
<font size="4px" face="HelveticaNeue" color=rgb(49,49,49)>ABC</font> 
```

它应该是深灰色的，它在 iOS 5.1 以下。但在 iOS 6 上它是绿色的，它在 chrome 和 firefox 中也显示绿色。

上面的代码有错误吗？为什么它可以在以前的 iOS 中运行？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:57:35.050

根据[HTML 4.01 规范](http://www.w3.org/TR/REC-html40/present/graphics.html#edef-FONT)，元素中的`size`属性值是`font`一个数值，没有任何单位，并且该值被视为与浏览器相关的大小数组的索引。此外，`4px`如果像在 CSS 中那样表示 4 像素，那么尺寸会变得很小——在那个尺寸下，几乎所有字体都变得难以辨认。空格在字体名称中很重要，因此`HelveticaNeue`与`Helvetica Neue`. 并且`color`属性值必须是前缀为 6 位的十六进制代码，`#`或者是规范中定义的关键字之一。

虚假`</span>`标签是语法错误，但通常被浏览器忽略。但是，如果前面的`<span>`标签还没有匹配的结束标签，那么（作为常见错误恢复的一部分）结束标签将结束其效果。

因此，代码在任何地方都可以工作是一个奇迹。它这样做只是因为您在一个特殊的环境中使用它，在这个环境中，`font`标记的解释方式恰好与您的期望相符。

如果`4px`您说的不是 4 像素，而是 HTML 大小 4，范围从 1 到 7，大小比默认值大，那么以下内容将符合：

```
<font size="4" face="Helvetica Neue" style="color:#313131;">Text hereABC</font> 
```

尽管大多数人会认为使用 CSS 更合适。在 CSS 中，您可以使用例如颜色值，例如`rgb(49,49,49)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:56:52.257

用这个`<font size="4px" face="HelveticaNeue" style="color:#313131;">Text here</span>ABC</font>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-20T06:50:15.250

`<font>`HTML5 不支持该标记。改用 CSS！

如果您仍想使用`color`属性，则应尝试使用十六进制值`#xxxxxx`而不是`rgb(x,x,x)`

# android - ListFragment - 当适配器数据更改列表位置被覆盖且未添加时

> ID：13946044
> 
> 赞同：0
> 
> 时间：2012-12-19T05:27:04.977
> 
> 标签：android, list, listview, android-fragments, fragment

我正在使用 SherlockListFragment（与 ListFragment 相同）来显示短信对话列表

这是代码

```
 public static class TitlesFragment extends SherlockListFragment 
{
     static ConversationAdapter adapter;
     static List<String>    msgList;
     static Activity        activity;
     static ListView listView;

       @Override
       public void onActivityCreated(Bundle savedInstanceState) {
       super.onActivityCreated(savedInstanceState);

        DataGetters dataGetters = new DataGetters();
        activity = getActivity();
        msgList = dataGetters.getCONVERSATIONS(activity.getApplicationContext());

       adapter = new ConversationAdapter(activity, msgList);
       setListAdapter(adapter);

} 
```

上面的代码打印所有当前的短信对话，如下所示：

![在此处输入图像描述](../Images/82abee8a2dccc3ffba1bc88ba6ba1b67.png)

我通过调用 adapter.notifyDataSetChanged(); 从下面的代码中刷新适配器；收到新短信时会调用女巫

```
public class ReceiverClass extends AsyncTask<String, Void, String> {

@Override
protected String doInBackground(String... params) {

    Thread.sleep(2000);

return null;
}

@Override
protected void onPostExecute(String result) {

      TitlesFragment.adapter.notifyDataSetChanged();

} 
```

但是闲置代码会覆盖现有的列表视图项，以添加新的列表项位置，如下所示：

![在此处输入图像描述](../Images/7f59df04e2048c0f81fb4736486c3f2f.png)

当我重新创建活动时，我得到了我想要的，但只有这样：例如： ![在此处输入图像描述](../Images/0ab5550fcdd10bd160a5046265dbf93d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:38:41.023

您很可能错误地修改了 ListAdapter 附加到的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:04:37.500

所以问题不在于我没有用新位置修改 adpater 列表

这是需要添加的代码

```
 msgList= dataGetters.getCONVERSATIONS(activity.getApplicationContext());

  ConversationAdapter.msgList = msgList;

  TitlesFragment.adapter.notifyDataSetChanged(); 
```

感谢 Mark Nguyen 解决

# sql-server - SSIS-将输出拆分为多个文件

> ID：13946045
> 
> 赞同：2
> 
> 时间：2012-12-19T05:27:05.487
> 
> 标签：sql-server, ssis

我正在使用 SSIS 数据工具从遗留系统中创建数据提取。我们的新系统需要将它导入的文件拆分为 5MB 的文件。

无论如何，我可以将文件拆分为单独的文件吗？我在想，因为数据已经在数据库中，我可以做一个循环或类似的事情，一次选择一定数量的记录。

任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:56:32.637

如果您的源是 SQL，请针对表键使用 Row_Number 函数为每行分配一个数字，例如

```
Row_number() OVER (Order by Customer_Id) as RowNumber 
```

然后将您的查询包装在 CTE 中或使其成为带有 where 子句的子查询，以提供相当于 5MD 文件的行数，例如

```
WHERE RowNumber >= 5000 and RowNumber <10000 
```

您将需要多次调用此源目标（使用不同的 Row Start 和 Row End 值），因此最好

*   查找控制流中的总记录数并设置 TotalRows 参数
*   在控制流中创建循环
*   在控制流中设置 3 个参数以遍历每组记录并将数据存储在单独的文件中。例如第一个循环将设置

    行开始 = 0

    行尾 = 5000

    文件名 = MyFile_[日期]_0_to_4999

# jquery - 使用 Greasemonkey 将可拖动窗口添加到页面

> ID：13946047
> 
> 赞同：2
> 
> 时间：2012-12-19T05:27:29.010
> 
> 标签：jquery, greasemonkey

我正在尝试创建一个 Greasemonkey 脚本，为每个网页添加一个可拖动的 div。出于某种原因，div 根本没有显示。这可能是什么原因？

```
// ==UserScript==
// @name       Draggable box demo
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description  enter something useful
// @match      *://www.*
// @copyright  2012+, You
// @require http://code.jquery.com/jquery-latest.js http://code.jquery.com/ui/1.9.2/jquery-ui.js
// ==/UserScript==
//alert("Hi!");

$(document).ready(function() {
    $(document).append("<div id='dragZone'><div class='draggable'>Drag here!<input type = 'text'></input></div>");
    $('#dragZone').css('position', 'absolute');
    var a = 3;
    $('.draggable').draggable({
        start: function(event, ui) { $(this).css("z-index", a++); }
    });
    $('#dragZone div').mousedown(function() {
        $(this).addClass('top').removeClass('bottom');
        $(this).siblings().removeClass('top').addClass('bottom');
        $(this).css("z-index", a++);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T23:25:16.730

我创建了一个工作用户脚本，它为每个页面添加了一个可拖动的 div。这是源代码：

```
// ==UserScript==
// @name       Div on top
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description  enter something useful
// @match      https://*/*
// @match      http://*/*
// @match      *.com*
// @match      *.net*
// @require    http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js
// @require     http://code.jquery.com/ui/1.9.2/jquery-ui.js
// @copyright  2012+, You
// ==/UserScript==
jQuery(function($){
    var _highest = 0;   

    $("div").each(function() {
        var _current = parseInt($(this).css("zIndex"), 10);
        if(_current > _highest) {
            _highest = _current + 1;
        }
    });
    $('body').append('<div id = "draggableDiv" class = "ui-widget-content" style="position:absolute;top:'+GM_getValue("top")+'px;z-index:'+_highest+';left:'+GM_getValue("left")+'px;background:#ecebeb;border:1px solid #333;border-radius:5px;height:50px;width:300px;"> Hello, This is an addon div from Greasemonkey. <input type = "text" value = "type something here"></input> </div>');
    $( "#draggableDiv" ).draggable();
    $('#draggableDiv').mouseup(function() {
        //alert('Set the x and y values using GM_getValue.');
        var divOffset = $("#draggableDiv").offset();
        var left = divOffset.left;
        var top = divOffset.top;
        GM_setValue("left", left);
        GM_setValue("top", top);
        //alert("Set left to " + left + " and top to " + top);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T05:31:23.953

第一次完全错误 - 问题是使用`$(document).append`. 您不能直接附加到文档，只能附加到节点。

所以要么

```
$(document.body).append() 
```

或者

```
$('body').append() 
```

[这是证明的小提琴。](http://jsfiddle.net/MPZXQ/)

可能是缺少@require，也许你的greasemonkey 已经过时了？

```
// ==UserScript==
// @name       My Fancy New Userscript
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description  enter something useful
// @match      http://*/*
// @require    http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js
// @copyright  2012+, You
// ==/UserScript==
jQuery(function($){
    var _highest = 0;   

    $("div").each(function() {
        var _current = parseInt($(this).css("zIndex"), 10);
        if(_current > _highest) {
            _highest = _current + 1;
        }
    });
    $('body').append('<div style="position:absolute;top:50px;z-index:'+_highest+';left:100px;background:#ecebeb;border:1px solid #333;border-radius:5px;height:50px;width:300px;"> Hello, This is an addon div from Greasemonkey. </div>');
});
​ 
```

样板模板。应该可以正常工作OOB。

# html - 当您在没有Javascript的情况下滚动到某个点以下时，是否可以显示静态导航栏？

> ID：13946050
> 
> 赞同：2
> 
> 时间：2012-12-19T05:28:20.967
> 
> 标签：html, css

我发现[很多](https://stackoverflow.com/questions/5609255/javascript-jquery-perform-function-when-user-scrolls-near-bottom-of-page)[事情](http://www.script-tutorials.com/scrollbar-jquery-event-handling-using-waypoints/)都是使用 Javascript 来完成的，但我想知道是否可以只使用 HTML 和 CSS。具体来说，我希望导航栏在滚动超过顶部标题后出现。

以下是我目前正在使用的 HTML 代码。

```
<h1>

<a class="border" href="http://example.com">home</a> <a class="border" href="forum">forum</a> <a class="border" href="links">links</a> <a class="border" href="contact">contact</a> <a class="border" href="contact/bio">bio</a>

</h1>
<div id="navigation">
<a href="http://example.com">Home</a>
<a href="contact">Contact</a>
<a href="forum">Forum</a>
</div> 
```

这是CSS代码。这部分是顶部标题。

```
h1 {
font-size:48px;
text-align: center;
color:#00F;
border-style: solid;
border-color: #360;
-moz-border-radius: 30px;
border-radius: 30px;

}

a:link {
color: #00F;
text-decoration: none;
}
a:visited {
text-decoration: none;
color: #00F;
}
a:hover {
text-decoration: none;
color: #006;
}
a:active {
text-decoration: none;
color: #000;
}
a.border {
border-style: solid;
border-color: #00F;
border-width: 5px;
-moz-border-radius: 15px;
border-radius: 15px;
} 

a.border:hover{
border-color:#006;
}
a.border:active {
border-color: #000;
} 
```

而这部分是静态导航栏CSS。

```
#navigation {
position: fixed;
top: 0;
width: 100%;
color: #ffffff;
height: 35px;
text-align: center;
padding-top: 15px;
/* Adds shadow to the bottom of the bar */
-webkit-box-shadow: 0px 0px 8px 0px #000000;
-moz-box-shadow: 0px 0px 8px 0px #000000;
box-shadow: 0px 0px 8px 0px #000000;
/* Adds the transparent background */
background-color: rgba(1, 1, 1, 0.8);
color: rgba(1, 1, 1, 0.8);
}
#navigation a {
font-size: 14px;
padding-left: 15px;
padding-right: 15px;
color: white;
text-decoration: none;
}

#navigation a:hover {
color: grey;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:37:17.540

答案是**否定**的..你不能

原因：

*   CSS 不是 JavaScript
*   CSS 无法计算也无法检测到用户已滚动通过某个元素

这就是人们使用 JavaScript 的原因，以便可以计算必要的信息，例如客户端视口大小、元素大小等，并将所需的结果抛出给用户

# php - PHP APC 已安装但未命中？

> ID：13946054
> 
> 赞同：0
> 
> 时间：2012-12-19T05:28:59.853
> 
> 标签：php, caching, apc

我不熟悉 PHP APC，但我已经安装在 RHEL 服务器上，安装完成没有任何问题。然后我认为通过检查它应该可以正常工作`PHP Info`并且显示`APC`模块已加载。

但是当我调用`apc.php`它就像 APC 的仪表板时，会显示一些：

```
..
Cached Files: 0 ( 0.0 Bytes)
Hits: 1
..
Cache full count: 0
.. 
```

一切`Cache Entries`都是空白的
.. 3 周后。

也没有给出特殊的错误或警告。

所以我确定它不起作用（或）缓存实际上没有发生。

*   有什么建议（或）我需要解决什么问题才能使其正常工作吗？

# html - 盒子模型和IE

> ID：13946055
> 
> 赞同：1
> 
> 时间：2012-12-19T05:29:02.323
> 
> 标签：html, css, internet-explorer

关于 IE 和盒子模型，我注意到一些我以前从未见过的东西。

我有一个宽度为 800 像素、高度为 500 像素的表单标签。当我将 h2 标签放入此表单区域时，IE 报告该框高于我分配的高度（通过我给 h2 标签的高度和边距/填充）。

在 Firefox 和所有其他浏览器中，高度不会改变。是什么赋予了？

```
form #post{
    height:500px;
    width:800x;
}

h2{
    font-size:20px
}

<form id="post">
  <h2>The Header</h2>
  <div>1</div>
  <div>2</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:46:39.983

好的，发生的事情是我为 IE 包含了一个样式表，并且有 10 像素的边距，这是额外高度的来源。

谢谢大家看这个！

# javascript - ：可见选择器问题

> ID：13946058
> 
> 赞同：0
> 
> 时间：2012-12-19T05:29:32.703
> 
> 标签：javascript, jquery, jquery-selectors, jpage

```
<ul id="portfolio" style="">
    <li class="thumb one-third column mrmrs" style="display: block;">
        content #1 here
    </li>
    <li class="thumb one-third column doof hidden" style="display: none;">
        content #2 here
    </li>
    <li class="thumb one-third column doof hidden" style="display: none;">
        content #3 here
    </li>
</ul> 
```

这是我计算出来的 HTML 源代码，您可以在其中看到 3 个列表项，其中第一个具有 style="display:block" 而其他 2 个具有“display:none”。在此之前，只是为了让你们知道我在这里做什么，我实际上是在使用 JPages 为我正在销售的商品创建一个分页。在 jPages.js 中，有一行可以检测要呈现的列表项，看起来像这样。

```
this._items = this._container.children(":visible"); 
```

但是，尽管它具有 display:none 属性，但它会渲染所有 3 个元素。所以我通过包含以下代码行来检测显示属性的值进行了一些调试，我发现了一些相当令人惊讶的东西。

```
jQuery('ul#portfolio li').each(function(){
    console.log(jQuery(this).css('display'));
}); 
```

这段代码的输出是

```
block
block
block 
```

有任何想法吗？

# c# - 方法参数与参数对象

> ID：13946061
> 
> 赞同：8
> 
> 时间：2012-12-19T05:29:46.593
> 
> 标签：c#, parameter-object

我正在尝试构建一个框架，允许人们通过实现接口来扩展我们的核心功能。下面是这个接口的一个简化示例。

```
public interface MyInterface
{
    IData GetData(string p1, char p2, double p3);
} 
```

最近，我们决定修改这个接口（我知道我不应该破坏依赖代码，但事实是我们还没有任何第三方实现这个接口，所以我们有机会“重做”正确实现此接口）。

我们需要在这个界面中再添加 2 个参数，我们的软件才能正常工作。我们正在考虑的两种方法是将它们添加到签名中，如下所示：

```
public interface MyInterface
{
    IData GetData(string p1, char p2, double p3, bool p4, DateTime p5);
} 
```

或通过创建这样的参数对象

```
public class MyParameters
{
    public bool p4 { get; set; }
    public DateTime p5 { get; set; }
} 
```

并将它们添加到方法的末尾，如下所示：

```
public interface MyInterface
{
    IData GetData(string p1, char p2, double p3, MyParameters p4);
} 
```

我正在寻找某种指导，说明哪种方式是“最”正确的继续方式。我可以看到这两个类别的优缺点，但我不希望我的偏见导致我走错路。

我的一些主要担忧是：

*   软件的可扩展性——我希望用户能够通过实现接口来做我还没有想到的事情
*   可维护性 - 理想情况下，我不想再接触负责再次调用 GetData() 的代码
*   清洁 API - 我不希望我得到的解决方案让第 3 方开发人员畏缩

我什至不知道在网上问什么问题来获得这个问题的指导。我有一种感觉，答案是“取决于”（取决于 p1-p5 与 GetData() 函数的目的之间的相关性），但有人可以指出我应该问的问题列表以帮助我评估一种解决方案是否比另一种更好？

相关： [帖子 1](https://stackoverflow.com/questions/12189236/advantage-of-java-pattern-where-method-takes-object-as-a-parameter-instead-of-in) [帖子 2](https://stackoverflow.com/questions/3616894/having-one-request-object-as-a-method-signature-parameter-which-constitute-all)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:35:17.557

为什么不一路走：

```
public Interface IParameters
{
    string p1 {get; set;}
    char p2 {get; set;}
    double p3 {get; set;}
    bool p4 { get; set; }
    DateTime p5 { get; set; }
}

public interface MyInterface
{
    IData GetData(IParameters p);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:29:24.340

让我试着回答这个问题。让我们评估您的选择：

1）如果如下界面

```
public interface MyInterface
{
    IData GetData(string p1, char p2, double p3);
} 
```

被打破：

a) 并且根本不应该使用，那么你应该强制实现者重写它。所以改变方法定义。

```
public interface MyInterface
{
    IData GetData(something else);
} 
```

b) 但是你只需要鼓励用户使用新的定义，然后你可以创建一个新的重载告诉他们第一个已经过时了。

```
public interface MyInterface
{
    //xml to tell them this is deprecated.
    IData GetData(string p1, char p2, double p3);
    IData GetData(string p1, char p2, double p3, and whatever);
} 
```

关于你的新定义，没有任何人可以在不了解模型的情况下给出一站式解决方案，但你问自己，

I）“*如果组合起来，参数本身可以代表一个实体吗？在现实世界中拥有一个参数单元是否意味着什么？* ”如果是这样，那就这样吧。如果没有，不要。我认为当你处于这种两难境地时，你应该依靠这种抽象层次的思考。我不确定泡吧`bool p4`和`DateTime p5`. 你应该将那些本身代表现实生活中的东西的参数组合在一起。如果这些组合都没有意义，那么就这样吧。将这种俱乐部留给这种合乎逻辑的思维方式，您将获得更大的成功。请注意，您将自己的定义留给其他程序员，为了简化他们的工作，您的方法签名应该非常合乎逻辑。

II)*类可以做更多的事情而不是仅仅持有一组数据吗？*类应该是这里的选项。

III）*我只需要控制类定义而不是它的实现*吗？在这种情况下，只需定义输入的公共接口，并将实现留给客户。

IV)*未来对我的接口的修改是否应该不会破坏现有的实现？*重载是你的出路。

假设您有两个选择，将签名展平，或加入俱乐部。

1) 没有泡吧：

a) 更少的代码，减少另一层。

b) 无需公开另一个类。

2) 泡吧：

a) 更好地理解模型以进入函数 - 你的意图很明确。

b) 如果您需要添加可选的细节来构建新形成的类，将来易于扩展。假设你有一堂课

```
class Input {
    string p1; char p2; double p3;

    public Input(string p1, char p2, double p3){
    }
} 
```

和界面

```
public interface MyInterface
{
    IData GetData(Input p1);
} 
```

现在您可能想要添加可选的详细信息，例如 bool 和 DateTime。由于它们是可选的，因此您不必在构造函数中强制它。您仍然可以拥有相同的构造函数，并授予用户在构造函数之外根据需要进行修改的权限。

```
class Input {
    string p1; char p2; double p3; bool p4; DateTime p5;

    public Input(string p1, char p2, double p3){
    }
} 
```

界面仍然可以相同。正如我所说的那样，产生这种东西的动力很可悲地取决于你的模型。简而言之，如果一个分组可能意味着什么，就让它成为一个类或接口（取决于谁将控制逻辑）。

# objective-c - iOS6的Twitter框架如何通过应用程序的设置登录

> ID：13946062
> 
> 赞同：8
> 
> 时间：2012-12-19T05:29:54.513
> 
> 标签：objective-c, ios, twitter, ios6, social-networking

对于 iOS5，我们可以参考：iOS5 中 [使用 Twitter 框架提示登录警报？](https://stackoverflow.com/questions/9667921/prompt-login-alert-with-twitter-framework-in-ios5)

但是对于没有帮助的iOS6，我尝试了以下方式，但存在1个键盘外观问题是否有任何人可以帮助我：

```
SLComposeViewController *tweetSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
tweetSheet.view.hidden=TRUE;

[self presentViewController:tweetSheet animated:YES completion:^{
    [tweetSheet.view endEditing:YES];
}]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T05:51:10.883

我做了一个小改动，问题就消失了

在上面的代码中呈现视图控制器时刚刚设置`animated:NO`

```
    [self presentViewController：tweetSheet 动画：没有完成：^{
        [tweetSheet.view endEditing:YES];
    }]

```

# bash - 在bash中获取字符串之间的字符串

> ID：13946066
> 
> 赞同：1
> 
> 时间：2012-12-19T05:30:01.680
> 
> 标签：bash, sed

我想得到和之间的`<sometag param='`字符串`'>`

我尝试使用[Get any string between 2 string 中的方法并在 bash 中分配一个变量](https://stackoverflow.com/questions/8568925/get-any-string-between-2-string-and-assign-a-variable-in-bash)来获取“x”：

```
 echo "<sometag param='x'><irrelevant stuff='nonsense'>" | tr "'" _ | sed -n 's/.*<sometag param=_\(.*\)_>.*/\1/p' 
```

问题（除了效率低，因为我无法为 sed 正确地转义撇号）是 sed 匹配最大值，即输出为：

```
 x_><irrelevant stuff=_nonsense 
```

但正确的输出将是最小匹配，在这个例子中只是“x”

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T05:39:32.280

您可能正在寻找这样的东西：

```
sed -n "s/.*<sometag param='\([^']*\)'>.*/\1/p" 
```

测试：

```
echo "<sometag param='x'><irrelevant stuff='nonsense'>" | sed -n "s/.*<sometag param='\([^']*\)'>.*/\1/p" 
```

结果：

```
x 
```

解释：

*   代替贪婪捕获，使用非贪婪捕获，例如：`[^']*` 这意味着匹配除`'`任意次数之外的任何内容。为了使图案粘住，接下来是：`'>`。
*   您还可以使用双引号，这样您就不需要转义单引号。如果你想转义单引号，你会这样做：

-

```
... | sed -n 's/.*<sometag param='\''\([^'\'']*\)'\''>.*/\1/p' 
```

请注意单引号并没有真正转义。`sed`表达式停止，插入转义的单引号并重新`sed`打开表达式。把它想象成一个四字符的转义序列。

* * *

就个人而言，我会使用`GNU grep`. 这将使解决方案稍微短一些。像这样运行：

```
... | grep -oP "(?<=<sometag param=').*?(?='>)" 
```

测试：

```
echo "<sometag param='x'><irrelevant stuff='nonsense'>" | grep -oP "(?<=<sometag param=').*?(?='>)" 
```

结果：

```
x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:39:29.513

在这些情况下，您不必组装正则表达式，您可以使用 ' 作为字段分隔符

```
in="<sometag param='x'><irrelevant stuff='nonsense'>"

IFS="'" read x whatiwant y <<< "$in"            # bash
echo "$whatiwant"

awk -F\' '{print $2}' <<< "$in"                 # awk 
```

# algorithm - 一组线之间的距离

> ID：13946072
> 
> 赞同：4
> 
> 时间：2012-12-19T05:30:20.570
> 
> 标签：algorithm, image-processing

假设我的图像是简单的形状 - 线条、点、曲线和简单对象的集合，我如何计算图像之间的距离 - 所以长度很重要，但总比例不重要，线\曲线的位置很重要，角度是重要等

附图例如：

我的比较对象是左上角的一个立方体，分数只是这个例子的虚构。

1.  到圆柱体的距离为 80（有 2 条线，但顶部几何形状不同）
2.  左下角的立方体得分为 100，因为它完全匹配不同比例的线条。
3.  右下角的 Rectangle 得分为 90，因为它的顶部有完全匹配线，但侧面有不同的比例线。

我正在寻找可以帮助我开始思考解决方案的算法名称或一般方法......

谢谢您的帮助。

![在此处输入图像描述](../Images/93ba6c40cf12e1d684826141253a304f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:18:50.807

这里有一些东西可以帮助您入门。当遇到新问题时，我认为尝试很多复杂的步骤并没有多大价值，因为它们可以在某个地方使用。所以我的重点是使用相对简单的东西，在更多不同的情况下会失败，但希望你能看到它的价值并了解问题所在。

该方法完全基于角点检测；这种检测的两种典型方法是 Harris 检测器，或者是 Shi 和 Tomasi 在 1994 年的“Good Features to Track”一文中描述的一种。我将使用第二种方法，因为在 OpenCV、较新的 Matlab 中有现成的实现，可能还有很多其他地方。它在这些包上的实施还允许更轻松地调整关于拐角质量和拐角之间的最小距离的参数。那么，假设您可以正确检测所有角点，您如何根据这些点测量一个形状与另一个形状的接近程度？图像具有任意大小，所以我的想法是将点坐标标准化为范围 [0, 1]。这解决了缩放问题，根据原始描述，这是所需的。现在我们必须比较 [0, 1]。在这里，我们做最简单的事情：考虑一点`p`从形状`a`来看，形状最近的点是`b`什么？我们假设它是该点`p`与 中的任何点之间绝对差异最小的一个`b`。如果我们将所有值相加，我们会得到形状之间的评分。分数越低，形状越相似（根据这种方法）。

下面是我画的一些形状：

![在此处输入图像描述](../Images/383456393a61fe9573fae7015ea00ebb.png)![在此处输入图像描述](../Images/9e5b1a5939d215bf0c5547f67a6869c5.png)![在此处输入图像描述](../Images/e6f36b1a615121781b1b8a8bf96f5954.png)![在此处输入图像描述](../Images/a5aa33abb955b9665b907548f766ecdd.png)![在此处输入图像描述](../Images/eef4d23e9dec0c9f7f857ddef7e42a35.png)![在此处输入图像描述](../Images/b2ce6ac415eb8d708897d0d75c51ccdd.png)

以下是检测到的角点：

![在此处输入图像描述](../Images/d5b12a5231c045b1113b5da800d88dc6.png)![在此处输入图像描述](../Images/399be97a02e7884671e9887df7a23fbe.png)![在此处输入图像描述](../Images/002dc45529335a727d69ed7fd3bdf92f.png)![在此处输入图像描述](../Images/02b4a5356e0350653c6b6e79c8f10d5b.png)![在此处输入图像描述](../Images/150fcf5782d11a87d9f92a8db8c0b0ed.png)![在此处输入图像描述](../Images/dd7c2b8e349fffb601365ad9fa153289.png)

正如您在最后一组图像中清楚地看到的那样，该方法很容易将矩形/正方形与圆柱体混淆。要处理这个问题，您需要将该方法与其他描述符结合起来。最初，您可能会考虑一个简单的问题，即形状面积与其边界框面积之间的比率（矩形为 1，圆柱体为更低）。

使用上述方法，以下是第一和第二形状、第一和第三形状之间的测量值……分别为：0.02358485、0.41350339、0.30128458、0.4980852、0.18031262。第二个多维数据集是第一个多维数据集的调整大小版本，如您所见，它们在这个指标上非常相似。最后一个形状是第一个立方体的调整大小版本，但没有保持纵横比，并且度量给出了更高的差异。

如果您想使用执行此操作的代码，这里是（在 Python 中，取决于 OpenCV，numpy）：

```
import sys
import cv2 as cv
import numpy

inp = []
for fname in sys.argv[1:]:
    img_color = cv.imread(fname)
    img = cv.cvtColor(img_color, cv.COLOR_RGB2GRAY)
    inp.append((img_color, img))

ptsets = []

# Corner detection parameters.
params = (
        200,  # max number of corners
        0.01, # minimum quality level of corners
        10,   # minimum distance between corners
)
# Params for visual circle markers.
circle_radii = 3
circle_color = (255, 0, 0)
for i, (img_color, img) in enumerate(inp):
    height, width = img.shape
    cornerMap = cv.goodFeaturesToTrack(img, *params)
    corner = numpy.array([c[0] for c in cornerMap])

    for c in corner:
        cv.circle(img_color, tuple(c), circle_radii, circle_color, -1)

    # Just to visually check for correct corners.
    cv.imwrite('temp_%d.png' % i, img_color)

    # Convert corner coordinates to [0, 1]
    cornerUnity = (corner - corner.min()) / (corner.max() - corner.min())
    # You might want to use other descriptors here. XXX
    ptsets.append(cornerUnity)

def compare_ptsets(p):
    res = numpy.zeros(len(p))

    base = p[0]
    for i in xrange(1, len(p)):
        sum_min_diff = sum(numpy.abs(p[i] - value).min() for value in base)
        res[i] = sum_min_diff

    return res

res = compare_ptsets(ptsets)
print res 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:05:17.767

要遵循的过程取决于您要考虑的功能深度和所需的准确性。

如果您想要更准确的东西，请搜索一些像[这样](https://computation.llnl.gov/casc/sapphire/pubs/200388.pdf)的技术论文，它们可以提供具体且经过充分验证的方法或算法。

**编辑：**

可以调整**Waltz 算法**（AI 中的一种方法）的想法。这只是我的想法。解释原始图像，从中生成一些约束。对于每个候选人，找出它满足的约束数量。满足更多约束的那一张将与原始图像最相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T05:53:11.197

尝试计算每个图形的[质心](http://en.wikipedia.org/wiki/Center_of_mass)。将图中的每个点都视为质量等于 1 的粒子。

然后将每个距离计算为`sqrt((x1-x2)^2 + (y1-y2)^2)`，其中 (xi, yi) 是图 i 的质心坐标。

# r - 有没有办法对访问向量的多个元素的操作进行向量化？

> ID：13946077
> 
> 赞同：4
> 
> 时间：2012-12-19T05:31:02.637
> 
> 标签：r, loops, vectorization

假设我有一个整数向量：

```
> a<-sample(1:100,10)  
> a  
 [1] 13 23 97 70 63 32 82 31 15 36 
```

我想要一个包含这个向量的*累积*值的向量。也就是说，我想要向量
13 36 133 203 266 298 380 411 426 462

实现此目的的一种方法是使用 for 循环。我更喜欢使用 apply/lapply/sapply/...，但我能想到的唯一方法是：

```
sapply(1:length(a), function(x) {sum(a[1:x])})
[1]  13  36 133 203 266 298 380 411 426 462 
```

这行得通，但我想知道是否有更好的方法来做到这一点。在那儿？
（这可能是一个不好的例子，但总的来说，如果您知道这些元素相对于当前元素的位置，有没有办法访问被迭代的列表的元素？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T05:42:37.187

你可能会傻笑，但已经有一个内置函数，请参阅 ?cumsum

```
x <- sample(1:100,20)
x

 [1] 32 42 54 79 92 69 96 41 51 22 74 76 86 37 85 99  3 11 17 57

cumsum(x)

 [1]   32   74  128  207  299  368  464  505  556  578  652  728  814  851  936
[16] 1035 1038 1049 1066 1123 
```

# java - 安装php插件时无法在eclipse中创建动态Web项目

> ID：13946082
> 
> 赞同：0
> 
> 时间：2012-12-19T05:31:26.000
> 
> 标签：java, eclipse, eclipse-plugin

我创建了一些动态 Web 项目，它们运行良好。之后，我在 Eclipse 中安装了 PHP 开发插件。还安装了用于 PHP 调试的 xdebug 插件。

现在，当我创建 Java 动态 Web 项目时，我收到此错误：

```
The selected wizard could not be started.
Plug-in "org.eclipse.jst.servlet.ui" was unable to instantiate class 
"org.eclipse.jst.servlet.ui.project.facet.WebProjectWizard".
java.lang.NullPointerException 
```

**编辑**：我安装了 WTP。

我能够创建 java 静态 web 项目和 PHP 项目。但无法创建 Java 动态 web 项目。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:50:20.550

你最近从eclipse更新了吗？从[错误](http://www.eclipse.org/forums/index.php/m/511994/)看来，在某些模块中混合更新会导致此错误消息。
最好[下载](http://www.eclipse.org/downloads/)eclipse 并指向您当前的工作空间。

# android - 状态 0 中的 MediaPlayer 错误 (-38,0)

> ID：13946083
> 
> 赞同：2
> 
> 时间：2012-12-19T05:31:41.493
> 
> 标签：android

我正在处理实时视频流，我无法流式传输视频并出现以下错误

```
12-19 10:54:38.860: ERROR/MediaPlayer(483): Attempt to call getDuration without a valid mediaplayer
12-19 10:54:38.860: ERROR/MediaPlayer(483): error (-38, 0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): Error (-38,0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): stop called in state 0
12-19 10:54:38.860: ERROR/MediaPlayer(483): error (-38, 0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): Error (-38,0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): stop called in state 0
12-19 10:54:38.860: ERROR/MediaPlayer(483): error (-38, 0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): Error (-38,0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): stop called in state 0
12-19 10:54:38.860: ERROR/MediaPlayer(483): error (-38, 0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): Error (-38,0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): stop called in state 0
12-19 10:54:38.860: ERROR/MediaPlayer(483): error (-38, 0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): Error (-38,0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): stop called in state 0
12-19 10:54:38.860: ERROR/MediaPlayer(483): error (-38, 0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): Error (-38,0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): stop called in state 0
12-19 10:54:38.860: ERROR/MediaPlayer(483): error (-38, 0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): Error (-38,0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): stop called in state 0
12-19 10:54:38.860: ERROR/MediaPlayer(483): error (-38, 0)
12-19 10:54:38.860: ERROR/MediaPlayer(483): Error (-38,0) 
```

我的代码在下面

```
public class VideoSample extends Activity implements OnSeekBarChangeListener, Callback, OnPreparedListener, OnCompletionListener, OnBufferingUpdateListener,
    OnClickListener, OnSeekCompleteListener, AnimationListener {
private TextView textViewPlayed;
private TextView textViewLength;
private SeekBar seekBarProgress;
private SurfaceView surfaceViewFrame;
private ImageView imageViewPauseIndicator;
private MediaPlayer player;
private SurfaceHolder holder;
private ProgressBar progressBarWait;
private Timer updateTimer;
private Bundle extras;
private Animation hideMediaController;
private LinearLayout linearLayoutMediaController;
private static final String TAG = "log_tag";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.videosample);
    extras = getIntent().getExtras();

    linearLayoutMediaController = (LinearLayout) findViewById(R.id.linearLayoutMediaController);
    linearLayoutMediaController.setVisibility(View.GONE);

    hideMediaController = AnimationUtils.loadAnimation(this, R.anim.disapearing);
    hideMediaController.setAnimationListener(this);

    imageViewPauseIndicator = (ImageView) findViewById(R.id.imageViewPauseIndicator);
    imageViewPauseIndicator.setVisibility(View.GONE);
    if (player != null) {
        if (!player.isPlaying()) {
            imageViewPauseIndicator.setVisibility(View.VISIBLE);
        }
    }

    textViewPlayed = (TextView) findViewById(R.id.textViewPlayed);
    textViewLength = (TextView) findViewById(R.id.textViewLength);

    surfaceViewFrame = (SurfaceView) findViewById(R.id.surfaceViewFrame);
    surfaceViewFrame.setOnClickListener(this);
    surfaceViewFrame.setClickable(false);

    seekBarProgress = (SeekBar) findViewById(R.id.seekBarProgress);
    seekBarProgress.setOnSeekBarChangeListener(this);
    seekBarProgress.setProgress(0);

    progressBarWait = (ProgressBar) findViewById(R.id.progressBarWait);

    holder = surfaceViewFrame.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    player = new MediaPlayer();
    player.setOnPreparedListener(this);
    player.setOnCompletionListener(this);
    player.setOnBufferingUpdateListener(this);
    player.setOnSeekCompleteListener(this);
    player.setScreenOnWhilePlaying(true);
    player.setDisplay(holder);
}

private void playVideo() {
    if (extras.getString("video_path").equals("VIDEO_URI")) {
        showToast("Please, set the video URI in HelloAndroidActivity.java in onClick(View v) method");
    } else {
        new Thread(new Runnable() {
            public void run() {
                try {
                    player.setDataSource(VideoSample.this, Uri.parse("rtsp://184.72.239.149/vod/mp4:BigBuckBunny_115k.mov"));
                    player.prepareAsync();
                } catch (IllegalArgumentException e) {
                    showToast("Error while playing video");
                    Log.i(TAG, e.getMessage());
                    e.printStackTrace();
                } catch (IllegalStateException e) {
                    showToast("Error while playing video");
                    Log.i(TAG, e.getMessage());
                    e.printStackTrace();
                } catch (IOException e) {
                    showToast("Error while playing video. Please, check your network connection.");
                    Log.i(TAG, e.getMessage());
                    e.printStackTrace();
                }
            }
        }).start();
    }
}

private void showToast(final String string) {
    runOnUiThread(new Runnable() {
        public void run() {
            Toast.makeText(VideoSample.this, string, Toast.LENGTH_LONG).show();
            finish();
        }
    });
}

private void hideMediaController() {
    new Thread(new Runnable() {
        public void run() {
            try {
                Thread.sleep(5000);
                runOnUiThread(new Runnable() {
                    public void run() {
                        linearLayoutMediaController.startAnimation(hideMediaController);
                    }
                });
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }).start();
}

public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    Log.i(TAG, "========== onProgressChanged : " + progress + " from user: " + fromUser);
    if (!fromUser) {
        textViewPlayed.setText(Utils.durationInSecondsToString(progress));
    }
}

public void onStartTrackingTouch(SeekBar seekBar) {
}

public void onStopTrackingTouch(SeekBar seekBar) {
    if (player.isPlaying()) {
        progressBarWait.setVisibility(View.VISIBLE);
        player.seekTo(seekBar.getProgress() * 1000);
        Log.i(TAG, "========== SeekTo : " + seekBar.getProgress());
    }
}

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {

}

public void surfaceCreated(SurfaceHolder holder) {
    playVideo();
}

public void surfaceDestroyed(SurfaceHolder holder) {

}

public void onPrepared(MediaPlayer mp) {
    if (!player.isPlaying()) {
        player.start();
        updateMediaProgress();
        linearLayoutMediaController.setVisibility(View.VISIBLE);
        hideMediaController();
    }
    Log.i(TAG, "========== onPrepared ===========");
    int duration = mp.getDuration() / 1000; // duration in seconds
    seekBarProgress.setMax(duration);
    textViewLength.setText(Utils.durationInSecondsToString(duration));
    progressBarWait.setVisibility(View.GONE);

    // Get the dimensions of the video
    int videoWidth = player.getVideoWidth();
    int videoHeight = player.getVideoHeight();
    float videoProportion = (float) videoWidth / (float) videoHeight;
    Log.i(TAG, "VIDEO SIZES: W: " + videoWidth + " H: " + videoHeight + " PROP: " + videoProportion);

    // Get the width of the screen
    int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
    int screenHeight = getWindowManager().getDefaultDisplay().getHeight();
    float screenProportion = (float) screenWidth / (float) screenHeight;
    Log.i(TAG, "VIDEO SIZES: W: " + screenWidth + " H: " + screenHeight + " PROP: " + screenProportion);

    // Get the SurfaceView layout parameters
    android.view.ViewGroup.LayoutParams lp = surfaceViewFrame.getLayoutParams();

    if (videoProportion > screenProportion) {
        lp.width = screenWidth;
        lp.height = (int) ((float) screenWidth / videoProportion);
    } else {
        lp.width = (int) (videoProportion * (float) screenHeight);
        lp.height = screenHeight;
    }

    // Commit the layout parameters
    surfaceViewFrame.setLayoutParams(lp);

    // Start video
    surfaceViewFrame.setClickable(true);
}

public void onCompletion(MediaPlayer mp) {
    mp.stop();
    if (updateTimer != null) {
        updateTimer.cancel();
    }
    //finish();
}

/**
 * Change progress of mediaController
 * */
private void updateMediaProgress() {
    updateTimer = new Timer("progress Updater");
    updateTimer.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                public void run() {
                    seekBarProgress.setProgress(player.getCurrentPosition() / 1000);
                }
            });
        }
    }, 0, 1000);
}

public void onBufferingUpdate(MediaPlayer mp, int percent) {
    int progress = (int) ((float) mp.getDuration() * ((float) percent / (float) 100));
    seekBarProgress.setSecondaryProgress(progress / 1000);
}

public void onClick(View v) {
    if (v.getId() == R.id.surfaceViewFrame) {
        if (linearLayoutMediaController.getVisibility() == View.GONE) {
            linearLayoutMediaController.setVisibility(View.VISIBLE);
            hideMediaController();
        } else if (player != null) {
            if (player.isPlaying()) {
                player.pause();
                imageViewPauseIndicator.setVisibility(View.VISIBLE);
            } else {
                player.start();
                imageViewPauseIndicator.setVisibility(View.GONE);
            }
        }
    }
}

public void onSeekComplete(MediaPlayer mp) {
    progressBarWait.setVisibility(View.GONE);
}

public void onAnimationEnd(Animation animation) {

}

public void onAnimationRepeat(Animation animation) {

}

public void onAnimationStart(Animation animation) {
    linearLayoutMediaController.setVisibility(View.GONE);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:17:32.277

我怀疑您在`onBufferingUpdate`异步准备完成之前接到了电话。据我所知，如果准备是异步完成并且缓冲尚未填满缓冲区缓存或到达 EOS，AwesomePlayer 可以在准备完成之前通知您缓冲更新。
这将导致您`getDuration`在 MediaPlayer 对象处于空闲状态时调用它，这是不允许的（请参阅[https://developer.android.com/reference/android/media/MediaPlayer.html](https://developer.android.com/reference/android/media/MediaPlayer.html)）。

我的建议是有一个你最初设置为 FALSE 的布尔标志，当你得到`onPrepared`. 在此标志为 TRUE 之前，您不应调用 MediaPlayer 对象，要求它处于（至少）准备状态，例如`getDuration`。

# php - 当我添加一些 php 代码时，我的网站崩溃了

> ID：13946085
> 
> 赞同：-3
> 
> 时间：2012-12-19T05:31:42.673
> 
> 标签：php, joomla, joomla2.5, virtuemart

当我在模板文件夹中的 index.php 中添加这些 php 代码时，我的网站已经崩溃：

```
<?php
                    if (!class_exists( 'VmModel' )) require_once(JPATH_ADMINISTRATOR.DS.'components'.DS.'com_virtuemart'.DS.'helpers'.DS.'vmmodel.php');
                    if (!class_exists( 'VmConfig' )) require_once(JPATH_ADMINISTRATOR . DS . 'components' . DS . 'com_virtuemart'.DS.'helpers'.DS.'config.php');
                    if(!class_exists('VirtueMartCart')) require_once(JPATH_VM_SITE.DS.'helpers'.DS.'cart.php');
                    $hv_cart = VirtueMartCart::getCart(true);
                    foreach( $hv_cart->products as $pkey =>$prow ){?>
                        <li class="ui-widget-content ui-corner-tr" style="width: 48px;">
                            <?php echo $prow->image-> displayMediaThumb('style="height: 36px; width: 100%"',false); ?>
                            <span>SL:<?php echo $prow->quantity; ?></span>
                            <span class="hv_hidden" product_id="<?php echo $prow->virtuemart_product_id; ?>" quantity="<?php echo $prow->quantity; ?>"> </span>
                        </li>
                    <?php
                    }
                ?> 
```

当我访问主页时，服务器显示错误：

> 致命错误：main() [function.main]：脚本试图执行方法或访问不完整对象的属性。请确保在调用 unserialize()*之前*加载了您尝试操作的对象的类定义“VmImage”， 或提供 __autoload() 函数来加载 C:\xampp\htdocs\chovietnam.com\ 中的类定义templates\it_thestore4\index.php 第 68 行

第 68 行 make 错误是

```
<?php echo $prow->image-> displayMediaThumb('style="height: 36px; width: 100%"',false); ?> 
```

我第一次访问主页时它仍然可以正常工作，但是当我再次访问主页时，它会出错。而且我清除了浏览器的所有cookie，缓存......它会再次正常并在我再次访问主页时出错。但是如果我访问其他页面（不是主页，并且这些代码仍然在该页面中工作）没有错误出现任何人都可以帮助我解决这个问题，我使用 Joomla 2.5 和 Virtuemart 2。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:40:35.747

您的问题是 PHP 代码（不一定是您编写的代码）中的某处`unserialize`被调用。数据表示在调用 时不存在的类`unserialize`。因此，PHP 不能真正反序列化它：它不能创建一个不存在的类的实例。也添加一个`class_exists`检查和`require_once`声明`VmImage`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:33:17.987

听起来像：当您访问包含上面代码的站点时，VM 正在会话/cockie 中存储一些东西。当您再次访问时，它将失败，因为会话已恢复，但您的代码加载的 php 类当时未加载。

尝试尽早将 VM 类加载到自动加载函数中，或者更好地加载 VM 类

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-19T05:35:56.463

尝试这个：

```
<? php echo $prow->image-> displayMediaThumb('style=\"height: 36px; width: 100%\"',false); ?> 
```

# python - weave.inline() 的 support_code 参数中 nd numpy 数组的 FOOn(i, j, k) 表示法？有没有其他选择？

> ID：13946086
> 
> 赞同：0
> 
> 时间：2012-12-19T05:31:46.693
> 
> 标签：python, arrays, numpy, scipy, inline

我想用来`support_code`定义与 nd numpy 数组交互的函数。在`code`参数内部，`FOO3(i, j, k)`符号有效，但仅在其中，而不是在`support_code`.Something 中是这样的：

```
import scipy
import scipy.weave
code = '''return_val = f(1);'''
support_code = '''int f(int i) {
    return FOO3(i, i, i);
}''''
foo = scipy.arange(3**3).reshape(3,3,3)
print(scipy.weave.inline(code, ['foo'], support_code=support_code)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:33:56.403

支持代码的概念主要是做一些包含。在你的情况下，我猜这个函数应该是这样的：

```
import scipy
import scipy.weave

def foofunc(i):
    foo = scipy.arange(3**3).reshape(3,3,3)
    code = '''#do something lengthy with foo and maybe i'''
    scipy.weave.inline(code, ['foo', 'i']))
    return foo[i,i,i] 
```

对于您正在尝试做的事情，您根本不需要支持代码。您也没有任何速度改进，当您尝试在 C 中执行函数返回而不是在 python 中执行此操作时，与函数调用的成本相比，数组访问也是可以忽略的。为了更好地了解 weave 何时以及如何帮助您加速您的代码，请查看[此处](http://www.scipy.org/PerformancePython)。

# java - android媒体播放器替代品？

> ID：13946088
> 
> 赞同：2
> 
> 时间：2012-12-19T05:31:57.453
> 
> 标签：java, android, audio, media-player, soundpool

是否有一个 java 音频库能够设置音频的播放速率（控制音频的速度）以及能够返回播放的当前位置和音频流的总持续时间？

我注意到 android mediaplayer 可以返回播放的当前位置和音频流的总持续时间，但它不允许我设置播放速率。

不幸的是，android soundpool 可以让我设置播放速率，但不能让我获得当前位置或音频流的总持续时间。

你们对什么java库可以帮助我有什么建议吗？任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:36:57.737

流行的 Android 播客应用程序 DoggCatcher 为此使用了一个名为 Presto 的第三方播放器。我还没有研究过你如何以编程方式与它交互，但是当我在那里使用它时，它在 DoggCatcher 中运行良好。

[http://www.aocate.com/presto/](http://www.aocate.com/presto/)

[https://play.google.com/store/apps/details?id=com.aocate.presto&hl=en](https://play.google.com/store/apps/details?id=com.aocate.presto&hl=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-15T19:41:36.933

试试[SoundPool](https://developer.android.com/reference/android/media/SoundPool.html)类。

播放功能似乎具有您正在寻找的所有功能......

```
SoundPlayer.play(int soundID, float leftVolume, float rightVolume,
                 int priority, int loop, float rate) 
```

还有一些非常有用的 setter 函数。

例如`void setRate(int streamID, float rate)`

# c# - 在页面上创建相册

> ID：13946093
> 
> 赞同：2
> 
> 时间：2012-12-19T05:32:16.477
> 
> 标签：c#, facebook, facebook-graph-api

我正在尝试发布相册并将照片上传到我拥有管理权限的 Facebook 页面。[它可以使用在“查找我的 facebook ID](http://www.findmyfacebookid.com) ”中找到的我的 facebook 帐户ID，但是当我使用我的页面 ID 时它不起作用。这是我创建相册的代码。

```
var facebookClient = new FacebookClient(Properties.Settings.Default.AccessToken);
        dynamic parameters = new ExpandoObject();
        parameters.name = AlbumName;
        parameters.description = AlbumDescription;
        parameters.uid = AlbumOwnerID;
        var fbResult = facebookClient.Post(string.Format("/{0}/Albums", AlbumOwnerID), parameters); 
```

这是我得到的错误。

![无效的身份证件](../Images/07f6e6fc5cd114670b90d51f91cec79b.png)

# dynamics-crm-2011 - CRM 2011 中的自定义视图功能区按钮？

> ID：13946094
> 
> 赞同：0
> 
> 时间：2012-12-19T05:32:26.057
> 
> 标签：dynamics-crm-2011, dynamics-crm

对于联系人实体，我有 3 个自定义视图（视图 1、视图 2、视图 3），我只想在选择视图时在主页网格中显示功能区按钮 3.MS CRM 2011 中是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:38:27.183

也许您可以尝试为您的功能区按钮创建自定义 JavaScript“启用规则”。[这里的例子](http://sliong.wordpress.com/2012/05/30/crm-2011-custom-ribbon-enable-rule-javascript-check-relationship/)。使用一个功能创建新的 JS 网络资源，您将在其中检查是否选择了特定视图。

如果必须隐藏功能区按钮，只需在检查选择了哪个视图后将其隐藏。在这种情况下，我认为这只能通过修改 DOM 来实现。

希望能帮助到你！

# javascript - vbscript Mid 函数的 javascript 等效函数是什么？是 substring() 还是 substr()？

> ID：13946097
> 
> 赞同：3
> 
> 时间：2012-12-19T05:32:38.460
> 
> 标签：javascript

有两种javascript解决方案，

```
1\. String.substring(from,to) 
2\. String.substr(from,length) 
```

vb脚本Mid（）函数最方便的解决方案是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T05:37:15.107

该方法最接近`substr`VB函数的用法。`Mid`明显的区别是VB函数*将字符串*作为参数，其中JS`substr`是*字符串对象的方法*。

```
string.substr(start,length) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T05:38:27.980

```
foo = "Hello World!".substr(2, 4); 
```

是相同的

```
foo = Mid("Hello World!", 2, 4) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T05:36:13.290

这取决于你想做什么。如果您在 VBScript 中减去以找到长度，`substring`则可能对您最方便，因为您不必计算长度。另一方面，如果你有长度，否则需要计算结束位置，`substr`对你来说会更方便。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T09:35:44.470

mid函数的语法如下，

```
 Mid(string,start[,length]) 
```

中间函数使用长度作为参数。所以，你必须使用长度。

```
 string.substr(start,length) 
```

# c# - 在 C# 中嵌入 boo，无法识别正在执行的程序集

> ID：13946100
> 
> 赞同：7
> 
> 时间：2012-12-19T05:32:50.823
> 
> 标签：c#, dynamic, compiler-construction, embed, boo

脚本/ai/Dream.boo

```
import CultLib
import LonelyHero

class Dream(Enemy):
    pass 
```

C＃

```
var bc = new BooCompiler();
bc.Parameters.Input.Add(new FileInput("rsc/script/ai/" + "Dream" + ".boo"));
bc.Parameters.Pipeline = new CompileToMemory();
bc.Parameters.References.Add(Assembly.GetExecutingAssembly());
bc.Parameters.References.Add(Assembly.LoadFile(new DirectoryInfo("CultLib.dll").FullName));
bc.Parameters.References.Add(Assembly.LoadFile(new DirectoryInfo("sfmlnet-audio-2.dll").FullName));
bc.Parameters.References.Add(Assembly.LoadFile(new DirectoryInfo("sfmlnet-graphics-2.dll").FullName));
bc.Parameters.References.Add(Assembly.LoadFile(new DirectoryInfo("sfmlnet-window-2.dll").FullName));

var cc = bc.Run();

if(cc.GeneratedAssembly!=null)
{
    cc.GeneratedAssembly.CreateInstance("Dream", true, BindingFlags.NonPublic, null,
                                        new object[] {Parent, pos}, null, null);
}
else
{
    foreach (var error in cc.Errors)
        Console.WriteLine(error);
} 
```

在该行`bc.Parameters.References.Add(Assembly.GetExecutingAssembly());`中，我添加了包含命名空间“LonelyHero”的执行程序集。然而，错误

> *rsc/script/ai/Dream.boo(2, 8): BCE0021: 未找到命名空间 LonelyHero。也许您忘记添加程序集引用？*

出现。

LonelyHero 应该存在，为什么会出现这个错误，我该怎么做才能解决它？

注意：在替换`Assembly.GetExecutingAssmebly()`为 时`Assembly.GetAssembly(typeof(Enemy))`，确保它在 LonelyHero 命名空间下添加具有类的程序集，会发生相同的错误。还与`Assembly.LoadFile(new DirectoryInfo("LonelyHero.exe").FullName)`

出现在 Boo 0.9.4.9 和 booxw-1203 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:38:26.183

BOO 中导入的命名空间需要包含至少一种公共类型才能成功导入；否则你会得到`BCE0021`错误，所以你要确保 Enemy 类型是公共的（或另一个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T14:58:09.950

我不知道 Boo 或 C#，但我发现有人在 Boo Programming Google Group 上提出了类似的问题。他们问的问题：

[“没有找到命名空间'Pathfinding'，也许你忘记添加程序集引用了？”](https://groups.google.com/forum/?fromgroups=#!topic/boolang/j0hwoXmOn6c)

> 具体来说，他们收到了这个错误：
> 
> 我正在将一些现有的代码从 C# 转换为 Boo。我的一个课程有一个“使用寻路”，它被脚本转换器转换为“导入寻路”。
> 
> 尝试编译时出现此错误：
> 
> Assets/Script/VehicleController.boo(4,8): BCE0021: Namespace 'Pathfinding' not found，也许你忘了添加程序集引用？
> 
> 我使用的 Pathfinding 库是用 C# 编写的。这会导致问题吗？我还需要做些什么来完成这项工作吗？

这看起来像您的错误消息，有人提到的解决方案是您需要更早地将脚本放入编译阶段，以确保可以从用其他语言编写的脚本访问它们。

此[URL 被引用为](http://docs.unity3d.com/Documentation/ScriptReference/index.Script_compilation_28Advanced29.html)有关脚本编译的更多信息的参考/来源。

# css - 显示在菜单项顶部的 Internet Explorer 中的 Spry 水平下拉菜单

> ID：13946102
> 
> 赞同：2
> 
> 时间：2012-12-19T05:33:15.040
> 
> 标签：css, drop-down-menu, spry

我已经束手无策了。首先，我的网站。

[http://mojooutdoors.dreamhosters.com](http://mojooutdoors.dreamhosters.com)

如果您将鼠标悬停在任何非 IE 浏览器中的菜单上，它可以正常工作。下拉菜单显示在菜单项的正下方，一切都很好。然而！IE，作为 IE，认为这是不可接受的，并在菜单项的正上方显示下拉菜单。

我已经阅读了删除/修改以下java的所有内容：

```
if(Spry.is.ie)
    {
        this.addClassName(items[i], this.isieClass);
        items[i].style.position = "static";
    } 
```

在 css 表中更改以下 IE hack：

```
@media screen, projection
{
    ul.MenuBarHorizontal li.MenuBarItemIE
    {
        display: inline;
        f\loat: left;
        background: #FFF;
    }
} 
```

我已将 javascript 位置更改为其他内容，导致下拉菜单显示在页面的中间。CSS IE hack 似乎没有效果。

有人可以帮帮我吗？我在互联网上的任何地方都找不到解决方案（并不是因为缺乏尝试），而且我什么也没找到。

谢谢，任何回复的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:51:32.180

这也许是你的解决方案？

> ```
> @media screen, projection
> {
>     ul.MenuBarHorizontal li.MenuBarItemIE
>     {
>         display: block;
>         float: left;
>         background: #FFF;
>     }
> } 
> ```

也许试试 if IE 功能。

```
<!--[if IE]>    
@media screen, projection
{
    ul.MenuBarHorizontal li.MenuBarItemIE
    {
        display: block;
        margin: 10px 10px 10px 10px;
        float: left;
        background: #FFF;
    }
}
<![endif]--> 
```

并编辑边距直到它的位置？

# php - 在 CentOS 上使用 MSSQL 和 PHP

> ID：13946103
> 
> 赞同：2
> 
> 时间：2012-12-19T05:33:20.433
> 
> 标签：php, sql-server, pdo, centos

我已经在我的 CentOS 环境中安装并配置了 FreeTDS，以使我的 PHP 代码能够连接到一些外部 MSSQL 服务器。我的整个应用程序都在使用 PDO 编写，它在 Windows 上完美运行。只是想知道我的相同 PDO 代码是否可以在 CentOS 中使用，否则我必须将整个代码从 PDO 转换为 mssql_query 表单。

就像在 PDO 中一样，我有：

```
$statement_keyword = $obj->conn->prepare($keywordquery);
$statement_keyword->execute();
$rows_keyword = $statement_keyword->fetchAll(PDO::FETCH_ASSOC); 
```

在使用 FreeTDS 的 MSSQL 中，我们必须编写

```
$result = mssql_query($keywordquery);
while ($Row = mssql_fetch_assoc($result)) {
  $iw[$i++]=(string)$Row['FullName'];
  .......
} 
```

意味着我必须通过整个循环运行才能获取记录数组，类似地，我可能需要在存储过程执行中进行更多更改......

任何人都可以指导我在 CentOS 上使用 PDO for MSSQL，或者其他简单的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:55:22.500

在寻找网络并进行一些研究和实验工作后，我意识到使用 Windows 的 PDO 代码到 PDO 等效项非常容易，而无需进行任何更改，我需要做的唯一更改是建立连接的方式

在 Windows 中使用 PDO 和 MSSQL

```
$this->conn = new PDO("sqlsrv:server=".$this->dbServer.";Database={$this->dbName}",$this->userName,$this->userPassword); 
```

在 CentOS 上使用 PDO 和 MSSQL

```
 $this->conn = new PDO("dblib:host=$this->dbServer;dbname={$this->dbName}",$this->userName,$this->userPassword); 
```

确保您已在 CentOS 堆栈上配置 FreeTDS、ODBC 等

# regex - 正则表达式在开头和结尾匹配带有大写单词的短语

> ID：13946104
> 
> 赞同：3
> 
> 时间：2012-12-19T05:33:23.667
> 
> 标签：regex

"UPPERCASEWORD UPPERCASEWORD 小写单词 UPPERCASEWORD UPPERCASEWORD"

以下 RegEx 很好地匹配上述模式，但如果中间有数字则无法匹配。\b[AZ][AZ][AZ]+(?:[\sa-z,]+[AZ]+)*\b

“UPPERCASEWORD UPPERCASEWORD 小写字母 1（或任何数字）UPPERCASEWORD UPPERCASEWORD”将不匹配

知道如何在匹配中包含数字吗？我尝试了一些介于 [0-9] 之间的选项，但没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T05:37:53.760

实际上给定的模式似乎匹配：

1.  3个或更多大写字符，然后
2.  1 个或多个小写字符（或逗号或空格），然后
3.  1 个或多个大写字符

您可能需要这种模式：

```
\b[A-Z][A-Z][A-Z]+(?:[\sa-z,]+[0-9]*[A-Z]+)*\b 
```

这相当于：

```
\b[A-Z]{3,}(?:[\sa-z,]+[0-9]*[A-Z]+)*\b 
```

或者，如果您想在小写字母之前只允许 2 个（或可能更多）大写字符，那么：

```
\b[A-Z]{2,}(?:[\sa-z,]+[0-9]*[A-Z]+)*\b 
```

如果您发布一些测试数据会有所帮助。

更新：听起来你想要的东西与你最初描述的完全不同。会这样做，还是匹配太多？

```
\b[A-Z]{2}.*[A-Z]{2}\b 
```

如果匹配太多，那么如果您的工具支持负前瞻，那么这可能会起作用，但它变得非常混乱：

```
\b[A-Z]{2}((?!\b[a-z][a-z'0-9]+\b\s[a-z][a-z'0-9]+).)*[A-Z]{2}\b 
```

# c# - 没有为 XAML 页面调用析构函数

> ID：13946114
> 
> 赞同：4
> 
> 时间：2012-12-19T05:34:19.053
> 
> 标签：c#, windows-phone-7, garbage-collection, windows-phone-8

我正在创建一个 Windows Phone (8) 应用程序。我有 2 个 XAML 页面。如果我手动测试以下内容：

```
1\. From 1st page, go to 2nd page
2\. Press the physical Back button.
3\. Go to #1. 
```

最终（在来回切换约 15 次之后），应用程序内存不足并崩溃。我将调试语句放在第 1 页和第 2 页的析构函数中，但似乎它们从未被调用过。

**我怎样才能确保这个问题不会发生？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:43:47.243

我 c# 通常，当 GC 希望这样做时，对象会被销毁，没有办法强制它这样做。虽然它很懒，但我不会让你的记忆耗尽。因此，您希望被销毁的对象还没有准备好被收集。未准备好是指在您的应用程序中，您在某处有对该对象的引用。其中一些引用作为贯穿整个过程的类中的一个字段是显而易见的，其他的则更难发现：

```
class LongLivingClass // say main window or some other
                      // instance that lives considerably longer then the other
{
     public event Action SomeEvent;
}

class ShortLivingClass // class that is created and should be destroyed 
                       // many times throughout life of LongLivingClass 
{

     ShortLivingClass(LongLivingClass llc)
     {
             llc.SomeEvent += DoSomething;
     }

     void DoSomething(){/*.../*}
} 
```

如果`ShortLivingClass`附加到暴露的事件，`LongLivingClass`那么它将不会被销毁，除非您在 dispose 方法中删除此处理程序：

```
 void Dispose()
 {
     llc.SomeEvent -= DoSomething;
 } 
```

请注意，`IDisposable`接口是一种模式的一部分，它不像析构函数那样由运行时强制执行。您需要确定调用它的地点和时间。

还要注意将捕获您的变量的闭包，如果这些变量是实例字段，那么该实例也将被捕获。

从长远来看，您需要在网上搜索 C# 中的内存泄漏。在 SO 上，考虑到这一点，有很多问题，祝你好运。

# jquery - 数据库值不反映到 jQuery UI 滑块

> ID：13946117
> 
> 赞同：3
> 
> 时间：2012-12-19T05:34:47.057
> 
> 标签：jquery, ruby-on-rails, jquery-ui-slider

我在我的 rails 应用程序中使用[jQuery UI Slider 。](http://jqueryui.com/slider/#rangemax)

因此，我尝试在提交表单时将 jQuery UI Slider 的值存储在我的数据库中。

我的代码如下：

```
 <div>
    <p>
      <%= f.label(:amount, 'Amount') %>
      <div id="slider"></div>
      <%= f.text_field(:amount, :maxlength => 3, :size => 2) %>
    </p>
  </div> 
```

滑块的以下 jquery：

```
 $(function() {
    $("#slider").slider({
      range: "max",
      min: 0,
      max: 10,
      value: 0,
      slide: function(event, ui) {
        $("#amount").val(ui.value);
      }
    });
    $("#amount").val($("#slider").slider("value"));
  }); 
```

上述所有代码工作正常。但是当我再次编辑我的页面时，会显示滑块最小值（即 0），而不是数据库中的值。那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T05:43:18.893

我认为问题在于您在`value`初始化滑块时将其设置为 0。试试这个代码，我没试过，但关键是除非你希望你的滑块在加载时总是设置为 0，否则你将不得不更改`value`初始化程序的参数。

```
$(function() {
    $("#slider").slider({
      range: "max",
      min: 0,
      max: 10,
      value: $("#amount").val(),
      slide: function(event, ui) {
        $("#amount").val(ui.value);
      }
    });
    $("#amount").val($("#slider").slider("value"));
  }); 
```

# java - Java/MySql如何实现基于角色的访问控制？

> ID：13946119
> 
> 赞同：5
> 
> 时间：2012-12-19T05:34:54.087
> 
> 标签：java, user-controls, access-control, user-roles

我打算开始一个基于 Web 的项目，该项目涉及用户注册，就像论坛/CMS 一样，但我的障碍是我不知道如何实现所谓的基于角色的访问控制。

我搜索了“基于角色的访问控制”，并在结果书中找到了关于：设计模式。

这与我需要的有关吗？有没有关于实现这个想法的教程？是在数据库端还是语言编程端实现？

有什么参考吗？有什么标题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T05:37:15.310

设计您的表格，以便用户可以根据您的系统拥有一个或多个角色

定义您对群组页面的访问权限

```
admin.allowed = .*
user.allowed=/home/.*,/profile/.* 
```

在某些属性文件中

创建一个 Web 过滤器，从会话中读取用户并确定角色，并查看是否允许请求它的页面，如果不允许，则重定向到其他页面

* * *

**也可以看看**

*   [为我的 Web 应用程序编写授权过滤器（JSF 2.0）](https://stackoverflow.com/questions/5662367/writing-an-authorization-filter-for-my-web-appjsf-2-0)

# sql - SQL数据库设计：存储一行的类型

> ID：13946123
> 
> 赞同：0
> 
> 时间：2012-12-19T05:35:03.907
> 
> 标签：sql, schema

我正在设计一个包含 table 的数据库`reference`，其中的一列`type`是几个预定义值之一（例如，`book`、`movie`、`magazine`等）。我打算随着时间的推移扩大可能值的范围（例如，如果我意识到我错过了`academic_paper`类型，我希望能够把它放进去）。

最简单的解决方案似乎是将表示类型的字符串简单地存储到表中。但这听起来会导致大量空间浪费。

我想到的另一个解决方案是创建一个新表`reference_types`，该`type`列在其外键中引用该表。这似乎具有确保有效外键的额外好处（这样我就不会在代码中的某处意外输入“杂志”），可能允许对某种类型的所有媒体进行更快的查询（因为整数比较应该很多比字符串比较快），但也会减慢我的应用程序速度，因为每当我需要引用类型时都需要连接，并且可能由于这些额外的连接而使逻辑复杂化。

你对这个问题的模式设计有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:47:04.150

创建reference_types 表。并且在您的引用表中使用整数并添加一个reference_type_name 字段。

您可以查询引用表以获取整数键并在需要时打印其名称，而无需执行与另一个表的连接，并且仍然使用该表来执行其他操作，只需保持两个表具有相同的类型名称。

我知道这听起来很多余，但它确实是通过 int 键进行简单查询并将所有内容放在一起的最快方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T05:48:24.153

这取决于，如果您想向引用类型添加一些其他信息，那么使用第二种方法。如果没有，请使用第一个，因为它更快并且存储的信息只是一个字符串（您始终可以选择唯一的来检索您的类型）。阅读这篇[文章](http://en.wikipedia.org/wiki/Database_normalization)了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T05:37:49.320

您的第二个解决方案是正确的。创建一个辅助表来存储您的引用类型并使用外键链接它们。

为了进一步阅读这个主题，您想要使用的搜索词是“数据库规范化”。

# iphone - iPhone中的UITextView滚动（自动）？

> ID：13946128
> 
> 赞同：3
> 
> 时间：2012-12-19T05:35:34.047
> 
> 标签：iphone, ios, uiscrollview, scroll, uitextview

我在 iPhone 应用程序中工作，使用 UITextView 在其中显示多个文本，当用户选项卡屏幕时，自动从下到上滚动 UITextView 内容（滚动级别慢）并且它工作正常，我想像 1 一样增加滚动速度， 2,3,4,5,6...10，如何做到这一点？请帮我。

提前致谢

我试过这个：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        ScriptDetails = [[UITextView alloc]initWithFrame:CGRectMake(0,9,480,285)];
        ScriptDetails.text=Script;
        ScriptDetails.textAlignment=UITextAlignmentLeft;
        ScriptDetails.editable=NO;
        ScriptDetails.delegate=self;
        ScriptDetails.font=[UIFont fontWithName:str1 size:f];
        ScriptDetails.backgroundColor=tColor1;
        ScriptDetails.textColor=tColor;
        [self.view addSubview:ScriptDetails];

     UITapGestureRecognizer *singleTap = [[[UITapGestureRecognizer alloc] initWithTarget: self action:@selector(TouchToPlay)] autorelease];
    singleTap.delegate=self;
    singleTap.numberOfTapsRequired = 1; 
    [ScriptDetails addGestureRecognizer:singleTap];
    }

-(void)TouchToPlay
{
    NSLog(@"single");  

  timer = [NSTimer scheduledTimerWithTimeInterval:(35.0/1000.0)
                                                   target:self
                                                 selector:@selector(autoscrollTimerFired:) 
                                                 userInfo:nil 
                                                  repeats:YES];

}

- (void)autoscrollTimerFired:(NSTimer*)timer 
{
    CGPoint scrollPoint = ScriptDetails.contentOffset;
    scrollPoint = CGPointMake(scrollPoint.x, scrollPoint.y + 1);
    [ScriptDetails setContentOffset:scrollPoint animated:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:09:27.343

如果它只是快速滚动，您可以最小化调用计时器函数的时间。对于滚动缓慢，您可以增加时间。

如果您正在寻找其他东西，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:21:41.427

另一种方法是将变量放在`- (void)autoscrollTimerFired:(NSTimer*)timer`方法中，`scrollPoint = CGPointMake(scrollPoint.x, scrollPoint.y + 1);`而不是仅仅`1`放一些 iVar，并提供一些机制`+`来`-`增加和减少速度。

# php - 在 PHP 中将 7 位数字分解为多个变量

> ID：13946132
> 
> 赞同：0
> 
> 时间：2012-12-19T05:36:00.537
> 
> 标签：php

我们有一个“潜在”的 7 位数字，我们需要将其分解为 7 个单独的变量。如果是 4 位数字，则其他 3 位数字应为空。举个例子：

```
$total = 12345 

$var1 = ""
$var2 = ""
$var3 = "1"
$var4 = "2"
$var5 = "3"
$var6 = "4"
$var7 = "5" 
```

有人对最好的方法有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T05:40:56.570

你会需要：

*   [`str_split`](http://php.net/str_split)
*   [`array_pad`](http://php.net/array-pad)

应该很容易弄清楚。但说真的，使用数组而不是`$var1`, `$var2`...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T05:43:34.817

拆分，然后填充：

```
$a = 123456;
$arr = array_pad(str_split($a), -7, ""); 
```

见[输出。](http://ideone.com/w191bG)

如果你绝对需要 7 个变量：

```
$a = 123456;
$arr = array_pad(str_split($a), -7, "");
$i = 1;
foreach($arr as $s)
    ${"var".$i++} = $s; 
```

但我强烈建议使用数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T05:44:39.013

如果`$total`是一个正整数，`$total % 10`会给你最后一个数字。整数除以 10 将删除最后一位。

```
$digits = array();
for ($i = $total; $i > 0; $i = (int)$total/10) {
    array_unshift($digits, $total % 10);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T06:02:21.833

正如他们中的大多数人所说，使用数组和循环是合适的，如果你不想使用数组的话。

试试这个：

```
<?php
 $total=12345;
 $totaldigits=strlen((string)$total);
 while($totaldigits!=0){
   $var=$total%10;
   $total=$total/10;
   $totaldigits--;
   echo 'Digit '.$totaldigits.':'.$var.'<br/>';
 }
 ?> 
```

我无法根据需要将它们放入不同的变量中。为此，您将不得不使用数组。

# 编辑1：

万一你改变主意，

```
$total=12345;
$num_arr=array();
$spaceneeded=7-strlen((string)$total);//the no. of array elements to be kept empty as per the total number of digits
$i=$spaceneeded;
$totaldigits=strlen((string)$total);
while($totaldigits!=0){
  $var=$total%10;
  $total=$total/10;
  $totaldigits--;
  for($j=0;$j<$spaceneeded;$j++){
    $num_arr[$j]=""; 
   }
  $num_arr[$i]=$var;
  $i++;
} 
```

看看这是否有帮助。

# perl - 在 Perl 中将 Pi 舍入到小数点后 100 位？

> ID：13946133
> 
> 赞同：4
> 
> 时间：2012-12-19T05:36:12.400
> 
> 标签：perl, rounding, pi

对于一个科学博览会项目，我正在测试您选择的编程语言如何影响性能。我通过用 Java、Ruby、Perl 和 Python 编写脚本来计算 Pi 到小数点后 1 亿位。我从 Perl 开始，因为我最熟悉 Perl。然而，这带来了一个有趣的问题。我需要在 Perl 中将 Pi 舍入到第 100 位，但据我所知，Perl 对于这种情况没有好的舍入方法。只有这样的东西

```
use Math::Round;
$rounded = nearest(0.1, $numb); 
```

这有点问题，因为我不想坐在电脑前输入 1 亿个零。据我所知， sprintf 和 printf 也好不到哪里去。另外，他们有那令人讨厌的一半。任何人都可以帮忙吗？

PS 我打算使用 Chudnovsky 公式，如果这对任何人都很重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T06:21:16.513

我认为任何编程语言都不能以原生方式完成您的要求。甚至像 Math::BigRat （默认 40 位）和 Math::Bignum 这样的 bignum 库也无法处理 1 亿位。

为了实现它，您必须创建自己的自定义方式来表示如此大的数字以及如何将它们四舍五入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T10:56:50.433

以另一种方式思考问题。您需要四舍五入到 1 亿 (1E8) 位，但您不需要一次性处理所有 1E8 位。

反而，

1.  使用 Chudnovsky 公式计算 1E8 +1 位数。
2.  将数字存储在字符串（如果您有内存）或文件中。
3.  选择最后 n 位（8 位甚至 2 位之类的小数字）。
4.  如果它们不是全部 9 到 n-1 位数。
5.  如果将它们转换为 (n-1) * 0 位。然后从末尾读取接下来的 n 位数字并重复 4 和 5。

但是，如果目标是通过生成 1E8 位 Pi 来测试语言的相对性能，那么为什么还要关注对这个数字进行舍入的相当人为的约束。如果您使用相同的算法，那么任何语言都应该产生相同的结果。无论如何，你有 50% 的机会生成一个四舍五入的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T06:16:39.267

这更近了一步（尽管我还没有测试它是否可以处理 1 亿个零）。您需要使用[bignum](https://metacpan.org/module/bignum)来处理这些数字。

```
use bignum;
use Math::Round;

$rounded = nearest(1e-100_000_001, $numb); 
```

此外，`bignum`具有自己的`pi`功能和精度参数：

```
$rounded = bignum::bpi(100_000_001); 
```

# c# - 插入 Rad Grid 命令不起作用

> ID：13946145
> 
> 赞同：0
> 
> 时间：2012-12-19T05:37:27.243
> 
> 标签：c#, asp.net

我是 asp.net 的新手，我现在正在使用 RadControls for Asp.net Ajax。我尝试按照 Asp.Net GridDemo - Insert/Update/Delete 进行操作，但它似乎对我来说并不是很好，所以我做了一些更改，结果证明做得很好，但插入按钮仍然不起作用更新按钮它在一个非常小的问题上工作正常......

我有 1 个视图 viewFacilitiesMaster 和 2 个表 tblCity 和表 tblBranch

在我的 Radgrid 中，我只想从视图中显示设施、设施 ID、城市、城市 ID、分支、分支 ID。

我使用 Web 用户控件作为 EditFormType。在我的编辑表单中：AddFacility.ascx。唯一可编辑的区域是设施（radTextbox）、城市（下拉列表）和分支（下拉列表）

（注意 ddlCity 显示酒店城市列表， ddlBranch 显示酒店城市相关分店）

我的问题是当我点击插入按钮时它不起作用.. -_-，

这是我的代码

**frmFacilityMaster.aspx**

```
<telerik:RadGrid ID="gvS" runat="server" DataSourceID="tblFacilities" 
GridLines="None"   AllowPaging="True" AllowSorting="True" 
Width="99%" AutoGenerateColumns="False"
ShowStatusBar="True" OnPreRender="RadGrid1_PreRender" 
OnNeedDataSource="RadGrid1_NeedDataSource" 
OnUpdateCommand="RadGrid1_UpdateCommand" 
OnInsertCommand="RadGrid1_InsertCommand" 
OnDeleteCommand="RadGrid1_DeleteCommand" Skin="Black" 
ShowGroupPanel="True" onitemcommand="gvS_ItemCommand">     
<HeaderContextMenu EnableTheming="True">
<CollapseAnimation Type="OutQuint" Duration="200"></CollapseAnimation>
</HeaderContextMenu>
<AlternatingItemStyle BackColor="#E1DED2" />
<MasterTableView autogeneratecolumns="False" datasourceid="tblFacilities"
EditMode="PopUp" commanditemdisplay="Top" >
<RowIndicatorColumn>
<HeaderStyle Width="20px"></HeaderStyle>
</RowIndicatorColumn>
<ExpandCollapseColumn>
<HeaderStyle Width="20px"></HeaderStyle>
</ExpandCollapseColumn>
<GroupByExpressions>
<telerik:GridGroupByExpression>
<SelectFields>
<telerik:GridGroupByField FieldAlias="City" FieldName="City" HeaderText="Hotel  
City"></telerik:GridGroupByField>
</SelectFields>
<GroupByFields>
<telerik:GridGroupByField FieldName="City"></telerik:GridGroupByField>
</GroupByFields>
</telerik:GridGroupByExpression>
<telerik:GridGroupByExpression>
<SelectFields>
<telerik:GridGroupByField FieldAlias="Branch" FieldName="Branch" HeaderText="Hotel  
Branch"></telerik:GridGroupByField>
</SelectFields>
<GroupByFields>
<telerik:GridGroupByField FieldName="Branch"></telerik:GridGroupByField>
</GroupByFields>
</telerik:GridGroupByExpression>
</GroupByExpressions>
<Columns>
<telerik:GridBoundColumn DataField="Name" HeaderText="Name" 
SortExpression="Name" UniqueName="Name">
</telerik:GridBoundColumn>
<telerik:GridBoundColumn DataField="NameAr" HeaderText="Name (Ar)" 
SortExpression="NameAr" UniqueName="NameAr">
</telerik:GridBoundColumn>
<telerik:GridBoundColumn DataField="Description" HeaderText="Description" 
SortExpression="Description" UniqueName="Description">
</telerik:GridBoundColumn>
<telerik:GridBoundColumn DataField="Amount" DataType="System.Decimal" 
HeaderText="Amount" SortExpression="Amount" UniqueName="Amount">
</telerik:GridBoundColumn>
<telerik:GridBoundColumn DataField="cityID" HeaderText="City ID" 
SortExpression="cityID" UniqueName="cityID" Visible="true">
</telerik:GridBoundColumn>
<telerik:GridBoundColumn DataField="branchID" HeaderText="Branch ID" 
SortExpression="branchID" UniqueName="branchID" Visible="true">
</telerik:GridBoundColumn>
<telerik:GridBoundColumn DataField="facilitiesID" DataType="System.Decimal" 
HeaderText="facilitiesID" ReadOnly="True" SortExpression="facilitiesID" 
UniqueName="facilitiesID" Visible="False">
</telerik:GridBoundColumn>
<telerik:GridEditCommandColumn UniqueName="EditCommandColumn">
<ItemStyle Font-Italic="True" Font-Underline="True" ForeColor="#CC3300" />
</telerik:GridEditCommandColumn>
<telerik:GridButtonColumn CommandName="find" HeaderText="" 
Text="Delete" UniqueName="column">
<ItemStyle Font-Bold="False" Font-Italic="True" Font-Underline="True" 
ForeColor="#CC3300" />
</telerik:GridButtonColumn>   
<telerik:GridBoundColumn DataField="DescriptionAr" HeaderText="DescriptionAr" 
SortExpression="DescriptionAr" UniqueName="DescriptionAr" Visible="False">
</telerik:GridBoundColumn>
<telerik:GridBoundColumn DataField="createdDate" HeaderText="Created Date" 
SortExpression="createdDate" UniqueName="createdDate" DataFormatString="{0:MM/dd/yyyy}">
</telerik:GridBoundColumn>
<telerik:GridBoundColumn DataField="updatedDate" HeaderText="Updated Date" 
SortExpression="updatedDate" UniqueName="updatedDate" DataFormatString="{0:MM/dd/yyyy}">
</telerik:GridBoundColumn>
</Columns>
<EditFormSettings UserControlName="addFacilityForm.ascx" EditFormType="WebUserControl"  
CaptionFormatString=" Add Facility Form" FormStyle-Font-Bold=true >
<FormStyle Font-Bold="True"></FormStyle>
<PopUpSettings Width="70%" />
<EditColumn UniqueName="EditCommandColumn1">
</EditColumn>
</EditFormSettings>
</MasterTableView>              
<ClientSettings AllowDragToGroup="True">
</ClientSettings>            
<FilterMenu EnableTheming="True">
<CollapseAnimation Type="OutQuint" Duration="200"></CollapseAnimation>
</FilterMenu>
</telerik:RadGrid> 
```

**AddFacility.ascx**

```
<table>
<tr>
    <td width="25%">
        <asp:Label ID="Label2" runat="server" Text=" Hotel City"></asp:Label>
    </td>
    <td width="75%">   
        <asp:DropDownList ID="ddlCity" runat="server" DataSourceID="tblCity" 
            DataTextField="city" DataValueField="cityID" AutoPostBack="true" 
            SelectedValue='<%#DataBinder.Eval( Container, "DataItem.cityID") %>' 
            onselectedindexchanged="ddlCity_SelectedIndexChanged" AppendDataBoundItems="true" >
            <asp:ListItem Text="Select" Value=""></asp:ListItem>
        </asp:DropDownList>
        <asp:SqlDataSource ID="tblCity" runat="server" ConnectionString="<% $ ConnectionStrings:SmartBookingEngineConn %>" SelectCommand="select cityID,city from viewCityAdmin"></asp:SqlDataSource>
    </td>
</tr>
<tr>
    <td width="25%">
        <asp:Label ID="Label3" runat="server" Text=" Hotel Branch"></asp:Label>
    </td>
    <td width="75%">
       <asp:DropDownList ID="ddlBranch" runat="server" DataSourceID="tblBranch"
            DataTextField="Branch" DataValueField="BranchID" SelectedValue='<%#DataBinder.Eval( Container, "DataItem.BranchID") %>'>

        </asp:DropDownList>

        <asp:SqlDataSource ID="tblBranch" runat="server" ConnectionString="<%$ ConnectionStrings:SmartBookingEngineConn %>" SelectCommand="SELECT [BranchID],[Branch] FROM [tblBranch] WHERE ([CityID]=@cityID)">
           <SelectParameters>
            <asp:ControlParameter Name="cityID" ControlID="ddlCity" PropertyName="SelectedValue" Type="String" />
           </SelectParameters>
        </asp:SqlDataSource> 
    </td>
</tr>

<tr>
    <td width="25%">
        <asp:Label ID="Label1" runat="server" Text=" Facility"></asp:Label>
    </td>
    <td width="75%">
        <telerik:RadTextBox ID="txtFacility" Runat="server" 
            Text='<%# DataBinder.Eval( Container, "DataItem.Name"  ) %>' 
            Width="250px">
        </telerik:RadTextBox>
        </td>
</tr>
</table> 
```

**AddFacility.ascx.cs**

```
public partial class addFacilityForm : System.Web.UI.UserControl
{
    private object _dataItem = null;
    public object DataItem
    {
        get
        {
            return this._dataItem;
        }
        set
        {
            this._dataItem = value;
        }
    }
    protected void Page_Load(object sender, EventArgs e)
    {}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:42:32.627

尝试这个

将 Telerik 网格的属性**AllowAutomaticUpdates 或 AllowAutomaticDeletes 或 AllowAutomaticInserts 设置为 true** ...

# java - 如何从链接到字符串读取/解析文章内容

> ID：13946146
> 
> 赞同：4
> 
> 时间：2012-12-19T05:37:36.777
> 
> 标签：java, android

我需要帮助。如何使用 java 或 android 在文章网站上获取内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:02:40.817

你可以试试[http://jsoup.org/](http://jsoup.org/)

使用它从链接中获取页面并解析内容。

嗯，这是一个样本，

```
String url = "http://inet.detik.com/read/2012/12/12/105558/2116258/796/produktif-kerja-mobile-dengan-samsung-ativ-smart-pc-yang-revolusioner";
Document doc = Jsoup.connect(url).timeout(20000).get();
Elements elements = doc.select("div[class=text_detail]");
if (elements.size() > 0) {
    System.out.println(elements.text());
} 
```

上面的代码只是打印出整个文本。如果你想得到一个漂亮的打印版本，你需要自己处理一些html标签（如br）。使用 jsoup 可以轻松访问 html 标签，所以只需花一些时间在文档上，自己编写代码即可。

# windows - 避免从嵌入式 Web 浏览器拖放

> ID：13946148
> 
> 赞同：0
> 
> 时间：2012-12-19T05:37:42.247
> 
> 标签：windows, winapi, mfc

我编写了一个 Win32 示例，在此示例中我添加了 Web 浏览器控件。它工作正常。

我使用包含一些图像的网页启动应用程序。在这里，我可以将图像拖到桌面上。

其中一项要求是应用程序不应允许拖放功能。

请让我知道如何禁用此功能。

# c++ - C++ 程序的双输入验证问题

> ID：13946150
> 
> 赞同：2
> 
> 时间：2012-12-19T05:37:52.637
> 
> 标签：c++, if-statement, do-while

所以我试图：

1.  在 do while 循环中进行双重输入验证
2.  检查是否已经进行了移动以及它是否是逻辑输入。(#1-9)

我最初认为 if else 语句，但我不确定如何使用 else 语句回到循环的开头。

```
do
{
  cout << "Interesting move, What is your next choice?: ";
  cin >> play;
  Pused[1] = play;
  if(play != Pused[0] && play != cantuse[0] && play != cantuse[1] )
  {
    switch(play)
    {
      default:cout << "Your choice is incorrect\n\n";
      break;
    }   
  }
  else
  { }
}    
while(play != 1 && play != 2 && play != 3 && play != 4 && play != 5 && play != 6 && play != 7 && play != 8 && play != 9);
Dis_board(board); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:48:33.150

使用“继续”关键字返回到循环的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:05:52.937

只需删除`else`. 我认为这不是必需的。如果满足条件，您的循环将自动继续`while`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T23:16:11.033

您的问题有点难以理解，但是在此循环中您需要解决一些条件：

1.  询问用户输入
2.  检查用户输入是否有效（1-9之间且之前未使用过）
3.  如果我们有一个有效的选择，则退出循环

所以我们需要记录已经完成的动作并检查用户的输入是否在有效的选择范围内，我们可以使用一个只有在选择了有效的选择时才退出的循环。

```
int choice;
bool used[9] = { false }; // Set all values to false
std::cout << "Interesting move, what is your next choice?: ";
do {
    std::cin >> choice;
    // Here we check if the choice is within the range we care about
    // and not used, note if the first condition isn't true then
    // the second condition won't be evaluated, so if choice is 11
    // we won't check used[10] because the && will short circuit, this
    // lets us avoid array out of bounds. We also need to
    // offset the choice by 1 for the array because arrays in C++
    // are indexed from 0 so used runs from used[0] to used[8]
    if((choice >= 1 && choice <= 9) && !used[choice - 1]) {
        // If we're here we have a valid choice, mark it as used
        // and leave the loop
        used[choice - 1] = true;
        break; // Exit the loop regardless of the while condition
    }

    // If we've made it here it means the above if failed and we have
    // an invalid choice. Restart the loop!
    std::cout << "\nInvalid choice! Input: ";
} while (true); 
```

# connection - Rabbitmq 服务器连接突然关闭

> ID：13946153
> 
> 赞同：20
> 
> 时间：2012-12-19T05:38:09.393
> 
> 标签：connection, rabbitmq

由于某种原因，我尝试使用 Rabbitmq 服务器，即使我传递了正确的用户名和密码，连接也会突然关闭。

Rabbitmq 服务器在端口 5672 上运行，并且在端口 5672 上远程登录到我的服务器说它运行良好。

我在 CentOS 中安装了 rabbitmq 服务器，我的 rabbitmq 服务器日志如下：

```
=INFO REPORT==== 19-Dec-2012::06:25:44 ===
accepted TCP connection on [::]:5672 from <host>:42048

=INFO REPORT==== 19-Dec-2012::06:25:44 ===
starting TCP connection <0.357.0> from <host>:42048

=WARNING REPORT==== 19-Dec-2012::06:25:44 ===
exception on TCP connection <0.357.0> from <host>:42048
connection_closed_abruptly

=INFO REPORT==== 19-Dec-2012::06:25:44 ===
closing TCP connection <0.357.0> from <host>:42048 
```

发生这种情况的可能原因是什么。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-28T14:35:17.883

`connection_closed_abruptly`意味着客户端关闭了 TCP 连接，而没有经过正确的 AMQP 连接终止过程。

你的兔子服务器在负载均衡器后面吗？连接一启动就突然关闭的一个常见原因是 TCP 负载平衡器的心跳。如果是这种情况，您应该定期看到这些消息，并且普遍接受的做法似乎是忽略它们。为避免日志文件堆积，您还可以考虑将日志级别提高到“错误”。

另一方面，如果您的客户端直接连接到 rabbitmq 服务器，这可能意味着您的客户端没有以 AMQP 认可的方式关闭连接。您可以尝试不同的客户端来确认是否是这种情况。

顺便说一句，远程登录到您的服务器也可能导致突然关闭。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T03:46:19.450

1.  检查您的连接限制

2.  你的连接时间短，一般是你的客户端使用不当造成的

# java - 转换子字符串部分时出现数字格式异常

> ID：13946156
> 
> 赞同：-1
> 
> 时间：2012-12-19T05:38:23.160
> 
> 标签：java

我正在尝试创建一个自动增量功能，每次用户创建表时`Departmenent_id(varchar)`都会增加并且我给 A1，A2 的 id ......所以我在我的 autoincrement() 中使用列表，结果得到从`select Dept_id from Department` 并尝试将整数部分从中分离并添加到`TreeSet`集合中并取出最大元素并添加到字符串的第一部分但是当我取出字符串的子字符串`9`并将其解析为整数时我面临的问题`number format exception`。为什么我会遇到这个问题我的功能代码就在这里

```
 private String autoIncreament() {
    String id = null;
    String num = null;
    String result = "SELECT DEPARTMENT_ID FROM  Department";
    TreeSet<Integer> treeSet = new TreeSet<Integer>();
    List<Map<String, Object>> result1 = getJdbcTemplate().queryForList(
            result);
    for (Map<String, Object> map : result1) {
        id = (String) map.get("DEPARTMENT_ID");
        System.out.println("id=" + id);
        num = id.substring(1);
        int number = Integer.parseInt(num);
        treeSet.add(number);

    }

    Integer in = treeSet.pollLast();
             int c=in.intValue();
               c++;
    id = id +c ;
    /* System.out.println("jcak="+rowSet.getRow()); */
    return id;
} 
```

我的异常详情

```
 19 Dec, 2012 11:25:14 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@5d764be1: startup date [Wed Dec 19 11:25:14 IST 2012]; root of context hierarchy
19 Dec, 2012 11:25:14 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [mybeans.xml]
19 Dec, 2012 11:25:14 AM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7b5a6029: defining beans [dataSource,employeeDaoImpl,departmentdao]; root of factory hierarchy
19 Dec, 2012 11:25:14 AM org.springframework.jdbc.datasource.DriverManagerDataSource setDriverClassName
INFO: Loaded JDBC driver: com.mysql.jdbc.Driver
ankur=com.nousinfo.tutorial.employee.model.Department@7eb1cc87
id=9
Exception in thread "main" java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at com.nousinfo.tutorial.employee.dao.impl.DepartmentDAOImpl.autoIncreament(DepartmentDAOImpl.java:113)
    at com.nousinfo.tutorial.employee.dao.impl.DepartmentDAOImpl.getDepartment(DepartmentDAOImpl.java:47)
    at AccessClass.main(AccessClass.java:34) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:51:23.223

这可能是导致 NumberFormatException 的行。

```
int number = Integer.parseInt(num); 
```

查看问题的最简单方法是`num`在此行之前打印，它可能不是数字。

编辑（修改问题后） - 空字符串（“”）不能转换为整数。

附带说明一下，您可以为任何严重的用例/应用程序标识生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:52:11.737

如果您使用的是普通的 jdbc，java 已经提供了读取密钥的支持。

```
connection = getConnection();
String sql = "insert into table1 (col1,Rcol2) values (?, ?)";
ps = connection.prepareStatement(sql, new String[] {"colKEY"});
ps.setString(1, col1Val);
ps.setString(2, col2Val);
ps.executeUpdate();     

rs = ps.getGeneratedKeys();
if (rs.next()){
    colKey = new Integer(rs.getInt(1));
}
connection.commit(); 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T05:54:07.030

例外说明了一切：

> 线程“main”中的异常 java.lang.NumberFormatException：对于输入字符串：“”

您正在尝试将空字符串解析为 int

如果您的输入字符串 9 并且您从索引 1 中获取子字符串，那么您将得到空字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T05:57:46.557

```
 num = id.substring(1);

it shows start index from 1\. If your value is "7" then it will get "". 
```

随它改变

```
 num = id.substring(0);         

 try{
       int number = Integer.parseInt(num);

 } catch (NumberFormatException ex) {
   ex.printStackTrace();
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T06:09:07.267

问题是您没有提交带有前缀的序列号。只需以下逻辑即可帮助您

1.  `Department`获取表中的行数`"select count(*) from department"`
2.  然后`return "A"+(numberOfRows+1) ;`

# node.js - 创建一个新的集合抛出错误

> ID：13946157
> 
> 赞同：2
> 
> 时间：2012-12-19T05:38:24.547
> 
> 标签：node.js, mongoose

以下是使用 mongoose 创建新集合时出现的错误。

```
 D:\Workspace\node-2012-20\node\node_modules\mongoose\lib\index.js:191
      throw new Error('Schema hasn\'t been registered for model "' + name + '"
            ^
Error: Schema hasn't been registered for model "testDocAccessModel".
Use mongoose.model(name, schema)
    at Mongoose.model (D:\Workspace\node-2012-20\node\node_modules\mongoose\lib\index.js:191)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32) 
```

下面是代码

```
 var mongoose = require('mongoose');
    var Schema = mongoose.Schema;

    exports.TestDocumentAccessSchema = new Schema({
      Id: { type: Schema.ObjectId },
      parentId: { type: Schema.ObjectId },
      userId: { type : String },
      userName: { type : String },
    });

    var testDocAccessModel = mongoose.model('TestDocumentAccess', exports.TestDocumentAccessSchema); 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:49:50.840

只需像这样更改您的代码，让我知道它是否有帮助

```
 var mongoose = require('mongoose');
    var Schema = mongoose.Schema;

    var TestDocumentAccessSchema = new Schema({
      Id: { type: Schema.ObjectId },
      parentId: { type: Schema.ObjectId },
      userId: { type : String },
      userName: { type : String },
    });

    var testDocAccessModel = mongoose.model('TestDocumentAccess',TestDocumentAccessSchema); 
    exports.TestDocumentAccessSchema = TestDocumentAccessSchema; 
```

# java - 如何将 bytearray 转换为 img 标签？

> ID：13946158
> 
> 赞同：2
> 
> 时间：2012-12-19T05:38:24.733
> 
> 标签：java, jquery, html, ajax, jsp

我有一个返回 png 图像字节数组的服务，我想在我的 jsp 页面上呈现它。我正在进行ajax调用以获取图像。

```
$.ajax({
            type: "GET",
            cache: false,
            async: false,
            url: '<spring:url value="/service/org/flk/2"/>',
            success: function(msg) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:43:00.397

您将需要流式传输 base64 编码数据作为响应，然后您可以这样做

```
$("#someDivId").html('<img src="data:image/png;base64,'+response + '"/>'); 
```

`response`base64编码的图像数据在哪里

# filemaker - FileMaker 计算将 DMS latlong 转换为十进制格式

> ID：13946159
> 
> 赞同：1
> 
> 时间：2012-12-19T05:38:25.453
> 
> 标签：filemaker

我需要一个 FileMaker“计算”脚本来将 DMS latlong（例如：）转换`37°55'43.6"S, 145°11'26.1"E`为十进制格式（例如：） `-37.928778,145.190583`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:16:50.007

这是一种有趣的方法：将其转换为 FileMaker 计算并调用`Evaluate()`它。

```
Evaluate( 
  "Round(  (" &
  Substitute ( 
    dms ; 
    [" ";""] ; 
    ["°";" + "] ; 
    ["'";"/60 + "] ; 
    ["\"";"/3600"] ; 
    ["S";") *-1"] ; 
    ["W";") *-1"] ; 
    ["N";")"] ; 
    ["E";")"] ; 
    [","; " ; 6 ) & \",\" & Round( ("]
  ) & 
  " ; 6 )"
) 
```

以上将把输入变成一个像这样的计算：

```
Round( (37 + 55/60 + 43.6/3600) *-1 ; 6 ) & "," & Round( (145 + 11/60 + 26.1/3600) ; 6 ) 
```

然后将其传递给`Evaluate`，这给了你`-37.928778,145.190583`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:38:25.453

这是使用[`split()`David Snyder 的自定义函数的](http://www.briandunning.com/cf/45)一个：

```
If ( IsEmpty(DMSLatlong);"";

    "-" & 

    Truncate(
        (
        Trim(split(
            Trim(split( DMSLatlong; 1; "," ))
        ; 1; "°" ))
        ) +

        (
        (
        Trim(split(
            Trim(split(
                Trim(split( DMSLatlong; 1; "," ))
            ; 1; "'" ))
        ; 2; "°" ))
        ) / 60
        ) +

        (
        (
        Trim(split(
            Trim(split(
                Trim(split( DMSLatlong; 1; "," ))
            ; 2; "'" ))
        ; 1; "\"" ))
        ) / 3600
        )
    ;7)

    & "," & 

    Truncate(
        (
        Trim(split(
            Trim(split( DMSLatlong; 2; "," ))
        ; 1; "°" ))
        ) +

        (
        (
        Trim(split(
            Trim(split(
                Trim(split( DMSLatlong; 2; "," ))
            ; 1; "'" ))
        ; 2; "°" ))
        ) / 60
        ) +

        (
        (
        Trim(split(
            Trim(split(
                Trim(split( DMSLatlong; 2; "," ))
            ; 2; "'" ))
        ; 1; "\"" ))
        ) / 3600
        )
    ;7)

) 
```

注意：此脚本不是防弹的，如果 DMS​​ 值为 S 或 W，您可能需要调整它以`-`在前面放置一个符号（正如我在上面所做的那样）。参考：[维基百科：从十进制度到 DMS 的转换](http://en.wikipedia.org/wiki/Geographic_coordinate_conversion#Conversion_from_Decimal_Degree_to_DMS)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-22T10:39:30.540

它可以像 =

```
Let ( [
v = Substitute ( DMS ; [ "°" ; ¶ ] ; [ "'" ; ¶ ] ; [ "\"" ; ¶ ] ) ;
t = Time ( GetValue ( v ; 1 ) ; GetValue ( v ; 2 ) ; GetValue ( v ; 3 ) ) ; 
h = GetValue ( v ; 4 ) 
] ;
If ( h = "S" or h = "W" ; -t ; t ) / 3600
) 
```

# php - php更新查看次数

> ID：13946163
> 
> 赞同：0
> 
> 时间：2012-12-19T05:38:33.627
> 
> 标签：php, sql

我对 PHP 有点陌生，还没有机会让更新功能正常工作。

这是我正在使用的代码：

```
include('config.php');

$user_info = fetch_user_info($_GET['AccountNumber']);

$update= 'UPDATE `content` SET `ViewCount ` = `ViewCount ` + 1 WHERE `AccountNumber` = : AccountNumber LIMIT 1';

$statement = $db->prepare($update);
$statement->bindParam(':AccountNumber', $_POST['AccountNumber'], PDO::PARAM_STR);
$statement->execute(); 
```

所以基本上它连接到我的数据库，根据 url 中的帐号找到用户，然后它应该提取该帐户已经拥有的视图并添加一个，但它是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:47:13.500

```
include('config.php');

$user_info = fetch_user_info($_GET['AccountNumber']);

$update= 'UPDATE `content` SET `ViewCount ` = `ViewCount ` + 1 WHERE `AccountNumber` = :     AccountNumber LIMIT 1';

$statement = $db->prepare($update);
$statement->bindParam(':AccountNumber', $user_info, PDO::PARAM_STR);
$statement->execute(); 
```

或者

```
$statement->bindParam(':AccountNumber',$_GET['AccountNumber'], PDO::PARAM_STR); 
```

而不是上面示例中的最后一行。

因为我不知道 $user_info 是什么——数字、字符串、数组等。这些是几种可能性。

您在代码片段的 bindParam(... 行中有一个 $_POST['AccountNumber'] 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T05:45:17.017

```
session_start(); 
if(!empty($_SESSION['view'])){
    $update= 'UPDATE `TABLENAME` SET `ViewCount ` = `ViewCount ` + 1 WHERE      
       `AccountNumber` = : AccountNumber LIMIT 1';
    $_SESSION['view'] = "updated";
} 
```

# java - 创建具有大主体的 AXIOM SOAP 消息

> ID：13946165
> 
> 赞同：0
> 
> 时间：2012-12-19T05:38:38.130
> 
> 标签：java, axis2, axiom

我正在尝试使用大型 XML 正文创建 SOAP 消息。XML 正文来自输入流，而 SOAP 消息是手动创建的。如何使用 AXIOM 创建消息而不将整个 XML 正文加载到内存中。我开始的代码是：

```
// "in" contains SOAP body
final OMXMLParserWrapper payloadBuilder = OMXMLBuilderFactory.createOMBuilder( in );
final OMElement payloadElement = payloadBuilder.getDocumentElement();

final SOAPEnvelope soapEnvelope = msgContext.getEnvelope();
soapEnvelope.getBody().addChild( payloadElement ); 
```

但是，这会将整个 XML 正文加载到内存中（`payloadElement.detach()`被称为 的一部分`addChild()`）。

像这样合并 AXIOM 模型的推荐方法是什么？

我已经修改了我的代码如下，以使这项工作无需加载整个 XML 正文。但是我对解决方案不满意，因为它使用实现类而不是公共 API。

```
final OMXMLParserWrapper payloadBuilder = OMXMLBuilderFactory.createOMBuilder( in );
final OMNodeEx payloadElement = (OMNodeEx)payloadBuilder.getDocumentElement();
payloadElement.setParent( null );

final SOAPEnvelope soapEnvelope = msgContext.getEnvelope();
final OMElementImpl soapBody = (OMElementImpl)soapEnvelope.getBody();
soapBody.addChild( payloadElement, true ); 
```

有没有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:55:17.153

Axiom 的最新版本具有该`getDocumentElement`方法的变体，可让您完全按照您的要求进行操作：

[http://ws.apache.org/axiom/apidocs/org/apache/axiom/om/OMXMLParserWrapper.html#getDocumentElement(boolean](http://ws.apache.org/axiom/apidocs/org/apache/axiom/om/OMXMLParserWrapper.html#getDocumentElement(boolean) )

# uitabbarcontroller - 将 MWPhotoBrowser 合并到标签栏视图控制器中

> ID：13946170
> 
> 赞同：1
> 
> 时间：2012-12-19T05:39:26.903
> 
> 标签：uitabbarcontroller

我有一个带有四个标签栏视图控制器的现有应用程序。我正在尝试在其中一个控制器中查看 MWPhotoBrowser。我已将 MWPhotoBrowser 添加为子项目，但尽管我进行了所有搜索，但无法弄清楚如何将其合并到我的项目中。任何帮助将不胜感激。

# java - 随机数是如何使用pagemap生成的

> ID：13946173
> 
> 赞同：2
> 
> 时间：2012-12-19T05:39:34.363
> 
> 标签：java, wicket

谁能解释一下页面映射是如何工作的，它是如何在检票口中动态生成页码和版本的，需要什么来跟踪页面的历史记录以及它的阈值是多少？关于页面映射如何工作的事情当我尝试使用实时示例进行复制时，他们在大多数论坛中给出的内容都会发生变化。所以，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:58:37.507

看一看： [Apache Wicket - 页面地图](https://cwiki.apache.org/WICKET/page-maps.html)

# c# - 在 C#.net 中，我如何将发送到打印的文件内容获取到普通办公室打印机

> ID：13946174
> 
> 赞同：3
> 
> 时间：2012-12-19T05:39:35.243
> 
> 标签：c#, .net, vb.net

发送一个文件进行打印，**我想将该文件的内容存储在记事本文件中**。意味着我要维护一个打印记录，即打印机在单独的记事本或任何 Word 文档中打印**该文件的哪个文件和内容。**

**文件只包含文本数据**。不是图片

我是怎么做到的。在 C#.Net 中执行此操作的任何建议。请分享一些代码，以便我理解。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:00:31.640

您可以使用 FindFirstPrinterChangeNotification 监控打印作业，这将帮助您获取有关向打印机触发的作业的信息，例如作业名称、状态、打印的页面等。您可以参考[Monitor Printer Queue](http://www.codeproject.com/Articles/51085/Monitor-jobs-in-a-printer-queue-NET)

和[后台打印程序监视器](http://blogs.msdn.com/b/martijnh/archive/2009/08/05/printmonitor-a-c-print-spooler-monitor.aspx?wa=wsignin1.0)

但是，您不能（轻松地）将作业内容保存在文件中，因为打印作业已由打印机驱动程序处理，并且已准备好后台处理程序，并且将采用原始 PCL/PJL/其他格式。

“捕获”内容的唯一方法是编写自己的打印监视器

# iphone - 在启动前添加屏幕

> ID：13946177
> 
> 赞同：5
> 
> 时间：2012-12-19T05:40:02.920
> 
> 标签：iphone, ios, xcode, macos

我可以在滚动视图上添加一些图像（3）以将它们作为页面控制器翻转并将它们包含在启动画面中，以便它们仅在有人安装应用程序或安装较新版本时出现......是他们这样做的一种方式以编程方式而不是添加 xib .. 任何帮助 ... 编码将不胜感激 .. 在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T05:44:29.720

您不能将它们与默认启动图像一起显示。您只能在那里显示静态图像。但是当用户第一次使用该应用程序时，您可以在应用程序启动后显示此特定视图，然后从第二次开始您可以禁用它。一旦你向用户展示了这个视图，你就可以为此设置一个属性，`NSUserDefaults`这样从第二次开始，用户就不会再看到它了。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *string = [defaults objectForKey:@"didShowCustomView"];

if ([string isEqualToString:@"YES"]) {
  //show the custom view

  //once it is shown, set the value in user defaults
  [defaults setObject:@"YES" forKey:@"didShowCustomView"]; 
  [defaults synchronize];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T04:27:27.710

这个对我有用，因为 NSUserDefault 确实成功[了](http://www.youtube.com/watch?v=MzUPldHsodI)..

但是我不得不把循环放在相反的位置，以便在我的第一个视图控制器中解决它，我确实喜欢这样......

```
- (void)viewDidLoad  {

 NSString *type = [[NSUserDefaults standardUserDefaults] objectForKey:@"myText1"];

if([type isEqualToString:@"Kill"]) {

 // put the method of view like images,buttons or anything you have in your method
 // for loading on to the first view that you want to run after splash

}

if(!type) {
    type = @"Kill";
    [[NSUserDefaults standardUserDefaults] setObject:type forKey:@"myText1"];

    // put the code for your splash image here .. 

         }

 } 
```

所以现在启动画面只会在应用程序作为新副本安装后运行..这个帮助了我......如果任何人寻找相同的东西可以尝试我上面的代码..谢谢

# android - myFile.exists() 在 Android 中无法正常工作

> ID：13946179
> 
> 赞同：3
> 
> 时间：2012-12-19T05:40:12.700
> 
> 标签：android, file, file-io, android-contentprovider

我有一段代码应该检查 mp3 文件是否存储在 MediaStore.Audio.Media 内容提供商的 SD 卡中

问题是，无论情况如何。SD卡上是否存在路径名存储在变量“audioFilename”中的文件。它总是返回“此文件不存在”作为结果。尽管变量audioFilename 中存储了String 路径名“/mnt/sdCard/Music/Jungle.mp3”，而这个MP3 文件实际上是在SD 卡上。通过 Toast 消息和检查 SD 卡内容很容易证明。

我可能在使用 File 或 Environment 类时出错。任何人都可以在此处显示的代码中看到问题吗？

```
 // toast message to prove that the audioFilename is not null,
 // message displayed is the string, "File name: /mnt/sdCard/Music/Jungle.mp3"

 Toast.makeText(Editor.this, "File name: " + audioFilename,
 Toast.LENGTH_LONG).show();

 // the code below always returns "this file does not exist"

 File extStore = Environment.getExternalStorageDirectory();
 File myFile = new File(extStore.getAbsolutePath() + "audioFilename");

 if(myFile.exists()){

 Toast.makeText(Editor.this, "<<<< this file exists, it is: "+audioFilename+" >>>>",
 Toast.LENGTH_LONG).show();

 } else if(!myFile.exists()){

 Toast.makeText(Editor.this, "<<<< this file does not exist >>>> ",
 Toast.LENGTH_LONG).show();
 }

 Toast.makeText(Editor.this, "audio file name is: "+ audioFilename,
 Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T05:52:55.637

你确定有 import java.io.File 吗？

尝试：

```
String pathsd = Environment.getExternalStorageDirectory()+"/";
// so var pathsd will return "/mnt/sdcard/"
// then you must sure var audioFilename is Music/Jungle.mp3
File myFile = new File(pathsd + audioFilename); 
```

或者你确定你的路？如果您不确定可以尝试提供直接字符串路径。

```
File myFile = new File("/mnt/sdCard/Music/Jungle.mp3"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T05:53:15.107

**尝试更改此行**

```
File myFile = new File(extStore.getAbsolutePath() + "audioFilename"); 
```

**和**

```
File myFile = new File(audioFilename); 
```

我已经用相同的代码运行了测试，它运行良好。

**这是我测试的代码：**

```
String audioFilename =  "/sdcard/NewFolder/test1.jpg";

Toast.makeText(SimpleTest.this, "File name: " + audioFilename,
Toast.LENGTH_LONG).show();

// the code below always returns "this file does not exist"

File extStore = Environment.getExternalStorageDirectory();
File myFile = new File(audioFilename);

if(myFile.exists()){

    Toast.makeText(SimpleTest.this, "<<<< this file exists, it is: "+audioFilename+" >>>>",
    Toast.LENGTH_LONG).show();

} else if(!myFile.exists()){

    Toast.makeText(SimpleTest.this, "<<<< this file does not exist >>>> ",
    Toast.LENGTH_LONG).show();
}

Toast.makeText(SimpleTest.this, "audio file name is: "+ audioFilename,
Toast.LENGTH_LONG).show(); 
```

希望它可以帮助你。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T05:47:06.177

您需要在 AndroidManifeast 文件中添加权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

**编辑 ：**

```
File extStore = Environment.getExternalStorageDirectory();
File myFile = new File(extStore+ "/Music/Jungle.mp3"); <---- try this 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T05:47:50.063

我只是冒险猜测并假设您正在使用物理设备来测试您的应用程序。如果这是真的，您的外部存储可能没有安装（因为您在计算机上使用 USB 存储），因此根据系统该文件确实不存在。尝试在没有插入 USB 线的情况下测试您的代码。

**编辑：** 删除“audioFilename”周围的引号。

```
File myFile = new File(extStore.getAbsolutePath() + "audioFilename"); 
```

到

```
File myFile = new File(extStore.getAbsolutePath() + audioFilename); 
```

# ios - 在完全相同的条件下，ipad 应用程序在调试模式下与 ipad 和发布模式 (adhoc) 的不同行为。

> ID：13946181
> 
> 赞同：2
> 
> 时间：2012-12-19T05:40:30.330
> 
> 标签：ios

我被这个奇怪的问题困住了。我有一种方法可以清除相关`UIObjects`值，该方法在模拟器和**调试模式下使用 ipad**运行良好，但在归档和下载相同的应用程序（即席发布）后，该方法显示不同的行为。因为它在调试模式我在每个方法条件下都使用警报进行了跟踪，它显示了不同的行为。

//方法

```
-(void)NAclicked:(UIViewController *)controller ofId:(id)sender
{
  UIView *newCheck = (UIView * )sender;
  int i=newCheck.tag;

  NSLog(@"id %d",i);
  bool fromGroup4 = [controller isKindOfClass:[G4S16_FunctionalStatusEvaluation class]];
  if([newCheck isKindOfClass:[CheckBoxNE class]] || ([controller isKindOfClass:[G4S16_FunctionalStatusEvaluation class]] && [sender isKindOfClass:[CheckBoxNASN     class]]))
  {
    bool condition = false;
    if(fromGroup4)
    {
       CheckBoxNASN* cb = (CheckBoxNASN*)sender;
       condition = ([cb.Value isEqualToString:@"NA"]);  
    }
    else
    {
        CheckBoxNE* cb = (CheckBoxNE*)sender;
        if([[cb Value] intValue]==1)
        {
            NSLog(@"%d",([[cb Value] intValue]==1));
            condition = true;
        }
    }
    if(condition)
    {
        NSManagedObject *question =[self getQuestionObjectFromQuestionElementId:((UIButton *)sender).tag];
        int questionId = [[question valueForKey:@"id"]intValue];
        NSArray *arrQuestionElements= [self getQuestionElementsFromQuestion:questionId];
        for(int j=0;j<[arrQuestionElements count];j++)
        {

            QuestionElements *questionElements = [arrQuestionElements objectAtIndex:j];
            NSLog(@"Question Element %@",questionElements.id);
            if([questionElements.id intValue]==i)
                continue;
            UIView *new = (UIView * )[controller.view viewWithTag:[questionElements.id intValue]];

            if([new isKindOfClass:[UIButton class]])
            {
                UIButton* btnDD = (UIButton*)new;
                [btnDD setTitle:@"" forState:UIControlStateNormal];
                btnDD.titleLabel.text=@"";
                [self saveAnswer:btnDD.tag AnswerText:@""];
            }
            else if([new isKindOfClass:[DWOptionGroup class]])
            {
                DWOptionGroup* btnCB = (DWOptionGroup*)new;
                [btnCB setValue:@""];
                [self saveAnswer:btnCB.tag AnswerText:@""];

            }
            else if([new isKindOfClass : [CheckBox class]])
            {
                CheckBox* btnCB = (CheckBox*)new;
                [btnCB setValue:0];
                [self saveAnswer:btnCB.tag AnswerText:@""];

            }
            else if([new isKindOfClass : [UITextField class]])
            {   
                UITextField * txtCB = (UITextField *)new;
                txtCB.text=@"";
                [self saveAnswer:txtCB.tag AnswerText:@""];   

            }
            else 
            {
                    //testing
                    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Testing" 
                                                                    message:@"nothing to clear."
                                                                   delegate:nil 
                                                          cancelButtonTitle:nil
                                                          otherButtonTitles:@"Ok",nil];

                    [alert show];
                    //  
            }

        }

    }
}
else
{
    [self removeNA:controller ofId:sender];            
}
} 
```

条件和结果

**在调试模式**

如果有四个问题元素（即 arrQuestionElements.count=4）。

1)UI按钮

2)DWOptionGroup

3)复选框

4)UITextField

在每个循环中，它都会输入相应的 if 条件。第一个循环=if([new isKindOfClass:[UIButton class]])

第二个循环=else if([new isKindOfClass:[DWOptionGroup class]])

等等。

**但是在使用警报跟踪的相同条件的临时发布中。**

第一个循环=其他部分

第二个循环=其他部分

第三个循环=其他部分

和 4th loop=else if([new isKindOfClass : [UITextField class]]) （适用于最后一个循环）

同样，如果最后一个对象是 UIButton

第一个循环=其他部分

第二个循环=其他部分

第三个循环=其他部分

和 4th loop=if([new isKindOfClass:[UIButton class]]) （适用于最后一个循环）

任何有关此问题的建议将不胜感激。谢谢你。

# javascript - 使用 google-code-prettify 美化代码的滚动条

> ID：13946182
> 
> 赞同：11
> 
> 时间：2012-12-19T05:40:32.170
> 
> 标签：javascript, scrollbar, pretty-print

我在博客上使用[google-code-prettify进行语法高亮显示。](http://code.google.com/p/google-code-prettify/)我的问题是我没有看到滚动条出现在我预先格式化的代码块周围，即使代码太宽而无法适应指定的宽度。我正在格式化代码块

```
<pre class="prettyprint lang-java prettyprinted" style=""> <code>public class MyVeryVeryLongClassname extends MyBaseClassWithAnEvenLongerName implements AnInterface, AnotherInterface, YetAnotherInterface { </code></pre> 
```

在我的博客上，滚动条从不出现，并且线条超出了帖子列的右边缘（例如，看看[这个帖子](http://curioustechizen.blogspot.com/2012/12/code-smells-calling-life-cycle-methods.html)），使它看起来非常难看。StackOverflow 也显示为：

```
public class MyVeryVeryLongClassname extends MyBaseClassWithAnEvenLongerName implements AnInterface, AnotherInterface, YetAnotherInterface { 
```

我使用 Firebug 来研究 stackoverflow 是如何做到这一点的，但我没有发现任何与我正在做的不同的事情。我正在链接到与 SO 使用的相同的 JS 文件（在他们自己的 CDN 上）。我也在使用相同的样式。

那么，我需要做什么才能将滚动条添加到预先格式化的代码块中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T05:52:23.863

没关系，我找到了解决方案。我需要做的就是将以下 CSS 属性添加到站点范围的 CSS 样式表中：

```
pre.prettyprint{
    width: auto;
    overflow: auto;
    max-height: 600px
} 
```

这引入了滚动条。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-05T22:22:01.067

[使用您的代码，我的博客](https://unity3diy.blogspot.com/)中的所有内容都位于左侧，但我使用以下 CSS 代码对其进行了修复：

```
pre.prettyprint {
    display: block;
    overflow: auto;
    width: auto;
    /* max-height: 600px; */
    white-space: pre;
    word-wrap: normal;
    padding: 10px;   
} 
```

[我在github](https://github.com/taywils/taywils.me/blob/master/static/css/style.less)上找到了代码。

# html - z-index 在点击时突出显示图像

> ID：13946187
> 
> 赞同：1
> 
> 时间：2012-12-19T05:40:58.077
> 
> 标签：html, css

我在使用 z-index 时遇到了一些问题。当我将 z-index 添加到 id 以使其不与我拥有的另一个 div 重叠时，它会使图像在单击时突出显示，就像在双击时一样。

这只发生在 Firefox 中。在 Chrome 和 IE 9,8 和 7 中，它不会在点击时突出显示。我正在使用 Firefox 17.0.1。这可能是什么原因造成的？我的 ids CSS 看起来像这样：

```
#brand-content, #brand-content>img
{
width:100%;
height:100%;
position: relative;
top:0px;
z-index:-1;
} 
```

我在页面上的 HTML 只是：

```
 <head>
       <link rel="stylesheet" type="text/css" href="../stylesheet.css">
    </head>
    <body>
     <?php
      include ("../includes/sidebar.php");
     ?>
     <div id="brand-content">
      <img src="../images/IMG_78707.jpg">
     </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:31:59.240

这是您想要的猜测演示：http: [//jsfiddle.net/YVw58/2/](http://jsfiddle.net/YVw58/2/)

HTML部分：

```
<div id="parent">
    This is parent.
    <div id="compare">compare</div>
    <div id="childBelow">below</div>
    <div id="childUp">up</div>
</div> 
```

CSS部分：

```
#parent {
    background-color: #f66;
}

#childBelow {
    background-color: #6f6;
    height: 80px;
    width: 160px;
    position: absolute;
    left: 0px;
    top: 100px;
    z-index: -1;
}#parent {
    background-color: #f66;
}

#childBelow {
    background-color: #6f6;
    height: 80px;
    width: 160px;
    position: absolute;
    left: 0px;
    top: 100px;
    z-index: -1;
}

#childUp {
    background-color: #66f;  
    height: 80px;      
    width: 160px; 
    position: absolute;
    left: 0px;
    top: 20px;   
}

#compare {
    position: absolute;
    left: 50px;
    top: 50px;
    background-color: #ccc;
    width: 160px;
    height: 80px;
}

#childUp {
    background-color: #66f;  
    height: 80px;      
    width: 160px; 
    position: absolute;
    left: 0px;
    top: 20px;   
}

#compare {
    position: absolute;
    left: 50px;
    top: 50px;
    background-color: #ccc;
    width: 160px;
    height: 80px;
} 
```

当然，不同的结果是由网络浏览器的版本引起的。我在 Firefox 13.0.1、Chrome 23.0、Opera 12.0 和 IE 9.0 上测试过，都达到了预期的效果。

另一个需要注意的是，如果事件区域被较大 z-index 的元素覆盖，则 z-index 较小的元素将不会收到事件（例如：鼠标单击），如之前的演示所示。

[您还可以在http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/](http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/)上查看 z-index 以了解更多详细信息。

# c# - 我在 ZedGraph 中创建了一个图形，我怎样才能使图形大小像 1920X1080 一样大？

> ID：13946189
> 
> 赞同：1
> 
> 时间：2012-12-19T05:41:15.963
> 
> 标签：c#

当我现在将图表保存到硬盘时，文件大小为：284x262 290kb 当我试图将图表从硬盘上的 bmp 文件放在 pdf 文档上时，它非常小。如果我在 pdf 上手动拉伸它，它会失去分辨率并且看起来很糟糕，你甚至无法阅读图表上的任何内容。

我想以某种方式保持图形分辨率，我的意思是质量和清晰度，但让它的尺寸更大，比如 1920x1080。

这是我使用的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using ZedGraph;
using Extracting_Frames;

namespace Lightnings_Extractor
{
    public partial class RGB_Form : Form
    {
        int framesLength;

        public RGB_Form()
        {
            InitializeComponent();

            this.WindowState = System.Windows.Forms.FormWindowState.Maximized;
            zedGraphControl1.ClientSize = this.Size;
            framesLength = Form1.list_of_histogramsR.Count;
        }

        public RGB_Form(List<long[]> Histograms)
        {
            InitializeComponent();

            this.WindowState = System.Windows.Forms.FormWindowState.Maximized;
            zedGraphControl1.ClientSize = this.Size;
            framesLength = Histograms.Count;
            CreateGraph_GradientByZBars(zedGraphControl1, Histograms);
        }

        private void CreateGraph_GradientByZBars(ZedGraphControl z1, List<long[]> HistoGramList)
        {
            GraphPane myPane = z1.GraphPane;
            if (myPane != null)
            {
                myPane.CurveList.Clear();
                myPane.GraphObjList.Clear();
                myPane.Title.Text = "Simple Moving Average By :  " + Form1.percentage + "%";
                myPane.XAxis.Title.Text = "Frame Number";
                myPane.YAxis.Title.Text = "Value";

                myPane.XAxis.Scale.MaxAuto = false;
                myPane.XAxis.Scale.MinAuto = false;
                myPane.YAxis.Scale.MaxAuto = false;
                myPane.YAxis.Scale.MinAuto = false;

                myPane.XAxis.Scale.Min = 0;
                myPane.XAxis.Scale.Max = 255; //framesLength;
                myPane.YAxis.Scale.Min = 0;
                myPane.YAxis.Scale.Max = framesLength;// 255;

                PointPairList R = new PointPairList();
                PointPairList G = new PointPairList();
                PointPairList B = new PointPairList();

                for (int i = 0; i <  HistoGramList.Count; i++)
                {
                    if (i == 3154)
                    {
                        double z = 0;
                        double yy = 0;
                        long[] g = HistoGramList[i];
                            for (int f = 0; f < g.Length; f++)
                            {
                                double x = f;
                                yy = g[f];
                                R.Add(x, yy, z);
                            }
                    }
                }

                LineItem myCurveRed = myPane.AddCurve("Original Signal",
                   R, Color.Red, SymbolType.None);
                z1.Size = new System.Drawing.Size(1920, 1080);
                z1.AxisChange();
                z1.SaveAs(@"ZedRgb.bmp");
            }
        }
    }
} 
```

在我添加的代码末尾附近：

```
z1.Size = new System.Drawing.Size(1920, 1080); 
```

但它并没有改变任何东西，硬盘上的文件大小仍然是：284x262

如何更改图形大小并将其保存到硬盘而不损失 1920x1080 的质量？当我在我的程序上使用图表时，它会全屏显示，并且图表是全屏大，但是当我将它保存到硬盘时，它非常小。

编辑：我刚刚看到，在我添加 zedgraph 控件的表单上，表单大小为 300x300，但 zedgraph 控件大小为 284x262，为了使其全屏显示，我将 ZedGraph 控件 Dock 属性更改为 Fill。

因此，ZedGraph 控件的设计器中的大小实际上是 284x262，如果我想在不更改设计器大小的情况下将其保存到我的硬盘上，如何在运行时代码中更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:57:17.693

我刚刚将 ZedGraph 控件从 Dock Fill 更改为 Dock None

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T15:37:01.727

我建议更换线路

> z1.Size = new System.Drawing.Size(1920, 1080);

和

> this.size = 新尺寸（1920,1080）；

我很想知道它是否有效。如果没有，另一种可能的解决方案可能是添加
该行

> this.size = 新尺寸（1920,1080）；

行前

> zedGraphControl1.ClientSize = this.Size;

# c# - 使用多个复选框来更改 SqlDataSource 的结果

> ID：13946195
> 
> 赞同：0
> 
> 时间：2012-12-19T05:42:13.777
> 
> 标签：c#, asp.net

我在显示 GridQuery 结果的页面上有一个 Gridview。这工作正常。我在同一页面上有一个复选框控件，如果选中，应该添加到 GridQuery 的 where 子句中。如何检查复选框的状态，以便在有或没有过滤的情况下运行查询。

aspx：

```
<table class="filter_component_css">
          <tr>
             <td>miap</td>
             <td><asp:TextBox CssClass="search_format" ID="miap_textbox" runat="server"></asp:TextBox></td>
          </tr>
          <tr>
             <td>purchase order</td>
             <td><asp:TextBox CssClass="search_format" ID="po_textbox" runat="server"></asp:TextBox></td>
          </tr>
          <tr>
              <td>manufacturer</td>
              <td><asp:TextBox CssClass="search_format" ID="manufacturer_textbox" runat="server"></asp:TextBox></td>
          </tr>
          <tr>
              <td>spare parts</td>
              <td><asp:CheckBox CssClass="search_format" ID="parts_checkbox" runat="server"  OnCheckedChanged="spareParts_Checked"/></td>
          </tr>
          <tr>
              <td>first fills</td>
              <td><asp:CheckBox CssClass="search_format" ID="fills_checkbox" runat="server" OnCheckedChanged="firstFills_Checked"/></td>
           </tr>
           <tr>
              <td>special tools</td>              
              <td><asp:Checkbox CssClass="search_format" ID="tools_checkbox" runat="server" OnCheckedChanged="specialTools_Checked"/></td>
          </tr>
          <tr>
              <td>tag</td>
              <td><asp:TextBox CssClass="search_format" ID="tag_textbox" runat="server"></asp:TextBox></td>
          </tr>  
          <tr>
              <td>item to be lubricated</td>
              <td><asp:TextBox CssClass="search_format" ID="item_lubricated_textbox" runat="server"></asp:TextBox></td>
          </tr>
          <tr>
              <td>include deleted</td>
              <td><asp:CheckBox CssClass="search_format" ID="include_deleted_checkbox" runat="server" OnCheckedChanged="includeDeleted_Checked"/></td>
          </tr>
          <tr>
              <td>include purchase orders manually inserted</td>
              <td><asp:CheckBox CssClass="search_format" ID="manually_inserted_checkbox" runat="server" OnCheckedChanged="manualInsert_Checked"/></td>
          </tr>
          <tr>
              <td>material code</td>
              <td><asp:TextBox CssClass="search_format" ID="material_code_textbox" runat="server"/></td>
          </tr>   
              <tr>
                <td colspan="2">
                    <asp:Button ID="buttonReset"  CssClass="filter_component_css_3" runat="server" Text="Reset" OnClick="submitResetClick"/>
                    <asp:Button ID="buttonSearch"  CssClass="filter_component_css_3" runat="server" Text="Search" OnClick="submitSearchClick"/>
              </td>
            </tr>
        </table>

<asp:SqlDataSource ID="SqlDataSource_Search" runat="server" ConnectionString="Server=kzatdev04;Database=AgipKco.CMHS;Trusted_Connection=True;" 
           selectCommand="select aktb_ItemUpload.miap as miap, 
                aktb_PurchaseOrder.pocode as pocode, 
                aktb_PurchaseOrder.materialdescription as materialdescription,
                aktb_Supplier.name as suppliername,
                aktb_Manufacturer.name as manufacturername,
                aktb_CMRFHeader.spareparts as spareparts,
                aktb_CMRFHeader.consumables as firstfills,
                aktb_CMRFHeader.specialtools as specialtools,
                aktb_PrjStrTag.tag as tag,
                aktb_ItemTobeLubricated.itemtobelubricated as itemtobelubricated,
                aktb_ProjectStructure.subsystem as subsystem,
                aktb_ProjectStructure.cu as cu,
                aktb_ProjectStructure.ffu as ffu,
                aktb_ProjectStructure.deleted as ps_deleted,
                aktb_PurchaseOrder.manuallyInserted as po_manuallyinserted,
                aktb_ItemUpload.materialCode as materialcode
                from aktb_ItemUpload>

                <FilterParameters> 
                    <asp:ControlParameter ControlID="parts_checkbox" Name="parts_checkbox" PropertyName="Checked" /> 
                    <asp:ControlParameter ControlID="fills_checkbox" Name="fills_checkbox" PropertyName="Checked" /> 
                    <asp:ControlParameter ControlID="tools_checkbox" Name="tools_checkbox" PropertyName="Checked" /> 
                    <asp:ControlParameter ControlID="include_deleted_checkbox" Name="parts_checkbox" PropertyName="Checked" /> 
                    <asp:ControlParameter ControlID="manually_inserted_checkbox" Name="manually_inserted_checkbox" PropertyName="Checked" /> 
                </FilterParameters> 

</asp:SqlDataSource> 
```

C＃：

```
protected void submitSearchClick(object sender, EventArgs e) 
    {
                ViewState.Add("flag", true);

                    GridViewS.DataSource = SqlDataSource_Search;

                    SqlDataSource_Search.FilterExpression = "miap like '%" + miap_textbox.Text + "%' and pocode like '%" + po_textbox.Text + "%' and materialdescription like '%" + material_desc_textbox.Text + "%' and suppliername like '%" + supplier_textbox.Text + "%' and manufacturername like '%" + manufacturer_textbox.Text
                     + "%' and tag like '%" + tag_textbox.Text + "%' and itemtobelubricated like '%" + item_lubricated_textbox.Text + "%' and subsystem like '%" + subsystem_textbox.Text
                     + "%' and cu like '%" + cu_textbox.Text + "%' and ffu like '%" + ffu_textbox.Text + "%' and materialcode like '%" + material_code_textbox.Text + "%'";

                    GridViewS.DataBind();        
    } 
```

# ios - 向上平移 UIImageView

> ID：13946201
> 
> 赞同：1
> 
> 时间：2012-12-19T05:42:47.823
> 
> 标签：ios, uiviewanimation

当我的视图加载时，我想将 UIImageView 对象翻译 70 点。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect logoFrame = logoImage.frame;
    logoFrame.origin.y -= 70;
    [UIImageView beginAnimations:nil context:NULL];
    [UIImageView setAnimationDuration:1];
    [logoImage setFrame:logoFrame];
    [UIImageView commitAnimations];
} 
```

我哪里错了？

在 viewDidLoad 之外的方法内工作（即 touchesBegan）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:54:52.450

`viewDidLoad`将在视图加载后运行，这可能在视图真正显示之前很久。如果要在视图出现时制作动画，请使用`viewWillAppear`or`viewDidAppear`代替。

# matlab - 如何在 MATLAB 中将索引图像的颜色图更改为 HSV 颜色图

> ID：13946202
> 
> 赞同：3
> 
> 时间：2012-12-19T05:42:50.000
> 
> 标签：matlab, image-processing

我正在使用索引图像。如何以编程方式获取通过在 imtool 中将颜色图更改为 hsv 获得的像素强度值？有没有办法将索引图像的颜色图更改为 hsv(256)？

我是MATLAB新手，请帮忙！我附上了下面的图片： ![在此处输入图像描述](../Images/c6dedadf5bb0d8408ffdca7a8d05256a.png)

imtool 显示哪个通道，imtool 中的值“91”代表什么？我如何获得这个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:37:34.767

底部的 Pixel info 显示以下信息： Pixel info: (X, Y): Pixel Value

在这里，我们在 (309, 510) 处的像素值为 91。91 是一系列值（主要是 0 到 255）中的像素强度。仅读取 1 个通道，因为它是灰度图像。

您可以从 RGB 图像创建 hsv 图像，但谈论灰度图像的 hsv 转换是没有意义的。您所拥有的是灰度图像。

# javascript - 通过 JSON 在 Node 服务器和 Web 客户端上使用对象方法？

> ID：13946209
> 
> 赞同：1
> 
> 时间：2012-12-19T05:43:26.333
> 
> 标签：javascript, json, node.js

我有一个 Javascript 库，我想在 Web 浏览器和 Node.js 后端使用它。在库中，我有多个对象，其方法定义如下：

```
function foo() {
  this.bar = 200;
  this.someMethod = function(baz) {
    return this.bar + baz;
  };
}

var x = new foo(); 
```

我可以通过执行以下操作在客户端或 Node.js 服务器中使用它：

```
x.someMethod(5);
   => (returns 205) 
```

现在，当我`JSON.stringify`是我的对象时，它会在没有方法的情况下显示出来。

```
var string = JSON.stringify(x);
   => {"bar":200} 
```

这意味着我无法在我的服务器上解压缩 JSON 并使用相同的方法。

```
var parsed = JSON.parse(string);
document.write(parsed.someMethod(5));
   => (doesn't do anything. the methods are gone!) 
```

在基于类的系统中，我只使用复制构造函数。可以从 JSON 重建对象的东西。

```
function foo_copy_constructor(parsed_json) {
  f = new foo();
  f.bar = parsed_json.bar;
  return f;
}

var z = foo_copy_constructor(parsed);
z.someMethod(5);
   => (returns 205 like it should) 
```

（jsfiddle：http: [//jsfiddle.net/7FdDe/](http://jsfiddle.net/7FdDe/)）

**基本上，还有比这更好的方法吗？**

Many of my objects contain instances of other objects I've written with their own methods, and this seems like it would get tedious to build a constructor for every object since both the client and the server use the same library and object definitions. I know that JavaScript is based on prototypes, but I don't really understand them since I've just started with JavaScript and am used to Python and class-based languages.

Thanks for any and all help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:52:41.190

`JSON.stringify` only stringifies the objects that have the `toJSON` method. So you could simply add the `toJSON` method to your methods. (Remember, functions are objects too.)

```
function A() {
    this.method = function() { console.log(1); };
}

var c = new A();
JSON.stringify(c);
"{}"

A.prototype.otherMethod = function() { console.log(1); };

var c = new A();
JSON.stringify(c);
"{}"

Function.prototype.toJSON = function() { return this.toString(); };
JSON.stringify(c);
"{"method":"function () { console.log(1); }"}" 
```

However, when parsing this back, you get the function as a string. So you have to the strings back to functions with something like this:

```
var d = JSON.parse(JSON.stringify(c));
Object.keys(d).forEach(function(k) {

    // If it starts with "function"
    if (/^function/.test(d[k])) {

        // Get the body of the function
        var f = d[k].match(/{(.*)}/).pop();

        // Replace the string with a real function
        d[k] = new Function(f);
    }
});

d.method();
1 
```

* * *

However, instead of messing with javascript like this, I'd rather suggest that you use a well-tested library like [now.js](https://github.com/Flotype/now).

# c# - 从前端更改字符串格式

> ID：13946213
> 
> 赞同：0
> 
> 时间：2012-12-19T05:43:31.623
> 
> 标签：c#, sql, database, string

这里我有一个字符串值`0515`，我想`1505`从前端（C#）显示。

有人知道吗？

```
String Str1 = ds.table[0].rows[a][5]; 
```

从`Str1`我得到，`0515`但我想显示为`1505`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:52:09.620

```
string temp = ds.table[0].rows[a][5];
string Str1 = temp.Substring(2) + temp.Substring(0, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:58:49.033

不使用连接字符串的另一种方法如下

```
string Str1 = string.Format("{0}{1}", s1.Substring(2), s1.Substring(0, 2)); 
```

# iphone - 删除 iphone SDK 中的特定 HTML 标签

> ID：13946216
> 
> 赞同：1
> 
> 时间：2012-12-19T05:43:35.227
> 
> 标签：iphone, html, ios, xcode, html-parsing

我有一个`NSString`包含内容的`HTML`内容。但我想删除`< img src=..../>`标签表单 NSString。

例如

```
Source = < p>< a href="http://wpcore.mpf.s3.amazonaws.com/wp-content/uploads/2012/12/thumbs_img_0500.jpg">**< img class="alignleft size-full wp-image-4730" style="margin-left: 5px; margin-right: 5px;" title="thumbs_img_0500" src="http://wpcore.mpf.s3.amazonaws.com/wp-content/uploads/2012/12/thumbs_img_0500.jpg" alt="thumbs img 0500" width="120" height="120" />**< /a>The two professional level < a title="3d printing" href="http://www.makepartsfast.com/category/products/3d-printers/">3D printers< /a> that build parts in color are the Zprinter from 3D Systems and the < a href="http://www.makepartsfast.com/2012/05/3812/mcor-announces-full-3d-color-3d-printer">Iris< /a> from Mcor Technologies. Earlier this year, Mcor Technologies announced its Iris full color 3D printer at the Rapid show and recently at Euromold. The Zprinter uses ink jetted into the build powder. The Iris, however, uses a different technique for creating color parts. Dr. Conor MacCormack, CEO of Mcor, discusses this technology.</p>
< p>< a href="http://wpcore.mpf.s3.amazonaws.com/wp-content/uploads/2012/12/MacCormack-part-1.mp3">MacCormack part 1< /a>< /p> 
```

我的 img src 标签将一直不同。我怎样才能做到这一点？？

我的代码：

```
-(void)viewWillAppear:(BOOL)animated
{
source = [NSString stringWithFormat:@"%@",[[self.parseResults objectAtIndex:k] objectForKey:@"summary"]];

NSLog(@"%@",source);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:51:37.120

我通过将 HTML 转换为字符串来解决它。

只需导入两个文件**NSString+HTML.h 和 NSString+HTML.m**文件。

然后调用**`text_str=[html_str stringByConvertingHTMLToPlainText]`**；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:56:52.240

//像下面一样...让我知道它是否有效！！！！

```
-(void)viewWillAppear:(BOOL)animated
{
 source = [NSString stringWithFormat:@"%@",[[self.parseResults objectAtIndex:k] objectForKey:@"summary"]];
 Source=[self flattenHTML:Source];//call flattenhtml method...
 NSLog(@"%@",source);
}

#pragma mark ---Removing HTML Tags
- (NSString *)flattenHTML:(NSString *)html {

NSScanner *theScanner;
NSString *text = nil;
theScanner = [NSScanner scannerWithString:html];

while ([theScanner isAtEnd] == NO) {

    [theScanner scanUpToString:@"<" intoString:NULL] ; 

    [theScanner scanUpToString:@">" intoString:&text] ;

}
html = [html stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

return html;
} 
```

# javascript - 仅在未检测到 Internet 连接时如何加载脚本？

> ID：13946217
> 
> 赞同：0
> 
> 时间：2012-12-19T05:43:41.323
> 
> 标签：javascript, google-analytics

我的网页中有一些 jquery 插件以及 Google Analytics 脚本。照片滑块是我的那些 jquery 插件之一。在所有其他 js 文件调用之后，我已将谷歌分析放在页面底部。但是我们内部网络中没有互联网连接的用户看不到照片滑块的照片，因为所有的 jquery 代码都是在页面完全加载后运行的。由于谷歌分析无法连接到互联网，因此页面未完全加载。

只有当用户可以访问互联网时，我才能加载 Google Analytics 脚本吗？

# python - 如何接收 Python 中发生的命令输出？

> ID：13946219
> 
> 赞同：2
> 
> 时间：2012-12-19T05:43:59.977
> 
> 标签：python

我有在 Python 中运行的 Linux 命令。

```
roc = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', hostname, '/home/zurelsoft/test'], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0]
print roc 
```

这仅在完成执行时打印命令处理。但是，我想要命令的输出，因为它正在发生并在命令完全执行时停止。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T05:55:30.190

您可以查看[选择](http://docs.python.org/2/library/select.html)和[选择示例](http://www.doughellmann.com/PyMOTW/select/)

`Python’s select()`函数是底层操作系统实现的直接接口。它监视套接字、打开的文件和管道（任何带有返回有效文件描述符的 fileno() 方法的东西），直到它们变得可读或可写，或者发生通信错误。

`select()`更容易同时监控多个连接，并且比使用套接字超时在 Python 中编写轮询循环更有效，因为监控发生在操作系统网络层，而不是解释器中。

如果这没有帮助你也可以看看

[持久的python子进程](https://stackoverflow.com/questions/8980050/persistent-python-subprocess)

[如何从 subprocess.Popen.stdout 读取所有可用数据（非阻塞）？](https://stackoverflow.com/questions/3076542/how-can-i-read-all-availably-data-from-subprocess-popen-stdout-non-blocking/3078292#3078292)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:35:39.947

如果您像这样通过 subprocess.Popen 调用它，这应该可以从命令行工作，但是通过更改将管道传递给 sys.stdout：

```
 stdout=sys.stdout 
```

将管道传递给打开的、可写的文件对象会保存输出。

```
out = open("output.tmp","w")
subprocess.Popen(["ls","-R"],stdout = out)
out = open("output.tmp","r")
output = out.readlines() 
```

# php - fadeIn 仅来自 mysql 表的新数据，而不是所有数据

> ID：13946223
> 
> 赞同：0
> 
> 时间：2012-12-19T05:44:48.983
> 
> 标签：php, jquery, mysql, refresh, fadein

我正在做这个项目，试图创建一个简单的网站，用户可以在其中输入信息，然后在不同的页面上显示相同的信息。

我正在使用 JQuery 刷新页面并加载新内容，使用 MySQL 存储信息，使用 PHP 插入和检索该信息。

我现在遇到的问题是我正在使用 Javascript 来更新页面和 .fadeIn 数据，但目前它只是淡出并淡入所有数据。我想要它做的是保持当前数据相同，并且只淡入新数据。

这是我的 JQuery 函数：

```
<script type="text/javascript">
$(document).ready(function() {

var refreshId = setInterval(function() {
$("#responsecontainer").fadeOut('fast').load('output.php');
}, 3000);

$.ajaxSetup({ cache: false });

});
</script> 
```

这是我的名为“output.php”的PHP：

```
<?php include_once('db_connect.php'); ?>

<?php include_once('input.php'); ?>

<?php
//query the database
$query = mysql_query("SELECT * FROM notes ORDER BY ID DESC");

//fetch the results / convert results into an array
while($rows = mysql_fetch_array($query)):
$title = $rows['notestitle'];
$text = $rows['notestext'];

?>

<div id="title">
<h1><?php echo "$title<br>"; ?></h1>
</div>
<div id="text">
<h2><?php echo "$text<br>"; ?></h2>
</div>

<?php endwhile; ?> 
```

这是显示信息的页面的代码：

```
<?php include_once('db_connect.php'); ?>

<?php include_once('input.php'); ?>

<div id="header"></div>

<div id="responsecontainer">
<?php include_once('output.php'); ?>
</div> 
```

让我知道您是否需要我提供其他任何内容，或者您​​是否不清楚。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:23:15.410

使用这个带限制的简单查询

```
SELECT * FROM notes ORDER BY ID DESC LIMIT 1 
```

# c# - 以编程方式生成和分配 ComboBox 数据源

> ID：13946226
> 
> 赞同：3
> 
> 时间：2012-12-19T05:45:01.077
> 
> 标签：c#, .net, winforms, class, datasource

我有一个名为 cmbWeekDays 的 ComboBox，一个`WeekDay`类：

```
public class WeekDay
{ 
    public int Index;
    public string DayName;
} 
```

这个 FormLoad 事件：

```
List<WeekDay> days = new List<WeekDay>();
days.Add(new WeekDay { DayName = "Sat", Index = 1 });
days.Add(new WeekDay { DayName = "Sun", Index = 2 });
days.Add(new WeekDay { DayName = "Mon", Index = 3 });
days.Add(new WeekDay { DayName = "Tue", Index = 4 });
days.Add(new WeekDay { DayName = "Wed", Index = 5 });
days.Add(new WeekDay { DayName = "Thu", Index = 6 });
days.Add(new WeekDay { DayName = "Fri", Index = 7 });

cmbxWeekDays.DataSource = days;
cmbxWeekDays.DisplayMember = "DayName";
cmbxWeekDays.ValueMember = "Index";
cmbxWeekDays.Refresh(); 
```

我不知道为什么会得到这个奇怪的结果：

![输出图像](../Images/5271404640b41235f5d43e948532b421.png)

谁能解释我发生了什么？以及如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:54:26.353

数据绑定仅适用于属性。因此，您必须在数据源类而不是字段中声明属性：

```
public class WeekDay
{
    public int Index { get; set; }
    public string DayName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:16:37.927

尝试以下方法可能对您有所帮助。我也面临同样的问题。但我最后写了 cmbyear.Databind() 它对我有用。所以尝试一次。

```
 DropDownList cmbYear = new DropDownList();
        cmbYear.DataSource = days;  
        cmbYear.DataTextField = "Year";
        cmbYear.DataValueField = "YearID";
        cmbYear.DataBind(); 
```

# ruby - Savon:Module 的未定义方法“配置”

> ID：13946227
> 
> 赞同：9
> 
> 时间：2012-12-19T05:45:12.573
> 
> 标签：ruby, gem, savon

我在带有此代码段的 gem 中收到上述错误

```
Savon.configure do |config|
  config.log = false
  config.log_level = :error
  HTTPI.log = false
end 
```

这段代码过去在 Travis 上运行过，所以我不确定为什么在我更改自述文件时会发生变化。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T05:45:12.573

这种困惑的一部分来自我的情况——继承要维护的 gem——以及 gemspec 中的这一行：

```
gem.add_dependency 'savon' 
```

没有[指定版本号](http://rubygems.rubyforge.org/rubygems-update/Gem/Specification.html#method-i-add_development_dependency)，所以最新的运行切换到使用 Savon 2，它放弃了`Savon.configure`全局行为。如果你和我在同一条船上，将此行更改为 Savon 的最后一个 pre-2.0 版本将解决问题：

```
gem.add_dependency 'savon', '~>1.2.0' 
```

然后`bundle install`你应该很好。

* * *

或者你想升级你的代码。我知道我知道。

`Savon.configure`已从 Savon 2.0 中删除，因为“[问题是全局状态](http://savonrb.com/version2.html#globals)”。在您的应用程序中保持相同行为的最快方法是在同一位置定义应用程序级全局哈希。然后，您会将此哈希传递到`Savon.client`您进行的每个调用中。例如：

```
# Where Savon.configure was called
APP_OPTS = {
  # disable request logging, silences HTTPI as well
  log:       false,
  # Don't log Laundry xmls to STDOUT
  log_level: :error,
  #... etc
}

# Elsewhere
@client = Savon::Client.new(APP_OPTS) 
```

我认为这是迁移到 2.0 配置风格的起点。理想情况下，在初始化每个 Savon 客户端时，您应该始终考虑[可用的特定于客户端的 2.0 选项。](http://savonrb.com/version2.html)

# php - 在 Yii 中如何将图像显示为输出，其路径存储在数据库中

> ID：13946242
> 
> 赞同：0
> 
> 时间：2012-12-19T05:46:28.017
> 
> 标签：php, database, image, yii

我正在 Yii 中创建一个项目。我的表格`Dnymedia`和字段一样，

> **动态媒体**
> 
> -mediaId
> 
> -媒体路径
> 
> -contentTitleId

假设我将媒体路径存储为 =“ *`F:\Documents and Settings\All Users\Documents\My Pictures\Sample Pictures`*”

如何将此图像显示为输出？我不需要在视图中显示它。我只想将图像显示为 Yii 中控制器操作的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:09:37.523

而不是读取文件使用 file_get_contents

```
header('Content-Type: image/jpeg');
echo file_get_contents('F:\Documents and Settings\All Users\Documents\My Pictures\Sample.jpg');
die; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:23:14.717

```
This worked for me.Please check it.

public function actionTest()
    {
        header('Content-Type: image/jpeg');
        readfile('http://localhost/myAppetite/images/bodyBg.jpg');
         die;
    } 
```

# iphone - 在 iPhone 的 tumblr 上上传图片

> ID：13946245
> 
> 赞同：1
> 
> 时间：2012-12-19T05:46:42.177
> 
> 标签：iphone, image, sdk, sharing

我真的被这个问题困扰了很多天。在我的应用程序中，我需要在 tumblr 上上传图片，我尝试了各种教程和更新，但是没有一个可以在 tumblr 上发布图片。如果你这样做了，请帮助我。

```
NSData *imageData = [NSData dataWithContentsOfFile:photo];
//stop on error
if (!imageData) return NO;

//Create dictionary of post arguments
NSArray *keys = [NSArray arrayWithObjects:@"email",@"password",@"type",@"caption",nil];
NSArray *objects = [NSArray arrayWithObjects:
                    tumblrEmail,
                    tumblrPassword,
                    @"photo", caption, nil];
NSDictionary *keysDict = [[NSDictionary alloc] initWithObjects:objects forKeys:keys];

//create tumblr photo post
NSURLRequest *tumblrPost = [self createTumblrRequest:keysDict withData:imageData];
[keysDict release];

//send request, return YES if successful
NSURLConnection *tumblrConnection = [[NSURLConnection alloc] initWithRequest:tumblrPost delegate:self];
if (!tumblrConnection) 
{
    NSLog(@"Failed to submit request");
    return NO;
} 
else 
{
    NSLog(@"Request submitted");
    receivedData = [[NSMutableData data] retain];
    [tumblrConnection release];
    return YES;
}

-(NSURLRequest *)createTumblrRequest:(NSDictionary *)postKeys withData:(NSData *)data
{
 //create the URL POST Request to tumblr
 NSURL *tumblrURL = [NSURL URLWithString:@"http://api.tumblr.com/v2/blog/kashifjilani.tumblr.com/posts"];
 NSMutableURLRequest *tumblrPost = [NSMutableURLRequest requestWithURL:tumblrURL];
 [tumblrPost setHTTPMethod:@"POST"];

//Add the header info
NSString *stringBoundary = @"0xKhTmLbOuNdArY---This_Is_ThE_BoUnDaRyy---pqo";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",stringBoundary];
[tumblrPost addValue:contentType forHTTPHeaderField: @"Content-Type"];

//create the body
NSMutableData *postBody = [NSMutableData data];
[postBody appendData:[[NSString stringWithFormat:@"--%@\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

//add key values from the NSDictionary object
NSEnumerator *keys = [postKeys keyEnumerator];
int i;
for (i = 0; i < [postKeys count]; i++) {
    NSString *tempKey = [keys nextObject];
    [postBody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n",tempKey] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"%@",[postKeys objectForKey:tempKey]] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
}

//add data field and file data
[postBody appendData:[@"Content-Disposition: form-data; name=\"data\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postBody appendData:[NSData dataWithData:data]];
[postBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

//add the body to the post
[tumblrPost setHTTPBody:postBody];

return tumblrPost;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:23:43.957

这对我有用：

```
NSData *imageData = UIImageJPEGRepresentation(yourUploadImage, 0.9);
NSMutableURLRequest *aRequest = [[[NSMutableURLRequest alloc] init] autorelease];
[aRequest setURL:[NSURL URLWithString:@"https://www.tumblr.com/api/write"]];
[aRequest setHTTPMethod:@"POST"];
NSString *boundary = @"0xKhTmLbOuNdArY";
//NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[aRequest addValue:contentType forHTTPHeaderField: @"Content-Type"];

/*
 now lets create the body of the post
 */
NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[@"Content-Disposition: form-data; name=\"email\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:Tumblr_UserName_Here dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[@"Content-Disposition: form-data; name=\"password\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:Tumblr_Password_Here dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary]
                  dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"type\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"photo" dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"data\"; filename=\"upload.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Transfer-Encoding: image/jpg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:imageData];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

if(comment available here)
{
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] 
                      dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Disposition: form-data; name=\"caption\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[commentString dataUsingEncoding:NSUTF8StringEncoding]];
}

// setting the body of the post to the reqeust
[aRequest setHTTPBody:body];
[NSURLConnection connectionWithRequest:aRequest delegate:self]; 
```

现在`delegate`的`NSURLConnection`

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
  if(connection)
    NSLog(@"Success");
  else
    NSLog(@"Something Wrong");
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error;
{
   NSLog(@"%@",[error description]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:33:55.033

我也为此苦苦挣扎了很长时间，但我想出了如何轻松发布。你可以看我[的帖子](https://stackoverflow.com/questions/13142608/api-to-post-on-tumblr)来回答这个问题。如果您对此有任何问题，我很乐意提供帮助。

# sql-server - 如何编写嵌套查询

> ID：13946247
> 
> 赞同：0
> 
> 时间：2012-12-19T05:46:56.613
> 
> 标签：sql-server, nested-queries, nested-query

我有一个名为 Options 的表。具有三个字段 Caption、OptionID、ParentOptionID。它包含一些记录，例如：

```
OptiondID        Caption        ParentOptionID
        1        Entry          0
        2        Sale           1
        3        Sale Invoice   2
----------------------------------------------
I want the result as :

OptiondID        Caption                        ParentOptionID
        1        Entry                          0
        2        Entry - Sale                   1
        3        Entry - Sale - Sale Invoice    2
-----------------------------------------------
Option Caption of its parent option - added in current Options Caption, and it should be nested. 
```

这是我尝试过的查询：

```
;with MyRelation as ( 

  -- Anchor member definition 
  select OID, Cast(Caption as Varchar(1000)) as Caption, POID, iid 
  from #tmpOptions as e 

  UNION ALL 

  -- Recursive member definition 
  select e.OID, Cast(e.Caption + '-' + r.Caption as Varchar(1000)) as Caption, e.POID, e.iid 
  from #tmpOptions as e join MyRelation R on e.POID = R.OID

) 

-- Statement that executes the CTE 
select OID, Caption, POID, iid 
from MyRelation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:54:25.393

您可以尝试以下查询吗

```
;WITH MyRelation AS ( 
  SELECT OptiondID, convert(varchar(max), Caption) AS Caption, ParentOptionID
  FROM Options
  WHERE  ParentOptionID = 0
  UNION ALL 
  SELECT Options.OptiondID, MyRelation.Caption + ' - ' + Options.Caption, Options.ParentOptionID
  FROM Options
  INNER JOIN MyRelation ON Options.ParentOptionID = MyRelation.OptiondID
  WHERE Options.ParentOptionID <> 0
) 
SELECT * FROM MyRelation 
```

# java - 在我的 Spring 3.2 MVC 应用程序中，为什么我的 JSP EL 表达式在登录后没有被评估？

> ID：13946255
> 
> 赞同：3
> 
> 时间：2012-12-19T05:48:18.953
> 
> 标签：java, spring, model-view-controller, jsp

我想按照示例实现spring3.2.0 web mvc：http: [//programmersplanet.wordpress.com/2011/11/26/4/](http://programmersplanet.wordpress.com/2011/11/26/4/)

但我失败了。最后我得到的结果是：`Successfully logged in: ${user.username}`，你看到变量是无用的（JSP 不起作用）。我添加了一些输出来调试，它证明了@Controller、@RequestMapping 工作。所以我不知道我的编码有什么问题。

spring-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
         http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <context:annotation-config/>
    <mvc:annotation-driven/>
    <context:component-scan base-package="demo.spring"/>
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/"/>
        <property name="suffix" value=".jsp"/>
    </bean>
</beans> 
```

登录控制器.java

```
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.support.SessionStatus;
import org.springframework.web.servlet.ModelAndView;

@Controller
@RequestMapping(value = "/")
public class LoginController {
    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView displayLoginView() {
        UserForm userForm = new UserForm();
        ModelAndView view = new ModelAndView("login");
        view.addObject(userForm);
        return view;
    }

    @RequestMapping(method = RequestMethod.POST)
    public ModelAndView doLogin(@ModelAttribute("user") UserForm user, BindingResult bindingResult, SessionStatus sessionStatus) {
        ModelAndView model = new ModelAndView("home");
        System.out.println(user.getUsername());// this line is right.
        return model;
    }
} 
```

主页.jsp

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>home</title>
</head>
<body>
Successfully logged in: ${user.username}
</body>
</html> 
```

web.xml

```
<!DOCTYPE web-app PUBLIC
        "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>Archetype Created Web Application</display-name>
    <servlet>
        <servlet-name>DispatchServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring-servlet.xml</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>DispatchServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:00:00.897

您的问题的可能原因是您在控制器中添加了“userForm”并尝试在 JSP 中以 ${user.username} 的形式访问它！

还要检查您是否在 web.xml 中禁用了 EL 表达。我们有 1000 名用户依赖 Spring MVC，这是迄今为止最可靠的 Java EE 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:16:37.660

我的 web.xml 是由 maven 自动生成的。这是错误的。

修改前（默认）：

`<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd" >`

修改后：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

# jquery - 这是 facebook 支持 jsoncallback=？(JSONP)

> ID：13946257
> 
> 赞同：3
> 
> 时间：2012-12-19T05:48:28.987
> 
> 标签：jquery, facebook, json, jsonp

```
https://www.facebook.com/feeds/page.php?id=397319800348866&format=jsoncallback=? 
```

我想通过[这里](https://www.facebook.com/feeds/page.php?id=397319800348866&format=json)获取帖子内容 但我尝试使用 getJSON 方法。它没有通过。有人告诉我在 Facebook 中使用 jsonp 格式，但是当我想到那个 URL 时，它说不支持该格式。那么有什么方法可以在没有跨域问题的情况下访问吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T05:52:12.423

你错过了与号。

```
https://www.facebook.com/feeds/page.php?id=397319800348866&format=json&callback=? 
```

# c# - C# 删除 html 标签中的内容（无正则表达式）

> ID：13946258
> 
> 赞同：0
> 
> 时间：2012-12-19T05:48:33.183
> 
> 标签：c#

我想删除html标签之间的文本，然后将其显示在textBox2中。我需要获取“<”和“>”的起始位置，然后删除标签和介于两者之间的所有内容。我不想使用正则表达式。

这是我到目前为止得到的

```
 string input = textBox1.Text;
        string output = textBox2.Text;
        string results;
        for (int i = 0; i < input.Length; i++)
        {
            if(input.IndexOf('<',i) !=-1 )
            {

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:01:41.643

这应该可以满足您的需求。但是，它不会处理存在格式错误的标记的情况。因此，例如，如果您要输入输入字符串`Hello < world`，则输出将是`Hello`。

```
string input = textBox1.Text;
StringBuilder output = new StringBuilder(input.Length);
bool inATag = false;

for (var i = 0; i < input.Length; i++) {
    if (!inATag && input[i] != '>' && input[i] != '<') {
        output.Append(input[i]);
    } else if (input[i] == '<') {
        inATag = true;
    } else if (input[i] == '>') {
        inATag = false;
    }
}

textBox2.Text = output.ToString(); 
```

为了进一步解释发生了什么，我一次遍历输入字符串一个字符。如果我找到一个开场`<`，我会进入一种状态，在我找到闭幕之前，我不会将任何输入添加到输出中`>`。

我生成输出字符串的方式是使用`StringBuilder`to 进行字符串连接，这比使用`string output += input[i]`. 不建议简单地使用 a`string`作为输出变量类型，因为每次将 2 个字符串连接在一起时，它都会分配一个全新且不同的字符串。随着时间的推移，这将影响性能。使用 a `StringBuilder`，只会分配一个字符串对象，并且不会在循环的每次迭代中创建新的字符串对象。

微软已经[写了一个很好的解释为什么要使用 a`StringBuilder`](http://msdn.microsoft.com/en-us/library/2839d5h5%28v=vs.71%29.aspx)，但一般规则是你应该在任何时候发现自己在循环内连接字符串时使用 StringBuilder 。

相反，对于已知输入字符串总是很小的情况，[最好**不要**使用`StringBuilder`](http://improvingsoftware.com/2011/02/11/concatenating-strings-youre-still-doing-it-wrong/). `StringBuilder`如果您仅连接少量字符串，则创建无法克服的对象会受到惩罚。例如，如果您希望只执行 10 个字符串连接，则使用 StringBuilder 将被视为反模式。但是，如果您要连接数百个字符串，就像在这个示例中一样，它*是*使用`StringBuilder`.

# shipping - Zen-Cart 中的 UPS 运输模块

> ID：13946264
> 
> 赞同：1
> 
> 时间：2012-12-19T05:49:33.077
> 
> 标签：shipping, zen-cart, ups

我需要在我的 Zen-Cart 网站中集成 UPS 运输 API。我试图找到一个模块，但我找不到任何适合我需要的模块。我需要能够从网站获取费率、安排取件和打印标签。如果有人使用过 Zen-Cart 的 UPS 运输模块，请引导我找到我将处理的适当资源。感谢帮助！

我的 Zen-cart 版本是 1.5.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:02:01.310

您可以在 www.zen-cart.com/plugins 的运输模块类别中找到适用于 UPS 费率报价的 Zen Cart 运输模块。

您可能必须编写自己的界面来安排取件和打印相应的文件，因为这些是特定于承运人的。

# tcl - 查找在哪个 interp 中

> ID：13946272
> 
> 赞同：0
> 
> 时间：2012-12-19T05:50:21.643
> 
> 标签：tcl

我正在调试一些使用子解释器的 Tcl 代码，并且不熟悉代码，因此可以方便地撒一些“放置”来显示当前解释器的路径，以了解代码正在做什么。Tcl 8.4 中有没有办法确定正在运行哪个解释器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:24:21.947

不，没有办法只收集信息（这将违反隔离原则）。但是您可以在创建子解释器之后将这些信息传递给它们：

```
set i [interp create]
$i eval [list set ::myInterpName $i] 
```

# ruby-on-rails - 是否可以将销毁操作添加到 _form.html.erb 而不是 index.html.erb

> ID：13946273
> 
> 赞同：1
> 
> 时间：2012-12-19T05:50:26.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scaffolding

如果我做脚手架，它会自动在 index.html.erb 中进行销毁操作。
如果我想将此操作移至 _form.html.erb 怎么办？
而且我想让它只在编辑模式（example.com/books/1212/edit）
而不是在新模式（example.com/books/new）期间出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:11:23.293

我认为这会对你有所帮助

*模型*

```
class Job < ActiveRecord::Base
  attr_accessible :delete_flag #with other attributes
  attr_accessor :delete_flag
end 
```

*在你看来 (_form)*

```
<%= form_for(@job) do |f| %>
  #other code
  <%= f.text_field :delete_flag%>
  <div class="actions">
    <%= f.submit %>
    <%= f.submit "Delete",{:class => "delete_button"} %>
  </div>
<% end %> 
```

*咖啡脚本*

```
jQuery ->
  $('#new_job').submit -> 
    #capture your delete button click
    $('#job_delete_flag').val("1") 
```

在您的控制器中，您将获得参数 as `:delete_flag`，并且从那里您可以

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"5oWQU+w0jVCQlw8wLvCyKajbBSKpK2sv6RMkSGTE2H8=", "job"=>{"delete_flag"=>"1"}, "commit"=>"Delete"} 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:02:26.590

这是可能的，但请确保当您单击删除按钮时，它不会提交表单提交操作。

您可以考虑使用`:remote => true`删除链接，您可以使用以下方法检查记录是新的还是现有的：

```
<Object>.new_record? 
```

例如：如果我有一个名为 Job 的模型

```
Job.first.new_record? #=> false

Job.new.new_record?   #=> true 
```

例如：类似（未测试：D，只是为了给你一个想法）

```
<%= form_for(@job) do |f| %>
  #your form content
  <%= f.submit %>
  <%= (link_to 'Destroy', @job, :remote => true, method: :delete, data: { confirm: 'Are you sure?' }) unless @job.new_record? %>
<% end %> 
```

# java - 弹簧注入值

> ID：13946278
> 
> 赞同：3
> 
> 时间：2012-12-19T05:50:50.503
> 
> 标签：java, spring, javabeans, inject

我对春天很陌生，并开始使用。我有一个要求，我有类似地区..US，UK 之类的属性

```
Regions
-------
US
UK 
```

当我读到美国时，它具有类似的价值观

```
US
----
(KEY)primary----VALUE(primaryValue)
(KEY)secondary----VALUE(secondaryValue) 
```

. . 相似地

```
UK
--
(KEY)primary----VALUE(primaryValue)
(KEY)secondary----VALUE(secondaryValue) 
```

. . 并且区域可能会随着需求的变化以及其下方的键值对而增加

有人提示我，所以我可以继续提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:55:44.650

您需要创建两个 bean a`List`和 a `Map`，换句话说`List<Map>`就是您需要

```
<bean id="regions" class="java.util.ArrayList">
    <constructor-arg>
        <list>
            <ref bean="usMap" />
            <ref bean="ukMap" />                
        </list>
    </constructor-arg>
</bean> 
```

和

```
<util:map id="usMap" map-class="java.util.HashMap">
    <entry key="primary" value="someValue"/>
    <entry key="secondary" value="someValue"/>
</util:map> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T05:55:05.773

您可以根据区域制作不同的属性，当服务器启动时，所有属性文件将加载。您可以制作 PropertiesFileReader.java 文件，该文件将读取您的属性。

# matlab - 等待声音结束

> ID：13946280
> 
> 赞同：5
> 
> 时间：2012-12-19T05:50:53.407
> 
> 标签：matlab, audio, wait

我在 Matlab 中使用声音命令播放声音，我希望程序等到它完成播放声音后再执行下一个命令。我该怎么做？

```
>>tic  
>>sound(signal,Fs)  
>>wait??    
>>b=toc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T19:27:05.030

您可以使用音频播放器功能：

```
%Create player object
player = audioplayer(signal, Fs);
%play sound
play(player)
while( strcmp(player.running,'on') )
{
  % Waiting for sound to finish
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-23T18:51:29.993

我遇到了类似的问题并尝试使用 Estaban 建议的答案，但我的 while 循环不正确（我是新手程序员）并且脚本一直挂起。最终，我偶然发现了播放[阻止](https://stackoverflow.com/questions/9702454/matlab-audioplayer)功能，它似乎完全符合 OP 的要求——暂停代码，直到播放器完成播放声音。因此，要修改 Esteban 之前的答案，请使用“playblocking”功能代替“play”功能。那么就不需要While循环了！

# ios - 播放 youtube 视频时如何访问 ios 媒体播放器实例

> ID：13946281
> 
> 赞同：1
> 
> 时间：2012-12-19T05:50:56.873
> 
> 标签：ios, uiwebview, youtube, media-player, mpmediaplayercontroller

我使用以下功能在 iPhone 中使用 UIWebView 播放 youtube 视频

```
 - (void)embedYouTube {

       videoHTML = [NSString stringWithFormat:@"\
             <html>\
             <head>\
             <style type=\"text/css\">\
             iframe {position:absolute; top:50%%; margin-top:-130px;}\
             body {background-color:#000; margin:0;}\
             </style>\
             </head>\
             <body>\
             <iframe width=\"560\" height=\"315\" src=\"http://www.youtube.com/embed/xxxxxxxxxxxxx\" frameborder=\"0\" allowfullscreen></iframe>\
             </body>\
             </html>"];

        [videoView loadHTMLString:videoHTML baseURL:nil];
    } 
```

通过这种方法，视频将在 iOS 媒体播放器中播放。我想在播放视频时自动隐藏控制器。问题是如何访问媒体播放器实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:01:05.167

我认为您可以尝试 Subview 概念，以访问 MoviePlayercontroller。请[在此处](https://gist.github.com/2308668)参考这篇文章。

# c - 如果我将非空终止缓冲区作为第一个参数传递给 strstr，会发生什么情况？

> ID：13946296
> 
> 赞同：1
> 
> 时间：2012-12-19T05:52:25.660
> 
> 标签：c, string, null-terminated

据我了解，该函数`char *strstr(const char *s1, const char *s2);`在以空字符结尾的字符串 s1 中搜索以空字符结尾的字符串 s2。

假设我传递了一个以空结尾的字符串 s2，但是作为 s1 传递的缓冲区不是以空结尾的，如果字符串 s2 不存在于 s1 中会发生什么情况？函数 strstr 将从 s1 的起始地址开始继续搜索 s2，直到找到一些 '\0'。但是，假设它根本找不到`'\0'`？它会访问一些受保护或禁止的内存区域并崩溃吗？

我知道这是一种未定义的行为，但根据您的经验，可能是什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T05:56:01.373

> 我知道这是一个未定义的行为

你的问题到此结束。因为它是UB，所以没有人可以肯定地告诉你**会**发生什么。是的，它可能会导致访问冲突和转储核心。它可能会不小心在内存中的某个地方遇到一个 0 并停在那里。它也可能找到子字符串（机会很小）。或者它可能会导致恶魔从你的鼻子里飞出来。

# sql - 左连接没有结果

> ID：13946297
> 
> 赞同：3
> 
> 时间：2012-12-19T05:52:36.033
> 
> 标签：sql, sql-server, join, left-join

这是两张表。

tbl_Invoice

![发票](../Images/18eb23831f7094ed41031d48251b4312.png)

tbl_Payment

![支付](../Images/957c550a15511e6e44fa901331541c7d.png)

**我想要的是`Pending Invoices`一个特定的客户。**

现有查询如下：

```
Select * from tbl_Invoice I 
    left join tbl_payment P on I.client_id = P.client_id
    left join tbl_client C on I.client_id = C.client_id
    where I.invoice_Id not in (P.invoice_Id) 
    and I.client_id = 8 
```

但它给出了空白结果，因为付款表是空白的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T05:55:52.747

您需要将条件从移动`WHERE`到`ON`：

```
Select * from tbl_Invoice I 
left join tbl_payment P on (I.client_id = P.client_id 
 AND p.invoice_id <> I.invoice_Id)
left join tbl_client C on I.client_id = C.client_id

WHERE I.client_id = 5 
```

# asp.net - 已达到最大连接池大小

> ID：13946300
> 
> 赞同：0
> 
> 时间：2012-12-19T05:53:05.293
> 
> 标签：asp.net, iis-7, web-config

我的应用程序中出现以下错误。

> “超时已过期。在从池中获取连接之前已经过了超时期限。这可能是因为所有池连接都在使用中并且已达到最大池大小。”

没有任何想法，我只是在 web.config 中将编译 debug="true" 更改为编译 debug="false"。

问题突然消失了。编译调试和池大小之间有什么联系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:10:10.783

它看起来像一个连接泄漏问题。使用后始终关闭/处理连接很重要。否则它们不会返回到连接池（或返回太慢）。

确保您始终使用带有连接的 using 语句，例如：

```
using (SqlConnection connection = new SqlConnection(connectionString))  
{  
    SqlCommand command = connection.CreateCommand();  

    command.CommandText = "mysp_GetValue";  
    command.CommandType = CommandType.StoredProcedure;  

    connection.Open();  
    object ret = command.ExecuteScalar();  
} 
```

[更多信息在这里](http://www.w3enterprises.com/articles/using.aspx)

# perl - 查找文件中所有出现的字符串并在 Perl 中打印其行号

> ID：13946302
> 
> 赞同：2
> 
> 时间：2012-12-19T05:53:14.287
> 
> 标签：perl, string-matching, line-numbers

我有一个包含 400000 行的大文件，每行包含许多由制表符分隔的关键字。

而且我还有一个文件，其中包含要匹配的关键字列表。假设此文件充当查找。

因此，对于查找表中的每个关键字，我需要在给定文件中搜索所有出现的关键字。并且应该打印出现的行号。

我试过这个

```
#!usr/bin/perl
use strict;
use warnings;

my $linenum = 0;

print "Enter the file path of lookup table:";
my $filepath1 = <>;

print "Enter the file path that contains keywords :";
my $filepath2 = <>;

open( FILE1, "< $filepath1" );
open FILE2, "< $filepath2" ;

open OUT, ">", "SampleLineNum.txt";

while( $line = <FILE1> )
{
    while( <FILE2> ) 
    {
        $linenum = $., last if(/$line/);
    }
    print OUT "$linenum ";
}

close FILE1; 
```

这给出了关键字的第一次出现。但我需要所有的出现，并且关键字应该完全匹配。

完全匹配面临的问题是，例如我有关键字“hello”和“hello world”

如果我需要匹配“hello”，它会返回包含“hello world”的行号，我的脚本也应该只匹配“hello”并给出它的行号。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T09:16:27.997

这是一个匹配所有关键字的每次出现的解决方案：

```
#!usr/bin/perl
use strict;
use warnings;

#Lexical variable for filehandle is preferred, and always error check opens.
open my $keywords,    '<', 'keywords.txt' or die "Can't open keywords: $!";
open my $search_file, '<', 'search.txt'   or die "Can't open search file: $!";

my $keyword_or = join '|', map {chomp;qr/\Q$_\E/} <$keywords>;
my $regex = qr|\b($keyword_or)\b|;

while (<$search_file>)
{
    while (/$regex/g)
    {
        print "$.: $1\n";
    }
} 
```

关键字.txt：

```
hello
foo
bar 
```

搜索.txt：

```
plonk
food is good
this line doesn't match anything
bar bar bar
hello world
lalalala
hello everyone 
```

输出：

```
4: bar
4: bar
4: bar
5: hello
7: hello 
```

**解释：**

这将创建一个匹配关键字文件中所有关键字的正则表达式。

`<$keywords>`- 当在列表上下文中使用它时，它返回文件所有行的列表。

`map {chomp;qr/\Q$_\E/}`- 这会从每一行中删除换行符并将`\Q...\E`引号文字正则表达式运算符应用于每一行（这确保如果您有像“foo.bar”这样的关键字，它将把点视为文字字符，而不是正则表达式元字符）。

`join '|',`- 将结果列表连接成一个字符串，用竖线字符分隔。

`my $regex = qr|\b($keyword_or)\b|;`- 创建一个如下所示的正则表达式：

`/\b(\Qhello\E|\Qfoo\E|\Qbar\E)\b/`

此正则表达式将匹配您的任何关键字。`\b`是单词边界标记，确保只有整个单词匹配：`food`不再匹配`foo`。括号捕获匹配的特定关键字`$1`。这就是输出如何打印匹配的关键字。

我更新了解决方案以匹配给定行上的每个关键字，并且只匹配完整的单词。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T05:54:18.247

这是更大的一部分吗？因为这是一个单衬里`grep`

```
grep -n hello filewithlotsalines.txt

grep -n "hello world" filewithlotsalines.txt 
```

`-n`在匹配`grep`行之前首先显示行号。你可以做`man grep`更多的选择。

我在这里假设您使用的是 linux 或 *nix 系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T19:55:57.617

我对你的要求有不同的解释。似乎您可能想要维护一个行号列表，其中在“关键字”文件的行上可以找到查找表中的某些条目。这是一个示例查找表：

```
hello world
hello
perl
hash
Test
script 
```

还有一个制表符分隔的“关键字”文件，其中可以在一行中找到多个关键字：

```
programming tests
hello   everyone
hello   hello world perl
scripting   scalar
test    perl    script
hello world perl    script  hash 
```

鉴于上述情况，请考虑以下解决方案：

```
use strict;
use warnings;

my %lookupTable;

print "Enter the file path of lookup table: \n";
chomp( my $lookupTableFile = <> );

print "Enter the file path that contains keywords: \n";
chomp( my $keywordsFile = <> );

open my $ltFH, '<', $lookupTableFile or die $!;

while (<$ltFH>) {
    chomp;
    undef @{ $lookupTable{$_} };
}

close $ltFH;

open my $kfFH, '<', $keywordsFile or die $!;

while (<$kfFH>) {
    chomp;
    for my $keyword ( split /\t+/ ) {
        push @{ $lookupTable{$keyword} }, $. if defined $lookupTable{$keyword};
    }
}

close $kfFH;

open my $slFH, '>', 'SampleLineNum.txt' or die $!;

print $slFH "$_: @{ $lookupTable{$_} }\n"
  for sort { lc $a cmp lc $b } keys %lookupTable;

close $slFH;

print "Done!\n"; 
```

输出到`SampleLineNum.txt`：

```
hash: 6
hello: 2 3
hello world: 3 6
perl: 3 5 6
script: 5 6
Test: 
```

该脚本使用数组哈希 (HoA)，其中键是查找表中的条目，关联的值是对在“关键字”文件的行中找到该条目的行号列表的引用。哈希`%lookupTable`是通过对空列表的引用来初始化的。

'keywords' 文件的每一行都`split`在分隔选项卡上，如果在 中定义了相应的条目`%lookupTable`，则将行号`push`添加到相应的列表中。完成后，对`%lookupTable`键进行不区分大小写的排序并写入`SampleLineNum.txt`，以及找到条目的相应行号列表（如果有）。

输入的文件名没有完整性检查，因此请考虑添加这些。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T06:43:28.647

要查找所有匹配项，您需要读入关键字，然后遍历关键字以查找每一行的匹配项。这是我修改后使用数组在行中查找关键字的内容。另外，我添加了一个计数器来计算行号，然后如果有匹配项打印出行号。即使没有匹配项，您的代码也会为每一行打印一个项目。

```
#!usr/bin/perl
use strict;
use warnings;

my $linenum = 0;

print "Enter the file path of lookup table:";
my $filepath1 = <>;

print "Enter the file path that contains keywords :";
my $filepath2 = <>;

open( FILE1, "< $filepath1" );
open FILE2, "< $filepath2" ;

# Read in all of the keywords
my @keywords = <FILE2>; 

# Close the file2
close(FILE2);

# Remove the line returns from the keywords
chomp @keywords;

# Sort and reverse the items to compare the maximum length items
# first (hello there before hello)
@keywords = reverse sort @keywords;

foreach my $k ( @keywords)
{
  print "$k\n";
}
open OUT, ">", "SampleLineNum.txt";
my $line;
# Counter for the lines in the file
my $count = 0;
while( $line = <FILE1> )
{
    # Increment the counter for the number of lines
    $count++;
    # loop through the keywords to find matches
    foreach my $k ( @keywords ) 
    {
        # If there is a match, print out the line number 
        # and use last to exit the loop and go to the 
        # next line
        if ( $line =~ m/$k/ ) 
        {
            print "$count\n";
            last;
        }
    }
}

close FILE1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T09:18:52.513

我认为有一些类似的问题。您可以查看：

*   [Perl：从数组中搜索关键字的文本文件](https://stackoverflow.com/questions/10270768/perl-search-text-file-for-keywords-from-array)

*   [如何在 Perl 中搜索多个文件以查找字符串？](https://stackoverflow.com/questions/1512729/how-can-i-search-multiple-files-for-a-string-in-perl)

[File::Grep](http://search.cpan.org/~mneylon/File-Grep-0.02/Grep.pm)模块很有趣。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T09:19:41.850

正如其他人已经给出了一些 perl 解决方案，我会建议你，也许你可以在这里使用 awk。

```
> cat temp
abc
bac
xyz

> cat temp2
abc     jbfwerf kfnm
jfjkwebfkjwe    bac     xyz
ndwjkfn abc kenmfkwe    bac     xyz 
```

```
> awk 'FNR==NR{a[$1];next}{for(i=1;i<=NF;i++)if($i in a)print $i,FNR}' temp temp2
abc 1
bac 2
xyz 2
abc 3
bac 3
xyz 3
> 
```

# axapta - 如何在任何形式的按钮的帮助下打开文本文件？

> ID：13946305
> 
> 赞同：1
> 
> 时间：2012-12-19T05:53:26.033
> 
> 标签：axapta, dynamics-ax-2012, ax

我有一个文本文件（记事本）放在 AX 2012 AOT 的资源节点下。现在，我的任务是在任何形式的按钮的帮助下打开这个文件。

[http://msdn.microsoft.com/en-us/library/cc967403.aspx](http://msdn.microsoft.com/en-us/library/cc967403.aspx)

上面的链接在创建用于写入或读取的临时文件时很有帮助。此外，AX 2012 中有一个名为“smmDocuments”的表单，我们可以在其中放置我们使用的文本文件，我们可以从那里轻松打开该文件。我研究并发现AX 2012中有一个名为“DocuAction”的类可以对文本文件执行操作。但我无法理解那件事是如何运作的。

///////////////////ing我把它变成了：

```
void clicked()
{
    //super();
   str sTempPath,
        sFileName = "notes.txt";
    SysResource::saveToTempFile(SysResource::getResourceNode(resourceStr(flow_for_address_book_txt)), false, "notes.txt");
    sTempPath = WinAPI::getTempPath();
    WinAPI::shellExecute(sTempPath+sFileName);
} 
```

谢谢简 B。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:39:38.253

您没有描述要对文件执行的操作。

假设您想使用默认程序向用户显示文件，然后执行以下操作：

```
void clicked()
{
    SysResource::saveToTempFile(SysResource::getResourceNode(resourceStr(MyImage), false, "notes.txt");
    WinAPI::shellExecute("notes.txt");
} 
```

使用临时文件而不是硬编码名称。

您还可以在表单控件中显示文本：

```
void clicked()
{
    container con = SysResource::getResourceNodeData(SysResource::getResourceNode(resourceStr(MyImage), false, "notes.txt");
    infoStringControl.text(conpeek(con,1)); //Not sure how to use the container!
} 
```

# java - 无法使用 Jasper 和 ireport 在 java 中获取 .pdf 格式的报告

ID：13946306

赞同：1

时间：2012-12-19T05:53:59.090

标签：java, jasper-reports

# c# - 需要一些关于在 aspx 页面中使用 <% 的详细信息

> ID：13946311
> 
> 赞同：1
> 
> 时间：2012-12-19T05:54:39.813
> 
> 标签：c#, asp.net

我是初级程序员。我在 aspx 页面中使用 C# 变量。

我已经在 aspx 页面中看到了很多**<%的用法。**

我需要详细说明何时在什么要求中使用 <%

```
<% 'When to use this?' %>
<%= 'When to use this?' %>
<%@ 'When to use this?' %>
<%# 'When to use this?' %> 
```

我正在寻找一个有用的链接，但没有找到任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:01:26.980

我希望这会有所帮助.......

[http://www.codeproject.com/Articles/384425/Server-side-Delimiters-in-ASP-NET](http://www.codeproject.com/Articles/384425/Server-side-Delimiters-in-ASP-NET) `

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:09:07.633

您可以使用名称“asp.net 中的分隔符”进行搜索，谷歌可能会给您很多结果。

**<% %>**是在页面渲染阶段执行的服务器代码，它可以执行块内编写的语句，有助于在运行时与服务器端交互。

```
<% { Response.Write("Hello !"; }%> 
```

同样明智的是，如果您的页面中有脚本功能并且您想调用该功能，您可以使用它

```
<% =Callfunc()%> 
```

默认情况下，在所有页面和用户控件中，您都可以看到指令。更多在这里

[MSDN](http://msdn.microsoft.com/en-us/library/xz702w3e%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:09:52.220

`<% 'When to use this?' %>`与经典 ASP 类似，用于在 ASPX 页面中添加服务器端代码，例如：

```
<% for (int i=0; i < 10; i++) { %>
    <p>I am added to the page 10 times</p>
<% } %> 
```

* * *

`<%= 'When to use this?' %>`与上面的示例类似，只有 = 允许您“注入”或引用表达式或变量，而不是代码块。下面的例子是指`MyAnchor`可以在后面的代码中声明的。`<a href='<%= MyAnchor %>'></a>`

* * *

`<%@ 'When to use this?' %>`这用于页面和控件声明：`<%@ Page Language="vb" AutoEventWireup="false"`

* * *

`<%# 'When to use this?' %>`这用于数据绑定

```
<asp:GridView ID="gvMyGrid" runat="server">
    <Columns>
        <asp:TemplateField HeaderText="E-mail" SortExpression="Email">
            <ItemTemplate>
                <asp:HyperLink runat="server" Text='<%#Eval("Email").ToString()%>' NavigateUrl='<%#Eval("Email", "mailto:{0}").ToString() %>'></asp:HyperLink>
             </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

# javascript - 等到某些代码运行

> ID：13946312
> 
> 赞同：0
> 
> 时间：2012-12-19T05:54:50.140
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:57:39.937

有一个参数[`.fadeIn()`](http://api.jquery.com/fadeIn/)可以解决这个问题。

```
$('ul#portfolio li.hidden').fadeIn('slow', function()
{
    // Fade has finished, continue here.
    //
    //

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T05:57:25.643

给它一个回调函数。尝试：

```
jQuery(this).fadeOut('normal', function(){
    $(this).addClass('hidden'); 
}) 
```

**如果必须多次执行，请使用：**

```
jQuery('ul#portfolio li').each(function() {  
    if(!jQuery(this).hasClass(filterVal)) {  
        jQuery(this).addClass('hidden');  
    } else {  
        jQuery(this).removeClass('hidden');  
    }  
});  

$('ul#portfolio li.hidden').fadeOut('normal', function(){
    //Finished
});
$('ul#portfolio li:not("hidden")').fadeIn('slow', function(){
    //Finished
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:03:14.283

所以我想我发现了如何使用[`.promise()`](http://api.jquery.com/promise/)

我的代码看起来像这样：

```
jQuery('ul#portfolio li').promise().done(function()
{
    jQuery('ul#portfolio li').each(function()
    {
        console.log(jQuery(this).attr('class') + '-' + jQuery(this).css('display'));

    });

}); 
```

# php - 设置 config.php 的路径时出现错误

> ID：13946313
> 
> 赞同：0
> 
> 时间：2012-12-19T05:54:49.777
> 
> 标签：php, ckeditor

> **可能重复：**
> [PHP：警告：包括未能在 Windows 上打开流没有这样的文件或目录](https://stackoverflow.com/questions/8525423/php-warning-include-failed-to-open-stream-no-such-file-or-directory-on-windows)

我的主文件夹是播放。它包含 config.php 和登录文件夹

login 文件夹有一个名为的子文件夹`ckeditor`，它包含子文件夹 _samples。它有我的 php 文件 selectnew.php

我想将 config.php 包含到 selectnew.php 中。

我设置的路径如下：

```
include('play\config.php'); 
```

我也试过

```
include('play/config.php'); 
```

但结果如下：

```
Warning: include(play/config.php) [function.include]: failed to open stream: No such file or directory in D:\wamp\www\play\logins\ckeditor\_samples\selectnew.php on line 7

Warning: include() [function.include]: Failed opening 'play/config.php' for inclusion (include_path='.;C:\php5\pear') in D:\wamp\www\play\logins\ckeditor\_samples\selectnew.php on line 7 
```

我的文件夹

```
play  folder
    --config.php
   logins folder
      ckeditor  folder
              _samples folder
           selectnew.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:00:11.090

您必须从当前目录向上移动 2 个文件夹（假设您的 _samples 包含您的 selectnew.php）

```
include("../../config.php"); 
```

..或者您可以使用这种方法从根文件夹遍历

```
include($_SERVER['DOCUMENT_ROOT']."config.php"); 
```

顺便说一句，您的代码不起作用，因为您使用的是当前文件目录的相对路径。所以基本上，当你做 include("play/config.php") 代码会尝试包含这个文件

> 播放/ckeditor/_samples/play/config.php

这不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:00:41.597

走这条路`D:\wamp\www\play\logins\ckeditor\_samples\selectnew.php`，你应该使用

```
include('../../config.php'); 
```

倒退了一步`../`。因此，如果您返回两次，您将在`play`文件夹中。

# jquery - 我可以根据属性的第一部分选择一个链接，然后向它发送一个点击事件吗？

> ID：13946316
> 
> 赞同：0
> 
> 时间：2012-12-19T05:54:59.453
> 
> 标签：jquery, jquery-selectors

我正在使用以下选择器：

```
$('a[data-href="/C003Q/History"]').click(function(){        
   alert("clicked");
});​ 
```

这将找到具有上述 data-href 属性的链接并单击它。但是我需要做一些稍微不同的事情。我所拥有的是一个变量，其中存储了以下内容：

```
/Admin/Contents/Edit?pk=0103000&rk=0047 
```

如何获取 rk= 之后的四个字符并搜索具有以“/C”开头的 data-href 后跟这四个字符的链接并向其发送点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:56:45.580

您需要使用 split 并同时使用 start with 和 end with 选择器。

```
arr = url.split('rk=');
result = arr[arr.length-1];   

$('a[data-href^="/C"][data-href$=' + result + ']').click(function(){
   alert("clicked");
}); 
```

# android - 如何在 TextView 中的文本下放置图像

> ID：13946323
> 
> 赞同：1
> 
> 时间：2012-12-19T05:55:58.090
> 
> 标签：android, textview, watermark

如何将图像放在`TextView`. 例如，我想在**我****的**. 我真的想为 TextView 中的部分文本显示可绘制而不是背景颜色。ImageSpan 可以吗？**`TextView`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:58:22.100

只需添加`android:drawablebottom="@drawable/bread"`您的文本视图

如果您希望它像水印一样，请按如下方式使用 ImageButton，确保使用类似图标的小图像

```
<ImageButton
    android:layout_width="140dp"
    android:layout_height="wrap_content"
    android:src="@drawable/bread" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:02:04.423

您可以简单地将[android:drawablebottom="@drawable/yourimage"](http://developer.android.com/reference/android/widget/TextView.html)添加到 xml 中的 TextView

或者Java中的等价物是

`public void setCompoundDrawablesWithIntrinsicBounds (Drawable left, Drawable top, Drawable right, Drawable bottom)`

用法：

```
myText.setCompoundDrawablesWithIntrinsicBounds(null,null,null, myNewDrawable); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:22:58.393

编写下面的代码并尝试

在您的 XML 文件中

```
<Button
    android:layout_width="140dp"
    android:layout_height="wrap_content"
    android:src="Bread" android:id="@+id/mBtn1" /> 
```

在您的 Java 文件中。

```
Button mBtn1 = (Button) findViewById(R.id.mBtn1);
Drawable d = getResources().getDrawable(R.drawable.bread);
mBtn1.setCompoundDrawablesWithIntrinsicBounds(null, null, null, d); 
```

它会解决你的问题。**

# iphone - iOS is exit(0) 拒绝

> ID：13946325
> 
> 赞同：-4
> 
> 时间：2012-12-19T05:56:03.477
> 
> 标签：iphone, ios6, app-store

我的申请因以下原因被拒绝，因为它是我的第一个应用程序。我应该做些什么改变才能继续。请给我一些解决方案？

> 10.1：应用程序必须遵守 Apple iPhone 人机界面指南和 Apple iPad 人机界面指南中解释的所有条款和条件
> 
> 我们发现您的应用包含一个用于退出应用的 UI 控件。这不符合 App Store 审查指南所要求的 iOS 人机界面指南。
> 
> 随时准备停止
> 
> 当人们按下 Home 按钮打开不同的应用程序或使用设备功能（例如电话）时，iOS 应用程序会停止。特别是，人们不会点击应用程序关闭按钮或从菜单中选择退出。为了提供良好的停止体验，iOS 应用程序应该：
> 
> *   尽快并尽可能多地保存用户数据，因为退出或终止通知可能随时到达。
>     
>     
> *   停止时保存当前状态，尽可能详细地保存，以便人们在再次启动应用程序时不会丢失上下文。例如，如果您的应用显示滚动数据，请保存当前滚动位置。”
>     
>     
> 
> 删除任何退出应用程序的机制是合适的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:16:14.543

**不要提供退出应用程序的按钮或选项。**

如果您这样做，苹果将拒绝您的申请。

此外，如果您在某个时候从应用程序中调用 exit(0)，Apple 会将其视为崩溃。

所以永远不要这样做，您的应用程序将被拒绝。

# c# - 在 Visual Studio 2010 Professional 中找不到任何资源

> ID：13946329
> 
> 赞同：1
> 
> 时间：2012-12-19T05:56:32.707
> 
> 标签：c#, vb.net, visual-studio-2010, resources

我正在尝试在 Visual Basic 项目中使用资源。它总是给予`Could not find any resources appropriate for the specified culture or the neutral culture`。

测试：我在探索的解决方案中添加了一个 Vb 表单，后来我在该表单中添加了一个图片框，后来我添加了该资源文件。在我运行那个项目之后......我找不到资源。

我在其他系统中使用了相同的项目。那工作正常。（我不确定 Visual Studio 中是否缺少任何文件）

如果我在 c# 中这样做 ..那在我的系统上工作。

谁能告诉我是否需要修复或安装visual studio

# c - RL_ARM 的 TCP 模式下 close 和 abort 的区别

> ID：13946334
> 
> 赞同：0
> 
> 时间：2012-12-19T05:56:53.333
> 
> 标签：c, networking, embedded, posix

TCP的关闭和TCP的中止有什么区别？下面是一个例子：

```
..//init the socket FD
while(1)
{
switch(socket_state)
{
case 0:
if(0 != FD)
{
    tcp_connect(FD,rem_ip, 502, 0);
    socket_state = 1;
    break;
}
case 2:
    if(TRUE == wait_ack)
    {
            return;
    }
    ..//sending data
    wait_ack = TRUE;
    break;
case 3:
{
    if(0 != FD)
    {
        tcp_close(FD);   //or tcp_abort(FD);
        tcp_release_socket(FD);
        soc_state = 0;
    }
}
     break;
} 
```

}

tcp_callback：

```
U16 Listener(U8 socket,U8 event,U8* ptr,U16 par)
switch(event)
{
    case TCP_EVT_CONNECT:
        soc_state = 2;
        break;
    case TCP_EVT_ACK:
        wait_ack = __FALSE;
        break;
    case TCP_EVT_ABORT:
        soc_state = 3;
        break;
}
return (1); 
```

现在，当我关闭服务器时，我的客户端将收到一条`TCP_EVT_ABORT`消息，并设置`soc_state = 3`. 在 while(1) 循环中，switch 看到这一点并进入案例 3。我希望它关闭还是中止？在下一次循环迭代中，我回到状态0。为什么文件描述符仍然不是0？如何正确使用中止或关闭机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:14:21.143

有点难理解，当你使用`tcp_get_socket`时，socket被分配，它的状态是`TCP_STATE_CLOSED`。之后，`tcp_connect`用来连接远程服务器。它的状态会变成。`TCP_STATE_SYN_REC`当连接建立时，状态变成`TCP_STATE_CONNECT`。当服务器端关闭时，客户端将收到 EVENT : `TCP_EVT_ABORT`。我使用 . 关闭当前套接字`tcp_release_socket`。同样当数据发送完成时，使用此函数关闭套接字。下一次，我们应该使用旧套接字调用`tcp_get_socket`之前。`tcp_connect`简而言之，每一个连接，每一个`tcp_get_socket`。

# ios - CALayer 上变换属性的 CAKeyFrameAnimation 未按预期工作

> ID：13946335
> 
> 赞同：1
> 
> 时间：2012-12-19T05:57:06.027
> 
> 标签：ios, uiscrollview, calayer, cakeyframeanimation, translate-animation

我已经为此工作了一段时间，并彻底搜索了一个解决方案，但无济于事。这是我想要做的。

我有一个 UIScrollView，用户可以在其上缩放和平移 5 秒。我有一个单独的 CALayer，它没有分层在 UIScrollView 之上。我想缩放和翻译这个 CALayer 的内容以反映 UIScrollView 上发生的缩放和平移。我想通过关键帧动画来实现这一点`CAKeyFrameAnimation`。当我将其放入代码中时，缩放按预期进行，但内容的位置偏移不正确。

这是我在代码中的做法。假设`UIScrollView`委托将缩放比例和内容偏移量传递给以下方法：

```
// Remember all zoom params for late recreation via a CAKeyFrameAnimation
- (void) didZoomOrScroll:(float)zoomScale
           contentOffset:(CGPoint)scrollViewContentOffset {

    CATransform3D scale = CATransform3DMakeScale(zoomScale, zoomScale, 1);
    CATransform3D translate = CATransform3DMakeTranslation(-scrollViewContentOffset.x, 
                                                           -scrollViewContentOffset.y, 0);
    CATransform3D concat = CATransform3DConcat(scale, translate);

    // _zoomScrollTransforms and _zoomScrollTimes below are of type NSMutableArray
    [_zoomScrollTransforms addObject:[NSValue valueWithCATransform3D:concat]];

    // secondsElapsed below keeps track of time
    [_zoomScrollTimes addObject:[NSNumber numberWithFloat:secondsElapsed]];
}

// Construct layer animation
- (void) constructLayerWithAnimation:(CALayer *)layer {

    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"transform"];
    animation.duration = 5.0;
    animation.values = _zoomScrollTransforms;

    // Adjust key frame times to contain fractional durations
    NSMutableArray *keyTimes = [[NSMutableArray alloc] init];
    for( int i = 0; i < [_zoomScrollTimes count]; i++ ) {
          NSNumber *number = (NSNumber *)[_zoomScrollTimes objectAtIndex:i];
          NSNumber *fractionalDuration = [NSNumber numberWithFloat:[number          floatValue]/animation.duration];
         [keyTimes addObject:fractionalDuration];
    }
    animation.keyTimes = keyTimes;

    animation.removedOnCompletion = YES;
    animation.beginTime = 0;
    animation.calculationMode = kCAAnimationDiscrete;
    animation.fillMode = kCAFillModeForwards;
    [layer addAnimation:animation forKey:nil];
} 
```

当上面的图层动画时，内容被正确缩放，但位置不正确。内容似乎比我预期的要多`x`，`y`因此不能完全追溯用户在 UIScrollView 上所做的缩放/平移。

有什么想法我可能做错了吗？

# 回答

好的，我知道我做错了什么。它与 CALayer 的锚点有关。CALayers 上的变换总是应用于锚点。对于 CALayers，锚点默认为 (0.5, 0.5)。所以缩放和平移是沿着中心点进行的。另一方面，UIScrollViews 从视图的左上角给出偏移量。基本上，您可以将 UIScrollView 的锚点视为（0.0，0.0），以考虑 CGPoint 偏移值。

所以解决办法就是将CALayer的锚点设置为(0.0, 0.0)。然后一切都按预期工作。

还有其他资源以更好的方式呈现此信息。请参阅 Stackoverflow 上[类似](https://stackoverflow.com/questions/7301744/unwanted-scrolling-when-animating-zoomscale-in-uiscrollview)的另一个问题。另请参阅Apple 文档中的[这篇文章](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html)，其中详细讨论了几何中的位置、锚点和一般层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:50:40.610

您正在将平移矩阵与缩放矩阵连接起来。位移偏移的最终值将是 Offset(X, Y) = (scaleX * Tx, scaleY * Ty)。

如果您想使用 (Tx, Ty) 偏移量移动 UIView，则连接平移和缩放矩阵，如下所示：

```
CATransform3D scale = CATransform3DMakeScale(zoomScale, zoomScale, 1);
CATransform3D translate = CATransform3DMakeTranslation(-scrollViewContentOffset.x, 
                                                       -scrollViewContentOffset.y, 0);
CATransform3D concat = CATransform3DConcat(translate, scale); 
```

试试这个，让我知道它是否有效。

# javascript - 将 HTML 元素与已创建的对象绑定

> ID：13946336
> 
> 赞同：0
> 
> 时间：2012-12-19T05:57:07.227
> 
> 标签：javascript, jquery, html, kineticjs

我想使用库在画布上添加图像`Kinetic.js`

创建画布后，图像是从数据库中加载的。如何将此画布与画布之后创建的元素绑定？

**[JS小提琴](http://jsfiddle.net/j234L/)**

**HTML**

```
<!DOCTYPE HTML>
<html>
<head>
 <meta charset="utf-8">
    <title>Design</title>
 <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/v4.2.0/kinetic-v4.2.0.min.js" type="text/javascript"></script>
<style>

#wrapper{
width:300px;
height:200px;
margin:auto;
border-radius: 15px;
border: 4px solid black;
}

#container{
height:120px;
width:100%;
border:1px solid red;
}
#items, #cliparts{
height:55px;
border:1px solid green;
width:100%;
}

#items img, #cliparts img {
max-height:50px;
max-width:40px;
padding: 0 5px;
border:2px double white;
}
#items img:hover,  #cliparts img:hover{
border:2px double blue;
cursor:pointer;
}
</style>
</head>

<body>

<div id="wrapper">
  <div id="container">  </div>
  <div id="cliparts">

</div>
</body>

</html> 
```

**JavaScript**

```
$(function() {
var stage = new Kinetic.Stage({
    container: "container",
    width: 300,
    height: 100
});

var layer = new Kinetic.Layer();

var clip_group = new Kinetic.Group({
    x: 20,
    y: 10,
    draggable: true,
});                

});

   $('#cliparts').append('<img class="clips" id="clip1" src="http://www.clker.com/cliparts/b/9/8/4/12284231761400606271Ricardo_Black_Boy_-_PNG.svg.med.png">');     

  $('#clip1').live('click', function(){
       var imgObj = new Image();
     imgObj.src= 'http://www.clker.com/cliparts/b/9/8/4/12284231761400606271Ricardo_Black_Boy_-_PNG.svg.med.png';

    imgObj.onload = function(){
        var clip_image = new Kinetic.Image({
                      x: 0,
                      y: 0,
                      image: imgObj,
                      width: 150,
                      height: 138,
                      name: "image",
                    });
       // how to access the following elements
               clip_group.add(clip_image);
                layer.add(clip_group);
                stage.add(layer);
                stage.draw();  
    };     

}); 
```

​</p>

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:22:26.747

我不是一个 JQuery 人，不擅长技术术语，所以如果我在这个解释中有什么问题，请原谅，但请放心，代码会起作用；）
`$(a)`就像说 window.onload do `a`，你说`a`的是一个匿名函数。
对于匿名函数，其中的任何变量都只会在其自身范围内，而不是`window`全局范围内。
稍后您尝试访问变量，就好像它们是全局的或在窗口范围内一样。
所以......您可以将所有代码移动到该函数中，或者在该函数中使您想要在其外部访问的变量成为全局变量。
这里有几个例子......

将窗口对象传递给匿名函数并声明您想要全局的变量...

```
$(function(a) {
    a.stage = new Kinetic.Stage({
        container: "container",
        width: 300,
        height: 100
    });

    a.layer = new Kinetic.Layer();

    a.clip_group = new Kinetic.Group({
        x: 20,
        y: 10,
        draggable: true,
    });                

}(window)); 
```

[http://jsfiddle.net/j234L/1/](http://jsfiddle.net/j234L/1/)

直接针对窗口对象声明变量...

```
$(function() {
    window.stage = new Kinetic.Stage({
        container: "container",
        width: 300,
        height: 100
    });

    window.layer = new Kinetic.Layer();

    window.clip_group = new Kinetic.Group({
        x: 20,
        y: 10,
        draggable: true,
    });                

}); 
```

[http://jsfiddle.net/j234L/2/](http://jsfiddle.net/j234L/2/)

把所有东西都放在onload函数中......

```
$(function() {
    window.stage = new Kinetic.Stage({
        container: "container",
        width: 300,
        height: 100
    });

    window.layer = new Kinetic.Layer();

    window.clip_group = new Kinetic.Group({
        x: 20,
        y: 10,
        draggable: true,
    });

    $('#cliparts').append('<img class="clips" id="clip1" src="http://www.clker.com/cliparts/b/9/8/4/12284231761400606271Ricardo_Black_Boy_-_PNG.svg.med.png">');

    $('#clip1').live('click', function() {
        var imgObj = new Image();
        imgObj.src = 'http://www.clker.com/cliparts/b/9/8/4/12284231761400606271Ricardo_Black_Boy_-_PNG.svg.med.png';

        imgObj.onload = function() {
            var clip_image = new Kinetic.Image({
                x: 0,
                y: 0,
                image: imgObj,
                width: 150,
                height: 138,
                name: "image",
            });
            // how to access the following elements
            clip_group.add(clip_image);
            layer.add(clip_group);
            stage.add(layer);
            stage.draw();
        };

    });
});​ 
```

[http://jsfiddle.net/j234L/3/](http://jsfiddle.net/j234L/3/)

# python - suds.TypeNotFound：找不到类型：'ns4.SaveCRRequest'

> ID：13946340
> 
> 赞同：0
> 
> 时间：2012-12-19T05:57:19.323
> 
> 标签：python, suds

是否有人对如何调试或克服此错误有意见？

```
Traceback (most recent call last):
  File ".\move2ready.py", line 318, in <module>
    main()
  File ".\move2ready.py", line 268, in main
    success = moveToReady(prism, cr, pl_name)
  File ".\move2ready.py", line 153, in moveToReady
    retval = prism.saveChangeRequest(CR)
  File ".\move2ready.py", line 75, in saveChangeRequest
    request = self.soapclient.factory.create('ns4:SaveCRRequest')
  File "build\bdist.win32\egg\suds\client.py", line 234, in create

suds.TypeNotFound: Type not found: 'ns4:SaveCRRequest' 
```

以下是子程序

```
 def saveChangeRequest(self, CR):
    request = self.soapclient.factory.create('ns4:SaveCRRequest')
    request['ChangeRequest'] = CR
    request['UserName'] = 'admin'
    response = self.soapclient.service.SaveChangeRequest([request])
    return response['ChangeRequestId'] 
```

# asp.net - ORA-06413: 连接未打开。来自 ASP.NET 和 Oracle 10g

> ID：13946341
> 
> 赞同：2
> 
> 时间：2012-12-19T05:57:19.397
> 
> 标签：asp.net, c#-4.0, oracle10g, windows-7-x64

我正在尝试使用 oledbconnection 从 ac# asp.net Web 应用程序连接 oracle 10g 32 位并收到以下错误：

```
ORA-06413: Connection not open. 
```

它从 Windows 应用程序和 TOAD/SQL* PLUS 正确连接。

我搜索了这个问题并尝试了所有可能的解决方案（检查特殊字符），但没有一个有帮助。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:02:22.957

问题可能是您的 .exe 文件名有多个“.”，或者您的文件路径有括号“()”：

*   [https://forums.oracle.com/forums/thread.jspa?messageID=10129961](https://forums.oracle.com/forums/thread.jspa?messageID=10129961)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:01:27.410

创建连接对象后。您必须打开连接才能执行 SQL 命令。

假设您创建了一个名为 oracleConnection 的 oracle 连接对象。

然后你必须使用

```
oracleConnection.Open(); 
```

打开与您尝试连接的 oracle 数据库的连接。另一个问题可能是您的 oracle 服务可能没有运行。所以检查oracle服务是否在后台运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:35:03.280

我终于做到了。我从我的机器上卸载了 VS2010。格式化它。我再次将 VS2010 安装在 c: 中的一个新文件夹中，名为 VS2010。现在一切顺利。无论如何，谢谢大家的回复。

# highcharts - 在 Highcharts 中绘制时间序列图表而不是按图表的绘制顺序

> ID：13946344
> 
> 赞同：0
> 
> 时间：2012-12-19T05:57:31.990
> 
> 标签：highcharts

我在绘制 highcharts 示例中的时间序列图时遇到问题

```
 12/05/2012  - 100
            12/01/2012  - 200    
        12/15/2012  - 300   
            11/01/2012  - 400 
```

当我绘制图表时，其打印顺序基于数据点的顺序，但我想按时间绘制数据，即 11/01/2012,12/01/2012,12/05/2012,12/15/2012

在绘制图表时，它会以之字形方式打印，而不是趋势线。 [http://jsfiddle.net/vG8QM/](http://jsfiddle.net/vG8QM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:31:39.720

基于时间的数据需要从最早的日期开始按时间顺序排列。

# java - 如果包含另一个活动 Android 将不会填充 Listview

> ID：13946357
> 
> 赞同：1
> 
> 时间：2012-12-19T05:58:19.173
> 
> 标签：java, android, listview

我有一个活动，我有一个列表视图。在列表视图的顶部，我包括另一个布局活动，其中包含两个用于过滤列表视图的微调器。但是，如果我包含过滤器，则列表视图不起作用。它没有人满为患。如果我删除它，列表视图将被填充。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <include android:id="@+id/filter" layout="@layout/activity_expense_list_filter" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"        
        android:layout_alignParentLeft="true"
        android:layout_below="@id/filter"
        android:layout_marginTop="23dp"
        android:drawSelectorOnTop="false">                
    </ListView>

</RelativeLayout> 
```

如果我删除过滤器视图，则列表视图按预期工作。任何想法我如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:59:35.110

我发现问题是因为我在其他布局中添加了宽度和高度作为 match_parent。所以它位于列表视图的顶部，它占据了整个宽度和高度，从视图中隐藏了列表视图。我将它设置为 wrap_content 并修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:05:27.927

布局是为了`activity_expense_list_filter.xml`什么？它是否还包含一个也称为 的元素`@android:id/list`？

**编辑：**

我有一种感觉，它的标题是“过滤器”，包含的布局完全掩盖了您的列表。不透明度是100%吗？

# windows-server-2003 - 尝试读取或写入受保护的内存。这通常表明其他内存已损坏

> ID：13946359
> 
> 赞同：1
> 
> 时间：2012-12-19T05:58:30.640
> 
> 标签：windows-server-2003

我们正在运行带有 SP2 的 Windows Server 2003 R2。当我登录时，我两次收到以下消息框

“试图读取或写入受保护的内存。这通常表明其他内存已损坏。”

以下是我尝试过的步骤，但登录时仍然出现错误禁用所有非 Microsoft 服务并重新启动服务器禁用 msconfig 中的所有启动项并重新启动服务器已修复 .Net Framework 3.5 SP1

系统日志的任一应用程序中都没有事件指示错误消息的原因

我的问题是如何停止这些错误消息并找出哪个应用程序正在抛出它们。是否有实用程序来诊断问题。

感谢您的帮助和帮助 IT 领域的新手

朱泽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:01:09.500

当你在屏幕上得到消息框时，如果你调出任务管理器，然后选择进入进程，你应该可以看到负责显示消息框的进程。也就是说从“应用程序”选项卡中选择任务管理器中的消息框，然后选择转到处理

# netbeans - Netbeans ExplorerTopComponent 节点在显示对话框时失去焦点

> ID：13946360
> 
> 赞同：1
> 
> 时间：2012-12-19T05:58:34.133
> 
> 标签：netbeans, netbeans-7, netbeans-platform

我有一个 netbeans RCP 应用程序，它在 explorertopcomponent 中显示一组节点。选择后，我会在 editortopcomponent 上显示详细信息，并且效果很好。当我在编辑器上使用 JOptionPage 显示对话框时，树中的选定节点被取消选择，最终我的 editortopcomponent 也丢失了选定节点的详细信息。如果打开对话框，有没有办法保存树中的选定节点不被取消选择？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:45:08.110

很简单。

在您的 explorertop 组件中，您有 LookupListner，“正在等待”事件“someYourNodeClass”（例如专辑）出现在查找中。当您的 explorertop 组件不可见或您什么都不做时，您必须移除 LookupListener。

```
/**
 * your explorertopcomponent
 */
@ConvertAsProperties(
    dtd = "-//com.galileo.netbeans.module//Y//EN",
    autostore = false)
@TopComponent.Description(
    preferredID = "YTopComponent",
    //iconBase="SET/PATH/TO/ICON/HERE", 
    persistenceType = TopComponent.PERSISTENCE_ALWAYS)
@TopComponent.Registration(mode = "explorer", openAtStartup = false)
@ActionID(category = "Window", id = "com.galileo.netbeans.module.YTopComponent")
@ActionReference(path = "Menu/Window" /*, position = 333 */)
@TopComponent.OpenActionRegistration(
    displayName = "#CTL_YAction",
    preferredID = "YTopComponent")
@Messages({
"CTL_YAction=Y",
"CTL_YTopComponent=Y Window",
"HINT_YTopComponent=This is a Y window"
})
public final class YTopComponent extends TopComponent implements LookupListener {

private Lookup.Result<Album> result;

public YTopComponent() {
    initComponents();
    setName(Bundle.CTL_YTopComponent());
    setToolTipText(Bundle.HINT_YTopComponent());

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );
}// </editor-fold>                        

// Variables declaration - do not modify                     
// End of variables declaration                   
@Override
public void componentOpened() {
    result = Utilities.actionsGlobalContext().lookupResult(Album.class);
    result.addLookupListener(this);
}

@Override
public void componentClosed() {
    result.removeLookupListener(this);
}

void writeProperties(java.util.Properties p) {
    // better to version settings since initial version as advocated at
    // http://wiki.apidesign.org/wiki/PropertyFiles
    p.setProperty("version", "1.0");
    // TODO store your settings
}

void readProperties(java.util.Properties p) {
    String version = p.getProperty("version");
    // TODO read your settings according to their version
}

public void resultChanged(LookupEvent le) {
    Collection<? extends Album> allInstances = result.allInstances();
    TopComponent findTopComponent = WindowManager.getDefault().findTopComponent("YourNodeExplorerWindow");
    if (findTopComponent == null) {
        return;
    }
    if (!findTopComponent.isShowing()) {
        return;
    }
    if (!allInstances.isEmpty()) {
        showDetail(allInstances.iterator().next());
    }
}
} 
```

吉尔卡

# php - JQuery AJAX 请求回答但没有成功

> ID：13946362
> 
> 赞同：1
> 
> 时间：2012-12-19T05:58:54.630
> 
> 标签：php, jquery, mysql, ajax

我有这个文本框用于检查数据库上的名称，它提供了答案和所有内容，但如果我输入`console.log(data)`它没有答案。

这是我的代码：

```
 function absurdSearch(textoBuscar){
            $.ajax({ 
            type    : "POST",
            url     : "service.php",
            dataType: "json",
            data    : {
                action:"absurdSearch",
                absurdText: textoBuscar
                },          
                success:function(data){
                    console.log(data);
                    $("#fotoproyectosarq").empty();
                    var html = '';
                    html += '<img src="' + data.path + '" height="128" width="160">';
                    $("#fotoproyectosarq").append(html);

                    $("#nombreproyectosarq").empty();
                    var html2 = '';
                    html2 += "<form method=\"post\" name=\"projectsearch\" id=\"projectsearcharq\" action=\"proyectos_arq.php\">" 
                    html2 += "<span style=\"cursor: pointer;\" onclick=\"document.getElementById('projectsearcharq').submit()\">"+ data.projectName +"</span>"
                    //html2 += "<button id=" + "button" + data.projectId + " style=\"visibility:hidden;\"><span id=" + data.projectId + " style=\"cursor: pointer;\"><span>" + data.projectName + "</span></span></button>"
                    html2 += "<input name=\"project_id\" type=\"hidden\" id=\"project_id\" value=" + data.projectId + ">"   
                    html2 += "</form>"
                    $("#nombreproyectosarq").append(html2);

                }
            })
        }

    $('#buscadorRapidoTextInput').on('keyup', function() {
        var textoBuscar = $(this).attr('value');
        absurdSearch(textoBuscar);
    }); 
```

并且根据萤火虫的服务回答：

```
memphis{"projectCategory":"1","projectId":"5","projectName":"MEMPHIS RIVERFRONT","path":"server\/php\/files\/MF_1.jpg"} 
```

但成功事件似乎不起作用。

这是后端的代码：

```
 function absurdSearch($absurdText){

    $db   = new db();
    $conn = $db->conn();

    $SQL_ABSURD_SEARCH="SELECT projects.id as projectId, projects.project_types_id as projectCategory, projects.name as projectName, projects.description as description, path  FROM projects INNER JOIN project_types ON ( projects.project_types_id = project_types.id) inner join images on images.projects_id = projects.id where images.main = '1' and projects.name LIKE '%$absurdText%' LIMIT 1";
    $conn->query($SQL_ABSURD_SEARCH);
            foreach($conn->query($SQL_ABSURD_SEARCH) as $row) {
                $projectCategory = $row['projectCategory'];
                $projectId = $row['projectId'];
                $projectName = $row['projectName'];
                $path = "server/php/files/".$row['path']."";

                $rows = array("projectCategory" => $projectCategory,"projectId" => $projectId, "projectName" => $projectName, "path" => $path);            

                $json = json_encode($rows);

                echo $json;
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:39:48.193

你需要打电话

```
exit(json_encode($rows); 
```

这应该可以解决您的问题

# ios - 使用 AudioFileStreamParseBytes 通过读取文件来解析字节不会调用 kAudioFileStreamProperty_ReadyToProducePackets

> ID：13946363
> 
> 赞同：2
> 
> 时间：2012-12-19T05:58:58.843
> 
> 标签：ios, m4a, audiostreamer

我试图通过打开一个音频文件（M4A）来解析字节，在循环中读取 2048 个字节并将其传递给 AudioFileStreamParseBytes。这不会使用属性调用回调`kAudioFileStreamProperty_ReadyToProducePackets`。但是该属性`kAudioFileStreamProperty_FileFormat`被成功调用。（所以我知道回调机制正在工作。）

**问题**：

1.  我可以`AudioFileStreamParseBytes`通过读取本地文件来解析音频数据吗？大多数示例显示如何`AudioFileStreamParseBytes`通过解析`HTTP`流数据来使用，而不是从本地文件中读取。
2.  有没有人尝试过上述操作并成功处理音频文件？

**注意**：我不使用`AudioFileOpenWithCallbacks`打开 m4a 文件的原因是 api 调用在本地下载后无法打开以下文件（[http://www.arsenal-music.com/podcast/arsenal-podcast-05\. m4a](http://www.arsenal-music.com/podcast/arsenal-podcast-05.m4a) )。此 m4a 文件中嵌入了图像，`AudioFileOpenWithCallbacks`无法解析该文件。同时，我使用了 Matt Gallagher`AudioStreamer`代码来打开这个文件，解析它并正常播放。所以我倾向于`AudioFileStreamerParseBytes`通过从本地文件中读取数据来使用。（据我了解，数据是来自 HTTP 流还是来自本地文件应该没有区别。但我可能是错的。）

我在任何 API 调用中都看不到任何错误（以防有人问我这个问题）。如果需要，我可以粘贴代码，但我只想知道从文件读取并将其传递给的方法`AudioFileStreamParseBytes`是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:05:51.240

经过一些测试，我发现可以`AudioFileStreamParseBytes`用来解析从本地文件读取的字节。数据不必来自 Http 流。

# node.js - 尝试访问共享点时出现Nodejs错误

> ID：13946365
> 
> 赞同：0
> 
> 时间：2012-12-19T05:59:11.197
> 
> 标签：node.js, sharepoint

尝试从 nodejs 访问 SharePoint 时出现以下错误

> events.js:71 抛出参数[1]；// 未处理的“错误”事件 ^ 错误：在 Object.afterConnect [as oncomplete] (net.js:760:19) 的 errnoException (net.js:769:11) 处连接 ECONNREFUSED

下面是代码

```
var SP = require('sharepoint'),
site = //url,
username = //username,
password = //password;
var client = new SP.RestService(site),
contacts = client.list('Contacts');
var showResponse = function (err, data) {
console.log(data); 
}
client.signin(username, password, function () {
 // At this point, authentication is complete,
// so we can do requests.

// Example request: Get list items

// showResponse is used as callback function

contacts.get(showResponse)

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:09:55.123

根据 SharePoint 模块实现，您必须传递对 REST 服务进行寻址的整个 url。

在 SharePoint 2010 中，整个 REST 服务 URL 应如下所示

http:// %%SharePointSiteUrl%% /_vti_bin/ListData.svc

您应该使用 fiddler 或替代 HTTP 观察程序仔细检查传出请求方向 SharePoint。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:41:04.803

该错误消息的重要部分是`ECONNREFUSED`，这意味着连接被立即拒绝。这意味着它永远不会检查您的用户名和密码或任何东西。

您应该仔细检查`site`. 也许服务器在不同的端口上运行，或者您在该值中有错字。

# c# - 突出显示搜索结果

> ID：13946366
> 
> 赞同：0
> 
> 时间：2012-12-19T05:59:17.313
> 
> 标签：c#, javascript

我将使用 c# 或 JavaScript 更好地突出显示页面中的搜索结果。问题是搜索文本和结果是中文的，字符之间没有空格。这个问题的例子是：

```
 var A = abrfct;
          var B= abefhwefoba; 
```

所以我想突出显示 B 中包含 A 中任何字符的所有字符。在此示例中：`

我想强调：B 中的 ab、f、b、a。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:18:37.297

使用[XRegExp](http://xregexp.com/)库，然后您可以使用以下内容：

```
var definition = "漢語，又称中文（單指文字）、汉文、华文，其他名稱有唐文、中國語，唐話、中國話等[1]，是属汉藏语系的分析语，具有声调";
var language_but_especially_han = "[汉文]+"
XRegExp.replace(definition, language_but_especially_han, "<span class='highlight'>$1</span>"); 
```

结果是

> 汉语、中国语、中属性等[文]字、[汉文]、华[文]，有唐[文]、中国语，唐话[1]，是[汉]藏语系的分析语，有声调

（即6个匹配，其中4个是文，1个是汉，1个是汉文）

此外，发布一个真正的问题而不是替换问题可能会为您提供更好或更快的解决方案。

# c# - 删除 Filename.exe 之前的信息

> ID：13946368
> 
> 赞同：0
> 
> 时间：2012-12-19T05:59:25.453
> 
> 标签：c#, listbox, directory, streamreader

这列出了我使用folderBrowserDialog1选择的目录中所有目录中的所有文件，但是当它将它们加载到listBox中时，它会像这样在listBox中出现项目

C:\用户\用户名\桌面\文件名.exe

C:\用户\用户名\桌面\文件名.exe

C:\用户\用户名\桌面\文件名.exe

等等..有什么方法可以删除 C:\users\username\desktop\ 并保留 filename.exe

这是我的代码，它可能会有所帮助。

```
private void DirSearch(string dir)
    {
        string[] files = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories);

        foreach (var file in files)
        {
            ListBox2.Items.Add(file);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:04:59.177

使用[`Path.GetFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)方法：

```
 ListBox2.Items.Add(Path.GetFileName(file)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:12:36.520

从您对@Dennis 的评论来看，这应该可行。

```
private void DirSearch(string dir)
    {
        string[] files = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories);

        foreach (var file in files)
        {
            ListBox2.Items.Add(file.Replace(dir, string.empty);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:19:24.707

尝试递归方法

私人无效Form1_Load（对象发送者，EventArgs e）{

```
 DirSearch(folderBrowserDialog1.SelectedPath);
    }
    private void DirSearch(string dir)
    {
        try
        {
            string userpath = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
            folderBrowserDialog1.ShowDialog();
            string[] files = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.*", SearchOption.AllDirectories);
            if (!dir.Equals(userpath))
            {
                foreach (var file in files)
                {
                    listBox1.Items.Add(System.IO.Path.GetFileName(file));
                }
                IEnumerable<string> dirs = Directory.EnumerateDirectories(dir);
                foreach (string dsdir in dirs)
                {
                    DirSearch(dsdir);
                }
            }
        }
        catch (Exception ex)
        {
        }
    } 
```

# hbase - 从文本输入到 HBase 输出的 Kettle 转换 - 映射问题

> ID：13946369
> 
> 赞同：1
> 
> 时间：2012-12-19T05:59:25.937
> 
> 标签：hbase, kettle

我正在尝试评估 Kettle 与 HBase 的集成，首先，我尝试了[http://wiki.pentaho.com/display/BAD/Loading+Data+into+HBase](http://wiki.pentaho.com/display/BAD/Loading+Data+into+HBase)上的示例以及我在 load_hbase.ktr 中的更改。

我使用 ubuntu 12.04 LTS、Kettle 4.3.0、HBase 0.96.0。

由于我在 ubuntu 盒子上打开勺子时遇到问题，我使用 windows 中的勺子创建工作和转换。但是为了举例，我什至不这样做，因为我使用已经提供的文件。

我使用 pan.sh 运行转换，我得到以下异常获取映射信息的问题：映射“weblogs，pageviews”不存在！

从论坛上的其他帖子中，我了解到需要在 Hbase 中手动创建映射。

我的理解是，当使用spoon创建转换时，它会根据UI上提供的值自动在HBase上创建映射。您能否让我知道如何在没有 Spoon 或任何其他 UI 的情况下在 HBase 中创建 pentaho 映射（UI 在我的 Ubuntu 机器上不起作用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T04:49:04.120

Kettle 中的 HBase 对话框用于手动创建映射。推荐的方法是从 Kettle 连接并使用 UI。

Ubuntu 12.04 是受支持的操作系统，Kettle 应该在其上运行。如果您遇到问题，请确保您已安装 libwebkitgtk-1.0-0

```
sudo apt-get update && sudo apt-get install libwebkitgtk-1.0-0 
```

# c# - RedirectToAction 在特定操作（进程）中不起作用

> ID：13946370
> 
> 赞同：4
> 
> 时间：2012-12-19T05:59:26.907
> 
> 标签：c#, ajax, model-view-controller

我有一个 Ajax 调用，它将调用`submit`在控制器中提交表单时调用的操作。

就像下面这样：

```
if (CSConfigurationMgr.IsMobileUrl(Request.UrlReferrer.AbsoluteUri.PathFromURL()))
    return RedirectToAction("home", "mobile", new { success = true}); 
```

它重定向到主页并显示“谢谢”消息。

我试着只给 url as`xxxxxxx/mobile/home?success=true`并且它按预期工作。

对于这种情况，我得到了正确的结果并要返回声明，但我没有被重定向到新页面。

我检查了路线，发现那里没有问题。

我通过将 放在`RedirectToAction`另一个动作中进行检查，它工作正常，我被重定向到新页面。但它在这里不起作用。

错误：

*   `Cannot redirect after HTTP headers have been sent`: 有时会出现（移动浏览器）
*   什么都没有发生，只是停留在同一页面上

此外，我尝试在萤火虫中调试。拨打电话后，我得到了这个过程：

`www.test.com`只不过是我的本地主机及其端口号

`POST http://www.test.com/forms/submit`这是传递数据的正确路径

`GET http://www.test.com/mobile/home?success=true`我必须重定向到的路径。它一直显示加载标志，在萤火虫中没有进一步移动。

我怀疑正在发出请求但没有重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:39:41.807

错误“发送 HTTP 标头后无法重定向”意味着您已经开始向客户端返回 HTTP 响应。因此，您现在无法重定向它。在您的控制器方法中更早地查看它是否向客户端返回任何内容并更早地移动重定向检查。

唯一看起来很奇怪的是你在控制器之前有视图（默认是/{controller}/{view}），但也许你的路由是这样设置的。

# css - 将css文件添加到javafx中的样式表

> ID：13946372
> 
> 赞同：16
> 
> 时间：2012-12-19T05:59:37.793
> 
> 标签：css, stylesheet, javafx

语言：JavaFX

IDE：Netbeans

问题：我正在尝试向样式表添加一个 css 文件，但以下代码的第一行总是生成一个`NullPointerException`：

```
String css = this.getClass().getResource("double_slider.css").toExternalForm(); 
scene.getStylesheets().add(css); 
```

我试过用完整路径替换“double_slider.css”。double_slider.css 当前与进行此调用的类位于同一包中。我还尝试了在[http://introjava.wordpress.com/2012/03/21/linking-a-css-style-sheet-to-javafx-scene-graph/](http://introjava.wordpress.com/2012/03/21/linking-a-css-style-sheet-to-javafx-scene-graph/)找到的所有变体，但没有成功。清理和构建也无济于事。

如果我将 css 文件放在转储 .class 文件的构建文件夹中，NullPointerException 就会消失。但随后 css 文件无法正常工作，因为它引用了我项目中的其他文件。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-27T15:39:39.897

将您的`yourname.css`文件直接放在**src**目录下。

```
scene.getStylesheets().add("yourname.css") 
```

需要清理和构建

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-02T08:02:25.640

我认为您缺少导致无法找到 CSS 文件的斜杠。尝试更正您的路径参考。

例如：

```
-root
--app/Main.java
--assets/double_slider.css 
```

将会：

```
String css = this.getClass().getResource("/assets/double_slider.css").toExternalForm(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-01T16:16:09.497

我有同样的问题。我在 Win7 上使用 NetBeans 7.3 和 JavaFX 2.2.7、JDK 7.0_21。

我的解决方案是将 .css 放在与包含**void start(Stage stage)**的 Java 文件**相同**的文件夹中。所以项目视图看起来像这样：

 ***   项目名称
    *   源包
        *   pkg随便
            *   主.java
            *   MyCssFile.css

（所以 CSS 文件**在**包中，我觉得它真的很奇怪和约束。一些文档告诉我将它放在项目的根目录中，以便在运行时找到它，但这对我在 NB 中不起作用。我的应用程序现在运行，无论我是否通过点击+或单击项目上下文菜单上的“运行”来启动包含“ **start(..) ”的文件。无论我是否让 NB 将所有内容放入 JAR 中都没有关系。）**`Ctrl``U`

这是在上述情况下加载 CSS 的代码：

```
 URL url = this.getClass().getResource("controlStyle1.css");
    if (url == null) {
        System.out.println("Resource not found. Aborting.");
        System.exit(-1);
    }
    String css = url.toExternalForm(); 
    scene.getStylesheets().add(css); 
```

而这不起作用：

```
 scene.getStylesheets().add("controlStyle1.css"); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-21T16:27:08.137

我遇到了同样的问题（在 NetBeans 8 中）。我在这里找到了解决方案：[https ://blog.idrsolutions.com/2014/04/use-external-css-files-javafx/](https://blog.idrsolutions.com/2014/04/use-external-css-files-javafx/)

我的资源文件电子表格.css 在这里：

```
MyApp
-resources
--spreadsheet.css
-source packages
--fr.ccc.myapp.view
---mainView.java
---FXMLMain.fxml 
```

在 mainView.java 中：

```
File f = new File("resources/spreadsheet.css");
spreadsheet.getStylesheets().add("file:///" + f.getAbsolutePath().replace("\\", "/")); 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-05-15T21:02:52.770

所有答案都缺少一个非常重要的部分，那就是css 文件名称之前的“ **/ ”：**

文件夹结构：

```
src
  resources
    stylesheet.css 
```

像这样加载它，注意css 文件之前的**起始斜杠：**

```
scene.getStylesheets().add(getClass().getResource("/stylesheet.css").toExternalForm()) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-07T14:53:06.317

考虑到您的旧代码：

```
String css =this.getClass().getResource("double_slider.css").toExternalForm(); 
scene.getStylesheets().add(css); 
```

尝试将其更改为这个新代码，它将起作用：

```
screen.getStylesheets().add(getClass().getResource("double_slider.css").toExternalForm()); 
```

使用时`getClass()`，不需要使用`this`关键字。

我希望这对你有用。:)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-29T12:21:53.417

您可以将 style.css 直接添加到 .fxml 文件中作为根元素的属性，如 stylesheets="@your_relative_path/style.css"。

如果要访问 src 文件夹中的 css 文件，可以使用 @../style.css

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-30T15:29:00.140

这很简单。

```
this.scene.setUserAgentStylesheet(/resources/blabla.css); 
```

这对我有用-

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-19T08:46:16.443

嗯，你在 Netbeans 上吗？尝试“*清理并构建*”项目。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-19T22:22:21.077

您是否在设置样式表之前初始化了场景对象？

场景 = 新场景(myRootLayout, 600, 600); // 例如

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-11T14:53:10.170

**我做了一个小的登录示例，这就是我如何链接我的 styleshet.css**

```
@Override
public void start(Stage stage) throws Exception {
    Parent root = FXMLLoader.load(getClass().getResource("LoginUI.fxml"));

    Scene scene = new Scene(root);

    scene.getStylesheets().add(JavaFXLogin.class.getResource("stylesheet.css").toExternalForm());

    stage.setScene(scene);
    stage.show();

} 
```

**您可以使用此代码行来链接您的 css 文件。但是css文件应该在你的包中。**

`scene.getStylesheets().add(JavaFXLogin.class.getResource("stylesheet.css").toExternalForm());`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-13T02:27:26.383

假设文件结构是这样的：
-root
--src
---resources
----double_slider.css
---package
----JavaFXFile.java

这对我有用：

```
scene.getStylesheets().add((new File("src/resources/double_slider.css")).toURI().toString()); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-17T20:30:57.137

在 maven 项目中，您必须在 javafx-plugin 部分的 file.pom 中定义资源的路径：如下所示：

```
<configuration>
    <mainClass>com.personale.ciaomondo.App</mainClass>
          <resources>          
            <resource>
              <directory>src/main/resources</directory>
            </resource>
          </resources>
</configuration> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-16T23:33:03.870

尝试将“@”作为文件名。它对我有用。

例如：'@main.css'

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-07T16:29:45.377

```
scene.getStylesheets().add("file:///home/fullpathname/file.css"); 
```

或者

```
scene.getStylesheets().add("file:/home/fullpathname/file.css"); 
```

但是之后：

运行/清理和构建项目

为我工作

NetBeans IDE 8.2；Java：1.8.0_201；Linux 16.04

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-11-20T14:01:23.510

在你的文件*.java*中使用这个

```
Application.setUserAgentStylesheet(getClass().getResource("application.css")
                .toExternalForm()); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-12-01T03:23:47.807

[文件夹结构](https://i.stack.imgur.com/wwqiu.png)

在 MedicalLibraryFx.java

```
scene.getStylesheets().add(getClass().getResource("/css/style.css").toString()); 
```

* * *

[css与控制器位于同一目录时的文件夹结构](https://i.stack.imgur.com/8aAse.png)

```
scene.getStylesheets().add(getClass().getResource("style.css").toString()); 
```**

# c# - 如何从sql中的每个集合中选择20个随机问题？

> ID：13946381
> 
> 赞同：8
> 
> 时间：2012-12-19T06:00:26.490
> 
> 标签：c#, sql, sql-server-2008

我正在处理**在线**问题申请。

我正在从**数据库**中获取记录。

我在**10**组中有`SQL database`1000**个**问题。我的意思是每组包含 100 个问题。我如何从每组中**随机抽取 20 个问题？**我的意思是如何从每组中选择**2 个（根据要求）随机问题？**

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:13:46.373

尝试：

```
SELECT TOP 20 * FROM [YourTable] ORDER By NEWID() 
```

更多关于[NEWID()](http://learnsqlserver.in/3/NewId-function.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:28:34.160

如果您需要**从每个组**中获得 20 个随机问题，这里是一个[**SQLFiddle 示例**](http://sqlfiddle.com/#!3/a767c/12)。`SetNum`这是一个集合ID

```
select * from 
(
select t.*, 
ROW_NUMBER() 
over (partition by setNum order by NewId()) rNum from t
) t2 where rNum<=20 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:28:11.253

如果您想`2`从每个 SET 中获得随机问题，请尝试此操作...

```
SELECT TOP 2 * FROM (SELECT * FROM [YourTable] WHERE SET_ID = 1) ORDER By NEWID()
UNION
SELECT TOP 2 * FROM (SELECT * FROM [YourTable] WHERE SET_ID = 2) ORDER By NEWID()
UNION
.
.
.
.
UNION
SELECT TOP 2 * FROM (SELECT * FROM [YourTable] WHERE SET_ID = 10) ORDER By NEWID() 
```******

# c# - 使用 npoi api 在 xls 文件中插入图像？

> ID：13946382
> 
> 赞同：0
> 
> 时间：2012-12-19T06:00:33.953
> 
> 标签：c#, excel, xls, npoi

我想在 Excel 工作簿的工作表中插入图像。我插入图像的代码在这里：

```
 ISheet sheet = templateWorkbook.GetSheet(sheetName);

                    HSSFPatriarch patriarch = (HSSFPatriarch)sheet.CreateDrawingPatriarch();
                    //IDrawing patriarch = (IDrawing)sheet.CreateDrawingPatriarch();
                    //HSSFPatriarch patriarch = sheet1.CreateDrawingPatriarch();
                    HSSFClientAnchor anchor = new HSSFClientAnchor(0, 0, 0, 0,
                            start.Col, start.Row, end.Col, end.Row);
                    anchor.AnchorType = 2;
                    int pictureIdx = 0;
                    using (FileStream fs = new FileStream(f.GetServerPathOfFile(imagePath), FileMode.Open))
                    {
                        byte[] bytes = new byte[fs.Length];
                        fs.Write(bytes, 0, (int)fs.Length);
                        pictureIdx = templateWorkbook.AddPicture(bytes, PictureType.JPEG);
                    }
                    IPicture picture = patriarch.CreatePicture(anchor, pictureIdx); 
```

我不知道我在哪里弄错了。代码运行良好，没有任何错误/异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:04:22.463

If problem are still actual - `picture.Resize();` could help

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T14:43:43.577

我想我知道这个错误。如果你懂中文，

你需要先把图片加进去在描点。</p>

就放

```
using (FileStream fs = new FileStream(f.GetServerPathOfFile(imagePath), FileMode.Open))
{
    byte[] bytes = new byte[fs.Length];
    fs.Write(bytes, 0, (int)fs.Length);
    pictureIdx = templateWorkbook.AddPicture(bytes, PictureType.JPEG);
} 
```

前

```
HSSFClientAnchor anchor = new HSSFClientAnchor(0, 0, 0, 0, 
  start.Col, start.Row, end.Col, end.Row);
anchor.AnchorType = 2; 
```

# javascript - 如何在javascript中进行相等比较

> ID：13946384
> 
> 赞同：2
> 
> 时间：2012-12-19T06:00:35.337
> 
> 标签：javascript

我有

```
var a = 5;
var b = 5; 
var c = 5;
var d = 5; 
```

如果它们在纯 JavaScript 中保持相同的值然后返回 true 否则返回 false ，有什么可以是健壮和快速的比较方法。

```
function compare(){
   var 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T06:02:13.580

```
return a == b && b == c && c == d; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:02:18.290

您可以通过`a==b`或通过 `a===b`

```
return a === b && b === c && c === d; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:03:02.033

```
function compare(a,b,c,d) {
       return a == b && b == c && c == d;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T06:17:18.883

快速比较将是`a === (b&c&d)`

通用比较函数可以是：

```
function allEqual(){
  if (arguments.length<2){
   return true;
  }
  var args = [].slice.call(arguments);
  return args.filter(
          function(a,i){return a === this[i ? i-1 : 0]},args)
         .length === args.length;
}
//usage
allEqual(7,6,5,4);                 //=> false
allEqual(5,5,5,5);                 //=> true
allEqual(1,1,1,1,1,1,1,1,1,1,1,1); //=> true
allEqual(1,1,1,1,1,1,2,1,1,1,1,1); //=> false 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-19T06:02:52.657

我认为 javascript 相等性测试是 If a==b then something;

# sql - 使用“select *”时可以格式化列吗？

> ID：13946386
> 
> 赞同：2
> 
> 时间：2012-12-19T06:00:47.570
> 
> 标签：sql, oracle

我在 oracle db 中有这张表，由 100 多列组成：

```
ID number PK, CREATEDON date, C0 varchar2, C1 varchar2, ... ,c100 varchar2
0, 2012-12-19 05:18:21, 0, 1, ... ,100 
```

我想用`CREATEDON`格式化选择它们，所以我写了这个查询：

```
select *, to_char(CREATEDON, 'YYYY-MM-DD') from SOME_TABLE; 
```

但随后它抛出了一个错误：`ORA-00923: FROM keyword not found where expected`.

由于我不想`select ID, to_char(CREATEDON, 'YYYY-MM-DD'), col0, col1,...,col100`在每个查询中都写，我继续尝试另一个：

```
select a.*, to_char(b.CREATEDON, 'YYYY-MM-DD') from SOME_TABLE a
join SOME_TABLE b on (a.ID = B.ID); 
```

它工作得很好，但是这个连接是否应该随着行的增加而减慢整个查询的速度`SOME_TABLE`？

那么，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:07:55.243

这看起来像是一个特定于 Oracle 的问题。尝试为`*`运算符指定表：

```
select SOME_TABLE.*, to_char(CREATEDON, 'YYYY-MM-DD') from SOME_TABLE; 
```

另见[这个小提琴](http://www.sqlfiddle.com/#!4/8386e/10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:09:55.137

试试这样...

`select a.*, to_char(CREATEDON, 'YYYY-MM-DD') from SOME_TABLE a;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:10:27.873

这是一个特定于 Oracle 的问题。问题是在使用通用`*`运算符时，他们不喜欢您选择任何其他列。

所以建议

```
select x.*, to_char(CREATEDON, 'YYYY-MM-DD') from SOME_TABLE x; 
```

# svn - svn 不能提交 *.js 或 *.css 文件

> ID：13946387
> 
> 赞同：2
> 
> 时间：2012-12-19T06:00:52.600
> 
> 标签：svn, error-handling, commit

当我提交js或者css文件时，eclipse中的svn插件总是出现如下图的错误，但是提交php/html/xml/json没有问题。为什么！！！！！！

commit -m "New file" /Users/llwang/Documents/php_new_workspace/chinafun/zaq.js
添加/Users/llwang/Documents/php_new_workspace/chinafun/zaq.js **svn：E175002：提交失败（详情如下）：
svn：E175002 : 提交失败 (详情如下):
svn: E175002: PROPFIND of '/svn/repos/chinafun/trunk/zaq.js': 405 Not Allowed (http://218.245.3.207)
svn: E175002: 提交失败（详情如下):
svn: E175002: PROPFIND of '/svn/repos/chinafun/trunk/zaq.js': 405 Not Allowed (http://218.245.3.207)**

# qt - 如何在 Qt UI 类中使用我的命名空间？

> ID：13946388
> 
> 赞同：1
> 
> 时间：2012-12-19T06:00:56.280
> 
> 标签：qt, namespaces

我有一个名为的自定义小部件`gv`，位于我的命名空间`GUI`中。还有一个 UI 类`cv`，其中小部件被提升为`gv`. 但是编译器不接受并抛出错误，然后我尝试了[这里](https://stackoverflow.com/questions/3621550/promote-to-custom-widget-in-a-namespace)给出的解决方案。

但现在进入`error: no matching function for call to 'GUI::gv::gv(QWidget*&)'`我的`ui_.h`档案。有人可以告诉我我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:04:21.867

尝试将小部件升级为 GUI::gv（升级时指定命名空间）。这对我有用（我有一个表单，其中包含许多在它们自己的命名空间中定义的小部件）。

# html - 为什么固定位置会打乱我的对齐方式？

> ID：13946389
> 
> 赞同：7
> 
> 时间：2012-12-19T06:01:02.420
> 
> 标签：html, css, css-position

我试图保持标题不动，并在其下方滚动其余内容。我能够做到这一点，但是当我在我的两个标题 div 上放置一个固定位置时，会突破自动边距。

CSS：

```
.structure {
    width:960px;
    padding:20px;
    margin:0px auto 0px auto;
    background:#121212;
    border-left:5px #F06BA8 solid;
    border-right:5px #F06BA8 solid;
}
.header_home_structure {
    width:960px;
    margin:0px auto 0px auto;
    position:fixed;
    height:80px;
}
.header_home_bg {
    width:100%;
    background:#121212;
    border-bottom:3px #F06BA8 solid;
    height:80px;
    position:fixed;
} 
```

html:

```
<body>
    <div class="header_home_bg clearfix">
        <div class="header_home_structure clearfix">
            </div>
        </div>
    <div class="structure clearfix">
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T06:06:56.067

只用`position: fixed`在容器 div 上，不要用两次

[**演示**](http://jsfiddle.net/B2m2h/)

```
.structure {
    width:960px;
    padding:20px;
    margin:0px auto 0px auto;
    background:#121212;
    border-left:5px #F06BA8 solid;
    border-right:5px #F06BA8 solid;
}
.header_home_structure {
    width:960px;
    margin:0px auto 0px auto;
    height:80px;
}
.header_home_bg {
    width:100%;
    background:#121212;
    border-bottom:3px #F06BA8 solid;
    height:80px;
    position:fixed;
} 
```

# android - 如何在 Android API 级别 10 上的操作模式 (CAB) 上更改新闻列表项背景

> ID：13946398
> 
> 赞同：2
> 
> 时间：2012-12-19T06:01:43.373
> 
> 标签：android, android-layout, android-listview, android-selector

我想要达到的目标：

*   当用户按下列表项时，它会突出显示
*   当用户停止按下它时，列表项：
    *   如果在按下之前未选中，则保持突出显示
    *   失去高亮，如果它在按下之前被选中
*   长按的行为与用户停止按下的行为相同（根据项目的先前状态更改项目的背景）
*   **滚动**列表，而不按任何特定项目，不应突出显示任何项目

细节：

*   对于我阅读的内容，我认为可以使用列表选择器和状态**android:state_activated**来实现该行为，但是这种状态是在 API 级别 11 中引入的。**我正在寻找的解决方案必须在 API 级别 10 中工作**
*   我认为依赖单击（onItemClick，onClick...）的解决方案将不起作用，因为单击是在用户停止按下后触发的，而不是在他启动它时触发（就像按下状态一样）。**使用android:state_pressed**更改项目的突出显示不是持久的（它会在按下完成后变回）并在**android:state_pressed**中更改它并使其在单击时保持持久会产生闪烁
*   在 API 级别 10 中实现这一目标的应用程序的一个很好的例子是[Tasks](https://play.google.com/store/apps/details?id=ch.teamtasks.tasks)。只需单击或长按列表中的项目即可查看所需的行为

那么，有人已经解决了吗？关于 Tasks 应用程序如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:34:52.417

您可能想在 row 上设置一个`OnTouchListener`（在方法中） 。这样，您将看到第一次触摸（动作）并可以设置选择：`getView``View``MotionEvent``MotionEvent.ACTION_DOWN`

```
 private OnTouchListener mTouchListener = new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                v.setBackgroundColor(Color.RED); // set the selection
            }
            // don't forget to store this new status so the adapter will see
            // it. Otherwise you'll have some problems when the list will be
            // scrolled.
            return false;
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:36:07.803

我终于解决了实现我自己的 list( `PressListView`) 扩展的问题`ListView`。`PressListView`当列表中的项目被按下时，有一个回调来通知用户。

知道何时按下项目（这是最困难的部分），剩下的唯一事情就是以适当的方式处理项目的背景，您可以使用选择器在自己的适配器中执行此操作。

对于那些有兴趣看到这个完全工作的人，看看我的[演示项目](https://github.com/edu-zamora/CAB-HighlightListItemOnPressDemo)。

您可以在项目中执行长按启动 CAB，一旦进入 CAB，您就可以通过触摸和方向键/触控板测试项目的突出显示。

尽管我的解决方案按我的意愿工作，但在更改项目状态时，它仍然比[任务应用程序中的列表慢。](https://play.google.com/store/apps/details?id=ch.teamtasks.tasks)如果您尝试非常快地选择两项，大多数情况下它不会选择我的示例中的一项，但它会在[Tasks](https://play.google.com/store/apps/details?id=ch.teamtasks.tasks)中选择。如果有人知道它可能是什么，我将非常感激！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-01T08:43:29.747

在您的 ListView 上实现 ActionMode（请参阅下面的第二个链接）。在 ActionMode 中，当用户单击项目时，ListView 会自动跟踪项目检查状态。当您为 ListView 使用适配器时，您可以根据选中状态设置项目的背景：

```
@Override
public void bindView(final View view, final Context context, final Cursor cursor)
{
    int pos = cursor.getPosition();

    boolean selected = ((SessionsActivity)context).listView.isItemChecked(pos);
    if(!selected)
        view.setBackgroundResource(R.drawable.list_selector);
    else
        view.setBackgroundResource(R.drawable.list_selector_active);
... 
```

并且，您还需要在每个项目单击后使 ListView 无效：

```
 private AbsListView.MultiChoiceModeListener multiChoiceModeListener = new AbsListView.MultiChoiceModeListener()
    {
        @Override
        public void onItemCheckedStateChanged(ActionMode mode, int position,
                                              long id, boolean checked)
        {
            // Here you can do something when items are selected/de-selected,
            // such as update the title in the CAB
            listView.invalidateViews();
        } 
```

请参阅[https://stackoverflow.com/a/50639298/2477937](https://stackoverflow.com/a/50639298/2477937)和[https://medium.com/over-engineering/using-androids-actionmode-e903181f2ee3](https://medium.com/over-engineering/using-androids-actionmode-e903181f2ee3)

# objective-c - presentViewController 会改变 view.frame 吗？

> ID：13946406
> 
> 赞同：6
> 
> 时间：2012-12-19T06:02:08.610
> 
> 标签：objective-c

我有一个关于屏幕转换的问题。

为了传输一个屏幕，我经常使用 presentViewController 方法。

```
NextViewController *nextViewController = [[NextViewController alloc] init];
nextViewController.view.frame = CGRectMake(10, 10, 200, 400);    
[self presentViewController:nextViewController animated:YES completion:nil]; 
```

但是，没有应用我实现的 view.frame 设置。

以下代码运行正确。

```
NextViewController *nextViewController = [[NextViewController alloc] init];
[self presentViewController:nextViewController animated:YES completion:nil];
nextViewController.view.frame = CGRectMake(10, 10, 200, 400); 
```

这些代码有什么区别？view.frame 是否在 presentViewController 方法中重新定义？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T06:13:19.173

```
NextViewController *nextViewController = [[NextViewController alloc] init];
nextViewController.view.frame = CGRectMake(10, 10, 200, 400);    
[self presentViewController:nextViewController animated:YES completion:nil]; 
```

上面的代码不起作用，因为您正在设置尚未创建的 nextViewController 的视图。

因此，在您的下一个代码中，您首先加载视图控制器，然后更改加载视图的框架。

==========================编辑======================== ===

如果您想直接在视图控制器中设置框架，然后将您的视图与 a 绑定`IBOutlet`，然后在

```
- (void) viewDidAppear:(BOOL)animated
 {
      //set the frame here
      self.myView.frame = CGRectMake(10, 10, 200, 400);
 } 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:04:35.830

self.view 在呈现视图控制器之前不会创建。

ie) nextViewController.view.frame 在 [self presentViewController:nextViewController animated:YES completion:nil] 之前无效；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:24:51.703

现在`nextViewController`只有你才能更新它的各种属性。在视图加载到视图之前执行此操作将失败。呈现视图，然后更新它。

# asp.net-mvc - MVC 和 Automapper 多级嵌套

> ID：13946407
> 
> 赞同：1
> 
> 时间：2012-12-19T06:02:09.430
> 
> 标签：asp.net-mvc, automapper

我从 MVC 和自动映射器开始，希望得到一些指导。我有一些域模型和一个视图模型，它是这些域模型的组合。基本上有4个班

`Transcription`有一个关联，该关联`Audio`由`Client Staff`具有用户 ID 的用户拥有`Users`

数据库关系图：

[http://i49.tinypic.com/whcwsz.jpg](http://i49.tinypic.com/whcwsz.jpg)

生成的域模型 EF（仅相关字段）

```
public class audio
{
    public int AudioID { get; set; }
    public string AudioLength { get; set; }
    public virtual ClientStaff ClientStaff { get; set; }
    public virtual ICollection<Transcription> Transcriptions { get; set; }
}

public class ClientStaff
{
    public int ClientStaffID { get; set; }
    public int StaffType { get; set; }
    public int ClientID { get; set; }
    public virtual ICollection<Audio> Audios { get; set; }
    public virtual User User { get; set; }
}

public class User
{
    public int UserID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }    
    public virtual ICollection<ClientStaff> ClientStaffs { get; set; }
}

public class Transcription
{
    public int TranscriptionID { get; set; }
    public string TranscriptionText { get; set; }
    public virtual Audio Audio { get; set; }
    public Nullable<int> AudioID { get; set; }
} 
```

查看模型

```
public class customVM
{
    public int AudioID { get; set; }//get from audio
    public string Path { get; set; }//get from audio
    public string AudioLength { get; set; }//get from audio
    public DateTime AudioCreatedOn { get; set; }//get from audio
    public int ClientStaffID { get; set; }//get from audio
    public string TranscriptionText { get; set; }//get from transcription
    public DateTime TranscriptionCreatedOn { get; set; }//get from transcription
    public string UsersFirstName { get; set; }//get from users
    public string UsersLastName { get; set; }//get from users 
} 
```

控制器动作

```
public ActionResult Index()
{
    IEnumerable<Audio> x= db.getAudioFiles();
    Mapper.CreateMap<Audio, customVM>();
    IEnumerable<customVM> model =
        Mapper.Map<IEnumerable<Audio>, IEnumerable<customVM>>(x);
    Mapper.AssertConfigurationIsValid();

    return View(model);
} 
```

问题 ：

`AutoMapper`正在获取属性`Transcription`，`ClientStaff`但是如何获取用户的名字和姓氏？或者更确切地说，概括我如何使用自动映射器获得第二级嵌套类属性。还是我错误地处理了整个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:48:23.547

您将需要明确定义它。例如：

```
Mapper.CreateMap<Audio, customVM>()
    .ForMember(dest => dest.UsersFirstName,
               opt => opt.MapFrom(src => src.ClientStaff.User.FirstName))
    .ForMember(dest => dest.UsersLastName,
               opt => opt.MapFrom(src => src.ClientStaff.User.LastName)); 
```

我也相信你不需要`IEnumerable`在你的地图中指定，虽然我没有测试过。即，我被告知这应该有效：

```
IEnumerable<customVM> model= Mapper.Map<Audio, customVM>(x); 
```

它并不太重要，但确实清理了一些代码。

顺便说一句，您应该只配置一次映射，而不是在您的操作中配置映射。最好的方法是使用配置文件：

```
public class MyProfile : Profile
{
    public override string ProfileName
    {
        get
        {
            return "MyProfile";
        }
    }

    protected override void Configure()
    {
        AutoMapper.Mapper.CreateMap<Audio, customVM>()
            .ForMember(dest => dest.UsersFirstName,
                       opt => opt.MapFrom(src => src.ClientStaff.User.FirstName))
            .ForMember(dest => dest.UsersLastName,
                       opt => opt.MapFrom(src => src.ClientStaff.User.LastName));
    }
} 
```

然后应该在初始化方法中对其进行初始化（例如`App_Start`对于 Web 项目）

您还应该创建一个单元测试来测试映射是否已正确配置

```
[TestFixture]
public class MappingTests
{
    [Test]
    public void AutoMapper_Configuration_IsValid()
    {
        Mapper.Initialize(m => m.AddProfile<MyProfile>());
        Mapper.AssertConfigurationIsValid();
    }
} 
```

您的控制器操作将是：

```
public ActionResult Index()
{
    IEnumerable<Audio> x= db.getAudioFiles();
    IEnumerable<customVM> model =
        Mapper.Map<IEnumerable<Audio>, IEnumerable<customVM>>(x);
    return View(model);
} 
```

# android - 在列表项上实现滑动和长按？

> ID：13946409
> 
> 赞同：0
> 
> 时间：2012-12-19T06:02:13.097
> 
> 标签：android, touch, swipe, listitem

我需要在列表视图上实现 Longclick 和左右滑动并获取执行操作的列表项。[这种](https://stackoverflow.com/questions/4373485/android-swipe-on-list)方法看起来很有前途。问题： 1.ACTION_MOVE 在开始时只触发一次，因此差异非常小 2.如果我在开关中使用默认值，我会得到最后一个位置，但永远不会触发 onClick 或 onLongClick。这是我尝试过的.. 是否可以触发假动作以导致 itemClick/itemlongclick 执行。

```
public boolean onTouch(View v, MotionEvent event) 
    {
        switch (event.getAction()) 
        {
        case MotionEvent.ACTION_DOWN: 
            downX = event.getX();
            downY = event.getY();
            mSwipeDetected = Action.NONE;
            Log.i("MyTags","Down Event");
            Log.i("MyTags",String.valueOf(downX)+","+String.valueOf(downY));
            return false; // allow other events like Click to be processed
        case MotionEvent.ACTION_MOVE: 
            upX = event.getX();
            upY = event.getY();
            Log.i("MyTags","Move Event");
            Log.i("MyTags",String.valueOf(upX)+","+String.valueOf(upY));
            moveEnabled=true;
            return false;
        case MotionEvent.ACTION_UP:
            upX = event.getX();
            upY = event.getY();
            Log.i("MyTags","UP Event");
            Log.i("MyTags",String.valueOf(upX)+","+String.valueOf(upY));
            return false;
        default:
            upX = event.getX();
            upY = event.getY();
            Log.i("MyTags","Default Event");
            Log.i("MyTags",String.valueOf(upX)+","+String.valueOf(upY));
            if(moveEnabled)
            {
                diffX=downX-upX;
                diffY=downY-upY;
                abs_X=Math.abs(diffX);
                abs_Y=Math.abs(diffY);

                moveEnabled=false;
                if((abs_X>abs_Y)&(abs_X>MINIMUM_X))
                {
                    if(diffX>0)
                    {
                        mSwipeDetected=Action.LEFT;
                        Log.i("MyTags","Left Swipe");
                        event.setAction(MotionEvent.ACTION_UP);
                        return false;
                    }
                    else if(diffX<0)
                    {
                        mSwipeDetected=Action.RIGHT;
                        Log.i("MyTags","Right Swipe");
                        event.setAction(MotionEvent.ACTION_UP);
                        return false;
                    }
                }
            }
            return false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:36:25.270

我有点用黑客来解决我的问题。发生的事情是因为事件被消耗，我从来没有在 onitemclick 事件中得到结果。我所做的是在检测到滑动操作后触发我自己的 Down 和 Up 事件，并且在这些虚假事件期间我返回 false 以便将其传递给 itemclick 侦听器。我们需要在这里小心一点，因为事件似乎从结果中读取了 2 次，为此我打开和关闭侦听器，在那里包含输出。

```
ACTION_MOVE:
 //when swipe is detected fire a fake down event
 event.setAction(MotionEvent.ACTION_DOWN);
 v.dispatchTouchEvent(event);
ACTION_DOWN:
  if(fake down event)
     //set some flags & dispatch fake event
     event.setAction(MotionEvent.ACTION_UP);
     v.dispatchTouchEvent(event);
     return false
   else do regular handling
ACTION_UP:
    if fake down event
       dispatch fake up event
    else .. 
```

这里的“v”是必须触发事件的视图，在我的例子中是列表视图。由于我们没有立即使用它，因此必须通过 swipeDetector 类的构造函数传入。如下..

```
ListView v;
SwipeDetector(ListView lv)
{
    this.v=lv;
} 
```

# regex - 这个正则表达式是什么意思“[^>]*

> ID：13946410
> 
> 赞同：3
> 
> 时间：2012-12-19T06:02:15.700
> 
> 标签：regex

我遇到了一些正则表达式，这让我感到困惑！我无法理解这意味着什么：

```
[^>]* 
```

请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T06:03:59.837

匹配 0 个或多个字符，它们不是`>`. 作为`^`字符类中的第一项`[]`将使字符类成为否定字符类，并且`^`排除后面的任何字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:03:53.267

这意味着除了`>`重复任意次数之外的任何字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:06:31.480

语言中的字符可以重复任意次数，除了`>`.

`^`是排除指标。

`*`是重复的指标

```
[^>]* 
```

除了`>`可以重复的任何东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T06:04:14.377

此模式将选择除`>`

# android - Android传递数据不起作用

> ID：13946412
> 
> 赞同：-1
> 
> 时间：2012-12-19T06:02:21.520
> 
> 标签：android, android-intent

我有两个活动。第一个是 ActOne，第二个是 ActTwo。在此处查看这两个活动： ![第一幕](../Images/82d94bf11aa9d7ae45963940df723d14.png)

![第二幕](../Images/cb9c94876220f568c197b9dd6751f5b5.png)

在 ActOne 中，当我输入 no 并点击生成时，它会计算该 no 的阶数并将其显示在生成按钮下方的 TextView 中。所以这工作正常。现在当我点击 Generate fibo.. button 时，它将斐波那契数列存储在数组。现在我必须在下一个活动中显示这个系列，但是一旦我点击生成按钮，它就不会切换到另一个活动并停止说“不幸的是 FirstProject 已经停止”。那么我在这里做错了什么。下面我粘贴代码以及logcat：

```
public class ActOne extends Activity
{
Button generate,genfact;
EditText input;
TextView factans;
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    generate=(Button)findViewById(R.id.generate);
    genfact=(Button)findViewById(R.id.genfact);
    input=(EditText)findViewById(R.id.input);
    factans=(TextView)findViewById(R.id.factans);
    generate.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
          int no=new Integer(input.getText().toString()).intValue();
          int fact=1;
          while(no>0)
          {
              fact=fact*no;
              no--;
          }
          factans.setText("The factorial is"+fact);
        }
    });

   genfact.setOnClickListener(new View.OnClickListener() {
       public void onClick(View view) {
           int no=new Integer(input.getText().toString()).intValue();
           int[] series = new int[no];
           for(int i=2; i < no; i++){
               series[i] = series[i-1] + series[i-2];
           }
           Intent intent = new Intent(ActOne.this, ActTwo.class);
           Bundle b = new Bundle();
           b.putIntArray("array",series);
           intent.putExtras(b);
           startActivity(intent);
       }
   });
 }
} 
```

这是 ActTwo 活动

```
public class ActTwo extends Activity {
    TextView fiboans;
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    fiboans=(TextView)findViewById(R.id.fiboans);
    Intent intent = getIntent();
    Bundle b = intent.getExtras();
    String[] arrRecd = b.getStringArray("array");
    fiboans.setText(String.valueOf(arrRecd[2]));
  }
} 
```

我也想知道如何将整个数组打印到 textView 中？

这是我的错误日志：

```
12-19 11:28:38.912: ERROR/Trace(1133): error opening trace file: No such file or        directory (2)
   12-19 11:29:20.722: ERROR/AndroidRuntime(1133): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity   ComponentInfo{com.example.FIrstProject/com.example.FIrstProject.ActTwo}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    at android.app.ActivityThread.access$600(ActivityThread.java:130)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
    at com.example.FIrstProject.ActTwo.onCreate(ActTwo.java:17)
    at android.app.Activity.performCreate(Activity.java:5008)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:04:13.467

当您尝试从发送方活动传递 IntegerArray 时，`b.putIntArray("array",series);`但从接收方的意图获取字符串数组而不是整数数组。

改变你的一面`extras.getIntArray("array")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T06:04:18.917

在 ActTwo 活动中，首先需要设置，`setContentView(R.layout.yourfile);`然后才能访问`fiboans=(TextView)findViewById(R.id.fiboans);`。

所以在`super.onCreate(savedInstanceState);`.

之后，如果您的问题没有解决，那么按照@Ram Kiran 所说的那样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:57:20.653

看起来在 TextView 中打印数组存在一些问题。当我用一些值初始化一个数组并尝试将其显示到文本视图中时，它也无法正确显示。

# java - Java将按钮动态添加为数组

> ID：13946415
> 
> 赞同：5
> 
> 时间：2012-12-19T06:02:24.883
> 
> 标签：java, arrays, swing, jpanel, jbutton

> **可能重复：**
> [java - 我如何在点击时将 swing 组件动态添加到 gui？](https://stackoverflow.com/questions/4279435/java-how-would-i-dynamically-add-swing-component-to-gui-on-click)

我想动态添加按钮数组。我试过这样：

```
this.pack();
    Panel panel = new Panel();
    panel.setLayout(new FlowLayout());
    this.add(panel);
    panel.setVisible(true);
    for (int i = 0; i < Setting.length; i++) {
        for (int j = 0; j < Setting.width; j++) {
            JButton b = new JButton(i+"");
            b.setSize(30, 30);
            b.setLocation(i * 30, j * 30);
            panel.add(b);
            b.setVisible(true);
        }
    } 
```

但什么也没得到，我犯了什么错误？

# 编辑

我有 jFrame 类“选择”我有一个按钮，当我按下按钮时，这应该会发生：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
       structure.Setting s = new Setting(8, 8, 3, 1, 1);
       Game g = new Game();
       g.setSetting(s);
       this.dispose();
       g.show();
    } 
```

然后我转到函数 setSetting 的 Game 类（也是 jFrame 类），它是这样的：

```
void setSetting(Setting s) {
        this.setting = s;
        structure.Game game = new structure.Game(setting);
        JPanel panel = new JPanel(new GridLayout(5, 5, 4, 4));
        for (int i = 1; i <= 5; i++) {
            for (int j = 1; j <= 5; j++) {
                JButton b = new JButton(String.valueOf(i));
                panel.add(b);
            }
        }
        add(panel);
        pack();
        setVisible(true);
    }
    structure.Setting setting;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:18:38.377

您可以使用[GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)添加等高/等宽按钮：

![在此处输入图像描述](../Images/469b477b9e355f539caf912119a5a89a.png)

```
public class Game extends JFrame {
    private JPanel panel;
    public Game(int rows,int cols,int hgap,int vgap){
        panel=new JPanel(new GridLayout(rows, cols, hgap, vgap));
        for(int i=1;i<=rows;i++)
        {
            for(int j=1;j<=cols;j++)
            {
                JButton btn=new JButton(String.valueOf(i));
                panel.add(btn);
            }
        }
        add(panel);
        pack();
        setVisible(true);
    }
} 
```

按钮处理程序中的代码应该是：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
   Game g = new Game(5,5,3,3);
} 
```

请注意，您还可以`Setting`通过构造函数传递对象引用`Game`（当您可以动态添加小部件时）而不是调用`setSetting`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:19:39.317

已经在布局管理器的`JPanel`控制下，设置按钮的大小和位置是无关紧要的，因为一旦面板被验证它们就会改变。

相反，尝试在您使用按钮填充面板之后添加面板..

**更新示例**

没有进一步的证据，我们只是猜测……现在有两个人没有问题。

![在此处输入图像描述](../Images/d50362c532efd690692d488043fe6e14.png)

```
Panel panel = new Panel();
for (int i = 0; i < Setting.length; i++) {
    for (int j = 0; j < Setting.width; j++) {
        jButton b = new jButton(i + "");
        panel.add(b);
    }
}
this.add(panel);

public class BadBoy {

    public static void main(String[] args) {
        new BadBoy();
    }

    public BadBoy() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());

                int buttonCount = (int) Math.round(Math.random() * 20);
                int columnCount = (int) Math.round(Math.random() * 20);
                JPanel buttonPane = new JPanel(new GridLayout(0, columnCount));
                for (int i = 0; i < buttonCount; i++) {
                    JButton b = new JButton(i + "");
                    buttonPane.add(b);
                }

                frame.add(buttonPane);

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ButtonPane extends JPanel {

        public ButtonPane() {
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:17:07.973

我猜这是`this`延伸还是某种框架？

第一步是通过`this.pack();`设置框架大小 ti 来打包框架，使其适合所有对象。

我假设您已将其设置为可见？

现在您应该可以看到按钮了。如果您想要不同的布局，请使用`panel.setLayout(new SomeLayout);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T06:19:56.050

```
Try to use setBounds(x,y,width,heigth) method 
```

[setBound](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#setBounds%28int,%20int,%20int,%20int%29)方法

```
for (int i = 0; i < 1; i++) {
                for (int j = 0; j <1; j++) {
                    JButton b = new JButton("button");
                    b.setBounds(500, 500, 100, 20);               
                    this.add(b);

               }
            }

this.repaint();
this.validate() 
```

# javascript - 如何在 play 框架中使用 testacular

> ID：13946419
> 
> 赞同：7
> 
> 时间：2012-12-19T06:02:44.047
> 
> 标签：javascript, node.js, playframework, karma-runner

我已经下载了testacular 我的项目是基于play 框架的但是我不知道如何编写与play 框架匹配的config.js 这是我所知道的

> 框架：玩
> 
> 基本路径：''
> 
> 文件：app/assets/javascripts/footageURL.js
> 
> cli端口：9000
> 
> 浏览器：Chrome
> 
> 自动手表：是的

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T03:41:13.163

我已经自己解决了

这是我所做的

1.  确保你有

    *   [GitHub](https://github.com/)
    *   [npm](https://npmjs.org/)（节点打包模块）
    *   [nvm](https://github.com/creationix/nvm)（节点版本管理器）
    *   [节点.js](http://nodejs.org/)
2.  我从 GitHub 下载源代码
    `:~/Development$ git clone https://github.com/vojtajina/testacular.git`

3.  然后你会看到一本名为 testacular 的字典。
    `:~/Development$ cd testacular`

4.  在编译之前，你应该下载 require.js
    `sudo npm -g install`

5.  之后，您应该可以运行源代码
    `~/testacular$ grunt build`

Here is [how to write test with jasmine](http://evanhahn.com/?p=181) and then add the files to the **testacular.conf.js**

# glassfish - 严重：EJB5070：创建无状态会话 bean 的异常 - 使用 beans.xml 的解决方案

> ID：13946424
> 
> 赞同：6
> 
> 时间：2012-12-19T06:03:06.667
> 
> 标签：glassfish, java-ee-6, ejb-3.1

我正在努力克服这个问题！在这里浏览了大多数类似的帖子，但没有运气。

部署很好，但在运行时出现问题。我正在使用 GlassFish 3.1.2.2 并使用 maven，应用程序部署为具有多个 JAR 并使用 EJB3、JPA、CDI 的 WAR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T10:33:29.927

最后我找到了原因：在我的一个带有会话 bean 的 jar 文件中，我在 src/main/resources/META-INF 目录中有一个缺少 beans.xml 文件。根据 cdi 规范，jar 需要这个文件才能被识别作为 bean 存档。希望这也能解决其他人的问题！干杯bb

# c++ - 通过串行代码的斐波那契数列

> ID：13946433
> 
> 赞同：1
> 
> 时间：2012-12-19T06:03:58.940
> 
> 标签：c++, fibonacci

我有兴趣知道当我输入 n=40 时执行以下斐波那契串行代码所需的实际执行时间？？？

```
#include<stdio.h>

void printFibonacci(int);

int main(){

    int k,n;
    long int i=0,j=1,f;

    printf("Enter the range of the Fibonacci series: ");
    scanf("%d",&n);

    printf("Fibonacci Series: ");
    printf("%d %d ",0,1);
    printFibonacci(n);

    return 0;
}

void printFibonacci(int n){

    static long int first=0,second=1,sum;

    if(n>0){
         sum = first + second;
         first = second;
         second = sum;
         printf("%ld ",sum);
         printFibonacci(n-1);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:11:28.457

在这里使用 time 命令不能很好地工作，因为它会包括用户的输入时间，而不是算法本身。

在 Windows 上，我会结合使用 QueryPerformanceFrequency 和 QueryPerformanceCounter。

```
#include <windows.h>

__int64 before, after, freq;
QueryPerformanceFrequency((LARGE_INTEGER *)&freq);
QueryPerformanceCounter((LARGE_INTEGER *)&before);

printFibonacci(n);

QueryPerformanceCounter((LARGE_INTEGER *)&after);

int elapsedMs = ((after - before) * 1000) / freq;

printf("Time taken: %dms\n", elapsedMs); 
```

Linux 提供了另一组功能：

```
#include <time.h>

int clock_getres(clockid_t clock_id, struct timespec *res);
int clock_gettime(clockid_t clock_id, struct timespec *tp);
int clock_settime(clockid_t clock_id, const struct timespec *tp); 
```

这是一个如何使用这些的示例：[http ://www.qnx.com/developers/docs/6.5.0/index.jsp?topic=/com.qnx.doc.neutrino_lib_ref/c/clock_getres.html](http://www.qnx.com/developers/docs/6.5.0/index.jsp?topic=/com.qnx.doc.neutrino_lib_ref/c/clock_getres.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:08:24.913

在 Linux 上，您可以使用“time”命令测量程序的执行时间：

*   [http://linux.about.com/library/cmd/blcmdl1_time.htm](http://linux.about.com/library/cmd/blcmdl1_time.htm)

在 Windows 上，您可以从 Windows 资源工具包下载“timer.exe”，或使用以下“技巧”之一：

*   [https://superuser.com/questions/228056/windows-equivalent-to-unix-time-command](https://superuser.com/questions/228056/windows-equivalent-to-unix-time-command)

# ios - 使用重写的 init 方法后更改视图时 iPhone 应用程序崩溃

> ID：13946437
> 
> 赞同：1
> 
> 时间：2012-12-19T06:04:26.243
> 
> 标签：ios, objective-c, map, mapquest

所以我正在做的是尝试将`MQMapView`一个视图控制器从一个视图控制器传递到下一个使用：

```
MapSearchView *controller = [[MapSearchView alloc] initWithNibName:@"MapSearchView" bundle:nil mapToDisplay:map];

[self presentModalViewController:controller animated:NO]; 
```

而我在`MapSearchView`.m 中所做的是覆盖该`init`方法：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil mapToDisplay:(MQMapView*)map
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [self setMapView:map];
    }
    return self;
} 
```

我正在传递`MQMapView`视图之间的信息，因为我有一些计划好的功能需要在第一个视图中对地图进行。

我遇到的问题是，一旦`controller`被分配，它就会被传递给`presentModalViewController`应用程序在那里崩溃。我似乎找不到任何理由。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T16:28:32.060

问题是找不到xib文件

**更改此行**

```
MapSearchView *controller = [[MapSearchView alloc] initWithNibName:@"MapSearchView" bundle:nil mapToDisplay:map]; 
```

**成为**

```
MapSearchView *controller = [[MapSearchView alloc] initWithNibName:@"MapSearchView" bundle:[NSBundle mainBundle] mapToDisplay:map]; 
```

* * *

另一件事...检查xib文件的名称`MapSearchView`

# android - 填充列表后如何更改列表视图中行的背景颜色

> ID：13946441
> 
> 赞同：3
> 
> 时间：2012-12-19T06:04:47.473
> 
> 标签：android, listview, position

我创建了一个`custom adapter`并将其添加到列表视图中。之后，我创建了**AutoCompleteTextView**和**Button**命名为`Search Button.` 所以我从列表中搜索并通过单击搜索按钮，我使用此行将列表滚动到搜索的文本。

```
listViewOS.setSelection(position); 
```

我的问题是

**我想更改搜索过程找到的行的颜色。**我有位置，我将位置传递给 getView 并尝试使用此代码更改行的颜色。

```
if(position == posn)
{
    Log.i("Log","Inside if");
    rowView.setBackgroundResource(R.color.red);
}
return rowView; 
```

当位置匹配时它正在打印日志，但它不会改变行的背景颜色。

*我认为它正在发生，因为我正在尝试更改已经填充的列表视图行的颜色。那么如何更改已经填充的列表视图行的颜色。我想这样做是因为我想以突出显示的颜色显示搜索到的行。*

我有这个职位，但无法做到这一点。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:44:23.093

试试这个 ：

```
listview.setSelection(position);
View rowView = listview.getChildAt(position);
rowView.setBackgroundResource(R.color.red); 
```

这个对我有用。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:22:32.083

`notifyDataSetChanged()`之后调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:18:08.247

嗨，我使用自定义适配器扩展了 ArrayAdapter 并像这样实现。可能这会帮助你

已使用此示例[ListView](http://www.androidchennai.blogspot.in/2012/03/android-listview-example.html)

# php - strl 缩短字符

> ID：13946442
> 
> 赞同：0
> 
> 时间：2012-12-19T06:04:51.130
> 
> 标签：php, mysql

我想我有部分工作，但由于某种原因，它没有得到文章的内容..

```
<?php

        $amount_get = mysql_query("SELECT * FROM comment WHERE articleid='" . mysql_real_escape_string($_GET['id']) . "'"); 
        $comments = mysql_num_rows($amount_get);            

        $grab = mysql_query("SELECT * FROM articles WHERE id='" . mysql_real_escape_string($_GET['id']) . "' LIMIT 1");    
        $grab = mysql_query("SELECT id, news_title, news_content, news_author, news_day, news_month, news_year, news_date FROM articles ORDER BY id DESC limit 3"); 
        $news_day =$row['news_day'];
        $news_month =$row['news_month'];
        $news_year =$row['news_year'];

        if (mysql_num_rows($grab)==0) {
        echo "<div class='alert alert-note-x'>Sorry, it looks like their are no articles posted!</div>";
        }

        else if(strlen($row['news_contents']) > 135) {
                    $news_content = substr($news_content, 0, 135) . "....";
        }

         while($row = mysql_fetch_array($grab)){

    ?>

    <div class="post-container">
        <div class="post">
        <div class="left">
        <div class="date"><span class="day"><?php echo $row['news_day'] ?></span> <span class="month"><?php echo $row['news_month'] ?></span> <span class="year"><?php echo $row['news_year'] ?></span></div></div>
        <div class="postcontent"><h5 class="posttitle"><a href="#/media/<?php echo $row['id'] ?>.<?php echo stripslashes(str_replace(" ", "-", $row['news_title'])); ?>"><?php echo stripslashes($row['news_title']); ?></a></h5>                       

                <?php echo (strlen($row['news_content']) > 135); ?>

            </div>
    </div>​
    </div>  

  <?php } ?> 
```

这是它的样子： http: [//puu.sh/1CD32](http://puu.sh/1CD32)

你们知道为什么它显示“1”而不是数据库中的内容吗？

```
<?php echo (strlen($row['news_content']) > 135); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:07:20.233

您要求它打印表达式 "(strlen($row['news_content']) > 135)" 的结果，如果字符串长度超过 135 个字符，它将为 1（如 true）和 0（如 false ） 如果不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:14:38.943

您是在询问变量 $row['news_content'] 是否大于 135 个字符。它将打印 1 表示真，0 表示假。

如果您尝试打印要查找的变量的前 135 个字符，则 substr 而不是 strlen

```
echo substr($row['news_content'], 0, 135); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:07:33.247

因为这：

```
<?php echo (strlen($row['news_content']) > 135); ?> 
```

这是返回一个真或假

回显真实结果为 1

而 false 将是空的

# asp.net-mvc-3 - 如何在 Visual Studio 2010 中选择 MVC3 控制器模板？

> ID：13946444
> 
> 赞同：0
> 
> 时间：2012-12-19T06:05:10.923
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我正在关注[asp.net](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-a-controller)上的 MVC3 教程，我注意到当我尝试添加新控制器时，我只能选择指定控制器名称，这与教程屏幕截图中显示的方式不同。我也没有**高级选项...**按钮。由于没有选择任何附加选项，我并没有太担心它，但在教程的[后面，他们确实更改了这些选项。](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model%27s-data-from-a-controller)

为什么我看不到这些选项？这与我正在运行 Visual Studio 2010 Premium SP1 并且他们使用 Visual Web Developer 的事实有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:19:28.083

在按照教程进行操作时，您可能已经安装了实体框架并添加了 DbContext。我猜添加 DbContext 会更改一些默认值。[在http://www.microsoft.com/en-us/download/details.aspx?id=1491](http://www.microsoft.com/en-us/download/details.aspx?id=1491)安装 MVC3 工具的更新 将起作用..（它对我有用！）希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:45:23.577

确保您已经安装了[`ASP.NET MVC 3 Tools Update`](http://www.microsoft.com/en-us/download/details.aspx?id=1491)（对于 VS2010，这将是`AspNetMVC3ToolsUpdateSetup.exe`文件）。

# javascript - 隐藏/显示多达 100 个 DOM 元素的最有效方法？

> ID：13946445
> 
> 赞同：11
> 
> 时间：2012-12-19T06:05:12.093
> 
> 标签：javascript, jquery, html, dom

假设您最多有 100 个元素，它们的类型和格式不会改变，但它们的上下文会改变。（它们基本上是行）
这些行绑定到输入并随着用户键入而改变。

获得最佳性能的最佳方法是什么？重用元素，除了改变它们的上下文之外保持不变？还要别的吗？

*编辑，澄清：*
搜索算法是不相关的，但我确实使用 MVVM (angularjs) 框架，所以我正在做的搜索是在 JavaScript 上并且不是瓶颈；得到结果后，我相应地更新。

此外，我不需要在 DOM 上搜索元素，我确实有对元素的引用，我想最小化更新期间的运行时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:19:29.340

对于代码，这会做，

```
$(element).css('display' , 'none'); 
```

但是性能问题取决于您如何找到这些元素， **关键是将元素包装到容器中，并仅在该容器中搜索元素**：

```
$('container').find('your_elements').css('display' , 'none'); 
```

**或者**

```
$('your_elements', 'container').css('display' , 'none'); 
```

会做的。

**永远不会做：**

```
$('your_elements').css('display' , 'none'); 
```

JS 将不得不搜索整个 dom

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:06:54.663

如果你只有 100 个元素，那并不重要。只需设置`display`其样式对象的属性即可显示或隐藏它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:12:28.783

使用所有行的唯一 id 并使用 jquery 通过更改它们的值来操作它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T06:14:51.347

最好的方法是，将所有这些元素包装在一个 div 中并将样式设置为外部 div （假设它们像你说的那样在一起，它们是行）

```
<div id="wrapper">
   <!-- Your dom elements -->
</div> 
```

为您的包装器 div 设置适当的样式。

通常我认为我们不需要担心这些事情的性能，因为它们是非常微不足道的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T06:52:48.537

我认为创建一个不显示的 CSS 类并将该类应用于 TR 元素通过这样做，您将能够利用 jquery 选择器供以后使用。 `$('TR.hidden')` 和 `if(!$('TD').hasClass('hidden'))`

# http - 确保没有根据 YSlow 缓存 JSF 网页

> ID：13946446
> 
> 赞同：3
> 
> 时间：2012-12-19T06:05:16.400
> 
> 标签：http, jsf, caching, https, http-headers

在 Jboss6 服务器中的 Spring JSF facelets Web 应用程序中，出于安全原因，我需要确保某些网页不会被 Web 浏览器缓存。它也应该作为跨浏览器工作。当我在 Firefox 的 YSlow 插件中运行测试时，我发现了以下建议。

![在此处输入图像描述](../Images/b96e43c078bd5768a7806599605c810c.png)

在我的 Web 应用程序中，我也设置了 Phaselistener 来禁用缓存。但是我仍然不明白为什么 YSlow 会给出这些结果，我想知道如何通过为这些静态组件设置遥远的未来到期日期来解决这个问题，并同时提高这个页面的性能。

**缓存控制阶段监听器**

```
public class CacheControlPhaseListener implements PhaseListener {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public PhaseId getPhaseId() {
        return PhaseId.RENDER_RESPONSE;
    }

    public void afterPhase(PhaseEvent event) {
    }

    public void beforePhase(PhaseEvent event) {
        FacesContext facesContext = event.getFacesContext();
        HttpServletResponse response = (HttpServletResponse) facesContext
                .getExternalContext().getResponse();
        response.addHeader("Pragma", "no-cache");
        response.addHeader("Cache-Control", "no-cache");
        response.addHeader("Cache-Control", "no-store");
        response.addHeader("Cache-Control", "must-revalidate");
        response.addHeader("Expires", "Mon, 8 Aug 2006 10:00:00 GMT");
    }
} 
```

**在 faceconfig 中**

```
<lifecycle>
    <phase-listener id="nocache">com.company.jsf.listener.CacheControlPhaseListener</phase-listener>
</lifecycle> 
```

**http标头**

![在此处输入图像描述](../Images/f5f24e59fbe53dbbdf6bf00c004ce846.png)

添加未来日期后，YSlow 仍然显示以下内容，

![在此处输入图像描述](../Images/4c06dcb93d3c82c11c79a8eb818cd7ac.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:05:49.537

```
response.addHeader("Expires", "Mon, 8 Aug 2006 10:00:00 GMT"); 
```

2006 年 8 月 8 日到今天**绝对不是**“遥远的未来”到期日。

您需要设置一个真正遥远的未来到期日期，例如今天之后的 30 天。

```
response.setDateHeader("Expires", System.currentTimeMillis() + (30 * 24 * 60 * 60 * 1000L)); 
```

### 也可以看看：

*   [Web 应用程序性能提示和技巧](http://balusc.blogspot.com/2009/09/webapplication-performance-tips-and.html)

* * *

**与具体问题无关**，您的缓存控制和编译指示标头告诉您根本不应该缓存这些资源。这是没有意义的。删除它们。此外，使用相位侦听器方法而不是过滤器方法也很笨拙。

# django - 从 URL 安装 Django 固定装置

> ID：13946452
> 
> 赞同：4
> 
> 时间：2012-12-19T06:05:32.097
> 
> 标签：django, django-fixtures

我有一些相当大的静态数据固定装置（每个大约 20MB），我想将它们排除在我的仓库之外，以控制仓库的大小。有没有办法从 URL 加载固定装置？我做了一个远射并将我的夹具推到 S3，希望下面的工作能奏效，但没有运气。

```
python manage.py loaddata http://s3.amazonaws.com/path/to/fixtures/initial_stuff.json 
```

有人对通过 HTTP 安装固定装置有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T07:49:32.347

你试过使用 curl 和 xargs 吗？

```
curl http://s3.amazonaws.com/path/to/fixtures/initial_stuff.json | xargs python manage.py loaddata 
```

如果这不起作用，我想您必须将其转储到文件中，然后加载数据。

```
curl http://s3.amazonaws.com/path/to/fixtures/initial_stuff.json > tmp.json
python manage.py loaddata tmp.json 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:08:43.437

我只用它来下载固定装置，但 django-smuggler 可能会做你想做的事：[https](https://github.com/semente/django-smuggler) ://github.com/semente/django-smuggler 。

从自述文件：

Django Smuggler 是 Django Web 框架的可插拔应用程序，您可以通过自动生成的管理界面轻松转储/加载固定装置。特别适用于在开发项目的生产环境中传输数据，反之亦然，但也可用作备份工具。

# excel - Excel：在 VLOOKUP 中引用单元格内的文本（而不是单元格位置）/在表格中添加单元格将自动在另一个选项卡上添加一个单元格？

> ID：13946453
> 
> 赞同：0
> 
> 时间：2012-12-19T06:05:33.497
> 
> 标签：excel, vlookup

我有一个文本名称列表，例如：

'标签 1'!A1:A5'

A1 红色

A2 蓝色

A3 绿色

A4紫色

A5 棕色

我想在选项卡 2 上运行 VLOOKUP 来重现这个确切的文本列表并拥有它，这样如果我碰巧在列表中添加了一个单元格，它将自动在我的单独选项卡上重现新列表。

因此，如果我将“橙色”添加到 A3，将 Tab 1 更改为：

A1 红色

A2 蓝色

A3橙色

A4 绿色

A5紫色

A6 棕色

是否可以让此列表在我的选项卡 2 中自动添加橙色单元格？

目前我的公式在选项卡 2 上如下所示：

=VLOOKUP（间接（'Tab 1'！A1），'Tab 1'！A1：C10,1，FALSE）

我得到一个#REF 作为回报，而不是“红色”。此外，在列表中间添加一个新单元格似乎不会影响 Tab 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T17:48:09.373

在我看来，@Pynner 的方法是最合适的，但如果你想修改你的方法，然后取出 INDIRECT 并在添加时`Orange`双击 'Tab 2'!A1 中的填充句柄，如有必要，将范围扩大到应用公式。

# blackberry-10 - Blackberry10 级联中的列表视图

> ID：13946458
> 
> 赞同：0
> 
> 时间：2012-12-19T06:05:53.437
> 
> 标签：blackberry-10, blackberry-cascades

如何在列表视图中添加点击事件，如果我单击列表视图意味着我想进入下一个 qml 布局，如何做到这一点。？我尝试过触发但它不起作用

# iphone - xcode的UITabbarController中没有选择tabbaritem？

> ID：13946461
> 
> 赞同：2
> 
> 时间：2012-12-19T06:06:02.443
> 
> 标签：iphone, xcode, uitabbarcontroller

我想加载一个`tabBarController`没有`tabBar`选择的。实际上每个都`tabBarItem`对应一个特定的 `ViewController`。但是我有一个视图“Success”，它不属于任何tabBarItem。所以当Successview出现时，我需要一个`tabBarController`带有三个`tabBarItems`（搜索，设置）的需要出现，然后选择任何tabbaritem然后对应ViewController 应该出现并且 SuccesView 应该消失。通过谷歌找到了这一点，但无法使其正常工作。

在 SuccessView.m 中

```
- (void)viewDidLoad
{
    [super viewDidLoad];

// UIlabels and UITextFields loads

SuccessView *defaultView = [[SuccessView alloc]initWithNibName:@"SuccessView" bundle:[NSBundle mainBundle]];
    [self.tabBarController setSelectedViewController:nil];
    [self.tabBarController setSelectedViewController:defaultView];

    SearchView *first = [[SearchView alloc] initWithNibName:@"SearchView" bundle:nil];
    first.title=@"Search";

    Settings *second=[[Settings alloc]initWithNibName:@"Settings" bundle:nil];
    second.title=@"Settings";

    NSArray *viewArray= [NSArray arrayWithObjects:first,second, nil];

    tabbarController=[[UITabBarController alloc] init];
    [tabbarController setViewControllers:viewArray animated:NO];

    [self presentModalViewController:tabbarController animated:NO];
} 
```

但我没有发现任何 tabbarController 添加到 SuccessView。我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:26:00.870

即使我有相同的情况，我使用`UITabbar`和标签栏项目，而不是`UITabBarController`因为`UITabBarController`期望从放置的任何标签栏项目中获得当前视图......这是代码..这应该让你去:)

```
 UITabBar *tabBar = [[UITabBar alloc] initWithFrame:CGRectMake(your frame)];   
  NSMutableArray  *tabBarItemsArray= [[NSMutableArray alloc] init];
    UITabBarItem *tabBarItem1 = [[UITabBarItem alloc] initWithTitle:@"artist" image:[UIImage imageNamed:@"artist-tab.png"] tag:1];//assigning the title name and image

    [tabBarItem1 setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor colorWithRed:48.0/255.0  green:60.0/255.0 blue:109.0/255.0 alpha:1.0],UITextAttributeTextColor,nil] forState:UIControlStateNormal];//set the color when the tabbar appears

    [tabBarItem1 setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor whiteColor],UITextAttributeTextColor,nil] forState:UIControlStateSelected];//sets the color when the tabbar is selected

     UITabBarItem *tabBarItem2 = [[UITabBarItem alloc] initWithTitle:@"Facebook" image:[UIImage imageNamed:@"music-tab.png"] tag:2];

    [tabBarItem2 setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor colorWithRed:48.0/255.0  green:60.0/255.0 blue:109.0/255.0 alpha:1.0],UITextAttributeTextColor,nil] forState:UIControlStateNormal];

    [tabBarItem2 setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIColor whiteColor],UITextAttributeTextColor,nil] forState:UIControlStateSelected];

            [tabBarItemsArray addObject:tabBarItem1];
            [tabBarItemsArray addObject:tabBarItem2];
            tabBar.items = tabBarItemsArray;
            tabBar.delegate = self;

         [self.view addSubview:tabBar]; 
```

确保在头文件中添加委托`UITabBarDelegate`以实现此方法

```
 - (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item{
        NSLog(@"Tabbar selected itm %d",item.tag); 
   // here you can call your view based on tab click you can try using switch statements here based on item.tag
       } 
```

希望这能回答您的问题并有所帮助:)

此外，我们可以`UITabbar`使用图像自定义...请让我知道...如果您愿意，我会在此处发布代码。

# ruby - HTTP 摘要 + Rspec

> ID：13946463
> 
> 赞同：2
> 
> 时间：2012-12-19T06:06:19.193
> 
> 标签：ruby, ruby-on-rails-3, authentication, rspec, http-digest

我的 Rails 3 应用程序有一个非常基本的 HTTP Digest Authentication 设置。它主要遵循[Rails 控制器指南](http://guides.rubyonrails.org/action_controller_overview.html#http-digest-authentication)中的示例：

我的 ApplicationController 有一个 before_filter：

```
def digest_authenticate
  success = authenticate_or_request_with_http_digest("Application") do |username|
    APP_CONFIG["admin"]
  end
end 
```

这一切都很好。页面受到应有的保护。

我现在正试图在 RSpec 中对此进行测试并且惨遭失败。

我遵循[了这个 SO 接受的答案](https://stackoverflow.com/questions/13426529/writing-a-test-method-for-http-digest-authentication)并将该`authenticate_with_http_digest`方法放入支持文件中。这是我的实际测试：

```
describe DashboardController do
  describe "GET 'index'" do
    it "returns http success" do
      authenticate_with_http_digest(foo, bar, baz)

      visit root_path
      response.should be_success
      response.code.should == '200'
    end
  end
end 
```

几个问题：

1.  测试每次都通过，无论我是否打电话`authenticate_with_http_digest`
2.  我要传递的论点`authenticate_with_http_digest`是虚假的，似乎无关紧要。这些不应该与我存储的内容相匹配`APP_CONFIG["admin"]`吗？
3.  如果我`success`从`digest_authenticate`before_filter 中打印出值，它总是打印出 401，即使我确实将正确的参数传递给我的 rspec 助手。

任何想法如何有效地测试 HTTP 摘要身份验证？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:16:32.043

对于控制器测试，您应该使用`get :index`调用而不是`visit root_path`调用。这适用于您正在控制器测试的 HTTP 动词和 Rails 操作的任何有效组合。

该`visit`方法是 Capybara 的一部分，仅应在请求规范中使用。

# wordpress - 高级 WordPress 单篇文章分页 - 排除类别并仅浏览设置类别

> ID：13946468
> 
> 赞同：0
> 
> 时间：2012-12-19T06:06:42.230
> 
> 标签：wordpress, pagination, session-variables

我有我的主博客，其中列出了所有帖子。

我还有一个类别页面，仅列出来自 1 个类别的帖子。

**主博客**

*   发布 #1
*   发布 #2
*   发布#3
*   发布#4
*   发布 #5

**A类页面**

*   发布 #1
*   发布#3
*   发布#4

**B类页面**

*   发布 #1
*   发布#3
*   发布 #5

如果用户点击查看帖子，然后使用默认的下一个/上一个链接功能，WordPress 无法知道下一个应该是哪个帖子。

例如，如果用户正在查看帖子#3，那么下一个帖子应该是#4 还是#5？这一切都取决于用户来自哪里。

所以我写了下面的代码来回答这个问题，并认为我会分享它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:06:42.230

**注意：**我知道这不是最有效的方法，特别是如果您有成千上万的帖子。我有兴趣看到更好的方法来获得下一篇文章。

将以下内容添加到您的 functions.php 文件中：

```
/*
 * Session Tracking
 */    
    add_action('init', 'start_session', 1);
    function start_session() {
        if(!session_id()) {
            session_start();       
        }
    }
    // Update Cookie trail
    function update_cookie_trail() {
        $_SESSION['ref_category'] = get_query_var('cat');
    }

/*
 * Return next post based off of cookies
 */
    function next_post_from_session($text, $categories) {
        global $post;

        $cat_array = explode(',', $categories);
        $cat_array[] = $_SESSION['ref_category'];

        // Get all posts, exclude Hidden cat
        $args = array(
            'numberposts'     => -1,
            'category'        => implode(',', $cat_array),
            'orderby'         => 'post_date',
            'order'           => 'DESC',
            'post_type'       => 'post',
            'post_status'     => 'publish',
        );
        $allPosts = get_posts( $args );
        $index = 0;

        foreach( $allPosts as $thePost ) {
            $index++;
            if($post->ID == $thePost->ID) {
                $nextPost = $allPosts[$index++];
                $url = get_permalink($nextPost->ID);
                $a = '<a href="'.$url.'" title="'.esc_attr($nextPost->post_title).'" />'.$text.'</a>';
                return $a;
            }
        }
    }

/*
 * Return previous post based off of cookies
 */
    function previous_post_from_session($text, $categories) {
        global $post;

        $cat_array = explode(',', $categories);
        $cat_array[] = $_SESSION['ref_category'];

        // Get all posts, exclude Hidden cat
        $args = array(
            'numberposts'     => -1,
            'category'        => implode(',', $cat_array),
            'orderby'         => 'post_date',
            'order'           => 'DESC',
            'post_type'       => 'post',
            'post_status'     => 'publish',
        );
        $allPosts = get_posts( $args );
        $index = 0;

        foreach( $allPosts as $thePost ) {
            if($post->ID == $thePost->ID) {
                $prevPost = $allPosts[$index-1];
                $url = get_permalink($prevPost->ID);
                $a = '<a href="'.$url.'" title="'.esc_attr($prevPost->post_title).'" />'.$text.'</a>';
                return $a;                
            }
            $index++;
        }
    }

/*
 * Generate a "back" URL to the previous category page based off session data
 */
    function previous_category_permalink() {
        $ref_url = $_SESSION['ref_category'];
        return get_category_link($ref_url);
    } 
```

然后在显示多个博客文章的任何 category.php 或页面（如“相关文章”部分）上，运行此函数：

```
update_cookie_trail(); 
```

然后在您的 single.php 上，您可以使用以下功能。

```
<?php echo next_post_from_session('Next', '-24, 10'); ?>

<a class="close" href="<?php echo previous_category_permalink(); ?>">
    Back
</a>                      

<?php echo previous_post_from_session('Previous Post', '-24, 10'); ?> 
```

'-24, 10' 是一个参数，允许您通过逗号分隔的 ID 排除或特别包含类别。

# c# - 如何在 C# 中更改 DataReader 中的列名？

> ID：13946476
> 
> 赞同：6
> 
> 时间：2012-12-19T06:06:57.837
> 
> 标签：c#, gridview, sqldatareader

我有从声明`SqlDataReader`中返回的信息。`ExecuteDataReader`

我想要的是：在绑定到网格之前更改数据阅读器中的一些列名。

情况如下：

1.  首先我建立了网格的结构（结构在数据库中的表中，它是根据过去系统中存储过程的输出填充的）
2.  我执行数据阅读器来执行存储过程
3.  将数据读取器绑定到网格

问题是：如果存储过程中的一列是大写的，而网格中的相关列是小写的，则网格不会填充。

而且我有很多基于这种架构的存储过程。其中一些有很多行要显示。正因为如此，我使用数据阅读器来提高性能。

1.  我不想更改存储过程中的列名（工作量太大）
2.  我不想将数据读取器的结果复制到另一个数据持有者（因为开销和性能低下）
3.  我只是更改数据读取器的列名的一种方法

    sqlDataReader 阅读器；reader.executedatareadet();

例如，在返回数据阅读器后，我有两列 ( `A,B`)。

我想在将列绑定到网格之前将其更改`'A'`为`'a'`（转换为小写）`reader.GetName(i)`

我希望能够做类似的事情

```
reader.SetName(i) 
```

但似乎我们无法更改数据读取器列名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:39:23.527

1.  您可以更改 GridView 中的列名
2.  如果可能的话，用新的列名改变存储过程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:16:53.703

您可以尝试将 DbDataReader 加载到具有预定义列名的 DataTable 中，然后将该表用作 tout 应用程序中的数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:35:37.430

我的建议是：将 UI 和数据库代码分开。如果您的 UI 受到数据读取器的影响，那么这只会让我问：“为什么 UI 与数据读取器通信？”。这两件事在堆栈的完全相反的两端。我会通过让您的 DAL 返回填充的 POCO/DTO 类型（或可能的视图模型类型）的具体列表来抽象这一点，即

```
public List<Customer> GetCustomers({some filter etc}) {...} 
```

然后绑定到*那个*，即

```
var customers = dal.GetCustomers(...);
...
someUI.DataSource = customers; 
```

`Customer`然后使用以下属性很好地定义该类型：

```
public class Customer {
    public int Id {get;set;}
    public string Name {get;set;}
    ...
} 
```

DAL 的任何实现更改现在都与 UI 完全分离。

# algorithm - 曲线光栅化为像素

> ID：13946478
> 
> 赞同：4
> 
> 时间：2012-12-19T06:07:04.223
> 
> 标签：algorithm, rasterizing, dda

我需要将曲线光栅化为像素的算法

[例如 http://i54.tinypic.com/ffc0n9.png](http://i54.tinypic.com/ffc0n9.png)

我尝试对控制点应用 DDA 线算法，但没有给出好的结果。我也尝试放大曲线（例如 3 次），然后将其近似为 3x3 矩形，但结果仍然不太好。

# android - 无法在 android 中访问你的 tube Api

> ID：13946479
> 
> 赞同：1
> 
> 时间：2012-12-19T06:07:18.737
> 
> 标签：android, youtube-api

我正在使用以下代码访问 youtube，但在运行时它给出“类未找到异常”我已经添加了所有 Jar 所需的

```
 String developer_key="my Key";    

    @Override     
    protected void onCreate(Bundle savedInstanceState)   
    {       super.onCreate(savedInstanceState);         
            setContentView(R.layout.activity_main);   
            YouTubeService service = new YouTubeService( developer_key);                
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T23:42:41.313

不再那么简单了。

您必须首先创建您的 UX 元素（YouTubePlayerView、YouTubePlayerFragment、YouTubeStandalonePlayer 等），然后向其发送初始化消息。

来自 YouTube Android API Demo App PlayerViewDemoActivity.java：

```
/**
 * A simple YouTube Android API demo application which shows how to create a simple application that
 * displays a YouTube Video in a {@link YouTubePlayerView}.
 * <p>
 * Note, to use a {@link YouTubePlayerView}, your activity must extend {@link YouTubeBaseActivity}.
 */
public class PlayerViewDemoActivity extends YouTubeFailureRecoveryActivity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.playerview_demo);

    YouTubePlayerView youTubeView = (YouTubePlayerView) findViewById(R.id.youtube_view);
    youTubeView.initialize(DeveloperKey.DEVELOPER_KEY, this);
  }

  @Override
  public void onInitializationSuccess(YouTubePlayer.Provider provider, YouTubePlayer player,
      boolean wasRestored) {
    if (!wasRestored) {
      player.loadVideo("wKJ9KzGQq0w");
    }
  }

  @Override
  protected YouTubePlayer.Provider getYouTubePlayerProvider() {
    return (YouTubePlayerView) findViewById(R.id.youtube_view);
  }

} 
```

来自 YouTubeFailureRecoveryActivity.java：

```
/**
 * An abstract activity which deals with recovering from errors which may occur during API
 * initialization, but can be corrected through user action.
 */
public abstract class YouTubeFailureRecoveryActivity extends YouTubeBaseActivity implements
    YouTubePlayer.OnInitializedListener {

  private static final int RECOVERY_DIALOG_REQUEST = 1;

  @Override
  public void onInitializationFailure(YouTubePlayer.Provider provider,
      YouTubeInitializationResult errorReason) {
    if (errorReason.isUserRecoverableError()) {
      errorReason.getErrorDialog(this, RECOVERY_DIALOG_REQUEST).show();
    } else {
      String errorMessage = String.format(getString(R.string.error_player), errorReason.toString());
      Toast.makeText(this, errorMessage, Toast.LENGTH_LONG).show();
    }
  }

  @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == RECOVERY_DIALOG_REQUEST) {
      // Retry initialization if user performed a recovery action
      getYouTubePlayerProvider().initialize(DeveloperKey.DEVELOPER_KEY, this);
    }
  }

  protected abstract YouTubePlayer.Provider getYouTubePlayerProvider();

} 
```

# image - 需要帮助在 iphone 上测试我的 ios 应用程序

> ID：13946482
> 
> 赞同：0
> 
> 时间：2012-12-19T06:07:24.780
> 
> 标签：image, ios5, ios6, iphone-5

我开发了一个 iOS 应用程序，我在其中使用了非常多的 .png 图像，为此我创建了一个图像名称的 SQLite 数据库，我从该数据库获取图像名称并加载图像，我已将所有图像添加到我的项目的 Supporting Files 文件夹，

当我在模拟器中运行程序时，它运行得很好，但是当我在我的 iPhone 5 上测试同一个项目时，程序运行但图像看不到错误说找不到文件

我检索图像的代码如下

```
NSBundle *dataBundle = [NSBundle mainBundle]; 
```

**从 SQLite 数据库中检索图像名称**

```
NSString *imagename= [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 6)]; 
```

**在我的图像视图中加载图像**

```
NSString *imgPath = [dataBundle pathForResource:imagename ofType:@"png"];
UIImage *img = [[UIImage alloc] initWithContentsOfFile:imgPath];
[self.showImg setImage:img]; 
```

此代码在两种屏幕尺寸的 iOS 模拟器 5.1 和 iOS 模拟器 6.0 上都能完美运行，但它在 iPhone 5 上不起作用

我认为问题在于图像没有复制到我的 iPhone 中，所以任何人都可以有解决方案以及如何将所有图像附加到我的存档中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:04:03.117

当您将项目运行到模拟器中时，图像路径工作正常，因为它从您的计算机中获取图像源的路径。当您尝试在 iPhone 中运行时，它会从您的 iPhone 源中获取图像源路径。检查您添加的图像。如果它添加到您的项目中，那么它在 iPhone 中也可以与模拟器一起正常工作。您只是将图像引用到项目中，然后仅在模拟器中显示。所以请检查您的图像文件夹。

# c++ - 无法在 32 位服务中使用 RegLoadKey 加载 64 位密钥

> ID：13946484
> 
> 赞同：1
> 
> 时间：2012-12-19T06:07:30.983
> 
> 标签：c++, winapi, registry, wow64

我需要从 32 位服务中打开和修改用户的注册表项（请注意，当时用户没有登录。）我执行以下操作：

```
//For simplicity error checks are not shown
//I also made sure to enable the following privileges:
// SE_RESTORE_NAME, SE_BACKUP_NAME

//"ntuser.dat" = is the file OS uses to load user's profile
if(RegLoadKey(HKEY_LOCAL_MACHINE, L"Test123", L"C:\\Users\\UserA\\ntuser.dat") == ERROR_SUCCESS)
{
    HKEY hKey;
    DWORD dwRes = RegOpenKeyEx(HKEY_LOCAL_MACHINE,
        L"Test123\\Software\\Classes\\Local Settings\\Software\\Microsoft\\Windows\\CurrentVersion\\TrayNotify"),
        NULL, KEY_READ | KEY_WOW64_64KEY, &hKey);

    //'dwRes' = is returned as 2, or ERROR_FILE_NOT_FOUND

    RegUnLoadKey(HKEY_LOCAL_MACHINE, L"Test123");
} 
```

问题是`Software\Classes\Local Settings\Software\Microsoft\Windows\CurrentVersion\TrayNotify`没有加载密钥，即使我知道它存在于实际的用户配置文件中。我可以通过加载用户帐户和使用 64 位 regedit 来验证这一点。

我怀疑这与 Wow64 重定向有关，但我似乎无法理解我做错了什么？

**编辑：**为第一个 API 添加了错误检查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T02:43:53.593

我想我明白了。对我的原始代码的两个更正：

1.  首先，从 Vista 开始，我需要为`Usrclass.dat`hive 类加载文件，而不是`ntuser.dat`. 这有点道理，因为它`ntuser.dat`是用户漫游配置文件的一部分，`Classes\Local Settings`不适合图片。所以这里是`Usrclass.dat`文件的位置，其中包含非漫游用户数据（主要是 COM 的东西，但也有一些其他设置）：

    %LocalAppData%\Microsoft\Windows\Usrclass.dat

2.  用户配置单元加载后打开的关键是：

    Test123\Local Settings\Software\Microsoft\Windows\CurrentVersion\TrayNotify

那是因为原始文件`HKCU\Software\Classes`被重定向到`HKU\<UserSID>_Classes`存储在`Usrclass.dat`文件中的那个。

# android - Galaxy Nexus 上的 Canvas Clip 功能错误

> ID：13946486
> 
> 赞同：1
> 
> 时间：2012-12-19T06:07:33.060
> 
> 标签：android, android-canvas, ondraw

我正在制作一个应用它的图片裁剪。
但 Galaxy nexus 存在一些问题。
Region.Op.DIFFERENCE 不起作用。
Desire(2.3.3) 和 GalaxyNexus(4.1) 模拟器运行良好。
但不仅适用于 GalaxyNexus Real Phone

![欲望（2.3.3）运作良好](../Images/4b0ceeb8253dc091e61c70bd45c4066d.png)

![Galaxy Nexus (4.1.1) 问题](../Images/89301291ee4727ae414335e792fc1163.png)

请查看代码...这是一个 onDraw 覆盖的方法，它是扩展的 imageview

```
@override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    //all rectangle   
    getDrawingRect(viewRect);

    //small rectangle
    getDrawingRect(smallRect);
    smallRect.left += 100;
    smallRect.right -= 100;
    smallRect.bottom -= 200;
    smallRect.top += 200;

    // paint  color setting to transparency black
    mNoFocusPaint.setARGB(150, 50, 50, 50);

    // All Rectangle clipping
    canvas.clipRect(viewRect);
    // Small Rectangle clipping
    canvas.clipRect(smallRect, Region.Op.DIFFERENCE);

    // Draw All Rectangle transparency black color it's except small rectangle
    canvas.drawRect(viewRect, mNoFocusPaint);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:28:31.770

解决了！

在清单中添加此代码

```
 android:hardwareAccelerated="false" 
```

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T19:16:39.813

朱铉的回答太棒了！但是，就我而言，我不想在所有 SDK 版本中为我的整个应用程序删除硬件加速。硬件加速画布剪裁的问题似乎仅限于 4.1.1，因此我采取了禁用硬件加速的方法来执行剪裁操作的特定视图。

自定义视图类（在本例中为 RecyclerView）：

```
public class ClippableRecyclerView extends RecyclerView {

    private final CanvasClipper clipper = new CanvasClipper();

    public ClippableRecyclerView(Context context) {
        super(context);
        configureHardwareAcceleration();
    }

    public ClippableRecyclerView(Context context, AttributeSet attrs) {
        super(context, attrs);
        configureHardwareAcceleration();
    }

    public ClippableRecyclerView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        configureHardwareAcceleration();
    }

    public void configureHardwareAcceleration() {
        if (Build.VERSION.SDK_INT == Build.VERSION_CODES.JELLY_BEAN) {
            setLayerType(View.LAYER_TYPE_SOFTWARE, null);
        }
    }

    /**
     * Remove the region from the current clip using a difference operation
     * @param rect
     */
    public void removeFromClipBounds(Rect rect) {
        clipper.removeFromClipBounds(rect);
        invalidate();
    }

    public void resetClipBounds() {
        clipper.resetClipBounds();
        invalidate();
    }

    @Override
    public void onDraw(Canvas c) {
        super.onDraw(c);
        clipper.clipCanvas(c);
    }
} 
```

帆布剪类：

```
public class CanvasClipper {

    private final ArrayList<Rect> clipRegions = new ArrayList<>();

    /**
     * Remove the region from the current clip using a difference operation
     * @param rect
     */
    public void removeFromClipBounds(Rect rect) {
        clipRegions.add(rect);
    }

    public void resetClipBounds() {
        clipRegions.clear();
    }

    public void clipCanvas(Canvas c) {
        if (!clipRegions.isEmpty()) {
            for (Rect clipRegion : clipRegions) {
                c.clipRect(clipRegion, Region.Op.DIFFERENCE);
            }
        }
    }
} 
```

# svn - 捕获凭据并用于登录 JIRA

> ID：13946487
> 
> 赞同：1
> 
> 时间：2012-12-19T06:07:35.070
> 
> 标签：svn, authentication, scripting, hook, jira

我正在使用标准的 SVN-JIRA 预提交挂钩来强制用户在使用[此 JIRA 插件](https://studio.plugins.atlassian.com/wiki/display/CMMT/JIRA+Commit+Acceptance)时在提交时输入 JIRA 问题 ID 作为注释。它调用一个 python[**脚本**](https://jira.atlassian.com/secure/attachment/30259/jira-client.py)，该脚本使用硬编码的用户名和密码登录 JIRA。这带来了两个问题：

1.  IT 安全策略是针对这个写在文件中的密码。
2.  可以访问 SVN 但无法访问 JIRA 的用户仍然可以更新 JIRA 问题

所以我想使用提交者的凭据来登录 JIRA。

现在，您认为最好的方法是什么？我不太确定现有的访问控制机制。我们对 SVN（AIX 服务器上的 svn-acl）、Windows、JIRA 使用相同的用户名，但密码不同，所以我假设是一些 LDAP/AD 组合。

我可以很快想到两个即兴创作，尽管两者都只是 - 不是很干净/优雅：

1.  没有其他身份验证信息传递给 SVN ，所以可能有一个 VBscript 弹出窗口（我正在使用 TortoiseSVN 客户端+Subclipse），它在提交发生时询问 JIRA 密码（您可以从 Python 脚本中自动填充“作者”。或者以某种方式启动 JIRA 登录窗口。

2.  虚拟 SSO - 强制用户保留相同的登录密码。使用 Win/SVN 中的凭据登录 JIRA。临时搭建，因为它取决于人类行为和不同的密码策略。当因此不允许提交时，您不干净

我对 3rd 方解决方案（Fisheye ??）持开放态度，但首选是 hack/脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:17:00.937

我认为您正在寻找的东西是不可能的，因为：

1.  SVN钩子脚本没有传递认证信息，所以不能使用用户+密码登录JIRA

2.  即使您可以在 SVN 中获取用户 + 密码，似乎您正在为 SVN 使用不同的身份验证机制，SVN 中的密码在 JIRA（使用 LDAP）上不起作用

老实说，我只是不认为使用一个特殊帐户连接到 JIRA 是个问题。你的第二点实际上应该发生一些事情。只要在 SVN 中发生与 JIRA 问题相关的事情，我们就应该更新 JIRA 中的状态，无论谁提交。

如果您同意这一点，剩下的就是脚本中的纯密码。我认为有很多方法可以解决。我相信 Python 有一些神秘的库，你可以使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:33:19.013

最简单的解决方案是使用[Crowd](http://www.atlassian.com/software/crowd/overview)对 Jira 和 Subversion 进行身份验证。如果用户在其 SVN 提交评论中引用了 Jira 问题，则该评论将添加到相关的 Jira 问题中。至于限制具有 SVN 访问权限但没有 Jira 访问权限的用户，您可以添加一个提交后挂钩来检查 Crowd 以验证用户是否具有 Jira 访问权限。我不确定为什么允许某人提交源代码但不能评论错误，但这取决于你。

# facebook - 错误“Facebook 上的应用”自动重定向到网站

> ID：13946490
> 
> 赞同：1
> 
> 时间：2012-12-19T06:08:07.097
> 
> 标签：facebook

我创建了一个“Facebook 上的应用程序”并在 Canvas URL 中输入我的网站 URL。

[我可以在 Facebook 应用程序http://apps.facebook.com/abc](http://apps.facebook.com/abc) （示例 url）中看到我的网站几个月。

在最近对我的创作进行的例行检查中，我发现 Facebook 应用程序会自动将浏览器重定向到我的网站。

我想从 Facebook 应用程序[http://apps.facebook.com/abc](http://apps.facebook.com/abc)查看我的网站，而不是重定向到我的网站。

有什么建议吗？

# java - 导出到页面还应包含标题的 XLSX

> ID：13946495
> 
> 赞同：1
> 
> 时间：2012-12-19T06:08:52.297
> 
> 标签：java, excel, grails, grails-plugin

我正在使用 Grails，我正在将数据列表导出到 excel 工作表。简单的表格导出已完成，但我需要该页面中的标题，其中包含公司徽标和报告标题。并且必须根据数据的状态保存工作表，该状态应为 5 张。页面宽度必须为 11 英寸...

要求

*   5 张：打开，....，关闭
*   标题：左侧：徽标，右侧：报告标题

所以任何人都可以建议如何做到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:59:29.407

您是否尝试过`[header.enabled:true]`作为格式化程序之一？

# javascript - 通过 Jquery 将类添加到 div

> ID：13946497
> 
> 赞同：1
> 
> 时间：2012-12-19T06:08:57.413
> 
> 标签：javascript, jquery

我有页面加载时生成的 div，如下所示。

```
<div class="redactor_ redactor_editor"></div> 
```

如何通过 jquery 在其上添加一个类 .example ，如下所示？

```
<div class="redactor_ redactor_editor example"></div> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:10:12.617

试试[addClass](http://api.jquery.com/addClass/)这个，

```
$('.redactor_').addClass('example'); 
```

只需使用任何选择器选择元素

```
$(selector).addClass('example'); 
```

[演示](http://jsfiddle.net/gchoken/pZqNQ/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:12:23.023

您可以使用 [`.addClass()`](http://api.jquery.com/addClass/)

合成纤维

```
.addClass( className ) 
```

> **className**一个或多个要添加到每个匹配元素的类属性的类名。

所以现在这就是你想要的

```
$('.redactor_ redactor_editor').addClass('example'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:14:49.593

你可以设置类，不管它是什么，`.attr()`像这样使用，

如果html是这样的，

```
<div class="redactor_ redactor_editor"></div> 
```

那么选择器将如下所示，

```
$(document).ready(function() {
 $('.redactor_redactor_editor').attr('class', 'redactor_redactor_editor example');
}); 
```

由于您的 div 标签的类名在下划线符号后有一个空格（即 redactor_ ），因此必须应用以下方式来选择元素。（`<div class="redactor_ redactor_editor"></div>`）

```
$(document).ready(function() {
   $("div[class='redactor_ redactor_editor']").attr('class', 'redactor_ redactor_editor example');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T07:07:48.853

如果您正在寻找将新的 css 类添加到已经有类的元素，那么 -

[**演示**](http://jsfiddle.net/pVySp/)

HTML-

```
<div class="one">example</div>​ 
```

CSS-

```
.one{color:red;}
.two{color:green}​ 
```

jQuery-

```
$(function(){
 $('.one').addClass('two');
});​ 
```

如果您正在寻找删除旧的 css 类并添加一个新类-

[**演示**](http://jsfiddle.net/hnuZ5/1/)

jQuery-

```
$(function() {
    $('.one').removeClass('one').addClass('two');
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T06:16:25.617

尝试这个 ：

```
<pre>
 $(window).load(function () { 
   $('.redactor_ redactor_editor').addClass('example');
 });
</pre> 
```

参考： [addClass](http://api.jquery.com/addClass/)

# shell - Applescript 或 shellscript 删除配置文件？

> ID：13946498
> 
> 赞同：0
> 
> 时间：2012-12-19T06:09:01.090
> 
> 标签：shell, applescript

请建议我如何删除具有权限的配置文件；我的脚本的 .cfg 文件没有被删除。我尝试使用 Applescript 和 shell 脚本，但它不起作用，而且它也没有请求权限。

```
tell application "System Events"
    delete  file "/Library/Application Support/Macromedia/abc.cfg"
end tell

do shell script "rm -f /Library/Application Support/Macromedia/abc.cfg" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:07:57.860

我找到了答案..我只是错过了单引号..

```
do shell script "rm -f '/Library/Application Support/Macromedia/abc.cfg'" 
```

# jquery - html中的jquery克隆元素

> ID：13946502
> 
> 赞同：3
> 
> 时间：2012-12-19T06:09:16.613
> 
> 标签：jquery, dom, clone

这里我使用 jQuery ajax：

```
$.ajax({
    type: "GET",
    url: URL,
    data: { Mode: "POB1"},
    success: function (data) {
        var Html = $.trim($(data).find("#divpob").html());
        if (Html) {
            $(Html).find(".lblpob").text("UserName" + Username);
            $(".DivRprt").html(Html);
        }
    }
}); 
```

这里的值`lblpob`没有改变，但如果我`.clone()`这样使用

```
if (Html) {
    var Html2 = $(Html).clone(true);
    $(Html2).find(".lblpob").text("UserName" + Username);
    Html = Html2;
    $(".DivRprt").html(Html);
} 
```

`lblpob`变了。

这里有什么不同`.clone()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T07:19:28.260

临时 DOM 对象和 html 作为字符串存在问题。我将逐行分解：

## 您的第一个代码的作用：

```
 var Html = $.trim($(data).find("#divpob").html()); 
```

调用`.html()`和`$.trim()`确保您的`Html`var 包含一个**string**，而不是一个活动的 DOM 对象。

```
 $(Html) ... 
```

这会将`Html`字符串转换为一个**新**的DOM 对象（您不会将其分配给 var），

```
 ... .find(".lblpob").text("UserName" + Username); 
```

并更改这个未命名的 DOM 对象。不是你的`Html`字符串。

```
 $(".DivRprt").html(Html); 
```

但是这里你使用原始`Html`字符串来更改 .html 的 html `DivRprt`。

## 你的其他代码做什么：

```
 var Html2 = $(Html).clone(true); 
```

在创建一个新的 DOM 对象并克隆它之后，你将它分配给`Html2`,

```
 $(Html2).find(".lblpob").text("UserName" + Username); 
```

在这里你可以操纵它。

```
 Html = Html2;
    $(".DivRprt").html(Html); 
```

所以在这里你将被操纵的 DOM 对象插入`.DivRprt`

## 我的选择：

您不需要`.clone()`，只需跟踪第一个 DOM 对象：

```
 if (Html) {
        var Html2 = $(Html)
        Html2.find(".lblpob").text("UserName" + Username);
        $(".DivRprt").html(Html2);
    } 
```

## 或者：

只是不要将修剪后的数据转换回字符串

```
 var Html = $(data).find("#divpob");
    if (Html.length) {
        Html.find(".lblpob").text("UserName" + Username);
        $(".DivRprt").html(Html);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T03:38:49.680

在第二种情况下，您将 jQuery 结果保存到一个变量中：

```
var Html2 = $(Html).clone(true); 
```

如果没有 jQuery 集合，它也可以工作`.clone()`，因为如果您对 jQuery 集合进行修改而不将其保存到变量中*或*调用`.appendTo()`，那么这些更改将会丢失。

**改进**

您可以跳过一个步骤并避免通过执行以下操作来保留任何变量，而不是执行 DOM -> HTML 序列化然后执行 HTML -> DOM：

```
$(data).find("#divpob")
    .find(".lblpob")
        .text("UserName" + Username) // modify
        .end()
    .appendTo('.DivRpt'); // append to container 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T03:22:38.823

**对于 jQuery 操作 DOM，元素必须在 DOM 上。**

代替：

```
var Html = $.trim($(data).find("#divpob").html()); 
```

代替：

```
var Html = $(data).find("#divpob"); 
```

代替：

```
$(Html).find(".lblpob").text("UserName" + Username); 
```

代替：

```
Html.find(".lblpob").text("UserName" + Username); 
```

代替：

```
$(".DivRprt").html(Html); 
```

代替：

```
p$(".DivRprt").html(Html.html()); 
```

因为;

`$(Html).find(".lblpob").text("UserName" + Username);`

在这里，`$(Html)`是即时对象，您正在操纵即时对象。

所以你的操纵消失了。

# java - Hibernate 可以用来存储没有类的数据的 HashMap 来表示它们的结构吗？

> ID：13946506
> 
> 赞同：9
> 
> 时间：2012-12-19T06:09:45.053
> 
> 标签：java, database, hibernate

尽管我以前在其他语言中使用过类似的持久性库，但我对 Hibernate 的经验几乎为零。我正在开发一个 Java 项目，该项目需要一种方法来在文本配置文件中定义“模型”（在 MVC 意义上），自动生成数据库表，并且（理想情况下）与数据库后端无关。据我通过一些快速的谷歌搜索得知，Hibernate 是*唯一*广泛使用的与后端无关的 Java 数据库库。虽然我可以在我的模型系统和多个数据库后端之间编写自己的兼容层，但如果可能的话，我希望避免这种调试工作。

我的问题是：Hibernate 是否可以用于存储其结构以其他方式表示的数据，而不是带注释的 Java 类文件，例如带有一些描述其结构的配置对象的 HashMap？如果没有，是否还有其他相对稳定的 Java 数据库库可以提供此功能？

**编辑：**这是我想要完成的更清晰的描述：

我正在编写一个数据建模库。当调用库的某个方法并传递配置对象（从文本文件加载）时，它应该创建一个新的“模型”，并在必要时为该模型创建一个数据库表。可以在库中查询此模型的项目，该模型应返回包含模型字段的 HashMap。它还应该允许将 HashMap 保存到数据库中，前提是它们的结构与配置文件匹配。这些模型都不应该由实际编译的 Java 类来表示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:26:00.397

我认为您可以尝试使用 JPA 提供的 @MapKey 注释（不是 Hibernate @MapKey 注释，它完全不同！）。

```
@javax.persistence.OneToMany(cascade = CascadeType.ALL)
@javax.persistence.MapKey(name = "name")
private Map<String, Configuration> configurationMap = new HashMap<String, Configuration>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:27:13.887

我不相信 Hibernate 会让你拥有一个 Map 作为 @Entity 但它会让你拥有一个包含地图字段的自定义类：

```
@Entity
public class Customer {
    @Id @GeneratedValue public Integer getId() { return id; }
    public void setId(Integer id) { this.id = id; }
    private Integer id;

    @OneToMany @JoinTable(name="Cust_Order")
    @MapKeyColumn(name"orders_number")
    public Map<String,Order> getOrders() { return orders; }
    public void setOrders(Map<String,Order> orders) { this.orders = orders; }
    private Map<String,Order> orders;
} 
```

（来自 Hibernate 文档的示例）

此外，您不必使用注释（如果这是您想要避免的）：Hibernate 关系可以通过 xml 文件描述，并且有一些实用程序（例如 maven 插件）可以自动生成必要的 java pojo xml。

您的模型是否需要关系数据库？您可能会考虑使用像 Mongo 这样的数据库来存储您可以用 JSON 表示的任何对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:32:58.177

you can configure hibernate to work without any entity classes (beans linked to tables), 1\. you need to use xml configuration for this. in place of `class` use `entity-name` and in place of `<property name="something"` use `<property node="something"`.

1.  create a hibernate session with entiy-mode as map.

you can use a map to store and retuive information from db. Remember, since you are using map there will be difficulties in 2-way mapping (this was as of 3.3, not sure if its been fixed in later releses)

# c# - 如何在.net窗口形式的运行时用组合框替换文本框

> ID：13946510
> 
> 赞同：-1
> 
> 时间：2012-12-19T06:09:55.933
> 
> 标签：c#, .net, winforms

我想在运行时在我的 dot net windows 窗体应用程序中用组合框替换我的文本框我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:15:47.130

您应该在页面 Div 中同时拥有控件，并且根据您对某些事件的要求，您可以交换可见性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:29:50.680

感谢所有人，但我得到了解决方案。我得到了文本框的边界并将这些边界设置为动态创建的组合框，然后将控件添加到我的表单中。

# jquery - 在此指定一个类

> ID：13946513
> 
> 赞同：5
> 
> 时间：2012-12-19T06:10:17.983
> 
> 标签：jquery

我有以下标记：

```
<div class='mb_post'>
blah blah blah
  <div class='mb_footer'>footer info</div>
</div> 
```

mb_footer 将在加载时显示：none'd 然后我想要鼠标悬停以使其显示。我有：

```
$('.mb_post').on('mouseover',function(){
  $(this'.mb_footer').show();
}); 
```

但它不起作用。我将如何指定仅存在于其中的 mb_footer？

提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T06:10:57.967

差点就吃过了...

```
$('.mb_footer', this).show(); 
```

函数的第二个参数`$`可以是选择器的上下文。

或者，您可以执行`$(this).find('.mb_footer')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:23:43.907

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).on("hover", ".mb_post", function(){
        $('.mb_footer', this).show();
    })

</script>

<style>
    .mb_footer{display:none;}    
</style>

<div class='mb_post'>
    blah blah blah
    <div class='mb_footer'>footer info</div>
</div> 
```

# entity-framework - 是否可以先在 EF 代码中定义零或一对零或一个关联？

> ID：13946517
> 
> 赞同：0
> 
> 时间：2012-12-19T06:10:51.387
> 
> 标签：entity-framework, associations, code-first

我在我的领域问题中有一个*零或一对零或一个*关联，每个 [Order] 都可以从零或一个 [Quotation] 生成，并且 [Quotation] 可能不会更改为 [Order] 我如何对这个问题建模实体框架代码优先方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T10:33:30.160

好的，有可能，假设我们有两个类，我在[这个链接中解释它的方法](https://stackoverflow.com/questions/14701378/implementing-zero-or-one-to-zero-or-one-relationship-in-ef-code-first-by-fluent/14819265#14819265)

# php - 从字符串 PHP 中去除多字节空格

> ID：13946518
> 
> 赞同：7
> 
> 时间：2012-12-19T06:10:55.410
> 
> 标签：php, regex, utf-8, preg-replace, multibyte

我正在尝试使用 preg_replace从字符串输入中消除日语全角空格“”，但最终得到损坏的多字节字符串。

我更喜欢 preg_replace 而不是 str_replace。这是一个示例代码：

```
$keywords = 'ラメ単色';
$keywords = str_replace(array(' ', ' '), ' ', urldecode($keywords)); //输出：'ラメ単色'

$keywords = preg_replace("@[ ]@", ' ',urldecode($keywords)); // 输出：'�� ��単色'

```

任何人都知道为什么会这样以及如何解决这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T06:22:12.893

将`u`标志添加到您的正则表达式。这使得 RegEx 引擎将输入字符串视为 UTF-8。

```
$keywords = preg_replace("@[ 　]@u", ' ',urldecode($keywords));
// outputs :'ラメ単色' 
```

[键盘](http://codepad.viper-7.com/0kmBb4)。

它破坏字符串的原因是因为对于 RegEx 引擎，您的替换字符`20`(space) 或`e3 80 80`(IDEOGRAPHIC SPACE) 不被视为两个字符，而是单独的bytes`20`和.`e3``80`

当您查看要扫描的字符串的字节序列时，我们得到`e3 80 80 e3 83 a9 e3 83 a1 e5 8d 98 e8 89 b2`. 我们知道第一个字符是 IDEOGRAPHIC SPACE，但由于 PHP 将其视为字节序列，它会单独替换前四个字节，因为它们匹配正则表达式引擎正在扫描的单个字节。

至于导致 � (REPLACEMENT CHARACTER) 的修饰，我们可以看到发生这种情况，因为该字节`e3`在字符串中的位置更远。该`e3`字节是三字节长的日文字符的起始字节，例如`e3 83 a9`(KATAKANA LETTER RA)。当该前导`e3`被替换为`20`（空格）时，它不再成为有效的 UTF-8 序列。

当您启用该`u`标志时，RegEx 引擎将字符串视为 UTF-8，并且不会在每个字节的基础上处理您的字符类中的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:32:00.740

为避免其他问题，还请考虑将内部编码显式设置为您的 mb_* 函数解决方案：

```
mb_internal_encoding("UTF-8"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:22:04.093

深入研究文档总是好的。我发现 preg_* 相关函数没有针对多字节字符进行优化。相反，应该使用 mb_ereg_* 和 mb_* 函数。我通过将代码重构为以下内容解决了这个小问题：

```
$keywords = 'ラメ単色';
$pattern = " "/*ascii 空格*/ . " "/*多字节空格*/;
$关键字=修剪（
    mb_ereg_replace("[{$pattern}]+", ' ',urldecode($keywords))); //输出：'ラメ単色'

```

一样的谢谢！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-19T06:30:50.320

用这个

```
$keywords = preg_replace('/\s+/', ' ',urldecode($keywords)); 
```

# c++ - Windows 上的字体嵌入

> ID：13946520
> 
> 赞同：2
> 
> 时间：2012-12-19T06:11:03.537
> 
> 标签：c++, winapi, fonts

我需要将字体与我的数据一起存储，以确保我的文档在所有机器上都相同。为此，我使用 TTEmbedFont 来抓取字节并将它们保存出来，然后在将字体加载到内存后使用 TTLoadEmbeddedFont 来安装字体。

问题是每当我尝试使用 TTLoadEmbeddedFont 时，我都会收到 E_FONTDATAINVALID。它调用我的 READEMBEDPROC 三次，每次请求 4 个字节，然后返回错误。我的读取过程如下所示：

```
unsigned long CFontLoaderDlg::ReadFontCallback(
_In_  void *lpvReadStream,
_In_  void *lpvBuffer,
_In_  const unsigned long cbBuffer
)
{
    CFontLoaderDlg *loader = static_cast<CFontLoaderDlg *>(lpvReadStream);
    size_t remaining = loader->m_font_bytes.size() - loader->m_pos;
    size_t bytes_to_read = (cbBuffer > remaining) ? remaining : cbBuffer;
    memcpy(lpvBuffer, &(loader->m_font_bytes[loader->m_pos]), bytes_to_read);
    loader->m_pos += bytes_to_read;
    return bytes_to_read;
} 
```

向量 m_font_bytes 保存了我调用 TTEmbedFont 时写的再见。

我对 TTLoadFont 的调用如下所示：

```
 LONG ret =  TTLoadEmbeddedFont(
        &hFontReference,
        TTLOAD_PRIVATE,
        &ulPrivStatus,
        LICENSE_PREVIEWPRINT,
        &ulStatus,
        ReadFontCallback,
        this,
        nullptr,
        nullptr,
        nullptr
        ); 
```

有没有人遇到过类似的问题，或者让这些东西正常工作？

# .htaccess - 重定向许多文件夹和许多参数

> ID：13946525
> 
> 赞同：3
> 
> 时间：2012-12-19T06:11:55.570
> 
> 标签：.htaccess, mod-rewrite

需要重定向我将尝试用一个例子来解释：

在浏览器 url 栏中输入地址：

`http://example.com/any/folders/qty/FileName/?any number of key-value pairs separated by &`

被重定向到以下网址：

`http://example.com/any/folders/qty/FileName/FileName.php?any number of key-value pairs separated by &`

谷歌搜索了一个合适的解决方案并搜索了 SO，但找不到任何类似的有工作答案的东西，可能是因为大多数问题都非常令人困惑。我希望这个足够清楚。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:26:30.470

你可以试试这个：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI}  ^.*/([^/]*)/.*$ [NC]
RewriteRule ^(.*)/?$    $1%1.php? [L] 
```

将映射此：

`http://example.com/any/folders/qty/FileName/?key1=var1&key2=var2&key3=var3`

将此作为资源地址：

`http://example.com/any/folders/qty/FileName/FileName.php?key1=var1&key2=var2&key3=var3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:18:56.087

用这个：

```
 RewriteEngine on
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f

 RewriteRule ^(.*)$ index.php?url=$1 [L,QSA] 
```

说你的网址是：

```
 url=http://www.example.com/page/view?id=10&name=about_us 
```

在`index.php`

```
 $req=$_REQUEST['url'];
 $reqExtracted=explode('/',$req);
 $folder=$reqExtracted[0];
 $pagename=$reqExtracted[1];

 $id=$_REQUEST['id'];
 $name=$_REQUEST['name']; 
```

# c# - 使用 GetFileNameWithoutExtension 消除文件扩展名

> ID：13946535
> 
> 赞同：3
> 
> 时间：2012-12-19T06:13:28.773
> 
> 标签：c#, .net, silverlight, path, file-extension

我使用这种方法`Path.GetFileNameWithoutExtension`从字符串中删除文件扩展名，例如从“abc：file.jpg”到“abc：file”但是当我这样做时

```
Path.GetFileNameWithoutExtension("abc:file.jpg") 
```

它将结果显示为“文件”。它还删除了“abc:”。为什么会这样？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:16:55.743

字符“:”（冒号）作为文件名的一部分是不合法的。它将其解释为路径分隔符，因此当您仅请求文件名时，它将删除它以及它之前的任何内容。

这是检查文件名是否有效的一种方法：

此函数将对有效文件名返回 true，对无效文件名返回 false：

```
private bool IsValidFilename(string filename)
{
    //
    //-- Get array with invalid chars for filenames
    //
    char[] illegalChars = Path.GetInvalidFileNameChars;
    //
    //-- Go through each char in filename and check if the char is
    //   in our array of invalid chars
    //
    foreach (char c in filename) {
        if (illegalChars.Contains(c))
            return false;
    }
    //
    //-- All are valid, return true
    //
    return true;

} 
```

如果上述函数返回 false，您可以使用下一个函数来格式化文件名并删除非法字符（存在 os-functions 来执行此 IIRC，但这是手动执行的简单练习）：

```
private string MakeFilenameValid(string filename, char replacment)
{
    //
    //-- Get array with invalid chars for filenames
    //
    char[] illegalChars = Path.GetInvalidFileNameChars;
    StringBuilder validFilename = new StringBuilder();
    //
    //-- Go through each char in filename and check if the char is
    //   in our array of invalid chars. If it is, replace it
    //
    foreach (char c in filename) {
        if (illegalChars.Contains(c)) {
            validFilename.Append(replacment);
        } else {
            validFilename.Append(c);
        }
    }
    //
    //-- Return filename
    //
    return validFilename.ToString;

} 
```

使用示例：

```
private void Button1_Click(System.Object sender, System.EventArgs e)
{
    string filename = "abc:file.jpg";

    if (!IsValidFilename(filename)) {
        filename = MakeFilenameValid(filename, "_");
    }

    MessageBox.Show(filename);

} 
```

在 VB 中：

```
Private Sub Button1_Click(sender As System.Object, _
                          e As System.EventArgs) Handles Button1.Click

    Dim filename As String = "abc:file.jpg"

    If Not IsValidFilename(filename) Then
        filename = MakeFilenameValid(filename, "_")
    End If

    MessageBox.Show(filename)

End Sub
Private Function IsValidFilename(filename As String) As Boolean
    '
    '-- Get array with invalid chars for filenames
    '
    Dim illegalChars() As Char = Path.GetInvalidFileNameChars
    '
    '-- Go through each char in filename and check if the char is
    '   in our array of invalid chars
    '
    For Each c As Char In filename
        If illegalChars.Contains(c) Then Return False
    Next
    '
    '-- All are valid, return true
    '
    Return True

End Function
Private Function MakeFilenameValid(filename As String, replacment As Char) As String
    '
    '-- Get array with invalid chars for filenames
    '
    Dim illegalChars() As Char = Path.GetInvalidFileNameChars
    Dim validFilename As New StringBuilder
    '
    '-- Go through each char in filename and check if the char is
    '   in our array of invalid chars. If it is, replace it
    '
    For Each c As Char In filename
        If illegalChars.Contains(c) Then
            validFilename.Append(replacment)
        Else
            validFilename.Append(c)
        End If
    Next
    '
    '-- Return filename
    '
    Return validFilename.ToString

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:26:38.467

试试这个方法。。

```
Path.Combine(System.IO.Path.GetDirectoryName(path), System.IO.Path.GetFileNameWithoutExtension(path)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:18:52.460

最好首先正确命名您的文件，如 abcfile.jpg 或 abc_file.jpg。然后您将能够获得完整的文件名。

# objective-c - 私下实现协议？

> ID：13946536
> 
> 赞同：11
> 
> 时间：2012-12-19T06:13:34.430
> 
> 标签：objective-c, cocoa-touch

> **可能重复：**
> [私下遵守协议](https://stackoverflow.com/questions/3813316/conforming-protocol-privately)

我的一类试图将自己注册为它创建的 NSXMLParser 对象的委托。但是，我不认为我希望我的班级公开披露它实现了 NSXMLParserDelegate 协议，因为 NSXMLParser 对象是一个仅在班级内部使用的私有变量。

我是否正确避免披露协议，如果是这样，我如何在不公开该类这样做的情况下实现该协议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T06:26:36.243

尝试将其放入您的 .m 文件中：

```
@interface MyClass (Private) <NSXMLParser>
@end 
```

具体的类别名称`Private`（至少在那个文件中。

如果这不起作用，请在设置解析器的委托时尝试简单地`<NSXMLParser>`从 .h 文件中删除，并在必要时强制转换`self`为。`id<NSXMLParser>`

# jquery - JavaScript onclick 事件失败

> ID：13946538
> 
> 赞同：8
> 
> 时间：2012-12-19T06:13:53.510
> 
> 标签：jquery, html-table

我正在生成`html`，`append()`然后我试图简单地在单击按钮上发出警报，但它失败了。

**追加前我的 JavaScript**

```
$(document).ready(function() {

    function testFunction() {
        alert("simplty alert");
    }

    $('#selUsersToSendMail').click(function() {
        var selUsersArray = [];

        $(".tableBodyConfirmUser1").html('');

        $(".selUsersClass:checked").each(function() {
            var ids = $(this).attr('value');
            $(".tableBodyConfirmUser1").append("<tr id='subsUserId_" + ids + "' class='subsUserId_" + ids + "'>" + $("#selUserId_" + ids).html() + "</tr>");

            selUsersArray.push(ids);
        });

        $(".tableBodyConfirmUser1").append("<tr><td valign='top' colspan='3'><input type='button' style='width:50px;' name='sendMailBtn' id='sendMailBtn' class='sendMailBtn' value='Select' onclick='testFunction();'/></td></tr>");

    });

});​ 
```

**附加后我的HTML**

```
<table id="table-design" border="1" cellspacing="0" cellpadding="0" align="left" width='50%'>
    <thead>
        <tr>    
            <th scope="col" id="">Select</th>
            <th scope="col" id="">Name</th>
            <th scope="col" id="">Email</th>
        </tr>
    </thead>
    <tbody class='tableBodyConfirmUser'>
        <tr id='selUserId_3'>
            <td valign="top" width="319"><input type="checkbox" name='selUsr' value = "3" class='selUsersClass'/></td>
            <td valign="top" width="319"><a href='#' id='name' class='nameClass'>saurav</a></td>
            <td valign="top" width="319"><a href='#' id='email'>saurav1214@gmail.com</a></td>
        </tr>
        <tr id='selUserId_4'>
            <td valign="top" width="319"><input type="checkbox" name='selUsr' value = "4" class='selUsersClass'/></td>
            <td valign="top" width="319"><a href='#' id='name' class='nameClass'>bhupinder</a></td>
            <td valign="top" width="319"><a href='#' id='email'>bhupi@gmail.com</a></td>
        </tr>                               
        <tr>
            <td valign="top" colspan="3"><input type="button" style='width:50px;'name='sendMailBtn' id='sendMailBtn' value='Select' onclick='testFunction();'/> 
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T06:29:05.513

换行

```
$(".tableBodyConfirmUser1").append("<tr><td valign='top' colspan='3'><input type='button' style='width:50px;' name='sendMailBtn' id='sendMailBtn' class='sendMailBtn' value='Select' onclick='testFunction();'/></td></tr>"); 
```

到

```
$(".tableBodyConfirmUser1").append("<tr><td valign='top' colspan='3'><input type='button' style='width:50px;' name='sendMailBtn' id='sendMailBtn' class='sendMailBtn' value='Select'/></td></tr>"); 
```

IE。删除`onclick`并写下：

```
$(document).ready(function() {

     // delegate event handler for upcoming dom element
     // aka live event

     $('.tableBodyConfirmUser1').on('click', '#sendMailBtn', function() {
        alert('Button clicked');
     });

     // your code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:24:31.183

您必须为按钮绑定单击事件：-

```
 $("#sendMailBtn").click(function() {
      alert("Handler for .click() called.");
    }); 
```

所以你的代码基本上应该是这样的： -

```
$(document).ready(function() {

    $("#sendMailBtn").click(function() {
      alert("Handler for .click() called.");
    });

    $('#selUsersToSendMail').click(function(){
                var selUsersArray = [];

                $(".tableBodyConfirmUser1").html('');

                $(".selUsersClass:checked").each(function () {
                    var ids = $(this).attr('value');
                    $(".tableBodyConfirmUser1").append("<tr id='subsUserId_"+ids+"' class='subsUserId_"+ids+"'>"+$("#selUserId_"+ids).html()+"</tr>");

                    selUsersArray.push(ids);            
                });

                $(".tableBodyConfirmUser1").append("<tr><td valign='top' colspan='3'><input type='button' style='width:50px;' name='sendMailBtn' id='sendMailBtn' class='sendMailBtn' value='Select'/></td></tr>");

            });

}); 
```

检查更新的[小提琴](http://jsfiddle.net/4sm6c/2/)

注意：- 我已经从 HTML 中删除了 testFunction()。

# c++ - char 数组的长度

> ID：13946539
> 
> 赞同：3
> 
> 时间：2012-12-19T06:13:55.750
> 
> 标签：c++

我有这样的代码：

```
#include <iostream.h>
#include <fstream.h>
void main()
{
    char dir[25], output[10],temp[10];
    cout<<"Enter file: ";
    cin.getline(dir,25);           //like C:\input.txt
    ifstream input(dir,ios::in);
    input.getline(output,'\eof');
    int num = sizeof(output);
    ofstream out("D:\\size.txt",ios::out);
    out<<num;
} 
```

我想打印输出的长度。但它总是返回数字 10（给定长度），即使输入文件只有 2 个字母（就像“ab”一样）。我也使用过 strlen(output) 但没有任何改变。我如何只获得数组的使用长度？

我正在使用 VS C++ 6.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:17:20.617

`sizeof`数组上的运算符为您提供为数组分配的大小，即`10`.
您需要`strlen()`知道数组中占用的长度，但**您需要确保数组为空终止**。

使用 C++ 更好的选择是简单的使用：**`std::string`**而不是字符数组。然后你可以简单地使用**`std::string::size()`**来获取大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:22:35.797

`sizeof`总是根据对象的类型打印定义的对象大小，而不是字符串的长度。

至少按照目前的标准，您的代码存在一些非常严重的问题。看起来它是为 1993 年在 MS-DOS 上运行的编译器编写的，或者按此顺序编写的。使用当前的编译器，C++ 头文件最后不应该有`.h`，除其他外。

```
#include <iostream>
#include <fstream>
#include <string>

int main() {
    std::string dir, output, temp;

    std::cout<<"Enter file: ";
    std::getline(cin, dir);           //like C:\input.txt
    std::ifstream input(dir.c_str());
    std::getline(input, output);
    std::ofstream out("D:\\size.txt");
    out<<output.size();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:48:05.840

`getline`您正在使用的是一个未*格式化的输入函数*，因此您可以检索使用提取的字符数`input.gcount()`。

请注意，这`\e`不是标准的转义序列，并且字符常量`\eof`几乎肯定不会像您认为的那样做。如果您不想识别任何分隔符，您应该使用`read`, not `getline`，传递缓冲区的大小，以免溢出。

# r - GEE中的负二项式

> ID：13946540
> 
> 赞同：5
> 
> 时间：2012-12-19T06:14:16.163
> 
> 标签：r

对于实现 GEE 的 R 包，例如`gee`, `geepack`，似乎不包括负二项式系列。我有两个问题：

1.  是否还有其他我不知道的 GEE R 包？

2.  如果没有，是否有一个简单的步骤来允许创建一个族，即提供链接函数 ( `log mu`) 和方差函数 ( `mu + mu^2/theta`)，假设`theta`已指定（否则 NB 不是 GLM），然后让`gee`或`geepack`代码做以类似的方式开展业务`glm`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T19:40:29.880

您应该能够使用包中`negative.binomial`定义的族`MASS`来执行此操作（设置具有指定 theta 值的 NB 族）。看起来`geepack::geese`（至少）会接受这种形式的家庭规范。要估计 theta，您可以尝试将具有固定 theta 的 GEE 拟合嵌入到循环中，或者制作一个`geefit_NB(theta)`函数并优化`theta`.

如果`negative.binomial`在 中不存在`MASS`，您可以定义自己的系列（诚然，这有点高级——我将从下载`MASS`包的源代码并查看文件开始`R/neg.bin.R`）。

# c# - 使用实体框架进行还原和备份

> ID：13946541
> 
> 赞同：5
> 
> 时间：2012-12-19T06:14:26.443
> 
> 标签：c#, entity-framework

我在一个项目中使用 C#、.net 4、Entity Framework 和 SQL Server 2008 R2。

我不熟悉 Entity Framework 从数据库备份和恢复。请帮我在实体框架中编写恢复和备份代码

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T06:33:21.477

Entity Framework is an ORM - object-relational mapper - designed to handle interactions with single entities and/or short lists of entities. It's neither designed for bulk operations, nor is it a server admin framework. So no - I don't think you can do this using Entity Framework - that's not its job.

Use an appropriate tool for the job! Either use SQL Server Management Studio to handle backup/restore - or if you must do it programmatically, use the SMO (Server Management Objects) which is intended for exactly these kinds of jobs

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-08T05:47:37.260

对于其他有此问题的朋友....使用
ExecuteSqlCommand 可以备份 EF 6+ 中的数据库。
例如：（此代码为您的数据库创建备份，我已经对此进行了测试。）

```
string dbname = db.Database.Connection.Database;
string sqlCommand = @"BACKUP DATABASE [{0}] TO  DISK = N'{1}' WITH NOFORMAT, NOINIT,  NAME = N'MyAir-Full Database Backup', SKIP, NOREWIND, NOUNLOAD,  STATS = 10";
db.Database.ExecuteSqlCommand(System.Data.Entity.TransactionalBehavior.DoNotEnsureTransaction, string.Format(sqlCommand,dbname, "Amin9999999999999")); 
```

备份保存在 C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\Backup
ref=> [https://entityframework.codeplex.com/discussions/454994](https://entityframework.codeplex.com/discussions/454994)

> 但我不建议使用这种方法！

**我强烈推荐使用下面的文章：**
[http ://www.c-sharpcorner.com/Blogs/8679/backup-and-restore-the-database-in-Asp-Net-web-application.aspx](http://www.c-sharpcorner.com/Blogs/8679/backup-and-restore-the-database-in-Asp-Net-web-application.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-08T13:54:37.420

这应该让你在恢复方面进行：

```
void LoadDB(
    System.Data.Entity.DbContext context,
    string backup_filename,
    string orig_mdf, // the original LogicalName name of the data (also called the MDF) file within the backup file
    string orig_ldf, // the original LogicalName name of the log (also called the LDF) file within the backup file
    string new_database_name
)
{
    var database_dir = System.IO.Path.GetTempPath();
    var temp_mdf = $"{database_dir}{new_database_name}.mdf";
    var temp_ldf = $"{database_dir}{new_database_name}.ldf";
    var query = @"RESTORE DATABASE @new_database_name FROM DISK = @backup_filename
        WITH MOVE @orig_mdf TO @temp_mdf,
        MOVE @orig_ldf TO  @temp_ldf,
        REPLACE;";
    context.Database.ExecuteSqlCommand(
        // Do not use a transaction for this query so we can load without getting an exception:
        // "cannot perform a backup or restore operation within a transaction"
        TransactionalBehavior.DoNotEnsureTransaction,
        query,
        new[] {
        new SqlParameter("@backup_filename", backup_filename),
        new SqlParameter("@database_dir", database_dir),
        new SqlParameter("@new_database_name", new_database_name),
        new SqlParameter("@orig_mdf", orig_mdf),
        new SqlParameter("@orig_ldf", orig_ldf),
        new SqlParameter("@temp_mdf", temp_mdf),
        new SqlParameter("@temp_ldf", temp_ldf),
        }
    );
} 
```

如果您事先不知道它们，可以[手动](https://stackoverflow.com/a/1360669/1518546)或以[编程](https://stackoverflow.com/a/45513003/1518546)方式从如下查询中获取 MDF 和 LDF LogicalName 值：

```
RESTORE FILELISTONLY FROM DISK @backup_filename 
```

# javascript - 使用ajax加载xml文件显示未定义

> ID：13946542
> 
> 赞同：1
> 
> 时间：2012-12-19T06:14:26.433
> 
> 标签：javascript, jquery, html, xml, ajax

尝试使用 ajax 从 xml 文件加载内容时，它显示“ `undefined`” onload。只要我刷新页面，就会显示内容。

这是我的代码

```
$.ajax({
        type: "GET",
        url: "xml/FIB.xml",
        dataType: "xml",
        success: function(xml){
            var titletext=$(xml).find('Quiz').children().attr("name");
            $(".title_text").append(titletext);
            $(xml).find('question').each(function(){
                     nooffib=$(this).find("ques").length;

                        for(var a=0;a<nooffib;a++){
                        n=$(this).find('ques').eq(a).text();
                        questionarray[a]=n.replace("[blank]","<input id='"+a+"'type='text' class='blanktextbox' onkeyup='btnvisible()'/>");

                    }
            })
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:09:09.847

你做得对。但是您提供的网址不正确。通过更改 url 解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:35:02.060

也许 undefined 意味着您在进行 ajax 调用时尚未创建您引用的 dom 元素，刷新后，将创建元素“#your_selector”。尝试在文档准备好或某个事件之后执行，例如单击按钮，换句话说，在进行 ajax 调用之前检查是否已创建#your_selector：

```
$("#your_selector").on("click", function(event){
//execute your ajax call
}); 
```

或者

```
$("#your_selector").live("click", function(){
    //execute your ajax call
 }); 
```

或者

```
 $(document).ready(function() {
      //execute your ajax call
 }); 
```

一个完整的例子是：

```
function test(){
    $.ajax({
    type: "GET",
    url: "xml/FIB.xml",
    dataType: "xml",
    success: function(xml){
        var titletext=$(xml).find('Quiz').children().attr("name");
        $(".title_text").append(titletext);
        $(xml).find('question').each(function(){
                 nooffib=$(this).find("ques").length;

                    for(var a=0;a<nooffib;a++){
                    n=$(this).find('ques').eq(a).text();
                    questionarray[a]=n.replace("[blank]","<input id='"+a+"'type='text' class='blanktextbox' onkeyup='btnvisible()'/>");

                }
        })
    }
}); 
}

 $("#your_selector").live("click", function(){
    test();
 }); 
```

# javascript - 在 ipad 上实现 Jquery 视口

> ID：13946545
> 
> 赞同：10
> 
> 时间：2012-12-19T06:14:31.780
> 
> 标签：javascript, jquery, ipad, viewport

最近我在 ipad 上实现了一个类似功能 web 应用程序的电子书。一个功能是创建一个视口来拖动书籍。我使用了这个视口插件（带演示）： [http ://borbit.github.com/jquery.viewport/](http://borbit.github.com/jquery.viewport/)

问题是内容无法拖动。这可以在桌面上完美运行，但在 ipad 上却不行。电子书有两层，低层是书页。当用户点击这本书时，会显示一个覆盖层（顶层），它是一个用于拖动的较大 div。我怀疑 ipad 无法快速处理更高级别的 div。有什么方法可以在 ipad 中实现视口（请参阅上面链接中的示例）？谢谢

```
<div id="view" style="height: 385px; width: 1422px; position: relative; overflow: hidden; display: block;">
<div class="viewportBinder" style="position: absolute; overflow: hidden; height: 2541px; top: -1078px; width: 1247px; left: 88px;">
<div class="viewportContent ui-draggable" style="position: absolute; height: 1463px; width: 1247px; top: 329.98150634765625px; left: 0px;">
<div id="popup" style="height: 1463px; width: 1247px; display: block;"><img id="largeText" src="http://203.80.1.28/FlippingBook/development/demo/original/Web081112_P001_text.png"><img id="largeImg" src="http://203.80.1.28/FlippingBook/development/demo/original/Web081112_P001_image.jpg">
</div>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:22:54.653

我认为使用 jQuery UI Touch Punch 可以轻松解决这个问题，这个插件为 jQuery UI 添加了触摸事件支持。

[http://touchpunch.furf.com/](http://touchpunch.furf.com/)

尝试在视口脚本之前但在 UI 脚本之后添加脚本，例如：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.min.js"></script>   
<script type="text/javascript" src="jquery.ui.touch-punch.js"></script>
<script type="text/javascript" src="jquery.viewport.js"></script>
<script type="text/javascript" src="https://github.com/borbit/jquery.scraggable/raw/master/jquery.scraggable.js"></script> 
```

就这样！

# c# - 如何在 VS2010 接口的所有实现中自动添加或删除方法？

> ID：13946547
> 
> 赞同：3
> 
> 时间：2012-12-19T06:14:46.983
> 
> 标签：c#, visual-studio-2010, shortcut

在我当前的项目中，使用 Visual Studio 2010 和 C#，我经常发现自己必须更新已定义的接口，以添加新的或删除旧的方法和接口成员。结果，我必须回顾我的代码库，找到所有实现接口的类，并手动删除所有过时的方法和成员，或者通过为每个类选择“实现接口”来添加新的方法和成员。这非常乏味，并且减慢了我的工作流程。

有没有办法自动将新方法或接口成员的占位符实现添加到实现接口的所有类，而不必遍历每个类？同样，有什么方法可以在从类实现的接口中删除方法或成员的同时从类中删除它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:09:24.233

如果您使用的是[ReSharper](http://www.jetbrains.com/resharper/)，您只需将方法添加到界面，单击`Alt+Enter`并选择“将方法添加到派生类”：

![向接口添加方法](../Images/26ae53206f4a58b5d1ce0df07b9e02aa.png)

如果要删除方法，则可以使用`Refactor > Safe Delete ...`以下功能：

![安全删除](../Images/f32b4dda5a5ba16cd0ec459d1ab0c960.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T06:59:54.603

简短的回答：没有。

一种可能是：不更新接口，而是在接口上添加*扩展方法*，例如：

```
public static class SomeUtilityClass
{
    public static void DoTheAwesomez(this ISomeInterface obj, int count)
    {
        for(int i = 0 ; i < count ; i++)
        {
            obj.Foo();
            obj.Bar();
        }
    }
} 
```

那么如果你有：

```
ISomeInterface x = ...
x.DoTheAwesomez(20); 
```

* * *

但是对于常规的接口方法：不，没有自动添加它的方法，只需点击“build”，编译器就会告诉你哪些类型缺少它。将接口实现添加到公共基类通常可以轻松地同时命中多种类型。

*删除*方法：一种方法是使用显*式接口实现*：

```
class Foo : ISomeInterface {
    void ISomeInterface.SomeMethod(string x) {
         ....
    }
} 
```

现在，如果您`SomeMethod`从 中删除该方法`ISomeInterface`，编译器*将告诉您*使用它的所有位置。

找到所有方法的其他低技术`SomeMethod`方法包括：

*   `ctrl``shift``f`（全球发现） - 技术含量低，但有效......
*   就在你从接口中删除方法之前，重命名它**而不使用重构**（`SomeMethod_xyz`或其他）：现在，所有实现 this 的类型都会抱怨他们没有实现`SomeMethod_xyz`，所有*使用*this 的类型都会抱怨`SomeMethod`没有'不存在

# ruby-on-rails - Rails 的身份验证

> ID：13946550
> 
> 赞同：2
> 
> 时间：2012-12-19T06:14:51.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

对于那些熟悉 M. Hartl 的 RoR 教程的人，您是否知道书中教授的最新身份验证系统是否可以完全证明大型应用程序，或者您是否建议使用现成的身份验证系统，如 Devise 或 OAuth。

与现成的系统相比，我发现书中教授的系统非常容易遵循。我只是不确定其中是否存在任何安全漏洞。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:19:21.137

与设计一起去。

推出自己的身份验证系统非常适合练习，但很多人都胜过其中一个，尤其是在安全性方面。

# iphone - 核心数据的奇怪内存泄漏

> ID：13946556
> 
> 赞同：1
> 
> 时间：2012-12-19T06:15:43.030
> 
> 标签：iphone, core-data, memory-leaks, instruments

仪器检测到内存泄漏：

```
(Leaked Object= "__NSCFString") 
```

这是我的代码：

```
-(NSArray*)loadAllPages{
    NSManagedObjectContext *context = [self managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Page" inManagedObjectContext:context];
    [fetchRequest setEntity:entity];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                        initWithKey:@"date" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
    [sortDescriptor release];

    NSError *error = nil;
    myArray = [[NSArray alloc ]initWithArray:[[context executeFetchRequest:fetchRequest error:&error]autorelease]];

    [fetchRequest release];
    if (myArray == nil)
        NSLog(@"%@",error);
    return myArray;
} 
```

指向泄漏的行是初始化`myArray`。如果我不返回`myArray`，则不会发生这种泄漏，所以这对我来说很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:26:25.260

在这一行

```
myArray = [[NSArray alloc ]initWithArray:[[context executeFetchRequest:fetchRequest error:&error]autorelease]]; 
```

方括号略有错误。被`autorelease`发送到 的结果`[context executeFetchRequest:...]`，而不是分配的数组。

`[context executeFetchRequest:...]`返回一个自动释放的数组。发送`autorelease`到该数组是一个错误。并且`myArray`已分配，但未在您的代码中发布。

Xcode 静态分析器也将此报告为错误：

![在此处输入图像描述](../Images/20a55e372c216ff6e60eac481e88c5b2.png)

我假设你的意思是

```
myArray = [[[NSArray alloc] initWithArray:[context executeFetchRequest:fetchRequest error:&error]] autorelease]; 
```

这将导致一个自动释放的数组`myArray`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:19:26.390

如果您不使用 ARC。

改变`return myArray;`_`return [myArray autorelease];`

您正在从您的方法返回一个分配的对象，该对象的所有权仍然属于该方法，在这种情况下，您应该返回一个 auroreleased 对象并将其保留在接收端。然后该对象的所有权将与调用方法有关。

# java - 解析和比较 XML 标记文本以获取同级

> ID：13946563
> 
> 赞同：0
> 
> 时间：2012-12-19T06:16:18.590
> 
> 标签：java, android, xml-parsing

我正在解析如下所示的 NOAA XML：

```
<time-layout time-coordinate="local" summarization="12hourly">
<layout-key>k-p12h-n14-1</layout-key>
<start-valid-time period-name="Tonight">2012-12-18T18:00:00-08:00</start-valid-time>
<start-valid-time period-name="Wednesday">2012-12-19T06:00:00-08:00</start-valid-time>
<start-valid-time period-name="Wednesday Night">2012-12-19T18:00:00-08:00</start-valid-time>
<start-valid-time period-name="Thursday">2012-12-20T06:00:00-08:00</start-valid-time>
<start-valid-time period-name="Thursday Night">2012-12-20T18:00:00-08:00</start-valid-time>
<start-valid-time period-name="Friday">2012-12-21T06:00:00-08:00</start-valid-time>
<start-valid-time period-name="Friday Night">2012-12-21T18:00:00-08:00</start-valid-time>
<start-valid-time period-name="Saturday">2012-12-22T06:00:00-08:00</start-valid-time>
<start-valid-time period-name="Saturday Night">2012-12-22T18:00:00-08:00</start-valid-time>
<start-valid-time period-name="Sunday">2012-12-23T06:00:00-08:00</start-valid-time>
<start-valid-time period-name="Sunday Night">2012-12-23T18:00:00-08:00</start-valid-time>
<start-valid-time period-name="Monday">2012-12-24T06:00:00-08:00</start-valid-time>
<start-valid-time period-name="Monday Night">2012-12-24T18:00:00-08:00</start-valid-time>
<start-valid-time period-name="Christmas Day">2012-12-25T06:00:00-08:00</start-valid-time>
</time-layout> 
```

文档中还有其他标签，但我想要**k-p12h-n14-1**标签。

如何仅为 k-p12h-n14-1 后面的期间名称获取 period-name="*"？

这是一个[完整的 XML 文件示例](http://forecast.weather.gov/MapClick.php?lat=37.36354&lon=-118.39511010000001&unit=0&lg=english&FcstType=dwml)

我试图用以下方法弄清楚：

```
List<XmlDom> wxday = xml.tags("time-layout","time-coordinate","summarization");
String wxd = wxday.child("layout-key");
String wxdd = wxday.equals("k-p12h-n14-1");
kind of lost.... 
```

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:44:46.873

您可以使用以下代码：

```
 File fXmlFile = new File("MapClick.php.xml");
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(fXmlFile);

    Element rootElement = doc.getDocumentElement();

    NodeList nodeList = rootElement.getElementsByTagName("layout-key");
    int size = nodeList.getLength();

    for (int i = 0; i < size; i++) {
        Node currentNode = nodeList.item(i);

        if (currentNode.getTextContent().trim().equals("k-p12h-n14-1")) {
            while (currentNode.getNextSibling() != null) {
                currentNode = currentNode.getNextSibling();

                if (currentNode.getNodeName().equals("start-valid-time")) {
                    System.out.println(((Element)currentNode).getAttribute("period-name"));
                }
            }
        }
    } 
```

# unity3d - 在统一 3d 中销毁游戏对象

> ID：13946569
> 
> 赞同：2
> 
> 时间：2012-12-19T06:16:53.080
> 
> 标签：unity3d, project, monodevelop, unityscript, gameobject

在 unity3d 我宣布

```
var ribbon : GameObject; 
```

在启动功能中，我使用了代码

```
Destroy (ribbon.gameObject, 5); 
```

显示错误“不允许销毁资产以避免数据丢失。如果您真的想删除资产，请使用 DestroyImmediate (theObject, true);”

我怎样才能摧毁这个游戏对象？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:10:10.280

试试这个

```
Destroy(gameObject.Find("ribbon"), 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-31T10:15:05.493

如果你已经分配了功能区游戏对象，你可以这样做`Destroy(ribbon,5);`，功能区已经是一个游戏对象，不需要做ribbon.gameObject

# android - 将 Phonegap 的片段混合到本机应用程序

> ID：13946572
> 
> 赞同：0
> 
> 时间：2012-12-19T06:16:58.253
> 
> 标签：android, ios, cordova, titanium

我们有一个要求，我们需要在应用程序的某些区域生成类似 UI 的 FORM。为此，我们正在考虑使用 phonegap / Titan 等编写一个层，以便同样可以用于 iOS / Android。使用 Phonegap，我知道我可以使用 Cleaver 包含一个 CDVWebView，它将显示所有表单。

我的问题是，有没有办法在 phonegap 视图中嵌入自定义本机视图（比如显示图形的自定义 UIView）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:56:09.143

您可以将其实现为插件，以便您的 PhoneGap 视图上的某些内容触发本机视图的显示，但您不能真正将其嵌入到 phonegap 视图中，因为 phonegap 视图只是在 web 视图中呈现 html。你会得到类似子视图或弹出框的东西。

# c# - 为什么出现错误消息“InvalidOperationException”

> ID：13946575
> 
> 赞同：0
> 
> 时间：2012-12-19T06:17:04.937
> 
> 标签：c#, invalidoperationexception

我的代码如下：

```
namespace EntityDAO
{
   public static class StudentDAO
    {
       public static Boolean AddStudent(StudentDTO oDto)
       {
           string str =System.Configuration.ConfigurationManager.AppSettings["myconn"];
           SqlConnection oconnection = new SqlConnection(str);

           oconnection.Open();

           try
           {
               string addstring = "insert into STUDENT(ID,NAME)values('"
               + oDto.ID + "','"
               + oDto.NAME + "')";
               SqlCommand ocommand = new SqlCommand(addstring,oconnection);
               ocommand.ExecuteNonQuery();
               return true;
           }
           catch
           {
               return false;
           }
           finally
           {
               oconnection.Close();
           } 
```

但是当我运行这个程序时，出现了一条错误消息，错误消息 `oconnection.Open();`和消息是`'InvalidOperationException'(Instance failure)`。我已经尝试了很多次来解决这个问题，但我没有解决这个问题。所以请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:59:14.930

以下建议不是您问题的完整解决方案，但应该可以帮助您解决问题：

```
namespace EntityDAO
{
    public static class StudentDAO
    {
        public static Boolean AddStudent(StudentDTO oDto)
        {
            var str = ConfigurationManager.AppSettings["myconn"];
            using (var oconnection = new SqlConnection(str))
            {
                oconnection.Open();

                try
                {
                    var addstring = string.Format(
                        "insert into STUDENT(ID,NAME)values('{0}','{1}')", oDto.ID, oDto.NAME);
                    using (var ocommand = new SqlCommand(addstring, oconnection))
                    {
                        ocommand.ExecuteNonQuery();
                    }
                    return true;
                }
                catch (Exception ex)
                {
                    Debug.WriteLine(ex.ToString());
                    return false;
                }
            }
        }
    }
} 
```

永远不要对自己隐藏异常。即使此代码的调用者想要 true 或 false，请确保记录异常的详细信息。

另外，AYK 关于 SQL 注入的说法。我输入的是 CW，所以如果有人比我有更多的时间，他们应该随时编辑以使用参数。

# android - 如何缩小 ViewPager Android 中使用的图像？

> ID：13946580
> 
> 赞同：1
> 
> 时间：2012-12-19T06:17:24.453
> 
> 标签：android, android-viewpager

我按照本教程[http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizo​​ntal-view-paging/](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)

我有一个看起来像这样的寻呼机适配器（下面的代码），我收到一条错误消息，说我的图像太大。( **java.lang.OutOfMemoryError: 位图大小超出 VM 预算。** )

我知道很多人问过这个问题，我用谷歌搜索并找到了很多解决方案。但是，我似乎无法正确运行它。我是新手，希望能在这里得到一些答案，因为我不知道我还能做什么。

位图解码适用于图像，但如果我的图像采用如下布局怎么办。如何缩小图像？

```
public class TutorialPagerAdapter extends PagerAdapter {

Activity activity;
int imageArray[];
private Resources resource;  

    private class MyPagerAdapter extends PagerAdapter {
    public int getCount() {
        return 5;
    }
    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.farleft;
        try{
            mImageView = (ImageView) collection.findViewById(R.id.tutorial);
            mImageView.setImageBitmap(decodeSampledBitmapFromResource(activity.getResources(), R.id.tutorial, 100, 100));
            }
            catch (NullPointerException e)
            {
                e.printStackTrace();
            }

            break;
        case 1:
            resId = R.layout.left;
            break;
        case 2:
            resId = R.layout.middle;
            break;
        case 3:
            resId = R.layout.right;
            break;
        case 4:
            resId = R.layout.farright;
            break;
        }
        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);
        return view;
    }
    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }
    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }
    @Override
    public Parcelable saveState() {
        return null;
    }

public static Bitmap decodeSampledBitmapFromResource(String res, int reqWidth, int reqHeight) {      

    // First decode with inJustDecodeBounds=true to check dimensions
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeFile(res, options);

 // Calculate inSampleSize
options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

// Decode bitmap with inSampleSize set
options.inJustDecodeBounds = false;
return BitmapFactory.decodeFile(res, options);
  }

public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 1;

if (height > reqHeight || width > reqWidth) {
    if (width > height) {
        inSampleSize = Math.round((float)height / (float)reqHeight);
    } else {
        inSampleSize = Math.round((float)width / (float)reqWidth);
                  }
                      }
return inSampleSize;}

} 
```

**编辑**

我试过`mImageView.setImageBitmap(decodeSampledBitmapFromResource...)`了，但我在这一行得到了空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:23:04.927

试试这个代码可能对你有帮助它在视图寻呼机中绑定了两个imageview[如何在android中的多个imageview上进行捏缩放和滑动？](https://stackoverflow.com/questions/13618447/how-to-do-pinching-zoom-and-swipe-on-multiple-imageview-in-android).

# java - Spring/Java Mail：FROM 地址被忽略

> ID：13946581
> 
> 赞同：7
> 
> 时间：2012-12-19T06:17:29.937
> 
> 标签：java, spring, gmail, jakarta-mail

我正在将 JavaMail 与 Spring FW 一起使用。一切都很好，但我不知道为什么 FROM 地址总是错误的；它似乎忽略了它，而是说它真正来自哪里。我想要的东西会在一瞬间变得清晰。首先，这是我的代码：

**配置**

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="smtp.gmail.com"/>
    <property name="port" value="25"/>
    <property name="username" value="[my gmail address]"/>
    <property name="password" value="[my password]"/>
    <property name="javaMailProperties">
        <props>
            <prop key="mail.transport.protocol">smtp</prop>
            <prop key="mail.smtp.auth">true</prop>
            <prop key="mail.smtp.starttls.enable">true</prop>
            <!--<prop key="mail.debug">true</prop>-->
        </props>
    </property>
</bean> 
```

**帮手班**

```
@Service("mailService")
public class MailService {

    @Autowired
    private JavaMailSenderImpl mailSender;

    public void sendMail(String from, String to, String subject, String body) {
        try {
            MimeMessage message = mailSender.createMimeMessage();
            MimeMessageHelper helper = new MimeMessageHelper(message, true);
            helper.setFrom(from);
            helper.setTo(to);
            helper.setSubject(subject);
            helper.setText(body, true);
            mailSender.send(message);
        }
        catch (MessagingException ex) {
            Logger.getLogger(MailService.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    //etc...
} 
```

**控制器代码片段**

```
mailService.sendMail(
    contactModel.getEmail(), //From
    Constants.DefaultEmailAddress, //To
    "Enquiry from site", "Phone: " + contactModel.getPhone() + "<br />Message: <br />" + contactModel.getMessage()); 
```

基本上，`contactModel`它是一个普通的 Java 类，具有一些属性，用于在**联系我们**表单上从用户那里收集信息。当我发送电子邮件时，我目前看到的 FROM 地址与 TO 地址相同。我不知道我是否需要对配置进行一些更改，或者 Gmail 是否可能不允许我这样做。想法，有人吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-11T10:02:54.647

Google 不允许您从您的帐户发送邮件，说您不是您（其他域）。

因此，它将使用您授权的帐户覆盖发件人，并保存您在`X-google-original-from`标题中指定的内容。您必须按照[https://support.google.com/mail/answer/22370?hl=en](https://support.google.com/mail/answer/22370?hl=en)中的指定添加您的外部帐户（或者如果您有 Google Apps，则添加您的外部域以在 Google 中进行管理）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-03T07:56:16.473

要使用将“setFrom”更改为另一个电子邮件地址的 gmail 帐户，您必须执行以下操作：

1.  将新地址添加到您的 gmail 帐户。说明在这里：[https ://support.google.com/mail/answer/22370?hl=en](https://support.google.com/mail/answer/22370?hl=en)
2.  设置“始终从不同地址发送”。说明在同一链接下。
3.  在 gmail 帐户设置/帐户和导入/发送邮件中，将您的新电子邮件地址设置为默认值。
4.  在 AppConfig.java 中键入：

    ```
    @Bean
    public JavaMailSender javaMailSender() {
    JavaMailSenderImpl mailSender = new JavaMailSenderImpl();
    mailSender.setHost("smtp.gmail.com");
    mailSender.setPort(587);
    mailSender.setUsername("address@gmail.com");
    mailSender.setPassword(your gmail's password);
    mailSender.getJavaMailProperties().setProperty("mail.smtp.auth", "true");
    mailSender.getJavaMailProperties().setProperty("mail.smtp.starttls.enable", "true");
    return mailSender; 
    ```

    }

5.  在 EmailServiceImplementation.java 中输入：

    ```
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.mail.SimpleMailMessage;
    import org.springframework.mail.javamail.JavaMailSender;
    import org.springframework.stereotype.Service;

    @Service       
    public class EmailServiceImpl implements EmailService {
    @Autowired
    private JavaMailSender mailSender;
    @Override
    public void sendEmail(String fromAddress, String toAddress, String subject, String body) {
    SimpleMailMessage mailMessage = new SimpleMailMessage();

    mailMessage.setTo(toAddress);
    mailMessage.setFrom("emailWhichYouWishToShow@gmail.com");
    mailMessage.setSubject(subject);
    mailMessage.setText(body);

    mailSender.send(mailMessage);
    }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:24:49.070

我不确定为什么没有设置您的收件人地址，我会放置一个日志语句来查看传递给 sendMail 方法的内容。

在您的课程中，您应该使用 MailSender 而不是 MailSenderImpl，因为 MailSender 是您要使用的接口。在我的应用程序中，我使用 SimpleMailMessage 而不是 MimeMessage，这对我有用，下面是我过去使用的代码片段。

```
@Autowired
private MailSender mailSender;

// Email is my own Pojo with from, to, subject and body properties.
@Transactional(propagation = Propagation.REQUIRES_NEW)
    public void sendEmail(Email email)
    {
            // create email message
            SimpleMailMessage msg = new SimpleMailMessage();
            msg.setFrom(email.getFromAddress());
            msg.setTo(email.getToAddress());
            msg.setSubject(email.getSubject());
            msg.setText(email.getBody());

            // send the message using spring mail sender
            this.mailSender.send(msg);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-21T12:48:12.593

我知道这个问题很老，但请考虑按照 Google 的说明进行操作

> 您可以使用 SMTP 或 SSL 连接到 Google Apps 邮件服务器。如果您使用 SMTP 连接，则只能向 Gmail 或 Google Apps 用户发送邮件；如果您使用 SSL 连接，您可以向任何人发送邮件。
> 
> 如果您的设备或应用程序支持 SSL，请在端口 465 或 587 上连接到 smtp.gmail.com。

并且您正在使用端口 25。

# arrays - 在 yii 如何刷新数组或如何删除数组的先前条目

> ID：13946583
> 
> 赞同：0
> 
> 时间：2012-12-19T06:17:32.543
> 
> 标签：arrays, yii

我在 Yii 工作。我在控制器中有以下功能-

```
public function actiongetDnySubjectLink()
{
$contentTitleId=1;  
$category=new Dnycontentcategories();
$record=$category->getCheckByParentTitleId($contentTitleId);
foreach ($record as $rec)
    {
    echo "</br>"."Main category is: " .$rec->childTitleId;      
    $parent=$category->getCheckByContentTitleId($rec->childTitleId);
    echo $parent->englishTitle;     
    $record1=$category->getCheckByParentTitleId($rec->childTitleId);
    foreach ($record1 as $rec)
        {
        echo "subcategory is :".$rec->childTitleId;
        $child=$category->getCheckByContentTitleId($rec->childTitleId);
        $childlist[]=$child->englishTitle;
        echo $child->englishTitle;
        }
    echo CJSON::encode(array("parent"=>$parent->englishTitle,"child"=>$childlist))."</br>";
    }   
} 
```

`json`所以我想以格式发送父母及其子女。但是`$childlist[]`数组存储了所有父母的所有孩子。那么如何刷新这个数组以便只存储当前父母的孩子。即如何在存储新父母的孩子之前使数组为空。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:33:10.687

如果您还没有尝试过，请尝试将数组初始化为 null。可能是这样的
`$childlist = array();`

# mysql - Mysql ZeosLib Delphi XE3

> ID：13946584
> 
> 赞同：4
> 
> 时间：2012-12-19T06:17:37.130
> 
> 标签：mysql, delphi, zeos

我想知道如何将查询保存在内存中以在 DBgrid 中显示，

我当前的应用程序正在使用：

TZConnection > TZquery > 数据源 > DBgrid

工作正常，但这里的问题是，在调用 ZConnection.disconnect 后，dbgrid 被清理

我想在完成查询后立即断开 TZConnection，因为大多数 MySQL 数据库同时连接的用户数量有限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:38:58.337

使用 TDataSetProvider 将您的查询数据传输到 ClientDataSet。该组件为您完成所有工作。

将以下组件放在您的 DataModule 上，并相应地链接它们：

```
TZQuery <- TDataSetProvider <- TClientDataSet <- TDataSource

TDataSource.DataSet := TClientDataSet;
TCLientDataSet.ProviderName := TDataSetProvider;
TDataSetProvider.DataSet := TZQuery; 
```

之后，只需调用该`TClientDataSet.Open`方法，数据就会自动传输到 TClientDataSet 中。使用`TClientDataSet.ApplyUpdates`，您可以将数据推回数据库。

我将该技术与 firebird (TIBQuery) 一起使用。

以下是有关 ClientDataSets 的一些信息：
[每个数据库应用程序中的 ClientDataSet](http://edn.embarcadero.com/article/28876)
[Delphi 深度：ClientDataSet 书籍](http://www.jensendatasystems.com/cdsbook/)
[使用 ClientDataSet 和 InterBase Express 构建应用程序](http://edn.embarcadero.com/article/27653)

# windows-phone-7 - 单击 ApplicationBarMenuItem 时触发弹出窗口

> ID：13946585
> 
> 赞同：0
> 
> 时间：2012-12-19T06:17:45.070
> 
> 标签：windows-phone-7, popup, application-bar

单击时我需要触发一个弹出`ApplicationBarMenuItem`窗口。但是当我单击时没有任何反应`MenuItem`。这是我的代码；

```
<shell:ApplicationBar.MenuItems>
     <shell:ApplicationBarMenuItem Text="Go by date" Click="GoByDate_Click" />
</shell:ApplicationBar.MenuItems>

private void GoByDate_Click(object sender, EventArgs e)
{
     Popup popup = new Popup();
     popup.Height = 480;
     popup.Width = 480;
     popup.VerticalOffset = 100;
     DatePopupControl datePopup = new DatePopupControl(); // just a user control comes when add new
     popup.Child = datePopup;
     popup.IsOpen = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:50:37.990

您的**DatePopupControl 出了点**问题，因为您的代码对于我自己的测试控件运行良好。能否提供 DatePopupControl 源代码？

好吧，让我试着猜猜。我的第一个理论是：在这个弹出窗口中没有什么可显示的。例如，如果您添加一个 userControl，其中只有**Grid**标记而没有任何内容，您*将*在 Visual Studio 的编辑器中看到，但它*不会*作为弹出子项可见。但是，如果您添加单个文本块，它将是。

# jquery - 将 turn.js 与 hash.js 一起使用时偏移页码

> ID：13946591
> 
> 赞同：0
> 
> 时间：2012-12-19T06:18:18.423
> 
> 标签：jquery, hash

我正在使用 turn.js 和 hash.js 创建一个分页的翻书：[www.professorleonidas.com/livro](http://www.professorleonidas.com/livro)

我想要的是页码在目录之后开始，所以基本上将散列中显示的页码偏移 8 （第 9 页在地址栏中变为 1）。

当然，我仍然希望链接能够正常工作。所以[http://www.professorleonidas.com/livro/#page/9](http://www.professorleonidas.com/livro/#page/9)转到新的 9（不是 1）。

剧本：

```
$('.book').turn({
        // Width

        width:960,

        // Height

        height:600,

        // Elevation

        elevation: 50,

        // Enable gradients

        gradients: true,

        // Auto center this flipbook

        autoCenter: true,

        // Events

        when: {
            turning: function(event, page, view) {

                Hash.go('page/' + page).update();
                //Hash.go('page/' + page).update();

            }}

});
Hash.on('^page\/([0-9]*)$', {
    yep: function(path, parts) {

        var page = parts[1];

        if (page!==undefined) {
            if ($('.book').turn('is'))
                $('.book').turn('page', page);
        }

    },
    nop: function(path) {

        if ($('.book').turn('is'))
            $('.book').turn('page', 1);
    }
});` 
```

希望有人能给我一些指导。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T10:56:37.953

我认为您需要更新页面

```
when: {
   turning: function(event, page, view) {

   $(this).turn('page');
   Hash.go('page/' + page).update();
   //Hash.go('page/' + page).update();

} 
```

# c# - C# XSD 验证在 minOccurs="0" 的元素上失败

> ID：13946592
> 
> 赞同：3
> 
> 时间：2012-12-19T06:18:22.697
> 
> 标签：c#, .net, xml, xsd

我正在针对这个 XSD 验证一些 XML：

```
 <xs:element name="Composite">
    <xs:complexType>
      <xs:sequence minOccurs="0" maxOccurs="unbounded">
        <xs:element name="HeldCurrency" type="mstns:HeldCurrencyType"  nillable="true"/>
        <xs:element name="Component" type="mstns:ComponentType" nillable="true" minOccurs="0"/>
      </xs:sequence>
      <xs:attribute  name="Type" type="mstns:compositeType" use="required"/>
    </xs:complexType>x
  </xs:element>

  <xs:complexType name="HeldCurrencyType">
    <xs:attribute  name="CashPerCreationUnit" type="xs:double" />
    <xs:attribute  name="CashCurrency" type="xs:string" />
    <xs:attribute  name="ClosingSpotFx" type="xs:double" />
  </xs:complexType>

  <xs:complexType name="ComponentType">
    <xs:choice>
      <xs:element name="Weight" type="xs:double"/>
      <xs:element name="Units" type="xs:int"/>
    </xs:choice>
    <xs:attribute name="Symbol" type="xs:string" />
  </xs:complexType>

  <xs:simpleType name="compositeType">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Index" />
      <xs:enumeration value="Etf" />
    </xs:restriction>
  </xs:simpleType> 
```

当我对它运行以下 XML 时：

```
<?xml version="1.0"?>
<Composite xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Type="Etf" xmlns="urn:xxx-au:index-types">
  <HeldCurrency />
  <Component />
</Composite> 
```

我使用以下代码在 C#/.Net4.0 中运行它：

```
using (FileStream fileStream = File.OpenRead("./Xml/Components.xsd"))
{
    using (var schemaReader = new XmlTextReader(fileStream))
    {
        settings.Schemas.Add(null, schemaReader);
        settings.ValidationType = ValidationType.Schema;
        settings.ValidationEventHandler += OnValidationEventHandler;

        using (FileStream infile = File.OpenRead(filename))
        {
            using(var xmlReader = XmlReader.Create(infile,settings))
            {
                var serialiser = new XmlSerializer(typeof (Composite));
                _composite = (Composite) serialiser.Deserialize(xmlReader);
            }
        }
    }
} 
```

我收到以下错误：命名空间“urn:xxx-au:index-types”中的元素“组件”内容不完整。预期的可能元素列表：命名空间中的“重量，单位”。但是，我有 minOccurs="0" 那么为什么这会是一个问题呢？毕竟，序列不包含 ComponentType 元素是合法的，对吧？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:27:34.030

元素`Component`的 minOccurs`0`不是它的子元素'..

所以试试这个：

```
 <xs:complexType name="ComponentType">
    <xs:choice>
      <xs:element name="Weight" type="xs:double" minOccurs="0"/>
      <xs:element name="Units" type="xs:int" minOccurs="0"/>
    </xs:choice>
    <xs:attribute name="Symbol" type="xs:string" use="optional"/>
  </xs:complexType> 
```

我已将重量和单位的出现定义为“0”，也将属性设为可选！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:27:48.590

```
<xs:element name="Component" type="mstns:ComponentType" nillable="true" minOccurs="0"/> 
```

这里`minOccurs`是专门针对“组件”元素的——而不是它的内容。ComponentType 的内容为`xs:choice`，但没有`minOccurs`of `0`。因此，您可以完全省略“组件”，但不能省略其内容。

# django - 如何将 Django 报告工具链接到我的 Django 模板页面

> ID：13946595
> 
> 赞同：1
> 
> 时间：2012-12-19T06:18:48.310
> 
> 标签：django, reporting

我正在使用**django-reporting 0.21**工具生成报告，它通过 django 管理页面（如 127.0.0.1:8000/reporting）生成 csv 文件和图形。

使用此网址，每个人都使用报告链接，但我需要它是安全的，只有少数人可以查看此链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:32:01.603

您可以通过以下方式更改 URL

```
urlpatterns = patterns('',
    [...]
    (r'^you_own_reporting_url/', include('reporting.urls')),
) 
```

而且`django-reporting`只有两个 URL，您可以在模板中的任何位置调用它们

```
{% url reporting-list %}
{% url reporting-view variable_slug %} 
```

# c# - 验证码图像未显示在远程服务器上

> ID：13946600
> 
> 赞同：1
> 
> 时间：2012-12-19T06:19:08.880
> 
> 标签：c#, asp.net

我的验证码图像有问题。它在我的本地系统上运行良好，但在远程服务器上却不行。最近我们转移了在以前的服务器上运行良好的服务器。我没有错过任何参考资料。请尽快回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:26:33.520

检查您的事件日志或其他日志。您是否尝试过访问服务器内的页面并查看它是否在内部打开？

服务器负载均衡吗？

# android - ExpandableListView 在底部不会滚动

> ID：13946601
> 
> 赞同：3
> 
> 时间：2012-12-19T06:19:10.217
> 
> 标签：android, android-layout, scroll, expandablelistview

我有一个带有`Activity`,`ExpanableListView`内部的 Android 应用程序。

我想要的是`ExpandableListView`滚动所选组的标题，当我点击它时，如果它不能（因为没有足够的垂直空间），我希望它滚动到底部。

如果我在列表视图底部有更多空间时点击一个组（即：其他组），则一切正常，并且列表视图滚动以显示子项。（编辑：不，它没有；它只在第一次点击时正常工作，所有连续的尝试都不会导致滚动）

但是，如果列表视图没有空间，则不会发生滚动，组会展开，然后我可以进一步向下滚动以查看组子项。

我尝试了很多事情，例如覆盖' `onGroupClick`'和调用' `smoothScrollToPosition`'，但结果几乎相同。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-21T14:03:11.443

您可以尝试类似下面的方法。完美运行：

```
public static class LineupFragment extends Fragment {

View rootView;
ExpandableListView lv;
private String[] groups;
private String[][] children;

public LineupFragment() {

}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    groups = new String[] { "Test Header 1", "Test Header 2", "Test Header 3", "Test Header 4" };

    children = new String [][] {
        { "s simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum." },
        { "Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of comes from a line in section 1.10.32." },
        { "It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like)." },
        { "There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text. All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words etc." }
    };
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    rootView = inflater.inflate(R.layout.fragment_lineup, container, false);  

return rootView;
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    lv = (ExpandableListView) view.findViewById(R.id.expListView);
    lv.setAdapter(new ExpandableListAdapter(groups, children));
    lv.setGroupIndicator(null);

}

public class ExpandableListAdapter extends BaseExpandableListAdapter {

    private final LayoutInflater inf;
    private String[] groups;
    private String[][] children;

    public ExpandableListAdapter(String[] groups, String[][] children) {
        this.groups = groups;
        this.children = children;
        inf = LayoutInflater.from(getActivity());
    }

    @Override
    public int getGroupCount() {
        return groups.length;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return children[groupPosition].length;
    }

    @Override
    public Object getGroup(int groupPosition) {
        return groups[groupPosition];
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return children[groupPosition][childPosition];
    }

    @Override
    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public View getChildView(int groupPosition, final int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {

         ViewHolder holder;
            if (convertView == null) {
                convertView = inf.inflate(R.layout.list_item, parent, false);
                holder = new ViewHolder();

                holder.text = (TextView) convertView.findViewById(R.id.lblListItem);
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.text.setText(getChild(groupPosition, childPosition).toString());

            return convertView;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {
            convertView = inf.inflate(R.layout.list_group, parent, false);

            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.lblListHeader);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.text.setText(getGroup(groupPosition).toString());

        return convertView;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    private class ViewHolder {
        TextView text;
    }
} 
```

# php - 使用自定义主题上的静态主页内容拆分小部件区域

> ID：13946602
> 
> 赞同：0
> 
> 时间：2012-12-19T06:19:21.003
> 
> 标签：php, wordpress, wordpress-theming

因此，我正在使用本教程构建的自定义主题中创建我的第一个小部件区域：[http ://www.tips4developer.com/wordpress/wordpress-create-custom-widget-area/](http://www.tips4developer.com/wordpress/wordpress-create-custom-widget-area/)

这一切看起来都很简单，但我想做的是将小部件区域仅添加到我的静态主页，方法是将小部件区域创建的内容与我在 Wordpress 中创建的主页内容分开。我将在哪里添加仅在静态主页上显示小部件区域的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:27:05.277

您可以检查 is_page($page_id)

```
 if (is_page($page)){
      // your widget here
} 
```

基于此，您可以使用 $page 调用您的静态页面 ID

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:30:32.150

在这里查看[http://codex.wordpress.org/Function_Reference/get_sidebar](http://codex.wordpress.org/Function_Reference/get_sidebar)

如果您只想在主页中显示侧边栏然后检查它是主页然后像这样调用主页侧边栏

```
<?php
if ( is_home() ) :
 get_sidebar('home');
elseif ( is_404() ) :
 get_sidebar('404');
else :
 get_sidebar();
endif;
?> 
```

# java - Android 如何以编程方式在 Android 中打开热点

> ID：13946607
> 
> 赞同：21
> 
> 时间：2012-12-19T06:19:38.763
> 
> 标签：java, android

据我所知，“启用AP”的方法没有API，但我可以使用反射来设置它。这是我所做的

```
wifi_manager = (WifiManager) this.getSystemService(HotSpot_TrisActivity.this.WIFI_SERVICE);
btnEnableAP = (Button)findViewById(R.id.btnEnableAP);

btnEnableAP.setOnClickListener(new View.OnClickListener() 
{

   @Override
   public void onClick(View arg0) 
   {
      // TODO Auto-generated method stub
      WifiConfiguration wifi_configuration = null;
      wifi_manager.setWifiEnabled(false);

      try 
      {
         //USE REFLECTION TO GET METHOD "SetWifiAPEnabled"
         Method method=wifi_manager.getClass().getMethod("setWifiApEnabled", WifiConfiguration.class, boolean.class);
         method.invoke(wifi_manager, wifi_configuration, true);
      } 
      catch (NoSuchMethodException e) 
      {
         // TODO Auto-generated catch block
         e.printStackTrace();
      } 
      catch (IllegalArgumentException e) 
      {
         // TODO Auto-generated catch block
         e.printStackTrace();
      } 
      catch (IllegalAccessException e) 
      {
         // TODO Auto-generated catch block
         e.printStackTrace();
      } 
      catch (InvocationTargetException e) 
      {
         // TODO Auto-generated catch block
         e.printStackTrace();
      }
   }
}); 
```

# c - C：查找函数名称时出现分段错误（核心转储）

> ID：13946608
> 
> 赞同：4
> 
> 时间：2012-12-19T06:19:39.980
> 
> 标签：c, linux, segmentation-fault, structure

我想编写一个 C 代码来查找 C 文件中的所有函数并打印相应的函数名称。

我的代码是：

```
#include <stdio.h>
#include <string.h>

#define SIZE 1024
void ffname(char *line)
{
    int i=1,j=0;
    char *dt; 
    char *name;
    strtok(line,"("); 
    dt = strchr(line,' '); 
    if(dt[i] == '*')
        i++;
    while(dt[i] != '\0')
    {
        name[j]=dt[i];
        i++;
        j++;
    }
    name[j] ='\0';
    printf("Function name is: %s\n", name);
}

int main(int argc, char **argv)
{
    if(argc < 2)
    {
        printf("Give the filename \n");
        printf("Usage: %s filename\n", argv[0]);
        return -1;
    }
    int i, lines =0, funlines =0,count =0, fn =0, flag =0;
    char c[100],b[100];
    FILE *fd;
    fd = fopen(argv[1],"r");
    while(fgets(c,SIZE,fd))
    {   
        lines++;
        i=0;
        for(i=0;i<strlen(c);i++)
        {
            while( c[i] =='\t' || c[i] == ' ')
            {
                i++;
            }
            if( c[i] == '{')
            {
                count++;
                if(flag)
                {
                    funlines++;
                }
                if(count == 1)
                {
                    fn++;
                    printf("Function %d is Started..............\n", fn); 
                    flag = 1;
                    ffname(b);
                }
                break;
            }
            else if( c[i] == '}')
            {
                count--;
                if(!count)
                { 
                    flag = 0;
                    printf("No of lines in the function %d is: %d\n", fn, funlines);
                    printf("Function %d is finished..........\n", fn);
                    funlines = 0;
                }
                else
                {
                    funlines++;
                }
                break;
            }
            else if(flag)
            {
                funlines++;
                break;
            }
        }
        strcpy(b,c);
    }
    printf("Total no of fucnion%d\n",fn);
    printf("Total no of lines%d\n",lines);
    return 0;
} 
```

当我将以下 C 文件作为输入时，

```
#include<stdio.h>
void add()
{
    int a=5,b=7;
    printf("Addition is:%d\n", a+b);
}
void sub()
{
    int a=20,b=8;
    printf("Subtraction is:%d\n", a-b);
}
void main()
{   
    char *name="dhahira dhasneem";
    char *line;
    line=strchr(name,' ');
    printf("Line:%s\n",line);
    printf("Name:%s\n",name);
    add();
    sub();
} 
```

我得到以下输出。

```
Function 1 is Started..............
Segmentation fault (core dumped) 
```

我使用`valgrind`，但我不知道如何识别错误。请指导我。谢谢你。

**更新：**

当我使用建议的答案时，我得到了输出。之后，我想扩展我之前的代码，将函数的详细信息（函数名称和函数深度）存储到一个结构中。当我用来存储简单程序的功能详细信息时，我得到了输出。但是当我在`gdb`.

```
(gdb) b 87
Breakpoint 1 at 0x804885e: file fun_printstruct.c, line 87.
(gdb) r dat.c
Starting program: /home/dhahira/dhas/Project/a.out dat.c
Function 1 is Started..............

Program received signal SIGSEGV, Segmentation fault.
0x080485d4 in ffname (line=0xbfffe71c "/*struct *dhahira", name=0x0)
    at fun_printstruct.c:21
21          name[j]=dt[i];
(gdb) s

Program terminated with signal SIGSEGV, Segmentation fault.
The program no longer exists. 
```

我的代码是：（扩展用于将功能细节存储到结构中）

```
#include <stdio.h>
#include <string.h>

#define SIZE 1024
void ffname(char *line)
{
    int i=1,j=0;
    char *dt; 
    char name[SIZE];
    strtok(line,"("); 
    dt = strchr(line,' '); 
    if(dt[i] == '*')
        i++;
    while(dt[i] != '\0')
    {
        name[j]=dt[i];
        i++;
        j++;
    }
    name[j] ='\0';
    printf("Function name is: %s\n", name);
}

int main(int argc, char **argv)
{
    if(argc < 2)
    {
        printf("Give the filename \n");
        printf("Usage: %s filename\n", argv[0]);
        return -1;
    }
    int i, lines =0, funlines =0,count =0, fn =0, flag =0, fg=0,size=0,emptyflag=0,commandflag=0;
    char c[SIZE],b[SIZE],st[SIZE],d[SIZE];
    int command[]={};
    FILE *fd;
    fd = fopen(argv[1],"r");
    while(fgets(c,SIZE,fd))
    {
        emptyflag=0;    
        lines++;
        for(i=0;i<(sizeof(command)/4);i++)
        {
            if(lines == command[i])
            {
                commandflag=1;
                break;
            }   
        }
        strcpy(st,c);
        strtok(st," ");
        size = strlen(c);
        if(size == 1 && (strcmp(c,"\n"))== 0)
            emptyflag=1;
        if( !strcmp(st,"struct")) 
            fg=1;
        for(i=0;i<size;i++)
        {
            if(commandflag)
            {
                break;
            }   
            while( c[i] =='\t' || c[i] == ' ')
            {
                i++;
            }
            if( c[i] == '{')
            {
                count++;
                if(flag)
                {
                    if(!emptyflag)
                        funlines++;
                    else
                        emptyflag=0;
                }
                if(count ==1 && fg ==1)
                {
                    if(b[strlen(b)-2] == ')')
                    {
                        fn++;
                        printf("Function %d is Started..............\n", fn); 
                        flag = 1;
                        ffname(b);
                    }   
                    else
                    {
                        count--;
                    }   
                }
                else if(count == 1)
                {
                    fn++;
                    printf("Function %d is Started..............\n", fn); 
                    flag = 1;
                    ffname(b);
                }
                break;
            }
            else if( c[i] == '}')
            {
                count--;
                if(count ==0 && fg ==1)
                { 
                    flag = 0;
                    printf("No of lines in the function %d is: %d\n", fn, funlines);
                    printf("Function %d is finished..........\n", fn);
                    funlines = 0;
                    fg=0;
                }
                else if(count ==0)
                {
                    flag = 0;
                    printf("No of lines in the function %d is: %d\n", fn, funlines);
                    printf("Function %d is finished..........\n", fn);
                    funlines = 0;
                }
                else if(count == -1)
                {
                    count=0;
                    fg=0;
                }
                else 
                {
                    if(!emptyflag)
                        funlines++;
                    else
                        emptyflag=0;
                }
                break;
            }
            else if(flag ==1 && fg==1)
            {
                if(!emptyflag)
                    funlines++;
                else
                    emptyflag=0;
                break;
            }
            else if(flag)
            {
                if(!emptyflag)
                    funlines++;
                else
                    emptyflag=0;
                break;
            }
            break;
        }
        if(commandflag == 1)
            commandflag = 0;
        else
            strcpy(b,c);
    }
    printf("Total no of fucnion%d\n",fn);
    printf("Total no of lines%d\n",lines);
    return 0;
} 
```

请指导我克服这个问题。

这个问题是因为扩展代码而出现的吗？（我可以单独得到正确的输出。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:24:46.427

您声明`SIZE`为 1024，然后读入长度为 100 的数组：

```
#define SIZE 1024
// ... snip ....
    char c[100],b[100];
    FILE *fd;
    fd = fopen(argv[1],"r");
    while(fgets(c,SIZE,fd)) 
```

这意味着您的写入远远超出了数组的范围，写入了堆栈的其余部分，并导致了损坏。在这种情况下，这可能实际上不会发生，因为您输入文件中的行都在 100 个字符以下，但如果有人传入一个长行的文件，它可能会发生。

这应该是

```
 char c[SIZE],b[SIZE]; 
```

或`sizof()`在`fgets()`通话中使用：

```
fgets(c,sizeof(c),fd) 
```

正如其他人所指出的，最好打开所有可用的警告；这将帮助您更快地发现错误。在 GCC 或 Clang 中，我会推荐`-Wall -Wextra -Werror`；这将启用所有常见警告，并导致警告被视为错误，因此您不能忽略它们。如果我在您的代码上运行它，我还会收到以下警告：

```
sf.c:16:9: error: variable 'name' is uninitialized when used here
      [-Werror,-Wuninitialized]
        name[j]=dt[i];
        ^~~~
sf.c:9:15: note: initialize the variable 'name' to silence this warning
    char *name;
              ^
               = NULL
sf.c:40:18: error: comparison of integers of different signs: 'int' and 'size_t'
      (aka 'unsigned long') [-Werror,-Wsign-compare]
        for(i=0;i<strlen(c);i++)
                ~^~~~~~~~~~ 
```

第二个不是什么严重的问题，只需强制转换或声明`i`无符号即可；第一个你应该修复。您需要在堆栈上（`char name[SIZE];`或类似的）或动态的（或类似的`char *name = malloc(strlen(line));`东西）为 name 分配一个缓冲区。实际上，`name`是一个未初始化的指针；它可以指向内存中的任何位置，一旦您尝试通过在 中存储某些内容来取消引用它`name[j]`，您正在写入无效的内存区域并获得段错误。

最后，一旦你解决了这些问题，如果你还有其他问题，我建议你在调试器下运行它，看看问题出现在哪里。如果您使用的是 IDE，它可能内置了调试器接口；如果没有，用 编译`-g`，然后运行`gdb executable arguments`。

# jenkins - 从詹金斯执行脚本时出现错误

> ID：13946609
> 
> 赞同：2
> 
> 时间：2012-12-19T06:19:39.667
> 
> 标签：jenkins, ssh-keys

在詹金斯预构建步骤中，我`Execute shell script on remote using ssh`在执行脚本时选择了以下错误

**cd /home/appsusr/bin; ./removetwl.sh**

```
[ssh] Exception:java.io.FileNotFoundException: /home/appsusr/ .ssh/id_dsa (No such file directory)
com.Jcraft.jsch.JschException:java.io.filenotfoundexception: /home/aapsusr/ .ssh/id_dsa (no such file or directory) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:31:57.747

您是否在某处指定了 SSH 密钥的路径？看起来你之前有一个额外的空间`.ssh`。

# php - 如何使联系表正常工作

> ID：13946612
> 
> 赞同：-1
> 
> 时间：2012-12-19T06:19:58.450
> 
> 标签：php, html

好的，所以我对网页设计相当陌生。如何让我当前主题的联系表正常工作？这是当前的html。

我需要知道如何编写 PHP 文件；它是否正确？

```
<div class="form row-fluid clearfix">
    <div class="field span5">
        <label>Your name:</label>
        <input type="text" value="" class="req" placeholder="Placeholder text..." />
    </div>
    <div class="field span5">
        <label>Your email:</label>
        <input type="email" value="" class="req" />
    </div>
    <div class="clearfix">&nbsp;</div>
    <div class="field full">
        <label>Your comment:</label>
        <textarea class="span12" cols="2" rows="7"></textarea>
    </div>

    <button class="extruded"><span>Submit</span></button>
</div>

<?php
$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$from = 'From: iclear'; 
$to = 'sales@tangledindesign.com'; 
$subject = 'Hello';
?> 
```

以及如何链接该联系表单的 PHP 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:22:19.157

**第1步**

使用表单 HTML 元素包装您的字段，该元素的 action 属性设置为您的 php 处理页面

**第2步**

根据 php 文件的期望命名表单字段

**第 3 步**

添加一些验证

**第4步**

提交并测试

**例子**

**HTML**

```
<form action="process.php" method="post">
First Name: <input type="text" name="first_name">
<input type="submit">
</form> 
```

**PHP**

```
<?php
$first_name=$_POST["first_name"];
if($first_name=="John")
{
  echo "Hi John!";
}
else
{
   echo "Sorry Buddy, Don't really know you";
}
?> 
```

**笔记**

我没有为您提供完整解决方案的原因是您提到您是该编程的新手，仅解决您的问题而不指导您如何做是不公平的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:32:38.917

您需要使用标签包装您的 HTML，并且不要忘记包含提交按钮：

```
<form action="process.php" method="post"> 
  <div class="form row-fluid clearfix">
    <input type="text" name="name">
    <input type="text" name="email">
    <input type="text" name="message">
    <input type="submit" name="submit">
  </div>
</form> 
```

然后是从 HTML 表单中获取所有值的 php (process.php) 文件：

```
$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];

$from = 'From: iclear'; 
$to = 'sales@tangledindesign.com'; 
$subject = 'Hello'; 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T06:37:06.317

试试这个代码

```
<?php
$toaddress ="youremail@domain.com" //change to your email address
$error ="";
if($_SERVER['REQUEST_METHOD']=="POST") {
    $name=$_POST['name'] ;
    $email=$_POST['email'] ;
    $comment=$_POST['comment'] ;
        if(!isset($name) || $name==""){
             $error .="Please Enter your name <br/>";
        }elseif (!isset($email) || $email==""){
              $error .="Please Enter your email Address.<br/>";
        }elseif(!isset($comment) || $comment==""){
              $error .="Please Enter your Comments.<br/>";
        }
   if ($error ==""){
       mail($toaddress,"Contact form",$comment)
   }

}
?>

<?php echo  $error ;?>
<form  method='post' action='' enctype='multipart/form-data' id='news_form' name='post_form' >
<div class="form row-fluid clearfix">
    <div class="field span5">
        <label>Your name:</label>
        <input name="name" type="text" value="" class="req" placeholder="Placeholder text..." />
    </div>
    <div class="field span5">
        <label>Your email:</label>
        <input type="email" value="" class="req" name="email" />
    </div>
    <div class="clearfix">&nbsp;</div>
    <div class="field full">
        <label>Your comment:</label>
        <textarea class="span12" cols="2" rows="7" name="comment"></textarea>
    </div>
    <input type="submit" value="submit" />
</div>
</form> 
```

# ruby-on-rails-3 - 带有下载“保存到”图像的 Rails 3.0 关联模型

> ID：13946613
> 
> 赞同：0
> 
> 时间：2012-12-19T06:20:01.963
> 
> 标签：ruby-on-rails-3

我的 Rails 3.0.3 应用程序有一个脚手架“月”，其中有一个链接，用户可以使用“保存到”下载图像。现在我需要将月份模型属于_壁纸模型的位置关联起来。

**路线：**

```
 root :to => 'inicio#index'

  resources :wallpapers do
    resources :months
  end

  # the route that works with no association
  # match 'download/:id' =>  'months#download', :as => :download

  # the route I tried
  match 'wallpapers/:id/months/:id' =>  'months#download', :as => :download 
```

**月份型号：**

```
class Month < ActiveRecord::Base
  belongs_to :wallpaper

  has_attached_file :wallpaper_picture, :styles => {
    :default => { :geometry => '530x330', :quality => 80, :format => 'jpg'}
  }
end 
```

**带有友好ID的壁纸模型：**

```
class Wallpaper < ActiveRecord::Base  
  has_many :months, :dependent => :destroy

  extend FriendlyId
  friendly_id :title, :use => :slugged
end 
```

**在months_controller中我做了下载方法，这个方法没有关联：**

```
class MonthsController < InheritedResources::Base
  belongs_to :wallpaper, :finder => :find_by_slug!

  def download
    @wallpaper = Wallpaper.find(params[:wallpaper_id])
    @month = @wallpaper.month.find(params[:id])

    send_file @month.wallpaper_picture.path,
              :filename => @month.wallpaper_picture_file_name,
              :type => @month.wallpaper_picture_content_type,
              :disposition => 'attachment'
  end
end 
```

**查看月份/索引**

```
- @months.each do |month|  
  = link_to image_tag(month.wallpaper_picture(:default)), wallpaper_month_path(month.wallpaper, month) 
```

**我已经尝试在months_controller 中更改下载方法，但它是错误的：**

```
@months = Wallpaper.month.conditions({:person_id => some_id}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:49:45.597

这是我得到它的
**方式**

```
resources :wallpapers do  
  resources :months  
end  
match 'wallpaper/:wallpaper_id/download/:id' => 'months#download', :as => :download 
```

在路由中我必须通过 :wallpaper_id (has_many :months)，:
id 是当前控制器的 id (belongs_to :wallpaper)
'download' 将是视图中使用的路径的名称 'download_path'
在这个路径中我必须通过外键和 id

**查看月份/索引**

```
- @months.each do |month|     
  = link_to 'Download Picture', download_path(month.wallpaper_id, month.id) 
```

**在months_controller**中，download 方法将接收这些参数并将关联的图像传递给send_file 方法。

```
def download
  @wallpaper = Wallpaper.find(params[:wallpaper_id])
  @month = @wallpaper.months.find(params[:id])

  send_file @month.wallpaper_picture.path,
              :filename => @month.wallpaper_picture_file_name,
              :type => @month.wallpaper_picture_content_type,
              :disposition => 'attachment'
end 
```

PD：如果 send_file 在 Production 中失败，将其更改为 send_data 或
在 config/production.rb 中注释掉这一行

```
config.action_dispatch.x_sendfile_header = "X-Sendfile" 
```

[send_file 只是发送一个空文件](https://stackoverflow.com/questions/3456166/send-file-just-sends-an-empty-file)

# r - Vectorise 查找最近的日期函数

> ID：13946614
> 
> 赞同：5
> 
> 时间：2012-12-19T06:20:02.057
> 
> 标签：r, date

我想传入一个日期向量，并从第二个（部分匹配的）日期向量中返回最接近的日期。

以下函数可以满足我对单个日期的要求，但是我无法弄清楚如何将其推广到`searchDate`日期向量的情况。

```
closestDate <- function(searchDate, dateList, roundDown=FALSE){
  if (roundDown) {
    dist2date <- as.Date(dateList) - as.Date(searchDate)
    closest <- which(max(dist2date[dist2date<=0]) == dist2date)
  } else {
    dist2date <- as.Date(dateList) - as.Date(searchDate)
    closest <- which(min(dist2date[dist2date>=0]) == dist2date)
  }
  return(dateList[closest])
}

dateSeq <- seq(as.Date("2011-01-01"), as.Date("2012-12-19"), by='day')
oddDates <- dateSeq[as.logical(1:length(dateSeq) %%2)]

closestDate('2012-12-14', oddDates)
[1] "2012-12-15"

miscDatesLong <- rep(c('2012-12-14', '2012-12-16', '2012-12-18'), 100 )
closestDate(miscDatesLong, oddDates)

closestDate(miscDatesLong, oddDates)
[1] "2012-12-15" "2012-12-17" "2012-12-19"
Warning message:
In unclass(time1) - unclass(time2) :
  longer object length is not a multiple of shorter object length 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:19:32.217

该`findInterval`函数可以快速做到这一点：

```
dateSeq <- seq(as.Date("2011-01-01"), as.Date("2012-12-19"), by='day')
oddDates <- dateSeq[as.logical(1:length(dateSeq) %%2)]

oddDates[ findInterval(as.Date('2012-12-14'), oddDates)+1 ]

miscDatesLong <- rep(c('2012-12-14', '2012-12-16', '2012-12-18'), 100)

oddDates[ findInterval(as.Date(miscDatesLong), oddDates) + 1 ] 
```

要向下舍入而不是向上舍入，请删除`+1`. 如果您真的想找到最近的日期，而不是之前或之后的日期，您可以创建一个新的日期列表，这些日期是间隔 ( `as.Date(rowMeans(embed(as.numeric(oddDates),2)), '1960-01-01')`) 的中点并`findInterval`在这些日期上使用。有关其他选项，请参阅 的参数`findInterval`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T10:33:13.780

`?Vectorize`

```
> closestDateV = Vectorize(closestDate,"searchDate")
> closestDateV(c('2012-12-15','2012-12-14'), oddDates)
2012-12-15 2012-12-14 
     15689      15689 
```

返回的值已删除其日期性。所以把它加回来：

```
> as.Date(closestDateV(c('2012-12-15','2012-12-14'), oddDates),origin="1970-01-01")
  2012-12-15   2012-12-14 
"2012-12-15" "2012-12-15" 
```

您可能希望将所有这些都包含在一个新函数中。

函数式编程很有趣！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T06:36:33.560

现在，通过该示例，只需处理小于一种情况或大于另一种情况的日期子集，即当时正在检查的特定目标。

```
closestDt <- function(searchDate, dateList, roundDown=FALSE) 
     as.Date( sapply( searchDate , function (x) if( roundDown ){ 
                max( dateList[ dateList <= x ] ) } else {
                min( dateList[ dateList >= x])  } 
           ), "1970-01-01") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T07:00:37.983

```
# initiate a tie-breaking function
tie.breaker <-
    function( x , y , la = look.after ){

        # if look.after is TRUE, eliminate all values below x
        # otherwise, eliminate all values above x
        if ( la ) y[ y < x ] <- NA else y[ y > x ] <- NA

        # then among the remaining values, figure out the date the shortest distance away
        z <- which.min( abs( x - y ) )[1]
        # use [1] to just take the first result, in case y contains duplicate dates

        # return z
        return( z )
    }

# initiate your main function
closestDate <- 
    function( searchDate , dateList , look.after = FALSE ){

        # apply a which.min( abs( ) ) command to each of the dates given, 
        # across every date in the larger list
        dist2date <- 
            sapply( 

                # on every element of searchDate..
                as.Date( searchDate ) ,

                # ..run the tie.breaker() function
                tie.breaker , 

                # and each time, pass in the dateList
                as.Date( dateList ) ,

                # and also the look.after TRUE/FALSE flag
                look.after
            )

        # return the matching dates in the same order as passed in
        dateList[ dist2date ]
    }

# try with two input dates
searchDate <- c( '2012-12-14' , '2012-11-18' )

# create a few dates to test against..
someDates <- c( '2012-11-12' ,  '2012-11-17' , '2012-12-15' , '2012-12-13' , '2012-12-15' , '2012-11-17' , '2012-11-20' )

# return the two dates closests to the inputted dates

# the first result gives 12/13, because look.after = FALSE
closestDate( searchDate , someDates )

# the first result gives 12/15, because look.after = TRUE
closestDate( searchDate , someDates , look.after = TRUE )

# reverse the order to prove it still works
someDates <- c( '2012-11-12' , '2012-11-17' , '2012-12-13' , '2012-12-15' , '2012-12-13' , '2012-12-15' , '2012-11-17' )

# the first result gives 12/13, because look.after = FALSE
closestDate( searchDate , someDates )

# the first result gives 12/15, because look.after = TRUE
closestDate( searchDate , someDates , look.after = TRUE ) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T13:06:40.450

您可以使用`cut`：

```
nearestDate <- function(dates,datesToMatch)
{
        dtm <- sort(datesToMatch)
        dtmMid <- dtm[-length(dtm)]+diff(dtm)/2
        as.Date(cut(dates,
        breaks=c(as.Date("1970-01-01"),
        dtmMid,as.Date("2100-01-01")),labels=dtm))
}

dates1 <- as.Date(c("2012-02-14","2012-06-23","2012-08-27","2012-12-01"))
dates2 <- as.Date(c("2012-04-01","2012-10-31","2012-12-25"))
nearestDate(dates1,dates2)
[1] "2012-04-01" "2012-04-01" "2012-10-31" "2012-12-25" 
```

请注意，我不得不为 cut 函数中的端点选择一些魔术日期，因为它不接受 +/-Inf。根据您的使用情况进行修改。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-19T14:54:22.140

我认为这就是你想要的：

```
closestDate <- function(searchDate, dateList, roundDown=FALSE) {
  as.Date(sapply(as.Date(searchDate), function(x){
    dist <- abs(x - as.Date(dateList))
    closest <- dateList[which(min(dist) == dist)]
    return(ifelse(roundDown, min(closest), max(closest)))
  }), origin="1970-1-1")
} 
```

sapply 是你的朋友。您只需确保返回日期而不是整数。

# c# - 使用 Lucene.NET 和 C# 索引 blob 内的数据

> ID：13946615
> 
> 赞同：1
> 
> 时间：2012-12-19T06:20:05.380
> 
> 标签：c#, asp.net, azure, lucene.net, azure-blob-storage

我正在使用 Lucene.Net + 自定义爬虫 + Ifilter，以便我可以索引 blob 内的数据。

```
foreach (var item in containerList)
            {
                CloudBlobContainer container = BlobClient.GetContainerReference(item.Name);
                if (container.Name != "indexes")
                {
                    IEnumerable<IListBlobItem> blobs = container.ListBlobs();
                    foreach (CloudBlob blob in blobs)
                    {
                        CloudBlobContainer blobContainer = blob.Container;
                        CloudBlob blobToDownload = blobContainer.GetBlobReference(blob.Name);

                        blob.DownloadToFile(path+blob.Name);
                        indexer.IndexBlobData(path,blob);
                        System.IO.File.Delete(path+blob.Name);
                    }
                }
            }
/*Code for crawling which downloads file Locally on azure instance storage*/ 
```

下面的代码是使用 IFilter 的索引器函数

```
public bool IndexBlobData(string path, CloudBlob blob)
    {
        Lucene.Net.Documents.Document doc = new Lucene.Net.Documents.Document();
        try
        {
            TextReader reader = new FilterReader(path + blob.Name);
            doc.Add(new Lucene.Net.Documents.Field("url", blob.Uri.ToString(), Lucene.Net.Documents.Field.Store.YES, Lucene.Net.Documents.Field.Index.NOT_ANALYZED));
            doc.Add(new Lucene.Net.Documents.Field("content", reader.ReadToEnd().ToString(), Lucene.Net.Documents.Field.Store.YES, Lucene.Net.Documents.Field.Index.ANALYZED));
            indexWriter.AddDocument(doc);
            reader.Close();
            return true;
        }
        catch (Exception e)
        {
            return false;
        }
    } 
```

现在我的问题是我不想下载实例存储上的文件。我直接想将文件传递给FilterReader。但它需要“物理”路径，传递http地址不起作用。有人可以建议任何其他解决方法吗？我不想再次从 blob 下载相同的文件然后对其进行索引，而是更喜欢下载并将其保存在主内存中并直接使用索引过滤器。

我[从这里使用 IFilter](http://www.codeproject.com/Articles/13391/Using-IFilter-in-C)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:57:59.890

不是很清楚你的意思是`I don't want to download same file again from blob and then index it, instead i will prefer download and keep it in main memory and directly use index filter`什么？那是什么`main memory`- Azure Blob 存储或本地实例内存。

但是，由于 IFilter 接口的性质，您面临的问题无法解决。[如果您从这里](http://www.codeproject.com/Articles/13391/Using-IFilter-in-C)更深入地了解您正在使用的源代码，您会发现它在幕后使用[IPersistFile COM 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687284%28v=vs.85%29.aspx)。不幸的是，这个接口只适用于本地文件，不接受流。

我建议使用 Blob 中的 Stream 并将其传递给 Reader，而不是物理路径。但是，如前所述 - IFilter 使用仅适用于物理路径的 COM 接口。因此，使用您当前的方法，无法跳过 blob 下载。

在本地下载 blob 并不可怕。如果存储帐户与计算在同一个关联组中，则下载将非常快，流量将免费。如果您使用[较小的实例大小](http://msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx)，您将有 165GB 的本地存储空间。这是足够的存储空间。您可以通过跟踪索引的内容和未索引的内容来稍微优化您的流程。您可以为此使用 Azure 表存储。另一种非常快速且廉价的存储解决方案，非常适合将键值对存储为`file name`- `etag`。然后，当您枚举 blob 时，首先获取`etag`blob 并检查表是否已被索引。仅当它没有被索引时才下载它，然后将新记录添加到表中以将此文件标记为已索引。

或者...或者不要使用 IFilter。我看不出在 Azure 上使用 IFilter 有什么好处。IFilter 仅在安装应用程序时注册。例如，如果您想使用 IFilter 处理 Office 文档 - 您必须在 VM 上安装 Microsoft Office（由于 MS Office 的许可证移动性限制，即使您有许可证，目前也不能这样做）。如果您想获得 PDF 的 IFilter - 您必须安装 Adob​​e Acrobat Reader（您可以通过启动任务来完成）。等等，等等——有些应用程序可以安装，有些则不能。您的 Windows Azure VM 实例是完全没有 IFilter 的纯 Windows。想象一下 Windows Server 2008 R2 的基本安装，没有添加任何角色和功能 - 这就是您的实例。

# iphone - Cocos2d Action 只运行一次

> ID：13946619
> 
> 赞同：0
> 
> 时间：2012-12-19T06:20:34.763
> 
> 标签：iphone, cocos2d-iphone

每次按下按钮时，我都试图在精灵上运行动画。

但是由于某种原因，该动作只运行一次，并且不会像我需要的那样再次运行。

如果有帮助，这是我的操作。我的操作被声明为 id 实例变量。

```
 moveUp = [CCMoveTo actionWithDuration:3 position:ccp(60,self.position.y+200)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:43:07.727

您是否尝试重复使用相同的操作？像这样：

```
moveUp = [CCMoveTo actionWithDuration:3 position:ccp(60,self.position.y+200)];
[self runAction:moveUp];

// some time later …

[self runAction:moveUp]; 
```

那么这将不起作用。您必须每次都创建一个新动作，如下所示：

```
CCAction* moveUp = [CCMoveTo actionWithDuration:3 position:ccp(60,self.position.y+200)];
[self runAction:moveUp];

// some time later …

CCAction* moveUp = [CCMoveTo actionWithDuration:3 position:ccp(60,self.position.y+200)];
[self runAction:moveUp]; 
```

# xml - 在 xml 中转义 xml 标签

> ID：13946621
> 
> 赞同：4
> 
> 时间：2012-12-19T06:21:06.330
> 
> 标签：xml, perl

我有解析 xml 文件并执行命令的 python 脚本。我希望我`xml`阅读另一个 xml 文件并对其进行编辑。为此，我使用了 perl 命令

```
"perl -pi -0777 -e 's@<en:TagName>.*?</en:TagName>@<en:TagName>new-value</en:TagName>@sg'FileName.xml" 
```

这是我在我的 xml 文件中添加的，由 shell 脚本解析。

```
<cmd>perl -pi -0777 -e 's@<en:TagName>.*?</en:TagName>@<en:TagName>new-value</en:TagName>@sg'FileName.xml</cmd> 
```

在这里，我的 python 脚本被`<en:TagName>`视为标签，无法解析它。所以我添加`"perl -pi -0777 -e 's#&lt;en:TagName&gt;.*?&lt;en:TagName&gt;#&lt;en:tagName&gt;new-value&lt;/en:TagName&gt;#sg' FileName.xml"` 并使用“#”作为分隔符（因为@是我们正在使用的shell脚本中的特殊字符）

放置 # 无法提供所需的结果。而不是替换它，而是在末尾附加新值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:00:05.787

[`CDATA`](http://www.w3schools.com/xml/xml_cdata.asp)用标签包围你的 perl 命令：

```
Some text, like JavaScript code, contains a lot of "<" or "&" characters. To avoid errors script code can be defined as CDATA.

Everything inside a CDATA section is ignored by the parser.

A CDATA section starts with "<![CDATA[" and ends with "]]>" 
```

# iphone - NSPredicate 获取 NSSet CoreData 中的特定数据？

> ID：13946623
> 
> 赞同：2
> 
> 时间：2012-12-19T06:21:19.120
> 
> 标签：iphone, ios, ipad, core-data

我有表 A 和 B。A 和 B 有一对多的关系。我从 A 中获取数据，但是在获取数据时，我在 NSSet 中获取了 B 的所有数据。但是我想在 NSSet 中有一些 B 的特定数据我正在从 A 获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:40:51.417

您可以在 NSSet 上应用谓词。NSSet 有实例方法——

```
- (NSSet *)filteredSetUsingPredicate:(NSPredicate *)predicate

Example from apple documentation

NSSet *sourceSet =
    [NSSet setWithObjects:@"One", @"Two", @"Three", @"Four", nil];
NSPredicate *predicate =
    [NSPredicate predicateWithFormat:@"SELF beginswith 'T'"];
NSSet *filteredSet =
    [sourceSet filteredSetUsingPredicate:predicate];
// filteredSet contains (Two, Three) 
```

# java - 我们可以使用 java socketchannel 与基于 c 的 TCP 服务器通信吗

> ID：13946629
> 
> 赞同：0
> 
> 时间：2012-12-19T06:22:04.253
> 
> 标签：java, android, socketchannel

我们可以使用socketchannel与基于c++的TCP服务器通信吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:24:02.030

是的，你可以.. 只需在套接字构造函数中传递正确的 IP 和端口号。

# objective-c - 在 iphone 应用程序中集成 paypal 标准

> ID：13946631
> 
> 赞同：1
> 
> 时间：2012-12-19T06:22:18.480
> 
> 标签：objective-c, ios

我正在为购物车开发 iphone 应用程序，我已经完成了所有工作，但现在轮到在线支付了，网络版本支持贝宝标准，客户希望坚持贝宝标准，用户将被重定向，贝宝网站并登录并完成命令。这在iphone上可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:29:55.207

前几天苹果不允许任何第三方支付网关。但现在苹果允许它使用像 Paypal 这样的第三方支付网关。您可以使用贝宝库，它允许您支付从应用程序购买的产品的付款。为此，paypal 提供了用于移动应用程序开发的库。我在我的 3-4 个应用程序中使用过它并且对我来说效果很好。

可能这可以帮助您 [链接](http://www.alexanderjaeger.de/paypal-ios-sdk/) [链接](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/library_documentation)

[从库](https://www.x.com/developers/paypal/products/mobile-express-checkout-library)中下载 Mobile Express Checkout Library并将其添加到您的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:27:24.887

为什么不使用移动设备的 PayPal SDK？我已经通过他们的 MPL 库将 PayPal 集成到我的应用程序中，并修改了一些东西，例如应用程序密钥和价格、商店名称接收器帐户详细信息等。它对我来说工作正常。

检查[这个](https://stackoverflow.com/questions/8584063/paypal-api-how-to-integrate-it-in-my-app-ios5)已经回答的链接。

您也可以查看[入门指南](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/mobile-payments-library-ios-getting-started)。

[PayPal API：如何将其集成到我的应用程序中？IOS5](https://stackoverflow.com/questions/8584063/paypal-api-how-to-integrate-it-in-my-app-ios5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:35:40.413

[https://developer.paypal.com/](https://developer.paypal.com/)

您需要首先在您的网络服务器上实现贝宝。

然后从 UIWebview 转到那个链接…。

# c# - 合并 Linq

> ID：13946633
> 
> 赞同：0
> 
> 时间：2012-12-19T06:22:22.213
> 
> 标签：c#, linq, collections

我有一个集合，它正在从一个方法传递到另一个方法，并且正在对它进行各种 Linq 操作。当这个集合最终来到我身边时，我还对其进行了一些 linq 操作。

现在的问题是 - 有没有一种方法可以查看在集合出现之前对集合进行的合并 Linq 操作？是否有任何可用的工具\nuget 包？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:24:53.967

由于 LINQ 往往是惰性求值的，因此您可能可以单步执行迭代，以查看进行了哪些`MoveNext()`调用，以及它们是由哪些 LINQ 函数公开的。

# azure - 在具有 VS2012 但没有 VS2010 的干净机器上具有多个角色实例的 Windows Azure Compute Emulator (SDK 1.8) 的奇怪行为

> ID：13946634
> 
> 赞同：3
> 
> 时间：2012-12-19T06:22:22.067
> 
> 标签：azure, azure-compute-emulator

您是否曾尝试在具有完整 IIS 和多个角色实例的 Windows azure 模拟器中运行托管服务？几天前，我注意到在 IIS 中一次只有一个 web 角色的多个实例是 startet。以下屏幕截图说明了该行为，屏幕截图前面的消息框显示了此行为的原因。尝试在 IIS 管理器中启动已停止的网站之一时会出现该消息框。

[屏幕截图：带有已停止网站的 IIS](http://i.stack.imgur.com/bbQle.png)

示例云应用程序包含两个 Web 角色：MvcWebRole1 和 WCFServiceWebRole1，每个角色都配置为使用三个实例。我的第一个想法是：“当然！在真实的天蓝色世界中不会发生端口冲突，因为每个角色实例都是一个自己的虚拟机。它不能在模拟器中工作！” 但是经过一些研究和分析 azure 计算模拟器的许多部分后，我发现计算模拟器为每个角色实例创建了一个唯一的 IP（在我的示例中，从 127.255.0.0 到 127.255.0.5）。这篇 MSDN 博客文章 (http://blogs.msdn.com/b/avkashchauhan/archive/2011/09/16/whats-new-in-windows-azure-sdk-1-5-each-instance-in-any微软员工 Avkash Chauhan 的 -role-gets-its-own-ip-address-to-match-compute-emulator-close-the-cloud-environment.aspx) 也描述了这种行为。**为什么计算模拟器（更确切地说是DevFC.exe）没有将相应角色的IP添加到每个网站的绑定信息中？？？**

我手动为每个网站添加了 IP，tadaaaaa：每个网站都可以在没有任何冲突的情况下启动。下一个屏幕截图演示了它，并突出显示了更改的绑定信息。

[屏幕截图：带有已启动网站的 IIS](http://i.stack.imgur.com/vejWE.png)

再一次：为什么模拟器不为我做呢？我写了一个小的静态辅助方法来在每个角色开始时为我做绑定扩展。也许有人想使用它：

```
public static class Emulator
{
    public static void RepairBinding(string siteNameFromServiceModel, string endpointName)
    {
        // Use a mutex to mutually exclude the manipulation of the iis configuration.
        // Otherwise server.CommitChanges() will throw an exeption!
        using (var mutex = new System.Threading.Mutex(false, "AzureTools.Emulator.RepairBinding"))
        {
            mutex.WaitOne();

            using (var server = new Microsoft.Web.Administration.ServerManager())
            {
                var siteName = string.Format("{0}_{1}", Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.CurrentRoleInstance.Id, siteNameFromServiceModel);
                var site = server.Sites[siteName];

                // Add the IP of the role to the binding information of the website
                foreach (Binding binding in site.Bindings)
                {
                    //"*:82:"
                    if (binding.BindingInformation[0] == '*')
                    {
                        var instanceEndpoint = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints[endpointName];
                        string bindingInformation = instanceEndpoint.IPEndpoint.Address.ToString() + binding.BindingInformation.Substring(1);
                        binding.BindingInformation = bindingInformation;
                        server.CommitChanges();
                    }
                    else
                    {
                        throw new InvalidOperationException();
                    }
                }
            }

            // Start all websites of the role if all bindings of all websites of the role are prepared.
            using (var server = new Microsoft.Web.Administration.ServerManager())
            {
                var sitesOfRole = server.Sites.Where(site => site.Name.Contains(RoleEnvironment.CurrentRoleInstance.Role.Name));
                if (sitesOfRole.All(site => site.Bindings.All(binding => binding.BindingInformation[0] != '*')))
                {
                    foreach (Site site in sitesOfRole)
                    {
                        if (site.State == ObjectState.Stopped)
                        {
                            site.Start();
                        }
                    }
                }
            }

            mutex.ReleaseMutex();
        }
    }
} 
```

我调用辅助方法如下

```
public class WebRole : RoleEntryPoint
{
    public override bool OnStart()
    {
        if (RoleEnvironment.IsEmulated)
        {
            AzureTools.Emulator.RepairBinding("Web", "ServiceEndpoint");
        }

        return base.OnStart();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T17:39:03.673

我得到了它！

我在三台不同的机器上都有这种行为，这些机器都已格式化并最近安装了全新的 Windows 8、Visual Studio 2012 和 Azure SDK 1.8 和 Azure 工具。因此，重新安装 Azure SDK 和工具（正如 Anton 建议的那样）不会改变任何东西。但是我三台机器的清洁度才是关键！Anton，您的机器上是否安装了至少 VS2010 SP 1 的 Visual Studio 2010？我`IISConfigurator.exe`用 ILSpy 分析，发现将网站绑定信息中的 IP 设置为`'*'`（而不是`127.255.0.*`）的代码。这取决于静态属性`Microsoft.WindowsAzure.Common.Workarounds.BindToAllIpsWorkaroundEnabled`。如果 Visual Studio 2010 的 SP 级别小于 1，此方法在内部使用`Microsoft.WindowsAzure.Common.Workarounds.TryGetVS2010SPVersion`并导致将 IP 绑定设置为。`'*'``TryGetVS2010SPVersion`检查四个注册表项，我不知道为什么，但其中一个键存在于我的注册表中并返回 Visual Studio 2010 SP 级别 0（我从未在三台机器中的任何一台上安装 VS2010 ！！！）。当我将值`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\DevDiv\vs\Servicing\10.0\SP`从 0 更改为 10（应该是更大的 0）时，Azure 模拟器开始将`127.255.0.*`角色的 IP 设置为 IIS 中所有网站上的绑定信息，并且所有网站都正确启动。

# linux - 重命名多个文件

> ID：13946635
> 
> 赞同：0
> 
> 时间：2012-12-19T06:22:27.313
> 
> 标签：linux, windows, unix, rename, file-rename

我有多个文件，例如：

```
abc_e1000g1.pcap.1
abc_e1000g1.pcap.2 
```

我必须将其重命名为

```
1abc_e1000g1.pcap
2abc_e1000g1.pcap 
```

任何用于此的 unix / dos 命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:46:35.073

也许这个 PowerShell 命令对你有用。

```
dir | rename-item -newName { $_.Name -replace '^(.+)\.([0-9]+)$', '$2$1' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:48:14.447

我敢肯定有更短的方法可以做到这一点，但这是自然而然的，使用 unix shell，假设在您当前的工作目录中只有感兴趣的文件：

```
for i in *; do mv "$i" "$(echo $i | sed 's/\(.*\)\.\(.*\)/\2\1/')"; done 
```

# php - 错误：此功能不适用于您正在使用的数据库

> ID：13946641
> 
> 赞同：5
> 
> 时间：2012-12-19T06:22:54.507
> 
> 标签：php, sql, oracle, codeigniter

我在 Codeigniter 中使用 oci8 作为我的数据库驱动程序。使用以下调用存储过程的代码时出现错误：

```
$this->db->call_function('update_letter_body', $body_letter, $insert_id);

Error : This feature is not available for the database you are using. 
```

应该做些什么来完成这项工作？

我正在尝试设置一个超过 4000 个字符的值，这似乎不适用于直接查询，并且似乎 codeigniter 不支持调用 oracle 函数。有什么建议么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T06:48:11.940

嗯，试试

```
$this->db->query("CALL update_letter_body(".$body_letter.",".$insert_id.")"); 
```

`call_function` **使您能够调用未包含在 CodeIgniter 中的 PHP 数据库函数，而不是用于调用您编写的过程。**

检查文档

[https://www.codeigniter.com/user_guide/database/call_function.html](https://www.codeigniter.com/user_guide/database/call_function.html)

# excel - Excel VBA：工作簿_打开

> ID：13946645
> 
> 赞同：2
> 
> 时间：2012-12-19T06:23:11.040
> 
> 标签：excel, vba, worksheet

我正在使用 Workbook_Open 在打开应用程序时调用用户窗体，这工作正常。但是我希望它只在第一次打开时运行。我试过了，如果我从编辑器运行子程序，它就可以工作，但当我打开文件时就不行。

```
Sub Workbook_Open()
If Worksheets("DataSheet").Range("A1").Value = "" Then
     QuickStartForum.Show
End If
End Sub 
```

注意：A1 包含将在用户表单运行后填充的值

看来问题在于它在将数据加载到工作表之前打开了用户表单。

这是有办法解决这个问题还是我需要采取不同的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T10:18:46.187

我认为这是因为您在`Module`. 您需要将代码放在“ `ThisWorkBook`”中。

我尝试了以下代码，当它在“”中时没有任何问题，但无法在“ ”`ThisWorkBook`中运行`Module1`

```
Private Sub Workbook_Open()
    If Worksheets("DataSheet").Range("A1").Value = "" Then
         QuickStartForum.Show
         Worksheets("DataSheet").Range("A1").Value = "filled" ' <-- this fills the cell with data for testing, so that when you reopen the file it should not re-open the userform
    Else
        MsgBox ("not shown because the A1 cell has data")
    End If
End Sub 
```

# php - 保存行时缺少字符？

> ID：13946649
> 
> 赞同：4
> 
> 时间：2012-12-19T06:23:35.757
> 
> 标签：php, zend-framework, character-encoding, zend-db, multibyte

```
$userTb = new My_Tb_User();  //Child of Zend_Db_Table_Abstract
$row = $userTb->find(9)->current();
$row->name = 'STÖVER';
$row->save(); 
```

在第 9 行的用户表内部，名称列值`ST`被存储而不是`STÖVER`?

`Ö`是 . 中支持的德语字符`UTF-8`。如果我使用 phpmyadmin 手动输入“STÖVER”，它将正确存储。

`utf8`创建数据库适配器时，我还传递了带有值的 charset 参数，但仍然没有运气！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:00:14.587

如果您阅读 的手册条目[`utf8_encode`](https://stackoverflow.com/questions/6700275/utf8-encode-function-purpose)，它*会将 ISO-8859-1 编码的字符串转换为 UTF-8*。函数名是一个可怕的误称，因为它暗示了某种必要的自动编码。事实并非如此。如果您的源代码保存为 UTF-8 并且您将“STÖVER”分配给`$string`，则`$string`保存以 UTF-8 编码的字符“STÖVER”。无需采取进一步行动。事实上，尝试将 UTF-8 字符串（错误地）从 ISO-8859-1 转换为 UTF-8 会造成乱码。

```
utf8_encode('STÖVER'); 
```

[在stackoverflow](https://stackoverflow.com/questions/6700275/utf8-encode-function-purpose)中检查这个问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:10:10.693

这是一个不好的做法`utf8_encode`，这会给您的应用程序增加很多复杂性。尝试通过寻找源头来解决问题。

一些想法：

*   数据库服务器字符集问题（检查服务器的编码）
*   数据库客户端字符集问题（检查连接的编码）
*   数据库表字符集问题（检查表的编码）
*   一个php默认编码问题（检查`default_encoding`parameters.ini中的参数）
*   多字节配置错误（请参阅 parameters.ini 中的 mb_string 参数）
*   `<form>`字符集问题（检查它是否以 utf-8 格式发送）
*   `<html>`字符集问题（在您的 html 文件中未设置 enctype ）
*   一个`Content-encoding:`问题（Apache 发送了错误的编码）。

# python - PyInstaller 2.0 捆绑文件为 --onefile

> ID：13946650
> 
> 赞同：20
> 
> 时间：2012-12-19T06:23:37.900
> 
> 标签：python, pyinstaller

我正在尝试使用 PyInstaller 2.0 将我的 py 脚本捆绑为 .exe。我可以捆绑脚本，但在我的脚本中，我需要打开一个应该捆绑在 exe 中的文件（因此它是可移植的）。我很难做到这一点..

在我的 .py 中，我有

```
filename = 'C:\path\to\my\file\doc.docx'
data = open(filename,'rb') 
```

我使用 PyInstaller 2.0，这在我的计算机上运行良好，但如果我将 exe 传输到另一台计算机，它将无法运行。PyInstaller 2.0 是相当新的，所以它上面的文档很少，出版商的文档是相当“缺乏”。

这是发布者关于此事的信息：（我认为他们的文档不是最新的，因为一开始它说使用 Configure.py，然后在其他文档中它说 Configure.py 在 2.0 中不再需要）

> 在 --onefile 发行版中，数据文件捆绑在可执行文件中，然后在运行时由 C 代码提取到工作目录中（它也能够重建目录树）。工作目录最好通过 os.environ['_MEIPASS2'] 找到。因此，您可以通过以下方式访问这些文件：

```
os.path.join(os.environ["_MEIPASS2"], relativename)) 
```

这对我来说真的没有意义，一个初级程序员..

出版商的另一份文件说..

> 在 --onefile 发行版中，数据文件捆绑在可执行文件中，然后在运行时由 C 代码提取到工作目录中（它也能够重建目录树）。工作目录最好由 sys._MEIPASS 找到。因此，您可以通过以下方式访问这些文件：

```
os.path.join(sys._MEIPASS, relativename)) 
```

我已经用 os.environ["_MEIPASS2"] 做了很多实验，python 似乎不理解 os.environment["_MEIPASS2"]。我得到了这个：

```
>>> print os.environ["_MEIPASS2"]

Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    print os.environ["_MEIPASS2"]
  File "C:\Python27\lib\os.py", line 423, in __getitem__
    return self.data[key.upper()]
KeyError: '_MEIPASS2' 
```

我还尝试了 sys._MEIPASS .. 是的，python 响应“模块”没有属性“_MEIPASS”。

在这一点上，我觉得我的头快要爆炸了。我感谢 PyInstaller 的作者的工作，但他们的文档是我见过的最糟糕的！我只需要有人帮我将文件捆绑到 exe 中。我真的很想使用 PyInstaller 2.0+，因为所有 .spec 的东西都让我对以前版本的 PyInstaller 感到困惑。

顺便说一句，我正在使用带有 python 2.7.3 的 Win8 64 位

请帮忙！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-20T00:27:47.643

我的天啊！这个 PyInstaller 真的让我有点困惑。如果我以前的帖子听起来有点“咆哮”，对此感到抱歉。无论如何，对于任何试图在 --onefile PyInstaller 包中包含文件的人来说，这对我有用：

将其包含在您的 .py 脚本中：

```
filename = 'myfilesname.type'
if hasattr(sys, '_MEIPASS'):
    # PyInstaller >= 1.6
    chdir(sys._MEIPASS)
    filename = join(sys._MEIPASS, filename)
elif '_MEIPASS2' in environ:
    # PyInstaller < 1.6 (tested on 1.5 only)
    chdir(environ['_MEIPASS2'])
    filename = join(environ['_MEIPASS2'], filename)
else:
    chdir(dirname(sys.argv[0]))
    filename = join(dirname(sys.argv[0]), filename) 
```

归功于我不记得名字的网上某人..（对不起，来晚了，我筋疲力尽了！）

然后，如果您使用 PyInstaller2.0，在 cmd 中，从 pyinstaller-2.0 目录，您可以运行

```
pyinstaller.py --onefile myscriptsname.py 
```

这将在 pyinstaller-2.0 目录中创建一个 myscriptsname.spec 文件。它还会创建一个 exe，但这不起作用。稍后会更新。现在编辑该 .spec，并添加以下 a.datas 行（记住数据，而不是数据）。我在 .spec 文件中包含了一些额外内容，仅供参考。

```
a = Analysis(['ServerTimeTest_nograph.py'],
             pathex=['c:\\Python27\\pyinstaller-2.0'],
             hiddenimports=[],
             hookspath=None)
a.datas += [('myfilesname.type','C:\\path\\to\\my\\file\\myfilesname.type','DATA')]
pyz = PYZ(a.pure) 
```

现在，回到 cmd，运行

```
pyinstaller.py --onefile myscriptsname.spec 
```

这将更新 /dist 目录中的 .exe。

也许有更好的方法，或者更漂亮的方法，但这对我有用！

# javascript - 匹配正则表达式中的特殊字符和字母

> ID：13946651
> 
> 赞同：48
> 
> 时间：2012-12-19T06:23:38.250
> 
> 标签：javascript, regex, special-characters

我正在尝试验证一个字符串，它应该`&-._`只包含字母数字和特殊字符。为此，我尝试使用正则表达式。

```
var pattern = /[a-zA-Z0-9&_\.-]/
var qry = 'abc&*';
if(qry.match(pattern)) {
    alert('valid');
}
else{
    alert('invalid');
} 
```

使用上面的代码时，字符串`abc&*`是有效的。但我的要求是证明这个无效。即当出现除字母、数字或特殊字符以外的字符`&-._`时，该字符串应评估为无效。我怎么能用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-19T06:27:08.573

将它们添加到允许的字符中，但您需要转义其中一些字符，例如 -]/\

```
var pattern = /^[a-zA-Z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/ 
```

这样，您可以删除您想要禁止的任何单个字符。

此外，您希望包含字符串地标 ^ 和 $ 的开始和结束

**更新：**

正如 elclanrs 所理解的（我们其他人最初并没有），模式中*唯一*需要允许的特殊字符是 &-._

```
/^[\w&.\-]+$/ 
```

[\w] 与 [a-zA-Z0-9_] 相同

虽然破折号在列表的开头或结尾不需要转义，但我更喜欢这样做，以防添加其他字符。此外，+ 表示您至少需要列出的字符之一。如果零是可以的（即一个空值），那么用 * 代替它：

```
/^[\w&.\-]*$/ 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-19T06:25:45.073

那么，为什么不将它们添加到您现有的角色类中呢？

```
var pattern = /[a-zA-Z0-9&._-]/ 
```

如果您需要检查字符串是否只包含那些字符，则还必须**锚定**表达式：

```
var pattern = /^[a-zA-Z0-9&._-]+$/ 
```

分别添加`^`和`$`匹配字符串的开头和结尾。

可以对字母、数字或下划线进行测试，`\w`以缩短您的表达：

```
var pattern = /^[\w&.-]+$/ 
```

正如 Nathan 的评论中提到的，如果您不使用结果`.match()`（它返回一个匹配的数组），最好使用`RegExp.test()`它返回一个简单的布尔值：

```
if (pattern.test(qry)) {
    // qry is non-empty and only contains letters, numbers or special characters.
} 
```

**更新 2**

如果我误读了问题，下面将检查是否满足所有三个单独的条件。

```
if (/[a-zA-Z]/.test(qry) && /[0-9]/.test(qry) && /[&._-]/.test(qry)) {
   // qry contains at least one letter, one number and one special character
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-19T06:33:40.327

Try this regex:

```
/^[\w&.-]+$/ 
```

Also you can use `test`.

```
if ( pattern.test( qry ) ) {
  // valid
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-04T09:48:39.377

我尝试了其中的一堆，但没有一个适用于我的所有测试。所以我发现了这个：

```
^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,15}$ 
```

从这个来源：[https ://www.w3resource.com/javascript/form/password-validation.php](https://www.w3resource.com/javascript/form/password-validation.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-16T11:05:41.050

```
let pattern = /^(?=.*[0-9])(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9!@#$%^&*]{6,16}$/;

//following will give you the result as true(if the password contains Capital, small letter, number and special character) or false based on the string format

let reee =pattern .test("helLo123@");   //true as it contains all the above 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-08T04:11:22.833

试试这个正则表达式：匹配我们在段落和字母中使用的特殊字符

```
 Javascript : /^[a-zA-Z]+(([\'\,\.\-_ \/)(:][a-zA-Z_ ])?[a-zA-Z_ .]*)*$/.test(str)

                .test(str) returns boolean value if matched true and not matched false

            c# :  ^[a-zA-Z]+(([\'\,\.\-_ \/)(:][a-zA-Z_ ])?[a-zA-Z_ .]*)*$ 
```

# php - CakePHP - 将构造函数参数传递给自定义组件

> ID：13946657
> 
> 赞同：0
> 
> 时间：2012-12-19T06:24:09.310
> 
> 标签：php, cakephp, cakephp-2.1

我正在尝试在 cakephp 中使用自定义类。最初我创建了一个可以正常工作的供应商类，但我不能使用其他 cakephp 组件。

要使用 $this->Text 等内置组件，我可以创建一个自定义组件，但构造函数需要一个参数，该参数是从 API 返回的 json 对象，我需要在循环中保持初始化

```
//The constructor for the class
function __construct($objValue) {
$this->messageId = $objValue['id']; 
```

是否使用适合此目的的组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:07:46.863

如果在控制器范围内不需要组件，则无需在此处创建组件。您也不需要将其设为供应商类（这是第三方的东西）。

cake 为您提供了一条出路：Libs in`APP/Lib` 您可以随时随地使用它们。

```
App::uses('MyClassName', 'Lib');
$MyClass = new MyClassName(); 
```

您甚至可能想在 Lib 本身中创建一个包 - 例如“Lib/Utility”：

```
App::uses('MyClassName', 'Utility'); 
```

如果不知道更多关于这个自定义类究竟做了什么，很难在这里更具体。

# glassfish - 无法在 jelastic 云中部署战争文件

> ID：13946658
> 
> 赞同：0
> 
> 时间：2012-12-19T06:24:11.193
> 
> 标签：glassfish, cloud, java-ee-6, jelastic

我使用 java 和 mongodb 开发了一个 Web 应用程序。我使用 glassfish 服务器。我试图将它部署在我上传了我的战争文件的 jelastic 云服务上。但是当我在部署 war 文件后运行它时，它会显示 404 错误。为什么？该项目在我的机器上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:27:08.970

至少有几个潜在的原因：

*   您的应用程序需要一些默认情况下未启动的资源（例如 DerbyDB）。在这种情况下，您可以查看 GlassFish 日志文件 - server_instance.log 以了解更多详细信息。

*   您正在尝试从错误的上下文中获取资源，请确保您正在尝试通过正确的上下文名称获取它

# android - Android onActivityResult

> ID：13946669
> 
> 赞同：5
> 
> 时间：2012-12-19T06:24:54.150
> 
> 标签：android, android-activity, video-recording

我陷入了一种情况，根据我的应用程序图表流程描述如下：

假设我在 Activity A 上，在单击按钮时，我从图库中挑选图像，挑选后，我将移至 Activity B（它来自 onActivity 结果内部 - 通过传递 Intent ）。现在，当我在活动 B 上并单击按钮时，会调用自定义视频制作器。在这里，我拍摄了一个 10 秒的视频，然后我完成了（活动 C）使用

```
C.this.finish(); 
```

现在根据Android活动流程我应该回到活动B，但在我的情况下，我得到一个黑屏几秒钟，然后得到活动A，而不是活动B。我不能透露我的代码，所以我我没有附上它。对不起，同样。如果有人可以帮助我提供这么多信息，请帮助我

代码：

单击按钮的活动 B 代码段：

```
 btnTakeVideo.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {                
                Intent takePictureIntent = new Intent(TakeAnotherPhoto.this,Recorder.class);

                startActivityForResult(takePictureIntent,CreateAuctionScreen.ACTION_TAKE_VIDEO);
            }
        }); 
```

这是 onActivityResult

```
onActivityResult()
if(requestCode == CreateAuctionScreen.ACTION_TAKE_VIDEO) {
            if (resultCode == RESULT_OK) {
                if(CreateAuctionScreen.resetBitmap!=null)
                {                
                    CreateAuctionScreen.resetBitmap = null;
                }                
                Drawable dd;
                dd = getResources().getDrawable(R.drawable.list_pic_frame2x);
                CreateAuctionScreen.bmpSize = ((BitmapDrawable)dd).getBitmap();

                if(data != null){

                    Uri str = data.getData();
                    String path = getRealPathFromURI(str);
                    System.out.println(path);

                    Bitmap bmp = ThumbnailUtils.createVideoThumbnail(path, MediaStore.Images.Thumbnails.MINI_KIND);
                    CreateAuctionScreen.resetBitmap = Bitmap.createScaledBitmap(bmp, CreateAuctionScreen.bmpSize.getWidth(), CreateAuctionScreen.bmpSize.getHeight(), true);

                    if(CreateAuctionScreen.resetBitmap != null){

                        if(CreateAuctionScreen.thumbList.size() < 20){
                            dpv.set_chkString("Video");
                            dpv.get_chkString();
                            CreateAuctionScreen.chkList.add(dpv);
                            CreateAuctionScreen.str_thumbList.add(path);
                            CreateAuctionScreen.thumbList.add(CreateAuctionScreen.resetBitmap);

                            hl.setAdapter(new GallaryImageAdapter(TakeAnotherPhoto.this,CreateAuctionScreen.thumbList.size(),ImageAdapter.CREAT_AUCTION_SCREEN, CreateAuctionScreen.thumbList));
                        }else{
                            Toast.makeText(TakeAnotherPhoto.this, "You can add up to 20 pics & videos only", Toast.LENGTH_SHORT).show();
                        }
                    }
                } 
```

活动 C（客户录像机）

```
public class Recorder extends Activity implements SurfaceHolder.Callback{

    Button myButton;
    MediaRecorder mediaRecorder;
    SurfaceHolder surfaceHolder;
    boolean back;
    Timer timer;
    int counter = 1;
    String strPath;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        back = false;

        mediaRecorder = new MediaRecorder();
        setContentView(R.layout.recorde);
        initMediaRecorder();

        timer = new Timer();
        TimerTask timerTask = new TimerTask() {
            @Override
            public void run() {
                if(counter<=10)
                    counter++;
                //Android UI get Updated continouly
                else {
                    // If condition full filled the timer will stop here
                    mediaRecorder.stop();
                    mediaRecorder.release();
                    timer.cancel();
                    Intent i = new Intent();
                    setResult(RESULT_OK, i.putExtra("returnedVideo", strPath));

                    Recorder.this.finish();

                }
            } 
        };
        timer.schedule(timerTask, 1000, 1000);

        SurfaceView myVideoView = (SurfaceView)findViewById(R.id.videoview);
        surfaceHolder = myVideoView.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        myButton = (Button)findViewById(R.id.mybutton);
        myButton.setOnClickListener(myButtonOnClickListener);
    }

    private Button.OnClickListener myButtonOnClickListener
    = new Button.OnClickListener(){

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            mediaRecorder.stop();
            mediaRecorder.release();
            timer.cancel();

            Intent i = new Intent();
            setResult(RESULT_OK, i.putExtra("returnedVideo", strPath));
//            i.putExtra("returnedVideo", strPath);
//            i.putExtra("isRecorder", true);
//            startActivity(i);
            finish();
        }};

        public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
            // TODO Auto-generated method stub

        }
        public void surfaceCreated(SurfaceHolder arg0) {
            // TODO Auto-generated method stub
            prepareMediaRecorder();
        }
        public void surfaceDestroyed(SurfaceHolder arg0) {
            // TODO Auto-generated method stub

            mediaRecorder.stop();
            mediaRecorder.release();
            //Recorder.this.finish();
        }

        @Override
        public void onBackPressed() {
            // TODO Auto-generated method stub
            super.onBackPressed();

            mediaRecorder.stop();
            mediaRecorder.release();
        }

        private void initMediaRecorder(){
            Random genraotr = new Random();
            int n = 10000;
            n = genraotr.nextInt(n);            

            mediaRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
            mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
            CamcorderProfile camcorderProfile_HQ = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
            mediaRecorder.setProfile(camcorderProfile_HQ);
            mediaRecorder.setOutputFile("/sdcard/auction_video"+n+".mp4");
            strPath = "/sdcard/auction_video"+n+".mp4";
            mediaRecorder.setMaxDuration(10000); // Set max duration 10 sec.
            mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M
        }

        private void prepareMediaRecorder(){
            mediaRecorder.setPreviewDisplay(surfaceHolder.getSurface());
            try {
                mediaRecorder.prepare();
                mediaRecorder.start();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:33:10.600

It appears to be a exception in Activity B. As everyone has suggested, debug OnActivityResult function in B. Check if you are retrieving the right path as printed by 'System.out.println(path)' in your function.

# ajax - Rails 2 Datatable 服务器端处理与 AJAX

> ID：13946676
> 
> 赞同：1
> 
> 时间：2012-12-19T06:25:59.650
> 
> 标签：ajax, datatable, ruby-on-rails-2

在 Rails 2 应用程序中，我想通过服务器端处理和使用 ajax 来实现 Jquery 数据表。

我正在关注 railcast 第 340 集和[https://github.com/JoelQ/ajax-datatables-rails](https://github.com/JoelQ/ajax-datatables-rails)
但它们适用于 rails 3 而我正在使用 rails 2
所以任何人都可以给我好的想法或示例对我有好处。

谢谢

# c# - 根据名称动态调用方法而无需反射的有效方法

> ID：13946680
> 
> 赞同：3
> 
> 时间：2012-12-19T06:26:05.750
> 
> 标签：c#, reflection, delegates

让我试着简化我的问题：

我有四个类：Admins、Users、Players、Roles

数据库返回我需要执行的方法的名称。例如，如果`Admins_GetName`返回，则`GetName()`需要在`Admins`类上执行方法。如果`Players_GetRank`返回，则`GetRank()`需要在`Players`类上调用方法。

我不想写一个包含我所有业务逻辑的巨大 IF 或 SWITCH 语句。不使用反射最有效的解决方案是什么？如果可能的话，我想避免反射带来的性能影响。

请记住，所有方法可能有不同的参数，但会返回字符串。

这是我现在想做的事情： 1) 有一个带有 switch 语句的方法，它将分解数据库值并找到我需要执行的类和方法。就像是：

```
switch(DbValue)
{
 case DbValue == "Admins_GetName":
  Declare a delegate to Admins.GetName();
  return;
 case: DbValue = "Players_GetRank"
  Declare a delegate to Players.GetRank();
  return;
  . 
  .
  .
  etc
} 
```

返回类/方法引用；

2）将上面的声明传递给：

```
var myValue = Retrieved method.invoke() 
```

你们能否建议我用最好的方法来完成这个，或者帮助我用正确的语法来解决我如何实现它的想法。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T06:38:39.360

需要更多的上下文；例如，是否所有有问题的方法都具有相同的签名？在*一般*情况下，反射是最合适的工具，只要你不在一个紧密的循环中调用它，就可以了。

否则，`switch`语句方法是合理的，但有维护开销。如果这有问题，我会很想在运行时构建一个委托缓存，例如：

```
using System;
using System.Collections.Generic;
public class Program
{
    public string Bar { get; set; }

    static void Main()
    {
        var foo = new Foo();
        FooUtils.Execute(foo, "B");
        FooUtils.Execute(foo, "D");
    }
}
static class FooUtils
{
    public static void Execute(Foo foo, string methodName)
    {
        methodCache[methodName](foo);
    }
    static readonly Dictionary<string, Action<Foo>> methodCache;
    static FooUtils()
    {
        methodCache = new Dictionary<string, Action<Foo>>();
        foreach (var method in typeof(Foo).GetMethods())
        {
            if (!method.IsStatic && method.ReturnType == typeof(void)
                && method.GetParameters().Length == 0)
            {
                methodCache.Add(method.Name, (Action<Foo>)
                    Delegate.CreateDelegate(typeof(Action<Foo>), method));
            }
        }
    }
}

public class Foo
{
    public void A() { Console.WriteLine("A"); }
    public void B() { Console.WriteLine("B"); }
    public void C() { Console.WriteLine("C"); }
    public void D() { Console.WriteLine("D"); }
    public string Ignored(int a) { return ""; }
} 
```

该方法可以通过使用泛型扩展到多种目标类型：

```
static class FooUtils
{
    public static void Execute<T>(T target, string methodName)
    {
        MethodCache<T>.Execute(target, methodName);
    }
    static class MethodCache<T>
    {
        public static void Execute(T target, string methodName)
        {
            methodCache[methodName](target);
        }
        static readonly Dictionary<string, Action<T>> methodCache;
        static MethodCache()
        {
            methodCache = new Dictionary<string, Action<T>>();
            foreach (var method in typeof(T).GetMethods())
            {
                if (!method.IsStatic && method.ReturnType == typeof(void)
                    && method.GetParameters().Length == 0)
                {
                    methodCache.Add(method.Name, (Action<T>)
                        Delegate.CreateDelegate(typeof(Action<T>), method));
                }
            }
        }
    }
} 
```

# iphone - 在目标 c 中使用私有库的正确方法？

> ID：13946683
> 
> 赞同：2
> 
> 时间：2012-12-19T06:26:28.893
> 
> 标签：iphone, objective-c, ios, xcode

[我从这个链接](https://github.com/kennytm/iphone-private-frameworks)下载了一组私人图书馆。当我点击下载时，我得到了所有框架。所以这些只是头文件，而不是 Xcode 中可用的 .framework 文件。因此，我通过构建阶段的常用方法将它们链接起来，在其中我将二进制文件与库单击 + 并从框架中选择头文件（在我的情况下为首选项框架）。将这些文件添加到我的项目后，我尝试从其中一个库中创建一个对象并尝试调用它们的实例方法。当我尝试执行这个程序时，我得到了这个错误。无论我在设备还是模拟器上运行它，我都会得到这个。

> 体系结构 i386 的未定义符号：
> “_OBJC_CLASS_$_DevicePINController”，引用自：UAViewController.o 中的 objc-class-ref ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

DevicePinController 是私有框架首选项的一部分。我正在尝试使其成为 UA 的对象

**编辑：**我尝试使用其他框架头文件，如蓝牙，我得到了这个错误。

**编辑：**我尝试将整个框架添加到项目中，而不是添加单个头文件。现在错误是

d：找不到框架 BluetoothManager clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:32:40.617

您需要实际构建框架。您不能只链接头文件；那没有意义。

尝试将 Preferences 文件夹中的所有 .m 文件添加为**Compile Sources ，并从****Link Binary with Libraries**中删除头文件。

**补充：**我现在意识到这个答案是不正确的。OP 尝试使用的文件不是库，而是来自 Apple 私有框架的头文件。这是一个相关的答案：[https ://stackoverflow.com/a/13388225/893113](https://stackoverflow.com/a/13388225/893113)

# javascript - 如何使用 Greasemonkey 向文本框添加“onblur”处理程序？

> ID：13946689
> 
> 赞同：3
> 
> 时间：2012-12-19T06:26:41.813
> 
> 标签：javascript, dom-events, greasemonkey

我有这段代码在测试页面中运行良好......

Javascript：

```
function myFunction() {
    var x = document.getElementById("tarea"),
        nameInput = document.getElementById('name'),
        classInput = document.getElementById('class');

    var lines = x.value.split('\n');
    var name = lines[0].substring(5);
    var grade = lines[1].substring(6);

    nameInput.value = name;
    classInput.value = grade;
} 
```

HTML：

```
<textarea rows="4" cols="50" id="tarea" onblur="myFunction()"></textarea> 
```

现在我想使用 Greasemonkey将`onblur`功能添加到*预先存在的页面中。*

但是，我不知道如何`onblur`在 Greasemonkey 中使用 Javascript 事件。我已经搜索但找不到任何使用`onblur`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:59:40.220

使用[`addEventListener()`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)（纯 javascript）或[jQuery`.on()`](http://www.jqapi.com/#p=on)（更强大的方法）。

纯JS：

```
// ==UserScript==
// @name     _YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

var targInput = document.getElementById ("tarea");
targInput.addEventListener ("blur", myFunction, false);

function myFunction () {
    ... ...
} 
```

jQuery（推荐），注意`@require`：

```
// ==UserScript==
// @name     _YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

$(document).on ("blur", "#tarea", myFunction);

function myFunction () {
    ... ...
} 
```

# tomcat - 如何编写 JUnit 类来测试一些在 tomcat 中运行的 java 类？

> ID：13946693
> 
> 赞同：3
> 
> 时间：2012-12-19T06:27:00.600
> 
> 标签：tomcat, testing, junit, external

我正在使用 eclipse 并使用插件来触发 JUnit 测试套件。现在我需要编写 JUnit 测试用例，它使用只能在 Tomcat 服务器中运行的高度耦合的 java 类。如何开始以便我可以运行 JUnit 类来测试一些在 tomcat 中运行的 java 类？

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:16:44.637

首先：很难为高度耦合的代码编写适当的测试。正确答案是：引入间接将代码与环境解耦，然后对其进行测试。

幸运的是，您编写的是“JUnit-Tests”，而不是“Unit-Tests”，因为您正在做的是使用 JUnit 进行*集成测试*（因为您正在尝试一起测试多个层）。

另一种可能性是[模拟](http://en.wikipedia.org/wiki/Mock_object)（tomcat-）依赖项。这将使您能够在不引入许多间接的情况下相处。但要小心：如果你有太多的 MockObjects 设置，只是为了一点点测试和最后一个断言，这可能不会教你太多关于代码正确性的知识。

# windows - 如何以编程方式在 Windows 上弹出“文件共享”对话框

> ID：13946698
> 
> 赞同：1
> 
> 时间：2012-12-19T06:27:15.370
> 
> 标签：windows, file-sharing

您可能知道，右键单击文件夹并选择“**共享**”->“**特定人员**”窗口将弹出一个名为“**文件共享**”的对话框，让您选择用户帐户/权限。

**我的问题是：**有没有办法通过编程弹出这个对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:20:26.010

我找到了一个解决方案，在 ntshrui.dll 上使用 ShowShareFolderUI 可以完成这项工作

请参阅MSDN 上的此[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762235%28v=vs.85%29.aspx)

# android - 如何在android中添加动画以显示两个图像一个图像扩展另一个图像

> ID：13946700
> 
> 赞同：1
> 
> 时间：2012-12-19T06:27:24.800
> 
> 标签：android, image, animation, overlap

我需要显示一个图像从左到右扩展另一个图像的动画。我尝试了很多，但无法做到这一点；我是android中的动画新手。我能够将图像从左向右移动，但无法展开该图像

```
package com.fancy.splashscreen;

import android.R.anim;
import android.app.Activity;
import android.graphics.PixelFormat;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.view.Window;
import android.view.animation.TranslateAnimation;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class SpalshScreenActivity extends Activity {
    ImageView tv;
    TranslateAnimation moveLefttoRight;

    public void onAttachedToWindow() {
        super.onAttachedToWindow();
        Window window = getWindow();
        window.setFormat(PixelFormat.RGBA_8888);
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // setContentView(R.layout.main);
        // StartAnimations();
        LinearLayout ll = new LinearLayout(this);
        ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.FILL_PARENT));
        // ll.setPadding(0, 0, 0, 30);
        ImageView tv1 = new ImageView(this);
        tv1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        tv1.setBackgroundResource(R.drawable.animation1);
        ll.addView(tv1);
        ll.setOrientation(LinearLayout.VERTICAL);
        // ll.setBackgroundResource(R.drawable.animation1);

        tv = new ImageView(this);
        tv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        tv.setBackgroundResource(R.drawable.animation2);
        moveLefttoRight = new TranslateAnimation(0, 200, 0, 0);
        moveLefttoRight.setDuration(10000);
        moveLefttoRight.setFillAfter(true);

        Button button = new Button(this);
        button.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        button.setText("PressMe");
        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                tv.startAnimation(moveLefttoRight);
            }

        });

        ll.addView(tv);
        ll.addView(button);
        setContentView(ll);
    }

    private void StartAnimations() {
        // Animation anim = AnimationUtils.loadAnimation(this, R.anim.alpha);
        // anim.reset();
        // LinearLayout l = (LinearLayout) findViewById(R.id.lin_lay);
        // l.clearAnimation();
        // l.startAnimation(anim);

        TranslateAnimation moveLefttoRight = new TranslateAnimation(0, 200, 0,
                0);
        moveLefttoRight.setDuration(1000);
        moveLefttoRight.setFillAfter(true);

        // anim = AnimationUtils.loadAnimation(this, R.anim.alpha);
        // anim.reset();
        ImageView iv = (ImageView) findViewById(R.id.logo2);
        iv.clearAnimation();
        iv.startAnimation(moveLefttoRight);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:10:48.247

使用两个嵌套动画。一种是执行从左到右平移的动画，另一种是淡出动画。

# php - PHP 类 COM for Outlook 未打开 Outlook

> ID：13946702
> 
> 赞同：0
> 
> 时间：2012-12-19T06:27:33.450
> 
> 标签：php, com

我已经使用下面的代码通过 PHP COM 方法打开 Outlook。但是前景没有打开，它正在加载和加载。没有反应，没有打开前景，只有加载和加载。请给出如何通过 PHP COM 方法打开 Outlook 的解决方案。我已经安装了 Office Outlook，也有 MAPI.Session，也有 Outlook.Application。

```
if (! defined ( "olMailItem" ))
{
define ("olMailItem", 0 );
}
try {
$objApp = new COM ( "Outlook.Application" ) or die ( "Cannot Load Outlook.Application" );
$namespace = $objApp->GetNamespace("MAPI"); 
$namespace->Logon();
$myItem = $objApp->CreateItem ( olMailItem );
$myItem->To = "yusuf.khalil88@gmail.com";
$myItem->SentOnBehalfOfName = "yusuf_khalil88@yahoo.com";
$myItem->Subject = "Hi Response me";
$myItem->Body = "I want to find out";
$myItem->Send ();
}catch ( Exception $e ) {
var_dump ( $e->getMessage () );
debug_print_backtrace ();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T16:57:28.537

我刚刚从这个页面找到了另一个解决方案：[http ://forums.devshed.com/php-development-5/php-com-automating-outlook-46167.html](http://forums.devshed.com/php-development-5/php-com-automating-outlook-46167.html)

基本上 PHP 没有像 olMailList 这样的常量，所以你必须通过值来引用它。因此，要使您当前的脚本正常工作，请更改此行：

```
$myItem = $objApp->CreateItem(olMailItem); 
```

至：

```
$myItem = $objApp->CreateItem(0); 
```

这对我的情况很好。

# java - 温度转换

> ID：13946711
> 
> 赞同：0
> 
> 时间：2012-12-19T06:28:46.840
> 
> 标签：java, temperature

我必须将摄氏温度转换为华氏温度。但是，当我以摄氏度打印温度时，我得到了错误的答案！请帮忙 ！（公式是 c = (5/9) * (f -32)。当我输入 1 代表华氏度时，我得到 c = -0.0。我不知道出了什么问题：s

这是代码

```
import java.io.*; // import/output class
public class FtoC { // Calculates the temperature in Celcius
    public static void main (String[]args) //The main class
    {
    InputStreamReader isr = new InputStreamReader(System.in); // Gets user input
    BufferedReader br = new BufferedReader(isr); // manipulates user input
    String input = ""; // Holds the user input
    double f = 0; // Holds the degrees in Fahrenheit
    double c = 0; // Holds the degrees in Celcius
    System.out.println("This program will convert the temperature from degrees Celcius to Fahrenheit.");
    System.out.println("Please enter the temperature in Fahrenheit: ");
    try {
        input = br.readLine(); // Gets the users input
        f = Double.parseDouble(input); // Converts input to a number
    }
    catch (IOException ex)
    {
        ex.printStackTrace();
    }
    c = ((f-32) * (5/9));// Calculates the degrees in Celcius
    System.out.println(c);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:32:53.457

You are doing integer division, and hence `5 / 9` will give your `0`.

Change it to *floating point division*: -

```
c = ((f-32) * (5.0/9)); 
```

or, do the *multiplication* first (Remove the brackets from division): -

```
c = (f-32) * 5 / 9; 
```

Since, `f` is double. Numerator will be `double` only. I think this way is better.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:34:24.330

You should try using double instead of int as this would lead to loss of precision. Instead of using the whole formula, use one calculation at one time

Example: Use appropriate casting Double this = 5/9

F - Double 32

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:35:31.413

use this rather:

```
c = (int) ((f-32) * (5.0/9));// Calculates the degrees in Celcius 
```

as it involves division and you should not use only ints to get proper division

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T06:39:17.490

用这个

```
System.out.println((5F / 9F) * (f - 32F)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T07:36:58.147

除非另有明确规定，Java 将所有数字视为整数。由于整数不能存储数字的小数部分，因此在执行整数除法时，余数被丢弃。所以：`5/9 == 0`

Rohit 的解决方案`c = (f-32) * 5 / 9;`可能是最简洁的（尽管缺少显式类型可能会导致一些混乱）。

# java - @Autowired 在这段代码中做了什么

> ID：13946712
> 
> 赞同：-1
> 
> 时间：2012-12-19T06:28:50.540
> 
> 标签：java, spring, spring-mvc

需要了解`@Autowired`这段代码在做什么。我有点困惑`scope=session`？这是否意味着现在`user`可以在`HttpSession`? 如何从 中检索它`HttpSession`？如果我删除`redirectAttrs.addFlashAttribute("user", user);`，那么我在`JSP`页面中看不到用户？

用户类及其映射如下

```
<bean id="user" class="example.User" scope="session">
  <aop:scoped-proxy/>
</bean> 
```

下面的控制器重定向到另一个控制器，它不包含任何内容，只包含到登录 page.jsp 的位置

```
@Autowired
@Qualifier("user")
private User user;

@RequestMapping(method=RequestMethod.POST)
public String post(@ModelAttribute User user, BindingResult result, SessionStatus status, final RedirectAttributes redirectAttrs) {
    logger.info("post");
    new UserValidator().validate(user, result);
    if (result.hasErrors()) {
        return "login";
    }
    else {
        status.setComplete();           
        logger.info("Email Id: " + user.getEmailId());          
        redirectAttrs.addFlashAttribute("user", user);          
        return "redirect:/landing.htm";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:39:49.590

范围会话意味着将保留用户对象，直到客户端会话被销毁。这并不意味着您在 HttpSession 对象中拥有它。@Autowired 注解用于自动连接用户 bean。它用于从应用程序上下文中获取 bean 并将其分配给 Java 类中的局部变量。

# php - PHP中的日期（'现在'）

> ID：13946716
> 
> 赞同：5
> 
> 时间：2012-12-19T06:29:29.093
> 
> 标签：php

很长一段时间后，我需要使用 PHP 的日期功能。我写了类似的东西：

```
echo date('now'); 
```

我得到了下面的输出：

```
1220123 
```

这意味着什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T06:32:11.817

从[PHP 手册](http://php.net/manual/en/function.date.php)：

> *   **n** 月份的数字表示，不带前导零
>     
>     
> *   **o** ISO-8601 年编号。这与 Y 具有相同的值，除了如果 ISO 周数 (W) 属于上一年或下一年，则使用那一年。（在 PHP 5.1.0 中添加）
>     
>     
> *   **w** 星期几的数字表示

因此，`date("now")`显示 12 (n)、2012 (o) 和 3 (w)。

您可能正在寻找：

*   `date("Y-m-d")`约会

*   `date("Y-m-d H:i:s")`日期时间

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T06:31:53.220

您需要为 date 函数提供有效的[格式](http://pl.php.net/manual/en/function.date.php)（不将 'now' 字符串识别为 now 的含义）

```
$date =  date("Y-m-d H:i:s"); 
```

或者您可以使用[DateTime](http://php.net/manual/en/class.datetime.php)类

```
$date = new DateTime(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-19T06:33:26.313

“现在”不是这个期望的有效参数，实际上它应该是 strtotime 函数，而不是日期。

日期将您的现在视为

**n**

一个月的数字表示，没有前导零

**○**

ISO-8601 年编号。这与 Y 具有相同的值，除了如果 ISO 周数 (W) 属于上一年或下一年，则使用那一年。（在 PHP 5.1.0 中添加）

**w**

星期几的数字表示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-13T13:25:09.203

似乎您将“现在”视为获取当前日期和时间的词，但它会在每个字符上编译。这是它如何编译的解释。

> n = 月份数
> 
> o = 在 ISO-8601 中视为一年。
> 
> w = 周数

所以这就是为什么它会在一个月内返回日期、年份和周数。

希望我能简单地解释一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T06:34:57.787

"now" 不是[date()的有效参数](http://php.net/manual/en/function.date.php)

打印当前日期的正确语法

```
yyyy-mm-dd hours minutes seconds 
```

格式如下

```
echo date('Y-m-d h:i:s'); 
```

[有关date()](http://php.net/manual/en/function.date.php)函数的详细信息，另请参阅 PHP 手册

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# c# - AJAX AutoComplete Extender - 设置 ContextKey 参数值并将其与前缀文本一起传递给 WebMethod

> ID：13946717
> 
> 赞同：2
> 
> 时间：2012-12-19T06:29:37.417
> 
> 标签：c#, jquery, asp.net, autocomplete

在了解了自动完成属性之后 -`ContextKey`

我将其用作优势：

每个扩展器对象的数据源将由相同的 WebMethod 处理。

就其本身而言，这对我来说是一个成就。

既然每件事都非常完美，那么问题是：

我需要传递另一个参数，当第二个文本框发送对 AutoComplete-Datasource 的请求时，就在 stage = table was selected 之后。

所以现在我不仅需要硬编码/常量，还需要所选表的值。

这实际上是 的值`#TBX_TableSelectorFirstStage`，以及硬编码的`ContextKey`值......

（类似`ContextKey += value of TBX_TableSelectorFirstStage`）

这样我就可以通过请求的表（表的名称）绘制指定的列列表

这是***`Jquery`代码***

```
<script type="text/javascript">
   $('document').ready(function () {

       var IvalidValue_Msg = "table was not selected";
       var TBX_tables = $(this);

       var TBX_Columns = $('#TBX_ColumnsSelectorFirstStage');

       $('#TBX_TableSelectorFirstStage')
       .val("Choose a Table")
       .focus(function () {

           $(this).val("");
           $(this).attr("dir", "ltr");

       }).blur(function () {
           var TBXTablsVALUE = $('#TBX_TableSelectorFirstStage').val();
           var Lngth = $('#TBX_TableSelectorFirstStage').val().length;
           var InvalidTBXBlur_TablesValue = TBXTablsVALUE == "" || TBXTablsVALUE == " " || Lngth < 4;
           if (InvalidTBXBlur_TablesValue) {
               $(this).focus();
               $(this).val(IvalidValue_Msg);
           }
           else {

               $(TBX_Columns).focus();
               SetContextKeyValue();
           }
           //$(this).next(':input').focus();

       }).change(function () {
           var TBXTablsVALUE = $('#TBX_TableSelectorFirstStage').val();
           var Lngth = $('#TBX_TableSelectorFirstStage').val().length;
           var InvalidTBXBlur_TablesValue = TBXTablsVALUE == "" || TBXTablsVALUE == " " || Lngth < 4;

           if (InvalidTableValue) {
               $(this).val(IvalidValue_Msg);
           }
           else {
               SetContextKeyValue();
           }
       }).click(function () {

               $(this).val("");

       });
   });
        /// ==========================================================\\\
       ///Jquery Section That Is Suppose To manipulate contextKey Property.

       function SetContextKeyValue() {
     //  var ttt = $get('AjaxAcEx_Columns_FirstStage',
       alert("asasas");
       // var x = $('#AutoCompleteExtender3'); //.set_contextKey($get('AjaxAcEx_Tables_FirstStage').value);
       alert($('#AjaxAcEx_Columns_FirstStage').attr("id")); 
   } 
```

这是***ASPX 代码***

```
<form id="form1" runat="server">
<cc1:ToolkitScriptManager ID="ToolKitScrptMan1" runat="server"></cc1:ToolkitScriptManager>

<cc1:AutoCompleteExtender ID="AutoCompleteExtender1" TargetControlID="TBX_FntsAC" runat="server"
                         MinimumPrefixLength="1" EnableCaching="true" CompletionSetCount="1" CompletionInterval="100" 
                         ServiceMethod="MyAcReqHandler" ContextKey="acFontsRquest"
                         FirstRowSelected="true" CompletionListCssClass="CL_Css_DataBase" CompletionListItemCssClass="CL_ItemCss_DataBase" CompletionListHighlightedItemCssClass="CL_tHighlightedItemCss_DataBase">
</cc1:AutoCompleteExtender>
<cc1:AutoCompleteExtender ID="AutoCompleteExtender2" BehaviorID="AjaxAcEx_Tables_FirstStage" TargetControlID="TBX_TableSelectorFirstStage" runat="server"
                         MinimumPrefixLength="1" EnableCaching="true" CompletionSetCount="1" CompletionInterval="100"
                         ServiceMethod="MyAcReqHandler" ContextKey="acTablesSelector_FirstStage"
                         FirstRowSelected="true" CompletionListCssClass="CL_Css_DataBase" CompletionListItemCssClass="CL_ItemCss_DataBase" CompletionListHighlightedItemCssClass="CL_tHighlightedItemCss_DataBase">
</cc1:AutoCompleteExtender>

<%--  Here is where i am stuck .
     object /element -  AutoCompleteExtender3 / BehaviorID AjaxAcEx_Columns_FirstStage
    This is the object i need to Set it's ContextKey attribute-value,
     with the result value of #TBX_TableSelectorFirstStage
--%>

<cc1:AutoCompleteExtender ID="AutoCompleteExtender3" BehaviorID="AjaxAcEx_Columns_FirstStage" TargetControlID="TBX_ColumnsSelectorFirstSTage" runat="server"
                         MinimumPrefixLength="1" EnableCaching="true" CompletionSetCount="1" CompletionInterval="100"
                         ServiceMethod="MyAcReqHandler" ContextKey="acColumnsSelector_FirstStage"
                         FirstRowSelected="true" CompletionListCssClass="CL_Css_DataBase" CompletionListItemCssClass="CL_ItemCss_DataBase" CompletionListHighlightedItemCssClass="CL_tHighlightedItemCss_DataBase">
</cc1:AutoCompleteExtender>

<div id="Div_firstStage" runat="server" style="width:90%" dir="rtl">
    <asp:TextBox ID="TBX_TableSelectorFirstStage"  runat="server" />
    <asp:TextBox ID="TBX_ColumnsSelectorFirstStage" runat="server" />   

</div> 
```

*** .Cs 代码背后*** (webMethod)

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod(EnableSession = true)]

public static List<string> MyAcReqHandler(string prefixText, string contextKey)
{

    List<string> retListAC = new List<string>();
    switch (contextKey)
    {

        case AutoComplete.Param.acTablesSelector_FirstStage:
            retListAC = GetListForAutoComplete<HTDB_Tables>(App.VarNms.SesDbTablsList);
            break;
        case AutoComplete.Param.acColumnsSelector_FirstStage:
            retListAC = GetListForAutoComplete<HTDB_Cols>(App.VarNms.SesDbTablsList);
            break;
        case AutoComplete.Param.acFontsRquest_SecondStage:
            retListAC = GetListForAutoComplete<fntNams>(App.VarNms.SesFontsList);
            break;

    }

    return AutoComplete.FromListStr(prefixText, retListAC);
}

private static List<string> GetListForAutoComplete<TheClassNameHere>(string SessionVarName, string NestedClassName="")
{
    List<string> ReturnedList = new List<string>();
    if (CurrSesVarSet.SesVar_AcDsListStr.Count == 0)
    {
        bool isNested = typeof(TheClassNameHere).IsNested;
        switch (isNested)
        {
            case true:
                ReturnedList = RflectMeths.anyNestedClassFldsAsListByType<TheClassNameHere>(NestedClassName);
                break;
            default:
                ReturnedList = RflectMeths.anyClassFldsAsListByType<TheClassNameHere>();
                break;
        }

        CurrSesVarSet.SesVar_AcDsListStr = ReturnedList;
        CurrentSession.AddVar(SessionVarName, ReturnedList);
    }
    else
        if (CurSessionMesthods.VarExistStat(App.VarNms.SesFontsList))
             ReturnedList = CurSessionMesthods.GetSessionVar.AsListStr(SessionVarName);
        else ReturnedList = CurrSesVarSet.SesVar_AcDsListStr;
    return ReturnedList;
} 
```

由于此应用程序中的一项努力是**避免完全回**发，因此我想实现-设置`ContextKey`, via `Jquery`, ...**除非**我的基本假设有误，否则通过 c# 执行此操作-后面的代码将导致整页回发，所以如果它在没有重新加载页面的情况下完成，只要我能发送这个参数，我就不在乎了，因为直到现在我一直保持着类似桌面的用户体验（;

感谢您的帮助，解决这个问题将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:23:28.803

我为这个答案搜索了很多，因为我找不到任何关于这个实现的信息我想我必须更加努力，所以我记得有人告诉我一些关于运动的事情，你必须这样做才能赢得这场比赛，所以开始吧尽可能快地然后加速，尽管很难发现我只是多工作了一点。

所以我错过了什么，因为我对 Jquery 缺乏最少的经验

我在互联网上找到的一件事是可用于设置 ContextKey 的功能，因为我太忙于尝试并获得帮助（完全适合我的场景的现成代码示例）最终通过更多的试验和错误，我有想如果有一套。必须有一个 get (:

所以这就是您可以操作现有密钥并将其与您想要的任何其他内容连接的方式

```
 $('document').ready(function () {
       var IvalidValue_Msg = "table was not selected";
       var TBX_tables = $(this);
       var TstTBXCLS = $(this).next();
       var TBX_Columns = $('#TBX_ColumnsSelectorFirstStage');

       $('#TBX_TableSelectorFirstStage')
       .val("Choose a Table")
       .focus(function () {

           $(this).val("");
           $(this).attr("dir", "ltr");

       }).blur(function () {
           var TBXTablsVALUE = $('#TBX_TableSelectorFirstStage').val();
           var Lngth = $('#TBX_TableSelectorFirstStage').val().length;
           var InvalidTBXBlur_TablesValue = TBXTBLSVALUE == "" || TBXTBLSVALUE == " " || Lngth < 4;
           if (InvalidTBXBlur_TablesValue) {
               $(this).focus();
               $(this).val(IvalidValue_Msg);
           }
           else {

               $(TBX_Columns).focus();
               SetContextKeyValue();
           }
           //$(this).next(':input').focus();

       }).change(function () {
           var TBXTablsVALUE = $('#TBX_TableSelectorFirstStage').val();
           var Lngth = $('#TBX_TableSelectorFirstStage').val().length;
           var InvalidTBXBlur_TablesValue = TBXTBLSVALUE == "" || TBXTBLSVALUE == " " || Lngth < 4;

           if (InvalidTableValue) {
               $(this).val(IvalidValue_Msg);
           }
           else {
               SetContextKeyValue(TBXTBLSVALUE );
           }
       }).click(function () {

               $(this).val("");

       });
   });

       function SetContextKeyValue(selectedTableName) {

           var CurrentConextKey = $find('AjaxAcEx_Columns_FirstStage').get_contextKey();
           var JointParams = CurrentConextKey + "_" + selectedTableName;
           $find('AjaxAcEx_Columns_FirstStage').set_contextKey(JointParams);
           alert(JointParams);

   } 
```

然后在后面的 c# 代码中使用`string.Split('_')`, 将它们都放入 ac# 变量中。我希望这将有助于其他具有相同用例的人，因为示例并不容易找到。

# objective-c - Objective C AES加密等于java版本

> ID：13946724
> 
> 赞同：0
> 
> 时间：2012-12-19T06:30:14.973
> 
> 标签：objective-c, ios

我有java代码来加密密码，

```
public static String encryptToString(String content,String password) throws IOException {
    return parseByte2HexStr(encrypt(content, password));
}
private static byte[] encrypt(String content, String password) {
    try {
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        SecureRandom secureRandom = SecureRandom.getInstance("SHA1PRNG");
        secureRandom.setSeed(password.getBytes());
        kgen.init(128, secureRandom);
        SecretKey secretKey = kgen.generateKey();
        byte[] enCodeFormat = secretKey.getEncoded();
        SecretKeySpec key = new SecretKeySpec(enCodeFormat, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        byte[] byteContent = content.getBytes("utf-8");
        cipher.init(Cipher.ENCRYPT_MODE, key);
        byte[] result = cipher.doFinal(byteContent);
        return result;
    } catch (Exception e) {
        log.error(e.getMessage(),e);
    }
    return null;
}
public static String parseByte2HexStr(byte buf[]) {
    StringBuffer sb = new StringBuffer();
    for (int i = 0; i < buf.length; i++) {
        String hex = Integer.toHexString(buf[i] & 0xFF);
        if (hex.length() == 1) {
            hex = '0' + hex;
        }
        sb.append(hex.toUpperCase());
    }
    return sb.toString();
} 
```

现在我需要用objective-c加密/解密它，我做了很多搜索，没有一种方法会产生相同的加密输出。
**什么是objective-c版本代码等于java代码？**

测试用例：encryptToString("test","password") => DA180930496EC69BFEBA923B7311037A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:43:33.110

我相信这个问题的答案就是您正在寻找的：[任何用于 AES 加密解密的可可源代码？](https://stackoverflow.com/questions/2039940/any-cocoa-source-code-for-aes-encryption-decryption)

我改编了某人作为答案发布的功能：[https ://gist.github.com/4335132](https://gist.github.com/4335132)

要使用：

```
NSString *content = @"test";
NSData *dataToEncrypt = [content dataUsingEncoding:NSUTF8StringEncoding];
NSData *data = [dataToEncrypt AES128EncryptWithKey:@"password"];
NSString *hex = [data hexString]; 
```

这并不*完全相同*，因为您的 Java 代码不使用密码本身进行加密，而是使用它来播种随机数生成器。但我认为这仍然应该适用于您正在尝试做的事情。

# hbase - 使用 Apache Nutch 配置 Hbase 独立模式：java.lang.IllegalArgumentException: Not a host:port pair

> ID：13946725
> 
> 赞同：1
> 
> 时间：2012-12-19T06:30:28.000
> 
> 标签：hbase, nutch

在 apache Nutch 2.1 和 hbase 0.94.3 中运行以下命令时出现以下错误。

> 线程“主”org.apache.gora.util.GoraException 中的异常：java.lang.IllegalArgumentException：不是主机：端口对：

下面我粘贴了我的 hbase-site.xml 配置

```
<code>
   <property>
        <name>hbase.rootdir</name>
        <value>file:///home/data/</value>
  </property>
  <property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/home/data/zookeeper</value>
  </property>
</code> 
```

您能建议我继续进行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T18:20:05.617

Nutch 2.1 附带 hbase-0.90.4。将 /build/lib 中的 jar 文件替换为您机器上安装的 hbase 版本。那应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-14T06:56:02.287

这是一个常见的兼容性问题。

Apache Nutch 2.2.1 使用 Apache Gora 0.3，它只支持旧的 Apache HBase 0.90.x。目前要使用 Nutch 2.2.x，您必须：

1.  [从官方 Git 分支 2.x](https://github.com/apache/nutch/tree/2.x)克隆、配置和构建新的 Nutch 。

2.  克隆并构建[我的 Apache HBase 0.94.24-hadoop-2.5.0 版本](https://github.com/dobromyslov/hbase/releases/tag/0.94.24-hadoop-2.5.0)。

您还可以阅读[Apache HBase 的兼容性文档，](http://hbase.apache.org/book/configuration.html)了解如何为任何 Hadoop 版本构建您自己的版本。

要完全了解，请查看[Apache Gora 0.3 的类似问题](https://issues.apache.org/jira/browse/GORA-304)。

我测试的工作堆栈是：

*   来自使用 Gora 0.4 的 2.x git 分支的 Apache Nutch；
*   Apache Hbase 0.94.24-hadoop-2.5.0；
*   Apache Hadoop 2.5.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-03T07:11:26.003

Gora 版本特定于 Hbase 版本。所以在构建的时候。在没有任何更改的情况下使用此属性 在 ivy.xml 中取消注释

```
<dependency org="org.apache.gora" name="gora-hbase" rev="0.6.1" conf="*->default" /> 
```

在 ivy.xml 中添加这一行

```
 <dependency org="org.apache.hbase" name="hbase-common" rev="0.98.8-hadoop2" conf="*->default" /> 
```

在 gora.properties 中

```
gora.datastore.default=org.apache.gora.hbase.store.HBaseStore 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-17T10:30:05.893

使用 ivy.xml 文件检查 hbase 版本并使 rev 适当 name="gora-hbase" rev="0.7" Gora 0.7 为以下项目提供支持

```
Apache Avro 1.8.1
Apache Hadoop 2.5.2
Apache HBase 1.2.3
Apache Cassandra 2.0.2
Apache Solr 5.5.1
MongoDB (driver) 3.4.2
Apache Accumlo 1.7.1
Apache Spark 1.4.1
Apache CouchDB 1.4.2 (test containers 1.1.0)
Amazon DynamoDB (driver) 1.10.55
Infinispan 7.2.5.Final
JCache 1.0.0 with Hazelcast 3.6.4 support. 
```

# c - 我们如何为变量指定物理地址？

> ID：13946728
> 
> 赞同：7
> 
> 时间：2012-12-19T06:30:34.767
> 
> 标签：c, linux, performance, caching, memory-address

欢迎任何建议/讨论！

这个问题实际上很简短，但我会解释为什么我需要实际地址。

* * *

**背景**：

这些天我对缓存和多核架构着迷，现在我很好奇缓存在并行环境下如何影响我们的程序。

在某些 CPU 型号（例如，我的 Intel Core Duo T5800）中，L2 缓存在内核之间共享。因此，如果程序 A 正在访问物理地址的内存，例如

`0x00000000, 0x20000000, 0x40000000...`

和程序 B 访问数据

`0x10000000, 0x30000000, 0x50000000...`

由于这些地址共享相同的后缀，因此二级缓存中的相关集合会被频繁刷新。我们预计会看到两个程序相互竞争，从内存而不是缓存中缓慢读取数据，尽管它们在不同的内核中是分开的。

然后我想在实践中验证结果。在这个实验中，我必须知道物理地址而不是虚拟地址。但是我该如何应对呢？

* * *

**第一次尝试：**

从堆中吃掉一大块空间，掩码，得到某个地址。

我的 CPU 有一个大小为 2048KB 且关联性为 8 的 L2 缓存，因此物理地址之类`0x12340000, 0x12380000, 0x123c0000`的将与 L2 缓存中的第一组相关。

```
int HEAP[200000000]={0};
int *v[2];
int main(int argc, char **argv) {

    v[0] = (int*)(((unsigned)(HEAP)+0x3fffc) & 0xfffc0000);
    v[1] = (int*) ((unsigned)(v[0]) + 0x40000); 

    // one program pollute v[0], another polluting v[1]
} 
```

可悲的是，在虚拟内存的“帮助”下，变量`HEAP`在物理内存中并不总是连续的。`v[0]`并且`v[1]`可能与不同的缓存集有关。

* * *

**第二次尝试**

access `/proc/self/mem`，并尝试获取内存信息。

嗯……看来结果还是关于虚拟内存的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T07:01:49.513

您对内存和这些地址的理解不完整/不正确。本质上，您尝试测试的内容是徒劳的。

在用户模式进程的上下文中，您看到的几乎每个地址都是[**虚拟地址**](http://en.wikipedia.org/wiki/Virtual_memory)。也就是说，只有在该过程的上下文中才有意义的地址。操作系统管理此虚拟内存空间（进程独有）映射到内存页面的位置。这些内存页面在任何给定时间*都可能*映射到被调入的页面（即驻留在物理 RAM 中）——或者它们可能被调出，并且仅存在于磁盘上的交换文件中。

因此，为了解决**背景**示例，这些地址来自两个不同的进程 - 尝试比较它们绝对没有任何意义。它们的代码是否存在于任何缓存中取决于很多因素，包括处理器的[缓存替换策略](http://en.wikipedia.org/wiki/Cache_algorithms)、操作系统启用的缓存策略、其他进程的数量（包括内核模式线程）、等等

在您的**第一次尝试**中，就直接实际测试 CPU 缓存而言，您也不会取得任何进展。首先，您的大缓冲区不会在堆上。它将成为可执行文件的数据部分（特别是 .bss）的一部分。堆用于`malloc()`内存分配系列。其次，是否分配一些巨大的 1GB 区域并不重要，因为尽管它在进程的虚拟地址空间中是连续的，但操作系统可以在它认为合适的地方分配虚拟内存页面 - 这可能*不是*实际上是连续的。同样，您几乎无法控制来自用户空间的内存分配。"[有没有办法在 linux 中从用户空间分配连续的物理内存](https://stackoverflow.com/questions/4401912/linux-contiguous-physical-memory-from-userspace)？“ 最简洁的答案是不。

`/proc/$pid/maps`也不会把你带到任何地方。是的，那里列出了很多地址，但同样，它们都在 process 的虚拟地址空间中`$pid`。有关这些的更多信息：[如何在 Linux 下从 /proc/$pid/mem 读取？](https://unix.stackexchange.com/questions/6301/how-do-i-read-from-proc-pid-mem-under-linux)

# api - TideSDK：让 Hello World 示例应用程序正常工作

> ID：13946731
> 
> 赞同：0
> 
> 时间：2012-12-19T06:30:40.183
> 
> 标签：api, tidesdk

我在 Windows 7 64bit 上，我正在关注[Getting Started Tutorial](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started)。到目前为止，我已经：

1.  已下载 TideSDK-1.3.1-beta-win-x86.zip
2.  将其包含的 3 个文件夹（模块、运行时和 sdk）提取到 C:/ProgramData/TideSDK/
3.  下载并安装 Imagemagick
4.  下载并安装 Wix 3.0
5.  下载安装TideSDK-Developer-1.4.2-win-x86.msi
6.  使用 Git 克隆：[https ://github.com/TideSDK/TideSDK-HelloWorld](https://github.com/TideSDK/TideSDK-HelloWorld)
7.  打开 TideSDK 开发者工具。
8.  单击“导入项目”并选择克隆的 Git 存储库，单击“确定”。（[截图](http://puu.sh/1CDng)）
9.  单击“测试和打包”选项卡，然后单击“启动应用程序”按钮。（[截图](http://puu.sh/1CDnI)）

TideSDK 开发人员工具说“准备打包和启动桌面应用程序。一会儿……”但除此之外它从来没有做任何事情。教程说我[应该看到这个](http://tidesdk.multipart.net/docs/user-dev/generated/guides/getting_started/developer_running.jpg)，但我没有。

我能看到的任何地方都没有错误。我该怎么做才能让这个 Hello World 应用程序正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:54:50.500

我无法让 TideSDK 工作。但是我发现了一些更好的方法：node-webkit。

> “node-webkit 是一个基于`Chromium`和的应用程序运行时`node.js`。您可以使用 node-webkit 以 HTML 和 Javascript 编写原生应用程序。它还允许您直接从 DOM 调用 Node.js 模块，并启用一种使用所有功能编写原生应用程序的新方式网络技术。”

[https://github.com/rogerwang/node-webkit](https://github.com/rogerwang/node-webkit)

# c++ - 在 C++ 或 Qt 中格式化 XML 文件

> ID：13946734
> 
> 赞同：7
> 
> 时间：2012-12-19T06:30:52.613
> 
> 标签：c++, xml, qt, xml-formatting

我有一个 XML 文件，其中的输出没有被格式化。这意味着所有输出都在一行中，但我想逐个标记地分解它。

例如 -

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?><Analyser>   <JointDetails>              <Details><StdThickness> T </StdThickness><Thickness_num> 0.032 </Thickness_num></Details>   </JointDetails></Analyser> 
```

但我想这样做::

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<Analyser>  
 <JointDetails>
   <Details>
<StdThickness> T </StdThickness>
<Thickness_num> 0.032 </Thickness_num>
</Details> 
  </JointDetails>
</Analyser> 
```

请不要建议在编写 XML 文件时这样做，因为这个 XML 文件已经存在，但现在我必须按照上面提到的方式对其进行格式化。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T11:21:21.373

使用`QXmlStreamReader`and`QXmlStreamWriter`应该做你想做的事。`QXmlStreamWriter::setAutoFormatting(true)`将在不同的行上格式化 XML 并使用正确的缩进。`QXmlStreamReader::isWhitespace()`您可以过滤掉标签之间的多余空格。

```
QString xmlIn = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\" ?>"
                "<Analyser><JointDetails>              <Details><StdThickness>"
                " T </StdThickness><Thickness_num> 0.032 </Thickness_num>"
                "</Details>   </JointDetails></Analyser>";
QString xmlOut;

QXmlStreamReader reader(xmlIn);
QXmlStreamWriter writer(&xmlOut);
writer.setAutoFormatting(true);

while (!reader.atEnd()) {
    reader.readNext();
    if (!reader.isWhitespace()) {
        writer.writeCurrentToken(reader);
    }
}

qDebug() << xmlOut; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T08:04:17.670

如果您使用的是 Qt，您可以使用 QXmlStreamReader 读取它并使用 QXmlStreamWriter 写入它，或者将其解析为 QDomDocument 并将其转换回 QString。QXmlStreamWriter 和 QDomDocument 都支持格式化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T08:58:46.907

如果你想要一个不依赖 QT 的简单健壮的解决方案，你可以使用 libxml2。（如果您仍然使用 QT，请使用 Frank Osterfeld 所说的。）

```
xmlDoc* xdoc = xmlReadFile(BAD_CAST"myfile.xml", NULL, NULL, 0);
xmlSaveFormatFile(BAD_CAST"myfilef.xml", xdoc, 1);
xmlFreeDoc(xdoc); 
```

我可以对我[的 libxml2 的 C++ 包装器](https://github.com/rioki/libxmlmm)感兴趣吗？

编辑：如果您碰巧在内存中有 XML 字符串，您也可以使用 xmlReadDoc...[但它并不止于此。](http://xmlsoft.org/html/libxml-tree.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T05:47:03.907

```
void format(void)
{
    QDomDocument input;

    QFile inFile("D:/input.xml");
    QFile outFile("D:/output.xml");

    inFile.open(inFile.Text | inFile.ReadOnly);
    outFile.open(outFile.Text | outFile.WriteOnly);

    input.setContent(&inFile);

    QDomDocument output(input);
    QTextStream stream(&outFile);
    output.save(stream, 2);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T08:29:43.003

利用 C++，您可以在 >< 的每个实例之间添加单个字符用于输出：通过将 >< 更改为 >\n<（这会为换行添加非打印字符）每个标签将打印到新行。但是，如上所述，有 API 方法可以做到这一点，但是对于一个简单的方法来执行您建议的控制台输出，或者使 XML 在文本编辑器之类的东西中流到每个标签的新行上，\n 应该可以正常工作.

如果您需要更优雅的输出，您可以使用`\n`(newline) 和`\t`(tab) 自己编写一个方法来布置输出，或者如果您需要更精细的表示，则可以使用 api。

# xcode - 我想知道这个 curlup 页面对 xcode 的影响

> ID：13946736
> 
> 赞同：1
> 
> 时间：2012-12-19T06:31:01.740
> 
> 标签：xcode, curl, page-curl

![在此处输入图像描述](../Images/47a21cb9ef50dcb99c4edaf025205f1f.png)

请看上面的屏幕截图。我想知道我怎样才能做到这样的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T12:16:39.230

如果您只想要动画效果，那么您可以获得不精确但类似的效果：

```
 [UIView beginAnimations:@"animationCurl" context:nil];
  [UIView setAnimationDuration: 0.5];
  [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:NO];
  [UIView commitAnimations]; 
```

否则你必须采取 -

*   包含 UIPageViewController 的基于页面的应用程序

据我所知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:38:40.580

您可以在[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)获得更多信息。这是一个名为 UIPageViewController 的原生 ViewController。网上有很多教程。

# c# - 有没有类似 ForEach for IList 的方法？

> ID：13946740
> 
> 赞同：44
> 
> 时间：2012-12-19T06:31:19.883
> 
> 标签：c#, linq, extension-methods

> **可能重复：**
> [LINQ 等效于 IEnumerable<T> 的 foreach](https://stackoverflow.com/questions/200574/linq-equivalent-of-foreach-for-ienumerablet)

`List<T>`有一个方法被调用`ForEach`，它在它的每个元素上执行传递的动作。

```
var names = new List<String>{ "Bruce", "Alfred", "Tim", "Richard" };

names.ForEach(p =>  { Console.WriteLine(p); }); 
```

但是如果`names`不是 a`List<T>`而是 a`IList<T>`怎么办？`IList<T>`没有像`ForEach`.

有其他选择吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-19T06:41:11.987

使用`foreach`循环：

```
foreach (var p in names) {
    Console.WriteLine(p);
} 
```

如果实际上并不能提高可读性，就没有理由到处使用委托和扩展方法；循环`foreach`并不比`ForEach`方法更明确地告诉读者正在做什么。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-19T06:35:08.613

如果您`IList<T>`是一个数组 ( `T[]`)，那么您对它们有[Array.ForEach](http://msdn.microsoft.com/en-us/library/zecdkyw2.aspx)方法，类似于`ForEach`on `List<T>`。`IList<T>`您可以为您的自定义或`IEnumerable<T>`您喜欢的任何内容创建扩展方法。

```
public static void ForEach<T>(this IList<T> list, Action<T> action)
{
    foreach (T t in list)
        action(t);
} 
```

您只需要警惕原始集合中的对象将被修改的事实，但我想命名确实暗示了这一点。

**-------------------------------------------------- -------------------------------------------------- --------------------------------**

我更喜欢打电话：

```
people.Where(p => p.Tenure > 5)
      .Select(p => p.Nationality)
      .ForEach(n => AssignCitizenShip(n); 
```

比

```
foreach (var n in people.Where(p => p.Tenure > 5).Select(p => p.Nationality))
{
    AssignCitizenShip(n);
} 
```

如果是这样，您可以在`IEnumerable`. 请注意，终止呼叫会`ForEach`执行`Linq`查询。如果你不想要它，你也可以通过使用`yield`语句并返回一个`IEnumerable<T>`返回来推迟它：

```
public static IEnumerable<T> ForEach<T>(this IEnumerable<T> list, Action<T> action)
{
    foreach (T t in list)
    {
        action(t);
        yield return t;
    }
} 
```

这解决了副作用问题，但我个人喜欢一个名为`ForEach`最终执行调用的方法。

**-------------------------------------------------- -------------------------------------------------- -------------------------------------------**

为了解决关于偏好的相反观点，[这里有一个](https://ericlippert.com/2009/05/18/foreach-vs-foreach/)来自 Eric Lippert 的比[这个](http://blogs.msdn.com/b/mazhou/archive/2011/09/21/why-no-foreach-method-on-ienumerable-interfaces.aspx)更好的链接。引用他的话：

> “第一个原因是这样做违反了所有其他序列运算符所基于的函数式编程原则。显然，调用此方法的唯一目的是产生副作用。表达式的目的是计算一个值，不引起副作用。语句的目的是引起副作用。这个东西的调用站点看起来很像一个表达式（虽然，不可否认，由于该方法是返回无效的，表达式只能在“语句表达式”上下文中使用。）我不喜欢创建唯一一个仅对其副作用有用的序列运算符。
> 
> 第二个原因是这样做给语言增加了零新的表现力”。

Eric 并不是说​​这是一件坏事——只是决定默认不包含该构造的背后的**哲学原因。**`Linq`如果您认为 an 上的函数不`IEnumerable`应该作用于内容，那么不要这样做。就我个人而言，我不介意它，因为我很清楚它的作用。我将其视为对集合类造成副作用的任何其他方法。如果需要，我也可以进入该函数并对其进行调试。这是另一个来自`Linq`它自己的东西。

```
people.Where(p => p.Tenure > 5)
      .Select(p => p.Nationality)
      .AsParallel()
      .ForAll(n => AssignCitizenShip(n); 
```

正如我要说的，这些没有什么不好的。它只是个人喜好。**我不会将它用于嵌套`foreach`的 s 或者如果它涉及在`foreach`循环内执行的多行代码，因为那是完全不可读的。**但是对于我发布的简单示例，我喜欢它。看起来干净简洁。

**编辑：**查看性能链接顺便说一句：[为什么 List<T>.ForEach 比标准 foreach 快？](https://stackoverflow.com/questions/744085/why-is-listt-foreach-faster-than-standard-foreach?lq=1)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-20T12:57:30.247

您可以制作一个扩展方法并使用`void List<T>.ForEach(Action<T> action)`. 您可以在[Shared Source Initiative](http://referencesource.microsoft.com/netframework.aspx)站点下载源代码。

基本上你会结束这样的事情：

```
public static void ForEach<T>(this IList<T> list, Action<T> action) 
{
    if (list == null) throw new ArgumentNullException("null");
    if (action == null) throw new ArgumentNullException("action");

    for (int i = 0; i < list.Count; i++)
    {
        action(list[i]);
    }
} 
```

它比使用该`foreach`语句的其他实现稍好，因为它利用了 IList 包含索引器的事实。

虽然我同意 OR Mapper 的回答，但有时在有许多开发人员的大型项目中，很难让每个人相信一个`foreach`陈述更清晰。更糟糕的是，如果您的 API 基于接口 (IList) 而不是具体类型 (List)，那么习惯于使用的开发人员`List<T>.ForEach method`可能会开始调用`ToList`您的 IList 引用！我知道，因为它发生在我之前的项目中。我在遵循[框架设计指南](https://rads.stackoverflow.com/amzn/click/com/0321545613)的公共 API 中到处使用集合接口。我花了一段时间才注意到许多不习惯这一点的开发人员`ToList`开始以惊人的速度出现。最后，我将此扩展方法添加到每个人都在使用的通用程序集中，并确保所有不必要的调用`ToList`已从代码库中删除。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T06:35:45.517

将此代码添加到静态类并将其称为扩展：

```
public static void ForEach<T>(this IList<T> list, Action<T> action) {
    foreach(var item in list) {
        action.Invoke(item);
    }
} 
```

# javascript - 嵌入式 JavaScript 不起作用

> ID：13946742
> 
> 赞同：3
> 
> 时间：2012-12-19T06:31:35.410
> 
> 标签：javascript, asp.net

我在 ASP.NET 应用程序中嵌入了 JavaScript：

```
function HelloFromEmbedded()
{
    window.alert('Hello from embedded resource.');
} 
```

在 AssemblyInfo.cs 文件中：

```
[assembly: WebResource("JavaScript1.Scripts.EmbeddedJavaScript.js", "text/javascript", PerformSubstitution = true)] 
```

这是我的 ASP.NET 网页：

```
protected override void OnPreRender(EventArgs e)
{
    base.OnPreRender(e);

    ClientScript.RegisterClientScriptInclude("EmbeddedJS", ClientScript.GetWebResourceUrl(this.GetType(), "JavaScript1.Scripts.EmbeddedJavaScript.js"));
} 
```

我想在 ASP.NET 网页的文本框的 onmouseover 事件中使用嵌入式 JavaScript：

```
<asp:TextBox ID="TextBox1" runat="server" onmouseover="HelloFromEmbedded();"></asp:TextBox> 
```

但是，它不起作用。我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:41:36.167

我以这种方式解决了这个问题：

```
string js = ClientScript.GetWebResourceUrl(typeof(JavaScript1.WebForm2), JavaScript1.Scripts.EmbeddedJavaScript.js");
ClientScript.RegisterClientScriptInclude("EmbeddedJS", js); 
```

# java - Apache Tomcat 关闭：java.net.ConnectException：连接被拒绝

> ID：13946753
> 
> 赞同：1
> 
> 时间：2012-12-19T06:32:03.787
> 
> 标签：java, tomcat, shutdown

我在centos 5.8上安装了tomcat 7。然后我执行了./startup.sh和./shutdown.sh，效果很好。

然后我在 webapps/ 下放了一个 something.war。它也运作良好。但是当我关闭tomcat时，它不起作用并抛出异常：

```
java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
        at java.net.Socket.connect(Socket.java:529)
        at java.net.Socket.connect(Socket.java:478)
        at java.net.Socket.<init>(Socket.java:375)
        at java.net.Socket.<init>(Socket.java:189)
        at org.apache.catalina.startup.Catalina.stopServer(Catalina.java:499)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:371)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:453) 
```

我敢肯定：

1.  在我执行 ./shutdown.sh 之前，tomcat 正在运行并且运行良好

2.  tomcat 的进程还活着，但在我执行 ./shutdown.sh 后它没有监听 8080 端口

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T07:10:49.993

我想到了一些可能性：

*   您的 web 应用程序可能会启动一个不作为“守护程序”运行的线程 - 从而使进程保持活动状态。在 webapp 中更改它以表现得更友好 - 或者实现一个监听器，当你的 webapp 关闭时关闭线程。`kill -3 pid`您可以通过在运行的 tomcat 进程上触发线程转储 ( ) 来测试这一点，输出将（很可能）以 catalina.out 结尾
*   可能有另一个 tomcat 在不同的端口上运行 - 这就是您在`ps`输出中看到的内容
*   您已经更改了“关闭”端口（请参阅 tomcat 的`server.xml`） - 这就是 shutdown.sh 正在联系以指示 tomcat 关闭

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T05:24:00.153

检查您在 /etc/hosts 中是否有 127.0.0.1 的 localhost

我的以前是这样的

```
127.0.0.1   centosIGW localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6 
```

在我将 localhost 添加到 127.0.0.1 后它可以工作

```
127.0.0.1   centosIGW localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6 
```

# php - Using Linux Environment Variables in PHP

> ID：13946757
> 
> 赞同：2
> 
> 时间：2012-12-19T06:32:22.457
> 
> 标签：php, linux

I am using Windows 7 Ultimate, PHP 5.2, VMWare (with Ubuntu Server V11.04)

My plan is to create an environment variable in both the linux and windows platforms, and to make them work in PHP. So I created the variable "ROOT_DIR" in Windows and another "ROOT_DIR" variable in Windows.

I have this code in PHP that I expect to work in both the platforms:

```
<?php
echo 'My username is ' .$_ENV["ROOT_DIR"] . '!';
?> 
```

But in Linux, all it outputs is NULL. I wonder what I'm doing wrong here. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:11:00.103

如果您通过浏览器运行脚本，请尝试将以下内容添加到您的主`.htaccess`文件中

```
SetEnv ROOT_DIR "/path/to/root/"

```

[阿帕奇设置环境](http://httpd.apache.org/docs/2.2/mod/mod_env.html)

# xslt-2.0 - 基于属性分组，xslt-2.0

> ID：13946759
> 
> 赞同：0
> 
> 时间：2012-12-19T06:32:29.650
> 
> 标签：xslt-2.0

是否可以转换此

```
<boxed-text>
<para role="Box legend">Box 2 Caption</para>
<para role="Box head">Text Text Text</para>
<para role="Box text">Text Text Text.<sup>1</sup></para>
<para role="Box subhead A">Text Text Text</para>
<para role="Box text">Text Text Text.</para>
<para role="Box subhead A">Text Text Text</para>
<para role="Box text">Text Text Text.</para>
<para role="Box subhead B">Text Text Text</para>
<para role="Box text">Text Text Text.</para>
</boxed-text> 
```

变成这样的东西？

```
<boxed-text>
<caption><para>Box 2 Caption</para></caption>
<para>Text Text Text</para>
<para>Text Text Text.<sup>1</sup></para>
<sec>
<title>Text Text Text</title>
<para>Text Text Text.</para>
</sec>
<sec>
<title>Text Text Text</title>
<para>Text Text Text.</para>
<sec>
<title>Text Text Text</title>
<para>Text Text Text.</para>
</sec>
</sec>
</boxed-text> 
```

但是，可能不会出现小标题，因此，

```
<boxed-text>
<para role="Box legend">Box 2 Caption</para>
<para role="Box head">Text Text Text</para>
<para role="Box text">Text Text Text.<sup>1</sup></para>
<para role="Box text">Text Text Text.</para>
<para role="Box text">Text Text Text.</para>
<para role="Box text">Text Text Text.</para>
</boxed-text> 
```

应该产生

```
<boxed-text>
<caption><para>Box 2 Caption</para></caption>
<para>Text Text Text</para>
<para>Text Text Text.<sup>1</sup></para>
<para>Text Text Text.</para>
<para>Text Text Text.</para>
<para>Text Text Text.</para>
</boxed-text> 
```

我很难用 xsl:for-each-group 完成这项工作。一个答案将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:31:05.707

这是我编辑后的建议，包含一些细微的变化，以确保我们`para`在没有可分组的情况下处理所有元素：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs mf"
  version="2.0">

<xsl:param name="group-role" select="'Box subhead '"/>

<xsl:output indent="yes"/>

<xsl:function name="mf:group" as="element()*">
  <xsl:param name="paras" as="element(para)*"/>
  <xsl:param name="head" as="xs:string"/>
  <xsl:for-each-group select="$paras" group-starting-with="para[@role = concat($group-role, $head)]">
    <xsl:choose>
      <xsl:when test="self::para[@role = concat($group-role, $head)]">
        <sec>
          <xsl:apply-templates select="."/>
          <xsl:sequence select="mf:group(current-group() except ., codepoints-to-string(string-to-codepoints($head)[1] + 1))"/>
        </sec>
      </xsl:when>
      <xsl:otherwise>
        <xsl:apply-templates select="current-group()"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:for-each-group>
</xsl:function>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="boxed-text">
  <xsl:copy>
    <xsl:variable name="first-sh" select="para[@role = concat($group-role, 'A')][1]"/>
    <xsl:apply-templates select="if ($first-sh) then $first-sh/preceding-sibling::para else para"/>
    <xsl:sequence select="mf:group(($first-sh, $first-sh/following-sibling::para), 'A')"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="para[matches(@role, concat($group-role, '[A-Z]'))]">
  <title>
    <xsl:apply-templates/>
  </title>
</xsl:template>

<xsl:template match="para[@role = 'Box legend']">
  <caption>
    <para>
      <xsl:apply-templates/>
    </para>
  </caption>
</xsl:template>

<xsl:template match="para[@role = ('Box head', 'Box text')]">
  <para>
    <xsl:apply-templates/>
  </para>
</xsl:template>

</xsl:stylesheet> 
```

当应用于输入时

```
<boxed-text>
  <para role="Box legend">Box 2 Caption</para>
  <para role="Box head">Text Text Text</para>
  <para role="Box text">Text Text Text.<sup>1</sup></para>
  <para role="Box subhead A">Text Text Text</para>
  <para role="Box text">Text Text Text.</para>
  <para role="Box subhead A">Text Text Text</para>
  <para role="Box text">Text Text Text.</para>
  <para role="Box subhead B">Text Text Text</para>
  <para role="Box text">Text Text Text.</para>
</boxed-text> 
```

使用 Saxon 9.4 我得到了结果

```
<boxed-text>
   <caption>
      <para>Box 2 Caption</para>
   </caption>
   <para>Text Text Text</para>
   <para>Text Text Text.<sup>1</sup>
   </para>
   <sec>
      <title>Text Text Text</title>
      <para>Text Text Text.</para>
   </sec>
   <sec>
      <title>Text Text Text</title>
      <para>Text Text Text.</para>
      <sec>
         <title>Text Text Text</title>
         <para>Text Text Text.</para>
      </sec>
   </sec>
</boxed-text> 
```

当应用于输入时

```
<boxed-text>
<para role="Box legend">Box 2 Caption</para>
<para role="Box head">Text Text Text</para>
<para role="Box text">Text Text Text.<sup>1</sup></para>
<para role="Box text">Text Text Text.</para>
<para role="Box text">Text Text Text.</para>
<para role="Box text">Text Text Text.</para>
</boxed-text> 
```

我得到结果

```
<boxed-text>
   <caption>
      <para>Box 2 Caption</para>
   </caption>
   <para>Text Text Text</para>
   <para>Text Text Text.<sup>1</sup>
   </para>
   <para>Text Text Text.</para>
   <para>Text Text Text.</para>
   <para>Text Text Text.</para>
</boxed-text> 
```

# java - Java Web Sart Ubuntu 12.1\. Load resource (image)

> ID：13946767
> 
> 赞同：2
> 
> 时间：2012-12-19T06:33:01.210
> 
> 标签：java, ubuntu, embedded-resource, java-web-start

I have a game that runs well on Windows and Mac but in Ubuntu it doesn't find the image(s). That's exactly the problem, it doesn't find the image.

I'm trying to run this on Ubuntu 12.1 with Java Web Start

This is what I use to load an image:

```
this.getClass().getClassLoader().getResource("pixelapp/wavelogy/images/boat.jpg"); 
```

My package is pixelapp.wavelogy

This is my code snippet in case you REALLY need it:

```
 String folder = "pixelapp/wavelogy/images/"; 

    fileName[count] = folder + "boat.jpg"; 

    pTex[count] = TextureIO.newTexture( 
                            cl.getResource(fileName[count]), false, null); 
```

END OF CODE SNIPPET.

Any ideas on how to solve this?

EDIT:

```
Unable to use Firefox's proxy settings. Using "DIRECT" as proxy type.
Error loading texture pixelapp/wavelogy/images/redboat.jpg
Error loading texture pixelapp/wavelogy/images/pinkboat.jpg

Exception in thread "Timer-0" java.lang.NullPointerException
    at pixelapp.wavelogy.Wavelogy.display(Wavelogy.java:2739)
    at jogamp.opengl.GLDrawableHelper.displayImpl(GLDrawableHelper.java:373)
    at jogamp.opengl.GLDrawableHelper.display(GLDrawableHelper.java:358)
    at jogamp.opengl.GLAutoDrawableBase$2.run(GLAutoDrawableBase.java:280)
    at jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:655)
    at jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:594)
    at com.jogamp.newt.opengl.GLWindow.display(GLWindow.java:543)
    at com.jogamp.opengl.util.AWTAnimatorImpl.display(AWTAnimatorImpl.java:74)
    at com.jogamp.opengl.util.AnimatorBase.display(AnimatorBase.java:142)
    at com.jogamp.opengl.util.FPSAnimator$1.run(FPSAnimator.java:128)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505)
X11Util.Display: Shutdown (JVM shutdown: true, open (no close attempt): 2/2, reusable (open, marked uncloseable): 0, pending (open in creation order): 2)
X11Util: Open X11 Display Connections: 2
X11Util: Open[0]: NamedX11Display[:0, 0x927bf60, refCount 1, unCloseable false]
X11Util: Open[1]: NamedX11Display[:0, 0x9207ba8, refCount 1, unCloseable false] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:49:31.293

如果您只尝试：它会不起作用：

```
this.getClass().getClassLoader().getResource("images/some_image.jpg"); 
```

因为我想你的课程在 pixelapp.wavelogy 包中，所以我在 pixelapp/wavelogy 文件夹中，在那里你也有一个 images 文件夹。

# javascript - 在新页面上显示预览

> ID：13946771
> 
> 赞同：2
> 
> 时间：2012-12-19T06:33:15.423
> 
> 标签：javascript, asp.net, html

我有编辑器，我可以在我的页面中使用 js 获取它的代码，并且用户可以在其中编写他的 html 代码。我想在新窗口中显示当前用户的 html 代码，而不将代码保存在数据库或其他东西中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:36:32.173

嗨，为什么不将值存储在 html5 存储对象中，例如 sessionStorage/localStorage，请访问[Html5 存储文档](http://diveintohtml5.info/storage.html)以获取更多详细信息。使用它，您可以在本地临时/永久存储中间值，然后访问您的值以存储会话的值

```
sessionStorage.getItem('label')
sessionStorage.setItem('value', 'label') 
```

或使用永久存储值

```
localStorage.getItem('label')
localStorage.setItem('value', 'label') 
```

因此，您可以使用 html5 存储对象在多个页面之间存储（临时）表单数据

您可以使用会话存储对象临时存储用户的会话代码，并使用上述语法在下一页获取它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:36:19.177

请按照以下步骤操作：

1.  在预览页面上，放置一个`IFRAME`.
2.  从用户输入的第一页开始`HTML`，设置会话变量。
3.  单击第一页上的某个按钮时，设置会话并重定向到预览页面。
4.  预览页面应该获取会话值并将其显示在`IFRAME`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:37:38.707

这可能会帮助您：

**[JSBin 演示](http://jsbin.com/ilevuz/1/)**

# excel - 计算两个日期之间发生的日期范围的天数

> ID：13946772
> 
> 赞同：1
> 
> 时间：2012-12-19T06:33:18.653
> 
> 标签：excel, excel-2003

我有一个数据表，其中包含任务的开始日期和结束日期列表。我需要计算开始日期和结束日期之间有多少天是我们圣诞假期的一部分（12 月 11 日至 1 月 7 日）

例如，当开始日期是 10/12/2012 并且结束日期是 12/01/2013 时，有 28 天在这些日期之间。当开始日期为 2012 年 12 月 15 日且结束日期为 2013 年 3 月 12 日时，这些日期之间有 22 天。如果开始日期是 2012 年 10 月 12 日，结束日期是 2014 年 1 月 12 日，则有 56 天在这些日期之间（因为该范围有两年）。

由于我已经设定了要求，我需要使用公式来执行此操作。最初，我决定使用圣诞节（12 月 25 日）发生的次数，并计算每次发生 4 周。

我使用的公式是

```
=FLOOR((E12-A25)/365,1)+IF(OR(MONTH(E12)=12,
       MONTH(A25)=12),
       IF(AND(DAY(A25)<=25,DAY(E12)>=25),1,0),
       IF(OR(MONTH(A25)>=12,
       IF(MONTH(E12)<MONTH(A25),
          MONTH(E12)+12,
          MONTH(E12))>=12),1,0))*28 
```

但显然，如果范围开始和结束日期介于这两个日期之间，这将无济于事。

有什么建议么？我在死胡同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:18:28.953

您在第二个示例中的日期数学是错误的——该范围内有 24 天，而不是 22 天。

我可以带你去那里度过*一个*假期：

让：

*   A1 包含假期开始（2012 年 12 月 11 日）
*   A2 包含假期结束（2013 年 1 月 7 日）
*   B1 包含开始日期
*   B2 包含结束日期

公式：

```
=MAX(MIN(A2+1,B2+1),A1) - MIN(MAX(A1,B1),A2+1) 
```

该公式基本上找到重叠的日期范围，如果有的话，然后减去以获得整天数。“+1”是因为您的“结束日期”实际上是包含在内的，因此对于日期数学，您需要让假期结束于 1 月 8 日，而不是 1 月 7 日，以捕捉最后一天。

但这仅适用于一年的假期。您可以将假期范围存储在其他单元格中，并使用相同的公式并将它们全部相加，但您将受限于您设置的年限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:17:01.000

此公式将计算**任何**日期范围内的 12 月 11 日至 1 月 7 日之间的日期，甚至跨多年

`=SUMPRODUCT((TEXT(ROW(INDIRECT(B1&":"&B2)),"mmdd")+0>=1211)+(TEXT(ROW(INDIRECT(B1&":"&B2)),"mmdd")+0<=107))`

您的开始日期在 B1 中，结束日期在 B2 中

这会将范围内的每个日期转换为一个数字，例如 12 月 1 日变为 1201，3 月 4 日变为 304，然后它计算那些大于或等于 1207（12 月 7 日）或小于或等于 107（1 月 7 日）的日期，所以这将为您的最后一个示例提供 56

如果您从每个日期减去 7（以 1 月 7 日为结束日期），您可以缩短公式，然后您只需要检查结果数字是否 >= 1204，即

`=SUMPRODUCT((TEXT(ROW(INDIRECT(B1-7&":"&B2-7)),"mmdd")+0>=1204)+0)`

.....第三个选项也应该给出相同的结果，更接近于richardtallent的方法 - 获取年数并乘以28，然后根据开始/结束日期调整数字

`=(YEAR(B1-7)-YEAR(B2-7)+1)*28-MAX(0,B2-DATE(YEAR(B2-7),12,11))-MIN(28,DATE(YEAR(B1-7)+1,1,7)-B1)`

# php - php string avoid bold italic etc

> ID：13946777
> 
> 赞同：2
> 
> 时间：2012-12-19T06:33:25.483
> 
> 标签：php

I tried googling this, but no luck. Didn't know how to phrase it, lmfao. But anyway, I have this article:

[http://puu.sh/1CDtq](http://puu.sh/1CDtq)

But it shows the bold, italics etc(which messes up the default CSS for the styled articles, when it should actually just show up here: [http://puu.sh/1CDwk](http://puu.sh/1CDwk) (which is good)). What I'm asking is how would I go about trying to not to decode html entities? and to just show default text for the news_content?

This is the code:

```
<?php echo substr($row['news_content'], 0, 150). "...... <a href=''>(Read More)</a>"; ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:37:32.123

`strip_tags()`在php中使用函数

```
echo substr(strip_tags($row['news_content']), 0, 150). "...... <a href=''>(Read More)</a>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T06:38:46.943

```
<?php echo substr(strip_tags($row['news_content']), 0, 150). "...... <a href=''>(Read More)</a>"; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:50:47.853

在截断 HTML 字符串的长度之前，您需要将其转换回文本。

您可以使用 执行此操作`strip_tags`，然后使用`html_entity_decode`。

使用 html_entity_decode 是个好主意，否则，截断字符串可能会在 HTML 实体中截断字符串，例如`&nbsp;`.

在截断字符串之前同时执行这两个操作是一个好主意，这样 HTML 标记和实体不会包含在结果字符串的长度中，并且它们不会被意外地切成两半。

这是一个整体示例：

```
function gettextexcerpt($myhtml, $len = 150) {
    $myhtml = html_entity_decode(strip_tags($myhtml), ENT_QUOTES, 'UTF-8');
    return substr($myhtml, 0, $len);
}; 
```

`UTF-8`如果您对文本使用不同的字符编码，请进行更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T06:37:28.237

不要格式化内容内联 - 为内容页面使用样式表。然后在缩短所有帖子的主页上，使用忽略格式的特殊样式表。

# php - Showing submitted results from php/mysql drop down

> ID：13946778
> 
> 赞同：0
> 
> 时间：2012-12-19T06:33:30.700
> 
> 标签：php, html, mysql

I'm hoping for a simple solution to my ever annoying problem. I have looked online and in books. I need to display results from my drop down menu. It is currently connected to the database/table and displaying the l_state as needed. All I need now is, when the state is selected, I hit submit and the information in the table is displayed below the drop down/submit button. Here is my code so far.

```
//db_connect included at top

$sql="SELECT * FROM licensing ORDER BY l_state DESC"; 
$result=mysql_query($sql); 

$options=""; 

while ($row=mysql_fetch_array($result)) { 

  $id=$row["id"]; 
  $url=$row["l_url"]; 
  $phone=$row["l_phone"]; 
  $state=$row["l_state"];
  $sullstate=$row["l_statefull"];  
  $options.="<option value=\"$id\">".$state; 
} 

<select name="listing">

<select name="listing"><option value=0>Choose<?=$options?></option></select>
<input type="submit" value="Search"/> 
```

* * *

So if there is anyone out there that can help me with an answer?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:47:31.290

更改此行

```
$options .="<option value=\"$id\">".$state ."</option>"; 
```

和这样的HTML部分

```
<select name="listing">
  <option value=0>Choose</option>
  <?php echo $options ;?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:49:07.863

您需要检查当前页面是否已提交（或提交到其他页面）。

这可以使用 if(isset($_POST)) 或 if($_REQUEST['POST'])，然后您需要构建查询并将发布的数据包含在查询中（确保为此使用转义）。

# tsql - Whats an alternative to using a cursor as per this example in t-sql

> ID：13946780
> 
> 赞同：2
> 
> 时间：2012-12-19T06:33:37.067
> 
> 标签：tsql, sql-server-2008-r2, cursor

I’m new to SQL (specifically t-sql and microsoft SQL Server 2008 R2) and had a problem my boss advised me to fix using a cursor. The problem being taking records (equating to shifts entered into a roster) that are over an hour (but divisible by an hour) and effectively splitting them into multiple shift records of an hour each for a report.

Below you can see the section of the query re the cursor logic that I used. My understanding is that cursors are very inefficient and frowned upon – but neither my boss nor myself could identify an alternative solution to this problem.

Can anyone demonstrate a way we could do this without cursors?

```
Open Curs;

 FETCH NEXT FROM Curs INTO @ClientID, @RDNSID, @SvceType, @SDate, @ClientNm, @CHours, @StaffNm, @Package

WHILE (@@Fetch_Status = 0)
BEGIN
      SET @Hour = 60
      SET @Num = @Chours
    IF (@Num % 60 = 0)
            BEGIN
                  WHILE (@Num >= 60)
                  BEGIN
                        INSERT INTO #ASRTable VALUES (@ClientID, @RDNSID, @SvceType, @SDate, @ClientNm, @Hour, @StaffNm, @Package)
                        SET @Num = @Num - 60
                        SET @SDate = DATEADD(HH, 1, @SDate)
                  END
            END

      ELSE
            BEGIN
                  SET @Hour = 'INVALID SHIFT'
                  INSERT INTO #ASRTable VALUES (@ClientID, @RDNSID, @SvceType, @SDate, @ClientNm, @Hour, @StaffNm, @Package)
            END

      FETCH NEXT FROM Curs INTO @ClientID, @RDNSID, @SvceType, @SDate, @ClientNm, @CHours, @StaffNm, @Package
END

SELECT * FROM #ASRTable

DROP TABLE #ASRTable   

CLOSE Curs
DEALLOCATE Curs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:25:54.493

好吧，您没有给我们样本数据或预期结果，但我认为这遵循相同的逻辑：

```
declare @t table (
    SDate datetime not null,
    Chours int not null --Curiously, will store a number of minutes?
)

insert into @t (SDate,Chours) values ('2012-12-19T10:30:00',120),('2012-12-18T09:00:00',60),('2012-12-17T08:00:00',90)

;with shifts as (
    select SDate,Chours,'60' as Hour from @t where Chours % 60 = 0
    union all
    select DATEADD(hour,1,SDate),CHours - 60,'60' from shifts where Chours > 0
)
select SDate,Hour from shifts
union all
select SDate,'Invalid Shift' from @t where CHours % 60 <> 0 
```

结果：

```
SDate                   Hour
----------------------- -------------
2012-12-19 10:30:00.000 60
2012-12-18 09:00:00.000 60
2012-12-18 10:00:00.000 60
2012-12-19 11:30:00.000 60
2012-12-19 12:30:00.000 60
2012-12-17 08:00:00.000 Invalid Shift 
```

当然，我没有你所有的其他专栏，因为我不知道它们是什么意思。

# xml - Janus Xml 保存约会抽象方法失败 VB.NET 2010

> ID：13946782
> 
> 赞同：0
> 
> 时间：2012-12-19T06:33:40.810
> 
> 标签：xml, vb.net, visual-studio-2010, .net-4.0, janus

我正在使用 Janus Schedule dll（以及其他 Janus 引用，如 janus.common、janus.calendar.dll）将约会保存在 xml 文件中（我正在使用 Janus Winforsv

控制套件 v 3.0)。

我已经在我的电脑上成功运行了该应用程序，但是在其他电脑上运行程序时，程序在调用该`SaveAppointments`方法时失败，错误出现在**Schedule1.SaveAppointments(stream)** ...

方法是：

```
Private Sub SaveAppointments()
        Dim stream As System.IO.Stream
        If (fileName Is Nothing) Then
            If (saveFileDialog1.ShowDialog() = Windows.Forms.DialogResult.OK) Then
                fileName = saveFileDialog1.FileName
                stream = saveFileDialog1.OpenFile()
            Else
                Return
            End If
        Else
            stream = New System.IO.FileStream(fileName, System.IO.FileMode.Create)
            stream.Position = 0

             Schedule1.SaveAppointments(stream)  ''*******HERE IS THE ERROR      

           stream.Close()

            stream = Nothing

            appointmentsChanged = False
        End If
    End Sub 
```

我得到的错误是：

```
 System.TypeLoadException: Abstract Method with non-zero RVA    
at  Janus.Windows.Common.Layouts.PropertyValue.a(XmlWriter , IJanusLayout 
at Janus.Windows.Common.Layouts.JanusLayoutWriter.a(XmlWriter ,  IJanusLayout )    
at Janus.Windows.Common.Layouts.JanusLayoutWriter.FillStream(Stream  stream)
at Janus.Windows.Schedule.Schedule.SaveAppointments(Stream  stream)   
at FOEA.MainForm.SaveAppointments()
at C:\FOE\UI\MainForm.vb:línea 78    
at FOEA.MainForm.MainMenu_Click(Object sender, EventArgs e) 
at C:\FOEA\UI\MainForm.vb:line 143    
at  System.Windows.Forms.MenuItem.OnClick(EventArgs e)    
at System.Windows.Forms.MenuItem.MenuItemData.Execute()    
at System.Windows.Forms.Command.Invoke()    
at System.Windows.Forms.Command.DispatchID(Int32 id)    
at System.Windows.Forms.Control.WmCommand(Message& m)    
at System.Windows.Forms.Control.WndProc(Message& m)    
at System.Windows.Forms.ScrollableControl.WndProc(Message& m)    
at System.Windows.Forms.ContainerControl.WndProc(Message& m)    
at System.Windows.Forms.Form.WndProc(Message& m)    
at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m) 
at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

首先我怀疑目标PC需要.NET 3.5 `Xml.linq.dll`，但我引用了dll，然后我将**Copy local**分配给true，并添加了所有必要的dll，仍然抛出该错误......

其他猜测是`System.Xml.dll` 我的 bin 目录中的 dll`System.XML.dll`的名称（

我已经安装了：

*   Microsoft .NET 4 框架客户端配置文件
*   Microsoft .NET 4 框架扩展
*   MSXML 4.0 SP2 解析器和 SDK
*   MSXML 4.0 SP3 解析器

在目标电脑上，但那不起作用......当收到该错误时，xml文件的内容被删除，文件 schedule.xml 仍然存在并且为空。

我不知道该怎么做，因为该程序在我的电脑和其他我的电脑上运行，但没有在目标电脑上运行......你认为我应该在目标电脑上安装 Janus winforms 吗？也许那行得通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:32:49.963

我前段时间用过Janus。我使用的保存约会的方法是：

```
 Private Sub SaveAppointments()
        Me.Cursor = Cursors.WaitCursor
        Dim appointmentsDir As String = "yourAppsFile.xml"
        Dim appointmentsStream As System.IO.FileStream
        appointmentsStream = New System.IO.FileStream(appointmentsDir, System.IO.FileMode.Create)
        Schedule1.SaveAppointments(appointmentsStream)
        appointmentsStream.Close()
        Me.Cursor = Cursors.Default
    End Sub 
```

还要验证 xml 文件是否具有所有根和元素（格式良好的 XML）

在 Janus 3.5 中

```
<?xml version="1.0" encoding="utf-8"?>
<Schedule>
    <Fields Collection="true" ElementName="Field" />
    <Owners Collection="true" ElementName="Owner" />
    <Appointments Collection="true" ElementName="Appointment">
        <Appointment0>
            <Description>test </Description>
            <EndTime>10/10/2011 11:00:00</EndTime>
            <Text>test </Text>
            <StartTime>10/10/2011 10:30:00</StartTime>
        </Appointment0>           
    </Appointments>
</Schedule> 
```

# .net - 动态创建的datagridview单元格点击事件不起作用

> ID：13946783
> 
> 赞同：1
> 
> 时间：2012-12-19T06:33:40.717
> 
> 标签：.net, c#-4.0, datagridview

我正在动态创建 dgv，我必须在其单元格单击时创建一个事件，我该怎么做？现在，当我创建 cellclick 事件时，它什么也不触发。

制作dgv的代码：

```
 dataGridView2 = new DataGridView();

                DataGridViewColumn col1 = new DataGridViewImageColumn
                {
                    ImageLayout = DataGridViewImageCellLayout.Stretch
                };

                DataGridViewColumn col2 = new DataGridViewImageColumn
                {
                    ImageLayout = DataGridViewImageCellLayout.Stretch
                };

                DataGridViewColumn col3 = new DataGridViewTextBoxColumn();
                DataGridViewColumn col4 = new DataGridViewLinkColumn();
                DataGridViewColumn col5 = new DataGridViewTextBoxColumn();
                DataGridViewColumn col6 = new DataGridViewTextBoxColumn();
                DataGridViewColumn col7 = new DataGridViewTextBoxColumn();

                col1.HeaderText = "TPM Image";
                col1.Name = "image_tpm";
                col1.Width = 60;

                col2.HeaderText = "Find Image";
                col2.Name = "image_thefind";
                col2.Width = 60;

                col3.HeaderText = "Name";
                col3.Name = "name";
                col3.Width = 150;

                col4.HeaderText = "URL";
                col4.Name = "product_url";
                col4.Width = 100;

                col5.HeaderText = "Price";
                col5.Name = "price";
                col5.Width = 70;

                col6.HeaderText = "Accuracy";
                col6.Name = "image_accuracy";
                col6.Width = 52;

                col7.HeaderText = "History";
                col7.Name = "history";
                col7.Width = 200;

                dataGridView2.Columns.Add(col1);
                dataGridView2.Columns.Add(col2);
                dataGridView2.Columns.Add(col3);
                dataGridView2.Columns.Add(col4);
                dataGridView2.Columns.Add(col5);
                dataGridView2.Columns.Add(col6);
                dataGridView2.Columns.Add(col7);

                dataGridView2.Location = new System.Drawing.Point(650, 20);
                dataGridView2.Size = new System.Drawing.Size(702, 413);
                this.Controls.Add(dataGridView2); 
```

我的 cellClickEvent

```
private void dataGridView2_CellClick(object sender, DataGridViewCellEventArgs e)
{
    try
    {
        if (dataGridView2.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString().Contains("http:"))
        {
            Process.Start(dataGridView2.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString());
        }
    }
    catch
    {
    }
} 
```

但什么都没有发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T06:49:33.260

```
dataGridView2.CellClick += new DataGridViewCellEventHandler(dataGridView2_CellClick); 
```

成功了。>:)

# linux - 在 Linux 上，如何将文件名从 blah_m_n_12192012.txt 更改为 blah_m_n.txt

> ID：13946784
> 
> 赞同：1
> 
> 时间：2012-12-19T06:33:42.790
> 
> 标签：linux, file-rename, mv

其中 m, n 可以是 0 到 100 之间的任何数字，例如

```
blah_5_9_12192012.txt -> blah_5_9.txt
blah_4_35_12192012.txt -> blah_4_35.txt 
```

我尝试执行以下操作，但没有成功

```
mv blah_?_*_12192012.txt blah_?_*.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:38:34.990

```
for file in blah_?_*_12192012.txt
do
  mv $file ${file/_12192012/}
done 
```

# jquery - jqgrid addrow tp 未定义

> ID：13946786
> 
> 赞同：1
> 
> 时间：2012-12-19T06:34:04.923
> 
> 标签：jquery, jqgrid

这是我的网格：

```
 colModel: [  

            { name: "userGroupID", index: "userGroupID", width: 50, hidden:true, align: "left" }, 
            //{ name: "userId", index: "userId", width: 75, align: "left",title:false,search:false, sorttype:'text'},
            { name: "userInfoID", index: "userInfoID", width: 75, align: "left",hidden:true,title:false,search:true, sorttype:'text'},
            { name: "userID", index: "userID", width: 75, align: "left",title:false,search:true, sorttype:'text'},
            { name: "firstName", index: "firstName", width: 75, align: "left",title:false,search:false, sorttype:'text'},
            { name: "organizationName", index: "organizationName", width: 75, align: "left",title:false,search:false, sorttype:'text'},
            { name: 'action', index: 'action', width: 70, align: "left",sortable: false, search:false}          
            ], 
```

我正在从服务器获取数据以填充网格并尝试将我自己的数据添加到网格中。我用了

```
var grid = jQuery("#jqTable");
   var data = [{"userGroupID":"2","userInfoID":"2","userID":"userID","firstName":"firstName","organizationName":"organizationName"}];
        //jQuery("#jqTableList").addRowData("userGroupID",data);
        grid.jqGrid('addRowData','1',data);
        //jQuery("#jqTableList").trigger("reloadGrid"); 
```

它在说：`TypeError: t.p is undefined`

```
u = t.p.rownumbers === true ? 1 : 0; 
```

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:19:23.700

您`addRowData`以错误的方式使用方法。如果你想用它来添加多行你应该改变`addRowData`方法的第一个参数。

您可以在jqGrid[的文档中阅读以下内容：](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)

> 此方法可以一次插入多行。在这种情况下，数据参数应该是定义为的数组 `[{name1:value1,name2: value2…}, {name1:value1,name2: value2…} ]`，第一个选项`rowid`应该包含数据对象的名称，该名称应该作为行的 id。`rowid`在这种情况下，名称不必是`colMode`

因此，例如，如果`userGroupID`包含可以解释为每一行的唯一值的唯一值，您可以使用`addRowData`以下形式

```
grid.jqGrid('addRowData', 'userGroupID', data); 
```

在您当前发布的代码中，带有名称的列`'1'`将被解释为`id`. 顺便说一句，指定`id`网格的值非常重要。如果列`userGroupID`（或网格的其他列）确实可以用作 id，则应`key: true`在列中添加属性。该属性只能用于一列。

一般来说，`addRowData`如果在创建网格时数据是已知的，我不建议使用填充网格（详见[答案](https://stackoverflow.com/a/12519858/315935)）。如果你有网格，使用`datetype: "local"`它会更有效`data: yourArrayWithData`。如果您需要更换`data`网格，您可以使用

```
grid.jqGrid("getGridParam").data = myNewData; 
```

看[答案](https://stackoverflow.com/a/13922998/315935)

# android - Android : RadioButton Toast 中的帮助

> ID：13946800
> 
> 赞同：4
> 
> 时间：2012-12-19T06:35:33.733
> 
> 标签：android, radio-button, toast

![在此处输入图像描述](../Images/c5d7f5ae7d18b6a5b079b3d04cf5bdc9.png)

如果用户在未选择选项的情况下单击“下一步”按钮，则必须显示一条消息，“请选择任何一个”，否则它应该进入下一个屏幕。我已经尝试过，但它不会进入下一个屏幕，而是显示吐司“请选择任何一个”和我的代码

```
public class Question1 extends Activity implements OnClickListener {
Button vid, next;
Typeface tp;
TextView tv;
RadioGroup rg;
RadioButton rb;
Button b;
SharedPreferences sp;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.question1);
    sp = getSharedPreferences("AppFile1", 0);

    tv = (TextView) findViewById(R.id.tvQuestion1);

    rg = (RadioGroup) findViewById(R.id.radioGroup1);
    vid = (Button) findViewById(R.id.buttonQuestion1VIdeo);
    next = (Button) findViewById(R.id.buttonQuestion1Next);
    vid.setOnClickListener(this);
    next.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.buttonQuestion1VIdeo:
        Intent i = new Intent(Question1.this, VideoActivity.class);
        startActivity(i);
        break;
    case R.id.buttonQuestion1Next:
        if (next.isSelected()) {
            int selectedId = rg.getCheckedRadioButtonId();
            rb = (RadioButton) findViewById(selectedId);
            String s = rb.getText().toString();
            SharedPreferences.Editor ed = sp.edit();
            ed.putString("q1", s);
            ed.commit();
            Intent ia = new Intent(Question1.this, Question2.class);
            startActivity(ia);

        } else {
            Toast.makeText(getApplicationContext(), "Please Select Answer", 0).show();
        }

        break;
    default:
        break;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:39:36.303

尝试：

```
if (rg.getCheckedRadioButtonId()!=-1) {
        int selectedId = rg.getCheckedRadioButtonId();
        rb = (RadioButton) findViewById(selectedId);
        String s = rb.getText().toString();
        SharedPreferences.Editor ed = sp.edit();
        ed.putString("q1", s);
        ed.commit();
        Intent ia = new Intent(Question1.this, Question2.class);
        startActivity(ia);

    } else {
        Toast.makeText(getApplicationContext(), "Please Select Answer", 0).show();
    } 
```

文档说如果没有选中任何按钮，[getCheckedRadioButtonId()](http://developer.android.com/reference/android/widget/RadioGroup.html#getCheckedRadioButtonId%28%29)返回`-1`。

> 返回此组中选定单选按钮的标识符。空选时，返回值为-1。

因此，如果您从该函数中获得除 -1 之外的任何值，则您有一个选定的按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T06:38:03.917

**错误条件**：`if (next.isSelected())`

**真实条件：**因为您要确保必须选择选项：

```
boolean checked = ((RadioButton) view).isChecked(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T06:38:57.293

您正在检查 Next 按钮本身的选择状态。但是您想检查单选按钮选择状态。所以你必须给它：

```
if (rg.getCheckedRadioButtonId()!=-1) {
            int selectedId = rg.getCheckedRadioButtonId();
            rb = (RadioButton) findViewById(selectedId);
            String s = rb.getText().toString();
            SharedPreferences.Editor ed = sp.edit();
            ed.putString("q1", s);
            ed.commit();
            Intent ia = new Intent(Question1.this, Question2.class);
            startActivity(ia);

        } else {
            Toast.makeText(getApplicationContext(), "Please Select Answer", 0).show();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T06:54:26.403

情况会是这样

```
rb1  = (RadioButton)findViewById(R.id.rb1);
rb2  = (RadioButton)findViewById(R.id.rb2);
rb3  = (RadioButton)findViewById(R.id.rb3);

if(rb1.isChecked()==false && rb2.isChecked()==false && rb3.isChecked()==false)
{
     // Toast message is here
}
else
{
    // Intent code is here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-10T18:44:05.873

```
RadioGroup rad_grp;
Button clear,submit;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

clear = findViewById(R.id.clear);
submit = findViewById(R.id.submit);
rad_grp = findViewById(R.id.rad_grp);
rad_grp.clearCheck();

rad_grp.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
    @SuppressLint("ResourceType")
    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {

        RadioButton rb = group.findViewById(checkedId);
        if (null != rb && checkedId > -1)
        {
        Toast.makeText(MainActivity.this,rb.getText(), Toast.LENGTH_SHORT).show();
        }
        }
});

clear.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        rad_grp.clearCheck();
    }
});

submit.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        RadioButton rb = rad_grp.findViewById(rad_grp.getCheckedRadioButtonId());
            Toast.makeText(MainActivity.this,""+rb.getText().toString(),Toast.LENGTH_SHORT).show();
    }
});
}

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity">

<RadioGroup
    android:id="@+id/rad_grp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <RadioButton
        android:id="@+id/male"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Male"/>
    <RadioButton
        android:id="@+id/female"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Female"/>
    <RadioButton
        android:id="@+id/other"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Other"/>

</RadioGroup>
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dp">

    <Button
        android:id="@+id/clear"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Clear"
        android:layout_marginLeft="20dp"/>

    <Button
        android:id="@+id/submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Submit"
        android:layout_marginLeft="20dp"/>

</LinearLayout>

</LinearLayout> 
```

# amazon-s3 - AWS SDK PHP 版本 2 - 检索图像尺寸？

> ID：13946803
> 
> 赞同：0
> 
> 时间：2012-12-19T06:35:57.987
> 
> 标签：amazon-s3

是否可以检索存储在 Amazon S3 上的图像的尺寸？

如果答案是否定的，除了将图像下载到我的服务器听起来效率低下之外，还有其他方法吗？

我正在使用适用于 PHP 的 AWS 开发工具包第 2 版。

我一直在查看以下代码返回的内容，但似乎没有给出尺寸。

```
$result = $s3->getObject(array(
    'Bucket' => 'BUCKET_NAME',
    'Key'    => 'KEY_NAME'
));

var_dump($result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:58:41.683

我不是 100% 熟悉 SDK2。使用 1.5 你可以做到这一点

```
getimagesize($s3->get_object_url($bucket,$filename)); 
```

我认为只要您可以公开访问图像（或者您必须找到授权网址），这仍然是可能的

显然，您的 php 必须启用才能打开远程文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:10:39.980

我同意数据库缓存。我通过一个检查mysql是否匹配的类来运行每个图像文件名。如果它找到一个，它会返回宽度、高度和一个准备就绪的预格式化尺寸标签。如果未找到图像和大小，则使用 getimagesize() 返回相同的信息，并将其存储以备下次使用。如果我想作弊并即时按比例调整 sizetag（但不是文件）的大小，我还内置了一个调整大小的方法。

我不知道在下载时存储信息是否比 getimagesize() 更快。S3 相当快。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T00:52:29.093

由于缺乏响应，我认为这是不可能的……我不想用 JavaScript 来做，但我就是这样做的。

```
<img src="image.jpg" id="image" />

<script>
// This runs after the image has loaded
$('#image').load(function() {
    // Use the below code to get the height and width
    // document.getElementById('image').width
    // document.getElementById('image').height
});
</script> 
```

# c# - Error: Parameter is not valid, when convert byte to image

> ID：13946805
> 
> 赞同：0
> 
> 时间：2012-12-19T06:36:23.813
> 
> 标签：c#, .net

I have a image field in sqlserver.

When insert row to Database i convert myimage to byte whith this code.

```
 Image img = Image.FromFile("D:\\Test.PNG");
 ImageConverter converter = new ImageConverter();
 enter.Pic = (byte[])converter.ConvertTo(img, typeof(byte[])); 
```

When i want read this record, i convert byte to image with this cod e:

```
 ImageConverter ic = new ImageConverter();
  Image img = (Image)ic.ConvertFrom(enter.Pic); 
```

but when convert byte to image, i get error

**Parameter is not valid**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:42:03.623

要将图像转换为字节数组，您可以直接使用以下[`File.ReadAllBytes`](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)方法：

```
enter.Pic = File.ReadAllBytes(@"D:\Test.PNG"); 
```

并将字节数组转换回[`Image`](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)实例：

```
using (Stream stream = new MemoryStream(enter.Pic))
using (Image image = Image.FromStream(stream))
{
    // use the image here
} 
```

# c++ - .ncb 文件未在 VS 2005 中创建

> ID：13946809
> 
> 赞同：0
> 
> 时间：2012-12-19T06:36:31.833
> 
> 标签：c++, visual-studio

我正在为一个项目使用 VS 2005。但是我的 .ncb 文件丢失了。你能建议我做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:51:00.583

尝试工具->导入和导出设置->重置所有设置并重新启动您的 VS 编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:14:43.660

您提到的功能是 Visual Studio 2005 中的 IntelliSense。您可以按照 Microsoft MSDN 提供的故障排除步骤进行操作。

重新生成 .ncb 文件

1.  从您的解决方案中删除 .ncb 文件。
2.  重建您的解决方案。

如果你遇到一些错误。你可以检查

[http://msdn.microsoft.com/en-us/library/ms235519(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms235519(v=vs.80).aspx)

# php - 选择项目时执行操作

> ID：13946811
> 
> 赞同：0
> 
> 时间：2012-12-19T06:36:46.120
> 
> 标签：php, html, select, drop-down-menu, menu

我需要根据从下拉框中选择的项目进行一些操作。

因此，如果选择了带有前缀 Blue 的项目然后在下面显示一个文本框，并且如果选择了任何其他项目然后显示其他内容，我需要这样做，我怎么能以最简单的方式做到这一点？

更多解释：好的...我有一个包含项目列表的下拉菜单。我需要做的是，在他们选择带有前缀 Blue 的项目后，下拉菜单下的输入字段会显示。如果他们选择任何其他项目，就会发生其他事情。

到目前为止，我的下拉菜单是：

```
<select id="select1" name="selectz1">
<?php
$id = 0;
while ($row = mysql_fetch_row($result)) {
    echo "<option value=$id>$row[0]</option>";
    $id++;
}
?>
</select> 
```

这就是 HTML 生成的内容：

```
<form action="ThisPage.php" method="POST">
Accounts: <br />
<select id="select1" name="selectz1">
<option value=0>account 2000-01</option><option value=1>account 2000-02</option>
<option value=2>blue 2000-03</option><option value=3>blue 2000-04</option>
</select>
</form> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T07:47:16.413

所以，据我所知，问题是：“如何根据 a 的值显示和隐藏表单字段`<select>`？”

在我们开始之前，这是一个[骗局](https://stackoverflow.com/q/835259/168868)。我对那里的答案质量*非常*不满意，所以我将不顾惯例并发布我自己的答案。

首先，这里的所有其他答案都完全在正确的轨道上，但他们目前无法解释他们*为什么*要做他们所做的事情。

和其他人一样，我将在这个例子中使用[jQuery 。](http://jquery.com/)jQuery 是一个很棒的 Javascript 库，它极大地简化了一堆重复的、冗长的任务。jQuery 公开了一个名为`$`——是的，只是一个美元符号——的函数，它允许您访问和修改页面。

### 第1步

让我们创建一个最小的示例，类似于您现有的代码。

```
<form>
    <select name="select1" id="select1">
        <option value="1">account 001</option>
        <option value="2">account 002</option>
        <option value="3">blue 001</option>
    </select>
    <input type="text" name="text1" id="text1">
</form> 
```

需要指出的重要事项：

1.  现代 HTML 要求`value="1"`引用属性值 ( )。
2.  我们需要使用 jQuery 定位的所有元素都需要易于识别。我们在`id`这里使用 s。

### 第2步

让我们附加一个[事件监听器](http://api.jquery.com/category/events/)。事件是您与页面交互时发生的事情。在我们的例子中，我们将监听`<select>`事件`change`。

```
<script type="text/javascript">
$(function() {
    $('#select1').on('change', function(event) {
        alert(this.value);
    });
});
</script> 
```

在没有太多空间的情况下，这是一大堆行话。让我解释一下。

*   `$()`是对 jQuery 的函数调用。
*   `$(function(){ ... })`正在向 jQuery 对象传递一个*函数。*这是一个*快捷方式*，上面写着“jQuery，当页面加载完成后，运行这个函数。”
*   `$('#select1')`要求 jQuery 找到`id`带有“select1”的元素
*   `$('#select1').on('change', function ...)`要求 jQuery 监视`change`事件，并执行请求的函数。
*   最后，在函数内部，我们将抛出一个包含元素`alert`当前值的对话框。`select`

这是[关于 jsfiddle 的演示](http://jsfiddle.net/ZBL4c/)。

### 第 3 步

现在，每当更改选择菜单时，我们都会运行一些 Javascript。让我们显示和隐藏那个文本框！

首先，我们需要将其隐藏。因为我们用 Javascript 显示和隐藏它，所以我们应该告诉它只有在 Javascript 可以运行时才隐藏。对不能运行 Javascript 的人隐藏东西会让他们脾气暴躁。因此，我们将在我们的 onload 处理程序中添加一个新行：

```
$(function() {
    $('#text1').hide();
    $('#select1'). // ...
}); 
```

如果您猜到新行是“让 jQuery 隐藏 text1 元素”，那么您猜对了！

现在，我们如何观察“蓝色”选项？回到那个jsfiddle并玩它。您是否注意到正在发出警报`value`？`option`那些根本不是蓝色的！我们需要实际获得*选定`option`*的值，而不仅仅是值。这有点好笑。

让我们看一下[MDN 关于`<select>`](https://developer.mozilla.org/en-US/docs/HTML/Element/select). 它告诉我们它将把自己暴露为[HTMLSelectElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement)。不是什么大惊喜。它有一个名为 的属性`selectedIndex`，它告诉我们`option`选择了哪个，它有一个名为 的属性`options`，它使我们可以直接访问选项本身。甜的！

让我们再次更新 onload：

```
<script type="text/javascript">
$(function() {
    $('#text1').hide();
    $('#select1').on('change', function(event) {
        var opt = this.options[ this.selectedIndex ];
        alert('You picked ' + $(opt).text());
    });
});
</script> 
```

再次，一个[jsfiddle 演示](http://jsfiddle.net/cQGmc/2/)。

`options`有一个数组。Javascript 和 PHP 一样，使用方括号来访问数组元素。

因此，我们选择了我们的选项，然后将其包装在 jQuery 中，然后调用该[`text`方法](http://api.jquery.com/text/)来获取元素内的*文本节点，而不是表单值。*

太好了，现在我们有了一个*字符串*。我们能用它做什么？

### 第4步

与 PHP 一样，Javascript 也有[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)，一种进行模式匹配的方法。嘿，我们有一个匹配的模式！

```
<script type="text/javascript">
$(function() {
    $('#text1').hide();
    $('#select1').on('change', function(event) {
        var opt = this.options[ this.selectedIndex ];
        var picked_blue = $(opt).text().match(/blue/i);
        if(picked_blue) {
            alert('You picked a blue option!');
        } else {
            alert('You did not pick a blue option.');
        }
    });
});
</script> 
```

再次，一个[jsfiddle 演示](http://jsfiddle.net/Ku6sA/1/)。

我们现在使用[对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)[`match`上的方法`String`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)来使用正则表达式。特别是，以`blue`不区分大小写的方式查找字符的正则表达式（`i`最后的那个）。

这段代码现在应该检测到蓝色的东西。是时候终于隐藏和显示该文本字段了！

### 第 5 步

让我们潜入水中。

```
$(function() {
    $('#text1').hide();
    $('#select1').on('change', function(event) {
        var opt = this.options[ this.selectedIndex ];
        var picked_blue = $(opt).text().match(/blue/i);
        if(picked_blue) {
            $('#text1').show();
        } else {
            $('#text1').hide();
        }
    });
}); 
```

​</p>

你看到它来了吗？你能猜到它的作用吗？

这是[jsfiddle 演示](http://jsfiddle.net/Z6K4b/1/)。

我们到了，任务完成了。您可以将相同的技术应用于各种东西。

请注意我在这里散布的链接，尤其是 jsfiddle，它是 Javascript 和 HTML 的**绝佳**游乐场，以及 MDN 站点，它们是*很棒的*Javascript 和 HTML 参考。哦，还有 jQuery 手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:46:06.263

可以使用 Javascript 来完成。

将 id 输入到您的下拉框。当它被选中时，根据其值切换 div。价值可以通过，`var item= document.getElementById('id').value;`。然后，

```
function toggle()
{

var item= document.getElementById('yourdropdownid').value;

    if(item=='yourfirstoption')
    {
    document.getElementById('div1id').style.display="block";
    document.getElementById('div2id').style.display="none";
    }
    else if(item=='yoursecondoption')
    {
    document.getElementById('div2id').style.display="block";
    document.getElementById('div1id').style.display="none";
    }
} 
```

一个例子是[here](http://www.randomsnippets.com/2008/02/12/how-to-hide-and-show-your-div/)。它不是一个确切的例子。但我希望你能通过与这篇文章的联系从中找到你的解决方案。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:54:28.570

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).on("change", "#color", function(){
        value = $(this).val().split('-')[0]; // extracting the color prefix from selected value
        if(value == 'Blue') // checking if value is Blue
        {
            $('#other').hide(); // hiding the div having id "other"
            $('#blue').show(); //showing div having id"blue"
        }

        else // if selected value have prefix other than Blue 
        {
            $('#blue').hide(); //hide the div having id "blue"
            $('#other').show(); // show the div having id "other"
        }

    });
</script>
<style>
    /* hiding both divs by default, these div will show up on dropdown change event depending upon the selected value */
    #blue, #other{display: none;}
</style>

<select id="color" name="color">
    <option value="">--Select--</option>
    <option value="Blue-value">Blue</option>
    <option value="Red-value">Red</option>
    <option value="Black-value">Black</option>
</select>

<div id="blue">
    your blue div
</div>

<div id="other">
    your other div
</div> 
```

# osx-lion - gl_PointCoord in OSX 10.7 Lion

> ID：13946812
> 
> 赞同：1
> 
> 时间：2012-12-19T06:37:03.370
> 
> 标签：osx-lion, webgl, three.js

I've come against a really bizarre shader error in many of the particle examples for Three.js. In the latest Chrome and Firefox in OSX 10.7, gl_PointCoord returns (1,0) for every single fragment. This is found in a few of the included examples as well. Specifically, the [Particle Billboards](http://mrdoob.github.com/three.js/examples/webgl_particles_billboards.html "Particle Billboards") example, the [Particle Billboard colors](http://mrdoob.github.com/three.js/examples/webgl_particles_billboards_colors.html "Particle Billboard Colors") example, and the [Particle Sprites](http://mrdoob.github.com/three.js/examples/webgl_particles_sprites.html "Particle Sprites") examples do not work. They render nothing to the screen. However, the [Custom Attributes](http://mrdoob.github.com/three.js/examples/webgl_custom_attributes_particles.html "Custom Attributes") example works fine, despite having almost the exact same code.

I found this bug while running compatibility checks on my own software. I wrote a shader which renders text sprites using particles. This works fine in 10.6, Windows, and Linux. However, 10.7 renders nothing. Further debugging by setting gl_FragCOlor = vec4(gl_PointCoord, 0., 1.); revealed that all the particles get rendered as solid red squares, instead of the expected red-green gradient.

I've been trying to determine what exactly is the difference between the examples that make Custom Attributes work, but not Particle Billboards, but I haven't made very much headway yet. This is exacerbated by the lack of a testing platform, aside from borrowing friends' laptops. Is this a known OS bug?

# ruby-on-rails-3 - 控制器中的条件应该是什么来检查 solr 服务器是否正在运行

> ID：13946815
> 
> 赞同：0
> 
> 时间：2012-12-19T06:37:18.447
> 
> 标签：ruby-on-rails-3

我有一个配方控制器，其中有一个“创建”操作。在这个动作中，每当我创建一个配方时，它都会立即添加到 solr 中。

这是我的代码：

```
def create

    recipe = current_user.recipes.new(params[:recipe])
    recipe_detail = recipe.build_recipe_detail
    recipe.save
    Search.add_recipe_to_solr(recipe)
    redirect_to editor_recipe_path(recipe)
  end 
```

问题是我想在我的控制器中添加一个条件，这样**只有**当 solr 服务器正在运行时它才会被添加到 solr 中。否则它只会被添加到数据库中，但不应该抛出异常

这是 solr 服务器未运行时的异常：

```
 Errno::ECONNREFUSED in Editor::RecipesController#create

Connection refused - connect(2) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T07:36:44.727

捕获异常并引发消息，简单:)

# python - 将未知数插入 SQLite 数据库

> ID：13946824
> 
> 赞同：2
> 
> 时间：2012-12-19T06:38:06.740
> 
> 标签：python, string, sqlite, python-2.7

> **可能重复：**
> [在 Python 中传递 SQLite 变量](https://stackoverflow.com/questions/1793970/passing-sqlite-variables-in-python)

我的脚本中有一个函数将值传递给一个类方法，该方法的工作是用它接收到的变量填充其分配的数据库。问题是，我不确定语法是否正确，因为我没有使用普通字符串。这是方法。

```
def new_response(self, link_pattern, link, response, ref_id=""):
    self.db_cursor.execute('''INSERT INTO tb_memory VALUES 
    (%s, %s, %s, %s)''' % (ref_id, link_pattern, link, response)) 
```

什么是最合适的句法方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:48:23.793

永远不要使用字符串格式化来创建 SQL 语句！如果您使用字符串格式化，您的程序将受到可能的 SQL 注入攻击的影响。使用`'?'`占位符：

```
def new_response(self, link_pattern, link, response, ref_id=""):
    self.db_cursor.execute('''INSERT INTO tb_memory VALUES 
    (?, ?, ?, ?)''', (ref_id, link_pattern, link, response)) 
```

请参阅. [_](http://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.execute)`execute`

# deployment - 从安装程序将自定义 dll 部署到报告服务器 bin 文件夹

> ID：13946826
> 
> 赞同：1
> 
> 时间：2012-12-19T06:38:27.973
> 
> 标签：deployment, reporting-services, ssrs-2008, windows-installer

我必须部署 ssrs 报告使用的自定义 dll。现在我需要在报表服务器 bin 文件夹中部署我的自定义程序集。

为此，我需要创建一个 MSI，它将自定义 dll 部署到报表服务器 bin 文件夹。我需要执行一个自定义脚本，它将我的 dll 复制到报表服务器 bin 位置。

如何动态获取报表服务器bin文件夹路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:53:30.080

您可以使用[目录搜索](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371549%28v=vs.85%29.aspx)来获取 bin 文件夹路径。

# iphone - 如何使用手机差距和原生应用制作 iPhone 应用

> ID：13946833
> 
> 赞同：0
> 
> 时间：2012-12-19T06:39:13.323
> 
> 标签：iphone, cordova, phonegap-plugins

`iPhone`过去 2 年我一直在开发本机应用程序。但现在我正在努力学习`phone gap`。我已经看到了`index.html`用作起始页的电话间隙示例，但是我想制作一个同时具有 . 和 . 的应用程序`native`。`phone gap`所以任何人都可以指导我如何使用本机组件，如`viewController`、`navigationBar`、`tabBarController`组件和电话间隙。另外，如果您有任何对我有帮助的教程，我会看到很多教程，但都是旧的，不能在我的 Xcode 4.5 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:57:24.647

借助插件，您可以在电话间隙中使用本机代码，例如我正在粘贴一些代码

```
#import <UIKit/UIKit.h>
#import <Cordova/CDVPlugin.h>

@interface PushToken : CDVPlugin
{
    NSString* callbackID; 
}

@property (nonatomic, copy) NSString* callbackID;

- (void) getToken:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options;

@end

#import "PushToken.h"
#import "AppDelegate.h"

@implementation PushToken

@synthesize callbackID;

-(void)getToken:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options  {
    self.callbackID = [arguments pop];

    NSString *token = ((AppDelegate *)[[UIApplication sharedApplication] delegate]).token;
    CDVPluginResult* pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:[token stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    if(token.length != 0)
    {
        [self writeJavascript: [pluginResult toSuccessCallbackString:self.callbackID]];
    }else {    
        [self writeJavascript: [pluginResult toErrorCallbackString:self.callbackID]];
    }
}

@end

.js file

var PushToken = {
getToken: function(types, success, fail) {
    return cordova.exec(success, fail, "PushToken", "getToken", types);
}
};

including .js file
<script src="PushToken.js"></script>

calling

PushToken.getToken(     
                           ["getToken"] ,           
                           function(token) {
                           devToken = token;
                           //navigator.notification.alert(devToken);
                           },
                           function(error) {
                           navigator.notification.alert("Error :Token Not Found "+error);      
                           }
                           );

may be helpful
thanks 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:48:13.043

对于本机功能，您可以使用插件，甚至可以自己创建

[phonegap 插件](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone)

[如何创建插件](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)

你也可以参考[这个](http://hiediutley.com/)博客

# c# - 从任务并行库更新 ProgressBar UI 对象

> ID：13946839
> 
> 赞同：4
> 
> 时间：2012-12-19T06:39:27.963
> 
> 标签：c#, winforms, c#-4.0, task-parallel-library

基本上我想更新 FormMain (WindowsForm) 上的 ProgressBar UI 对象。我正在使用 .NET 4.0

这是 Form1.Designer.cs 中的代码

```
namespace ProgressBarApp
{
    public partial class Form1 : Form
    {         
        private System.Windows.Forms.ProgressBar curProgressBar;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            CustomProcess theProcess = new CustomProcess();
            theProcess.Process();
        }
    }
} 
```

这是CustomProcess.cs的定义

```
namespace ProgressBarApp
{
    class CustomProcess
    {
        public void Process()
        {
            for (int i = 0; i < 10; i++)
            {
                Task ProcessATask = Task.Factory.StartNew(() =>
                    {
                        Thread.Sleep(1000); // simulating a process
                    }
                 );

                Task UpdateProgressBar = ProcessATask.ContinueWith((antecedent) =>
                    { 
                        // how do i update the progress bar object at UI here ?
                    }
                 );
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T10:18:40.153

您可以使用它[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)来执行此操作。要将其用于 a `Task`，您需要创建 a `TaskScheduler`，您可以通过调用来完成[`TaskScheduler.FromCurrentSynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)：

```
Task UpdateProgressBar = ProcessATask.ContinueWith(antecedent =>
    { 
        // you can update the progress bar object here
    }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

这仅在您`Process()`直接从 UI 线程调用时才有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T10:30:20.947

如何使用[System.Reactive.Linq](http://msdn.microsoft.com/en-us/library/system.reactive.linq%28v=vs.103%29.aspx)：

**[更新]**

```
using System.Reactive.Linq;

namespace WindowsFormsApplication6
{
    public partial class Form1 : Form
    {
        //private System.Windows.Forms.ProgressBar curProgressBar;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            CustomProcess theProcess = new CustomProcess();
            var x = Observable.FromEventPattern(theProcess, "TaskCompleted");
            curProgressBar.Maximum = 4;
            x.Subscribe((a) =>
            {
                curProgressBar.Value = ((CustomProcess)a.Sender).Counter;
            });
            theProcess.Process();
        }

    }

    class CustomProcess
    {

        public int Counter { get; set; }
        public event EventHandler TaskCompleted = OnTaskCompleted;

        private static void OnTaskCompleted(object sender, EventArgs e)
        {
            ((CustomProcess)sender).Counter++;
        }
        public void Process()
        {

            for (int i = 0; i <= 3; i++)
            {
                Task ProcessATask = Task.Factory.StartNew(() =>
                    {
                        Thread.Sleep(1000); // simulating a process
                    }
                 );
                var awaiter = ProcessATask.GetAwaiter();
                awaiter.OnCompleted(() =>
                {
                    TaskCompleted(this, null);
                });
            }

        }
    }
} 
```

# php - Doctrine MongoDb Embedded Document - 如何指定字段

> ID：13946840
> 
> 赞同：5
> 
> 时间：2012-12-19T06:39:28.120
> 
> 标签：php, mongodb, symfony, doctrine-orm

我正在将 Symfony 2 与 Doctrine MongoDb 捆绑包一起使用。

有两个具有映射的类：

```
/**
 * @MongoDB\Document
 */
class Consultant
{
    /**
     * @MongoDB\Id(strategy="NONE")
     */
    protected $id;

    /**
     * @MongoDB\EmbedMany(targetDocument="Specialization", strategy="set")
     */
    protected $specs;
}

/**
 * @MongoDB\Document
 */
class Specialization
{
    /**
     * @MongoDB\Id
     */
    protected $id;

    /**
     * @MongoDB\String
     */
    protected $name;

    /**
     * @MongoDB\Boolean
     */
    protected $visible = true;
} 
```

保存顾问后，Mongo 记录如下所示：

```
{
   "_id": "1",
   "name": "Manager",
   "specs": {
     "0": {
       "_id": ObjectId("50d071ac6146a1f342000001"),
       "name": "Support",
       "visible": false 
    },
     "1": {
       "_id": ObjectId("50d069336146a10244000000"),
       "name": "Orders",
       "visible": false 
    } 
  } 
} 
```

除了冗余字段“可见”之外，一切都很好。

`@EmbedMany`有没有办法使用注释指定 Doctrine 应该嵌入哪些字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T21:13:27.250

Specialization 类使用[文档](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/annotations-reference.html#document)映射，该映射不适用于嵌入。您应该为此使用[EmbeddedDocument](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/annotations-reference.html#embeddeddocument)。

Given that you want to use the same class on its own and in embedded form, it would be best to create an abstract class annotated with [MappedSuperclass](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/annotations-reference.html#mappedsuperclass). There, you can define any field mappings that should exist on both the document and embedded document. In your case, you could leave `visible` to be defined on the inheriting document class.

Also, be aware that by using the `set` strategy, you're storing the embedded collection as an object instead of the usual array. This can have implications if you mean to index fields within the denormalized, embedded documents, as you won't be able to make use of [multikey indexing](http://docs.mongodb.org/manual/core/indexes/#index-type-multikey). It's also possible to create gaps among the numeric keys.

# facebook - 如何在我的网站上设置 Facebook 评论？

> ID：13946846
> 
> 赞同：0
> 
> 时间：2012-12-19T06:39:37.990
> 
> 标签：facebook, facebook-social-plugins, facebook-comments

我已经尝试了一个月在我的网站上设置 Facebook 评论。我想要我的帖子页面上的评论框。另外，我想要有时似乎存在的社交按钮。我应该将 JavaScript SDK 代码放在我的 PHP 或 CSS 中的哪个文件上（或者将其粘贴到每个帖子页面中）？然后我是否将插件代码剪切并粘贴到我希望它可用的每个页面中，或者只是在一个主题文件中？我在这个意义上迷路了，似乎没有人能给我答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:05:16.020

您需要的所有信息都在[Facebook 开发者页面上](https://developers.facebook.com/docs/reference/plugins/comments/)！如果您使用 Wordpress，您可以通过安装官方[Facebook 插件](http://wordpress.org/plugins/facebook/)轻松实现 Facebook 评论。

# javascript - 在jquery中使用开始日期限制结束日期

> ID：13946847
> 
> 赞同：3
> 
> 时间：2012-12-19T06:39:39.237
> 
> 标签：javascript, jquery

下面的片段属于选择两个日期，我必须为此添加另一个功能，即结束日期选择应限制为比开始日期大一天

```
$(function() {
    $( "#fromDate" ).datepicker({
        defaultDate: "+0",
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 1,
        dateFormat:"yy-mm-dd",
        onClose: function( selectedDate ) {
            $( "#toDate" ).datepicker( "option", "minDate", selectedDate);
            this.focus();
        }
    });
    $( "#toDate" ).datepicker({
        defaultDate: "+0",
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 1,
        dateFormat:"yy-mm-dd",
        onClose: function( selectedDate ) {
            $( "#fromDate" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
}); 
```

提前谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:43:31.160

我不知道这是正确的方法，但它会根据您的需要工作

```
$(function() {
        $( "#from" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onClose: function( selectedDate ) {
                var today = new Date(selectedDate);
                var tomorrow = new Date(today.getTime() + (24 * 60 * 60 * 1000));
                var curr_date = tomorrow.getDate();
                var curr_month = tomorrow.getMonth() + 1; //Months are zero based
                var curr_year = tomorrow.getFullYear();

                var max_string = curr_month+"/"+curr_date+"/"+curr_year;

                $( "#to" ).datepicker( "option", "minDate", selectedDate );
                $( "#to" ).datepicker( "option", "maxDate", max_string );
            }
        });
        $( "#to" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onClose: function( selectedDate ) {
                $( "#from" ).datepicker( "option", "maxDate", selectedDate );
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:35:56.210

简单的解决你的问题，就两行js代码和BINGO！！。只需根据要求更改数字（如果您想将 Max days 设置为 1 或更多）

```
$("#from").datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 1,
                onClose: function (selectedDate) {
                    var d = new Date(selectedDate);
                    d.setDate(d.getDate() + 1);
                    $("#to").datepicker("option", "minDate", selectedDate);
                    $("#to").datepicker("option", "maxDate", d);
                }
            });
            $("#to").datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 1,
                onClose: function (selectedDate) {
                    $("#from").datepicker("option", "maxDate", selectedDate);
                }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T12:14:46.653

```
$(document).ready(function(){
    $("#txtFromDate").datepicker({ 
        numberOfMonths: 2,
        onSelect: function(selected) { 
            $("#txtToDate").datepicker("option","minDate", selected) 
        }
    });
    $("#txtToDate").datepicker({
        numberOfMonths: 2,
        onSelect: function(selected) { 
            $("#txtFromDate").datepicker("option","maxDate", selected)
        }
    });
}); 
```

# linux - 如何刷新 nfs 属性缓存？

> ID：13946852
> 
> 赞同：6
> 
> 时间：2012-12-19T06:39:54.563
> 
> 标签：linux, caching, nfs, stat, nfsclient

我需要找到一种方法来刷新客户端的 NFS 属性缓存。stat() 调用从属性缓存中读取 ctime 而不是实际值，实际值最多需要 3 秒才能反映在缓存中。安装时使用“noac”选项，但从长远来看会影响性能。

我遇到了解决方案，例如对文件的同一所有者执行 chown 等，但是在执行 stat() 之前是否有适当的方法来刷新属性缓存？这个问题只发生在 Redhat Linux 而不是 FreeBSD 上。谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:30:16.990

这并不特定于 NFS，但您可以让内核删除缓存。这通常在 IO 基准测试时完成，但也适用于 NFS。

[https://www.kernel.org/doc/Documentation/sysctl/vm.txt](https://www.kernel.org/doc/Documentation/sysctl/vm.txt)：

```
Writing to this will cause the kernel to drop clean caches, dentries and
inodes from memory, causing that memory to become free.

To free pagecache:
    echo 1 > /proc/sys/vm/drop_caches
To free dentries and inodes:
    echo 2 > /proc/sys/vm/drop_caches
To free pagecache, dentries and inodes:
    echo 3 > /proc/sys/vm/drop_caches

As this is a non-destructive operation and dirty objects are not freeable, the
user should run `sync' first. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-18T20:02:59.327

来自官方文档（[http://www.citi.umich.edu/projects/nfs-perf/results/cel/dnlc.html](http://www.citi.umich.edu/projects/nfs-perf/results/cel/dnlc.html)）：

> 请注意，只有 open 和 fopen 需要保证它们获得对特定文件的一致句柄以进行读取和写入。stat 和朋友不需要检索新鲜的属性，...

具有讽刺意味的是，Javas`FileInputStream`使用的是 open，但不会触发属性刷新，但尝试写入却可以解决问题：`new FileOutputStream(file).close()`

Python：`os.access(path, os.W_OK)`

# image - Matlab 绘图以不显示图像并保存在无 Java 服务器上

> ID：13946854
> 
> 赞同：1
> 
> 时间：2012-12-19T06:40:23.740
> 
> 标签：image, matlab, graphics, matrix, plot

对于此问题的正常答案，此处提供：[在 MATLAB 中，如何绘制到图像并保存结果而不显示结果？](https://stackoverflow.com/questions/963674/in-matlab-how-do-i-plot-to-an-image-and-save-the-result-without-displaying-it)

但是，这不适用于不支持 Java 的服务器。这是输出：

```
>> testScript
??? Error using ==> imshow at 191
IMSHOW requires Java to run. 
```

我们无法在此服务器中安装 Java。

当然，其中一个答案建议直接修改图像，然后进行 imwrite。但是，它太原始了，在这个层面上，我们应该已经有了某种可以画线的功能。直接在图像矩阵上绘图还有哪些其他可用选项？

# java - 在使用文件类型输入时检索文件名

> ID：13946859
> 
> 赞同：12
> 
> 时间：2012-12-19T06:40:56.960
> 
> 标签：java, spring, file-upload

我有一个`jsp`带有此代码段的内容。

```
<form name="AudioFileConversionForm" enctype="multipart/form-data" method="post" >
Choose File: <input type="file" id="audioFile" name="audioFile"><br>
<input type="submit" value="upload">
</form> 
```

这是我的控制器`spring`。

```
public String convertFile(HttpServletRequest request, HttpSession session) {

    String audioFile = request.getParameter("audioFile");
    System.out.println(request.getParameter("audioFile"));
    System.out.println("Audio File Conversion Successful");
} 
```

我无法检索文件的名称，它显示`null`. 我知道我可以使用 JQuery 或 javascript 检索名称，但我不想同时使用它们。我想用纯java来做。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-19T06:54:29.980

当您上传文件时，`request`是[`org.springframework.web.multipart.MultipartHttpServletRequest`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/multipart/MultipartHttpServletRequest.html). 因此，您可以将其转换为您的方法`convertFile()`。见下文 ：

```
public String convertFile(HttpServletRequest request, HttpSession session) {
    // cast request
    MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;
    // You can get your file from request
    CommonsMultipartFile multipartFile =  null; // multipart file class depends on which class you use assuming you are using org.springframework.web.multipart.commons.CommonsMultipartFile

    Iterator<String> iterator = multipartRequest.getFileNames();

    while (iterator.hasNext()) {
        String key = (String) iterator.next();
        // create multipartFile array if you upload multiple files
        multipartFile = (CommonsMultipartFile) multipartRequest.getFile(key);
    }

    // logic for conversion
} 
```

> 但是我无法检索（接收空值）我在 JSP 页面中选择的文件的名称。

---> 要获取文件名，您可以将其获取为：

```
multipartFile.getOriginalFilename();  // get filename on client's machine
multipartFile.getContentType();       // get content type, you can recognize which kind of file is, pdf or image or doc etc
multipartFile.getSize()          // get file size in bytes 
```

为了使文件上传工作，您需要确保您正在创建多部分解析器 bean，如下所示：

```
<bean id="multipartResolver"
    class="org.springframework.web.multipart.commons.CommonsMultipartResolver">

    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="100000"/>
</bean> 
```

参考：[Spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-multipart)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T06:53:08.783

使用 MultipartFile 实用程序并尝试这个

```
MultipartRequest multipartRequest = (MultipartRequest) request;
                Map map = multipartRequest.getFileMap();
                MultipartFile mfile = null;
                for (Iterator iter = map.values().iterator(); iter.hasNext();) {
                    mfile = (MultipartFile) iter.next();
                                String fileName = mfile.getOriginalFilename()
    } 
```

或者您可以尝试 apache commons 文件上传。

检查此链接：[http ://commons.apache.org/fileupload/using.html](http://commons.apache.org/fileupload/using.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T06:53:44.313

无法直接检索文件名。您可以使用 Apache Commons Fileupload API -

```
// Create a factory for disk-based file items
FileItemFactory factory = new DiskFileItemFactory();

// Create a new file upload handler
ServletFileUpload upload = new ServletFileUpload(factory);

// Parse the request
List /* FileItem */ items = upload.parseRequest(request);
// Process the uploaded items
Iterator iter = items.iterator();
while (iter.hasNext()) {
    FileItem item = (FileItem) iter.next();

    if (item.isFormField()) {
       // Process a normal field
       String name = item.getFieldName();
       String value = item.getString();

    } else {
        // Process a file upload field 
    String fileName = item.getName();
    // DO further processing

    }
} 
```

更多细节 -

[http://commons.apache.org/fileupload/using.html](http://commons.apache.org/fileupload/using.html)

它也可以只用 Java 来完成，但显然需要更多的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T06:58:12.250

但是，首先，您将需要**Commons Fileupload API**，它将帮助您使用`file.getFieldName()`显示**表单字段名称**和`file.getContentType()`显示**文件类型**和`file.getName()`显示**文件名**

```
public String convertFile(HttpServletRequest request, HttpSession session) {
  boolean isMultipart = ServletFileUpload.isMultipartContent(request);
    if(!isMultipart) {
            out.println("File Not Uploaded");
    }
    else{
        FileItemFactory factory = new DiskFileItemFactory();
        ServletFileUpload upload = new ServletFileUpload(factory);
        List items = null;
        try {
            items = upload.parseRequest(request);
          } catch (FileUploadException e) {
            e.printStackTrace();
        }
        try {
            FileItem file = (FileItem) items.get(0);
            out.print("Field Name :"+file.getFieldName()); // Display the field name
            out.print("Content Type :"+file.getContentType()); // Display Type of File
            out.print("File Name :"+file.getName()); // Display File Name
        } catch (Exception e) {
            out.print(e);
        }
    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-13T11:53:37.213

```
Iterator iter = items.iterator();
while (iter.hasNext()) {
    FileItem item = (FileItem) iter.next();

    if (item.isFormField()) {
       // Process a normal field
       String name = item.getFieldName();
       String value = item.getString();

    } else {
        // Process a file upload field 
    String fileName = item.getName();
    // DO further processing

    }
} 
```

# javascript - 自定义 Google Maps API 信息窗口不起作用

> ID：13946860
> 
> 赞同：1
> 
> 时间：2012-12-19T06:40:59.263
> 
> 标签：javascript, jquery, html, css, google-maps

我正在使用 InfoWindow domready 事件处理程序来修改 InfoWindow 的外观。

```
google.maps.event.addListener(popup, 'domready', function() { 
```

我正在使用 jquery 更改 InfoWindow 的一些内部 div 的高度。

问题是高度发生变化并立即重置为默认大小。此外，事件处理程序被调用两次。

并非所有的 div 都会重置它们的大小，只有一些会这样做。

我的部分代码：

```
popup = new google.maps.InfoWindow({
    content:'<image id="pin_' + pin_count + '" src="question.png"/>'
});

// Parent.Parent.Parent
e = $('#pin_' + pin_count).parent().parent().parent();
console.log(e.height());
h = parseFloat(e.height());
e.css({
    'position' : 'absolute',
    'top' : '-100px',
    'height' : (h + 100) + 'px',
    'border-radius' : '16px 16px 16px 16px',
    'border' : '2px solid red',
});
console.log(e.height());
console.log("..."); 
```

除了 domready 之外，我还可以使用其他任何事件，它可以让我在完全绘制后修改 InfoWindow 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:53:00.277

我找到了一条出路......每当将 InfoWindow 添加到 Map 时，都会重新绘制所有图块，并且所有 InfoWindow 标记也会随之重置。

所以，我尝试了

```
google.maps.event.addListener(map, 'tilesloaded', function() { 
```

它保留了我的更改，但我遇到了一个不同的问题。

这将在地图上发生任何事情时调用，例如拖动、缩放等。我必须为每个标记保留标志，并且只有在加载标记时才执行此操作。

***无论如何要等待两个事件一起发生吗？***

**更新：**

当我得到`domready`事件时，我正在设置一个标志。当我得到下一个`tilesloaded`时，我检查标志并调整我的 InfoWindow。这是工作。但又是一个问题。

如果我在同一坐标处再添加一个标记，则不会重新加载图块并且`tilesloaded`不会生成事件。

***还有一个问题，我可以将地图中的所有事件都放到一个处理程序中吗？***

**更新 2**

我发现了这个问题。作为实际 InfoWindow 内容的第三个父级的 div 是唯一重置其大小的元素。

所以，当我收到tileloaded事件时，我正在检查div的高度，如果它已被重置，那么我再次设置高度......

```
google.maps.event.addListener(map, 'tilesloaded', function() {
    e = $('#pin_' + pin_count).parent().parent().parent();
    // default height is saved before the div is resized in domready event handler
    if (e.css("height") < default_height) {
        h = parseFloat(e.height());
        e.css({
            'height' : (h + 100) + 'px',
        });
    }
}); 
```

# php - 如何删除 XML 中的节点

> ID：13946865
> 
> 赞同：1
> 
> 时间：2012-12-19T06:41:25.093
> 
> 标签：php, javascript, xml

为什么我的代码无法删除位于我的asset.xml 中的元素

这是我在 php 文件中的 xml 代码：

```
<?php

if(isset($_POST["delete"])) {
        $node = $_GET["node"]; //get from form
        $xmldoc->load('asset.xml');
        $y= $xmldoc->getElementsByTagName("asset")[$node];
        $xmldoc.documentElement.removeChild($y);}
?> 
```

我的xml文件

```
<?xml version="1.0" encoding="UTF-8"?>
<Assets>
  <asset>
    <AssetType>PROJECTOR</AssetType>
    <Product>DELL</Product>
    <Brand>DELL</Brand>
  </asset>
</Assets> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:45:45.947

您必须保存文件才能使更改持续存在

```
$xmldoc->save('asset.xml'); 
```

* * *

看到您发布的代码是实际代码

[`DOMDocument::getElementsByTagName`](http://php.net/manual/en/domdocument.getelementsbytagname.php)返回一个[`DOMNodeList`](http://php.net/manual/en/class.domnodelist.php)你必须通过[`DOMNodelist::item`](http://php.net/manual/en/domnodelist.item.php)

```
$y = $xmldoc->getElementsByTagName("asset")->item($node);//assuming $node is an integer < # of matched nodes 
```

`->`用于访问 php 中的对象属性不应该[`.`](http://php.net/manual/en/language.operators.string.php)如此`$xmldoc.documentElement.removeChild($y);`

```
$xmldoc->documentElement->removeChild($y); 
```

或者更好

```
$y->parentNode->removeChild($y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:46:27.027

你需要先保存文件试试

```
$xmldoc->save('asset.xml'); 
```

和

该`removeChild()`方法删除指定的节点。
该`removeAttribute()`方法删除指定的属性。

# android - 使用 MediaPlayer 播放 mp3 文件

> ID：13946866
> 
> 赞同：1
> 
> 时间：2012-12-19T06:41:27.703
> 
> 标签：android, media-player

当我使用MediaPlayer播放mp3文件时，系统会报错log: `Prepare failed: status=0xFFFFFF8E`. 但是Realplayer是正常的。

我发现它只有在更高的ROM版本中才会出现错误。就像在 version4.0 中一样，它有错误。在 version2.3 中它没有错误。

编码：

```
private MediaPlayer mpBack = null;
/**
 * read in background sound from the resource file 
 * @param resId
 */
public void MediaPlay(int resId){
if(!isPlaying()){
mpBack = MediaPlayer.create(ctMedia, resId);
/**Volume Set */
mpBack.setVolume(0.8f, 0.8f);   
/**Background music default infinite loop*/
mpBack.setLooping(true);    
mpBack.start();
}
} 
```

LogCat 错误：</p>

```
12-18 21:51:57.380: E/MediaPlayer(31457): mOnVideoSizeChangedListener is null. Failed to send MEDIA_SET_VIDEO_SIZE message.

12-18 21:51:57.380: E/MediaPlayer(31457): mOnPreparedListener is null. Failed to send MEDIA_PREPARED message. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:19:12.973

尝试这个：

```
mpBack = new MediaPlayer().create(context, R.raw.blah); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:55:39.903

利用

```
mpBack.prepare(); 
```

在你开始媒体播放器之前

# api - 使用自定义搜索 API (REST JSON) 搜索方形图像

> ID：13946868
> 
> 赞同：1
> 
> 时间：2012-12-19T06:41:40.433
> 
> 标签：api, google-api, google-custom-search

我正在将 Google 的[JSON 自定义搜索 API](https://developers.google.com/custom-search/v1/using_rest)用于一个涉及为职业足球/足球运动员创建个人资料的项目。如果我定期使用 Google 图片搜索任何球员，并以“球员姓名，当前球队”格式搜索，搜索工具设置为 Type->Face，高级搜索设置为**aspect ratio->Square**，那么我通常会得到一个完美的“个人资料” “爆头作为第一个结果。这将是该项目的理想选择，因为每个图像都必须是正方形的。

使用前面提到的 API，我可以完成所有这些，除了方形限制。我可以使用[参数来搜索人脸图像](https://developers.google.com/custom-search/v1/using_rest#api_params)，显然我可以设置查询。但我找不到任何可以让我指定纵横比甚至自定义尺寸的参数。当我只是用浏览器搜索时，有一个正方形图像结果的参数，但在使用 API 时它不会产生相同的结果。

有没有办法只搜索方形图像？也许其他类型的图像搜索 API 在这里更适用，它只需要足够大以包含 1992 年至今的与体育相关的图像，但无论如何大部分都是 2000 年以上的东西，所以这不应该是太多的问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T21:09:44.840

谷歌图片搜索的纵横比参数是`iar`

```
tbs=iar:xw (panaromic)
tbs=iar:s  (square)
tbs=iar:t  (Tall) 
```

# android - android-x86 基于 ubuntu 12.10 和 gcc 4.7 构建

> ID：13946870
> 
> 赞同：1
> 
> 时间：2012-12-19T06:41:51.277
> 
> 标签：android, ubuntu, build, compiler-errors

我正在为x86机器构建从android-x86网站[http://www.android-x86.org/getsourcecode](http://www.android-x86.org/getsourcecode)下载的android源代码，主机是带有ubuntu 12.10和GCC 4.7的x86，同时给出make命令它抛出了几个范围和声明错误和中止编译，我已经安装了所有必需的包，Java 版本也是 Sun 的 JAva 包，我是否缺少某些东西或兼容性是一个问题？

# iphone - 将 Overlay 地图添加到 Apple MapKit 框架是否合法？

> ID：13946871
> 
> 赞同：1
> 
> 时间：2012-12-19T06:41:53.830
> 
> 标签：iphone, ios, google-maps, overlay, mapkit

由于iOS 6.0使用Apple Map，我想通过使用TileOverlay将Google Map添加为Overlay。App Store是否有可能拒绝该应用程序？我可以直接将 Overlays 调整到 mapkit 而不对现有代码进行重大更改吗？向叠加地图添加注释怎么样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T06:46:21.410

现在谷歌地图发布了新的 iOS 版谷歌地图 SDK，允许用户在你的 iOS 应用中查看谷歌地图并与之交互。让我们看看：[这里有一个链接](https://developers.google.com/maps/documentation/ios/)！干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:44:16.857

为什么不使用[适用于 iOS 的 Google 新地图 SDK](https://developers.google.com/maps/documentation/ios/intro)？

# facebook - 使用来自不同主机的 facebook 访问令牌？

> ID：13946874
> 
> 赞同：1
> 
> 时间：2012-12-19T06:42:05.253
> 
> 标签：facebook, facebook-access-token

假设我从一台机器获得了一个 facebook 页面访问令牌，而另一台机器拥有它。

如果两台机器同时使用该访问令牌来调用facebook API，是否允许？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:44:42.917

是的，您可以在不同的机器上使用相同的令牌。

# memory-management - JVM-如何查找和比较哪个 JVM 更适合 linux？JAMVM 与 OPENJDK。

> ID：13946879
> 
> 赞同：1
> 
> 时间：2012-12-19T06:42:31.807
> 
> 标签：memory-management, jvm, openjdk, jamvm

是否有任何工具可以比较不同 JVM 的内存占用。当前在 JAMVM 上运行。我想知道，如何比较JVM。以及决定因素是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:45:15.347

我所知道的比较内存占用的最佳工具是在每个下运行您的程序并使用`top`或`time`监视其内存使用情况。`/usr/bin/time`（不是你的 shell 内置的）将输出程序在运行过程中使用的最大内存大小。请记住，这将计算不同的开销，并且可能因程序类型而异。

就一般比较而言，您会问“决定因素是什么”。决定因素是对您的程序或用例有什么影响。听起来记忆是你关心的东西；测量它。如果您关心挂钟时间或使用的 CPU 时间，请测量它。确定是什么成就或破坏了您的应用程序，并衡量这些事情。不一定有一般原则（尽管一般原则可能比其他原则更好），您需要确定最适合您的特定应用程序和用例的原则。

# ivr - VXML :: 桥接和咨询传输之间的区别

> ID：13946881
> 
> 赞同：3
> 
> 时间：2012-12-19T06:42:37.263
> 
> 标签：ivr, vxml, voicexml

来自关于咨询的 VXML 2.1 文档

[咨询_转让](http://www.w3.org/TR/voicexml21/#sec-transfer)

以及来自有关桥接传输的 VXML 2.0 文档

[桥接转移](http://www.w3.org/TR/voicexml20/#dml2.3.7.2)

我理解的唯一区别是这个

*   即使在桥接转移中转移后，平台也会在通话期间保持会话，而在协商转移中，它会在成功转移时抛出**connection.disconnect.transfer 。**

请让我知道我的理解是否正确

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:42:28.793

VXML 中实际上存在三种类型的传输。你忘了说盲转。一旦启动传输，盲传输就会终止应用程序。咨询转接类似于盲转，只是它确保在终止申请之前完成转接。如果传输未成功完成，则返回到应用程序。另一方面，桥接传输使应用程序在传输完成后继续运行。对于桥接传输，您可以考虑将两方和 IVR 应用程序一起召开会议。

您想查看您的 IVR 供应商，了解他们如何实施传输以获取任何详细信息。并非所有 IVR 供应商在实施规范方面都相同。许多根本不支持咨询转移，只允许桥接或盲转移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T16:31:58.557

咨询转移使用某种监督转移，在进行转移之前，它会分析目的地的状态，如忙/或空闲，然后转移呼叫。桥接转接会使用会议之类的东西，它使用第三条线路，假设呼叫者正在使用 IVR 通话，如果呼叫需要转接给座席，IVR 将使用分配给 IVR 的第三个空闲通道，然后连接到座席，实际上这四个通道用于两个呼叫。现在“桥接”一词来源于连接这两个电话，如会议。因此，所有这四个渠道都使用到与代理的对话结束

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-10T22:05:39.823

场景：甲方呼叫乙方（可能是 IVR 或人工）。乙方要转给丙方。

**咨询转接：**乙方发起转接，但在完成转接前监听乙方应答并挂断。之后，甲丙双方继续单独通话。

**桥接转接：** B 方发起转接，但在完成转接之前监听 B 方应答，但它在暂停模式下保持通话。当 C 方挂机时，B 方重新与 A 方联系。想想 IVR 应用程序（即 B 方）在与代理（即 C 方）完成通话后将呼叫返回到 Customer Survey 应用程序。

**盲转：**乙方将呼叫转移给丙方，不关心丙方是否接听、有空或挂断电话。

检查这个页面，它提供了一个很好的解释： [https ://www.devconnectprogram.com/forums/posts/list/17727.page](https://www.devconnectprogram.com/forums/posts/list/17727.page)

# jquery - 使用 phonegap 的 pagecreate 事件加载页面时出现问题

> ID：13946882
> 
> 赞同：2
> 
> 时间：2012-12-19T06:42:37.167
> 
> 标签：jquery, html, cordova, jquery-mobile

在我的应用程序“index.page”中，我在标签内加载 phonegap 和 jqm 脚本。我的索引页面中有一个链接，如下所示

```
<div>
    <a href="page2.html" data-ajax=false;>Click here</a>
</div> 
```

如果我在我的索引页面中单击上面的 url，它会重定向到该页面中的“page2.html”，我正在完全加载从上到下的 html。在“page2.html” **头**标签内，有相同的脚本 phonegap 和 JQM js 文件。但是当页面在 pagecreate 事件中加载时它不起作用。找到我正在拥有的以下 pagecreate 事件。

```
$("#page2").live('pagecreate', function(event){
     console.log("Inside page create", device.platform);
}); 
```

从 pagecreate 加载页面时出现以下错误。

```
device is not defined
console.log("Inside page create", device.platform); 
```

如何在 pagecreate 中完全加载页面并希望在此 pagecreate 中调用一些函数调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:23:57.170

如果可能，不要将 jQuery 移动事件与 phonegap 混合。

改用这个：

```
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready
function onDeviceReady() {
    alert(device.version);
} 
```

# c++ - void main的由来是什么？

> ID：13946885
> 
> 赞同：17
> 
> 时间：2012-12-19T06:42:52.143
> 
> 标签：c++

很多时候，我在论坛上看到臭名昭著`void main()`的问题，并且几乎立即在问题之后发表评论，告诉用户永远不要使用`void main()`（我完全同意）。但它的起源在`void main()`哪里？

为什么我仍然看到新人养成了`main`什么都不退货的坏习惯，而正确的方法是退货`int`。我理解为什么这种方法是错误的，正如[这个](https://stackoverflow.com/questions/9442121/what-was-wrong-with-void-main)问题和其他许多人所解释的那样，但我不知道这种声明方法是如何产生的，`main`甚至不知道为什么它仍然教给一些学生。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T07:09:51.703

甚至 Bjarne Stroustrup 也用`void main`C++编写了`void main`. 当然，Bjarne 也写过它`void main`从未成为 C 或 C++ 的一部分。然而，对于后一种说法（在他的常见问题解答中），至少从 C99 开始，Bjarne 看起来好像是错误的，因为 C99 标准的 N869 草案在其 §5.1.2.2.3/1 中说

> “如果`main`函数的返回类型是与 兼容的类型`int`，那么从函数的初始调用返回`main`就相当于以`exit`函数返回的值`main`作为参数调用函数；到达`}`终止`main`函数的返回值 0。如果返回类型与 不兼容`int`，则返回到宿主环境的终止状态未指定。

更早前，在其 §5.1.2.2.1/1 中，它说明了 的签名`main`，

> “或以其他一些实现定义的方式。”

例如，返回类型“与 不兼容`int`”可以是`void`。

因此，虽然这不是一个完整的答案（我怀疑网络上是否有关于此的历史资料），但至少它在某种程度上有助于纠正问题的*假设*。`void main`在 C 和 C++ 中，这种情况并非完全令人厌恶。但在 C++ 中它是无效的：它是托管 C++ 实现中不支持的 C 事物。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T07:17:23.977

我一直是这个问题的受害者，所以我想我可以告诉你为什么会**这样()**方法。

但是由于他们不想让学生感到困惑，也不想在 C 编程课程的一开始就涉及到教授返回类型和返回语句的复杂性，所以他们使用（并且还要求我们使用）**void main()**并告诉我们假设这是默认类型，直到我们详细研究函数和返回类型。

因此，这会导致我们在 C 编程的第一堂课中养成使用 void main() 的错误习惯。

希望这能很好地解释为什么大多数计算机程序员，尤其是较新的程序员会选择这种不好的做法。

干杯，马扬克

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T07:10:54.053

我个人认为是这样的：K&R C 不需要指定返回类型并隐式假定它是 int*并且*同时 K&R 中的示例**没有**使用返回值。

例如，K&R 第一版中的第一个代码如下：

```
#include <stdio.h>

main() 

{
   printf("Hello World\n");
} 
```

因此，难怪人们后来（在某些编译器将 void 类型作为扩展添加到语言中之后）认为 main 实际上有一个 void return 语句。我会做同样的事情。

实际上K&R后来确实说：

> 为简单起见，到目前为止，我们从主要函数中省略了 return 语句，但我们将在后面包含它们，以提醒程序应该将状态返回到它们的环境。

所以这只是另一个例子，当你编写不正确的代码并在稍后包含免责声明时，假设人们会在做愚蠢的事情之前阅读所有内容；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-10T14:32:23.443

作为众多其他作家中的一位，赫伯特·希尔特（Herbert Schildt）写了一些流行但不一定是高质量的书籍来支持这一想法。

一个令人震惊的例子是他[的 The Annotated C Standard](http://www.lysator.liu.se/c/schildt.html)。他在左页引用了 ISO/IEC 9899:1990 标准，并在右页提供了注释。当他引用第 5.1.2.2.1 节程序启动时，它说：

> 程序启动时调用的函数名为`main`. 实现没有声明这个函数的原型。它可以不带参数定义：
> 
> ```
> int main(void) { /* ... */ } 
> ```
> 
> 或使用两个参数（...）：
> 
> ```
> int main(int argc, char *argv[]) { /* ... */ } 
> ```

这不包括添加到 C99 中的“或以某种其他实现定义的方式”子句。

然后，在注释中，他说：

> `main()`有趣的是，编译器没有声明原型。因此，您可以根据程序的要求自由声明`main()`。例如，以下是三种常用的声明方法`main()`：
> 
> ```
> void main(void)  /* no return value, no parameters */
> 
> int main(void)   /* return a value, no parameters */
> 
> /* return a value and include command-line parameters */
> int main(int argc, char *argv[]) 
> ```

C90 标准不允许第一个变体，尽管他这么说，但无辜的读者可能会感到困惑。

请注意，第 5.1.2.2.3 节程序终止说：

> 对函数的初始调用的返回`main`等效于以`exit`函数返回的值`main`作为参数调用函数。如果`main`函数执行没有指定值的返回，则返回到托管环境的终止状态是未定义的。

由于您会发现它`exit`需要一个`int`参数，因此很明显返回类型`main`应该是`int`.

评论说：

> 在大多数实现中，来自 的返回值`main()`（如果有的话）被返回给操作系统。请记住，如果您没有显式返回一个值，`main()`那么从技术上讲，传递给操作系统的值是未定义的。尽管大多数编译器在没有指定其他返回值时会自动返回 0（即使`main()`声明为`void`），但您不应依赖这一事实，因为标准不保证这一点。

这篇评论中有些是牛粪，我并不是唯一一个持有这种观点的人。这本书的唯一优点是它包含了几乎所有的 C90 标准（描述中缺少一页`fprintf`——同一页被打印了两次），而且成本远低于标准的成本。有人认为，价格差异代表评论价值的损失。有关C 的一些信息，请参阅[Lysator ，以及](http://www.lysator.liu.se/c/)[Clive Feather](http://www.lysator.liu.se/c/schildt.html)对 The Annotated C Standard 的评论。

他的另一本书是[C: The Complete Reference](http://www.seebs.net/c/c_tcn4e.html)，它至少出版到了第 4 版。[第三版](http://www.seebs.net/c/c_tcn3e.html)被广泛使用`void main()`；这可能已经被第 4 版清理了，但很遗憾花了这么多版本来纠正这样一个基本问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-10T15:04:20.147

在没有操作系统的裸机上运行的嵌入式程序永远不会返回。上电时，复位向量间接跳转（首先发生一些内存初始化）到`main`和内部`main`，有一个无限`while (1){}`循环。从语义上讲， for 的返回值`main`没有意义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-19T06:50:13.027

可能的原因：

*   Java 程序员习惯于编写`public static void main(...)`.
*   缺少 return 语句可能有一些假设不会`main`返回，尽管它隐式返回`0`。
*   在 C 中，您可以编写`main()`没有返回类型，并且`int`默认情况下是这样。也许有些人认为缺少的返回类型等同于`void`.
*   坏书/老师？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-10T10:58:49.960

从 C++ 的角度来看，存在 3 个混淆来源：

*   原教旨主义 PC/桌面程序员，他们狂热而盲目地宣扬`int main()`，但自己并不真正了解标准的全貌。C 和 C++ 对于如何在独立系统中声明 main() 有完全不同的规则（在编程裸机嵌入式系统或操作系统时）。
*   与 C++ 相比，C 语言在历史上有着不同的规则。在 C 中，main() 的规则随着时间的推移而改变。
*   来自黑暗时代的遗留编译器和编码标准，包括停留在 1980 年代的编程教师。

我将在这个答案中解决每个混淆的来源。

PC/桌面程序员是有问题的，因为他们认为托管系统是唯一存在的系统，因此传播了关于 main() 正确形式的不正确/不完整的宣传，武断地声明你必须使用`int main()`，在这样做的时候错误地引用了标准，如果一点也不。

C 和 C++ 标准都一直列出两种系统：独立式和托管式。

在独立实现中，`void main (void)`在 C 中一直是允许的。在 C++ 中，独立实现略有不同：独立实现可能不会将入口函数命名为 main()，或者它必须遵循 return 的规定形式`int`。

甚至 Bjarne Stroustrup 都没有设法[引用标准或正确/完整地解释这一点](http://www.stroustrup.com/bs_faq2.html#void-main)，所以难怪普通程序员会感到困惑！（他引用了托管环境子章节，并没有引用它的所有相关部分）。

这[一切都在此处参考标准进行了详细讨论](https://stackoverflow.com/a/31263079/584518)，Bjarne 和其他人请阅读。

关于`void main (void)`托管系统，这可以追溯到很久以前，在 ISO C 标准之前的黑暗时代，一切都被允许。

我怀疑它背后的罪魁祸首是 Borland Turbo C 编译器，它在 1990 年发布 ISO C 时已经是市场领导者。这个编译器允许`void main (void)`.

并且应该注意，`void main (void)`对于托管系统，C90 中隐式禁止托管实现，不允许实现定义的形式。所以 Turbo C 从来就不是一个严格遵守的实现。然而它*仍然*在学校中使用（尤其是在印度）！从头开始教每个学生不正确的编程标准。

由于 C99`void main (void)`和其他形式在 C 中被允许，因为添加了一个奇怪的句子：“或以某种其他实现定义的方式”。这也在上面的链接答案中进行了讨论，参考了 C99 基本原理和 C 标准的其他部分，这些部分假设托管系统 main() 可能不会返回 int。

因此，在 C 中，`void main (void)`（可以说）当前是托管实现的允许形式，因为编译器记录了它的作用。但请注意，由于这是实现定义的行为，*因此决定是否允许这种形式的是编译器，而不是程序员！*

在 C++ 中，`void main (void)`不是允许的形式。

# android - Android sqlite外键引用多行

> ID：13946887
> 
> 赞同：2
> 
> 时间：2012-12-19T06:43:11.433
> 
> 标签：android, sqlite, foreign-keys

我有两个表 A 和 B。
在表 A 中，它包含两个列，A1，A2，其中 A1 是主键
在表 B 中，其中一个列，比如说 B2，在
我想引用的列 A1 中存储一个值数组此数组中的每个元素到表 A 中的 col A1。这可能吗

例如
表 A
ID|name|value 1|OTZ|10
2|hello world 10
3|apple|2
4|orange|5

表 B
id|数组 1|1,2
2|3,4
3|1,4

如何将 col 数组中的这些值引用到表 A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:49:46.413

正如您所要求的，一个简短的答案 - 这就是您解决两个表之间的“多对多”关系的方式。多对多也可能意味着表 A 中的一个条目与表 B 完全没有联系，或者它有数百个（反之亦然）

如果你有

```
TABLE A
id INT PRIMARY KEY,
a_description TEXT NOT NULL

TABLE B
id INT PRIMARY KEY,
b_description TEXT NOT NULL 
```

如果你想保存这两者之间的关系，你将需要一个映射表，大多数时候称为 TABLEA2B （或类似的东西），它至少将这些表的两个主键作为组合主键（这样相同的组合不允许重复）

```
TABLE A2B
A_id INT,
B_id INT,
 PRIMARY KEY (`A_id`, `B_id`)
CONSTRAINT... 
```

可以在此处找到带有 UML 图和完整（工作）SQL 示例代码的文章：http: [//sqlrelationship.com/many-to-many-relationship/](http://sqlrelationship.com/many-to-many-relationship/)

# javascript - 如何使用折线和 openInfoWindowHtml 拍摄谷歌地图的快照

> ID：13946891
> 
> 赞同：6
> 
> 时间：2012-12-19T06:43:37.617
> 
> 标签：javascript

我正在开发使用折线拍摄谷歌地图快照的功能，并在折线上打开弹出窗口点击谷歌地图。带有折线的谷歌地图快照正在工作，但它无法在折线上拍摄快照打开弹出窗口。折线显示在 sanpshot 图片上，但信息窗口未显示。这是拍摄快照的代码。

此代码用于初始化 javascript onload 上的代码控件：

```
 var snapShotControlOptions = { hidden: true };
                snapShotControlOptions.buttonLabelHtml="<snap id='snap' style='display:none' >snap</span>"
                snapShotControl = new SnapShotControl(snapShotControlOptions);
                map.addControl(snapShotControl); 
```

这是拍摄谷歌地图的sanp照片的方法。

```
 function takeSnap() {

            //static map size
            var sizeStr = "640x640";
            var imgSize = "";
            if (sizeStr != "") {
                var sizeArray = sizeStr.split("x");
                imgSize = new GSize(sizeArray[0], sizeArray[1]);
            }
            snapShotControl.setMapSize(imgSize);
            var format = "jpg";
            snapShotControl.setFormat(format);

            var url = snapShotControl.getImage();
            //            document.getElementById("snapshot_canvas").src = url;
            SaveImage(url);

            //         
        }

//this will add polyline overlay to draw line on google map with different color of polyline on google map .

  var polyline = directionsArray[num].getPolyline();
                polyline.setStrokeStyle({ color: streetColor, weight: 3, opacity: 0.7 });
                polyline.ssColor=streetColor;                
                map.addOverlay(polyline);

///this code will open the pop info window on polyline those polyline created on google map 
```

问题是当我拍摄谷歌地图的快照时，他们的这些弹出窗口不包含在 sanpshot 中。

```
 var MousePoint = "";
                var marker;
                GEvent.addListener(map, "mousemove", function (point) {
                    MousePoint = new GLatLng(point.lat(), point.lng());

                });

                GEvent.addListener(polyline, "click", function () {                   
                    map.openInfoWindowHtml(MousePoint, headMarkerHtml);                   
                });
                GEvent.addListener(polyline, "mouseout", function () {
                    // map.closeInfoWindow();
                }); 
```

你能告诉我谁通过折线叠加中的弹出窗口。

我已经使用 javascript 文件 snapshotcontrol.js 来拍摄快照。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:12:57.747

从快照控制源

> 该库使用 Google Static Maps API 可以轻松生成交互式地图的图像“快照”。

静态地图不支持信息窗口或向地图添加自定义文本之类的任何内容 [https://developers.google.com/maps/documentation/staticmaps/index](https://developers.google.com/maps/documentation/staticmaps/index)

您可以在浏览器中的画布上绘制地图，然后使用此[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)在其上绘制信息窗口 ，然后下载画布内容

# javascript - 图像显示一些乱码值

> ID：13946908
> 
> 赞同：4
> 
> 时间：2012-12-19T06:45:32.093
> 
> 标签：javascript, jquery, struts

我正在使用 html、ajax 和 struts 2 在 UI 上显示图像。我将响应作为来自动作的图像的字节 [] 返回，当我将它与图像源附加时，它会显示一些乱码值。

我从脚本进行的 ajax 调用是

```
$.ajax({  
    type: "POST",  
    url:url,  
    contentType: "image/png",  
    success: function(data){  
        $('.logo').html('<img src="data:image/png;base64,' + data + '" />');  
    }
} ); 
```

我从哪里返回图像字节数组的动作是这样的

```
public void execute(ActionInvocation invocation) throws Exception {  
    HttpServletResponse response = ServletActionContext.getResponse();  
    response.setContentType(action.getCustomContentType());
    response.getOutputStream().write(action.getCustomImageInBytes());
}

public byte[] getCustomImageInBytes() { 
    System.out.println("imageId" + imageId); 
    BufferedImage originalImage;
    try {
      originalImage = ImageIO.read(getImageFile("C:\\temp\\Desert.jpg"));
      // convert BufferedImage to byte array
      ByteArrayOutputStream baos = new ByteArrayOutputStream();
      ImageIO.write(originalImage, "png", baos);
      baos.flush();
      imageInByte = baos.toByteArray();
      baos.close();
    } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    } 
    return imageInByte;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:27:19.697

我已经重现了你的问题。它似乎确实是 base64 编码，尽管它在 eclipse 本地预览中运行良好，但没有。

使用这两行代替 response.getOutpuStream().write(...)

```
String encoded = javax.xml.bind.DatatypeConverter
                .printBase64Binary(action.getCustomImageInBytes());
response.getOutputStream().print(encoded); 
```

我的完整解决方案：

HTML

```
<!DOCTYPE html>
<html>
<head>
<title>Dynamic image test - stackoverflow issue 13946908</title>
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
</head>
<script>
  $(document).ready(function() {
    $.ajax({
      type : "GET",
      url : "/Test/ImageServer",
      contentType : "image/png",
      success : function(data) {
        $('.logo').html('<img src="data:image/png;base64,' + data + '" />');
      }
    });
  });
</script>
<body>
  <div class="logo"></div>
</body>
</html> 
```

小服务程序

```
public class ImageServer extends HttpServlet {

    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("image/jpeg");
        byte[] data = getCustomImageInBytes(request.getServletContext()
                .getResource("/horse.jpg"));
        String encoded = DatatypeConverter.printBase64Binary(data);
        response.getOutputStream().print(encoded);
    }

    private byte[] getCustomImageInBytes(URL url) throws IOException {
        BufferedImage originalImage = ImageIO.read(url);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ImageIO.write(originalImage, "jpg", baos);
        baos.flush();
        byte[] imageInByte = baos.toByteArray();
        baos.close();
        return imageInByte;
    }
} 
```

经过测试

*   Chrome 版本 23.0.1271.97 OSX 10.7.5
*   火狐 16.0.2 OSX 10.7.5
*   Safari 6.0.2 OSX 10.7.5

# jquery - 在 asp.net gridview 中重新绑定 jQuery 数据表

> ID：13946914
> 
> 赞同：3
> 
> 时间：2012-12-19T06:46:04.467
> 
> 标签：jquery, asp.net, css, datatable

我正在使用 jQuery 数据表绑定一个 asp.net gridview，我必须隐藏和显示一些行。

它工作得很好，但是当我从数据表中隐藏一些行时，数据表分页没有更新，所以我必须重新绑定 jquery 数据表。

当我再次调用数据表函数时，它会显示此错误：-

![在此处输入图像描述](../Images/e6cdcb49edd2a6fc0c13539f79a674c5.png)

我正在使用此代码来显示和隐藏..然后重新绑定数据表

```
$('table.dataTable tbody tr').each(function () {
                var name = $(this).find('.name').html();
                if (name == str) {
                    $(this).show();
                    $('.Flight_class').dataTable({
                        "aaSorting": [[1, "asc"]],
                        "sPaginationType": "full_numbers",
                        "bJQueryUI": false,
                        "bAutoWidth": false,
                        "bLengthChange": false
                    });
                }
                else {
                    $(this).hide();
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:07:44.710

我认为不可能重新绑定`datatable`。在重新绑定之前取消绑定：

```
$('.Flight_class').unbind().dataTable({...}); 
```

# java - IBM JVM 类加载器如何保存类？

> ID：13946916
> 
> 赞同：5
> 
> 时间：2012-12-19T06:46:06.117
> 
> 标签：java, memory-leaks, jvm, classloader

在 HotSpot 中，JVM`java.lang.Classloader`类有一个由这个类加载器加载的所有类的向量。因此，只要类加载器还活着，所有类都保存在内存中。在 IBM JVM J9 的 java.lang.Classloader 中没有这样的字段。至少我找不到一个。所以我的问题是：

1.  IBM JVM 的类加载器在哪里保存类缓存？

2.  如果与上述不同：IBM JVM 中有哪些硬引用类，从而防止卸载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:07:37.427

查看我的 IBM JVM 的代码，它似乎`java.lang.ClassLoader`是一个抽象类，因此它将在某个地方实现。使用调试器，我发现这是一个名为`sun.misc.Launcher$AppClassLoader`.
然后，要检索一个类，有一个本机方法
`private native Class findLoadedClassImpl(String className);`
，因此似乎缓存是在 Java 之外的本机方法中完成的。

在`loadClass`方法开始时，我看到：

```
// Ask the VM to look in its cache.
Class loadedClass = findLoadedClass(className); 
```

然后它检查是否`loadedClass`为空，如果是则尝试使用父类加载器。
所以，我想说，除非该方法被继承的类加载器覆盖，否则缓存发生在 Java 之外，在 IBM VM 的某些本机组件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-08T04:43:51.307

IBM J9 JVM 在堆上没有 PermGen，并将类存储在本机内存中。您可以使用 -Xdump 生成一个 javacore.* 文件，它将包含所有类加载器和类的列表。

顺便说一句：Java8 会做类似的事情。

# objective-c - 为什么页面不可用时出现超时错误

> ID：13946919
> 
> 赞同：3
> 
> 时间：2012-12-19T06:46:19.617
> 
> 标签：objective-c, cocoa, http

我使用`NSString`方法`initWithContentsOfURL:usedEncoding:error:`来获取某些页面的内容。我注意到，当我尝试访问的页面不存在时，此方法会执行很长时间，然后因超时错误而失败。我尝试出于相同的目的使用`NSURLRequest`和`NSURLConnection`类，但得到相同的结果 - 执行时间长然后超时错误。当我尝试在浏览器中打开同一页面时，我会更快地得到响应并返回页面不可用错误。

看起来可可方法不对页面名称进行 dns 解析，或者它们对该操作有更长的超时时间。

所以我的问题是，我使用的可可方法可以解析 dns 吗？如果他们不这样做怎么办？

我使用的代码示例：

```
NSURL* url = [NSURL URLWithString:@"http://unexisting.domain.local"]; 
NSError* err = nil;
NSString* content = [NSString stringWithContentsOfURL:url usedEncoding:nil error:&err];

if (err) {
    NSLog(@"error: %@", err); 
} else {
    NSLog(@"content: %@", content);
} 
```

* * *

```
NSURL* url = [NSURL URLWithString:@"http://unexisting.domain.local"]; 
NSURLRequest* request = [NSURLRequest requestWithURL:url];

NSURLResponse* response = nil;
NSError* err = nil;
NSData* data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];

if (err) {
    NSLog(@"error: %@", err); 
} else {
    NSString* content = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"content: %@", content);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:28:00.113

Gene M.[回答](https://stackoverflow.com/a/1085082/111015)了如何使用 of 来做到这一点`SCNetworkReachability`。这是示例代码：

```
bool success = false;
const char *host_name = [@"stackoverflow.com" 
                         cStringUsingEncoding:NSASCIIStringEncoding];

SCNetworkReachabilityRef reachability = SCNetworkReachabilityCreateWithName(NULL,
                                                                        host_name);
SCNetworkReachabilityFlags flags;
success = SCNetworkReachabilityGetFlags(reachability, &flags);
bool isAvailable = success && (flags & kSCNetworkFlagsReachable) && 
                             !(flags & kSCNetworkFlagsConnectionRequired);
if (isAvailable) {
    NSLog(@"Host is reachable: %d", flags);
}else{
    NSLog(@"Host is unreachable");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:42:44.207

监控可达性（设备连接性）并对其做出反应绝对是一种很好的做法，如上所述。

您还可以实现`NSURLConnectionDelegate`协议及其方法，例如

```
 - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
      NSLog(@"**ERROR** %@", error);
      // Respond to error
 } 
```

如果你没有连接，你应该得到一个 NSURLConnection 错误代码 999 和`NSURLErrorCancelled = -999`/或`NSURLErrorNotConnectedToInternet = -1009`如果你没有连接，等等。至少你会有一个关于正在发生的事情的报告。

文档： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)

# at-command - 使用 AT+CMGL="ALL" 无法读取消息

> ID：13946922
> 
> 赞同：3
> 
> 时间：2012-12-19T06:46:32.060
> 
> 标签：at-command

我正在使用 AT 命令对调制解调器进行编程。当我执行`AT+CMGL="ALL"`时，有时它不会返回任何东西。在其他时候，它返回消息列表。

你能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T15:53:06.840

这取决于电话是配置为 PDU 模式还是文本模式。27.005[标准](http://www.3gpp.org/ftp/Specs/html-info/27007.htm)说：

```
<stat> integer type in PDU mode (default 0), or string type in text mode (default
"REC UNREAD"); indicates the status of message in memory; defined values:
       0 "REC UNREAD"   received unread message (i.e. new message)
       1 "REC READ"     received read message
       2 "STO UNSENT"   stored unsent message (only applicable to SMs)
       3 "STO SENT"     stored sent message (only applicable to SMs)
       4 "ALL"          all messages (only applicable to +CMGL command) 
```

所以你应该跑

```
AT+CMGF=1
AT+CMGL="ALL" 
```

（可能还要`AT+CPMS`确定您正在从哪个存储读取（[请注意](https://stackoverflow.com/a/15746283/23118)，您可能希望同时指定`<mem1>`和`<mem2`））

# visual-c++ - 从 Visual Studio 2010 迁移到 2012 后出现内存错误

> ID：13946925
> 
> 赞同：2
> 
> 时间：2012-12-19T06:46:36.493
> 
> 标签：visual-c++, memory-management, memory-leaks, visual-studio-2012

我的库在 Visual Studio 2010 中运行良好，但现在每当我在 2012 年编译运行它时，都会出现以下内存错误：

```
First-chance exception at 0x76884B32 in Example.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x0101F3A0.
First-chance exception at 0x76884B32 in Example.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x0101F3A0.
Unhandled exception at at 0x76884B32 in Example.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x0101F3A0.
First-chance exception at 0x76FF3541 (ntdll.dll) in Example.exe: 0xC0000005: Access violation reading location 0xFEFEFF02. 
```

根据调用堆栈，每次`return wstring(cMD5.hexdigest());`从以下代码调用错误都会出现：

```
wstring GetMachineHash() {
     BYTE szHash[48];
     LPBYTE pIdentifierHash;

     ZeroMemory(szHash, 48);

     MachineNameIdentifier cNameId;
     pIdentifierHash = cNameId.GetIdentifierHash();

     memcpy(szHash, pIdentifierHash, 16);

     NetworkAdapterIdentifier cNetAdaptId;
     pIdentifierHash = cNetAdaptId.GetIdentifierHash();

     memcpy(szHash+16, pIdentifierHash, 16);

     VolumeInfoIdentifier cVolInfo;
     pIdentifierHash = cVolInfo.GetIdentifierHash();

     memcpy(szHash+32, pIdentifierHash, 16);

     MD5 cMD5(szHash, 48);

     return wstring(cMD5.hexdigest());
} 
```

如果您想知道我正在使用什么 MD5 类，它是 Frank Thilo 的一个端口，但它被修改为返回 LPBYTE 而不是 std::string ，如下所示：

```
// return 16 byte md5 hash
LPBYTE MD5::hash() const {
    if (!finalized)
        return 0;

    return (LPBYTE)digest;
}

// return hex representation of digest as string
LPTSTR MD5::hexdigest() const
{
    if (!finalized)
        return NULL;

    LPTSTR szBuf = new TCHAR[33];

    ZeroMemory(szBuf, 33);

    for (int i=0; i<16; i++)
        _stprintf_s(szBuf+i*2, 33, _T("%02X"), digest[i]);

    szBuf[32]=0;

    return szBuf;
} 
```

在对 SO 进行了一些研究之后，它说这些错误是因为我的程序中其他地方可能存在内存泄漏。但我看过，一切似乎都被正确释放了。有任何想法吗？我想知道这是否也可能与通过`LoadLibrary()`和从 EXE 调用 DLL 库有关`GetProcAddress()`？

（我还应该注意平台工具集设置为`Visual Studio 2012 - Windows XP (v110_xp)`）

# android - 在 JellyBean 设备中接收 MultiCast 数据包时出现问题

> ID：13946926
> 
> 赞同：3
> 
> 时间：2012-12-19T06:46:40.113
> 
> 标签：android, multicast

我在运行 Android JellyBean 4.1 的设备中接收多播数据包时遇到以下问题

设备处于空闲（锁定）状态时，未收到多播数据包。

正如大多数论坛所建议的那样，我尝试过 WifiMultiCastLock、WifiWakeLock、WifiSleep Policy 等。

但是我的应用程序在空闲状态下仍然无法接收多播数据包。

我在运行 ICS 4.0 或更早版本的 Android 设备上测试了相同的可安装程序。这些设备中不会出现此问题。我的意思是，即使在 ICS 的空闲（锁定）状态下，同一个应用程序也会接收多播数据包。

那么，为了移植到 JellyBean，我需要做些什么改变吗？

请提出解决此问题的正确方法。

提前致谢， Pragadeesh

# objective-c - Objective-C：索引越界

> ID：13946928
> 
> 赞同：3
> 
> 时间：2012-12-19T06:47:00.097
> 
> 标签：objective-c, ios, nsarray

我很难弄清楚我的代码到底有什么错误。它说：

```
reason: '*** -[__NSArrayI objectAtIndex:]: index 3 beyond bounds [0 .. 2]' 
```

这是应用程序崩溃的部分。

```
NSString *keyTemp = [[NSString alloc] initWithFormat:@"Wit%d",indexPath.section+1];
    NSArray *arrTemp;
    if ([userStandards objectForKey:keyTemp] == nil || [[userStandards objectForKey:keyTemp] count]==3) {
        if ([witDict objectForKey:keyTemp] == nil) {
            arrTemp = [[NSArray alloc] initWithObjects:@"",@"",@"",@"",@"",@"",nil];
        } else {
            arrTemp = [[NSArray alloc] initWithArray:[witDict objectForKey:keyTemp]];
        }
        cell.inputTextArea.text = [NSString stringWithFormat:@"Name: %@\nPhone: %@\nEmail: %@\nCity/State: %@\nZip: %@\nComments: %@",[arrTemp objectAtIndex:0],[arrTemp objectAtIndex:1],[arrTemp objectAtIndex:2], [arrTemp objectAtIndex:3], [arrTemp objectAtIndex:4], [arrTemp objectAtIndex:5]];
    } else {
        arrTemp = [[NSArray alloc] initWithArray:[userStandards objectForKey:keyTemp]];
        cell.inputTextArea.text = [NSString stringWithFormat:@"Name: %@\nPhone: %@\nEmail: %@\nCity/State: %@\nZip: %@\nComments: %@",[arrTemp objectAtIndex:0],[arrTemp objectAtIndex:1],[arrTemp objectAtIndex:2], [arrTemp objectAtIndex:3], [arrTemp objectAtIndex:4], [arrTemp objectAtIndex:5]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:54:01.207

检查您的代码：

```
if ([[userStandards objectForKey:keyTemp] count]==3)
{

  // Your array only have 3 elements (index 0,1, and 2)

  // Here you accessing index beyond 2
  cell.inputTextArea.text = [NSString stringWithFormat:@"Name: %@\nPhone: %@\nEmail: %@\nCity/State: %@\nZip: %@\nComments: %@",[arrTemp objectAtIndex:0],[arrTemp objectAtIndex:1],[arrTemp objectAtIndex:2], [arrTemp objectAtIndex:3], [arrTemp objectAtIndex:4], [arrTemp objectAtIndex:5]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:00:09.073

使用这种方式：

以下行是正确的，arrTemp 中有 6 个值。

```
arrTemp = [[NSArray alloc] initWithObjects:@"",@"",@"",@"",@"",@"",nil]; 
```

但是在这只有 3 个在 arrTemp 中。

```
arrTemp = [[NSArray alloc] initWithArray:[witDict objectForKey:keyTemp]]; 
```

您正在输入第二个....在 keyTemp 中添加更多键/值或更改您的逻辑。

# jenkins - CI 与 Jenkins：如何强制在从机而不是主机上进行构建？

> ID：13946929
> 
> 赞同：14
> 
> 时间：2012-12-19T06:47:00.343
> 
> 标签：jenkins, continuous-integration, jenkins-slave

我正在使用 Jenkins 进行 CI，我有一个主服务器和两个从服务器，主服务器正在运行 Jenkins，我只希望从服务器执行实际的构建任务，有什么地方可以配置它吗？我知道有一个“执行者”，如果我在 master 上将其更改为 0，则 master 可能不会构建任何东西，但有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-19T09:17:57.817

您可以使用作业中的“限制此项目的运行位置”选项来设置作业的运行位置。此设置可以与您添加到从站的标签一起使用。

例如，两个具有标签“Linux-buildserver”并使用该标签的从属服务器会将作业拆分到这两个从属服务器上。将 IP 地址设置为作业中的标记将确保仅使用 buildserver / slave。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-14T16:41:18.230

我设置新 Jenkins 主服务器的第一步是执行您在问题中提到的操作，在主服务器配置中将“执行程序”设置为零。

这可以防止任何东西都建立在 master 上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T09:11:48.790

在配置节点时，有一个选项，“让这台机器只用于绑定的作业”。如果选择“让这台机器只用于绑定的作业”选项，那么奴隶将被限制在其上运行的作业使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-06T07:23:32.963

更好的方法是给主服务器一个标签并限制在主服务器上运行的内容，这样您的每个构建都不必指定标签。

# rest - 用于移动应用身份验证的 REST API 的正确工作流程

> ID：13946931
> 
> 赞同：1
> 
> 时间：2012-12-19T06:47:07.360
> 
> 标签：rest, authentication, authorization, mobile-application

我正在为移动应用程序开发人员构建一个 REST API，以便在使用 Zend 框架构建的 Web 应用程序上使用。我的第一个任务是创建用于身份验证/授权的服务。我在这里阅读了很多关于 SO 的相关问题，并想总结一下我在做什么：

1.  不涉及会话或 cookie，因此检查用户登录状态的典型 Web 应用程序方法在这里不起作用。
2.  对于每个登录请求，都会收到用户名和密码，并根据用户名生成随机字符串并保存在数据库中。此外，此字符串与身份验证请求一起返回。
3.  此用户令牌与任何需要身份验证的请求一起发送。此令牌与 DB 中存储的值相匹配，如果匹配，则仅允许用户执行所需的任务。
4.  注销时，数据库中的令牌值重置为空白或 NULL。

这是正确的方法吗？它不会使数据库过载，因为对于每个请求，都会在数据库上运行一个选择查询来检查令牌值吗？如果您能提供任何教程链接，将不胜感激。

# coldfusion - 创建包含文件日志coldfusion

> ID：13946934
> 
> 赞同：2
> 
> 时间：2012-12-19T06:47:39.643
> 
> 标签：coldfusion

我想创建一个日志文件。我试过了，但它告诉我一个错误。任何人都可以帮忙吗？我在这里展示我的完整代码：

[http://pastebin.com/SxAMCUnv](http://pastebin.com/SxAMCUnv)

请看这条线。我不知道它发生了什么，可以输出错误：

```
<cffile action="WRITE" file="#expandpath('API.log')#" 
    output="#filecontent#" addnewline="Yes" fixnewline="No" 
```

* * *

**编辑：**我试过了，它向我显示了一个错误：

> 在第 213 行第 110 列发现无效的 CFML 构造。ColdFusion 正在查看以下文本：
> 
> ''
> 
> CFML 编译器正在处理：
> 
> ```
> A cffile tag beginning on line 213, column 2. 
> ```

主要错误在这一行：

```
<cffile action="WRITE" file="#expandpath('Info.log')#" 
   output="#filecontent#" addnewline="Yes" fixnewline="No" 
```

请告诉我发生了什么事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:14:57.800

一些东西。

1.  当您遇到错误时：告诉我们错误是什么，不要简单地说您遇到了错误。
2.  当您发布代码时，只发布与您的情况相关的代码，不要发布*所有*代码。你给了我们将近 200 行代码，几乎所有的代码都不相关。
3.  您没有说明您自己在这里完成了哪些故障排除。这基本上就像您要求我们简单地为您完成您的工作。

如果你澄清你的问题，我会取消我的反对票。

粗略地看一下您的代码表明您正在尝试写出一个变量`fileContent`，但您实际上并没有设置该变量。如果没有看到错误，就无法知道这是否是问题所在，或者变量是在您*未*包含的代码中创建的。

另一个考虑因素是您在这里稍微重新发明了轮子。ColdFusion 具有用于写入日志文件的内置[`<cflog>`](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d0d.html)标签或语句。[`writeLog()`](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WS48D04B65-0694-44e9-9E35-F9D7C9152B6C.html)

=====

更新（基于对问题的更新）这是您遇到的编译错误，并且出错的行不是您在代码中指出的行（@pastebin），这有点奇怪。你能确认第 213 行是那条`<cffile>`线吗？您能否完整地复制该行（您引用的片段不完整）。但基本上错误消息告诉您出了什么问题：您的代码中有语法错误。错误消息可能在特定语句中（行和列），尽管有时取决于代码，CF 编译器可能会感到困惑，并且前一行中的语法错误可能会报告为比实际文件更靠后是。但是对于初学者来说，发布整行代码，而不仅仅是它的第一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:57:48.737

***评论 tl;dr 版本 -*** 这个答案有效，但提问者开始询问有关新错误的问题，他被敦促创建一个新问题。

***答：*** 我在您发布的链接中没有看到这一行（我搜索了`api.log`）。 `Invalid CFML construct`通常意味着您有语法错误，通常忘记结束引号、第二磅或结束标记（大于）。如果以下建议不起作用，请在包含 cffile 的行的上方或下方查找闭合对的缺失部分。

您发布的代码：

```
<cffile action="WRITE" file="#expandpath('API.log')#" output="#filecontent#" addnewline="Yes" fixnewline="No" 
```

...没有大于关闭标签的关闭。如果那是您的实际代码，我会怀疑这是问题所在。

```
<cffile ...  >
            ^^^ this is missing right here 
```

如果您不打算采纳 Adam 的建议并使用 cflog（您应该这样做），那么您可能也想要`action="append"`或者您将继续用 fileContent 的内容覆盖文件。

**==编辑==**

附带说明，这不会解决您的问题，但您应该使用 cfqueryparam，尤其是在使用用户输入的数据时。

例如：

```
Select * 
FROM   Purchasers 
WHERE  PurchaserID = #PurchaserID# 
```

应该

```
Select * 
FROM   Purchasers 
WHERE  PurchaserID = <cfqueryparam cfsqltype="cf_sql_integer" value="#PurchaserID#"> 
```

# java - 将工件部署到 Nexus 时，maven properties-maven-plugin 不起作用

> ID：13946935
> 
> 赞同：0
> 
> 时间：2012-12-19T06:47:51.523
> 
> 标签：java, maven, deployment, maven-2, nexus

我正在使用 properties-maven-plugin 读取根目录下的外部属性文件以维护父模块的版本，因为我的项目中有相当多的子模块并且依赖关系树有点深。当我在本地构建并将工件安装到本地 repo 时它工作正常，但是当我尝试使用“mvn clean deploy”将它们发布到 Nexus 时出现 401 错误。我很确定这是由不合格的工件名称（releaseurl/{external.version}）引起的，external.version 应该是从外部文件读取的属性。但是，它最终没有被读取，当我在 project.parent.version 标记中明确声明版本时它工作得很好。有什么想法或解决方法吗？甚至在处理多模块项目时，尝试在所有模块中为父级和子级使用相同版本时如何处理版本控制。

该插件的maven pom如下，我在网上看到了一些关于阶段的评论，不确定如果将初始化更改为其他内容是否会起作用：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
        <artifactId>properties-maven-plugin</artifactId>
             <executions>
                 <execution>
                     <phase>initialize</phase>
                     <goals>
                         <goal>read-project-properties</goal>
                     </goals>
                     <configuration>
                            <files>
                                <file>external-file.properties</file>
                            </files>
                    </configuration>
                </execution>
            </executions>
    </plugin> 
```

# android - 如何在 LinearLayout 中的两个按钮之间留出间隙

> ID：13946936
> 
> 赞同：7
> 
> 时间：2012-12-19T06:47:51.570
> 
> 标签：android, android-layout

在我的应用程序中，两个按钮在 LinearLayout 中垂直排列。我想在两个按钮之间提供一个间隙。请提供解决方案...

我的布局如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical"
  android:padding="10dp"
  >
<Button
    android:id="@+id/btnAction1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/cool_button"
    android:text = "HiText1"
/>

<Button
    android:id="@+id/btnAction2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/cool_button"
    android:text="HiText2"
    android:layout_below="@id/btnAction1"
/>        

</LinearLayout> 
```

图片

![在此处输入图像描述](../Images/6f9c9b24b2bc4d2d339e7e219ef5aefd.png)

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T06:51:17.493

在第二个按钮的顶部添加一个边距 (android:layout_marginTop="50dp")：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:orientation="vertical"
 android:padding="10dp"
 >
<Button
   android:id="@+id/btnAction1"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:background="@drawable/cool_button"
   android:text = "HiText1"
/>

<Button android:layout_marginTop="50dp"
   android:id="@+id/btnAction2"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:background="@drawable/cool_button"
   android:text="HiText2"
   android:layout_below="@id/btnAction1"
/>        

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T06:50:34.453

采用`android:layout_marginTop="10dp"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T06:49:46.900

`android:layout_marginTop="10.0dip"`在第二个按钮上使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T06:51:46.303

将此代码用于您的第二个按钮

```
<Buttonandroid:id="@+id/btnAction2"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/cool_button"
android:text="HiText2"
android:layout_marginTop="15dp"
/> 
```

# c++ - C中的&&&操作是什么

> ID：13946938
> 
> 赞同：197
> 
> 时间：2012-12-19T06:48:10.833
> 
> 标签：c++, c, operators, compiler-optimization, gcc-warning

```
#include <stdio.h>

volatile int i;

int main()
{
    int c;

    for (i = 0; i < 3; i++) 
    {
         c = i &&& i;
         printf("%d\n", c);
    }

    return 0;
} 
```

使用编译的上述程序的输出`gcc`是

```
0
1
1 
```

使用`-Wall`or`-Waddress`选项，`gcc`发出警告：

```
warning: the address of ‘i’ will always evaluate as ‘true’ [-Waddress] 
```

`c`在上述计划中如何评估？

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2012-12-19T06:51:26.037

它是`c = i && (&i);`，第二部分是多余的，因为`&i`永远不会评估为`false`。

对于用户定义的类型，您实际上可以重载 unary `operator &`，它可能会有所不同，但这仍然是一个**非常糟糕的主意**。

如果你**打开警告**，你会得到类似的东西：

> 警告：“i”的地址将始终评估为“真”</p>

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-12-19T06:52:56.810

C中没有`&&&`运算符或标记。但是`&&`（逻辑“与”）和`&`（一元地址或按位“与”）运算符确实存在。

根据[最大咀嚼](http://en.wikipedia.org/wiki/Maximal_munch)规则，这：

```
c = i &&& i; 
```

相当于：

```
c = i && & i; 
```

如果两者都为真，则设置`c`为 1 ，如果其中任何一个为假，则设置为 0。`i``&i`

对于 int，任何非零值都为真。对于指针，任何非空值都为真（并且对象的地址始终非空）。所以：

如果非零或等于零，则设置`c`为 1 。`i``0``i`

这意味着`&&&`这里使用的只是故意混淆。分配也可能是以下任何一种：

```
c = i && 1;
c = !!i;
c = (bool)i;          // C++ or C with <stdbool.h>
c = i ? 1 : 0;        /* C */
c = i ? true : false; // C++ 
```

# java - 这 未使用标签

> ID：13946946
> 
> 赞同：3
> 
> 时间：2012-12-19T06:49:03.327
> 
> 标签：java, jsp, localization

我使用MyEclipse编译我的程序，我想实现*国际化*，所以我选择使用`fmt`标签。

以下是代码：

```
<fmt:setLocale value="${param.locale }" scope="session" /> 
```

书上说`${param.locale }`可以得到浏览器的`default-language`. 为了改变语言，我使用了两种语言，英文和中文。虽然我将浏览器设置`default-language`为英文，但当我重新加载jsp页面时，语言总是中文。你能告诉我这是怎么回事吗？

完整代码：

```
<%@ taglib prefix="fmt" uri="java.sun.com/jsp/jstl/fmt"; %> 
<fmt:setLocale value="${param.locale }" scope="session" /> <fmt:setBundlebasename="loginpage"/> <input type="text" id="text1" /> <br/> <input type="password" id="text2" /> <br /> <input type="submit" id="smb" value="<fmt:message key="login_sub" />" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:34:29.383

不，那不是真的。EL`param`对象将请求参数名称映射到单个值。如果`param.locale`存在，那么您可以`locale`通过`fmt:setLocale/>`标签进行设置。

本文中的文本 -[通过自定义标签进行格式化和国际化](http://www.ibm.com/developerworks/java/library/j-jstl0415/)

> 格式化数据时 JSTL 标记使用的语言环境通常是通过检查用户浏览器作为每个 HTTP 请求的一部分发送的 Accept-Language 标头来确定的。如果不存在这样的标头，那么 JSTL 提供了一组 JSP 配置变量，您可以设置这些变量来指定默认语言环境。如果尚未设置这些配置变量，则使用 JVM 的默认语言环境，该语言环境是从运行 JSP 容器的操作系统获得的。

并查看 SO 线程 -[如何从 Java 代码中设置 JSTL 语言环境？](https://stackoverflow.com/questions/6126542/how-to-set-jstl-locale-from-java-code)

# android - 在适配器中使用布局充气器时出现 IllegalStateException

> ID：13946949
> 
> 赞同：1
> 
> 时间：2012-12-19T06:49:15.883
> 
> 标签：android, android-fragments, android-gridview, baseadapter, illegalstateexception

我有一个仅包含 a 的片段，`GridView`并且我有一个适配器用于`LayoutInflater`从 XML 创建其视图。下面是我的片段：

```
public class MagazineFragment extends SherlockFragment{
private GridView mGridView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.magazine_grid, container);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    mGridView = (GridView)view.findViewById(R.id.grid_view);
    mGridView.setAdapter(new MagazineAdapter(getActivity(), savedInstanceState));
}

class MagazineAdapter extends BaseAdapter{
    int[] mImages;
    private Context mContext;
    private Bundle mSavedInstanceState;

    public MagazineAdapter(Context context, Bundle savedInstanceState) {
        mContext = context;
        mSavedInstanceState = savedInstanceState;
        mImages = getResources().getIntArray(R.array.magazines);
    }

    @Override
    public int getCount() {
        return mImages.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ImageView imageView;
        if(convertView == null){
            imageView = (ImageView)getLayoutInflater(mSavedInstanceState).inflate(R.layout.magazine_grid_item, parent, false);
        }else{
            imageView = (ImageView)convertView;
        }

        imageView.setImageResource(mImages[position]);
        return imageView;
    }

} 
```

}

和杂志_grid.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/grid_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:columnWidth="150dip"
    android:numColumns="auto_fit"
    android:gravity="center"
    android:stretchMode="columnWidth"
    android:scrollbarStyle="outsideOverlay"
    android:padding="4dip"/> 
```

和杂志_grid_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="150dip"
    android:layout_height="200dip"
    android:adjustViewBounds="true"
    android:scaleType="fitCenter"
    android:paddingTop="6dip"
    android:paddingBottom="6dip" 
    android:paddingLeft="2dip"
    android:paddingRight="2dip"/> 
```

日志消息：

```
12-19 08:38:36.675: E/AndroidRuntime(11977): FATAL EXCEPTION: main 12-19 08:38:36.675: E/AndroidRuntime(11977): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.coderdem.android.zaytung/com.coderdem.android.zaytung.MainActivity}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 12-19 08:38:36.675: E/AndroidRuntime(11977):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967) 12-19 08:38:36.675: E/AndroidRuntime(11977):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992) 12-19 08:38:36.675: E/AndroidRuntime(11977):   at android.app.ActivityThread.access$600(ActivityThread.java:127) 12-19 08:38:36.675: E/AndroidRuntime(11977):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158) 12-19 08:38:36.675: E/AndroidRuntime(11977):    at android.os.Handler.dispatchMessage(Handler.java:99) 12-19 08:38:36.675: E/AndroidRuntime(11977):     at android.os.Looper.loop(Looper.java:137) 12-19 08:38:36.675: E/AndroidRuntime(11977):     at android.app.ActivityThread.main(ActivityThread.java:4511) 12-19 08:38:36.675: E/AndroidRuntime(11977):   at java.lang.reflect.Method.invokeNative(Native Method) 12-19 08:38:36.675: E/AndroidRuntime(11977):    at java.lang.reflect.Method.invoke(Method.java:511) 12-19 08:38:36.675: E/AndroidRuntime(11977):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980) 12-19 08:38:36.675: E/AndroidRuntime(11977):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747) 12-19 08:38:36.675: E/AndroidRuntime(11977):    at dalvik.system.NativeStart.main(Native Method) 12-19 08:38:36.675: E/AndroidRuntime(11977): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 12-19 08:38:36.675: E/AndroidRuntime(11977):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3342) 12-19 08:38:36.675: E/AndroidRuntime(11977):    at android.view.ViewGroup.addView(ViewGroup.java:3213) 12-19 08:38:36.675: E/AndroidRuntime(11977):     at android.view.ViewGroup.addView(ViewGroup.java:3170) 12-19 08:38:36.675: E/AndroidRuntime(11977):     at android.view.ViewGroup.addView(ViewGroup.java:3150) 12-19 08:38:36.675: E/AndroidRuntime(11977):     at android.support.v4.app.NoSaveStateFrameLayout.wrap(NoSaveStateFrameLayout.java:40) 12-19 08:38:36.675: E/AndroidRuntime(11977):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:915) 12-19 08:38:36.675: E/AndroidRuntime(11977):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088) 12-19 08:38:36.675: E/AndroidRuntime(11977):   at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682) 12-19 08:38:36.675: E/AndroidRuntime(11977):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444) 12-19 08:38:36.675: E/AndroidRuntime(11977):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:551) 12-19 08:38:36.675: E/AndroidRuntime(11977):  at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1136) 12-19 08:38:36.675: E/AndroidRuntime(11977):  at android.app.Activity.performStart(Activity.java:4480) 12-19 08:38:36.675: E/AndroidRuntime(11977):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1940) 12-19 08:38:36.675: E/AndroidRuntime(11977):  ... 11 more 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:35:23.513

你的`onCreateView`：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // why?
    container.removeAllViews();
    return inflater.inflate(R.layout.magazine_grid, container);
} 
```

是不正确的。尝试像这样修改它：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
     // Android will attach the view returned by this method on its own so don't 
     // add it yourself to the container
     return inflater.inflate(R.layout.magazine_grid, container, false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:10:55.020

***在您的MagazineFragment***类中使用此代码代替重写方法 *public View getView()*

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {

    //Use here parent to remove previouse view
       parent.removeAllViews();
       //this create a new view.
    final ImageView imageView;
    if(convertView == null){
        imageView = (ImageView)getLayoutInflater(mSavedInstanceState).inflate(R.layout.magazine_grid_item, parent, false);
    }else{
        imageView = (ImageView)convertView;
    }

    imageView.setImageResource(mImages[position]);
    return imageView;
} 
```

这可能会对您有所帮助。

# gwt - gwt 在开发模式下如何接收请求并加载 ui？

> ID：13946950
> 
> 赞同：0
> 
> 时间：2012-12-19T06:49:17.270
> 
> 标签：gwt

我是 GWT 的新手，并且理解创建如此好的框架背后的动机。但是我无法理解 GWT 在开发模式下如何构建 UI 和显示。

据说，当引导 .nocache.js 文件加载到浏览器中时，该文件创建了一个隐藏的 iframe。然后根据浏览器和语言设置，在所有应用程序逻辑所在的 iframe 中加载一个 .cache.html 文件。

我无法理解的是 gwt 在开发模式/托管模式下如何做到这一点。因为 .cache.html 文件在开发模式下不可用。我假设 sdk 收到来自 .nocache.js 文件的关于浏览器详细信息的请求，然后为该特定浏览器生成一个 .cache.html 文件并加载到 iframe 中。我的问题是 .nocache.js 文件如何向 sdk 发送请求以动态生成 .cache.html 文件？还是它与hosted.html 和浏览器插件有关？在开发模式下如何加载 UI 和 RPC 代码。要让 nocache.js 文件发送请求，必须有一个服务器程序 (Servlet) 监听请求并允许 GWt 开始寻找入口点类并开始生成 UI 内容。

我不明白 gwt 将如何了解浏览器设置并生成 UI？hosts.html 和浏览器插件是否与内容生成有关？

我用谷歌搜索，但我所有的试验都没有用。或者我可能使用错误的搜索键进行搜索。谁能告诉我或指向一个清楚解释的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:08:14.390

当应用程序在开发模式下运行时，Java 虚拟机 (JVM) 实际上将应用程序代码作为编译后的 Java 字节码执行，使用 GWT 管道连接到浏览器窗口。 ![在此处输入图像描述](../Images/07cab133a089be38e44ef45872a3af6f.png)

从 GWT 2.0 开始，开发模式使用常规浏览器而不是嵌入式浏览器。您可以使用任何支持的浏览器。进程外托管模式 (OOPHM) 即将替代 GWT 托管模式调试器。OOPHM 允许使用标准浏览器（IE、Safari（32 位）和 Firefox）来调试 GWT 客户端代码。

使用 OOPHM，您可以：

*   无需耗时的 Java 到 JavaScript 重新编译即可对您的小部件进行修改 为小部件代码设置断点。
*   使用在传统托管模式下不可用的任何高级浏览器功能和扩展（例如 Firebug）。

有用的链接：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging)

[http://code.google.com/p/google-web-toolkit/wiki/DesignOOPHM](http://code.google.com/p/google-web-toolkit/wiki/DesignOOPHM)

[http://code.google.com/p/google-web-toolkit/wiki/UsingOOPHM](http://code.google.com/p/google-web-toolkit/wiki/UsingOOPHM)

[http://www.slideshare.net/allahbaksh/gwt-generators-and-oophm](http://www.slideshare.net/allahbaksh/gwt-generators-and-oophm)

玩得开心。

# pug - 类似玉 printf 的数字格式

> ID：13946957
> 
> 赞同：2
> 
> 时间：2012-12-19T06:49:36.493
> 
> 标签：pug

如何控制 Jade 模板中数字的格式？

示例代码：

```
 for item in issue.item
   tr
    td.utilityValue #{item.$.value}
    td.utilityUtil #{item.$.evaluation * utilitySpace.weightmultiplyer} 
```

我希望用 2 个有效数字打印数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T11:57:15.793

这是我找到的解决方案；它适用于 Express 3：

1.  通过发出以下命令安装 sprintf：

    ```
    npm install sprintf 
    ```

2.  在 app.js 中：

    ```
    app.locals.sprintf = require('sprintf').sprintf;

    app.locals.format = "%+1.0f"; 
    ```

3.  在 template.jade 中：

    ...... td.utility #{sprintf(format, value)} ......

# sql - 循环使用条件更新行

> ID：13946961
> 
> 赞同：0
> 
> 时间：2012-12-19T06:50:08.627
> 
> 标签：sql, loops

我在表中有 2 位列*处于活动状态*并已*暂停* 活动列已包含值，但*暂停*的列仍为空

如何使用与*active*相反的值填充*暂停*的字段？

 *我被困在这段代码中..

```
 Declare @suspended bit;

 --some conditions

 Update Users_mock
 Set Suspended = @Suspended; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:58:56.360

一个简单的`case`陈述应该有效：

```
Update userM
Set suspend = case active when 0 then 1 else 0 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:59:11.340

您可以检查[数据库中的此更新 sql 位字段](https://stackoverflow.com/questions/6879999/update-sql-bit-field-in-database)。

它说，**SQL Server 中的位总是在位图中存储为 1 或 0。**

您可以使用`where`,`if-else`或`case`来更新列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:00:36.773

选择 abs(CONVERT(int,@suspended)-1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T07:03:25.230

试试这个：

```
update Users_mock
set Suspended = case when active=1 THEN 0
else 1
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T06:59:00.447

请试试：

```
Update Users_mock
Set Suspended = 1-Active; 
```*

# oracle11g - 由于归档日志已满，无法连接数据库

> ID：13946965
> 
> 赞同：1
> 
> 时间：2012-12-19T06:50:35.817
> 
> 标签：oracle11g

我们有一个几个月前创建的 oracle 11g 数据库。该数据库在端口 1531 上运行良好。但 3 天前，数据库突然无法连接。我们已经诊断出问题并发现存档日志已满。由于数据库无法连接，我们无法运行 RMAN 命令删除存档日志。

当我们尝试连接此数据库时，我们收到以下错误：

> ORA-19815: 警告: 7516192768 字节的 db_recovery_file_dest_size 已使用 100.00%，并且有 0 个剩余字节可用

错误文件路径如下

```
C:\app\Administrator\diag\rdbms\"DatabaseName"\"DatabaseName"\trace 
```

# php - 运行PHP项目不起作用

> ID：13946967
> 
> 赞同：-1
> 
> 时间：2012-12-19T06:50:40.107
> 
> 标签：php, mysql, apache2

我是 PHP 新手。我在我的 ubuntu 中安装了 MySql、PHP 和 Apache2。我有一个 web 服务 php 文件，我保存在 var/www 中。我在 var/www 中有一个名为 hello.html.Apache2 的 html 文件正在运行正确地，我使用 localhost 进行了检查，并且 hello.html 工作正常。但是在运行 php 文件时，它不起作用，并且 php 文件的所有内容都显示在我的浏览器中。任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:53:21.337

如果未安装 php，请运行此代码

```
sudo apt-get install php5

sudo apt-get install libapache2-mod-php5

sudo /etc/init.d/apache2 restart 
```

并尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:55:31.883

这意味着没有安装或配置 PHP。或者您必须将文件权限更改为只读。要重新安装它，请使用

```
sudo apt-get install php5

sudo apt-get install libapache2-mod-php5

sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:59:46.640

看看你的`/etc/httpd/conf.d/php.conf`（ubication可能会因分布而异）

确保在您的文件中有这一行，以便正确处理 php 脚本：

> AddHandler php5-script .php

# php - 从数组中的数组创建一个升序数组

> ID：13946968
> 
> 赞同：4
> 
> 时间：2012-12-19T06:50:40.083
> 
> 标签：php, arrays, multidimensional-array

我在 PHP 中有这个数组，其中我在数组中有一个数组，其中包含名称和排名。我希望排名按顺序排列。即从1到16。

```
$info = array(  array( "Name"=> "Ayush Mishra", "Rank"=> "1"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "16"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "14"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "15"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "13"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "12"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "11"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "10"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "8"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "9"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "7"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "5"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "4"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "3"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "6"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "2"),   ); 
```

我想要上面数组中的这个数组。这是我想要得到的结果数组。

```
$result = array( 

  array( "Name"=> "Ayush Mishra", "Rank"=> "1"),  
  array( "Name"=> "Teaser", "Rank"=> "2"), 
  array( "Name"=> "Pussel", "Rank"=> "3"),
  array( "Name"=> "Condomso", "Rank"=> "4"),  
  array( "Name"=> "Branite", "Rank"=> "5"),  
  array( "Name"=> "Biknol", "Rank"=> "6"),  
  array( "Name"=> "Fuckita", "Rank"=> "7"),
  array( "Name"=> "James", "Rank"=> "8"),  
  array( "Name"=> "Babita", "Rank"=> "9"),  
  array( "Name"=> "Mathse", "Rank"=> "10"), 
  array( "Name"=> "rohan", "Rank"=> "11"),  
  array( "Name"=> "Alex", "Rank"=> "12"), 
  array( "Name"=> "Peter", "Rank"=> "13"),  
  array( "Name"=> "Gabbar Singh", "Rank"=> "14"),  
  array( "Name"=> "raghav", "Rank"=> "15"), 
  array( "Name"=> "Shivam", "Rank"=> "16"),  

             ); 
```

我想要上面的数组作为 $info 的结果。请给我代码以使 $info 更改为 $result。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T06:56:53.190

不需要更多的东西：

```
function sort_by_rank($a, $b) {
    return $a['Rank'] > $b['Rank'];
}

usort($info, "sort_by_rank");
print_r($info); 
```

**输出**

```
Array
(
    [0] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 1
        )

    [1] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 2
        )

    [2] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 3
        )

    [3] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 4
        )

    [4] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 5
        )

    [5] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 6
        )

    [6] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 7
        )

    [7] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 8
        )

    [8] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 9
        )

    [9] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 10
        )

    [10] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 11
        )

    [11] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 12
        )

    [12] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 13
        )

    [13] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 14
        )

    [14] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 15
        )

    [15] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 16
        )

) 
```

如果您想维护原始索引，从您的问题来看，这似乎不是必需的，但如果是这样，请使用`uasort`而不是`usort`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:01:18.497

```
// this function will sort your multidimensional array by value
function aasort (&$array, $key) {
    $sorter=array();
    $ret=array();
    reset($array);
    foreach ($array as $ii => $va) {
        $sorter[$ii]=$va[$key];
    }
    asort($sorter);
    foreach ($sorter as $ii => $va) {
        $ret[$ii]=$array[$ii];
    }
    $array=$ret;
}

$info = array(  array( "Name"=> "Ayush Mishra", "Rank"=> "1"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "16"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "14"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "15"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "13"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "12"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "11"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "10"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "8"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "9"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "7"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "5"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "4"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "3"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "6"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "2"),   ); 

aasort($info,"Rank");

echo '<pre>';print_r($info); 
```

**输出：**

```
Array
(
    [0] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 1
        )

    [15] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 2
        )

    [13] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 3
        )

    [12] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 4
        )

    [11] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 5
        )

    [14] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 6
        )

    [10] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 7
        )

    [8] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 8
        )

    [9] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 9
        )

    [7] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 10
        )

    [6] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 11
        )

    [5] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 12
        )

    [4] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 13
        )

    [2] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 14
        )

    [3] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 15
        )

    [1] => Array
        (
            [Name] => Ayush Mishra
            [Rank] => 16
        )

) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T06:55:40.073

使用[usort](http://php.net/manual/en/function.usort.php)，使用用户定义的比较函数按值对数组进行排序

```
usort($info, 'sortfn');

function sortfn($a, $b)
{
    if($a['Rank'] == $b['Rank'])
        return ($a['Rank'] > $b['Rank']);
    else
        return ($a['Rank'] < $b['Rank']);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T06:56:32.197

```
<?php

$info = array(  array( "Name"=> "Ayush Mishra", "Rank"=> "1"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "16"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "14"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "15"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "13"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "12"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "11"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "10"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "8"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "9"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "7"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "5"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "4"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "3"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "6"),  
  array( "Name"=> "Ayush Mishra", "Rank"=> "2"),   ); 

foreach ($info as $key => $row) {
    $rank[$key]  = $row[rank];
    $name[$key] = $row['name'];
}
array_multisort($rank, SORT_DESC, $name, SORT_ASC, $info);
print_r($info);

?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T06:58:13.560

您可以定义自己的排序函数：

```
function cmp($a, $b)
{
  if ($a['Rank'] == $b['Rank'])
    return 0;
  return ($a['Rank'] < $b['Rank']) ? -1 : 1;
}

uasort($info, "cmp"); 
```

请注意，我使用`uasort`not `usort`，这是因为维护密钥。检查[文档](http://php.net/manual/en/function.uasort.php)以获取更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T09:28:20.453

我猜你想根据排名来订购它。

这是代码，

```
$result = $info;

for ($i = 0; $i < count($result); $i++)
{
    for ($j = 0; $j < $i; $j++)
    {
        //sorting based on rank
        if($result[$i]["Rank"] < $result[$j]["Rank"])
        {
            //Swapping rank
            $rank = $result[$i]["Rank"];
            $result[$i]["Rank"] = $result[$j]["Rank"];
            $result[$j]["Rank"] =$rank;

            //Swapping corresponding Names
            $name = $result[$i]["Name"];
            $result[$i]["Name"] = $result[$j]["Name"];
            $result[$j]["Name"] =$name;
        }       
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-19T06:59:05.947

```
$rank = array();
foreach ($result as $key => $row)
{
    $rank[$key] = $row['rank'];
}
array_multisort($rank, SORT_DESC, $result); 
```

# android - 为什么 AdMob 加载广告时我的 Android Activity 会关闭？

> ID：13946976
> 
> 赞同：2
> 
> 时间：2012-12-19T06:51:20.763
> 
> 标签：android, android-activity, admob

[按照此处](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)的说明，我一直在将 AdMob 广告放入其他可以正常工作的 Android 应用程序中。该应用程序有 2 个活动。其中一个只能从第一个到达。我目前正在向第二个活动添加广告。`AdView`我已经尝试在方法中以编程方式创建一个`onCreate`，并将适当的代码添加到 Activity 的 XML 布局文件中。在这两种情况下，活动都会退出第二个活动并转到第一个活动，就好像它一收到广告（或至少一些网络上的广告数据）就按下了后退按钮。如果我更改代码以免发出添加请求（即使我以编程方式添加广告但只是不调用`loadAd`)，或者如果我关闭我的网络访问，那么我看不到任何广告，但我的活动也没有退出。这可能是什么原因造成的？

我已经完成了所有（我相信过时的）步骤[，](https://stackoverflow.com/questions/4653763/android-admob-adview-force-close)但这并没有帮助。为了清楚以防我做错了什么，我有：

*   至少在上周五下载了最新的 Android 和 AdMob SDK。
*   在 default.properties （我必须在项目的根目录中创建，因为我做不好）和 project.properties （我认为项目实际使用的）中设置“target=android-17”。
*   在 AndroidManifest.xml 中设置 'android:minSdkVersion="3"'。
*   将库添加到项目中（通过将 GoogleAdMobAdsSdk-6.2.1.jar 放在项目根目录的 libs 目录中）。
*   添加了从[此处](https://developers.google.com/mobile-ads-sdk/docs/)`com.google.ads.AdActivity`复制到 AndroidManifest.xml 的内容。
*   添加了对 AndroidManifest.xml 的权限，再次从同一位置复制。
*   [从这里](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)复制代码和 XML 标记（和属性）并将它们添加到我的项目中（用我的发布者 ID 替换 MY_AD_UNIT_ID），尽管我还在代码中提出了使模拟器成为测试设备的请求。
*   添加了带有广告样式的 attrs.xml。我相当肯定这是过时的建议，但我还是照做了。我使用了[这个问题](https://stackoverflow.com/questions/4653763/android-admob-adview-force-close)中的那个，虽然我改成`com.admob.android.ads.AdView`了`com.google.ads`.

如果你想帮助我，我认为你会想知道的下一件事是 LogCat 所说的。不多：

```
09-02 14:33:34.861: I/Ads(12839): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"msid":"com.Package.Name","hl":"en","bas_off":0,"simulator":1,"preqs":0,"slotname":"a150cbaa53d9d3d","js":"afma-sdk-a-v6.2.1","isu":"B3EEABB8EE11C2BE770B684D95219ECB","u_audio":4,"cap":"m,a","cipa":0,"u_sd":1.5,"net":"ed","u_h":533,"oar":0,"session_id":"4834854664722735718","seq_num":"1","app_name":"1.android.com.Package.Name","bas_on":0,"kw":[],"u_w":320,"gnt":3,"adtest":"on","format":"320x50_mb","carrier":"310260","ad_pos":{"visible":0,"width":0,"height":0,"x":0,"y":0},"ptime":0});</script></head><body></body></html>
09-02 14:33:35.111: D/dalvikvm(12839): GC freed 8784 objects / 437720 bytes in 64ms
09-02 14:33:37.101: I/Ads(12839): Received ad url: <url: "http://googleads.g.doubleclick.net:80/mads/gma?msid=com.Package.Name&hl=en&bas_off=0&preqs=0&js=afma-sdk-a-v6.2.1&isu=B3EEABB8EE11C2BE770B684D95219ECB&u_audio=4&cap=m%2Ca&cipa=0&u_sd=1.5&net=ed&u_h=533&oar=0&session_id=4834854664722735718&seq_num=1&app_name=1.android.com.Package.Name&bas_on=0&kw&u_w=320&gnt=3&adtest=on&format=320x50_mb&carrier=310260&ptime=0&u_so=p&output=html&region=mobile_app&u_tz=0&client_sdk=1&ex=1&slotname=a14e8f77524dde8&kw_type=broad&gsb=3g&caps=interactiveVideo_th_autoplay_mediation_sdkAdmobApiForAds_di&jsv=41" type: "admob" afmaNotifyDt: "null" useWebViewLoadUrl: "false">
09-02 14:33:37.111: I/Ads(12839): Request scenario: Online server request.
09-02 14:33:38.061: I/jdwp(12861): received file descriptor 10 from ADB
09-02 14:33:38.091: D/ddm-heap(12861): Got feature list request 
```

编辑：我认为它不会很有用，但应 suleman khan 的要求，这是我当前的 XML

```
<com.google.ads.AdView android:layout_width="wrap_content"
    android:layout_height="wrap_content" ads:adUnitId="a150cbaa53d9d3d"
    ads:adSize="SMART_BANNER" android:id="@+id/adView" ads:refreshInterval="60" 
    ads:testDevices="TEST_EMULATOR"
    ads:loadAdOnCreate="true" /> 
```

我已经尝试了很多这样的变体，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:15:24.177

将此代码放在您的xml中：

```
<com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_alignParentTop="true"
                         android:layout_height="wrap_content"
                         ads:adUnitId="@string/my_publisher_id"
                         ads:adSize="SMART_BANNER"
                         ads:loadAdOnCreate="true"/> 
```

希望您已添加您的发布者 ID。

将其放在清单文件中的活动之后：

```
<activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

正如您所说，您已经在项目的 libs 中添加了 jar 文件，并希望您也在构建路径中配置了它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:21:39.247

上面的代码可以工作，你也可以删除这些标签

```
 android:minSdkVersion="8"
    android:targetSdkVersion="8" 
```

# android - 如何更改 Android 加载图标位置？

> ID：13946981
> 
> 赞同：1
> 
> 时间：2012-12-19T06:51:42.393
> 
> 标签：android, android-layout

第一张图片： ![在此处输入图像描述](../Images/1145c0b7c9bf0b1f2ce4e3fa41b9439b.png)

第二张图片： ![在此处输入图像描述](../Images/406cb001871c88998656353bccd7fc61.png)

第一个 XML：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:padding="10dp" >

    <EditText
        android:id="@+id/text"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="99.81"
        android:ems="10"
        android:hint="@string/search_hint" />

    <ImageButton
        android:id="@+id/add"
        android:layout_width="35dp"
        android:layout_height="match_parent"
        android:layout_weight="4.47"
        android:background="@drawable/search_button"
        android:contentDescription="@string/desc"
        android:src="@drawable/ic_menu_search_bar" />
</LinearLayout>

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#dddddd" />

<FrameLayout
    android:id="@+id/player_frag_content"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout> 
```

第二个 XML：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:padding="10dp" >

    <Button
        android:id="@+id/list_view_upcoming"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="@string/label_upcoming"
        android:layout_weight="1" />

    <Button
        android:id="@+id/list_view_completed"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/label_completed" />
</LinearLayout>

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#dddddd" />

<FrameLayout
    android:id="@+id/fragment_content"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout> 
```

请问谁能帮我改变我的第一次加载，使它像第二次加载一样中间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:08:22.223

我已经解决了。

我将第二个 xml 的布局高度更改为：

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:padding="10dp" >

    <Button
        android:id="@+id/list_view_upcoming"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="@string/label_upcoming"
        android:layout_weight="1" />

    <Button
        android:id="@+id/list_view_completed"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/label_completed" />

</LinearLayout>

<View
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#dddddd" />

<FrameLayout
    android:id="@+id/fragment_content"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T07:00:31.947

尝试在 Manifest.xml 中使用以下活动属性

```
android:windowSoftInputMode="adjustPan" or "adjustResize" 
```

# .net - 如何在 C# 系统中获取访问过的网站 URL

> ID：13946984
> 
> 赞同：1
> 
> 时间：2012-12-19T06:52:00.273
> 
> 标签：.net, windows, vb.net

我想通过 VB.Net 获取系统中访问的网站 url。当 Windows 启动时，一个 exe 应该在后台运行，它应该记录所有访问过的网站 url。

即使用户清除历史记录，缓存我想要所有的 url。一旦浏览器请求一个 url，它就应该被记录下来。

我尝试使用此代码

> 私有函数 RunScript(ByVal scriptText As String) As String

```
 Dim MyRunSpace As Runspace = RunspaceFactory.CreateRunspace()
  MyRunSpace.Open()
  Dim MyPipeline As Pipeline = MyRunSpace.CreatePipeline()
  MyPipeline.Commands.AddScript(scriptText)
  MyPipeline.Commands.Add("Out-String")
  Dim results As Collection(Of PSObject) = MyPipeline.Invoke()
  MyRunSpace.Close()
  Dim MyStringBuilder As New StringBuilder()
  For Each obj As PSObject In results
    MyStringBuilder.AppendLine(obj.ToString())
  Next
 Return MyStringBuilder.ToString()

End Function 
```

在那个 scriptText 是： -

> “ipconfig /displaydns | select-string '记录名称' | foreach-object { $_.ToString().Split(' ')[-1]}”

这提供了网站 url，但还有很多其他的东西。还有一些丢失了，只能在 Windows 7 中工作。

如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:10:10.993

我认为你需要一个网络嗅探器。阅读[这篇](http://www.codeproject.com/Articles/17031/A-Network-Sniffer-in-C)文章，了解更多关于如何使用 C# 编写它的信息。您可以随时使用[此处](http://www.developerfusion.com/tools/convert/csharp-to-vb/)的转换器`C#`来转换代码。`VB.Net`

# xlsx - 为什么 Open Office Calc 中的数据重复

> ID：13946988
> 
> 赞同：-1
> 
> 时间：2012-12-19T06:52:23.627
> 
> 标签：xlsx, openoffice-calc

我在 open office calc（在我的 Mac 上）中打开了一个 .xlsx 文件，并且大多数具有编号列表项的单元格中的数据重复了两次。

例如，如果特定单元格的编号列表如下：

```
1\. something
2\. something
3\. something 
```

然后这个列表将像这样重复两次：

```
1\. something
2\. something
3\. something
1\. something
2\. something
3\. something 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:50:51.640

这一直让我发疯。我最终通过将文件保存为 .xls (97-2004) 格式在 Excel 中修复它，然后在 Open Office 中打开它。

# objective-c - 生成csv文件失败

> ID：13946990
> 
> 赞同：3
> 
> 时间：2012-12-19T06:52:46.843
> 
> 标签：objective-c, ios, csv

```
-(void)generateCSV
{
NSFileManager *filemgr = [NSFileManager defaultManager];

[filemgr createFileAtPath:@"test.csv" contents:nil attributes: nil];
NSFileHandle *file = [NSFileHandle fileHandleForReadingAtPath:@"test.csv"];

NSLog (@"why null %@", file);
[file seekToEndOfFile];

NSLog(@"%@", file);

surveyarray = [db retrieveSurvey];

for(int i = -1; i < surveyarray.count; i++)
{
    if(i == -1)
    {
        NSString *str = [NSString stringWithFormat: @"No, CreatedDate, Question1, Question2, Question3, Comment\n"];
        [file writeData: [str dataUsingEncoding: NSUTF16LittleEndianStringEncoding]];
    }
    else
    {
        survey = [surveyarray objectAtIndex:i];
        NSString *str = [NSString stringWithFormat: @"%d, %@, %@, %@, %@, %@\n", i,  survey.createddate, survey.question1, survey.question2, survey.question3, survey.comment];
        [file writeData: [str dataUsingEncoding: NSUTF16LittleEndianStringEncoding]];
    }
}

[file closeFile];

/*CHCSVWriter * csvWriter = [[CHCSVWriter alloc] initWithCSVFile:fullPath atomic:NO];

NSInteger numberOfColumns = 5;

for (NSInteger currentIndex = 0; currentIndex < [surveyarray count]; currentIndex++)
{
    id field = [surveyarray objectAtIndex:currentIndex];

    [csvWriter writeField:field];

    if ((currentIndex % numberOfColumns) == (numberOfColumns - 1))
    {
        [csvWriter writeLine];
    }
}

[csvWriter release];*/
} 
```

我记录了文件并返回`(null)`

日志输出

```
2012-12-19 14:46:55.853 OCBC[6725:907] (null)
2012-12-19 14:46:55.860 OCBC[6725:907] 2012-12-19 14:14:31
2012-12-19 14:46:55.862 OCBC[6725:907] Interview
2012-12-19 14:46:55.863 OCBC[6725:907] Visitor
2012-12-19 14:46:55.865 OCBC[6725:907] Meet Expectation
2012-12-19 14:46:55.866 OCBC[6725:907] N/A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:30:20.207

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *filePath = [documentsDir stringByAppendingPathComponent:@”test.csv”]; 
```

尝试将 传递`filePath`给您的方法

# android - 在同一线程的情况下如何避免GLSurfaceView出现queueEvent

> ID：13946992
> 
> 赞同：1
> 
> 时间：2012-12-19T06:52:54.670
> 
> 标签：android, opengl-es, glsurfaceview

我正在编写在其他线程上处理 Android OpenGL 的程序。但如果出现此代码，它会冻结。例如，如果它是同一个线程，它直接处理一个方法而不调用 task.get()。这种方式存在吗？

```
public void onSurfaceCreated(GL10 arg0, EGLConfig arg1)
{
    Thread t = new Thread(new Runnable(){
        @Override
        public void run()
        {
            FutureTask<Object> task = new FutureTask<Object>(new Callable<Object>() {
                @Override
                public Object call() {
                    return null;
                }
            });
            gv.queueEvent(task);
            try{
                task.get();
            }catch(Exception e){

            }
            Log.i("MainActivity", "Done");    // <- Work
        }
    });
    t.start();

    FutureTask<Object> task = new FutureTask<Object>(new Callable<Object>() {
        @Override
        public Object call() {
            return null;
        }
    });
    gv.queueEvent(task);
    try{ task.get(); }catch(Exception e){}    // <- Freeze
    Log.i("MainActivity", "Done"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:31:35.137

如果我正确解释了您的问题，那么您希望在 OpenGL 线程中运行一些代码，而不**使用**或其他异步解决方案。`FutureTask``Runnable`

首先，这段代码（及其任何数据）是否依赖于其他线程？是否需要与其他代码/数据同步？如果是，那么您应该`queueEvent()`从不同的线程中使用。由于您想完全留在 OpenGL 线程中，我假设您要执行的代码与其他（非 GL）线程没有任何关系。

此外，永远不要`FutureTask.get()`从与应该执行代码的线程相同的线程中调用`FutureTask`——如果你的线程正在等待自己，谁来执行这项工作？如果你想从另一个线程向 GL 线程发送代码，不要使用`FutureTask`; 只需`Runnable`对它使用简单的（作为 的参数`queueEvent()`）。

回到主要问题：要在不使用 GL 线程的情况下运行某些`queueEvent()`内容，您应该决定您希望如何准确地执行该工作，即应该在何时（何地）准确地调用它。你想在每次调用时`onDrawFrame()`都调用它吗？还是每次`onSurfaceChanged()`或被`onSurfaceCreated()`调用？

由于您使用`queueEvent()`了 ，我假设您希望您的代码在下一个即将到来的`onDrawFrame()`调用之前运行。在Android GL线程内部，调用顺序如下：

1.  Android 处理所有排队的事件（我简化了一点，但要点是好的）
2.  如果需要，Android 调用`onSurfaceCreated()`
3.  如果需要，Android 调用`onSurfaceChanged()`
4.  安卓通话`onDrawFrame()`

因此，简单地说，您添加的代码`queueEvent()`将在下一个渲染周期 ( `onDrawFrame()`) 之前执行。如果要在 GL 线程上运行这段代码`onDrawFrame()`，可以将其添加到 的开头`onDrawFrame()`，例如：

```
@Override
public void onDrawFrame(GL10 gl) {
    if (mDoJob) {
        mDoJob = false;

        // perform code
    }

    ...
} 
```

这里，`mDoJob`是一个`volatile`变量。您可以将其设置为`true`来自另一个线程。**但是，请注意**，这假设您不需要与使用该`mDoJob`信号的其他线程进行任何额外的同步，即，将在`mDoJob`条件块中运行的所有代码都可以正常运行，而无需与其他任何东西进一步同步。

基本上，我上面介绍的只是一个简化的（非同步的）替换解决方案`queueEvent()`，它假设您不需要与其他线程同步（包括最新的变量）。

如果您不需要任何信号（与其他线程的任何依赖关系），并且 的值`mDoJob`可以在 OpenGL 线程内部（内部`onDrawFrame()`，`onSurfaceCreated()`或`onSurfaceChanged()`）决定，则`mDoJob`不需要是 volatile。在这种情况下，您将停留在 OpenGL 线程中，因此不需要异步（因此是同步的）解决方案。

总而言之，具体来说，如果您想决定`onSurfaceCreated()`代码是否应该在 中运行`onDrawFrame()`，只需使用您在 中设置的（非易失性）布尔变量，`onSurfaceCreated()`然后将其签入`onDrawFrame()`（如我上面的代码示例所示）。

# node.js - 当我将 mers 与 node.js 和 mongodb 一起使用时，不会创建属性

> ID：13946998
> 
> 赞同：0
> 
> 时间：2012-12-19T06:53:15.637
> 
> 标签：node.js, mongodb, express, schema

我正在尝试使用 mers 通过 mers 将数据存储在 mongoDB 中。这是我的设置的摘录：

文件模型/Plan.js

```
var mongoose = require('mongoose'),
    Schema = mongoose.Schema,
    ObjectId = mongoose.Schema.ObjectId;

var PlanSchema = new Schema({
    name: String
});

var plan = module.exports.plan = mongoose.model('plan', PlanSchema); 
```

在 app.js 我有

```
"use strict";

/**
 * Module dependencies.
 */

var express = require('express'),
    routes = require('./routes'),
    mongoose = require('mongoose'),
    mers = require('mers');

var Plan = require('./models/Plan').Plan;

var app = module.exports = express.createServer();

// Configuration

app.configure(function () {
  app.set('view engine', 'ejs');
  app.set('view options', { open: '<?', close: '?>' }); // match ejs in st2
  app.set('views', __dirname + '/views');
  app.set('partials', __dirname + '/views/partials');

  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ secret: 'your secret here' }));
  app.use(app.router);

  // Database Connection (this works)
  uri = 'mongodb://username:password@address';
  mongoose.connect(uri);

  app.use('/rest', mers({mongoose: mongoose}).rest());

  app.use(require('less-middleware')({ src: __dirname + '/public' }));
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function () {
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function () {
  app.use(express.errorHandler());
});

// Routes

app.get('/', routes.index);

app.listen(3000);
console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env); 
```

我尝试通过调用来创建计划

```
curl -i -X POST -d '{"name":"foo"}' http://localhost:3000/rest/plan 
```

结果：在 mongodb 集合“计划”中创建了一个条目，看起来像

```
{
    "_id": {
        "$oid": "50d0f2f2234005ef27000004"
    },
    "__v": 0
} 
```

我缺少计划架构中定义的“名称”属性。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:34:19.613

错误不在 JavaScript 代码中，而是 curl 请求：

```
curl -X POST -H "Content-Type: application/json" -d '{"name":"foo"}' http://localhost:3000/rest/Plan 
```

感谢[https://stackoverflow.com/a/1836922/449436](https://stackoverflow.com/a/1836922/449436)